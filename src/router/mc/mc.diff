diff -urpN mc-4.8.23/INSTALL mc-4.8.24/INSTALL
--- mc-4.8.23/INSTALL	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/INSTALL	2020-01-01 19:52:34.000000000 +0400
@@ -15,11 +15,9 @@ Build requirements for GNU Midnight Comm
 - autoconf
 - automake
 - libtool
-- glib2
-- pcre (if glib < 2.14)
-- slang or ncurses
-- gettext
-- cvs (for gettext < 0.18 or if gettext >= 0.18 is built with --with-cvs)
+- glib2 >= 2.26
+- slang2 or ncurses
+- gettext >= 0.18.1
 - libssh2 >= 1.2.5 is required only for sftp vfs (1.2.7 if you need ssh-agent support)
 - libaspell to support spell checking in the internal editor
 
diff -urpN mc-4.8.23/Makefile.am mc-4.8.24/Makefile.am
--- mc-4.8.23/Makefile.am	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/Makefile.am	2020-01-01 19:52:34.000000000 +0400
@@ -1,7 +1,7 @@
 ## Process this file with automake to create Makefile.in.
 AUTOMAKE_OPTIONS = 1.5
 
-SUBDIRS = intl po lib src doc contrib misc
+SUBDIRS = po lib src doc contrib misc
 
 if HAVE_TESTS
     SUBDIRS += tests
diff -urpN mc-4.8.23/Makefile.in mc-4.8.24/Makefile.in
--- mc-4.8.23/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -92,24 +92,14 @@ host_triplet = @host@
 @HAVE_TESTS_TRUE@am__append_1 = tests
 subdir = .
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -159,8 +149,7 @@ am__CONFIG_DISTCLEAN_FILES = config.stat
  configure.lineno config.status.lineno
 mkinstalldirs = $(install_sh) -d
 CONFIG_HEADER = config.h
-CONFIG_CLEAN_FILES = intl/Makefile \
-	tests/src/vfs/extfs/helpers-list/data/config.sh
+CONFIG_CLEAN_FILES = tests/src/vfs/extfs/helpers-list/data/config.sh
 CONFIG_CLEAN_VPATH_FILES =
 SCRIPTS = $(dist_noinst_SCRIPTS)
 AM_V_P = $(am__v_P_@AM_V@)
@@ -220,13 +209,13 @@ am__define_uniq_tagged_files = \
 ETAGS = etags
 CTAGS = ctags
 CSCOPE = cscope
-DIST_SUBDIRS = intl po lib src doc contrib misc tests
+DIST_SUBDIRS = po lib src doc contrib misc tests
 am__DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/config.h.in \
 	$(top_srcdir)/config/compile $(top_srcdir)/config/config.guess \
 	$(top_srcdir)/config/config.rpath \
 	$(top_srcdir)/config/config.sub \
 	$(top_srcdir)/config/install-sh $(top_srcdir)/config/ltmain.sh \
-	$(top_srcdir)/config/missing $(top_srcdir)/intl/Makefile.in \
+	$(top_srcdir)/config/missing \
 	$(top_srcdir)/tests/src/vfs/extfs/helpers-list/data/config.sh.in \
 	ABOUT-NLS AUTHORS COPYING ChangeLog INSTALL NEWS README \
 	config/compile config/config.guess config/config.rpath \
@@ -275,7 +264,6 @@ am__distuninstallcheck_listfiles = $(dis
   | sed 's|^\./|$(prefix)/|' | grep -v '$(infodir)/dir$$'
 distcleancheck_listfiles = find . -type f -print
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -283,18 +271,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -334,10 +319,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -345,13 +327,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -359,12 +335,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -372,24 +343,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -423,7 +386,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -435,12 +397,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -506,7 +464,7 @@ top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
 AUTOMAKE_OPTIONS = 1.5
-SUBDIRS = intl po lib src doc contrib misc $(am__append_1)
+SUBDIRS = po lib src doc contrib misc $(am__append_1)
 EXTRA_DIST = 
 dist_noinst_SCRIPTS = build-glib2.sh
 dist_noinst_HEADERS = $(top_srcdir)/version.h
@@ -599,8 +557,6 @@ $(srcdir)/config.h.in: @MAINTAINER_MODE_
 
 distclean-hdr:
 	-rm -f config.h stamp-h1
-intl/Makefile: $(top_builddir)/config.status $(top_srcdir)/intl/Makefile.in
-	cd $(top_builddir) && $(SHELL) ./config.status $@
 tests/src/vfs/extfs/helpers-list/data/config.sh: $(top_builddir)/config.status $(top_srcdir)/tests/src/vfs/extfs/helpers-list/data/config.sh.in
 	cd $(top_builddir) && $(SHELL) ./config.status $@
 
@@ -855,7 +811,6 @@ distcheck: dist
 	  && am__cwd=`pwd` \
 	  && $(am__cd) $(distdir)/_build/sub \
 	  && ../../configure \
-	    --with-included-gettext \
 	    $(AM_DISTCHECK_CONFIGURE_FLAGS) \
 	    $(DISTCHECK_CONFIGURE_FLAGS) \
 	    --srcdir=../.. --prefix="$$dc_install_base" \
diff -urpN mc-4.8.23/NEWS mc-4.8.24/NEWS
--- mc-4.8.23/NEWS	2019-06-16 22:34:28.000000000 +0400
+++ mc-4.8.24/NEWS	2020-01-01 23:46:54.000000000 +0400
@@ -1,49 +1,100 @@
+Version 4.8.24
+
+- Core
+
+  * Drop bundled gettext (#3629)
+  * Implement the file edit and view history. Default shortcut is alt-shift-e (#2733)
+  * Enable subshell in standalone mceditor, mcviewer, and mcdiffviewer (#3380)
+  * Refactoring of SIGWINCH handling (#117, #4019)
+  * Prevent run/open files with double right click (#4016)
+  * Improve support of Windows 1251 encoding on Solaris (#3992)
+  * Support binary reproducible builds (via --disable-configure-args configure option) (#4031)
+
+- VFS
+
+  * sftpfs: support keyborad interactive authentication (#3921)
+  * uc1541 extfs: update up to 3.3 version (#3936)
+
+- Editor
+
+  * Syntax:
+    * add yabasic (Yet Another BASIC) syntax highlighting (#4005)
+    * improve YAML syntax highlighting (#4010)
+    * add "https://" to Debian sources.list syntax (#4018)
+    * add .desktop files (#4022)
+    * improve RPM spec file syntax highlighting (#4037)
+    * improve Debian sources.list syntax highlighting (#4041)
+
+- Misc
+
+  * Code cleanup (#3997, #4030, #4038, #4039)
+  * menu.mc: handle symbolic links to compressed archives (#4009)
+  * File highlighting updates (#4015)
+    * part - partial files, e.g. used by many download managers ([temp])
+    * apk - Android packages, deb - Debian packages ([archive])
+    * ts - MPEG-TS streams ([media])
+  * New skins:
+    * julia256: a dark skin with calm colors and good contrast.
+
+- Fixes
+
+  * Compile failure on AIX 7.2 (#4033)
+  * Compile failure on OS X 10.9 (#4035)
+  * Enter key works as Down one in menu (#4006)
+  * Menubar: incorrect mouse click coordinate (#4013)
+  * Rotating dash generates way too much output (#3859)
+  * Totals aren't computed before move of a single directory (#4027)
+  * Editor: unusable dynamic paragraphing (#3996)
+  * VFS: iso9660 does not report listing errors (#3993)
+  * VFS: extfs: nested archives are not removed from temporary directory (#4000)
+
+
 Version 4.8.23
 
 - Core
 
-  * Modify "File exists" query dialog (#3935):
-    * change layout
-    * rename "Update" button to "If older"
-    * add new "If smaller" button": overwrite file with smaller one
-    * add "Don't overwrite with zero length file" checkbox
-  * Speed up of large directory structures delete (#3958)
-  * Support key binding for menu (#212)
+    * Modify "File exists" query dialog (#3935):
+        - change layout
+        - rename "Update" button to "If older"
+        - add new "If smaller" button": overwrite file with smaller one
+        - add "Don't overwrite with zero length file" checkbox
+    * Speed up of large directory structures delete (#3958)
+    * Support key binding for menu (#212)
 
 - Editor
 
-  * Expanded syntax highlighting rules (#3975):
-    * expanded file name regexp for sh.syntax
-    * use ini.syntax for systemd cofiguration files
-  * Syntax updates:
-    * shell (#3981)
-    * ebuild (#3988)
-    * RPM spec (#3991)
+    * Expanded syntax highlighting rules (#3975):
+        - expanded file name regexp for sh.syntax
+        - use ini.syntax for systemd cofiguration files
+    * Syntax updates:
+        - shell (#3981)
+        - ebuild (#3988)
+        - RPM spec (#3991)
 
 - Viewer
 
-  * Quick one-off backwards search with N. New action SearchOppositeContinue for key bind (default is shift-n) (#3452)
+    * Quick one-off backwards search with N. New action SearchOppositeContinue for key bind (default is shift-n) (#3452)
 
 - Misc
 
-  * Code cleanup (#3955)
-  * Use Geeqie (a fork of GQview) as main image viewer, fallback to GQview (#3962)
-  * File highlighting updates (#3966)
-    * .go, .s: highlight as source
-    * .m4v: highlighting as media
-  * New skins:
-    * featured-plus: featured skin with alternative directory and file select/mark colors (#3973)
+    * Code cleanup (#3955)
+    * Use Geeqie (a fork of GQview) as main image viewer, fallback to GQview (#3962)
+    * File highlighting updates (#3966)
+        - .go, .s: highlight as source
+        - .m4v: highlighting as media
+    * New skins:
+        - featured-plus: featured skin with alternative directory and file select/mark colors (#3973)
 
 - Fixes
 
-  * Compilation fail on AIX (#3960)
-  * Incorrect file version sort (#3965, #3905)
-  * Garbage in the hardlink error creation message window (#3990)
-  * Cannot shell, or FTP, or SFTP link when the file panel is tree, or info, or quick view (#3948)
-  * Failed gpm connect attempt ... for vc /dev/tty0 (#3208, #3614)
-  * Incorrect include/editor order in mc.ext (#3965)
-  * mcedit: incorrect C/C++ syntax highlighting in some cases (#3487)
-  * Unknown type name 'sighandler_t' on Illumos (#3971)
+    * Compilation fail on AIX (#3960)
+    * Incorrect file version sort (#3965, #3905)
+    * Garbage in the hardlink error creation message window (#3990)
+    * Cannot shell, or FTP, or SFTP link when the file panel is tree, or info, or quick view (#3948)
+    * Failed gpm connect attempt ... for vc /dev/tty0 (#3208, #3614)
+    * Incorrect include/editor order in mc.ext (#3965)
+    * mcedit: incorrect C/C++ syntax highlighting in some cases (#3487)
+    * Unknown type name 'sighandler_t' on Illumos (#3971)
 
 
 Version 4.8.22
diff -urpN mc-4.8.23/aclocal.m4 mc-4.8.24/aclocal.m4
--- mc-4.8.23/aclocal.m4	2019-06-22 15:44:11.000000000 +0400
+++ mc-4.8.24/aclocal.m4	2020-01-19 01:43:01.000000000 +0400
@@ -1545,24 +1545,13 @@ AC_SUBST([am__tar])
 AC_SUBST([am__untar])
 ]) # _AM_PROG_TAR
 
-m4_include([m4/codeset.m4])
-m4_include([m4/fcntl-o.m4])
 m4_include([m4/gettext.m4])
-m4_include([m4/glibc2.m4])
-m4_include([m4/glibc21.m4])
 m4_include([m4/iconv.m4])
-m4_include([m4/intdiv0.m4])
-m4_include([m4/intl.m4])
 m4_include([m4/intlmacosx.m4])
-m4_include([m4/intmax.m4])
-m4_include([m4/inttypes-pri.m4])
-m4_include([m4/inttypes_h.m4])
-m4_include([m4/lcmessage.m4])
 m4_include([m4/lib-ld.m4])
 m4_include([m4/lib-link.m4])
 m4_include([m4/lib-prefix.m4])
 m4_include([m4/libtool.m4])
-m4_include([m4/lock.m4])
 m4_include([m4/longlong.m4])
 m4_include([m4/ltoptions.m4])
 m4_include([m4/ltsugar.m4])
@@ -1570,14 +1559,5 @@ m4_include([m4/ltversion.m4])
 m4_include([m4/lt~obsolete.m4])
 m4_include([m4/nls.m4])
 m4_include([m4/po.m4])
-m4_include([m4/printf-posix.m4])
 m4_include([m4/progtest.m4])
-m4_include([m4/size_max.m4])
-m4_include([m4/stdint_h.m4])
-m4_include([m4/threadlib.m4])
-m4_include([m4/uintmax_t.m4])
-m4_include([m4/visibility.m4])
-m4_include([m4/wchar_t.m4])
-m4_include([m4/wint_t.m4])
-m4_include([m4/xsize.m4])
 m4_include([acinclude.m4])
diff -urpN mc-4.8.23/config.h.in mc-4.8.24/config.h.in
--- mc-4.8.23/config.h.in	2019-06-22 15:44:12.000000000 +0400
+++ mc-4.8.24/config.h.in	2020-01-19 01:43:02.000000000 +0400
@@ -1,16 +1,11 @@
 /* config.h.in.  Generated from configure.ac by autoheader.  */
 
-/* Define to one of `_getb67', `GETB67', `getb67' for Cray-2 and Cray-YMP
-   systems. This function is required for `alloca.c' support on those systems.
-   */
-#undef CRAY_STACKSEG_END
-
-/* Define to 1 if using `alloca.c'. */
-#undef C_ALLOCA
-
 /* Define to enable background file operations */
 #undef ENABLE_BACKGROUND
 
+/* Define to enable showing configure arguments in help */
+#undef ENABLE_CONFIGURE_ARGS
+
 /* Define to 1 if translation of program messages to the user's native
    language is requested. */
 #undef ENABLE_NLS
@@ -54,25 +49,6 @@
 /* Define to disable assertions */
 #undef G_DISABLE_ASSERT
 
-/* Define to 1 if you have `alloca', as a function or macro. */
-#undef HAVE_ALLOCA
-
-/* Define to 1 if you have <alloca.h> and it should be used (not on Ultrix).
-   */
-#undef HAVE_ALLOCA_H
-
-/* Define to 1 if you have the `argz_count' function. */
-#undef HAVE_ARGZ_COUNT
-
-/* Define to 1 if you have the <argz.h> header file. */
-#undef HAVE_ARGZ_H
-
-/* Define to 1 if you have the `argz_next' function. */
-#undef HAVE_ARGZ_NEXT
-
-/* Define to 1 if you have the `argz_stringify' function. */
-#undef HAVE_ARGZ_STRINGIFY
-
 /* Define to 1 if you have the <arpa/inet.h> header file. */
 #undef HAVE_ARPA_INET_H
 
@@ -82,12 +58,6 @@
 /* Define to 1 if you have the <aspell.h> header file. */
 #undef HAVE_ASPELL_H
 
-/* Define to 1 if you have the `asprintf' function. */
-#undef HAVE_ASPRINTF
-
-/* Define to 1 if the compiler understands __builtin_expect. */
-#undef HAVE_BUILTIN_EXPECT
-
 /* Define to 1 if you have the MacOS X function CFLocaleCopyCurrent in the
    CoreFoundation framework. */
 #undef HAVE_CFLOCALECOPYCURRENT
@@ -106,26 +76,6 @@
    */
 #undef HAVE_DCGETTEXT
 
-/* Define to 1 if you have the declaration of `feof_unlocked', and to 0 if you
-   don't. */
-#undef HAVE_DECL_FEOF_UNLOCKED
-
-/* Define to 1 if you have the declaration of `fgets_unlocked', and to 0 if
-   you don't. */
-#undef HAVE_DECL_FGETS_UNLOCKED
-
-/* Define to 1 if you have the declaration of `getc_unlocked', and to 0 if you
-   don't. */
-#undef HAVE_DECL_GETC_UNLOCKED
-
-/* Define to 1 if you have the declaration of `_snprintf', and to 0 if you
-   don't. */
-#undef HAVE_DECL__SNPRINTF
-
-/* Define to 1 if you have the declaration of `_snwprintf', and to 0 if you
-   don't. */
-#undef HAVE_DECL__SNWPRINTF
-
 /* Define to 1 if you have the <dlfcn.h> header file. */
 #undef HAVE_DLFCN_H
 
@@ -153,21 +103,6 @@
 /* Define to 1 if the system has the `fallthrough' function attribute */
 #undef HAVE_FUNC_ATTRIBUTE_FALLTHROUGH
 
-/* Define to 1 if you have the `fwprintf' function. */
-#undef HAVE_FWPRINTF
-
-/* Define to 1 if you have the `getcwd' function. */
-#undef HAVE_GETCWD
-
-/* Define to 1 if you have the `getegid' function. */
-#undef HAVE_GETEGID
-
-/* Define to 1 if you have the `geteuid' function. */
-#undef HAVE_GETEUID
-
-/* Define to 1 if you have the `getgid' function. */
-#undef HAVE_GETGID
-
 /* Define to 1 if you have the `getmntent' function. */
 #undef HAVE_GETMNTENT
 
@@ -180,9 +115,6 @@
 /* Define if the GNU gettext() function is already present or preinstalled. */
 #undef HAVE_GETTEXT
 
-/* Define to 1 if you have the `getuid' function. */
-#undef HAVE_GETUID
-
 /* Define if you have function `get_process_stats' and have to use that
    instead of gettimeofday */
 #undef HAVE_GET_PROCESS_STATS
@@ -202,22 +134,9 @@
 /* Define if the list of mounted filesystems can be determined */
 #undef HAVE_INFOMOUNT_LIST
 
-/* Define if you have the 'intmax_t' type in <stdint.h> or <inttypes.h>. */
-#undef HAVE_INTMAX_T
-
 /* Define to 1 if you have the <inttypes.h> header file. */
 #undef HAVE_INTTYPES_H
 
-/* Define if <inttypes.h> exists, doesn't clash with <sys/types.h>, and
-   declares uintmax_t. */
-#undef HAVE_INTTYPES_H_WITH_UINTMAX
-
-/* Define if you have <langinfo.h> and nl_langinfo(CODESET). */
-#undef HAVE_LANGINFO_CODESET
-
-/* Define if your <locale.h> file defines LC_MESSAGES. */
-#undef HAVE_LC_MESSAGES
-
 /* Define to enable gpm mouse support on Linux */
 #undef HAVE_LIBGPM
 
@@ -242,30 +161,18 @@
 /* Define to 1 if you have the `listmntent' function. */
 #undef HAVE_LISTMNTENT
 
-/* Define to 1 if the system has the type `long long int'. */
-#undef HAVE_LONG_LONG_INT
-
 /* Define to 1 if you have the <malloc.h> header file. */
 #undef HAVE_MALLOC_H
 
-/* Define to 1 if you have the `mbrtowc' function. */
-#undef HAVE_MBRTOWC
-
 /* Define to 1 if you have the <memory.h> header file. */
 #undef HAVE_MEMORY_H
 
-/* Define to 1 if you have the `mempcpy' function. */
-#undef HAVE_MEMPCPY
-
 /* Define to 1 if you have a working `mmap' system call. */
 #undef HAVE_MMAP
 
 /* Define to 1 if you have the <mntent.h> header file. */
 #undef HAVE_MNTENT_H
 
-/* Define to 1 if you have the `munmap' function. */
-#undef HAVE_MUNMAP
-
 /* Define to use ncurses library for screen management */
 #undef HAVE_NCURSES
 
@@ -287,9 +194,6 @@
 /* Define to 1 if you have the <netinet/in.h> header file. */
 #undef HAVE_NETINET_IN_H
 
-/* Define to 1 if you have the `newlocale' function. */
-#undef HAVE_NEWLOCALE
-
 /* Define to 1 if you have the `next_dev' function. */
 #undef HAVE_NEXT_DEV
 
@@ -320,21 +224,9 @@
 /* Define to 1 if you have the `posix_openpt' function. */
 #undef HAVE_POSIX_OPENPT
 
-/* Define if your printf() function supports format strings with positions. */
-#undef HAVE_POSIX_PRINTF
-
-/* Define if the <pthread.h> defines PTHREAD_MUTEX_RECURSIVE. */
-#undef HAVE_PTHREAD_MUTEX_RECURSIVE
-
-/* Define if the POSIX multithreading library has read/write locks. */
-#undef HAVE_PTHREAD_RWLOCK
-
 /* Define to 1 if you have the <pty.h> header file. */
 #undef HAVE_PTY_H
 
-/* Define to 1 if you have the `putenv' function. */
-#undef HAVE_PUTENV
-
 /* Define to 1 if you have the `realpath' function. */
 #undef HAVE_REALPATH
 
@@ -347,9 +239,6 @@
 /* Define to 1 if you have the `rresvport' function. */
 #undef HAVE_RRESVPORT
 
-/* Define to 1 if you have the `setenv' function. */
-#undef HAVE_SETENV
-
 /* Define to 1 if you have the `setlocale' function. */
 #undef HAVE_SETLOCALE
 
@@ -368,9 +257,6 @@
 /* Define to use slang.h */
 #undef HAVE_SLANG_SLANG_H
 
-/* Define to 1 if you have the `snprintf' function. */
-#undef HAVE_SNPRINTF
-
 /* Define to 1 if the system has the type `socklen_t'. */
 #undef HAVE_SOCKLEN_T
 
@@ -380,28 +266,12 @@
 /* Define to 1 if you have the `statvfs' function. */
 #undef HAVE_STATVFS
 
-/* Define to 1 if you have the <stddef.h> header file. */
-#undef HAVE_STDDEF_H
-
 /* Define to 1 if you have the <stdint.h> header file. */
 #undef HAVE_STDINT_H
 
-/* Define if <stdint.h> exists, doesn't clash with <sys/types.h>, and declares
-   uintmax_t. */
-#undef HAVE_STDINT_H_WITH_UINTMAX
-
 /* Define to 1 if you have the <stdlib.h> header file. */
 #undef HAVE_STDLIB_H
 
-/* Define to 1 if you have the `stpcpy' function. */
-#undef HAVE_STPCPY
-
-/* Define to 1 if you have the `strcasecmp' function. */
-#undef HAVE_STRCASECMP
-
-/* Define to 1 if you have the `strdup' function. */
-#undef HAVE_STRDUP
-
 /* Define to 1 if you have the <strings.h> header file. */
 #undef HAVE_STRINGS_H
 
@@ -411,15 +281,9 @@
 /* Define to 1 if you have the `strncasecmp' function. */
 #undef HAVE_STRNCASECMP
 
-/* Define to 1 if you have the `strnlen' function. */
-#undef HAVE_STRNLEN
-
 /* Define to 1 if you have the <stropts.h> header file. */
 #undef HAVE_STROPTS_H
 
-/* Define to 1 if you have the `strtoul' function. */
-#undef HAVE_STRTOUL
-
 /* Define to 1 if `f_fstypename' is a member of `struct fsstat'. */
 #undef HAVE_STRUCT_FSSTAT_F_FSTYPENAME
 
@@ -514,10 +378,7 @@
 /* Define to enable getting events from X Window System */
 #undef HAVE_TEXTMODE_X11_SUPPORT
 
-/* Define to 1 if you have the `tsearch' function. */
-#undef HAVE_TSEARCH
-
-/* Define if you have the 'uintmax_t' type in <stdint.h> or <inttypes.h>. */
+/* Define to 1 if the system has the type `uintmax_t'. */
 #undef HAVE_UINTMAX_T
 
 /* Define to 1 if you have the <unistd.h> header file. */
@@ -526,9 +387,6 @@
 /* Define to 1 if the system has the type `unsigned long long int'. */
 #undef HAVE_UNSIGNED_LONG_LONG_INT
 
-/* Define to 1 if you have the `uselocale' function. */
-#undef HAVE_USELOCALE
-
 /* Define to 1 if you have the <util.h> header file. */
 #undef HAVE_UTIL_H
 
@@ -538,40 +396,6 @@
 /* Define to 1 if you have the <utime.h> header file. */
 #undef HAVE_UTIME_H
 
-/* Define to 1 or 0, depending whether the compiler supports simple visibility
-   declarations. */
-#undef HAVE_VISIBILITY
-
-/* Define if you have the 'wchar_t' type. */
-#undef HAVE_WCHAR_T
-
-/* Define to 1 if you have the `wcrtomb' function. */
-#undef HAVE_WCRTOMB
-
-/* Define to 1 if you have the `wcslen' function. */
-#undef HAVE_WCSLEN
-
-/* Define to 1 if you have the `wcsnlen' function. */
-#undef HAVE_WCSNLEN
-
-/* Define if you have the 'wint_t' type. */
-#undef HAVE_WINT_T
-
-/* Define to 1 if O_NOATIME works. */
-#undef HAVE_WORKING_O_NOATIME
-
-/* Define to 1 if O_NOFOLLOW works. */
-#undef HAVE_WORKING_O_NOFOLLOW
-
-/* Define to 1 if you have the `__fsetlocking' function. */
-#undef HAVE___FSETLOCKING
-
-/* Define as const if the declaration of iconv() needs const. */
-#undef ICONV_CONST
-
-/* Define if integer division by zero raises signal SIGFPE. */
-#undef INTDIV0_RAISES_SIGFPE
-
 /* Define if compiling for AIX */
 #undef IS_AIX
 
@@ -661,16 +485,10 @@
 /* Define to the version of this package. */
 #undef PACKAGE_VERSION
 
-/* Define if <inttypes.h> exists and defines unusable PRI* macros. */
-#undef PRI_MACROS_BROKEN
-
 /* Define to the type that is the result of default argument promotions of
    type mode_t. */
 #undef PROMOTED_MODE_T
 
-/* Define if the pthread_in_use() detection is hard. */
-#undef PTHREAD_IN_USE_DETECTION_HARD
-
 /* read(1) can return 0 for a non-closed fd */
 #undef PTY_ZEROREAD
 
@@ -694,20 +512,6 @@
 /* The size of `uintmax_t', as computed by sizeof. */
 #undef SIZEOF_UINTMAX_T
 
-/* Define as the maximum value of type 'size_t', if the system doesn't define
-   it. */
-#ifndef SIZE_MAX
-# undef SIZE_MAX
-#endif
-
-/* If using the C implementation of alloca, define if you know the
-   direction of stack growth for your system; otherwise it will be
-   automatically deduced at runtime.
-	STACK_DIRECTION > 0 => grows toward higher addresses
-	STACK_DIRECTION < 0 => grows toward lower addresses
-	STACK_DIRECTION = 0 => direction of growth unknown */
-#undef STACK_DIRECTION
-
 /* Define if the block counts reported by statfs may be truncated to 2GB and
    the correct values may be stored in the f_spare array. (SunOS 4.1.2, 4.1.3,
    and 4.1.3_U1 are reported to have this problem. SunOS 4.1.1 seems not to be
@@ -765,27 +569,6 @@
 /* Define to use ncursesw for screen management */
 #undef USE_NCURSESW
 
-/* Define if the POSIX multithreading library can be used. */
-#undef USE_POSIX_THREADS
-
-/* Define if references to the POSIX multithreading library should be made
-   weak. */
-#undef USE_POSIX_THREADS_WEAK
-
-/* Define if the GNU Pth multithreading library can be used. */
-#undef USE_PTH_THREADS
-
-/* Define if references to the GNU Pth multithreading library should be made
-   weak. */
-#undef USE_PTH_THREADS_WEAK
-
-/* Define if the old Solaris multithreading library can be used. */
-#undef USE_SOLARIS_THREADS
-
-/* Define if references to the old Solaris multithreading library should be
-   made weak. */
-#undef USE_SOLARIS_THREADS_WEAK
-
 /* Enable extensions on AIX 3, Interix.  */
 #ifndef _ALL_SOURCE
 # undef _ALL_SOURCE
@@ -811,9 +594,6 @@
 /* Define to use termcap database */
 #undef USE_TERMCAP
 
-/* Define if the Win32 multithreading API can be used. */
-#undef USE_WIN32_THREADS
-
 /* Version number of package */
 #undef VERSION
 
@@ -847,12 +627,6 @@
 /* Define to `int' if <sys/types.h> doesn't define. */
 #undef gid_t
 
-/* Define to `__inline__' or `__inline' if that's what the C compiler
-   calls it, or to nothing if 'inline' is not supported under any name.  */
-#ifndef __cplusplus
-#undef inline
-#endif
-
 /* Define to `int' if <sys/types.h> does not define. */
 #undef mode_t
 
@@ -865,60 +639,12 @@
 /* Define to `int' if <sys/types.h> does not define. */
 #undef pid_t
 
-/* Define as the type of the result of subtracting two pointers, if the system
-   doesn't define it. */
-#undef ptrdiff_t
-
 /* Define to `int' if <sys/types.h> does not define. */
 #undef sig_atomic_t
 
-/* Define to `unsigned int' if <sys/types.h> does not define. */
-#undef size_t
-
 /* Define to `int' if <sys/types.h> doesn't define. */
 #undef uid_t
 
-/* Define to unsigned long or unsigned long long if <stdint.h> and
-   <inttypes.h> don't define. */
+/* Define to the widest unsigned integer type if <stdint.h> and <inttypes.h>
+   do not define. */
 #undef uintmax_t
-
-
-#define __libc_lock_t                   gl_lock_t
-#define __libc_lock_define              gl_lock_define
-#define __libc_lock_define_initialized  gl_lock_define_initialized
-#define __libc_lock_init                gl_lock_init
-#define __libc_lock_lock                gl_lock_lock
-#define __libc_lock_unlock              gl_lock_unlock
-#define __libc_lock_recursive_t                   gl_recursive_lock_t
-#define __libc_lock_define_recursive              gl_recursive_lock_define
-#define __libc_lock_define_initialized_recursive  gl_recursive_lock_define_initialized
-#define __libc_lock_init_recursive                gl_recursive_lock_init
-#define __libc_lock_lock_recursive                gl_recursive_lock_lock
-#define __libc_lock_unlock_recursive              gl_recursive_lock_unlock
-#define glthread_in_use  libintl_thread_in_use
-#define glthread_lock_init_func     libintl_lock_init_func
-#define glthread_lock_lock_func     libintl_lock_lock_func
-#define glthread_lock_unlock_func   libintl_lock_unlock_func
-#define glthread_lock_destroy_func  libintl_lock_destroy_func
-#define glthread_rwlock_init_multithreaded     libintl_rwlock_init_multithreaded
-#define glthread_rwlock_init_func              libintl_rwlock_init_func
-#define glthread_rwlock_rdlock_multithreaded   libintl_rwlock_rdlock_multithreaded
-#define glthread_rwlock_rdlock_func            libintl_rwlock_rdlock_func
-#define glthread_rwlock_wrlock_multithreaded   libintl_rwlock_wrlock_multithreaded
-#define glthread_rwlock_wrlock_func            libintl_rwlock_wrlock_func
-#define glthread_rwlock_unlock_multithreaded   libintl_rwlock_unlock_multithreaded
-#define glthread_rwlock_unlock_func            libintl_rwlock_unlock_func
-#define glthread_rwlock_destroy_multithreaded  libintl_rwlock_destroy_multithreaded
-#define glthread_rwlock_destroy_func           libintl_rwlock_destroy_func
-#define glthread_recursive_lock_init_multithreaded     libintl_recursive_lock_init_multithreaded
-#define glthread_recursive_lock_init_func              libintl_recursive_lock_init_func
-#define glthread_recursive_lock_lock_multithreaded     libintl_recursive_lock_lock_multithreaded
-#define glthread_recursive_lock_lock_func              libintl_recursive_lock_lock_func
-#define glthread_recursive_lock_unlock_multithreaded   libintl_recursive_lock_unlock_multithreaded
-#define glthread_recursive_lock_unlock_func            libintl_recursive_lock_unlock_func
-#define glthread_recursive_lock_destroy_multithreaded  libintl_recursive_lock_destroy_multithreaded
-#define glthread_recursive_lock_destroy_func           libintl_recursive_lock_destroy_func
-#define glthread_once_func            libintl_once_func
-#define glthread_once_singlethreaded  libintl_once_singlethreaded
-#define glthread_once_multithreaded   libintl_once_multithreaded
-
diff -urpN mc-4.8.23/configure mc-4.8.24/configure
--- mc-4.8.23/configure	2019-06-22 15:44:11.000000000 +0400
+++ mc-4.8.24/configure	2020-01-19 01:43:02.000000000 +0400
@@ -632,7 +632,6 @@ ac_includes_default="\
 
 ac_header_list=
 gt_needs=
-gl_use_threads_default=
 enable_option_checking=no
 ac_subst_vars='am__EXEEXT_FALSE
 am__EXEEXT_TRUE
@@ -745,45 +744,14 @@ LIBMC_VERSION
 RUBY
 PYTHON
 PERL
+CP1251
 POSUB
 LTLIBINTL
 LIBINTL
 INTLLIBS
-INTL_LIBTOOL_SUFFIX_PREFIX
-INTLOBJS
-GENCAT
-INSTOBJEXT
-DATADIRNAME
-CATOBJEXT
-USE_INCLUDED_LIBINTL
-BUILD_INCLUDED_LIBINTL
-LTLIBC
-WINDRES
-WOE32
-WOE32DLL
-HAVE_WPRINTF
-HAVE_NEWLOCALE
-HAVE_SNPRINTF
-HAVE_ASPRINTF
-HAVE_POSIX_PRINTF
-INTL_DEFAULT_VERBOSITY
-INTL_MACOSX_LIBS
-GLIBC21
-INTLBISON
 LTLIBICONV
 LIBICONV
-LTLIBMULTITHREAD
-LIBMULTITHREAD
-LTLIBTHREAD
-LIBTHREAD
-LIBPTH_PREFIX
-LTLIBPTH
-LIBPTH
-PRI_MACROS_BROKEN
-ALLOCA
-HAVE_VISIBILITY
-CFLAG_VISIBILITY
-GLIBC2
+INTL_MACOSX_LIBS
 XGETTEXT_EXTRA_OPTIONS
 MSGMERGE
 XGETTEXT_015
@@ -969,11 +937,8 @@ with_x
 enable_largefile
 with_mmap
 enable_nls
-enable_threads
 enable_rpath
-with_libpth_prefix
 with_libiconv_prefix
-with_included_gettext
 with_libintl_prefix
 enable_charset
 with_gpm_mouse
@@ -1007,6 +972,7 @@ enable_doxygen_chi
 enable_doxygen_html
 enable_doxygen_ps
 enable_doxygen_pdf
+enable_configure_args
 '
       ac_precious_vars='build_alias
 host_alias
@@ -1673,9 +1639,6 @@ Optional Features:
 
   --disable-largefile     omit support for large files
   --disable-nls           do not use Native Language Support
-  --enable-threads={posix|solaris|pth|win32}
-                          specify multithreading API
-  --disable-threads       build without multithread safety
   --disable-rpath         do not hardcode runtime library paths
   --enable-charset        Support for charset selection and conversion [yes]
   --enable-mclib          Compile shared library libmc.so [no]
@@ -1703,6 +1666,7 @@ Optional Features:
   --disable-doxygen-html  don't generate doxygen plain HTML documentation
   --enable-doxygen-ps     generate doxygen PostScript documentation
   --enable-doxygen-pdf    generate doxygen PDF documentation
+  --enable-configure-args Handle all compiler warnings as errors
 
 Optional Packages:
   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
@@ -1739,11 +1703,8 @@ Optional Packages:
   --with-x                use the X Window System
   --with-mmap             Use the mmap call [yes if found]
   --with-gnu-ld           assume the C compiler uses GNU ld default=no
-  --with-libpth-prefix[=DIR]  search for libpth in DIR/include and DIR/lib
-  --without-libpth-prefix     don't search for libpth in includedir and libdir
   --with-libiconv-prefix[=DIR]  search for libiconv in DIR/include and DIR/lib
   --without-libiconv-prefix     don't search for libiconv in includedir and libdir
-  --with-included-gettext use the GNU gettext library included here
   --with-libintl-prefix[=DIR]  search for libintl in DIR/include and DIR/lib
   --without-libintl-prefix     don't search for libintl in includedir and libdir
   --with-gpm-mouse        Compile with gpm mouse support (Linux only) [yes if
@@ -21341,6 +21302,18 @@ rm -f core conftest.err conftest.$ac_obj
 
 
 
+for ac_func in setlocale
+do :
+  ac_fn_c_check_func "$LINENO" "setlocale" "ac_cv_func_setlocale"
+if test "x$ac_cv_func_setlocale" = xyes; then :
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_SETLOCALE 1
+_ACEOF
+
+fi
+done
+
+
 
 mkdir_p="$MKDIR_P"
 case $mkdir_p in
@@ -21649,746 +21622,6 @@ fi
 
 
 
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C Library 2 or newer" >&5
-$as_echo_n "checking whether we are using the GNU C Library 2 or newer... " >&6; }
-if ${ac_cv_gnu_library_2+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-#include <features.h>
-#ifdef __GNU_LIBRARY__
- #if (__GLIBC__ >= 2)
-  Lucky GNU user
- #endif
-#endif
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "Lucky GNU user" >/dev/null 2>&1; then :
-  ac_cv_gnu_library_2=yes
-else
-  ac_cv_gnu_library_2=no
-fi
-rm -f conftest*
-
-
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_gnu_library_2" >&5
-$as_echo "$ac_cv_gnu_library_2" >&6; }
-
-    GLIBC2="$ac_cv_gnu_library_2"
-
-
-if test -n "$ac_tool_prefix"; then
-  # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
-set dummy ${ac_tool_prefix}ranlib; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_RANLIB+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test -n "$RANLIB"; then
-  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
-else
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-  done
-IFS=$as_save_IFS
-
-fi
-fi
-RANLIB=$ac_cv_prog_RANLIB
-if test -n "$RANLIB"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $RANLIB" >&5
-$as_echo "$RANLIB" >&6; }
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-fi
-
-
-fi
-if test -z "$ac_cv_prog_RANLIB"; then
-  ac_ct_RANLIB=$RANLIB
-  # Extract the first word of "ranlib", so it can be a program name with args.
-set dummy ranlib; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test -n "$ac_ct_RANLIB"; then
-  ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
-else
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_ac_ct_RANLIB="ranlib"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-  done
-IFS=$as_save_IFS
-
-fi
-fi
-ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
-if test -n "$ac_ct_RANLIB"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB" >&5
-$as_echo "$ac_ct_RANLIB" >&6; }
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-fi
-
-  if test "x$ac_ct_RANLIB" = x; then
-    RANLIB=":"
-  else
-    case $cross_compiling:$ac_tool_warned in
-yes:)
-{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
-$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
-ac_tool_warned=yes ;;
-esac
-    RANLIB=$ac_ct_RANLIB
-  fi
-else
-  RANLIB="$ac_cv_prog_RANLIB"
-fi
-
-
-
-  CFLAG_VISIBILITY=
-  HAVE_VISIBILITY=0
-  if test -n "$GCC"; then
-                { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the -Werror option is usable" >&5
-$as_echo_n "checking whether the -Werror option is usable... " >&6; }
-    if ${gl_cv_cc_vis_werror+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-
-      gl_save_CFLAGS="$CFLAGS"
-      CFLAGS="$CFLAGS -Werror"
-      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  gl_cv_cc_vis_werror=yes
-else
-  gl_cv_cc_vis_werror=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-      CFLAGS="$gl_save_CFLAGS"
-fi
-
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_cv_cc_vis_werror" >&5
-$as_echo "$gl_cv_cc_vis_werror" >&6; }
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for simple visibility declarations" >&5
-$as_echo_n "checking for simple visibility declarations... " >&6; }
-    if ${gl_cv_cc_visibility+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-
-      gl_save_CFLAGS="$CFLAGS"
-      CFLAGS="$CFLAGS -fvisibility=hidden"
-                                    if test $gl_cv_cc_vis_werror = yes; then
-        CFLAGS="$CFLAGS -Werror"
-      fi
-      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-extern __attribute__((__visibility__("hidden"))) int hiddenvar;
-         extern __attribute__((__visibility__("default"))) int exportedvar;
-         extern __attribute__((__visibility__("hidden"))) int hiddenfunc (void);
-         extern __attribute__((__visibility__("default"))) int exportedfunc (void);
-         void dummyfunc (void) {}
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  gl_cv_cc_visibility=yes
-else
-  gl_cv_cc_visibility=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-      CFLAGS="$gl_save_CFLAGS"
-fi
-
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_cv_cc_visibility" >&5
-$as_echo "$gl_cv_cc_visibility" >&6; }
-    if test $gl_cv_cc_visibility = yes; then
-      CFLAG_VISIBILITY="-fvisibility=hidden"
-      HAVE_VISIBILITY=1
-    fi
-  fi
-
-
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_VISIBILITY $HAVE_VISIBILITY
-_ACEOF
-
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for inline" >&5
-$as_echo_n "checking for inline... " >&6; }
-if ${ac_cv_c_inline+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  ac_cv_c_inline=no
-for ac_kw in inline __inline__ __inline; do
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#ifndef __cplusplus
-typedef int foo_t;
-static $ac_kw foo_t static_foo () {return 0; }
-$ac_kw foo_t foo () {return 0; }
-#endif
-
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_cv_c_inline=$ac_kw
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-  test "$ac_cv_c_inline" != no && break
-done
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_inline" >&5
-$as_echo "$ac_cv_c_inline" >&6; }
-
-case $ac_cv_c_inline in
-  inline | yes) ;;
-  *)
-    case $ac_cv_c_inline in
-      no) ac_val=;;
-      *) ac_val=$ac_cv_c_inline;;
-    esac
-    cat >>confdefs.h <<_ACEOF
-#ifndef __cplusplus
-#define inline $ac_val
-#endif
-_ACEOF
-    ;;
-esac
-
-ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
-if test "x$ac_cv_type_size_t" = xyes; then :
-
-else
-
-cat >>confdefs.h <<_ACEOF
-#define size_t unsigned int
-_ACEOF
-
-fi
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for stdint.h" >&5
-$as_echo_n "checking for stdint.h... " >&6; }
-if ${gl_cv_header_stdint_h+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <sys/types.h>
-#include <stdint.h>
-int
-main ()
-{
-uintmax_t i = (uintmax_t) -1; return !i;
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  gl_cv_header_stdint_h=yes
-else
-  gl_cv_header_stdint_h=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_cv_header_stdint_h" >&5
-$as_echo "$gl_cv_header_stdint_h" >&6; }
-  if test $gl_cv_header_stdint_h = yes; then
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_STDINT_H_WITH_UINTMAX 1
-_ACEOF
-
-  fi
-
-# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
-# for constant arguments.  Useless!
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for working alloca.h" >&5
-$as_echo_n "checking for working alloca.h... " >&6; }
-if ${ac_cv_working_alloca_h+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <alloca.h>
-int
-main ()
-{
-char *p = (char *) alloca (2 * sizeof (int));
-			  if (p) return 0;
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_working_alloca_h=yes
-else
-  ac_cv_working_alloca_h=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_working_alloca_h" >&5
-$as_echo "$ac_cv_working_alloca_h" >&6; }
-if test $ac_cv_working_alloca_h = yes; then
-
-$as_echo "#define HAVE_ALLOCA_H 1" >>confdefs.h
-
-fi
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for alloca" >&5
-$as_echo_n "checking for alloca... " >&6; }
-if ${ac_cv_func_alloca_works+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#ifdef __GNUC__
-# define alloca __builtin_alloca
-#else
-# ifdef _MSC_VER
-#  include <malloc.h>
-#  define alloca _alloca
-# else
-#  ifdef HAVE_ALLOCA_H
-#   include <alloca.h>
-#  else
-#   ifdef _AIX
- #pragma alloca
-#   else
-#    ifndef alloca /* predefined by HP cc +Olibcalls */
-void *alloca (size_t);
-#    endif
-#   endif
-#  endif
-# endif
-#endif
-
-int
-main ()
-{
-char *p = (char *) alloca (1);
-				    if (p) return 0;
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_func_alloca_works=yes
-else
-  ac_cv_func_alloca_works=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_alloca_works" >&5
-$as_echo "$ac_cv_func_alloca_works" >&6; }
-
-if test $ac_cv_func_alloca_works = yes; then
-
-$as_echo "#define HAVE_ALLOCA 1" >>confdefs.h
-
-else
-  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
-# that cause trouble.  Some versions do not even contain alloca or
-# contain a buggy version.  If you still want to use their alloca,
-# use ar to extract alloca.o from them instead of compiling alloca.c.
-
-ALLOCA=\${LIBOBJDIR}alloca.$ac_objext
-
-$as_echo "#define C_ALLOCA 1" >>confdefs.h
-
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether \`alloca.c' needs Cray hooks" >&5
-$as_echo_n "checking whether \`alloca.c' needs Cray hooks... " >&6; }
-if ${ac_cv_os_cray+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#if defined CRAY && ! defined CRAY2
-webecray
-#else
-wenotbecray
-#endif
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "webecray" >/dev/null 2>&1; then :
-  ac_cv_os_cray=yes
-else
-  ac_cv_os_cray=no
-fi
-rm -f conftest*
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_os_cray" >&5
-$as_echo "$ac_cv_os_cray" >&6; }
-if test $ac_cv_os_cray = yes; then
-  for ac_func in _getb67 GETB67 getb67; do
-    as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
-ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
-
-cat >>confdefs.h <<_ACEOF
-#define CRAY_STACKSEG_END $ac_func
-_ACEOF
-
-    break
-fi
-
-  done
-fi
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking stack direction for C alloca" >&5
-$as_echo_n "checking stack direction for C alloca... " >&6; }
-if ${ac_cv_c_stack_direction+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test "$cross_compiling" = yes; then :
-  ac_cv_c_stack_direction=0
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-$ac_includes_default
-int
-find_stack_direction (int *addr, int depth)
-{
-  int dir, dummy = 0;
-  if (! addr)
-    addr = &dummy;
-  *addr = addr < &dummy ? 1 : addr == &dummy ? 0 : -1;
-  dir = depth ? find_stack_direction (addr, depth - 1) : 0;
-  return dir + dummy;
-}
-
-int
-main (int argc, char **argv)
-{
-  return find_stack_direction (0, argc + !argv + 20) < 0;
-}
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
-  ac_cv_c_stack_direction=1
-else
-  ac_cv_c_stack_direction=-1
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
-fi
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_stack_direction" >&5
-$as_echo "$ac_cv_c_stack_direction" >&6; }
-cat >>confdefs.h <<_ACEOF
-#define STACK_DIRECTION $ac_cv_c_stack_direction
-_ACEOF
-
-
-fi
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether integer division by zero raises SIGFPE" >&5
-$as_echo_n "checking whether integer division by zero raises SIGFPE... " >&6; }
-if ${gt_cv_int_divbyzero_sigfpe+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-
-      gt_cv_int_divbyzero_sigfpe=
-      case "$host_os" in
-        macos* | darwin[6-9]* | darwin[1-9][0-9]*)
-          # On MacOS X 10.2 or newer, just assume the same as when cross-
-          # compiling. If we were to perform the real test, 1 Crash Report
-          # dialog window would pop up.
-          case "$host_cpu" in
-            i[34567]86 | x86_64)
-              gt_cv_int_divbyzero_sigfpe="guessing yes" ;;
-          esac
-          ;;
-      esac
-      if test -z "$gt_cv_int_divbyzero_sigfpe"; then
-        if test "$cross_compiling" = yes; then :
-
-            # Guess based on the CPU.
-            case "$host_cpu" in
-              alpha* | i[34567]86 | x86_64 | m68k | s390*)
-                gt_cv_int_divbyzero_sigfpe="guessing yes";;
-              *)
-                gt_cv_int_divbyzero_sigfpe="guessing no";;
-            esac
-
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-#include <stdlib.h>
-#include <signal.h>
-
-static void
-sigfpe_handler (int sig)
-{
-  /* Exit with code 0 if SIGFPE, with code 1 if any other signal.  */
-  exit (sig != SIGFPE);
-}
-
-int x = 1;
-int y = 0;
-int z;
-int nan;
-
-int main ()
-{
-  signal (SIGFPE, sigfpe_handler);
-/* IRIX and AIX (when "xlc -qcheck" is used) yield signal SIGTRAP.  */
-#if (defined (__sgi) || defined (_AIX)) && defined (SIGTRAP)
-  signal (SIGTRAP, sigfpe_handler);
-#endif
-/* Linux/SPARC yields signal SIGILL.  */
-#if defined (__sparc__) && defined (__linux__)
-  signal (SIGILL, sigfpe_handler);
-#endif
-
-  z = x / y;
-  nan = y / y;
-  exit (1);
-}
-
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
-  gt_cv_int_divbyzero_sigfpe=yes
-else
-  gt_cv_int_divbyzero_sigfpe=no
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
-fi
-
-      fi
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_int_divbyzero_sigfpe" >&5
-$as_echo "$gt_cv_int_divbyzero_sigfpe" >&6; }
-  case "$gt_cv_int_divbyzero_sigfpe" in
-    *yes) value=1;;
-    *) value=0;;
-  esac
-
-cat >>confdefs.h <<_ACEOF
-#define INTDIV0_RAISES_SIGFPE $value
-_ACEOF
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for inttypes.h" >&5
-$as_echo_n "checking for inttypes.h... " >&6; }
-if ${gl_cv_header_inttypes_h+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <sys/types.h>
-#include <inttypes.h>
-int
-main ()
-{
-uintmax_t i = (uintmax_t) -1; return !i;
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  gl_cv_header_inttypes_h=yes
-else
-  gl_cv_header_inttypes_h=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_cv_header_inttypes_h" >&5
-$as_echo "$gl_cv_header_inttypes_h" >&6; }
-  if test $gl_cv_header_inttypes_h = yes; then
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_INTTYPES_H_WITH_UINTMAX 1
-_ACEOF
-
-  fi
-
-
-
-
-  if test $gl_cv_header_inttypes_h = no && test $gl_cv_header_stdint_h = no; then
-
-    test $ac_cv_type_unsigned_long_long_int = yes \
-      && ac_type='unsigned long long' \
-      || ac_type='unsigned long'
-
-cat >>confdefs.h <<_ACEOF
-#define uintmax_t $ac_type
-_ACEOF
-
-  else
-
-$as_echo "#define HAVE_UINTMAX_T 1" >>confdefs.h
-
-  fi
-
-
-  for ac_header in inttypes.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "inttypes.h" "ac_cv_header_inttypes_h" "$ac_includes_default"
-if test "x$ac_cv_header_inttypes_h" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_INTTYPES_H 1
-_ACEOF
-
-fi
-
-done
-
-  if test $ac_cv_header_inttypes_h = yes; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the inttypes.h PRIxNN macros are broken" >&5
-$as_echo_n "checking whether the inttypes.h PRIxNN macros are broken... " >&6; }
-if ${gt_cv_inttypes_pri_broken+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-
-        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <inttypes.h>
-#ifdef PRId32
-char *p = PRId32;
-#endif
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  gt_cv_inttypes_pri_broken=no
-else
-  gt_cv_inttypes_pri_broken=yes
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_inttypes_pri_broken" >&5
-$as_echo "$gt_cv_inttypes_pri_broken" >&6; }
-  fi
-  if test "$gt_cv_inttypes_pri_broken" = yes; then
-
-cat >>confdefs.h <<_ACEOF
-#define PRI_MACROS_BROKEN 1
-_ACEOF
-
-    PRI_MACROS_BROKEN=1
-  else
-    PRI_MACROS_BROKEN=0
-  fi
-
-
-
-
-
-
-
-  # Check whether --enable-threads was given.
-if test "${enable_threads+set}" = set; then :
-  enableval=$enable_threads; gl_use_threads=$enableval
-else
-  if test -n "$gl_use_threads_default"; then
-       gl_use_threads="$gl_use_threads_default"
-     else
-       case "$host_os" in
-                                                               osf*) gl_use_threads=no ;;
-         cygwin*)
-               case `uname -r` in
-                 1.[0-5].*) gl_use_threads=no ;;
-                 *)         gl_use_threads=yes ;;
-               esac
-               ;;
-         *)    gl_use_threads=yes ;;
-       esac
-     fi
-
-fi
-
-  if test "$gl_use_threads" = yes || test "$gl_use_threads" = posix; then
-    # For using <pthread.h>:
-    case "$host_os" in
-      osf*)
-        # On OSF/1, the compiler needs the flag -D_REENTRANT so that it
-        # groks <pthread.h>. cc also understands the flag -pthread, but
-        # we don't use it because 1. gcc-2.95 doesn't understand -pthread,
-        # 2. putting a flag into CPPFLAGS that has an effect on the linker
-        # causes the AC_TRY_LINK test below to succeed unexpectedly,
-        # leading to wrong values of LIBTHREAD and LTLIBTHREAD.
-        CPPFLAGS="$CPPFLAGS -D_REENTRANT"
-        ;;
-    esac
-    # Some systems optimize for single-threaded programs by default, and
-    # need special flags to disable these optimizations. For example, the
-    # definition of 'errno' in <errno.h>.
-    case "$host_os" in
-      aix* | freebsd*) CPPFLAGS="$CPPFLAGS -D_THREAD_SAFE" ;;
-      solaris*) CPPFLAGS="$CPPFLAGS -D_REENTRANT" ;;
-    esac
-  fi
-
-
-
-
-
       if test "X$prefix" = "XNONE"; then
     acl_final_prefix="$ac_default_prefix"
   else
@@ -22616,331 +21849,7 @@ $as_echo "$gl_cv_solaris_64bit" >&6; }
 
 
 
-  gl_threads_api=none
-  LIBTHREAD=
-  LTLIBTHREAD=
-  LIBMULTITHREAD=
-  LTLIBMULTITHREAD=
-  if test "$gl_use_threads" != no; then
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether imported symbols can be declared weak" >&5
-$as_echo_n "checking whether imported symbols can be declared weak... " >&6; }
-if ${gl_cv_have_weak+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  gl_cv_have_weak=no
-              cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-extern void xyzzy ();
-#pragma weak xyzzy
-int
-main ()
-{
-xyzzy();
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  gl_cv_have_weak=maybe
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-       if test $gl_cv_have_weak = maybe; then
-                           if test "$cross_compiling" = yes; then :
-                          cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#ifdef __ELF__
-               Extensible Linking Format
-               #endif
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "Extensible Linking Format" >/dev/null 2>&1; then :
-  gl_cv_have_weak="guessing yes"
-else
-  gl_cv_have_weak="guessing no"
-fi
-rm -f conftest*
-
-
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-#include <stdio.h>
-#pragma weak fputs
-int main ()
-{
-  return (fputs == NULL);
-}
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
-  gl_cv_have_weak=yes
-else
-  gl_cv_have_weak=no
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
-fi
-
-       fi
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_cv_have_weak" >&5
-$as_echo "$gl_cv_have_weak" >&6; }
-    if test "$gl_use_threads" = yes || test "$gl_use_threads" = posix; then
-      # On OSF/1, the compiler needs the flag -pthread or -D_REENTRANT so that
-      # it groks <pthread.h>. It's added above, in gl_THREADLIB_EARLY_BODY.
-      ac_fn_c_check_header_mongrel "$LINENO" "pthread.h" "ac_cv_header_pthread_h" "$ac_includes_default"
-if test "x$ac_cv_header_pthread_h" = xyes; then :
-  gl_have_pthread_h=yes
-else
-  gl_have_pthread_h=no
-fi
-
-
-      if test "$gl_have_pthread_h" = yes; then
-        # Other possible tests:
-        #   -lpthreads (FSU threads, PCthreads)
-        #   -lgthreads
-        gl_have_pthread=
-        # Test whether both pthread_mutex_lock and pthread_mutexattr_init exist
-        # in libc. IRIX 6.5 has the first one in both libc and libpthread, but
-        # the second one only in libpthread, and lock.c needs it.
-        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <pthread.h>
-int
-main ()
-{
-pthread_mutex_lock((pthread_mutex_t*)0);
-           pthread_mutexattr_init((pthread_mutexattr_t*)0);
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  gl_have_pthread=yes
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-        # Test for libpthread by looking for pthread_kill. (Not pthread_self,
-        # since it is defined as a macro on OSF/1.)
-        if test -n "$gl_have_pthread"; then
-          # The program links fine without libpthread. But it may actually
-          # need to link with libpthread in order to create multiple threads.
-          { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_kill in -lpthread" >&5
-$as_echo_n "checking for pthread_kill in -lpthread... " >&6; }
-if ${ac_cv_lib_pthread_pthread_kill+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char pthread_kill ();
-int
-main ()
-{
-return pthread_kill ();
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_pthread_pthread_kill=yes
-else
-  ac_cv_lib_pthread_pthread_kill=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_kill" >&5
-$as_echo "$ac_cv_lib_pthread_pthread_kill" >&6; }
-if test "x$ac_cv_lib_pthread_pthread_kill" = xyes; then :
-  LIBMULTITHREAD=-lpthread LTLIBMULTITHREAD=-lpthread
-             # On Solaris and HP-UX, most pthread functions exist also in libc.
-             # Therefore pthread_in_use() needs to actually try to create a
-             # thread: pthread_create from libc will fail, whereas
-             # pthread_create will actually create a thread.
-             case "$host_os" in
-               solaris* | hpux*)
-
-$as_echo "#define PTHREAD_IN_USE_DETECTION_HARD 1" >>confdefs.h
-
-             esac
-
-fi
-
-        else
-          # Some library is needed. Try libpthread and libc_r.
-          { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_kill in -lpthread" >&5
-$as_echo_n "checking for pthread_kill in -lpthread... " >&6; }
-if ${ac_cv_lib_pthread_pthread_kill+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char pthread_kill ();
-int
-main ()
-{
-return pthread_kill ();
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_pthread_pthread_kill=yes
-else
-  ac_cv_lib_pthread_pthread_kill=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_kill" >&5
-$as_echo "$ac_cv_lib_pthread_pthread_kill" >&6; }
-if test "x$ac_cv_lib_pthread_pthread_kill" = xyes; then :
-  gl_have_pthread=yes
-             LIBTHREAD=-lpthread LTLIBTHREAD=-lpthread
-             LIBMULTITHREAD=-lpthread LTLIBMULTITHREAD=-lpthread
-fi
-
-          if test -z "$gl_have_pthread"; then
-            # For FreeBSD 4.
-            { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_kill in -lc_r" >&5
-$as_echo_n "checking for pthread_kill in -lc_r... " >&6; }
-if ${ac_cv_lib_c_r_pthread_kill+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lc_r  $LIBS"
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char pthread_kill ();
-int
-main ()
-{
-return pthread_kill ();
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_c_r_pthread_kill=yes
-else
-  ac_cv_lib_c_r_pthread_kill=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_c_r_pthread_kill" >&5
-$as_echo "$ac_cv_lib_c_r_pthread_kill" >&6; }
-if test "x$ac_cv_lib_c_r_pthread_kill" = xyes; then :
-  gl_have_pthread=yes
-               LIBTHREAD=-lc_r LTLIBTHREAD=-lc_r
-               LIBMULTITHREAD=-lc_r LTLIBMULTITHREAD=-lc_r
-fi
-
-          fi
-        fi
-        if test -n "$gl_have_pthread"; then
-          gl_threads_api=posix
-
-$as_echo "#define USE_POSIX_THREADS 1" >>confdefs.h
-
-          if test -n "$LIBMULTITHREAD" || test -n "$LTLIBMULTITHREAD"; then
-            if case "$gl_cv_have_weak" in *yes) true;; *) false;; esac; then
-
-$as_echo "#define USE_POSIX_THREADS_WEAK 1" >>confdefs.h
-
-              LIBTHREAD=
-              LTLIBTHREAD=
-            fi
-          fi
-        fi
-      fi
-    fi
-    if test -z "$gl_have_pthread"; then
-      if test "$gl_use_threads" = yes || test "$gl_use_threads" = solaris; then
-        gl_have_solaristhread=
-        gl_save_LIBS="$LIBS"
-        LIBS="$LIBS -lthread"
-        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <thread.h>
-#include <synch.h>
-int
-main ()
-{
-thr_self();
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  gl_have_solaristhread=yes
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-        LIBS="$gl_save_LIBS"
-        if test -n "$gl_have_solaristhread"; then
-          gl_threads_api=solaris
-          LIBTHREAD=-lthread
-          LTLIBTHREAD=-lthread
-          LIBMULTITHREAD="$LIBTHREAD"
-          LTLIBMULTITHREAD="$LTLIBTHREAD"
 
-$as_echo "#define USE_SOLARIS_THREADS 1" >>confdefs.h
-
-          if case "$gl_cv_have_weak" in *yes) true;; *) false;; esac; then
-
-$as_echo "#define USE_SOLARIS_THREADS_WEAK 1" >>confdefs.h
-
-            LIBTHREAD=
-            LTLIBTHREAD=
-          fi
-        fi
-      fi
-    fi
-    if test "$gl_use_threads" = pth; then
-      gl_save_CPPFLAGS="$CPPFLAGS"
-
-
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to link with libpth" >&5
-$as_echo_n "checking how to link with libpth... " >&6; }
-if ${ac_cv_libpth_libs+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
 
 
 
@@ -22963,9 +21872,9 @@ else
   prefix="$acl_save_prefix"
 
 
-# Check whether --with-libpth-prefix was given.
-if test "${with_libpth_prefix+set}" = set; then :
-  withval=$with_libpth_prefix;
+# Check whether --with-libiconv-prefix was given.
+if test "${with_libiconv_prefix+set}" = set; then :
+  withval=$with_libiconv_prefix;
     if test "X$withval" = "Xno"; then
       use_additional=no
     else
@@ -22994,15 +21903,15 @@ if test "${with_libpth_prefix+set}" = se
 
 fi
 
-      LIBPTH=
-  LTLIBPTH=
-  INCPTH=
-  LIBPTH_PREFIX=
-      HAVE_LIBPTH=
+      LIBICONV=
+  LTLIBICONV=
+  INCICONV=
+  LIBICONV_PREFIX=
+      HAVE_LIBICONV=
   rpathdirs=
   ltrpathdirs=
   names_already_handled=
-  names_next_round='pth '
+  names_next_round='iconv '
   while test -n "$names_next_round"; do
     names_this_round="$names_next_round"
     names_next_round=
@@ -23021,9 +21930,9 @@ fi
         if test -n "$value"; then
           if test "$value" = yes; then
             eval value=\"\$LIB$uppername\"
-            test -z "$value" || LIBPTH="${LIBPTH}${LIBPTH:+ }$value"
+            test -z "$value" || LIBICONV="${LIBICONV}${LIBICONV:+ }$value"
             eval value=\"\$LTLIB$uppername\"
-            test -z "$value" || LTLIBPTH="${LTLIBPTH}${LTLIBPTH:+ }$value"
+            test -z "$value" || LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }$value"
           else
                                     :
           fi
@@ -23080,7 +21989,7 @@ fi
             fi
           fi
           if test "X$found_dir" = "X"; then
-            for x in $LDFLAGS $LTLIBPTH; do
+            for x in $LDFLAGS $LTLIBICONV; do
 
   acl_save_prefix="$prefix"
   prefix="$acl_final_prefix"
@@ -23139,12 +22048,12 @@ fi
             done
           fi
           if test "X$found_dir" != "X"; then
-                        LTLIBPTH="${LTLIBPTH}${LTLIBPTH:+ }-L$found_dir -l$name"
+                        LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }-L$found_dir -l$name"
             if test "X$found_so" != "X"; then
                                                         if test "$enable_rpath" = no \
                  || test "X$found_dir" = "X/usr/$acl_libdirstem" \
                  || test "X$found_dir" = "X/usr/$acl_libdirstem2"; then
-                                LIBPTH="${LIBPTH}${LIBPTH:+ }$found_so"
+                                LIBICONV="${LIBICONV}${LIBICONV:+ }$found_so"
               else
                                                                                 haveit=
                 for x in $ltrpathdirs; do
@@ -23157,10 +22066,10 @@ fi
                   ltrpathdirs="$ltrpathdirs $found_dir"
                 fi
                                 if test "$acl_hardcode_direct" = yes; then
-                                                      LIBPTH="${LIBPTH}${LIBPTH:+ }$found_so"
+                                                      LIBICONV="${LIBICONV}${LIBICONV:+ }$found_so"
                 else
                   if test -n "$acl_hardcode_libdir_flag_spec" && test "$acl_hardcode_minus_L" = no; then
-                                                            LIBPTH="${LIBPTH}${LIBPTH:+ }$found_so"
+                                                            LIBICONV="${LIBICONV}${LIBICONV:+ }$found_so"
                                                             haveit=
                     for x in $rpathdirs; do
                       if test "X$x" = "X$found_dir"; then
@@ -23173,7 +22082,7 @@ fi
                     fi
                   else
                                                                                 haveit=
-                    for x in $LDFLAGS $LIBPTH; do
+                    for x in $LDFLAGS $LIBICONV; do
 
   acl_save_prefix="$prefix"
   prefix="$acl_final_prefix"
@@ -23189,36 +22098,36 @@ fi
                       fi
                     done
                     if test -z "$haveit"; then
-                      LIBPTH="${LIBPTH}${LIBPTH:+ }-L$found_dir"
+                      LIBICONV="${LIBICONV}${LIBICONV:+ }-L$found_dir"
                     fi
                     if test "$acl_hardcode_minus_L" != no; then
-                                                                                        LIBPTH="${LIBPTH}${LIBPTH:+ }$found_so"
+                                                                                        LIBICONV="${LIBICONV}${LIBICONV:+ }$found_so"
                     else
-                                                                                                                                                                                LIBPTH="${LIBPTH}${LIBPTH:+ }-l$name"
+                                                                                                                                                                                LIBICONV="${LIBICONV}${LIBICONV:+ }-l$name"
                     fi
                   fi
                 fi
               fi
             else
               if test "X$found_a" != "X"; then
-                                LIBPTH="${LIBPTH}${LIBPTH:+ }$found_a"
+                                LIBICONV="${LIBICONV}${LIBICONV:+ }$found_a"
               else
-                                                LIBPTH="${LIBPTH}${LIBPTH:+ }-L$found_dir -l$name"
+                                                LIBICONV="${LIBICONV}${LIBICONV:+ }-L$found_dir -l$name"
               fi
             fi
                         additional_includedir=
             case "$found_dir" in
               */$acl_libdirstem | */$acl_libdirstem/)
                 basedir=`echo "X$found_dir" | sed -e 's,^X,,' -e "s,/$acl_libdirstem/"'*$,,'`
-                if test "$name" = 'pth'; then
-                  LIBPTH_PREFIX="$basedir"
+                if test "$name" = 'iconv'; then
+                  LIBICONV_PREFIX="$basedir"
                 fi
                 additional_includedir="$basedir/include"
                 ;;
               */$acl_libdirstem2 | */$acl_libdirstem2/)
                 basedir=`echo "X$found_dir" | sed -e 's,^X,,' -e "s,/$acl_libdirstem2/"'*$,,'`
-                if test "$name" = 'pth'; then
-                  LIBPTH_PREFIX="$basedir"
+                if test "$name" = 'iconv'; then
+                  LIBICONV_PREFIX="$basedir"
                 fi
                 additional_includedir="$basedir/include"
                 ;;
@@ -23234,7 +22143,7 @@ fi
                   fi
                 fi
                 if test -z "$haveit"; then
-                  for x in $CPPFLAGS $INCPTH; do
+                  for x in $CPPFLAGS $INCICONV; do
 
   acl_save_prefix="$prefix"
   prefix="$acl_final_prefix"
@@ -23251,7 +22160,7 @@ fi
                   done
                   if test -z "$haveit"; then
                     if test -d "$additional_includedir"; then
-                                            INCPTH="${INCPTH}${INCPTH:+ }-I$additional_includedir"
+                                            INCICONV="${INCICONV}${INCICONV:+ }-I$additional_includedir"
                     fi
                   fi
                 fi
@@ -23281,7 +22190,7 @@ fi
                       fi
                       if test -z "$haveit"; then
                         haveit=
-                        for x in $LDFLAGS $LIBPTH; do
+                        for x in $LDFLAGS $LIBICONV; do
 
   acl_save_prefix="$prefix"
   prefix="$acl_final_prefix"
@@ -23298,11 +22207,11 @@ fi
                         done
                         if test -z "$haveit"; then
                           if test -d "$additional_libdir"; then
-                                                        LIBPTH="${LIBPTH}${LIBPTH:+ }-L$additional_libdir"
+                                                        LIBICONV="${LIBICONV}${LIBICONV:+ }-L$additional_libdir"
                           fi
                         fi
                         haveit=
-                        for x in $LDFLAGS $LTLIBPTH; do
+                        for x in $LDFLAGS $LTLIBICONV; do
 
   acl_save_prefix="$prefix"
   prefix="$acl_final_prefix"
@@ -23319,7 +22228,7 @@ fi
                         done
                         if test -z "$haveit"; then
                           if test -d "$additional_libdir"; then
-                                                        LTLIBPTH="${LTLIBPTH}${LTLIBPTH:+ }-L$additional_libdir"
+                                                        LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }-L$additional_libdir"
                           fi
                         fi
                       fi
@@ -23357,15 +22266,15 @@ fi
                                                                                 names_next_round="$names_next_round "`echo "X$dep" | sed -e 's,^X.*/,,' -e 's,^lib,,' -e 's,\.la$,,'`
                     ;;
                   *)
-                                        LIBPTH="${LIBPTH}${LIBPTH:+ }$dep"
-                    LTLIBPTH="${LTLIBPTH}${LTLIBPTH:+ }$dep"
+                                        LIBICONV="${LIBICONV}${LIBICONV:+ }$dep"
+                    LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }$dep"
                     ;;
                 esac
               done
             fi
           else
-                                                            LIBPTH="${LIBPTH}${LIBPTH:+ }-l$name"
-            LTLIBPTH="${LTLIBPTH}${LTLIBPTH:+ }-l$name"
+                                                            LIBICONV="${LIBICONV}${LIBICONV:+ }-l$name"
+            LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }-l$name"
           fi
         fi
       fi
@@ -23381,20 +22290,20 @@ fi
       libdir="$alldirs"
       eval flag=\"$acl_hardcode_libdir_flag_spec\"
       libdir="$acl_save_libdir"
-      LIBPTH="${LIBPTH}${LIBPTH:+ }$flag"
+      LIBICONV="${LIBICONV}${LIBICONV:+ }$flag"
     else
             for found_dir in $rpathdirs; do
         acl_save_libdir="$libdir"
         libdir="$found_dir"
         eval flag=\"$acl_hardcode_libdir_flag_spec\"
         libdir="$acl_save_libdir"
-        LIBPTH="${LIBPTH}${LIBPTH:+ }$flag"
+        LIBICONV="${LIBICONV}${LIBICONV:+ }$flag"
       done
     fi
   fi
   if test "X$ltrpathdirs" != "X"; then
             for found_dir in $ltrpathdirs; do
-      LTLIBPTH="${LTLIBPTH}${LTLIBPTH:+ }-R$found_dir"
+      LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }-R$found_dir"
     done
   fi
 
@@ -23403,109 +22312,17 @@ fi
 
 
 
-    ac_cv_libpth_libs="$LIBPTH"
-    ac_cv_libpth_ltlibs="$LTLIBPTH"
-    ac_cv_libpth_cppflags="$INCPTH"
-    ac_cv_libpth_prefix="$LIBPTH_PREFIX"
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_libpth_libs" >&5
-$as_echo "$ac_cv_libpth_libs" >&6; }
-  LIBPTH="$ac_cv_libpth_libs"
-  LTLIBPTH="$ac_cv_libpth_ltlibs"
-  INCPTH="$ac_cv_libpth_cppflags"
-  LIBPTH_PREFIX="$ac_cv_libpth_prefix"
-
-  for element in $INCPTH; do
-    haveit=
-    for x in $CPPFLAGS; do
-
-  acl_save_prefix="$prefix"
-  prefix="$acl_final_prefix"
-  acl_save_exec_prefix="$exec_prefix"
-  exec_prefix="$acl_final_exec_prefix"
-  eval x=\"$x\"
-  exec_prefix="$acl_save_exec_prefix"
-  prefix="$acl_save_prefix"
 
-      if test "X$x" = "X$element"; then
-        haveit=yes
-        break
-      fi
-    done
-    if test -z "$haveit"; then
-      CPPFLAGS="${CPPFLAGS}${CPPFLAGS:+ }$element"
-    fi
-  done
 
 
 
 
-      HAVE_LIBPTH=yes
 
 
 
-      gl_have_pth=
-      gl_save_LIBS="$LIBS"
-      LIBS="$LIBS -lpth"
-      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <pth.h>
-int
-main ()
-{
-pth_self();
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  gl_have_pth=yes
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-      LIBS="$gl_save_LIBS"
-      if test -n "$gl_have_pth"; then
-        gl_threads_api=pth
-        LIBTHREAD="$LIBPTH"
-        LTLIBTHREAD="$LTLIBPTH"
-        LIBMULTITHREAD="$LIBTHREAD"
-        LTLIBMULTITHREAD="$LTLIBTHREAD"
-
-$as_echo "#define USE_PTH_THREADS 1" >>confdefs.h
-
-        if test -n "$LIBMULTITHREAD" || test -n "$LTLIBMULTITHREAD"; then
-          if case "$gl_cv_have_weak" in *yes) true;; *) false;; esac; then
 
-$as_echo "#define USE_PTH_THREADS_WEAK 1" >>confdefs.h
-
-            LIBTHREAD=
-            LTLIBTHREAD=
-          fi
-        fi
-      else
-        CPPFLAGS="$gl_save_CPPFLAGS"
-      fi
-    fi
-    if test -z "$gl_have_pthread"; then
-      if test "$gl_use_threads" = yes || test "$gl_use_threads" = win32; then
-        if { case "$host_os" in
-               mingw*) true;;
-               *) false;;
-             esac
-           }; then
-          gl_threads_api=win32
 
-$as_echo "#define USE_WIN32_THREADS 1" >>confdefs.h
 
-        fi
-      fi
-    fi
-  fi
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for multithread API to use" >&5
-$as_echo_n "checking for multithread API to use... " >&6; }
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_threads_api" >&5
-$as_echo "$gl_threads_api" >&6; }
 
 
 
@@ -23517,511 +22334,152 @@ $as_echo "$gl_threads_api" >&6; }
 
 
 
-  if test "$gl_threads_api" = posix; then
-    # OSF/1 4.0 and MacOS X 10.1 lack the pthread_rwlock_t type and the
-    # pthread_rwlock_* functions.
-    ac_fn_c_check_type "$LINENO" "pthread_rwlock_t" "ac_cv_type_pthread_rwlock_t" "#include <pthread.h>
-"
-if test "x$ac_cv_type_pthread_rwlock_t" = xyes; then :
 
-$as_echo "#define HAVE_PTHREAD_RWLOCK 1" >>confdefs.h
 
-fi
 
-    # glibc defines PTHREAD_MUTEX_RECURSIVE as enum, not as a macro.
-    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CFPreferencesCopyAppValue" >&5
+$as_echo_n "checking for CFPreferencesCopyAppValue... " >&6; }
+if ${gt_cv_func_CFPreferencesCopyAppValue+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  gt_save_LIBS="$LIBS"
+     LIBS="$LIBS -Wl,-framework -Wl,CoreFoundation"
+     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#include <pthread.h>
+#include <CoreFoundation/CFPreferences.h>
 int
 main ()
 {
-#if __FreeBSD__ == 4
-error "No, in FreeBSD 4.0 recursive mutexes actually don't work."
-#else
-int x = (int)PTHREAD_MUTEX_RECURSIVE;
-return !x;
-#endif
+CFPreferencesCopyAppValue(NULL, NULL)
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-
-$as_echo "#define HAVE_PTHREAD_MUTEX_RECURSIVE 1" >>confdefs.h
-
+if ac_fn_c_try_link "$LINENO"; then :
+  gt_cv_func_CFPreferencesCopyAppValue=yes
+else
+  gt_cv_func_CFPreferencesCopyAppValue=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-  fi
-
-
-
-
-
-
-
-
-
-
-
-
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext conftest.$ac_ext
+     LIBS="$gt_save_LIBS"
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFPreferencesCopyAppValue" >&5
+$as_echo "$gt_cv_func_CFPreferencesCopyAppValue" >&6; }
+  if test $gt_cv_func_CFPreferencesCopyAppValue = yes; then
 
+$as_echo "#define HAVE_CFPREFERENCESCOPYAPPVALUE 1" >>confdefs.h
 
+  fi
+    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CFLocaleCopyCurrent" >&5
+$as_echo_n "checking for CFLocaleCopyCurrent... " >&6; }
+if ${gt_cv_func_CFLocaleCopyCurrent+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  gt_save_LIBS="$LIBS"
+     LIBS="$LIBS -Wl,-framework -Wl,CoreFoundation"
+     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <CoreFoundation/CFLocale.h>
+int
+main ()
+{
+CFLocaleCopyCurrent();
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_link "$LINENO"; then :
+  gt_cv_func_CFLocaleCopyCurrent=yes
+else
+  gt_cv_func_CFLocaleCopyCurrent=no
+fi
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext conftest.$ac_ext
+     LIBS="$gt_save_LIBS"
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFLocaleCopyCurrent" >&5
+$as_echo "$gt_cv_func_CFLocaleCopyCurrent" >&6; }
+  if test $gt_cv_func_CFLocaleCopyCurrent = yes; then
 
-    use_additional=yes
+$as_echo "#define HAVE_CFLOCALECOPYCURRENT 1" >>confdefs.h
 
-  acl_save_prefix="$prefix"
-  prefix="$acl_final_prefix"
-  acl_save_exec_prefix="$exec_prefix"
-  exec_prefix="$acl_final_exec_prefix"
+  fi
+  INTL_MACOSX_LIBS=
+  if test $gt_cv_func_CFPreferencesCopyAppValue = yes || test $gt_cv_func_CFLocaleCopyCurrent = yes; then
+    INTL_MACOSX_LIBS="-Wl,-framework -Wl,CoreFoundation"
+  fi
 
-    eval additional_includedir=\"$includedir\"
-    eval additional_libdir=\"$libdir\"
 
-  exec_prefix="$acl_save_exec_prefix"
-  prefix="$acl_save_prefix"
 
 
-# Check whether --with-libiconv-prefix was given.
-if test "${with_libiconv_prefix+set}" = set; then :
-  withval=$with_libiconv_prefix;
-    if test "X$withval" = "Xno"; then
-      use_additional=no
-    else
-      if test "X$withval" = "X"; then
 
-  acl_save_prefix="$prefix"
-  prefix="$acl_final_prefix"
-  acl_save_exec_prefix="$exec_prefix"
-  exec_prefix="$acl_final_exec_prefix"
 
-          eval additional_includedir=\"$includedir\"
-          eval additional_libdir=\"$libdir\"
+  LIBINTL=
+  LTLIBINTL=
+  POSUB=
 
-  exec_prefix="$acl_save_exec_prefix"
-  prefix="$acl_save_prefix"
+    case " $gt_needs " in
+    *" need-formatstring-macros "*) gt_api_version=3 ;;
+    *" need-ngettext "*) gt_api_version=2 ;;
+    *) gt_api_version=1 ;;
+  esac
+  gt_func_gnugettext_libc="gt_cv_func_gnugettext${gt_api_version}_libc"
+  gt_func_gnugettext_libintl="gt_cv_func_gnugettext${gt_api_version}_libintl"
 
-      else
-        additional_includedir="$withval/include"
-        additional_libdir="$withval/$acl_libdirstem"
-        if test "$acl_libdirstem2" != "$acl_libdirstem" \
-           && ! test -d "$withval/$acl_libdirstem"; then
-          additional_libdir="$withval/$acl_libdirstem2"
-        fi
-      fi
-    fi
+    if test "$USE_NLS" = "yes"; then
+    gt_use_preinstalled_gnugettext=no
 
-fi
 
-      LIBICONV=
-  LTLIBICONV=
-  INCICONV=
-  LIBICONV_PREFIX=
-      HAVE_LIBICONV=
-  rpathdirs=
-  ltrpathdirs=
-  names_already_handled=
-  names_next_round='iconv '
-  while test -n "$names_next_round"; do
-    names_this_round="$names_next_round"
-    names_next_round=
-    for name in $names_this_round; do
-      already_handled=
-      for n in $names_already_handled; do
-        if test "$n" = "$name"; then
-          already_handled=yes
-          break
+        if test $gt_api_version -ge 3; then
+          gt_revision_test_code='
+#ifndef __GNU_GETTEXT_SUPPORTED_REVISION
+#define __GNU_GETTEXT_SUPPORTED_REVISION(major) ((major) == 0 ? 0 : -1)
+#endif
+typedef int array [2 * (__GNU_GETTEXT_SUPPORTED_REVISION(0) >= 1) - 1];
+'
+        else
+          gt_revision_test_code=
         fi
-      done
-      if test -z "$already_handled"; then
-        names_already_handled="$names_already_handled $name"
-                        uppername=`echo "$name" | sed -e 'y|abcdefghijklmnopqrstuvwxyz./-|ABCDEFGHIJKLMNOPQRSTUVWXYZ___|'`
-        eval value=\"\$HAVE_LIB$uppername\"
-        if test -n "$value"; then
-          if test "$value" = yes; then
-            eval value=\"\$LIB$uppername\"
-            test -z "$value" || LIBICONV="${LIBICONV}${LIBICONV:+ }$value"
-            eval value=\"\$LTLIB$uppername\"
-            test -z "$value" || LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }$value"
-          else
-                                    :
-          fi
+        if test $gt_api_version -ge 2; then
+          gt_expression_test_code=' + * ngettext ("", "", 0)'
         else
-                              found_dir=
-          found_la=
-          found_so=
-          found_a=
-          eval libname=\"$acl_libname_spec\"    # typically: libname=lib$name
-          if test -n "$acl_shlibext"; then
-            shrext=".$acl_shlibext"             # typically: shrext=.so
-          else
-            shrext=
-          fi
-          if test $use_additional = yes; then
-            dir="$additional_libdir"
-                                    if test -n "$acl_shlibext"; then
-              if test -f "$dir/$libname$shrext"; then
-                found_dir="$dir"
-                found_so="$dir/$libname$shrext"
-              else
-                if test "$acl_library_names_spec" = '$libname$shrext$versuffix'; then
-                  ver=`(cd "$dir" && \
-                        for f in "$libname$shrext".*; do echo "$f"; done \
-                        | sed -e "s,^$libname$shrext\\\\.,," \
-                        | sort -t '.' -n -r -k1,1 -k2,2 -k3,3 -k4,4 -k5,5 \
-                        | sed 1q ) 2>/dev/null`
-                  if test -n "$ver" && test -f "$dir/$libname$shrext.$ver"; then
-                    found_dir="$dir"
-                    found_so="$dir/$libname$shrext.$ver"
-                  fi
-                else
-                  eval library_names=\"$acl_library_names_spec\"
-                  for f in $library_names; do
-                    if test -f "$dir/$f"; then
-                      found_dir="$dir"
-                      found_so="$dir/$f"
-                      break
-                    fi
-                  done
-                fi
-              fi
-            fi
-                        if test "X$found_dir" = "X"; then
-              if test -f "$dir/$libname.$acl_libext"; then
-                found_dir="$dir"
-                found_a="$dir/$libname.$acl_libext"
-              fi
-            fi
-            if test "X$found_dir" != "X"; then
-              if test -f "$dir/$libname.la"; then
-                found_la="$dir/$libname.la"
-              fi
-            fi
-          fi
-          if test "X$found_dir" = "X"; then
-            for x in $LDFLAGS $LTLIBICONV; do
-
-  acl_save_prefix="$prefix"
-  prefix="$acl_final_prefix"
-  acl_save_exec_prefix="$exec_prefix"
-  exec_prefix="$acl_final_exec_prefix"
-  eval x=\"$x\"
-  exec_prefix="$acl_save_exec_prefix"
-  prefix="$acl_save_prefix"
-
-              case "$x" in
-                -L*)
-                  dir=`echo "X$x" | sed -e 's/^X-L//'`
-                                    if test -n "$acl_shlibext"; then
-                    if test -f "$dir/$libname$shrext"; then
-                      found_dir="$dir"
-                      found_so="$dir/$libname$shrext"
-                    else
-                      if test "$acl_library_names_spec" = '$libname$shrext$versuffix'; then
-                        ver=`(cd "$dir" && \
-                              for f in "$libname$shrext".*; do echo "$f"; done \
-                              | sed -e "s,^$libname$shrext\\\\.,," \
-                              | sort -t '.' -n -r -k1,1 -k2,2 -k3,3 -k4,4 -k5,5 \
-                              | sed 1q ) 2>/dev/null`
-                        if test -n "$ver" && test -f "$dir/$libname$shrext.$ver"; then
-                          found_dir="$dir"
-                          found_so="$dir/$libname$shrext.$ver"
-                        fi
-                      else
-                        eval library_names=\"$acl_library_names_spec\"
-                        for f in $library_names; do
-                          if test -f "$dir/$f"; then
-                            found_dir="$dir"
-                            found_so="$dir/$f"
-                            break
-                          fi
-                        done
-                      fi
-                    fi
-                  fi
-                                    if test "X$found_dir" = "X"; then
-                    if test -f "$dir/$libname.$acl_libext"; then
-                      found_dir="$dir"
-                      found_a="$dir/$libname.$acl_libext"
-                    fi
-                  fi
-                  if test "X$found_dir" != "X"; then
-                    if test -f "$dir/$libname.la"; then
-                      found_la="$dir/$libname.la"
-                    fi
-                  fi
-                  ;;
-              esac
-              if test "X$found_dir" != "X"; then
-                break
-              fi
-            done
-          fi
-          if test "X$found_dir" != "X"; then
-                        LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }-L$found_dir -l$name"
-            if test "X$found_so" != "X"; then
-                                                        if test "$enable_rpath" = no \
-                 || test "X$found_dir" = "X/usr/$acl_libdirstem" \
-                 || test "X$found_dir" = "X/usr/$acl_libdirstem2"; then
-                                LIBICONV="${LIBICONV}${LIBICONV:+ }$found_so"
-              else
-                                                                                haveit=
-                for x in $ltrpathdirs; do
-                  if test "X$x" = "X$found_dir"; then
-                    haveit=yes
-                    break
-                  fi
-                done
-                if test -z "$haveit"; then
-                  ltrpathdirs="$ltrpathdirs $found_dir"
-                fi
-                                if test "$acl_hardcode_direct" = yes; then
-                                                      LIBICONV="${LIBICONV}${LIBICONV:+ }$found_so"
-                else
-                  if test -n "$acl_hardcode_libdir_flag_spec" && test "$acl_hardcode_minus_L" = no; then
-                                                            LIBICONV="${LIBICONV}${LIBICONV:+ }$found_so"
-                                                            haveit=
-                    for x in $rpathdirs; do
-                      if test "X$x" = "X$found_dir"; then
-                        haveit=yes
-                        break
-                      fi
-                    done
-                    if test -z "$haveit"; then
-                      rpathdirs="$rpathdirs $found_dir"
-                    fi
-                  else
-                                                                                haveit=
-                    for x in $LDFLAGS $LIBICONV; do
-
-  acl_save_prefix="$prefix"
-  prefix="$acl_final_prefix"
-  acl_save_exec_prefix="$exec_prefix"
-  exec_prefix="$acl_final_exec_prefix"
-  eval x=\"$x\"
-  exec_prefix="$acl_save_exec_prefix"
-  prefix="$acl_save_prefix"
-
-                      if test "X$x" = "X-L$found_dir"; then
-                        haveit=yes
-                        break
-                      fi
-                    done
-                    if test -z "$haveit"; then
-                      LIBICONV="${LIBICONV}${LIBICONV:+ }-L$found_dir"
-                    fi
-                    if test "$acl_hardcode_minus_L" != no; then
-                                                                                        LIBICONV="${LIBICONV}${LIBICONV:+ }$found_so"
-                    else
-                                                                                                                                                                                LIBICONV="${LIBICONV}${LIBICONV:+ }-l$name"
-                    fi
-                  fi
-                fi
-              fi
-            else
-              if test "X$found_a" != "X"; then
-                                LIBICONV="${LIBICONV}${LIBICONV:+ }$found_a"
-              else
-                                                LIBICONV="${LIBICONV}${LIBICONV:+ }-L$found_dir -l$name"
-              fi
-            fi
-                        additional_includedir=
-            case "$found_dir" in
-              */$acl_libdirstem | */$acl_libdirstem/)
-                basedir=`echo "X$found_dir" | sed -e 's,^X,,' -e "s,/$acl_libdirstem/"'*$,,'`
-                if test "$name" = 'iconv'; then
-                  LIBICONV_PREFIX="$basedir"
-                fi
-                additional_includedir="$basedir/include"
-                ;;
-              */$acl_libdirstem2 | */$acl_libdirstem2/)
-                basedir=`echo "X$found_dir" | sed -e 's,^X,,' -e "s,/$acl_libdirstem2/"'*$,,'`
-                if test "$name" = 'iconv'; then
-                  LIBICONV_PREFIX="$basedir"
-                fi
-                additional_includedir="$basedir/include"
-                ;;
-            esac
-            if test "X$additional_includedir" != "X"; then
-                                                                                                                if test "X$additional_includedir" != "X/usr/include"; then
-                haveit=
-                if test "X$additional_includedir" = "X/usr/local/include"; then
-                  if test -n "$GCC"; then
-                    case $host_os in
-                      linux* | gnu* | k*bsd*-gnu) haveit=yes;;
-                    esac
-                  fi
-                fi
-                if test -z "$haveit"; then
-                  for x in $CPPFLAGS $INCICONV; do
-
-  acl_save_prefix="$prefix"
-  prefix="$acl_final_prefix"
-  acl_save_exec_prefix="$exec_prefix"
-  exec_prefix="$acl_final_exec_prefix"
-  eval x=\"$x\"
-  exec_prefix="$acl_save_exec_prefix"
-  prefix="$acl_save_prefix"
-
-                    if test "X$x" = "X-I$additional_includedir"; then
-                      haveit=yes
-                      break
-                    fi
-                  done
-                  if test -z "$haveit"; then
-                    if test -d "$additional_includedir"; then
-                                            INCICONV="${INCICONV}${INCICONV:+ }-I$additional_includedir"
-                    fi
-                  fi
-                fi
-              fi
-            fi
-                        if test -n "$found_la"; then
-                                                        save_libdir="$libdir"
-              case "$found_la" in
-                */* | *\\*) . "$found_la" ;;
-                *) . "./$found_la" ;;
-              esac
-              libdir="$save_libdir"
-                            for dep in $dependency_libs; do
-                case "$dep" in
-                  -L*)
-                    additional_libdir=`echo "X$dep" | sed -e 's/^X-L//'`
-                                                                                                                                                                if test "X$additional_libdir" != "X/usr/$acl_libdirstem" \
-                       && test "X$additional_libdir" != "X/usr/$acl_libdirstem2"; then
-                      haveit=
-                      if test "X$additional_libdir" = "X/usr/local/$acl_libdirstem" \
-                         || test "X$additional_libdir" = "X/usr/local/$acl_libdirstem2"; then
-                        if test -n "$GCC"; then
-                          case $host_os in
-                            linux* | gnu* | k*bsd*-gnu) haveit=yes;;
-                          esac
-                        fi
-                      fi
-                      if test -z "$haveit"; then
-                        haveit=
-                        for x in $LDFLAGS $LIBICONV; do
-
-  acl_save_prefix="$prefix"
-  prefix="$acl_final_prefix"
-  acl_save_exec_prefix="$exec_prefix"
-  exec_prefix="$acl_final_exec_prefix"
-  eval x=\"$x\"
-  exec_prefix="$acl_save_exec_prefix"
-  prefix="$acl_save_prefix"
-
-                          if test "X$x" = "X-L$additional_libdir"; then
-                            haveit=yes
-                            break
-                          fi
-                        done
-                        if test -z "$haveit"; then
-                          if test -d "$additional_libdir"; then
-                                                        LIBICONV="${LIBICONV}${LIBICONV:+ }-L$additional_libdir"
-                          fi
-                        fi
-                        haveit=
-                        for x in $LDFLAGS $LTLIBICONV; do
-
-  acl_save_prefix="$prefix"
-  prefix="$acl_final_prefix"
-  acl_save_exec_prefix="$exec_prefix"
-  exec_prefix="$acl_final_exec_prefix"
-  eval x=\"$x\"
-  exec_prefix="$acl_save_exec_prefix"
-  prefix="$acl_save_prefix"
-
-                          if test "X$x" = "X-L$additional_libdir"; then
-                            haveit=yes
-                            break
-                          fi
-                        done
-                        if test -z "$haveit"; then
-                          if test -d "$additional_libdir"; then
-                                                        LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }-L$additional_libdir"
-                          fi
-                        fi
-                      fi
-                    fi
-                    ;;
-                  -R*)
-                    dir=`echo "X$dep" | sed -e 's/^X-R//'`
-                    if test "$enable_rpath" != no; then
-                                                                  haveit=
-                      for x in $rpathdirs; do
-                        if test "X$x" = "X$dir"; then
-                          haveit=yes
-                          break
-                        fi
-                      done
-                      if test -z "$haveit"; then
-                        rpathdirs="$rpathdirs $dir"
-                      fi
-                                                                  haveit=
-                      for x in $ltrpathdirs; do
-                        if test "X$x" = "X$dir"; then
-                          haveit=yes
-                          break
-                        fi
-                      done
-                      if test -z "$haveit"; then
-                        ltrpathdirs="$ltrpathdirs $dir"
-                      fi
-                    fi
-                    ;;
-                  -l*)
-                                        names_next_round="$names_next_round "`echo "X$dep" | sed -e 's/^X-l//'`
-                    ;;
-                  *.la)
-                                                                                names_next_round="$names_next_round "`echo "X$dep" | sed -e 's,^X.*/,,' -e 's,^lib,,' -e 's,\.la$,,'`
-                    ;;
-                  *)
-                                        LIBICONV="${LIBICONV}${LIBICONV:+ }$dep"
-                    LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }$dep"
-                    ;;
-                esac
-              done
-            fi
-          else
-                                                            LIBICONV="${LIBICONV}${LIBICONV:+ }-l$name"
-            LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }-l$name"
-          fi
+          gt_expression_test_code=
         fi
-      fi
-    done
-  done
-  if test "X$rpathdirs" != "X"; then
-    if test -n "$acl_hardcode_libdir_separator"; then
-                        alldirs=
-      for found_dir in $rpathdirs; do
-        alldirs="${alldirs}${alldirs:+$acl_hardcode_libdir_separator}$found_dir"
-      done
-            acl_save_libdir="$libdir"
-      libdir="$alldirs"
-      eval flag=\"$acl_hardcode_libdir_flag_spec\"
-      libdir="$acl_save_libdir"
-      LIBICONV="${LIBICONV}${LIBICONV:+ }$flag"
-    else
-            for found_dir in $rpathdirs; do
-        acl_save_libdir="$libdir"
-        libdir="$found_dir"
-        eval flag=\"$acl_hardcode_libdir_flag_spec\"
-        libdir="$acl_save_libdir"
-        LIBICONV="${LIBICONV}${LIBICONV:+ }$flag"
-      done
-    fi
-  fi
-  if test "X$ltrpathdirs" != "X"; then
-            for found_dir in $ltrpathdirs; do
-      LTLIBICONV="${LTLIBICONV}${LTLIBICONV:+ }-R$found_dir"
-    done
-  fi
-
-
-
-
-
 
+        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU gettext in libc" >&5
+$as_echo_n "checking for GNU gettext in libc... " >&6; }
+if eval \${$gt_func_gnugettext_libc+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <libintl.h>
+$gt_revision_test_code
+extern int _nl_msg_cat_cntr;
+extern int *_nl_domain_bindings;
+int
+main ()
+{
+bindtextdomain ("", "");
+return * gettext ("")$gt_expression_test_code + _nl_msg_cat_cntr + *_nl_domain_bindings
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_link "$LINENO"; then :
+  eval "$gt_func_gnugettext_libc=yes"
+else
+  eval "$gt_func_gnugettext_libc=no"
+fi
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext conftest.$ac_ext
+fi
+eval ac_res=\$$gt_func_gnugettext_libc
+	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
 
+        if { eval "gt_val=\$$gt_func_gnugettext_libc"; test "$gt_val" != "yes"; }; then
 
 
 
@@ -24243,1420 +22701,6 @@ $as_echo "$LIBICONV" >&6; }
 
 
 
-  if test "$am_cv_func_iconv" = yes; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for iconv declaration" >&5
-$as_echo_n "checking for iconv declaration... " >&6; }
-    if ${am_cv_proto_iconv+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-
-      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-#include <stdlib.h>
-#include <iconv.h>
-extern
-#ifdef __cplusplus
-"C"
-#endif
-#if defined(__STDC__) || defined(__cplusplus)
-size_t iconv (iconv_t cd, char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);
-#else
-size_t iconv();
-#endif
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  am_cv_proto_iconv_arg1=""
-else
-  am_cv_proto_iconv_arg1="const"
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-      am_cv_proto_iconv="extern size_t iconv (iconv_t cd, $am_cv_proto_iconv_arg1 char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);"
-fi
-
-    am_cv_proto_iconv=`echo "$am_cv_proto_iconv" | tr -s ' ' | sed -e 's/( /(/'`
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result:
-         $am_cv_proto_iconv" >&5
-$as_echo "
-         $am_cv_proto_iconv" >&6; }
-
-cat >>confdefs.h <<_ACEOF
-#define ICONV_CONST $am_cv_proto_iconv_arg1
-_ACEOF
-
-  fi
-
-
-
-
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-int foo (int a) { a = __builtin_expect (a, 10); return a == 10 ? 0 : 1; }
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-
-$as_echo "#define HAVE_BUILTIN_EXPECT 1" >>confdefs.h
-
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-
-  for ac_header in argz.h inttypes.h limits.h unistd.h sys/param.h
-do :
-  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
-ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
-
-fi
-
-done
-
-  for ac_func in getcwd getegid geteuid getgid getuid mempcpy munmap \
-    stpcpy strcasecmp strdup strtoul tsearch uselocale argz_count \
-    argz_stringify argz_next __fsetlocking
-do :
-  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
-ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
-_ACEOF
-
-fi
-done
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether feof_unlocked is declared" >&5
-$as_echo_n "checking whether feof_unlocked is declared... " >&6; }
-if ${ac_cv_have_decl_feof_unlocked+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdio.h>
-int
-main ()
-{
-
-#ifndef feof_unlocked
-  char *p = (char *) feof_unlocked;
-#endif
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_cv_have_decl_feof_unlocked=yes
-else
-  ac_cv_have_decl_feof_unlocked=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl_feof_unlocked" >&5
-$as_echo "$ac_cv_have_decl_feof_unlocked" >&6; }
-  if test $ac_cv_have_decl_feof_unlocked = yes; then
-    gt_value=1
-  else
-    gt_value=0
-  fi
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL_FEOF_UNLOCKED $gt_value
-_ACEOF
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether fgets_unlocked is declared" >&5
-$as_echo_n "checking whether fgets_unlocked is declared... " >&6; }
-if ${ac_cv_have_decl_fgets_unlocked+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdio.h>
-int
-main ()
-{
-
-#ifndef fgets_unlocked
-  char *p = (char *) fgets_unlocked;
-#endif
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_cv_have_decl_fgets_unlocked=yes
-else
-  ac_cv_have_decl_fgets_unlocked=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl_fgets_unlocked" >&5
-$as_echo "$ac_cv_have_decl_fgets_unlocked" >&6; }
-  if test $ac_cv_have_decl_fgets_unlocked = yes; then
-    gt_value=1
-  else
-    gt_value=0
-  fi
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL_FGETS_UNLOCKED $gt_value
-_ACEOF
-
-
-
-
-
-                      for ac_prog in bison
-do
-  # Extract the first word of "$ac_prog", so it can be a program name with args.
-set dummy $ac_prog; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_INTLBISON+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test -n "$INTLBISON"; then
-  ac_cv_prog_INTLBISON="$INTLBISON" # Let the user override the test.
-else
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_INTLBISON="$ac_prog"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-  done
-IFS=$as_save_IFS
-
-fi
-fi
-INTLBISON=$ac_cv_prog_INTLBISON
-if test -n "$INTLBISON"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $INTLBISON" >&5
-$as_echo "$INTLBISON" >&6; }
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-fi
-
-
-  test -n "$INTLBISON" && break
-done
-
-  if test -z "$INTLBISON"; then
-    ac_verc_fail=yes
-  else
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking version of bison" >&5
-$as_echo_n "checking version of bison... " >&6; }
-    ac_prog_version=`$INTLBISON --version 2>&1 | sed -n 's/^.*GNU Bison.* \([0-9]*\.[0-9.]*\).*$/\1/p'`
-    case $ac_prog_version in
-      '') ac_prog_version="v. ?.??, bad"; ac_verc_fail=yes;;
-      1.2[6-9]* | 1.[3-9][0-9]* | [2-9].*)
-         ac_prog_version="$ac_prog_version, ok"; ac_verc_fail=no;;
-      *) ac_prog_version="$ac_prog_version, bad"; ac_verc_fail=yes;;
-    esac
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_prog_version" >&5
-$as_echo "$ac_prog_version" >&6; }
-  fi
-  if test $ac_verc_fail = yes; then
-    INTLBISON=:
-  fi
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for long long int" >&5
-$as_echo_n "checking for long long int... " >&6; }
-if ${ac_cv_type_long_long_int+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-  /* For now, do not test the preprocessor; as of 2007 there are too many
-         implementations with broken preprocessors.  Perhaps this can
-         be revisited in 2012.  In the meantime, code should not expect
-         #if to work with literals wider than 32 bits.  */
-      /* Test literals.  */
-      long long int ll = 9223372036854775807ll;
-      long long int nll = -9223372036854775807LL;
-      unsigned long long int ull = 18446744073709551615ULL;
-      /* Test constant expressions.   */
-      typedef int a[((-9223372036854775807LL < 0 && 0 < 9223372036854775807ll)
-                     ? 1 : -1)];
-      typedef int b[(18446744073709551615ULL <= (unsigned long long int) -1
-                     ? 1 : -1)];
-      int i = 63;
-int
-main ()
-{
-/* Test availability of runtime routines for shift and division.  */
-      long long int llmax = 9223372036854775807ll;
-      unsigned long long int ullmax = 18446744073709551615ull;
-      return ((ll << 63) | (ll >> 63) | (ll < i) | (ll > i)
-              | (llmax / ll) | (llmax % ll)
-              | (ull << 63) | (ull >> 63) | (ull << i) | (ull >> i)
-              | (ullmax / ull) | (ullmax % ull));
-  ;
-  return 0;
-}
-
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-                          if test "$cross_compiling" = yes; then :
-  ac_cv_type_long_long_int=yes
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <limits.h>
-               #ifndef LLONG_MAX
-               # define HALF \
-                        (1LL << (sizeof (long long int) * CHAR_BIT - 2))
-               # define LLONG_MAX (HALF - 1 + HALF)
-               #endif
-int
-main ()
-{
-long long int n = 1;
-               int i;
-               for (i = 0; ; i++)
-                 {
-                   long long int m = n << i;
-                   if (m >> i != n)
-                     return 1;
-                   if (LLONG_MAX / 2 < m)
-                     break;
-                 }
-               return 0;
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
-  ac_cv_type_long_long_int=yes
-else
-  ac_cv_type_long_long_int=no
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
-fi
-
-else
-  ac_cv_type_long_long_int=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_long_long_int" >&5
-$as_echo "$ac_cv_type_long_long_int" >&6; }
-  if test $ac_cv_type_long_long_int = yes; then
-
-$as_echo "#define HAVE_LONG_LONG_INT 1" >>confdefs.h
-
-  fi
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for wchar_t" >&5
-$as_echo_n "checking for wchar_t... " >&6; }
-if ${gt_cv_c_wchar_t+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stddef.h>
-       wchar_t foo = (wchar_t)'\0';
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  gt_cv_c_wchar_t=yes
-else
-  gt_cv_c_wchar_t=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_c_wchar_t" >&5
-$as_echo "$gt_cv_c_wchar_t" >&6; }
-  if test $gt_cv_c_wchar_t = yes; then
-
-$as_echo "#define HAVE_WCHAR_T 1" >>confdefs.h
-
-  fi
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for wint_t" >&5
-$as_echo_n "checking for wint_t... " >&6; }
-if ${gt_cv_c_wint_t+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-/* Tru64 with Desktop Toolkit C has a bug: <stdio.h> must be included before
-   <wchar.h>.
-   BSD/OS 4.0.1 has a bug: <stddef.h>, <stdio.h> and <time.h> must be included
-   before <wchar.h>.  */
-#include <stddef.h>
-#include <stdio.h>
-#include <time.h>
-#include <wchar.h>
-       wint_t foo = (wchar_t)'\0';
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  gt_cv_c_wint_t=yes
-else
-  gt_cv_c_wint_t=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_c_wint_t" >&5
-$as_echo "$gt_cv_c_wint_t" >&6; }
-  if test $gt_cv_c_wint_t = yes; then
-
-$as_echo "#define HAVE_WINT_T 1" >>confdefs.h
-
-  fi
-
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for intmax_t" >&5
-$as_echo_n "checking for intmax_t... " >&6; }
-if ${gt_cv_c_intmax_t+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-#include <stddef.h>
-#include <stdlib.h>
-#if HAVE_STDINT_H_WITH_UINTMAX
-#include <stdint.h>
-#endif
-#if HAVE_INTTYPES_H_WITH_UINTMAX
-#include <inttypes.h>
-#endif
-
-int
-main ()
-{
-intmax_t x = -1;
-        return !x;
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  gt_cv_c_intmax_t=yes
-else
-  gt_cv_c_intmax_t=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_c_intmax_t" >&5
-$as_echo "$gt_cv_c_intmax_t" >&6; }
-  if test $gt_cv_c_intmax_t = yes; then
-
-$as_echo "#define HAVE_INTMAX_T 1" >>confdefs.h
-
-  fi
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether printf() supports POSIX/XSI format strings" >&5
-$as_echo_n "checking whether printf() supports POSIX/XSI format strings... " >&6; }
-if ${gt_cv_func_printf_posix+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-
-      if test "$cross_compiling" = yes; then :
-
-        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-#if defined __NetBSD__ || defined __BEOS__ || defined _MSC_VER || defined __MINGW32__ || defined __CYGWIN__
-  notposix
-#endif
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "notposix" >/dev/null 2>&1; then :
-  gt_cv_func_printf_posix="guessing no"
-else
-  gt_cv_func_printf_posix="guessing yes"
-fi
-rm -f conftest*
-
-
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-#include <stdio.h>
-#include <string.h>
-/* The string "%2$d %1$d", with dollar characters protected from the shell's
-   dollar expansion (possibly an autoconf bug).  */
-static char format[] = { '%', '2', '$', 'd', ' ', '%', '1', '$', 'd', '\0' };
-static char buf[100];
-int main ()
-{
-  sprintf (buf, format, 33, 55);
-  return (strcmp (buf, "55 33") != 0);
-}
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
-  gt_cv_func_printf_posix=yes
-else
-  gt_cv_func_printf_posix=no
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
-fi
-
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_printf_posix" >&5
-$as_echo "$gt_cv_func_printf_posix" >&6; }
-  case $gt_cv_func_printf_posix in
-    *yes)
-
-$as_echo "#define HAVE_POSIX_PRINTF 1" >>confdefs.h
-
-      ;;
-  esac
-
-
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C Library 2.1 or newer" >&5
-$as_echo_n "checking whether we are using the GNU C Library 2.1 or newer... " >&6; }
-if ${ac_cv_gnu_library_2_1+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-#include <features.h>
-#ifdef __GNU_LIBRARY__
- #if (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 1) || (__GLIBC__ > 2)
-  Lucky GNU user
- #endif
-#endif
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "Lucky GNU user" >/dev/null 2>&1; then :
-  ac_cv_gnu_library_2_1=yes
-else
-  ac_cv_gnu_library_2_1=no
-fi
-rm -f conftest*
-
-
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_gnu_library_2_1" >&5
-$as_echo "$ac_cv_gnu_library_2_1" >&6; }
-
-    GLIBC21="$ac_cv_gnu_library_2_1"
-
-
-
-  for ac_header in stdint.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "stdint.h" "ac_cv_header_stdint_h" "$ac_includes_default"
-if test "x$ac_cv_header_stdint_h" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_STDINT_H 1
-_ACEOF
-
-fi
-
-done
-
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SIZE_MAX" >&5
-$as_echo_n "checking for SIZE_MAX... " >&6; }
-if ${gl_cv_size_max+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-
-    gl_cv_size_max=
-    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-#include <limits.h>
-#if HAVE_STDINT_H
-#include <stdint.h>
-#endif
-#ifdef SIZE_MAX
-Found it
-#endif
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "Found it" >/dev/null 2>&1; then :
-  gl_cv_size_max=yes
-fi
-rm -f conftest*
-
-    if test -z "$gl_cv_size_max"; then
-                        if ac_fn_c_compute_int "$LINENO" "sizeof (size_t) * CHAR_BIT - 1" "size_t_bits_minus_1"        "#include <stddef.h>
-#include <limits.h>"; then :
-
-else
-  size_t_bits_minus_1=
-fi
-
-      if ac_fn_c_compute_int "$LINENO" "sizeof (size_t) <= sizeof (unsigned int)" "fits_in_uint"        "#include <stddef.h>"; then :
-
-else
-  fits_in_uint=
-fi
-
-      if test -n "$size_t_bits_minus_1" && test -n "$fits_in_uint"; then
-        if test $fits_in_uint = 1; then
-                              cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stddef.h>
-            extern size_t foo;
-            extern unsigned long foo;
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  fits_in_uint=0
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-        fi
-                                if test $fits_in_uint = 1; then
-          gl_cv_size_max="(((1U << $size_t_bits_minus_1) - 1) * 2 + 1)"
-        else
-          gl_cv_size_max="(((1UL << $size_t_bits_minus_1) - 1) * 2 + 1)"
-        fi
-      else
-                gl_cv_size_max='((size_t)~(size_t)0)'
-      fi
-    fi
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_cv_size_max" >&5
-$as_echo "$gl_cv_size_max" >&6; }
-  if test "$gl_cv_size_max" != yes; then
-
-cat >>confdefs.h <<_ACEOF
-#define SIZE_MAX $gl_cv_size_max
-_ACEOF
-
-  fi
-
-
-
-
-
-  for ac_header in stdint.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "stdint.h" "ac_cv_header_stdint_h" "$ac_includes_default"
-if test "x$ac_cv_header_stdint_h" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_STDINT_H 1
-_ACEOF
-
-fi
-
-done
-
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working fcntl.h" >&5
-$as_echo_n "checking for working fcntl.h... " >&6; }
-if ${gl_cv_header_working_fcntl_h+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test "$cross_compiling" = yes; then :
-  gl_cv_header_working_fcntl_h=cross-compiling
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <sys/types.h>
-           #include <sys/stat.h>
-           #include <unistd.h>
-           #include <fcntl.h>
-           #ifndef O_NOATIME
-            #define O_NOATIME 0
-           #endif
-           #ifndef O_NOFOLLOW
-            #define O_NOFOLLOW 0
-           #endif
-           static int const constants[] =
-            {
-              O_CREAT, O_EXCL, O_NOCTTY, O_TRUNC, O_APPEND,
-              O_NONBLOCK, O_SYNC, O_ACCMODE, O_RDONLY, O_RDWR, O_WRONLY
-            };
-
-int
-main ()
-{
-
-            int status = !constants;
-            {
-              static char const sym[] = "conftest.sym";
-              if (symlink (".", sym) != 0
-                  || close (open (sym, O_RDONLY | O_NOFOLLOW)) == 0)
-                status |= 32;
-              unlink (sym);
-            }
-            {
-              static char const file[] = "confdefs.h";
-              int fd = open (file, O_RDONLY | O_NOATIME);
-              char c;
-              struct stat st0, st1;
-              if (fd < 0
-                  || fstat (fd, &st0) != 0
-                  || sleep (1) != 0
-                  || read (fd, &c, 1) != 1
-                  || close (fd) != 0
-                  || stat (file, &st1) != 0
-                  || st0.st_atime != st1.st_atime)
-                status |= 64;
-            }
-            return status;
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
-  gl_cv_header_working_fcntl_h=yes
-else
-  case $? in #(
-        32) gl_cv_header_working_fcntl_h='no (bad O_NOFOLLOW)';; #(
-        64) gl_cv_header_working_fcntl_h='no (bad O_NOATIME)';; #(
-        96) gl_cv_header_working_fcntl_h='no (bad O_NOATIME, O_NOFOLLOW)';; #(
-         *) gl_cv_header_working_fcntl_h='no';;
-        esac
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
-fi
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_cv_header_working_fcntl_h" >&5
-$as_echo "$gl_cv_header_working_fcntl_h" >&6; }
-
-  case $gl_cv_header_working_fcntl_h in #(
-  *O_NOATIME* | no | cross-compiling) ac_val=0;; #(
-  *) ac_val=1;;
-  esac
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_WORKING_O_NOATIME $ac_val
-_ACEOF
-
-
-  case $gl_cv_header_working_fcntl_h in #(
-  *O_NOFOLLOW* | no | cross-compiling) ac_val=0;; #(
-  *) ac_val=1;;
-  esac
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_WORKING_O_NOFOLLOW $ac_val
-_ACEOF
-
-
-
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CFPreferencesCopyAppValue" >&5
-$as_echo_n "checking for CFPreferencesCopyAppValue... " >&6; }
-if ${gt_cv_func_CFPreferencesCopyAppValue+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  gt_save_LIBS="$LIBS"
-     LIBS="$LIBS -Wl,-framework -Wl,CoreFoundation"
-     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <CoreFoundation/CFPreferences.h>
-int
-main ()
-{
-CFPreferencesCopyAppValue(NULL, NULL)
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  gt_cv_func_CFPreferencesCopyAppValue=yes
-else
-  gt_cv_func_CFPreferencesCopyAppValue=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-     LIBS="$gt_save_LIBS"
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFPreferencesCopyAppValue" >&5
-$as_echo "$gt_cv_func_CFPreferencesCopyAppValue" >&6; }
-  if test $gt_cv_func_CFPreferencesCopyAppValue = yes; then
-
-$as_echo "#define HAVE_CFPREFERENCESCOPYAPPVALUE 1" >>confdefs.h
-
-  fi
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CFLocaleCopyCurrent" >&5
-$as_echo_n "checking for CFLocaleCopyCurrent... " >&6; }
-if ${gt_cv_func_CFLocaleCopyCurrent+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  gt_save_LIBS="$LIBS"
-     LIBS="$LIBS -Wl,-framework -Wl,CoreFoundation"
-     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <CoreFoundation/CFLocale.h>
-int
-main ()
-{
-CFLocaleCopyCurrent();
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  gt_cv_func_CFLocaleCopyCurrent=yes
-else
-  gt_cv_func_CFLocaleCopyCurrent=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-     LIBS="$gt_save_LIBS"
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFLocaleCopyCurrent" >&5
-$as_echo "$gt_cv_func_CFLocaleCopyCurrent" >&6; }
-  if test $gt_cv_func_CFLocaleCopyCurrent = yes; then
-
-$as_echo "#define HAVE_CFLOCALECOPYCURRENT 1" >>confdefs.h
-
-  fi
-  INTL_MACOSX_LIBS=
-  if test $gt_cv_func_CFPreferencesCopyAppValue = yes || test $gt_cv_func_CFLocaleCopyCurrent = yes; then
-    INTL_MACOSX_LIBS="-Wl,-framework -Wl,CoreFoundation"
-  fi
-
-
-
-
-
-
-
-    case "$enable_silent_rules" in
-    yes) INTL_DEFAULT_VERBOSITY=0;;
-    no)  INTL_DEFAULT_VERBOSITY=1;;
-    *)   INTL_DEFAULT_VERBOSITY=1;;
-  esac
-
-
-  ac_fn_c_check_type "$LINENO" "ptrdiff_t" "ac_cv_type_ptrdiff_t" "$ac_includes_default"
-if test "x$ac_cv_type_ptrdiff_t" = xyes; then :
-
-else
-
-$as_echo "#define ptrdiff_t long" >>confdefs.h
-
-
-fi
-
-  for ac_header in stddef.h stdlib.h string.h
-do :
-  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
-ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
-
-fi
-
-done
-
-  for ac_func in asprintf fwprintf newlocale putenv setenv setlocale \
-    snprintf strnlen wcslen wcsnlen mbrtowc wcrtomb
-do :
-  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
-ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
-_ACEOF
-
-fi
-done
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether _snprintf is declared" >&5
-$as_echo_n "checking whether _snprintf is declared... " >&6; }
-if ${ac_cv_have_decl__snprintf+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdio.h>
-int
-main ()
-{
-
-#ifndef _snprintf
-  char *p = (char *) _snprintf;
-#endif
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_cv_have_decl__snprintf=yes
-else
-  ac_cv_have_decl__snprintf=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl__snprintf" >&5
-$as_echo "$ac_cv_have_decl__snprintf" >&6; }
-  if test $ac_cv_have_decl__snprintf = yes; then
-    gt_value=1
-  else
-    gt_value=0
-  fi
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL__SNPRINTF $gt_value
-_ACEOF
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether _snwprintf is declared" >&5
-$as_echo_n "checking whether _snwprintf is declared... " >&6; }
-if ${ac_cv_have_decl__snwprintf+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdio.h>
-int
-main ()
-{
-
-#ifndef _snwprintf
-  char *p = (char *) _snwprintf;
-#endif
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_cv_have_decl__snwprintf=yes
-else
-  ac_cv_have_decl__snwprintf=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl__snwprintf" >&5
-$as_echo "$ac_cv_have_decl__snwprintf" >&6; }
-  if test $ac_cv_have_decl__snwprintf = yes; then
-    gt_value=1
-  else
-    gt_value=0
-  fi
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL__SNWPRINTF $gt_value
-_ACEOF
-
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether getc_unlocked is declared" >&5
-$as_echo_n "checking whether getc_unlocked is declared... " >&6; }
-if ${ac_cv_have_decl_getc_unlocked+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdio.h>
-int
-main ()
-{
-
-#ifndef getc_unlocked
-  char *p = (char *) getc_unlocked;
-#endif
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_cv_have_decl_getc_unlocked=yes
-else
-  ac_cv_have_decl_getc_unlocked=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl_getc_unlocked" >&5
-$as_echo "$ac_cv_have_decl_getc_unlocked" >&6; }
-  if test $ac_cv_have_decl_getc_unlocked = yes; then
-    gt_value=1
-  else
-    gt_value=0
-  fi
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL_GETC_UNLOCKED $gt_value
-_ACEOF
-
-
-
-  case $gt_cv_func_printf_posix in
-    *yes) HAVE_POSIX_PRINTF=1 ;;
-    *) HAVE_POSIX_PRINTF=0 ;;
-  esac
-
-  if test "$ac_cv_func_asprintf" = yes; then
-    HAVE_ASPRINTF=1
-  else
-    HAVE_ASPRINTF=0
-  fi
-
-  if test "$ac_cv_func_snprintf" = yes; then
-    HAVE_SNPRINTF=1
-  else
-    HAVE_SNPRINTF=0
-  fi
-
-  if test "$ac_cv_func_newlocale" = yes; then
-    HAVE_NEWLOCALE=1
-  else
-    HAVE_NEWLOCALE=0
-  fi
-
-  if test "$ac_cv_func_wprintf" = yes; then
-    HAVE_WPRINTF=1
-  else
-    HAVE_WPRINTF=0
-  fi
-
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for nl_langinfo and CODESET" >&5
-$as_echo_n "checking for nl_langinfo and CODESET... " >&6; }
-if ${am_cv_langinfo_codeset+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <langinfo.h>
-int
-main ()
-{
-char* cs = nl_langinfo(CODESET); return !cs;
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  am_cv_langinfo_codeset=yes
-else
-  am_cv_langinfo_codeset=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_langinfo_codeset" >&5
-$as_echo "$am_cv_langinfo_codeset" >&6; }
-  if test $am_cv_langinfo_codeset = yes; then
-
-$as_echo "#define HAVE_LANGINFO_CODESET 1" >>confdefs.h
-
-  fi
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LC_MESSAGES" >&5
-$as_echo_n "checking for LC_MESSAGES... " >&6; }
-if ${gt_cv_val_LC_MESSAGES+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <locale.h>
-int
-main ()
-{
-return LC_MESSAGES
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  gt_cv_val_LC_MESSAGES=yes
-else
-  gt_cv_val_LC_MESSAGES=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_val_LC_MESSAGES" >&5
-$as_echo "$gt_cv_val_LC_MESSAGES" >&6; }
-  if test $gt_cv_val_LC_MESSAGES = yes; then
-
-$as_echo "#define HAVE_LC_MESSAGES 1" >>confdefs.h
-
-  fi
-
-
-                if test "$enable_shared" = yes; then
-    case "$host_os" in
-      mingw* | cygwin*) is_woe32dll=yes ;;
-      *) is_woe32dll=no ;;
-    esac
-  else
-    is_woe32dll=no
-  fi
-  WOE32DLL=$is_woe32dll
-
-
-      case "$host_os" in
-    mingw* | cygwin*) is_woe32=yes ;;
-    *) is_woe32=no ;;
-  esac
-  WOE32=$is_woe32
-
-  if test $WOE32 = yes; then
-        if test -n "$ac_tool_prefix"; then
-  # Extract the first word of "${ac_tool_prefix}windres", so it can be a program name with args.
-set dummy ${ac_tool_prefix}windres; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_WINDRES+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test -n "$WINDRES"; then
-  ac_cv_prog_WINDRES="$WINDRES" # Let the user override the test.
-else
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_WINDRES="${ac_tool_prefix}windres"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-  done
-IFS=$as_save_IFS
-
-fi
-fi
-WINDRES=$ac_cv_prog_WINDRES
-if test -n "$WINDRES"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $WINDRES" >&5
-$as_echo "$WINDRES" >&6; }
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-fi
-
-
-fi
-if test -z "$ac_cv_prog_WINDRES"; then
-  ac_ct_WINDRES=$WINDRES
-  # Extract the first word of "windres", so it can be a program name with args.
-set dummy windres; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_ac_ct_WINDRES+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test -n "$ac_ct_WINDRES"; then
-  ac_cv_prog_ac_ct_WINDRES="$ac_ct_WINDRES" # Let the user override the test.
-else
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_ac_ct_WINDRES="windres"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-  done
-IFS=$as_save_IFS
-
-fi
-fi
-ac_ct_WINDRES=$ac_cv_prog_ac_ct_WINDRES
-if test -n "$ac_ct_WINDRES"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_WINDRES" >&5
-$as_echo "$ac_ct_WINDRES" >&6; }
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-fi
-
-  if test "x$ac_ct_WINDRES" = x; then
-    WINDRES=""
-  else
-    case $cross_compiling:$ac_tool_warned in
-yes:)
-{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
-$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
-ac_tool_warned=yes ;;
-esac
-    WINDRES=$ac_ct_WINDRES
-  fi
-else
-  WINDRES="$ac_cv_prog_WINDRES"
-fi
-
-  fi
-
-              case "$host_os" in
-    hpux*) LTLIBC="" ;;
-    *)     LTLIBC="-lc" ;;
-  esac
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CFPreferencesCopyAppValue" >&5
-$as_echo_n "checking for CFPreferencesCopyAppValue... " >&6; }
-if ${gt_cv_func_CFPreferencesCopyAppValue+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  gt_save_LIBS="$LIBS"
-     LIBS="$LIBS -Wl,-framework -Wl,CoreFoundation"
-     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <CoreFoundation/CFPreferences.h>
-int
-main ()
-{
-CFPreferencesCopyAppValue(NULL, NULL)
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  gt_cv_func_CFPreferencesCopyAppValue=yes
-else
-  gt_cv_func_CFPreferencesCopyAppValue=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-     LIBS="$gt_save_LIBS"
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFPreferencesCopyAppValue" >&5
-$as_echo "$gt_cv_func_CFPreferencesCopyAppValue" >&6; }
-  if test $gt_cv_func_CFPreferencesCopyAppValue = yes; then
-
-$as_echo "#define HAVE_CFPREFERENCESCOPYAPPVALUE 1" >>confdefs.h
-
-  fi
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CFLocaleCopyCurrent" >&5
-$as_echo_n "checking for CFLocaleCopyCurrent... " >&6; }
-if ${gt_cv_func_CFLocaleCopyCurrent+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  gt_save_LIBS="$LIBS"
-     LIBS="$LIBS -Wl,-framework -Wl,CoreFoundation"
-     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <CoreFoundation/CFLocale.h>
-int
-main ()
-{
-CFLocaleCopyCurrent();
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  gt_cv_func_CFLocaleCopyCurrent=yes
-else
-  gt_cv_func_CFLocaleCopyCurrent=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-     LIBS="$gt_save_LIBS"
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFLocaleCopyCurrent" >&5
-$as_echo "$gt_cv_func_CFLocaleCopyCurrent" >&6; }
-  if test $gt_cv_func_CFLocaleCopyCurrent = yes; then
-
-$as_echo "#define HAVE_CFLOCALECOPYCURRENT 1" >>confdefs.h
-
-  fi
-  INTL_MACOSX_LIBS=
-  if test $gt_cv_func_CFPreferencesCopyAppValue = yes || test $gt_cv_func_CFLocaleCopyCurrent = yes; then
-    INTL_MACOSX_LIBS="-Wl,-framework -Wl,CoreFoundation"
-  fi
-
-
-
-
-
-
-    BUILD_INCLUDED_LIBINTL=no
-    USE_INCLUDED_LIBINTL=no
-
-  LIBINTL=
-  LTLIBINTL=
-  POSUB=
-
-    case " $gt_needs " in
-    *" need-formatstring-macros "*) gt_api_version=3 ;;
-    *" need-ngettext "*) gt_api_version=2 ;;
-    *) gt_api_version=1 ;;
-  esac
-  gt_func_gnugettext_libc="gt_cv_func_gnugettext${gt_api_version}_libc"
-  gt_func_gnugettext_libintl="gt_cv_func_gnugettext${gt_api_version}_libintl"
-
-    if test "$USE_NLS" = "yes"; then
-    gt_use_preinstalled_gnugettext=no
-
-      { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether included gettext is requested" >&5
-$as_echo_n "checking whether included gettext is requested... " >&6; }
-
-# Check whether --with-included-gettext was given.
-if test "${with_included_gettext+set}" = set; then :
-  withval=$with_included_gettext; nls_cv_force_use_gnu_gettext=$withval
-else
-  nls_cv_force_use_gnu_gettext=no
-fi
-
-      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $nls_cv_force_use_gnu_gettext" >&5
-$as_echo "$nls_cv_force_use_gnu_gettext" >&6; }
-
-      nls_cv_use_gnu_gettext="$nls_cv_force_use_gnu_gettext"
-      if test "$nls_cv_force_use_gnu_gettext" != "yes"; then
-
-
-        if test $gt_api_version -ge 3; then
-          gt_revision_test_code='
-#ifndef __GNU_GETTEXT_SUPPORTED_REVISION
-#define __GNU_GETTEXT_SUPPORTED_REVISION(major) ((major) == 0 ? 0 : -1)
-#endif
-typedef int array [2 * (__GNU_GETTEXT_SUPPORTED_REVISION(0) >= 1) - 1];
-'
-        else
-          gt_revision_test_code=
-        fi
-        if test $gt_api_version -ge 2; then
-          gt_expression_test_code=' + * ngettext ("", "", 0)'
-        else
-          gt_expression_test_code=
-        fi
-
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU gettext in libc" >&5
-$as_echo_n "checking for GNU gettext in libc... " >&6; }
-if eval \${$gt_func_gnugettext_libc+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <libintl.h>
-$gt_revision_test_code
-extern int _nl_msg_cat_cntr;
-extern int *_nl_domain_bindings;
-int
-main ()
-{
-bindtextdomain ("", "");
-return * gettext ("")$gt_expression_test_code + _nl_msg_cat_cntr + *_nl_domain_bindings
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  eval "$gt_func_gnugettext_libc=yes"
-else
-  eval "$gt_func_gnugettext_libc=no"
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-fi
-eval ac_res=\$$gt_func_gnugettext_libc
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
-
-        if { eval "gt_val=\$$gt_func_gnugettext_libc"; test "$gt_val" != "yes"; }; then
 
 
 
@@ -26204,25 +23248,6 @@ $as_echo "$ac_res" >&6; }
         fi
 
 
-        if test "$gt_use_preinstalled_gnugettext" != "yes"; then
-                              nls_cv_use_gnu_gettext=yes
-        fi
-      fi
-
-      if test "$nls_cv_use_gnu_gettext" = "yes"; then
-                BUILD_INCLUDED_LIBINTL=yes
-        USE_INCLUDED_LIBINTL=yes
-        LIBINTL="\${top_builddir}/intl/libintl.a $LIBICONV $LIBTHREAD"
-        LTLIBINTL="\${top_builddir}/intl/libintl.a $LTLIBICONV $LTLIBTHREAD"
-        LIBS=`echo " $LIBS " | sed -e 's/ -lintl / /' -e 's/^ //' -e 's/ $//'`
-      fi
-
-      CATOBJEXT=
-      if test "$gt_use_preinstalled_gnugettext" = "yes" \
-         || test "$nls_cv_use_gnu_gettext" = "yes"; then
-                CATOBJEXT=.gmo
-      fi
-
 
     if test -n "$INTL_MACOSX_LIBS"; then
       if test "$gt_use_preinstalled_gnugettext" = "yes" \
@@ -26307,35 +23332,6 @@ $as_echo "#define HAVE_DCGETTEXT 1" >>co
   fi
 
 
-            if test "$PACKAGE" = gettext-runtime || test "$PACKAGE" = gettext-tools; then
-      BUILD_INCLUDED_LIBINTL=yes
-    fi
-
-
-
-
-
-        nls_cv_header_intl=
-    nls_cv_header_libgt=
-
-        DATADIRNAME=share
-
-
-        INSTOBJEXT=.mo
-
-
-        GENCAT=gencat
-
-
-        INTLOBJS=
-    if test "$USE_INCLUDED_LIBINTL" = yes; then
-      INTLOBJS="\$(GETTOBJS)"
-    fi
-
-
-        INTL_LIBTOOL_SUFFIX_PREFIX=
-
-
 
     INTLLIBS="$LIBINTL"
 
@@ -26347,11 +23343,6 @@ $as_echo "#define HAVE_DCGETTEXT 1" >>co
 
 
 
-
-    if test "x$USE_INCLUDED_LIBINTL" = xyes; then
-        CPPFLAGS="$CPPFLAGS -I\$(top_builddir)/intl -I\$(top_srcdir)/intl"
-    fi
-
         # Check whether --enable-charset was given.
 if test "${enable_charset+set}" = set; then :
   enableval=$enable_charset;
@@ -26365,6 +23356,17 @@ $as_echo "#define HAVE_CHARSET 1" >>conf
 
         have_charset=yes
         charset_msg="yes"
+
+                case $host_os in
+            solaris*)
+                CP1251="ANSI-1251"
+                ;;
+            *)
+                CP1251="CP1251"
+                ;;
+        esac
+
+
     fi
 
 
@@ -30042,16 +27044,27 @@ else
 fi
 
 
+# Check whether --enable-configure-args was given.
+if test "${enable_configure_args+set}" = set; then :
+  enableval=$enable_configure_args;
+fi
+
+if test "x$enable_configure_args" != xno; then
+
+$as_echo "#define ENABLE_CONFIGURE_ARGS 1" >>confdefs.h
+
 
 cat >>confdefs.h <<_ACEOF
 #define MC_CONFIGURE_ARGS "$ac_configure_args"
 _ACEOF
 
+fi
+
 
 ac_config_files="$ac_config_files src/man2hlp/man2hlp"
 
 
-ac_config_files="$ac_config_files Makefile contrib/Makefile contrib/dist/Makefile contrib/dist/gentoo/Makefile contrib/dist/redhat/Makefile contrib/dist/redhat/mc.spec contrib/dist/pkginfo contrib/dist/prototype misc/Makefile misc/mc.menu misc/mcedit.menu misc/skins/Makefile misc/ext.d/Makefile misc/ext.d/doc.sh misc/ext.d/misc.sh misc/ext.d/text.sh misc/ext.d/web.sh misc/macros.d/Makefile misc/mc.ext src/Makefile src/consaver/Makefile src/editor/Makefile src/man2hlp/Makefile src/subshell/Makefile src/viewer/Makefile src/diffviewer/Makefile src/filemanager/Makefile src/vfs/Makefile src/vfs/cpio/Makefile src/vfs/extfs/Makefile src/vfs/extfs/helpers/Makefile src/vfs/extfs/helpers/a+ src/vfs/extfs/helpers/apt+ src/vfs/extfs/helpers/audio src/vfs/extfs/helpers/deb src/vfs/extfs/helpers/deba src/vfs/extfs/helpers/debd src/vfs/extfs/helpers/dpkg+ src/vfs/extfs/helpers/iso9660 src/vfs/extfs/helpers/hp48+ src/vfs/extfs/helpers/lslR src/vfs/extfs/helpers/mailfs src/vfs/extfs/helpers/patchfs src/vfs/extfs/helpers/rpms+ src/vfs/extfs/helpers/s3+ src/vfs/extfs/helpers/uace src/vfs/extfs/helpers/ualz src/vfs/extfs/helpers/uar src/vfs/extfs/helpers/uarc src/vfs/extfs/helpers/uarj src/vfs/extfs/helpers/uc1541 src/vfs/extfs/helpers/ucab src/vfs/extfs/helpers/uha src/vfs/extfs/helpers/ulha src/vfs/extfs/helpers/ulib src/vfs/extfs/helpers/urar src/vfs/extfs/helpers/uzip src/vfs/extfs/helpers/uzoo src/vfs/fish/Makefile src/vfs/fish/helpers/Makefile src/vfs/ftpfs/Makefile src/vfs/sftpfs/Makefile src/vfs/local/Makefile src/vfs/sfs/Makefile src/vfs/smbfs/Makefile src/vfs/tar/Makefile src/vfs/undelfs/Makefile lib/Makefile lib/event/Makefile lib/filehighlight/Makefile lib/mcconfig/Makefile lib/search/Makefile lib/skin/Makefile lib/strutil/Makefile lib/tty/Makefile lib/vfs/Makefile lib/widget/Makefile misc/syntax/Makefile misc/syntax/Syntax doc/Makefile doc/hints/Makefile doc/hints/l10n/Makefile doc/man/Makefile doc/man/es/Makefile doc/man/hu/Makefile doc/man/it/Makefile doc/man/pl/Makefile doc/man/ru/Makefile doc/man/sr/Makefile doc/hlp/Makefile doc/hlp/es/Makefile doc/hlp/hu/Makefile doc/hlp/it/Makefile doc/hlp/pl/Makefile doc/hlp/ru/Makefile doc/hlp/sr/Makefile intl/Makefile po/Makefile.in"
+ac_config_files="$ac_config_files Makefile contrib/Makefile contrib/dist/Makefile contrib/dist/gentoo/Makefile contrib/dist/redhat/Makefile contrib/dist/redhat/mc.spec contrib/dist/pkginfo contrib/dist/prototype misc/Makefile misc/mc.charsets misc/mc.menu misc/mcedit.menu misc/skins/Makefile misc/ext.d/Makefile misc/ext.d/doc.sh misc/ext.d/misc.sh misc/ext.d/text.sh misc/ext.d/web.sh misc/macros.d/Makefile misc/mc.ext src/Makefile src/consaver/Makefile src/editor/Makefile src/man2hlp/Makefile src/subshell/Makefile src/viewer/Makefile src/diffviewer/Makefile src/filemanager/Makefile src/vfs/Makefile src/vfs/cpio/Makefile src/vfs/extfs/Makefile src/vfs/extfs/helpers/Makefile src/vfs/extfs/helpers/a+ src/vfs/extfs/helpers/apt+ src/vfs/extfs/helpers/audio src/vfs/extfs/helpers/deb src/vfs/extfs/helpers/deba src/vfs/extfs/helpers/debd src/vfs/extfs/helpers/dpkg+ src/vfs/extfs/helpers/iso9660 src/vfs/extfs/helpers/hp48+ src/vfs/extfs/helpers/lslR src/vfs/extfs/helpers/mailfs src/vfs/extfs/helpers/patchfs src/vfs/extfs/helpers/rpms+ src/vfs/extfs/helpers/s3+ src/vfs/extfs/helpers/uace src/vfs/extfs/helpers/ualz src/vfs/extfs/helpers/uar src/vfs/extfs/helpers/uarc src/vfs/extfs/helpers/uarj src/vfs/extfs/helpers/ucab src/vfs/extfs/helpers/uha src/vfs/extfs/helpers/ulha src/vfs/extfs/helpers/ulib src/vfs/extfs/helpers/urar src/vfs/extfs/helpers/uzip src/vfs/extfs/helpers/uzoo src/vfs/fish/Makefile src/vfs/fish/helpers/Makefile src/vfs/ftpfs/Makefile src/vfs/sftpfs/Makefile src/vfs/local/Makefile src/vfs/sfs/Makefile src/vfs/smbfs/Makefile src/vfs/tar/Makefile src/vfs/undelfs/Makefile lib/Makefile lib/event/Makefile lib/filehighlight/Makefile lib/mcconfig/Makefile lib/search/Makefile lib/skin/Makefile lib/strutil/Makefile lib/tty/Makefile lib/vfs/Makefile lib/widget/Makefile misc/syntax/Makefile misc/syntax/Syntax doc/Makefile doc/hints/Makefile doc/hints/l10n/Makefile doc/man/Makefile doc/man/es/Makefile doc/man/hu/Makefile doc/man/it/Makefile doc/man/pl/Makefile doc/man/ru/Makefile doc/man/sr/Makefile doc/hlp/Makefile doc/hlp/es/Makefile doc/hlp/hu/Makefile doc/hlp/it/Makefile doc/hlp/pl/Makefile doc/hlp/ru/Makefile doc/hlp/sr/Makefile po/Makefile.in"
 
 
 ac_config_files="$ac_config_files tests/Makefile tests/lib/Makefile tests/lib/mcconfig/Makefile tests/lib/search/Makefile tests/lib/strutil/Makefile tests/lib/vfs/Makefile tests/lib/widget/Makefile tests/src/Makefile tests/src/filemanager/Makefile tests/src/editor/Makefile tests/src/editor/test-data.txt tests/src/vfs/Makefile tests/src/vfs/extfs/Makefile tests/src/vfs/extfs/helpers-list/Makefile tests/src/vfs/extfs/helpers-list/data/config.sh tests/src/vfs/extfs/helpers-list/misc/Makefile"
@@ -31282,6 +28295,7 @@ do
     "contrib/dist/pkginfo") CONFIG_FILES="$CONFIG_FILES contrib/dist/pkginfo" ;;
     "contrib/dist/prototype") CONFIG_FILES="$CONFIG_FILES contrib/dist/prototype" ;;
     "misc/Makefile") CONFIG_FILES="$CONFIG_FILES misc/Makefile" ;;
+    "misc/mc.charsets") CONFIG_FILES="$CONFIG_FILES misc/mc.charsets" ;;
     "misc/mc.menu") CONFIG_FILES="$CONFIG_FILES misc/mc.menu" ;;
     "misc/mcedit.menu") CONFIG_FILES="$CONFIG_FILES misc/mcedit.menu" ;;
     "misc/skins/Makefile") CONFIG_FILES="$CONFIG_FILES misc/skins/Makefile" ;;
@@ -31323,7 +28337,6 @@ do
     "src/vfs/extfs/helpers/uar") CONFIG_FILES="$CONFIG_FILES src/vfs/extfs/helpers/uar" ;;
     "src/vfs/extfs/helpers/uarc") CONFIG_FILES="$CONFIG_FILES src/vfs/extfs/helpers/uarc" ;;
     "src/vfs/extfs/helpers/uarj") CONFIG_FILES="$CONFIG_FILES src/vfs/extfs/helpers/uarj" ;;
-    "src/vfs/extfs/helpers/uc1541") CONFIG_FILES="$CONFIG_FILES src/vfs/extfs/helpers/uc1541" ;;
     "src/vfs/extfs/helpers/ucab") CONFIG_FILES="$CONFIG_FILES src/vfs/extfs/helpers/ucab" ;;
     "src/vfs/extfs/helpers/uha") CONFIG_FILES="$CONFIG_FILES src/vfs/extfs/helpers/uha" ;;
     "src/vfs/extfs/helpers/ulha") CONFIG_FILES="$CONFIG_FILES src/vfs/extfs/helpers/ulha" ;;
@@ -31369,7 +28382,6 @@ do
     "doc/hlp/pl/Makefile") CONFIG_FILES="$CONFIG_FILES doc/hlp/pl/Makefile" ;;
     "doc/hlp/ru/Makefile") CONFIG_FILES="$CONFIG_FILES doc/hlp/ru/Makefile" ;;
     "doc/hlp/sr/Makefile") CONFIG_FILES="$CONFIG_FILES doc/hlp/sr/Makefile" ;;
-    "intl/Makefile") CONFIG_FILES="$CONFIG_FILES intl/Makefile" ;;
     "po/Makefile.in") CONFIG_FILES="$CONFIG_FILES po/Makefile.in" ;;
     "tests/Makefile") CONFIG_FILES="$CONFIG_FILES tests/Makefile" ;;
     "tests/lib/Makefile") CONFIG_FILES="$CONFIG_FILES tests/lib/Makefile" ;;
diff -urpN mc-4.8.23/configure.ac mc-4.8.24/configure.ac
--- mc-4.8.23/configure.ac	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/configure.ac	2020-01-01 19:52:34.000000000 +0400
@@ -272,7 +272,9 @@ dnl ####################################
 dnl Internationalization
 dnl ############################################################################
 
-AM_GNU_GETTEXT([no-libtool], [need-ngettext])
+AC_CHECK_FUNCS([setlocale])
+
+AM_GNU_GETTEXT([external], [need-ngettext])
 AM_GNU_GETTEXT_VERSION([0.18.1])
 
 mc_I18N
@@ -544,7 +546,13 @@ dnl Clarify do we really need GModule
 AM_CONDITIONAL([HAVE_GMODULE], [test -n "$g_module_supported" && \
                                 test x"$textmode_x11_support" = x"yes" -o x"$enable_aspell" = x"yes"])
 
-AC_DEFINE_UNQUOTED([MC_CONFIGURE_ARGS], ["$ac_configure_args"], [MC configure arguments])
+AC_ARG_ENABLE([configure-args],
+    AS_HELP_STRING([--enable-configure-args], [Handle all compiler warnings as errors]))
+if test "x$enable_configure_args" != xno; then
+    AC_DEFINE([ENABLE_CONFIGURE_ARGS], 1, [Define to enable showing configure arguments in help])
+    AC_DEFINE_UNQUOTED([MC_CONFIGURE_ARGS], ["$ac_configure_args"], [MC configure arguments])
+fi
+
 
 AC_CONFIG_FILES(
 [
@@ -566,6 +574,7 @@ contrib/dist/pkginfo
 contrib/dist/prototype
 
 misc/Makefile
+misc/mc.charsets
 misc/mc.menu
 misc/mcedit.menu
 misc/skins/Makefile
@@ -611,7 +620,6 @@ src/vfs/extfs/helpers/ualz
 src/vfs/extfs/helpers/uar
 src/vfs/extfs/helpers/uarc
 src/vfs/extfs/helpers/uarj
-src/vfs/extfs/helpers/uc1541
 src/vfs/extfs/helpers/ucab
 src/vfs/extfs/helpers/uha
 src/vfs/extfs/helpers/ulha
@@ -674,7 +682,6 @@ doc/hlp/pl/Makefile
 doc/hlp/ru/Makefile
 doc/hlp/sr/Makefile
 
-intl/Makefile
 po/Makefile.in
 ])
 
diff -urpN mc-4.8.23/contrib/Makefile.in mc-4.8.24/contrib/Makefile.in
--- mc-4.8.23/contrib/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/contrib/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = contrib
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -269,7 +259,6 @@ am__relativize = \
   reldir="$$dir2"
 pkglibexecdir = $(libexecdir)/@PACKAGE@
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -277,18 +266,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -328,10 +314,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -339,13 +322,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -353,12 +330,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -366,24 +338,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -417,7 +381,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -429,12 +392,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/contrib/dist/Makefile.in mc-4.8.24/contrib/dist/Makefile.in
--- mc-4.8.23/contrib/dist/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/contrib/dist/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = contrib/dist
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -240,7 +230,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -248,18 +237,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -299,10 +285,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -310,13 +293,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -324,12 +301,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -337,24 +309,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -388,7 +352,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -400,12 +363,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/contrib/dist/gentoo/Makefile.in mc-4.8.24/contrib/dist/gentoo/Makefile.in
--- mc-4.8.23/contrib/dist/gentoo/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/contrib/dist/gentoo/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = contrib/dist/gentoo
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -179,7 +169,6 @@ am__tagged_files = $(HEADERS) $(SOURCES)
 am__DIST_COMMON = $(srcdir)/Makefile.in README
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -187,18 +176,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -238,10 +224,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -249,13 +232,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -263,12 +240,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -276,24 +248,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -327,7 +291,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -339,12 +302,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/contrib/dist/redhat/Makefile.in mc-4.8.24/contrib/dist/redhat/Makefile.in
--- mc-4.8.23/contrib/dist/redhat/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/contrib/dist/redhat/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = contrib/dist/redhat
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -179,7 +169,6 @@ am__tagged_files = $(HEADERS) $(SOURCES)
 am__DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/mc.spec.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -187,18 +176,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -238,10 +224,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -249,13 +232,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -263,12 +240,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -276,24 +248,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -327,7 +291,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -339,12 +302,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/contrib/mc-wrapper.csh.in mc-4.8.24/contrib/mc-wrapper.csh.in
--- mc-4.8.23/contrib/mc-wrapper.csh.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/contrib/mc-wrapper.csh.in	2020-01-01 19:52:34.000000000 +0400
@@ -1,4 +1,4 @@
-set MC_USER="`id | sed 's/[^(]*(//;s/).*//'`"
+set MC_USER=`whoami`
 
 if ($?TMPDIR) then
 	setenv MC_PWD_FILE $TMPDIR/mc-$MC_USER/mc.pwd.$$
diff -urpN mc-4.8.23/contrib/mc-wrapper.sh.in mc-4.8.24/contrib/mc-wrapper.sh.in
--- mc-4.8.23/contrib/mc-wrapper.sh.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/contrib/mc-wrapper.sh.in	2020-01-01 19:52:34.000000000 +0400
@@ -1,4 +1,4 @@
-MC_USER=`id | sed 's/[^(]*(//;s/).*//'`
+MC_USER=`whoami`
 MC_PWD_FILE="${TMPDIR-/tmp}/mc-$MC_USER/mc.pwd.$$"
 @bindir@/mc -P "$MC_PWD_FILE" "$@"
 
diff -urpN mc-4.8.23/doc/INSTALL mc-4.8.24/doc/INSTALL
--- mc-4.8.23/doc/INSTALL	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/INSTALL	2020-01-01 19:52:34.000000000 +0400
@@ -15,11 +15,9 @@ Build requirements for GNU Midnight Comm
 - autoconf
 - automake
 - libtool
-- glib2
-- pcre (if glib < 2.14)
-- slang or ncurses
-- gettext
-- cvs (for gettext < 0.18 or if gettext >= 0.18 is built with --with-cvs)
+- glib2 >= 2.26
+- slang2 or ncurses
+- gettext >= 0.18.1
 - libssh2 >= 1.2.5 is required only for sftp vfs (1.2.7 if you need ssh-agent support)
 - libaspell to support spell checking in the internal editor
 
diff -urpN mc-4.8.23/doc/Makefile.in mc-4.8.24/doc/Makefile.in
--- mc-4.8.23/doc/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -136,24 +136,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -284,7 +274,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -292,18 +281,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -343,10 +329,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -354,13 +337,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -368,12 +345,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -381,24 +353,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -432,7 +396,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -444,12 +407,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/doc/NEWS mc-4.8.24/doc/NEWS
--- mc-4.8.23/doc/NEWS	2019-06-16 22:34:28.000000000 +0400
+++ mc-4.8.24/doc/NEWS	2020-01-01 23:46:54.000000000 +0400
@@ -1,49 +1,100 @@
+Version 4.8.24
+
+- Core
+
+  * Drop bundled gettext (#3629)
+  * Implement the file edit and view history. Default shortcut is alt-shift-e (#2733)
+  * Enable subshell in standalone mceditor, mcviewer, and mcdiffviewer (#3380)
+  * Refactoring of SIGWINCH handling (#117, #4019)
+  * Prevent run/open files with double right click (#4016)
+  * Improve support of Windows 1251 encoding on Solaris (#3992)
+  * Support binary reproducible builds (via --disable-configure-args configure option) (#4031)
+
+- VFS
+
+  * sftpfs: support keyborad interactive authentication (#3921)
+  * uc1541 extfs: update up to 3.3 version (#3936)
+
+- Editor
+
+  * Syntax:
+    * add yabasic (Yet Another BASIC) syntax highlighting (#4005)
+    * improve YAML syntax highlighting (#4010)
+    * add "https://" to Debian sources.list syntax (#4018)
+    * add .desktop files (#4022)
+    * improve RPM spec file syntax highlighting (#4037)
+    * improve Debian sources.list syntax highlighting (#4041)
+
+- Misc
+
+  * Code cleanup (#3997, #4030, #4038, #4039)
+  * menu.mc: handle symbolic links to compressed archives (#4009)
+  * File highlighting updates (#4015)
+    * part - partial files, e.g. used by many download managers ([temp])
+    * apk - Android packages, deb - Debian packages ([archive])
+    * ts - MPEG-TS streams ([media])
+  * New skins:
+    * julia256: a dark skin with calm colors and good contrast.
+
+- Fixes
+
+  * Compile failure on AIX 7.2 (#4033)
+  * Compile failure on OS X 10.9 (#4035)
+  * Enter key works as Down one in menu (#4006)
+  * Menubar: incorrect mouse click coordinate (#4013)
+  * Rotating dash generates way too much output (#3859)
+  * Totals aren't computed before move of a single directory (#4027)
+  * Editor: unusable dynamic paragraphing (#3996)
+  * VFS: iso9660 does not report listing errors (#3993)
+  * VFS: extfs: nested archives are not removed from temporary directory (#4000)
+
+
 Version 4.8.23
 
 - Core
 
-  * Modify "File exists" query dialog (#3935):
-    * change layout
-    * rename "Update" button to "If older"
-    * add new "If smaller" button": overwrite file with smaller one
-    * add "Don't overwrite with zero length file" checkbox
-  * Speed up of large directory structures delete (#3958)
-  * Support key binding for menu (#212)
+    * Modify "File exists" query dialog (#3935):
+        - change layout
+        - rename "Update" button to "If older"
+        - add new "If smaller" button": overwrite file with smaller one
+        - add "Don't overwrite with zero length file" checkbox
+    * Speed up of large directory structures delete (#3958)
+    * Support key binding for menu (#212)
 
 - Editor
 
-  * Expanded syntax highlighting rules (#3975):
-    * expanded file name regexp for sh.syntax
-    * use ini.syntax for systemd cofiguration files
-  * Syntax updates:
-    * shell (#3981)
-    * ebuild (#3988)
-    * RPM spec (#3991)
+    * Expanded syntax highlighting rules (#3975):
+        - expanded file name regexp for sh.syntax
+        - use ini.syntax for systemd cofiguration files
+    * Syntax updates:
+        - shell (#3981)
+        - ebuild (#3988)
+        - RPM spec (#3991)
 
 - Viewer
 
-  * Quick one-off backwards search with N. New action SearchOppositeContinue for key bind (default is shift-n) (#3452)
+    * Quick one-off backwards search with N. New action SearchOppositeContinue for key bind (default is shift-n) (#3452)
 
 - Misc
 
-  * Code cleanup (#3955)
-  * Use Geeqie (a fork of GQview) as main image viewer, fallback to GQview (#3962)
-  * File highlighting updates (#3966)
-    * .go, .s: highlight as source
-    * .m4v: highlighting as media
-  * New skins:
-    * featured-plus: featured skin with alternative directory and file select/mark colors (#3973)
+    * Code cleanup (#3955)
+    * Use Geeqie (a fork of GQview) as main image viewer, fallback to GQview (#3962)
+    * File highlighting updates (#3966)
+        - .go, .s: highlight as source
+        - .m4v: highlighting as media
+    * New skins:
+        - featured-plus: featured skin with alternative directory and file select/mark colors (#3973)
 
 - Fixes
 
-  * Compilation fail on AIX (#3960)
-  * Incorrect file version sort (#3965, #3905)
-  * Garbage in the hardlink error creation message window (#3990)
-  * Cannot shell, or FTP, or SFTP link when the file panel is tree, or info, or quick view (#3948)
-  * Failed gpm connect attempt ... for vc /dev/tty0 (#3208, #3614)
-  * Incorrect include/editor order in mc.ext (#3965)
-  * mcedit: incorrect C/C++ syntax highlighting in some cases (#3487)
-  * Unknown type name 'sighandler_t' on Illumos (#3971)
+    * Compilation fail on AIX (#3960)
+    * Incorrect file version sort (#3965, #3905)
+    * Garbage in the hardlink error creation message window (#3990)
+    * Cannot shell, or FTP, or SFTP link when the file panel is tree, or info, or quick view (#3948)
+    * Failed gpm connect attempt ... for vc /dev/tty0 (#3208, #3614)
+    * Incorrect include/editor order in mc.ext (#3965)
+    * mcedit: incorrect C/C++ syntax highlighting in some cases (#3487)
+    * Unknown type name 'sighandler_t' on Illumos (#3971)
 
 
 Version 4.8.22
diff -urpN mc-4.8.23/doc/doxygen.cfg mc-4.8.24/doc/doxygen.cfg
--- mc-4.8.23/doc/doxygen.cfg	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/doxygen.cfg	2020-01-01 19:52:34.000000000 +0400
@@ -91,7 +91,7 @@ FILE_PATTERNS          = *.c \
 RECURSIVE              = YES
 EXCLUDE                =
 EXCLUDE_SYMLINKS       = NO
-EXCLUDE_PATTERNS       = */intl/* */tests/* */.git/*
+EXCLUDE_PATTERNS       = */tests/* */.git/*
 EXCLUDE_SYMBOLS        =
 EXAMPLE_PATH           = $(SRCDIR)
 EXAMPLE_PATTERNS       =
diff -urpN mc-4.8.23/doc/hints/Makefile.in mc-4.8.24/doc/hints/Makefile.in
--- mc-4.8.23/doc/hints/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/hints/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/hints
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -266,7 +256,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -274,18 +263,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -325,10 +311,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -336,13 +319,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -350,12 +327,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -363,24 +335,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -414,7 +378,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -426,12 +389,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/doc/hints/l10n/Makefile.in mc-4.8.24/doc/hints/l10n/Makefile.in
--- mc-4.8.23/doc/hints/l10n/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/hints/l10n/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/hints/l10n
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -207,7 +197,6 @@ am__tagged_files = $(HEADERS) $(SOURCES)
 am__DIST_COMMON = $(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -215,18 +204,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -266,10 +252,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -277,13 +260,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -291,12 +268,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -304,24 +276,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -355,7 +319,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -367,12 +330,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/doc/hints/l10n/mc.hint.ie mc-4.8.24/doc/hints/l10n/mc.hint.ie
--- mc-4.8.23/doc/hints/l10n/mc.hint.ie	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/doc/hints/l10n/mc.hint.ie	2020-01-19 01:49:46.000000000 +0400
@@ -0,0 +1,87 @@
+Hint: Use C-x t to copy tagged file names to the command line.
+
+Hint: Use C-x p to copy the current pathname to the command line.
+
+Hint: Completion: use M-Tab (or Esc+Tab).  Type it twice to get a list.
+
+Hint: Use M-p and M-n to access the command history.
+
+Hint: Need to quote a character? Use Control-q and the character.
+
+Hint: Tired of these messages? Turn them off from the Options/Layout menu.
+
+Hint: Selecting directories: add a slash to the end of the matching pattern.
+
+Hint: If your terminal lacks functions keys, use the ESC+number sequence.
+
+Hint: The homepage of GNU Midnight Commander: http://www.midnight-commander.org/
+
+Hint: Please send any bug reports to mc-devel@gnome.org
+
+Hint: Tab changes your current panel.
+
+Hint: VFS coolness: tap enter on a tar file to examine its contents.
+
+Hint: We also have a nice manual page.
+
+Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
+
+Hint: % macros work even on the command line.
+
+Hint: M-! will allow you to execute programs and see the output in the viewer.
+
+Hint: The file listing format can be customized; do "man mc" for details.
+
+Hint: %D/%T expands to the tagged files in the opposite directory.
+
+Hint: Want your plain shell? Press C-o, and get back to MC with C-o again.
+
+Hint: Setting the CDPATH variable can save you keystrokes in cd commands.
+
+Hint: If you want to see your .* files, say so in the Configuration dialog.
+
+Hint: Want to see your *~ backup files? Set it in the Configuration dialog.
+
+Hint: Completion works on all input lines in all dialogs. Just press M-Tab.
+
+Hint: On slow terminals the -s flag may help.
+
+Hint: Find File: you can work on the files found using the Panelize button.
+
+Hint: Want to do complex searches? Use the External Panelize command.
+
+Hint: To change directory halfway through typing a command, use M-c (quick cd).
+
+Note: Shell commands will not work when you are on a non-local file system.
+
+Hint: Bring text back from the dead with C-y.
+
+Hint: Are some of your keys not working? Look at Options/Learn keys.
+
+Hint: To look at the output of a command in the viewer, use M-!
+
+Hint: F13 (or Shift-F3) invokes the viewer in raw mode.
+
+Hint: You may specify the editor for F4 with the shell variable EDITOR.
+
+Hint: You may specify the external viewer with the shell vars VIEWER or PAGER.
+
+Hint: You can disable all requests for confirmation in Options/Confirmation.
+
+Hint: Leap to frequently used directories in a single bound with C-.
+
+Hint: You can do anonymous FTP with mc by typing 'cd ftp://machine.edu'
+
+Hint: FTP is built in the Midnight Commander, check the File/FTP link menu.
+
+Hint: M-t changes quickly the listing mode.
+
+Hint: You can specify the username when doing ftps: 'cd ftp://user@machine.edu'
+
+Hint: You can browse RPM files by tapping enter on top of an rpm file.
+
+Hint: To mark directories on the select dialog box, append a slash.
+
+Hint: To use the mouse cut and paste may require holding the shift key
+
+Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.23/doc/hints/l10n/mc.hint.lv mc-4.8.24/doc/hints/l10n/mc.hint.lv
--- mc-4.8.23/doc/hints/l10n/mc.hint.lv	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/doc/hints/l10n/mc.hint.lv	2020-01-19 01:49:46.000000000 +0400
@@ -0,0 +1,87 @@
+Hint: Use C-x t to copy tagged file names to the command line.
+
+Hint: Use C-x p to copy the current pathname to the command line.
+
+Hint: Completion: use M-Tab (or Esc+Tab).  Type it twice to get a list.
+
+Hint: Use M-p and M-n to access the command history.
+
+Hint: Need to quote a character? Use Control-q and the character.
+
+Hint: Tired of these messages? Turn them off from the Options/Layout menu.
+
+Hint: Selecting directories: add a slash to the end of the matching pattern.
+
+Hint: If your terminal lacks functions keys, use the ESC+number sequence.
+
+Hint: The homepage of GNU Midnight Commander: http://www.midnight-commander.org/
+
+Hint: Please send any bug reports to mc-devel@gnome.org
+
+Hint: Tab changes your current panel.
+
+Hint: VFS coolness: tap enter on a tar file to examine its contents.
+
+Hint: We also have a nice manual page.
+
+Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
+
+Hint: % macros work even on the command line.
+
+Hint: M-! will allow you to execute programs and see the output in the viewer.
+
+Hint: The file listing format can be customized; do "man mc" for details.
+
+Hint: %D/%T expands to the tagged files in the opposite directory.
+
+Hint: Want your plain shell? Press C-o, and get back to MC with C-o again.
+
+Hint: Setting the CDPATH variable can save you keystrokes in cd commands.
+
+Hint: If you want to see your .* files, say so in the Configuration dialog.
+
+Hint: Want to see your *~ backup files? Set it in the Configuration dialog.
+
+Hint: Completion works on all input lines in all dialogs. Just press M-Tab.
+
+Hint: On slow terminals the -s flag may help.
+
+Hint: Find File: you can work on the files found using the Panelize button.
+
+Hint: Want to do complex searches? Use the External Panelize command.
+
+Hint: To change directory halfway through typing a command, use M-c (quick cd).
+
+Note: Shell commands will not work when you are on a non-local file system.
+
+Hint: Bring text back from the dead with C-y.
+
+Hint: Are some of your keys not working? Look at Options/Learn keys.
+
+Hint: To look at the output of a command in the viewer, use M-!
+
+Hint: F13 (or Shift-F3) invokes the viewer in raw mode.
+
+Hint: You may specify the editor for F4 with the shell variable EDITOR.
+
+Hint: You may specify the external viewer with the shell vars VIEWER or PAGER.
+
+Hint: You can disable all requests for confirmation in Options/Confirmation.
+
+Hint: Leap to frequently used directories in a single bound with C-.
+
+Hint: You can do anonymous FTP with mc by typing 'cd ftp://machine.edu'
+
+Hint: FTP is built in the Midnight Commander, check the File/FTP link menu.
+
+Hint: M-t changes quickly the listing mode.
+
+Hint: You can specify the username when doing ftps: 'cd ftp://user@machine.edu'
+
+Hint: You can browse RPM files by tapping enter on top of an rpm file.
+
+Hint: To mark directories on the select dialog box, append a slash.
+
+Hint: To use the mouse cut and paste may require holding the shift key
+
+Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.23/doc/hints/l10n/mc.hint.mn mc-4.8.24/doc/hints/l10n/mc.hint.mn
--- mc-4.8.23/doc/hints/l10n/mc.hint.mn	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/doc/hints/l10n/mc.hint.mn	2020-01-19 01:49:46.000000000 +0400
@@ -0,0 +1,87 @@
+Hint: Use C-x t to copy tagged file names to the command line.
+
+Hint: Use C-x p to copy the current pathname to the command line.
+
+Hint: Completion: use M-Tab (or Esc+Tab).  Type it twice to get a list.
+
+Hint: Use M-p and M-n to access the command history.
+
+Hint: Need to quote a character? Use Control-q and the character.
+
+Hint: Tired of these messages? Turn them off from the Options/Layout menu.
+
+Hint: Selecting directories: add a slash to the end of the matching pattern.
+
+Hint: If your terminal lacks functions keys, use the ESC+number sequence.
+
+Hint: The homepage of GNU Midnight Commander: http://www.midnight-commander.org/
+
+Hint: Please send any bug reports to mc-devel@gnome.org
+
+Hint: Tab changes your current panel.
+
+Hint: VFS coolness: tap enter on a tar file to examine its contents.
+
+Hint: We also have a nice manual page.
+
+Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
+
+Hint: % macros work even on the command line.
+
+Hint: M-! will allow you to execute programs and see the output in the viewer.
+
+Hint: The file listing format can be customized; do "man mc" for details.
+
+Hint: %D/%T expands to the tagged files in the opposite directory.
+
+Hint: Want your plain shell? Press C-o, and get back to MC with C-o again.
+
+Hint: Setting the CDPATH variable can save you keystrokes in cd commands.
+
+Hint: If you want to see your .* files, say so in the Configuration dialog.
+
+Hint: Want to see your *~ backup files? Set it in the Configuration dialog.
+
+Hint: Completion works on all input lines in all dialogs. Just press M-Tab.
+
+Hint: On slow terminals the -s flag may help.
+
+Hint: Find File: you can work on the files found using the Panelize button.
+
+Hint: Want to do complex searches? Use the External Panelize command.
+
+Hint: To change directory halfway through typing a command, use M-c (quick cd).
+
+Note: Shell commands will not work when you are on a non-local file system.
+
+Hint: Bring text back from the dead with C-y.
+
+Hint: Are some of your keys not working? Look at Options/Learn keys.
+
+Hint: To look at the output of a command in the viewer, use M-!
+
+Hint: F13 (or Shift-F3) invokes the viewer in raw mode.
+
+Hint: You may specify the editor for F4 with the shell variable EDITOR.
+
+Hint: You may specify the external viewer with the shell vars VIEWER or PAGER.
+
+Hint: You can disable all requests for confirmation in Options/Confirmation.
+
+Hint: Leap to frequently used directories in a single bound with C-.
+
+Hint: You can do anonymous FTP with mc by typing 'cd ftp://machine.edu'
+
+Hint: FTP is built in the Midnight Commander, check the File/FTP link menu.
+
+Hint: M-t changes quickly the listing mode.
+
+Hint: You can specify the username when doing ftps: 'cd ftp://user@machine.edu'
+
+Hint: You can browse RPM files by tapping enter on top of an rpm file.
+
+Hint: To mark directories on the select dialog box, append a slash.
+
+Hint: To use the mouse cut and paste may require holding the shift key
+
+Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.23/doc/hints/l10n/mc.hint.nb mc-4.8.24/doc/hints/l10n/mc.hint.nb
--- mc-4.8.23/doc/hints/l10n/mc.hint.nb	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/doc/hints/l10n/mc.hint.nb	2020-01-19 01:51:13.000000000 +0400
@@ -0,0 +1,87 @@
+Hint: Hurtigtasten C-x t kopierer de valgte filnavnene til kommandolinja.
+
+Hint: Hurtigtasten C-x p kopierer dette filnavnet til kommandolinja.
+
+Hint: Hurtigtasten M-Tab (eller Esc + Tab) fullfrer. Bruk hurtigtasten to ganger for  f opp en liste.
+
+Hint: Hurtigtastene M-p og M-n gir tilgang til kommandohistorikken.
+
+Hint: For  sitere et tegn kan du bruke hurtigtasten Control + Q og deretter tegnet.
+
+Hint: Du kan sl av disse hintene i menyen Innstillinger/Utforming.
+
+Hint: For  velge mapper kan du legge til en skrstrek til slutt i skemnsteret.
+
+Hint: Hvis terminalen mangler funksjonstaster s kan du bruke ESC + tallet.
+
+Hint: Hjemmesiden til GNU Midnight Commander er http://www.midnight-commander.org/
+
+Hint: Du kan sende feilrapporter til mc-devel@gnome.org
+
+Hint: Tabulatoren endrer det aktive panelet.
+
+Hint: VFS lar deg trykke Enter p et tar-arkiv for  underske innholdet.
+
+Hint: Se ogs manualsiden.
+
+Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
+
+Hint: %-makroer virker ogs i kommandolinja.
+
+Hint: Hurtigtasten M-! lar deg kjre programmer og se resultatet i visningen.
+
+Hint: Utlistingsformatet kan endres. Se man mc for flere detaljer.
+
+Hint: %D/%T erstattes med de utvalgte filene i mappa i det andre panelet.
+
+Hint: Hurtigtasten C-o veksler mellom det vanlige skallet og MC.
+
+Hint: CDPATH-variabelen kan korte ned tastetrykk i cd-kommandoer.
+
+Hint: Du kan sl p visning av .*-filer i Innstillinger/Oppsett.
+
+Hint: Du kan sl p visning av *~-reservekopier i Innstillinger/Oppsett.
+
+Hint: Hurtigtasten M-Tab fullfrer i alle skrivefelt i alle dialogvinduer.
+
+Hint: Du kan bruke flagget -s hvis terminalen er treig.
+
+Hint: Du kan jobbe med funnede filer ved  velge Legg til i panel.
+
+Hint: Du kan bruke Legg til eksternt i panel for  utfre komplekse sk.
+
+Hint: Du kan skifte mappe mens du holder p  skrive en kommando med hurtigtasten M-c
+
+Merk: Skallkommandoer vil ikke virke i eksterne filsystemer.
+
+Hint: Du kan hente tilbake tekst med C-y.
+
+Hint: Virker ikke noen av tastene? Forsk Innstillinger/Lr taster.
+
+Hint: Hurtigtasten M-! legger resultatet av en kommando i visningen.
+
+Hint: F13 eller (Shift + F13) viser filinnhold rtt.
+
+Hint: Du kan velge F4s tekstprogram med skallvariabelen EDITOR.
+
+Hint: Du kan velge eksternt visningsprogram med skallvariablene VIEWER eller PAGER.
+
+Hint: Du kan sl av bekreftelsesforesprsler i Innstillinger/Bekreftelser.
+
+Hint: Leap to frequently used directories in a single bound with C-\.
+
+Hint: Du kan koble til anonym FTP med mc ved  skrive cd ftp://tjener.edu
+
+Hint: FTP er bygd inn i Midnight Commander. Se Koble til FTP.
+
+Hint: Hurtigtasten M-t endrer utlistingsformatet.
+
+Hint: Du kan angi FTP-brukernavn: cd ftp://bruker@tjener.edu
+
+Hint: Du kan se innholdet i RPM-filer ved  trykke Enter p den.
+
+Hint: Legg til en skrstrek for  markere mapper i utvalgsdialogen.
+
+Hint: Du m kanskje holde inn Shift-tasten for  klippe ut og lime inn med musa.
+
+Hint: Key frequently visited ftp sites in the hotlist: type C-\.
diff -urpN mc-4.8.23/doc/hints/l10n/mc.hint.ta mc-4.8.24/doc/hints/l10n/mc.hint.ta
--- mc-4.8.23/doc/hints/l10n/mc.hint.ta	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/doc/hints/l10n/mc.hint.ta	2020-01-19 01:49:46.000000000 +0400
@@ -0,0 +1,87 @@
+Hint: Use C-x t to copy tagged file names to the command line.
+
+Hint: Use C-x p to copy the current pathname to the command line.
+
+Hint: Completion: use M-Tab (or Esc+Tab).  Type it twice to get a list.
+
+Hint: Use M-p and M-n to access the command history.
+
+Hint: Need to quote a character? Use Control-q and the character.
+
+Hint: Tired of these messages? Turn them off from the Options/Layout menu.
+
+Hint: Selecting directories: add a slash to the end of the matching pattern.
+
+Hint: If your terminal lacks functions keys, use the ESC+number sequence.
+
+Hint: The homepage of GNU Midnight Commander: http://www.midnight-commander.org/
+
+Hint: Please send any bug reports to mc-devel@gnome.org
+
+Hint: Tab changes your current panel.
+
+Hint: VFS coolness: tap enter on a tar file to examine its contents.
+
+Hint: We also have a nice manual page.
+
+Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
+
+Hint: % macros work even on the command line.
+
+Hint: M-! will allow you to execute programs and see the output in the viewer.
+
+Hint: The file listing format can be customized; do "man mc" for details.
+
+Hint: %D/%T expands to the tagged files in the opposite directory.
+
+Hint: Want your plain shell? Press C-o, and get back to MC with C-o again.
+
+Hint: Setting the CDPATH variable can save you keystrokes in cd commands.
+
+Hint: If you want to see your .* files, say so in the Configuration dialog.
+
+Hint: Want to see your *~ backup files? Set it in the Configuration dialog.
+
+Hint: Completion works on all input lines in all dialogs. Just press M-Tab.
+
+Hint: On slow terminals the -s flag may help.
+
+Hint: Find File: you can work on the files found using the Panelize button.
+
+Hint: Want to do complex searches? Use the External Panelize command.
+
+Hint: To change directory halfway through typing a command, use M-c (quick cd).
+
+Note: Shell commands will not work when you are on a non-local file system.
+
+Hint: Bring text back from the dead with C-y.
+
+Hint: Are some of your keys not working? Look at Options/Learn keys.
+
+Hint: To look at the output of a command in the viewer, use M-!
+
+Hint: F13 (or Shift-F3) invokes the viewer in raw mode.
+
+Hint: You may specify the editor for F4 with the shell variable EDITOR.
+
+Hint: You may specify the external viewer with the shell vars VIEWER or PAGER.
+
+Hint: You can disable all requests for confirmation in Options/Confirmation.
+
+Hint: Leap to frequently used directories in a single bound with C-.
+
+Hint: You can do anonymous FTP with mc by typing 'cd ftp://machine.edu'
+
+Hint: FTP is built in the Midnight Commander, check the File/FTP link menu.
+
+Hint: M-t changes quickly the listing mode.
+
+Hint: You can specify the username when doing ftps: 'cd ftp://user@machine.edu'
+
+Hint: You can browse RPM files by tapping enter on top of an rpm file.
+
+Hint: To mark directories on the select dialog box, append a slash.
+
+Hint: To use the mouse cut and paste may require holding the shift key
+
+Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.23/doc/hints/l10n/mc.hint.vi mc-4.8.24/doc/hints/l10n/mc.hint.vi
--- mc-4.8.23/doc/hints/l10n/mc.hint.vi	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/doc/hints/l10n/mc.hint.vi	2020-01-19 01:49:46.000000000 +0400
@@ -0,0 +1,87 @@
+Hint: Use C-x t to copy tagged file names to the command line.
+
+Hint: Use C-x p to copy the current pathname to the command line.
+
+Hint: Completion: use M-Tab (or Esc+Tab).  Type it twice to get a list.
+
+Hint: Use M-p and M-n to access the command history.
+
+Hint: Need to quote a character? Use Control-q and the character.
+
+Hint: Tired of these messages? Turn them off from the Options/Layout menu.
+
+Hint: Selecting directories: add a slash to the end of the matching pattern.
+
+Hint: If your terminal lacks functions keys, use the ESC+number sequence.
+
+Hint: The homepage of GNU Midnight Commander: http://www.midnight-commander.org/
+
+Hint: Please send any bug reports to mc-devel@gnome.org
+
+Hint: Tab changes your current panel.
+
+Hint: VFS coolness: tap enter on a tar file to examine its contents.
+
+Hint: We also have a nice manual page.
+
+Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
+
+Hint: % macros work even on the command line.
+
+Hint: M-! will allow you to execute programs and see the output in the viewer.
+
+Hint: The file listing format can be customized; do "man mc" for details.
+
+Hint: %D/%T expands to the tagged files in the opposite directory.
+
+Hint: Want your plain shell? Press C-o, and get back to MC with C-o again.
+
+Hint: Setting the CDPATH variable can save you keystrokes in cd commands.
+
+Hint: If you want to see your .* files, say so in the Configuration dialog.
+
+Hint: Want to see your *~ backup files? Set it in the Configuration dialog.
+
+Hint: Completion works on all input lines in all dialogs. Just press M-Tab.
+
+Hint: On slow terminals the -s flag may help.
+
+Hint: Find File: you can work on the files found using the Panelize button.
+
+Hint: Want to do complex searches? Use the External Panelize command.
+
+Hint: To change directory halfway through typing a command, use M-c (quick cd).
+
+Note: Shell commands will not work when you are on a non-local file system.
+
+Hint: Bring text back from the dead with C-y.
+
+Hint: Are some of your keys not working? Look at Options/Learn keys.
+
+Hint: To look at the output of a command in the viewer, use M-!
+
+Hint: F13 (or Shift-F3) invokes the viewer in raw mode.
+
+Hint: You may specify the editor for F4 with the shell variable EDITOR.
+
+Hint: You may specify the external viewer with the shell vars VIEWER or PAGER.
+
+Hint: You can disable all requests for confirmation in Options/Confirmation.
+
+Hint: Leap to frequently used directories in a single bound with C-.
+
+Hint: You can do anonymous FTP with mc by typing 'cd ftp://machine.edu'
+
+Hint: FTP is built in the Midnight Commander, check the File/FTP link menu.
+
+Hint: M-t changes quickly the listing mode.
+
+Hint: You can specify the username when doing ftps: 'cd ftp://user@machine.edu'
+
+Hint: You can browse RPM files by tapping enter on top of an rpm file.
+
+Hint: To mark directories on the select dialog box, append a slash.
+
+Hint: To use the mouse cut and paste may require holding the shift key
+
+Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.23/doc/hints/l10n/mc.hint.wa mc-4.8.24/doc/hints/l10n/mc.hint.wa
--- mc-4.8.23/doc/hints/l10n/mc.hint.wa	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/doc/hints/l10n/mc.hint.wa	2020-01-19 01:49:46.000000000 +0400
@@ -0,0 +1,87 @@
+Hint: Use C-x t to copy tagged file names to the command line.
+
+Hint: Use C-x p to copy the current pathname to the command line.
+
+Hint: Completion: use M-Tab (or Esc+Tab).  Type it twice to get a list.
+
+Hint: Use M-p and M-n to access the command history.
+
+Hint: Need to quote a character? Use Control-q and the character.
+
+Hint: Tired of these messages? Turn them off from the Options/Layout menu.
+
+Hint: Selecting directories: add a slash to the end of the matching pattern.
+
+Hint: If your terminal lacks functions keys, use the ESC+number sequence.
+
+Hint: The homepage of GNU Midnight Commander: http://www.midnight-commander.org/
+
+Hint: Please send any bug reports to mc-devel@gnome.org
+
+Hint: Tab changes your current panel.
+
+Hint: VFS coolness: tap enter on a tar file to examine its contents.
+
+Hint: We also have a nice manual page.
+
+Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
+
+Hint: % macros work even on the command line.
+
+Hint: M-! will allow you to execute programs and see the output in the viewer.
+
+Hint: The file listing format can be customized; do "man mc" for details.
+
+Hint: %D/%T expands to the tagged files in the opposite directory.
+
+Hint: Want your plain shell? Press C-o, and get back to MC with C-o again.
+
+Hint: Setting the CDPATH variable can save you keystrokes in cd commands.
+
+Hint: If you want to see your .* files, say so in the Configuration dialog.
+
+Hint: Want to see your *~ backup files? Set it in the Configuration dialog.
+
+Hint: Completion works on all input lines in all dialogs. Just press M-Tab.
+
+Hint: On slow terminals the -s flag may help.
+
+Hint: Find File: you can work on the files found using the Panelize button.
+
+Hint: Want to do complex searches? Use the External Panelize command.
+
+Hint: To change directory halfway through typing a command, use M-c (quick cd).
+
+Note: Shell commands will not work when you are on a non-local file system.
+
+Hint: Bring text back from the dead with C-y.
+
+Hint: Are some of your keys not working? Look at Options/Learn keys.
+
+Hint: To look at the output of a command in the viewer, use M-!
+
+Hint: F13 (or Shift-F3) invokes the viewer in raw mode.
+
+Hint: You may specify the editor for F4 with the shell variable EDITOR.
+
+Hint: You may specify the external viewer with the shell vars VIEWER or PAGER.
+
+Hint: You can disable all requests for confirmation in Options/Confirmation.
+
+Hint: Leap to frequently used directories in a single bound with C-.
+
+Hint: You can do anonymous FTP with mc by typing 'cd ftp://machine.edu'
+
+Hint: FTP is built in the Midnight Commander, check the File/FTP link menu.
+
+Hint: M-t changes quickly the listing mode.
+
+Hint: You can specify the username when doing ftps: 'cd ftp://user@machine.edu'
+
+Hint: You can browse RPM files by tapping enter on top of an rpm file.
+
+Hint: To mark directories on the select dialog box, append a slash.
+
+Hint: To use the mouse cut and paste may require holding the shift key
+
+Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.23/doc/hints/l10n/mc.hint.zh_TW mc-4.8.24/doc/hints/l10n/mc.hint.zh_TW
--- mc-4.8.23/doc/hints/l10n/mc.hint.zh_TW	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/doc/hints/l10n/mc.hint.zh_TW	2020-01-19 01:49:46.000000000 +0400
@@ -0,0 +1,87 @@
+Hint: Use C-x t to copy tagged file names to the command line.
+
+Hint: Use C-x p to copy the current pathname to the command line.
+
+Hint: Completion: use M-Tab (or Esc+Tab).  Type it twice to get a list.
+
+Hint: Use M-p and M-n to access the command history.
+
+Hint: Need to quote a character? Use Control-q and the character.
+
+Hint: Tired of these messages? Turn them off from the Options/Layout menu.
+
+Hint: Selecting directories: add a slash to the end of the matching pattern.
+
+Hint: If your terminal lacks functions keys, use the ESC+number sequence.
+
+Hint: The homepage of GNU Midnight Commander: http://www.midnight-commander.org/
+
+Hint: Please send any bug reports to mc-devel@gnome.org
+
+Hint: Tab changes your current panel.
+
+Hint: VFS coolness: tap enter on a tar file to examine its contents.
+
+Hint: We also have a nice manual page.
+
+Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
+
+Hint: % macros work even on the command line.
+
+Hint: M-! will allow you to execute programs and see the output in the viewer.
+
+Hint: The file listing format can be customized; do "man mc" for details.
+
+Hint: %D/%T expands to the tagged files in the opposite directory.
+
+Hint: Want your plain shell? Press C-o, and get back to MC with C-o again.
+
+Hint: Setting the CDPATH variable can save you keystrokes in cd commands.
+
+Hint: If you want to see your .* files, say so in the Configuration dialog.
+
+Hint: Want to see your *~ backup files? Set it in the Configuration dialog.
+
+Hint: Completion works on all input lines in all dialogs. Just press M-Tab.
+
+Hint: On slow terminals the -s flag may help.
+
+Hint: Find File: you can work on the files found using the Panelize button.
+
+Hint: Want to do complex searches? Use the External Panelize command.
+
+Hint: To change directory halfway through typing a command, use M-c (quick cd).
+
+Note: Shell commands will not work when you are on a non-local file system.
+
+Hint: Bring text back from the dead with C-y.
+
+Hint: Are some of your keys not working? Look at Options/Learn keys.
+
+Hint: To look at the output of a command in the viewer, use M-!
+
+Hint: F13 (or Shift-F3) invokes the viewer in raw mode.
+
+Hint: You may specify the editor for F4 with the shell variable EDITOR.
+
+Hint: You may specify the external viewer with the shell vars VIEWER or PAGER.
+
+Hint: You can disable all requests for confirmation in Options/Confirmation.
+
+Hint: Leap to frequently used directories in a single bound with C-.
+
+Hint: You can do anonymous FTP with mc by typing 'cd ftp://machine.edu'
+
+Hint: FTP is built in the Midnight Commander, check the File/FTP link menu.
+
+Hint: M-t changes quickly the listing mode.
+
+Hint: You can specify the username when doing ftps: 'cd ftp://user@machine.edu'
+
+Hint: You can browse RPM files by tapping enter on top of an rpm file.
+
+Hint: To mark directories on the select dialog box, append a slash.
+
+Hint: To use the mouse cut and paste may require holding the shift key
+
+Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.23/doc/hlp/Makefile.in mc-4.8.24/doc/hlp/Makefile.in
--- mc-4.8.23/doc/hlp/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/hlp/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/hlp
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -266,7 +256,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -274,18 +263,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -325,10 +311,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -336,13 +319,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -350,12 +327,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -363,24 +335,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -414,7 +378,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -426,12 +389,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/doc/hlp/es/Makefile.in mc-4.8.24/doc/hlp/es/Makefile.in
--- mc-4.8.23/doc/hlp/es/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/hlp/es/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/hlp/es
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -208,7 +198,6 @@ am__DIST_COMMON = $(srcdir)/../hlp-lang-
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -216,18 +205,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -267,10 +253,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -278,13 +261,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -292,12 +269,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -305,24 +277,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -356,7 +320,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -368,12 +331,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/doc/hlp/hu/Makefile.in mc-4.8.24/doc/hlp/hu/Makefile.in
--- mc-4.8.23/doc/hlp/hu/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/hlp/hu/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/hlp/hu
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -208,7 +198,6 @@ am__DIST_COMMON = $(srcdir)/../hlp-lang-
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -216,18 +205,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -267,10 +253,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -278,13 +261,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -292,12 +269,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -305,24 +277,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -356,7 +320,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -368,12 +331,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/doc/hlp/it/Makefile.in mc-4.8.24/doc/hlp/it/Makefile.in
--- mc-4.8.23/doc/hlp/it/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/hlp/it/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/hlp/it
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -208,7 +198,6 @@ am__DIST_COMMON = $(srcdir)/../hlp-lang-
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -216,18 +205,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -267,10 +253,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -278,13 +261,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -292,12 +269,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -305,24 +277,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -356,7 +320,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -368,12 +331,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/doc/hlp/pl/Makefile.in mc-4.8.24/doc/hlp/pl/Makefile.in
--- mc-4.8.23/doc/hlp/pl/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/hlp/pl/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/hlp/pl
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -208,7 +198,6 @@ am__DIST_COMMON = $(srcdir)/../hlp-lang-
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -216,18 +205,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -267,10 +253,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -278,13 +261,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -292,12 +269,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -305,24 +277,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -356,7 +320,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -368,12 +331,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/doc/hlp/ru/Makefile.in mc-4.8.24/doc/hlp/ru/Makefile.in
--- mc-4.8.23/doc/hlp/ru/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/hlp/ru/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/hlp/ru
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -208,7 +198,6 @@ am__DIST_COMMON = $(srcdir)/../hlp-lang-
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -216,18 +205,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -267,10 +253,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -278,13 +261,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -292,12 +269,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -305,24 +277,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -356,7 +320,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -368,12 +331,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/doc/hlp/sr/Makefile.in mc-4.8.24/doc/hlp/sr/Makefile.in
--- mc-4.8.23/doc/hlp/sr/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/hlp/sr/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/hlp/sr
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -208,7 +198,6 @@ am__DIST_COMMON = $(srcdir)/../hlp-lang-
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -216,18 +205,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -267,10 +253,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -278,13 +261,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -292,12 +269,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -305,24 +277,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -356,7 +320,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -368,12 +331,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/doc/man/Makefile.in mc-4.8.24/doc/man/Makefile.in
--- mc-4.8.23/doc/man/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/man/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -89,24 +89,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/man
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -268,7 +258,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -276,18 +265,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -327,10 +313,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -338,13 +321,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -352,12 +329,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -365,24 +337,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -416,7 +380,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -428,12 +391,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -518,7 +477,7 @@ SED_PARAMETERS = \
 	-e "s{%libexecdir%{@libexecdir@{g"
 
 MAN_DATE_CMD = \
-	LC_ALL=$(DATE_LANG) @PERL@ -MPOSIX -e '\
+	LC_ALL=$(DATE_LANG) @PERL@ -CS -MPOSIX -e '\
 	    @fi=lstat("'$${MAN_FILE}'"); \
 	    print POSIX::strftime("$(DATE_FORMAT)", localtime($$fi[9]));' 2>/dev/null
 
diff -urpN mc-4.8.23/doc/man/date-of-man-include.am mc-4.8.24/doc/man/date-of-man-include.am
--- mc-4.8.23/doc/man/date-of-man-include.am	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/man/date-of-man-include.am	2020-01-01 19:52:34.000000000 +0400
@@ -6,7 +6,7 @@ SED_PARAMETERS = \
 	-e "s{%libexecdir%{@libexecdir@{g"
 
 MAN_DATE_CMD = \
-	LC_ALL=$(DATE_LANG) @PERL@ -MPOSIX -e '\
+	LC_ALL=$(DATE_LANG) @PERL@ -CS -MPOSIX -e '\
 	    @fi=lstat("'$${MAN_FILE}'"); \
 	    print POSIX::strftime("$(DATE_FORMAT)", localtime($$fi[9]));' 2>/dev/null
 
diff -urpN mc-4.8.23/doc/man/es/Makefile.in mc-4.8.24/doc/man/es/Makefile.in
--- mc-4.8.23/doc/man/es/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/man/es/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -89,24 +89,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/man/es
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -209,7 +199,6 @@ am__DIST_COMMON = $(srcdir)/../date-of-m
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -217,18 +206,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -268,10 +254,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -279,13 +262,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -293,12 +270,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -306,24 +278,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -357,7 +321,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -369,12 +332,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -453,7 +412,7 @@ SED_PARAMETERS = \
 	-e "s{%libexecdir%{@libexecdir@{g"
 
 MAN_DATE_CMD = \
-	LC_ALL=$(DATE_LANG) @PERL@ -MPOSIX -e '\
+	LC_ALL=$(DATE_LANG) @PERL@ -CS -MPOSIX -e '\
 	    @fi=lstat("'$${MAN_FILE}'"); \
 	    print POSIX::strftime("$(DATE_FORMAT)", localtime($$fi[9]));' 2>/dev/null
 
diff -urpN mc-4.8.23/doc/man/es/mc.1.in mc-4.8.24/doc/man/es/mc.1.in
--- mc-4.8.23/doc/man/es/mc.1.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/man/es/mc.1.in	2020-01-01 19:52:34.000000000 +0400
@@ -157,7 +157,7 @@ Skins\&.
 .\"Skins"
 .TP
 .I \-t, \-\-termcap
-Usado solo si el cdigo fue compilado con Slang y terminfo: hace que
+Usado solo si el cdigo fue compilado con S\-Lang y terminfo: hace que
 Midnight Commander use el valor de la variable de entorno
 .B TERMCAP
 para obtener la informacin del terminal, en vez de la base de datos de
@@ -3452,7 +3452,7 @@ el uso de color utilizando la base de da
 estar confundido, por lo que deberemos forzar el modo en color o deshabilitar el modo de color
 usando el argumento \-c y \-b respectivamente.
 .PP
-Si el programa est compilado con el gestor pantallas Slang
+Si el programa est compilado con el gestor pantallas S\-Lang
 en lugar de ncurses, tambin chequear la variable
 .BR COLORTERM ,
 si existe, lo que tiene el mismo efecto que la opcin \-c.
@@ -3471,7 +3471,7 @@ color_terminals=linux,xterm
 color_terminals=nombre\-terminal1,nombre\-terminal2...
 .fi
 .PP
-El programa puede compilarse con ncurses y slang, ncurses no
+El programa puede compilarse con ncurses y S\-Lang, ncurses no
 ofrece la posibilidad de forzar el modo en color: ncurses utiliza la
 informacin de la base de datos de terminales.
 .PP
@@ -3855,9 +3855,9 @@ lneas dobles).
 .PP
 .I ATENCIN!!!
 Si se compila Midnight Commander empleando la biblioteca de pantalla
-Ncurses, entonces el trazado de lneas est limitado. Es posible que
+ncurses, entonces el trazado de lneas est limitado. Es posible que
 solo se puedan utilizar lneas simples. Para consultas y comentarios
-contactar con los desarrolladores de Ncurses.
+contactar con los desarrolladores de ncurses.
 
 .PP
 Descripcin de parmetros de la seccin
diff -urpN mc-4.8.23/doc/man/hu/Makefile.in mc-4.8.24/doc/man/hu/Makefile.in
--- mc-4.8.23/doc/man/hu/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/man/hu/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -89,24 +89,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/man/hu
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -209,7 +199,6 @@ am__DIST_COMMON = $(srcdir)/../date-of-m
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -217,18 +206,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -268,10 +254,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -279,13 +262,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -293,12 +270,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -306,24 +278,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -357,7 +321,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -369,12 +332,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -453,7 +412,7 @@ SED_PARAMETERS = \
 	-e "s{%libexecdir%{@libexecdir@{g"
 
 MAN_DATE_CMD = \
-	LC_ALL=$(DATE_LANG) @PERL@ -MPOSIX -e '\
+	LC_ALL=$(DATE_LANG) @PERL@ -CS -MPOSIX -e '\
 	    @fi=lstat("'$${MAN_FILE}'"); \
 	    print POSIX::strftime("$(DATE_FORMAT)", localtime($$fi[9]));' 2>/dev/null
 
diff -urpN mc-4.8.23/doc/man/hu/mc.1.in mc-4.8.24/doc/man/hu/mc.1.in
--- mc-4.8.23/doc/man/hu/mc.1.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/man/hu/mc.1.in	2020-01-01 19:52:34.000000000 +0400
@@ -78,7 +78,7 @@ a sok energit felemszt vonal karak
 kikapcsolja.
 .TP
 .I "\-t"
-Ezt csak akkor hasznld, ha Slang\-gel s terminfo\-val fordtottad a
+Ezt csak akkor hasznld, ha S\-Lang\-gel s terminfo\-val fordtottad a
 programot: a
 .B TERMCAP
 vltz rtkt hasznlja, s nem a rendszer szint terminl adatbzist.
@@ -2898,7 +2898,7 @@ a terminl nv segtsgvel. Nha
 elfordulhat, hogy neked kell megmondanod azt, hogy sznes, vagy
 szntelen mdot hasznljon a \-c illetve a \-b kiegsztssel.
 .PP
-Ha a programot a Slang kperny kezelvel fordtottk az ncurses
+Ha a programot a S\-Lang kperny kezelvel fordtottk az ncurses
 helyett, szintn le fogja ellenrizni a
 .B COLORTERM
 vltoz rtkt, ha be van lltva, ez olyan hats, mintha a \-c flaggal
@@ -2916,7 +2916,7 @@ color_terminals=linux,xterm
 color_terminals=terminal\-name1,terminal\-name2...
 .fi
 .PP
-A program mindkt opcival fordthat (ncurses s slang).  Az ncurses nem
+A program mindkt opcival fordthat (ncurses s S\-Lang).  Az ncurses nem
 jelent felttlenl sznes zemmdot; csak a terminl adatbzist hasznlja.
 .PP
 A Midnight Commander lehetsget nyjt az alaprtelmezett sznek
diff -urpN mc-4.8.23/doc/man/it/Makefile.in mc-4.8.24/doc/man/it/Makefile.in
--- mc-4.8.23/doc/man/it/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/man/it/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -89,24 +89,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/man/it
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -209,7 +199,6 @@ am__DIST_COMMON = $(srcdir)/../date-of-m
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -217,18 +206,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -268,10 +254,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -279,13 +262,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -293,12 +270,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -306,24 +278,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -357,7 +321,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -369,12 +332,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -453,7 +412,7 @@ SED_PARAMETERS = \
 	-e "s{%libexecdir%{@libexecdir@{g"
 
 MAN_DATE_CMD = \
-	LC_ALL=$(DATE_LANG) @PERL@ -MPOSIX -e '\
+	LC_ALL=$(DATE_LANG) @PERL@ -CS -MPOSIX -e '\
 	    @fi=lstat("'$${MAN_FILE}'"); \
 	    print POSIX::strftime("$(DATE_FORMAT)", localtime($$fi[9]));' 2>/dev/null
 
diff -urpN mc-4.8.23/doc/man/it/mc.1.in mc-4.8.24/doc/man/it/mc.1.in
--- mc-4.8.23/doc/man/it/mc.1.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/man/it/mc.1.in	2020-01-01 19:52:34.000000000 +0400
@@ -93,7 +93,7 @@ Abilita il modo terminale lento, in ques
 non disegna le linee e disabilita la modalit prolissa.
 .TP
 .I "\-t"
-Usata solo se il codice  stato compilato con Slang e terminfo: fa
+Usata solo se il codice  stato compilato con S\-Lang e terminfo: fa
 in modo che il Midnight Commander usi il valore della variabile
 .B TERMCAP
 per le informazioni sul terminale invece delle informazioni di sistema
@@ -2904,7 +2904,7 @@ terminale corrente. Capita che possa sba
 costretti a forzare la modalit a colori o a disabilitarla usando
 rispettivamente le opzioni \-c e \-b.
 .PP
-Se il programma  compilato con il manager dello schermo Slang invece
+Se il programma  compilato con il manager dello schermo S\-Lang invece
 che ncurses, controller se  impostata anche la variabile
 .B COLORTERM,
 con lo stesso effetto dell'opzione \-c.
@@ -2924,7 +2924,7 @@ color_terminals=nome_terminale\-1,nome\-
 .fi
 .PP
 Il programma pu essere compilato sia con il supporto di ncurses che
-di slang ma ncurses non fornisce alcun modo per forzare la modalit
+di S\-Lang ma ncurses non fornisce alcun modo per forzare la modalit
 colore: ncurses user solo le informazioni nel database dei terminali.
 .PP
 Il Midnight Commander fornisce un modo per cambiare i colori predefiniti.
diff -urpN mc-4.8.23/doc/man/mc.1.in mc-4.8.24/doc/man/mc.1.in
--- mc-4.8.23/doc/man/mc.1.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/man/mc.1.in	2020-01-01 19:52:34.000000000 +0400
@@ -5,7 +5,7 @@
 .SH "NAME"
 mc \- Visual shell for Unix\-like systems.
 .\"SKIP_SECTION"
-.SH "USAGE"
+.SH "SYNOPSIS"
 .B mc
 [\-abcCdfhPstuUVx] [\-l log] [dir1 [dir2]] [\-e [file] ...] [\-v file]
 .\"NODE "DESCRIPTION"
@@ -88,51 +88,8 @@ the last directory Midnight Commander wa
 as an alias to the appropriate shell script.
 .TP
 .I \-s, \-\-slow
-Set alternative mode drawing of frameworks.
-If the section [Lines] is not filled, the symbol for the pseudographics
-frame is a space, otherwise the frame characters are taken from following
-parameters.
-
-.B You can redefine the following variables:
-.TP
-.B lefttop
-left\-top corner
-.TP
-.B righttop
-right\-top corner
-.TP
-.B centertop
-center\-top cross
-.TP
-.B centerbottom
-center\-bottom cross
-.TP
-.B leftbottom
-left\-bottom corner
-.TP
-.B rightbottom
-right\-bottom corner
-.TP
-.B leftmiddle
-left\-middle cross
-.TP
-.B rightmiddle
-right\-middle cross
-.TP
-.B centermiddle
-center cross
-.TP
-.B horiz
-default horizontal line
-.TP
-.B vert
-default vertical line
-.TP
-.B thinhoriz
-thin horizontal line
-.TP
-.B thinvert
-thin vertical line
+Turn on the slow terminal mode, in this mode the program will not draw
+expensive line drawing characters and will toggle verbose mode off.
 .TP
 .I \-S arg, \-\-skin=arg
 Specify a name of skin in the command line. Technology of skins is
@@ -143,7 +100,7 @@ Skins
 section.
 .TP
 .I \-t, \-\-termcap
-Used only if the code was compiled with Slang and terminfo: it makes
+Used only if the code was compiled with S\-Lang and terminfo: it makes
 Midnight Commander use the value of the
 .B TERMCAP
 variable for the terminal information instead of the information on
@@ -3423,7 +3380,7 @@ Extfs filesystems can be divided into tw
 1. Stand\-alone filesystems, which are not associated with any existing
 file.  They represent certain system\-wide data as a directory tree.
 You can invoke them by typing
-.RI ' "cd fsname://" '
+.I "cd fsname://"
 where fsname is an extfs short name (see below).  Examples of such
 filesystems include audio (list audio tracks on the CD) or apt (list of
 all Debian packages in the system).
@@ -3439,7 +3396,7 @@ contents of a file as a directory tree.
 compressed in an archive (urar, rpm) or virtual files, like messages
 in a mailbox (mailfs) or parts of a patch (patchfs).  To access such
 filesystems
-.RI ' fsname:// '
+.I fsname://
 should be appended to the archive name.  Note that the archive itself
 can be on another vfs.
 .PP
@@ -3534,7 +3491,7 @@ color using the terminal database and yo
 it gets confused, so you may force color mode or disable color mode
 using the \-c and \-b flag respectively.
 .PP
-If the program is compiled with the Slang screen manager instead of
+If the program is compiled with the S\-Lang screen manager instead of
 ncurses, it will also check the variable
 .B COLORTERM,
 if it is set, it has the same effect as the \-c flag.
@@ -3552,7 +3509,7 @@ color_terminals=linux,xterm
 color_terminals=terminal\-name1,terminal\-name2...
 .fi
 .PP
-The program can be compiled with both ncurses and slang, ncurses does
+The program can be compiled with both ncurses and S\-Lang, ncurses does
 not provide a way to force color mode: ncurses uses just the
 information in the terminal database.
 .PP
@@ -3962,10 +3919,10 @@ into skin\-file. By default single lines
 to usage of any utf\-8 symbols (like to lines, for example).
 .PP
 .I WARNING!!!
-When you build Midnight Commander with the Ncurses screen library
+When you build Midnight Commander with the ncurses screen library
 usage of drawing lines is limited!
 Possible only drawing a single lines.
-For all questions and comments please contact the developers of Ncurses.
+For all questions and comments please contact the developers of ncurses.
 
 .PP
 Descriptions of parameters
@@ -4120,6 +4077,10 @@ don't need to quote those characters in
 On the other hand, you cannot use them to change selection when the
 command line is not empty.
 .TP
+.I alternate_plus_minus
+If true, use '+', '\-', '\\' and '*' keys normally. For select/unselect,
+use 'M\-+', 'M\--' and 'M\-*'.
+.TP
 .I show_output_starts_shell
 This variable only works if you are not using the subshell support.
 When you use the C\-o keystroke to go back to the user screen, if this
@@ -4296,7 +4257,7 @@ everywhere).
 .SH "FILES"
 Full paths below may vary between installations.  They are also affected
 by the
-.BR MC_DATADIR
+.B MC_DATADIR
 environment variable. If it's set, its value is used instead of
 %prefix%/share/mc in the paths below.
 .PP
@@ -4359,7 +4320,7 @@ Local user\-defined menu. If this file i
 the home or system\-wide applications menu.
 .PP
 To change default root directory of MC, you can use
-.BR MC_PROFILE_ROOT
+.B MC_PROFILE_ROOT
 environment variable. The value of MC_PROFILE_ROOT must be an absolute path.
 If MC_PROFILE_ROOT is unset or empty, HOME variable is used. If HOME is unset
 or empty, MC directories are get from GLib library.
diff -urpN mc-4.8.23/doc/man/mcedit.1.in mc-4.8.24/doc/man/mcedit.1.in
--- mc-4.8.23/doc/man/mcedit.1.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/man/mcedit.1.in	2020-01-01 19:52:34.000000000 +0400
@@ -1,7 +1,7 @@
 .TH MCEDIT 1 "%DATE_OF_MAN_PAGE%" "MC Version %DISTR_VERSION%" "GNU Midnight Commander"
 .SH NAME
 mcedit \- Internal file editor of GNU Midnight Commander.
-.SH USAGE
+.SH SYNOPSIS
 .B mcedit
 [\-bcCdfhstVx?] [+lineno] [file1] [file2] ...
 .PP
diff -urpN mc-4.8.23/doc/man/mcview.1.in mc-4.8.24/doc/man/mcview.1.in
--- mc-4.8.23/doc/man/mcview.1.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/man/mcview.1.in	2020-01-01 19:52:34.000000000 +0400
@@ -1,7 +1,7 @@
 .TH MCVIEW 1 "%DATE_OF_MAN_PAGE%" "MC Version %DISTR_VERSION%" "GNU Midnight Commander"
 .SH NAME
 mcview \- Internal file viewer of GNU Midnight Commander.
-.SH USAGE
+.SH SYNOPSIS
 .B mcview
 [\-bcCdfhstVx?] file
 .SH DESCRIPTION
diff -urpN mc-4.8.23/doc/man/pl/Makefile.in mc-4.8.24/doc/man/pl/Makefile.in
--- mc-4.8.23/doc/man/pl/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/man/pl/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -89,24 +89,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/man/pl
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -209,7 +199,6 @@ am__DIST_COMMON = $(srcdir)/../date-of-m
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -217,18 +206,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -268,10 +254,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -279,13 +262,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -293,12 +270,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -306,24 +278,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -357,7 +321,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -369,12 +332,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -453,7 +412,7 @@ SED_PARAMETERS = \
 	-e "s{%libexecdir%{@libexecdir@{g"
 
 MAN_DATE_CMD = \
-	LC_ALL=$(DATE_LANG) @PERL@ -MPOSIX -e '\
+	LC_ALL=$(DATE_LANG) @PERL@ -CS -MPOSIX -e '\
 	    @fi=lstat("'$${MAN_FILE}'"); \
 	    print POSIX::strftime("$(DATE_FORMAT)", localtime($$fi[9]));' 2>/dev/null
 
diff -urpN mc-4.8.23/doc/man/pl/mc.1.in mc-4.8.24/doc/man/pl/mc.1.in
--- mc-4.8.23/doc/man/pl/mc.1.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/man/pl/mc.1.in	2020-01-01 19:52:34.000000000 +0400
@@ -80,7 +80,7 @@ Wcza tryb powolnego terminala, w kt
 obciajcych znakw graficznych oraz wyczy opcj weryfikacji.
 .TP
 .I \-t
-Uywane tylko jeli kod by skompilowany przy uyciu Slanga i terminfo:
+Uywane tylko jeli kod by skompilowany przy uyciu S\-Langa i terminfo:
 powoduje, e Midnight Commander bdzie uywa zmiennej rodowiskowej
 .B TERMCAP
 do pokazywania informacji terminala, zamiast informacji w systemowej bazie
@@ -2572,7 +2572,7 @@ kolory uywajc bazy danych terminali.
 przez rne flagi startowe, np. moesz wymusi wywietlanie czarno\-biae
 lub kolorowe startujc z opcj odpowiednio \-b i \-c.
 .PP
-Jeli program jest skompilowany z menederem ekranu Slang zamiast ncurses,
+Jeli program jest skompilowany z menederem ekranu S\-Lang zamiast ncurses,
 sprawdzi on rwnie warto zmiennej
 .BR COLORTERM .
 Jeli jest ustawiona, ma takie samo znaczenie jak opcja \-c.
@@ -2590,7 +2590,7 @@ color_terminals=linux,xterm
 color_terminals=terminal\-name1,terminal\-name2...
 .fi
 .PP
-Program moe by skompilowany zarwno z bibliotekami slang jak i ncurses.
+Program moe by skompilowany zarwno z bibliotekami S\-Lang jak i ncurses.
 Ncurses nie obsuguje metody wymuszania wywietlania, zawsze sprawdza w bazie danych
 terminali.
 .PP
diff -urpN mc-4.8.23/doc/man/ru/Makefile.in mc-4.8.24/doc/man/ru/Makefile.in
--- mc-4.8.23/doc/man/ru/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/man/ru/Makefile.in	2020-01-19 01:43:03.000000000 +0400
@@ -89,24 +89,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/man/ru
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -209,7 +199,6 @@ am__DIST_COMMON = $(srcdir)/../date-of-m
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -217,18 +206,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -268,10 +254,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -279,13 +262,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -293,12 +270,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -306,24 +278,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -357,7 +321,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -369,12 +332,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -453,7 +412,7 @@ SED_PARAMETERS = \
 	-e "s{%libexecdir%{@libexecdir@{g"
 
 MAN_DATE_CMD = \
-	LC_ALL=$(DATE_LANG) @PERL@ -MPOSIX -e '\
+	LC_ALL=$(DATE_LANG) @PERL@ -CS -MPOSIX -e '\
 	    @fi=lstat("'$${MAN_FILE}'"); \
 	    print POSIX::strftime("$(DATE_FORMAT)", localtime($$fi[9]));' 2>/dev/null
 
diff -urpN mc-4.8.23/doc/man/ru/mc.1.in mc-4.8.24/doc/man/ru/mc.1.in
--- mc-4.8.23/doc/man/ru/mc.1.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/man/ru/mc.1.in	2020-01-01 19:52:34.000000000 +0400
@@ -168,13 +168,13 @@  
 .PP
   ,     , 
    .     (  
-)       F1 \-
-F10.      
+)       F1 \- F10.
+     
 .\"LINK2"
  \&.
 .\"Menu Bar"
       ;      
- ,         F9.
+ ,         F9.
 .PP
  Midnight Commander    
 .        , 
@@ -222,8 +222,8 @@   telnet,
  Linux     
 .BR gpm .
 .PP
-          , 
- (    );    
+          , 
+ (    );    
  ,   (    , 
    ).
 .PP
@@ -236,7 +236,7 @@  , 
         .
 .PP
     ,   
- ,      
+ ,      
    .
 .PP
           
@@ -269,7 +269,7 @@ Control ,  , 
  M\-<> ,      
  Meta  Alt      <>.  
    Meta  Alt,  ESC,  ,  
-   <>.
+   <>.
 .PP
 S\-<> ,        Shift
      <>.
@@ -331,7 +331,7 @@  Midnight Commander 
    .     
 .B %sysconfdir%/mc/mc.keymap
 
-.B %prefix%/share/mc/mc.keymap ,
+.BR %prefix%/share/mc/mc.keymap ,
     .
    ,  , 
    (   ):
@@ -470,7 +470,7 @@  Midnight Commander 
 Commander     C\-o     
 Midnight Commander\-.       
  C\-o.     ,  
-,        Midnight Commander
+,        Midnight Commander
      ,     
  .
 .\"NODE "  Directory Panels"
@@ -519,22 +519,22 @@    
     ,   () 
    ,   .  
 
-.I  ,
+.IR " " ,
     .  
-.I  ,
-,     ,   .   
-.I    shell (Shell Patterns),
+.IR " " ,
+,     ,   .   
+.IR "   shell" ,
       ,   
- shell (*       ,  ?
+ shell ('*'       ,  '?'
    ).  
-.I    shell (Shell Patterns)
-,       
+.I "   shell"
+,       
    ( ed (1)).   
-.I   
+.I "  "
            .
  
-.I   
-,      .
+.I "  "
+,      .
 .PP
 .B \\\\ (backslash)
  "\\"     ,   
@@ -718,10 +718,10 @@    
 .B C\-e
     .
 .PP
-.B C\-b, \-
+.B C\-b,  
      .
 .PP
-.B C\-f, \-
+.B C\-f,  
      .
 .PP
 .B M\-f
@@ -883,7 +883,7 @@  \-
 (,   ).
 .TP
 .B mark
- (asterisk)   ,  \-   .
+ (asterisk)   ,  \-   .
 .TP
 .B mtime
    .
@@ -1017,13 +1017,12 @@ .
 .SH "  "
  Midnight Commander    F1 \- F10
  ""   ,    "".
-Escape\-,   F1\-F10, 
+Escape\-,   F1 \- F10, 
  terminfo kf1 \- kf10.     
     ,   ESC, 
      1  9  0 ( F1 \- F9  F10).
 .PP
- ""    ( ""
-   ):
+ ""   :
 .PP
 .B  
 .PP
@@ -1032,10 +1031,10 @@ 
 .\"LINK2"
   \&,
 .\"Internal File Viewer"
-,     " " ("Use internal view") 
- ""  "" ("Options"),  
-  ,       
- 
+,    
+.I  " "
+  ""  "",    
+,         
 .BR PAGER .
  
 .B PAGER
@@ -1058,7 +1057,7 @@   
        
 .
 .PP
-.B 
+.B 
 .PP
  
 .BR vi ,
@@ -1068,9 +1067,9 @@ 
 .\"LINK2"
   
 .\"Internal File Editor"
-(   " "
-.I (use_internal_edit)
-  " / "). 
+(  
+.I " "
+  " / ").
 .P
  
 .\"LINK2"
@@ -1087,19 +1086,16 @@ )  , 
    ,  . 
         ,
    preallocate_space.
- , 
-      (  *  ^\\(.*\\)$, 
-   
-.I    shell (Shell Patterns),
-     (wildcards)     
- ,  
+ ,        (  "*"
+ "^\\(.*\\)$",     
+.IR  "   shell" ,
+     (wildcards)    
+  ,  
 .\"LINK2"
     /\&.
 .\"Mask Copy/Rename"
 .PP
      
-.B C\-c
-
 .B ESC
  ,    .
 .PP
@@ -1121,7 +1117,7 @@   
 .PP
      .
 .PP
-.B   
+.B  
 .PP
       .
 .PP
@@ -1148,11 +1144,11 @@  , 
       ,  
 Midnight Commander   ,   "@" 
    (   ,  
-  "~").      \- (
-" \-" ("Show mini\-status") ),   
-   .     
-,    ,    
-.
+  '~').      \- (
+.I " \-"
+),       .  
+   ,    ,   
+ .
 .PP
      "C\-x s", Midnight Commander
      :     ,
@@ -1204,7 +1200,7 @@ 
 .B ESC
    .
 .PP
-.B   
+.B  
 .\"    Quick cd"
 .PP
 
@@ -1219,24 +1215,24 @@   
          .
 Midnight Commander   ,     
     .   
-.I  ,
+.IR " " ,
     .  
-.I  ,
-,     ,   .   
-.I    shell (Shell Patterns),
+.I " "
+,     ,   .   
+.IR "   shell" ,
       ,   
- shell (*       ,  ?
+ shell ('*'       ,  '?'
    ).  
-.I    shell (Shell Patterns)
-,       
+.I "   shell"
+,       
    ( ed (1)).   
-.I   
+.I "  "
            .
  
-.I   
-,      .
+.I "  "
+,      .
 .PP
-.B  
+.B " "
 .PP
       .   
           
@@ -1261,7 +1257,7 @@ cd\&.
      ,     
    ,        
   
-.B cd.
+.BR cd .
 .PP
      <Enter>.
 .\"NODE "  Command Menu"
@@ -1506,13 +1502,14 @@    
  ""   ,   .   
 ,        .
 .PP
- "  " ,   
-    (,   "foo",
-    "foobar").
-.PP
- ,   ,    <>.
-       <>
-    <>.
+
+.I "  "
+,        (,
+  "foo",     "foobar").
+.PP
+ ,   ,    [].
+       []
+    [].
 .PP
     ,   
  " "  " ".  <>
@@ -1525,11 +1522,13 @@   
 (, , ,    ).  
         "..".
 .PP
- "  "    
-     ,    
- (,  ,      CDROM   
-  ,   NFS    ).
-     . 
+
+.I "  "
+         ,
+     (,  ,   
+  CD\-ROM      ,   NFS
+   ).      .
+
 .PP
 .nf
 /cdrom:/nfs/wuarchive:/afs
@@ -1591,7 +1590,7 @@   
    "  ",   
          /. 
       
-.B C\-x h,
+.BR "C\-x h" ,
         .
         .
 .PP
@@ -1618,7 +1617,7 @@   
 .. ,   
 .I keyword/
    ,  
-.I desc.
+.IR desc .
 .PP
   keyword      :
 .TP
@@ -1658,7 +1657,7 @@  :
 .PP
 .I Open
 (  ,    ,  
- Enter       ),
+ Enter       ),
 .I View
 (F3),
 .I Edit
@@ -1684,7 +1683,7 @@    
  Midnight Commander (     
    ).     
 "" 
-.B C\-x j,
+.BR "C\-x j" ,
   ,       .
 .\"NODE "    Edit Menu File"
 .SH "      "
@@ -1776,18 +1775,15 @@  <sub\-condition>  
 
   y <pattern>         .
                      .
-  f <pattern>         ?
-  F <pattern>         
-                  ?
-  d <pattern>        
-                  ?
-  D <pattern>        
-                     ?
-  t <type>           <type>?
-  T <type>            
-                   <type>?
-  x <filename>    filename  ?
-  ! <sub\-cond>       <sub\-cond>
+  f <pattern>          ?
+  F <pattern>           ?
+  d <pattern>          ?
+  D <pattern>          
+                    ?
+  t <type>            <type>?
+  T <type>               <type>?
+  x <filename>      filename ?
+  ! <sub\-cond>      <sub\-cond>
 .fi
 .PP
  (pattern) \-     (shell pattern) 
@@ -1817,7 +1813,7 @@   
  '=t t' ,       ,
  ,   .
 .PP
-    '=?'  '=',    
+    "=?"  '=',    
        (a debug
 trace will be shown whenever the value of the condition is calculated).
 .PP
@@ -1840,14 +1836,14 @@ L	List the contents of a compressed tar\
 .PP
 .B      (Addition Conditions)
 .PP
-     '+' ( '+?')  '=' ( '=?') \-
+     '+' ( "+?")  '=' ( "=?") \-
          . 
  ,       , 
    \-  .
 .PP
             
-     ,      '+='
- '=+' (    ,   '+=?'  '=+?').
+     ,      "+="
+ "=+" (    ,   "+=?"  "=+?").
       ,    
 ,   \-  ,      
 ,  \-   '+',   \-   '='.
@@ -1856,7 +1852,7 @@ ,  \- 
  Midnight Commander    (),  
      ,    
  ,    "".  , 
-    "x"     .
+    "x"     .
 .PP
 
 .\"LINK2"
@@ -1928,38 +1924,44 @@ "  " 
 .PP
 .B    
 .PP
-.I  .
+.I  \/\c
+\& .
   ,     
 ,      ,
    .     , 
    .   ,  
    9600 bps.
 .PP
-.I   .
+.I   \/\c
+\&.
    , Midnight Commander   
 ,      
          
       \- (,  
-  ).    ,  
+  ).    ,  
 
-.I  .
+.IR " " .
 .PP
-.I   .
+.I   \/\c
+\&.
    ,     (,
 , )    .  
 ,       
  :       .   .
 .PP
-.I  .
+.I  \/\c
+\&.
      F7      
       , 
  .   .
 .PP
-.I  
+.I  \/\c
+\&.
  ,       .
   .
 .PP
 .B  Esc
+\&.
 .PP
   Midnight Commander     ESC 
 ,   \-    
@@ -1967,15 +1969,16 @@  
 ,   .    
   ESC   .
 .PP
-.I  .
+.I  \/\c
+\&.
     .    ,   
         
  (.  
-.IR  ),
+.IR "" ),
          ,  ESC 
   "" (ESC ESC).
 .PP
-.I .
+.IR  .
        ( )
       ESC.   
   1  (1000000 ).  ,  
@@ -1989,26 +1992,28 @@   
 ,        .  
    :
 .PP
-.I .
+.IR  .
  ,       .   Linux 
 FreeBSD    xterm     ,
  C\-o.
 .PP
-.I " "" " .
+.I  "" \c
+\&.
     ,    
       (  ,
   xterm  Linux\-).
 .PP
-.I .
+.IR  .
       .
 .PP
 .B  
 .PP
-.I  .
+.I  \/\c
+\&.
    ,     
  .   ,   
 ,    
-.B EDITOR.
+.BR EDITOR .
     ,  
 .B vi
  
@@ -2016,29 +2021,33 @@  
   \&.
 .\"Internal File Editor"
 .PP
-.I  .
+.I  \/\c
+\&.
    ,     
  .   ,  ,
    
-.B PAGER.
+.BR PAGER .
     ,  
-.B view.
+.BR view .
  
 .\"LINK2"
    \&.
 .\"Internal File Viewer"
 .PP
-.I  .
+.I  \/\c
+\&.
    ,    
      .   ,  
     (),  
    .
 .PP
-.I    .
+.I    \/\c
+\&.
    ,       
    .
 .PP
-.I    .
+.I    \/\c
+\&.
    ,        F9
       ( ).
        ,   
@@ -2046,22 +2055,24 @@    
      " "    
      .
 .PP
-.I    shell.
+.I    shell\/\c
+\&.
    Select, Unselect  Filter  
 ,    ,    (shell\-
 like regular expressions).  ,    ,
   : '*'   '.*' ( 
  ); '?'   '.' (   )  '.'
-   .   ,  
+   .   ,  
    ,    ed(1).
 .PP
-.I :  .
+.I :  \/\c
+\&.
     Midnight Commander  
 .\"LINK2"
  
 .\"Completion"
    
-.B M\-Tab,
+.BR M\-Tab ,
     .    
 
 .B M\-Tab
@@ -2071,49 +2082,54 @@ .   
 .B M\-Tab
    .     
      
-.B M\-Tab,
+.BR M\-Tab ,
   .
 .PP
-.I  
+.I  \/\c
+\&.
    , Midnight Commander    
   ,   ,   \-
  ().
 .PP
-.I    .
+.I    \/\c
+\&.
      ,  Midnight Commander 
        
    ,    
-.B cd.
+.BR cd .
      
-.B bash.
+.BR bash .
     , Midnight Commander   
 
 .B cd
    ,       
     ,   
-.B cd ..
+.B "cd .."
      ,     , 
  .
 .PP
-.I  .
+.I  \/\c
+\&.
    ,     . 
        
  
 .B 
 
 .BR  .
-    .
+    .
 .PP
-.I  .
+.I  \/\c
+\&.
    ,     . 
        
  
 .B 
 
 .BR  .
-    .
+    .
 .PP
-.I  .
+.I  \/\c
+\&.
    ,      Midnight Commander
       
 .BR ~/.config/mc/ini .
@@ -2134,10 +2150,12 @@ 
         
 Alt\-, (Alt\-).
 .PP
-.I  
+.I  \/\c
+\&.
      .     .
 .PP
-.B  
+.B  \c
+\&.
 .PP
   ,  Midnight Commander    Linux 
 FreeBSD.    ,     
@@ -2145,60 +2163,72 @@  .
 .PP
 .B  
 .PP
-.I  .
+.I  \/\c
+\&.
  ,       
 .   .
 .PP
-.I  .
+.I  \/\c
+\&.
  ,        .
   .
 .PP
-.I  .
+.I  \/\c
+\&.
  ,     10 , 
-  F1\-F10.   .
+  F1 \- F10.   .
 .PP
-.I  .
+.I  \/\c
+\&.
  ,      
     Midnight Commander.   .
 .PP
-.I  xterm.
+.I  xterm\/\c
+\&.
       X11 Midnight Commander
    xterm      
  .         
       ,   .
   .
 .PP
-.I  .
+.I  \/\c
+\&.
  ,          
    .   .
 .\"NODE "    Panel options"
 .SH "     "
 .B   
 .PP
-.I  \-.
+.I  \-\/\c
+\&.
  ,        
        .   .
 .PP
-.I    .
+.I    \/\c
+\&.
    ,  Midnight Commander   
      (  10).    .
    Midnight Commander      (
  2).
 .PP
-.I  /.
+.I  /\/\c
+\&.
    ,      .
   ,  (   )   
 ,    \-    .   .
 .PP
-.I   (Backup) .
+.I   (Backup) \/\c
+\&.
    , Midnight Commander   ,  
   '~' (  \-B  ls  GNU).   .
 .PP
-.I   .
+.I   \/\c
+\&.
    , Midnight Commander   ,  
   ( ls \-a).   .
 .PP
-.I   .
+.I   \/\c
+\&.
     .    , Midnight
 Commander        :
       ,  
@@ -2208,38 +2238,44 @@  ,  
  .    (  )    
   (   C\-r).
 .PP
-.I   .
+.I   \/\c
+\&.
     ( Insert),    
        .
 .PP
-.I   .
+.I   \/\c
+\&.
    (   ), 
     ,    .  
  .   ,    ,
   .       .
 .PP
-.I  .
+.I  \/\c
+\&.
        ,  
       :  
    .    ,    
   ,      .
   .
 .PP
-.I   .
+.I   \/\c
+\&.
    (   ),    
 Midnight Commander'      
 ~/.config/mc/panels.ini.
 .PP
 .B 
 .PP
-.I    lynx.
+.I    lynx\/\c
+\&.
    ,     
 " "         
 " "        
  ( ,    ).   
-.
+.
 .PP
-.I  .
+.I  \/\c
+\&.
    (   ),   
 ()      ,  
 ,        ( 
@@ -2247,12 +2283,14 @@  
     ).    ,
      .
 .PP
-.I   .
+.I   \/\c
+\&.
 ,     (scrolling)  ,
    ,     
 .
 .PP
-.I  .
+.I  \/\c
+\&.
    ,    ,  
       .    
    \-      .
@@ -2278,7 +2316,7 @@  \&,
 .\"Listing Format..."
   ,   Midnight
 Commander,  ,   
-.I selected.
+.IR selected .
  ,      
    %sysconfdir%/mc/filehighlight.ini. 
 .\"LINK2"
@@ -2325,9 +2363,9 @@ 
   (Learn keys)
 .\"Learn keys"
   ,      
- 
-.B (F1\-F20, Home, End),
-      .
+  (\c
+.B F1 \- F20, Home, End\c
+),       .
 .PP
        ,  
 .      , 
@@ -2684,11 +2722,11 @@   
 subshell,  
 .B ~/.local/share/mc/bashrc
       
-.B ~/.local/share/mc/inputrc.
+.BR ~/.local/share/mc/inputrc .
 
 .B tcsh
        
-.B ~/.local/share/mc/tcshrc.
+.BR ~/.local/share/mc/tcshrc .
 .PP
      subshell     
  
@@ -2716,10 +2754,9 @@ .   
 
 .BR "C\-x c" .
 .PP
-  " "     \-
-.IR  
-
-.IR  .
+  " "    :
+.IR " " 
+.IR "" .
 .PP
   ""         
    ,       .
@@ -2737,7 +2774,7 @@   
 .I \-
  
 .IR Tab .
-      
+      
         
      "".
 .PP
@@ -2755,41 +2792,42 @@  ( 
      ,    
  ,    
 .B []
-  <Enter>   
-.B [ ].
+  Enter   
+.BR [\~e] .
     ,      ,
   ,    <Ins>  <T>. 
 ,         .
          ( 
    ):
 .PP
-.B [ ]
+.BR [\~] :
   (  )     ,
        ,  
   () ;     , 
      .
 .PP
-.B [ ]
+.BR [\~] :
     ,   , 
   1.
 .PP
-.B [ ]
+.BR [\~] :
     ,   , 
   0.
 .PP
-.B []
+.BR [] :
        ( 
-),     ,   
-[ ].
+),     ,   
+.I [\~]\/\c
+\&.
 .PP
-.B []
+.BR [] :
     Chmod.
 .\"NODE "Chown"
 .SH "/"
   "/"   ,  
    ,   \-   .
 ""       \-
-.B C\-x o.
+.BR "C\-x o" .
 .\"NODE "Advanced Chown"
 .SH "  Chown"
    "  Chown",   ,
@@ -2814,8 +2852,13 @@ ,  
 ).  (count bar) ,    
    .  (bytes bar)  
   (      ).
-   " " (. "/"),
-    .
+  
+.I " "
+(.
+.\"LINK2"
+/\&.
+.\"Configuration"
+),     .
 .PP
         .  
  <>   ,    
@@ -2834,48 +2877,50 @@   
 .PP
     ,   
   .       
- \-  \- (  
+ \-  \- (  
 ,    ).    .
    ("  ?")   
 :
-.PP
- ( <>);
-.PP
-,       ( <>);
-.PP
-  \-   \- (
-<  >).
+.TP
+.I 
+;
+.TP
+.I 
+,      ;
+.TP
+.I   
+  \-   \-.
 .PP
         (" 
 ?")         
  (      ).  4
  :
 .TP
-.I <>
+.I 
       ;
 .TP
-.I <>
+.I 
  ()  ,   
 \-;
 .TP
-.I < >
-   (    \-, 
+.I  
+   (    \-, 
    );
 .TP
-.I <  >
-     ,   
-<>     .   
+.I   
+     ,   
+[]     .   
      .
 .PP
-        ,  
-   .   <>   
-   , <>     ,
-<>  ,        
-   , < > \-    
-   , <>    
- .  <>  <>    , 
-  ,       
-.
+        ,  
+   .   []   
+   . []     .
+[]  ,        
+   , [ ] \-    
+   . []    
+ .  []  []    , 
+    ,      
+ .
 .PP
       ,   
        ,  
@@ -2885,12 +2930,12 @@ . 
       ( )
         
 .         \- 
-   ,    (\-). 
+   ,    (\-). 
        
 (wildcards)   ,    
 .  ,   ,  
 (     )    
-\-.    ,  
+\-.    ,  
 ()   ,   
  \-.
 .PP
@@ -2901,22 +2946,22 @@ ,  
 .B " "
 .PP
 ,        
- \-  (   )    ,
+ \-  (   )    ,
     ( ),     .
 .PP
 .B " ,  "
 .PP
-,  ,   \-   ,
+,  ,   \-   ,
       (),   ().
-  ( )  \-  
-\-.   ,     
+  ( )  \-  
+\-.   ,     
       ,    
  .     :
 .PP
     
-.I /foo ,
+.IR /foo ,
  
-.I bar ,
+.IR bar ,
    
 .IR /bla/foo .
     , MC  
@@ -2934,15 +2979,15 @@    
 .PP
 ,    /   
 :  ,   ,   root, UID  GID 
-.   ,      
+.   ,      
   umask.
 .PP
 .B "   shell"
 .PP
    ,    
 (wildcards) '*'  '?'   .    ,
-    shell.       '*'
- '\\<>'.   '*'     
+    shell.       '*'
+ '\\<>'.   '*'     
      ,   '*' 
    . . ,   '\\1'  
      ,  '\\2' \-  
@@ -2950,19 +2995,19 @@  . .  '\\9'.  '\\0
 .PP
  :
 .PP
-   "*.tar.gz",   \- "/bla/*.tgz"  
+   "*.tar.gz",   \- "/bla/*.tgz"  
   \- "foo.tar.gz",    "foo.tgz" 
     "/bla".
 .PP
         ,  
 "file.c"   "c.file".      
- "*.*",    \- "\\2.\\1".
+ "*.*",    \- "\\2.\\1".
 .PP
  
 .I "   shell"
 , MC    .  
     ,    
-   ,        '\\(...\\)'.
+   ,        '\\(...\\)'.
    ,      .
 .PP
  :
@@ -2973,16 +3018,16 @@   "/bla/
 .PP
 ,          ,
     "file.c"   "c.file".   
- \- "^\\(.*\\)\\.\\(.*\\)$",    \- "\\2.\\1".
+ \- "^\\(.*\\)\\.\\(.*\\)$",    \- "\\2.\\1".
 .PP
 .B " "
 .PP
         .  
- '\\u'  '\\l'   ,    
+ '\\u'  '\\l'   ,    
     ( )   ()
  .
 .PP
-     '\\U'  '\\L',  
+     '\\U'  '\\L',  
       ,
     '\\E'  '\\U',   '\\L'
    .
@@ -2991,15 +3036,15 @@  '\\u'  '\\l' 
 .PP
 ,     '*' (
 .I "   shell"
-)  '^\\(.*\\)$' (
+)  "^\\(.*\\)$" (
 .I "   shell"
-),     '\\L\\u*',   
+),     "\\L\\u*",   
    ,      ,
    \- .
 .PP
  '\\'       
- . , '\\\\'   backslash  '\\*'
-   (asterisk).
+ . , "\\\\"   backslash  "\\*"
+   (asterisk).
 .PP
 .B "  "
 .PP
@@ -3015,22 +3060,22 @@  
 .\"Input Line Keys"
      ()   .
   
-.I  ,
+.IR " " ,
     .  
-.I  ,
-,     ,   .   
-.I    shell ,
+.I " "
+,     ,   .   
+.IR "   shell" ,
       ,   
- shell (*       ,  ?
+ shell ('*'       ,  '?'
    ).  
-.I    shell
-,       
+.I "   shell"
+,       
    ( ed(1)).   
-.I   
+.I "  "
            .
  
-.I   
-,      .
+.I "  "
+,      .
 .\"NODE "Diff Viewer"
 .SH "   "
 mcdiff \-      ,    .
@@ -3181,7 +3226,7 @@   ASCII
 .    ,    
     ,      .
 .PP
-.BR F7, /, ?
+.B F7, /, ?
  .   ,    
 .   ?,      "".
 .PP
@@ -3269,8 +3314,7 @@  
         .
 .PP
   : , ,
-,     ;   
-.I (key for key undo);
+,     ;   ;
  ;  ; ;    
  ;     
 shift\-   MSW\-MAC (  linux\-);
@@ -3386,7 +3430,7 @@  Midnight Commander 
 .PP
   \-       , 
    . MC   ,  
-    (   
+    (   
 .BR $ ")",
   (   
 .BR ~ ")",
@@ -3423,22 +3467,28 @@   
  ,      .  
          ,   
 
-.BR Esc ", " F10
+.BR Esc ,
+.B F10
   /.  
 .\"LINK2"
-:  
+":  "
 .\"Configuration"
-,       , 
+,       , 
   
 .B M\-Tab
- ,    MC    .
+ ,    MC    .
 .PP
   
-.BR ? ", " * "  " &
-( \fB\\?\fR, \fB\\*\fR, \fB\\&\fR )
-  ,        
-     .
-
+.BR '?' ,
+.BR '*' 
+.B '&'
+(
+.BR "\\?" ,
+.BR "\\*" ,
+.BR "\\&" )
+  ,   
+       
+  .
 .\"NODE "Virtual File System"
 .SH "  "
  Midnight Commander  , 
@@ -3511,8 +3561,8 @@ :
 .I ftp://[!][user[:pass]@]machine[:port][remote\-dir]
 .PP
 
-.IR user ", " port
-
+.IR user ,
+.IR port 
 .I remote\-dir
  .  
 .I user
@@ -3623,8 +3673,8 @@    (chdi
 .I sh://[user@]machine[:options]/[remote\-dir]
 .PP
 
-.IR user ", " options
-
+.IR user ,
+.IR options 
 .I remote\-dir
  .   
 .IR user ,
@@ -3667,8 +3717,8 @@    (chdi
 .I sftp://[user@]machine[:port]/[remote\-dir]
 .PP
 
-.IR user ", " port
-
+.IR user ,
+.IR port 
 .I remote\-dir
  .   
 .IR user ,
@@ -3730,12 +3780,12 @@    
 .I smb://[username@]machine[/service][/remote\-dir]
 .PP
 
-.IR username ", " service
-
+.IR username ,
+.IR service 
 .I remote\-dir
 .
-.IR username ", " domain
-
+.IR username ,
+.IR domain 
 .I password
      .
 .PP
@@ -3757,8 +3807,8 @@   Extfs 
 1.   ,       
  .       
     
-.RI ' "cd fsname://" '
- fsname \-    extfs (. ).     
+.IR "cd fsname://" ,
+ fsname \-    extfs (. ).     
 audio (     CD)  apt (  
    Debian).
 .PP
@@ -3773,7 +3823,7 @@    
       (urar, rpm)    ;
 ,    mailbox (mailfs)   diff\- (patchfs).
      
-.RI 'fsname:// '
+.I "fsname://"
      .       .
 .PP
 ,      documents.zip :
@@ -3790,58 +3840,57 @@  extfs,    
   extfs\-,   Midnight Commander:
 .TP
 .B a
-  DOS/Windows  'A:'
-.RI ( "cd a://" ).
+  DOS/Windows  'A:' (\c
+.IR "cd a://" ).
 .TP
 .B apt
-front end     APT (Debian)
-.RI ( "cd apt://" ).
+front end     APT (Debian) (\c
+.IR "cd apt://" ).
 .TP
 .B audio
-      CD
-.RI ( "cd audio://"
-or
+      CD (\c
+.IR "cd audio://" 
 .IR "cd device/audio://" ).
 .TP
 .B bpp
-  Bad Penguin GNU/Linux
-.RI ( "cd file.bpp/bpp://" ).
+  Bad Penguin GNU/Linux (\c
+.IR "cd file.bpp/bpp://" ).
 .TP
 .B deb
-  Debian GNU/Linux
-.RI ( "cd file.deb/deb://" ).
+  Debian GNU/Linux (\c
+.IR "cd file.deb/deb://" ).
 .TP
 .B dpkg
-  deb\-
-.RI ( "cd deb://" ).
+  deb\- (\c
+.IR "cd deb://" ).
 .TP
 .B hp48
-    /  HP48
-.RI ( "cd hp48://" ).
+    /  HP48 (\c
+.IR "cd hp48://" ).
 .TP
 .B lslR
- lslR\-,    FTP\-
-.RI ( "cd filename/lslR://" ).
+ lslR\-,    FTP\- (\c
+.IR "cd filename/lslR://" ).
 .TP
 .B mailfs
-   mailbox
-.RI ( "cd mailbox/mailfs://" ).
+   mailbox (\c
+.IR "cd mailbox/mailfs://" ).
 .TP
 .B patchfs
- diff\-
-.RI ( "cd filename/patchfs://" ).
+ diff\- (\c
+.IR "cd filename/patchfs://" ).
 .TP
 .B rpm
-    RPM
-.RI ( "cd filename/rpm://" ).
+    RPM (\c
+.I "cd filename/rpm://" ).
 .TP
 .B rpms
-    RPM\-
-.RI ( "cd rpms://" ).
+    RPM\- (\c
+.IR "cd rpms://" ).
 .TP
 .B ulha, urar, uzip, uzoo, uar, uha
-
-.RI ( "cd archive/xxxx://"
+ (\c
+.I "cd archive/xxxx://"
  xxxx  :
 .IR ulha ,
 .IR urar ,
@@ -3871,8 +3920,8 @@   
       
 .B ncurses
 
-.BR slang .
-.B ncurses
+.BR S\-Lang .
+.B Ncurses
      : ncurses  
      .  ,  , 
     ,  
@@ -3927,7 +3976,7 @@    
  :      : normal,
 selected, disabled, marked, markselect, errors, input, inputmark, inputunchanged,
 commandlinemark, reverse, gauge, header, inputhistory, commandhistory. 
-   F1\-F10: bbarhotkey, bbarbutton.   
+   F1 \- F10: bbarhotkey, bbarbutton.   
       : statusbar.   :
 menunormal, menusel, menuhot, menuhotsel, menuinactive.    :
 dnormal, dfocus, dhotnormal, dhotfocus.   \-  :
@@ -4306,9 +4355,9 @@  \-.  
     utf\-8 ,   
 .PP
 .I !!!
-  Midnight Commander   Ncurses 
+  Midnight Commander   ncurses 
  !     .  
-      Ncurses.
+      ncurses.
 
 .PP
   
@@ -4446,7 +4495,7 @@  .
 .PP
 .I ftpfs_use_passive_connections
 .IP
-    .      
+    .      
  FTP   ,    
  ,   (behind a filtering packet
 router).       ,    
@@ -4482,6 +4531,12 @@   
      ,    
 .
 .PP
+.I alternate_plus_minus
+.IP
+ ,  '+', '\-', '\\' and '*'   .
+  ,    ,  'M\-+', 'M\--'
+ 'M\-*' .
+.PP
 .I show_output_starts_shell
 .IP
       ,    
@@ -4519,7 +4574,7 @@ mc.ext\&.
 .PP
 .I xtree_mode
 .IP
-    (   ),  
+    (   ),  
           
       .
 .TP
@@ -4612,35 +4667,35 @@    
     :
 .PP
 .nf
-f0 \- f20        ,
+f0 \- f20       ,
                   
-               f0\-f20
+               F0\-F20
 bs              , 
-                  backspace
+                  Backspace
 home              Home
-end               end
+end               End
 up                " "
 down              " "
 left              " "
 right             " "
-pgdn              page down
-pgup              page up
-insert            insert
-delete            delete
+pgdn              Page Down
+pgup              Page Up
+insert            Insert
+delete            Delete
 complete          
               " "
 .fi
 .PP
-,  ,  ,   insert 
-  Escape + [ + O + p    ini
- :
+,  ,  ,   Insert 
+  "Escape + [ + O + p", 
+  ini  :
 .PP
 .nf
 insert=\\e[Op
 .fi
 .PP
  " "    
-.B M\-tab,
+.BR M\-Tab ,
     
 .I complete
          
@@ -4675,7 +4730,7 @@  
 .IP
     Midnight Commander;  
   ,      
-.B ~/.config/mc/ini .
+.BR ~/.config/mc/ini .
   %sysconfdir%/mc/mc.ini ,  %prefix%/share/mc/mc.ini
  .
 .PP
diff -urpN mc-4.8.23/doc/man/sr/Makefile.in mc-4.8.24/doc/man/sr/Makefile.in
--- mc-4.8.23/doc/man/sr/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/doc/man/sr/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -89,24 +89,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = doc/man/sr
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -209,7 +199,6 @@ am__DIST_COMMON = $(srcdir)/../date-of-m
 	$(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -217,18 +206,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -268,10 +254,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -279,13 +262,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -293,12 +270,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -306,24 +278,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -357,7 +321,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -369,12 +332,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -453,7 +412,7 @@ SED_PARAMETERS = \
 	-e "s{%libexecdir%{@libexecdir@{g"
 
 MAN_DATE_CMD = \
-	LC_ALL=$(DATE_LANG) @PERL@ -MPOSIX -e '\
+	LC_ALL=$(DATE_LANG) @PERL@ -CS -MPOSIX -e '\
 	    @fi=lstat("'$${MAN_FILE}'"); \
 	    print POSIX::strftime("$(DATE_FORMAT)", localtime($$fi[9]));' 2>/dev/null
 
diff -urpN mc-4.8.23/doc/man/sr/mc.1.in mc-4.8.24/doc/man/sr/mc.1.in
--- mc-4.8.23/doc/man/sr/mc.1.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/doc/man/sr/mc.1.in	2020-01-01 19:52:34.000000000 +0400
@@ -73,7 +73,7 @@   
         .
 .TP
 .I "\-t"
-          Slang 
+          S\-Lang 
  terminfo:        
 
 .B TERMCAP
@@ -2922,7 +2922,7 @@    
 ,           
       `\-c'  `\-b',  .
 .PP
-       `Slang' 
+       `S\-Lang' 
 `ncurses',         
 .B COLORTERM,
       `\-c'.
@@ -2940,7 +2940,7 @@ color_terminals=linux,xterm
 color_terminals=terminal\-name1,terminal\-name2...
 .fi
 .PP
-        `ncurses'  `slang';
+        `ncurses'  `S\-Lang';
 `ncurses'       :    
   .
 .PP
diff -urpN mc-4.8.23/intl/ChangeLog mc-4.8.24/intl/ChangeLog
--- mc-4.8.23/intl/ChangeLog	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/ChangeLog	1970-01-01 04:00:00.000000000 +0400
@@ -1,4 +0,0 @@
-2010-06-04  GNU  <bug-gnu-gettext@gnu.org>
-
-	* Version 0.18.1 released.
-
diff -urpN mc-4.8.23/intl/Makefile.in mc-4.8.24/intl/Makefile.in
--- mc-4.8.23/intl/Makefile.in	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/Makefile.in	1970-01-01 04:00:00.000000000 +0400
@@ -1,659 +0,0 @@
-# Makefile for directory with message catalog handling library of GNU gettext
-# Copyright (C) 1995-1998, 2000-2007, 2009-2010 Free Software Foundation, Inc.
-#
-# This program is free software; you can redistribute it and/or modify it
-# under the terms of the GNU Library General Public License as published
-# by the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-#
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-# Library General Public License for more details.
-#
-# You should have received a copy of the GNU Library General Public
-# License along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-# USA.
-
-PACKAGE = @PACKAGE@
-VERSION = @VERSION@
-
-SHELL = /bin/sh
-
-srcdir = @srcdir@
-top_srcdir = @top_srcdir@
-top_builddir = ..
-
-# The VPATH variables allows builds with $builddir != $srcdir, assuming a
-# 'make' program that supports VPATH (such as GNU make). This line is removed
-# by autoconf automatically when "$(srcdir)" = ".".
-# In this directory, the VPATH handling is particular:
-# 1. If INTL_LIBTOOL_SUFFIX_PREFIX is 'l' (indicating a build with libtool),
-#    the .c -> .lo rules carefully use $(srcdir), so that VPATH can be omitted.
-# 2. If PACKAGE = gettext-tools, VPATH _must_ be omitted, because otherwise
-#    'make' does the wrong thing if GNU gettext was configured with
-#    "./configure --srcdir=`pwd`", namely it gets confused by the .lo and .la
-#    files it finds in srcdir = ../../gettext-runtime/intl.
-VPATH = $(srcdir)
-
-prefix = @prefix@
-exec_prefix = @exec_prefix@
-transform = @program_transform_name@
-libdir = @libdir@
-includedir = @includedir@
-datarootdir = @datarootdir@
-datadir = @datadir@
-localedir = $(datadir)/locale
-gettextsrcdir = $(datadir)/gettext/intl
-aliaspath = $(localedir)
-subdir = intl
-
-INSTALL = @INSTALL@
-INSTALL_DATA = @INSTALL_DATA@
-
-# We use $(mkdir_p).
-# In automake <= 1.9.x, $(mkdir_p) is defined either as "mkdir -p --" or as
-# "$(mkinstalldirs)" or as "$(install_sh) -d". For these automake versions,
-# @install_sh@ does not start with $(SHELL), so we add it.
-# In automake >= 1.10, @mkdir_p@ is derived from ${MKDIR_P}, which is defined
-# either as "/path/to/mkdir -p" or ".../install-sh -c -d". For these automake
-# versions, $(mkinstalldirs) and $(install_sh) are unused.
-mkinstalldirs = $(SHELL) @install_sh@ -d
-install_sh = $(SHELL) @install_sh@
-MKDIR_P = @MKDIR_P@
-mkdir_p = @mkdir_p@
-
-l = @INTL_LIBTOOL_SUFFIX_PREFIX@
-
-AR = ar
-CC = @CC@
-LIBTOOL = @LIBTOOL@
-RANLIB = @RANLIB@
-YACC = @INTLBISON@ -y -d
-YFLAGS = --name-prefix=__gettext
-# Windows resource compiler (windres). Used when libtool is not used.
-WINDRES = @WINDRES@
-# Windows resource compiler (windres). Used via libtool.
-RC = @RC@
-
-# Support for silent-rules.
-AM_V_at = $(am__v_at_$(V))
-am__v_at_ = $(am__v_at_@INTL_DEFAULT_VERBOSITY@)
-am__v_at_0 = @
-AM_V_AR = $(am__v_AR_$(V))
-am__v_AR_ = $(am__v_AR_@INTL_DEFAULT_VERBOSITY@)
-am__v_AR_0 = @echo "  AR    " $@;
-AM_V_CC = $(am__v_CC_$(V))
-am__v_CC_ = $(am__v_CC_@INTL_DEFAULT_VERBOSITY@)
-am__v_CC_0 = @echo "  CC    " $@;
-AM_V_GEN = $(am__v_GEN_$(V))
-am__v_GEN_ = $(am__v_GEN_@INTL_DEFAULT_VERBOSITY@)
-am__v_GEN_0 = @echo "  GEN   " $@;
-AM_V_YACC = $(am__v_YACC_$(V))
-am__v_YACC_ = $(am__v_YACC_@INTL_DEFAULT_VERBOSITY@)
-am__v_YACC_0 = @echo "  YACC  " $@;
-AM_V_lt = $(am__v_lt_$(V))
-am__v_lt_ = $(am__v_lt_@INTL_DEFAULT_VERBOSITY@)
-am__v_lt_0 = --silent
-
-# -DBUILDING_LIBINTL: Change expansion of LIBINTL_DLL_EXPORTED macro.
-# -DBUILDING_DLL: Change expansion of RELOCATABLE_DLL_EXPORTED macro.
-DEFS = -DLOCALEDIR=\"$(localedir)\" -DLOCALE_ALIAS_PATH=\"$(aliaspath)\" \
--DLIBDIR=\"$(libdir)\" -DBUILDING_LIBINTL -DBUILDING_DLL -DIN_LIBINTL \
--DENABLE_RELOCATABLE=1 -DIN_LIBRARY -DINSTALLDIR=\"$(libdir)\" -DNO_XMALLOC \
--Dset_relocation_prefix=libintl_set_relocation_prefix \
--Drelocate=libintl_relocate \
--DDEPENDS_ON_LIBICONV=1 @DEFS@
-CPPFLAGS = @CPPFLAGS@
-CFLAGS = @CFLAGS@ @CFLAG_VISIBILITY@
-LDFLAGS = @LDFLAGS@ $(LDFLAGS_@WOE32DLL@)
-LDFLAGS_yes = -Wl,--export-all-symbols
-LDFLAGS_no =
-LIBS = @LIBS@
-
-COMPILE = $(CC) -c $(DEFS) $(INCLUDES) $(CPPFLAGS) $(CFLAGS) $(XCFLAGS)
-
-HEADERS = \
-  gmo.h \
-  gettextP.h \
-  hash-string.h \
-  loadinfo.h \
-  plural-exp.h \
-  eval-plural.h \
-  localcharset.h \
-  lock.h \
-  relocatable.h \
-  tsearch.h tsearch.c \
-  xsize.h \
-  printf-args.h printf-args.c \
-  printf-parse.h wprintf-parse.h printf-parse.c \
-  vasnprintf.h vasnwprintf.h vasnprintf.c \
-  os2compat.h \
-  libgnuintl.h.in
-SOURCES = \
-  bindtextdom.c \
-  dcgettext.c \
-  dgettext.c \
-  gettext.c \
-  finddomain.c \
-  hash-string.c \
-  loadmsgcat.c \
-  localealias.c \
-  textdomain.c \
-  l10nflist.c \
-  explodename.c \
-  dcigettext.c \
-  dcngettext.c \
-  dngettext.c \
-  ngettext.c \
-  plural.y \
-  plural-exp.c \
-  localcharset.c \
-  threadlib.c \
-  lock.c \
-  relocatable.c \
-  langprefs.c \
-  localename.c \
-  log.c \
-  printf.c \
-  setlocale.c \
-  version.c \
-  osdep.c \
-  os2compat.c \
-  intl-exports.c \
-  intl-compat.c
-OBJECTS = \
-  bindtextdom.$lo \
-  dcgettext.$lo \
-  dgettext.$lo \
-  gettext.$lo \
-  finddomain.$lo \
-  hash-string.$lo \
-  loadmsgcat.$lo \
-  localealias.$lo \
-  textdomain.$lo \
-  l10nflist.$lo \
-  explodename.$lo \
-  dcigettext.$lo \
-  dcngettext.$lo \
-  dngettext.$lo \
-  ngettext.$lo \
-  plural.$lo \
-  plural-exp.$lo \
-  localcharset.$lo \
-  threadlib.$lo \
-  lock.$lo \
-  relocatable.$lo \
-  langprefs.$lo \
-  localename.$lo \
-  log.$lo \
-  printf.$lo \
-  setlocale.$lo \
-  version.$lo \
-  osdep.$lo \
-  intl-compat.$lo
-OBJECTS_RES_yes = libintl.res.$lo
-OBJECTS_RES_no =
-DISTFILES.common = Makefile.in \
-config.charset locale.alias ref-add.sin ref-del.sin export.h libintl.rc \
-$(HEADERS) $(SOURCES)
-DISTFILES.generated = plural.c
-DISTFILES.normal = VERSION
-DISTFILES.gettext = COPYING.LIB-2.0 COPYING.LIB-2.1 libintl.glibc README.woe32
-DISTFILES.obsolete = xopen-msg.sed linux-msg.sed po2tbl.sed.in cat-compat.c \
-COPYING.LIB-2 gettext.h libgettext.h plural-eval.c libgnuintl.h \
-libgnuintl.h_vms Makefile.vms libgnuintl.h.msvc-static \
-libgnuintl.h.msvc-shared Makefile.msvc
-
-all: all-@USE_INCLUDED_LIBINTL@
-all-yes: libintl.$la libintl.h charset.alias ref-add.sed ref-del.sed
-all-no: all-no-@BUILD_INCLUDED_LIBINTL@
-all-no-yes: libgnuintl.$la
-all-no-no:
-
-libintl.a libgnuintl.a: $(OBJECTS)
-	$(AM_V_at)rm -f $@
-	$(AM_V_AR)$(AR) cru $@ $(OBJECTS)
-	$(AM_V_at)$(RANLIB) $@
-
-libintl.la libgnuintl.la: $(OBJECTS) $(OBJECTS_RES_@WOE32@)
-	$(AM_V_GEN)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=link \
-	  $(CC) $(CPPFLAGS) $(CFLAGS) $(XCFLAGS) $(LDFLAGS) -o $@ \
-	  $(OBJECTS) @LTLIBICONV@ @INTL_MACOSX_LIBS@ $(LIBS) @LTLIBTHREAD@ @LTLIBC@ \
-	  $(OBJECTS_RES_@WOE32@) \
-	  -version-info $(LTV_CURRENT):$(LTV_REVISION):$(LTV_AGE) \
-	  -rpath $(libdir) \
-	  -no-undefined
-
-# Libtool's library version information for libintl.
-# Before making a gettext release, the gettext maintainer must change this
-# according to the libtool documentation, section "Library interface versions".
-# Maintainers of other packages that include the intl directory must *not*
-# change these values.
-LTV_CURRENT=9
-LTV_REVISION=1
-LTV_AGE=1
-
-.SUFFIXES:
-.SUFFIXES: .c .y .o .lo .sin .sed
-
-.c.o:
-	$(AM_V_CC)$(COMPILE) $<
-
-.y.c:
-	$(AM_V_YACC)$(YACC) $(YFLAGS) --output $@ $<
-	$(AM_V_at)rm -f $*.h
-
-bindtextdom.lo: $(srcdir)/bindtextdom.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/bindtextdom.c
-dcgettext.lo: $(srcdir)/dcgettext.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/dcgettext.c
-dgettext.lo: $(srcdir)/dgettext.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/dgettext.c
-gettext.lo: $(srcdir)/gettext.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/gettext.c
-finddomain.lo: $(srcdir)/finddomain.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/finddomain.c
-hash-string.lo: $(srcdir)/hash-string.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/hash-string.c
-loadmsgcat.lo: $(srcdir)/loadmsgcat.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/loadmsgcat.c
-localealias.lo: $(srcdir)/localealias.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/localealias.c
-textdomain.lo: $(srcdir)/textdomain.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/textdomain.c
-l10nflist.lo: $(srcdir)/l10nflist.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/l10nflist.c
-explodename.lo: $(srcdir)/explodename.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/explodename.c
-dcigettext.lo: $(srcdir)/dcigettext.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/dcigettext.c
-dcngettext.lo: $(srcdir)/dcngettext.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/dcngettext.c
-dngettext.lo: $(srcdir)/dngettext.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/dngettext.c
-ngettext.lo: $(srcdir)/ngettext.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/ngettext.c
-plural.lo: $(srcdir)/plural.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/plural.c
-plural-exp.lo: $(srcdir)/plural-exp.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/plural-exp.c
-localcharset.lo: $(srcdir)/localcharset.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/localcharset.c
-threadlib.lo: $(srcdir)/threadlib.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/threadlib.c
-lock.lo: $(srcdir)/lock.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/lock.c
-relocatable.lo: $(srcdir)/relocatable.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/relocatable.c
-langprefs.lo: $(srcdir)/langprefs.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/langprefs.c
-localename.lo: $(srcdir)/localename.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/localename.c
-log.lo: $(srcdir)/log.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/log.c
-printf.lo: $(srcdir)/printf.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/printf.c
-setlocale.lo: $(srcdir)/setlocale.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/setlocale.c
-version.lo: $(srcdir)/version.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/version.c
-osdep.lo: $(srcdir)/osdep.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/osdep.c
-intl-compat.lo: $(srcdir)/intl-compat.c
-	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC --mode=compile $(COMPILE) $(srcdir)/intl-compat.c
-
-# This rule is executed only on Woe32 systems.
-# The following sed expressions come from the windres-options script. They are
-# inlined here, so that they can be written in a Makefile without requiring a
-# temporary file. They must contain literal newlines rather than semicolons,
-# so that they work with the sed-3.02 that is shipped with MSYS.
-libintl.res.o: $(srcdir)/libintl.rc
-	nlinit=`echo 'nl="'; echo '"'`; eval "$$nlinit"; \
-	sed_extract_major='/^[0-9]/{'$${nl}'s/^\([0-9]*\).*/\1/p'$${nl}q$${nl}'}'$${nl}'c\'$${nl}0$${nl}q; \
-	sed_extract_minor='/^[0-9][0-9]*[.][0-9]/{'$${nl}'s/^[0-9]*[.]\([0-9]*\).*/\1/p'$${nl}q$${nl}'}'$${nl}'c\'$${nl}0$${nl}q; \
-	sed_extract_subminor='/^[0-9][0-9]*[.][0-9][0-9]*[.][0-9]/{'$${nl}'s/^[0-9]*[.][0-9]*[.]\([0-9]*\).*/\1/p'$${nl}q$${nl}'}'$${nl}'c\'$${nl}0$${nl}q; \
-	$(WINDRES) \
-	  "-DPACKAGE_VERSION_STRING=\\\"$(VERSION)\\\"" \
-	  "-DPACKAGE_VERSION_MAJOR="`echo '$(VERSION)' | sed -n -e "$$sed_extract_major"` \
-	  "-DPACKAGE_VERSION_MINOR="`echo '$(VERSION)' | sed -n -e "$$sed_extract_minor"` \
-	  "-DPACKAGE_VERSION_SUBMINOR="`echo '$(VERSION)' | sed -n -e "$$sed_extract_subminor"` \
-	  -i $(srcdir)/libintl.rc -o libintl.res.o --output-format=coff
-libintl.res.lo: $(srcdir)/libintl.rc
-	nlinit=`echo 'nl="'; echo '"'`; eval "$$nlinit"; \
-	sed_extract_major='/^[0-9]/{'$${nl}'s/^\([0-9]*\).*/\1/p'$${nl}q$${nl}'}'$${nl}'c\'$${nl}0$${nl}q; \
-	sed_extract_minor='/^[0-9][0-9]*[.][0-9]/{'$${nl}'s/^[0-9]*[.]\([0-9]*\).*/\1/p'$${nl}q$${nl}'}'$${nl}'c\'$${nl}0$${nl}q; \
-	sed_extract_subminor='/^[0-9][0-9]*[.][0-9][0-9]*[.][0-9]/{'$${nl}'s/^[0-9]*[.][0-9]*[.]\([0-9]*\).*/\1/p'$${nl}q$${nl}'}'$${nl}'c\'$${nl}0$${nl}q; \
-	$(LIBTOOL) --mode=compile --tag=RC $(RC) \
-	  "-DPACKAGE_VERSION_STRING=\\\"$(VERSION)\\\"" \
-	  "-DPACKAGE_VERSION_MAJOR="`echo '$(VERSION)' | sed -n -e "$$sed_extract_major"` \
-	  "-DPACKAGE_VERSION_MINOR="`echo '$(VERSION)' | sed -n -e "$$sed_extract_minor"` \
-	  "-DPACKAGE_VERSION_SUBMINOR="`echo '$(VERSION)' | sed -n -e "$$sed_extract_subminor"` \
-	  -i $(srcdir)/libintl.rc -o libintl.res.lo --output-format=coff
-
-ref-add.sed: $(srcdir)/ref-add.sin
-	sed -e '/^#/d' -e 's/@''PACKAGE''@/@PACKAGE@/g' $(srcdir)/ref-add.sin > t-ref-add.sed
-	mv t-ref-add.sed ref-add.sed
-ref-del.sed: $(srcdir)/ref-del.sin
-	sed -e '/^#/d' -e 's/@''PACKAGE''@/@PACKAGE@/g' $(srcdir)/ref-del.sin > t-ref-del.sed
-	mv t-ref-del.sed ref-del.sed
-
-INCLUDES = -I. -I$(srcdir) -I..
-
-libgnuintl.h: $(srcdir)/libgnuintl.h.in
-	sed -e '/IN_LIBGLOCALE/d' \
-	    -e 's,@''HAVE_POSIX_PRINTF''@,@HAVE_POSIX_PRINTF@,g' \
-	    -e 's,@''HAVE_ASPRINTF''@,@HAVE_ASPRINTF@,g' \
-	    -e 's,@''HAVE_NEWLOCALE''@,@HAVE_NEWLOCALE@,g' \
-	    -e 's,@''HAVE_SNPRINTF''@,@HAVE_SNPRINTF@,g' \
-	    -e 's,@''HAVE_WPRINTF''@,@HAVE_WPRINTF@,g' \
-	  < $(srcdir)/libgnuintl.h.in \
-	| if test '@WOE32DLL@' = yes; then \
-	    sed -e 's/extern \([^()]*\);/extern __declspec (dllimport) \1;/'; \
-	  else \
-	    cat; \
-	  fi \
-	| sed -e 's/extern \([^"]\)/extern LIBINTL_DLL_EXPORTED \1/' \
-	      -e "/#define _LIBINTL_H/r $(srcdir)/export.h" \
-	| sed -e 's,@''HAVE_VISIBILITY''@,@HAVE_VISIBILITY@,g' \
-	  > libgnuintl.h
-
-libintl.h: $(srcdir)/libgnuintl.h.in
-	sed -e '/IN_LIBGLOCALE/d' \
-	    -e 's,@''HAVE_POSIX_PRINTF''@,@HAVE_POSIX_PRINTF@,g' \
-	    -e 's,@''HAVE_ASPRINTF''@,@HAVE_ASPRINTF@,g' \
-	    -e 's,@''HAVE_NEWLOCALE''@,@HAVE_NEWLOCALE@,g' \
-	    -e 's,@''HAVE_SNPRINTF''@,@HAVE_SNPRINTF@,g' \
-	    -e 's,@''HAVE_WPRINTF''@,@HAVE_WPRINTF@,g' \
-	  < $(srcdir)/libgnuintl.h.in > libintl.h
-
-charset.alias: $(srcdir)/config.charset
-	$(SHELL) $(srcdir)/config.charset '@host@' > t-$@
-	mv t-$@ $@
-
-check: all
-
-# We must not install the libintl.h/libintl.a files if we are on a
-# system which has the GNU gettext() function in its C library or in a
-# separate library.
-# If you want to use the one which comes with this version of the
-# package, you have to use `configure --with-included-gettext'.
-install: install-exec install-data
-install-exec: all
-	if { test "$(PACKAGE)" = "gettext-runtime" || test "$(PACKAGE)" = "gettext-tools"; } \
-	   && test '@USE_INCLUDED_LIBINTL@' = yes; then \
-	  $(mkdir_p) $(DESTDIR)$(libdir) $(DESTDIR)$(includedir); \
-	  $(INSTALL_DATA) libintl.h $(DESTDIR)$(includedir)/libintl.h; \
-	  $(LIBTOOL) --mode=install \
-	    $(INSTALL_DATA) libintl.$la $(DESTDIR)$(libdir)/libintl.$la; \
-	  if test "@RELOCATABLE@" = yes; then \
-	    dependencies=`sed -n -e 's,^dependency_libs=\(.*\),\1,p' < $(DESTDIR)$(libdir)/libintl.la | sed -e "s,^',," -e "s,'\$$,,"`; \
-	    if test -n "$$dependencies"; then \
-	      rm -f $(DESTDIR)$(libdir)/libintl.la; \
-	    fi; \
-	  fi; \
-	else \
-	  : ; \
-	fi
-	if test "$(PACKAGE)" = "gettext-tools" \
-	   && test '@USE_INCLUDED_LIBINTL@' = no \
-	   && test @GLIBC2@ != no; then \
-	  $(mkdir_p) $(DESTDIR)$(libdir); \
-	  $(LIBTOOL) --mode=install \
-	    $(INSTALL_DATA) libgnuintl.$la $(DESTDIR)$(libdir)/libgnuintl.$la; \
-	  rm -f $(DESTDIR)$(libdir)/preloadable_libintl.so; \
-	  $(INSTALL_DATA) $(DESTDIR)$(libdir)/libgnuintl.so $(DESTDIR)$(libdir)/preloadable_libintl.so; \
-	  $(LIBTOOL) --mode=uninstall \
-	    rm -f $(DESTDIR)$(libdir)/libgnuintl.$la; \
-	else \
-	  : ; \
-	fi
-	if test '@USE_INCLUDED_LIBINTL@' = yes; then \
-	  if test @GLIBC21@ = no; then \
-	    case '@host_os@' in \
-	      darwin[56]*) \
-	        need_charset_alias=true ;; \
-	      darwin* | cygwin* | mingw* | pw32* | cegcc*) \
-	        need_charset_alias=false ;; \
-	      *) \
-	        need_charset_alias=true ;; \
-	    esac; \
-	  else \
-	    need_charset_alias=false; \
-	  fi; \
-	  if $$need_charset_alias; then \
-	    $(mkdir_p) $(DESTDIR)$(libdir); \
-	  fi; \
-	  temp=$(DESTDIR)$(libdir)/t-charset.alias; \
-	  dest=$(DESTDIR)$(libdir)/charset.alias; \
-	  if test -f $(DESTDIR)$(libdir)/charset.alias; then \
-	    orig=$(DESTDIR)$(libdir)/charset.alias; \
-	    sed -f ref-add.sed $$orig > $$temp; \
-	    $(INSTALL_DATA) $$temp $$dest; \
-	    rm -f $$temp; \
-	  else \
-	    if $$need_charset_alias; then \
-	      orig=charset.alias; \
-	      sed -f ref-add.sed $$orig > $$temp; \
-	      $(INSTALL_DATA) $$temp $$dest; \
-	      rm -f $$temp; \
-	    fi; \
-	  fi; \
-	  $(mkdir_p) $(DESTDIR)$(localedir); \
-	  test -f $(DESTDIR)$(localedir)/locale.alias \
-	    && orig=$(DESTDIR)$(localedir)/locale.alias \
-	    || orig=$(srcdir)/locale.alias; \
-	  temp=$(DESTDIR)$(localedir)/t-locale.alias; \
-	  dest=$(DESTDIR)$(localedir)/locale.alias; \
-	  sed -f ref-add.sed $$orig > $$temp; \
-	  $(INSTALL_DATA) $$temp $$dest; \
-	  rm -f $$temp; \
-	else \
-	  : ; \
-	fi
-install-data: all
-	if test "$(PACKAGE)" = "gettext-tools"; then \
-	  $(mkdir_p) $(DESTDIR)$(gettextsrcdir); \
-	  $(INSTALL_DATA) VERSION $(DESTDIR)$(gettextsrcdir)/VERSION; \
-	  $(INSTALL_DATA) ChangeLog.inst $(DESTDIR)$(gettextsrcdir)/ChangeLog; \
-	  dists="COPYING.LIB-2.0 COPYING.LIB-2.1 $(DISTFILES.common)"; \
-	  for file in $$dists; do \
-	    $(INSTALL_DATA) $(srcdir)/$$file \
-			    $(DESTDIR)$(gettextsrcdir)/$$file; \
-	  done; \
-	  chmod a+x $(DESTDIR)$(gettextsrcdir)/config.charset; \
-	  dists="$(DISTFILES.generated)"; \
-	  for file in $$dists; do \
-	    if test -f $$file; then dir=.; else dir=$(srcdir); fi; \
-	    $(INSTALL_DATA) $$dir/$$file \
-			    $(DESTDIR)$(gettextsrcdir)/$$file; \
-	  done; \
-	  dists="$(DISTFILES.obsolete)"; \
-	  for file in $$dists; do \
-	    rm -f $(DESTDIR)$(gettextsrcdir)/$$file; \
-	  done; \
-	else \
-	  : ; \
-	fi
-
-install-strip: install
-
-install-dvi install-html install-info install-ps install-pdf:
-
-installdirs:
-	if { test "$(PACKAGE)" = "gettext-runtime" || test "$(PACKAGE)" = "gettext-tools"; } \
-	   && test '@USE_INCLUDED_LIBINTL@' = yes; then \
-	  $(mkdir_p) $(DESTDIR)$(libdir) $(DESTDIR)$(includedir); \
-	else \
-	  : ; \
-	fi
-	if test "$(PACKAGE)" = "gettext-tools" \
-	   && test '@USE_INCLUDED_LIBINTL@' = no \
-	   && test @GLIBC2@ != no; then \
-	  $(mkdir_p) $(DESTDIR)$(libdir); \
-	else \
-	  : ; \
-	fi
-	if test '@USE_INCLUDED_LIBINTL@' = yes; then \
-	  if test @GLIBC21@ = no; then \
-	    case '@host_os@' in \
-	      darwin[56]*) \
-	        need_charset_alias=true ;; \
-	      darwin* | cygwin* | mingw* | pw32* | cegcc*) \
-	        need_charset_alias=false ;; \
-	      *) \
-	        need_charset_alias=true ;; \
-	    esac; \
-	  else \
-	    need_charset_alias=false; \
-	  fi; \
-	  if $$need_charset_alias; then \
-	    $(mkdir_p) $(DESTDIR)$(libdir); \
-	  fi; \
-	  $(mkdir_p) $(DESTDIR)$(localedir); \
-	else \
-	  : ; \
-	fi
-	if test "$(PACKAGE)" = "gettext-tools"; then \
-	  $(mkdir_p) $(DESTDIR)$(gettextsrcdir); \
-	else \
-	  : ; \
-	fi
-
-# Define this as empty until I found a useful application.
-installcheck:
-
-uninstall:
-	if { test "$(PACKAGE)" = "gettext-runtime" || test "$(PACKAGE)" = "gettext-tools"; } \
-	   && test '@USE_INCLUDED_LIBINTL@' = yes; then \
-	  rm -f $(DESTDIR)$(includedir)/libintl.h; \
-	  $(LIBTOOL) --mode=uninstall \
-	    rm -f $(DESTDIR)$(libdir)/libintl.$la; \
-	else \
-	  : ; \
-	fi
-	if test "$(PACKAGE)" = "gettext-tools" \
-	   && test '@USE_INCLUDED_LIBINTL@' = no \
-	   && test @GLIBC2@ != no; then \
-	  rm -f $(DESTDIR)$(libdir)/preloadable_libintl.so; \
-	else \
-	  : ; \
-	fi
-	if test '@USE_INCLUDED_LIBINTL@' = yes; then \
-	  if test -f $(DESTDIR)$(libdir)/charset.alias; then \
-	    temp=$(DESTDIR)$(libdir)/t-charset.alias; \
-	    dest=$(DESTDIR)$(libdir)/charset.alias; \
-	    sed -f ref-del.sed $$dest > $$temp; \
-	    if grep '^# Packages using this file: $$' $$temp > /dev/null; then \
-	      rm -f $$dest; \
-	    else \
-	      $(INSTALL_DATA) $$temp $$dest; \
-	    fi; \
-	    rm -f $$temp; \
-	  fi; \
-	  if test -f $(DESTDIR)$(localedir)/locale.alias; then \
-	    temp=$(DESTDIR)$(localedir)/t-locale.alias; \
-	    dest=$(DESTDIR)$(localedir)/locale.alias; \
-	    sed -f ref-del.sed $$dest > $$temp; \
-	    if grep '^# Packages using this file: $$' $$temp > /dev/null; then \
-	      rm -f $$dest; \
-	    else \
-	      $(INSTALL_DATA) $$temp $$dest; \
-	    fi; \
-	    rm -f $$temp; \
-	  fi; \
-	else \
-	  : ; \
-	fi
-	if test "$(PACKAGE)" = "gettext-tools"; then \
-	  for file in VERSION ChangeLog COPYING.LIB-2.0 COPYING.LIB-2.1 $(DISTFILES.common) $(DISTFILES.generated); do \
-	    rm -f $(DESTDIR)$(gettextsrcdir)/$$file; \
-	  done; \
-	else \
-	  : ; \
-	fi
-
-info dvi ps pdf html:
-
-$(OBJECTS): ../config.h libgnuintl.h
-bindtextdom.$lo dcgettext.$lo dcigettext.$lo dcngettext.$lo dgettext.$lo dngettext.$lo finddomain.$lo gettext.$lo intl-compat.$lo loadmsgcat.$lo localealias.$lo ngettext.$lo setlocale.$lo textdomain.$lo: $(srcdir)/gettextP.h $(srcdir)/gmo.h $(srcdir)/loadinfo.h
-localename.$lo: $(srcdir)/gettextP.h
-hash-string.$lo dcigettext.$lo loadmsgcat.$lo: $(srcdir)/hash-string.h
-explodename.$lo l10nflist.$lo: $(srcdir)/loadinfo.h
-dcigettext.$lo loadmsgcat.$lo plural.$lo plural-exp.$lo: $(srcdir)/plural-exp.h
-dcigettext.$lo: $(srcdir)/eval-plural.h
-localcharset.$lo: $(srcdir)/localcharset.h
-bindtextdom.$lo dcigettext.$lo finddomain.$lo loadmsgcat.$lo localealias.$lo lock.$lo log.$lo: $(srcdir)/lock.h
-localealias.$lo localcharset.$lo relocatable.$lo: $(srcdir)/relocatable.h
-printf.$lo: $(srcdir)/printf-args.h $(srcdir)/printf-args.c $(srcdir)/printf-parse.h $(srcdir)/wprintf-parse.h $(srcdir)/xsize.h $(srcdir)/printf-parse.c $(srcdir)/vasnprintf.h $(srcdir)/vasnwprintf.h $(srcdir)/vasnprintf.c
-
-# A bison-2.1 generated plural.c includes <libintl.h> if ENABLE_NLS.
-PLURAL_DEPS_yes = libintl.h
-PLURAL_DEPS_no =
-plural.$lo: $(PLURAL_DEPS_@USE_INCLUDED_LIBINTL@)
-
-tags: TAGS
-
-TAGS: $(HEADERS) $(SOURCES)
-	here=`pwd`; cd $(srcdir) && etags -o $$here/TAGS $(HEADERS) $(SOURCES)
-
-ctags: CTAGS
-
-CTAGS: $(HEADERS) $(SOURCES)
-	here=`pwd`; cd $(srcdir) && ctags -o $$here/CTAGS $(HEADERS) $(SOURCES)
-
-id: ID
-
-ID: $(HEADERS) $(SOURCES)
-	here=`pwd`; cd $(srcdir) && mkid -f$$here/ID $(HEADERS) $(SOURCES)
-
-
-mostlyclean:
-	rm -f *.a *.la *.o *.obj *.lo core core.*
-	rm -f libgnuintl.h libintl.h charset.alias ref-add.sed ref-del.sed
-	rm -f -r .libs _libs
-
-clean: mostlyclean
-
-distclean: clean
-	rm -f Makefile ID TAGS
-	if test "$(PACKAGE)" = "gettext-runtime" || test "$(PACKAGE)" = "gettext-tools"; then \
-	  rm -f ChangeLog.inst $(DISTFILES.normal); \
-	else \
-	  : ; \
-	fi
-
-maintainer-clean: distclean
-	@echo "This command is intended for maintainers to use;"
-	@echo "it deletes files that may require special tools to rebuild."
-
-
-# GNU gettext needs not contain the file `VERSION' but contains some
-# other files which should not be distributed in other packages.
-distdir = ../$(PACKAGE)-$(VERSION)/$(subdir)
-dist distdir: Makefile
-	if test "$(PACKAGE)" = "gettext-tools"; then \
-	  : ; \
-	else \
-	  if test "$(PACKAGE)" = "gettext-runtime"; then \
-	    additional="$(DISTFILES.gettext)"; \
-	  else \
-	    additional="$(DISTFILES.normal)"; \
-	  fi; \
-	  $(MAKE) $(DISTFILES.common) $(DISTFILES.generated) $$additional; \
-	  for file in ChangeLog $(DISTFILES.common) $(DISTFILES.generated) $$additional; do \
-	    if test -f $$file; then dir=.; else dir=$(srcdir); fi; \
-	    cp -p $$dir/$$file $(distdir) || test $$file = Makefile.in || exit 1; \
-	  done; \
-	fi
-
-Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
-	cd $(top_builddir) && $(SHELL) ./config.status
-# This would be more efficient, but doesn't work any more with autoconf-2.57,
-# when AC_CONFIG_FILES([intl/Makefile:somedir/Makefile.in]) is used.
-#	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@
-
-# Tell versions [3.59,3.63) of GNU make not to export all variables.
-# Otherwise a system limit (for SysV at least) may be exceeded.
-.NOEXPORT:
diff -urpN mc-4.8.23/intl/VERSION mc-4.8.24/intl/VERSION
--- mc-4.8.23/intl/VERSION	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/VERSION	1970-01-01 04:00:00.000000000 +0400
@@ -1 +0,0 @@
-GNU gettext library from gettext-0.18.1
diff -urpN mc-4.8.23/intl/bindtextdom.c mc-4.8.24/intl/bindtextdom.c
--- mc-4.8.23/intl/bindtextdom.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/bindtextdom.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,340 +0,0 @@
-/* Implementation of the bindtextdomain(3) function
-   Copyright (C) 1995-1998, 2000-2003, 2005-2006, 2008 Free Software
-   Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <stddef.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include "gettextP.h"
-#ifdef _LIBC
-# include <libintl.h>
-#else
-# include "libgnuintl.h"
-#endif
-
-/* Handle multi-threaded applications.  */
-#ifdef _LIBC
-# include <bits/libc-lock.h>
-# define gl_rwlock_define __libc_rwlock_define
-# define gl_rwlock_wrlock __libc_rwlock_wrlock
-# define gl_rwlock_unlock __libc_rwlock_unlock
-#else
-# include "lock.h"
-#endif
-
-/* Some compilers, like SunOS4 cc, don't have offsetof in <stddef.h>.  */
-#ifndef offsetof
-# define offsetof(type,ident) ((size_t)&(((type*)0)->ident))
-#endif
-
-/* @@ end of prolog @@ */
-
-/* Lock variable to protect the global data in the gettext implementation.  */
-gl_rwlock_define (extern, _nl_state_lock attribute_hidden)
-
-
-/* Names for the libintl functions are a problem.  They must not clash
-   with existing names and they should follow ANSI C.  But this source
-   code is also used in GNU C Library where the names have a __
-   prefix.  So we have to make a difference here.  */
-#ifdef _LIBC
-# define BINDTEXTDOMAIN __bindtextdomain
-# define BIND_TEXTDOMAIN_CODESET __bind_textdomain_codeset
-# ifndef strdup
-#  define strdup(str) __strdup (str)
-# endif
-#else
-# define BINDTEXTDOMAIN libintl_bindtextdomain
-# define BIND_TEXTDOMAIN_CODESET libintl_bind_textdomain_codeset
-#endif
-
-/* Specifies the directory name *DIRNAMEP and the output codeset *CODESETP
-   to be used for the DOMAINNAME message catalog.
-   If *DIRNAMEP or *CODESETP is NULL, the corresponding attribute is not
-   modified, only the current value is returned.
-   If DIRNAMEP or CODESETP is NULL, the corresponding attribute is neither
-   modified nor returned.  */
-static void
-set_binding_values (const char *domainname,
-		    const char **dirnamep, const char **codesetp)
-{
-  struct binding *binding;
-  int modified;
-
-  /* Some sanity checks.  */
-  if (domainname == NULL || domainname[0] == '\0')
-    {
-      if (dirnamep)
-	*dirnamep = NULL;
-      if (codesetp)
-	*codesetp = NULL;
-      return;
-    }
-
-  gl_rwlock_wrlock (_nl_state_lock);
-
-  modified = 0;
-
-  for (binding = _nl_domain_bindings; binding != NULL; binding = binding->next)
-    {
-      int compare = strcmp (domainname, binding->domainname);
-      if (compare == 0)
-	/* We found it!  */
-	break;
-      if (compare < 0)
-	{
-	  /* It is not in the list.  */
-	  binding = NULL;
-	  break;
-	}
-    }
-
-  if (binding != NULL)
-    {
-      if (dirnamep)
-	{
-	  const char *dirname = *dirnamep;
-
-	  if (dirname == NULL)
-	    /* The current binding has be to returned.  */
-	    *dirnamep = binding->dirname;
-	  else
-	    {
-	      /* The domain is already bound.  If the new value and the old
-		 one are equal we simply do nothing.  Otherwise replace the
-		 old binding.  */
-	      char *result = binding->dirname;
-	      if (strcmp (dirname, result) != 0)
-		{
-		  if (strcmp (dirname, _nl_default_dirname) == 0)
-		    result = (char *) _nl_default_dirname;
-		  else
-		    {
-#if defined _LIBC || defined HAVE_STRDUP
-		      result = strdup (dirname);
-#else
-		      size_t len = strlen (dirname) + 1;
-		      result = (char *) malloc (len);
-		      if (__builtin_expect (result != NULL, 1))
-			memcpy (result, dirname, len);
-#endif
-		    }
-
-		  if (__builtin_expect (result != NULL, 1))
-		    {
-		      if (binding->dirname != _nl_default_dirname)
-			free (binding->dirname);
-
-		      binding->dirname = result;
-		      modified = 1;
-		    }
-		}
-	      *dirnamep = result;
-	    }
-	}
-
-      if (codesetp)
-	{
-	  const char *codeset = *codesetp;
-
-	  if (codeset == NULL)
-	    /* The current binding has be to returned.  */
-	    *codesetp = binding->codeset;
-	  else
-	    {
-	      /* The domain is already bound.  If the new value and the old
-		 one are equal we simply do nothing.  Otherwise replace the
-		 old binding.  */
-	      char *result = binding->codeset;
-	      if (result == NULL || strcmp (codeset, result) != 0)
-		{
-#if defined _LIBC || defined HAVE_STRDUP
-		  result = strdup (codeset);
-#else
-		  size_t len = strlen (codeset) + 1;
-		  result = (char *) malloc (len);
-		  if (__builtin_expect (result != NULL, 1))
-		    memcpy (result, codeset, len);
-#endif
-
-		  if (__builtin_expect (result != NULL, 1))
-		    {
-		      free (binding->codeset);
-
-		      binding->codeset = result;
-		      modified = 1;
-		    }
-		}
-	      *codesetp = result;
-	    }
-	}
-    }
-  else if ((dirnamep == NULL || *dirnamep == NULL)
-	   && (codesetp == NULL || *codesetp == NULL))
-    {
-      /* Simply return the default values.  */
-      if (dirnamep)
-	*dirnamep = _nl_default_dirname;
-      if (codesetp)
-	*codesetp = NULL;
-    }
-  else
-    {
-      /* We have to create a new binding.  */
-      size_t len = strlen (domainname) + 1;
-      struct binding *new_binding =
-	(struct binding *) malloc (offsetof (struct binding, domainname) + len);
-
-      if (__builtin_expect (new_binding == NULL, 0))
-	goto failed;
-
-      memcpy (new_binding->domainname, domainname, len);
-
-      if (dirnamep)
-	{
-	  const char *dirname = *dirnamep;
-
-	  if (dirname == NULL)
-	    /* The default value.  */
-	    dirname = _nl_default_dirname;
-	  else
-	    {
-	      if (strcmp (dirname, _nl_default_dirname) == 0)
-		dirname = _nl_default_dirname;
-	      else
-		{
-		  char *result;
-#if defined _LIBC || defined HAVE_STRDUP
-		  result = strdup (dirname);
-		  if (__builtin_expect (result == NULL, 0))
-		    goto failed_dirname;
-#else
-		  size_t len = strlen (dirname) + 1;
-		  result = (char *) malloc (len);
-		  if (__builtin_expect (result == NULL, 0))
-		    goto failed_dirname;
-		  memcpy (result, dirname, len);
-#endif
-		  dirname = result;
-		}
-	    }
-	  *dirnamep = dirname;
-	  new_binding->dirname = (char *) dirname;
-	}
-      else
-	/* The default value.  */
-	new_binding->dirname = (char *) _nl_default_dirname;
-
-      if (codesetp)
-	{
-	  const char *codeset = *codesetp;
-
-	  if (codeset != NULL)
-	    {
-	      char *result;
-
-#if defined _LIBC || defined HAVE_STRDUP
-	      result = strdup (codeset);
-	      if (__builtin_expect (result == NULL, 0))
-		goto failed_codeset;
-#else
-	      size_t len = strlen (codeset) + 1;
-	      result = (char *) malloc (len);
-	      if (__builtin_expect (result == NULL, 0))
-		goto failed_codeset;
-	      memcpy (result, codeset, len);
-#endif
-	      codeset = result;
-	    }
-	  *codesetp = codeset;
-	  new_binding->codeset = (char *) codeset;
-	}
-      else
-	new_binding->codeset = NULL;
-
-      /* Now enqueue it.  */
-      if (_nl_domain_bindings == NULL
-	  || strcmp (domainname, _nl_domain_bindings->domainname) < 0)
-	{
-	  new_binding->next = _nl_domain_bindings;
-	  _nl_domain_bindings = new_binding;
-	}
-      else
-	{
-	  binding = _nl_domain_bindings;
-	  while (binding->next != NULL
-		 && strcmp (domainname, binding->next->domainname) > 0)
-	    binding = binding->next;
-
-	  new_binding->next = binding->next;
-	  binding->next = new_binding;
-	}
-
-      modified = 1;
-
-      /* Here we deal with memory allocation failures.  */
-      if (0)
-	{
-	failed_codeset:
-	  if (new_binding->dirname != _nl_default_dirname)
-	    free (new_binding->dirname);
-	failed_dirname:
-	  free (new_binding);
-	failed:
-	  if (dirnamep)
-	    *dirnamep = NULL;
-	  if (codesetp)
-	    *codesetp = NULL;
-	}
-    }
-
-  /* If we modified any binding, we flush the caches.  */
-  if (modified)
-    ++_nl_msg_cat_cntr;
-
-  gl_rwlock_unlock (_nl_state_lock);
-}
-
-/* Specify that the DOMAINNAME message catalog will be found
-   in DIRNAME rather than in the system locale data base.  */
-char *
-BINDTEXTDOMAIN (const char *domainname, const char *dirname)
-{
-  set_binding_values (domainname, &dirname, NULL);
-  return (char *) dirname;
-}
-
-/* Specify the character encoding in which the messages from the
-   DOMAINNAME message catalog will be returned.  */
-char *
-BIND_TEXTDOMAIN_CODESET (const char *domainname, const char *codeset)
-{
-  set_binding_values (domainname, NULL, &codeset);
-  return (char *) codeset;
-}
-
-#ifdef _LIBC
-/* Aliases for function names in GNU C Library.  */
-weak_alias (__bindtextdomain, bindtextdomain);
-weak_alias (__bind_textdomain_codeset, bind_textdomain_codeset);
-#endif
diff -urpN mc-4.8.23/intl/config.charset mc-4.8.24/intl/config.charset
--- mc-4.8.23/intl/config.charset	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/config.charset	1970-01-01 04:00:00.000000000 +0400
@@ -1,684 +0,0 @@
-#! /bin/sh
-# Output a system dependent table of character encoding aliases.
-#
-#   Copyright (C) 2000-2004, 2006-2010 Free Software Foundation, Inc.
-#
-#   This program is free software; you can redistribute it and/or modify it
-#   under the terms of the GNU Library General Public License as published
-#   by the Free Software Foundation; either version 2, or (at your option)
-#   any later version.
-#
-#   This program is distributed in the hope that it will be useful,
-#   but WITHOUT ANY WARRANTY; without even the implied warranty of
-#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-#   Library General Public License for more details.
-#
-#   You should have received a copy of the GNU Library General Public
-#   License along with this program; if not, write to the Free Software
-#   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-#   USA.
-#
-# The table consists of lines of the form
-#    ALIAS  CANONICAL
-#
-# ALIAS is the (system dependent) result of "nl_langinfo (CODESET)".
-# ALIAS is compared in a case sensitive way.
-#
-# CANONICAL is the GNU canonical name for this character encoding.
-# It must be an encoding supported by libiconv. Support by GNU libc is
-# also desirable. CANONICAL is case insensitive. Usually an upper case
-# MIME charset name is preferred.
-# The current list of GNU canonical charset names is as follows.
-#
-#       name              MIME?             used by which systems
-#   ASCII, ANSI_X3.4-1968       glibc solaris freebsd netbsd darwin cygwin
-#   ISO-8859-1              Y   glibc aix hpux irix osf solaris freebsd netbsd openbsd darwin cygwin
-#   ISO-8859-2              Y   glibc aix hpux irix osf solaris freebsd netbsd openbsd darwin cygwin
-#   ISO-8859-3              Y   glibc solaris cygwin
-#   ISO-8859-4              Y   osf solaris freebsd netbsd openbsd darwin
-#   ISO-8859-5              Y   glibc aix hpux irix osf solaris freebsd netbsd openbsd darwin cygwin
-#   ISO-8859-6              Y   glibc aix hpux solaris cygwin
-#   ISO-8859-7              Y   glibc aix hpux irix osf solaris netbsd openbsd darwin cygwin
-#   ISO-8859-8              Y   glibc aix hpux osf solaris cygwin
-#   ISO-8859-9              Y   glibc aix hpux irix osf solaris darwin cygwin
-#   ISO-8859-13                 glibc netbsd openbsd darwin cygwin
-#   ISO-8859-14                 glibc cygwin
-#   ISO-8859-15                 glibc aix osf solaris freebsd netbsd openbsd darwin cygwin
-#   KOI8-R                  Y   glibc solaris freebsd netbsd openbsd darwin
-#   KOI8-U                  Y   glibc freebsd netbsd openbsd darwin cygwin
-#   KOI8-T                      glibc
-#   CP437                       dos
-#   CP775                       dos
-#   CP850                       aix osf dos
-#   CP852                       dos
-#   CP855                       dos
-#   CP856                       aix
-#   CP857                       dos
-#   CP861                       dos
-#   CP862                       dos
-#   CP864                       dos
-#   CP865                       dos
-#   CP866                       freebsd netbsd openbsd darwin dos
-#   CP869                       dos
-#   CP874                       woe32 dos
-#   CP922                       aix
-#   CP932                       aix cygwin woe32 dos
-#   CP943                       aix
-#   CP949                       osf darwin woe32 dos
-#   CP950                       woe32 dos
-#   CP1046                      aix
-#   CP1124                      aix
-#   CP1125                      dos
-#   CP1129                      aix
-#   CP1131                      darwin
-#   CP1250                      woe32
-#   CP1251                      glibc solaris netbsd openbsd darwin cygwin woe32
-#   CP1252                      aix woe32
-#   CP1253                      woe32
-#   CP1254                      woe32
-#   CP1255                      glibc woe32
-#   CP1256                      woe32
-#   CP1257                      woe32
-#   GB2312                  Y   glibc aix hpux irix solaris freebsd netbsd darwin
-#   EUC-JP                  Y   glibc aix hpux irix osf solaris freebsd netbsd darwin
-#   EUC-KR                  Y   glibc aix hpux irix osf solaris freebsd netbsd darwin cygwin
-#   EUC-TW                      glibc aix hpux irix osf solaris netbsd
-#   BIG5                    Y   glibc aix hpux osf solaris freebsd netbsd darwin cygwin
-#   BIG5-HKSCS                  glibc solaris darwin
-#   GBK                         glibc aix osf solaris darwin cygwin woe32 dos
-#   GB18030                     glibc solaris netbsd darwin
-#   SHIFT_JIS               Y   hpux osf solaris freebsd netbsd darwin
-#   JOHAB                       glibc solaris woe32
-#   TIS-620                     glibc aix hpux osf solaris cygwin
-#   VISCII                  Y   glibc
-#   TCVN5712-1                  glibc
-#   ARMSCII-8                   glibc darwin
-#   GEORGIAN-PS                 glibc cygwin
-#   PT154                       glibc
-#   HP-ROMAN8                   hpux
-#   HP-ARABIC8                  hpux
-#   HP-GREEK8                   hpux
-#   HP-HEBREW8                  hpux
-#   HP-TURKISH8                 hpux
-#   HP-KANA8                    hpux
-#   DEC-KANJI                   osf
-#   DEC-HANYU                   osf
-#   UTF-8                   Y   glibc aix hpux osf solaris netbsd darwin cygwin
-#
-# Note: Names which are not marked as being a MIME name should not be used in
-# Internet protocols for information interchange (mail, news, etc.).
-#
-# Note: ASCII and ANSI_X3.4-1968 are synonymous canonical names. Applications
-# must understand both names and treat them as equivalent.
-#
-# The first argument passed to this file is the canonical host specification,
-#    CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM
-# or
-#    CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM
-
-host="$1"
-os=`echo "$host" | sed -e 's/^[^-]*-[^-]*-\(.*\)$/\1/'`
-echo "# This file contains a table of character encoding aliases,"
-echo "# suitable for operating system '${os}'."
-echo "# It was automatically generated from config.charset."
-# List of references, updated during installation:
-echo "# Packages using this file: "
-case "$os" in
-  linux-gnulibc1*)
-    # Linux libc5 doesn't have nl_langinfo(CODESET); therefore
-    # localcharset.c falls back to using the full locale name
-    # from the environment variables.
-    echo "C ASCII"
-    echo "POSIX ASCII"
-    for l in af af_ZA ca ca_ES da da_DK de de_AT de_BE de_CH de_DE de_LU \
-             en en_AU en_BW en_CA en_DK en_GB en_IE en_NZ en_US en_ZA \
-             en_ZW es es_AR es_BO es_CL es_CO es_DO es_EC es_ES es_GT \
-             es_HN es_MX es_PA es_PE es_PY es_SV es_US es_UY es_VE et \
-             et_EE eu eu_ES fi fi_FI fo fo_FO fr fr_BE fr_CA fr_CH fr_FR \
-             fr_LU ga ga_IE gl gl_ES id id_ID in in_ID is is_IS it it_CH \
-             it_IT kl kl_GL nl nl_BE nl_NL no no_NO pt pt_BR pt_PT sv \
-             sv_FI sv_SE; do
-      echo "$l ISO-8859-1"
-      echo "$l.iso-8859-1 ISO-8859-1"
-      echo "$l.iso-8859-15 ISO-8859-15"
-      echo "$l.iso-8859-15@euro ISO-8859-15"
-      echo "$l@euro ISO-8859-15"
-      echo "$l.cp-437 CP437"
-      echo "$l.cp-850 CP850"
-      echo "$l.cp-1252 CP1252"
-      echo "$l.cp-1252@euro CP1252"
-      #echo "$l.atari-st ATARI-ST" # not a commonly used encoding
-      echo "$l.utf-8 UTF-8"
-      echo "$l.utf-8@euro UTF-8"
-    done
-    for l in cs cs_CZ hr hr_HR hu hu_HU pl pl_PL ro ro_RO sk sk_SK sl \
-             sl_SI sr sr_CS sr_YU; do
-      echo "$l ISO-8859-2"
-      echo "$l.iso-8859-2 ISO-8859-2"
-      echo "$l.cp-852 CP852"
-      echo "$l.cp-1250 CP1250"
-      echo "$l.utf-8 UTF-8"
-    done
-    for l in mk mk_MK ru ru_RU; do
-      echo "$l ISO-8859-5"
-      echo "$l.iso-8859-5 ISO-8859-5"
-      echo "$l.koi8-r KOI8-R"
-      echo "$l.cp-866 CP866"
-      echo "$l.cp-1251 CP1251"
-      echo "$l.utf-8 UTF-8"
-    done
-    for l in ar ar_SA; do
-      echo "$l ISO-8859-6"
-      echo "$l.iso-8859-6 ISO-8859-6"
-      echo "$l.cp-864 CP864"
-      #echo "$l.cp-868 CP868" # not a commonly used encoding
-      echo "$l.cp-1256 CP1256"
-      echo "$l.utf-8 UTF-8"
-    done
-    for l in el el_GR gr gr_GR; do
-      echo "$l ISO-8859-7"
-      echo "$l.iso-8859-7 ISO-8859-7"
-      echo "$l.cp-869 CP869"
-      echo "$l.cp-1253 CP1253"
-      echo "$l.cp-1253@euro CP1253"
-      echo "$l.utf-8 UTF-8"
-      echo "$l.utf-8@euro UTF-8"
-    done
-    for l in he he_IL iw iw_IL; do
-      echo "$l ISO-8859-8"
-      echo "$l.iso-8859-8 ISO-8859-8"
-      echo "$l.cp-862 CP862"
-      echo "$l.cp-1255 CP1255"
-      echo "$l.utf-8 UTF-8"
-    done
-    for l in tr tr_TR; do
-      echo "$l ISO-8859-9"
-      echo "$l.iso-8859-9 ISO-8859-9"
-      echo "$l.cp-857 CP857"
-      echo "$l.cp-1254 CP1254"
-      echo "$l.utf-8 UTF-8"
-    done
-    for l in lt lt_LT lv lv_LV; do
-      #echo "$l BALTIC" # not a commonly used encoding, wrong encoding name
-      echo "$l ISO-8859-13"
-    done
-    for l in ru_UA uk uk_UA; do
-      echo "$l KOI8-U"
-    done
-    for l in zh zh_CN; do
-      #echo "$l GB_2312-80" # not a commonly used encoding, wrong encoding name
-      echo "$l GB2312"
-    done
-    for l in ja ja_JP ja_JP.EUC; do
-      echo "$l EUC-JP"
-    done
-    for l in ko ko_KR; do
-      echo "$l EUC-KR"
-    done
-    for l in th th_TH; do
-      echo "$l TIS-620"
-    done
-    for l in fa fa_IR; do
-      #echo "$l ISIRI-3342" # a broken encoding
-      echo "$l.utf-8 UTF-8"
-    done
-    ;;
-  linux* | *-gnu*)
-    # With glibc-2.1 or newer, we don't need any canonicalization,
-    # because glibc has iconv and both glibc and libiconv support all
-    # GNU canonical names directly. Therefore, the Makefile does not
-    # need to install the alias file at all.
-    # The following applies only to glibc-2.0.x and older libcs.
-    echo "ISO_646.IRV:1983 ASCII"
-    ;;
-  aix*)
-    echo "ISO8859-1 ISO-8859-1"
-    echo "ISO8859-2 ISO-8859-2"
-    echo "ISO8859-5 ISO-8859-5"
-    echo "ISO8859-6 ISO-8859-6"
-    echo "ISO8859-7 ISO-8859-7"
-    echo "ISO8859-8 ISO-8859-8"
-    echo "ISO8859-9 ISO-8859-9"
-    echo "ISO8859-15 ISO-8859-15"
-    echo "IBM-850 CP850"
-    echo "IBM-856 CP856"
-    echo "IBM-921 ISO-8859-13"
-    echo "IBM-922 CP922"
-    echo "IBM-932 CP932"
-    echo "IBM-943 CP943"
-    echo "IBM-1046 CP1046"
-    echo "IBM-1124 CP1124"
-    echo "IBM-1129 CP1129"
-    echo "IBM-1252 CP1252"
-    echo "IBM-eucCN GB2312"
-    echo "IBM-eucJP EUC-JP"
-    echo "IBM-eucKR EUC-KR"
-    echo "IBM-eucTW EUC-TW"
-    echo "big5 BIG5"
-    echo "GBK GBK"
-    echo "TIS-620 TIS-620"
-    echo "UTF-8 UTF-8"
-    ;;
-  hpux*)
-    echo "iso88591 ISO-8859-1"
-    echo "iso88592 ISO-8859-2"
-    echo "iso88595 ISO-8859-5"
-    echo "iso88596 ISO-8859-6"
-    echo "iso88597 ISO-8859-7"
-    echo "iso88598 ISO-8859-8"
-    echo "iso88599 ISO-8859-9"
-    echo "iso885915 ISO-8859-15"
-    echo "roman8 HP-ROMAN8"
-    echo "arabic8 HP-ARABIC8"
-    echo "greek8 HP-GREEK8"
-    echo "hebrew8 HP-HEBREW8"
-    echo "turkish8 HP-TURKISH8"
-    echo "kana8 HP-KANA8"
-    echo "tis620 TIS-620"
-    echo "big5 BIG5"
-    echo "eucJP EUC-JP"
-    echo "eucKR EUC-KR"
-    echo "eucTW EUC-TW"
-    echo "hp15CN GB2312"
-    #echo "ccdc ?" # what is this?
-    echo "SJIS SHIFT_JIS"
-    echo "utf8 UTF-8"
-    ;;
-  irix*)
-    echo "ISO8859-1 ISO-8859-1"
-    echo "ISO8859-2 ISO-8859-2"
-    echo "ISO8859-5 ISO-8859-5"
-    echo "ISO8859-7 ISO-8859-7"
-    echo "ISO8859-9 ISO-8859-9"
-    echo "eucCN GB2312"
-    echo "eucJP EUC-JP"
-    echo "eucKR EUC-KR"
-    echo "eucTW EUC-TW"
-    ;;
-  osf*)
-    echo "ISO8859-1 ISO-8859-1"
-    echo "ISO8859-2 ISO-8859-2"
-    echo "ISO8859-4 ISO-8859-4"
-    echo "ISO8859-5 ISO-8859-5"
-    echo "ISO8859-7 ISO-8859-7"
-    echo "ISO8859-8 ISO-8859-8"
-    echo "ISO8859-9 ISO-8859-9"
-    echo "ISO8859-15 ISO-8859-15"
-    echo "cp850 CP850"
-    echo "big5 BIG5"
-    echo "dechanyu DEC-HANYU"
-    echo "dechanzi GB2312"
-    echo "deckanji DEC-KANJI"
-    echo "deckorean EUC-KR"
-    echo "eucJP EUC-JP"
-    echo "eucKR EUC-KR"
-    echo "eucTW EUC-TW"
-    echo "GBK GBK"
-    echo "KSC5601 CP949"
-    echo "sdeckanji EUC-JP"
-    echo "SJIS SHIFT_JIS"
-    echo "TACTIS TIS-620"
-    echo "UTF-8 UTF-8"
-    ;;
-  solaris*)
-    echo "646 ASCII"
-    echo "ISO8859-1 ISO-8859-1"
-    echo "ISO8859-2 ISO-8859-2"
-    echo "ISO8859-3 ISO-8859-3"
-    echo "ISO8859-4 ISO-8859-4"
-    echo "ISO8859-5 ISO-8859-5"
-    echo "ISO8859-6 ISO-8859-6"
-    echo "ISO8859-7 ISO-8859-7"
-    echo "ISO8859-8 ISO-8859-8"
-    echo "ISO8859-9 ISO-8859-9"
-    echo "ISO8859-15 ISO-8859-15"
-    echo "koi8-r KOI8-R"
-    echo "ansi-1251 CP1251"
-    echo "BIG5 BIG5"
-    echo "Big5-HKSCS BIG5-HKSCS"
-    echo "gb2312 GB2312"
-    echo "GBK GBK"
-    echo "GB18030 GB18030"
-    echo "cns11643 EUC-TW"
-    echo "5601 EUC-KR"
-    echo "ko_KR.johap92 JOHAB"
-    echo "eucJP EUC-JP"
-    echo "PCK SHIFT_JIS"
-    echo "TIS620.2533 TIS-620"
-    #echo "sun_eu_greek ?" # what is this?
-    echo "UTF-8 UTF-8"
-    ;;
-  freebsd* | os2*)
-    # FreeBSD 4.2 doesn't have nl_langinfo(CODESET); therefore
-    # localcharset.c falls back to using the full locale name
-    # from the environment variables.
-    # Likewise for OS/2. OS/2 has XFree86 just like FreeBSD. Just
-    # reuse FreeBSD's locale data for OS/2.
-    echo "C ASCII"
-    echo "US-ASCII ASCII"
-    for l in la_LN lt_LN; do
-      echo "$l.ASCII ASCII"
-    done
-    for l in da_DK de_AT de_CH de_DE en_AU en_CA en_GB en_US es_ES \
-             fi_FI fr_BE fr_CA fr_CH fr_FR is_IS it_CH it_IT la_LN \
-             lt_LN nl_BE nl_NL no_NO pt_PT sv_SE; do
-      echo "$l.ISO_8859-1 ISO-8859-1"
-      echo "$l.DIS_8859-15 ISO-8859-15"
-    done
-    for l in cs_CZ hr_HR hu_HU la_LN lt_LN pl_PL sl_SI; do
-      echo "$l.ISO_8859-2 ISO-8859-2"
-    done
-    for l in la_LN lt_LT; do
-      echo "$l.ISO_8859-4 ISO-8859-4"
-    done
-    for l in ru_RU ru_SU; do
-      echo "$l.KOI8-R KOI8-R"
-      echo "$l.ISO_8859-5 ISO-8859-5"
-      echo "$l.CP866 CP866"
-    done
-    echo "uk_UA.KOI8-U KOI8-U"
-    echo "zh_TW.BIG5 BIG5"
-    echo "zh_TW.Big5 BIG5"
-    echo "zh_CN.EUC GB2312"
-    echo "ja_JP.EUC EUC-JP"
-    echo "ja_JP.SJIS SHIFT_JIS"
-    echo "ja_JP.Shift_JIS SHIFT_JIS"
-    echo "ko_KR.EUC EUC-KR"
-    ;;
-  netbsd*)
-    echo "646 ASCII"
-    echo "ISO8859-1 ISO-8859-1"
-    echo "ISO8859-2 ISO-8859-2"
-    echo "ISO8859-4 ISO-8859-4"
-    echo "ISO8859-5 ISO-8859-5"
-    echo "ISO8859-7 ISO-8859-7"
-    echo "ISO8859-13 ISO-8859-13"
-    echo "ISO8859-15 ISO-8859-15"
-    echo "eucCN GB2312"
-    echo "eucJP EUC-JP"
-    echo "eucKR EUC-KR"
-    echo "eucTW EUC-TW"
-    echo "BIG5 BIG5"
-    echo "SJIS SHIFT_JIS"
-    ;;
-  openbsd*)
-    echo "646 ASCII"
-    echo "ISO8859-1 ISO-8859-1"
-    echo "ISO8859-2 ISO-8859-2"
-    echo "ISO8859-4 ISO-8859-4"
-    echo "ISO8859-5 ISO-8859-5"
-    echo "ISO8859-7 ISO-8859-7"
-    echo "ISO8859-13 ISO-8859-13"
-    echo "ISO8859-15 ISO-8859-15"
-    ;;
-  darwin[56]*)
-    # Darwin 6.8 doesn't have nl_langinfo(CODESET); therefore
-    # localcharset.c falls back to using the full locale name
-    # from the environment variables.
-    echo "C ASCII"
-    for l in en_AU en_CA en_GB en_US la_LN; do
-      echo "$l.US-ASCII ASCII"
-    done
-    for l in da_DK de_AT de_CH de_DE en_AU en_CA en_GB en_US es_ES \
-             fi_FI fr_BE fr_CA fr_CH fr_FR is_IS it_CH it_IT nl_BE \
-             nl_NL no_NO pt_PT sv_SE; do
-      echo "$l ISO-8859-1"
-      echo "$l.ISO8859-1 ISO-8859-1"
-      echo "$l.ISO8859-15 ISO-8859-15"
-    done
-    for l in la_LN; do
-      echo "$l.ISO8859-1 ISO-8859-1"
-      echo "$l.ISO8859-15 ISO-8859-15"
-    done
-    for l in cs_CZ hr_HR hu_HU la_LN pl_PL sl_SI; do
-      echo "$l.ISO8859-2 ISO-8859-2"
-    done
-    for l in la_LN lt_LT; do
-      echo "$l.ISO8859-4 ISO-8859-4"
-    done
-    for l in ru_RU; do
-      echo "$l.KOI8-R KOI8-R"
-      echo "$l.ISO8859-5 ISO-8859-5"
-      echo "$l.CP866 CP866"
-    done
-    for l in bg_BG; do
-      echo "$l.CP1251 CP1251"
-    done
-    echo "uk_UA.KOI8-U KOI8-U"
-    echo "zh_TW.BIG5 BIG5"
-    echo "zh_TW.Big5 BIG5"
-    echo "zh_CN.EUC GB2312"
-    echo "ja_JP.EUC EUC-JP"
-    echo "ja_JP.SJIS SHIFT_JIS"
-    echo "ko_KR.EUC EUC-KR"
-    ;;
-  darwin*)
-    # Darwin 7.5 has nl_langinfo(CODESET), but sometimes its value is
-    # useless:
-    # - It returns the empty string when LANG is set to a locale of the
-    #   form ll_CC, although ll_CC/LC_CTYPE is a symlink to an UTF-8
-    #   LC_CTYPE file.
-    # - The environment variables LANG, LC_CTYPE, LC_ALL are not set by
-    #   the system; nl_langinfo(CODESET) returns "US-ASCII" in this case.
-    # - The documentation says:
-    #     "... all code that calls BSD system routines should ensure
-    #      that the const *char parameters of these routines are in UTF-8
-    #      encoding. All BSD system functions expect their string
-    #      parameters to be in UTF-8 encoding and nothing else."
-    #   It also says
-    #     "An additional caveat is that string parameters for files,
-    #      paths, and other file-system entities must be in canonical
-    #      UTF-8. In a canonical UTF-8 Unicode string, all decomposable
-    #      characters are decomposed ..."
-    #   but this is not true: You can pass non-decomposed UTF-8 strings
-    #   to file system functions, and it is the OS which will convert
-    #   them to decomposed UTF-8 before accessing the file system.
-    # - The Apple Terminal application displays UTF-8 by default.
-    # - However, other applications are free to use different encodings:
-    #   - xterm uses ISO-8859-1 by default.
-    #   - TextEdit uses MacRoman by default.
-    # We prefer UTF-8 over decomposed UTF-8-MAC because one should
-    # minimize the use of decomposed Unicode. Unfortunately, through the
-    # Darwin file system, decomposed UTF-8 strings are leaked into user
-    # space nevertheless.
-    # Then there are also the locales with encodings other than US-ASCII
-    # and UTF-8. These locales can be occasionally useful to users (e.g.
-    # when grepping through ISO-8859-1 encoded text files), when all their
-    # file names are in US-ASCII.
-    echo "ISO8859-1 ISO-8859-1"
-    echo "ISO8859-2 ISO-8859-2"
-    echo "ISO8859-4 ISO-8859-4"
-    echo "ISO8859-5 ISO-8859-5"
-    echo "ISO8859-7 ISO-8859-7"
-    echo "ISO8859-9 ISO-8859-9"
-    echo "ISO8859-13 ISO-8859-13"
-    echo "ISO8859-15 ISO-8859-15"
-    echo "KOI8-R KOI8-R"
-    echo "KOI8-U KOI8-U"
-    echo "CP866 CP866"
-    echo "CP949 CP949"
-    echo "CP1131 CP1131"
-    echo "CP1251 CP1251"
-    echo "eucCN GB2312"
-    echo "GB2312 GB2312"
-    echo "eucJP EUC-JP"
-    echo "eucKR EUC-KR"
-    echo "Big5 BIG5"
-    echo "Big5HKSCS BIG5-HKSCS"
-    echo "GBK GBK"
-    echo "GB18030 GB18030"
-    echo "SJIS SHIFT_JIS"
-    echo "ARMSCII-8 ARMSCII-8"
-    echo "PT154 PT154"
-    #echo "ISCII-DEV ?"
-    echo "* UTF-8"
-    ;;
-  beos* | haiku*)
-    # BeOS and Haiku have a single locale, and it has UTF-8 encoding.
-    echo "* UTF-8"
-    ;;
-  msdosdjgpp*)
-    # DJGPP 2.03 doesn't have nl_langinfo(CODESET); therefore
-    # localcharset.c falls back to using the full locale name
-    # from the environment variables.
-    echo "#"
-    echo "# The encodings given here may not all be correct."
-    echo "# If you find that the encoding given for your language and"
-    echo "# country is not the one your DOS machine actually uses, just"
-    echo "# correct it in this file, and send a mail to"
-    echo "# Juan Manuel Guerrero <juan.guerrero@gmx.de>"
-    echo "# and Bruno Haible <bruno@clisp.org>."
-    echo "#"
-    echo "C ASCII"
-    # ISO-8859-1 languages
-    echo "ca CP850"
-    echo "ca_ES CP850"
-    echo "da CP865"    # not CP850 ??
-    echo "da_DK CP865" # not CP850 ??
-    echo "de CP850"
-    echo "de_AT CP850"
-    echo "de_CH CP850"
-    echo "de_DE CP850"
-    echo "en CP850"
-    echo "en_AU CP850" # not CP437 ??
-    echo "en_CA CP850"
-    echo "en_GB CP850"
-    echo "en_NZ CP437"
-    echo "en_US CP437"
-    echo "en_ZA CP850" # not CP437 ??
-    echo "es CP850"
-    echo "es_AR CP850"
-    echo "es_BO CP850"
-    echo "es_CL CP850"
-    echo "es_CO CP850"
-    echo "es_CR CP850"
-    echo "es_CU CP850"
-    echo "es_DO CP850"
-    echo "es_EC CP850"
-    echo "es_ES CP850"
-    echo "es_GT CP850"
-    echo "es_HN CP850"
-    echo "es_MX CP850"
-    echo "es_NI CP850"
-    echo "es_PA CP850"
-    echo "es_PY CP850"
-    echo "es_PE CP850"
-    echo "es_SV CP850"
-    echo "es_UY CP850"
-    echo "es_VE CP850"
-    echo "et CP850"
-    echo "et_EE CP850"
-    echo "eu CP850"
-    echo "eu_ES CP850"
-    echo "fi CP850"
-    echo "fi_FI CP850"
-    echo "fr CP850"
-    echo "fr_BE CP850"
-    echo "fr_CA CP850"
-    echo "fr_CH CP850"
-    echo "fr_FR CP850"
-    echo "ga CP850"
-    echo "ga_IE CP850"
-    echo "gd CP850"
-    echo "gd_GB CP850"
-    echo "gl CP850"
-    echo "gl_ES CP850"
-    echo "id CP850"    # not CP437 ??
-    echo "id_ID CP850" # not CP437 ??
-    echo "is CP861"    # not CP850 ??
-    echo "is_IS CP861" # not CP850 ??
-    echo "it CP850"
-    echo "it_CH CP850"
-    echo "it_IT CP850"
-    echo "lt CP775"
-    echo "lt_LT CP775"
-    echo "lv CP775"
-    echo "lv_LV CP775"
-    echo "nb CP865"    # not CP850 ??
-    echo "nb_NO CP865" # not CP850 ??
-    echo "nl CP850"
-    echo "nl_BE CP850"
-    echo "nl_NL CP850"
-    echo "nn CP865"    # not CP850 ??
-    echo "nn_NO CP865" # not CP850 ??
-    echo "no CP865"    # not CP850 ??
-    echo "no_NO CP865" # not CP850 ??
-    echo "pt CP850"
-    echo "pt_BR CP850"
-    echo "pt_PT CP850"
-    echo "sv CP850"
-    echo "sv_SE CP850"
-    # ISO-8859-2 languages
-    echo "cs CP852"
-    echo "cs_CZ CP852"
-    echo "hr CP852"
-    echo "hr_HR CP852"
-    echo "hu CP852"
-    echo "hu_HU CP852"
-    echo "pl CP852"
-    echo "pl_PL CP852"
-    echo "ro CP852"
-    echo "ro_RO CP852"
-    echo "sk CP852"
-    echo "sk_SK CP852"
-    echo "sl CP852"
-    echo "sl_SI CP852"
-    echo "sq CP852"
-    echo "sq_AL CP852"
-    echo "sr CP852"    # CP852 or CP866 or CP855 ??
-    echo "sr_CS CP852" # CP852 or CP866 or CP855 ??
-    echo "sr_YU CP852" # CP852 or CP866 or CP855 ??
-    # ISO-8859-3 languages
-    echo "mt CP850"
-    echo "mt_MT CP850"
-    # ISO-8859-5 languages
-    echo "be CP866"
-    echo "be_BE CP866"
-    echo "bg CP866"    # not CP855 ??
-    echo "bg_BG CP866" # not CP855 ??
-    echo "mk CP866"    # not CP855 ??
-    echo "mk_MK CP866" # not CP855 ??
-    echo "ru CP866"
-    echo "ru_RU CP866"
-    echo "uk CP1125"
-    echo "uk_UA CP1125"
-    # ISO-8859-6 languages
-    echo "ar CP864"
-    echo "ar_AE CP864"
-    echo "ar_DZ CP864"
-    echo "ar_EG CP864"
-    echo "ar_IQ CP864"
-    echo "ar_IR CP864"
-    echo "ar_JO CP864"
-    echo "ar_KW CP864"
-    echo "ar_MA CP864"
-    echo "ar_OM CP864"
-    echo "ar_QA CP864"
-    echo "ar_SA CP864"
-    echo "ar_SY CP864"
-    # ISO-8859-7 languages
-    echo "el CP869"
-    echo "el_GR CP869"
-    # ISO-8859-8 languages
-    echo "he CP862"
-    echo "he_IL CP862"
-    # ISO-8859-9 languages
-    echo "tr CP857"
-    echo "tr_TR CP857"
-    # Japanese
-    echo "ja CP932"
-    echo "ja_JP CP932"
-    # Chinese
-    echo "zh_CN GBK"
-    echo "zh_TW CP950" # not CP938 ??
-    # Korean
-    echo "kr CP949"    # not CP934 ??
-    echo "kr_KR CP949" # not CP934 ??
-    # Thai
-    echo "th CP874"
-    echo "th_TH CP874"
-    # Other
-    echo "eo CP850"
-    echo "eo_EO CP850"
-    ;;
-esac
diff -urpN mc-4.8.23/intl/dcgettext.c mc-4.8.24/intl/dcgettext.c
--- mc-4.8.23/intl/dcgettext.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/dcgettext.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,56 +0,0 @@
-/* Implementation of the dcgettext(3) function.
-   Copyright (C) 1995-1999, 2000-2003 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include "gettextP.h"
-#ifdef _LIBC
-# include <libintl.h>
-#else
-# include "libgnuintl.h"
-#endif
-
-/* @@ end of prolog @@ */
-
-/* Names for the libintl functions are a problem.  They must not clash
-   with existing names and they should follow ANSI C.  But this source
-   code is also used in GNU C Library where the names have a __
-   prefix.  So we have to make a difference here.  */
-#ifdef _LIBC
-# define DCGETTEXT __dcgettext
-# define DCIGETTEXT __dcigettext
-#else
-# define DCGETTEXT libintl_dcgettext
-# define DCIGETTEXT libintl_dcigettext
-#endif
-
-/* Look up MSGID in the DOMAINNAME message catalog for the current CATEGORY
-   locale.  */
-char *
-DCGETTEXT (const char *domainname, const char *msgid, int category)
-{
-  return DCIGETTEXT (domainname, msgid, NULL, 0, 0, category);
-}
-
-#ifdef _LIBC
-/* Alias for function name in GNU C Library.  */
-INTDEF(__dcgettext)
-weak_alias (__dcgettext, dcgettext);
-#endif
diff -urpN mc-4.8.23/intl/dcigettext.c mc-4.8.24/intl/dcigettext.c
--- mc-4.8.23/intl/dcigettext.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/dcigettext.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,1705 +0,0 @@
-/* Implementation of the internal dcigettext function.
-   Copyright (C) 1995-1999, 2000-2009 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Tell glibc's <string.h> to provide a prototype for mempcpy().
-   This must come before <config.h> because <config.h> may include
-   <features.h>, and once <features.h> has been included, it's too late.  */
-#ifndef _GNU_SOURCE
-# define _GNU_SOURCE	1
-#endif
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <sys/types.h>
-
-#ifdef __GNUC__
-# define alloca __builtin_alloca
-# define HAVE_ALLOCA 1
-#else
-# ifdef _MSC_VER
-#  include <malloc.h>
-#  define alloca _alloca
-# else
-#  if defined HAVE_ALLOCA_H || defined _LIBC
-#   include <alloca.h>
-#  else
-#   ifdef _AIX
- #pragma alloca
-#   else
-#    ifndef alloca
-char *alloca ();
-#    endif
-#   endif
-#  endif
-# endif
-#endif
-
-#include <errno.h>
-#ifndef errno
-extern int errno;
-#endif
-#ifndef __set_errno
-# define __set_errno(val) errno = (val)
-#endif
-
-#include <stddef.h>
-#include <stdlib.h>
-#include <string.h>
-
-#if defined HAVE_UNISTD_H || defined _LIBC
-# include <unistd.h>
-#endif
-
-#include <locale.h>
-
-#ifdef _LIBC
-  /* Guess whether integer division by zero raises signal SIGFPE.
-     Set to 1 only if you know for sure.  In case of doubt, set to 0.  */
-# if defined __alpha__ || defined __arm__ || defined __i386__ \
-     || defined __m68k__ || defined __s390__
-#  define INTDIV0_RAISES_SIGFPE 1
-# else
-#  define INTDIV0_RAISES_SIGFPE 0
-# endif
-#endif
-#if !INTDIV0_RAISES_SIGFPE
-# include <signal.h>
-#endif
-
-#if defined HAVE_SYS_PARAM_H || defined _LIBC
-# include <sys/param.h>
-#endif
-
-#if !defined _LIBC
-# include "localcharset.h"
-#endif
-
-#include "gettextP.h"
-#include "plural-exp.h"
-#ifdef _LIBC
-# include <libintl.h>
-#else
-# ifdef IN_LIBGLOCALE
-#  include <libintl.h>
-# endif
-# include "libgnuintl.h"
-#endif
-#include "hash-string.h"
-
-/* Handle multi-threaded applications.  */
-#ifdef _LIBC
-# include <bits/libc-lock.h>
-# define gl_rwlock_define_initialized __libc_rwlock_define_initialized
-# define gl_rwlock_rdlock __libc_rwlock_rdlock
-# define gl_rwlock_wrlock __libc_rwlock_wrlock
-# define gl_rwlock_unlock __libc_rwlock_unlock
-#else
-# include "lock.h"
-#endif
-
-/* Alignment of types.  */
-#if defined __GNUC__ && __GNUC__ >= 2
-# define alignof(TYPE) __alignof__ (TYPE)
-#else
-# define alignof(TYPE) \
-    ((int) &((struct { char dummy1; TYPE dummy2; } *) 0)->dummy2)
-#endif
-
-/* Some compilers, like SunOS4 cc, don't have offsetof in <stddef.h>.  */
-#ifndef offsetof
-# define offsetof(type,ident) ((size_t)&(((type*)0)->ident))
-#endif
-
-/* @@ end of prolog @@ */
-
-#ifdef _LIBC
-/* Rename the non ANSI C functions.  This is required by the standard
-   because some ANSI C functions will require linking with this object
-   file and the name space must not be polluted.  */
-# define getcwd __getcwd
-# ifndef stpcpy
-#  define stpcpy __stpcpy
-# endif
-# define tfind __tfind
-#else
-# if !defined HAVE_GETCWD
-char *getwd ();
-#  define getcwd(buf, max) getwd (buf)
-# else
-#  if VMS
-#   define getcwd(buf, max) (getcwd) (buf, max, 0)
-#  else
-char *getcwd ();
-#  endif
-# endif
-# ifndef HAVE_STPCPY
-static char *stpcpy (char *dest, const char *src);
-# endif
-# ifndef HAVE_MEMPCPY
-static void *mempcpy (void *dest, const void *src, size_t n);
-# endif
-#endif
-
-/* Use a replacement if the system does not provide the `tsearch' function
-   family.  */
-#if HAVE_TSEARCH || defined _LIBC
-# include <search.h>
-#else
-# define tsearch libintl_tsearch
-# define tfind libintl_tfind
-# define tdelete libintl_tdelete
-# define twalk libintl_twalk
-# include "tsearch.h"
-#endif
-
-#ifdef _LIBC
-# define tsearch __tsearch
-#endif
-
-/* Amount to increase buffer size by in each try.  */
-#define PATH_INCR 32
-
-/* The following is from pathmax.h.  */
-/* Non-POSIX BSD systems might have gcc's limits.h, which doesn't define
-   PATH_MAX but might cause redefinition warnings when sys/param.h is
-   later included (as on MORE/BSD 4.3).  */
-#if defined _POSIX_VERSION || (defined HAVE_LIMITS_H && !defined __GNUC__)
-# include <limits.h>
-#endif
-
-#ifndef _POSIX_PATH_MAX
-# define _POSIX_PATH_MAX 255
-#endif
-
-#if !defined PATH_MAX && defined _PC_PATH_MAX
-# define PATH_MAX (pathconf ("/", _PC_PATH_MAX) < 1 ? 1024 : pathconf ("/", _PC_PATH_MAX))
-#endif
-
-/* Don't include sys/param.h if it already has been.  */
-#if defined HAVE_SYS_PARAM_H && !defined PATH_MAX && !defined MAXPATHLEN
-# include <sys/param.h>
-#endif
-
-#if !defined PATH_MAX && defined MAXPATHLEN
-# define PATH_MAX MAXPATHLEN
-#endif
-
-#ifndef PATH_MAX
-# define PATH_MAX _POSIX_PATH_MAX
-#endif
-
-/* Pathname support.
-   ISSLASH(C)           tests whether C is a directory separator character.
-   IS_ABSOLUTE_PATH(P)  tests whether P is an absolute path.  If it is not,
-                        it may be concatenated to a directory pathname.
-   IS_PATH_WITH_DIR(P)  tests whether P contains a directory specification.
- */
-#if defined _WIN32 || defined __WIN32__ || defined __CYGWIN__ || defined __EMX__ || defined __DJGPP__
-  /* Win32, Cygwin, OS/2, DOS */
-# define ISSLASH(C) ((C) == '/' || (C) == '\\')
-# define HAS_DEVICE(P) \
-    ((((P)[0] >= 'A' && (P)[0] <= 'Z') || ((P)[0] >= 'a' && (P)[0] <= 'z')) \
-     && (P)[1] == ':')
-# define IS_ABSOLUTE_PATH(P) (ISSLASH ((P)[0]) || HAS_DEVICE (P))
-# define IS_PATH_WITH_DIR(P) \
-    (strchr (P, '/') != NULL || strchr (P, '\\') != NULL || HAS_DEVICE (P))
-#else
-  /* Unix */
-# define ISSLASH(C) ((C) == '/')
-# define IS_ABSOLUTE_PATH(P) ISSLASH ((P)[0])
-# define IS_PATH_WITH_DIR(P) (strchr (P, '/') != NULL)
-#endif
-
-/* Whether to support different locales in different threads.  */
-#if defined _LIBC || HAVE_USELOCALE || defined IN_LIBGLOCALE
-# define HAVE_PER_THREAD_LOCALE
-#endif
-
-/* This is the type used for the search tree where known translations
-   are stored.  */
-struct known_translation_t
-{
-  /* Domain in which to search.  */
-  const char *domainname;
-
-  /* The category.  */
-  int category;
-
-#ifdef HAVE_PER_THREAD_LOCALE
-  /* Name of the relevant locale category, or "" for the global locale.  */
-  const char *localename;
-#endif
-
-#ifdef IN_LIBGLOCALE
-  /* The character encoding.  */
-  const char *encoding;
-#endif
-
-  /* State of the catalog counter at the point the string was found.  */
-  int counter;
-
-  /* Catalog where the string was found.  */
-  struct loaded_l10nfile *domain;
-
-  /* And finally the translation.  */
-  const char *translation;
-  size_t translation_length;
-
-  /* Pointer to the string in question.  */
-  union
-    {
-      char appended[ZERO];  /* used if domain != NULL */
-      const char *ptr;      /* used if domain == NULL */
-    }
-  msgid;
-};
-
-gl_rwlock_define_initialized (static, tree_lock)
-
-/* Root of the search tree with known translations.  */
-static void *root;
-
-/* Function to compare two entries in the table of known translations.  */
-static int
-transcmp (const void *p1, const void *p2)
-{
-  const struct known_translation_t *s1;
-  const struct known_translation_t *s2;
-  int result;
-
-  s1 = (const struct known_translation_t *) p1;
-  s2 = (const struct known_translation_t *) p2;
-
-  result = strcmp (s1->domain != NULL ? s1->msgid.appended : s1->msgid.ptr,
-		   s2->domain != NULL ? s2->msgid.appended : s2->msgid.ptr);
-  if (result == 0)
-    {
-      result = strcmp (s1->domainname, s2->domainname);
-      if (result == 0)
-	{
-#ifdef HAVE_PER_THREAD_LOCALE
-	  result = strcmp (s1->localename, s2->localename);
-	  if (result == 0)
-#endif
-	    {
-#ifdef IN_LIBGLOCALE
-	      result = strcmp (s1->encoding, s2->encoding);
-	      if (result == 0)
-#endif
-		/* We compare the category last (though this is the cheapest
-		   operation) since it is hopefully always the same (namely
-		   LC_MESSAGES).  */
-		result = s1->category - s2->category;
-	    }
-	}
-    }
-
-  return result;
-}
-
-/* Name of the default domain used for gettext(3) prior any call to
-   textdomain(3).  The default value for this is "messages".  */
-const char _nl_default_default_domain[] attribute_hidden = "messages";
-
-#ifndef IN_LIBGLOCALE
-/* Value used as the default domain for gettext(3).  */
-const char *_nl_current_default_domain attribute_hidden
-     = _nl_default_default_domain;
-#endif
-
-/* Contains the default location of the message catalogs.  */
-#if defined __EMX__
-extern const char _nl_default_dirname[];
-#else
-# ifdef _LIBC
-extern const char _nl_default_dirname[];
-libc_hidden_proto (_nl_default_dirname)
-# endif
-const char _nl_default_dirname[] = LOCALEDIR;
-# ifdef _LIBC
-libc_hidden_data_def (_nl_default_dirname)
-# endif
-#endif
-
-#ifndef IN_LIBGLOCALE
-/* List with bindings of specific domains created by bindtextdomain()
-   calls.  */
-struct binding *_nl_domain_bindings;
-#endif
-
-/* Prototypes for local functions.  */
-static char *plural_lookup (struct loaded_l10nfile *domain,
-			    unsigned long int n,
-			    const char *translation, size_t translation_len)
-     internal_function;
-
-#ifdef IN_LIBGLOCALE
-static const char *guess_category_value (int category,
-					 const char *categoryname,
-					 const char *localename)
-     internal_function;
-#else
-static const char *guess_category_value (int category,
-					 const char *categoryname)
-     internal_function;
-#endif
-
-#ifdef _LIBC
-# include "../locale/localeinfo.h"
-# define category_to_name(category) \
-  _nl_category_names.str + _nl_category_name_idxs[category]
-#else
-static const char *category_to_name (int category) internal_function;
-#endif
-#if (defined _LIBC || HAVE_ICONV) && !defined IN_LIBGLOCALE
-static const char *get_output_charset (struct binding *domainbinding)
-     internal_function;
-#endif
-
-
-/* For those loosing systems which don't have `alloca' we have to add
-   some additional code emulating it.  */
-#ifdef HAVE_ALLOCA
-/* Nothing has to be done.  */
-# define freea(p) /* nothing */
-# define ADD_BLOCK(list, address) /* nothing */
-# define FREE_BLOCKS(list) /* nothing */
-#else
-struct block_list
-{
-  void *address;
-  struct block_list *next;
-};
-# define ADD_BLOCK(list, addr)						      \
-  do {									      \
-    struct block_list *newp = (struct block_list *) malloc (sizeof (*newp));  \
-    /* If we cannot get a free block we cannot add the new element to	      \
-       the list.  */							      \
-    if (newp != NULL) {							      \
-      newp->address = (addr);						      \
-      newp->next = (list);						      \
-      (list) = newp;							      \
-    }									      \
-  } while (0)
-# define FREE_BLOCKS(list)						      \
-  do {									      \
-    while (list != NULL) {						      \
-      struct block_list *old = list;					      \
-      list = list->next;						      \
-      free (old->address);						      \
-      free (old);							      \
-    }									      \
-  } while (0)
-# undef alloca
-# define alloca(size) (malloc (size))
-# define freea(p) free (p)
-#endif	/* have alloca */
-
-
-#ifdef _LIBC
-/* List of blocks allocated for translations.  */
-typedef struct transmem_list
-{
-  struct transmem_list *next;
-  char data[ZERO];
-} transmem_block_t;
-static struct transmem_list *transmem_list;
-#else
-typedef unsigned char transmem_block_t;
-#endif
-
-
-/* Names for the libintl functions are a problem.  They must not clash
-   with existing names and they should follow ANSI C.  But this source
-   code is also used in GNU C Library where the names have a __
-   prefix.  So we have to make a difference here.  */
-#ifdef _LIBC
-# define DCIGETTEXT __dcigettext
-#else
-# define DCIGETTEXT libintl_dcigettext
-#endif
-
-/* Lock variable to protect the global data in the gettext implementation.  */
-gl_rwlock_define_initialized (, _nl_state_lock attribute_hidden)
-
-/* Checking whether the binaries runs SUID must be done and glibc provides
-   easier methods therefore we make a difference here.  */
-#ifdef _LIBC
-# define ENABLE_SECURE __libc_enable_secure
-# define DETERMINE_SECURE
-#else
-# ifndef HAVE_GETUID
-#  define getuid() 0
-# endif
-# ifndef HAVE_GETGID
-#  define getgid() 0
-# endif
-# ifndef HAVE_GETEUID
-#  define geteuid() getuid()
-# endif
-# ifndef HAVE_GETEGID
-#  define getegid() getgid()
-# endif
-static int enable_secure;
-# define ENABLE_SECURE (enable_secure == 1)
-# define DETERMINE_SECURE \
-  if (enable_secure == 0)						      \
-    {									      \
-      if (getuid () != geteuid () || getgid () != getegid ())		      \
-	enable_secure = 1;						      \
-      else								      \
-	enable_secure = -1;						      \
-    }
-#endif
-
-/* Get the function to evaluate the plural expression.  */
-#include "eval-plural.h"
-
-/* Look up MSGID in the DOMAINNAME message catalog for the current
-   CATEGORY locale and, if PLURAL is nonzero, search over string
-   depending on the plural form determined by N.  */
-#ifdef IN_LIBGLOCALE
-char *
-gl_dcigettext (const char *domainname,
-	       const char *msgid1, const char *msgid2,
-	       int plural, unsigned long int n,
-	       int category,
-	       const char *localename, const char *encoding)
-#else
-char *
-DCIGETTEXT (const char *domainname, const char *msgid1, const char *msgid2,
-	    int plural, unsigned long int n, int category)
-#endif
-{
-#ifndef HAVE_ALLOCA
-  struct block_list *block_list = NULL;
-#endif
-  struct loaded_l10nfile *domain;
-  struct binding *binding;
-  const char *categoryname;
-  const char *categoryvalue;
-  const char *dirname;
-  char *xdomainname;
-  char *single_locale;
-  char *retval;
-  size_t retlen;
-  int saved_errno;
-  struct known_translation_t search;
-  struct known_translation_t **foundp = NULL;
-#if defined HAVE_PER_THREAD_LOCALE && !defined IN_LIBGLOCALE
-  const char *localename;
-#endif
-  size_t domainname_len;
-
-  /* If no real MSGID is given return NULL.  */
-  if (msgid1 == NULL)
-    return NULL;
-
-#ifdef _LIBC
-  if (category < 0 || category >= __LC_LAST || category == LC_ALL)
-    /* Bogus.  */
-    return (plural == 0
-	    ? (char *) msgid1
-	    /* Use the Germanic plural rule.  */
-	    : n == 1 ? (char *) msgid1 : (char *) msgid2);
-#endif
-
-  /* Preserve the `errno' value.  */
-  saved_errno = errno;
-
-#ifdef _LIBC
-  __libc_rwlock_define (extern, __libc_setlocale_lock attribute_hidden)
-  __libc_rwlock_rdlock (__libc_setlocale_lock);
-#endif
-
-  gl_rwlock_rdlock (_nl_state_lock);
-
-  /* If DOMAINNAME is NULL, we are interested in the default domain.  If
-     CATEGORY is not LC_MESSAGES this might not make much sense but the
-     definition left this undefined.  */
-  if (domainname == NULL)
-    domainname = _nl_current_default_domain;
-
-  /* OS/2 specific: backward compatibility with older libintl versions  */
-#ifdef LC_MESSAGES_COMPAT
-  if (category == LC_MESSAGES_COMPAT)
-    category = LC_MESSAGES;
-#endif
-
-  /* Try to find the translation among those which we found at
-     some time.  */
-  search.domain = NULL;
-  search.msgid.ptr = msgid1;
-  search.domainname = domainname;
-  search.category = category;
-#ifdef HAVE_PER_THREAD_LOCALE
-# ifndef IN_LIBGLOCALE
-#  ifdef _LIBC
-  localename = _strdupa (_current_locale_name (category));
-#  else
-  categoryname = category_to_name (category);
-#   define CATEGORYNAME_INITIALIZED
-  localename = _nl_locale_name_thread_unsafe (category, categoryname);
-  if (localename == NULL)
-    localename = "";
-#  endif
-# endif
-  search.localename = localename;
-# ifdef IN_LIBGLOCALE
-  search.encoding = encoding;
-# endif
-
-  /* Since tfind/tsearch manage a balanced tree, concurrent tfind and
-     tsearch calls can be fatal.  */
-  gl_rwlock_rdlock (tree_lock);
-
-  foundp = (struct known_translation_t **) tfind (&search, &root, transcmp);
-
-  gl_rwlock_unlock (tree_lock);
-
-  if (foundp != NULL && (*foundp)->counter == _nl_msg_cat_cntr)
-    {
-      /* Now deal with plural.  */
-      if (plural)
-	retval = plural_lookup ((*foundp)->domain, n, (*foundp)->translation,
-				(*foundp)->translation_length);
-      else
-	retval = (char *) (*foundp)->translation;
-
-      gl_rwlock_unlock (_nl_state_lock);
-# ifdef _LIBC
-      __libc_rwlock_unlock (__libc_setlocale_lock);
-# endif
-      __set_errno (saved_errno);
-      return retval;
-    }
-#endif
-
-  /* See whether this is a SUID binary or not.  */
-  DETERMINE_SECURE;
-
-  /* First find matching binding.  */
-#ifdef IN_LIBGLOCALE
-  /* We can use a trivial binding, since _nl_find_msg will ignore it anyway,
-     and _nl_load_domain and _nl_find_domain just pass it through.  */
-  binding = NULL;
-  dirname = bindtextdomain (domainname, NULL);
-#else
-  for (binding = _nl_domain_bindings; binding != NULL; binding = binding->next)
-    {
-      int compare = strcmp (domainname, binding->domainname);
-      if (compare == 0)
-	/* We found it!  */
-	break;
-      if (compare < 0)
-	{
-	  /* It is not in the list.  */
-	  binding = NULL;
-	  break;
-	}
-    }
-
-  if (binding == NULL)
-    dirname = _nl_default_dirname;
-  else
-    {
-      dirname = binding->dirname;
-#endif
-      if (!IS_ABSOLUTE_PATH (dirname))
-	{
-	  /* We have a relative path.  Make it absolute now.  */
-	  size_t dirname_len = strlen (dirname) + 1;
-	  size_t path_max;
-	  char *resolved_dirname;
-	  char *ret;
-
-	  path_max = (unsigned int) PATH_MAX;
-	  path_max += 2;		/* The getcwd docs say to do this.  */
-
-	  for (;;)
-	    {
-	      resolved_dirname = (char *) alloca (path_max + dirname_len);
-	      ADD_BLOCK (block_list, tmp_dirname);
-
-	      __set_errno (0);
-	      ret = getcwd (resolved_dirname, path_max);
-	      if (ret != NULL || errno != ERANGE)
-		break;
-
-	      path_max += path_max / 2;
-	      path_max += PATH_INCR;
-	    }
-
-	  if (ret == NULL)
-	    /* We cannot get the current working directory.  Don't signal an
-	       error but simply return the default string.  */
-	    goto return_untranslated;
-
-	  stpcpy (stpcpy (strchr (resolved_dirname, '\0'), "/"), dirname);
-	  dirname = resolved_dirname;
-	}
-#ifndef IN_LIBGLOCALE
-    }
-#endif
-
-  /* Now determine the symbolic name of CATEGORY and its value.  */
-#ifndef CATEGORYNAME_INITIALIZED
-  categoryname = category_to_name (category);
-#endif
-#ifdef IN_LIBGLOCALE
-  categoryvalue = guess_category_value (category, categoryname, localename);
-#else
-  categoryvalue = guess_category_value (category, categoryname);
-#endif
-
-  domainname_len = strlen (domainname);
-  xdomainname = (char *) alloca (strlen (categoryname)
-				 + domainname_len + 5);
-  ADD_BLOCK (block_list, xdomainname);
-
-  stpcpy ((char *) mempcpy (stpcpy (stpcpy (xdomainname, categoryname), "/"),
-			    domainname, domainname_len),
-	  ".mo");
-
-  /* Creating working area.  */
-  single_locale = (char *) alloca (strlen (categoryvalue) + 1);
-  ADD_BLOCK (block_list, single_locale);
-
-
-  /* Search for the given string.  This is a loop because we perhaps
-     got an ordered list of languages to consider for the translation.  */
-  while (1)
-    {
-      /* Make CATEGORYVALUE point to the next element of the list.  */
-      while (categoryvalue[0] != '\0' && categoryvalue[0] == ':')
-	++categoryvalue;
-      if (categoryvalue[0] == '\0')
-	{
-	  /* The whole contents of CATEGORYVALUE has been searched but
-	     no valid entry has been found.  We solve this situation
-	     by implicitly appending a "C" entry, i.e. no translation
-	     will take place.  */
-	  single_locale[0] = 'C';
-	  single_locale[1] = '\0';
-	}
-      else
-	{
-	  char *cp = single_locale;
-	  while (categoryvalue[0] != '\0' && categoryvalue[0] != ':')
-	    *cp++ = *categoryvalue++;
-	  *cp = '\0';
-
-	  /* When this is a SUID binary we must not allow accessing files
-	     outside the dedicated directories.  */
-	  if (ENABLE_SECURE && IS_PATH_WITH_DIR (single_locale))
-	    /* Ingore this entry.  */
-	    continue;
-	}
-
-      /* If the current locale value is C (or POSIX) we don't load a
-	 domain.  Return the MSGID.  */
-      if (strcmp (single_locale, "C") == 0
-	  || strcmp (single_locale, "POSIX") == 0)
-	break;
-
-      /* Find structure describing the message catalog matching the
-	 DOMAINNAME and CATEGORY.  */
-      domain = _nl_find_domain (dirname, single_locale, xdomainname, binding);
-
-      if (domain != NULL)
-	{
-#if defined IN_LIBGLOCALE
-	  retval = _nl_find_msg (domain, binding, encoding, msgid1, &retlen);
-#else
-	  retval = _nl_find_msg (domain, binding, msgid1, 1, &retlen);
-#endif
-
-	  if (retval == NULL)
-	    {
-	      int cnt;
-
-	      for (cnt = 0; domain->successor[cnt] != NULL; ++cnt)
-		{
-#if defined IN_LIBGLOCALE
-		  retval = _nl_find_msg (domain->successor[cnt], binding,
-					 encoding, msgid1, &retlen);
-#else
-		  retval = _nl_find_msg (domain->successor[cnt], binding,
-					 msgid1, 1, &retlen);
-#endif
-
-		  if (retval != NULL)
-		    {
-		      domain = domain->successor[cnt];
-		      break;
-		    }
-		}
-	    }
-
-	  /* Returning -1 means that some resource problem exists
-	     (likely memory) and that the strings could not be
-	     converted.  Return the original strings.  */
-	  if (__builtin_expect (retval == (char *) -1, 0))
-	    break;
-
-	  if (retval != NULL)
-	    {
-	      /* Found the translation of MSGID1 in domain DOMAIN:
-		 starting at RETVAL, RETLEN bytes.  */
-	      FREE_BLOCKS (block_list);
-	      if (foundp == NULL)
-		{
-		  /* Create a new entry and add it to the search tree.  */
-		  size_t msgid_len;
-		  size_t size;
-		  struct known_translation_t *newp;
-
-		  msgid_len = strlen (msgid1) + 1;
-		  size = offsetof (struct known_translation_t, msgid)
-			 + msgid_len + domainname_len + 1;
-#ifdef HAVE_PER_THREAD_LOCALE
-		  size += strlen (localename) + 1;
-#endif
-		  newp = (struct known_translation_t *) malloc (size);
-		  if (newp != NULL)
-		    {
-		      char *new_domainname;
-#ifdef HAVE_PER_THREAD_LOCALE
-		      char *new_localename;
-#endif
-
-		      new_domainname =
-			(char *) mempcpy (newp->msgid.appended, msgid1,
-					  msgid_len);
-		      memcpy (new_domainname, domainname, domainname_len + 1);
-#ifdef HAVE_PER_THREAD_LOCALE
-		      new_localename = new_domainname + domainname_len + 1;
-		      strcpy (new_localename, localename);
-#endif
-		      newp->domainname = new_domainname;
-		      newp->category = category;
-#ifdef HAVE_PER_THREAD_LOCALE
-		      newp->localename = new_localename;
-#endif
-#ifdef IN_LIBGLOCALE
-		      newp->encoding = encoding;
-#endif
-		      newp->counter = _nl_msg_cat_cntr;
-		      newp->domain = domain;
-		      newp->translation = retval;
-		      newp->translation_length = retlen;
-
-		      gl_rwlock_wrlock (tree_lock);
-
-		      /* Insert the entry in the search tree.  */
-		      foundp = (struct known_translation_t **)
-			tsearch (newp, &root, transcmp);
-
-		      gl_rwlock_unlock (tree_lock);
-
-		      if (foundp == NULL
-			  || __builtin_expect (*foundp != newp, 0))
-			/* The insert failed.  */
-			free (newp);
-		    }
-		}
-	      else
-		{
-		  /* We can update the existing entry.  */
-		  (*foundp)->counter = _nl_msg_cat_cntr;
-		  (*foundp)->domain = domain;
-		  (*foundp)->translation = retval;
-		  (*foundp)->translation_length = retlen;
-		}
-
-	      __set_errno (saved_errno);
-
-	      /* Now deal with plural.  */
-	      if (plural)
-		retval = plural_lookup (domain, n, retval, retlen);
-
-	      gl_rwlock_unlock (_nl_state_lock);
-#ifdef _LIBC
-	      __libc_rwlock_unlock (__libc_setlocale_lock);
-#endif
-	      return retval;
-	    }
-	}
-    }
-
- return_untranslated:
-  /* Return the untranslated MSGID.  */
-  FREE_BLOCKS (block_list);
-  gl_rwlock_unlock (_nl_state_lock);
-#ifdef _LIBC
-  __libc_rwlock_unlock (__libc_setlocale_lock);
-#endif
-#ifndef _LIBC
-  if (!ENABLE_SECURE)
-    {
-      extern void _nl_log_untranslated (const char *logfilename,
-					const char *domainname,
-					const char *msgid1, const char *msgid2,
-					int plural);
-      const char *logfilename = getenv ("GETTEXT_LOG_UNTRANSLATED");
-
-      if (logfilename != NULL && logfilename[0] != '\0')
-	_nl_log_untranslated (logfilename, domainname, msgid1, msgid2, plural);
-    }
-#endif
-  __set_errno (saved_errno);
-  return (plural == 0
-	  ? (char *) msgid1
-	  /* Use the Germanic plural rule.  */
-	  : n == 1 ? (char *) msgid1 : (char *) msgid2);
-}
-
-
-/* Look up the translation of msgid within DOMAIN_FILE and DOMAINBINDING.
-   Return it if found.  Return NULL if not found or in case of a conversion
-   failure (problem in the particular message catalog).  Return (char *) -1
-   in case of a memory allocation failure during conversion (only if
-   ENCODING != NULL resp. CONVERT == true).  */
-char *
-internal_function
-#ifdef IN_LIBGLOCALE
-_nl_find_msg (struct loaded_l10nfile *domain_file,
-	      struct binding *domainbinding, const char *encoding,
-	      const char *msgid,
-	      size_t *lengthp)
-#else
-_nl_find_msg (struct loaded_l10nfile *domain_file,
-	      struct binding *domainbinding,
-	      const char *msgid, int convert,
-	      size_t *lengthp)
-#endif
-{
-  struct loaded_domain *domain;
-  nls_uint32 nstrings;
-  size_t act;
-  char *result;
-  size_t resultlen;
-
-  if (domain_file->decided <= 0)
-    _nl_load_domain (domain_file, domainbinding);
-
-  if (domain_file->data == NULL)
-    return NULL;
-
-  domain = (struct loaded_domain *) domain_file->data;
-
-  nstrings = domain->nstrings;
-
-  /* Locate the MSGID and its translation.  */
-  if (domain->hash_tab != NULL)
-    {
-      /* Use the hashing table.  */
-      nls_uint32 len = strlen (msgid);
-      nls_uint32 hash_val = __hash_string (msgid);
-      nls_uint32 idx = hash_val % domain->hash_size;
-      nls_uint32 incr = 1 + (hash_val % (domain->hash_size - 2));
-
-      while (1)
-	{
-	  nls_uint32 nstr =
-	    W (domain->must_swap_hash_tab, domain->hash_tab[idx]);
-
-	  if (nstr == 0)
-	    /* Hash table entry is empty.  */
-	    return NULL;
-
-	  nstr--;
-
-	  /* Compare msgid with the original string at index nstr.
-	     We compare the lengths with >=, not ==, because plural entries
-	     are represented by strings with an embedded NUL.  */
-	  if (nstr < nstrings
-	      ? W (domain->must_swap, domain->orig_tab[nstr].length) >= len
-		&& (strcmp (msgid,
-			    domain->data + W (domain->must_swap,
-					      domain->orig_tab[nstr].offset))
-		    == 0)
-	      : domain->orig_sysdep_tab[nstr - nstrings].length > len
-		&& (strcmp (msgid,
-			    domain->orig_sysdep_tab[nstr - nstrings].pointer)
-		    == 0))
-	    {
-	      act = nstr;
-	      goto found;
-	    }
-
-	  if (idx >= domain->hash_size - incr)
-	    idx -= domain->hash_size - incr;
-	  else
-	    idx += incr;
-	}
-      /* NOTREACHED */
-    }
-  else
-    {
-      /* Try the default method:  binary search in the sorted array of
-	 messages.  */
-      size_t top, bottom;
-
-      bottom = 0;
-      top = nstrings;
-      while (bottom < top)
-	{
-	  int cmp_val;
-
-	  act = (bottom + top) / 2;
-	  cmp_val = strcmp (msgid, (domain->data
-				    + W (domain->must_swap,
-					 domain->orig_tab[act].offset)));
-	  if (cmp_val < 0)
-	    top = act;
-	  else if (cmp_val > 0)
-	    bottom = act + 1;
-	  else
-	    goto found;
-	}
-      /* No translation was found.  */
-      return NULL;
-    }
-
- found:
-  /* The translation was found at index ACT.  If we have to convert the
-     string to use a different character set, this is the time.  */
-  if (act < nstrings)
-    {
-      result = (char *)
-	(domain->data + W (domain->must_swap, domain->trans_tab[act].offset));
-      resultlen = W (domain->must_swap, domain->trans_tab[act].length) + 1;
-    }
-  else
-    {
-      result = (char *) domain->trans_sysdep_tab[act - nstrings].pointer;
-      resultlen = domain->trans_sysdep_tab[act - nstrings].length;
-    }
-
-#if defined _LIBC || HAVE_ICONV
-# ifdef IN_LIBGLOCALE
-  if (encoding != NULL)
-# else
-  if (convert)
-# endif
-    {
-      /* We are supposed to do a conversion.  */
-# ifndef IN_LIBGLOCALE
-      const char *encoding = get_output_charset (domainbinding);
-# endif
-      size_t nconversions;
-      struct converted_domain *convd;
-      size_t i;
-
-      /* Protect against reallocation of the table.  */
-      gl_rwlock_rdlock (domain->conversions_lock);
-
-      /* Search whether a table with converted translations for this
-	 encoding has already been allocated.  */
-      nconversions = domain->nconversions;
-      convd = NULL;
-
-      for (i = nconversions; i > 0; )
-	{
-	  i--;
-	  if (strcmp (domain->conversions[i].encoding, encoding) == 0)
-	    {
-	      convd = &domain->conversions[i];
-	      break;
-	    }
-	}
-
-      gl_rwlock_unlock (domain->conversions_lock);
-
-      if (convd == NULL)
-	{
-	  /* We have to allocate a new conversions table.  */
-	  gl_rwlock_wrlock (domain->conversions_lock);
-	  nconversions = domain->nconversions;
-
-	  /* Maybe in the meantime somebody added the translation.
-	     Recheck.  */
-	  for (i = nconversions; i > 0; )
-	    {
-	      i--;
-	      if (strcmp (domain->conversions[i].encoding, encoding) == 0)
-		{
-		  convd = &domain->conversions[i];
-		  goto found_convd;
-		}
-	    }
-
-	  {
-	    /* Allocate a table for the converted translations for this
-	       encoding.  */
-	    struct converted_domain *new_conversions =
-	      (struct converted_domain *)
-	      (domain->conversions != NULL
-	       ? realloc (domain->conversions,
-			  (nconversions + 1) * sizeof (struct converted_domain))
-	       : malloc ((nconversions + 1) * sizeof (struct converted_domain)));
-
-	    if (__builtin_expect (new_conversions == NULL, 0))
-	      {
-		/* Nothing we can do, no more memory.  We cannot use the
-		   translation because it might be encoded incorrectly.  */
-	      unlock_fail:
-		gl_rwlock_unlock (domain->conversions_lock);
-		return (char *) -1;
-	      }
-
-	    domain->conversions = new_conversions;
-
-	    /* Copy the 'encoding' string to permanent storage.  */
-	    encoding = strdup (encoding);
-	    if (__builtin_expect (encoding == NULL, 0))
-	      /* Nothing we can do, no more memory.  We cannot use the
-		 translation because it might be encoded incorrectly.  */
-	      goto unlock_fail;
-
-	    convd = &new_conversions[nconversions];
-	    convd->encoding = encoding;
-
-	    /* Find out about the character set the file is encoded with.
-	       This can be found (in textual form) in the entry "".  If this
-	       entry does not exist or if this does not contain the 'charset='
-	       information, we will assume the charset matches the one the
-	       current locale and we don't have to perform any conversion.  */
-# ifdef _LIBC
-	    convd->conv = (__gconv_t) -1;
-# else
-#  if HAVE_ICONV
-	    convd->conv = (iconv_t) -1;
-#  endif
-# endif
-	    {
-	      char *nullentry;
-	      size_t nullentrylen;
-
-	      /* Get the header entry.  This is a recursion, but it doesn't
-		 reallocate domain->conversions because we pass
-		 encoding = NULL or convert = 0, respectively.  */
-	      nullentry =
-# ifdef IN_LIBGLOCALE
-		_nl_find_msg (domain_file, domainbinding, NULL, "",
-			      &nullentrylen);
-# else
-		_nl_find_msg (domain_file, domainbinding, "", 0, &nullentrylen);
-# endif
-
-	      if (nullentry != NULL)
-		{
-		  const char *charsetstr;
-
-		  charsetstr = strstr (nullentry, "charset=");
-		  if (charsetstr != NULL)
-		    {
-		      size_t len;
-		      char *charset;
-		      const char *outcharset;
-
-		      charsetstr += strlen ("charset=");
-		      len = strcspn (charsetstr, " \t\n");
-
-		      charset = (char *) alloca (len + 1);
-# if defined _LIBC || HAVE_MEMPCPY
-		      *((char *) mempcpy (charset, charsetstr, len)) = '\0';
-# else
-		      memcpy (charset, charsetstr, len);
-		      charset[len] = '\0';
-# endif
-
-		      outcharset = encoding;
-
-# ifdef _LIBC
-		      /* We always want to use transliteration.  */
-		      outcharset = norm_add_slashes (outcharset, "TRANSLIT");
-		      charset = norm_add_slashes (charset, "");
-		      int r = __gconv_open (outcharset, charset, &convd->conv,
-					    GCONV_AVOID_NOCONV);
-		      if (__builtin_expect (r != __GCONV_OK, 0))
-			{
-			  /* If the output encoding is the same there is
-			     nothing to do.  Otherwise do not use the
-			     translation at all.  */
-			  if (__builtin_expect (r != __GCONV_NULCONV, 1))
-			    {
-			      gl_rwlock_unlock (domain->conversions_lock);
-			      free ((char *) encoding);
-			      return NULL;
-			    }
-
-			  convd->conv = (__gconv_t) -1;
-			}
-# else
-#  if HAVE_ICONV
-		      /* When using GNU libc >= 2.2 or GNU libiconv >= 1.5,
-			 we want to use transliteration.  */
-#   if (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 2) || __GLIBC__ > 2 \
-       || _LIBICONV_VERSION >= 0x0105
-		      if (strchr (outcharset, '/') == NULL)
-			{
-			  char *tmp;
-
-			  len = strlen (outcharset);
-			  tmp = (char *) alloca (len + 10 + 1);
-			  memcpy (tmp, outcharset, len);
-			  memcpy (tmp + len, "//TRANSLIT", 10 + 1);
-			  outcharset = tmp;
-
-			  convd->conv = iconv_open (outcharset, charset);
-
-			  freea (outcharset);
-			}
-		      else
-#   endif
-			convd->conv = iconv_open (outcharset, charset);
-#  endif
-# endif
-
-		      freea (charset);
-		    }
-		}
-	    }
-	    convd->conv_tab = NULL;
-	    /* Here domain->conversions is still == new_conversions.  */
-	    domain->nconversions++;
-	  }
-
-	found_convd:
-	  gl_rwlock_unlock (domain->conversions_lock);
-	}
-
-      if (
-# ifdef _LIBC
-	  convd->conv != (__gconv_t) -1
-# else
-#  if HAVE_ICONV
-	  convd->conv != (iconv_t) -1
-#  endif
-# endif
-	  )
-	{
-	  /* We are supposed to do a conversion.  First allocate an
-	     appropriate table with the same structure as the table
-	     of translations in the file, where we can put the pointers
-	     to the converted strings in.
-	     There is a slight complication with plural entries.  They
-	     are represented by consecutive NUL terminated strings.  We
-	     handle this case by converting RESULTLEN bytes, including
-	     NULs.  */
-
-	  /* This lock primarily protects the memory management variables
-	     freemem, freemem_size.  It also protects write accesses to
-	     convd->conv_tab.  It's not worth using a separate lock (such
-	     as domain->conversions_lock) for this purpose, because when
-	     modifying convd->conv_tab, we also need to lock freemem,
-	     freemem_size for most of the time.  */
-	  __libc_lock_define_initialized (static, lock)
-
-	  if (__builtin_expect (convd->conv_tab == NULL, 0))
-	    {
-	      __libc_lock_lock (lock);
-	      if (convd->conv_tab == NULL)
-		{
-		  convd->conv_tab =
-		    (char **) calloc (nstrings + domain->n_sysdep_strings,
-				      sizeof (char *));
-		  if (convd->conv_tab != NULL)
-		    goto not_translated_yet;
-		  /* Mark that we didn't succeed allocating a table.  */
-		  convd->conv_tab = (char **) -1;
-		}
-	      __libc_lock_unlock (lock);
-	    }
-
-	  if (__builtin_expect (convd->conv_tab == (char **) -1, 0))
-	    /* Nothing we can do, no more memory.  We cannot use the
-	       translation because it might be encoded incorrectly.  */
-	    return (char *) -1;
-
-	  if (convd->conv_tab[act] == NULL)
-	    {
-	      /* We haven't used this string so far, so it is not
-		 translated yet.  Do this now.  */
-	      /* We use a bit more efficient memory handling.
-		 We allocate always larger blocks which get used over
-		 time.  This is faster than many small allocations.   */
-# define INITIAL_BLOCK_SIZE	4080
-	      static unsigned char *freemem;
-	      static size_t freemem_size;
-
-	      const unsigned char *inbuf;
-	      unsigned char *outbuf;
-	      int malloc_count;
-# ifndef _LIBC
-	      transmem_block_t *transmem_list;
-# endif
-
-	      __libc_lock_lock (lock);
-	    not_translated_yet:
-
-	      inbuf = (const unsigned char *) result;
-	      outbuf = freemem + sizeof (size_t);
-# ifndef _LIBC
-	      transmem_list = NULL;
-# endif
-
-	      malloc_count = 0;
-	      while (1)
-		{
-		  transmem_block_t *newmem;
-# ifdef _LIBC
-		  size_t non_reversible;
-		  int res;
-
-		  if (freemem_size < sizeof (size_t))
-		    goto resize_freemem;
-
-		  res = __gconv (convd->conv,
-				 &inbuf, inbuf + resultlen,
-				 &outbuf,
-				 outbuf + freemem_size - sizeof (size_t),
-				 &non_reversible);
-
-		  if (res == __GCONV_OK || res == __GCONV_EMPTY_INPUT)
-		    break;
-
-		  if (res != __GCONV_FULL_OUTPUT)
-		    {
-		      /* We should not use the translation at all, it
-			 is incorrectly encoded.  */
-		      __libc_lock_unlock (lock);
-		      return NULL;
-		    }
-
-		  inbuf = (const unsigned char *) result;
-# else
-#  if HAVE_ICONV
-		  const char *inptr = (const char *) inbuf;
-		  size_t inleft = resultlen;
-		  char *outptr = (char *) outbuf;
-		  size_t outleft;
-
-		  if (freemem_size < sizeof (size_t))
-		    goto resize_freemem;
-
-		  outleft = freemem_size - sizeof (size_t);
-		  if (iconv (convd->conv,
-			     (ICONV_CONST char **) &inptr, &inleft,
-			     &outptr, &outleft)
-		      != (size_t) (-1))
-		    {
-		      outbuf = (unsigned char *) outptr;
-		      break;
-		    }
-		  if (errno != E2BIG)
-		    {
-		      __libc_lock_unlock (lock);
-		      return NULL;
-		    }
-#  endif
-# endif
-
-		resize_freemem:
-		  /* We must allocate a new buffer or resize the old one.  */
-		  if (malloc_count > 0)
-		    {
-		      ++malloc_count;
-		      freemem_size = malloc_count * INITIAL_BLOCK_SIZE;
-		      newmem = (transmem_block_t *) realloc (transmem_list,
-							     freemem_size);
-# ifdef _LIBC
-		      if (newmem != NULL)
-			transmem_list = transmem_list->next;
-		      else
-			{
-			  struct transmem_list *old = transmem_list;
-
-			  transmem_list = transmem_list->next;
-			  free (old);
-			}
-# endif
-		    }
-		  else
-		    {
-		      malloc_count = 1;
-		      freemem_size = INITIAL_BLOCK_SIZE;
-		      newmem = (transmem_block_t *) malloc (freemem_size);
-		    }
-		  if (__builtin_expect (newmem == NULL, 0))
-		    {
-		      freemem = NULL;
-		      freemem_size = 0;
-		      __libc_lock_unlock (lock);
-		      return (char *) -1;
-		    }
-
-# ifdef _LIBC
-		  /* Add the block to the list of blocks we have to free
-		     at some point.  */
-		  newmem->next = transmem_list;
-		  transmem_list = newmem;
-
-		  freemem = (unsigned char *) newmem->data;
-		  freemem_size -= offsetof (struct transmem_list, data);
-# else
-		  transmem_list = newmem;
-		  freemem = newmem;
-# endif
-
-		  outbuf = freemem + sizeof (size_t);
-		}
-
-	      /* We have now in our buffer a converted string.  Put this
-		 into the table of conversions.  */
-	      *(size_t *) freemem = outbuf - freemem - sizeof (size_t);
-	      convd->conv_tab[act] = (char *) freemem;
-	      /* Shrink freemem, but keep it aligned.  */
-	      freemem_size -= outbuf - freemem;
-	      freemem = outbuf;
-	      freemem += freemem_size & (alignof (size_t) - 1);
-	      freemem_size = freemem_size & ~ (alignof (size_t) - 1);
-
-	      __libc_lock_unlock (lock);
-	    }
-
-	  /* Now convd->conv_tab[act] contains the translation of all
-	     the plural variants.  */
-	  result = convd->conv_tab[act] + sizeof (size_t);
-	  resultlen = *(size_t *) convd->conv_tab[act];
-	}
-    }
-
-  /* The result string is converted.  */
-
-#endif /* _LIBC || HAVE_ICONV */
-
-  *lengthp = resultlen;
-  return result;
-}
-
-
-/* Look up a plural variant.  */
-static char *
-internal_function
-plural_lookup (struct loaded_l10nfile *domain, unsigned long int n,
-	       const char *translation, size_t translation_len)
-{
-  struct loaded_domain *domaindata = (struct loaded_domain *) domain->data;
-  unsigned long int index;
-  const char *p;
-
-  index = plural_eval (domaindata->plural, n);
-  if (index >= domaindata->nplurals)
-    /* This should never happen.  It means the plural expression and the
-       given maximum value do not match.  */
-    index = 0;
-
-  /* Skip INDEX strings at TRANSLATION.  */
-  p = translation;
-  while (index-- > 0)
-    {
-#ifdef _LIBC
-      p = __rawmemchr (p, '\0');
-#else
-      p = strchr (p, '\0');
-#endif
-      /* And skip over the NUL byte.  */
-      p++;
-
-      if (p >= translation + translation_len)
-	/* This should never happen.  It means the plural expression
-	   evaluated to a value larger than the number of variants
-	   available for MSGID1.  */
-	return (char *) translation;
-    }
-  return (char *) p;
-}
-
-#ifndef _LIBC
-/* Return string representation of locale CATEGORY.  */
-static const char *
-internal_function
-category_to_name (int category)
-{
-  const char *retval;
-
-  switch (category)
-  {
-#ifdef LC_COLLATE
-  case LC_COLLATE:
-    retval = "LC_COLLATE";
-    break;
-#endif
-#ifdef LC_CTYPE
-  case LC_CTYPE:
-    retval = "LC_CTYPE";
-    break;
-#endif
-#ifdef LC_MONETARY
-  case LC_MONETARY:
-    retval = "LC_MONETARY";
-    break;
-#endif
-#ifdef LC_NUMERIC
-  case LC_NUMERIC:
-    retval = "LC_NUMERIC";
-    break;
-#endif
-#ifdef LC_TIME
-  case LC_TIME:
-    retval = "LC_TIME";
-    break;
-#endif
-#ifdef LC_MESSAGES
-  case LC_MESSAGES:
-    retval = "LC_MESSAGES";
-    break;
-#endif
-#ifdef LC_RESPONSE
-  case LC_RESPONSE:
-    retval = "LC_RESPONSE";
-    break;
-#endif
-#ifdef LC_ALL
-  case LC_ALL:
-    /* This might not make sense but is perhaps better than any other
-       value.  */
-    retval = "LC_ALL";
-    break;
-#endif
-  default:
-    /* If you have a better idea for a default value let me know.  */
-    retval = "LC_XXX";
-  }
-
-  return retval;
-}
-#endif
-
-/* Guess value of current locale from value of the environment variables
-   or system-dependent defaults.  */
-static const char *
-internal_function
-#ifdef IN_LIBGLOCALE
-guess_category_value (int category, const char *categoryname,
-		      const char *locale)
-
-#else
-guess_category_value (int category, const char *categoryname)
-#endif
-{
-  const char *language;
-#ifndef IN_LIBGLOCALE
-  const char *locale;
-# ifndef _LIBC
-  const char *language_default;
-  int locale_defaulted;
-# endif
-#endif
-
-  /* We use the settings in the following order:
-     1. The value of the environment variable 'LANGUAGE'.  This is a GNU
-        extension.  Its value can be a colon-separated list of locale names.
-     2. The value of the environment variable 'LC_ALL', 'LC_xxx', or 'LANG'.
-        More precisely, the first among these that is set to a non-empty value.
-        This is how POSIX specifies it.  The value is a single locale name.
-     3. A system-dependent preference list of languages.  Its value can be a
-        colon-separated list of locale names.
-     4. A system-dependent default locale name.
-     This way:
-       - System-dependent settings can be overridden by environment variables.
-       - If the system provides both a list of languages and a default locale,
-         the former is used.  */
-
-#ifndef IN_LIBGLOCALE
-  /* Fetch the locale name, through the POSIX method of looking to `LC_ALL',
-     `LC_xxx', and `LANG'.  On some systems this can be done by the
-     `setlocale' function itself.  */
-# ifdef _LIBC
-  locale = __current_locale_name (category);
-# else
-  locale_defaulted = 0;
-#  if HAVE_USELOCALE
-  locale = _nl_locale_name_thread_unsafe (category, categoryname);
-  if (locale == NULL)
-#  endif
-    {
-      locale = _nl_locale_name_posix (category, categoryname);
-      if (locale == NULL)
-	{
-	  locale = _nl_locale_name_default ();
-	  locale_defaulted = 1;
-	}
-    }
-# endif
-#endif
-
-  /* Ignore LANGUAGE and its system-dependent analogon if the locale is set
-     to "C" because
-     1. "C" locale usually uses the ASCII encoding, and most international
-	messages use non-ASCII characters. These characters get displayed
-	as question marks (if using glibc's iconv()) or as invalid 8-bit
-	characters (because other iconv()s refuse to convert most non-ASCII
-	characters to ASCII). In any case, the output is ugly.
-     2. The precise output of some programs in the "C" locale is specified
-	by POSIX and should not depend on environment variables like
-	"LANGUAGE" or system-dependent information.  We allow such programs
-        to use gettext().  */
-  if (strcmp (locale, "C") == 0)
-    return locale;
-
-  /* The highest priority value is the value of the 'LANGUAGE' environment
-     variable.  */
-  language = getenv ("LANGUAGE");
-  if (language != NULL && language[0] != '\0')
-    return language;
-#if !defined IN_LIBGLOCALE && !defined _LIBC
-  /* The next priority value is the locale name, if not defaulted.  */
-  if (locale_defaulted)
-    {
-      /* The next priority value is the default language preferences list. */
-      language_default = _nl_language_preferences_default ();
-      if (language_default != NULL)
-        return language_default;
-    }
-  /* The least priority value is the locale name, if defaulted.  */
-#endif
-  return locale;
-}
-
-#if (defined _LIBC || HAVE_ICONV) && !defined IN_LIBGLOCALE
-/* Returns the output charset.  */
-static const char *
-internal_function
-get_output_charset (struct binding *domainbinding)
-{
-  /* The output charset should normally be determined by the locale.  But
-     sometimes the locale is not used or not correctly set up, so we provide
-     a possibility for the user to override this: the OUTPUT_CHARSET
-     environment variable.  Moreover, the value specified through
-     bind_textdomain_codeset overrides both.  */
-  if (domainbinding != NULL && domainbinding->codeset != NULL)
-    return domainbinding->codeset;
-  else
-    {
-      /* For speed reasons, we look at the value of OUTPUT_CHARSET only
-	 once.  This is a user variable that is not supposed to change
-	 during a program run.  */
-      static char *output_charset_cache;
-      static int output_charset_cached;
-
-      if (!output_charset_cached)
-	{
-	  const char *value = getenv ("OUTPUT_CHARSET");
-
-	  if (value != NULL && value[0] != '\0')
-	    {
-	      size_t len = strlen (value) + 1;
-	      char *value_copy = (char *) malloc (len);
-
-	      if (value_copy != NULL)
-		memcpy (value_copy, value, len);
-	      output_charset_cache = value_copy;
-	    }
-	  output_charset_cached = 1;
-	}
-
-      if (output_charset_cache != NULL)
-	return output_charset_cache;
-      else
-	{
-# ifdef _LIBC
-	  return _NL_CURRENT (LC_CTYPE, CODESET);
-# else
-#  if HAVE_ICONV
-	  return locale_charset ();
-#  endif
-# endif
-	}
-    }
-}
-#endif
-
-/* @@ begin of epilog @@ */
-
-/* We don't want libintl.a to depend on any other library.  So we
-   avoid the non-standard function stpcpy.  In GNU C Library this
-   function is available, though.  Also allow the symbol HAVE_STPCPY
-   to be defined.  */
-#if !_LIBC && !HAVE_STPCPY
-static char *
-stpcpy (char *dest, const char *src)
-{
-  while ((*dest++ = *src++) != '\0')
-    /* Do nothing. */ ;
-  return dest - 1;
-}
-#endif
-
-#if !_LIBC && !HAVE_MEMPCPY
-static void *
-mempcpy (void *dest, const void *src, size_t n)
-{
-  return (void *) ((char *) memcpy (dest, src, n) + n);
-}
-#endif
-
-#if !_LIBC && !HAVE_TSEARCH
-# include "tsearch.c"
-#endif
-
-
-#ifdef _LIBC
-/* If we want to free all resources we have to do some work at
-   program's end.  */
-libc_freeres_fn (free_mem)
-{
-  void *old;
-
-  while (_nl_domain_bindings != NULL)
-    {
-      struct binding *oldp = _nl_domain_bindings;
-      _nl_domain_bindings = _nl_domain_bindings->next;
-      if (oldp->dirname != _nl_default_dirname)
-	/* Yes, this is a pointer comparison.  */
-	free (oldp->dirname);
-      free (oldp->codeset);
-      free (oldp);
-    }
-
-  if (_nl_current_default_domain != _nl_default_default_domain)
-    /* Yes, again a pointer comparison.  */
-    free ((char *) _nl_current_default_domain);
-
-  /* Remove the search tree with the known translations.  */
-  __tdestroy (root, free);
-  root = NULL;
-
-  while (transmem_list != NULL)
-    {
-      old = transmem_list;
-      transmem_list = transmem_list->next;
-      free (old);
-    }
-}
-#endif
diff -urpN mc-4.8.23/intl/dcngettext.c mc-4.8.24/intl/dcngettext.c
--- mc-4.8.23/intl/dcngettext.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/dcngettext.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,57 +0,0 @@
-/* Implementation of the dcngettext(3) function.
-   Copyright (C) 1995-1999, 2000-2003 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include "gettextP.h"
-#ifdef _LIBC
-# include <libintl.h>
-#else
-# include "libgnuintl.h"
-#endif
-
-/* @@ end of prolog @@ */
-
-/* Names for the libintl functions are a problem.  They must not clash
-   with existing names and they should follow ANSI C.  But this source
-   code is also used in GNU C Library where the names have a __
-   prefix.  So we have to make a difference here.  */
-#ifdef _LIBC
-# define DCNGETTEXT __dcngettext
-# define DCIGETTEXT __dcigettext
-#else
-# define DCNGETTEXT libintl_dcngettext
-# define DCIGETTEXT libintl_dcigettext
-#endif
-
-/* Look up MSGID in the DOMAINNAME message catalog for the current CATEGORY
-   locale.  */
-char *
-DCNGETTEXT (const char *domainname,
-	    const char *msgid1, const char *msgid2, unsigned long int n,
-	    int category)
-{
-  return DCIGETTEXT (domainname, msgid1, msgid2, 1, n, category);
-}
-
-#ifdef _LIBC
-/* Alias for function name in GNU C Library.  */
-weak_alias (__dcngettext, dcngettext);
-#endif
diff -urpN mc-4.8.23/intl/dgettext.c mc-4.8.24/intl/dgettext.c
--- mc-4.8.23/intl/dgettext.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/dgettext.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,58 +0,0 @@
-/* Implementation of the dgettext(3) function.
-   Copyright (C) 1995-1997, 2000-2003 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include "gettextP.h"
-
-#include <locale.h>
-
-#ifdef _LIBC
-# include <libintl.h>
-#else
-# include "libgnuintl.h"
-#endif
-
-/* @@ end of prolog @@ */
-
-/* Names for the libintl functions are a problem.  They must not clash
-   with existing names and they should follow ANSI C.  But this source
-   code is also used in GNU C Library where the names have a __
-   prefix.  So we have to make a difference here.  */
-#ifdef _LIBC
-# define DGETTEXT __dgettext
-# define DCGETTEXT INTUSE(__dcgettext)
-#else
-# define DGETTEXT libintl_dgettext
-# define DCGETTEXT libintl_dcgettext
-#endif
-
-/* Look up MSGID in the DOMAINNAME message catalog of the current
-   LC_MESSAGES locale.  */
-char *
-DGETTEXT (const char *domainname, const char *msgid)
-{
-  return DCGETTEXT (domainname, msgid, LC_MESSAGES);
-}
-
-#ifdef _LIBC
-/* Alias for function name in GNU C Library.  */
-weak_alias (__dgettext, dgettext);
-#endif
diff -urpN mc-4.8.23/intl/dngettext.c mc-4.8.24/intl/dngettext.c
--- mc-4.8.23/intl/dngettext.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/dngettext.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,59 +0,0 @@
-/* Implementation of the dngettext(3) function.
-   Copyright (C) 1995-1997, 2000-2003 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include "gettextP.h"
-
-#include <locale.h>
-
-#ifdef _LIBC
-# include <libintl.h>
-#else
-# include "libgnuintl.h"
-#endif
-
-/* @@ end of prolog @@ */
-
-/* Names for the libintl functions are a problem.  They must not clash
-   with existing names and they should follow ANSI C.  But this source
-   code is also used in GNU C Library where the names have a __
-   prefix.  So we have to make a difference here.  */
-#ifdef _LIBC
-# define DNGETTEXT __dngettext
-# define DCNGETTEXT __dcngettext
-#else
-# define DNGETTEXT libintl_dngettext
-# define DCNGETTEXT libintl_dcngettext
-#endif
-
-/* Look up MSGID in the DOMAINNAME message catalog of the current
-   LC_MESSAGES locale and skip message according to the plural form.  */
-char *
-DNGETTEXT (const char *domainname,
-	   const char *msgid1, const char *msgid2, unsigned long int n)
-{
-  return DCNGETTEXT (domainname, msgid1, msgid2, n, LC_MESSAGES);
-}
-
-#ifdef _LIBC
-/* Alias for function name in GNU C Library.  */
-weak_alias (__dngettext, dngettext);
-#endif
diff -urpN mc-4.8.23/intl/eval-plural.h mc-4.8.24/intl/eval-plural.h
--- mc-4.8.23/intl/eval-plural.h	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/eval-plural.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,108 +0,0 @@
-/* Plural expression evaluation.
-   Copyright (C) 2000-2003, 2007 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef STATIC
-#define STATIC static
-#endif
-
-/* Evaluate the plural expression and return an index value.  */
-STATIC
-unsigned long int
-internal_function
-plural_eval (const struct expression *pexp, unsigned long int n)
-{
-  switch (pexp->nargs)
-    {
-    case 0:
-      switch (pexp->operation)
-	{
-	case var:
-	  return n;
-	case num:
-	  return pexp->val.num;
-	default:
-	  break;
-	}
-      /* NOTREACHED */
-      break;
-    case 1:
-      {
-	/* pexp->operation must be lnot.  */
-	unsigned long int arg = plural_eval (pexp->val.args[0], n);
-	return ! arg;
-      }
-    case 2:
-      {
-	unsigned long int leftarg = plural_eval (pexp->val.args[0], n);
-	if (pexp->operation == lor)
-	  return leftarg || plural_eval (pexp->val.args[1], n);
-	else if (pexp->operation == land)
-	  return leftarg && plural_eval (pexp->val.args[1], n);
-	else
-	  {
-	    unsigned long int rightarg = plural_eval (pexp->val.args[1], n);
-
-	    switch (pexp->operation)
-	      {
-	      case mult:
-		return leftarg * rightarg;
-	      case divide:
-#if !INTDIV0_RAISES_SIGFPE
-		if (rightarg == 0)
-		  raise (SIGFPE);
-#endif
-		return leftarg / rightarg;
-	      case module:
-#if !INTDIV0_RAISES_SIGFPE
-		if (rightarg == 0)
-		  raise (SIGFPE);
-#endif
-		return leftarg % rightarg;
-	      case plus:
-		return leftarg + rightarg;
-	      case minus:
-		return leftarg - rightarg;
-	      case less_than:
-		return leftarg < rightarg;
-	      case greater_than:
-		return leftarg > rightarg;
-	      case less_or_equal:
-		return leftarg <= rightarg;
-	      case greater_or_equal:
-		return leftarg >= rightarg;
-	      case equal:
-		return leftarg == rightarg;
-	      case not_equal:
-		return leftarg != rightarg;
-	      default:
-		break;
-	      }
-	  }
-	/* NOTREACHED */
-	break;
-      }
-    case 3:
-      {
-	/* pexp->operation must be qmop.  */
-	unsigned long int boolarg = plural_eval (pexp->val.args[0], n);
-	return plural_eval (pexp->val.args[boolarg ? 1 : 2], n);
-      }
-    }
-  /* NOTREACHED */
-  return 0;
-}
diff -urpN mc-4.8.23/intl/explodename.c mc-4.8.24/intl/explodename.c
--- mc-4.8.23/intl/explodename.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/explodename.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,135 +0,0 @@
-/* Copyright (C) 1995-1998, 2000-2001, 2003, 2005, 2007 Free Software Foundation, Inc.
-   Contributed by Ulrich Drepper <drepper@gnu.ai.mit.edu>, 1995.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <stdlib.h>
-#include <string.h>
-#include <sys/types.h>
-
-#include "loadinfo.h"
-
-/* On some strange systems still no definition of NULL is found.  Sigh!  */
-#ifndef NULL
-# if defined __STDC__ && __STDC__
-#  define NULL ((void *) 0)
-# else
-#  define NULL 0
-# endif
-#endif
-
-/* @@ end of prolog @@ */
-
-/* Split a locale name NAME into a leading language part and all the
-   rest.  Return a pointer to the first character after the language,
-   i.e. to the first byte of the rest.  */
-static char *_nl_find_language (const char *name);
-
-static char *
-_nl_find_language (const char *name)
-{
-  while (name[0] != '\0' && name[0] != '_' && name[0] != '@' && name[0] != '.')
-    ++name;
-
-  return (char *) name;
-}
-
-
-int
-_nl_explode_name (char *name,
-		  const char **language, const char **modifier,
-		  const char **territory, const char **codeset,
-		  const char **normalized_codeset)
-{
-  char *cp;
-  int mask;
-
-  *modifier = NULL;
-  *territory = NULL;
-  *codeset = NULL;
-  *normalized_codeset = NULL;
-
-  /* Now we determine the single parts of the locale name.  First
-     look for the language.  Termination symbols are `_', '.', and `@'.  */
-  mask = 0;
-  *language = cp = name;
-  cp = _nl_find_language (*language);
-
-  if (*language == cp)
-    /* This does not make sense: language has to be specified.  Use
-       this entry as it is without exploding.  Perhaps it is an alias.  */
-    cp = strchr (*language, '\0');
-  else
-    {
-      if (cp[0] == '_')
-	{
-	  /* Next is the territory.  */
-	  cp[0] = '\0';
-	  *territory = ++cp;
-
-	  while (cp[0] != '\0' && cp[0] != '.' && cp[0] != '@')
-	    ++cp;
-
-	  mask |= XPG_TERRITORY;
-	}
-
-      if (cp[0] == '.')
-	{
-	  /* Next is the codeset.  */
-	  cp[0] = '\0';
-	  *codeset = ++cp;
-
-	  while (cp[0] != '\0' && cp[0] != '@')
-	    ++cp;
-
-	  mask |= XPG_CODESET;
-
-	  if (*codeset != cp && (*codeset)[0] != '\0')
-	    {
-	      *normalized_codeset = _nl_normalize_codeset (*codeset,
-							   cp - *codeset);
-	      if (*normalized_codeset == NULL)
-		return -1;
-	      else if (strcmp (*codeset, *normalized_codeset) == 0)
-		free ((char *) *normalized_codeset);
-	      else
-		mask |= XPG_NORM_CODESET;
-	    }
-	}
-    }
-
-  if (cp[0] == '@')
-    {
-      /* Next is the modifier.  */
-      cp[0] = '\0';
-      *modifier = ++cp;
-
-      if (cp[0] != '\0')
-	mask |= XPG_MODIFIER;
-    }
-
-  if (*territory != NULL && (*territory)[0] == '\0')
-    mask &= ~XPG_TERRITORY;
-
-  if (*codeset != NULL && (*codeset)[0] == '\0')
-    mask &= ~XPG_CODESET;
-
-  return mask;
-}
diff -urpN mc-4.8.23/intl/export.h mc-4.8.24/intl/export.h
--- mc-4.8.23/intl/export.h	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/export.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,6 +0,0 @@
-
-#if @HAVE_VISIBILITY@ && BUILDING_LIBINTL
-#define LIBINTL_DLL_EXPORTED __attribute__((__visibility__("default")))
-#else
-#define LIBINTL_DLL_EXPORTED
-#endif
diff -urpN mc-4.8.23/intl/finddomain.c mc-4.8.24/intl/finddomain.c
--- mc-4.8.23/intl/finddomain.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/finddomain.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,212 +0,0 @@
-/* Handle list of needed message catalogs
-   Copyright (C) 1995-1999, 2000-2001, 2003-2007 Free Software Foundation, Inc.
-   Written by Ulrich Drepper <drepper@gnu.org>, 1995.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <stdio.h>
-#include <sys/types.h>
-#include <stdlib.h>
-#include <string.h>
-
-#if defined HAVE_UNISTD_H || defined _LIBC
-# include <unistd.h>
-#endif
-
-#include "gettextP.h"
-#ifdef _LIBC
-# include <libintl.h>
-#else
-# include "libgnuintl.h"
-#endif
-
-/* Handle multi-threaded applications.  */
-#ifdef _LIBC
-# include <bits/libc-lock.h>
-# define gl_rwlock_define_initialized __libc_rwlock_define_initialized
-# define gl_rwlock_rdlock __libc_rwlock_rdlock
-# define gl_rwlock_wrlock __libc_rwlock_wrlock
-# define gl_rwlock_unlock __libc_rwlock_unlock
-#else
-# include "lock.h"
-#endif
-
-/* @@ end of prolog @@ */
-/* List of already loaded domains.  */
-static struct loaded_l10nfile *_nl_loaded_domains;
-
-
-/* Return a data structure describing the message catalog described by
-   the DOMAINNAME and CATEGORY parameters with respect to the currently
-   established bindings.  */
-struct loaded_l10nfile *
-internal_function
-_nl_find_domain (const char *dirname, char *locale,
-		 const char *domainname, struct binding *domainbinding)
-{
-  struct loaded_l10nfile *retval;
-  const char *language;
-  const char *modifier;
-  const char *territory;
-  const char *codeset;
-  const char *normalized_codeset;
-  const char *alias_value;
-  int mask;
-
-  /* LOCALE can consist of up to four recognized parts for the XPG syntax:
-
-		language[_territory][.codeset][@modifier]
-
-     Beside the first part all of them are allowed to be missing.  If
-     the full specified locale is not found, the less specific one are
-     looked for.  The various parts will be stripped off according to
-     the following order:
-		(1) codeset
-		(2) normalized codeset
-		(3) territory
-		(4) modifier
-   */
-
-  /* We need to protect modifying the _NL_LOADED_DOMAINS data.  */
-  gl_rwlock_define_initialized (static, lock);
-  gl_rwlock_rdlock (lock);
-
-  /* If we have already tested for this locale entry there has to
-     be one data set in the list of loaded domains.  */
-  retval = _nl_make_l10nflist (&_nl_loaded_domains, dirname,
-			       strlen (dirname) + 1, 0, locale, NULL, NULL,
-			       NULL, NULL, domainname, 0);
-
-  gl_rwlock_unlock (lock);
-
-  if (retval != NULL)
-    {
-      /* We know something about this locale.  */
-      int cnt;
-
-      if (retval->decided <= 0)
-	_nl_load_domain (retval, domainbinding);
-
-      if (retval->data != NULL)
-	return retval;
-
-      for (cnt = 0; retval->successor[cnt] != NULL; ++cnt)
-	{
-	  if (retval->successor[cnt]->decided <= 0)
-	    _nl_load_domain (retval->successor[cnt], domainbinding);
-
-	  if (retval->successor[cnt]->data != NULL)
-	    break;
-	}
-
-      return retval;
-      /* NOTREACHED */
-    }
-
-  /* See whether the locale value is an alias.  If yes its value
-     *overwrites* the alias name.  No test for the original value is
-     done.  */
-  alias_value = _nl_expand_alias (locale);
-  if (alias_value != NULL)
-    {
-#if defined _LIBC || defined HAVE_STRDUP
-      locale = strdup (alias_value);
-      if (locale == NULL)
-	return NULL;
-#else
-      size_t len = strlen (alias_value) + 1;
-      locale = (char *) malloc (len);
-      if (locale == NULL)
-	return NULL;
-
-      memcpy (locale, alias_value, len);
-#endif
-    }
-
-  /* Now we determine the single parts of the locale name.  First
-     look for the language.  Termination symbols are `_', '.', and `@'.  */
-  mask = _nl_explode_name (locale, &language, &modifier, &territory,
-			   &codeset, &normalized_codeset);
-  if (mask == -1)
-    /* This means we are out of core.  */
-    return NULL;
-
-  /* We need to protect modifying the _NL_LOADED_DOMAINS data.  */
-  gl_rwlock_wrlock (lock);
-
-  /* Create all possible locale entries which might be interested in
-     generalization.  */
-  retval = _nl_make_l10nflist (&_nl_loaded_domains, dirname,
-			       strlen (dirname) + 1, mask, language, territory,
-			       codeset, normalized_codeset, modifier,
-			       domainname, 1);
-
-  gl_rwlock_unlock (lock);
-
-  if (retval == NULL)
-    /* This means we are out of core.  */
-    goto out;
-
-  if (retval->decided <= 0)
-    _nl_load_domain (retval, domainbinding);
-  if (retval->data == NULL)
-    {
-      int cnt;
-      for (cnt = 0; retval->successor[cnt] != NULL; ++cnt)
-	{
-	  if (retval->successor[cnt]->decided <= 0)
-	    _nl_load_domain (retval->successor[cnt], domainbinding);
-	  if (retval->successor[cnt]->data != NULL)
-	    break;
-	}
-    }
-
-  /* The room for an alias was dynamically allocated.  Free it now.  */
-  if (alias_value != NULL)
-    free (locale);
-
-out:
-  /* The space for normalized_codeset is dynamically allocated.  Free it.  */
-  if (mask & XPG_NORM_CODESET)
-    free ((void *) normalized_codeset);
-
-  return retval;
-}
-
-
-#ifdef _LIBC
-/* This is called from iconv/gconv_db.c's free_mem, as locales must
-   be freed before freeing gconv steps arrays.  */
-void __libc_freeres_fn_section
-_nl_finddomain_subfreeres ()
-{
-  struct loaded_l10nfile *runp = _nl_loaded_domains;
-
-  while (runp != NULL)
-    {
-      struct loaded_l10nfile *here = runp;
-      if (runp->data != NULL)
-	_nl_unload_domain ((struct loaded_domain *) runp->data);
-      runp = runp->next;
-      free ((char *) here->filename);
-      free (here);
-    }
-}
-#endif
diff -urpN mc-4.8.23/intl/gettext.c mc-4.8.24/intl/gettext.c
--- mc-4.8.23/intl/gettext.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/gettext.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,63 +0,0 @@
-/* Implementation of gettext(3) function.
-   Copyright (C) 1995, 1997, 2000-2003 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#ifdef _LIBC
-# define __need_NULL
-# include <stddef.h>
-#else
-# include <stdlib.h>		/* Just for NULL.  */
-#endif
-
-#include "gettextP.h"
-#ifdef _LIBC
-# include <libintl.h>
-#else
-# include "libgnuintl.h"
-#endif
-
-/* @@ end of prolog @@ */
-
-/* Names for the libintl functions are a problem.  They must not clash
-   with existing names and they should follow ANSI C.  But this source
-   code is also used in GNU C Library where the names have a __
-   prefix.  So we have to make a difference here.  */
-#ifdef _LIBC
-# define GETTEXT __gettext
-# define DCGETTEXT INTUSE(__dcgettext)
-#else
-# define GETTEXT libintl_gettext
-# define DCGETTEXT libintl_dcgettext
-#endif
-
-/* Look up MSGID in the current default message catalog for the current
-   LC_MESSAGES locale.  If not found, returns MSGID itself (the default
-   text).  */
-char *
-GETTEXT (const char *msgid)
-{
-  return DCGETTEXT (NULL, msgid, LC_MESSAGES);
-}
-
-#ifdef _LIBC
-/* Alias for function name in GNU C Library.  */
-weak_alias (__gettext, gettext);
-#endif
diff -urpN mc-4.8.23/intl/gettextP.h mc-4.8.24/intl/gettextP.h
--- mc-4.8.23/intl/gettextP.h	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/gettextP.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,311 +0,0 @@
-/* Header describing internals of libintl library.
-   Copyright (C) 1995-1999, 2000-2007, 2009-2010 Free Software Foundation, Inc.
-   Written by Ulrich Drepper <drepper@cygnus.com>, 1995.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _GETTEXTP_H
-#define _GETTEXTP_H
-
-#include <stddef.h>		/* Get size_t.  */
-
-#ifdef _LIBC
-# include "../iconv/gconv_int.h"
-#else
-# if HAVE_ICONV
-#  include <iconv.h>
-# endif
-#endif
-
-/* Handle multi-threaded applications.  */
-#ifdef _LIBC
-# include <bits/libc-lock.h>
-# define gl_rwlock_define __libc_rwlock_define
-#else
-# include "lock.h"
-#endif
-
-#ifdef _LIBC
-extern char *__gettext (const char *__msgid);
-extern char *__dgettext (const char *__domainname, const char *__msgid);
-extern char *__dcgettext (const char *__domainname, const char *__msgid,
-			  int __category);
-extern char *__ngettext (const char *__msgid1, const char *__msgid2,
-			 unsigned long int __n);
-extern char *__dngettext (const char *__domainname,
-			  const char *__msgid1, const char *__msgid2,
-			  unsigned long int n);
-extern char *__dcngettext (const char *__domainname,
-			   const char *__msgid1, const char *__msgid2,
-			   unsigned long int __n, int __category);
-extern char *__dcigettext (const char *__domainname,
-			   const char *__msgid1, const char *__msgid2,
-			   int __plural, unsigned long int __n,
-			   int __category);
-extern char *__textdomain (const char *__domainname);
-extern char *__bindtextdomain (const char *__domainname,
-			       const char *__dirname);
-extern char *__bind_textdomain_codeset (const char *__domainname,
-					const char *__codeset);
-extern void _nl_finddomain_subfreeres (void) attribute_hidden;
-extern void _nl_unload_domain (struct loaded_domain *__domain)
-     internal_function attribute_hidden;
-#else
-/* Declare the exported libintl_* functions, in a way that allows us to
-   call them under their real name.  */
-# undef _INTL_REDIRECT_INLINE
-# undef _INTL_REDIRECT_MACROS
-# define _INTL_REDIRECT_MACROS
-# include "libgnuintl.h"
-# ifdef IN_LIBGLOCALE
-extern char *gl_dcigettext (const char *__domainname,
-			    const char *__msgid1, const char *__msgid2,
-			    int __plural, unsigned long int __n,
-			    int __category,
-			    const char *__localename, const char *__encoding);
-# else
-extern char *libintl_dcigettext (const char *__domainname,
-				 const char *__msgid1, const char *__msgid2,
-				 int __plural, unsigned long int __n,
-				 int __category);
-# endif
-#endif
-
-#include "loadinfo.h"
-
-#include "gmo.h"		/* Get nls_uint32.  */
-
-/* @@ end of prolog @@ */
-
-#ifndef internal_function
-# define internal_function
-#endif
-
-#ifndef attribute_hidden
-# define attribute_hidden
-#endif
-
-/* Tell the compiler when a conditional or integer expression is
-   almost always true or almost always false.  */
-#ifndef HAVE_BUILTIN_EXPECT
-# define __builtin_expect(expr, val) (expr)
-#endif
-
-#ifndef W
-# define W(flag, data) ((flag) ? SWAP (data) : (data))
-#endif
-
-
-#ifdef _LIBC
-# include <byteswap.h>
-# define SWAP(i) bswap_32 (i)
-#else
-static inline nls_uint32
-# ifdef __cplusplus
-SWAP (nls_uint32 i)
-# else
-SWAP (i)
-     nls_uint32 i;
-# endif
-{
-  return (i << 24) | ((i & 0xff00) << 8) | ((i >> 8) & 0xff00) | (i >> 24);
-}
-#endif
-
-
-/* In-memory representation of system dependent string.  */
-struct sysdep_string_desc
-{
-  /* Length of addressed string, including the trailing NUL.  */
-  size_t length;
-  /* Pointer to addressed string.  */
-  const char *pointer;
-};
-
-/* Cache of translated strings after charset conversion.
-   Note: The strings are converted to the target encoding only on an as-needed
-   basis.  */
-struct converted_domain
-{
-  /* The target encoding name.  */
-  const char *encoding;
-  /* The descriptor for conversion from the message catalog's encoding to
-     this target encoding.  */
-#ifdef _LIBC
-  __gconv_t conv;
-#else
-# if HAVE_ICONV
-  iconv_t conv;
-# endif
-#endif
-  /* The table of translated strings after charset conversion.  */
-  char **conv_tab;
-};
-
-/* The representation of an opened message catalog.  */
-struct loaded_domain
-{
-  /* Pointer to memory containing the .mo file.  */
-  const char *data;
-  /* 1 if the memory is mmap()ed, 0 if the memory is malloc()ed.  */
-  int use_mmap;
-  /* Size of mmap()ed memory.  */
-  size_t mmap_size;
-  /* 1 if the .mo file uses a different endianness than this machine.  */
-  int must_swap;
-  /* Pointer to additional malloc()ed memory.  */
-  void *malloced;
-
-  /* Number of static strings pairs.  */
-  nls_uint32 nstrings;
-  /* Pointer to descriptors of original strings in the file.  */
-  const struct string_desc *orig_tab;
-  /* Pointer to descriptors of translated strings in the file.  */
-  const struct string_desc *trans_tab;
-
-  /* Number of system dependent strings pairs.  */
-  nls_uint32 n_sysdep_strings;
-  /* Pointer to descriptors of original sysdep strings.  */
-  const struct sysdep_string_desc *orig_sysdep_tab;
-  /* Pointer to descriptors of translated sysdep strings.  */
-  const struct sysdep_string_desc *trans_sysdep_tab;
-
-  /* Size of hash table.  */
-  nls_uint32 hash_size;
-  /* Pointer to hash table.  */
-  const nls_uint32 *hash_tab;
-  /* 1 if the hash table uses a different endianness than this machine.  */
-  int must_swap_hash_tab;
-
-  /* Cache of charset conversions of the translated strings.  */
-  struct converted_domain *conversions;
-  size_t nconversions;
-  gl_rwlock_define (, conversions_lock)
-
-  const struct expression *plural;
-  unsigned long int nplurals;
-};
-
-/* We want to allocate a string at the end of the struct.  But ISO C
-   doesn't allow zero sized arrays.  */
-#ifdef __GNUC__
-# define ZERO 0
-#else
-# define ZERO 1
-#endif
-
-/* A set of settings bound to a message domain.  Used to store settings
-   from bindtextdomain() and bind_textdomain_codeset().  */
-struct binding
-{
-  struct binding *next;
-  char *dirname;
-  char *codeset;
-  char domainname[ZERO];
-};
-
-/* A counter which is incremented each time some previous translations
-   become invalid.
-   This variable is part of the external ABI of the GNU libintl.  */
-#ifdef IN_LIBGLOCALE
-# include <glocale/config.h>
-extern LIBGLOCALE_DLL_EXPORTED int _nl_msg_cat_cntr;
-#else
-extern LIBINTL_DLL_EXPORTED int _nl_msg_cat_cntr;
-#endif
-
-#ifndef _LIBC
-extern const char *_nl_language_preferences_default (void);
-# define gl_locale_name_canonicalize _nl_locale_name_canonicalize
-extern void _nl_locale_name_canonicalize (char *name);
-# define gl_locale_name_from_win32_LANGID _nl_locale_name_from_win32_LANGID
-/* extern const char *_nl_locale_name_from_win32_LANGID (LANGID langid); */
-# define gl_locale_name_from_win32_LCID _nl_locale_name_from_win32_LCID
-/* extern const char *_nl_locale_name_from_win32_LCID (LCID lcid); */
-# define gl_locale_name_thread_unsafe _nl_locale_name_thread_unsafe
-extern const char *_nl_locale_name_thread_unsafe (int category,
-						  const char *categoryname);
-# define gl_locale_name_thread _nl_locale_name_thread
-/* extern const char *_nl_locale_name_thread (int category,
-					      const char *categoryname); */
-# define gl_locale_name_posix _nl_locale_name_posix
-extern const char *_nl_locale_name_posix (int category,
-					  const char *categoryname);
-# define gl_locale_name_environ _nl_locale_name_environ
-extern const char *_nl_locale_name_environ (int category,
-					    const char *categoryname);
-# define gl_locale_name_default _nl_locale_name_default
-extern const char *_nl_locale_name_default (void);
-# define gl_locale_name _nl_locale_name
-/* extern const char *_nl_locale_name (int category,
-				       const char *categoryname); */
-#endif
-
-struct loaded_l10nfile *_nl_find_domain (const char *__dirname, char *__locale,
-					 const char *__domainname,
-					 struct binding *__domainbinding)
-     internal_function;
-void _nl_load_domain (struct loaded_l10nfile *__domain,
-		      struct binding *__domainbinding)
-     internal_function;
-
-#ifdef IN_LIBGLOCALE
-char *_nl_find_msg (struct loaded_l10nfile *domain_file,
-		    struct binding *domainbinding, const char *encoding,
-		    const char *msgid,
-		    size_t *lengthp)
-     internal_function;
-#else
-char *_nl_find_msg (struct loaded_l10nfile *domain_file,
-		    struct binding *domainbinding, const char *msgid,
-		    int convert, size_t *lengthp)
-     internal_function;
-#endif
-
-/* The internal variables in the standalone libintl.a must have different
-   names than the internal variables in GNU libc, otherwise programs
-   using libintl.a cannot be linked statically.  */
-#if !defined _LIBC
-# define _nl_default_dirname libintl_nl_default_dirname
-# define _nl_domain_bindings libintl_nl_domain_bindings
-#endif
-
-/* Contains the default location of the message catalogs.  */
-extern const char _nl_default_dirname[];
-#ifdef _LIBC
-libc_hidden_proto (_nl_default_dirname)
-#endif
-
-/* List with bindings of specific domains.  */
-extern struct binding *_nl_domain_bindings;
-
-/* The internal variables in the standalone libintl.a must have different
-   names than the internal variables in GNU libc, otherwise programs
-   using libintl.a cannot be linked statically.  */
-#if !defined _LIBC
-# define _nl_default_default_domain libintl_nl_default_default_domain
-# define _nl_current_default_domain libintl_nl_current_default_domain
-#endif
-
-/* Name of the default text domain.  */
-extern const char _nl_default_default_domain[] attribute_hidden;
-
-/* Default text domain in which entries for gettext(3) are to be found.  */
-extern const char *_nl_current_default_domain attribute_hidden;
-
-/* @@ begin of epilog @@ */
-
-#endif /* gettextP.h  */
diff -urpN mc-4.8.23/intl/gmo.h mc-4.8.24/intl/gmo.h
--- mc-4.8.23/intl/gmo.h	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/gmo.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,152 +0,0 @@
-/* Description of GNU message catalog format: general file layout.
-   Copyright (C) 1995, 1997, 2000-2002, 2004, 2006 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _GETTEXT_H
-#define _GETTEXT_H 1
-
-#include <limits.h>
-
-/* @@ end of prolog @@ */
-
-/* The magic number of the GNU message catalog format.  */
-#define _MAGIC 0x950412de
-#define _MAGIC_SWAPPED 0xde120495
-
-/* Revision number of the currently used .mo (binary) file format.  */
-#define MO_REVISION_NUMBER 0
-#define MO_REVISION_NUMBER_WITH_SYSDEP_I 1
-
-/* The following contortions are an attempt to use the C preprocessor
-   to determine an unsigned integral type that is 32 bits wide.  An
-   alternative approach is to use autoconf's AC_CHECK_SIZEOF macro, but
-   as of version autoconf-2.13, the AC_CHECK_SIZEOF macro doesn't work
-   when cross-compiling.  */
-
-#if __STDC__
-# define UINT_MAX_32_BITS 4294967295U
-#else
-# define UINT_MAX_32_BITS 0xFFFFFFFF
-#endif
-
-/* If UINT_MAX isn't defined, assume it's a 32-bit type.
-   This should be valid for all systems GNU cares about because
-   that doesn't include 16-bit systems, and only modern systems
-   (that certainly have <limits.h>) have 64+-bit integral types.  */
-
-#ifndef UINT_MAX
-# define UINT_MAX UINT_MAX_32_BITS
-#endif
-
-#if UINT_MAX == UINT_MAX_32_BITS
-typedef unsigned nls_uint32;
-#else
-# if USHRT_MAX == UINT_MAX_32_BITS
-typedef unsigned short nls_uint32;
-# else
-#  if ULONG_MAX == UINT_MAX_32_BITS
-typedef unsigned long nls_uint32;
-#  else
-  /* The following line is intended to throw an error.  Using #error is
-     not portable enough.  */
-  "Cannot determine unsigned 32-bit data type."
-#  endif
-# endif
-#endif
-
-
-/* Header for binary .mo file format.  */
-struct mo_file_header
-{
-  /* The magic number.  */
-  nls_uint32 magic;
-  /* The revision number of the file format.  */
-  nls_uint32 revision;
-
-  /* The following are only used in .mo files with major revision 0 or 1.  */
-
-  /* The number of strings pairs.  */
-  nls_uint32 nstrings;
-  /* Offset of table with start offsets of original strings.  */
-  nls_uint32 orig_tab_offset;
-  /* Offset of table with start offsets of translated strings.  */
-  nls_uint32 trans_tab_offset;
-  /* Size of hash table.  */
-  nls_uint32 hash_tab_size;
-  /* Offset of first hash table entry.  */
-  nls_uint32 hash_tab_offset;
-
-  /* The following are only used in .mo files with minor revision >= 1.  */
-
-  /* The number of system dependent segments.  */
-  nls_uint32 n_sysdep_segments;
-  /* Offset of table describing system dependent segments.  */
-  nls_uint32 sysdep_segments_offset;
-  /* The number of system dependent strings pairs.  */
-  nls_uint32 n_sysdep_strings;
-  /* Offset of table with start offsets of original sysdep strings.  */
-  nls_uint32 orig_sysdep_tab_offset;
-  /* Offset of table with start offsets of translated sysdep strings.  */
-  nls_uint32 trans_sysdep_tab_offset;
-};
-
-/* Descriptor for static string contained in the binary .mo file.  */
-struct string_desc
-{
-  /* Length of addressed string, not including the trailing NUL.  */
-  nls_uint32 length;
-  /* Offset of string in file.  */
-  nls_uint32 offset;
-};
-
-/* The following are only used in .mo files with minor revision >= 1.  */
-
-/* Descriptor for system dependent string segment.  */
-struct sysdep_segment
-{
-  /* Length of addressed string, including the trailing NUL.  */
-  nls_uint32 length;
-  /* Offset of string in file.  */
-  nls_uint32 offset;
-};
-
-/* Pair of a static and a system dependent segment, in struct sysdep_string.  */
-struct segment_pair
-{
-  /* Size of static segment.  */
-  nls_uint32 segsize;
-  /* Reference to system dependent string segment, or ~0 at the end.  */
-  nls_uint32 sysdepref;
-};
-
-/* Descriptor for system dependent string.  */
-struct sysdep_string
-{
-  /* Offset of static string segments in file.  */
-  nls_uint32 offset;
-  /* Alternating sequence of static and system dependent segments.
-     The last segment is a static segment, including the trailing NUL.  */
-  struct segment_pair segments[1];
-};
-
-/* Marker for the end of the segments[] array.  This has the value 0xFFFFFFFF,
-   regardless whether 'int' is 16 bit, 32 bit, or 64 bit.  */
-#define SEGMENTS_END ((nls_uint32) ~0)
-
-/* @@ begin of epilog @@ */
-
-#endif	/* gettext.h  */
diff -urpN mc-4.8.23/intl/hash-string.c mc-4.8.24/intl/hash-string.c
--- mc-4.8.23/intl/hash-string.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/hash-string.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,51 +0,0 @@
-/* Implements a string hashing function.
-   Copyright (C) 1995, 1997, 1998, 2000, 2003 Free Software Foundation, Inc.
-   This file is part of the GNU C Library.
-
-   The GNU C Library is free software; you can redistribute it and/or
-   modify it under the terms of the GNU Lesser General Public
-   License as published by the Free Software Foundation; either
-   version 2.1 of the License, or (at your option) any later version.
-
-   The GNU C Library is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Lesser General Public License for more details.
-
-   You should have received a copy of the GNU Lesser General Public
-   License along with the GNU C Library; if not, write to the Free
-   Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
-   Boston, MA 02110-1301, USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-/* Specification.  */
-#include "hash-string.h"
-
-
-/* Defines the so called `hashpjw' function by P.J. Weinberger
-   [see Aho/Sethi/Ullman, COMPILERS: Principles, Techniques and Tools,
-   1986, 1987 Bell Telephone Laboratories, Inc.]  */
-unsigned long int
-__hash_string (const char *str_param)
-{
-  unsigned long int hval, g;
-  const char *str = str_param;
-
-  /* Compute the hash value for the given string.  */
-  hval = 0;
-  while (*str != '\0')
-    {
-      hval <<= 4;
-      hval += (unsigned char) *str++;
-      g = hval & ((unsigned long int) 0xf << (HASHWORDBITS - 4));
-      if (g != 0)
-	{
-	  hval ^= g >> (HASHWORDBITS - 8);
-	  hval ^= g;
-	}
-    }
-  return hval;
-}
diff -urpN mc-4.8.23/intl/hash-string.h mc-4.8.24/intl/hash-string.h
--- mc-4.8.23/intl/hash-string.h	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/hash-string.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,36 +0,0 @@
-/* Description of GNU message catalog format: string hashing function.
-   Copyright (C) 1995, 1997-1998, 2000-2003, 2005 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* @@ end of prolog @@ */
-
-/* We assume to have `unsigned long int' value with at least 32 bits.  */
-#define HASHWORDBITS 32
-
-
-#ifndef _LIBC
-# ifdef IN_LIBINTL
-#  define __hash_string libintl_hash_string
-# else
-#  define __hash_string hash_string
-# endif
-#endif
-
-/* Defines the so called `hashpjw' function by P.J. Weinberger
-   [see Aho/Sethi/Ullman, COMPILERS: Principles, Techniques and Tools,
-   1986, 1987 Bell Telephone Laboratories, Inc.]  */
-extern unsigned long int __hash_string (const char *str_param);
diff -urpN mc-4.8.23/intl/intl-compat.c mc-4.8.24/intl/intl-compat.c
--- mc-4.8.23/intl/intl-compat.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/intl-compat.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,133 +0,0 @@
-/* intl-compat.c - Stub functions to call gettext functions from GNU gettext
-   Library.
-   Copyright (C) 1995, 2000-2003, 2005 Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include "gettextP.h"
-
-/* @@ end of prolog @@ */
-
-/* This file redirects the gettext functions (without prefix) to those
-   defined in the included GNU libintl library (with "libintl_" prefix).
-   It is compiled into libintl in order to make the AM_GNU_GETTEXT test
-   of gettext <= 0.11.2 work with the libintl library >= 0.11.3 which
-   has the redirections primarily in the <libintl.h> include file.
-   It is also compiled into libgnuintl so that libgnuintl.so can be used
-   as LD_PRELOADable library on glibc systems, to provide the extra
-   features that the functions in the libc don't have (namely, logging).  */
-
-
-#undef gettext
-#undef dgettext
-#undef dcgettext
-#undef ngettext
-#undef dngettext
-#undef dcngettext
-#undef textdomain
-#undef bindtextdomain
-#undef bind_textdomain_codeset
-
-
-/* When building a DLL, we must export some functions.  Note that because
-   the functions are only defined for binary backward compatibility, we
-   don't need to use __declspec(dllimport) in any case.  */
-#if HAVE_VISIBILITY && BUILDING_DLL
-# define DLL_EXPORTED __attribute__((__visibility__("default")))
-#elif defined _MSC_VER && BUILDING_DLL
-# define DLL_EXPORTED __declspec(dllexport)
-#else
-# define DLL_EXPORTED
-#endif
-
-
-DLL_EXPORTED
-char *
-gettext (const char *msgid)
-{
-  return libintl_gettext (msgid);
-}
-
-
-DLL_EXPORTED
-char *
-dgettext (const char *domainname, const char *msgid)
-{
-  return libintl_dgettext (domainname, msgid);
-}
-
-
-DLL_EXPORTED
-char *
-dcgettext (const char *domainname, const char *msgid, int category)
-{
-  return libintl_dcgettext (domainname, msgid, category);
-}
-
-
-DLL_EXPORTED
-char *
-ngettext (const char *msgid1, const char *msgid2, unsigned long int n)
-{
-  return libintl_ngettext (msgid1, msgid2, n);
-}
-
-
-DLL_EXPORTED
-char *
-dngettext (const char *domainname,
-           const char *msgid1, const char *msgid2, unsigned long int n)
-{
-  return libintl_dngettext (domainname, msgid1, msgid2, n);
-}
-
-
-DLL_EXPORTED
-char *
-dcngettext (const char *domainname,
-            const char *msgid1, const char *msgid2, unsigned long int n,
-            int category)
-{
-  return libintl_dcngettext (domainname, msgid1, msgid2, n, category);
-}
-
-
-DLL_EXPORTED
-char *
-textdomain (const char *domainname)
-{
-  return libintl_textdomain (domainname);
-}
-
-
-DLL_EXPORTED
-char *
-bindtextdomain (const char *domainname, const char *dirname)
-{
-  return libintl_bindtextdomain (domainname, dirname);
-}
-
-
-DLL_EXPORTED
-char *
-bind_textdomain_codeset (const char *domainname, const char *codeset)
-{
-  return libintl_bind_textdomain_codeset (domainname, codeset);
-}
diff -urpN mc-4.8.23/intl/intl-exports.c mc-4.8.24/intl/intl-exports.c
--- mc-4.8.23/intl/intl-exports.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/intl-exports.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,36 +0,0 @@
-/* List of exported symbols of libintl on Cygwin.
-   Copyright (C) 2006 Free Software Foundation, Inc.
-   Written by Bruno Haible <bruno@clisp.org>, 2006.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
- /* IMP(x) is a symbol that contains the address of x.  */
-#define IMP(x) _imp__##x
-
- /* Ensure that the variable x is exported from the library, and that a
-    pseudo-variable IMP(x) is available.  */
-#define VARIABLE(x) \
- /* Export x without redefining x.  This code was found by compiling a  \
-    snippet:                                                            \
-      extern __declspec(dllexport) int x; int x = 42;  */               \
- asm (".section .drectve\n");                                           \
- asm (".ascii \" -export:" #x ",data\"\n");                             \
- asm (".data\n");                                                       \
- /* Allocate a pseudo-variable IMP(x).  */                              \
- extern int x;                                                          \
- void * IMP(x) = &x;
-
-VARIABLE(libintl_version)
diff -urpN mc-4.8.23/intl/l10nflist.c mc-4.8.24/intl/l10nflist.c
--- mc-4.8.23/intl/l10nflist.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/l10nflist.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,400 +0,0 @@
-/* Copyright (C) 1995-1999, 2000-2007 Free Software Foundation, Inc.
-   Contributed by Ulrich Drepper <drepper@gnu.ai.mit.edu>, 1995.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Tell glibc's <string.h> to provide a prototype for stpcpy().
-   This must come before <config.h> because <config.h> may include
-   <features.h>, and once <features.h> has been included, it's too late.  */
-#ifndef _GNU_SOURCE
-# define _GNU_SOURCE	1
-#endif
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <string.h>
-
-#if defined _LIBC || defined HAVE_ARGZ_H
-# include <argz.h>
-#endif
-#include <ctype.h>
-#include <sys/types.h>
-#include <stdlib.h>
-
-#include "loadinfo.h"
-
-/* On some strange systems still no definition of NULL is found.  Sigh!  */
-#ifndef NULL
-# if defined __STDC__ && __STDC__
-#  define NULL ((void *) 0)
-# else
-#  define NULL 0
-# endif
-#endif
-
-/* @@ end of prolog @@ */
-
-#ifdef _LIBC
-/* Rename the non ANSI C functions.  This is required by the standard
-   because some ANSI C functions will require linking with this object
-   file and the name space must not be polluted.  */
-# ifndef stpcpy
-#  define stpcpy(dest, src) __stpcpy(dest, src)
-# endif
-#else
-# ifndef HAVE_STPCPY
-static char *stpcpy (char *dest, const char *src);
-# endif
-#endif
-
-/* Pathname support.
-   ISSLASH(C)           tests whether C is a directory separator character.
-   IS_ABSOLUTE_PATH(P)  tests whether P is an absolute path.  If it is not,
-                        it may be concatenated to a directory pathname.
- */
-#if defined _WIN32 || defined __WIN32__ || defined __CYGWIN__ || defined __EMX__ || defined __DJGPP__
-  /* Win32, Cygwin, OS/2, DOS */
-# define ISSLASH(C) ((C) == '/' || (C) == '\\')
-# define HAS_DEVICE(P) \
-    ((((P)[0] >= 'A' && (P)[0] <= 'Z') || ((P)[0] >= 'a' && (P)[0] <= 'z')) \
-     && (P)[1] == ':')
-# define IS_ABSOLUTE_PATH(P) (ISSLASH ((P)[0]) || HAS_DEVICE (P))
-#else
-  /* Unix */
-# define ISSLASH(C) ((C) == '/')
-# define IS_ABSOLUTE_PATH(P) ISSLASH ((P)[0])
-#endif
-
-/* Define function which are usually not available.  */
-
-#ifdef _LIBC
-# define __argz_count(argz, len) INTUSE(__argz_count) (argz, len)
-#elif defined HAVE_ARGZ_COUNT
-# undef __argz_count
-# define __argz_count argz_count
-#else
-/* Returns the number of strings in ARGZ.  */
-static size_t
-argz_count__ (const char *argz, size_t len)
-{
-  size_t count = 0;
-  while (len > 0)
-    {
-      size_t part_len = strlen (argz);
-      argz += part_len + 1;
-      len -= part_len + 1;
-      count++;
-    }
-  return count;
-}
-# undef __argz_count
-# define __argz_count(argz, len) argz_count__ (argz, len)
-#endif	/* !_LIBC && !HAVE_ARGZ_COUNT */
-
-#ifdef _LIBC
-# define __argz_stringify(argz, len, sep) \
-  INTUSE(__argz_stringify) (argz, len, sep)
-#elif defined HAVE_ARGZ_STRINGIFY
-# undef __argz_stringify
-# define __argz_stringify argz_stringify
-#else
-/* Make '\0' separated arg vector ARGZ printable by converting all the '\0's
-   except the last into the character SEP.  */
-static void
-argz_stringify__ (char *argz, size_t len, int sep)
-{
-  while (len > 0)
-    {
-      size_t part_len = strlen (argz);
-      argz += part_len;
-      len -= part_len + 1;
-      if (len > 0)
-	*argz++ = sep;
-    }
-}
-# undef __argz_stringify
-# define __argz_stringify(argz, len, sep) argz_stringify__ (argz, len, sep)
-#endif	/* !_LIBC && !HAVE_ARGZ_STRINGIFY */
-
-#ifdef _LIBC
-#elif defined HAVE_ARGZ_NEXT
-# undef __argz_next
-# define __argz_next argz_next
-#else
-static char *
-argz_next__ (char *argz, size_t argz_len, const char *entry)
-{
-  if (entry)
-    {
-      if (entry < argz + argz_len)
-        entry = strchr (entry, '\0') + 1;
-
-      return entry >= argz + argz_len ? NULL : (char *) entry;
-    }
-  else
-    if (argz_len > 0)
-      return argz;
-    else
-      return 0;
-}
-# undef __argz_next
-# define __argz_next(argz, len, entry) argz_next__ (argz, len, entry)
-#endif	/* !_LIBC && !HAVE_ARGZ_NEXT */
-
-
-/* Return number of bits set in X.  */
-static inline int
-pop (int x)
-{
-  /* We assume that no more than 16 bits are used.  */
-  x = ((x & ~0x5555) >> 1) + (x & 0x5555);
-  x = ((x & ~0x3333) >> 2) + (x & 0x3333);
-  x = ((x >> 4) + x) & 0x0f0f;
-  x = ((x >> 8) + x) & 0xff;
-
-  return x;
-}
-
-
-struct loaded_l10nfile *
-_nl_make_l10nflist (struct loaded_l10nfile **l10nfile_list,
-		    const char *dirlist, size_t dirlist_len,
-		    int mask, const char *language, const char *territory,
-		    const char *codeset, const char *normalized_codeset,
-		    const char *modifier,
-		    const char *filename, int do_allocate)
-{
-  char *abs_filename;
-  struct loaded_l10nfile **lastp;
-  struct loaded_l10nfile *retval;
-  char *cp;
-  size_t dirlist_count;
-  size_t entries;
-  int cnt;
-
-  /* If LANGUAGE contains an absolute directory specification, we ignore
-     DIRLIST.  */
-  if (IS_ABSOLUTE_PATH (language))
-    dirlist_len = 0;
-
-  /* Allocate room for the full file name.  */
-  abs_filename = (char *) malloc (dirlist_len
-				  + strlen (language)
-				  + ((mask & XPG_TERRITORY) != 0
-				     ? strlen (territory) + 1 : 0)
-				  + ((mask & XPG_CODESET) != 0
-				     ? strlen (codeset) + 1 : 0)
-				  + ((mask & XPG_NORM_CODESET) != 0
-				     ? strlen (normalized_codeset) + 1 : 0)
-				  + ((mask & XPG_MODIFIER) != 0
-				     ? strlen (modifier) + 1 : 0)
-				  + 1 + strlen (filename) + 1);
-
-  if (abs_filename == NULL)
-    return NULL;
-
-  /* Construct file name.  */
-  cp = abs_filename;
-  if (dirlist_len > 0)
-    {
-      memcpy (cp, dirlist, dirlist_len);
-      __argz_stringify (cp, dirlist_len, PATH_SEPARATOR);
-      cp += dirlist_len;
-      cp[-1] = '/';
-    }
-
-  cp = stpcpy (cp, language);
-
-  if ((mask & XPG_TERRITORY) != 0)
-    {
-      *cp++ = '_';
-      cp = stpcpy (cp, territory);
-    }
-  if ((mask & XPG_CODESET) != 0)
-    {
-      *cp++ = '.';
-      cp = stpcpy (cp, codeset);
-    }
-  if ((mask & XPG_NORM_CODESET) != 0)
-    {
-      *cp++ = '.';
-      cp = stpcpy (cp, normalized_codeset);
-    }
-  if ((mask & XPG_MODIFIER) != 0)
-    {
-      *cp++ = '@';
-      cp = stpcpy (cp, modifier);
-    }
-
-  *cp++ = '/';
-  stpcpy (cp, filename);
-
-  /* Look in list of already loaded domains whether it is already
-     available.  */
-  lastp = l10nfile_list;
-  for (retval = *l10nfile_list; retval != NULL; retval = retval->next)
-    if (retval->filename != NULL)
-      {
-	int compare = strcmp (retval->filename, abs_filename);
-	if (compare == 0)
-	  /* We found it!  */
-	  break;
-	if (compare < 0)
-	  {
-	    /* It's not in the list.  */
-	    retval = NULL;
-	    break;
-	  }
-
-	lastp = &retval->next;
-      }
-
-  if (retval != NULL || do_allocate == 0)
-    {
-      free (abs_filename);
-      return retval;
-    }
-
-  dirlist_count = (dirlist_len > 0 ? __argz_count (dirlist, dirlist_len) : 1);
-
-  /* Allocate a new loaded_l10nfile.  */
-  retval =
-    (struct loaded_l10nfile *)
-    malloc (sizeof (*retval)
-	    + (((dirlist_count << pop (mask)) + (dirlist_count > 1 ? 1 : 0))
-	       * sizeof (struct loaded_l10nfile *)));
-  if (retval == NULL)
-    {
-      free (abs_filename);
-      return NULL;
-    }
-
-  retval->filename = abs_filename;
-
-  /* We set retval->data to NULL here; it is filled in later.
-     Setting retval->decided to 1 here means that retval does not
-     correspond to a real file (dirlist_count > 1) or is not worth
-     looking up (if an unnormalized codeset was specified).  */
-  retval->decided = (dirlist_count > 1
-		     || ((mask & XPG_CODESET) != 0
-			 && (mask & XPG_NORM_CODESET) != 0));
-  retval->data = NULL;
-
-  retval->next = *lastp;
-  *lastp = retval;
-
-  entries = 0;
-  /* Recurse to fill the inheritance list of RETVAL.
-     If the DIRLIST is a real list (i.e. DIRLIST_COUNT > 1), the RETVAL
-     entry does not correspond to a real file; retval->filename contains
-     colons.  In this case we loop across all elements of DIRLIST and
-     across all bit patterns dominated by MASK.
-     If the DIRLIST is a single directory or entirely redundant (i.e.
-     DIRLIST_COUNT == 1), we loop across all bit patterns dominated by
-     MASK, excluding MASK itself.
-     In either case, we loop down from MASK to 0.  This has the effect
-     that the extra bits in the locale name are dropped in this order:
-     first the modifier, then the territory, then the codeset, then the
-     normalized_codeset.  */
-  for (cnt = dirlist_count > 1 ? mask : mask - 1; cnt >= 0; --cnt)
-    if ((cnt & ~mask) == 0
-	&& !((cnt & XPG_CODESET) != 0 && (cnt & XPG_NORM_CODESET) != 0))
-      {
-	if (dirlist_count > 1)
-	  {
-	    /* Iterate over all elements of the DIRLIST.  */
-	    char *dir = NULL;
-
-	    while ((dir = __argz_next ((char *) dirlist, dirlist_len, dir))
-		   != NULL)
-	      retval->successor[entries++]
-		= _nl_make_l10nflist (l10nfile_list, dir, strlen (dir) + 1,
-				      cnt, language, territory, codeset,
-				      normalized_codeset, modifier, filename,
-				      1);
-	  }
-	else
-	  retval->successor[entries++]
-	    = _nl_make_l10nflist (l10nfile_list, dirlist, dirlist_len,
-				  cnt, language, territory, codeset,
-				  normalized_codeset, modifier, filename, 1);
-      }
-  retval->successor[entries] = NULL;
-
-  return retval;
-}
-
-/* Normalize codeset name.  There is no standard for the codeset
-   names.  Normalization allows the user to use any of the common
-   names.  The return value is dynamically allocated and has to be
-   freed by the caller.  */
-const char *
-_nl_normalize_codeset (const char *codeset, size_t name_len)
-{
-  size_t len = 0;
-  int only_digit = 1;
-  char *retval;
-  char *wp;
-  size_t cnt;
-
-  for (cnt = 0; cnt < name_len; ++cnt)
-    if (isalnum ((unsigned char) codeset[cnt]))
-      {
-	++len;
-
-	if (isalpha ((unsigned char) codeset[cnt]))
-	  only_digit = 0;
-      }
-
-  retval = (char *) malloc ((only_digit ? 3 : 0) + len + 1);
-
-  if (retval != NULL)
-    {
-      if (only_digit)
-	wp = stpcpy (retval, "iso");
-      else
-	wp = retval;
-
-      for (cnt = 0; cnt < name_len; ++cnt)
-	if (isalpha ((unsigned char) codeset[cnt]))
-	  *wp++ = tolower ((unsigned char) codeset[cnt]);
-	else if (isdigit ((unsigned char) codeset[cnt]))
-	  *wp++ = codeset[cnt];
-
-      *wp = '\0';
-    }
-
-  return (const char *) retval;
-}
-
-
-/* @@ begin of epilog @@ */
-
-/* We don't want libintl.a to depend on any other library.  So we
-   avoid the non-standard function stpcpy.  In GNU C Library this
-   function is available, though.  Also allow the symbol HAVE_STPCPY
-   to be defined.  */
-#if !_LIBC && !HAVE_STPCPY
-static char *
-stpcpy (char *dest, const char *src)
-{
-  while ((*dest++ = *src++) != '\0')
-    /* Do nothing. */ ;
-  return dest - 1;
-}
-#endif
diff -urpN mc-4.8.23/intl/langprefs.c mc-4.8.24/intl/langprefs.c
--- mc-4.8.23/intl/langprefs.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/langprefs.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,355 +0,0 @@
-/* Determine the user's language preferences.
-   Copyright (C) 2004-2007 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Written by Bruno Haible <bruno@clisp.org>.
-   Win32 code originally by Michele Cicciotti <hackbunny@reactos.com>.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <stdlib.h>
-
-#if HAVE_CFPREFERENCESCOPYAPPVALUE
-# include <string.h>
-# include <CoreFoundation/CFPreferences.h>
-# include <CoreFoundation/CFPropertyList.h>
-# include <CoreFoundation/CFArray.h>
-# include <CoreFoundation/CFString.h>
-extern void _nl_locale_name_canonicalize (char *name);
-#endif
-
-#if defined _WIN32 || defined __WIN32__
-# define WIN32_NATIVE
-#endif
-
-#ifdef WIN32_NATIVE
-# define WIN32_LEAN_AND_MEAN
-# include <windows.h>
-
-# ifndef MUI_LANGUAGE_NAME
-# define MUI_LANGUAGE_NAME 8
-# endif
-# ifndef STATUS_BUFFER_OVERFLOW
-# define STATUS_BUFFER_OVERFLOW 0x80000005
-# endif
-
-extern void _nl_locale_name_canonicalize (char *name);
-extern const char *_nl_locale_name_from_win32_LANGID (LANGID langid);
-extern const char *_nl_locale_name_from_win32_LCID (LCID lcid);
-
-/* Get the preferences list through the MUI APIs. This works on Windows Vista
-   and newer.  */
-static const char *
-_nl_language_preferences_win32_mui (HMODULE kernel32)
-{
-  /* DWORD GetUserPreferredUILanguages (ULONG dwFlags,
-                                        PULONG pulNumLanguages,
-                                        PWSTR pwszLanguagesBuffer,
-                                        PULONG pcchLanguagesBuffer);  */
-  typedef DWORD (WINAPI *GetUserPreferredUILanguages_func) (ULONG, PULONG, PWSTR, PULONG);
-  GetUserPreferredUILanguages_func p_GetUserPreferredUILanguages;
-
-  p_GetUserPreferredUILanguages =
-   (GetUserPreferredUILanguages_func)
-   GetProcAddress (kernel32, "GetUserPreferredUILanguages");
-  if (p_GetUserPreferredUILanguages != NULL)
-    {
-      ULONG num_languages;
-      ULONG bufsize;
-      DWORD ret;
-
-      bufsize = 0;
-      ret = p_GetUserPreferredUILanguages (MUI_LANGUAGE_NAME,
-                                           &num_languages,
-                                           NULL, &bufsize);
-      if (ret == 0
-          && GetLastError () == STATUS_BUFFER_OVERFLOW
-          && bufsize > 0)
-        {
-          WCHAR *buffer = (WCHAR *) malloc (bufsize * sizeof (WCHAR));
-          if (buffer != NULL)
-            {
-              ret = p_GetUserPreferredUILanguages (MUI_LANGUAGE_NAME,
-                                                   &num_languages,
-                                                   buffer, &bufsize);
-              if (ret)
-                {
-                  /* Convert the list from NUL-delimited WCHAR[] Win32 locale
-                     names to colon-delimited char[] Unix locale names.
-                     We assume that all these locale names are in ASCII,
-                     nonempty and contain no colons.  */
-                  char *languages =
-                    (char *) malloc (bufsize + num_languages * 10 + 1);
-                  if (languages != NULL)
-                    {
-                      const WCHAR *p = buffer;
-                      char *q = languages;
-                      ULONG i;
-                      for (i = 0; i < num_languages; i++)
-                        {
-                          char *q1;
-                          char *q2;
-
-                          q1 = q;
-                          if (i > 0)
-                            *q++ = ':';
-                          q2 = q;
-                          for (; *p != (WCHAR)'\0'; p++)
-                            {
-                              if ((unsigned char) *p != *p || *p == ':')
-                                {
-                                  /* A non-ASCII character or a colon inside
-                                     the Win32 locale name! Punt.  */
-                                  q = q1;
-                                  break;
-                                }
-                              *q++ = (unsigned char) *p;
-                            }
-                          if (q == q1)
-                            /* An unexpected Win32 locale name occurred.  */
-                            break;
-                          *q = '\0';
-                          _nl_locale_name_canonicalize (q2);
-                          q = q2 + strlen (q2);
-                          p++;
-                        }
-                      *q = '\0';
-                      if (q > languages)
-                        {
-                          free (buffer);
-                          return languages;
-                        }
-                      free (languages);
-                    }
-                }
-              free (buffer);
-            }
-        }
-    }
-  return NULL;
-}
-
-/* Get a preference.  This works on Windows ME and newer.  */
-static const char *
-_nl_language_preferences_win32_ME (HMODULE kernel32)
-{
-  /* LANGID GetUserDefaultUILanguage (void);  */
-  typedef LANGID (WINAPI *GetUserDefaultUILanguage_func) (void);
-  GetUserDefaultUILanguage_func p_GetUserDefaultUILanguage;
-
-  p_GetUserDefaultUILanguage =
-   (GetUserDefaultUILanguage_func)
-   GetProcAddress (kernel32, "GetUserDefaultUILanguage");
-  if (p_GetUserDefaultUILanguage != NULL)
-    return _nl_locale_name_from_win32_LANGID (p_GetUserDefaultUILanguage ());
-  return NULL;
-}
-
-/* Get a preference.  This works on Windows 95 and newer.  */
-static const char *
-_nl_language_preferences_win32_95 ()
-{
-  HKEY desktop_resource_locale_key;
-
-  if (RegOpenKeyExA (HKEY_CURRENT_USER,
-                     "Control Panel\\Desktop\\ResourceLocale",
-                     0, KEY_QUERY_VALUE, &desktop_resource_locale_key)
-      == NO_ERROR)
-    {
-      DWORD type;
-      char data[8 + 1];
-      DWORD data_size = sizeof (data);
-      DWORD ret;
-
-      ret = RegQueryValueExA (desktop_resource_locale_key, NULL, NULL,
-                              &type, data, &data_size);
-      RegCloseKey (desktop_resource_locale_key);
-
-      if (ret == NO_ERROR)
-        {
-          /* We expect a string, at most 8 bytes long, that parses as a
-             hexadecimal number.  */
-          if (type == REG_SZ
-              && data_size <= sizeof (data)
-              && (data_size < sizeof (data)
-                  || data[sizeof (data) - 1] == '\0'))
-            {
-              LCID lcid;
-              char *endp;
-              /* Ensure it's NUL terminated.  */
-              if (data_size < sizeof (data))
-                data[data_size] = '\0';
-              /* Parse it as a hexadecimal number.  */
-              lcid = strtoul (data, &endp, 16);
-              if (endp > data && *endp == '\0')
-                return _nl_locale_name_from_win32_LCID (lcid);
-            }
-        }
-    }
-  return NULL;
-}
-
-/* Get the system's preference.  This can be used as a fallback.  */
-static BOOL CALLBACK
-ret_first_language (HMODULE h, LPCSTR type, LPCSTR name, WORD lang, LONG_PTR param)
-{
-  *(const char **)param = _nl_locale_name_from_win32_LANGID (lang);
-  return FALSE;
-}
-static const char *
-_nl_language_preferences_win32_system (HMODULE kernel32)
-{
-  const char *languages = NULL;
-  /* Ignore the warning on mingw here. mingw has a wrong definition of the last
-     parameter type of ENUMRESLANGPROC.  */
-  EnumResourceLanguages (kernel32, RT_VERSION, MAKEINTRESOURCE (1),
-                         ret_first_language, (LONG_PTR)&languages);
-  return languages;
-}
-
-#endif
-
-/* Determine the user's language preferences, as a colon separated list of
-   locale names in XPG syntax
-     language[_territory][.codeset][@modifier]
-   The result must not be freed; it is statically allocated.
-   The LANGUAGE environment variable does not need to be considered; it is
-   already taken into account by the caller.  */
-
-const char *
-_nl_language_preferences_default (void)
-{
-#if HAVE_CFPREFERENCESCOPYAPPVALUE /* MacOS X 10.2 or newer */
-  {
-    /* Cache the preferences list, since CoreFoundation calls are expensive.  */
-    static const char *cached_languages;
-    static int cache_initialized;
-
-    if (!cache_initialized)
-      {
-        CFTypeRef preferences =
-          CFPreferencesCopyAppValue (CFSTR ("AppleLanguages"),
-                                     kCFPreferencesCurrentApplication);
-        if (preferences != NULL
-            && CFGetTypeID (preferences) == CFArrayGetTypeID ())
-          {
-            CFArrayRef prefArray = (CFArrayRef)preferences;
-            int n = CFArrayGetCount (prefArray);
-            char buf[256];
-            size_t size = 0;
-            int i;
-
-            for (i = 0; i < n; i++)
-              {
-                CFTypeRef element = CFArrayGetValueAtIndex (prefArray, i);
-                if (element != NULL
-                    && CFGetTypeID (element) == CFStringGetTypeID ()
-                    && CFStringGetCString ((CFStringRef)element,
-                                           buf, sizeof (buf),
-                                           kCFStringEncodingASCII))
-                  {
-                    _nl_locale_name_canonicalize (buf);
-                    size += strlen (buf) + 1;
-                    /* Most GNU programs use msgids in English and don't ship
-                       an en.mo message catalog.  Therefore when we see "en"
-                       in the preferences list, arrange for gettext() to
-                       return the msgid, and ignore all further elements of
-                       the preferences list.  */
-                    if (strcmp (buf, "en") == 0)
-                      break;
-                  }
-                else
-                  break;
-              }
-            if (size > 0)
-              {
-                char *languages = (char *) malloc (size);
-
-                if (languages != NULL)
-                  {
-                    char *p = languages;
-
-                    for (i = 0; i < n; i++)
-                      {
-                        CFTypeRef element =
-                          CFArrayGetValueAtIndex (prefArray, i);
-                        if (element != NULL
-                            && CFGetTypeID (element) == CFStringGetTypeID ()
-                            && CFStringGetCString ((CFStringRef)element,
-                                                   buf, sizeof (buf),
-                                                   kCFStringEncodingASCII))
-                          {
-                            _nl_locale_name_canonicalize (buf);
-                            strcpy (p, buf);
-                            p += strlen (buf);
-                            *p++ = ':';
-                            if (strcmp (buf, "en") == 0)
-                              break;
-                          }
-                        else
-                          break;
-                      }
-                    *--p = '\0';
-
-                    cached_languages = languages;
-                  }
-              }
-          }
-        cache_initialized = 1;
-      }
-    if (cached_languages != NULL)
-      return cached_languages;
-  }
-#endif
-
-#ifdef WIN32_NATIVE
-  {
-    /* Cache the preferences list, since computing it is expensive.  */
-    static const char *cached_languages;
-    static int cache_initialized;
-
-    /* Activate the new code only when the GETTEXT_MUI environment variable is
-       set, for the time being, since the new code is not well tested.  */
-    if (!cache_initialized && getenv ("GETTEXT_MUI") != NULL)
-      {
-        const char *languages = NULL;
-        HMODULE kernel32 = GetModuleHandle ("kernel32");
-
-        if (kernel32 != NULL)
-          languages = _nl_language_preferences_win32_mui (kernel32);
-
-        if (languages == NULL && kernel32 != NULL)
-          languages = _nl_language_preferences_win32_ME (kernel32);
-
-        if (languages == NULL)
-          languages = _nl_language_preferences_win32_95 ();
-
-        if (languages == NULL && kernel32 != NULL)
-          languages = _nl_language_preferences_win32_system (kernel32);
-
-        cached_languages = languages;
-        cache_initialized = 1;
-      }
-    if (cached_languages != NULL)
-      return cached_languages;
-  }
-#endif
-
-  return NULL;
-}
diff -urpN mc-4.8.23/intl/libgnuintl.h.in mc-4.8.24/intl/libgnuintl.h.in
--- mc-4.8.23/intl/libgnuintl.h.in	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/libgnuintl.h.in	1970-01-01 04:00:00.000000000 +0400
@@ -1,466 +0,0 @@
-/* Message catalogs for internationalization.
-   Copyright (C) 1995-1997, 2000-2010 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _LIBINTL_H
-#define _LIBINTL_H 1
-
-#include <locale.h>
-#if (defined __APPLE__ && defined __MACH__) && @HAVE_NEWLOCALE@
-# include <xlocale.h>
-#endif
-
-/* The LC_MESSAGES locale category is the category used by the functions
-   gettext() and dgettext().  It is specified in POSIX, but not in ANSI C.
-   On systems that don't define it, use an arbitrary value instead.
-   On Solaris, <locale.h> defines __LOCALE_H (or _LOCALE_H in Solaris 2.5)
-   then includes <libintl.h> (i.e. this file!) and then only defines
-   LC_MESSAGES.  To avoid a redefinition warning, don't define LC_MESSAGES
-   in this case.  */
-#if !defined LC_MESSAGES && !(defined __LOCALE_H || (defined _LOCALE_H && defined __sun))
-# define LC_MESSAGES 1729
-#endif
-
-/* We define an additional symbol to signal that we use the GNU
-   implementation of gettext.  */
-#define __USE_GNU_GETTEXT 1
-
-/* Provide information about the supported file formats.  Returns the
-   maximum minor revision number supported for a given major revision.  */
-#define __GNU_GETTEXT_SUPPORTED_REVISION(major) \
-  ((major) == 0 || (major) == 1 ? 1 : -1)
-
-/* Resolve a platform specific conflict on DJGPP.  GNU gettext takes
-   precedence over _conio_gettext.  */
-#ifdef __DJGPP__
-# undef gettext
-#endif
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-
-
-/* Version number: (major<<16) + (minor<<8) + subminor */
-#define LIBINTL_VERSION 0x001201
-extern int libintl_version;
-
-
-/* We redirect the functions to those prefixed with "libintl_".  This is
-   necessary, because some systems define gettext/textdomain/... in the C
-   library (namely, Solaris 2.4 and newer, and GNU libc 2.0 and newer).
-   If we used the unprefixed names, there would be cases where the
-   definition in the C library would override the one in the libintl.so
-   shared library.  Recall that on ELF systems, the symbols are looked
-   up in the following order:
-     1. in the executable,
-     2. in the shared libraries specified on the link command line, in order,
-     3. in the dependencies of the shared libraries specified on the link
-        command line,
-     4. in the dlopen()ed shared libraries, in the order in which they were
-        dlopen()ed.
-   The definition in the C library would override the one in libintl.so if
-   either
-     * -lc is given on the link command line and -lintl isn't, or
-     * -lc is given on the link command line before -lintl, or
-     * libintl.so is a dependency of a dlopen()ed shared library but not
-       linked to the executable at link time.
-   Since Solaris gettext() behaves differently than GNU gettext(), this
-   would be unacceptable.
-
-   The redirection happens by default through macros in C, so that &gettext
-   is independent of the compilation unit, but through inline functions in
-   C++, in order not to interfere with the name mangling of class fields or
-   class methods called 'gettext'.  */
-
-/* The user can define _INTL_REDIRECT_INLINE or _INTL_REDIRECT_MACROS.
-   If he doesn't, we choose the method.  A third possible method is
-   _INTL_REDIRECT_ASM, supported only by GCC.  */
-#if !(defined _INTL_REDIRECT_INLINE || defined _INTL_REDIRECT_MACROS)
-# if defined __GNUC__ && __GNUC__ >= 2 && !(defined __APPLE_CC__ && __APPLE_CC__ > 1) && !defined __MINGW32__ && !(__GNUC__ == 2 && defined _AIX) && (defined __STDC__ || defined __cplusplus)
-#  define _INTL_REDIRECT_ASM
-# else
-#  ifdef __cplusplus
-#   define _INTL_REDIRECT_INLINE
-#  else
-#   define _INTL_REDIRECT_MACROS
-#  endif
-# endif
-#endif
-/* Auxiliary macros.  */
-#ifdef _INTL_REDIRECT_ASM
-# define _INTL_ASM(cname) __asm__ (_INTL_ASMNAME (__USER_LABEL_PREFIX__, #cname))
-# define _INTL_ASMNAME(prefix,cnamestring) _INTL_STRINGIFY (prefix) cnamestring
-# define _INTL_STRINGIFY(prefix) #prefix
-#else
-# define _INTL_ASM(cname)
-#endif
-
-/* _INTL_MAY_RETURN_STRING_ARG(n) declares that the given function may return
-   its n-th argument literally.  This enables GCC to warn for example about
-   printf (gettext ("foo %y")).  */
-#if defined __GNUC__ && __GNUC__ >= 3 && !(defined __APPLE_CC__ && __APPLE_CC__ > 1 && defined __cplusplus)
-# define _INTL_MAY_RETURN_STRING_ARG(n) __attribute__ ((__format_arg__ (n)))
-#else
-# define _INTL_MAY_RETURN_STRING_ARG(n)
-#endif
-
-/* Look up MSGID in the current default message catalog for the current
-   LC_MESSAGES locale.  If not found, returns MSGID itself (the default
-   text).  */
-#ifdef _INTL_REDIRECT_INLINE
-extern char *libintl_gettext (const char *__msgid)
-       _INTL_MAY_RETURN_STRING_ARG (1);
-static inline char *gettext (const char *__msgid)
-{
-  return libintl_gettext (__msgid);
-}
-#else
-#ifdef _INTL_REDIRECT_MACROS
-# define gettext libintl_gettext
-#endif
-extern char *gettext (const char *__msgid)
-       _INTL_ASM (libintl_gettext)
-       _INTL_MAY_RETURN_STRING_ARG (1);
-#endif
-
-/* Look up MSGID in the DOMAINNAME message catalog for the current
-   LC_MESSAGES locale.  */
-#ifdef _INTL_REDIRECT_INLINE
-extern char *libintl_dgettext (const char *__domainname, const char *__msgid)
-       _INTL_MAY_RETURN_STRING_ARG (2);
-static inline char *dgettext (const char *__domainname, const char *__msgid)
-{
-  return libintl_dgettext (__domainname, __msgid);
-}
-#else
-#ifdef _INTL_REDIRECT_MACROS
-# define dgettext libintl_dgettext
-#endif
-extern char *dgettext (const char *__domainname, const char *__msgid)
-       _INTL_ASM (libintl_dgettext)
-       _INTL_MAY_RETURN_STRING_ARG (2);
-#endif
-
-/* Look up MSGID in the DOMAINNAME message catalog for the current CATEGORY
-   locale.  */
-#ifdef _INTL_REDIRECT_INLINE
-extern char *libintl_dcgettext (const char *__domainname, const char *__msgid,
-                                int __category)
-       _INTL_MAY_RETURN_STRING_ARG (2);
-static inline char *dcgettext (const char *__domainname, const char *__msgid,
-                               int __category)
-{
-  return libintl_dcgettext (__domainname, __msgid, __category);
-}
-#else
-#ifdef _INTL_REDIRECT_MACROS
-# define dcgettext libintl_dcgettext
-#endif
-extern char *dcgettext (const char *__domainname, const char *__msgid,
-                        int __category)
-       _INTL_ASM (libintl_dcgettext)
-       _INTL_MAY_RETURN_STRING_ARG (2);
-#endif
-
-
-/* Similar to `gettext' but select the plural form corresponding to the
-   number N.  */
-#ifdef _INTL_REDIRECT_INLINE
-extern char *libintl_ngettext (const char *__msgid1, const char *__msgid2,
-                               unsigned long int __n)
-       _INTL_MAY_RETURN_STRING_ARG (1) _INTL_MAY_RETURN_STRING_ARG (2);
-static inline char *ngettext (const char *__msgid1, const char *__msgid2,
-                              unsigned long int __n)
-{
-  return libintl_ngettext (__msgid1, __msgid2, __n);
-}
-#else
-#ifdef _INTL_REDIRECT_MACROS
-# define ngettext libintl_ngettext
-#endif
-extern char *ngettext (const char *__msgid1, const char *__msgid2,
-                       unsigned long int __n)
-       _INTL_ASM (libintl_ngettext)
-       _INTL_MAY_RETURN_STRING_ARG (1) _INTL_MAY_RETURN_STRING_ARG (2);
-#endif
-
-/* Similar to `dgettext' but select the plural form corresponding to the
-   number N.  */
-#ifdef _INTL_REDIRECT_INLINE
-extern char *libintl_dngettext (const char *__domainname, const char *__msgid1,
-                                const char *__msgid2, unsigned long int __n)
-       _INTL_MAY_RETURN_STRING_ARG (2) _INTL_MAY_RETURN_STRING_ARG (3);
-static inline char *dngettext (const char *__domainname, const char *__msgid1,
-                               const char *__msgid2, unsigned long int __n)
-{
-  return libintl_dngettext (__domainname, __msgid1, __msgid2, __n);
-}
-#else
-#ifdef _INTL_REDIRECT_MACROS
-# define dngettext libintl_dngettext
-#endif
-extern char *dngettext (const char *__domainname,
-                        const char *__msgid1, const char *__msgid2,
-                        unsigned long int __n)
-       _INTL_ASM (libintl_dngettext)
-       _INTL_MAY_RETURN_STRING_ARG (2) _INTL_MAY_RETURN_STRING_ARG (3);
-#endif
-
-/* Similar to `dcgettext' but select the plural form corresponding to the
-   number N.  */
-#ifdef _INTL_REDIRECT_INLINE
-extern char *libintl_dcngettext (const char *__domainname,
-                                 const char *__msgid1, const char *__msgid2,
-                                 unsigned long int __n, int __category)
-       _INTL_MAY_RETURN_STRING_ARG (2) _INTL_MAY_RETURN_STRING_ARG (3);
-static inline char *dcngettext (const char *__domainname,
-                                const char *__msgid1, const char *__msgid2,
-                                unsigned long int __n, int __category)
-{
-  return libintl_dcngettext (__domainname, __msgid1, __msgid2, __n, __category);
-}
-#else
-#ifdef _INTL_REDIRECT_MACROS
-# define dcngettext libintl_dcngettext
-#endif
-extern char *dcngettext (const char *__domainname,
-                         const char *__msgid1, const char *__msgid2,
-                         unsigned long int __n, int __category)
-       _INTL_ASM (libintl_dcngettext)
-       _INTL_MAY_RETURN_STRING_ARG (2) _INTL_MAY_RETURN_STRING_ARG (3);
-#endif
-
-
-#ifndef IN_LIBGLOCALE
-
-/* Set the current default message catalog to DOMAINNAME.
-   If DOMAINNAME is null, return the current default.
-   If DOMAINNAME is "", reset to the default of "messages".  */
-#ifdef _INTL_REDIRECT_INLINE
-extern char *libintl_textdomain (const char *__domainname);
-static inline char *textdomain (const char *__domainname)
-{
-  return libintl_textdomain (__domainname);
-}
-#else
-#ifdef _INTL_REDIRECT_MACROS
-# define textdomain libintl_textdomain
-#endif
-extern char *textdomain (const char *__domainname)
-       _INTL_ASM (libintl_textdomain);
-#endif
-
-/* Specify that the DOMAINNAME message catalog will be found
-   in DIRNAME rather than in the system locale data base.  */
-#ifdef _INTL_REDIRECT_INLINE
-extern char *libintl_bindtextdomain (const char *__domainname,
-                                     const char *__dirname);
-static inline char *bindtextdomain (const char *__domainname,
-                                    const char *__dirname)
-{
-  return libintl_bindtextdomain (__domainname, __dirname);
-}
-#else
-#ifdef _INTL_REDIRECT_MACROS
-# define bindtextdomain libintl_bindtextdomain
-#endif
-extern char *bindtextdomain (const char *__domainname, const char *__dirname)
-       _INTL_ASM (libintl_bindtextdomain);
-#endif
-
-/* Specify the character encoding in which the messages from the
-   DOMAINNAME message catalog will be returned.  */
-#ifdef _INTL_REDIRECT_INLINE
-extern char *libintl_bind_textdomain_codeset (const char *__domainname,
-                                              const char *__codeset);
-static inline char *bind_textdomain_codeset (const char *__domainname,
-                                             const char *__codeset)
-{
-  return libintl_bind_textdomain_codeset (__domainname, __codeset);
-}
-#else
-#ifdef _INTL_REDIRECT_MACROS
-# define bind_textdomain_codeset libintl_bind_textdomain_codeset
-#endif
-extern char *bind_textdomain_codeset (const char *__domainname,
-                                      const char *__codeset)
-       _INTL_ASM (libintl_bind_textdomain_codeset);
-#endif
-
-#endif /* IN_LIBGLOCALE */
-
-
-/* Support for format strings with positions in *printf(), following the
-   POSIX/XSI specification.
-   Note: These replacements for the *printf() functions are visible only
-   in source files that #include <libintl.h> or #include "gettext.h".
-   Packages that use *printf() in source files that don't refer to _()
-   or gettext() but for which the format string could be the return value
-   of _() or gettext() need to add this #include.  Oh well.  */
-
-#if !@HAVE_POSIX_PRINTF@
-
-#include <stdio.h>
-#include <stddef.h>
-
-/* Get va_list.  */
-#if (defined __STDC__ && __STDC__) || defined __cplusplus || defined _MSC_VER
-# include <stdarg.h>
-#else
-# include <varargs.h>
-#endif
-
-#if !(defined fprintf && defined _GL_STDIO_H) /* don't override gnulib */
-#undef fprintf
-#define fprintf libintl_fprintf
-extern int fprintf (FILE *, const char *, ...);
-#endif
-#if !(defined vfprintf && defined _GL_STDIO_H) /* don't override gnulib */
-#undef vfprintf
-#define vfprintf libintl_vfprintf
-extern int vfprintf (FILE *, const char *, va_list);
-#endif
-
-#if !(defined printf && defined _GL_STDIO_H) /* don't override gnulib */
-#undef printf
-#if defined __NetBSD__ || defined __BEOS__ || defined __CYGWIN__ || defined __MINGW32__
-/* Don't break __attribute__((format(printf,M,N))).
-   This redefinition is only possible because the libc in NetBSD, Cygwin,
-   mingw does not have a function __printf__.
-   Alternatively, we could have done this redirection only when compiling with
-   __GNUC__, together with a symbol redirection:
-       extern int printf (const char *, ...)
-              __asm__ (#__USER_LABEL_PREFIX__ "libintl_printf");
-   But doing it now would introduce a binary incompatibility with already
-   distributed versions of libintl on these systems.  */
-# define libintl_printf __printf__
-#endif
-#define printf libintl_printf
-extern int printf (const char *, ...);
-#endif
-#if !(defined vprintf && defined _GL_STDIO_H) /* don't override gnulib */
-#undef vprintf
-#define vprintf libintl_vprintf
-extern int vprintf (const char *, va_list);
-#endif
-
-#if !(defined sprintf && defined _GL_STDIO_H) /* don't override gnulib */
-#undef sprintf
-#define sprintf libintl_sprintf
-extern int sprintf (char *, const char *, ...);
-#endif
-#if !(defined vsprintf && defined _GL_STDIO_H) /* don't override gnulib */
-#undef vsprintf
-#define vsprintf libintl_vsprintf
-extern int vsprintf (char *, const char *, va_list);
-#endif
-
-#if @HAVE_SNPRINTF@
-
-#if !(defined snprintf && defined _GL_STDIO_H) /* don't override gnulib */
-#undef snprintf
-#define snprintf libintl_snprintf
-extern int snprintf (char *, size_t, const char *, ...);
-#endif
-#if !(defined vsnprintf && defined _GL_STDIO_H) /* don't override gnulib */
-#undef vsnprintf
-#define vsnprintf libintl_vsnprintf
-extern int vsnprintf (char *, size_t, const char *, va_list);
-#endif
-
-#endif
-
-#if @HAVE_ASPRINTF@
-
-#if !(defined asprintf && defined _GL_STDIO_H) /* don't override gnulib */
-#undef asprintf
-#define asprintf libintl_asprintf
-extern int asprintf (char **, const char *, ...);
-#endif
-#if !(defined vasprintf && defined _GL_STDIO_H) /* don't override gnulib */
-#undef vasprintf
-#define vasprintf libintl_vasprintf
-extern int vasprintf (char **, const char *, va_list);
-#endif
-
-#endif
-
-#if @HAVE_WPRINTF@
-
-#undef fwprintf
-#define fwprintf libintl_fwprintf
-extern int fwprintf (FILE *, const wchar_t *, ...);
-#undef vfwprintf
-#define vfwprintf libintl_vfwprintf
-extern int vfwprintf (FILE *, const wchar_t *, va_list);
-
-#undef wprintf
-#define wprintf libintl_wprintf
-extern int wprintf (const wchar_t *, ...);
-#undef vwprintf
-#define vwprintf libintl_vwprintf
-extern int vwprintf (const wchar_t *, va_list);
-
-#undef swprintf
-#define swprintf libintl_swprintf
-extern int swprintf (wchar_t *, size_t, const wchar_t *, ...);
-#undef vswprintf
-#define vswprintf libintl_vswprintf
-extern int vswprintf (wchar_t *, size_t, const wchar_t *, va_list);
-
-#endif
-
-#endif
-
-
-/* Support for the locale chosen by the user.  */
-#if (defined __APPLE__ && defined __MACH__) || defined _WIN32 || defined __WIN32__ || defined __CYGWIN__
-
-#undef setlocale
-#define setlocale libintl_setlocale
-extern char *setlocale (int, const char *);
-
-#if @HAVE_NEWLOCALE@
-
-#undef newlocale
-#define newlocale libintl_newlocale
-extern locale_t newlocale (int, const char *, locale_t);
-
-#endif
-
-#endif
-
-
-/* Support for relocatable packages.  */
-
-/* Sets the original and the current installation prefix of the package.
-   Relocation simply replaces a pathname starting with the original prefix
-   by the corresponding pathname with the current prefix instead.  Both
-   prefixes should be directory names without trailing slash (i.e. use ""
-   instead of "/").  */
-#define libintl_set_relocation_prefix libintl_set_relocation_prefix
-extern void
-       libintl_set_relocation_prefix (const char *orig_prefix,
-                                      const char *curr_prefix);
-
-
-#ifdef __cplusplus
-}
-#endif
-
-#endif /* libintl.h */
diff -urpN mc-4.8.23/intl/libintl.rc mc-4.8.24/intl/libintl.rc
--- mc-4.8.23/intl/libintl.rc	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/libintl.rc	1970-01-01 04:00:00.000000000 +0400
@@ -1,38 +0,0 @@
-/* Resources for intl.dll */
-
-#include <winver.h>
-
-VS_VERSION_INFO VERSIONINFO
- FILEVERSION PACKAGE_VERSION_MAJOR,PACKAGE_VERSION_MINOR,PACKAGE_VERSION_SUBMINOR,0
- PRODUCTVERSION PACKAGE_VERSION_MAJOR,PACKAGE_VERSION_MINOR,PACKAGE_VERSION_SUBMINOR,0
- FILEFLAGSMASK 0x3fL /* VS_FFI_FILEFLAGSMASK */
-#ifdef _DEBUG
- FILEFLAGS 0x1L  /* VS_FF_DEBUG */
-#else
- FILEFLAGS 0x0L
-#endif
- FILEOS 0x10004L  /* VOS_DOS_WINDOWS32 */
- FILETYPE 0x2L  /* VFT_DLL */
- FILESUBTYPE 0x0L  /* VFT2_UNKNOWN */
-BEGIN
-    BLOCK "StringFileInfo"
-    BEGIN
-        BLOCK "04090000"  /* Lang = US English, Charset = ASCII */
-        BEGIN
-            VALUE "Comments", "This library is free software; you can redistribute it and/or modify it under the terms of the GNU Library General Public License. You should have received a copy of the GNU Library General Public License along with this library; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA\0"
-            VALUE "CompanyName", "Free Software Foundation\0"
-            VALUE "FileDescription", "LGPLed libintl for Windows NT/2000/XP/Vista/7 and Windows 95/98/ME\0"
-            VALUE "FileVersion", PACKAGE_VERSION_STRING "\0"
-            VALUE "InternalName", "intl.dll\0"
-            VALUE "LegalCopyright", "Copyright (C) 1995-2010\0"
-            VALUE "LegalTrademarks", "\0"
-            VALUE "OriginalFilename", "intl.dll\0"
-            VALUE "ProductName", "libintl: accessing NLS message catalogs\0"
-            VALUE "ProductVersion", PACKAGE_VERSION_STRING "\0"
-        END
-    END
-    BLOCK "VarFileInfo"
-    BEGIN
-        VALUE "Translation", 0x0409, 0  /* US English, ASCII */
-    END
-END
diff -urpN mc-4.8.23/intl/loadinfo.h mc-4.8.24/intl/loadinfo.h
--- mc-4.8.23/intl/loadinfo.h	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/loadinfo.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,132 +0,0 @@
-/* Copyright (C) 1996-1999, 2000-2003, 2005-2006 Free Software Foundation, Inc.
-   This file is part of the GNU C Library.
-   Contributed by Ulrich Drepper <drepper@cygnus.com>, 1996.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _LOADINFO_H
-#define _LOADINFO_H	1
-
-/* Declarations of locale dependent catalog lookup functions.
-   Implemented in
-
-     localealias.c    Possibly replace a locale name by another.
-     explodename.c    Split a locale name into its various fields.
-     l10nflist.c      Generate a list of filenames of possible message catalogs.
-     finddomain.c     Find and open the relevant message catalogs.
-
-   The main function _nl_find_domain() in finddomain.c is declared
-   in gettextP.h.
- */
-
-#ifndef internal_function
-# define internal_function
-#endif
-
-#ifndef LIBINTL_DLL_EXPORTED
-# define LIBINTL_DLL_EXPORTED
-#endif
-
-/* Tell the compiler when a conditional or integer expression is
-   almost always true or almost always false.  */
-#ifndef HAVE_BUILTIN_EXPECT
-# define __builtin_expect(expr, val) (expr)
-#endif
-
-/* Separator in PATH like lists of pathnames.  */
-#if ((defined _WIN32 || defined __WIN32__) && !defined __CYGWIN__) || defined __EMX__ || defined __DJGPP__
-  /* Win32, OS/2, DOS */
-# define PATH_SEPARATOR ';'
-#else
-  /* Unix */
-# define PATH_SEPARATOR ':'
-#endif
-
-/* Encoding of locale name parts.  */
-#define XPG_NORM_CODESET	1
-#define XPG_CODESET		2
-#define XPG_TERRITORY		4
-#define XPG_MODIFIER		8
-
-
-struct loaded_l10nfile
-{
-  const char *filename;
-  int decided;
-
-  const void *data;
-
-  struct loaded_l10nfile *next;
-  struct loaded_l10nfile *successor[1];
-};
-
-
-/* Normalize codeset name.  There is no standard for the codeset
-   names.  Normalization allows the user to use any of the common
-   names.  The return value is dynamically allocated and has to be
-   freed by the caller.  */
-extern const char *_nl_normalize_codeset (const char *codeset,
-					  size_t name_len);
-
-/* Lookup a locale dependent file.
-   *L10NFILE_LIST denotes a pool of lookup results of locale dependent
-   files of the same kind, sorted in decreasing order of ->filename.
-   DIRLIST and DIRLIST_LEN are an argz list of directories in which to
-   look, containing at least one directory (i.e. DIRLIST_LEN > 0).
-   MASK, LANGUAGE, TERRITORY, CODESET, NORMALIZED_CODESET, MODIFIER
-   are the pieces of the locale name, as produced by _nl_explode_name().
-   FILENAME is the filename suffix.
-   The return value is the lookup result, either found in *L10NFILE_LIST,
-   or - if DO_ALLOCATE is nonzero - freshly allocated, or possibly NULL.
-   If the return value is non-NULL, it is added to *L10NFILE_LIST, and
-   its ->next field denotes the chaining inside *L10NFILE_LIST, and
-   furthermore its ->successor[] field contains a list of other lookup
-   results from which this lookup result inherits.  */
-extern struct loaded_l10nfile *
-_nl_make_l10nflist (struct loaded_l10nfile **l10nfile_list,
-		    const char *dirlist, size_t dirlist_len, int mask,
-		    const char *language, const char *territory,
-		    const char *codeset, const char *normalized_codeset,
-		    const char *modifier,
-		    const char *filename, int do_allocate);
-
-/* Lookup the real locale name for a locale alias NAME, or NULL if
-   NAME is not a locale alias (but possibly a real locale name).
-   The return value is statically allocated and must not be freed.  */
-/* Part of the libintl ABI only for the sake of the gettext.m4 macro.  */
-extern LIBINTL_DLL_EXPORTED const char *_nl_expand_alias (const char *name);
-
-/* Split a locale name NAME into its pieces: language, modifier,
-   territory, codeset.
-   NAME gets destructively modified: NUL bytes are inserted here and
-   there.  *LANGUAGE gets assigned NAME.  Each of *MODIFIER, *TERRITORY,
-   *CODESET gets assigned either a pointer into the old NAME string, or
-   NULL.  *NORMALIZED_CODESET gets assigned the expanded *CODESET, if it
-   is different from *CODESET; this one is dynamically allocated and has
-   to be freed by the caller.
-   The return value is a bitmask, where each bit corresponds to one
-   filled-in value:
-     XPG_MODIFIER                for *MODIFIER,
-     XPG_TERRITORY               for *TERRITORY,
-     XPG_CODESET                 for *CODESET,
-     XPG_NORM_CODESET            for *NORMALIZED_CODESET.
- */
-extern int _nl_explode_name (char *name, const char **language,
-			     const char **modifier, const char **territory,
-			     const char **codeset,
-			     const char **normalized_codeset);
-
-#endif	/* loadinfo.h */
diff -urpN mc-4.8.23/intl/loadmsgcat.c mc-4.8.24/intl/loadmsgcat.c
--- mc-4.8.23/intl/loadmsgcat.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/loadmsgcat.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,1333 +0,0 @@
-/* Load needed message catalogs.
-   Copyright (C) 1995-1999, 2000-2008 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Tell glibc's <string.h> to provide a prototype for mempcpy().
-   This must come before <config.h> because <config.h> may include
-   <features.h>, and once <features.h> has been included, it's too late.  */
-#ifndef _GNU_SOURCE
-# define _GNU_SOURCE    1
-#endif
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <ctype.h>
-#include <errno.h>
-#include <fcntl.h>
-#include <sys/types.h>
-#include <sys/stat.h>
-
-#ifdef __GNUC__
-# undef  alloca
-# define alloca __builtin_alloca
-# define HAVE_ALLOCA 1
-#else
-# ifdef _MSC_VER
-#  include <malloc.h>
-#  define alloca _alloca
-# else
-#  if defined HAVE_ALLOCA_H || defined _LIBC
-#   include <alloca.h>
-#  else
-#   ifdef _AIX
- #pragma alloca
-#   else
-#    ifndef alloca
-char *alloca ();
-#    endif
-#   endif
-#  endif
-# endif
-#endif
-
-#include <stdlib.h>
-#include <string.h>
-
-#if defined HAVE_UNISTD_H || defined _LIBC
-# include <unistd.h>
-#endif
-
-#ifdef _LIBC
-# include <langinfo.h>
-# include <locale.h>
-#endif
-
-#if (defined HAVE_MMAP && defined HAVE_MUNMAP && !defined DISALLOW_MMAP) \
-    || (defined _LIBC && defined _POSIX_MAPPED_FILES)
-# include <sys/mman.h>
-# undef HAVE_MMAP
-# define HAVE_MMAP	1
-#else
-# undef HAVE_MMAP
-#endif
-
-#if defined HAVE_STDINT_H_WITH_UINTMAX || defined _LIBC
-# include <stdint.h>
-#endif
-#if defined HAVE_INTTYPES_H || defined _LIBC
-# include <inttypes.h>
-#endif
-
-#include "gmo.h"
-#include "gettextP.h"
-#include "hash-string.h"
-#include "plural-exp.h"
-
-#ifdef _LIBC
-# include "../locale/localeinfo.h"
-# include <not-cancel.h>
-#endif
-
-/* Handle multi-threaded applications.  */
-#ifdef _LIBC
-# include <bits/libc-lock.h>
-#else
-# include "lock.h"
-#endif
-
-/* Provide fallback values for macros that ought to be defined in <inttypes.h>.
-   Note that our fallback values need not be literal strings, because we don't
-   use them with preprocessor string concatenation.  */
-#if !defined PRId8 || PRI_MACROS_BROKEN
-# undef PRId8
-# define PRId8 "d"
-#endif
-#if !defined PRIi8 || PRI_MACROS_BROKEN
-# undef PRIi8
-# define PRIi8 "i"
-#endif
-#if !defined PRIo8 || PRI_MACROS_BROKEN
-# undef PRIo8
-# define PRIo8 "o"
-#endif
-#if !defined PRIu8 || PRI_MACROS_BROKEN
-# undef PRIu8
-# define PRIu8 "u"
-#endif
-#if !defined PRIx8 || PRI_MACROS_BROKEN
-# undef PRIx8
-# define PRIx8 "x"
-#endif
-#if !defined PRIX8 || PRI_MACROS_BROKEN
-# undef PRIX8
-# define PRIX8 "X"
-#endif
-#if !defined PRId16 || PRI_MACROS_BROKEN
-# undef PRId16
-# define PRId16 "d"
-#endif
-#if !defined PRIi16 || PRI_MACROS_BROKEN
-# undef PRIi16
-# define PRIi16 "i"
-#endif
-#if !defined PRIo16 || PRI_MACROS_BROKEN
-# undef PRIo16
-# define PRIo16 "o"
-#endif
-#if !defined PRIu16 || PRI_MACROS_BROKEN
-# undef PRIu16
-# define PRIu16 "u"
-#endif
-#if !defined PRIx16 || PRI_MACROS_BROKEN
-# undef PRIx16
-# define PRIx16 "x"
-#endif
-#if !defined PRIX16 || PRI_MACROS_BROKEN
-# undef PRIX16
-# define PRIX16 "X"
-#endif
-#if !defined PRId32 || PRI_MACROS_BROKEN
-# undef PRId32
-# define PRId32 "d"
-#endif
-#if !defined PRIi32 || PRI_MACROS_BROKEN
-# undef PRIi32
-# define PRIi32 "i"
-#endif
-#if !defined PRIo32 || PRI_MACROS_BROKEN
-# undef PRIo32
-# define PRIo32 "o"
-#endif
-#if !defined PRIu32 || PRI_MACROS_BROKEN
-# undef PRIu32
-# define PRIu32 "u"
-#endif
-#if !defined PRIx32 || PRI_MACROS_BROKEN
-# undef PRIx32
-# define PRIx32 "x"
-#endif
-#if !defined PRIX32 || PRI_MACROS_BROKEN
-# undef PRIX32
-# define PRIX32 "X"
-#endif
-#if !defined PRId64 || PRI_MACROS_BROKEN
-# undef PRId64
-# define PRId64 (sizeof (long) == 8 ? "ld" : "lld")
-#endif
-#if !defined PRIi64 || PRI_MACROS_BROKEN
-# undef PRIi64
-# define PRIi64 (sizeof (long) == 8 ? "li" : "lli")
-#endif
-#if !defined PRIo64 || PRI_MACROS_BROKEN
-# undef PRIo64
-# define PRIo64 (sizeof (long) == 8 ? "lo" : "llo")
-#endif
-#if !defined PRIu64 || PRI_MACROS_BROKEN
-# undef PRIu64
-# define PRIu64 (sizeof (long) == 8 ? "lu" : "llu")
-#endif
-#if !defined PRIx64 || PRI_MACROS_BROKEN
-# undef PRIx64
-# define PRIx64 (sizeof (long) == 8 ? "lx" : "llx")
-#endif
-#if !defined PRIX64 || PRI_MACROS_BROKEN
-# undef PRIX64
-# define PRIX64 (sizeof (long) == 8 ? "lX" : "llX")
-#endif
-#if !defined PRIdLEAST8 || PRI_MACROS_BROKEN
-# undef PRIdLEAST8
-# define PRIdLEAST8 "d"
-#endif
-#if !defined PRIiLEAST8 || PRI_MACROS_BROKEN
-# undef PRIiLEAST8
-# define PRIiLEAST8 "i"
-#endif
-#if !defined PRIoLEAST8 || PRI_MACROS_BROKEN
-# undef PRIoLEAST8
-# define PRIoLEAST8 "o"
-#endif
-#if !defined PRIuLEAST8 || PRI_MACROS_BROKEN
-# undef PRIuLEAST8
-# define PRIuLEAST8 "u"
-#endif
-#if !defined PRIxLEAST8 || PRI_MACROS_BROKEN
-# undef PRIxLEAST8
-# define PRIxLEAST8 "x"
-#endif
-#if !defined PRIXLEAST8 || PRI_MACROS_BROKEN
-# undef PRIXLEAST8
-# define PRIXLEAST8 "X"
-#endif
-#if !defined PRIdLEAST16 || PRI_MACROS_BROKEN
-# undef PRIdLEAST16
-# define PRIdLEAST16 "d"
-#endif
-#if !defined PRIiLEAST16 || PRI_MACROS_BROKEN
-# undef PRIiLEAST16
-# define PRIiLEAST16 "i"
-#endif
-#if !defined PRIoLEAST16 || PRI_MACROS_BROKEN
-# undef PRIoLEAST16
-# define PRIoLEAST16 "o"
-#endif
-#if !defined PRIuLEAST16 || PRI_MACROS_BROKEN
-# undef PRIuLEAST16
-# define PRIuLEAST16 "u"
-#endif
-#if !defined PRIxLEAST16 || PRI_MACROS_BROKEN
-# undef PRIxLEAST16
-# define PRIxLEAST16 "x"
-#endif
-#if !defined PRIXLEAST16 || PRI_MACROS_BROKEN
-# undef PRIXLEAST16
-# define PRIXLEAST16 "X"
-#endif
-#if !defined PRIdLEAST32 || PRI_MACROS_BROKEN
-# undef PRIdLEAST32
-# define PRIdLEAST32 "d"
-#endif
-#if !defined PRIiLEAST32 || PRI_MACROS_BROKEN
-# undef PRIiLEAST32
-# define PRIiLEAST32 "i"
-#endif
-#if !defined PRIoLEAST32 || PRI_MACROS_BROKEN
-# undef PRIoLEAST32
-# define PRIoLEAST32 "o"
-#endif
-#if !defined PRIuLEAST32 || PRI_MACROS_BROKEN
-# undef PRIuLEAST32
-# define PRIuLEAST32 "u"
-#endif
-#if !defined PRIxLEAST32 || PRI_MACROS_BROKEN
-# undef PRIxLEAST32
-# define PRIxLEAST32 "x"
-#endif
-#if !defined PRIXLEAST32 || PRI_MACROS_BROKEN
-# undef PRIXLEAST32
-# define PRIXLEAST32 "X"
-#endif
-#if !defined PRIdLEAST64 || PRI_MACROS_BROKEN
-# undef PRIdLEAST64
-# define PRIdLEAST64 PRId64
-#endif
-#if !defined PRIiLEAST64 || PRI_MACROS_BROKEN
-# undef PRIiLEAST64
-# define PRIiLEAST64 PRIi64
-#endif
-#if !defined PRIoLEAST64 || PRI_MACROS_BROKEN
-# undef PRIoLEAST64
-# define PRIoLEAST64 PRIo64
-#endif
-#if !defined PRIuLEAST64 || PRI_MACROS_BROKEN
-# undef PRIuLEAST64
-# define PRIuLEAST64 PRIu64
-#endif
-#if !defined PRIxLEAST64 || PRI_MACROS_BROKEN
-# undef PRIxLEAST64
-# define PRIxLEAST64 PRIx64
-#endif
-#if !defined PRIXLEAST64 || PRI_MACROS_BROKEN
-# undef PRIXLEAST64
-# define PRIXLEAST64 PRIX64
-#endif
-#if !defined PRIdFAST8 || PRI_MACROS_BROKEN
-# undef PRIdFAST8
-# define PRIdFAST8 "d"
-#endif
-#if !defined PRIiFAST8 || PRI_MACROS_BROKEN
-# undef PRIiFAST8
-# define PRIiFAST8 "i"
-#endif
-#if !defined PRIoFAST8 || PRI_MACROS_BROKEN
-# undef PRIoFAST8
-# define PRIoFAST8 "o"
-#endif
-#if !defined PRIuFAST8 || PRI_MACROS_BROKEN
-# undef PRIuFAST8
-# define PRIuFAST8 "u"
-#endif
-#if !defined PRIxFAST8 || PRI_MACROS_BROKEN
-# undef PRIxFAST8
-# define PRIxFAST8 "x"
-#endif
-#if !defined PRIXFAST8 || PRI_MACROS_BROKEN
-# undef PRIXFAST8
-# define PRIXFAST8 "X"
-#endif
-#if !defined PRIdFAST16 || PRI_MACROS_BROKEN
-# undef PRIdFAST16
-# define PRIdFAST16 "d"
-#endif
-#if !defined PRIiFAST16 || PRI_MACROS_BROKEN
-# undef PRIiFAST16
-# define PRIiFAST16 "i"
-#endif
-#if !defined PRIoFAST16 || PRI_MACROS_BROKEN
-# undef PRIoFAST16
-# define PRIoFAST16 "o"
-#endif
-#if !defined PRIuFAST16 || PRI_MACROS_BROKEN
-# undef PRIuFAST16
-# define PRIuFAST16 "u"
-#endif
-#if !defined PRIxFAST16 || PRI_MACROS_BROKEN
-# undef PRIxFAST16
-# define PRIxFAST16 "x"
-#endif
-#if !defined PRIXFAST16 || PRI_MACROS_BROKEN
-# undef PRIXFAST16
-# define PRIXFAST16 "X"
-#endif
-#if !defined PRIdFAST32 || PRI_MACROS_BROKEN
-# undef PRIdFAST32
-# define PRIdFAST32 "d"
-#endif
-#if !defined PRIiFAST32 || PRI_MACROS_BROKEN
-# undef PRIiFAST32
-# define PRIiFAST32 "i"
-#endif
-#if !defined PRIoFAST32 || PRI_MACROS_BROKEN
-# undef PRIoFAST32
-# define PRIoFAST32 "o"
-#endif
-#if !defined PRIuFAST32 || PRI_MACROS_BROKEN
-# undef PRIuFAST32
-# define PRIuFAST32 "u"
-#endif
-#if !defined PRIxFAST32 || PRI_MACROS_BROKEN
-# undef PRIxFAST32
-# define PRIxFAST32 "x"
-#endif
-#if !defined PRIXFAST32 || PRI_MACROS_BROKEN
-# undef PRIXFAST32
-# define PRIXFAST32 "X"
-#endif
-#if !defined PRIdFAST64 || PRI_MACROS_BROKEN
-# undef PRIdFAST64
-# define PRIdFAST64 PRId64
-#endif
-#if !defined PRIiFAST64 || PRI_MACROS_BROKEN
-# undef PRIiFAST64
-# define PRIiFAST64 PRIi64
-#endif
-#if !defined PRIoFAST64 || PRI_MACROS_BROKEN
-# undef PRIoFAST64
-# define PRIoFAST64 PRIo64
-#endif
-#if !defined PRIuFAST64 || PRI_MACROS_BROKEN
-# undef PRIuFAST64
-# define PRIuFAST64 PRIu64
-#endif
-#if !defined PRIxFAST64 || PRI_MACROS_BROKEN
-# undef PRIxFAST64
-# define PRIxFAST64 PRIx64
-#endif
-#if !defined PRIXFAST64 || PRI_MACROS_BROKEN
-# undef PRIXFAST64
-# define PRIXFAST64 PRIX64
-#endif
-#if !defined PRIdMAX || PRI_MACROS_BROKEN
-# undef PRIdMAX
-# define PRIdMAX (sizeof (uintmax_t) == sizeof (long) ? "ld" : "lld")
-#endif
-#if !defined PRIiMAX || PRI_MACROS_BROKEN
-# undef PRIiMAX
-# define PRIiMAX (sizeof (uintmax_t) == sizeof (long) ? "li" : "lli")
-#endif
-#if !defined PRIoMAX || PRI_MACROS_BROKEN
-# undef PRIoMAX
-# define PRIoMAX (sizeof (uintmax_t) == sizeof (long) ? "lo" : "llo")
-#endif
-#if !defined PRIuMAX || PRI_MACROS_BROKEN
-# undef PRIuMAX
-# define PRIuMAX (sizeof (uintmax_t) == sizeof (long) ? "lu" : "llu")
-#endif
-#if !defined PRIxMAX || PRI_MACROS_BROKEN
-# undef PRIxMAX
-# define PRIxMAX (sizeof (uintmax_t) == sizeof (long) ? "lx" : "llx")
-#endif
-#if !defined PRIXMAX || PRI_MACROS_BROKEN
-# undef PRIXMAX
-# define PRIXMAX (sizeof (uintmax_t) == sizeof (long) ? "lX" : "llX")
-#endif
-#if !defined PRIdPTR || PRI_MACROS_BROKEN
-# undef PRIdPTR
-# define PRIdPTR \
-  (sizeof (void *) == sizeof (long) ? "ld" : \
-   sizeof (void *) == sizeof (int) ? "d" : \
-   "lld")
-#endif
-#if !defined PRIiPTR || PRI_MACROS_BROKEN
-# undef PRIiPTR
-# define PRIiPTR \
-  (sizeof (void *) == sizeof (long) ? "li" : \
-   sizeof (void *) == sizeof (int) ? "i" : \
-   "lli")
-#endif
-#if !defined PRIoPTR || PRI_MACROS_BROKEN
-# undef PRIoPTR
-# define PRIoPTR \
-  (sizeof (void *) == sizeof (long) ? "lo" : \
-   sizeof (void *) == sizeof (int) ? "o" : \
-   "llo")
-#endif
-#if !defined PRIuPTR || PRI_MACROS_BROKEN
-# undef PRIuPTR
-# define PRIuPTR \
-  (sizeof (void *) == sizeof (long) ? "lu" : \
-   sizeof (void *) == sizeof (int) ? "u" : \
-   "llu")
-#endif
-#if !defined PRIxPTR || PRI_MACROS_BROKEN
-# undef PRIxPTR
-# define PRIxPTR \
-  (sizeof (void *) == sizeof (long) ? "lx" : \
-   sizeof (void *) == sizeof (int) ? "x" : \
-   "llx")
-#endif
-#if !defined PRIXPTR || PRI_MACROS_BROKEN
-# undef PRIXPTR
-# define PRIXPTR \
-  (sizeof (void *) == sizeof (long) ? "lX" : \
-   sizeof (void *) == sizeof (int) ? "X" : \
-   "llX")
-#endif
-
-/* @@ end of prolog @@ */
-
-#ifdef _LIBC
-/* Rename the non ISO C functions.  This is required by the standard
-   because some ISO C functions will require linking with this object
-   file and the name space must not be polluted.  */
-# define open(name, flags)	open_not_cancel_2 (name, flags)
-# define close(fd)		close_not_cancel_no_status (fd)
-# define read(fd, buf, n)	read_not_cancel (fd, buf, n)
-# define mmap(addr, len, prot, flags, fd, offset) \
-  __mmap (addr, len, prot, flags, fd, offset)
-# define munmap(addr, len)	__munmap (addr, len)
-#endif
-
-/* For those losing systems which don't have `alloca' we have to add
-   some additional code emulating it.  */
-#ifdef HAVE_ALLOCA
-# define freea(p) /* nothing */
-#else
-# define alloca(n) malloc (n)
-# define freea(p) free (p)
-#endif
-
-/* For systems that distinguish between text and binary I/O.
-   O_BINARY is usually declared in <fcntl.h>. */
-#if !defined O_BINARY && defined _O_BINARY
-  /* For MSC-compatible compilers.  */
-# define O_BINARY _O_BINARY
-# define O_TEXT _O_TEXT
-#endif
-#ifdef __BEOS__
-  /* BeOS 5 has O_BINARY and O_TEXT, but they have no effect.  */
-# undef O_BINARY
-# undef O_TEXT
-#endif
-/* On reasonable systems, binary I/O is the default.  */
-#ifndef O_BINARY
-# define O_BINARY 0
-#endif
-
-
-/* We need a sign, whether a new catalog was loaded, which can be associated
-   with all translations.  This is important if the translations are
-   cached by one of GCC's features.  */
-int _nl_msg_cat_cntr;
-
-
-/* Expand a system dependent string segment.  Return NULL if unsupported.  */
-static const char *
-get_sysdep_segment_value (const char *name)
-{
-  /* Test for an ISO C 99 section 7.8.1 format string directive.
-     Syntax:
-     P R I { d | i | o | u | x | X }
-     { { | LEAST | FAST } { 8 | 16 | 32 | 64 } | MAX | PTR }  */
-  /* We don't use a table of 14 times 6 'const char *' strings here, because
-     data relocations cost startup time.  */
-  if (name[0] == 'P' && name[1] == 'R' && name[2] == 'I')
-    {
-      if (name[3] == 'd' || name[3] == 'i' || name[3] == 'o' || name[3] == 'u'
-	  || name[3] == 'x' || name[3] == 'X')
-	{
-	  if (name[4] == '8' && name[5] == '\0')
-	    {
-	      if (name[3] == 'd')
-		return PRId8;
-	      if (name[3] == 'i')
-		return PRIi8;
-	      if (name[3] == 'o')
-		return PRIo8;
-	      if (name[3] == 'u')
-		return PRIu8;
-	      if (name[3] == 'x')
-		return PRIx8;
-	      if (name[3] == 'X')
-		return PRIX8;
-	      abort ();
-	    }
-	  if (name[4] == '1' && name[5] == '6' && name[6] == '\0')
-	    {
-	      if (name[3] == 'd')
-		return PRId16;
-	      if (name[3] == 'i')
-		return PRIi16;
-	      if (name[3] == 'o')
-		return PRIo16;
-	      if (name[3] == 'u')
-		return PRIu16;
-	      if (name[3] == 'x')
-		return PRIx16;
-	      if (name[3] == 'X')
-		return PRIX16;
-	      abort ();
-	    }
-	  if (name[4] == '3' && name[5] == '2' && name[6] == '\0')
-	    {
-	      if (name[3] == 'd')
-		return PRId32;
-	      if (name[3] == 'i')
-		return PRIi32;
-	      if (name[3] == 'o')
-		return PRIo32;
-	      if (name[3] == 'u')
-		return PRIu32;
-	      if (name[3] == 'x')
-		return PRIx32;
-	      if (name[3] == 'X')
-		return PRIX32;
-	      abort ();
-	    }
-	  if (name[4] == '6' && name[5] == '4' && name[6] == '\0')
-	    {
-	      if (name[3] == 'd')
-		return PRId64;
-	      if (name[3] == 'i')
-		return PRIi64;
-	      if (name[3] == 'o')
-		return PRIo64;
-	      if (name[3] == 'u')
-		return PRIu64;
-	      if (name[3] == 'x')
-		return PRIx64;
-	      if (name[3] == 'X')
-		return PRIX64;
-	      abort ();
-	    }
-	  if (name[4] == 'L' && name[5] == 'E' && name[6] == 'A'
-	      && name[7] == 'S' && name[8] == 'T')
-	    {
-	      if (name[9] == '8' && name[10] == '\0')
-		{
-		  if (name[3] == 'd')
-		    return PRIdLEAST8;
-		  if (name[3] == 'i')
-		    return PRIiLEAST8;
-		  if (name[3] == 'o')
-		    return PRIoLEAST8;
-		  if (name[3] == 'u')
-		    return PRIuLEAST8;
-		  if (name[3] == 'x')
-		    return PRIxLEAST8;
-		  if (name[3] == 'X')
-		    return PRIXLEAST8;
-		  abort ();
-		}
-	      if (name[9] == '1' && name[10] == '6' && name[11] == '\0')
-		{
-		  if (name[3] == 'd')
-		    return PRIdLEAST16;
-		  if (name[3] == 'i')
-		    return PRIiLEAST16;
-		  if (name[3] == 'o')
-		    return PRIoLEAST16;
-		  if (name[3] == 'u')
-		    return PRIuLEAST16;
-		  if (name[3] == 'x')
-		    return PRIxLEAST16;
-		  if (name[3] == 'X')
-		    return PRIXLEAST16;
-		  abort ();
-		}
-	      if (name[9] == '3' && name[10] == '2' && name[11] == '\0')
-		{
-		  if (name[3] == 'd')
-		    return PRIdLEAST32;
-		  if (name[3] == 'i')
-		    return PRIiLEAST32;
-		  if (name[3] == 'o')
-		    return PRIoLEAST32;
-		  if (name[3] == 'u')
-		    return PRIuLEAST32;
-		  if (name[3] == 'x')
-		    return PRIxLEAST32;
-		  if (name[3] == 'X')
-		    return PRIXLEAST32;
-		  abort ();
-		}
-	      if (name[9] == '6' && name[10] == '4' && name[11] == '\0')
-		{
-		  if (name[3] == 'd')
-		    return PRIdLEAST64;
-		  if (name[3] == 'i')
-		    return PRIiLEAST64;
-		  if (name[3] == 'o')
-		    return PRIoLEAST64;
-		  if (name[3] == 'u')
-		    return PRIuLEAST64;
-		  if (name[3] == 'x')
-		    return PRIxLEAST64;
-		  if (name[3] == 'X')
-		    return PRIXLEAST64;
-		  abort ();
-		}
-	    }
-	  if (name[4] == 'F' && name[5] == 'A' && name[6] == 'S'
-	      && name[7] == 'T')
-	    {
-	      if (name[8] == '8' && name[9] == '\0')
-		{
-		  if (name[3] == 'd')
-		    return PRIdFAST8;
-		  if (name[3] == 'i')
-		    return PRIiFAST8;
-		  if (name[3] == 'o')
-		    return PRIoFAST8;
-		  if (name[3] == 'u')
-		    return PRIuFAST8;
-		  if (name[3] == 'x')
-		    return PRIxFAST8;
-		  if (name[3] == 'X')
-		    return PRIXFAST8;
-		  abort ();
-		}
-	      if (name[8] == '1' && name[9] == '6' && name[10] == '\0')
-		{
-		  if (name[3] == 'd')
-		    return PRIdFAST16;
-		  if (name[3] == 'i')
-		    return PRIiFAST16;
-		  if (name[3] == 'o')
-		    return PRIoFAST16;
-		  if (name[3] == 'u')
-		    return PRIuFAST16;
-		  if (name[3] == 'x')
-		    return PRIxFAST16;
-		  if (name[3] == 'X')
-		    return PRIXFAST16;
-		  abort ();
-		}
-	      if (name[8] == '3' && name[9] == '2' && name[10] == '\0')
-		{
-		  if (name[3] == 'd')
-		    return PRIdFAST32;
-		  if (name[3] == 'i')
-		    return PRIiFAST32;
-		  if (name[3] == 'o')
-		    return PRIoFAST32;
-		  if (name[3] == 'u')
-		    return PRIuFAST32;
-		  if (name[3] == 'x')
-		    return PRIxFAST32;
-		  if (name[3] == 'X')
-		    return PRIXFAST32;
-		  abort ();
-		}
-	      if (name[8] == '6' && name[9] == '4' && name[10] == '\0')
-		{
-		  if (name[3] == 'd')
-		    return PRIdFAST64;
-		  if (name[3] == 'i')
-		    return PRIiFAST64;
-		  if (name[3] == 'o')
-		    return PRIoFAST64;
-		  if (name[3] == 'u')
-		    return PRIuFAST64;
-		  if (name[3] == 'x')
-		    return PRIxFAST64;
-		  if (name[3] == 'X')
-		    return PRIXFAST64;
-		  abort ();
-		}
-	    }
-	  if (name[4] == 'M' && name[5] == 'A' && name[6] == 'X'
-	      && name[7] == '\0')
-	    {
-	      if (name[3] == 'd')
-		return PRIdMAX;
-	      if (name[3] == 'i')
-		return PRIiMAX;
-	      if (name[3] == 'o')
-		return PRIoMAX;
-	      if (name[3] == 'u')
-		return PRIuMAX;
-	      if (name[3] == 'x')
-		return PRIxMAX;
-	      if (name[3] == 'X')
-		return PRIXMAX;
-	      abort ();
-	    }
-	  if (name[4] == 'P' && name[5] == 'T' && name[6] == 'R'
-	      && name[7] == '\0')
-	    {
-	      if (name[3] == 'd')
-		return PRIdPTR;
-	      if (name[3] == 'i')
-		return PRIiPTR;
-	      if (name[3] == 'o')
-		return PRIoPTR;
-	      if (name[3] == 'u')
-		return PRIuPTR;
-	      if (name[3] == 'x')
-		return PRIxPTR;
-	      if (name[3] == 'X')
-		return PRIXPTR;
-	      abort ();
-	    }
-	}
-    }
-  /* Test for a glibc specific printf() format directive flag.  */
-  if (name[0] == 'I' && name[1] == '\0')
-    {
-#if defined _LIBC || __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 2)
-      /* The 'I' flag, in numeric format directives, replaces ASCII digits
-	 with the 'outdigits' defined in the LC_CTYPE locale facet.  This is
-	 used for Farsi (Persian) and maybe Arabic.  */
-      return "I";
-#else
-      return "";
-#endif
-    }
-  /* Other system dependent strings are not valid.  */
-  return NULL;
-}
-
-/* Load the message catalogs specified by FILENAME.  If it is no valid
-   message catalog do nothing.  */
-void
-internal_function
-_nl_load_domain (struct loaded_l10nfile *domain_file,
-		 struct binding *domainbinding)
-{
-  __libc_lock_define_initialized_recursive (static, lock)
-  int fd = -1;
-  size_t size;
-#ifdef _LIBC
-  struct stat64 st;
-#else
-  struct stat st;
-#endif
-  struct mo_file_header *data = (struct mo_file_header *) -1;
-  int use_mmap = 0;
-  struct loaded_domain *domain;
-  int revision;
-  const char *nullentry;
-  size_t nullentrylen;
-
-  __libc_lock_lock_recursive (lock);
-  if (domain_file->decided != 0)
-    {
-      /* There are two possibilities:
-
-	 + this is the same thread calling again during this initialization
-	   via _nl_find_msg.  We have initialized everything this call needs.
-
-	 + this is another thread which tried to initialize this object.
-	   Not necessary anymore since if the lock is available this
-	   is finished.
-      */
-      goto done;
-    }
-
-  domain_file->decided = -1;
-  domain_file->data = NULL;
-
-  /* Note that it would be useless to store domainbinding in domain_file
-     because domainbinding might be == NULL now but != NULL later (after
-     a call to bind_textdomain_codeset).  */
-
-  /* If the record does not represent a valid locale the FILENAME
-     might be NULL.  This can happen when according to the given
-     specification the locale file name is different for XPG and CEN
-     syntax.  */
-  if (domain_file->filename == NULL)
-    goto out;
-
-  /* Try to open the addressed file.  */
-  fd = open (domain_file->filename, O_RDONLY | O_BINARY);
-  if (fd == -1)
-    goto out;
-
-  /* We must know about the size of the file.  */
-  if (
-#ifdef _LIBC
-      __builtin_expect (fstat64 (fd, &st) != 0, 0)
-#else
-      __builtin_expect (fstat (fd, &st) != 0, 0)
-#endif
-      || __builtin_expect ((size = (size_t) st.st_size) != st.st_size, 0)
-      || __builtin_expect (size < sizeof (struct mo_file_header), 0))
-    /* Something went wrong.  */
-    goto out;
-
-#ifdef HAVE_MMAP
-  /* Now we are ready to load the file.  If mmap() is available we try
-     this first.  If not available or it failed we try to load it.  */
-  data = (struct mo_file_header *) mmap (NULL, size, PROT_READ,
-					 MAP_PRIVATE, fd, 0);
-
-  if (__builtin_expect (data != (struct mo_file_header *) -1, 1))
-    {
-      /* mmap() call was successful.  */
-      close (fd);
-      fd = -1;
-      use_mmap = 1;
-    }
-#endif
-
-  /* If the data is not yet available (i.e. mmap'ed) we try to load
-     it manually.  */
-  if (data == (struct mo_file_header *) -1)
-    {
-      size_t to_read;
-      char *read_ptr;
-
-      data = (struct mo_file_header *) malloc (size);
-      if (data == NULL)
-	goto out;
-
-      to_read = size;
-      read_ptr = (char *) data;
-      do
-	{
-	  long int nb = (long int) read (fd, read_ptr, to_read);
-	  if (nb <= 0)
-	    {
-#ifdef EINTR
-	      if (nb == -1 && errno == EINTR)
-		continue;
-#endif
-	      goto out;
-	    }
-	  read_ptr += nb;
-	  to_read -= nb;
-	}
-      while (to_read > 0);
-
-      close (fd);
-      fd = -1;
-    }
-
-  /* Using the magic number we can test whether it really is a message
-     catalog file.  */
-  if (__builtin_expect (data->magic != _MAGIC && data->magic != _MAGIC_SWAPPED,
-			0))
-    {
-      /* The magic number is wrong: not a message catalog file.  */
-#ifdef HAVE_MMAP
-      if (use_mmap)
-	munmap ((caddr_t) data, size);
-      else
-#endif
-	free (data);
-      goto out;
-    }
-
-  domain = (struct loaded_domain *) malloc (sizeof (struct loaded_domain));
-  if (domain == NULL)
-    goto out;
-  domain_file->data = domain;
-
-  domain->data = (char *) data;
-  domain->use_mmap = use_mmap;
-  domain->mmap_size = size;
-  domain->must_swap = data->magic != _MAGIC;
-  domain->malloced = NULL;
-
-  /* Fill in the information about the available tables.  */
-  revision = W (domain->must_swap, data->revision);
-  /* We support only the major revisions 0 and 1.  */
-  switch (revision >> 16)
-    {
-    case 0:
-    case 1:
-      domain->nstrings = W (domain->must_swap, data->nstrings);
-      domain->orig_tab = (const struct string_desc *)
-	((char *) data + W (domain->must_swap, data->orig_tab_offset));
-      domain->trans_tab = (const struct string_desc *)
-	((char *) data + W (domain->must_swap, data->trans_tab_offset));
-      domain->hash_size = W (domain->must_swap, data->hash_tab_size);
-      domain->hash_tab =
-	(domain->hash_size > 2
-	 ? (const nls_uint32 *)
-	   ((char *) data + W (domain->must_swap, data->hash_tab_offset))
-	 : NULL);
-      domain->must_swap_hash_tab = domain->must_swap;
-
-      /* Now dispatch on the minor revision.  */
-      switch (revision & 0xffff)
-	{
-	case 0:
-	  domain->n_sysdep_strings = 0;
-	  domain->orig_sysdep_tab = NULL;
-	  domain->trans_sysdep_tab = NULL;
-	  break;
-	case 1:
-	default:
-	  {
-	    nls_uint32 n_sysdep_strings;
-
-	    if (domain->hash_tab == NULL)
-	      /* This is invalid.  These minor revisions need a hash table.  */
-	      goto invalid;
-
-	    n_sysdep_strings =
-	      W (domain->must_swap, data->n_sysdep_strings);
-	    if (n_sysdep_strings > 0)
-	      {
-		nls_uint32 n_sysdep_segments;
-		const struct sysdep_segment *sysdep_segments;
-		const char **sysdep_segment_values;
-		const nls_uint32 *orig_sysdep_tab;
-		const nls_uint32 *trans_sysdep_tab;
-		nls_uint32 n_inmem_sysdep_strings;
-		size_t memneed;
-		char *mem;
-		struct sysdep_string_desc *inmem_orig_sysdep_tab;
-		struct sysdep_string_desc *inmem_trans_sysdep_tab;
-		nls_uint32 *inmem_hash_tab;
-		unsigned int i, j;
-
-		/* Get the values of the system dependent segments.  */
-		n_sysdep_segments =
-		  W (domain->must_swap, data->n_sysdep_segments);
-		sysdep_segments = (const struct sysdep_segment *)
-		  ((char *) data
-		   + W (domain->must_swap, data->sysdep_segments_offset));
-		sysdep_segment_values =
-		  (const char **)
-		  alloca (n_sysdep_segments * sizeof (const char *));
-		for (i = 0; i < n_sysdep_segments; i++)
-		  {
-		    const char *name =
-		      (char *) data
-		      + W (domain->must_swap, sysdep_segments[i].offset);
-		    nls_uint32 namelen =
-		      W (domain->must_swap, sysdep_segments[i].length);
-
-		    if (!(namelen > 0 && name[namelen - 1] == '\0'))
-		      {
-			freea (sysdep_segment_values);
-			goto invalid;
-		      }
-
-		    sysdep_segment_values[i] = get_sysdep_segment_value (name);
-		  }
-
-		orig_sysdep_tab = (const nls_uint32 *)
-		  ((char *) data
-		   + W (domain->must_swap, data->orig_sysdep_tab_offset));
-		trans_sysdep_tab = (const nls_uint32 *)
-		  ((char *) data
-		   + W (domain->must_swap, data->trans_sysdep_tab_offset));
-
-		/* Compute the amount of additional memory needed for the
-		   system dependent strings and the augmented hash table.
-		   At the same time, also drop string pairs which refer to
-		   an undefined system dependent segment.  */
-		n_inmem_sysdep_strings = 0;
-		memneed = domain->hash_size * sizeof (nls_uint32);
-		for (i = 0; i < n_sysdep_strings; i++)
-		  {
-		    int valid = 1;
-		    size_t needs[2];
-
-		    for (j = 0; j < 2; j++)
-		      {
-			const struct sysdep_string *sysdep_string =
-			  (const struct sysdep_string *)
-			  ((char *) data
-			   + W (domain->must_swap,
-				j == 0
-				? orig_sysdep_tab[i]
-				: trans_sysdep_tab[i]));
-			size_t need = 0;
-			const struct segment_pair *p = sysdep_string->segments;
-
-			if (W (domain->must_swap, p->sysdepref) != SEGMENTS_END)
-			  for (p = sysdep_string->segments;; p++)
-			    {
-			      nls_uint32 sysdepref;
-
-			      need += W (domain->must_swap, p->segsize);
-
-			      sysdepref = W (domain->must_swap, p->sysdepref);
-			      if (sysdepref == SEGMENTS_END)
-				break;
-
-			      if (sysdepref >= n_sysdep_segments)
-				{
-				  /* Invalid.  */
-				  freea (sysdep_segment_values);
-				  goto invalid;
-				}
-
-			      if (sysdep_segment_values[sysdepref] == NULL)
-				{
-				  /* This particular string pair is invalid.  */
-				  valid = 0;
-				  break;
-				}
-
-			      need += strlen (sysdep_segment_values[sysdepref]);
-			    }
-
-			needs[j] = need;
-			if (!valid)
-			  break;
-		      }
-
-		    if (valid)
-		      {
-			n_inmem_sysdep_strings++;
-			memneed += needs[0] + needs[1];
-		      }
-		  }
-		memneed += 2 * n_inmem_sysdep_strings
-			   * sizeof (struct sysdep_string_desc);
-
-		if (n_inmem_sysdep_strings > 0)
-		  {
-		    unsigned int k;
-
-		    /* Allocate additional memory.  */
-		    mem = (char *) malloc (memneed);
-		    if (mem == NULL)
-		      goto invalid;
-
-		    domain->malloced = mem;
-		    inmem_orig_sysdep_tab = (struct sysdep_string_desc *) mem;
-		    mem += n_inmem_sysdep_strings
-			   * sizeof (struct sysdep_string_desc);
-		    inmem_trans_sysdep_tab = (struct sysdep_string_desc *) mem;
-		    mem += n_inmem_sysdep_strings
-			   * sizeof (struct sysdep_string_desc);
-		    inmem_hash_tab = (nls_uint32 *) mem;
-		    mem += domain->hash_size * sizeof (nls_uint32);
-
-		    /* Compute the system dependent strings.  */
-		    k = 0;
-		    for (i = 0; i < n_sysdep_strings; i++)
-		      {
-			int valid = 1;
-
-			for (j = 0; j < 2; j++)
-			  {
-			    const struct sysdep_string *sysdep_string =
-			      (const struct sysdep_string *)
-			      ((char *) data
-			       + W (domain->must_swap,
-				    j == 0
-				    ? orig_sysdep_tab[i]
-				    : trans_sysdep_tab[i]));
-			    const struct segment_pair *p =
-			      sysdep_string->segments;
-
-			    if (W (domain->must_swap, p->sysdepref)
-				!= SEGMENTS_END)
-			      for (p = sysdep_string->segments;; p++)
-				{
-				  nls_uint32 sysdepref;
-
-				  sysdepref =
-				    W (domain->must_swap, p->sysdepref);
-				  if (sysdepref == SEGMENTS_END)
-				    break;
-
-				  if (sysdep_segment_values[sysdepref] == NULL)
-				    {
-				      /* This particular string pair is
-					 invalid.  */
-				      valid = 0;
-				      break;
-				    }
-				}
-
-			    if (!valid)
-			      break;
-			  }
-
-			if (valid)
-			  {
-			    for (j = 0; j < 2; j++)
-			      {
-				const struct sysdep_string *sysdep_string =
-				  (const struct sysdep_string *)
-				  ((char *) data
-				   + W (domain->must_swap,
-					j == 0
-					? orig_sysdep_tab[i]
-					: trans_sysdep_tab[i]));
-				const char *static_segments =
-				  (char *) data
-				  + W (domain->must_swap, sysdep_string->offset);
-				const struct segment_pair *p =
-				  sysdep_string->segments;
-
-				/* Concatenate the segments, and fill
-				   inmem_orig_sysdep_tab[k] (for j == 0) and
-				   inmem_trans_sysdep_tab[k] (for j == 1).  */
-
-				struct sysdep_string_desc *inmem_tab_entry =
-				  (j == 0
-				   ? inmem_orig_sysdep_tab
-				   : inmem_trans_sysdep_tab)
-				  + k;
-
-				if (W (domain->must_swap, p->sysdepref)
-				    == SEGMENTS_END)
-				  {
-				    /* Only one static segment.  */
-				    inmem_tab_entry->length =
-				      W (domain->must_swap, p->segsize);
-				    inmem_tab_entry->pointer = static_segments;
-				  }
-				else
-				  {
-				    inmem_tab_entry->pointer = mem;
-
-				    for (p = sysdep_string->segments;; p++)
-				      {
-					nls_uint32 segsize =
-					  W (domain->must_swap, p->segsize);
-					nls_uint32 sysdepref =
-					  W (domain->must_swap, p->sysdepref);
-					size_t n;
-
-					if (segsize > 0)
-					  {
-					    memcpy (mem, static_segments, segsize);
-					    mem += segsize;
-					    static_segments += segsize;
-					  }
-
-					if (sysdepref == SEGMENTS_END)
-					  break;
-
-					n = strlen (sysdep_segment_values[sysdepref]);
-					memcpy (mem, sysdep_segment_values[sysdepref], n);
-					mem += n;
-				      }
-
-				    inmem_tab_entry->length =
-				      mem - inmem_tab_entry->pointer;
-				  }
-			      }
-
-			    k++;
-			  }
-		      }
-		    if (k != n_inmem_sysdep_strings)
-		      abort ();
-
-		    /* Compute the augmented hash table.  */
-		    for (i = 0; i < domain->hash_size; i++)
-		      inmem_hash_tab[i] =
-			W (domain->must_swap_hash_tab, domain->hash_tab[i]);
-		    for (i = 0; i < n_inmem_sysdep_strings; i++)
-		      {
-			const char *msgid = inmem_orig_sysdep_tab[i].pointer;
-			nls_uint32 hash_val = __hash_string (msgid);
-			nls_uint32 idx = hash_val % domain->hash_size;
-			nls_uint32 incr =
-			  1 + (hash_val % (domain->hash_size - 2));
-
-			for (;;)
-			  {
-			    if (inmem_hash_tab[idx] == 0)
-			      {
-				/* Hash table entry is empty.  Use it.  */
-				inmem_hash_tab[idx] = 1 + domain->nstrings + i;
-				break;
-			      }
-
-			    if (idx >= domain->hash_size - incr)
-			      idx -= domain->hash_size - incr;
-			    else
-			      idx += incr;
-			  }
-		      }
-
-		    domain->n_sysdep_strings = n_inmem_sysdep_strings;
-		    domain->orig_sysdep_tab = inmem_orig_sysdep_tab;
-		    domain->trans_sysdep_tab = inmem_trans_sysdep_tab;
-
-		    domain->hash_tab = inmem_hash_tab;
-		    domain->must_swap_hash_tab = 0;
-		  }
-		else
-		  {
-		    domain->n_sysdep_strings = 0;
-		    domain->orig_sysdep_tab = NULL;
-		    domain->trans_sysdep_tab = NULL;
-		  }
-
-		freea (sysdep_segment_values);
-	      }
-	    else
-	      {
-		domain->n_sysdep_strings = 0;
-		domain->orig_sysdep_tab = NULL;
-		domain->trans_sysdep_tab = NULL;
-	      }
-	  }
-	  break;
-	}
-      break;
-    default:
-      /* This is an invalid revision.  */
-    invalid:
-      /* This is an invalid .mo file.  */
-      free (domain->malloced);
-#ifdef HAVE_MMAP
-      if (use_mmap)
-	munmap ((caddr_t) data, size);
-      else
-#endif
-	free (data);
-      free (domain);
-      domain_file->data = NULL;
-      goto out;
-    }
-
-  /* No caches of converted translations so far.  */
-  domain->conversions = NULL;
-  domain->nconversions = 0;
-  gl_rwlock_init (domain->conversions_lock);
-
-  /* Get the header entry and look for a plural specification.  */
-#ifdef IN_LIBGLOCALE
-  nullentry =
-    _nl_find_msg (domain_file, domainbinding, NULL, "", &nullentrylen);
-#else
-  nullentry = _nl_find_msg (domain_file, domainbinding, "", 0, &nullentrylen);
-#endif
-  EXTRACT_PLURAL_EXPRESSION (nullentry, &domain->plural, &domain->nplurals);
-
- out:
-  if (fd != -1)
-    close (fd);
-
-  domain_file->decided = 1;
-
- done:
-  __libc_lock_unlock_recursive (lock);
-}
-
-
-#ifdef _LIBC
-void
-internal_function __libc_freeres_fn_section
-_nl_unload_domain (struct loaded_domain *domain)
-{
-  size_t i;
-
-  if (domain->plural != &__gettext_germanic_plural)
-    __gettext_free_exp ((struct expression *) domain->plural);
-
-  for (i = 0; i < domain->nconversions; i++)
-    {
-      struct converted_domain *convd = &domain->conversions[i];
-
-      free (convd->encoding);
-      if (convd->conv_tab != NULL && convd->conv_tab != (char **) -1)
-	free (convd->conv_tab);
-      if (convd->conv != (__gconv_t) -1)
-	__gconv_close (convd->conv);
-    }
-  free (domain->conversions);
-  __libc_rwlock_fini (domain->conversions_lock);
-
-  free (domain->malloced);
-
-# ifdef _POSIX_MAPPED_FILES
-  if (domain->use_mmap)
-    munmap ((caddr_t) domain->data, domain->mmap_size);
-  else
-# endif	/* _POSIX_MAPPED_FILES */
-    free ((void *) domain->data);
-
-  free (domain);
-}
-#endif
diff -urpN mc-4.8.23/intl/localcharset.c mc-4.8.24/intl/localcharset.c
--- mc-4.8.23/intl/localcharset.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/localcharset.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,549 +0,0 @@
-/* Determine a canonical name for the current locale's character encoding.
-
-   Copyright (C) 2000-2006, 2008-2010 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Written by Bruno Haible <bruno@clisp.org>.  */
-
-#include <config.h>
-
-/* Specification.  */
-#include "localcharset.h"
-
-#include <fcntl.h>
-#include <stddef.h>
-#include <stdio.h>
-#include <string.h>
-#include <stdlib.h>
-
-#if defined __APPLE__ && defined __MACH__ && HAVE_LANGINFO_CODESET
-# define DARWIN7 /* Darwin 7 or newer, i.e. MacOS X 10.3 or newer */
-#endif
-
-#if defined _WIN32 || defined __WIN32__
-# define WIN32_NATIVE
-#endif
-
-#if defined __EMX__
-/* Assume EMX program runs on OS/2, even if compiled under DOS.  */
-# ifndef OS2
-#  define OS2
-# endif
-#endif
-
-#if !defined WIN32_NATIVE
-# include <unistd.h>
-# if HAVE_LANGINFO_CODESET
-#  include <langinfo.h>
-# else
-#  if 0 /* see comment below */
-#   include <locale.h>
-#  endif
-# endif
-# ifdef __CYGWIN__
-#  define WIN32_LEAN_AND_MEAN
-#  include <windows.h>
-# endif
-#elif defined WIN32_NATIVE
-# define WIN32_LEAN_AND_MEAN
-# include <windows.h>
-#endif
-#if defined OS2
-# define INCL_DOS
-# include <os2.h>
-#endif
-
-#if ENABLE_RELOCATABLE
-# include "relocatable.h"
-#else
-# define relocate(pathname) (pathname)
-#endif
-
-/* Get LIBDIR.  */
-#ifndef LIBDIR
-# include "configmake.h"
-#endif
-
-/* Define O_NOFOLLOW to 0 on platforms where it does not exist.  */
-#ifndef O_NOFOLLOW
-# define O_NOFOLLOW 0
-#endif
-
-#if defined _WIN32 || defined __WIN32__ || defined __CYGWIN__ || defined __EMX__ || defined __DJGPP__
-  /* Win32, Cygwin, OS/2, DOS */
-# define ISSLASH(C) ((C) == '/' || (C) == '\\')
-#endif
-
-#ifndef DIRECTORY_SEPARATOR
-# define DIRECTORY_SEPARATOR '/'
-#endif
-
-#ifndef ISSLASH
-# define ISSLASH(C) ((C) == DIRECTORY_SEPARATOR)
-#endif
-
-#if HAVE_DECL_GETC_UNLOCKED
-# undef getc
-# define getc getc_unlocked
-#endif
-
-/* The following static variable is declared 'volatile' to avoid a
-   possible multithread problem in the function get_charset_aliases. If we
-   are running in a threaded environment, and if two threads initialize
-   'charset_aliases' simultaneously, both will produce the same value,
-   and everything will be ok if the two assignments to 'charset_aliases'
-   are atomic. But I don't know what will happen if the two assignments mix.  */
-#if __STDC__ != 1
-# define volatile /* empty */
-#endif
-/* Pointer to the contents of the charset.alias file, if it has already been
-   read, else NULL.  Its format is:
-   ALIAS_1 '\0' CANONICAL_1 '\0' ... ALIAS_n '\0' CANONICAL_n '\0' '\0'  */
-static const char * volatile charset_aliases;
-
-/* Return a pointer to the contents of the charset.alias file.  */
-static const char *
-get_charset_aliases (void)
-{
-  const char *cp;
-
-  cp = charset_aliases;
-  if (cp == NULL)
-    {
-#if !(defined DARWIN7 || defined VMS || defined WIN32_NATIVE || defined __CYGWIN__)
-      const char *dir;
-      const char *base = "charset.alias";
-      char *file_name;
-
-      /* Make it possible to override the charset.alias location.  This is
-         necessary for running the testsuite before "make install".  */
-      dir = getenv ("CHARSETALIASDIR");
-      if (dir == NULL || dir[0] == '\0')
-        dir = relocate (LIBDIR);
-
-      /* Concatenate dir and base into freshly allocated file_name.  */
-      {
-        size_t dir_len = strlen (dir);
-        size_t base_len = strlen (base);
-        int add_slash = (dir_len > 0 && !ISSLASH (dir[dir_len - 1]));
-        file_name = (char *) malloc (dir_len + add_slash + base_len + 1);
-        if (file_name != NULL)
-          {
-            memcpy (file_name, dir, dir_len);
-            if (add_slash)
-              file_name[dir_len] = DIRECTORY_SEPARATOR;
-            memcpy (file_name + dir_len + add_slash, base, base_len + 1);
-          }
-      }
-
-      if (file_name == NULL)
-        /* Out of memory.  Treat the file as empty.  */
-        cp = "";
-      else
-        {
-          int fd;
-
-          /* Open the file.  Reject symbolic links on platforms that support
-             O_NOFOLLOW.  This is a security feature.  Without it, an attacker
-             could retrieve parts of the contents (namely, the tail of the
-             first line that starts with "* ") of an arbitrary file by placing
-             a symbolic link to that file under the name "charset.alias" in
-             some writable directory and defining the environment variable
-             CHARSETALIASDIR to point to that directory.  */
-          fd = open (file_name,
-                     O_RDONLY | (HAVE_WORKING_O_NOFOLLOW ? O_NOFOLLOW : 0));
-          if (fd < 0)
-            /* File not found.  Treat it as empty.  */
-            cp = "";
-          else
-            {
-              FILE *fp;
-
-              fp = fdopen (fd, "r");
-              if (fp == NULL)
-                {
-                  /* Out of memory.  Treat the file as empty.  */
-                  close (fd);
-                  cp = "";
-                }
-              else
-                {
-                  /* Parse the file's contents.  */
-                  char *res_ptr = NULL;
-                  size_t res_size = 0;
-
-                  for (;;)
-                    {
-                      int c;
-                      char buf1[50+1];
-                      char buf2[50+1];
-                      size_t l1, l2;
-                      char *old_res_ptr;
-
-                      c = getc (fp);
-                      if (c == EOF)
-                        break;
-                      if (c == '\n' || c == ' ' || c == '\t')
-                        continue;
-                      if (c == '#')
-                        {
-                          /* Skip comment, to end of line.  */
-                          do
-                            c = getc (fp);
-                          while (!(c == EOF || c == '\n'));
-                          if (c == EOF)
-                            break;
-                          continue;
-                        }
-                      ungetc (c, fp);
-                      if (fscanf (fp, "%50s %50s", buf1, buf2) < 2)
-                        break;
-                      l1 = strlen (buf1);
-                      l2 = strlen (buf2);
-                      old_res_ptr = res_ptr;
-                      if (res_size == 0)
-                        {
-                          res_size = l1 + 1 + l2 + 1;
-                          res_ptr = (char *) malloc (res_size + 1);
-                        }
-                      else
-                        {
-                          res_size += l1 + 1 + l2 + 1;
-                          res_ptr = (char *) realloc (res_ptr, res_size + 1);
-                        }
-                      if (res_ptr == NULL)
-                        {
-                          /* Out of memory. */
-                          res_size = 0;
-                          if (old_res_ptr != NULL)
-                            free (old_res_ptr);
-                          break;
-                        }
-                      strcpy (res_ptr + res_size - (l2 + 1) - (l1 + 1), buf1);
-                      strcpy (res_ptr + res_size - (l2 + 1), buf2);
-                    }
-                  fclose (fp);
-                  if (res_size == 0)
-                    cp = "";
-                  else
-                    {
-                      *(res_ptr + res_size) = '\0';
-                      cp = res_ptr;
-                    }
-                }
-            }
-
-          free (file_name);
-        }
-
-#else
-
-# if defined DARWIN7
-      /* To avoid the trouble of installing a file that is shared by many
-         GNU packages -- many packaging systems have problems with this --,
-         simply inline the aliases here.  */
-      cp = "ISO8859-1" "\0" "ISO-8859-1" "\0"
-           "ISO8859-2" "\0" "ISO-8859-2" "\0"
-           "ISO8859-4" "\0" "ISO-8859-4" "\0"
-           "ISO8859-5" "\0" "ISO-8859-5" "\0"
-           "ISO8859-7" "\0" "ISO-8859-7" "\0"
-           "ISO8859-9" "\0" "ISO-8859-9" "\0"
-           "ISO8859-13" "\0" "ISO-8859-13" "\0"
-           "ISO8859-15" "\0" "ISO-8859-15" "\0"
-           "KOI8-R" "\0" "KOI8-R" "\0"
-           "KOI8-U" "\0" "KOI8-U" "\0"
-           "CP866" "\0" "CP866" "\0"
-           "CP949" "\0" "CP949" "\0"
-           "CP1131" "\0" "CP1131" "\0"
-           "CP1251" "\0" "CP1251" "\0"
-           "eucCN" "\0" "GB2312" "\0"
-           "GB2312" "\0" "GB2312" "\0"
-           "eucJP" "\0" "EUC-JP" "\0"
-           "eucKR" "\0" "EUC-KR" "\0"
-           "Big5" "\0" "BIG5" "\0"
-           "Big5HKSCS" "\0" "BIG5-HKSCS" "\0"
-           "GBK" "\0" "GBK" "\0"
-           "GB18030" "\0" "GB18030" "\0"
-           "SJIS" "\0" "SHIFT_JIS" "\0"
-           "ARMSCII-8" "\0" "ARMSCII-8" "\0"
-           "PT154" "\0" "PT154" "\0"
-         /*"ISCII-DEV" "\0" "?" "\0"*/
-           "*" "\0" "UTF-8" "\0";
-# endif
-
-# if defined VMS
-      /* To avoid the troubles of an extra file charset.alias_vms in the
-         sources of many GNU packages, simply inline the aliases here.  */
-      /* The list of encodings is taken from the OpenVMS 7.3-1 documentation
-         "Compaq C Run-Time Library Reference Manual for OpenVMS systems"
-         section 10.7 "Handling Different Character Sets".  */
-      cp = "ISO8859-1" "\0" "ISO-8859-1" "\0"
-           "ISO8859-2" "\0" "ISO-8859-2" "\0"
-           "ISO8859-5" "\0" "ISO-8859-5" "\0"
-           "ISO8859-7" "\0" "ISO-8859-7" "\0"
-           "ISO8859-8" "\0" "ISO-8859-8" "\0"
-           "ISO8859-9" "\0" "ISO-8859-9" "\0"
-           /* Japanese */
-           "eucJP" "\0" "EUC-JP" "\0"
-           "SJIS" "\0" "SHIFT_JIS" "\0"
-           "DECKANJI" "\0" "DEC-KANJI" "\0"
-           "SDECKANJI" "\0" "EUC-JP" "\0"
-           /* Chinese */
-           "eucTW" "\0" "EUC-TW" "\0"
-           "DECHANYU" "\0" "DEC-HANYU" "\0"
-           "DECHANZI" "\0" "GB2312" "\0"
-           /* Korean */
-           "DECKOREAN" "\0" "EUC-KR" "\0";
-# endif
-
-# if defined WIN32_NATIVE || defined __CYGWIN__
-      /* To avoid the troubles of installing a separate file in the same
-         directory as the DLL and of retrieving the DLL's directory at
-         runtime, simply inline the aliases here.  */
-
-      cp = "CP936" "\0" "GBK" "\0"
-           "CP1361" "\0" "JOHAB" "\0"
-           "CP20127" "\0" "ASCII" "\0"
-           "CP20866" "\0" "KOI8-R" "\0"
-           "CP20936" "\0" "GB2312" "\0"
-           "CP21866" "\0" "KOI8-RU" "\0"
-           "CP28591" "\0" "ISO-8859-1" "\0"
-           "CP28592" "\0" "ISO-8859-2" "\0"
-           "CP28593" "\0" "ISO-8859-3" "\0"
-           "CP28594" "\0" "ISO-8859-4" "\0"
-           "CP28595" "\0" "ISO-8859-5" "\0"
-           "CP28596" "\0" "ISO-8859-6" "\0"
-           "CP28597" "\0" "ISO-8859-7" "\0"
-           "CP28598" "\0" "ISO-8859-8" "\0"
-           "CP28599" "\0" "ISO-8859-9" "\0"
-           "CP28605" "\0" "ISO-8859-15" "\0"
-           "CP38598" "\0" "ISO-8859-8" "\0"
-           "CP51932" "\0" "EUC-JP" "\0"
-           "CP51936" "\0" "GB2312" "\0"
-           "CP51949" "\0" "EUC-KR" "\0"
-           "CP51950" "\0" "EUC-TW" "\0"
-           "CP54936" "\0" "GB18030" "\0"
-           "CP65001" "\0" "UTF-8" "\0";
-# endif
-#endif
-
-      charset_aliases = cp;
-    }
-
-  return cp;
-}
-
-/* Determine the current locale's character encoding, and canonicalize it
-   into one of the canonical names listed in config.charset.
-   The result must not be freed; it is statically allocated.
-   If the canonical name cannot be determined, the result is a non-canonical
-   name.  */
-
-#ifdef STATIC
-STATIC
-#endif
-const char *
-locale_charset (void)
-{
-  const char *codeset;
-  const char *aliases;
-
-#if !(defined WIN32_NATIVE || defined OS2)
-
-# if HAVE_LANGINFO_CODESET
-
-  /* Most systems support nl_langinfo (CODESET) nowadays.  */
-  codeset = nl_langinfo (CODESET);
-
-#  ifdef __CYGWIN__
-  /* Cygwin < 1.7 does not have locales.  nl_langinfo (CODESET) always
-     returns "US-ASCII".  Return the suffix of the locale name from the
-     environment variables (if present) or the codepage as a number.  */
-  if (codeset != NULL && strcmp (codeset, "US-ASCII") == 0)
-    {
-      const char *locale;
-      static char buf[2 + 10 + 1];
-
-      locale = getenv ("LC_ALL");
-      if (locale == NULL || locale[0] == '\0')
-        {
-          locale = getenv ("LC_CTYPE");
-          if (locale == NULL || locale[0] == '\0')
-            locale = getenv ("LANG");
-        }
-      if (locale != NULL && locale[0] != '\0')
-        {
-          /* If the locale name contains an encoding after the dot, return
-             it.  */
-          const char *dot = strchr (locale, '.');
-
-          if (dot != NULL)
-            {
-              const char *modifier;
-
-              dot++;
-              /* Look for the possible @... trailer and remove it, if any.  */
-              modifier = strchr (dot, '@');
-              if (modifier == NULL)
-                return dot;
-              if (modifier - dot < sizeof (buf))
-                {
-                  memcpy (buf, dot, modifier - dot);
-                  buf [modifier - dot] = '\0';
-                  return buf;
-                }
-            }
-        }
-
-      /* Woe32 has a function returning the locale's codepage as a number:
-         GetACP().  This encoding is used by Cygwin, unless the user has set
-         the environment variable CYGWIN=codepage:oem (which very few people
-         do).
-         Output directed to console windows needs to be converted (to
-         GetOEMCP() if the console is using a raster font, or to
-         GetConsoleOutputCP() if it is using a TrueType font).  Cygwin does
-         this conversion transparently (see winsup/cygwin/fhandler_console.cc),
-         converting to GetConsoleOutputCP().  This leads to correct results,
-         except when SetConsoleOutputCP has been called and a raster font is
-         in use.  */
-      sprintf (buf, "CP%u", GetACP ());
-      codeset = buf;
-    }
-#  endif
-
-# else
-
-  /* On old systems which lack it, use setlocale or getenv.  */
-  const char *locale = NULL;
-
-  /* But most old systems don't have a complete set of locales.  Some
-     (like SunOS 4 or DJGPP) have only the C locale.  Therefore we don't
-     use setlocale here; it would return "C" when it doesn't support the
-     locale name the user has set.  */
-#  if 0
-  locale = setlocale (LC_CTYPE, NULL);
-#  endif
-  if (locale == NULL || locale[0] == '\0')
-    {
-      locale = getenv ("LC_ALL");
-      if (locale == NULL || locale[0] == '\0')
-        {
-          locale = getenv ("LC_CTYPE");
-          if (locale == NULL || locale[0] == '\0')
-            locale = getenv ("LANG");
-        }
-    }
-
-  /* On some old systems, one used to set locale = "iso8859_1". On others,
-     you set it to "language_COUNTRY.charset". In any case, we resolve it
-     through the charset.alias file.  */
-  codeset = locale;
-
-# endif
-
-#elif defined WIN32_NATIVE
-
-  static char buf[2 + 10 + 1];
-
-  /* Woe32 has a function returning the locale's codepage as a number:
-     GetACP().
-     When the output goes to a console window, it needs to be provided in
-     GetOEMCP() encoding if the console is using a raster font, or in
-     GetConsoleOutputCP() encoding if it is using a TrueType font.
-     But in GUI programs and for output sent to files and pipes, GetACP()
-     encoding is the best bet.  */
-  sprintf (buf, "CP%u", GetACP ());
-  codeset = buf;
-
-#elif defined OS2
-
-  const char *locale;
-  static char buf[2 + 10 + 1];
-  ULONG cp[3];
-  ULONG cplen;
-
-  /* Allow user to override the codeset, as set in the operating system,
-     with standard language environment variables.  */
-  locale = getenv ("LC_ALL");
-  if (locale == NULL || locale[0] == '\0')
-    {
-      locale = getenv ("LC_CTYPE");
-      if (locale == NULL || locale[0] == '\0')
-        locale = getenv ("LANG");
-    }
-  if (locale != NULL && locale[0] != '\0')
-    {
-      /* If the locale name contains an encoding after the dot, return it.  */
-      const char *dot = strchr (locale, '.');
-
-      if (dot != NULL)
-        {
-          const char *modifier;
-
-          dot++;
-          /* Look for the possible @... trailer and remove it, if any.  */
-          modifier = strchr (dot, '@');
-          if (modifier == NULL)
-            return dot;
-          if (modifier - dot < sizeof (buf))
-            {
-              memcpy (buf, dot, modifier - dot);
-              buf [modifier - dot] = '\0';
-              return buf;
-            }
-        }
-
-      /* Resolve through the charset.alias file.  */
-      codeset = locale;
-    }
-  else
-    {
-      /* OS/2 has a function returning the locale's codepage as a number.  */
-      if (DosQueryCp (sizeof (cp), cp, &cplen))
-        codeset = "";
-      else
-        {
-          sprintf (buf, "CP%u", cp[0]);
-          codeset = buf;
-        }
-    }
-
-#endif
-
-  if (codeset == NULL)
-    /* The canonical name cannot be determined.  */
-    codeset = "";
-
-  /* Resolve alias. */
-  for (aliases = get_charset_aliases ();
-       *aliases != '\0';
-       aliases += strlen (aliases) + 1, aliases += strlen (aliases) + 1)
-    if (strcmp (codeset, aliases) == 0
-        || (aliases[0] == '*' && aliases[1] == '\0'))
-      {
-        codeset = aliases + strlen (aliases) + 1;
-        break;
-      }
-
-  /* Don't return an empty string.  GNU libc and GNU libiconv interpret
-     the empty string as denoting "the locale's character encoding",
-     thus GNU libiconv would call this function a second time.  */
-  if (codeset[0] == '\0')
-    codeset = "ASCII";
-
-  return codeset;
-}
diff -urpN mc-4.8.23/intl/localcharset.h mc-4.8.24/intl/localcharset.h
--- mc-4.8.23/intl/localcharset.h	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/localcharset.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,42 +0,0 @@
-/* Determine a canonical name for the current locale's character encoding.
-   Copyright (C) 2000-2003 Free Software Foundation, Inc.
-   This file is part of the GNU CHARSET Library.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _LOCALCHARSET_H
-#define _LOCALCHARSET_H
-
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-
-
-/* Determine the current locale's character encoding, and canonicalize it
-   into one of the canonical names listed in config.charset.
-   The result must not be freed; it is statically allocated.
-   If the canonical name cannot be determined, the result is a non-canonical
-   name.  */
-extern const char * locale_charset (void);
-
-
-#ifdef __cplusplus
-}
-#endif
-
-
-#endif /* _LOCALCHARSET_H */
diff -urpN mc-4.8.23/intl/locale.alias mc-4.8.24/intl/locale.alias
--- mc-4.8.23/intl/locale.alias	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/locale.alias	1970-01-01 04:00:00.000000000 +0400
@@ -1,77 +0,0 @@
-# Locale name alias data base.
-# Copyright (C) 1996-2001,2003,2007 Free Software Foundation, Inc.
-#
-# This program is free software; you can redistribute it and/or modify it
-# under the terms of the GNU Library General Public License as published
-# by the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-#
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-# Library General Public License for more details.
-#
-# You should have received a copy of the GNU Library General Public
-# License along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-# USA.
-
-# The format of this file is the same as for the corresponding file of
-# the X Window System, which normally can be found in
-#	/usr/lib/X11/locale/locale.alias
-# A single line contains two fields: an alias and a substitution value.
-# All entries are case independent.
-
-# Note: This file is obsolete and is kept around for the time being for
-# backward compatibility.  Nobody should rely on the names defined here.
-# Locales should always be specified by their full name.
-
-# Packages using this file: 
-
-bokmal		nb_NO.ISO-8859-1
-bokml		nb_NO.ISO-8859-1
-catalan		ca_ES.ISO-8859-1
-croatian	hr_HR.ISO-8859-2
-czech		cs_CZ.ISO-8859-2
-danish          da_DK.ISO-8859-1
-dansk		da_DK.ISO-8859-1
-deutsch		de_DE.ISO-8859-1
-dutch		nl_NL.ISO-8859-1
-eesti		et_EE.ISO-8859-1
-estonian	et_EE.ISO-8859-1
-finnish         fi_FI.ISO-8859-1
-franais	fr_FR.ISO-8859-1
-french		fr_FR.ISO-8859-1
-galego		gl_ES.ISO-8859-1
-galician	gl_ES.ISO-8859-1
-german		de_DE.ISO-8859-1
-greek           el_GR.ISO-8859-7
-hebrew          he_IL.ISO-8859-8
-hrvatski	hr_HR.ISO-8859-2
-hungarian       hu_HU.ISO-8859-2
-icelandic       is_IS.ISO-8859-1
-italian         it_IT.ISO-8859-1
-japanese	ja_JP.eucJP
-japanese.euc	ja_JP.eucJP
-ja_JP		ja_JP.eucJP
-ja_JP.ujis	ja_JP.eucJP
-japanese.sjis	ja_JP.SJIS
-korean		ko_KR.eucKR
-korean.euc 	ko_KR.eucKR
-ko_KR		ko_KR.eucKR
-lithuanian      lt_LT.ISO-8859-13
-no_NO		nb_NO.ISO-8859-1
-no_NO.ISO-8859-1 nb_NO.ISO-8859-1
-norwegian       nb_NO.ISO-8859-1
-nynorsk		nn_NO.ISO-8859-1
-polish          pl_PL.ISO-8859-2
-portuguese      pt_PT.ISO-8859-1
-romanian        ro_RO.ISO-8859-2
-russian         ru_RU.ISO-8859-5
-slovak          sk_SK.ISO-8859-2
-slovene         sl_SI.ISO-8859-2
-slovenian       sl_SI.ISO-8859-2
-spanish         es_ES.ISO-8859-1
-swedish         sv_SE.ISO-8859-1
-thai		th_TH.TIS-620
-turkish         tr_TR.ISO-8859-9
diff -urpN mc-4.8.23/intl/localealias.c mc-4.8.24/intl/localealias.c
--- mc-4.8.23/intl/localealias.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/localealias.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,439 +0,0 @@
-/* Handle aliases for locale names.
-   Copyright (C) 1995-1999, 2000-2001, 2003, 2005-2006 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Tell glibc's <string.h> to provide a prototype for mempcpy().
-   This must come before <config.h> because <config.h> may include
-   <features.h>, and once <features.h> has been included, it's too late.  */
-#ifndef _GNU_SOURCE
-# define _GNU_SOURCE    1
-#endif
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <ctype.h>
-#include <stdio.h>
-#if defined _LIBC || defined HAVE___FSETLOCKING
-# include <stdio_ext.h>
-#endif
-#include <sys/types.h>
-
-#ifdef __GNUC__
-# undef alloca
-# define alloca __builtin_alloca
-# define HAVE_ALLOCA 1
-#else
-# ifdef _MSC_VER
-#  include <malloc.h>
-#  define alloca _alloca
-# else
-#  if defined HAVE_ALLOCA_H || defined _LIBC
-#   include <alloca.h>
-#  else
-#   ifdef _AIX
- #pragma alloca
-#   else
-#    ifndef alloca
-char *alloca ();
-#    endif
-#   endif
-#  endif
-# endif
-#endif
-
-#include <stdlib.h>
-#include <string.h>
-
-#include "gettextP.h"
-
-#if ENABLE_RELOCATABLE
-# include "relocatable.h"
-#else
-# define relocate(pathname) (pathname)
-#endif
-
-/* @@ end of prolog @@ */
-
-#ifdef _LIBC
-/* Rename the non ANSI C functions.  This is required by the standard
-   because some ANSI C functions will require linking with this object
-   file and the name space must not be polluted.  */
-# define strcasecmp __strcasecmp
-
-# ifndef mempcpy
-#  define mempcpy __mempcpy
-# endif
-# define HAVE_MEMPCPY	1
-# define HAVE___FSETLOCKING	1
-#endif
-
-/* Handle multi-threaded applications.  */
-#ifdef _LIBC
-# include <bits/libc-lock.h>
-#else
-# include "lock.h"
-#endif
-
-#ifndef internal_function
-# define internal_function
-#endif
-
-/* Some optimizations for glibc.  */
-#ifdef _LIBC
-# define FEOF(fp)		feof_unlocked (fp)
-# define FGETS(buf, n, fp)	fgets_unlocked (buf, n, fp)
-#else
-# define FEOF(fp)		feof (fp)
-# define FGETS(buf, n, fp)	fgets (buf, n, fp)
-#endif
-
-/* For those losing systems which don't have `alloca' we have to add
-   some additional code emulating it.  */
-#ifdef HAVE_ALLOCA
-# define freea(p) /* nothing */
-#else
-# define alloca(n) malloc (n)
-# define freea(p) free (p)
-#endif
-
-#if defined _LIBC_REENTRANT || HAVE_DECL_FGETS_UNLOCKED
-# undef fgets
-# define fgets(buf, len, s) fgets_unlocked (buf, len, s)
-#endif
-#if defined _LIBC_REENTRANT || HAVE_DECL_FEOF_UNLOCKED
-# undef feof
-# define feof(s) feof_unlocked (s)
-#endif
-
-
-__libc_lock_define_initialized (static, lock)
-
-
-struct alias_map
-{
-  const char *alias;
-  const char *value;
-};
-
-
-#ifndef _LIBC
-# define libc_freeres_ptr(decl) decl
-#endif
-
-libc_freeres_ptr (static char *string_space);
-static size_t string_space_act;
-static size_t string_space_max;
-libc_freeres_ptr (static struct alias_map *map);
-static size_t nmap;
-static size_t maxmap;
-
-
-/* Prototypes for local functions.  */
-static size_t read_alias_file (const char *fname, int fname_len)
-     internal_function;
-static int extend_alias_table (void);
-static int alias_compare (const struct alias_map *map1,
-			  const struct alias_map *map2);
-
-
-const char *
-_nl_expand_alias (const char *name)
-{
-  static const char *locale_alias_path;
-  struct alias_map *retval;
-  const char *result = NULL;
-  size_t added;
-
-  __libc_lock_lock (lock);
-
-  if (locale_alias_path == NULL)
-    locale_alias_path = LOCALE_ALIAS_PATH;
-
-  do
-    {
-      struct alias_map item;
-
-      item.alias = name;
-
-      if (nmap > 0)
-	retval = (struct alias_map *) bsearch (&item, map, nmap,
-					       sizeof (struct alias_map),
-					       (int (*) (const void *,
-							 const void *)
-						) alias_compare);
-      else
-	retval = NULL;
-
-      /* We really found an alias.  Return the value.  */
-      if (retval != NULL)
-	{
-	  result = retval->value;
-	  break;
-	}
-
-      /* Perhaps we can find another alias file.  */
-      added = 0;
-      while (added == 0 && locale_alias_path[0] != '\0')
-	{
-	  const char *start;
-
-	  while (locale_alias_path[0] == PATH_SEPARATOR)
-	    ++locale_alias_path;
-	  start = locale_alias_path;
-
-	  while (locale_alias_path[0] != '\0'
-		 && locale_alias_path[0] != PATH_SEPARATOR)
-	    ++locale_alias_path;
-
-	  if (start < locale_alias_path)
-	    added = read_alias_file (start, locale_alias_path - start);
-	}
-    }
-  while (added != 0);
-
-  __libc_lock_unlock (lock);
-
-  return result;
-}
-
-
-static size_t
-internal_function
-read_alias_file (const char *fname, int fname_len)
-{
-  FILE *fp;
-  char *full_fname;
-  size_t added;
-  static const char aliasfile[] = "/locale.alias";
-
-  full_fname = (char *) alloca (fname_len + sizeof aliasfile);
-#ifdef HAVE_MEMPCPY
-  mempcpy (mempcpy (full_fname, fname, fname_len),
-	   aliasfile, sizeof aliasfile);
-#else
-  memcpy (full_fname, fname, fname_len);
-  memcpy (&full_fname[fname_len], aliasfile, sizeof aliasfile);
-#endif
-
-#ifdef _LIBC
-  /* Note the file is opened with cancellation in the I/O functions
-     disabled.  */
-  fp = fopen (relocate (full_fname), "rc");
-#else
-  fp = fopen (relocate (full_fname), "r");
-#endif
-  freea (full_fname);
-  if (fp == NULL)
-    return 0;
-
-#ifdef HAVE___FSETLOCKING
-  /* No threads present.  */
-  __fsetlocking (fp, FSETLOCKING_BYCALLER);
-#endif
-
-  added = 0;
-  while (!FEOF (fp))
-    {
-      /* It is a reasonable approach to use a fix buffer here because
-	 a) we are only interested in the first two fields
-	 b) these fields must be usable as file names and so must not
-	    be that long
-	 We avoid a multi-kilobyte buffer here since this would use up
-	 stack space which we might not have if the program ran out of
-	 memory.  */
-      char buf[400];
-      char *alias;
-      char *value;
-      char *cp;
-      int complete_line;
-
-      if (FGETS (buf, sizeof buf, fp) == NULL)
-	/* EOF reached.  */
-	break;
-
-      /* Determine whether the line is complete.  */
-      complete_line = strchr (buf, '\n') != NULL;
-
-      cp = buf;
-      /* Ignore leading white space.  */
-      while (isspace ((unsigned char) cp[0]))
-	++cp;
-
-      /* A leading '#' signals a comment line.  */
-      if (cp[0] != '\0' && cp[0] != '#')
-	{
-	  alias = cp++;
-	  while (cp[0] != '\0' && !isspace ((unsigned char) cp[0]))
-	    ++cp;
-	  /* Terminate alias name.  */
-	  if (cp[0] != '\0')
-	    *cp++ = '\0';
-
-	  /* Now look for the beginning of the value.  */
-	  while (isspace ((unsigned char) cp[0]))
-	    ++cp;
-
-	  if (cp[0] != '\0')
-	    {
-	      value = cp++;
-	      while (cp[0] != '\0' && !isspace ((unsigned char) cp[0]))
-		++cp;
-	      /* Terminate value.  */
-	      if (cp[0] == '\n')
-		{
-		  /* This has to be done to make the following test
-		     for the end of line possible.  We are looking for
-		     the terminating '\n' which do not overwrite here.  */
-		  *cp++ = '\0';
-		  *cp = '\n';
-		}
-	      else if (cp[0] != '\0')
-		*cp++ = '\0';
-
-#ifdef IN_LIBGLOCALE
-	      /* glibc's locale.alias contains entries for ja_JP and ko_KR
-		 that make it impossible to use a Japanese or Korean UTF-8
-		 locale under the name "ja_JP" or "ko_KR".  Ignore these
-		 entries.  */
-	      if (strchr (alias, '_') == NULL)
-#endif
-		{
-		  size_t alias_len;
-		  size_t value_len;
-
-		  if (nmap >= maxmap)
-		    if (__builtin_expect (extend_alias_table (), 0))
-		      goto out;
-
-		  alias_len = strlen (alias) + 1;
-		  value_len = strlen (value) + 1;
-
-		  if (string_space_act + alias_len + value_len > string_space_max)
-		    {
-		      /* Increase size of memory pool.  */
-		      size_t new_size = (string_space_max
-					 + (alias_len + value_len > 1024
-					    ? alias_len + value_len : 1024));
-		      char *new_pool = (char *) realloc (string_space, new_size);
-		      if (new_pool == NULL)
-			goto out;
-
-		      if (__builtin_expect (string_space != new_pool, 0))
-			{
-			  size_t i;
-
-			  for (i = 0; i < nmap; i++)
-			    {
-			      map[i].alias += new_pool - string_space;
-			      map[i].value += new_pool - string_space;
-			    }
-			}
-
-		      string_space = new_pool;
-		      string_space_max = new_size;
-		    }
-
-		  map[nmap].alias =
-		    (const char *) memcpy (&string_space[string_space_act],
-					   alias, alias_len);
-		  string_space_act += alias_len;
-
-		  map[nmap].value =
-		    (const char *) memcpy (&string_space[string_space_act],
-					   value, value_len);
-		  string_space_act += value_len;
-
-		  ++nmap;
-		  ++added;
-		}
-	    }
-	}
-
-      /* Possibly not the whole line fits into the buffer.  Ignore
-	 the rest of the line.  */
-      if (! complete_line)
-	do
-	  if (FGETS (buf, sizeof buf, fp) == NULL)
-	    /* Make sure the inner loop will be left.  The outer loop
-	       will exit at the `feof' test.  */
-	    break;
-	while (strchr (buf, '\n') == NULL);
-    }
-
- out:
-  /* Should we test for ferror()?  I think we have to silently ignore
-     errors.  --drepper  */
-  fclose (fp);
-
-  if (added > 0)
-    qsort (map, nmap, sizeof (struct alias_map),
-	   (int (*) (const void *, const void *)) alias_compare);
-
-  return added;
-}
-
-
-static int
-extend_alias_table ()
-{
-  size_t new_size;
-  struct alias_map *new_map;
-
-  new_size = maxmap == 0 ? 100 : 2 * maxmap;
-  new_map = (struct alias_map *) realloc (map, (new_size
-						* sizeof (struct alias_map)));
-  if (new_map == NULL)
-    /* Simply don't extend: we don't have any more core.  */
-    return -1;
-
-  map = new_map;
-  maxmap = new_size;
-  return 0;
-}
-
-
-static int
-alias_compare (const struct alias_map *map1, const struct alias_map *map2)
-{
-#if defined _LIBC || defined HAVE_STRCASECMP
-  return strcasecmp (map1->alias, map2->alias);
-#else
-  const unsigned char *p1 = (const unsigned char *) map1->alias;
-  const unsigned char *p2 = (const unsigned char *) map2->alias;
-  unsigned char c1, c2;
-
-  if (p1 == p2)
-    return 0;
-
-  do
-    {
-      /* I know this seems to be odd but the tolower() function in
-	 some systems libc cannot handle nonalpha characters.  */
-      c1 = isupper (*p1) ? tolower (*p1) : *p1;
-      c2 = isupper (*p2) ? tolower (*p2) : *p2;
-      if (c1 == '\0')
-	break;
-      ++p1;
-      ++p2;
-    }
-  while (c1 == c2);
-
-  return c1 - c2;
-#endif
-}
diff -urpN mc-4.8.23/intl/localename.c mc-4.8.24/intl/localename.c
--- mc-4.8.23/intl/localename.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/localename.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,2959 +0,0 @@
-/* Determine name of the currently selected locale.
-   Copyright (C) 1995-1999, 2000-2010 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Written by Ulrich Drepper <drepper@gnu.org>, 1995.  */
-/* Win32 code written by Tor Lillqvist <tml@iki.fi>.  */
-/* MacOS X code written by Bruno Haible <bruno@clisp.org>.  */
-
-#include <config.h>
-
-/* Specification.  */
-#ifdef IN_LIBINTL
-# include "gettextP.h"
-#else
-# include "localename.h"
-#endif
-
-#include <limits.h>
-#include <stddef.h>
-#include <stdlib.h>
-#include <locale.h>
-#include <string.h>
-
-#if HAVE_USELOCALE
-/* MacOS X 10.5 defines the locale_t type in <xlocale.h>.  */
-# if defined __APPLE__ && defined __MACH__
-#  include <xlocale.h>
-# endif
-# include <langinfo.h>
-# if !defined IN_LIBINTL
-#  include "glthread/lock.h"
-# endif
-#endif
-
-#if HAVE_CFLOCALECOPYCURRENT || HAVE_CFPREFERENCESCOPYAPPVALUE
-# include <CoreFoundation/CFString.h>
-# if HAVE_CFLOCALECOPYCURRENT
-#  include <CoreFoundation/CFLocale.h>
-# elif HAVE_CFPREFERENCESCOPYAPPVALUE
-#  include <CoreFoundation/CFPreferences.h>
-# endif
-#endif
-
-#if defined _WIN32 || defined __WIN32__
-# define WIN32_NATIVE
-#endif
-
-#if defined WIN32_NATIVE || defined __CYGWIN__ /* WIN32 or Cygwin */
-# define WIN32_LEAN_AND_MEAN
-# include <windows.h>
-/* List of language codes, sorted by value:
-   0x01 LANG_ARABIC
-   0x02 LANG_BULGARIAN
-   0x03 LANG_CATALAN
-   0x04 LANG_CHINESE
-   0x05 LANG_CZECH
-   0x06 LANG_DANISH
-   0x07 LANG_GERMAN
-   0x08 LANG_GREEK
-   0x09 LANG_ENGLISH
-   0x0a LANG_SPANISH
-   0x0b LANG_FINNISH
-   0x0c LANG_FRENCH
-   0x0d LANG_HEBREW
-   0x0e LANG_HUNGARIAN
-   0x0f LANG_ICELANDIC
-   0x10 LANG_ITALIAN
-   0x11 LANG_JAPANESE
-   0x12 LANG_KOREAN
-   0x13 LANG_DUTCH
-   0x14 LANG_NORWEGIAN
-   0x15 LANG_POLISH
-   0x16 LANG_PORTUGUESE
-   0x17 LANG_ROMANSH
-   0x18 LANG_ROMANIAN
-   0x19 LANG_RUSSIAN
-   0x1a LANG_CROATIAN == LANG_SERBIAN
-   0x1b LANG_SLOVAK
-   0x1c LANG_ALBANIAN
-   0x1d LANG_SWEDISH
-   0x1e LANG_THAI
-   0x1f LANG_TURKISH
-   0x20 LANG_URDU
-   0x21 LANG_INDONESIAN
-   0x22 LANG_UKRAINIAN
-   0x23 LANG_BELARUSIAN
-   0x24 LANG_SLOVENIAN
-   0x25 LANG_ESTONIAN
-   0x26 LANG_LATVIAN
-   0x27 LANG_LITHUANIAN
-   0x28 LANG_TAJIK
-   0x29 LANG_FARSI
-   0x2a LANG_VIETNAMESE
-   0x2b LANG_ARMENIAN
-   0x2c LANG_AZERI
-   0x2d LANG_BASQUE
-   0x2e LANG_SORBIAN
-   0x2f LANG_MACEDONIAN
-   0x30 LANG_SUTU
-   0x31 LANG_TSONGA
-   0x32 LANG_TSWANA
-   0x33 LANG_VENDA
-   0x34 LANG_XHOSA
-   0x35 LANG_ZULU
-   0x36 LANG_AFRIKAANS
-   0x37 LANG_GEORGIAN
-   0x38 LANG_FAEROESE
-   0x39 LANG_HINDI
-   0x3a LANG_MALTESE
-   0x3b LANG_SAMI
-   0x3c LANG_GAELIC
-   0x3d LANG_YIDDISH
-   0x3e LANG_MALAY
-   0x3f LANG_KAZAK
-   0x40 LANG_KYRGYZ
-   0x41 LANG_SWAHILI
-   0x42 LANG_TURKMEN
-   0x43 LANG_UZBEK
-   0x44 LANG_TATAR
-   0x45 LANG_BENGALI
-   0x46 LANG_PUNJABI
-   0x47 LANG_GUJARATI
-   0x48 LANG_ORIYA
-   0x49 LANG_TAMIL
-   0x4a LANG_TELUGU
-   0x4b LANG_KANNADA
-   0x4c LANG_MALAYALAM
-   0x4d LANG_ASSAMESE
-   0x4e LANG_MARATHI
-   0x4f LANG_SANSKRIT
-   0x50 LANG_MONGOLIAN
-   0x51 LANG_TIBETAN
-   0x52 LANG_WELSH
-   0x53 LANG_CAMBODIAN
-   0x54 LANG_LAO
-   0x55 LANG_BURMESE
-   0x56 LANG_GALICIAN
-   0x57 LANG_KONKANI
-   0x58 LANG_MANIPURI
-   0x59 LANG_SINDHI
-   0x5a LANG_SYRIAC
-   0x5b LANG_SINHALESE
-   0x5c LANG_CHEROKEE
-   0x5d LANG_INUKTITUT
-   0x5e LANG_AMHARIC
-   0x5f LANG_TAMAZIGHT
-   0x60 LANG_KASHMIRI
-   0x61 LANG_NEPALI
-   0x62 LANG_FRISIAN
-   0x63 LANG_PASHTO
-   0x64 LANG_TAGALOG
-   0x65 LANG_DIVEHI
-   0x66 LANG_EDO
-   0x67 LANG_FULFULDE
-   0x68 LANG_HAUSA
-   0x69 LANG_IBIBIO
-   0x6a LANG_YORUBA
-   0x6d LANG_BASHKIR
-   0x6e LANG_LUXEMBOURGISH
-   0x6f LANG_GREENLANDIC
-   0x70 LANG_IGBO
-   0x71 LANG_KANURI
-   0x72 LANG_OROMO
-   0x73 LANG_TIGRINYA
-   0x74 LANG_GUARANI
-   0x75 LANG_HAWAIIAN
-   0x76 LANG_LATIN
-   0x77 LANG_SOMALI
-   0x78 LANG_YI
-   0x79 LANG_PAPIAMENTU
-   0x7a LANG_MAPUDUNGUN
-   0x7c LANG_MOHAWK
-   0x7e LANG_BRETON
-   0x82 LANG_OCCITAN
-   0x83 LANG_CORSICAN
-   0x84 LANG_ALSATIAN
-   0x85 LANG_YAKUT
-   0x86 LANG_KICHE
-   0x87 LANG_KINYARWANDA
-   0x88 LANG_WOLOF
-   0x8c LANG_DARI
-   0x91 LANG_SCOTTISH_GAELIC
-*/
-/* Mingw headers don't have latest language and sublanguage codes.  */
-# ifndef LANG_AFRIKAANS
-# define LANG_AFRIKAANS 0x36
-# endif
-# ifndef LANG_ALBANIAN
-# define LANG_ALBANIAN 0x1c
-# endif
-# ifndef LANG_ALSATIAN
-# define LANG_ALSATIAN 0x84
-# endif
-# ifndef LANG_AMHARIC
-# define LANG_AMHARIC 0x5e
-# endif
-# ifndef LANG_ARABIC
-# define LANG_ARABIC 0x01
-# endif
-# ifndef LANG_ARMENIAN
-# define LANG_ARMENIAN 0x2b
-# endif
-# ifndef LANG_ASSAMESE
-# define LANG_ASSAMESE 0x4d
-# endif
-# ifndef LANG_AZERI
-# define LANG_AZERI 0x2c
-# endif
-# ifndef LANG_BASHKIR
-# define LANG_BASHKIR 0x6d
-# endif
-# ifndef LANG_BASQUE
-# define LANG_BASQUE 0x2d
-# endif
-# ifndef LANG_BELARUSIAN
-# define LANG_BELARUSIAN 0x23
-# endif
-# ifndef LANG_BENGALI
-# define LANG_BENGALI 0x45
-# endif
-# ifndef LANG_BRETON
-# define LANG_BRETON 0x7e
-# endif
-# ifndef LANG_BURMESE
-# define LANG_BURMESE 0x55
-# endif
-# ifndef LANG_CAMBODIAN
-# define LANG_CAMBODIAN 0x53
-# endif
-# ifndef LANG_CATALAN
-# define LANG_CATALAN 0x03
-# endif
-# ifndef LANG_CHEROKEE
-# define LANG_CHEROKEE 0x5c
-# endif
-# ifndef LANG_CORSICAN
-# define LANG_CORSICAN 0x83
-# endif
-# ifndef LANG_DARI
-# define LANG_DARI 0x8c
-# endif
-# ifndef LANG_DIVEHI
-# define LANG_DIVEHI 0x65
-# endif
-# ifndef LANG_EDO
-# define LANG_EDO 0x66
-# endif
-# ifndef LANG_ESTONIAN
-# define LANG_ESTONIAN 0x25
-# endif
-# ifndef LANG_FAEROESE
-# define LANG_FAEROESE 0x38
-# endif
-# ifndef LANG_FARSI
-# define LANG_FARSI 0x29
-# endif
-# ifndef LANG_FRISIAN
-# define LANG_FRISIAN 0x62
-# endif
-# ifndef LANG_FULFULDE
-# define LANG_FULFULDE 0x67
-# endif
-# ifndef LANG_GAELIC
-# define LANG_GAELIC 0x3c
-# endif
-# ifndef LANG_GALICIAN
-# define LANG_GALICIAN 0x56
-# endif
-# ifndef LANG_GEORGIAN
-# define LANG_GEORGIAN 0x37
-# endif
-# ifndef LANG_GREENLANDIC
-# define LANG_GREENLANDIC 0x6f
-# endif
-# ifndef LANG_GUARANI
-# define LANG_GUARANI 0x74
-# endif
-# ifndef LANG_GUJARATI
-# define LANG_GUJARATI 0x47
-# endif
-# ifndef LANG_HAUSA
-# define LANG_HAUSA 0x68
-# endif
-# ifndef LANG_HAWAIIAN
-# define LANG_HAWAIIAN 0x75
-# endif
-# ifndef LANG_HEBREW
-# define LANG_HEBREW 0x0d
-# endif
-# ifndef LANG_HINDI
-# define LANG_HINDI 0x39
-# endif
-# ifndef LANG_IBIBIO
-# define LANG_IBIBIO 0x69
-# endif
-# ifndef LANG_IGBO
-# define LANG_IGBO 0x70
-# endif
-# ifndef LANG_INDONESIAN
-# define LANG_INDONESIAN 0x21
-# endif
-# ifndef LANG_INUKTITUT
-# define LANG_INUKTITUT 0x5d
-# endif
-# ifndef LANG_KANNADA
-# define LANG_KANNADA 0x4b
-# endif
-# ifndef LANG_KANURI
-# define LANG_KANURI 0x71
-# endif
-# ifndef LANG_KASHMIRI
-# define LANG_KASHMIRI 0x60
-# endif
-# ifndef LANG_KAZAK
-# define LANG_KAZAK 0x3f
-# endif
-# ifndef LANG_KICHE
-# define LANG_KICHE 0x86
-# endif
-# ifndef LANG_KINYARWANDA
-# define LANG_KINYARWANDA 0x87
-# endif
-# ifndef LANG_KONKANI
-# define LANG_KONKANI 0x57
-# endif
-# ifndef LANG_KYRGYZ
-# define LANG_KYRGYZ 0x40
-# endif
-# ifndef LANG_LAO
-# define LANG_LAO 0x54
-# endif
-# ifndef LANG_LATIN
-# define LANG_LATIN 0x76
-# endif
-# ifndef LANG_LATVIAN
-# define LANG_LATVIAN 0x26
-# endif
-# ifndef LANG_LITHUANIAN
-# define LANG_LITHUANIAN 0x27
-# endif
-# ifndef LANG_LUXEMBOURGISH
-# define LANG_LUXEMBOURGISH 0x6e
-# endif
-# ifndef LANG_MACEDONIAN
-# define LANG_MACEDONIAN 0x2f
-# endif
-# ifndef LANG_MALAY
-# define LANG_MALAY 0x3e
-# endif
-# ifndef LANG_MALAYALAM
-# define LANG_MALAYALAM 0x4c
-# endif
-# ifndef LANG_MALTESE
-# define LANG_MALTESE 0x3a
-# endif
-# ifndef LANG_MANIPURI
-# define LANG_MANIPURI 0x58
-# endif
-# ifndef LANG_MAORI
-# define LANG_MAORI 0x81
-# endif
-# ifndef LANG_MAPUDUNGUN
-# define LANG_MAPUDUNGUN 0x7a
-# endif
-# ifndef LANG_MARATHI
-# define LANG_MARATHI 0x4e
-# endif
-# ifndef LANG_MOHAWK
-# define LANG_MOHAWK 0x7c
-# endif
-# ifndef LANG_MONGOLIAN
-# define LANG_MONGOLIAN 0x50
-# endif
-# ifndef LANG_NEPALI
-# define LANG_NEPALI 0x61
-# endif
-# ifndef LANG_OCCITAN
-# define LANG_OCCITAN 0x82
-# endif
-# ifndef LANG_ORIYA
-# define LANG_ORIYA 0x48
-# endif
-# ifndef LANG_OROMO
-# define LANG_OROMO 0x72
-# endif
-# ifndef LANG_PAPIAMENTU
-# define LANG_PAPIAMENTU 0x79
-# endif
-# ifndef LANG_PASHTO
-# define LANG_PASHTO 0x63
-# endif
-# ifndef LANG_PUNJABI
-# define LANG_PUNJABI 0x46
-# endif
-# ifndef LANG_QUECHUA
-# define LANG_QUECHUA 0x6b
-# endif
-# ifndef LANG_ROMANSH
-# define LANG_ROMANSH 0x17
-# endif
-# ifndef LANG_SAMI
-# define LANG_SAMI 0x3b
-# endif
-# ifndef LANG_SANSKRIT
-# define LANG_SANSKRIT 0x4f
-# endif
-# ifndef LANG_SCOTTISH_GAELIC
-# define LANG_SCOTTISH_GAELIC 0x91
-# endif
-# ifndef LANG_SERBIAN
-# define LANG_SERBIAN 0x1a
-# endif
-# ifndef LANG_SINDHI
-# define LANG_SINDHI 0x59
-# endif
-# ifndef LANG_SINHALESE
-# define LANG_SINHALESE 0x5b
-# endif
-# ifndef LANG_SLOVAK
-# define LANG_SLOVAK 0x1b
-# endif
-# ifndef LANG_SOMALI
-# define LANG_SOMALI 0x77
-# endif
-# ifndef LANG_SORBIAN
-# define LANG_SORBIAN 0x2e
-# endif
-# ifndef LANG_SOTHO
-# define LANG_SOTHO 0x6c
-# endif
-# ifndef LANG_SUTU
-# define LANG_SUTU 0x30
-# endif
-# ifndef LANG_SWAHILI
-# define LANG_SWAHILI 0x41
-# endif
-# ifndef LANG_SYRIAC
-# define LANG_SYRIAC 0x5a
-# endif
-# ifndef LANG_TAGALOG
-# define LANG_TAGALOG 0x64
-# endif
-# ifndef LANG_TAJIK
-# define LANG_TAJIK 0x28
-# endif
-# ifndef LANG_TAMAZIGHT
-# define LANG_TAMAZIGHT 0x5f
-# endif
-# ifndef LANG_TAMIL
-# define LANG_TAMIL 0x49
-# endif
-# ifndef LANG_TATAR
-# define LANG_TATAR 0x44
-# endif
-# ifndef LANG_TELUGU
-# define LANG_TELUGU 0x4a
-# endif
-# ifndef LANG_THAI
-# define LANG_THAI 0x1e
-# endif
-# ifndef LANG_TIBETAN
-# define LANG_TIBETAN 0x51
-# endif
-# ifndef LANG_TIGRINYA
-# define LANG_TIGRINYA 0x73
-# endif
-# ifndef LANG_TSONGA
-# define LANG_TSONGA 0x31
-# endif
-# ifndef LANG_TSWANA
-# define LANG_TSWANA 0x32
-# endif
-# ifndef LANG_TURKMEN
-# define LANG_TURKMEN 0x42
-# endif
-# ifndef LANG_UIGHUR
-# define LANG_UIGHUR 0x80
-# endif
-# ifndef LANG_UKRAINIAN
-# define LANG_UKRAINIAN 0x22
-# endif
-# ifndef LANG_URDU
-# define LANG_URDU 0x20
-# endif
-# ifndef LANG_UZBEK
-# define LANG_UZBEK 0x43
-# endif
-# ifndef LANG_VENDA
-# define LANG_VENDA 0x33
-# endif
-# ifndef LANG_VIETNAMESE
-# define LANG_VIETNAMESE 0x2a
-# endif
-# ifndef LANG_WELSH
-# define LANG_WELSH 0x52
-# endif
-# ifndef LANG_WOLOF
-# define LANG_WOLOF 0x88
-# endif
-# ifndef LANG_XHOSA
-# define LANG_XHOSA 0x34
-# endif
-# ifndef LANG_YAKUT
-# define LANG_YAKUT 0x85
-# endif
-# ifndef LANG_YI
-# define LANG_YI 0x78
-# endif
-# ifndef LANG_YIDDISH
-# define LANG_YIDDISH 0x3d
-# endif
-# ifndef LANG_YORUBA
-# define LANG_YORUBA 0x6a
-# endif
-# ifndef LANG_ZULU
-# define LANG_ZULU 0x35
-# endif
-# ifndef SUBLANG_AFRIKAANS_SOUTH_AFRICA
-# define SUBLANG_AFRIKAANS_SOUTH_AFRICA 0x01
-# endif
-# ifndef SUBLANG_ALBANIAN_ALBANIA
-# define SUBLANG_ALBANIAN_ALBANIA 0x01
-# endif
-# ifndef SUBLANG_ALSATIAN_FRANCE
-# define SUBLANG_ALSATIAN_FRANCE 0x01
-# endif
-# ifndef SUBLANG_AMHARIC_ETHIOPIA
-# define SUBLANG_AMHARIC_ETHIOPIA 0x01
-# endif
-# ifndef SUBLANG_ARABIC_SAUDI_ARABIA
-# define SUBLANG_ARABIC_SAUDI_ARABIA 0x01
-# endif
-# ifndef SUBLANG_ARABIC_IRAQ
-# define SUBLANG_ARABIC_IRAQ 0x02
-# endif
-# ifndef SUBLANG_ARABIC_EGYPT
-# define SUBLANG_ARABIC_EGYPT 0x03
-# endif
-# ifndef SUBLANG_ARABIC_LIBYA
-# define SUBLANG_ARABIC_LIBYA 0x04
-# endif
-# ifndef SUBLANG_ARABIC_ALGERIA
-# define SUBLANG_ARABIC_ALGERIA 0x05
-# endif
-# ifndef SUBLANG_ARABIC_MOROCCO
-# define SUBLANG_ARABIC_MOROCCO 0x06
-# endif
-# ifndef SUBLANG_ARABIC_TUNISIA
-# define SUBLANG_ARABIC_TUNISIA 0x07
-# endif
-# ifndef SUBLANG_ARABIC_OMAN
-# define SUBLANG_ARABIC_OMAN 0x08
-# endif
-# ifndef SUBLANG_ARABIC_YEMEN
-# define SUBLANG_ARABIC_YEMEN 0x09
-# endif
-# ifndef SUBLANG_ARABIC_SYRIA
-# define SUBLANG_ARABIC_SYRIA 0x0a
-# endif
-# ifndef SUBLANG_ARABIC_JORDAN
-# define SUBLANG_ARABIC_JORDAN 0x0b
-# endif
-# ifndef SUBLANG_ARABIC_LEBANON
-# define SUBLANG_ARABIC_LEBANON 0x0c
-# endif
-# ifndef SUBLANG_ARABIC_KUWAIT
-# define SUBLANG_ARABIC_KUWAIT 0x0d
-# endif
-# ifndef SUBLANG_ARABIC_UAE
-# define SUBLANG_ARABIC_UAE 0x0e
-# endif
-# ifndef SUBLANG_ARABIC_BAHRAIN
-# define SUBLANG_ARABIC_BAHRAIN 0x0f
-# endif
-# ifndef SUBLANG_ARABIC_QATAR
-# define SUBLANG_ARABIC_QATAR 0x10
-# endif
-# ifndef SUBLANG_ARMENIAN_ARMENIA
-# define SUBLANG_ARMENIAN_ARMENIA 0x01
-# endif
-# ifndef SUBLANG_ASSAMESE_INDIA
-# define SUBLANG_ASSAMESE_INDIA 0x01
-# endif
-# ifndef SUBLANG_AZERI_LATIN
-# define SUBLANG_AZERI_LATIN 0x01
-# endif
-# ifndef SUBLANG_AZERI_CYRILLIC
-# define SUBLANG_AZERI_CYRILLIC 0x02
-# endif
-# ifndef SUBLANG_BASHKIR_RUSSIA
-# define SUBLANG_BASHKIR_RUSSIA 0x01
-# endif
-# ifndef SUBLANG_BASQUE_BASQUE
-# define SUBLANG_BASQUE_BASQUE 0x01
-# endif
-# ifndef SUBLANG_BELARUSIAN_BELARUS
-# define SUBLANG_BELARUSIAN_BELARUS 0x01
-# endif
-# ifndef SUBLANG_BENGALI_INDIA
-# define SUBLANG_BENGALI_INDIA 0x01
-# endif
-# ifndef SUBLANG_BENGALI_BANGLADESH
-# define SUBLANG_BENGALI_BANGLADESH 0x02
-# endif
-# ifndef SUBLANG_BOSNIAN_BOSNIA_HERZEGOVINA_LATIN
-# define SUBLANG_BOSNIAN_BOSNIA_HERZEGOVINA_LATIN 0x05
-# endif
-# ifndef SUBLANG_BOSNIAN_BOSNIA_HERZEGOVINA_CYRILLIC
-# define SUBLANG_BOSNIAN_BOSNIA_HERZEGOVINA_CYRILLIC 0x08
-# endif
-# ifndef SUBLANG_BRETON_FRANCE
-# define SUBLANG_BRETON_FRANCE 0x01
-# endif
-# ifndef SUBLANG_BULGARIAN_BULGARIA
-# define SUBLANG_BULGARIAN_BULGARIA 0x01
-# endif
-# ifndef SUBLANG_CAMBODIAN_CAMBODIA
-# define SUBLANG_CAMBODIAN_CAMBODIA 0x01
-# endif
-# ifndef SUBLANG_CATALAN_SPAIN
-# define SUBLANG_CATALAN_SPAIN 0x01
-# endif
-# ifndef SUBLANG_CORSICAN_FRANCE
-# define SUBLANG_CORSICAN_FRANCE 0x01
-# endif
-# ifndef SUBLANG_CROATIAN_CROATIA
-# define SUBLANG_CROATIAN_CROATIA 0x01
-# endif
-# ifndef SUBLANG_CROATIAN_BOSNIA_HERZEGOVINA_LATIN
-# define SUBLANG_CROATIAN_BOSNIA_HERZEGOVINA_LATIN 0x04
-# endif
-# ifndef SUBLANG_CHINESE_MACAU
-# define SUBLANG_CHINESE_MACAU 0x05
-# endif
-# ifndef SUBLANG_CZECH_CZECH_REPUBLIC
-# define SUBLANG_CZECH_CZECH_REPUBLIC 0x01
-# endif
-# ifndef SUBLANG_DANISH_DENMARK
-# define SUBLANG_DANISH_DENMARK 0x01
-# endif
-# ifndef SUBLANG_DARI_AFGHANISTAN
-# define SUBLANG_DARI_AFGHANISTAN 0x01
-# endif
-# ifndef SUBLANG_DIVEHI_MALDIVES
-# define SUBLANG_DIVEHI_MALDIVES 0x01
-# endif
-# ifndef SUBLANG_DUTCH_SURINAM
-# define SUBLANG_DUTCH_SURINAM 0x03
-# endif
-# ifndef SUBLANG_ENGLISH_SOUTH_AFRICA
-# define SUBLANG_ENGLISH_SOUTH_AFRICA 0x07
-# endif
-# ifndef SUBLANG_ENGLISH_JAMAICA
-# define SUBLANG_ENGLISH_JAMAICA 0x08
-# endif
-# ifndef SUBLANG_ENGLISH_CARIBBEAN
-# define SUBLANG_ENGLISH_CARIBBEAN 0x09
-# endif
-# ifndef SUBLANG_ENGLISH_BELIZE
-# define SUBLANG_ENGLISH_BELIZE 0x0a
-# endif
-# ifndef SUBLANG_ENGLISH_TRINIDAD
-# define SUBLANG_ENGLISH_TRINIDAD 0x0b
-# endif
-# ifndef SUBLANG_ENGLISH_ZIMBABWE
-# define SUBLANG_ENGLISH_ZIMBABWE 0x0c
-# endif
-# ifndef SUBLANG_ENGLISH_PHILIPPINES
-# define SUBLANG_ENGLISH_PHILIPPINES 0x0d
-# endif
-# ifndef SUBLANG_ENGLISH_INDONESIA
-# define SUBLANG_ENGLISH_INDONESIA 0x0e
-# endif
-# ifndef SUBLANG_ENGLISH_HONGKONG
-# define SUBLANG_ENGLISH_HONGKONG 0x0f
-# endif
-# ifndef SUBLANG_ENGLISH_INDIA
-# define SUBLANG_ENGLISH_INDIA 0x10
-# endif
-# ifndef SUBLANG_ENGLISH_MALAYSIA
-# define SUBLANG_ENGLISH_MALAYSIA 0x11
-# endif
-# ifndef SUBLANG_ENGLISH_SINGAPORE
-# define SUBLANG_ENGLISH_SINGAPORE 0x12
-# endif
-# ifndef SUBLANG_ESTONIAN_ESTONIA
-# define SUBLANG_ESTONIAN_ESTONIA 0x01
-# endif
-# ifndef SUBLANG_FAEROESE_FAROE_ISLANDS
-# define SUBLANG_FAEROESE_FAROE_ISLANDS 0x01
-# endif
-# ifndef SUBLANG_FARSI_IRAN
-# define SUBLANG_FARSI_IRAN 0x01
-# endif
-# ifndef SUBLANG_FINNISH_FINLAND
-# define SUBLANG_FINNISH_FINLAND 0x01
-# endif
-# ifndef SUBLANG_FRENCH_LUXEMBOURG
-# define SUBLANG_FRENCH_LUXEMBOURG 0x05
-# endif
-# ifndef SUBLANG_FRENCH_MONACO
-# define SUBLANG_FRENCH_MONACO 0x06
-# endif
-# ifndef SUBLANG_FRENCH_WESTINDIES
-# define SUBLANG_FRENCH_WESTINDIES 0x07
-# endif
-# ifndef SUBLANG_FRENCH_REUNION
-# define SUBLANG_FRENCH_REUNION 0x08
-# endif
-# ifndef SUBLANG_FRENCH_CONGO
-# define SUBLANG_FRENCH_CONGO 0x09
-# endif
-# ifndef SUBLANG_FRENCH_SENEGAL
-# define SUBLANG_FRENCH_SENEGAL 0x0a
-# endif
-# ifndef SUBLANG_FRENCH_CAMEROON
-# define SUBLANG_FRENCH_CAMEROON 0x0b
-# endif
-# ifndef SUBLANG_FRENCH_COTEDIVOIRE
-# define SUBLANG_FRENCH_COTEDIVOIRE 0x0c
-# endif
-# ifndef SUBLANG_FRENCH_MALI
-# define SUBLANG_FRENCH_MALI 0x0d
-# endif
-# ifndef SUBLANG_FRENCH_MOROCCO
-# define SUBLANG_FRENCH_MOROCCO 0x0e
-# endif
-# ifndef SUBLANG_FRENCH_HAITI
-# define SUBLANG_FRENCH_HAITI 0x0f
-# endif
-# ifndef SUBLANG_FRISIAN_NETHERLANDS
-# define SUBLANG_FRISIAN_NETHERLANDS 0x01
-# endif
-# ifndef SUBLANG_GALICIAN_SPAIN
-# define SUBLANG_GALICIAN_SPAIN 0x01
-# endif
-# ifndef SUBLANG_GEORGIAN_GEORGIA
-# define SUBLANG_GEORGIAN_GEORGIA 0x01
-# endif
-# ifndef SUBLANG_GERMAN_LUXEMBOURG
-# define SUBLANG_GERMAN_LUXEMBOURG 0x04
-# endif
-# ifndef SUBLANG_GERMAN_LIECHTENSTEIN
-# define SUBLANG_GERMAN_LIECHTENSTEIN 0x05
-# endif
-# ifndef SUBLANG_GREEK_GREECE
-# define SUBLANG_GREEK_GREECE 0x01
-# endif
-# ifndef SUBLANG_GREENLANDIC_GREENLAND
-# define SUBLANG_GREENLANDIC_GREENLAND 0x01
-# endif
-# ifndef SUBLANG_GUJARATI_INDIA
-# define SUBLANG_GUJARATI_INDIA 0x01
-# endif
-# ifndef SUBLANG_HAUSA_NIGERIA_LATIN
-# define SUBLANG_HAUSA_NIGERIA_LATIN 0x01
-# endif
-# ifndef SUBLANG_HEBREW_ISRAEL
-# define SUBLANG_HEBREW_ISRAEL 0x01
-# endif
-# ifndef SUBLANG_HINDI_INDIA
-# define SUBLANG_HINDI_INDIA 0x01
-# endif
-# ifndef SUBLANG_HUNGARIAN_HUNGARY
-# define SUBLANG_HUNGARIAN_HUNGARY 0x01
-# endif
-# ifndef SUBLANG_ICELANDIC_ICELAND
-# define SUBLANG_ICELANDIC_ICELAND 0x01
-# endif
-# ifndef SUBLANG_IGBO_NIGERIA
-# define SUBLANG_IGBO_NIGERIA 0x01
-# endif
-# ifndef SUBLANG_INDONESIAN_INDONESIA
-# define SUBLANG_INDONESIAN_INDONESIA 0x01
-# endif
-# ifndef SUBLANG_INUKTITUT_CANADA
-# define SUBLANG_INUKTITUT_CANADA 0x01
-# endif
-# undef SUBLANG_INUKTITUT_CANADA_LATIN
-# define SUBLANG_INUKTITUT_CANADA_LATIN 0x02
-# undef SUBLANG_IRISH_IRELAND
-# define SUBLANG_IRISH_IRELAND 0x02
-# ifndef SUBLANG_JAPANESE_JAPAN
-# define SUBLANG_JAPANESE_JAPAN 0x01
-# endif
-# ifndef SUBLANG_KANNADA_INDIA
-# define SUBLANG_KANNADA_INDIA 0x01
-# endif
-# ifndef SUBLANG_KASHMIRI_INDIA
-# define SUBLANG_KASHMIRI_INDIA 0x02
-# endif
-# ifndef SUBLANG_KAZAK_KAZAKHSTAN
-# define SUBLANG_KAZAK_KAZAKHSTAN 0x01
-# endif
-# ifndef SUBLANG_KICHE_GUATEMALA
-# define SUBLANG_KICHE_GUATEMALA 0x01
-# endif
-# ifndef SUBLANG_KINYARWANDA_RWANDA
-# define SUBLANG_KINYARWANDA_RWANDA 0x01
-# endif
-# ifndef SUBLANG_KONKANI_INDIA
-# define SUBLANG_KONKANI_INDIA 0x01
-# endif
-# ifndef SUBLANG_KYRGYZ_KYRGYZSTAN
-# define SUBLANG_KYRGYZ_KYRGYZSTAN 0x01
-# endif
-# ifndef SUBLANG_LAO_LAOS
-# define SUBLANG_LAO_LAOS 0x01
-# endif
-# ifndef SUBLANG_LATVIAN_LATVIA
-# define SUBLANG_LATVIAN_LATVIA 0x01
-# endif
-# ifndef SUBLANG_LITHUANIAN_LITHUANIA
-# define SUBLANG_LITHUANIAN_LITHUANIA 0x01
-# endif
-# undef SUBLANG_LOWER_SORBIAN_GERMANY
-# define SUBLANG_LOWER_SORBIAN_GERMANY 0x02
-# ifndef SUBLANG_LUXEMBOURGISH_LUXEMBOURG
-# define SUBLANG_LUXEMBOURGISH_LUXEMBOURG 0x01
-# endif
-# ifndef SUBLANG_MACEDONIAN_MACEDONIA
-# define SUBLANG_MACEDONIAN_MACEDONIA 0x01
-# endif
-# ifndef SUBLANG_MALAY_MALAYSIA
-# define SUBLANG_MALAY_MALAYSIA 0x01
-# endif
-# ifndef SUBLANG_MALAY_BRUNEI_DARUSSALAM
-# define SUBLANG_MALAY_BRUNEI_DARUSSALAM 0x02
-# endif
-# ifndef SUBLANG_MALAYALAM_INDIA
-# define SUBLANG_MALAYALAM_INDIA 0x01
-# endif
-# ifndef SUBLANG_MALTESE_MALTA
-# define SUBLANG_MALTESE_MALTA 0x01
-# endif
-# ifndef SUBLANG_MAORI_NEW_ZEALAND
-# define SUBLANG_MAORI_NEW_ZEALAND 0x01
-# endif
-# ifndef SUBLANG_MAPUDUNGUN_CHILE
-# define SUBLANG_MAPUDUNGUN_CHILE 0x01
-# endif
-# ifndef SUBLANG_MARATHI_INDIA
-# define SUBLANG_MARATHI_INDIA 0x01
-# endif
-# ifndef SUBLANG_MOHAWK_CANADA
-# define SUBLANG_MOHAWK_CANADA 0x01
-# endif
-# ifndef SUBLANG_MONGOLIAN_CYRILLIC_MONGOLIA
-# define SUBLANG_MONGOLIAN_CYRILLIC_MONGOLIA 0x01
-# endif
-# ifndef SUBLANG_MONGOLIAN_PRC
-# define SUBLANG_MONGOLIAN_PRC 0x02
-# endif
-# ifndef SUBLANG_NEPALI_NEPAL
-# define SUBLANG_NEPALI_NEPAL 0x01
-# endif
-# ifndef SUBLANG_NEPALI_INDIA
-# define SUBLANG_NEPALI_INDIA 0x02
-# endif
-# ifndef SUBLANG_OCCITAN_FRANCE
-# define SUBLANG_OCCITAN_FRANCE 0x01
-# endif
-# ifndef SUBLANG_ORIYA_INDIA
-# define SUBLANG_ORIYA_INDIA 0x01
-# endif
-# ifndef SUBLANG_PASHTO_AFGHANISTAN
-# define SUBLANG_PASHTO_AFGHANISTAN 0x01
-# endif
-# ifndef SUBLANG_POLISH_POLAND
-# define SUBLANG_POLISH_POLAND 0x01
-# endif
-# ifndef SUBLANG_PUNJABI_INDIA
-# define SUBLANG_PUNJABI_INDIA 0x01
-# endif
-# ifndef SUBLANG_PUNJABI_PAKISTAN
-# define SUBLANG_PUNJABI_PAKISTAN 0x02
-# endif
-# ifndef SUBLANG_QUECHUA_BOLIVIA
-# define SUBLANG_QUECHUA_BOLIVIA 0x01
-# endif
-# ifndef SUBLANG_QUECHUA_ECUADOR
-# define SUBLANG_QUECHUA_ECUADOR 0x02
-# endif
-# ifndef SUBLANG_QUECHUA_PERU
-# define SUBLANG_QUECHUA_PERU 0x03
-# endif
-# ifndef SUBLANG_ROMANIAN_ROMANIA
-# define SUBLANG_ROMANIAN_ROMANIA 0x01
-# endif
-# ifndef SUBLANG_ROMANIAN_MOLDOVA
-# define SUBLANG_ROMANIAN_MOLDOVA 0x02
-# endif
-# ifndef SUBLANG_ROMANSH_SWITZERLAND
-# define SUBLANG_ROMANSH_SWITZERLAND 0x01
-# endif
-# ifndef SUBLANG_RUSSIAN_RUSSIA
-# define SUBLANG_RUSSIAN_RUSSIA 0x01
-# endif
-# ifndef SUBLANG_RUSSIAN_MOLDAVIA
-# define SUBLANG_RUSSIAN_MOLDAVIA 0x02
-# endif
-# ifndef SUBLANG_SAMI_NORTHERN_NORWAY
-# define SUBLANG_SAMI_NORTHERN_NORWAY 0x01
-# endif
-# ifndef SUBLANG_SAMI_NORTHERN_SWEDEN
-# define SUBLANG_SAMI_NORTHERN_SWEDEN 0x02
-# endif
-# ifndef SUBLANG_SAMI_NORTHERN_FINLAND
-# define SUBLANG_SAMI_NORTHERN_FINLAND 0x03
-# endif
-# ifndef SUBLANG_SAMI_LULE_NORWAY
-# define SUBLANG_SAMI_LULE_NORWAY 0x04
-# endif
-# ifndef SUBLANG_SAMI_LULE_SWEDEN
-# define SUBLANG_SAMI_LULE_SWEDEN 0x05
-# endif
-# ifndef SUBLANG_SAMI_SOUTHERN_NORWAY
-# define SUBLANG_SAMI_SOUTHERN_NORWAY 0x06
-# endif
-# ifndef SUBLANG_SAMI_SOUTHERN_SWEDEN
-# define SUBLANG_SAMI_SOUTHERN_SWEDEN 0x07
-# endif
-# undef SUBLANG_SAMI_SKOLT_FINLAND
-# define SUBLANG_SAMI_SKOLT_FINLAND 0x08
-# undef SUBLANG_SAMI_INARI_FINLAND
-# define SUBLANG_SAMI_INARI_FINLAND 0x09
-# ifndef SUBLANG_SANSKRIT_INDIA
-# define SUBLANG_SANSKRIT_INDIA 0x01
-# endif
-# ifndef SUBLANG_SERBIAN_LATIN
-# define SUBLANG_SERBIAN_LATIN 0x02
-# endif
-# ifndef SUBLANG_SERBIAN_CYRILLIC
-# define SUBLANG_SERBIAN_CYRILLIC 0x03
-# endif
-# ifndef SUBLANG_SINDHI_INDIA
-# define SUBLANG_SINDHI_INDIA 0x01
-# endif
-# undef SUBLANG_SINDHI_PAKISTAN
-# define SUBLANG_SINDHI_PAKISTAN 0x02
-# ifndef SUBLANG_SINDHI_AFGHANISTAN
-# define SUBLANG_SINDHI_AFGHANISTAN 0x02
-# endif
-# ifndef SUBLANG_SINHALESE_SRI_LANKA
-# define SUBLANG_SINHALESE_SRI_LANKA 0x01
-# endif
-# ifndef SUBLANG_SLOVAK_SLOVAKIA
-# define SUBLANG_SLOVAK_SLOVAKIA 0x01
-# endif
-# ifndef SUBLANG_SLOVENIAN_SLOVENIA
-# define SUBLANG_SLOVENIAN_SLOVENIA 0x01
-# endif
-# ifndef SUBLANG_SOTHO_SOUTH_AFRICA
-# define SUBLANG_SOTHO_SOUTH_AFRICA 0x01
-# endif
-# ifndef SUBLANG_SPANISH_GUATEMALA
-# define SUBLANG_SPANISH_GUATEMALA 0x04
-# endif
-# ifndef SUBLANG_SPANISH_COSTA_RICA
-# define SUBLANG_SPANISH_COSTA_RICA 0x05
-# endif
-# ifndef SUBLANG_SPANISH_PANAMA
-# define SUBLANG_SPANISH_PANAMA 0x06
-# endif
-# ifndef SUBLANG_SPANISH_DOMINICAN_REPUBLIC
-# define SUBLANG_SPANISH_DOMINICAN_REPUBLIC 0x07
-# endif
-# ifndef SUBLANG_SPANISH_VENEZUELA
-# define SUBLANG_SPANISH_VENEZUELA 0x08
-# endif
-# ifndef SUBLANG_SPANISH_COLOMBIA
-# define SUBLANG_SPANISH_COLOMBIA 0x09
-# endif
-# ifndef SUBLANG_SPANISH_PERU
-# define SUBLANG_SPANISH_PERU 0x0a
-# endif
-# ifndef SUBLANG_SPANISH_ARGENTINA
-# define SUBLANG_SPANISH_ARGENTINA 0x0b
-# endif
-# ifndef SUBLANG_SPANISH_ECUADOR
-# define SUBLANG_SPANISH_ECUADOR 0x0c
-# endif
-# ifndef SUBLANG_SPANISH_CHILE
-# define SUBLANG_SPANISH_CHILE 0x0d
-# endif
-# ifndef SUBLANG_SPANISH_URUGUAY
-# define SUBLANG_SPANISH_URUGUAY 0x0e
-# endif
-# ifndef SUBLANG_SPANISH_PARAGUAY
-# define SUBLANG_SPANISH_PARAGUAY 0x0f
-# endif
-# ifndef SUBLANG_SPANISH_BOLIVIA
-# define SUBLANG_SPANISH_BOLIVIA 0x10
-# endif
-# ifndef SUBLANG_SPANISH_EL_SALVADOR
-# define SUBLANG_SPANISH_EL_SALVADOR 0x11
-# endif
-# ifndef SUBLANG_SPANISH_HONDURAS
-# define SUBLANG_SPANISH_HONDURAS 0x12
-# endif
-# ifndef SUBLANG_SPANISH_NICARAGUA
-# define SUBLANG_SPANISH_NICARAGUA 0x13
-# endif
-# ifndef SUBLANG_SPANISH_PUERTO_RICO
-# define SUBLANG_SPANISH_PUERTO_RICO 0x14
-# endif
-# ifndef SUBLANG_SPANISH_US
-# define SUBLANG_SPANISH_US 0x15
-# endif
-# ifndef SUBLANG_SWAHILI_KENYA
-# define SUBLANG_SWAHILI_KENYA 0x01
-# endif
-# ifndef SUBLANG_SWEDISH_SWEDEN
-# define SUBLANG_SWEDISH_SWEDEN 0x01
-# endif
-# ifndef SUBLANG_SWEDISH_FINLAND
-# define SUBLANG_SWEDISH_FINLAND 0x02
-# endif
-# ifndef SUBLANG_SYRIAC_SYRIA
-# define SUBLANG_SYRIAC_SYRIA 0x01
-# endif
-# ifndef SUBLANG_TAGALOG_PHILIPPINES
-# define SUBLANG_TAGALOG_PHILIPPINES 0x01
-# endif
-# ifndef SUBLANG_TAJIK_TAJIKISTAN
-# define SUBLANG_TAJIK_TAJIKISTAN 0x01
-# endif
-# ifndef SUBLANG_TAMAZIGHT_ARABIC
-# define SUBLANG_TAMAZIGHT_ARABIC 0x01
-# endif
-# ifndef SUBLANG_TAMAZIGHT_ALGERIA_LATIN
-# define SUBLANG_TAMAZIGHT_ALGERIA_LATIN 0x02
-# endif
-# ifndef SUBLANG_TAMIL_INDIA
-# define SUBLANG_TAMIL_INDIA 0x01
-# endif
-# ifndef SUBLANG_TATAR_RUSSIA
-# define SUBLANG_TATAR_RUSSIA 0x01
-# endif
-# ifndef SUBLANG_TELUGU_INDIA
-# define SUBLANG_TELUGU_INDIA 0x01
-# endif
-# ifndef SUBLANG_THAI_THAILAND
-# define SUBLANG_THAI_THAILAND 0x01
-# endif
-# ifndef SUBLANG_TIBETAN_PRC
-# define SUBLANG_TIBETAN_PRC 0x01
-# endif
-# undef SUBLANG_TIBETAN_BHUTAN
-# define SUBLANG_TIBETAN_BHUTAN 0x02
-# ifndef SUBLANG_TIGRINYA_ETHIOPIA
-# define SUBLANG_TIGRINYA_ETHIOPIA 0x01
-# endif
-# ifndef SUBLANG_TIGRINYA_ERITREA
-# define SUBLANG_TIGRINYA_ERITREA 0x02
-# endif
-# ifndef SUBLANG_TSWANA_SOUTH_AFRICA
-# define SUBLANG_TSWANA_SOUTH_AFRICA 0x01
-# endif
-# ifndef SUBLANG_TURKISH_TURKEY
-# define SUBLANG_TURKISH_TURKEY 0x01
-# endif
-# ifndef SUBLANG_TURKMEN_TURKMENISTAN
-# define SUBLANG_TURKMEN_TURKMENISTAN 0x01
-# endif
-# ifndef SUBLANG_UIGHUR_PRC
-# define SUBLANG_UIGHUR_PRC 0x01
-# endif
-# ifndef SUBLANG_UKRAINIAN_UKRAINE
-# define SUBLANG_UKRAINIAN_UKRAINE 0x01
-# endif
-# ifndef SUBLANG_UPPER_SORBIAN_GERMANY
-# define SUBLANG_UPPER_SORBIAN_GERMANY 0x01
-# endif
-# ifndef SUBLANG_URDU_PAKISTAN
-# define SUBLANG_URDU_PAKISTAN 0x01
-# endif
-# ifndef SUBLANG_URDU_INDIA
-# define SUBLANG_URDU_INDIA 0x02
-# endif
-# ifndef SUBLANG_UZBEK_LATIN
-# define SUBLANG_UZBEK_LATIN 0x01
-# endif
-# ifndef SUBLANG_UZBEK_CYRILLIC
-# define SUBLANG_UZBEK_CYRILLIC 0x02
-# endif
-# ifndef SUBLANG_VIETNAMESE_VIETNAM
-# define SUBLANG_VIETNAMESE_VIETNAM 0x01
-# endif
-# ifndef SUBLANG_WELSH_UNITED_KINGDOM
-# define SUBLANG_WELSH_UNITED_KINGDOM 0x01
-# endif
-# ifndef SUBLANG_WOLOF_SENEGAL
-# define SUBLANG_WOLOF_SENEGAL 0x01
-# endif
-# ifndef SUBLANG_XHOSA_SOUTH_AFRICA
-# define SUBLANG_XHOSA_SOUTH_AFRICA 0x01
-# endif
-# ifndef SUBLANG_YAKUT_RUSSIA
-# define SUBLANG_YAKUT_RUSSIA 0x01
-# endif
-# ifndef SUBLANG_YI_PRC
-# define SUBLANG_YI_PRC 0x01
-# endif
-# ifndef SUBLANG_YORUBA_NIGERIA
-# define SUBLANG_YORUBA_NIGERIA 0x01
-# endif
-# ifndef SUBLANG_ZULU_SOUTH_AFRICA
-# define SUBLANG_ZULU_SOUTH_AFRICA 0x01
-# endif
-/* GetLocaleInfoA operations.  */
-# ifndef LOCALE_SNAME
-# define LOCALE_SNAME 0x5c
-# endif
-#endif
-
-
-#if HAVE_CFLOCALECOPYCURRENT || HAVE_CFPREFERENCESCOPYAPPVALUE
-/* MacOS X 10.2 or newer */
-
-/* Canonicalize a MacOS X locale name to a Unix locale name.
-   NAME is a sufficiently large buffer.
-   On input, it contains the MacOS X locale name.
-   On output, it contains the Unix locale name.  */
-# if !defined IN_LIBINTL
-static
-# endif
-void
-gl_locale_name_canonicalize (char *name)
-{
-  /* This conversion is based on a posting by
-     Deborah GoldSmith <goldsmit@apple.com> on 2005-03-08,
-     http://lists.apple.com/archives/carbon-dev/2005/Mar/msg00293.html */
-
-  /* Convert legacy (NeXTstep inherited) English names to Unix (ISO 639 and
-     ISO 3166) names.  Prior to MacOS X 10.3, there is no API for doing this.
-     Therefore we do it ourselves, using a table based on the results of the
-     MacOS X 10.3.8 function
-     CFLocaleCreateCanonicalLocaleIdentifierFromString().  */
-  typedef struct { const char legacy[21+1]; const char unixy[5+1]; }
-          legacy_entry;
-  static const legacy_entry legacy_table[] = {
-    { "Afrikaans",             "af" },
-    { "Albanian",              "sq" },
-    { "Amharic",               "am" },
-    { "Arabic",                "ar" },
-    { "Armenian",              "hy" },
-    { "Assamese",              "as" },
-    { "Aymara",                "ay" },
-    { "Azerbaijani",           "az" },
-    { "Basque",                "eu" },
-    { "Belarusian",            "be" },
-    { "Belorussian",           "be" },
-    { "Bengali",               "bn" },
-    { "Brazilian Portugese",   "pt_BR" },
-    { "Brazilian Portuguese",  "pt_BR" },
-    { "Breton",                "br" },
-    { "Bulgarian",             "bg" },
-    { "Burmese",               "my" },
-    { "Byelorussian",          "be" },
-    { "Catalan",               "ca" },
-    { "Chewa",                 "ny" },
-    { "Chichewa",              "ny" },
-    { "Chinese",               "zh" },
-    { "Chinese, Simplified",   "zh_CN" },
-    { "Chinese, Traditional",  "zh_TW" },
-    { "Chinese, Tradtional",   "zh_TW" },
-    { "Croatian",              "hr" },
-    { "Czech",                 "cs" },
-    { "Danish",                "da" },
-    { "Dutch",                 "nl" },
-    { "Dzongkha",              "dz" },
-    { "English",               "en" },
-    { "Esperanto",             "eo" },
-    { "Estonian",              "et" },
-    { "Faroese",               "fo" },
-    { "Farsi",                 "fa" },
-    { "Finnish",               "fi" },
-    { "Flemish",               "nl_BE" },
-    { "French",                "fr" },
-    { "Galician",              "gl" },
-    { "Gallegan",              "gl" },
-    { "Georgian",              "ka" },
-    { "German",                "de" },
-    { "Greek",                 "el" },
-    { "Greenlandic",           "kl" },
-    { "Guarani",               "gn" },
-    { "Gujarati",              "gu" },
-    { "Hawaiian",              "haw" }, /* Yes, "haw", not "cpe".  */
-    { "Hebrew",                "he" },
-    { "Hindi",                 "hi" },
-    { "Hungarian",             "hu" },
-    { "Icelandic",             "is" },
-    { "Indonesian",            "id" },
-    { "Inuktitut",             "iu" },
-    { "Irish",                 "ga" },
-    { "Italian",               "it" },
-    { "Japanese",              "ja" },
-    { "Javanese",              "jv" },
-    { "Kalaallisut",           "kl" },
-    { "Kannada",               "kn" },
-    { "Kashmiri",              "ks" },
-    { "Kazakh",                "kk" },
-    { "Khmer",                 "km" },
-    { "Kinyarwanda",           "rw" },
-    { "Kirghiz",               "ky" },
-    { "Korean",                "ko" },
-    { "Kurdish",               "ku" },
-    { "Latin",                 "la" },
-    { "Latvian",               "lv" },
-    { "Lithuanian",            "lt" },
-    { "Macedonian",            "mk" },
-    { "Malagasy",              "mg" },
-    { "Malay",                 "ms" },
-    { "Malayalam",             "ml" },
-    { "Maltese",               "mt" },
-    { "Manx",                  "gv" },
-    { "Marathi",               "mr" },
-    { "Moldavian",             "mo" },
-    { "Mongolian",             "mn" },
-    { "Nepali",                "ne" },
-    { "Norwegian",             "nb" }, /* Yes, "nb", not the obsolete "no".  */
-    { "Nyanja",                "ny" },
-    { "Nynorsk",               "nn" },
-    { "Oriya",                 "or" },
-    { "Oromo",                 "om" },
-    { "Panjabi",               "pa" },
-    { "Pashto",                "ps" },
-    { "Persian",               "fa" },
-    { "Polish",                "pl" },
-    { "Portuguese",            "pt" },
-    { "Portuguese, Brazilian", "pt_BR" },
-    { "Punjabi",               "pa" },
-    { "Pushto",                "ps" },
-    { "Quechua",               "qu" },
-    { "Romanian",              "ro" },
-    { "Ruanda",                "rw" },
-    { "Rundi",                 "rn" },
-    { "Russian",               "ru" },
-    { "Sami",                  "se_NO" }, /* Not just "se".  */
-    { "Sanskrit",              "sa" },
-    { "Scottish",              "gd" },
-    { "Serbian",               "sr" },
-    { "Simplified Chinese",    "zh_CN" },
-    { "Sindhi",                "sd" },
-    { "Sinhalese",             "si" },
-    { "Slovak",                "sk" },
-    { "Slovenian",             "sl" },
-    { "Somali",                "so" },
-    { "Spanish",               "es" },
-    { "Sundanese",             "su" },
-    { "Swahili",               "sw" },
-    { "Swedish",               "sv" },
-    { "Tagalog",               "tl" },
-    { "Tajik",                 "tg" },
-    { "Tajiki",                "tg" },
-    { "Tamil",                 "ta" },
-    { "Tatar",                 "tt" },
-    { "Telugu",                "te" },
-    { "Thai",                  "th" },
-    { "Tibetan",               "bo" },
-    { "Tigrinya",              "ti" },
-    { "Tongan",                "to" },
-    { "Traditional Chinese",   "zh_TW" },
-    { "Turkish",               "tr" },
-    { "Turkmen",               "tk" },
-    { "Uighur",                "ug" },
-    { "Ukrainian",             "uk" },
-    { "Urdu",                  "ur" },
-    { "Uzbek",                 "uz" },
-    { "Vietnamese",            "vi" },
-    { "Welsh",                 "cy" },
-    { "Yiddish",               "yi" }
-  };
-
-  /* Convert new-style locale names with language tags (ISO 639 and ISO 15924)
-     to Unix (ISO 639 and ISO 3166) names.  */
-  typedef struct { const char langtag[7+1]; const char unixy[12+1]; }
-          langtag_entry;
-  static const langtag_entry langtag_table[] = {
-    /* MacOS X has "az-Arab", "az-Cyrl", "az-Latn".
-       The default script for az on Unix is Latin.  */
-    { "az-Latn", "az" },
-    /* MacOS X has "ga-dots".  Does not yet exist on Unix.  */
-    { "ga-dots", "ga" },
-    /* MacOS X has "kk-Cyrl".  Does not yet exist on Unix.  */
-    /* MacOS X has "mn-Cyrl", "mn-Mong".
-       The default script for mn on Unix is Cyrillic.  */
-    { "mn-Cyrl", "mn" },
-    /* MacOS X has "ms-Arab", "ms-Latn".
-       The default script for ms on Unix is Latin.  */
-    { "ms-Latn", "ms" },
-    /* MacOS X has "tg-Cyrl".
-       The default script for tg on Unix is Cyrillic.  */
-    { "tg-Cyrl", "tg" },
-    /* MacOS X has "tk-Cyrl".  Does not yet exist on Unix.  */
-    /* MacOS X has "tt-Cyrl".
-       The default script for tt on Unix is Cyrillic.  */
-    { "tt-Cyrl", "tt" },
-    /* MacOS X has "zh-Hans", "zh-Hant".
-       Country codes are used to distinguish these on Unix.  */
-    { "zh-Hans", "zh_CN" },
-    { "zh-Hant", "zh_TW" }
-  };
-
-  /* Convert script names (ISO 15924) to Unix conventions.
-     See http://www.unicode.org/iso15924/iso15924-codes.html  */
-  typedef struct { const char script[4+1]; const char unixy[9+1]; }
-          script_entry;
-  static const script_entry script_table[] = {
-    { "Arab", "arabic" },
-    { "Cyrl", "cyrillic" },
-    { "Mong", "mongolian" }
-  };
-
-  /* Step 1: Convert using legacy_table.  */
-  if (name[0] >= 'A' && name[0] <= 'Z')
-    {
-      unsigned int i1, i2;
-      i1 = 0;
-      i2 = sizeof (legacy_table) / sizeof (legacy_entry);
-      while (i2 - i1 > 1)
-        {
-          /* At this point we know that if name occurs in legacy_table,
-             its index must be >= i1 and < i2.  */
-          unsigned int i = (i1 + i2) >> 1;
-          const legacy_entry *p = &legacy_table[i];
-          if (strcmp (name, p->legacy) < 0)
-            i2 = i;
-          else
-            i1 = i;
-        }
-      if (strcmp (name, legacy_table[i1].legacy) == 0)
-        {
-          strcpy (name, legacy_table[i1].unixy);
-          return;
-        }
-    }
-
-  /* Step 2: Convert using langtag_table and script_table.  */
-  if (strlen (name) == 7 && name[2] == '-')
-    {
-      unsigned int i1, i2;
-      i1 = 0;
-      i2 = sizeof (langtag_table) / sizeof (langtag_entry);
-      while (i2 - i1 > 1)
-        {
-          /* At this point we know that if name occurs in langtag_table,
-             its index must be >= i1 and < i2.  */
-          unsigned int i = (i1 + i2) >> 1;
-          const langtag_entry *p = &langtag_table[i];
-          if (strcmp (name, p->langtag) < 0)
-            i2 = i;
-          else
-            i1 = i;
-        }
-      if (strcmp (name, langtag_table[i1].langtag) == 0)
-        {
-          strcpy (name, langtag_table[i1].unixy);
-          return;
-        }
-
-      i1 = 0;
-      i2 = sizeof (script_table) / sizeof (script_entry);
-      while (i2 - i1 > 1)
-        {
-          /* At this point we know that if (name + 3) occurs in script_table,
-             its index must be >= i1 and < i2.  */
-          unsigned int i = (i1 + i2) >> 1;
-          const script_entry *p = &script_table[i];
-          if (strcmp (name + 3, p->script) < 0)
-            i2 = i;
-          else
-            i1 = i;
-        }
-      if (strcmp (name + 3, script_table[i1].script) == 0)
-        {
-          name[2] = '@';
-          strcpy (name + 3, script_table[i1].unixy);
-          return;
-        }
-    }
-
-  /* Step 3: Convert new-style dash to Unix underscore. */
-  {
-    char *p;
-    for (p = name; *p != '\0'; p++)
-      if (*p == '-')
-        *p = '_';
-  }
-}
-
-#endif
-
-
-#if defined WIN32_NATIVE || defined __CYGWIN__ /* WIN32 or Cygwin */
-
-/* Canonicalize a Win32 native locale name to a Unix locale name.
-   NAME is a sufficiently large buffer.
-   On input, it contains the Win32 locale name.
-   On output, it contains the Unix locale name.  */
-# if !defined IN_LIBINTL
-static
-# endif
-void
-gl_locale_name_canonicalize (char *name)
-{
-  /* FIXME: This is probably incomplete: it does not handle "zh-Hans" and
-     "zh-Hant".  */
-  char *p;
-
-  for (p = name; *p != '\0'; p++)
-    if (*p == '-')
-      {
-        *p = '_';
-        p++;
-        for (; *p != '\0'; p++)
-          {
-            if (*p >= 'a' && *p <= 'z')
-              *p += 'A' - 'a';
-            if (*p == '-')
-              {
-                *p = '\0';
-                return;
-              }
-          }
-        return;
-      }
-}
-
-# if !defined IN_LIBINTL
-static
-# endif
-const char *
-gl_locale_name_from_win32_LANGID (LANGID langid)
-{
-  /* Activate the new code only when the GETTEXT_MUI environment variable is
-     set, for the time being, since the new code is not well tested.  */
-  if (getenv ("GETTEXT_MUI") != NULL)
-    {
-      static char namebuf[256];
-
-      /* Query the system's notion of locale name.
-         On Windows95/98/ME, GetLocaleInfoA returns some incorrect results.
-         But we don't need to support systems that are so old.  */
-      if (GetLocaleInfoA (MAKELCID (langid, SORT_DEFAULT), LOCALE_SNAME,
-                          namebuf, sizeof (namebuf) - 1))
-        {
-          /* Convert it to a Unix locale name.  */
-          gl_locale_name_canonicalize (namebuf);
-          return namebuf;
-        }
-    }
-  /* Internet Explorer has an LCID to RFC3066 name mapping stored in
-     HKEY_CLASSES_ROOT\Mime\Database\Rfc1766.  But we better don't use that
-     since IE's i18n subsystem is known to be inconsistent with the Win32 base
-     (e.g. they have different character conversion facilities that produce
-     different results).  */
-  /* Use our own table.  */
-  {
-    int primary, sub;
-
-    /* Split into language and territory part.  */
-    primary = PRIMARYLANGID (langid);
-    sub = SUBLANGID (langid);
-
-    /* Dispatch on language.
-       See also http://www.unicode.org/unicode/onlinedat/languages.html .
-       For details about languages, see http://www.ethnologue.com/ .  */
-    switch (primary)
-      {
-      case LANG_AFRIKAANS:
-        switch (sub)
-          {
-          case SUBLANG_AFRIKAANS_SOUTH_AFRICA: return "af_ZA";
-          }
-        return "af";
-      case LANG_ALBANIAN:
-        switch (sub)
-          {
-          case SUBLANG_ALBANIAN_ALBANIA: return "sq_AL";
-          }
-        return "sq";
-      case LANG_ALSATIAN:
-        switch (sub)
-          {
-          case SUBLANG_ALSATIAN_FRANCE: return "gsw_FR";
-          }
-        return "gsw";
-      case LANG_AMHARIC:
-        switch (sub)
-          {
-          case SUBLANG_AMHARIC_ETHIOPIA: return "am_ET";
-          }
-        return "am";
-      case LANG_ARABIC:
-        switch (sub)
-          {
-          case SUBLANG_ARABIC_SAUDI_ARABIA: return "ar_SA";
-          case SUBLANG_ARABIC_IRAQ: return "ar_IQ";
-          case SUBLANG_ARABIC_EGYPT: return "ar_EG";
-          case SUBLANG_ARABIC_LIBYA: return "ar_LY";
-          case SUBLANG_ARABIC_ALGERIA: return "ar_DZ";
-          case SUBLANG_ARABIC_MOROCCO: return "ar_MA";
-          case SUBLANG_ARABIC_TUNISIA: return "ar_TN";
-          case SUBLANG_ARABIC_OMAN: return "ar_OM";
-          case SUBLANG_ARABIC_YEMEN: return "ar_YE";
-          case SUBLANG_ARABIC_SYRIA: return "ar_SY";
-          case SUBLANG_ARABIC_JORDAN: return "ar_JO";
-          case SUBLANG_ARABIC_LEBANON: return "ar_LB";
-          case SUBLANG_ARABIC_KUWAIT: return "ar_KW";
-          case SUBLANG_ARABIC_UAE: return "ar_AE";
-          case SUBLANG_ARABIC_BAHRAIN: return "ar_BH";
-          case SUBLANG_ARABIC_QATAR: return "ar_QA";
-          }
-        return "ar";
-      case LANG_ARMENIAN:
-        switch (sub)
-          {
-          case SUBLANG_ARMENIAN_ARMENIA: return "hy_AM";
-          }
-        return "hy";
-      case LANG_ASSAMESE:
-        switch (sub)
-          {
-          case SUBLANG_ASSAMESE_INDIA: return "as_IN";
-          }
-        return "as";
-      case LANG_AZERI:
-        switch (sub)
-          {
-          /* FIXME: Adjust this when Azerbaijani locales appear on Unix.  */
-          case 0x1e: return "az@latin";
-          case SUBLANG_AZERI_LATIN: return "az_AZ@latin";
-          case 0x1d: return "az@cyrillic";
-          case SUBLANG_AZERI_CYRILLIC: return "az_AZ@cyrillic";
-          }
-        return "az";
-      case LANG_BASHKIR:
-        switch (sub)
-          {
-          case SUBLANG_BASHKIR_RUSSIA: return "ba_RU";
-          }
-        return "ba";
-      case LANG_BASQUE:
-        switch (sub)
-          {
-          case SUBLANG_BASQUE_BASQUE: return "eu_ES";
-          }
-        return "eu"; /* Ambiguous: could be "eu_ES" or "eu_FR".  */
-      case LANG_BELARUSIAN:
-        switch (sub)
-          {
-          case SUBLANG_BELARUSIAN_BELARUS: return "be_BY";
-          }
-        return "be";
-      case LANG_BENGALI:
-        switch (sub)
-          {
-          case SUBLANG_BENGALI_INDIA: return "bn_IN";
-          case SUBLANG_BENGALI_BANGLADESH: return "bn_BD";
-          }
-        return "bn";
-      case LANG_BRETON:
-        switch (sub)
-          {
-          case SUBLANG_BRETON_FRANCE: return "br_FR";
-          }
-        return "br";
-      case LANG_BULGARIAN:
-        switch (sub)
-          {
-          case SUBLANG_BULGARIAN_BULGARIA: return "bg_BG";
-          }
-        return "bg";
-      case LANG_BURMESE:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "my_MM";
-          }
-        return "my";
-      case LANG_CAMBODIAN:
-        switch (sub)
-          {
-          case SUBLANG_CAMBODIAN_CAMBODIA: return "km_KH";
-          }
-        return "km";
-      case LANG_CATALAN:
-        switch (sub)
-          {
-          case SUBLANG_CATALAN_SPAIN: return "ca_ES";
-          }
-        return "ca";
-      case LANG_CHEROKEE:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "chr_US";
-          }
-        return "chr";
-      case LANG_CHINESE:
-        switch (sub)
-          {
-          case SUBLANG_CHINESE_TRADITIONAL: case 0x1f: return "zh_TW";
-          case SUBLANG_CHINESE_SIMPLIFIED: case 0x00: return "zh_CN";
-          case SUBLANG_CHINESE_HONGKONG: return "zh_HK"; /* traditional */
-          case SUBLANG_CHINESE_SINGAPORE: return "zh_SG"; /* simplified */
-          case SUBLANG_CHINESE_MACAU: return "zh_MO"; /* traditional */
-          }
-        return "zh";
-      case LANG_CORSICAN:
-        switch (sub)
-          {
-          case SUBLANG_CORSICAN_FRANCE: return "co_FR";
-          }
-        return "co";
-      case LANG_CROATIAN:      /* LANG_CROATIAN == LANG_SERBIAN == LANG_BOSNIAN
-                                * What used to be called Serbo-Croatian
-                                * should really now be two separate
-                                * languages because of political reasons.
-                                * (Says tml, who knows nothing about Serbian
-                                * or Croatian.)
-                                * (I can feel those flames coming already.)
-                                */
-        switch (sub)
-          {
-          /* Croatian */
-          case 0x00: return "hr";
-          case SUBLANG_CROATIAN_CROATIA: return "hr_HR";
-          case SUBLANG_CROATIAN_BOSNIA_HERZEGOVINA_LATIN: return "hr_BA";
-          /* Serbian */
-          case 0x1f: return "sr";
-          case 0x1c: return "sr"; /* latin */
-          case SUBLANG_SERBIAN_LATIN: return "sr_CS"; /* latin */
-          case 0x09: return "sr_RS"; /* latin */
-          case 0x0b: return "sr_ME"; /* latin */
-          case 0x06: return "sr_BA"; /* latin */
-          case 0x1b: return "sr@cyrillic";
-          case SUBLANG_SERBIAN_CYRILLIC: return "sr_CS@cyrillic";
-          case 0x0a: return "sr_RS@cyrillic";
-          case 0x0c: return "sr_ME@cyrillic";
-          case 0x07: return "sr_BA@cyrillic";
-          /* Bosnian */
-          case 0x1e: return "bs";
-          case 0x1a: return "bs"; /* latin */
-          case SUBLANG_BOSNIAN_BOSNIA_HERZEGOVINA_LATIN: return "bs_BA"; /* latin */
-          case 0x19: return "bs@cyrillic";
-          case SUBLANG_BOSNIAN_BOSNIA_HERZEGOVINA_CYRILLIC: return "bs_BA@cyrillic";
-          }
-        return "hr";
-      case LANG_CZECH:
-        switch (sub)
-          {
-          case SUBLANG_CZECH_CZECH_REPUBLIC: return "cs_CZ";
-          }
-        return "cs";
-      case LANG_DANISH:
-        switch (sub)
-          {
-          case SUBLANG_DANISH_DENMARK: return "da_DK";
-          }
-        return "da";
-      case LANG_DARI:
-        /* FIXME: Adjust this when such locales appear on Unix.  */
-        switch (sub)
-          {
-          case SUBLANG_DARI_AFGHANISTAN: return "prs_AF";
-          }
-        return "prs";
-      case LANG_DIVEHI:
-        switch (sub)
-          {
-          case SUBLANG_DIVEHI_MALDIVES: return "dv_MV";
-          }
-        return "dv";
-      case LANG_DUTCH:
-        switch (sub)
-          {
-          case SUBLANG_DUTCH: return "nl_NL";
-          case SUBLANG_DUTCH_BELGIAN: /* FLEMISH, VLAAMS */ return "nl_BE";
-          case SUBLANG_DUTCH_SURINAM: return "nl_SR";
-          }
-        return "nl";
-      case LANG_EDO:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "bin_NG";
-          }
-        return "bin";
-      case LANG_ENGLISH:
-        switch (sub)
-          {
-          /* SUBLANG_ENGLISH_US == SUBLANG_DEFAULT. Heh. I thought
-           * English was the language spoken in England.
-           * Oh well.
-           */
-          case SUBLANG_ENGLISH_US: return "en_US";
-          case SUBLANG_ENGLISH_UK: return "en_GB";
-          case SUBLANG_ENGLISH_AUS: return "en_AU";
-          case SUBLANG_ENGLISH_CAN: return "en_CA";
-          case SUBLANG_ENGLISH_NZ: return "en_NZ";
-          case SUBLANG_ENGLISH_EIRE: return "en_IE";
-          case SUBLANG_ENGLISH_SOUTH_AFRICA: return "en_ZA";
-          case SUBLANG_ENGLISH_JAMAICA: return "en_JM";
-          case SUBLANG_ENGLISH_CARIBBEAN: return "en_GD"; /* Grenada? */
-          case SUBLANG_ENGLISH_BELIZE: return "en_BZ";
-          case SUBLANG_ENGLISH_TRINIDAD: return "en_TT";
-          case SUBLANG_ENGLISH_ZIMBABWE: return "en_ZW";
-          case SUBLANG_ENGLISH_PHILIPPINES: return "en_PH";
-          case SUBLANG_ENGLISH_INDONESIA: return "en_ID";
-          case SUBLANG_ENGLISH_HONGKONG: return "en_HK";
-          case SUBLANG_ENGLISH_INDIA: return "en_IN";
-          case SUBLANG_ENGLISH_MALAYSIA: return "en_MY";
-          case SUBLANG_ENGLISH_SINGAPORE: return "en_SG";
-          }
-        return "en";
-      case LANG_ESTONIAN:
-        switch (sub)
-          {
-          case SUBLANG_ESTONIAN_ESTONIA: return "et_EE";
-          }
-        return "et";
-      case LANG_FAEROESE:
-        switch (sub)
-          {
-          case SUBLANG_FAEROESE_FAROE_ISLANDS: return "fo_FO";
-          }
-        return "fo";
-      case LANG_FARSI:
-        switch (sub)
-          {
-          case SUBLANG_FARSI_IRAN: return "fa_IR";
-          }
-        return "fa";
-      case LANG_FINNISH:
-        switch (sub)
-          {
-          case SUBLANG_FINNISH_FINLAND: return "fi_FI";
-          }
-        return "fi";
-      case LANG_FRENCH:
-        switch (sub)
-          {
-          case SUBLANG_FRENCH: return "fr_FR";
-          case SUBLANG_FRENCH_BELGIAN: /* WALLOON */ return "fr_BE";
-          case SUBLANG_FRENCH_CANADIAN: return "fr_CA";
-          case SUBLANG_FRENCH_SWISS: return "fr_CH";
-          case SUBLANG_FRENCH_LUXEMBOURG: return "fr_LU";
-          case SUBLANG_FRENCH_MONACO: return "fr_MC";
-          case SUBLANG_FRENCH_WESTINDIES: return "fr"; /* Caribbean? */
-          case SUBLANG_FRENCH_REUNION: return "fr_RE";
-          case SUBLANG_FRENCH_CONGO: return "fr_CG";
-          case SUBLANG_FRENCH_SENEGAL: return "fr_SN";
-          case SUBLANG_FRENCH_CAMEROON: return "fr_CM";
-          case SUBLANG_FRENCH_COTEDIVOIRE: return "fr_CI";
-          case SUBLANG_FRENCH_MALI: return "fr_ML";
-          case SUBLANG_FRENCH_MOROCCO: return "fr_MA";
-          case SUBLANG_FRENCH_HAITI: return "fr_HT";
-          }
-        return "fr";
-      case LANG_FRISIAN:
-        switch (sub)
-          {
-          case SUBLANG_FRISIAN_NETHERLANDS: return "fy_NL";
-          }
-        return "fy";
-      case LANG_FULFULDE:
-        /* Spoken in Nigeria, Guinea, Senegal, Mali, Niger, Cameroon, Benin.  */
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "ff_NG";
-          }
-        return "ff";
-      case LANG_GAELIC:
-        switch (sub)
-          {
-          case 0x01: /* SCOTTISH */
-            /* old, superseded by LANG_SCOTTISH_GAELIC */
-            return "gd_GB";
-          case SUBLANG_IRISH_IRELAND: return "ga_IE";
-          }
-        return "ga";
-      case LANG_GALICIAN:
-        switch (sub)
-          {
-          case SUBLANG_GALICIAN_SPAIN: return "gl_ES";
-          }
-        return "gl";
-      case LANG_GEORGIAN:
-        switch (sub)
-          {
-          case SUBLANG_GEORGIAN_GEORGIA: return "ka_GE";
-          }
-        return "ka";
-      case LANG_GERMAN:
-        switch (sub)
-          {
-          case SUBLANG_GERMAN: return "de_DE";
-          case SUBLANG_GERMAN_SWISS: return "de_CH";
-          case SUBLANG_GERMAN_AUSTRIAN: return "de_AT";
-          case SUBLANG_GERMAN_LUXEMBOURG: return "de_LU";
-          case SUBLANG_GERMAN_LIECHTENSTEIN: return "de_LI";
-          }
-        return "de";
-      case LANG_GREEK:
-        switch (sub)
-          {
-          case SUBLANG_GREEK_GREECE: return "el_GR";
-          }
-        return "el";
-      case LANG_GREENLANDIC:
-        switch (sub)
-          {
-          case SUBLANG_GREENLANDIC_GREENLAND: return "kl_GL";
-          }
-        return "kl";
-      case LANG_GUARANI:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "gn_PY";
-          }
-        return "gn";
-      case LANG_GUJARATI:
-        switch (sub)
-          {
-          case SUBLANG_GUJARATI_INDIA: return "gu_IN";
-          }
-        return "gu";
-      case LANG_HAUSA:
-        switch (sub)
-          {
-          case 0x1f: return "ha";
-          case SUBLANG_HAUSA_NIGERIA_LATIN: return "ha_NG";
-          }
-        return "ha";
-      case LANG_HAWAIIAN:
-        /* FIXME: Do they mean Hawaiian ("haw_US", 1000 speakers)
-           or Hawaii Creole English ("cpe_US", 600000 speakers)?  */
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "cpe_US";
-          }
-        return "cpe";
-      case LANG_HEBREW:
-        switch (sub)
-          {
-          case SUBLANG_HEBREW_ISRAEL: return "he_IL";
-          }
-        return "he";
-      case LANG_HINDI:
-        switch (sub)
-          {
-          case SUBLANG_HINDI_INDIA: return "hi_IN";
-          }
-        return "hi";
-      case LANG_HUNGARIAN:
-        switch (sub)
-          {
-          case SUBLANG_HUNGARIAN_HUNGARY: return "hu_HU";
-          }
-        return "hu";
-      case LANG_IBIBIO:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "nic_NG";
-          }
-        return "nic";
-      case LANG_ICELANDIC:
-        switch (sub)
-          {
-          case SUBLANG_ICELANDIC_ICELAND: return "is_IS";
-          }
-        return "is";
-      case LANG_IGBO:
-        switch (sub)
-          {
-          case SUBLANG_IGBO_NIGERIA: return "ig_NG";
-          }
-        return "ig";
-      case LANG_INDONESIAN:
-        switch (sub)
-          {
-          case SUBLANG_INDONESIAN_INDONESIA: return "id_ID";
-          }
-        return "id";
-      case LANG_INUKTITUT:
-        switch (sub)
-          {
-          case 0x1e: return "iu"; /* syllabic */
-          case SUBLANG_INUKTITUT_CANADA: return "iu_CA"; /* syllabic */
-          case 0x1f: return "iu@latin";
-          case SUBLANG_INUKTITUT_CANADA_LATIN: return "iu_CA@latin";
-          }
-        return "iu";
-      case LANG_ITALIAN:
-        switch (sub)
-          {
-          case SUBLANG_ITALIAN: return "it_IT";
-          case SUBLANG_ITALIAN_SWISS: return "it_CH";
-          }
-        return "it";
-      case LANG_JAPANESE:
-        switch (sub)
-          {
-          case SUBLANG_JAPANESE_JAPAN: return "ja_JP";
-          }
-        return "ja";
-      case LANG_KANNADA:
-        switch (sub)
-          {
-          case SUBLANG_KANNADA_INDIA: return "kn_IN";
-          }
-        return "kn";
-      case LANG_KANURI:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "kr_NG";
-          }
-        return "kr";
-      case LANG_KASHMIRI:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "ks_PK";
-          case SUBLANG_KASHMIRI_INDIA: return "ks_IN";
-          }
-        return "ks";
-      case LANG_KAZAK:
-        switch (sub)
-          {
-          case SUBLANG_KAZAK_KAZAKHSTAN: return "kk_KZ";
-          }
-        return "kk";
-      case LANG_KICHE:
-        /* FIXME: Adjust this when such locales appear on Unix.  */
-        switch (sub)
-          {
-          case SUBLANG_KICHE_GUATEMALA: return "qut_GT";
-          }
-        return "qut";
-      case LANG_KINYARWANDA:
-        switch (sub)
-          {
-          case SUBLANG_KINYARWANDA_RWANDA: return "rw_RW";
-          }
-        return "rw";
-      case LANG_KONKANI:
-        /* FIXME: Adjust this when such locales appear on Unix.  */
-        switch (sub)
-          {
-          case SUBLANG_KONKANI_INDIA: return "kok_IN";
-          }
-        return "kok";
-      case LANG_KOREAN:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "ko_KR";
-          }
-        return "ko";
-      case LANG_KYRGYZ:
-        switch (sub)
-          {
-          case SUBLANG_KYRGYZ_KYRGYZSTAN: return "ky_KG";
-          }
-        return "ky";
-      case LANG_LAO:
-        switch (sub)
-          {
-          case SUBLANG_LAO_LAOS: return "lo_LA";
-          }
-        return "lo";
-      case LANG_LATIN:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "la_VA";
-          }
-        return "la";
-      case LANG_LATVIAN:
-        switch (sub)
-          {
-          case SUBLANG_LATVIAN_LATVIA: return "lv_LV";
-          }
-        return "lv";
-      case LANG_LITHUANIAN:
-        switch (sub)
-          {
-          case SUBLANG_LITHUANIAN_LITHUANIA: return "lt_LT";
-          }
-        return "lt";
-      case LANG_LUXEMBOURGISH:
-        switch (sub)
-          {
-          case SUBLANG_LUXEMBOURGISH_LUXEMBOURG: return "lb_LU";
-          }
-        return "lb";
-      case LANG_MACEDONIAN:
-        switch (sub)
-          {
-          case SUBLANG_MACEDONIAN_MACEDONIA: return "mk_MK";
-          }
-        return "mk";
-      case LANG_MALAY:
-        switch (sub)
-          {
-          case SUBLANG_MALAY_MALAYSIA: return "ms_MY";
-          case SUBLANG_MALAY_BRUNEI_DARUSSALAM: return "ms_BN";
-          }
-        return "ms";
-      case LANG_MALAYALAM:
-        switch (sub)
-          {
-          case SUBLANG_MALAYALAM_INDIA: return "ml_IN";
-          }
-        return "ml";
-      case LANG_MALTESE:
-        switch (sub)
-          {
-          case SUBLANG_MALTESE_MALTA: return "mt_MT";
-          }
-        return "mt";
-      case LANG_MANIPURI:
-        /* FIXME: Adjust this when such locales appear on Unix.  */
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "mni_IN";
-          }
-        return "mni";
-      case LANG_MAORI:
-        switch (sub)
-          {
-          case SUBLANG_MAORI_NEW_ZEALAND: return "mi_NZ";
-          }
-        return "mi";
-      case LANG_MAPUDUNGUN:
-        switch (sub)
-          {
-          case SUBLANG_MAPUDUNGUN_CHILE: return "arn_CL";
-          }
-        return "arn";
-      case LANG_MARATHI:
-        switch (sub)
-          {
-          case SUBLANG_MARATHI_INDIA: return "mr_IN";
-          }
-        return "mr";
-      case LANG_MOHAWK:
-        switch (sub)
-          {
-          case SUBLANG_MOHAWK_CANADA: return "moh_CA";
-          }
-        return "moh";
-      case LANG_MONGOLIAN:
-        switch (sub)
-          {
-          case SUBLANG_MONGOLIAN_CYRILLIC_MONGOLIA: case 0x1e: return "mn_MN";
-          case SUBLANG_MONGOLIAN_PRC: case 0x1f: return "mn_CN";
-          }
-        return "mn"; /* Ambiguous: could be "mn_CN" or "mn_MN".  */
-      case LANG_NEPALI:
-        switch (sub)
-          {
-          case SUBLANG_NEPALI_NEPAL: return "ne_NP";
-          case SUBLANG_NEPALI_INDIA: return "ne_IN";
-          }
-        return "ne";
-      case LANG_NORWEGIAN:
-        switch (sub)
-          {
-          case 0x1f: return "nb";
-          case SUBLANG_NORWEGIAN_BOKMAL: return "nb_NO";
-          case 0x1e: return "nn";
-          case SUBLANG_NORWEGIAN_NYNORSK: return "nn_NO";
-          }
-        return "no";
-      case LANG_OCCITAN:
-        switch (sub)
-          {
-          case SUBLANG_OCCITAN_FRANCE: return "oc_FR";
-          }
-        return "oc";
-      case LANG_ORIYA:
-        switch (sub)
-          {
-          case SUBLANG_ORIYA_INDIA: return "or_IN";
-          }
-        return "or";
-      case LANG_OROMO:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "om_ET";
-          }
-        return "om";
-      case LANG_PAPIAMENTU:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "pap_AN";
-          }
-        return "pap";
-      case LANG_PASHTO:
-        switch (sub)
-          {
-          case SUBLANG_PASHTO_AFGHANISTAN: return "ps_AF";
-          }
-        return "ps"; /* Ambiguous: could be "ps_PK" or "ps_AF".  */
-      case LANG_POLISH:
-        switch (sub)
-          {
-          case SUBLANG_POLISH_POLAND: return "pl_PL";
-          }
-        return "pl";
-      case LANG_PORTUGUESE:
-        switch (sub)
-          {
-          /* Hmm. SUBLANG_PORTUGUESE_BRAZILIAN == SUBLANG_DEFAULT.
-             Same phenomenon as SUBLANG_ENGLISH_US == SUBLANG_DEFAULT. */
-          case SUBLANG_PORTUGUESE_BRAZILIAN: return "pt_BR";
-          case SUBLANG_PORTUGUESE: return "pt_PT";
-          }
-        return "pt";
-      case LANG_PUNJABI:
-        switch (sub)
-          {
-          case SUBLANG_PUNJABI_INDIA: return "pa_IN"; /* Gurmukhi script */
-          case SUBLANG_PUNJABI_PAKISTAN: return "pa_PK"; /* Arabic script */
-          }
-        return "pa";
-      case LANG_QUECHUA:
-        /* Note: Microsoft uses the non-ISO language code "quz".  */
-        switch (sub)
-          {
-          case SUBLANG_QUECHUA_BOLIVIA: return "qu_BO";
-          case SUBLANG_QUECHUA_ECUADOR: return "qu_EC";
-          case SUBLANG_QUECHUA_PERU: return "qu_PE";
-          }
-        return "qu";
-      case LANG_ROMANIAN:
-        switch (sub)
-          {
-          case SUBLANG_ROMANIAN_ROMANIA: return "ro_RO";
-          case SUBLANG_ROMANIAN_MOLDOVA: return "ro_MD";
-          }
-        return "ro";
-      case LANG_ROMANSH:
-        switch (sub)
-          {
-          case SUBLANG_ROMANSH_SWITZERLAND: return "rm_CH";
-          }
-        return "rm";
-      case LANG_RUSSIAN:
-        switch (sub)
-          {
-          case SUBLANG_RUSSIAN_RUSSIA: return "ru_RU";
-          case SUBLANG_RUSSIAN_MOLDAVIA: return "ru_MD";
-          }
-        return "ru"; /* Ambiguous: could be "ru_RU" or "ru_UA" or "ru_MD".  */
-      case LANG_SAMI:
-        switch (sub)
-          {
-          /* Northern Sami */
-          case 0x00: return "se";
-          case SUBLANG_SAMI_NORTHERN_NORWAY: return "se_NO";
-          case SUBLANG_SAMI_NORTHERN_SWEDEN: return "se_SE";
-          case SUBLANG_SAMI_NORTHERN_FINLAND: return "se_FI";
-          /* Lule Sami */
-          case 0x1f: return "smj";
-          case SUBLANG_SAMI_LULE_NORWAY: return "smj_NO";
-          case SUBLANG_SAMI_LULE_SWEDEN: return "smj_SE";
-          /* Southern Sami */
-          case 0x1e: return "sma";
-          case SUBLANG_SAMI_SOUTHERN_NORWAY: return "sma_NO";
-          case SUBLANG_SAMI_SOUTHERN_SWEDEN: return "sma_SE";
-          /* Skolt Sami */
-          case 0x1d: return "sms";
-          case SUBLANG_SAMI_SKOLT_FINLAND: return "sms_FI";
-          /* Inari Sami */
-          case 0x1c: return "smn";
-          case SUBLANG_SAMI_INARI_FINLAND: return "smn_FI";
-          }
-        return "se"; /* or "smi"? */
-      case LANG_SANSKRIT:
-        switch (sub)
-          {
-          case SUBLANG_SANSKRIT_INDIA: return "sa_IN";
-          }
-        return "sa";
-      case LANG_SCOTTISH_GAELIC:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "gd_GB";
-          }
-        return "gd";
-      case LANG_SINDHI:
-        switch (sub)
-          {
-          case SUBLANG_SINDHI_INDIA: return "sd_IN";
-          case SUBLANG_SINDHI_PAKISTAN: return "sd_PK";
-          /*case SUBLANG_SINDHI_AFGHANISTAN: return "sd_AF";*/
-          }
-        return "sd";
-      case LANG_SINHALESE:
-        switch (sub)
-          {
-          case SUBLANG_SINHALESE_SRI_LANKA: return "si_LK";
-          }
-        return "si";
-      case LANG_SLOVAK:
-        switch (sub)
-          {
-          case SUBLANG_SLOVAK_SLOVAKIA: return "sk_SK";
-          }
-        return "sk";
-      case LANG_SLOVENIAN:
-        switch (sub)
-          {
-          case SUBLANG_SLOVENIAN_SLOVENIA: return "sl_SI";
-          }
-        return "sl";
-      case LANG_SOMALI:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "so_SO";
-          }
-        return "so";
-      case LANG_SORBIAN:
-        /* FIXME: Adjust this when such locales appear on Unix.  */
-        switch (sub)
-          {
-          /* Upper Sorbian */
-          case 0x00: return "hsb";
-          case SUBLANG_UPPER_SORBIAN_GERMANY: return "hsb_DE";
-          /* Lower Sorbian */
-          case 0x1f: return "dsb";
-          case SUBLANG_LOWER_SORBIAN_GERMANY: return "dsb_DE";
-          }
-        return "wen";
-      case LANG_SOTHO:
-        /* <http://www.microsoft.com/globaldev/reference/lcid-all.mspx> calls
-           it "Sepedi"; according to
-           <http://www.ethnologue.com/show_language.asp?code=nso>
-           <http://www.ethnologue.com/show_language.asp?code=sot>
-           it's the same as Northern Sotho.  */
-        switch (sub)
-          {
-          case SUBLANG_SOTHO_SOUTH_AFRICA: return "nso_ZA";
-          }
-        return "nso";
-      case LANG_SPANISH:
-        switch (sub)
-          {
-          case SUBLANG_SPANISH: return "es_ES";
-          case SUBLANG_SPANISH_MEXICAN: return "es_MX";
-          case SUBLANG_SPANISH_MODERN:
-            return "es_ES@modern";      /* not seen on Unix */
-          case SUBLANG_SPANISH_GUATEMALA: return "es_GT";
-          case SUBLANG_SPANISH_COSTA_RICA: return "es_CR";
-          case SUBLANG_SPANISH_PANAMA: return "es_PA";
-          case SUBLANG_SPANISH_DOMINICAN_REPUBLIC: return "es_DO";
-          case SUBLANG_SPANISH_VENEZUELA: return "es_VE";
-          case SUBLANG_SPANISH_COLOMBIA: return "es_CO";
-          case SUBLANG_SPANISH_PERU: return "es_PE";
-          case SUBLANG_SPANISH_ARGENTINA: return "es_AR";
-          case SUBLANG_SPANISH_ECUADOR: return "es_EC";
-          case SUBLANG_SPANISH_CHILE: return "es_CL";
-          case SUBLANG_SPANISH_URUGUAY: return "es_UY";
-          case SUBLANG_SPANISH_PARAGUAY: return "es_PY";
-          case SUBLANG_SPANISH_BOLIVIA: return "es_BO";
-          case SUBLANG_SPANISH_EL_SALVADOR: return "es_SV";
-          case SUBLANG_SPANISH_HONDURAS: return "es_HN";
-          case SUBLANG_SPANISH_NICARAGUA: return "es_NI";
-          case SUBLANG_SPANISH_PUERTO_RICO: return "es_PR";
-          case SUBLANG_SPANISH_US: return "es_US";
-          }
-        return "es";
-      case LANG_SUTU:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "bnt_TZ"; /* or "st_LS" or "nso_ZA"? */
-          }
-        return "bnt";
-      case LANG_SWAHILI:
-        switch (sub)
-          {
-          case SUBLANG_SWAHILI_KENYA: return "sw_KE";
-          }
-        return "sw";
-      case LANG_SWEDISH:
-        switch (sub)
-          {
-          case SUBLANG_SWEDISH_SWEDEN: return "sv_SE";
-          case SUBLANG_SWEDISH_FINLAND: return "sv_FI";
-          }
-        return "sv";
-      case LANG_SYRIAC:
-        switch (sub)
-          {
-          case SUBLANG_SYRIAC_SYRIA: return "syr_SY"; /* An extinct language.  */
-          }
-        return "syr";
-      case LANG_TAGALOG:
-        switch (sub)
-          {
-          case SUBLANG_TAGALOG_PHILIPPINES: return "tl_PH"; /* or "fil_PH"? */
-          }
-        return "tl"; /* or "fil"? */
-      case LANG_TAJIK:
-        switch (sub)
-          {
-          case 0x1f: return "tg";
-          case SUBLANG_TAJIK_TAJIKISTAN: return "tg_TJ";
-          }
-        return "tg";
-      case LANG_TAMAZIGHT:
-        /* Note: Microsoft uses the non-ISO language code "tmz".  */
-        switch (sub)
-          {
-          /* FIXME: Adjust this when Tamazight locales appear on Unix.  */
-          case SUBLANG_TAMAZIGHT_ARABIC: return "ber_MA@arabic";
-          case 0x1f: return "ber@latin";
-          case SUBLANG_TAMAZIGHT_ALGERIA_LATIN: return "ber_DZ@latin";
-          }
-        return "ber";
-      case LANG_TAMIL:
-        switch (sub)
-          {
-          case SUBLANG_TAMIL_INDIA: return "ta_IN";
-          }
-        return "ta"; /* Ambiguous: could be "ta_IN" or "ta_LK" or "ta_SG".  */
-      case LANG_TATAR:
-        switch (sub)
-          {
-          case SUBLANG_TATAR_RUSSIA: return "tt_RU";
-          }
-        return "tt";
-      case LANG_TELUGU:
-        switch (sub)
-          {
-          case SUBLANG_TELUGU_INDIA: return "te_IN";
-          }
-        return "te";
-      case LANG_THAI:
-        switch (sub)
-          {
-          case SUBLANG_THAI_THAILAND: return "th_TH";
-          }
-        return "th";
-      case LANG_TIBETAN:
-        switch (sub)
-          {
-          case SUBLANG_TIBETAN_PRC:
-            /* Most Tibetans would not like "bo_CN".  But Tibet does not yet
-               have a country code of its own.  */
-            return "bo";
-          case SUBLANG_TIBETAN_BHUTAN: return "bo_BT";
-          }
-        return "bo";
-      case LANG_TIGRINYA:
-        switch (sub)
-          {
-          case SUBLANG_TIGRINYA_ETHIOPIA: return "ti_ET";
-          case SUBLANG_TIGRINYA_ERITREA: return "ti_ER";
-          }
-        return "ti";
-      case LANG_TSONGA:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "ts_ZA";
-          }
-        return "ts";
-      case LANG_TSWANA:
-        /* Spoken in South Africa, Botswana.  */
-        switch (sub)
-          {
-          case SUBLANG_TSWANA_SOUTH_AFRICA: return "tn_ZA";
-          }
-        return "tn";
-      case LANG_TURKISH:
-        switch (sub)
-          {
-          case SUBLANG_TURKISH_TURKEY: return "tr_TR";
-          }
-        return "tr";
-      case LANG_TURKMEN:
-        switch (sub)
-          {
-          case SUBLANG_TURKMEN_TURKMENISTAN: return "tk_TM";
-          }
-        return "tk";
-      case LANG_UIGHUR:
-        switch (sub)
-          {
-          case SUBLANG_UIGHUR_PRC: return "ug_CN";
-          }
-        return "ug";
-      case LANG_UKRAINIAN:
-        switch (sub)
-          {
-          case SUBLANG_UKRAINIAN_UKRAINE: return "uk_UA";
-          }
-        return "uk";
-      case LANG_URDU:
-        switch (sub)
-          {
-          case SUBLANG_URDU_PAKISTAN: return "ur_PK";
-          case SUBLANG_URDU_INDIA: return "ur_IN";
-          }
-        return "ur";
-      case LANG_UZBEK:
-        switch (sub)
-          {
-          case 0x1f: return "uz";
-          case SUBLANG_UZBEK_LATIN: return "uz_UZ";
-          case 0x1e: return "uz@cyrillic";
-          case SUBLANG_UZBEK_CYRILLIC: return "uz_UZ@cyrillic";
-          }
-        return "uz";
-      case LANG_VENDA:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "ve_ZA";
-          }
-        return "ve";
-      case LANG_VIETNAMESE:
-        switch (sub)
-          {
-          case SUBLANG_VIETNAMESE_VIETNAM: return "vi_VN";
-          }
-        return "vi";
-      case LANG_WELSH:
-        switch (sub)
-          {
-          case SUBLANG_WELSH_UNITED_KINGDOM: return "cy_GB";
-          }
-        return "cy";
-      case LANG_WOLOF:
-        switch (sub)
-          {
-          case SUBLANG_WOLOF_SENEGAL: return "wo_SN";
-          }
-        return "wo";
-      case LANG_XHOSA:
-        switch (sub)
-          {
-          case SUBLANG_XHOSA_SOUTH_AFRICA: return "xh_ZA";
-          }
-        return "xh";
-      case LANG_YAKUT:
-        switch (sub)
-          {
-          case SUBLANG_YAKUT_RUSSIA: return "sah_RU";
-          }
-        return "sah";
-      case LANG_YI:
-        switch (sub)
-          {
-          case SUBLANG_YI_PRC: return "ii_CN";
-          }
-        return "ii";
-      case LANG_YIDDISH:
-        switch (sub)
-          {
-          case SUBLANG_DEFAULT: return "yi_IL";
-          }
-        return "yi";
-      case LANG_YORUBA:
-        switch (sub)
-          {
-          case SUBLANG_YORUBA_NIGERIA: return "yo_NG";
-          }
-        return "yo";
-      case LANG_ZULU:
-        switch (sub)
-          {
-          case SUBLANG_ZULU_SOUTH_AFRICA: return "zu_ZA";
-          }
-        return "zu";
-      default: return "C";
-      }
-  }
-}
-
-# if !defined IN_LIBINTL
-static
-# endif
-const char *
-gl_locale_name_from_win32_LCID (LCID lcid)
-{
-  LANGID langid;
-
-  /* Strip off the sorting rules, keep only the language part.  */
-  langid = LANGIDFROMLCID (lcid);
-
-  return gl_locale_name_from_win32_LANGID (langid);
-}
-
-#endif
-
-
-#if HAVE_USELOCALE /* glibc or MacOS X */
-
-/* Simple hash set of strings.  We don't want to drag in lots of hash table
-   code here.  */
-
-# define SIZE_BITS (sizeof (size_t) * CHAR_BIT)
-
-/* A hash function for NUL-terminated char* strings using
-   the method described by Bruno Haible.
-   See http://www.haible.de/bruno/hashfunc.html.  */
-static size_t
-string_hash (const void *x)
-{
-  const char *s = (const char *) x;
-  size_t h = 0;
-
-  for (; *s; s++)
-    h = *s + ((h << 9) | (h >> (SIZE_BITS - 9)));
-
-  return h;
-}
-
-/* A hash table of fixed size.  Multiple threads can access it read-only
-   simultaneously, but only one thread can insert into it at the same time.  */
-
-/* A node in a hash bucket collision list.  */
-struct hash_node
-  {
-    struct hash_node * volatile next;
-    char contents[100]; /* has variable size */
-  };
-
-# define HASH_TABLE_SIZE 257
-static struct hash_node * volatile struniq_hash_table[HASH_TABLE_SIZE]
-  /* = { NULL, ..., NULL } */;
-
-/* This lock protects the struniq_hash_table against multiple simultaneous
-   insertions.  */
-gl_lock_define_initialized(static, struniq_lock)
-
-/* Store a copy of the given string in a string pool with indefinite extent.
-   Return a pointer to this copy.  */
-static const char *
-struniq (const char *string)
-{
-  size_t hashcode = string_hash (string);
-  size_t slot = hashcode % HASH_TABLE_SIZE;
-  size_t size;
-  struct hash_node *new_node;
-  struct hash_node *p;
-  for (p = struniq_hash_table[slot]; p != NULL; p = p->next)
-    if (strcmp (p->contents, string) == 0)
-      return p->contents;
-  size = strlen (string) + 1;
-  new_node =
-    (struct hash_node *)
-    malloc (offsetof (struct hash_node, contents[0]) + size);
-  if (new_node == NULL)
-    /* Out of memory.  Return a statically allocated string.  */
-    return "C";
-  memcpy (new_node->contents, string, size);
-  /* Lock while inserting new_node.  */
-  gl_lock_lock (struniq_lock);
-  /* Check whether another thread already added the string while we were
-     waiting on the lock.  */
-  for (p = struniq_hash_table[slot]; p != NULL; p = p->next)
-    if (strcmp (p->contents, string) == 0)
-      {
-        free (new_node);
-        new_node = p;
-        goto done;
-      }
-  /* Really insert new_node into the hash table.  Fill new_node entirely first,
-     because other threads may be iterating over the linked list.  */
-  new_node->next = struniq_hash_table[slot];
-  struniq_hash_table[slot] = new_node;
- done:
-  /* Unlock after new_node is inserted.  */
-  gl_lock_unlock (struniq_lock);
-  return new_node->contents;
-}
-
-#endif
-
-
-#if defined IN_LIBINTL || HAVE_USELOCALE
-
-/* Like gl_locale_name_thread, except that the result is not in storage of
-   indefinite extent.  */
-# if !defined IN_LIBINTL
-static
-# endif
-const char *
-gl_locale_name_thread_unsafe (int category, const char *categoryname)
-{
-# if HAVE_USELOCALE
-  {
-    locale_t thread_locale = uselocale (NULL);
-    if (thread_locale != LC_GLOBAL_LOCALE)
-      {
-#  if __GLIBC__ >= 2
-        /* Work around an incorrect definition of the _NL_LOCALE_NAME macro in
-           glibc < 2.12.
-           See <http://sourceware.org/bugzilla/show_bug.cgi?id=10968>.  */
-        const char *name =
-          nl_langinfo (_NL_ITEM ((category), _NL_ITEM_INDEX (-1)));
-        if (name[0] == '\0')
-          /* Fallback code for glibc < 2.4, which did not implement
-             nl_langinfo (_NL_LOCALE_NAME (category)).  */
-          name = thread_locale->__names[category];
-        return name;
-#  endif
-#  if defined __APPLE__ && defined __MACH__ /* MacOS X */
-        /* The locale name is found deep in an undocumented data structure.
-           Since it's stored in a buffer of size 32 and newlocale() rejects
-           locale names of length > 31, we can assume that it is NUL terminated
-           in this buffer. But we need to make a copy of the locale name, of
-           indefinite extent.  */
-        struct _xlocale_part1_v0 /* used in MacOS X 10.5 */
-          {
-            int32_t __refcount;
-            void (*__free_extra)(void *);
-            __darwin_mbstate_t __mbs[10];
-            int64_t __magic;
-          };
-        struct _xlocale_part1_v1 /* used in MacOS X >= 10.6.0 */
-          {
-            int32_t __refcount;
-            void (*__free_extra)(void *);
-            __darwin_mbstate_t __mbs[10];
-            /*pthread_lock_t*/ int __lock;
-            int64_t __magic;
-          };
-        struct _xlocale_part2
-          {
-            int64_t __magic;
-            unsigned char __collate_load_error;
-            unsigned char __collate_substitute_nontrivial;
-            unsigned char _messages_using_locale;
-            unsigned char _monetary_using_locale;
-            unsigned char _numeric_using_locale;
-            unsigned char _time_using_locale;
-            unsigned char __mlocale_changed;
-            unsigned char __nlocale_changed;
-            unsigned char __numeric_fp_cvt;
-            struct __xlocale_st_collate *__lc_collate;
-            struct __xlocale_st_runelocale *__lc_ctype;
-            struct __xlocale_st_messages *__lc_messages;
-            struct __xlocale_st_monetary *__lc_monetary;
-            struct __xlocale_st_numeric *__lc_numeric;
-            struct _xlocale *__lc_numeric_loc;
-            struct __xlocale_st_time *__lc_time;
-            /* more */
-          };
-        struct __xlocale_st_collate
-          {
-            int32_t __refcount;
-            void (*__free_extra)(void *);
-            char __encoding[32];
-            /* more */
-          };
-        struct __xlocale_st_runelocale
-          {
-            int32_t __refcount;
-            void (*__free_extra)(void *);
-            char __ctype_encoding[32];
-            /* more */
-          };
-        struct __xlocale_st_messages
-          {
-            int32_t __refcount;
-            void (*__free_extra)(void *);
-            char *_messages_locale_buf;
-            /* more */
-          };
-        struct __xlocale_st_monetary
-          {
-            int32_t __refcount;
-            void (*__free_extra)(void *);
-            char *_monetary_locale_buf;
-            /* more */
-          };
-        struct __xlocale_st_numeric {
-            int32_t __refcount;
-            void (*__free_extra)(void *);
-            char *_numeric_locale_buf;
-            /* more */
-          };
-        struct __xlocale_st_time {
-            int32_t __refcount;
-            void (*__free_extra)(void *);
-            char *_time_locale_buf;
-            /* more */
-          };
-        struct _xlocale_part2 *tlp;
-        if (((struct _xlocale_part1_v0 *) thread_locale)->__magic
-            == 0x786C6F63616C6530LL)
-          /* MacOS X 10.5 */
-          tlp =
-            (struct _xlocale_part2 *)
-            &((struct _xlocale_part1_v0 *) thread_locale)->__magic;
-        else if (((struct _xlocale_part1_v1 *) thread_locale)->__magic
-                 == 0x786C6F63616C6530LL)
-          /* MacOS X >= 10.6.0 */
-          tlp =
-            (struct _xlocale_part2 *)
-            &((struct _xlocale_part1_v1 *) thread_locale)->__magic;
-        else
-          /* Unsupported version of MacOS X: The internals of 'struct _xlocale'
-             have changed again.  */
-          return "";
-        switch (category)
-          {
-          case LC_CTYPE:
-            return tlp->__lc_ctype->__ctype_encoding;
-          case LC_NUMERIC:
-            return tlp->_numeric_using_locale
-                   ? tlp->__lc_numeric->_numeric_locale_buf
-                   : "C";
-          case LC_TIME:
-            return tlp->_time_using_locale
-                   ? tlp->__lc_time->_time_locale_buf
-                   : "C";
-          case LC_COLLATE:
-            return !tlp->__collate_load_error
-                   ? tlp->__lc_collate->__encoding
-                   : "C";
-          case LC_MONETARY:
-            return tlp->_monetary_using_locale
-                   ? tlp->__lc_monetary->_monetary_locale_buf
-                   : "C";
-          case LC_MESSAGES:
-            return tlp->_messages_using_locale
-                   ? tlp->__lc_messages->_messages_locale_buf
-                   : "C";
-          default: /* We shouldn't get here.  */
-            return "";
-          }
-#  endif
-      }
-  }
-# endif
-  return NULL;
-}
-
-#endif
-
-const char *
-gl_locale_name_thread (int category, const char *categoryname)
-{
-#if HAVE_USELOCALE
-  const char *name = gl_locale_name_thread_unsafe (category, categoryname);
-  if (name != NULL)
-    return struniq (name);
-#endif
-  return NULL;
-}
-
-/* XPG3 defines the result of 'setlocale (category, NULL)' as:
-   "Directs 'setlocale()' to query 'category' and return the current
-    setting of 'local'."
-   However it does not specify the exact format.  Neither do SUSV2 and
-   ISO C 99.  So we can use this feature only on selected systems (e.g.
-   those using GNU C Library).  */
-#if defined _LIBC || (defined __GLIBC__ && __GLIBC__ >= 2)
-# define HAVE_LOCALE_NULL
-#endif
-
-const char *
-gl_locale_name_posix (int category, const char *categoryname)
-{
-  /* Use the POSIX methods of looking to 'LC_ALL', 'LC_xxx', and 'LANG'.
-     On some systems this can be done by the 'setlocale' function itself.  */
-#if defined HAVE_SETLOCALE && defined HAVE_LC_MESSAGES && defined HAVE_LOCALE_NULL
-  return setlocale (category, NULL);
-#else
-  /* On other systems we ignore what setlocale reports and instead look at the
-     environment variables directly.  This is necessary
-       1. on systems which have a facility for customizing the default locale
-          (MacOS X, native Windows, Cygwin) and where the system's setlocale()
-          function ignores this default locale (MacOS X, Cygwin), in two cases:
-          a. when the user missed to use the setlocale() override from libintl
-             (for example by not including <libintl.h>),
-          b. when setlocale supports only the "C" locale, such as on Cygwin
-             1.5.x.  In this case even the override from libintl cannot help.
-       2. on all systems where setlocale supports only the "C" locale.  */
-  /* Strictly speaking, it is a POSIX violation to look at the environment
-     variables regardless whether setlocale has been called or not.  POSIX
-     says:
-         "For C-language programs, the POSIX locale shall be the
-          default locale when the setlocale() function is not called."
-     But we assume that all programs that use internationalized APIs call
-     setlocale (LC_ALL, "").  */
-  return gl_locale_name_environ (category, categoryname);
-#endif
-}
-
-const char *
-gl_locale_name_environ (int category, const char *categoryname)
-{
-  const char *retval;
-
-  /* Setting of LC_ALL overrides all other.  */
-  retval = getenv ("LC_ALL");
-  if (retval != NULL && retval[0] != '\0')
-    return retval;
-  /* Next comes the name of the desired category.  */
-  retval = getenv (categoryname);
-  if (retval != NULL && retval[0] != '\0')
-    return retval;
-  /* Last possibility is the LANG environment variable.  */
-  retval = getenv ("LANG");
-  if (retval != NULL && retval[0] != '\0')
-    {
-#if HAVE_CFLOCALECOPYCURRENT || HAVE_CFPREFERENCESCOPYAPPVALUE
-      /* MacOS X 10.2 or newer.
-         Ignore invalid LANG value set by the Terminal application.  */
-      if (strcmp (retval, "UTF-8") != 0)
-#endif
-#if defined __CYGWIN__
-      /* Cygwin.
-         Ignore dummy LANG value set by ~/.profile.  */
-      if (strcmp (retval, "C.UTF-8") != 0)
-#endif
-        return retval;
-    }
-
-  return NULL;
-}
-
-const char *
-gl_locale_name_default (void)
-{
-  /* POSIX:2001 says:
-     "All implementations shall define a locale as the default locale, to be
-      invoked when no environment variables are set, or set to the empty
-      string.  This default locale can be the POSIX locale or any other
-      implementation-defined locale.  Some implementations may provide
-      facilities for local installation administrators to set the default
-      locale, customizing it for each location.  POSIX:2001 does not require
-      such a facility.
-
-     The systems with such a facility are MacOS X and Windows: They provide a
-     GUI that allows the user to choose a locale.
-       - On MacOS X, by default, none of LC_* or LANG are set.  Starting with
-         MacOS X 10.4 or 10.5, LANG is set for processes launched by the
-         'Terminal' application (but sometimes to an incorrect value "UTF-8").
-         When no environment variable is set, setlocale (LC_ALL, "") uses the
-         "C" locale.
-       - On native Windows, by default, none of LC_* or LANG are set.
-         When no environment variable is set, setlocale (LC_ALL, "") uses the
-         locale chosen by the user.
-       - On Cygwin 1.5.x, by default, none of LC_* or LANG are set.
-         When no environment variable is set, setlocale (LC_ALL, "") uses the
-         "C" locale.
-       - On Cygwin 1.7, by default, LANG is set to "C.UTF-8" when the default
-         ~/.profile is executed.
-         When no environment variable is set, setlocale (LC_ALL, "") uses the
-         "C.UTF-8" locale, which operates in the same way as the "C" locale.
-  */
-
-#if !(HAVE_CFLOCALECOPYCURRENT || HAVE_CFPREFERENCESCOPYAPPVALUE || defined WIN32_NATIVE || defined __CYGWIN__)
-
-  /* The system does not have a way of setting the locale, other than the
-     POSIX specified environment variables.  We use C as default locale.  */
-  return "C";
-
-#else
-
-  /* Return an XPG style locale name language[_territory][@modifier].
-     Don't even bother determining the codeset; it's not useful in this
-     context, because message catalogs are not specific to a single
-     codeset.  */
-
-# if HAVE_CFLOCALECOPYCURRENT || HAVE_CFPREFERENCESCOPYAPPVALUE
-  /* MacOS X 10.2 or newer */
-  {
-    /* Cache the locale name, since CoreFoundation calls are expensive.  */
-    static const char *cached_localename;
-
-    if (cached_localename == NULL)
-      {
-        char namebuf[256];
-#  if HAVE_CFLOCALECOPYCURRENT /* MacOS X 10.3 or newer */
-        CFLocaleRef locale = CFLocaleCopyCurrent ();
-        CFStringRef name = CFLocaleGetIdentifier (locale);
-
-        if (CFStringGetCString (name, namebuf, sizeof (namebuf),
-                                kCFStringEncodingASCII))
-          {
-            gl_locale_name_canonicalize (namebuf);
-            cached_localename = strdup (namebuf);
-          }
-        CFRelease (locale);
-#  elif HAVE_CFPREFERENCESCOPYAPPVALUE /* MacOS X 10.2 or newer */
-        CFTypeRef value =
-          CFPreferencesCopyAppValue (CFSTR ("AppleLocale"),
-                                     kCFPreferencesCurrentApplication);
-        if (value != NULL
-            && CFGetTypeID (value) == CFStringGetTypeID ()
-            && CFStringGetCString ((CFStringRef)value,
-                                   namebuf, sizeof (namebuf),
-                                   kCFStringEncodingASCII))
-          {
-            gl_locale_name_canonicalize (namebuf);
-            cached_localename = strdup (namebuf);
-          }
-#  endif
-        if (cached_localename == NULL)
-          cached_localename = "C";
-      }
-    return cached_localename;
-  }
-
-# endif
-
-# if defined WIN32_NATIVE || defined __CYGWIN__ /* WIN32 or Cygwin */
-  {
-    LCID lcid;
-
-    /* Use native Win32 API locale ID.  */
-    lcid = GetThreadLocale ();
-
-    return gl_locale_name_from_win32_LCID (lcid);
-  }
-# endif
-#endif
-}
-
-/* Determine the current locale's name, and canonicalize it into XPG syntax
-     language[_territory][.codeset][@modifier]
-   The codeset part in the result is not reliable; the locale_charset()
-   should be used for codeset information instead.
-   The result must not be freed; it is statically allocated.  */
-
-const char *
-gl_locale_name (int category, const char *categoryname)
-{
-  const char *retval;
-
-  retval = gl_locale_name_thread (category, categoryname);
-  if (retval != NULL)
-    return retval;
-
-  retval = gl_locale_name_posix (category, categoryname);
-  if (retval != NULL)
-    return retval;
-
-  return gl_locale_name_default ();
-}
diff -urpN mc-4.8.23/intl/lock.c mc-4.8.24/intl/lock.c
--- mc-4.8.23/intl/lock.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/lock.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,1059 +0,0 @@
-/* Locking in multithreaded situations.
-   Copyright (C) 2005-2008 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Written by Bruno Haible <bruno@clisp.org>, 2005.
-   Based on GCC's gthr-posix.h, gthr-posix95.h, gthr-solaris.h,
-   gthr-win32.h.  */
-
-#include <config.h>
-
-#include "lock.h"
-
-/* ========================================================================= */
-
-#if USE_POSIX_THREADS
-
-/* -------------------------- gl_lock_t datatype -------------------------- */
-
-/* ------------------------- gl_rwlock_t datatype ------------------------- */
-
-# if HAVE_PTHREAD_RWLOCK
-
-#  if !defined PTHREAD_RWLOCK_INITIALIZER
-
-int
-glthread_rwlock_init_multithreaded (gl_rwlock_t *lock)
-{
-  int err;
-
-  err = pthread_rwlock_init (&lock->rwlock, NULL);
-  if (err != 0)
-    return err;
-  lock->initialized = 1;
-  return 0;
-}
-
-int
-glthread_rwlock_rdlock_multithreaded (gl_rwlock_t *lock)
-{
-  if (!lock->initialized)
-    {
-      int err;
-
-      err = pthread_mutex_lock (&lock->guard);
-      if (err != 0)
-        return err;
-      if (!lock->initialized)
-        {
-          err = glthread_rwlock_init_multithreaded (lock);
-          if (err != 0)
-            {
-              pthread_mutex_unlock (&lock->guard);
-              return err;
-            }
-        }
-      err = pthread_mutex_unlock (&lock->guard);
-      if (err != 0)
-        return err;
-    }
-  return pthread_rwlock_rdlock (&lock->rwlock);
-}
-
-int
-glthread_rwlock_wrlock_multithreaded (gl_rwlock_t *lock)
-{
-  if (!lock->initialized)
-    {
-      int err;
-
-      err = pthread_mutex_lock (&lock->guard);
-      if (err != 0)
-        return err;
-      if (!lock->initialized)
-        {
-          err = glthread_rwlock_init_multithreaded (lock);
-          if (err != 0)
-            {
-              pthread_mutex_unlock (&lock->guard);
-              return err;
-            }
-        }
-      err = pthread_mutex_unlock (&lock->guard);
-      if (err != 0)
-        return err;
-    }
-  return pthread_rwlock_wrlock (&lock->rwlock);
-}
-
-int
-glthread_rwlock_unlock_multithreaded (gl_rwlock_t *lock)
-{
-  if (!lock->initialized)
-    return EINVAL;
-  return pthread_rwlock_unlock (&lock->rwlock);
-}
-
-int
-glthread_rwlock_destroy_multithreaded (gl_rwlock_t *lock)
-{
-  int err;
-
-  if (!lock->initialized)
-    return EINVAL;
-  err = pthread_rwlock_destroy (&lock->rwlock);
-  if (err != 0)
-    return err;
-  lock->initialized = 0;
-  return 0;
-}
-
-#  endif
-
-# else
-
-int
-glthread_rwlock_init_multithreaded (gl_rwlock_t *lock)
-{
-  int err;
-
-  err = pthread_mutex_init (&lock->lock, NULL);
-  if (err != 0)
-    return err;
-  err = pthread_cond_init (&lock->waiting_readers, NULL);
-  if (err != 0)
-    return err;
-  err = pthread_cond_init (&lock->waiting_writers, NULL);
-  if (err != 0)
-    return err;
-  lock->waiting_writers_count = 0;
-  lock->runcount = 0;
-  return 0;
-}
-
-int
-glthread_rwlock_rdlock_multithreaded (gl_rwlock_t *lock)
-{
-  int err;
-
-  err = pthread_mutex_lock (&lock->lock);
-  if (err != 0)
-    return err;
-  /* Test whether only readers are currently running, and whether the runcount
-     field will not overflow.  */
-  /* POSIX says: "It is implementation-defined whether the calling thread
-     acquires the lock when a writer does not hold the lock and there are
-     writers blocked on the lock."  Let's say, no: give the writers a higher
-     priority.  */
-  while (!(lock->runcount + 1 > 0 && lock->waiting_writers_count == 0))
-    {
-      /* This thread has to wait for a while.  Enqueue it among the
-         waiting_readers.  */
-      err = pthread_cond_wait (&lock->waiting_readers, &lock->lock);
-      if (err != 0)
-        {
-          pthread_mutex_unlock (&lock->lock);
-          return err;
-        }
-    }
-  lock->runcount++;
-  return pthread_mutex_unlock (&lock->lock);
-}
-
-int
-glthread_rwlock_wrlock_multithreaded (gl_rwlock_t *lock)
-{
-  int err;
-
-  err = pthread_mutex_lock (&lock->lock);
-  if (err != 0)
-    return err;
-  /* Test whether no readers or writers are currently running.  */
-  while (!(lock->runcount == 0))
-    {
-      /* This thread has to wait for a while.  Enqueue it among the
-         waiting_writers.  */
-      lock->waiting_writers_count++;
-      err = pthread_cond_wait (&lock->waiting_writers, &lock->lock);
-      if (err != 0)
-        {
-          lock->waiting_writers_count--;
-          pthread_mutex_unlock (&lock->lock);
-          return err;
-        }
-      lock->waiting_writers_count--;
-    }
-  lock->runcount--; /* runcount becomes -1 */
-  return pthread_mutex_unlock (&lock->lock);
-}
-
-int
-glthread_rwlock_unlock_multithreaded (gl_rwlock_t *lock)
-{
-  int err;
-
-  err = pthread_mutex_lock (&lock->lock);
-  if (err != 0)
-    return err;
-  if (lock->runcount < 0)
-    {
-      /* Drop a writer lock.  */
-      if (!(lock->runcount == -1))
-        {
-          pthread_mutex_unlock (&lock->lock);
-          return EINVAL;
-        }
-      lock->runcount = 0;
-    }
-  else
-    {
-      /* Drop a reader lock.  */
-      if (!(lock->runcount > 0))
-        {
-          pthread_mutex_unlock (&lock->lock);
-          return EINVAL;
-        }
-      lock->runcount--;
-    }
-  if (lock->runcount == 0)
-    {
-      /* POSIX recommends that "write locks shall take precedence over read
-         locks", to avoid "writer starvation".  */
-      if (lock->waiting_writers_count > 0)
-        {
-          /* Wake up one of the waiting writers.  */
-          err = pthread_cond_signal (&lock->waiting_writers);
-          if (err != 0)
-            {
-              pthread_mutex_unlock (&lock->lock);
-              return err;
-            }
-        }
-      else
-        {
-          /* Wake up all waiting readers.  */
-          err = pthread_cond_broadcast (&lock->waiting_readers);
-          if (err != 0)
-            {
-              pthread_mutex_unlock (&lock->lock);
-              return err;
-            }
-        }
-    }
-  return pthread_mutex_unlock (&lock->lock);
-}
-
-int
-glthread_rwlock_destroy_multithreaded (gl_rwlock_t *lock)
-{
-  int err;
-
-  err = pthread_mutex_destroy (&lock->lock);
-  if (err != 0)
-    return err;
-  err = pthread_cond_destroy (&lock->waiting_readers);
-  if (err != 0)
-    return err;
-  err = pthread_cond_destroy (&lock->waiting_writers);
-  if (err != 0)
-    return err;
-  return 0;
-}
-
-# endif
-
-/* --------------------- gl_recursive_lock_t datatype --------------------- */
-
-# if HAVE_PTHREAD_MUTEX_RECURSIVE
-
-#  if defined PTHREAD_RECURSIVE_MUTEX_INITIALIZER || defined PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
-
-int
-glthread_recursive_lock_init_multithreaded (gl_recursive_lock_t *lock)
-{
-  pthread_mutexattr_t attributes;
-  int err;
-
-  err = pthread_mutexattr_init (&attributes);
-  if (err != 0)
-    return err;
-  err = pthread_mutexattr_settype (&attributes, PTHREAD_MUTEX_RECURSIVE);
-  if (err != 0)
-    {
-      pthread_mutexattr_destroy (&attributes);
-      return err;
-    }
-  err = pthread_mutex_init (lock, &attributes);
-  if (err != 0)
-    {
-      pthread_mutexattr_destroy (&attributes);
-      return err;
-    }
-  err = pthread_mutexattr_destroy (&attributes);
-  if (err != 0)
-    return err;
-  return 0;
-}
-
-#  else
-
-int
-glthread_recursive_lock_init_multithreaded (gl_recursive_lock_t *lock)
-{
-  pthread_mutexattr_t attributes;
-  int err;
-
-  err = pthread_mutexattr_init (&attributes);
-  if (err != 0)
-    return err;
-  err = pthread_mutexattr_settype (&attributes, PTHREAD_MUTEX_RECURSIVE);
-  if (err != 0)
-    {
-      pthread_mutexattr_destroy (&attributes);
-      return err;
-    }
-  err = pthread_mutex_init (&lock->recmutex, &attributes);
-  if (err != 0)
-    {
-      pthread_mutexattr_destroy (&attributes);
-      return err;
-    }
-  err = pthread_mutexattr_destroy (&attributes);
-  if (err != 0)
-    return err;
-  lock->initialized = 1;
-  return 0;
-}
-
-int
-glthread_recursive_lock_lock_multithreaded (gl_recursive_lock_t *lock)
-{
-  if (!lock->initialized)
-    {
-      int err;
-
-      err = pthread_mutex_lock (&lock->guard);
-      if (err != 0)
-        return err;
-      if (!lock->initialized)
-        {
-          err = glthread_recursive_lock_init_multithreaded (lock);
-          if (err != 0)
-            {
-              pthread_mutex_unlock (&lock->guard);
-              return err;
-            }
-        }
-      err = pthread_mutex_unlock (&lock->guard);
-      if (err != 0)
-        return err;
-    }
-  return pthread_mutex_lock (&lock->recmutex);
-}
-
-int
-glthread_recursive_lock_unlock_multithreaded (gl_recursive_lock_t *lock)
-{
-  if (!lock->initialized)
-    return EINVAL;
-  return pthread_mutex_unlock (&lock->recmutex);
-}
-
-int
-glthread_recursive_lock_destroy_multithreaded (gl_recursive_lock_t *lock)
-{
-  int err;
-
-  if (!lock->initialized)
-    return EINVAL;
-  err = pthread_mutex_destroy (&lock->recmutex);
-  if (err != 0)
-    return err;
-  lock->initialized = 0;
-  return 0;
-}
-
-#  endif
-
-# else
-
-int
-glthread_recursive_lock_init_multithreaded (gl_recursive_lock_t *lock)
-{
-  int err;
-
-  err = pthread_mutex_init (&lock->mutex, NULL);
-  if (err != 0)
-    return err;
-  lock->owner = (pthread_t) 0;
-  lock->depth = 0;
-  return 0;
-}
-
-int
-glthread_recursive_lock_lock_multithreaded (gl_recursive_lock_t *lock)
-{
-  pthread_t self = pthread_self ();
-  if (lock->owner != self)
-    {
-      int err;
-
-      err = pthread_mutex_lock (&lock->mutex);
-      if (err != 0)
-        return err;
-      lock->owner = self;
-    }
-  if (++(lock->depth) == 0) /* wraparound? */
-    {
-      lock->depth--;
-      return EAGAIN;
-    }
-  return 0;
-}
-
-int
-glthread_recursive_lock_unlock_multithreaded (gl_recursive_lock_t *lock)
-{
-  if (lock->owner != pthread_self ())
-    return EPERM;
-  if (lock->depth == 0)
-    return EINVAL;
-  if (--(lock->depth) == 0)
-    {
-      lock->owner = (pthread_t) 0;
-      return pthread_mutex_unlock (&lock->mutex);
-    }
-  else
-    return 0;
-}
-
-int
-glthread_recursive_lock_destroy_multithreaded (gl_recursive_lock_t *lock)
-{
-  if (lock->owner != (pthread_t) 0)
-    return EBUSY;
-  return pthread_mutex_destroy (&lock->mutex);
-}
-
-# endif
-
-/* -------------------------- gl_once_t datatype -------------------------- */
-
-static const pthread_once_t fresh_once = PTHREAD_ONCE_INIT;
-
-int
-glthread_once_singlethreaded (pthread_once_t *once_control)
-{
-  /* We don't know whether pthread_once_t is an integer type, a floating-point
-     type, a pointer type, or a structure type.  */
-  char *firstbyte = (char *)once_control;
-  if (*firstbyte == *(const char *)&fresh_once)
-    {
-      /* First time use of once_control.  Invert the first byte.  */
-      *firstbyte = ~ *(const char *)&fresh_once;
-      return 1;
-    }
-  else
-    return 0;
-}
-
-#endif
-
-/* ========================================================================= */
-
-#if USE_PTH_THREADS
-
-/* Use the GNU Pth threads library.  */
-
-/* -------------------------- gl_lock_t datatype -------------------------- */
-
-/* ------------------------- gl_rwlock_t datatype ------------------------- */
-
-/* --------------------- gl_recursive_lock_t datatype --------------------- */
-
-/* -------------------------- gl_once_t datatype -------------------------- */
-
-static void
-glthread_once_call (void *arg)
-{
-  void (**gl_once_temp_addr) (void) = (void (**) (void)) arg;
-  void (*initfunction) (void) = *gl_once_temp_addr;
-  initfunction ();
-}
-
-int
-glthread_once_multithreaded (pth_once_t *once_control, void (*initfunction) (void))
-{
-  void (*temp) (void) = initfunction;
-  return (!pth_once (once_control, glthread_once_call, &temp) ? errno : 0);
-}
-
-int
-glthread_once_singlethreaded (pth_once_t *once_control)
-{
-  /* We know that pth_once_t is an integer type.  */
-  if (*once_control == PTH_ONCE_INIT)
-    {
-      /* First time use of once_control.  Invert the marker.  */
-      *once_control = ~ PTH_ONCE_INIT;
-      return 1;
-    }
-  else
-    return 0;
-}
-
-#endif
-
-/* ========================================================================= */
-
-#if USE_SOLARIS_THREADS
-
-/* Use the old Solaris threads library.  */
-
-/* -------------------------- gl_lock_t datatype -------------------------- */
-
-/* ------------------------- gl_rwlock_t datatype ------------------------- */
-
-/* --------------------- gl_recursive_lock_t datatype --------------------- */
-
-int
-glthread_recursive_lock_init_multithreaded (gl_recursive_lock_t *lock)
-{
-  int err;
-
-  err = mutex_init (&lock->mutex, USYNC_THREAD, NULL);
-  if (err != 0)
-    return err;
-  lock->owner = (thread_t) 0;
-  lock->depth = 0;
-  return 0;
-}
-
-int
-glthread_recursive_lock_lock_multithreaded (gl_recursive_lock_t *lock)
-{
-  thread_t self = thr_self ();
-  if (lock->owner != self)
-    {
-      int err;
-
-      err = mutex_lock (&lock->mutex);
-      if (err != 0)
-        return err;
-      lock->owner = self;
-    }
-  if (++(lock->depth) == 0) /* wraparound? */
-    {
-      lock->depth--;
-      return EAGAIN;
-    }
-  return 0;
-}
-
-int
-glthread_recursive_lock_unlock_multithreaded (gl_recursive_lock_t *lock)
-{
-  if (lock->owner != thr_self ())
-    return EPERM;
-  if (lock->depth == 0)
-    return EINVAL;
-  if (--(lock->depth) == 0)
-    {
-      lock->owner = (thread_t) 0;
-      return mutex_unlock (&lock->mutex);
-    }
-  else
-    return 0;
-}
-
-int
-glthread_recursive_lock_destroy_multithreaded (gl_recursive_lock_t *lock)
-{
-  if (lock->owner != (thread_t) 0)
-    return EBUSY;
-  return mutex_destroy (&lock->mutex);
-}
-
-/* -------------------------- gl_once_t datatype -------------------------- */
-
-int
-glthread_once_multithreaded (gl_once_t *once_control, void (*initfunction) (void))
-{
-  if (!once_control->inited)
-    {
-      int err;
-
-      /* Use the mutex to guarantee that if another thread is already calling
-         the initfunction, this thread waits until it's finished.  */
-      err = mutex_lock (&once_control->mutex);
-      if (err != 0)
-        return err;
-      if (!once_control->inited)
-        {
-          once_control->inited = 1;
-          initfunction ();
-        }
-      return mutex_unlock (&once_control->mutex);
-    }
-  else
-    return 0;
-}
-
-int
-glthread_once_singlethreaded (gl_once_t *once_control)
-{
-  /* We know that gl_once_t contains an integer type.  */
-  if (!once_control->inited)
-    {
-      /* First time use of once_control.  Invert the marker.  */
-      once_control->inited = ~ 0;
-      return 1;
-    }
-  else
-    return 0;
-}
-
-#endif
-
-/* ========================================================================= */
-
-#if USE_WIN32_THREADS
-
-/* -------------------------- gl_lock_t datatype -------------------------- */
-
-void
-glthread_lock_init_func (gl_lock_t *lock)
-{
-  InitializeCriticalSection (&lock->lock);
-  lock->guard.done = 1;
-}
-
-int
-glthread_lock_lock_func (gl_lock_t *lock)
-{
-  if (!lock->guard.done)
-    {
-      if (InterlockedIncrement (&lock->guard.started) == 0)
-        /* This thread is the first one to need this lock.  Initialize it.  */
-        glthread_lock_init (lock);
-      else
-        /* Yield the CPU while waiting for another thread to finish
-           initializing this lock.  */
-        while (!lock->guard.done)
-          Sleep (0);
-    }
-  EnterCriticalSection (&lock->lock);
-  return 0;
-}
-
-int
-glthread_lock_unlock_func (gl_lock_t *lock)
-{
-  if (!lock->guard.done)
-    return EINVAL;
-  LeaveCriticalSection (&lock->lock);
-  return 0;
-}
-
-int
-glthread_lock_destroy_func (gl_lock_t *lock)
-{
-  if (!lock->guard.done)
-    return EINVAL;
-  DeleteCriticalSection (&lock->lock);
-  lock->guard.done = 0;
-  return 0;
-}
-
-/* ------------------------- gl_rwlock_t datatype ------------------------- */
-
-/* In this file, the waitqueues are implemented as circular arrays.  */
-#define gl_waitqueue_t gl_carray_waitqueue_t
-
-static inline void
-gl_waitqueue_init (gl_waitqueue_t *wq)
-{
-  wq->array = NULL;
-  wq->count = 0;
-  wq->alloc = 0;
-  wq->offset = 0;
-}
-
-/* Enqueues the current thread, represented by an event, in a wait queue.
-   Returns INVALID_HANDLE_VALUE if an allocation failure occurs.  */
-static HANDLE
-gl_waitqueue_add (gl_waitqueue_t *wq)
-{
-  HANDLE event;
-  unsigned int index;
-
-  if (wq->count == wq->alloc)
-    {
-      unsigned int new_alloc = 2 * wq->alloc + 1;
-      HANDLE *new_array =
-        (HANDLE *) realloc (wq->array, new_alloc * sizeof (HANDLE));
-      if (new_array == NULL)
-        /* No more memory.  */
-        return INVALID_HANDLE_VALUE;
-      /* Now is a good opportunity to rotate the array so that its contents
-         starts at offset 0.  */
-      if (wq->offset > 0)
-        {
-          unsigned int old_count = wq->count;
-          unsigned int old_alloc = wq->alloc;
-          unsigned int old_offset = wq->offset;
-          unsigned int i;
-          if (old_offset + old_count > old_alloc)
-            {
-              unsigned int limit = old_offset + old_count - old_alloc;
-              for (i = 0; i < limit; i++)
-                new_array[old_alloc + i] = new_array[i];
-            }
-          for (i = 0; i < old_count; i++)
-            new_array[i] = new_array[old_offset + i];
-          wq->offset = 0;
-        }
-      wq->array = new_array;
-      wq->alloc = new_alloc;
-    }
-  /* Whether the created event is a manual-reset one or an auto-reset one,
-     does not matter, since we will wait on it only once.  */
-  event = CreateEvent (NULL, TRUE, FALSE, NULL);
-  if (event == INVALID_HANDLE_VALUE)
-    /* No way to allocate an event.  */
-    return INVALID_HANDLE_VALUE;
-  index = wq->offset + wq->count;
-  if (index >= wq->alloc)
-    index -= wq->alloc;
-  wq->array[index] = event;
-  wq->count++;
-  return event;
-}
-
-/* Notifies the first thread from a wait queue and dequeues it.  */
-static inline void
-gl_waitqueue_notify_first (gl_waitqueue_t *wq)
-{
-  SetEvent (wq->array[wq->offset + 0]);
-  wq->offset++;
-  wq->count--;
-  if (wq->count == 0 || wq->offset == wq->alloc)
-    wq->offset = 0;
-}
-
-/* Notifies all threads from a wait queue and dequeues them all.  */
-static inline void
-gl_waitqueue_notify_all (gl_waitqueue_t *wq)
-{
-  unsigned int i;
-
-  for (i = 0; i < wq->count; i++)
-    {
-      unsigned int index = wq->offset + i;
-      if (index >= wq->alloc)
-        index -= wq->alloc;
-      SetEvent (wq->array[index]);
-    }
-  wq->count = 0;
-  wq->offset = 0;
-}
-
-void
-glthread_rwlock_init_func (gl_rwlock_t *lock)
-{
-  InitializeCriticalSection (&lock->lock);
-  gl_waitqueue_init (&lock->waiting_readers);
-  gl_waitqueue_init (&lock->waiting_writers);
-  lock->runcount = 0;
-  lock->guard.done = 1;
-}
-
-int
-glthread_rwlock_rdlock_func (gl_rwlock_t *lock)
-{
-  if (!lock->guard.done)
-    {
-      if (InterlockedIncrement (&lock->guard.started) == 0)
-        /* This thread is the first one to need this lock.  Initialize it.  */
-        glthread_rwlock_init (lock);
-      else
-        /* Yield the CPU while waiting for another thread to finish
-           initializing this lock.  */
-        while (!lock->guard.done)
-          Sleep (0);
-    }
-  EnterCriticalSection (&lock->lock);
-  /* Test whether only readers are currently running, and whether the runcount
-     field will not overflow.  */
-  if (!(lock->runcount + 1 > 0))
-    {
-      /* This thread has to wait for a while.  Enqueue it among the
-         waiting_readers.  */
-      HANDLE event = gl_waitqueue_add (&lock->waiting_readers);
-      if (event != INVALID_HANDLE_VALUE)
-        {
-          DWORD result;
-          LeaveCriticalSection (&lock->lock);
-          /* Wait until another thread signals this event.  */
-          result = WaitForSingleObject (event, INFINITE);
-          if (result == WAIT_FAILED || result == WAIT_TIMEOUT)
-            abort ();
-          CloseHandle (event);
-          /* The thread which signalled the event already did the bookkeeping:
-             removed us from the waiting_readers, incremented lock->runcount.  */
-          if (!(lock->runcount > 0))
-            abort ();
-          return 0;
-        }
-      else
-        {
-          /* Allocation failure.  Weird.  */
-          do
-            {
-              LeaveCriticalSection (&lock->lock);
-              Sleep (1);
-              EnterCriticalSection (&lock->lock);
-            }
-          while (!(lock->runcount + 1 > 0));
-        }
-    }
-  lock->runcount++;
-  LeaveCriticalSection (&lock->lock);
-  return 0;
-}
-
-int
-glthread_rwlock_wrlock_func (gl_rwlock_t *lock)
-{
-  if (!lock->guard.done)
-    {
-      if (InterlockedIncrement (&lock->guard.started) == 0)
-        /* This thread is the first one to need this lock.  Initialize it.  */
-        glthread_rwlock_init (lock);
-      else
-        /* Yield the CPU while waiting for another thread to finish
-           initializing this lock.  */
-        while (!lock->guard.done)
-          Sleep (0);
-    }
-  EnterCriticalSection (&lock->lock);
-  /* Test whether no readers or writers are currently running.  */
-  if (!(lock->runcount == 0))
-    {
-      /* This thread has to wait for a while.  Enqueue it among the
-         waiting_writers.  */
-      HANDLE event = gl_waitqueue_add (&lock->waiting_writers);
-      if (event != INVALID_HANDLE_VALUE)
-        {
-          DWORD result;
-          LeaveCriticalSection (&lock->lock);
-          /* Wait until another thread signals this event.  */
-          result = WaitForSingleObject (event, INFINITE);
-          if (result == WAIT_FAILED || result == WAIT_TIMEOUT)
-            abort ();
-          CloseHandle (event);
-          /* The thread which signalled the event already did the bookkeeping:
-             removed us from the waiting_writers, set lock->runcount = -1.  */
-          if (!(lock->runcount == -1))
-            abort ();
-          return 0;
-        }
-      else
-        {
-          /* Allocation failure.  Weird.  */
-          do
-            {
-              LeaveCriticalSection (&lock->lock);
-              Sleep (1);
-              EnterCriticalSection (&lock->lock);
-            }
-          while (!(lock->runcount == 0));
-        }
-    }
-  lock->runcount--; /* runcount becomes -1 */
-  LeaveCriticalSection (&lock->lock);
-  return 0;
-}
-
-int
-glthread_rwlock_unlock_func (gl_rwlock_t *lock)
-{
-  if (!lock->guard.done)
-    return EINVAL;
-  EnterCriticalSection (&lock->lock);
-  if (lock->runcount < 0)
-    {
-      /* Drop a writer lock.  */
-      if (!(lock->runcount == -1))
-        abort ();
-      lock->runcount = 0;
-    }
-  else
-    {
-      /* Drop a reader lock.  */
-      if (!(lock->runcount > 0))
-        {
-          LeaveCriticalSection (&lock->lock);
-          return EPERM;
-        }
-      lock->runcount--;
-    }
-  if (lock->runcount == 0)
-    {
-      /* POSIX recommends that "write locks shall take precedence over read
-         locks", to avoid "writer starvation".  */
-      if (lock->waiting_writers.count > 0)
-        {
-          /* Wake up one of the waiting writers.  */
-          lock->runcount--;
-          gl_waitqueue_notify_first (&lock->waiting_writers);
-        }
-      else
-        {
-          /* Wake up all waiting readers.  */
-          lock->runcount += lock->waiting_readers.count;
-          gl_waitqueue_notify_all (&lock->waiting_readers);
-        }
-    }
-  LeaveCriticalSection (&lock->lock);
-  return 0;
-}
-
-int
-glthread_rwlock_destroy_func (gl_rwlock_t *lock)
-{
-  if (!lock->guard.done)
-    return EINVAL;
-  if (lock->runcount != 0)
-    return EBUSY;
-  DeleteCriticalSection (&lock->lock);
-  if (lock->waiting_readers.array != NULL)
-    free (lock->waiting_readers.array);
-  if (lock->waiting_writers.array != NULL)
-    free (lock->waiting_writers.array);
-  lock->guard.done = 0;
-  return 0;
-}
-
-/* --------------------- gl_recursive_lock_t datatype --------------------- */
-
-void
-glthread_recursive_lock_init_func (gl_recursive_lock_t *lock)
-{
-  lock->owner = 0;
-  lock->depth = 0;
-  InitializeCriticalSection (&lock->lock);
-  lock->guard.done = 1;
-}
-
-int
-glthread_recursive_lock_lock_func (gl_recursive_lock_t *lock)
-{
-  if (!lock->guard.done)
-    {
-      if (InterlockedIncrement (&lock->guard.started) == 0)
-        /* This thread is the first one to need this lock.  Initialize it.  */
-        glthread_recursive_lock_init (lock);
-      else
-        /* Yield the CPU while waiting for another thread to finish
-           initializing this lock.  */
-        while (!lock->guard.done)
-          Sleep (0);
-    }
-  {
-    DWORD self = GetCurrentThreadId ();
-    if (lock->owner != self)
-      {
-        EnterCriticalSection (&lock->lock);
-        lock->owner = self;
-      }
-    if (++(lock->depth) == 0) /* wraparound? */
-      {
-        lock->depth--;
-        return EAGAIN;
-      }
-  }
-  return 0;
-}
-
-int
-glthread_recursive_lock_unlock_func (gl_recursive_lock_t *lock)
-{
-  if (lock->owner != GetCurrentThreadId ())
-    return EPERM;
-  if (lock->depth == 0)
-    return EINVAL;
-  if (--(lock->depth) == 0)
-    {
-      lock->owner = 0;
-      LeaveCriticalSection (&lock->lock);
-    }
-  return 0;
-}
-
-int
-glthread_recursive_lock_destroy_func (gl_recursive_lock_t *lock)
-{
-  if (lock->owner != 0)
-    return EBUSY;
-  DeleteCriticalSection (&lock->lock);
-  lock->guard.done = 0;
-  return 0;
-}
-
-/* -------------------------- gl_once_t datatype -------------------------- */
-
-void
-glthread_once_func (gl_once_t *once_control, void (*initfunction) (void))
-{
-  if (once_control->inited <= 0)
-    {
-      if (InterlockedIncrement (&once_control->started) == 0)
-        {
-          /* This thread is the first one to come to this once_control.  */
-          InitializeCriticalSection (&once_control->lock);
-          EnterCriticalSection (&once_control->lock);
-          once_control->inited = 0;
-          initfunction ();
-          once_control->inited = 1;
-          LeaveCriticalSection (&once_control->lock);
-        }
-      else
-        {
-          /* Undo last operation.  */
-          InterlockedDecrement (&once_control->started);
-          /* Some other thread has already started the initialization.
-             Yield the CPU while waiting for the other thread to finish
-             initializing and taking the lock.  */
-          while (once_control->inited < 0)
-            Sleep (0);
-          if (once_control->inited <= 0)
-            {
-              /* Take the lock.  This blocks until the other thread has
-                 finished calling the initfunction.  */
-              EnterCriticalSection (&once_control->lock);
-              LeaveCriticalSection (&once_control->lock);
-              if (!(once_control->inited > 0))
-                abort ();
-            }
-        }
-    }
-}
-
-#endif
-
-/* ========================================================================= */
diff -urpN mc-4.8.23/intl/lock.h mc-4.8.24/intl/lock.h
--- mc-4.8.23/intl/lock.h	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/lock.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,928 +0,0 @@
-/* Locking in multithreaded situations.
-   Copyright (C) 2005-2008 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Written by Bruno Haible <bruno@clisp.org>, 2005.
-   Based on GCC's gthr-posix.h, gthr-posix95.h, gthr-solaris.h,
-   gthr-win32.h.  */
-
-/* This file contains locking primitives for use with a given thread library.
-   It does not contain primitives for creating threads or for other
-   synchronization primitives.
-
-   Normal (non-recursive) locks:
-     Type:                gl_lock_t
-     Declaration:         gl_lock_define(extern, name)
-     Initializer:         gl_lock_define_initialized(, name)
-     Initialization:      gl_lock_init (name);
-     Taking the lock:     gl_lock_lock (name);
-     Releasing the lock:  gl_lock_unlock (name);
-     De-initialization:   gl_lock_destroy (name);
-   Equivalent functions with control of error handling:
-     Initialization:      err = glthread_lock_init (&name);
-     Taking the lock:     err = glthread_lock_lock (&name);
-     Releasing the lock:  err = glthread_lock_unlock (&name);
-     De-initialization:   err = glthread_lock_destroy (&name);
-
-   Read-Write (non-recursive) locks:
-     Type:                gl_rwlock_t
-     Declaration:         gl_rwlock_define(extern, name)
-     Initializer:         gl_rwlock_define_initialized(, name)
-     Initialization:      gl_rwlock_init (name);
-     Taking the lock:     gl_rwlock_rdlock (name);
-                          gl_rwlock_wrlock (name);
-     Releasing the lock:  gl_rwlock_unlock (name);
-     De-initialization:   gl_rwlock_destroy (name);
-   Equivalent functions with control of error handling:
-     Initialization:      err = glthread_rwlock_init (&name);
-     Taking the lock:     err = glthread_rwlock_rdlock (&name);
-                          err = glthread_rwlock_wrlock (&name);
-     Releasing the lock:  err = glthread_rwlock_unlock (&name);
-     De-initialization:   err = glthread_rwlock_destroy (&name);
-
-   Recursive locks:
-     Type:                gl_recursive_lock_t
-     Declaration:         gl_recursive_lock_define(extern, name)
-     Initializer:         gl_recursive_lock_define_initialized(, name)
-     Initialization:      gl_recursive_lock_init (name);
-     Taking the lock:     gl_recursive_lock_lock (name);
-     Releasing the lock:  gl_recursive_lock_unlock (name);
-     De-initialization:   gl_recursive_lock_destroy (name);
-   Equivalent functions with control of error handling:
-     Initialization:      err = glthread_recursive_lock_init (&name);
-     Taking the lock:     err = glthread_recursive_lock_lock (&name);
-     Releasing the lock:  err = glthread_recursive_lock_unlock (&name);
-     De-initialization:   err = glthread_recursive_lock_destroy (&name);
-
-  Once-only execution:
-     Type:                gl_once_t
-     Initializer:         gl_once_define(extern, name)
-     Execution:           gl_once (name, initfunction);
-   Equivalent functions with control of error handling:
-     Execution:           err = glthread_once (&name, initfunction);
-*/
-
-
-#ifndef _LOCK_H
-#define _LOCK_H
-
-#include <errno.h>
-#include <stdlib.h>
-
-/* ========================================================================= */
-
-#if USE_POSIX_THREADS
-
-/* Use the POSIX threads library.  */
-
-# include <pthread.h>
-
-# ifdef __cplusplus
-extern "C" {
-# endif
-
-# if PTHREAD_IN_USE_DETECTION_HARD
-
-/* The pthread_in_use() detection needs to be done at runtime.  */
-#  define pthread_in_use() \
-     glthread_in_use ()
-extern int glthread_in_use (void);
-
-# endif
-
-# if USE_POSIX_THREADS_WEAK
-
-/* Use weak references to the POSIX threads library.  */
-
-/* Weak references avoid dragging in external libraries if the other parts
-   of the program don't use them.  Here we use them, because we don't want
-   every program that uses libintl to depend on libpthread.  This assumes
-   that libpthread would not be loaded after libintl; i.e. if libintl is
-   loaded first, by an executable that does not depend on libpthread, and
-   then a module is dynamically loaded that depends on libpthread, libintl
-   will not be multithread-safe.  */
-
-/* The way to test at runtime whether libpthread is present is to test
-   whether a function pointer's value, such as &pthread_mutex_init, is
-   non-NULL.  However, some versions of GCC have a bug through which, in
-   PIC mode, &foo != NULL always evaluates to true if there is a direct
-   call to foo(...) in the same function.  To avoid this, we test the
-   address of a function in libpthread that we don't use.  */
-
-#  pragma weak pthread_mutex_init
-#  pragma weak pthread_mutex_lock
-#  pragma weak pthread_mutex_unlock
-#  pragma weak pthread_mutex_destroy
-#  pragma weak pthread_rwlock_init
-#  pragma weak pthread_rwlock_rdlock
-#  pragma weak pthread_rwlock_wrlock
-#  pragma weak pthread_rwlock_unlock
-#  pragma weak pthread_rwlock_destroy
-#  pragma weak pthread_once
-#  pragma weak pthread_cond_init
-#  pragma weak pthread_cond_wait
-#  pragma weak pthread_cond_signal
-#  pragma weak pthread_cond_broadcast
-#  pragma weak pthread_cond_destroy
-#  pragma weak pthread_mutexattr_init
-#  pragma weak pthread_mutexattr_settype
-#  pragma weak pthread_mutexattr_destroy
-#  ifndef pthread_self
-#   pragma weak pthread_self
-#  endif
-
-#  if !PTHREAD_IN_USE_DETECTION_HARD
-#   pragma weak pthread_cancel
-#   define pthread_in_use() (pthread_cancel != NULL)
-#  endif
-
-# else
-
-#  if !PTHREAD_IN_USE_DETECTION_HARD
-#   define pthread_in_use() 1
-#  endif
-
-# endif
-
-/* -------------------------- gl_lock_t datatype -------------------------- */
-
-typedef pthread_mutex_t gl_lock_t;
-# define gl_lock_define(STORAGECLASS, NAME) \
-    STORAGECLASS pthread_mutex_t NAME;
-# define gl_lock_define_initialized(STORAGECLASS, NAME) \
-    STORAGECLASS pthread_mutex_t NAME = gl_lock_initializer;
-# define gl_lock_initializer \
-    PTHREAD_MUTEX_INITIALIZER
-# define glthread_lock_init(LOCK) \
-    (pthread_in_use () ? pthread_mutex_init (LOCK, NULL) : 0)
-# define glthread_lock_lock(LOCK) \
-    (pthread_in_use () ? pthread_mutex_lock (LOCK) : 0)
-# define glthread_lock_unlock(LOCK) \
-    (pthread_in_use () ? pthread_mutex_unlock (LOCK) : 0)
-# define glthread_lock_destroy(LOCK) \
-    (pthread_in_use () ? pthread_mutex_destroy (LOCK) : 0)
-
-/* ------------------------- gl_rwlock_t datatype ------------------------- */
-
-# if HAVE_PTHREAD_RWLOCK
-
-#  ifdef PTHREAD_RWLOCK_INITIALIZER
-
-typedef pthread_rwlock_t gl_rwlock_t;
-#   define gl_rwlock_define(STORAGECLASS, NAME) \
-      STORAGECLASS pthread_rwlock_t NAME;
-#   define gl_rwlock_define_initialized(STORAGECLASS, NAME) \
-      STORAGECLASS pthread_rwlock_t NAME = gl_rwlock_initializer;
-#   define gl_rwlock_initializer \
-      PTHREAD_RWLOCK_INITIALIZER
-#   define glthread_rwlock_init(LOCK) \
-      (pthread_in_use () ? pthread_rwlock_init (LOCK, NULL) : 0)
-#   define glthread_rwlock_rdlock(LOCK) \
-      (pthread_in_use () ? pthread_rwlock_rdlock (LOCK) : 0)
-#   define glthread_rwlock_wrlock(LOCK) \
-      (pthread_in_use () ? pthread_rwlock_wrlock (LOCK) : 0)
-#   define glthread_rwlock_unlock(LOCK) \
-      (pthread_in_use () ? pthread_rwlock_unlock (LOCK) : 0)
-#   define glthread_rwlock_destroy(LOCK) \
-      (pthread_in_use () ? pthread_rwlock_destroy (LOCK) : 0)
-
-#  else
-
-typedef struct
-        {
-          int initialized;
-          pthread_mutex_t guard;   /* protects the initialization */
-          pthread_rwlock_t rwlock; /* read-write lock */
-        }
-        gl_rwlock_t;
-#   define gl_rwlock_define(STORAGECLASS, NAME) \
-      STORAGECLASS gl_rwlock_t NAME;
-#   define gl_rwlock_define_initialized(STORAGECLASS, NAME) \
-      STORAGECLASS gl_rwlock_t NAME = gl_rwlock_initializer;
-#   define gl_rwlock_initializer \
-      { 0, PTHREAD_MUTEX_INITIALIZER }
-#   define glthread_rwlock_init(LOCK) \
-      (pthread_in_use () ? glthread_rwlock_init_multithreaded (LOCK) : 0)
-#   define glthread_rwlock_rdlock(LOCK) \
-      (pthread_in_use () ? glthread_rwlock_rdlock_multithreaded (LOCK) : 0)
-#   define glthread_rwlock_wrlock(LOCK) \
-      (pthread_in_use () ? glthread_rwlock_wrlock_multithreaded (LOCK) : 0)
-#   define glthread_rwlock_unlock(LOCK) \
-      (pthread_in_use () ? glthread_rwlock_unlock_multithreaded (LOCK) : 0)
-#   define glthread_rwlock_destroy(LOCK) \
-      (pthread_in_use () ? glthread_rwlock_destroy_multithreaded (LOCK) : 0)
-extern int glthread_rwlock_init_multithreaded (gl_rwlock_t *lock);
-extern int glthread_rwlock_rdlock_multithreaded (gl_rwlock_t *lock);
-extern int glthread_rwlock_wrlock_multithreaded (gl_rwlock_t *lock);
-extern int glthread_rwlock_unlock_multithreaded (gl_rwlock_t *lock);
-extern int glthread_rwlock_destroy_multithreaded (gl_rwlock_t *lock);
-
-#  endif
-
-# else
-
-typedef struct
-        {
-          pthread_mutex_t lock; /* protects the remaining fields */
-          pthread_cond_t waiting_readers; /* waiting readers */
-          pthread_cond_t waiting_writers; /* waiting writers */
-          unsigned int waiting_writers_count; /* number of waiting writers */
-          int runcount; /* number of readers running, or -1 when a writer runs */
-        }
-        gl_rwlock_t;
-# define gl_rwlock_define(STORAGECLASS, NAME) \
-    STORAGECLASS gl_rwlock_t NAME;
-# define gl_rwlock_define_initialized(STORAGECLASS, NAME) \
-    STORAGECLASS gl_rwlock_t NAME = gl_rwlock_initializer;
-# define gl_rwlock_initializer \
-    { PTHREAD_MUTEX_INITIALIZER, PTHREAD_COND_INITIALIZER, PTHREAD_COND_INITIALIZER, 0, 0 }
-# define glthread_rwlock_init(LOCK) \
-    (pthread_in_use () ? glthread_rwlock_init_multithreaded (LOCK) : 0)
-# define glthread_rwlock_rdlock(LOCK) \
-    (pthread_in_use () ? glthread_rwlock_rdlock_multithreaded (LOCK) : 0)
-# define glthread_rwlock_wrlock(LOCK) \
-    (pthread_in_use () ? glthread_rwlock_wrlock_multithreaded (LOCK) : 0)
-# define glthread_rwlock_unlock(LOCK) \
-    (pthread_in_use () ? glthread_rwlock_unlock_multithreaded (LOCK) : 0)
-# define glthread_rwlock_destroy(LOCK) \
-    (pthread_in_use () ? glthread_rwlock_destroy_multithreaded (LOCK) : 0)
-extern int glthread_rwlock_init_multithreaded (gl_rwlock_t *lock);
-extern int glthread_rwlock_rdlock_multithreaded (gl_rwlock_t *lock);
-extern int glthread_rwlock_wrlock_multithreaded (gl_rwlock_t *lock);
-extern int glthread_rwlock_unlock_multithreaded (gl_rwlock_t *lock);
-extern int glthread_rwlock_destroy_multithreaded (gl_rwlock_t *lock);
-
-# endif
-
-/* --------------------- gl_recursive_lock_t datatype --------------------- */
-
-# if HAVE_PTHREAD_MUTEX_RECURSIVE
-
-#  if defined PTHREAD_RECURSIVE_MUTEX_INITIALIZER || defined PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
-
-typedef pthread_mutex_t gl_recursive_lock_t;
-#   define gl_recursive_lock_define(STORAGECLASS, NAME) \
-      STORAGECLASS pthread_mutex_t NAME;
-#   define gl_recursive_lock_define_initialized(STORAGECLASS, NAME) \
-      STORAGECLASS pthread_mutex_t NAME = gl_recursive_lock_initializer;
-#   ifdef PTHREAD_RECURSIVE_MUTEX_INITIALIZER
-#    define gl_recursive_lock_initializer \
-       PTHREAD_RECURSIVE_MUTEX_INITIALIZER
-#   else
-#    define gl_recursive_lock_initializer \
-       PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
-#   endif
-#   define glthread_recursive_lock_init(LOCK) \
-      (pthread_in_use () ? glthread_recursive_lock_init_multithreaded (LOCK) : 0)
-#   define glthread_recursive_lock_lock(LOCK) \
-      (pthread_in_use () ? pthread_mutex_lock (LOCK) : 0)
-#   define glthread_recursive_lock_unlock(LOCK) \
-      (pthread_in_use () ? pthread_mutex_unlock (LOCK) : 0)
-#   define glthread_recursive_lock_destroy(LOCK) \
-      (pthread_in_use () ? pthread_mutex_destroy (LOCK) : 0)
-extern int glthread_recursive_lock_init_multithreaded (gl_recursive_lock_t *lock);
-
-#  else
-
-typedef struct
-        {
-          pthread_mutex_t recmutex; /* recursive mutex */
-          pthread_mutex_t guard;    /* protects the initialization */
-          int initialized;
-        }
-        gl_recursive_lock_t;
-#   define gl_recursive_lock_define(STORAGECLASS, NAME) \
-      STORAGECLASS gl_recursive_lock_t NAME;
-#   define gl_recursive_lock_define_initialized(STORAGECLASS, NAME) \
-      STORAGECLASS gl_recursive_lock_t NAME = gl_recursive_lock_initializer;
-#   define gl_recursive_lock_initializer \
-      { PTHREAD_MUTEX_INITIALIZER, PTHREAD_MUTEX_INITIALIZER, 0 }
-#   define glthread_recursive_lock_init(LOCK) \
-      (pthread_in_use () ? glthread_recursive_lock_init_multithreaded (LOCK) : 0)
-#   define glthread_recursive_lock_lock(LOCK) \
-      (pthread_in_use () ? glthread_recursive_lock_lock_multithreaded (LOCK) : 0)
-#   define glthread_recursive_lock_unlock(LOCK) \
-      (pthread_in_use () ? glthread_recursive_lock_unlock_multithreaded (LOCK) : 0)
-#   define glthread_recursive_lock_destroy(LOCK) \
-      (pthread_in_use () ? glthread_recursive_lock_destroy_multithreaded (LOCK) : 0)
-extern int glthread_recursive_lock_init_multithreaded (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_lock_multithreaded (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_unlock_multithreaded (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_destroy_multithreaded (gl_recursive_lock_t *lock);
-
-#  endif
-
-# else
-
-/* Old versions of POSIX threads on Solaris did not have recursive locks.
-   We have to implement them ourselves.  */
-
-typedef struct
-        {
-          pthread_mutex_t mutex;
-          pthread_t owner;
-          unsigned long depth;
-        }
-        gl_recursive_lock_t;
-#  define gl_recursive_lock_define(STORAGECLASS, NAME) \
-     STORAGECLASS gl_recursive_lock_t NAME;
-#  define gl_recursive_lock_define_initialized(STORAGECLASS, NAME) \
-     STORAGECLASS gl_recursive_lock_t NAME = gl_recursive_lock_initializer;
-#  define gl_recursive_lock_initializer \
-     { PTHREAD_MUTEX_INITIALIZER, (pthread_t) 0, 0 }
-#  define glthread_recursive_lock_init(LOCK) \
-     (pthread_in_use () ? glthread_recursive_lock_init_multithreaded (LOCK) : 0)
-#  define glthread_recursive_lock_lock(LOCK) \
-     (pthread_in_use () ? glthread_recursive_lock_lock_multithreaded (LOCK) : 0)
-#  define glthread_recursive_lock_unlock(LOCK) \
-     (pthread_in_use () ? glthread_recursive_lock_unlock_multithreaded (LOCK) : 0)
-#  define glthread_recursive_lock_destroy(LOCK) \
-     (pthread_in_use () ? glthread_recursive_lock_destroy_multithreaded (LOCK) : 0)
-extern int glthread_recursive_lock_init_multithreaded (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_lock_multithreaded (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_unlock_multithreaded (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_destroy_multithreaded (gl_recursive_lock_t *lock);
-
-# endif
-
-/* -------------------------- gl_once_t datatype -------------------------- */
-
-typedef pthread_once_t gl_once_t;
-# define gl_once_define(STORAGECLASS, NAME) \
-    STORAGECLASS pthread_once_t NAME = PTHREAD_ONCE_INIT;
-# define glthread_once(ONCE_CONTROL, INITFUNCTION) \
-    (pthread_in_use ()                                                         \
-     ? pthread_once (ONCE_CONTROL, INITFUNCTION)                               \
-     : (glthread_once_singlethreaded (ONCE_CONTROL) ? (INITFUNCTION (), 0) : 0))
-extern int glthread_once_singlethreaded (pthread_once_t *once_control);
-
-# ifdef __cplusplus
-}
-# endif
-
-#endif
-
-/* ========================================================================= */
-
-#if USE_PTH_THREADS
-
-/* Use the GNU Pth threads library.  */
-
-# include <pth.h>
-
-# ifdef __cplusplus
-extern "C" {
-# endif
-
-# if USE_PTH_THREADS_WEAK
-
-/* Use weak references to the GNU Pth threads library.  */
-
-#  pragma weak pth_mutex_init
-#  pragma weak pth_mutex_acquire
-#  pragma weak pth_mutex_release
-#  pragma weak pth_rwlock_init
-#  pragma weak pth_rwlock_acquire
-#  pragma weak pth_rwlock_release
-#  pragma weak pth_once
-
-#  pragma weak pth_cancel
-#  define pth_in_use() (pth_cancel != NULL)
-
-# else
-
-#  define pth_in_use() 1
-
-# endif
-
-/* -------------------------- gl_lock_t datatype -------------------------- */
-
-typedef pth_mutex_t gl_lock_t;
-# define gl_lock_define(STORAGECLASS, NAME) \
-    STORAGECLASS pth_mutex_t NAME;
-# define gl_lock_define_initialized(STORAGECLASS, NAME) \
-    STORAGECLASS pth_mutex_t NAME = gl_lock_initializer;
-# define gl_lock_initializer \
-    PTH_MUTEX_INIT
-# define glthread_lock_init(LOCK) \
-    (pth_in_use () && !pth_mutex_init (LOCK) ? errno : 0)
-# define glthread_lock_lock(LOCK) \
-    (pth_in_use () && !pth_mutex_acquire (LOCK, 0, NULL) ? errno : 0)
-# define glthread_lock_unlock(LOCK) \
-    (pth_in_use () && !pth_mutex_release (LOCK) ? errno : 0)
-# define glthread_lock_destroy(LOCK) \
-    ((void)(LOCK), 0)
-
-/* ------------------------- gl_rwlock_t datatype ------------------------- */
-
-typedef pth_rwlock_t gl_rwlock_t;
-#  define gl_rwlock_define(STORAGECLASS, NAME) \
-     STORAGECLASS pth_rwlock_t NAME;
-#  define gl_rwlock_define_initialized(STORAGECLASS, NAME) \
-     STORAGECLASS pth_rwlock_t NAME = gl_rwlock_initializer;
-#  define gl_rwlock_initializer \
-     PTH_RWLOCK_INIT
-#  define glthread_rwlock_init(LOCK) \
-     (pth_in_use () && !pth_rwlock_init (LOCK) ? errno : 0)
-#  define glthread_rwlock_rdlock(LOCK) \
-     (pth_in_use () && !pth_rwlock_acquire (LOCK, PTH_RWLOCK_RD, 0, NULL) ? errno : 0)
-#  define glthread_rwlock_wrlock(LOCK) \
-     (pth_in_use () && !pth_rwlock_acquire (LOCK, PTH_RWLOCK_RW, 0, NULL) ? errno : 0)
-#  define glthread_rwlock_unlock(LOCK) \
-     (pth_in_use () && !pth_rwlock_release (LOCK) ? errno : 0)
-#  define glthread_rwlock_destroy(LOCK) \
-     ((void)(LOCK), 0)
-
-/* --------------------- gl_recursive_lock_t datatype --------------------- */
-
-/* In Pth, mutexes are recursive by default.  */
-typedef pth_mutex_t gl_recursive_lock_t;
-#  define gl_recursive_lock_define(STORAGECLASS, NAME) \
-     STORAGECLASS pth_mutex_t NAME;
-#  define gl_recursive_lock_define_initialized(STORAGECLASS, NAME) \
-     STORAGECLASS pth_mutex_t NAME = gl_recursive_lock_initializer;
-#  define gl_recursive_lock_initializer \
-     PTH_MUTEX_INIT
-#  define glthread_recursive_lock_init(LOCK) \
-     (pth_in_use () && !pth_mutex_init (LOCK) ? errno : 0)
-#  define glthread_recursive_lock_lock(LOCK) \
-     (pth_in_use () && !pth_mutex_acquire (LOCK, 0, NULL) ? errno : 0)
-#  define glthread_recursive_lock_unlock(LOCK) \
-     (pth_in_use () && !pth_mutex_release (LOCK) ? errno : 0)
-#  define glthread_recursive_lock_destroy(LOCK) \
-     ((void)(LOCK), 0)
-
-/* -------------------------- gl_once_t datatype -------------------------- */
-
-typedef pth_once_t gl_once_t;
-# define gl_once_define(STORAGECLASS, NAME) \
-    STORAGECLASS pth_once_t NAME = PTH_ONCE_INIT;
-# define glthread_once(ONCE_CONTROL, INITFUNCTION) \
-    (pth_in_use ()                                                             \
-     ? glthread_once_multithreaded (ONCE_CONTROL, INITFUNCTION)                \
-     : (glthread_once_singlethreaded (ONCE_CONTROL) ? (INITFUNCTION (), 0) : 0))
-extern int glthread_once_multithreaded (pth_once_t *once_control, void (*initfunction) (void));
-extern int glthread_once_singlethreaded (pth_once_t *once_control);
-
-# ifdef __cplusplus
-}
-# endif
-
-#endif
-
-/* ========================================================================= */
-
-#if USE_SOLARIS_THREADS
-
-/* Use the old Solaris threads library.  */
-
-# include <thread.h>
-# include <synch.h>
-
-# ifdef __cplusplus
-extern "C" {
-# endif
-
-# if USE_SOLARIS_THREADS_WEAK
-
-/* Use weak references to the old Solaris threads library.  */
-
-#  pragma weak mutex_init
-#  pragma weak mutex_lock
-#  pragma weak mutex_unlock
-#  pragma weak mutex_destroy
-#  pragma weak rwlock_init
-#  pragma weak rw_rdlock
-#  pragma weak rw_wrlock
-#  pragma weak rw_unlock
-#  pragma weak rwlock_destroy
-#  pragma weak thr_self
-
-#  pragma weak thr_suspend
-#  define thread_in_use() (thr_suspend != NULL)
-
-# else
-
-#  define thread_in_use() 1
-
-# endif
-
-/* -------------------------- gl_lock_t datatype -------------------------- */
-
-typedef mutex_t gl_lock_t;
-# define gl_lock_define(STORAGECLASS, NAME) \
-    STORAGECLASS mutex_t NAME;
-# define gl_lock_define_initialized(STORAGECLASS, NAME) \
-    STORAGECLASS mutex_t NAME = gl_lock_initializer;
-# define gl_lock_initializer \
-    DEFAULTMUTEX
-# define glthread_lock_init(LOCK) \
-    (thread_in_use () ? mutex_init (LOCK, USYNC_THREAD, NULL) : 0)
-# define glthread_lock_lock(LOCK) \
-    (thread_in_use () ? mutex_lock (LOCK) : 0)
-# define glthread_lock_unlock(LOCK) \
-    (thread_in_use () ? mutex_unlock (LOCK) : 0)
-# define glthread_lock_destroy(LOCK) \
-    (thread_in_use () ? mutex_destroy (LOCK) : 0)
-
-/* ------------------------- gl_rwlock_t datatype ------------------------- */
-
-typedef rwlock_t gl_rwlock_t;
-# define gl_rwlock_define(STORAGECLASS, NAME) \
-    STORAGECLASS rwlock_t NAME;
-# define gl_rwlock_define_initialized(STORAGECLASS, NAME) \
-    STORAGECLASS rwlock_t NAME = gl_rwlock_initializer;
-# define gl_rwlock_initializer \
-    DEFAULTRWLOCK
-# define glthread_rwlock_init(LOCK) \
-    (thread_in_use () ? rwlock_init (LOCK, USYNC_THREAD, NULL) : 0)
-# define glthread_rwlock_rdlock(LOCK) \
-    (thread_in_use () ? rw_rdlock (LOCK) : 0)
-# define glthread_rwlock_wrlock(LOCK) \
-    (thread_in_use () ? rw_wrlock (LOCK) : 0)
-# define glthread_rwlock_unlock(LOCK) \
-    (thread_in_use () ? rw_unlock (LOCK) : 0)
-# define glthread_rwlock_destroy(LOCK) \
-    (thread_in_use () ? rwlock_destroy (LOCK) : 0)
-
-/* --------------------- gl_recursive_lock_t datatype --------------------- */
-
-/* Old Solaris threads did not have recursive locks.
-   We have to implement them ourselves.  */
-
-typedef struct
-        {
-          mutex_t mutex;
-          thread_t owner;
-          unsigned long depth;
-        }
-        gl_recursive_lock_t;
-# define gl_recursive_lock_define(STORAGECLASS, NAME) \
-    STORAGECLASS gl_recursive_lock_t NAME;
-# define gl_recursive_lock_define_initialized(STORAGECLASS, NAME) \
-    STORAGECLASS gl_recursive_lock_t NAME = gl_recursive_lock_initializer;
-# define gl_recursive_lock_initializer \
-    { DEFAULTMUTEX, (thread_t) 0, 0 }
-# define glthread_recursive_lock_init(LOCK) \
-    (thread_in_use () ? glthread_recursive_lock_init_multithreaded (LOCK) : 0)
-# define glthread_recursive_lock_lock(LOCK) \
-    (thread_in_use () ? glthread_recursive_lock_lock_multithreaded (LOCK) : 0)
-# define glthread_recursive_lock_unlock(LOCK) \
-    (thread_in_use () ? glthread_recursive_lock_unlock_multithreaded (LOCK) : 0)
-# define glthread_recursive_lock_destroy(LOCK) \
-    (thread_in_use () ? glthread_recursive_lock_destroy_multithreaded (LOCK) : 0)
-extern int glthread_recursive_lock_init_multithreaded (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_lock_multithreaded (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_unlock_multithreaded (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_destroy_multithreaded (gl_recursive_lock_t *lock);
-
-/* -------------------------- gl_once_t datatype -------------------------- */
-
-typedef struct
-        {
-          volatile int inited;
-          mutex_t mutex;
-        }
-        gl_once_t;
-# define gl_once_define(STORAGECLASS, NAME) \
-    STORAGECLASS gl_once_t NAME = { 0, DEFAULTMUTEX };
-# define glthread_once(ONCE_CONTROL, INITFUNCTION) \
-    (thread_in_use ()                                                          \
-     ? glthread_once_multithreaded (ONCE_CONTROL, INITFUNCTION)                \
-     : (glthread_once_singlethreaded (ONCE_CONTROL) ? (INITFUNCTION (), 0) : 0))
-extern int glthread_once_multithreaded (gl_once_t *once_control, void (*initfunction) (void));
-extern int glthread_once_singlethreaded (gl_once_t *once_control);
-
-# ifdef __cplusplus
-}
-# endif
-
-#endif
-
-/* ========================================================================= */
-
-#if USE_WIN32_THREADS
-
-# include <windows.h>
-
-# ifdef __cplusplus
-extern "C" {
-# endif
-
-/* We can use CRITICAL_SECTION directly, rather than the Win32 Event, Mutex,
-   Semaphore types, because
-     - we need only to synchronize inside a single process (address space),
-       not inter-process locking,
-     - we don't need to support trylock operations.  (TryEnterCriticalSection
-       does not work on Windows 95/98/ME.  Packages that need trylock usually
-       define their own mutex type.)  */
-
-/* There is no way to statically initialize a CRITICAL_SECTION.  It needs
-   to be done lazily, once only.  For this we need spinlocks.  */
-
-typedef struct { volatile int done; volatile long started; } gl_spinlock_t;
-
-/* -------------------------- gl_lock_t datatype -------------------------- */
-
-typedef struct
-        {
-          gl_spinlock_t guard; /* protects the initialization */
-          CRITICAL_SECTION lock;
-        }
-        gl_lock_t;
-# define gl_lock_define(STORAGECLASS, NAME) \
-    STORAGECLASS gl_lock_t NAME;
-# define gl_lock_define_initialized(STORAGECLASS, NAME) \
-    STORAGECLASS gl_lock_t NAME = gl_lock_initializer;
-# define gl_lock_initializer \
-    { { 0, -1 } }
-# define glthread_lock_init(LOCK) \
-    (glthread_lock_init_func (LOCK), 0)
-# define glthread_lock_lock(LOCK) \
-    glthread_lock_lock_func (LOCK)
-# define glthread_lock_unlock(LOCK) \
-    glthread_lock_unlock_func (LOCK)
-# define glthread_lock_destroy(LOCK) \
-    glthread_lock_destroy_func (LOCK)
-extern void glthread_lock_init_func (gl_lock_t *lock);
-extern int glthread_lock_lock_func (gl_lock_t *lock);
-extern int glthread_lock_unlock_func (gl_lock_t *lock);
-extern int glthread_lock_destroy_func (gl_lock_t *lock);
-
-/* ------------------------- gl_rwlock_t datatype ------------------------- */
-
-/* It is impossible to implement read-write locks using plain locks, without
-   introducing an extra thread dedicated to managing read-write locks.
-   Therefore here we need to use the low-level Event type.  */
-
-typedef struct
-        {
-          HANDLE *array; /* array of waiting threads, each represented by an event */
-          unsigned int count; /* number of waiting threads */
-          unsigned int alloc; /* length of allocated array */
-          unsigned int offset; /* index of first waiting thread in array */
-        }
-        gl_carray_waitqueue_t;
-typedef struct
-        {
-          gl_spinlock_t guard; /* protects the initialization */
-          CRITICAL_SECTION lock; /* protects the remaining fields */
-          gl_carray_waitqueue_t waiting_readers; /* waiting readers */
-          gl_carray_waitqueue_t waiting_writers; /* waiting writers */
-          int runcount; /* number of readers running, or -1 when a writer runs */
-        }
-        gl_rwlock_t;
-# define gl_rwlock_define(STORAGECLASS, NAME) \
-    STORAGECLASS gl_rwlock_t NAME;
-# define gl_rwlock_define_initialized(STORAGECLASS, NAME) \
-    STORAGECLASS gl_rwlock_t NAME = gl_rwlock_initializer;
-# define gl_rwlock_initializer \
-    { { 0, -1 } }
-# define glthread_rwlock_init(LOCK) \
-    (glthread_rwlock_init_func (LOCK), 0)
-# define glthread_rwlock_rdlock(LOCK) \
-    glthread_rwlock_rdlock_func (LOCK)
-# define glthread_rwlock_wrlock(LOCK) \
-    glthread_rwlock_wrlock_func (LOCK)
-# define glthread_rwlock_unlock(LOCK) \
-    glthread_rwlock_unlock_func (LOCK)
-# define glthread_rwlock_destroy(LOCK) \
-    glthread_rwlock_destroy_func (LOCK)
-extern void glthread_rwlock_init_func (gl_rwlock_t *lock);
-extern int glthread_rwlock_rdlock_func (gl_rwlock_t *lock);
-extern int glthread_rwlock_wrlock_func (gl_rwlock_t *lock);
-extern int glthread_rwlock_unlock_func (gl_rwlock_t *lock);
-extern int glthread_rwlock_destroy_func (gl_rwlock_t *lock);
-
-/* --------------------- gl_recursive_lock_t datatype --------------------- */
-
-/* The Win32 documentation says that CRITICAL_SECTION already implements a
-   recursive lock.  But we need not rely on it: It's easy to implement a
-   recursive lock without this assumption.  */
-
-typedef struct
-        {
-          gl_spinlock_t guard; /* protects the initialization */
-          DWORD owner;
-          unsigned long depth;
-          CRITICAL_SECTION lock;
-        }
-        gl_recursive_lock_t;
-# define gl_recursive_lock_define(STORAGECLASS, NAME) \
-    STORAGECLASS gl_recursive_lock_t NAME;
-# define gl_recursive_lock_define_initialized(STORAGECLASS, NAME) \
-    STORAGECLASS gl_recursive_lock_t NAME = gl_recursive_lock_initializer;
-# define gl_recursive_lock_initializer \
-    { { 0, -1 }, 0, 0 }
-# define glthread_recursive_lock_init(LOCK) \
-    (glthread_recursive_lock_init_func (LOCK), 0)
-# define glthread_recursive_lock_lock(LOCK) \
-    glthread_recursive_lock_lock_func (LOCK)
-# define glthread_recursive_lock_unlock(LOCK) \
-    glthread_recursive_lock_unlock_func (LOCK)
-# define glthread_recursive_lock_destroy(LOCK) \
-    glthread_recursive_lock_destroy_func (LOCK)
-extern void glthread_recursive_lock_init_func (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_lock_func (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_unlock_func (gl_recursive_lock_t *lock);
-extern int glthread_recursive_lock_destroy_func (gl_recursive_lock_t *lock);
-
-/* -------------------------- gl_once_t datatype -------------------------- */
-
-typedef struct
-        {
-          volatile int inited;
-          volatile long started;
-          CRITICAL_SECTION lock;
-        }
-        gl_once_t;
-# define gl_once_define(STORAGECLASS, NAME) \
-    STORAGECLASS gl_once_t NAME = { -1, -1 };
-# define glthread_once(ONCE_CONTROL, INITFUNCTION) \
-    (glthread_once_func (ONCE_CONTROL, INITFUNCTION), 0)
-extern void glthread_once_func (gl_once_t *once_control, void (*initfunction) (void));
-
-# ifdef __cplusplus
-}
-# endif
-
-#endif
-
-/* ========================================================================= */
-
-#if !(USE_POSIX_THREADS || USE_PTH_THREADS || USE_SOLARIS_THREADS || USE_WIN32_THREADS)
-
-/* Provide dummy implementation if threads are not supported.  */
-
-/* -------------------------- gl_lock_t datatype -------------------------- */
-
-typedef int gl_lock_t;
-# define gl_lock_define(STORAGECLASS, NAME)
-# define gl_lock_define_initialized(STORAGECLASS, NAME)
-# define glthread_lock_init(NAME) 0
-# define glthread_lock_lock(NAME) 0
-# define glthread_lock_unlock(NAME) 0
-# define glthread_lock_destroy(NAME) 0
-
-/* ------------------------- gl_rwlock_t datatype ------------------------- */
-
-typedef int gl_rwlock_t;
-# define gl_rwlock_define(STORAGECLASS, NAME)
-# define gl_rwlock_define_initialized(STORAGECLASS, NAME)
-# define glthread_rwlock_init(NAME) 0
-# define glthread_rwlock_rdlock(NAME) 0
-# define glthread_rwlock_wrlock(NAME) 0
-# define glthread_rwlock_unlock(NAME) 0
-# define glthread_rwlock_destroy(NAME) 0
-
-/* --------------------- gl_recursive_lock_t datatype --------------------- */
-
-typedef int gl_recursive_lock_t;
-# define gl_recursive_lock_define(STORAGECLASS, NAME)
-# define gl_recursive_lock_define_initialized(STORAGECLASS, NAME)
-# define glthread_recursive_lock_init(NAME) 0
-# define glthread_recursive_lock_lock(NAME) 0
-# define glthread_recursive_lock_unlock(NAME) 0
-# define glthread_recursive_lock_destroy(NAME) 0
-
-/* -------------------------- gl_once_t datatype -------------------------- */
-
-typedef int gl_once_t;
-# define gl_once_define(STORAGECLASS, NAME) \
-    STORAGECLASS gl_once_t NAME = 0;
-# define glthread_once(ONCE_CONTROL, INITFUNCTION) \
-    (*(ONCE_CONTROL) == 0 ? (*(ONCE_CONTROL) = ~ 0, INITFUNCTION (), 0) : 0)
-
-#endif
-
-/* ========================================================================= */
-
-/* Macros with built-in error handling.  */
-
-/* -------------------------- gl_lock_t datatype -------------------------- */
-
-#define gl_lock_init(NAME) \
-   do                                  \
-     {                                 \
-       if (glthread_lock_init (&NAME)) \
-         abort ();                     \
-     }                                 \
-   while (0)
-#define gl_lock_lock(NAME) \
-   do                                  \
-     {                                 \
-       if (glthread_lock_lock (&NAME)) \
-         abort ();                     \
-     }                                 \
-   while (0)
-#define gl_lock_unlock(NAME) \
-   do                                    \
-     {                                   \
-       if (glthread_lock_unlock (&NAME)) \
-         abort ();                       \
-     }                                   \
-   while (0)
-#define gl_lock_destroy(NAME) \
-   do                                     \
-     {                                    \
-       if (glthread_lock_destroy (&NAME)) \
-         abort ();                        \
-     }                                    \
-   while (0)
-
-/* ------------------------- gl_rwlock_t datatype ------------------------- */
-
-#define gl_rwlock_init(NAME) \
-   do                                    \
-     {                                   \
-       if (glthread_rwlock_init (&NAME)) \
-         abort ();                       \
-     }                                   \
-   while (0)
-#define gl_rwlock_rdlock(NAME) \
-   do                                      \
-     {                                     \
-       if (glthread_rwlock_rdlock (&NAME)) \
-         abort ();                         \
-     }                                     \
-   while (0)
-#define gl_rwlock_wrlock(NAME) \
-   do                                      \
-     {                                     \
-       if (glthread_rwlock_wrlock (&NAME)) \
-         abort ();                         \
-     }                                     \
-   while (0)
-#define gl_rwlock_unlock(NAME) \
-   do                                      \
-     {                                     \
-       if (glthread_rwlock_unlock (&NAME)) \
-         abort ();                         \
-     }                                     \
-   while (0)
-#define gl_rwlock_destroy(NAME) \
-   do                                       \
-     {                                      \
-       if (glthread_rwlock_destroy (&NAME)) \
-         abort ();                          \
-     }                                      \
-   while (0)
-
-/* --------------------- gl_recursive_lock_t datatype --------------------- */
-
-#define gl_recursive_lock_init(NAME) \
-   do                                            \
-     {                                           \
-       if (glthread_recursive_lock_init (&NAME)) \
-         abort ();                               \
-     }                                           \
-   while (0)
-#define gl_recursive_lock_lock(NAME) \
-   do                                            \
-     {                                           \
-       if (glthread_recursive_lock_lock (&NAME)) \
-         abort ();                               \
-     }                                           \
-   while (0)
-#define gl_recursive_lock_unlock(NAME) \
-   do                                              \
-     {                                             \
-       if (glthread_recursive_lock_unlock (&NAME)) \
-         abort ();                                 \
-     }                                             \
-   while (0)
-#define gl_recursive_lock_destroy(NAME) \
-   do                                               \
-     {                                              \
-       if (glthread_recursive_lock_destroy (&NAME)) \
-         abort ();                                  \
-     }                                              \
-   while (0)
-
-/* -------------------------- gl_once_t datatype -------------------------- */
-
-#define gl_once(NAME, INITFUNCTION) \
-   do                                           \
-     {                                          \
-       if (glthread_once (&NAME, INITFUNCTION)) \
-         abort ();                              \
-     }                                          \
-   while (0)
-
-/* ========================================================================= */
-
-#endif /* _LOCK_H */
diff -urpN mc-4.8.23/intl/log.c mc-4.8.24/intl/log.c
--- mc-4.8.23/intl/log.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/log.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,128 +0,0 @@
-/* Log file output.
-   Copyright (C) 2003, 2005, 2009 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Written by Bruno Haible <bruno@clisp.org>.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-/* Handle multi-threaded applications.  */
-#ifdef _LIBC
-# include <bits/libc-lock.h>
-#else
-# include "lock.h"
-#endif
-
-/* Separator between msgctxt and msgid in .mo files.  */
-#define MSGCTXT_SEPARATOR '\004'  /* EOT */
-
-/* Print an ASCII string with quotes and escape sequences where needed.  */
-static void
-print_escaped (FILE *stream, const char *str, const char *str_end)
-{
-  putc ('"', stream);
-  for (; str != str_end; str++)
-    if (*str == '\n')
-      {
-        fputs ("\\n\"", stream);
-        if (str + 1 == str_end)
-          return;
-        fputs ("\n\"", stream);
-      }
-    else
-      {
-        if (*str == '"' || *str == '\\')
-          putc ('\\', stream);
-        putc (*str, stream);
-      }
-  putc ('"', stream);
-}
-
-static char *last_logfilename = NULL;
-static FILE *last_logfile = NULL;
-__libc_lock_define_initialized (static, lock)
-
-static inline void
-_nl_log_untranslated_locked (const char *logfilename, const char *domainname,
-                             const char *msgid1, const char *msgid2, int plural)
-{
-  FILE *logfile;
-  const char *separator;
-
-  /* Can we reuse the last opened logfile?  */
-  if (last_logfilename == NULL || strcmp (logfilename, last_logfilename) != 0)
-    {
-      /* Close the last used logfile.  */
-      if (last_logfilename != NULL)
-        {
-          if (last_logfile != NULL)
-            {
-              fclose (last_logfile);
-              last_logfile = NULL;
-            }
-          free (last_logfilename);
-          last_logfilename = NULL;
-        }
-      /* Open the logfile.  */
-      last_logfilename = (char *) malloc (strlen (logfilename) + 1);
-      if (last_logfilename == NULL)
-        return;
-      strcpy (last_logfilename, logfilename);
-      last_logfile = fopen (logfilename, "a");
-      if (last_logfile == NULL)
-        return;
-    }
-  logfile = last_logfile;
-
-  fprintf (logfile, "domain ");
-  print_escaped (logfile, domainname, domainname + strlen (domainname));
-  separator = strchr (msgid1, MSGCTXT_SEPARATOR);
-  if (separator != NULL)
-    {
-      /* The part before the MSGCTXT_SEPARATOR is the msgctxt.  */
-      fprintf (logfile, "\nmsgctxt ");
-      print_escaped (logfile, msgid1, separator);
-      msgid1 = separator + 1;
-    }
-  fprintf (logfile, "\nmsgid ");
-  print_escaped (logfile, msgid1, msgid1 + strlen (msgid1));
-  if (plural)
-    {
-      fprintf (logfile, "\nmsgid_plural ");
-      print_escaped (logfile, msgid2, msgid2 + strlen (msgid2));
-      fprintf (logfile, "\nmsgstr[0] \"\"\n");
-    }
-  else
-    fprintf (logfile, "\nmsgstr \"\"\n");
-  putc ('\n', logfile);
-}
-
-/* Add to the log file an entry denoting a failed translation.  */
-void
-_nl_log_untranslated (const char *logfilename, const char *domainname,
-                      const char *msgid1, const char *msgid2, int plural)
-{
-  __libc_lock_lock (lock);
-  _nl_log_untranslated_locked (logfilename, domainname, msgid1, msgid2, plural);
-  __libc_lock_unlock (lock);
-}
diff -urpN mc-4.8.23/intl/ngettext.c mc-4.8.24/intl/ngettext.c
--- mc-4.8.23/intl/ngettext.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/ngettext.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,65 +0,0 @@
-/* Implementation of ngettext(3) function.
-   Copyright (C) 1995, 1997, 2000-2003 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#ifdef _LIBC
-# define __need_NULL
-# include <stddef.h>
-#else
-# include <stdlib.h>		/* Just for NULL.  */
-#endif
-
-#include "gettextP.h"
-#ifdef _LIBC
-# include <libintl.h>
-#else
-# include "libgnuintl.h"
-#endif
-
-#include <locale.h>
-
-/* @@ end of prolog @@ */
-
-/* Names for the libintl functions are a problem.  They must not clash
-   with existing names and they should follow ANSI C.  But this source
-   code is also used in GNU C Library where the names have a __
-   prefix.  So we have to make a difference here.  */
-#ifdef _LIBC
-# define NGETTEXT __ngettext
-# define DCNGETTEXT __dcngettext
-#else
-# define NGETTEXT libintl_ngettext
-# define DCNGETTEXT libintl_dcngettext
-#endif
-
-/* Look up MSGID in the current default message catalog for the current
-   LC_MESSAGES locale.  If not found, returns MSGID itself (the default
-   text).  */
-char *
-NGETTEXT (const char *msgid1, const char *msgid2, unsigned long int n)
-{
-  return DCNGETTEXT (NULL, msgid1, msgid2, n, LC_MESSAGES);
-}
-
-#ifdef _LIBC
-/* Alias for function name in GNU C Library.  */
-weak_alias (__ngettext, ngettext);
-#endif
diff -urpN mc-4.8.23/intl/os2compat.c mc-4.8.24/intl/os2compat.c
--- mc-4.8.23/intl/os2compat.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/os2compat.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,98 +0,0 @@
-/* OS/2 compatibility functions.
-   Copyright (C) 2001-2002 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#define OS2_AWARE
-#ifdef HAVE_CONFIG_H
-#include <config.h>
-#endif
-
-#include <stdlib.h>
-#include <string.h>
-#include <sys/param.h>
-
-/* A version of getenv() that works from DLLs */
-extern unsigned long DosScanEnv (const unsigned char *pszName, unsigned char **ppszValue);
-
-char *
-_nl_getenv (const char *name)
-{
-  unsigned char *value;
-  if (DosScanEnv (name, &value))
-    return NULL;
-  else
-    return value;
-}
-
-/* A fixed size buffer.  */
-char libintl_nl_default_dirname[MAXPATHLEN+1];
-
-char *_nlos2_libdir = NULL;
-char *_nlos2_localealiaspath = NULL;
-char *_nlos2_localedir = NULL;
-
-static __attribute__((constructor)) void
-nlos2_initialize ()
-{
-  char *root = getenv ("UNIXROOT");
-  char *gnulocaledir = getenv ("GNULOCALEDIR");
-
-  _nlos2_libdir = gnulocaledir;
-  if (!_nlos2_libdir)
-    {
-      if (root)
-        {
-          size_t sl = strlen (root);
-          _nlos2_libdir = (char *) malloc (sl + strlen (LIBDIR) + 1);
-          memcpy (_nlos2_libdir, root, sl);
-          memcpy (_nlos2_libdir + sl, LIBDIR, strlen (LIBDIR) + 1);
-        }
-      else
-        _nlos2_libdir = LIBDIR;
-    }
-
-  _nlos2_localealiaspath = gnulocaledir;
-  if (!_nlos2_localealiaspath)
-    {
-      if (root)
-        {
-          size_t sl = strlen (root);
-          _nlos2_localealiaspath = (char *) malloc (sl + strlen (LOCALE_ALIAS_PATH) + 1);
-          memcpy (_nlos2_localealiaspath, root, sl);
-          memcpy (_nlos2_localealiaspath + sl, LOCALE_ALIAS_PATH, strlen (LOCALE_ALIAS_PATH) + 1);
-        }
-     else
-        _nlos2_localealiaspath = LOCALE_ALIAS_PATH;
-    }
-
-  _nlos2_localedir = gnulocaledir;
-  if (!_nlos2_localedir)
-    {
-      if (root)
-        {
-          size_t sl = strlen (root);
-          _nlos2_localedir = (char *) malloc (sl + strlen (LOCALEDIR) + 1);
-          memcpy (_nlos2_localedir, root, sl);
-          memcpy (_nlos2_localedir + sl, LOCALEDIR, strlen (LOCALEDIR) + 1);
-        }
-      else
-        _nlos2_localedir = LOCALEDIR;
-    }
-
-  if (strlen (_nlos2_localedir) <= MAXPATHLEN)
-    strcpy (libintl_nl_default_dirname, _nlos2_localedir);
-}
diff -urpN mc-4.8.23/intl/os2compat.h mc-4.8.24/intl/os2compat.h
--- mc-4.8.23/intl/os2compat.h	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/os2compat.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,46 +0,0 @@
-/* OS/2 compatibility defines.
-   This file is intended to be included from config.h
-   Copyright (C) 2001-2002 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* When included from os2compat.h we need all the original definitions */
-#ifndef OS2_AWARE
-
-#undef LIBDIR
-#define LIBDIR _nlos2_libdir
-extern char *_nlos2_libdir;
-
-#undef LOCALEDIR
-#define LOCALEDIR _nlos2_localedir
-extern char *_nlos2_localedir;
-
-#undef LOCALE_ALIAS_PATH
-#define LOCALE_ALIAS_PATH _nlos2_localealiaspath
-extern char *_nlos2_localealiaspath;
-
-#endif
-
-#undef HAVE_STRCASECMP
-#define HAVE_STRCASECMP 1
-#define strcasecmp stricmp
-#define strncasecmp strnicmp
-
-/* We have our own getenv() which works even if library is compiled as DLL */
-#define getenv _nl_getenv
-
-/* Older versions of gettext used -1 as the value of LC_MESSAGES */
-#define LC_MESSAGES_COMPAT (-1)
diff -urpN mc-4.8.23/intl/osdep.c mc-4.8.24/intl/osdep.c
--- mc-4.8.23/intl/osdep.c	2019-06-22 15:44:01.000000000 +0400
+++ mc-4.8.24/intl/osdep.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,26 +0,0 @@
-/* OS dependent parts of libintl.
-   Copyright (C) 2001-2002, 2006 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#if defined __CYGWIN__
-# include "intl-exports.c"
-#elif defined __EMX__
-# include "os2compat.c"
-#else
-/* Avoid AIX compiler warning.  */
-typedef int dummy;
-#endif
diff -urpN mc-4.8.23/intl/plural-exp.c mc-4.8.24/intl/plural-exp.c
--- mc-4.8.23/intl/plural-exp.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/plural-exp.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,155 +0,0 @@
-/* Expression parsing for plural form selection.
-   Copyright (C) 2000-2001, 2003, 2005-2007 Free Software Foundation, Inc.
-   Written by Ulrich Drepper <drepper@cygnus.com>, 2000.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <ctype.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include "plural-exp.h"
-
-#if (defined __GNUC__ && !(__APPLE_CC__ > 1) && !defined __cplusplus) \
-    || (defined __STDC_VERSION__ && __STDC_VERSION__ >= 199901L)
-
-/* These structs are the constant expression for the germanic plural
-   form determination.  It represents the expression  "n != 1".  */
-static const struct expression plvar =
-{
-  .nargs = 0,
-  .operation = var,
-};
-static const struct expression plone =
-{
-  .nargs = 0,
-  .operation = num,
-  .val =
-  {
-    .num = 1
-  }
-};
-struct expression GERMANIC_PLURAL =
-{
-  .nargs = 2,
-  .operation = not_equal,
-  .val =
-  {
-    .args =
-    {
-      [0] = (struct expression *) &plvar,
-      [1] = (struct expression *) &plone
-    }
-  }
-};
-
-# define INIT_GERMANIC_PLURAL()
-
-#else
-
-/* For compilers without support for ISO C 99 struct/union initializers:
-   Initialization at run-time.  */
-
-static struct expression plvar;
-static struct expression plone;
-struct expression GERMANIC_PLURAL;
-
-static void
-init_germanic_plural ()
-{
-  if (plone.val.num == 0)
-    {
-      plvar.nargs = 0;
-      plvar.operation = var;
-
-      plone.nargs = 0;
-      plone.operation = num;
-      plone.val.num = 1;
-
-      GERMANIC_PLURAL.nargs = 2;
-      GERMANIC_PLURAL.operation = not_equal;
-      GERMANIC_PLURAL.val.args[0] = &plvar;
-      GERMANIC_PLURAL.val.args[1] = &plone;
-    }
-}
-
-# define INIT_GERMANIC_PLURAL() init_germanic_plural ()
-
-#endif
-
-void
-internal_function
-EXTRACT_PLURAL_EXPRESSION (const char *nullentry,
-			   const struct expression **pluralp,
-			   unsigned long int *npluralsp)
-{
-  if (nullentry != NULL)
-    {
-      const char *plural;
-      const char *nplurals;
-
-      plural = strstr (nullentry, "plural=");
-      nplurals = strstr (nullentry, "nplurals=");
-      if (plural == NULL || nplurals == NULL)
-	goto no_plural;
-      else
-	{
-	  char *endp;
-	  unsigned long int n;
-	  struct parse_args args;
-
-	  /* First get the number.  */
-	  nplurals += 9;
-	  while (*nplurals != '\0' && isspace ((unsigned char) *nplurals))
-	    ++nplurals;
-	  if (!(*nplurals >= '0' && *nplurals <= '9'))
-	    goto no_plural;
-#if defined HAVE_STRTOUL || defined _LIBC
-	  n = strtoul (nplurals, &endp, 10);
-#else
-	  for (endp = nplurals, n = 0; *endp >= '0' && *endp <= '9'; endp++)
-	    n = n * 10 + (*endp - '0');
-#endif
-	  if (nplurals == endp)
-	    goto no_plural;
-	  *npluralsp = n;
-
-	  /* Due to the restrictions bison imposes onto the interface of the
-	     scanner function we have to put the input string and the result
-	     passed up from the parser into the same structure which address
-	     is passed down to the parser.  */
-	  plural += 7;
-	  args.cp = plural;
-	  if (PLURAL_PARSE (&args) != 0)
-	    goto no_plural;
-	  *pluralp = args.res;
-	}
-    }
-  else
-    {
-      /* By default we are using the Germanic form: singular form only
-         for `one', the plural form otherwise.  Yes, this is also what
-         English is using since English is a Germanic language.  */
-    no_plural:
-      INIT_GERMANIC_PLURAL ();
-      *pluralp = &GERMANIC_PLURAL;
-      *npluralsp = 2;
-    }
-}
diff -urpN mc-4.8.23/intl/plural-exp.h mc-4.8.24/intl/plural-exp.h
--- mc-4.8.23/intl/plural-exp.h	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/plural-exp.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,129 +0,0 @@
-/* Expression parsing and evaluation for plural form selection.
-   Copyright (C) 2000-2003, 2005-2007 Free Software Foundation, Inc.
-   Written by Ulrich Drepper <drepper@cygnus.com>, 2000.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _PLURAL_EXP_H
-#define _PLURAL_EXP_H
-
-#ifndef internal_function
-# define internal_function
-#endif
-
-#ifndef attribute_hidden
-# define attribute_hidden
-#endif
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-
-
-enum expression_operator
-{
-  /* Without arguments:  */
-  var,				/* The variable "n".  */
-  num,				/* Decimal number.  */
-  /* Unary operators:  */
-  lnot,				/* Logical NOT.  */
-  /* Binary operators:  */
-  mult,				/* Multiplication.  */
-  divide,			/* Division.  */
-  module,			/* Modulo operation.  */
-  plus,				/* Addition.  */
-  minus,			/* Subtraction.  */
-  less_than,			/* Comparison.  */
-  greater_than,			/* Comparison.  */
-  less_or_equal,		/* Comparison.  */
-  greater_or_equal,		/* Comparison.  */
-  equal,			/* Comparison for equality.  */
-  not_equal,			/* Comparison for inequality.  */
-  land,				/* Logical AND.  */
-  lor,				/* Logical OR.  */
-  /* Ternary operators:  */
-  qmop				/* Question mark operator.  */
-};
-
-/* This is the representation of the expressions to determine the
-   plural form.  */
-struct expression
-{
-  int nargs;			/* Number of arguments.  */
-  enum expression_operator operation;
-  union
-  {
-    unsigned long int num;	/* Number value for `num'.  */
-    struct expression *args[3];	/* Up to three arguments.  */
-  } val;
-};
-
-/* This is the data structure to pass information to the parser and get
-   the result in a thread-safe way.  */
-struct parse_args
-{
-  const char *cp;
-  struct expression *res;
-};
-
-
-/* Names for the libintl functions are a problem.  This source code is used
-   1. in the GNU C Library library,
-   2. in the GNU libintl library,
-   3. in the GNU gettext tools.
-   The function names in each situation must be different, to allow for
-   binary incompatible changes in 'struct expression'.  Furthermore,
-   1. in the GNU C Library library, the names have a __ prefix,
-   2.+3. in the GNU libintl library and in the GNU gettext tools, the names
-         must follow ANSI C and not start with __.
-   So we have to distinguish the three cases.  */
-#ifdef _LIBC
-# define FREE_EXPRESSION __gettext_free_exp
-# define PLURAL_PARSE __gettextparse
-# define GERMANIC_PLURAL __gettext_germanic_plural
-# define EXTRACT_PLURAL_EXPRESSION __gettext_extract_plural
-#elif defined (IN_LIBINTL)
-# define FREE_EXPRESSION libintl_gettext_free_exp
-# define PLURAL_PARSE libintl_gettextparse
-# define GERMANIC_PLURAL libintl_gettext_germanic_plural
-# define EXTRACT_PLURAL_EXPRESSION libintl_gettext_extract_plural
-#else
-# define FREE_EXPRESSION free_plural_expression
-# define PLURAL_PARSE parse_plural_expression
-# define GERMANIC_PLURAL germanic_plural
-# define EXTRACT_PLURAL_EXPRESSION extract_plural_expression
-#endif
-
-extern void FREE_EXPRESSION (struct expression *exp)
-     internal_function;
-extern int PLURAL_PARSE (void *arg);
-extern struct expression GERMANIC_PLURAL attribute_hidden;
-extern void EXTRACT_PLURAL_EXPRESSION (const char *nullentry,
-				       const struct expression **pluralp,
-				       unsigned long int *npluralsp)
-     internal_function;
-
-#if !defined (_LIBC) && !defined (IN_LIBINTL) && !defined (IN_LIBGLOCALE)
-extern unsigned long int plural_eval (const struct expression *pexp,
-				      unsigned long int n);
-#endif
-
-
-#ifdef __cplusplus
-}
-#endif
-
-#endif /* _PLURAL_EXP_H */
diff -urpN mc-4.8.23/intl/plural.c mc-4.8.24/intl/plural.c
--- mc-4.8.23/intl/plural.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/plural.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,1961 +0,0 @@
-/* A Bison parser, made by GNU Bison 2.3a.  */
-
-/* Skeleton implementation for Bison's Yacc-like parsers in C
-
-   Copyright (C) 1984, 1989, 1990, 2000, 2001, 2002, 2003, 2004, 2005, 2006
-   Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify
-   it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
-
-   You should have received a copy of the GNU General Public License
-   along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor,
-   Boston, MA 02110-1301, USA.  */
-
-/* As a special exception, you may create a larger work that contains
-   part or all of the Bison parser skeleton and distribute that work
-   under terms of your choice, so long as that work isn't itself a
-   parser generator using the skeleton or a modified version thereof
-   as a parser skeleton.  Alternatively, if you modify or redistribute
-   the parser skeleton itself, you may (at your option) remove this
-   special exception, which will cause the skeleton and the resulting
-   Bison output files to be licensed under the GNU General Public
-   License without this special exception.
-
-   This special exception was added by the Free Software Foundation in
-   version 2.2 of Bison.  */
-
-/* C LALR(1) parser skeleton written by Richard Stallman, by
-   simplifying the original so-called "semantic" parser.  */
-
-/* All symbols defined below should begin with yy or YY, to avoid
-   infringing on user name space.  This should be done even for local
-   variables, as they might otherwise be expanded by user macros.
-   There are some unavoidable exceptions within include files to
-   define necessary library symbols; they are noted "INFRINGES ON
-   USER NAME SPACE" below.  */
-
-/* Identify Bison output.  */
-#define YYBISON 1
-
-/* Bison version.  */
-#define YYBISON_VERSION "2.3a"
-
-/* Skeleton name.  */
-#define YYSKELETON_NAME "yacc.c"
-
-/* Pure parsers.  */
-#define YYPURE 1
-
-/* Using locations.  */
-#define YYLSP_NEEDED 0
-
-/* Substitute the variable and function names.  */
-#define yyparse __gettextparse
-#define yylex   __gettextlex
-#define yyerror __gettexterror
-#define yylval  __gettextlval
-#define yychar  __gettextchar
-#define yydebug __gettextdebug
-#define yynerrs __gettextnerrs
-
-
-/* Copy the first part of user declarations.  */
-/* Line 164 of yacc.c.  */
-#line 1 "plural.y"
-
-/* Expression parsing for plural form selection.
-   Copyright (C) 2000-2001, 2003, 2005-2006 Free Software Foundation, Inc.
-   Written by Ulrich Drepper <drepper@cygnus.com>, 2000.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* For bison < 2.0, the bison generated parser uses alloca.  AIX 3 forces us
-   to put this declaration at the beginning of the file.  The declaration in
-   bison's skeleton file comes too late.  This must come before <config.h>
-   because <config.h> may include arbitrary system headers.
-   This can go away once the AM_INTL_SUBDIR macro requires bison >= 2.0.  */
-#if defined _AIX && !defined __GNUC__
- #pragma alloca
-#endif
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <stddef.h>
-#include <stdlib.h>
-#include <string.h>
-#include "plural-exp.h"
-
-/* The main function generated by the parser is called __gettextparse,
-   but we want it to be called PLURAL_PARSE.  */
-#ifndef _LIBC
-# define __gettextparse PLURAL_PARSE
-#endif
-
-#define YYLEX_PARAM	&((struct parse_args *) arg)->cp
-#define YYPARSE_PARAM	arg
-
-
-/* Enabling traces.  */
-#ifndef YYDEBUG
-# define YYDEBUG 0
-#endif
-
-/* Enabling verbose error messages.  */
-#ifdef YYERROR_VERBOSE
-# undef YYERROR_VERBOSE
-# define YYERROR_VERBOSE 1
-#else
-# define YYERROR_VERBOSE 0
-#endif
-
-/* Enabling the token table.  */
-#ifndef YYTOKEN_TABLE
-# define YYTOKEN_TABLE 0
-#endif
-
-
-/* Tokens.  */
-#ifndef YYTOKENTYPE
-# define YYTOKENTYPE
-   /* Put the tokens into the symbol table, so that GDB and other debuggers
-      know about them.  */
-   enum yytokentype {
-     EQUOP2 = 258,
-     CMPOP2 = 259,
-     ADDOP2 = 260,
-     MULOP2 = 261,
-     NUMBER = 262
-   };
-#endif
-/* Tokens.  */
-#define EQUOP2 258
-#define CMPOP2 259
-#define ADDOP2 260
-#define MULOP2 261
-#define NUMBER 262
-
-
-
-
-#if ! defined YYSTYPE && ! defined YYSTYPE_IS_DECLARED
-typedef union YYSTYPE
-{/* Line 191 of yacc.c.  */
-#line 51 "plural.y"
-
-  unsigned long int num;
-  enum expression_operator op;
-  struct expression *exp;
-}
-/* Line 191 of yacc.c.  */
-#line 175 "plural.c"
-	YYSTYPE;
-# define YYSTYPE_IS_TRIVIAL 1
-# define yystype YYSTYPE /* obsolescent; will be withdrawn */
-# define YYSTYPE_IS_DECLARED 1
-#endif
-
-
-
-
-/* Copy the second part of user declarations.  */
-/* Line 221 of yacc.c.  */
-#line 57 "plural.y"
-
-/* Prototypes for local functions.  */
-static int yylex (YYSTYPE *lval, const char **pexp);
-static void yyerror (const char *str);
-
-/* Allocation of expressions.  */
-
-static struct expression *
-new_exp (int nargs, enum expression_operator op,
-	 struct expression * const *args)
-{
-  int i;
-  struct expression *newp;
-
-  /* If any of the argument could not be malloc'ed, just return NULL.  */
-  for (i = nargs - 1; i >= 0; i--)
-    if (args[i] == NULL)
-      goto fail;
-
-  /* Allocate a new expression.  */
-  newp = (struct expression *) malloc (sizeof (*newp));
-  if (newp != NULL)
-    {
-      newp->nargs = nargs;
-      newp->operation = op;
-      for (i = nargs - 1; i >= 0; i--)
-	newp->val.args[i] = args[i];
-      return newp;
-    }
-
- fail:
-  for (i = nargs - 1; i >= 0; i--)
-    FREE_EXPRESSION (args[i]);
-
-  return NULL;
-}
-
-static inline struct expression *
-new_exp_0 (enum expression_operator op)
-{
-  return new_exp (0, op, NULL);
-}
-
-static inline struct expression *
-new_exp_1 (enum expression_operator op, struct expression *right)
-{
-  struct expression *args[1];
-
-  args[0] = right;
-  return new_exp (1, op, args);
-}
-
-static struct expression *
-new_exp_2 (enum expression_operator op, struct expression *left,
-	   struct expression *right)
-{
-  struct expression *args[2];
-
-  args[0] = left;
-  args[1] = right;
-  return new_exp (2, op, args);
-}
-
-static inline struct expression *
-new_exp_3 (enum expression_operator op, struct expression *bexp,
-	   struct expression *tbranch, struct expression *fbranch)
-{
-  struct expression *args[3];
-
-  args[0] = bexp;
-  args[1] = tbranch;
-  args[2] = fbranch;
-  return new_exp (3, op, args);
-}
-
-
-/* Line 221 of yacc.c.  */
-#line 265 "plural.c"
-
-#ifdef short
-# undef short
-#endif
-
-#ifdef YYTYPE_UINT8
-typedef YYTYPE_UINT8 yytype_uint8;
-#else
-typedef unsigned char yytype_uint8;
-#endif
-
-#ifdef YYTYPE_INT8
-typedef YYTYPE_INT8 yytype_int8;
-#elif (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-typedef signed char yytype_int8;
-#else
-typedef short int yytype_int8;
-#endif
-
-#ifdef YYTYPE_UINT16
-typedef YYTYPE_UINT16 yytype_uint16;
-#else
-typedef unsigned short int yytype_uint16;
-#endif
-
-#ifdef YYTYPE_INT16
-typedef YYTYPE_INT16 yytype_int16;
-#else
-typedef short int yytype_int16;
-#endif
-
-#ifndef YYSIZE_T
-# ifdef __SIZE_TYPE__
-#  define YYSIZE_T __SIZE_TYPE__
-# elif defined size_t
-#  define YYSIZE_T size_t
-# elif ! defined YYSIZE_T && (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-#  include <stddef.h> /* INFRINGES ON USER NAME SPACE */
-#  define YYSIZE_T size_t
-# else
-#  define YYSIZE_T unsigned int
-# endif
-#endif
-
-#define YYSIZE_MAXIMUM ((YYSIZE_T) -1)
-
-#ifndef YY_
-# if YYENABLE_NLS
-#  if ENABLE_NLS
-#   include <libintl.h> /* INFRINGES ON USER NAME SPACE */
-#   define YY_(msgid) dgettext ("bison-runtime", msgid)
-#  endif
-# endif
-# ifndef YY_
-#  define YY_(msgid) msgid
-# endif
-#endif
-
-/* Suppress unused-variable warnings by "using" E.  */
-#if ! defined lint || defined __GNUC__
-# define YYUSE(e) ((void) (e))
-#else
-# define YYUSE(e) /* empty */
-#endif
-
-/* Identity function, used to suppress warnings about constant conditions.  */
-#ifndef lint
-# define YYID(n) (n)
-#else
-#if (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-static int
-YYID (int yyi)
-#else
-static int
-YYID (yyi)
-    int yyi;
-#endif
-{
-  return yyi;
-}
-#endif
-
-#if ! defined yyoverflow || YYERROR_VERBOSE
-
-/* The parser invokes alloca or malloc; define the necessary symbols.  */
-
-# ifdef YYSTACK_USE_ALLOCA
-#  if YYSTACK_USE_ALLOCA
-#   ifdef __GNUC__
-#    define YYSTACK_ALLOC __builtin_alloca
-#   elif defined __BUILTIN_VA_ARG_INCR
-#    include <alloca.h> /* INFRINGES ON USER NAME SPACE */
-#   elif defined _AIX
-#    define YYSTACK_ALLOC __alloca
-#   elif defined _MSC_VER
-#    include <malloc.h> /* INFRINGES ON USER NAME SPACE */
-#    define alloca _alloca
-#   else
-#    define YYSTACK_ALLOC alloca
-#    if ! defined _ALLOCA_H && ! defined _STDLIB_H && (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-#     include <stdlib.h> /* INFRINGES ON USER NAME SPACE */
-#     ifndef _STDLIB_H
-#      define _STDLIB_H 1
-#     endif
-#    endif
-#   endif
-#  endif
-# endif
-
-# ifdef YYSTACK_ALLOC
-   /* Pacify GCC's `empty if-body' warning.  */
-#  define YYSTACK_FREE(Ptr) do { /* empty */; } while (YYID (0))
-#  ifndef YYSTACK_ALLOC_MAXIMUM
-    /* The OS might guarantee only one guard page at the bottom of the stack,
-       and a page size can be as small as 4096 bytes.  So we cannot safely
-       invoke alloca (N) if N exceeds 4096.  Use a slightly smaller number
-       to allow for a few compiler-allocated temporary stack slots.  */
-#   define YYSTACK_ALLOC_MAXIMUM 4032 /* reasonable circa 2006 */
-#  endif
-# else
-#  define YYSTACK_ALLOC YYMALLOC
-#  define YYSTACK_FREE YYFREE
-#  ifndef YYSTACK_ALLOC_MAXIMUM
-#   define YYSTACK_ALLOC_MAXIMUM YYSIZE_MAXIMUM
-#  endif
-#  if (defined __cplusplus && ! defined _STDLIB_H \
-       && ! ((defined YYMALLOC || defined malloc) \
-	     && (defined YYFREE || defined free)))
-#   include <stdlib.h> /* INFRINGES ON USER NAME SPACE */
-#   ifndef _STDLIB_H
-#    define _STDLIB_H 1
-#   endif
-#  endif
-#  ifndef YYMALLOC
-#   define YYMALLOC malloc
-#   if ! defined malloc && ! defined _STDLIB_H && (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-void *malloc (YYSIZE_T); /* INFRINGES ON USER NAME SPACE */
-#   endif
-#  endif
-#  ifndef YYFREE
-#   define YYFREE free
-#   if ! defined free && ! defined _STDLIB_H && (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-void free (void *); /* INFRINGES ON USER NAME SPACE */
-#   endif
-#  endif
-# endif
-#endif /* ! defined yyoverflow || YYERROR_VERBOSE */
-
-
-#if (! defined yyoverflow \
-     && (! defined __cplusplus \
-	 || (defined YYSTYPE_IS_TRIVIAL && YYSTYPE_IS_TRIVIAL)))
-
-/* A type that is properly aligned for any stack member.  */
-union yyalloc
-{
-  yytype_int16 yyss;
-  YYSTYPE yyvs;
-  };
-
-/* The size of the maximum gap between one aligned stack and the next.  */
-# define YYSTACK_GAP_MAXIMUM (sizeof (union yyalloc) - 1)
-
-/* The size of an array large to enough to hold all stacks, each with
-   N elements.  */
-# define YYSTACK_BYTES(N) \
-     ((N) * (sizeof (yytype_int16) + sizeof (YYSTYPE)) \
-      + YYSTACK_GAP_MAXIMUM)
-
-/* Copy COUNT objects from FROM to TO.  The source and destination do
-   not overlap.  */
-# ifndef YYCOPY
-#  if defined __GNUC__ && 1 < __GNUC__
-#   define YYCOPY(To, From, Count) \
-      __builtin_memcpy (To, From, (Count) * sizeof (*(From)))
-#  else
-#   define YYCOPY(To, From, Count)		\
-      do					\
-	{					\
-	  YYSIZE_T yyi;				\
-	  for (yyi = 0; yyi < (Count); yyi++)	\
-	    (To)[yyi] = (From)[yyi];		\
-	}					\
-      while (YYID (0))
-#  endif
-# endif
-
-/* Relocate STACK from its old location to the new one.  The
-   local variables YYSIZE and YYSTACKSIZE give the old and new number of
-   elements in the stack, and YYPTR gives the new location of the
-   stack.  Advance YYPTR to a properly aligned location for the next
-   stack.  */
-# define YYSTACK_RELOCATE(Stack)					\
-    do									\
-      {									\
-	YYSIZE_T yynewbytes;						\
-	YYCOPY (&yyptr->Stack, Stack, yysize);				\
-	Stack = &yyptr->Stack;						\
-	yynewbytes = yystacksize * sizeof (*Stack) + YYSTACK_GAP_MAXIMUM; \
-	yyptr += yynewbytes / sizeof (*yyptr);				\
-      }									\
-    while (YYID (0))
-
-#endif
-
-/* YYFINAL -- State number of the termination state.  */
-#define YYFINAL  9
-/* YYLAST -- Last index in YYTABLE.  */
-#define YYLAST   54
-
-/* YYNTOKENS -- Number of terminals.  */
-#define YYNTOKENS  16
-/* YYNNTS -- Number of nonterminals.  */
-#define YYNNTS  3
-/* YYNRULES -- Number of rules.  */
-#define YYNRULES  13
-/* YYNRULES -- Number of states.  */
-#define YYNSTATES  27
-
-/* YYTRANSLATE(YYLEX) -- Bison symbol number corresponding to YYLEX.  */
-#define YYUNDEFTOK  2
-#define YYMAXUTOK   262
-
-#define YYTRANSLATE(YYX)						\
-  ((unsigned int) (YYX) <= YYMAXUTOK ? yytranslate[YYX] : YYUNDEFTOK)
-
-/* YYTRANSLATE[YYLEX] -- Bison symbol number corresponding to YYLEX.  */
-static const yytype_uint8 yytranslate[] =
-{
-       0,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,    10,     2,     2,     2,     2,     5,     2,
-      14,    15,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,    12,     2,
-       2,     2,     2,     3,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-      13,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     4,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     2,     2,     2,     2,
-       2,     2,     2,     2,     2,     2,     1,     2,     6,     7,
-       8,     9,    11
-};
-
-#if YYDEBUG
-/* YYPRHS[YYN] -- Index of the first RHS symbol of rule number YYN in
-   YYRHS.  */
-static const yytype_uint8 yyprhs[] =
-{
-       0,     0,     3,     5,    11,    15,    19,    23,    27,    31,
-      35,    38,    40,    42
-};
-
-/* YYRHS -- A `-1'-separated list of the rules' RHS.  */
-static const yytype_int8 yyrhs[] =
-{
-      17,     0,    -1,    18,    -1,    18,     3,    18,    12,    18,
-      -1,    18,     4,    18,    -1,    18,     5,    18,    -1,    18,
-       6,    18,    -1,    18,     7,    18,    -1,    18,     8,    18,
-      -1,    18,     9,    18,    -1,    10,    18,    -1,    13,    -1,
-      11,    -1,    14,    18,    15,    -1
-};
-
-/* YYRLINE[YYN] -- source line where rule number YYN was defined.  */
-static const yytype_uint8 yyrline[] =
-{
-       0,   154,   154,   162,   166,   170,   174,   178,   182,   186,
-     190,   194,   198,   203
-};
-#endif
-
-#if YYDEBUG || YYERROR_VERBOSE || YYTOKEN_TABLE
-/* YYTNAME[SYMBOL-NUM] -- String name of the symbol SYMBOL-NUM.
-   First, the terminals, then, starting at YYNTOKENS, nonterminals.  */
-static const char *const yytname[] =
-{
-  "$end", "error", "$undefined", "'?'", "'|'", "'&'", "EQUOP2", "CMPOP2",
-  "ADDOP2", "MULOP2", "'!'", "NUMBER", "':'", "'n'", "'('", "')'",
-  "$accept", "start", "exp", 0
-};
-#endif
-
-# ifdef YYPRINT
-/* YYTOKNUM[YYLEX-NUM] -- Internal token number corresponding to
-   token YYLEX-NUM.  */
-static const yytype_uint16 yytoknum[] =
-{
-       0,   256,   257,    63,   124,    38,   258,   259,   260,   261,
-      33,   262,    58,   110,    40,    41
-};
-# endif
-
-/* YYR1[YYN] -- Symbol number of symbol that rule YYN derives.  */
-static const yytype_uint8 yyr1[] =
-{
-       0,    16,    17,    18,    18,    18,    18,    18,    18,    18,
-      18,    18,    18,    18
-};
-
-/* YYR2[YYN] -- Number of symbols composing right hand side of rule YYN.  */
-static const yytype_uint8 yyr2[] =
-{
-       0,     2,     1,     5,     3,     3,     3,     3,     3,     3,
-       2,     1,     1,     3
-};
-
-/* YYDEFACT[STATE-NAME] -- Default rule to reduce with in state
-   STATE-NUM when YYTABLE doesn't specify something else to do.  Zero
-   means the default is an error.  */
-static const yytype_uint8 yydefact[] =
-{
-       0,     0,    12,    11,     0,     0,     2,    10,     0,     1,
-       0,     0,     0,     0,     0,     0,     0,    13,     0,     4,
-       5,     6,     7,     8,     9,     0,     3
-};
-
-/* YYDEFGOTO[NTERM-NUM].  */
-static const yytype_int8 yydefgoto[] =
-{
-      -1,     5,     6
-};
-
-/* YYPACT[STATE-NUM] -- Index in YYTABLE of the portion describing
-   STATE-NUM.  */
-#define YYPACT_NINF -10
-static const yytype_int8 yypact[] =
-{
-      -9,    -9,   -10,   -10,    -9,     8,    36,   -10,    13,   -10,
-      -9,    -9,    -9,    -9,    -9,    -9,    -9,   -10,    26,    41,
-      45,    18,    -2,    14,   -10,    -9,    36
-};
-
-/* YYPGOTO[NTERM-NUM].  */
-static const yytype_int8 yypgoto[] =
-{
-     -10,   -10,    -1
-};
-
-/* YYTABLE[YYPACT[STATE-NUM]].  What to do in state STATE-NUM.  If
-   positive, shift that token.  If negative, reduce the rule which
-   number is the opposite.  If zero, do what YYDEFACT says.
-   If YYTABLE_NINF, syntax error.  */
-#define YYTABLE_NINF -1
-static const yytype_uint8 yytable[] =
-{
-       7,     1,     2,     8,     3,     4,    15,    16,     9,    18,
-      19,    20,    21,    22,    23,    24,    10,    11,    12,    13,
-      14,    15,    16,    16,    26,    14,    15,    16,    17,    10,
-      11,    12,    13,    14,    15,    16,     0,     0,    25,    10,
-      11,    12,    13,    14,    15,    16,    12,    13,    14,    15,
-      16,    13,    14,    15,    16
-};
-
-static const yytype_int8 yycheck[] =
-{
-       1,    10,    11,     4,    13,    14,     8,     9,     0,    10,
-      11,    12,    13,    14,    15,    16,     3,     4,     5,     6,
-       7,     8,     9,     9,    25,     7,     8,     9,    15,     3,
-       4,     5,     6,     7,     8,     9,    -1,    -1,    12,     3,
-       4,     5,     6,     7,     8,     9,     5,     6,     7,     8,
-       9,     6,     7,     8,     9
-};
-
-/* YYSTOS[STATE-NUM] -- The (internal number of the) accessing
-   symbol of state STATE-NUM.  */
-static const yytype_uint8 yystos[] =
-{
-       0,    10,    11,    13,    14,    17,    18,    18,    18,     0,
-       3,     4,     5,     6,     7,     8,     9,    15,    18,    18,
-      18,    18,    18,    18,    18,    12,    18
-};
-
-#define yyerrok		(yyerrstatus = 0)
-#define yyclearin	(yychar = YYEMPTY)
-#define YYEMPTY		(-2)
-#define YYEOF		0
-
-#define YYACCEPT	goto yyacceptlab
-#define YYABORT		goto yyabortlab
-#define YYERROR		goto yyerrorlab
-
-
-/* Like YYERROR except do call yyerror.  This remains here temporarily
-   to ease the transition to the new meaning of YYERROR, for GCC.
-   Once GCC version 2 has supplanted version 1, this can go.  */
-
-#define YYFAIL		goto yyerrlab
-
-#define YYRECOVERING()  (!!yyerrstatus)
-
-#define YYBACKUP(Token, Value)					\
-do								\
-  if (yychar == YYEMPTY && yylen == 1)				\
-    {								\
-      yychar = (Token);						\
-      yylval = (Value);						\
-      yytoken = YYTRANSLATE (yychar);				\
-      YYPOPSTACK (1);						\
-      goto yybackup;						\
-    }								\
-  else								\
-    {								\
-      yyerror (YY_("syntax error: cannot back up")); \
-      YYERROR;							\
-    }								\
-while (YYID (0))
-
-
-#define YYTERROR	1
-#define YYERRCODE	256
-
-
-/* YYLLOC_DEFAULT -- Set CURRENT to span from RHS[1] to RHS[N].
-   If N is 0, then set CURRENT to the empty location which ends
-   the previous symbol: RHS[0] (always defined).  */
-
-#define YYRHSLOC(Rhs, K) ((Rhs)[K])
-#ifndef YYLLOC_DEFAULT
-# define YYLLOC_DEFAULT(Current, Rhs, N)				\
-    do									\
-      if (YYID (N))                                                    \
-	{								\
-	  (Current).first_line   = YYRHSLOC (Rhs, 1).first_line;	\
-	  (Current).first_column = YYRHSLOC (Rhs, 1).first_column;	\
-	  (Current).last_line    = YYRHSLOC (Rhs, N).last_line;		\
-	  (Current).last_column  = YYRHSLOC (Rhs, N).last_column;	\
-	}								\
-      else								\
-	{								\
-	  (Current).first_line   = (Current).last_line   =		\
-	    YYRHSLOC (Rhs, 0).last_line;				\
-	  (Current).first_column = (Current).last_column =		\
-	    YYRHSLOC (Rhs, 0).last_column;				\
-	}								\
-    while (YYID (0))
-#endif
-
-
-/* YY_LOCATION_PRINT -- Print the location on the stream.
-   This macro was not mandated originally: define only if we know
-   we won't break user code: when these are the locations we know.  */
-
-#ifndef YY_LOCATION_PRINT
-# if YYLTYPE_IS_TRIVIAL
-#  define YY_LOCATION_PRINT(File, Loc)			\
-     fprintf (File, "%d.%d-%d.%d",			\
-	      (Loc).first_line, (Loc).first_column,	\
-	      (Loc).last_line,  (Loc).last_column)
-# else
-#  define YY_LOCATION_PRINT(File, Loc) ((void) 0)
-# endif
-#endif
-
-
-/* YYLEX -- calling `yylex' with the right arguments.  */
-
-#ifdef YYLEX_PARAM
-# define YYLEX yylex (&yylval, YYLEX_PARAM)
-#else
-# define YYLEX yylex (&yylval)
-#endif
-
-/* Enable debugging if requested.  */
-#if YYDEBUG
-
-# ifndef YYFPRINTF
-#  include <stdio.h> /* INFRINGES ON USER NAME SPACE */
-#  define YYFPRINTF fprintf
-# endif
-
-# define YYDPRINTF(Args)			\
-do {						\
-  if (yydebug)					\
-    YYFPRINTF Args;				\
-} while (YYID (0))
-
-# define YY_SYMBOL_PRINT(Title, Type, Value, Location)			  \
-do {									  \
-  if (yydebug)								  \
-    {									  \
-      YYFPRINTF (stderr, "%s ", Title);					  \
-      yy_symbol_print (stderr,						  \
-		  Type, Value); \
-      YYFPRINTF (stderr, "\n");						  \
-    }									  \
-} while (YYID (0))
-
-
-/*--------------------------------.
-| Print this symbol on YYOUTPUT.  |
-`--------------------------------*/
-
-/*ARGSUSED*/
-#if (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-static void
-yy_symbol_value_print (FILE *yyoutput, int yytype, YYSTYPE const * const yyvaluep)
-#else
-static void
-yy_symbol_value_print (yyoutput, yytype, yyvaluep)
-    FILE *yyoutput;
-    int yytype;
-    YYSTYPE const * const yyvaluep;
-#endif
-{
-  if (!yyvaluep)
-    return;
-# ifdef YYPRINT
-  if (yytype < YYNTOKENS)
-    YYPRINT (yyoutput, yytoknum[yytype], *yyvaluep);
-# else
-  YYUSE (yyoutput);
-# endif
-  switch (yytype)
-    {
-      default:
-	break;
-    }
-}
-
-
-/*--------------------------------.
-| Print this symbol on YYOUTPUT.  |
-`--------------------------------*/
-
-#if (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-static void
-yy_symbol_print (FILE *yyoutput, int yytype, YYSTYPE const * const yyvaluep)
-#else
-static void
-yy_symbol_print (yyoutput, yytype, yyvaluep)
-    FILE *yyoutput;
-    int yytype;
-    YYSTYPE const * const yyvaluep;
-#endif
-{
-  if (yytype < YYNTOKENS)
-    YYFPRINTF (yyoutput, "token %s (", yytname[yytype]);
-  else
-    YYFPRINTF (yyoutput, "nterm %s (", yytname[yytype]);
-
-  yy_symbol_value_print (yyoutput, yytype, yyvaluep);
-  YYFPRINTF (yyoutput, ")");
-}
-
-/*------------------------------------------------------------------.
-| yy_stack_print -- Print the state stack from its BOTTOM up to its |
-| TOP (included).                                                   |
-`------------------------------------------------------------------*/
-
-#if (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-static void
-yy_stack_print (yytype_int16 *yybottom, yytype_int16 *yytop)
-#else
-static void
-yy_stack_print (yybottom, yytop)
-    yytype_int16 *yybottom;
-    yytype_int16 *yytop;
-#endif
-{
-  YYFPRINTF (stderr, "Stack now");
-  for (; yybottom <= yytop; yybottom++)
-    {
-      int yybot = *yybottom;
-      YYFPRINTF (stderr, " %d", yybot);
-    }
-  YYFPRINTF (stderr, "\n");
-}
-
-# define YY_STACK_PRINT(Bottom, Top)				\
-do {								\
-  if (yydebug)							\
-    yy_stack_print ((Bottom), (Top));				\
-} while (YYID (0))
-
-
-/*------------------------------------------------.
-| Report that the YYRULE is going to be reduced.  |
-`------------------------------------------------*/
-
-#if (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-static void
-yy_reduce_print (YYSTYPE *yyvsp, int yyrule)
-#else
-static void
-yy_reduce_print (yyvsp, yyrule)
-    YYSTYPE *yyvsp;
-    int yyrule;
-#endif
-{
-  int yynrhs = yyr2[yyrule];
-  int yyi;
-  unsigned long int yylno = yyrline[yyrule];
-  YYFPRINTF (stderr, "Reducing stack by rule %d (line %lu):\n",
-	     yyrule - 1, yylno);
-  /* The symbols being reduced.  */
-  for (yyi = 0; yyi < yynrhs; yyi++)
-    {
-      fprintf (stderr, "   $%d = ", yyi + 1);
-      yy_symbol_print (stderr, yyrhs[yyprhs[yyrule] + yyi],
-		       &(yyvsp[(yyi + 1) - (yynrhs)])
-		       		       );
-      fprintf (stderr, "\n");
-    }
-}
-
-# define YY_REDUCE_PRINT(Rule)		\
-do {					\
-  if (yydebug)				\
-    yy_reduce_print (yyvsp, Rule); \
-} while (YYID (0))
-
-/* Nonzero means print parse trace.  It is left uninitialized so that
-   multiple parsers can coexist.  */
-int yydebug;
-#else /* !YYDEBUG */
-# define YYDPRINTF(Args)
-# define YY_SYMBOL_PRINT(Title, Type, Value, Location)
-# define YY_STACK_PRINT(Bottom, Top)
-# define YY_REDUCE_PRINT(Rule)
-#endif /* !YYDEBUG */
-
-
-/* YYINITDEPTH -- initial size of the parser's stacks.  */
-#ifndef	YYINITDEPTH
-# define YYINITDEPTH 200
-#endif
-
-/* YYMAXDEPTH -- maximum size the stacks can grow to (effective only
-   if the built-in stack extension method is used).
-
-   Do not make this value too large; the results are undefined if
-   YYSTACK_ALLOC_MAXIMUM < YYSTACK_BYTES (YYMAXDEPTH)
-   evaluated with infinite-precision integer arithmetic.  */
-
-#ifndef YYMAXDEPTH
-# define YYMAXDEPTH 10000
-#endif
-
-
-
-#if YYERROR_VERBOSE
-
-# ifndef yystrlen
-#  if defined __GLIBC__ && defined _STRING_H
-#   define yystrlen strlen
-#  else
-/* Return the length of YYSTR.  */
-#if (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-static YYSIZE_T
-yystrlen (const char *yystr)
-#else
-static YYSIZE_T
-yystrlen (yystr)
-    const char *yystr;
-#endif
-{
-  YYSIZE_T yylen;
-  for (yylen = 0; yystr[yylen]; yylen++)
-    continue;
-  return yylen;
-}
-#  endif
-# endif
-
-# ifndef yystpcpy
-#  if defined __GLIBC__ && defined _STRING_H && defined _GNU_SOURCE
-#   define yystpcpy stpcpy
-#  else
-/* Copy YYSRC to YYDEST, returning the address of the terminating '\0' in
-   YYDEST.  */
-#if (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-static char *
-yystpcpy (char *yydest, const char *yysrc)
-#else
-static char *
-yystpcpy (yydest, yysrc)
-    char *yydest;
-    const char *yysrc;
-#endif
-{
-  char *yyd = yydest;
-  const char *yys = yysrc;
-
-  while ((*yyd++ = *yys++) != '\0')
-    continue;
-
-  return yyd - 1;
-}
-#  endif
-# endif
-
-# ifndef yytnamerr
-/* Copy to YYRES the contents of YYSTR after stripping away unnecessary
-   quotes and backslashes, so that it's suitable for yyerror.  The
-   heuristic is that double-quoting is unnecessary unless the string
-   contains an apostrophe, a comma, or backslash (other than
-   backslash-backslash).  YYSTR is taken from yytname.  If YYRES is
-   null, do not copy; instead, return the length of what the result
-   would have been.  */
-static YYSIZE_T
-yytnamerr (char *yyres, const char *yystr)
-{
-  if (*yystr == '"')
-    {
-      YYSIZE_T yyn = 0;
-      char const *yyp = yystr;
-
-      for (;;)
-	switch (*++yyp)
-	  {
-	  case '\'':
-	  case ',':
-	    goto do_not_strip_quotes;
-
-	  case '\\':
-	    if (*++yyp != '\\')
-	      goto do_not_strip_quotes;
-	    /* Fall through.  */
-	  default:
-	    if (yyres)
-	      yyres[yyn] = *yyp;
-	    yyn++;
-	    break;
-
-	  case '"':
-	    if (yyres)
-	      yyres[yyn] = '\0';
-	    return yyn;
-	  }
-    do_not_strip_quotes: ;
-    }
-
-  if (! yyres)
-    return yystrlen (yystr);
-
-  return yystpcpy (yyres, yystr) - yyres;
-}
-# endif
-
-/* Copy into YYRESULT an error message about the unexpected token
-   YYCHAR while in state YYSTATE.  Return the number of bytes copied,
-   including the terminating null byte.  If YYRESULT is null, do not
-   copy anything; just return the number of bytes that would be
-   copied.  As a special case, return 0 if an ordinary "syntax error"
-   message will do.  Return YYSIZE_MAXIMUM if overflow occurs during
-   size calculation.  */
-static YYSIZE_T
-yysyntax_error (char *yyresult, int yystate, int yychar)
-{
-  int yyn = yypact[yystate];
-
-  if (! (YYPACT_NINF < yyn && yyn <= YYLAST))
-    return 0;
-  else
-    {
-      int yytype = YYTRANSLATE (yychar);
-      YYSIZE_T yysize0 = yytnamerr (0, yytname[yytype]);
-      YYSIZE_T yysize = yysize0;
-      YYSIZE_T yysize1;
-      int yysize_overflow = 0;
-      enum { YYERROR_VERBOSE_ARGS_MAXIMUM = 5 };
-      char const *yyarg[YYERROR_VERBOSE_ARGS_MAXIMUM];
-      int yyx;
-
-# if 0
-      /* This is so xgettext sees the translatable formats that are
-	 constructed on the fly.  */
-      YY_("syntax error, unexpected %s");
-      YY_("syntax error, unexpected %s, expecting %s");
-      YY_("syntax error, unexpected %s, expecting %s or %s");
-      YY_("syntax error, unexpected %s, expecting %s or %s or %s");
-      YY_("syntax error, unexpected %s, expecting %s or %s or %s or %s");
-# endif
-      char *yyfmt;
-      char const *yyf;
-      static char const yyunexpected[] = "syntax error, unexpected %s";
-      static char const yyexpecting[] = ", expecting %s";
-      static char const yyor[] = " or %s";
-      char yyformat[sizeof yyunexpected
-		    + sizeof yyexpecting - 1
-		    + ((YYERROR_VERBOSE_ARGS_MAXIMUM - 2)
-		       * (sizeof yyor - 1))];
-      char const *yyprefix = yyexpecting;
-
-      /* Start YYX at -YYN if negative to avoid negative indexes in
-	 YYCHECK.  */
-      int yyxbegin = yyn < 0 ? -yyn : 0;
-
-      /* Stay within bounds of both yycheck and yytname.  */
-      int yychecklim = YYLAST - yyn + 1;
-      int yyxend = yychecklim < YYNTOKENS ? yychecklim : YYNTOKENS;
-      int yycount = 1;
-
-      yyarg[0] = yytname[yytype];
-      yyfmt = yystpcpy (yyformat, yyunexpected);
-
-      for (yyx = yyxbegin; yyx < yyxend; ++yyx)
-	if (yycheck[yyx + yyn] == yyx && yyx != YYTERROR)
-	  {
-	    if (yycount == YYERROR_VERBOSE_ARGS_MAXIMUM)
-	      {
-		yycount = 1;
-		yysize = yysize0;
-		yyformat[sizeof yyunexpected - 1] = '\0';
-		break;
-	      }
-	    yyarg[yycount++] = yytname[yyx];
-	    yysize1 = yysize + yytnamerr (0, yytname[yyx]);
-	    yysize_overflow |= (yysize1 < yysize);
-	    yysize = yysize1;
-	    yyfmt = yystpcpy (yyfmt, yyprefix);
-	    yyprefix = yyor;
-	  }
-
-      yyf = YY_(yyformat);
-      yysize1 = yysize + yystrlen (yyf);
-      yysize_overflow |= (yysize1 < yysize);
-      yysize = yysize1;
-
-      if (yysize_overflow)
-	return YYSIZE_MAXIMUM;
-
-      if (yyresult)
-	{
-	  /* Avoid sprintf, as that infringes on the user's name space.
-	     Don't have undefined behavior even if the translation
-	     produced a string with the wrong number of "%s"s.  */
-	  char *yyp = yyresult;
-	  int yyi = 0;
-	  while ((*yyp = *yyf) != '\0')
-	    {
-	      if (*yyp == '%' && yyf[1] == 's' && yyi < yycount)
-		{
-		  yyp += yytnamerr (yyp, yyarg[yyi++]);
-		  yyf += 2;
-		}
-	      else
-		{
-		  yyp++;
-		  yyf++;
-		}
-	    }
-	}
-      return yysize;
-    }
-}
-#endif /* YYERROR_VERBOSE */
-
-
-/*-----------------------------------------------.
-| Release the memory associated to this symbol.  |
-`-----------------------------------------------*/
-
-/*ARGSUSED*/
-#if (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-static void
-yydestruct (const char *yymsg, int yytype, YYSTYPE *yyvaluep)
-#else
-static void
-yydestruct (yymsg, yytype, yyvaluep)
-    const char *yymsg;
-    int yytype;
-    YYSTYPE *yyvaluep;
-#endif
-{
-  YYUSE (yyvaluep);
-
-  if (!yymsg)
-    yymsg = "Deleting";
-  YY_SYMBOL_PRINT (yymsg, yytype, yyvaluep, yylocationp);
-
-  switch (yytype)
-    {
-
-      default:
-	break;
-    }
-}
-
-
-/* Prevent warnings from -Wmissing-prototypes.  */
-
-#ifdef YYPARSE_PARAM
-#if defined __STDC__ || defined __cplusplus
-int yyparse (void *YYPARSE_PARAM);
-#else
-int yyparse ();
-#endif
-#else /* ! YYPARSE_PARAM */
-#if defined __STDC__ || defined __cplusplus
-int yyparse (void);
-#else
-int yyparse ();
-#endif
-#endif /* ! YYPARSE_PARAM */
-
-
-
-
-
-
-/*----------.
-| yyparse.  |
-`----------*/
-
-#ifdef YYPARSE_PARAM
-#if (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-int
-yyparse (void *YYPARSE_PARAM)
-#else
-int
-yyparse (YYPARSE_PARAM)
-    void *YYPARSE_PARAM;
-#endif
-#else /* ! YYPARSE_PARAM */
-#if (defined __STDC__ || defined __C99__FUNC__ \
-     || defined __cplusplus || defined _MSC_VER)
-int
-yyparse (void)
-#else
-int
-yyparse ()
-
-#endif
-#endif
-{
-  /* The lookahead symbol.  */
-int yychar;
-
-/* The semantic value of the lookahead symbol.  */
-YYSTYPE yylval;
-
-/* Number of syntax errors so far.  */
-int yynerrs;
-
-  int yystate;
-  int yyn;
-  int yyresult;
-  /* Number of tokens to shift before error messages enabled.  */
-  int yyerrstatus;
-  /* Lookahead token as an internal (translated) token number.  */
-  int yytoken = 0;
-#if YYERROR_VERBOSE
-  /* Buffer for error messages, and its allocated size.  */
-  char yymsgbuf[128];
-  char *yymsg = yymsgbuf;
-  YYSIZE_T yymsg_alloc = sizeof yymsgbuf;
-#endif
-
-  /* Three stacks and their tools:
-     `yyss': related to states,
-     `yyvs': related to semantic values,
-     `yyls': related to locations.
-
-     Refer to the stacks thru separate pointers, to allow yyoverflow
-     to reallocate them elsewhere.  */
-
-  /* The state stack.  */
-  yytype_int16 yyssa[YYINITDEPTH];
-  yytype_int16 *yyss = yyssa;
-  yytype_int16 *yyssp;
-
-  /* The semantic value stack.  */
-  YYSTYPE yyvsa[YYINITDEPTH];
-  YYSTYPE *yyvs = yyvsa;
-  YYSTYPE *yyvsp;
-
-
-
-#define YYPOPSTACK(N)   (yyvsp -= (N), yyssp -= (N))
-
-  YYSIZE_T yystacksize = YYINITDEPTH;
-
-  /* The variables used to return semantic value and location from the
-     action routines.  */
-  YYSTYPE yyval;
-
-
-  /* The number of symbols on the RHS of the reduced rule.
-     Keep to zero when no symbol should be popped.  */
-  int yylen = 0;
-
-  YYDPRINTF ((stderr, "Starting parse\n"));
-
-  yystate = 0;
-  yyerrstatus = 0;
-  yynerrs = 0;
-  yychar = YYEMPTY;		/* Cause a token to be read.  */
-
-  /* Initialize stack pointers.
-     Waste one element of value and location stack
-     so that they stay on the same level as the state stack.
-     The wasted elements are never initialized.  */
-
-  yyssp = yyss;
-  yyvsp = yyvs;
-
-  goto yysetstate;
-
-/*------------------------------------------------------------.
-| yynewstate -- Push a new state, which is found in yystate.  |
-`------------------------------------------------------------*/
- yynewstate:
-  /* In all cases, when you get here, the value and location stacks
-     have just been pushed.  So pushing a state here evens the stacks.  */
-  yyssp++;
-
- yysetstate:
-  *yyssp = yystate;
-
-  if (yyss + yystacksize - 1 <= yyssp)
-    {
-      /* Get the current used size of the three stacks, in elements.  */
-      YYSIZE_T yysize = yyssp - yyss + 1;
-
-#ifdef yyoverflow
-      {
-	/* Give user a chance to reallocate the stack.  Use copies of
-	   these so that the &'s don't force the real ones into
-	   memory.  */
-	YYSTYPE *yyvs1 = yyvs;
-	yytype_int16 *yyss1 = yyss;
-
-
-	/* Each stack pointer address is followed by the size of the
-	   data in use in that stack, in bytes.  This used to be a
-	   conditional around just the two extra args, but that might
-	   be undefined if yyoverflow is a macro.  */
-	yyoverflow (YY_("memory exhausted"),
-		    &yyss1, yysize * sizeof (*yyssp),
-		    &yyvs1, yysize * sizeof (*yyvsp),
-
-		    &yystacksize);
-
-	yyss = yyss1;
-	yyvs = yyvs1;
-      }
-#else /* no yyoverflow */
-# ifndef YYSTACK_RELOCATE
-      goto yyexhaustedlab;
-# else
-      /* Extend the stack our own way.  */
-      if (YYMAXDEPTH <= yystacksize)
-	goto yyexhaustedlab;
-      yystacksize *= 2;
-      if (YYMAXDEPTH < yystacksize)
-	yystacksize = YYMAXDEPTH;
-
-      {
-	yytype_int16 *yyss1 = yyss;
-	union yyalloc *yyptr =
-	  (union yyalloc *) YYSTACK_ALLOC (YYSTACK_BYTES (yystacksize));
-	if (! yyptr)
-	  goto yyexhaustedlab;
-	YYSTACK_RELOCATE (yyss);
-	YYSTACK_RELOCATE (yyvs);
-
-#  undef YYSTACK_RELOCATE
-	if (yyss1 != yyssa)
-	  YYSTACK_FREE (yyss1);
-      }
-# endif
-#endif /* no yyoverflow */
-
-      yyssp = yyss + yysize - 1;
-      yyvsp = yyvs + yysize - 1;
-
-
-      YYDPRINTF ((stderr, "Stack size increased to %lu\n",
-		  (unsigned long int) yystacksize));
-
-      if (yyss + yystacksize - 1 <= yyssp)
-	YYABORT;
-    }
-
-  YYDPRINTF ((stderr, "Entering state %d\n", yystate));
-
-  if (yystate == YYFINAL)
-    YYACCEPT;
-
-  goto yybackup;
-
-/*-----------.
-| yybackup.  |
-`-----------*/
-yybackup:
-
-  /* Do appropriate processing given the current state.  Read a
-     lookahead token if we need one and don't already have one.  */
-
-  /* First try to decide what to do without reference to lookahead token.  */
-  yyn = yypact[yystate];
-  if (yyn == YYPACT_NINF)
-    goto yydefault;
-
-  /* Not known => get a lookahead token if don't already have one.  */
-
-  /* YYCHAR is either YYEMPTY or YYEOF or a valid lookahead symbol.  */
-  if (yychar == YYEMPTY)
-    {
-      YYDPRINTF ((stderr, "Reading a token: "));
-      yychar = YYLEX;
-    }
-
-  if (yychar <= YYEOF)
-    {
-      yychar = yytoken = YYEOF;
-      YYDPRINTF ((stderr, "Now at end of input.\n"));
-    }
-  else
-    {
-      yytoken = YYTRANSLATE (yychar);
-      YY_SYMBOL_PRINT ("Next token is", yytoken, &yylval, &yylloc);
-    }
-
-  /* If the proper action on seeing token YYTOKEN is to reduce or to
-     detect an error, take that action.  */
-  yyn += yytoken;
-  if (yyn < 0 || YYLAST < yyn || yycheck[yyn] != yytoken)
-    goto yydefault;
-  yyn = yytable[yyn];
-  if (yyn <= 0)
-    {
-      if (yyn == 0 || yyn == YYTABLE_NINF)
-	goto yyerrlab;
-      yyn = -yyn;
-      goto yyreduce;
-    }
-
-  /* Count tokens shifted since error; after three, turn off error
-     status.  */
-  if (yyerrstatus)
-    yyerrstatus--;
-
-  /* Shift the lookahead token.  */
-  YY_SYMBOL_PRINT ("Shifting", yytoken, &yylval, &yylloc);
-
-  /* Discard the shifted token.  */
-  yychar = YYEMPTY;
-
-  yystate = yyn;
-  *++yyvsp = yylval;
-
-  goto yynewstate;
-
-
-/*-----------------------------------------------------------.
-| yydefault -- do the default action for the current state.  |
-`-----------------------------------------------------------*/
-yydefault:
-  yyn = yydefact[yystate];
-  if (yyn == 0)
-    goto yyerrlab;
-  goto yyreduce;
-
-
-/*-----------------------------.
-| yyreduce -- Do a reduction.  |
-`-----------------------------*/
-yyreduce:
-  /* yyn is the number of a rule to reduce with.  */
-  yylen = yyr2[yyn];
-
-  /* If YYLEN is nonzero, implement the default value of the action:
-     `$$ = $1'.
-
-     Otherwise, the following line sets YYVAL to garbage.
-     This behavior is undocumented and Bison
-     users should not rely upon it.  Assigning to YYVAL
-     unconditionally makes the parser a bit smaller, and it avoids a
-     GCC warning that YYVAL may be used uninitialized.  */
-  yyval = yyvsp[1-yylen];
-
-
-  YY_REDUCE_PRINT (yyn);
-  switch (yyn)
-    {
-        case 2:
-/* Line 1269 of yacc.c.  */
-#line 155 "plural.y"
-    {
-	    if ((yyvsp[(1) - (1)].exp) == NULL)
-	      YYABORT;
-	    ((struct parse_args *) arg)->res = (yyvsp[(1) - (1)].exp);
-	  }
-    break;
-
-  case 3:
-/* Line 1269 of yacc.c.  */
-#line 163 "plural.y"
-    {
-	    (yyval.exp) = new_exp_3 (qmop, (yyvsp[(1) - (5)].exp), (yyvsp[(3) - (5)].exp), (yyvsp[(5) - (5)].exp));
-	  }
-    break;
-
-  case 4:
-/* Line 1269 of yacc.c.  */
-#line 167 "plural.y"
-    {
-	    (yyval.exp) = new_exp_2 (lor, (yyvsp[(1) - (3)].exp), (yyvsp[(3) - (3)].exp));
-	  }
-    break;
-
-  case 5:
-/* Line 1269 of yacc.c.  */
-#line 171 "plural.y"
-    {
-	    (yyval.exp) = new_exp_2 (land, (yyvsp[(1) - (3)].exp), (yyvsp[(3) - (3)].exp));
-	  }
-    break;
-
-  case 6:
-/* Line 1269 of yacc.c.  */
-#line 175 "plural.y"
-    {
-	    (yyval.exp) = new_exp_2 ((yyvsp[(2) - (3)].op), (yyvsp[(1) - (3)].exp), (yyvsp[(3) - (3)].exp));
-	  }
-    break;
-
-  case 7:
-/* Line 1269 of yacc.c.  */
-#line 179 "plural.y"
-    {
-	    (yyval.exp) = new_exp_2 ((yyvsp[(2) - (3)].op), (yyvsp[(1) - (3)].exp), (yyvsp[(3) - (3)].exp));
-	  }
-    break;
-
-  case 8:
-/* Line 1269 of yacc.c.  */
-#line 183 "plural.y"
-    {
-	    (yyval.exp) = new_exp_2 ((yyvsp[(2) - (3)].op), (yyvsp[(1) - (3)].exp), (yyvsp[(3) - (3)].exp));
-	  }
-    break;
-
-  case 9:
-/* Line 1269 of yacc.c.  */
-#line 187 "plural.y"
-    {
-	    (yyval.exp) = new_exp_2 ((yyvsp[(2) - (3)].op), (yyvsp[(1) - (3)].exp), (yyvsp[(3) - (3)].exp));
-	  }
-    break;
-
-  case 10:
-/* Line 1269 of yacc.c.  */
-#line 191 "plural.y"
-    {
-	    (yyval.exp) = new_exp_1 (lnot, (yyvsp[(2) - (2)].exp));
-	  }
-    break;
-
-  case 11:
-/* Line 1269 of yacc.c.  */
-#line 195 "plural.y"
-    {
-	    (yyval.exp) = new_exp_0 (var);
-	  }
-    break;
-
-  case 12:
-/* Line 1269 of yacc.c.  */
-#line 199 "plural.y"
-    {
-	    if (((yyval.exp) = new_exp_0 (num)) != NULL)
-	      (yyval.exp)->val.num = (yyvsp[(1) - (1)].num);
-	  }
-    break;
-
-  case 13:
-/* Line 1269 of yacc.c.  */
-#line 204 "plural.y"
-    {
-	    (yyval.exp) = (yyvsp[(2) - (3)].exp);
-	  }
-    break;
-
-
-/* Line 1269 of yacc.c.  */
-#line 1572 "plural.c"
-      default: break;
-    }
-  YY_SYMBOL_PRINT ("-> $$ =", yyr1[yyn], &yyval, &yyloc);
-
-  YYPOPSTACK (yylen);
-  yylen = 0;
-  YY_STACK_PRINT (yyss, yyssp);
-
-  *++yyvsp = yyval;
-
-
-  /* Now `shift' the result of the reduction.  Determine what state
-     that goes to, based on the state we popped back to and the rule
-     number reduced by.  */
-
-  yyn = yyr1[yyn];
-
-  yystate = yypgoto[yyn - YYNTOKENS] + *yyssp;
-  if (0 <= yystate && yystate <= YYLAST && yycheck[yystate] == *yyssp)
-    yystate = yytable[yystate];
-  else
-    yystate = yydefgoto[yyn - YYNTOKENS];
-
-  goto yynewstate;
-
-
-/*------------------------------------.
-| yyerrlab -- here on detecting error |
-`------------------------------------*/
-yyerrlab:
-  /* If not already recovering from an error, report this error.  */
-  if (!yyerrstatus)
-    {
-      ++yynerrs;
-#if ! YYERROR_VERBOSE
-      yyerror (YY_("syntax error"));
-#else
-      {
-	YYSIZE_T yysize = yysyntax_error (0, yystate, yychar);
-	if (yymsg_alloc < yysize && yymsg_alloc < YYSTACK_ALLOC_MAXIMUM)
-	  {
-	    YYSIZE_T yyalloc = 2 * yysize;
-	    if (! (yysize <= yyalloc && yyalloc <= YYSTACK_ALLOC_MAXIMUM))
-	      yyalloc = YYSTACK_ALLOC_MAXIMUM;
-	    if (yymsg != yymsgbuf)
-	      YYSTACK_FREE (yymsg);
-	    yymsg = (char *) YYSTACK_ALLOC (yyalloc);
-	    if (yymsg)
-	      yymsg_alloc = yyalloc;
-	    else
-	      {
-		yymsg = yymsgbuf;
-		yymsg_alloc = sizeof yymsgbuf;
-	      }
-	  }
-
-	if (0 < yysize && yysize <= yymsg_alloc)
-	  {
-	    (void) yysyntax_error (yymsg, yystate, yychar);
-	    yyerror (yymsg);
-	  }
-	else
-	  {
-	    yyerror (YY_("syntax error"));
-	    if (yysize != 0)
-	      goto yyexhaustedlab;
-	  }
-      }
-#endif
-    }
-
-
-
-  if (yyerrstatus == 3)
-    {
-      /* If just tried and failed to reuse lookahead token after an
-	 error, discard it.  */
-
-      if (yychar <= YYEOF)
-	{
-	  /* Return failure if at end of input.  */
-	  if (yychar == YYEOF)
-	    YYABORT;
-	}
-      else
-	{
-	  yydestruct ("Error: discarding",
-		      yytoken, &yylval);
-	  yychar = YYEMPTY;
-	}
-    }
-
-  /* Else will try to reuse lookahead token after shifting the error
-     token.  */
-  goto yyerrlab1;
-
-
-/*---------------------------------------------------.
-| yyerrorlab -- error raised explicitly by YYERROR.  |
-`---------------------------------------------------*/
-yyerrorlab:
-
-  /* Pacify compilers like GCC when the user code never invokes
-     YYERROR and the label yyerrorlab therefore never appears in user
-     code.  */
-  if (/*CONSTCOND*/ 0)
-     goto yyerrorlab;
-
-  /* Do not reclaim the symbols of the rule which action triggered
-     this YYERROR.  */
-  YYPOPSTACK (yylen);
-  yylen = 0;
-  YY_STACK_PRINT (yyss, yyssp);
-  yystate = *yyssp;
-  goto yyerrlab1;
-
-
-/*-------------------------------------------------------------.
-| yyerrlab1 -- common code for both syntax error and YYERROR.  |
-`-------------------------------------------------------------*/
-yyerrlab1:
-  yyerrstatus = 3;	/* Each real token shifted decrements this.  */
-
-  for (;;)
-    {
-      yyn = yypact[yystate];
-      if (yyn != YYPACT_NINF)
-	{
-	  yyn += YYTERROR;
-	  if (0 <= yyn && yyn <= YYLAST && yycheck[yyn] == YYTERROR)
-	    {
-	      yyn = yytable[yyn];
-	      if (0 < yyn)
-		break;
-	    }
-	}
-
-      /* Pop the current state because it cannot handle the error token.  */
-      if (yyssp == yyss)
-	YYABORT;
-
-
-      yydestruct ("Error: popping",
-		  yystos[yystate], yyvsp);
-      YYPOPSTACK (1);
-      yystate = *yyssp;
-      YY_STACK_PRINT (yyss, yyssp);
-    }
-
-  *++yyvsp = yylval;
-
-
-  /* Shift the error token.  */
-  YY_SYMBOL_PRINT ("Shifting", yystos[yyn], yyvsp, yylsp);
-
-  yystate = yyn;
-  goto yynewstate;
-
-
-/*-------------------------------------.
-| yyacceptlab -- YYACCEPT comes here.  |
-`-------------------------------------*/
-yyacceptlab:
-  yyresult = 0;
-  goto yyreturn;
-
-/*-----------------------------------.
-| yyabortlab -- YYABORT comes here.  |
-`-----------------------------------*/
-yyabortlab:
-  yyresult = 1;
-  goto yyreturn;
-
-#ifndef yyoverflow
-/*-------------------------------------------------.
-| yyexhaustedlab -- memory exhaustion comes here.  |
-`-------------------------------------------------*/
-yyexhaustedlab:
-  yyerror (YY_("memory exhausted"));
-  yyresult = 2;
-  /* Fall through.  */
-#endif
-
-yyreturn:
-  if (yychar != YYEMPTY)
-     yydestruct ("Cleanup: discarding lookahead",
-		 yytoken, &yylval);
-  /* Do not reclaim the symbols of the rule which action triggered
-     this YYABORT or YYACCEPT.  */
-  YYPOPSTACK (yylen);
-  YY_STACK_PRINT (yyss, yyssp);
-  while (yyssp != yyss)
-    {
-      yydestruct ("Cleanup: popping",
-		  yystos[*yyssp], yyvsp);
-      YYPOPSTACK (1);
-    }
-#ifndef yyoverflow
-  if (yyss != yyssa)
-    YYSTACK_FREE (yyss);
-#endif
-#if YYERROR_VERBOSE
-  if (yymsg != yymsgbuf)
-    YYSTACK_FREE (yymsg);
-#endif
-  /* Make sure YYID is used.  */
-  return YYID (yyresult);
-}
-
-
-/* Line 1486 of yacc.c.  */
-#line 209 "plural.y"
-
-
-void
-internal_function
-FREE_EXPRESSION (struct expression *exp)
-{
-  if (exp == NULL)
-    return;
-
-  /* Handle the recursive case.  */
-  switch (exp->nargs)
-    {
-    case 3:
-      FREE_EXPRESSION (exp->val.args[2]);
-      /* FALLTHROUGH */
-    case 2:
-      FREE_EXPRESSION (exp->val.args[1]);
-      /* FALLTHROUGH */
-    case 1:
-      FREE_EXPRESSION (exp->val.args[0]);
-      /* FALLTHROUGH */
-    default:
-      break;
-    }
-
-  free (exp);
-}
-
-
-static int
-yylex (YYSTYPE *lval, const char **pexp)
-{
-  const char *exp = *pexp;
-  int result;
-
-  while (1)
-    {
-      if (exp[0] == '\0')
-	{
-	  *pexp = exp;
-	  return YYEOF;
-	}
-
-      if (exp[0] != ' ' && exp[0] != '\t')
-	break;
-
-      ++exp;
-    }
-
-  result = *exp++;
-  switch (result)
-    {
-    case '0': case '1': case '2': case '3': case '4':
-    case '5': case '6': case '7': case '8': case '9':
-      {
-	unsigned long int n = result - '0';
-	while (exp[0] >= '0' && exp[0] <= '9')
-	  {
-	    n *= 10;
-	    n += exp[0] - '0';
-	    ++exp;
-	  }
-	lval->num = n;
-	result = NUMBER;
-      }
-      break;
-
-    case '=':
-      if (exp[0] == '=')
-	{
-	  ++exp;
-	  lval->op = equal;
-	  result = EQUOP2;
-	}
-      else
-	result = YYERRCODE;
-      break;
-
-    case '!':
-      if (exp[0] == '=')
-	{
-	  ++exp;
-	  lval->op = not_equal;
-	  result = EQUOP2;
-	}
-      break;
-
-    case '&':
-    case '|':
-      if (exp[0] == result)
-	++exp;
-      else
-	result = YYERRCODE;
-      break;
-
-    case '<':
-      if (exp[0] == '=')
-	{
-	  ++exp;
-	  lval->op = less_or_equal;
-	}
-      else
-	lval->op = less_than;
-      result = CMPOP2;
-      break;
-
-    case '>':
-      if (exp[0] == '=')
-	{
-	  ++exp;
-	  lval->op = greater_or_equal;
-	}
-      else
-	lval->op = greater_than;
-      result = CMPOP2;
-      break;
-
-    case '*':
-      lval->op = mult;
-      result = MULOP2;
-      break;
-
-    case '/':
-      lval->op = divide;
-      result = MULOP2;
-      break;
-
-    case '%':
-      lval->op = module;
-      result = MULOP2;
-      break;
-
-    case '+':
-      lval->op = plus;
-      result = ADDOP2;
-      break;
-
-    case '-':
-      lval->op = minus;
-      result = ADDOP2;
-      break;
-
-    case 'n':
-    case '?':
-    case ':':
-    case '(':
-    case ')':
-      /* Nothing, just return the character.  */
-      break;
-
-    case ';':
-    case '\n':
-    case '\0':
-      /* Be safe and let the user call this function again.  */
-      --exp;
-      result = YYEOF;
-      break;
-
-    default:
-      result = YYERRCODE;
-#if YYDEBUG != 0
-      --exp;
-#endif
-      break;
-    }
-
-  *pexp = exp;
-
-  return result;
-}
-
-
-static void
-yyerror (const char *str)
-{
-  /* Do nothing.  We don't print error messages here.  */
-}
-
diff -urpN mc-4.8.23/intl/plural.y mc-4.8.24/intl/plural.y
--- mc-4.8.23/intl/plural.y	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/plural.y	1970-01-01 04:00:00.000000000 +0400
@@ -1,385 +0,0 @@
-%{
-/* Expression parsing for plural form selection.
-   Copyright (C) 2000-2001, 2003, 2005-2006 Free Software Foundation, Inc.
-   Written by Ulrich Drepper <drepper@cygnus.com>, 2000.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* For bison < 2.0, the bison generated parser uses alloca.  AIX 3 forces us
-   to put this declaration at the beginning of the file.  The declaration in
-   bison's skeleton file comes too late.  This must come before <config.h>
-   because <config.h> may include arbitrary system headers.
-   This can go away once the AM_INTL_SUBDIR macro requires bison >= 2.0.  */
-#if defined _AIX && !defined __GNUC__
- #pragma alloca
-#endif
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <stddef.h>
-#include <stdlib.h>
-#include <string.h>
-#include "plural-exp.h"
-
-/* The main function generated by the parser is called __gettextparse,
-   but we want it to be called PLURAL_PARSE.  */
-#ifndef _LIBC
-# define __gettextparse PLURAL_PARSE
-#endif
-
-#define YYLEX_PARAM	&((struct parse_args *) arg)->cp
-#define YYPARSE_PARAM	arg
-%}
-%pure_parser
-%expect 7
-
-%union {
-  unsigned long int num;
-  enum expression_operator op;
-  struct expression *exp;
-}
-
-%{
-/* Prototypes for local functions.  */
-static int yylex (YYSTYPE *lval, const char **pexp);
-static void yyerror (const char *str);
-
-/* Allocation of expressions.  */
-
-static struct expression *
-new_exp (int nargs, enum expression_operator op,
-	 struct expression * const *args)
-{
-  int i;
-  struct expression *newp;
-
-  /* If any of the argument could not be malloc'ed, just return NULL.  */
-  for (i = nargs - 1; i >= 0; i--)
-    if (args[i] == NULL)
-      goto fail;
-
-  /* Allocate a new expression.  */
-  newp = (struct expression *) malloc (sizeof (*newp));
-  if (newp != NULL)
-    {
-      newp->nargs = nargs;
-      newp->operation = op;
-      for (i = nargs - 1; i >= 0; i--)
-	newp->val.args[i] = args[i];
-      return newp;
-    }
-
- fail:
-  for (i = nargs - 1; i >= 0; i--)
-    FREE_EXPRESSION (args[i]);
-
-  return NULL;
-}
-
-static inline struct expression *
-new_exp_0 (enum expression_operator op)
-{
-  return new_exp (0, op, NULL);
-}
-
-static inline struct expression *
-new_exp_1 (enum expression_operator op, struct expression *right)
-{
-  struct expression *args[1];
-
-  args[0] = right;
-  return new_exp (1, op, args);
-}
-
-static struct expression *
-new_exp_2 (enum expression_operator op, struct expression *left,
-	   struct expression *right)
-{
-  struct expression *args[2];
-
-  args[0] = left;
-  args[1] = right;
-  return new_exp (2, op, args);
-}
-
-static inline struct expression *
-new_exp_3 (enum expression_operator op, struct expression *bexp,
-	   struct expression *tbranch, struct expression *fbranch)
-{
-  struct expression *args[3];
-
-  args[0] = bexp;
-  args[1] = tbranch;
-  args[2] = fbranch;
-  return new_exp (3, op, args);
-}
-
-%}
-
-/* This declares that all operators have the same associativity and the
-   precedence order as in C.  See [Harbison, Steele: C, A Reference Manual].
-   There is no unary minus and no bitwise operators.
-   Operators with the same syntactic behaviour have been merged into a single
-   token, to save space in the array generated by bison.  */
-%right '?'		/*   ?		*/
-%left '|'		/*   ||		*/
-%left '&'		/*   &&		*/
-%left EQUOP2		/*   == !=	*/
-%left CMPOP2		/*   < > <= >=	*/
-%left ADDOP2		/*   + -	*/
-%left MULOP2		/*   * / %	*/
-%right '!'		/*   !		*/
-
-%token <op> EQUOP2 CMPOP2 ADDOP2 MULOP2
-%token <num> NUMBER
-%type <exp> exp
-
-%%
-
-start:	  exp
-	  {
-	    if ($1 == NULL)
-	      YYABORT;
-	    ((struct parse_args *) arg)->res = $1;
-	  }
-	;
-
-exp:	  exp '?' exp ':' exp
-	  {
-	    $$ = new_exp_3 (qmop, $1, $3, $5);
-	  }
-	| exp '|' exp
-	  {
-	    $$ = new_exp_2 (lor, $1, $3);
-	  }
-	| exp '&' exp
-	  {
-	    $$ = new_exp_2 (land, $1, $3);
-	  }
-	| exp EQUOP2 exp
-	  {
-	    $$ = new_exp_2 ($2, $1, $3);
-	  }
-	| exp CMPOP2 exp
-	  {
-	    $$ = new_exp_2 ($2, $1, $3);
-	  }
-	| exp ADDOP2 exp
-	  {
-	    $$ = new_exp_2 ($2, $1, $3);
-	  }
-	| exp MULOP2 exp
-	  {
-	    $$ = new_exp_2 ($2, $1, $3);
-	  }
-	| '!' exp
-	  {
-	    $$ = new_exp_1 (lnot, $2);
-	  }
-	| 'n'
-	  {
-	    $$ = new_exp_0 (var);
-	  }
-	| NUMBER
-	  {
-	    if (($$ = new_exp_0 (num)) != NULL)
-	      $$->val.num = $1;
-	  }
-	| '(' exp ')'
-	  {
-	    $$ = $2;
-	  }
-	;
-
-%%
-
-void
-internal_function
-FREE_EXPRESSION (struct expression *exp)
-{
-  if (exp == NULL)
-    return;
-
-  /* Handle the recursive case.  */
-  switch (exp->nargs)
-    {
-    case 3:
-      FREE_EXPRESSION (exp->val.args[2]);
-      /* FALLTHROUGH */
-    case 2:
-      FREE_EXPRESSION (exp->val.args[1]);
-      /* FALLTHROUGH */
-    case 1:
-      FREE_EXPRESSION (exp->val.args[0]);
-      /* FALLTHROUGH */
-    default:
-      break;
-    }
-
-  free (exp);
-}
-
-
-static int
-yylex (YYSTYPE *lval, const char **pexp)
-{
-  const char *exp = *pexp;
-  int result;
-
-  while (1)
-    {
-      if (exp[0] == '\0')
-	{
-	  *pexp = exp;
-	  return YYEOF;
-	}
-
-      if (exp[0] != ' ' && exp[0] != '\t')
-	break;
-
-      ++exp;
-    }
-
-  result = *exp++;
-  switch (result)
-    {
-    case '0': case '1': case '2': case '3': case '4':
-    case '5': case '6': case '7': case '8': case '9':
-      {
-	unsigned long int n = result - '0';
-	while (exp[0] >= '0' && exp[0] <= '9')
-	  {
-	    n *= 10;
-	    n += exp[0] - '0';
-	    ++exp;
-	  }
-	lval->num = n;
-	result = NUMBER;
-      }
-      break;
-
-    case '=':
-      if (exp[0] == '=')
-	{
-	  ++exp;
-	  lval->op = equal;
-	  result = EQUOP2;
-	}
-      else
-	result = YYERRCODE;
-      break;
-
-    case '!':
-      if (exp[0] == '=')
-	{
-	  ++exp;
-	  lval->op = not_equal;
-	  result = EQUOP2;
-	}
-      break;
-
-    case '&':
-    case '|':
-      if (exp[0] == result)
-	++exp;
-      else
-	result = YYERRCODE;
-      break;
-
-    case '<':
-      if (exp[0] == '=')
-	{
-	  ++exp;
-	  lval->op = less_or_equal;
-	}
-      else
-	lval->op = less_than;
-      result = CMPOP2;
-      break;
-
-    case '>':
-      if (exp[0] == '=')
-	{
-	  ++exp;
-	  lval->op = greater_or_equal;
-	}
-      else
-	lval->op = greater_than;
-      result = CMPOP2;
-      break;
-
-    case '*':
-      lval->op = mult;
-      result = MULOP2;
-      break;
-
-    case '/':
-      lval->op = divide;
-      result = MULOP2;
-      break;
-
-    case '%':
-      lval->op = module;
-      result = MULOP2;
-      break;
-
-    case '+':
-      lval->op = plus;
-      result = ADDOP2;
-      break;
-
-    case '-':
-      lval->op = minus;
-      result = ADDOP2;
-      break;
-
-    case 'n':
-    case '?':
-    case ':':
-    case '(':
-    case ')':
-      /* Nothing, just return the character.  */
-      break;
-
-    case ';':
-    case '\n':
-    case '\0':
-      /* Be safe and let the user call this function again.  */
-      --exp;
-      result = YYEOF;
-      break;
-
-    default:
-      result = YYERRCODE;
-#if YYDEBUG != 0
-      --exp;
-#endif
-      break;
-    }
-
-  *pexp = exp;
-
-  return result;
-}
-
-
-static void
-yyerror (const char *str)
-{
-  /* Do nothing.  We don't print error messages here.  */
-}
diff -urpN mc-4.8.23/intl/printf-args.c mc-4.8.24/intl/printf-args.c
--- mc-4.8.23/intl/printf-args.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/printf-args.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,188 +0,0 @@
-/* Decomposed printf argument list.
-   Copyright (C) 1999, 2002-2003, 2005-2007 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* This file can be parametrized with the following macros:
-     ENABLE_UNISTDIO    Set to 1 to enable the unistdio extensions.
-     PRINTF_FETCHARGS   Name of the function to be defined.
-     STATIC             Set to 'static' to declare the function static.  */
-
-#ifndef PRINTF_FETCHARGS
-# include <config.h>
-#endif
-
-/* Specification.  */
-#ifndef PRINTF_FETCHARGS
-# include "printf-args.h"
-#endif
-
-#ifdef STATIC
-STATIC
-#endif
-int
-PRINTF_FETCHARGS (va_list args, arguments *a)
-{
-  size_t i;
-  argument *ap;
-
-  for (i = 0, ap = &a->arg[0]; i < a->count; i++, ap++)
-    switch (ap->type)
-      {
-      case TYPE_SCHAR:
-        ap->a.a_schar = va_arg (args, /*signed char*/ int);
-        break;
-      case TYPE_UCHAR:
-        ap->a.a_uchar = va_arg (args, /*unsigned char*/ int);
-        break;
-      case TYPE_SHORT:
-        ap->a.a_short = va_arg (args, /*short*/ int);
-        break;
-      case TYPE_USHORT:
-        ap->a.a_ushort = va_arg (args, /*unsigned short*/ int);
-        break;
-      case TYPE_INT:
-        ap->a.a_int = va_arg (args, int);
-        break;
-      case TYPE_UINT:
-        ap->a.a_uint = va_arg (args, unsigned int);
-        break;
-      case TYPE_LONGINT:
-        ap->a.a_longint = va_arg (args, long int);
-        break;
-      case TYPE_ULONGINT:
-        ap->a.a_ulongint = va_arg (args, unsigned long int);
-        break;
-#if HAVE_LONG_LONG_INT
-      case TYPE_LONGLONGINT:
-        ap->a.a_longlongint = va_arg (args, long long int);
-        break;
-      case TYPE_ULONGLONGINT:
-        ap->a.a_ulonglongint = va_arg (args, unsigned long long int);
-        break;
-#endif
-      case TYPE_DOUBLE:
-        ap->a.a_double = va_arg (args, double);
-        break;
-      case TYPE_LONGDOUBLE:
-        ap->a.a_longdouble = va_arg (args, long double);
-        break;
-      case TYPE_CHAR:
-        ap->a.a_char = va_arg (args, int);
-        break;
-#if HAVE_WINT_T
-      case TYPE_WIDE_CHAR:
-        /* Although ISO C 99 7.24.1.(2) says that wint_t is "unchanged by
-           default argument promotions", this is not the case in mingw32,
-           where wint_t is 'unsigned short'.  */
-        ap->a.a_wide_char =
-          (sizeof (wint_t) < sizeof (int)
-           ? va_arg (args, int)
-           : va_arg (args, wint_t));
-        break;
-#endif
-      case TYPE_STRING:
-        ap->a.a_string = va_arg (args, const char *);
-        /* A null pointer is an invalid argument for "%s", but in practice
-           it occurs quite frequently in printf statements that produce
-           debug output.  Use a fallback in this case.  */
-        if (ap->a.a_string == NULL)
-          ap->a.a_string = "(NULL)";
-        break;
-#if HAVE_WCHAR_T
-      case TYPE_WIDE_STRING:
-        ap->a.a_wide_string = va_arg (args, const wchar_t *);
-        /* A null pointer is an invalid argument for "%ls", but in practice
-           it occurs quite frequently in printf statements that produce
-           debug output.  Use a fallback in this case.  */
-        if (ap->a.a_wide_string == NULL)
-          {
-            static const wchar_t wide_null_string[] =
-              {
-                (wchar_t)'(',
-                (wchar_t)'N', (wchar_t)'U', (wchar_t)'L', (wchar_t)'L',
-                (wchar_t)')',
-                (wchar_t)0
-              };
-            ap->a.a_wide_string = wide_null_string;
-          }
-        break;
-#endif
-      case TYPE_POINTER:
-        ap->a.a_pointer = va_arg (args, void *);
-        break;
-      case TYPE_COUNT_SCHAR_POINTER:
-        ap->a.a_count_schar_pointer = va_arg (args, signed char *);
-        break;
-      case TYPE_COUNT_SHORT_POINTER:
-        ap->a.a_count_short_pointer = va_arg (args, short *);
-        break;
-      case TYPE_COUNT_INT_POINTER:
-        ap->a.a_count_int_pointer = va_arg (args, int *);
-        break;
-      case TYPE_COUNT_LONGINT_POINTER:
-        ap->a.a_count_longint_pointer = va_arg (args, long int *);
-        break;
-#if HAVE_LONG_LONG_INT
-      case TYPE_COUNT_LONGLONGINT_POINTER:
-        ap->a.a_count_longlongint_pointer = va_arg (args, long long int *);
-        break;
-#endif
-#if ENABLE_UNISTDIO
-      /* The unistdio extensions.  */
-      case TYPE_U8_STRING:
-        ap->a.a_u8_string = va_arg (args, const uint8_t *);
-        /* A null pointer is an invalid argument for "%U", but in practice
-           it occurs quite frequently in printf statements that produce
-           debug output.  Use a fallback in this case.  */
-        if (ap->a.a_u8_string == NULL)
-          {
-            static const uint8_t u8_null_string[] =
-              { '(', 'N', 'U', 'L', 'L', ')', 0 };
-            ap->a.a_u8_string = u8_null_string;
-          }
-        break;
-      case TYPE_U16_STRING:
-        ap->a.a_u16_string = va_arg (args, const uint16_t *);
-        /* A null pointer is an invalid argument for "%lU", but in practice
-           it occurs quite frequently in printf statements that produce
-           debug output.  Use a fallback in this case.  */
-        if (ap->a.a_u16_string == NULL)
-          {
-            static const uint16_t u16_null_string[] =
-              { '(', 'N', 'U', 'L', 'L', ')', 0 };
-            ap->a.a_u16_string = u16_null_string;
-          }
-        break;
-      case TYPE_U32_STRING:
-        ap->a.a_u32_string = va_arg (args, const uint32_t *);
-        /* A null pointer is an invalid argument for "%llU", but in practice
-           it occurs quite frequently in printf statements that produce
-           debug output.  Use a fallback in this case.  */
-        if (ap->a.a_u32_string == NULL)
-          {
-            static const uint32_t u32_null_string[] =
-              { '(', 'N', 'U', 'L', 'L', ')', 0 };
-            ap->a.a_u32_string = u32_null_string;
-          }
-        break;
-#endif
-      default:
-        /* Unknown type.  */
-        return -1;
-      }
-  return 0;
-}
diff -urpN mc-4.8.23/intl/printf-args.h mc-4.8.24/intl/printf-args.h
--- mc-4.8.23/intl/printf-args.h	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/printf-args.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,155 +0,0 @@
-/* Decomposed printf argument list.
-   Copyright (C) 1999, 2002-2003, 2006-2007 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _PRINTF_ARGS_H
-#define _PRINTF_ARGS_H
-
-/* This file can be parametrized with the following macros:
-     ENABLE_UNISTDIO    Set to 1 to enable the unistdio extensions.
-     PRINTF_FETCHARGS   Name of the function to be declared.
-     STATIC             Set to 'static' to declare the function static.  */
-
-/* Default parameters.  */
-#ifndef PRINTF_FETCHARGS
-# define PRINTF_FETCHARGS printf_fetchargs
-#endif
-
-/* Get size_t.  */
-#include <stddef.h>
-
-/* Get wchar_t.  */
-#if HAVE_WCHAR_T
-# include <stddef.h>
-#endif
-
-/* Get wint_t.  */
-#if HAVE_WINT_T
-# include <wchar.h>
-#endif
-
-/* Get va_list.  */
-#include <stdarg.h>
-
-
-/* Argument types */
-typedef enum
-{
-  TYPE_NONE,
-  TYPE_SCHAR,
-  TYPE_UCHAR,
-  TYPE_SHORT,
-  TYPE_USHORT,
-  TYPE_INT,
-  TYPE_UINT,
-  TYPE_LONGINT,
-  TYPE_ULONGINT,
-#if HAVE_LONG_LONG_INT
-  TYPE_LONGLONGINT,
-  TYPE_ULONGLONGINT,
-#endif
-  TYPE_DOUBLE,
-  TYPE_LONGDOUBLE,
-  TYPE_CHAR,
-#if HAVE_WINT_T
-  TYPE_WIDE_CHAR,
-#endif
-  TYPE_STRING,
-#if HAVE_WCHAR_T
-  TYPE_WIDE_STRING,
-#endif
-  TYPE_POINTER,
-  TYPE_COUNT_SCHAR_POINTER,
-  TYPE_COUNT_SHORT_POINTER,
-  TYPE_COUNT_INT_POINTER,
-  TYPE_COUNT_LONGINT_POINTER
-#if HAVE_LONG_LONG_INT
-, TYPE_COUNT_LONGLONGINT_POINTER
-#endif
-#if ENABLE_UNISTDIO
-  /* The unistdio extensions.  */
-, TYPE_U8_STRING
-, TYPE_U16_STRING
-, TYPE_U32_STRING
-#endif
-} arg_type;
-
-/* Polymorphic argument */
-typedef struct
-{
-  arg_type type;
-  union
-  {
-    signed char                 a_schar;
-    unsigned char               a_uchar;
-    short                       a_short;
-    unsigned short              a_ushort;
-    int                         a_int;
-    unsigned int                a_uint;
-    long int                    a_longint;
-    unsigned long int           a_ulongint;
-#if HAVE_LONG_LONG_INT
-    long long int               a_longlongint;
-    unsigned long long int      a_ulonglongint;
-#endif
-    float                       a_float;
-    double                      a_double;
-    long double                 a_longdouble;
-    int                         a_char;
-#if HAVE_WINT_T
-    wint_t                      a_wide_char;
-#endif
-    const char*                 a_string;
-#if HAVE_WCHAR_T
-    const wchar_t*              a_wide_string;
-#endif
-    void*                       a_pointer;
-    signed char *               a_count_schar_pointer;
-    short *                     a_count_short_pointer;
-    int *                       a_count_int_pointer;
-    long int *                  a_count_longint_pointer;
-#if HAVE_LONG_LONG_INT
-    long long int *             a_count_longlongint_pointer;
-#endif
-#if ENABLE_UNISTDIO
-    /* The unistdio extensions.  */
-    const uint8_t *             a_u8_string;
-    const uint16_t *            a_u16_string;
-    const uint32_t *            a_u32_string;
-#endif
-  }
-  a;
-}
-argument;
-
-typedef struct
-{
-  size_t count;
-  argument *arg;
-}
-arguments;
-
-
-/* Fetch the arguments, putting them into a. */
-#ifdef STATIC
-STATIC
-#else
-extern
-#endif
-int PRINTF_FETCHARGS (va_list args, arguments *a);
-
-#endif /* _PRINTF_ARGS_H */
diff -urpN mc-4.8.23/intl/printf-parse.c mc-4.8.24/intl/printf-parse.c
--- mc-4.8.23/intl/printf-parse.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/printf-parse.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,628 +0,0 @@
-/* Formatted output to strings.
-   Copyright (C) 1999-2000, 2002-2003, 2006-2008 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* This file can be parametrized with the following macros:
-     CHAR_T             The element type of the format string.
-     CHAR_T_ONLY_ASCII  Set to 1 to enable verification that all characters
-                        in the format string are ASCII.
-     DIRECTIVE          Structure denoting a format directive.
-                        Depends on CHAR_T.
-     DIRECTIVES         Structure denoting the set of format directives of a
-                        format string.  Depends on CHAR_T.
-     PRINTF_PARSE       Function that parses a format string.
-                        Depends on CHAR_T.
-     STATIC             Set to 'static' to declare the function static.
-     ENABLE_UNISTDIO    Set to 1 to enable the unistdio extensions.  */
-
-#ifndef PRINTF_PARSE
-# include <config.h>
-#endif
-
-/* Specification.  */
-#ifndef PRINTF_PARSE
-# include "printf-parse.h"
-#endif
-
-/* Default parameters.  */
-#ifndef PRINTF_PARSE
-# define PRINTF_PARSE printf_parse
-# define CHAR_T char
-# define DIRECTIVE char_directive
-# define DIRECTIVES char_directives
-#endif
-
-/* Get size_t, NULL.  */
-#include <stddef.h>
-
-/* Get intmax_t.  */
-#if defined IN_LIBINTL || defined IN_LIBASPRINTF
-# if HAVE_STDINT_H_WITH_UINTMAX
-#  include <stdint.h>
-# endif
-# if HAVE_INTTYPES_H_WITH_UINTMAX
-#  include <inttypes.h>
-# endif
-#else
-# include <stdint.h>
-#endif
-
-/* malloc(), realloc(), free().  */
-#include <stdlib.h>
-
-/* errno.  */
-#include <errno.h>
-
-/* Checked size_t computations.  */
-#include "xsize.h"
-
-#if CHAR_T_ONLY_ASCII
-/* c_isascii().  */
-# include "c-ctype.h"
-#endif
-
-#ifdef STATIC
-STATIC
-#endif
-int
-PRINTF_PARSE (const CHAR_T *format, DIRECTIVES *d, arguments *a)
-{
-  const CHAR_T *cp = format;            /* pointer into format */
-  size_t arg_posn = 0;          /* number of regular arguments consumed */
-  size_t d_allocated;                   /* allocated elements of d->dir */
-  size_t a_allocated;                   /* allocated elements of a->arg */
-  size_t max_width_length = 0;
-  size_t max_precision_length = 0;
-
-  d->count = 0;
-  d_allocated = 1;
-  d->dir = (DIRECTIVE *) malloc (d_allocated * sizeof (DIRECTIVE));
-  if (d->dir == NULL)
-    /* Out of memory.  */
-    goto out_of_memory_1;
-
-  a->count = 0;
-  a_allocated = 0;
-  a->arg = NULL;
-
-#define REGISTER_ARG(_index_,_type_) \
-  {                                                                     \
-    size_t n = (_index_);                                               \
-    if (n >= a_allocated)                                               \
-      {                                                                 \
-        size_t memory_size;                                             \
-        argument *memory;                                               \
-                                                                        \
-        a_allocated = xtimes (a_allocated, 2);                          \
-        if (a_allocated <= n)                                           \
-          a_allocated = xsum (n, 1);                                    \
-        memory_size = xtimes (a_allocated, sizeof (argument));          \
-        if (size_overflow_p (memory_size))                              \
-          /* Overflow, would lead to out of memory.  */                 \
-          goto out_of_memory;                                           \
-        memory = (argument *) (a->arg                                   \
-                               ? realloc (a->arg, memory_size)          \
-                               : malloc (memory_size));                 \
-        if (memory == NULL)                                             \
-          /* Out of memory.  */                                         \
-          goto out_of_memory;                                           \
-        a->arg = memory;                                                \
-      }                                                                 \
-    while (a->count <= n)                                               \
-      a->arg[a->count++].type = TYPE_NONE;                              \
-    if (a->arg[n].type == TYPE_NONE)                                    \
-      a->arg[n].type = (_type_);                                        \
-    else if (a->arg[n].type != (_type_))                                \
-      /* Ambiguous type for positional argument.  */                    \
-      goto error;                                                       \
-  }
-
-  while (*cp != '\0')
-    {
-      CHAR_T c = *cp++;
-      if (c == '%')
-        {
-          size_t arg_index = ARG_NONE;
-          DIRECTIVE *dp = &d->dir[d->count]; /* pointer to next directive */
-
-          /* Initialize the next directive.  */
-          dp->dir_start = cp - 1;
-          dp->flags = 0;
-          dp->width_start = NULL;
-          dp->width_end = NULL;
-          dp->width_arg_index = ARG_NONE;
-          dp->precision_start = NULL;
-          dp->precision_end = NULL;
-          dp->precision_arg_index = ARG_NONE;
-          dp->arg_index = ARG_NONE;
-
-          /* Test for positional argument.  */
-          if (*cp >= '0' && *cp <= '9')
-            {
-              const CHAR_T *np;
-
-              for (np = cp; *np >= '0' && *np <= '9'; np++)
-                ;
-              if (*np == '$')
-                {
-                  size_t n = 0;
-
-                  for (np = cp; *np >= '0' && *np <= '9'; np++)
-                    n = xsum (xtimes (n, 10), *np - '0');
-                  if (n == 0)
-                    /* Positional argument 0.  */
-                    goto error;
-                  if (size_overflow_p (n))
-                    /* n too large, would lead to out of memory later.  */
-                    goto error;
-                  arg_index = n - 1;
-                  cp = np + 1;
-                }
-            }
-
-          /* Read the flags.  */
-          for (;;)
-            {
-              if (*cp == '\'')
-                {
-                  dp->flags |= FLAG_GROUP;
-                  cp++;
-                }
-              else if (*cp == '-')
-                {
-                  dp->flags |= FLAG_LEFT;
-                  cp++;
-                }
-              else if (*cp == '+')
-                {
-                  dp->flags |= FLAG_SHOWSIGN;
-                  cp++;
-                }
-              else if (*cp == ' ')
-                {
-                  dp->flags |= FLAG_SPACE;
-                  cp++;
-                }
-              else if (*cp == '#')
-                {
-                  dp->flags |= FLAG_ALT;
-                  cp++;
-                }
-              else if (*cp == '0')
-                {
-                  dp->flags |= FLAG_ZERO;
-                  cp++;
-                }
-              else
-                break;
-            }
-
-          /* Parse the field width.  */
-          if (*cp == '*')
-            {
-              dp->width_start = cp;
-              cp++;
-              dp->width_end = cp;
-              if (max_width_length < 1)
-                max_width_length = 1;
-
-              /* Test for positional argument.  */
-              if (*cp >= '0' && *cp <= '9')
-                {
-                  const CHAR_T *np;
-
-                  for (np = cp; *np >= '0' && *np <= '9'; np++)
-                    ;
-                  if (*np == '$')
-                    {
-                      size_t n = 0;
-
-                      for (np = cp; *np >= '0' && *np <= '9'; np++)
-                        n = xsum (xtimes (n, 10), *np - '0');
-                      if (n == 0)
-                        /* Positional argument 0.  */
-                        goto error;
-                      if (size_overflow_p (n))
-                        /* n too large, would lead to out of memory later.  */
-                        goto error;
-                      dp->width_arg_index = n - 1;
-                      cp = np + 1;
-                    }
-                }
-              if (dp->width_arg_index == ARG_NONE)
-                {
-                  dp->width_arg_index = arg_posn++;
-                  if (dp->width_arg_index == ARG_NONE)
-                    /* arg_posn wrapped around.  */
-                    goto error;
-                }
-              REGISTER_ARG (dp->width_arg_index, TYPE_INT);
-            }
-          else if (*cp >= '0' && *cp <= '9')
-            {
-              size_t width_length;
-
-              dp->width_start = cp;
-              for (; *cp >= '0' && *cp <= '9'; cp++)
-                ;
-              dp->width_end = cp;
-              width_length = dp->width_end - dp->width_start;
-              if (max_width_length < width_length)
-                max_width_length = width_length;
-            }
-
-          /* Parse the precision.  */
-          if (*cp == '.')
-            {
-              cp++;
-              if (*cp == '*')
-                {
-                  dp->precision_start = cp - 1;
-                  cp++;
-                  dp->precision_end = cp;
-                  if (max_precision_length < 2)
-                    max_precision_length = 2;
-
-                  /* Test for positional argument.  */
-                  if (*cp >= '0' && *cp <= '9')
-                    {
-                      const CHAR_T *np;
-
-                      for (np = cp; *np >= '0' && *np <= '9'; np++)
-                        ;
-                      if (*np == '$')
-                        {
-                          size_t n = 0;
-
-                          for (np = cp; *np >= '0' && *np <= '9'; np++)
-                            n = xsum (xtimes (n, 10), *np - '0');
-                          if (n == 0)
-                            /* Positional argument 0.  */
-                            goto error;
-                          if (size_overflow_p (n))
-                            /* n too large, would lead to out of memory
-                               later.  */
-                            goto error;
-                          dp->precision_arg_index = n - 1;
-                          cp = np + 1;
-                        }
-                    }
-                  if (dp->precision_arg_index == ARG_NONE)
-                    {
-                      dp->precision_arg_index = arg_posn++;
-                      if (dp->precision_arg_index == ARG_NONE)
-                        /* arg_posn wrapped around.  */
-                        goto error;
-                    }
-                  REGISTER_ARG (dp->precision_arg_index, TYPE_INT);
-                }
-              else
-                {
-                  size_t precision_length;
-
-                  dp->precision_start = cp - 1;
-                  for (; *cp >= '0' && *cp <= '9'; cp++)
-                    ;
-                  dp->precision_end = cp;
-                  precision_length = dp->precision_end - dp->precision_start;
-                  if (max_precision_length < precision_length)
-                    max_precision_length = precision_length;
-                }
-            }
-
-          {
-            arg_type type;
-
-            /* Parse argument type/size specifiers.  */
-            {
-              int flags = 0;
-
-              for (;;)
-                {
-                  if (*cp == 'h')
-                    {
-                      flags |= (1 << (flags & 1));
-                      cp++;
-                    }
-                  else if (*cp == 'L')
-                    {
-                      flags |= 4;
-                      cp++;
-                    }
-                  else if (*cp == 'l')
-                    {
-                      flags += 8;
-                      cp++;
-                    }
-                  else if (*cp == 'j')
-                    {
-                      if (sizeof (intmax_t) > sizeof (long))
-                        {
-                          /* intmax_t = long long */
-                          flags += 16;
-                        }
-                      else if (sizeof (intmax_t) > sizeof (int))
-                        {
-                          /* intmax_t = long */
-                          flags += 8;
-                        }
-                      cp++;
-                    }
-                  else if (*cp == 'z' || *cp == 'Z')
-                    {
-                      /* 'z' is standardized in ISO C 99, but glibc uses 'Z'
-                         because the warning facility in gcc-2.95.2 understands
-                         only 'Z' (see gcc-2.95.2/gcc/c-common.c:1784).  */
-                      if (sizeof (size_t) > sizeof (long))
-                        {
-                          /* size_t = long long */
-                          flags += 16;
-                        }
-                      else if (sizeof (size_t) > sizeof (int))
-                        {
-                          /* size_t = long */
-                          flags += 8;
-                        }
-                      cp++;
-                    }
-                  else if (*cp == 't')
-                    {
-                      if (sizeof (ptrdiff_t) > sizeof (long))
-                        {
-                          /* ptrdiff_t = long long */
-                          flags += 16;
-                        }
-                      else if (sizeof (ptrdiff_t) > sizeof (int))
-                        {
-                          /* ptrdiff_t = long */
-                          flags += 8;
-                        }
-                      cp++;
-                    }
-#if defined __APPLE__ && defined __MACH__
-                  /* On MacOS X 10.3, PRIdMAX is defined as "qd".
-                     We cannot change it to "lld" because PRIdMAX must also
-                     be understood by the system's printf routines.  */
-                  else if (*cp == 'q')
-                    {
-                      if (64 / 8 > sizeof (long))
-                        {
-                          /* int64_t = long long */
-                          flags += 16;
-                        }
-                      else
-                        {
-                          /* int64_t = long */
-                          flags += 8;
-                        }
-                      cp++;
-                    }
-#endif
-#if (defined _WIN32 || defined __WIN32__) && ! defined __CYGWIN__
-                  /* On native Win32, PRIdMAX is defined as "I64d".
-                     We cannot change it to "lld" because PRIdMAX must also
-                     be understood by the system's printf routines.  */
-                  else if (*cp == 'I' && cp[1] == '6' && cp[2] == '4')
-                    {
-                      if (64 / 8 > sizeof (long))
-                        {
-                          /* __int64 = long long */
-                          flags += 16;
-                        }
-                      else
-                        {
-                          /* __int64 = long */
-                          flags += 8;
-                        }
-                      cp += 3;
-                    }
-#endif
-                  else
-                    break;
-                }
-
-              /* Read the conversion character.  */
-              c = *cp++;
-              switch (c)
-                {
-                case 'd': case 'i':
-#if HAVE_LONG_LONG_INT
-                  /* If 'long long' exists and is larger than 'long':  */
-                  if (flags >= 16 || (flags & 4))
-                    type = TYPE_LONGLONGINT;
-                  else
-#endif
-                  /* If 'long long' exists and is the same as 'long', we parse
-                     "lld" into TYPE_LONGINT.  */
-                  if (flags >= 8)
-                    type = TYPE_LONGINT;
-                  else if (flags & 2)
-                    type = TYPE_SCHAR;
-                  else if (flags & 1)
-                    type = TYPE_SHORT;
-                  else
-                    type = TYPE_INT;
-                  break;
-                case 'o': case 'u': case 'x': case 'X':
-#if HAVE_LONG_LONG_INT
-                  /* If 'long long' exists and is larger than 'long':  */
-                  if (flags >= 16 || (flags & 4))
-                    type = TYPE_ULONGLONGINT;
-                  else
-#endif
-                  /* If 'unsigned long long' exists and is the same as
-                     'unsigned long', we parse "llu" into TYPE_ULONGINT.  */
-                  if (flags >= 8)
-                    type = TYPE_ULONGINT;
-                  else if (flags & 2)
-                    type = TYPE_UCHAR;
-                  else if (flags & 1)
-                    type = TYPE_USHORT;
-                  else
-                    type = TYPE_UINT;
-                  break;
-                case 'f': case 'F': case 'e': case 'E': case 'g': case 'G':
-                case 'a': case 'A':
-                  if (flags >= 16 || (flags & 4))
-                    type = TYPE_LONGDOUBLE;
-                  else
-                    type = TYPE_DOUBLE;
-                  break;
-                case 'c':
-                  if (flags >= 8)
-#if HAVE_WINT_T
-                    type = TYPE_WIDE_CHAR;
-#else
-                    goto error;
-#endif
-                  else
-                    type = TYPE_CHAR;
-                  break;
-#if HAVE_WINT_T
-                case 'C':
-                  type = TYPE_WIDE_CHAR;
-                  c = 'c';
-                  break;
-#endif
-                case 's':
-                  if (flags >= 8)
-#if HAVE_WCHAR_T
-                    type = TYPE_WIDE_STRING;
-#else
-                    goto error;
-#endif
-                  else
-                    type = TYPE_STRING;
-                  break;
-#if HAVE_WCHAR_T
-                case 'S':
-                  type = TYPE_WIDE_STRING;
-                  c = 's';
-                  break;
-#endif
-                case 'p':
-                  type = TYPE_POINTER;
-                  break;
-                case 'n':
-#if HAVE_LONG_LONG_INT
-                  /* If 'long long' exists and is larger than 'long':  */
-                  if (flags >= 16 || (flags & 4))
-                    type = TYPE_COUNT_LONGLONGINT_POINTER;
-                  else
-#endif
-                  /* If 'long long' exists and is the same as 'long', we parse
-                     "lln" into TYPE_COUNT_LONGINT_POINTER.  */
-                  if (flags >= 8)
-                    type = TYPE_COUNT_LONGINT_POINTER;
-                  else if (flags & 2)
-                    type = TYPE_COUNT_SCHAR_POINTER;
-                  else if (flags & 1)
-                    type = TYPE_COUNT_SHORT_POINTER;
-                  else
-                    type = TYPE_COUNT_INT_POINTER;
-                  break;
-#if ENABLE_UNISTDIO
-                /* The unistdio extensions.  */
-                case 'U':
-                  if (flags >= 16)
-                    type = TYPE_U32_STRING;
-                  else if (flags >= 8)
-                    type = TYPE_U16_STRING;
-                  else
-                    type = TYPE_U8_STRING;
-                  break;
-#endif
-                case '%':
-                  type = TYPE_NONE;
-                  break;
-                default:
-                  /* Unknown conversion character.  */
-                  goto error;
-                }
-            }
-
-            if (type != TYPE_NONE)
-              {
-                dp->arg_index = arg_index;
-                if (dp->arg_index == ARG_NONE)
-                  {
-                    dp->arg_index = arg_posn++;
-                    if (dp->arg_index == ARG_NONE)
-                      /* arg_posn wrapped around.  */
-                      goto error;
-                  }
-                REGISTER_ARG (dp->arg_index, type);
-              }
-            dp->conversion = c;
-            dp->dir_end = cp;
-          }
-
-          d->count++;
-          if (d->count >= d_allocated)
-            {
-              size_t memory_size;
-              DIRECTIVE *memory;
-
-              d_allocated = xtimes (d_allocated, 2);
-              memory_size = xtimes (d_allocated, sizeof (DIRECTIVE));
-              if (size_overflow_p (memory_size))
-                /* Overflow, would lead to out of memory.  */
-                goto out_of_memory;
-              memory = (DIRECTIVE *) realloc (d->dir, memory_size);
-              if (memory == NULL)
-                /* Out of memory.  */
-                goto out_of_memory;
-              d->dir = memory;
-            }
-        }
-#if CHAR_T_ONLY_ASCII
-      else if (!c_isascii (c))
-        {
-          /* Non-ASCII character.  Not supported.  */
-          goto error;
-        }
-#endif
-    }
-  d->dir[d->count].dir_start = cp;
-
-  d->max_width_length = max_width_length;
-  d->max_precision_length = max_precision_length;
-  return 0;
-
-error:
-  if (a->arg)
-    free (a->arg);
-  if (d->dir)
-    free (d->dir);
-  errno = EINVAL;
-  return -1;
-
-out_of_memory:
-  if (a->arg)
-    free (a->arg);
-  if (d->dir)
-    free (d->dir);
-out_of_memory_1:
-  errno = ENOMEM;
-  return -1;
-}
-
-#undef PRINTF_PARSE
-#undef DIRECTIVES
-#undef DIRECTIVE
-#undef CHAR_T_ONLY_ASCII
-#undef CHAR_T
diff -urpN mc-4.8.23/intl/printf-parse.h mc-4.8.24/intl/printf-parse.h
--- mc-4.8.23/intl/printf-parse.h	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/printf-parse.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,75 +0,0 @@
-/* Parse printf format string.
-   Copyright (C) 1999, 2002-2003 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _PRINTF_PARSE_H
-#define _PRINTF_PARSE_H
-
-#include "printf-args.h"
-
-
-/* Flags */
-#define FLAG_GROUP       1      /* ' flag */
-#define FLAG_LEFT        2      /* - flag */
-#define FLAG_SHOWSIGN    4      /* + flag */
-#define FLAG_SPACE       8      /* space flag */
-#define FLAG_ALT        16      /* # flag */
-#define FLAG_ZERO       32
-
-/* arg_index value indicating that no argument is consumed.  */
-#define ARG_NONE        (~(size_t)0)
-
-/* A parsed directive.  */
-typedef struct
-{
-  const char* dir_start;
-  const char* dir_end;
-  int flags;
-  const char* width_start;
-  const char* width_end;
-  size_t width_arg_index;
-  const char* precision_start;
-  const char* precision_end;
-  size_t precision_arg_index;
-  char conversion; /* d i o u x X f e E g G c s p n U % but not C S */
-  size_t arg_index;
-}
-char_directive;
-
-/* A parsed format string.  */
-typedef struct
-{
-  size_t count;
-  char_directive *dir;
-  size_t max_width_length;
-  size_t max_precision_length;
-}
-char_directives;
-
-
-/* Parses the format string.  Fills in the number N of directives, and fills
-   in directives[0], ..., directives[N-1], and sets directives[N].dir_start
-   to the end of the format string.  Also fills in the arg_type fields of the
-   arguments and the needed count of arguments.  */
-#ifdef STATIC
-STATIC
-#else
-extern
-#endif
-int printf_parse (const char *format, char_directives *d, arguments *a);
-
-#endif /* _PRINTF_PARSE_H */
diff -urpN mc-4.8.23/intl/printf.c mc-4.8.24/intl/printf.c
--- mc-4.8.23/intl/printf.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/printf.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,429 +0,0 @@
-/* Formatted output to strings, using POSIX/XSI format strings with positions.
-   Copyright (C) 2003, 2006-2007, 2009 Free Software Foundation, Inc.
-   Written by Bruno Haible <bruno@clisp.org>, 2003.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#ifdef __GNUC__
-# define alloca __builtin_alloca
-# define HAVE_ALLOCA 1
-#else
-# ifdef _MSC_VER
-#  include <malloc.h>
-#  define alloca _alloca
-# else
-#  if defined HAVE_ALLOCA_H || defined _LIBC
-#   include <alloca.h>
-#  else
-#   ifdef _AIX
- #pragma alloca
-#   else
-#    ifndef alloca
-char *alloca ();
-#    endif
-#   endif
-#  endif
-# endif
-#endif
-
-#include <stdio.h>
-
-#if !HAVE_POSIX_PRINTF
-
-#include <errno.h>
-#include <limits.h>
-#include <stdlib.h>
-#include <string.h>
-
-/* Some systems, like OSF/1 4.0 and Woe32, don't have EOVERFLOW.  */
-#ifndef EOVERFLOW
-# define EOVERFLOW E2BIG
-#endif
-
-/* When building a DLL, we must export some functions.  Note that because
-   the functions are only defined for binary backward compatibility, we
-   don't need to use __declspec(dllimport) in any case.  */
-#if HAVE_VISIBILITY && BUILDING_DLL
-# define DLL_EXPORTED __attribute__((__visibility__("default")))
-#elif defined _MSC_VER && BUILDING_DLL
-# define DLL_EXPORTED __declspec(dllexport)
-#else
-# define DLL_EXPORTED
-#endif
-
-#define STATIC static
-
-/* This needs to be consistent with libgnuintl.h.in.  */
-#if defined __NetBSD__ || defined __BEOS__ || defined __CYGWIN__ || defined __MINGW32__
-/* Don't break __attribute__((format(printf,M,N))).
-   This redefinition is only possible because the libc in NetBSD, Cygwin,
-   mingw does not have a function __printf__.  */
-# define libintl_printf __printf__
-#endif
-
-/* Define auxiliary functions declared in "printf-args.h".  */
-#include "printf-args.c"
-
-/* Define auxiliary functions declared in "printf-parse.h".  */
-#include "printf-parse.c"
-
-/* Define functions declared in "vasnprintf.h".  */
-#define vasnprintf libintl_vasnprintf
-#include "vasnprintf.c"
-#if 0 /* not needed */
-#define asnprintf libintl_asnprintf
-#include "asnprintf.c"
-#endif
-
-DLL_EXPORTED
-int
-libintl_vfprintf (FILE *stream, const char *format, va_list args)
-{
-  if (strchr (format, '$') == NULL)
-    return vfprintf (stream, format, args);
-  else
-    {
-      size_t length;
-      char *result = libintl_vasnprintf (NULL, &length, format, args);
-      int retval = -1;
-      if (result != NULL)
-        {
-          size_t written = fwrite (result, 1, length, stream);
-          free (result);
-          if (written == length)
-            {
-              if (length > INT_MAX)
-                errno = EOVERFLOW;
-              else
-                retval = length;
-            }
-        }
-      return retval;
-    }
-}
-
-DLL_EXPORTED
-int
-libintl_fprintf (FILE *stream, const char *format, ...)
-{
-  va_list args;
-  int retval;
-
-  va_start (args, format);
-  retval = libintl_vfprintf (stream, format, args);
-  va_end (args);
-  return retval;
-}
-
-DLL_EXPORTED
-int
-libintl_vprintf (const char *format, va_list args)
-{
-  return libintl_vfprintf (stdout, format, args);
-}
-
-DLL_EXPORTED
-int
-libintl_printf (const char *format, ...)
-{
-  va_list args;
-  int retval;
-
-  va_start (args, format);
-  retval = libintl_vprintf (format, args);
-  va_end (args);
-  return retval;
-}
-
-DLL_EXPORTED
-int
-libintl_vsprintf (char *resultbuf, const char *format, va_list args)
-{
-  if (strchr (format, '$') == NULL)
-    return vsprintf (resultbuf, format, args);
-  else
-    {
-      size_t length = (size_t) ~0 / (4 * sizeof (char));
-      char *result = libintl_vasnprintf (resultbuf, &length, format, args);
-      if (result != resultbuf)
-        {
-          free (result);
-          return -1;
-        }
-      if (length > INT_MAX)
-        {
-          errno = EOVERFLOW;
-          return -1;
-        }
-      else
-        return length;
-    }
-}
-
-DLL_EXPORTED
-int
-libintl_sprintf (char *resultbuf, const char *format, ...)
-{
-  va_list args;
-  int retval;
-
-  va_start (args, format);
-  retval = libintl_vsprintf (resultbuf, format, args);
-  va_end (args);
-  return retval;
-}
-
-#if HAVE_SNPRINTF
-
-# if HAVE_DECL__SNPRINTF
-   /* Windows.  */
-#  define system_vsnprintf _vsnprintf
-# else
-   /* Unix.  */
-#  define system_vsnprintf vsnprintf
-# endif
-
-DLL_EXPORTED
-int
-libintl_vsnprintf (char *resultbuf, size_t length, const char *format, va_list args)
-{
-  if (strchr (format, '$') == NULL)
-    return system_vsnprintf (resultbuf, length, format, args);
-  else
-    {
-      size_t maxlength = length;
-      char *result = libintl_vasnprintf (resultbuf, &length, format, args);
-      if (result != resultbuf)
-        {
-          if (maxlength > 0)
-            {
-              size_t pruned_length =
-                (length < maxlength ? length : maxlength - 1);
-              memcpy (resultbuf, result, pruned_length);
-              resultbuf[pruned_length] = '\0';
-            }
-          free (result);
-        }
-      if (length > INT_MAX)
-        {
-          errno = EOVERFLOW;
-          return -1;
-        }
-      else
-        return length;
-    }
-}
-
-DLL_EXPORTED
-int
-libintl_snprintf (char *resultbuf, size_t length, const char *format, ...)
-{
-  va_list args;
-  int retval;
-
-  va_start (args, format);
-  retval = libintl_vsnprintf (resultbuf, length, format, args);
-  va_end (args);
-  return retval;
-}
-
-#endif
-
-#if HAVE_ASPRINTF
-
-DLL_EXPORTED
-int
-libintl_vasprintf (char **resultp, const char *format, va_list args)
-{
-  size_t length;
-  char *result = libintl_vasnprintf (NULL, &length, format, args);
-  if (result == NULL)
-    return -1;
-  if (length > INT_MAX)
-    {
-      free (result);
-      errno = EOVERFLOW;
-      return -1;
-    }
-  *resultp = result;
-  return length;
-}
-
-DLL_EXPORTED
-int
-libintl_asprintf (char **resultp, const char *format, ...)
-{
-  va_list args;
-  int retval;
-
-  va_start (args, format);
-  retval = libintl_vasprintf (resultp, format, args);
-  va_end (args);
-  return retval;
-}
-
-#endif
-
-#if HAVE_FWPRINTF
-
-#include <wchar.h>
-
-#define WIDE_CHAR_VERSION 1
-
-#include "wprintf-parse.h"
-/* Define auxiliary functions declared in "wprintf-parse.h".  */
-#define CHAR_T wchar_t
-#define DIRECTIVE wchar_t_directive
-#define DIRECTIVES wchar_t_directives
-#define PRINTF_PARSE wprintf_parse
-#include "printf-parse.c"
-
-/* Define functions declared in "vasnprintf.h".  */
-#define vasnwprintf libintl_vasnwprintf
-#include "vasnprintf.c"
-#if 0 /* not needed */
-#define asnwprintf libintl_asnwprintf
-#include "asnprintf.c"
-#endif
-
-# if HAVE_DECL__SNWPRINTF
-   /* Windows.  */
-#  define system_vswprintf _vsnwprintf
-# else
-   /* Unix.  */
-#  define system_vswprintf vswprintf
-# endif
-
-DLL_EXPORTED
-int
-libintl_vfwprintf (FILE *stream, const wchar_t *format, va_list args)
-{
-  if (wcschr (format, '$') == NULL)
-    return vfwprintf (stream, format, args);
-  else
-    {
-      size_t length;
-      wchar_t *result = libintl_vasnwprintf (NULL, &length, format, args);
-      int retval = -1;
-      if (result != NULL)
-        {
-          size_t i;
-          for (i = 0; i < length; i++)
-            if (fputwc (result[i], stream) == WEOF)
-              break;
-          free (result);
-          if (i == length)
-            {
-              if (length > INT_MAX)
-                errno = EOVERFLOW;
-              else
-                retval = length;
-            }
-        }
-      return retval;
-    }
-}
-
-DLL_EXPORTED
-int
-libintl_fwprintf (FILE *stream, const wchar_t *format, ...)
-{
-  va_list args;
-  int retval;
-
-  va_start (args, format);
-  retval = libintl_vfwprintf (stream, format, args);
-  va_end (args);
-  return retval;
-}
-
-DLL_EXPORTED
-int
-libintl_vwprintf (const wchar_t *format, va_list args)
-{
-  return libintl_vfwprintf (stdout, format, args);
-}
-
-DLL_EXPORTED
-int
-libintl_wprintf (const wchar_t *format, ...)
-{
-  va_list args;
-  int retval;
-
-  va_start (args, format);
-  retval = libintl_vwprintf (format, args);
-  va_end (args);
-  return retval;
-}
-
-DLL_EXPORTED
-int
-libintl_vswprintf (wchar_t *resultbuf, size_t length, const wchar_t *format, va_list args)
-{
-  if (wcschr (format, '$') == NULL)
-    return system_vswprintf (resultbuf, length, format, args);
-  else
-    {
-      size_t maxlength = length;
-      wchar_t *result = libintl_vasnwprintf (resultbuf, &length, format, args);
-      if (result != resultbuf)
-        {
-          if (maxlength > 0)
-            {
-              size_t pruned_length =
-                (length < maxlength ? length : maxlength - 1);
-              memcpy (resultbuf, result, pruned_length * sizeof (wchar_t));
-              resultbuf[pruned_length] = 0;
-            }
-          free (result);
-          /* Unlike vsnprintf, which has to return the number of character that
-             would have been produced if the resultbuf had been sufficiently
-             large, the vswprintf function has to return a negative value if
-             the resultbuf was not sufficiently large.  */
-          if (length >= maxlength)
-            return -1;
-        }
-      if (length > INT_MAX)
-        {
-          errno = EOVERFLOW;
-          return -1;
-        }
-      else
-        return length;
-    }
-}
-
-DLL_EXPORTED
-int
-libintl_swprintf (wchar_t *resultbuf, size_t length, const wchar_t *format, ...)
-{
-  va_list args;
-  int retval;
-
-  va_start (args, format);
-  retval = libintl_vswprintf (resultbuf, length, format, args);
-  va_end (args);
-  return retval;
-}
-
-#endif
-
-#endif
diff -urpN mc-4.8.23/intl/ref-add.sin mc-4.8.24/intl/ref-add.sin
--- mc-4.8.23/intl/ref-add.sin	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/ref-add.sin	1970-01-01 04:00:00.000000000 +0400
@@ -1,31 +0,0 @@
-# Add this package to a list of references stored in a text file.
-#
-#   Copyright (C) 2000 Free Software Foundation, Inc.
-#
-#   This program is free software; you can redistribute it and/or modify it
-#   under the terms of the GNU Library General Public License as published
-#   by the Free Software Foundation; either version 2, or (at your option)
-#   any later version.
-#
-#   This program is distributed in the hope that it will be useful,
-#   but WITHOUT ANY WARRANTY; without even the implied warranty of
-#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-#   Library General Public License for more details.
-#
-#   You should have received a copy of the GNU Library General Public
-#   License along with this program; if not, write to the Free Software
-#   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-#   USA.
-#
-# Written by Bruno Haible <haible@clisp.cons.org>.
-#
-/^# Packages using this file: / {
-  s/# Packages using this file://
-  ta
-  :a
-  s/ @PACKAGE@ / @PACKAGE@ /
-  tb
-  s/ $/ @PACKAGE@ /
-  :b
-  s/^/# Packages using this file:/
-}
diff -urpN mc-4.8.23/intl/ref-del.sin mc-4.8.24/intl/ref-del.sin
--- mc-4.8.23/intl/ref-del.sin	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/ref-del.sin	1970-01-01 04:00:00.000000000 +0400
@@ -1,26 +0,0 @@
-# Remove this package from a list of references stored in a text file.
-#
-#   Copyright (C) 2000 Free Software Foundation, Inc.
-#
-#   This program is free software; you can redistribute it and/or modify it
-#   under the terms of the GNU Library General Public License as published
-#   by the Free Software Foundation; either version 2, or (at your option)
-#   any later version.
-#
-#   This program is distributed in the hope that it will be useful,
-#   but WITHOUT ANY WARRANTY; without even the implied warranty of
-#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-#   Library General Public License for more details.
-#
-#   You should have received a copy of the GNU Library General Public
-#   License along with this program; if not, write to the Free Software
-#   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-#   USA.
-#
-# Written by Bruno Haible <haible@clisp.cons.org>.
-#
-/^# Packages using this file: / {
-  s/# Packages using this file://
-  s/ @PACKAGE@ / /
-  s/^/# Packages using this file:/
-}
diff -urpN mc-4.8.23/intl/relocatable.c mc-4.8.24/intl/relocatable.c
--- mc-4.8.23/intl/relocatable.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/relocatable.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,493 +0,0 @@
-/* Provide relocatable packages.
-   Copyright (C) 2003-2006, 2008-2009 Free Software Foundation, Inc.
-   Written by Bruno Haible <bruno@clisp.org>, 2003.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-
-/* Tell glibc's <stdio.h> to provide a prototype for getline().
-   This must come before <config.h> because <config.h> may include
-   <features.h>, and once <features.h> has been included, it's too late.  */
-#ifndef _GNU_SOURCE
-# define _GNU_SOURCE 1
-#endif
-
-#include <config.h>
-
-/* Specification.  */
-#include "relocatable.h"
-
-#if ENABLE_RELOCATABLE
-
-#include <stddef.h>
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#ifdef NO_XMALLOC
-# define xmalloc malloc
-#else
-# include "xalloc.h"
-#endif
-
-#if defined _WIN32 || defined __WIN32__ || defined __CYGWIN__
-# define WIN32_LEAN_AND_MEAN
-# include <windows.h>
-#endif
-
-#if DEPENDS_ON_LIBCHARSET
-# include <libcharset.h>
-#endif
-#if DEPENDS_ON_LIBICONV && HAVE_ICONV
-# include <iconv.h>
-#endif
-#if DEPENDS_ON_LIBINTL && ENABLE_NLS
-# include <libintl.h>
-#endif
-
-/* Faked cheap 'bool'.  */
-#undef bool
-#undef false
-#undef true
-#define bool int
-#define false 0
-#define true 1
-
-/* Pathname support.
-   ISSLASH(C)           tests whether C is a directory separator character.
-   IS_PATH_WITH_DIR(P)  tests whether P contains a directory specification.
- */
-#if defined _WIN32 || defined __WIN32__ || defined __CYGWIN__ || defined __EMX__ || defined __DJGPP__
-  /* Win32, Cygwin, OS/2, DOS */
-# define ISSLASH(C) ((C) == '/' || (C) == '\\')
-# define HAS_DEVICE(P) \
-    ((((P)[0] >= 'A' && (P)[0] <= 'Z') || ((P)[0] >= 'a' && (P)[0] <= 'z')) \
-     && (P)[1] == ':')
-# define IS_PATH_WITH_DIR(P) \
-    (strchr (P, '/') != NULL || strchr (P, '\\') != NULL || HAS_DEVICE (P))
-# define FILE_SYSTEM_PREFIX_LEN(P) (HAS_DEVICE (P) ? 2 : 0)
-#else
-  /* Unix */
-# define ISSLASH(C) ((C) == '/')
-# define IS_PATH_WITH_DIR(P) (strchr (P, '/') != NULL)
-# define FILE_SYSTEM_PREFIX_LEN(P) 0
-#endif
-
-/* Original installation prefix.  */
-static char *orig_prefix;
-static size_t orig_prefix_len;
-/* Current installation prefix.  */
-static char *curr_prefix;
-static size_t curr_prefix_len;
-/* These prefixes do not end in a slash.  Anything that will be concatenated
-   to them must start with a slash.  */
-
-/* Sets the original and the current installation prefix of this module.
-   Relocation simply replaces a pathname starting with the original prefix
-   by the corresponding pathname with the current prefix instead.  Both
-   prefixes should be directory names without trailing slash (i.e. use ""
-   instead of "/").  */
-static void
-set_this_relocation_prefix (const char *orig_prefix_arg,
-                            const char *curr_prefix_arg)
-{
-  if (orig_prefix_arg != NULL && curr_prefix_arg != NULL
-      /* Optimization: if orig_prefix and curr_prefix are equal, the
-         relocation is a nop.  */
-      && strcmp (orig_prefix_arg, curr_prefix_arg) != 0)
-    {
-      /* Duplicate the argument strings.  */
-      char *memory;
-
-      orig_prefix_len = strlen (orig_prefix_arg);
-      curr_prefix_len = strlen (curr_prefix_arg);
-      memory = (char *) xmalloc (orig_prefix_len + 1 + curr_prefix_len + 1);
-#ifdef NO_XMALLOC
-      if (memory != NULL)
-#endif
-        {
-          memcpy (memory, orig_prefix_arg, orig_prefix_len + 1);
-          orig_prefix = memory;
-          memory += orig_prefix_len + 1;
-          memcpy (memory, curr_prefix_arg, curr_prefix_len + 1);
-          curr_prefix = memory;
-          return;
-        }
-    }
-  orig_prefix = NULL;
-  curr_prefix = NULL;
-  /* Don't worry about wasted memory here - this function is usually only
-     called once.  */
-}
-
-/* Sets the original and the current installation prefix of the package.
-   Relocation simply replaces a pathname starting with the original prefix
-   by the corresponding pathname with the current prefix instead.  Both
-   prefixes should be directory names without trailing slash (i.e. use ""
-   instead of "/").  */
-void
-set_relocation_prefix (const char *orig_prefix_arg, const char *curr_prefix_arg)
-{
-  set_this_relocation_prefix (orig_prefix_arg, curr_prefix_arg);
-
-  /* Now notify all dependent libraries.  */
-#if DEPENDS_ON_LIBCHARSET
-  libcharset_set_relocation_prefix (orig_prefix_arg, curr_prefix_arg);
-#endif
-#if DEPENDS_ON_LIBICONV && HAVE_ICONV && _LIBICONV_VERSION >= 0x0109
-  libiconv_set_relocation_prefix (orig_prefix_arg, curr_prefix_arg);
-#endif
-#if DEPENDS_ON_LIBINTL && ENABLE_NLS && defined libintl_set_relocation_prefix
-  libintl_set_relocation_prefix (orig_prefix_arg, curr_prefix_arg);
-#endif
-}
-
-#if !defined IN_LIBRARY || (defined PIC && defined INSTALLDIR)
-
-/* Convenience function:
-   Computes the current installation prefix, based on the original
-   installation prefix, the original installation directory of a particular
-   file, and the current pathname of this file.
-   Returns it, freshly allocated.  Returns NULL upon failure.  */
-#ifdef IN_LIBRARY
-#define compute_curr_prefix local_compute_curr_prefix
-static
-#endif
-char *
-compute_curr_prefix (const char *orig_installprefix,
-                     const char *orig_installdir,
-                     const char *curr_pathname)
-{
-  char *curr_installdir;
-  const char *rel_installdir;
-
-  if (curr_pathname == NULL)
-    return NULL;
-
-  /* Determine the relative installation directory, relative to the prefix.
-     This is simply the difference between orig_installprefix and
-     orig_installdir.  */
-  if (strncmp (orig_installprefix, orig_installdir, strlen (orig_installprefix))
-      != 0)
-    /* Shouldn't happen - nothing should be installed outside $(prefix).  */
-    return NULL;
-  rel_installdir = orig_installdir + strlen (orig_installprefix);
-
-  /* Determine the current installation directory.  */
-  {
-    const char *p_base = curr_pathname + FILE_SYSTEM_PREFIX_LEN (curr_pathname);
-    const char *p = curr_pathname + strlen (curr_pathname);
-    char *q;
-
-    while (p > p_base)
-      {
-        p--;
-        if (ISSLASH (*p))
-          break;
-      }
-
-    q = (char *) xmalloc (p - curr_pathname + 1);
-#ifdef NO_XMALLOC
-    if (q == NULL)
-      return NULL;
-#endif
-    memcpy (q, curr_pathname, p - curr_pathname);
-    q[p - curr_pathname] = '\0';
-    curr_installdir = q;
-  }
-
-  /* Compute the current installation prefix by removing the trailing
-     rel_installdir from it.  */
-  {
-    const char *rp = rel_installdir + strlen (rel_installdir);
-    const char *cp = curr_installdir + strlen (curr_installdir);
-    const char *cp_base =
-      curr_installdir + FILE_SYSTEM_PREFIX_LEN (curr_installdir);
-
-    while (rp > rel_installdir && cp > cp_base)
-      {
-        bool same = false;
-        const char *rpi = rp;
-        const char *cpi = cp;
-
-        while (rpi > rel_installdir && cpi > cp_base)
-          {
-            rpi--;
-            cpi--;
-            if (ISSLASH (*rpi) || ISSLASH (*cpi))
-              {
-                if (ISSLASH (*rpi) && ISSLASH (*cpi))
-                  same = true;
-                break;
-              }
-            /* Do case-insensitive comparison if the file system is always or
-               often case-insensitive.  It's better to accept the comparison
-               if the difference is only in case, rather than to fail.  */
-#if defined _WIN32 || defined __WIN32__ || defined __CYGWIN__ || defined __EMX__ || defined __DJGPP__
-            /* Win32, Cygwin, OS/2, DOS - case insignificant file system */
-            if ((*rpi >= 'a' && *rpi <= 'z' ? *rpi - 'a' + 'A' : *rpi)
-                != (*cpi >= 'a' && *cpi <= 'z' ? *cpi - 'a' + 'A' : *cpi))
-              break;
-#else
-            if (*rpi != *cpi)
-              break;
-#endif
-          }
-        if (!same)
-          break;
-        /* The last pathname component was the same.  opi and cpi now point
-           to the slash before it.  */
-        rp = rpi;
-        cp = cpi;
-      }
-
-    if (rp > rel_installdir)
-      {
-        /* Unexpected: The curr_installdir does not end with rel_installdir.  */
-        free (curr_installdir);
-        return NULL;
-      }
-
-    {
-      size_t curr_prefix_len = cp - curr_installdir;
-      char *curr_prefix;
-
-      curr_prefix = (char *) xmalloc (curr_prefix_len + 1);
-#ifdef NO_XMALLOC
-      if (curr_prefix == NULL)
-        {
-          free (curr_installdir);
-          return NULL;
-        }
-#endif
-      memcpy (curr_prefix, curr_installdir, curr_prefix_len);
-      curr_prefix[curr_prefix_len] = '\0';
-
-      free (curr_installdir);
-
-      return curr_prefix;
-    }
-  }
-}
-
-#endif /* !IN_LIBRARY || PIC */
-
-#if defined PIC && defined INSTALLDIR
-
-/* Full pathname of shared library, or NULL.  */
-static char *shared_library_fullname;
-
-#if defined _WIN32 || defined __WIN32__ || defined __CYGWIN__
-
-/* Determine the full pathname of the shared library when it is loaded.  */
-
-BOOL WINAPI
-DllMain (HINSTANCE module_handle, DWORD event, LPVOID reserved)
-{
-  (void) reserved;
-
-  if (event == DLL_PROCESS_ATTACH)
-    {
-      /* The DLL is being loaded into an application's address range.  */
-      static char location[MAX_PATH];
-
-      if (!GetModuleFileName (module_handle, location, sizeof (location)))
-        /* Shouldn't happen.  */
-        return FALSE;
-
-      if (!IS_PATH_WITH_DIR (location))
-        /* Shouldn't happen.  */
-        return FALSE;
-
-      {
-#if defined __CYGWIN__
-        /* On Cygwin, we need to convert paths coming from Win32 system calls
-           to the Unix-like slashified notation.  */
-        static char location_as_posix_path[2 * MAX_PATH];
-        /* There's no error return defined for cygwin_conv_to_posix_path.
-           See cygwin-api/func-cygwin-conv-to-posix-path.html.
-           Does it overflow the buffer of expected size MAX_PATH or does it
-           truncate the path?  I don't know.  Let's catch both.  */
-        cygwin_conv_to_posix_path (location, location_as_posix_path);
-        location_as_posix_path[MAX_PATH - 1] = '\0';
-        if (strlen (location_as_posix_path) >= MAX_PATH - 1)
-          /* A sign of buffer overflow or path truncation.  */
-          return FALSE;
-        shared_library_fullname = strdup (location_as_posix_path);
-#else
-        shared_library_fullname = strdup (location);
-#endif
-      }
-    }
-
-  return TRUE;
-}
-
-#else /* Unix except Cygwin */
-
-static void
-find_shared_library_fullname ()
-{
-#if defined __linux__ && __GLIBC__ >= 2
-  /* Linux has /proc/self/maps. glibc 2 has the getline() function.  */
-  FILE *fp;
-
-  /* Open the current process' maps file.  It describes one VMA per line.  */
-  fp = fopen ("/proc/self/maps", "r");
-  if (fp)
-    {
-      unsigned long address = (unsigned long) &find_shared_library_fullname;
-      for (;;)
-        {
-          unsigned long start, end;
-          int c;
-
-          if (fscanf (fp, "%lx-%lx", &start, &end) != 2)
-            break;
-          if (address >= start && address <= end - 1)
-            {
-              /* Found it.  Now see if this line contains a filename.  */
-              while (c = getc (fp), c != EOF && c != '\n' && c != '/')
-                continue;
-              if (c == '/')
-                {
-                  size_t size;
-                  int len;
-
-                  ungetc (c, fp);
-                  shared_library_fullname = NULL; size = 0;
-                  len = getline (&shared_library_fullname, &size, fp);
-                  if (len >= 0)
-                    {
-                      /* Success: filled shared_library_fullname.  */
-                      if (len > 0 && shared_library_fullname[len - 1] == '\n')
-                        shared_library_fullname[len - 1] = '\0';
-                    }
-                }
-              break;
-            }
-          while (c = getc (fp), c != EOF && c != '\n')
-            continue;
-        }
-      fclose (fp);
-    }
-#endif
-}
-
-#endif /* (WIN32 or Cygwin) / (Unix except Cygwin) */
-
-/* Return the full pathname of the current shared library.
-   Return NULL if unknown.
-   Guaranteed to work only on Linux, Cygwin and Woe32.  */
-static char *
-get_shared_library_fullname ()
-{
-#if !(defined _WIN32 || defined __WIN32__ || defined __CYGWIN__)
-  static bool tried_find_shared_library_fullname;
-  if (!tried_find_shared_library_fullname)
-    {
-      find_shared_library_fullname ();
-      tried_find_shared_library_fullname = true;
-    }
-#endif
-  return shared_library_fullname;
-}
-
-#endif /* PIC */
-
-/* Returns the pathname, relocated according to the current installation
-   directory.
-   The returned string is either PATHNAME unmodified or a freshly allocated
-   string that you can free with free() after casting it to 'char *'.  */
-const char *
-relocate (const char *pathname)
-{
-#if defined PIC && defined INSTALLDIR
-  static int initialized;
-
-  /* Initialization code for a shared library.  */
-  if (!initialized)
-    {
-      /* At this point, orig_prefix and curr_prefix likely have already been
-         set through the main program's set_program_name_and_installdir
-         function.  This is sufficient in the case that the library has
-         initially been installed in the same orig_prefix.  But we can do
-         better, to also cover the cases that 1. it has been installed
-         in a different prefix before being moved to orig_prefix and (later)
-         to curr_prefix, 2. unlike the program, it has not moved away from
-         orig_prefix.  */
-      const char *orig_installprefix = INSTALLPREFIX;
-      const char *orig_installdir = INSTALLDIR;
-      char *curr_prefix_better;
-
-      curr_prefix_better =
-        compute_curr_prefix (orig_installprefix, orig_installdir,
-                             get_shared_library_fullname ());
-
-      set_relocation_prefix (orig_installprefix,
-                             curr_prefix_better != NULL
-                             ? curr_prefix_better
-                             : curr_prefix);
-
-      if (curr_prefix_better != NULL)
-        free (curr_prefix_better);
-
-      initialized = 1;
-    }
-#endif
-
-  /* Note: It is not necessary to perform case insensitive comparison here,
-     even for DOS-like file systems, because the pathname argument was
-     typically created from the same Makefile variable as orig_prefix came
-     from.  */
-  if (orig_prefix != NULL && curr_prefix != NULL
-      && strncmp (pathname, orig_prefix, orig_prefix_len) == 0)
-    {
-      if (pathname[orig_prefix_len] == '\0')
-        {
-          /* pathname equals orig_prefix.  */
-          char *result = (char *) xmalloc (strlen (curr_prefix) + 1);
-
-#ifdef NO_XMALLOC
-          if (result != NULL)
-#endif
-            {
-              strcpy (result, curr_prefix);
-              return result;
-            }
-        }
-      else if (ISSLASH (pathname[orig_prefix_len]))
-        {
-          /* pathname starts with orig_prefix.  */
-          const char *pathname_tail = &pathname[orig_prefix_len];
-          char *result =
-            (char *) xmalloc (curr_prefix_len + strlen (pathname_tail) + 1);
-
-#ifdef NO_XMALLOC
-          if (result != NULL)
-#endif
-            {
-              memcpy (result, curr_prefix, curr_prefix_len);
-              strcpy (result + curr_prefix_len, pathname_tail);
-              return result;
-            }
-        }
-    }
-  /* Nothing to relocate.  */
-  return pathname;
-}
-
-#endif
diff -urpN mc-4.8.23/intl/relocatable.h mc-4.8.24/intl/relocatable.h
--- mc-4.8.23/intl/relocatable.h	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/relocatable.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,83 +0,0 @@
-/* Provide relocatable packages.
-   Copyright (C) 2003, 2005, 2008 Free Software Foundation, Inc.
-   Written by Bruno Haible <bruno@clisp.org>, 2003.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _RELOCATABLE_H
-#define _RELOCATABLE_H
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-
-
-/* This can be enabled through the configure --enable-relocatable option.  */
-#if ENABLE_RELOCATABLE
-
-/* When building a DLL, we must export some functions.  Note that because
-   this is a private .h file, we don't need to use __declspec(dllimport)
-   in any case.  */
-#if HAVE_VISIBILITY && BUILDING_DLL
-# define RELOCATABLE_DLL_EXPORTED __attribute__((__visibility__("default")))
-#elif defined _MSC_VER && BUILDING_DLL
-# define RELOCATABLE_DLL_EXPORTED __declspec(dllexport)
-#else
-# define RELOCATABLE_DLL_EXPORTED
-#endif
-
-/* Sets the original and the current installation prefix of the package.
-   Relocation simply replaces a pathname starting with the original prefix
-   by the corresponding pathname with the current prefix instead.  Both
-   prefixes should be directory names without trailing slash (i.e. use ""
-   instead of "/").  */
-extern RELOCATABLE_DLL_EXPORTED void
-       set_relocation_prefix (const char *orig_prefix,
-                              const char *curr_prefix);
-
-/* Returns the pathname, relocated according to the current installation
-   directory.
-   The returned string is either PATHNAME unmodified or a freshly allocated
-   string that you can free with free() after casting it to 'char *'.  */
-extern const char * relocate (const char *pathname);
-
-/* Memory management: relocate() potentially allocates memory, because it has
-   to construct a fresh pathname.  If this is a problem because your program
-   calls relocate() frequently, think about caching the result.  Or free the
-   return value if it was different from the argument pathname.  */
-
-/* Convenience function:
-   Computes the current installation prefix, based on the original
-   installation prefix, the original installation directory of a particular
-   file, and the current pathname of this file.
-   Returns it, freshly allocated.  Returns NULL upon failure.  */
-extern char * compute_curr_prefix (const char *orig_installprefix,
-                                   const char *orig_installdir,
-                                   const char *curr_pathname);
-
-#else
-
-/* By default, we use the hardwired pathnames.  */
-#define relocate(pathname) (pathname)
-
-#endif
-
-
-#ifdef __cplusplus
-}
-#endif
-
-#endif /* _RELOCATABLE_H */
diff -urpN mc-4.8.23/intl/setlocale.c mc-4.8.24/intl/setlocale.c
--- mc-4.8.23/intl/setlocale.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/setlocale.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,1015 +0,0 @@
-/* setlocale() function that respects the locale chosen by the user.
-   Copyright (C) 2009 Free Software Foundation, Inc.
-   Written by Bruno Haible <bruno@clisp.org>, 2009.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-/* Override setlocale() and newlocale() so that when the default locale is
-   requested (locale = "") and no relevant environment variable is set, the
-   locale chosen by the user is used.
-   This matters on MacOS X 10 and Windows.
-   See the comments in localename.c, function gl_locale_name_default.  */
-
-#include <locale.h>
-#include <stdlib.h>
-#include <string.h>
-
-/* When building a DLL, we must export some functions.  Note that because
-   the functions are only defined for binary backward compatibility, we
-   don't need to use __declspec(dllimport) in any case.  */
-#if HAVE_VISIBILITY && BUILDING_DLL
-# define DLL_EXPORTED __attribute__((__visibility__("default")))
-#elif defined _MSC_VER && BUILDING_DLL
-# define DLL_EXPORTED __declspec(dllexport)
-#else
-# define DLL_EXPORTED
-#endif
-
-#include "gettextP.h"
-
-#if (defined __APPLE__ && defined __MACH__) || defined _WIN32 || defined __WIN32__ || defined __CYGWIN__
-
-# undef setlocale
-# undef newlocale
-
-/* Return string representation of locale category CATEGORY.  */
-static const char *
-category_to_name (int category)
-{
-  const char *retval;
-
-  switch (category)
-  {
-  case LC_COLLATE:
-    retval = "LC_COLLATE";
-    break;
-  case LC_CTYPE:
-    retval = "LC_CTYPE";
-    break;
-  case LC_MONETARY:
-    retval = "LC_MONETARY";
-    break;
-  case LC_NUMERIC:
-    retval = "LC_NUMERIC";
-    break;
-  case LC_TIME:
-    retval = "LC_TIME";
-    break;
-  case LC_MESSAGES:
-    retval = "LC_MESSAGES";
-    break;
-  default:
-    /* If you have a better idea for a default value let me know.  */
-    retval = "LC_XXX";
-  }
-
-  return retval;
-}
-
-# if (defined _WIN32 || defined __WIN32__) && ! defined __CYGWIN__
-
-/* The native Win32 setlocale() function expects locale names of the form
-   "German" or "German_Germany" or "DEU", but not "de" or "de_DE".  We need
-   to convert the names from the form with ISO 639 language code and ISO 3166
-   country code to the form with English names or with three-letter identifier.
-   The three-letter identifiers known by a Windows XP SP2 or SP3 are:
-     AFK  Afrikaans_South Africa.1252
-     ARA  Arabic_Saudi Arabia.1256
-     ARB  Arabic_Lebanon.1256
-     ARE  Arabic_Egypt.1256
-     ARG  Arabic_Algeria.1256
-     ARH  Arabic_Bahrain.1256
-     ARI  Arabic_Iraq.1256
-     ARJ  Arabic_Jordan.1256
-     ARK  Arabic_Kuwait.1256
-     ARL  Arabic_Libya.1256
-     ARM  Arabic_Morocco.1256
-     ARO  Arabic_Oman.1256
-     ARQ  Arabic_Qatar.1256
-     ARS  Arabic_Syria.1256
-     ART  Arabic_Tunisia.1256
-     ARU  Arabic_U.A.E..1256
-     ARY  Arabic_Yemen.1256
-     AZE  Azeri (Latin)_Azerbaijan.1254
-     BEL  Belarusian_Belarus.1251
-     BGR  Bulgarian_Bulgaria.1251
-     BSB  Bosnian_Bosnia and Herzegovina.1250
-     BSC  Bosnian (Cyrillic)_Bosnia and Herzegovina.1250  (wrong encoding!)
-     CAT  Catalan_Spain.1252
-     CHH  Chinese_Hong Kong S.A.R..950
-     CHI  Chinese_Singapore.936
-     CHS  Chinese_People's Republic of China.936
-     CHT  Chinese_Taiwan.950
-     CSY  Czech_Czech Republic.1250
-     CYM  Welsh_United Kingdom.1252
-     DAN  Danish_Denmark.1252
-     DEA  German_Austria.1252
-     DEC  German_Liechtenstein.1252
-     DEL  German_Luxembourg.1252
-     DES  German_Switzerland.1252
-     DEU  German_Germany.1252
-     ELL  Greek_Greece.1253
-     ENA  English_Australia.1252
-     ENB  English_Caribbean.1252
-     ENC  English_Canada.1252
-     ENG  English_United Kingdom.1252
-     ENI  English_Ireland.1252
-     ENJ  English_Jamaica.1252
-     ENL  English_Belize.1252
-     ENP  English_Republic of the Philippines.1252
-     ENS  English_South Africa.1252
-     ENT  English_Trinidad and Tobago.1252
-     ENU  English_United States.1252
-     ENW  English_Zimbabwe.1252
-     ENZ  English_New Zealand.1252
-     ESA  Spanish_Panama.1252
-     ESB  Spanish_Bolivia.1252
-     ESC  Spanish_Costa Rica.1252
-     ESD  Spanish_Dominican Republic.1252
-     ESE  Spanish_El Salvador.1252
-     ESF  Spanish_Ecuador.1252
-     ESG  Spanish_Guatemala.1252
-     ESH  Spanish_Honduras.1252
-     ESI  Spanish_Nicaragua.1252
-     ESL  Spanish_Chile.1252
-     ESM  Spanish_Mexico.1252
-     ESN  Spanish_Spain.1252
-     ESO  Spanish_Colombia.1252
-     ESP  Spanish_Spain.1252
-     ESR  Spanish_Peru.1252
-     ESS  Spanish_Argentina.1252
-     ESU  Spanish_Puerto Rico.1252
-     ESV  Spanish_Venezuela.1252
-     ESY  Spanish_Uruguay.1252
-     ESZ  Spanish_Paraguay.1252
-     ETI  Estonian_Estonia.1257
-     EUQ  Basque_Spain.1252
-     FAR  Farsi_Iran.1256
-     FIN  Finnish_Finland.1252
-     FOS  Faroese_Faroe Islands.1252
-     FPO  Filipino_Philippines.1252
-     FRA  French_France.1252
-     FRB  French_Belgium.1252
-     FRC  French_Canada.1252
-     FRL  French_Luxembourg.1252
-     FRM  French_Principality of Monaco.1252
-     FRS  French_Switzerland.1252
-     FYN  Frisian_Netherlands.1252
-     GLC  Galician_Spain.1252
-     HEB  Hebrew_Israel.1255
-     HRB  Croatian_Bosnia and Herzegovina.1250
-     HRV  Croatian_Croatia.1250
-     HUN  Hungarian_Hungary.1250
-     IND  Indonesian_Indonesia.1252
-     IRE  Irish_Ireland.1252
-     ISL  Icelandic_Iceland.1252
-     ITA  Italian_Italy.1252
-     ITS  Italian_Switzerland.1252
-     IUK  Inuktitut (Latin)_Canada.1252
-     JPN  Japanese_Japan.932
-     KKZ  Kazakh_Kazakhstan.1251
-     KOR  Korean_Korea.949
-     KYR  Kyrgyz_Kyrgyzstan.1251
-     LBX  Luxembourgish_Luxembourg.1252
-     LTH  Lithuanian_Lithuania.1257
-     LVI  Latvian_Latvia.1257
-     MKI  FYRO Macedonian_Former Yugoslav Republic of Macedonia.1251
-     MON  Mongolian_Mongolia.1251
-     MPD  Mapudungun_Chile.1252
-     MSB  Malay_Brunei Darussalam.1252
-     MSL  Malay_Malaysia.1252
-     MWK  Mohawk_Canada.1252
-     NLB  Dutch_Belgium.1252
-     NLD  Dutch_Netherlands.1252
-     NON  Norwegian-Nynorsk_Norway.1252
-     NOR  Norwegian (Bokml)_Norway.1252
-     NSO  Northern Sotho_South Africa.1252
-     PLK  Polish_Poland.1250
-     PTB  Portuguese_Brazil.1252
-     PTG  Portuguese_Portugal.1252
-     QUB  Quechua_Bolivia.1252
-     QUE  Quechua_Ecuador.1252
-     QUP  Quechua_Peru.1252
-     RMC  Romansh_Switzerland.1252
-     ROM  Romanian_Romania.1250
-     RUS  Russian_Russia.1251
-     SKY  Slovak_Slovakia.1250
-     SLV  Slovenian_Slovenia.1250
-     SMA  Sami (Southern)_Norway.1252
-     SMB  Sami (Southern)_Sweden.1252
-     SME  Sami (Northern)_Norway.1252
-     SMF  Sami (Northern)_Sweden.1252
-     SMG  Sami (Northern)_Finland.1252
-     SMJ  Sami (Lule)_Norway.1252
-     SMK  Sami (Lule)_Sweden.1252
-     SMN  Sami (Inari)_Finland.1252
-     SMS  Sami (Skolt)_Finland.1252
-     SQI  Albanian_Albania.1250
-     SRB  Serbian (Cyrillic)_Serbia and Montenegro.1251
-     SRL  Serbian (Latin)_Serbia and Montenegro.1250
-     SRN  Serbian (Cyrillic)_Bosnia and Herzegovina.1251
-     SRS  Serbian (Latin)_Bosnia and Herzegovina.1250
-     SVE  Swedish_Sweden.1252
-     SVF  Swedish_Finland.1252
-     SWK  Swahili_Kenya.1252
-     THA  Thai_Thailand.874
-     TRK  Turkish_Turkey.1254
-     TSN  Tswana_South Africa.1252
-     TTT  Tatar_Russia.1251
-     UKR  Ukrainian_Ukraine.1251
-     URD  Urdu_Islamic Republic of Pakistan.1256
-     USA  English_United States.1252
-     UZB  Uzbek (Latin)_Uzbekistan.1254
-     VIT  Vietnamese_Viet Nam.1258
-     XHO  Xhosa_South Africa.1252
-     ZHH  Chinese_Hong Kong S.A.R..950
-     ZHI  Chinese_Singapore.936
-     ZHM  Chinese_Macau S.A.R..950
-     ZUL  Zulu_South Africa.1252
- */
-
-/* Table from ISO 639 language code, optionally with country or script suffix,
-   to English name.
-   Keep in sync with the gl_locale_name_from_win32_LANGID function in
-   localename.c!  */
-struct table_entry
-{
-  const char *code;
-  const char *english;
-};
-static const struct table_entry language_table[] =
-  {
-    { "af", "Afrikaans" },
-    { "am", "Amharic" },
-    { "ar", "Arabic" },
-    { "arn", "Mapudungun" },
-    { "as", "Assamese" },
-    { "az@cyrillic", "Azeri (Cyrillic)" },
-    { "az@latin", "Azeri (Latin)" },
-    { "ba", "Bashkir" },
-    { "be", "Belarusian" },
-    { "ber", "Tamazight" },
-    { "ber@arabic", "Tamazight (Arabic)" },
-    { "ber@latin", "Tamazight (Latin)" },
-    { "bg", "Bulgarian" },
-    { "bin", "Edo" },
-    { "bn", "Bengali" },
-    { "bn_BD", "Bengali (Bangladesh)" },
-    { "bn_IN", "Bengali (India)" },
-    { "bnt", "Sutu" },
-    { "bo", "Tibetan" },
-    { "br", "Breton" },
-    { "bs", "BSB" }, /* "Bosnian (Latin)" */
-    { "bs@cyrillic", "BSC" }, /* Bosnian (Cyrillic) */
-    { "ca", "Catalan" },
-    { "chr", "Cherokee" },
-    { "co", "Corsican" },
-    { "cpe", "Hawaiian" },
-    { "cs", "Czech" },
-    { "cy", "Welsh" },
-    { "da", "Danish" },
-    { "de", "German" },
-    { "dsb", "Lower Sorbian" },
-    { "dv", "Divehi" },
-    { "el", "Greek" },
-    { "en", "English" },
-    { "es", "Spanish" },
-    { "et", "Estonian" },
-    { "eu", "Basque" },
-    { "fa", "Farsi" },
-    { "ff", "Fulfulde" },
-    { "fi", "Finnish" },
-    { "fo", "Faroese" }, /* "Faeroese" does not work */
-    { "fr", "French" },
-    { "fy", "Frisian" },
-    { "ga", "IRE" }, /* Gaelic (Ireland) */
-    { "gd", "Gaelic (Scotland)" },
-    { "gd", "Scottish Gaelic" },
-    { "gl", "Galician" },
-    { "gn", "Guarani" },
-    { "gsw", "Alsatian" },
-    { "gu", "Gujarati" },
-    { "ha", "Hausa" },
-    { "he", "Hebrew" },
-    { "hi", "Hindi" },
-    { "hr", "Croatian" },
-    { "hsb", "Upper Sorbian" },
-    { "hu", "Hungarian" },
-    { "hy", "Armenian" },
-    { "id", "Indonesian" },
-    { "ig", "Igbo" },
-    { "ii", "Yi" },
-    { "is", "Icelandic" },
-    { "it", "Italian" },
-    { "iu", "IUK" }, /* Inuktitut */
-    { "ja", "Japanese" },
-    { "ka", "Georgian" },
-    { "kk", "Kazakh" },
-    { "kl", "Greenlandic" },
-    { "km", "Cambodian" },
-    { "km", "Khmer" },
-    { "kn", "Kannada" },
-    { "ko", "Korean" },
-    { "kok", "Konkani" },
-    { "kr", "Kanuri" },
-    { "ks", "Kashmiri" },
-    { "ks_IN", "Kashmiri_India" },
-    { "ks_PK", "Kashmiri (Arabic)_Pakistan" },
-    { "ky", "Kyrgyz" },
-    { "la", "Latin" },
-    { "lb", "Luxembourgish" },
-    { "lo", "Lao" },
-    { "lt", "Lithuanian" },
-    { "lv", "Latvian" },
-    { "mi", "Maori" },
-    { "mk", "FYRO Macedonian" },
-    { "mk", "Macedonian" },
-    { "ml", "Malayalam" },
-    { "mn", "Mongolian" },
-    { "mni", "Manipuri" },
-    { "moh", "Mohawk" },
-    { "mr", "Marathi" },
-    { "ms", "Malay" },
-    { "mt", "Maltese" },
-    { "my", "Burmese" },
-    { "nb", "NOR" }, /* Norwegian Bokml */
-    { "ne", "Nepali" },
-    { "nic", "Ibibio" },
-    { "nl", "Dutch" },
-    { "nn", "NON" }, /* Norwegian Nynorsk */
-    { "no", "Norwegian" },
-    { "nso", "Northern Sotho" },
-    { "nso", "Sepedi" },
-    { "oc", "Occitan" },
-    { "om", "Oromo" },
-    { "or", "Oriya" },
-    { "pa", "Punjabi" },
-    { "pap", "Papiamentu" },
-    { "pl", "Polish" },
-    { "prs", "Dari" },
-    { "ps", "Pashto" },
-    { "pt", "Portuguese" },
-    { "qu", "Quechua" },
-    { "qut", "K'iche'" },
-    { "rm", "Romansh" },
-    { "ro", "Romanian" },
-    { "ru", "Russian" },
-    { "rw", "Kinyarwanda" },
-    { "sa", "Sanskrit" },
-    { "sah", "Yakut" },
-    { "sd", "Sindhi" },
-    { "se", "Sami (Northern)" },
-    { "se", "Northern Sami" },
-    { "si", "Sinhalese" },
-    { "sk", "Slovak" },
-    { "sl", "Slovenian" },
-    { "sma", "Sami (Southern)" },
-    { "sma", "Southern Sami" },
-    { "smj", "Sami (Lule)" },
-    { "smj", "Lule Sami" },
-    { "smn", "Sami (Inari)" },
-    { "smn", "Inari Sami" },
-    { "sms", "Sami (Skolt)" },
-    { "sms", "Skolt Sami" },
-    { "so", "Somali" },
-    { "sq", "Albanian" },
-    { "sr", "Serbian (Latin)" },
-    { "sr@cyrillic", "SRB" }, /* Serbian (Cyrillic) */
-    { "sw", "Swahili" },
-    { "syr", "Syriac" },
-    { "ta", "Tamil" },
-    { "te", "Telugu" },
-    { "tg", "Tajik" },
-    { "th", "Thai" },
-    { "ti", "Tigrinya" },
-    { "tk", "Turkmen" },
-    { "tl", "Filipino" },
-    { "tn", "Tswana" },
-    { "tr", "Turkish" },
-    { "ts", "Tsonga" },
-    { "tt", "Tatar" },
-    { "ug", "Uighur" },
-    { "uk", "Ukrainian" },
-    { "ur", "Urdu" },
-    { "uz", "Uzbek" },
-    { "uz", "Uzbek (Latin)" },
-    { "uz@cyrillic", "Uzbek (Cyrillic)" },
-    { "ve", "Venda" },
-    { "vi", "Vietnamese" },
-    { "wen", "Sorbian" },
-    { "wo", "Wolof" },
-    { "xh", "Xhosa" },
-    { "yi", "Yiddish" },
-    { "yo", "Yoruba" },
-    { "zh", "Chinese" },
-    { "zu", "Zulu" }
-  };
-
-/* Table from ISO 3166 country code to English name.
-   Keep in sync with the gl_locale_name_from_win32_LANGID function in
-   localename.c!  */
-static const struct table_entry country_table[] =
-  {
-    { "AE", "U.A.E." },
-    { "AF", "Afghanistan" },
-    { "AL", "Albania" },
-    { "AM", "Armenia" },
-    { "AN", "Netherlands Antilles" },
-    { "AR", "Argentina" },
-    { "AT", "Austria" },
-    { "AU", "Australia" },
-    { "AZ", "Azerbaijan" },
-    { "BA", "Bosnia and Herzegovina" },
-    { "BD", "Bangladesh" },
-    { "BE", "Belgium" },
-    { "BG", "Bulgaria" },
-    { "BH", "Bahrain" },
-    { "BN", "Brunei Darussalam" },
-    { "BO", "Bolivia" },
-    { "BR", "Brazil" },
-    { "BT", "Bhutan" },
-    { "BY", "Belarus" },
-    { "BZ", "Belize" },
-    { "CA", "Canada" },
-    { "CG", "Congo" },
-    { "CH", "Switzerland" },
-    { "CI", "Cote d'Ivoire" },
-    { "CL", "Chile" },
-    { "CM", "Cameroon" },
-    { "CN", "People's Republic of China" },
-    { "CO", "Colombia" },
-    { "CR", "Costa Rica" },
-    { "CS", "Serbia and Montenegro" },
-    { "CZ", "Czech Republic" },
-    { "DE", "Germany" },
-    { "DK", "Denmark" },
-    { "DO", "Dominican Republic" },
-    { "DZ", "Algeria" },
-    { "EC", "Ecuador" },
-    { "EE", "Estonia" },
-    { "EG", "Egypt" },
-    { "ER", "Eritrea" },
-    { "ES", "Spain" },
-    { "ET", "Ethiopia" },
-    { "FI", "Finland" },
-    { "FO", "Faroe Islands" },
-    { "FR", "France" },
-    { "GB", "United Kingdom" },
-    { "GD", "Caribbean" },
-    { "GE", "Georgia" },
-    { "GL", "Greenland" },
-    { "GR", "Greece" },
-    { "GT", "Guatemala" },
-    { "HK", "Hong Kong" },
-    { "HK", "Hong Kong S.A.R." },
-    { "HN", "Honduras" },
-    { "HR", "Croatia" },
-    { "HT", "Haiti" },
-    { "HU", "Hungary" },
-    { "ID", "Indonesia" },
-    { "IE", "Ireland" },
-    { "IL", "Israel" },
-    { "IN", "India" },
-    { "IQ", "Iraq" },
-    { "IR", "Iran" },
-    { "IS", "Iceland" },
-    { "IT", "Italy" },
-    { "JM", "Jamaica" },
-    { "JO", "Jordan" },
-    { "JP", "Japan" },
-    { "KE", "Kenya" },
-    { "KG", "Kyrgyzstan" },
-    { "KH", "Cambodia" },
-    { "KR", "South Korea" },
-    { "KW", "Kuwait" },
-    { "KZ", "Kazakhstan" },
-    { "LA", "Laos" },
-    { "LB", "Lebanon" },
-    { "LI", "Liechtenstein" },
-    { "LK", "Sri Lanka" },
-    { "LT", "Lithuania" },
-    { "LU", "Luxembourg" },
-    { "LV", "Latvia" },
-    { "LY", "Libya" },
-    { "MA", "Morocco" },
-    { "MC", "Principality of Monaco" },
-    { "MD", "Moldava" },
-    { "MD", "Moldova" },
-    { "ME", "Montenegro" },
-    { "MK", "Former Yugoslav Republic of Macedonia" },
-    { "ML", "Mali" },
-    { "MM", "Myanmar" },
-    { "MN", "Mongolia" },
-    { "MO", "Macau S.A.R." },
-    { "MT", "Malta" },
-    { "MV", "Maldives" },
-    { "MX", "Mexico" },
-    { "MY", "Malaysia" },
-    { "NG", "Nigeria" },
-    { "NI", "Nicaragua" },
-    { "NL", "Netherlands" },
-    { "NO", "Norway" },
-    { "NP", "Nepal" },
-    { "NZ", "New Zealand" },
-    { "OM", "Oman" },
-    { "PA", "Panama" },
-    { "PE", "Peru" },
-    { "PH", "Philippines" },
-    { "PK", "Islamic Republic of Pakistan" },
-    { "PL", "Poland" },
-    { "PR", "Puerto Rico" },
-    { "PT", "Portugal" },
-    { "PY", "Paraguay" },
-    { "QA", "Qatar" },
-    { "RE", "Reunion" },
-    { "RO", "Romania" },
-    { "RS", "Serbia" },
-    { "RU", "Russia" },
-    { "RW", "Rwanda" },
-    { "SA", "Saudi Arabia" },
-    { "SE", "Sweden" },
-    { "SG", "Singapore" },
-    { "SI", "Slovenia" },
-    { "SK", "Slovak" },
-    { "SN", "Senegal" },
-    { "SO", "Somalia" },
-    { "SR", "Suriname" },
-    { "SV", "El Salvador" },
-    { "SY", "Syria" },
-    { "TH", "Thailand" },
-    { "TJ", "Tajikistan" },
-    { "TM", "Turkmenistan" },
-    { "TN", "Tunisia" },
-    { "TR", "Turkey" },
-    { "TT", "Trinidad and Tobago" },
-    { "TW", "Taiwan" },
-    { "TZ", "Tanzania" },
-    { "UA", "Ukraine" },
-    { "US", "United States" },
-    { "UY", "Uruguay" },
-    { "VA", "Vatican" },
-    { "VE", "Venezuela" },
-    { "VN", "Viet Nam" },
-    { "YE", "Yemen" },
-    { "ZA", "South Africa" },
-    { "ZW", "Zimbabwe" }
-  };
-
-/* Given a string STRING, find the set of indices i such that TABLE[i].code is
-   the given STRING.  It is a range [lo,hi-1].  */
-typedef struct { size_t lo; size_t hi; } range_t;
-static void
-search (const struct table_entry *table, size_t table_size, const char *string,
-        range_t *result)
-{
-  /* The table is sorted.  Perform a binary search.  */
-  size_t hi = table_size;
-  size_t lo = 0;
-  while (lo < hi)
-    {
-      /* Invariant:
-         for i < lo, strcmp (table[i].code, string) < 0,
-         for i >= hi, strcmp (table[i].code, string) > 0.  */
-      size_t mid = (hi + lo) >> 1; /* >= lo, < hi */
-      int cmp = strcmp (table[mid].code, string);
-      if (cmp < 0)
-        lo = mid + 1;
-      else if (cmp > 0)
-        hi = mid;
-      else
-        {
-          /* Found an i with
-               strcmp (language_table[i].code, string) == 0.
-             Find the entire interval of such i.  */
-          {
-            size_t i;
-
-            for (i = mid; i > lo; )
-              {
-                i--;
-                if (strcmp (table[i].code, string) < 0)
-                  {
-                    lo = i + 1;
-                    break;
-                  }
-              }
-          }
-          {
-            size_t i;
-
-            for (i = mid; i < hi; i++)
-              {
-                if (strcmp (table[i].code, string) > 0)
-                  {
-                    hi = i;
-                    break;
-                  }
-              }
-          }
-          /* The set of i with
-               strcmp (language_table[i].code, string) == 0
-             is the interval [lo, hi-1].  */
-          break;
-        }
-    }
-  result->lo = lo;
-  result->hi = hi;
-}
-
-/* Like setlocale, but accept also locale names in the form ll or ll_CC,
-   where ll is an ISO 639 language code and CC is an ISO 3166 country code.  */
-static char *
-setlocale_unixlike (int category, const char *locale)
-{
-  char *result;
-  char llCC_buf[64];
-  char ll_buf[64];
-  char CC_buf[64];
-
-  /* First, try setlocale with the original argument unchanged.  */
-  result = setlocale (category, locale);
-  if (result != NULL)
-    return result;
-
-  /* Otherwise, assume the argument is in the form
-       language[_territory][.codeset][@modifier]
-     and try to map it using the tables.  */
-  if (strlen (locale) < sizeof (llCC_buf))
-    {
-      /* Second try: Remove the codeset part.  */
-      {
-        const char *p = locale;
-        char *q = llCC_buf;
-
-        /* Copy the part before the dot.  */
-        for (; *p != '\0' && *p != '.'; p++, q++)
-          *q = *p;
-        if (*p == '.')
-          /* Skip the part up to the '@', if any.  */
-          for (; *p != '\0' && *p != '@'; p++)
-            ;
-        /* Copy the part starting with '@', if any.  */
-        for (; *p != '\0'; p++, q++)
-          *q = *p;
-        *q = '\0';
-      }
-      /* llCC_buf now contains
-           language[_territory][@modifier]
-       */
-      if (strcmp (llCC_buf, locale) != 0)
-        {
-          result = setlocale (category, llCC_buf);
-          if (result != NULL)
-            return result;
-        }
-      /* Look it up in language_table.  */
-      {
-        range_t range;
-        size_t i;
-
-        search (language_table,
-                sizeof (language_table) / sizeof (language_table[0]),
-                llCC_buf,
-                &range);
-
-        for (i = range.lo; i < range.hi; i++)
-          {
-            /* Try the replacement in language_table[i].  */
-            result = setlocale (category, language_table[i].english);
-            if (result != NULL)
-              return result;
-          }
-      }
-      /* Split language[_territory][@modifier]
-         into  ll_buf = language[@modifier]
-         and   CC_buf = territory
-       */
-      {
-        const char *underscore = strchr (llCC_buf, '_');
-        if (underscore != NULL)
-          {
-            const char *territory_start = underscore + 1;
-            const char *territory_end = strchr (territory_start, '@');
-            if (territory_end == NULL)
-              territory_end = territory_start + strlen (territory_start);
-
-            memcpy (ll_buf, llCC_buf, underscore - llCC_buf);
-            strcpy (ll_buf + (underscore - llCC_buf), territory_end);
-
-            memcpy (CC_buf, territory_start, territory_end - territory_start);
-            CC_buf[territory_end - territory_start] = '\0';
-
-            {
-              /* Look up ll_buf in language_table
-                 and CC_buf in country_table.  */
-              range_t language_range;
-
-              search (language_table,
-                      sizeof (language_table) / sizeof (language_table[0]),
-                      ll_buf,
-                      &language_range);
-              if (language_range.lo < language_range.hi)
-                {
-                  range_t country_range;
-
-                  search (country_table,
-                          sizeof (country_table) / sizeof (country_table[0]),
-                          CC_buf,
-                          &country_range);
-                  if (country_range.lo < country_range.hi)
-                    {
-                      size_t i;
-                      size_t j;
-
-                      for (i = language_range.lo; i < language_range.hi; i++)
-                        for (j = country_range.lo; j < country_range.hi; j++)
-                          {
-                            /* Concatenate the replacements.  */
-                            const char *part1 = language_table[i].english;
-                            size_t part1_len = strlen (part1);
-                            const char *part2 = country_table[j].english;
-                            size_t part2_len = strlen (part2) + 1;
-                            char buf[64+64];
-
-                            if (!(part1_len + 1 + part2_len <= sizeof (buf)))
-                              abort ();
-                            memcpy (buf, part1, part1_len);
-                            buf[part1_len] = '_';
-                            memcpy (buf + part1_len + 1, part2, part2_len);
-
-                            /* Try the concatenated replacements.  */
-                            result = setlocale (category, buf);
-                            if (result != NULL)
-                              return result;
-                          }
-                    }
-
-                  /* Try omitting the country entirely.  This may set a locale
-                     corresponding to the wrong country, but is better than
-                     failing entirely.  */
-                  {
-                    size_t i;
-
-                    for (i = language_range.lo; i < language_range.hi; i++)
-                      {
-                        /* Try only the language replacement.  */
-                        result =
-                          setlocale (category, language_table[i].english);
-                        if (result != NULL)
-                          return result;
-                      }
-                  }
-                }
-            }
-          }
-      }
-    }
-
-  /* Failed.  */
-  return NULL;
-}
-
-# else
-#  define setlocale_unixlike setlocale
-# endif
-
-# if LC_MESSAGES == 1729
-
-/* The system does not store an LC_MESSAGES locale category.  Do it here.  */
-static char lc_messages_name[64] = "C";
-
-/* Like setlocale, but support also LC_MESSAGES.  */
-static char *
-setlocale_single (int category, const char *locale)
-{
-  if (category == LC_MESSAGES)
-    {
-      if (locale != NULL)
-        {
-          lc_messages_name[sizeof (lc_messages_name) - 1] = '\0';
-          strncpy (lc_messages_name, locale, sizeof (lc_messages_name) - 1);
-        }
-      return lc_messages_name;
-    }
-  else
-    return setlocale_unixlike (category, locale);
-}
-
-# else
-#  define setlocale_single setlocale_unixlike
-# endif
-
-DLL_EXPORTED
-char *
-libintl_setlocale (int category, const char *locale)
-{
-  if (locale != NULL && locale[0] == '\0')
-    {
-      /* A request to the set the current locale to the default locale.  */
-      if (category == LC_ALL)
-        {
-          /* Set LC_CTYPE first.  Then the other categories.  */
-          static int const categories[] =
-            {
-              LC_NUMERIC,
-              LC_TIME,
-              LC_COLLATE,
-              LC_MONETARY,
-              LC_MESSAGES
-            };
-          char *saved_locale;
-          const char *base_name;
-          unsigned int i;
-
-          /* Back up the old locale, in case one of the steps fails.  */
-          saved_locale = setlocale (LC_ALL, NULL);
-          if (saved_locale == NULL)
-            return NULL;
-          saved_locale = strdup (saved_locale);
-          if (saved_locale == NULL)
-            return NULL;
-
-          /* Set LC_CTYPE category.  Set all other categories (except possibly
-             LC_MESSAGES) to the same value in the same call; this is likely to
-             save calls.  */
-          base_name =
-            gl_locale_name_environ (LC_CTYPE, category_to_name (LC_CTYPE));
-          if (base_name == NULL)
-            base_name = gl_locale_name_default ();
-
-          if (setlocale_unixlike (LC_ALL, base_name) == NULL)
-            goto fail;
-
-          for (i = 0; i < sizeof (categories) / sizeof (categories[0]); i++)
-            {
-              int cat = categories[i];
-              const char *name;
-
-              name = gl_locale_name_environ (cat, category_to_name (cat));
-              if (name == NULL)
-                name = gl_locale_name_default ();
-
-              /* If name is the same as base_name, it has already been set
-                 through the setlocale call before the loop.  */
-              if (strcmp (name, base_name) != 0
-# if LC_MESSAGES == 1729
-                  || cat == LC_MESSAGES
-# endif
-                 )
-                if (setlocale_single (cat, name) == NULL)
-                  goto fail;
-            }
-
-          /* All steps were successful.  */
-          free (saved_locale);
-          return setlocale (LC_ALL, NULL);
-
-        fail:
-          if (saved_locale[0] != '\0') /* don't risk an endless recursion */
-            setlocale (LC_ALL, saved_locale);
-          free (saved_locale);
-          return NULL;
-        }
-      else
-        {
-          const char *name =
-            gl_locale_name_environ (category, category_to_name (category));
-          if (name == NULL)
-            name = gl_locale_name_default ();
-
-          return setlocale_single (category, name);
-        }
-    }
-  else
-    return setlocale_single (category, locale);
-}
-
-# if HAVE_NEWLOCALE
-
-DLL_EXPORTED
-locale_t
-libintl_newlocale (int category_mask, const char *locale, locale_t base)
-{
-  if (category_mask != 0 && locale != NULL && locale[0] == '\0')
-    {
-      /* A request to construct a locale_t object that refers to the default
-         locale.  */
-
-      /* Set LC_CTYPE first.  Then the other categories.  */
-      static struct { int cat; int mask; } const categories[] =
-        {
-          { LC_CTYPE,    LC_CTYPE_MASK },
-          { LC_NUMERIC,  LC_NUMERIC_MASK },
-          { LC_TIME,     LC_TIME_MASK },
-          { LC_COLLATE,  LC_COLLATE_MASK },
-          { LC_MONETARY, LC_MONETARY_MASK },
-          { LC_MESSAGES, LC_MESSAGES_MASK }
-        };
-
-      locale_t orig_base = base;
-
-      if ((LC_ALL_MASK & ~category_mask) == 0)
-        {
-          const char *base_name;
-          unsigned int i;
-
-          /* Set LC_CTYPE category.  Set all other categories (except possibly
-             LC_MESSAGES) to the same value in the same call; this is likely to
-             save calls.  */
-          base_name =
-            gl_locale_name_environ (LC_CTYPE, category_to_name (LC_CTYPE));
-          if (base_name == NULL)
-            base_name = gl_locale_name_default ();
-
-          base = newlocale (LC_ALL_MASK, base_name, base);
-          if (base == NULL)
-            return NULL;
-
-          for (i = 1; i < sizeof (categories) / sizeof (categories[0]); i++)
-            {
-              int category = categories[i].cat;
-              int category_mask = categories[i].mask;
-              const char *name;
-
-              name =
-                gl_locale_name_environ (category, category_to_name (category));
-              if (name == NULL)
-                name = gl_locale_name_default ();
-
-              /* If name is the same as base_name, it has already been set
-                 through the setlocale call before the loop.  */
-              if (strcmp (name, base_name) != 0)
-                {
-                  locale_t copy = newlocale (category_mask, name, base);
-                  if (copy == NULL)
-                    goto fail;
-                  /* No need to call freelocale (base) if copy != base; the
-                     newlocale function already takes care of doing it.  */
-                  base = copy;
-                }
-            }
-        }
-      else
-        {
-          unsigned int i;
-
-          for (i = 0; i < sizeof (categories) / sizeof (categories[0]); i++)
-            {
-              int cat_mask = categories[i].mask;
-
-              if ((category_mask & cat_mask) != 0)
-                {
-                  int cat = categories[i].cat;
-                  const char *name;
-                  locale_t copy;
-
-                  name = gl_locale_name_environ (cat, category_to_name (cat));
-                  if (name == NULL)
-                    name = gl_locale_name_default ();
-
-                  copy = newlocale (cat_mask, name, base);
-                  if (copy == NULL)
-                    goto fail;
-                  /* No need to call freelocale (base) if copy != base; the
-                     newlocale function already takes care of doing it.  */
-                  base = copy;
-                }
-            }
-        }
-
-      /* All steps were successful.  */
-      return base;
-
-    fail:
-      if (base != NULL && orig_base == NULL)
-        {
-          int saved_errno = errno;
-          freelocale (base);
-          errno = saved_errno;
-        }
-      return NULL;
-    }
-  else
-    return newlocale (category_mask, locale, base);
-}
-
-# endif
-
-#endif
diff -urpN mc-4.8.23/intl/textdomain.c mc-4.8.24/intl/textdomain.c
--- mc-4.8.23/intl/textdomain.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/textdomain.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,127 +0,0 @@
-/* Implementation of the textdomain(3) function.
-   Copyright (C) 1995-1998, 2000-2003, 2005-2006 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <stdlib.h>
-#include <string.h>
-
-#include "gettextP.h"
-#ifdef _LIBC
-# include <libintl.h>
-#else
-# include "libgnuintl.h"
-#endif
-
-/* Handle multi-threaded applications.  */
-#ifdef _LIBC
-# include <bits/libc-lock.h>
-# define gl_rwlock_define __libc_rwlock_define
-# define gl_rwlock_wrlock __libc_rwlock_wrlock
-# define gl_rwlock_unlock __libc_rwlock_unlock
-#else
-# include "lock.h"
-#endif
-
-/* @@ end of prolog @@ */
-
-
-/* Names for the libintl functions are a problem.  They must not clash
-   with existing names and they should follow ANSI C.  But this source
-   code is also used in GNU C Library where the names have a __
-   prefix.  So we have to make a difference here.  */
-#ifdef _LIBC
-# define TEXTDOMAIN __textdomain
-# ifndef strdup
-#  define strdup(str) __strdup (str)
-# endif
-#else
-# define TEXTDOMAIN libintl_textdomain
-#endif
-
-/* Lock variable to protect the global data in the gettext implementation.  */
-gl_rwlock_define (extern, _nl_state_lock attribute_hidden)
-
-/* Set the current default message catalog to DOMAINNAME.
-   If DOMAINNAME is null, return the current default.
-   If DOMAINNAME is "", reset to the default of "messages".  */
-char *
-TEXTDOMAIN (const char *domainname)
-{
-  char *new_domain;
-  char *old_domain;
-
-  /* A NULL pointer requests the current setting.  */
-  if (domainname == NULL)
-    return (char *) _nl_current_default_domain;
-
-  gl_rwlock_wrlock (_nl_state_lock);
-
-  old_domain = (char *) _nl_current_default_domain;
-
-  /* If domain name is the null string set to default domain "messages".  */
-  if (domainname[0] == '\0'
-      || strcmp (domainname, _nl_default_default_domain) == 0)
-    {
-      _nl_current_default_domain = _nl_default_default_domain;
-      new_domain = (char *) _nl_current_default_domain;
-    }
-  else if (strcmp (domainname, old_domain) == 0)
-    /* This can happen and people will use it to signal that some
-       environment variable changed.  */
-    new_domain = old_domain;
-  else
-    {
-      /* If the following malloc fails `_nl_current_default_domain'
-	 will be NULL.  This value will be returned and so signals we
-	 are out of core.  */
-#if defined _LIBC || defined HAVE_STRDUP
-      new_domain = strdup (domainname);
-#else
-      size_t len = strlen (domainname) + 1;
-      new_domain = (char *) malloc (len);
-      if (new_domain != NULL)
-	memcpy (new_domain, domainname, len);
-#endif
-
-      if (new_domain != NULL)
-	_nl_current_default_domain = new_domain;
-    }
-
-  /* We use this possibility to signal a change of the loaded catalogs
-     since this is most likely the case and there is no other easy we
-     to do it.  Do it only when the call was successful.  */
-  if (new_domain != NULL)
-    {
-      ++_nl_msg_cat_cntr;
-
-      if (old_domain != new_domain && old_domain != _nl_default_default_domain)
-	free (old_domain);
-    }
-
-  gl_rwlock_unlock (_nl_state_lock);
-
-  return new_domain;
-}
-
-#ifdef _LIBC
-/* Alias for function name in GNU C Library.  */
-weak_alias (__textdomain, textdomain);
-#endif
diff -urpN mc-4.8.23/intl/threadlib.c mc-4.8.24/intl/threadlib.c
--- mc-4.8.23/intl/threadlib.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/threadlib.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,75 +0,0 @@
-/* Multithreading primitives.
-   Copyright (C) 2005-2009 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Written by Bruno Haible <bruno@clisp.org>, 2005.  */
-
-#include <config.h>
-
-/* ========================================================================= */
-
-#if USE_POSIX_THREADS
-
-/* Use the POSIX threads library.  */
-
-# include <pthread.h>
-# include <stdlib.h>
-
-# if PTHREAD_IN_USE_DETECTION_HARD
-
-/* The function to be executed by a dummy thread.  */
-static void *
-dummy_thread_func (void *arg)
-{
-  return arg;
-}
-
-int
-glthread_in_use (void)
-{
-  static int tested;
-  static int result; /* 1: linked with -lpthread, 0: only with libc */
-
-  if (!tested)
-    {
-      pthread_t thread;
-
-      if (pthread_create (&thread, NULL, dummy_thread_func, NULL) != 0)
-        /* Thread creation failed.  */
-        result = 0;
-      else
-        {
-          /* Thread creation works.  */
-          void *retval;
-          if (pthread_join (thread, &retval) != 0)
-            abort ();
-          result = 1;
-        }
-      tested = 1;
-    }
-  return result;
-}
-
-# endif
-
-#endif
-
-/* ========================================================================= */
-
-/* This declaration is solely to ensure that after preprocessing
-   this file is never empty.  */
-typedef int dummy;
diff -urpN mc-4.8.23/intl/tsearch.c mc-4.8.24/intl/tsearch.c
--- mc-4.8.23/intl/tsearch.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/tsearch.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,684 +0,0 @@
-/* Copyright (C) 1995, 1996, 1997, 2000, 2006 Free Software Foundation, Inc.
-   Contributed by Bernd Schmidt <crux@Pool.Informatik.RWTH-Aachen.DE>, 1997.
-
-   NOTE: The canonical source of this file is maintained with the GNU C
-   Library.  Bugs can be reported to bug-glibc@gnu.org.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* Tree search for red/black trees.
-   The algorithm for adding nodes is taken from one of the many "Algorithms"
-   books by Robert Sedgewick, although the implementation differs.
-   The algorithm for deleting nodes can probably be found in a book named
-   "Introduction to Algorithms" by Cormen/Leiserson/Rivest.  At least that's
-   the book that my professor took most algorithms from during the "Data
-   Structures" course...
-
-   Totally public domain.  */
-
-/* Red/black trees are binary trees in which the edges are colored either red
-   or black.  They have the following properties:
-   1. The number of black edges on every path from the root to a leaf is
-      constant.
-   2. No two red edges are adjacent.
-   Therefore there is an upper bound on the length of every path, it's
-   O(log n) where n is the number of nodes in the tree.  No path can be longer
-   than 1+2*P where P is the length of the shortest path in the tree.
-   Useful for the implementation:
-   3. If one of the children of a node is NULL, then the other one is red
-      (if it exists).
-
-   In the implementation, not the edges are colored, but the nodes.  The color
-   interpreted as the color of the edge leading to this node.  The color is
-   meaningless for the root node, but we color the root node black for
-   convenience.  All added nodes are red initially.
-
-   Adding to a red/black tree is rather easy.  The right place is searched
-   with a usual binary tree search.  Additionally, whenever a node N is
-   reached that has two red successors, the successors are colored black and
-   the node itself colored red.  This moves red edges up the tree where they
-   pose less of a problem once we get to really insert the new node.  Changing
-   N's color to red may violate rule 2, however, so rotations may become
-   necessary to restore the invariants.  Adding a new red leaf may violate
-   the same rule, so afterwards an additional check is run and the tree
-   possibly rotated.
-
-   Deleting is hairy.  There are mainly two nodes involved: the node to be
-   deleted (n1), and another node that is to be unchained from the tree (n2).
-   If n1 has a successor (the node with a smallest key that is larger than
-   n1), then the successor becomes n2 and its contents are copied into n1,
-   otherwise n1 becomes n2.
-   Unchaining a node may violate rule 1: if n2 is black, one subtree is
-   missing one black edge afterwards.  The algorithm must try to move this
-   error upwards towards the root, so that the subtree that does not have
-   enough black edges becomes the whole tree.  Once that happens, the error
-   has disappeared.  It may not be necessary to go all the way up, since it
-   is possible that rotations and recoloring can fix the error before that.
-
-   Although the deletion algorithm must walk upwards through the tree, we
-   do not store parent pointers in the nodes.  Instead, delete allocates a
-   small array of parent pointers and fills it while descending the tree.
-   Since we know that the length of a path is O(log n), where n is the number
-   of nodes, this is likely to use less memory.  */
-
-/* Tree rotations look like this:
-      A                C
-     / \              / \
-    B   C            A   G
-   / \ / \  -->     / \
-   D E F G         B   F
-                  / \
-                 D   E
-
-   In this case, A has been rotated left.  This preserves the ordering of the
-   binary tree.  */
-
-#include <config.h>
-
-/* Specification.  */
-#ifdef IN_LIBINTL
-# include "tsearch.h"
-#else
-# include <search.h>
-#endif
-
-#include <stdlib.h>
-
-typedef int (*__compar_fn_t) (const void *, const void *);
-typedef void (*__action_fn_t) (const void *, VISIT, int);
-
-#ifndef weak_alias
-# define __tsearch tsearch
-# define __tfind tfind
-# define __tdelete tdelete
-# define __twalk twalk
-#endif
-
-#ifndef internal_function
-/* Inside GNU libc we mark some function in a special way.  In other
-   environments simply ignore the marking.  */
-# define internal_function
-#endif
-
-typedef struct node_t
-{
-  /* Callers expect this to be the first element in the structure - do not
-     move!  */
-  const void *key;
-  struct node_t *left;
-  struct node_t *right;
-  unsigned int red:1;
-} *node;
-typedef const struct node_t *const_node;
-
-#undef DEBUGGING
-
-#ifdef DEBUGGING
-
-/* Routines to check tree invariants.  */
-
-#include <assert.h>
-
-#define CHECK_TREE(a) check_tree(a)
-
-static void
-check_tree_recurse (node p, int d_sofar, int d_total)
-{
-  if (p == NULL)
-    {
-      assert (d_sofar == d_total);
-      return;
-    }
-
-  check_tree_recurse (p->left, d_sofar + (p->left && !p->left->red), d_total);
-  check_tree_recurse (p->right, d_sofar + (p->right && !p->right->red), d_total);
-  if (p->left)
-    assert (!(p->left->red && p->red));
-  if (p->right)
-    assert (!(p->right->red && p->red));
-}
-
-static void
-check_tree (node root)
-{
-  int cnt = 0;
-  node p;
-  if (root == NULL)
-    return;
-  root->red = 0;
-  for(p = root->left; p; p = p->left)
-    cnt += !p->red;
-  check_tree_recurse (root, 0, cnt);
-}
-
-
-#else
-
-#define CHECK_TREE(a)
-
-#endif
-
-/* Possibly "split" a node with two red successors, and/or fix up two red
-   edges in a row.  ROOTP is a pointer to the lowest node we visited, PARENTP
-   and GPARENTP pointers to its parent/grandparent.  P_R and GP_R contain the
-   comparison values that determined which way was taken in the tree to reach
-   ROOTP.  MODE is 1 if we need not do the split, but must check for two red
-   edges between GPARENTP and ROOTP.  */
-static void
-maybe_split_for_insert (node *rootp, node *parentp, node *gparentp,
-                        int p_r, int gp_r, int mode)
-{
-  node root = *rootp;
-  node *rp, *lp;
-  rp = &(*rootp)->right;
-  lp = &(*rootp)->left;
-
-  /* See if we have to split this node (both successors red).  */
-  if (mode == 1
-      || ((*rp) != NULL && (*lp) != NULL && (*rp)->red && (*lp)->red))
-    {
-      /* This node becomes red, its successors black.  */
-      root->red = 1;
-      if (*rp)
-        (*rp)->red = 0;
-      if (*lp)
-        (*lp)->red = 0;
-
-      /* If the parent of this node is also red, we have to do
-         rotations.  */
-      if (parentp != NULL && (*parentp)->red)
-        {
-          node gp = *gparentp;
-          node p = *parentp;
-          /* There are two main cases:
-             1. The edge types (left or right) of the two red edges differ.
-             2. Both red edges are of the same type.
-             There exist two symmetries of each case, so there is a total of
-             4 cases.  */
-          if ((p_r > 0) != (gp_r > 0))
-            {
-              /* Put the child at the top of the tree, with its parent
-                 and grandparent as successors.  */
-              p->red = 1;
-              gp->red = 1;
-              root->red = 0;
-              if (p_r < 0)
-                {
-                  /* Child is left of parent.  */
-                  p->left = *rp;
-                  *rp = p;
-                  gp->right = *lp;
-                  *lp = gp;
-                }
-              else
-                {
-                  /* Child is right of parent.  */
-                  p->right = *lp;
-                  *lp = p;
-                  gp->left = *rp;
-                  *rp = gp;
-                }
-              *gparentp = root;
-            }
-          else
-            {
-              *gparentp = *parentp;
-              /* Parent becomes the top of the tree, grandparent and
-                 child are its successors.  */
-              p->red = 0;
-              gp->red = 1;
-              if (p_r < 0)
-                {
-                  /* Left edges.  */
-                  gp->left = p->right;
-                  p->right = gp;
-                }
-              else
-                {
-                  /* Right edges.  */
-                  gp->right = p->left;
-                  p->left = gp;
-                }
-            }
-        }
-    }
-}
-
-/* Find or insert datum into search tree.
-   KEY is the key to be located, ROOTP is the address of tree root,
-   COMPAR the ordering function.  */
-void *
-__tsearch (const void *key, void **vrootp, __compar_fn_t compar)
-{
-  node q;
-  node *parentp = NULL, *gparentp = NULL;
-  node *rootp = (node *) vrootp;
-  node *nextp;
-  int r = 0, p_r = 0, gp_r = 0; /* No they might not, Mr Compiler.  */
-
-  if (rootp == NULL)
-    return NULL;
-
-  /* This saves some additional tests below.  */
-  if (*rootp != NULL)
-    (*rootp)->red = 0;
-
-  CHECK_TREE (*rootp);
-
-  nextp = rootp;
-  while (*nextp != NULL)
-    {
-      node root = *rootp;
-      r = (*compar) (key, root->key);
-      if (r == 0)
-        return root;
-
-      maybe_split_for_insert (rootp, parentp, gparentp, p_r, gp_r, 0);
-      /* If that did any rotations, parentp and gparentp are now garbage.
-         That doesn't matter, because the values they contain are never
-         used again in that case.  */
-
-      nextp = r < 0 ? &root->left : &root->right;
-      if (*nextp == NULL)
-        break;
-
-      gparentp = parentp;
-      parentp = rootp;
-      rootp = nextp;
-
-      gp_r = p_r;
-      p_r = r;
-    }
-
-  q = (struct node_t *) malloc (sizeof (struct node_t));
-  if (q != NULL)
-    {
-      *nextp = q;                       /* link new node to old */
-      q->key = key;                     /* initialize new node */
-      q->red = 1;
-      q->left = q->right = NULL;
-
-      if (nextp != rootp)
-        /* There may be two red edges in a row now, which we must avoid by
-           rotating the tree.  */
-        maybe_split_for_insert (nextp, rootp, parentp, r, p_r, 1);
-    }
-
-  return q;
-}
-#ifdef weak_alias
-weak_alias (__tsearch, tsearch)
-#endif
-
-
-/* Find datum in search tree.
-   KEY is the key to be located, ROOTP is the address of tree root,
-   COMPAR the ordering function.  */
-void *
-__tfind (key, vrootp, compar)
-     const void *key;
-     void *const *vrootp;
-     __compar_fn_t compar;
-{
-  node *rootp = (node *) vrootp;
-
-  if (rootp == NULL)
-    return NULL;
-
-  CHECK_TREE (*rootp);
-
-  while (*rootp != NULL)
-    {
-      node root = *rootp;
-      int r;
-
-      r = (*compar) (key, root->key);
-      if (r == 0)
-        return root;
-
-      rootp = r < 0 ? &root->left : &root->right;
-    }
-  return NULL;
-}
-#ifdef weak_alias
-weak_alias (__tfind, tfind)
-#endif
-
-
-/* Delete node with given key.
-   KEY is the key to be deleted, ROOTP is the address of the root of tree,
-   COMPAR the comparison function.  */
-void *
-__tdelete (const void *key, void **vrootp, __compar_fn_t compar)
-{
-  node p, q, r, retval;
-  int cmp;
-  node *rootp = (node *) vrootp;
-  node root, unchained;
-  /* Stack of nodes so we remember the parents without recursion.  It's
-     _very_ unlikely that there are paths longer than 40 nodes.  The tree
-     would need to have around 250.000 nodes.  */
-  int stacksize = 100;
-  int sp = 0;
-  node *nodestack[100];
-
-  if (rootp == NULL)
-    return NULL;
-  p = *rootp;
-  if (p == NULL)
-    return NULL;
-
-  CHECK_TREE (p);
-
-  while ((cmp = (*compar) (key, (*rootp)->key)) != 0)
-    {
-      if (sp == stacksize)
-        abort ();
-
-      nodestack[sp++] = rootp;
-      p = *rootp;
-      rootp = ((cmp < 0)
-               ? &(*rootp)->left
-               : &(*rootp)->right);
-      if (*rootp == NULL)
-        return NULL;
-    }
-
-  /* This is bogus if the node to be deleted is the root... this routine
-     really should return an integer with 0 for success, -1 for failure
-     and errno = ESRCH or something.  */
-  retval = p;
-
-  /* We don't unchain the node we want to delete. Instead, we overwrite
-     it with its successor and unchain the successor.  If there is no
-     successor, we really unchain the node to be deleted.  */
-
-  root = *rootp;
-
-  r = root->right;
-  q = root->left;
-
-  if (q == NULL || r == NULL)
-    unchained = root;
-  else
-    {
-      node *parent = rootp, *up = &root->right;
-      for (;;)
-        {
-          if (sp == stacksize)
-            abort ();
-          nodestack[sp++] = parent;
-          parent = up;
-          if ((*up)->left == NULL)
-            break;
-          up = &(*up)->left;
-        }
-      unchained = *up;
-    }
-
-  /* We know that either the left or right successor of UNCHAINED is NULL.
-     R becomes the other one, it is chained into the parent of UNCHAINED.  */
-  r = unchained->left;
-  if (r == NULL)
-    r = unchained->right;
-  if (sp == 0)
-    *rootp = r;
-  else
-    {
-      q = *nodestack[sp-1];
-      if (unchained == q->right)
-        q->right = r;
-      else
-        q->left = r;
-    }
-
-  if (unchained != root)
-    root->key = unchained->key;
-  if (!unchained->red)
-    {
-      /* Now we lost a black edge, which means that the number of black
-         edges on every path is no longer constant.  We must balance the
-         tree.  */
-      /* NODESTACK now contains all parents of R.  R is likely to be NULL
-         in the first iteration.  */
-      /* NULL nodes are considered black throughout - this is necessary for
-         correctness.  */
-      while (sp > 0 && (r == NULL || !r->red))
-        {
-          node *pp = nodestack[sp - 1];
-          p = *pp;
-          /* Two symmetric cases.  */
-          if (r == p->left)
-            {
-              /* Q is R's brother, P is R's parent.  The subtree with root
-                 R has one black edge less than the subtree with root Q.  */
-              q = p->right;
-              if (q->red)
-                {
-                  /* If Q is red, we know that P is black. We rotate P left
-                     so that Q becomes the top node in the tree, with P below
-                     it.  P is colored red, Q is colored black.
-                     This action does not change the black edge count for any
-                     leaf in the tree, but we will be able to recognize one
-                     of the following situations, which all require that Q
-                     is black.  */
-                  q->red = 0;
-                  p->red = 1;
-                  /* Left rotate p.  */
-                  p->right = q->left;
-                  q->left = p;
-                  *pp = q;
-                  /* Make sure pp is right if the case below tries to use
-                     it.  */
-                  nodestack[sp++] = pp = &q->left;
-                  q = p->right;
-                }
-              /* We know that Q can't be NULL here.  We also know that Q is
-                 black.  */
-              if ((q->left == NULL || !q->left->red)
-                  && (q->right == NULL || !q->right->red))
-                {
-                  /* Q has two black successors.  We can simply color Q red.
-                     The whole subtree with root P is now missing one black
-                     edge.  Note that this action can temporarily make the
-                     tree invalid (if P is red).  But we will exit the loop
-                     in that case and set P black, which both makes the tree
-                     valid and also makes the black edge count come out
-                     right.  If P is black, we are at least one step closer
-                     to the root and we'll try again the next iteration.  */
-                  q->red = 1;
-                  r = p;
-                }
-              else
-                {
-                  /* Q is black, one of Q's successors is red.  We can
-                     repair the tree with one operation and will exit the
-                     loop afterwards.  */
-                  if (q->right == NULL || !q->right->red)
-                    {
-                      /* The left one is red.  We perform the same action as
-                         in maybe_split_for_insert where two red edges are
-                         adjacent but point in different directions:
-                         Q's left successor (let's call it Q2) becomes the
-                         top of the subtree we are looking at, its parent (Q)
-                         and grandparent (P) become its successors. The former
-                         successors of Q2 are placed below P and Q.
-                         P becomes black, and Q2 gets the color that P had.
-                         This changes the black edge count only for node R and
-                         its successors.  */
-                      node q2 = q->left;
-                      q2->red = p->red;
-                      p->right = q2->left;
-                      q->left = q2->right;
-                      q2->right = q;
-                      q2->left = p;
-                      *pp = q2;
-                      p->red = 0;
-                    }
-                  else
-                    {
-                      /* It's the right one.  Rotate P left. P becomes black,
-                         and Q gets the color that P had.  Q's right successor
-                         also becomes black.  This changes the black edge
-                         count only for node R and its successors.  */
-                      q->red = p->red;
-                      p->red = 0;
-
-                      q->right->red = 0;
-
-                      /* left rotate p */
-                      p->right = q->left;
-                      q->left = p;
-                      *pp = q;
-                    }
-
-                  /* We're done.  */
-                  sp = 1;
-                  r = NULL;
-                }
-            }
-          else
-            {
-              /* Comments: see above.  */
-              q = p->left;
-              if (q->red)
-                {
-                  q->red = 0;
-                  p->red = 1;
-                  p->left = q->right;
-                  q->right = p;
-                  *pp = q;
-                  nodestack[sp++] = pp = &q->right;
-                  q = p->left;
-                }
-              if ((q->right == NULL || !q->right->red)
-                       && (q->left == NULL || !q->left->red))
-                {
-                  q->red = 1;
-                  r = p;
-                }
-              else
-                {
-                  if (q->left == NULL || !q->left->red)
-                    {
-                      node q2 = q->right;
-                      q2->red = p->red;
-                      p->left = q2->right;
-                      q->right = q2->left;
-                      q2->left = q;
-                      q2->right = p;
-                      *pp = q2;
-                      p->red = 0;
-                    }
-                  else
-                    {
-                      q->red = p->red;
-                      p->red = 0;
-                      q->left->red = 0;
-                      p->left = q->right;
-                      q->right = p;
-                      *pp = q;
-                    }
-                  sp = 1;
-                  r = NULL;
-                }
-            }
-          --sp;
-        }
-      if (r != NULL)
-        r->red = 0;
-    }
-
-  free (unchained);
-  return retval;
-}
-#ifdef weak_alias
-weak_alias (__tdelete, tdelete)
-#endif
-
-
-/* Walk the nodes of a tree.
-   ROOT is the root of the tree to be walked, ACTION the function to be
-   called at each node.  LEVEL is the level of ROOT in the whole tree.  */
-static void
-internal_function
-trecurse (const void *vroot, __action_fn_t action, int level)
-{
-  const_node root = (const_node) vroot;
-
-  if (root->left == NULL && root->right == NULL)
-    (*action) (root, leaf, level);
-  else
-    {
-      (*action) (root, preorder, level);
-      if (root->left != NULL)
-        trecurse (root->left, action, level + 1);
-      (*action) (root, postorder, level);
-      if (root->right != NULL)
-        trecurse (root->right, action, level + 1);
-      (*action) (root, endorder, level);
-    }
-}
-
-
-/* Walk the nodes of a tree.
-   ROOT is the root of the tree to be walked, ACTION the function to be
-   called at each node.  */
-void
-__twalk (const void *vroot, __action_fn_t action)
-{
-  const_node root = (const_node) vroot;
-
-  CHECK_TREE (root);
-
-  if (root != NULL && action != NULL)
-    trecurse (root, action, 0);
-}
-#ifdef weak_alias
-weak_alias (__twalk, twalk)
-#endif
-
-
-#ifdef _LIBC
-
-/* The standardized functions miss an important functionality: the
-   tree cannot be removed easily.  We provide a function to do this.  */
-static void
-internal_function
-tdestroy_recurse (node root, __free_fn_t freefct)
-{
-  if (root->left != NULL)
-    tdestroy_recurse (root->left, freefct);
-  if (root->right != NULL)
-    tdestroy_recurse (root->right, freefct);
-  (*freefct) ((void *) root->key);
-  /* Free the node itself.  */
-  free (root);
-}
-
-void
-__tdestroy (void *vroot, __free_fn_t freefct)
-{
-  node root = (node) vroot;
-
-  CHECK_TREE (root);
-
-  if (root != NULL)
-    tdestroy_recurse (root, freefct);
-}
-weak_alias (__tdestroy, tdestroy)
-
-#endif /* _LIBC */
diff -urpN mc-4.8.23/intl/tsearch.h mc-4.8.24/intl/tsearch.h
--- mc-4.8.23/intl/tsearch.h	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/tsearch.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,83 +0,0 @@
-/* Binary tree data structure.
-   Copyright (C) 2006 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _TSEARCH_H
-#define _TSEARCH_H
-
-#if HAVE_TSEARCH
-
-/* Get tseach(), tfind(), tdelete(), twalk() declarations.  */
-#include <search.h>
-
-#else
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-
-/* See <http://www.opengroup.org/susv3xbd/search.h.html>,
-       <http://www.opengroup.org/susv3xsh/tsearch.html>
-   for details.  */
-
-typedef enum
-{ 
-  preorder,
-  postorder, 
-  endorder,
-  leaf
-}
-VISIT;
-
-/* Searches an element in the tree *VROOTP that compares equal to KEY.
-   If one is found, it is returned.  Otherwise, a new element equal to KEY
-   is inserted in the tree and is returned.  */
-extern void * tsearch (const void *key, void **vrootp,
-                       int (*compar) (const void *, const void *));
-
-/* Searches an element in the tree *VROOTP that compares equal to KEY.
-   If one is found, it is returned.  Otherwise, NULL is returned.  */
-extern void * tfind (const void *key, void *const *vrootp,
-                     int (*compar) (const void *, const void *));
-
-/* Searches an element in the tree *VROOTP that compares equal to KEY.
-   If one is found, it is removed from the tree, and its parent node is
-   returned.  Otherwise, NULL is returned.  */
-extern void * tdelete (const void *key, void **vrootp,
-                       int (*compar) (const void *, const void *));
-
-/* Perform a depth-first, left-to-right traversal of the tree VROOT.
-   The ACTION function is called:
-     - for non-leaf nodes: 3 times, before the left subtree traversal,
-       after the left subtree traversal but before the right subtree traversal,
-       and after the right subtree traversal,
-     - for leaf nodes: once.
-   The arguments passed to ACTION are:
-     1. the node; it can be casted to a 'const void * const *', i.e. into a
-        pointer to the key,
-     2. an indicator which visit of the node this is,
-     3. the level of the node in the tree (0 for the root).  */
-extern void twalk (const void *vroot,
-                   void (*action) (const void *, VISIT, int));
-
-#ifdef __cplusplus
-}
-#endif
-
-#endif
-
-#endif /* _TSEARCH_H */
diff -urpN mc-4.8.23/intl/vasnprintf.c mc-4.8.24/intl/vasnprintf.c
--- mc-4.8.23/intl/vasnprintf.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/vasnprintf.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,5568 +0,0 @@
-/* vsprintf with automatic memory allocation.
-   Copyright (C) 1999, 2002-2010 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-/* This file can be parametrized with the following macros:
-     VASNPRINTF         The name of the function being defined.
-     FCHAR_T            The element type of the format string.
-     DCHAR_T            The element type of the destination (result) string.
-     FCHAR_T_ONLY_ASCII Set to 1 to enable verification that all characters
-                        in the format string are ASCII. MUST be set if
-                        FCHAR_T and DCHAR_T are not the same type.
-     DIRECTIVE          Structure denoting a format directive.
-                        Depends on FCHAR_T.
-     DIRECTIVES         Structure denoting the set of format directives of a
-                        format string.  Depends on FCHAR_T.
-     PRINTF_PARSE       Function that parses a format string.
-                        Depends on FCHAR_T.
-     DCHAR_CPY          memcpy like function for DCHAR_T[] arrays.
-     DCHAR_SET          memset like function for DCHAR_T[] arrays.
-     DCHAR_MBSNLEN      mbsnlen like function for DCHAR_T[] arrays.
-     SNPRINTF           The system's snprintf (or similar) function.
-                        This may be either snprintf or swprintf.
-     TCHAR_T            The element type of the argument and result string
-                        of the said SNPRINTF function.  This may be either
-                        char or wchar_t.  The code exploits that
-                        sizeof (TCHAR_T) | sizeof (DCHAR_T) and
-                        alignof (TCHAR_T) <= alignof (DCHAR_T).
-     DCHAR_IS_TCHAR     Set to 1 if DCHAR_T and TCHAR_T are the same type.
-     DCHAR_CONV_FROM_ENCODING A function to convert from char[] to DCHAR[].
-     DCHAR_IS_UINT8_T   Set to 1 if DCHAR_T is uint8_t.
-     DCHAR_IS_UINT16_T  Set to 1 if DCHAR_T is uint16_t.
-     DCHAR_IS_UINT32_T  Set to 1 if DCHAR_T is uint32_t.  */
-
-/* Tell glibc's <stdio.h> to provide a prototype for snprintf().
-   This must come before <config.h> because <config.h> may include
-   <features.h>, and once <features.h> has been included, it's too late.  */
-#ifndef _GNU_SOURCE
-# define _GNU_SOURCE    1
-#endif
-
-#ifndef VASNPRINTF
-# include <config.h>
-#endif
-#ifndef IN_LIBINTL
-# include <alloca.h>
-#endif
-
-/* Specification.  */
-#ifndef VASNPRINTF
-# if WIDE_CHAR_VERSION
-#  include "vasnwprintf.h"
-# else
-#  include "vasnprintf.h"
-# endif
-#endif
-
-#include <locale.h>     /* localeconv() */
-#include <stdio.h>      /* snprintf(), sprintf() */
-#include <stdlib.h>     /* abort(), malloc(), realloc(), free() */
-#include <string.h>     /* memcpy(), strlen() */
-#include <errno.h>      /* errno */
-#include <limits.h>     /* CHAR_BIT */
-#include <float.h>      /* DBL_MAX_EXP, LDBL_MAX_EXP */
-#if HAVE_NL_LANGINFO
-# include <langinfo.h>
-#endif
-#ifndef VASNPRINTF
-# if WIDE_CHAR_VERSION
-#  include "wprintf-parse.h"
-# else
-#  include "printf-parse.h"
-# endif
-#endif
-
-/* Checked size_t computations.  */
-#include "xsize.h"
-
-#if (NEED_PRINTF_DOUBLE || NEED_PRINTF_LONG_DOUBLE) && !defined IN_LIBINTL
-# include <math.h>
-# include "float+.h"
-#endif
-
-#if (NEED_PRINTF_DOUBLE || NEED_PRINTF_INFINITE_DOUBLE) && !defined IN_LIBINTL
-# include <math.h>
-# include "isnand-nolibm.h"
-#endif
-
-#if (NEED_PRINTF_LONG_DOUBLE || NEED_PRINTF_INFINITE_LONG_DOUBLE) && !defined IN_LIBINTL
-# include <math.h>
-# include "isnanl-nolibm.h"
-# include "fpucw.h"
-#endif
-
-#if (NEED_PRINTF_DIRECTIVE_A || NEED_PRINTF_DOUBLE) && !defined IN_LIBINTL
-# include <math.h>
-# include "isnand-nolibm.h"
-# include "printf-frexp.h"
-#endif
-
-#if (NEED_PRINTF_DIRECTIVE_A || NEED_PRINTF_LONG_DOUBLE) && !defined IN_LIBINTL
-# include <math.h>
-# include "isnanl-nolibm.h"
-# include "printf-frexpl.h"
-# include "fpucw.h"
-#endif
-
-/* Default parameters.  */
-#ifndef VASNPRINTF
-# if WIDE_CHAR_VERSION
-#  define VASNPRINTF vasnwprintf
-#  define FCHAR_T wchar_t
-#  define DCHAR_T wchar_t
-#  define TCHAR_T wchar_t
-#  define DCHAR_IS_TCHAR 1
-#  define DIRECTIVE wchar_t_directive
-#  define DIRECTIVES wchar_t_directives
-#  define PRINTF_PARSE wprintf_parse
-#  define DCHAR_CPY wmemcpy
-#  define DCHAR_SET wmemset
-# else
-#  define VASNPRINTF vasnprintf
-#  define FCHAR_T char
-#  define DCHAR_T char
-#  define TCHAR_T char
-#  define DCHAR_IS_TCHAR 1
-#  define DIRECTIVE char_directive
-#  define DIRECTIVES char_directives
-#  define PRINTF_PARSE printf_parse
-#  define DCHAR_CPY memcpy
-#  define DCHAR_SET memset
-# endif
-#endif
-#if WIDE_CHAR_VERSION
-  /* TCHAR_T is wchar_t.  */
-# define USE_SNPRINTF 1
-# if HAVE_DECL__SNWPRINTF
-   /* On Windows, the function swprintf() has a different signature than
-      on Unix; we use the function _snwprintf() or - on mingw - snwprintf()
-      instead.  The mingw function snwprintf() has fewer bugs than the
-      MSVCRT function _snwprintf(), so prefer that.  */
-#  if defined __MINGW32__
-#   define SNPRINTF snwprintf
-#  else
-#   define SNPRINTF _snwprintf
-#  endif
-# else
-   /* Unix.  */
-#  define SNPRINTF swprintf
-# endif
-#else
-  /* TCHAR_T is char.  */
-  /* Use snprintf if it exists under the name 'snprintf' or '_snprintf'.
-     But don't use it on BeOS, since BeOS snprintf produces no output if the
-     size argument is >= 0x3000000.
-     Also don't use it on Linux libc5, since there snprintf with size = 1
-     writes any output without bounds, like sprintf.  */
-# if (HAVE_DECL__SNPRINTF || HAVE_SNPRINTF) && !defined __BEOS__ && !(__GNU_LIBRARY__ == 1)
-#  define USE_SNPRINTF 1
-# else
-#  define USE_SNPRINTF 0
-# endif
-# if HAVE_DECL__SNPRINTF
-   /* Windows.  The mingw function snprintf() has fewer bugs than the MSVCRT
-      function _snprintf(), so prefer that.  */
-#  if defined __MINGW32__
-#   define SNPRINTF snprintf
-    /* Here we need to call the native snprintf, not rpl_snprintf.  */
-#   undef snprintf
-#  else
-#   define SNPRINTF _snprintf
-#  endif
-# else
-   /* Unix.  */
-#  define SNPRINTF snprintf
-   /* Here we need to call the native snprintf, not rpl_snprintf.  */
-#  undef snprintf
-# endif
-#endif
-/* Here we need to call the native sprintf, not rpl_sprintf.  */
-#undef sprintf
-
-/* GCC >= 4.0 with -Wall emits unjustified "... may be used uninitialized"
-   warnings in this file.  Use -Dlint to suppress them.  */
-#ifdef lint
-# define IF_LINT(Code) Code
-#else
-# define IF_LINT(Code) /* empty */
-#endif
-
-/* Avoid some warnings from "gcc -Wshadow".
-   This file doesn't use the exp() and remainder() functions.  */
-#undef exp
-#define exp expo
-#undef remainder
-#define remainder rem
-
-#if (!USE_SNPRINTF || !HAVE_SNPRINTF_RETVAL_C99) && !WIDE_CHAR_VERSION
-# if (HAVE_STRNLEN && !defined _AIX)
-#  define local_strnlen strnlen
-# else
-#  ifndef local_strnlen_defined
-#   define local_strnlen_defined 1
-static size_t
-local_strnlen (const char *string, size_t maxlen)
-{
-  const char *end = memchr (string, '\0', maxlen);
-  return end ? (size_t) (end - string) : maxlen;
-}
-#  endif
-# endif
-#endif
-
-#if (((!USE_SNPRINTF || !HAVE_SNPRINTF_RETVAL_C99) && WIDE_CHAR_VERSION) || ((!USE_SNPRINTF || !HAVE_SNPRINTF_RETVAL_C99 || (NEED_PRINTF_DIRECTIVE_LS && !defined IN_LIBINTL)) && !WIDE_CHAR_VERSION && DCHAR_IS_TCHAR)) && HAVE_WCHAR_T
-# if HAVE_WCSLEN
-#  define local_wcslen wcslen
-# else
-   /* Solaris 2.5.1 has wcslen() in a separate library libw.so. To avoid
-      a dependency towards this library, here is a local substitute.
-      Define this substitute only once, even if this file is included
-      twice in the same compilation unit.  */
-#  ifndef local_wcslen_defined
-#   define local_wcslen_defined 1
-static size_t
-local_wcslen (const wchar_t *s)
-{
-  const wchar_t *ptr;
-
-  for (ptr = s; *ptr != (wchar_t) 0; ptr++)
-    ;
-  return ptr - s;
-}
-#  endif
-# endif
-#endif
-
-#if (!USE_SNPRINTF || !HAVE_SNPRINTF_RETVAL_C99) && HAVE_WCHAR_T && WIDE_CHAR_VERSION
-# if HAVE_WCSNLEN
-#  define local_wcsnlen wcsnlen
-# else
-#  ifndef local_wcsnlen_defined
-#   define local_wcsnlen_defined 1
-static size_t
-local_wcsnlen (const wchar_t *s, size_t maxlen)
-{
-  const wchar_t *ptr;
-
-  for (ptr = s; maxlen > 0 && *ptr != (wchar_t) 0; ptr++, maxlen--)
-    ;
-  return ptr - s;
-}
-#  endif
-# endif
-#endif
-
-#if (NEED_PRINTF_DIRECTIVE_A || NEED_PRINTF_LONG_DOUBLE || NEED_PRINTF_INFINITE_LONG_DOUBLE || NEED_PRINTF_DOUBLE || NEED_PRINTF_INFINITE_DOUBLE) && !defined IN_LIBINTL
-/* Determine the decimal-point character according to the current locale.  */
-# ifndef decimal_point_char_defined
-#  define decimal_point_char_defined 1
-static char
-decimal_point_char (void)
-{
-  const char *point;
-  /* Determine it in a multithread-safe way.  We know nl_langinfo is
-     multithread-safe on glibc systems and MacOS X systems, but is not required
-     to be multithread-safe by POSIX.  sprintf(), however, is multithread-safe.
-     localeconv() is rarely multithread-safe.  */
-#  if HAVE_NL_LANGINFO && (__GLIBC__ || (defined __APPLE__ && defined __MACH__))
-  point = nl_langinfo (RADIXCHAR);
-#  elif 1
-  char pointbuf[5];
-  sprintf (pointbuf, "%#.0f", 1.0);
-  point = &pointbuf[1];
-#  else
-  point = localeconv () -> decimal_point;
-#  endif
-  /* The decimal point is always a single byte: either '.' or ','.  */
-  return (point[0] != '\0' ? point[0] : '.');
-}
-# endif
-#endif
-
-#if NEED_PRINTF_INFINITE_DOUBLE && !NEED_PRINTF_DOUBLE && !defined IN_LIBINTL
-
-/* Equivalent to !isfinite(x) || x == 0, but does not require libm.  */
-static int
-is_infinite_or_zero (double x)
-{
-  return isnand (x) || x + x == x;
-}
-
-#endif
-
-#if NEED_PRINTF_INFINITE_LONG_DOUBLE && !NEED_PRINTF_LONG_DOUBLE && !defined IN_LIBINTL
-
-/* Equivalent to !isfinite(x) || x == 0, but does not require libm.  */
-static int
-is_infinite_or_zerol (long double x)
-{
-  return isnanl (x) || x + x == x;
-}
-
-#endif
-
-#if (NEED_PRINTF_LONG_DOUBLE || NEED_PRINTF_DOUBLE) && !defined IN_LIBINTL
-
-/* Converting 'long double' to decimal without rare rounding bugs requires
-   real bignums.  We use the naming conventions of GNU gmp, but vastly simpler
-   (and slower) algorithms.  */
-
-typedef unsigned int mp_limb_t;
-# define GMP_LIMB_BITS 32
-typedef int mp_limb_verify[2 * (sizeof (mp_limb_t) * CHAR_BIT == GMP_LIMB_BITS) - 1];
-
-typedef unsigned long long mp_twolimb_t;
-# define GMP_TWOLIMB_BITS 64
-typedef int mp_twolimb_verify[2 * (sizeof (mp_twolimb_t) * CHAR_BIT == GMP_TWOLIMB_BITS) - 1];
-
-/* Representation of a bignum >= 0.  */
-typedef struct
-{
-  size_t nlimbs;
-  mp_limb_t *limbs; /* Bits in little-endian order, allocated with malloc().  */
-} mpn_t;
-
-/* Compute the product of two bignums >= 0.
-   Return the allocated memory in case of success, NULL in case of memory
-   allocation failure.  */
-static void *
-multiply (mpn_t src1, mpn_t src2, mpn_t *dest)
-{
-  const mp_limb_t *p1;
-  const mp_limb_t *p2;
-  size_t len1;
-  size_t len2;
-
-  if (src1.nlimbs <= src2.nlimbs)
-    {
-      len1 = src1.nlimbs;
-      p1 = src1.limbs;
-      len2 = src2.nlimbs;
-      p2 = src2.limbs;
-    }
-  else
-    {
-      len1 = src2.nlimbs;
-      p1 = src2.limbs;
-      len2 = src1.nlimbs;
-      p2 = src1.limbs;
-    }
-  /* Now 0 <= len1 <= len2.  */
-  if (len1 == 0)
-    {
-      /* src1 or src2 is zero.  */
-      dest->nlimbs = 0;
-      dest->limbs = (mp_limb_t *) malloc (1);
-    }
-  else
-    {
-      /* Here 1 <= len1 <= len2.  */
-      size_t dlen;
-      mp_limb_t *dp;
-      size_t k, i, j;
-
-      dlen = len1 + len2;
-      dp = (mp_limb_t *) malloc (dlen * sizeof (mp_limb_t));
-      if (dp == NULL)
-        return NULL;
-      for (k = len2; k > 0; )
-        dp[--k] = 0;
-      for (i = 0; i < len1; i++)
-        {
-          mp_limb_t digit1 = p1[i];
-          mp_twolimb_t carry = 0;
-          for (j = 0; j < len2; j++)
-            {
-              mp_limb_t digit2 = p2[j];
-              carry += (mp_twolimb_t) digit1 * (mp_twolimb_t) digit2;
-              carry += dp[i + j];
-              dp[i + j] = (mp_limb_t) carry;
-              carry = carry >> GMP_LIMB_BITS;
-            }
-          dp[i + len2] = (mp_limb_t) carry;
-        }
-      /* Normalise.  */
-      while (dlen > 0 && dp[dlen - 1] == 0)
-        dlen--;
-      dest->nlimbs = dlen;
-      dest->limbs = dp;
-    }
-  return dest->limbs;
-}
-
-/* Compute the quotient of a bignum a >= 0 and a bignum b > 0.
-   a is written as  a = q * b + r  with 0 <= r < b.  q is the quotient, r
-   the remainder.
-   Finally, round-to-even is performed: If r > b/2 or if r = b/2 and q is odd,
-   q is incremented.
-   Return the allocated memory in case of success, NULL in case of memory
-   allocation failure.  */
-static void *
-divide (mpn_t a, mpn_t b, mpn_t *q)
-{
-  /* Algorithm:
-     First normalise a and b: a=[a[m-1],...,a[0]], b=[b[n-1],...,b[0]]
-     with m>=0 and n>0 (in base beta = 2^GMP_LIMB_BITS).
-     If m<n, then q:=0 and r:=a.
-     If m>=n=1, perform a single-precision division:
-       r:=0, j:=m,
-       while j>0 do
-         {Here (q[m-1]*beta^(m-1)+...+q[j]*beta^j) * b[0] + r*beta^j =
-               = a[m-1]*beta^(m-1)+...+a[j]*beta^j und 0<=r<b[0]<beta}
-         j:=j-1, r:=r*beta+a[j], q[j]:=floor(r/b[0]), r:=r-b[0]*q[j].
-       Normalise [q[m-1],...,q[0]], yields q.
-     If m>=n>1, perform a multiple-precision division:
-       We have a/b < beta^(m-n+1).
-       s:=intDsize-1-(highest bit in b[n-1]), 0<=s<intDsize.
-       Shift a and b left by s bits, copying them. r:=a.
-       r=[r[m],...,r[0]], b=[b[n-1],...,b[0]] with b[n-1]>=beta/2.
-       For j=m-n,...,0: {Here 0 <= r < b*beta^(j+1).}
-         Compute q* :
-           q* := floor((r[j+n]*beta+r[j+n-1])/b[n-1]).
-           In case of overflow (q* >= beta) set q* := beta-1.
-           Compute c2 := ((r[j+n]*beta+r[j+n-1]) - q* * b[n-1])*beta + r[j+n-2]
-           and c3 := b[n-2] * q*.
-           {We have 0 <= c2 < 2*beta^2, even 0 <= c2 < beta^2 if no overflow
-            occurred.  Furthermore 0 <= c3 < beta^2.
-            If there was overflow and
-            r[j+n]*beta+r[j+n-1] - q* * b[n-1] >= beta, i.e. c2 >= beta^2,
-            the next test can be skipped.}
-           While c3 > c2, {Here 0 <= c2 < c3 < beta^2}
-             Put q* := q* - 1, c2 := c2 + b[n-1]*beta, c3 := c3 - b[n-2].
-           If q* > 0:
-             Put r := r - b * q* * beta^j. In detail:
-               [r[n+j],...,r[j]] := [r[n+j],...,r[j]] - q* * [b[n-1],...,b[0]].
-               hence: u:=0, for i:=0 to n-1 do
-                              u := u + q* * b[i],
-                              r[j+i]:=r[j+i]-(u mod beta) (+ beta, if carry),
-                              u:=u div beta (+ 1, if carry in subtraction)
-                      r[n+j]:=r[n+j]-u.
-               {Since always u = (q* * [b[i-1],...,b[0]] div beta^i) + 1
-                               < q* + 1 <= beta,
-                the carry u does not overflow.}
-             If a negative carry occurs, put q* := q* - 1
-               and [r[n+j],...,r[j]] := [r[n+j],...,r[j]] + [0,b[n-1],...,b[0]].
-         Set q[j] := q*.
-       Normalise [q[m-n],..,q[0]]; this yields the quotient q.
-       Shift [r[n-1],...,r[0]] right by s bits and normalise; this yields the
-       rest r.
-       The room for q[j] can be allocated at the memory location of r[n+j].
-     Finally, round-to-even:
-       Shift r left by 1 bit.
-       If r > b or if r = b and q[0] is odd, q := q+1.
-   */
-  const mp_limb_t *a_ptr = a.limbs;
-  size_t a_len = a.nlimbs;
-  const mp_limb_t *b_ptr = b.limbs;
-  size_t b_len = b.nlimbs;
-  mp_limb_t *roomptr;
-  mp_limb_t *tmp_roomptr = NULL;
-  mp_limb_t *q_ptr;
-  size_t q_len;
-  mp_limb_t *r_ptr;
-  size_t r_len;
-
-  /* Allocate room for a_len+2 digits.
-     (Need a_len+1 digits for the real division and 1 more digit for the
-     final rounding of q.)  */
-  roomptr = (mp_limb_t *) malloc ((a_len + 2) * sizeof (mp_limb_t));
-  if (roomptr == NULL)
-    return NULL;
-
-  /* Normalise a.  */
-  while (a_len > 0 && a_ptr[a_len - 1] == 0)
-    a_len--;
-
-  /* Normalise b.  */
-  for (;;)
-    {
-      if (b_len == 0)
-        /* Division by zero.  */
-        abort ();
-      if (b_ptr[b_len - 1] == 0)
-        b_len--;
-      else
-        break;
-    }
-
-  /* Here m = a_len >= 0 and n = b_len > 0.  */
-
-  if (a_len < b_len)
-    {
-      /* m<n: trivial case.  q=0, r := copy of a.  */
-      r_ptr = roomptr;
-      r_len = a_len;
-      memcpy (r_ptr, a_ptr, a_len * sizeof (mp_limb_t));
-      q_ptr = roomptr + a_len;
-      q_len = 0;
-    }
-  else if (b_len == 1)
-    {
-      /* n=1: single precision division.
-         beta^(m-1) <= a < beta^m  ==>  beta^(m-2) <= a/b < beta^m  */
-      r_ptr = roomptr;
-      q_ptr = roomptr + 1;
-      {
-        mp_limb_t den = b_ptr[0];
-        mp_limb_t remainder = 0;
-        const mp_limb_t *sourceptr = a_ptr + a_len;
-        mp_limb_t *destptr = q_ptr + a_len;
-        size_t count;
-        for (count = a_len; count > 0; count--)
-          {
-            mp_twolimb_t num =
-              ((mp_twolimb_t) remainder << GMP_LIMB_BITS) | *--sourceptr;
-            *--destptr = num / den;
-            remainder = num % den;
-          }
-        /* Normalise and store r.  */
-        if (remainder > 0)
-          {
-            r_ptr[0] = remainder;
-            r_len = 1;
-          }
-        else
-          r_len = 0;
-        /* Normalise q.  */
-        q_len = a_len;
-        if (q_ptr[q_len - 1] == 0)
-          q_len--;
-      }
-    }
-  else
-    {
-      /* n>1: multiple precision division.
-         beta^(m-1) <= a < beta^m, beta^(n-1) <= b < beta^n  ==>
-         beta^(m-n-1) <= a/b < beta^(m-n+1).  */
-      /* Determine s.  */
-      size_t s;
-      {
-        mp_limb_t msd = b_ptr[b_len - 1]; /* = b[n-1], > 0 */
-        s = 31;
-        if (msd >= 0x10000)
-          {
-            msd = msd >> 16;
-            s -= 16;
-          }
-        if (msd >= 0x100)
-          {
-            msd = msd >> 8;
-            s -= 8;
-          }
-        if (msd >= 0x10)
-          {
-            msd = msd >> 4;
-            s -= 4;
-          }
-        if (msd >= 0x4)
-          {
-            msd = msd >> 2;
-            s -= 2;
-          }
-        if (msd >= 0x2)
-          {
-            msd = msd >> 1;
-            s -= 1;
-          }
-      }
-      /* 0 <= s < GMP_LIMB_BITS.
-         Copy b, shifting it left by s bits.  */
-      if (s > 0)
-        {
-          tmp_roomptr = (mp_limb_t *) malloc (b_len * sizeof (mp_limb_t));
-          if (tmp_roomptr == NULL)
-            {
-              free (roomptr);
-              return NULL;
-            }
-          {
-            const mp_limb_t *sourceptr = b_ptr;
-            mp_limb_t *destptr = tmp_roomptr;
-            mp_twolimb_t accu = 0;
-            size_t count;
-            for (count = b_len; count > 0; count--)
-              {
-                accu += (mp_twolimb_t) *sourceptr++ << s;
-                *destptr++ = (mp_limb_t) accu;
-                accu = accu >> GMP_LIMB_BITS;
-              }
-            /* accu must be zero, since that was how s was determined.  */
-            if (accu != 0)
-              abort ();
-          }
-          b_ptr = tmp_roomptr;
-        }
-      /* Copy a, shifting it left by s bits, yields r.
-         Memory layout:
-         At the beginning: r = roomptr[0..a_len],
-         at the end: r = roomptr[0..b_len-1], q = roomptr[b_len..a_len]  */
-      r_ptr = roomptr;
-      if (s == 0)
-        {
-          memcpy (r_ptr, a_ptr, a_len * sizeof (mp_limb_t));
-          r_ptr[a_len] = 0;
-        }
-      else
-        {
-          const mp_limb_t *sourceptr = a_ptr;
-          mp_limb_t *destptr = r_ptr;
-          mp_twolimb_t accu = 0;
-          size_t count;
-          for (count = a_len; count > 0; count--)
-            {
-              accu += (mp_twolimb_t) *sourceptr++ << s;
-              *destptr++ = (mp_limb_t) accu;
-              accu = accu >> GMP_LIMB_BITS;
-            }
-          *destptr++ = (mp_limb_t) accu;
-        }
-      q_ptr = roomptr + b_len;
-      q_len = a_len - b_len + 1; /* q will have m-n+1 limbs */
-      {
-        size_t j = a_len - b_len; /* m-n */
-        mp_limb_t b_msd = b_ptr[b_len - 1]; /* b[n-1] */
-        mp_limb_t b_2msd = b_ptr[b_len - 2]; /* b[n-2] */
-        mp_twolimb_t b_msdd = /* b[n-1]*beta+b[n-2] */
-          ((mp_twolimb_t) b_msd << GMP_LIMB_BITS) | b_2msd;
-        /* Division loop, traversed m-n+1 times.
-           j counts down, b is unchanged, beta/2 <= b[n-1] < beta.  */
-        for (;;)
-          {
-            mp_limb_t q_star;
-            mp_limb_t c1;
-            if (r_ptr[j + b_len] < b_msd) /* r[j+n] < b[n-1] ? */
-              {
-                /* Divide r[j+n]*beta+r[j+n-1] by b[n-1], no overflow.  */
-                mp_twolimb_t num =
-                  ((mp_twolimb_t) r_ptr[j + b_len] << GMP_LIMB_BITS)
-                  | r_ptr[j + b_len - 1];
-                q_star = num / b_msd;
-                c1 = num % b_msd;
-              }
-            else
-              {
-                /* Overflow, hence r[j+n]*beta+r[j+n-1] >= beta*b[n-1].  */
-                q_star = (mp_limb_t)~(mp_limb_t)0; /* q* = beta-1 */
-                /* Test whether r[j+n]*beta+r[j+n-1] - (beta-1)*b[n-1] >= beta
-                   <==> r[j+n]*beta+r[j+n-1] + b[n-1] >= beta*b[n-1]+beta
-                   <==> b[n-1] < floor((r[j+n]*beta+r[j+n-1]+b[n-1])/beta)
-                        {<= beta !}.
-                   If yes, jump directly to the subtraction loop.
-                   (Otherwise, r[j+n]*beta+r[j+n-1] - (beta-1)*b[n-1] < beta
-                    <==> floor((r[j+n]*beta+r[j+n-1]+b[n-1])/beta) = b[n-1] ) */
-                if (r_ptr[j + b_len] > b_msd
-                    || (c1 = r_ptr[j + b_len - 1] + b_msd) < b_msd)
-                  /* r[j+n] >= b[n-1]+1 or
-                     r[j+n] = b[n-1] and the addition r[j+n-1]+b[n-1] gives a
-                     carry.  */
-                  goto subtract;
-              }
-            /* q_star = q*,
-               c1 = (r[j+n]*beta+r[j+n-1]) - q* * b[n-1] (>=0, <beta).  */
-            {
-              mp_twolimb_t c2 = /* c1*beta+r[j+n-2] */
-                ((mp_twolimb_t) c1 << GMP_LIMB_BITS) | r_ptr[j + b_len - 2];
-              mp_twolimb_t c3 = /* b[n-2] * q* */
-                (mp_twolimb_t) b_2msd * (mp_twolimb_t) q_star;
-              /* While c2 < c3, increase c2 and decrease c3.
-                 Consider c3-c2.  While it is > 0, decrease it by
-                 b[n-1]*beta+b[n-2].  Because of b[n-1]*beta+b[n-2] >= beta^2/2
-                 this can happen only twice.  */
-              if (c3 > c2)
-                {
-                  q_star = q_star - 1; /* q* := q* - 1 */
-                  if (c3 - c2 > b_msdd)
-                    q_star = q_star - 1; /* q* := q* - 1 */
-                }
-            }
-            if (q_star > 0)
-              subtract:
-              {
-                /* Subtract r := r - b * q* * beta^j.  */
-                mp_limb_t cr;
-                {
-                  const mp_limb_t *sourceptr = b_ptr;
-                  mp_limb_t *destptr = r_ptr + j;
-                  mp_twolimb_t carry = 0;
-                  size_t count;
-                  for (count = b_len; count > 0; count--)
-                    {
-                      /* Here 0 <= carry <= q*.  */
-                      carry =
-                        carry
-                        + (mp_twolimb_t) q_star * (mp_twolimb_t) *sourceptr++
-                        + (mp_limb_t) ~(*destptr);
-                      /* Here 0 <= carry <= beta*q* + beta-1.  */
-                      *destptr++ = ~(mp_limb_t) carry;
-                      carry = carry >> GMP_LIMB_BITS; /* <= q* */
-                    }
-                  cr = (mp_limb_t) carry;
-                }
-                /* Subtract cr from r_ptr[j + b_len], then forget about
-                   r_ptr[j + b_len].  */
-                if (cr > r_ptr[j + b_len])
-                  {
-                    /* Subtraction gave a carry.  */
-                    q_star = q_star - 1; /* q* := q* - 1 */
-                    /* Add b back.  */
-                    {
-                      const mp_limb_t *sourceptr = b_ptr;
-                      mp_limb_t *destptr = r_ptr + j;
-                      mp_limb_t carry = 0;
-                      size_t count;
-                      for (count = b_len; count > 0; count--)
-                        {
-                          mp_limb_t source1 = *sourceptr++;
-                          mp_limb_t source2 = *destptr;
-                          *destptr++ = source1 + source2 + carry;
-                          carry =
-                            (carry
-                             ? source1 >= (mp_limb_t) ~source2
-                             : source1 > (mp_limb_t) ~source2);
-                        }
-                    }
-                    /* Forget about the carry and about r[j+n].  */
-                  }
-              }
-            /* q* is determined.  Store it as q[j].  */
-            q_ptr[j] = q_star;
-            if (j == 0)
-              break;
-            j--;
-          }
-      }
-      r_len = b_len;
-      /* Normalise q.  */
-      if (q_ptr[q_len - 1] == 0)
-        q_len--;
-# if 0 /* Not needed here, since we need r only to compare it with b/2, and
-          b is shifted left by s bits.  */
-      /* Shift r right by s bits.  */
-      if (s > 0)
-        {
-          mp_limb_t ptr = r_ptr + r_len;
-          mp_twolimb_t accu = 0;
-          size_t count;
-          for (count = r_len; count > 0; count--)
-            {
-              accu = (mp_twolimb_t) (mp_limb_t) accu << GMP_LIMB_BITS;
-              accu += (mp_twolimb_t) *--ptr << (GMP_LIMB_BITS - s);
-              *ptr = (mp_limb_t) (accu >> GMP_LIMB_BITS);
-            }
-        }
-# endif
-      /* Normalise r.  */
-      while (r_len > 0 && r_ptr[r_len - 1] == 0)
-        r_len--;
-    }
-  /* Compare r << 1 with b.  */
-  if (r_len > b_len)
-    goto increment_q;
-  {
-    size_t i;
-    for (i = b_len;;)
-      {
-        mp_limb_t r_i =
-          (i <= r_len && i > 0 ? r_ptr[i - 1] >> (GMP_LIMB_BITS - 1) : 0)
-          | (i < r_len ? r_ptr[i] << 1 : 0);
-        mp_limb_t b_i = (i < b_len ? b_ptr[i] : 0);
-        if (r_i > b_i)
-          goto increment_q;
-        if (r_i < b_i)
-          goto keep_q;
-        if (i == 0)
-          break;
-        i--;
-      }
-  }
-  if (q_len > 0 && ((q_ptr[0] & 1) != 0))
-    /* q is odd.  */
-    increment_q:
-    {
-      size_t i;
-      for (i = 0; i < q_len; i++)
-        if (++(q_ptr[i]) != 0)
-          goto keep_q;
-      q_ptr[q_len++] = 1;
-    }
-  keep_q:
-  if (tmp_roomptr != NULL)
-    free (tmp_roomptr);
-  q->limbs = q_ptr;
-  q->nlimbs = q_len;
-  return roomptr;
-}
-
-/* Convert a bignum a >= 0, multiplied with 10^extra_zeroes, to decimal
-   representation.
-   Destroys the contents of a.
-   Return the allocated memory - containing the decimal digits in low-to-high
-   order, terminated with a NUL character - in case of success, NULL in case
-   of memory allocation failure.  */
-static char *
-convert_to_decimal (mpn_t a, size_t extra_zeroes)
-{
-  mp_limb_t *a_ptr = a.limbs;
-  size_t a_len = a.nlimbs;
-  /* 0.03345 is slightly larger than log(2)/(9*log(10)).  */
-  size_t c_len = 9 * ((size_t)(a_len * (GMP_LIMB_BITS * 0.03345f)) + 1);
-  char *c_ptr = (char *) malloc (xsum (c_len, extra_zeroes));
-  if (c_ptr != NULL)
-    {
-      char *d_ptr = c_ptr;
-      for (; extra_zeroes > 0; extra_zeroes--)
-        *d_ptr++ = '0';
-      while (a_len > 0)
-        {
-          /* Divide a by 10^9, in-place.  */
-          mp_limb_t remainder = 0;
-          mp_limb_t *ptr = a_ptr + a_len;
-          size_t count;
-          for (count = a_len; count > 0; count--)
-            {
-              mp_twolimb_t num =
-                ((mp_twolimb_t) remainder << GMP_LIMB_BITS) | *--ptr;
-              *ptr = num / 1000000000;
-              remainder = num % 1000000000;
-            }
-          /* Store the remainder as 9 decimal digits.  */
-          for (count = 9; count > 0; count--)
-            {
-              *d_ptr++ = '0' + (remainder % 10);
-              remainder = remainder / 10;
-            }
-          /* Normalize a.  */
-          if (a_ptr[a_len - 1] == 0)
-            a_len--;
-        }
-      /* Remove leading zeroes.  */
-      while (d_ptr > c_ptr && d_ptr[-1] == '0')
-        d_ptr--;
-      /* But keep at least one zero.  */
-      if (d_ptr == c_ptr)
-        *d_ptr++ = '0';
-      /* Terminate the string.  */
-      *d_ptr = '\0';
-    }
-  return c_ptr;
-}
-
-# if NEED_PRINTF_LONG_DOUBLE
-
-/* Assuming x is finite and >= 0:
-   write x as x = 2^e * m, where m is a bignum.
-   Return the allocated memory in case of success, NULL in case of memory
-   allocation failure.  */
-static void *
-decode_long_double (long double x, int *ep, mpn_t *mp)
-{
-  mpn_t m;
-  int exp;
-  long double y;
-  size_t i;
-
-  /* Allocate memory for result.  */
-  m.nlimbs = (LDBL_MANT_BIT + GMP_LIMB_BITS - 1) / GMP_LIMB_BITS;
-  m.limbs = (mp_limb_t *) malloc (m.nlimbs * sizeof (mp_limb_t));
-  if (m.limbs == NULL)
-    return NULL;
-  /* Split into exponential part and mantissa.  */
-  y = frexpl (x, &exp);
-  if (!(y >= 0.0L && y < 1.0L))
-    abort ();
-  /* x = 2^exp * y = 2^(exp - LDBL_MANT_BIT) * (y * LDBL_MANT_BIT), and the
-     latter is an integer.  */
-  /* Convert the mantissa (y * LDBL_MANT_BIT) to a sequence of limbs.
-     I'm not sure whether it's safe to cast a 'long double' value between
-     2^31 and 2^32 to 'unsigned int', therefore play safe and cast only
-     'long double' values between 0 and 2^16 (to 'unsigned int' or 'int',
-     doesn't matter).  */
-#  if (LDBL_MANT_BIT % GMP_LIMB_BITS) != 0
-#   if (LDBL_MANT_BIT % GMP_LIMB_BITS) > GMP_LIMB_BITS / 2
-    {
-      mp_limb_t hi, lo;
-      y *= (mp_limb_t) 1 << (LDBL_MANT_BIT % (GMP_LIMB_BITS / 2));
-      hi = (int) y;
-      y -= hi;
-      if (!(y >= 0.0L && y < 1.0L))
-        abort ();
-      y *= (mp_limb_t) 1 << (GMP_LIMB_BITS / 2);
-      lo = (int) y;
-      y -= lo;
-      if (!(y >= 0.0L && y < 1.0L))
-        abort ();
-      m.limbs[LDBL_MANT_BIT / GMP_LIMB_BITS] = (hi << (GMP_LIMB_BITS / 2)) | lo;
-    }
-#   else
-    {
-      mp_limb_t d;
-      y *= (mp_limb_t) 1 << (LDBL_MANT_BIT % GMP_LIMB_BITS);
-      d = (int) y;
-      y -= d;
-      if (!(y >= 0.0L && y < 1.0L))
-        abort ();
-      m.limbs[LDBL_MANT_BIT / GMP_LIMB_BITS] = d;
-    }
-#   endif
-#  endif
-  for (i = LDBL_MANT_BIT / GMP_LIMB_BITS; i > 0; )
-    {
-      mp_limb_t hi, lo;
-      y *= (mp_limb_t) 1 << (GMP_LIMB_BITS / 2);
-      hi = (int) y;
-      y -= hi;
-      if (!(y >= 0.0L && y < 1.0L))
-        abort ();
-      y *= (mp_limb_t) 1 << (GMP_LIMB_BITS / 2);
-      lo = (int) y;
-      y -= lo;
-      if (!(y >= 0.0L && y < 1.0L))
-        abort ();
-      m.limbs[--i] = (hi << (GMP_LIMB_BITS / 2)) | lo;
-    }
-#if 0 /* On FreeBSD 6.1/x86, 'long double' numbers sometimes have excess
-         precision.  */
-  if (!(y == 0.0L))
-    abort ();
-#endif
-  /* Normalise.  */
-  while (m.nlimbs > 0 && m.limbs[m.nlimbs - 1] == 0)
-    m.nlimbs--;
-  *mp = m;
-  *ep = exp - LDBL_MANT_BIT;
-  return m.limbs;
-}
-
-# endif
-
-# if NEED_PRINTF_DOUBLE
-
-/* Assuming x is finite and >= 0:
-   write x as x = 2^e * m, where m is a bignum.
-   Return the allocated memory in case of success, NULL in case of memory
-   allocation failure.  */
-static void *
-decode_double (double x, int *ep, mpn_t *mp)
-{
-  mpn_t m;
-  int exp;
-  double y;
-  size_t i;
-
-  /* Allocate memory for result.  */
-  m.nlimbs = (DBL_MANT_BIT + GMP_LIMB_BITS - 1) / GMP_LIMB_BITS;
-  m.limbs = (mp_limb_t *) malloc (m.nlimbs * sizeof (mp_limb_t));
-  if (m.limbs == NULL)
-    return NULL;
-  /* Split into exponential part and mantissa.  */
-  y = frexp (x, &exp);
-  if (!(y >= 0.0 && y < 1.0))
-    abort ();
-  /* x = 2^exp * y = 2^(exp - DBL_MANT_BIT) * (y * DBL_MANT_BIT), and the
-     latter is an integer.  */
-  /* Convert the mantissa (y * DBL_MANT_BIT) to a sequence of limbs.
-     I'm not sure whether it's safe to cast a 'double' value between
-     2^31 and 2^32 to 'unsigned int', therefore play safe and cast only
-     'double' values between 0 and 2^16 (to 'unsigned int' or 'int',
-     doesn't matter).  */
-#  if (DBL_MANT_BIT % GMP_LIMB_BITS) != 0
-#   if (DBL_MANT_BIT % GMP_LIMB_BITS) > GMP_LIMB_BITS / 2
-    {
-      mp_limb_t hi, lo;
-      y *= (mp_limb_t) 1 << (DBL_MANT_BIT % (GMP_LIMB_BITS / 2));
-      hi = (int) y;
-      y -= hi;
-      if (!(y >= 0.0 && y < 1.0))
-        abort ();
-      y *= (mp_limb_t) 1 << (GMP_LIMB_BITS / 2);
-      lo = (int) y;
-      y -= lo;
-      if (!(y >= 0.0 && y < 1.0))
-        abort ();
-      m.limbs[DBL_MANT_BIT / GMP_LIMB_BITS] = (hi << (GMP_LIMB_BITS / 2)) | lo;
-    }
-#   else
-    {
-      mp_limb_t d;
-      y *= (mp_limb_t) 1 << (DBL_MANT_BIT % GMP_LIMB_BITS);
-      d = (int) y;
-      y -= d;
-      if (!(y >= 0.0 && y < 1.0))
-        abort ();
-      m.limbs[DBL_MANT_BIT / GMP_LIMB_BITS] = d;
-    }
-#   endif
-#  endif
-  for (i = DBL_MANT_BIT / GMP_LIMB_BITS; i > 0; )
-    {
-      mp_limb_t hi, lo;
-      y *= (mp_limb_t) 1 << (GMP_LIMB_BITS / 2);
-      hi = (int) y;
-      y -= hi;
-      if (!(y >= 0.0 && y < 1.0))
-        abort ();
-      y *= (mp_limb_t) 1 << (GMP_LIMB_BITS / 2);
-      lo = (int) y;
-      y -= lo;
-      if (!(y >= 0.0 && y < 1.0))
-        abort ();
-      m.limbs[--i] = (hi << (GMP_LIMB_BITS / 2)) | lo;
-    }
-  if (!(y == 0.0))
-    abort ();
-  /* Normalise.  */
-  while (m.nlimbs > 0 && m.limbs[m.nlimbs - 1] == 0)
-    m.nlimbs--;
-  *mp = m;
-  *ep = exp - DBL_MANT_BIT;
-  return m.limbs;
-}
-
-# endif
-
-/* Assuming x = 2^e * m is finite and >= 0, and n is an integer:
-   Returns the decimal representation of round (x * 10^n).
-   Return the allocated memory - containing the decimal digits in low-to-high
-   order, terminated with a NUL character - in case of success, NULL in case
-   of memory allocation failure.  */
-static char *
-scale10_round_decimal_decoded (int e, mpn_t m, void *memory, int n)
-{
-  int s;
-  size_t extra_zeroes;
-  unsigned int abs_n;
-  unsigned int abs_s;
-  mp_limb_t *pow5_ptr;
-  size_t pow5_len;
-  unsigned int s_limbs;
-  unsigned int s_bits;
-  mpn_t pow5;
-  mpn_t z;
-  void *z_memory;
-  char *digits;
-
-  if (memory == NULL)
-    return NULL;
-  /* x = 2^e * m, hence
-     y = round (2^e * 10^n * m) = round (2^(e+n) * 5^n * m)
-       = round (2^s * 5^n * m).  */
-  s = e + n;
-  extra_zeroes = 0;
-  /* Factor out a common power of 10 if possible.  */
-  if (s > 0 && n > 0)
-    {
-      extra_zeroes = (s < n ? s : n);
-      s -= extra_zeroes;
-      n -= extra_zeroes;
-    }
-  /* Here y = round (2^s * 5^n * m) * 10^extra_zeroes.
-     Before converting to decimal, we need to compute
-     z = round (2^s * 5^n * m).  */
-  /* Compute 5^|n|, possibly shifted by |s| bits if n and s have the same
-     sign.  2.322 is slightly larger than log(5)/log(2).  */
-  abs_n = (n >= 0 ? n : -n);
-  abs_s = (s >= 0 ? s : -s);
-  pow5_ptr = (mp_limb_t *) malloc (((int)(abs_n * (2.322f / GMP_LIMB_BITS)) + 1
-                                    + abs_s / GMP_LIMB_BITS + 1)
-                                   * sizeof (mp_limb_t));
-  if (pow5_ptr == NULL)
-    {
-      free (memory);
-      return NULL;
-    }
-  /* Initialize with 1.  */
-  pow5_ptr[0] = 1;
-  pow5_len = 1;
-  /* Multiply with 5^|n|.  */
-  if (abs_n > 0)
-    {
-      static mp_limb_t const small_pow5[13 + 1] =
-        {
-          1, 5, 25, 125, 625, 3125, 15625, 78125, 390625, 1953125, 9765625,
-          48828125, 244140625, 1220703125
-        };
-      unsigned int n13;
-      for (n13 = 0; n13 <= abs_n; n13 += 13)
-        {
-          mp_limb_t digit1 = small_pow5[n13 + 13 <= abs_n ? 13 : abs_n - n13];
-          size_t j;
-          mp_twolimb_t carry = 0;
-          for (j = 0; j < pow5_len; j++)
-            {
-              mp_limb_t digit2 = pow5_ptr[j];
-              carry += (mp_twolimb_t) digit1 * (mp_twolimb_t) digit2;
-              pow5_ptr[j] = (mp_limb_t) carry;
-              carry = carry >> GMP_LIMB_BITS;
-            }
-          if (carry > 0)
-            pow5_ptr[pow5_len++] = (mp_limb_t) carry;
-        }
-    }
-  s_limbs = abs_s / GMP_LIMB_BITS;
-  s_bits = abs_s % GMP_LIMB_BITS;
-  if (n >= 0 ? s >= 0 : s <= 0)
-    {
-      /* Multiply with 2^|s|.  */
-      if (s_bits > 0)
-        {
-          mp_limb_t *ptr = pow5_ptr;
-          mp_twolimb_t accu = 0;
-          size_t count;
-          for (count = pow5_len; count > 0; count--)
-            {
-              accu += (mp_twolimb_t) *ptr << s_bits;
-              *ptr++ = (mp_limb_t) accu;
-              accu = accu >> GMP_LIMB_BITS;
-            }
-          if (accu > 0)
-            {
-              *ptr = (mp_limb_t) accu;
-              pow5_len++;
-            }
-        }
-      if (s_limbs > 0)
-        {
-          size_t count;
-          for (count = pow5_len; count > 0;)
-            {
-              count--;
-              pow5_ptr[s_limbs + count] = pow5_ptr[count];
-            }
-          for (count = s_limbs; count > 0;)
-            {
-              count--;
-              pow5_ptr[count] = 0;
-            }
-          pow5_len += s_limbs;
-        }
-      pow5.limbs = pow5_ptr;
-      pow5.nlimbs = pow5_len;
-      if (n >= 0)
-        {
-          /* Multiply m with pow5.  No division needed.  */
-          z_memory = multiply (m, pow5, &z);
-        }
-      else
-        {
-          /* Divide m by pow5 and round.  */
-          z_memory = divide (m, pow5, &z);
-        }
-    }
-  else
-    {
-      pow5.limbs = pow5_ptr;
-      pow5.nlimbs = pow5_len;
-      if (n >= 0)
-        {
-          /* n >= 0, s < 0.
-             Multiply m with pow5, then divide by 2^|s|.  */
-          mpn_t numerator;
-          mpn_t denominator;
-          void *tmp_memory;
-          tmp_memory = multiply (m, pow5, &numerator);
-          if (tmp_memory == NULL)
-            {
-              free (pow5_ptr);
-              free (memory);
-              return NULL;
-            }
-          /* Construct 2^|s|.  */
-          {
-            mp_limb_t *ptr = pow5_ptr + pow5_len;
-            size_t i;
-            for (i = 0; i < s_limbs; i++)
-              ptr[i] = 0;
-            ptr[s_limbs] = (mp_limb_t) 1 << s_bits;
-            denominator.limbs = ptr;
-            denominator.nlimbs = s_limbs + 1;
-          }
-          z_memory = divide (numerator, denominator, &z);
-          free (tmp_memory);
-        }
-      else
-        {
-          /* n < 0, s > 0.
-             Multiply m with 2^s, then divide by pow5.  */
-          mpn_t numerator;
-          mp_limb_t *num_ptr;
-          num_ptr = (mp_limb_t *) malloc ((m.nlimbs + s_limbs + 1)
-                                          * sizeof (mp_limb_t));
-          if (num_ptr == NULL)
-            {
-              free (pow5_ptr);
-              free (memory);
-              return NULL;
-            }
-          {
-            mp_limb_t *destptr = num_ptr;
-            {
-              size_t i;
-              for (i = 0; i < s_limbs; i++)
-                *destptr++ = 0;
-            }
-            if (s_bits > 0)
-              {
-                const mp_limb_t *sourceptr = m.limbs;
-                mp_twolimb_t accu = 0;
-                size_t count;
-                for (count = m.nlimbs; count > 0; count--)
-                  {
-                    accu += (mp_twolimb_t) *sourceptr++ << s_bits;
-                    *destptr++ = (mp_limb_t) accu;
-                    accu = accu >> GMP_LIMB_BITS;
-                  }
-                if (accu > 0)
-                  *destptr++ = (mp_limb_t) accu;
-              }
-            else
-              {
-                const mp_limb_t *sourceptr = m.limbs;
-                size_t count;
-                for (count = m.nlimbs; count > 0; count--)
-                  *destptr++ = *sourceptr++;
-              }
-            numerator.limbs = num_ptr;
-            numerator.nlimbs = destptr - num_ptr;
-          }
-          z_memory = divide (numerator, pow5, &z);
-          free (num_ptr);
-        }
-    }
-  free (pow5_ptr);
-  free (memory);
-
-  /* Here y = round (x * 10^n) = z * 10^extra_zeroes.  */
-
-  if (z_memory == NULL)
-    return NULL;
-  digits = convert_to_decimal (z, extra_zeroes);
-  free (z_memory);
-  return digits;
-}
-
-# if NEED_PRINTF_LONG_DOUBLE
-
-/* Assuming x is finite and >= 0, and n is an integer:
-   Returns the decimal representation of round (x * 10^n).
-   Return the allocated memory - containing the decimal digits in low-to-high
-   order, terminated with a NUL character - in case of success, NULL in case
-   of memory allocation failure.  */
-static char *
-scale10_round_decimal_long_double (long double x, int n)
-{
-  int e IF_LINT(= 0);
-  mpn_t m;
-  void *memory = decode_long_double (x, &e, &m);
-  return scale10_round_decimal_decoded (e, m, memory, n);
-}
-
-# endif
-
-# if NEED_PRINTF_DOUBLE
-
-/* Assuming x is finite and >= 0, and n is an integer:
-   Returns the decimal representation of round (x * 10^n).
-   Return the allocated memory - containing the decimal digits in low-to-high
-   order, terminated with a NUL character - in case of success, NULL in case
-   of memory allocation failure.  */
-static char *
-scale10_round_decimal_double (double x, int n)
-{
-  int e IF_LINT(= 0);
-  mpn_t m;
-  void *memory = decode_double (x, &e, &m);
-  return scale10_round_decimal_decoded (e, m, memory, n);
-}
-
-# endif
-
-# if NEED_PRINTF_LONG_DOUBLE
-
-/* Assuming x is finite and > 0:
-   Return an approximation for n with 10^n <= x < 10^(n+1).
-   The approximation is usually the right n, but may be off by 1 sometimes.  */
-static int
-floorlog10l (long double x)
-{
-  int exp;
-  long double y;
-  double z;
-  double l;
-
-  /* Split into exponential part and mantissa.  */
-  y = frexpl (x, &exp);
-  if (!(y >= 0.0L && y < 1.0L))
-    abort ();
-  if (y == 0.0L)
-    return INT_MIN;
-  if (y < 0.5L)
-    {
-      while (y < (1.0L / (1 << (GMP_LIMB_BITS / 2)) / (1 << (GMP_LIMB_BITS / 2))))
-        {
-          y *= 1.0L * (1 << (GMP_LIMB_BITS / 2)) * (1 << (GMP_LIMB_BITS / 2));
-          exp -= GMP_LIMB_BITS;
-        }
-      if (y < (1.0L / (1 << 16)))
-        {
-          y *= 1.0L * (1 << 16);
-          exp -= 16;
-        }
-      if (y < (1.0L / (1 << 8)))
-        {
-          y *= 1.0L * (1 << 8);
-          exp -= 8;
-        }
-      if (y < (1.0L / (1 << 4)))
-        {
-          y *= 1.0L * (1 << 4);
-          exp -= 4;
-        }
-      if (y < (1.0L / (1 << 2)))
-        {
-          y *= 1.0L * (1 << 2);
-          exp -= 2;
-        }
-      if (y < (1.0L / (1 << 1)))
-        {
-          y *= 1.0L * (1 << 1);
-          exp -= 1;
-        }
-    }
-  if (!(y >= 0.5L && y < 1.0L))
-    abort ();
-  /* Compute an approximation for l = log2(x) = exp + log2(y).  */
-  l = exp;
-  z = y;
-  if (z < 0.70710678118654752444)
-    {
-      z *= 1.4142135623730950488;
-      l -= 0.5;
-    }
-  if (z < 0.8408964152537145431)
-    {
-      z *= 1.1892071150027210667;
-      l -= 0.25;
-    }
-  if (z < 0.91700404320467123175)
-    {
-      z *= 1.0905077326652576592;
-      l -= 0.125;
-    }
-  if (z < 0.9576032806985736469)
-    {
-      z *= 1.0442737824274138403;
-      l -= 0.0625;
-    }
-  /* Now 0.95 <= z <= 1.01.  */
-  z = 1 - z;
-  /* log2(1-z) = 1/log(2) * (- z - z^2/2 - z^3/3 - z^4/4 - ...)
-     Four terms are enough to get an approximation with error < 10^-7.  */
-  l -= 1.4426950408889634074 * z * (1.0 + z * (0.5 + z * ((1.0 / 3) + z * 0.25)));
-  /* Finally multiply with log(2)/log(10), yields an approximation for
-     log10(x).  */
-  l *= 0.30102999566398119523;
-  /* Round down to the next integer.  */
-  return (int) l + (l < 0 ? -1 : 0);
-}
-
-# endif
-
-# if NEED_PRINTF_DOUBLE
-
-/* Assuming x is finite and > 0:
-   Return an approximation for n with 10^n <= x < 10^(n+1).
-   The approximation is usually the right n, but may be off by 1 sometimes.  */
-static int
-floorlog10 (double x)
-{
-  int exp;
-  double y;
-  double z;
-  double l;
-
-  /* Split into exponential part and mantissa.  */
-  y = frexp (x, &exp);
-  if (!(y >= 0.0 && y < 1.0))
-    abort ();
-  if (y == 0.0)
-    return INT_MIN;
-  if (y < 0.5)
-    {
-      while (y < (1.0 / (1 << (GMP_LIMB_BITS / 2)) / (1 << (GMP_LIMB_BITS / 2))))
-        {
-          y *= 1.0 * (1 << (GMP_LIMB_BITS / 2)) * (1 << (GMP_LIMB_BITS / 2));
-          exp -= GMP_LIMB_BITS;
-        }
-      if (y < (1.0 / (1 << 16)))
-        {
-          y *= 1.0 * (1 << 16);
-          exp -= 16;
-        }
-      if (y < (1.0 / (1 << 8)))
-        {
-          y *= 1.0 * (1 << 8);
-          exp -= 8;
-        }
-      if (y < (1.0 / (1 << 4)))
-        {
-          y *= 1.0 * (1 << 4);
-          exp -= 4;
-        }
-      if (y < (1.0 / (1 << 2)))
-        {
-          y *= 1.0 * (1 << 2);
-          exp -= 2;
-        }
-      if (y < (1.0 / (1 << 1)))
-        {
-          y *= 1.0 * (1 << 1);
-          exp -= 1;
-        }
-    }
-  if (!(y >= 0.5 && y < 1.0))
-    abort ();
-  /* Compute an approximation for l = log2(x) = exp + log2(y).  */
-  l = exp;
-  z = y;
-  if (z < 0.70710678118654752444)
-    {
-      z *= 1.4142135623730950488;
-      l -= 0.5;
-    }
-  if (z < 0.8408964152537145431)
-    {
-      z *= 1.1892071150027210667;
-      l -= 0.25;
-    }
-  if (z < 0.91700404320467123175)
-    {
-      z *= 1.0905077326652576592;
-      l -= 0.125;
-    }
-  if (z < 0.9576032806985736469)
-    {
-      z *= 1.0442737824274138403;
-      l -= 0.0625;
-    }
-  /* Now 0.95 <= z <= 1.01.  */
-  z = 1 - z;
-  /* log2(1-z) = 1/log(2) * (- z - z^2/2 - z^3/3 - z^4/4 - ...)
-     Four terms are enough to get an approximation with error < 10^-7.  */
-  l -= 1.4426950408889634074 * z * (1.0 + z * (0.5 + z * ((1.0 / 3) + z * 0.25)));
-  /* Finally multiply with log(2)/log(10), yields an approximation for
-     log10(x).  */
-  l *= 0.30102999566398119523;
-  /* Round down to the next integer.  */
-  return (int) l + (l < 0 ? -1 : 0);
-}
-
-# endif
-
-/* Tests whether a string of digits consists of exactly PRECISION zeroes and
-   a single '1' digit.  */
-static int
-is_borderline (const char *digits, size_t precision)
-{
-  for (; precision > 0; precision--, digits++)
-    if (*digits != '0')
-      return 0;
-  if (*digits != '1')
-    return 0;
-  digits++;
-  return *digits == '\0';
-}
-
-#endif
-
-#if !USE_SNPRINTF || !HAVE_SNPRINTF_RETVAL_C99
-
-/* Use a different function name, to make it possible that the 'wchar_t'
-   parametrization and the 'char' parametrization get compiled in the same
-   translation unit.  */
-# if WIDE_CHAR_VERSION
-#  define MAX_ROOM_NEEDED wmax_room_needed
-# else
-#  define MAX_ROOM_NEEDED max_room_needed
-# endif
-
-/* Returns the number of TCHAR_T units needed as temporary space for the result
-   of sprintf or SNPRINTF of a single conversion directive.  */
-static inline size_t
-MAX_ROOM_NEEDED (const arguments *ap, size_t arg_index, FCHAR_T conversion,
-                 arg_type type, int flags, size_t width, int has_precision,
-                 size_t precision, int pad_ourselves)
-{
-  size_t tmp_length;
-
-  switch (conversion)
-    {
-    case 'd': case 'i': case 'u':
-# if HAVE_LONG_LONG_INT
-      if (type == TYPE_LONGLONGINT || type == TYPE_ULONGLONGINT)
-        tmp_length =
-          (unsigned int) (sizeof (unsigned long long) * CHAR_BIT
-                          * 0.30103 /* binary -> decimal */
-                         )
-          + 1; /* turn floor into ceil */
-      else
-# endif
-      if (type == TYPE_LONGINT || type == TYPE_ULONGINT)
-        tmp_length =
-          (unsigned int) (sizeof (unsigned long) * CHAR_BIT
-                          * 0.30103 /* binary -> decimal */
-                         )
-          + 1; /* turn floor into ceil */
-      else
-        tmp_length =
-          (unsigned int) (sizeof (unsigned int) * CHAR_BIT
-                          * 0.30103 /* binary -> decimal */
-                         )
-          + 1; /* turn floor into ceil */
-      if (tmp_length < precision)
-        tmp_length = precision;
-      /* Multiply by 2, as an estimate for FLAG_GROUP.  */
-      tmp_length = xsum (tmp_length, tmp_length);
-      /* Add 1, to account for a leading sign.  */
-      tmp_length = xsum (tmp_length, 1);
-      break;
-
-    case 'o':
-# if HAVE_LONG_LONG_INT
-      if (type == TYPE_LONGLONGINT || type == TYPE_ULONGLONGINT)
-        tmp_length =
-          (unsigned int) (sizeof (unsigned long long) * CHAR_BIT
-                          * 0.333334 /* binary -> octal */
-                         )
-          + 1; /* turn floor into ceil */
-      else
-# endif
-      if (type == TYPE_LONGINT || type == TYPE_ULONGINT)
-        tmp_length =
-          (unsigned int) (sizeof (unsigned long) * CHAR_BIT
-                          * 0.333334 /* binary -> octal */
-                         )
-          + 1; /* turn floor into ceil */
-      else
-        tmp_length =
-          (unsigned int) (sizeof (unsigned int) * CHAR_BIT
-                          * 0.333334 /* binary -> octal */
-                         )
-          + 1; /* turn floor into ceil */
-      if (tmp_length < precision)
-        tmp_length = precision;
-      /* Add 1, to account for a leading sign.  */
-      tmp_length = xsum (tmp_length, 1);
-      break;
-
-    case 'x': case 'X':
-# if HAVE_LONG_LONG_INT
-      if (type == TYPE_LONGLONGINT || type == TYPE_ULONGLONGINT)
-        tmp_length =
-          (unsigned int) (sizeof (unsigned long long) * CHAR_BIT
-                          * 0.25 /* binary -> hexadecimal */
-                         )
-          + 1; /* turn floor into ceil */
-      else
-# endif
-      if (type == TYPE_LONGINT || type == TYPE_ULONGINT)
-        tmp_length =
-          (unsigned int) (sizeof (unsigned long) * CHAR_BIT
-                          * 0.25 /* binary -> hexadecimal */
-                         )
-          + 1; /* turn floor into ceil */
-      else
-        tmp_length =
-          (unsigned int) (sizeof (unsigned int) * CHAR_BIT
-                          * 0.25 /* binary -> hexadecimal */
-                         )
-          + 1; /* turn floor into ceil */
-      if (tmp_length < precision)
-        tmp_length = precision;
-      /* Add 2, to account for a leading sign or alternate form.  */
-      tmp_length = xsum (tmp_length, 2);
-      break;
-
-    case 'f': case 'F':
-      if (type == TYPE_LONGDOUBLE)
-        tmp_length =
-          (unsigned int) (LDBL_MAX_EXP
-                          * 0.30103 /* binary -> decimal */
-                          * 2 /* estimate for FLAG_GROUP */
-                         )
-          + 1 /* turn floor into ceil */
-          + 10; /* sign, decimal point etc. */
-      else
-        tmp_length =
-          (unsigned int) (DBL_MAX_EXP
-                          * 0.30103 /* binary -> decimal */
-                          * 2 /* estimate for FLAG_GROUP */
-                         )
-          + 1 /* turn floor into ceil */
-          + 10; /* sign, decimal point etc. */
-      tmp_length = xsum (tmp_length, precision);
-      break;
-
-    case 'e': case 'E': case 'g': case 'G':
-      tmp_length =
-        12; /* sign, decimal point, exponent etc. */
-      tmp_length = xsum (tmp_length, precision);
-      break;
-
-    case 'a': case 'A':
-      if (type == TYPE_LONGDOUBLE)
-        tmp_length =
-          (unsigned int) (LDBL_DIG
-                          * 0.831 /* decimal -> hexadecimal */
-                         )
-          + 1; /* turn floor into ceil */
-      else
-        tmp_length =
-          (unsigned int) (DBL_DIG
-                          * 0.831 /* decimal -> hexadecimal */
-                         )
-          + 1; /* turn floor into ceil */
-      if (tmp_length < precision)
-        tmp_length = precision;
-      /* Account for sign, decimal point etc. */
-      tmp_length = xsum (tmp_length, 12);
-      break;
-
-    case 'c':
-# if HAVE_WINT_T && !WIDE_CHAR_VERSION
-      if (type == TYPE_WIDE_CHAR)
-        tmp_length = MB_CUR_MAX;
-      else
-# endif
-        tmp_length = 1;
-      break;
-
-    case 's':
-# if HAVE_WCHAR_T
-      if (type == TYPE_WIDE_STRING)
-        {
-#  if WIDE_CHAR_VERSION
-          /* ISO C says about %ls in fwprintf:
-               "If the precision is not specified or is greater than the size
-                of the array, the array shall contain a null wide character."
-             So if there is a precision, we must not use wcslen.  */
-          const wchar_t *arg = ap->arg[arg_index].a.a_wide_string;
-
-          if (has_precision)
-            tmp_length = local_wcsnlen (arg, precision);
-          else
-            tmp_length = local_wcslen (arg);
-#  else
-          /* ISO C says about %ls in fprintf:
-               "If a precision is specified, no more than that many bytes are
-                written (including shift sequences, if any), and the array
-                shall contain a null wide character if, to equal the multibyte
-                character sequence length given by the precision, the function
-                would need to access a wide character one past the end of the
-                array."
-             So if there is a precision, we must not use wcslen.  */
-          /* This case has already been handled separately in VASNPRINTF.  */
-          abort ();
-#  endif
-        }
-      else
-# endif
-        {
-# if WIDE_CHAR_VERSION
-          /* ISO C says about %s in fwprintf:
-               "If the precision is not specified or is greater than the size
-                of the converted array, the converted array shall contain a
-                null wide character."
-             So if there is a precision, we must not use strlen.  */
-          /* This case has already been handled separately in VASNPRINTF.  */
-          abort ();
-# else
-          /* ISO C says about %s in fprintf:
-               "If the precision is not specified or greater than the size of
-                the array, the array shall contain a null character."
-             So if there is a precision, we must not use strlen.  */
-          const char *arg = ap->arg[arg_index].a.a_string;
-
-          if (has_precision)
-            tmp_length = local_strnlen (arg, precision);
-          else
-            tmp_length = strlen (arg);
-# endif
-        }
-      break;
-
-    case 'p':
-      tmp_length =
-        (unsigned int) (sizeof (void *) * CHAR_BIT
-                        * 0.25 /* binary -> hexadecimal */
-                       )
-          + 1 /* turn floor into ceil */
-          + 2; /* account for leading 0x */
-      break;
-
-    default:
-      abort ();
-    }
-
-  if (!pad_ourselves)
-    {
-# if ENABLE_UNISTDIO
-      /* Padding considers the number of characters, therefore the number of
-         elements after padding may be
-           > max (tmp_length, width)
-         but is certainly
-           <= tmp_length + width.  */
-      tmp_length = xsum (tmp_length, width);
-# else
-      /* Padding considers the number of elements, says POSIX.  */
-      if (tmp_length < width)
-        tmp_length = width;
-# endif
-    }
-
-  tmp_length = xsum (tmp_length, 1); /* account for trailing NUL */
-
-  return tmp_length;
-}
-
-#endif
-
-DCHAR_T *
-VASNPRINTF (DCHAR_T *resultbuf, size_t *lengthp,
-            const FCHAR_T *format, va_list args)
-{
-  DIRECTIVES d;
-  arguments a;
-
-  if (PRINTF_PARSE (format, &d, &a) < 0)
-    /* errno is already set.  */
-    return NULL;
-
-#define CLEANUP() \
-  free (d.dir);                                                         \
-  if (a.arg)                                                            \
-    free (a.arg);
-
-  if (PRINTF_FETCHARGS (args, &a) < 0)
-    {
-      CLEANUP ();
-      errno = EINVAL;
-      return NULL;
-    }
-
-  {
-    size_t buf_neededlength;
-    TCHAR_T *buf;
-    TCHAR_T *buf_malloced;
-    const FCHAR_T *cp;
-    size_t i;
-    DIRECTIVE *dp;
-    /* Output string accumulator.  */
-    DCHAR_T *result;
-    size_t allocated;
-    size_t length;
-
-    /* Allocate a small buffer that will hold a directive passed to
-       sprintf or snprintf.  */
-    buf_neededlength =
-      xsum4 (7, d.max_width_length, d.max_precision_length, 6);
-#if HAVE_ALLOCA
-    if (buf_neededlength < 4000 / sizeof (TCHAR_T))
-      {
-        buf = (TCHAR_T *) alloca (buf_neededlength * sizeof (TCHAR_T));
-        buf_malloced = NULL;
-      }
-    else
-#endif
-      {
-        size_t buf_memsize = xtimes (buf_neededlength, sizeof (TCHAR_T));
-        if (size_overflow_p (buf_memsize))
-          goto out_of_memory_1;
-        buf = (TCHAR_T *) malloc (buf_memsize);
-        if (buf == NULL)
-          goto out_of_memory_1;
-        buf_malloced = buf;
-      }
-
-    if (resultbuf != NULL)
-      {
-        result = resultbuf;
-        allocated = *lengthp;
-      }
-    else
-      {
-        result = NULL;
-        allocated = 0;
-      }
-    length = 0;
-    /* Invariants:
-       result is either == resultbuf or == NULL or malloc-allocated.
-       If length > 0, then result != NULL.  */
-
-    /* Ensures that allocated >= needed.  Aborts through a jump to
-       out_of_memory if needed is SIZE_MAX or otherwise too big.  */
-#define ENSURE_ALLOCATION(needed) \
-    if ((needed) > allocated)                                                \
-      {                                                                      \
-        size_t memory_size;                                                  \
-        DCHAR_T *memory;                                                     \
-                                                                             \
-        allocated = (allocated > 0 ? xtimes (allocated, 2) : 12);            \
-        if ((needed) > allocated)                                            \
-          allocated = (needed);                                              \
-        memory_size = xtimes (allocated, sizeof (DCHAR_T));                  \
-        if (size_overflow_p (memory_size))                                   \
-          goto out_of_memory;                                                \
-        if (result == resultbuf || result == NULL)                           \
-          memory = (DCHAR_T *) malloc (memory_size);                         \
-        else                                                                 \
-          memory = (DCHAR_T *) realloc (result, memory_size);                \
-        if (memory == NULL)                                                  \
-          goto out_of_memory;                                                \
-        if (result == resultbuf && length > 0)                               \
-          DCHAR_CPY (memory, result, length);                                \
-        result = memory;                                                     \
-      }
-
-    for (cp = format, i = 0, dp = &d.dir[0]; ; cp = dp->dir_end, i++, dp++)
-      {
-        if (cp != dp->dir_start)
-          {
-            size_t n = dp->dir_start - cp;
-            size_t augmented_length = xsum (length, n);
-
-            ENSURE_ALLOCATION (augmented_length);
-            /* This copies a piece of FCHAR_T[] into a DCHAR_T[].  Here we
-               need that the format string contains only ASCII characters
-               if FCHAR_T and DCHAR_T are not the same type.  */
-            if (sizeof (FCHAR_T) == sizeof (DCHAR_T))
-              {
-                DCHAR_CPY (result + length, (const DCHAR_T *) cp, n);
-                length = augmented_length;
-              }
-            else
-              {
-                do
-                  result[length++] = (unsigned char) *cp++;
-                while (--n > 0);
-              }
-          }
-        if (i == d.count)
-          break;
-
-        /* Execute a single directive.  */
-        if (dp->conversion == '%')
-          {
-            size_t augmented_length;
-
-            if (!(dp->arg_index == ARG_NONE))
-              abort ();
-            augmented_length = xsum (length, 1);
-            ENSURE_ALLOCATION (augmented_length);
-            result[length] = '%';
-            length = augmented_length;
-          }
-        else
-          {
-            if (!(dp->arg_index != ARG_NONE))
-              abort ();
-
-            if (dp->conversion == 'n')
-              {
-                switch (a.arg[dp->arg_index].type)
-                  {
-                  case TYPE_COUNT_SCHAR_POINTER:
-                    *a.arg[dp->arg_index].a.a_count_schar_pointer = length;
-                    break;
-                  case TYPE_COUNT_SHORT_POINTER:
-                    *a.arg[dp->arg_index].a.a_count_short_pointer = length;
-                    break;
-                  case TYPE_COUNT_INT_POINTER:
-                    *a.arg[dp->arg_index].a.a_count_int_pointer = length;
-                    break;
-                  case TYPE_COUNT_LONGINT_POINTER:
-                    *a.arg[dp->arg_index].a.a_count_longint_pointer = length;
-                    break;
-#if HAVE_LONG_LONG_INT
-                  case TYPE_COUNT_LONGLONGINT_POINTER:
-                    *a.arg[dp->arg_index].a.a_count_longlongint_pointer = length;
-                    break;
-#endif
-                  default:
-                    abort ();
-                  }
-              }
-#if ENABLE_UNISTDIO
-            /* The unistdio extensions.  */
-            else if (dp->conversion == 'U')
-              {
-                arg_type type = a.arg[dp->arg_index].type;
-                int flags = dp->flags;
-                int has_width;
-                size_t width;
-                int has_precision;
-                size_t precision;
-
-                has_width = 0;
-                width = 0;
-                if (dp->width_start != dp->width_end)
-                  {
-                    if (dp->width_arg_index != ARG_NONE)
-                      {
-                        int arg;
-
-                        if (!(a.arg[dp->width_arg_index].type == TYPE_INT))
-                          abort ();
-                        arg = a.arg[dp->width_arg_index].a.a_int;
-                        if (arg < 0)
-                          {
-                            /* "A negative field width is taken as a '-' flag
-                                followed by a positive field width."  */
-                            flags |= FLAG_LEFT;
-                            width = (unsigned int) (-arg);
-                          }
-                        else
-                          width = arg;
-                      }
-                    else
-                      {
-                        const FCHAR_T *digitp = dp->width_start;
-
-                        do
-                          width = xsum (xtimes (width, 10), *digitp++ - '0');
-                        while (digitp != dp->width_end);
-                      }
-                    has_width = 1;
-                  }
-
-                has_precision = 0;
-                precision = 0;
-                if (dp->precision_start != dp->precision_end)
-                  {
-                    if (dp->precision_arg_index != ARG_NONE)
-                      {
-                        int arg;
-
-                        if (!(a.arg[dp->precision_arg_index].type == TYPE_INT))
-                          abort ();
-                        arg = a.arg[dp->precision_arg_index].a.a_int;
-                        /* "A negative precision is taken as if the precision
-                            were omitted."  */
-                        if (arg >= 0)
-                          {
-                            precision = arg;
-                            has_precision = 1;
-                          }
-                      }
-                    else
-                      {
-                        const FCHAR_T *digitp = dp->precision_start + 1;
-
-                        precision = 0;
-                        while (digitp != dp->precision_end)
-                          precision = xsum (xtimes (precision, 10), *digitp++ - '0');
-                        has_precision = 1;
-                      }
-                  }
-
-                switch (type)
-                  {
-                  case TYPE_U8_STRING:
-                    {
-                      const uint8_t *arg = a.arg[dp->arg_index].a.a_u8_string;
-                      const uint8_t *arg_end;
-                      size_t characters;
-
-                      if (has_precision)
-                        {
-                          /* Use only PRECISION characters, from the left.  */
-                          arg_end = arg;
-                          characters = 0;
-                          for (; precision > 0; precision--)
-                            {
-                              int count = u8_strmblen (arg_end);
-                              if (count == 0)
-                                break;
-                              if (count < 0)
-                                {
-                                  if (!(result == resultbuf || result == NULL))
-                                    free (result);
-                                  if (buf_malloced != NULL)
-                                    free (buf_malloced);
-                                  CLEANUP ();
-                                  errno = EILSEQ;
-                                  return NULL;
-                                }
-                              arg_end += count;
-                              characters++;
-                            }
-                        }
-                      else if (has_width)
-                        {
-                          /* Use the entire string, and count the number of
-                             characters.  */
-                          arg_end = arg;
-                          characters = 0;
-                          for (;;)
-                            {
-                              int count = u8_strmblen (arg_end);
-                              if (count == 0)
-                                break;
-                              if (count < 0)
-                                {
-                                  if (!(result == resultbuf || result == NULL))
-                                    free (result);
-                                  if (buf_malloced != NULL)
-                                    free (buf_malloced);
-                                  CLEANUP ();
-                                  errno = EILSEQ;
-                                  return NULL;
-                                }
-                              arg_end += count;
-                              characters++;
-                            }
-                        }
-                      else
-                        {
-                          /* Use the entire string.  */
-                          arg_end = arg + u8_strlen (arg);
-                          /* The number of characters doesn't matter.  */
-                          characters = 0;
-                        }
-
-                      if (has_width && width > characters
-                          && !(dp->flags & FLAG_LEFT))
-                        {
-                          size_t n = width - characters;
-                          ENSURE_ALLOCATION (xsum (length, n));
-                          DCHAR_SET (result + length, ' ', n);
-                          length += n;
-                        }
-
-# if DCHAR_IS_UINT8_T
-                      {
-                        size_t n = arg_end - arg;
-                        ENSURE_ALLOCATION (xsum (length, n));
-                        DCHAR_CPY (result + length, arg, n);
-                        length += n;
-                      }
-# else
-                      { /* Convert.  */
-                        DCHAR_T *converted = result + length;
-                        size_t converted_len = allocated - length;
-#  if DCHAR_IS_TCHAR
-                        /* Convert from UTF-8 to locale encoding.  */
-                        converted =
-                          u8_conv_to_encoding (locale_charset (),
-                                               iconveh_question_mark,
-                                               arg, arg_end - arg, NULL,
-                                               converted, &converted_len);
-#  else
-                        /* Convert from UTF-8 to UTF-16/UTF-32.  */
-                        converted =
-                          U8_TO_DCHAR (arg, arg_end - arg,
-                                       converted, &converted_len);
-#  endif
-                        if (converted == NULL)
-                          {
-                            int saved_errno = errno;
-                            if (!(result == resultbuf || result == NULL))
-                              free (result);
-                            if (buf_malloced != NULL)
-                              free (buf_malloced);
-                            CLEANUP ();
-                            errno = saved_errno;
-                            return NULL;
-                          }
-                        if (converted != result + length)
-                          {
-                            ENSURE_ALLOCATION (xsum (length, converted_len));
-                            DCHAR_CPY (result + length, converted, converted_len);
-                            free (converted);
-                          }
-                        length += converted_len;
-                      }
-# endif
-
-                      if (has_width && width > characters
-                          && (dp->flags & FLAG_LEFT))
-                        {
-                          size_t n = width - characters;
-                          ENSURE_ALLOCATION (xsum (length, n));
-                          DCHAR_SET (result + length, ' ', n);
-                          length += n;
-                        }
-                    }
-                    break;
-
-                  case TYPE_U16_STRING:
-                    {
-                      const uint16_t *arg = a.arg[dp->arg_index].a.a_u16_string;
-                      const uint16_t *arg_end;
-                      size_t characters;
-
-                      if (has_precision)
-                        {
-                          /* Use only PRECISION characters, from the left.  */
-                          arg_end = arg;
-                          characters = 0;
-                          for (; precision > 0; precision--)
-                            {
-                              int count = u16_strmblen (arg_end);
-                              if (count == 0)
-                                break;
-                              if (count < 0)
-                                {
-                                  if (!(result == resultbuf || result == NULL))
-                                    free (result);
-                                  if (buf_malloced != NULL)
-                                    free (buf_malloced);
-                                  CLEANUP ();
-                                  errno = EILSEQ;
-                                  return NULL;
-                                }
-                              arg_end += count;
-                              characters++;
-                            }
-                        }
-                      else if (has_width)
-                        {
-                          /* Use the entire string, and count the number of
-                             characters.  */
-                          arg_end = arg;
-                          characters = 0;
-                          for (;;)
-                            {
-                              int count = u16_strmblen (arg_end);
-                              if (count == 0)
-                                break;
-                              if (count < 0)
-                                {
-                                  if (!(result == resultbuf || result == NULL))
-                                    free (result);
-                                  if (buf_malloced != NULL)
-                                    free (buf_malloced);
-                                  CLEANUP ();
-                                  errno = EILSEQ;
-                                  return NULL;
-                                }
-                              arg_end += count;
-                              characters++;
-                            }
-                        }
-                      else
-                        {
-                          /* Use the entire string.  */
-                          arg_end = arg + u16_strlen (arg);
-                          /* The number of characters doesn't matter.  */
-                          characters = 0;
-                        }
-
-                      if (has_width && width > characters
-                          && !(dp->flags & FLAG_LEFT))
-                        {
-                          size_t n = width - characters;
-                          ENSURE_ALLOCATION (xsum (length, n));
-                          DCHAR_SET (result + length, ' ', n);
-                          length += n;
-                        }
-
-# if DCHAR_IS_UINT16_T
-                      {
-                        size_t n = arg_end - arg;
-                        ENSURE_ALLOCATION (xsum (length, n));
-                        DCHAR_CPY (result + length, arg, n);
-                        length += n;
-                      }
-# else
-                      { /* Convert.  */
-                        DCHAR_T *converted = result + length;
-                        size_t converted_len = allocated - length;
-#  if DCHAR_IS_TCHAR
-                        /* Convert from UTF-16 to locale encoding.  */
-                        converted =
-                          u16_conv_to_encoding (locale_charset (),
-                                                iconveh_question_mark,
-                                                arg, arg_end - arg, NULL,
-                                                converted, &converted_len);
-#  else
-                        /* Convert from UTF-16 to UTF-8/UTF-32.  */
-                        converted =
-                          U16_TO_DCHAR (arg, arg_end - arg,
-                                        converted, &converted_len);
-#  endif
-                        if (converted == NULL)
-                          {
-                            int saved_errno = errno;
-                            if (!(result == resultbuf || result == NULL))
-                              free (result);
-                            if (buf_malloced != NULL)
-                              free (buf_malloced);
-                            CLEANUP ();
-                            errno = saved_errno;
-                            return NULL;
-                          }
-                        if (converted != result + length)
-                          {
-                            ENSURE_ALLOCATION (xsum (length, converted_len));
-                            DCHAR_CPY (result + length, converted, converted_len);
-                            free (converted);
-                          }
-                        length += converted_len;
-                      }
-# endif
-
-                      if (has_width && width > characters
-                          && (dp->flags & FLAG_LEFT))
-                        {
-                          size_t n = width - characters;
-                          ENSURE_ALLOCATION (xsum (length, n));
-                          DCHAR_SET (result + length, ' ', n);
-                          length += n;
-                        }
-                    }
-                    break;
-
-                  case TYPE_U32_STRING:
-                    {
-                      const uint32_t *arg = a.arg[dp->arg_index].a.a_u32_string;
-                      const uint32_t *arg_end;
-                      size_t characters;
-
-                      if (has_precision)
-                        {
-                          /* Use only PRECISION characters, from the left.  */
-                          arg_end = arg;
-                          characters = 0;
-                          for (; precision > 0; precision--)
-                            {
-                              int count = u32_strmblen (arg_end);
-                              if (count == 0)
-                                break;
-                              if (count < 0)
-                                {
-                                  if (!(result == resultbuf || result == NULL))
-                                    free (result);
-                                  if (buf_malloced != NULL)
-                                    free (buf_malloced);
-                                  CLEANUP ();
-                                  errno = EILSEQ;
-                                  return NULL;
-                                }
-                              arg_end += count;
-                              characters++;
-                            }
-                        }
-                      else if (has_width)
-                        {
-                          /* Use the entire string, and count the number of
-                             characters.  */
-                          arg_end = arg;
-                          characters = 0;
-                          for (;;)
-                            {
-                              int count = u32_strmblen (arg_end);
-                              if (count == 0)
-                                break;
-                              if (count < 0)
-                                {
-                                  if (!(result == resultbuf || result == NULL))
-                                    free (result);
-                                  if (buf_malloced != NULL)
-                                    free (buf_malloced);
-                                  CLEANUP ();
-                                  errno = EILSEQ;
-                                  return NULL;
-                                }
-                              arg_end += count;
-                              characters++;
-                            }
-                        }
-                      else
-                        {
-                          /* Use the entire string.  */
-                          arg_end = arg + u32_strlen (arg);
-                          /* The number of characters doesn't matter.  */
-                          characters = 0;
-                        }
-
-                      if (has_width && width > characters
-                          && !(dp->flags & FLAG_LEFT))
-                        {
-                          size_t n = width - characters;
-                          ENSURE_ALLOCATION (xsum (length, n));
-                          DCHAR_SET (result + length, ' ', n);
-                          length += n;
-                        }
-
-# if DCHAR_IS_UINT32_T
-                      {
-                        size_t n = arg_end - arg;
-                        ENSURE_ALLOCATION (xsum (length, n));
-                        DCHAR_CPY (result + length, arg, n);
-                        length += n;
-                      }
-# else
-                      { /* Convert.  */
-                        DCHAR_T *converted = result + length;
-                        size_t converted_len = allocated - length;
-#  if DCHAR_IS_TCHAR
-                        /* Convert from UTF-32 to locale encoding.  */
-                        converted =
-                          u32_conv_to_encoding (locale_charset (),
-                                                iconveh_question_mark,
-                                                arg, arg_end - arg, NULL,
-                                                converted, &converted_len);
-#  else
-                        /* Convert from UTF-32 to UTF-8/UTF-16.  */
-                        converted =
-                          U32_TO_DCHAR (arg, arg_end - arg,
-                                        converted, &converted_len);
-#  endif
-                        if (converted == NULL)
-                          {
-                            int saved_errno = errno;
-                            if (!(result == resultbuf || result == NULL))
-                              free (result);
-                            if (buf_malloced != NULL)
-                              free (buf_malloced);
-                            CLEANUP ();
-                            errno = saved_errno;
-                            return NULL;
-                          }
-                        if (converted != result + length)
-                          {
-                            ENSURE_ALLOCATION (xsum (length, converted_len));
-                            DCHAR_CPY (result + length, converted, converted_len);
-                            free (converted);
-                          }
-                        length += converted_len;
-                      }
-# endif
-
-                      if (has_width && width > characters
-                          && (dp->flags & FLAG_LEFT))
-                        {
-                          size_t n = width - characters;
-                          ENSURE_ALLOCATION (xsum (length, n));
-                          DCHAR_SET (result + length, ' ', n);
-                          length += n;
-                        }
-                    }
-                    break;
-
-                  default:
-                    abort ();
-                  }
-              }
-#endif
-#if (!USE_SNPRINTF || !HAVE_SNPRINTF_RETVAL_C99 || (NEED_PRINTF_DIRECTIVE_LS && !defined IN_LIBINTL)) && HAVE_WCHAR_T
-            else if (dp->conversion == 's'
-# if WIDE_CHAR_VERSION
-                     && a.arg[dp->arg_index].type != TYPE_WIDE_STRING
-# else
-                     && a.arg[dp->arg_index].type == TYPE_WIDE_STRING
-# endif
-                    )
-              {
-                /* The normal handling of the 's' directive below requires
-                   allocating a temporary buffer.  The determination of its
-                   length (tmp_length), in the case when a precision is
-                   specified, below requires a conversion between a char[]
-                   string and a wchar_t[] wide string.  It could be done, but
-                   we have no guarantee that the implementation of sprintf will
-                   use the exactly same algorithm.  Without this guarantee, it
-                   is possible to have buffer overrun bugs.  In order to avoid
-                   such bugs, we implement the entire processing of the 's'
-                   directive ourselves.  */
-                int flags = dp->flags;
-                int has_width;
-                size_t width;
-                int has_precision;
-                size_t precision;
-
-                has_width = 0;
-                width = 0;
-                if (dp->width_start != dp->width_end)
-                  {
-                    if (dp->width_arg_index != ARG_NONE)
-                      {
-                        int arg;
-
-                        if (!(a.arg[dp->width_arg_index].type == TYPE_INT))
-                          abort ();
-                        arg = a.arg[dp->width_arg_index].a.a_int;
-                        if (arg < 0)
-                          {
-                            /* "A negative field width is taken as a '-' flag
-                                followed by a positive field width."  */
-                            flags |= FLAG_LEFT;
-                            width = (unsigned int) (-arg);
-                          }
-                        else
-                          width = arg;
-                      }
-                    else
-                      {
-                        const FCHAR_T *digitp = dp->width_start;
-
-                        do
-                          width = xsum (xtimes (width, 10), *digitp++ - '0');
-                        while (digitp != dp->width_end);
-                      }
-                    has_width = 1;
-                  }
-
-                has_precision = 0;
-                precision = 6;
-                if (dp->precision_start != dp->precision_end)
-                  {
-                    if (dp->precision_arg_index != ARG_NONE)
-                      {
-                        int arg;
-
-                        if (!(a.arg[dp->precision_arg_index].type == TYPE_INT))
-                          abort ();
-                        arg = a.arg[dp->precision_arg_index].a.a_int;
-                        /* "A negative precision is taken as if the precision
-                            were omitted."  */
-                        if (arg >= 0)
-                          {
-                            precision = arg;
-                            has_precision = 1;
-                          }
-                      }
-                    else
-                      {
-                        const FCHAR_T *digitp = dp->precision_start + 1;
-
-                        precision = 0;
-                        while (digitp != dp->precision_end)
-                          precision = xsum (xtimes (precision, 10), *digitp++ - '0');
-                        has_precision = 1;
-                      }
-                  }
-
-# if WIDE_CHAR_VERSION
-                /* %s in vasnwprintf.  See the specification of fwprintf.  */
-                {
-                  const char *arg = a.arg[dp->arg_index].a.a_string;
-                  const char *arg_end;
-                  size_t characters;
-
-                  if (has_precision)
-                    {
-                      /* Use only as many bytes as needed to produce PRECISION
-                         wide characters, from the left.  */
-#  if HAVE_MBRTOWC
-                      mbstate_t state;
-                      memset (&state, '\0', sizeof (mbstate_t));
-#  endif
-                      arg_end = arg;
-                      characters = 0;
-                      for (; precision > 0; precision--)
-                        {
-                          int count;
-#  if HAVE_MBRTOWC
-                          count = mbrlen (arg_end, MB_CUR_MAX, &state);
-#  else
-                          count = mblen (arg_end, MB_CUR_MAX);
-#  endif
-                          if (count == 0)
-                            /* Found the terminating NUL.  */
-                            break;
-                          if (count < 0)
-                            {
-                              /* Invalid or incomplete multibyte character.  */
-                              if (!(result == resultbuf || result == NULL))
-                                free (result);
-                              if (buf_malloced != NULL)
-                                free (buf_malloced);
-                              CLEANUP ();
-                              errno = EILSEQ;
-                              return NULL;
-                            }
-                          arg_end += count;
-                          characters++;
-                        }
-                    }
-                  else if (has_width)
-                    {
-                      /* Use the entire string, and count the number of wide
-                         characters.  */
-#  if HAVE_MBRTOWC
-                      mbstate_t state;
-                      memset (&state, '\0', sizeof (mbstate_t));
-#  endif
-                      arg_end = arg;
-                      characters = 0;
-                      for (;;)
-                        {
-                          int count;
-#  if HAVE_MBRTOWC
-                          count = mbrlen (arg_end, MB_CUR_MAX, &state);
-#  else
-                          count = mblen (arg_end, MB_CUR_MAX);
-#  endif
-                          if (count == 0)
-                            /* Found the terminating NUL.  */
-                            break;
-                          if (count < 0)
-                            {
-                              /* Invalid or incomplete multibyte character.  */
-                              if (!(result == resultbuf || result == NULL))
-                                free (result);
-                              if (buf_malloced != NULL)
-                                free (buf_malloced);
-                              CLEANUP ();
-                              errno = EILSEQ;
-                              return NULL;
-                            }
-                          arg_end += count;
-                          characters++;
-                        }
-                    }
-                  else
-                    {
-                      /* Use the entire string.  */
-                      arg_end = arg + strlen (arg);
-                      /* The number of characters doesn't matter.  */
-                      characters = 0;
-                    }
-
-                  if (has_width && width > characters
-                      && !(dp->flags & FLAG_LEFT))
-                    {
-                      size_t n = width - characters;
-                      ENSURE_ALLOCATION (xsum (length, n));
-                      DCHAR_SET (result + length, ' ', n);
-                      length += n;
-                    }
-
-                  if (has_precision || has_width)
-                    {
-                      /* We know the number of wide characters in advance.  */
-                      size_t remaining;
-#  if HAVE_MBRTOWC
-                      mbstate_t state;
-                      memset (&state, '\0', sizeof (mbstate_t));
-#  endif
-                      ENSURE_ALLOCATION (xsum (length, characters));
-                      for (remaining = characters; remaining > 0; remaining--)
-                        {
-                          wchar_t wc;
-                          int count;
-#  if HAVE_MBRTOWC
-                          count = mbrtowc (&wc, arg, arg_end - arg, &state);
-#  else
-                          count = mbtowc (&wc, arg, arg_end - arg);
-#  endif
-                          if (count <= 0)
-                            /* mbrtowc not consistent with mbrlen, or mbtowc
-                               not consistent with mblen.  */
-                            abort ();
-                          result[length++] = wc;
-                          arg += count;
-                        }
-                      if (!(arg == arg_end))
-                        abort ();
-                    }
-                  else
-                    {
-#  if HAVE_MBRTOWC
-                      mbstate_t state;
-                      memset (&state, '\0', sizeof (mbstate_t));
-#  endif
-                      while (arg < arg_end)
-                        {
-                          wchar_t wc;
-                          int count;
-#  if HAVE_MBRTOWC
-                          count = mbrtowc (&wc, arg, arg_end - arg, &state);
-#  else
-                          count = mbtowc (&wc, arg, arg_end - arg);
-#  endif
-                          if (count <= 0)
-                            /* mbrtowc not consistent with mbrlen, or mbtowc
-                               not consistent with mblen.  */
-                            abort ();
-                          ENSURE_ALLOCATION (xsum (length, 1));
-                          result[length++] = wc;
-                          arg += count;
-                        }
-                    }
-
-                  if (has_width && width > characters
-                      && (dp->flags & FLAG_LEFT))
-                    {
-                      size_t n = width - characters;
-                      ENSURE_ALLOCATION (xsum (length, n));
-                      DCHAR_SET (result + length, ' ', n);
-                      length += n;
-                    }
-                }
-# else
-                /* %ls in vasnprintf.  See the specification of fprintf.  */
-                {
-                  const wchar_t *arg = a.arg[dp->arg_index].a.a_wide_string;
-                  const wchar_t *arg_end;
-                  size_t characters;
-#  if !DCHAR_IS_TCHAR
-                  /* This code assumes that TCHAR_T is 'char'.  */
-                  typedef int TCHAR_T_verify[2 * (sizeof (TCHAR_T) == 1) - 1];
-                  TCHAR_T *tmpsrc;
-                  DCHAR_T *tmpdst;
-                  size_t tmpdst_len;
-#  endif
-                  size_t w;
-
-                  if (has_precision)
-                    {
-                      /* Use only as many wide characters as needed to produce
-                         at most PRECISION bytes, from the left.  */
-#  if HAVE_WCRTOMB && !defined GNULIB_defined_mbstate_t
-                      mbstate_t state;
-                      memset (&state, '\0', sizeof (mbstate_t));
-#  endif
-                      arg_end = arg;
-                      characters = 0;
-                      while (precision > 0)
-                        {
-                          char cbuf[64]; /* Assume MB_CUR_MAX <= 64.  */
-                          int count;
-
-                          if (*arg_end == 0)
-                            /* Found the terminating null wide character.  */
-                            break;
-#  if HAVE_WCRTOMB && !defined GNULIB_defined_mbstate_t
-                          count = wcrtomb (cbuf, *arg_end, &state);
-#  else
-                          count = wctomb (cbuf, *arg_end);
-#  endif
-                          if (count < 0)
-                            {
-                              /* Cannot convert.  */
-                              if (!(result == resultbuf || result == NULL))
-                                free (result);
-                              if (buf_malloced != NULL)
-                                free (buf_malloced);
-                              CLEANUP ();
-                              errno = EILSEQ;
-                              return NULL;
-                            }
-                          if (precision < count)
-                            break;
-                          arg_end++;
-                          characters += count;
-                          precision -= count;
-                        }
-                    }
-#  if DCHAR_IS_TCHAR
-                  else if (has_width)
-#  else
-                  else
-#  endif
-                    {
-                      /* Use the entire string, and count the number of
-                         bytes.  */
-#  if HAVE_WCRTOMB && !defined GNULIB_defined_mbstate_t
-                      mbstate_t state;
-                      memset (&state, '\0', sizeof (mbstate_t));
-#  endif
-                      arg_end = arg;
-                      characters = 0;
-                      for (;;)
-                        {
-                          char cbuf[64]; /* Assume MB_CUR_MAX <= 64.  */
-                          int count;
-
-                          if (*arg_end == 0)
-                            /* Found the terminating null wide character.  */
-                            break;
-#  if HAVE_WCRTOMB && !defined GNULIB_defined_mbstate_t
-                          count = wcrtomb (cbuf, *arg_end, &state);
-#  else
-                          count = wctomb (cbuf, *arg_end);
-#  endif
-                          if (count < 0)
-                            {
-                              /* Cannot convert.  */
-                              if (!(result == resultbuf || result == NULL))
-                                free (result);
-                              if (buf_malloced != NULL)
-                                free (buf_malloced);
-                              CLEANUP ();
-                              errno = EILSEQ;
-                              return NULL;
-                            }
-                          arg_end++;
-                          characters += count;
-                        }
-                    }
-#  if DCHAR_IS_TCHAR
-                  else
-                    {
-                      /* Use the entire string.  */
-                      arg_end = arg + local_wcslen (arg);
-                      /* The number of bytes doesn't matter.  */
-                      characters = 0;
-                    }
-#  endif
-
-#  if !DCHAR_IS_TCHAR
-                  /* Convert the string into a piece of temporary memory.  */
-                  tmpsrc = (TCHAR_T *) malloc (characters * sizeof (TCHAR_T));
-                  if (tmpsrc == NULL)
-                    goto out_of_memory;
-                  {
-                    TCHAR_T *tmpptr = tmpsrc;
-                    size_t remaining;
-#   if HAVE_WCRTOMB && !defined GNULIB_defined_mbstate_t
-                    mbstate_t state;
-                    memset (&state, '\0', sizeof (mbstate_t));
-#   endif
-                    for (remaining = characters; remaining > 0; )
-                      {
-                        char cbuf[64]; /* Assume MB_CUR_MAX <= 64.  */
-                        int count;
-
-                        if (*arg == 0)
-                          abort ();
-#   if HAVE_WCRTOMB && !defined GNULIB_defined_mbstate_t
-                        count = wcrtomb (cbuf, *arg, &state);
-#   else
-                        count = wctomb (cbuf, *arg);
-#   endif
-                        if (count <= 0)
-                          /* Inconsistency.  */
-                          abort ();
-                        memcpy (tmpptr, cbuf, count);
-                        tmpptr += count;
-                        arg++;
-                        remaining -= count;
-                      }
-                    if (!(arg == arg_end))
-                      abort ();
-                  }
-
-                  /* Convert from TCHAR_T[] to DCHAR_T[].  */
-                  tmpdst =
-                    DCHAR_CONV_FROM_ENCODING (locale_charset (),
-                                              iconveh_question_mark,
-                                              tmpsrc, characters,
-                                              NULL,
-                                              NULL, &tmpdst_len);
-                  if (tmpdst == NULL)
-                    {
-                      int saved_errno = errno;
-                      free (tmpsrc);
-                      if (!(result == resultbuf || result == NULL))
-                        free (result);
-                      if (buf_malloced != NULL)
-                        free (buf_malloced);
-                      CLEANUP ();
-                      errno = saved_errno;
-                      return NULL;
-                    }
-                  free (tmpsrc);
-#  endif
-
-                  if (has_width)
-                    {
-#  if ENABLE_UNISTDIO
-                      /* Outside POSIX, it's preferrable to compare the width
-                         against the number of _characters_ of the converted
-                         value.  */
-                      w = DCHAR_MBSNLEN (result + length, characters);
-#  else
-                      /* The width is compared against the number of _bytes_
-                         of the converted value, says POSIX.  */
-                      w = characters;
-#  endif
-                    }
-                  else
-                    /* w doesn't matter.  */
-                    w = 0;
-
-                  if (has_width && width > w
-                      && !(dp->flags & FLAG_LEFT))
-                    {
-                      size_t n = width - w;
-                      ENSURE_ALLOCATION (xsum (length, n));
-                      DCHAR_SET (result + length, ' ', n);
-                      length += n;
-                    }
-
-#  if DCHAR_IS_TCHAR
-                  if (has_precision || has_width)
-                    {
-                      /* We know the number of bytes in advance.  */
-                      size_t remaining;
-#   if HAVE_WCRTOMB && !defined GNULIB_defined_mbstate_t
-                      mbstate_t state;
-                      memset (&state, '\0', sizeof (mbstate_t));
-#   endif
-                      ENSURE_ALLOCATION (xsum (length, characters));
-                      for (remaining = characters; remaining > 0; )
-                        {
-                          char cbuf[64]; /* Assume MB_CUR_MAX <= 64.  */
-                          int count;
-
-                          if (*arg == 0)
-                            abort ();
-#   if HAVE_WCRTOMB && !defined GNULIB_defined_mbstate_t
-                          count = wcrtomb (cbuf, *arg, &state);
-#   else
-                          count = wctomb (cbuf, *arg);
-#   endif
-                          if (count <= 0)
-                            /* Inconsistency.  */
-                            abort ();
-                          memcpy (result + length, cbuf, count);
-                          length += count;
-                          arg++;
-                          remaining -= count;
-                        }
-                      if (!(arg == arg_end))
-                        abort ();
-                    }
-                  else
-                    {
-#   if HAVE_WCRTOMB && !defined GNULIB_defined_mbstate_t
-                      mbstate_t state;
-                      memset (&state, '\0', sizeof (mbstate_t));
-#   endif
-                      while (arg < arg_end)
-                        {
-                          char cbuf[64]; /* Assume MB_CUR_MAX <= 64.  */
-                          int count;
-
-                          if (*arg == 0)
-                            abort ();
-#   if HAVE_WCRTOMB && !defined GNULIB_defined_mbstate_t
-                          count = wcrtomb (cbuf, *arg, &state);
-#   else
-                          count = wctomb (cbuf, *arg);
-#   endif
-                          if (count <= 0)
-                            {
-                              /* Cannot convert.  */
-                              if (!(result == resultbuf || result == NULL))
-                                free (result);
-                              if (buf_malloced != NULL)
-                                free (buf_malloced);
-                              CLEANUP ();
-                              errno = EILSEQ;
-                              return NULL;
-                            }
-                          ENSURE_ALLOCATION (xsum (length, count));
-                          memcpy (result + length, cbuf, count);
-                          length += count;
-                          arg++;
-                        }
-                    }
-#  else
-                  ENSURE_ALLOCATION (xsum (length, tmpdst_len));
-                  DCHAR_CPY (result + length, tmpdst, tmpdst_len);
-                  free (tmpdst);
-                  length += tmpdst_len;
-#  endif
-
-                  if (has_width && width > w
-                      && (dp->flags & FLAG_LEFT))
-                    {
-                      size_t n = width - w;
-                      ENSURE_ALLOCATION (xsum (length, n));
-                      DCHAR_SET (result + length, ' ', n);
-                      length += n;
-                    }
-                }
-# endif
-              }
-#endif
-#if (NEED_PRINTF_DIRECTIVE_A || NEED_PRINTF_LONG_DOUBLE || NEED_PRINTF_DOUBLE) && !defined IN_LIBINTL
-            else if ((dp->conversion == 'a' || dp->conversion == 'A')
-# if !(NEED_PRINTF_DIRECTIVE_A || (NEED_PRINTF_LONG_DOUBLE && NEED_PRINTF_DOUBLE))
-                     && (0
-#  if NEED_PRINTF_DOUBLE
-                         || a.arg[dp->arg_index].type == TYPE_DOUBLE
-#  endif
-#  if NEED_PRINTF_LONG_DOUBLE
-                         || a.arg[dp->arg_index].type == TYPE_LONGDOUBLE
-#  endif
-                        )
-# endif
-                    )
-              {
-                arg_type type = a.arg[dp->arg_index].type;
-                int flags = dp->flags;
-                int has_width;
-                size_t width;
-                int has_precision;
-                size_t precision;
-                size_t tmp_length;
-                DCHAR_T tmpbuf[700];
-                DCHAR_T *tmp;
-                DCHAR_T *pad_ptr;
-                DCHAR_T *p;
-
-                has_width = 0;
-                width = 0;
-                if (dp->width_start != dp->width_end)
-                  {
-                    if (dp->width_arg_index != ARG_NONE)
-                      {
-                        int arg;
-
-                        if (!(a.arg[dp->width_arg_index].type == TYPE_INT))
-                          abort ();
-                        arg = a.arg[dp->width_arg_index].a.a_int;
-                        if (arg < 0)
-                          {
-                            /* "A negative field width is taken as a '-' flag
-                                followed by a positive field width."  */
-                            flags |= FLAG_LEFT;
-                            width = (unsigned int) (-arg);
-                          }
-                        else
-                          width = arg;
-                      }
-                    else
-                      {
-                        const FCHAR_T *digitp = dp->width_start;
-
-                        do
-                          width = xsum (xtimes (width, 10), *digitp++ - '0');
-                        while (digitp != dp->width_end);
-                      }
-                    has_width = 1;
-                  }
-
-                has_precision = 0;
-                precision = 0;
-                if (dp->precision_start != dp->precision_end)
-                  {
-                    if (dp->precision_arg_index != ARG_NONE)
-                      {
-                        int arg;
-
-                        if (!(a.arg[dp->precision_arg_index].type == TYPE_INT))
-                          abort ();
-                        arg = a.arg[dp->precision_arg_index].a.a_int;
-                        /* "A negative precision is taken as if the precision
-                            were omitted."  */
-                        if (arg >= 0)
-                          {
-                            precision = arg;
-                            has_precision = 1;
-                          }
-                      }
-                    else
-                      {
-                        const FCHAR_T *digitp = dp->precision_start + 1;
-
-                        precision = 0;
-                        while (digitp != dp->precision_end)
-                          precision = xsum (xtimes (precision, 10), *digitp++ - '0');
-                        has_precision = 1;
-                      }
-                  }
-
-                /* Allocate a temporary buffer of sufficient size.  */
-                if (type == TYPE_LONGDOUBLE)
-                  tmp_length =
-                    (unsigned int) ((LDBL_DIG + 1)
-                                    * 0.831 /* decimal -> hexadecimal */
-                                   )
-                    + 1; /* turn floor into ceil */
-                else
-                  tmp_length =
-                    (unsigned int) ((DBL_DIG + 1)
-                                    * 0.831 /* decimal -> hexadecimal */
-                                   )
-                    + 1; /* turn floor into ceil */
-                if (tmp_length < precision)
-                  tmp_length = precision;
-                /* Account for sign, decimal point etc. */
-                tmp_length = xsum (tmp_length, 12);
-
-                if (tmp_length < width)
-                  tmp_length = width;
-
-                tmp_length = xsum (tmp_length, 1); /* account for trailing NUL */
-
-                if (tmp_length <= sizeof (tmpbuf) / sizeof (DCHAR_T))
-                  tmp = tmpbuf;
-                else
-                  {
-                    size_t tmp_memsize = xtimes (tmp_length, sizeof (DCHAR_T));
-
-                    if (size_overflow_p (tmp_memsize))
-                      /* Overflow, would lead to out of memory.  */
-                      goto out_of_memory;
-                    tmp = (DCHAR_T *) malloc (tmp_memsize);
-                    if (tmp == NULL)
-                      /* Out of memory.  */
-                      goto out_of_memory;
-                  }
-
-                pad_ptr = NULL;
-                p = tmp;
-                if (type == TYPE_LONGDOUBLE)
-                  {
-# if NEED_PRINTF_DIRECTIVE_A || NEED_PRINTF_LONG_DOUBLE
-                    long double arg = a.arg[dp->arg_index].a.a_longdouble;
-
-                    if (isnanl (arg))
-                      {
-                        if (dp->conversion == 'A')
-                          {
-                            *p++ = 'N'; *p++ = 'A'; *p++ = 'N';
-                          }
-                        else
-                          {
-                            *p++ = 'n'; *p++ = 'a'; *p++ = 'n';
-                          }
-                      }
-                    else
-                      {
-                        int sign = 0;
-                        DECL_LONG_DOUBLE_ROUNDING
-
-                        BEGIN_LONG_DOUBLE_ROUNDING ();
-
-                        if (signbit (arg)) /* arg < 0.0L or negative zero */
-                          {
-                            sign = -1;
-                            arg = -arg;
-                          }
-
-                        if (sign < 0)
-                          *p++ = '-';
-                        else if (flags & FLAG_SHOWSIGN)
-                          *p++ = '+';
-                        else if (flags & FLAG_SPACE)
-                          *p++ = ' ';
-
-                        if (arg > 0.0L && arg + arg == arg)
-                          {
-                            if (dp->conversion == 'A')
-                              {
-                                *p++ = 'I'; *p++ = 'N'; *p++ = 'F';
-                              }
-                            else
-                              {
-                                *p++ = 'i'; *p++ = 'n'; *p++ = 'f';
-                              }
-                          }
-                        else
-                          {
-                            int exponent;
-                            long double mantissa;
-
-                            if (arg > 0.0L)
-                              mantissa = printf_frexpl (arg, &exponent);
-                            else
-                              {
-                                exponent = 0;
-                                mantissa = 0.0L;
-                              }
-
-                            if (has_precision
-                                && precision < (unsigned int) ((LDBL_DIG + 1) * 0.831) + 1)
-                              {
-                                /* Round the mantissa.  */
-                                long double tail = mantissa;
-                                size_t q;
-
-                                for (q = precision; ; q--)
-                                  {
-                                    int digit = (int) tail;
-                                    tail -= digit;
-                                    if (q == 0)
-                                      {
-                                        if (digit & 1 ? tail >= 0.5L : tail > 0.5L)
-                                          tail = 1 - tail;
-                                        else
-                                          tail = - tail;
-                                        break;
-                                      }
-                                    tail *= 16.0L;
-                                  }
-                                if (tail != 0.0L)
-                                  for (q = precision; q > 0; q--)
-                                    tail *= 0.0625L;
-                                mantissa += tail;
-                              }
-
-                            *p++ = '0';
-                            *p++ = dp->conversion - 'A' + 'X';
-                            pad_ptr = p;
-                            {
-                              int digit;
-
-                              digit = (int) mantissa;
-                              mantissa -= digit;
-                              *p++ = '0' + digit;
-                              if ((flags & FLAG_ALT)
-                                  || mantissa > 0.0L || precision > 0)
-                                {
-                                  *p++ = decimal_point_char ();
-                                  /* This loop terminates because we assume
-                                     that FLT_RADIX is a power of 2.  */
-                                  while (mantissa > 0.0L)
-                                    {
-                                      mantissa *= 16.0L;
-                                      digit = (int) mantissa;
-                                      mantissa -= digit;
-                                      *p++ = digit
-                                             + (digit < 10
-                                                ? '0'
-                                                : dp->conversion - 10);
-                                      if (precision > 0)
-                                        precision--;
-                                    }
-                                  while (precision > 0)
-                                    {
-                                      *p++ = '0';
-                                      precision--;
-                                    }
-                                }
-                              }
-                              *p++ = dp->conversion - 'A' + 'P';
-#  if WIDE_CHAR_VERSION
-                              {
-                                static const wchar_t decimal_format[] =
-                                  { '%', '+', 'd', '\0' };
-                                SNPRINTF (p, 6 + 1, decimal_format, exponent);
-                              }
-                              while (*p != '\0')
-                                p++;
-#  else
-                              if (sizeof (DCHAR_T) == 1)
-                                {
-                                  sprintf ((char *) p, "%+d", exponent);
-                                  while (*p != '\0')
-                                    p++;
-                                }
-                              else
-                                {
-                                  char expbuf[6 + 1];
-                                  const char *ep;
-                                  sprintf (expbuf, "%+d", exponent);
-                                  for (ep = expbuf; (*p = *ep) != '\0'; ep++)
-                                    p++;
-                                }
-#  endif
-                          }
-
-                        END_LONG_DOUBLE_ROUNDING ();
-                      }
-# else
-                    abort ();
-# endif
-                  }
-                else
-                  {
-# if NEED_PRINTF_DIRECTIVE_A || NEED_PRINTF_DOUBLE
-                    double arg = a.arg[dp->arg_index].a.a_double;
-
-                    if (isnand (arg))
-                      {
-                        if (dp->conversion == 'A')
-                          {
-                            *p++ = 'N'; *p++ = 'A'; *p++ = 'N';
-                          }
-                        else
-                          {
-                            *p++ = 'n'; *p++ = 'a'; *p++ = 'n';
-                          }
-                      }
-                    else
-                      {
-                        int sign = 0;
-
-                        if (signbit (arg)) /* arg < 0.0 or negative zero */
-                          {
-                            sign = -1;
-                            arg = -arg;
-                          }
-
-                        if (sign < 0)
-                          *p++ = '-';
-                        else if (flags & FLAG_SHOWSIGN)
-                          *p++ = '+';
-                        else if (flags & FLAG_SPACE)
-                          *p++ = ' ';
-
-                        if (arg > 0.0 && arg + arg == arg)
-                          {
-                            if (dp->conversion == 'A')
-                              {
-                                *p++ = 'I'; *p++ = 'N'; *p++ = 'F';
-                              }
-                            else
-                              {
-                                *p++ = 'i'; *p++ = 'n'; *p++ = 'f';
-                              }
-                          }
-                        else
-                          {
-                            int exponent;
-                            double mantissa;
-
-                            if (arg > 0.0)
-                              mantissa = printf_frexp (arg, &exponent);
-                            else
-                              {
-                                exponent = 0;
-                                mantissa = 0.0;
-                              }
-
-                            if (has_precision
-                                && precision < (unsigned int) ((DBL_DIG + 1) * 0.831) + 1)
-                              {
-                                /* Round the mantissa.  */
-                                double tail = mantissa;
-                                size_t q;
-
-                                for (q = precision; ; q--)
-                                  {
-                                    int digit = (int) tail;
-                                    tail -= digit;
-                                    if (q == 0)
-                                      {
-                                        if (digit & 1 ? tail >= 0.5 : tail > 0.5)
-                                          tail = 1 - tail;
-                                        else
-                                          tail = - tail;
-                                        break;
-                                      }
-                                    tail *= 16.0;
-                                  }
-                                if (tail != 0.0)
-                                  for (q = precision; q > 0; q--)
-                                    tail *= 0.0625;
-                                mantissa += tail;
-                              }
-
-                            *p++ = '0';
-                            *p++ = dp->conversion - 'A' + 'X';
-                            pad_ptr = p;
-                            {
-                              int digit;
-
-                              digit = (int) mantissa;
-                              mantissa -= digit;
-                              *p++ = '0' + digit;
-                              if ((flags & FLAG_ALT)
-                                  || mantissa > 0.0 || precision > 0)
-                                {
-                                  *p++ = decimal_point_char ();
-                                  /* This loop terminates because we assume
-                                     that FLT_RADIX is a power of 2.  */
-                                  while (mantissa > 0.0)
-                                    {
-                                      mantissa *= 16.0;
-                                      digit = (int) mantissa;
-                                      mantissa -= digit;
-                                      *p++ = digit
-                                             + (digit < 10
-                                                ? '0'
-                                                : dp->conversion - 10);
-                                      if (precision > 0)
-                                        precision--;
-                                    }
-                                  while (precision > 0)
-                                    {
-                                      *p++ = '0';
-                                      precision--;
-                                    }
-                                }
-                              }
-                              *p++ = dp->conversion - 'A' + 'P';
-#  if WIDE_CHAR_VERSION
-                              {
-                                static const wchar_t decimal_format[] =
-                                  { '%', '+', 'd', '\0' };
-                                SNPRINTF (p, 6 + 1, decimal_format, exponent);
-                              }
-                              while (*p != '\0')
-                                p++;
-#  else
-                              if (sizeof (DCHAR_T) == 1)
-                                {
-                                  sprintf ((char *) p, "%+d", exponent);
-                                  while (*p != '\0')
-                                    p++;
-                                }
-                              else
-                                {
-                                  char expbuf[6 + 1];
-                                  const char *ep;
-                                  sprintf (expbuf, "%+d", exponent);
-                                  for (ep = expbuf; (*p = *ep) != '\0'; ep++)
-                                    p++;
-                                }
-#  endif
-                          }
-                      }
-# else
-                    abort ();
-# endif
-                  }
-                /* The generated string now extends from tmp to p, with the
-                   zero padding insertion point being at pad_ptr.  */
-                if (has_width && p - tmp < width)
-                  {
-                    size_t pad = width - (p - tmp);
-                    DCHAR_T *end = p + pad;
-
-                    if (flags & FLAG_LEFT)
-                      {
-                        /* Pad with spaces on the right.  */
-                        for (; pad > 0; pad--)
-                          *p++ = ' ';
-                      }
-                    else if ((flags & FLAG_ZERO) && pad_ptr != NULL)
-                      {
-                        /* Pad with zeroes.  */
-                        DCHAR_T *q = end;
-
-                        while (p > pad_ptr)
-                          *--q = *--p;
-                        for (; pad > 0; pad--)
-                          *p++ = '0';
-                      }
-                    else
-                      {
-                        /* Pad with spaces on the left.  */
-                        DCHAR_T *q = end;
-
-                        while (p > tmp)
-                          *--q = *--p;
-                        for (; pad > 0; pad--)
-                          *p++ = ' ';
-                      }
-
-                    p = end;
-                  }
-
-                {
-                  size_t count = p - tmp;
-
-                  if (count >= tmp_length)
-                    /* tmp_length was incorrectly calculated - fix the
-                       code above!  */
-                    abort ();
-
-                  /* Make room for the result.  */
-                  if (count >= allocated - length)
-                    {
-                      size_t n = xsum (length, count);
-
-                      ENSURE_ALLOCATION (n);
-                    }
-
-                  /* Append the result.  */
-                  memcpy (result + length, tmp, count * sizeof (DCHAR_T));
-                  if (tmp != tmpbuf)
-                    free (tmp);
-                  length += count;
-                }
-              }
-#endif
-#if (NEED_PRINTF_INFINITE_DOUBLE || NEED_PRINTF_DOUBLE || NEED_PRINTF_INFINITE_LONG_DOUBLE || NEED_PRINTF_LONG_DOUBLE) && !defined IN_LIBINTL
-            else if ((dp->conversion == 'f' || dp->conversion == 'F'
-                      || dp->conversion == 'e' || dp->conversion == 'E'
-                      || dp->conversion == 'g' || dp->conversion == 'G'
-                      || dp->conversion == 'a' || dp->conversion == 'A')
-                     && (0
-# if NEED_PRINTF_DOUBLE
-                         || a.arg[dp->arg_index].type == TYPE_DOUBLE
-# elif NEED_PRINTF_INFINITE_DOUBLE
-                         || (a.arg[dp->arg_index].type == TYPE_DOUBLE
-                             /* The systems (mingw) which produce wrong output
-                                for Inf, -Inf, and NaN also do so for -0.0.
-                                Therefore we treat this case here as well.  */
-                             && is_infinite_or_zero (a.arg[dp->arg_index].a.a_double))
-# endif
-# if NEED_PRINTF_LONG_DOUBLE
-                         || a.arg[dp->arg_index].type == TYPE_LONGDOUBLE
-# elif NEED_PRINTF_INFINITE_LONG_DOUBLE
-                         || (a.arg[dp->arg_index].type == TYPE_LONGDOUBLE
-                             /* Some systems produce wrong output for Inf,
-                                -Inf, and NaN.  Some systems in this category
-                                (IRIX 5.3) also do so for -0.0.  Therefore we
-                                treat this case here as well.  */
-                             && is_infinite_or_zerol (a.arg[dp->arg_index].a.a_longdouble))
-# endif
-                        ))
-              {
-# if (NEED_PRINTF_DOUBLE || NEED_PRINTF_INFINITE_DOUBLE) && (NEED_PRINTF_LONG_DOUBLE || NEED_PRINTF_INFINITE_LONG_DOUBLE)
-                arg_type type = a.arg[dp->arg_index].type;
-# endif
-                int flags = dp->flags;
-                int has_width;
-                size_t width;
-                int has_precision;
-                size_t precision;
-                size_t tmp_length;
-                DCHAR_T tmpbuf[700];
-                DCHAR_T *tmp;
-                DCHAR_T *pad_ptr;
-                DCHAR_T *p;
-
-                has_width = 0;
-                width = 0;
-                if (dp->width_start != dp->width_end)
-                  {
-                    if (dp->width_arg_index != ARG_NONE)
-                      {
-                        int arg;
-
-                        if (!(a.arg[dp->width_arg_index].type == TYPE_INT))
-                          abort ();
-                        arg = a.arg[dp->width_arg_index].a.a_int;
-                        if (arg < 0)
-                          {
-                            /* "A negative field width is taken as a '-' flag
-                                followed by a positive field width."  */
-                            flags |= FLAG_LEFT;
-                            width = (unsigned int) (-arg);
-                          }
-                        else
-                          width = arg;
-                      }
-                    else
-                      {
-                        const FCHAR_T *digitp = dp->width_start;
-
-                        do
-                          width = xsum (xtimes (width, 10), *digitp++ - '0');
-                        while (digitp != dp->width_end);
-                      }
-                    has_width = 1;
-                  }
-
-                has_precision = 0;
-                precision = 0;
-                if (dp->precision_start != dp->precision_end)
-                  {
-                    if (dp->precision_arg_index != ARG_NONE)
-                      {
-                        int arg;
-
-                        if (!(a.arg[dp->precision_arg_index].type == TYPE_INT))
-                          abort ();
-                        arg = a.arg[dp->precision_arg_index].a.a_int;
-                        /* "A negative precision is taken as if the precision
-                            were omitted."  */
-                        if (arg >= 0)
-                          {
-                            precision = arg;
-                            has_precision = 1;
-                          }
-                      }
-                    else
-                      {
-                        const FCHAR_T *digitp = dp->precision_start + 1;
-
-                        precision = 0;
-                        while (digitp != dp->precision_end)
-                          precision = xsum (xtimes (precision, 10), *digitp++ - '0');
-                        has_precision = 1;
-                      }
-                  }
-
-                /* POSIX specifies the default precision to be 6 for %f, %F,
-                   %e, %E, but not for %g, %G.  Implementations appear to use
-                   the same default precision also for %g, %G.  But for %a, %A,
-                   the default precision is 0.  */
-                if (!has_precision)
-                  if (!(dp->conversion == 'a' || dp->conversion == 'A'))
-                    precision = 6;
-
-                /* Allocate a temporary buffer of sufficient size.  */
-# if NEED_PRINTF_DOUBLE && NEED_PRINTF_LONG_DOUBLE
-                tmp_length = (type == TYPE_LONGDOUBLE ? LDBL_DIG + 1 : DBL_DIG + 1);
-# elif NEED_PRINTF_INFINITE_DOUBLE && NEED_PRINTF_LONG_DOUBLE
-                tmp_length = (type == TYPE_LONGDOUBLE ? LDBL_DIG + 1 : 0);
-# elif NEED_PRINTF_LONG_DOUBLE
-                tmp_length = LDBL_DIG + 1;
-# elif NEED_PRINTF_DOUBLE
-                tmp_length = DBL_DIG + 1;
-# else
-                tmp_length = 0;
-# endif
-                if (tmp_length < precision)
-                  tmp_length = precision;
-# if NEED_PRINTF_LONG_DOUBLE
-#  if NEED_PRINTF_DOUBLE || NEED_PRINTF_INFINITE_DOUBLE
-                if (type == TYPE_LONGDOUBLE)
-#  endif
-                  if (dp->conversion == 'f' || dp->conversion == 'F')
-                    {
-                      long double arg = a.arg[dp->arg_index].a.a_longdouble;
-                      if (!(isnanl (arg) || arg + arg == arg))
-                        {
-                          /* arg is finite and nonzero.  */
-                          int exponent = floorlog10l (arg < 0 ? -arg : arg);
-                          if (exponent >= 0 && tmp_length < exponent + precision)
-                            tmp_length = exponent + precision;
-                        }
-                    }
-# endif
-# if NEED_PRINTF_DOUBLE
-#  if NEED_PRINTF_LONG_DOUBLE || NEED_PRINTF_INFINITE_LONG_DOUBLE
-                if (type == TYPE_DOUBLE)
-#  endif
-                  if (dp->conversion == 'f' || dp->conversion == 'F')
-                    {
-                      double arg = a.arg[dp->arg_index].a.a_double;
-                      if (!(isnand (arg) || arg + arg == arg))
-                        {
-                          /* arg is finite and nonzero.  */
-                          int exponent = floorlog10 (arg < 0 ? -arg : arg);
-                          if (exponent >= 0 && tmp_length < exponent + precision)
-                            tmp_length = exponent + precision;
-                        }
-                    }
-# endif
-                /* Account for sign, decimal point etc. */
-                tmp_length = xsum (tmp_length, 12);
-
-                if (tmp_length < width)
-                  tmp_length = width;
-
-                tmp_length = xsum (tmp_length, 1); /* account for trailing NUL */
-
-                if (tmp_length <= sizeof (tmpbuf) / sizeof (DCHAR_T))
-                  tmp = tmpbuf;
-                else
-                  {
-                    size_t tmp_memsize = xtimes (tmp_length, sizeof (DCHAR_T));
-
-                    if (size_overflow_p (tmp_memsize))
-                      /* Overflow, would lead to out of memory.  */
-                      goto out_of_memory;
-                    tmp = (DCHAR_T *) malloc (tmp_memsize);
-                    if (tmp == NULL)
-                      /* Out of memory.  */
-                      goto out_of_memory;
-                  }
-
-                pad_ptr = NULL;
-                p = tmp;
-
-# if NEED_PRINTF_LONG_DOUBLE || NEED_PRINTF_INFINITE_LONG_DOUBLE
-#  if NEED_PRINTF_DOUBLE || NEED_PRINTF_INFINITE_DOUBLE
-                if (type == TYPE_LONGDOUBLE)
-#  endif
-                  {
-                    long double arg = a.arg[dp->arg_index].a.a_longdouble;
-
-                    if (isnanl (arg))
-                      {
-                        if (dp->conversion >= 'A' && dp->conversion <= 'Z')
-                          {
-                            *p++ = 'N'; *p++ = 'A'; *p++ = 'N';
-                          }
-                        else
-                          {
-                            *p++ = 'n'; *p++ = 'a'; *p++ = 'n';
-                          }
-                      }
-                    else
-                      {
-                        int sign = 0;
-                        DECL_LONG_DOUBLE_ROUNDING
-
-                        BEGIN_LONG_DOUBLE_ROUNDING ();
-
-                        if (signbit (arg)) /* arg < 0.0L or negative zero */
-                          {
-                            sign = -1;
-                            arg = -arg;
-                          }
-
-                        if (sign < 0)
-                          *p++ = '-';
-                        else if (flags & FLAG_SHOWSIGN)
-                          *p++ = '+';
-                        else if (flags & FLAG_SPACE)
-                          *p++ = ' ';
-
-                        if (arg > 0.0L && arg + arg == arg)
-                          {
-                            if (dp->conversion >= 'A' && dp->conversion <= 'Z')
-                              {
-                                *p++ = 'I'; *p++ = 'N'; *p++ = 'F';
-                              }
-                            else
-                              {
-                                *p++ = 'i'; *p++ = 'n'; *p++ = 'f';
-                              }
-                          }
-                        else
-                          {
-#  if NEED_PRINTF_LONG_DOUBLE
-                            pad_ptr = p;
-
-                            if (dp->conversion == 'f' || dp->conversion == 'F')
-                              {
-                                char *digits;
-                                size_t ndigits;
-
-                                digits =
-                                  scale10_round_decimal_long_double (arg, precision);
-                                if (digits == NULL)
-                                  {
-                                    END_LONG_DOUBLE_ROUNDING ();
-                                    goto out_of_memory;
-                                  }
-                                ndigits = strlen (digits);
-
-                                if (ndigits > precision)
-                                  do
-                                    {
-                                      --ndigits;
-                                      *p++ = digits[ndigits];
-                                    }
-                                  while (ndigits > precision);
-                                else
-                                  *p++ = '0';
-                                /* Here ndigits <= precision.  */
-                                if ((flags & FLAG_ALT) || precision > 0)
-                                  {
-                                    *p++ = decimal_point_char ();
-                                    for (; precision > ndigits; precision--)
-                                      *p++ = '0';
-                                    while (ndigits > 0)
-                                      {
-                                        --ndigits;
-                                        *p++ = digits[ndigits];
-                                      }
-                                  }
-
-                                free (digits);
-                              }
-                            else if (dp->conversion == 'e' || dp->conversion == 'E')
-                              {
-                                int exponent;
-
-                                if (arg == 0.0L)
-                                  {
-                                    exponent = 0;
-                                    *p++ = '0';
-                                    if ((flags & FLAG_ALT) || precision > 0)
-                                      {
-                                        *p++ = decimal_point_char ();
-                                        for (; precision > 0; precision--)
-                                          *p++ = '0';
-                                      }
-                                  }
-                                else
-                                  {
-                                    /* arg > 0.0L.  */
-                                    int adjusted;
-                                    char *digits;
-                                    size_t ndigits;
-
-                                    exponent = floorlog10l (arg);
-                                    adjusted = 0;
-                                    for (;;)
-                                      {
-                                        digits =
-                                          scale10_round_decimal_long_double (arg,
-                                                                             (int)precision - exponent);
-                                        if (digits == NULL)
-                                          {
-                                            END_LONG_DOUBLE_ROUNDING ();
-                                            goto out_of_memory;
-                                          }
-                                        ndigits = strlen (digits);
-
-                                        if (ndigits == precision + 1)
-                                          break;
-                                        if (ndigits < precision
-                                            || ndigits > precision + 2)
-                                          /* The exponent was not guessed
-                                             precisely enough.  */
-                                          abort ();
-                                        if (adjusted)
-                                          /* None of two values of exponent is
-                                             the right one.  Prevent an endless
-                                             loop.  */
-                                          abort ();
-                                        free (digits);
-                                        if (ndigits == precision)
-                                          exponent -= 1;
-                                        else
-                                          exponent += 1;
-                                        adjusted = 1;
-                                      }
-                                    /* Here ndigits = precision+1.  */
-                                    if (is_borderline (digits, precision))
-                                      {
-                                        /* Maybe the exponent guess was too high
-                                           and a smaller exponent can be reached
-                                           by turning a 10...0 into 9...9x.  */
-                                        char *digits2 =
-                                          scale10_round_decimal_long_double (arg,
-                                                                             (int)precision - exponent + 1);
-                                        if (digits2 == NULL)
-                                          {
-                                            free (digits);
-                                            END_LONG_DOUBLE_ROUNDING ();
-                                            goto out_of_memory;
-                                          }
-                                        if (strlen (digits2) == precision + 1)
-                                          {
-                                            free (digits);
-                                            digits = digits2;
-                                            exponent -= 1;
-                                          }
-                                        else
-                                          free (digits2);
-                                      }
-                                    /* Here ndigits = precision+1.  */
-
-                                    *p++ = digits[--ndigits];
-                                    if ((flags & FLAG_ALT) || precision > 0)
-                                      {
-                                        *p++ = decimal_point_char ();
-                                        while (ndigits > 0)
-                                          {
-                                            --ndigits;
-                                            *p++ = digits[ndigits];
-                                          }
-                                      }
-
-                                    free (digits);
-                                  }
-
-                                *p++ = dp->conversion; /* 'e' or 'E' */
-#   if WIDE_CHAR_VERSION
-                                {
-                                  static const wchar_t decimal_format[] =
-                                    { '%', '+', '.', '2', 'd', '\0' };
-                                  SNPRINTF (p, 6 + 1, decimal_format, exponent);
-                                }
-                                while (*p != '\0')
-                                  p++;
-#   else
-                                if (sizeof (DCHAR_T) == 1)
-                                  {
-                                    sprintf ((char *) p, "%+.2d", exponent);
-                                    while (*p != '\0')
-                                      p++;
-                                  }
-                                else
-                                  {
-                                    char expbuf[6 + 1];
-                                    const char *ep;
-                                    sprintf (expbuf, "%+.2d", exponent);
-                                    for (ep = expbuf; (*p = *ep) != '\0'; ep++)
-                                      p++;
-                                  }
-#   endif
-                              }
-                            else if (dp->conversion == 'g' || dp->conversion == 'G')
-                              {
-                                if (precision == 0)
-                                  precision = 1;
-                                /* precision >= 1.  */
-
-                                if (arg == 0.0L)
-                                  /* The exponent is 0, >= -4, < precision.
-                                     Use fixed-point notation.  */
-                                  {
-                                    size_t ndigits = precision;
-                                    /* Number of trailing zeroes that have to be
-                                       dropped.  */
-                                    size_t nzeroes =
-                                      (flags & FLAG_ALT ? 0 : precision - 1);
-
-                                    --ndigits;
-                                    *p++ = '0';
-                                    if ((flags & FLAG_ALT) || ndigits > nzeroes)
-                                      {
-                                        *p++ = decimal_point_char ();
-                                        while (ndigits > nzeroes)
-                                          {
-                                            --ndigits;
-                                            *p++ = '0';
-                                          }
-                                      }
-                                  }
-                                else
-                                  {
-                                    /* arg > 0.0L.  */
-                                    int exponent;
-                                    int adjusted;
-                                    char *digits;
-                                    size_t ndigits;
-                                    size_t nzeroes;
-
-                                    exponent = floorlog10l (arg);
-                                    adjusted = 0;
-                                    for (;;)
-                                      {
-                                        digits =
-                                          scale10_round_decimal_long_double (arg,
-                                                                             (int)(precision - 1) - exponent);
-                                        if (digits == NULL)
-                                          {
-                                            END_LONG_DOUBLE_ROUNDING ();
-                                            goto out_of_memory;
-                                          }
-                                        ndigits = strlen (digits);
-
-                                        if (ndigits == precision)
-                                          break;
-                                        if (ndigits < precision - 1
-                                            || ndigits > precision + 1)
-                                          /* The exponent was not guessed
-                                             precisely enough.  */
-                                          abort ();
-                                        if (adjusted)
-                                          /* None of two values of exponent is
-                                             the right one.  Prevent an endless
-                                             loop.  */
-                                          abort ();
-                                        free (digits);
-                                        if (ndigits < precision)
-                                          exponent -= 1;
-                                        else
-                                          exponent += 1;
-                                        adjusted = 1;
-                                      }
-                                    /* Here ndigits = precision.  */
-                                    if (is_borderline (digits, precision - 1))
-                                      {
-                                        /* Maybe the exponent guess was too high
-                                           and a smaller exponent can be reached
-                                           by turning a 10...0 into 9...9x.  */
-                                        char *digits2 =
-                                          scale10_round_decimal_long_double (arg,
-                                                                             (int)(precision - 1) - exponent + 1);
-                                        if (digits2 == NULL)
-                                          {
-                                            free (digits);
-                                            END_LONG_DOUBLE_ROUNDING ();
-                                            goto out_of_memory;
-                                          }
-                                        if (strlen (digits2) == precision)
-                                          {
-                                            free (digits);
-                                            digits = digits2;
-                                            exponent -= 1;
-                                          }
-                                        else
-                                          free (digits2);
-                                      }
-                                    /* Here ndigits = precision.  */
-
-                                    /* Determine the number of trailing zeroes
-                                       that have to be dropped.  */
-                                    nzeroes = 0;
-                                    if ((flags & FLAG_ALT) == 0)
-                                      while (nzeroes < ndigits
-                                             && digits[nzeroes] == '0')
-                                        nzeroes++;
-
-                                    /* The exponent is now determined.  */
-                                    if (exponent >= -4
-                                        && exponent < (long)precision)
-                                      {
-                                        /* Fixed-point notation:
-                                           max(exponent,0)+1 digits, then the
-                                           decimal point, then the remaining
-                                           digits without trailing zeroes.  */
-                                        if (exponent >= 0)
-                                          {
-                                            size_t count = exponent + 1;
-                                            /* Note: count <= precision = ndigits.  */
-                                            for (; count > 0; count--)
-                                              *p++ = digits[--ndigits];
-                                            if ((flags & FLAG_ALT) || ndigits > nzeroes)
-                                              {
-                                                *p++ = decimal_point_char ();
-                                                while (ndigits > nzeroes)
-                                                  {
-                                                    --ndigits;
-                                                    *p++ = digits[ndigits];
-                                                  }
-                                              }
-                                          }
-                                        else
-                                          {
-                                            size_t count = -exponent - 1;
-                                            *p++ = '0';
-                                            *p++ = decimal_point_char ();
-                                            for (; count > 0; count--)
-                                              *p++ = '0';
-                                            while (ndigits > nzeroes)
-                                              {
-                                                --ndigits;
-                                                *p++ = digits[ndigits];
-                                              }
-                                          }
-                                      }
-                                    else
-                                      {
-                                        /* Exponential notation.  */
-                                        *p++ = digits[--ndigits];
-                                        if ((flags & FLAG_ALT) || ndigits > nzeroes)
-                                          {
-                                            *p++ = decimal_point_char ();
-                                            while (ndigits > nzeroes)
-                                              {
-                                                --ndigits;
-                                                *p++ = digits[ndigits];
-                                              }
-                                          }
-                                        *p++ = dp->conversion - 'G' + 'E'; /* 'e' or 'E' */
-#   if WIDE_CHAR_VERSION
-                                        {
-                                          static const wchar_t decimal_format[] =
-                                            { '%', '+', '.', '2', 'd', '\0' };
-                                          SNPRINTF (p, 6 + 1, decimal_format, exponent);
-                                        }
-                                        while (*p != '\0')
-                                          p++;
-#   else
-                                        if (sizeof (DCHAR_T) == 1)
-                                          {
-                                            sprintf ((char *) p, "%+.2d", exponent);
-                                            while (*p != '\0')
-                                              p++;
-                                          }
-                                        else
-                                          {
-                                            char expbuf[6 + 1];
-                                            const char *ep;
-                                            sprintf (expbuf, "%+.2d", exponent);
-                                            for (ep = expbuf; (*p = *ep) != '\0'; ep++)
-                                              p++;
-                                          }
-#   endif
-                                      }
-
-                                    free (digits);
-                                  }
-                              }
-                            else
-                              abort ();
-#  else
-                            /* arg is finite.  */
-                            if (!(arg == 0.0L))
-                              abort ();
-
-                            pad_ptr = p;
-
-                            if (dp->conversion == 'f' || dp->conversion == 'F')
-                              {
-                                *p++ = '0';
-                                if ((flags & FLAG_ALT) || precision > 0)
-                                  {
-                                    *p++ = decimal_point_char ();
-                                    for (; precision > 0; precision--)
-                                      *p++ = '0';
-                                  }
-                              }
-                            else if (dp->conversion == 'e' || dp->conversion == 'E')
-                              {
-                                *p++ = '0';
-                                if ((flags & FLAG_ALT) || precision > 0)
-                                  {
-                                    *p++ = decimal_point_char ();
-                                    for (; precision > 0; precision--)
-                                      *p++ = '0';
-                                  }
-                                *p++ = dp->conversion; /* 'e' or 'E' */
-                                *p++ = '+';
-                                *p++ = '0';
-                                *p++ = '0';
-                              }
-                            else if (dp->conversion == 'g' || dp->conversion == 'G')
-                              {
-                                *p++ = '0';
-                                if (flags & FLAG_ALT)
-                                  {
-                                    size_t ndigits =
-                                      (precision > 0 ? precision - 1 : 0);
-                                    *p++ = decimal_point_char ();
-                                    for (; ndigits > 0; --ndigits)
-                                      *p++ = '0';
-                                  }
-                              }
-                            else if (dp->conversion == 'a' || dp->conversion == 'A')
-                              {
-                                *p++ = '0';
-                                *p++ = dp->conversion - 'A' + 'X';
-                                pad_ptr = p;
-                                *p++ = '0';
-                                if ((flags & FLAG_ALT) || precision > 0)
-                                  {
-                                    *p++ = decimal_point_char ();
-                                    for (; precision > 0; precision--)
-                                      *p++ = '0';
-                                  }
-                                *p++ = dp->conversion - 'A' + 'P';
-                                *p++ = '+';
-                                *p++ = '0';
-                              }
-                            else
-                              abort ();
-#  endif
-                          }
-
-                        END_LONG_DOUBLE_ROUNDING ();
-                      }
-                  }
-#  if NEED_PRINTF_DOUBLE || NEED_PRINTF_INFINITE_DOUBLE
-                else
-#  endif
-# endif
-# if NEED_PRINTF_DOUBLE || NEED_PRINTF_INFINITE_DOUBLE
-                  {
-                    double arg = a.arg[dp->arg_index].a.a_double;
-
-                    if (isnand (arg))
-                      {
-                        if (dp->conversion >= 'A' && dp->conversion <= 'Z')
-                          {
-                            *p++ = 'N'; *p++ = 'A'; *p++ = 'N';
-                          }
-                        else
-                          {
-                            *p++ = 'n'; *p++ = 'a'; *p++ = 'n';
-                          }
-                      }
-                    else
-                      {
-                        int sign = 0;
-
-                        if (signbit (arg)) /* arg < 0.0 or negative zero */
-                          {
-                            sign = -1;
-                            arg = -arg;
-                          }
-
-                        if (sign < 0)
-                          *p++ = '-';
-                        else if (flags & FLAG_SHOWSIGN)
-                          *p++ = '+';
-                        else if (flags & FLAG_SPACE)
-                          *p++ = ' ';
-
-                        if (arg > 0.0 && arg + arg == arg)
-                          {
-                            if (dp->conversion >= 'A' && dp->conversion <= 'Z')
-                              {
-                                *p++ = 'I'; *p++ = 'N'; *p++ = 'F';
-                              }
-                            else
-                              {
-                                *p++ = 'i'; *p++ = 'n'; *p++ = 'f';
-                              }
-                          }
-                        else
-                          {
-#  if NEED_PRINTF_DOUBLE
-                            pad_ptr = p;
-
-                            if (dp->conversion == 'f' || dp->conversion == 'F')
-                              {
-                                char *digits;
-                                size_t ndigits;
-
-                                digits =
-                                  scale10_round_decimal_double (arg, precision);
-                                if (digits == NULL)
-                                  goto out_of_memory;
-                                ndigits = strlen (digits);
-
-                                if (ndigits > precision)
-                                  do
-                                    {
-                                      --ndigits;
-                                      *p++ = digits[ndigits];
-                                    }
-                                  while (ndigits > precision);
-                                else
-                                  *p++ = '0';
-                                /* Here ndigits <= precision.  */
-                                if ((flags & FLAG_ALT) || precision > 0)
-                                  {
-                                    *p++ = decimal_point_char ();
-                                    for (; precision > ndigits; precision--)
-                                      *p++ = '0';
-                                    while (ndigits > 0)
-                                      {
-                                        --ndigits;
-                                        *p++ = digits[ndigits];
-                                      }
-                                  }
-
-                                free (digits);
-                              }
-                            else if (dp->conversion == 'e' || dp->conversion == 'E')
-                              {
-                                int exponent;
-
-                                if (arg == 0.0)
-                                  {
-                                    exponent = 0;
-                                    *p++ = '0';
-                                    if ((flags & FLAG_ALT) || precision > 0)
-                                      {
-                                        *p++ = decimal_point_char ();
-                                        for (; precision > 0; precision--)
-                                          *p++ = '0';
-                                      }
-                                  }
-                                else
-                                  {
-                                    /* arg > 0.0.  */
-                                    int adjusted;
-                                    char *digits;
-                                    size_t ndigits;
-
-                                    exponent = floorlog10 (arg);
-                                    adjusted = 0;
-                                    for (;;)
-                                      {
-                                        digits =
-                                          scale10_round_decimal_double (arg,
-                                                                        (int)precision - exponent);
-                                        if (digits == NULL)
-                                          goto out_of_memory;
-                                        ndigits = strlen (digits);
-
-                                        if (ndigits == precision + 1)
-                                          break;
-                                        if (ndigits < precision
-                                            || ndigits > precision + 2)
-                                          /* The exponent was not guessed
-                                             precisely enough.  */
-                                          abort ();
-                                        if (adjusted)
-                                          /* None of two values of exponent is
-                                             the right one.  Prevent an endless
-                                             loop.  */
-                                          abort ();
-                                        free (digits);
-                                        if (ndigits == precision)
-                                          exponent -= 1;
-                                        else
-                                          exponent += 1;
-                                        adjusted = 1;
-                                      }
-                                    /* Here ndigits = precision+1.  */
-                                    if (is_borderline (digits, precision))
-                                      {
-                                        /* Maybe the exponent guess was too high
-                                           and a smaller exponent can be reached
-                                           by turning a 10...0 into 9...9x.  */
-                                        char *digits2 =
-                                          scale10_round_decimal_double (arg,
-                                                                        (int)precision - exponent + 1);
-                                        if (digits2 == NULL)
-                                          {
-                                            free (digits);
-                                            goto out_of_memory;
-                                          }
-                                        if (strlen (digits2) == precision + 1)
-                                          {
-                                            free (digits);
-                                            digits = digits2;
-                                            exponent -= 1;
-                                          }
-                                        else
-                                          free (digits2);
-                                      }
-                                    /* Here ndigits = precision+1.  */
-
-                                    *p++ = digits[--ndigits];
-                                    if ((flags & FLAG_ALT) || precision > 0)
-                                      {
-                                        *p++ = decimal_point_char ();
-                                        while (ndigits > 0)
-                                          {
-                                            --ndigits;
-                                            *p++ = digits[ndigits];
-                                          }
-                                      }
-
-                                    free (digits);
-                                  }
-
-                                *p++ = dp->conversion; /* 'e' or 'E' */
-#   if WIDE_CHAR_VERSION
-                                {
-                                  static const wchar_t decimal_format[] =
-                                    /* Produce the same number of exponent digits
-                                       as the native printf implementation.  */
-#    if (defined _WIN32 || defined __WIN32__) && ! defined __CYGWIN__
-                                    { '%', '+', '.', '3', 'd', '\0' };
-#    else
-                                    { '%', '+', '.', '2', 'd', '\0' };
-#    endif
-                                  SNPRINTF (p, 6 + 1, decimal_format, exponent);
-                                }
-                                while (*p != '\0')
-                                  p++;
-#   else
-                                {
-                                  static const char decimal_format[] =
-                                    /* Produce the same number of exponent digits
-                                       as the native printf implementation.  */
-#    if (defined _WIN32 || defined __WIN32__) && ! defined __CYGWIN__
-                                    "%+.3d";
-#    else
-                                    "%+.2d";
-#    endif
-                                  if (sizeof (DCHAR_T) == 1)
-                                    {
-                                      sprintf ((char *) p, decimal_format, exponent);
-                                      while (*p != '\0')
-                                        p++;
-                                    }
-                                  else
-                                    {
-                                      char expbuf[6 + 1];
-                                      const char *ep;
-                                      sprintf (expbuf, decimal_format, exponent);
-                                      for (ep = expbuf; (*p = *ep) != '\0'; ep++)
-                                        p++;
-                                    }
-                                }
-#   endif
-                              }
-                            else if (dp->conversion == 'g' || dp->conversion == 'G')
-                              {
-                                if (precision == 0)
-                                  precision = 1;
-                                /* precision >= 1.  */
-
-                                if (arg == 0.0)
-                                  /* The exponent is 0, >= -4, < precision.
-                                     Use fixed-point notation.  */
-                                  {
-                                    size_t ndigits = precision;
-                                    /* Number of trailing zeroes that have to be
-                                       dropped.  */
-                                    size_t nzeroes =
-                                      (flags & FLAG_ALT ? 0 : precision - 1);
-
-                                    --ndigits;
-                                    *p++ = '0';
-                                    if ((flags & FLAG_ALT) || ndigits > nzeroes)
-                                      {
-                                        *p++ = decimal_point_char ();
-                                        while (ndigits > nzeroes)
-                                          {
-                                            --ndigits;
-                                            *p++ = '0';
-                                          }
-                                      }
-                                  }
-                                else
-                                  {
-                                    /* arg > 0.0.  */
-                                    int exponent;
-                                    int adjusted;
-                                    char *digits;
-                                    size_t ndigits;
-                                    size_t nzeroes;
-
-                                    exponent = floorlog10 (arg);
-                                    adjusted = 0;
-                                    for (;;)
-                                      {
-                                        digits =
-                                          scale10_round_decimal_double (arg,
-                                                                        (int)(precision - 1) - exponent);
-                                        if (digits == NULL)
-                                          goto out_of_memory;
-                                        ndigits = strlen (digits);
-
-                                        if (ndigits == precision)
-                                          break;
-                                        if (ndigits < precision - 1
-                                            || ndigits > precision + 1)
-                                          /* The exponent was not guessed
-                                             precisely enough.  */
-                                          abort ();
-                                        if (adjusted)
-                                          /* None of two values of exponent is
-                                             the right one.  Prevent an endless
-                                             loop.  */
-                                          abort ();
-                                        free (digits);
-                                        if (ndigits < precision)
-                                          exponent -= 1;
-                                        else
-                                          exponent += 1;
-                                        adjusted = 1;
-                                      }
-                                    /* Here ndigits = precision.  */
-                                    if (is_borderline (digits, precision - 1))
-                                      {
-                                        /* Maybe the exponent guess was too high
-                                           and a smaller exponent can be reached
-                                           by turning a 10...0 into 9...9x.  */
-                                        char *digits2 =
-                                          scale10_round_decimal_double (arg,
-                                                                        (int)(precision - 1) - exponent + 1);
-                                        if (digits2 == NULL)
-                                          {
-                                            free (digits);
-                                            goto out_of_memory;
-                                          }
-                                        if (strlen (digits2) == precision)
-                                          {
-                                            free (digits);
-                                            digits = digits2;
-                                            exponent -= 1;
-                                          }
-                                        else
-                                          free (digits2);
-                                      }
-                                    /* Here ndigits = precision.  */
-
-                                    /* Determine the number of trailing zeroes
-                                       that have to be dropped.  */
-                                    nzeroes = 0;
-                                    if ((flags & FLAG_ALT) == 0)
-                                      while (nzeroes < ndigits
-                                             && digits[nzeroes] == '0')
-                                        nzeroes++;
-
-                                    /* The exponent is now determined.  */
-                                    if (exponent >= -4
-                                        && exponent < (long)precision)
-                                      {
-                                        /* Fixed-point notation:
-                                           max(exponent,0)+1 digits, then the
-                                           decimal point, then the remaining
-                                           digits without trailing zeroes.  */
-                                        if (exponent >= 0)
-                                          {
-                                            size_t count = exponent + 1;
-                                            /* Note: count <= precision = ndigits.  */
-                                            for (; count > 0; count--)
-                                              *p++ = digits[--ndigits];
-                                            if ((flags & FLAG_ALT) || ndigits > nzeroes)
-                                              {
-                                                *p++ = decimal_point_char ();
-                                                while (ndigits > nzeroes)
-                                                  {
-                                                    --ndigits;
-                                                    *p++ = digits[ndigits];
-                                                  }
-                                              }
-                                          }
-                                        else
-                                          {
-                                            size_t count = -exponent - 1;
-                                            *p++ = '0';
-                                            *p++ = decimal_point_char ();
-                                            for (; count > 0; count--)
-                                              *p++ = '0';
-                                            while (ndigits > nzeroes)
-                                              {
-                                                --ndigits;
-                                                *p++ = digits[ndigits];
-                                              }
-                                          }
-                                      }
-                                    else
-                                      {
-                                        /* Exponential notation.  */
-                                        *p++ = digits[--ndigits];
-                                        if ((flags & FLAG_ALT) || ndigits > nzeroes)
-                                          {
-                                            *p++ = decimal_point_char ();
-                                            while (ndigits > nzeroes)
-                                              {
-                                                --ndigits;
-                                                *p++ = digits[ndigits];
-                                              }
-                                          }
-                                        *p++ = dp->conversion - 'G' + 'E'; /* 'e' or 'E' */
-#   if WIDE_CHAR_VERSION
-                                        {
-                                          static const wchar_t decimal_format[] =
-                                            /* Produce the same number of exponent digits
-                                               as the native printf implementation.  */
-#    if (defined _WIN32 || defined __WIN32__) && ! defined __CYGWIN__
-                                            { '%', '+', '.', '3', 'd', '\0' };
-#    else
-                                            { '%', '+', '.', '2', 'd', '\0' };
-#    endif
-                                          SNPRINTF (p, 6 + 1, decimal_format, exponent);
-                                        }
-                                        while (*p != '\0')
-                                          p++;
-#   else
-                                        {
-                                          static const char decimal_format[] =
-                                            /* Produce the same number of exponent digits
-                                               as the native printf implementation.  */
-#    if (defined _WIN32 || defined __WIN32__) && ! defined __CYGWIN__
-                                            "%+.3d";
-#    else
-                                            "%+.2d";
-#    endif
-                                          if (sizeof (DCHAR_T) == 1)
-                                            {
-                                              sprintf ((char *) p, decimal_format, exponent);
-                                              while (*p != '\0')
-                                                p++;
-                                            }
-                                          else
-                                            {
-                                              char expbuf[6 + 1];
-                                              const char *ep;
-                                              sprintf (expbuf, decimal_format, exponent);
-                                              for (ep = expbuf; (*p = *ep) != '\0'; ep++)
-                                                p++;
-                                            }
-                                        }
-#   endif
-                                      }
-
-                                    free (digits);
-                                  }
-                              }
-                            else
-                              abort ();
-#  else
-                            /* arg is finite.  */
-                            if (!(arg == 0.0))
-                              abort ();
-
-                            pad_ptr = p;
-
-                            if (dp->conversion == 'f' || dp->conversion == 'F')
-                              {
-                                *p++ = '0';
-                                if ((flags & FLAG_ALT) || precision > 0)
-                                  {
-                                    *p++ = decimal_point_char ();
-                                    for (; precision > 0; precision--)
-                                      *p++ = '0';
-                                  }
-                              }
-                            else if (dp->conversion == 'e' || dp->conversion == 'E')
-                              {
-                                *p++ = '0';
-                                if ((flags & FLAG_ALT) || precision > 0)
-                                  {
-                                    *p++ = decimal_point_char ();
-                                    for (; precision > 0; precision--)
-                                      *p++ = '0';
-                                  }
-                                *p++ = dp->conversion; /* 'e' or 'E' */
-                                *p++ = '+';
-                                /* Produce the same number of exponent digits as
-                                   the native printf implementation.  */
-#   if (defined _WIN32 || defined __WIN32__) && ! defined __CYGWIN__
-                                *p++ = '0';
-#   endif
-                                *p++ = '0';
-                                *p++ = '0';
-                              }
-                            else if (dp->conversion == 'g' || dp->conversion == 'G')
-                              {
-                                *p++ = '0';
-                                if (flags & FLAG_ALT)
-                                  {
-                                    size_t ndigits =
-                                      (precision > 0 ? precision - 1 : 0);
-                                    *p++ = decimal_point_char ();
-                                    for (; ndigits > 0; --ndigits)
-                                      *p++ = '0';
-                                  }
-                              }
-                            else
-                              abort ();
-#  endif
-                          }
-                      }
-                  }
-# endif
-
-                /* The generated string now extends from tmp to p, with the
-                   zero padding insertion point being at pad_ptr.  */
-                if (has_width && p - tmp < width)
-                  {
-                    size_t pad = width - (p - tmp);
-                    DCHAR_T *end = p + pad;
-
-                    if (flags & FLAG_LEFT)
-                      {
-                        /* Pad with spaces on the right.  */
-                        for (; pad > 0; pad--)
-                          *p++ = ' ';
-                      }
-                    else if ((flags & FLAG_ZERO) && pad_ptr != NULL)
-                      {
-                        /* Pad with zeroes.  */
-                        DCHAR_T *q = end;
-
-                        while (p > pad_ptr)
-                          *--q = *--p;
-                        for (; pad > 0; pad--)
-                          *p++ = '0';
-                      }
-                    else
-                      {
-                        /* Pad with spaces on the left.  */
-                        DCHAR_T *q = end;
-
-                        while (p > tmp)
-                          *--q = *--p;
-                        for (; pad > 0; pad--)
-                          *p++ = ' ';
-                      }
-
-                    p = end;
-                  }
-
-                {
-                  size_t count = p - tmp;
-
-                  if (count >= tmp_length)
-                    /* tmp_length was incorrectly calculated - fix the
-                       code above!  */
-                    abort ();
-
-                  /* Make room for the result.  */
-                  if (count >= allocated - length)
-                    {
-                      size_t n = xsum (length, count);
-
-                      ENSURE_ALLOCATION (n);
-                    }
-
-                  /* Append the result.  */
-                  memcpy (result + length, tmp, count * sizeof (DCHAR_T));
-                  if (tmp != tmpbuf)
-                    free (tmp);
-                  length += count;
-                }
-              }
-#endif
-            else
-              {
-                arg_type type = a.arg[dp->arg_index].type;
-                int flags = dp->flags;
-#if !USE_SNPRINTF || !HAVE_SNPRINTF_RETVAL_C99 || !DCHAR_IS_TCHAR || ENABLE_UNISTDIO || NEED_PRINTF_FLAG_LEFTADJUST || NEED_PRINTF_FLAG_ZERO || NEED_PRINTF_UNBOUNDED_PRECISION
-                int has_width;
-                size_t width;
-#endif
-#if !USE_SNPRINTF || !HAVE_SNPRINTF_RETVAL_C99 || NEED_PRINTF_UNBOUNDED_PRECISION
-                int has_precision;
-                size_t precision;
-#endif
-#if NEED_PRINTF_UNBOUNDED_PRECISION
-                int prec_ourselves;
-#else
-#               define prec_ourselves 0
-#endif
-#if NEED_PRINTF_FLAG_LEFTADJUST
-#               define pad_ourselves 1
-#elif !DCHAR_IS_TCHAR || ENABLE_UNISTDIO || NEED_PRINTF_FLAG_ZERO || NEED_PRINTF_UNBOUNDED_PRECISION
-                int pad_ourselves;
-#else
-#               define pad_ourselves 0
-#endif
-                TCHAR_T *fbp;
-                unsigned int prefix_count;
-                int prefixes[2] IF_LINT (= { 0 });
-#if !USE_SNPRINTF
-                size_t tmp_length;
-                TCHAR_T tmpbuf[700];
-                TCHAR_T *tmp;
-#endif
-
-#if !USE_SNPRINTF || !HAVE_SNPRINTF_RETVAL_C99 || !DCHAR_IS_TCHAR || ENABLE_UNISTDIO || NEED_PRINTF_FLAG_LEFTADJUST || NEED_PRINTF_FLAG_ZERO || NEED_PRINTF_UNBOUNDED_PRECISION
-                has_width = 0;
-                width = 0;
-                if (dp->width_start != dp->width_end)
-                  {
-                    if (dp->width_arg_index != ARG_NONE)
-                      {
-                        int arg;
-
-                        if (!(a.arg[dp->width_arg_index].type == TYPE_INT))
-                          abort ();
-                        arg = a.arg[dp->width_arg_index].a.a_int;
-                        if (arg < 0)
-                          {
-                            /* "A negative field width is taken as a '-' flag
-                                followed by a positive field width."  */
-                            flags |= FLAG_LEFT;
-                            width = (unsigned int) (-arg);
-                          }
-                        else
-                          width = arg;
-                      }
-                    else
-                      {
-                        const FCHAR_T *digitp = dp->width_start;
-
-                        do
-                          width = xsum (xtimes (width, 10), *digitp++ - '0');
-                        while (digitp != dp->width_end);
-                      }
-                    has_width = 1;
-                  }
-#endif
-
-#if !USE_SNPRINTF || !HAVE_SNPRINTF_RETVAL_C99 || NEED_PRINTF_UNBOUNDED_PRECISION
-                has_precision = 0;
-                precision = 6;
-                if (dp->precision_start != dp->precision_end)
-                  {
-                    if (dp->precision_arg_index != ARG_NONE)
-                      {
-                        int arg;
-
-                        if (!(a.arg[dp->precision_arg_index].type == TYPE_INT))
-                          abort ();
-                        arg = a.arg[dp->precision_arg_index].a.a_int;
-                        /* "A negative precision is taken as if the precision
-                            were omitted."  */
-                        if (arg >= 0)
-                          {
-                            precision = arg;
-                            has_precision = 1;
-                          }
-                      }
-                    else
-                      {
-                        const FCHAR_T *digitp = dp->precision_start + 1;
-
-                        precision = 0;
-                        while (digitp != dp->precision_end)
-                          precision = xsum (xtimes (precision, 10), *digitp++ - '0');
-                        has_precision = 1;
-                      }
-                  }
-#endif
-
-                /* Decide whether to handle the precision ourselves.  */
-#if NEED_PRINTF_UNBOUNDED_PRECISION
-                switch (dp->conversion)
-                  {
-                  case 'd': case 'i': case 'u':
-                  case 'o':
-                  case 'x': case 'X': case 'p':
-                    prec_ourselves = has_precision && (precision > 0);
-                    break;
-                  default:
-                    prec_ourselves = 0;
-                    break;
-                  }
-#endif
-
-                /* Decide whether to perform the padding ourselves.  */
-#if !NEED_PRINTF_FLAG_LEFTADJUST && (!DCHAR_IS_TCHAR || ENABLE_UNISTDIO || NEED_PRINTF_FLAG_ZERO || NEED_PRINTF_UNBOUNDED_PRECISION)
-                switch (dp->conversion)
-                  {
-# if !DCHAR_IS_TCHAR || ENABLE_UNISTDIO
-                  /* If we need conversion from TCHAR_T[] to DCHAR_T[], we need
-                     to perform the padding after this conversion.  Functions
-                     with unistdio extensions perform the padding based on
-                     character count rather than element count.  */
-                  case 'c': case 's':
-# endif
-# if NEED_PRINTF_FLAG_ZERO
-                  case 'f': case 'F': case 'e': case 'E': case 'g': case 'G':
-                  case 'a': case 'A':
-# endif
-                    pad_ourselves = 1;
-                    break;
-                  default:
-                    pad_ourselves = prec_ourselves;
-                    break;
-                  }
-#endif
-
-#if !USE_SNPRINTF
-                /* Allocate a temporary buffer of sufficient size for calling
-                   sprintf.  */
-                tmp_length =
-                  MAX_ROOM_NEEDED (&a, dp->arg_index, dp->conversion, type,
-                                   flags, width, has_precision, precision,
-                                   pad_ourselves);
-
-                if (tmp_length <= sizeof (tmpbuf) / sizeof (TCHAR_T))
-                  tmp = tmpbuf;
-                else
-                  {
-                    size_t tmp_memsize = xtimes (tmp_length, sizeof (TCHAR_T));
-
-                    if (size_overflow_p (tmp_memsize))
-                      /* Overflow, would lead to out of memory.  */
-                      goto out_of_memory;
-                    tmp = (TCHAR_T *) malloc (tmp_memsize);
-                    if (tmp == NULL)
-                      /* Out of memory.  */
-                      goto out_of_memory;
-                  }
-#endif
-
-                /* Construct the format string for calling snprintf or
-                   sprintf.  */
-                fbp = buf;
-                *fbp++ = '%';
-#if NEED_PRINTF_FLAG_GROUPING
-                /* The underlying implementation doesn't support the ' flag.
-                   Produce no grouping characters in this case; this is
-                   acceptable because the grouping is locale dependent.  */
-#else
-                if (flags & FLAG_GROUP)
-                  *fbp++ = '\'';
-#endif
-                if (flags & FLAG_LEFT)
-                  *fbp++ = '-';
-                if (flags & FLAG_SHOWSIGN)
-                  *fbp++ = '+';
-                if (flags & FLAG_SPACE)
-                  *fbp++ = ' ';
-                if (flags & FLAG_ALT)
-                  *fbp++ = '#';
-                if (!pad_ourselves)
-                  {
-                    if (flags & FLAG_ZERO)
-                      *fbp++ = '0';
-                    if (dp->width_start != dp->width_end)
-                      {
-                        size_t n = dp->width_end - dp->width_start;
-                        /* The width specification is known to consist only
-                           of standard ASCII characters.  */
-                        if (sizeof (FCHAR_T) == sizeof (TCHAR_T))
-                          {
-                            memcpy (fbp, dp->width_start, n * sizeof (TCHAR_T));
-                            fbp += n;
-                          }
-                        else
-                          {
-                            const FCHAR_T *mp = dp->width_start;
-                            do
-                              *fbp++ = (unsigned char) *mp++;
-                            while (--n > 0);
-                          }
-                      }
-                  }
-                if (!prec_ourselves)
-                  {
-                    if (dp->precision_start != dp->precision_end)
-                      {
-                        size_t n = dp->precision_end - dp->precision_start;
-                        /* The precision specification is known to consist only
-                           of standard ASCII characters.  */
-                        if (sizeof (FCHAR_T) == sizeof (TCHAR_T))
-                          {
-                            memcpy (fbp, dp->precision_start, n * sizeof (TCHAR_T));
-                            fbp += n;
-                          }
-                        else
-                          {
-                            const FCHAR_T *mp = dp->precision_start;
-                            do
-                              *fbp++ = (unsigned char) *mp++;
-                            while (--n > 0);
-                          }
-                      }
-                  }
-
-                switch (type)
-                  {
-#if HAVE_LONG_LONG_INT
-                  case TYPE_LONGLONGINT:
-                  case TYPE_ULONGLONGINT:
-# if (defined _WIN32 || defined __WIN32__) && ! defined __CYGWIN__
-                    *fbp++ = 'I';
-                    *fbp++ = '6';
-                    *fbp++ = '4';
-                    break;
-# else
-                    *fbp++ = 'l';
-                    /*FALLTHROUGH*/
-# endif
-#endif
-                  case TYPE_LONGINT:
-                  case TYPE_ULONGINT:
-#if HAVE_WINT_T
-                  case TYPE_WIDE_CHAR:
-#endif
-#if HAVE_WCHAR_T
-                  case TYPE_WIDE_STRING:
-#endif
-                    *fbp++ = 'l';
-                    break;
-                  case TYPE_LONGDOUBLE:
-                    *fbp++ = 'L';
-                    break;
-                  default:
-                    break;
-                  }
-#if NEED_PRINTF_DIRECTIVE_F
-                if (dp->conversion == 'F')
-                  *fbp = 'f';
-                else
-#endif
-                  *fbp = dp->conversion;
-#if USE_SNPRINTF
-# if !(__GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 3) || ((defined _WIN32 || defined __WIN32__) && ! defined __CYGWIN__))
-                fbp[1] = '%';
-                fbp[2] = 'n';
-                fbp[3] = '\0';
-# else
-                /* On glibc2 systems from glibc >= 2.3 - probably also older
-                   ones - we know that snprintf's returns value conforms to
-                   ISO C 99: the gl_SNPRINTF_DIRECTIVE_N test passes.
-                   Therefore we can avoid using %n in this situation.
-                   On glibc2 systems from 2004-10-18 or newer, the use of %n
-                   in format strings in writable memory may crash the program
-                   (if compiled with _FORTIFY_SOURCE=2), so we should avoid it
-                   in this situation.  */
-                /* On native Win32 systems (such as mingw), we can avoid using
-                   %n because:
-                     - Although the gl_SNPRINTF_TRUNCATION_C99 test fails,
-                       snprintf does not write more than the specified number
-                       of bytes. (snprintf (buf, 3, "%d %d", 4567, 89) writes
-                       '4', '5', '6' into buf, not '4', '5', '\0'.)
-                     - Although the gl_SNPRINTF_RETVAL_C99 test fails, snprintf
-                       allows us to recognize the case of an insufficient
-                       buffer size: it returns -1 in this case.
-                   On native Win32 systems (such as mingw) where the OS is
-                   Windows Vista, the use of %n in format strings by default
-                   crashes the program. See
-                     <http://gcc.gnu.org/ml/gcc/2007-06/msg00122.html> and
-                     <http://msdn2.microsoft.com/en-us/library/ms175782(VS.80).aspx>
-                   So we should avoid %n in this situation.  */
-                fbp[1] = '\0';
-# endif
-#else
-                fbp[1] = '\0';
-#endif
-
-                /* Construct the arguments for calling snprintf or sprintf.  */
-                prefix_count = 0;
-                if (!pad_ourselves && dp->width_arg_index != ARG_NONE)
-                  {
-                    if (!(a.arg[dp->width_arg_index].type == TYPE_INT))
-                      abort ();
-                    prefixes[prefix_count++] = a.arg[dp->width_arg_index].a.a_int;
-                  }
-                if (!prec_ourselves && dp->precision_arg_index != ARG_NONE)
-                  {
-                    if (!(a.arg[dp->precision_arg_index].type == TYPE_INT))
-                      abort ();
-                    prefixes[prefix_count++] = a.arg[dp->precision_arg_index].a.a_int;
-                  }
-
-#if USE_SNPRINTF
-                /* The SNPRINTF result is appended after result[0..length].
-                   The latter is an array of DCHAR_T; SNPRINTF appends an
-                   array of TCHAR_T to it.  This is possible because
-                   sizeof (TCHAR_T) divides sizeof (DCHAR_T) and
-                   alignof (TCHAR_T) <= alignof (DCHAR_T).  */
-# define TCHARS_PER_DCHAR (sizeof (DCHAR_T) / sizeof (TCHAR_T))
-                /* Ensure that maxlen below will be >= 2.  Needed on BeOS,
-                   where an snprintf() with maxlen==1 acts like sprintf().  */
-                ENSURE_ALLOCATION (xsum (length,
-                                         (2 + TCHARS_PER_DCHAR - 1)
-                                         / TCHARS_PER_DCHAR));
-                /* Prepare checking whether snprintf returns the count
-                   via %n.  */
-                *(TCHAR_T *) (result + length) = '\0';
-#endif
-
-                for (;;)
-                  {
-                    int count = -1;
-
-#if USE_SNPRINTF
-                    int retcount = 0;
-                    size_t maxlen = allocated - length;
-                    /* SNPRINTF can fail if its second argument is
-                       > INT_MAX.  */
-                    if (maxlen > INT_MAX / TCHARS_PER_DCHAR)
-                      maxlen = INT_MAX / TCHARS_PER_DCHAR;
-                    maxlen = maxlen * TCHARS_PER_DCHAR;
-# define SNPRINTF_BUF(arg) \
-                    switch (prefix_count)                                   \
-                      {                                                     \
-                      case 0:                                               \
-                        retcount = SNPRINTF ((TCHAR_T *) (result + length), \
-                                             maxlen, buf,                   \
-                                             arg, &count);                  \
-                        break;                                              \
-                      case 1:                                               \
-                        retcount = SNPRINTF ((TCHAR_T *) (result + length), \
-                                             maxlen, buf,                   \
-                                             prefixes[0], arg, &count);     \
-                        break;                                              \
-                      case 2:                                               \
-                        retcount = SNPRINTF ((TCHAR_T *) (result + length), \
-                                             maxlen, buf,                   \
-                                             prefixes[0], prefixes[1], arg, \
-                                             &count);                       \
-                        break;                                              \
-                      default:                                              \
-                        abort ();                                           \
-                      }
-#else
-# define SNPRINTF_BUF(arg) \
-                    switch (prefix_count)                                   \
-                      {                                                     \
-                      case 0:                                               \
-                        count = sprintf (tmp, buf, arg);                    \
-                        break;                                              \
-                      case 1:                                               \
-                        count = sprintf (tmp, buf, prefixes[0], arg);       \
-                        break;                                              \
-                      case 2:                                               \
-                        count = sprintf (tmp, buf, prefixes[0], prefixes[1],\
-                                         arg);                              \
-                        break;                                              \
-                      default:                                              \
-                        abort ();                                           \
-                      }
-#endif
-
-                    errno = 0;
-                    switch (type)
-                      {
-                      case TYPE_SCHAR:
-                        {
-                          int arg = a.arg[dp->arg_index].a.a_schar;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-                      case TYPE_UCHAR:
-                        {
-                          unsigned int arg = a.arg[dp->arg_index].a.a_uchar;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-                      case TYPE_SHORT:
-                        {
-                          int arg = a.arg[dp->arg_index].a.a_short;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-                      case TYPE_USHORT:
-                        {
-                          unsigned int arg = a.arg[dp->arg_index].a.a_ushort;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-                      case TYPE_INT:
-                        {
-                          int arg = a.arg[dp->arg_index].a.a_int;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-                      case TYPE_UINT:
-                        {
-                          unsigned int arg = a.arg[dp->arg_index].a.a_uint;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-                      case TYPE_LONGINT:
-                        {
-                          long int arg = a.arg[dp->arg_index].a.a_longint;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-                      case TYPE_ULONGINT:
-                        {
-                          unsigned long int arg = a.arg[dp->arg_index].a.a_ulongint;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-#if HAVE_LONG_LONG_INT
-                      case TYPE_LONGLONGINT:
-                        {
-                          long long int arg = a.arg[dp->arg_index].a.a_longlongint;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-                      case TYPE_ULONGLONGINT:
-                        {
-                          unsigned long long int arg = a.arg[dp->arg_index].a.a_ulonglongint;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-#endif
-                      case TYPE_DOUBLE:
-                        {
-                          double arg = a.arg[dp->arg_index].a.a_double;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-                      case TYPE_LONGDOUBLE:
-                        {
-                          long double arg = a.arg[dp->arg_index].a.a_longdouble;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-                      case TYPE_CHAR:
-                        {
-                          int arg = a.arg[dp->arg_index].a.a_char;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-#if HAVE_WINT_T
-                      case TYPE_WIDE_CHAR:
-                        {
-                          wint_t arg = a.arg[dp->arg_index].a.a_wide_char;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-#endif
-                      case TYPE_STRING:
-                        {
-                          const char *arg = a.arg[dp->arg_index].a.a_string;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-#if HAVE_WCHAR_T
-                      case TYPE_WIDE_STRING:
-                        {
-                          const wchar_t *arg = a.arg[dp->arg_index].a.a_wide_string;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-#endif
-                      case TYPE_POINTER:
-                        {
-                          void *arg = a.arg[dp->arg_index].a.a_pointer;
-                          SNPRINTF_BUF (arg);
-                        }
-                        break;
-                      default:
-                        abort ();
-                      }
-
-#if USE_SNPRINTF
-                    /* Portability: Not all implementations of snprintf()
-                       are ISO C 99 compliant.  Determine the number of
-                       bytes that snprintf() has produced or would have
-                       produced.  */
-                    if (count >= 0)
-                      {
-                        /* Verify that snprintf() has NUL-terminated its
-                           result.  */
-                        if (count < maxlen
-                            && ((TCHAR_T *) (result + length)) [count] != '\0')
-                          abort ();
-                        /* Portability hack.  */
-                        if (retcount > count)
-                          count = retcount;
-                      }
-                    else
-                      {
-                        /* snprintf() doesn't understand the '%n'
-                           directive.  */
-                        if (fbp[1] != '\0')
-                          {
-                            /* Don't use the '%n' directive; instead, look
-                               at the snprintf() return value.  */
-                            fbp[1] = '\0';
-                            continue;
-                          }
-                        else
-                          {
-                            /* Look at the snprintf() return value.  */
-                            if (retcount < 0)
-                              {
-# if !HAVE_SNPRINTF_RETVAL_C99
-                                /* HP-UX 10.20 snprintf() is doubly deficient:
-                                   It doesn't understand the '%n' directive,
-                                   *and* it returns -1 (rather than the length
-                                   that would have been required) when the
-                                   buffer is too small.
-                                   But a failure at this point can also come
-                                   from other reasons than a too small buffer,
-                                   such as an invalid wide string argument to
-                                   the %ls directive, or possibly an invalid
-                                   floating-point argument.  */
-                                size_t tmp_length =
-                                  MAX_ROOM_NEEDED (&a, dp->arg_index,
-                                                   dp->conversion, type, flags,
-                                                   width, has_precision,
-                                                   precision, pad_ourselves);
-
-                                if (maxlen < tmp_length)
-                                  {
-                                    /* Make more room.  But try to do through
-                                       this reallocation only once.  */
-                                    size_t bigger_need =
-                                      xsum (length,
-                                            xsum (tmp_length,
-                                                  TCHARS_PER_DCHAR - 1)
-                                            / TCHARS_PER_DCHAR);
-                                    /* And always grow proportionally.
-                                       (There may be several arguments, each
-                                       needing a little more room than the
-                                       previous one.)  */
-                                    size_t bigger_need2 =
-                                      xsum (xtimes (allocated, 2), 12);
-                                    if (bigger_need < bigger_need2)
-                                      bigger_need = bigger_need2;
-                                    ENSURE_ALLOCATION (bigger_need);
-                                    continue;
-                                  }
-# endif
-                              }
-                            else
-                              count = retcount;
-                          }
-                      }
-#endif
-
-                    /* Attempt to handle failure.  */
-                    if (count < 0)
-                      {
-                        /* SNPRINTF or sprintf failed.  Save and use the errno
-                           that it has set, if any.  */
-                        int saved_errno = errno;
-
-                        if (!(result == resultbuf || result == NULL))
-                          free (result);
-                        if (buf_malloced != NULL)
-                          free (buf_malloced);
-                        CLEANUP ();
-                        errno =
-                          (saved_errno != 0
-                           ? saved_errno
-                           : (dp->conversion == 'c' || dp->conversion == 's'
-                              ? EILSEQ
-                              : EINVAL));
-                        return NULL;
-                      }
-
-#if USE_SNPRINTF
-                    /* Handle overflow of the allocated buffer.
-                       If such an overflow occurs, a C99 compliant snprintf()
-                       returns a count >= maxlen.  However, a non-compliant
-                       snprintf() function returns only count = maxlen - 1.  To
-                       cover both cases, test whether count >= maxlen - 1.  */
-                    if ((unsigned int) count + 1 >= maxlen)
-                      {
-                        /* If maxlen already has attained its allowed maximum,
-                           allocating more memory will not increase maxlen.
-                           Instead of looping, bail out.  */
-                        if (maxlen == INT_MAX / TCHARS_PER_DCHAR)
-                          goto overflow;
-                        else
-                          {
-                            /* Need at least (count + 1) * sizeof (TCHAR_T)
-                               bytes.  (The +1 is for the trailing NUL.)
-                               But ask for (count + 2) * sizeof (TCHAR_T)
-                               bytes, so that in the next round, we likely get
-                                 maxlen > (unsigned int) count + 1
-                               and so we don't get here again.
-                               And allocate proportionally, to avoid looping
-                               eternally if snprintf() reports a too small
-                               count.  */
-                            size_t n =
-                              xmax (xsum (length,
-                                          ((unsigned int) count + 2
-                                           + TCHARS_PER_DCHAR - 1)
-                                          / TCHARS_PER_DCHAR),
-                                    xtimes (allocated, 2));
-
-                            ENSURE_ALLOCATION (n);
-                            continue;
-                          }
-                      }
-#endif
-
-#if NEED_PRINTF_UNBOUNDED_PRECISION
-                    if (prec_ourselves)
-                      {
-                        /* Handle the precision.  */
-                        TCHAR_T *prec_ptr =
-# if USE_SNPRINTF
-                          (TCHAR_T *) (result + length);
-# else
-                          tmp;
-# endif
-                        size_t prefix_count;
-                        size_t move;
-
-                        prefix_count = 0;
-                        /* Put the additional zeroes after the sign.  */
-                        if (count >= 1
-                            && (*prec_ptr == '-' || *prec_ptr == '+'
-                                || *prec_ptr == ' '))
-                          prefix_count = 1;
-                        /* Put the additional zeroes after the 0x prefix if
-                           (flags & FLAG_ALT) || (dp->conversion == 'p').  */
-                        else if (count >= 2
-                                 && prec_ptr[0] == '0'
-                                 && (prec_ptr[1] == 'x' || prec_ptr[1] == 'X'))
-                          prefix_count = 2;
-
-                        move = count - prefix_count;
-                        if (precision > move)
-                          {
-                            /* Insert zeroes.  */
-                            size_t insert = precision - move;
-                            TCHAR_T *prec_end;
-
-# if USE_SNPRINTF
-                            size_t n =
-                              xsum (length,
-                                    (count + insert + TCHARS_PER_DCHAR - 1)
-                                    / TCHARS_PER_DCHAR);
-                            length += (count + TCHARS_PER_DCHAR - 1) / TCHARS_PER_DCHAR;
-                            ENSURE_ALLOCATION (n);
-                            length -= (count + TCHARS_PER_DCHAR - 1) / TCHARS_PER_DCHAR;
-                            prec_ptr = (TCHAR_T *) (result + length);
-# endif
-
-                            prec_end = prec_ptr + count;
-                            prec_ptr += prefix_count;
-
-                            while (prec_end > prec_ptr)
-                              {
-                                prec_end--;
-                                prec_end[insert] = prec_end[0];
-                              }
-
-                            prec_end += insert;
-                            do
-                              *--prec_end = '0';
-                            while (prec_end > prec_ptr);
-
-                            count += insert;
-                          }
-                      }
-#endif
-
-#if !USE_SNPRINTF
-                    if (count >= tmp_length)
-                      /* tmp_length was incorrectly calculated - fix the
-                         code above!  */
-                      abort ();
-#endif
-
-#if !DCHAR_IS_TCHAR
-                    /* Convert from TCHAR_T[] to DCHAR_T[].  */
-                    if (dp->conversion == 'c' || dp->conversion == 's')
-                      {
-                        /* type = TYPE_CHAR or TYPE_WIDE_CHAR or TYPE_STRING
-                           TYPE_WIDE_STRING.
-                           The result string is not certainly ASCII.  */
-                        const TCHAR_T *tmpsrc;
-                        DCHAR_T *tmpdst;
-                        size_t tmpdst_len;
-                        /* This code assumes that TCHAR_T is 'char'.  */
-                        typedef int TCHAR_T_verify
-                                    [2 * (sizeof (TCHAR_T) == 1) - 1];
-# if USE_SNPRINTF
-                        tmpsrc = (TCHAR_T *) (result + length);
-# else
-                        tmpsrc = tmp;
-# endif
-                        tmpdst =
-                          DCHAR_CONV_FROM_ENCODING (locale_charset (),
-                                                    iconveh_question_mark,
-                                                    tmpsrc, count,
-                                                    NULL,
-                                                    NULL, &tmpdst_len);
-                        if (tmpdst == NULL)
-                          {
-                            int saved_errno = errno;
-                            if (!(result == resultbuf || result == NULL))
-                              free (result);
-                            if (buf_malloced != NULL)
-                              free (buf_malloced);
-                            CLEANUP ();
-                            errno = saved_errno;
-                            return NULL;
-                          }
-                        ENSURE_ALLOCATION (xsum (length, tmpdst_len));
-                        DCHAR_CPY (result + length, tmpdst, tmpdst_len);
-                        free (tmpdst);
-                        count = tmpdst_len;
-                      }
-                    else
-                      {
-                        /* The result string is ASCII.
-                           Simple 1:1 conversion.  */
-# if USE_SNPRINTF
-                        /* If sizeof (DCHAR_T) == sizeof (TCHAR_T), it's a
-                           no-op conversion, in-place on the array starting
-                           at (result + length).  */
-                        if (sizeof (DCHAR_T) != sizeof (TCHAR_T))
-# endif
-                          {
-                            const TCHAR_T *tmpsrc;
-                            DCHAR_T *tmpdst;
-                            size_t n;
-
-# if USE_SNPRINTF
-                            if (result == resultbuf)
-                              {
-                                tmpsrc = (TCHAR_T *) (result + length);
-                                /* ENSURE_ALLOCATION will not move tmpsrc
-                                   (because it's part of resultbuf).  */
-                                ENSURE_ALLOCATION (xsum (length, count));
-                              }
-                            else
-                              {
-                                /* ENSURE_ALLOCATION will move the array
-                                   (because it uses realloc().  */
-                                ENSURE_ALLOCATION (xsum (length, count));
-                                tmpsrc = (TCHAR_T *) (result + length);
-                              }
-# else
-                            tmpsrc = tmp;
-                            ENSURE_ALLOCATION (xsum (length, count));
-# endif
-                            tmpdst = result + length;
-                            /* Copy backwards, because of overlapping.  */
-                            tmpsrc += count;
-                            tmpdst += count;
-                            for (n = count; n > 0; n--)
-                              *--tmpdst = (unsigned char) *--tmpsrc;
-                          }
-                      }
-#endif
-
-#if DCHAR_IS_TCHAR && !USE_SNPRINTF
-                    /* Make room for the result.  */
-                    if (count > allocated - length)
-                      {
-                        /* Need at least count elements.  But allocate
-                           proportionally.  */
-                        size_t n =
-                          xmax (xsum (length, count), xtimes (allocated, 2));
-
-                        ENSURE_ALLOCATION (n);
-                      }
-#endif
-
-                    /* Here count <= allocated - length.  */
-
-                    /* Perform padding.  */
-#if !DCHAR_IS_TCHAR || ENABLE_UNISTDIO || NEED_PRINTF_FLAG_LEFTADJUST || NEED_PRINTF_FLAG_ZERO || NEED_PRINTF_UNBOUNDED_PRECISION
-                    if (pad_ourselves && has_width)
-                      {
-                        size_t w;
-# if ENABLE_UNISTDIO
-                        /* Outside POSIX, it's preferrable to compare the width
-                           against the number of _characters_ of the converted
-                           value.  */
-                        w = DCHAR_MBSNLEN (result + length, count);
-# else
-                        /* The width is compared against the number of _bytes_
-                           of the converted value, says POSIX.  */
-                        w = count;
-# endif
-                        if (w < width)
-                          {
-                            size_t pad = width - w;
-
-                            /* Make room for the result.  */
-                            if (xsum (count, pad) > allocated - length)
-                              {
-                                /* Need at least count + pad elements.  But
-                                   allocate proportionally.  */
-                                size_t n =
-                                  xmax (xsum3 (length, count, pad),
-                                        xtimes (allocated, 2));
-
-# if USE_SNPRINTF
-                                length += count;
-                                ENSURE_ALLOCATION (n);
-                                length -= count;
-# else
-                                ENSURE_ALLOCATION (n);
-# endif
-                              }
-                            /* Here count + pad <= allocated - length.  */
-
-                            {
-# if !DCHAR_IS_TCHAR || USE_SNPRINTF
-                              DCHAR_T * const rp = result + length;
-# else
-                              DCHAR_T * const rp = tmp;
-# endif
-                              DCHAR_T *p = rp + count;
-                              DCHAR_T *end = p + pad;
-                              DCHAR_T *pad_ptr;
-# if !DCHAR_IS_TCHAR || ENABLE_UNISTDIO
-                              if (dp->conversion == 'c'
-                                  || dp->conversion == 's')
-                                /* No zero-padding for string directives.  */
-                                pad_ptr = NULL;
-                              else
-# endif
-                                {
-                                  pad_ptr = (*rp == '-' ? rp + 1 : rp);
-                                  /* No zero-padding of "inf" and "nan".  */
-                                  if ((*pad_ptr >= 'A' && *pad_ptr <= 'Z')
-                                      || (*pad_ptr >= 'a' && *pad_ptr <= 'z'))
-                                    pad_ptr = NULL;
-                                }
-                              /* The generated string now extends from rp to p,
-                                 with the zero padding insertion point being at
-                                 pad_ptr.  */
-
-                              count = count + pad; /* = end - rp */
-
-                              if (flags & FLAG_LEFT)
-                                {
-                                  /* Pad with spaces on the right.  */
-                                  for (; pad > 0; pad--)
-                                    *p++ = ' ';
-                                }
-                              else if ((flags & FLAG_ZERO) && pad_ptr != NULL)
-                                {
-                                  /* Pad with zeroes.  */
-                                  DCHAR_T *q = end;
-
-                                  while (p > pad_ptr)
-                                    *--q = *--p;
-                                  for (; pad > 0; pad--)
-                                    *p++ = '0';
-                                }
-                              else
-                                {
-                                  /* Pad with spaces on the left.  */
-                                  DCHAR_T *q = end;
-
-                                  while (p > rp)
-                                    *--q = *--p;
-                                  for (; pad > 0; pad--)
-                                    *p++ = ' ';
-                                }
-                            }
-                          }
-                      }
-#endif
-
-                    /* Here still count <= allocated - length.  */
-
-#if !DCHAR_IS_TCHAR || USE_SNPRINTF
-                    /* The snprintf() result did fit.  */
-#else
-                    /* Append the sprintf() result.  */
-                    memcpy (result + length, tmp, count * sizeof (DCHAR_T));
-#endif
-#if !USE_SNPRINTF
-                    if (tmp != tmpbuf)
-                      free (tmp);
-#endif
-
-#if NEED_PRINTF_DIRECTIVE_F
-                    if (dp->conversion == 'F')
-                      {
-                        /* Convert the %f result to upper case for %F.  */
-                        DCHAR_T *rp = result + length;
-                        size_t rc;
-                        for (rc = count; rc > 0; rc--, rp++)
-                          if (*rp >= 'a' && *rp <= 'z')
-                            *rp = *rp - 'a' + 'A';
-                      }
-#endif
-
-                    length += count;
-                    break;
-                  }
-#undef pad_ourselves
-#undef prec_ourselves
-              }
-          }
-      }
-
-    /* Add the final NUL.  */
-    ENSURE_ALLOCATION (xsum (length, 1));
-    result[length] = '\0';
-
-    if (result != resultbuf && length + 1 < allocated)
-      {
-        /* Shrink the allocated memory if possible.  */
-        DCHAR_T *memory;
-
-        memory = (DCHAR_T *) realloc (result, (length + 1) * sizeof (DCHAR_T));
-        if (memory != NULL)
-          result = memory;
-      }
-
-    if (buf_malloced != NULL)
-      free (buf_malloced);
-    CLEANUP ();
-    *lengthp = length;
-    /* Note that we can produce a big string of a length > INT_MAX.  POSIX
-       says that snprintf() fails with errno = EOVERFLOW in this case, but
-       that's only because snprintf() returns an 'int'.  This function does
-       not have this limitation.  */
-    return result;
-
-#if USE_SNPRINTF
-  overflow:
-    if (!(result == resultbuf || result == NULL))
-      free (result);
-    if (buf_malloced != NULL)
-      free (buf_malloced);
-    CLEANUP ();
-    errno = EOVERFLOW;
-    return NULL;
-#endif
-
-  out_of_memory:
-    if (!(result == resultbuf || result == NULL))
-      free (result);
-    if (buf_malloced != NULL)
-      free (buf_malloced);
-  out_of_memory_1:
-    CLEANUP ();
-    errno = ENOMEM;
-    return NULL;
-  }
-}
-
-#undef MAX_ROOM_NEEDED
-#undef TCHARS_PER_DCHAR
-#undef SNPRINTF
-#undef USE_SNPRINTF
-#undef DCHAR_SET
-#undef DCHAR_CPY
-#undef PRINTF_PARSE
-#undef DIRECTIVES
-#undef DIRECTIVE
-#undef DCHAR_IS_TCHAR
-#undef TCHAR_T
-#undef DCHAR_T
-#undef FCHAR_T
-#undef VASNPRINTF
diff -urpN mc-4.8.23/intl/vasnprintf.h mc-4.8.24/intl/vasnprintf.h
--- mc-4.8.23/intl/vasnprintf.h	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/vasnprintf.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,78 +0,0 @@
-/* vsprintf with automatic memory allocation.
-   Copyright (C) 2002-2004 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _VASNPRINTF_H
-#define _VASNPRINTF_H
-
-/* Get va_list.  */
-#include <stdarg.h>
-
-/* Get size_t.  */
-#include <stddef.h>
-
-#ifndef __attribute__
-/* This feature is available in gcc versions 2.5 and later.  */
-# if __GNUC__ < 2 || (__GNUC__ == 2 && __GNUC_MINOR__ < 5) || __STRICT_ANSI__
-#  define __attribute__(Spec) /* empty */
-# endif
-/* The __-protected variants of `format' and `printf' attributes
-   are accepted by gcc versions 2.6.4 (effectively 2.7) and later.  */
-# if __GNUC__ < 2 || (__GNUC__ == 2 && __GNUC_MINOR__ < 7)
-#  define __format__ format
-#  define __printf__ printf
-# endif
-#endif
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-
-/* Write formatted output to a string dynamically allocated with malloc().
-   You can pass a preallocated buffer for the result in RESULTBUF and its
-   size in *LENGTHP; otherwise you pass RESULTBUF = NULL.
-   If successful, return the address of the string (this may be = RESULTBUF
-   if no dynamic memory allocation was necessary) and set *LENGTHP to the
-   number of resulting bytes, excluding the trailing NUL.  Upon error, set
-   errno and return NULL.
-
-   When dynamic memory allocation occurs, the preallocated buffer is left
-   alone (with possibly modified contents).  This makes it possible to use
-   a statically allocated or stack-allocated buffer, like this:
-
-          char buf[100];
-          size_t len = sizeof (buf);
-          char *output = vasnprintf (buf, &len, format, args);
-          if (output == NULL)
-            ... error handling ...;
-          else
-            {
-              ... use the output string ...;
-              if (output != buf)
-                free (output);
-            }
-  */
-extern char * asnprintf (char *resultbuf, size_t *lengthp, const char *format, ...)
-       __attribute__ ((__format__ (__printf__, 3, 4)));
-extern char * vasnprintf (char *resultbuf, size_t *lengthp, const char *format, va_list args)
-       __attribute__ ((__format__ (__printf__, 3, 0)));
-
-#ifdef __cplusplus
-}
-#endif
-
-#endif /* _VASNPRINTF_H */
diff -urpN mc-4.8.23/intl/vasnwprintf.h mc-4.8.24/intl/vasnwprintf.h
--- mc-4.8.23/intl/vasnwprintf.h	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/vasnwprintf.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,46 +0,0 @@
-/* vswprintf with automatic memory allocation.
-   Copyright (C) 2002-2003 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _VASNWPRINTF_H
-#define _VASNWPRINTF_H
-
-/* Get va_list.  */
-#include <stdarg.h>
-
-/* Get wchar_t, size_t.  */
-#include <stddef.h>
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-
-/* Write formatted output to a string dynamically allocated with malloc().
-   You can pass a preallocated buffer for the result in RESULTBUF and its
-   size in *LENGTHP; otherwise you pass RESULTBUF = NULL.
-   If successful, return the address of the string (this may be = RESULTBUF
-   if no dynamic memory allocation was necessary) and set *LENGTHP to the
-   number of resulting bytes, excluding the trailing NUL.  Upon error, set
-   errno and return NULL.  */
-extern wchar_t * asnwprintf (wchar_t *resultbuf, size_t *lengthp, const wchar_t *format, ...);
-extern wchar_t * vasnwprintf (wchar_t *resultbuf, size_t *lengthp, const wchar_t *format, va_list args);
-
-#ifdef __cplusplus
-}
-#endif
-
-#endif /* _VASNWPRINTF_H */
diff -urpN mc-4.8.23/intl/version.c mc-4.8.24/intl/version.c
--- mc-4.8.23/intl/version.c	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/version.c	1970-01-01 04:00:00.000000000 +0400
@@ -1,26 +0,0 @@
-/* libintl library version.
-   Copyright (C) 2005 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include "libgnuintl.h"
-
-/* Version number: (major<<16) + (minor<<8) + subminor */
-int libintl_version = LIBINTL_VERSION;
diff -urpN mc-4.8.23/intl/wprintf-parse.h mc-4.8.24/intl/wprintf-parse.h
--- mc-4.8.23/intl/wprintf-parse.h	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/wprintf-parse.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,75 +0,0 @@
-/* Parse printf format string.
-   Copyright (C) 1999, 2002-2003 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _WPRINTF_PARSE_H
-#define _WPRINTF_PARSE_H
-
-#include "printf-args.h"
-
-
-/* Flags */
-#define FLAG_GROUP       1      /* ' flag */
-#define FLAG_LEFT        2      /* - flag */
-#define FLAG_SHOWSIGN    4      /* + flag */
-#define FLAG_SPACE       8      /* space flag */
-#define FLAG_ALT        16      /* # flag */
-#define FLAG_ZERO       32
-
-/* arg_index value indicating that no argument is consumed.  */
-#define ARG_NONE        (~(size_t)0)
-
-/* A parsed directive.  */
-typedef struct
-{
-  const wchar_t* dir_start;
-  const wchar_t* dir_end;
-  int flags;
-  const wchar_t* width_start;
-  const wchar_t* width_end;
-  size_t width_arg_index;
-  const wchar_t* precision_start;
-  const wchar_t* precision_end;
-  size_t precision_arg_index;
-  wchar_t conversion; /* d i o u x X f e E g G c s p n U % but not C S */
-  size_t arg_index;
-}
-wchar_t_directive;
-
-/* A parsed format string.  */
-typedef struct
-{
-  size_t count;
-  wchar_t_directive *dir;
-  size_t max_width_length;
-  size_t max_precision_length;
-}
-wchar_t_directives;
-
-
-/* Parses the format string.  Fills in the number N of directives, and fills
-   in directives[0], ..., directives[N-1], and sets directives[N].dir_start
-   to the end of the format string.  Also fills in the arg_type fields of the
-   arguments and the needed count of arguments.  */
-#ifdef STATIC
-STATIC
-#else
-extern
-#endif
-int wprintf_parse (const wchar_t *format, wchar_t_directives *d, arguments *a);
-
-#endif /* _WPRINTF_PARSE_H */
diff -urpN mc-4.8.23/intl/xsize.h mc-4.8.24/intl/xsize.h
--- mc-4.8.23/intl/xsize.h	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/intl/xsize.h	1970-01-01 04:00:00.000000000 +0400
@@ -1,109 +0,0 @@
-/* xsize.h -- Checked size_t computations.
-
-   Copyright (C) 2003, 2008 Free Software Foundation, Inc.
-
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU Library General Public License as published
-   by the Free Software Foundation; either version 2, or (at your option)
-   any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public
-   License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
-
-#ifndef _XSIZE_H
-#define _XSIZE_H
-
-/* Get size_t.  */
-#include <stddef.h>
-
-/* Get SIZE_MAX.  */
-#include <limits.h>
-#if HAVE_STDINT_H
-# include <stdint.h>
-#endif
-
-/* The size of memory objects is often computed through expressions of
-   type size_t. Example:
-      void* p = malloc (header_size + n * element_size).
-   These computations can lead to overflow.  When this happens, malloc()
-   returns a piece of memory that is way too small, and the program then
-   crashes while attempting to fill the memory.
-   To avoid this, the functions and macros in this file check for overflow.
-   The convention is that SIZE_MAX represents overflow.
-   malloc (SIZE_MAX) is not guaranteed to fail -- think of a malloc
-   implementation that uses mmap --, it's recommended to use size_overflow_p()
-   or size_in_bounds_p() before invoking malloc().
-   The example thus becomes:
-      size_t size = xsum (header_size, xtimes (n, element_size));
-      void *p = (size_in_bounds_p (size) ? malloc (size) : NULL);
-*/
-
-/* Convert an arbitrary value >= 0 to type size_t.  */
-#define xcast_size_t(N) \
-  ((N) <= SIZE_MAX ? (size_t) (N) : SIZE_MAX)
-
-/* Sum of two sizes, with overflow check.  */
-static inline size_t
-#if __GNUC__ >= 3
-__attribute__ ((__pure__))
-#endif
-xsum (size_t size1, size_t size2)
-{
-  size_t sum = size1 + size2;
-  return (sum >= size1 ? sum : SIZE_MAX);
-}
-
-/* Sum of three sizes, with overflow check.  */
-static inline size_t
-#if __GNUC__ >= 3
-__attribute__ ((__pure__))
-#endif
-xsum3 (size_t size1, size_t size2, size_t size3)
-{
-  return xsum (xsum (size1, size2), size3);
-}
-
-/* Sum of four sizes, with overflow check.  */
-static inline size_t
-#if __GNUC__ >= 3
-__attribute__ ((__pure__))
-#endif
-xsum4 (size_t size1, size_t size2, size_t size3, size_t size4)
-{
-  return xsum (xsum (xsum (size1, size2), size3), size4);
-}
-
-/* Maximum of two sizes, with overflow check.  */
-static inline size_t
-#if __GNUC__ >= 3
-__attribute__ ((__pure__))
-#endif
-xmax (size_t size1, size_t size2)
-{
-  /* No explicit check is needed here, because for any n:
-     max (SIZE_MAX, n) == SIZE_MAX and max (n, SIZE_MAX) == SIZE_MAX.  */
-  return (size1 >= size2 ? size1 : size2);
-}
-
-/* Multiplication of a count with an element size, with overflow check.
-   The count must be >= 0 and the element size must be > 0.
-   This is a macro, not an inline function, so that it works correctly even
-   when N is of a wider type and N > SIZE_MAX.  */
-#define xtimes(N, ELSIZE) \
-  ((N) <= SIZE_MAX / (ELSIZE) ? (size_t) (N) * (ELSIZE) : SIZE_MAX)
-
-/* Check for overflow.  */
-#define size_overflow_p(SIZE) \
-  ((SIZE) == SIZE_MAX)
-/* Check against overflow.  */
-#define size_in_bounds_p(SIZE) \
-  ((SIZE) != SIZE_MAX)
-
-#endif /* _XSIZE_H */
diff -urpN mc-4.8.23/lib/Makefile.am mc-4.8.24/lib/Makefile.am
--- mc-4.8.23/lib/Makefile.am	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/Makefile.am	2020-01-01 19:52:34.000000000 +0400
@@ -74,4 +74,4 @@ else
     libmc_la_LIBADD += $(GLIB_LIBS)
 endif
 
-libmc_la_LIBADD += $(PCRE_LIBS) $(LIBICONV) $(LIBINTL)
+libmc_la_LIBADD += $(PCRE_LIBS)
diff -urpN mc-4.8.23/lib/Makefile.in mc-4.8.24/lib/Makefile.in
--- mc-4.8.23/lib/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/lib/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -94,24 +94,14 @@ host_triplet = @host@
 @HAVE_GMODULE_FALSE@am__append_4 = $(GLIB_LIBS)
 subdir = lib
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -196,8 +186,7 @@ libmc_la_DEPENDENCIES = event/libmcevent
 	search/libsearch.la strutil/libmcstrutil.la skin/libmcskin.la \
 	tty/libmctty.la vfs/libmcvfs.la widget/libmcwidget.la \
 	$(am__DEPENDENCIES_1) $(am__DEPENDENCIES_2) \
-	$(am__DEPENDENCIES_3) $(am__DEPENDENCIES_1) \
-	$(am__DEPENDENCIES_1) $(am__DEPENDENCIES_1)
+	$(am__DEPENDENCIES_3) $(am__DEPENDENCIES_1)
 am__libmc_la_SOURCES_DIST = event.h event-types.h filehighlight.h \
 	mcconfig.h search.h skin.h strescape.h strutil.h widget.h \
 	utilunix.c utilunix.h unixcompat.h util.c util.h fileloc.h \
@@ -331,7 +320,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -339,18 +327,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -390,10 +375,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -401,13 +383,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -415,12 +391,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -428,24 +399,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -479,7 +442,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -491,12 +453,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -595,7 +553,7 @@ libmc_la_LIBADD = event/libmcevent.la \
 	search/libsearch.la strutil/libmcstrutil.la skin/libmcskin.la \
 	tty/libmctty.la vfs/libmcvfs.la widget/libmcwidget.la \
 	$(MCLIBS) $(SLANGLIB) $(am__append_3) $(am__append_4) \
-	$(PCRE_LIBS) $(LIBICONV) $(LIBINTL)
+	$(PCRE_LIBS)
 all: all-recursive
 
 .SUFFIXES:
diff -urpN mc-4.8.23/lib/event/Makefile.in mc-4.8.24/lib/event/Makefile.in
--- mc-4.8.23/lib/event/Makefile.in	2019-06-22 15:44:13.000000000 +0400
+++ mc-4.8.24/lib/event/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = lib/event
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -228,7 +218,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -236,18 +225,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -287,10 +273,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -298,13 +281,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -312,12 +289,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -325,24 +297,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -376,7 +340,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -388,12 +351,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/lib/filehighlight/Makefile.in mc-4.8.24/lib/filehighlight/Makefile.in
--- mc-4.8.23/lib/filehighlight/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/lib/filehighlight/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = lib/filehighlight
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -229,7 +219,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -237,18 +226,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -288,10 +274,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -299,13 +282,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -313,12 +290,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -326,24 +298,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -377,7 +341,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -389,12 +352,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/lib/glibcompat.c mc-4.8.24/lib/glibcompat.c
--- mc-4.8.23/lib/glibcompat.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/glibcompat.c	2020-01-01 19:52:34.000000000 +0400
@@ -91,6 +91,71 @@ g_list_free_full (GList * list, GDestroy
 
 #endif /* ! GLIB_CHECK_VERSION (2, 28, 0) */
 
+#if ! GLIB_CHECK_VERSION (2, 64, 0)
+/**
+ * g_clear_slist: (skip)
+ * @slist_ptr: (not nullable): a #GSList return location
+ * @destroy: (nullable): the function to pass to g_slist_free_full() or NULL to not free elements
+ *
+ * Clears a pointer to a #GSList, freeing it and, optionally, freeing its elements using @destroy.
+ *
+ * @slist_ptr must be a valid pointer. If @slist_ptr points to a null #GSList, this does nothing.
+ *
+ * Since: 2.64
+ */
+void
+g_clear_slist (GSList ** slist_ptr, GDestroyNotify destroy)
+{
+    GSList *slist;
+
+    slist = *slist_ptr;
+
+    if (slist != NULL)
+    {
+        *slist_ptr = NULL;
+
+        if (destroy != NULL)
+            g_slist_free_full (slist, destroy);
+        else
+            g_slist_free (slist);
+    }
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+/**
+ * g_clear_list:
+ * @list_ptr: (not nullable): a #GList return location
+ * @destroy: (nullable): the function to pass to g_list_free_full() or NULL to not free elements
+ *
+ * Clears a pointer to a #GList, freeing it and, optionally, freeing its elements using @destroy.
+ *
+ * @list_ptr must be a valid pointer. If @list_ptr points to a null #GList, this does nothing.
+ *
+ * Since: 2.64
+ */
+void
+g_clear_list (GList ** list_ptr, GDestroyNotify destroy)
+{
+    GList *list;
+
+    list = *list_ptr;
+
+    if (list != NULL)
+    {
+        *list_ptr = NULL;
+
+        if (destroy != NULL)
+            g_list_free_full (list, destroy);
+        else
+            g_list_free (list);
+    }
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+#endif /* ! GLIB_CHECK_VERSION (2, 64, 0) */
+
 #if ! GLIB_CHECK_VERSION (2, 32, 0)
 /**
  * g_queue_free_full:
diff -urpN mc-4.8.23/lib/glibcompat.h mc-4.8.24/lib/glibcompat.h
--- mc-4.8.23/lib/glibcompat.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/glibcompat.h	2020-01-01 19:52:34.000000000 +0400
@@ -16,6 +16,11 @@ void g_slist_free_full (GSList * list, G
 void g_list_free_full (GList * list, GDestroyNotify free_func);
 #endif /* ! GLIB_CHECK_VERSION (2, 28, 0) */
 
+#if ! GLIB_CHECK_VERSION (2, 64, 0)
+void g_clear_slist (GSList ** slist_ptr, GDestroyNotify destroy);
+void g_clear_list (GList ** list_ptr, GDestroyNotify destroy);
+#endif /* ! GLIB_CHECK_VERSION (2, 64, 0) */
+
 #if ! GLIB_CHECK_VERSION (2, 32, 0)
 void g_queue_free_full (GQueue * queue, GDestroyNotify free_func);
 #endif /* ! GLIB_CHECK_VERSION (2, 32, 0) */
diff -urpN mc-4.8.23/lib/global.c mc-4.8.24/lib/global.c
--- mc-4.8.23/lib/global.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/global.c	2020-01-01 19:52:34.000000000 +0400
@@ -65,8 +65,8 @@ mc_global_t mc_global = {
 #endif /* !HAVE_CHARSET */
     .utf8_display = FALSE,
 
-    .message_visible = 1,
-    .keybar_visible = 1,
+    .message_visible = TRUE,
+    .keybar_visible = TRUE,
 
 #ifdef ENABLE_BACKGROUND
     .we_are_background = FALSE,
@@ -104,8 +104,7 @@ mc_global_t mc_global = {
         .disable_colors = FALSE,
         .ugly_line_drawing = FALSE,
         .old_mouse = FALSE,
-        .alternate_plus_minus = FALSE,
-        .winch_flag = 0
+        .alternate_plus_minus = FALSE
     },
 
     .vfs =
diff -urpN mc-4.8.23/lib/global.h mc-4.8.24/lib/global.h
--- mc-4.8.23/lib/global.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/global.h	2020-01-01 19:52:34.000000000 +0400
@@ -58,10 +58,6 @@
 #endif /* !O_NDELAY */
 #endif /* !O_NONBLOCK */
 
-#ifdef HAVE_SYS_SELECT_H
-#include <sys/select.h>
-#endif
-
 #if defined(__QNX__) && !defined(__QNXNTO__)
 /* exec*() from <process.h> */
 #include <unix.h>
@@ -204,9 +200,9 @@ typedef struct
     gboolean utf8_display;
 
     /* Set if the nice message (hint) bar is visible */
-    int message_visible;
+    gboolean message_visible;
     /* Set if the nice and useful keybar is visible */
-    int keybar_visible;
+    gboolean keybar_visible;
 
 #ifdef ENABLE_BACKGROUND
     /* If true, this is a background process */
@@ -253,7 +249,7 @@ typedef struct
 #endif                          /* !ENABLE_SUBSHELL */
 
         /* This flag is set by xterm detection routine in function main() */
-        /* It is used by function view_other_cmd() */
+        /* It is used by function toggle_subshell() */
         gboolean xterm_flag;
 
         /* disable x11 support */
@@ -275,9 +271,6 @@ typedef struct
         /* If true, use + and \ keys normally and select/unselect do if M-+ / M-\.
            and M-- and keypad + / - */
         gboolean alternate_plus_minus;
-
-        /* Set if the window has changed it's size */
-        SIG_ATOMIC_VOLATILE_T winch_flag;
     } tty;
 
     struct
diff -urpN mc-4.8.23/lib/keybind.c mc-4.8.24/lib/keybind.c
--- mc-4.8.23/lib/keybind.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/keybind.c	2020-01-01 19:52:34.000000000 +0400
@@ -94,6 +94,7 @@ static name_keymap_t command_names[] = {
 #ifdef HAVE_CHARSET
     {"SelectCodepage", CK_SelectCodepage},
 #endif
+    {"EditorViewerHistory", CK_EditorViewerHistory},
     {"History", CK_History},
     {"HistoryNext", CK_HistoryNext},
     {"HistoryPrev", CK_HistoryPrev},
diff -urpN mc-4.8.23/lib/keybind.h mc-4.8.24/lib/keybind.h
--- mc-4.8.23/lib/keybind.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/keybind.h	2020-01-01 19:52:34.000000000 +0400
@@ -85,6 +85,7 @@ enum
     CK_EditNew,
     CK_Shell,
     CK_SelectCodepage,
+    CK_EditorViewerHistory,
     CK_History,
     CK_HistoryNext,
     CK_HistoryPrev,
diff -urpN mc-4.8.23/lib/mcconfig/Makefile.am mc-4.8.24/lib/mcconfig/Makefile.am
--- mc-4.8.23/lib/mcconfig/Makefile.am	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/mcconfig/Makefile.am	2020-01-01 19:52:34.000000000 +0400
@@ -4,6 +4,7 @@ noinst_LTLIBRARIES = libmcconfig.la
 libmcconfig_la_SOURCES = \
 	common.c \
 	get.c \
+	history.c \
 	set.c \
 	paths.c
 
diff -urpN mc-4.8.23/lib/mcconfig/Makefile.in mc-4.8.24/lib/mcconfig/Makefile.in
--- mc-4.8.23/lib/mcconfig/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/lib/mcconfig/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = lib/mcconfig
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -157,7 +147,8 @@ CONFIG_CLEAN_FILES =
 CONFIG_CLEAN_VPATH_FILES =
 LTLIBRARIES = $(noinst_LTLIBRARIES)
 libmcconfig_la_LIBADD =
-am_libmcconfig_la_OBJECTS = common.lo get.lo set.lo paths.lo
+am_libmcconfig_la_OBJECTS = common.lo get.lo history.lo set.lo \
+	paths.lo
 libmcconfig_la_OBJECTS = $(am_libmcconfig_la_OBJECTS)
 AM_V_lt = $(am__v_lt_@AM_V@)
 am__v_lt_ = $(am__v_lt_@AM_DEFAULT_V@)
@@ -179,7 +170,8 @@ DEFAULT_INCLUDES = -I.@am__isrc@ -I$(top
 depcomp = $(SHELL) $(top_srcdir)/config/depcomp
 am__maybe_remake_depfiles = depfiles
 am__depfiles_remade = ./$(DEPDIR)/common.Plo ./$(DEPDIR)/get.Plo \
-	./$(DEPDIR)/paths.Plo ./$(DEPDIR)/set.Plo
+	./$(DEPDIR)/history.Plo ./$(DEPDIR)/paths.Plo \
+	./$(DEPDIR)/set.Plo
 am__mv = mv -f
 COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
@@ -228,7 +220,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -236,18 +227,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -287,10 +275,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -298,13 +283,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -312,12 +291,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -325,24 +299,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -376,7 +342,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -388,12 +353,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -462,6 +423,7 @@ noinst_LTLIBRARIES = libmcconfig.la
 libmcconfig_la_SOURCES = \
 	common.c \
 	get.c \
+	history.c \
 	set.c \
 	paths.c
 
@@ -522,6 +484,7 @@ distclean-compile:
 
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/common.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/get.Plo@am__quote@ # am--include-marker
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/history.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/paths.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/set.Plo@am__quote@ # am--include-marker
 
@@ -685,6 +648,7 @@ clean-am: clean-generic clean-libtool cl
 distclean: distclean-am
 		-rm -f ./$(DEPDIR)/common.Plo
 	-rm -f ./$(DEPDIR)/get.Plo
+	-rm -f ./$(DEPDIR)/history.Plo
 	-rm -f ./$(DEPDIR)/paths.Plo
 	-rm -f ./$(DEPDIR)/set.Plo
 	-rm -f Makefile
@@ -734,6 +698,7 @@ installcheck-am:
 maintainer-clean: maintainer-clean-am
 		-rm -f ./$(DEPDIR)/common.Plo
 	-rm -f ./$(DEPDIR)/get.Plo
+	-rm -f ./$(DEPDIR)/history.Plo
 	-rm -f ./$(DEPDIR)/paths.Plo
 	-rm -f ./$(DEPDIR)/set.Plo
 	-rm -f Makefile
diff -urpN mc-4.8.23/lib/mcconfig/common.c mc-4.8.24/lib/mcconfig/common.c
--- mc-4.8.23/lib/mcconfig/common.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/mcconfig/common.c	2020-01-01 19:52:34.000000000 +0400
@@ -30,18 +30,20 @@
 #include "lib/global.h"
 #include "lib/vfs/vfs.h"        /* mc_stat */
 #include "lib/util.h"
+
 #include "lib/mcconfig.h"
 
-/*** global variables **************************************************/
+/*** global variables ****************************************************************************/
 
-/*** file scope macro definitions **************************************/
+/*** file scope macro definitions ****************************************************************/
 
-/*** file scope type declarations **************************************/
+/*** file scope type declarations ****************************************************************/
 
-/*** file scope variables **********************************************/
+/*** file scope variables ************************************************************************/
 
-/*** file scope functions **********************************************/
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
+/*** file scope functions ************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
 
 static gboolean
 mc_config_new_or_override_file (mc_config_t * mc_config, const gchar * ini_path, GError ** mcerror)
@@ -80,6 +82,7 @@ mc_config_new_or_override_file (mc_confi
          (cur_written = mc_write (fd, (const void *) written_data, total_written)) > 0;
          written_data += cur_written, total_written -= cur_written)
         ;
+
     mc_close (fd);
     g_free (data);
 
@@ -94,9 +97,9 @@ mc_config_new_or_override_file (mc_confi
     return TRUE;
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
-/*** public functions **************************************************/
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
+/*** public functions ****************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
 
 mc_config_t *
 mc_config_init (const gchar * ini_path, gboolean read_only)
@@ -105,7 +108,6 @@ mc_config_init (const gchar * ini_path,
     struct stat st;
 
     mc_config = g_try_malloc0 (sizeof (mc_config_t));
-
     if (mc_config == NULL)
         return NULL;
 
@@ -115,6 +117,7 @@ mc_config_init (const gchar * ini_path,
         g_free (mc_config);
         return NULL;
     }
+
     if (ini_path == NULL)
         return mc_config;
 
@@ -140,7 +143,7 @@ mc_config_init (const gchar * ini_path,
     return mc_config;
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 void
 mc_config_deinit (mc_config_t * mc_config)
@@ -153,51 +156,51 @@ mc_config_deinit (mc_config_t * mc_confi
     }
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gboolean
 mc_config_has_param (const mc_config_t * mc_config, const char *group, const gchar * param)
 {
-    if (!mc_config || !group || !param)
+    if (mc_config == NULL || group == NULL || param == NULL)
         return FALSE;
 
     return g_key_file_has_key (mc_config->handle, group, param, NULL);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gboolean
 mc_config_has_group (mc_config_t * mc_config, const char *group)
 {
-    if (!mc_config || !group)
+    if (mc_config == NULL || group == NULL)
         return FALSE;
 
     return g_key_file_has_group (mc_config->handle, group);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gboolean
 mc_config_del_key (mc_config_t * mc_config, const char *group, const gchar * param)
 {
-    if (!mc_config || !group || !param)
+    if (mc_config == NULL || group == NULL || param == NULL)
         return FALSE;
 
     return g_key_file_remove_key (mc_config->handle, group, param, NULL);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gboolean
 mc_config_del_group (mc_config_t * mc_config, const char *group)
 {
-    if (!mc_config || !group)
+    if (mc_config == NULL || group == NULL)
         return FALSE;
 
     return g_key_file_remove_group (mc_config->handle, group, NULL);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gboolean
 mc_config_read_file (mc_config_t * mc_config, const gchar * ini_path, gboolean read_only,
@@ -247,7 +250,7 @@ mc_config_read_file (mc_config_t * mc_co
     return ok;
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gboolean
 mc_config_save_file (mc_config_t * mc_config, GError ** mcerror)
@@ -260,7 +263,7 @@ mc_config_save_file (mc_config_t * mc_co
     return mc_config_new_or_override_file (mc_config, mc_config->ini_path, mcerror);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gboolean
 mc_config_save_to_file (mc_config_t * mc_config, const gchar * ini_path, GError ** mcerror)
@@ -271,7 +274,6 @@ mc_config_save_to_file (mc_config_t * mc
         return FALSE;
 
     return mc_config_new_or_override_file (mc_config, ini_path, mcerror);
-
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/mcconfig/get.c mc-4.8.24/lib/mcconfig/get.c
--- mc-4.8.23/lib/mcconfig/get.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/mcconfig/get.c	2020-01-01 19:52:34.000000000 +0400
@@ -24,19 +24,26 @@
 
 #include "lib/global.h"
 #include "lib/strutil.h"
+
 #include "lib/mcconfig.h"
 
-/*** global variables **************************************************/
+/*** global variables ****************************************************************************/
+
+/*** file scope macro definitions ****************************************************************/
 
-/*** file scope macro definitions **************************************/
+/*** file scope type declarations ****************************************************************/
 
-/*** file scope type declarations **************************************/
+/*** file scope variables ************************************************************************/
 
-/*** file scope variables **********************************************/
+/*** file scope functions ************************************************************************/
 
-/*** file scope functions **********************************************/
+/* --------------------------------------------------------------------------------------------- */
+/*** file scope functions ************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
 
-/*** public functions **************************************************/
+/* --------------------------------------------------------------------------------------------- */
+/*** public functions ****************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
 
 gchar **
 mc_config_get_groups (const mc_config_t * mc_config, gsize * len)
@@ -56,7 +63,7 @@ mc_config_get_groups (const mc_config_t
     return ret;
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gchar **
 mc_config_get_keys (const mc_config_t * mc_config, const gchar * group, gsize * len)
@@ -76,7 +83,7 @@ mc_config_get_keys (const mc_config_t *
     return ret;
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gchar *
 mc_config_get_string (mc_config_t * mc_config, const gchar * group,
@@ -87,7 +94,7 @@ mc_config_get_string (mc_config_t * mc_c
     gchar *ret;
     estr_t conv_res;
 
-    if (!mc_config || !group || !param)
+    if (mc_config == NULL || group == NULL || param == NULL)
         return g_strdup (def);
 
     if (!mc_config_has_param (mc_config, group, param))
@@ -123,15 +130,15 @@ mc_config_get_string (mc_config_t * mc_c
     return g_string_free (buffer, FALSE);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gchar *
-mc_config_get_string_raw (const mc_config_t * mc_config, const gchar * group,
+mc_config_get_string_raw (mc_config_t * mc_config, const gchar * group,
                           const gchar * param, const gchar * def)
 {
     gchar *ret;
 
-    if (!mc_config || !group || !param)
+    if (mc_config == NULL || group == NULL || param == NULL)
         return g_strdup (def);
 
     if (!mc_config_has_param (mc_config, group, param))
@@ -146,12 +153,12 @@ mc_config_get_string_raw (const mc_confi
     return ret != NULL ? ret : g_strdup (def);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gboolean
 mc_config_get_bool (mc_config_t * mc_config, const gchar * group, const gchar * param, gboolean def)
 {
-    if (!mc_config || !group || !param)
+    if (mc_config == NULL || group == NULL || param == NULL)
         return def;
 
     if (!mc_config_has_param (mc_config, group, param))
@@ -163,12 +170,12 @@ mc_config_get_bool (mc_config_t * mc_con
     return g_key_file_get_boolean (mc_config->handle, group, param, NULL);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 int
 mc_config_get_int (mc_config_t * mc_config, const gchar * group, const gchar * param, int def)
 {
-    if (!mc_config || !group || !param)
+    if (mc_config == NULL || group == NULL || param == NULL)
         return def;
 
     if (!mc_config_has_param (mc_config, group, param))
@@ -180,41 +187,40 @@ mc_config_get_int (mc_config_t * mc_conf
     return g_key_file_get_integer (mc_config->handle, group, param, NULL);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gchar **
 mc_config_get_string_list (mc_config_t * mc_config, const gchar * group,
                            const gchar * param, gsize * length)
 {
-    if (!mc_config || !group || !param)
+    if (mc_config == NULL || group == NULL || param == NULL)
         return NULL;
 
     return g_key_file_get_string_list (mc_config->handle, group, param, length, NULL);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 gboolean *
 mc_config_get_bool_list (mc_config_t * mc_config, const gchar * group,
                          const gchar * param, gsize * length)
 {
-    if (!mc_config || !group || !param)
+    if (mc_config == NULL || group == NULL || param == NULL)
         return NULL;
 
     return g_key_file_get_boolean_list (mc_config->handle, group, param, length, NULL);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 int *
 mc_config_get_int_list (mc_config_t * mc_config, const gchar * group,
                         const gchar * param, gsize * length)
 {
-    if (!mc_config || !group || !param)
+    if (mc_config == NULL || group == NULL || param == NULL)
         return NULL;
 
     return g_key_file_get_integer_list (mc_config->handle, group, param, length, NULL);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/mcconfig/history.c mc-4.8.24/lib/mcconfig/history.c
--- mc-4.8.23/lib/mcconfig/history.c	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/lib/mcconfig/history.c	2020-01-01 19:52:34.000000000 +0400
@@ -0,0 +1,219 @@
+/*
+   Widgets for the Midnight Commander
+
+   Copyright (C) 1994-2019
+   Free Software Foundation, Inc.
+
+   Authors:
+   Radek Doulik, 1994, 1995
+   Miguel de Icaza, 1994, 1995
+   Jakub Jelinek, 1995
+   Andrej Borsenkow, 1996
+   Norbert Warmuth, 1997
+   Andrew Borodin <aborodin@vmail.ru>, 2009-2019
+
+   This file is part of the Midnight Commander.
+
+   The Midnight Commander is free software: you can redistribute it
+   and/or modify it under the terms of the GNU General Public License as
+   published by the Free Software Foundation, either version 3 of the License,
+   or (at your option) any later version.
+
+   The Midnight Commander is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.
+
+   You should have received a copy of the GNU General Public License
+   along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ */
+
+/** \file history.c
+ *  \brief Source: save and load history
+ */
+
+#include <config.h>
+
+#include <stdlib.h>
+#include <sys/types.h>
+
+#include "lib/global.h"
+
+#include "lib/fileloc.h"        /* MC_HISTORY_FILE */
+#include "lib/strutil.h"
+#include "lib/util.h"           /* list_append_unique */
+
+#include "lib/mcconfig.h"
+
+/*** global variables ****************************************************************************/
+
+/* how much history items are used */
+int num_history_items_recorded = 60;
+
+/*** file scope macro definitions ****************************************************************/
+
+/*** file scope type declarations ****************************************************************/
+
+/*** file scope variables ************************************************************************/
+
+/* --------------------------------------------------------------------------------------------- */
+/*** file scope functions ************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
+
+/* --------------------------------------------------------------------------------------------- */
+/*** public functions ****************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
+
+/**
+ * Load the history from the ${XDG_CACHE_HOME}/mc/history file.
+ * It is called with the widgets history name and returns the GList list.
+ */
+
+GList *
+mc_config_history_get (const char *name)
+{
+    GList *hist = NULL;
+    char *profile;
+    mc_config_t *cfg;
+
+    if (num_history_items_recorded == 0)        /* this is how to disable */
+        return NULL;
+    if (name == NULL || *name == '\0')
+        return NULL;
+
+    profile = mc_config_get_full_path (MC_HISTORY_FILE);
+    cfg = mc_config_init (profile, TRUE);
+
+    hist = mc_config_history_load (cfg, name);
+
+    mc_config_deinit (cfg);
+    g_free (profile);
+
+    return hist;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+/**
+ * Load history from the mc_config
+ */
+GList *
+mc_config_history_load (mc_config_t * cfg, const char *name)
+{
+    size_t i;
+    GList *hist = NULL;
+    char **keys;
+    size_t keys_num = 0;
+    GIConv conv = INVALID_CONV;
+    GString *buffer;
+
+    if (name == NULL || *name == '\0')
+        return NULL;
+
+    /* get number of keys */
+    keys = mc_config_get_keys (cfg, name, &keys_num);
+    g_strfreev (keys);
+
+    /* create charset conversion handler to convert strings
+       from utf-8 to system codepage */
+    if (!mc_global.utf8_display)
+        conv = str_crt_conv_from ("UTF-8");
+
+    buffer = g_string_sized_new (64);
+
+    for (i = 0; i < keys_num; i++)
+    {
+        char key[BUF_TINY];
+        char *this_entry;
+
+        g_snprintf (key, sizeof (key), "%lu", (unsigned long) i);
+        this_entry = mc_config_get_string_raw (cfg, name, key, "");
+
+        if (this_entry == NULL)
+            continue;
+
+        if (conv == INVALID_CONV)
+            hist = list_append_unique (hist, this_entry);
+        else
+        {
+            g_string_set_size (buffer, 0);
+            if (str_convert (conv, this_entry, buffer) == ESTR_FAILURE)
+                hist = list_append_unique (hist, this_entry);
+            else
+            {
+                hist = list_append_unique (hist, g_strndup (buffer->str, buffer->len));
+                g_free (this_entry);
+            }
+        }
+    }
+
+    g_string_free (buffer, TRUE);
+    if (conv != INVALID_CONV)
+        str_close_conv (conv);
+
+    /* return pointer to the last entry in the list */
+    return g_list_last (hist);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+/**
+  * Save history to the mc_config, but don't save config to file
+  */
+void
+mc_config_history_save (mc_config_t * cfg, const char *name, GList * h)
+{
+    GIConv conv = INVALID_CONV;
+    GString *buffer;
+    int i;
+
+    if (name == NULL || *name == '\0' || h == NULL)
+        return;
+
+    /* go to end of list */
+    h = g_list_last (h);
+
+    /* go back 60 places */
+    for (i = 0; (i < num_history_items_recorded - 1) && (h->prev != NULL); i++)
+        h = g_list_previous (h);
+
+    if (name != NULL)
+        mc_config_del_group (cfg, name);
+
+    /* create charset conversion handler to convert strings
+       from system codepage to UTF-8 */
+    if (!mc_global.utf8_display)
+        conv = str_crt_conv_to ("UTF-8");
+
+    buffer = g_string_sized_new (64);
+
+    /* dump history into profile */
+    for (i = 0; h != NULL; h = g_list_next (h))
+    {
+        char key[BUF_TINY];
+        char *text = (char *) h->data;
+
+        /* We shouldn't have null entries, but let's be sure */
+        if (text == NULL)
+            continue;
+
+        g_snprintf (key, sizeof (key), "%d", i++);
+
+        if (conv == INVALID_CONV)
+            mc_config_set_string_raw (cfg, name, key, text);
+        else
+        {
+            g_string_set_size (buffer, 0);
+            if (str_convert (conv, text, buffer) == ESTR_FAILURE)
+                mc_config_set_string_raw (cfg, name, key, text);
+            else
+                mc_config_set_string_raw (cfg, name, key, buffer->str);
+        }
+    }
+
+    g_string_free (buffer, TRUE);
+    if (conv != INVALID_CONV)
+        str_close_conv (conv);
+}
+
+/* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/mcconfig/paths.c mc-4.8.24/lib/mcconfig/paths.c
--- mc-4.8.23/lib/mcconfig/paths.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/mcconfig/paths.c	2020-01-01 19:52:34.000000000 +0400
@@ -127,6 +127,7 @@ static const struct
 };
 #endif /* MC_HOMEDIR_XDG */
 
+/* --------------------------------------------------------------------------------------------- */
 /*** file scope functions *********************************************************************** */
 /* --------------------------------------------------------------------------------------------- */
 
@@ -150,12 +151,11 @@ mc_config_init_one_config_path (const ch
     mc_return_val_if_error (mcerror, FALSE);
 
     full_path = g_build_filename (path_base, subdir, (char *) NULL);
+
     if (g_file_test (full_path, G_FILE_TEST_EXISTS))
     {
         if (g_file_test (full_path, G_FILE_TEST_IS_DIR))
-        {
             config_dir_present = TRUE;
-        }
         else
         {
             fprintf (stderr, "%s %s\n", _("FATAL: not a directory:"), full_path);
@@ -199,7 +199,6 @@ mc_config_copy (const char *old_name, co
 
     if (g_file_test (old_name, G_FILE_TEST_IS_DIR))
     {
-
         GDir *dir;
         const char *dir_name;
 
@@ -255,6 +254,7 @@ mc_config_fix_migrated_rules (void)
             rename (old_name, new_name);
             g_free (new_name);
         }
+
         g_free (old_name);
     }
 }
@@ -405,6 +405,7 @@ mc_config_get_home_dir (void)
         if (homedir == NULL || *homedir == '\0')
             homedir = g_get_home_dir ();
     }
+
     return homedir;
 }
 
@@ -445,6 +446,7 @@ mc_config_migrate_from_old_place (GError
     for (rule_index = 0; mc_config_files_reference[rule_index].old_filename != NULL; rule_index++)
     {
         char *old_name;
+
         if (*mc_config_files_reference[rule_index].old_filename == '\0')
             continue;
 
@@ -462,6 +464,7 @@ mc_config_migrate_from_old_place (GError
             mc_config_copy (old_name, new_name, mcerror);
             g_free (new_name);
         }
+
         g_free (old_name);
     }
 
@@ -501,14 +504,11 @@ mc_config_get_full_path (const char *con
         mc_config_init_config_paths (NULL);
 
     for (rule_index = 0; mc_config_files_reference[rule_index].old_filename != NULL; rule_index++)
-    {
         if (strcmp (config_name, mc_config_files_reference[rule_index].new_filename) == 0)
-        {
             return g_build_filename (*mc_config_files_reference[rule_index].new_basedir,
                                      mc_config_files_reference[rule_index].new_filename,
                                      (char *) NULL);
-        }
-    }
+
     return NULL;
 }
 
@@ -530,6 +530,7 @@ mc_config_get_full_vpath (const char *co
 
     ret_vpath = vfs_path_from_str (str_path);
     g_free (str_path);
+
     return ret_vpath;
 }
 
diff -urpN mc-4.8.23/lib/mcconfig/set.c mc-4.8.24/lib/mcconfig/set.c
--- mc-4.8.23/lib/mcconfig/set.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/mcconfig/set.c	2020-01-01 19:52:34.000000000 +0400
@@ -24,18 +24,20 @@
 
 #include "lib/global.h"
 #include "lib/strutil.h"
+
 #include "lib/mcconfig.h"
 
-/*** global variables **************************************************/
+/*** global variables ****************************************************************************/
 
-/*** file scope macro definitions **************************************/
+/*** file scope macro definitions ****************************************************************/
 
-/*** file scope type declarations **************************************/
+/*** file scope type declarations ****************************************************************/
 
-/*** file scope variables **********************************************/
+/*** file scope variables ************************************************************************/
 
-/*** file scope functions **********************************************/
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
+/*** file scope functions ************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
 
 static gchar *
 mc_config_normalize_before_save (const gchar * value)
@@ -65,109 +67,91 @@ mc_config_normalize_before_save (const g
     return g_string_free (buffer, FALSE);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
-/*** public functions **************************************************/
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
+/*** public functions ****************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
 
 void
 mc_config_set_string_raw (mc_config_t * mc_config, const gchar * group,
                           const gchar * param, const gchar * value)
 {
-    if (!mc_config || !group || !param || !value)
-        return;
-
-    g_key_file_set_string (mc_config->handle, group, param, value);
+    if (mc_config != NULL && group != NULL && param != NULL && value != NULL)
+        g_key_file_set_string (mc_config->handle, group, param, value);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 void
 mc_config_set_string_raw_value (mc_config_t * mc_config, const gchar * group,
                                 const gchar * param, const gchar * value)
 {
-    if (!mc_config || !group || !param || !value)
-        return;
-
-    g_key_file_set_value (mc_config->handle, group, param, value);
+    if (mc_config != NULL && group != NULL && param != NULL && value != NULL)
+        g_key_file_set_value (mc_config->handle, group, param, value);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 void
-mc_config_set_string (const mc_config_t * mc_config, const gchar * group,
+mc_config_set_string (mc_config_t * mc_config, const gchar * group,
                       const gchar * param, const gchar * value)
 {
-    gchar *buffer;
-
-    if (!mc_config || !group || !param || !value)
-        return;
-
-    buffer = mc_config_normalize_before_save (value);
-
-    g_key_file_set_string (mc_config->handle, group, param, buffer);
+    if (mc_config != NULL && group != NULL && param != NULL && value != NULL)
+    {
+        gchar *buffer;
 
-    g_free (buffer);
+        buffer = mc_config_normalize_before_save (value);
+        g_key_file_set_string (mc_config->handle, group, param, buffer);
+        g_free (buffer);
+    }
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 void
 mc_config_set_bool (mc_config_t * mc_config, const gchar * group,
                     const gchar * param, gboolean value)
 {
-    if (!mc_config || !group || !param)
-        return;
-
-    g_key_file_set_boolean (mc_config->handle, group, param, value);
+    if (mc_config != NULL && group != NULL && param != NULL)
+        g_key_file_set_boolean (mc_config->handle, group, param, value);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 void
 mc_config_set_int (mc_config_t * mc_config, const gchar * group, const gchar * param, int value)
 {
-    if (!mc_config || !group || !param)
-        return;
-
-    g_key_file_set_integer (mc_config->handle, group, param, value);
+    if (mc_config != NULL && group != NULL && param != NULL)
+        g_key_file_set_integer (mc_config->handle, group, param, value);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 void
 mc_config_set_string_list (mc_config_t * mc_config, const gchar * group,
                            const gchar * param, const gchar * const value[], gsize length)
 {
-    if (!mc_config || !group || !param || !value || length == 0)
-        return;
-
-    g_key_file_set_string_list (mc_config->handle, group, param, value, length);
+    if (mc_config != NULL && group != NULL && param != NULL && value != NULL && length != 0)
+        g_key_file_set_string_list (mc_config->handle, group, param, value, length);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
-
+/* --------------------------------------------------------------------------------------------- */
 
 void
 mc_config_set_bool_list (mc_config_t * mc_config, const gchar * group,
                          const gchar * param, gboolean value[], gsize length)
 {
-    if (!mc_config || !group || !param || !value || length == 0)
-        return;
-
-    g_key_file_set_boolean_list (mc_config->handle, group, param, value, length);
+    if (mc_config != NULL && group != NULL && param != NULL && value != NULL && length != 0)
+        g_key_file_set_boolean_list (mc_config->handle, group, param, value, length);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
 
 void
 mc_config_set_int_list (mc_config_t * mc_config, const gchar * group,
                         const gchar * param, int value[], gsize length)
 {
-    if (!mc_config || !group || !param || !value || length == 0)
-        return;
-
-    g_key_file_set_integer_list (mc_config->handle, group, param, value, length);
+    if (mc_config != NULL && group != NULL && param != NULL && value != NULL && length != 0)
+        g_key_file_set_integer_list (mc_config->handle, group, param, value, length);
 }
 
-/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
+/* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/mcconfig.h mc-4.8.24/lib/mcconfig.h
--- mc-4.8.23/lib/mcconfig.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/mcconfig.h	2020-01-01 19:52:34.000000000 +0400
@@ -1,5 +1,5 @@
-#ifndef MC_CONFIG_H
-#define MC_CONFIG_H
+#ifndef MC__CONFIG_H
+#define MC__CONFIG_H
 
 #include "lib/vfs/vfs.h"        /* vfs_path_t */
 
@@ -23,6 +23,8 @@ typedef struct mc_config_t
 
 /*** global variables defined in .c file *********************************************************/
 
+extern int num_history_items_recorded;
+
 /*** declarations of public functions ************************************************************/
 
 /* mcconfig/common.c: */
@@ -30,89 +32,87 @@ typedef struct mc_config_t
 mc_config_t *mc_config_init (const gchar * ini_path, gboolean read_only);
 void mc_config_deinit (mc_config_t * mc_config);
 
-gboolean mc_config_del_key (mc_config_t *, const char *, const gchar *);
-gboolean mc_config_del_group (mc_config_t *, const char *);
+gboolean mc_config_has_param (const mc_config_t * mc_config, const char *group,
+                              const gchar * param);
+gboolean mc_config_has_group (mc_config_t * mc_config, const char *group);
 
-gboolean mc_config_has_param (const mc_config_t *, const char *, const gchar *);
-gboolean mc_config_has_group (mc_config_t *, const char *);
+gboolean mc_config_del_key (mc_config_t * mc_config, const char *group, const gchar * param);
+gboolean mc_config_del_group (mc_config_t * mc_config, const char *group);
 
 gboolean mc_config_read_file (mc_config_t * mc_config, const gchar * ini_path, gboolean read_only,
                               gboolean remove_empty);
-
-gboolean mc_config_save_file (mc_config_t * config, GError ** error);
-
-gboolean mc_config_save_to_file (mc_config_t * config, const gchar * filename, GError ** error);
+gboolean mc_config_save_file (mc_config_t * config, GError ** mcerror);
+gboolean mc_config_save_to_file (mc_config_t * mc_config, const gchar * ini_path,
+                                 GError ** mcerror);
 
 
 /* mcconfig/get.c: */
 
 gchar **mc_config_get_groups (const mc_config_t * mc_config, gsize * len);
-
 gchar **mc_config_get_keys (const mc_config_t * mc_config, const gchar * group, gsize * len);
 
-gchar *mc_config_get_string (mc_config_t *, const gchar *, const gchar *, const gchar *);
-
-gchar *mc_config_get_string_raw (const mc_config_t *, const gchar *, const gchar *, const gchar *);
-
-gboolean mc_config_get_bool (mc_config_t *, const gchar *, const gchar *, gboolean);
-
-int mc_config_get_int (mc_config_t *, const gchar *, const gchar *, int);
-
+gchar *mc_config_get_string (mc_config_t * mc_config, const gchar * group, const gchar * param,
+                             const gchar * def);
+gchar *mc_config_get_string_raw (mc_config_t * mc_config, const gchar * group, const gchar * param,
+                                 const gchar * def);
+gboolean mc_config_get_bool (mc_config_t * mc_config, const gchar * group, const gchar * param,
+                             gboolean def);
+int mc_config_get_int (mc_config_t * mc_config, const gchar * group, const gchar * param, int def);
 
 gchar **mc_config_get_string_list (mc_config_t * mc_config, const gchar * group,
                                    const gchar * param, gsize * length);
-
-gboolean *mc_config_get_bool_list (mc_config_t *, const gchar *, const gchar *, gsize *);
-
-int *mc_config_get_int_list (mc_config_t *, const gchar *, const gchar *, gsize *);
+gboolean *mc_config_get_bool_list (mc_config_t * mc_config, const gchar * group,
+                                   const gchar * param, gsize * length);
+int *mc_config_get_int_list (mc_config_t * mc_config, const gchar * group, const gchar * param,
+                             gsize * length);
 
 
 /* mcconfig/set.c: */
 
-void mc_config_set_string_raw (mc_config_t *, const gchar *, const gchar *, const gchar *);
-
-void mc_config_set_string_raw_value (mc_config_t *, const gchar *, const gchar *, const gchar *);
-
-void mc_config_set_string (const mc_config_t *, const gchar *, const gchar *, const gchar *);
-
-void mc_config_set_bool (mc_config_t *, const gchar *, const gchar *, gboolean);
-
-void mc_config_set_int (mc_config_t *, const gchar *, const gchar *, int);
+void mc_config_set_string_raw (mc_config_t * mc_config, const gchar * group, const gchar * param,
+                               const gchar * value);
+void mc_config_set_string_raw_value (mc_config_t * mc_config, const gchar * group,
+                                     const gchar * param, const gchar * value);
+void mc_config_set_string (mc_config_t * mc_config, const gchar * group, const gchar * param,
+                           const gchar * value);
+void mc_config_set_bool (mc_config_t * mc_config, const gchar * group, const gchar * param,
+                         gboolean value);
+void mc_config_set_int (mc_config_t * mc_config, const gchar * group, const gchar * param,
+                        int value);
 
 void
-mc_config_set_string_list (mc_config_t *, const gchar *,
-                           const gchar *, const gchar * const[], gsize);
-
-void mc_config_set_bool_list (mc_config_t *, const gchar *, const gchar *, gboolean[], gsize);
-
-void mc_config_set_int_list (mc_config_t *, const gchar *, const gchar *, int[], gsize);
-
-
-/* mcconfig/dialog.c: */
-
-void mc_config_show_dialog (void);
+mc_config_set_string_list (mc_config_t * mc_config, const gchar * group, const gchar * param,
+                           const gchar * const value[], gsize length);
+void mc_config_set_bool_list (mc_config_t * mc_config, const gchar * group, const gchar * param,
+                              gboolean value[], gsize length);
+void mc_config_set_int_list (mc_config_t * mc_config, const gchar * group, const gchar * param,
+                             int value[], gsize length);
 
 
 /* mcconfig/paths.c: */
 
 void mc_config_init_config_paths (GError ** error);
-
 void mc_config_deinit_config_paths (void);
 
-gboolean mc_config_migrate_from_old_place (GError ** error, char **msg);
-
 const char *mc_config_get_data_path (void);
-
 const char *mc_config_get_cache_path (void);
-
+const char *mc_config_get_home_dir (void);
 const char *mc_config_get_path (void);
+char *mc_config_get_full_path (const char *config_name);
+vfs_path_t *mc_config_get_full_vpath (const char *config_name);
 
-const char *mc_config_get_home_dir (void);
+gboolean mc_config_migrate_from_old_place (GError ** mcerror, char **msg);
 
-char *mc_config_get_full_path (const char *config_name);
+/* mcconfig/history.h */
+
+/* read history to the mc_config, but don't save config to file */
+GList *mc_config_history_get (const char *name);
+/* load history from the mc_config */
+GList *mc_config_history_load (mc_config_t * cfg, const char *name);
+/* save history to the mc_config, but don't save config to file */
+void mc_config_history_save (mc_config_t * cfg, const char *name, GList * h);
 
-vfs_path_t *mc_config_get_full_vpath (const char *config_name);
 
 /*** inline functions ****************************************************************************/
 
-#endif
+#endif /* MC__CONFIG_H */
diff -urpN mc-4.8.23/lib/search/Makefile.in mc-4.8.24/lib/search/Makefile.in
--- mc-4.8.23/lib/search/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/lib/search/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = lib/search
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -230,7 +220,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -238,18 +227,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -289,10 +275,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -300,13 +283,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -314,12 +291,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -327,24 +299,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -378,7 +342,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -390,12 +353,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/lib/serialize.c mc-4.8.24/lib/serialize.c
--- mc-4.8.23/lib/serialize.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/serialize.c	2020-01-01 19:52:34.000000000 +0400
@@ -193,7 +193,7 @@ mc_deserialize_str (const char prefix, c
  */
 
 char *
-mc_serialize_config (const mc_config_t * data, GError ** error)
+mc_serialize_config (mc_config_t * data, GError ** error)
 {
     gchar **groups, **group_iterator;
     GString *buffer;
diff -urpN mc-4.8.23/lib/serialize.h mc-4.8.24/lib/serialize.h
--- mc-4.8.23/lib/serialize.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/serialize.h	2020-01-01 19:52:34.000000000 +0400
@@ -19,7 +19,7 @@
 char *mc_serialize_str (const char prefix, const char *data, GError ** error);
 char *mc_deserialize_str (const char prefix, const char *data, GError ** error);
 
-char *mc_serialize_config (const mc_config_t * data, GError ** error);
+char *mc_serialize_config (mc_config_t * data, GError ** error);
 mc_config_t *mc_deserialize_config (const char *data, GError ** error);
 
 /*** inline functions ****************************************************************************/
diff -urpN mc-4.8.23/lib/skin/Makefile.in mc-4.8.24/lib/skin/Makefile.in
--- mc-4.8.23/lib/skin/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/lib/skin/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = lib/skin
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -231,7 +221,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -239,18 +228,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -290,10 +276,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -301,13 +284,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -315,12 +292,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -328,24 +300,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -379,7 +343,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -391,12 +354,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/lib/strutil/Makefile.in mc-4.8.24/lib/strutil/Makefile.in
--- mc-4.8.23/lib/strutil/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/lib/strutil/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = lib/strutil
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -233,7 +223,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -241,18 +230,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -292,10 +278,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -303,13 +286,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -317,12 +294,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -330,24 +302,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -381,7 +345,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -393,12 +356,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/lib/strutil/strutil.c mc-4.8.24/lib/strutil/strutil.c
--- mc-4.8.23/lib/strutil/strutil.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/strutil/strutil.c	2020-01-01 19:52:34.000000000 +0400
@@ -55,8 +55,14 @@ static const char *const str_utf8_encodi
 
 /* standard 8bit encodings, no wide or multibytes characters */
 static const char *const str_8bit_encodings[] = {
+    /* Solaris has different names of Windows 1251 encoding */
+#ifdef __sun
+    "ansi-1251",
+    "ansi1251",
+#else
     "cp-1251",
     "cp1251",
+#endif
     "cp-1250",
     "cp1250",
     "cp-866",
diff -urpN mc-4.8.23/lib/tty/Makefile.am mc-4.8.24/lib/tty/Makefile.am
--- mc-4.8.23/lib/tty/Makefile.am	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/tty/Makefile.am	2020-01-01 19:52:34.000000000 +0400
@@ -16,7 +16,8 @@ TTY_SRC = \
 	color.c color.h \
 	key.c key.h keyxdef.c \
 	mouse.c mouse.h \
-	tty.c tty.h tty-internal.h \
+	tty-internal.c tty-internal.h \
+	tty.c tty.h \
 	win.c win.h
 
 if HAVE_TEXTMODE_X11_SUPPORT
diff -urpN mc-4.8.23/lib/tty/Makefile.in mc-4.8.24/lib/tty/Makefile.in
--- mc-4.8.23/lib/tty/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/lib/tty/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -93,24 +93,14 @@ host_triplet = @host@
 @HAVE_GMODULE_FALSE@am__append_3 = $(GLIB_CFLAGS)
 subdir = lib/tty
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -161,13 +151,14 @@ CONFIG_CLEAN_VPATH_FILES =
 LTLIBRARIES = $(noinst_LTLIBRARIES)
 libmctty_la_LIBADD =
 am__libmctty_la_SOURCES_DIST = color-internal.c color-internal.h \
-	color.c color.h key.c key.h keyxdef.c mouse.c mouse.h tty.c \
-	tty.h tty-internal.h win.c win.h x11conn.c x11conn.h \
-	color-ncurses.c tty-ncurses.c tty-ncurses.h color-slang.c \
-	color-slang.h tty-slang.c tty-slang.h
+	color.c color.h key.c key.h keyxdef.c mouse.c mouse.h \
+	tty-internal.c tty-internal.h tty.c tty.h win.c win.h \
+	x11conn.c x11conn.h color-ncurses.c tty-ncurses.c \
+	tty-ncurses.h color-slang.c color-slang.h tty-slang.c \
+	tty-slang.h
 @HAVE_TEXTMODE_X11_SUPPORT_TRUE@am__objects_1 = x11conn.lo
 am__objects_2 = color-internal.lo color.lo key.lo keyxdef.lo mouse.lo \
-	tty.lo win.lo $(am__objects_1)
+	tty-internal.lo tty.lo win.lo $(am__objects_1)
 @USE_SCREEN_SLANG_FALSE@am__objects_3 = color-ncurses.lo \
 @USE_SCREEN_SLANG_FALSE@	tty-ncurses.lo
 @USE_SCREEN_SLANG_TRUE@am__objects_3 = color-slang.lo tty-slang.lo
@@ -196,9 +187,9 @@ am__depfiles_remade = ./$(DEPDIR)/color-
 	./$(DEPDIR)/color-ncurses.Plo ./$(DEPDIR)/color-slang.Plo \
 	./$(DEPDIR)/color.Plo ./$(DEPDIR)/key.Plo \
 	./$(DEPDIR)/keyxdef.Plo ./$(DEPDIR)/mouse.Plo \
-	./$(DEPDIR)/tty-ncurses.Plo ./$(DEPDIR)/tty-slang.Plo \
-	./$(DEPDIR)/tty.Plo ./$(DEPDIR)/win.Plo \
-	./$(DEPDIR)/x11conn.Plo
+	./$(DEPDIR)/tty-internal.Plo ./$(DEPDIR)/tty-ncurses.Plo \
+	./$(DEPDIR)/tty-slang.Plo ./$(DEPDIR)/tty.Plo \
+	./$(DEPDIR)/win.Plo ./$(DEPDIR)/x11conn.Plo
 am__mv = mv -f
 COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
@@ -247,7 +238,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -255,18 +245,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -306,10 +293,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -317,13 +301,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -331,12 +309,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -344,24 +317,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -395,7 +360,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -407,12 +371,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -487,8 +447,8 @@ noinst_LTLIBRARIES = libmctty.la
 @USE_SCREEN_SLANG_TRUE@	tty-slang.c tty-slang.h
 
 TTY_SRC = color-internal.c color-internal.h color.c color.h key.c \
-	key.h keyxdef.c mouse.c mouse.h tty.c tty.h tty-internal.h \
-	win.c win.h $(am__append_1)
+	key.h keyxdef.c mouse.c mouse.h tty-internal.c tty-internal.h \
+	tty.c tty.h win.c win.h $(am__append_1)
 libmctty_la_SOURCES = $(TTY_SRC) $(TTY_SCREEN_SRC)
 AM_CPPFLAGS = -I$(top_srcdir) $(am__append_2) $(am__append_3)
 all: all-am
@@ -552,6 +512,7 @@ distclean-compile:
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/key.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/keyxdef.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mouse.Plo@am__quote@ # am--include-marker
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tty-internal.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tty-ncurses.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tty-slang.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tty.Plo@am__quote@ # am--include-marker
@@ -723,6 +684,7 @@ distclean: distclean-am
 	-rm -f ./$(DEPDIR)/key.Plo
 	-rm -f ./$(DEPDIR)/keyxdef.Plo
 	-rm -f ./$(DEPDIR)/mouse.Plo
+	-rm -f ./$(DEPDIR)/tty-internal.Plo
 	-rm -f ./$(DEPDIR)/tty-ncurses.Plo
 	-rm -f ./$(DEPDIR)/tty-slang.Plo
 	-rm -f ./$(DEPDIR)/tty.Plo
@@ -780,6 +742,7 @@ maintainer-clean: maintainer-clean-am
 	-rm -f ./$(DEPDIR)/key.Plo
 	-rm -f ./$(DEPDIR)/keyxdef.Plo
 	-rm -f ./$(DEPDIR)/mouse.Plo
+	-rm -f ./$(DEPDIR)/tty-internal.Plo
 	-rm -f ./$(DEPDIR)/tty-ncurses.Plo
 	-rm -f ./$(DEPDIR)/tty-slang.Plo
 	-rm -f ./$(DEPDIR)/tty.Plo
diff -urpN mc-4.8.23/lib/tty/key.c mc-4.8.24/lib/tty/key.c
--- mc-4.8.23/lib/tty/key.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/tty/key.c	2020-01-01 19:52:34.000000000 +0400
@@ -40,9 +40,13 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
+#ifdef HAVE_SYS_SELECT_H
+#include <sys/select.h>
+#else
 #include <sys/time.h>
 #include <sys/types.h>
 #include <unistd.h>
+#endif
 
 #include "lib/global.h"
 
@@ -2028,7 +2032,7 @@ tty_get_event (struct Gpm_Event *event,
             }
         }
 
-        if (!block || mc_global.tty.winch_flag != 0)
+        if (!block || tty_got_winch ())
         {
             time_addr = &time_out;
             time_out.tv_sec = 0;
@@ -2048,7 +2052,7 @@ tty_get_event (struct Gpm_Event *event,
         {
             if (redo_event)
                 return EV_MOUSE;
-            if (!block || mc_global.tty.winch_flag != 0)
+            if (!block || tty_got_winch ())
                 return EV_NONE;
             vfs_timeout_handler ();
         }
diff -urpN mc-4.8.23/lib/tty/tty-internal.c mc-4.8.24/lib/tty/tty-internal.c
--- mc-4.8.23/lib/tty/tty-internal.c	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/lib/tty/tty-internal.c	2020-01-01 19:52:34.000000000 +0400
@@ -0,0 +1,104 @@
+/*
+   Internal stuff of the terminal controlling library.
+
+   Copyright (C) 2019
+   Free Software Foundation, Inc.
+
+   Written by:
+   Andrew Borodin <aborodin@vmail.ru>, 2019.
+
+   This file is part of the Midnight Commander.
+
+   The Midnight Commander is free software: you can redistribute it
+   and/or modify it under the terms of the GNU General Public License as
+   published by the Free Software Foundation, either version 3 of the License,
+   or (at your option) any later version.
+
+   The Midnight Commander is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.
+
+   You should have received a copy of the GNU General Public License
+   along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ */
+
+/** \file
+ *  \brief Source: internal stuff of the terminal controlling library.
+ */
+
+#include <config.h>
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <unistd.h>
+#include <fcntl.h>
+
+#include "lib/global.h"
+
+#include "tty-internal.h"
+
+/*** global variables ****************************************************************************/
+
+/* pipe to handle SIGWINCH */
+int sigwinch_pipe[2];
+
+/*** file scope macro definitions ****************************************************************/
+
+/*** global variables ****************************************************************************/
+
+/*** file scope type declarations ****************************************************************/
+
+/*** file scope variables ************************************************************************/
+
+/* --------------------------------------------------------------------------------------------- */
+/*** file scope functions ************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
+
+/* --------------------------------------------------------------------------------------------- */
+/*** public functions ****************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
+
+void
+tty_create_winch_pipe (void)
+{
+    int fd_flags;
+
+    if (pipe (sigwinch_pipe) == -1)
+    {
+        perror (_("Cannot create pipe for SIGWINCH"));
+        exit (EXIT_FAILURE);
+    }
+
+    /* If we read from an empty pipe, then read(2) will block until data is available.
+     * If we write to a full pipe, then write(2) blocks until sufficient data has been read
+     * from the pipe to allow the write to complete..
+     * Therefore, use nonblocking I/O.
+     */
+
+    fd_flags = fcntl (sigwinch_pipe[0], F_GETFL, NULL);
+    if (fd_flags != -1)
+    {
+        fd_flags |= O_NONBLOCK | O_CLOEXEC;
+        fd_flags = fcntl (sigwinch_pipe[0], F_SETFL, fd_flags);
+    }
+    if (fd_flags == -1)
+    {
+        perror (_("Cannot configure write end of SIGWINCH pipe"));
+        exit (EXIT_FAILURE);
+    }
+
+    fd_flags = fcntl (sigwinch_pipe[1], F_GETFL, NULL);
+    if (fd_flags != -1)
+    {
+        fd_flags |= O_NONBLOCK | O_CLOEXEC;
+        fd_flags = fcntl (sigwinch_pipe[1], F_SETFL, fd_flags);
+    }
+    if (fd_flags == -1)
+    {
+        perror (_("Cannot configure read end of SIGWINCH pipe"));
+        exit (EXIT_FAILURE);
+    }
+}
+
+/* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/tty/tty-internal.h mc-4.8.24/lib/tty/tty-internal.h
--- mc-4.8.23/lib/tty/tty-internal.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/tty/tty-internal.h	2020-01-01 19:52:34.000000000 +0400
@@ -1,6 +1,6 @@
 
 /** \file tty-internal.h
- *  \brief Header: internal suff of the terminal controlling library
+ *  \brief Header: internal stuff of the terminal controlling library
  */
 
 #ifndef MC__TTY_INTERNAL_H
@@ -30,11 +30,17 @@ extern gboolean mouse_enabled;
 extern char *smcup;
 extern char *rmcup;
 
+/* pipe to handle SIGWINCH */
+extern int sigwinch_pipe[2];
+
 /*** declarations of public functions ************************************************************/
 
+void tty_create_winch_pipe (void);
+
 char *mc_tty_normalize_from_utf8 (const char *);
 void tty_init_xterm_support (gboolean is_xterm);
 int tty_lowlevel_getch (void);
 
 /*** inline functions ****************************************************************************/
+
 #endif /* MC_TTY_INTERNAL_H */
diff -urpN mc-4.8.23/lib/tty/tty-ncurses.c mc-4.8.24/lib/tty/tty-ncurses.c
--- mc-4.8.23/lib/tty/tty-ncurses.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/tty/tty-ncurses.c	2020-01-01 19:52:34.000000000 +0400
@@ -102,6 +102,8 @@ tty_setup_sigwinch (void (*handler) (int
 #endif /* SA_RESTART */
     sigaction (SIGWINCH, &act, &oact);
 #endif /* SIGWINCH */
+
+    tty_create_winch_pipe ();
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -109,9 +111,12 @@ tty_setup_sigwinch (void (*handler) (int
 static void
 sigwinch_handler (int dummy)
 {
+    ssize_t n = 0;
+
     (void) dummy;
 
-    mc_global.tty.winch_flag = 1;
+    n = write (sigwinch_pipe[1], "", 1);
+    (void) n;
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/tty/tty-slang.c mc-4.8.24/lib/tty/tty-slang.c
--- mc-4.8.23/lib/tty/tty-slang.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/tty/tty-slang.c	2020-01-01 19:52:34.000000000 +0400
@@ -139,6 +139,7 @@ static void
 tty_setup_sigwinch (void (*handler) (int))
 {
     (void) SLsignal (SIGWINCH, handler);
+    tty_create_winch_pipe ();
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -146,9 +147,13 @@ tty_setup_sigwinch (void (*handler) (int
 static void
 sigwinch_handler (int dummy)
 {
+    ssize_t n = 0;
+
     (void) dummy;
 
-    mc_global.tty.winch_flag = 1;
+    n = write (sigwinch_pipe[1], "", 1);
+    (void) n;
+
     (void) SLsignal (SIGWINCH, sigwinch_handler);
 }
 
@@ -277,10 +282,15 @@ tty_init (gboolean mouse_enable, gboolea
      * string such as "linux" or "xterm" S-Lang will go on, but the
      * terminal size and several other variables won't be initialized
      * (as of S-Lang 1.4.4). Detect it and abort. Also detect extremely
-     * small, large and negative screen dimensions.
+     * small screen dimensions.
      */
     if ((COLS < 10) || (LINES < 5)
-        || (COLS > SLTT_MAX_SCREEN_COLS) || (LINES > SLTT_MAX_SCREEN_ROWS))
+#if SLANG_VERSION < 20303
+        /* Beginning from pre2.3.3-8 (55f58798c267d76a1b93d0d916027b71a10ac1ee),
+           these limitations were eliminated. */
+        || (COLS > SLTT_MAX_SCREEN_COLS) || (LINES > SLTT_MAX_SCREEN_ROWS)
+#endif
+        )
     {
         fprintf (stderr,
                  _("Screen size %dx%d is not supported.\n"
@@ -295,23 +305,7 @@ tty_init (gboolean mouse_enable, gboolea
     if (mc_global.tty.ugly_line_drawing)
         SLtt_Has_Alt_Charset = 0;
 
-    /* If SLang uses fileno(stderr) for terminal input MC will hang
-       if we call SLang_getkey between calls to open_error_pipe and
-       close_error_pipe, e.g. when we do a growing view of an gzipped
-       file. */
-    if (SLang_TT_Read_FD == fileno (stderr))
-        SLang_TT_Read_FD = fileno (stdin);
-
-    if (tcgetattr (SLang_TT_Read_FD, &new_mode) == 0)
-    {
-#ifdef VDSUSP
-        new_mode.c_cc[VDSUSP] = NULL_VALUE;     /* to ignore ^Y */
-#endif
-#ifdef VLNEXT
-        new_mode.c_cc[VLNEXT] = NULL_VALUE;     /* to ignore ^V */
-#endif
-        tcsetattr (SLang_TT_Read_FD, TCSADRAIN, &new_mode);
-    }
+    tcgetattr (SLang_TT_Read_FD, &new_mode);
 
     tty_reset_prog_mode ();
     load_terminfo_keys ();
diff -urpN mc-4.8.23/lib/tty/tty.c mc-4.8.24/lib/tty/tty.c
--- mc-4.8.23/lib/tty/tty.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/tty/tty.c	2020-01-01 19:52:34.000000000 +0400
@@ -30,10 +30,18 @@
 
 #include <config.h>
 
+#include <errno.h>
 #include <signal.h>
 #include <stdarg.h>
 #include <stdlib.h>
 #include <string.h>             /* memset() */
+
+#ifdef HAVE_SYS_SELECT_H
+#include <sys/select.h>
+#else
+#include <sys/time.h>
+#include <sys/types.h>
+#endif
 #include <unistd.h>             /* exit() */
 
 #ifdef HAVE_SYS_IOCTL_H
@@ -163,6 +171,49 @@ tty_got_interrupt (void)
 }
 
 /* --------------------------------------------------------------------------------------------- */
+
+gboolean
+tty_got_winch (void)
+{
+    fd_set fdset;
+    /* *INDENT-OFF* */
+    /* instant timeout */
+    struct timeval timeout = { .tv_sec = 0, .tv_usec = 0 };
+    /* *INDENT-ON* */
+    int ok;
+
+    FD_ZERO (&fdset);
+    FD_SET (sigwinch_pipe[0], &fdset);
+
+    while ((ok = select (sigwinch_pipe[0] + 1, &fdset, NULL, NULL, &timeout)) < 0)
+        if (errno != EINTR)
+        {
+            perror (_("Cannot check SIGWINCH pipe"));
+            exit (EXIT_FAILURE);
+        }
+
+    return (ok != 0 && FD_ISSET (sigwinch_pipe[0], &fdset));
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+void
+tty_flush_winch (void)
+{
+    ssize_t n;
+
+    /* merge all SIGWINCH events raised to this moment */
+    do
+    {
+        char x[16];
+
+        /* read multiple events at a time  */
+        n = read (sigwinch_pipe[0], &x, sizeof (x));
+    }
+    while (n > 0 || (n == -1 && errno == EINTR));
+}
+
+/* --------------------------------------------------------------------------------------------- */
 
 void
 tty_print_one_hline (gboolean single)
diff -urpN mc-4.8.23/lib/tty/tty.h mc-4.8.24/lib/tty/tty.h
--- mc-4.8.23/lib/tty/tty.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/tty/tty.h	2020-01-01 19:52:34.000000000 +0400
@@ -80,6 +80,9 @@ extern void tty_enable_interrupt_key (vo
 extern void tty_disable_interrupt_key (void);
 extern gboolean tty_got_interrupt (void);
 
+extern gboolean tty_got_winch (void);
+extern void tty_flush_winch (void);
+
 extern void tty_reset_prog_mode (void);
 extern void tty_reset_shell_mode (void);
 
diff -urpN mc-4.8.23/lib/tty/win.c mc-4.8.24/lib/tty/win.c
--- mc-4.8.23/lib/tty/win.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/tty/win.c	2020-01-01 19:52:34.000000000 +0400
@@ -32,8 +32,13 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
+#ifdef HAVE_SYS_SELECT_H
+#include <sys/select.h>
+#else
+#include <sys/time.h>
 #include <sys/types.h>
 #include <unistd.h>
+#endif
 
 #include "lib/global.h"
 #include "lib/util.h"           /* is_printable() */
@@ -98,8 +103,8 @@ show_rxvt_contents (int starty, unsigned
     unsigned char *k;
     int bytes, i, j, cols = 0;
 
-    y1 += (mc_global.keybar_visible != 0);      /* i don't knwo why we need this - paul */
-    y2 += (mc_global.keybar_visible != 0);
+    y1 += mc_global.keybar_visible != 0 ? 1 : 0;        /* i don't knwo why we need this - paul */
+    y2 += mc_global.keybar_visible != 0 ? 1 : 0;
     while (anything_ready ())
         tty_lowlevel_getch ();
 
diff -urpN mc-4.8.23/lib/utilunix.c mc-4.8.24/lib/utilunix.c
--- mc-4.8.23/lib/utilunix.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/utilunix.c	2020-01-01 19:52:34.000000000 +0400
@@ -956,7 +956,7 @@ custom_canonicalize_pathname (char *path
                     vclass = vfs_prefix_to_class (vfs_prefix);
                     *(s - url_delim_len) = *VFS_PATH_URL_DELIMITER;
 
-                    if (vclass != NULL && (vclass->flags & VFS_REMOTE) != 0)
+                    if (vclass != NULL && (vclass->flags & VFSF_REMOTE) != 0)
                     {
                         s = vfs_prefix;
                         continue;
diff -urpN mc-4.8.23/lib/vfs/Makefile.in mc-4.8.24/lib/vfs/Makefile.in
--- mc-4.8.23/lib/vfs/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/lib/vfs/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -91,24 +91,14 @@ host_triplet = @host@
 @ENABLE_VFS_NET_TRUE@am__append_1 = netutil.c netutil.h
 subdir = lib/vfs
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -237,7 +227,6 @@ am__DIST_COMMON = $(srcdir)/Makefile.in
 	README
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -245,18 +234,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -296,10 +282,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -307,13 +290,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -321,12 +298,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -334,24 +306,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -385,7 +349,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -397,12 +360,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/lib/vfs/direntry.c mc-4.8.24/lib/vfs/direntry.c
--- mc-4.8.23/lib/vfs/direntry.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/vfs/direntry.c	2020-01-01 19:52:34.000000000 +0400
@@ -58,10 +58,14 @@
 #include <config.h>
 
 #include <errno.h>
-#include <time.h>
-#include <sys/time.h>           /* gettimeofday() */
 #include <inttypes.h>           /* uintmax_t */
 #include <stdarg.h>
+#ifdef HAVE_SYS_SELECT_H
+#include <sys/select.h>
+#endif
+#include <sys/time.h>           /* gettimeofday() */
+#include <sys/types.h>
+#include <unistd.h>
 
 #include "lib/global.h"
 
@@ -196,7 +200,7 @@ vfs_s_find_entry_tree (struct vfs_class
         for (pseg = 0; path[pseg] != '\0' && !IS_PATH_SEP (path[pseg]); pseg++)
             ;
 
-        for (iter = root->subdir; iter != NULL; iter = g_list_next (iter))
+        for (iter = g_queue_peek_head_link (root->subdir); iter != NULL; iter = g_list_next (iter))
         {
             ent = VFS_ENTRY (iter->data);
             if (strlen (ent->name) == pseg && strncmp (ent->name, path, pseg) == 0)
@@ -259,7 +263,7 @@ vfs_s_find_entry_linear (struct vfs_clas
         return ent;
     }
 
-    iter = g_list_find_custom (root->subdir, path, (GCompareFunc) vfs_s_entry_compare);
+    iter = g_queue_find_custom (root->subdir, path, (GCompareFunc) vfs_s_entry_compare);
     ent = iter != NULL ? VFS_ENTRY (iter->data) : NULL;
 
     if (ent != NULL && !VFS_SUBCLASS (me)->dir_uptodate (me, ent->ino))
@@ -286,7 +290,7 @@ vfs_s_find_entry_linear (struct vfs_clas
 
         vfs_s_insert_entry (me, root, ent);
 
-        iter = g_list_find_custom (root->subdir, path, (GCompareFunc) vfs_s_entry_compare);
+        iter = g_queue_find_custom (root->subdir, path, (GCompareFunc) vfs_s_entry_compare);
         ent = iter != NULL ? VFS_ENTRY (iter->data) : NULL;
     }
     if (ent == NULL)
@@ -441,7 +445,7 @@ vfs_s_opendir (const vfs_path_t * vpath)
     }
 #endif
     info = g_new (struct dirhandle, 1);
-    info->cur = dir->subdir;
+    info->cur = g_queue_peek_head_link (dir->subdir);
     info->dir = dir;
 
     return info;
@@ -668,7 +672,7 @@ vfs_s_close (void *fh)
         sub->linear_close (me, fh);
     if (sub->fh_close != NULL)
         res = sub->fh_close (me, fh);
-    if ((me->flags & VFS_USETMP) != 0 && file->changed && sub->file_store != NULL)
+    if ((me->flags & VFSF_USETMP) != 0 && file->changed && sub->file_store != NULL)
     {
         char *s;
 
@@ -760,7 +764,7 @@ vfs_s_getlocalcopy (const vfs_path_t * v
         const struct vfs_class *me;
 
         me = vfs_path_get_by_index (vpath, -1)->class;
-        if ((me->flags & VFS_USETMP) != 0 && fh->ino != NULL)
+        if ((me->flags & VFSF_USETMP) != 0 && fh->ino != NULL)
             local = vfs_path_from_str_flags (fh->ino->localname, VPF_NO_CANON);
 
         vfs_s_close (fh);
@@ -888,6 +892,7 @@ vfs_s_new_inode (struct vfs_class *me, s
     if (initstat != NULL)
         ino->st = *initstat;
     ino->super = super;
+    ino->subdir = g_queue_new ();
     ino->st.st_nlink = 0;
     ino->st.st_ino = VFS_SUBCLASS (me)->inode_counter++;
     ino->st.st_dev = VFS_SUBCLASS (me)->rdev;
@@ -914,12 +919,20 @@ vfs_s_free_inode (struct vfs_class *me,
         return;
     }
 
-    while (ino->subdir != NULL)
-        vfs_s_free_entry (me, VFS_ENTRY (ino->subdir->data));
+    while (g_queue_get_length (ino->subdir) != 0)
+    {
+        struct vfs_s_entry *entry;
+
+        entry = VFS_ENTRY (g_queue_peek_head (ino->subdir));
+        vfs_s_free_entry (me, entry);
+    }
+
+    g_queue_free (ino->subdir);
+    ino->subdir = NULL;
 
     CALL (free_inode) (me, ino);
     g_free (ino->linkname);
-    if ((me->flags & VFS_USETMP) != 0 && ino->localname != NULL)
+    if ((me->flags & VFSF_USETMP) != 0 && ino->localname != NULL)
     {
         unlink (ino->localname);
         g_free (ino->localname);
@@ -951,7 +964,7 @@ void
 vfs_s_free_entry (struct vfs_class *me, struct vfs_s_entry *ent)
 {
     if (ent->dir != NULL)
-        ent->dir->subdir = g_list_remove (ent->dir->subdir, ent);
+        g_queue_remove (ent->dir->subdir, ent);
 
     MC_PTR_FREE (ent->name);
 
@@ -974,7 +987,7 @@ vfs_s_insert_entry (struct vfs_class *me
     ent->dir = dir;
 
     ent->ino->st.st_nlink++;
-    dir->subdir = g_list_append (dir->subdir, ent);
+    g_queue_push_tail (dir->subdir, ent);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1082,7 +1095,7 @@ vfs_s_find_inode (struct vfs_class *me,
 {
     struct vfs_s_entry *ent;
 
-    if (((me->flags & VFS_REMOTE) == 0) && (*path == '\0'))
+    if (((me->flags & VFSF_REMOTE) == 0) && (*path == '\0'))
         return super->root;
 
     ent = VFS_SUBCLASS (me)->find_entry (me, super->root, path, follow, flags);
@@ -1234,7 +1247,7 @@ vfs_s_fullpath (struct vfs_class *me, st
     if (ino->ent == NULL)
         ERRNOR (EAGAIN, NULL);
 
-    if ((me->flags & VFS_USETMP) == 0)
+    if ((me->flags & VFSF_USETMP) == 0)
     {
         /* archives */
         char *path;
@@ -1326,7 +1339,7 @@ vfs_s_open (const vfs_path_t * vpath, in
         ent = vfs_s_generate_entry (path_element->class, name, dir, 0755);
         ino = ent->ino;
         vfs_s_insert_entry (path_element->class, dir, ent);
-        if ((VFS_CLASS (s)->flags & VFS_USETMP) != 0)
+        if ((VFS_CLASS (s)->flags & VFSF_USETMP) != 0)
         {
             int tmp_handle;
             vfs_path_t *tmp_vpath;
@@ -1373,7 +1386,7 @@ vfs_s_open (const vfs_path_t * vpath, in
         }
     }
 
-    if ((VFS_CLASS (s)->flags & VFS_USETMP) != 0 && fh->ino->localname != NULL)
+    if ((VFS_CLASS (s)->flags & VFSF_USETMP) != 0 && fh->ino->localname != NULL)
     {
         fh->handle = open (fh->ino->localname, NO_LINEAR (flags), mode);
         if (fh->handle == -1)
@@ -1431,7 +1444,7 @@ vfs_s_retrieve_file (struct vfs_class *m
     vfs_path_t *tmp_vpath;
     struct vfs_s_subclass *s = VFS_SUBCLASS (me);
 
-    if ((me->flags & VFS_USETMP) == 0)
+    if ((me->flags & VFSF_USETMP) == 0)
         return (-1);
 
     handle = vfs_mkstemps (&tmp_vpath, me->name, ino->ent->name);
@@ -1510,7 +1523,7 @@ vfs_init_class (struct vfs_class *vclass
     vclass->open = vfs_s_open;
     vclass->close = vfs_s_close;
     vclass->read = vfs_s_read;
-    if ((vclass->flags & VFS_READONLY) == 0)
+    if ((vclass->flags & VFSF_READONLY) == 0)
         vclass->write = vfs_s_write;
     vclass->opendir = vfs_s_opendir;
     vclass->readdir = vfs_s_readdir;
@@ -1526,7 +1539,7 @@ vfs_init_class (struct vfs_class *vclass
     vclass->nothingisopen = vfs_s_nothingisopen;
     vclass->free = vfs_s_free;
     vclass->setctl = vfs_s_setctl;
-    if ((vclass->flags & VFS_USETMP) != 0)
+    if ((vclass->flags & VFSF_USETMP) != 0)
     {
         vclass->getlocalcopy = vfs_s_getlocalcopy;
         vclass->ungetlocalcopy = vfs_s_ungetlocalcopy;
@@ -1549,9 +1562,9 @@ vfs_init_subclass (struct vfs_s_subclass
     start = (char *) sub + sizeof (struct vfs_class);
     memset (start, 0, len);
 
-    if ((vclass->flags & VFS_USETMP) != 0)
+    if ((vclass->flags & VFSF_USETMP) != 0)
         sub->find_entry = vfs_s_find_entry_linear;
-    else if ((vclass->flags & VFS_REMOTE) != 0)
+    else if ((vclass->flags & VFSF_REMOTE) != 0)
         sub->find_entry = vfs_s_find_entry_linear;
     else
         sub->find_entry = vfs_s_find_entry_tree;
@@ -1708,20 +1721,22 @@ vfs_s_normalize_filename_leading_spaces
 {
     GList *iter;
 
-    for (iter = root_inode->subdir; iter != NULL; iter = g_list_next (iter))
+    for (iter = g_queue_peek_head_link (root_inode->subdir); iter != NULL;
+         iter = g_list_next (iter))
     {
         struct vfs_s_entry *entry = VFS_ENTRY (iter->data);
 
         if ((size_t) entry->ino->data_offset > final_num_spaces)
         {
-            char *source_name = entry->name;
-            char *spacer;
+            char *source_name, *spacer;
 
+            source_name = entry->name;
             spacer = g_strnfill (entry->ino->data_offset - final_num_spaces, ' ');
-            entry->name = g_strdup_printf ("%s%s", spacer, source_name);
+            entry->name = g_strconcat (spacer, source_name, (char *) NULL);
             g_free (spacer);
             g_free (source_name);
         }
+
         entry->ino->data_offset = -1;
     }
 }
diff -urpN mc-4.8.23/lib/vfs/gc.c mc-4.8.24/lib/vfs/gc.c
--- mc-4.8.23/lib/vfs/gc.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/vfs/gc.c	2020-01-01 19:52:34.000000000 +0400
@@ -127,7 +127,7 @@ vfs_stamp_compare (gconstpointer a, gcon
     const struct vfs_stamping *vsa = (const struct vfs_stamping *) a;
     const struct vfs_stamping *vsb = (const struct vfs_stamping *) b;
 
-    return (vsa->v == vsb->v && vsa->id == vsb->id) ? 0 : 1;
+    return (vsa == NULL || vsb == NULL || (vsa->v == vsb->v && vsa->id == vsb->id)) ? 0 : 1;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -135,7 +135,7 @@ vfs_stamp_compare (gconstpointer a, gcon
 static void
 vfs_addstamp (struct vfs_class *v, vfsid id)
 {
-    if ((v->flags & VFS_LOCAL) == 0 && id != NULL && !vfs_stamp (v, id))
+    if ((v->flags & VFSF_LOCAL) == 0 && id != NULL && !vfs_stamp (v, id))
     {
         struct vfs_stamping *stamp;
 
@@ -163,7 +163,7 @@ vfs_stamp (struct vfs_class *v, vfsid id
     gboolean ret = FALSE;
 
     stamp = g_slist_find_custom (stamps, &what, vfs_stamp_compare);
-    if (stamp != NULL)
+    if (stamp != NULL && stamp->data != NULL)
     {
         gettimeofday (&(VFS_STAMPING (stamp->data)->time), NULL);
         ret = TRUE;
diff -urpN mc-4.8.23/lib/vfs/interface.c mc-4.8.24/lib/vfs/interface.c
--- mc-4.8.23/lib/vfs/interface.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/vfs/interface.c	2020-01-01 19:52:34.000000000 +0400
@@ -178,7 +178,7 @@ mc_def_ungetlocalcopy (const vfs_path_t
     if (fdin != -1)
         close (fdin);
     unlink (local);
-    return -1;
+    return (-1);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -193,12 +193,13 @@ mc_open (const vfs_path_t * vpath, int f
     const vfs_path_element_t *path_element;
 
     if (vpath == NULL)
-        return -1;
+        return (-1);
 
     /* Get the mode flag */
-    if (flags & O_CREAT)
+    if ((flags & O_CREAT) != 0)
     {
         va_list ap;
+
         va_start (ap, flags);
         /* We have to use PROMOTED_MODE_T instead of mode_t. Doing 'va_arg (ap, mode_t)'
          * fails on systems where 'mode_t' is smaller than 'int' because of C's "default
@@ -211,6 +212,7 @@ mc_open (const vfs_path_t * vpath, int f
     if (vfs_path_element_valid (path_element) && path_element->class->open != NULL)
     {
         void *info;
+
         /* open must be supported */
         info = path_element->class->open (vpath, flags, mode);
         if (info == NULL)
@@ -235,13 +237,11 @@ int mc_##name inarg \
     const vfs_path_element_t *path_element; \
 \
     if (vpath == NULL) \
-        return -1; \
+        return (-1); \
 \
     path_element = vfs_path_get_by_index (vpath, -1); \
     if (!vfs_path_element_valid (path_element)) \
-    { \
-        return -1; \
-    } \
+        return (-1); \
 \
     result = path_element->class->name != NULL ? path_element->class->name callarg : -1; \
     if (result == -1) \
@@ -267,10 +267,7 @@ mc_symlink (const vfs_path_t * vpath1, c
 {
     int result = -1;
 
-    if (vpath1 == NULL)
-        return -1;
-
-    if (vpath1 != NULL)
+    if (vpath1 != NULL && vpath2 != NULL)
     {
         const vfs_path_element_t *path_element;
 
@@ -300,11 +297,14 @@ ssize_t mc_##name (int handle, C void *b
     struct vfs_class *vfs; \
     void *fsinfo = NULL; \
     int result; \
+\
     if (handle == -1) \
-        return -1; \
+        return (-1); \
+\
     vfs = vfs_class_find_by_handle (handle, &fsinfo); \
     if (vfs == NULL) \
-        return -1; \
+        return (-1); \
+\
     result = vfs->name != NULL ? vfs->name (fsinfo, buf, count) : -1; \
     if (result == -1) \
         errno = vfs->name != NULL ? vfs_ferrno (vfs) : E_NOTSUPP; \
@@ -328,7 +328,7 @@ int mc_##name (const vfs_path_t *vpath1,
     const vfs_path_element_t *path_element2; \
 \
     if (vpath1 == NULL || vpath2 == NULL) \
-        return -1; \
+        return (-1); \
 \
     path_element1 = vfs_path_get_by_index (vpath1, (-1)); \
     path_element2 = vfs_path_get_by_index (vpath2, (-1)); \
@@ -337,12 +337,11 @@ int mc_##name (const vfs_path_t *vpath1,
         path_element1->class != path_element2->class) \
     { \
         errno = EXDEV; \
-        return -1; \
-    }\
+        return (-1); \
+    } \
 \
     result = path_element1->class->name != NULL \
-        ? path_element1->class->name (vpath1, vpath2) \
-        : -1; \
+        ? path_element1->class->name (vpath1, vpath2) : -1; \
     if (result == -1) \
         errno = path_element1->class->name != NULL ? vfs_ferrno (path_element1->class) : E_NOTSUPP; \
     return result; \
@@ -396,18 +395,18 @@ mc_close (int handle)
     int result;
 
     if (handle == -1)
-        return -1;
+        return (-1);
 
     vfs = vfs_class_find_by_handle (handle, &fsinfo);
     if (vfs == NULL || fsinfo == NULL)
-        return -1;
+        return (-1);
 
     if (handle < 3)
         return close (handle);
 
-    if (!vfs->close)
+    if (vfs->close == NULL)
         vfs_die ("VFS must support close.\n");
-    result = (*vfs->close) (fsinfo);
+    result = vfs->close (fsinfo);
     vfs_free_handle (handle);
     if (result == -1)
         errno = vfs_ferrno (vfs);
@@ -428,15 +427,13 @@ mc_opendir (const vfs_path_t * vpath)
         return NULL;
 
     path_element = (vfs_path_element_t *) vfs_path_get_by_index (vpath, -1);
-
     if (!vfs_path_element_valid (path_element))
     {
         errno = E_NOTSUPP;
         return NULL;
     }
 
-    info = path_element->class->opendir ? (*path_element->class->opendir) (vpath) : NULL;
-
+    info = path_element->class->opendir ? path_element->class->opendir (vpath) : NULL;
     if (info == NULL)
     {
         errno = path_element->class->opendir ? vfs_ferrno (path_element->class) : E_NOTSUPP;
@@ -470,7 +467,7 @@ mc_readdir (DIR * dirp)
     struct dirent *entry = NULL;
     vfs_path_element_t *vfs_path_element;
 
-    if (!mc_readdir_result)
+    if (mc_readdir_result == NULL)
     {
         /* We can't just allocate struct dirent as (see man dirent.h)
          * struct dirent has VERY nonnaive semantics of allocating
@@ -485,11 +482,12 @@ mc_readdir (DIR * dirp)
         mc_readdir_result = (struct dirent *) g_malloc (sizeof (struct dirent) + MAXNAMLEN + 1);
     }
 
-    if (!dirp)
+    if (dirp == NULL)
     {
         errno = EFAULT;
         return NULL;
     }
+
     handle = *(int *) dirp;
 
     vfs = vfs_class_find_by_handle (handle, &fsinfo);
@@ -497,9 +495,9 @@ mc_readdir (DIR * dirp)
         return NULL;
 
     vfs_path_element = (vfs_path_element_t *) fsinfo;
-    if (vfs->readdir)
+    if (vfs->readdir != NULL)
     {
-        entry = (*vfs->readdir) (vfs_path_element->dir.info);
+        entry = vfs->readdir (vfs_path_element->dir.info);
         if (entry == NULL)
             return NULL;
 
@@ -562,13 +560,12 @@ mc_stat (const vfs_path_t * vpath, struc
     const vfs_path_element_t *path_element;
 
     if (vpath == NULL)
-        return -1;
+        return (-1);
 
     path_element = vfs_path_get_by_index (vpath, -1);
-
     if (vfs_path_element_valid (path_element))
     {
-        result = path_element->class->stat ? (*path_element->class->stat) (vpath, buf) : -1;
+        result = path_element->class->stat ? path_element->class->stat (vpath, buf) : -1;
         if (result == -1)
             errno = path_element->class->name ? vfs_ferrno (path_element->class) : E_NOTSUPP;
     }
@@ -585,13 +582,12 @@ mc_lstat (const vfs_path_t * vpath, stru
     const vfs_path_element_t *path_element;
 
     if (vpath == NULL)
-        return -1;
+        return (-1);
 
     path_element = vfs_path_get_by_index (vpath, -1);
-
     if (vfs_path_element_valid (path_element))
     {
-        result = path_element->class->lstat ? (*path_element->class->lstat) (vpath, buf) : -1;
+        result = path_element->class->lstat ? path_element->class->lstat (vpath, buf) : -1;
         if (result == -1)
             errno = path_element->class->name ? vfs_ferrno (path_element->class) : E_NOTSUPP;
     }
@@ -609,13 +605,13 @@ mc_fstat (int handle, struct stat *buf)
     int result;
 
     if (handle == -1)
-        return -1;
+        return (-1);
 
     vfs = vfs_class_find_by_handle (handle, &fsinfo);
     if (vfs == NULL)
-        return -1;
+        return (-1);
 
-    result = vfs->fstat ? (*vfs->fstat) (fsinfo, buf) : -1;
+    result = vfs->fstat ? vfs->fstat (fsinfo, buf) : -1;
     if (result == -1)
         errno = vfs->fstat ? vfs_ferrno (vfs) : E_NOTSUPP;
     return result;
@@ -633,7 +629,6 @@ mc_getlocalcopy (const vfs_path_t * path
         return NULL;
 
     path_element = vfs_path_get_by_index (pathname_vpath, -1);
-
     if (vfs_path_element_valid (path_element))
     {
         result = path_element->class->getlocalcopy != NULL ?
@@ -651,20 +646,19 @@ int
 mc_ungetlocalcopy (const vfs_path_t * pathname_vpath, const vfs_path_t * local_vpath,
                    gboolean has_changed)
 {
-    int return_value = -1;
+    int result = -1;
     const vfs_path_element_t *path_element;
 
     if (pathname_vpath == NULL)
-        return -1;
+        return (-1);
 
     path_element = vfs_path_get_by_index (pathname_vpath, -1);
-
     if (vfs_path_element_valid (path_element))
-        return_value = path_element->class->ungetlocalcopy != NULL ?
+        result = path_element->class->ungetlocalcopy != NULL ?
             path_element->class->ungetlocalcopy (pathname_vpath, local_vpath, has_changed) :
             mc_def_ungetlocalcopy (pathname_vpath, local_vpath, has_changed);
 
-    return return_value;
+    return result;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -686,7 +680,7 @@ mc_chdir (const vfs_path_t * vpath)
     vfs_path_t *cd_vpath;
 
     if (vpath == NULL)
-        return -1;
+        return (-1);
 
     if (vpath->relative)
         cd_vpath = vfs_path_to_absolute (vpath);
@@ -694,14 +688,11 @@ mc_chdir (const vfs_path_t * vpath)
         cd_vpath = vfs_path_clone (vpath);
 
     path_element = vfs_path_get_by_index (cd_vpath, -1);
-
     if (!vfs_path_element_valid (path_element) || path_element->class->chdir == NULL)
-    {
         goto error_end;
-    }
 
-    result = (*path_element->class->chdir) (cd_vpath);
 
+    result = path_element->class->chdir (cd_vpath);
     if (result == -1)
     {
         errno = vfs_ferrno (path_element->class);
@@ -750,7 +741,7 @@ mc_chdir (const vfs_path_t * vpath)
 
   error_end:
     vfs_path_free (cd_vpath);
-    return -1;
+    return (-1);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -763,13 +754,13 @@ mc_lseek (int fd, off_t offset, int when
     off_t result;
 
     if (fd == -1)
-        return -1;
+        return (-1);
 
     vfs = vfs_class_find_by_handle (fd, &fsinfo);
     if (vfs == NULL)
-        return -1;
+        return (-1);
 
-    result = vfs->lseek ? (*vfs->lseek) (fsinfo, offset, whence) : -1;
+    result = vfs->lseek ? vfs->lseek (fsinfo, offset, whence) : -1;
     if (result == -1)
         errno = vfs->lseek ? vfs_ferrno (vfs) : E_NOTSUPP;
     return result;
@@ -840,7 +831,7 @@ mc_tmpdir (void)
     const char *error = NULL;
 
     /* Check if already correctly initialized */
-    if (tmpdir && lstat (tmpdir, &st) == 0 && S_ISDIR (st.st_mode) &&
+    if (tmpdir != NULL && lstat (tmpdir, &st) == 0 && S_ISDIR (st.st_mode) &&
         st.st_uid == getuid () && (st.st_mode & 0777) == 0700)
         return tmpdir;
 
@@ -849,8 +840,7 @@ mc_tmpdir (void)
         sys_tmp = TMPDIR_DEFAULT;
 
     pwd = getpwuid (getuid ());
-
-    if (pwd)
+    if (pwd != NULL)
         g_snprintf (buffer, sizeof (buffer), "%s/mc-%s", sys_tmp, pwd->pw_name);
     else
         g_snprintf (buffer, sizeof (buffer), "%s/mc-%lu", sys_tmp, (unsigned long) getuid ());
@@ -886,7 +876,7 @@ mc_tmpdir (void)
         gboolean fallback_ok = FALSE;
         vfs_path_t *test_vpath;
 
-        if (*error)
+        if (*error != '\0')
             fprintf (stderr, error, buffer);
 
         /* Test if sys_tmp is suitable for temporary files */
@@ -924,7 +914,7 @@ mc_tmpdir (void)
 
     tmpdir = buffer;
 
-    if (!error)
+    if (error == NULL)
         g_setenv ("MC_TMPDIR", tmpdir, TRUE);
 
     return tmpdir;
diff -urpN mc-4.8.23/lib/vfs/path.c mc-4.8.24/lib/vfs/path.c
--- mc-4.8.23/lib/vfs/path.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/vfs/path.c	2020-01-01 19:52:34.000000000 +0400
@@ -461,7 +461,7 @@ vfs_path_from_str_uri_parser (char *path
 
         url_delimiter += strlen (VFS_PATH_URL_DELIMITER);
 
-        if (element->class != NULL && (element->class->flags & VFS_REMOTE) != 0)
+        if (element->class != NULL && (element->class->flags & VFSF_REMOTE) != 0)
         {
             char *slash_pointer;
 
@@ -530,7 +530,7 @@ static void
 vfs_path_tokens_add_class_info (const vfs_path_element_t * element, GString * ret_tokens,
                                 GString * element_tokens)
 {
-    if (((element->class->flags & VFS_LOCAL) == 0 || ret_tokens->len > 0)
+    if (((element->class->flags & VFSF_LOCAL) == 0 || ret_tokens->len > 0)
         && element_tokens->len > 0)
     {
         char *url_str;
@@ -595,7 +595,8 @@ vfs_path_strip_home (const char *dir)
 
 #define vfs_append_from_path(appendfrom, is_relative) \
 { \
-    if ((flags & VPF_STRIP_HOME) && element_index == 0 && (element->class->flags & VFS_LOCAL) != 0) \
+    if ((flags & VPF_STRIP_HOME) && element_index == 0 && \
+        (element->class->flags & VFSF_LOCAL) != 0) \
     { \
         char *stripped_home_str; \
         stripped_home_str = vfs_path_strip_home (appendfrom); \
diff -urpN mc-4.8.23/lib/vfs/vfs.c mc-4.8.24/lib/vfs/vfs.c
--- mc-4.8.23/lib/vfs/vfs.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/vfs/vfs.c	2020-01-01 19:52:34.000000000 +0400
@@ -438,7 +438,7 @@ vfs_set_raw_current_dir (const vfs_path_
 gboolean
 vfs_current_is_local (void)
 {
-    return (current_vfs->flags & VFS_LOCAL) != 0;
+    return (current_vfs->flags & VFSF_LOCAL) != 0;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -451,7 +451,7 @@ vfs_file_class_flags (const vfs_path_t *
 
     path_element = vfs_path_get_by_index (vpath, -1);
     if (!vfs_path_element_valid (path_element))
-        return VFS_UNKNOWN;
+        return VFSF_UNKNOWN;
 
     return path_element->class->flags;
 }
@@ -546,7 +546,7 @@ vfs_fill_names (fill_names_f func)
 gboolean
 vfs_file_is_local (const vfs_path_t * vpath)
 {
-    return (vfs_file_class_flags (vpath) & VFS_LOCAL) != 0;
+    return (vfs_file_class_flags (vpath) & VFSF_LOCAL) != 0;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -597,7 +597,7 @@ vfs_setup_cwd (void)
 
     path_element = vfs_path_get_by_index (vfs_get_raw_current_dir (), -1);
 
-    if ((path_element->class->flags & VFS_LOCAL) != 0)
+    if ((path_element->class->flags & VFSF_LOCAL) != 0)
     {
         current_dir = g_get_current_dir ();
         tmp_vpath = vfs_path_from_str (current_dir);
@@ -662,7 +662,7 @@ vfs_preallocate (int dest_vfs_fd, off_t
         return 0;
 
     dest_class = vfs_class_find_by_handle (dest_vfs_fd, &dest_fd);
-    if ((dest_class->flags & VFS_LOCAL) == 0 || dest_fd == NULL)
+    if ((dest_class->flags & VFSF_LOCAL) == 0 || dest_fd == NULL)
         return 0;
 
     return posix_fallocate (*(int *) dest_fd, dest_fsize, src_fsize - dest_fsize);
@@ -682,7 +682,7 @@ vfs_clone_file (int dest_vfs_fd, int src
     struct vfs_class *src_class;
 
     dest_class = vfs_class_find_by_handle (dest_vfs_fd, &dest_fd);
-    if ((dest_class->flags & VFS_LOCAL) == 0)
+    if ((dest_class->flags & VFSF_LOCAL) == 0)
     {
         errno = EOPNOTSUPP;
         return (-1);
@@ -694,7 +694,7 @@ vfs_clone_file (int dest_vfs_fd, int src
     }
 
     src_class = vfs_class_find_by_handle (src_vfs_fd, &src_fd);
-    if ((src_class->flags & VFS_LOCAL) == 0)
+    if ((src_class->flags & VFSF_LOCAL) == 0)
     {
         errno = EOPNOTSUPP;
         return (-1);
diff -urpN mc-4.8.23/lib/vfs/vfs.h mc-4.8.24/lib/vfs/vfs.h
--- mc-4.8.23/lib/vfs/vfs.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/vfs/vfs.h	2020-01-01 19:52:34.000000000 +0400
@@ -111,13 +111,13 @@ typedef struct utimbuf mc_timesbuf_t;
 
 typedef enum
 {
-    VFS_UNKNOWN = 0,
-    VFS_LOCAL = 1 << 0,         /* Class is local (not virtual) filesystem */
-    VFS_NOLINKS = 1 << 1,       /* Hard links not supported */
+    VFSF_UNKNOWN = 0,
+    VFSF_LOCAL = 1 << 0,        /* Class is local (not virtual) filesystem */
+    VFSF_NOLINKS = 1 << 1,      /* Hard links not supported */
 
-    VFS_REMOTE = 1 << 2,
-    VFS_READONLY = 1 << 3,
-    VFS_USETMP = 1 << 4
+    VFSF_REMOTE = 1 << 2,
+    VFSF_READONLY = 1 << 3,
+    VFSF_USETMP = 1 << 4
 } vfs_flags_t;
 
 /* Operations for mc_ctl - on open file */
diff -urpN mc-4.8.23/lib/vfs/xdirentry.h mc-4.8.24/lib/vfs/xdirentry.h
--- mc-4.8.23/lib/vfs/xdirentry.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/vfs/xdirentry.h	2020-01-01 19:52:34.000000000 +0400
@@ -87,7 +87,7 @@ struct vfs_s_inode
     struct vfs_s_entry *ent;    /* Our entry in the parent directory -
                                    use only for directories because they
                                    cannot be hardlinked */
-    GList *subdir;              /* If this is a directory, its entry. List of vfs_s_entry */
+    GQueue *subdir;             /* If this is a directory, its entry. List of vfs_s_entry */
     struct stat st;             /* Parameters of this inode */
     char *linkname;             /* Symlink's contents */
     char *localname;            /* Filename of local file, if we have one */
diff -urpN mc-4.8.23/lib/widget/Makefile.in mc-4.8.24/lib/widget/Makefile.in
--- mc-4.8.23/lib/widget/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/lib/widget/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = lib/widget
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -240,7 +230,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -248,18 +237,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -299,10 +285,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -310,13 +293,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -324,12 +301,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -337,24 +309,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -388,7 +352,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -400,12 +363,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/lib/widget/button.c mc-4.8.24/lib/widget/button.c
--- mc-4.8.23/lib/widget/button.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/button.c	2020-01-01 19:52:34.000000000 +0400
@@ -120,7 +120,7 @@ button_default_callback (Widget * w, Wid
             off = 0;
             break;
         }
-        widget_move (w, 0, b->hotpos + off);
+        widget_gotoyx (w, 0, b->hotpos + off);
         return MSG_HANDLED;
 
     case MSG_DRAW:
@@ -130,7 +130,7 @@ button_default_callback (Widget * w, Wid
             focused = widget_get_state (w, WST_FOCUSED);
 
             widget_selectcolor (w, focused, FALSE);
-            widget_move (w, 0, 0);
+            widget_gotoyx (w, 0, 0);
 
             switch (b->flags)
             {
@@ -169,7 +169,7 @@ button_default_callback (Widget * w, Wid
         }
 
     case MSG_DESTROY:
-        release_hotkey (b->text);
+        hotkey_free (b->text);
         return MSG_HANDLED;
 
     default:
@@ -213,7 +213,7 @@ button_new (int y, int x, int action, bu
 
     b->action = action;
     b->flags = flags;
-    b->text = parse_hotkey (text);
+    b->text = hotkey_new (text);
     widget_init (w, y, x, 1, button_get_len (b), button_default_callback,
                  button_mouse_default_callback);
     w->options |= WOP_SELECTABLE | WOP_WANT_CURSOR | WOP_WANT_HOTKEY;
@@ -228,9 +228,7 @@ button_new (int y, int x, int action, bu
 char *
 button_get_text (const WButton * b)
 {
-    if (b->text.hotkey != NULL)
-        return g_strconcat (b->text.start, "&", b->text.hotkey, b->text.end, (char *) NULL);
-    return g_strdup (b->text.start);
+    return hotkey_get_text (b->text);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -239,12 +237,20 @@ void
 button_set_text (WButton * b, const char *text)
 {
     Widget *w = WIDGET (b);
+    hotkey_t hk;
 
-    release_hotkey (b->text);
-    b->text = parse_hotkey (text);
+    hk = hotkey_new (text);
+    if (hotkey_equal (b->text, hk))
+    {
+        hotkey_free (hk);
+        return;
+    }
+
+    hotkey_free (b->text);
+    b->text = hk;
     b->hotpos = (b->text.hotkey != NULL) ? str_term_width1 (b->text.start) : -1;
     w->cols = button_get_len (b);
-    widget_redraw (w);
+    widget_draw (w);
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/widget/buttonbar.c mc-4.8.24/lib/widget/buttonbar.c
--- mc-4.8.23/lib/widget/buttonbar.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/buttonbar.c	2020-01-01 19:52:34.000000000 +0400
@@ -177,10 +177,10 @@ buttonbar_callback (Widget * w, Widget *
         if (bb->visible)
         {
             buttonbar_init_button_positions (bb);
-            widget_move (w, 0, 0);
+            widget_gotoyx (w, 0, 0);
             tty_setcolor (DEFAULT_COLOR);
             tty_printf ("%-*s", w->cols, "");
-            widget_move (w, 0, 0);
+            widget_gotoyx (w, 0, 0);
 
             for (i = 0; i < BUTTONBAR_LABELS_NUM; i++)
             {
diff -urpN mc-4.8.23/lib/widget/check.c mc-4.8.24/lib/widget/check.c
--- mc-4.8.23/lib/widget/check.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/check.c	2020-01-01 19:52:34.000000000 +0400
@@ -74,12 +74,12 @@ check_callback (Widget * w, Widget * sen
         if (parm != ' ')
             return MSG_NOT_HANDLED;
         c->state = !c->state;
-        widget_redraw (w);
+        widget_draw (w);
         send_message (w->owner, w, MSG_NOTIFY, 0, NULL);
         return MSG_HANDLED;
 
     case MSG_CURSOR:
-        widget_move (w, 0, 1);
+        widget_gotoyx (w, 0, 1);
         return MSG_HANDLED;
 
     case MSG_DRAW:
@@ -88,14 +88,14 @@ check_callback (Widget * w, Widget * sen
 
             focused = widget_get_state (w, WST_FOCUSED);
             widget_selectcolor (w, focused, FALSE);
-            widget_move (w, 0, 0);
+            widget_gotoyx (w, 0, 0);
             tty_print_string (c->state ? "[x] " : "[ ] ");
             hotkey_draw (w, c->text, focused);
             return MSG_HANDLED;
         }
 
     case MSG_DESTROY:
-        release_hotkey (c->text);
+        hotkey_free (c->text);
         return MSG_HANDLED;
 
     default:
@@ -138,7 +138,7 @@ check_new (int y, int x, gboolean state,
 
     c = g_new (WCheck, 1);
     w = WIDGET (c);
-    c->text = parse_hotkey (text);
+    c->text = hotkey_new (text);
     /* 4 is width of "[X] " */
     widget_init (w, y, x, 1, 4 + hotkey_width (c->text), check_callback, check_mouse_callback);
     w->options |= WOP_SELECTABLE | WOP_WANT_CURSOR | WOP_WANT_HOTKEY;
@@ -148,3 +148,29 @@ check_new (int y, int x, gboolean state,
 }
 
 /* --------------------------------------------------------------------------------------------- */
+
+void
+check_set_text (WCheck * check, const char *text)
+{
+    Widget *w = WIDGET (check);
+    hotkey_t hk;
+
+    hk = hotkey_new (text);
+    if (hotkey_equal (check->text, hk))
+    {
+        hotkey_free (hk);
+        return;
+    }
+
+    hotkey_free (check->text);
+    check->text = hk;
+
+    if (check->text.start[0] == '\0' && check->text.hotkey == NULL && check->text.end == NULL)
+        w->cols = 3;            /* "[ ]" */
+    else
+        w->cols = 4 + hotkey_width (check->text);       /* "[ ]  text" */
+
+    widget_draw (w);
+}
+
+/* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/widget/check.h mc-4.8.24/lib/widget/check.h
--- mc-4.8.23/lib/widget/check.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/check.h	2020-01-01 19:52:34.000000000 +0400
@@ -26,6 +26,7 @@ typedef struct WCheck
 /*** declarations of public functions ************************************************************/
 
 WCheck *check_new (int y, int x, gboolean state, const char *text);
+void check_set_text (WCheck * check, const char *text);
 
 /*** inline functions ****************************************************************************/
 
diff -urpN mc-4.8.23/lib/widget/dialog-switch.c mc-4.8.24/lib/widget/dialog-switch.c
--- mc-4.8.23/lib/widget/dialog-switch.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/dialog-switch.c	2020-01-01 19:52:34.000000000 +0400
@@ -338,7 +338,8 @@ mc_refresh (void)
     if (mc_global.we_are_background)
         return;
 #endif /* ENABLE_BACKGROUND */
-    if (mc_global.tty.winch_flag == 0)
+
+    if (!tty_got_winch ())
         tty_refresh ();
     else
     {
@@ -355,8 +356,7 @@ dialog_change_screen_size (void)
 {
     GList *d;
 
-    mc_global.tty.winch_flag = 0;
-
+    tty_flush_winch ();
     tty_change_screen_size ();
 
 #ifdef HAVE_SLANG
diff -urpN mc-4.8.23/lib/widget/dialog.c mc-4.8.24/lib/widget/dialog.c
--- mc-4.8.23/lib/widget/dialog.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/dialog.c	2020-01-01 19:52:34.000000000 +0400
@@ -43,6 +43,7 @@
 #include "lib/fileloc.h"        /* MC_HISTORY_FILE */
 #include "lib/event.h"          /* mc_event_raise() */
 #include "lib/util.h"           /* MC_PTR_FREE */
+#include "lib/mcconfig.h"       /* num_history_items_recorded */
 
 #include "lib/widget.h"
 #include "lib/widget/mouse.h"
@@ -519,7 +520,7 @@ frontend_dlg_run (WDialog * h)
     {
         int d_key;
 
-        if (mc_global.tty.winch_flag != 0)
+        if (tty_got_winch ())
             dialog_change_screen_size ();
 
         if (is_idle ())
@@ -604,36 +605,6 @@ dlg_widget_set_position (gpointer data,
 }
 
 /* --------------------------------------------------------------------------------------------- */
-
-static void
-dlg_adjust_position (widget_pos_flags_t pos_flags, int *y, int *x, int *lines, int *cols)
-{
-    if ((pos_flags & WPOS_FULLSCREEN) != 0)
-    {
-        *y = 0;
-        *x = 0;
-        *lines = LINES;
-        *cols = COLS;
-    }
-    else
-    {
-        if ((pos_flags & WPOS_CENTER_HORZ) != 0)
-            *x = (COLS - *cols) / 2;
-
-        if ((pos_flags & WPOS_CENTER_VERT) != 0)
-            *y = (LINES - *lines) / 2;
-
-        if ((pos_flags & WPOS_TRYUP) != 0)
-        {
-            if (*y > 3)
-                *y -= 2;
-            else if (*y == 3)
-                *y = 2;
-        }
-    }
-}
-
-/* --------------------------------------------------------------------------------------------- */
 /*** public functions ****************************************************************************/
 /* --------------------------------------------------------------------------------------------- */
 
@@ -658,7 +629,7 @@ dlg_default_repaint (WDialog * h)
     {
         /* TODO: truncate long title */
         tty_setcolor (h->color[DLG_COLOR_TITLE]);
-        widget_move (h, space, (wh->cols - str_term_width1 (h->title)) / 2);
+        widget_gotoyx (h, space, (wh->cols - str_term_width1 (h->title)) / 2);
         tty_print_string (h->title);
     }
 }
@@ -711,7 +682,7 @@ dlg_set_size (WDialog * h, int lines, in
 {
     int x = 0, y = 0;
 
-    dlg_adjust_position (WIDGET (h)->pos_flags, &y, &x, &lines, &cols);
+    widget_adjust_position (WIDGET (h)->pos_flags, &y, &x, &lines, &cols);
     dlg_set_position (h, y, x, lines, cols);
 }
 
@@ -770,7 +741,7 @@ dlg_create (gboolean modal, int y1, int
 
     new_d = g_new0 (WDialog, 1);
     w = WIDGET (new_d);
-    dlg_adjust_position (pos_flags, &y1, &x1, &lines, &cols);
+    widget_adjust_position (pos_flags, &y1, &x1, &lines, &cols);
     widget_init (w, y1, x1, lines, cols, (callback != NULL) ? callback : dlg_default_callback,
                  mouse_callback);
     w->pos_flags = pos_flags;
@@ -932,19 +903,18 @@ del_widget (void *w)
     if (d == h->current)
         dlg_set_current_widget_next (h);
 
-    h->widgets = g_list_remove_link (h->widgets, d);
+    h->widgets = g_list_delete_link (h->widgets, d);
     if (h->widgets == NULL)
         h->current = NULL;
-    send_message (d->data, NULL, MSG_DESTROY, 0, NULL);
-    g_free (d->data);
-    g_list_free_1 (d);
 
     /* widget has been deleted in runtime */
     if (widget_get_state (WIDGET (h), WST_ACTIVE))
     {
-        dlg_redraw (h);
+        dlg_draw (h);
         dlg_select_current_widget (h);
     }
+
+    WIDGET (w)->owner = NULL;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -957,7 +927,7 @@ do_refresh (void)
     if (fast_refresh)
     {
         if (d != NULL)
-            dlg_redraw (DIALOG (d->data));
+            dlg_draw (DIALOG (d->data));
     }
     else
     {
@@ -967,7 +937,7 @@ do_refresh (void)
                 break;
         /* back to top dialog */
         for (; d != NULL; d = g_list_previous (d))
-            dlg_redraw (DIALOG (d->data));
+            dlg_draw (DIALOG (d->data));
     }
 }
 
@@ -1081,7 +1051,7 @@ update_cursor (WDialog * h)
  */
 
 void
-dlg_redraw (WDialog * h)
+dlg_draw (WDialog * h)
 {
     if (!widget_get_state (WIDGET (h), WST_ACTIVE))
         return;
@@ -1136,7 +1106,7 @@ dlg_init (WDialog * h)
         dlg_set_current_widget_next (h);
 
     widget_set_state (wh, WST_ACTIVE, TRUE);
-    dlg_redraw (h);
+    dlg_draw (h);
     /* focus found widget */
     if (h->current != NULL)
         widget_set_state (WIDGET (h->current->data), WST_FOCUSED, TRUE);
@@ -1206,8 +1176,8 @@ dlg_destroy (WDialog * h)
 {
     /* if some widgets have history, save all history at one moment here */
     dlg_save_history (h);
-    dlg_broadcast_msg (h, MSG_DESTROY);
-    g_list_free_full (h->widgets, g_free);
+    g_list_foreach (h->widgets, (GFunc) widget_destroy, NULL);
+    g_list_free (h->widgets);
     mc_event_group_del (h->event_group);
     g_free (h->event_group);
     g_free (h->title);
diff -urpN mc-4.8.23/lib/widget/dialog.h mc-4.8.24/lib/widget/dialog.h
--- mc-4.8.23/lib/widget/dialog.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/dialog.h	2020-01-01 19:52:34.000000000 +0400
@@ -134,7 +134,7 @@ void dlg_process_event (WDialog * h, int
 void dlg_set_title (WDialog * h, const char *title);
 char *dlg_get_title (const WDialog * h, size_t len);
 
-void dlg_redraw (WDialog * h);
+void dlg_draw (WDialog * h);
 
 void dlg_broadcast_msg (WDialog * h, widget_msg_t message);
 
diff -urpN mc-4.8.23/lib/widget/gauge.c mc-4.8.24/lib/widget/gauge.c
--- mc-4.8.23/lib/widget/gauge.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/gauge.c	2020-01-01 19:52:34.000000000 +0400
@@ -63,7 +63,7 @@ gauge_callback (Widget * w, Widget * sen
     switch (msg)
     {
     case MSG_DRAW:
-        widget_move (w, 0, 0);
+        widget_gotoyx (w, 0, 0);
         if (!g->shown)
         {
             tty_setcolor (h->color[DLG_COLOR_NORMAL]);
@@ -154,7 +154,7 @@ gauge_set_value (WGauge * g, int max, in
         max = 1;                /* I do not like division by zero :) */
     g->current = current;
     g->max = max;
-    widget_redraw (WIDGET (g));
+    widget_draw (WIDGET (g));
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -165,7 +165,7 @@ gauge_show (WGauge * g, gboolean shown)
     if (g->shown != shown)
     {
         g->shown = shown;
-        widget_redraw (WIDGET (g));
+        widget_draw (WIDGET (g));
     }
 }
 
diff -urpN mc-4.8.23/lib/widget/groupbox.c mc-4.8.24/lib/widget/groupbox.c
--- mc-4.8.23/lib/widget/groupbox.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/groupbox.c	2020-01-01 19:52:34.000000000 +0400
@@ -72,7 +72,7 @@ groupbox_callback (Widget * w, Widget *
             if (g->title != NULL)
             {
                 tty_setcolor (disabled ? DISABLED_COLOR : h->color[DLG_COLOR_TITLE]);
-                widget_move (w, 0, 1);
+                widget_gotoyx (w, 0, 1);
                 tty_print_string (g->title);
             }
             return MSG_HANDLED;
@@ -124,7 +124,7 @@ groupbox_set_title (WGroupbox * g, const
         g_free (t);
     }
 
-    widget_redraw (WIDGET (g));
+    widget_draw (WIDGET (g));
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/widget/history.c mc-4.8.24/lib/widget/history.c
--- mc-4.8.23/lib/widget/history.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/history.c	2020-01-01 19:52:34.000000000 +0400
@@ -10,7 +10,7 @@
    Jakub Jelinek, 1995
    Andrej Borsenkow, 1996
    Norbert Warmuth, 1997
-   Andrew Borodin <aborodin@vmail.ru>, 2009, 2010, 2011, 2012, 2013
+   Andrew Borodin <aborodin@vmail.ru>, 2009-2019
 
    This file is part of the Midnight Commander.
 
@@ -29,41 +29,36 @@
  */
 
 /** \file history.c
- *  \brief Source: save, load and show history
+ *  \brief Source: show history
  */
 
 #include <config.h>
 
-#include <errno.h>
 #include <stdlib.h>
-#include <stdio.h>
-#include <string.h>
 #include <sys/types.h>
-#include <sys/stat.h>
 
 #include "lib/global.h"
 
 #include "lib/tty/tty.h"        /* LINES, COLS */
-#include "lib/mcconfig.h"       /* for history loading and saving */
-#include "lib/fileloc.h"
 #include "lib/strutil.h"
-#include "lib/util.h"           /* list_append_unique */
 #include "lib/widget.h"
+#include "lib/keybind.h"        /* CK_* */
 
 /*** global variables ****************************************************************************/
 
-/* how much history items are used */
-int num_history_items_recorded = 60;
-
 /*** file scope macro definitions ****************************************************************/
 
+#define B_VIEW (B_USER + 1)
+#define B_EDIT (B_USER + 2)
+
 /*** file scope type declarations ****************************************************************/
 
 typedef struct
 {
-    Widget *widget;
+    int y;
+    int x;
     size_t count;
-    size_t maxlen;
+    size_t max_width;
 } history_dlg_data;
 
 /*** file scope variables ************************************************************************/
@@ -82,7 +77,7 @@ history_dlg_reposition (WDialog * dlg_he
 
     data = (history_dlg_data *) dlg_head->data;
 
-    y = data->widget->y;
+    y = data->y;
     he = data->count + 2;
 
     if (he <= y || y > (LINES - 6))
@@ -96,10 +91,10 @@ history_dlg_reposition (WDialog * dlg_he
         he = MIN (he, LINES - y);
     }
 
-    if (data->widget->x > 2)
-        x = data->widget->x - 2;
+    if (data->x > 2)
+        x = data->x - 2;
 
-    wi = data->maxlen + 4;
+    wi = data->max_width + 4;
 
     if ((wi + x) > COLS)
     {
@@ -122,269 +117,181 @@ history_dlg_callback (Widget * w, Widget
     case MSG_RESIZE:
         return history_dlg_reposition (DIALOG (w));
 
+    case MSG_NOTIFY:
+        {
+            /* message from listbox */
+            WDialog *d = DIALOG (w);
+
+            switch (parm)
+            {
+            case CK_View:
+                d->ret_value = B_VIEW;
+                break;
+            case CK_Edit:
+                d->ret_value = B_EDIT;
+                break;
+            case CK_Enter:
+                d->ret_value = B_ENTER;
+                break;
+            default:
+                return MSG_NOT_HANDLED;
+            }
+
+            dlg_stop (d);
+            return MSG_HANDLED;
+        }
+
     default:
         return dlg_default_callback (w, sender, msg, parm, data);
     }
 }
 
 /* --------------------------------------------------------------------------------------------- */
-/*** public functions ****************************************************************************/
-/* --------------------------------------------------------------------------------------------- */
 
-/**
- * Load the history from the ${XDG_CACHE_HOME}/mc/history file.
- * It is called with the widgets history name and returns the GList list.
- */
-
-GList *
-history_get (const char *input_name)
+static void
+history_create_item (history_descriptor_t * hd, void *data)
 {
-    GList *hist = NULL;
-    char *profile;
-    mc_config_t *cfg;
-
-    if (num_history_items_recorded == 0)        /* this is how to disable */
-        return NULL;
-    if ((input_name == NULL) || (*input_name == '\0'))
-        return NULL;
-
-    profile = mc_config_get_full_path (MC_HISTORY_FILE);
-    cfg = mc_config_init (profile, TRUE);
+    char *text = (char *) data;
+    size_t width;
 
-    hist = history_load (cfg, input_name);
+    width = str_term_width1 (text);
+    hd->max_width = MAX (width, hd->max_width);
 
-    mc_config_deinit (cfg);
-    g_free (profile);
-
-    return hist;
+    listbox_add_item (hd->listbox, LISTBOX_APPEND_AT_END, 0, text, NULL, TRUE);
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-/**
- * Load history from the mc_config
- */
-GList *
-history_load (mc_config_t * cfg, const char *name)
+static void *
+history_release_item (history_descriptor_t * hd, WLEntry * le)
 {
-    size_t i;
-    GList *hist = NULL;
-    char **keys;
-    size_t keys_num = 0;
-    GIConv conv = INVALID_CONV;
-    GString *buffer;
-
-    if (name == NULL || *name == '\0')
-        return NULL;
-
-    /* get number of keys */
-    keys = mc_config_get_keys (cfg, name, &keys_num);
-    g_strfreev (keys);
-
-    /* create charset conversion handler to convert strings
-       from utf-8 to system codepage */
-    if (!mc_global.utf8_display)
-        conv = str_crt_conv_from ("UTF-8");
-
-    buffer = g_string_sized_new (64);
-
-    for (i = 0; i < keys_num; i++)
-    {
-        char key[BUF_TINY];
-        char *this_entry;
-
-        g_snprintf (key, sizeof (key), "%lu", (unsigned long) i);
-        this_entry = mc_config_get_string_raw (cfg, name, key, "");
-
-        if (this_entry == NULL)
-            continue;
+    void *text;
 
-        if (conv == INVALID_CONV)
-            hist = list_append_unique (hist, this_entry);
-        else
-        {
-            g_string_set_size (buffer, 0);
-            if (str_convert (conv, this_entry, buffer) == ESTR_FAILURE)
-                hist = list_append_unique (hist, this_entry);
-            else
-            {
-                hist = list_append_unique (hist, g_strndup (buffer->str, buffer->len));
-                g_free (this_entry);
-            }
-        }
-    }
+    (void) hd;
 
-    g_string_free (buffer, TRUE);
-    if (conv != INVALID_CONV)
-        str_close_conv (conv);
+    text = le->text;
+    le->text = NULL;
 
-    /* return pointer to the last entry in the list */
-    return g_list_last (hist);
+    return text;
 }
 
 /* --------------------------------------------------------------------------------------------- */
+/*** public functions ****************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
 
-/**
-  * Save history to the mc_config, but don't save config to file
-  */
 void
-history_save (mc_config_t * cfg, const char *name, GList * h)
+history_descriptor_init (history_descriptor_t * hd, int y, int x, GList * history, int current)
 {
-    GIConv conv = INVALID_CONV;
-    GString *buffer;
-    int i;
-
-    if (name == NULL || *name == '\0' || h == NULL)
-        return;
-
-    /* go to end of list */
-    h = g_list_last (h);
-
-    /* go back 60 places */
-    for (i = 0; (i < num_history_items_recorded - 1) && (h->prev != NULL); i++)
-        h = g_list_previous (h);
-
-    if (name != NULL)
-        mc_config_del_group (cfg, name);
-
-    /* create charset conversion handler to convert strings
-       from system codepage to UTF-8 */
-    if (!mc_global.utf8_display)
-        conv = str_crt_conv_to ("UTF-8");
-
-    buffer = g_string_sized_new (64);
-    /* dump history into profile */
-    for (i = 0; h != NULL; h = g_list_next (h))
-    {
-        char key[BUF_TINY];
-        char *text = (char *) h->data;
-
-        /* We shouldn't have null entries, but let's be sure */
-        if (text == NULL)
-            continue;
-
-        g_snprintf (key, sizeof (key), "%d", i++);
-
-        if (conv == INVALID_CONV)
-            mc_config_set_string_raw (cfg, name, key, text);
-        else
-        {
-            g_string_set_size (buffer, 0);
-            if (str_convert (conv, text, buffer) == ESTR_FAILURE)
-                mc_config_set_string_raw (cfg, name, key, text);
-            else
-                mc_config_set_string_raw (cfg, name, key, buffer->str);
-        }
-    }
-
-    g_string_free (buffer, TRUE);
-    if (conv != INVALID_CONV)
-        str_close_conv (conv);
+    hd->list = history;
+    hd->y = y;
+    hd->x = x;
+    hd->current = current;
+    hd->action = CK_IgnoreKey;
+    hd->text = NULL;
+    hd->max_width = 0;
+    hd->listbox = listbox_new (1, 1, 2, 2, TRUE, NULL);
+    /* in most cases history list contains string only and no any other data */
+    hd->create = history_create_item;
+    hd->release = history_release_item;
+    hd->free = g_free;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-char *
-history_show (GList ** history, Widget * widget, int current)
+void
+history_show (history_descriptor_t * hd)
 {
-    GList *z, *hlist = NULL, *hi;
-    size_t maxlen, count = 0;
-    char *r = NULL;
+    GList *z, *hi;
+    size_t count;
     WDialog *query_dlg;
-    WListbox *query_list;
     history_dlg_data hist_data;
+    int dlg_ret;
 
-    if (*history == NULL)
-        return NULL;
+    if (hd == NULL || hd->list == NULL)
+        return;
 
-    maxlen = str_term_width1 (_("History")) + 2;
+    hd->max_width = str_term_width1 (_("History")) + 2;
 
-    for (z = *history; z != NULL; z = g_list_previous (z))
-    {
-        WLEntry *entry;
-        size_t i;
+    for (z = hd->list; z != NULL; z = g_list_previous (z))
+        hd->create (hd, z->data);
+    /* after this, the order of history items is following: recent at begin, oldest at end */
 
-        i = str_term_width1 ((char *) z->data);
-        maxlen = MAX (maxlen, i);
-        count++;
-
-        entry = g_new0 (WLEntry, 1);
-        /* history is being reverted here */
-        entry->text = g_strdup ((char *) z->data);
-        hlist = g_list_prepend (hlist, entry);
-    }
+    count = listbox_get_length (hd->listbox);
 
-    hist_data.widget = widget;
+    hist_data.y = hd->y;
+    hist_data.x = hd->x;
     hist_data.count = count;
-    hist_data.maxlen = maxlen;
+    hist_data.max_width = hd->max_width;
 
     query_dlg =
         dlg_create (TRUE, 0, 0, 4, 4, WPOS_KEEP_DEFAULT, TRUE, dialog_colors, history_dlg_callback,
                     NULL, "[History-query]", _("History"));
     query_dlg->data = &hist_data;
 
-    query_list = listbox_new (1, 1, 2, 2, TRUE, NULL);
-
     /* this call makes list stick to all sides of dialog, effectively make
        it be resized with dialog */
-    add_widget_autopos (query_dlg, query_list, WPOS_KEEP_ALL, NULL);
+    add_widget_autopos (query_dlg, hd->listbox, WPOS_KEEP_ALL, NULL);
 
     /* to avoid diplicating of (calculating sizes in two places)
-       code, call dlg_hist_callback function here, to set dialog and
+       code, call history_dlg_callback function here, to set dialog and
        controls positions.
        The main idea - create 4x4 dialog and add 2x2 list in
-       center of it, and let dialog function resize it to needed
-       size. */
+       center of it, and let dialog function resize it to needed size. */
     send_message (query_dlg, NULL, MSG_RESIZE, 0, NULL);
 
-    if (WIDGET (query_dlg)->y < widget->y)
+    if (WIDGET (query_dlg)->y < hd->y)
     {
-        /* draw list entries from bottom upto top */
-        listbox_set_list (query_list, hlist);
-        if (current < 0 || (size_t) current >= count)
-            listbox_select_last (query_list);
+        /* history is above base widget -- revert order to place recent item at bottom */
+        /* revert history direction */
+        g_queue_reverse (hd->listbox->list);
+        if (hd->current < 0 || (size_t) hd->current >= count)
+            listbox_select_last (hd->listbox);
         else
-            listbox_select_entry (query_list, count - 1 - (size_t) current);
+            listbox_select_entry (hd->listbox, count - 1 - (size_t) hd->current);
     }
     else
     {
-        /* draw list entries from top downto bottom */
-        /* revert history direction */
-        hlist = g_list_reverse (hlist);
-        listbox_set_list (query_list, hlist);
-        if (current > 0)
-            listbox_select_entry (query_list, current);
+        /* history is below base widget -- keep order to place recent item on top  */
+        if (hd->current > 0)
+            listbox_select_entry (hd->listbox, hd->current);
     }
 
-    if (dlg_run (query_dlg) != B_CANCEL)
+    dlg_ret = dlg_run (query_dlg);
+    if (dlg_ret != B_CANCEL)
     {
         char *q;
 
-        listbox_get_current (query_list, &q, NULL);
-        r = g_strdup (q);
+        switch (dlg_ret)
+        {
+        case B_EDIT:
+            hd->action = CK_Edit;
+            break;
+        case B_VIEW:
+            hd->action = CK_View;
+            break;
+        default:
+            hd->action = CK_Enter;
+        }
+
+        listbox_get_current (hd->listbox, &q, NULL);
+        hd->text = g_strdup (q);
     }
 
     /* get modified history from dialog */
     z = NULL;
-    for (hi = listbox_get_first_link (query_list); hi != NULL; hi = g_list_next (hi))
-    {
-        WLEntry *entry = LENTRY (hi->data);
-
+    for (hi = listbox_get_first_link (hd->listbox); hi != NULL; hi = g_list_next (hi))
         /* history is being reverted here again */
-        z = g_list_prepend (z, entry->text);
-        entry->text = NULL;
-    }
+        z = g_list_prepend (z, hd->release (hd, LENTRY (hi->data)));
 
     /* restore history direction */
-    if (WIDGET (query_dlg)->y < widget->y)
+    if (WIDGET (query_dlg)->y < hd->y)
         z = g_list_reverse (z);
 
     dlg_destroy (query_dlg);
 
-    g_list_free_full (*history, g_free);
-    *history = g_list_last (z);
-
-    return r;
+    hd->list = g_list_first (hd->list);
+    g_list_free_full (hd->list, hd->free);
+    hd->list = g_list_last (z);
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/widget/history.h mc-4.8.24/lib/widget/history.h
--- mc-4.8.23/lib/widget/history.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/history.h	2020-01-01 19:52:34.000000000 +0400
@@ -1,34 +1,50 @@
 
 /** \file lib/widget/history.h
- *  \brief Header: save, load and show history
+ *  \brief Header: show history
  */
 
 #ifndef MC__WIDGET_HISTORY_H
 #define MC__WIDGET_HISTORY_H
 
-#include "lib/mcconfig.h"       /* mc_config_t */
-
 /*** typedefs(not structures) and defined constants **********************************************/
 
+/* forward declarations */
+struct history_descriptor_t;
+struct WLEntry;
+struct WListbox;
+
+typedef void (*history_create_item_func) (struct history_descriptor_t * hd, void *data);
+typedef void *(*history_release_item_func) (struct history_descriptor_t * hd, struct WLEntry * le);
+
 /*** enums ***************************************************************************************/
 
 /*** structures declarations (and typedefs of structures)*****************************************/
 
-/*** global variables defined in .c file *********************************************************/
+typedef struct history_descriptor_t
+{
+    GList *list;                /**< list with history items */
+    int y;                      /**< y-coordinate to place history window */
+    int x;                      /**< x-coordinate to place history window */
+    int current;                /**< initially selected item in the history */
+    int action;                 /**< return action in the history */
+    char *text;                 /**< return text of selected item */
+
+    size_t max_width;           /**< maximum width of sring in history */
+    struct WListbox *listbox;   /**< listbox widget to draw history */
+
+    history_create_item_func create;    /**< function to create item of @list */
+    history_release_item_func release;  /**< function to release item of @list */
+    GDestroyNotify free;        /**< function to destroy element of @list */
+} history_descriptor_t;
 
-extern int num_history_items_recorded;
+/*** global variables defined in .c file *********************************************************/
 
 /*** declarations of public functions ************************************************************/
 
-/* read history to the mc_config, but don't save config to file */
-GList *history_get (const char *input_name);
-/* load history from the mc_config */
-GList *history_load (mc_config_t * cfg, const char *name);
-/* save history to the mc_config, but don't save config to file */
-void history_save (mc_config_t * cfg, const char *name, GList * h);
-/* for repositioning of history dialog we should pass widget to this
- * function, as position of history dialog depends on widget's position */
-char *history_show (GList ** history, Widget * widget, int current);
+void history_descriptor_init (history_descriptor_t * hd, int y, int x, GList * history,
+                              int current);
+
+void history_show (history_descriptor_t * hd);
 
 /*** inline functions ****************************************************************************/
 
diff -urpN mc-4.8.23/lib/widget/hline.c mc-4.8.24/lib/widget/hline.c
--- mc-4.8.23/lib/widget/hline.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/hline.c	2020-01-01 19:52:34.000000000 +0400
@@ -90,9 +90,9 @@ hline_callback (Widget * w, Widget * sen
 
         if (l->auto_adjust_cols)
         {
-            widget_move (w, 0, 0);
+            widget_gotoyx (w, 0, 0);
             tty_print_alt_char (ACS_LTEE, FALSE);
-            widget_move (w, 0, w->cols - 1);
+            widget_gotoyx (w, 0, w->cols - 1);
             tty_print_alt_char (ACS_RTEE, FALSE);
         }
 
@@ -101,7 +101,7 @@ hline_callback (Widget * w, Widget * sen
             int text_width;
 
             text_width = str_term_width1 (l->text);
-            widget_move (w, 0, (w->cols - text_width) / 2);
+            widget_gotoyx (w, 0, (w->cols - text_width) / 2);
             tty_print_string (l->text);
         }
         return MSG_HANDLED;
@@ -148,7 +148,7 @@ hline_set_text (WHLine * l, const char *
     else
         l->text = g_strdup (text);
 
-    widget_redraw (WIDGET (l));
+    widget_draw (WIDGET (l));
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/widget/input.c mc-4.8.24/lib/widget/input.c
--- mc-4.8.23/lib/widget/input.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/input.c	2020-01-01 19:52:34.000000000 +0400
@@ -49,6 +49,7 @@
 #include "lib/keybind.h"        /* global_keymap_t */
 #include "lib/widget.h"
 #include "lib/event.h"          /* mc_event_raise() */
+#include "lib/mcconfig.h"       /* mc_config_history_*() */
 
 #include "input_complete.h"
 
@@ -112,13 +113,13 @@ draw_history_button (WInput * in)
     else
         c = '|';
 
-    widget_move (in, 0, WIDGET (in)->cols - HISTORY_BUTTON_WIDTH);
+    widget_gotoyx (in, 0, WIDGET (in)->cols - HISTORY_BUTTON_WIDTH);
     disabled = widget_get_state (WIDGET (in), WST_DISABLED);
     tty_setcolor (disabled ? DISABLED_COLOR : in->color[WINPUTC_HISTORY]);
 
 #ifdef LARGE_HISTORY_BUTTON
     tty_print_string ("[ ]");
-    widget_move (in, 0, WIDGET (in)->cols - HISTORY_BUTTON_WIDTH + 1);
+    widget_gotoyx (in, 0, WIDGET (in)->cols - HISTORY_BUTTON_WIDTH + 1);
 #endif
 
     tty_print_char (c);
@@ -171,16 +172,19 @@ static void
 do_show_hist (WInput * in)
 {
     size_t len;
-    char *r;
+    history_descriptor_t hd;
 
     len = get_history_length (in->history.list);
 
-    r = history_show (&in->history.list, WIDGET (in),
-                      g_list_position (in->history.list, in->history.list));
-    if (r != NULL)
+    history_descriptor_init (&hd, WIDGET (in)->y, WIDGET (in)->x, in->history.list,
+                             g_list_position (in->history.list, in->history.list));
+    history_show (&hd);
+
+    in->history.list = hd.list;
+    if (hd.text != NULL)
     {
-        input_assign_text (in, r);
-        g_free (r);
+        input_assign_text (in, hd.text);
+        g_free (hd.text);
     }
 
     /* Has history cleaned up or not? */
@@ -839,7 +843,7 @@ input_load_history (const gchar * event_
     (void) event_group_name;
     (void) event_name;
 
-    in->history.list = history_load (ev->cfg, in->history.name);
+    in->history.list = mc_config_history_load (ev->cfg, in->history.name);
     in->history.current = in->history.list;
 
     if (in->init_from_history)
@@ -873,7 +877,7 @@ input_save_history (const gchar * event_
 
         push_history (in, in->buffer);
         if (in->history.changed)
-            history_save (ev->cfg, in->history.name, in->history.list);
+            mc_config_history_save (ev->cfg, in->history.name, in->history.list);
         in->history.changed = FALSE;
     }
 
@@ -1087,7 +1091,7 @@ input_callback (Widget * w, Widget * sen
         return MSG_HANDLED;
 
     case MSG_CURSOR:
-        widget_move (in, 0, str_term_width2 (in->buffer, in->point) - in->term_first_shown);
+        widget_gotoyx (in, 0, str_term_width2 (in->buffer, in->point) - in->term_first_shown);
         return MSG_HANDLED;
 
     case MSG_DESTROY:
@@ -1286,7 +1290,7 @@ input_update (WInput * in, gboolean clea
     else
         tty_setcolor (in->color[WINPUTC_MAIN]);
 
-    widget_move (in, 0, 0);
+    widget_gotoyx (in, 0, 0);
 
     if (!in->is_password)
     {
@@ -1305,7 +1309,7 @@ input_update (WInput * in, gboolean clea
                 tty_setcolor (in->color[WINPUTC_MARK]);
                 if (m1 < in->term_first_shown)
                 {
-                    widget_move (in, 0, 0);
+                    widget_gotoyx (in, 0, 0);
                     tty_print_string (str_term_substring
                                       (in->buffer, in->term_first_shown,
                                        m2 - in->term_first_shown));
@@ -1314,7 +1318,7 @@ input_update (WInput * in, gboolean clea
                 {
                     int sel_width, buf_width;
 
-                    widget_move (in, 0, m1 - in->term_first_shown);
+                    widget_gotoyx (in, 0, m1 - in->term_first_shown);
                     buf_width = str_term_width2 (in->buffer, m1);
                     sel_width =
                         MIN (m2 - m1, (w->cols - has_history) - (buf_width - in->term_first_shown));
diff -urpN mc-4.8.23/lib/widget/input_complete.c mc-4.8.24/lib/widget/input_complete.c
--- mc-4.8.23/lib/widget/input_complete.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/input_complete.c	2020-01-01 19:52:34.000000000 +0400
@@ -1067,7 +1067,7 @@ query_callback (Widget * w, Widget * sen
                         listbox_select_entry (LISTBOX (h->current->data), i);
                         end = new_end;
                         input_handle_char (input, parm);
-                        widget_redraw (WIDGET (h->current->data));
+                        widget_draw (WIDGET (h->current->data));
                         break;
                     }
                 }
@@ -1173,7 +1173,7 @@ query_callback (Widget * w, Widget * sen
                 if (need_redraw == 2)
                 {
                     insert_text (input, last_text, low);
-                    widget_redraw (WIDGET (h->current->data));
+                    widget_draw (WIDGET (h->current->data));
                 }
                 else if (need_redraw == 1)
                 {
diff -urpN mc-4.8.23/lib/widget/label.c mc-4.8.24/lib/widget/label.c
--- mc-4.8.23/lib/widget/label.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/label.c	2020-01-01 19:52:34.000000000 +0400
@@ -96,7 +96,7 @@ label_callback (Widget * w, Widget * sen
                     q[0] = '\0';
                 }
 
-                widget_move (w, y, 0);
+                widget_gotoyx (w, y, 0);
                 tty_print_string (str_fit_to_term (p, w->cols, align));
 
                 if (q == NULL)
@@ -173,7 +173,7 @@ label_set_text (WLabel * label, const ch
         }
     }
 
-    widget_redraw (w);
+    widget_draw (w);
 
     if (newcols < w->cols)
         w->cols = newcols;
diff -urpN mc-4.8.23/lib/widget/listbox.c mc-4.8.24/lib/widget/listbox.c
--- mc-4.8.23/lib/widget/listbox.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/listbox.c	2020-01-01 19:52:34.000000000 +0400
@@ -96,7 +96,7 @@ listbox_drawscroll (WListbox * l)
     int length;
 
     /* Are we at the top? */
-    widget_move (w, 0, w->cols);
+    widget_gotoyx (w, 0, w->cols);
     if (l->top == 0)
         tty_print_one_vline (TRUE);
     else
@@ -105,7 +105,7 @@ listbox_drawscroll (WListbox * l)
     length = g_queue_get_length (l->list);
 
     /* Are we at the bottom? */
-    widget_move (w, max_line, w->cols);
+    widget_gotoyx (w, max_line, w->cols);
     if (l->top + w->lines == length || w->lines >= length)
         tty_print_one_vline (TRUE);
     else
@@ -117,7 +117,7 @@ listbox_drawscroll (WListbox * l)
 
     for (i = 1; i < max_line; i++)
     {
-        widget_move (w, i, w->cols);
+        widget_gotoyx (w, i, w->cols);
         if (i != line)
             tty_print_one_vline (TRUE);
         else
@@ -172,7 +172,7 @@ listbox_draw (WListbox * l, gboolean foc
         else
             tty_setcolor (normalc);
 
-        widget_move (l, i, 1);
+        widget_gotoyx (l, i, 1);
 
         if (l->list != NULL && le != NULL && (i == 0 || pos < length))
         {
@@ -325,6 +325,11 @@ listbox_execute_cmd (WListbox * l, long
                               D_ERROR, 2, _("&Yes"), _("&No")) == 0))
             listbox_remove_list (l);
         break;
+    case CK_View:
+    case CK_Edit:
+    case CK_Enter:
+        ret = send_message (WIDGET (l)->owner, l, MSG_NOTIFY, command, NULL);
+        break;
     default:
         ret = MSG_NOT_HANDLED;
     }
@@ -398,7 +403,7 @@ static void
 listbox_on_change (WListbox * l)
 {
     listbox_draw (l, TRUE);
-    send_message (WIDGET (l)->owner, l, MSG_NOTIFY, l->pos, NULL);
+    send_message (WIDGET (l)->owner, l, MSG_NOTIFY, 0, NULL);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -476,7 +481,7 @@ listbox_callback (Widget * w, Widget * s
         return listbox_execute_cmd (l, parm);
 
     case MSG_CURSOR:
-        widget_move (l, l->cursor_y, 0);
+        widget_gotoyx (l, l->cursor_y, 0);
         return MSG_HANDLED;
 
     case MSG_DRAW:
@@ -634,10 +639,9 @@ void
 listbox_select_last (WListbox * l)
 {
     int lines = WIDGET (l)->lines;
-    int length = 0;
+    int length;
 
-    if (!listbox_is_empty (l))
-        length = g_queue_get_length (l->list);
+    length = listbox_get_length (l);
 
     l->pos = length > 0 ? length - 1 : 0;
     l->top = length > lines ? length - lines : 0;
@@ -683,6 +687,14 @@ listbox_select_entry (WListbox * l, int
 
 /* --------------------------------------------------------------------------------------------- */
 
+int
+listbox_get_length (const WListbox * l)
+{
+    return listbox_is_empty (l) ? 0 : (int) g_queue_get_length (l->list);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 /* Returns the current string text as well as the associated extra data */
 void
 listbox_get_current (WListbox * l, char **string, void **extra)
@@ -760,22 +772,19 @@ listbox_is_empty (const WListbox * l)
 
 /* --------------------------------------------------------------------------------------------- */
 
+/**
+ * Set new listbox items list.
+ *
+ * @param l WListbox object
+ * @param list list of WLEntry objects
+ */
 void
-listbox_set_list (WListbox * l, GList * list)
+listbox_set_list (WListbox * l, GQueue * list)
 {
     listbox_remove_list (l);
 
     if (l != NULL)
-    {
-        GList *ll;
-
-        l->list = g_queue_new ();
-
-        for (ll = list; ll != NULL; ll = g_list_next (ll))
-            g_queue_push_tail (l->list, ll->data);
-
-        g_list_free (list);
-    }
+        l->list = list;
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/widget/listbox.h mc-4.8.24/lib/widget/listbox.h
--- mc-4.8.23/lib/widget/listbox.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/listbox.h	2020-01-01 19:52:34.000000000 +0400
@@ -68,12 +68,13 @@ int listbox_search_data (WListbox * l, c
 void listbox_select_first (WListbox * l);
 void listbox_select_last (WListbox * l);
 void listbox_select_entry (WListbox * l, int dest);
+int listbox_get_length (const WListbox * l);
 void listbox_get_current (WListbox * l, char **string, void **extra);
 WLEntry *listbox_get_nth_item (const WListbox * l, int pos);
 GList *listbox_get_first_link (const WListbox * l);
 void listbox_remove_current (WListbox * l);
 gboolean listbox_is_empty (const WListbox * l);
-void listbox_set_list (WListbox * l, GList * list);
+void listbox_set_list (WListbox * l, GQueue * list);
 void listbox_remove_list (WListbox * l);
 char *listbox_add_item (WListbox * l, listbox_append_t pos, int hotkey, const char *text,
                         void *data, gboolean free_data);
diff -urpN mc-4.8.23/lib/widget/menu.c mc-4.8.24/lib/widget/menu.c
--- mc-4.8.23/lib/widget/menu.c	2019-06-22 15:08:02.000000000 +0400
+++ mc-4.8.24/lib/widget/menu.c	2020-01-01 19:52:34.000000000 +0400
@@ -46,7 +46,7 @@
 
 /*** global variables ****************************************************************************/
 
-const global_keymap_t *menu_map;
+const global_keymap_t *menu_map = NULL;
 
 /*** file scope macro definitions ****************************************************************/
 
@@ -119,9 +119,9 @@ menu_arrange (menu_t * menu, dlg_shortcu
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-menubar_paint_idx (WMenuBar * menubar, unsigned int idx, int color)
+menubar_paint_idx (const WMenuBar * menubar, unsigned int idx, int color)
 {
-    Widget *w = WIDGET (menubar);
+    const Widget *w = CONST_WIDGET (menubar);
     const menu_t *menu = MENU (g_list_nth_data (menubar->menu, menubar->selected));
     const menu_entry_t *entry = MENUENTRY (g_list_nth_data (menu->entries, idx));
     const int y = 2 + idx;
@@ -135,10 +135,10 @@ menubar_paint_idx (WMenuBar * menubar, u
         /* menu separator */
         tty_setcolor (MENU_ENTRY_COLOR);
 
-        widget_move (w, y, x - 1);
+        widget_gotoyx (w, y, x - 1);
         tty_print_alt_char (ACS_LTEE, FALSE);
         tty_draw_hline (w->y + y, w->x + x, ACS_HLINE, menu->max_entry_len + 3);
-        widget_move (w, y, x + menu->max_entry_len + 3);
+        widget_gotoyx (w, y, x + menu->max_entry_len + 3);
         tty_print_alt_char (ACS_RTEE, FALSE);
     }
     else
@@ -147,7 +147,7 @@ menubar_paint_idx (WMenuBar * menubar, u
 
         /* menu text */
         tty_setcolor (color);
-        widget_move (w, y, x);
+        widget_gotoyx (w, y, x);
         tty_print_char ((unsigned char) entry->first_letter);
         tty_getyx (&yt, &xt);
         tty_draw_hline (yt, xt, ' ', menu->max_entry_len + 2);  /* clear line */
@@ -165,21 +165,21 @@ menubar_paint_idx (WMenuBar * menubar, u
 
         if (entry->shortcut != NULL)
         {
-            widget_move (w, y, x + menu->max_hotkey_len + 3);
+            widget_gotoyx (w, y, x + menu->max_hotkey_len + 3);
             tty_print_string (entry->shortcut);
         }
 
         /* move cursor to the start of entry text */
-        widget_move (w, y, x + 1);
+        widget_gotoyx (w, y, x + 1);
     }
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-menubar_draw_drop (WMenuBar * menubar)
+menubar_draw_drop (const WMenuBar * menubar)
 {
-    Widget *w = WIDGET (menubar);
+    const Widget *w = CONST_WIDGET (menubar);
     const menu_t *menu = MENU (g_list_nth_data (menubar->menu, menubar->selected));
     const unsigned int count = g_list_length (menu->entries);
     int column = menu->start_x - 1;
@@ -199,9 +199,9 @@ menubar_draw_drop (WMenuBar * menubar)
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-menubar_set_color (WMenuBar * menubar, gboolean current, gboolean hotkey)
+menubar_set_color (const WMenuBar * menubar, gboolean current, gboolean hotkey)
 {
-    if (!widget_get_state (WIDGET (menubar), WST_FOCUSED))
+    if (!widget_get_state (CONST_WIDGET (menubar), WST_FOCUSED))
         tty_setcolor (MENU_INACTIVE_COLOR);
     else if (current)
         tty_setcolor (hotkey ? MENU_HOTSEL_COLOR : MENU_SELECTED_COLOR);
@@ -212,9 +212,9 @@ menubar_set_color (WMenuBar * menubar, g
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-menubar_draw (WMenuBar * menubar)
+menubar_draw (const WMenuBar * menubar)
 {
-    Widget *w = WIDGET (menubar);
+    const Widget *w = CONST_WIDGET (menubar);
     GList *i;
 
     /* First draw the complete menubar */
@@ -228,7 +228,7 @@ menubar_draw (WMenuBar * menubar)
         gboolean is_selected = (menubar->selected == (gsize) g_list_position (menubar->menu, i));
 
         menubar_set_color (menubar, is_selected, FALSE);
-        widget_move (w, 0, menu->start_x);
+        widget_gotoyx (w, 0, menu->start_x);
 
         tty_print_char (' ');
         tty_print_string (menu->text.start);
@@ -249,7 +249,7 @@ menubar_draw (WMenuBar * menubar)
     if (menubar->is_dropped)
         menubar_draw_drop (menubar);
     else
-        widget_move (w, 0, MENU (g_list_nth_data (menubar->menu, menubar->selected))->start_x);
+        widget_gotoyx (w, 0, MENU (g_list_nth_data (menubar->menu, menubar->selected))->start_x);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -622,11 +622,10 @@ menubar_refresh (WMenuBar * menubar)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static void
+static inline void
 menubar_free_menu (WMenuBar * menubar)
 {
-    if (menubar->menu != NULL)
-        g_list_free_full (menubar->menu, (GDestroyNotify) destroy_menu);
+    g_clear_list (&menubar->menu, (GDestroyNotify) destroy_menu);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -692,7 +691,7 @@ menubar_get_menu_by_x_coord (const WMenu
     GList *menu;
 
     for (i = 0, menu = menubar->menu;
-         menu != NULL && x > MENU (menu->data)->start_x; i++, menu = g_list_next (menu))
+         menu != NULL && x >= MENU (menu->data)->start_x; i++, menu = g_list_next (menu))
         ;
 
     /* Don't set the invalid value -1 */
@@ -873,7 +872,7 @@ menu_entry_create (const char *name, lon
 
     entry = g_new (menu_entry_t, 1);
     entry->first_letter = ' ';
-    entry->text = parse_hotkey (name);
+    entry->text = hotkey_new (name);
     entry->command = command;
     entry->shortcut = NULL;
 
@@ -887,7 +886,7 @@ menu_entry_free (menu_entry_t * entry)
 {
     if (entry != NULL)
     {
-        release_hotkey (entry->text);
+        hotkey_free (entry->text);
         g_free (entry->shortcut);
         g_free (entry);
     }
@@ -902,7 +901,7 @@ create_menu (const char *name, GList * e
 
     menu = g_new (menu_t, 1);
     menu->start_x = 0;
-    menu->text = parse_hotkey (name);
+    menu->text = hotkey_new (name);
     menu->entries = entries;
     menu->max_entry_len = 1;
     menu->max_hotkey_len = 0;
@@ -917,8 +916,8 @@ create_menu (const char *name, GList * e
 void
 menu_set_name (menu_t * menu, const char *name)
 {
-    release_hotkey (menu->text);
-    menu->text = parse_hotkey (name);
+    hotkey_free (menu->text);
+    menu->text = hotkey_new (name);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -926,7 +925,7 @@ menu_set_name (menu_t * menu, const char
 void
 destroy_menu (menu_t * menu)
 {
-    release_hotkey (menu->text);
+    hotkey_free (menu->text);
     g_list_free_full (menu->entries, (GDestroyNotify) menu_entry_free);
     g_free (menu->help_node);
     g_free (menu);
@@ -935,14 +934,15 @@ destroy_menu (menu_t * menu)
 /* --------------------------------------------------------------------------------------------- */
 
 WMenuBar *
-menubar_new (int y, int x, int cols, GList * menu, gboolean visible)
+menubar_new (GList * menu, gboolean visible)
 {
     WMenuBar *menubar;
     Widget *w;
 
     menubar = g_new0 (WMenuBar, 1);
     w = WIDGET (menubar);
-    widget_init (w, y, x, 1, cols, menubar_callback, menubar_mouse_callback);
+    widget_init (w, 0, 0, 1, COLS, menubar_callback, menubar_mouse_callback);
+    w->pos_flags = WPOS_KEEP_HORZ | WPOS_KEEP_TOP;
     /* initially, menubar is not selectable */
     widget_set_options (w, WOP_SELECTABLE, FALSE);
     w->options |= WOP_TOP_SELECT;
diff -urpN mc-4.8.23/lib/widget/menu.h mc-4.8.24/lib/widget/menu.h
--- mc-4.8.23/lib/widget/menu.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/menu.h	2020-01-01 19:52:34.000000000 +0400
@@ -39,6 +39,8 @@ typedef struct WMenuBar
 
 /*** global variables defined in .c file *********************************************************/
 
+extern const global_keymap_t *menu_map;
+
 /*** declarations of public functions ************************************************************/
 
 menu_entry_t *menu_entry_create (const char *name, long command);
@@ -48,7 +50,7 @@ menu_t *create_menu (const char *name, G
 void menu_set_name (menu_t * menu, const char *name);
 void destroy_menu (menu_t * menu);
 
-WMenuBar *menubar_new (int y, int x, int cols, GList * menu, gboolean visible);
+WMenuBar *menubar_new (GList * menu, gboolean visible);
 void menubar_set_menu (WMenuBar * menubar, GList * menu);
 void menubar_add_menu (WMenuBar * menubar, menu_t * menu);
 void menubar_arrange (WMenuBar * menubar);
diff -urpN mc-4.8.23/lib/widget/radio.c mc-4.8.24/lib/widget/radio.c
--- mc-4.8.23/lib/widget/radio.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/radio.c	2020-01-01 19:52:34.000000000 +0400
@@ -92,7 +92,7 @@ radio_callback (Widget * w, Widget * sen
             if (r->pos > 0)
             {
                 r->pos--;
-                widget_redraw (w);
+                widget_draw (w);
                 return MSG_HANDLED;
             }
             return MSG_NOT_HANDLED;
@@ -102,7 +102,7 @@ radio_callback (Widget * w, Widget * sen
             if (r->count - 1 > r->pos)
             {
                 r->pos++;
-                widget_redraw (w);
+                widget_draw (w);
                 return MSG_HANDLED;
             }
             return MSG_NOT_HANDLED;
@@ -112,7 +112,7 @@ radio_callback (Widget * w, Widget * sen
         }
 
     case MSG_CURSOR:
-        widget_move (r, r->pos, 1);
+        widget_gotoyx (r, r->pos, 1);
         return MSG_HANDLED;
 
     case MSG_DRAW:
@@ -124,7 +124,7 @@ radio_callback (Widget * w, Widget * sen
             for (i = 0; i < r->count; i++)
             {
                 widget_selectcolor (w, i == r->pos && focused, FALSE);
-                widget_move (w, i, 0);
+                widget_gotoyx (w, i, 0);
                 tty_draw_hline (w->y + i, w->x, ' ', w->cols);
                 tty_print_string ((r->sel == i) ? "(*) " : "( ) ");
                 hotkey_draw (w, r->texts[i], i == r->pos && focused);
@@ -135,7 +135,7 @@ radio_callback (Widget * w, Widget * sen
 
     case MSG_DESTROY:
         for (i = 0; i < r->count; i++)
-            release_hotkey (r->texts[i]);
+            hotkey_free (r->texts[i]);
         g_free (r->texts);
         return MSG_HANDLED;
 
@@ -188,7 +188,7 @@ radio_new (int y, int x, int count, cons
     {
         int width;
 
-        r->texts[i] = parse_hotkey (texts[i]);
+        r->texts[i] = hotkey_new (texts[i]);
         width = hotkey_width (r->texts[i]);
         wmax = MAX (width, wmax);
     }
diff -urpN mc-4.8.23/lib/widget/widget-common.c mc-4.8.24/lib/widget/widget-common.c
--- mc-4.8.23/lib/widget/widget-common.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/widget-common.c	2020-01-01 19:52:34.000000000 +0400
@@ -110,13 +110,31 @@ widget_reorder (GList * l, gboolean set_
         h->widgets = g_list_concat (l, h->widgets);
 }
 
+/* --------------------------------------------------------------------------------------------- */
+
+static gboolean
+hotkey_cmp (const char *s1, const char *s2)
+{
+    gboolean n1, n2;
+
+    n1 = s1 != NULL;
+    n2 = s2 != NULL;
+
+    if (n1 != n2)
+        return FALSE;
+
+    if (n1 && n2 && strcmp (s1, s2) != 0)
+        return FALSE;
+
+    return TRUE;
+}
 
 /* --------------------------------------------------------------------------------------------- */
 /*** public functions ****************************************************************************/
 /* --------------------------------------------------------------------------------------------- */
 
 struct hotkey_t
-parse_hotkey (const char *text)
+hotkey_new (const char *text)
 {
     hotkey_t result;
     const char *cp, *p;
@@ -151,7 +169,7 @@ parse_hotkey (const char *text)
 /* --------------------------------------------------------------------------------------------- */
 
 void
-release_hotkey (const hotkey_t hotkey)
+hotkey_free (const hotkey_t hotkey)
 {
     g_free (hotkey.start);
     g_free (hotkey.hotkey);
@@ -173,21 +191,59 @@ hotkey_width (const hotkey_t hotkey)
 
 /* --------------------------------------------------------------------------------------------- */
 
+gboolean
+hotkey_equal (const hotkey_t hotkey1, const hotkey_t hotkey2)
+{
+    /* *INDENT-OFF* */
+    return (strcmp (hotkey1.start, hotkey2.start) == 0) &&
+           hotkey_cmp (hotkey1.hotkey, hotkey2.hotkey) &&
+           hotkey_cmp (hotkey1.end, hotkey2.end);
+    /* *INDENT-ON* */
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 void
 hotkey_draw (Widget * w, const hotkey_t hotkey, gboolean focused)
 {
-    widget_selectcolor (w, focused, FALSE);
-    tty_print_string (hotkey.start);
+    if (hotkey.start[0] != '\0')
+    {
+        widget_selectcolor (w, focused, FALSE);
+        tty_print_string (hotkey.start);
+    }
 
     if (hotkey.hotkey != NULL)
     {
         widget_selectcolor (w, focused, TRUE);
         tty_print_string (hotkey.hotkey);
-        widget_selectcolor (w, focused, FALSE);
     }
 
     if (hotkey.end != NULL)
+    {
+        widget_selectcolor (w, focused, FALSE);
         tty_print_string (hotkey.end);
+    }
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+char *
+hotkey_get_text (const hotkey_t hotkey)
+{
+    GString *text;
+
+    text = g_string_new (hotkey.start);
+
+    if (hotkey.hotkey != NULL)
+    {
+        g_string_append_c (text, '&');
+        g_string_append (text, hotkey.hotkey);
+    }
+
+    if (hotkey.end != NULL)
+        g_string_append (text, hotkey.end);
+
+    return g_string_free (text, FALSE);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -215,6 +271,15 @@ widget_init (Widget * w, int y, int x, i
 
 /* --------------------------------------------------------------------------------------------- */
 
+void
+widget_destroy (Widget * w)
+{
+    send_message (w, NULL, MSG_DESTROY, 0, NULL);
+    g_free (w);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 /* Default callback for widgets */
 cb_ret_t
 widget_default_callback (Widget * w, Widget * sender, widget_msg_t msg, int parm, void *data)
@@ -330,6 +395,36 @@ widget_set_state (Widget * w, widget_sta
 /* --------------------------------------------------------------------------------------------- */
 
 void
+widget_adjust_position (widget_pos_flags_t pos_flags, int *y, int *x, int *lines, int *cols)
+{
+    if ((pos_flags & WPOS_FULLSCREEN) != 0)
+    {
+        *y = 0;
+        *x = 0;
+        *lines = LINES;
+        *cols = COLS;
+    }
+    else
+    {
+        if ((pos_flags & WPOS_CENTER_HORZ) != 0)
+            *x = (COLS - *cols) / 2;
+
+        if ((pos_flags & WPOS_CENTER_VERT) != 0)
+            *y = (LINES - *lines) / 2;
+
+        if ((pos_flags & WPOS_TRYUP) != 0)
+        {
+            if (*y > 3)
+                *y -= 2;
+            else if (*y == 3)
+                *y = 2;
+        }
+    }
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+void
 widget_set_size (Widget * widget, int y, int x, int lines, int cols)
 {
     widget->x = x;
@@ -395,7 +490,7 @@ widget_is_active (const void *w)
 /* --------------------------------------------------------------------------------------------- */
 
 void
-widget_redraw (Widget * w)
+widget_draw (Widget * w)
 {
     if (w != NULL)
     {
@@ -464,7 +559,7 @@ widget_replace (Widget * old_w, Widget *
     if (should_focus)
         widget_select (new_w);
     else
-        widget_redraw (new_w);
+        widget_draw (new_w);
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/lib/widget/widget-common.h mc-4.8.24/lib/widget/widget-common.h
--- mc-4.8.23/lib/widget/widget-common.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/lib/widget/widget-common.h	2020-01-01 19:52:34.000000000 +0400
@@ -14,7 +14,7 @@
 #define WIDGET(x) ((Widget *)(x))
 #define CONST_WIDGET(x) ((const Widget *)(x))
 
-#define widget_move(w, _y, _x) tty_gotoyx (CONST_WIDGET(w)->y + (_y), CONST_WIDGET(w)->x + (_x))
+#define widget_gotoyx(w, _y, _x) tty_gotoyx (CONST_WIDGET(w)->y + (_y), CONST_WIDGET(w)->x + (_x))
 /* Sets/clear the specified flag in the options field */
 #define widget_want_cursor(w,i) widget_set_options(w, WOP_WANT_CURSOR, i)
 #define widget_want_hotkey(w,i) widget_set_options(w, WOP_WANT_HOTKEY, i)
@@ -154,9 +154,9 @@ struct Widget
  */
 typedef struct hotkey_t
 {
-    char *start;
-    char *hotkey;
-    char *end;
+    char *start;                /* never NULL */
+    char *hotkey;               /* can be NULL */
+    char *end;                  /* can be NULL */
 } hotkey_t;
 
 /*** global variables defined in .c file *********************************************************/
@@ -164,26 +164,32 @@ typedef struct hotkey_t
 /*** declarations of public functions ************************************************************/
 
 /* create hotkey from text */
-hotkey_t parse_hotkey (const char *text);
+hotkey_t hotkey_new (const char *text);
 /* release hotkey, free all mebers of hotkey_t */
-void release_hotkey (const hotkey_t hotkey);
+void hotkey_free (const hotkey_t hotkey);
 /* return width on terminal of hotkey */
 int hotkey_width (const hotkey_t hotkey);
+/* compare two hotkeys */
+gboolean hotkey_equal (const hotkey_t hotkey1, const hotkey_t hotkey2);
 /* draw hotkey of widget */
 void hotkey_draw (Widget * w, const hotkey_t hotkey, gboolean focused);
+/* get text of hotkey */
+char *hotkey_get_text (const hotkey_t hotkey);
 
 /* widget initialization */
 void widget_init (Widget * w, int y, int x, int lines, int cols,
                   widget_cb_fn callback, widget_mouse_cb_fn mouse_callback);
+void widget_destroy (Widget * w);
 /* Default callback for widgets */
 cb_ret_t widget_default_callback (Widget * w, Widget * sender, widget_msg_t msg, int parm,
                                   void *data);
 void widget_set_options (Widget * w, widget_options_t options, gboolean enable);
 cb_ret_t widget_set_state (Widget * w, widget_state_t state, gboolean enable);
+void widget_adjust_position (widget_pos_flags_t pos_flags, int *y, int *x, int *lines, int *cols);
 void widget_set_size (Widget * widget, int y, int x, int lines, int cols);
 /* select color for widget in dependance of state */
 void widget_selectcolor (Widget * w, gboolean focused, gboolean hotkey);
-void widget_redraw (Widget * w);
+void widget_draw (Widget * w);
 void widget_erase (Widget * w);
 gboolean widget_is_active (const void *w);
 gboolean widget_overlapped (const Widget * a, const Widget * b);
diff -urpN mc-4.8.23/m4/codeset.m4 mc-4.8.24/m4/codeset.m4
--- mc-4.8.23/m4/codeset.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/codeset.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,21 +0,0 @@
-# codeset.m4 serial 4 (gettext-0.18)
-dnl Copyright (C) 2000-2002, 2006, 2008-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Bruno Haible.
-
-AC_DEFUN([AM_LANGINFO_CODESET],
-[
-  AC_CACHE_CHECK([for nl_langinfo and CODESET], [am_cv_langinfo_codeset],
-    [AC_TRY_LINK([#include <langinfo.h>],
-      [char* cs = nl_langinfo(CODESET); return !cs;],
-      [am_cv_langinfo_codeset=yes],
-      [am_cv_langinfo_codeset=no])
-    ])
-  if test $am_cv_langinfo_codeset = yes; then
-    AC_DEFINE([HAVE_LANGINFO_CODESET], [1],
-      [Define if you have <langinfo.h> and nl_langinfo(CODESET).])
-  fi
-])
diff -urpN mc-4.8.23/m4/fcntl-o.m4 mc-4.8.24/m4/fcntl-o.m4
--- mc-4.8.23/m4/fcntl-o.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/fcntl-o.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,81 +0,0 @@
-# fcntl-o.m4 serial 1
-dnl Copyright (C) 2006, 2009-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl Written by Paul Eggert.
-
-# Test whether the flags O_NOATIME and O_NOFOLLOW actually work.
-# Define HAVE_WORKING_O_NOATIME to 1 if O_NOATIME works, or to 0 otherwise.
-# Define HAVE_WORKING_O_NOFOLLOW to 1 if O_NOFOLLOW works, or to 0 otherwise.
-AC_DEFUN([gl_FCNTL_O_FLAGS],
-[
-  dnl Persuade glibc <fcntl.h> to define O_NOATIME and O_NOFOLLOW.
-  AC_REQUIRE([AC_USE_SYSTEM_EXTENSIONS])
-  AC_CACHE_CHECK([for working fcntl.h], [gl_cv_header_working_fcntl_h],
-    [AC_RUN_IFELSE(
-       [AC_LANG_PROGRAM(
-          [[#include <sys/types.h>
-           #include <sys/stat.h>
-           #include <unistd.h>
-           #include <fcntl.h>
-           #ifndef O_NOATIME
-            #define O_NOATIME 0
-           #endif
-           #ifndef O_NOFOLLOW
-            #define O_NOFOLLOW 0
-           #endif
-           static int const constants[] =
-            {
-              O_CREAT, O_EXCL, O_NOCTTY, O_TRUNC, O_APPEND,
-              O_NONBLOCK, O_SYNC, O_ACCMODE, O_RDONLY, O_RDWR, O_WRONLY
-            };
-          ]],
-          [[
-            int status = !constants;
-            {
-              static char const sym[] = "conftest.sym";
-              if (symlink (".", sym) != 0
-                  || close (open (sym, O_RDONLY | O_NOFOLLOW)) == 0)
-                status |= 32;
-              unlink (sym);
-            }
-            {
-              static char const file[] = "confdefs.h";
-              int fd = open (file, O_RDONLY | O_NOATIME);
-              char c;
-              struct stat st0, st1;
-              if (fd < 0
-                  || fstat (fd, &st0) != 0
-                  || sleep (1) != 0
-                  || read (fd, &c, 1) != 1
-                  || close (fd) != 0
-                  || stat (file, &st1) != 0
-                  || st0.st_atime != st1.st_atime)
-                status |= 64;
-            }
-            return status;]])],
-       [gl_cv_header_working_fcntl_h=yes],
-       [case $? in #(
-        32) gl_cv_header_working_fcntl_h='no (bad O_NOFOLLOW)';; #(
-        64) gl_cv_header_working_fcntl_h='no (bad O_NOATIME)';; #(
-        96) gl_cv_header_working_fcntl_h='no (bad O_NOATIME, O_NOFOLLOW)';; #(
-         *) gl_cv_header_working_fcntl_h='no';;
-        esac],
-       [gl_cv_header_working_fcntl_h=cross-compiling])])
-
-  case $gl_cv_header_working_fcntl_h in #(
-  *O_NOATIME* | no | cross-compiling) ac_val=0;; #(
-  *) ac_val=1;;
-  esac
-  AC_DEFINE_UNQUOTED([HAVE_WORKING_O_NOATIME], [$ac_val],
-    [Define to 1 if O_NOATIME works.])
-
-  case $gl_cv_header_working_fcntl_h in #(
-  *O_NOFOLLOW* | no | cross-compiling) ac_val=0;; #(
-  *) ac_val=1;;
-  esac
-  AC_DEFINE_UNQUOTED([HAVE_WORKING_O_NOFOLLOW], [$ac_val],
-    [Define to 1 if O_NOFOLLOW works.])
-])
diff -urpN mc-4.8.23/m4/glibc2.m4 mc-4.8.24/m4/glibc2.m4
--- mc-4.8.23/m4/glibc2.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/glibc2.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,30 +0,0 @@
-# glibc2.m4 serial 2
-dnl Copyright (C) 2000-2002, 2004, 2008-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-# Test for the GNU C Library, version 2.0 or newer.
-# From Bruno Haible.
-
-AC_DEFUN([gt_GLIBC2],
-  [
-    AC_CACHE_CHECK([whether we are using the GNU C Library 2 or newer],
-      [ac_cv_gnu_library_2],
-      [AC_EGREP_CPP([Lucky GNU user],
-        [
-#include <features.h>
-#ifdef __GNU_LIBRARY__
- #if (__GLIBC__ >= 2)
-  Lucky GNU user
- #endif
-#endif
-        ],
-        [ac_cv_gnu_library_2=yes],
-        [ac_cv_gnu_library_2=no])
-      ]
-    )
-    AC_SUBST([GLIBC2])
-    GLIBC2="$ac_cv_gnu_library_2"
-  ]
-)
diff -urpN mc-4.8.23/m4/glibc21.m4 mc-4.8.24/m4/glibc21.m4
--- mc-4.8.23/m4/glibc21.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/glibc21.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,30 +0,0 @@
-# glibc21.m4 serial 4
-dnl Copyright (C) 2000-2002, 2004, 2008-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-# Test for the GNU C Library, version 2.1 or newer.
-# From Bruno Haible.
-
-AC_DEFUN([gl_GLIBC21],
-  [
-    AC_CACHE_CHECK([whether we are using the GNU C Library 2.1 or newer],
-      [ac_cv_gnu_library_2_1],
-      [AC_EGREP_CPP([Lucky GNU user],
-        [
-#include <features.h>
-#ifdef __GNU_LIBRARY__
- #if (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 1) || (__GLIBC__ > 2)
-  Lucky GNU user
- #endif
-#endif
-        ],
-        [ac_cv_gnu_library_2_1=yes],
-        [ac_cv_gnu_library_2_1=no])
-      ]
-    )
-    AC_SUBST([GLIBC21])
-    GLIBC21="$ac_cv_gnu_library_2_1"
-  ]
-)
diff -urpN mc-4.8.23/m4/intdiv0.m4 mc-4.8.24/m4/intdiv0.m4
--- mc-4.8.23/m4/intdiv0.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/intdiv0.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,84 +0,0 @@
-# intdiv0.m4 serial 3 (gettext-0.18)
-dnl Copyright (C) 2002, 2007-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Bruno Haible.
-
-AC_DEFUN([gt_INTDIV0],
-[
-  AC_REQUIRE([AC_PROG_CC])dnl
-  AC_REQUIRE([AC_CANONICAL_HOST])dnl
-
-  AC_CACHE_CHECK([whether integer division by zero raises SIGFPE],
-    gt_cv_int_divbyzero_sigfpe,
-    [
-      gt_cv_int_divbyzero_sigfpe=
-changequote(,)dnl
-      case "$host_os" in
-        macos* | darwin[6-9]* | darwin[1-9][0-9]*)
-          # On MacOS X 10.2 or newer, just assume the same as when cross-
-          # compiling. If we were to perform the real test, 1 Crash Report
-          # dialog window would pop up.
-          case "$host_cpu" in
-            i[34567]86 | x86_64)
-              gt_cv_int_divbyzero_sigfpe="guessing yes" ;;
-          esac
-          ;;
-      esac
-changequote([,])dnl
-      if test -z "$gt_cv_int_divbyzero_sigfpe"; then
-        AC_TRY_RUN([
-#include <stdlib.h>
-#include <signal.h>
-
-static void
-sigfpe_handler (int sig)
-{
-  /* Exit with code 0 if SIGFPE, with code 1 if any other signal.  */
-  exit (sig != SIGFPE);
-}
-
-int x = 1;
-int y = 0;
-int z;
-int nan;
-
-int main ()
-{
-  signal (SIGFPE, sigfpe_handler);
-/* IRIX and AIX (when "xlc -qcheck" is used) yield signal SIGTRAP.  */
-#if (defined (__sgi) || defined (_AIX)) && defined (SIGTRAP)
-  signal (SIGTRAP, sigfpe_handler);
-#endif
-/* Linux/SPARC yields signal SIGILL.  */
-#if defined (__sparc__) && defined (__linux__)
-  signal (SIGILL, sigfpe_handler);
-#endif
-
-  z = x / y;
-  nan = y / y;
-  exit (1);
-}
-], [gt_cv_int_divbyzero_sigfpe=yes], [gt_cv_int_divbyzero_sigfpe=no],
-          [
-            # Guess based on the CPU.
-changequote(,)dnl
-            case "$host_cpu" in
-              alpha* | i[34567]86 | x86_64 | m68k | s390*)
-                gt_cv_int_divbyzero_sigfpe="guessing yes";;
-              *)
-                gt_cv_int_divbyzero_sigfpe="guessing no";;
-            esac
-changequote([,])dnl
-          ])
-      fi
-    ])
-  case "$gt_cv_int_divbyzero_sigfpe" in
-    *yes) value=1;;
-    *) value=0;;
-  esac
-  AC_DEFINE_UNQUOTED([INTDIV0_RAISES_SIGFPE], [$value],
-    [Define if integer division by zero raises signal SIGFPE.])
-])
diff -urpN mc-4.8.23/m4/intl.m4 mc-4.8.24/m4/intl.m4
--- mc-4.8.23/m4/intl.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/intl.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,294 +0,0 @@
-# intl.m4 serial 17 (gettext-0.18)
-dnl Copyright (C) 1995-2009 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-dnl
-dnl This file can can be used in projects which are not available under
-dnl the GNU General Public License or the GNU Library General Public
-dnl License but which still want to provide support for the GNU gettext
-dnl functionality.
-dnl Please note that the actual code of the GNU gettext library is covered
-dnl by the GNU Library General Public License, and the rest of the GNU
-dnl gettext package package is covered by the GNU General Public License.
-dnl They are *not* in the public domain.
-
-dnl Authors:
-dnl   Ulrich Drepper <drepper@cygnus.com>, 1995-2000.
-dnl   Bruno Haible <haible@clisp.cons.org>, 2000-2009.
-
-AC_PREREQ([2.52])
-
-dnl Checks for all prerequisites of the intl subdirectory,
-dnl except for INTL_LIBTOOL_SUFFIX_PREFIX (and possibly LIBTOOL), INTLOBJS,
-dnl            USE_INCLUDED_LIBINTL, BUILD_INCLUDED_LIBINTL.
-AC_DEFUN([AM_INTL_SUBDIR],
-[
-  AC_REQUIRE([AC_PROG_INSTALL])dnl
-  AC_REQUIRE([AM_PROG_MKDIR_P])dnl defined by automake
-  AC_REQUIRE([AC_PROG_CC])dnl
-  AC_REQUIRE([AC_CANONICAL_HOST])dnl
-  AC_REQUIRE([gt_GLIBC2])dnl
-  AC_REQUIRE([AC_PROG_RANLIB])dnl
-  AC_REQUIRE([gl_VISIBILITY])dnl
-  AC_REQUIRE([gt_INTL_SUBDIR_CORE])dnl
-  AC_REQUIRE([AC_TYPE_LONG_LONG_INT])dnl
-  AC_REQUIRE([gt_TYPE_WCHAR_T])dnl
-  AC_REQUIRE([gt_TYPE_WINT_T])dnl
-  AC_REQUIRE([gl_AC_HEADER_INTTYPES_H])
-  AC_REQUIRE([gt_TYPE_INTMAX_T])
-  AC_REQUIRE([gt_PRINTF_POSIX])
-  AC_REQUIRE([gl_GLIBC21])dnl
-  AC_REQUIRE([gl_XSIZE])dnl
-  AC_REQUIRE([gl_FCNTL_O_FLAGS])dnl
-  AC_REQUIRE([gt_INTL_MACOSX])dnl
-
-  dnl Support for automake's --enable-silent-rules.
-  case "$enable_silent_rules" in
-    yes) INTL_DEFAULT_VERBOSITY=0;;
-    no)  INTL_DEFAULT_VERBOSITY=1;;
-    *)   INTL_DEFAULT_VERBOSITY=1;;
-  esac
-  AC_SUBST([INTL_DEFAULT_VERBOSITY])
-
-  AC_CHECK_TYPE([ptrdiff_t], ,
-    [AC_DEFINE([ptrdiff_t], [long],
-       [Define as the type of the result of subtracting two pointers, if the system doesn't define it.])
-    ])
-  AC_CHECK_HEADERS([stddef.h stdlib.h string.h])
-  AC_CHECK_FUNCS([asprintf fwprintf newlocale putenv setenv setlocale \
-    snprintf strnlen wcslen wcsnlen mbrtowc wcrtomb])
-
-  dnl Use the _snprintf function only if it is declared (because on NetBSD it
-  dnl is defined as a weak alias of snprintf; we prefer to use the latter).
-  gt_CHECK_DECL(_snprintf, [#include <stdio.h>])
-  gt_CHECK_DECL(_snwprintf, [#include <stdio.h>])
-
-  dnl Use the *_unlocked functions only if they are declared.
-  dnl (because some of them were defined without being declared in Solaris
-  dnl 2.5.1 but were removed in Solaris 2.6, whereas we want binaries built
-  dnl on Solaris 2.5.1 to run on Solaris 2.6).
-  dnl Don't use AC_CHECK_DECLS because it isn't supported in autoconf-2.13.
-  gt_CHECK_DECL(getc_unlocked, [#include <stdio.h>])
-
-  case $gt_cv_func_printf_posix in
-    *yes) HAVE_POSIX_PRINTF=1 ;;
-    *) HAVE_POSIX_PRINTF=0 ;;
-  esac
-  AC_SUBST([HAVE_POSIX_PRINTF])
-  if test "$ac_cv_func_asprintf" = yes; then
-    HAVE_ASPRINTF=1
-  else
-    HAVE_ASPRINTF=0
-  fi
-  AC_SUBST([HAVE_ASPRINTF])
-  if test "$ac_cv_func_snprintf" = yes; then
-    HAVE_SNPRINTF=1
-  else
-    HAVE_SNPRINTF=0
-  fi
-  AC_SUBST([HAVE_SNPRINTF])
-  if test "$ac_cv_func_newlocale" = yes; then
-    HAVE_NEWLOCALE=1
-  else
-    HAVE_NEWLOCALE=0
-  fi
-  AC_SUBST([HAVE_NEWLOCALE])
-  if test "$ac_cv_func_wprintf" = yes; then
-    HAVE_WPRINTF=1
-  else
-    HAVE_WPRINTF=0
-  fi
-  AC_SUBST([HAVE_WPRINTF])
-
-  AM_LANGINFO_CODESET
-  gt_LC_MESSAGES
-
-  dnl Compilation on mingw and Cygwin needs special Makefile rules, because
-  dnl 1. when we install a shared library, we must arrange to export
-  dnl    auxiliary pointer variables for every exported variable,
-  dnl 2. when we install a shared library and a static library simultaneously,
-  dnl    the include file specifies __declspec(dllimport) and therefore we
-  dnl    must arrange to define the auxiliary pointer variables for the
-  dnl    exported variables _also_ in the static library.
-  if test "$enable_shared" = yes; then
-    case "$host_os" in
-      mingw* | cygwin*) is_woe32dll=yes ;;
-      *) is_woe32dll=no ;;
-    esac
-  else
-    is_woe32dll=no
-  fi
-  WOE32DLL=$is_woe32dll
-  AC_SUBST([WOE32DLL])
-
-  dnl On mingw and Cygwin, we can activate special Makefile rules which add
-  dnl version information to the shared libraries and executables.
-  case "$host_os" in
-    mingw* | cygwin*) is_woe32=yes ;;
-    *) is_woe32=no ;;
-  esac
-  WOE32=$is_woe32
-  AC_SUBST([WOE32])
-  if test $WOE32 = yes; then
-    dnl Check for a program that compiles Windows resource files.
-    AC_CHECK_TOOL([WINDRES], [windres])
-  fi
-
-  dnl Determine whether when creating a library, "-lc" should be passed to
-  dnl libtool or not. On many platforms, it is required for the libtool option
-  dnl -no-undefined to work. On HP-UX, however, the -lc - stored by libtool
-  dnl in the *.la files - makes it impossible to create multithreaded programs,
-  dnl because libtool also reorders the -lc to come before the -pthread, and
-  dnl this disables pthread_create() <http://docs.hp.com/en/1896/pthreads.html>.
-  case "$host_os" in
-    hpux*) LTLIBC="" ;;
-    *)     LTLIBC="-lc" ;;
-  esac
-  AC_SUBST([LTLIBC])
-
-  dnl Rename some macros and functions used for locking.
-  AH_BOTTOM([
-#define __libc_lock_t                   gl_lock_t
-#define __libc_lock_define              gl_lock_define
-#define __libc_lock_define_initialized  gl_lock_define_initialized
-#define __libc_lock_init                gl_lock_init
-#define __libc_lock_lock                gl_lock_lock
-#define __libc_lock_unlock              gl_lock_unlock
-#define __libc_lock_recursive_t                   gl_recursive_lock_t
-#define __libc_lock_define_recursive              gl_recursive_lock_define
-#define __libc_lock_define_initialized_recursive  gl_recursive_lock_define_initialized
-#define __libc_lock_init_recursive                gl_recursive_lock_init
-#define __libc_lock_lock_recursive                gl_recursive_lock_lock
-#define __libc_lock_unlock_recursive              gl_recursive_lock_unlock
-#define glthread_in_use  libintl_thread_in_use
-#define glthread_lock_init_func     libintl_lock_init_func
-#define glthread_lock_lock_func     libintl_lock_lock_func
-#define glthread_lock_unlock_func   libintl_lock_unlock_func
-#define glthread_lock_destroy_func  libintl_lock_destroy_func
-#define glthread_rwlock_init_multithreaded     libintl_rwlock_init_multithreaded
-#define glthread_rwlock_init_func              libintl_rwlock_init_func
-#define glthread_rwlock_rdlock_multithreaded   libintl_rwlock_rdlock_multithreaded
-#define glthread_rwlock_rdlock_func            libintl_rwlock_rdlock_func
-#define glthread_rwlock_wrlock_multithreaded   libintl_rwlock_wrlock_multithreaded
-#define glthread_rwlock_wrlock_func            libintl_rwlock_wrlock_func
-#define glthread_rwlock_unlock_multithreaded   libintl_rwlock_unlock_multithreaded
-#define glthread_rwlock_unlock_func            libintl_rwlock_unlock_func
-#define glthread_rwlock_destroy_multithreaded  libintl_rwlock_destroy_multithreaded
-#define glthread_rwlock_destroy_func           libintl_rwlock_destroy_func
-#define glthread_recursive_lock_init_multithreaded     libintl_recursive_lock_init_multithreaded
-#define glthread_recursive_lock_init_func              libintl_recursive_lock_init_func
-#define glthread_recursive_lock_lock_multithreaded     libintl_recursive_lock_lock_multithreaded
-#define glthread_recursive_lock_lock_func              libintl_recursive_lock_lock_func
-#define glthread_recursive_lock_unlock_multithreaded   libintl_recursive_lock_unlock_multithreaded
-#define glthread_recursive_lock_unlock_func            libintl_recursive_lock_unlock_func
-#define glthread_recursive_lock_destroy_multithreaded  libintl_recursive_lock_destroy_multithreaded
-#define glthread_recursive_lock_destroy_func           libintl_recursive_lock_destroy_func
-#define glthread_once_func            libintl_once_func
-#define glthread_once_singlethreaded  libintl_once_singlethreaded
-#define glthread_once_multithreaded   libintl_once_multithreaded
-])
-])
-
-
-dnl Checks for the core files of the intl subdirectory:
-dnl   dcigettext.c
-dnl   eval-plural.h
-dnl   explodename.c
-dnl   finddomain.c
-dnl   gettextP.h
-dnl   gmo.h
-dnl   hash-string.h hash-string.c
-dnl   l10nflist.c
-dnl   libgnuintl.h.in (except the *printf stuff)
-dnl   loadinfo.h
-dnl   loadmsgcat.c
-dnl   localealias.c
-dnl   log.c
-dnl   plural-exp.h plural-exp.c
-dnl   plural.y
-dnl Used by libglocale.
-AC_DEFUN([gt_INTL_SUBDIR_CORE],
-[
-  AC_REQUIRE([AC_C_INLINE])dnl
-  AC_REQUIRE([AC_TYPE_SIZE_T])dnl
-  AC_REQUIRE([gl_AC_HEADER_STDINT_H])
-  AC_REQUIRE([AC_FUNC_ALLOCA])dnl
-  AC_REQUIRE([AC_FUNC_MMAP])dnl
-  AC_REQUIRE([gt_INTDIV0])dnl
-  AC_REQUIRE([gl_AC_TYPE_UINTMAX_T])dnl
-  AC_REQUIRE([gt_INTTYPES_PRI])dnl
-  AC_REQUIRE([gl_LOCK])dnl
-
-  AC_TRY_LINK(
-    [int foo (int a) { a = __builtin_expect (a, 10); return a == 10 ? 0 : 1; }],
-    [],
-    [AC_DEFINE([HAVE_BUILTIN_EXPECT], [1],
-       [Define to 1 if the compiler understands __builtin_expect.])])
-
-  AC_CHECK_HEADERS([argz.h inttypes.h limits.h unistd.h sys/param.h])
-  AC_CHECK_FUNCS([getcwd getegid geteuid getgid getuid mempcpy munmap \
-    stpcpy strcasecmp strdup strtoul tsearch uselocale argz_count \
-    argz_stringify argz_next __fsetlocking])
-
-  dnl Use the *_unlocked functions only if they are declared.
-  dnl (because some of them were defined without being declared in Solaris
-  dnl 2.5.1 but were removed in Solaris 2.6, whereas we want binaries built
-  dnl on Solaris 2.5.1 to run on Solaris 2.6).
-  dnl Don't use AC_CHECK_DECLS because it isn't supported in autoconf-2.13.
-  gt_CHECK_DECL([feof_unlocked], [#include <stdio.h>])
-  gt_CHECK_DECL([fgets_unlocked], [#include <stdio.h>])
-
-  AM_ICONV
-
-  dnl intl/plural.c is generated from intl/plural.y. It requires bison,
-  dnl because plural.y uses bison specific features. It requires at least
-  dnl bison-1.26 because earlier versions generate a plural.c that doesn't
-  dnl compile.
-  dnl bison is only needed for the maintainer (who touches plural.y). But in
-  dnl order to avoid separate Makefiles or --enable-maintainer-mode, we put
-  dnl the rule in general Makefile. Now, some people carelessly touch the
-  dnl files or have a broken "make" program, hence the plural.c rule will
-  dnl sometimes fire. To avoid an error, defines BISON to ":" if it is not
-  dnl present or too old.
-  AC_CHECK_PROGS([INTLBISON], [bison])
-  if test -z "$INTLBISON"; then
-    ac_verc_fail=yes
-  else
-    dnl Found it, now check the version.
-    AC_MSG_CHECKING([version of bison])
-changequote(<<,>>)dnl
-    ac_prog_version=`$INTLBISON --version 2>&1 | sed -n 's/^.*GNU Bison.* \([0-9]*\.[0-9.]*\).*$/\1/p'`
-    case $ac_prog_version in
-      '') ac_prog_version="v. ?.??, bad"; ac_verc_fail=yes;;
-      1.2[6-9]* | 1.[3-9][0-9]* | [2-9].*)
-changequote([,])dnl
-         ac_prog_version="$ac_prog_version, ok"; ac_verc_fail=no;;
-      *) ac_prog_version="$ac_prog_version, bad"; ac_verc_fail=yes;;
-    esac
-    AC_MSG_RESULT([$ac_prog_version])
-  fi
-  if test $ac_verc_fail = yes; then
-    INTLBISON=:
-  fi
-])
-
-
-dnl gt_CHECK_DECL(FUNC, INCLUDES)
-dnl Check whether a function is declared.
-AC_DEFUN([gt_CHECK_DECL],
-[
-  AC_CACHE_CHECK([whether $1 is declared], [ac_cv_have_decl_$1],
-    [AC_TRY_COMPILE([$2], [
-#ifndef $1
-  char *p = (char *) $1;
-#endif
-], ac_cv_have_decl_$1=yes, ac_cv_have_decl_$1=no)])
-  if test $ac_cv_have_decl_$1 = yes; then
-    gt_value=1
-  else
-    gt_value=0
-  fi
-  AC_DEFINE_UNQUOTED([HAVE_DECL_]translit($1, [a-z], [A-Z]), [$gt_value],
-    [Define to 1 if you have the declaration of `$1', and to 0 if you don't.])
-])
diff -urpN mc-4.8.23/m4/intmax.m4 mc-4.8.24/m4/intmax.m4
--- mc-4.8.23/m4/intmax.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/intmax.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,33 +0,0 @@
-# intmax.m4 serial 5 (gettext-0.18)
-dnl Copyright (C) 2002-2005, 2008-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Bruno Haible.
-dnl Test whether the system has the 'intmax_t' type, but don't attempt to
-dnl find a replacement if it is lacking.
-
-AC_DEFUN([gt_TYPE_INTMAX_T],
-[
-  AC_REQUIRE([gl_AC_HEADER_INTTYPES_H])
-  AC_REQUIRE([gl_AC_HEADER_STDINT_H])
-  AC_CACHE_CHECK([for intmax_t], [gt_cv_c_intmax_t],
-    [AC_TRY_COMPILE([
-#include <stddef.h>
-#include <stdlib.h>
-#if HAVE_STDINT_H_WITH_UINTMAX
-#include <stdint.h>
-#endif
-#if HAVE_INTTYPES_H_WITH_UINTMAX
-#include <inttypes.h>
-#endif
-],     [intmax_t x = -1;
-        return !x;],
-       [gt_cv_c_intmax_t=yes],
-       [gt_cv_c_intmax_t=no])])
-  if test $gt_cv_c_intmax_t = yes; then
-    AC_DEFINE([HAVE_INTMAX_T], [1],
-      [Define if you have the 'intmax_t' type in <stdint.h> or <inttypes.h>.])
-  fi
-])
diff -urpN mc-4.8.23/m4/inttypes-pri.m4 mc-4.8.24/m4/inttypes-pri.m4
--- mc-4.8.23/m4/inttypes-pri.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/inttypes-pri.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,36 +0,0 @@
-# inttypes-pri.m4 serial 6 (gettext-0.18)
-dnl Copyright (C) 1997-2002, 2006, 2008-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Bruno Haible.
-
-AC_PREREQ([2.52])
-
-# Define PRI_MACROS_BROKEN if <inttypes.h> exists and defines the PRI*
-# macros to non-string values.  This is the case on AIX 4.3.3.
-
-AC_DEFUN([gt_INTTYPES_PRI],
-[
-  AC_CHECK_HEADERS([inttypes.h])
-  if test $ac_cv_header_inttypes_h = yes; then
-    AC_CACHE_CHECK([whether the inttypes.h PRIxNN macros are broken],
-      [gt_cv_inttypes_pri_broken],
-      [
-        AC_TRY_COMPILE([#include <inttypes.h>
-#ifdef PRId32
-char *p = PRId32;
-#endif
-], [], [gt_cv_inttypes_pri_broken=no], [gt_cv_inttypes_pri_broken=yes])
-      ])
-  fi
-  if test "$gt_cv_inttypes_pri_broken" = yes; then
-    AC_DEFINE_UNQUOTED([PRI_MACROS_BROKEN], [1],
-      [Define if <inttypes.h> exists and defines unusable PRI* macros.])
-    PRI_MACROS_BROKEN=1
-  else
-    PRI_MACROS_BROKEN=0
-  fi
-  AC_SUBST([PRI_MACROS_BROKEN])
-])
diff -urpN mc-4.8.23/m4/inttypes_h.m4 mc-4.8.24/m4/inttypes_h.m4
--- mc-4.8.23/m4/inttypes_h.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/inttypes_h.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,26 +0,0 @@
-# inttypes_h.m4 serial 9
-dnl Copyright (C) 1997-2004, 2006, 2008-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Paul Eggert.
-
-# Define HAVE_INTTYPES_H_WITH_UINTMAX if <inttypes.h> exists,
-# doesn't clash with <sys/types.h>, and declares uintmax_t.
-
-AC_DEFUN([gl_AC_HEADER_INTTYPES_H],
-[
-  AC_CACHE_CHECK([for inttypes.h], [gl_cv_header_inttypes_h],
-  [AC_TRY_COMPILE(
-    [#include <sys/types.h>
-#include <inttypes.h>],
-    [uintmax_t i = (uintmax_t) -1; return !i;],
-    [gl_cv_header_inttypes_h=yes],
-    [gl_cv_header_inttypes_h=no])])
-  if test $gl_cv_header_inttypes_h = yes; then
-    AC_DEFINE_UNQUOTED([HAVE_INTTYPES_H_WITH_UINTMAX], [1],
-      [Define if <inttypes.h> exists, doesn't clash with <sys/types.h>,
-       and declares uintmax_t. ])
-  fi
-])
diff -urpN mc-4.8.23/m4/lcmessage.m4 mc-4.8.24/m4/lcmessage.m4
--- mc-4.8.23/m4/lcmessage.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/lcmessage.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,31 +0,0 @@
-# lcmessage.m4 serial 6 (gettext-0.18)
-dnl Copyright (C) 1995-2002, 2004-2005, 2008-2010 Free Software Foundation,
-dnl Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-dnl
-dnl This file can can be used in projects which are not available under
-dnl the GNU General Public License or the GNU Library General Public
-dnl License but which still want to provide support for the GNU gettext
-dnl functionality.
-dnl Please note that the actual code of the GNU gettext library is covered
-dnl by the GNU Library General Public License, and the rest of the GNU
-dnl gettext package package is covered by the GNU General Public License.
-dnl They are *not* in the public domain.
-
-dnl Authors:
-dnl   Ulrich Drepper <drepper@cygnus.com>, 1995.
-
-# Check whether LC_MESSAGES is available in <locale.h>.
-
-AC_DEFUN([gt_LC_MESSAGES],
-[
-  AC_CACHE_CHECK([for LC_MESSAGES], [gt_cv_val_LC_MESSAGES],
-    [AC_TRY_LINK([#include <locale.h>], [return LC_MESSAGES],
-       [gt_cv_val_LC_MESSAGES=yes], [gt_cv_val_LC_MESSAGES=no])])
-  if test $gt_cv_val_LC_MESSAGES = yes; then
-    AC_DEFINE([HAVE_LC_MESSAGES], [1],
-      [Define if your <locale.h> file defines LC_MESSAGES.])
-  fi
-])
diff -urpN mc-4.8.23/m4/lock.m4 mc-4.8.24/m4/lock.m4
--- mc-4.8.23/m4/lock.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/lock.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,37 +0,0 @@
-# lock.m4 serial 10 (gettext-0.18)
-dnl Copyright (C) 2005-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Bruno Haible.
-
-AC_DEFUN([gl_LOCK],
-[
-  AC_REQUIRE([gl_THREADLIB])
-  if test "$gl_threads_api" = posix; then
-    # OSF/1 4.0 and MacOS X 10.1 lack the pthread_rwlock_t type and the
-    # pthread_rwlock_* functions.
-    AC_CHECK_TYPE([pthread_rwlock_t],
-      [AC_DEFINE([HAVE_PTHREAD_RWLOCK], [1],
-         [Define if the POSIX multithreading library has read/write locks.])],
-      [],
-      [#include <pthread.h>])
-    # glibc defines PTHREAD_MUTEX_RECURSIVE as enum, not as a macro.
-    AC_TRY_COMPILE([#include <pthread.h>],
-      [#if __FreeBSD__ == 4
-error "No, in FreeBSD 4.0 recursive mutexes actually don't work."
-#else
-int x = (int)PTHREAD_MUTEX_RECURSIVE;
-return !x;
-#endif],
-      [AC_DEFINE([HAVE_PTHREAD_MUTEX_RECURSIVE], [1],
-         [Define if the <pthread.h> defines PTHREAD_MUTEX_RECURSIVE.])])
-  fi
-  gl_PREREQ_LOCK
-])
-
-# Prerequisites of lib/lock.c.
-AC_DEFUN([gl_PREREQ_LOCK], [
-  AC_REQUIRE([AC_C_INLINE])
-])
diff -urpN mc-4.8.23/m4/printf-posix.m4 mc-4.8.24/m4/printf-posix.m4
--- mc-4.8.23/m4/printf-posix.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/printf-posix.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,45 +0,0 @@
-# printf-posix.m4 serial 5 (gettext-0.18)
-dnl Copyright (C) 2003, 2007, 2009-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Bruno Haible.
-dnl Test whether the printf() function supports POSIX/XSI format strings with
-dnl positions.
-
-AC_DEFUN([gt_PRINTF_POSIX],
-[
-  AC_REQUIRE([AC_PROG_CC])
-  AC_CACHE_CHECK([whether printf() supports POSIX/XSI format strings],
-    gt_cv_func_printf_posix,
-    [
-      AC_TRY_RUN([
-#include <stdio.h>
-#include <string.h>
-/* The string "%2$d %1$d", with dollar characters protected from the shell's
-   dollar expansion (possibly an autoconf bug).  */
-static char format[] = { '%', '2', '$', 'd', ' ', '%', '1', '$', 'd', '\0' };
-static char buf[100];
-int main ()
-{
-  sprintf (buf, format, 33, 55);
-  return (strcmp (buf, "55 33") != 0);
-}], gt_cv_func_printf_posix=yes, gt_cv_func_printf_posix=no,
-      [
-        AC_EGREP_CPP([notposix], [
-#if defined __NetBSD__ || defined __BEOS__ || defined _MSC_VER || defined __MINGW32__ || defined __CYGWIN__
-  notposix
-#endif
-          ],
-          [gt_cv_func_printf_posix="guessing no"],
-          [gt_cv_func_printf_posix="guessing yes"])
-      ])
-    ])
-  case $gt_cv_func_printf_posix in
-    *yes)
-      AC_DEFINE([HAVE_POSIX_PRINTF], [1],
-        [Define if your printf() function supports format strings with positions.])
-      ;;
-  esac
-])
diff -urpN mc-4.8.23/m4/size_max.m4 mc-4.8.24/m4/size_max.m4
--- mc-4.8.23/m4/size_max.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/size_max.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,75 +0,0 @@
-# size_max.m4 serial 9
-dnl Copyright (C) 2003, 2005-2006, 2008-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Bruno Haible.
-
-AC_DEFUN([gl_SIZE_MAX],
-[
-  AC_CHECK_HEADERS([stdint.h])
-  dnl First test whether the system already has SIZE_MAX.
-  AC_CACHE_CHECK([for SIZE_MAX], [gl_cv_size_max], [
-    gl_cv_size_max=
-    AC_EGREP_CPP([Found it], [
-#include <limits.h>
-#if HAVE_STDINT_H
-#include <stdint.h>
-#endif
-#ifdef SIZE_MAX
-Found it
-#endif
-], [gl_cv_size_max=yes])
-    if test -z "$gl_cv_size_max"; then
-      dnl Define it ourselves. Here we assume that the type 'size_t' is not wider
-      dnl than the type 'unsigned long'. Try hard to find a definition that can
-      dnl be used in a preprocessor #if, i.e. doesn't contain a cast.
-      AC_COMPUTE_INT([size_t_bits_minus_1], [sizeof (size_t) * CHAR_BIT - 1],
-        [#include <stddef.h>
-#include <limits.h>], [size_t_bits_minus_1=])
-      AC_COMPUTE_INT([fits_in_uint], [sizeof (size_t) <= sizeof (unsigned int)],
-        [#include <stddef.h>], [fits_in_uint=])
-      if test -n "$size_t_bits_minus_1" && test -n "$fits_in_uint"; then
-        if test $fits_in_uint = 1; then
-          dnl Even though SIZE_MAX fits in an unsigned int, it must be of type
-          dnl 'unsigned long' if the type 'size_t' is the same as 'unsigned long'.
-          AC_TRY_COMPILE([#include <stddef.h>
-            extern size_t foo;
-            extern unsigned long foo;
-            ], [], [fits_in_uint=0])
-        fi
-        dnl We cannot use 'expr' to simplify this expression, because 'expr'
-        dnl works only with 'long' integers in the host environment, while we
-        dnl might be cross-compiling from a 32-bit platform to a 64-bit platform.
-        if test $fits_in_uint = 1; then
-          gl_cv_size_max="(((1U << $size_t_bits_minus_1) - 1) * 2 + 1)"
-        else
-          gl_cv_size_max="(((1UL << $size_t_bits_minus_1) - 1) * 2 + 1)"
-        fi
-      else
-        dnl Shouldn't happen, but who knows...
-        gl_cv_size_max='((size_t)~(size_t)0)'
-      fi
-    fi
-  ])
-  if test "$gl_cv_size_max" != yes; then
-    AC_DEFINE_UNQUOTED([SIZE_MAX], [$gl_cv_size_max],
-      [Define as the maximum value of type 'size_t', if the system doesn't define it.])
-  fi
-  dnl Don't redefine SIZE_MAX in config.h if config.h is re-included after
-  dnl <stdint.h>. Remember that the #undef in AH_VERBATIM gets replaced with
-  dnl #define by AC_DEFINE_UNQUOTED.
-  AH_VERBATIM([SIZE_MAX],
-[/* Define as the maximum value of type 'size_t', if the system doesn't define
-   it. */
-#ifndef SIZE_MAX
-# undef SIZE_MAX
-#endif])
-])
-
-dnl Autoconf >= 2.61 has AC_COMPUTE_INT built-in.
-dnl Remove this when we can assume autoconf >= 2.61.
-m4_ifdef([AC_COMPUTE_INT], [], [
-  AC_DEFUN([AC_COMPUTE_INT], [_AC_COMPUTE_INT([$2],[$1],[$3],[$4])])
-])
diff -urpN mc-4.8.23/m4/stdint_h.m4 mc-4.8.24/m4/stdint_h.m4
--- mc-4.8.23/m4/stdint_h.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/stdint_h.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,26 +0,0 @@
-# stdint_h.m4 serial 8
-dnl Copyright (C) 1997-2004, 2006, 2008-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Paul Eggert.
-
-# Define HAVE_STDINT_H_WITH_UINTMAX if <stdint.h> exists,
-# doesn't clash with <sys/types.h>, and declares uintmax_t.
-
-AC_DEFUN([gl_AC_HEADER_STDINT_H],
-[
-  AC_CACHE_CHECK([for stdint.h], [gl_cv_header_stdint_h],
-  [AC_TRY_COMPILE(
-    [#include <sys/types.h>
-#include <stdint.h>],
-    [uintmax_t i = (uintmax_t) -1; return !i;],
-    [gl_cv_header_stdint_h=yes],
-    [gl_cv_header_stdint_h=no])])
-  if test $gl_cv_header_stdint_h = yes; then
-    AC_DEFINE_UNQUOTED([HAVE_STDINT_H_WITH_UINTMAX], [1],
-      [Define if <stdint.h> exists, doesn't clash with <sys/types.h>,
-       and declares uintmax_t. ])
-  fi
-])
diff -urpN mc-4.8.23/m4/threadlib.m4 mc-4.8.24/m4/threadlib.m4
--- mc-4.8.23/m4/threadlib.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/threadlib.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,347 +0,0 @@
-# threadlib.m4 serial 5 (gettext-0.18)
-dnl Copyright (C) 2005-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Bruno Haible.
-
-dnl gl_THREADLIB
-dnl ------------
-dnl Tests for a multithreading library to be used.
-dnl Defines at most one of the macros USE_POSIX_THREADS, USE_SOLARIS_THREADS,
-dnl USE_PTH_THREADS, USE_WIN32_THREADS
-dnl Sets the variables LIBTHREAD and LTLIBTHREAD to the linker options for use
-dnl in a Makefile (LIBTHREAD for use without libtool, LTLIBTHREAD for use with
-dnl libtool).
-dnl Sets the variables LIBMULTITHREAD and LTLIBMULTITHREAD similarly, for
-dnl programs that really need multithread functionality. The difference
-dnl between LIBTHREAD and LIBMULTITHREAD is that on platforms supporting weak
-dnl symbols, typically LIBTHREAD="" whereas LIBMULTITHREAD="-lpthread".
-dnl Adds to CPPFLAGS the flag -D_REENTRANT or -D_THREAD_SAFE if needed for
-dnl multithread-safe programs.
-
-AC_DEFUN([gl_THREADLIB_EARLY],
-[
-  AC_REQUIRE([gl_THREADLIB_EARLY_BODY])
-])
-
-dnl The guts of gl_THREADLIB_EARLY. Needs to be expanded only once.
-
-AC_DEFUN([gl_THREADLIB_EARLY_BODY],
-[
-  dnl Ordering constraints: This macro modifies CPPFLAGS in a way that
-  dnl influences the result of the autoconf tests that test for *_unlocked
-  dnl declarations, on AIX 5 at least. Therefore it must come early.
-  AC_BEFORE([$0], [gl_FUNC_GLIBC_UNLOCKED_IO])dnl
-  AC_BEFORE([$0], [gl_ARGP])dnl
-
-  AC_REQUIRE([AC_CANONICAL_HOST])
-  dnl _GNU_SOURCE is needed for pthread_rwlock_t on glibc systems.
-  dnl AC_USE_SYSTEM_EXTENSIONS was introduced in autoconf 2.60 and obsoletes
-  dnl AC_GNU_SOURCE.
-  m4_ifdef([AC_USE_SYSTEM_EXTENSIONS],
-    [AC_REQUIRE([AC_USE_SYSTEM_EXTENSIONS])],
-    [AC_REQUIRE([AC_GNU_SOURCE])])
-  dnl Check for multithreading.
-  m4_divert_text([DEFAULTS], [gl_use_threads_default=])
-  AC_ARG_ENABLE([threads],
-AC_HELP_STRING([--enable-threads={posix|solaris|pth|win32}], [specify multithreading API])
-AC_HELP_STRING([--disable-threads], [build without multithread safety]),
-    [gl_use_threads=$enableval],
-    [if test -n "$gl_use_threads_default"; then
-       gl_use_threads="$gl_use_threads_default"
-     else
-changequote(,)dnl
-       case "$host_os" in
-         dnl Disable multithreading by default on OSF/1, because it interferes
-         dnl with fork()/exec(): When msgexec is linked with -lpthread, its
-         dnl child process gets an endless segmentation fault inside execvp().
-         dnl Disable multithreading by default on Cygwin 1.5.x, because it has
-         dnl bugs that lead to endless loops or crashes. See
-         dnl <http://cygwin.com/ml/cygwin/2009-08/msg00283.html>.
-         osf*) gl_use_threads=no ;;
-         cygwin*)
-               case `uname -r` in
-                 1.[0-5].*) gl_use_threads=no ;;
-                 *)         gl_use_threads=yes ;;
-               esac
-               ;;
-         *)    gl_use_threads=yes ;;
-       esac
-changequote([,])dnl
-     fi
-    ])
-  if test "$gl_use_threads" = yes || test "$gl_use_threads" = posix; then
-    # For using <pthread.h>:
-    case "$host_os" in
-      osf*)
-        # On OSF/1, the compiler needs the flag -D_REENTRANT so that it
-        # groks <pthread.h>. cc also understands the flag -pthread, but
-        # we don't use it because 1. gcc-2.95 doesn't understand -pthread,
-        # 2. putting a flag into CPPFLAGS that has an effect on the linker
-        # causes the AC_TRY_LINK test below to succeed unexpectedly,
-        # leading to wrong values of LIBTHREAD and LTLIBTHREAD.
-        CPPFLAGS="$CPPFLAGS -D_REENTRANT"
-        ;;
-    esac
-    # Some systems optimize for single-threaded programs by default, and
-    # need special flags to disable these optimizations. For example, the
-    # definition of 'errno' in <errno.h>.
-    case "$host_os" in
-      aix* | freebsd*) CPPFLAGS="$CPPFLAGS -D_THREAD_SAFE" ;;
-      solaris*) CPPFLAGS="$CPPFLAGS -D_REENTRANT" ;;
-    esac
-  fi
-])
-
-dnl The guts of gl_THREADLIB. Needs to be expanded only once.
-
-AC_DEFUN([gl_THREADLIB_BODY],
-[
-  AC_REQUIRE([gl_THREADLIB_EARLY_BODY])
-  gl_threads_api=none
-  LIBTHREAD=
-  LTLIBTHREAD=
-  LIBMULTITHREAD=
-  LTLIBMULTITHREAD=
-  if test "$gl_use_threads" != no; then
-    dnl Check whether the compiler and linker support weak declarations.
-    AC_CACHE_CHECK([whether imported symbols can be declared weak],
-      [gl_cv_have_weak],
-      [gl_cv_have_weak=no
-       dnl First, test whether the compiler accepts it syntactically.
-       AC_TRY_LINK([extern void xyzzy ();
-#pragma weak xyzzy], [xyzzy();], [gl_cv_have_weak=maybe])
-       if test $gl_cv_have_weak = maybe; then
-         dnl Second, test whether it actually works. On Cygwin 1.7.2, with
-         dnl gcc 4.3, symbols declared weak always evaluate to the address 0.
-         AC_TRY_RUN([
-#include <stdio.h>
-#pragma weak fputs
-int main ()
-{
-  return (fputs == NULL);
-}], [gl_cv_have_weak=yes], [gl_cv_have_weak=no],
-           [dnl When cross-compiling, assume that only ELF platforms support
-            dnl weak symbols.
-            AC_EGREP_CPP([Extensible Linking Format],
-              [#ifdef __ELF__
-               Extensible Linking Format
-               #endif
-              ],
-              [gl_cv_have_weak="guessing yes"],
-              [gl_cv_have_weak="guessing no"])
-           ])
-       fi
-      ])
-    if test "$gl_use_threads" = yes || test "$gl_use_threads" = posix; then
-      # On OSF/1, the compiler needs the flag -pthread or -D_REENTRANT so that
-      # it groks <pthread.h>. It's added above, in gl_THREADLIB_EARLY_BODY.
-      AC_CHECK_HEADER([pthread.h],
-        [gl_have_pthread_h=yes], [gl_have_pthread_h=no])
-      if test "$gl_have_pthread_h" = yes; then
-        # Other possible tests:
-        #   -lpthreads (FSU threads, PCthreads)
-        #   -lgthreads
-        gl_have_pthread=
-        # Test whether both pthread_mutex_lock and pthread_mutexattr_init exist
-        # in libc. IRIX 6.5 has the first one in both libc and libpthread, but
-        # the second one only in libpthread, and lock.c needs it.
-        AC_TRY_LINK([#include <pthread.h>],
-          [pthread_mutex_lock((pthread_mutex_t*)0);
-           pthread_mutexattr_init((pthread_mutexattr_t*)0);],
-          [gl_have_pthread=yes])
-        # Test for libpthread by looking for pthread_kill. (Not pthread_self,
-        # since it is defined as a macro on OSF/1.)
-        if test -n "$gl_have_pthread"; then
-          # The program links fine without libpthread. But it may actually
-          # need to link with libpthread in order to create multiple threads.
-          AC_CHECK_LIB([pthread], [pthread_kill],
-            [LIBMULTITHREAD=-lpthread LTLIBMULTITHREAD=-lpthread
-             # On Solaris and HP-UX, most pthread functions exist also in libc.
-             # Therefore pthread_in_use() needs to actually try to create a
-             # thread: pthread_create from libc will fail, whereas
-             # pthread_create will actually create a thread.
-             case "$host_os" in
-               solaris* | hpux*)
-                 AC_DEFINE([PTHREAD_IN_USE_DETECTION_HARD], [1],
-                   [Define if the pthread_in_use() detection is hard.])
-             esac
-            ])
-        else
-          # Some library is needed. Try libpthread and libc_r.
-          AC_CHECK_LIB([pthread], [pthread_kill],
-            [gl_have_pthread=yes
-             LIBTHREAD=-lpthread LTLIBTHREAD=-lpthread
-             LIBMULTITHREAD=-lpthread LTLIBMULTITHREAD=-lpthread])
-          if test -z "$gl_have_pthread"; then
-            # For FreeBSD 4.
-            AC_CHECK_LIB([c_r], [pthread_kill],
-              [gl_have_pthread=yes
-               LIBTHREAD=-lc_r LTLIBTHREAD=-lc_r
-               LIBMULTITHREAD=-lc_r LTLIBMULTITHREAD=-lc_r])
-          fi
-        fi
-        if test -n "$gl_have_pthread"; then
-          gl_threads_api=posix
-          AC_DEFINE([USE_POSIX_THREADS], [1],
-            [Define if the POSIX multithreading library can be used.])
-          if test -n "$LIBMULTITHREAD" || test -n "$LTLIBMULTITHREAD"; then
-            if case "$gl_cv_have_weak" in *yes) true;; *) false;; esac; then
-              AC_DEFINE([USE_POSIX_THREADS_WEAK], [1],
-                [Define if references to the POSIX multithreading library should be made weak.])
-              LIBTHREAD=
-              LTLIBTHREAD=
-            fi
-          fi
-        fi
-      fi
-    fi
-    if test -z "$gl_have_pthread"; then
-      if test "$gl_use_threads" = yes || test "$gl_use_threads" = solaris; then
-        gl_have_solaristhread=
-        gl_save_LIBS="$LIBS"
-        LIBS="$LIBS -lthread"
-        AC_TRY_LINK([#include <thread.h>
-#include <synch.h>],
-          [thr_self();],
-          [gl_have_solaristhread=yes])
-        LIBS="$gl_save_LIBS"
-        if test -n "$gl_have_solaristhread"; then
-          gl_threads_api=solaris
-          LIBTHREAD=-lthread
-          LTLIBTHREAD=-lthread
-          LIBMULTITHREAD="$LIBTHREAD"
-          LTLIBMULTITHREAD="$LTLIBTHREAD"
-          AC_DEFINE([USE_SOLARIS_THREADS], [1],
-            [Define if the old Solaris multithreading library can be used.])
-          if case "$gl_cv_have_weak" in *yes) true;; *) false;; esac; then
-            AC_DEFINE([USE_SOLARIS_THREADS_WEAK], [1],
-              [Define if references to the old Solaris multithreading library should be made weak.])
-            LIBTHREAD=
-            LTLIBTHREAD=
-          fi
-        fi
-      fi
-    fi
-    if test "$gl_use_threads" = pth; then
-      gl_save_CPPFLAGS="$CPPFLAGS"
-      AC_LIB_LINKFLAGS([pth])
-      gl_have_pth=
-      gl_save_LIBS="$LIBS"
-      LIBS="$LIBS -lpth"
-      AC_TRY_LINK([#include <pth.h>], [pth_self();], [gl_have_pth=yes])
-      LIBS="$gl_save_LIBS"
-      if test -n "$gl_have_pth"; then
-        gl_threads_api=pth
-        LIBTHREAD="$LIBPTH"
-        LTLIBTHREAD="$LTLIBPTH"
-        LIBMULTITHREAD="$LIBTHREAD"
-        LTLIBMULTITHREAD="$LTLIBTHREAD"
-        AC_DEFINE([USE_PTH_THREADS], [1],
-          [Define if the GNU Pth multithreading library can be used.])
-        if test -n "$LIBMULTITHREAD" || test -n "$LTLIBMULTITHREAD"; then
-          if case "$gl_cv_have_weak" in *yes) true;; *) false;; esac; then
-            AC_DEFINE([USE_PTH_THREADS_WEAK], [1],
-              [Define if references to the GNU Pth multithreading library should be made weak.])
-            LIBTHREAD=
-            LTLIBTHREAD=
-          fi
-        fi
-      else
-        CPPFLAGS="$gl_save_CPPFLAGS"
-      fi
-    fi
-    if test -z "$gl_have_pthread"; then
-      if test "$gl_use_threads" = yes || test "$gl_use_threads" = win32; then
-        if { case "$host_os" in
-               mingw*) true;;
-               *) false;;
-             esac
-           }; then
-          gl_threads_api=win32
-          AC_DEFINE([USE_WIN32_THREADS], [1],
-            [Define if the Win32 multithreading API can be used.])
-        fi
-      fi
-    fi
-  fi
-  AC_MSG_CHECKING([for multithread API to use])
-  AC_MSG_RESULT([$gl_threads_api])
-  AC_SUBST([LIBTHREAD])
-  AC_SUBST([LTLIBTHREAD])
-  AC_SUBST([LIBMULTITHREAD])
-  AC_SUBST([LTLIBMULTITHREAD])
-])
-
-AC_DEFUN([gl_THREADLIB],
-[
-  AC_REQUIRE([gl_THREADLIB_EARLY])
-  AC_REQUIRE([gl_THREADLIB_BODY])
-])
-
-
-dnl gl_DISABLE_THREADS
-dnl ------------------
-dnl Sets the gl_THREADLIB default so that threads are not used by default.
-dnl The user can still override it at installation time, by using the
-dnl configure option '--enable-threads'.
-
-AC_DEFUN([gl_DISABLE_THREADS], [
-  m4_divert_text([INIT_PREPARE], [gl_use_threads_default=no])
-])
-
-
-dnl Survey of platforms:
-dnl
-dnl Platform          Available   Compiler    Supports   test-lock
-dnl                   flavours    option      weak       result
-dnl ---------------   ---------   ---------   --------   ---------
-dnl Linux 2.4/glibc   posix       -lpthread       Y      OK
-dnl
-dnl GNU Hurd/glibc    posix
-dnl
-dnl FreeBSD 5.3       posix       -lc_r           Y
-dnl                   posix       -lkse ?         Y
-dnl                   posix       -lpthread ?     Y
-dnl                   posix       -lthr           Y
-dnl
-dnl FreeBSD 5.2       posix       -lc_r           Y
-dnl                   posix       -lkse           Y
-dnl                   posix       -lthr           Y
-dnl
-dnl FreeBSD 4.0,4.10  posix       -lc_r           Y      OK
-dnl
-dnl NetBSD 1.6        --
-dnl
-dnl OpenBSD 3.4       posix       -lpthread       Y      OK
-dnl
-dnl MacOS X 10.[123]  posix       -lpthread       Y      OK
-dnl
-dnl Solaris 7,8,9     posix       -lpthread       Y      Sol 7,8: 0.0; Sol 9: OK
-dnl                   solaris     -lthread        Y      Sol 7,8: 0.0; Sol 9: OK
-dnl
-dnl HP-UX 11          posix       -lpthread       N (cc) OK
-dnl                                               Y (gcc)
-dnl
-dnl IRIX 6.5          posix       -lpthread       Y      0.5
-dnl
-dnl AIX 4.3,5.1       posix       -lpthread       N      AIX 4: 0.5; AIX 5: OK
-dnl
-dnl OSF/1 4.0,5.1     posix       -pthread (cc)   N      OK
-dnl                               -lpthread (gcc) Y
-dnl
-dnl Cygwin            posix       -lpthread       Y      OK
-dnl
-dnl Any of the above  pth         -lpth                  0.0
-dnl
-dnl Mingw             win32                       N      OK
-dnl
-dnl BeOS 5            --
-dnl
-dnl The test-lock result shows what happens if in test-lock.c EXPLICIT_YIELD is
-dnl turned off:
-dnl   OK if all three tests terminate OK,
-dnl   0.5 if the first test terminates OK but the second one loops endlessly,
-dnl   0.0 if the first test already loops endlessly.
diff -urpN mc-4.8.23/m4/uintmax_t.m4 mc-4.8.24/m4/uintmax_t.m4
--- mc-4.8.23/m4/uintmax_t.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/uintmax_t.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,30 +0,0 @@
-# uintmax_t.m4 serial 12
-dnl Copyright (C) 1997-2004, 2007-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Paul Eggert.
-
-AC_PREREQ([2.13])
-
-# Define uintmax_t to 'unsigned long' or 'unsigned long long'
-# if it is not already defined in <stdint.h> or <inttypes.h>.
-
-AC_DEFUN([gl_AC_TYPE_UINTMAX_T],
-[
-  AC_REQUIRE([gl_AC_HEADER_INTTYPES_H])
-  AC_REQUIRE([gl_AC_HEADER_STDINT_H])
-  if test $gl_cv_header_inttypes_h = no && test $gl_cv_header_stdint_h = no; then
-    AC_REQUIRE([AC_TYPE_UNSIGNED_LONG_LONG_INT])
-    test $ac_cv_type_unsigned_long_long_int = yes \
-      && ac_type='unsigned long long' \
-      || ac_type='unsigned long'
-    AC_DEFINE_UNQUOTED([uintmax_t], [$ac_type],
-      [Define to unsigned long or unsigned long long
-       if <stdint.h> and <inttypes.h> don't define.])
-  else
-    AC_DEFINE([HAVE_UINTMAX_T], [1],
-      [Define if you have the 'uintmax_t' type in <stdint.h> or <inttypes.h>.])
-  fi
-])
diff -urpN mc-4.8.23/m4/visibility.m4 mc-4.8.24/m4/visibility.m4
--- mc-4.8.23/m4/visibility.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/visibility.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,74 +0,0 @@
-# visibility.m4 serial 3 (gettext-0.18)
-dnl Copyright (C) 2005, 2008-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Bruno Haible.
-
-dnl Tests whether the compiler supports the command-line option
-dnl -fvisibility=hidden and the function and variable attributes
-dnl __attribute__((__visibility__("hidden"))) and
-dnl __attribute__((__visibility__("default"))).
-dnl Does *not* test for __visibility__("protected") - which has tricky
-dnl semantics (see the 'vismain' test in glibc) and does not exist e.g. on
-dnl MacOS X.
-dnl Does *not* test for __visibility__("internal") - which has processor
-dnl dependent semantics.
-dnl Does *not* test for #pragma GCC visibility push(hidden) - which is
-dnl "really only recommended for legacy code".
-dnl Set the variable CFLAG_VISIBILITY.
-dnl Defines and sets the variable HAVE_VISIBILITY.
-
-AC_DEFUN([gl_VISIBILITY],
-[
-  AC_REQUIRE([AC_PROG_CC])
-  CFLAG_VISIBILITY=
-  HAVE_VISIBILITY=0
-  if test -n "$GCC"; then
-    dnl First, check whether -Werror can be added to the command line, or
-    dnl whether it leads to an error because of some other option that the
-    dnl user has put into $CC $CFLAGS $CPPFLAGS.
-    AC_MSG_CHECKING([whether the -Werror option is usable])
-    AC_CACHE_VAL([gl_cv_cc_vis_werror], [
-      gl_save_CFLAGS="$CFLAGS"
-      CFLAGS="$CFLAGS -Werror"
-      AC_TRY_COMPILE([], [],
-        [gl_cv_cc_vis_werror=yes],
-        [gl_cv_cc_vis_werror=no])
-      CFLAGS="$gl_save_CFLAGS"])
-    AC_MSG_RESULT([$gl_cv_cc_vis_werror])
-    dnl Now check whether visibility declarations are supported.
-    AC_MSG_CHECKING([for simple visibility declarations])
-    AC_CACHE_VAL([gl_cv_cc_visibility], [
-      gl_save_CFLAGS="$CFLAGS"
-      CFLAGS="$CFLAGS -fvisibility=hidden"
-      dnl We use the option -Werror and a function dummyfunc, because on some
-      dnl platforms (Cygwin 1.7) the use of -fvisibility triggers a warning
-      dnl "visibility attribute not supported in this configuration; ignored"
-      dnl at the first function definition in every compilation unit, and we
-      dnl don't want to use the option in this case.
-      if test $gl_cv_cc_vis_werror = yes; then
-        CFLAGS="$CFLAGS -Werror"
-      fi
-      AC_TRY_COMPILE(
-        [extern __attribute__((__visibility__("hidden"))) int hiddenvar;
-         extern __attribute__((__visibility__("default"))) int exportedvar;
-         extern __attribute__((__visibility__("hidden"))) int hiddenfunc (void);
-         extern __attribute__((__visibility__("default"))) int exportedfunc (void);
-         void dummyfunc (void) {}],
-        [],
-        [gl_cv_cc_visibility=yes],
-        [gl_cv_cc_visibility=no])
-      CFLAGS="$gl_save_CFLAGS"])
-    AC_MSG_RESULT([$gl_cv_cc_visibility])
-    if test $gl_cv_cc_visibility = yes; then
-      CFLAG_VISIBILITY="-fvisibility=hidden"
-      HAVE_VISIBILITY=1
-    fi
-  fi
-  AC_SUBST([CFLAG_VISIBILITY])
-  AC_SUBST([HAVE_VISIBILITY])
-  AC_DEFINE_UNQUOTED([HAVE_VISIBILITY], [$HAVE_VISIBILITY],
-    [Define to 1 or 0, depending whether the compiler supports simple visibility declarations.])
-])
diff -urpN mc-4.8.23/m4/wchar_t.m4 mc-4.8.24/m4/wchar_t.m4
--- mc-4.8.23/m4/wchar_t.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/wchar_t.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,20 +0,0 @@
-# wchar_t.m4 serial 3 (gettext-0.18)
-dnl Copyright (C) 2002-2003, 2008-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Bruno Haible.
-dnl Test whether <stddef.h> has the 'wchar_t' type.
-dnl Prerequisite: AC_PROG_CC
-
-AC_DEFUN([gt_TYPE_WCHAR_T],
-[
-  AC_CACHE_CHECK([for wchar_t], [gt_cv_c_wchar_t],
-    [AC_TRY_COMPILE([#include <stddef.h>
-       wchar_t foo = (wchar_t)'\0';], ,
-       [gt_cv_c_wchar_t=yes], [gt_cv_c_wchar_t=no])])
-  if test $gt_cv_c_wchar_t = yes; then
-    AC_DEFINE([HAVE_WCHAR_T], [1], [Define if you have the 'wchar_t' type.])
-  fi
-])
diff -urpN mc-4.8.23/m4/wint_t.m4 mc-4.8.24/m4/wint_t.m4
--- mc-4.8.23/m4/wint_t.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/wint_t.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,28 +0,0 @@
-# wint_t.m4 serial 4 (gettext-0.18)
-dnl Copyright (C) 2003, 2007-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl From Bruno Haible.
-dnl Test whether <wchar.h> has the 'wint_t' type.
-dnl Prerequisite: AC_PROG_CC
-
-AC_DEFUN([gt_TYPE_WINT_T],
-[
-  AC_CACHE_CHECK([for wint_t], [gt_cv_c_wint_t],
-    [AC_TRY_COMPILE([
-/* Tru64 with Desktop Toolkit C has a bug: <stdio.h> must be included before
-   <wchar.h>.
-   BSD/OS 4.0.1 has a bug: <stddef.h>, <stdio.h> and <time.h> must be included
-   before <wchar.h>.  */
-#include <stddef.h>
-#include <stdio.h>
-#include <time.h>
-#include <wchar.h>
-       wint_t foo = (wchar_t)'\0';], ,
-       [gt_cv_c_wint_t=yes], [gt_cv_c_wint_t=no])])
-  if test $gt_cv_c_wint_t = yes; then
-    AC_DEFINE([HAVE_WINT_T], [1], [Define if you have the 'wint_t' type.])
-  fi
-])
diff -urpN mc-4.8.23/m4/xsize.m4 mc-4.8.24/m4/xsize.m4
--- mc-4.8.23/m4/xsize.m4	2019-06-22 15:44:02.000000000 +0400
+++ mc-4.8.24/m4/xsize.m4	1970-01-01 04:00:00.000000000 +0400
@@ -1,13 +0,0 @@
-# xsize.m4 serial 4
-dnl Copyright (C) 2003-2004, 2008-2010 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-AC_DEFUN([gl_XSIZE],
-[
-  dnl Prerequisites of lib/xsize.h.
-  AC_REQUIRE([gl_SIZE_MAX])
-  AC_REQUIRE([AC_C_INLINE])
-  AC_CHECK_HEADERS([stdint.h])
-])
diff -urpN mc-4.8.23/m4.include/mc-assert.m4 mc-4.8.24/m4.include/mc-assert.m4
--- mc-4.8.23/m4.include/mc-assert.m4	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/m4.include/mc-assert.m4	2020-01-01 19:52:34.000000000 +0400
@@ -5,7 +5,7 @@ dnl
 AC_DEFUN([mc_ASSERT],
 [
     AC_ARG_ENABLE([assert],
-    AS_HELP_STRING([--enable-assert], [turn on assertions [yes]]),
+    AS_HELP_STRING([--enable-assert], [turn on assertions @<:@yes@:>@]),
     [
         if test "x$enableval" = xno; then
             enable_assert=no
diff -urpN mc-4.8.23/m4.include/mc-background.m4 mc-4.8.24/m4.include/mc-background.m4
--- mc-4.8.23/m4.include/mc-background.m4	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/m4.include/mc-background.m4	2020-01-01 19:52:34.000000000 +0400
@@ -5,7 +5,7 @@ dnl
 AC_DEFUN([mc_BACKGROUND],
 [
     AC_ARG_ENABLE([background],
-    AS_HELP_STRING([--enable-background], [Support for background file operations [yes]]),
+    AS_HELP_STRING([--enable-background], [Support for background file operations @<:@yes@:>@]),
     [
         if test "x$enableval" = xno; then
             enable_background=no
diff -urpN mc-4.8.23/m4.include/mc-i18n.m4 mc-4.8.24/m4.include/mc-i18n.m4
--- mc-4.8.23/m4.include/mc-i18n.m4	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/m4.include/mc-i18n.m4	2020-01-01 19:52:34.000000000 +0400
@@ -8,11 +8,6 @@ dnl @license GPL
 dnl @copyright Free Software Foundation, Inc.
 
 AC_DEFUN([mc_I18N],[
-
-    if test "x$USE_INCLUDED_LIBINTL" = xyes; then
-        CPPFLAGS="$CPPFLAGS -I\$(top_builddir)/intl -I\$(top_srcdir)/intl"
-    fi
-
     dnl User visible support for charset conversion.
     AC_ARG_ENABLE([charset],
         AS_HELP_STRING([--enable-charset], [Support for charset selection and conversion @<:@yes@:>@]))
@@ -22,5 +17,17 @@ AC_DEFUN([mc_I18N],[
         AC_DEFINE(HAVE_CHARSET, 1, [Define to enable charset selection and conversion])
         have_charset=yes
         charset_msg="yes"
+
+        dnl Solaris has different name of Windows 1251 encoding
+        case $host_os in
+            solaris*)
+                CP1251="ANSI-1251"
+                ;;
+            *)
+                CP1251="CP1251"
+                ;;
+        esac
+
+        AC_SUBST(CP1251)
     fi
 ])
diff -urpN mc-4.8.23/misc/Makefile.am mc-4.8.24/misc/Makefile.am
--- mc-4.8.23/misc/Makefile.am	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/Makefile.am	2020-01-01 19:52:34.000000000 +0400
@@ -6,12 +6,20 @@ LIBFILES_OUT = mc.ext
 
 noinst_DATA = xterm.ad
 
-pkgdata_DATA = \
-	mc.lib
+PKGDATA_IN = mc.charsets.in
+
+PKGDATA_OUT =
 if CHARSET
-pkgdata_DATA += mc.charsets
+PKGDATA_OUT += mc.charsets
 endif
 
+dist_pkgdata_DATA = \
+	mc.lib
+
+pkgdata_DATA = \
+	$(dist_pkgdata_DATA) \
+	$(PKGDATA_OUT)
+
 SCRIPTS_IN = \
 	mc.menu.in \
 	mcedit.menu.in
@@ -29,7 +37,7 @@ LIBFILES_CONST = \
 LIBFILES_SCRIPT = \
 	edit.indent.rc
 
-CLEANFILES = $(SCRIPTS_OUT)
+CLEANFILES = $(SCRIPTS_OUT) $(PKGDATA_OUT)
 
 cfgdir = $(sysconfdir)/@PACKAGE@
 cfg_DATA = \
@@ -46,11 +54,8 @@ EXTRA_DIST = \
 	$(LIBFILES_SCRIPT) \
 	$(SCRIPTS_IN) \
 	$(noinst_DATA) \
-	$(pkgdata_DATA)
-#if CHARSET is defined, mc.charsets is already here
-if !CHARSET
-EXTRA_DIST += mc.charsets
-endif
+	$(dist_pkgdata_DATA) \
+	$(PKGDATA_IN)
 
 install-data-hook:
 	cd $(DESTDIR)$(cfgdir) && rm -f mc.keymap && $(LN_S) mc.default.keymap mc.keymap
diff -urpN mc-4.8.23/misc/Makefile.in mc-4.8.24/misc/Makefile.in
--- mc-4.8.23/misc/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/misc/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,28 +90,16 @@ POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
 @CHARSET_TRUE@am__append_1 = mc.charsets
-#if CHARSET is defined, mc.charsets is already here
-@CHARSET_FALSE@am__append_2 = mc.charsets
 subdir = misc
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -154,10 +142,11 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/configure.ac
 am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
 	$(ACLOCAL_M4)
-DIST_COMMON = $(srcdir)/Makefile.am $(am__DIST_COMMON)
+DIST_COMMON = $(srcdir)/Makefile.am $(dist_pkgdata_DATA) \
+	$(am__DIST_COMMON)
 mkinstalldirs = $(install_sh) -d
 CONFIG_HEADER = $(top_builddir)/config.h
-CONFIG_CLEAN_FILES = mc.menu mcedit.menu mc.ext
+CONFIG_CLEAN_FILES = mc.charsets mc.menu mcedit.menu mc.ext
 CONFIG_CLEAN_VPATH_FILES =
 am__vpath_adj_setup = srcdirstrip=`echo "$(srcdir)" | sed 's|.|.|g'`;
 am__vpath_adj = case $$p in \
@@ -187,7 +176,7 @@ am__uninstall_files_from_dir = { \
          $(am__cd) "$$dir" && rm -f $$files; }; \
   }
 am__installdirs = "$(DESTDIR)$(cfgdir)" "$(DESTDIR)$(cfgdir)" \
-	"$(DESTDIR)$(pkgdatadir)"
+	"$(DESTDIR)$(pkgdatadir)" "$(DESTDIR)$(pkgdatadir)"
 SCRIPTS = $(cfg_SCRIPTS)
 AM_V_P = $(am__v_P_@AM_V@)
 am__v_P_ = $(am__v_P_@AM_DEFAULT_V@)
@@ -216,7 +205,7 @@ am__can_run_installinfo = \
     n|no|NO) false;; \
     *) (install-info --version) >/dev/null 2>&1;; \
   esac
-DATA = $(cfg_DATA) $(noinst_DATA) $(pkgdata_DATA)
+DATA = $(cfg_DATA) $(dist_pkgdata_DATA) $(noinst_DATA) $(pkgdata_DATA)
 RECURSIVE_CLEAN_TARGETS = mostlyclean-recursive clean-recursive	\
   distclean-recursive maintainer-clean-recursive
 am__recursive_targets = \
@@ -245,8 +234,9 @@ am__define_uniq_tagged_files = \
 ETAGS = etags
 CTAGS = ctags
 DIST_SUBDIRS = $(SUBDIRS)
-am__DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/mc.ext.in \
-	$(srcdir)/mc.menu.in $(srcdir)/mcedit.menu.in
+am__DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/mc.charsets.in \
+	$(srcdir)/mc.ext.in $(srcdir)/mc.menu.in \
+	$(srcdir)/mcedit.menu.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 am__relativize = \
   dir0=`pwd`; \
@@ -274,7 +264,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -282,18 +271,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -333,10 +319,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -344,13 +327,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -358,12 +335,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -371,24 +343,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -422,7 +386,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -434,12 +397,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -507,7 +466,15 @@ top_srcdir = @top_srcdir@
 SUBDIRS = ext.d macros.d skins syntax
 LIBFILES_OUT = mc.ext
 noinst_DATA = xterm.ad
-pkgdata_DATA = mc.lib $(am__append_1)
+PKGDATA_IN = mc.charsets.in
+PKGDATA_OUT = $(am__append_1)
+dist_pkgdata_DATA = \
+	mc.lib
+
+pkgdata_DATA = \
+	$(dist_pkgdata_DATA) \
+	$(PKGDATA_OUT)
+
 SCRIPTS_IN = \
 	mc.menu.in \
 	mcedit.menu.in
@@ -524,7 +491,7 @@ LIBFILES_CONST = \
 LIBFILES_SCRIPT = \
 	edit.indent.rc
 
-CLEANFILES = $(SCRIPTS_OUT)
+CLEANFILES = $(SCRIPTS_OUT) $(PKGDATA_OUT)
 cfgdir = $(sysconfdir)/@PACKAGE@
 cfg_DATA = \
 	$(LIBFILES_CONST) \
@@ -536,8 +503,14 @@ cfg_SCRIPTS = \
 
 
 # Files processed by configure don't need to be here
-EXTRA_DIST = $(LIBFILES_CONST) $(LIBFILES_SCRIPT) $(SCRIPTS_IN) \
-	$(noinst_DATA) $(pkgdata_DATA) $(am__append_2)
+EXTRA_DIST = \
+	$(LIBFILES_CONST) \
+	$(LIBFILES_SCRIPT) \
+	$(SCRIPTS_IN) \
+	$(noinst_DATA) \
+	$(dist_pkgdata_DATA) \
+	$(PKGDATA_IN)
+
 all: all-recursive
 
 .SUFFIXES:
@@ -570,6 +543,8 @@ $(top_srcdir)/configure: @MAINTAINER_MOD
 $(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
 	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
 $(am__aclocal_m4_deps):
+mc.charsets: $(top_builddir)/config.status $(srcdir)/mc.charsets.in
+	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@
 mc.menu: $(top_builddir)/config.status $(srcdir)/mc.menu.in
 	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@
 mcedit.menu: $(top_builddir)/config.status $(srcdir)/mcedit.menu.in
@@ -638,6 +613,27 @@ uninstall-cfgDATA:
 	@list='$(cfg_DATA)'; test -n "$(cfgdir)" || list=; \
 	files=`for p in $$list; do echo $$p; done | sed -e 's|^.*/||'`; \
 	dir='$(DESTDIR)$(cfgdir)'; $(am__uninstall_files_from_dir)
+install-dist_pkgdataDATA: $(dist_pkgdata_DATA)
+	@$(NORMAL_INSTALL)
+	@list='$(dist_pkgdata_DATA)'; test -n "$(pkgdatadir)" || list=; \
+	if test -n "$$list"; then \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(pkgdatadir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(pkgdatadir)" || exit 1; \
+	fi; \
+	for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  echo "$$d$$p"; \
+	done | $(am__base_list) | \
+	while read files; do \
+	  echo " $(INSTALL_DATA) $$files '$(DESTDIR)$(pkgdatadir)'"; \
+	  $(INSTALL_DATA) $$files "$(DESTDIR)$(pkgdatadir)" || exit $$?; \
+	done
+
+uninstall-dist_pkgdataDATA:
+	@$(NORMAL_UNINSTALL)
+	@list='$(dist_pkgdata_DATA)'; test -n "$(pkgdatadir)" || list=; \
+	files=`for p in $$list; do echo $$p; done | sed -e 's|^.*/||'`; \
+	dir='$(DESTDIR)$(pkgdatadir)'; $(am__uninstall_files_from_dir)
 install-pkgdataDATA: $(pkgdata_DATA)
 	@$(NORMAL_INSTALL)
 	@list='$(pkgdata_DATA)'; test -n "$(pkgdatadir)" || list=; \
@@ -822,7 +818,7 @@ check: check-recursive
 all-am: Makefile $(SCRIPTS) $(DATA)
 installdirs: installdirs-recursive
 installdirs-am:
-	for dir in "$(DESTDIR)$(cfgdir)" "$(DESTDIR)$(cfgdir)" "$(DESTDIR)$(pkgdatadir)"; do \
+	for dir in "$(DESTDIR)$(cfgdir)" "$(DESTDIR)$(cfgdir)" "$(DESTDIR)$(pkgdatadir)" "$(DESTDIR)$(pkgdatadir)"; do \
 	  test -z "$$dir" || $(MKDIR_P) "$$dir"; \
 	done
 install: install-recursive
@@ -877,7 +873,7 @@ info: info-recursive
 info-am:
 
 install-data-am: install-cfgDATA install-cfgSCRIPTS \
-	install-pkgdataDATA
+	install-dist_pkgdataDATA install-pkgdataDATA
 	@$(NORMAL_INSTALL)
 	$(MAKE) $(AM_MAKEFLAGS) install-data-hook
 install-dvi: install-dvi-recursive
@@ -923,7 +919,7 @@ ps: ps-recursive
 ps-am:
 
 uninstall-am: uninstall-cfgDATA uninstall-cfgSCRIPTS \
-	uninstall-pkgdataDATA
+	uninstall-dist_pkgdataDATA uninstall-pkgdataDATA
 	@$(NORMAL_INSTALL)
 	$(MAKE) $(AM_MAKEFLAGS) uninstall-hook
 .MAKE: $(am__recursive_targets) install-am install-data-am \
@@ -934,16 +930,17 @@ uninstall-am: uninstall-cfgDATA uninstal
 	ctags-am distclean distclean-generic distclean-libtool \
 	distclean-tags distdir dvi dvi-am html html-am info info-am \
 	install install-am install-cfgDATA install-cfgSCRIPTS \
-	install-data install-data-am install-data-hook install-dvi \
-	install-dvi-am install-exec install-exec-am install-html \
-	install-html-am install-info install-info-am install-man \
-	install-pdf install-pdf-am install-pkgdataDATA install-ps \
-	install-ps-am install-strip installcheck installcheck-am \
-	installdirs installdirs-am maintainer-clean \
-	maintainer-clean-generic mostlyclean mostlyclean-generic \
-	mostlyclean-libtool pdf pdf-am ps ps-am tags tags-am uninstall \
-	uninstall-am uninstall-cfgDATA uninstall-cfgSCRIPTS \
-	uninstall-hook uninstall-pkgdataDATA
+	install-data install-data-am install-data-hook \
+	install-dist_pkgdataDATA install-dvi install-dvi-am \
+	install-exec install-exec-am install-html install-html-am \
+	install-info install-info-am install-man install-pdf \
+	install-pdf-am install-pkgdataDATA install-ps install-ps-am \
+	install-strip installcheck installcheck-am installdirs \
+	installdirs-am maintainer-clean maintainer-clean-generic \
+	mostlyclean mostlyclean-generic mostlyclean-libtool pdf pdf-am \
+	ps ps-am tags tags-am uninstall uninstall-am uninstall-cfgDATA \
+	uninstall-cfgSCRIPTS uninstall-dist_pkgdataDATA uninstall-hook \
+	uninstall-pkgdataDATA
 
 .PRECIOUS: Makefile
 
diff -urpN mc-4.8.23/misc/ext.d/Makefile.in mc-4.8.24/misc/ext.d/Makefile.in
--- mc-4.8.23/misc/ext.d/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/misc/ext.d/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = misc/ext.d
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -208,7 +198,6 @@ am__DIST_COMMON = $(srcdir)/Makefile.in
 	$(srcdir)/misc.sh.in $(srcdir)/text.sh.in $(srcdir)/web.sh.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -216,18 +205,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -267,10 +253,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -278,13 +261,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -292,12 +269,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -305,24 +277,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -356,7 +320,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -368,12 +331,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/misc/ext.d/web.sh.in mc-4.8.24/misc/ext.d/web.sh.in
--- mc-4.8.23/misc/ext.d/web.sh.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/ext.d/web.sh.in	2020-01-01 19:52:34.000000000 +0400
@@ -15,7 +15,8 @@ do_view_action() {
     html)
         links -dump "${MC_EXT_FILENAME}" 2>/dev/null || \
             w3m -dump "${MC_EXT_FILENAME}" 2>/dev/null || \
-            lynx -dump -force_html "${MC_EXT_FILENAME}"
+            lynx -dump -force_html "${MC_EXT_FILENAME}" 2>/dev/null ||
+            cat "${MC_EXT_FILENAME}"
         ;;
     *)
         ;;
diff -urpN mc-4.8.23/misc/filehighlight.ini mc-4.8.24/misc/filehighlight.ini
--- mc-4.8.23/misc/filehighlight.ini	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/filehighlight.ini	2020-01-01 19:52:34.000000000 +0400
@@ -24,11 +24,11 @@
     extensions_case=true
 
 [temp]
-    extensions=~;$$$;bak;tmp
+    extensions=~;$$$;bak;part;tmp
     regexp=(^#.*|.*~$)
 
 [archive]
-    extensions=7z;Z;ace;arc;arj;ark;bz2;cab;gz;lha;lz;lz4;lzh;lzma;rar;rpm;tar;tbz;tbz2;tgz;tlz;txz;tzst;xz;zip;zoo;zst
+    extensions=7z;Z;ace;apk;arc;arj;ark;bz2;cab;deb;gz;lha;lz;lz4;lzh;lzma;rar;rpm;tar;tbz;tbz2;tgz;tlz;txz;tzst;xz;zip;zoo;zst
 
 [doc]
     extensions=chm;css;ctl;diz;doc;docm;docx;dtd;htm;html;letter;lsm;mail;man;me;msg;nroff;odp;ods;odt;pdf;po;ppt;pptm;pptx;ps;rtf;sgml;shtml;tex;text;txt;xls;xlsm;xlsx;xml;xsd;xslt
@@ -37,7 +37,7 @@
     extensions=ada;asm;awk;bash;c;caml;cc;cgi;cpp;cxx;diff;erl;go;h;hh;hi;hpp;hs;inc;jasm;jav;java;js;m4;mak;mjs;ml;mli;mll;mlp;mly;pas;patch;php;phps;pl;pm;prg;py;rb;s;sas;sh;sl;st;tcl;tk;xq
 
 [media]
-    extensions=3gp;aac;ac3;ape;asf;avi;dts;flac;flv;it;m3u;m4a;m4v;med;mid;midi;mkv;mod;mol;mov;mp2;mp3;mp4;mpeg;mpg;mpl;ogg;ogv;s3m;umx;vob;wav;webm;wma;wmv;xm
+    extensions=3gp;aac;ac3;ape;asf;avi;dts;flac;flv;it;m3u;m4a;m4v;med;mid;midi;mkv;mod;mol;mov;mp2;mp3;mp4;mpeg;mpg;mpl;ogg;ogv;s3m;ts;umx;vob;wav;webm;wma;wmv;xm
 
 [graph]
     extensions=ai;bmp;cdr;eps;gif;ico;jpeg;jpg;omf;pcx;pic;png;rle;svg;tif;tiff;webp;wmf;xbm;xcf;xpm
diff -urpN mc-4.8.23/misc/macros.d/Makefile.in mc-4.8.24/misc/macros.d/Makefile.in
--- mc-4.8.23/misc/macros.d/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/misc/macros.d/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = misc/macros.d
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -207,7 +197,6 @@ am__tagged_files = $(HEADERS) $(SOURCES)
 am__DIST_COMMON = $(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -215,18 +204,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -266,10 +252,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -277,13 +260,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -291,12 +268,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -304,24 +276,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -355,7 +319,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -367,12 +330,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/misc/mc.charsets mc-4.8.24/misc/mc.charsets
--- mc-4.8.23/misc/mc.charsets	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/mc.charsets	1970-01-01 04:00:00.000000000 +0400
@@ -1,13 +0,0 @@
-ASCII		7-bit ASCII
-ISO-8859-1	ISO 8859-1
-ISO-8859-2	ISO 8859-2
-ISO-8859-5	ISO 8859-5
-CP1250		Windows 1250
-CP1251		Windows 1251
-CP437		CP 437
-CP850		CP 850
-CP852		CP 852
-IBM866		CP 866
-KOI8-R		KOI8-R
-KOI8-U		KOI8-U
-UTF-8		UTF-8
diff -urpN mc-4.8.23/misc/mc.charsets.in mc-4.8.24/misc/mc.charsets.in
--- mc-4.8.23/misc/mc.charsets.in	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/misc/mc.charsets.in	2020-01-01 19:52:34.000000000 +0400
@@ -0,0 +1,13 @@
+ASCII		7-bit ASCII
+ISO-8859-1	ISO 8859-1
+ISO-8859-2	ISO 8859-2
+ISO-8859-5	ISO 8859-5
+CP1250		Windows 1250
+@CP1251@		Windows 1251
+CP437		CP 437
+CP850		CP 850
+CP852		CP 852
+IBM866		CP 866
+KOI8-R		KOI8-R
+KOI8-U		KOI8-U
+UTF-8		UTF-8
diff -urpN mc-4.8.23/misc/mc.default.keymap mc-4.8.24/misc/mc.default.keymap
--- mc-4.8.23/misc/mc.default.keymap	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/mc.default.keymap	2020-01-01 19:52:34.000000000 +0400
@@ -54,6 +54,7 @@ ScreenList = alt-prime
 # ConnectFtp =
 # ConnectSmb =
 # Undelete =
+EditorViewerHistory = alt-shift-e
 ExtendedKeyMap = ctrl-x
 
 [main:xmap]
@@ -193,6 +194,9 @@ PageUp = pgup; alt-v
 PageDown = pgdn; ctrl-v
 Delete = delete; d
 Clear = shift-delete; shift-d
+View = f3
+Edit = f4
+Enter = enter
 
 [tree]
 Help = f1
@@ -271,6 +275,7 @@ Save = f2
 EditNew = ctrl-n
 SaveAs = f12; ctrl-f2
 # Close =
+History = alt-shift-e
 Mark = f3
 Copy = f5
 Move = f6
@@ -401,6 +406,7 @@ FilePrev = ctrl-b
 SelectCodepage = alt-e
 Shell = ctrl-o
 Ruler = alt-r
+History = alt-shift-e
 
 [viewer:hex]
 Help = f1
@@ -429,6 +435,7 @@ PageDown = pgdn; ctrl-v
 PageUp = pgup; alt-v
 Top = ctrl-home; ctrl-pgup; a1; alt-lt; g
 Bottom = ctrl-end; ctrl-pgdn; c1; alt-gt; shift-g
+History = alt-shift-e
 
 [diffviewer]
 ShowSymbols = alt-s; s
diff -urpN mc-4.8.23/misc/mc.emacs.keymap mc-4.8.24/misc/mc.emacs.keymap
--- mc-4.8.23/misc/mc.emacs.keymap	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/mc.emacs.keymap	2020-01-01 19:52:34.000000000 +0400
@@ -54,6 +54,7 @@ ScreenList = alt-prime
 # ConnectFtp =
 # ConnectSmb =
 # Undelete =
+EditorViewerHistory = alt-shift-e
 ExtendedKeyMap = ctrl-x
 
 [main:xmap]
@@ -193,6 +194,9 @@ PageUp = pgup; alt-v
 PageDown = pgdn; ctrl-v
 Delete = delete; d
 Clear = shift-delete; shift-d
+View = f3
+Edit = f4
+Enter = enter
 
 [tree]
 Help = f1
@@ -270,6 +274,7 @@ Save = f2
 # EditFile =
 SaveAs = f12; ctrl-f2
 # Close =
+History = alt-shift-e
 Mark = f3; ctrl-at
 Copy = f5
 Move = f6
@@ -403,6 +408,7 @@ FilePrev = ctrl-b
 SelectCodepage = alt-e
 Shell = ctrl-o
 Ruler = alt-r
+History = alt-shift-e
 
 [viewer:hex]
 Help = f1
@@ -431,6 +437,7 @@ PageDown = pgdn; ctrl-v
 PageUp = pgup; alt-v
 Top = ctrl-home; ctrl-pgup; a1; alt-lt; g
 Bottom = ctrl-end; ctrl-pgdn; c1; alt-gt; shift-g
+History = alt-shift-e
 
 [diffviewer]
 ShowSymbols = alt-s; s
diff -urpN mc-4.8.23/misc/mc.menu.in mc-4.8.24/misc/mc.menu.in
--- mc-4.8.23/misc/mc.menu.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/mc.menu.in	2020-01-01 19:52:34.000000000 +0400
@@ -228,7 +228,7 @@ U       Uudecode marked news articles (n
         fi
         echo "Please test the output file before deleting anything."
 
-=+ f \.tar\.gz$ | f \.tar\.z$ | f \.tgz$ | f \.tpz$ | f \.tar\.lz$ | f \.tar\.lz4$ | f \.tar\.lzma$ | f \.tar\.7z$ | f \.tar\.xz$ | f \.tar\.zst | f \.tar\.Z$ | f \.tar\.bz2$ & t r
+=+ f \.tar\.gz$ | f \.tar\.z$ | f \.tgz$ | f \.tpz$ | f \.tar\.lz$ | f \.tar\.lz4$ | f \.tar\.lzma$ | f \.tar\.7z$ | f \.tar\.xz$ | f \.tar\.zst | f \.tar\.Z$ | f \.tar\.bz2$ & t rl
 x       Extract the contents of a compressed tar file
         unset PRG
         case %f in
diff -urpN mc-4.8.23/misc/skins/Makefile.am mc-4.8.24/misc/skins/Makefile.am
--- mc-4.8.23/misc/skins/Makefile.am	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/skins/Makefile.am	2020-01-01 19:52:34.000000000 +0400
@@ -10,6 +10,7 @@ skin_DATA = \
 	gotar.ini \
 	gray-green-purple256.ini \
 	gray-orange-blue256.ini \
+	julia256.ini \
 	mc46.ini \
 	modarcon16-defbg.ini \
 	modarcon16.ini \
diff -urpN mc-4.8.23/misc/skins/Makefile.in mc-4.8.24/misc/skins/Makefile.in
--- mc-4.8.23/misc/skins/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/misc/skins/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = misc/skins
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -207,7 +197,6 @@ am__tagged_files = $(HEADERS) $(SOURCES)
 am__DIST_COMMON = $(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -215,18 +204,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -266,10 +252,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -277,13 +260,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -291,12 +268,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -304,24 +276,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -355,7 +319,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -367,12 +330,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -448,6 +407,7 @@ skin_DATA = \
 	gotar.ini \
 	gray-green-purple256.ini \
 	gray-orange-blue256.ini \
+	julia256.ini \
 	mc46.ini \
 	modarcon16-defbg.ini \
 	modarcon16.ini \
diff -urpN mc-4.8.23/misc/skins/julia256.ini mc-4.8.24/misc/skins/julia256.ini
--- mc-4.8.23/misc/skins/julia256.ini	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/misc/skins/julia256.ini	2020-01-01 19:52:34.000000000 +0400
@@ -0,0 +1,153 @@
+# Dark skin with calm colors and good contrast. Mix of the standard & xoria256 skins.
+
+[skin]
+    description = Dark skin with calm colors and good contrast
+    256colors = true
+
+[Lines]
+    horiz = 
+    vert = 
+    lefttop = 
+    righttop = 
+    leftbottom = 
+    rightbottom = 
+    topmiddle = 
+    bottommiddle = 
+    leftmiddle = 
+    rightmiddle = 
+    cross = 
+    dhoriz = 
+    dvert = 
+    dlefttop = 
+    drighttop = 
+    dleftbottom = 
+    drightbottom = 
+    dtopmiddle = 
+    dbottommiddle = 
+    dleftmiddle = 
+    drightmiddle = 
+
+[core]
+    _default_ = lightgray;color237
+    selected = black;cyan
+    marked = yellow;color237
+    markselect = yellow;cyan
+    gauge = white;color237
+    input = black;cyan
+    inputunchanged = gray;cyan
+    inputmark = cyan;color237
+    disabled = gray;blue
+    reverse = black;lightgray
+    commandlinemark = black;lightgray
+    header = yellow;color237
+    inputhistory =
+    commandhistory =
+
+[dialog]
+    _default_ = black;lightgray
+    dfocus = black;cyan
+    dhotnormal = black;
+    dhotfocus = black;cyan
+    dtitle = black;
+
+[error]
+    _default_ = white;red
+    errdfocus = black;lightgray
+    errdhotnormal = yellow;red
+    errdhotfocus = yellow;lightgray
+    errdtitle = yellow;red
+
+[filehighlight]
+    directory = white;
+    executable = brightmagenta;
+    symlink = lightgray;
+    hardlink =
+    stalelink = brightred;
+    device = brightmagenta;
+    special = brightblue;
+    core = red;
+    temp = gray;
+    archive = brightgreen;
+    doc = brown;
+    source = cyan;
+    media = green;
+    graph = brightcyan;
+    database = brightred;
+
+[menu]
+    _default_ = lightgray;blue
+    menusel = black;cyan
+    menuhot = white;blue
+    menuhotsel = white;cyan
+    menuinactive = black;lightgray
+
+[popupmenu]
+    _default_ = lightgray;blue
+    menusel = black;cyan
+    menutitle = lightgray;blue
+
+[buttonbar]
+    hotkey = red;lightgray
+    button = black;lightgray
+
+[statusbar]
+    _default_ = black;lightgray
+
+[help]
+    _default_ = black;lightgray
+    helpitalic = red;lightgray
+    helpbold = blue;lightgray
+    helplink = black;cyan
+    helpslink = yellow;blue
+    helptitle = blue;lightgray
+
+[editor]
+    _default_ = lightgray;black
+    editbold = yellow;green
+    editmarked = black;lightgray
+    editwhitespace = brightblue;black
+    editlinestate = white;cyan
+    bookmark = white;red
+    bookmarkfound = black;green
+    editrightmargin = white;blue
+#    editbg =
+    editframe = gray;
+    editframeactive = lightgray;
+    editframedrag = red;
+    window-state-char = 
+    window-close-char = 
+
+[viewer]
+    _default_ = lightgray;black
+    viewbold = yellow;black
+    viewunderline = brightred;black
+    viewselected = yellow;cyan
+
+[diffviewer]
+    added = white;green
+    changedline = blue;cyan
+    changednew = red;cyan
+    changed = white;cyan
+    removed = white;red
+    error = red;lightgray
+
+[widget-common]
+    sort-sign-up = 
+    sort-sign-down = 
+
+[widget-panel]
+    hiddenfiles-sign-show = 
+    hiddenfiles-sign-hide = 
+    history-prev-item-sign = 
+    history-next-item-sign = 
+    history-show-list-sign = 
+    filename-scroll-left-char = 
+    filename-scroll-right-char = 
+
+[widget-scollbar]
+    first-vert-char = 
+    last-vert-char = 
+    first-horiz-char = 
+    last-horiz-char = 
+    current-char = 
+    background-char = 
diff -urpN mc-4.8.23/misc/syntax/Makefile.am mc-4.8.24/misc/syntax/Makefile.am
--- mc-4.8.23/misc/syntax/Makefile.am	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/syntax/Makefile.am	2020-01-01 19:52:34.000000000 +0400
@@ -89,6 +89,7 @@ SYNTAXFILES =			\
 	verilog.syntax		\
 	vhdl.syntax		\
 	xml.syntax		\
+	yabasic.syntax		\
 	yaml.syntax		\
 	yum-repo.syntax		\
 	yxx.syntax
diff -urpN mc-4.8.23/misc/syntax/Makefile.in mc-4.8.24/misc/syntax/Makefile.in
--- mc-4.8.23/misc/syntax/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/misc/syntax/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = misc/syntax
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -207,7 +197,6 @@ am__tagged_files = $(HEADERS) $(SOURCES)
 am__DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/Syntax.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -215,18 +204,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -266,10 +252,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -277,13 +260,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -291,12 +268,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -304,24 +276,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -355,7 +319,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -367,12 +330,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -526,6 +485,7 @@ SYNTAXFILES = \
 	verilog.syntax		\
 	vhdl.syntax		\
 	xml.syntax		\
+	yabasic.syntax		\
 	yaml.syntax		\
 	yum-repo.syntax		\
 	yxx.syntax
diff -urpN mc-4.8.23/misc/syntax/Syntax.in mc-4.8.24/misc/syntax/Syntax.in
--- mc-4.8.23/misc/syntax/Syntax.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/syntax/Syntax.in	2020-01-01 19:52:34.000000000 +0400
@@ -40,7 +40,7 @@ include lsm.syntax
 file .\*(bash(_completion|rc)|profile|\\.(sh|bash(rc|_(completion|profile|log(in|out)|aliases|exports|history))|profile|zlog(in|out)|zprofile|zsh(env|rc)))$ Shell\sScript ^#!\s\*/(.\*/|usr/bin/env\s)([a-z]?|ba|pdk)sh
 include sh.syntax
 
-file ..\*\\.(busname|(auto)?mount|net(dev|work)|link|path|service|slice|socket|swap|target|timer)$ SystemD\sConfig
+file ..\*\\.((?i:ini)|desktop|busname|(auto)?mount|net(dev|work)|link|path|service|slice|socket|swap|target|timer)$ INI-based\sFile
 include ini.syntax
 
 file ..\*\\.((?i:pl|pm|psgi)|t)$ Perl\sProgram ^#!.\*([\s/]perl|@PERL@)
@@ -202,9 +202,6 @@ include lua.syntax
 file ..\*\\.(?i:idl)$ CORBA\sIDL
 include idl.syntax
 
-file ..\*\\.(?i:ini)$ INI\sFile
-include ini.syntax
-
 file Don_t_match_me Mail\sfolder ^(From|Return-(P|p)ath:|From:|Date:)\s
 include mail.syntax
 
@@ -301,5 +298,8 @@ include markdown.syntax
 file ..\*\\.proto$ Protobuf\sFile
 include protobuf.syntax
 
+file ..\*\\.(?i:yab)$ Yabasic\s(Yet\sAnother\sBASIC)
+include markdown.syntax
+
 file .\* unknown
 include unknown.syntax
diff -urpN mc-4.8.23/misc/syntax/debian-sources-list.syntax mc-4.8.24/misc/syntax/debian-sources-list.syntax
--- mc-4.8.23/misc/syntax/debian-sources-list.syntax	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/syntax/debian-sources-list.syntax	2020-01-01 19:52:34.000000000 +0400
@@ -1,12 +1,70 @@
 context default
     keyword linestart deb-src brightmagenta/20
     keyword linestart deb brightmagenta/20
+
+    # Variables
     keyword \$\(ARCH\) brightred/18
 
+    # Options (delimiters)
+    keyword [ yellow/24
+    keyword ] yellow/24
+
+
+# Options
+context exclusive [ ]
+    # Basic syntax elements
+    keyword ! yellow/24
+    keyword , yellow/24
+    keyword = yellow/24
+
+    # Known options
+    keyword whole arch white
+    keyword whole allow-downgrade-to-insecure white
+    keyword whole allow-insecure white
+    keyword whole allow-weak white
+    keyword whole by-hash white
+    keyword whole check-date white
+    keyword whole check-valid-until white
+    keyword whole date-max-future white
+    keyword whole inrelease-path white
+    keyword whole lang white
+    keyword whole pdiffs white
+    keyword whole signed-by white
+    keyword whole target white
+    keyword whole trusted white
+    keyword whole valid-until-max white
+    keyword whole valid-until-min white
+
+    # Known values
+    keyword whole force white
+    keyword whole no white
+    keyword whole yes white
+
+# Comment
 context # \n brown/22
+
+# Common URI specifications
+context cdrom\:\/ \s cyan/24
+context copy\: \s cyan/24
+context file\:\/ \s cyan/24
 context ftp\:\/\/ \s green/6
 context http\:\/\/ \s green/6
-context cdrom\:\/ \s yellow/24
-context file\:\/ \s brightcyan/14
+context https\:\/\/ \s green/6
+context mirror\:\/\/ \s green/6
+context mirror\+cdrom\:\/ \s cyan/24
+context mirror\+copy\: \s cyan/24
+context mirror\+file\:\/ \s cyan/24
+context mirror\+ftp\:\/\/ \s green/6
+context mirror\+https\:\/\/ \s green/6
+context mirror\+rsh\:\/\/ \s green/6
+context mirror\+ssh\:\/\/ \s green/6
+context rsh\:\/\/ \s green/6
+context ssh\:\/\/ \s green/6
 
-###############################################################################
+# Other URI specifications
+context mirror\+s3\:\/\/ \s brightgreen/6
+context mirror\+tor\+http\:\/\/ \s brightgreen/6
+context mirror\+tor\+https\:\/\/ \s brightgreen/6
+context s3\:\/\/ \s brightgreen/6
+context tor\+http\:\/\/ \s brightgreen/6
+context tor\+https\:\/\/ \s brightgreen/6
diff -urpN mc-4.8.23/misc/syntax/spec.syntax mc-4.8.24/misc/syntax/spec.syntax
--- mc-4.8.23/misc/syntax/spec.syntax	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/syntax/spec.syntax	2020-01-01 19:52:34.000000000 +0400
@@ -55,6 +55,9 @@ context default
     keyword whole linestart %pre red
     keyword whole linestart %prep red
     keyword whole linestart %preun red
+    keyword whole linestart %pretrans red
+    keyword whole linestart %posttrans red
+    keyword whole linestart %verifyscript red
 
     keyword whole %define brightmagenta
     keyword whole %dump brightmagenta
diff -urpN mc-4.8.23/misc/syntax/yabasic.syntax mc-4.8.24/misc/syntax/yabasic.syntax
--- mc-4.8.23/misc/syntax/yabasic.syntax	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/misc/syntax/yabasic.syntax	2020-01-01 19:52:34.000000000 +0400
@@ -0,0 +1,195 @@
+# Yabasic (BP7 IDE alike)
+# This file is part of yabasic and may be copied under the terms of
+# MIT License which can be found in the file LICENSE.
+
+caseinsensitive
+
+context default yellow
+    keyword whole abs white
+    keyword whole acos white
+    keyword whole and white
+    keyword whole arraydim white
+    keyword whole arraydimension white
+    keyword whole arraysize white
+    keyword whole as white
+    keyword whole asc white
+    keyword whole asin white
+    keyword whole at white
+    keyword whole atan white
+    keyword whole beep white
+    keyword whole bell white
+    keyword whole bin white
+    keyword whole bind white
+    keyword whole bitblit white
+    keyword whole bitblt white
+    keyword whole box white
+    keyword whole break white
+    keyword whole case white
+    keyword whole ceil white
+    keyword whole chomp white
+    keyword whole chr white
+    keyword whole circle white
+    keyword whole clear white
+    keyword whole close white
+    keyword whole color white
+    keyword whole colour white
+    keyword whole compile white
+    keyword whole continue white
+    keyword whole cos white
+    keyword whole curve white
+    keyword whole data white
+    keyword whole date white
+    keyword whole dec white
+    keyword whole default white
+    keyword whole dim white
+    keyword whole do white
+    keyword whole dot white
+    keyword whole else white
+    keyword whole elseif white
+    keyword whole elsif white
+    keyword whole end white
+    keyword whole endif white
+    keyword whole eof white
+    keyword whole eor white
+    keyword whole error white
+    keyword whole execute white
+    keyword whole exit white
+    keyword whole exp white
+    keyword whole export white
+    keyword whole fi white
+    keyword whole fill white
+    keyword whole filled white
+    keyword whole for white
+    keyword whole frac white
+    keyword whole getbit white
+    keyword whole getscreen white
+    keyword whole glob white
+    keyword whole gosub white
+    keyword whole goto white
+    keyword whole hex white
+    keyword whole if white
+    keyword whole inkey white
+    keyword whole input white
+    keyword whole instr white
+    keyword whole int white
+    keyword whole interrupt white
+    keyword whole label white
+    keyword whole left white
+    keyword whole len white
+    keyword whole let white
+    keyword whole line white
+    keyword whole local white
+    keyword whole lo gwhite
+    keyword whole loop white
+    keyword whole lower white
+    keyword whole ltrim white
+    keyword whole max white
+    keyword whole mid white
+    keyword whole min white
+    keyword whole mod cyan
+    keyword whole mouseb white
+    keyword whole mousebutton white
+    keyword whole mousemod white
+    keyword whole mousemodifier white
+    keyword whole mousex white
+    keyword whole mousey white
+    keyword whole new white
+    keyword whole next white
+    keyword whole not white
+    keyword whole numparam white
+    keyword whole on white
+    keyword whole open white
+    keyword whole or white
+    keyword whole origin white
+    keyword whole pause white
+    keyword whole peek white
+    keyword whole poke white
+    keyword whole print white
+    keyword whole printer white
+    keyword whole putbit white
+    keyword whole putscreen white
+    keyword whole ran white
+    keyword whole read white
+    keyword whole reading white
+    keyword whole rect white
+    keyword whole rectangle white
+    keyword whole redim white
+    keyword whole rem brightgreen
+    keyword whole repeat white
+    keyword whole restore white
+    keyword whole return white
+    keyword whole reverse white
+    keyword whole right white
+    keyword whole rinstr white
+    keyword whole rtrim white
+    keyword whole screen white
+    keyword whole seek white
+    keyword whole sig white
+    keyword whole sin white
+    keyword whole sleep white
+    keyword whole split white
+    keyword whole sqr white
+    keyword whole sqrt white
+    keyword whole static white
+    keyword whole step white
+    keyword whole str white
+    keyword whole sub white
+    keyword whole subroutine white
+    keyword whole switch white
+    keyword whole system white
+    keyword whole tan white
+    keyword whole tell white
+    keyword whole text white
+    keyword whole then white
+    keyword whole time white
+    keyword whole to white
+    keyword whole token white
+    keyword whole triangle white
+    keyword whole trim white
+    keyword whole until white
+    keyword whole upper white
+    keyword whole using white
+    keyword whole val white
+    keyword whole wait white
+    keyword whole wend white
+    keyword whole while white
+    keyword whole window white
+    keyword whole writing white
+    keyword whole xor white
+
+    keyword // brightgreen
+
+    keyword > cyan
+    keyword < cyan
+    keyword \+ cyan
+    keyword - cyan
+    keyword \* cyan
+    keyword / cyan
+    keyword ^ cyan
+    keyword $ brown
+    keyword = cyan
+    keyword [ lightgray
+    keyword ] lightgray
+    keyword ( lightgray
+    keyword ) lightgray
+    keyword , lightgray
+    keyword . lightgray
+    keyword : lightgray
+    keyword ; lightgray
+
+    keyword 0 brightred
+    keyword 1 brightred
+    keyword 2 brightred
+    keyword 3 brightred
+    keyword 4 brightred
+    keyword 5 brightred
+    keyword 6 brightred
+    keyword 7 brightred
+    keyword 8 brightred
+    keyword 9 brightred
+
+context " " brightcyan
+context exclusive // \n brightgreen
+context exclusive rem \n brightgreen
+
+spellcheck
diff -urpN mc-4.8.23/misc/syntax/yaml.syntax mc-4.8.24/misc/syntax/yaml.syntax
--- mc-4.8.23/misc/syntax/yaml.syntax	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/misc/syntax/yaml.syntax	2020-01-01 19:52:34.000000000 +0400
@@ -35,3 +35,6 @@ context " " green
 context ' ' green
     spellcheck
     keyword {{*}} brightred
+
+context exclusive |\[123456789\+\-\s\t\]\n \n- brown
+context exclusive >\[123456789\+\-\s\t\]\n \n- brown
diff -urpN mc-4.8.23/po/POTFILES.in mc-4.8.24/po/POTFILES.in
--- mc-4.8.23/po/POTFILES.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/po/POTFILES.in	2020-01-19 01:43:05.000000000 +0400
@@ -12,6 +12,7 @@ lib/tty/color-ncurses.c
 lib/tty/color-slang.c
 lib/tty/key.c
 lib/tty/tty.c
+lib/tty/tty-internal.c
 lib/tty/tty-slang.c
 lib/util.c
 lib/utilunix.c
@@ -48,7 +49,6 @@ src/filemanager/chmod.c
 src/filemanager/chown.c
 src/filemanager/cmd.c
 src/filemanager/command.c
-src/filemanager/dir.c
 src/filemanager/ext.c
 src/filemanager/file.c
 src/filemanager/filegui.c
Binary files mc-4.8.23/po/az.gmo and mc-4.8.24/po/az.gmo differ
diff -urpN mc-4.8.23/po/az.po mc-4.8.24/po/az.po
--- mc-4.8.23/po/az.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/az.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Azerbaijani (http://www.transifex.com/mc/mc/language/az/)\n"
 "Language: az\n"
@@ -459,6 +459,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr "TERM dyini bildirilmyib!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1284,6 +1296,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1712,6 +1727,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2261,11 +2281,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2328,9 +2343,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3198,6 +3210,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3423,6 +3438,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "stifadi trfindn bildirln killandirm dzgn deyil, sasa keirm."
Binary files mc-4.8.23/po/be.gmo and mc-4.8.24/po/be.gmo differ
diff -urpN mc-4.8.23/po/be.po mc-4.8.24/po/be.po
--- mc-4.8.23/po/be.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/be.po	2020-01-19 02:04:52.000000000 +0400
@@ -12,9 +12,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-06-16 17:59+0000\n"
-"Last-Translator: Yury V. Zaytsev <yury@shurup.com>\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
+"Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Belarusian (http://www.transifex.com/mc/mc/language/be/)\n"
 "Language: be\n"
 "MIME-Version: 1.0\n"
@@ -491,6 +491,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "  TERM  !\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1374,6 +1386,9 @@ msgstr "(&N)"
 msgid "&Close"
 msgstr "(&C)"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr " (&A)"
 
@@ -1810,6 +1825,13 @@ msgstr " 
 msgid "The shell is already running a command"
 msgstr "   "
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"  xterm   Linux;\n"
+"  ."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr " exit,    Midnight Commander"
 
@@ -2369,13 +2391,6 @@ msgstr ""
 "  , ,   \n"
 " "
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"  xterm   Linux;\n"
-"  ."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "%s    "
@@ -2442,9 +2457,6 @@ msgstr ""
 "   %s\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "   "
-
 msgid "Parameter"
 msgstr ""
 
@@ -3397,6 +3409,9 @@ msgstr " (
 msgid "Command &history"
 msgstr " (&H)"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr " (&R)"
 
@@ -3626,6 +3641,9 @@ msgstr " "
 msgid "Do you really want to execute?"
 msgstr " ?"
 
+msgid "Cannot read directory contents"
+msgstr "   "
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "  : ,    ."
 
Binary files mc-4.8.23/po/bg.gmo and mc-4.8.24/po/bg.gmo differ
diff -urpN mc-4.8.23/po/bg.po mc-4.8.24/po/bg.po
--- mc-4.8.23/po/bg.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/bg.po	2020-01-19 02:04:52.000000000 +0400
@@ -11,8 +11,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Bulgarian (http://www.transifex.com/mc/mc/language/bg/)\n"
 "Language: bg\n"
@@ -487,6 +487,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr " TERM   !\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1357,6 +1369,9 @@ msgstr "&"
 msgid "&Close"
 msgstr "&"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr " &..."
 
@@ -1793,6 +1808,13 @@ msgstr "    
 msgid "The shell is already running a command"
 msgstr "   "
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"   xterm   ;\n"
+"     /."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr " 'exit',      Midnight Commander-"
 
@@ -2352,13 +2374,6 @@ msgstr ""
 "      \n"
 " ,       "
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"   xterm   ;\n"
-"     /."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "'%s'    "
@@ -2425,9 +2440,6 @@ msgstr ""
 "    chdir  \"%s\"\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "       "
-
 msgid "Parameter"
 msgstr ""
 
@@ -3380,6 +3392,9 @@ msgstr "  &
 msgid "Command &history"
 msgstr " &"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "     &"
 
@@ -3605,6 +3620,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr "     ?"
 
+msgid "Cannot read directory contents"
+msgstr "       "
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "   ,    ."
 
Binary files mc-4.8.23/po/ca.gmo and mc-4.8.24/po/ca.gmo differ
diff -urpN mc-4.8.23/po/ca.po mc-4.8.24/po/ca.po
--- mc-4.8.23/po/ca.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/ca.po	2020-01-19 02:04:52.000000000 +0400
@@ -16,8 +16,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-24 14:13+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-22 22:08+0000\n"
 "Last-Translator: Antoni Bella Prez <antonibella5@yahoo.com>\n"
 "Language-Team: Catalan (http://www.transifex.com/mc/mc/language/ca/)\n"
 "Language: ca\n"
@@ -493,6 +493,18 @@ msgstr "Maj"
 msgid "The TERM environment variable is unset!\n"
 msgstr "La variable d'entorn TERM no est definida!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr "No s'ha pogut comprovar la canonada SIGWINCH"
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "No s'han pogut crear la canonada per a SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "No s'ha pogut configurar l'escriptura final de la canonada SIGWINCH"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "No s'ha pogut configurar la lectura final de la canonada SIGWINCH"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1382,6 +1394,9 @@ msgstr "&Nou"
 msgid "&Close"
 msgstr "Tan&ca"
 
+msgid "&History..."
+msgstr "&Historial..."
+
 msgid "Save &as..."
 msgstr "Desa com &a..."
 
@@ -1818,6 +1833,13 @@ msgstr "No s'ha pogut obtenir una cpia
 msgid "The shell is already running a command"
 msgstr "La shell ja est executant una ordre"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"No feu servir ni xterm ni una consola Linux.\n"
+"No podreu alternar entre els plafons."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Escriviu exit per tornar al Midnight Commander"
 
@@ -2377,13 +2399,6 @@ msgstr ""
 "Ambds plafons han d'estar en el mode de llistat\n"
 "per usar aquesta ordre"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"No feu servir ni xterm ni una consola Linux.\n"
-"No podreu alternar entre els plafons."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "%s no s un enlla simblic"
@@ -2450,9 +2465,6 @@ msgstr ""
 "No s'ha pogut fer chdir a %s\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "No s'ha pogut llegir el contingut del directori"
-
 msgid "Parameter"
 msgstr "Parmetre"
 
@@ -3408,6 +3420,9 @@ msgstr "Mostra les m&ides dels directori
 msgid "Command &history"
 msgstr "&Historial de les ordres"
 
+msgid "Viewed/edited files hi&story"
+msgstr "Hi&storial dels fitxers vistos/editats"
+
 msgid "Di&rectory hotlist"
 msgstr "Favorits dels di&rectoris"
 
@@ -3633,6 +3648,9 @@ msgstr "No seleccionis"
 msgid "Do you really want to execute?"
 msgstr "Realment el voleu executar?"
 
+msgid "Cannot read directory contents"
+msgstr "No s'ha pogut llegir el contingut del directori"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "El format facilitat per l'usuari sembla que no s vlid, s'est tornant al "
Binary files mc-4.8.23/po/cs.gmo and mc-4.8.24/po/cs.gmo differ
diff -urpN mc-4.8.23/po/cs.po mc-4.8.24/po/cs.po
--- mc-4.8.23/po/cs.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/cs.po	2020-01-19 02:04:52.000000000 +0400
@@ -13,8 +13,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-03 09:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 05:03+0000\n"
 "Last-Translator: Pavel Borecki <pavel.borecki@gmail.com>\n"
 "Language-Team: Czech (http://www.transifex.com/mc/mc/language/cs/)\n"
 "Language: cs\n"
@@ -490,6 +490,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "Promnn prosted TERM nen nastavena!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr "Neda se zkontrolovat rouru SIGWINCH"
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "Neda se vytvoit rouru pro signl SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "Neda se nastavit zpisovou st roury pro signl SIGWINCH"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "Neda se nastavit tec st roury pro signl SIGWINCH"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1373,6 +1385,9 @@ msgstr "&Nov"
 msgid "&Close"
 msgstr "&Zavt"
 
+msgid "&History..."
+msgstr "&Historie"
+
 msgid "Save &as..."
 msgstr "Uloit j&ako"
 
@@ -1810,6 +1825,13 @@ msgstr "Neda se zskat mstn kop
 msgid "The shell is already running a command"
 msgstr "V shellu je u sputn pkaz"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Toto nen xterm nebo linuxov konzola;\n"
+"panely nelze pepnout."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Do Midnight Commander se vrtte zadnm pkazu exit"
 
@@ -2369,13 +2391,6 @@ msgstr ""
 "Pro pouit tohoto pkazu je teba, aby\n"
 "oba panely zobrazovaly seznam soubor"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Toto nen xterm nebo linuxov konzola;\n"
-"panely nelze pepnout."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "%s nen symbolick odkaz"
@@ -2444,9 +2459,6 @@ msgstr ""
 "Neda se pejt do sloky %s\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Neda se nast obsah sloky"
-
 msgid "Parameter"
 msgstr "Parametr"
 
@@ -3310,7 +3322,7 @@ msgid "S&hell link..."
 msgstr "S&hell spojen"
 
 msgid "S&FTP link..."
-msgstr "S&FTP spojen"
+msgstr "SFTP sp&ojen"
 
 msgid "SM&B link..."
 msgstr "SM&B spojen"
@@ -3405,6 +3417,9 @@ msgstr "Zobrazit velikost&i sloek"
 msgid "Command &history"
 msgstr "&Historie pkaz"
 
+msgid "Viewed/edited files hi&story"
+msgstr "Hi&storie zobrazench/upravovanch soubor"
+
 msgid "Di&rectory hotlist"
 msgstr "&Rychl pstup ke slokm"
 
@@ -3634,6 +3649,9 @@ msgstr "Zruit vbr"
 msgid "Do you really want to execute?"
 msgstr "Opravdu chcete spustit?"
 
+msgid "Cannot read directory contents"
+msgstr "Neda se nast obsah sloky"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Chybn formt zadan uivatelem, nhradn bude pouit vchoz."
 
Binary files mc-4.8.23/po/da.gmo and mc-4.8.24/po/da.gmo differ
diff -urpN mc-4.8.23/po/da.po mc-4.8.24/po/da.po
--- mc-4.8.23/po/da.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/da.po	2020-01-19 02:04:52.000000000 +0400
@@ -13,8 +13,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-04 17:03+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-17 03:41+0000\n"
 "Last-Translator: scootergrisen\n"
 "Language-Team: Danish (http://www.transifex.com/mc/mc/language/da/)\n"
 "Language: da\n"
@@ -488,6 +488,18 @@ msgstr "Skift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "TERM-miljvariabelen er ikke sat!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr "Kan ikke tjekke SIGWINCH-datakanal"
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "Kan ikke oprette datakanal til SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "Kan ikke konfigurerer skriveslutning til SIGWINCH-datakanal"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "Kan ikke konfigurerer lseslutning til SIGWINCH-datakanal"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1371,6 +1383,9 @@ msgstr "&Ny"
 msgid "&Close"
 msgstr "&Luk"
 
+msgid "&History..."
+msgstr "&Historik..."
+
 msgid "Save &as..."
 msgstr "Gem &som..."
 
@@ -1807,6 +1822,13 @@ msgstr "Kan ikke hente en lokal kopi af
 msgid "The shell is already running a command"
 msgstr "Skallen krer allerede en kommando"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Ikke en xterm eller Linuxkonsol;\n"
+"panelerne kan ikke skiftes."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Skriv 'exit' for at vende tilbage til Midnight Commander"
 
@@ -2367,13 +2389,6 @@ msgstr ""
 "Begge paneler skal vre i listeformat\n"
 "for at bruge denne kommando"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Ikke en xterm eller Linuxkonsol;\n"
-"panelerne kan ikke skiftes."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "'%s' er ikke en symbolsk henvisning"
@@ -2440,9 +2455,6 @@ msgstr ""
 "Kan ikke chdir til %s\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Kan ikke lse mappeindhold"
-
 msgid "Parameter"
 msgstr "Parameter"
 
@@ -3397,6 +3409,9 @@ msgstr "Vis &mappestrrelser"
 msgid "Command &history"
 msgstr "Kommando&historik"
 
+msgid "Viewed/edited files hi&story"
+msgstr "Viste/redigerede &filhistorik"
+
 msgid "Di&rectory hotlist"
 msgstr "&Mappehotlist"
 
@@ -3622,6 +3637,9 @@ msgstr "Fravlg"
 msgid "Do you really want to execute?"
 msgstr "nsker du virkelig at kre?"
 
+msgid "Cannot read directory contents"
+msgstr "Kan ikke lse mappeindhold"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Brugerdefineret format ser ugyldigt ud, bruger standard."
 
Binary files mc-4.8.23/po/de.gmo and mc-4.8.24/po/de.gmo differ
diff -urpN mc-4.8.23/po/de.po mc-4.8.24/po/de.po
--- mc-4.8.23/po/de.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/de.po	2020-01-19 02:04:52.000000000 +0400
@@ -9,7 +9,7 @@
 # Fabian Affolter <fab@fedoraproject.org>, 2012-2013
 # Karsten <waldstadt@web.de>, 2016
 # Larson Mrz <larson@protonmail.ch>, 2016
-# Mr.Update, 2019
+# Mr.Update, 2019-2020
 # Slow Rider, 2015,2018
 # Slava Zanko <slavazanko@gmail.com>, 2011
 # username <my.somewhat.lengthy.loginname@gmail.com>, 2011
@@ -19,8 +19,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-04-20 21:08+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2020-01-05 13:48+0000\n"
 "Last-Translator: Mr.Update\n"
 "Language-Team: German (http://www.transifex.com/mc/mc/language/de/)\n"
 "Language: de\n"
@@ -499,6 +499,18 @@ msgstr "Umschalt"
 msgid "The TERM environment variable is unset!\n"
 msgstr "Die TERM-Variable ist nicht gesetzt!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr "Kann SIGWINCH-Pipe nicht berprfen"
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "Kann Pipe fr SIGWINCH nicht erstellen"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "Kann Schreib-Ende der SIGWINCH-Pipe nicht konfigurieren"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "Kann Lese-Ende der SIGWINCH-Pipe nicht konfigurieren"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1232,7 +1244,7 @@ msgstr "Ersetzen"
 
 #, c-format
 msgid "%ld replacements made"
-msgstr "%ld Ersetzungen durchgefhrt."
+msgstr "%ld Ersetzung(en) durchgefhrt."
 
 msgid "[NoName]"
 msgstr "[KeinName]"
@@ -1388,6 +1400,9 @@ msgstr "&Neu"
 msgid "&Close"
 msgstr "&Schlieen"
 
+msgid "&History..."
+msgstr "C&hronik..."
+
 msgid "Save &as..."
 msgstr "Speichern &unter..."
 
@@ -1824,6 +1839,13 @@ msgstr "Kann lokale Kopie von %s nicht e
 msgid "The shell is already running a command"
 msgstr "Die Shell fhrt bereits einen Befehl aus"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Weder xterm noch Linux-Konsole;\n"
+"die Panels knnen nicht ausgetauscht werden."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Geben Sie 'exit' ein, um zum Midnight Commander zurckzukehren"
 
@@ -2382,13 +2404,6 @@ msgstr ""
 "Beide Panels sollten fr diesen Befehl\n"
 "im Listenmodus sein"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Weder xterm noch Linux-Konsole;\n"
-"die Panels knnen nicht ausgetauscht werden."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "'%s' ist kein symbolischer Link"
@@ -2455,9 +2470,6 @@ msgstr ""
 "Kann nicht ins Verzeichnis \"%s\" wechseln\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Kann Verzeichnis nicht lesen"
-
 msgid "Parameter"
 msgstr "Parameter"
 
@@ -3414,6 +3426,9 @@ msgstr "Verze&ichnisgren anzeigen"
 msgid "Command &history"
 msgstr "Befehlsc&hronik"
 
+msgid "Viewed/edited files hi&story"
+msgstr "Chronik der angezeigten/bearbeiteten Dateien"
+
 msgid "Di&rectory hotlist"
 msgstr "Ve&rzeichnis-Hotlist"
 
@@ -3639,6 +3654,9 @@ msgstr "Deselektieren"
 msgid "Do you really want to execute?"
 msgstr "Mchten Sie wirklich ausfhren?"
 
+msgid "Cannot read directory contents"
+msgstr "Kann Verzeichnis nicht lesen"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Benutzerdefiniertes Format sieht ungltig aus, benutze Standard."
 
Binary files mc-4.8.23/po/de_CH.gmo and mc-4.8.24/po/de_CH.gmo differ
diff -urpN mc-4.8.23/po/de_CH.po mc-4.8.24/po/de_CH.po
--- mc-4.8.23/po/de_CH.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/de_CH.po	2020-01-19 02:04:52.000000000 +0400
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
 "PO-Revision-Date: 2015-02-26 09:48+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: German (Switzerland) (http://www.transifex.com/projects/p/mc/"
@@ -459,6 +459,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1282,6 +1294,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1710,6 +1725,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2259,11 +2279,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2326,9 +2341,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3196,6 +3208,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3421,6 +3436,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/el.gmo and mc-4.8.24/po/el.gmo differ
diff -urpN mc-4.8.23/po/el.po mc-4.8.24/po/el.po
--- mc-4.8.23/po/el.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/el.po	2020-01-19 02:04:52.000000000 +0400
@@ -7,13 +7,13 @@
 # Panos Bouklis <panos@echidna-band.com>, 2012
 # Slava Zanko <slavazanko@gmail.com>, 2011
 # Thodoris Arvanitidis <inactive+watchdog@transifex.com>, 2015
-#  , 2014
+# Yannis Anthymidis, 2014
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Greek (http://www.transifex.com/mc/mc/language/el/)\n"
 "Language: el\n"
@@ -476,6 +476,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1312,6 +1324,9 @@ msgstr "&"
 msgid "&Close"
 msgstr "&"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr " &..."
 
@@ -1742,6 +1757,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr "     "
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2295,11 +2315,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2366,9 +2381,6 @@ msgstr ""
 " chdir  \"%s\"\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "   "
-
 msgid "Parameter"
 msgstr ""
 
@@ -3290,6 +3302,9 @@ msgstr "& 
 msgid "Command &history"
 msgstr "& "
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3515,6 +3530,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr "    ;"
 
+msgid "Cannot read directory contents"
+msgstr "   "
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/en_GB.gmo and mc-4.8.24/po/en_GB.gmo differ
diff -urpN mc-4.8.23/po/en_GB.po mc-4.8.24/po/en_GB.po
--- mc-4.8.23/po/en_GB.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/en_GB.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: English (United Kingdom) (http://www.transifex.com/mc/mc/"
 "language/en_GB/)\n"
@@ -469,6 +469,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1292,6 +1304,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1720,6 +1735,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2269,11 +2289,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2336,9 +2351,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3206,6 +3218,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3431,6 +3446,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/eo.gmo and mc-4.8.24/po/eo.gmo differ
diff -urpN mc-4.8.23/po/eo.po mc-4.8.24/po/eo.po
--- mc-4.8.23/po/eo.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/eo.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-06-01 18:41+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-25 01:49+0000\n"
 "Last-Translator: Keith Bowes <zooplah@gmail.com>\n"
 "Language-Team: Esperanto (http://www.transifex.com/mc/mc/language/eo/)\n"
 "Language: eo\n"
@@ -483,6 +483,18 @@ msgstr "Uskleca inversigilo"
 msgid "The TERM environment variable is unset!\n"
 msgstr "La medivariablo TERM ne estas valorizita!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr "Ne eblas kontroli SIGWINCH-dukton"
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "Ne eblas krei duktajn por SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "Ne eblas agordi skribfinon de SIGWINCH-dukto"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "Ne eblas agordi legfinon de SIGWINCH-dukton"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1369,6 +1381,9 @@ msgstr "&Nova"
 msgid "&Close"
 msgstr "&Fermi"
 
+msgid "&History..."
+msgstr "&Historio"
+
 msgid "Save &as..."
 msgstr "K&onservi kiel..."
 
@@ -1805,6 +1820,13 @@ msgstr "Ne eblas atingi lokan kopion de
 msgid "The shell is already running a command"
 msgstr "La elo jam plenumas komandon"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Ne xterm-fenestron a linuksan terminalon;\n"
+"la flankojn oni ne povis inversigi."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Tajpu \"exit\" por reiri al Midnight Commander"
 
@@ -2364,13 +2386,6 @@ msgstr ""
 "Amba flankoj estu en la lista reimo\n"
 "por uzi i tiun komandon"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Ne xterm-fenestron a linuksan terminalon;\n"
-"la flankojn oni ne povis inversigi."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "'%s' ne estas simbola ligilo"
@@ -2437,9 +2452,6 @@ msgstr ""
 "Ne eblas ani dosierujon al \"%s\"\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Ne eblas legi dosierujan enhavon"
-
 msgid "Parameter"
 msgstr "Parametro"
 
@@ -2847,7 +2859,7 @@ msgid "Sorry, I could not put the job in
 msgstr "Bedarinde mi ne povis meti la taskon en la fonon"
 
 msgid "S&uspend"
-msgstr "&Pazigi"
+msgstr "P&azigi"
 
 msgid "Con&tinue"
 msgstr "&Darigi"
@@ -3394,6 +3406,9 @@ msgstr "Montri dosierujajn g&randojn"
 msgid "Command &history"
 msgstr "Komanda &historio"
 
+msgid "Viewed/edited files hi&story"
+msgstr "H&istorio de viditaj/redaktitaj dosieroj"
+
 msgid "Di&rectory hotlist"
 msgstr "Dosieru&ja rapidolisto"
 
@@ -3619,6 +3634,9 @@ msgstr "Malelekti"
 msgid "Do you really want to execute?"
 msgstr "u vi efekti volas plenumigi?"
 
+msgid "Cannot read directory contents"
+msgstr "Ne eblas legi dosierujan enhavon"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Uzanto havigita formato aspektas nevalide, restarigante la aprioran."
 
Binary files mc-4.8.23/po/es.gmo and mc-4.8.24/po/es.gmo differ
diff -urpN mc-4.8.23/po/es.po mc-4.8.24/po/es.po
--- mc-4.8.23/po/es.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/es.po	2020-01-19 02:04:52.000000000 +0400
@@ -13,8 +13,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-05 09:31+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 14:54+0000\n"
 "Last-Translator: David Martin <dhmartina@yahoo.es>\n"
 "Language-Team: Spanish (http://www.transifex.com/mc/mc/language/es/)\n"
 "Language: es\n"
@@ -48,7 +48,7 @@ msgstr "Verifique los datos de entrada
 
 #, c-format
 msgid "Unable to create group '%s' for events!"
-msgstr "Imposible crear el grupo de eventos %s"
+msgstr "Imposible crear el grupo de eventos %s!"
 
 #, c-format
 msgid "Unable to create event '%s'!"
@@ -486,6 +486,18 @@ msgstr "Mays"
 msgid "The TERM environment variable is unset!\n"
 msgstr "La variable de entorno TERM est sin definir!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr "Imposible comprobar tuberia para SIGWINCH"
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "Imposible crear tubera para SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "Imposible configurar extremo de escritura de la tuberia para SIGWINCH"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "Imposible configurar extremo de lectura de la tuberia para SIGWINCH"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1374,6 +1386,9 @@ msgstr "&Nuevo"
 msgid "&Close"
 msgstr "&Cerrar"
 
+msgid "&History..."
+msgstr "&Historia..."
+
 msgid "Save &as..."
 msgstr "guar&Dar como..."
 
@@ -1810,6 +1825,13 @@ msgstr "Imposible obtener una copia loca
 msgid "The shell is already running a command"
 msgstr "El shell ya est ejecutando un comando"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"No se est usando ni xterm ni la consola Linux.\n"
+"Los paneles no pueden ser ocultados."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Teclee exit para regresar a Midnight Commander"
 
@@ -2369,13 +2391,6 @@ msgstr ""
 "Ambos paneles deben estar en\n"
 "modo listado para usar esta funcin"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"No se est usando ni xterm ni la consola Linux.\n"
-"Los paneles no pueden ser ocultados."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "%s no es un enlace simblico"
@@ -2442,9 +2457,6 @@ msgstr ""
 "Imposible cambiar al directorio %s\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Imposible leer directorio"
-
 msgid "Parameter"
 msgstr "Parmetro"
 
@@ -3400,6 +3412,9 @@ msgstr "mostrar &Tamaos de los directo
 msgid "Command &history"
 msgstr "&Historia de rdenes"
 
+msgid "Viewed/edited files hi&story"
+msgstr "hi&Storia de archivos"
+
 msgid "Di&rectory hotlist"
 msgstr "&Favoritos..."
 
@@ -3625,6 +3640,9 @@ msgstr "De-seleccionar grupo"
 msgid "Do you really want to execute?"
 msgstr "Realmente quiere ejecutar?"
 
+msgid "Cannot read directory contents"
+msgstr "Imposible leer directorio"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Formato no parece vlido. Recuperando el predeterminado."
 
@@ -4078,21 +4096,21 @@ msgstr "fish: Leyendo el directorio %s..
 
 #, c-format
 msgid "%s: done."
-msgstr "%s: hecho."
+msgstr "%s: Hecho."
 
 #, c-format
 msgid "%s: failure"
-msgstr "%s: fallo"
+msgstr "%s: Fallo."
 
 #, c-format
 msgid "fish: store %s: sending command..."
-msgstr "fish: guardar %s: enviando comando..."
+msgstr "fish: Guardar %s: enviando comando..."
 
 msgid "fish: Local read failed, sending zeros"
 msgstr "fish: Fallo de lectura local, enviando ceros"
 
 msgid "fish: storing file"
-msgstr "ftpfs: guardando archivo"
+msgstr "fish: Guardando archivo"
 
 msgid "Aborting transfer..."
 msgstr "Abortando transferencia."
@@ -4132,7 +4150,7 @@ msgstr "ftpfs: Autorizados"
 
 #, c-format
 msgid "ftpfs: Login incorrect for user %s "
-msgstr "ftpfs: denegada autorizacin al usuario %s"
+msgstr "ftpfs: Denegada autorizacin al usuario %s"
 
 msgid "ftpfs: Invalid host name."
 msgstr "ftpfs: Nombre de mquina incorrecto"
@@ -4199,7 +4217,7 @@ msgid "ftpfs: failed; nowhere to fallbac
 msgstr "ftpfs: Fall; no hay dnde replegarse"
 
 msgid "ftpfs: storing file"
-msgstr "ftpfs: guardando archivo"
+msgstr "ftpfs: Guardando archivo"
 
 msgid ""
 "~/.netrc file has incorrect mode\n"
@@ -4210,7 +4228,7 @@ msgstr ""
 
 #, c-format
 msgid "%s: Warning: file %s not found\n"
-msgstr "%s: Atencin: no se encuentra el archivo %s\n"
+msgstr "%s: Atencin: No se encuentra el archivo %s\n"
 
 #, c-format
 msgid ""
@@ -4334,7 +4352,7 @@ msgstr ""
 "no parece un archivo de tipo tar."
 
 msgid "undelfs: error"
-msgstr "undelfs: error"
+msgstr "undelfs: Error"
 
 msgid "not enough memory"
 msgstr "memoria insuficiente"
@@ -4352,7 +4370,7 @@ msgstr "al iniciar rastreo de inodos %d"
 
 #, c-format
 msgid "undelfs: loading deleted files information %d inodes"
-msgstr "undelfs: cargando informacin de archivos eliminados %d inodos"
+msgstr "undelfs: Cargando informacin de archivos eliminados %d inodos"
 
 #, c-format
 msgid "while calling ext2_block_iterate %d"
@@ -4370,7 +4388,7 @@ msgid "Cannot open file %s"
 msgstr "Imposible abrir el archivo %s"
 
 msgid "undelfs: reading inode bitmap..."
-msgstr "undelfs: leyendo mapa de inodos..."
+msgstr "undelfs: Leyendo mapa de inodos..."
 
 #, c-format
 msgid ""
@@ -4381,7 +4399,7 @@ msgstr ""
 "%s"
 
 msgid "undelfs: reading block bitmap..."
-msgstr "undelfs: leyendo mapa de bloques..."
+msgstr "undelfs: Leyendo mapa de bloques..."
 
 #, c-format
 msgid ""
Binary files mc-4.8.23/po/et.gmo and mc-4.8.24/po/et.gmo differ
diff -urpN mc-4.8.23/po/et.po mc-4.8.24/po/et.po
--- mc-4.8.23/po/et.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/et.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,9 +8,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-05 18:33+0000\n"
-"Last-Translator: Kristjan Rts <kristjanrats@gmail.com>\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
+"Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Estonian (http://www.transifex.com/mc/mc/language/et/)\n"
 "Language: et\n"
 "MIME-Version: 1.0\n"
@@ -484,6 +484,18 @@ msgstr "Klahv Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "Keskkonnamuutujat TERM on mramata!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1368,6 +1380,9 @@ msgstr "&Uus"
 msgid "&Close"
 msgstr "&Sulge"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "Salvesta &kui..."
 
@@ -1803,6 +1818,13 @@ msgstr "Kohaliku koopia hankimine %s'st
 msgid "The shell is already running a command"
 msgstr "Kest on hivatud ksu titmisega"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Sa ei kasuta xtermi vi Linuxi konsooli;\n"
+"paneele ei saa kuvada/peita."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Midnight Commanderisse tagasiprdumiseks sisesta 'exit'"
 
@@ -2361,13 +2383,6 @@ msgstr ""
 "Selle ksu kasutamiseks peaksid mlemad\n"
 "paneelid kuvama failide loendit"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Sa ei kasuta xtermi vi Linuxi konsooli;\n"
-"paneele ei saa kuvada/peita."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "\"%s\" ei ole nimeviit"
@@ -2434,9 +2449,6 @@ msgstr ""
 "Kataloogi \"%s\" sisenemine nurjus\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Kataloogi sisu lugemine nurjus"
-
 msgid "Parameter"
 msgstr "Parameeter"
 
@@ -3390,6 +3402,9 @@ msgstr "Kuva kataloogide &suurused"
 msgid "Command &history"
 msgstr "Kskude a&jalugu"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "Katal&oogide kiirvalik"
 
@@ -3615,6 +3630,9 @@ msgstr "Thista valik"
 msgid "Do you really want to execute?"
 msgstr "Kas sa soovid testi kivitada?"
 
+msgid "Cannot read directory contents"
+msgstr "Kataloogi sisu lugemine nurjus"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Kasutaja antud vormindus tundub vigane; kasutatakse vaikevrtust."
 
Binary files mc-4.8.23/po/eu.gmo and mc-4.8.24/po/eu.gmo differ
diff -urpN mc-4.8.23/po/eu.po mc-4.8.24/po/eu.po
--- mc-4.8.23/po/eu.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/eu.po	2020-01-19 02:04:52.000000000 +0400
@@ -9,9 +9,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-05-01 13:39+0000\n"
-"Last-Translator: Iigo Salvador Azurmendi <xalba@euskalnet.net>\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
+"Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Basque (http://www.transifex.com/mc/mc/language/eu/)\n"
 "Language: eu\n"
 "MIME-Version: 1.0\n"
@@ -484,6 +484,18 @@ msgstr "Maius"
 msgid "The TERM environment variable is unset!\n"
 msgstr "TERM ingurune-aldagaia ezarri gabe dago!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1371,6 +1383,9 @@ msgstr "&Berria"
 msgid "&Close"
 msgstr "It&xi"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "Gorde &honela..."
 
@@ -1807,6 +1822,13 @@ msgstr "Ezin eskuratu ondokoaren bertako
 msgid "The shell is already running a command"
 msgstr "Shell-a dagoeneko komando bat exekutate ari da"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Ez da xterm edo Linux kontsola;\n"
+"panelak ezin dira ezkutatu."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Tekleatu exit Midnight Commanderrera itzultzeko"
 
@@ -2368,13 +2390,6 @@ msgstr ""
 "Panel biak egon beharko lirateke zerrendatzeko\n"
 "moduan komando hau erabiltzeko"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Ez da xterm edo Linux kontsola;\n"
-"panelak ezin dira ezkutatu."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "'%s' ez da esteka sinbolikoa"
@@ -2441,9 +2456,6 @@ msgstr ""
 "Ezin da \"%s\" direktoriora aldatu\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Direktorioaren edukia ezin irakurri"
-
 msgid "Parameter"
 msgstr "Parametroa"
 
@@ -3401,6 +3413,9 @@ msgstr "E&rakutsi direktorioen neurriak"
 msgid "Command &history"
 msgstr "Ko&mandoen historia"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "&Gogoko direktorioak"
 
@@ -3626,6 +3641,9 @@ msgstr "Hautua kendu"
 msgid "Do you really want to execute?"
 msgstr "Beneta exekutatu nahi duzu?"
 
+msgid "Cannot read directory contents"
+msgstr "Direktorioaren edukia ezin irakurri"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Erabiltzaileak emandako formatua baliogabea da, lehenetsira itzultzen."
 
Binary files mc-4.8.23/po/fa.gmo and mc-4.8.24/po/fa.gmo differ
diff -urpN mc-4.8.23/po/fa.po mc-4.8.24/po/fa.po
--- mc-4.8.23/po/fa.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/fa.po	2020-01-19 02:04:52.000000000 +0400
@@ -12,8 +12,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Persian (http://www.transifex.com/mc/mc/language/fa/)\n"
 "Language: fa\n"
@@ -463,6 +463,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1286,6 +1298,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1714,6 +1729,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr "      "
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2263,11 +2283,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2330,9 +2345,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3200,6 +3212,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3425,6 +3440,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/fi.gmo and mc-4.8.24/po/fi.gmo differ
diff -urpN mc-4.8.23/po/fi.po mc-4.8.24/po/fi.po
--- mc-4.8.23/po/fi.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/fi.po	2020-01-19 02:04:52.000000000 +0400
@@ -10,8 +10,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Finnish (http://www.transifex.com/mc/mc/language/fi/)\n"
 "Language: fi\n"
@@ -468,6 +468,18 @@ msgstr "Vaihto"
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -477,22 +489,22 @@ msgstr ""
 "Tarkista TERM.\n"
 
 msgid "B"
-msgstr ""
+msgstr "t"
 
 msgid "kB"
-msgstr ""
+msgstr "kt"
 
 msgid "KiB"
 msgstr ""
 
 msgid "MB"
-msgstr ""
+msgstr "Mt"
 
 msgid "MiB"
 msgstr ""
 
 msgid "GB"
-msgstr ""
+msgstr "Gt"
 
 msgid "GiB"
 msgstr ""
@@ -620,7 +632,7 @@ msgstr "Virhe"
 
 #, c-format
 msgid "%s (%d)"
-msgstr ""
+msgstr "%s (%d)"
 
 msgid "&Abort"
 msgstr "&Keskeyt"
@@ -641,7 +653,7 @@ msgid "Print last working directory to s
 msgstr ""
 
 msgid "<file>"
-msgstr ""
+msgstr "<file>"
 
 msgid "Enables subshell support (default)"
 msgstr ""
@@ -656,7 +668,7 @@ msgid "Set debug level"
 msgstr "Aseta debug-taso"
 
 msgid "<integer>"
-msgstr ""
+msgstr "<integer>"
 
 msgid "Launches the file viewer on a file"
 msgstr ""
@@ -665,7 +677,7 @@ msgid "Edit files"
 msgstr "Muokkaa tiedostoja"
 
 msgid "<file> ..."
-msgstr ""
+msgstr "<file> ..."
 
 msgid "Forces xterm features"
 msgstr "Pakottaa xterm-ominaisuudet"
@@ -707,7 +719,7 @@ msgid "Specifies a color configuration"
 msgstr "Mritt vrikonfiguraation"
 
 msgid "<string>"
-msgstr ""
+msgstr "<string>"
 
 msgid "Show mc with specified skin"
 msgstr "Nyt mc mritetyll ulkoasulla"
@@ -1230,7 +1242,7 @@ msgid "To"
 msgstr ""
 
 msgid "Subject"
-msgstr ""
+msgstr "Aihe"
 
 msgid "Copies to"
 msgstr ""
@@ -1242,7 +1254,7 @@ msgid "Insert literal"
 msgstr ""
 
 msgid "Press any key:"
-msgstr ""
+msgstr "Paina mit tahansa nppint:"
 
 msgid ""
 "Current text was modified without a file save.\n"
@@ -1293,6 +1305,9 @@ msgstr "&Uusi"
 msgid "&Close"
 msgstr "&Sulje"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "Tallenna &nimell..."
 
@@ -1333,13 +1348,13 @@ msgid "Unmar&k"
 msgstr ""
 
 msgid "Cop&y"
-msgstr ""
+msgstr "&Kopioi"
 
 msgid "Mo&ve"
 msgstr ""
 
 msgid "&Delete"
-msgstr ""
+msgstr "&Poista"
 
 msgid "Co&py to clipfile"
 msgstr ""
@@ -1721,6 +1736,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2270,11 +2290,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2337,9 +2352,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -2690,7 +2702,7 @@ msgid "%ld B/s"
 msgstr ""
 
 msgid "New     :"
-msgstr ""
+msgstr "Uusi    :"
 
 msgid "Existing:"
 msgstr ""
@@ -2996,7 +3008,7 @@ msgstr ""
 
 #, c-format
 msgid "Device:     %s"
-msgstr ""
+msgstr "Laite:      %s"
 
 #, c-format
 msgid "Filesystem: %s"
@@ -3021,7 +3033,7 @@ msgstr ""
 
 #, c-format
 msgid "Size:       %s"
-msgstr ""
+msgstr "Koko:       %s"
 
 #, c-format
 msgid " (%lu block)"
@@ -3115,7 +3127,7 @@ msgid "S&FTP link..."
 msgstr ""
 
 msgid "SM&B link..."
-msgstr ""
+msgstr "SM&B linkki..."
 
 msgid "Paneli&ze"
 msgstr ""
@@ -3139,7 +3151,7 @@ msgid "C&hmod"
 msgstr ""
 
 msgid "&Link"
-msgstr ""
+msgstr "&Linkki"
 
 msgid "&Symlink"
 msgstr ""
@@ -3207,6 +3219,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3432,11 +3447,14 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
 msgid "&Add new"
-msgstr ""
+msgstr "&Lis uusi"
 
 msgid "External panelize"
 msgstr ""
@@ -3603,7 +3621,7 @@ msgid ""
 msgstr ""
 
 msgid "Choose codepage"
-msgstr ""
+msgstr "Valitse koodisivu"
 
 msgid "-  < No translation >"
 msgstr ""
Binary files mc-4.8.23/po/fr.gmo and mc-4.8.24/po/fr.gmo differ
diff -urpN mc-4.8.23/po/fr.po mc-4.8.24/po/fr.po
--- mc-4.8.23/po/fr.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/fr.po	2020-01-19 02:04:52.000000000 +0400
@@ -17,8 +17,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: French (http://www.transifex.com/mc/mc/language/fr/)\n"
 "Language: fr\n"
@@ -494,6 +494,18 @@ msgstr "Maj"
 msgid "The TERM environment variable is unset!\n"
 msgstr "La variable d'environnement TERM n'est pas dfinie !\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1384,6 +1396,9 @@ msgstr "&Nouveau"
 msgid "&Close"
 msgstr "&Fermer"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "Enregi&strer sous..."
 
@@ -1820,6 +1835,13 @@ msgstr "Impossible de rcuprer une co
 msgid "The shell is already running a command"
 msgstr " Le shell est dj en train d'excuter une commande "
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"N'est pas un xterm ou une console Linux;\n"
+"les panneaux ne peuvent pas tre activ."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Tapez  exit  pour retourner  Midnight Commander"
 
@@ -2379,13 +2401,6 @@ msgstr ""
 "Les deux panneaux doivent tre en mode liste\n"
 "pour utiliser cette commande"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"N'est pas un xterm ou une console Linux;\n"
-"les panneaux ne peuvent pas tre activ."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr " %s  n'est pas un lien symbolique"
@@ -2452,9 +2467,6 @@ msgstr ""
 "Ne peut aller dans le rpertoire  %s \n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr " Ne peut lire le contenu du rpertoire"
-
 msgid "Parameter"
 msgstr "Paramtre"
 
@@ -3405,6 +3417,9 @@ msgstr "Aff&icher la taille des rp."
 msgid "Command &history"
 msgstr "&Historique des commandes"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "Liste des rpe&rtoires favoris"
 
@@ -3630,6 +3645,9 @@ msgstr "Dslectionner"
 msgid "Do you really want to execute?"
 msgstr "Voulez-vous vraiment l'excuter ?"
 
+msgid "Cannot read directory contents"
+msgstr " Ne peut lire le contenu du rpertoire"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "Le format fourni par l'utilisateur semble invalide, revient aux valeurs par "
Binary files mc-4.8.23/po/fr_CA.gmo and mc-4.8.24/po/fr_CA.gmo differ
diff -urpN mc-4.8.23/po/fr_CA.po mc-4.8.24/po/fr_CA.po
--- mc-4.8.23/po/fr_CA.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/fr_CA.po	2020-01-19 02:04:52.000000000 +0400
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
 "PO-Revision-Date: 2015-02-26 09:48+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: French (Canada) (http://www.transifex.com/projects/p/mc/"
@@ -459,6 +459,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1282,6 +1294,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1710,6 +1725,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2259,11 +2279,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2326,9 +2341,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3196,6 +3208,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3421,6 +3436,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/gl.gmo and mc-4.8.24/po/gl.gmo differ
diff -urpN mc-4.8.23/po/gl.po mc-4.8.24/po/gl.po
--- mc-4.8.23/po/gl.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/gl.po	2020-01-19 02:04:52.000000000 +0400
@@ -12,9 +12,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-09 10:24+0000\n"
-"Last-Translator: Miguel Anxo Bouzada <mbouzada@gmail.com>\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
+"Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Galician (http://www.transifex.com/mc/mc/language/gl/)\n"
 "Language: gl\n"
 "MIME-Version: 1.0\n"
@@ -491,6 +491,18 @@ msgstr "Mais"
 msgid "The TERM environment variable is unset!\n"
 msgstr "A varibel de contorno TERM est sen definir!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1378,6 +1390,9 @@ msgstr "&Novo"
 msgid "&Close"
 msgstr "&Pechar"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "Gardar &Como..."
 
@@ -1814,6 +1829,13 @@ msgstr "Non  posbel obter unha copia
 msgid "The shell is already running a command"
 msgstr "O terminal xa esta executando unha orde"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Non se est usando nin xterm nin a consola Linux;\n"
+"os paneis non se poden agochar."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Escriba exit para volver ao Midnight Commander"
 
@@ -2374,13 +2396,6 @@ msgstr ""
 "Ambos os dous paneis deben estar en modo lista\n"
 "para usar esta orde"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Non se est usando nin xterm nin a consola Linux;\n"
-"os paneis non se poden agochar."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "%s non  unha ligazn simblica"
@@ -2447,9 +2462,6 @@ msgstr ""
 "Non  posbel cambiar ao directorio %s\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Non  posbel ler o contido do directorio"
-
 msgid "Parameter"
 msgstr "Parmetro"
 
@@ -3405,6 +3417,9 @@ msgstr "Mostrar &Tamao dos directorios
 msgid "Command &history"
 msgstr "&Historial de ordes"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "di&Rectorio de favoritos"
 
@@ -3630,6 +3645,9 @@ msgstr "Desmarcar"
 msgid "Do you really want to execute?"
 msgstr "Confirma que quere executalo?"
 
+msgid "Cannot read directory contents"
+msgstr "Non  posbel ler o contido do directorio"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "O formato semella non ser correcto. Recuperando o predeterminado."
 
Binary files mc-4.8.23/po/hr.gmo and mc-4.8.24/po/hr.gmo differ
diff -urpN mc-4.8.23/po/hr.po mc-4.8.24/po/hr.po
--- mc-4.8.23/po/hr.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/hr.po	2020-01-19 02:04:52.000000000 +0400
@@ -7,8 +7,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Croatian (http://www.transifex.com/mc/mc/language/hr/)\n"
 "Language: hr\n"
@@ -459,6 +459,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1282,6 +1294,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1710,6 +1725,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2259,11 +2279,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2326,9 +2341,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3198,6 +3210,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3425,6 +3440,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/hu.gmo and mc-4.8.24/po/hu.gmo differ
diff -urpN mc-4.8.23/po/hu.po mc-4.8.24/po/hu.po
--- mc-4.8.23/po/hu.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/hu.po	2020-01-19 02:04:52.000000000 +0400
@@ -4,15 +4,15 @@
 #
 # Translators:
 # Mtys Demeter <mathias.demeter@gmail.com>, 2014
-# Rezs Pder <rezso@rezso.net>, 2012-2017
+# Rezs Pder <rezso@rezso.net>, 2012-2017,2019
 # Slava Zanko <slavazanko@gmail.com>, 2011
 # Szabo Attila, 2013
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Hungarian (http://www.transifex.com/mc/mc/language/hu/)\n"
 "Language: hu\n"
@@ -478,6 +478,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "Nincs belltva a TERM krnyezeti vltoz.\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1359,6 +1371,9 @@ msgstr "&j"
 msgid "&Close"
 msgstr "&Bezrs"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "Ments m&sknt"
 
@@ -1795,6 +1810,13 @@ msgstr "Nem sikerlt behozni \"%s\" hel
 msgid "The shell is already running a command"
 msgstr "A parancsrtelmez mr futtat egy parancsot."
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Nem Xterm vagy Linux-konzol;\n"
+"a paneleket nem lehet kikapcsolni."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "rjon \"exit\"-et a Midnight Commanderbe val visszatrshez."
 
@@ -2353,13 +2375,6 @@ msgstr ""
 "Mindkt panelnak fjllista-mdban kell lennie\n"
 "ehhez a mvelethez"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Nem Xterm vagy Linux-konzol;\n"
-"a paneleket nem lehet kikapcsolni."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "\"%s\" nem szimbolikus link"
@@ -2426,9 +2441,6 @@ msgstr ""
 "Nem sikerlt belpni a(z) \"%s\" knyvtrba.\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Knyvtr tartalma nem olvashat"
-
 msgid "Parameter"
 msgstr "Paramter"
 
@@ -2857,13 +2869,13 @@ msgid "%ld B/s"
 msgstr "%ld B/s"
 
 msgid "New     :"
-msgstr ""
+msgstr "j      :"
 
 msgid "Existing:"
-msgstr ""
+msgstr "Meglv:"
 
 msgid "Overwrite this file?"
-msgstr ""
+msgstr "Fjl fellrsa?"
 
 msgid "A&ppend"
 msgstr "&Hozzrs"
@@ -2872,19 +2884,19 @@ msgid "&Reget"
 msgstr "&Kiegszts"
 
 msgid "Overwrite all files?"
-msgstr ""
+msgstr "sszes fjl fellrsa?"
 
 msgid "Don't overwrite with &zero length file"
-msgstr ""
+msgstr "Ne rja fell &nulla hosszsg fjllal"
 
 msgid "&Older"
-msgstr ""
+msgstr "&Rgebbi"
 
 msgid "S&maller"
-msgstr ""
+msgstr "Ki&sebb"
 
 msgid "&Size differs"
-msgstr ""
+msgstr "&Ms a mrete"
 
 msgid "File exists"
 msgstr "A fjl mr ltezik"
@@ -3026,16 +3038,16 @@ msgstr "Ksz"
 #, c-format
 msgid "Finished (ignored %zu directory)"
 msgid_plural "Finished (ignored %zu directories)"
-msgstr[0] ""
-msgstr[1] ""
+msgstr[0] "Befejezve (%zu knyvtr kihagyva)"
+msgstr[1] "Befejezve (%zu knyvtr kihagyva)"
 
 #, c-format
 msgid "Find File: \"%s\". Content: \"%s\""
-msgstr ""
+msgstr "Fjl keresse: \"%s\". Tartalom: \"%s\""
 
 #, c-format
 msgid "Find File: \"%s\""
-msgstr ""
+msgstr "Fjl keresse: \"%s\""
 
 msgid "Searching"
 msgstr "Keress"
@@ -3378,6 +3390,9 @@ msgstr "Knyvtr&mret"
 msgid "Command &history"
 msgstr "Ko&rbbi parancsok"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "Knyvtr-gyorslista"
 
@@ -3603,6 +3618,9 @@ msgstr "Kijellsek megszntetse"
 msgid "Do you really want to execute?"
 msgstr "Biztosan futtatni kvnja a programot?"
 
+msgid "Cannot read directory contents"
+msgstr "Knyvtr tartalma nem olvashat"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "A belltott formtum hibs; az alaprtelmezs lp letbe."
 
@@ -3894,10 +3912,10 @@ msgid "Data types:"
 msgstr "Adattpusok:"
 
 msgid "Home directory:"
-msgstr ""
+msgstr "Sajt knyvtr:"
 
 msgid "Profile root directory:"
-msgstr ""
+msgstr "Profil gykrknyvtr:"
 
 msgid "System data"
 msgstr "Rendszer adatok"
@@ -4256,7 +4274,7 @@ msgstr "sftp: Nincs jelenleg elrhet
 
 #, c-format
 msgid "sftp: socket error: %s"
-msgstr ""
+msgstr "sftp: socket hiba: %s"
 
 #, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
Binary files mc-4.8.23/po/ia.gmo and mc-4.8.24/po/ia.gmo differ
diff -urpN mc-4.8.23/po/ia.po mc-4.8.24/po/ia.po
--- mc-4.8.23/po/ia.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/ia.po	2020-01-19 02:04:52.000000000 +0400
@@ -10,8 +10,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Interlingua (http://www.transifex.com/mc/mc/language/ia/)\n"
 "Language: ia\n"
@@ -468,6 +468,18 @@ msgstr "Clave \"Shift\""
 msgid "The TERM environment variable is unset!\n"
 msgstr "Le variabile de ambiente TERM non es definite!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1302,6 +1314,9 @@ msgstr "&Nove"
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "S&alveguardar como..."
 
@@ -1730,6 +1745,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2279,11 +2299,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2346,9 +2361,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3216,6 +3228,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3441,6 +3456,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/id.gmo and mc-4.8.24/po/id.gmo differ
diff -urpN mc-4.8.23/po/id.po mc-4.8.24/po/id.po
--- mc-4.8.23/po/id.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/id.po	2020-01-19 02:04:52.000000000 +0400
@@ -10,8 +10,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Indonesian (http://www.transifex.com/mc/mc/language/id/)\n"
 "Language: id\n"
@@ -477,6 +477,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "Environment variable TERM belum diset\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1325,6 +1337,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1753,6 +1768,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2302,11 +2322,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2369,9 +2384,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3237,6 +3249,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3460,6 +3475,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/it.gmo and mc-4.8.24/po/it.gmo differ
diff -urpN mc-4.8.23/po/it.po mc-4.8.24/po/it.po
--- mc-4.8.23/po/it.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/it.po	2020-01-19 02:04:52.000000000 +0400
@@ -3,7 +3,7 @@
 # This file is distributed under the same license as the Midnight Commander package.
 #
 # Translators:
-# Marco Ciampa <ciampix@libero.it>, 1999-2019
+# Marco Ciampa <ciampix@libero.it>, 1999-2020
 # Andreas Troschka <signupbox001@om.it.eu.org>, 2012.
 # Giuliano Natali <diaolin@diaolin.com>, 1998.
 # Slava Zanko <slavazanko@gmail.com>, 2011.
@@ -11,8 +11,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-05-14 08:45+0200\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2020-01-06 12:54+0100\n"
 "Last-Translator: Marco Ciampa <ciampix@libero.it>\n"
 "Language-Team: Italian (http://www.transifex.com/projects/p/mc/language/"
 "it/)\n"
@@ -485,6 +485,18 @@ msgstr "Maiusc"
 msgid "The TERM environment variable is unset!\n"
 msgstr "La variabile TERM non  definita!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr "Impossibile controllare la pipe SIGWINCH"
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "Impossibile creare la pipe SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "Impossibile configurare la fine scrittura della pipe SIGWINCH"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "Impossibile configurare la fine lettura della pipe SIGWINCH"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1370,6 +1382,9 @@ msgstr "&Nuovo"
 msgid "&Close"
 msgstr "&Chiudi"
 
+msgid "&History..."
+msgstr "&Cronologia..."
+
 msgid "Save &as..."
 msgstr "Sal&va come..."
 
@@ -1806,6 +1821,13 @@ msgstr "Impossibile ricevere una copia l
 msgid "The shell is already running a command"
 msgstr "La shell sta gi eseguendo un comando"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Non  n un xterm n una console; \n"
+"i pannelli non possono essere nascosti."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Battere 'exit' per tornare al Midnight Commander"
 
@@ -2366,13 +2388,6 @@ msgstr ""
 "Entrambi i pannelli devono essere in\n"
 "modalit lista per usare questo comando"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Non  n un xterm n una console; \n"
-"i pannelli non possono essere nascosti."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "\"%s\" non  un coll. simbolico"
@@ -2439,9 +2454,6 @@ msgstr ""
 "Non posso entrare in \"%s\"\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Impossibile leggere il contenuto della directory"
-
 msgid "Parameter"
 msgstr "Parametro"
 
@@ -3396,6 +3408,9 @@ msgstr "Mostra dimensione d&irectory"
 msgid "Command &history"
 msgstr "Cro&nologia comandi"
 
+msgid "Viewed/edited files hi&story"
+msgstr "Cronologia file vi&sualizzati/modificati "
+
 msgid "Di&rectory hotlist"
 msgstr "&Directory di uso frequente"
 
@@ -3621,6 +3636,9 @@ msgstr "Deseleziona"
 msgid "Do you really want to execute?"
 msgstr "Vuoi veramente eseguirlo?"
 
+msgid "Cannot read directory contents"
+msgstr "Impossibile leggere il contenuto della directory"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Il formato utente fornito  errato, uso il default."
 
Binary files mc-4.8.23/po/ja.gmo and mc-4.8.24/po/ja.gmo differ
diff -urpN mc-4.8.23/po/ja.po mc-4.8.24/po/ja.po
--- mc-4.8.23/po/ja.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/ja.po	2020-01-19 02:04:52.000000000 +0400
@@ -11,8 +11,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Japanese (http://www.transifex.com/mc/mc/language/ja/)\n"
 "Language: ja\n"
@@ -469,6 +469,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr " TERM \n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1294,6 +1306,9 @@ msgstr "(&N)"
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "(&A)..."
 
@@ -1724,6 +1739,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2275,11 +2295,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2344,9 +2359,6 @@ msgstr ""
 "%s\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3212,6 +3224,9 @@ msgstr ""
 msgid "Command &history"
 msgstr "(&H)"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3435,6 +3450,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr "?"
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ". "
 
Binary files mc-4.8.23/po/ka.gmo and mc-4.8.24/po/ka.gmo differ
diff -urpN mc-4.8.23/po/ka.po mc-4.8.24/po/ka.po
--- mc-4.8.23/po/ka.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/ka.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Georgian (http://www.transifex.com/mc/mc/language/ka/)\n"
 "Language: ka\n"
@@ -459,6 +459,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1284,6 +1296,9 @@ msgstr "&"
 msgid "&Close"
 msgstr "&"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1712,6 +1727,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2262,11 +2282,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2329,9 +2344,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3199,6 +3211,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3424,6 +3439,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/kk.gmo and mc-4.8.24/po/kk.gmo differ
diff -urpN mc-4.8.23/po/kk.po mc-4.8.24/po/kk.po
--- mc-4.8.23/po/kk.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/kk.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Kazakh (http://www.transifex.com/mc/mc/language/kk/)\n"
 "Language: kk\n"
@@ -459,6 +459,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1282,6 +1294,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1710,6 +1725,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2259,11 +2279,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2326,9 +2341,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3196,6 +3208,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3421,6 +3436,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/ko.gmo and mc-4.8.24/po/ko.gmo differ
diff -urpN mc-4.8.23/po/ko.po mc-4.8.24/po/ko.po
--- mc-4.8.23/po/ko.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/ko.po	2020-01-19 02:04:52.000000000 +0400
@@ -11,9 +11,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-05-22 09:27+0000\n"
-"Last-Translator:  <daemul72@gmail.com>\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
+"Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Korean (http://www.transifex.com/mc/mc/language/ko/)\n"
 "Language: ko\n"
 "MIME-Version: 1.0\n"
@@ -483,6 +483,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr "TERM   !\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "SIGWINCH    "
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "SIGWINCH      "
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "SIGWINCH      "
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -614,7 +626,7 @@ msgstr ""
 
 #. TRANSLATORS: no need to translate 'DialogTitle', it's just a context prefix
 msgid "DialogTitle|History cleanup"
-msgstr " | "
+msgstr "  |  "
 
 msgid "Do you want clean this history?"
 msgstr "  ?"
@@ -956,25 +968,25 @@ msgid "Enter line:"
 msgstr "  :"
 
 msgid "ButtonBar|Help"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Save"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Edit"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Merge"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Search"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Options"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Quit"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "Quit"
 msgstr ""
@@ -1366,6 +1378,9 @@ msgstr "(&N)"
 msgid "&Close"
 msgstr "(&C)"
 
+msgid "&History..."
+msgstr "(&H)..."
+
 msgid "Save &as..."
 msgstr "  (&A)..."
 
@@ -1662,22 +1677,22 @@ msgid "Edit: "
 msgstr ": "
 
 msgid "ButtonBar|Mark"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Replac"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Copy"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Move"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Delete"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|PullDn"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "Breton"
 msgstr ""
@@ -1801,6 +1816,13 @@ msgstr "%s   
 msgid "The shell is already running a command"
 msgstr "    "
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"XTerm  Linux  ;\n"
+"   ."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "   'exit' ."
 
@@ -2064,22 +2086,22 @@ msgstr " "
 
 #. TRANSLATORS: no need to translate 'Confirmation', it's just a context prefix
 msgid "Confirmation|&Delete"
-msgstr "Confirmation|(&D)"
+msgstr "|(&D)"
 
 msgid "Confirmation|O&verwrite"
-msgstr "Confirmation|(&V)"
+msgstr "|(&V)"
 
 msgid "Confirmation|&Execute"
-msgstr "Confirmation|(&E)"
+msgstr "|(&E)"
 
 msgid "Confirmation|E&xit"
-msgstr "Confirmation|(&X)"
+msgstr "|(&X)"
 
 msgid "Confirmation|Di&rectory hotlist delete"
-msgstr "Confirmation|  (&R)"
+msgstr "|  (&R)"
 
 msgid "Confirmation|&History cleanup"
-msgstr "Confirmation| (&H)"
+msgstr " |  (&H)"
 
 msgid "Confirmation"
 msgstr ""
@@ -2360,13 +2382,6 @@ msgstr ""
 "      \n"
 "  ."
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"XTerm  Linux  ;\n"
-"   ."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "'%s'()  "
@@ -2433,9 +2448,6 @@ msgstr ""
 "\"%s\"    \n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "    "
-
 msgid "Parameter"
 msgstr ""
 
@@ -2473,22 +2485,22 @@ msgstr ""
 "      ."
 
 msgid "DialogTitle|Copy"
-msgstr "DialogTitle|"
+msgstr " |"
 
 msgid "DialogTitle|Move"
-msgstr "DialogTitle|"
+msgstr " |"
 
 msgid "DialogTitle|Delete"
-msgstr "DialogTitle|"
+msgstr " |"
 
 msgid "FileOperation|Copy"
-msgstr "FileOperation|"
+msgstr " |"
 
 msgid "FileOperation|Move"
-msgstr "FileOperation|"
+msgstr " |"
 
 msgid "FileOperation|Delete"
-msgstr "FileOperation|"
+msgstr " |"
 
 #, no-c-format
 msgid "%o %f%n\"%s\"%m"
@@ -3388,6 +3400,9 @@ msgstr "  (&I)"
 msgid "Command &history"
 msgstr " (&H)"
 
+msgid "Viewed/edited files hi&story"
+msgstr "/  (&s)"
+
 msgid "Di&rectory hotlist"
 msgstr " (&R)"
 
@@ -3463,16 +3478,16 @@ msgid "&Right"
 msgstr "(&R)"
 
 msgid "ButtonBar|Menu"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|View"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|RenMov"
-msgstr "ButtonBar|/"
+msgstr "|/"
 
 msgid "ButtonBar|Mkdir"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "Memory exhausted!"
 msgstr " !"
@@ -3480,7 +3495,7 @@ msgstr " !"
 #. TRANSLATORS: one single character to represent 'unsorted' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|u"
-msgstr "sort|u"
+msgstr "|u"
 
 msgid "&Unsorted"
 msgstr " (&U)"
@@ -3488,7 +3503,7 @@ msgstr " (&U)"
 #. TRANSLATORS: one single character to represent 'name' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|n"
-msgstr "sort|n"
+msgstr "|n"
 
 msgid "&Name"
 msgstr "(&N)"
@@ -3496,7 +3511,7 @@ msgstr "(&N)"
 #. TRANSLATORS: one single character to represent 'version' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|v"
-msgstr "sort|v"
+msgstr "|v"
 
 msgid "&Version"
 msgstr "(&V)"
@@ -3504,7 +3519,7 @@ msgstr "(&V)"
 #. TRANSLATORS: one single character to represent 'extension' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|e"
-msgstr "sort|e"
+msgstr "|e"
 
 msgid "E&xtension"
 msgstr "(&X)"
@@ -3512,7 +3527,7 @@ msgstr "(&X)"
 #. TRANSLATORS: one single character to represent 'size' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|s"
-msgstr "sort|s"
+msgstr "|s"
 
 msgid "&Size"
 msgstr "(&S)"
@@ -3523,7 +3538,7 @@ msgstr " "
 #. TRANSLATORS: one single character to represent 'Modify time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|m"
-msgstr "sort|m"
+msgstr "|m"
 
 msgid "&Modify time"
 msgstr " (&M)"
@@ -3531,7 +3546,7 @@ msgstr " (&M)"
 #. TRANSLATORS: one single character to represent 'Access time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|a"
-msgstr "sort|a"
+msgstr "|a"
 
 msgid "&Access time"
 msgstr " (&A)"
@@ -3539,7 +3554,7 @@ msgstr " (&A)"
 #. TRANSLATORS: one single character to represent 'Change time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|h"
-msgstr "sort|h"
+msgstr "|h"
 
 msgid "C&hange time"
 msgstr " (&H)"
@@ -3553,7 +3568,7 @@ msgstr "Nl"
 #. TRANSLATORS: one single character to represent 'inode' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|i"
-msgstr "sort|i"
+msgstr "|i"
 
 msgid "&Inode"
 msgstr " (&I)"
@@ -3611,6 +3626,9 @@ msgstr " "
 msgid "Do you really want to execute?"
 msgstr " ?"
 
+msgid "Cannot read directory contents"
+msgstr "    "
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "     ."
 
@@ -3682,19 +3700,19 @@ msgid "Delete %s?"
 msgstr "%s() ?"
 
 msgid "ButtonBar|Static"
-msgstr "ButtonBar|Static"
+msgstr "|"
 
 msgid "ButtonBar|Dynamc"
-msgstr "ButtonBar|Dynamc"
+msgstr "|"
 
 msgid "ButtonBar|Rescan"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Forget"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Rmdir"
-msgstr "ButtonBar| "
+msgstr "| "
 
 #, c-format
 msgid ""
@@ -3718,10 +3736,10 @@ msgid "Help"
 msgstr ""
 
 msgid "ButtonBar|Index"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Prev"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "Learn keys"
 msgstr " "
@@ -4425,34 +4443,34 @@ msgid "Goto"
 msgstr ""
 
 msgid "ButtonBar|Ascii"
-msgstr "ButtonBar|Ascii"
+msgstr "|Ascii"
 
 msgid "ButtonBar|HxSrch"
-msgstr "ButtonBar|16 "
+msgstr "|16 "
 
 msgid "ButtonBar|UnWrap"
-msgstr "ButtonBar| "
+msgstr "| "
 
 msgid "ButtonBar|Wrap"
-msgstr "ButtonBar|"
+msgstr "|"
 
 msgid "ButtonBar|Hex"
-msgstr "ButtonBar|16"
+msgstr "|16"
 
 msgid "ButtonBar|Goto"
-msgstr "ButtonBar|Goto"
+msgstr "|Goto"
 
 msgid "ButtonBar|Raw"
-msgstr "ButtonBar| "
+msgstr "| "
 
 msgid "ButtonBar|Parse"
-msgstr "ButtonBar| "
+msgstr "| "
 
 msgid "ButtonBar|Unform"
-msgstr "ButtonBar| "
+msgstr "| "
 
 msgid "ButtonBar|Format"
-msgstr "ButtonBar|"
+msgstr "|"
 
 #, c-format
 msgid ""
Binary files mc-4.8.23/po/lt.gmo and mc-4.8.24/po/lt.gmo differ
diff -urpN mc-4.8.23/po/lt.po mc-4.8.24/po/lt.po
--- mc-4.8.23/po/lt.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/lt.po	2020-01-19 02:04:52.000000000 +0400
@@ -4,6 +4,7 @@
 #
 # Translators:
 # Andrius Burokas, 2017-2018
+# Mindaugas <opensuse.lietuviu.kalba@gmail.com>, 2019
 # Nerijus Balinas <nerijus@users.sourceforge.net>, 2011
 # Slava Zanko <slavazanko@gmail.com>, 2011
 # Zygimantus <zygimantus@gmail.com>, 2016
@@ -12,9 +13,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
-"Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-23 11:49+0000\n"
+"Last-Translator: Mindaugas <opensuse.lietuviu.kalba@gmail.com>\n"
 "Language-Team: Lithuanian (http://www.transifex.com/mc/mc/language/lt/)\n"
 "Language: lt\n"
 "MIME-Version: 1.0\n"
@@ -490,6 +491,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr "Aplinkos kintamasis TERM nenustatytas!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -499,25 +512,25 @@ msgstr ""
 "Patikrinkite TERM aplinkos kintamj.\n"
 
 msgid "B"
-msgstr ""
+msgstr "B"
 
 msgid "kB"
-msgstr ""
+msgstr "kB"
 
 msgid "KiB"
-msgstr ""
+msgstr "KiB"
 
 msgid "MB"
-msgstr ""
+msgstr "MB"
 
 msgid "MiB"
-msgstr ""
+msgstr "MiB"
 
 msgid "GB"
-msgstr ""
+msgstr "GB"
 
 msgid "GiB"
-msgstr ""
+msgstr "GiB"
 
 msgid "Cannot create pipe descriptor"
 msgstr ""
@@ -1335,6 +1348,9 @@ msgstr "&Naujas"
 msgid "&Close"
 msgstr "&Udaryti"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "rayti kaip..."
 
@@ -1767,6 +1783,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2320,11 +2341,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2387,9 +2403,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr "Nepavyko perskaityti aplanko turinio"
-
 msgid "Parameter"
 msgstr "Parametras"
 
@@ -2770,10 +2783,10 @@ msgid "%ld B/s"
 msgstr "%ld B/s"
 
 msgid "New     :"
-msgstr ""
+msgstr "Naujas  :"
 
 msgid "Existing:"
-msgstr ""
+msgstr "Esamas :"
 
 msgid "Overwrite this file?"
 msgstr ""
@@ -3293,6 +3306,9 @@ msgstr "Rodyti aplank dydius"
 msgid "Command &history"
 msgstr "Komand istorija"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "Aplank s&raas"
 
@@ -3522,6 +3538,9 @@ msgstr "Nebesirinkti"
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr "Nepavyko perskaityti aplanko turinio"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Vartotojo formatas atrodo netaisyklingai, grtu prie numatytojo."
 
Binary files mc-4.8.23/po/lv.gmo and mc-4.8.24/po/lv.gmo differ
diff -urpN mc-4.8.23/po/lv.po mc-4.8.24/po/lv.po
--- mc-4.8.23/po/lv.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/lv.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Latvian (http://www.transifex.com/mc/mc/language/lv/)\n"
 "Language: lv\n"
@@ -460,6 +460,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr "TERM maingais nav ieslgts!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1285,6 +1297,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1713,6 +1728,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2263,11 +2283,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2330,9 +2345,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3202,6 +3214,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3429,6 +3444,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "Lietotja piedvtais formts izskats nepareizs, atgrieamies pie noklust."
diff -urpN mc-4.8.23/po/mc.pot mc-4.8.24/po/mc.pot
--- mc-4.8.23/po/mc.pot	2019-06-22 15:45:03.000000000 +0400
+++ mc-4.8.24/po/mc.pot	2020-01-19 02:04:46.000000000 +0400
@@ -5,9 +5,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: mc 4.8.23\n"
+"Project-Id-Version: mc 4.8.24\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
 "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
 "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
 "Language-Team: LANGUAGE <LL@li.org>\n"
@@ -76,7 +76,7 @@ msgstr ""
 msgid "&Ignore lock"
 msgstr ""
 
-#: lib/mcconfig/paths.c:140
+#: lib/mcconfig/paths.c:141
 #, c-format
 msgid "Cannot create %s directory"
 msgstr ""
@@ -85,12 +85,12 @@ msgstr ""
 msgid "FATAL: not a directory:"
 msgstr ""
 
-#: lib/mcconfig/paths.c:214
+#: lib/mcconfig/paths.c:213
 #, c-format
 msgid "An error occurred while migrating user settings: %s"
 msgstr ""
 
-#: lib/mcconfig/paths.c:469
+#: lib/mcconfig/paths.c:472
 #, c-format
 msgid ""
 "Your old settings were migrated from %s\n"
@@ -99,7 +99,7 @@ msgid ""
 "http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html"
 msgstr ""
 
-#: lib/mcconfig/paths.c:475
+#: lib/mcconfig/paths.c:478
 #, c-format
 msgid ""
 "Your old settings were migrated from %s\n"
@@ -144,11 +144,11 @@ msgstr ""
 msgid "Invalid token number %d"
 msgstr ""
 
-#: lib/search/regex.c:339 lib/search/regex.c:834 src/filemanager/ext.c:741
+#: lib/search/regex.c:339 lib/search/regex.c:834 src/filemanager/ext.c:744
 msgid "Regular expression error"
 msgstr ""
 
-#: lib/search/search.c:53 src/diffviewer/ydiff.c:2354
+#: lib/search/search.c:53 src/diffviewer/ydiff.c:2357
 msgid "No&rmal"
 msgstr ""
 
@@ -210,388 +210,404 @@ msgstr ""
 msgid "Set COLORTERM=truecolor if your terminal really supports true colors."
 msgstr ""
 
-#: lib/tty/key.c:102 lib/tty/key.c:163
+#: lib/tty/key.c:106 lib/tty/key.c:167
 msgid "Escape"
 msgstr ""
 
-#: lib/tty/key.c:105
+#: lib/tty/key.c:109
 msgid "Function key 1"
 msgstr ""
 
-#: lib/tty/key.c:106
+#: lib/tty/key.c:110
 msgid "Function key 2"
 msgstr ""
 
-#: lib/tty/key.c:107
+#: lib/tty/key.c:111
 msgid "Function key 3"
 msgstr ""
 
-#: lib/tty/key.c:108
+#: lib/tty/key.c:112
 msgid "Function key 4"
 msgstr ""
 
-#: lib/tty/key.c:109
+#: lib/tty/key.c:113
 msgid "Function key 5"
 msgstr ""
 
-#: lib/tty/key.c:110
+#: lib/tty/key.c:114
 msgid "Function key 6"
 msgstr ""
 
-#: lib/tty/key.c:111
+#: lib/tty/key.c:115
 msgid "Function key 7"
 msgstr ""
 
-#: lib/tty/key.c:112
+#: lib/tty/key.c:116
 msgid "Function key 8"
 msgstr ""
 
-#: lib/tty/key.c:113
+#: lib/tty/key.c:117
 msgid "Function key 9"
 msgstr ""
 
-#: lib/tty/key.c:114
+#: lib/tty/key.c:118
 msgid "Function key 10"
 msgstr ""
 
-#: lib/tty/key.c:115
+#: lib/tty/key.c:119
 msgid "Function key 11"
 msgstr ""
 
-#: lib/tty/key.c:116
+#: lib/tty/key.c:120
 msgid "Function key 12"
 msgstr ""
 
-#: lib/tty/key.c:117
+#: lib/tty/key.c:121
 msgid "Function key 13"
 msgstr ""
 
-#: lib/tty/key.c:118
+#: lib/tty/key.c:122
 msgid "Function key 14"
 msgstr ""
 
-#: lib/tty/key.c:119
+#: lib/tty/key.c:123
 msgid "Function key 15"
 msgstr ""
 
-#: lib/tty/key.c:120
+#: lib/tty/key.c:124
 msgid "Function key 16"
 msgstr ""
 
-#: lib/tty/key.c:121
+#: lib/tty/key.c:125
 msgid "Function key 17"
 msgstr ""
 
-#: lib/tty/key.c:122
+#: lib/tty/key.c:126
 msgid "Function key 18"
 msgstr ""
 
-#: lib/tty/key.c:123
+#: lib/tty/key.c:127
 msgid "Function key 19"
 msgstr ""
 
-#: lib/tty/key.c:124
+#: lib/tty/key.c:128
 msgid "Function key 20"
 msgstr ""
 
-#: lib/tty/key.c:125
+#: lib/tty/key.c:129
 msgid "Completion/M-tab"
 msgstr ""
 
-#: lib/tty/key.c:126
+#: lib/tty/key.c:130
 msgid "BackTab/S-tab"
 msgstr ""
 
-#: lib/tty/key.c:127 lib/tty/key.c:164
+#: lib/tty/key.c:131 lib/tty/key.c:168
 msgid "Backspace"
 msgstr ""
 
-#: lib/tty/key.c:128
+#: lib/tty/key.c:132
 msgid "Up arrow"
 msgstr ""
 
-#: lib/tty/key.c:129
+#: lib/tty/key.c:133
 msgid "Down arrow"
 msgstr ""
 
-#: lib/tty/key.c:130
+#: lib/tty/key.c:134
 msgid "Left arrow"
 msgstr ""
 
-#: lib/tty/key.c:131
+#: lib/tty/key.c:135
 msgid "Right arrow"
 msgstr ""
 
-#: lib/tty/key.c:132 lib/tty/key.c:165
+#: lib/tty/key.c:136 lib/tty/key.c:169
 msgid "Insert"
 msgstr ""
 
-#: lib/tty/key.c:133 lib/tty/key.c:166
+#: lib/tty/key.c:137 lib/tty/key.c:170
 msgid "Delete"
 msgstr ""
 
-#: lib/tty/key.c:134
+#: lib/tty/key.c:138
 msgid "Home"
 msgstr ""
 
-#: lib/tty/key.c:135
+#: lib/tty/key.c:139
 msgid "End key"
 msgstr ""
 
-#: lib/tty/key.c:136
+#: lib/tty/key.c:140
 msgid "Page Up"
 msgstr ""
 
-#: lib/tty/key.c:137
+#: lib/tty/key.c:141
 msgid "Page Down"
 msgstr ""
 
-#: lib/tty/key.c:138
+#: lib/tty/key.c:142
 msgid "/ on keypad"
 msgstr ""
 
-#: lib/tty/key.c:139
+#: lib/tty/key.c:143
 msgid "* on keypad"
 msgstr ""
 
-#: lib/tty/key.c:140
+#: lib/tty/key.c:144
 msgid "- on keypad"
 msgstr ""
 
-#: lib/tty/key.c:141
+#: lib/tty/key.c:145
 msgid "+ on keypad"
 msgstr ""
 
-#: lib/tty/key.c:144
+#: lib/tty/key.c:148
 msgid "Left arrow keypad"
 msgstr ""
 
-#: lib/tty/key.c:145
+#: lib/tty/key.c:149
 msgid "Right arrow keypad"
 msgstr ""
 
-#: lib/tty/key.c:146
+#: lib/tty/key.c:150
 msgid "Up arrow keypad"
 msgstr ""
 
-#: lib/tty/key.c:147
+#: lib/tty/key.c:151
 msgid "Down arrow keypad"
 msgstr ""
 
-#: lib/tty/key.c:148
+#: lib/tty/key.c:152
 msgid "Home on keypad"
 msgstr ""
 
-#: lib/tty/key.c:149
+#: lib/tty/key.c:153
 msgid "End on keypad"
 msgstr ""
 
-#: lib/tty/key.c:150
+#: lib/tty/key.c:154
 msgid "Page Down keypad"
 msgstr ""
 
-#: lib/tty/key.c:151
+#: lib/tty/key.c:155
 msgid "Page Up keypad"
 msgstr ""
 
-#: lib/tty/key.c:152
+#: lib/tty/key.c:156
 msgid "Insert on keypad"
 msgstr ""
 
-#: lib/tty/key.c:153
+#: lib/tty/key.c:157
 msgid "Delete on keypad"
 msgstr ""
 
-#: lib/tty/key.c:154
+#: lib/tty/key.c:158
 msgid "Enter on keypad"
 msgstr ""
 
-#: lib/tty/key.c:155
+#: lib/tty/key.c:159
 msgid "Function key 21"
 msgstr ""
 
-#: lib/tty/key.c:156
+#: lib/tty/key.c:160
 msgid "Function key 22"
 msgstr ""
 
-#: lib/tty/key.c:157
+#: lib/tty/key.c:161
 msgid "Function key 23"
 msgstr ""
 
-#: lib/tty/key.c:158
+#: lib/tty/key.c:162
 msgid "Function key 24"
 msgstr ""
 
-#: lib/tty/key.c:159
+#: lib/tty/key.c:163
 msgid "A1 key"
 msgstr ""
 
-#: lib/tty/key.c:160
+#: lib/tty/key.c:164
 msgid "C1 key"
 msgstr ""
 
-#: lib/tty/key.c:167
+#: lib/tty/key.c:171
 msgid "Asterisk"
 msgstr ""
 
-#: lib/tty/key.c:168
+#: lib/tty/key.c:172
 msgid "Minus"
 msgstr ""
 
-#: lib/tty/key.c:169
+#: lib/tty/key.c:173
 msgid "Plus"
 msgstr ""
 
-#: lib/tty/key.c:170
+#: lib/tty/key.c:174
 msgid "Dot"
 msgstr ""
 
-#: lib/tty/key.c:171
+#: lib/tty/key.c:175
 msgid "Less than"
 msgstr ""
 
-#: lib/tty/key.c:172
+#: lib/tty/key.c:176
 msgid "Great than"
 msgstr ""
 
-#: lib/tty/key.c:173
+#: lib/tty/key.c:177
 msgid "Equal"
 msgstr ""
 
-#: lib/tty/key.c:174
+#: lib/tty/key.c:178
 msgid "Comma"
 msgstr ""
 
-#: lib/tty/key.c:175
+#: lib/tty/key.c:179
 msgid "Apostrophe"
 msgstr ""
 
-#: lib/tty/key.c:176
+#: lib/tty/key.c:180
 msgid "Colon"
 msgstr ""
 
-#: lib/tty/key.c:177
+#: lib/tty/key.c:181
 msgid "Semicolon"
 msgstr ""
 
-#: lib/tty/key.c:178
+#: lib/tty/key.c:182
 msgid "Exclamation mark"
 msgstr ""
 
-#: lib/tty/key.c:179
+#: lib/tty/key.c:183
 msgid "Question mark"
 msgstr ""
 
-#: lib/tty/key.c:180
+#: lib/tty/key.c:184
 msgid "Ampersand"
 msgstr ""
 
-#: lib/tty/key.c:181
+#: lib/tty/key.c:185
 msgid "Dollar sign"
 msgstr ""
 
-#: lib/tty/key.c:182
+#: lib/tty/key.c:186
 msgid "Quotation mark"
 msgstr ""
 
-#: lib/tty/key.c:183
+#: lib/tty/key.c:187
 msgid "Percent sign"
 msgstr ""
 
-#: lib/tty/key.c:184
+#: lib/tty/key.c:188
 msgid "Caret"
 msgstr ""
 
-#: lib/tty/key.c:185
+#: lib/tty/key.c:189
 msgid "Tilda"
 msgstr ""
 
-#: lib/tty/key.c:186
+#: lib/tty/key.c:190
 msgid "Prime"
 msgstr ""
 
-#: lib/tty/key.c:187
+#: lib/tty/key.c:191
 msgid "Underline"
 msgstr ""
 
-#: lib/tty/key.c:188
+#: lib/tty/key.c:192
 msgid "Understrike"
 msgstr ""
 
-#: lib/tty/key.c:189
+#: lib/tty/key.c:193
 msgid "Pipe"
 msgstr ""
 
-#: lib/tty/key.c:190
+#: lib/tty/key.c:194
 msgid "Left parenthesis"
 msgstr ""
 
-#: lib/tty/key.c:191
+#: lib/tty/key.c:195
 msgid "Right parenthesis"
 msgstr ""
 
-#: lib/tty/key.c:192
+#: lib/tty/key.c:196
 msgid "Left bracket"
 msgstr ""
 
-#: lib/tty/key.c:193
+#: lib/tty/key.c:197
 msgid "Right bracket"
 msgstr ""
 
-#: lib/tty/key.c:194
+#: lib/tty/key.c:198
 msgid "Left brace"
 msgstr ""
 
-#: lib/tty/key.c:195
+#: lib/tty/key.c:199
 msgid "Right brace"
 msgstr ""
 
-#: lib/tty/key.c:196
+#: lib/tty/key.c:200
 msgid "Enter"
 msgstr ""
 
-#: lib/tty/key.c:197
+#: lib/tty/key.c:201
 msgid "Tab key"
 msgstr ""
 
-#: lib/tty/key.c:198
+#: lib/tty/key.c:202
 msgid "Space key"
 msgstr ""
 
-#: lib/tty/key.c:199
+#: lib/tty/key.c:203
 msgid "Slash key"
 msgstr ""
 
-#: lib/tty/key.c:200
+#: lib/tty/key.c:204
 msgid "Backslash key"
 msgstr ""
 
-#: lib/tty/key.c:201 lib/tty/key.c:202
+#: lib/tty/key.c:205 lib/tty/key.c:206
 msgid "Number sign #"
 msgstr ""
 
 #. TRANSLATORS: Please translate as in "at sign" (@).
-#: lib/tty/key.c:204
+#: lib/tty/key.c:208
 msgid "At sign"
 msgstr ""
 
-#: lib/tty/key.c:207 lib/tty/key.c:208
+#: lib/tty/key.c:211 lib/tty/key.c:212
 msgid "Ctrl"
 msgstr ""
 
-#: lib/tty/key.c:209 lib/tty/key.c:210 lib/tty/key.c:211
+#: lib/tty/key.c:213 lib/tty/key.c:214 lib/tty/key.c:215
 msgid "Alt"
 msgstr ""
 
-#: lib/tty/key.c:212
+#: lib/tty/key.c:216
 msgid "Shift"
 msgstr ""
 
-#: lib/tty/tty.c:94
+#: lib/tty/tty.c:102
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
-#: lib/tty/tty-slang.c:286
+#: lib/tty/tty.c:191
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+#: lib/tty/tty-internal.c:69
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+#: lib/tty/tty-internal.c:87
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+#: lib/tty/tty-internal.c:99
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
+#: lib/tty/tty-slang.c:296
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -649,17 +665,17 @@ msgid ""
 msgstr ""
 
 #: lib/utilunix.c:719 lib/utilunix.c:724 lib/utilunix.c:781
-#: src/editor/edit.c:358 src/editor/editcmd.c:229 src/editor/editcmd.c:252
-#: src/editor/editcmd.c:422 src/editor/editcmd.c:584 src/editor/editcmd.c:1720
-#: src/editor/editcmd.c:3436 src/editor/editcmd.c:3465
+#: src/editor/edit.c:358 src/editor/editcmd.c:230 src/editor/editcmd.c:253
+#: src/editor/editcmd.c:423 src/editor/editcmd.c:585 src/editor/editcmd.c:1721
+#: src/editor/editcmd.c:3467 src/editor/editcmd.c:3496
 #: src/editor/editcmd_dialogs.c:471 src/execute.c:135
-#: src/filemanager/file.c:2387 src/filemanager/panel.c:4464 src/help.c:362
-#: src/main.c:401 src/subshell/common.c:432 src/subshell/common.c:1267
-#: src/viewer/actions_cmd.c:427
+#: src/filemanager/file.c:2401 src/filemanager/panel.c:4503 src/help.c:362
+#: src/main.c:397 src/subshell/common.c:438 src/subshell/common.c:1273
+#: src/viewer/actions_cmd.c:461
 msgid "Warning"
 msgstr ""
 
-#: lib/utilunix.c:719 src/filemanager/ext.c:723
+#: lib/utilunix.c:719 src/filemanager/ext.c:726
 msgid "Pipe failed"
 msgstr ""
 
@@ -671,26 +687,26 @@ msgstr ""
 msgid "Error dup'ing old error pipe"
 msgstr ""
 
-#: lib/vfs/direntry.c:268
+#: lib/vfs/direntry.c:272
 #, c-format
 msgid "Directory cache expired for %s"
 msgstr ""
 
-#: lib/vfs/direntry.c:706
+#: lib/vfs/direntry.c:710
 #, c-format
 msgid "%s: %s: %s %3d%% (%lld) bytes transferred"
 msgstr ""
 
-#: lib/vfs/direntry.c:709
+#: lib/vfs/direntry.c:713
 #, c-format
 msgid "%s: %s: %s %lld bytes transferred"
 msgstr ""
 
-#: lib/vfs/direntry.c:1363
+#: lib/vfs/direntry.c:1376
 msgid "Starting linear transfer..."
 msgstr ""
 
-#: lib/vfs/direntry.c:1463
+#: lib/vfs/direntry.c:1476
 msgid "Getting file"
 msgstr ""
 
@@ -698,37 +714,37 @@ msgstr ""
 msgid "Changes to file lost"
 msgstr ""
 
-#: lib/vfs/interface.c:867
+#: lib/vfs/interface.c:857
 #, c-format
 msgid "%s is not a directory\n"
 msgstr ""
 
-#: lib/vfs/interface.c:869
+#: lib/vfs/interface.c:859
 #, c-format
 msgid "Directory %s is not owned by you\n"
 msgstr ""
 
-#: lib/vfs/interface.c:871
+#: lib/vfs/interface.c:861
 #, c-format
 msgid "Cannot set correct permissions for directory %s\n"
 msgstr ""
 
-#: lib/vfs/interface.c:876
+#: lib/vfs/interface.c:866
 #, c-format
 msgid "Cannot create temporary directory %s: %s\n"
 msgstr ""
 
-#: lib/vfs/interface.c:910
+#: lib/vfs/interface.c:900
 #, c-format
 msgid "Temporary files will be created in %s\n"
 msgstr ""
 
-#: lib/vfs/interface.c:916
+#: lib/vfs/interface.c:906
 #, c-format
 msgid "Temporary files will not be created\n"
 msgstr ""
 
-#: lib/vfs/interface.c:921 src/execute.c:337
+#: lib/vfs/interface.c:911 src/execute.c:337
 msgid "Press any key to continue..."
 msgstr ""
 
@@ -752,7 +768,7 @@ msgstr ""
 msgid "Screens"
 msgstr ""
 
-#: lib/widget/history.c:300 lib/widget/history.c:323
+#: lib/widget/history.c:213 lib/widget/history.c:228
 msgid "History"
 msgstr ""
 
@@ -765,43 +781,43 @@ msgstr ""
 msgid "Do you want clean this history?"
 msgstr ""
 
-#: lib/widget/listbox.c:325 src/diffviewer/ydiff.c:3089 src/editor/edit.c:358
-#: src/editor/editcmd.c:231 src/editor/editcmd.c:254 src/editor/editcmd.c:2851
-#: src/editor/editcmd.c:2857 src/filemanager/cmd.c:140
-#: src/filemanager/file.c:968 src/filemanager/file.c:1951
-#: src/filemanager/filegui.c:458 src/filemanager/hotlist.c:1158
-#: src/filemanager/hotlist.c:1175 src/filemanager/midnight.c:1018
-#: src/filemanager/midnight.c:1026 src/filemanager/panel.c:2818
-#: src/filemanager/tree.c:826 src/subshell/common.c:1269
-#: src/viewer/actions_cmd.c:629 src/viewer/actions_cmd.c:635
+#: lib/widget/listbox.c:325 src/diffviewer/ydiff.c:3092 src/editor/edit.c:358
+#: src/editor/editcmd.c:232 src/editor/editcmd.c:255 src/editor/editcmd.c:2882
+#: src/editor/editcmd.c:2888 src/filemanager/cmd.c:140
+#: src/filemanager/file.c:968 src/filemanager/file.c:1965
+#: src/filemanager/filegui.c:459 src/filemanager/hotlist.c:1150
+#: src/filemanager/hotlist.c:1167 src/filemanager/midnight.c:1067
+#: src/filemanager/midnight.c:1075 src/filemanager/panel.c:2818
+#: src/filemanager/tree.c:826 src/subshell/common.c:1275
+#: src/viewer/actions_cmd.c:656 src/viewer/actions_cmd.c:662
 #: src/viewer/search.c:398
 msgid "&Yes"
 msgstr ""
 
-#: lib/widget/listbox.c:325 src/diffviewer/ydiff.c:3089 src/editor/edit.c:358
-#: src/editor/editcmd.c:231 src/editor/editcmd.c:2851 src/editor/editcmd.c:2857
+#: lib/widget/listbox.c:325 src/diffviewer/ydiff.c:3092 src/editor/edit.c:358
+#: src/editor/editcmd.c:232 src/editor/editcmd.c:2882 src/editor/editcmd.c:2888
 #: src/filemanager/cmd.c:140 src/filemanager/file.c:968
-#: src/filemanager/file.c:1951 src/filemanager/filegui.c:460
-#: src/filemanager/hotlist.c:1158 src/filemanager/hotlist.c:1175
-#: src/filemanager/midnight.c:1018 src/filemanager/midnight.c:1026
+#: src/filemanager/file.c:1965 src/filemanager/filegui.c:461
+#: src/filemanager/hotlist.c:1150 src/filemanager/hotlist.c:1167
+#: src/filemanager/midnight.c:1067 src/filemanager/midnight.c:1075
 #: src/filemanager/panel.c:2818 src/filemanager/tree.c:826
-#: src/subshell/common.c:1269 src/viewer/actions_cmd.c:629
-#: src/viewer/actions_cmd.c:635 src/viewer/search.c:399
+#: src/subshell/common.c:1275 src/viewer/actions_cmd.c:656
+#: src/viewer/actions_cmd.c:662 src/viewer/search.c:399
 msgid "&No"
 msgstr ""
 
-#: lib/widget/quick.h:215 src/editor/editcmd.c:2717
-#: src/editor/editcmd_dialogs.c:121 src/editor/editwidget.c:150
+#: lib/widget/quick.h:215 src/editor/editcmd.c:2748
+#: src/editor/editcmd_dialogs.c:121 src/editor/editwidget.c:151
 #: src/filemanager/boxes.c:1227 src/filemanager/filegui.c:1362
-#: src/filemanager/find.c:599 src/filemanager/layout.c:458
-#: src/subshell/common.c:435
+#: src/filemanager/find.c:599 src/filemanager/layout.c:462
+#: src/subshell/common.c:441
 msgid "&OK"
 msgstr ""
 
-#: lib/widget/quick.h:216 src/editor/editcmd.c:231 src/editor/editcmd.c:254
-#: src/editor/editcmd.c:424 src/editor/editcmd.c:587 src/editor/editcmd.c:1721
-#: src/editor/editcmd.c:2069 src/editor/editcmd.c:2851
-#: src/editor/editcmd.c:3439 src/editor/editcmd.c:3468
+#: lib/widget/quick.h:216 src/editor/editcmd.c:232 src/editor/editcmd.c:255
+#: src/editor/editcmd.c:425 src/editor/editcmd.c:588 src/editor/editcmd.c:1722
+#: src/editor/editcmd.c:2070 src/editor/editcmd.c:2882
+#: src/editor/editcmd.c:3470 src/editor/editcmd.c:3499
 #: src/editor/editcmd_dialogs.c:123 src/editor/editcmd_dialogs.c:282
 #: src/editor/editcmd_dialogs.c:473 src/editor/spell_dialogs.c:99
 #: src/filemanager/achown.c:89 src/filemanager/achown.c:848
@@ -809,8 +825,8 @@ msgstr ""
 #: src/filemanager/chmod.c:411 src/filemanager/chown.c:88
 #: src/filemanager/chown.c:310 src/filemanager/cmd.c:1156
 #: src/filemanager/filegui.c:1366 src/filemanager/find.c:599
-#: src/filemanager/hotlist.c:187 src/filemanager/hotlist.c:1014
-#: src/filemanager/hotlist.c:1076 src/filemanager/layout.c:459
+#: src/filemanager/hotlist.c:182 src/filemanager/hotlist.c:1006
+#: src/filemanager/hotlist.c:1068 src/filemanager/layout.c:463
 #: src/filemanager/panelize.c:140 src/learn.c:256 src/viewer/hex.c:431
 msgid "&Cancel"
 msgstr ""
@@ -821,8 +837,8 @@ msgstr ""
 
 #: lib/widget/wtools.c:286 lib/widget/wtools.c:413 src/editor/edit.c:193
 #: src/editor/edit.c:214 src/editor/edit.c:370 src/editor/edit.c:1977
-#: src/editor/edit.c:1987 src/editor/editcmd.c:316 src/editor/editcmd.c:326
-#: src/editor/editcmd.c:367 src/editor/editcmd.c:2954 src/editor/spell.c:315
+#: src/editor/edit.c:1987 src/editor/editcmd.c:317 src/editor/editcmd.c:327
+#: src/editor/editcmd.c:368 src/editor/editcmd.c:2985 src/editor/spell.c:315
 #: src/editor/spell.c:551 src/editor/spell.c:559
 #: tests/src/execute__common.c:145
 #: tests/src/execute__execute_with_vfs_arg.c:154
@@ -836,129 +852,129 @@ msgstr ""
 
 #: lib/widget/wtools.c:691 src/filemanager/file.c:847
 #: src/filemanager/file.c:921 src/filemanager/file.c:923
-#: src/filemanager/file.c:969 src/filemanager/file.c:3093
-#: src/filemanager/filegui.c:255 src/filemanager/filegui.c:482
+#: src/filemanager/file.c:969 src/filemanager/file.c:3107
+#: src/filemanager/filegui.c:255 src/filemanager/filegui.c:483
 msgid "&Abort"
 msgstr ""
 
-#: src/args.c:108
+#: src/args.c:110
 msgid "Displays the current version"
 msgstr ""
 
-#: src/args.c:116
+#: src/args.c:118
 msgid "Print data directory"
 msgstr ""
 
-#: src/args.c:124
+#: src/args.c:126
 msgid "Print extended info about used data directories"
 msgstr ""
 
-#: src/args.c:132
+#: src/args.c:135
 msgid "Print configure options"
 msgstr ""
 
-#: src/args.c:139
+#: src/args.c:143
 msgid "Print last working directory to specified file"
 msgstr ""
 
-#: src/args.c:140 src/args.c:165 src/args.c:182 src/args.c:267
+#: src/args.c:144 src/args.c:169 src/args.c:186 src/args.c:271
 msgid "<file>"
 msgstr ""
 
-#: src/args.c:147
+#: src/args.c:151
 msgid "Enables subshell support (default)"
 msgstr ""
 
-#: src/args.c:154
+#: src/args.c:158
 msgid "Disables subshell support"
 msgstr ""
 
-#: src/args.c:164
+#: src/args.c:168
 msgid "Log ftp dialog to specified file"
 msgstr ""
 
-#: src/args.c:172
+#: src/args.c:176
 msgid "Set debug level"
 msgstr ""
 
-#: src/args.c:173
+#: src/args.c:177
 msgid "<integer>"
 msgstr ""
 
-#: src/args.c:181
+#: src/args.c:185
 msgid "Launches the file viewer on a file"
 msgstr ""
 
-#: src/args.c:189
+#: src/args.c:193
 msgid "Edit files"
 msgstr ""
 
-#: src/args.c:190
+#: src/args.c:194
 msgid "<file> ..."
 msgstr ""
 
-#: src/args.c:206
+#: src/args.c:210
 msgid "Forces xterm features"
 msgstr ""
 
-#: src/args.c:213
+#: src/args.c:217
 msgid "Disable X11 support"
 msgstr ""
 
-#: src/args.c:220
+#: src/args.c:224
 msgid "Tries to use an old highlight mouse tracking"
 msgstr ""
 
-#: src/args.c:227
+#: src/args.c:231
 msgid "Disable mouse support in text version"
 msgstr ""
 
-#: src/args.c:235
+#: src/args.c:239
 msgid "Tries to use termcap instead of terminfo"
 msgstr ""
 
-#: src/args.c:243
+#: src/args.c:247
 msgid "To run on slow terminals"
 msgstr ""
 
-#: src/args.c:250
+#: src/args.c:254
 msgid "Use stickchars to draw"
 msgstr ""
 
-#: src/args.c:258
+#: src/args.c:262
 msgid "Resets soft keys on HP terminals"
 msgstr ""
 
-#: src/args.c:266
+#: src/args.c:270
 msgid "Load definitions of key bindings from specified file"
 msgstr ""
 
-#: src/args.c:273
+#: src/args.c:277
 msgid "Don't load definitions of key bindings from file, use defaults"
 msgstr ""
 
-#: src/args.c:294
+#: src/args.c:298
 msgid "Requests to run in black and white"
 msgstr ""
 
-#: src/args.c:301
+#: src/args.c:305
 msgid "Request to run in color mode"
 msgstr ""
 
-#: src/args.c:308
+#: src/args.c:312
 msgid "Specifies a color configuration"
 msgstr ""
 
-#: src/args.c:309 src/args.c:316
+#: src/args.c:313 src/args.c:320
 msgid "<string>"
 msgstr ""
 
-#: src/args.c:315
+#: src/args.c:319
 msgid "Show mc with specified skin"
 msgstr ""
 
 #. TRANSLATORS: don't translate keywords
-#: src/args.c:353
+#: src/args.c:357
 msgid ""
 "--colors KEYWORD={FORE},{BACK},{ATTR}:KEYWORD2=...\n"
 "\n"
@@ -981,7 +997,7 @@ msgid ""
 msgstr ""
 
 #. TRANSLATORS: don't translate color names and attributes
-#: src/args.c:370
+#: src/args.c:374
 msgid ""
 "Standard Colors:\n"
 "   black, gray, red, brightred, green, brightgreen, brown,\n"
@@ -995,55 +1011,55 @@ msgid ""
 "   bold, italic, underline, reverse, blink; append more with '+'\n"
 msgstr ""
 
-#: src/args.c:382
+#: src/args.c:386
 msgid "Color options"
 msgstr ""
 
-#: src/args.c:396
+#: src/args.c:400
 msgid "[+lineno] file1[:lineno] [file2[:lineno]...]"
 msgstr ""
 
-#: src/args.c:399 src/filemanager/file.c:168
+#: src/args.c:403 src/filemanager/file.c:168
 msgid "file"
 msgstr ""
 
-#: src/args.c:403
+#: src/args.c:407
 msgid "file1 file2"
 msgstr ""
 
-#: src/args.c:408
+#: src/args.c:412
 msgid "[this_dir] [other_panel_dir]"
 msgstr ""
 
-#: src/args.c:423
+#: src/args.c:427
 msgid ""
 "\n"
 "Please send any bug reports (including the output of 'mc -V')\n"
 "as tickets at www.midnight-commander.org\n"
 msgstr ""
 
-#: src/args.c:426 src/filemanager/midnight.c:1714 src/textconf.c:145
+#: src/args.c:430 src/filemanager/midnight.c:1767 src/textconf.c:145
 #, c-format
 msgid "GNU Midnight Commander %s\n"
 msgstr ""
 
-#: src/args.c:679 src/filemanager/boxes.c:646
+#: src/args.c:683 src/filemanager/boxes.c:646
 msgid "Main options"
 msgstr ""
 
-#: src/args.c:685 src/args.c:686
+#: src/args.c:689 src/args.c:690
 msgid "Terminal options"
 msgstr ""
 
-#: src/args.c:701
+#: src/args.c:705
 msgid "Arguments parse error!"
 msgstr ""
 
-#: src/args.c:819
+#: src/args.c:825
 msgid "No arguments given to the viewer."
 msgstr ""
 
-#: src/args.c:831
+#: src/args.c:837
 msgid "Two files are required to envoke the diffviewer."
 msgstr ""
 
@@ -1110,8 +1126,8 @@ msgstr ""
 
 #: src/diffviewer/search.c:106 src/diffviewer/search.c:229
 #: src/diffviewer/search.c:242 src/diffviewer/search.c:275
-#: src/editor/editcmd.c:960 src/editor/editcmd.c:987 src/editor/editcmd.c:1016
-#: src/editor/editcmd.c:2600 src/editor/editcmd.c:2611
+#: src/editor/editcmd.c:961 src/editor/editcmd.c:988 src/editor/editcmd.c:1017
+#: src/editor/editcmd.c:2631 src/editor/editcmd.c:2642
 #: src/editor/editcmd_dialogs.c:130 src/viewer/dialogs.c:111
 #: src/viewer/search.c:350 src/viewer/search.c:410 src/viewer/search.c:430
 #: src/viewer/search.c:432
@@ -1122,14 +1138,14 @@ msgstr ""
 msgid "Search is disabled"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:175
+#: src/diffviewer/ydiff.c:176
 #, c-format
 msgid ""
 "Cannot create temporary diff file\n"
 "%s"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2207
+#: src/diffviewer/ydiff.c:2208
 #, c-format
 msgid ""
 "Cannot create backup file\n"
@@ -1137,146 +1153,146 @@ msgid ""
 "%s"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2216
+#: src/diffviewer/ydiff.c:2217
 #, c-format
 msgid ""
 "Cannot create temporary merge file\n"
 "%s"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2355
+#: src/diffviewer/ydiff.c:2358
 msgid "&Fastest (Assume large files)"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2356
+#: src/diffviewer/ydiff.c:2359
 msgid "&Minimal (Find a smaller set of change)"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2361
+#: src/diffviewer/ydiff.c:2364
 msgid "Diff algorithm"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2364
+#: src/diffviewer/ydiff.c:2367
 msgid "Diff extra options"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2365
+#: src/diffviewer/ydiff.c:2368
 msgid "&Ignore case"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2366
+#: src/diffviewer/ydiff.c:2369
 msgid "Ignore tab &expansion"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2367
+#: src/diffviewer/ydiff.c:2370
 msgid "Ignore &space change"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2368
+#: src/diffviewer/ydiff.c:2371
 msgid "Ignore all &whitespace"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2369
+#: src/diffviewer/ydiff.c:2372
 msgid "Strip &trailing carriage return"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2379
+#: src/diffviewer/ydiff.c:2382
 msgid "Diff Options"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2888
+#: src/diffviewer/ydiff.c:2891
 msgid "Edit"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2888
+#: src/diffviewer/ydiff.c:2891
 msgid "Edit is disabled"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2922
+#: src/diffviewer/ydiff.c:2925
 msgid "Goto line (left)"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2923
+#: src/diffviewer/ydiff.c:2926
 msgid "Goto line (right)"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2931 src/editor/editcmd.c:3037
+#: src/diffviewer/ydiff.c:2934 src/editor/editcmd.c:3068
 msgid "Enter line:"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2973 src/editor/editwidget.c:682
-#: src/filemanager/midnight.c:1601 src/filemanager/tree.c:1167 src/help.c:1128
+#: src/diffviewer/ydiff.c:2976 src/editor/editwidget.c:661
+#: src/filemanager/midnight.c:1654 src/filemanager/tree.c:1167 src/help.c:1127
 #: src/viewer/display.c:85
 msgid "ButtonBar|Help"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2974 src/editor/editwidget.c:683
+#: src/diffviewer/ydiff.c:2977 src/editor/editwidget.c:662
 #: src/viewer/display.c:97
 msgid "ButtonBar|Save"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2975 src/filemanager/midnight.c:1604
+#: src/diffviewer/ydiff.c:2978 src/filemanager/midnight.c:1657
 #: src/viewer/display.c:92
 msgid "ButtonBar|Edit"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2976
+#: src/diffviewer/ydiff.c:2979
 msgid "ButtonBar|Merge"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2977 src/editor/editwidget.c:688
+#: src/diffviewer/ydiff.c:2980 src/editor/editwidget.c:667
 #: src/viewer/display.c:107
 msgid "ButtonBar|Search"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2978
+#: src/diffviewer/ydiff.c:2981
 msgid "ButtonBar|Options"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2979 src/editor/editwidget.c:691
-#: src/filemanager/midnight.c:1610 src/help.c:1137 src/viewer/display.c:116
+#: src/diffviewer/ydiff.c:2982 src/editor/editwidget.c:670
+#: src/filemanager/midnight.c:1663 src/help.c:1136 src/viewer/display.c:116
 #: src/viewer/display.c:119
 msgid "ButtonBar|Quit"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:3086 src/editor/editcmd.c:2857
-#: src/viewer/actions_cmd.c:627 src/viewer/actions_cmd.c:633
+#: src/diffviewer/ydiff.c:3089 src/editor/editcmd.c:2888
+#: src/viewer/actions_cmd.c:654 src/viewer/actions_cmd.c:660
 msgid "Quit"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:3087
+#: src/diffviewer/ydiff.c:3090
 msgid "File(s) was modified. Save with exit?"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:3088
+#: src/diffviewer/ydiff.c:3091
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file(s)?"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:3438 src/diffviewer/ydiff.c:3441
+#: src/diffviewer/ydiff.c:3424 src/diffviewer/ydiff.c:3427
 msgid "Diff:"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:3554 src/diffviewer/ydiff.c:3564
-#: src/diffviewer/ydiff.c:3584 src/diffviewer/ydiff.c:3601
+#: src/diffviewer/ydiff.c:3539 src/diffviewer/ydiff.c:3549
+#: src/diffviewer/ydiff.c:3569 src/diffviewer/ydiff.c:3586
 #, c-format
 msgid "\"%s\" is a directory"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:3590 src/diffviewer/ydiff.c:3607
-#: src/filemanager/file.c:1758 src/viewer/mcviewer.c:339
+#: src/diffviewer/ydiff.c:3575 src/diffviewer/ydiff.c:3592
+#: src/filemanager/file.c:1772 src/viewer/mcviewer.c:344
 #, c-format
 msgid ""
 "Cannot stat \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:3616
+#: src/diffviewer/ydiff.c:3601
 msgid "Diff viewer: invalid mode"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:3645
+#: src/diffviewer/ydiff.c:3630
 msgid "Two files are needed to compare"
 msgstr ""
 
@@ -1342,339 +1358,339 @@ msgstr ""
 msgid "Cannot open pipe for reading: %s"
 msgstr ""
 
-#: src/editor/editcmd.c:127 src/viewer/search.c:82
+#: src/editor/editcmd.c:128 src/viewer/search.c:82
 #, c-format
 msgid "Searching %s: %3d%%"
 msgstr ""
 
-#: src/editor/editcmd.c:130 src/filemanager/find.c:1343 src/viewer/search.c:85
+#: src/editor/editcmd.c:131 src/filemanager/find.c:1343 src/viewer/search.c:85
 #, c-format
 msgid "Searching %s"
 msgstr ""
 
-#: src/editor/editcmd.c:230
+#: src/editor/editcmd.c:231
 msgid "File has hard-links. Detach before saving?"
 msgstr ""
 
-#: src/editor/editcmd.c:253
+#: src/editor/editcmd.c:254
 msgid "The file has been modified in the meantime. Save anyway?"
 msgstr ""
 
-#: src/editor/editcmd.c:315
+#: src/editor/editcmd.c:316
 #, c-format
 msgid "Error writing to pipe: %s"
 msgstr ""
 
-#: src/editor/editcmd.c:325
+#: src/editor/editcmd.c:326
 #, c-format
 msgid "Cannot open pipe for writing: %s"
 msgstr ""
 
-#: src/editor/editcmd.c:366
+#: src/editor/editcmd.c:367
 #, c-format
 msgid "Cannot open file for writing: %s"
 msgstr ""
 
-#: src/editor/editcmd.c:423
+#: src/editor/editcmd.c:424
 msgid "The file you are saving does not end with a newline."
 msgstr ""
 
-#: src/editor/editcmd.c:424 src/editor/editcmd.c:587 src/editor/editcmd.c:3438
-#: src/editor/editcmd.c:3467 src/editor/editcmd_dialogs.c:473
+#: src/editor/editcmd.c:425 src/editor/editcmd.c:588 src/editor/editcmd.c:3469
+#: src/editor/editcmd.c:3498 src/editor/editcmd_dialogs.c:473
 msgid "C&ontinue"
 msgstr ""
 
-#: src/editor/editcmd.c:437
+#: src/editor/editcmd.c:438
 msgid "&Do not change"
 msgstr ""
 
-#: src/editor/editcmd.c:438
+#: src/editor/editcmd.c:439
 msgid "&Unix format (LF)"
 msgstr ""
 
-#: src/editor/editcmd.c:439
+#: src/editor/editcmd.c:440
 msgid "&Windows/DOS format (CR LF)"
 msgstr ""
 
-#: src/editor/editcmd.c:440
+#: src/editor/editcmd.c:441
 msgid "&Macintosh format (CR)"
 msgstr ""
 
-#: src/editor/editcmd.c:445 src/editor/editcmd.c:2090 src/editor/editcmd.c:3078
-#: src/editor/editcmd.c:3110 src/filemanager/cmd.c:754
+#: src/editor/editcmd.c:446 src/editor/editcmd.c:2091 src/editor/editcmd.c:3109
+#: src/editor/editcmd.c:3141 src/filemanager/cmd.c:751
 msgid "Enter file name:"
 msgstr ""
 
-#: src/editor/editcmd.c:449
+#: src/editor/editcmd.c:450
 msgid "Change line breaks to:"
 msgstr ""
 
-#: src/editor/editcmd.c:458
+#: src/editor/editcmd.c:459
 msgid "Save As"
 msgstr ""
 
-#: src/editor/editcmd.c:586
+#: src/editor/editcmd.c:587
 msgid "Block is large, you may not be able to undo this action"
 msgstr ""
 
-#: src/editor/editcmd.c:1245
+#: src/editor/editcmd.c:1246
 msgid "Collect completions"
 msgstr ""
 
-#: src/editor/editcmd.c:1619
+#: src/editor/editcmd.c:1620
 msgid "&Quick save"
 msgstr ""
 
-#: src/editor/editcmd.c:1620
+#: src/editor/editcmd.c:1621
 msgid "&Safe save"
 msgstr ""
 
-#: src/editor/editcmd.c:1621
+#: src/editor/editcmd.c:1622
 msgid "&Do backups with following extension:"
 msgstr ""
 
-#: src/editor/editcmd.c:1640
+#: src/editor/editcmd.c:1641
 msgid "Check &POSIX new line"
 msgstr ""
 
-#: src/editor/editcmd.c:1648
+#: src/editor/editcmd.c:1649
 msgid "Edit Save Mode"
 msgstr ""
 
-#: src/editor/editcmd.c:1705 src/editor/editcmd.c:1775
+#: src/editor/editcmd.c:1706 src/editor/editcmd.c:1776
 msgid "Save as"
 msgstr ""
 
-#: src/editor/editcmd.c:1707
+#: src/editor/editcmd.c:1708
 msgid "Cannot save: destination is not a regular file"
 msgstr ""
 
-#: src/editor/editcmd.c:1721
+#: src/editor/editcmd.c:1722
 msgid "A file already exists with this name"
 msgstr ""
 
-#: src/editor/editcmd.c:1721
+#: src/editor/editcmd.c:1722
 msgid "&Overwrite"
 msgstr ""
 
-#: src/editor/editcmd.c:1775 src/editor/editcmd.c:3088
+#: src/editor/editcmd.c:1776 src/editor/editcmd.c:3119
 msgid "Cannot save file"
 msgstr ""
 
-#: src/editor/editcmd.c:1800 src/editor/editcmd.c:1803
+#: src/editor/editcmd.c:1801 src/editor/editcmd.c:1804
 msgid "Delete macro"
 msgstr ""
 
-#: src/editor/editcmd.c:1800
+#: src/editor/editcmd.c:1801
 msgid "Press macro hotkey:"
 msgstr ""
 
-#: src/editor/editcmd.c:1803
+#: src/editor/editcmd.c:1804
 msgid "Macro not deleted"
 msgstr ""
 
-#: src/editor/editcmd.c:1858
+#: src/editor/editcmd.c:1859
 msgid "Save macro"
 msgstr ""
 
-#: src/editor/editcmd.c:1858
+#: src/editor/editcmd.c:1859
 msgid "Press the macro's new hotkey:"
 msgstr ""
 
-#: src/editor/editcmd.c:1932
+#: src/editor/editcmd.c:1933
 msgid "Repeat last commands"
 msgstr ""
 
-#: src/editor/editcmd.c:1932
+#: src/editor/editcmd.c:1933
 msgid "Repeat times:"
 msgstr ""
 
-#: src/editor/editcmd.c:2067
+#: src/editor/editcmd.c:2068
 #, c-format
 msgid "Confirm save file: \"%s\""
 msgstr ""
 
-#: src/editor/editcmd.c:2069 src/viewer/hex.c:419 src/viewer/hex.c:431
+#: src/editor/editcmd.c:2070 src/viewer/hex.c:419 src/viewer/hex.c:431
 msgid "Save file"
 msgstr ""
 
-#: src/editor/editcmd.c:2069 src/editor/editmenu.c:77 src/learn.c:192
+#: src/editor/editcmd.c:2070 src/editor/editmenu.c:78 src/learn.c:192
 #: src/learn.c:255
 msgid "&Save"
 msgstr ""
 
-#: src/editor/editcmd.c:2090
+#: src/editor/editcmd.c:2091
 msgid "Load"
 msgstr ""
 
-#: src/editor/editcmd.c:2123
+#: src/editor/editcmd.c:2153
 msgid "Syntax file edit"
 msgstr ""
 
-#: src/editor/editcmd.c:2124
+#: src/editor/editcmd.c:2154
 msgid "Which syntax file you want to edit?"
 msgstr ""
 
-#: src/editor/editcmd.c:2125 src/editor/editcmd.c:2171
-#: src/filemanager/cmd.c:960 src/filemanager/cmd.c:1000
-#: src/filemanager/cmd.c:1061
+#: src/editor/editcmd.c:2155 src/editor/editcmd.c:2201
+#: src/filemanager/cmd.c:959 src/filemanager/cmd.c:1000
+#: src/filemanager/cmd.c:1058
 msgid "&User"
 msgstr ""
 
-#: src/editor/editcmd.c:2125 src/editor/editcmd.c:2171
+#: src/editor/editcmd.c:2155 src/editor/editcmd.c:2201
 msgid "&System wide"
 msgstr ""
 
-#: src/editor/editcmd.c:2169 src/filemanager/cmd.c:998
+#: src/editor/editcmd.c:2199 src/filemanager/cmd.c:998
 msgid "Menu edit"
 msgstr ""
 
-#: src/editor/editcmd.c:2170 src/filemanager/cmd.c:999
+#: src/editor/editcmd.c:2200 src/filemanager/cmd.c:999
 msgid "Which menu file do you want to edit?"
 msgstr ""
 
-#: src/editor/editcmd.c:2171 src/filemanager/cmd.c:1000
+#: src/editor/editcmd.c:2201 src/filemanager/cmd.c:1000
 msgid "&Local"
 msgstr ""
 
-#: src/editor/editcmd.c:2676 src/editor/editcmd.c:2717
-#: src/editor/editcmd.c:2729 src/editor/editcmd_dialogs.c:224
+#: src/editor/editcmd.c:2707 src/editor/editcmd.c:2748
+#: src/editor/editcmd.c:2760 src/editor/editcmd_dialogs.c:224
 msgid "Replace"
 msgstr ""
 
-#: src/editor/editcmd.c:2729
+#: src/editor/editcmd.c:2760
 #, c-format
 msgid "%ld replacements made"
 msgstr ""
 
-#: src/editor/editcmd.c:2832 src/editor/editwidget.c:391
+#: src/editor/editcmd.c:2863 src/editor/editwidget.c:367
 msgid "[NoName]"
 msgstr ""
 
-#: src/editor/editcmd.c:2850
+#: src/editor/editcmd.c:2881
 #, c-format
 msgid ""
 "File %s was modified.\n"
 "Save before close?"
 msgstr ""
 
-#: src/editor/editcmd.c:2851
+#: src/editor/editcmd.c:2882
 msgid "Close file"
 msgstr ""
 
-#: src/editor/editcmd.c:2855
+#: src/editor/editcmd.c:2886
 #, c-format
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file %s?"
 msgstr ""
 
-#: src/editor/editcmd.c:2954
+#: src/editor/editcmd.c:2985
 msgid "This function is not implemented"
 msgstr ""
 
-#: src/editor/editcmd.c:2969
+#: src/editor/editcmd.c:3000
 msgid "Copy to clipboard"
 msgstr ""
 
-#: src/editor/editcmd.c:2969 src/editor/editcmd.c:2993
+#: src/editor/editcmd.c:3000 src/editor/editcmd.c:3024
 msgid "Unable to save to file"
 msgstr ""
 
-#: src/editor/editcmd.c:2993
+#: src/editor/editcmd.c:3024
 msgid "Cut to clipboard"
 msgstr ""
 
-#: src/editor/editcmd.c:3037
+#: src/editor/editcmd.c:3068
 msgid "Goto line"
 msgstr ""
 
-#: src/editor/editcmd.c:3078 src/editor/editcmd.c:3088
+#: src/editor/editcmd.c:3109 src/editor/editcmd.c:3119
 msgid "Save block"
 msgstr ""
 
-#: src/editor/editcmd.c:3110 src/editor/editcmd.c:3125
+#: src/editor/editcmd.c:3141 src/editor/editcmd.c:3156
 msgid "Insert file"
 msgstr ""
 
-#: src/editor/editcmd.c:3125
+#: src/editor/editcmd.c:3156
 msgid "Cannot insert file"
 msgstr ""
 
-#: src/editor/editcmd.c:3146
+#: src/editor/editcmd.c:3177
 msgid "Sort block"
 msgstr ""
 
-#: src/editor/editcmd.c:3146
+#: src/editor/editcmd.c:3177
 msgid "You must first highlight a block of text"
 msgstr ""
 
-#: src/editor/editcmd.c:3154
+#: src/editor/editcmd.c:3185
 msgid "Run sort"
 msgstr ""
 
-#: src/editor/editcmd.c:3155
+#: src/editor/editcmd.c:3186
 msgid "Enter sort options (see manpage) separated by whitespace:"
 msgstr ""
 
-#: src/editor/editcmd.c:3175 src/editor/editcmd.c:3182
+#: src/editor/editcmd.c:3206 src/editor/editcmd.c:3213
 msgid "Sort"
 msgstr ""
 
-#: src/editor/editcmd.c:3175
+#: src/editor/editcmd.c:3206
 msgid "Cannot execute sort command"
 msgstr ""
 
-#: src/editor/editcmd.c:3181
+#: src/editor/editcmd.c:3212
 #, c-format
 msgid "Sort returned non-zero: %s"
 msgstr ""
 
-#: src/editor/editcmd.c:3216
+#: src/editor/editcmd.c:3247
 msgid "Paste output of external command"
 msgstr ""
 
-#: src/editor/editcmd.c:3217
+#: src/editor/editcmd.c:3248
 msgid "Enter shell command(s):"
 msgstr ""
 
-#: src/editor/editcmd.c:3234
+#: src/editor/editcmd.c:3265
 msgid "External command"
 msgstr ""
 
-#: src/editor/editcmd.c:3234
+#: src/editor/editcmd.c:3265
 msgid "Cannot execute command"
 msgstr ""
 
-#: src/editor/editcmd.c:3278
+#: src/editor/editcmd.c:3309
 msgid "mail -s <subject> -c <cc> <to>"
 msgstr ""
 
-#: src/editor/editcmd.c:3279
+#: src/editor/editcmd.c:3310
 msgid "To"
 msgstr ""
 
-#: src/editor/editcmd.c:3282
+#: src/editor/editcmd.c:3313
 msgid "Subject"
 msgstr ""
 
-#: src/editor/editcmd.c:3285
+#: src/editor/editcmd.c:3316
 msgid "Copies to"
 msgstr ""
 
-#: src/editor/editcmd.c:3295
+#: src/editor/editcmd.c:3326
 msgid "Mail"
 msgstr ""
 
-#: src/editor/editcmd.c:3399
+#: src/editor/editcmd.c:3430
 msgid "Insert literal"
 msgstr ""
 
-#: src/editor/editcmd.c:3400
+#: src/editor/editcmd.c:3431
 msgid "Press any key:"
 msgstr ""
 
-#: src/editor/editcmd.c:3437 src/editor/editcmd.c:3466
+#: src/editor/editcmd.c:3468 src/editor/editcmd.c:3497
 msgid ""
 "Current text was modified without a file save.\n"
 "Continue discards these changes"
@@ -1701,13 +1717,13 @@ msgid "&Replace"
 msgstr ""
 
 #: src/editor/editcmd_dialogs.c:280 src/filemanager/file.c:968
-#: src/filemanager/filegui.c:471
+#: src/filemanager/filegui.c:472
 msgid "A&ll"
 msgstr ""
 
 #: src/editor/editcmd_dialogs.c:281 src/editor/spell_dialogs.c:97
 #: src/filemanager/file.c:847 src/filemanager/file.c:920
-#: src/filemanager/file.c:923 src/filemanager/file.c:3094
+#: src/filemanager/file.c:923 src/filemanager/file.c:3108
 #: src/filemanager/filegui.c:252
 msgid "&Skip"
 msgstr ""
@@ -1726,7 +1742,7 @@ msgid ""
 "Continue discards these changes."
 msgstr ""
 
-#: src/editor/editdraw.c:269 src/editor/editwidget.c:341
+#: src/editor/editdraw.c:269 src/editor/editwidget.c:317
 msgid "NoName"
 msgstr ""
 
@@ -1742,285 +1758,289 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
-#: src/editor/editmenu.c:78
+#: src/editor/editmenu.c:76
+msgid "&History..."
+msgstr ""
+
+#: src/editor/editmenu.c:79
 msgid "Save &as..."
 msgstr ""
 
-#: src/editor/editmenu.c:80
+#: src/editor/editmenu.c:81
 msgid "&Insert file..."
 msgstr ""
 
-#: src/editor/editmenu.c:81
+#: src/editor/editmenu.c:82
 msgid "Cop&y to file..."
 msgstr ""
 
-#: src/editor/editmenu.c:83
+#: src/editor/editmenu.c:84
 msgid "&User menu..."
 msgstr ""
 
-#: src/editor/editmenu.c:85
+#: src/editor/editmenu.c:86
 msgid "A&bout..."
 msgstr ""
 
-#: src/editor/editmenu.c:87 src/filemanager/find.c:194
-#: src/subshell/common.c:435
+#: src/editor/editmenu.c:88 src/filemanager/find.c:194
+#: src/subshell/common.c:441
 msgid "&Quit"
 msgstr ""
 
-#: src/editor/editmenu.c:99
+#: src/editor/editmenu.c:100
 msgid "&Undo"
 msgstr ""
 
-#: src/editor/editmenu.c:100
+#: src/editor/editmenu.c:101
 msgid "&Redo"
 msgstr ""
 
-#: src/editor/editmenu.c:103
+#: src/editor/editmenu.c:104
 msgid "&Toggle ins/overw"
 msgstr ""
 
-#: src/editor/editmenu.c:105
+#: src/editor/editmenu.c:106
 msgid "To&ggle mark"
 msgstr ""
 
-#: src/editor/editmenu.c:106
+#: src/editor/editmenu.c:107
 msgid "&Mark columns"
 msgstr ""
 
-#: src/editor/editmenu.c:107
+#: src/editor/editmenu.c:108
 msgid "Mark &all"
 msgstr ""
 
-#: src/editor/editmenu.c:108
+#: src/editor/editmenu.c:109
 msgid "Unmar&k"
 msgstr ""
 
-#: src/editor/editmenu.c:110
+#: src/editor/editmenu.c:111
 msgid "Cop&y"
 msgstr ""
 
-#: src/editor/editmenu.c:111
+#: src/editor/editmenu.c:112
 msgid "Mo&ve"
 msgstr ""
 
-#: src/editor/editmenu.c:112 src/filemanager/file.c:2688
-#: src/filemanager/midnight.c:254
+#: src/editor/editmenu.c:113 src/filemanager/file.c:2702
+#: src/filemanager/midnight.c:257
 msgid "&Delete"
 msgstr ""
 
-#: src/editor/editmenu.c:114
+#: src/editor/editmenu.c:115
 msgid "Co&py to clipfile"
 msgstr ""
 
-#: src/editor/editmenu.c:115
+#: src/editor/editmenu.c:116
 msgid "&Cut to clipfile"
 msgstr ""
 
-#: src/editor/editmenu.c:116
+#: src/editor/editmenu.c:117
 msgid "Pa&ste from clipfile"
 msgstr ""
 
-#: src/editor/editmenu.c:118
+#: src/editor/editmenu.c:119
 msgid "&Beginning"
 msgstr ""
 
-#: src/editor/editmenu.c:119
+#: src/editor/editmenu.c:120
 msgid "&End"
 msgstr ""
 
-#: src/editor/editmenu.c:131
+#: src/editor/editmenu.c:132
 msgid "&Search..."
 msgstr ""
 
-#: src/editor/editmenu.c:132
+#: src/editor/editmenu.c:133
 msgid "Search &again"
 msgstr ""
 
-#: src/editor/editmenu.c:133
+#: src/editor/editmenu.c:134
 msgid "&Replace..."
 msgstr ""
 
-#: src/editor/editmenu.c:135
+#: src/editor/editmenu.c:136
 msgid "&Toggle bookmark"
 msgstr ""
 
-#: src/editor/editmenu.c:136
+#: src/editor/editmenu.c:137
 msgid "&Next bookmark"
 msgstr ""
 
-#: src/editor/editmenu.c:137
+#: src/editor/editmenu.c:138
 msgid "&Prev bookmark"
 msgstr ""
 
-#: src/editor/editmenu.c:138
+#: src/editor/editmenu.c:139
 msgid "&Flush bookmarks"
 msgstr ""
 
-#: src/editor/editmenu.c:150
+#: src/editor/editmenu.c:151
 msgid "&Go to line..."
 msgstr ""
 
-#: src/editor/editmenu.c:151
+#: src/editor/editmenu.c:152
 msgid "&Toggle line state"
 msgstr ""
 
-#: src/editor/editmenu.c:153
+#: src/editor/editmenu.c:154
 msgid "Go to matching &bracket"
 msgstr ""
 
-#: src/editor/editmenu.c:156
+#: src/editor/editmenu.c:157
 msgid "Toggle s&yntax highlighting"
 msgstr ""
 
-#: src/editor/editmenu.c:158
+#: src/editor/editmenu.c:159
 msgid "&Find declaration"
 msgstr ""
 
-#: src/editor/editmenu.c:160
+#: src/editor/editmenu.c:161
 msgid "Back from &declaration"
 msgstr ""
 
-#: src/editor/editmenu.c:162
+#: src/editor/editmenu.c:163
 msgid "For&ward to declaration"
 msgstr ""
 
-#: src/editor/editmenu.c:165
+#: src/editor/editmenu.c:166
 msgid "Encod&ing..."
 msgstr ""
 
-#: src/editor/editmenu.c:168
+#: src/editor/editmenu.c:169
 msgid "&Refresh screen"
 msgstr ""
 
-#: src/editor/editmenu.c:172
+#: src/editor/editmenu.c:173
 msgid "&Start/Stop record macro"
 msgstr ""
 
-#: src/editor/editmenu.c:173
+#: src/editor/editmenu.c:174
 msgid "Delete macr&o..."
 msgstr ""
 
-#: src/editor/editmenu.c:176
+#: src/editor/editmenu.c:177
 msgid "Record/Repeat &actions"
 msgstr ""
 
-#: src/editor/editmenu.c:181
+#: src/editor/editmenu.c:182
 msgid "S&pell check"
 msgstr ""
 
-#: src/editor/editmenu.c:184
+#: src/editor/editmenu.c:185
 msgid "C&heck word"
 msgstr ""
 
-#: src/editor/editmenu.c:187
+#: src/editor/editmenu.c:188
 msgid "Change spelling &language..."
 msgstr ""
 
-#: src/editor/editmenu.c:192
+#: src/editor/editmenu.c:193
 msgid "&Mail..."
 msgstr ""
 
-#: src/editor/editmenu.c:206
+#: src/editor/editmenu.c:207
 msgid "Insert &literal..."
 msgstr ""
 
-#: src/editor/editmenu.c:207
+#: src/editor/editmenu.c:208
 msgid "Insert &date/time"
 msgstr ""
 
-#: src/editor/editmenu.c:210
+#: src/editor/editmenu.c:211
 msgid "&Format paragraph"
 msgstr ""
 
-#: src/editor/editmenu.c:211
+#: src/editor/editmenu.c:212
 msgid "&Sort..."
 msgstr ""
 
-#: src/editor/editmenu.c:213
+#: src/editor/editmenu.c:214
 msgid "&Paste output of..."
 msgstr ""
 
-#: src/editor/editmenu.c:215
+#: src/editor/editmenu.c:216
 msgid "&External formatter"
 msgstr ""
 
-#: src/editor/editmenu.c:230 src/filemanager/hotlist.c:199
+#: src/editor/editmenu.c:231 src/filemanager/hotlist.c:194
 msgid "&Move"
 msgstr ""
 
-#: src/editor/editmenu.c:231
+#: src/editor/editmenu.c:232
 msgid "&Resize"
 msgstr ""
 
-#: src/editor/editmenu.c:233
+#: src/editor/editmenu.c:234
 msgid "&Toggle fullscreen"
 msgstr ""
 
-#: src/editor/editmenu.c:235
+#: src/editor/editmenu.c:236
 msgid "&Next"
 msgstr ""
 
-#: src/editor/editmenu.c:236
+#: src/editor/editmenu.c:237
 msgid "&Previous"
 msgstr ""
 
-#: src/editor/editmenu.c:237
+#: src/editor/editmenu.c:238
 msgid "&List..."
 msgstr ""
 
-#: src/editor/editmenu.c:249
+#: src/editor/editmenu.c:250
 msgid "&General..."
 msgstr ""
 
-#: src/editor/editmenu.c:250
+#: src/editor/editmenu.c:251
 msgid "Save &mode..."
 msgstr ""
 
-#: src/editor/editmenu.c:251 src/filemanager/midnight.c:340
+#: src/editor/editmenu.c:252 src/filemanager/midnight.c:347
 msgid "Learn &keys..."
 msgstr ""
 
-#: src/editor/editmenu.c:253
+#: src/editor/editmenu.c:254
 msgid "Syntax &highlighting..."
 msgstr ""
 
-#: src/editor/editmenu.c:255
+#: src/editor/editmenu.c:256
 msgid "S&yntax file"
 msgstr ""
 
-#: src/editor/editmenu.c:256
+#: src/editor/editmenu.c:257
 msgid "&Menu file"
 msgstr ""
 
-#: src/editor/editmenu.c:258 src/filemanager/midnight.c:345
+#: src/editor/editmenu.c:259 src/filemanager/midnight.c:352
 msgid "&Save setup"
 msgstr ""
 
-#: src/editor/editmenu.c:282 src/filemanager/midnight.c:357
+#: src/editor/editmenu.c:283 src/filemanager/midnight.c:364
 msgid "&File"
 msgstr ""
 
-#: src/editor/editmenu.c:284 src/filemanager/midnight.c:240
+#: src/editor/editmenu.c:285 src/filemanager/midnight.c:243
 msgid "&Edit"
 msgstr ""
 
-#: src/editor/editmenu.c:286
+#: src/editor/editmenu.c:287
 msgid "&Search"
 msgstr ""
 
-#: src/editor/editmenu.c:289 src/filemanager/midnight.c:359
+#: src/editor/editmenu.c:290 src/filemanager/midnight.c:366
 msgid "&Command"
 msgstr ""
 
-#: src/editor/editmenu.c:292
+#: src/editor/editmenu.c:293
 msgid "For&mat"
 msgstr ""
 
-#: src/editor/editmenu.c:294
+#: src/editor/editmenu.c:295
 msgid "&Window"
 msgstr ""
 
-#: src/editor/editmenu.c:296 src/filemanager/midnight.c:361
+#: src/editor/editmenu.c:297 src/filemanager/midnight.c:368
 msgid "&Options"
 msgstr ""
 
@@ -2061,7 +2081,7 @@ msgid "Tab spacing:"
 msgstr ""
 
 #: src/editor/editoptions.c:164 src/filemanager/boxes.c:536
-#: src/filemanager/layout.c:451
+#: src/filemanager/layout.c:455
 msgid "Other options"
 msgstr ""
 
@@ -2113,50 +2133,50 @@ msgstr ""
 msgid "Editor options"
 msgstr ""
 
-#: src/editor/editwidget.c:145
+#: src/editor/editwidget.c:146
 msgid ""
 "A user friendly text editor\n"
 "written for the Midnight Commander."
 msgstr ""
 
-#: src/editor/editwidget.c:148
+#: src/editor/editwidget.c:149
 msgid "Copyright (C) 1996-2019 the Free Software Foundation"
 msgstr ""
 
-#: src/editor/editwidget.c:157
+#: src/editor/editwidget.c:158
 msgid "About"
 msgstr ""
 
-#: src/editor/editwidget.c:332
+#: src/editor/editwidget.c:308
 msgid "Open files"
 msgstr ""
 
-#: src/editor/editwidget.c:395 src/editor/editwidget.c:398
+#: src/editor/editwidget.c:371 src/editor/editwidget.c:374
 msgid "Edit: "
 msgstr ""
 
-#: src/editor/editwidget.c:684
+#: src/editor/editwidget.c:663
 msgid "ButtonBar|Mark"
 msgstr ""
 
-#: src/editor/editwidget.c:685
+#: src/editor/editwidget.c:664
 msgid "ButtonBar|Replac"
 msgstr ""
 
-#: src/editor/editwidget.c:686 src/filemanager/midnight.c:1605
+#: src/editor/editwidget.c:665 src/filemanager/midnight.c:1658
 #: src/filemanager/tree.c:1172
 msgid "ButtonBar|Copy"
 msgstr ""
 
-#: src/editor/editwidget.c:687
+#: src/editor/editwidget.c:666
 msgid "ButtonBar|Move"
 msgstr ""
 
-#: src/editor/editwidget.c:689 src/filemanager/midnight.c:1608
+#: src/editor/editwidget.c:668 src/filemanager/midnight.c:1661
 msgid "ButtonBar|Delete"
 msgstr ""
 
-#: src/editor/editwidget.c:690 src/filemanager/midnight.c:1609
+#: src/editor/editwidget.c:669 src/filemanager/midnight.c:1662
 msgid "ButtonBar|PullDn"
 msgstr ""
 
@@ -2280,11 +2300,11 @@ msgstr ""
 msgid "Select language"
 msgstr ""
 
-#: src/editor/syntax.c:1500 src/editor/syntax.c:1506
+#: src/editor/syntax.c:1499 src/editor/syntax.c:1505
 msgid "Load syntax file"
 msgstr ""
 
-#: src/editor/syntax.c:1501 src/help.c:1069 src/usermenu.c:955
+#: src/editor/syntax.c:1500 src/help.c:1068 src/usermenu.c:955
 #: src/usermenu.c:995
 #, c-format
 msgid ""
@@ -2292,7 +2312,7 @@ msgid ""
 "%s"
 msgstr ""
 
-#: src/editor/syntax.c:1507
+#: src/editor/syntax.c:1506
 #, c-format
 msgid "Error in file %s on line %d"
 msgstr ""
@@ -2305,7 +2325,7 @@ msgid ""
 "extra access permissions with the \"su\" command?"
 msgstr ""
 
-#: src/execute.c:196 src/filemanager/ext.c:657
+#: src/execute.c:196 src/filemanager/ext.c:660
 #, c-format
 msgid "Cannot fetch a local copy of %s"
 msgstr ""
@@ -2314,7 +2334,13 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
-#: src/execute.c:491
+#: src/execute.c:464
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
+#: src/execute.c:503
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2403,7 +2429,7 @@ msgstr ""
 msgid "Running"
 msgstr ""
 
-#: src/filemanager/boxes.c:434 src/filemanager/find.c:1593
+#: src/filemanager/boxes.c:434 src/filemanager/find.c:1594
 msgid "Stopped"
 msgstr ""
 
@@ -2934,7 +2960,7 @@ msgstr ""
 msgid "<Unknown group>"
 msgstr ""
 
-#: src/filemanager/cmd.c:118
+#: src/filemanager/cmd.c:120
 msgid "Enter machine name (F1 for details):"
 msgstr ""
 
@@ -2942,89 +2968,89 @@ msgstr ""
 msgid "Files tagged, want to cd?"
 msgstr ""
 
-#: src/filemanager/cmd.c:147 src/filemanager/cmd.c:1139
-#: src/filemanager/panel.c:2796 src/filemanager/panel.c:3368
+#: src/filemanager/cmd.c:145 src/filemanager/cmd.c:1139
+#: src/filemanager/panel.c:2796 src/filemanager/panel.c:3374
 msgid "Cannot change directory"
 msgstr ""
 
-#: src/filemanager/cmd.c:198
+#: src/filemanager/cmd.c:196
 msgid "Filter"
 msgstr ""
 
-#: src/filemanager/cmd.c:199
+#: src/filemanager/cmd.c:197
 msgid "Set expression for filtering filenames"
 msgstr ""
 
-#: src/filemanager/cmd.c:360
+#: src/filemanager/cmd.c:355
 #, c-format
 msgid "Link %s to:"
 msgstr ""
 
-#: src/filemanager/cmd.c:362
+#: src/filemanager/cmd.c:357
 msgid "Link"
 msgstr ""
 
-#: src/filemanager/cmd.c:370
+#: src/filemanager/cmd.c:366
 #, c-format
 msgid "link: %s"
 msgstr ""
 
-#: src/filemanager/cmd.c:408
+#: src/filemanager/cmd.c:405
 #, c-format
 msgid "symlink: %s"
 msgstr ""
 
-#: src/filemanager/cmd.c:468 src/filemanager/panel.c:4709
+#: src/filemanager/cmd.c:465 src/filemanager/panel.c:4748
 #, c-format
 msgid "Cannot chdir to \"%s\""
 msgstr ""
 
-#: src/filemanager/cmd.c:631
+#: src/filemanager/cmd.c:628
 msgid "View file"
 msgstr ""
 
-#: src/filemanager/cmd.c:631
+#: src/filemanager/cmd.c:628
 msgid "Filename:"
 msgstr ""
 
-#: src/filemanager/cmd.c:665
+#: src/filemanager/cmd.c:662
 msgid "Filtered view"
 msgstr ""
 
-#: src/filemanager/cmd.c:666
+#: src/filemanager/cmd.c:663
 msgid "Filter command and arguments:"
 msgstr ""
 
-#: src/filemanager/cmd.c:754
+#: src/filemanager/cmd.c:751
 msgid "Edit file"
 msgstr ""
 
-#: src/filemanager/cmd.c:842
+#: src/filemanager/cmd.c:843
 msgid "Create a new Directory"
 msgstr ""
 
-#: src/filemanager/cmd.c:843
+#: src/filemanager/cmd.c:844
 msgid "Enter directory name:"
 msgstr ""
 
-#: src/filemanager/cmd.c:958
+#: src/filemanager/cmd.c:957
 msgid "Extension file edit"
 msgstr ""
 
-#: src/filemanager/cmd.c:959
+#: src/filemanager/cmd.c:958
 msgid "Which extension file you want to edit?"
 msgstr ""
 
-#: src/filemanager/cmd.c:960 src/filemanager/cmd.c:1000
-#: src/filemanager/cmd.c:1061
+#: src/filemanager/cmd.c:959 src/filemanager/cmd.c:1000
+#: src/filemanager/cmd.c:1058
 msgid "&System Wide"
 msgstr ""
 
-#: src/filemanager/cmd.c:1059
+#: src/filemanager/cmd.c:1056
 msgid "Highlighting groups file edit"
 msgstr ""
 
-#: src/filemanager/cmd.c:1060
+#: src/filemanager/cmd.c:1057
 msgid "Which highlighting file you want to edit?"
 msgstr ""
 
@@ -3048,83 +3074,77 @@ msgstr ""
 msgid "&Thorough"
 msgstr ""
 
-#: src/filemanager/cmd.c:1171
+#: src/filemanager/cmd.c:1170
 msgid ""
 "Both panels should be in the listing mode\n"
 "to use this command"
 msgstr ""
 
-#: src/filemanager/cmd.c:1219
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
-#: src/filemanager/cmd.c:1251
+#: src/filemanager/cmd.c:1228
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
 
-#: src/filemanager/cmd.c:1264
+#: src/filemanager/cmd.c:1241
 #, c-format
 msgid "Symlink '%s' points to:"
 msgstr ""
 
-#: src/filemanager/cmd.c:1266
+#: src/filemanager/cmd.c:1243
 msgid "Edit symlink"
 msgstr ""
 
-#: src/filemanager/cmd.c:1279
+#: src/filemanager/cmd.c:1256
 #, c-format
 msgid "edit symlink, unable to remove %s: %s"
 msgstr ""
 
-#: src/filemanager/cmd.c:1287
+#: src/filemanager/cmd.c:1264
 #, c-format
 msgid "edit symlink: %s"
 msgstr ""
 
-#: src/filemanager/cmd.c:1332
+#: src/filemanager/cmd.c:1309
 msgid "FTP to machine"
 msgstr ""
 
-#: src/filemanager/cmd.c:1343
+#: src/filemanager/cmd.c:1320
 msgid "SFTP to machine"
 msgstr ""
 
-#: src/filemanager/cmd.c:1355
+#: src/filemanager/cmd.c:1332
 msgid "Shell link to machine"
 msgstr ""
 
-#: src/filemanager/cmd.c:1367
+#: src/filemanager/cmd.c:1344
 msgid "SMB link to machine"
 msgstr ""
 
-#: src/filemanager/cmd.c:1378
+#: src/filemanager/cmd.c:1355
 msgid "Undelete files on an ext2 file system"
 msgstr ""
 
-#: src/filemanager/cmd.c:1379
+#: src/filemanager/cmd.c:1356
 msgid ""
 "Enter device (without /dev/) to undelete\n"
 "files on: (F1 for details)"
 msgstr ""
 
-#: src/filemanager/cmd.c:1445 src/filemanager/cmd.c:1480
+#: src/filemanager/cmd.c:1424 src/filemanager/cmd.c:1459
 #: src/filemanager/file.c:760
 msgid "Directory scanning"
 msgstr ""
 
-#: src/filemanager/cmd.c:1526 src/filemanager/cmd.c:1528
+#: src/filemanager/cmd.c:1505 src/filemanager/cmd.c:1507
 msgid "Setup"
 msgstr ""
 
-#: src/filemanager/cmd.c:1526
+#: src/filemanager/cmd.c:1505
 #, c-format
 msgid "Setup saved to %s"
 msgstr ""
 
-#: src/filemanager/cmd.c:1528
+#: src/filemanager/cmd.c:1507
 #, c-format
 msgid "Unable to save setup to %s"
 msgstr ""
@@ -3133,7 +3153,7 @@ msgstr ""
 msgid "Cannot execute commands on non-local filesystems"
 msgstr ""
 
-#: src/filemanager/command.c:447 src/filemanager/panel.c:3659
+#: src/filemanager/command.c:447 src/filemanager/panel.c:3665
 #: src/filemanager/tree.c:585
 #, c-format
 msgid ""
@@ -3141,10 +3161,6 @@ msgid ""
 "%s"
 msgstr ""
 
-#: src/filemanager/dir.c:647 src/filemanager/dir.c:708
-msgid "Cannot read directory contents"
-msgstr ""
-
 #: src/filemanager/ext.c:245 src/usermenu.c:476
 msgid "Parameter"
 msgstr ""
@@ -3156,12 +3172,12 @@ msgid ""
 "%s"
 msgstr ""
 
-#: src/filemanager/ext.c:839
+#: src/filemanager/ext.c:842
 #, c-format
 msgid " %s%s file error"
 msgstr ""
 
-#: src/filemanager/ext.c:841
+#: src/filemanager/ext.c:844
 #, c-format
 msgid ""
 "The format of the %smc.ext file has changed with version 3.0. It seems that "
@@ -3169,19 +3185,19 @@ msgid ""
 "Commander package."
 msgstr ""
 
-#: src/filemanager/ext.c:861
+#: src/filemanager/ext.c:864
 #, c-format
 msgid "%s file error"
 msgstr ""
 
-#: src/filemanager/ext.c:863
+#: src/filemanager/ext.c:866
 #, c-format
 msgid ""
 "The format of the %s file has changed with version 3.0. You may either want "
 "to copy it from %smc.ext or use that file as an example of how to write it."
 msgstr ""
 
-#: src/filemanager/file.c:95 src/filemanager/file.c:2687
+#: src/filemanager/file.c:95 src/filemanager/file.c:2701
 #: src/filemanager/tree.c:716
 msgid "DialogTitle|Copy"
 msgstr ""
@@ -3190,8 +3206,8 @@ msgstr ""
 msgid "DialogTitle|Move"
 msgstr ""
 
-#: src/filemanager/file.c:97 src/filemanager/hotlist.c:1157
-#: src/filemanager/hotlist.c:1174 src/filemanager/tree.c:826
+#: src/filemanager/file.c:97 src/filemanager/hotlist.c:1149
+#: src/filemanager/hotlist.c:1166 src/filemanager/tree.c:826
 msgid "DialogTitle|Delete"
 msgstr ""
 
@@ -3315,7 +3331,7 @@ msgid ""
 "Delete it recursively?"
 msgstr ""
 
-#: src/filemanager/file.c:969 src/filemanager/filegui.c:475
+#: src/filemanager/file.c:969 src/filemanager/filegui.c:476
 msgid "Non&e"
 msgstr ""
 
@@ -3352,160 +3368,160 @@ msgid ""
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1622 src/filemanager/file.c:2240
+#: src/filemanager/file.c:1636 src/filemanager/file.c:2254
 #, c-format
 msgid ""
 "Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1624
+#: src/filemanager/file.c:1638
 #, c-format
 msgid ""
 "Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1645
+#: src/filemanager/file.c:1659
 #, c-format
 msgid ""
 "Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1747
+#: src/filemanager/file.c:1761
 msgid "Cannot operate on \"..\"!"
 msgstr ""
 
-#: src/filemanager/file.c:2259
+#: src/filemanager/file.c:2273
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2324
+#: src/filemanager/file.c:2338
 #, c-format
 msgid ""
 "Cannot create special file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2336 src/filemanager/file.c:2698
+#: src/filemanager/file.c:2350 src/filemanager/file.c:2712
 #, c-format
 msgid ""
 "Cannot chown target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2351 src/filemanager/file.c:2719
+#: src/filemanager/file.c:2365 src/filemanager/file.c:2733
 #, c-format
 msgid ""
 "Cannot chmod target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2372
+#: src/filemanager/file.c:2386
 #, c-format
 msgid ""
 "Cannot open source file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2387
+#: src/filemanager/file.c:2401
 msgid "Reget failed, about to overwrite file"
 msgstr ""
 
-#: src/filemanager/file.c:2399
+#: src/filemanager/file.c:2413
 #, c-format
 msgid ""
 "Cannot fstat source file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2437
+#: src/filemanager/file.c:2451
 #, c-format
 msgid ""
 "Cannot create target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2467
+#: src/filemanager/file.c:2481
 #, c-format
 msgid ""
 "Cannot fstat target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2488
+#: src/filemanager/file.c:2502
 #, c-format
 msgid ""
 "Cannot preallocate space for target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2545
+#: src/filemanager/file.c:2559
 #, c-format
 msgid ""
 "Cannot read source file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2590
+#: src/filemanager/file.c:2604
 #, c-format
 msgid ""
 "Cannot write target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2625
+#: src/filemanager/file.c:2639
 msgid "(stalled)"
 msgstr ""
 
-#: src/filemanager/file.c:2663
+#: src/filemanager/file.c:2677
 #, c-format
 msgid ""
 "Cannot close source file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2675
+#: src/filemanager/file.c:2689
 #, c-format
 msgid ""
 "Cannot close target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2687
+#: src/filemanager/file.c:2701
 msgid "Incomplete file was retrieved. Keep it?"
 msgstr ""
 
-#: src/filemanager/file.c:2688
+#: src/filemanager/file.c:2702
 msgid "&Keep"
 msgstr ""
 
-#: src/filemanager/file.c:2784
+#: src/filemanager/file.c:2798
 #, c-format
 msgid ""
 "Cannot stat source directory \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2828
+#: src/filemanager/file.c:2842
 #, c-format
 msgid ""
 "Source \"%s\" is not a directory\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2840
+#: src/filemanager/file.c:2854
 #, c-format
 msgid ""
 "Cannot copy cyclic symbolic link\n"
 "\"%s\""
 msgstr ""
 
-#: src/filemanager/file.c:2879 src/filemanager/file.c:3363
+#: src/filemanager/file.c:2893 src/filemanager/file.c:3377
 #: src/filemanager/tree.c:773
 #, c-format
 msgid ""
@@ -3513,26 +3529,26 @@ msgid ""
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2912
+#: src/filemanager/file.c:2926
 #, c-format
 msgid ""
 "Cannot create target directory \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2936
+#: src/filemanager/file.c:2950
 #, c-format
 msgid ""
 "Cannot chown target directory \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:3135
+#: src/filemanager/file.c:3149
 #, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-#: src/filemanager/file.c:3279
+#: src/filemanager/file.c:3293
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -3569,51 +3585,51 @@ msgstr ""
 msgid "%ld B/s"
 msgstr ""
 
-#: src/filemanager/filegui.c:439
+#: src/filemanager/filegui.c:440
 msgid "New     :"
 msgstr ""
 
-#: src/filemanager/filegui.c:447
+#: src/filemanager/filegui.c:448
 msgid "Existing:"
 msgstr ""
 
-#: src/filemanager/filegui.c:456
+#: src/filemanager/filegui.c:457
 msgid "Overwrite this file?"
 msgstr ""
 
-#: src/filemanager/filegui.c:462 src/filemanager/hotlist.c:195
+#: src/filemanager/filegui.c:463 src/filemanager/hotlist.c:190
 msgid "A&ppend"
 msgstr ""
 
-#: src/filemanager/filegui.c:464
+#: src/filemanager/filegui.c:465
 msgid "&Reget"
 msgstr ""
 
-#: src/filemanager/filegui.c:467
+#: src/filemanager/filegui.c:468
 msgid "Overwrite all files?"
 msgstr ""
 
-#: src/filemanager/filegui.c:469
+#: src/filemanager/filegui.c:470
 msgid "Don't overwrite with &zero length file"
 msgstr ""
 
-#: src/filemanager/filegui.c:473
+#: src/filemanager/filegui.c:474
 msgid "&Older"
 msgstr ""
 
-#: src/filemanager/filegui.c:477
+#: src/filemanager/filegui.c:478
 msgid "S&maller"
 msgstr ""
 
-#: src/filemanager/filegui.c:479
+#: src/filemanager/filegui.c:480
 msgid "&Size differs"
 msgstr ""
 
-#: src/filemanager/filegui.c:503
+#: src/filemanager/filegui.c:504
 msgid "File exists"
 msgstr ""
 
-#: src/filemanager/filegui.c:505
+#: src/filemanager/filegui.c:506
 msgid "Background process: File exists"
 msgstr ""
 
@@ -3764,7 +3780,7 @@ msgstr ""
 msgid "Fir&st hit"
 msgstr ""
 
-#: src/filemanager/find.c:599 src/filemanager/midnight.c:200
+#: src/filemanager/find.c:599 src/filemanager/midnight.c:203
 msgid "&Tree"
 msgstr ""
 
@@ -3780,155 +3796,155 @@ msgstr ""
 msgid "Ena&ble ignore directories:"
 msgstr ""
 
-#: src/filemanager/find.c:1032 src/filemanager/find.c:1125
+#: src/filemanager/find.c:1032 src/filemanager/find.c:1126
 #, c-format
 msgid "Grepping in %s"
 msgstr ""
 
-#: src/filemanager/find.c:1307
+#: src/filemanager/find.c:1306
 msgid "Finished"
 msgstr ""
 
-#: src/filemanager/find.c:1313
+#: src/filemanager/find.c:1312
 #, c-format
 msgid "Finished (ignored %zu directory)"
 msgid_plural "Finished (ignored %zu directories)"
 msgstr[0] ""
 msgstr[1] ""
 
-#: src/filemanager/find.c:1507
+#: src/filemanager/find.c:1508
 #, c-format
 msgid "Find File: \"%s\". Content: \"%s\""
 msgstr ""
 
-#: src/filemanager/find.c:1510
+#: src/filemanager/find.c:1511
 #, c-format
 msgid "Find File: \"%s\""
 msgstr ""
 
-#: src/filemanager/find.c:1593 src/filemanager/find.c:1673
+#: src/filemanager/find.c:1594 src/filemanager/find.c:1674
 msgid "Searching"
 msgstr ""
 
-#: src/filemanager/hotlist.c:175
+#: src/filemanager/hotlist.c:170
 msgid "Change &to"
 msgstr ""
 
-#: src/filemanager/hotlist.c:178
+#: src/filemanager/hotlist.c:173
 msgid "&Free VFSs now"
 msgstr ""
 
-#: src/filemanager/hotlist.c:180
+#: src/filemanager/hotlist.c:175
 msgid "&Refresh"
 msgstr ""
 
-#: src/filemanager/hotlist.c:183
+#: src/filemanager/hotlist.c:178
 msgid "&Add current"
 msgstr ""
 
-#: src/filemanager/hotlist.c:185
+#: src/filemanager/hotlist.c:180
 msgid "&Up"
 msgstr ""
 
-#: src/filemanager/hotlist.c:189
+#: src/filemanager/hotlist.c:184
 msgid "New &group"
 msgstr ""
 
-#: src/filemanager/hotlist.c:191
+#: src/filemanager/hotlist.c:186
 msgid "New &entry"
 msgstr ""
 
-#: src/filemanager/hotlist.c:193 src/filemanager/hotlist.c:1013
-#: src/filemanager/hotlist.c:1075
+#: src/filemanager/hotlist.c:188 src/filemanager/hotlist.c:1005
+#: src/filemanager/hotlist.c:1067
 msgid "&Insert"
 msgstr ""
 
-#: src/filemanager/hotlist.c:197 src/filemanager/panelize.c:138
+#: src/filemanager/hotlist.c:192 src/filemanager/panelize.c:138
 msgid "&Remove"
 msgstr ""
 
-#: src/filemanager/hotlist.c:255
+#: src/filemanager/hotlist.c:250
 msgid "Subgroup - press ENTER to see list"
 msgstr ""
 
-#: src/filemanager/hotlist.c:772
+#: src/filemanager/hotlist.c:764
 msgid "Active VFS directories"
 msgstr ""
 
-#: src/filemanager/hotlist.c:779
+#: src/filemanager/hotlist.c:771
 msgid "Directory hotlist"
 msgstr ""
 
-#: src/filemanager/hotlist.c:788 src/filemanager/hotlist.c:1469
+#: src/filemanager/hotlist.c:780 src/filemanager/hotlist.c:1461
 msgid "Top level group"
 msgstr ""
 
-#: src/filemanager/hotlist.c:813
+#: src/filemanager/hotlist.c:805
 msgid "Directory path"
 msgstr ""
 
-#: src/filemanager/hotlist.c:849
+#: src/filemanager/hotlist.c:841
 #, c-format
 msgid "Moving %s"
 msgstr ""
 
-#: src/filemanager/hotlist.c:858
+#: src/filemanager/hotlist.c:850
 msgid "Directory label"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1012 src/filemanager/hotlist.c:1074
+#: src/filemanager/hotlist.c:1004 src/filemanager/hotlist.c:1066
 msgid "&Append"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1043
+#: src/filemanager/hotlist.c:1035
 msgid "New hotlist entry"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1043
+#: src/filemanager/hotlist.c:1035
 msgid "Directory label:"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1044
+#: src/filemanager/hotlist.c:1036
 msgid "Directory path:"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1102
+#: src/filemanager/hotlist.c:1094
 msgid "New hotlist group"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1102
+#: src/filemanager/hotlist.c:1094
 msgid "Name of new group:"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1155
+#: src/filemanager/hotlist.c:1147
 #, c-format
 msgid "Are you sure you want to remove entry \"%s\"?"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1172
+#: src/filemanager/hotlist.c:1164
 #, c-format
 msgid ""
 "Group \"%s\" is not empty.\n"
 "Remove it?"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1492
+#: src/filemanager/hotlist.c:1484
 msgid "Hotlist Load"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1494
+#: src/filemanager/hotlist.c:1486
 #, c-format
 msgid ""
 "MC was unable to write %s file,\n"
 "your old hotlist entries were not deleted"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1600
+#: src/filemanager/hotlist.c:1592
 #, c-format
 msgid "Label for \"%s\":"
 msgstr ""
 
-#: src/filemanager/hotlist.c:1612
+#: src/filemanager/hotlist.c:1604
 msgid "Add to hotlist"
 msgstr ""
 
@@ -4032,335 +4048,339 @@ msgstr ""
 msgid "Location:   %Xh:%Xh"
 msgstr ""
 
-#: src/filemanager/layout.c:164
+#: src/filemanager/layout.c:165
 msgid "&Equal split"
 msgstr ""
 
-#: src/filemanager/layout.c:165
+#: src/filemanager/layout.c:166
 msgid "&Menubar visible"
 msgstr ""
 
-#: src/filemanager/layout.c:166
+#: src/filemanager/layout.c:167
 msgid "Command &prompt"
 msgstr ""
 
-#: src/filemanager/layout.c:167
+#: src/filemanager/layout.c:168
 msgid "&Keybar visible"
 msgstr ""
 
-#: src/filemanager/layout.c:168
+#: src/filemanager/layout.c:169
 msgid "H&intbar visible"
 msgstr ""
 
-#: src/filemanager/layout.c:169
+#: src/filemanager/layout.c:170
 msgid "&XTerm window title"
 msgstr ""
 
-#: src/filemanager/layout.c:170
+#: src/filemanager/layout.c:171
 msgid "&Show free space"
 msgstr ""
 
-#: src/filemanager/layout.c:449
+#: src/filemanager/layout.c:453
 msgid "Panel split"
 msgstr ""
 
-#: src/filemanager/layout.c:450
+#: src/filemanager/layout.c:454
 msgid "Console output"
 msgstr ""
 
-#: src/filemanager/layout.c:454
+#: src/filemanager/layout.c:458
 msgid "&Vertical"
 msgstr ""
 
-#: src/filemanager/layout.c:455
+#: src/filemanager/layout.c:459
 msgid "&Horizontal"
 msgstr ""
 
-#: src/filemanager/layout.c:461
+#: src/filemanager/layout.c:465
 msgid "Output lines:"
 msgstr ""
 
-#: src/filemanager/layout.c:514
+#: src/filemanager/layout.c:518
 msgid "Layout"
 msgstr ""
 
-#: src/filemanager/midnight.c:197
+#: src/filemanager/midnight.c:200
 msgid "File listin&g"
 msgstr ""
 
-#: src/filemanager/midnight.c:198
+#: src/filemanager/midnight.c:201
 msgid "&Quick view"
 msgstr ""
 
-#: src/filemanager/midnight.c:199
+#: src/filemanager/midnight.c:202
 msgid "&Info"
 msgstr ""
 
-#: src/filemanager/midnight.c:204
+#: src/filemanager/midnight.c:207
 msgid "&Listing format..."
 msgstr ""
 
-#: src/filemanager/midnight.c:205
+#: src/filemanager/midnight.c:208
 msgid "&Sort order..."
 msgstr ""
 
-#: src/filemanager/midnight.c:206
+#: src/filemanager/midnight.c:209
 msgid "&Filter..."
 msgstr ""
 
-#: src/filemanager/midnight.c:208
+#: src/filemanager/midnight.c:211
 msgid "&Encoding..."
 msgstr ""
 
-#: src/filemanager/midnight.c:212
+#: src/filemanager/midnight.c:215
 msgid "FT&P link..."
 msgstr ""
 
-#: src/filemanager/midnight.c:215
+#: src/filemanager/midnight.c:218
 msgid "S&hell link..."
 msgstr ""
 
-#: src/filemanager/midnight.c:218
+#: src/filemanager/midnight.c:221
 msgid "S&FTP link..."
 msgstr ""
 
-#: src/filemanager/midnight.c:221
+#: src/filemanager/midnight.c:224
 msgid "SM&B link..."
 msgstr ""
 
-#: src/filemanager/midnight.c:223
+#: src/filemanager/midnight.c:226
 msgid "Paneli&ze"
 msgstr ""
 
-#: src/filemanager/midnight.c:225
+#: src/filemanager/midnight.c:228
 msgid "&Rescan"
 msgstr ""
 
-#: src/filemanager/midnight.c:237
+#: src/filemanager/midnight.c:240
 msgid "&View"
 msgstr ""
 
-#: src/filemanager/midnight.c:238
+#: src/filemanager/midnight.c:241
 msgid "Vie&w file..."
 msgstr ""
 
-#: src/filemanager/midnight.c:239
+#: src/filemanager/midnight.c:242
 msgid "&Filtered view"
 msgstr ""
 
-#: src/filemanager/midnight.c:241
+#: src/filemanager/midnight.c:244
 msgid "&Copy"
 msgstr ""
 
-#: src/filemanager/midnight.c:242
+#: src/filemanager/midnight.c:245
 msgid "C&hmod"
 msgstr ""
 
-#: src/filemanager/midnight.c:243
+#: src/filemanager/midnight.c:246
 msgid "&Link"
 msgstr ""
 
-#: src/filemanager/midnight.c:244
+#: src/filemanager/midnight.c:247
 msgid "&Symlink"
 msgstr ""
 
-#: src/filemanager/midnight.c:247
+#: src/filemanager/midnight.c:250
 msgid "Relative symlin&k"
 msgstr ""
 
-#: src/filemanager/midnight.c:248
+#: src/filemanager/midnight.c:251
 msgid "Edit s&ymlink"
 msgstr ""
 
-#: src/filemanager/midnight.c:249
+#: src/filemanager/midnight.c:252
 msgid "Ch&own"
 msgstr ""
 
-#: src/filemanager/midnight.c:251
+#: src/filemanager/midnight.c:254
 msgid "&Advanced chown"
 msgstr ""
 
-#: src/filemanager/midnight.c:252
+#: src/filemanager/midnight.c:255
 msgid "&Rename/Move"
 msgstr ""
 
-#: src/filemanager/midnight.c:253
+#: src/filemanager/midnight.c:256
 msgid "&Mkdir"
 msgstr ""
 
-#: src/filemanager/midnight.c:255
+#: src/filemanager/midnight.c:258
 msgid "&Quick cd"
 msgstr ""
 
-#: src/filemanager/midnight.c:257
+#: src/filemanager/midnight.c:260
 msgid "Select &group"
 msgstr ""
 
-#: src/filemanager/midnight.c:258
+#: src/filemanager/midnight.c:261
 msgid "U&nselect group"
 msgstr ""
 
-#: src/filemanager/midnight.c:259
+#: src/filemanager/midnight.c:262
 msgid "&Invert selection"
 msgstr ""
 
-#: src/filemanager/midnight.c:261
+#: src/filemanager/midnight.c:264
 msgid "E&xit"
 msgstr ""
 
-#: src/filemanager/midnight.c:277
+#: src/filemanager/midnight.c:280
 msgid "&User menu"
 msgstr ""
 
-#: src/filemanager/midnight.c:278
+#: src/filemanager/midnight.c:281
 msgid "&Directory tree"
 msgstr ""
 
-#: src/filemanager/midnight.c:279
+#: src/filemanager/midnight.c:282
 msgid "&Find file"
 msgstr ""
 
-#: src/filemanager/midnight.c:280
+#: src/filemanager/midnight.c:283
 msgid "S&wap panels"
 msgstr ""
 
-#: src/filemanager/midnight.c:281
+#: src/filemanager/midnight.c:284
 msgid "Switch &panels on/off"
 msgstr ""
 
-#: src/filemanager/midnight.c:283
+#: src/filemanager/midnight.c:286
 msgid "&Compare directories"
 msgstr ""
 
-#: src/filemanager/midnight.c:285
+#: src/filemanager/midnight.c:288
 msgid "C&ompare files"
 msgstr ""
 
-#: src/filemanager/midnight.c:288
+#: src/filemanager/midnight.c:291
 msgid "E&xternal panelize"
 msgstr ""
 
-#: src/filemanager/midnight.c:289
+#: src/filemanager/midnight.c:292
 msgid "Show directory s&izes"
 msgstr ""
 
-#: src/filemanager/midnight.c:291
+#: src/filemanager/midnight.c:294
 msgid "Command &history"
 msgstr ""
 
-#: src/filemanager/midnight.c:292
+#: src/filemanager/midnight.c:297
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
+#: src/filemanager/midnight.c:299
 msgid "Di&rectory hotlist"
 msgstr ""
 
-#: src/filemanager/midnight.c:294
+#: src/filemanager/midnight.c:301
 msgid "&Active VFS list"
 msgstr ""
 
-#: src/filemanager/midnight.c:297
+#: src/filemanager/midnight.c:304
 msgid "&Background jobs"
 msgstr ""
 
-#: src/filemanager/midnight.c:299
+#: src/filemanager/midnight.c:306
 msgid "Screen lis&t"
 msgstr ""
 
-#: src/filemanager/midnight.c:304
+#: src/filemanager/midnight.c:311
 msgid "&Undelete files (ext2fs only)"
 msgstr ""
 
-#: src/filemanager/midnight.c:307
+#: src/filemanager/midnight.c:314
 msgid "&Listing format edit"
 msgstr ""
 
-#: src/filemanager/midnight.c:314
+#: src/filemanager/midnight.c:321
 msgid "Edit &extension file"
 msgstr ""
 
-#: src/filemanager/midnight.c:315
+#: src/filemanager/midnight.c:322
 msgid "Edit &menu file"
 msgstr ""
 
-#: src/filemanager/midnight.c:318
+#: src/filemanager/midnight.c:325
 msgid "Edit hi&ghlighting group file"
 msgstr ""
 
-#: src/filemanager/midnight.c:331
+#: src/filemanager/midnight.c:338
 msgid "&Configuration..."
 msgstr ""
 
-#: src/filemanager/midnight.c:332
+#: src/filemanager/midnight.c:339
 msgid "&Layout..."
 msgstr ""
 
-#: src/filemanager/midnight.c:333
+#: src/filemanager/midnight.c:340
 msgid "&Panel options..."
 msgstr ""
 
-#: src/filemanager/midnight.c:335
+#: src/filemanager/midnight.c:342
 msgid "C&onfirmation..."
 msgstr ""
 
-#: src/filemanager/midnight.c:337
+#: src/filemanager/midnight.c:344
 msgid "&Appearance..."
 msgstr ""
 
-#: src/filemanager/midnight.c:339
+#: src/filemanager/midnight.c:346
 msgid "&Display bits..."
 msgstr ""
 
-#: src/filemanager/midnight.c:342
+#: src/filemanager/midnight.c:349
 msgid "&Virtual FS..."
 msgstr ""
 
-#: src/filemanager/midnight.c:444
+#: src/filemanager/midnight.c:451
 msgid "Panels:"
 msgstr ""
 
-#: src/filemanager/midnight.c:1015
+#: src/filemanager/midnight.c:1064
 #, c-format
 msgid "You have %zu opened screen. Quit anyway?"
 msgid_plural "You have %zu opened screens. Quit anyway?"
 msgstr[0] ""
 msgstr[1] ""
 
-#: src/filemanager/midnight.c:1018 src/filemanager/midnight.c:1024
+#: src/filemanager/midnight.c:1067 src/filemanager/midnight.c:1073
 #: src/filemanager/panel.c:2817
 msgid "The Midnight Commander"
 msgstr ""
 
-#: src/filemanager/midnight.c:1025
+#: src/filemanager/midnight.c:1074
 msgid "Do you really want to quit the Midnight Commander?"
 msgstr ""
 
-#: src/filemanager/midnight.c:1590
+#: src/filemanager/midnight.c:1643
 msgid "&Above"
 msgstr ""
 
-#: src/filemanager/midnight.c:1590
+#: src/filemanager/midnight.c:1643
 msgid "&Left"
 msgstr ""
 
-#: src/filemanager/midnight.c:1591
+#: src/filemanager/midnight.c:1644
 msgid "&Below"
 msgstr ""
 
-#: src/filemanager/midnight.c:1591
+#: src/filemanager/midnight.c:1644
 msgid "&Right"
 msgstr ""
 
-#: src/filemanager/midnight.c:1602
+#: src/filemanager/midnight.c:1655
 msgid "ButtonBar|Menu"
 msgstr ""
 
-#: src/filemanager/midnight.c:1603 src/viewer/display.c:90
+#: src/filemanager/midnight.c:1656 src/viewer/display.c:90
 msgid "ButtonBar|View"
 msgstr ""
 
-#: src/filemanager/midnight.c:1606 src/filemanager/tree.c:1173
+#: src/filemanager/midnight.c:1659 src/filemanager/tree.c:1173
 msgid "ButtonBar|RenMov"
 msgstr ""
 
-#: src/filemanager/midnight.c:1607 src/filemanager/tree.c:1176
+#: src/filemanager/midnight.c:1660 src/filemanager/tree.c:1176
 msgid "ButtonBar|Mkdir"
 msgstr ""
 
@@ -4541,7 +4561,12 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
-#: src/filemanager/panel.c:4465
+#: src/filemanager/panel.c:3282 src/filemanager/panel.c:4402
+#: src/filemanager/panel.c:4450 src/viewer/actions_cmd.c:332
+msgid "Cannot read directory contents"
+msgstr ""
+
+#: src/filemanager/panel.c:4504
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
@@ -4662,20 +4687,20 @@ msgstr ""
 msgid "Internal bug: Double start of link area"
 msgstr ""
 
-#: src/help.c:635 src/help.c:1091
+#: src/help.c:634 src/help.c:1090
 #, c-format
 msgid "Cannot find node %s in help file"
 msgstr ""
 
-#: src/help.c:1106
+#: src/help.c:1105
 msgid "Help"
 msgstr ""
 
-#: src/help.c:1129
+#: src/help.c:1128
 msgid "ButtonBar|Index"
 msgstr ""
 
-#: src/help.c:1130
+#: src/help.c:1129
 msgid "ButtonBar|Prev"
 msgstr ""
 
@@ -4748,7 +4773,7 @@ msgstr ""
 msgid "Home directory path is not absolute"
 msgstr ""
 
-#: src/main.c:497
+#: src/main.c:493
 #, c-format
 msgid ""
 "\n"
@@ -4772,30 +4797,30 @@ msgstr ""
 msgid "%b %e %H:%M"
 msgstr ""
 
-#: src/setup.c:1293
+#: src/setup.c:1289
 #, c-format
 msgid ""
 "Cannot save file %s:\n"
 "%s"
 msgstr ""
 
-#: src/subshell/common.c:433
+#: src/subshell/common.c:439
 msgid ""
 "GNU Midnight Commander is already\n"
 "running on this terminal.\n"
 "Subshell support will be disabled."
 msgstr ""
 
-#: src/subshell/common.c:1079
+#: src/subshell/common.c:1085
 #, c-format
 msgid "Cannot open named pipe %s\n"
 msgstr ""
 
-#: src/subshell/common.c:1268
+#: src/subshell/common.c:1274
 msgid "The shell is still active. Quit anyway?"
 msgstr ""
 
-#: src/subshell/common.c:1370
+#: src/subshell/common.c:1374
 #, c-format
 msgid "Warning: Cannot change to %s.\n"
 msgstr ""
@@ -5000,18 +5025,18 @@ msgid ""
 "%s"
 msgstr ""
 
-#: src/vfs/extfs/extfs.c:651
+#: src/vfs/extfs/extfs.c:626
 #, c-format
 msgid ""
 "Cannot open %s archive\n"
 "%s"
 msgstr ""
 
-#: src/vfs/extfs/extfs.c:656 src/vfs/extfs/extfs.c:661
+#: src/vfs/extfs/extfs.c:631 src/vfs/extfs/extfs.c:636
 msgid "Inconsistent extfs archive"
 msgstr ""
 
-#: src/vfs/extfs/extfs.c:1441
+#: src/vfs/extfs/extfs.c:1416
 #, c-format
 msgid "Warning: cannot open %s directory\n"
 msgstr ""
@@ -5021,74 +5046,74 @@ msgstr ""
 msgid "fish: Disconnecting from %s"
 msgstr ""
 
-#: src/vfs/fish/fish.c:561
+#: src/vfs/fish/fish.c:560
 msgid "fish: Waiting for initial line..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:571
+#: src/vfs/fish/fish.c:570
 msgid "Sorry, we cannot do password authenticated connections for now."
 msgstr ""
 
-#: src/vfs/fish/fish.c:579
+#: src/vfs/fish/fish.c:578
 #, c-format
 msgid "fish: Password is required for %s"
 msgstr ""
 
-#: src/vfs/fish/fish.c:587
+#: src/vfs/fish/fish.c:586
 msgid "fish: Sending password..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:624
+#: src/vfs/fish/fish.c:623
 msgid "fish: Sending initial line..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:635
+#: src/vfs/fish/fish.c:634
 msgid "fish: Handshaking version..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:646
+#: src/vfs/fish/fish.c:645
 msgid "fish: Getting host info..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:768
+#: src/vfs/fish/fish.c:767
 #, c-format
 msgid "fish: Reading directory %s..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:953 src/vfs/ftpfs/ftpfs.c:1845
+#: src/vfs/fish/fish.c:952 src/vfs/ftpfs/ftpfs.c:1857
 #: src/vfs/undelfs/undelfs.c:392
 #, c-format
 msgid "%s: done."
 msgstr ""
 
-#: src/vfs/fish/fish.c:960 src/vfs/ftpfs/ftpfs.c:1792
+#: src/vfs/fish/fish.c:959 src/vfs/ftpfs/ftpfs.c:1804
 #: src/vfs/undelfs/undelfs.c:395
 #, c-format
 msgid "%s: failure"
 msgstr ""
 
-#: src/vfs/fish/fish.c:1018
+#: src/vfs/fish/fish.c:1017
 #, c-format
 msgid "fish: store %s: sending command..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:1042
+#: src/vfs/fish/fish.c:1041
 msgid "fish: Local read failed, sending zeros"
 msgstr ""
 
-#: src/vfs/fish/fish.c:1061
+#: src/vfs/fish/fish.c:1060
 msgid "fish: storing file"
 msgstr ""
 
-#: src/vfs/fish/fish.c:1131
+#: src/vfs/fish/fish.c:1130
 msgid "Aborting transfer..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:1147
+#: src/vfs/fish/fish.c:1146
 msgid "Error reported after abort."
 msgstr ""
 
-#: src/vfs/fish/fish.c:1149
+#: src/vfs/fish/fish.c:1148
 msgid "Aborted transfer would be successful."
 msgstr ""
 
@@ -5211,15 +5236,15 @@ msgstr ""
 msgid "(chdir first)"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1860
+#: src/vfs/ftpfs/ftpfs.c:1781
 msgid "ftpfs: failed; nowhere to fallback to"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1949
+#: src/vfs/ftpfs/ftpfs.c:1946
 msgid "ftpfs: storing file"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:2453
+#: src/vfs/ftpfs/ftpfs.c:2450
 msgid ""
 "~/.netrc file has incorrect mode\n"
 "Remove password or correct mode"
@@ -5253,48 +5278,48 @@ msgstr ""
 msgid "sftp: Unable to get current user name."
 msgstr ""
 
-#: src/vfs/sftpfs/connection.c:78 src/vfs/sftpfs/vfs_subclass.c:116
+#: src/vfs/sftpfs/connection.c:82 src/vfs/sftpfs/vfs_subclass.c:116
 msgid "sftp: Invalid host name."
 msgstr ""
 
-#: src/vfs/sftpfs/connection.c:110 src/vfs/sftpfs/connection.c:126
+#: src/vfs/sftpfs/connection.c:114 src/vfs/sftpfs/connection.c:130
 #, c-format
 msgid "sftp: %s"
 msgstr ""
 
-#: src/vfs/sftpfs/connection.c:131
+#: src/vfs/sftpfs/connection.c:135
 #, c-format
 msgid "sftp: making connection to %s"
 msgstr ""
 
-#: src/vfs/sftpfs/connection.c:141
+#: src/vfs/sftpfs/connection.c:145
 msgid "sftp: connection interrupted by user"
 msgstr ""
 
-#: src/vfs/sftpfs/connection.c:143
+#: src/vfs/sftpfs/connection.c:147
 #, c-format
 msgid "sftp: connection to server failed: %s"
 msgstr ""
 
-#: src/vfs/sftpfs/connection.c:277
+#: src/vfs/sftpfs/connection.c:281
 #, c-format
 msgid "sftp: Enter passphrase for %s "
 msgstr ""
 
-#: src/vfs/sftpfs/connection.c:282
+#: src/vfs/sftpfs/connection.c:286
 msgid "sftp: Passphrase is empty."
 msgstr ""
 
-#: src/vfs/sftpfs/connection.c:326
+#: src/vfs/sftpfs/connection.c:391
 #, c-format
 msgid "sftp: Enter password for %s "
 msgstr ""
 
-#: src/vfs/sftpfs/connection.c:331
+#: src/vfs/sftpfs/connection.c:396
 msgid "sftp: Password is empty."
 msgstr ""
 
-#: src/vfs/sftpfs/connection.c:394
+#: src/vfs/sftpfs/connection.c:475
 msgid "sftp: Failure establishing SSH session"
 msgstr ""
 
@@ -5302,7 +5327,7 @@ msgstr ""
 msgid "sftp: No file handler data present for reading file"
 msgstr ""
 
-#: src/vfs/sftpfs/internal.c:97
+#: src/vfs/sftpfs/internal.c:105
 #, c-format
 msgid "sftp: socket error: %s"
 msgstr ""
@@ -5316,36 +5341,36 @@ msgstr ""
 msgid "sftp: Listing done."
 msgstr ""
 
-#: src/vfs/smbfs/smbfs.c:697
+#: src/vfs/smbfs/smbfs.c:692
 #, c-format
 msgid "reconnect to %s failed"
 msgstr ""
 
-#: src/vfs/smbfs/smbfs.c:1325
+#: src/vfs/smbfs/smbfs.c:1320
 msgid "Authentication failed"
 msgstr ""
 
-#: src/vfs/smbfs/smbfs.c:1914
+#: src/vfs/smbfs/smbfs.c:1909
 #, c-format
 msgid "Error %s creating directory %s"
 msgstr ""
 
-#: src/vfs/smbfs/smbfs.c:1943
+#: src/vfs/smbfs/smbfs.c:1938
 #, c-format
 msgid "Error %s removing directory %s"
 msgstr ""
 
-#: src/vfs/smbfs/smbfs.c:2073
+#: src/vfs/smbfs/smbfs.c:2068
 #, c-format
 msgid "%s opening remote file %s"
 msgstr ""
 
-#: src/vfs/smbfs/smbfs.c:2153
+#: src/vfs/smbfs/smbfs.c:2148
 #, c-format
 msgid "%s removing remote file %s"
 msgstr ""
 
-#: src/vfs/smbfs/smbfs.c:2190
+#: src/vfs/smbfs/smbfs.c:2185
 #, c-format
 msgid "%s renaming files\n"
 msgstr ""
@@ -5462,19 +5487,19 @@ msgstr ""
 msgid "Ext2lib error"
 msgstr ""
 
-#: src/viewer/actions_cmd.c:427
+#: src/viewer/actions_cmd.c:461
 msgid "Invalid value"
 msgstr ""
 
-#: src/viewer/actions_cmd.c:628
+#: src/viewer/actions_cmd.c:655
 msgid "File was modified. Save with exit?"
 msgstr ""
 
-#: src/viewer/actions_cmd.c:629
+#: src/viewer/actions_cmd.c:656
 msgid "&Cancel quit"
 msgstr ""
 
-#: src/viewer/actions_cmd.c:634
+#: src/viewer/actions_cmd.c:661
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file?"
@@ -5562,22 +5587,22 @@ msgid ""
 "%s"
 msgstr ""
 
-#: src/viewer/lib.c:393 src/viewer/lib.c:395
+#: src/viewer/lib.c:389 src/viewer/lib.c:391
 msgid "View: "
 msgstr ""
 
-#: src/viewer/mcviewer.c:324
+#: src/viewer/mcviewer.c:329
 #, c-format
 msgid ""
 "Cannot open \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/viewer/mcviewer.c:354
+#: src/viewer/mcviewer.c:359
 msgid "Cannot view: not a regular file"
 msgstr ""
 
-#: src/viewer/mcviewer.c:389
+#: src/viewer/mcviewer.c:394
 #, c-format
 msgid ""
 "Cannot open \"%s\" in parse mode\n"
Binary files mc-4.8.23/po/mn.gmo and mc-4.8.24/po/mn.gmo differ
diff -urpN mc-4.8.23/po/mn.po mc-4.8.24/po/mn.po
--- mc-4.8.23/po/mn.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/mn.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Mongolian (http://www.transifex.com/mc/mc/language/mn/)\n"
 "Language: mn\n"
@@ -459,6 +459,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr "TERM    !\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1284,6 +1296,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1712,6 +1727,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2261,11 +2281,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2328,9 +2343,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr "   "
-
 msgid "Parameter"
 msgstr ""
 
@@ -3198,6 +3210,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3423,6 +3438,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr "   "
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "    ,    ."
 
Binary files mc-4.8.23/po/nb.gmo and mc-4.8.24/po/nb.gmo differ
diff -urpN mc-4.8.23/po/nb.po mc-4.8.24/po/nb.po
--- mc-4.8.23/po/nb.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/nb.po	2020-01-19 02:04:52.000000000 +0400
@@ -3,14 +3,15 @@
 # This file is distributed under the same license as the mc package.
 #
 # Translators:
+# Kjell Cato Heskjestad <cato@heskjestad.xyz>, 2019
 # Slava Zanko <slavazanko@gmail.com>, 2011
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
-"Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-22 05:53+0000\n"
+"Last-Translator: Kjell Cato Heskjestad <cato@heskjestad.xyz>\n"
 "Language-Team: Norwegian Bokml (http://www.transifex.com/mc/mc/language/"
 "nb/)\n"
 "Language: nb\n"
@@ -21,34 +22,34 @@ msgstr ""
 
 # "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 msgid "Warning: cannot load codepages list"
-msgstr ""
+msgstr "Advarsel: Klarte ikke laste tegnkodingsliste"
 
 msgid "7-bit ASCII"
-msgstr ""
+msgstr "7-biters ASCII"
 
 #, c-format
 msgid "Cannot translate from %s to %s"
 msgstr "Kan ikke oversette fra %s til %s"
 
 msgid "Event system already initialized"
-msgstr ""
+msgstr "Hendelsessystemet har allerede startet"
 
 msgid "Failed to initialize event system"
-msgstr ""
+msgstr "Klarte ikke starte hendelsessystemet"
 
 msgid "Event system not initialized"
-msgstr ""
+msgstr "Hendelsessystemet er ikke startet"
 
 msgid "Check input data! Some of parameters are NULL!"
-msgstr ""
+msgstr "Sjekk inndata. Noen parametre er NULL."
 
 #, c-format
 msgid "Unable to create group '%s' for events!"
-msgstr ""
+msgstr "Klarte ikke lage hendelsesgruppa %s."
 
 #, c-format
 msgid "Unable to create event '%s'!"
-msgstr ""
+msgstr "Klarte ikke lage hendelse %s."
 
 #, c-format
 msgid ""
@@ -56,26 +57,29 @@ msgid ""
 "User: %s\n"
 "Process ID: %d"
 msgstr ""
+"Fila %s redigeres allerede.\n"
+"Bruker:%s\n"
+"Prosess-ID: %d"
 
 msgid "File locked"
-msgstr ""
+msgstr "Fila er lst"
 
 msgid "&Grab lock"
-msgstr ""
+msgstr "O&verta ls"
 
 msgid "&Ignore lock"
-msgstr ""
+msgstr "&Ignorer ls"
 
 #, c-format
 msgid "Cannot create %s directory"
-msgstr ""
+msgstr "Klarte ikke opprette mappa %s"
 
 msgid "FATAL: not a directory:"
-msgstr ""
+msgstr "FATALT: ikke en mappe:"
 
 #, c-format
 msgid "An error occurred while migrating user settings: %s"
-msgstr ""
+msgstr "Det oppstod en feil under migrering av brukers oppsett: %s"
 
 #, c-format
 msgid ""
@@ -84,69 +88,82 @@ msgid ""
 "To get more info, please visit\n"
 "http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html"
 msgstr ""
+"Migrerte det gamle oppsettet fra %s\n"
+"til Freedesktops anbefalte mapper.\n"
+"For mer informasjon, se\n"
+"http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html"
 
 #, c-format
 msgid ""
 "Your old settings were migrated from %s\n"
 "to %s\n"
 msgstr ""
+"Migrerte det gamle oppsettet fra %s\n"
+"til %s\n"
 
 msgid ""
 "Number out of range (should be in byte range, 0 <= n <= 0xFF, expressed in "
 "hex)"
 msgstr ""
+"Tallet er utenfor gyldig byte-intervall (0 <= n <= 0xFF, uttrykt i heks)"
 
 msgid "Invalid character"
-msgstr ""
+msgstr "Ugyldig tegn"
 
 msgid "Unmatched quotes character"
-msgstr ""
+msgstr "Sitattegn uten make"
 
 #, c-format
 msgid ""
 "Hex pattern error at position %d:\n"
 "%s."
 msgstr ""
+"Feil i heks-mnster i posisjon %d:\n"
+"%s."
 
 msgid "Search string not found"
-msgstr ""
+msgstr "Fant ikke skestreng"
 
 msgid "Not implemented yet"
-msgstr ""
+msgstr "Ikke implementert enn"
 
 msgid "Num of replace tokens not equal to num of found tokens"
-msgstr ""
+msgstr "Antall erstatningssymboler ikke lik antall funnet-symboler"
 
 #, c-format
 msgid "Invalid token number %d"
-msgstr ""
+msgstr "Ugyldig symbolnummer %d"
 
 msgid "Regular expression error"
-msgstr ""
+msgstr "Feil i regulrt uttrykk"
 
 msgid "No&rmal"
-msgstr ""
+msgstr "&Normal"
 
 msgid "Re&gular expression"
-msgstr ""
+msgstr "&Regulrt uttrykk"
 
 msgid "He&xadecimal"
-msgstr ""
+msgstr "&Heksadesimalt"
 
 msgid "Wil&dcard search"
-msgstr ""
+msgstr "Sk med &jokertegn"
 
 #, c-format
 msgid ""
 "Unable to load '%s' skin.\n"
 "Default skin has been loaded"
 msgstr ""
+"Klarte ikke laste drakten %s.\n"
+"Lastet standarddrakten istedenfor."
 
 #, c-format
 msgid ""
 "Unable to parse '%s' skin.\n"
 "Default skin has been loaded"
 msgstr ""
+"Klarte ikke tolke drakten %s.\n"
+"Lastet standarddrakten istedenfor."
 
 #, c-format
 msgid ""
@@ -154,6 +171,9 @@ msgid ""
 "%s\n"
 "Default skin has been loaded"
 msgstr ""
+"Kan ikke bruke den 24-biters drakten %s:\n"
+"%s\n"
+"Lastet standarddrakten istedenfor."
 
 #, c-format
 msgid ""
@@ -161,21 +181,25 @@ msgid ""
 "on non-256 colors terminal.\n"
 "Default skin has been loaded"
 msgstr ""
+"Kan ikke bruke den 256-fargers drakten %s\n"
+"i terminaler som ikke har 256 farger.\n"
+"Lastet standarddrakten istedenfor."
 
 msgid "True color not supported with ncurses."
-msgstr ""
+msgstr "ncurses sttter ikke 24-biters farge"
 
 msgid "True color not supported in this slang version."
-msgstr ""
+msgstr "Denne versjonen av S-Lang sttter ikke 24-biters farge."
 
 msgid "Your terminal doesn't even seem to support 256 colors."
-msgstr ""
+msgstr "Denne terminalen ser ikke ut til  sttte 256 farger."
 
 msgid "Set COLORTERM=truecolor if your terminal really supports true colors."
 msgstr ""
+"Sett COLORTERM=truecolor hvis terminalen virkelig sttter 24-biters farge."
 
 msgid "Escape"
-msgstr ""
+msgstr "Escape"
 
 msgid "Function key 1"
 msgstr "Funksjonstast 1"
@@ -238,340 +262,356 @@ msgid "Function key 20"
 msgstr "Funksjonstast 20"
 
 msgid "Completion/M-tab"
-msgstr "Komplettering/M-tab"
+msgstr "Fullfre/M-tab"
 
 msgid "BackTab/S-tab"
-msgstr ""
+msgstr "Tab bak/S-tab"
 
 msgid "Backspace"
-msgstr ""
+msgstr "Rettetast"
 
 msgid "Up arrow"
-msgstr ""
+msgstr "Pil opp"
 
 msgid "Down arrow"
-msgstr ""
+msgstr "Pil ned"
 
 msgid "Left arrow"
-msgstr ""
+msgstr "Pil venstre"
 
 msgid "Right arrow"
-msgstr ""
+msgstr "Pil hyre"
 
 msgid "Insert"
-msgstr ""
+msgstr "Insert"
 
 msgid "Delete"
-msgstr ""
+msgstr "Delete"
 
 msgid "Home"
-msgstr ""
+msgstr "Home"
 
 msgid "End key"
-msgstr "Slutt"
+msgstr "End"
 
 msgid "Page Up"
-msgstr ""
+msgstr "Page Up"
 
 msgid "Page Down"
-msgstr ""
+msgstr "Page Down"
 
 msgid "/ on keypad"
-msgstr ""
+msgstr "/ p num. tast."
 
 msgid "* on keypad"
-msgstr "* p numerisk tastatur"
+msgstr "* p num. tast."
 
 msgid "- on keypad"
-msgstr "- p numerisk tastatur"
+msgstr "- p num. tast."
 
 msgid "+ on keypad"
-msgstr "+ p numerisk tastatur"
+msgstr "+ p num. tast."
 
 msgid "Left arrow keypad"
-msgstr "Venstrepil p numerisk tastatur"
+msgstr "Pil venstre p num.tast."
 
 msgid "Right arrow keypad"
-msgstr "Hyrepil p numerisk tastatur"
+msgstr "Pil hyre p num. tast."
 
 msgid "Up arrow keypad"
-msgstr "Pil opp p numerisk tastatur"
+msgstr "Pil opp p num. tast."
 
 msgid "Down arrow keypad"
-msgstr "Pil ned p numerisk tastatur"
+msgstr "Pil ned p num. tast."
 
 msgid "Home on keypad"
-msgstr "Hjem p numerisk tastatur"
+msgstr "Home p num. tast."
 
 msgid "End on keypad"
-msgstr "Slutt p numerisk tastatur"
+msgstr "End p num. tast."
 
 msgid "Page Down keypad"
-msgstr "Side ned p numerisk tastatur"
+msgstr "Page Down p num. tast."
 
 msgid "Page Up keypad"
-msgstr "Side opp p numerisk tastatur"
+msgstr "Page Up p num. tast."
 
 msgid "Insert on keypad"
-msgstr "Sett inn p numerisk tastatur"
+msgstr "Insert p num. tast."
 
 msgid "Delete on keypad"
-msgstr "Slett p numerisk tastatur"
+msgstr "Delete p num. tast."
 
 msgid "Enter on keypad"
-msgstr "Linjeskift p numerisk tastatur"
+msgstr "Enter p num. tast."
 
 msgid "Function key 21"
-msgstr ""
+msgstr "Funksjonstast 21"
 
 msgid "Function key 22"
-msgstr ""
+msgstr "Funksjonstast 22"
 
 msgid "Function key 23"
-msgstr ""
+msgstr "Funksjonstast 23"
 
 msgid "Function key 24"
-msgstr ""
+msgstr "Funksjonstast 24"
 
 msgid "A1 key"
-msgstr ""
+msgstr "A1-tast"
 
 msgid "C1 key"
-msgstr ""
+msgstr "C1-tast"
 
 msgid "Asterisk"
-msgstr ""
+msgstr "Asterisk"
 
 msgid "Minus"
-msgstr ""
+msgstr "Minus"
 
 msgid "Plus"
-msgstr ""
+msgstr "Pluss"
 
 msgid "Dot"
-msgstr ""
+msgstr "Punktum"
 
 msgid "Less than"
-msgstr ""
+msgstr "Mindre enn"
 
 msgid "Great than"
-msgstr ""
+msgstr "Strre enn"
 
 msgid "Equal"
-msgstr ""
+msgstr "Likhetstegn"
 
 msgid "Comma"
-msgstr ""
+msgstr "Komma"
 
 msgid "Apostrophe"
-msgstr ""
+msgstr "Apostrof"
 
 msgid "Colon"
-msgstr ""
+msgstr "Kolon"
 
 msgid "Semicolon"
-msgstr ""
+msgstr "Semikolon"
 
 msgid "Exclamation mark"
-msgstr ""
+msgstr "Utropstegn"
 
 msgid "Question mark"
-msgstr ""
+msgstr "Sprsmlstegn"
 
 msgid "Ampersand"
-msgstr ""
+msgstr "Ampersand"
 
 msgid "Dollar sign"
-msgstr ""
+msgstr "Dollartegn"
 
 msgid "Quotation mark"
-msgstr ""
+msgstr "Sitattegn"
 
 msgid "Percent sign"
-msgstr ""
+msgstr "Prosenttegn"
 
 msgid "Caret"
-msgstr ""
+msgstr "Sirkumfleks"
 
 msgid "Tilda"
-msgstr ""
+msgstr "Tilde"
 
 msgid "Prime"
-msgstr ""
+msgstr "Primtegn"
 
 msgid "Underline"
-msgstr ""
+msgstr "Understrek"
 
 msgid "Understrike"
-msgstr ""
+msgstr "Understrek"
 
 msgid "Pipe"
-msgstr ""
+msgstr "Rr"
 
 msgid "Left parenthesis"
-msgstr ""
+msgstr "Venstre parentes"
 
 msgid "Right parenthesis"
-msgstr ""
+msgstr "Hyre parentes"
 
 msgid "Left bracket"
-msgstr ""
+msgstr "Venstre klammeparentes"
 
 msgid "Right bracket"
-msgstr ""
+msgstr "Hyre klammeparentes"
 
 msgid "Left brace"
-msgstr ""
+msgstr "Venstre krllparentes"
 
 msgid "Right brace"
-msgstr ""
+msgstr "Hyre krllparentes"
 
 msgid "Enter"
-msgstr ""
+msgstr "Enter"
 
 msgid "Tab key"
-msgstr ""
+msgstr "Tabulator"
 
 msgid "Space key"
-msgstr ""
+msgstr "Mellomrom"
 
 msgid "Slash key"
-msgstr ""
+msgstr "Skrstrek"
 
 msgid "Backslash key"
-msgstr ""
+msgstr "Omvendt skrstrek"
 
 msgid "Number sign #"
-msgstr ""
+msgstr "Nummertegn #"
 
 #. TRANSLATORS: Please translate as in "at sign" (@).
 msgid "At sign"
-msgstr ""
+msgstr "Krllalfa"
 
 msgid "Ctrl"
-msgstr ""
+msgstr "Ctrl"
 
 msgid "Alt"
-msgstr ""
+msgstr "Alt"
 
 msgid "Shift"
-msgstr ""
+msgstr "Shift"
 
 msgid "The TERM environment variable is unset!\n"
-msgstr "TERM miljvariabelen er ikke satt!\n"
+msgstr "Miljvariabelen TERM mangler.\n"
+
+msgid "Cannot check SIGWINCH pipe"
+msgstr "Klarte ikke sjekke SIGWINCH-rret"
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "Klarte ikke opprette rr for SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "Klarte ikke sette opp skriveenden av SIGWINCH-rret"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "Klarte ikke sette opp leseenden av SIGWINCH-rret"
 
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
 "Check the TERM environment variable.\n"
 msgstr ""
-"Skjermstrrelse %dx%d er ikke stttet.\n"
-"Sjekk TERM miljvariabelen.\n"
+"Skjermstrrelsen %dx%d stttes ikke.\n"
+"Sjekk miljvariabelen TERM.\n"
 
 msgid "B"
-msgstr ""
+msgstr "B"
 
 msgid "kB"
-msgstr ""
+msgstr "kB"
 
 msgid "KiB"
-msgstr ""
+msgstr "KiB"
 
 msgid "MB"
-msgstr ""
+msgstr "MB"
 
 msgid "MiB"
-msgstr ""
+msgstr "MiB"
 
 msgid "GB"
-msgstr ""
+msgstr "GB"
 
 msgid "GiB"
-msgstr ""
+msgstr "GiB"
 
 msgid "Cannot create pipe descriptor"
-msgstr ""
+msgstr "Klarte ikke opprette rrdeskriptor"
 
 msgid "Cannot create pipe streams"
-msgstr ""
+msgstr "Klarte ikke opprette rrstrmmer"
 
 #, c-format
 msgid ""
 "Unexpected error in select() reading data from a child process:\n"
 "%s"
 msgstr ""
+"Uventet feil i select() ved lesing av data fra barneprosess:\n"
+"%s"
 
 #, c-format
 msgid ""
 "Unexpected error in waitpid():\n"
 "%s"
 msgstr ""
+"Uventet feil i waitpid():\n"
+"%s"
 
 msgid "Warning"
 msgstr "Advarsel"
 
 msgid "Pipe failed"
-msgstr ""
+msgstr "pipe() mislyktes"
 
 msgid "Dup failed"
-msgstr ""
+msgstr "dup() mislyktes"
 
 msgid "Error dup'ing old error pipe"
-msgstr ""
+msgstr "Klarte ikke dupe gammelt feilrr"
 
 #, c-format
 msgid "Directory cache expired for %s"
-msgstr "Katalog-cache utgtt for %s"
+msgstr "Mappehurtiglager utgtt for %s"
 
 #, c-format
 msgid "%s: %s: %s %3d%% (%lld) bytes transferred"
-msgstr ""
+msgstr "%s: %s: %s %3d%% (%lld) byte overfrt"
 
 #, c-format
 msgid "%s: %s: %s %lld bytes transferred"
-msgstr ""
+msgstr "%s: %s: %s %lld byte overfrt"
 
 msgid "Starting linear transfer..."
-msgstr "Starter liner overfring..."
+msgstr "Starter liner overfring ..."
 
 msgid "Getting file"
 msgstr "Henter fil"
 
 msgid "Changes to file lost"
-msgstr "Endringer i filen tapt"
+msgstr "Endringer i filen gikk tapt"
 
 #, c-format
 msgid "%s is not a directory\n"
-msgstr ""
+msgstr "%s er ikke en mappe\n"
 
 #, c-format
 msgid "Directory %s is not owned by you\n"
-msgstr ""
+msgstr "Du eier ikke mappa %s\n"
 
 #, c-format
 msgid "Cannot set correct permissions for directory %s\n"
-msgstr ""
+msgstr "Klarte ikke velge riktige rettigheter for mappa %s\n"
 
 #, c-format
 msgid "Cannot create temporary directory %s: %s\n"
-msgstr "Kan ikke opprette midlertidig katalog %s: %s\n"
+msgstr "Klarte ikke ikke opprette midlertidig mappe %s: %s\n"
 
 #, c-format
 msgid "Temporary files will be created in %s\n"
-msgstr ""
+msgstr "Lagrer midlertidige filer i %s\n"
 
 #, c-format
 msgid "Temporary files will not be created\n"
-msgstr ""
+msgstr "Oppretter ikke noen midlertidige filer\n"
 
 msgid "Press any key to continue..."
-msgstr "Trykk en tast for  fortsette..."
+msgstr "Trykk en tast for  fortsette ..."
 
 msgid "Cannot parse:"
-msgstr "Kunne ikke fortolke:"
+msgstr "Klarte ikke tolke:"
 
 msgid "More parsing errors will be ignored."
-msgstr "Flere fortolkningsfeil vil bli ignorert."
+msgstr "Ignorerer fremtidige fortolkningsfeil."
 
 msgid "Internal error:"
 msgstr "Intern feil:"
@@ -580,17 +620,17 @@ msgid "Password:"
 msgstr "Passord:"
 
 msgid "Screens"
-msgstr ""
+msgstr "Moduler"
 
 msgid "History"
-msgstr ""
+msgstr "Historikk"
 
 #. TRANSLATORS: no need to translate 'DialogTitle', it's just a context prefix
 msgid "DialogTitle|History cleanup"
-msgstr ""
+msgstr "DialogTitle|Tm historikk"
 
 msgid "Do you want clean this history?"
-msgstr ""
+msgstr "Vil du tmme denne historikken?"
 
 msgid "&Yes"
 msgstr "&Ja"
@@ -612,82 +652,86 @@ msgstr "Feil"
 
 #, c-format
 msgid "%s (%d)"
-msgstr ""
+msgstr "%s (%d)"
 
 msgid "&Abort"
 msgstr "&Avbryt"
 
 msgid "Displays the current version"
-msgstr "Viser nvrende versjon"
+msgstr "Vis programversjon og avslutt"
 
 msgid "Print data directory"
-msgstr "Katalog for utskriftsdata"
+msgstr "Vis datamappe"
 
 msgid "Print extended info about used data directories"
 msgstr ""
+"Vis utvidet informasjon om de aktuelle\n"
+"                                 datamappene."
 
 msgid "Print configure options"
-msgstr ""
+msgstr "Vis kompileringsoppsett"
 
 msgid "Print last working directory to specified file"
-msgstr ""
+msgstr "Skriv siste arbeidsmappe til angitt fil"
 
 msgid "<file>"
-msgstr ""
+msgstr "<fil>"
 
 msgid "Enables subshell support (default)"
-msgstr "Slr p sttte for underskall (standard)"
+msgstr "Sl p sttte for underskall (standard)"
 
 msgid "Disables subshell support"
 msgstr "Sl av sttte for underskall"
 
 msgid "Log ftp dialog to specified file"
-msgstr "Logg ftp dialogen til spesifisert fil"
+msgstr "Logg FTP-dialogen til angitt fil"
 
 msgid "Set debug level"
-msgstr "Sett feilskingsniv"
+msgstr "Velg feilskingsniv"
 
 msgid "<integer>"
-msgstr ""
+msgstr "<heltall>"
 
 msgid "Launches the file viewer on a file"
-msgstr "Starter filvisning for en fil"
+msgstr "Vis innholdet til en fil"
 
 msgid "Edit files"
-msgstr ""
+msgstr "Rediger filer"
 
 msgid "<file> ..."
-msgstr ""
+msgstr "<fil> ..."
 
 msgid "Forces xterm features"
-msgstr "Tvungen bruk av xterm funksjoner"
+msgstr "Tving bruk av xterm-funksjonalitet"
 
 msgid "Disable X11 support"
-msgstr ""
+msgstr "Sl av sttte for X11"
 
 msgid "Tries to use an old highlight mouse tracking"
-msgstr ""
+msgstr "Bruk gammel musesporing for  utheve tekst"
 
 msgid "Disable mouse support in text version"
-msgstr "Sl av mussttte i tekstversjonen"
+msgstr "Sl av musesttte i tekstutgaven"
 
 msgid "Tries to use termcap instead of terminfo"
-msgstr "Prver  bruke termcap i stedet for terminfo"
+msgstr "Bruk termcap istedenfor terminfo"
 
 msgid "To run on slow terminals"
-msgstr "For kjring p trege terminaler"
+msgstr "Terminalen er treig"
 
 msgid "Use stickchars to draw"
-msgstr "Tegn med klebende tegn"
+msgstr "Tegn opp med strektegn"
 
 msgid "Resets soft keys on HP terminals"
-msgstr "Setter tilbake myke taster p HP terminaler"
+msgstr "Tilbakestill hurtigtaster p HP-terminaler"
 
 msgid "Load definitions of key bindings from specified file"
-msgstr ""
+msgstr "Last tastaturoppsett fra angitt fil"
 
 msgid "Don't load definitions of key bindings from file, use defaults"
 msgstr ""
+"Ikke last tastaturoppsett fra fil,\n"
+"                                 bruk standard oppsett"
 
 msgid "Requests to run in black and white"
 msgstr "Be om  kjre i sort-hvitt"
@@ -696,13 +740,13 @@ msgid "Request to run in color mode"
 msgstr "Be om  kjre i fargemodus"
 
 msgid "Specifies a color configuration"
-msgstr "Spesifiserer en fargekonfigurasjon"
+msgstr "Velg et fargeoppsett"
 
 msgid "<string>"
-msgstr ""
+msgstr "<tekststreng>"
 
 msgid "Show mc with specified skin"
-msgstr ""
+msgstr "Vis mc med angitt presentasjonsdrakt"
 
 #. TRANSLATORS: don't translate keywords
 msgid ""
@@ -725,6 +769,24 @@ msgid ""
 "   Viewer:       viewnormal,viewbold, viewunderline, viewselected\n"
 "   Help:         helpnormal, helpitalic, helpbold, helplink, helpslink\n"
 msgstr ""
+"--colors NKKELORD={FORGR},{BAKGR},{ATTR}:NKKELORD2=...\n"
+"\n"
+"{FORGR}, {BAKGR} og {ATTR} kan utelates for  bruke forvalgte verdier\n"
+"\n"
+" Nkkelord:\n"
+"   Globale:      errors, disabled, reverse, gauge, header\n"
+"                 input, inputmark, inputunchanged, commandlinemark\n"
+"                 bbarhotkey, bbarbutton, statusbar\n"
+"   Filvisning:   normal, selected, marked, markselect\n"
+"   Dialogbokser: dnormal, dfocus, dhotnormal, dhotfocus, errdhotnormal,\n"
+"                 errdhotfocus\n"
+"   Menyer:       menunormal, menuhot, menusel, menuhotsel, menuinactive\n"
+"   Sprettoppmenyer: pmenunormal, pmenusel, pmenutitle\n"
+"   Tekstprogram:  editnormal, editbold, editmarked, editwhitespace,\n"
+"                 editlinestate, editbg, editframe, editframeactive\n"
+"                 editframedrag\n"
+"   Tekstviser:   viewnormal,viewbold, viewunderline, viewselected\n"
+"   Hjelp:        helpnormal, helpitalic, helpbold, helplink, helpslink\n"
 
 #. TRANSLATORS: don't translate color names and attributes
 msgid ""
@@ -739,96 +801,113 @@ msgid ""
 "Attributes:\n"
 "   bold, italic, underline, reverse, blink; append more with '+'\n"
 msgstr ""
+"Standardfarger:\n"
+"   black, gray, red, brightred, green, brightgreen, brown,\n"
+"   yellow, blue, brightblue, magenta, brightmagenta, cyan,\n"
+"   brightcyan, lightgray, white\n"
+"\n"
+"Ekstrafarger, nr 256 farger er tilgjengelige:\n"
+"   color16 til color255, eller rgb000 til rgb555 og gray0 til gray23\n"
+"\n"
+"Egenskaper:\n"
+"   bold, italic, underline, reverse, blink; legg til flere med '+'\n"
 
 msgid "Color options"
-msgstr ""
+msgstr "Fargeinnstillinger"
 
 msgid "[+lineno] file1[:lineno] [file2[:lineno]...]"
-msgstr ""
+msgstr "[+linjenr] fil1[:linjenr] [fil2[:linjenr]...]"
 
 msgid "file"
 msgstr "fil"
 
 msgid "file1 file2"
-msgstr ""
+msgstr "fil1 fil2"
 
 msgid "[this_dir] [other_panel_dir]"
-msgstr ""
+msgstr "[denne mappa] [mappa i det andre panelet]"
 
 msgid ""
 "\n"
 "Please send any bug reports (including the output of 'mc -V')\n"
 "as tickets at www.midnight-commander.org\n"
 msgstr ""
+"\n"
+"Send inn alle feilrapporter (ta med resultatet av mc -V)\n"
+"som billetter p www.midnight-commander.org\n"
 
 #, c-format
 msgid "GNU Midnight Commander %s\n"
 msgstr "GNU Midnight Commander %s\n"
 
 msgid "Main options"
-msgstr ""
+msgstr "Hovedinnstillinger"
 
 msgid "Terminal options"
-msgstr ""
+msgstr "Terminalinnstillinger"
 
 msgid "Arguments parse error!"
-msgstr ""
+msgstr "Klarte ikke tolke argumentene."
 
 msgid "No arguments given to the viewer."
-msgstr ""
+msgstr "Filviseren fikk ingen argumenter."
 
 msgid "Two files are required to envoke the diffviewer."
-msgstr ""
+msgstr "Diffviseren trenger to filnavn for  starte."
 
 msgid "Background protocol error"
-msgstr ""
+msgstr "Feil i bakgrunnsprotokoll"
 
 msgid "Reading failed"
-msgstr ""
+msgstr "Lesing mislyktes"
 
 msgid "Background process error"
-msgstr ""
+msgstr "Feil i bakgrunnsprosess"
 
 msgid "Unknown error in child"
-msgstr ""
+msgstr "Ukjent feil i barneprosess"
 
 msgid "Child died unexpectedly"
-msgstr ""
+msgstr "Barneprosessen avsluttet uventet"
 
 msgid ""
 "Background process sent us a request for more arguments\n"
 "than we can handle."
 msgstr ""
+"Bakgrunnsprosessen sendte en foresprsel for\n"
+"flere argument enn det som kan hndteres."
 
 msgid "&Dismiss"
-msgstr "Forkast"
+msgstr "&Lukk"
 
 msgid "Enter search string:"
-msgstr ""
+msgstr "Sk etter:"
 
 msgid "Cas&e sensitive"
-msgstr ""
+msgstr "Skill store/sm& bokstaver"
 
 msgid "&Backwards"
-msgstr "Bakover"
+msgstr "&Bakover"
 
 msgid "&Whole words"
-msgstr ""
+msgstr "H&ele ord"
 
 msgid "&All charsets"
-msgstr ""
+msgstr "A&lle tegnkodinger"
 
 msgid "Search"
 msgstr "Sk"
 
 msgid "Search is disabled"
-msgstr ""
+msgstr "Sk er sltt av"
 
 #, c-format
 msgid ""
 "Cannot create temporary diff file\n"
 "%s"
 msgstr ""
+"Klarte ikke opprette midlertidig diff-fil\n"
+"%s"
 
 #, c-format
 msgid ""
@@ -836,422 +915,443 @@ msgid ""
 "%s%s\n"
 "%s"
 msgstr ""
+"Klarte ikke opprette reservekopi\n"
+"%s%s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot create temporary merge file\n"
 "%s"
 msgstr ""
+"Klarte ikke opprette midlertidig flettefil\n"
+"%s"
 
 msgid "&Fastest (Assume large files)"
-msgstr ""
+msgstr "&Raskeste (anta store filer)"
 
 msgid "&Minimal (Find a smaller set of change)"
-msgstr ""
+msgstr "&Minimal (finn mindre endringssett)"
 
 msgid "Diff algorithm"
-msgstr ""
+msgstr "Diff-algoritme"
 
 msgid "Diff extra options"
-msgstr ""
+msgstr "Flere diff-innstillinger"
 
 msgid "&Ignore case"
-msgstr ""
+msgstr "Ikke skill store/sm& bokstaver"
 
 msgid "Ignore tab &expansion"
-msgstr ""
+msgstr "Ignorer endringer som skyldes &tabulator-utvidelse"
 
 msgid "Ignore &space change"
-msgstr ""
+msgstr "Ignorer endringer i antall &blanktegn"
 
 msgid "Ignore all &whitespace"
-msgstr ""
+msgstr "Ignorer a&lle blanktegn"
 
 msgid "Strip &trailing carriage return"
-msgstr ""
+msgstr "&Fjern etterflgende linjeskift-tegn"
 
 msgid "Diff Options"
-msgstr ""
+msgstr "Diff-innstillinger"
 
 msgid "Edit"
-msgstr ""
+msgstr "Redigere"
 
 msgid "Edit is disabled"
-msgstr ""
+msgstr "Redigering er sltt av"
 
 msgid "Goto line (left)"
-msgstr ""
+msgstr "G til linje (venstre)"
 
 msgid "Goto line (right)"
-msgstr ""
+msgstr "G til linje (hyre)"
 
 msgid "Enter line:"
-msgstr ""
+msgstr "Angi linje:"
 
 msgid "ButtonBar|Help"
-msgstr ""
+msgstr "ButtonBar|Hjelp"
 
 msgid "ButtonBar|Save"
-msgstr ""
+msgstr "ButtonBar|Lagre"
 
 msgid "ButtonBar|Edit"
-msgstr ""
+msgstr "ButtonBar|Redig"
 
 msgid "ButtonBar|Merge"
-msgstr ""
+msgstr "ButtonBar|Flett"
 
 msgid "ButtonBar|Search"
-msgstr ""
+msgstr "ButtonBar|Sk"
 
 msgid "ButtonBar|Options"
-msgstr ""
+msgstr "ButtonBar|Innst"
 
 msgid "ButtonBar|Quit"
-msgstr ""
+msgstr "ButtonBar|Avslut"
 
 msgid "Quit"
-msgstr "Slutt"
+msgstr "Avslutt"
 
 msgid "File(s) was modified. Save with exit?"
 msgstr ""
+"En eller flere filer er endret.\n"
+"Lagre fr avslutning?"
 
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file(s)?"
 msgstr ""
+"Midnight Commander avsluttes.\n"
+"En eller flere filer er endret. Lagre?"
 
 msgid "Diff:"
-msgstr ""
+msgstr "Diff:"
 
 #, c-format
 msgid "\"%s\" is a directory"
-msgstr ""
+msgstr "%s er en mappe"
 
 #, c-format
 msgid ""
 "Cannot stat \"%s\"\n"
 "%s"
 msgstr ""
+"stat() mislyktes for %s\n"
+"%s"
 
 msgid "Diff viewer: invalid mode"
-msgstr ""
+msgstr "Diffviser: Ugyldig modus"
 
 msgid "Two files are needed to compare"
-msgstr ""
+msgstr "Trenger to filer for  sammenligne"
 
 msgid "Choose syntax highlighting"
-msgstr ""
+msgstr "Velg syntaksutheving"
 
 msgid "< Auto >"
-msgstr ""
+msgstr "< Auto >"
 
 msgid "< Reload Current Syntax >"
-msgstr ""
+msgstr "< Last gjeldende syntaks p nytt >"
 
 #, c-format
 msgid "Loading: %3d%%"
-msgstr ""
+msgstr "Laster: %3d%%"
 
 msgid "Loading..."
-msgstr ""
+msgstr "Laster ..."
 
 #, c-format
 msgid "Cannot open %s for reading"
-msgstr ""
+msgstr "Klarte ikke pne lesetilgang til %s"
 
 msgid "Load file"
-msgstr ""
+msgstr "Last fil"
 
 #, c-format
 msgid "Error reading %s"
-msgstr ""
+msgstr "Klarte ikke lese %s"
 
 #, c-format
 msgid "Cannot get size/permissions for %s"
-msgstr ""
+msgstr "Klarte ikke hente strrelsen/rettighetene til %s"
 
 #, c-format
 msgid "\"%s\" is not a regular file"
-msgstr ""
+msgstr "%s er ikke en vanlig fil"
 
 #, c-format
 msgid ""
 "File \"%s\" is too large.\n"
 "Open it anyway?"
 msgstr ""
+"Fila %s er for stor.\n"
+"pne den likevel?"
 
 #, c-format
 msgid "Error reading from pipe: %s"
-msgstr ""
+msgstr "Klarte ikke lese fra rr: %s"
 
 #, c-format
 msgid "Cannot open pipe for reading: %s"
-msgstr ""
+msgstr "Klarte ikke pne lesetilgang til rr: %s"
 
 #, c-format
 msgid "Searching %s: %3d%%"
-msgstr ""
+msgstr "Sker %s: %3d%%"
 
 #, c-format
 msgid "Searching %s"
 msgstr "Sker etter %s"
 
 msgid "File has hard-links. Detach before saving?"
-msgstr ""
+msgstr "Fila har harde lenker. Koble fra fr lagring?"
 
 msgid "The file has been modified in the meantime. Save anyway?"
-msgstr ""
+msgstr "Fila har i mellomtida blitt endret. Lagre den likevel?"
 
 #, c-format
 msgid "Error writing to pipe: %s"
-msgstr ""
+msgstr "Klarte ikke skrive til rr: %s"
 
 #, c-format
 msgid "Cannot open pipe for writing: %s"
-msgstr ""
+msgstr "Klarte ikke pne skrivetilgang til rr: %s"
 
 #, c-format
 msgid "Cannot open file for writing: %s"
-msgstr ""
+msgstr "Klarte ikke pne skrivetilgang til fil: %s"
 
 msgid "The file you are saving does not end with a newline."
-msgstr ""
+msgstr "Fila du lagrer slutter ikke med et linjeskift-tegn."
 
 msgid "C&ontinue"
-msgstr ""
+msgstr "&Fortsett"
 
 msgid "&Do not change"
-msgstr ""
+msgstr "&Ikke endre"
 
 msgid "&Unix format (LF)"
-msgstr ""
+msgstr "&Unix-format (LF)"
 
 msgid "&Windows/DOS format (CR LF)"
-msgstr ""
+msgstr "&Windows/DOS-format (CR LF)"
 
 msgid "&Macintosh format (CR)"
-msgstr ""
+msgstr "&Macintosh-format (CR)"
 
 msgid "Enter file name:"
-msgstr ""
+msgstr "Angi filnavn:"
 
 msgid "Change line breaks to:"
-msgstr ""
+msgstr "Endre linjeskift til:"
 
 msgid "Save As"
-msgstr ""
+msgstr "Lagre som"
 
 msgid "Block is large, you may not be able to undo this action"
-msgstr ""
+msgstr "Blokka er stor, og du kan kanskje ikke angre handlinga"
 
 msgid "Collect completions"
-msgstr ""
+msgstr "Samle fullfringer"
 
 msgid "&Quick save"
-msgstr ""
+msgstr "&Rask lagring"
 
 msgid "&Safe save"
-msgstr ""
+msgstr "&Sikker lagring"
 
 msgid "&Do backups with following extension:"
-msgstr ""
+msgstr "R&eservekopier med flgende etternavn:"
 
 msgid "Check &POSIX new line"
-msgstr ""
+msgstr "Sjekk om linjeskift avslutter fil (&POSIX)"
 
 msgid "Edit Save Mode"
-msgstr ""
+msgstr "Rediger lagringsinnstillinger"
 
 msgid "Save as"
-msgstr ""
+msgstr "Lagre som"
 
 msgid "Cannot save: destination is not a regular file"
-msgstr ""
+msgstr "Kan ikke lagre: Mlet er ikke en vanlig fil"
 
 msgid "A file already exists with this name"
-msgstr ""
+msgstr "Det finnes allerede en fil som heter dette"
 
 msgid "&Overwrite"
-msgstr ""
+msgstr "&Overskriv"
 
 msgid "Cannot save file"
-msgstr ""
+msgstr "Klarte ikke lagre fil"
 
 msgid "Delete macro"
-msgstr ""
+msgstr "Slett makro"
 
 msgid "Press macro hotkey:"
-msgstr ""
+msgstr "Trykk p makroens hurtigtast:"
 
 msgid "Macro not deleted"
-msgstr ""
+msgstr "Slettet ikke makro"
 
 msgid "Save macro"
-msgstr ""
+msgstr "Lagre makro"
 
 msgid "Press the macro's new hotkey:"
-msgstr ""
+msgstr "Trykk p makroens nye hurtigtast:"
 
 msgid "Repeat last commands"
-msgstr ""
+msgstr "Gjenta siste kommandoer"
 
 msgid "Repeat times:"
-msgstr ""
+msgstr "Antall gjentakelser:"
 
 #, c-format
 msgid "Confirm save file: \"%s\""
-msgstr ""
+msgstr "Bekreft lagring til: %s"
 
 msgid "Save file"
-msgstr ""
+msgstr "Lagre fil"
 
 msgid "&Save"
-msgstr "lagre"
+msgstr "&Lagre"
 
 msgid "Load"
-msgstr ""
+msgstr "pne"
 
 msgid "Syntax file edit"
 msgstr "Redigering av syntaksfil"
 
 msgid "Which syntax file you want to edit?"
-msgstr ""
+msgstr "Hvilken syntaksfil vil du redigere?"
 
 msgid "&User"
 msgstr "&Bruker"
 
 msgid "&System wide"
-msgstr ""
+msgstr "&System"
 
 msgid "Menu edit"
-msgstr ""
+msgstr "Rediger meny"
 
 msgid "Which menu file do you want to edit?"
-msgstr ""
+msgstr "Hvilken menyfil vil du redigere?"
 
 msgid "&Local"
 msgstr "&Lokal"
 
 msgid "Replace"
-msgstr ""
+msgstr "Erstatt"
 
 #, c-format
 msgid "%ld replacements made"
-msgstr ""
+msgstr "Erstattet %ld forekomster"
 
 msgid "[NoName]"
-msgstr ""
+msgstr "[Navnls]"
 
 #, c-format
 msgid ""
 "File %s was modified.\n"
 "Save before close?"
 msgstr ""
+"Fila %s er endret.\n"
+"Lagre fr lukking?"
 
 msgid "Close file"
-msgstr ""
+msgstr "Lukk fil"
 
 #, c-format
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file %s?"
 msgstr ""
+"Midnight Commander avsluttes.\n"
+"Lagre den endrede fila %s?"
 
 msgid "This function is not implemented"
-msgstr ""
+msgstr "Denne funksjonen er ikke implementert"
 
 msgid "Copy to clipboard"
-msgstr ""
+msgstr "Kopier til utklippstavle"
 
 msgid "Unable to save to file"
-msgstr ""
+msgstr "Klarte ikke lagre til fil"
 
 msgid "Cut to clipboard"
-msgstr ""
+msgstr "Klipp ut til utklippstavle"
 
 msgid "Goto line"
-msgstr ""
+msgstr "G til linje"
 
 msgid "Save block"
-msgstr ""
+msgstr "Lagre blokk"
 
 msgid "Insert file"
-msgstr ""
+msgstr "Sett inn fil"
 
 msgid "Cannot insert file"
-msgstr ""
+msgstr "Klarte ikke sette inn fil"
 
 msgid "Sort block"
-msgstr ""
+msgstr "Sorter blokk"
 
 msgid "You must first highlight a block of text"
-msgstr ""
+msgstr "Du m frst utheve en tekstblokk"
 
 msgid "Run sort"
-msgstr ""
+msgstr "Kjr sortering"
 
 msgid "Enter sort options (see manpage) separated by whitespace:"
 msgstr ""
+"Angi sorteringsalternativer (se manualside),\n"
+"og skill dem med blanktegn:"
 
 msgid "Sort"
-msgstr ""
+msgstr "Sortering"
 
 msgid "Cannot execute sort command"
-msgstr ""
+msgstr "Klarte ikke utfre sorteringskommando"
 
 #, c-format
 msgid "Sort returned non-zero: %s"
-msgstr ""
+msgstr "Sortering gav ikke tilbake 0: %s"
 
 msgid "Paste output of external command"
-msgstr ""
+msgstr "Lim inn utdata fra ekstern kommando"
 
 msgid "Enter shell command(s):"
-msgstr ""
+msgstr "Angi skallkommando(er):"
 
 msgid "External command"
-msgstr ""
+msgstr "Ekstern kommando"
 
 msgid "Cannot execute command"
-msgstr ""
+msgstr "Klarte ikke kjre kommando"
 
 msgid "mail -s <subject> -c <cc> <to>"
-msgstr ""
+msgstr "mail -s <emne> -c <kopi til> <til>"
 
 msgid "To"
-msgstr ""
+msgstr "Til"
 
 msgid "Subject"
-msgstr ""
+msgstr "Emne"
 
 msgid "Copies to"
-msgstr ""
+msgstr "Kopimottaker(e)"
 
 msgid "Mail"
-msgstr ""
+msgstr "E-post"
 
 msgid "Insert literal"
-msgstr ""
+msgstr "Sett inn direkteverdi"
 
 msgid "Press any key:"
-msgstr ""
+msgstr "Trykk en vilkrlig tast:"
 
 msgid ""
 "Current text was modified without a file save.\n"
 "Continue discards these changes"
 msgstr ""
+"Denne teksten er endret, men ikke lagret.\n"
+"Endringene kasseres hvis du fortsetter."
 
 msgid "In se&lection"
-msgstr ""
+msgstr "I &utvalg"
 
 msgid "&Find all"
-msgstr ""
+msgstr "&Finn alle"
 
 msgid "Enter replacement string:"
-msgstr ""
+msgstr "Erstatt med:"
 
 msgid "Replace with:"
-msgstr ""
+msgstr "Erstatt med:"
 
 msgid "&Replace"
 msgstr "E&rstatt"
@@ -1263,7 +1363,7 @@ msgid "&Skip"
 msgstr "&Hopp over"
 
 msgid "Confirm replace"
-msgstr ""
+msgstr "Bekreft erstatning"
 
 msgid "Cancel"
 msgstr "Avbryt"
@@ -1272,432 +1372,441 @@ msgid ""
 "Current text was modified without a file save.\n"
 "Continue discards these changes."
 msgstr ""
+"Denne teksten er endret, men ikke lagret.\n"
+"Endringene kasseres hvis du fortsetter."
 
 msgid "NoName"
-msgstr ""
+msgstr "Navnls"
 
 msgid "&Open file..."
-msgstr "&pne fil..."
+msgstr "&pne fil ..."
 
 msgid "&New"
-msgstr ""
+msgstr "&Ny"
 
 msgid "&Close"
-msgstr ""
+msgstr "L&ukk"
+
+msgid "&History..."
+msgstr "Historikk "
 
 msgid "Save &as..."
-msgstr ""
+msgstr "Lagre &som ..."
 
 msgid "&Insert file..."
-msgstr ""
+msgstr "Sett &inn fil ..."
 
 msgid "Cop&y to file..."
-msgstr ""
+msgstr "&Kopier til fil ... "
 
 msgid "&User menu..."
-msgstr ""
+msgstr "&Brukermeny ..."
 
 msgid "A&bout..."
-msgstr ""
+msgstr "&Om ..."
 
 msgid "&Quit"
-msgstr "Avslutt"
+msgstr "A&vslutt"
 
 msgid "&Undo"
-msgstr ""
+msgstr "&Angre"
 
 msgid "&Redo"
-msgstr ""
+msgstr "&Gjenta"
 
 msgid "&Toggle ins/overw"
-msgstr ""
+msgstr "S&ett inn/overskriv"
 
 msgid "To&ggle mark"
-msgstr ""
+msgstr "Ma&rkering av/p"
 
 msgid "&Mark columns"
-msgstr ""
+msgstr "Marker s&yler"
 
 msgid "Mark &all"
-msgstr ""
+msgstr "Marker a&lt"
 
 msgid "Unmar&k"
-msgstr ""
+msgstr "F&jern markering"
 
 msgid "Cop&y"
-msgstr ""
+msgstr "&Kopier"
 
 msgid "Mo&ve"
-msgstr ""
+msgstr "&Flytt"
 
 msgid "&Delete"
 msgstr "&Slett"
 
 msgid "Co&py to clipfile"
-msgstr ""
+msgstr "K&opier til utklippsfil"
 
 msgid "&Cut to clipfile"
-msgstr ""
+msgstr "Kli&pp ut til utklippsfil"
 
 msgid "Pa&ste from clipfile"
-msgstr ""
+msgstr "Li&m inn fra utklippsfil"
 
 msgid "&Beginning"
-msgstr ""
+msgstr "G til f&ilstart"
 
 msgid "&End"
-msgstr ""
+msgstr "G til filsl&utt"
 
 msgid "&Search..."
-msgstr ""
+msgstr "&Sk ..."
 
 msgid "Search &again"
-msgstr ""
+msgstr "Sk &igjen"
 
 msgid "&Replace..."
-msgstr ""
+msgstr "&Erstatt ..."
 
 msgid "&Toggle bookmark"
-msgstr ""
+msgstr "&Bokmerke av/p"
 
 msgid "&Next bookmark"
-msgstr ""
+msgstr "&Neste bokmerke"
 
 msgid "&Prev bookmark"
-msgstr ""
+msgstr "&Forrige bokmerke"
 
 msgid "&Flush bookmarks"
-msgstr ""
+msgstr "&Tm bokmerke"
 
 msgid "&Go to line..."
-msgstr ""
+msgstr "&G til linje ..."
 
 msgid "&Toggle line state"
-msgstr ""
+msgstr "Linje&stolpe av/p"
 
 msgid "Go to matching &bracket"
-msgstr ""
+msgstr "G til tilhrende &parentes"
 
 msgid "Toggle s&yntax highlighting"
-msgstr ""
+msgstr "S&yntaksutheving av/p"
 
 msgid "&Find declaration"
-msgstr ""
+msgstr "Finn &deklarasjon"
 
 msgid "Back from &declaration"
-msgstr ""
+msgstr "&Tilbake fra deklarasjon"
 
 msgid "For&ward to declaration"
-msgstr ""
+msgstr "&Fram til deklarasjon"
 
 msgid "Encod&ing..."
-msgstr ""
+msgstr "Tegn&koding ..."
 
 msgid "&Refresh screen"
-msgstr ""
+msgstr "Oppdater visnin&g"
 
 msgid "&Start/Stop record macro"
-msgstr ""
+msgstr "Start/stopp &makroopptak"
 
 msgid "Delete macr&o..."
-msgstr ""
+msgstr "Sl&ett makro ..."
 
 msgid "Record/Repeat &actions"
-msgstr ""
+msgstr "Ta opp/gjenta &handlinger"
 
 msgid "S&pell check"
-msgstr ""
+msgstr "Sta&vekontroll"
 
 msgid "C&heck word"
-msgstr ""
+msgstr "K&ontroller ord"
 
 msgid "Change spelling &language..."
-msgstr ""
+msgstr "Stavekontrollens spr&k"
 
 msgid "&Mail..."
-msgstr ""
+msgstr "E&-post ..."
 
 msgid "Insert &literal..."
-msgstr ""
+msgstr "Sett inn &direkteverdi ..."
 
 msgid "Insert &date/time"
-msgstr ""
+msgstr "Sett inn dato/&tid"
 
 msgid "&Format paragraph"
-msgstr ""
+msgstr "Formater &avsnitt"
 
 msgid "&Sort..."
-msgstr ""
+msgstr "&Sorter ..."
 
 msgid "&Paste output of..."
-msgstr ""
+msgstr "Lim inn &utdata fra ..."
 
 msgid "&External formatter"
-msgstr ""
+msgstr "&Ekstern formatering"
 
 msgid "&Move"
-msgstr "&Flytt"
+msgstr "Fl&ytt"
 
 msgid "&Resize"
-msgstr ""
+msgstr "Endre &strrelse"
 
 msgid "&Toggle fullscreen"
-msgstr ""
+msgstr "F&ullskjerm av/p"
 
 msgid "&Next"
-msgstr ""
+msgstr "&Neste"
 
 msgid "&Previous"
-msgstr ""
+msgstr "F&orrige"
 
 msgid "&List..."
-msgstr ""
+msgstr "&Vindusliste ..."
 
 msgid "&General..."
-msgstr ""
+msgstr "&Generelle ..."
 
 msgid "Save &mode..."
-msgstr ""
+msgstr "L&agring ..."
 
 msgid "Learn &keys..."
-msgstr ""
+msgstr "L&r taster ..."
 
 msgid "Syntax &highlighting..."
-msgstr ""
+msgstr "S&yntaksutheving ..."
 
 msgid "S&yntax file"
-msgstr ""
+msgstr "Syntaks&fil"
 
 msgid "&Menu file"
-msgstr ""
+msgstr "&Menyfil"
 
 msgid "&Save setup"
-msgstr "Lagre oppsett"
+msgstr "&Lagre oppsett"
 
 msgid "&File"
-msgstr ""
+msgstr "&Fil"
 
 msgid "&Edit"
-msgstr ""
+msgstr "&Rediger"
 
 msgid "&Search"
-msgstr ""
+msgstr "&Sk"
 
 msgid "&Command"
-msgstr ""
+msgstr "&Kommando"
 
 msgid "For&mat"
-msgstr ""
+msgstr "For&mat"
 
 msgid "&Window"
-msgstr ""
+msgstr "&Vindu"
 
 msgid "&Options"
-msgstr ""
+msgstr "&Innstillinger"
 
 msgid "&None"
-msgstr ""
+msgstr "&Ingen"
 
 msgid "&Dynamic paragraphing"
-msgstr ""
+msgstr "&Dynamiske avsnitt"
 
 msgid "Type &writer wrap"
-msgstr ""
+msgstr "&Skrivemaskinsbryting"
 
 msgid "Wrap mode"
-msgstr "Brytningsmodus"
+msgstr "Tekstbryting"
 
 msgid "Tabulation"
-msgstr ""
+msgstr "Tabulasjon"
 
 msgid "&Fake half tabs"
-msgstr "&Falske halvtabulatorer"
+msgstr "Falske &halvtabulatorer"
 
 msgid "&Backspace through tabs"
-msgstr "&Tilbake gjennom tabulatorer"
+msgstr "&Rettetast tar alle tab."
 
 msgid "Fill tabs with &spaces"
-msgstr "fyll tabulatorer med mellomrom"
+msgstr "Fyll tab. &med mellomrom"
 
 msgid "Tab spacing:"
-msgstr ""
+msgstr "Tabulatoravstand:"
 
 msgid "Other options"
-msgstr ""
+msgstr "Andre innstillinger"
 
 msgid "&Return does autoindent"
-msgstr "Linjeskift utfrer autoindentering"
+msgstr "A&utoinnrykk etter linjeskift"
 
 msgid "Confir&m before saving"
-msgstr "bekreft fr lagring"
+msgstr "&Bekreft fr lagring"
 
 msgid "Save file &position"
-msgstr ""
+msgstr "&Lagre filposisjon"
 
 msgid "&Visible trailing spaces"
-msgstr ""
+msgstr "Vis &etterflgende mellomrom"
 
 msgid "Visible &tabs"
-msgstr ""
+msgstr "Vis &tabulatorer"
 
 msgid "Synta&x highlighting"
-msgstr "syntaksutheving"
+msgstr "S&yntaksutheving"
 
 msgid "C&ursor after inserted block"
-msgstr ""
+msgstr "Mark&r etter innsatt blokk"
 
 msgid "Pers&istent selection"
-msgstr ""
+msgstr "&Varig utvalg"
 
 msgid "Cursor be&yond end of line"
-msgstr ""
+msgstr "Mar&kr forbi linjeslutt"
 
 msgid "&Group undo"
-msgstr ""
+msgstr "An&gre grupperte handlinger"
 
 msgid "Word wrap line length:"
-msgstr ""
+msgstr "Bryt tekst etter:"
 
 msgid "Editor options"
-msgstr ""
+msgstr "Redigeringsinnstillinger"
 
 msgid ""
 "A user friendly text editor\n"
 "written for the Midnight Commander."
 msgstr ""
+"Et brukervennlig skriveprogram\n"
+"skrevet for Midnight Commander."
 
 msgid "Copyright (C) 1996-2019 the Free Software Foundation"
-msgstr ""
+msgstr "Opphavsrett (C) 1996-2019 the Free Software Foundation"
 
 msgid "About"
-msgstr ""
+msgstr "Om"
 
 msgid "Open files"
-msgstr ""
+msgstr "pne filer"
 
 msgid "Edit: "
-msgstr ""
+msgstr "Rediger:"
 
 msgid "ButtonBar|Mark"
-msgstr ""
+msgstr "ButtonBar|Marker"
 
 msgid "ButtonBar|Replac"
-msgstr ""
+msgstr "ButtonBar|Erstat"
 
 msgid "ButtonBar|Copy"
-msgstr ""
+msgstr "ButtonBar|Kopier"
 
 msgid "ButtonBar|Move"
-msgstr ""
+msgstr "ButtonBar|Flytt"
 
 msgid "ButtonBar|Delete"
-msgstr ""
+msgstr "ButtonBar|Slett"
 
 msgid "ButtonBar|PullDn"
-msgstr ""
+msgstr "ButtonBar|TrkNed"
 
 msgid "Breton"
-msgstr ""
+msgstr "Bretonsk"
 
 msgid "Czech"
-msgstr ""
+msgstr "Tsjekkisk"
 
 msgid "Welsh"
-msgstr ""
+msgstr "Walisisk"
 
 msgid "Danish"
-msgstr ""
+msgstr "Dansk"
 
 msgid "German"
-msgstr ""
+msgstr "Tysk"
 
 msgid "Greek"
-msgstr ""
+msgstr "Gresk"
 
 msgid "English"
-msgstr ""
+msgstr "Engelsk"
 
 msgid "British English"
-msgstr ""
+msgstr "Britisk-engelsk"
 
 msgid "Canadian English"
-msgstr ""
+msgstr "Kanadisk-engelsk"
 
 msgid "American English"
-msgstr ""
+msgstr "Amerikansk-engelsk"
 
 msgid "Esperanto"
-msgstr ""
+msgstr "Esperanto"
 
 msgid "Spanish"
-msgstr ""
+msgstr "Spansk"
 
 msgid "Faroese"
-msgstr ""
+msgstr "Frysk"
 
 msgid "French"
-msgstr ""
+msgstr "Fransk"
 
 msgid "Italian"
-msgstr ""
+msgstr "Italiensk"
 
 msgid "Dutch"
-msgstr ""
+msgstr "Nederlandsk"
 
 msgid "Norwegian"
-msgstr ""
+msgstr "Norsk"
 
 msgid "Polish"
-msgstr ""
+msgstr "Polsk"
 
 msgid "Portuguese"
-msgstr ""
+msgstr "Portugisisk"
 
 msgid "Romanian"
-msgstr ""
+msgstr "Rumensk"
 
 msgid "Russian"
-msgstr ""
+msgstr "Russisk"
 
 msgid "Slovak"
-msgstr ""
+msgstr "Slovakisk"
 
 msgid "Swedish"
-msgstr ""
+msgstr "Svensk"
 
 msgid "Ukrainian"
-msgstr ""
+msgstr "Ukrainsk"
 
 msgid "&Add word"
-msgstr ""
+msgstr "&Legg til"
 
 msgid "Language"
-msgstr ""
+msgstr "Sprk"
 
 msgid "Misspelled"
-msgstr ""
+msgstr "Feilstavet"
 
 msgid "Check word"
-msgstr ""
+msgstr "Sjekk ord"
 
 msgid "Suggest"
-msgstr ""
+msgstr "Forslag"
 
 msgid "Select language"
-msgstr ""
+msgstr "Velg sprk"
 
 msgid "Load syntax file"
-msgstr ""
+msgstr "Last syntaksfil"
 
 #, c-format
 msgid ""
 "Cannot open file %s\n"
 "%s"
 msgstr ""
+"Klarte ikke pne fila %s\n"
+"%s"
 
 #, c-format
 msgid "Error in file %s on line %d"
-msgstr ""
+msgstr "Feil i fil %s p linje %d"
 
 msgid ""
 "The Commander can't change to the directory that\n"
@@ -1705,16 +1814,27 @@ msgid ""
 "deleted your working directory, or given yourself\n"
 "extra access permissions with the \"su\" command?"
 msgstr ""
+"Midnight Commander klarte ikke bytte til mappa\n"
+"som underskallet pstr du str i. Kanskje er\n"
+"arbeidsmappa slettet, eller du har gitt deg selv\n"
+"ekstra rettigheter med su-kommandoen?"
 
 #, c-format
 msgid "Cannot fetch a local copy of %s"
-msgstr ""
+msgstr "Klarte ikke hente en lokal kopi av %s"
 
 msgid "The shell is already running a command"
+msgstr "Skallet kjrer allerede en kommando"
+
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
 msgstr ""
+"Ikke en xterm eller Linux-konsoll;\n"
+"kan ikke bytte om panelene."
 
 msgid "Type 'exit' to return to the Midnight Commander"
-msgstr ""
+msgstr "Skriv exit for  g tilbake til Midnight Commander"
 
 msgid "Set &all"
 msgstr "Sett &alle"
@@ -1723,7 +1843,7 @@ msgid "S&kip"
 msgstr "&Hopp over"
 
 msgid "&Set"
-msgstr "&Sett"
+msgstr "&Bruk"
 
 msgid "owner"
 msgstr "eier"
@@ -1738,19 +1858,21 @@ msgid "Flag"
 msgstr "Flagg"
 
 msgid "Chown advanced command"
-msgstr ""
+msgstr "Avansert chown-kommando"
 
 #, c-format
 msgid ""
 "Cannot chmod \"%s\"\n"
 "%s"
 msgstr ""
+"chmod mislyktes for %s\n"
+"%s"
 
 msgid "&Ignore"
-msgstr ""
+msgstr "&Ignorer"
 
 msgid "Ignore &all"
-msgstr ""
+msgstr "Ignorer &alle"
 
 msgid "&Retry"
 msgstr "&Prv igjen"
@@ -1760,174 +1882,176 @@ msgid ""
 "Cannot chown \"%s\"\n"
 "%s"
 msgstr ""
+"chmod mislyktes for %s\n"
+"%s"
 
 msgid "< Default >"
-msgstr ""
+msgstr "< Standard >"
 
 msgid "Skins"
-msgstr ""
+msgstr "Drakter"
 
 msgid "Other 8 bit"
-msgstr "Andre 8-bit"
+msgstr "Andre 8-biters"
 
 msgid "Running"
-msgstr ""
+msgstr "Kjrer"
 
 msgid "Stopped"
-msgstr "Stoppet"
+msgstr "Pause"
 
 msgid "&Never"
-msgstr "aldri"
+msgstr "Aldr&i"
 
 msgid "On dum&b terminals"
-msgstr ""
+msgstr "I &dumme terminaler"
 
 msgid "Alwa&ys"
-msgstr "alltid"
+msgstr "A&lltid"
 
 msgid "File operations"
-msgstr ""
+msgstr "Filoperasjoner"
 
 msgid "&Verbose operation"
-msgstr "utvidet operasjon"
+msgstr "Ordrike operas&joner"
 
 msgid "Compute tota&ls"
-msgstr ""
+msgstr "Beregn &totaler"
 
 msgid "Classic pro&gressbar"
-msgstr ""
+msgstr "Klassisk &framdriftsviser"
 
 msgid "Mkdi&r autoname"
-msgstr ""
+msgstr "Fyll inn sti for &mkdir"
 
 msgid "&Preallocate space"
-msgstr ""
+msgstr "Forh&ndsreserver plass"
 
 msgid "Esc key mode"
-msgstr ""
+msgstr "Escape-modus"
 
 msgid "S&ingle press"
-msgstr ""
+msgstr "&Ett trykk"
 
 msgid "Timeout:"
-msgstr ""
+msgstr "Tidsavbrudd:"
 
 msgid "Pause after run"
-msgstr ""
+msgstr "Pause etter kjring"
 
 msgid "Use internal edi&t"
-msgstr ""
+msgstr "&Rediger internt "
 
 msgid "Use internal vie&w"
-msgstr ""
+msgstr "&Vis internt"
 
 msgid "A&sk new file name"
-msgstr ""
+msgstr "Spr etter n&ytt filnavn"
 
 msgid "Auto m&enus"
-msgstr ""
+msgstr "Start med &brukermenyen"
 
 msgid "&Drop down menus"
-msgstr "Nedtrekksmenyer"
+msgstr "Trekk &ned menyer"
 
 msgid "S&hell patterns"
-msgstr ""
+msgstr "Skallm&nstre"
 
 msgid "Co&mplete: show all"
-msgstr ""
+msgstr "F&ullfring: vis alle"
 
 msgid "Rotating d&ash"
-msgstr ""
+msgstr "Roterende stre&k"
 
 msgid "Cd follows lin&ks"
-msgstr ""
+msgstr "&Cd flger lenker"
 
 msgid "Sa&fe delete"
-msgstr ""
+msgstr "&Sikker sletting"
 
 msgid "Safe overwrite"
-msgstr ""
+msgstr "Sikker overskrivin&g"
 
 msgid "A&uto save setup"
-msgstr ""
+msgstr "Autolagre o&ppsettet"
 
 msgid "Configure options"
-msgstr "Alternativer for konfigurasjon"
+msgstr "Sett opp innstillinger"
 
 msgid "Skin:"
-msgstr ""
+msgstr "Drakt:"
 
 msgid "Appearance"
-msgstr ""
+msgstr "Presentasjonsdrakt"
 
 msgid "Case &insensitive"
-msgstr ""
+msgstr "Ikke skill store&/sm bokst."
 
 msgid "Use panel sort mo&de"
-msgstr ""
+msgstr "&Panelets sorteringsrekkef."
 
 msgid "Show mi&ni-status"
-msgstr ""
+msgstr "Vis &mini-statuslinje"
 
 msgid "Use SI si&ze units"
-msgstr ""
+msgstr "Bruk &SI-enheter"
 
 msgid "Mi&x all files"
-msgstr ""
+msgstr "&Bland alle filer"
 
 msgid "Show &backup files"
-msgstr ""
+msgstr "Vis &reservekopier"
 
 msgid "Show &hidden files"
-msgstr ""
+msgstr "Vis sk&julte filer"
 
 msgid "&Fast dir reload"
-msgstr "rask katalogoppfrisking"
+msgstr "Ras&k mappeoppdatering"
 
 msgid "Ma&rk moves down"
-msgstr ""
+msgstr "Flytt &ned etter markering"
 
 msgid "Re&verse files only"
-msgstr ""
+msgstr "&Inverter kun filer"
 
 msgid "Simple s&wap"
-msgstr ""
+msgstr "&Enkel panelombytting"
 
 msgid "A&uto save panels setup"
-msgstr ""
+msgstr "Au&tolagre paneloppsettet"
 
 msgid "Navigation"
-msgstr ""
+msgstr "Navigasjon"
 
 msgid "L&ynx-like motion"
-msgstr "lynx-lignende bevegelse"
+msgstr "Lyn&x-lignende mappebytting"
 
 msgid "Pa&ge scrolling"
-msgstr ""
+msgstr "R&ull sider"
 
 msgid "Center &scrolling"
-msgstr ""
+msgstr "Sentrer mark&r ved rulling"
 
 msgid "&Mouse page scrolling"
-msgstr ""
+msgstr "Mus ru&ller sider"
 
 msgid "File highlight"
-msgstr ""
+msgstr "Utheving av filer"
 
 msgid "File &types"
-msgstr ""
+msgstr "&Filtyper"
 
 msgid "&Permissions"
-msgstr ""
+msgstr "Retti&gheter"
 
 msgid "Quick search"
-msgstr ""
+msgstr "Hurtigsk"
 
 msgid "Panel options"
-msgstr ""
+msgstr "Panelinnstillinger"
 
 msgid "Information"
-msgstr ""
+msgstr "Informasjon"
 
 msgid ""
 "Using the fast reload option may not reflect the exact\n"
@@ -1935,30 +2059,34 @@ msgid ""
 "manual reload of the directory. See the man page for\n"
 "the details."
 msgstr ""
+"Innstillingen Rask mappeoppdatering gjr at\n"
+"utlistinga ikke ndvendigvis gjenspeiler mappeinnholdet.\n"
+"I s fall m du oppdatere utlistinga manuelt.\n"
+"Se manualsiden for mer informasjon."
 
 msgid "&Full file list"
 msgstr "&Full filliste"
 
 msgid "&Brief file list:"
-msgstr ""
+msgstr "&Kort filliste:"
 
 msgid "&Long file list"
 msgstr "&Lang filliste"
 
 msgid "&User defined:"
-msgstr "&Brukerdefinert:"
+msgstr "&Selvvalgt:"
 
 msgid "columns"
-msgstr ""
+msgstr "kolonner"
 
 msgid "User &mini status"
-msgstr ""
+msgstr "Selvvalgt &ministatus"
 
 msgid "Listing format"
-msgstr ""
+msgstr "Utlistingsformat"
 
 msgid "Executable &first"
-msgstr ""
+msgstr "&Kjrbare frst"
 
 msgid "&Reverse"
 msgstr "&Reversert"
@@ -1968,82 +2096,82 @@ msgstr "Sorteringsrekkeflge"
 
 #. TRANSLATORS: no need to translate 'Confirmation', it's just a context prefix
 msgid "Confirmation|&Delete"
-msgstr ""
+msgstr "Conformation|&Sletting"
 
 msgid "Confirmation|O&verwrite"
-msgstr ""
+msgstr "Confirmation|O&verskriving"
 
 msgid "Confirmation|&Execute"
-msgstr ""
+msgstr "Confirmation|&Kjring"
 
 msgid "Confirmation|E&xit"
-msgstr ""
+msgstr "Confirmation|Avsl&utting"
 
 msgid "Confirmation|Di&rectory hotlist delete"
-msgstr ""
+msgstr "Confirmation|Tmming av &favorittmapper"
 
 msgid "Confirmation|&History cleanup"
-msgstr ""
+msgstr "Confirmation|Tmming av &historikk"
 
 msgid "Confirmation"
-msgstr ""
+msgstr "Be om bekreftelse fr"
 
 msgid "&UTF-8 output"
-msgstr ""
+msgstr "&UTF-8-utdata"
 
 msgid "&Full 8 bits output"
-msgstr ""
+msgstr "&Full 8-biters utdata"
 
 msgid "&ISO 8859-1"
-msgstr ""
+msgstr "&ISO 8859-1"
 
 msgid "7 &bits"
-msgstr ""
+msgstr "7-&biters"
 
 msgid "F&ull 8 bits input"
-msgstr "F&ull 8-bits input"
+msgstr "F&ull 8-biters inndata"
 
 msgid "Display bits"
-msgstr ""
+msgstr "Tegnkoding"
 
 msgid "Input / display codepage:"
-msgstr "Koding for inndata /visning:"
+msgstr "Tegnkoding for inndata/visning:"
 
 msgid "Directory tree"
-msgstr ""
+msgstr "Mappetre"
 
 msgid "Timeout for freeing VFSs (sec):"
-msgstr ""
+msgstr "Tidsavbrudd for VFS-frakobling (sek):"
 
 msgid "FTP anonymous password:"
-msgstr ""
+msgstr "FTP: Passord for anonym tilkobling:"
 
 msgid "FTP directory cache timeout (sec):"
-msgstr ""
+msgstr "FTP: Tidsavbrudd for mappehurtiglager (sek):"
 
 msgid "&Always use ftp proxy:"
-msgstr ""
+msgstr "Bruk alltid &mellomtjener for FTP:"
 
 msgid "&Use ~/.netrc"
-msgstr "Br&uk ~/.netrc"
+msgstr "Bruk ~/.&netrc"
 
 msgid "Use &passive mode"
-msgstr ""
+msgstr "Bruk &passiv modus"
 
 msgid "Use passive mode over pro&xy"
-msgstr ""
+msgstr "Bruk pa&ssiv modus via mellomtjener"
 
 msgid "Virtual File System Setting"
-msgstr ""
+msgstr "Innstillinger for virtuelt filsystem"
 
 msgid "cd"
 msgstr "cd"
 
 msgid "Quick cd"
-msgstr "Rask katalogskift"
+msgstr "Bytt til en annen mappe"
 
 msgid "Existing filename (filename symlink will point to):"
-msgstr "Eksisterende filnavn (filnavnet symlinken skal peke til):"
+msgstr "Eksisterende filnavn (filnavnet symlenken skal peke til):"
 
 msgid "Symbolic link filename:"
 msgstr "Filnavn for symbolsk lenke:"
@@ -2058,10 +2186,10 @@ msgid "&Resume"
 msgstr "&Gjenoppta"
 
 msgid "&Kill"
-msgstr "&Drep"
+msgstr "&Tving stopp"
 
 msgid "Background jobs"
-msgstr ""
+msgstr "Bakgrunnsjobber"
 
 #, c-format
 msgid "Password for \\\\%s\\%s"
@@ -2074,55 +2202,55 @@ msgid "Username:"
 msgstr "Brukernavn:"
 
 msgid "SMB authentication"
-msgstr ""
+msgstr "SMB-autentisering"
 
 msgid "set &user ID on execution"
-msgstr ""
+msgstr "Kjr med &brukers rettigheter"
 
 msgid "set &group ID on execution"
-msgstr ""
+msgstr "Kjr med &gruppens rettigheter"
 
 msgid "stick&y bit"
-msgstr ""
+msgstr "&Klebrig bit"
 
 msgid "&read by owner"
-msgstr ""
+msgstr "Eier kan &lese"
 
 msgid "&write by owner"
-msgstr ""
+msgstr "Eier kan &skrive"
 
 msgid "e&xecute/search by owner"
-msgstr ""
+msgstr "Eier kan kj&re/entre"
 
 msgid "rea&d by group"
-msgstr ""
+msgstr "G&ruppe kan lese"
 
 msgid "write by grou&p"
-msgstr ""
+msgstr "Gr&uppe kan skrive"
 
 msgid "execu&te/search by group"
-msgstr ""
+msgstr "Gru&ppe kan kjre/entre"
 
 msgid "read &by others"
-msgstr ""
+msgstr "A&ndre kan lese"
 
 msgid "wr&ite by others"
-msgstr ""
+msgstr "An&dre kan skrive"
 
 msgid "execute/searc&h by others"
-msgstr ""
+msgstr "Andr&e kan kjre/entre"
 
 msgid "Name:"
-msgstr ""
+msgstr "Navn:"
 
 msgid "Permissions (octal):"
-msgstr ""
+msgstr "Rettigheter (oktale)"
 
 msgid "Owner name:"
-msgstr ""
+msgstr "Eiers navn:"
 
 msgid "Group name:"
-msgstr ""
+msgstr "Gruppens navn:"
 
 msgid "&Marked all"
 msgstr "&Markert alle"
@@ -2134,10 +2262,10 @@ msgid "C&lear marked"
 msgstr "B&lank ut markerte"
 
 msgid "Chmod command"
-msgstr "Chmod kommando"
+msgstr "Chmod-kommando"
 
 msgid "Permission"
-msgstr "Rettighet"
+msgstr "Rettigheter"
 
 msgid "File"
 msgstr "Fil"
@@ -2161,10 +2289,10 @@ msgid "Size"
 msgstr "Strrelse"
 
 msgid "Chown command"
-msgstr ""
+msgstr "Chown-kommando"
 
 msgid "User name"
-msgstr ""
+msgstr "Brukernavn"
 
 msgid "<Unknown user>"
 msgstr "<Ukjent bruker>"
@@ -2173,86 +2301,86 @@ msgid "<Unknown group>"
 msgstr "<Ukjent gruppe>"
 
 msgid "Enter machine name (F1 for details):"
-msgstr ""
+msgstr "Skriv inn tjenernavn (F1 for hjelp):"
 
 msgid "Files tagged, want to cd?"
-msgstr "Filer merket, vil du skifte katalog?"
+msgstr "Merket filer. Vil du bytte mappe?"
 
 msgid "Cannot change directory"
-msgstr " Kunne ikke skifte katalog"
+msgstr " Klarte ikke bytte mappe"
 
 msgid "Filter"
-msgstr ""
+msgstr "Filtrer"
 
 msgid "Set expression for filtering filenames"
-msgstr ""
+msgstr "Skriv inn et filtreringsmnster for filnavn"
 
 #, c-format
 msgid "Link %s to:"
 msgstr "Lag lenke fra %s til:"
 
 msgid "Link"
-msgstr ""
+msgstr "Lenke"
 
 #, c-format
 msgid "link: %s"
-msgstr ""
+msgstr "lenke: %s"
 
 #, c-format
 msgid "symlink: %s"
-msgstr ""
+msgstr "symlenke: %s"
 
 #, c-format
 msgid "Cannot chdir to \"%s\""
-msgstr ""
+msgstr "Klarte ikke bytte mappe til %s"
 
 msgid "View file"
-msgstr ""
+msgstr "Vis fil"
 
 msgid "Filename:"
-msgstr ""
+msgstr "Filnavn:"
 
 msgid "Filtered view"
-msgstr ""
+msgstr "Filtrert visning"
 
 msgid "Filter command and arguments:"
-msgstr ""
+msgstr "Filterkommando og argumenter:"
 
 msgid "Edit file"
-msgstr ""
+msgstr "Rediger fil"
 
 msgid "Create a new Directory"
-msgstr "Opprett en ny katalog"
+msgstr "Opprett en ny mappe"
 
 msgid "Enter directory name:"
-msgstr ""
+msgstr "Skriv inn mappenavn:"
 
 msgid "Extension file edit"
 msgstr "Rediger utvidelsesfil"
 
 msgid "Which extension file you want to edit?"
-msgstr ""
+msgstr "Hvilken utvidelsesfil vil du redigere?"
 
 msgid "&System Wide"
 msgstr "&System"
 
 msgid "Highlighting groups file edit"
-msgstr ""
+msgstr "Rediger uthevingsgrupper"
 
 msgid "Which highlighting file you want to edit?"
-msgstr ""
+msgstr "Hvilken uthevingsfil vil du redigere?"
 
 msgid "Compare directories"
-msgstr ""
+msgstr "Sammenlign mapper"
 
 msgid "Select compare method:"
-msgstr ""
+msgstr "Velg sammenligningsmte:"
 
 msgid "&Quick"
 msgstr "&Rask"
 
 msgid "&Size only"
-msgstr "Bare &Strrelse"
+msgstr "Kun &strrelse"
 
 msgid "&Thorough"
 msgstr "&Grundig"
@@ -2261,89 +2389,89 @@ msgid ""
 "Both panels should be in the listing mode\n"
 "to use this command"
 msgstr ""
-
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
+"Begge panelene m vre i utlistingsmodus\n"
+"for  bruke denne kommandoen"
 
 #, c-format
 msgid "'%s' is not a symbolic link"
-msgstr ""
+msgstr "%s er ikke ei symbolsk lenke"
 
 #, c-format
 msgid "Symlink '%s' points to:"
-msgstr ""
+msgstr "Symlenke %s peker til:"
 
 msgid "Edit symlink"
-msgstr ""
+msgstr "Rediger symlenke"
 
 #, c-format
 msgid "edit symlink, unable to remove %s: %s"
-msgstr ""
+msgstr "redigere symlenke: klarte ikke fjerne %s: %s "
 
 #, c-format
 msgid "edit symlink: %s"
-msgstr ""
+msgstr "redigere symlenke: %s"
 
 msgid "FTP to machine"
-msgstr ""
+msgstr "Koble til FTP"
 
 msgid "SFTP to machine"
-msgstr ""
+msgstr "Koble til SFTP"
 
 msgid "Shell link to machine"
-msgstr ""
+msgstr "Koble til skall"
 
 msgid "SMB link to machine"
-msgstr ""
+msgstr "Koble til SMB"
 
 msgid "Undelete files on an ext2 file system"
-msgstr ""
+msgstr "Gjenopprett filer i et ext2-filsystem"
 
 msgid ""
 "Enter device (without /dev/) to undelete\n"
 "files on: (F1 for details)"
 msgstr ""
+"Angi enhet (uten /dev/) der filene\n"
+"skal gjenopprettes (F1 for hjelp): "
 
 msgid "Directory scanning"
-msgstr ""
+msgstr "Leter igjennom mappe"
 
 msgid "Setup"
-msgstr ""
+msgstr "Oppsett"
 
 #, c-format
 msgid "Setup saved to %s"
-msgstr ""
+msgstr "Lagret oppsett til %s"
 
 #, c-format
 msgid "Unable to save setup to %s"
-msgstr ""
+msgstr "Klarte ikke lagre oppsettet til %s"
 
 msgid "Cannot execute commands on non-local filesystems"
-msgstr ""
+msgstr "Kan ikke kjre kommandoer i eksterne filsystemer"
 
 #, c-format
 msgid ""
 "Cannot chdir to \"%s\"\n"
 "%s"
 msgstr ""
-
-msgid "Cannot read directory contents"
-msgstr ""
+"Klarte ikke bytte mappe til %s\n"
+"%s"
 
 msgid "Parameter"
-msgstr ""
+msgstr "Parameter"
 
 #, c-format
 msgid ""
 "Cannot create temporary command file\n"
 "%s"
 msgstr ""
+"Klarte ikke opprette midlertidig kommandofil\n"
+"%s"
 
 #, c-format
 msgid " %s%s file error"
-msgstr ""
+msgstr "Feil i fila %s%s "
 
 #, c-format
 msgid ""
@@ -2351,38 +2479,43 @@ msgid ""
 "the installation failed. Please fetch a fresh copy from the Midnight "
 "Commander package."
 msgstr ""
+"Formatet til fila %smc.ext ble endret i versjon 3.0. Det ser ut som om "
+"installasjonen mislyktes. Hent en oppdatert kopi fra Midnight Commander-"
+"pakken."
 
 #, c-format
 msgid "%s file error"
-msgstr ""
+msgstr "Feil i fila %s"
 
 #, c-format
 msgid ""
 "The format of the %s file has changed with version 3.0. You may either want "
 "to copy it from %smc.ext or use that file as an example of how to write it."
 msgstr ""
+"Formatet til fila %s ble endret i versjon 3.0. Du kan enten hente det fra "
+"%smc.ext eller bruke fila som en eksempelfil."
 
 msgid "DialogTitle|Copy"
-msgstr ""
+msgstr "DialogTitle|Kopier"
 
 msgid "DialogTitle|Move"
-msgstr ""
+msgstr "DialogTitle|Flytt"
 
 msgid "DialogTitle|Delete"
-msgstr ""
+msgstr "DialogTitle|Slette?"
 
 msgid "FileOperation|Copy"
-msgstr ""
+msgstr "FileOperation|Kopier"
 
 msgid "FileOperation|Move"
-msgstr ""
+msgstr "FileOperation|Flytt"
 
 msgid "FileOperation|Delete"
-msgstr ""
+msgstr "FileOperation|Slett"
 
 #, no-c-format
 msgid "%o %f%n\"%s\"%m"
-msgstr ""
+msgstr "%o %f%n\"%s\"%m"
 
 #, no-c-format
 msgid "%o %d %f%m"
@@ -2392,13 +2525,13 @@ msgid "files"
 msgstr "filer"
 
 msgid "directory"
-msgstr "katalog"
+msgstr "mappe"
 
 msgid "directories"
-msgstr "kataloger"
+msgstr "mapper"
 
 msgid "files/directories"
-msgstr "filer/kataloger"
+msgstr "filer/mapper"
 
 #. TRANSLATORS: keep leading space here to split words in Copy/Move dialog
 msgid " with source mask:"
@@ -2409,34 +2542,45 @@ msgid ""
 "Cannot stat hardlink source file \"%s\"\n"
 "%s"
 msgstr ""
+"stat() mislyktes for den harde lenkas kildefil %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot create target hardlink \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke opprette den harde lenkas mlfil %s\n"
+"%s"
 
 #, c-format
 msgid "Cannot create target hardlink \"%s\""
-msgstr ""
+msgstr "Klarte ikke opprette den harde lenkas mlfil %s"
 
 #, c-format
 msgid ""
 "Cannot read source link \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke lese lenkas kilde %s\n"
+"%s"
 
 msgid ""
 "Cannot make stable symlinks across non-local filesystems:\n"
 "\n"
 "Option Stable Symlinks will be disabled"
 msgstr ""
+"Symlenker kan ikke peke til eksterne filsystemer:\n"
+"\n"
+"Innstillingen Fiks symlenker sls av"
 
 #, c-format
 msgid ""
 "Cannot create target symlink \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke opprette symlenkas ml %s\n"
+"%s"
 
 #, c-format
 msgid ""
@@ -2445,6 +2589,10 @@ msgid ""
 "\"%s\"\n"
 "are the same directory"
 msgstr ""
+"%s\n"
+"og\n"
+"%s\n"
+"er samme mappe"
 
 #, c-format
 msgid ""
@@ -2453,15 +2601,21 @@ msgid ""
 "\"%s\"\n"
 "are the same file"
 msgstr ""
+"%s\n"
+"og\n"
+"%s\n"
+"er samme fil"
 
 msgid "Ski&p all"
-msgstr ""
+msgstr "H&opp over alle"
 
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
 "Delete it recursively?"
 msgstr ""
+"Mappa %s er ikke tom.\n"
+"Vil du slette den med alt innhold?"
 
 #, c-format
 msgid ""
@@ -2469,127 +2623,166 @@ msgid ""
 "Directory \"%s\" not empty.\n"
 "Delete it recursively?"
 msgstr ""
+"Bakgrunnsprosess:\n"
+"Mappa %s er ikke tom.\n"
+"VIl du slette den med alt innhold?"
 
 msgid "Non&e"
-msgstr "ing&En"
+msgstr "&Ingen"
 
 #, c-format
 msgid ""
 "Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke slette fila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot stat file \"%s\"\n"
 "%s"
 msgstr ""
+"stat() mislyktes for fila %s\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
-msgstr ""
+msgstr "Klarte ikke overskrive mappa %s"
 
 #, c-format
 msgid ""
 "Cannot move file \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke flytte fila %s til %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke slette mappa %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke overskrive mappa %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke overskrive fila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke flytte mappa %s til %s\n"
+"%s"
 
 msgid "Cannot operate on \"..\"!"
-msgstr ""
+msgstr "Kan ikke gjre noe med ..."
 
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
 "%s"
 msgstr ""
+"stat() mislyktes for kildefila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot create special file \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke opprette spesialfila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot chown target file \"%s\"\n"
 "%s"
 msgstr ""
+"chown mislyktes for fila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot chmod target file \"%s\"\n"
 "%s"
 msgstr ""
+"chmod mislyktes for fila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot open source file \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke pne kildefila %s\n"
+"%s"
 
 msgid "Reget failed, about to overwrite file"
-msgstr ""
+msgstr "Klarte ikke flette og skal n overskrive fila"
 
 #, c-format
 msgid ""
 "Cannot fstat source file \"%s\"\n"
 "%s"
 msgstr ""
+"fstat() mislyktes for kildefila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot create target file \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke opprette mlfila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot fstat target file \"%s\"\n"
 "%s"
 msgstr ""
+"fstat() mislyktes for mlfila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot preallocate space for target file \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke forhndsreserve plass til mlfila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot read source file \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke lese kildefila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot write target file \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke skrive mlfila %s\n"
+"%s"
 
 msgid "(stalled)"
 msgstr "(venter)"
@@ -2599,15 +2792,19 @@ msgid ""
 "Cannot close source file \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke lukke kildefila %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot close target file \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke lukke mlfila %s\n"
+"%s"
 
 msgid "Incomplete file was retrieved. Keep it?"
-msgstr "Ikke komplett fil ble hentet. Beholde den?"
+msgstr "Leste ufullstendig fil. Beholde den?"
 
 msgid "&Keep"
 msgstr "&Behold"
@@ -2617,57 +2814,69 @@ msgid ""
 "Cannot stat source directory \"%s\"\n"
 "%s"
 msgstr ""
+"stat() mislyktes for kildemappa %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Source \"%s\" is not a directory\n"
 "%s"
 msgstr ""
+"Kilden %s er ikke en mappe\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot copy cyclic symbolic link\n"
 "\"%s\""
 msgstr ""
+"Klarte ikke kopiere syklisk symlenke\n"
+"%s"
 
 #, c-format
 msgid ""
 "Destination \"%s\" must be a directory\n"
 "%s"
 msgstr ""
+"Mlet %s m vre en mappe\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot create target directory \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke opprette mlmappa %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot chown target directory \"%s\"\n"
 "%s"
 msgstr ""
+"chown mislyktes for mlmappa %s\n"
+"%s"
 
 #, c-format
 msgid "Directories: %zu, total size: %s"
-msgstr ""
+msgstr "Mapper: %zu, total strrelse: %s"
 
 msgid "Sorry, I could not put the job in background"
-msgstr ""
+msgstr "Klarte ikke legge jobben i bakgrunnen"
 
 msgid "S&uspend"
-msgstr ""
+msgstr "&Pause"
 
 msgid "Con&tinue"
-msgstr "Fortsett"
+msgstr "&Fortsett"
 
 #, c-format
 msgid "%d:%02d.%02d"
-msgstr ""
+msgstr "%d:%02d.%02d"
 
 #, c-format
 msgid "ETA %s"
-msgstr ""
+msgstr "Gjenstr %s"
 
 #, c-format
 msgid "%.2f MB/s"
@@ -2682,72 +2891,72 @@ msgid "%ld B/s"
 msgstr "%ld B/s"
 
 msgid "New     :"
-msgstr ""
+msgstr "Ny      :"
 
 msgid "Existing:"
-msgstr ""
+msgstr "Eksisterende:"
 
 msgid "Overwrite this file?"
-msgstr ""
+msgstr "Overskriv denne fila?"
 
 msgid "A&ppend"
-msgstr "legg til"
+msgstr "Legg &til"
 
 msgid "&Reget"
-msgstr "Hent igjen"
+msgstr "&Flett"
 
 msgid "Overwrite all files?"
-msgstr ""
+msgstr "Overskriv alle filene?"
 
 msgid "Don't overwrite with &zero length file"
-msgstr ""
+msgstr "Ikke overskriv hvis kildefila har lengde &0"
 
 msgid "&Older"
-msgstr ""
+msgstr "&Eldre"
 
 msgid "S&maller"
-msgstr ""
+msgstr "&Mindre"
 
 msgid "&Size differs"
-msgstr ""
+msgstr "Strrelse forskjelli&g"
 
 msgid "File exists"
-msgstr ""
+msgstr "Fila finnes"
 
 msgid "Background process: File exists"
-msgstr ""
+msgstr "Bakgrunnsprosess: Fila finnes"
 
 #, c-format
 msgid "Files processed: %zu/%zu"
-msgstr ""
+msgstr "Filer behandlet: %zu/%zu"
 
 #, c-format
 msgid "Files processed: %zu"
-msgstr ""
+msgstr "Filer behandlet: %zu"
 
 #, c-format
 msgid "Time: %s %s"
-msgstr ""
+msgstr "Tid: %s %s"
 
 #, c-format
 msgid "Time: %s %s (%s)"
-msgstr ""
+msgstr "Tid: %s %s (%s)"
 
 #, c-format
 msgid "Time: %s"
-msgstr ""
+msgstr "Tid: %s"
 
 #, c-format
 msgid "Time: %s (%s)"
-msgstr ""
+msgstr "Tid: %s (%s)"
 
 #, c-format
 msgid " Total: %s "
-msgstr ""
+msgstr " Totalt: %s "
 
 #, c-format
 msgid " Total: %s/%s "
-msgstr ""
+msgstr " Totalt: %s/%s "
 
 msgid "Source"
 msgstr "Kilde"
@@ -2756,90 +2965,90 @@ msgid "Target"
 msgstr "Ml"
 
 msgid "Deleting"
-msgstr ""
+msgstr "Sletter"
 
 msgid "&Using shell patterns"
-msgstr "bruker skallmnstre"
+msgstr "Bruk skallm&nstre"
 
 msgid "to:"
 msgstr "til:"
 
 msgid "Follow &links"
-msgstr ""
+msgstr "Flg &lenker"
 
 msgid "Preserve &attributes"
-msgstr ""
+msgstr "Bevar a&ttributter"
 
 msgid "Di&ve into subdir if exists"
-msgstr ""
+msgstr "Sk i alle &undermapper"
 
 msgid "&Stable symlinks"
-msgstr ""
+msgstr "&Fiks symlenker"
 
 msgid "&Background"
-msgstr "Bakgrunn"
+msgstr "&Bakgrunn"
 
 #, c-format
 msgid "Invalid source pattern '%s'"
-msgstr ""
+msgstr "ugyldig kildemnster %s"
 
 msgid "&Chdir"
-msgstr "Skift katalog"
+msgstr "&Bytt mappe"
 
 msgid "&Again"
-msgstr "Igjen"
+msgstr "&Nytt sk"
 
 msgid "Pane&lize"
-msgstr "Paneliser"
+msgstr "&Legg til i panel"
 
 msgid "&View - F3"
-msgstr "Se p - F3"
+msgstr "Vis - F3"
 
 msgid "&Edit - F4"
 msgstr "Rediger - F4"
 
 #, c-format
 msgid "Found: %lu"
-msgstr ""
+msgstr "Fant: %lu"
 
 msgid "Malformed regular expression"
-msgstr ""
+msgstr "Ugyldig regulrt uttrykk"
 
 msgid "File name:"
-msgstr ""
+msgstr "Filnavn:"
 
 msgid "&Find recursively"
-msgstr ""
+msgstr "Sk i alle &undermapper"
 
 msgid "S&kip hidden"
-msgstr ""
+msgstr "Hopp over &skjulte"
 
 msgid "Content:"
-msgstr ""
+msgstr "Innhold:"
 
 msgid "Sea&rch for content"
-msgstr ""
+msgstr "Sk etter innhold"
 
 msgid "Case sens&itive"
-msgstr ""
+msgstr "Sk&ill store/sm bokstaver"
 
 msgid "A&ll charsets"
-msgstr ""
+msgstr "Alle tegn&kodinger"
 
 msgid "Fir&st hit"
-msgstr ""
+msgstr "&Frste treff"
 
 msgid "&Tree"
-msgstr "Tre"
+msgstr "&Tre"
 
 msgid "Find File"
 msgstr "Finn fil"
 
 msgid "Start at:"
-msgstr "Start ved:"
+msgstr "Start i:"
 
 msgid "Ena&ble ignore directories:"
-msgstr ""
+msgstr "&Hopp over mapper:"
 
 #, c-format
 msgid "Grepping in %s"
@@ -2851,40 +3060,40 @@ msgstr "Ferdig"
 #, c-format
 msgid "Finished (ignored %zu directory)"
 msgid_plural "Finished (ignored %zu directories)"
-msgstr[0] ""
-msgstr[1] ""
+msgstr[0] "Ferdig (hoppet over %zu mappe)"
+msgstr[1] "Ferdig (hoppet over %zu mapper)"
 
 #, c-format
 msgid "Find File: \"%s\". Content: \"%s\""
-msgstr ""
+msgstr "Finn fil: %s. Innhold: %s"
 
 #, c-format
 msgid "Find File: \"%s\""
-msgstr ""
+msgstr "Finn fil: %s"
 
 msgid "Searching"
 msgstr "Sker"
 
 msgid "Change &to"
-msgstr ""
+msgstr "&Bytt til"
 
 msgid "&Free VFSs now"
-msgstr ""
+msgstr "&Koble fra VFS"
 
 msgid "&Refresh"
-msgstr ""
+msgstr "&Oppdater"
 
 msgid "&Add current"
-msgstr "&Legg til denne"
+msgstr "Legg til &gjeldende"
 
 msgid "&Up"
 msgstr "&Opp"
 
 msgid "New &group"
-msgstr ""
+msgstr "Ny gr&uppe"
 
 msgid "New &entry"
-msgstr ""
+msgstr "Ny oppf&ring"
 
 msgid "&Insert"
 msgstr "&Sett inn"
@@ -2896,67 +3105,71 @@ msgid "Subgroup - press ENTER to see lis
 msgstr "Undergruppe - trykk LINJESKIFT for  se listen"
 
 msgid "Active VFS directories"
-msgstr "Aktive VFS kataloger"
+msgstr "Tilgjengelige VFS-mapper"
 
 msgid "Directory hotlist"
-msgstr "Favorittliste for kataloger"
+msgstr "Favorittmapper"
 
 msgid "Top level group"
-msgstr ""
+msgstr "verste gruppeniv"
 
 msgid "Directory path"
-msgstr "Katalogsti"
+msgstr "Mappesti"
 
 #, c-format
 msgid "Moving %s"
 msgstr "Flytter %s"
 
 msgid "Directory label"
-msgstr "Katalogetikett"
+msgstr "Mappeetikett"
 
 msgid "&Append"
 msgstr "&Legg til"
 
 msgid "New hotlist entry"
-msgstr "Ny oppfring i favorittlisten"
+msgstr "Ny oppfring i favorittlista"
 
 msgid "Directory label:"
-msgstr ""
+msgstr "Mappeetikett:"
 
 msgid "Directory path:"
-msgstr ""
+msgstr "Mappesti:"
 
 msgid "New hotlist group"
-msgstr ""
+msgstr "Ny gruppe i favorittlista"
 
 msgid "Name of new group:"
-msgstr ""
+msgstr "Nytt gruppenavn:"
 
 #, c-format
 msgid "Are you sure you want to remove entry \"%s\"?"
-msgstr ""
+msgstr "Vil du slette oppfringa %s?"
 
 #, c-format
 msgid ""
 "Group \"%s\" is not empty.\n"
 "Remove it?"
 msgstr ""
+"Gruppa %s er ikke tom.\n"
+"Vil du fjerne den?"
 
 msgid "Hotlist Load"
-msgstr ""
+msgstr "Laste favorittliste"
 
 #, c-format
 msgid ""
 "MC was unable to write %s file,\n"
 "your old hotlist entries were not deleted"
 msgstr ""
+"Klarte ikke skrive til %s.\n"
+"De gamle oppfringene ble beholdt."
 
 #, c-format
 msgid "Label for \"%s\":"
-msgstr "Etikett for \"%s\":"
+msgstr "Etikett for %s:"
 
 msgid "Add to hotlist"
-msgstr ""
+msgstr "Legg til i favorittliste"
 
 #, c-format
 msgid "Midnight Commander %s"
@@ -2967,28 +3180,28 @@ msgid "File: %s"
 msgstr "Fil: %s"
 
 msgid "No node information"
-msgstr "Ingen nodeinformasjon"
+msgstr "Mangler nodeinformasjon"
 
 msgid "Free nodes:"
-msgstr ""
+msgstr "Led. noder:"
 
 msgid "No space information"
-msgstr "Ingen plassinformasjon"
+msgstr "Mangler info om ledig kapasitet"
 
 #, c-format
 msgid "Free space: %s/%s (%d%%)"
-msgstr ""
+msgstr "Ledig kap.: %s/%s (%d%%)"
 
 #, c-format
 msgid "Type:       %s"
-msgstr ""
+msgstr "Type:       %s"
 
 msgid "non-local vfs"
 msgstr "ikke-lokalt vfs"
 
 #, c-format
 msgid "Device:     %s"
-msgstr ""
+msgstr "Enhet:      %s"
 
 #, c-format
 msgid "Filesystem: %s"
@@ -2996,220 +3209,223 @@ msgstr "Filsystem:  %s"
 
 #, c-format
 msgid "Accessed:   %s"
-msgstr ""
+msgstr "Tilgang:    %s"
 
 #, c-format
 msgid "Modified:   %s"
-msgstr ""
+msgstr "Endret:     %s"
 
 #. TRANSLATORS: Time of last status change as in stat(2) man.
 #, c-format
 msgid "Changed:    %s"
-msgstr ""
+msgstr "Statusendr: %s"
 
 #, c-format
 msgid "Dev. type: major %lu, minor %lu"
-msgstr ""
+msgstr "Enh. type:  strre %lu, mindre %lu"
 
 #, c-format
 msgid "Size:       %s"
-msgstr ""
+msgstr "Strrelse:  %s"
 
 #, c-format
 msgid " (%lu block)"
 msgid_plural " (%lu blocks)"
-msgstr[0] ""
-msgstr[1] ""
+msgstr[0] " (%lu blokk)"
+msgstr[1] " (%lu blokker)"
 
 #, c-format
 msgid "Owner:      %s/%s"
-msgstr ""
+msgstr "Eier:       %s/%s"
 
 #, c-format
 msgid "Links:      %d"
-msgstr ""
+msgstr "Lenker:     %d"
 
 #, c-format
 msgid "Mode:       %s (%04o)"
-msgstr ""
+msgstr "Rettigh.:   %s (%04o)"
 
 #, c-format
 msgid "Location:   %Xh:%Xh"
-msgstr ""
+msgstr "Adresse:    %Xh:%Xh"
 
 msgid "&Equal split"
-msgstr "lik deling"
+msgstr "Lik &fordeling"
 
 msgid "&Menubar visible"
-msgstr ""
+msgstr "Vis &menylinje"
 
 msgid "Command &prompt"
-msgstr ""
+msgstr "Vis &kommandolinje"
 
 msgid "&Keybar visible"
-msgstr "Tastaturlinje synlig"
+msgstr "Vis F&1-F10-linje"
 
 msgid "H&intbar visible"
-msgstr ""
+msgstr "Vis &hintlinje"
 
 msgid "&XTerm window title"
-msgstr ""
+msgstr "Vindustittel i &XTerm"
 
 msgid "&Show free space"
-msgstr ""
+msgstr "Vis ledig &diskplass"
 
 msgid "Panel split"
-msgstr ""
+msgstr "Panelsplitting"
 
 msgid "Console output"
-msgstr ""
+msgstr "Utdata til konsoll"
 
 msgid "&Vertical"
-msgstr "Vertikal"
+msgstr "&Loddrett"
 
 msgid "&Horizontal"
-msgstr "Horisontal"
+msgstr "&Vannrett"
 
 msgid "Output lines:"
-msgstr ""
+msgstr "Utdatalinjer:"
 
 msgid "Layout"
-msgstr "Utseende"
+msgstr "Utforming"
 
 msgid "File listin&g"
-msgstr ""
+msgstr "&List ut filer"
 
 msgid "&Quick view"
-msgstr ""
+msgstr "&Hurtigvis"
 
 msgid "&Info"
-msgstr ""
+msgstr "&Informasjon"
 
 msgid "&Listing format..."
-msgstr ""
+msgstr "&Utlistingsformat ..."
 
 msgid "&Sort order..."
-msgstr "&Sorteringsrekkeflge..."
+msgstr "Sorterings&rekkeflge ..."
 
 msgid "&Filter..."
-msgstr "&Filter..."
+msgstr "&Filtrer ..."
 
 msgid "&Encoding..."
-msgstr ""
+msgstr "Tegn&koding for filnavn ..."
 
 msgid "FT&P link..."
-msgstr "FT&P kobling..."
+msgstr "Koble til FT&P ..."
 
 msgid "S&hell link..."
-msgstr "S&kall-kobling..."
+msgstr "Koble til &skall ..."
 
 msgid "S&FTP link..."
-msgstr ""
+msgstr "K&oble til SFTP ..."
 
 msgid "SM&B link..."
-msgstr "SM&B-kobling..."
+msgstr "Koble til SM&B ..."
 
 msgid "Paneli&ze"
-msgstr ""
+msgstr "&Vis lagt til i panel"
 
 msgid "&Rescan"
-msgstr ""
+msgstr "Opp&dater"
 
 msgid "&View"
-msgstr ""
+msgstr "&Vis"
 
 msgid "Vie&w file..."
-msgstr ""
+msgstr "V&is fil ..."
 
 msgid "&Filtered view"
-msgstr ""
+msgstr "Vis &filtrert"
 
 msgid "&Copy"
-msgstr ""
+msgstr "&Kopier"
 
 msgid "C&hmod"
-msgstr ""
+msgstr "Chm&od"
 
 msgid "&Link"
-msgstr ""
+msgstr "&Lag lenke"
 
 msgid "&Symlink"
-msgstr ""
+msgstr "Lag sym&bolsk lenke"
 
 msgid "Relative symlin&k"
-msgstr ""
+msgstr "Lag relativ s&ymlenke"
 
 msgid "Edit s&ymlink"
-msgstr ""
+msgstr "Redi&ger symlenke"
 
 msgid "Ch&own"
-msgstr ""
+msgstr "Cho&wn"
 
 msgid "&Advanced chown"
-msgstr ""
+msgstr "&Avansert chown"
 
 msgid "&Rename/Move"
-msgstr ""
+msgstr "&Endre navn/flytt"
 
 msgid "&Mkdir"
-msgstr ""
+msgstr "Lag &mappe"
 
 msgid "&Quick cd"
-msgstr ""
+msgstr "Rask &cd"
 
 msgid "Select &group"
-msgstr ""
+msgstr "Velg gr&uppe"
 
 msgid "U&nselect group"
-msgstr ""
+msgstr "Fravelg gru&ppe"
 
 msgid "&Invert selection"
-msgstr ""
+msgstr "I&nverter utvalg"
 
 msgid "E&xit"
-msgstr ""
+msgstr "Avslu&tt"
 
 msgid "&User menu"
-msgstr ""
+msgstr "&Brukermeny"
 
 msgid "&Directory tree"
-msgstr "Katalogtre"
+msgstr "Mappe&tre"
 
 msgid "&Find file"
-msgstr ""
+msgstr "F&inn fil"
 
 msgid "S&wap panels"
-msgstr ""
+msgstr "Bytt &om paneler"
 
 msgid "Switch &panels on/off"
-msgstr ""
+msgstr "&Paneler av/p"
 
 msgid "&Compare directories"
-msgstr ""
+msgstr "Sammenlign &mapper"
 
 msgid "C&ompare files"
-msgstr ""
+msgstr "Sammenlign &filer"
 
 msgid "E&xternal panelize"
-msgstr ""
+msgstr "Legg til &eksternt i panel"
 
 msgid "Show directory s&izes"
-msgstr ""
+msgstr "Vis mappe&strrelser"
 
 msgid "Command &history"
-msgstr ""
+msgstr "&Kommandohistorikk"
+
+msgid "Viewed/edited files hi&story"
+msgstr "Historikk over viste/redigerte filer"
 
 msgid "Di&rectory hotlist"
-msgstr ""
+msgstr "F&avorittmapper"
 
 msgid "&Active VFS list"
-msgstr ""
+msgstr "Tilgjengelige &VFS"
 
 msgid "&Background jobs"
-msgstr ""
+msgstr "Bakgrunns&jobber"
 
 msgid "Screen lis&t"
-msgstr ""
+msgstr "Kjrende mo&duler"
 
 msgid "&Undelete files (ext2fs only)"
 msgstr "Gjenopprett filer (kun ext2fs)"
@@ -3218,81 +3434,81 @@ msgid "&Listing format edit"
 msgstr "Redigering av listeformat"
 
 msgid "Edit &extension file"
-msgstr "Redigering av utvidelsesfil"
+msgstr "Rediger &utvidelsesfil"
 
 msgid "Edit &menu file"
-msgstr "Menyfilredigering"
+msgstr "Rediger men&yfil"
 
 msgid "Edit hi&ghlighting group file"
-msgstr ""
+msgstr "Rediger uthevings&grupper"
 
 msgid "&Configuration..."
-msgstr "Konfigurasjon..."
+msgstr "&Oppsett ..."
 
 msgid "&Layout..."
-msgstr "Utseende."
+msgstr "&Utforming ..."
 
 msgid "&Panel options..."
-msgstr ""
+msgstr "&Panelinnstillinger ..."
 
 msgid "C&onfirmation..."
-msgstr ""
+msgstr "&Bekreftelser ..."
 
 msgid "&Appearance..."
-msgstr ""
+msgstr "&Presentasjonsdrakt ..."
 
 msgid "&Display bits..."
-msgstr "Tastaturdefinisjon..."
+msgstr "&Tegnkoding ..."
 
 msgid "&Virtual FS..."
-msgstr "Virtuelt FS..."
+msgstr "&Virtuelt FS ..."
 
 msgid "Panels:"
-msgstr ""
+msgstr "Paneler:"
 
 #, c-format
 msgid "You have %zu opened screen. Quit anyway?"
 msgid_plural "You have %zu opened screens. Quit anyway?"
-msgstr[0] ""
-msgstr[1] ""
+msgstr[0] "Det er %zu pen modul. Avslutte likevel?"
+msgstr[1] "Det er %zu pne moduler. Avslutte likevel?"
 
 msgid "The Midnight Commander"
-msgstr ""
+msgstr "Midnight Commander"
 
 msgid "Do you really want to quit the Midnight Commander?"
-msgstr ""
+msgstr "VIl du avslutte Midnight Commander?"
 
 msgid "&Above"
-msgstr ""
+msgstr "&verst"
 
 msgid "&Left"
-msgstr ""
+msgstr "&Venstre"
 
 msgid "&Below"
-msgstr ""
+msgstr "&Nederst"
 
 msgid "&Right"
-msgstr ""
+msgstr "&Hyre"
 
 msgid "ButtonBar|Menu"
-msgstr ""
+msgstr "ButtonBar|Meny"
 
 msgid "ButtonBar|View"
-msgstr ""
+msgstr "ButtonBar|Vis"
 
 msgid "ButtonBar|RenMov"
-msgstr ""
+msgstr "ButtonBar|Flytt"
 
 msgid "ButtonBar|Mkdir"
-msgstr ""
+msgstr "ButtonBar|Mkdir"
 
 msgid "Memory exhausted!"
-msgstr ""
+msgstr "Gikk tom for minne."
 
 #. TRANSLATORS: one single character to represent 'unsorted' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|u"
-msgstr ""
+msgstr "sort|u"
 
 msgid "&Unsorted"
 msgstr "&Usortert"
@@ -3300,7 +3516,7 @@ msgstr "&Usortert"
 #. TRANSLATORS: one single character to represent 'name' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|n"
-msgstr ""
+msgstr "sort|n"
 
 msgid "&Name"
 msgstr "&Navn"
@@ -3308,53 +3524,53 @@ msgstr "&Navn"
 #. TRANSLATORS: one single character to represent 'version' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|v"
-msgstr ""
+msgstr "sort|v"
 
 msgid "&Version"
-msgstr ""
+msgstr "&Versjon"
 
 #. TRANSLATORS: one single character to represent 'extension' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|e"
-msgstr ""
+msgstr "sort|f"
 
 msgid "E&xtension"
-msgstr ""
+msgstr "&Filetternavn"
 
 #. TRANSLATORS: one single character to represent 'size' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|s"
-msgstr ""
+msgstr "sort|s"
 
 msgid "&Size"
-msgstr "&Strrelse"
+msgstr "St&rrelse"
 
 msgid "Block Size"
-msgstr ""
+msgstr "Blokkstrrelse"
 
 #. TRANSLATORS: one single character to represent 'Modify time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|m"
-msgstr ""
+msgstr "sort|e"
 
 msgid "&Modify time"
-msgstr "&Modifisert"
+msgstr "&Endret"
 
 #. TRANSLATORS: one single character to represent 'Access time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|a"
-msgstr ""
+msgstr "sort|t"
 
 msgid "&Access time"
-msgstr "&Aksessert"
+msgstr "&Tilgang"
 
 #. TRANSLATORS: one single character to represent 'Change time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|h"
-msgstr ""
+msgstr "sort|s"
 
 msgid "C&hange time"
-msgstr ""
+msgstr "&Statusendret"
 
 msgid "Perm"
 msgstr "Rett"
@@ -3365,7 +3581,7 @@ msgstr "Nl"
 #. TRANSLATORS: one single character to represent 'inode' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
 msgid "sort|i"
-msgstr ""
+msgstr "sort|i"
 
 msgid "&Inode"
 msgstr "&Inode"
@@ -3383,10 +3599,10 @@ msgid "Group"
 msgstr "Gruppe"
 
 msgid "[dev]"
-msgstr ""
+msgstr "[enh]"
 
 msgid "UP--DIR"
-msgstr "UP--DIR"
+msgstr "OVERMAP"
 
 msgid "SYMLINK"
 msgstr "SYMLENKE"
@@ -3400,38 +3616,41 @@ msgstr "<readlink feilet>"
 #, c-format
 msgid "%s in %d file"
 msgid_plural "%s in %d files"
-msgstr[0] ""
-msgstr[1] ""
+msgstr[0] "%s i %d fil"
+msgstr[1] "%s i %d filer"
 
 msgid "Panelize"
-msgstr ""
+msgstr "Lagt til i panel"
 
 msgid "Unknown tag on display format:"
-msgstr ""
+msgstr "Ukjent etikett p utlistingsformat:"
 
 msgid "&Files only"
-msgstr ""
+msgstr "Kun &filer"
 
 msgid "&Case sensitive"
-msgstr ""
+msgstr "&Skill store/sm bokstaver"
 
 msgid "Select"
-msgstr ""
+msgstr "Velg"
 
 msgid "Unselect"
-msgstr ""
+msgstr "Fravelg"
 
 msgid "Do you really want to execute?"
-msgstr ""
+msgstr "Vil du kjre?"
+
+msgid "Cannot read directory contents"
+msgstr "Klarte ikke lese mappeinnhold"
 
 msgid "User supplied format looks invalid, reverting to default."
-msgstr "Oppgitt format ser ut til  vre ugyldig. Gr tilbake til standard."
+msgstr "Oppgitt format er ugyldig. Tilbakestiller til forvalgt."
 
 msgid "&Add new"
 msgstr "Legg til ny"
 
 msgid "External panelize"
-msgstr "Eksternt panel"
+msgstr "Legg til eksternt i panel"
 
 msgid "Other command"
 msgstr "Andre kommandoer"
@@ -3440,22 +3659,22 @@ msgid "Command"
 msgstr "Kommando"
 
 msgid "Add to external panelize"
-msgstr ""
+msgstr "Ny kommando"
 
 msgid "Enter command label:"
-msgstr ""
+msgstr "Angi kommandoetikett:"
 
 msgid "Cannot invoke command."
-msgstr "Kan ikke utfre kommando."
+msgstr "Klarte ikke kalle kommando."
 
 msgid "Pipe close failed"
-msgstr "Feil under lukking av rr"
+msgstr "Klarte ikke lukke rr"
 
 msgid "Cannot run external panelize in a non-local directory"
-msgstr ""
+msgstr "Kan ikke kjre Legg til eksternt i panel i ikke-lokal mappe"
 
 msgid "Modified git files"
-msgstr ""
+msgstr "Endrede git-filer"
 
 msgid "Find rejects after patching"
 msgstr "Finn avviste etter patching"
@@ -3464,14 +3683,14 @@ msgid "Find *.orig after patching"
 msgstr "Finn *.orig etter patching"
 
 msgid "Find SUID and SGID programs"
-msgstr "Finn SUID og SGID programmer"
+msgstr "Finn SUID-og SGID-programmer"
 
 #, c-format
 msgid ""
 "Cannot open the %s file for writing:\n"
 "%s\n"
 msgstr ""
-"Kan ikke pne filen %s for skriving:\n"
+"Klarte ikke pne fila %s for skriving:\n"
 "%s\n"
 
 #, c-format
@@ -3487,58 +3706,60 @@ msgid ""
 "Cannot stat the destination\n"
 "%s"
 msgstr ""
+"stat() mislyktes for mlet\n"
+"%s"
 
 #, c-format
 msgid "Delete %s?"
-msgstr ""
+msgstr "Slette %s?"
 
 msgid "ButtonBar|Static"
-msgstr ""
+msgstr "ButtonBar|Statik"
 
 msgid "ButtonBar|Dynamc"
-msgstr ""
+msgstr "ButtonBar|Dynamk"
 
 msgid "ButtonBar|Rescan"
-msgstr ""
+msgstr "ButtonBar|Oppdat"
 
 msgid "ButtonBar|Forget"
-msgstr ""
+msgstr "ButtonBar|Glem"
 
 msgid "ButtonBar|Rmdir"
-msgstr ""
+msgstr "ButtonBar|Rmdir"
 
 #, c-format
 msgid ""
 "Cannot write to the %s file:\n"
 "%s\n"
 msgstr ""
-"Kan ikke skrive til %s filen:\n"
+"Klarte ikke skrive til fila %s:\n"
 "%s\n"
 
 msgid "Help file format error\n"
-msgstr ""
+msgstr "Formatfeil i hjelpefila\n"
 
 msgid "Internal bug: Double start of link area"
-msgstr ""
+msgstr "Programvarefeil: Lenkeomrdet har dobbel start"
 
 #, c-format
 msgid "Cannot find node %s in help file"
-msgstr ""
+msgstr "Fant ikke noden %s i hjelpefila"
 
 msgid "Help"
 msgstr "Hjelp"
 
 msgid "ButtonBar|Index"
-msgstr ""
+msgstr "ButtonBar|Indeks"
 
 msgid "ButtonBar|Prev"
-msgstr ""
+msgstr "ButtonBar|Forrig"
 
 msgid "Learn keys"
 msgstr "Lr taster"
 
 msgid "Teach me a key"
-msgstr ""
+msgstr "Lr meg en tast"
 
 #, c-format
 msgid ""
@@ -3551,21 +3772,20 @@ msgid ""
 "If you want to escape, press a single Escape key\n"
 "and wait as well."
 msgstr ""
-"Vr snill og trykk %s\n"
+"Trykk %s\n"
 "og vent til denne meldingen forsvinner.\n"
 "\n"
-"Trykk s igjen fpr  se om OK kommer opp\n"
-"ved siden av knappen.\n"
+"Trykk den deretter igjen for  se om\n"
+"OK vises ved siden av knappen dens.\n"
 "\n"
-"Hvis du vil g ut igjen, trykk en enkelt Escape tast\n"
-"og vent da ogs."
+"Trykk Escape og vent litt for  avbryte."
 
 msgid "Cannot accept this key"
-msgstr ""
+msgstr "Kan ikke godta denne tasten"
 
 #, c-format
 msgid "You have entered \"%s\""
-msgstr ""
+msgstr "Du tastet %s"
 
 #. TRANSLATORS: This label appears near learned keys.  Keep it short.
 msgid "OK"
@@ -3579,13 +3799,13 @@ msgstr ""
 "allerede virker fint. Det er bra."
 
 msgid "&Discard"
-msgstr "forkast"
+msgstr "&Forkast"
 
 msgid ""
 "Great! You have a complete terminal database!\n"
 "All your keys work well."
 msgstr ""
-"Flott! Du har en komplett terminaldatabase!\n"
+"Du har en komplett terminaldatabase.\n"
 "Alle tastene virker fint."
 
 msgid ""
@@ -3593,15 +3813,20 @@ msgid ""
 "which keys are not marked with OK. Press space on the missing\n"
 "key, or click with the mouse to define it. Move around with Tab."
 msgstr ""
+"Trykk alle tastene som er nevnt over. Sjekk etterp hvilke taster som\n"
+"ikke er markert med OK. Trykk mellomrom p den manglende tasten, eller\n"
+"velg den med musa for  definere den. Flytt rundt med tabulator."
 
 #, c-format
 msgid ""
 "Failed to run:\n"
 "%s\n"
 msgstr ""
+"Klarte ikke kjre:\n"
+"%s\n"
 
 msgid "Home directory path is not absolute"
-msgstr ""
+msgstr "Stien til hjemmemappa er ikke absolutt"
 
 #, c-format
 msgid ""
@@ -3609,9 +3834,12 @@ msgid ""
 "Failed while close:\n"
 "%s\n"
 msgstr ""
+"\n"
+"Mislyktes under lukking:\n"
+"%s\n"
 
 msgid "Choose codepage"
-msgstr ""
+msgstr "Velg tegnkoding"
 
 msgid "-  < No translation >"
 msgstr "- < Ingen oversettelse >"
@@ -3627,53 +3855,58 @@ msgid ""
 "Cannot save file %s:\n"
 "%s"
 msgstr ""
+"Klarte ikke lagre fila %s:\n"
+"%s"
 
 msgid ""
 "GNU Midnight Commander is already\n"
 "running on this terminal.\n"
 "Subshell support will be disabled."
 msgstr ""
+"GNU Midnight Commander kjrer\n"
+"allerede i denne terminalen.\n"
+"Slr av sttte for underskall."
 
 #, c-format
 msgid "Cannot open named pipe %s\n"
-msgstr "Kunne ikke pne navngitt rr %s\n"
+msgstr "Klarte ikke pne navngitt rr %s\n"
 
 msgid "The shell is still active. Quit anyway?"
-msgstr ""
+msgstr "Skallet er fortsatt aktivt. Avslutte likevel?"
 
 #, c-format
 msgid "Warning: Cannot change to %s.\n"
-msgstr "Advarsel: Kunne ikke skifte til %s.\n"
+msgstr "Advarsel: Klarte ikke bytte til %s.\n"
 
 msgid "Using the S-Lang library with terminfo database\n"
-msgstr ""
+msgstr "Bruker S-Lang-biblioteket med terminfo-database\n"
 
 msgid "Using the ncurses library\n"
-msgstr ""
+msgstr "Bruker ncurses-biblioteket\n"
 
 msgid "Using the ncursesw library\n"
-msgstr ""
+msgstr "Bruker ncursesw-biblioteket\n"
 
 msgid "With builtin Editor and Aspell support\n"
-msgstr ""
+msgstr "Med innebygget tekstprogram og Aspell-sttte\n"
 
 msgid "With builtin Editor\n"
-msgstr "Med innebygget editor\n"
+msgstr "Med innebygget tekstprogram\n"
 
 msgid "With optional subshell support\n"
-msgstr ""
+msgstr "Med valgfri underskall-sttte\n"
 
 msgid "With subshell support as default\n"
-msgstr ""
+msgstr "Med forvalgt underskall-sttte\n"
 
 msgid "With support for background operations\n"
 msgstr "Med sttte for bakgrunnsoperasjoner\n"
 
 msgid "With mouse support on xterm and Linux console\n"
-msgstr "Med mussttte i xterm og p Linux konsollet\n"
+msgstr "Med musesttte i xterm og Linux-konsollen\n"
 
 msgid "With mouse support on xterm\n"
-msgstr "Med mussttte i xterm\n"
+msgstr "Med musesttte i xterm\n"
 
 msgid "With support for X11 events\n"
 msgstr "Med sttte for X11-hendelser\n"
@@ -3682,97 +3915,97 @@ msgid "With internationalization support
 msgstr "Med sttte for internasjonalisering\n"
 
 msgid "With multiple codepages support\n"
-msgstr "Med sttte for flere kodinger\n"
+msgstr "Med sttte for flere tegnkodinger\n"
 
 #, c-format
 msgid "Built with GLib %d.%d.%d\n"
-msgstr ""
+msgstr "Bygget med GLib %d.%d.%d\n"
 
 #, c-format
 msgid "Virtual File Systems:"
-msgstr ""
+msgstr "Virtuelle filsystem:"
 
 #, c-format
 msgid "Data types:"
-msgstr ""
+msgstr "Datatyper:"
 
 msgid "Home directory:"
-msgstr ""
+msgstr "Hjemmemappe:"
 
 msgid "Profile root directory:"
-msgstr ""
+msgstr "Profilrotmappe:"
 
 msgid "System data"
-msgstr ""
+msgstr "Systemdata"
 
 msgid "Config directory:"
-msgstr ""
+msgstr "Oppsettsmappe:"
 
 msgid "Data directory:"
-msgstr ""
+msgstr "Datamappe:"
 
 msgid "File extension handlers:"
-msgstr ""
+msgstr "Hndtering av filetternavn:"
 
 msgid "VFS plugins and scripts:"
-msgstr ""
+msgstr "Programtillegg og skript for VFS:"
 
 msgid "User data"
-msgstr ""
+msgstr "Brukerdata"
 
 msgid "Cache directory:"
-msgstr ""
+msgstr "Hurtiglagermappe:"
 
 msgid "Debug"
-msgstr ""
+msgstr "Feilsking"
 
 msgid "ERROR:"
-msgstr ""
+msgstr "FEIL:"
 
 msgid "True:"
-msgstr ""
+msgstr "Sann:"
 
 msgid "False:"
-msgstr ""
+msgstr "Usann:"
 
 msgid "Error calling program"
-msgstr ""
+msgstr "Klarte ikke kalle program"
 
 msgid "Warning -- ignoring file"
-msgstr ""
+msgstr "Advarsel -- ignorerer fil"
 
 #, c-format
 msgid ""
 "File %s is not owned by root or you or is world writable.\n"
 "Using it may compromise your security"
 msgstr ""
-"Filen %s er ikke eid av root eller er skrivbar for alle.\n"
-"Bruk av den kan kompromittere sikkerheten"
+"Verken du eller root eier fila %s, eller alle kan skrive til den.\n"
+"Bruk den p eget sikkerhetsansvar."
 
 msgid "Format error on file Extensions File"
-msgstr ""
+msgstr "Utvidelsesfila har formatfeil"
 
 #, c-format
 msgid "The %%var macro has no default"
-msgstr ""
+msgstr " %%var-makroen mangler standardverdi"
 
 #, c-format
 msgid "The %%var macro has no variable"
-msgstr ""
+msgstr " %%var-makroen mangler variabel"
 
 #, c-format
 msgid "No suitable entries found in %s"
-msgstr ""
+msgstr "Fant ingen passende oppfringer i %s"
 
 msgid "User menu"
-msgstr ""
+msgstr "Brukermeny"
 
 #, c-format
 msgid ""
 "Cannot open cpio archive\n"
 "%s"
 msgstr ""
-"Kunne ikke pne cpio arkiv\n"
+"Klarte ikke pne cpio-arkiv\n"
 "%s"
 
 #, c-format
@@ -3780,7 +4013,7 @@ msgid ""
 "Premature end of cpio archive\n"
 "%s"
 msgstr ""
-"Prematur slutt p cpio arkiv\n"
+"cpio-arkivet sluttet uventet\n"
 "%s"
 
 #, c-format
@@ -3790,21 +4023,21 @@ msgid ""
 "in cpio archive\n"
 "%s"
 msgstr ""
-"Ukonsistente harde lenker til\n"
-"%s\n"
-"i cpio arkiv\n"
+"%s har \n"
+"inkonsistente harde lenker\n"
+"i cpio-arkivet\n"
 "%s"
 
 #, c-format
 msgid "%s contains duplicate entries! Skipping!"
-msgstr "%s inneholder duplikerte oppfringer! Hopper over!"
+msgstr "%s inneholder dupliserte oppfringer. Hopper over."
 
 #, c-format
 msgid ""
 "Corrupted cpio header encountered in\n"
 "%s"
 msgstr ""
-"Korrupt cpio header funnet i\n"
+"Fant skadet cpio-hode i\n"
 "%s"
 
 #, c-format
@@ -3820,45 +4053,45 @@ msgid ""
 "Cannot open %s archive\n"
 "%s"
 msgstr ""
-"Kunne ikke pne %s arkiv\n"
+"Klarte ikke pne arkivet %s \n"
 "%s"
 
 msgid "Inconsistent extfs archive"
-msgstr "Ukonsistent extfs arkiv"
+msgstr "Inkonsistent extfs-arkiv"
 
 #, c-format
 msgid "Warning: cannot open %s directory\n"
-msgstr ""
+msgstr "Advarsel: Klarte ikke pne mappa %s\n"
 
 #, c-format
 msgid "fish: Disconnecting from %s"
 msgstr "fish: Kobler fra %s"
 
 msgid "fish: Waiting for initial line..."
-msgstr "fish: Venter p innledende linje..."
+msgstr "fish: Venter p innledende linje ..."
 
 msgid "Sorry, we cannot do password authenticated connections for now."
-msgstr "Beklager, vi kan ikke gjre passordautentiserte forbindelser enn."
+msgstr "Passordautentisering av tilkoblinger stttes ikke per i dag."
 
 #, c-format
 msgid "fish: Password is required for %s"
-msgstr ""
+msgstr "fish: Trenger passord for %s"
 
 msgid "fish: Sending password..."
-msgstr "fish: Sender passord..."
+msgstr "fish: Sender passord ..."
 
 msgid "fish: Sending initial line..."
-msgstr "fish: Sender innledende linje..."
+msgstr "fish: Sender innledende linje ..."
 
 msgid "fish: Handshaking version..."
-msgstr "fish: Handshaking versjon..."
+msgstr "fish: Avklarer versjon ..."
 
 msgid "fish: Getting host info..."
-msgstr ""
+msgstr "fish: Henter vertsinformasjon ..."
 
 #, c-format
 msgid "fish: Reading directory %s..."
-msgstr "fish: Leser katalog %s..."
+msgstr "fish: Leser mappa %s ..."
 
 #, c-format
 msgid "%s: done."
@@ -3866,20 +4099,20 @@ msgstr "%s: ferdig."
 
 #, c-format
 msgid "%s: failure"
-msgstr " %s: feilet "
+msgstr " %s: mislyktes"
 
 #, c-format
 msgid "fish: store %s: sending command..."
-msgstr "fish: lager %s: sender kommando..."
+msgstr "fish: lagre %s: sender kommando ..."
 
 msgid "fish: Local read failed, sending zeros"
-msgstr "fish: Lokal lesekommando feilet, sender nuller"
+msgstr "fish: Lokal lesekommando mislyktes, sender nuller"
 
 msgid "fish: storing file"
-msgstr ""
+msgstr "fish: lagrer fil"
 
 msgid "Aborting transfer..."
-msgstr "Avbryter overfring..."
+msgstr "Avbryter overfring ..."
 
 msgid "Error reported after abort."
 msgstr "Feil rapportert etter avbrudd."
@@ -3893,7 +4126,7 @@ msgstr "ftpfs: Kobler fra %s"
 
 #, c-format
 msgid "FTP: Password required for %s"
-msgstr ""
+msgstr "FTP: Passord kreves for %s"
 
 msgid "ftpfs: sending login name"
 msgstr "ftpfs: sender innloggingsnavn"
@@ -3903,75 +4136,75 @@ msgstr "ftpfs: sender brukers passord"
 
 #, c-format
 msgid "FTP: Account required for user %s"
-msgstr ""
+msgstr "FTP: Konto kreves for bruker %s"
 
 msgid "Account:"
-msgstr ""
+msgstr "Konto:"
 
 msgid "ftpfs: sending user account"
-msgstr ""
+msgstr "ftpfs: sender brukers konto"
 
 msgid "ftpfs: logged in"
 msgstr "ftpfs: logget inn"
 
 #, c-format
 msgid "ftpfs: Login incorrect for user %s "
-msgstr "ftpfs: Innlogging ukorrekt for bruker %s "
+msgstr "ftpfs: Innlogging mislyktes for bruker %s "
 
 msgid "ftpfs: Invalid host name."
 msgstr "ftpfs: Ugyldig vertsnavn."
 
 #, c-format
 msgid "ftpfs: %s"
-msgstr ""
+msgstr "ftpfs: %s"
 
 #, c-format
 msgid "ftpfs: making connection to %s"
-msgstr "ftpfs: setter opp forbindelse til %s"
+msgstr "ftpfs: setter opp tilkobling til %s"
 
 msgid "ftpfs: connection interrupted by user"
-msgstr "ftpfs: tilkobling avbrutt av bruker"
+msgstr "ftpfs: bruker avbrt tilkoblingen"
 
 #, c-format
 msgid "ftpfs: connection to server failed: %s"
-msgstr "ftpfs: tilkobling til tjener feilet: %s"
+msgstr "ftpfs: tilkobling til tjener mislyktes: %s"
 
 #, c-format
 msgid "Waiting to retry... %d (Control-G to cancel)"
-msgstr ""
+msgstr "Venter p  prve igjen ... %d (Ctrl + G avbryter)"
 
 msgid "ftpfs: invalid address family"
-msgstr ""
+msgstr "ftpfs: ugyldig adressefamilie"
 
 #, c-format
 msgid "ftpfs: could not create socket: %s"
-msgstr ""
+msgstr "ftpfs: klarte ikke opprette socket: %s"
 
 msgid "ftpfs: could not setup passive mode"
-msgstr "ftpfs: kunne ikke sette opp passiv modus"
+msgstr "ftpfs: klarte ikke sette opp passiv modus"
 
 msgid "ftpfs: aborting transfer."
 msgstr "ftpfs: avbryter overfring."
 
 #, c-format
 msgid "ftpfs: abort error: %s"
-msgstr "ftpfs: avbrytlsesfeil: %s"
+msgstr "ftpfs: avbruddsfeil: %s"
 
 msgid "ftpfs: abort failed"
-msgstr "ftpfs: avbrudd feilet"
+msgstr "ftpfs: avbrudd mislyktes"
 
 msgid "ftpfs: CWD failed."
-msgstr "ftpfs: CWD feilet."
+msgstr "ftpfs: CWD mislyktes."
 
 msgid "ftpfs: couldn't resolve symlink"
-msgstr "ftpfs: kunne ikke flge symbolsk lenke"
+msgstr "ftpfs: klarte ikke flge symbolsk lenke"
 
 msgid "Resolving symlink..."
-msgstr "Finner symlink..."
+msgstr "Slr opp symlenke ..."
 
 #, c-format
 msgid "ftpfs: Reading FTP directory %s... %s%s"
-msgstr "ftpfs: Leser FTP katalog %s... %s%s"
+msgstr "ftpfs: Leser FTP-mappe %s... %s%s"
 
 msgid "(strict rfc959)"
 msgstr "(flg rfc959)"
@@ -3980,19 +4213,21 @@ msgid "(chdir first)"
 msgstr "(chdir frst)"
 
 msgid "ftpfs: failed; nowhere to fallback to"
-msgstr "ftpfs: feilet; ingen steder  falle tilbake til"
+msgstr "ftpfs: mislyktes; ingen retrettmuligheter"
 
 msgid "ftpfs: storing file"
-msgstr ""
+msgstr "ftpfs: lagrer fil"
 
 msgid ""
 "~/.netrc file has incorrect mode\n"
 "Remove password or correct mode"
 msgstr ""
+"~/.netrc har ugyldige rettigheter\n"
+"Fjern passordet eller fiks rettighetene"
 
 #, c-format
 msgid "%s: Warning: file %s not found\n"
-msgstr ""
+msgstr "%s: Advarsel: fant ikke fila %s\n"
 
 #, c-format
 msgid ""
@@ -4012,241 +4247,251 @@ msgstr ""
 
 #, c-format
 msgid "sftp: an error occurred while reading %s: %s"
-msgstr ""
+msgstr "sftp: det oppstod en feil under lesing av %s: %s"
 
 msgid "sftp: Unable to get current user name."
-msgstr ""
+msgstr "sftp: Klarte ikke hente gjeldende brukernavn."
 
 msgid "sftp: Invalid host name."
-msgstr ""
+msgstr "sftp: Ugyldig vertsnavn."
 
 #, c-format
 msgid "sftp: %s"
-msgstr ""
+msgstr "sftp: %s"
 
 #, c-format
 msgid "sftp: making connection to %s"
-msgstr ""
+msgstr "sftp: Oppretter tilkobling til %s"
 
 msgid "sftp: connection interrupted by user"
-msgstr ""
+msgstr "sftp: Bruker avbrt tilkoblingen"
 
 #, c-format
 msgid "sftp: connection to server failed: %s"
-msgstr ""
+msgstr "sftp: Tilkoblingen til tjeneren mislyktes: %s"
 
 #, c-format
 msgid "sftp: Enter passphrase for %s "
-msgstr ""
+msgstr "sftp: Skriv inn passfrase for %s"
 
 msgid "sftp: Passphrase is empty."
-msgstr ""
+msgstr "sftp: Passfrasen er tom."
 
 #, c-format
 msgid "sftp: Enter password for %s "
-msgstr ""
+msgstr "sftp: Skriv inn passord for %s"
 
 msgid "sftp: Password is empty."
-msgstr ""
+msgstr "sftp: Passordet er tomt."
 
 msgid "sftp: Failure establishing SSH session"
-msgstr ""
+msgstr "sftp: Klarte ikke sette opp SSH-kt"
 
 msgid "sftp: No file handler data present for reading file"
-msgstr ""
+msgstr "sftp: Fant ikke filhndterer som kan lese fila"
 
 #, c-format
 msgid "sftp: socket error: %s"
-msgstr ""
+msgstr "sftp: Socketfeil: %s"
 
 #, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
-msgstr ""
+msgstr "sftp: (Ctrl + G avbryter) Lister ut ... %s"
 
 msgid "sftp: Listing done."
-msgstr ""
+msgstr "sftp: Utlisting ferdig."
 
 #, c-format
 msgid "reconnect to %s failed"
-msgstr ""
+msgstr "klarte ikke koble til %s p nytt"
 
 msgid "Authentication failed"
-msgstr ""
+msgstr "Autentisering mislyktes"
 
 #, c-format
 msgid "Error %s creating directory %s"
-msgstr ""
+msgstr "Feilen %s oppstod under oppretting av mappa %s"
 
 #, c-format
 msgid "Error %s removing directory %s"
-msgstr ""
+msgstr "Feilen %s oppstod under sletting av mappa %s"
 
 #, c-format
 msgid "%s opening remote file %s"
-msgstr ""
+msgstr "%s ved pning av ekstern fil %s"
 
 #, c-format
 msgid "%s removing remote file %s"
-msgstr ""
+msgstr "%s ved sletting av ekstern fil %s"
 
 #, c-format
 msgid "%s renaming files\n"
-msgstr ""
+msgstr "%s ved endring av filnavn\n"
 
 #, c-format
 msgid ""
 "Cannot open tar archive\n"
 "%s"
 msgstr ""
-"Kunne ikke pne tar-arkiv\n"
+"Klarte ikke pne tar-arkiv\n"
 "%s"
 
 msgid "Inconsistent tar archive"
-msgstr "Ukonsistent tar-arkiv"
+msgstr "Inkonsistent tar-arkiv"
 
 msgid "Unexpected EOF on archive file"
-msgstr "Uventet EOF i arkivfilen"
+msgstr "Uventet filslutt i arkivfila"
 
 #, c-format
 msgid ""
 "%s\n"
 "doesn't look like a tar archive."
 msgstr ""
+"%s\n"
+"fremstr ikke som et tar-arkiv."
 
 msgid "undelfs: error"
-msgstr ""
+msgstr "undelfs: feil"
 
 msgid "not enough memory"
-msgstr ""
+msgstr "ikke nok minne"
 
 msgid "while allocating block buffer"
-msgstr ""
+msgstr "under reservering av blokkbuffer"
 
 #, c-format
 msgid "open_inode_scan: %d"
-msgstr ""
+msgstr "open_inode_scan: %d"
 
 #, c-format
 msgid "while starting inode scan %d"
-msgstr ""
+msgstr "under oppstart av inode-leting: %d"
 
 #, c-format
 msgid "undelfs: loading deleted files information %d inodes"
-msgstr "undelfs: laster informasjon om slettede filer %d inoder"
+msgstr "undelfs: laster informasjon om slettede filer, %d inoder"
 
 #, c-format
 msgid "while calling ext2_block_iterate %d"
-msgstr ""
+msgstr "under oppkall av ext2_block_iterate: %d"
 
 msgid "no more memory while reallocating array"
-msgstr ""
+msgstr "gikk tom for minne under nyreservering av tabell"
 
 #, c-format
 msgid "while doing inode scan %d"
-msgstr ""
+msgstr "under utfrelse av inode-leting: %d"
 
 #, c-format
 msgid "Cannot open file %s"
-msgstr ""
+msgstr "Klarte ikke pne fila %s"
 
 msgid "undelfs: reading inode bitmap..."
-msgstr "undelfs: leser inode bitmap..."
+msgstr "undelfs: leser inode-bitmap ..."
 
 #, c-format
 msgid ""
 "Cannot load inode bitmap from:\n"
 "%s"
 msgstr ""
+"Klarte ikke laste inode-bitmap fra:\n"
+"%s"
 
 msgid "undelfs: reading block bitmap..."
-msgstr "undelfs: leser blokk bitmap..."
+msgstr "undelfs: leser blokkbitmap ..."
 
 #, c-format
 msgid ""
 "Cannot load block bitmap from:\n"
 "%s"
 msgstr ""
+"Klarte ikke laste blokkbitmap fra:\n"
+"%s"
 
 msgid "vfs_info is not fs!"
-msgstr ""
+msgstr "vfs_info er ikke lik fs"
 
 msgid "You have to chdir to extract files first"
-msgstr ""
+msgstr "Du m bytte mappe for  pakke ut filer"
 
 msgid "while iterating over blocks"
-msgstr ""
+msgstr "under iterasjon over blokker"
 
 #, c-format
 msgid "Cannot open file \"%s\""
-msgstr ""
+msgstr "Klarte ikke pne fila %s"
 
 msgid "Ext2lib error"
-msgstr ""
+msgstr "Ext2lib-feil"
 
 msgid "Invalid value"
-msgstr ""
+msgstr "Ugyldig verdi"
 
 msgid "File was modified. Save with exit?"
-msgstr ""
+msgstr "Fila er endret. Lagre fr avslutning?"
 
 msgid "&Cancel quit"
-msgstr ""
+msgstr "Av&bryt avslutning"
 
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file?"
 msgstr ""
+"Midnight Commander avsluttes.\n"
+"Lagre endret fil?"
 
 msgid "&Line number"
-msgstr ""
+msgstr "&Linjenummer"
 
 msgid "Pe&rcents"
-msgstr ""
+msgstr "&Prosent"
 
 msgid "&Decimal offset"
-msgstr ""
+msgstr "&Desimal posisjon"
 
 msgid "He&xadecimal offset"
-msgstr ""
+msgstr "&Heksadesimal posisjon"
 
 msgid "Goto"
-msgstr "Gtil"
+msgstr "G til"
 
 msgid "ButtonBar|Ascii"
-msgstr ""
+msgstr "ButtonBar|ASCII"
 
 msgid "ButtonBar|HxSrch"
-msgstr ""
+msgstr "ButtonBar|HxSk"
 
 msgid "ButtonBar|UnWrap"
-msgstr ""
+msgstr "ButtonBar|IkBryt"
 
 msgid "ButtonBar|Wrap"
-msgstr ""
+msgstr "ButtonBar|Bryt"
 
 msgid "ButtonBar|Hex"
-msgstr ""
+msgstr "ButtonBar|Hex"
 
 msgid "ButtonBar|Goto"
-msgstr ""
+msgstr "ButtonBar|GTil"
 
 msgid "ButtonBar|Raw"
-msgstr ""
+msgstr "ButtonBar|Rtt"
 
 msgid "ButtonBar|Parse"
-msgstr ""
+msgstr "ButtonBar|Tolket"
 
 msgid "ButtonBar|Unform"
-msgstr ""
+msgstr "ButtonBar|IkForm"
 
 msgid "ButtonBar|Format"
-msgstr ""
+msgstr "ButtonBar|Format"
 
 #, c-format
 msgid ""
 "Failed to read data from child stdout:\n"
 "%s"
 msgstr ""
+"Klarte ikke lese data fra barnets stdout:\n"
+"%s"
 
 #, c-format
 msgid ""
@@ -4254,36 +4499,45 @@ msgid ""
 "%s\n"
 "Data may have been written or not"
 msgstr ""
+"Klarte ikke lukke fila:\n"
+"%s\n"
+"Data ble skrevet, eller kanskje ikke!"
 
 #, c-format
 msgid ""
 "Cannot save file:\n"
 "%s"
 msgstr ""
+"Klarte ikke lagre fil:\n"
+"%s"
 
 msgid "View: "
-msgstr ""
+msgstr "Vis:  "
 
 #, c-format
 msgid ""
 "Cannot open \"%s\"\n"
 "%s"
 msgstr ""
+"Klarte ikke pne %s\n"
+"%s"
 
 msgid "Cannot view: not a regular file"
-msgstr ""
+msgstr "Klarte ikke vise: Dette er ikke en vanlig fil"
 
 #, c-format
 msgid ""
 "Cannot open \"%s\" in parse mode\n"
 "%s"
 msgstr ""
+"Klarte ikke pne %s fortolket:\n"
+"%s"
 
 msgid "Search done"
-msgstr ""
+msgstr "Sket er ferdig"
 
 msgid "Continue from beginning?"
-msgstr ""
+msgstr "Fortsett fra begynnelsen?"
 
 msgid "Cannot fetch a local copy of /ftp://some.host/editme.txt"
-msgstr ""
+msgstr "Klarte ikke hente en lokal kopi av /ftp://some.host/editme.txt"
Binary files mc-4.8.23/po/nl.gmo and mc-4.8.24/po/nl.gmo differ
diff -urpN mc-4.8.23/po/nl.po mc-4.8.24/po/nl.po
--- mc-4.8.23/po/nl.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/nl.po	2020-01-19 02:04:52.000000000 +0400
@@ -14,8 +14,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Dutch (http://www.transifex.com/mc/mc/language/nl/)\n"
 "Language: nl\n"
@@ -488,6 +488,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "De TERM omgevingsvariabele is niet gezet!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1368,6 +1380,9 @@ msgstr "&Nieuw"
 msgid "&Close"
 msgstr "&Sluiten"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "&Opslaan als..."
 
@@ -1804,6 +1819,13 @@ msgstr "Er kan geen lokale kopie van %s
 msgid "The shell is already running a command"
 msgstr "De shell voert al een opdracht uit"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Geen xterm en geen Linux console; \n"
+"de vensters kunnen niet geschakeld worden."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Typ 'exit' om naar de Midnight Commander terug te keren"
 
@@ -2364,13 +2386,6 @@ msgstr ""
 "Beide panelen moeten in de listingsmodus\n"
 "staan om dit commando te gebruiken"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Geen xterm en geen Linux console; \n"
-"de vensters kunnen niet geschakeld worden."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "'%s' is  geen symbolische link"
@@ -2437,9 +2452,6 @@ msgstr ""
 "Veranderen naar map \"%s\" mislukt \n"
 "%s "
 
-msgid "Cannot read directory contents"
-msgstr "Kan mapinhoud niet lezen"
-
 msgid "Parameter"
 msgstr "Parameter"
 
@@ -3392,6 +3404,9 @@ msgstr "Toon mappen&grootte"
 msgid "Command &history"
 msgstr "&Opdrachtengeschiedenis"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "&Mappen hotslist"
 
@@ -3617,6 +3632,9 @@ msgstr "Selectie wissen"
 msgid "Do you really want to execute?"
 msgstr "Wilt u die opdracht echt uitvoeren? "
 
+msgid "Cannot read directory contents"
+msgstr "Kan mapinhoud niet lezen"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "Door gebruiker gedefinieerde formaat lijkt onjuist, gebruik de standaard."
Binary files mc-4.8.23/po/pl.gmo and mc-4.8.24/po/pl.gmo differ
diff -urpN mc-4.8.23/po/pl.po mc-4.8.24/po/pl.po
--- mc-4.8.23/po/pl.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/pl.po	2020-01-19 02:04:52.000000000 +0400
@@ -9,8 +9,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 15:10+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 16:22+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Polish (http://www.transifex.com/mc/mc/language/pl/)\n"
 "Language: pl\n"
@@ -488,6 +488,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "Zmienna rodowiskowa TERM nie jest ustawiona.\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr "Nie mona sprawdzi potoku SIGWINCH"
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "Nie mona utworzy potoku dla SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "Nie mona skonfigurowa koca zapisu potoku SIGWINCH"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "Nie mona skonfigurowa koca odczytu potoku SIGWINCH"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1378,6 +1390,9 @@ msgstr "&Nowy"
 msgid "&Close"
 msgstr "&Zamknij"
 
+msgid "&History..."
+msgstr "&Historia"
+
 msgid "Save &as..."
 msgstr "Z&apisz jako"
 
@@ -1813,6 +1828,13 @@ msgstr "Nie mona pobra lokalnej kopi
 msgid "The shell is already running a command"
 msgstr "Powoka wykonuje ju polecenie"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Panele mog by przeczane tylko\n"
+"na konsoli xterm lub Linux."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Wpisanie exit powrci do programu Midnight Commander"
 
@@ -2372,13 +2394,6 @@ msgstr ""
 "Aby wykorzysta to polecenie, naley ustawi\n"
 "oba okna na wywietlanie listy plikw"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Panele mog by przeczane tylko\n"
-"na konsoli xterm lub Linux."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "%s nie jest dowizaniem symbolicznym"
@@ -2445,9 +2460,6 @@ msgstr ""
 "Nie mona zmieni katalogu na %s\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Nie mona odczyta zawartoci katalogu"
-
 msgid "Parameter"
 msgstr "Parametr"
 
@@ -3408,6 +3420,9 @@ msgstr "Wyw&ietl rozmiary katalogw"
 msgid "Command &history"
 msgstr "&Historia polece"
 
+msgid "Viewed/edited files hi&story"
+msgstr "Hi&storia wywietlonych/zmodyfikowanych plikw"
+
 msgid "Di&rectory hotlist"
 msgstr "Lista pod&rcznych katalogw"
 
@@ -3418,7 +3433,7 @@ msgid "&Background jobs"
 msgstr "Zadania w&tle"
 
 msgid "Screen lis&t"
-msgstr "Li&sta ekranw"
+msgstr "&Lista ekranw"
 
 msgid "&Undelete files (ext2fs only)"
 msgstr "&Odtwrz pliki (tylko system plikw ext2)"
@@ -3637,6 +3652,9 @@ msgstr "Odznacz"
 msgid "Do you really want to execute?"
 msgstr "Na pewno wykona?"
 
+msgid "Cannot read directory contents"
+msgstr "Nie mona odczyta zawartoci katalogu"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Format uytkownika jest nieprawidowy, przywrcono domylny."
 
Binary files mc-4.8.23/po/pt.gmo and mc-4.8.24/po/pt.gmo differ
diff -urpN mc-4.8.23/po/pt.po mc-4.8.24/po/pt.po
--- mc-4.8.23/po/pt.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/pt.po	2020-01-19 02:04:52.000000000 +0400
@@ -11,8 +11,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-05 11:24+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-17 23:30+0000\n"
 "Last-Translator: Gilberto Jorge <gmj125@gmail.com>\n"
 "Language-Team: Portuguese (http://www.transifex.com/mc/mc/language/pt/)\n"
 "Language: pt\n"
@@ -486,6 +486,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "A varivel de ambiente TERM foi limpa!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr "No  possvel verificar o pipe SIGWINCH"
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "No  possvel criar pipe para SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "No  possvel configurar o ponto de escrita do pipe do SIGWINCH"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "No  possvel configurar o ponto de leitura do pipe do SIGWINCH"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1374,6 +1386,9 @@ msgstr "&Novo"
 msgid "&Close"
 msgstr "&Fechar"
 
+msgid "&History..."
+msgstr "&Histrico..."
+
 msgid "Save &as..."
 msgstr "Guard&ar como..."
 
@@ -1810,6 +1825,13 @@ msgstr "No  possvel obter uma copi
 msgid "The shell is already running a command"
 msgstr "A shell j est a executar um comando"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"No  uma consola xterm ou Linux;\n"
+"os painis no podem ser comutados."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Digite 'exit' para voltar ao Midnight Commander"
 
@@ -2369,13 +2391,6 @@ msgstr ""
 "Ambos os painis deveriam estar no modo de listagem\n"
 "para usar este comando"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"No  uma consola xterm ou Linux;\n"
-"os painis no podem ser comutados."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "'%s' no  uma ligao simblica"
@@ -2442,9 +2457,6 @@ msgstr ""
 "No  possvel chdir para \"%s\"\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "No  possvel ler contedo do diretrio"
-
 msgid "Parameter"
 msgstr "Parmetro"
 
@@ -3400,6 +3412,9 @@ msgstr "Mostrar tamanho de diretrios"
 msgid "Command &history"
 msgstr "&Histrico de comandos"
 
+msgid "Viewed/edited files hi&story"
+msgstr "Hi&strico de ficheiros visualizados/editados"
+
 msgid "Di&rectory hotlist"
 msgstr "Hotlist de di&retrios"
 
@@ -3625,6 +3640,9 @@ msgstr "Cancelar seleo"
 msgid "Do you really want to execute?"
 msgstr "Deseja mesmo executar?"
 
+msgid "Cannot read directory contents"
+msgstr "No  possvel ler contedo do diretrio"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "Formato indicado pelo utilizador parece invlido, a reverter para defeito."
Binary files mc-4.8.23/po/pt_BR.gmo and mc-4.8.24/po/pt_BR.gmo differ
diff -urpN mc-4.8.23/po/pt_BR.po mc-4.8.24/po/pt_BR.po
--- mc-4.8.23/po/pt_BR.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/pt_BR.po	2020-01-19 02:04:52.000000000 +0400
@@ -13,8 +13,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Portuguese (Brazil) (http://www.transifex.com/mc/mc/language/"
 "pt_BR/)\n"
@@ -487,6 +487,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "A varivel de ambiente TERM no foi definida!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1332,6 +1344,9 @@ msgstr "&Novo"
 msgid "&Close"
 msgstr "Fechar"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "Salvar &como..."
 
@@ -1766,6 +1781,13 @@ msgstr "No foi possvel adquirir uma
 msgid "The shell is already running a command"
 msgstr "A shell j est executando um comando"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"No  um xterm nem console linux;\n"
+"Os paines no podem ser ativados."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2323,13 +2345,6 @@ msgstr ""
 "Ambos painis deveriam estar no modo de\n"
 "listagem para usar este comando"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"No  um xterm nem console linux;\n"
-"Os paines no podem ser ativados."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2392,9 +2407,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr "Parmetro"
 
@@ -3324,6 +3336,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3549,6 +3564,9 @@ msgstr "Desselecionar"
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "Formato disponibilizado pelo usurio parece invlido, voltando ao padro."
Binary files mc-4.8.23/po/ro.gmo and mc-4.8.24/po/ro.gmo differ
diff -urpN mc-4.8.23/po/ro.po mc-4.8.24/po/ro.po
--- mc-4.8.23/po/ro.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/ro.po	2020-01-19 02:04:52.000000000 +0400
@@ -15,9 +15,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-06-20 16:47+0000\n"
-"Last-Translator: Nicolae Crefelean\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
+"Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Romanian (http://www.transifex.com/mc/mc/language/ro/)\n"
 "Language: ro\n"
 "MIME-Version: 1.0\n"
@@ -490,6 +490,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "Variabila de mediu TERM nu este setat!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1377,6 +1389,9 @@ msgstr "&Nou"
 msgid "&Close"
 msgstr "n&chide"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "Salveaz c&a..."
 
@@ -1813,6 +1828,13 @@ msgstr "Nu se poate prelua o copie local
 msgid "The shell is already running a command"
 msgstr "Terminalul deja ruleaz o comand"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Nu este o consol xterm sau Linux;\n"
+"panourile nu pot fi comutate."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Tastai `exit' pentru a reveni n Midnight Commander"
 
@@ -2372,13 +2394,6 @@ msgstr ""
 "Pentru a utiliza aceast comand ambele\n"
 "trebuie s fie n modul listare"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Nu este o consol xterm sau Linux;\n"
-"panourile nu pot fi comutate."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "'%s' nu este o legtur simbolic"
@@ -2445,9 +2460,6 @@ msgstr ""
 "Nu se poate chdir n \"%s\"\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Nu pot citi coninutul dosarului"
-
 msgid "Parameter"
 msgstr "Parametru"
 
@@ -3403,6 +3415,9 @@ msgstr "Arat mrimea dosarelor"
 msgid "Command &history"
 msgstr "&Istoric comenzi"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "List rapid de dosa&re"
 
@@ -3630,6 +3645,9 @@ msgstr "Deselecteaz"
 msgid "Do you really want to execute?"
 msgstr "Chiar doreti s execui?"
 
+msgid "Cannot read directory contents"
+msgstr "Nu pot citi coninutul dosarului"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "Formatul furnizat de utilizator pare invalid, se revine la cel implicit"
Binary files mc-4.8.23/po/ru.gmo and mc-4.8.24/po/ru.gmo differ
diff -urpN mc-4.8.23/po/ru.po mc-4.8.24/po/ru.po
--- mc-4.8.23/po/ru.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/ru.po	2020-01-19 02:04:52.000000000 +0400
@@ -26,9 +26,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-03 23:22+0000\n"
-"Last-Translator: AlexL <loginov.alex.valer@gmail.com>\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-24 17:03+0000\n"
+"Last-Translator: aborodin <aborodin@vmail.ru>\n"
 "Language-Team: Russian (http://www.transifex.com/mc/mc/language/ru/)\n"
 "Language: ru\n"
 "MIME-Version: 1.0\n"
@@ -505,6 +505,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "  TERM  !\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "     SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "      SIGWINCH"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "      SIGWINCH"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1296,7 +1308,7 @@ msgid "Run sort"
 msgstr " "
 
 msgid "Enter sort options (see manpage) separated by whitespace:"
-msgstr "   (man sort(1)),  :"
+msgstr "   (man sort(1)),  :"
 
 msgid "Sort"
 msgstr ""
@@ -1380,7 +1392,7 @@ msgid ""
 "Continue discards these changes."
 msgstr ""
 "      .\n"
-"     "
+"     ."
 
 msgid "NoName"
 msgstr " "
@@ -1394,6 +1406,9 @@ msgstr "&"
 msgid "&Close"
 msgstr "&"
 
+msgid "&History..."
+msgstr "&..."
+
 msgid "Save &as..."
 msgstr " &..."
 
@@ -1830,6 +1845,13 @@ msgstr " 
 msgid "The shell is already running a command"
 msgstr "   "
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"  xterm    Linux;\n"
+"    ."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr " exit    Midnight Commander"
 
@@ -2071,7 +2093,7 @@ msgid "&Long file list"
 msgstr "&"
 
 msgid "&User defined:"
-msgstr "& "
+msgstr "& "
 
 msgid "columns"
 msgstr ""
@@ -2389,13 +2411,6 @@ msgstr ""
 "   \n"
 "      "
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"  xterm    Linux;\n"
-"    ."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "%s    "
@@ -2462,9 +2477,6 @@ msgstr ""
 "   \"%s\"\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "   "
-
 msgid "Parameter"
 msgstr ""
 
@@ -2919,10 +2931,10 @@ msgid "Don't overwrite with &zero length
 msgstr "   & "
 
 msgid "&Older"
-msgstr ""
+msgstr "&"
 
 msgid "S&maller"
-msgstr ""
+msgstr "&"
 
 msgid "&Size differs"
 msgstr "&  "
@@ -3423,6 +3435,9 @@ msgstr "& 
 msgid "Command &history"
 msgstr "&  "
 
+msgid "Viewed/edited files hi&story"
+msgstr "& / "
+
 msgid "Di&rectory hotlist"
 msgstr " & "
 
@@ -3652,6 +3667,9 @@ msgstr " "
 msgid "Do you really want to execute?"
 msgstr "    ?"
 
+msgid "Cannot read directory contents"
+msgstr "   "
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "   ,   ."
 
@@ -3805,7 +3823,7 @@ msgid ""
 "It seems that all your keys already\n"
 "work fine. That's great."
 msgstr ""
-",     \n"
+",     \n"
 " .  !"
 
 msgid "&Discard"
@@ -4047,7 +4065,7 @@ msgid ""
 "Corrupted cpio header encountered in\n"
 "%s"
 msgstr ""
-"  cpio  \n"
+"  cpio  \n"
 "%s"
 
 #, c-format
@@ -4358,7 +4376,7 @@ msgid ""
 "doesn't look like a tar archive."
 msgstr ""
 "%s\n"
-"    tar"
+"    tar."
 
 msgid "undelfs: error"
 msgstr "undelfs: "
Binary files mc-4.8.23/po/sk.gmo and mc-4.8.24/po/sk.gmo differ
diff -urpN mc-4.8.23/po/sk.po mc-4.8.24/po/sk.po
--- mc-4.8.23/po/sk.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/sk.po	2020-01-19 02:04:52.000000000 +0400
@@ -5,6 +5,7 @@
 # Translators:
 # Duan Lago <inactive+dudko@transifex.com>, 2011
 # Ivan Masr <helix84@centrum.sk>, 2015
+# hualahyja, 2019
 # Jajo Pajo, 2016
 # Jose Riha <jose1711@gmail.com>, 2012
 # Jose Riha <jose1711@gmail.com>, 2012,2017
@@ -14,8 +15,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Slovak (http://www.transifex.com/mc/mc/language/sk/)\n"
 "Language: sk\n"
@@ -109,19 +110,21 @@ msgstr ""
 msgid ""
 "Number out of range (should be in byte range, 0 <= n <= 0xFF, expressed in "
 "hex)"
-msgstr ""
+msgstr "slo mimo rozsah (treba jeden bajt, 0 <= n <= 0xFF,  estnstkovo)"
 
 msgid "Invalid character"
-msgstr ""
+msgstr "Neplatn znak"
 
 msgid "Unmatched quotes character"
-msgstr ""
+msgstr "Neprny poet vodzoviek"
 
 #, c-format
 msgid ""
 "Hex pattern error at position %d:\n"
 "%s."
 msgstr ""
+"Chyba hexa vzorky na pozci %d:\n"
+"%s."
 
 msgid "Search string not found"
 msgstr "Hadan znak nebol njden"
@@ -174,6 +177,9 @@ msgid ""
 "%s\n"
 "Default skin has been loaded"
 msgstr ""
+"Nemono poui schmu  '%s'  s podporou true color:\n"
+"%s\n"
+"Bola naitan zkladn schma"
 
 #, c-format
 msgid ""
@@ -186,16 +192,16 @@ msgstr ""
 "Bol natan predvolen vzhad"
 
 msgid "True color not supported with ncurses."
-msgstr ""
+msgstr "Reim True color nie je v ncurses podporovan."
 
 msgid "True color not supported in this slang version."
-msgstr ""
+msgstr "Reim True color nie je podpora v tejto verzii slang."
 
 msgid "Your terminal doesn't even seem to support 256 colors."
-msgstr ""
+msgstr "V terminl asi nepodporuje ani 256 farieb."
 
 msgid "Set COLORTERM=truecolor if your terminal really supports true colors."
-msgstr ""
+msgstr "Ak v terminl proporuje True color, nastavte COLORTERM=truecolor."
 
 msgid "Escape"
 msgstr "Escape"
@@ -483,6 +489,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "Premenn prostredia TERM nie je nastaven!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "Nemono vytvori rru pre SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "Nie je mon nastavi zapisovanie v SIGWINCH rre"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "Nie je mon nastavi tanie SIGWINCH rry"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -492,25 +510,25 @@ msgstr ""
 "Skontrolujte premenn prostredia TERM.\n"
 
 msgid "B"
-msgstr ""
+msgstr "B"
 
 msgid "kB"
-msgstr ""
+msgstr "kB"
 
 msgid "KiB"
-msgstr ""
+msgstr "KiB"
 
 msgid "MB"
-msgstr ""
+msgstr "MB"
 
 msgid "MiB"
-msgstr ""
+msgstr "MiB"
 
 msgid "GB"
-msgstr ""
+msgstr "GB"
 
 msgid "GiB"
-msgstr ""
+msgstr "GiB"
 
 msgid "Cannot create pipe descriptor"
 msgstr "Nemono vytvori popisova rry"
@@ -639,7 +657,7 @@ msgstr "Chyba"
 
 #, c-format
 msgid "%s (%d)"
-msgstr ""
+msgstr "%s (%d)"
 
 msgid "&Abort"
 msgstr "p&Rerui"
@@ -660,7 +678,7 @@ msgid "Print last working directory to s
 msgstr "Tlai posledn pracovn adresr do zadanho sboru"
 
 msgid "<file>"
-msgstr ""
+msgstr "<file>"
 
 msgid "Enables subshell support (default)"
 msgstr "Zapna podporu pre subshell (tandardne)"
@@ -675,7 +693,7 @@ msgid "Set debug level"
 msgstr "Nastavi ladiacu rove"
 
 msgid "<integer>"
-msgstr ""
+msgstr "<integer>"
 
 msgid "Launches the file viewer on a file"
 msgstr "Spust prehliada sborov na sbore"
@@ -684,7 +702,7 @@ msgid "Edit files"
 msgstr "Upravi sbory"
 
 msgid "<file> ..."
-msgstr ""
+msgstr "<file> ..."
 
 msgid "Forces xterm features"
 msgstr "Vynti funkcie xterm"
@@ -727,7 +745,7 @@ msgid "Specifies a color configuration"
 msgstr "Uruje farebn konfigurciu"
 
 msgid "<string>"
-msgstr ""
+msgstr "<string>"
 
 msgid "Show mc with specified skin"
 msgstr "Zobrazi mc s uvedenou tmou vzhadu"
@@ -800,13 +818,13 @@ msgid "Color options"
 msgstr "Monosti farieb"
 
 msgid "[+lineno] file1[:lineno] [file2[:lineno]...]"
-msgstr ""
+msgstr "[+lineno] file1[:lineno] [file2[:lineno]...]"
 
 msgid "file"
 msgstr "sbor"
 
 msgid "file1 file2"
-msgstr ""
+msgstr "file1 file2"
 
 msgid "[this_dir] [other_panel_dir]"
 msgstr "[tento_adresr] [adresr_v_druhom_paneli]"
@@ -1369,6 +1387,9 @@ msgstr "&Nov"
 msgid "&Close"
 msgstr "&Zatvori"
 
+msgid "&History..."
+msgstr "&Histria..."
+
 msgid "Save &as..."
 msgstr "Uloi &ako..."
 
@@ -1653,7 +1674,7 @@ msgstr ""
 "napsan pre Midnight Commander."
 
 msgid "Copyright (C) 1996-2019 the Free Software Foundation"
-msgstr ""
+msgstr "Copyright (C) 1996-2019 the Free Software Foundation"
 
 msgid "About"
 msgstr "O aplikcii"
@@ -1805,6 +1826,13 @@ msgstr "Nemono stiahnu loklnu kp
 msgid "The shell is already running a command"
 msgstr "Shell u vykonva prkaz"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Konzola nie je xterm alebo Linux;\n"
+"nemono prepn panely."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Napsanm exit sa vrtite do aplikcie Midnight Commander"
 
@@ -1841,10 +1869,10 @@ msgstr ""
 "%s"
 
 msgid "&Ignore"
-msgstr ""
+msgstr "&Ignorova"
 
 msgid "Ignore &all"
-msgstr ""
+msgstr "Ignorova &vetky"
 
 msgid "&Retry"
 msgstr "&Zopakova"
@@ -1942,7 +1970,7 @@ msgid "Sa&fe delete"
 msgstr "&Bezpen zmazanie"
 
 msgid "Safe overwrite"
-msgstr ""
+msgstr "Bezpen prepsanie"
 
 msgid "A&uto save setup"
 msgstr "A&utomaticky uklada konfigurciu"
@@ -2002,7 +2030,7 @@ msgid "Pa&ge scrolling"
 msgstr "&Posvanie strnky"
 
 msgid "Center &scrolling"
-msgstr ""
+msgstr "Centrova po&svanie"
 
 msgid "&Mouse page scrolling"
 msgstr "Posvanie strnky &myou"
@@ -2055,7 +2083,7 @@ msgid "User &mini status"
 msgstr "Pouvate. &mini status"
 
 msgid "Listing format"
-msgstr ""
+msgstr "Formt vpisu"
 
 msgid "Executable &first"
 msgstr "N&ajprv spustiten"
@@ -2364,13 +2392,6 @@ msgstr ""
 "Oba panely by mali by v reime vpisu,\n"
 "aby ste mohli poui tento prkaz"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Konzola nie je xterm alebo Linux;\n"
-"nemono prepn panely."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "%s nie je symbolick odkaz"
@@ -2437,9 +2458,6 @@ msgstr ""
 "Nemono chdir do %s\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Nepodarilo sa nata obsah adresra"
-
 msgid "Parameter"
 msgstr "Parameter"
 
@@ -2548,6 +2566,10 @@ msgid ""
 "\n"
 "Option Stable Symlinks will be disabled"
 msgstr ""
+"Nie je mon vytvori stabiln symbolick odkazy na neloklnych sborovch "
+"systmoch:\n"
+"\n"
+"Voba Stabiln symbolick odkazy bude vypnut"
 
 #, c-format
 msgid ""
@@ -2748,6 +2770,8 @@ msgid ""
 "Cannot read source file \"%s\"\n"
 "%s"
 msgstr ""
+"Nie je mon ta zdrojov sbor \"%s\"\n"
+"%s"
 
 #, c-format
 msgid ""
@@ -2832,7 +2856,7 @@ msgstr ""
 
 #, c-format
 msgid "Directories: %zu, total size: %s"
-msgstr ""
+msgstr "Adresrov: %zu, spolu: %s"
 
 msgid "Sorry, I could not put the job in background"
 msgstr "utujeme, nepodarilo sa presun lohu do pozadia"
@@ -2864,13 +2888,13 @@ msgid "%ld B/s"
 msgstr "%ld B/s"
 
 msgid "New     :"
-msgstr ""
+msgstr "Nov:"
 
 msgid "Existing:"
-msgstr ""
+msgstr "Existujci:"
 
 msgid "Overwrite this file?"
-msgstr ""
+msgstr "Prepsa tento sbor?"
 
 msgid "A&ppend"
 msgstr "&Prida"
@@ -2879,19 +2903,19 @@ msgid "&Reget"
 msgstr "&Znovu zska"
 
 msgid "Overwrite all files?"
-msgstr ""
+msgstr "Prepsa vetky sbory?"
 
 msgid "Don't overwrite with &zero length file"
 msgstr ""
 
 msgid "&Older"
-msgstr ""
+msgstr "&Star"
 
 msgid "S&maller"
-msgstr ""
+msgstr "&Men"
 
 msgid "&Size differs"
-msgstr ""
+msgstr "Rzna &vekos"
 
 msgid "File exists"
 msgstr "Sbor existuje"
@@ -2982,7 +3006,7 @@ msgstr "&Editcia - F4"
 
 #, c-format
 msgid "Found: %lu"
-msgstr ""
+msgstr "Njden: %lu"
 
 msgid "Malformed regular expression"
 msgstr "Chybn regulrny vraz"
@@ -3033,18 +3057,18 @@ msgstr "Skonen"
 #, c-format
 msgid "Finished (ignored %zu directory)"
 msgid_plural "Finished (ignored %zu directories)"
-msgstr[0] ""
-msgstr[1] ""
-msgstr[2] ""
-msgstr[3] ""
+msgstr[0] "Ukonen (Ignorovan %zu adresr)"
+msgstr[1] "Ukonen (Ignorovan %zu adresre)"
+msgstr[2] "Ukonen (Ignorovanch %zu adresrov)"
+msgstr[3] "Ukonen (Ignorovanch %zu adresrov)"
 
 #, c-format
 msgid "Find File: \"%s\". Content: \"%s\""
-msgstr ""
+msgstr "Vyada sbor: \"%s\". Obsahuje: \"%s\""
 
 #, c-format
 msgid "Find File: \"%s\""
-msgstr ""
+msgstr "Vyhada sbor: \"%s\""
 
 msgid "Searching"
 msgstr "Had sa"
@@ -3206,10 +3230,10 @@ msgstr "Vekos: %s"
 #, c-format
 msgid " (%lu block)"
 msgid_plural " (%lu blocks)"
-msgstr[0] ""
-msgstr[1] ""
-msgstr[2] ""
-msgstr[3] ""
+msgstr[0] " (%lu blok)"
+msgstr[1] " (%lu bloky)"
+msgstr[2] " (%lu blokov)"
+msgstr[3] " (%lu blokov)"
 
 #, c-format
 msgid "Owner:      %s/%s"
@@ -3276,7 +3300,7 @@ msgid "&Info"
 msgstr "&Info"
 
 msgid "&Listing format..."
-msgstr ""
+msgstr "&Formt vpisu..."
 
 msgid "&Sort order..."
 msgstr "&Poradie vpisu..."
@@ -3389,6 +3413,9 @@ msgstr "Zobraz&i vekos adresrov"
 msgid "Command &history"
 msgstr "&Histria prkazov"
 
+msgid "Viewed/edited files hi&story"
+msgstr "Zobrazen/zmenen hi&stria sborov"
+
 msgid "Di&rectory hotlist"
 msgstr "Hotlist ad&resra"
 
@@ -3443,10 +3470,10 @@ msgstr "Panely:"
 #, c-format
 msgid "You have %zu opened screen. Quit anyway?"
 msgid_plural "You have %zu opened screens. Quit anyway?"
-msgstr[0] ""
-msgstr[1] ""
-msgstr[2] ""
-msgstr[3] ""
+msgstr[0] "Mte u %zu otvoren obrazovku. Aj tak ods?"
+msgstr[1] "Mte u %zu otvoren obrazovky. Aj tak ods?"
+msgstr[2] "Mte u %zu otvorench obrazoviek. Aj tak ods?"
+msgstr[3] "Mte u %zu otvorench obrazoviek. Aj tak ods?"
 
 msgid "The Midnight Commander"
 msgstr "Midnight Commander"
@@ -3618,6 +3645,9 @@ msgstr "Zrui vber"
 msgid "Do you really want to execute?"
 msgstr "Skutone chcete spusti?"
 
+msgid "Cannot read directory contents"
+msgstr "Nepodarilo sa nata obsah adresra"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "Pouvateom dodan formt vyzer by neplatn, vraciam sa k predvolenmu."
@@ -3866,7 +3896,7 @@ msgid "Using the ncursesw library\n"
 msgstr "Pouva sa kninica ncursesw\n"
 
 msgid "With builtin Editor and Aspell support\n"
-msgstr ""
+msgstr "So zabudovanm editorom a podporou Aspell\n"
 
 msgid "With builtin Editor\n"
 msgstr "So zabudovanm editorom\n"
@@ -3908,10 +3938,10 @@ msgid "Data types:"
 msgstr "Typy dt:"
 
 msgid "Home directory:"
-msgstr ""
+msgstr "Domovsk adresr:"
 
 msgid "Profile root directory:"
-msgstr ""
+msgstr "Koreov adresr profilu:"
 
 msgid "System data"
 msgstr "Systmov dta"
@@ -4263,14 +4293,14 @@ msgid "sftp: Password is empty."
 msgstr "sftp: Heslo je przdne."
 
 msgid "sftp: Failure establishing SSH session"
-msgstr ""
+msgstr "sftp: Chyba pri vytvran SSH spojenia"
 
 msgid "sftp: No file handler data present for reading file"
 msgstr "sftp: Na tanie sboru nie s prtomn dta obsluhy sboru"
 
 #, c-format
 msgid "sftp: socket error: %s"
-msgstr ""
+msgstr "sftp: chyba soketu: %s"
 
 #, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
Binary files mc-4.8.23/po/sl.gmo and mc-4.8.24/po/sl.gmo differ
diff -urpN mc-4.8.23/po/sl.po mc-4.8.24/po/sl.po
--- mc-4.8.23/po/sl.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/sl.po	2020-01-19 02:04:52.000000000 +0400
@@ -10,8 +10,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Slovenian (http://www.transifex.com/mc/mc/language/sl/)\n"
 "Language: sl\n"
@@ -469,6 +469,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "TERM okoljska spremenljivka ni nastavljena!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1294,6 +1306,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1722,6 +1737,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2271,11 +2291,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2338,9 +2353,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr "Ne morem prebrati vsebine imenika"
-
 msgid "Parameter"
 msgstr ""
 
@@ -3212,6 +3224,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3441,6 +3456,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr "Ne morem prebrati vsebine imenika"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "Uporabniko podano oblikovanje izgleda neveljavno, uporabljam privzeto."
Binary files mc-4.8.23/po/sr.gmo and mc-4.8.24/po/sr.gmo differ
diff -urpN mc-4.8.23/po/sr.po mc-4.8.24/po/sr.po
--- mc-4.8.23/po/sr.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/sr.po	2020-01-19 02:04:52.000000000 +0400
@@ -9,8 +9,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Serbian (http://www.transifex.com/mc/mc/language/sr/)\n"
 "Language: sr\n"
@@ -477,6 +477,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr "  TERM  !\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1360,6 +1372,9 @@ msgstr "&"
 msgid "&Close"
 msgstr "&"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr " &..."
 
@@ -1796,6 +1811,13 @@ msgstr "   
 msgid "The shell is already running a command"
 msgstr "   "
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"    ;\n"
+"    ."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr " exit     "
 
@@ -2355,13 +2377,6 @@ msgstr ""
 "      \n"
 "   "
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"    ;\n"
-"    ."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "%s   "
@@ -2428,9 +2443,6 @@ msgstr ""
 "      %s\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "     "
-
 msgid "Parameter"
 msgstr ""
 
@@ -3377,6 +3389,9 @@ msgstr " &
 msgid "Command &history"
 msgstr " &"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "&  "
 
@@ -3604,6 +3619,9 @@ msgstr " "
 msgid "Do you really want to execute?"
 msgstr "     ?"
 
+msgid "Cannot read directory contents"
+msgstr "     "
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "     ,   ."
 
Binary files mc-4.8.23/po/sv.gmo and mc-4.8.24/po/sv.gmo differ
diff -urpN mc-4.8.23/po/sv.po mc-4.8.24/po/sv.po
--- mc-4.8.23/po/sv.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/sv.po	2020-01-19 02:04:52.000000000 +0400
@@ -9,13 +9,14 @@
 # Jonas Hultn <jonas@kollektivet.nu>, 2017
 # MagnusHerrlin <m8618@abc.se>, 2016
 # MagnusHerrlin <m8618@abc.se>, 2016
+# Sebastian Rasmussen <sebras@gmail.com>, 2019
 # Slava Zanko <slavazanko@gmail.com>, 2011
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Swedish (http://www.transifex.com/mc/mc/language/sv/)\n"
 "Language: sv\n"
@@ -488,6 +489,18 @@ msgstr "Skift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "Omgivningsvariablen TERM r inte satt!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1374,6 +1387,9 @@ msgstr "&Ny"
 msgid "&Close"
 msgstr "S&tng"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "Spa&ra som..."
 
@@ -1658,7 +1674,7 @@ msgstr ""
 "skriven fr Midnight Commander."
 
 msgid "Copyright (C) 1996-2019 the Free Software Foundation"
-msgstr ""
+msgstr "Copyright (C) 1996-2019 Free Software Foundation"
 
 msgid "About"
 msgstr "Om"
@@ -1810,6 +1826,13 @@ msgstr "En lokal kopia av %s kunde inte
 msgid "The shell is already running a command"
 msgstr "Skalet kr redan ett kommando"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Inte en xterm- eller linuxterminal;\n"
+"panelerna kan inte sls av/p."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Skriv 'exit' fr att tervnda till Midnight Commander"
 
@@ -1947,7 +1970,7 @@ msgid "Sa&fe delete"
 msgstr "S&ker borttagning"
 
 msgid "Safe overwrite"
-msgstr ""
+msgstr "Sker verskrivning"
 
 msgid "A&uto save setup"
 msgstr "A&utospara instllningar"
@@ -2369,13 +2392,6 @@ msgstr ""
 "Bda panelerna mste vara i fillistlge\n"
 "fr att anvnda detta kommando"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Inte en xterm- eller linuxterminal;\n"
-"panelerna kan inte sls av/p."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "'%s' r inte en symbolisk lnk"
@@ -2442,9 +2458,6 @@ msgstr ""
 "Chdir till \"%s\" misslyckades\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr "Kan inte lsa kataloginnehll"
-
 msgid "Parameter"
 msgstr "Parameter"
 
@@ -2529,16 +2542,20 @@ msgid ""
 "Cannot stat hardlink source file \"%s\"\n"
 "%s"
 msgstr ""
+"Kan inte hmta information om kllfil fr hrdlnk %s\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot create target hardlink \"%s\"\n"
 "%s"
 msgstr ""
+"Kan inte skapa ml fr hrdlnk %s\n"
+"%s"
 
 #, c-format
 msgid "Cannot create target hardlink \"%s\""
-msgstr ""
+msgstr "Kan inte skapa ml fr hrdlnk %s"
 
 #, c-format
 msgid ""
@@ -2874,13 +2891,13 @@ msgid "%ld B/s"
 msgstr "%ld B/s"
 
 msgid "New     :"
-msgstr ""
+msgstr "Ny      :"
 
 msgid "Existing:"
-msgstr ""
+msgstr "Existerande:"
 
 msgid "Overwrite this file?"
-msgstr ""
+msgstr "Skriv ver denna fil?"
 
 msgid "A&ppend"
 msgstr "&Lgg till"
@@ -2889,19 +2906,19 @@ msgid "&Reget"
 msgstr "&Hmta om"
 
 msgid "Overwrite all files?"
-msgstr ""
+msgstr "Skriv ver alla filer?"
 
 msgid "Don't overwrite with &zero length file"
-msgstr ""
+msgstr "Skriv inte ver med &noll-lngdsfil"
 
 msgid "&Older"
-msgstr ""
+msgstr "&Gammal"
 
 msgid "S&maller"
-msgstr ""
+msgstr "M&indre"
 
 msgid "&Size differs"
-msgstr ""
+msgstr "&Storlek skiljer sig"
 
 msgid "File exists"
 msgstr "Filen finns"
@@ -3048,11 +3065,11 @@ msgstr[1] "Klar (ignorerade %zu kataloge
 
 #, c-format
 msgid "Find File: \"%s\". Content: \"%s\""
-msgstr ""
+msgstr "Hitta fil: %s. Innehll: %s"
 
 #, c-format
 msgid "Find File: \"%s\""
-msgstr ""
+msgstr "Hitta fil: %s"
 
 msgid "Searching"
 msgstr "Sker"
@@ -3395,6 +3412,9 @@ msgstr "V&isa katalogstorlekar"
 msgid "Command &history"
 msgstr "Kommando-&historik"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "Katalog&favoriter"
 
@@ -3620,6 +3640,9 @@ msgstr "Avmarkera"
 msgid "Do you really want to execute?"
 msgstr "Vill du verkligen exekvera?"
 
+msgid "Cannot read directory contents"
+msgstr "Kan inte lsa kataloginnehll"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Det angivna formatet ser ogiltigt ut, faller tillbaka till standard."
 
@@ -3866,7 +3889,7 @@ msgid "Using the ncursesw library\n"
 msgstr "Anvnder ncursesw-biblioteket\n"
 
 msgid "With builtin Editor and Aspell support\n"
-msgstr ""
+msgstr "Med inbyggd redigerare och std fr aspell\n"
 
 msgid "With builtin Editor\n"
 msgstr "Med inbyggd editor\n"
Binary files mc-4.8.23/po/szl.gmo and mc-4.8.24/po/szl.gmo differ
diff -urpN mc-4.8.23/po/szl.po mc-4.8.24/po/szl.po
--- mc-4.8.23/po/szl.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/szl.po	2020-01-19 02:04:52.000000000 +0400
@@ -7,8 +7,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Silesian (http://www.transifex.com/mc/mc/language/szl/)\n"
 "Language: szl\n"
@@ -459,6 +459,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1282,6 +1294,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1710,6 +1725,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2259,11 +2279,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2326,9 +2341,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3198,6 +3210,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3425,6 +3440,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/ta.gmo and mc-4.8.24/po/ta.gmo differ
diff -urpN mc-4.8.23/po/ta.po mc-4.8.24/po/ta.po
--- mc-4.8.23/po/ta.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/ta.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Tamil (http://www.transifex.com/mc/mc/language/ta/)\n"
 "Language: ta\n"
@@ -459,6 +459,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1282,6 +1294,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1710,6 +1725,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2259,11 +2279,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2326,9 +2341,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3196,6 +3208,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3421,6 +3436,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/te.gmo and mc-4.8.24/po/te.gmo differ
diff -urpN mc-4.8.23/po/te.po mc-4.8.24/po/te.po
--- mc-4.8.23/po/te.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/te.po	2020-01-19 02:04:52.000000000 +0400
@@ -7,8 +7,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Telugu (http://www.transifex.com/mc/mc/language/te/)\n"
 "Language: te\n"
@@ -458,6 +458,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr ""
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1281,6 +1293,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1709,6 +1724,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2258,11 +2278,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2325,9 +2340,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3195,6 +3207,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3420,6 +3435,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/tr.gmo and mc-4.8.24/po/tr.gmo differ
diff -urpN mc-4.8.23/po/tr.po mc-4.8.24/po/tr.po
--- mc-4.8.23/po/tr.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/tr.po	2020-01-19 02:04:52.000000000 +0400
@@ -6,6 +6,7 @@
 # Hsamettin Ertrk <hsmertk@gmail.com>, 2016
 # Muhammet Kara <muhammetk@gmail.com>, 2014
 # Muhammet Kara <muhammetk@gmail.com>, 2014
+# Serdar Salam <teknomobil@msn.com>, 2019-2020
 # Slava Zanko <slavazanko@gmail.com>, 2011
 # yusuf <yusuf.aydemir@pisilinux.org>, 2015-2016
 # yusuf <yusuf.aydemir@pisilinux.org>, 2016-2017
@@ -13,9 +14,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
-"Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2020-01-18 12:57+0000\n"
+"Last-Translator: Serdar Salam <teknomobil@msn.com>\n"
 "Language-Team: Turkish (http://www.transifex.com/mc/mc/language/tr/)\n"
 "Language: tr\n"
 "MIME-Version: 1.0\n"
@@ -113,7 +114,7 @@ msgid "Invalid character"
 msgstr "Geersiz karakter"
 
 msgid "Unmatched quotes character"
-msgstr ""
+msgstr "Elemeyen trnak iareti karakteri"
 
 #, c-format
 msgid ""
@@ -183,13 +184,13 @@ msgstr ""
 "Varsaylan nyz yklendi"
 
 msgid "True color not supported with ncurses."
-msgstr ""
+msgstr "Gerek renk ncurses ile desteklenmiyor."
 
 msgid "True color not supported in this slang version."
-msgstr ""
+msgstr "Gerek renk bu slang srmnde desteklenmiyor."
 
 msgid "Your terminal doesn't even seem to support 256 colors."
-msgstr ""
+msgstr "Ubiriminiz 256 rengi bile desteklemiyor gibi grnyor."
 
 msgid "Set COLORTERM=truecolor if your terminal really supports true colors."
 msgstr ""
@@ -480,6 +481,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "TERM evre deikeni atanmam!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -657,7 +670,7 @@ msgid "Print last working directory to s
 msgstr "Belirlenen dosyaya son allan dizini yaz"
 
 msgid "<file>"
-msgstr ""
+msgstr "<file>"
 
 msgid "Enables subshell support (default)"
 msgstr "Altkabuk desteini etkinletirir (ntanml)"
@@ -672,7 +685,7 @@ msgid "Set debug level"
 msgstr "Hata ayklama seviyesini ayarla"
 
 msgid "<integer>"
-msgstr ""
+msgstr "<integer>"
 
 msgid "Launches the file viewer on a file"
 msgstr "Bir dosyay dosya gstericide aar"
@@ -681,7 +694,7 @@ msgid "Edit files"
 msgstr "Dosyasyalar dzenle"
 
 msgid "<file> ..."
-msgstr ""
+msgstr "<file> ..."
 
 msgid "Forces xterm features"
 msgstr "xterm zelliklerini etkinletirir"
@@ -723,7 +736,7 @@ msgid "Specifies a color configuration"
 msgstr "Bir renk yaplandrmas belirtir"
 
 msgid "<string>"
-msgstr ""
+msgstr "<string>"
 
 msgid "Show mc with specified skin"
 msgstr "Mc'yi belirtilen nyz ile gster"
@@ -1367,6 +1380,9 @@ msgstr "&Yeni"
 msgid "&Close"
 msgstr "&Kapat"
 
+msgid "&History..."
+msgstr "&Gemi..."
+
 msgid "Save &as..."
 msgstr "Farkl kaydet..."
 
@@ -1651,7 +1667,7 @@ msgstr ""
 "Midnight Commander iin yazld"
 
 msgid "Copyright (C) 1996-2019 the Free Software Foundation"
-msgstr ""
+msgstr "Telif hakk (C) 1996-2019 zgr Yazlm Vakf"
 
 msgid "About"
 msgstr "Hakknda"
@@ -1805,6 +1821,13 @@ msgstr "`%s'in yerel kopyas alnamad
 msgid "The shell is already running a command"
 msgstr "Kabukta halen bir komut etkin"
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"Bir xterm ya da Linux konsolu deil;\n"
+" Paneller deitirilemez."
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr "Midnight Commander'a dnmek iin 'exit' yazn"
 
@@ -1841,10 +1864,10 @@ msgstr ""
 " %s"
 
 msgid "&Ignore"
-msgstr ""
+msgstr "&Yoksay"
 
 msgid "Ignore &all"
-msgstr ""
+msgstr "Tmn &yoksay"
 
 msgid "&Retry"
 msgstr "&Tekrar"
@@ -1942,7 +1965,7 @@ msgid "Sa&fe delete"
 msgstr "gvenilir si&lme"
 
 msgid "Safe overwrite"
-msgstr ""
+msgstr "Gvenli zerine yaz"
 
 msgid "A&uto save setup"
 msgstr "&Ayarlar otomatik kaydet"
@@ -2365,13 +2388,6 @@ msgstr ""
 "Bu komutu kullanabilmek iin\n"
 "iki pano da listeleme kipinde olmaldr"
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"Bir xterm ya da Linux konsolu deil;\n"
-" Paneller deitirilemez."
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "'%s' sembolik balant deil"
@@ -2438,9 +2454,6 @@ msgstr ""
 " \"%s\" dizinine geilemedi \n"
 " %s "
 
-msgid "Cannot read directory contents"
-msgstr "Dizin ierii okunamad"
-
 msgid "Parameter"
 msgstr "Parametre"
 
@@ -2869,13 +2882,13 @@ msgid "%ld B/s"
 msgstr "%ld B/s"
 
 msgid "New     :"
-msgstr ""
+msgstr "Yeni     :"
 
 msgid "Existing:"
-msgstr ""
+msgstr "Varolan:"
 
 msgid "Overwrite this file?"
-msgstr ""
+msgstr "Bu dosyann zerine mi?"
 
 msgid "A&ppend"
 msgstr "Sonuna &Ekle"
@@ -2884,19 +2897,19 @@ msgid "&Reget"
 msgstr "&Reget"
 
 msgid "Overwrite all files?"
-msgstr ""
+msgstr "Tm dosyalarn zerine mi?"
 
 msgid "Don't overwrite with &zero length file"
-msgstr ""
+msgstr "&Sfr uzunlukta dosya ile zerine yazlmasn"
 
 msgid "&Older"
-msgstr ""
+msgstr "&Eski"
 
 msgid "S&maller"
-msgstr ""
+msgstr "&Kk"
 
 msgid "&Size differs"
-msgstr ""
+msgstr "&Boyut fark"
 
 msgid "File exists"
 msgstr "Dosya var"
@@ -3043,11 +3056,11 @@ msgstr[1] ""
 
 #, c-format
 msgid "Find File: \"%s\". Content: \"%s\""
-msgstr ""
+msgstr "Dosya Bul: \"%s\". erik: \"%s\""
 
 #, c-format
 msgid "Find File: \"%s\""
-msgstr ""
+msgstr "Dosya Bul: \"%s\""
 
 msgid "Searching"
 msgstr "Aranyor"
@@ -3390,6 +3403,9 @@ msgstr "diz&in boyutlarn gster"
 msgid "Command &history"
 msgstr "Komut Gemii"
 
+msgid "Viewed/edited files hi&story"
+msgstr "Grntlenen/dzenlenen dosya &gemii"
+
 msgid "Di&rectory hotlist"
 msgstr "Dizin listesi"
 
@@ -3615,6 +3631,9 @@ msgstr "Seme"
 msgid "Do you really want to execute?"
 msgstr "Gerekten altrmak istiyor musunuz?"
 
+msgid "Cannot read directory contents"
+msgstr "Dizin ierii okunamad"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr "Kullanc tanml biim geersiz: ntanmls kullanlacak."
 
@@ -3862,7 +3881,7 @@ msgid "Using the ncursesw library\n"
 msgstr "ncursesw kitapl kullanlarak\n"
 
 msgid "With builtin Editor and Aspell support\n"
-msgstr ""
+msgstr "Yerleik dzenleyici ve Aspell destei ile\n"
 
 msgid "With builtin Editor\n"
 msgstr "Yerleik Dzenleyiciyle\n"
@@ -3907,7 +3926,7 @@ msgid "Home directory:"
 msgstr "Ev dizini:"
 
 msgid "Profile root directory:"
-msgstr ""
+msgstr "Profil kk dizini:"
 
 msgid "System data"
 msgstr "Sistem verisi"
@@ -4267,7 +4286,7 @@ msgstr "sftp: Dosya okumak iin hi do
 
 #, c-format
 msgid "sftp: socket error: %s"
-msgstr ""
+msgstr "sftp: soket hatas: %s"
 
 #, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
Binary files mc-4.8.23/po/uk.gmo and mc-4.8.24/po/uk.gmo differ
diff -urpN mc-4.8.23/po/uk.po mc-4.8.24/po/uk.po
--- mc-4.8.23/po/uk.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/uk.po	2020-01-19 02:04:52.000000000 +0400
@@ -9,14 +9,15 @@
 # Sergey Fesyura <pingvein@gmail.com>, 2012-2013
 # Serhii Trykoza <sergey.trikoza@gmail.com>, 2019
 # Slava Zanko <slavazanko@gmail.com>, 2011
+# Vlad Anisimov <uniss@ua.fm>, 2019
 # Yury V. Zaytsev <yury@shurup.com>, 2016
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-05-01 18:12+0000\n"
-"Last-Translator: Andriy Smilyanets <smile.andriy@gmail.com>\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
+"Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Ukrainian (http://www.transifex.com/mc/mc/language/uk/)\n"
 "Language: uk\n"
 "MIME-Version: 1.0\n"
@@ -494,6 +495,18 @@ msgstr "Shift"
 msgid "The TERM environment variable is unset!\n"
 msgstr "  TERM  !\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr "     SIGWINCH"
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr "      SIGWINCH"
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr "      SIGWINCH"
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1377,6 +1390,9 @@ msgstr "&"
 msgid "&Close"
 msgstr "&"
 
+msgid "&History..."
+msgstr "&..."
+
 msgid "Save &as..."
 msgstr " &"
 
@@ -1812,6 +1828,13 @@ msgstr "  
 msgid "The shell is already running a command"
 msgstr "   "
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+"  xterm    Linux.\n"
+"   . "
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr " 'exit',    Midnight Commander"
 
@@ -2370,13 +2393,6 @@ msgstr ""
 "     \n"
 "    "
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-"  xterm    Linux.\n"
-"   . "
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "%s    "
@@ -2443,9 +2459,6 @@ msgstr ""
 "     %s\n"
 "%s "
 
-msgid "Cannot read directory contents"
-msgstr "    "
-
 msgid "Parameter"
 msgstr ""
 
@@ -3402,6 +3415,9 @@ msgstr " &
 msgid "Command &history"
 msgstr "& "
 
+msgid "Viewed/edited files hi&story"
+msgstr "& / "
+
 msgid "Di&rectory hotlist"
 msgstr "&  "
 
@@ -3631,6 +3647,9 @@ msgstr " "
 msgid "Do you really want to execute?"
 msgstr " ?"
 
+msgid "Cannot read directory contents"
+msgstr "    "
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "   ,  ."
Binary files mc-4.8.23/po/vi.gmo and mc-4.8.24/po/vi.gmo differ
diff -urpN mc-4.8.23/po/vi.po mc-4.8.24/po/vi.po
--- mc-4.8.23/po/vi.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/vi.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Vietnamese (http://www.transifex.com/mc/mc/language/vi/)\n"
 "Language: vi\n"
@@ -459,6 +459,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr "Bin mi trn TERM cha c xc nh!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1284,6 +1296,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1712,6 +1727,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2261,11 +2281,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2328,9 +2343,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr "Khng c c ni dung th mc"
-
 msgid "Parameter"
 msgstr ""
 
@@ -3196,6 +3208,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3419,6 +3434,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr "Khng c c ni dung th mc"
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 "nh dng ngi dng a ra c v khng thch hp, chuyn li thnh mc nh."
Binary files mc-4.8.23/po/wa.gmo and mc-4.8.24/po/wa.gmo differ
diff -urpN mc-4.8.23/po/wa.po mc-4.8.24/po/wa.po
--- mc-4.8.23/po/wa.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/wa.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Walloon (http://www.transifex.com/mc/mc/language/wa/)\n"
 "Language: wa\n"
@@ -459,6 +459,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr "Li varive d' evironmint TERM n' est nn metowe!\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1282,6 +1294,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1710,6 +1725,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2259,11 +2279,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2326,9 +2341,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3196,6 +3208,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3421,6 +3436,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/zh_CN.gmo and mc-4.8.24/po/zh_CN.gmo differ
diff -urpN mc-4.8.23/po/zh_CN.po mc-4.8.24/po/zh_CN.po
--- mc-4.8.23/po/zh_CN.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/zh_CN.po	2020-01-19 02:04:52.000000000 +0400
@@ -6,7 +6,7 @@
 # Jacques Yip <cong-ye@163.com>, 2017
 # Jake Li <gnozil@gmail.com>, 2012
 # Kenneth Cheung <zjhken01@163.com>, 2018
-# liushuyu011 <liushuyu011@gmail.com>, 2016,2019
+# shuyu liu <liushuyu011@gmail.com>, 2016,2019
 # Mingcong Bai <jeffbai@aosc.xyz>, 2016,2018
 # qingxianhao <qinghao1@foxmail.com>, 2012
 # qingxianhao <qinghao1@foxmail.com>, 2012
@@ -17,9 +17,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-09 03:13+0000\n"
-"Last-Translator: liushuyu011 <liushuyu011@gmail.com>\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
+"Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Chinese (China) (http://www.transifex.com/mc/mc/language/"
 "zh_CN/)\n"
 "Language: zh_CN\n"
@@ -490,6 +490,18 @@ msgstr "Shift "
 msgid "The TERM environment variable is unset!\n"
 msgstr " TERM !\n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1372,6 +1384,9 @@ msgstr "(&N)"
 msgid "&Close"
 msgstr "(&C)"
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr "(&A)..."
 
@@ -1807,6 +1822,13 @@ msgstr " %s "
 msgid "The shell is already running a command"
 msgstr "Shell "
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+" xterm  Linux \n"
+""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr " 'exit'  Midnight Commander"
 
@@ -2365,13 +2387,6 @@ msgstr ""
 "\n"
 ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-" xterm  Linux \n"
-""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr "%s"
@@ -2438,9 +2453,6 @@ msgstr ""
 "%s\n"
 "%s"
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3390,6 +3402,9 @@ msgstr "(&I)"
 msgid "Command &history"
 msgstr "(&H)"
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr "(&R)"
 
@@ -3613,6 +3628,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr "?"
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ""
 
Binary files mc-4.8.23/po/zh_TW.gmo and mc-4.8.24/po/zh_TW.gmo differ
diff -urpN mc-4.8.23/po/zh_TW.po mc-4.8.24/po/zh_TW.po
--- mc-4.8.23/po/zh_TW.po	2019-06-22 15:45:06.000000000 +0400
+++ mc-4.8.24/po/zh_TW.po	2020-01-19 02:04:52.000000000 +0400
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2019-06-22 13:45+0200\n"
-"PO-Revision-Date: 2019-03-02 12:55+0000\n"
+"POT-Creation-Date: 2020-01-19 02:04+0400\n"
+"PO-Revision-Date: 2019-12-16 01:49+0000\n"
 "Last-Translator: Piotr Drg <piotrdrag@gmail.com>\n"
 "Language-Team: Chinese (Taiwan) (http://www.transifex.com/mc/mc/language/"
 "zh_TW/)\n"
@@ -460,6 +460,18 @@ msgstr ""
 msgid "The TERM environment variable is unset!\n"
 msgstr " TERM  \n"
 
+msgid "Cannot check SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot create pipe for SIGWINCH"
+msgstr ""
+
+msgid "Cannot configure write end of SIGWINCH pipe"
+msgstr ""
+
+msgid "Cannot configure read end of SIGWINCH pipe"
+msgstr ""
+
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
@@ -1285,6 +1297,9 @@ msgstr ""
 msgid "&Close"
 msgstr ""
 
+msgid "&History..."
+msgstr ""
+
 msgid "Save &as..."
 msgstr ""
 
@@ -1713,6 +1728,11 @@ msgstr ""
 msgid "The shell is already running a command"
 msgstr ""
 
+msgid ""
+"Not an xterm or Linux console;\n"
+"the panels cannot be toggled."
+msgstr ""
+
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
@@ -2262,11 +2282,6 @@ msgid ""
 "to use this command"
 msgstr ""
 
-msgid ""
-"Not an xterm or Linux console;\n"
-"the panels cannot be toggled."
-msgstr ""
-
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
@@ -2329,9 +2344,6 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Cannot read directory contents"
-msgstr ""
-
 msgid "Parameter"
 msgstr ""
 
@@ -3197,6 +3209,9 @@ msgstr ""
 msgid "Command &history"
 msgstr ""
 
+msgid "Viewed/edited files hi&story"
+msgstr ""
+
 msgid "Di&rectory hotlist"
 msgstr ""
 
@@ -3420,6 +3435,9 @@ msgstr ""
 msgid "Do you really want to execute?"
 msgstr ""
 
+msgid "Cannot read directory contents"
+msgstr ""
+
 msgid "User supplied format looks invalid, reverting to default."
 msgstr ", ."
 
diff -urpN mc-4.8.23/src/Makefile.am mc-4.8.24/src/Makefile.am
--- mc-4.8.23/src/Makefile.am	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/Makefile.am	2020-01-01 19:52:34.000000000 +0400
@@ -72,6 +72,7 @@ libinternal_la_SOURCES = \
 	clipboard.c clipboard.h \
 	events_init.c events_init.h \
 	execute.c execute.h \
+	file_history.c file_history.h \
 	help.c help.h \
 	history.h \
 	keybind-defaults.c keybind-defaults.h \
diff -urpN mc-4.8.23/src/Makefile.in mc-4.8.24/src/Makefile.in
--- mc-4.8.23/src/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -101,24 +101,14 @@ bin_PROGRAMS = mc$(EXEEXT)
 @ENABLE_BACKGROUND_TRUE@am__append_8 = background.c background.h
 subdir = src
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -174,17 +164,18 @@ libinternal_la_DEPENDENCIES = filemanage
 	$(SUBSHELLLIB)
 am__libinternal_la_SOURCES_DIST = cons.handler.c consaver/cons.saver.h \
 	args.c args.h clipboard.c clipboard.h events_init.c \
-	events_init.h execute.c execute.h help.c help.h history.h \
-	keybind-defaults.c keybind-defaults.h learn.c learn.h setup.c \
-	setup.h textconf.c textconf.h usermenu.c usermenu.h util.c \
-	util.h selcodepage.c selcodepage.h background.c background.h
+	events_init.h execute.c execute.h file_history.c \
+	file_history.h help.c help.h history.h keybind-defaults.c \
+	keybind-defaults.h learn.c learn.h setup.c setup.h textconf.c \
+	textconf.h usermenu.c usermenu.h util.c util.h selcodepage.c \
+	selcodepage.h background.c background.h
 am__objects_1 = cons.handler.lo
 @CHARSET_TRUE@am__objects_2 = selcodepage.lo
 @ENABLE_BACKGROUND_TRUE@am__objects_3 = background.lo
 am_libinternal_la_OBJECTS = $(am__objects_1) args.lo clipboard.lo \
-	events_init.lo execute.lo help.lo keybind-defaults.lo learn.lo \
-	setup.lo textconf.lo usermenu.lo util.lo $(am__objects_2) \
-	$(am__objects_3)
+	events_init.lo execute.lo file_history.lo help.lo \
+	keybind-defaults.lo learn.lo setup.lo textconf.lo usermenu.lo \
+	util.lo $(am__objects_2) $(am__objects_3)
 libinternal_la_OBJECTS = $(am_libinternal_la_OBJECTS)
 AM_V_lt = $(am__v_lt_@AM_V@)
 am__v_lt_ = $(am__v_lt_@AM_DEFAULT_V@)
@@ -212,11 +203,11 @@ am__maybe_remake_depfiles = depfiles
 am__depfiles_remade = ./$(DEPDIR)/args.Plo ./$(DEPDIR)/background.Plo \
 	./$(DEPDIR)/clipboard.Plo ./$(DEPDIR)/cons.handler.Plo \
 	./$(DEPDIR)/events_init.Plo ./$(DEPDIR)/execute.Plo \
-	./$(DEPDIR)/help.Plo ./$(DEPDIR)/keybind-defaults.Plo \
-	./$(DEPDIR)/learn.Plo ./$(DEPDIR)/main.Po \
-	./$(DEPDIR)/selcodepage.Plo ./$(DEPDIR)/setup.Plo \
-	./$(DEPDIR)/textconf.Plo ./$(DEPDIR)/usermenu.Plo \
-	./$(DEPDIR)/util.Plo
+	./$(DEPDIR)/file_history.Plo ./$(DEPDIR)/help.Plo \
+	./$(DEPDIR)/keybind-defaults.Plo ./$(DEPDIR)/learn.Plo \
+	./$(DEPDIR)/main.Po ./$(DEPDIR)/selcodepage.Plo \
+	./$(DEPDIR)/setup.Plo ./$(DEPDIR)/textconf.Plo \
+	./$(DEPDIR)/usermenu.Plo ./$(DEPDIR)/util.Plo
 am__mv = mv -f
 COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
@@ -309,7 +300,6 @@ am__relativize = \
   reldir="$$dir2"
 pkglibexecdir = $(libexecdir)/@PACKAGE@
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -317,18 +307,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -368,10 +355,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -379,13 +363,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -393,12 +371,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -406,24 +379,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -457,7 +422,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -469,12 +433,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -565,10 +525,10 @@ mc_SOURCES = \
 
 libinternal_la_SOURCES = $(SRC_mc_conssaver) args.c args.h clipboard.c \
 	clipboard.h events_init.c events_init.h execute.c execute.h \
-	help.c help.h history.h keybind-defaults.c keybind-defaults.h \
-	learn.c learn.h setup.c setup.h textconf.c textconf.h \
-	usermenu.c usermenu.h util.c util.h $(am__append_7) \
-	$(am__append_8)
+	file_history.c file_history.h help.c help.h history.h \
+	keybind-defaults.c keybind-defaults.h learn.c learn.h setup.c \
+	setup.h textconf.c textconf.h usermenu.c usermenu.h util.c \
+	util.h $(am__append_7) $(am__append_8)
 EXTRA_DIST = $(SRC_maintainer) $(SRC_charset)
 all: all-recursive
 
@@ -683,6 +643,7 @@ distclean-compile:
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/cons.handler.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/events_init.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/execute.Plo@am__quote@ # am--include-marker
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/file_history.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/help.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/keybind-defaults.Plo@am__quote@ # am--include-marker
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/learn.Plo@am__quote@ # am--include-marker
@@ -933,6 +894,7 @@ distclean: distclean-recursive
 	-rm -f ./$(DEPDIR)/cons.handler.Plo
 	-rm -f ./$(DEPDIR)/events_init.Plo
 	-rm -f ./$(DEPDIR)/execute.Plo
+	-rm -f ./$(DEPDIR)/file_history.Plo
 	-rm -f ./$(DEPDIR)/help.Plo
 	-rm -f ./$(DEPDIR)/keybind-defaults.Plo
 	-rm -f ./$(DEPDIR)/learn.Plo
@@ -994,6 +956,7 @@ maintainer-clean: maintainer-clean-recur
 	-rm -f ./$(DEPDIR)/cons.handler.Plo
 	-rm -f ./$(DEPDIR)/events_init.Plo
 	-rm -f ./$(DEPDIR)/execute.Plo
+	-rm -f ./$(DEPDIR)/file_history.Plo
 	-rm -f ./$(DEPDIR)/help.Plo
 	-rm -f ./$(DEPDIR)/keybind-defaults.Plo
 	-rm -f ./$(DEPDIR)/learn.Plo
diff -urpN mc-4.8.23/src/args.c mc-4.8.24/src/args.c
--- mc-4.8.23/src/args.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/args.c	2020-01-01 19:52:34.000000000 +0400
@@ -95,7 +95,9 @@ static gboolean mc_args__nouse_subshell
 #endif /* ENABLE_SUBSHELL */
 static gboolean mc_args__show_datadirs = FALSE;
 static gboolean mc_args__show_datadirs_extended = FALSE;
+#ifdef ENABLE_CONFIGURE_ARGS
 static gboolean mc_args__show_configure_opts = FALSE;
+#endif
 
 static GOptionGroup *main_group;
 
@@ -125,6 +127,7 @@ static const GOptionEntry argument_main_
      NULL
     },
 
+#ifdef ENABLE_CONFIGURE_ARGS
     /* show configure options */
     {
      "configure-options", '\0', G_OPTION_FLAG_IN_MAIN, G_OPTION_ARG_NONE,
@@ -132,6 +135,7 @@ static const GOptionEntry argument_main_
      N_("Print configure options"),
      NULL
     },
+#endif
 
     {
      "printwd", 'P', G_OPTION_FLAG_IN_MAIN, G_OPTION_ARG_STRING,
@@ -758,11 +762,13 @@ mc_args_show_info (void)
         return FALSE;
     }
 
+#ifdef ENABLE_CONFIGURE_ARGS
     if (mc_args__show_configure_opts)
     {
         show_configure_options ();
         return FALSE;
     }
+#endif
 
     return TRUE;
 }
diff -urpN mc-4.8.23/src/consaver/Makefile.in mc-4.8.24/src/consaver/Makefile.in
--- mc-4.8.23/src/consaver/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/consaver/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ host_triplet = @host@
 pkglibexec_PROGRAMS = cons.saver$(EXEEXT)
 subdir = src/consaver
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -229,7 +219,6 @@ am__DIST_COMMON = $(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 pkglibexecdir = $(libexecdir)/@PACKAGE@
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -237,18 +226,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -288,10 +274,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -299,13 +282,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -313,12 +290,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -326,24 +298,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -377,7 +341,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -389,12 +352,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/diffviewer/Makefile.in mc-4.8.24/src/diffviewer/Makefile.in
--- mc-4.8.23/src/diffviewer/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/diffviewer/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/diffviewer
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -227,7 +217,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -235,18 +224,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -286,10 +272,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -297,13 +280,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -311,12 +288,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -324,24 +296,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -375,7 +339,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -387,12 +350,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/diffviewer/ydiff.c mc-4.8.24/src/diffviewer/ydiff.c
--- mc-4.8.23/src/diffviewer/ydiff.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/diffviewer/ydiff.c	2020-01-01 19:52:34.000000000 +0400
@@ -50,10 +50,11 @@
 #endif
 #include "lib/event.h"          /* mc_event_raise() */
 
-#include "src/filemanager/cmd.h"        /* edit_file_at_line(), view_other_cmd() */
+#include "src/filemanager/cmd.h"        /* edit_file_at_line() */
 #include "src/filemanager/panel.h"
 #include "src/filemanager/layout.h"     /* Needed for get_current_index and get_other_panel */
 
+#include "src/execute.h"        /* toggle_subshell() */
 #include "src/keybind-defaults.h"
 #include "src/setup.h"
 #include "src/history.h"
@@ -2271,9 +2272,11 @@ dview_compute_split (WDiff * dview, int
 static void
 dview_compute_areas (WDiff * dview)
 {
-    dview->height = LINES - 2;
-    dview->half1 = COLS / 2;
-    dview->half2 = COLS - dview->half1;
+    Widget *w = WIDGET (dview);
+
+    dview->height = w->lines - 1;
+    dview->half1 = w->cols / 2;
+    dview->half2 = w->cols - dview->half1;
 
     dview_compute_split (dview, 0);
 }
@@ -3253,7 +3256,7 @@ dview_execute_cmd (WDiff * dview, long c
         dview->skip_cols = 0;
         break;
     case CK_Shell:
-        view_other_cmd ();
+        toggle_subshell ();
         break;
     case CK_Quit:
         dview->view_quit = TRUE;
@@ -3335,6 +3338,10 @@ dview_callback (Widget * w, Widget * sen
             dview_update (dview);
         return i;
 
+    case MSG_RESIZE:
+        dview_compute_areas (dview);
+        return MSG_HANDLED;
+
     case MSG_DESTROY:
         dview_save_options (dview);
         dview_fini (dview);
@@ -3374,23 +3381,6 @@ dview_mouse_callback (Widget * w, mouse_
 
 /* --------------------------------------------------------------------------------------------- */
 
-static void
-dview_adjust_size (WDialog * h)
-{
-    WDiff *dview;
-    WButtonBar *bar;
-
-    /* Look up the viewer and the buttonbar, we assume only two widgets here */
-    dview = (WDiff *) find_widget_type (h, dview_callback);
-    bar = find_buttonbar (h);
-    widget_set_size (WIDGET (dview), 0, 0, LINES - 1, COLS);
-    widget_set_size (WIDGET (bar), LINES - 1, 0, 1, COLS);
-
-    dview_compute_areas (dview);
-}
-
-/* --------------------------------------------------------------------------------------------- */
-
 static cb_ret_t
 dview_dialog_callback (Widget * w, Widget * sender, widget_msg_t msg, int parm, void *data)
 {
@@ -3399,10 +3389,6 @@ dview_dialog_callback (Widget * w, Widge
 
     switch (msg)
     {
-    case MSG_RESIZE:
-        dview_adjust_size (h);
-        return MSG_HANDLED;
-
     case MSG_ACTION:
         /* Handle shortcuts. */
 
@@ -3457,33 +3443,32 @@ diff_view (const char *file1, const char
     WDiff *dview;
     Widget *w;
     WDialog *dview_dlg;
+    Widget *dw;
 
     /* Create dialog and widgets, put them on the dialog */
     dview_dlg =
         dlg_create (FALSE, 0, 0, 1, 1, WPOS_FULLSCREEN, FALSE, NULL, dview_dialog_callback, NULL,
                     "[Diff Viewer]", NULL);
-    widget_want_tab (WIDGET (dview_dlg), TRUE);
+    dw = WIDGET (dview_dlg);
+    widget_want_tab (dw, TRUE);
 
     dview = g_new0 (WDiff, 1);
     w = WIDGET (dview);
-    widget_init (w, 0, 0, LINES - 1, COLS, dview_callback, dview_mouse_callback);
+    widget_init (w, dw->y, dw->x, dw->lines - 1, dw->cols, dview_callback, dview_mouse_callback);
     w->options |= WOP_SELECTABLE;
+    add_widget_autopos (dview_dlg, w, WPOS_KEEP_ALL, NULL);
 
-    add_widget (dview_dlg, dview);
-    add_widget (dview_dlg, buttonbar_new (TRUE));
+    w = WIDGET (buttonbar_new (TRUE));
+    add_widget_autopos (dview_dlg, w, w->pos_flags, NULL);
 
     dview_dlg->get_title = dview_get_title;
 
     error = dview_init (dview, "-a", file1, file2, label1, label2, DATA_SRC_MEM);       /* XXX binary diff? */
 
-    /* Please note that if you add another widget,
-     * you have to modify dview_adjust_size to
-     * be aware of it
-     */
     if (error == 0)
         dlg_run (dview_dlg);
 
-    if (error != 0 || widget_get_state (WIDGET (dview_dlg), WST_CLOSED))
+    if (error != 0 || widget_get_state (dw, WST_CLOSED))
         dlg_destroy (dview_dlg);
 
     return error == 0 ? 1 : 0;
diff -urpN mc-4.8.23/src/editor/Makefile.in mc-4.8.24/src/editor/Makefile.in
--- mc-4.8.23/src/editor/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/editor/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -94,24 +94,14 @@ host_triplet = @host@
 
 subdir = src/editor
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -250,7 +240,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -258,18 +247,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -309,10 +295,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -320,13 +303,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -334,12 +311,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -347,24 +319,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -398,7 +362,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -410,12 +373,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/editor/edit-impl.h mc-4.8.24/src/editor/edit-impl.h
--- mc-4.8.23/src/editor/edit-impl.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/editor/edit-impl.h	2020-01-01 19:52:34.000000000 +0400
@@ -186,6 +186,7 @@ WEdit *edit_init (WEdit * edit, int y, i
 gboolean edit_clean (WEdit * edit);
 gboolean edit_ok_to_exit (WEdit * edit);
 gboolean edit_load_cmd (WDialog * h);
+gboolean edit_load_file_from_history (WDialog * h);
 gboolean edit_load_syntax_file (WDialog * h);
 gboolean edit_load_menu_file (WDialog * h);
 gboolean edit_close_cmd (WEdit * edit);
diff -urpN mc-4.8.23/src/editor/edit.c mc-4.8.24/src/editor/edit.c
--- mc-4.8.23/src/editor/edit.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/editor/edit.c	2020-01-01 19:52:34.000000000 +0400
@@ -1805,7 +1805,7 @@ user_menu (WEdit * edit, const char *men
 
     edit_cursor_move (edit, curs - edit->buffer.curs1);
     edit->force |= REDRAW_PAGE;
-    widget_redraw (WIDGET (edit));
+    widget_draw (WIDGET (edit));
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/src/editor/editcmd.c mc-4.8.24/src/editor/editcmd.c
--- mc-4.8.23/src/editor/editcmd.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/editor/editcmd.c	2020-01-01 19:52:34.000000000 +0400
@@ -62,6 +62,7 @@
 #endif
 
 #include "src/history.h"
+#include "src/file_history.h"   /* show_file_history() */
 #include "src/setup.h"          /* option_tab_spacing */
 #ifdef HAVE_CHARSET
 #include "src/selcodepage.h"
@@ -1559,7 +1560,7 @@ edit_syntax_onoff_cmd (WDialog * h)
 {
     option_syntax_highlighting = !option_syntax_highlighting;
     g_list_foreach (h->widgets, edit_syntax_onoff_cb, NULL);
-    dlg_redraw (h);
+    dlg_draw (h);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1574,7 +1575,7 @@ edit_show_tabs_tws_cmd (WDialog * h)
 {
     enable_show_tabs_tws = !enable_show_tabs_tws;
     g_list_foreach (h->widgets, edit_redraw_page_cb, NULL);
-    dlg_redraw (h);
+    dlg_draw (h);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1589,7 +1590,7 @@ edit_show_margin_cmd (WDialog * h)
 {
     show_right_margin = !show_right_margin;
     g_list_foreach (h->widgets, edit_redraw_page_cb, NULL);
-    dlg_redraw (h);
+    dlg_draw (h);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1605,7 +1606,7 @@ edit_show_numbers_cmd (WDialog * h)
     option_line_state = !option_line_state;
     option_line_state_width = option_line_state ? LINE_STATE_WIDTH : 0;
     g_list_foreach (h->widgets, edit_redraw_page_cb, NULL);
-    dlg_redraw (h);
+    dlg_draw (h);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -2107,6 +2108,35 @@ edit_load_cmd (WDialog * h)
 
 /* --------------------------------------------------------------------------------------------- */
 /**
+  * Show history od edited or viewed files and open selected file.
+  *
+  * @return TRUE on success, FALSE otherwise.
+  */
+
+gboolean
+edit_load_file_from_history (WDialog * h)
+{
+    char *exp;
+    int action;
+    gboolean ret = TRUE;        /* possible cancel */
+
+    exp = show_file_history (CONST_WIDGET (h), &action);
+    if (exp != NULL && (action == CK_Edit || action == CK_Enter))
+    {
+        vfs_path_t *exp_vpath;
+
+        exp_vpath = vfs_path_from_str (exp);
+        ret = edit_load_file_from_filename (h, exp_vpath);
+        vfs_path_free (exp_vpath);
+    }
+
+    g_free (exp);
+
+    return ret;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+/**
   * Load syntax file to edit.
   *
   * @return TRUE on success
@@ -2238,6 +2268,7 @@ edit_close_cmd (WEdit * edit)
             unlock_file (edit->filename_vpath);
 
         del_widget (edit);
+        widget_destroy (WIDGET (edit));
 
         if (edit_widget_is_editor (CONST_WIDGET (h->current->data)))
             edit = (WEdit *) h->current->data;
@@ -2776,7 +2807,7 @@ edit_search_cmd (WEdit * edit, gboolean
         /* find last search string in history */
         GList *history;
 
-        history = history_get (MC_HISTORY_SHARED_SEARCH);
+        history = mc_config_history_get (MC_HISTORY_SHARED_SEARCH);
         if (history != NULL && history->data != NULL)
         {
             edit->last_search_string = (char *) history->data;
@@ -3385,7 +3416,7 @@ edit_select_codepage_cmd (WEdit * edit)
         edit_set_codeset (edit);
 
     edit->force = REDRAW_PAGE;
-    widget_redraw (WIDGET (edit));
+    widget_draw (WIDGET (edit));
 }
 #endif
 
diff -urpN mc-4.8.23/src/editor/editdraw.c mc-4.8.24/src/editor/editdraw.c
--- mc-4.8.23/src/editor/editdraw.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/editor/editdraw.c	2020-01-01 19:52:34.000000000 +0400
@@ -77,7 +77,7 @@ gboolean visible_tabs = TRUE;
 #define MOD_CURSOR              (1 << 11)
 #define MOD_WHITESPACE          (1 << 12)
 
-#define edit_move(x,y) widget_move(edit, y, x);
+#define edit_move(x,y) widget_gotoyx(edit, y, x);
 
 #define key_pending(x) (!is_idle())
 
@@ -231,7 +231,7 @@ edit_status_fullscreen (WEdit * edit, in
         fname = str_trunc (fname, fname_len);
     }
 
-    widget_move (h, 0, 0);
+    widget_gotoyx (h, 0, 0);
     tty_setcolor (color);
     printwstr (fname, fname_len + gap);
     printwstr (status, w - (fname_len + gap));
@@ -241,7 +241,7 @@ edit_status_fullscreen (WEdit * edit, in
         int percent;
 
         percent = edit_buffer_calc_percent (&edit->buffer, edit->buffer.curs1);
-        widget_move (h, 0, w - 6 - 6);
+        widget_gotoyx (h, 0, w - 6 - 6);
         tty_printf (" %3d%%", percent);
     }
 
@@ -359,7 +359,7 @@ edit_draw_frame (const WEdit * edit, int
     if (edit->drag_state == MCEDIT_DRAG_NONE)
     {
         tty_setcolor (EDITOR_FRAME_DRAG);
-        widget_move (w, w->lines - 1, w->cols - 1);
+        widget_gotoyx (w, w->lines - 1, w->cols - 1);
         tty_print_alt_char (ACS_LRCORNER, TRUE);
     }
 }
@@ -380,9 +380,9 @@ edit_draw_window_icons (const WEdit * ed
 
     tty_setcolor (color);
     if (edit->fullscreen)
-        widget_move (w->owner, 0, WIDGET (w->owner)->cols - 6);
+        widget_gotoyx (w->owner, 0, WIDGET (w->owner)->cols - 6);
     else
-        widget_move (w, 0, w->cols - 8);
+        widget_gotoyx (w, 0, w->cols - 8);
     g_snprintf (tmp, sizeof (tmp), "[%s][%s]", edit_window_state_char, edit_window_close_char);
     tty_print_string (tmp);
 }
diff -urpN mc-4.8.23/src/editor/editmenu.c mc-4.8.24/src/editor/editmenu.c
--- mc-4.8.23/src/editor/editmenu.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/editor/editmenu.c	2020-01-01 19:52:34.000000000 +0400
@@ -73,6 +73,7 @@ create_file_menu (void)
     entries = g_list_prepend (entries, menu_entry_create (_("&Open file..."), CK_EditFile));
     entries = g_list_prepend (entries, menu_entry_create (_("&New"), CK_EditNew));
     entries = g_list_prepend (entries, menu_entry_create (_("&Close"), CK_Close));
+    entries = g_list_prepend (entries, menu_entry_create (_("&History..."), CK_History));
     entries = g_list_prepend (entries, menu_separator_create ());
     entries = g_list_prepend (entries, menu_entry_create (_("&Save"), CK_Save));
     entries = g_list_prepend (entries, menu_entry_create (_("Save &as..."), CK_SaveAs));
diff -urpN mc-4.8.23/src/editor/editwidget.c mc-4.8.24/src/editor/editwidget.c
--- mc-4.8.23/src/editor/editwidget.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/editor/editwidget.c	2020-01-01 19:52:34.000000000 +0400
@@ -57,7 +57,8 @@
 
 #include "src/keybind-defaults.h"       /* keybind_lookup_keymap_command() */
 #include "src/setup.h"          /* home_dir */
-#include "src/filemanager/cmd.h"        /* view_other_cmd(), save_setup_cmd()  */
+#include "src/execute.h"        /* toggle_subshell()  */
+#include "src/filemanager/cmd.h"        /* save_setup_cmd()  */
 #include "src/learn.h"          /* learn_keys() */
 #include "src/args.h"           /* mcedit_arg_t */
 
@@ -179,31 +180,6 @@ edit_help (void)
 
 /* --------------------------------------------------------------------------------------------- */
 /**
- * Callback for the iteration of objects in the 'editors' array.
- * Resize the editor window.
- *
- * @param data      probably WEdit object
- * @param user_data unused
- */
-
-static void
-edit_dialog_resize_cb (void *data, void *user_data)
-{
-    Widget *w = WIDGET (data);
-
-    (void) user_data;
-
-    if (edit_widget_is_editor (w) && ((WEdit *) w)->fullscreen)
-    {
-        Widget *wh = WIDGET (w->owner);
-
-        w->lines = wh->lines - 2;
-        w->cols = wh->cols;
-    }
-}
-
-/* --------------------------------------------------------------------------------------------- */
-/**
  * Restore saved window size.
  *
  * @param edit editor object
@@ -217,7 +193,7 @@ edit_restore_size (WEdit * edit)
     edit->drag_state = MCEDIT_DRAG_NONE;
     w->mouse.forced_capture = FALSE;
     widget_set_size (w, edit->y_prev, edit->x_prev, edit->lines_prev, edit->cols_prev);
-    dlg_redraw (w->owner);
+    dlg_draw (w->owner);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -257,7 +233,7 @@ edit_window_move (WEdit * edit, long com
     }
 
     edit->force |= REDRAW_PAGE;
-    dlg_redraw (w->owner);
+    dlg_draw (w->owner);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -297,7 +273,7 @@ edit_window_resize (WEdit * edit, long c
     }
 
     edit->force |= REDRAW_COMPLETELY;
-    dlg_redraw (w->owner);
+    dlg_draw (w->owner);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -414,6 +390,9 @@ edit_dialog_command_execute (WDialog * h
     case CK_EditFile:
         edit_load_cmd (h);
         break;
+    case CK_History:
+        edit_load_file_from_history (h);
+        break;
     case CK_EditSyntaxFile:
         edit_load_syntax_file (h);
         break;
@@ -464,7 +443,7 @@ edit_dialog_command_execute (WDialog * h
         edit_refresh_cmd ();
         break;
     case CK_Shell:
-        view_other_cmd ();
+        toggle_subshell ();
         break;
     case CK_LearnKeys:
         learn_keys ();
@@ -767,8 +746,6 @@ edit_update_cursor (WEdit * edit, const
 static cb_ret_t
 edit_dialog_callback (Widget * w, Widget * sender, widget_msg_t msg, int parm, void *data)
 {
-    WMenuBar *menubar;
-    WButtonBar *buttonbar;
     WDialog *h = DIALOG (w);
 
     switch (msg)
@@ -784,15 +761,8 @@ edit_dialog_callback (Widget * w, Widget
         return MSG_HANDLED;
 
     case MSG_RESIZE:
-        menubar = find_menubar (h);
-        buttonbar = find_buttonbar (h);
-        /* dlg_set_size() is surplus for this case */
-        w->lines = LINES;
-        w->cols = COLS;
-        widget_set_size (WIDGET (buttonbar), w->lines - 1, w->x, 1, w->cols);
-        widget_set_size (WIDGET (menubar), w->y, w->x, 1, w->cols);
-        menubar_arrange (menubar);
-        g_list_foreach (h->widgets, (GFunc) edit_dialog_resize_cb, NULL);
+        dlg_default_callback (w, NULL, MSG_RESIZE, 0, NULL);
+        menubar_arrange (find_menubar (h));
         return MSG_HANDLED;
 
     case MSG_ACTION:
@@ -990,7 +960,7 @@ edit_callback (Widget * w, Widget * send
             x = (e->fullscreen ? 0 : 1) + EDIT_TEXT_HORIZONTAL_OFFSET + option_line_state_width +
                 e->curs_col + e->start_col + e->over_col;
 
-            widget_move (w, y, x);
+            widget_gotoyx (w, y, x);
             return MSG_HANDLED;
         }
 
@@ -1059,7 +1029,7 @@ edit_mouse_handle_move_resize (Widget *
     edit->force |= REDRAW_COMPLETELY;   /* Not really needed as WEdit's MSG_DRAW already does this. */
 
     /* We draw the whole dialog because dragging/resizing exposes area beneath. */
-    dlg_redraw (w->owner);
+    dlg_draw (w->owner);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1218,6 +1188,7 @@ edit_files (const GList * files)
     static gboolean made_directory = FALSE;
     WDialog *edit_dlg;
     WMenuBar *menubar;
+    Widget *w, *wd;
     const GList *file;
     gboolean ok = FALSE;
 
@@ -1242,24 +1213,26 @@ edit_files (const GList * files)
     edit_dlg =
         dlg_create (FALSE, 0, 0, 1, 1, WPOS_FULLSCREEN, FALSE, NULL, edit_dialog_callback,
                     edit_dialog_mouse_callback, "[Internal File Editor]", NULL);
-    widget_want_tab (WIDGET (edit_dlg), TRUE);
+    wd = WIDGET (edit_dlg);
+    widget_want_tab (wd, TRUE);
 
     edit_dlg->get_shortcut = edit_get_shortcut;
     edit_dlg->get_title = edit_get_title;
 
-    menubar = menubar_new (0, 0, COLS, NULL, TRUE);
-    add_widget (edit_dlg, menubar);
+    menubar = menubar_new (NULL, TRUE);
+    w = WIDGET (menubar);
+    add_widget_autopos (edit_dlg, w, w->pos_flags, NULL);
     edit_init_menu (menubar);
 
-    add_widget (edit_dlg, buttonbar_new (TRUE));
+    w = WIDGET (buttonbar_new (TRUE));
+    add_widget_autopos (edit_dlg, w, w->pos_flags, NULL);
 
     for (file = files; file != NULL; file = g_list_next (file))
     {
-        Widget *w = WIDGET (edit_dlg);
         mcedit_arg_t *f = (mcedit_arg_t *) file->data;
         gboolean f_ok;
 
-        f_ok = edit_add_window (edit_dlg, w->y + 1, w->x, w->lines - 2, w->cols, f->file_vpath,
+        f_ok = edit_add_window (edit_dlg, wd->y + 1, wd->x, wd->lines - 2, wd->cols, f->file_vpath,
                                 f->line_number);
         /* at least one file has been opened succefully */
         ok = ok || f_ok;
@@ -1268,7 +1241,7 @@ edit_files (const GList * files)
     if (ok)
         dlg_run (edit_dlg);
 
-    if (!ok || widget_get_state (WIDGET (edit_dlg), WST_CLOSED))
+    if (!ok || widget_get_state (wd, WST_CLOSED))
         dlg_destroy (edit_dlg);
 
     return ok;
@@ -1327,7 +1300,7 @@ edit_update_screen (WEdit * e)
         edit_render_keypress (e);
     }
 
-    widget_redraw (WIDGET (find_buttonbar (h)));
+    widget_draw (WIDGET (find_buttonbar (h)));
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1377,9 +1350,9 @@ edit_add_window (WDialog * h, int y, int
     w->callback = edit_callback;
     w->mouse_callback = edit_mouse_callback;
 
-    add_widget (h, w);
+    add_widget_autopos (h, w, WPOS_KEEP_ALL, NULL);
     edit_set_buttonbar (edit, find_buttonbar (h));
-    dlg_redraw (h);
+    dlg_draw (h);
 
     return TRUE;
 }
@@ -1513,18 +1486,25 @@ edit_handle_move_resize (WEdit * edit, l
 void
 edit_toggle_fullscreen (WEdit * edit)
 {
+    Widget *w = WIDGET (edit);
+
     edit->fullscreen = !edit->fullscreen;
     edit->force = REDRAW_COMPLETELY;
 
     if (!edit->fullscreen)
+    {
         edit_restore_size (edit);
+        /* do not follow screen size on resize */
+        w->pos_flags = WPOS_KEEP_DEFAULT;
+    }
     else
     {
-        Widget *w = WIDGET (edit);
         Widget *h = WIDGET (w->owner);
 
         edit_save_size (edit);
         widget_set_size (w, h->y + 1, h->x, h->lines - 2, h->cols);
+        /* follow screen size on resize */
+        w->pos_flags = WPOS_KEEP_ALL;
         edit->force |= REDRAW_PAGE;
         edit_update_screen (edit);
     }
diff -urpN mc-4.8.23/src/editor/format.c mc-4.8.24/src/editor/format.c
--- mc-4.8.23/src/editor/format.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/editor/format.c	2020-01-01 19:52:34.000000000 +0400
@@ -448,6 +448,7 @@ put_paragraph (WEdit * edit, unsigned ch
         if (c != t[i])
             replace_at (edit, p, t[i]);
     }
+    edit_cursor_move (edit, cursor - edit->buffer.curs1);       /* restore cursor position */
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -527,31 +528,12 @@ format_paragraph (WEdit * edit, gboolean
 #ifdef HAVE_CHARSET
     utf8 = edit->utf8;
 #endif
-    /* scroll up to show 1st line of paragraph */
-    edit_move_up (edit, lines, TRUE);
-    /* scroll left as much as possible to show the formatted paragraph */
-    edit_scroll_left (edit, -edit->start_col);
-
     format_this (t2, q - p, indent, utf8);
     put_paragraph (edit, t2, p, indent, size);
     g_free ((char *) t2);
 
-    /* move to the end of paragraph */
-    q = end_paragraph (edit, force);
-    edit_cursor_move (edit, q - edit->buffer.curs1);
-
-    /* try move to the start of next paragraph */
-    if (edit->buffer.curs_line < edit->buffer.lines)
-    {
-        edit_execute_cmd (edit, CK_Home, -1);
-
-        do
-        {
-            edit_execute_cmd (edit, CK_Down, -1);
-        }
-        while (edit->buffer.curs_line < edit->buffer.lines
-               && edit_line_is_blank (edit, edit->buffer.curs_line));
-    }
+    /* Scroll left as much as possible to show the formatted paragraph */
+    edit_scroll_left (edit, -edit->start_col);
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/src/editor/syntax.c mc-4.8.24/src/editor/syntax.c
--- mc-4.8.23/src/editor/syntax.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/editor/syntax.c	2020-01-01 19:52:34.000000000 +0400
@@ -1448,8 +1448,7 @@ edit_free_syntax_rules (WEdit * edit)
     g_ptr_array_foreach (edit->rules, (GFunc) context_rule_free, NULL);
     g_ptr_array_free (edit->rules, TRUE);
     edit->rules = NULL;
-    g_slist_free_full (edit->syntax_marker, g_free);
-    edit->syntax_marker = NULL;
+    g_clear_slist (&edit->syntax_marker, g_free);
     tty_color_free_all_tmp ();
 }
 
diff -urpN mc-4.8.23/src/execute.c mc-4.8.24/src/execute.c
--- mc-4.8.23/src/execute.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/execute.c	2020-01-01 19:52:34.000000000 +0400
@@ -446,14 +446,26 @@ shell_execute (const char *command, int
 /* --------------------------------------------------------------------------------------------- */
 
 void
-toggle_panels (void)
+toggle_subshell (void)
 {
+    static gboolean message_flag = TRUE;
+
 #ifdef ENABLE_SUBSHELL
     vfs_path_t *new_dir_vpath = NULL;
 #endif /* ENABLE_SUBSHELL */
 
     SIG_ATOMIC_VOLATILE_T was_sigwinch = 0;
 
+    if (!(mc_global.tty.xterm_flag || mc_global.tty.console_flag != '\0'
+          || mc_global.tty.use_subshell || output_starts_shell))
+    {
+        if (message_flag)
+            message (D_ERROR, MSG_ERROR,
+                     _("Not an xterm or Linux console;\nthe panels cannot be toggled."));
+        message_flag = FALSE;
+        return;
+    }
+
     channels_down ();
     disable_mouse ();
     disable_bracketed_paste ();
@@ -531,19 +543,27 @@ toggle_panels (void)
      * Save sigwinch flag that will be reset in mc_refresh() called via update_panels().
      * There is some problem with screen redraw in ncurses-based mc in this situation.
      */
-    was_sigwinch = mc_global.tty.winch_flag;
-    mc_global.tty.winch_flag = 0;
+    was_sigwinch = tty_got_winch ();
+    tty_flush_winch ();
 
 #ifdef ENABLE_SUBSHELL
     if (mc_global.tty.use_subshell)
     {
-        do_load_prompt ();
-        if (new_dir_vpath != NULL)
-            do_possible_cd (new_dir_vpath);
-        if (mc_global.tty.console_flag != '\0' && output_lines)
-            show_console_contents (output_start_y,
-                                   LINES - mc_global.keybar_visible - output_lines -
-                                   1, LINES - mc_global.keybar_visible - 1);
+        if (mc_global.mc_run_mode == MC_RUN_FULL)
+        {
+            do_load_prompt ();
+            if (new_dir_vpath != NULL)
+                do_possible_cd (new_dir_vpath);
+            if (mc_global.tty.console_flag != '\0' && output_lines != 0)
+            {
+                unsigned char end_line;
+
+                end_line = LINES - (mc_global.keybar_visible ? 1 : 0) - 1;
+                show_console_contents (output_start_y, end_line - output_lines, end_line);
+            }
+        }
+        else if (new_dir_vpath != NULL && mc_chdir (new_dir_vpath) != -1)
+            vfs_setup_cwd ();
     }
 
     vfs_path_free (new_dir_vpath);
@@ -555,7 +575,7 @@ toggle_panels (void)
         update_xterm_title_path ();
     }
 
-    if (was_sigwinch != 0 || mc_global.tty.winch_flag != 0)
+    if (was_sigwinch != 0 || tty_got_winch ())
         dialog_change_screen_size ();
     else
         repaint_screen ();
diff -urpN mc-4.8.23/src/execute.h mc-4.8.24/src/execute.h
--- mc-4.8.23/src/execute.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/execute.h	2020-01-01 19:52:34.000000000 +0400
@@ -32,7 +32,7 @@ extern int pause_after_run;
 void shell_execute (const char *command, int flags);
 
 /* Handle toggling panels by Ctrl-O */
-void toggle_panels (void);
+void toggle_subshell (void);
 
 /* Handle toggling panels by Ctrl-Z */
 gboolean execute_suspend (const gchar * event_group_name, const gchar * event_name,
diff -urpN mc-4.8.23/src/file_history.c mc-4.8.24/src/file_history.c
--- mc-4.8.23/src/file_history.c	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/src/file_history.c	2020-01-01 19:52:34.000000000 +0400
@@ -0,0 +1,241 @@
+/*
+   Load and show history of edited and viewed files
+
+   Copyright (C) 2019
+   Free Software Foundation, Inc.
+
+   Written by:
+   Andrew Borodin <aborodin@vmail.ru>, 2019.
+
+   This file is part of the Midnight Commander.
+
+   The Midnight Commander is free software: you can redistribute it
+   and/or modify it under the terms of the GNU General Public License as
+   published by the Free Software Foundation, either version 3 of the License,
+   or (at your option) any later version.
+
+   The Midnight Commander is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.
+
+   You should have received a copy of the GNU General Public License
+   along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ */
+
+#include <config.h>
+
+#include <stdio.h>              /* file functions */
+
+#include "lib/global.h"
+
+#include "lib/fileloc.h"        /* MC_FILEPOS_FILE */
+#include "lib/mcconfig.h"       /* mc_config_get_full_path() */
+#include "lib/strutil.h"        /* str_term_width1() */
+#include "lib/util.h"           /* backup functions */
+
+#include "file_history.h"
+
+/*** global variables ****************************************************************************/
+
+/*** file scope macro definitions ****************************************************************/
+
+#define TMP_SUFFIX ".tmp"
+
+/*** file scope type declarations ****************************************************************/
+
+typedef struct file_history_data_t
+{
+    char *file_name;
+    char *file_pos;
+} file_history_data_t;
+
+/*** file scope variables ************************************************************************/
+
+/* --------------------------------------------------------------------------------------------- */
+/*** file scope functions ************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
+
+static GList *
+file_history_list_read (void)
+{
+    char *fn;
+    FILE *f;
+    char buf[MC_MAXPATHLEN + 100];
+    GList *file_list = NULL;
+
+    /* open file with positions */
+    fn = mc_config_get_full_path (MC_FILEPOS_FILE);
+    if (fn == NULL)
+        return NULL;
+
+    f = fopen (fn, "r");
+    g_free (fn);
+    if (f == NULL)
+        return NULL;
+
+    while (fgets (buf, sizeof (buf), f) != NULL)
+    {
+        char *s;
+        file_history_data_t *fhd;
+        size_t len;
+
+        s = strrchr (buf, ' ');
+        /* FIXME: saved file position info is present in filepos file */
+        fhd = g_new (file_history_data_t, 1);
+        fhd->file_name = g_strndup (buf, s - buf);
+        len = strlen (s + 1);
+        fhd->file_pos = g_strndup (s + 1, len - 1);     /* ignore '\n' */
+        file_list = g_list_prepend (file_list, fhd);
+    }
+
+    fclose (f);
+
+    return file_list;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static void
+file_history_list_write (const GList * file_list)
+{
+    char *fn;
+    FILE *f;
+    gboolean write_error = FALSE;
+
+    fn = mc_config_get_full_path (MC_FILEPOS_FILE);
+    if (fn == NULL)
+        return;
+
+    mc_util_make_backup_if_possible (fn, TMP_SUFFIX);
+
+    f = fopen (fn, "w");
+    if (f != NULL)
+    {
+        GString *s;
+
+        s = g_string_sized_new (128);
+
+        for (; file_list != NULL && !write_error; file_list = g_list_next (file_list))
+        {
+            file_history_data_t *fhd = (file_history_data_t *) file_list->data;
+
+            g_string_append (s, fhd->file_name);
+            if (fhd->file_pos != NULL)
+            {
+                g_string_append_c (s, ' ');
+                g_string_append (s, fhd->file_pos);
+            }
+
+            write_error = (fprintf (f, "%s\n", s->str) < 0);
+            g_string_truncate (s, 0);
+        }
+
+        g_string_free (s, TRUE);
+
+        fclose (f);
+    }
+
+    if (write_error)
+        mc_util_restore_from_backup_if_possible (fn, TMP_SUFFIX);
+    else
+        mc_util_unlink_backup_if_possible (fn, TMP_SUFFIX);
+
+    g_free (fn);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static void
+file_history_create_item (history_descriptor_t * hd, void *data)
+{
+    file_history_data_t *fhd = (file_history_data_t *) data;
+    size_t width;
+
+    width = str_term_width1 (fhd->file_name);
+    hd->max_width = MAX (width, hd->max_width);
+
+    listbox_add_item (hd->listbox, LISTBOX_APPEND_AT_END, 0, fhd->file_name, fhd->file_pos, TRUE);
+    /* fhd->file_pos is not copied, NULLize it to prevent double free */
+    fhd->file_pos = NULL;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static void *
+file_history_release_item (history_descriptor_t * hd, WLEntry * le)
+{
+    file_history_data_t *fhd;
+
+    (void) hd;
+
+    fhd = g_new (file_history_data_t, 1);
+    fhd->file_name = le->text;
+    le->text = NULL;
+    fhd->file_pos = (char *) le->data;
+    le->data = NULL;
+
+    return fhd;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static void
+file_history_free_item (void *data)
+{
+    file_history_data_t *fhd = (file_history_data_t *) data;
+
+    g_free (fhd->file_name);
+    g_free (fhd->file_pos);
+    g_free (fhd);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+/*** public functions ****************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
+
+/**
+ * Show file history and return the selected file
+ *
+ * @param w widget used for positioning of history window
+ * @param action to do with file (edit, view, etc)
+ *
+ * @return name of selected file, A newly allocated string.
+ */
+char *
+show_file_history (const Widget * w, int *action)
+{
+    GList *file_list;
+    size_t len;
+    history_descriptor_t hd;
+
+    file_list = file_history_list_read ();
+    if (file_list == NULL)
+        return NULL;
+
+    len = g_list_length (file_list);
+
+    file_list = g_list_last (file_list);
+
+    history_descriptor_init (&hd, w->y, w->x, file_list, 0);
+    /* redefine list-specific functions */
+    hd.create = file_history_create_item;
+    hd.release = file_history_release_item;
+    hd.free = file_history_free_item;
+
+    history_show (&hd);
+
+    hd.list = g_list_first (hd.list);
+
+    /* Has history cleaned up or not? */
+    if (len != g_list_length (hd.list))
+        file_history_list_write (hd.list);
+
+    g_list_free_full (hd.list, (GDestroyNotify) file_history_free_item);
+
+    *action = hd.action;
+
+    return hd.text;
+}
+
+/* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/src/file_history.h mc-4.8.24/src/file_history.h
--- mc-4.8.23/src/file_history.h	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/src/file_history.h	2020-01-01 19:52:34.000000000 +0400
@@ -0,0 +1,20 @@
+#ifndef MC__FILE_HISTORY_H
+#define MC__FILE_HISTORY_H
+
+#include "lib/widget.h"
+
+/*** typedefs(not structures) and defined constants **********************************************/
+
+/*** enums ***************************************************************************************/
+
+/*** structures declarations (and typedefs of structures)*****************************************/
+
+/*** global variables defined in .c file *********************************************************/
+
+char *show_file_history (const Widget * w, int *action);
+
+/*** declarations of public functions ************************************************************/
+
+/*** inline functions ****************************************************************************/
+
+#endif /* MC__FILE_HISTORY_H */
diff -urpN mc-4.8.23/src/filemanager/Makefile.in mc-4.8.24/src/filemanager/Makefile.in
--- mc-4.8.23/src/filemanager/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/filemanager/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/filemanager
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -240,7 +230,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -248,18 +237,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -299,10 +285,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -310,13 +293,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -324,12 +301,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -337,24 +309,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -388,7 +352,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -400,12 +363,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/filemanager/achown.c mc-4.8.24/src/filemanager/achown.c
--- mc-4.8.23/src/filemanager/achown.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/achown.c	2020-01-01 19:52:34.000000000 +0400
@@ -246,19 +246,19 @@ print_flags (const WDialog * h)
 
     for (i = 0; i < 3; i++)
     {
-        widget_move (h, BY + 1, advanced_chown_but[0].x + 6 + i);
+        widget_gotoyx (h, BY + 1, advanced_chown_but[0].x + 6 + i);
         tty_print_char (ch_flags[i]);
     }
 
     for (i = 0; i < 3; i++)
     {
-        widget_move (h, BY + 1, advanced_chown_but[1].x + 6 + i);
+        widget_gotoyx (h, BY + 1, advanced_chown_but[1].x + 6 + i);
         tty_print_char (ch_flags[i + 3]);
     }
 
     for (i = 0; i < 3; i++)
     {
-        widget_move (h, BY + 1, advanced_chown_but[2].x + 6 + i);
+        widget_gotoyx (h, BY + 1, advanced_chown_but[2].x + 6 + i);
         tty_print_char (ch_flags[i + 6]);
     }
 
@@ -266,12 +266,12 @@ print_flags (const WDialog * h)
 
     for (i = 0; i < 15; i++)
     {
-        widget_move (h, BY + 1, advanced_chown_but[3].x + 6 + i);
+        widget_gotoyx (h, BY + 1, advanced_chown_but[3].x + 6 + i);
         tty_print_char (ch_flags[9]);
     }
     for (i = 0; i < 15; i++)
     {
-        widget_move (h, BY + 1, advanced_chown_but[4].x + 6 + i);
+        widget_gotoyx (h, BY + 1, advanced_chown_but[4].x + 6 + i);
         tty_print_char (ch_flags[10]);
     }
 }
@@ -285,19 +285,19 @@ advanced_chown_refresh (WDialog * h)
 
     tty_setcolor (COLOR_NORMAL);
 
-    widget_move (h, BY - 1, advanced_chown_but[0].x + 5);
+    widget_gotoyx (h, BY - 1, advanced_chown_but[0].x + 5);
     tty_print_string (_("owner"));
-    widget_move (h, BY - 1, advanced_chown_but[1].x + 5);
+    widget_gotoyx (h, BY - 1, advanced_chown_but[1].x + 5);
     tty_print_string (_("group"));
-    widget_move (h, BY - 1, advanced_chown_but[2].x + 5);
+    widget_gotoyx (h, BY - 1, advanced_chown_but[2].x + 5);
     tty_print_string (_("other"));
 
-    widget_move (h, BY - 1, advanced_chown_but[3].x + 5);
+    widget_gotoyx (h, BY - 1, advanced_chown_but[3].x + 5);
     tty_print_string (_("owner"));
-    widget_move (h, BY - 1, advanced_chown_but[4].x + 5);
+    widget_gotoyx (h, BY - 1, advanced_chown_but[4].x + 5);
     tty_print_string (_("group"));
 
-    widget_move (h, BY + 1, 3);
+    widget_gotoyx (h, BY + 1, 3);
     tty_print_string (_("Flag"));
     print_flags (h);
 }
diff -urpN mc-4.8.23/src/filemanager/boxes.c mc-4.8.24/src/filemanager/boxes.c
--- mc-4.8.23/src/filemanager/boxes.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/boxes.c	2020-01-01 19:52:34.000000000 +0400
@@ -355,7 +355,7 @@ sel_charset_button (WButton * button, in
             cpname = _("7-bit ASCII");  /* FIXME */
 
         button_set_text (button, cpname);
-        dlg_redraw (WIDGET (button)->owner);
+        dlg_draw (WIDGET (button)->owner);
     }
 
     return 0;
@@ -484,7 +484,7 @@ task_cb (WButton * button, int action)
     jobs_fill_listbox (bg_list);
 
     /* This can be optimized to just redraw this widget :-) */
-    dlg_redraw (WIDGET (button)->owner);
+    dlg_draw (WIDGET (button)->owner);
 
     return 0;
 }
@@ -632,7 +632,7 @@ panel_options_box (void)
     gboolean simple_swap;
 
     simple_swap = mc_config_get_bool (mc_global.main_config, CONFIG_PANELS_SECTION,
-                                      "simple_swap", FALSE) ? 1 : 0;
+                                      "simple_swap", FALSE);
     {
         const char *qsearch_options[] = {
             N_("Case &insensitive"),
@@ -943,9 +943,9 @@ display_bits_box (void)
         mc_global.eight_bit_clean = current_mode < 3;
         mc_global.full_eight_bits = current_mode < 2;
 #ifndef HAVE_SLANG
-        meta (stdscr, mc_global.eight_bit_clean);
+        tty_display_8bit (mc_global.eight_bit_clean);
 #else
-        SLsmg_Display_Eight_Bit = mc_global.full_eight_bits ? 128 : 160;
+        tty_display_8bit (mc_global.full_eight_bits);
 #endif
         use_8th_bit_as_meta = !new_meta;
     }
@@ -1060,7 +1060,7 @@ tree_box (const char *current_dir)
 
 #ifdef ENABLE_VFS
 void
-configure_vfs (void)
+configure_vfs_box (void)
 {
     char buffer2[BUF_TINY];
 #ifdef ENABLE_VFS_FTP
@@ -1151,7 +1151,7 @@ configure_vfs (void)
 /* --------------------------------------------------------------------------------------------- */
 
 char *
-cd_dialog (void)
+cd_box (void)
 {
     const Widget *w = CONST_WIDGET (current_panel);
     char *my_str;
@@ -1174,8 +1174,8 @@ cd_dialog (void)
 /* --------------------------------------------------------------------------------------------- */
 
 void
-symlink_dialog (const vfs_path_t * existing_vpath, const vfs_path_t * new_vpath,
-                char **ret_existing, char **ret_new)
+symlink_box (const vfs_path_t * existing_vpath, const vfs_path_t * new_vpath,
+             char **ret_existing, char **ret_new)
 {
     quick_widget_t quick_widgets[] = {
         /* *INDENT-OFF* */
@@ -1208,7 +1208,7 @@ symlink_dialog (const vfs_path_t * exist
 
 #ifdef ENABLE_BACKGROUND
 void
-jobs_cmd (void)
+jobs_box (void)
 {
     struct
     {
diff -urpN mc-4.8.23/src/filemanager/boxes.h mc-4.8.24/src/filemanager/boxes.h
--- mc-4.8.23/src/filemanager/boxes.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/boxes.h	2020-01-01 19:52:34.000000000 +0400
@@ -26,11 +26,11 @@ int panel_listing_box (WPanel * p, int n
 const panel_field_t *sort_box (dir_sort_options_t * op, const panel_field_t * sort_field);
 void confirm_box (void);
 void display_bits_box (void);
-void configure_vfs (void);
-void jobs_cmd (void);
-char *cd_dialog (void);
-void symlink_dialog (const vfs_path_t * existing_vpath, const vfs_path_t * new_vpath,
-                     char **ret_existing, char **ret_new);
+void configure_vfs_box (void);
+void jobs_box (void);
+char *cd_box (void);
+void symlink_box (const vfs_path_t * existing_vpath, const vfs_path_t * new_vpath,
+                  char **ret_existing, char **ret_new);
 char *tree_box (const char *current_dir);
 
 /*** inline functions ****************************************************************************/
diff -urpN mc-4.8.23/src/filemanager/chmod.c mc-4.8.24/src/filemanager/chmod.c
--- mc-4.8.23/src/filemanager/chmod.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/chmod.c	2020-01-01 19:52:34.000000000 +0400
@@ -183,9 +183,9 @@ chmod_toggle_select (WDialog * h, int Id
     tty_setcolor (COLOR_NORMAL);
     check_perm[Id].selected = !check_perm[Id].selected;
 
-    widget_move (h, PY + Id + 1, PX + 1);
+    widget_gotoyx (h, PY + Id + 1, PX + 1);
     tty_print_char (check_perm[Id].selected ? '*' : ' ');
-    widget_move (h, PY + Id + 1, PX + 3);
+    widget_gotoyx (h, PY + Id + 1, PX + 3);
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/src/filemanager/chown.c mc-4.8.24/src/filemanager/chown.c
--- mc-4.8.23/src/filemanager/chown.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/chown.c	2020-01-01 19:52:34.000000000 +0400
@@ -157,15 +157,15 @@ chown_refresh (WDialog * h)
 
     tty_setcolor (COLOR_NORMAL);
 
-    widget_move (h, y + 0, x);
+    widget_gotoyx (h, y + 0, x);
     tty_print_string (_("Name"));
-    widget_move (h, y + 2, x);
+    widget_gotoyx (h, y + 2, x);
     tty_print_string (_("Owner name"));
-    widget_move (h, y + 4, x);
+    widget_gotoyx (h, y + 4, x);
     tty_print_string (_("Group name"));
-    widget_move (h, y + 6, x);
+    widget_gotoyx (h, y + 6, x);
     tty_print_string (_("Size"));
-    widget_move (h, y + 8, x);
+    widget_gotoyx (h, y + 8, x);
     tty_print_string (_("Permission"));
 }
 
diff -urpN mc-4.8.23/src/filemanager/cmd.c mc-4.8.24/src/filemanager/cmd.c
--- mc-4.8.23/src/filemanager/cmd.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/cmd.c	2020-01-01 19:52:34.000000000 +0400
@@ -90,7 +90,7 @@
 #include "command.h"            /* cmdline */
 #include "layout.h"             /* get_current_type() */
 #include "ext.h"                /* regex_command() */
-#include "boxes.h"              /* cd_dialog() */
+#include "boxes.h"              /* cd_box() */
 #include "dir.h"
 
 #include "cmd.h"                /* Our definitions */
@@ -109,7 +109,9 @@
 
 enum CompareMode
 {
-    compare_quick, compare_size_only, compare_thourough
+    compare_quick = 0,
+    compare_size_only,
+    compare_thourough
 };
 
 /*** file scope variables ************************************************************************/
@@ -133,15 +135,11 @@ do_view_cmd (gboolean normal)
     {
         vfs_path_t *fname_vpath;
 
-        if (confirm_view_dir && (current_panel->marked || current_panel->dirs_marked))
-        {
-            if (query_dialog
-                (_("Confirmation"), _("Files tagged, want to cd?"), D_NORMAL, 2,
-                 _("&Yes"), _("&No")) != 0)
-            {
-                return;
-            }
-        }
+        if (confirm_view_dir && (current_panel->marked != 0 || current_panel->dirs_marked != 0) &&
+            query_dialog (_("Confirmation"), _("Files tagged, want to cd?"), D_NORMAL, 2,
+                          _("&Yes"), _("&No")) != 0)
+            return;
+
         fname_vpath = vfs_path_from_str (selection (current_panel)->fname);
         if (!do_cd (fname_vpath, cd_exact))
             message (D_ERROR, MSG_ERROR, _("Cannot change directory"));
@@ -244,6 +242,7 @@ compare_files (const vfs_path_t * vpath1
             /* Don't have mmap() :( Even more ugly :) */
             char buf1[BUFSIZ], buf2[BUFSIZ];
             int n1, n2;
+
             rotate_dash (TRUE);
             do
             {
@@ -290,10 +289,9 @@ compare_dir (WPanel * panel, WPanel * ot
 
         /* Search the corresponding entry from the other panel */
         for (j = 0; j < other->dir.len; j++)
-        {
             if (strcmp (source->fname, other->dir.list[j].fname) == 0)
                 break;
-        }
+
         if (j >= other->dir.len)
             /* Not found -> mark */
             do_file_mark (panel, i, 1);
@@ -303,19 +301,17 @@ compare_dir (WPanel * panel, WPanel * ot
             file_entry_t *target = &other->dir.list[j];
 
             if (mode != compare_size_only)
-            {
                 /* Older version is not marked */
                 if (source->st.st_mtime < target->st.st_mtime)
                     continue;
-            }
 
             /* Newer version with different size is marked */
             if (source->st.st_size != target->st.st_size)
             {
                 do_file_mark (panel, i, 1);
                 continue;
-
             }
+
             if (mode == compare_size_only)
                 continue;
 
@@ -324,9 +320,8 @@ compare_dir (WPanel * panel, WPanel * ot
                 /* Thorough compare off, compare only time stamps */
                 /* Mark newer version, don't mark version with the same date */
                 if (source->st.st_mtime > target->st.st_mtime)
-                {
                     do_file_mark (panel, i, 1);
-                }
+
                 continue;
             }
 
@@ -362,6 +357,7 @@ do_link (link_type_t link_type, const ch
             input_expand_dialog (_("Link"), src, MC_HISTORY_FM_LINK, "", INPUT_COMPLETE_FILENAMES);
         if (dest == NULL || *dest == '\0')
             goto cleanup;
+
         save_cwds_stat ();
 
         fname_vpath = vfs_path_from_str (fname);
@@ -393,12 +389,13 @@ do_link (link_type_t link_type, const ch
             g_free (s_str);
         }
 
-        symlink_dialog (s, d, &dest, &src);
+        symlink_box (s, d, &dest, &src);
         vfs_path_free (d);
         vfs_path_free (s);
 
         if (dest == NULL || *dest == '\0' || src == NULL || *src == '\0')
             goto cleanup;
+
         save_cwds_stat ();
 
         dest_vpath = vfs_path_from_str_flags (dest, VPF_NO_CANON);
@@ -777,6 +774,7 @@ void
 copy_cmd (void)
 {
     save_cwds_stat ();
+
     if (panel_operate (current_panel, OP_COPY, FALSE))
     {
         update_panels (UP_OPTIMIZE, UP_KEEPSEL);
@@ -791,6 +789,7 @@ void
 rename_cmd (void)
 {
     save_cwds_stat ();
+
     if (panel_operate (current_panel, OP_MOVE, FALSE))
     {
         update_panels (UP_OPTIMIZE, UP_KEEPSEL);
@@ -805,6 +804,7 @@ void
 copy_cmd_local (void)
 {
     save_cwds_stat ();
+
     if (panel_operate (current_panel, OP_COPY, TRUE))
     {
         update_panels (UP_OPTIMIZE, UP_KEEPSEL);
@@ -819,6 +819,7 @@ void
 rename_cmd_local (void)
 {
     save_cwds_stat ();
+
     if (panel_operate (current_panel, OP_MOVE, TRUE))
     {
         update_panels (UP_OPTIMIZE, UP_KEEPSEL);
@@ -862,16 +863,16 @@ mkdir_cmd (void)
         }
 
         save_cwds_stat ();
-        if (my_mkdir (absdir, 0777) == 0)
+
+        if (my_mkdir (absdir, 0777) != 0)
+            message (D_ERROR, MSG_ERROR, "%s", unix_error_string (errno));
+        else
         {
             update_panels (UP_OPTIMIZE, dir);
             repaint_screen ();
             select_item (current_panel);
         }
-        else
-        {
-            message (D_ERROR, MSG_ERROR, "%s", unix_error_string (errno));
-        }
+
         vfs_path_free (absdir);
     }
     g_free (dir);
@@ -920,13 +921,13 @@ find_cmd (void)
 void
 filter_cmd (void)
 {
-    WPanel *p;
-
-    if (!SELECTED_IS_PANEL)
-        return;
+    if (SELECTED_IS_PANEL)
+    {
+        WPanel *p;
 
-    p = MENU_PANEL;
-    set_panel_filter (p);
+        p = MENU_PANEL;
+        set_panel_filter (p);
+    }
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -950,15 +951,13 @@ void
 ext_cmd (void)
 {
     vfs_path_t *extdir_vpath;
-    int dir;
+    int dir = 0;
 
-    dir = 0;
     if (geteuid () == 0)
-    {
         dir = query_dialog (_("Extension file edit"),
                             _("Which extension file you want to edit?"), D_NORMAL, 2,
                             _("&User"), _("&System Wide"));
-    }
+
     extdir_vpath = vfs_path_build_filename (mc_global.sysconfig_dir, MC_LIB_EXT, (char *) NULL);
 
     if (dir == 0)
@@ -980,6 +979,7 @@ ext_cmd (void)
         }
         do_edit (extdir_vpath);
     }
+
     vfs_path_free (extdir_vpath);
     flush_extension_file ();
 }
@@ -1050,16 +1050,13 @@ void
 edit_fhl_cmd (void)
 {
     vfs_path_t *fhlfile_vpath = NULL;
+    int dir = 0;
 
-    int dir;
-
-    dir = 0;
     if (geteuid () == 0)
-    {
         dir = query_dialog (_("Highlighting groups file edit"),
                             _("Which highlighting file you want to edit?"), D_NORMAL, 2,
                             _("&User"), _("&System Wide"));
-    }
+
     fhlfile_vpath =
         vfs_path_build_filename (mc_global.sysconfig_dir, MC_FHL_INI_FILE, (char *) NULL);
 
@@ -1082,8 +1079,8 @@ edit_fhl_cmd (void)
         }
         do_edit (fhlfile_vpath);
     }
-    vfs_path_free (fhlfile_vpath);
 
+    vfs_path_free (fhlfile_vpath);
     /* refresh highlighting rules */
     mc_fhl_free (&mc_filehighlight);
     mc_filehighlight = mc_fhl_new (TRUE);
@@ -1120,9 +1117,12 @@ hotlist_cmd (void)
         do_cd_command (cmd);
         g_free (cmd);
     }
+
     g_free (target);
 }
 
+/* --------------------------------------------------------------------------------------------- */
+
 #ifdef ENABLE_VFS
 void
 vfs_list (void)
@@ -1131,7 +1131,7 @@ vfs_list (void)
     vfs_path_t *target_vpath;
 
     target = hotlist_show (LIST_VFSLIST);
-    if (!target)
+    if (target == NULL)
         return;
 
     target_vpath = vfs_path_from_str (target);
@@ -1166,10 +1166,8 @@ compare_dirs_cmd (void)
         compare_dir (other_panel, current_panel, thorough_flag);
     }
     else
-    {
         message (D_ERROR, MSG_ERROR,
                  _("Both panels should be in the listing mode\nto use this command"));
-    }
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1179,18 +1177,18 @@ void
 diff_view_cmd (void)
 {
     /* both panels must be in the list mode */
-    if (get_current_type () != view_listing || get_other_type () != view_listing)
-        return;
-
-    if (get_current_index () == 0)
-        dview_diff_cmd (current_panel, other_panel);
-    else
-        dview_diff_cmd (other_panel, current_panel);
+    if (get_current_type () == view_listing && get_other_type () == view_listing)
+    {
+        if (get_current_index () == 0)
+            dview_diff_cmd (current_panel, other_panel);
+        else
+            dview_diff_cmd (other_panel, current_panel);
 
-    if (mc_global.mc_run_mode == MC_RUN_FULL)
-        update_panels (UP_OPTIMIZE, UP_KEEPSEL);
+        if (mc_global.mc_run_mode == MC_RUN_FULL)
+            update_panels (UP_OPTIMIZE, UP_KEEPSEL);
 
-    dialog_switch_process_pending ();
+        dialog_switch_process_pending ();
+    }
 }
 #endif
 
@@ -1207,27 +1205,6 @@ swap_cmd (void)
 /* --------------------------------------------------------------------------------------------- */
 
 void
-view_other_cmd (void)
-{
-    static int message_flag = TRUE;
-
-    if (!mc_global.tty.xterm_flag && mc_global.tty.console_flag == '\0'
-        && !mc_global.tty.use_subshell && !output_starts_shell)
-    {
-        if (message_flag)
-            message (D_ERROR, MSG_ERROR,
-                     _("Not an xterm or Linux console;\nthe panels cannot be toggled."));
-        message_flag = FALSE;
-    }
-    else
-    {
-        toggle_panels ();
-    }
-}
-
-/* --------------------------------------------------------------------------------------------- */
-
-void
 link_cmd (link_type_t link_type)
 {
     char *filename = selection (current_panel)->fname;
@@ -1386,12 +1363,14 @@ undelete_cmd (void)
 void
 quick_cd_cmd (void)
 {
-    char *p = cd_dialog ();
+    char *p;
 
-    if (p && *p)
+    p = cd_box ();
+    if (p != NULL && *p != '\0')
     {
-        char *q = g_strconcat ("cd ", p, (char *) NULL);
+        char *q;
 
+        q = g_strconcat ("cd ", p, (char *) NULL);
         do_cd_command (q);
         g_free (q);
     }
@@ -1482,8 +1461,8 @@ dirsizes_cmd (void)
 
     for (i = 0; i < panel->dir.len; i++)
         if (S_ISDIR (panel->dir.list[i].st.st_mode)
-            && ((panel->dirs_marked && panel->dir.list[i].f.marked)
-                || !panel->dirs_marked) && !DIR_IS_DOTDOT (panel->dir.list[i].fname))
+            && ((panel->dirs_marked != 0 && panel->dir.list[i].f.marked)
+                || panel->dirs_marked == 0) && !DIR_IS_DOTDOT (panel->dir.list[i].fname))
         {
             vfs_path_t *p;
             size_t dir_count = 0;
diff -urpN mc-4.8.23/src/filemanager/cmd.h mc-4.8.24/src/filemanager/cmd.h
--- mc-4.8.23/src/filemanager/cmd.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/cmd.h	2020-01-01 19:52:34.000000000 +0400
@@ -80,7 +80,6 @@ void panel_tree_cmd (void);
 void link_cmd (link_type_t link_type);
 void edit_symlink_cmd (void);
 void swap_cmd (void);
-void view_other_cmd (void);
 void quick_cd_cmd (void);
 void save_setup_cmd (void);
 void user_file_menu_cmd (void);
diff -urpN mc-4.8.23/src/filemanager/command.c mc-4.8.24/src/filemanager/command.c
--- mc-4.8.23/src/filemanager/command.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/command.c	2020-01-01 19:52:34.000000000 +0400
@@ -52,7 +52,7 @@
 #include "src/usermenu.h"       /* expand_format */
 
 #include "midnight.h"           /* current_panel */
-#include "layout.h"             /* for command_prompt variable */
+#include "layout.h"             /* command_prompt */
 #include "tree.h"               /* sync_tree() */
 
 #include "command.h"
diff -urpN mc-4.8.23/src/filemanager/dir.c mc-4.8.24/src/filemanager/dir.c
--- mc-4.8.23/src/filemanager/dir.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/dir.c	2020-01-01 19:52:34.000000000 +0400
@@ -42,14 +42,12 @@
 #include "lib/fs.h"
 #include "lib/strutil.h"
 #include "lib/util.h"
-#include "lib/widget.h"         /* message() */
 
 #include "src/setup.h"          /* panels_options */
 
 #include "treestore.h"
 #include "file.h"               /* file_is_symlink_to_dir() */
 #include "dir.h"
-#include "layout.h"             /* rotate_dash() */
 
 /*** global variables ****************************************************************************/
 
@@ -73,7 +71,7 @@ static gboolean case_sensitive = OS_SORT
 /* Are the exec_bit files top in list */
 static gboolean exec_first = TRUE;
 
-static dir_list dir_copy = { NULL, 0, 0 };
+static dir_list dir_copy = { NULL, 0, 0, NULL };
 
 /*** file scope functions ************************************************************************/
 /* --------------------------------------------------------------------------------------------- */
@@ -147,11 +145,10 @@ clean_sort_keys (dir_list * list, int st
  */
 
 static gboolean
-handle_dirent (struct dirent *dp, const char *fltr, struct stat *buf1, int *link_to_dir,
-               int *stale_link)
+handle_dirent (struct dirent *dp, const char *fltr, struct stat *buf1, gboolean * link_to_dir,
+               gboolean * stale_link)
 {
     vfs_path_t *vpath;
-    gboolean stale;
 
     if (DIR_IS_DOT (dp->d_name) || DIR_IS_DOTDOT (dp->d_name))
         return FALSE;
@@ -175,12 +172,11 @@ handle_dirent (struct dirent *dp, const
         tree_store_mark_checked (dp->d_name);
 
     /* A link to a file or a directory? */
-    *link_to_dir = file_is_symlink_to_dir (vpath, buf1, &stale) ? 1 : 0;
-    *stale_link = stale ? 1 : 0;
+    *link_to_dir = file_is_symlink_to_dir (vpath, buf1, stale_link);
 
     vfs_path_free (vpath);
 
-    return (S_ISDIR (buf1->st_mode) || *link_to_dir != 0 || fltr == NULL
+    return (S_ISDIR (buf1->st_mode) || *link_to_dir || fltr == NULL
             || mc_search (fltr, NULL, dp->d_name, MC_SEARCH_T_GLOB));
 }
 
@@ -585,7 +581,7 @@ dir_list_init (dir_list * list)
 /* Return values: FALSE = don't add, TRUE = add to the list */
 
 gboolean
-handle_path (const char *path, struct stat * buf1, int *link_to_dir, int *stale_link)
+handle_path (const char *path, struct stat * buf1, gboolean * link_to_dir, gboolean * stale_link)
 {
     vfs_path_t *vpath;
 
@@ -603,8 +599,8 @@ handle_path (const char *path, struct st
         tree_store_mark_checked (path);
 
     /* A link to a file or a directory? */
-    *link_to_dir = 0;
-    *stale_link = 0;
+    *link_to_dir = FALSE;
+    *stale_link = FALSE;
     if (S_ISLNK (buf1->st_mode))
     {
         struct stat buf2;
@@ -612,7 +608,7 @@ handle_path (const char *path, struct st
         if (mc_stat (vpath, &buf2) == 0)
             *link_to_dir = S_ISDIR (buf2.st_mode) != 0;
         else
-            *stale_link = 1;
+            *stale_link = TRUE;
     }
 
     vfs_path_free (vpath);
@@ -622,31 +618,30 @@ handle_path (const char *path, struct st
 
 /* --------------------------------------------------------------------------------------------- */
 
-void
+gboolean
 dir_list_load (dir_list * list, const vfs_path_t * vpath, GCompareFunc sort,
                const dir_sort_options_t * sort_op, const char *fltr)
 {
     DIR *dirp;
     struct dirent *dp;
-    int link_to_dir, stale_link;
     struct stat st;
     file_entry_t *fentry;
     const char *vpath_str;
+    gboolean ret = TRUE;
 
     /* ".." (if any) must be the first entry in the list */
     if (!dir_list_init (list))
-        return;
+        return FALSE;
 
     fentry = &list->list[0];
     if (dir_get_dotdot_stat (vpath, &st))
         fentry->st = st;
 
+    if (list->callback != NULL)
+        list->callback (DIR_OPEN, (void *) vpath);
     dirp = mc_opendir (vpath);
     if (dirp == NULL)
-    {
-        message (D_ERROR, MSG_ERROR, _("Cannot read directory contents"));
-        return;
-    }
+        return FALSE;
 
     tree_store_start_check (vpath);
 
@@ -655,24 +650,29 @@ dir_list_load (dir_list * list, const vf
     if (IS_PATH_SEP (vpath_str[0]) && vpath_str[1] == '\0')
         dir_list_clean (list);
 
-    while ((dp = mc_readdir (dirp)) != NULL)
+    while (ret && (dp = mc_readdir (dirp)) != NULL)
     {
+        gboolean link_to_dir, stale_link;
+
+        if (list->callback != NULL)
+            list->callback (DIR_READ, dp);
+
         if (!handle_dirent (dp, fltr, &st, &link_to_dir, &stale_link))
             continue;
 
-        if (!dir_list_append (list, dp->d_name, &st, link_to_dir != 0, stale_link != 0))
-            goto ret;
-
-        if ((list->len & 31) == 0)
-            rotate_dash (TRUE);
+        if (!dir_list_append (list, dp->d_name, &st, link_to_dir, stale_link))
+            ret = FALSE;
     }
 
-    dir_list_sort (list, sort, sort_op);
+    if (ret)
+        dir_list_sort (list, sort, sort_op);
 
-  ret:
+    if (list->callback != NULL)
+        list->callback (DIR_CLOSE, NULL);
     mc_closedir (dirp);
     tree_store_end_check ();
-    rotate_dash (FALSE);
+
+    return ret;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -690,25 +690,27 @@ if_link_is_exe (const vfs_path_t * full_
 /* --------------------------------------------------------------------------------------------- */
 /** If fltr is null, then it is a match */
 
-void
+gboolean
 dir_list_reload (dir_list * list, const vfs_path_t * vpath, GCompareFunc sort,
                  const dir_sort_options_t * sort_op, const char *fltr)
 {
     DIR *dirp;
     struct dirent *dp;
-    int i, link_to_dir, stale_link;
+    int i;
     struct stat st;
     int marked_cnt;
     GHashTable *marked_files;
     const char *tmp_path;
+    gboolean ret = TRUE;
 
+    if (list->callback != NULL)
+        list->callback (DIR_OPEN, (void *) vpath);
     dirp = mc_opendir (vpath);
     if (dirp == NULL)
     {
-        message (D_ERROR, MSG_ERROR, _("Cannot read directory contents"));
         dir_list_clean (list);
         dir_list_init (list);
-        return;
+        return FALSE;
     }
 
     tree_store_start_check (vpath);
@@ -754,7 +756,7 @@ dir_list_reload (dir_list * list, const
         if (!dir_list_init (list))
         {
             dir_list_free_list (&dir_copy);
-            return;
+            return FALSE;
         }
 
         if (dir_get_dotdot_stat (vpath, &st))
@@ -766,56 +768,48 @@ dir_list_reload (dir_list * list, const
         }
     }
 
-    while ((dp = mc_readdir (dirp)) != NULL)
+    while (ret && (dp = mc_readdir (dirp)) != NULL)
     {
-        file_entry_t *fentry;
+        gboolean link_to_dir, stale_link;
+
+        if (list->callback != NULL)
+            list->callback (DIR_READ, dp);
 
         if (!handle_dirent (dp, fltr, &st, &link_to_dir, &stale_link))
             continue;
 
-        if (!dir_list_append (list, dp->d_name, &st, link_to_dir != 0, stale_link != 0))
+        if (!dir_list_append (list, dp->d_name, &st, link_to_dir, stale_link))
+            ret = FALSE;
+        else
         {
-            mc_closedir (dirp);
-            /* Norbert (Feb 12, 1997):
-               Just in case someone finds this memory leak:
-               -1 means big trouble (at the moment no memory left),
-               I don't bother with further cleanup because if one gets to
-               this point he will have more problems than a few memory
-               leaks and because one 'dir_list_clean' would not be enough (and
-               because I don't want to spent the time to make it working,
-               IMHO it's not worthwhile).
-               dir_list_clean (&dir_copy);
-             */
-            tree_store_end_check ();
-            g_hash_table_destroy (marked_files);
-            return;
-        }
-        fentry = &list->list[list->len - 1];
+            file_entry_t *fentry;
 
-        fentry->f.marked = 0;
+            fentry = &list->list[list->len - 1];
 
-        /*
-         * If we have marked files in the copy, scan through the copy
-         * to find matching file.  Decrease number of remaining marks if
-         * we copied one.
-         */
-        if (marked_cnt > 0 && g_hash_table_lookup (marked_files, dp->d_name) != NULL)
-        {
-            fentry->f.marked = 1;
-            marked_cnt--;
+            /*
+             * If we have marked files in the copy, scan through the copy
+             * to find matching file.  Decrease number of remaining marks if
+             * we copied one.
+             */
+            fentry->f.marked = (marked_cnt > 0
+                                && g_hash_table_lookup (marked_files, dp->d_name) != NULL);
+            if (fentry->f.marked)
+                marked_cnt--;
         }
-
-        if ((list->len & 15) == 0)
-            rotate_dash (TRUE);
     }
+
+    if (ret)
+        dir_list_sort (list, sort, sort_op);
+
+    if (list->callback != NULL)
+        list->callback (DIR_CLOSE, NULL);
     mc_closedir (dirp);
     tree_store_end_check ();
-    g_hash_table_destroy (marked_files);
-
-    dir_list_sort (list, sort, sort_op);
 
+    g_hash_table_destroy (marked_files);
     dir_list_free_list (&dir_copy);
-    rotate_dash (FALSE);
+
+    return ret;
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/src/filemanager/dir.h mc-4.8.24/src/filemanager/dir.h
--- mc-4.8.23/src/filemanager/dir.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/dir.h	2020-01-01 19:52:34.000000000 +0400
@@ -16,6 +16,16 @@
 #define DIR_LIST_MIN_SIZE 128
 #define DIR_LIST_RESIZE_STEP 128
 
+typedef enum
+{
+    DIR_OPEN = 0,
+    DIR_READ,
+    DIR_CLOSE
+} dir_list_cb_state_t;
+
+/* dir_list callback */
+typedef void (*dir_list_cb_fn) (dir_list_cb_state_t state, void *data);
+
 /*** enums ***************************************************************************************/
 
 /*** structures declarations (and typedefs of structures)*****************************************/
@@ -28,6 +38,7 @@ typedef struct
     file_entry_t *list; /**< list of file_entry_t objects */
     int size;           /**< number of allocated elements in list (capacity) */
     int len;            /**< number of used elements in list */
+    dir_list_cb_fn callback;    /**< callback to visualize of directory read */
 } dir_list;
 
 /**
@@ -48,15 +59,16 @@ gboolean dir_list_grow (dir_list * list,
 gboolean dir_list_append (dir_list * list, const char *fname, const struct stat *st,
                           gboolean link_to_dir, gboolean stale_link);
 
-void dir_list_load (dir_list * list, const vfs_path_t * vpath, GCompareFunc sort,
-                    const dir_sort_options_t * sort_op, const char *fltr);
-void dir_list_reload (dir_list * list, const vfs_path_t * vpath, GCompareFunc sort,
-                      const dir_sort_options_t * sort_op, const char *fltr);
+gboolean dir_list_load (dir_list * list, const vfs_path_t * vpath, GCompareFunc sort,
+                        const dir_sort_options_t * sort_op, const char *fltr);
+gboolean dir_list_reload (dir_list * list, const vfs_path_t * vpath, GCompareFunc sort,
+                          const dir_sort_options_t * sort_op, const char *fltr);
 void dir_list_sort (dir_list * list, GCompareFunc sort, const dir_sort_options_t * sort_op);
 gboolean dir_list_init (dir_list * list);
 void dir_list_clean (dir_list * list);
 void dir_list_free_list (dir_list * list);
-gboolean handle_path (const char *path, struct stat *buf1, int *link_to_dir, int *stale_link);
+gboolean handle_path (const char *path, struct stat *buf1, gboolean * link_to_dir,
+                      gboolean * stale_link);
 
 /* Sorting functions */
 int unsorted (file_entry_t * a, file_entry_t * b);
diff -urpN mc-4.8.23/src/filemanager/ext.c mc-4.8.24/src/filemanager/ext.c
--- mc-4.8.23/src/filemanager/ext.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/ext.c	2020-01-01 19:52:34.000000000 +0400
@@ -509,10 +509,13 @@ exec_extension (void *target, const vfs_
         if (mc_global.tty.console_flag != '\0')
         {
             handle_console (CONSOLE_SAVE);
-            if (output_lines && mc_global.keybar_visible)
-                show_console_contents (output_start_y,
-                                       LINES - mc_global.keybar_visible -
-                                       output_lines - 1, LINES - mc_global.keybar_visible - 1);
+            if (output_lines != 0 && mc_global.keybar_visible)
+            {
+                unsigned char end_line;
+
+                end_line = LINES - (mc_global.keybar_visible ? 1 : 0) - 1;
+                show_console_contents (output_start_y, end_line - output_lines, end_line);
+            }
         }
     }
 
diff -urpN mc-4.8.23/src/filemanager/file.c mc-4.8.24/src/filemanager/file.c
--- mc-4.8.23/src/filemanager/file.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/file.c	2020-01-01 19:52:34.000000000 +0400
@@ -353,7 +353,7 @@ check_hardlinks (const vfs_path_t * src_
 
     if (src_stat->st_nlink < 2)
         return HARDLINK_NOTLINK;
-    if ((vfs_file_class_flags (src_vpath) & VFS_NOLINKS) != 0)
+    if ((vfs_file_class_flags (src_vpath) & VFSF_NOLINKS) != 0)
         return HARDLINK_UNSUPPORTED;
 
     lnk = (struct link *) is_in_linklist (linklist, src_vpath, src_stat);
@@ -1564,6 +1564,7 @@ do_move_dir_dir (const WPanel * panel, f
     gboolean move_over = FALSE;
     gboolean dstat_ok;
     vfs_path_t *src_vpath, *dst_vpath;
+    gboolean calc_total = FALSE;
 
     src_vpath = vfs_path_from_str (s);
     dst_vpath = vfs_path_from_str (d);
@@ -1608,6 +1609,19 @@ do_move_dir_dir (const WPanel * panel, f
     {
         if (move_over)
         {
+            if (panel != NULL)
+            {
+                /* In case of single directory, calculate totals. In case of many directories,
+                   totals are calcuated already. */
+                return_status =
+                    panel_operate_init_totals (panel, src_vpath, &src_stat, ctx, TRUE,
+                                               FILEGUI_DIALOG_MULTI_ITEM);
+                if (return_status != FILE_CONT)
+                    goto ret;
+
+                calc_total = TRUE;
+            }
+
             return_status = copy_dir_dir (tctx, ctx, s, d, FALSE, TRUE, TRUE, NULL);
 
             if (return_status != FILE_CONT)
@@ -1652,13 +1666,13 @@ do_move_dir_dir (const WPanel * panel, f
     }
 
     /* Failed because of filesystem boundary -> copy dir instead */
-    if (panel != NULL)
+    if (panel != NULL && !calc_total)
     {
         /* In case of single directory, calculate totals. In case of many directories,
            totals are calcuated already. */
         return_status =
-            panel_operate_init_totals (panel, src_vpath, &src_stat, ctx, FALSE,
-                                       FILEGUI_DIALOG_ONE_ITEM);
+            panel_operate_init_totals (panel, src_vpath, &src_stat, ctx, TRUE,
+                                       FILEGUI_DIALOG_MULTI_ITEM);
         if (return_status != FILE_CONT)
             goto ret;
     }
@@ -3140,7 +3154,7 @@ dirsize_status_update_cb (status_msg_t *
     {
         dlg_set_size (sm->dlg, wd->lines, WIDGET (dsm->count_size)->cols + 6);
         dirsize_status_locate_buttons (dsm);
-        dlg_redraw (sm->dlg);
+        dlg_draw (sm->dlg);
     }
 
     /* adjust first label */
diff -urpN mc-4.8.23/src/filemanager/filegui.c mc-4.8.24/src/filemanager/filegui.c
--- mc-4.8.23/src/filemanager/filegui.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/filegui.c	2020-01-01 19:52:34.000000000 +0400
@@ -392,9 +392,10 @@ file_bps_prepare_for_show (char *buffer,
  * |            [ Yes ] [ No ] [ Append ] [ Reget ]           |   // 9, 10, 11, 12
  * +----------------------------------------------------------+
  * |                   Overwrite all files?                   |   // 13
- * |  [ All ] [ Older ] [None] [ Smaller ] [ Size differs ]   |   // 14, 15, 16, 17, 18
+ * |  [ ] Don't overwrite with zero length file               |   // 14
+ * |  [ All ] [ Older ] [None] [ Smaller ] [ Size differs ]   |   // 15, 16, 17, 18, 19
  * +----------------------------------------------------------|
- * |                         [ Abort ]                        |   // 19
+ * |                         [ Abort ]                        |   // 20
  * +----------------------------------------------------------+
  */
 
@@ -769,7 +770,7 @@ check_progress_buttons (file_op_context_
         {
             /* redraw dialog in case of Skip after Suspend */
             place_progress_buttons (ui->op_dlg, FALSE);
-            dlg_redraw (ui->op_dlg);
+            dlg_draw (ui->op_dlg);
         }
         ctx->suspended = FALSE;
         return FILE_SKIP;
@@ -780,7 +781,7 @@ check_progress_buttons (file_op_context_
     case FILE_SUSPEND:
         ctx->suspended = !ctx->suspended;
         place_progress_buttons (ui->op_dlg, ctx->suspended);
-        dlg_redraw (ui->op_dlg);
+        dlg_draw (ui->op_dlg);
         MC_FALLTHROUGH;
     default:
         if (ctx->suspended)
@@ -904,8 +905,7 @@ file_op_context_create_ui (file_op_conte
                                                     progress_buttons[2].text,
                                                     progress_button_callback));
         progress_buttons[2].len = button_get_len (BUTTON (progress_buttons[2].w));
-        send_message (progress_buttons[2].w, NULL, MSG_DESTROY, 0, NULL);
-        g_free (progress_buttons[2].w);
+        widget_destroy (progress_buttons[2].w);
     }
     progress_buttons[2].w = progress_buttons[1].w;
 
diff -urpN mc-4.8.23/src/filemanager/find.c mc-4.8.24/src/filemanager/find.c
--- mc-4.8.23/src/filemanager/find.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/find.c	2020-01-01 19:52:34.000000000 +0400
@@ -905,9 +905,9 @@ insert_file (const char *dir, const char
     while (IS_PATH_SEP (dir[0]) && IS_PATH_SEP (dir[1]))
         dir++;
 
-    if (old_dir)
+    if (old_dir != NULL)
     {
-        if (strcmp (old_dir, dir))
+        if (strcmp (old_dir, dir) != 0)
         {
             g_free (old_dir);
             old_dir = g_strdup (dir);
@@ -939,7 +939,7 @@ find_add_match (const char *dir, const c
     /* Don't scroll */
     if (matches == 0)
         listbox_select_first (find_list);
-    widget_redraw (WIDGET (find_list));
+    widget_draw (WIDGET (find_list));
 
     matches++;
     found_num_update ();
@@ -1065,6 +1065,7 @@ search_content (WDialog * h, const char
         while (!ret_val)
         {
             char ch = '\0';
+
             off += i + 1;       /* the previous line, plus a newline character */
             i = 0;
 
@@ -1148,6 +1149,7 @@ search_content (WDialog * h, const char
             if ((line & 0xff) == 0)
             {
                 FindProgressStatus res;
+
                 res = check_find_events (h);
                 switch (res)
                 {
@@ -1247,11 +1249,8 @@ find_rotate_dash (const WDialog * h, gbo
     static const char rotating_dash[4] = "|/-\\";
     const Widget *w = CONST_WIDGET (h);
 
-    if (!verbose)
-        return;
-
     tty_setcolor (h->color[DLG_COLOR_NORMAL]);
-    widget_move (h, w->lines - 7, w->cols - 4);
+    widget_gotoyx (h, w->lines - 7, w->cols - 4);
     tty_print_char (show ? rotating_dash[pos] : ' ');
     pos = (pos + 1) % sizeof (rotating_dash);
     mc_refresh ();
@@ -1315,7 +1314,8 @@ do_search (WDialog * h)
                                                   ignore_count), ignore_count);
                             status_update (msg);
                         }
-                        find_rotate_dash (h, FALSE);
+                        if (verbose)
+                            find_rotate_dash (h, FALSE);
                         stop_idle (h);
                         return 0;
                     }
@@ -1401,7 +1401,8 @@ do_search (WDialog * h)
             ;
     }                           /* for */
 
-    find_rotate_dash (h, TRUE);
+    if (verbose)
+        find_rotate_dash (h, TRUE);
 
     return 1;
 }
@@ -1594,7 +1595,7 @@ start_stop (WButton * button, int action
     button_set_text (button, fbuts[is_start ? 3 : 2].text);
 
     find_relocate_buttons (w->owner, FALSE);
-    dlg_redraw (w->owner);
+    dlg_draw (w->owner);
 
     return 0;
 }
@@ -1772,7 +1773,6 @@ do_find (const char *start_dir, ssize_t
 
     if (return_value == B_PANELIZE && *filename)
     {
-        int link_to_dir, stale_link;
         int i;
         struct stat st;
         GList *entry;
@@ -1789,6 +1789,7 @@ do_find (const char *start_dir, ssize_t
             WLEntry *le = LENTRY (entry->data);
             find_match_location_t *location = le->data;
             char *p;
+            gboolean link_to_dir, stale_link;
 
             if ((le->text == NULL) || (location == NULL) || (location->dir == NULL))
                 continue;
@@ -1832,8 +1833,8 @@ do_find (const char *start_dir, ssize_t
             list->list[list->len].fnamelen = strlen (p);
             list->list[list->len].fname = g_strndup (p, list->list[list->len].fnamelen);
             list->list[list->len].f.marked = 0;
-            list->list[list->len].f.link_to_dir = link_to_dir;
-            list->list[list->len].f.stale_link = stale_link;
+            list->list[list->len].f.link_to_dir = link_to_dir ? 1 : 0;
+            list->list[list->len].f.stale_link = stale_link ? 1 : 0;
             list->list[list->len].f.dir_size_computed = 0;
             list->list[list->len].st = st;
             list->list[list->len].sort_key = NULL;
diff -urpN mc-4.8.23/src/filemanager/hotlist.c mc-4.8.24/src/filemanager/hotlist.c
--- mc-4.8.23/src/filemanager/hotlist.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/hotlist.c	2020-01-01 19:52:34.000000000 +0400
@@ -125,11 +125,6 @@ enum HotListType
 static struct
 {
     /*
-     * these parameters are intended to be user configurable
-     */
-    int expanded;               /* expanded view of all groups at startup */
-
-    /*
      * these reflect run time state
      */
 
@@ -594,7 +589,7 @@ hotlist_callback (Widget * w, Widget * s
          * (2) Refresh the hotlist.
          *
          * We may have run a command that changed the contents of the list.
-         * We therefore need to refresh it. So we do `widget_redraw (lst)`.
+         * We therefore need to refresh it. So we do `widget_draw (lst)`.
          */
         {
             Widget *lst;
@@ -603,11 +598,11 @@ hotlist_callback (Widget * w, Widget * s
 
             /* widget_select() already redraws the widget, but since it's a
              * no-op if the widget is already selected ("focused"), we have
-             * to call widget_redraw() separately. */
+             * to call widget_draw() separately. */
             if (!widget_get_state (lst, WST_FOCUSED))
                 widget_select (lst);
             else
-                widget_redraw (lst);
+                widget_draw (lst);
         }
         return MSG_HANDLED;
 
@@ -763,9 +758,6 @@ init_hotlist (hotlist_t list_type)
     lines = LINES - 2;
     cols = init_i18n_stuff (list_type, COLS - 6);
 
-    hotlist_state.expanded =
-        mc_config_get_int (mc_global.main_config, "HotlistConfig", "expanded_view_of_groups", 0);
-
 #ifdef ENABLE_VFS
     if (list_type == LIST_VFSLIST)
     {
diff -urpN mc-4.8.23/src/filemanager/info.c mc-4.8.24/src/filemanager/info.c
--- mc-4.8.23/src/filemanager/info.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/info.c	2020-01-01 19:52:34.000000000 +0400
@@ -88,12 +88,12 @@ info_box (WInfo * info)
     widget_erase (w);
     tty_draw_box (w->y, w->x, w->lines, w->cols, FALSE);
 
-    widget_move (w, 0, (w->cols - len - 2) / 2);
+    widget_gotoyx (w, 0, (w->cols - len - 2) / 2);
     tty_printf (" %s ", title);
 
-    widget_move (w, 2, 0);
+    widget_gotoyx (w, 2, 0);
     tty_print_alt_char (ACS_LTEE, FALSE);
-    widget_move (w, 2, w->cols - 1);
+    widget_gotoyx (w, 2, w->cols - 1);
     tty_print_alt_char (ACS_RTEE, FALSE);
     tty_draw_hline (w->y + 2, w->x + 1, ACS_HLINE, w->cols - 2);
 }
@@ -117,7 +117,7 @@ info_show_info (WInfo * info)
     info_box (info);
 
     tty_setcolor (MARKED_COLOR);
-    widget_move (w, 1, 3);
+    widget_gotoyx (w, 1, 3);
     tty_printf (_("Midnight Commander %s"), VERSION);
 
     if (!info->ready)
@@ -155,7 +155,7 @@ info_show_info (WInfo * info)
     default:
         MC_FALLTHROUGH;
     case 16:
-        widget_move (w, 16, 3);
+        widget_gotoyx (w, 16, 3);
         if ((myfs_stats.nfree == 0 && myfs_stats.nodes == 0) ||
             (myfs_stats.nfree == (uintmax_t) (-1) && myfs_stats.nodes == (uintmax_t) (-1)))
             tty_print_string (_("No node information"));
@@ -171,7 +171,7 @@ info_show_info (WInfo * info)
                         (int) (100 * (long double) myfs_stats.nfree / myfs_stats.nodes));
         MC_FALLTHROUGH;
     case 15:
-        widget_move (w, 15, 3);
+        widget_gotoyx (w, 15, 3);
         if (myfs_stats.avail == 0 && myfs_stats.total == 0)
             tty_print_string (_("No space information"));
         else
@@ -186,40 +186,40 @@ info_show_info (WInfo * info)
         }
         MC_FALLTHROUGH;
     case 14:
-        widget_move (w, 14, 3);
+        widget_gotoyx (w, 14, 3);
         tty_printf (_("Type:       %s"),
                     myfs_stats.typename ? myfs_stats.typename : _("non-local vfs"));
         if (myfs_stats.type != 0xffff && myfs_stats.type != -1)
             tty_printf (" (%Xh)", (unsigned int) myfs_stats.type);
         MC_FALLTHROUGH;
     case 13:
-        widget_move (w, 13, 3);
+        widget_gotoyx (w, 13, 3);
         str_printf (buff, _("Device:     %s"),
                     str_trunc (myfs_stats.device, w->cols - i18n_adjust));
         tty_print_string (buff->str);
         g_string_set_size (buff, 0);
         MC_FALLTHROUGH;
     case 12:
-        widget_move (w, 12, 3);
+        widget_gotoyx (w, 12, 3);
         str_printf (buff, _("Filesystem: %s"),
                     str_trunc (myfs_stats.mpoint, w->cols - i18n_adjust));
         tty_print_string (buff->str);
         g_string_set_size (buff, 0);
         MC_FALLTHROUGH;
     case 11:
-        widget_move (w, 11, 3);
+        widget_gotoyx (w, 11, 3);
         str_printf (buff, _("Accessed:   %s"), file_date (st.st_atime));
         tty_print_string (buff->str);
         g_string_set_size (buff, 0);
         MC_FALLTHROUGH;
     case 10:
-        widget_move (w, 10, 3);
+        widget_gotoyx (w, 10, 3);
         str_printf (buff, _("Modified:   %s"), file_date (st.st_mtime));
         tty_print_string (buff->str);
         g_string_set_size (buff, 0);
         MC_FALLTHROUGH;
     case 9:
-        widget_move (w, 9, 3);
+        widget_gotoyx (w, 9, 3);
         /* The field st_ctime is changed by writing or by setting inode
            information (i.e., owner, group, link count, mode, etc.).  */
         /* TRANSLATORS: Time of last status change as in stat(2) man. */
@@ -228,7 +228,7 @@ info_show_info (WInfo * info)
         g_string_set_size (buff, 0);
         MC_FALLTHROUGH;
     case 8:
-        widget_move (w, 8, 3);
+        widget_gotoyx (w, 8, 3);
 #ifdef HAVE_STRUCT_STAT_ST_RDEV
         if (S_ISCHR (st.st_mode) || S_ISBLK (st.st_mode))
             tty_printf (_("Dev. type: major %lu, minor %lu"),
@@ -246,27 +246,27 @@ info_show_info (WInfo * info)
         }
         MC_FALLTHROUGH;
     case 7:
-        widget_move (w, 7, 3);
+        widget_gotoyx (w, 7, 3);
         tty_printf (_("Owner:      %s/%s"), get_owner (st.st_uid), get_group (st.st_gid));
         MC_FALLTHROUGH;
     case 6:
-        widget_move (w, 6, 3);
+        widget_gotoyx (w, 6, 3);
         tty_printf (_("Links:      %d"), (int) st.st_nlink);
         MC_FALLTHROUGH;
     case 5:
-        widget_move (w, 5, 3);
+        widget_gotoyx (w, 5, 3);
         tty_printf (_("Mode:       %s (%04o)"),
                     string_perm (st.st_mode), (unsigned) st.st_mode & 07777);
         MC_FALLTHROUGH;
     case 4:
-        widget_move (w, 4, 3);
+        widget_gotoyx (w, 4, 3);
         tty_printf (_("Location:   %Xh:%Xh"), (unsigned int) st.st_dev, (unsigned int) st.st_ino);
         MC_FALLTHROUGH;
     case 3:
         {
             const char *fname;
 
-            widget_move (w, 3, 2);
+            widget_gotoyx (w, 3, 2);
             fname = current_panel->dir.list[current_panel->selected].fname;
             str_printf (buff, file_label, str_trunc (fname, w->cols - i18n_adjust));
             tty_print_string (buff->str);
diff -urpN mc-4.8.23/src/filemanager/layout.c mc-4.8.24/src/filemanager/layout.c
--- mc-4.8.23/src/filemanager/layout.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/layout.c	2020-01-01 19:52:34.000000000 +0400
@@ -50,6 +50,7 @@
 #include "lib/strutil.h"
 #include "lib/widget.h"
 #include "lib/event.h"
+#include "lib/util.h"           /* mc_time_elapsed() */
 
 #include "src/consaver/cons.saver.h"
 #include "src/viewer/mcviewer.h"        /* The view widget */
@@ -70,14 +71,14 @@
 
 panels_layout_t panels_layout = {
     /* Set if the panels are split horizontally */
-    .horizontal_split = 0,
+    .horizontal_split = FALSE,
 
     /* vertical split */
-    .vertical_equal = 1,
+    .vertical_equal = TRUE,
     .left_panel_size = 0,
 
     /* horizontal split */
-    .horizontal_equal = 1,
+    .horizontal_equal = TRUE,
     .top_panel_size = 0
 };
 
@@ -91,13 +92,13 @@ int output_lines = 0;
 gboolean command_prompt = TRUE;
 
 /* Set if the main menu is visible */
-int menubar_visible = 1;
+gboolean menubar_visible = TRUE;
 
 /* Set to show current working dir in xterm window title */
 gboolean xterm_title = TRUE;
 
 /* Set to show free space on device assigned to current directory */
-int free_space = 1;
+gboolean free_space = TRUE;
 
 /* The starting line for the output of the subprogram */
 int output_start_y = 0;
@@ -156,7 +157,7 @@ static WRadio *radio_widget;
 static struct
 {
     const char *text;
-    int *variable;
+    gboolean *variable;
     WCheck *widget;
 } check_options[] =
 {
@@ -204,12 +205,14 @@ check_split (panels_layout_t * layout)
     }
     else
     {
+        int md_cols = CONST_WIDGET (midnight_dlg)->cols;
+
         if (layout->vertical_equal)
-            layout->left_panel_size = COLS / 2;
+            layout->left_panel_size = md_cols / 2;
         else if (layout->left_panel_size < MINWIDTH)
             layout->left_panel_size = MINWIDTH;
-        else if (layout->left_panel_size > COLS - MINWIDTH)
-            layout->left_panel_size = COLS - MINWIDTH;
+        else if (layout->left_panel_size > md_cols - MINWIDTH)
+            layout->left_panel_size = md_cols - MINWIDTH;
     }
 }
 
@@ -223,26 +226,26 @@ update_split (const WDialog * h)
     check_split (&panels_layout);
 
     if (panels_layout.horizontal_split)
-        check_options[0].widget->state = panels_layout.horizontal_equal ? 1 : 0;
+        check_options[0].widget->state = panels_layout.horizontal_equal;
     else
-        check_options[0].widget->state = panels_layout.vertical_equal ? 1 : 0;
-    widget_redraw (WIDGET (check_options[0].widget));
+        check_options[0].widget->state = panels_layout.vertical_equal;
+    widget_draw (WIDGET (check_options[0].widget));
 
     tty_setcolor (check_options[0].widget->state ? DISABLED_COLOR : COLOR_NORMAL);
 
-    widget_move (h, 6, 5);
+    widget_gotoyx (h, 6, 5);
     if (panels_layout.horizontal_split)
         tty_printf ("%03d", panels_layout.top_panel_size);
     else
         tty_printf ("%03d", panels_layout.left_panel_size);
 
-    widget_move (h, 6, 17);
+    widget_gotoyx (h, 6, 17);
     if (panels_layout.horizontal_split)
         tty_printf ("%03d", height - panels_layout.top_panel_size);
     else
-        tty_printf ("%03d", COLS - panels_layout.left_panel_size);
+        tty_printf ("%03d", CONST_WIDGET (midnight_dlg)->cols - panels_layout.left_panel_size);
 
-    widget_move (h, 6, 12);
+    widget_gotoyx (h, 6, 12);
     tty_print_char ('=');
 }
 
@@ -322,48 +325,49 @@ layout_callback (Widget * w, Widget * se
         {
             old_output_lines = _output_lines;
             tty_setcolor (mc_global.tty.console_flag != '\0' ? COLOR_NORMAL : DISABLED_COLOR);
-            widget_move (h, 9, 5);
+            widget_gotoyx (h, 9, 5);
             tty_print_string (output_lines_label);
-            widget_move (h, 9, 5 + 3 + output_lines_label_len);
+            widget_gotoyx (h, 9, 5 + 3 + output_lines_label_len);
             tty_printf ("%02d", _output_lines);
         }
         return MSG_HANDLED;
 
     case MSG_POST_KEY:
         {
-            int _menubar_visible, _command_prompt, _keybar_visible, _message_visible;
+            const Widget *mw = CONST_WIDGET (midnight_dlg);
+            gboolean _menubar_visible, _command_prompt, _keybar_visible, _message_visible;
 
             _menubar_visible = check_options[1].widget->state;
             _command_prompt = check_options[2].widget->state;
             _keybar_visible = check_options[3].widget->state;
             _message_visible = check_options[4].widget->state;
 
-            if (mc_global.tty.console_flag != '\0')
+            if (mc_global.tty.console_flag == '\0')
+                height =
+                    mw->lines - (_keybar_visible ? 1 : 0) - (_command_prompt ? 1 : 0) -
+                    (_menubar_visible ? 1 : 0) - _output_lines - (_message_visible ? 1 : 0);
+            else
             {
                 int minimum;
 
                 if (_output_lines < 0)
                     _output_lines = 0;
                 height =
-                    LINES - _keybar_visible - _command_prompt - _menubar_visible - _output_lines -
-                    _message_visible;
-                minimum = MINHEIGHT * (1 + panels_layout.horizontal_split);
+                    mw->lines - (_keybar_visible ? 1 : 0) - (_command_prompt ? 1 : 0) -
+                    (_menubar_visible ? 1 : 0) - _output_lines - (_message_visible ? 1 : 0);
+                minimum = MINHEIGHT * (1 + (panels_layout.horizontal_split ? 1 : 0));
                 if (height < minimum)
                 {
                     _output_lines -= minimum - height;
                     height = minimum;
                 }
             }
-            else
-                height =
-                    LINES - _keybar_visible - _command_prompt - _menubar_visible - _output_lines -
-                    _message_visible;
 
             if (old_output_lines != _output_lines)
             {
                 old_output_lines = _output_lines;
                 tty_setcolor (mc_global.tty.console_flag != '\0' ? COLOR_NORMAL : DISABLED_COLOR);
-                widget_move (h, 9, 5 + 3 + output_lines_label_len);
+                widget_gotoyx (h, 9, 5 + 3 + output_lines_label_len);
                 tty_printf ("%02d", _output_lines);
             }
         }
@@ -372,11 +376,13 @@ layout_callback (Widget * w, Widget * se
     case MSG_NOTIFY:
         if (sender == WIDGET (radio_widget))
         {
-            if (panels_layout.horizontal_split != radio_widget->sel)
+            if ((panels_layout.horizontal_split ? 1 : 0) == radio_widget->sel)
+                update_split (h);
+            else
             {
                 int eq;
 
-                panels_layout.horizontal_split = radio_widget->sel;
+                panels_layout.horizontal_split = radio_widget->sel != 0;
 
                 if (panels_layout.horizontal_split)
                 {
@@ -388,7 +394,7 @@ layout_callback (Widget * w, Widget * se
                 {
                     eq = panels_layout.vertical_equal;
                     if (eq)
-                        panels_layout.left_panel_size = COLS / 2;
+                        panels_layout.left_panel_size = CONST_WIDGET (midnight_dlg)->cols / 2;
                 }
 
                 widget_disable (WIDGET (bleft_widget), eq);
@@ -398,15 +404,13 @@ layout_callback (Widget * w, Widget * se
                 layout_change ();
                 do_refresh ();
             }
-            else
-                update_split (h);
 
             return MSG_HANDLED;
         }
 
         if (sender == WIDGET (check_options[0].widget))
         {
-            int eq;
+            gboolean eq;
 
             if (panels_layout.horizontal_split)
             {
@@ -519,7 +523,7 @@ layout_dlg_create (void)
     add_widget (layout_dlg, groupbox_new (2, 3, 6, l1, title1));
 
     radio_widget = radio_new (3, 5, 2, s_split_direction);
-    radio_widget->sel = panels_layout.horizontal_split;
+    radio_widget->sel = panels_layout.horizontal_split ? 1 : 0;
     add_widget (layout_dlg, radio_widget);
 
     check_options[0].widget = check_new (5, 5, XTRACT (0));
@@ -672,7 +676,8 @@ layout_box (void)
 void
 panel_update_cols (Widget * widget, panel_display_t frame_size)
 {
-    int cols, origin;
+    const Widget *mw = CONST_WIDGET (midnight_dlg);
+    int cols, x;
 
     /* don't touch panel if it is not in dialog yet */
     /* if panel is not in dialog it is not in widgets list
@@ -682,28 +687,28 @@ panel_update_cols (Widget * widget, pane
 
     if (panels_layout.horizontal_split)
     {
-        widget->cols = COLS;
+        widget->cols = mw->cols;
         return;
     }
 
     if (frame_size == frame_full)
     {
-        cols = COLS;
-        origin = 0;
+        cols = mw->cols;
+        x = mw->x;
     }
     else if (widget == get_panel_widget (0))
     {
         cols = panels_layout.left_panel_size;
-        origin = 0;
+        x = mw->x;
     }
     else
     {
-        cols = COLS - panels_layout.left_panel_size;
-        origin = panels_layout.left_panel_size;
+        cols = mw->cols - panels_layout.left_panel_size;
+        x = mw->x + panels_layout.left_panel_size;
     }
 
     widget->cols = cols;
-    widget->x = origin;
+    widget->x = x;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -711,33 +716,61 @@ panel_update_cols (Widget * widget, pane
 void
 setup_panels (void)
 {
+    /* File manager screen layout:
+     *
+     * +---------------------------------------------------------------+
+     * | Menu bar                                                      |
+     * +-------------------------------+-------------------------------+
+     * |                               |                               |
+     * |                               |                               |
+     * |                               |                               |
+     * |                               |                               |
+     * |         Left panel            |         Right panel           |
+     * |                               |                               |
+     * |                               |                               |
+     * |                               |                               |
+     * |                               |                               |
+     * +-------------------------------+-------------------------------+
+     * | Hint (message) bar                                            |
+     * +---------------------------------------------------------------+
+     * |                                                               |
+     * |                        Console content                        |
+     * |                                                               |
+     * +--------+------------------------------------------------------+
+     * | Prompt | Command line                                         |
+     * | Key (button) bar                                              |
+     * +--------+------------------------------------------------------+
+     */
+
+    const Widget *mw = CONST_WIDGET (midnight_dlg);
     int start_y;
 
+    /* iniitial height of panels */
+    height =
+        mw->lines - (menubar_visible ? 1 : 0) - (mc_global.message_visible ? 1 : 0) -
+        (command_prompt ? 1 : 0) - (mc_global.keybar_visible ? 1 : 0);
+
     if (mc_global.tty.console_flag != '\0')
     {
         int minimum;
 
         if (output_lines < 0)
             output_lines = 0;
-        height =
-            LINES - mc_global.keybar_visible - (command_prompt ? 1 : 0) - menubar_visible -
-            output_lines - mc_global.message_visible;
-        minimum = MINHEIGHT * (1 + panels_layout.horizontal_split);
+        else
+            height -= output_lines;
+        minimum = MINHEIGHT * (1 + (panels_layout.horizontal_split ? 1 : 0));
         if (height < minimum)
         {
             output_lines -= minimum - height;
             height = minimum;
         }
     }
-    else
-    {
-        height =
-            LINES - menubar_visible - (command_prompt ? 1 : 0) - mc_global.keybar_visible -
-            mc_global.message_visible;
-    }
+
+    widget_set_size (WIDGET (the_menubar), mw->y, mw->x, 1, mw->cols);
+    menubar_set_visible (the_menubar, menubar_visible);
 
     check_split (&panels_layout);
-    start_y = menubar_visible;
+    start_y = mw->y + (menubar_visible ? 1 : 0);
 
     /* update columns first... */
     panel_do_cols (0);
@@ -746,19 +779,33 @@ setup_panels (void)
     /* ...then rows and origin */
     if (panels_layout.horizontal_split)
     {
-        widget_set_size (panels[0].widget, start_y, 0, panels_layout.top_panel_size,
+        widget_set_size (panels[0].widget, start_y, mw->x, panels_layout.top_panel_size,
                          panels[0].widget->cols);
-        widget_set_size (panels[1].widget, start_y + panels_layout.top_panel_size, 0,
+        widget_set_size (panels[1].widget, start_y + panels_layout.top_panel_size, mw->x,
                          height - panels_layout.top_panel_size, panels[1].widget->cols);
     }
     else
     {
-        widget_set_size (panels[0].widget, start_y, 0, height, panels[0].widget->cols);
+        widget_set_size (panels[0].widget, start_y, mw->x, height, panels[0].widget->cols);
         widget_set_size (panels[1].widget, start_y, panels[1].widget->x, height,
                          panels[1].widget->cols);
     }
 
-    widget_set_size (WIDGET (the_menubar), 0, 0, 1, COLS);
+    if (mc_global.message_visible)
+        widget_set_size (WIDGET (the_hint), height + start_y, mw->x, 1, mw->cols);
+    else
+        /* make invisible */
+        widget_set_size (WIDGET (the_hint), 0, 0, 0, 0);
+
+    /* Output window */
+    if (mc_global.tty.console_flag != '\0' && output_lines != 0)
+    {
+        unsigned char end_line;
+
+        end_line = mw->lines - (mc_global.keybar_visible ? 1 : 0) - 1;
+        output_start_y = end_line - (command_prompt ? 1 : 0) - output_lines + 1;
+        show_console_contents (output_start_y, end_line - output_lines, end_line);
+    }
 
     if (command_prompt)
     {
@@ -769,27 +816,15 @@ setup_panels (void)
     }
     else
     {
+        /* make invisible */
         widget_set_size (WIDGET (cmdline), 0, 0, 0, 0);
-        widget_set_size (WIDGET (the_prompt), LINES, COLS, 0, 0);
+        widget_set_size (WIDGET (the_prompt), mw->lines, mw->cols, 0, 0);
     }
 
-    widget_set_size (WIDGET (the_bar), LINES - 1, 0, mc_global.keybar_visible, COLS);
+    widget_set_size (WIDGET (the_bar), mw->lines - 1, mw->x, mc_global.keybar_visible ? 1 : 0,
+                     mw->cols);
     buttonbar_set_visible (the_bar, mc_global.keybar_visible);
 
-    /* Output window */
-    if (mc_global.tty.console_flag != '\0' && output_lines)
-    {
-        output_start_y = LINES - (command_prompt ? 1 : 0) - mc_global.keybar_visible - output_lines;
-        show_console_contents (output_start_y,
-                               LINES - output_lines - mc_global.keybar_visible - 1,
-                               LINES - mc_global.keybar_visible - 1);
-    }
-
-    if (mc_global.message_visible)
-        widget_set_size (WIDGET (the_hint), height + start_y, 0, 1, COLS);
-    else
-        widget_set_size (WIDGET (the_hint), 0, 0, 0, 0);
-
     update_xterm_title_path ();
 }
 
@@ -851,6 +886,7 @@ panels_split_less (void)
 void
 setup_cmdline (void)
 {
+    const Widget *mw = CONST_WIDGET (midnight_dlg);
     int prompt_width;
     int y;
     char *tmp_prompt = (char *) mc_prompt;
@@ -866,11 +902,11 @@ setup_cmdline (void)
     prompt_width = str_term_width1 (tmp_prompt);
 
     /* Check for prompts too big */
-    if (COLS > 8 && prompt_width > COLS - 8)
+    if (mw->cols > 8 && prompt_width > mw->cols - 8)
     {
         int prompt_len;
 
-        prompt_width = COLS - 8;
+        prompt_width = mw->cols - 8;
         prompt_len = str_offset_to_pos (tmp_prompt, prompt_width);
         tmp_prompt[prompt_len] = '\0';
     }
@@ -884,11 +920,11 @@ setup_cmdline (void)
     }
 #endif
 
-    y = LINES - 1 - mc_global.keybar_visible;
+    y = mw->lines - 1 - (mc_global.keybar_visible ? 1 : 0);
 
-    widget_set_size (WIDGET (the_prompt), y, 0, 1, prompt_width);
+    widget_set_size (WIDGET (the_prompt), y, mw->x, 1, prompt_width);
     label_set_text (the_prompt, mc_prompt);
-    widget_set_size (WIDGET (cmdline), y, prompt_width, 1, COLS - prompt_width);
+    widget_set_size (WIDGET (cmdline), y, mw->x + prompt_width, 1, mw->cols - prompt_width);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -917,12 +953,19 @@ set_hintbar (const char *str)
 void
 rotate_dash (gboolean show)
 {
-    Widget *w = WIDGET (midnight_dlg);
+    static guint64 timestamp = 0;
+    /* update with 10 FPS rate */
+    static const guint64 delay = G_USEC_PER_SEC / 10;
+
+    const Widget *w = CONST_WIDGET (midnight_dlg);
 
     if (!nice_rotating_dash || (ok_to_refresh <= 0))
         return;
 
-    widget_move (w, (menubar_visible != 0) ? 1 : 0, w->cols - 1);
+    if (show && !mc_time_elapsed (&timestamp, delay))
+        return;
+
+    widget_gotoyx (w, menubar_visible != 0 ? 1 : 0, w->cols - 1);
     tty_setcolor (NORMAL_COLOR);
 
     if (!show)
@@ -944,11 +987,12 @@ rotate_dash (gboolean show)
 const char *
 get_nth_panel_name (int num)
 {
-    if (!num)
+    if (num == 0)
         return "New Left Panel";
-    else if (num == 1)
+
+    if (num == 1)
         return "New Right Panel";
-    else
+
     {
         static char buffer[BUF_SMALL];
 
@@ -1009,14 +1053,16 @@ create_panel (int num, panel_view_mode_t
 
         if (old_type == view_listing && panel->frame_size == frame_full && type != view_listing)
         {
+            int md_cols = CONST_WIDGET (midnight_dlg)->cols;
+
             if (panels_layout.horizontal_split)
             {
-                cols = COLS;
+                cols = md_cols;
                 x = 0;
             }
             else
             {
-                cols = COLS - panels_layout.left_panel_size;
+                cols = md_cols - panels_layout.left_panel_size;
                 if (num == 1)
                     x = panels_layout.left_panel_size;
             }
@@ -1255,10 +1301,7 @@ get_panel_widget (int idx)
 int
 get_current_index (void)
 {
-    if (panels[0].widget == WIDGET (current_panel))
-        return 0;
-    else
-        return 1;
+    return (panels[0].widget == WIDGET (current_panel) ? 0 : 1);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1266,7 +1309,7 @@ get_current_index (void)
 int
 get_other_index (void)
 {
-    return !get_current_index ();
+    return (get_current_index () == 0 ? 1 : 0);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1283,10 +1326,7 @@ get_other_panel (void)
 panel_view_mode_t
 get_current_type (void)
 {
-    if (panels[0].widget == WIDGET (current_panel))
-        return panels[0].type;
-    else
-        return panels[1].type;
+    return (panels[0].widget == WIDGET (current_panel) ? panels[0].type : panels[1].type);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1295,10 +1335,7 @@ get_current_type (void)
 panel_view_mode_t
 get_other_type (void)
 {
-    if (panels[0].widget == WIDGET (current_panel))
-        return panels[1].type;
-    else
-        return panels[0].type;
+    return (panels[0].widget == WIDGET (current_panel) ? panels[1].type : panels[0].type);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1307,16 +1344,20 @@ get_other_type (void)
 void
 save_panel_dir (int idx)
 {
-    panel_view_mode_t type = get_panel_type (idx);
-    Widget *widget = get_panel_widget (idx);
+    panel_view_mode_t type;
 
-    if ((type == view_listing) && (widget != NULL))
+    type = get_panel_type (idx);
+    if (type == view_listing)
     {
-        WPanel *w = PANEL (widget);
+        WPanel *p;
 
-        g_free (panels[idx].last_saved_dir);    /* last path no needed */
-        /* Because path can be nonlocal */
-        panels[idx].last_saved_dir = g_strdup (vfs_path_as_str (w->cwd_vpath));
+        p = PANEL (get_panel_widget (idx));
+        if (p != NULL)
+        {
+            g_free (panels[idx].last_saved_dir);        /* last path no needed */
+            /* Because path can be nonlocal */
+            panels[idx].last_saved_dir = g_strdup (vfs_path_as_str (p->cwd_vpath));
+        }
     }
 }
 
diff -urpN mc-4.8.23/src/filemanager/layout.h mc-4.8.24/src/filemanager/layout.h
--- mc-4.8.23/src/filemanager/layout.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/layout.h	2020-01-01 19:52:34.000000000 +0400
@@ -27,14 +27,14 @@ typedef enum
 
 typedef struct
 {
-    int horizontal_split;
+    gboolean horizontal_split;
 
     /* vertical split */
-    int vertical_equal;
+    gboolean vertical_equal;
     int left_panel_size;
 
     /* horizontal split */
-    int horizontal_equal;
+    gboolean horizontal_equal;
     int top_panel_size;
 } panels_layout_t;
 
@@ -42,10 +42,10 @@ typedef struct
 
 extern int output_lines;
 extern gboolean command_prompt;
-extern int menubar_visible;
+extern gboolean menubar_visible;
 extern int output_start_y;
 extern gboolean xterm_title;
-extern int free_space;
+extern gboolean free_space;
 extern gboolean nice_rotating_dash;
 
 extern int ok_to_refresh;
diff -urpN mc-4.8.23/src/filemanager/midnight.c mc-4.8.24/src/filemanager/midnight.c
--- mc-4.8.23/src/filemanager/midnight.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/midnight.c	2020-01-01 19:52:34.000000000 +0400
@@ -58,9 +58,11 @@
 #ifdef ENABLE_SUBSHELL
 #include "src/subshell/subshell.h"
 #endif
+#include "src/execute.h"        /* toggle_subshell */
 #include "src/setup.h"          /* variables */
 #include "src/learn.h"          /* learn_keys() */
 #include "src/keybind-defaults.h"
+#include "lib/fileloc.h"        /* MC_FILEPOS_FILE */
 #include "lib/keybind.h"
 #include "lib/event.h"
 
@@ -86,6 +88,7 @@
 #endif
 
 #include "src/consaver/cons.saver.h"    /* show_console_contents */
+#include "src/file_history.h"   /* show_file_history() */
 
 #include "midnight.h"
 
@@ -289,6 +292,10 @@ create_command_menu (void)
     entries = g_list_prepend (entries, menu_entry_create (_("Show directory s&izes"), CK_DirSize));
     entries = g_list_prepend (entries, menu_separator_create ());
     entries = g_list_prepend (entries, menu_entry_create (_("Command &history"), CK_History));
+    entries =
+        g_list_prepend (entries,
+                        menu_entry_create (_("Viewed/edited files hi&story"),
+                                           CK_EditorViewerHistory));
     entries = g_list_prepend (entries, menu_entry_create (_("Di&rectory hotlist"), CK_HotList));
 #ifdef ENABLE_VFS
     entries = g_list_prepend (entries, menu_entry_create (_("&Active VFS list"), CK_VfsList));
@@ -915,7 +922,7 @@ create_file_manager (void)
     /* allow rebind tab */
     widget_want_tab (WIDGET (midnight_dlg), TRUE);
 
-    the_menubar = menubar_new (0, 0, COLS, NULL, menubar_visible);
+    the_menubar = menubar_new (NULL, menubar_visible);
     add_widget (midnight_dlg, the_menubar);
     init_menu ();
 
@@ -924,7 +931,7 @@ create_file_manager (void)
     add_widget (midnight_dlg, get_panel_widget (1));
 
     the_hint = label_new (0, 0, 0);
-    the_hint->transparent = 1;
+    the_hint->transparent = TRUE;
     the_hint->auto_adjust_cols = 0;
     WIDGET (the_hint)->cols = COLS;
     add_widget (midnight_dlg, the_hint);
@@ -1000,6 +1007,48 @@ mc_maybe_editor_or_viewer (void)
 
 /* --------------------------------------------------------------------------------------------- */
 
+static void
+show_editor_viewer_history (void)
+{
+    char *s;
+    int act;
+
+    s = show_file_history (WIDGET (midnight_dlg), &act);
+    if (s != NULL)
+    {
+        vfs_path_t *s_vpath;
+
+        switch (act)
+        {
+        case CK_Edit:
+            s_vpath = vfs_path_from_str (s);
+            edit_file_at_line (s_vpath, use_internal_edit, 0);
+            break;
+
+        case CK_View:
+            s_vpath = vfs_path_from_str (s);
+            view_file (s_vpath, use_internal_view, 0);
+            break;
+
+        default:
+            {
+                char *d;
+
+                d = g_path_get_dirname (s);
+                s_vpath = vfs_path_from_str (d);
+                do_cd (s_vpath, cd_exact);
+                try_to_select (current_panel, s);
+                g_free (d);
+            }
+        }
+
+        g_free (s);
+        vfs_path_free (s_vpath);
+    }
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 static gboolean
 quit_cmd_internal (int quiet)
 {
@@ -1062,10 +1111,10 @@ static void
 update_dirty_panels (void)
 {
     if (get_current_type () == view_listing && current_panel->dirty)
-        widget_redraw (WIDGET (current_panel));
+        widget_draw (WIDGET (current_panel));
 
     if (get_other_type () == view_listing && other_panel->dirty)
-        widget_redraw (WIDGET (other_panel));
+        widget_draw (WIDGET (other_panel));
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1119,7 +1168,7 @@ midnight_execute_cmd (Widget * sender, l
         break;
 #ifdef ENABLE_VFS
     case CK_OptionsVfs:
-        configure_vfs ();
+        configure_vfs_box ();
         break;
 #endif
     case CK_OptionsConfirm:
@@ -1238,7 +1287,7 @@ midnight_execute_cmd (Widget * sender, l
         break;
 #ifdef ENABLE_BACKGROUND
     case CK_Jobs:
-        jobs_cmd ();
+        jobs_box ();
         break;
 #endif
     case CK_OptionsLayout:
@@ -1319,7 +1368,7 @@ midnight_execute_cmd (Widget * sender, l
         res = send_message (current_panel, midnight_dlg, MSG_ACTION, command, NULL);
         break;
     case CK_Shell:
-        view_other_cmd ();
+        toggle_subshell ();
         break;
     case CK_DirSize:
         smart_dirsize_cmd ();
@@ -1374,6 +1423,9 @@ midnight_execute_cmd (Widget * sender, l
     case CK_ViewFile:
         view_file_cmd ();
         break;
+    case CK_EditorViewerHistory:
+        show_editor_viewer_history ();
+        break;
     case CK_Cancel:
         /* don't close panels due to SIGINT */
         break;
@@ -1449,16 +1501,17 @@ midnight_callback (Widget * w, Widget *
     case MSG_DRAW:
         load_hint (TRUE);
         /* We handle the special case of the output lines */
-        if (mc_global.tty.console_flag != '\0' && output_lines)
-            show_console_contents (output_start_y,
-                                   LINES - output_lines - mc_global.keybar_visible -
-                                   1, LINES - mc_global.keybar_visible - 1);
+        if (mc_global.tty.console_flag != '\0' && output_lines != 0)
+        {
+            unsigned char end_line;
+
+            end_line = LINES - (mc_global.keybar_visible ? 1 : 0) - 1;
+            show_console_contents (output_start_y, end_line - output_lines, end_line);
+        }
         return MSG_HANDLED;
 
     case MSG_RESIZE:
-        /* dlg_set_size() is surplus for this case */
-        w->lines = LINES;
-        w->cols = COLS;
+        widget_adjust_position (w->pos_flags, &w->y, &w->x, &w->lines, &w->cols);
         setup_panels ();
         menubar_arrange (the_menubar);
         return MSG_HANDLED;
diff -urpN mc-4.8.23/src/filemanager/mountlist.c mc-4.8.24/src/filemanager/mountlist.c
--- mc-4.8.23/src/filemanager/mountlist.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/mountlist.c	2020-01-01 19:52:34.000000000 +0400
@@ -1461,8 +1461,7 @@ void
 free_my_statfs (void)
 {
 #ifdef HAVE_INFOMOUNT_LIST
-    g_slist_free_full (mc_mount_list, (GDestroyNotify) free_mount_entry);
-    mc_mount_list = NULL;
+    g_clear_slist (&mc_mount_list, (GDestroyNotify) free_mount_entry);
 #endif /* HAVE_INFOMOUNT_LIST */
 }
 
diff -urpN mc-4.8.23/src/filemanager/panel.c mc-4.8.24/src/filemanager/panel.c
--- mc-4.8.23/src/filemanager/panel.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/panel.c	2020-01-01 19:52:34.000000000 +0400
@@ -85,7 +85,7 @@
 hook_t *select_file_hook = NULL;
 
 /* *INDENT-OFF* */
-panelized_panel_t panelized_panel = { {NULL, 0, -1}, NULL };
+panelized_panel_t panelized_panel = { {NULL, 0, -1, NULL}, NULL };
 /* *INDENT-ON* */
 
 static const char *string_file_name (file_entry_t *, int);
@@ -937,7 +937,7 @@ repaint_file (WPanel * panel, int file_i
             ypos %= panel_lines (panel);
 
         ypos += 2;              /* top frame and header */
-        widget_move (w, ypos, offset + 1);
+        widget_gotoyx (w, ypos, offset + 1);
     }
 
     ret_frm = format_file (panel, file_index, width, attr, isstatus, &fln);
@@ -961,7 +961,7 @@ repaint_file (WPanel * panel, int file_i
             }
         }
 
-        widget_move (w, ypos, offset);
+        widget_gotoyx (w, ypos, offset);
         tty_setcolor (NORMAL_COLOR);
         tty_print_string (panel_filename_scroll_left_char);
 
@@ -971,7 +971,7 @@ repaint_file (WPanel * panel, int file_i
             if (nth_column + 1 >= panel->list_cols)
                 offset++;
 
-            widget_move (w, ypos, offset);
+            widget_gotoyx (w, ypos, offset);
             tty_setcolor (NORMAL_COLOR);
             tty_print_string (panel_filename_scroll_right_char);
         }
@@ -988,7 +988,7 @@ display_mini_info (WPanel * panel)
     if (!panels_options.show_mini_info)
         return;
 
-    widget_move (w, panel_lines (panel) + 3, 1);
+    widget_gotoyx (w, panel_lines (panel) + 3, 1);
 
     if (panel->searching)
     {
@@ -1098,7 +1098,7 @@ display_total_marked_size (const WPanel
      * y == panel_lines (panel) + 2  for mini_info_separator
      * y == w->lines - 1             for panel bottom frame
      */
-    widget_move (w, y, x);
+    widget_gotoyx (w, y, x);
     tty_setcolor (MARKED_COLOR);
     tty_printf (" %s ", buf);
 }
@@ -1163,7 +1163,7 @@ show_free_space (const WPanel * panel)
         g_snprintf (tmp, sizeof (tmp), " %s/%s (%d%%) ", buffer1, buffer2,
                     myfs_stats.total == 0 ? 0 :
                     (int) (100 * (long double) myfs_stats.avail / myfs_stats.total));
-        widget_move (w, w->lines - 1, w->cols - 2 - (int) strlen (tmp));
+        widget_gotoyx (w, w->lines - 1, w->cols - 2 - (int) strlen (tmp));
         tty_setcolor (NORMAL_COLOR);
         tty_print_string (tmp);
     }
@@ -1267,25 +1267,25 @@ show_dir (const WPanel * panel)
 
         y = panel_lines (panel) + 2;
 
-        widget_move (w, y, 0);
+        widget_gotoyx (w, y, 0);
         tty_print_alt_char (ACS_LTEE, FALSE);
-        widget_move (w, y, w->cols - 1);
+        widget_gotoyx (w, y, w->cols - 1);
         tty_print_alt_char (ACS_RTEE, FALSE);
     }
 
-    widget_move (w, 0, 1);
+    widget_gotoyx (w, 0, 1);
     tty_print_string (panel_history_prev_item_sign);
 
     tmp = panels_options.show_dot_files ? panel_hiddenfiles_sign_show : panel_hiddenfiles_sign_hide;
     tmp = g_strdup_printf ("%s[%s]%s", tmp, panel_history_show_list_sign,
                            panel_history_next_item_sign);
 
-    widget_move (w, 0, w->cols - 6);
+    widget_gotoyx (w, 0, w->cols - 6);
     tty_print_string (tmp);
 
     g_free (tmp);
 
-    widget_move (w, 0, 3);
+    widget_gotoyx (w, 0, 3);
 
     if (panel->is_panelized)
         tty_printf (" %s ", _("Panelize"));
@@ -1296,7 +1296,7 @@ show_dir (const WPanel * panel)
         if (tmp != NULL)
         {
             tty_printf ("%s", tmp);
-            widget_move (w, 0, 3 + strlen (tmp));
+            widget_gotoyx (w, 0, 3 + strlen (tmp));
             g_free (tmp);
         }
     }
@@ -1322,7 +1322,7 @@ show_dir (const WPanel * panel)
                             size_trunc_sep (panel->dir.list[panel->selected].st.st_size,
                                             panels_options.kilobyte_si));
                 tty_setcolor (NORMAL_COLOR);
-                widget_move (w, w->lines - 1, 4);
+                widget_gotoyx (w, w->lines - 1, 4);
                 tty_print_string (buffer);
             }
         }
@@ -1433,9 +1433,9 @@ panel_load_history (const gchar * event_
     if (ev->receiver == NULL || ev->receiver == WIDGET (p))
     {
         if (ev->cfg != NULL)
-            p->dir_history = history_load (ev->cfg, p->hist_name);
+            p->dir_history = mc_config_history_load (ev->cfg, p->hist_name);
         else
-            p->dir_history = history_get (p->hist_name);
+            p->dir_history = mc_config_history_get (p->hist_name);
 
         directory_history_add (p, p->cwd_vpath);
     }
@@ -1459,7 +1459,7 @@ panel_save_history (const gchar * event_
     {
         ev_history_load_save_t *ev = (ev_history_load_save_t *) data;
 
-        history_save (ev->cfg, p->hist_name, p->dir_history);
+        mc_config_history_save (ev->cfg, p->hist_name, p->dir_history);
     }
 
     return TRUE;
@@ -1518,7 +1518,7 @@ panel_paint_sort_info (const WPanel * pa
         char *str;
 
         str = g_strdup_printf ("%s%s", sort_sign, Q_ (panel->sort_field->hotkey));
-        widget_move (panel, 1, 1);
+        widget_gotoyx (panel, 1, 1);
         tty_print_string (str);
         g_free (str);
     }
@@ -1558,7 +1558,7 @@ panel_print_header (const WPanel * panel
     int i;
     GString *format_txt;
 
-    widget_move (w, 1, 1);
+    widget_gotoyx (w, 1, 1);
     tty_getyx (&y, &x);
     tty_setcolor (NORMAL_COLOR);
     tty_draw_hline (y, x, ' ', w->cols - 2);
@@ -2711,7 +2711,7 @@ do_search (WPanel * panel, int c_code)
         unselect_item (panel);
         panel->selected = sel;
         select_item (panel);
-        widget_redraw (WIDGET (panel));
+        widget_draw (WIDGET (panel));
     }
     else if (c_code != KEY_BACKSPACE)
     {
@@ -3277,8 +3277,10 @@ _do_panel_cd (WPanel * panel, const vfs_
     /* Reload current panel */
     panel_clean_dir (panel);
 
-    dir_list_load (&panel->dir, panel->cwd_vpath, panel->sort_field->sort_routine,
-                   &panel->sort_info, panel->filter);
+    if (!dir_list_load (&panel->dir, panel->cwd_vpath, panel->sort_field->sort_routine,
+                        &panel->sort_info, panel->filter))
+        message (D_ERROR, MSG_ERROR, _("Cannot read directory contents"));
+
     try_to_select (panel, get_parent_dir_name (panel->cwd_vpath, olddir_vpath));
 
     load_hint (FALSE);
@@ -3349,25 +3351,29 @@ directory_history_prev (WPanel * panel)
 static void
 directory_history_list (WPanel * panel)
 {
-    char *s;
+    history_descriptor_t hd;
     gboolean ok = FALSE;
     size_t pos;
 
     pos = g_list_position (panel->dir_history_current, panel->dir_history);
 
-    s = history_show (&panel->dir_history, WIDGET (panel), pos);
-    if (s != NULL)
+    history_descriptor_init (&hd, WIDGET (panel)->y, WIDGET (panel)->x, panel->dir_history,
+                             (int) pos);
+    history_show (&hd);
+
+    panel->dir_history = hd.list;
+    if (hd.text != NULL)
     {
         vfs_path_t *s_vpath;
 
-        s_vpath = vfs_path_from_str (s);
+        s_vpath = vfs_path_from_str (hd.text);
         ok = _do_panel_cd (panel, s_vpath, cd_exact);
         if (ok)
             directory_history_add (panel, panel->cwd_vpath);
         else
             message (D_ERROR, MSG_ERROR, _("Cannot change directory"));
         vfs_path_free (s_vpath);
-        g_free (s);
+        g_free (hd.text);
     }
 
     if (!ok)
@@ -3668,7 +3674,7 @@ panel_callback (Widget * w, Widget * sen
 
         bb = find_buttonbar (w->owner);
         midnight_set_buttonbar (bb);
-        widget_redraw (WIDGET (bb));
+        widget_draw (WIDGET (bb));
         return MSG_HANDLED;
 
     case MSG_UNFOCUS:
@@ -3892,7 +3898,7 @@ panel_mouse_callback (Widget * w, mouse_
         break;
 
     case MSG_MOUSE_CLICK:
-        if ((event->count & GPM_DOUBLE) != 0)
+        if ((event->count & GPM_DOUBLE) != 0 && (event->buttons & GPM_B_LEFT) != 0)
         {
             int y, lines;
 
@@ -3933,7 +3939,7 @@ panel_mouse_callback (Widget * w, mouse_
     }
 
     if (panel->dirty)
-        widget_redraw (w);
+        widget_draw (w);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -4174,6 +4180,36 @@ panel_recursive_cd_to_parent (const vfs_
 }
 
 /* --------------------------------------------------------------------------------------------- */
+
+static void
+panel_dir_list_callback (dir_list_cb_state_t state, void *data)
+{
+    static int count = 0;
+
+    (void) data;
+
+    switch (state)
+    {
+    case DIR_OPEN:
+        count = 0;
+        break;
+
+    case DIR_READ:
+        count++;
+        if ((count & 15) == 0)
+            rotate_dash (TRUE);
+        break;
+
+    case DIR_CLOSE:
+        rotate_dash (FALSE);
+        break;
+
+    default:
+        g_assert_not_reached ();
+    }
+}
+
+/* --------------------------------------------------------------------------------------------- */
 /*** public functions ****************************************************************************/
 /* --------------------------------------------------------------------------------------------- */
 
@@ -4264,6 +4300,7 @@ panel_sized_empty_new (const char *panel
     panel->dir.size = DIR_LIST_MIN_SIZE;
     panel->dir.list = g_new (file_entry_t, panel->dir.size);
     panel->dir.len = 0;
+    panel->dir.callback = panel_dir_list_callback;
 
     panel->list_cols = 1;
     panel->brief_cols = 2;
@@ -4360,8 +4397,9 @@ panel_sized_with_dir_new (const char *pa
     }
 
     /* Load the default format */
-    dir_list_load (&panel->dir, panel->cwd_vpath, panel->sort_field->sort_routine,
-                   &panel->sort_info, panel->filter);
+    if (!dir_list_load (&panel->dir, panel->cwd_vpath, panel->sort_field->sort_routine,
+                        &panel->sort_info, panel->filter))
+        message (D_ERROR, MSG_ERROR, _("Cannot read directory contents"));
 
     /* Restore old right path */
     if (curdir != NULL)
@@ -4407,8 +4445,9 @@ panel_reload (WPanel * panel)
     memset (&(panel->dir_stat), 0, sizeof (panel->dir_stat));
     show_dir (panel);
 
-    dir_list_reload (&panel->dir, panel->cwd_vpath, panel->sort_field->sort_routine,
-                     &panel->sort_info, panel->filter);
+    if (!dir_list_reload (&panel->dir, panel->cwd_vpath, panel->sort_field->sort_routine,
+                          &panel->sort_info, panel->filter))
+        message (D_ERROR, MSG_ERROR, _("Cannot read directory contents"));
 
     panel->dirty = 1;
     if (panel->selected >= panel->dir.len)
diff -urpN mc-4.8.23/src/filemanager/panelize.c mc-4.8.24/src/filemanager/panelize.c
--- mc-4.8.23/src/filemanager/panelize.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/panelize.c	2020-01-01 19:52:34.000000000 +0400
@@ -321,7 +321,7 @@ do_external_panelize (char *command)
         char line[MC_MAXPATHLEN];
         size_t len;
         char *name;
-        int link_to_dir, stale_link;
+        gboolean link_to_dir, stale_link;
         struct stat st;
 
         clearerr (external);
@@ -345,7 +345,7 @@ do_external_panelize (char *command)
         if (!handle_path (name, &st, &link_to_dir, &stale_link))
             continue;
 
-        if (!dir_list_append (list, name, &st, link_to_dir != 0, stale_link != 0))
+        if (!dir_list_append (list, name, &st, link_to_dir, stale_link))
             break;
 
         file_mark (current_panel, list->len - 1, 0);
diff -urpN mc-4.8.23/src/filemanager/tree.c mc-4.8.24/src/filemanager/tree.c
--- mc-4.8.23/src/filemanager/tree.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/filemanager/tree.c	2020-01-01 19:52:34.000000000 +0400
@@ -241,7 +241,7 @@ tree_show_mini_info (WTree * tree, int t
         /* Show search string */
         tty_setcolor (INPUT_COLOR);
         tty_draw_hline (w->y + line, w->x + 1, ' ', tree_cols);
-        widget_move (w, line, 1);
+        widget_gotoyx (w, line, 1);
         tty_print_char (PATH_SEP);
         tty_print_string (str_fit_to_term (tree->search_buffer, tree_cols - 2, J_LEFT_FIT));
         tty_print_char (' ');
@@ -253,7 +253,7 @@ tree_show_mini_info (WTree * tree, int t
 
         tty_setcolor (tree->is_panel ? NORMAL_COLOR : TREE_NORMALC (h));
         tty_draw_hline (w->y + line, w->x + 1, ' ', tree_cols);
-        widget_move (w, line, 1);
+        widget_gotoyx (w, line, 1);
         tty_print_string (str_fit_to_term
                           (vfs_path_as_str (tree->selected_ptr->name), tree_cols, J_LEFT_FIT));
     }
@@ -276,7 +276,7 @@ show_tree (WTree * tree)
     tree_lines = tlines (tree);
     tree_cols = w->cols;
 
-    widget_move (w, y, x);
+    widget_gotoyx (w, y, x);
     if (tree->is_panel)
     {
         tree_cols -= 2;
@@ -585,7 +585,7 @@ tree_chdir_sel (WTree * tree)
             message (D_ERROR, MSG_ERROR, _("Cannot chdir to \"%s\"\n%s"),
                      vfs_path_as_str (tree->selected_ptr->name), unix_error_string (errno));
 
-        widget_redraw (WIDGET (current_panel));
+        widget_draw (WIDGET (current_panel));
         change_panel ();
         show_tree (tree);
     }
@@ -979,7 +979,7 @@ tree_toggle_navig (WTree * tree)
     buttonbar_set_label (b, 4,
                          tree_navigation_flag ? Q_ ("ButtonBar|Static") : Q_ ("ButtonBar|Dynamc"),
                          tree_map, WIDGET (tree));
-    widget_redraw (WIDGET (b));
+    widget_draw (WIDGET (b));
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1124,7 +1124,7 @@ tree_frame (WDialog * h, WTree * tree)
 
         tty_draw_box (w->y, w->x, w->lines, w->cols, FALSE);
 
-        widget_move (w, 0, (w->cols - len - 2) / 2);
+        widget_gotoyx (w, 0, (w->cols - len - 2) / 2);
         tty_printf (" %s ", title);
 
         if (panels_options.show_mini_info)
@@ -1132,9 +1132,9 @@ tree_frame (WDialog * h, WTree * tree)
             int y;
 
             y = w->lines - 3;
-            widget_move (w, y, 0);
+            widget_gotoyx (w, y, 0);
             tty_print_alt_char (ACS_LTEE, FALSE);
-            widget_move (w, y, w->cols - 1);
+            widget_gotoyx (w, y, w->cols - 1);
             tty_print_alt_char (ACS_RTEE, FALSE);
             tty_draw_hline (w->y + y, w->x + 1, ACS_HLINE, w->cols - 2);
         }
@@ -1158,7 +1158,7 @@ tree_callback (Widget * w, Widget * send
         if (widget_get_state (w, WST_FOCUSED))
         {
             b = find_buttonbar (h);
-            widget_redraw (WIDGET (b));
+            widget_draw (WIDGET (b));
         }
         return MSG_HANDLED;
 
diff -urpN mc-4.8.23/src/help.c mc-4.8.24/src/help.c
--- mc-4.8.23/src/help.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/help.c	2020-01-01 19:52:34.000000000 +0400
@@ -393,8 +393,7 @@ end_link_area (int x, int y)
 static void
 clear_link_areas (void)
 {
-    g_slist_free_full (link_area, g_free);
-    link_area = NULL;
+    g_clear_slist (&link_area, g_free);
     inside_link_area = FALSE;
 }
 
@@ -420,7 +419,7 @@ help_print_word (WDialog * h, GString *
             g_string_set_size (word, 0);
         else
         {
-            widget_move (h, *line + 2, *col + 2);
+            widget_gotoyx (h, *line + 2, *col + 2);
             tty_print_string (word->str);
             g_string_set_size (word, 0);
             *col += w;
@@ -512,7 +511,7 @@ help_show (WDialog * h, const char *pain
                 acs = FALSE;
                 break;
             case CHAR_VERSION:
-                widget_move (h, line + 2, col + 2);
+                widget_gotoyx (h, line + 2, col + 2);
                 tty_print_string (VERSION);
                 col += str_term_width1 (VERSION);
                 break;
@@ -557,7 +556,7 @@ help_show (WDialog * h, const char *pain
                         g_string_append (word, buff);
                     else if (col < HELP_WINDOW_WIDTH)
                     {
-                        widget_move (h, line + 2, col + 2);
+                        widget_gotoyx (h, line + 2, col + 2);
 
                         if ((c == ' ') || (c == '.'))
                             tty_print_char (c);
@@ -598,7 +597,7 @@ help_show (WDialog * h, const char *pain
 
     /* Position the cursor over a nice link */
     if (active_col)
-        widget_move (h, active_line, active_col);
+        widget_gotoyx (h, active_line, active_col);
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/src/keybind-defaults.c mc-4.8.24/src/keybind-defaults.c
--- mc-4.8.23/src/keybind-defaults.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/keybind-defaults.c	2020-01-01 19:52:34.000000000 +0400
@@ -28,7 +28,7 @@
 #include <config.h>
 
 #include "lib/global.h"
-#include "lib/widget.h"         /* dialog_map, input_map, listbox_map */
+#include "lib/widget.h"         /* dialog_map, input_map, listbox_map, menu_map */
 
 #include "keybind-defaults.h"
 
@@ -56,7 +56,6 @@ GArray *diff_keymap = NULL;
 const global_keymap_t *main_map = NULL;
 const global_keymap_t *main_x_map = NULL;
 const global_keymap_t *panel_map = NULL;
-const global_keymap_t *menu_map = NULL;
 const global_keymap_t *tree_map = NULL;
 const global_keymap_t *help_map = NULL;
 
@@ -99,6 +98,7 @@ static const global_keymap_ini_t default
     {"MenuLastSelected", "f19"},
     {"QuitQuiet", "f20"},
     {"History", "alt-h"},
+    {"EditorViewerHistory", "alt-shift-e"},
     {"DirSize", "ctrl-space"},
     /* Copy useful information to the command line */
     {"PutCurrentPath", "alt-a"},
@@ -233,7 +233,7 @@ static const global_keymap_ini_t default
     {"Left", "left; ctrl-b"},
     {"Right", "right; ctrl-f"},
     {"Up", "up; ctrl-p"},
-    {"Down", "down; enter; ctrl-n"},
+    {"Down", "down; ctrl-n"},
     {"Home", "home; alt-lt; ctrl-a"},
     {"End", "end; alt-gt; ctrl-e"},
     {"Enter", "enter"},
@@ -286,6 +286,9 @@ static const global_keymap_ini_t default
     {"PageDown", "pgdn; ctrl-v"},
     {"Delete", "delete; d"},
     {"Clear", "shift-delete; shift-d"},
+    {"View", "f3"},
+    {"Edit", "f4"},
+    {"Enter", "enter"},
     {NULL, NULL}
 };
 
@@ -486,6 +489,7 @@ static const global_keymap_ini_t default
     {"SearchForwardContinue", "ctrl-s"},
     {"SearchBackwardContinue", "ctrl-r"},
     {"SearchOppositeContinue", "shift-n"},
+    {"History", "alt-shift-e"},
     {NULL, NULL}
 };
 
@@ -521,6 +525,7 @@ static const global_keymap_ini_t default
     {"SearchForwardContinue", "ctrl-s"},
     {"SearchBackwardContinue", "ctrl-r"},
     {"SearchOppositeContinue", "shift-n"},
+    {"History", "alt-shift-e"},
     {NULL, NULL}
 };
 
diff -urpN mc-4.8.23/src/keybind-defaults.h mc-4.8.24/src/keybind-defaults.h
--- mc-4.8.23/src/keybind-defaults.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/keybind-defaults.h	2020-01-01 19:52:34.000000000 +0400
@@ -35,7 +35,6 @@ extern GArray *diff_keymap;
 extern const global_keymap_t *main_map;
 extern const global_keymap_t *main_x_map;
 extern const global_keymap_t *panel_map;
-extern const global_keymap_t *menu_map;
 extern const global_keymap_t *tree_map;
 extern const global_keymap_t *help_map;
 
diff -urpN mc-4.8.23/src/main.c mc-4.8.24/src/main.c
--- mc-4.8.23/src/main.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/main.c	2020-01-01 19:52:34.000000000 +0400
@@ -57,7 +57,7 @@
 
 #include "filemanager/midnight.h"       /* current_panel */
 #include "filemanager/treestore.h"      /* tree_store_save */
-#include "filemanager/layout.h" /* command_prompt */
+#include "filemanager/layout.h"
 #include "filemanager/ext.h"    /* flush_extension_file() */
 #include "filemanager/command.h"        /* cmdline */
 #include "filemanager/panel.h"  /* panalized_panel */
@@ -331,10 +331,6 @@ main (int argc, char *argv[])
     handle_console (CONSOLE_INIT);
 
 #ifdef ENABLE_SUBSHELL
-    /* Don't use subshell when invoked as viewer or editor */
-    if (mc_global.mc_run_mode != MC_RUN_FULL)
-        mc_global.tty.use_subshell = FALSE;
-
     if (mc_global.tty.use_subshell)
         subshell_get_console_attributes ();
 #endif /* ENABLE_SUBSHELL */
diff -urpN mc-4.8.23/src/man2hlp/Makefile.in mc-4.8.24/src/man2hlp/Makefile.in
--- mc-4.8.23/src/man2hlp/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/man2hlp/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/man2hlp
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -179,7 +169,6 @@ am__tagged_files = $(HEADERS) $(SOURCES)
 am__DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/man2hlp.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -187,18 +176,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -238,10 +224,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -249,13 +232,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -263,12 +240,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -276,24 +248,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -327,7 +291,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -339,12 +302,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/setup.c mc-4.8.24/src/setup.c
--- mc-4.8.23/src/setup.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/setup.c	2020-01-01 19:52:34.000000000 +0400
@@ -36,7 +36,7 @@
 
 #include "lib/tty/tty.h"
 #include "lib/tty/key.h"
-#include "lib/mcconfig.h"
+#include "lib/mcconfig.h"       /* num_history_items_recorded */
 #include "lib/fileloc.h"
 #include "lib/timefmt.h"
 #include "lib/util.h"
@@ -258,19 +258,27 @@ static const struct
 {
     const char *opt_name;
     int *opt_addr;
-} layout [] = {
+} layout_int_options [] = {
+    { "output_lines", &output_lines },
+    { "left_panel_size", &panels_layout.left_panel_size },
+    { "top_panel_size", &panels_layout.top_panel_size },
+    { NULL, NULL }
+};
+
+static const struct
+{
+    const char *opt_name;
+    gboolean *opt_addr;
+} layout_bool_options [] = {
     { "message_visible", &mc_global.message_visible },
     { "keybar_visible", &mc_global.keybar_visible },
     { "xterm_title", &xterm_title },
-    { "output_lines", &output_lines },
     { "command_prompt", &command_prompt },
     { "menubar_visible", &menubar_visible },
     { "free_space", &free_space },
     { "horizontal_split", &panels_layout.horizontal_split },
     { "vertical_equal", &panels_layout.vertical_equal },
-    { "left_panel_size", &panels_layout.left_panel_size },
     { "horizontal_equal", &panels_layout.horizontal_equal },
-    { "top_panel_size", &panels_layout.top_panel_size },
     { NULL, NULL }
 };
 
@@ -670,34 +678,17 @@ static void
 load_layout (void)
 {
     size_t i;
-    int equal_split;
-    int first_panel_size;
-
-    /* legacy options */
-    panels_layout.horizontal_split = mc_config_get_int (mc_global.main_config, CONFIG_APP_SECTION,
-                                                        "horizontal_split", 0);
-    equal_split = mc_config_get_int (mc_global.main_config, "Layout", "equal_split", 1);
-    first_panel_size = mc_config_get_int (mc_global.main_config, "Layout", "first_panel_size", 1);
-    if (panels_layout.horizontal_split)
-    {
-        panels_layout.horizontal_equal = equal_split;
-        panels_layout.left_panel_size = first_panel_size;
-    }
-    else
-    {
-        panels_layout.vertical_equal = equal_split;
-        panels_layout.top_panel_size = first_panel_size;
-    }
 
     /* actual options override legacy ones */
-    for (i = 0; layout[i].opt_name != NULL; i++)
-        *layout[i].opt_addr = mc_config_get_int (mc_global.main_config, CONFIG_LAYOUT_SECTION,
-                                                 layout[i].opt_name, *layout[i].opt_addr);
-
-    /* remove legacy options */
-    mc_config_del_key (mc_global.main_config, CONFIG_APP_SECTION, "horizontal_split");
-    mc_config_del_key (mc_global.main_config, "Layout", "equal_split");
-    mc_config_del_key (mc_global.main_config, "Layout", "first_panel_size");
+    for (i = 0; layout_int_options[i].opt_name != NULL; i++)
+        *layout_int_options[i].opt_addr =
+            mc_config_get_int (mc_global.main_config, CONFIG_LAYOUT_SECTION,
+                               layout_int_options[i].opt_name, *layout_int_options[i].opt_addr);
+
+    for (i = 0; layout_bool_options[i].opt_name != NULL; i++)
+        *layout_bool_options[i].opt_addr =
+            mc_config_get_bool (mc_global.main_config, CONFIG_LAYOUT_SECTION,
+                                layout_bool_options[i].opt_name, *layout_bool_options[i].opt_addr);
 
     startup_left_mode = setup__load_panel_state ("New Left Panel");
     startup_right_mode = setup__load_panel_state ("New Right Panel");
@@ -981,9 +972,14 @@ save_layout (void)
     size_t i;
 
     /* Save integer options */
-    for (i = 0; layout[i].opt_name != NULL; i++)
-        mc_config_set_int (mc_global.main_config, CONFIG_LAYOUT_SECTION, layout[i].opt_name,
-                           *layout[i].opt_addr);
+    for (i = 0; layout_int_options[i].opt_name != NULL; i++)
+        mc_config_set_int (mc_global.main_config, CONFIG_LAYOUT_SECTION,
+                           layout_int_options[i].opt_name, *layout_int_options[i].opt_addr);
+
+    /* Save boolean options */
+    for (i = 0; layout_bool_options[i].opt_name != NULL; i++)
+        mc_config_set_bool (mc_global.main_config, CONFIG_LAYOUT_SECTION,
+                            layout_bool_options[i].opt_name, *layout_bool_options[i].opt_addr);
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/src/subshell/Makefile.in mc-4.8.24/src/subshell/Makefile.in
--- mc-4.8.23/src/subshell/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/subshell/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/subshell
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -227,7 +217,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -235,18 +224,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -286,10 +272,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -297,13 +280,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -311,12 +288,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -324,24 +296,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -375,7 +339,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -387,12 +350,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/subshell/common.c mc-4.8.24/src/subshell/common.c
--- mc-4.8.23/src/subshell/common.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/subshell/common.c	2020-01-01 19:52:34.000000000 +0400
@@ -63,6 +63,12 @@
 #include <errno.h>
 #include <string.h>
 #include <signal.h>
+#ifdef HAVE_SYS_SELECT_H
+#include <sys/select.h>
+#else
+#include <sys/time.h>
+#include <unistd.h>
+#endif
 #include <sys/types.h>
 #include <sys/wait.h>
 #ifdef HAVE_SYS_IOCTL_H
@@ -207,7 +213,7 @@ write_all (int fd, const void *buf, size
         {
             if (errno == EINTR)
             {
-                if (mc_global.tty.winch_flag != 0)
+                if (tty_got_winch ())
                     tty_change_screen_size ();
 
                 continue;
@@ -545,7 +551,7 @@ feed_subshell (int how, gboolean fail_on
             /* Despite using SA_RESTART, we still have to check for this */
             if (errno == EINTR)
             {
-                if (mc_global.tty.winch_flag != 0)
+                if (tty_got_winch ())
                     tty_change_screen_size ();
 
                 continue;       /* try all over again */
@@ -1137,16 +1143,16 @@ invoke_subshell (const char *command, in
 
     /* Make the subshell change to MC's working directory */
     if (new_dir_vpath != NULL)
-        do_subshell_chdir (subshell_get_cwd_from_current_panel (), TRUE);
+        do_subshell_chdir (subshell_get_cwd (), TRUE);
 
     if (command == NULL)        /* The user has done "C-o" from MC */
     {
         if (subshell_state == INACTIVE)
         {
             subshell_state = ACTIVE;
-            /* FIXME: possibly take out this hack; the user can
-               re-play it by hitting C-hyphen a few times! */
-            if (subshell_ready)
+
+            /* FIXME: possibly take out this hack; the user can re-play it by hitting C-hyphen a few times! */
+            if (subshell_ready && mc_global.mc_run_mode == MC_RUN_FULL)
                 write_all (mc_global.tty.subshell_pty, " \b", 2);       /* Hack to make prompt reappear */
         }
     }
@@ -1167,7 +1173,7 @@ invoke_subshell (const char *command, in
     {
         const char *pcwd;
 
-        pcwd = vfs_translate_path (vfs_path_as_str (subshell_get_cwd_from_current_panel ()));
+        pcwd = vfs_translate_path (vfs_path_as_str (subshell_get_cwd ()));
         if (strcmp (subshell_cwd, pcwd) != 0)
             *new_dir_vpath = vfs_path_from_str (subshell_cwd);  /* Make MC change to the subshell's CWD */
     }
@@ -1211,7 +1217,7 @@ read_subshell_prompt (void)
         {
             if (errno == EINTR)
             {
-                if (mc_global.tty.winch_flag != 0)
+                if (tty_got_winch ())
                     tty_change_screen_size ();
 
                 continue;
@@ -1293,7 +1299,7 @@ do_subshell_chdir (const vfs_path_t * vp
 {
     char *pcwd;
 
-    pcwd = vfs_path_to_str_flags (subshell_get_cwd_from_current_panel (), 0, VPF_RECODE);
+    pcwd = vfs_path_to_str_flags (subshell_get_cwd (), 0, VPF_RECODE);
 
     if (!(subshell_state == INACTIVE && strcmp (subshell_cwd, pcwd) != 0))
     {
@@ -1364,9 +1370,7 @@ do_subshell_chdir (const vfs_path_t * vp
         {
             char *cwd;
 
-            cwd =
-                vfs_path_to_str_flags (subshell_get_cwd_from_current_panel (), 0,
-                                       VPF_STRIP_PASSWORD);
+            cwd = vfs_path_to_str_flags (subshell_get_cwd (), 0, VPF_STRIP_PASSWORD);
             vfs_print_message (_("Warning: Cannot change to %s.\n"), cwd);
             g_free (cwd);
         }
diff -urpN mc-4.8.23/src/subshell/internal.h mc-4.8.24/src/subshell/internal.h
--- mc-4.8.23/src/subshell/internal.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/subshell/internal.h	2020-01-01 19:52:34.000000000 +0400
@@ -17,7 +17,7 @@
 
 /*** declarations of public functions ************************************************************/
 
-const vfs_path_t *subshell_get_cwd_from_current_panel (void);
+const vfs_path_t *subshell_get_cwd (void);
 void subshell_handle_cons_saver (void);
 
 int subshell_get_mainloop_quit (void);
diff -urpN mc-4.8.23/src/subshell/proxyfunc.c mc-4.8.24/src/subshell/proxyfunc.c
--- mc-4.8.23/src/subshell/proxyfunc.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/subshell/proxyfunc.c	2020-01-01 19:52:34.000000000 +0400
@@ -24,10 +24,14 @@
  */
 
 #include <config.h>
-#include <sys/wait.h>
+
+#include <signal.h>             /* kill() */
+#include <sys/types.h>
+#include <sys/wait.h>           /* waitpid() */
 
 #include "lib/global.h"
-#include "lib/widget.h"
+
+#include "lib/vfs/vfs.h"        /* vfs_get_raw_current_dir() */
 
 #include "src/setup.h"          /* quit */
 #include "src/filemanager/midnight.h"   /* current_panel */
@@ -54,9 +58,12 @@
 /* --------------------------------------------------------------------------------------------- */
 
 const vfs_path_t *
-subshell_get_cwd_from_current_panel (void)
+subshell_get_cwd (void)
 {
-    return current_panel->cwd_vpath;
+    if (mc_global.mc_run_mode == MC_RUN_FULL)
+        return current_panel->cwd_vpath;
+
+    return vfs_get_raw_current_dir ();
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -69,7 +76,6 @@ subshell_handle_cons_saver (void)
     pid_t pid;
 
     pid = waitpid (cons_saver_pid, &status, WUNTRACED | WNOHANG);
-    waitpid (cons_saver_pid, &status, WUNTRACED | WNOHANG);
 
     if (pid == cons_saver_pid)
     {
diff -urpN mc-4.8.23/src/textconf.c mc-4.8.24/src/textconf.c
--- mc-4.8.23/src/textconf.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/textconf.c	2020-01-01 19:52:34.000000000 +0400
@@ -232,10 +232,12 @@ show_datadirs_extended (void)
 
 /* --------------------------------------------------------------------------------------------- */
 
+#ifdef ENABLE_CONFIGURE_ARGS
 void
 show_configure_options (void)
 {
     (void) printf ("%s\n", MC_CONFIGURE_ARGS);
 }
+#endif
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/src/vfs/Makefile.in mc-4.8.24/src/vfs/Makefile.in
--- mc-4.8.23/src/vfs/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -108,24 +108,14 @@ host_triplet = @host@
 @ENABLE_VFS_UNDELFS_TRUE@am__append_18 = undelfs/libvfs-undelfs.la
 subdir = src/vfs
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -291,7 +281,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -299,18 +288,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -350,10 +336,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -361,13 +344,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -375,12 +352,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -388,24 +360,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -439,7 +403,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -451,12 +414,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/cpio/Makefile.in mc-4.8.24/src/vfs/cpio/Makefile.in
--- mc-4.8.23/src/vfs/cpio/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/cpio/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/cpio
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -227,7 +217,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -235,18 +224,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -286,10 +272,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -297,13 +280,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -311,12 +288,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -324,24 +296,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -375,7 +339,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -387,12 +350,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/cpio/cpio.c mc-4.8.24/src/vfs/cpio/cpio.c
--- mc-4.8.23/src/vfs/cpio/cpio.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/cpio/cpio.c	2020-01-01 19:52:34.000000000 +0400
@@ -217,8 +217,8 @@ cpio_free_archive (struct vfs_class *me,
         mc_close (arch->fd);
         arch->fd = -1;
     }
-    g_slist_free_full (arch->deferred, g_free);
-    arch->deferred = NULL;
+
+    g_clear_slist (&arch->deferred, g_free);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -890,7 +890,7 @@ void
 vfs_init_cpiofs (void)
 {
     /* FIXME: cpiofs used own temp files */
-    vfs_init_subclass (&cpio_subclass, "cpiofs", VFS_READONLY, "ucpio");
+    vfs_init_subclass (&cpio_subclass, "cpiofs", VFSF_READONLY, "ucpio");
     vfs_cpiofs_ops->read = cpio_read;
     vfs_cpiofs_ops->setctl = NULL;
     cpio_subclass.archive_check = cpio_super_check;
diff -urpN mc-4.8.23/src/vfs/extfs/Makefile.in mc-4.8.24/src/vfs/extfs/Makefile.in
--- mc-4.8.23/src/vfs/extfs/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/extfs/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/extfs
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -268,7 +258,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -276,18 +265,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -327,10 +313,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -338,13 +321,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -352,12 +329,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -365,24 +337,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -416,7 +380,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -428,12 +391,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/extfs/extfs.c mc-4.8.24/src/vfs/extfs/extfs.c
--- mc-4.8.23/src/vfs/extfs/extfs.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/extfs/extfs.c	2020-01-01 19:52:34.000000000 +0400
@@ -190,31 +190,6 @@ extfs_cmp_archive (const void *a, const
 
 /* --------------------------------------------------------------------------------------------- */
 
-static void
-extfs_make_dots (struct vfs_class *me, struct vfs_s_entry *ent)
-{
-    struct vfs_s_entry *entry;
-    struct vfs_s_inode *parent, *inode;
-
-    parent = ent->dir;
-    inode = ent->ino;
-
-    /* Create "." */
-    entry = extfs_entry_new (me, ".", inode);
-    inode->localname = NULL;
-    vfs_s_insert_entry (me, inode, entry);
-
-    /* Create ".." */
-    if (parent != NULL)
-        vfs_s_insert_entry (me, parent, extfs_entry_new (me, "..", parent));
-    else
-        vfs_s_insert_entry (me, inode, extfs_entry_new (me, "..", inode));
-
-    inode->ent = ent;
-}
-
-/* --------------------------------------------------------------------------------------------- */
-
 static struct vfs_s_entry *
 extfs_generate_entry (struct extfs_super_t *archive, const char *name, struct vfs_s_inode *parent,
                       mode_t mode)
@@ -244,9 +219,6 @@ extfs_generate_entry (struct extfs_super
     if (parent != NULL)
         vfs_s_insert_entry (me, parent, entry);
 
-    if (S_ISDIR (st.st_mode))
-        extfs_make_dots (me, entry);
-
     return entry;
 }
 
@@ -275,6 +247,8 @@ extfs_find_entry_int (struct vfs_s_inode
 
     while ((pent != NULL) && (c != '\0') && (*p != '\0'))
     {
+        GList *pl;
+
         q = strchr (p, PATH_SEP);
         if (q == NULL)
             q = (char *) name_end;
@@ -282,45 +256,37 @@ extfs_find_entry_int (struct vfs_s_inode
         c = *q;
         *q = '\0';
 
-        if (!DIR_IS_DOT (p))
+        pent = extfs_resolve_symlinks_int (pent, list);
+        if (pent == NULL)
         {
-            if (DIR_IS_DOTDOT (p))
-                pent = pent->dir->ent;
-            else
-            {
-                GList *pl;
-
-                pent = extfs_resolve_symlinks_int (pent, list);
-                if (pent == NULL)
-                {
-                    *q = c;
-                    return NULL;
-                }
-                if (!S_ISDIR (pent->ino->st.st_mode))
-                {
-                    *q = c;
-                    notadir = TRUE;
-                    return NULL;
-                }
+            *q = c;
+            return NULL;
+        }
 
-                pdir = pent;
-                pl = g_list_find_custom (pent->ino->subdir, p, vfs_s_entry_compare);
-                pent = pl != NULL ? VFS_ENTRY (pl->data) : NULL;
-                if (pent != NULL && q + 1 > name_end)
-                {
-                    /* Hack: I keep the original semanthic unless q+1 would break in the strchr */
-                    *q = c;
-                    notadir = !S_ISDIR (pent->ino->st.st_mode);
-                    return pent;
-                }
+        if (!S_ISDIR (pent->ino->st.st_mode))
+        {
+            *q = c;
+            notadir = TRUE;
+            return NULL;
+        }
 
-                /* When we load archive, we create automagically non-existent directories */
-                if (pent == NULL && (flags & FL_MKDIR) != 0)
-                    pent = extfs_generate_entry (super, p, pdir->ino, S_IFDIR | 0777);
-                if (pent == NULL && (flags & FL_MKFILE) != 0)
-                    pent = extfs_generate_entry (super, p, pdir->ino, S_IFREG | 0666);
-            }
+        pdir = pent;
+        pl = g_queue_find_custom (pent->ino->subdir, p, vfs_s_entry_compare);
+        pent = pl != NULL ? VFS_ENTRY (pl->data) : NULL;
+        if (pent != NULL && q + 1 > name_end)
+        {
+            /* Hack: I keep the original semanthic unless q+1 would break in the strchr */
+            *q = c;
+            notadir = !S_ISDIR (pent->ino->st.st_mode);
+            return pent;
         }
+
+        /* When we load archive, we create automagically non-existent directories */
+        if (pent == NULL && (flags & FL_MKDIR) != 0)
+            pent = extfs_generate_entry (super, p, pdir->ino, S_IFDIR | 0777);
+        if (pent == NULL && (flags & FL_MKFILE) != 0)
+            pent = extfs_generate_entry (super, p, pdir->ino, S_IFREG | 0666);
+
         /* Next iteration */
         *q = c;
         if (c != '\0')
@@ -362,6 +328,21 @@ extfs_fill_names (struct vfs_class *me,
 
 /* --------------------------------------------------------------------------------------------- */
 
+/* Create this function because VFSF_USETMP flag is not used in extfs */
+static void
+extfs_free_inode (struct vfs_class *me, struct vfs_s_inode *ino)
+{
+    (void) me;
+
+    if (ino->localname != NULL)
+    {
+        unlink (ino->localname);
+        MC_PTR_FREE (ino->localname);
+    }
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 static void
 extfs_free_archive (struct vfs_class *me, struct vfs_s_super *psup)
 {
@@ -517,81 +498,75 @@ extfs_read_archive (FILE * extfsd, struc
                     q = cfn;
                 }
 
-                if (!S_ISDIR (hstat.st_mode) || !(DIR_IS_DOT (p) || DIR_IS_DOTDOT (p)))
+                if (*q != '\0')
                 {
-                    if (*q != '\0')
+                    pent = extfs_find_entry (super->root, q, FL_MKDIR);
+                    if (pent == NULL)
                     {
-                        pent = extfs_find_entry (super->root, q, FL_MKDIR);
-                        if (pent == NULL)
-                        {
-                            ret = -1;
-                            break;
-                        }
+                        ret = -1;
+                        break;
                     }
+                }
 
-                    if (pent != NULL)
-                    {
-                        entry = extfs_entry_new (super->me, p, pent->ino);
-                        entry->dir = pent->ino;
-                        pent->ino->subdir = g_list_append (pent->ino->subdir, entry);
-                    }
-                    else
-                    {
-                        entry = extfs_entry_new (super->me, p, super->root);
-                        entry->dir = super->root;
-                        super->root->subdir = g_list_append (super->root->subdir, entry);
-                    }
+                if (pent != NULL)
+                {
+                    entry = extfs_entry_new (super->me, p, pent->ino);
+                    entry->dir = pent->ino;
+                    g_queue_push_tail (pent->ino->subdir, entry);
+                }
+                else
+                {
+                    entry = extfs_entry_new (super->me, p, super->root);
+                    entry->dir = super->root;
+                    g_queue_push_tail (super->root->subdir, entry);
+                }
 
-                    if (!S_ISLNK (hstat.st_mode) && (current_link_name != NULL))
+                if (!S_ISLNK (hstat.st_mode) && (current_link_name != NULL))
+                {
+                    pent = extfs_find_entry (super->root, current_link_name, FL_NONE);
+                    if (pent == NULL)
                     {
-                        pent = extfs_find_entry (super->root, current_link_name, FL_NONE);
-                        if (pent == NULL)
-                        {
-                            ret = -1;
-                            break;
-                        }
-
-                        pent->ino->st.st_nlink++;
-                        entry->ino = pent->ino;
+                        ret = -1;
+                        break;
                     }
-                    else
-                    {
-                        struct stat st;
 
-                        st.st_ino = super->ino_usage++;
-                        st.st_nlink = 1;
-                        st.st_dev = current_archive->rdev;
-                        st.st_mode = hstat.st_mode;
+                    pent->ino->st.st_nlink++;
+                    entry->ino = pent->ino;
+                }
+                else
+                {
+                    struct stat st;
+
+                    st.st_ino = super->ino_usage++;
+                    st.st_nlink = 1;
+                    st.st_dev = current_archive->rdev;
+                    st.st_mode = hstat.st_mode;
 #ifdef HAVE_STRUCT_STAT_ST_RDEV
-                        st.st_rdev = hstat.st_rdev;
+                    st.st_rdev = hstat.st_rdev;
 #else
-                        st.st_rdev = 0;
+                    st.st_rdev = 0;
 #endif
-                        st.st_uid = hstat.st_uid;
-                        st.st_gid = hstat.st_gid;
-                        st.st_size = hstat.st_size;
-                        st.st_mtime = hstat.st_mtime;
-                        st.st_atime = hstat.st_atime;
-                        st.st_ctime = hstat.st_ctime;
-
-                        if (current_link_name == NULL || !S_ISLNK (hstat.st_mode))
-                        {
-                            if (S_ISLNK (hstat.st_mode))
-                                st.st_mode &= ~S_IFLNK; /* You *DON'T* want to do this always */
-                        }
-
-                        inode = vfs_s_new_inode (super->me, super, &st);
-                        inode->ent = entry;
-                        entry->ino = inode;
-
-                        if (current_link_name != NULL && S_ISLNK (hstat.st_mode))
-                        {
-                            VFS_INODE (inode)->linkname = current_link_name;
-                            current_link_name = NULL;
-                        }
+                    st.st_uid = hstat.st_uid;
+                    st.st_gid = hstat.st_gid;
+                    st.st_size = hstat.st_size;
+                    st.st_mtime = hstat.st_mtime;
+                    st.st_atime = hstat.st_atime;
+                    st.st_ctime = hstat.st_ctime;
+
+                    if (current_link_name == NULL || !S_ISLNK (hstat.st_mode))
+                    {
+                        if (S_ISLNK (hstat.st_mode))
+                            st.st_mode &= ~S_IFLNK;     /* You *DON'T* want to do this always */
+                    }
+
+                    inode = vfs_s_new_inode (super->me, super, &st);
+                    inode->ent = entry;
+                    entry->ino = inode;
 
-                        if (S_ISDIR (hstat.st_mode))
-                            extfs_make_dots (super->me, entry);
+                    if (current_link_name != NULL && S_ISLNK (hstat.st_mode))
+                    {
+                        VFS_INODE (inode)->linkname = current_link_name;
+                        current_link_name = NULL;
                     }
                 }
             }
@@ -1039,7 +1014,7 @@ extfs_opendir (const vfs_path_t * vpath)
         ERRNOR (ENOTDIR, NULL);
 
     info = g_new (GList *, 1);
-    *info = entry->ino->subdir;
+    *info = g_queue_peek_head_link (entry->ino->subdir);
 
     return info;
 }
@@ -1544,7 +1519,8 @@ extfs_done (struct vfs_class *me)
 {
     size_t i;
 
-    (void) me;
+    while (VFS_SUBCLASS (me)->supers != NULL)
+        me->free ((vfsid) VFS_SUBCLASS (me)->supers->data);
 
     if (extfs_plugins == NULL)
         return;
@@ -1583,7 +1559,7 @@ extfs_setctl (const vfs_path_t * vpath,
 void
 vfs_init_extfs (void)
 {
-    vfs_init_subclass (&extfs_subclass, "extfs", VFS_UNKNOWN, NULL);
+    vfs_init_subclass (&extfs_subclass, "extfs", VFSF_UNKNOWN, NULL);
     vfs_extfs_ops->init = extfs_init;
     vfs_extfs_ops->done = extfs_done;
     vfs_extfs_ops->fill_names = extfs_fill_names;
@@ -1611,6 +1587,7 @@ vfs_init_extfs (void)
     vfs_extfs_ops->mkdir = extfs_mkdir;
     vfs_extfs_ops->rmdir = extfs_rmdir;
     vfs_extfs_ops->setctl = extfs_setctl;
+    extfs_subclass.free_inode = extfs_free_inode;
     extfs_subclass.free_archive = extfs_free_archive;
     vfs_register_class (vfs_extfs_ops);
 }
diff -urpN mc-4.8.23/src/vfs/extfs/helpers/Makefile.am mc-4.8.24/src/vfs/extfs/helpers/Makefile.am
--- mc-4.8.23/src/vfs/extfs/helpers/Makefile.am	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/extfs/helpers/Makefile.am	2020-01-01 19:52:34.000000000 +0400
@@ -4,7 +4,7 @@ extfsdir = $(libexecdir)/@PACKAGE@/extfs
 EXTFS_MISC  = README README.extfs
 
 # Scripts hat don't need adaptation to the local system
-EXTFS_CONST = bpp changesetfs gitfs+ patchsetfs rpm trpm u7z
+EXTFS_CONST = bpp changesetfs gitfs+ patchsetfs rpm trpm u7z uc1541
 
 # Scripts that need adaptation to the local system - source files
 EXTFS_IN    = 			\
@@ -27,7 +27,6 @@ EXTFS_IN    = 			\
 	uar.in			\
 	uarc.in			\
 	uarj.in			\
-	uc1541.in		\
 	ucab.in			\
 	uha.in			\
 	ulha.in			\
@@ -57,7 +56,6 @@ EXTFS_OUT = 			\
 	uar			\
 	uarc			\
 	uarj			\
-	uc1541			\
 	ucab			\
 	uha			\
 	ulha			\
diff -urpN mc-4.8.23/src/vfs/extfs/helpers/Makefile.in mc-4.8.24/src/vfs/extfs/helpers/Makefile.in
--- mc-4.8.23/src/vfs/extfs/helpers/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/extfs/helpers/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -91,24 +91,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/extfs/helpers
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -155,8 +145,8 @@ DIST_COMMON = $(srcdir)/Makefile.am $(am
 mkinstalldirs = $(install_sh) -d
 CONFIG_HEADER = $(top_builddir)/config.h
 CONFIG_CLEAN_FILES = a+ apt+ audio deb deba debd dpkg+ iso9660 hp48+ \
-	lslR mailfs patchfs rpms+ s3+ uace ualz uar uarc uarj uc1541 \
-	ucab uha ulha ulib urar uzip uzoo
+	lslR mailfs patchfs rpms+ s3+ uace ualz uar uarc uarj ucab uha \
+	ulha ulib urar uzip uzoo
 CONFIG_CLEAN_VPATH_FILES =
 am__vpath_adj_setup = srcdirstrip=`echo "$(srcdir)" | sed 's|.|.|g'`;
 am__vpath_adj = case $$p in \
@@ -215,12 +205,11 @@ am__DIST_COMMON = $(srcdir)/Makefile.in
 	$(srcdir)/mailfs.in $(srcdir)/patchfs.in $(srcdir)/rpms+.in \
 	$(srcdir)/s3+.in $(srcdir)/uace.in $(srcdir)/ualz.in \
 	$(srcdir)/uar.in $(srcdir)/uarc.in $(srcdir)/uarj.in \
-	$(srcdir)/uc1541.in $(srcdir)/ucab.in $(srcdir)/uha.in \
-	$(srcdir)/ulha.in $(srcdir)/ulib.in $(srcdir)/urar.in \
-	$(srcdir)/uzip.in $(srcdir)/uzoo.in README
+	$(srcdir)/ucab.in $(srcdir)/uha.in $(srcdir)/ulha.in \
+	$(srcdir)/ulib.in $(srcdir)/urar.in $(srcdir)/uzip.in \
+	$(srcdir)/uzoo.in README
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -228,18 +217,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -279,10 +265,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -290,13 +273,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -304,12 +281,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -317,24 +289,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -368,7 +332,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -380,12 +343,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -456,7 +415,7 @@ extfsdir = $(libexecdir)/@PACKAGE@/extfs
 EXTFS_MISC = README README.extfs
 
 # Scripts hat don't need adaptation to the local system
-EXTFS_CONST = bpp changesetfs gitfs+ patchsetfs rpm trpm u7z
+EXTFS_CONST = bpp changesetfs gitfs+ patchsetfs rpm trpm u7z uc1541
 
 # Scripts that need adaptation to the local system - source files
 EXTFS_IN = \
@@ -479,7 +438,6 @@ EXTFS_IN = \
 	uar.in			\
 	uarc.in			\
 	uarj.in			\
-	uc1541.in		\
 	ucab.in			\
 	uha.in			\
 	ulha.in			\
@@ -510,7 +468,6 @@ EXTFS_OUT = \
 	uar			\
 	uarc			\
 	uarj			\
-	uc1541			\
 	ucab			\
 	uha			\
 	ulha			\
@@ -592,8 +549,6 @@ uarc: $(top_builddir)/config.status $(sr
 	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@
 uarj: $(top_builddir)/config.status $(srcdir)/uarj.in
 	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@
-uc1541: $(top_builddir)/config.status $(srcdir)/uc1541.in
-	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@
 ucab: $(top_builddir)/config.status $(srcdir)/ucab.in
 	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@
 uha: $(top_builddir)/config.status $(srcdir)/uha.in
diff -urpN mc-4.8.23/src/vfs/extfs/helpers/README mc-4.8.24/src/vfs/extfs/helpers/README
--- mc-4.8.23/src/vfs/extfs/helpers/README	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/extfs/helpers/README	2020-01-01 19:52:34.000000000 +0400
@@ -80,6 +80,8 @@ means from root of the archive listed).
 If permissions do not start with l, but number of links is greater than one,
 then it says that this file should be a hardlinked with the other file.
 
+The result of list command must not contain "." and ".." items.
+
 * Command: copyout archivename storedfilename extractto
 
 This should extract from archive archivename the file called
diff -urpN mc-4.8.23/src/vfs/extfs/helpers/iso9660.in mc-4.8.24/src/vfs/extfs/helpers/iso9660.in
--- mc-4.8.23/src/vfs/extfs/helpers/iso9660.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/extfs/helpers/iso9660.in	2020-01-01 19:52:34.000000000 +0400
@@ -93,6 +93,8 @@ xorriso_rm() {
 
 # tested to comply with isoinfo 2.0's output
 test_iso () {
+    which isoinfo 2>/dev/null || (echo "isoinfo not found" >&2;  return 1)
+
     CHARSET=$(locale charmap 2>/dev/null)
     if test -z "$CHARSET"; then
         CHARSET=$(locale 2>/dev/null | @GREP@ LC_CTYPE | sed -n -e 's/.*\.\(.*\)"$/\1/p')
@@ -119,6 +121,8 @@ test_iso () {
 }
 
 mcisofs_list () {
+    local lsl r
+
     # left as a reminder to implement compressed image support =)
     case "$1" in
       *.lz)  MYCAT="lzip -dc";;
@@ -133,7 +137,11 @@ mcisofs_list () {
       *)     MYCAT="cat";;
     esac
 
-    $ISOINFO -l -i "$1" 2>/dev/null | @AWK@ -v SEMICOLON=$SEMICOLON '
+    lsl=$($ISOINFO -l -i "$1"  2>/dev/null)
+    r=$?
+    test $r -gt 0 && return $r
+
+    echo "$lsl" | @AWK@ -v SEMICOLON=$SEMICOLON '
 BEGIN {
   dir="";
   # Pattern to match 8 first fields.
@@ -183,8 +191,8 @@ shift
 case "$cmd" in
   list)
     xorriso_list "$@" || {
-        test_iso "$@";
-        mcisofs_list "$@";
+        test_iso "$@" || exit 1
+        mcisofs_list "$@" || exit 1
     }
     exit 0
     ;;
@@ -214,8 +222,8 @@ case "$cmd" in
     ;;
   copyout)
     xorriso_copyout "$@" || {
-        test_iso "$@";
-        mcisofs_copyout "$@";
+        test_iso "$@" || exit 1
+        mcisofs_copyout "$@" || exit 1
     }
     exit 0
     ;;
diff -urpN mc-4.8.23/src/vfs/extfs/helpers/uc1541 mc-4.8.24/src/vfs/extfs/helpers/uc1541
--- mc-4.8.23/src/vfs/extfs/helpers/uc1541	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/src/vfs/extfs/helpers/uc1541	2020-01-01 19:52:34.000000000 +0400
@@ -0,0 +1,702 @@
+#!/usr/bin/env python
+"""
+UC1541 Virtual filesystem
+
+Author: Roman 'gryf' Dobosz <gryf73@gmail.com>
+Date: 2019-09-20
+Version: 3.3
+Licence: BSD
+source: https://bitbucket.org/gryf/uc1541
+mirror: https://github.com/gryf/uc1541
+"""
+
+import sys
+import re
+import os
+import gzip
+from subprocess import Popen, PIPE
+
+if os.getenv('UC1541_DEBUG'):
+    import logging
+    LOG = logging.getLogger('UC1541')
+    LOG.setLevel(logging.DEBUG)
+    FILE_HANDLER = logging.FileHandler("/tmp/uc1541.log")
+    FILE_FORMATTER = logging.Formatter("%(asctime)s %(levelname)-8s "
+                                       "%(lineno)s %(funcName)s - %(message)s")
+    FILE_HANDLER.setFormatter(FILE_FORMATTER)
+    FILE_HANDLER.setLevel(logging.DEBUG)
+    LOG.addHandler(FILE_HANDLER)
+else:
+    class LOG(object):
+        """
+        Dummy logger object. Does nothing.
+        """
+        @classmethod
+        def debug(*args, **kwargs):
+            pass
+
+        @classmethod
+        def info(*args, **kwargs):
+            pass
+
+        @classmethod
+        def warning(*args, **kwargs):
+            pass
+
+        @classmethod
+        def error(*args, **kwargs):
+            pass
+
+        @classmethod
+        def critical(*args, **kwargs):
+            pass
+
+
+SECLEN = 256
+
+
+def _ord(string_or_int):
+    """
+    Return an int value for the (possible) string passed in argument. This
+    function is for compatibility between python2 and python3, where single
+    element in byte string array is a string or an int respectively.
+    """
+    try:
+        return ord(string_or_int)
+    except TypeError:
+        return string_or_int
+
+
+def _get_raw(dimage):
+    """
+    Try to get contents of the D64 image either it's gzip compressed or not.
+    """
+    raw = None
+    with gzip.open(dimage, 'rb') as fobj:
+        # Although the common approach with gzipped files is to check the
+        # magic number, in this case there is no guarantee that first track
+        # does not contain exactly the same byte sequence as the magic number.
+        # So the only way left is to actually try to uncompress the file.
+        try:
+            raw = fobj.read()
+        except (IOError, OSError):
+            pass
+    if not raw:
+        with open(dimage, 'rb') as fobj:
+            raw = fobj.read()
+
+    return raw
+
+
+def _get_implementation(disk):
+    """
+    Check the file under fname and return right class for creating an object
+    corresponding for the file
+    """
+    len_map = {822400: D81,  # 80 tracks
+               819200: D81,  # 80 tracks, 3200 error bytes
+               349696: D71,  # 70 tracks
+               351062: D71,  # 70 tracks, 1366 error bytes
+               174848: D64,  # usual d64 disc image, 35 tracks, no errors
+               175531: D64,  # 35 track, 683 error bytes
+               196608: D64,  # 40 track, no errors
+               197376: D64}  # 40 track, 768 error bytes
+
+    if disk[:32].startswith(b'C64'):
+        return  # T64
+
+    return len_map.get(len(disk))(disk)
+
+
+class Disk(object):
+    """
+    Represent common disk interface
+    """
+    CHAR_MAP = {32: ' ', 33: '!', 34: '"', 35: '#', 37: '%', 38: '&', 39: "'",
+                40: '(', 41: ')', 42: '*', 43: '+', 44: ',', 45: '-', 46: '.',
+                47: '/', 48: '0', 49: '1', 50: '2', 51: '3', 52: '4', 53: '5',
+                54: '6', 55: '7', 56: '8', 57: '9', 59: ';', 60: '<', 61: '=',
+                62: '>', 63: '?', 64: '@', 65: 'a', 66: 'b', 67: 'c', 68: 'd',
+                69: 'e', 70: 'f', 71: 'g', 72: 'h', 73: 'i', 74: 'j', 75: 'k',
+                76: 'l', 77: 'm', 78: 'n', 79: 'o', 80: 'p', 81: 'q', 82: 'r',
+                83: 's', 84: 't', 85: 'u', 86: 'v', 87: 'w', 88: 'x', 89: 'y',
+                90: 'z', 91: '[', 93: ']', 97: 'A', 98: 'B', 99: 'C',
+                100: 'D', 101: 'E', 102: 'F', 103: 'G', 104: 'H', 105: 'I',
+                106: 'J', 107: 'K', 108: 'L', 109: 'M', 110: 'N', 111: 'O',
+                112: 'P', 113: 'Q', 114: 'R', 115: 'S', 116: 'T', 117: 'U',
+                118: 'V', 119: 'W', 120: 'X', 121: 'Y', 122: 'Z', 193: 'A',
+                194: 'B', 195: 'C', 196: 'D', 197: 'E', 198: 'F', 199: 'G',
+                200: 'H', 201: 'I', 202: 'J', 203: 'K', 204: 'L', 205: 'M',
+                206: 'N', 207: 'O', 208: 'P', 209: 'Q', 210: 'R', 211: 'S',
+                212: 'T', 213: 'U', 214: 'V', 215: 'W', 216: 'X', 217: 'Y',
+                218: 'Z'}
+
+    FILE_TYPES = {0b000: 'del',
+                  0b001: 'seq',
+                  0b010: 'prg',
+                  0b011: 'usr',
+                  0b100: 'rel'}
+
+    DIR_TRACK = 18
+    DIR_SECTOR = 1
+
+    def __init__(self, raw):
+        """
+        Init
+        """
+        self.raw = raw
+        self.current_sector_data = None
+        self.next_sector = 0
+        self.next_track = None
+        self._dir_contents = []
+        self._already_done = []
+
+    def _map_filename(self, string):
+        """
+        Transcode filename to ASCII compatible. Replace not supported
+        characters with jokers.
+        """
+
+        filename = list()
+
+        for chr_ in string:
+            if _ord(chr_) == 160:  # shift+space character; $a0
+                break
+
+            character = D64.CHAR_MAP.get(_ord(chr_), '?')
+            filename.append(character)
+
+        # special cases
+        if filename[0] == "-":
+            filename[0] = "?"
+
+        LOG.debug("string: ``%s'' mapped to: ``%s''", string,
+                  "".join(filename))
+        return "".join(filename)
+
+    def _go_to_next_sector(self):
+        """
+        Fetch (if exist) next sector from a directory chain
+        Return False if the chain ends, True otherwise
+        """
+
+        # Well, self.next_sector _should_ have value $FF, but apparently there
+        # are the cases where it is not, therefore checking for that will not
+        # be performed and value of $00 on the next track will end the
+        # directory
+        if self.next_track == 0:
+            LOG.debug("End of directory")
+            return False
+
+        if self.next_track is None:
+            LOG.debug("Going to the track: %s, %s", self.DIR_TRACK,
+                      self.DIR_SECTOR)
+            offset = self._get_offset(self.DIR_TRACK, self.DIR_SECTOR)
+        else:
+            offset = self._get_offset(self.next_track, self.next_sector)
+            LOG.debug("Going to the track: %s,%s", self.next_track,
+                      self.next_sector)
+
+        self.current_sector_data = self.raw[offset:offset + SECLEN]
+
+        # Guard for reading data out of bound - that happened for discs which
+        # store only raw data, even on directory track
+        if not self.current_sector_data:
+            return False
+
+        self.next_track = _ord(self.current_sector_data[0])
+        self.next_sector = _ord(self.current_sector_data[1])
+
+        if (self.next_track, self.next_sector) in self._already_done:
+            # Just a failsafe. Endless loop is not what is expected.
+            LOG.debug("Loop in track/sector pointer at %d,%d",
+                      self.next_track, self.next_sector)
+            self._already_done = []
+            return False
+
+        self._already_done.append((self.next_track, self.next_sector))
+        LOG.debug("Next track: %s,%s", self.next_track, self.next_sector)
+        return True
+
+    def _get_ftype(self, num):
+        """
+        Get filetype as a string
+        """
+        return D64.FILE_TYPES.get(int("%d%d%d" % (num & 4 and 1,
+                                                  num & 2 and 1,
+                                                  num & 1), 2), '???')
+
+    def _get_offset(self, track, sector):
+        """
+        Return offset (in bytes) for specified track and sector.
+        """
+        return 0
+
+    def _harvest_entries(self):
+        """
+        Traverse through sectors and store entries in _dir_contents
+        """
+        sector = self.current_sector_data
+        for dummy in range(8):
+            entry = sector[:32]
+            ftype = _ord(entry[2])
+
+            if ftype == 0:  # deleted
+                sector = sector[32:]
+                continue
+
+            type_verbose = self._get_ftype(ftype)
+
+            protect = _ord(entry[2]) & 64 and "<" or " "
+            fname = entry[5:21]
+            if ftype == 'rel':
+                size = _ord(entry[23])
+            else:
+                size = _ord(entry[30]) + _ord(entry[31]) * 226
+
+            self._dir_contents.append({'fname': self._map_filename(fname),
+                                       'ftype': type_verbose,
+                                       'size': size,
+                                       'protect': protect})
+            sector = sector[32:]
+
+    def list_dir(self):
+        """
+        Return directory list as list of dict with keys:
+            fname, ftype, protect and size
+        """
+        while self._go_to_next_sector():
+            self._harvest_entries()
+
+        return self._dir_contents
+
+
+class D64(Disk):
+    """
+    Implement d64 directory reader
+    """
+
+    def _get_offset(self, track, sector):
+        """
+        Return offset (in bytes) for specified track and sector.
+
+        Track   Sectors/track   # Tracks
+        -----   -------------   ---------
+         1-17        21            17
+        18-24        19             7
+        25-30        18             6
+        31-40        17            10
+        """
+        offset = 0
+        truncate_track = 0
+
+        if track > 17:
+            offset = 17 * 21 * SECLEN
+            truncate_track = 17
+
+        if track > 24:
+            offset += 7 * 19 * SECLEN
+            truncate_track = 24
+
+        if track > 30:
+            offset += 6 * 18 * SECLEN
+            truncate_track = 30
+
+        track = track - truncate_track
+        offset += track * sector * SECLEN
+
+        return offset
+
+
+class D71(Disk):
+    """
+    Implement d71 directory reader
+    """
+
+    def _get_offset(self, track, sector):
+        """
+        Return offset (in bytes) for specified track and sector.
+
+            Track       Sec/trk   # Tracks
+        --------------  -------   ---------
+         1-17 (side 0)    21         17
+        18-24 (side 0)    19          7
+        25-30 (side 0)    18          6
+        31-35 (side 0)    17          5
+        36-52 (side 1)    21         17
+        53-59 (side 1)    19          7
+        60-65 (side 1)    18          6
+        66-70 (side 1)    17          5
+        """
+        offset = 0
+        truncate_track = 0
+
+        if track > 17:
+            offset = 17 * 21 * SECLEN
+            truncate_track = 17
+
+        if track > 24:
+            offset += 7 * 19 * SECLEN
+            truncate_track = 24
+
+        if track > 30:
+            offset += 6 * 18 * SECLEN
+            truncate_track = 30
+
+        if track > 35:
+            offset += 5 * 17 * SECLEN
+            truncate_track = 35
+
+        if track > 52:
+            offset = 17 * 21 * SECLEN
+            truncate_track = 17
+
+        if track > 59:
+            offset += 7 * 19 * SECLEN
+            truncate_track = 24
+
+        if track > 65:
+            offset += 6 * 18 * SECLEN
+            truncate_track = 30
+
+        track = track - truncate_track
+        offset += track * sector * SECLEN
+
+        return offset
+
+
+class D81(Disk):
+    """
+    Implement d81 directory reader
+    """
+    DIR_TRACK = 40
+    DIR_SECTOR = 3
+    FILE_TYPES = {0b000: 'del',
+                  0b001: 'seq',
+                  0b010: 'prg',
+                  0b011: 'usr',
+                  0b100: 'rel',
+                  0b101: 'cbm'}
+
+    def _get_offset(self, track, sector):
+        """
+        Return offset (in bytes) for specified track and sector. In d81 is
+        easy, since we have 80 tracks with 40 sectors for 256 bytes each.
+        """
+        # we wan to go to the beginning (first sector) of the track, not it's
+        # max, so that we need to extract its amount.
+        return (track * 40 - 40) * SECLEN + sector * SECLEN
+
+
+class Uc1541(object):
+    """
+    Class for interact with c1541 program and MC
+    """
+    PRG = re.compile(r'(\d+)\s+"([^"]*)".+?\s(del|prg|rel|seq|usr)([\s<])')
+
+    def __init__(self, archname):
+        self.arch = archname
+        self.out = ''
+        self.err = ''
+        self._verbose = os.getenv("UC1541_VERBOSE", False)
+        self._hide_del = os.getenv("UC1541_HIDE_DEL", False)
+
+        self.dirlist = _get_implementation(_get_raw(archname)).list_dir()
+        self.file_map = {}
+        self.directory = []
+
+    def list(self):
+        """
+        Output list contents of D64 image.
+        Convert filenames to be Unix filesystem friendly
+        Add suffix to show user what kind of file do he dealing with.
+        """
+        LOG.info("List contents of %s", self.arch)
+        directory = self._get_dir()
+
+        # If there is an error reading directory, show the reason to the user
+        if self.out.startswith("Error"):
+            sys.stderr.write(self.out.split("\n")[0] + "\n")
+            return 2
+
+        for entry in directory:
+            sys.stdout.write("%(perms)s   1 %(uid)-8d %(gid)-8d %(size)8d "
+                             "Jan 01 1980 %(display_name)s\n" % entry)
+        return 0
+
+    def rm(self, dst):
+        """
+        Remove file from D64 image
+        """
+        LOG.info("Removing file %s", dst)
+        dst = self._get_masked_fname(dst)
+
+        if not self._call_command('delete', dst=dst):
+            return self._show_error()
+
+        return 0
+
+    def copyin(self, dst, src):
+        """
+        Copy file to the D64 image. Destination filename has to be corrected.
+        """
+        LOG.info("Copy into D64 %s as %s", src, dst)
+        dst = self._correct_fname(dst)
+
+        if not self._call_command('write', src=src, dst=dst):
+            return self._show_error()
+
+        return 0
+
+    def copyout(self, src, dst):
+        """
+        Copy file form the D64 image. Source filename has to be corrected,
+        since it's representation differ from the real one inside D64 image.
+        """
+        LOG.info("Copy form D64 %s as %s", src, dst)
+        if not src.endswith(".prg"):
+            return "cannot read"
+
+        src = self._get_masked_fname(src)
+
+        if not self._call_command('read', src=src, dst=dst):
+            return self._show_error()
+
+        return 0
+
+    def mkdir(self, dirname):
+        """Not supported"""
+        self.err = "D64 format doesn't support directories"
+        return self._show_error()
+
+    def run(self, fname):
+        """Not supported"""
+        self.err = "Not supported, unless you are using MC on real C64 ;)"
+        return self._show_error()
+
+    def _correct_fname(self, fname):
+        """
+        Return filename with mapped characters, without .prg extension.
+        Characters like $, *, + in filenames are perfectly legal, but c1541
+        program seem to have issues with it while writing, so it will also be
+        replaced.
+        """
+        char_map = {'|': "/",
+                    "\\": "/",
+                    "~": " ",
+                    "$": "?",
+                    "*": "?"}
+
+        if fname.lower().endswith(".prg"):
+            fname = fname[:-4]
+
+        new_fname = []
+        for char in fname:
+            trans = char_map.get(char)
+            new_fname.append(trans if trans else char)
+
+        return "".join(new_fname)
+
+    def _get_masked_fname(self, fname):
+        """
+        Return masked filename with '?' jokers instead of non ASCII
+        characters, useful for copying or deleting files with c1541. In case
+        of several files with same name exists in directory, only first one
+        will be operative (first as appeared in directory).
+
+        Warning! If there are two different names but the only difference is in
+        non-ASCII characters (some PET ASCII or control characters) there is
+        a risk that one can remove both files.
+        """
+        directory = self._get_dir()
+
+        for entry in directory:
+            if entry['display_name'] == fname:
+                return entry['pattern_name']
+
+    def _get_dir(self):
+        """
+        Retrieve directory via c1541 program
+        """
+        directory = []
+
+        uid = os.getuid()
+        gid = os.getgid()
+
+        if not self._call_command('list'):
+            return self._show_error()
+
+        idx = 0
+        for line in self.out.split("\n"):
+            if Uc1541.PRG.match(line):
+                blocks, fname, ext, rw = Uc1541.PRG.match(line).groups()
+
+                if ext == 'del' and self._hide_del:
+                    continue
+
+                display_name = ".".join([fname, ext])
+                pattern_name = self.dirlist[idx]['fname']
+
+                if '/' in display_name:
+                    display_name = display_name.replace('/', '|')
+
+                # workaround for space and dash at the beggining of the
+                # filename
+                char_map = {' ': '~',
+                            '-': '_'}
+                display_name = "".join([char_map.get(display_name[0],
+                                                     display_name[0]),
+                                        display_name[1:]])
+
+                if ext == 'del':
+                    perms = "----------"
+                else:
+                    perms = "-r%s-r--r--" % (rw.strip() and "-" or "w")
+
+                directory.append({'pattern_name': pattern_name,
+                                  'display_name': display_name,
+                                  'uid': uid,
+                                  'gid': gid,
+                                  'size': int(blocks) * SECLEN,
+                                  'perms': perms})
+                idx += 1
+        return directory
+
+    def _show_error(self):
+        """
+        Pass out error output from c1541 execution
+        """
+        if self._verbose:
+            return self.err
+        else:
+            return 1
+
+    def _call_command(self, cmd, src=None, dst=None):
+        """
+        Return status of the provided command, which can be one of:
+            write
+            read
+            delete
+            dir/list
+        """
+        command = ['c1541', '-attach', self.arch, '-%s' % cmd]
+        if src:
+            command.append(src)
+        if dst:
+            command.append(dst)
+
+        LOG.debug('executing command: %s', ' '.join(command))
+        # For some reason using write and delete commands and reading output
+        # confuses Python3 beneath MC and as a consequence MC report an
+        # error...therefore for those commands let's not use
+        # universal_newlines...
+        universal_newlines = True
+        if cmd in ['delete', 'write']:
+            universal_newlines = False
+        self.out, self.err = Popen(command,
+                                   universal_newlines=universal_newlines,
+                                   stdout=PIPE, stderr=PIPE).communicate()
+
+        if self.err:
+            LOG.debug('an err: %s', self.err)
+        return not self.err
+
+
+CALL_MAP = {'list': lambda a: Uc1541(a.arch).list(),
+            'copyin': lambda a: Uc1541(a.arch).copyin(a.src, a.dst),
+            'copyout': lambda a: Uc1541(a.arch).copyout(a.src, a.dst),
+            'mkdir': lambda a: Uc1541(a.arch).mkdir(a.dst),
+            'rm': lambda a: Uc1541(a.arch).rm(a.dst),
+            'run': lambda a: Uc1541(a.arch).run(a.dst)}
+
+
+def parse_args():
+    """Use ArgumentParser to check for script arguments and execute."""
+    parser = ArgumentParser()
+    subparsers = parser.add_subparsers(help='supported commands',
+                                       dest='subcommand')
+    subparsers.required = True
+    parser_list = subparsers.add_parser('list', help="List contents of D64 "
+                                        "image")
+    parser_copyin = subparsers.add_parser('copyin', help="Copy file into D64 "
+                                          "image")
+    parser_copyout = subparsers.add_parser('copyout', help="Copy file out of "
+                                           "D64 image")
+    parser_rm = subparsers.add_parser('rm', help="Delete file from D64 image")
+    parser_mkdir = subparsers.add_parser('mkdir', help="Create directory in "
+                                         "archive")
+    parser_run = subparsers.add_parser('run', help="Execute archived file")
+
+    parser_list.add_argument('arch', help="D64 Image filename")
+    parser_list.set_defaults(func=CALL_MAP['list'])
+
+    parser_copyin.add_argument('arch', help="D64 Image filename")
+    parser_copyin.add_argument('src', help="Source filename")
+    parser_copyin.add_argument('dst', help="Destination filename (to be "
+                               "written into D64 image)")
+    parser_copyin.set_defaults(func=CALL_MAP['copyin'])
+
+    parser_copyout.add_argument('arch', help="D64 Image filename")
+    parser_copyout.add_argument('src', help="Source filename (to be read from"
+                                " D64 image")
+    parser_copyout.add_argument('dst', help="Destination filename")
+    parser_copyout.set_defaults(func=CALL_MAP['copyout'])
+
+    parser_rm.add_argument('arch', help="D64 Image filename")
+    parser_rm.add_argument('dst', help="File inside D64 image to be deleted")
+    parser_rm.set_defaults(func=CALL_MAP['rm'])
+
+    parser_mkdir.add_argument('arch', help="archive filename")
+    parser_mkdir.add_argument('dst', help="Directory name inside archive to "
+                              "be created")
+    parser_mkdir.set_defaults(func=CALL_MAP['mkdir'])
+
+    parser_run.add_argument('arch', help="archive filename")
+    parser_run.add_argument('dst', help="File to be executed")
+    parser_run.set_defaults(func=CALL_MAP['run'])
+
+    args = parser.parse_args()
+    return args.func(args)
+
+
+def no_parse():
+    """Failsafe argument "parsing". Note, that it blindly takes positional
+    arguments without checking them. In case of wrong arguments it will
+    silently exit"""
+    try:
+        if sys.argv[1] not in ('list', 'copyin', 'copyout', 'rm', 'mkdir',
+                               "run"):
+            sys.exit(2)
+    except IndexError:
+        sys.exit(2)
+
+    class Arg(object):
+        """Mimic argparse object"""
+        dst = None
+        src = None
+        arch = None
+
+    arg = Arg()
+
+    try:
+        arg.arch = sys.argv[2]
+        if sys.argv[1] in ('copyin', 'copyout'):
+            arg.src = sys.argv[3]
+            arg.dst = sys.argv[4]
+        elif sys.argv[1] in ('rm', 'run', 'mkdir'):
+            arg.dst = sys.argv[3]
+    except IndexError:
+        sys.exit(2)
+
+    return CALL_MAP[sys.argv[1]](arg)
+
+
+if __name__ == "__main__":
+    LOG.debug("Script params: %s", str(sys.argv))
+    try:
+        from argparse import ArgumentParser
+        PARSE_FUNC = parse_args
+    except ImportError:
+        PARSE_FUNC = no_parse
+
+    sys.exit(PARSE_FUNC())
diff -urpN mc-4.8.23/src/vfs/extfs/helpers/uc1541.in mc-4.8.24/src/vfs/extfs/helpers/uc1541.in
--- mc-4.8.23/src/vfs/extfs/helpers/uc1541.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/extfs/helpers/uc1541.in	1970-01-01 04:00:00.000000000 +0400
@@ -1,556 +0,0 @@
-#! @PYTHON@
-"""
-UC1541 Virtual filesystem
-
-Author: Roman 'gryf' Dobosz <gryf73@gmail.com>
-Date: 2014-01-04
-Version: 2.8
-Licence: BSD
-source: https://bitbucket.org/gryf/uc1541
-mirror: https://github.com/gryf/uc1541
-"""
-
-import sys
-import re
-import os
-import gzip
-from subprocess import Popen, PIPE
-
-if os.getenv('UC1541_DEBUG'):
-    import logging
-    LOG = logging.getLogger('UC1541')
-    LOG.setLevel(logging.DEBUG)
-    FILE_HANDLER = logging.FileHandler("/tmp/uc1541.log")
-    FILE_FORMATTER = logging.Formatter("%(asctime)s %(levelname)-8s "
-                                       "%(lineno)s %(funcName)s - %(message)s")
-    FILE_HANDLER.setFormatter(FILE_FORMATTER)
-    FILE_HANDLER.setLevel(logging.DEBUG)
-    LOG.addHandler(FILE_HANDLER)
-else:
-    class LOG(object):
-        """
-        Dummy logger object. Does nothing.
-        """
-        @classmethod
-        def debug(*args, **kwargs):
-            pass
-
-        @classmethod
-        def info(*args, **kwargs):
-            pass
-
-        @classmethod
-        def warning(*args, **kwargs):
-            pass
-
-        @classmethod
-        def error(*args, **kwargs):
-            pass
-
-        @classmethod
-        def critical(*args, **kwargs):
-            pass
-
-
-class D64(object):
-    """
-    Implement d64 directory reader
-    """
-    CHAR_MAP = {32: ' ', 33: '!', 34: '"', 35: '#', 37: '%', 38: '&', 39: "'",
-                40: '(', 41: ')', 42: '*', 43: '+', 44: ',', 45: '-', 46: '.',
-                47: '/', 48: '0', 49: '1', 50: '2', 51: '3', 52: '4', 53: '5',
-                54: '6', 55: '7', 56: '8', 57: '9', 59: ';', 60: '<', 61: '=',
-                62: '>', 63: '?', 64: '@', 65: 'a', 66: 'b', 67: 'c', 68: 'd',
-                69: 'e', 70: 'f', 71: 'g', 72: 'h', 73: 'i', 74: 'j', 75: 'k',
-                76: 'l', 77: 'm', 78: 'n', 79: 'o', 80: 'p', 81: 'q', 82: 'r',
-                83: 's', 84: 't', 85: 'u', 86: 'v', 87: 'w', 88: 'x', 89: 'y',
-                90: 'z', 91: '[', 93: ']', 97: 'A', 98: 'B', 99: 'C',
-                100: 'D', 101: 'E', 102: 'F', 103: 'G', 104: 'H', 105: 'I',
-                106: 'J', 107: 'K', 108: 'L', 109: 'M', 110: 'N', 111: 'O',
-                112: 'P', 113: 'Q', 114: 'R', 115: 'S', 116: 'T', 117: 'U',
-                118: 'V', 119: 'W', 120: 'X', 121: 'Y', 122: 'Z', 193: 'A',
-                194: 'B', 195: 'C', 196: 'D', 197: 'E', 198: 'F', 199: 'G',
-                200: 'H', 201: 'I', 202: 'J', 203: 'K', 204: 'L', 205: 'M',
-                206: 'N', 207: 'O', 208: 'P', 209: 'Q', 210: 'R', 211: 'S',
-                212: 'T', 213: 'U', 214: 'V', 215: 'W', 216: 'X', 217: 'Y',
-                218: 'Z'}
-
-    FILE_TYPES = {0b000: 'del',
-                  0b001: 'seq',
-                  0b010: 'prg',
-                  0b011: 'usr',
-                  0b100: 'rel'}
-
-    def __init__(self, dimage):
-        """
-        Init
-        """
-        LOG.debug('image: %s', dimage)
-        self.raw = None
-        self.current_sector_data = None
-        self.next_sector = 0
-        self.next_track = None
-        self._dir_contents = []
-        self._already_done = []
-
-        self._get_raw(dimage)
-
-    def _get_raw(self, dimage):
-        """Try to get contents of the D64 image either it's gzip compressed or
-        not."""
-        fobj = gzip.open(dimage)
-        # Although the common approach with gzipped files is to check the
-        # magic number, in this case there is no guarantee that first track
-        # does not contain exactly the same byte sequence as the magic number.
-        # So the only way left is to actually try to uncompress the file.
-        try:
-            self.raw = fobj.read()
-        except IOError:
-            fobj.close()
-            fobj = open(dimage)
-            self.raw = fobj.read()
-            fobj.close()
-
-    def _map_filename(self, string):
-        """
-        Transcode filename to ASCII compatible. Replace not supported
-        characters with jokers.
-        """
-
-        filename = list()
-
-        for chr_ in string:
-            if ord(chr_) == 160:  # shift+space character; $a0
-                break
-
-            character = D64.CHAR_MAP.get(ord(chr_), '?')
-            filename.append(character)
-
-        # special cases
-        if filename[0] == "-":
-            filename[0] = "?"
-
-        LOG.debug("string: ``%s'' mapped to: ``%s''", string,
-                  "".join(filename))
-        return "".join(filename)
-
-    def _go_to_next_sector(self):
-        """
-        Fetch (if exist) next sector from a directory chain
-        Return False if the chain ends, True otherwise
-        """
-
-        # Well, self.next_sector _should_ have value $FF, but apparently there
-        # are the cases where it is not, therefore checking for that will not
-        # be performed and value of $00 on the next track will end the
-        # directory
-        if self.next_track == 0:
-            LOG.debug("End of directory")
-            return False
-
-        if self.next_track is None:
-            LOG.debug("Going to the track: 18,1")
-            offset = self._get_d64_offset(18, 1)
-        else:
-            offset = self._get_d64_offset(self.next_track, self.next_sector)
-            LOG.debug("Going to the track: %s,%s", self.next_track,
-                      self.next_sector)
-
-        self.current_sector_data = self.raw[offset:offset + 256]
-
-        # Guard for reading data out of bound - that happened for discs which
-        # store only raw data, even on 18 track
-        if not self.current_sector_data:
-            return False
-
-        self.next_track = ord(self.current_sector_data[0])
-        self.next_sector = ord(self.current_sector_data[1])
-
-        if (self.next_track, self.next_sector) in self._already_done:
-            # Just a failsafe. Endless loop is not what is expected.
-            LOG.debug("Loop in track/sector pointer at %d,%d",
-                      self.next_track, self.next_sector)
-            self._already_done = []
-            return False
-
-        self._already_done.append((self.next_track, self.next_sector))
-        LOG.debug("Next track: %s,%s", self.next_track, self.next_sector)
-        return True
-
-    def _get_ftype(self, num):
-        """
-        Get filetype as a string
-        """
-        return D64.FILE_TYPES.get(int("%d%d%d" % (num & 4 and 1,
-                                                  num & 2 and 1,
-                                                  num & 1), 2), '???')
-
-    def _get_d64_offset(self, track, sector):
-        """
-        Return offset (in bytes) for specified track and sector.
-        """
-
-        offset = 0
-        truncate_track = 0
-
-        if track > 17:
-            offset = 17 * 21 * 256
-            truncate_track = 17
-
-        if track > 24:
-            offset += 6 * 19 * 256
-            truncate_track = 24
-
-        if track > 30:
-            offset += 5 * 18 * 256
-            truncate_track = 30
-
-        track = track - truncate_track
-        offset += track * sector * 256
-
-        return offset
-
-    def _harvest_entries(self):
-        """
-        Traverse through sectors and store entries in _dir_contents
-        """
-        sector = self.current_sector_data
-        for dummy in range(8):
-            entry = sector[:32]
-            ftype = ord(entry[2])
-
-            if ftype == 0:  # deleted
-                sector = sector[32:]
-                continue
-
-            type_verbose = self._get_ftype(ftype)
-
-            protect = ord(entry[2]) & 64 and "<" or " "
-            fname = entry[5:21]
-            if ftype == 'rel':
-                size = ord(entry[23])
-            else:
-                size = ord(entry[30]) + ord(entry[31]) * 226
-
-            self._dir_contents.append({'fname': self._map_filename(fname),
-                                       'ftype': type_verbose,
-                                       'size': size,
-                                       'protect': protect})
-            sector = sector[32:]
-
-    def list_dir(self):
-        """
-        Return directory list as list of dict with keys:
-            fname, ftype, protect and size
-        """
-        while self._go_to_next_sector():
-            self._harvest_entries()
-
-        return self._dir_contents
-
-
-class Uc1541(object):
-    """
-    Class for interact with c1541 program and MC
-    """
-    PRG = re.compile(r'(\d+)\s+"([^"]*)".+?\s(del|prg|rel|seq|usr)([\s<])')
-
-    def __init__(self, archname):
-        self.arch = archname
-        self.out = ''
-        self.err = ''
-        self._verbose = os.getenv("UC1541_VERBOSE", False)
-        self._hide_del = os.getenv("UC1541_HIDE_DEL", False)
-
-        self.pyd64 = D64(archname).list_dir()
-        self.file_map = {}
-        self.directory = []
-
-    def list(self):
-        """
-        Output list contents of D64 image.
-        Convert filenames to be Unix filesystem friendly
-        Add suffix to show user what kind of file do he dealing with.
-        """
-        LOG.info("List contents of %s", self.arch)
-        directory = self._get_dir()
-
-        # If there is an error reading directory, show the reason to the user
-        if self.out.startswith("Error"):
-            sys.stderr.write(self.out.split("\n")[0] + "\n")
-            return 2
-
-        for entry in directory:
-            sys.stdout.write("%(perms)s   1 %(uid)-8d %(gid)-8d %(size)8d "
-                             "Jan 01 1980 %(display_name)s\n" % entry)
-        return 0
-
-    def rm(self, dst):
-        """
-        Remove file from D64 image
-        """
-        LOG.info("Removing file %s", dst)
-        dst = self._get_masked_fname(dst)
-
-        if not self._call_command('delete', dst=dst):
-            return self._show_error()
-
-        # During removing, a message containing ERRORCODE is sent to stdout
-        # instead of stderr. Everything other than 'ERRORCODE 1' (which means:
-        # 'everything fine') is actually a failure. In case of verbose error
-        # output it is needed to copy self.out to self.err.
-        if '\nERRORCODE 1\n' not in self.out:
-            self.err = self.out
-            return self._show_error()
-
-        return 0
-
-    def copyin(self, dst, src):
-        """
-        Copy file to the D64 image. Destination filename has to be corrected.
-        """
-        LOG.info("Copy into D64 %s as %s", src, dst)
-        dst = self._correct_fname(dst)
-
-        if not self._call_command('write', src=src, dst=dst):
-            return self._show_error()
-
-        return 0
-
-    def copyout(self, src, dst):
-        """
-        Copy file form the D64 image. Source filename has to be corrected,
-        since it's representation differ from the real one inside D64 image.
-        """
-        LOG.info("Copy form D64 %s as %s", src, dst)
-        if not src.endswith(".prg"):
-            return "cannot read"
-
-        src = self._get_masked_fname(src)
-
-        if not self._call_command('read', src=src, dst=dst):
-            return self._show_error()
-
-        return 0
-
-    def mkdir(self, dirname):
-        """Not supported"""
-        self.err = "D64 format doesn't support directories"
-        return self._show_error()
-
-    def run(self, fname):
-        """Not supported"""
-        self.err = "Not supported, unless you are using MC on real C64 ;)"
-        return self._show_error()
-
-    def _correct_fname(self, fname):
-        """
-        Return filename with mapped characters, without .prg extension.
-        Characters like $, *, + in filenames are perfectly legal, but c1541
-        program seem to have issues with it while writing, so it will also be
-        replaced.
-        """
-        char_map = {'|': "/",
-                    "\\": "/",
-                    "~": " ",
-                    "$": "?",
-                    "*": "?"}
-
-        if fname.lower().endswith(".prg"):
-            fname = fname[:-4]
-
-        new_fname = []
-        for char in fname:
-            trans = char_map.get(char)
-            new_fname.append(trans if trans else char)
-
-        return "".join(new_fname)
-
-    def _get_masked_fname(self, fname):
-        """
-        Return masked filename with '?' jokers instead of non ASCII
-        characters, useful for copying or deleting files with c1541. In case
-        of several files with same name exists in directory, only first one
-        will be operative (first as appeared in directory).
-
-        Warning! If there are two different names but the only difference is in
-        non-ASCII characters (some PET ASCII or control characters) there is
-        a risk that one can remove both files.
-        """
-        directory = self._get_dir()
-
-        for entry in directory:
-            if entry['display_name'] == fname:
-                return entry['pattern_name']
-
-    def _get_dir(self):
-        """
-        Retrieve directory via c1541 program
-        """
-        directory = []
-
-        uid = os.getuid()
-        gid = os.getgid()
-
-        if not self._call_command('list'):
-            return self._show_error()
-
-        idx = 0
-        for line in self.out.split("\n"):
-            if Uc1541.PRG.match(line):
-                blocks, fname, ext, rw = Uc1541.PRG.match(line).groups()
-
-                if ext == 'del' and self._hide_del:
-                    continue
-
-                display_name = ".".join([fname, ext])
-                pattern_name = self.pyd64[idx]['fname']
-
-                if '/' in display_name:
-                    display_name = display_name.replace('/', '|')
-
-                # workaround for space and dash at the beggining of the
-                # filename
-                char_map = {' ': '~',
-                            '-': '_'}
-                display_name = "".join([char_map.get(display_name[0],
-                                                     display_name[0]),
-                                        display_name[1:]])
-
-                if ext == 'del':
-                    perms = "----------"
-                else:
-                    perms = "-r%s-r--r--" % (rw.strip() and "-" or "w")
-
-                directory.append({'pattern_name': pattern_name,
-                                  'display_name': display_name,
-                                  'uid': uid,
-                                  'gid': gid,
-                                  'size': int(blocks) * 256,
-                                  'perms': perms})
-                idx += 1
-        return directory
-
-    def _show_error(self):
-        """
-        Pass out error output from c1541 execution
-        """
-        if self._verbose:
-            return self.err
-        else:
-            return 1
-
-    def _call_command(self, cmd, src=None, dst=None):
-        """
-        Return status of the provided command, which can be one of:
-            write
-            read
-            delete
-            dir/list
-        """
-        command = ['c1541', '-attach', self.arch, '-%s' % cmd]
-        if src:
-            command.append(src)
-        if dst:
-            command.append(dst)
-
-        self.out, self.err = Popen(command, stdout=PIPE,
-                                   stderr=PIPE).communicate()
-        return not self.err
-
-
-CALL_MAP = {'list': lambda a: Uc1541(a.arch).list(),
-            'copyin': lambda a: Uc1541(a.arch).copyin(a.src, a.dst),
-            'copyout': lambda a: Uc1541(a.arch).copyout(a.src, a.dst),
-            'mkdir': lambda a: Uc1541(a.arch).mkdir(a.dst),
-            'rm': lambda a: Uc1541(a.arch).rm(a.dst),
-            'run': lambda a: Uc1541(a.arch).run(a.dst)}
-
-
-def parse_args():
-    """Use ArgumentParser to check for script arguments and execute."""
-    parser = ArgumentParser()
-    subparsers = parser.add_subparsers(help='supported commands')
-    parser_list = subparsers.add_parser('list', help="List contents of D64 "
-                                        "image")
-    parser_copyin = subparsers.add_parser('copyin', help="Copy file into D64 "
-                                          "image")
-    parser_copyout = subparsers.add_parser('copyout', help="Copy file out of "
-                                           "D64 image")
-    parser_rm = subparsers.add_parser('rm', help="Delete file from D64 image")
-    parser_mkdir = subparsers.add_parser('mkdir', help="Create directory in "
-                                         "archive")
-    parser_run = subparsers.add_parser('run', help="Execute archived file")
-
-    parser_list.add_argument('arch', help="D64 Image filename")
-    parser_list.set_defaults(func=CALL_MAP['list'])
-
-    parser_copyin.add_argument('arch', help="D64 Image filename")
-    parser_copyin.add_argument('src', help="Source filename")
-    parser_copyin.add_argument('dst', help="Destination filename (to be "
-                               "written into D64 image)")
-    parser_copyin.set_defaults(func=CALL_MAP['copyin'])
-
-    parser_copyout.add_argument('arch', help="D64 Image filename")
-    parser_copyout.add_argument('src', help="Source filename (to be read from"
-                                " D64 image")
-    parser_copyout.add_argument('dst', help="Destination filename")
-    parser_copyout.set_defaults(func=CALL_MAP['copyout'])
-
-    parser_rm.add_argument('arch', help="D64 Image filename")
-    parser_rm.add_argument('dst', help="File inside D64 image to be deleted")
-    parser_rm.set_defaults(func=CALL_MAP['rm'])
-
-    parser_mkdir.add_argument('arch', help="archive filename")
-    parser_mkdir.add_argument('dst', help="Directory name inside archive to "
-                              "be created")
-    parser_mkdir.set_defaults(func=CALL_MAP['mkdir'])
-
-    parser_run.add_argument('arch', help="archive filename")
-    parser_run.add_argument('dst', help="File to be executed")
-    parser_run.set_defaults(func=CALL_MAP['run'])
-
-    args = parser.parse_args()
-    return args.func(args)
-
-
-def no_parse():
-    """Failsafe argument "parsing". Note, that it blindly takes positional
-    arguments without checking them. In case of wrong arguments it will
-    silently exit"""
-    try:
-        if sys.argv[1] not in ('list', 'copyin', 'copyout', 'rm', 'mkdir',
-                               "run"):
-            sys.exit(2)
-    except IndexError:
-        sys.exit(2)
-
-    class Arg(object):
-        """Mimic argparse object"""
-        dst = None
-        src = None
-        arch = None
-
-    arg = Arg()
-
-    try:
-        arg.arch = sys.argv[2]
-        if sys.argv[1] in ('copyin', 'copyout'):
-            arg.src = sys.argv[3]
-            arg.dst = sys.argv[4]
-        elif sys.argv[1] in ('rm', 'run', 'mkdir'):
-            arg.dst = sys.argv[3]
-    except IndexError:
-        sys.exit(2)
-
-    return CALL_MAP[sys.argv[1]](arg)
-
-if __name__ == "__main__":
-    LOG.debug("Script params: %s", str(sys.argv))
-    try:
-        from argparse import ArgumentParser
-        PARSE_FUNC = parse_args
-    except ImportError:
-        PARSE_FUNC = no_parse
-
-    sys.exit(PARSE_FUNC())
diff -urpN mc-4.8.23/src/vfs/extfs/helpers/urar.in mc-4.8.24/src/vfs/extfs/helpers/urar.in
--- mc-4.8.23/src/vfs/extfs/helpers/urar.in	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/extfs/helpers/urar.in	2020-01-01 19:52:34.000000000 +0400
@@ -47,7 +47,7 @@ flag==1 {
     else
 	if (index($6, ".") != 0)
 	    $6="-rw-r--r--"
-    printf "%s 1 %s %s %d %02d/%02d/%02d %s ./%s\n", $6, uid, gid, $1, a[2], a[1], a[3], $5, str
+    printf "%s 1 %s %s %d %02d/%02d/%02d %s %s\n", $6, uid, gid, $1, a[2], a[1], a[3], $5, str
 }'
 }
 
@@ -105,7 +105,7 @@ mcrar5fs_list ()
         }
 
         ### and finally
-        printf ("%s 1 %s %s %d %02d/%02d/%02d %s ./%s\n",
+        printf ("%s 1 %s %s %d %02d/%02d/%02d %s %s\n",
                 attrs, uid, gid, size, date[2], date[3], date[1], time, name);
     }
 '
diff -urpN mc-4.8.23/src/vfs/fish/Makefile.in mc-4.8.24/src/vfs/fish/Makefile.in
--- mc-4.8.23/src/vfs/fish/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/fish/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/fish
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -268,7 +258,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -276,18 +265,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -327,10 +313,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -338,13 +321,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -352,12 +329,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -365,24 +337,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -416,7 +380,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -428,12 +391,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/fish/fish.c mc-4.8.24/src/vfs/fish/fish.c
--- mc-4.8.23/src/vfs/fish/fish.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/fish/fish.c	2020-01-01 19:52:34.000000000 +0400
@@ -452,7 +452,6 @@ fish_set_env (int flags)
     GString *tmp;
 
     tmp = g_string_sized_new (250);
-    g_string_assign (tmp, "");
 
     if ((flags & FISH_HAVE_HEAD) != 0)
         g_string_append (tmp, "FISH_HAVE_HEAD=1 export FISH_HAVE_HEAD; ");
@@ -1751,7 +1750,7 @@ vfs_init_fish (void)
 {
     tcp_init ();
 
-    vfs_init_subclass (&fish_subclass, "fish", VFS_REMOTE | VFS_USETMP, "sh");
+    vfs_init_subclass (&fish_subclass, "fish", VFSF_REMOTE | VFSF_USETMP, "sh");
     vfs_fish_ops->fill_names = fish_fill_names;
     vfs_fish_ops->stat = fish_stat;
     vfs_fish_ops->lstat = fish_lstat;
diff -urpN mc-4.8.23/src/vfs/fish/helpers/Makefile.in mc-4.8.24/src/vfs/fish/helpers/Makefile.in
--- mc-4.8.23/src/vfs/fish/helpers/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/fish/helpers/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/fish/helpers
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -207,7 +197,6 @@ am__tagged_files = $(HEADERS) $(SOURCES)
 am__DIST_COMMON = $(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -215,18 +204,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -266,10 +252,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -277,13 +260,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -291,12 +268,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -304,24 +276,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -355,7 +319,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -367,12 +330,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/ftpfs/Makefile.in mc-4.8.24/src/vfs/ftpfs/Makefile.in
--- mc-4.8.23/src/vfs/ftpfs/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/ftpfs/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/ftpfs
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -227,7 +217,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -235,18 +224,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -286,10 +272,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -297,13 +280,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -311,12 +288,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -324,24 +296,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -375,7 +339,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -387,12 +350,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/ftpfs/ftpfs.c mc-4.8.24/src/vfs/ftpfs/ftpfs.c
--- mc-4.8.23/src/vfs/ftpfs/ftpfs.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/ftpfs/ftpfs.c	2020-01-01 19:52:34.000000000 +0400
@@ -1765,12 +1765,25 @@ ftpfs_dir_load (struct vfs_class *me, st
     }
 
     if (sock == -1)
-        goto fallback;
+    {
+      fallback:
+        if (ftp_super->strict == RFC_AUTODETECT)
+        {
+            /* It's our first attempt to get a directory listing from this
+               server (UNIX style LIST command) */
+            ftp_super->strict = RFC_STRICT;
+            /* I hate goto, but recursive call needs another 8K on stack */
+            /* return ftpfs_dir_load (me, dir, remote_path); */
+            cd_first = TRUE;
+            goto again;
+        }
 
-    /* Clear the interrupt flag */
-    tty_enable_interrupt_key ();
+        vfs_print_message ("%s", _("ftpfs: failed; nowhere to fallback to"));
+        ERRNOR (EACCES, -1);
+    }
 
     vfs_parse_ls_lga_init ();
+
     while (TRUE)
     {
         int i;
@@ -1787,7 +1800,6 @@ ftpfs_dir_load (struct vfs_class *me, st
             me->verrno = ECONNRESET;
             close (sock);
             ftp_super->ctl_connection_busy = FALSE;
-            tty_disable_interrupt_key ();
             ftpfs_get_reply (me, ftp_super->sock, NULL, 0);
             vfs_print_message (_("%s: failure"), me->name);
             return (-1);
@@ -1844,21 +1856,6 @@ ftpfs_dir_load (struct vfs_class *me, st
 
     vfs_print_message (_("%s: done."), me->name);
     return 0;
-
-  fallback:
-    if (ftp_super->strict == RFC_AUTODETECT)
-    {
-        /* It's our first attempt to get a directory listing from this
-           server (UNIX style LIST command) */
-        ftp_super->strict = RFC_STRICT;
-        /* I hate goto, but recursive call needs another 8K on stack */
-        /* return ftpfs_dir_load (me, dir, remote_path); */
-        cd_first = TRUE;
-        goto again;
-    }
-
-    vfs_print_message ("%s", _("ftpfs: failed; nowhere to fallback to"));
-    ERRNOR (EACCES, -1);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -2701,7 +2698,7 @@ vfs_init_ftpfs (void)
 {
     tcp_init ();
 
-    vfs_init_subclass (&ftpfs_subclass, "ftpfs", VFS_NOLINKS | VFS_REMOTE | VFS_USETMP, "ftp");
+    vfs_init_subclass (&ftpfs_subclass, "ftpfs", VFSF_NOLINKS | VFSF_REMOTE | VFSF_USETMP, "ftp");
     vfs_ftpfs_ops->done = ftpfs_done;
     vfs_ftpfs_ops->fill_names = ftpfs_fill_names;
     vfs_ftpfs_ops->stat = ftpfs_stat;
diff -urpN mc-4.8.23/src/vfs/local/Makefile.in mc-4.8.24/src/vfs/local/Makefile.in
--- mc-4.8.23/src/vfs/local/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/local/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/local
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -227,7 +217,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -235,18 +224,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -286,10 +272,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -297,13 +280,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -311,12 +288,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -324,24 +296,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -375,7 +339,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -387,12 +350,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/local/local.c mc-4.8.24/src/vfs/local/local.c
--- mc-4.8.23/src/vfs/local/local.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/local/local.c	2020-01-01 19:52:34.000000000 +0400
@@ -441,7 +441,7 @@ vfs_init_localfs (void)
     /* NULLize vfs_s_subclass members */
     memset (&local_subclass, 0, sizeof (local_subclass));
 
-    vfs_init_class (vfs_local_ops, "localfs", VFS_LOCAL, NULL);
+    vfs_init_class (vfs_local_ops, "localfs", VFSF_LOCAL, NULL);
     vfs_local_ops->which = local_which;
     vfs_local_ops->open = local_open;
     vfs_local_ops->close = local_close;
diff -urpN mc-4.8.23/src/vfs/sfs/Makefile.in mc-4.8.24/src/vfs/sfs/Makefile.in
--- mc-4.8.23/src/vfs/sfs/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/sfs/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -91,24 +91,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/sfs
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -257,7 +247,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -265,18 +254,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -316,10 +302,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -327,13 +310,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -341,12 +318,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -354,24 +326,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -405,7 +369,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -417,12 +380,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/sfs/sfs.c mc-4.8.24/src/vfs/sfs/sfs.c
--- mc-4.8.23/src/vfs/sfs/sfs.c	2019-06-22 15:08:02.000000000 +0400
+++ mc-4.8.24/src/vfs/sfs/sfs.c	2020-01-01 19:52:34.000000000 +0400
@@ -557,7 +557,7 @@ vfs_init_sfs (void)
     /* NULLize vfs_s_subclass members */
     memset (&sfs_subclass, 0, sizeof (sfs_subclass));
 
-    vfs_init_class (vfs_sfs_ops, "sfs", VFS_UNKNOWN, NULL);
+    vfs_init_class (vfs_sfs_ops, "sfs", VFSF_UNKNOWN, NULL);
     vfs_sfs_ops->init = sfs_init;
     vfs_sfs_ops->done = sfs_done;
     vfs_sfs_ops->fill_names = sfs_fill_names;
diff -urpN mc-4.8.23/src/vfs/sftpfs/Makefile.in mc-4.8.24/src/vfs/sftpfs/Makefile.in
--- mc-4.8.23/src/vfs/sftpfs/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/sftpfs/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/sftpfs
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -232,7 +222,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -240,18 +229,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -291,10 +277,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -302,13 +285,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -316,12 +293,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -329,24 +301,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -380,7 +344,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -392,12 +355,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/sftpfs/connection.c mc-4.8.24/src/vfs/sftpfs/connection.c
--- mc-4.8.23/src/vfs/sftpfs/connection.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/sftpfs/connection.c	2020-01-01 19:52:34.000000000 +0400
@@ -53,6 +53,10 @@
 
 /*** file scope variables ************************************************************************/
 
+static const char *kbi_passwd = NULL;
+static const struct vfs_s_super *kbi_super = NULL;
+
+/* --------------------------------------------------------------------------------------------- */
 /*** file scope functions ************************************************************************/
 /* --------------------------------------------------------------------------------------------- */
 /**
@@ -293,6 +297,51 @@ sftpfs_open_connection_ssh_key (struct v
 }
 
 /* --------------------------------------------------------------------------------------------- */
+
+/**
+ * Keyboard-interactive password helper for opening connection to host by
+ * sftpfs_open_connection_ssh_password
+ *
+ * Uses global kbi_super (data with existing connection) and kbi_passwd (password)
+ *
+ * @param name             username
+ * @param name_len         length of @name
+ * @param instruction      unused
+ * @param instruction_len  unused
+ * @param num_prompts      number of possible problems to process
+ * @param prompts          array of prompts to process
+ * @param responses        array of responses, one per prompt
+ * @param abstract         unused
+ */
+
+static
+LIBSSH2_USERAUTH_KBDINT_RESPONSE_FUNC (sftpfs_keyboard_interactive_helper)
+{
+    int i;
+    size_t len;
+
+    (void) instruction;
+    (void) instruction_len;
+    (void) abstract;
+
+    if (kbi_super == NULL || kbi_passwd == NULL)
+        return;
+
+    if (strncmp (name, kbi_super->path_element->user, name_len) != 0)
+        return;
+
+    /* assume these are password prompts */
+    len = strlen (kbi_passwd);
+
+    for (i = 0; i < num_prompts; ++i)
+        if (strncmp (prompts[i].text, "Password: ", prompts[i].length) == 0)
+        {
+            responses[i].text = strdup (kbi_passwd);
+            responses[i].length = len;
+        }
+}
+
+/* --------------------------------------------------------------------------------------------- */
 /**
  * Open connection to host using password.
  *
@@ -321,6 +370,22 @@ sftpfs_open_connection_ssh_password (str
                LIBSSH2_ERROR_EAGAIN);
         if (rc == 0)
             return TRUE;
+
+        kbi_super = super;
+        kbi_passwd = super->path_element->password;
+
+        while ((rc =
+                libssh2_userauth_keyboard_interactive (sftpfs_super->session,
+                                                       super->path_element->user,
+                                                       sftpfs_keyboard_interactive_helper)) ==
+               LIBSSH2_ERROR_EAGAIN)
+            ;
+
+        kbi_super = NULL;
+        kbi_passwd = NULL;
+
+        if (rc == 0)
+            return TRUE;
     }
 
     p = g_strdup_printf (_("sftp: Enter password for %s "), super->path_element->user);
@@ -335,6 +400,22 @@ sftpfs_open_connection_ssh_password (str
                                                 passwd)) == LIBSSH2_ERROR_EAGAIN)
             ;
 
+        if (rc != 0)
+        {
+            kbi_super = super;
+            kbi_passwd = passwd;
+
+            while ((rc =
+                    libssh2_userauth_keyboard_interactive (sftpfs_super->session,
+                                                           super->path_element->user,
+                                                           sftpfs_keyboard_interactive_helper)) ==
+                   LIBSSH2_ERROR_EAGAIN)
+                ;
+
+            kbi_super = NULL;
+            kbi_passwd = NULL;
+        }
+
         if (rc == 0)
         {
             ret_value = TRUE;
diff -urpN mc-4.8.23/src/vfs/sftpfs/init.c mc-4.8.24/src/vfs/sftpfs/init.c
--- mc-4.8.23/src/vfs/sftpfs/init.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/sftpfs/init.c	2020-01-01 19:52:34.000000000 +0400
@@ -58,7 +58,7 @@ vfs_init_sftpfs (void)
 {
     tcp_init ();
 
-    vfs_init_subclass (&sftpfs_subclass, "sftpfs", VFS_NOLINKS | VFS_REMOTE, "sftp");
+    vfs_init_subclass (&sftpfs_subclass, "sftpfs", VFSF_NOLINKS | VFSF_REMOTE, "sftp");
     sftpfs_init_class ();
     sftpfs_init_subclass ();
     vfs_register_class (sftpfs_class);
diff -urpN mc-4.8.23/src/vfs/sftpfs/internal.c mc-4.8.24/src/vfs/sftpfs/internal.c
--- mc-4.8.23/src/vfs/sftpfs/internal.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/sftpfs/internal.c	2020-01-01 19:52:34.000000000 +0400
@@ -27,6 +27,14 @@
 #include <config.h>
 #include <errno.h>
 
+#ifdef HAVE_SYS_SELECT_H
+#include <sys/select.h>
+#else
+#include <sys/time.h>
+#include <sys/types.h>
+#include <unistd.h>
+#endif
+
 #include "lib/global.h"
 #include "lib/util.h"
 
diff -urpN mc-4.8.23/src/vfs/smbfs/Makefile.in mc-4.8.24/src/vfs/smbfs/Makefile.in
--- mc-4.8.23/src/vfs/smbfs/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/smbfs/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/smbfs
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -268,7 +258,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -276,18 +265,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -327,10 +313,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -338,13 +321,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -352,12 +329,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -365,24 +337,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -416,7 +380,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -428,12 +391,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/smbfs/helpers/include/stamp-h.in mc-4.8.24/src/vfs/smbfs/helpers/include/stamp-h.in
--- mc-4.8.23/src/vfs/smbfs/helpers/include/stamp-h.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/src/vfs/smbfs/helpers/include/stamp-h.in	2020-01-19 01:43:05.000000000 +0400
@@ -1 +1 @@
-Sat 22 Jun 2019 11:44:15 AM UTC
+Sat 18 Jan 2020 09:43:05 PM UTC
diff -urpN mc-4.8.23/src/vfs/smbfs/smbfs.c mc-4.8.24/src/vfs/smbfs/smbfs.c
--- mc-4.8.23/src/vfs/smbfs/smbfs.c	2019-06-22 15:08:02.000000000 +0400
+++ mc-4.8.24/src/vfs/smbfs/smbfs.c	2020-01-01 19:52:34.000000000 +0400
@@ -224,12 +224,7 @@ smbfs_auth_free (struct smb_authinfo con
 static void
 smbfs_auth_free_all (void)
 {
-    if (auth_list)
-    {
-        g_slist_foreach (auth_list, (GFunc) smbfs_auth_free, 0);
-        g_slist_free (auth_list);
-        auth_list = 0;
-    }
+    g_clear_slist (&auth_list, (GDestroyNotify) smbfs_auth_free);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -2258,7 +2253,7 @@ vfs_init_smbfs (void)
     /* NULLize vfs_s_subclass members */
     memset (&smbfs_subclass, 0, sizeof (smbfs_subclass));
 
-    vfs_init_class (vfs_smbfs_ops, "smbfs", VFS_NOLINKS, "smb");
+    vfs_init_class (vfs_smbfs_ops, "smbfs", VFSF_NOLINKS, "smb");
     vfs_smbfs_ops->init = smbfs_init;
     vfs_smbfs_ops->fill_names = smbfs_fill_names;
     vfs_smbfs_ops->open = smbfs_open;
diff -urpN mc-4.8.23/src/vfs/tar/Makefile.in mc-4.8.24/src/vfs/tar/Makefile.in
--- mc-4.8.23/src/vfs/tar/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/tar/Makefile.in	2020-01-19 01:43:04.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/tar
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -227,7 +217,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -235,18 +224,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -286,10 +272,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -297,13 +280,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -311,12 +288,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -324,24 +296,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -375,7 +339,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -387,12 +350,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/tar/tar.c mc-4.8.24/src/vfs/tar/tar.c
--- mc-4.8.23/src/vfs/tar/tar.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/tar/tar.c	2020-01-01 19:52:34.000000000 +0400
@@ -993,7 +993,7 @@ void
 vfs_init_tarfs (void)
 {
     /* FIXME: tarfs used own temp files */
-    vfs_init_subclass (&tarfs_subclass, "tarfs", VFS_READONLY, "utar");
+    vfs_init_subclass (&tarfs_subclass, "tarfs", VFSF_READONLY, "utar");
     vfs_tarfs_ops->read = tar_read;
     vfs_tarfs_ops->setctl = NULL;
     tarfs_subclass.archive_check = tar_super_check;
diff -urpN mc-4.8.23/src/vfs/undelfs/Makefile.in mc-4.8.24/src/vfs/undelfs/Makefile.in
--- mc-4.8.23/src/vfs/undelfs/Makefile.in	2019-06-22 15:44:14.000000000 +0400
+++ mc-4.8.24/src/vfs/undelfs/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/vfs/undelfs
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -227,7 +217,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -235,18 +224,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -286,10 +272,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -297,13 +280,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -311,12 +288,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -324,24 +296,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -375,7 +339,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -387,12 +350,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/vfs/undelfs/undelfs.c mc-4.8.24/src/vfs/undelfs/undelfs.c
--- mc-4.8.23/src/vfs/undelfs/undelfs.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/vfs/undelfs/undelfs.c	2020-01-01 19:52:34.000000000 +0400
@@ -828,7 +828,7 @@ vfs_init_undelfs (void)
     /* NULLize vfs_s_subclass members */
     memset (&undelfs_subclass, 0, sizeof (undelfs_subclass));
 
-    vfs_init_class (vfs_undelfs_ops, "undelfs", VFS_UNKNOWN, "undel");
+    vfs_init_class (vfs_undelfs_ops, "undelfs", VFSF_UNKNOWN, "undel");
     vfs_undelfs_ops->init = undelfs_init;
     vfs_undelfs_ops->open = undelfs_open;
     vfs_undelfs_ops->close = undelfs_close;
diff -urpN mc-4.8.23/src/viewer/Makefile.in mc-4.8.24/src/viewer/Makefile.in
--- mc-4.8.23/src/viewer/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/src/viewer/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -90,24 +90,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = src/viewer
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -235,7 +225,6 @@ CTAGS = ctags
 am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/config/depcomp
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -243,18 +232,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -294,10 +280,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -305,13 +288,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -319,12 +296,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -332,24 +304,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -383,7 +347,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -395,12 +358,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/src/viewer/actions_cmd.c mc-4.8.24/src/viewer/actions_cmd.c
--- mc-4.8.23/src/viewer/actions_cmd.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/viewer/actions_cmd.c	2020-01-01 19:52:34.000000000 +0400
@@ -58,13 +58,14 @@
 #include "lib/charsets.h"
 #endif
 #include "lib/event.h"          /* mc_event_raise() */
+#include "lib/mcconfig.h"       /* mc_config_history_get() */
 
 #include "src/filemanager/layout.h"
-#include "src/filemanager/cmd.h"
 #include "src/filemanager/midnight.h"   /* current_panel */
 #include "src/filemanager/ext.h"        /* regex_command_for() */
 
 #include "src/history.h"
+#include "src/file_history.h"   /* show_file_history() */
 #include "src/execute.h"
 #include "src/keybind-defaults.h"
 
@@ -139,7 +140,7 @@ mcview_continue_search_cmd (WView * view
         /* find last search string in history */
         GList *history;
 
-        history = history_get (MC_HISTORY_SHARED_SEARCH);
+        history = mc_config_history_get (MC_HISTORY_SHARED_SEARCH);
         if (history != NULL && history->data != NULL)
         {
             view->last_search_string = (gchar *) g_strdup (history->data);
@@ -299,30 +300,39 @@ mcview_load_next_prev_init (WView * view
 
         /* TODO: check mtime of directory to reload it */
 
-        const char *fname;
-        size_t fname_len;
-        int i;
         dir_sort_options_t sort_op = { FALSE, TRUE, FALSE };
 
         /* load directory where requested file is */
         view->dir = g_new0 (dir_list, 1);
         view->dir_idx = g_new (int, 1);
 
-        dir_list_load (view->dir, view->workdir_vpath, (GCompareFunc) sort_name, &sort_op, NULL);
+        if (dir_list_load
+            (view->dir, view->workdir_vpath, (GCompareFunc) sort_name, &sort_op, NULL))
+        {
+            const char *fname;
+            size_t fname_len;
+            int i;
 
-        fname = x_basename (vfs_path_as_str (view->filename_vpath));
-        fname_len = strlen (fname);
+            fname = x_basename (vfs_path_as_str (view->filename_vpath));
+            fname_len = strlen (fname);
 
-        /* search current file in the list */
-        for (i = 0; i != view->dir->len; i++)
-        {
-            const file_entry_t *fe = &view->dir->list[i];
+            /* search current file in the list */
+            for (i = 0; i != view->dir->len; i++)
+            {
+                const file_entry_t *fe = &view->dir->list[i];
 
-            if (fname_len == fe->fnamelen && strncmp (fname, fe->fname, fname_len) == 0)
-                break;
-        }
+                if (fname_len == fe->fnamelen && strncmp (fname, fe->fname, fname_len) == 0)
+                    break;
+            }
 
-        *view->dir_idx = i;
+            *view->dir_idx = i;
+        }
+        else
+        {
+            message (D_ERROR, MSG_ERROR, _("Cannot read directory contents"));
+            MC_PTR_FREE (view->dir);
+            MC_PTR_FREE (view->dir_idx);
+        }
     }
 }
 
@@ -381,6 +391,30 @@ mcview_load_next_prev (WView * view, int
 
 /* --------------------------------------------------------------------------------------------- */
 
+static void
+mcview_load_file_from_history (WView * view)
+{
+    char *filename;
+    int action;
+
+    filename = show_file_history (CONST_WIDGET (view), &action);
+
+    if (filename != NULL && (action == CK_View || action == CK_Enter))
+    {
+        mcview_done (view);
+        mcview_init (view);
+
+        mcview_load (view, NULL, filename, 0, 0, 0);
+
+        view->dpy_bbar_dirty = FALSE;   /* FIXME */
+        view->dirty++;
+    }
+
+    g_free (filename);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 static cb_ret_t
 mcview_execute_cmd (WView * view, long command)
 {
@@ -512,7 +546,7 @@ mcview_execute_cmd (WView * view, long c
         mcview_moveto_bottom (view);
         break;
     case CK_Shell:
-        view_other_cmd ();
+        toggle_subshell ();
         break;
     case CK_Ruler:
         mcview_display_toggle_ruler (view);
@@ -538,6 +572,9 @@ mcview_execute_cmd (WView * view, long c
         if (!mcview_is_in_panel (view))
             mcview_load_next_prev (view, command == CK_FileNext ? 1 : -1);
         break;
+    case CK_History:
+        mcview_load_file_from_history (view);
+        break;
     case CK_Quit:
         if (!mcview_is_in_panel (view))
             dlg_stop (WIDGET (view)->owner);
@@ -594,18 +631,8 @@ mcview_handle_key (WView * view, int key
 /* --------------------------------------------------------------------------------------------- */
 
 static inline void
-mcview_adjust_size (WDialog * h)
+mcview_resize (WView * view)
 {
-    WView *view;
-    WButtonBar *b;
-
-    /* Look up the viewer and the buttonbar, we assume only two widgets here */
-    view = (WView *) find_widget_type (h, mcview_callback);
-    b = find_buttonbar (h);
-
-    widget_set_size (WIDGET (view), 0, 0, LINES - 1, COLS);
-    widget_set_size (WIDGET (b), LINES - 1, 0, 1, COLS);
-
     view->dpy_wrap_dirty = TRUE;
     mcview_compute_areas (view);
     mcview_update_bytes_per_line (view);
@@ -697,6 +724,10 @@ mcview_callback (Widget * w, Widget * se
         mcview_update (view);
         return MSG_HANDLED;
 
+    case MSG_RESIZE:
+        mcview_resize (view);
+        return MSG_HANDLED;
+
     case MSG_DESTROY:
         if (mcview_is_in_panel (view))
         {
@@ -745,10 +776,6 @@ mcview_dialog_callback (Widget * w, Widg
 
     switch (msg)
     {
-    case MSG_RESIZE:
-        mcview_adjust_size (h);
-        return MSG_HANDLED;
-
     case MSG_ACTION:
         /* Handle shortcuts. */
 
diff -urpN mc-4.8.23/src/viewer/ascii.c mc-4.8.24/src/viewer/ascii.c
--- mc-4.8.23/src/viewer/ascii.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/viewer/ascii.c	2020-01-01 19:52:34.000000000 +0400
@@ -680,7 +680,7 @@ mcview_display_line (WView * view, mcvie
             {
                 /* The combining character sequence fits entirely in the viewport. Print it. */
                 tty_setcolor (color);
-                widget_move (view, top + row, left + ((off_t) col - dpy_text_column));
+                widget_gotoyx (view, top + row, left + ((off_t) col - dpy_text_column));
                 if (cs[0] == '\t')
                 {
                     for (i = 0; i < charwidth; i++)
@@ -708,7 +708,7 @@ mcview_display_line (WView * view, mcvie
                 for (i = dpy_text_column;
                      i < (off_t) col + charwidth && i < dpy_text_column + (off_t) width; i++)
                 {
-                    widget_move (view, top + row, left + (i - dpy_text_column));
+                    widget_gotoyx (view, top + row, left + (i - dpy_text_column));
                     tty_print_anychar ((cs[0] == '\t') ? ' ' : PARTIAL_CJK_AT_LEFT_MARGIN);
                 }
             }
@@ -721,7 +721,7 @@ mcview_display_line (WView * view, mcvie
                 tty_setcolor (color);
                 for (i = col; i < dpy_text_column + (off_t) width; i++)
                 {
-                    widget_move (view, top + row, left + (i - dpy_text_column));
+                    widget_gotoyx (view, top + row, left + (i - dpy_text_column));
                     tty_print_anychar ((cs[0] == '\t') ? ' ' : PARTIAL_CJK_AT_RIGHT_MARGIN);
                 }
             }
@@ -906,7 +906,7 @@ mcview_display_text (WView * view)
     if (mcview_show_eof != NULL && mcview_show_eof[0] != '\0')
         while (row < (int) height)
         {
-            widget_move (view, top + row, left);
+            widget_gotoyx (view, top + row, left);
             /* TODO: should make it no wider than the viewport */
             tty_print_string (mcview_show_eof);
             row++;
diff -urpN mc-4.8.23/src/viewer/display.c mc-4.8.24/src/viewer/display.c
--- mc-4.8.23/src/viewer/display.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/viewer/display.c	2020-01-01 19:52:34.000000000 +0400
@@ -133,10 +133,10 @@ mcview_display_percent (WView * view, of
         const screen_dimen top = view->status_area.top;
         const screen_dimen right = view->status_area.left + view->status_area.width;
 
-        widget_move (view, top, right - 4);
+        widget_gotoyx (view, top, right - 4);
         tty_printf ("%3d%%", percent);
         /* avoid cursor wrapping in NCurses-base MC */
-        widget_move (view, top, right - 1);
+        widget_gotoyx (view, top, right - 1);
     }
 }
 
@@ -164,7 +164,7 @@ mcview_display_status (WView * view)
 
     if (width > 40)
     {
-        widget_move (view, top, width - 32);
+        widget_gotoyx (view, top, width - 32);
         if (view->mode_flags.hex)
             tty_printf ("0x%08" PRIxMAX, (uintmax_t) view->hex_cursor);
         else
@@ -182,7 +182,7 @@ mcview_display_status (WView * view)
                         "");
         }
     }
-    widget_move (view, top, left);
+    widget_gotoyx (view, top, left);
     if (width > 40)
         tty_print_string (str_fit_to_term (file_label, width - 34, J_LEFT_FIT));
     else
@@ -204,7 +204,7 @@ mcview_update (WView * view)
     {
         view->dpy_bbar_dirty = FALSE;
         mcview_set_buttonbar (view);
-        widget_redraw (WIDGET (find_buttonbar (WIDGET (view)->owner)));
+        widget_draw (WIDGET (find_buttonbar (WIDGET (view)->owner)));
     }
 
     if (view->dirty > dirt_limit)
@@ -384,7 +384,7 @@ mcview_display_ruler (WView * view)
         cl = view->dpy_text_column + c;
         if (line_row < height)
         {
-            widget_move (view, top + line_row, left + c);
+            widget_gotoyx (view, top + line_row, left + c);
             tty_print_char (ruler_chars[cl % 10]);
         }
 
@@ -393,7 +393,7 @@ mcview_display_ruler (WView * view)
             g_snprintf (r_buff, sizeof (r_buff), "%" PRIuMAX, (uintmax_t) cl);
             if (nums_row < height)
             {
-                widget_move (view, top + nums_row, left + c - 1);
+                widget_gotoyx (view, top + nums_row, left + c - 1);
                 tty_print_string (r_buff);
             }
         }
diff -urpN mc-4.8.23/src/viewer/hex.c mc-4.8.24/src/viewer/hex.c
--- mc-4.8.23/src/viewer/hex.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/viewer/hex.c	2020-01-01 19:52:34.000000000 +0400
@@ -160,7 +160,7 @@ mcview_display_hex (WView * view)
             size_t i;
 
             g_snprintf (hex_buff, sizeof (hex_buff), "%08" PRIXMAX " ", (uintmax_t) from);
-            widget_move (view, top + row, left);
+            widget_gotoyx (view, top + row, left);
             tty_setcolor (VIEW_BOLD_COLOR);
             for (i = 0; col < width && hex_buff[i] != '\0'; col++, i++)
                 tty_print_char (hex_buff[i]);
@@ -276,7 +276,7 @@ mcview_display_hex (WView * view)
                           view->hexview_in_text ? VIEW_SELECTED_COLOR : VIEW_UNDERLINED_COLOR);
 
             /* Print the hex number */
-            widget_move (view, top + row, left + col);
+            widget_gotoyx (view, top + row, left + col);
             if (col < width)
             {
                 tty_print_char (hex_char[c / 16]);
@@ -349,7 +349,7 @@ mcview_display_hex (WView * view)
             /* Print corresponding character on the text side */
             if (text_start + bytes < width)
             {
-                widget_move (view, top + row, left + text_start + bytes);
+                widget_gotoyx (view, top + row, left + text_start + bytes);
 #ifdef HAVE_CHARSET
                 if (view->utf8)
                     tty_print_anychar (ch);
diff -urpN mc-4.8.23/src/viewer/internal.h mc-4.8.24/src/viewer/internal.h
--- mc-4.8.23/src/viewer/internal.h	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/viewer/internal.h	2020-01-01 19:52:34.000000000 +0400
@@ -301,8 +301,10 @@ void mcview_toggle_nroff_mode (WView * v
 void mcview_toggle_hex_mode (WView * view);
 void mcview_init (WView * view);
 void mcview_done (WView * view);
+#ifdef HAVE_CHARSET
 void mcview_select_encoding (WView * view);
 void mcview_set_codeset (WView * view);
+#endif
 void mcview_show_error (WView * view, const char *error);
 off_t mcview_bol (WView * view, off_t current, off_t limit);
 off_t mcview_eol (WView * view, off_t current);
diff -urpN mc-4.8.23/src/viewer/lib.c mc-4.8.24/src/viewer/lib.c
--- mc-4.8.23/src/viewer/lib.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/viewer/lib.c	2020-01-01 19:52:34.000000000 +0400
@@ -257,10 +257,10 @@ mcview_done (WView * view)
 
 /* --------------------------------------------------------------------------------------------- */
 
+#ifdef HAVE_CHARSET
 void
 mcview_set_codeset (WView * view)
 {
-#ifdef HAVE_CHARSET
     const char *cp_id = NULL;
 
     view->utf8 = TRUE;
@@ -280,21 +280,17 @@ mcview_set_codeset (WView * view)
         view->utf8 = (gboolean) str_isutf8 (cp_id);
         view->dpy_wrap_dirty = TRUE;
     }
-#else
-    (void) view;
-#endif
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-#ifdef HAVE_CHARSET
 void
 mcview_select_encoding (WView * view)
 {
     if (do_select_codepage ())
         mcview_set_codeset (view);
 }
-#endif
+#endif /* HAVE_CHARSET */
 
 /* --------------------------------------------------------------------------------------------- */
 
diff -urpN mc-4.8.23/src/viewer/mcviewer.c mc-4.8.24/src/viewer/mcviewer.c
--- mc-4.8.23/src/viewer/mcviewer.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/viewer/mcviewer.c	2020-01-01 19:52:34.000000000 +0400
@@ -43,7 +43,7 @@
 #include "lib/util.h"           /* load_file_position() */
 #include "lib/widget.h"
 
-#include "src/filemanager/layout.h"     /* menubar_visible */
+#include "src/filemanager/layout.h"
 #include "src/filemanager/midnight.h"   /* the_menubar */
 
 #include "internal.h"
@@ -234,16 +234,19 @@ mcview_viewer (const char *command, cons
     gboolean succeeded;
     WView *lc_mcview;
     WDialog *view_dlg;
+    Widget *vw, *b;
 
     /* Create dialog and widgets, put them on the dialog */
     view_dlg = dlg_create (FALSE, 0, 0, 1, 1, WPOS_FULLSCREEN, FALSE, NULL, mcview_dialog_callback,
                            NULL, "[Internal File Viewer]", NULL);
-    widget_want_tab (WIDGET (view_dlg), TRUE);
+    vw = WIDGET (view_dlg);
+    widget_want_tab (vw, TRUE);
 
-    lc_mcview = mcview_new (0, 0, LINES - 1, COLS, FALSE);
-    add_widget (view_dlg, lc_mcview);
+    lc_mcview = mcview_new (vw->y, vw->x, vw->lines - 1, vw->cols, FALSE);
+    add_widget_autopos (view_dlg, lc_mcview, WPOS_KEEP_ALL, NULL);
 
-    add_widget (view_dlg, buttonbar_new (TRUE));
+    b = WIDGET (buttonbar_new (TRUE));
+    add_widget_autopos (view_dlg, b, b->pos_flags, NULL);
 
     view_dlg->get_title = mcview_get_title;
 
@@ -256,7 +259,7 @@ mcview_viewer (const char *command, cons
     else
         dlg_stop (view_dlg);
 
-    if (widget_get_state (WIDGET (view_dlg), WST_CLOSED))
+    if (widget_get_state (vw, WST_CLOSED))
         dlg_destroy (view_dlg);
 
     return succeeded;
@@ -306,7 +309,9 @@ mcview_load (WView * view, const char *c
     if (!mcview_is_in_panel (view))
         view->dpy_text_column = 0;
 
+#ifdef HAVE_CHARSET
     mcview_set_codeset (view);
+#endif
 
     if (command != NULL && (view->mode_flags.magic || file == NULL || file[0] == '\0'))
         retval = mcview_load_command_output (view, command);
diff -urpN mc-4.8.23/src/viewer/move.c mc-4.8.24/src/viewer/move.c
--- mc-4.8.23/src/viewer/move.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/src/viewer/move.c	2020-01-01 19:52:34.000000000 +0400
@@ -382,7 +382,7 @@ mcview_place_cursor (WView * view)
     screen_dimen col = view->cursor_col;
     if (!view->hexview_in_text && view->hexedit_lownibble)
         col++;
-    widget_move (view, top + view->cursor_row, left + col);
+    widget_gotoyx (view, top + view->cursor_row, left + col);
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/tests/Makefile.in mc-4.8.24/tests/Makefile.in
--- mc-4.8.23/tests/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -89,24 +89,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = tests
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -237,7 +227,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -245,18 +234,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -296,10 +282,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -307,13 +290,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -321,12 +298,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -334,24 +306,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -385,7 +349,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -397,12 +360,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/lib/Makefile.in mc-4.8.24/tests/lib/Makefile.in
--- mc-4.8.23/tests/lib/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/lib/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -98,24 +98,14 @@ TESTS = library_independ$(EXEEXT) mc_bui
 check_PROGRAMS = $(am__EXEEXT_2)
 subdir = tests/lib
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -532,7 +522,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -540,18 +529,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -591,10 +577,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -602,13 +585,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -616,12 +593,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -629,24 +601,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -680,7 +644,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -692,12 +655,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/lib/mcconfig/Makefile.in mc-4.8.24/tests/lib/mcconfig/Makefile.in
--- mc-4.8.23/tests/lib/mcconfig/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/lib/mcconfig/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -92,24 +92,14 @@ TESTS = config_string$(EXEEXT) user_conf
 check_PROGRAMS = $(am__EXEEXT_1)
 subdir = tests/lib/mcconfig
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -438,7 +428,6 @@ am__DIST_COMMON = $(srcdir)/Makefile.in
 	$(top_srcdir)/config/test-driver
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -446,18 +435,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -497,10 +483,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -508,13 +491,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -522,12 +499,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -535,24 +507,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -586,7 +550,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -598,12 +561,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/lib/search/Makefile.in mc-4.8.24/tests/lib/search/Makefile.in
--- mc-4.8.23/tests/lib/search/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/lib/search/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -96,24 +96,14 @@ TESTS = glob_prepare_replace_str$(EXEEXT
 check_PROGRAMS = $(am__EXEEXT_1)
 subdir = tests/lib/search
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -480,7 +470,6 @@ am__DIST_COMMON = $(srcdir)/Makefile.in
 	$(top_srcdir)/config/test-driver
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -488,18 +477,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -539,10 +525,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -550,13 +533,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -564,12 +541,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -577,25 +549,17 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la @PCRE_LIBS@ \
 	$(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -629,7 +593,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -641,12 +604,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/lib/strutil/Makefile.in mc-4.8.24/tests/lib/strutil/Makefile.in
--- mc-4.8.23/tests/lib/strutil/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/lib/strutil/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -93,24 +93,14 @@ TESTS = replace__str_replace_all$(EXEEXT
 check_PROGRAMS = $(am__EXEEXT_1)
 subdir = tests/lib/strutil
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -453,7 +443,6 @@ am__DIST_COMMON = $(srcdir)/Makefile.in
 	$(top_srcdir)/config/test-driver
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -461,18 +450,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -512,10 +498,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -523,13 +506,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -537,12 +514,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -550,24 +522,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -601,7 +565,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -613,12 +576,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/lib/vfs/Makefile.in mc-4.8.24/tests/lib/vfs/Makefile.in
--- mc-4.8.23/tests/lib/vfs/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -102,24 +102,14 @@ TESTS = canonicalize_pathname$(EXEEXT) c
 check_PROGRAMS = $(am__EXEEXT_2)
 subdir = tests/lib/vfs
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -537,7 +527,6 @@ am__DIST_COMMON = $(srcdir)/Makefile.in
 	$(top_srcdir)/config/test-driver
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -545,18 +534,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -596,10 +582,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -607,13 +590,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -621,12 +598,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -634,24 +606,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -685,7 +649,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -697,12 +660,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/lib/vfs/canonicalize_pathname.c mc-4.8.24/tests/lib/vfs/canonicalize_pathname.c
--- mc-4.8.23/tests/lib/vfs/canonicalize_pathname.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/canonicalize_pathname.c	2020-01-01 19:52:34.000000000 +0400
@@ -56,7 +56,7 @@ setup (void)
     load_codepages_list ();
 #endif
 
-    vfs_init_class (&vfs_test_ops, "testfs", VFS_NOLINKS | VFS_REMOTE, "ftp");
+    vfs_init_class (&vfs_test_ops, "testfs", VFSF_NOLINKS | VFSF_REMOTE, "ftp");
     vfs_register_class (&vfs_test_ops);
 }
 
diff -urpN mc-4.8.23/tests/lib/vfs/current_dir.c mc-4.8.24/tests/lib/vfs/current_dir.c
--- mc-4.8.23/tests/lib/vfs/current_dir.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/current_dir.c	2020-01-01 19:52:34.000000000 +0400
@@ -62,7 +62,7 @@ setup (void)
     vfs_setup_work_dir ();
 
     memset (&vfs_test_subclass, 0, sizeof (vfs_test_subclass));
-    vfs_init_class (vfs_test_ops, "testfs", VFS_UNKNOWN, "test");
+    vfs_init_class (vfs_test_ops, "testfs", VFSF_UNKNOWN, "test");
     vfs_test_ops->chdir = test_chdir;
 }
 
@@ -92,55 +92,55 @@ static const struct test_cd_ds
     { /* 0. */
         "/",
         "/dev/some.file/test://",
-        VFS_NOLINKS,
+        VFSF_NOLINKS,
         "/dev/some.file/test://"
     },
     { /* 1. */
         "/",
         "/dev/some.file/test://bla-bla",
-        VFS_NOLINKS,
+        VFSF_NOLINKS,
         "/dev/some.file/test://bla-bla"
     },
     { /* 2. */
         "/dev/some.file/test://bla-bla",
         "..",
-        VFS_NOLINKS,
+        VFSF_NOLINKS,
         "/dev/some.file/test://"
     },
     { /* 3. */
         "/dev/some.file/test://",
         "..",
-        VFS_NOLINKS,
+        VFSF_NOLINKS,
         "/dev"
     },
     { /* 4. */
         "/dev",
         "..",
-        VFS_NOLINKS,
+        VFSF_NOLINKS,
         "/"
     },
     { /* 5. */
         "/",
         "..",
-        VFS_NOLINKS,
+        VFSF_NOLINKS,
         "/"
     },
     { /* 6. */
         "/",
         "/test://user:pass@host.net/path",
-        VFS_NOLINKS | VFS_REMOTE,
+        VFSF_NOLINKS | VFSF_REMOTE,
         "/test://user:pass@host.net/path"
     },
     { /* 7. */
         "/test://user:pass@host.net/path",
         "..",
-        VFS_NOLINKS | VFS_REMOTE,
+        VFSF_NOLINKS | VFSF_REMOTE,
         "/test://user:pass@host.net/"
     },
     { /* 8. */
         "/test://user:pass@host.net/",
         "..",
-        VFS_NOLINKS | VFS_REMOTE,
+        VFSF_NOLINKS | VFSF_REMOTE,
         "/"
     },
 };
diff -urpN mc-4.8.23/tests/lib/vfs/path_manipulations.c mc-4.8.24/tests/lib/vfs/path_manipulations.c
--- mc-4.8.23/tests/lib/vfs/path_manipulations.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/path_manipulations.c	2020-01-01 19:52:34.000000000 +0400
@@ -44,13 +44,13 @@ static struct vfs_class vfs_test_ops1, v
 static void
 init_test_classes (void)
 {
-    vfs_init_class (&vfs_test_ops1, "testfs1", VFS_NOLINKS | VFS_REMOTE, "test1");
+    vfs_init_class (&vfs_test_ops1, "testfs1", VFSF_NOLINKS | VFSF_REMOTE, "test1");
     vfs_register_class (&vfs_test_ops1);
 
-    vfs_init_class (&vfs_test_ops2, "testfs2", VFS_UNKNOWN, "test2");
+    vfs_init_class (&vfs_test_ops2, "testfs2", VFSF_UNKNOWN, "test2");
     vfs_register_class (&vfs_test_ops2);
 
-    vfs_init_class (&vfs_test_ops3, "testfs3", VFS_LOCAL, "test3");
+    vfs_init_class (&vfs_test_ops3, "testfs3", VFSF_LOCAL, "test3");
     vfs_register_class (&vfs_test_ops3);
 }
 
diff -urpN mc-4.8.23/tests/lib/vfs/path_recode.c mc-4.8.24/tests/lib/vfs/path_recode.c
--- mc-4.8.23/tests/lib/vfs/path_recode.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/path_recode.c	2020-01-01 19:52:34.000000000 +0400
@@ -244,7 +244,7 @@ START_PARAMETRIZED_TEST (test_path_to_st
 
     test_init_vfs ("UTF-8");
 
-    vfs_init_class (&vfs_test_ops1, "testfs1", VFS_NOLINKS | VFS_REMOTE, "test1");
+    vfs_init_class (&vfs_test_ops1, "testfs1", VFSF_NOLINKS | VFSF_REMOTE, "test1");
     vfs_register_class (&vfs_test_ops1);
 
     /* when */
diff -urpN mc-4.8.23/tests/lib/vfs/path_serialize.c mc-4.8.24/tests/lib/vfs/path_serialize.c
--- mc-4.8.23/tests/lib/vfs/path_serialize.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/path_serialize.c	2020-01-01 19:52:34.000000000 +0400
@@ -51,13 +51,13 @@ setup (void)
     vfs_init_localfs ();
     vfs_setup_work_dir ();
 
-    vfs_init_class (&vfs_test_ops1, "testfs1", VFS_NOLINKS | VFS_REMOTE, "test1");
+    vfs_init_class (&vfs_test_ops1, "testfs1", VFSF_NOLINKS | VFSF_REMOTE, "test1");
     vfs_register_class (&vfs_test_ops1);
 
-    vfs_init_class (&vfs_test_ops2, "testfs2", VFS_UNKNOWN, "test2");
+    vfs_init_class (&vfs_test_ops2, "testfs2", VFSF_UNKNOWN, "test2");
     vfs_register_class (&vfs_test_ops2);
 
-    vfs_init_class (&vfs_test_ops3, "testfs3", VFS_UNKNOWN, "test3");
+    vfs_init_class (&vfs_test_ops3, "testfs3", VFSF_UNKNOWN, "test3");
     vfs_register_class (&vfs_test_ops3);
 
     mc_global.sysconfig_dir = (char *) TEST_SHARE_DIR;
diff -urpN mc-4.8.23/tests/lib/vfs/relative_cd.c mc-4.8.24/tests/lib/vfs/relative_cd.c
--- mc-4.8.23/tests/lib/vfs/relative_cd.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/relative_cd.c	2020-01-01 19:52:34.000000000 +0400
@@ -80,7 +80,7 @@ setup (void)
     vfs_setup_work_dir ();
 
     memset (&vfs_test_subclass1, 0, sizeof (vfs_test_subclass1));
-    vfs_init_class (vfs_test_ops1, "testfs1", VFS_NOLINKS | VFS_REMOTE, "test1");
+    vfs_init_class (vfs_test_ops1, "testfs1", VFSF_NOLINKS | VFSF_REMOTE, "test1");
     vfs_test_ops1->chdir = test_chdir;
     vfs_register_class (vfs_test_ops1);
 
diff -urpN mc-4.8.23/tests/lib/vfs/vfs_parse_ls_lga.c mc-4.8.24/tests/lib/vfs/vfs_parse_ls_lga.c
--- mc-4.8.23/tests/lib/vfs/vfs_parse_ls_lga.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/vfs_parse_ls_lga.c	2020-01-01 19:52:34.000000000 +0400
@@ -61,7 +61,7 @@ setup (void)
     vfs_init_localfs ();
     vfs_setup_work_dir ();
 
-    vfs_init_subclass (&test_subclass1, "testfs1", VFS_NOLINKS | VFS_REMOTE, "test1");
+    vfs_init_subclass (&test_subclass1, "testfs1", VFSF_NOLINKS | VFSF_REMOTE, "test1");
     vfs_register_class (vfs_test_ops1);
 
     vfs_test_super = g_new0 (struct vfs_s_super, 1);
diff -urpN mc-4.8.23/tests/lib/vfs/vfs_path_string_convert.c mc-4.8.24/tests/lib/vfs/vfs_path_string_convert.c
--- mc-4.8.23/tests/lib/vfs/vfs_path_string_convert.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/vfs_path_string_convert.c	2020-01-01 19:52:34.000000000 +0400
@@ -54,13 +54,13 @@ setup (void)
     vfs_init_localfs ();
     vfs_setup_work_dir ();
 
-    vfs_init_class (&vfs_test_ops1, "testfs1", VFS_NOLINKS, "test1");
+    vfs_init_class (&vfs_test_ops1, "testfs1", VFSF_NOLINKS, "test1");
     vfs_register_class (&vfs_test_ops1);
 
-    vfs_init_class (&vfs_test_ops2, "testfs2", VFS_REMOTE, "test2");
+    vfs_init_class (&vfs_test_ops2, "testfs2", VFSF_REMOTE, "test2");
     vfs_register_class (&vfs_test_ops2);
 
-    vfs_init_class (&vfs_test_ops3, "testfs3", VFS_UNKNOWN, "test3");
+    vfs_init_class (&vfs_test_ops3, "testfs3", VFSF_UNKNOWN, "test3");
     vfs_register_class (&vfs_test_ops3);
 
 #ifdef HAVE_CHARSET
diff -urpN mc-4.8.23/tests/lib/vfs/vfs_prefix_to_class.c mc-4.8.24/tests/lib/vfs/vfs_prefix_to_class.c
--- mc-4.8.23/tests/lib/vfs/vfs_prefix_to_class.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/vfs_prefix_to_class.c	2020-01-01 19:52:34.000000000 +0400
@@ -61,14 +61,14 @@ setup (void)
     vfs_init_localfs ();
     vfs_setup_work_dir ();
 
-    vfs_init_class (&vfs_test_ops1, "testfs1", VFS_NOLINKS | VFS_REMOTE, "test1");
+    vfs_init_class (&vfs_test_ops1, "testfs1", VFSF_NOLINKS | VFSF_REMOTE, "test1");
     vfs_test_ops1.which = test_which;
     vfs_register_class (&vfs_test_ops1);
 
-    vfs_init_class (&vfs_test_ops2, "testfs2", VFS_UNKNOWN, "test2");
+    vfs_init_class (&vfs_test_ops2, "testfs2", VFSF_UNKNOWN, "test2");
     vfs_register_class (&vfs_test_ops2);
 
-    vfs_init_class (&vfs_test_ops3, "testfs3", VFS_UNKNOWN, "test3");
+    vfs_init_class (&vfs_test_ops3, "testfs3", VFSF_UNKNOWN, "test3");
     vfs_register_class (&vfs_test_ops3);
 }
 
diff -urpN mc-4.8.23/tests/lib/vfs/vfs_s_get_path.c mc-4.8.24/tests/lib/vfs/vfs_s_get_path.c
--- mc-4.8.23/tests/lib/vfs/vfs_s_get_path.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/vfs_s_get_path.c	2020-01-01 19:52:34.000000000 +0400
@@ -88,16 +88,16 @@ setup (void)
     vfs_init_localfs ();
     vfs_setup_work_dir ();
 
-    vfs_init_subclass (&test_subclass1, "testfs1", VFS_NOLINKS | VFS_REMOTE, "test1");
+    vfs_init_subclass (&test_subclass1, "testfs1", VFSF_NOLINKS | VFSF_REMOTE, "test1");
     test_subclass1.open_archive = test1_mock_open_archive;
     test_subclass1.archive_same = test1_mock_archive_same;
     test_subclass1.archive_check = NULL;
     vfs_register_class (vfs_test_ops1);
 
-    vfs_init_subclass (&test_subclass2, "testfs2", VFS_UNKNOWN, "test2");
+    vfs_init_subclass (&test_subclass2, "testfs2", VFSF_UNKNOWN, "test2");
     vfs_register_class (vfs_test_ops2);
 
-    vfs_init_subclass (&test_subclass3, "testfs3", VFS_UNKNOWN, "test3");
+    vfs_init_subclass (&test_subclass3, "testfs3", VFSF_UNKNOWN, "test3");
     vfs_register_class (vfs_test_ops3);
 }
 
diff -urpN mc-4.8.23/tests/lib/vfs/vfs_split.c mc-4.8.24/tests/lib/vfs/vfs_split.c
--- mc-4.8.23/tests/lib/vfs/vfs_split.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/vfs/vfs_split.c	2020-01-01 19:52:34.000000000 +0400
@@ -47,13 +47,13 @@ setup (void)
     vfs_init_localfs ();
     vfs_setup_work_dir ();
 
-    vfs_init_class (&vfs_test_ops1, "testfs1", VFS_NOLINKS | VFS_REMOTE, "test1");
+    vfs_init_class (&vfs_test_ops1, "testfs1", VFSF_NOLINKS | VFSF_REMOTE, "test1");
     vfs_register_class (&vfs_test_ops1);
 
-    vfs_init_class (&vfs_test_ops2, "testfs2", VFS_UNKNOWN, "test2");
+    vfs_init_class (&vfs_test_ops2, "testfs2", VFSF_UNKNOWN, "test2");
     vfs_register_class (&vfs_test_ops2);
 
-    vfs_init_class (&vfs_test_ops3, "testfs3", VFS_UNKNOWN, "test3");
+    vfs_init_class (&vfs_test_ops3, "testfs3", VFSF_UNKNOWN, "test3");
     vfs_register_class (&vfs_test_ops3);
 }
 
diff -urpN mc-4.8.23/tests/lib/widget/Makefile.am mc-4.8.24/tests/lib/widget/Makefile.am
--- mc-4.8.23/tests/lib/widget/Makefile.am	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/lib/widget/Makefile.am	2020-01-01 19:52:34.000000000 +0400
@@ -16,9 +16,13 @@ LIBS += $(GLIB_LIBS)
 endif
 
 TESTS = \
-	complete_engine
+	complete_engine \
+	hotkey_equal
 
 check_PROGRAMS = $(TESTS)
 
 complete_engine_SOURCES = \
 	complete_engine.c
+
+hotkey_equal_SOURCES = \
+	hotkey_equal.c
diff -urpN mc-4.8.23/tests/lib/widget/Makefile.in mc-4.8.24/tests/lib/widget/Makefile.in
--- mc-4.8.23/tests/lib/widget/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/lib/widget/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -88,28 +88,18 @@ POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
 @ENABLE_MCLIB_TRUE@am__append_1 = $(GLIB_LIBS)
-TESTS = complete_engine$(EXEEXT)
+TESTS = complete_engine$(EXEEXT) hotkey_equal$(EXEEXT)
 check_PROGRAMS = $(am__EXEEXT_1)
 subdir = tests/lib/widget
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -157,7 +147,7 @@ mkinstalldirs = $(install_sh) -d
 CONFIG_HEADER = $(top_builddir)/config.h
 CONFIG_CLEAN_FILES =
 CONFIG_CLEAN_VPATH_FILES =
-am__EXEEXT_1 = complete_engine$(EXEEXT)
+am__EXEEXT_1 = complete_engine$(EXEEXT) hotkey_equal$(EXEEXT)
 am_complete_engine_OBJECTS = complete_engine.$(OBJEXT)
 complete_engine_OBJECTS = $(am_complete_engine_OBJECTS)
 complete_engine_LDADD = $(LDADD)
@@ -165,6 +155,9 @@ AM_V_lt = $(am__v_lt_@AM_V@)
 am__v_lt_ = $(am__v_lt_@AM_DEFAULT_V@)
 am__v_lt_0 = --silent
 am__v_lt_1 = 
+am_hotkey_equal_OBJECTS = hotkey_equal.$(OBJEXT)
+hotkey_equal_OBJECTS = $(am_hotkey_equal_OBJECTS)
+hotkey_equal_LDADD = $(LDADD)
 AM_V_P = $(am__v_P_@AM_V@)
 am__v_P_ = $(am__v_P_@AM_DEFAULT_V@)
 am__v_P_0 = false
@@ -180,7 +173,8 @@ am__v_at_1 =
 DEFAULT_INCLUDES = -I.@am__isrc@ -I$(top_builddir)
 depcomp = $(SHELL) $(top_srcdir)/config/depcomp
 am__maybe_remake_depfiles = depfiles
-am__depfiles_remade = ./$(DEPDIR)/complete_engine.Po
+am__depfiles_remade = ./$(DEPDIR)/complete_engine.Po \
+	./$(DEPDIR)/hotkey_equal.Po
 am__mv = mv -f
 COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
@@ -200,8 +194,8 @@ AM_V_CCLD = $(am__v_CCLD_@AM_V@)
 am__v_CCLD_ = $(am__v_CCLD_@AM_DEFAULT_V@)
 am__v_CCLD_0 = @echo "  CCLD    " $@;
 am__v_CCLD_1 = 
-SOURCES = $(complete_engine_SOURCES)
-DIST_SOURCES = $(complete_engine_SOURCES)
+SOURCES = $(complete_engine_SOURCES) $(hotkey_equal_SOURCES)
+DIST_SOURCES = $(complete_engine_SOURCES) $(hotkey_equal_SOURCES)
 am__can_run_installinfo = \
   case $$AM_UPDATE_INFO_DIR in \
     n|no|NO) false;; \
@@ -434,7 +428,6 @@ am__DIST_COMMON = $(srcdir)/Makefile.in
 	$(top_srcdir)/config/test-driver
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -442,18 +435,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -493,10 +483,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -504,13 +491,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -518,12 +499,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -531,24 +507,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -582,7 +550,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -594,12 +561,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
@@ -674,6 +637,9 @@ AM_LDFLAGS = @TESTS_LDFLAGS@
 complete_engine_SOURCES = \
 	complete_engine.c
 
+hotkey_equal_SOURCES = \
+	hotkey_equal.c
+
 all: all-am
 
 .SUFFIXES:
@@ -721,6 +687,10 @@ complete_engine$(EXEEXT): $(complete_eng
 	@rm -f complete_engine$(EXEEXT)
 	$(AM_V_CCLD)$(LINK) $(complete_engine_OBJECTS) $(complete_engine_LDADD) $(LIBS)
 
+hotkey_equal$(EXEEXT): $(hotkey_equal_OBJECTS) $(hotkey_equal_DEPENDENCIES) $(EXTRA_hotkey_equal_DEPENDENCIES) 
+	@rm -f hotkey_equal$(EXEEXT)
+	$(AM_V_CCLD)$(LINK) $(hotkey_equal_OBJECTS) $(hotkey_equal_LDADD) $(LIBS)
+
 mostlyclean-compile:
 	-rm -f *.$(OBJEXT)
 
@@ -728,6 +698,7 @@ distclean-compile:
 	-rm -f *.tab.c
 
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/complete_engine.Po@am__quote@ # am--include-marker
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/hotkey_equal.Po@am__quote@ # am--include-marker
 
 $(am__depfiles_remade):
 	@$(MKDIR_P) $(@D)
@@ -962,6 +933,13 @@ complete_engine.log: complete_engine$(EX
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
+hotkey_equal.log: hotkey_equal$(EXEEXT)
+	@p='hotkey_equal$(EXEEXT)'; \
+	b='hotkey_equal'; \
+	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
+	--log-file $$b.log --trs-file $$b.trs \
+	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
+	"$$tst" $(AM_TESTS_FD_REDIRECT)
 .test.log:
 	@p='$<'; \
 	$(am__set_b); \
@@ -1056,6 +1034,7 @@ clean-am: clean-checkPROGRAMS clean-gene
 
 distclean: distclean-am
 		-rm -f ./$(DEPDIR)/complete_engine.Po
+	-rm -f ./$(DEPDIR)/hotkey_equal.Po
 	-rm -f Makefile
 distclean-am: clean-am distclean-compile distclean-generic \
 	distclean-tags
@@ -1102,6 +1081,7 @@ installcheck-am:
 
 maintainer-clean: maintainer-clean-am
 		-rm -f ./$(DEPDIR)/complete_engine.Po
+	-rm -f ./$(DEPDIR)/hotkey_equal.Po
 	-rm -f Makefile
 maintainer-clean-am: distclean-am maintainer-clean-generic
 
diff -urpN mc-4.8.23/tests/lib/widget/hotkey_equal.c mc-4.8.24/tests/lib/widget/hotkey_equal.c
--- mc-4.8.23/tests/lib/widget/hotkey_equal.c	1970-01-01 04:00:00.000000000 +0400
+++ mc-4.8.24/tests/lib/widget/hotkey_equal.c	2020-01-01 19:52:34.000000000 +0400
@@ -0,0 +1,175 @@
+/*
+   lib/widget - tests for hotkey comparision
+
+   Copyright (C) 2019
+   Free Software Foundation, Inc.
+
+   Written by:
+   Andrew Borodin <aborodin@vmail.ru>, 2019
+
+   This file is part of the Midnight Commander.
+
+   The Midnight Commander is free software: you can redistribute it
+   and/or modify it under the terms of the GNU General Public License as
+   published by the Free Software Foundation, either version 3 of the License,
+   or (at your option) any later version.
+
+   The Midnight Commander is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.
+
+   You should have received a copy of the GNU General Public License
+   along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ */
+
+#define TEST_SUITE_NAME "/lib/widget"
+
+#include "tests/mctest.h"
+
+#include "lib/widget.h"
+
+#define C(x) ((char *) x)
+
+/* --------------------------------------------------------------------------------------------- */
+
+/* @Before */
+static void
+setup (void)
+{
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+/* @After */
+static void
+teardown (void)
+{
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+/* @DataSource("test_hotkey_equal_ds") */
+/* *INDENT-OFF* */
+static const struct test_hotkey_equal_ds
+{
+    const hotkey_t hotkey1;
+    const hotkey_t hotkey2;
+    gboolean expected_result;
+} test_hotkey_equal_ds[] =
+{
+    /* 0 */
+    {
+        { .start = C ("abc"), .hotkey = NULL, .end = NULL },
+        { .start = C ("abc"), .hotkey = NULL, .end = NULL },
+        TRUE
+    },
+    /* 1 */
+    {
+        { .start = C (""), .hotkey = C (""), .end = C ("") },
+        { .start = C (""), .hotkey = C (""), .end = C ("") },
+        TRUE
+    },
+    /* 2 */
+    {
+        { .start = C ("abc"), .hotkey = C ("d"), .end = C ("efg") },
+        { .start = C ("abc"), .hotkey = C ("d"), .end = C ("efg") },
+        TRUE
+    },
+    /* 3 */
+    {
+        { .start = C ("abc"), .hotkey = NULL, .end = C ("efg") },
+        { .start = C ("abc"), .hotkey = NULL, .end = C ("efg") },
+        TRUE
+    },
+    /* 4 */
+    {
+        { .start = C ("abc"), .hotkey = C ("d"), .end = NULL },
+        { .start = C ("abc"), .hotkey = C ("d"), .end = NULL },
+        TRUE
+    },
+    /* 5 */
+    {
+        { .start = C ("abc"), .hotkey = C ("d"), .end = C ("efg") },
+        { .start = C ("_bc"), .hotkey = C ("d"), .end = C ("efg") },
+        FALSE
+    },
+    /* 6 */
+    {
+        { .start = C ("abc"), .hotkey = C ("d"), .end = C ("efg") },
+        { .start = C ("abc"), .hotkey = C ("_"), .end = C ("efg") },
+        FALSE
+    },
+    /* 7 */
+    {
+        { .start = C ("abc"), .hotkey = C ("d"), .end = C ("efg") },
+        { .start = C ("abc"), .hotkey = C ("d"), .end = C ("_fg") },
+        FALSE
+    },
+    /* 8 */
+    {
+        { .start = C ("abc"), .hotkey = C ("d"), .end = C ("efg") },
+        { .start = C ("adc"), .hotkey = NULL,    .end = C ("efg") },
+        FALSE
+    },
+    /* 9 */
+    {
+        { .start = C ("abc"), .hotkey = C ("d"), .end = C ("efg") },
+        { .start = C ("abc"), .hotkey = C ("d"), .end = NULL      },
+        FALSE
+    },
+    /* 10 */
+    {
+        { .start = C ("abc"), .hotkey = C ("d"), .end = C ("efg") },
+        { .start = C ("abc"), .hotkey = NULL,    .end = NULL      },
+        FALSE
+    }
+};
+/* *INDENT-ON* */
+
+/* @Test(dataSource = "test_hotkey_equal_ds") */
+/* *INDENT-OFF* */
+START_PARAMETRIZED_TEST (test_hotkey_equal,
+                         test_hotkey_equal_ds)
+/* *INDENT-ON* */
+{
+    /* given */
+    gboolean result;
+
+    /* when */
+    result = hotkey_equal (data->hotkey1, data->hotkey2);
+
+    /* then */
+    mctest_assert_int_eq (result, data->expected_result);
+}
+/* *INDENT-OFF* */
+END_PARAMETRIZED_TEST
+/* *INDENT-ON* */
+
+/* --------------------------------------------------------------------------------------------- */
+
+int
+main (void)
+{
+    int number_failed;
+
+    Suite *s = suite_create (TEST_SUITE_NAME);
+    TCase *tc_core = tcase_create ("Core");
+    SRunner *sr;
+
+    tcase_add_checked_fixture (tc_core, setup, teardown);
+
+    /* Add new tests here: *************** */
+    mctest_add_parameterized_test (tc_core, test_hotkey_equal, test_hotkey_equal_ds);
+    /* *********************************** */
+
+    suite_add_tcase (s, tc_core);
+    sr = srunner_create (s);
+    srunner_set_log (sr, "hotkey_equal.log");
+    srunner_run_all (sr, CK_ENV);
+    number_failed = srunner_ntests_failed (sr);
+    srunner_free (sr);
+    return (number_failed == 0) ? EXIT_SUCCESS : EXIT_FAILURE;
+}
+
+/* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.23/tests/src/Makefile.in mc-4.8.24/tests/src/Makefile.in
--- mc-4.8.23/tests/src/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/src/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -98,24 +98,14 @@ TESTS = execute__execute_with_vfs_arg$(E
 check_PROGRAMS = $(am__EXEEXT_1)
 subdir = tests/src
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -501,7 +491,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -509,18 +498,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -560,10 +546,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -571,13 +554,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -585,12 +562,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -598,25 +570,17 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/src/libinternal.la \
 	$(top_builddir)/lib/libmc.la $(am__append_2) $(am__append_3)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -650,7 +614,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -662,12 +625,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/src/editor/Makefile.in mc-4.8.24/tests/src/editor/Makefile.in
--- mc-4.8.23/tests/src/editor/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/src/editor/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -95,24 +95,14 @@ TESTS = editcmd__edit_complete_word_cmd$
 check_PROGRAMS = $(am__EXEEXT_1)
 subdir = tests/src/editor
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -439,7 +429,6 @@ am__DIST_COMMON = $(srcdir)/Makefile.in
 	$(top_srcdir)/config/depcomp $(top_srcdir)/config/test-driver
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -447,18 +436,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -498,10 +484,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -509,13 +492,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -523,12 +500,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -536,26 +508,18 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/src/libinternal.la \
 	$(top_builddir)/lib/libmc.la @PCRE_LIBS@ $(am__append_1) \
 	$(am__append_2)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -589,7 +553,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -601,12 +564,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/src/editor/editcmd__edit_complete_word_cmd.c mc-4.8.24/tests/src/editor/editcmd__edit_complete_word_cmd.c
--- mc-4.8.23/tests/src/editor/editcmd__edit_complete_word_cmd.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/src/editor/editcmd__edit_complete_word_cmd.c	2020-01-01 19:52:34.000000000 +0400
@@ -48,6 +48,13 @@ static WEdit *test_edit;
 /* --------------------------------------------------------------------------------------------- */
 /* @Mock */
 void
+mc_refresh (void)
+{
+}
+
+/* --------------------------------------------------------------------------------------------- */
+/* @Mock */
+void
 edit_load_syntax (WEdit * _edit, GPtrArray * _pnames, const char *_type)
 {
     (void) _edit;
diff -urpN mc-4.8.23/tests/src/execute__execute_get_external_cmd_opts_from_config.c mc-4.8.24/tests/src/execute__execute_get_external_cmd_opts_from_config.c
--- mc-4.8.23/tests/src/execute__execute_get_external_cmd_opts_from_config.c	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/src/execute__execute_get_external_cmd_opts_from_config.c	2020-01-01 19:52:34.000000000 +0400
@@ -48,7 +48,7 @@ static GPtrArray *mc_config_get_string__
 
 /* @Mock */
 gchar *
-mc_config_get_string_raw (const mc_config_t * config_ignored, const gchar * group,
+mc_config_get_string_raw (mc_config_t * config_ignored, const gchar * group,
                           const gchar * param, const gchar * default_value)
 {
     char *return_value;
diff -urpN mc-4.8.23/tests/src/filemanager/Makefile.in mc-4.8.24/tests/src/filemanager/Makefile.in
--- mc-4.8.23/tests/src/filemanager/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/src/filemanager/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -97,24 +97,14 @@ TESTS = do_cd_command$(EXEEXT) examine_c
 check_PROGRAMS = $(am__EXEEXT_1)
 subdir = tests/src/filemanager
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -463,7 +453,6 @@ am__DIST_COMMON = $(srcdir)/Makefile.in
 	$(top_srcdir)/config/test-driver
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -471,18 +460,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -522,10 +508,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -533,13 +516,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -547,12 +524,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -560,26 +532,18 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/src/libinternal.la \
 	$(top_builddir)/lib/libmc.la @PCRE_LIBS@ $(am__append_1) \
 	$(am__append_2)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -613,7 +577,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -625,12 +588,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/src/vfs/Makefile.in mc-4.8.24/tests/src/vfs/Makefile.in
--- mc-4.8.23/tests/src/vfs/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/src/vfs/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -90,24 +90,14 @@ host_triplet = @host@
 @ENABLE_VFS_EXTFS_TRUE@am__append_1 = extfs
 subdir = tests/src/vfs
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -238,7 +228,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -246,18 +235,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -297,10 +283,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -308,13 +291,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -322,12 +299,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -335,24 +307,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -386,7 +350,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -398,12 +361,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/src/vfs/extfs/Makefile.in mc-4.8.24/tests/src/vfs/extfs/Makefile.in
--- mc-4.8.23/tests/src/vfs/extfs/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/src/vfs/extfs/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -89,24 +89,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = tests/src/vfs/extfs
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -237,7 +227,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -245,18 +234,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -296,10 +282,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -307,13 +290,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -321,12 +298,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -334,24 +306,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -385,7 +349,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -397,12 +360,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/src/vfs/extfs/helpers-list/Makefile.in mc-4.8.24/tests/src/vfs/extfs/helpers-list/Makefile.in
--- mc-4.8.23/tests/src/vfs/extfs/helpers-list/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/src/vfs/extfs/helpers-list/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -91,24 +91,14 @@ host_triplet = @host@
 check_PROGRAMS = mc_parse_ls_l$(EXEEXT)
 subdir = tests/src/vfs/extfs/helpers-list
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -473,7 +463,6 @@ am__relativize = \
   done; \
   reldir="$$dir2"
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -481,18 +470,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -532,10 +518,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -543,13 +526,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -557,12 +534,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -570,24 +542,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -621,7 +585,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -633,12 +596,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/tests/src/vfs/extfs/helpers-list/data/urar.v4,v3.output mc-4.8.24/tests/src/vfs/extfs/helpers-list/data/urar.v4,v3.output
--- mc-4.8.23/tests/src/vfs/extfs/helpers-list/data/urar.v4,v3.output	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/src/vfs/extfs/helpers-list/data/urar.v4,v3.output	2020-01-01 19:52:34.000000000 +0400
@@ -1,9 +1,9 @@
-drwx------   1  <<uid>>  <<gid>>          0 2016-06-07 20:43:00 ./.dosbox
--rw-rw-r--   1  <<uid>>  <<gid>>      10730 2016-06-07 20:43:00 ./.dosbox/dosbox-0.74.conf
--rw-------   1  <<uid>>  <<gid>>      11032 2016-11-23 07:10:00 ./.viminfo
--rw-rw-r--   1  <<uid>>  <<gid>>        205 2016-10-26 13:14:00 ./.wget-hsts
--rw-rw-r--   1  <<uid>>  <<gid>>       7527 2016-04-17 01:21:00 ./.xboardrc
--rw-rw-r--   1  <<uid>>  <<gid>>        559 2016-09-29 01:08:00 ./.xchm
--rw-rw-r--   1  <<uid>>  <<gid>>        130 2015-12-27 17:08:00 ./.xinputrc
--rw-r--r--   1  <<uid>>  <<gid>>          6 2016-11-23 07:39:00 ./filename with spaces.txt
--rw-rw-r--   1  <<uid>>  <<gid>>    5869937 2016-11-23 07:43:00 ./log.txt
+drwx------   1  <<uid>>  <<gid>>          0 2016-06-07 20:43:00 .dosbox
+-rw-rw-r--   1  <<uid>>  <<gid>>      10730 2016-06-07 20:43:00 .dosbox/dosbox-0.74.conf
+-rw-------   1  <<uid>>  <<gid>>      11032 2016-11-23 07:10:00 .viminfo
+-rw-rw-r--   1  <<uid>>  <<gid>>        205 2016-10-26 13:14:00 .wget-hsts
+-rw-rw-r--   1  <<uid>>  <<gid>>       7527 2016-04-17 01:21:00 .xboardrc
+-rw-rw-r--   1  <<uid>>  <<gid>>        559 2016-09-29 01:08:00 .xchm
+-rw-rw-r--   1  <<uid>>  <<gid>>        130 2015-12-27 17:08:00 .xinputrc
+-rw-r--r--   1  <<uid>>  <<gid>>          6 2016-11-23 07:39:00 filename with spaces.txt
+-rw-rw-r--   1  <<uid>>  <<gid>>    5869937 2016-11-23 07:43:00 log.txt
diff -urpN mc-4.8.23/tests/src/vfs/extfs/helpers-list/data/urar.v5.output mc-4.8.24/tests/src/vfs/extfs/helpers-list/data/urar.v5.output
--- mc-4.8.23/tests/src/vfs/extfs/helpers-list/data/urar.v5.output	2019-06-16 21:49:31.000000000 +0400
+++ mc-4.8.24/tests/src/vfs/extfs/helpers-list/data/urar.v5.output	2020-01-01 19:52:34.000000000 +0400
@@ -1,9 +1,9 @@
-drwx------   1  <<uid>>  <<gid>>          0 2016-06-07 20:43:00 ./.dosbox
--rw-rw-r--   1  <<uid>>  <<gid>>      10730 2016-06-07 20:43:00 ./.dosbox/dosbox-0.74.conf
--rw-------   1  <<uid>>  <<gid>>      11032 2016-11-23 07:10:00 ./.viminfo
--rw-rw-r--   1  <<uid>>  <<gid>>        205 2016-10-26 13:14:00 ./.wget-hsts
--rw-rw-r--   1  <<uid>>  <<gid>>       7527 2016-04-17 01:21:00 ./.xboardrc
--rw-rw-r--   1  <<uid>>  <<gid>>        559 2016-09-29 01:08:00 ./.xchm
--rw-rw-r--   1  <<uid>>  <<gid>>        130 2015-12-27 17:08:00 ./.xinputrc
--rw-r--r--   1  <<uid>>  <<gid>>          6 2016-11-23 07:39:00 ./filename with spaces.txt
--rw-rw-r--   1  <<uid>>  <<gid>>    5869937 2016-11-23 07:43:00 ./log.txt
+drwx------   1  <<uid>>  <<gid>>          0 2016-06-07 20:43:00 .dosbox
+-rw-rw-r--   1  <<uid>>  <<gid>>      10730 2016-06-07 20:43:00 .dosbox/dosbox-0.74.conf
+-rw-------   1  <<uid>>  <<gid>>      11032 2016-11-23 07:10:00 .viminfo
+-rw-rw-r--   1  <<uid>>  <<gid>>        205 2016-10-26 13:14:00 .wget-hsts
+-rw-rw-r--   1  <<uid>>  <<gid>>       7527 2016-04-17 01:21:00 .xboardrc
+-rw-rw-r--   1  <<uid>>  <<gid>>        559 2016-09-29 01:08:00 .xchm
+-rw-rw-r--   1  <<uid>>  <<gid>>        130 2015-12-27 17:08:00 .xinputrc
+-rw-r--r--   1  <<uid>>  <<gid>>          6 2016-11-23 07:39:00 filename with spaces.txt
+-rw-rw-r--   1  <<uid>>  <<gid>>    5869937 2016-11-23 07:43:00 log.txt
diff -urpN mc-4.8.23/tests/src/vfs/extfs/helpers-list/misc/Makefile.in mc-4.8.24/tests/src/vfs/extfs/helpers-list/misc/Makefile.in
--- mc-4.8.23/tests/src/vfs/extfs/helpers-list/misc/Makefile.in	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/tests/src/vfs/extfs/helpers-list/misc/Makefile.in	2020-01-19 01:43:05.000000000 +0400
@@ -89,24 +89,14 @@ build_triplet = @build@
 host_triplet = @host@
 subdir = tests/src/vfs/extfs/helpers-list/misc
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
-	$(top_srcdir)/m4/fcntl-o.m4 $(top_srcdir)/m4/gettext.m4 \
-	$(top_srcdir)/m4/glibc2.m4 $(top_srcdir)/m4/glibc21.m4 \
-	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intdiv0.m4 \
-	$(top_srcdir)/m4/intl.m4 $(top_srcdir)/m4/intlmacosx.m4 \
-	$(top_srcdir)/m4/intmax.m4 $(top_srcdir)/m4/inttypes-pri.m4 \
-	$(top_srcdir)/m4/inttypes_h.m4 $(top_srcdir)/m4/lcmessage.m4 \
+am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
+	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
 	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
 	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
-	$(top_srcdir)/m4/lock.m4 $(top_srcdir)/m4/longlong.m4 \
-	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
-	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
-	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
-	$(top_srcdir)/m4/printf-posix.m4 $(top_srcdir)/m4/progtest.m4 \
-	$(top_srcdir)/m4/size_max.m4 $(top_srcdir)/m4/stdint_h.m4 \
-	$(top_srcdir)/m4/threadlib.m4 $(top_srcdir)/m4/uintmax_t.m4 \
-	$(top_srcdir)/m4/visibility.m4 $(top_srcdir)/m4/wchar_t.m4 \
-	$(top_srcdir)/m4/wint_t.m4 $(top_srcdir)/m4/xsize.m4 \
+	$(top_srcdir)/m4/longlong.m4 $(top_srcdir)/m4/ltoptions.m4 \
+	$(top_srcdir)/m4/ltsugar.m4 $(top_srcdir)/m4/ltversion.m4 \
+	$(top_srcdir)/m4/lt~obsolete.m4 $(top_srcdir)/m4/nls.m4 \
+	$(top_srcdir)/m4/po.m4 $(top_srcdir)/m4/progtest.m4 \
 	$(top_srcdir)/acinclude.m4 \
 	$(top_srcdir)/m4.include/gnulib/mode_t.m4 \
 	$(top_srcdir)/m4.include/gnulib/stat-size.m4 \
@@ -177,7 +167,6 @@ am__tagged_files = $(HEADERS) $(SOURCES)
 am__DIST_COMMON = $(srcdir)/Makefile.in
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
 AMTAR = @AMTAR@
 AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
 AR = @AR@
@@ -185,18 +174,15 @@ AUTOCONF = @AUTOCONF@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
-CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
-CFLAG_VISIBILITY = @CFLAG_VISIBILITY@
 CHECK_CFLAGS = @CHECK_CFLAGS@
 CHECK_LIBS = @CHECK_LIBS@
+CP1251 = @CP1251@
 CPP = @CPP@
 CPPFLAGS = @CPPFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DATADIRNAME = @DATADIRNAME@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DISTR_RELEASE = @DISTR_RELEASE@
@@ -236,10 +222,7 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 EXTHELPERSDIR = @EXTHELPERSDIR@
 FGREP = @FGREP@
-GENCAT = @GENCAT@
 GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
-GLIBC2 = @GLIBC2@
-GLIBC21 = @GLIBC21@
 GLIB_CFLAGS = @GLIB_CFLAGS@
 GLIB_LIBS = @GLIB_LIBS@
 GMODULE_CFLAGS = @GMODULE_CFLAGS@
@@ -247,13 +230,7 @@ GMODULE_LIBS = @GMODULE_LIBS@
 GMSGFMT = @GMSGFMT@
 GMSGFMT_015 = @GMSGFMT_015@
 GREP = @GREP@
-HAVE_ASPRINTF = @HAVE_ASPRINTF@
 HAVE_FILECMD = @HAVE_FILECMD@
-HAVE_NEWLOCALE = @HAVE_NEWLOCALE@
-HAVE_POSIX_PRINTF = @HAVE_POSIX_PRINTF@
-HAVE_SNPRINTF = @HAVE_SNPRINTF@
-HAVE_VISIBILITY = @HAVE_VISIBILITY@
-HAVE_WPRINTF = @HAVE_WPRINTF@
 HAVE_ZIPINFO = @HAVE_ZIPINFO@
 HAVE_nroff = @HAVE_nroff@
 INSTALL = @INSTALL@
@@ -261,12 +238,7 @@ INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-INSTOBJEXT = @INSTOBJEXT@
-INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
-INTLOBJS = @INTLOBJS@
-INTL_DEFAULT_VERBOSITY = @INTL_DEFAULT_VERBOSITY@
-INTL_LIBTOOL_SUFFIX_PREFIX = @INTL_LIBTOOL_SUFFIX_PREFIX@
 INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
 LD = @LD@
 LDFLAGS = @LDFLAGS@
@@ -274,24 +246,16 @@ LIBICONV = @LIBICONV@
 LIBINTL = @LIBINTL@
 LIBMC_RELEASE = @LIBMC_RELEASE@
 LIBMC_VERSION = @LIBMC_VERSION@
-LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
-LIBPTH = @LIBPTH@
-LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @LIBS@
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
-LIBTHREAD = @LIBTHREAD@
 LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
-LTLIBC = @LTLIBC@
 LTLIBICONV = @LTLIBICONV@
 LTLIBINTL = @LTLIBINTL@
-LTLIBMULTITHREAD = @LTLIBMULTITHREAD@
 LTLIBOBJS = @LTLIBOBJS@
-LTLIBPTH = @LTLIBPTH@
-LTLIBTHREAD = @LTLIBTHREAD@
 LT_SYS_LIBRARY_PATH = @LT_SYS_LIBRARY_PATH@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
@@ -325,7 +289,6 @@ PKG_CONFIG = @PKG_CONFIG@
 PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
 PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 POSUB = @POSUB@
-PRI_MACROS_BROKEN = @PRI_MACROS_BROKEN@
 PYTHON = @PYTHON@
 RANLIB = @RANLIB@
 RUBY = @RUBY@
@@ -337,12 +300,8 @@ SLANG_LIBS = @SLANG_LIBS@
 STRIP = @STRIP@
 TESTS_LDFLAGS = @TESTS_LDFLAGS@
 UNZIP = @UNZIP@
-USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
-WINDRES = @WINDRES@
-WOE32 = @WOE32@
-WOE32DLL = @WOE32DLL@
 X11_WWW = @X11_WWW@
 XGETTEXT = @XGETTEXT@
 XGETTEXT_015 = @XGETTEXT_015@
diff -urpN mc-4.8.23/version.h mc-4.8.24/version.h
--- mc-4.8.23/version.h	2019-06-22 15:44:15.000000000 +0400
+++ mc-4.8.24/version.h	2020-01-19 02:03:10.000000000 +0400
@@ -1,4 +1,4 @@
 #ifndef MC_CURRENT_VERSION
 /* This is an autogenerated file. Don't edit! */
-#define MC_CURRENT_VERSION "4.8.23"
+#define MC_CURRENT_VERSION "4.8.24"
 #endif
