.\" -*- mode: troff; coding: utf-8 -*-
.\" Automatically generated by Pod::Man 5.01 (Pod::Simple 3.43)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" \*(C` and \*(C' are quotes in nroff, nothing in troff, for use with C<>.
.ie n \{\
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "STOREID_FILE_REWRITE 8"
.TH STOREID_FILE_REWRITE 8 2024-09-15 "perl v5.38.2" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH NAME
.Vb 1
\& storeid_file_rewrite \- File based Store\-ID helper for Squid
.Ve
.SH SYNOPSIS
.IX Header "SYNOPSIS"
.Vb 1
\& storeid_file_rewrite filepath
.Ve
.SH DESCRIPTION
.IX Header "DESCRIPTION"
This program acts as a store_id helper program, rewriting URLs passed
by Squid into storage-ids that can be used to achieve better caching
for websites that use different URLs for the same content.
.PP
It takes a text file with two tab separated columns.
Column 1: Regular expression to match against the URL
Column 2: Rewrite rule to generate a Store-ID
Eg:
^http:\e/\e/[^\e.]+\e.dl\e.sourceforge\e.net\e/(.*)    http://dl.sourceforge.net.squid.internal/$1
.PP
Rewrite rules are matched in the same order as they appear in the rules file.
So for best performance, sort it in order of frequency of occurrence.
.PP
This program will automatically detect the existence of a concurrency channel-ID and adjust appropriately.
It may be used with any value 0 or above for the store_id_children concurrency= parameter.
.SH OPTIONS
.IX Header "OPTIONS"
The only command line parameter this helper takes is the regex rules file name.
.SH AUTHOR
.IX Header "AUTHOR"
This program and documentation was written by \fIAlan Mizrahi <alan@mizrahi.com.ve\fR>
.PP
Based on prior work by \fIEliezer Croitoru <eliezer@ngtech.co.il\fR>
.SH COPYRIGHT
.IX Header "COPYRIGHT"
.Vb 5
\& * Copyright (C) 1996\-2024 The Squid Software Foundation and contributors
\& *
\& * Squid software is distributed under GPLv2+ license and includes
\& * contributions from numerous individuals and organizations.
\& * Please see the COPYING and CONTRIBUTORS files for details.
\&
\& Copyright (C) 2013 Alan Mizrahi <alan@mizrahi.com.ve>
\& Based on code from Eliezer Croitoru <eliezer@ngtech.co.il>
\&
\& This program is free software; you can redistribute it and/or modify
\& it under the terms of the GNU General Public License as published by
\& the Free Software Foundation; either version 2 of the License, or
\& (at your option) any later version.
\&
\& This program is distributed in the hope that it will be useful,
\& but WITHOUT ANY WARRANTY; without even the implied warranty of
\& MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
\& GNU General Public License for more details.
\&
\& You should have received a copy of the GNU General Public License
\& along with this program; if not, write to the Free Software
\& Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111\-1307, USA.
.Ve
.SH QUESTIONS
.IX Header "QUESTIONS"
Questions on the usage of this program can be sent to the \fISquid Users mailing list <squid\-users@lists.squid\-cache.org\fR>
.SH "REPORTING BUGS"
.IX Header "REPORTING BUGS"
Bug reports need to be made in English.
See https://wiki.squid\-cache.org/SquidFaq/BugReporting for details of what you need to include with your bug report.
.PP
Report bugs or bug fixes using https://bugs.squid\-cache.org/
.PP
Report serious security bugs to \fISquid Bugs <squid\-bugs@lists.squid\-cache.org\fR>
.PP
Report ideas for new improvements to the \fISquid Developers mailing list <squid\-dev@lists.squid\-cache.org\fR>
.SH "SEE ALSO"
.IX Header "SEE ALSO"
squid (8), GPL (7),
.PP
The Squid wiki https://wiki.squid\-cache.org/Features/StoreID
.PP
The Squid Configuration Manual http://www.squid\-cache.org/Doc/config/
