diff -urpN mc-4.8.20/Makefile.in mc-4.8.21/Makefile.in
--- mc-4.8.20/Makefile.in	2017-11-25 19:33:48.000000000 +0100
+++ mc-4.8.21/Makefile.in	2018-06-03 10:57:29.000000000 +0200
@@ -115,6 +115,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -122,6 +123,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/NEWS mc-4.8.21/NEWS
--- mc-4.8.20/NEWS	2017-11-18 19:39:59.000000000 +0100
+++ mc-4.8.21/NEWS	2018-05-27 22:20:34.000000000 +0200
@@ -1,3 +1,43 @@
+Version 4.8.21
+
+- Core
+
+  * Cancel Chmod/Chown/Advanced chown operation for large group of files when operation is not permitted (#3850)
+  * Mouse support in the "Advanced chown" dialog window (#3148)
+  * File highlighting by extension is case insensitive by default (#1620)
+  * Safe file overwrite (#3913)
+
+- VFS
+
+  * Support zstd compression format (#3906)
+
+- Editor
+
+  * Syntax:
+    * Rust support (#3884)
+    * JavaScript modules support (#3890)
+    * Improve Markdown support (#3893)
+
+- Misc
+
+  * Add JavaScript module support to `filehighlight.ini` (MidnightCommander/mc#132)
+  * Add Excel xlsx file format support to `mc.ext.in` (MidnightCommander/mc#135)
+  * i18n of argument type names in --help blocks (#3879)
+  * Code cleanup: (#3857, #3914)
+
+- Fixes
+
+  * Fail to link to ncurses built as two libraries: ncurses+tinfo (#3880)
+  * Garbage in displaying of summary of file sizes for selected files (#3883)
+  * "Compute totals" unnecessarily done for moves (#3149, #3908)
+  * mc.ext: allow Java class files to be viewed even if JAD isn't on PATH (MidnightCommander/mc#134)
+  * mcedit: broken extended key mode (#3897)
+  * mcedit doesn't save all opened files (#3898)
+  * extfs: sftps: -31 SFTP Protocol Error when transferring file (#3406)
+  * extfs: rpm: truncated script content in the viewer (#3865)
+  * extfs: rpm helper misses CONFLICTS field (#3789)
+
+
 Version 4.8.20
 
 - Core
@@ -41,7 +81,7 @@ Version 4.8.20
   * Panelization is not kept while switching panel listing mode (#3810)
   * Cannot tab out of a QuickView panel (#3815)
   * Cannot use the F10 key in a QuickView panel (#3816)
-  * Wromg INPUT_COMPLETE_CD flag handling in the QuickDialog engine (#3870)
+  * Wrong INPUT_COMPLETE_CD flag handling in the QuickDialog engine (#3870)
   * mcview: file interpreted as latin1 instead of utf8 (#3783)
   * mcview: incomplete read of filtering data (#3817)
   * mcview: search doesn't grow file as much as needed (#3819, #3855)
diff -urpN mc-4.8.20/acinclude.m4 mc-4.8.21/acinclude.m4
--- mc-4.8.20/acinclude.m4	2017-03-04 18:26:19.000000000 +0100
+++ mc-4.8.21/acinclude.m4	2018-05-27 21:56:21.000000000 +0200
@@ -2,6 +2,7 @@ m4_include([m4.include/ac_onceonly.m4])
 m4_include([m4.include/ax_path_lib_pcre.m4])
 m4_include([m4.include/dx_doxygen.m4])
 m4_include([m4.include/mc-cflags.m4])
+m4_include([m4.include/ax_gcc_func_attribute.m4])
 m4_include([m4.include/mc-check-search-type.m4])
 m4_include([m4.include/mode_t.m4])
 m4_include([m4.include/stat-size.m4])
@@ -9,6 +10,8 @@ m4_include([m4.include/ls-mntd-fs.m4])
 m4_include([m4.include/fstypename.m4])
 m4_include([m4.include/fsusage.m4])
 m4_include([m4.include/mountlist.m4])
+m4_include([m4.include/windows-stat-inodes.m4])
+m4_include([m4.include/sys_types_h.m4])
 m4_include([m4.include/mc-get-fs-info.m4])
 m4_include([m4.include/mc-with-x.m4])
 m4_include([m4.include/mc-use-termcap.m4])
diff -urpN mc-4.8.20/config.h.in mc-4.8.21/config.h.in
--- mc-4.8.20/config.h.in	2017-11-25 19:33:47.000000000 +0100
+++ mc-4.8.21/config.h.in	2018-06-03 10:57:26.000000000 +0200
@@ -150,6 +150,9 @@
 /* Define to 1 if you have the `fs_stat_dev' function. */
 #undef HAVE_FS_STAT_DEV
 
+/* Define to 1 if the system has the `fallthrough' function attribute */
+#undef HAVE_FUNC_ATTRIBUTE_FALLTHROUGH
+
 /* Define to 1 if you have the `fwprintf' function. */
 #undef HAVE_FWPRINTF
 
@@ -451,9 +454,6 @@
    `HAVE_STRUCT_STAT_ST_BLOCKS' instead. */
 #undef HAVE_ST_BLOCKS
 
-/* Define to 1 if you have the <sys/filsys.h> header file. */
-#undef HAVE_SYS_FILSYS_H
-
 /* Define to 1 if you have the <sys/fs/s5param.h> header file. */
 #undef HAVE_SYS_FS_S5PARAM_H
 
@@ -701,10 +701,6 @@
    affected.) */
 #undef STATFS_TRUNCATES_BLOCK_COUNTS
 
-/* Define if there is no specific function for reading file systems usage
-   information and you have the <sys/filsys.h> header file. (SVR2) */
-#undef STAT_READ_FILSYS
-
 /* Define if statfs takes 2 args and struct statfs has a field named f_bsize.
    (4.3BSD, SunOS 4, HP-UX, AIX PS/2) */
 #undef STAT_STATFS2_BSIZE
diff -urpN mc-4.8.20/configure mc-4.8.21/configure
--- mc-4.8.20/configure	2017-11-25 19:33:45.000000000 +0100
+++ mc-4.8.21/configure	2018-06-03 10:57:25.000000000 +0200
@@ -5961,6 +5961,48 @@ $as_echo "$mc_check_one_cflag" >&6; }
 
 
 
+  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ${CC} accepts -Wimplicit-fallthrough" >&5
+$as_echo_n "checking whether ${CC} accepts -Wimplicit-fallthrough... " >&6; }
+
+  safe_CFLAGS=$CFLAGS
+
+  case "$CC" in
+    clang*)
+      CFLAGS="-Werror -Wimplicit-fallthrough"
+      ;;
+    *)
+      CFLAGS="-Wimplicit-fallthrough"
+      ;;
+  esac
+
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+int
+main ()
+{
+return 0;
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_compile "$LINENO"; then :
+  mc_check_one_cflag=yes
+else
+  mc_check_one_cflag=no
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+
+  CFLAGS=$safe_CFLAGS
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $mc_check_one_cflag" >&5
+$as_echo "$mc_check_one_cflag" >&6; }
+
+  if test x$mc_check_one_cflag = xyes; then
+    mc_configured_cflags="$mc_configured_cflags -Wimplicit-fallthrough"
+  fi
+
+
+
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ${CC} accepts -Wignored-qualifiers" >&5
 $as_echo_n "checking whether ${CC} accepts -Wignored-qualifiers... " >&6; }
 
@@ -7541,6 +7583,57 @@ $as_echo "$mc_check_one_cflag" >&6; }
 
 fi
 
+
+
+
+    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __attribute__((fallthrough))" >&5
+$as_echo_n "checking for __attribute__((fallthrough))... " >&6; }
+if ${ax_cv_have_func_attribute_fallthrough+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+
+        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+
+                    int foo( void ) {switch (0) { case 1: __attribute__((fallthrough)); case 2: break ; }};
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+
+_ACEOF
+if ac_fn_c_try_link "$LINENO"; then :
+                                      if test -s conftest.err; then :
+  ax_cv_have_func_attribute_fallthrough=no
+else
+  ax_cv_have_func_attribute_fallthrough=yes
+fi
+else
+  ax_cv_have_func_attribute_fallthrough=no
+fi
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext conftest.$ac_ext
+
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ax_cv_have_func_attribute_fallthrough" >&5
+$as_echo "$ax_cv_have_func_attribute_fallthrough" >&6; }
+
+    if test yes = $ax_cv_have_func_attribute_fallthrough; then :
+
+cat >>confdefs.h <<_ACEOF
+#define HAVE_FUNC_ATTRIBUTE_FALLTHROUGH 1
+_ACEOF
+
+fi
+
+
+
+
 case `pwd` in
   *\ * | *\	*)
     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Libtool does not cope well with whitespace in \`pwd\`" >&5
@@ -17402,6 +17495,65 @@ else
   as_fn_error $? "Cannot find ncurses library" "$LINENO" 5
 fi
 
+        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing stdscr" >&5
+$as_echo_n "checking for library containing stdscr... " >&6; }
+if ${ac_cv_search_stdscr+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  ac_func_search_save_LIBS=$LIBS
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char stdscr ();
+int
+main ()
+{
+return stdscr ();
+  ;
+  return 0;
+}
+_ACEOF
+for ac_lib in '' tinfo ncurses; do
+  if test -z "$ac_lib"; then
+    ac_res="none required"
+  else
+    ac_res=-l$ac_lib
+    LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
+  fi
+  if ac_fn_c_try_link "$LINENO"; then :
+  ac_cv_search_stdscr=$ac_res
+fi
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext
+  if ${ac_cv_search_stdscr+:} false; then :
+  break
+fi
+done
+if ${ac_cv_search_stdscr+:} false; then :
+
+else
+  ac_cv_search_stdscr=no
+fi
+rm conftest.$ac_ext
+LIBS=$ac_func_search_save_LIBS
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_stdscr" >&5
+$as_echo "$ac_cv_search_stdscr" >&6; }
+ac_res=$ac_cv_search_stdscr
+if test "$ac_res" != no; then :
+  test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+  MCLIBS="$MCLIBS $LIBS"
+else
+  as_fn_error $? "Cannot find a library providing stdscr" "$LINENO" 5
+fi
+
+
 
         screen_type=ncurses
         screen_msg="NCurses"
@@ -17470,6 +17622,65 @@ $as_echo "$as_me: WARNING: Cannot find n
 fi
 
 
+        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing stdscr" >&5
+$as_echo_n "checking for library containing stdscr... " >&6; }
+if ${ac_cv_search_stdscr+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  ac_func_search_save_LIBS=$LIBS
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char stdscr ();
+int
+main ()
+{
+return stdscr ();
+  ;
+  return 0;
+}
+_ACEOF
+for ac_lib in '' tinfow tinfo ncursesw ncurses curses; do
+  if test -z "$ac_lib"; then
+    ac_res="none required"
+  else
+    ac_res=-l$ac_lib
+    LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
+  fi
+  if ac_fn_c_try_link "$LINENO"; then :
+  ac_cv_search_stdscr=$ac_res
+fi
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext
+  if ${ac_cv_search_stdscr+:} false; then :
+  break
+fi
+done
+if ${ac_cv_search_stdscr+:} false; then :
+
+else
+  ac_cv_search_stdscr=no
+fi
+rm conftest.$ac_ext
+LIBS=$ac_func_search_save_LIBS
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_stdscr" >&5
+$as_echo "$ac_cv_search_stdscr" >&6; }
+ac_res=$ac_cv_search_stdscr
+if test "$ac_res" != no; then :
+  test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+  MCLIBS="$MCLIBS $LIBS"
+else
+  as_fn_error $? "Cannot find a library providing stdscr" "$LINENO" 5
+fi
+
+
         if test x"$ncursesw_found" = "x"; then
             LIBS=
             { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing has_colors" >&5
@@ -17530,6 +17741,64 @@ else
   as_fn_error $? "Cannot find ncurses library" "$LINENO" 5
 fi
 
+            { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing stdscr" >&5
+$as_echo_n "checking for library containing stdscr... " >&6; }
+if ${ac_cv_search_stdscr+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  ac_func_search_save_LIBS=$LIBS
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char stdscr ();
+int
+main ()
+{
+return stdscr ();
+  ;
+  return 0;
+}
+_ACEOF
+for ac_lib in '' tinfo ncurses curses; do
+  if test -z "$ac_lib"; then
+    ac_res="none required"
+  else
+    ac_res=-l$ac_lib
+    LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
+  fi
+  if ac_fn_c_try_link "$LINENO"; then :
+  ac_cv_search_stdscr=$ac_res
+fi
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext
+  if ${ac_cv_search_stdscr+:} false; then :
+  break
+fi
+done
+if ${ac_cv_search_stdscr+:} false; then :
+
+else
+  ac_cv_search_stdscr=no
+fi
+rm conftest.$ac_ext
+LIBS=$ac_func_search_save_LIBS
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_stdscr" >&5
+$as_echo "$ac_cv_search_stdscr" >&6; }
+ac_res=$ac_cv_search_stdscr
+if test "$ac_res" != no; then :
+  test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+  MCLIBS="$MCLIBS $LIBS"
+else
+  as_fn_error $? "Cannot find a library providing stdscr" "$LINENO" 5
+fi
+
         fi
 
                 ncurses_h_found=
@@ -17670,6 +17939,65 @@ else
   as_fn_error $? "Cannot find ncursesw library" "$LINENO" 5
 fi
 
+    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing stdscr" >&5
+$as_echo_n "checking for library containing stdscr... " >&6; }
+if ${ac_cv_search_stdscr+:} false; then :
+  $as_echo_n "(cached) " >&6
+else
+  ac_func_search_save_LIBS=$LIBS
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char stdscr ();
+int
+main ()
+{
+return stdscr ();
+  ;
+  return 0;
+}
+_ACEOF
+for ac_lib in '' tinfow ncursesw; do
+  if test -z "$ac_lib"; then
+    ac_res="none required"
+  else
+    ac_res=-l$ac_lib
+    LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
+  fi
+  if ac_fn_c_try_link "$LINENO"; then :
+  ac_cv_search_stdscr=$ac_res
+fi
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext
+  if ${ac_cv_search_stdscr+:} false; then :
+  break
+fi
+done
+if ${ac_cv_search_stdscr+:} false; then :
+
+else
+  ac_cv_search_stdscr=no
+fi
+rm conftest.$ac_ext
+LIBS=$ac_func_search_save_LIBS
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_stdscr" >&5
+$as_echo "$ac_cv_search_stdscr" >&6; }
+ac_res=$ac_cv_search_stdscr
+if test "$ac_res" != no; then :
+  test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+  MCLIBS="$MCLIBS $LIBS"
+else
+  as_fn_error $? "Cannot find a library providing stdscr" "$LINENO" 5
+fi
+
+
 
         ncurses_h_found=
     for ac_header in ncursesw/curses.h
@@ -18747,35 +19075,27 @@ fi
 
 done
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether sys/types.h defines makedev" >&5
-$as_echo_n "checking whether sys/types.h defines makedev... " >&6; }
-if ${ac_cv_header_sys_types_h_makedev+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <sys/types.h>
-int
-main ()
-{
-return makedev(0, 0);
-  ;
-  return 0;
-}
+
+      for ac_header in sys/types.h
+do :
+  ac_fn_c_check_header_mongrel "$LINENO" "sys/types.h" "ac_cv_header_sys_types_h" "$ac_includes_default"
+if test "x$ac_cv_header_sys_types_h" = xyes; then :
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_SYS_TYPES_H 1
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_header_sys_types_h_makedev=yes
-else
-  ac_cv_header_sys_types_h_makedev=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_sys_types_h_makedev" >&5
-$as_echo "$ac_cv_header_sys_types_h_makedev" >&6; }
 
-if test $ac_cv_header_sys_types_h_makedev = no; then
+done
+
+
+
+  :
+
+
+
+
+
 ac_fn_c_check_header_mongrel "$LINENO" "sys/mkdev.h" "ac_cv_header_sys_mkdev_h" "$ac_includes_default"
 if test "x$ac_cv_header_sys_mkdev_h" = xyes; then :
 
@@ -18784,9 +19104,8 @@ $as_echo "#define MAJOR_IN_MKDEV 1" >>co
 fi
 
 
-
-  if test $ac_cv_header_sys_mkdev_h = no; then
-    ac_fn_c_check_header_mongrel "$LINENO" "sys/sysmacros.h" "ac_cv_header_sys_sysmacros_h" "$ac_includes_default"
+if test $ac_cv_header_sys_mkdev_h = no; then
+  ac_fn_c_check_header_mongrel "$LINENO" "sys/sysmacros.h" "ac_cv_header_sys_sysmacros_h" "$ac_includes_default"
 if test "x$ac_cv_header_sys_sysmacros_h" = xyes; then :
 
 $as_echo "#define MAJOR_IN_SYSMACROS 1" >>confdefs.h
@@ -18794,7 +19113,6 @@ $as_echo "#define MAJOR_IN_SYSMACROS 1"
 fi
 
 
-  fi
 fi
 
 
@@ -21712,23 +22030,6 @@ $as_echo "#define STAT_STATFS2_FS_DATA 1
   fi
 fi
 
-if test $ac_fsusage_space = no; then
-  # SVR2
-  # (AIX, HP-UX, OSF/1 already handled above.)
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <sys/filsys.h>
-
-_ACEOF
-if ac_fn_c_try_cpp "$LINENO"; then :
-
-$as_echo "#define STAT_READ_FILSYS 1" >>confdefs.h
-
-     ac_fsusage_space=yes
-fi
-rm -f conftest.err conftest.i conftest.$ac_ext
-fi
-
 if test $ac_fsusage_space = yes; then :
   gl_cv_fs_space=yes
 else
@@ -21739,7 +22040,7 @@ fi
 
     if test $gl_cv_fs_space = yes; then
 
-  for ac_header in dustat.h sys/fs/s5param.h sys/filsys.h sys/statfs.h
+  for ac_header in dustat.h sys/fs/s5param.h sys/statfs.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
diff -urpN mc-4.8.20/configure.ac mc-4.8.21/configure.ac
--- mc-4.8.20/configure.ac	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/configure.ac	2018-05-27 21:56:21.000000000 +0200
@@ -45,6 +45,8 @@ if test "x$enable_werror" = xyes; then
     mc_CHECK_ONE_CFLAG([-Werror])
 fi
 
+AX_GCC_FUNC_ATTRIBUTE([fallthrough])
+
 AC_PROG_LIBTOOL
 
 
@@ -160,6 +162,8 @@ AC_CHECK_HEADERS([string.h memory.h limi
 	utime.h sys/statfs.h sys/vfs.h \
 	sys/select.h sys/ioctl.h stropts.h arpa/inet.h \
 	sys/socket.h])
+dnl This macro is redefined in m4.include/sys_types_h.m4
+dnl   to work around a buggy version in autoconf <= 2.69.
 AC_HEADER_MAJOR
 
 
diff -urpN mc-4.8.20/contrib/Makefile.in mc-4.8.21/contrib/Makefile.in
--- mc-4.8.20/contrib/Makefile.in	2017-11-25 19:33:49.000000000 +0100
+++ mc-4.8.21/contrib/Makefile.in	2018-06-03 10:57:29.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/contrib/dist/Makefile.in mc-4.8.21/contrib/dist/Makefile.in
--- mc-4.8.20/contrib/dist/Makefile.in	2017-11-25 19:33:49.000000000 +0100
+++ mc-4.8.21/contrib/dist/Makefile.in	2018-06-03 10:57:29.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/contrib/dist/gentoo/Makefile.in mc-4.8.21/contrib/dist/gentoo/Makefile.in
--- mc-4.8.20/contrib/dist/gentoo/Makefile.in	2017-11-25 19:33:49.000000000 +0100
+++ mc-4.8.21/contrib/dist/gentoo/Makefile.in	2018-06-03 10:57:29.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/contrib/dist/redhat/Makefile.in mc-4.8.21/contrib/dist/redhat/Makefile.in
--- mc-4.8.20/contrib/dist/redhat/Makefile.in	2017-11-25 19:33:49.000000000 +0100
+++ mc-4.8.21/contrib/dist/redhat/Makefile.in	2018-06-03 10:57:29.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/Makefile.in mc-4.8.21/doc/Makefile.in
--- mc-4.8.20/doc/Makefile.in	2017-11-25 19:33:49.000000000 +0100
+++ mc-4.8.21/doc/Makefile.in	2018-06-03 10:57:29.000000000 +0200
@@ -159,6 +159,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -166,6 +167,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/NEWS mc-4.8.21/doc/NEWS
--- mc-4.8.20/doc/NEWS	2017-11-18 19:39:59.000000000 +0100
+++ mc-4.8.21/doc/NEWS	2018-05-27 22:20:34.000000000 +0200
@@ -1,3 +1,43 @@
+Version 4.8.21
+
+- Core
+
+  * Cancel Chmod/Chown/Advanced chown operation for large group of files when operation is not permitted (#3850)
+  * Mouse support in the "Advanced chown" dialog window (#3148)
+  * File highlighting by extension is case insensitive by default (#1620)
+  * Safe file overwrite (#3913)
+
+- VFS
+
+  * Support zstd compression format (#3906)
+
+- Editor
+
+  * Syntax:
+    * Rust support (#3884)
+    * JavaScript modules support (#3890)
+    * Improve Markdown support (#3893)
+
+- Misc
+
+  * Add JavaScript module support to `filehighlight.ini` (MidnightCommander/mc#132)
+  * Add Excel xlsx file format support to `mc.ext.in` (MidnightCommander/mc#135)
+  * i18n of argument type names in --help blocks (#3879)
+  * Code cleanup: (#3857, #3914)
+
+- Fixes
+
+  * Fail to link to ncurses built as two libraries: ncurses+tinfo (#3880)
+  * Garbage in displaying of summary of file sizes for selected files (#3883)
+  * "Compute totals" unnecessarily done for moves (#3149, #3908)
+  * mc.ext: allow Java class files to be viewed even if JAD isn't on PATH (MidnightCommander/mc#134)
+  * mcedit: broken extended key mode (#3897)
+  * mcedit doesn't save all opened files (#3898)
+  * extfs: sftps: -31 SFTP Protocol Error when transferring file (#3406)
+  * extfs: rpm: truncated script content in the viewer (#3865)
+  * extfs: rpm helper misses CONFLICTS field (#3789)
+
+
 Version 4.8.20
 
 - Core
@@ -41,7 +81,7 @@ Version 4.8.20
   * Panelization is not kept while switching panel listing mode (#3810)
   * Cannot tab out of a QuickView panel (#3815)
   * Cannot use the F10 key in a QuickView panel (#3816)
-  * Wromg INPUT_COMPLETE_CD flag handling in the QuickDialog engine (#3870)
+  * Wrong INPUT_COMPLETE_CD flag handling in the QuickDialog engine (#3870)
   * mcview: file interpreted as latin1 instead of utf8 (#3783)
   * mcview: incomplete read of filtering data (#3817)
   * mcview: search doesn't grow file as much as needed (#3819, #3855)
diff -urpN mc-4.8.20/doc/hints/Makefile.in mc-4.8.21/doc/hints/Makefile.in
--- mc-4.8.20/doc/hints/Makefile.in	2017-11-25 19:33:49.000000000 +0100
+++ mc-4.8.21/doc/hints/Makefile.in	2018-06-03 10:57:29.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/hints/l10n/Makefile.in mc-4.8.21/doc/hints/l10n/Makefile.in
--- mc-4.8.20/doc/hints/l10n/Makefile.in	2017-11-25 19:33:49.000000000 +0100
+++ mc-4.8.21/doc/hints/l10n/Makefile.in	2018-06-03 10:57:29.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/hints/l10n/mc.hint.br mc-4.8.21/doc/hints/l10n/mc.hint.br
--- mc-4.8.20/doc/hints/l10n/mc.hint.br	1970-01-01 01:00:00.000000000 +0100
+++ mc-4.8.21/doc/hints/l10n/mc.hint.br	2018-05-27 22:08:24.000000000 +0200
@@ -0,0 +1,87 @@
+Hint: Use C-x t to copy tagged file names to the command line.
+
+Hint: Use C-x p to copy the current pathname to the command line.
+
+Hint: Completion: use M-Tab (or Esc+Tab).  Type it twice to get a list.
+
+Hint: Use M-p and M-n to access the command history.
+
+Hint: Need to quote a character? Use Control-q and the character.
+
+Hint: Tired of these messages? Turn them off from the Options/Layout menu.
+
+Hint: Selecting directories: add a slash to the end of the matching pattern.
+
+Hint: If your terminal lacks functions keys, use the ESC+number sequence.
+
+Hint: The homepage of GNU Midnight Commander: http://www.midnight-commander.org/
+
+Hint: Please send any bug reports to mc-devel@gnome.org
+
+Hint: Tab changes your current panel.
+
+Hint: VFS coolness: tap enter on a tar file to examine its contents.
+
+Hint: We also have a nice manual page.
+
+Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
+
+Hint: % macros work even on the command line.
+
+Hint: M-! will allow you to execute programs and see the output in the viewer.
+
+Hint: The file listing format can be customized; do "man mc" for details.
+
+Hint: %D/%T expands to the tagged files in the opposite directory.
+
+Hint: Want your plain shell? Press C-o, and get back to MC with C-o again.
+
+Hint: Setting the CDPATH variable can save you keystrokes in cd commands.
+
+Hint: If you want to see your .* files, say so in the Configuration dialog.
+
+Hint: Want to see your *~ backup files? Set it in the Configuration dialog.
+
+Hint: Completion works on all input lines in all dialogs. Just press M-Tab.
+
+Hint: On slow terminals the -s flag may help.
+
+Hint: Find File: you can work on the files found using the Panelize button.
+
+Hint: Want to do complex searches? Use the External Panelize command.
+
+Hint: To change directory halfway through typing a command, use M-c (quick cd).
+
+Note: Shell commands will not work when you are on a non-local file system.
+
+Hint: Bring text back from the dead with C-y.
+
+Hint: Are some of your keys not working? Look at Options/Learn keys.
+
+Hint: To look at the output of a command in the viewer, use M-!
+
+Hint: F13 (or Shift-F3) invokes the viewer in raw mode.
+
+Hint: You may specify the editor for F4 with the shell variable EDITOR.
+
+Hint: You may specify the external viewer with the shell vars VIEWER or PAGER.
+
+Hint: You can disable all requests for confirmation in Options/Confirmation.
+
+Hint: Leap to frequently used directories in a single bound with C-.
+
+Hint: You can do anonymous FTP with mc by typing 'cd ftp://machine.edu'
+
+Hint: FTP is built in the Midnight Commander, check the File/FTP link menu.
+
+Hint: M-t changes quickly the listing mode.
+
+Hint: You can specify the username when doing ftps: 'cd ftp://user@machine.edu'
+
+Hint: You can browse RPM files by tapping enter on top of an rpm file.
+
+Hint: To mark directories on the select dialog box, append a slash.
+
+Hint: To use the mouse cut and paste may require holding the shift key
+
+Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.20/doc/hints/l10n/mc.hint.cs mc-4.8.21/doc/hints/l10n/mc.hint.cs
--- mc-4.8.20/doc/hints/l10n/mc.hint.cs	2017-11-25 19:21:18.000000000 +0100
+++ mc-4.8.21/doc/hints/l10n/mc.hint.cs	2018-05-27 22:08:24.000000000 +0200
@@ -1,64 +1,64 @@
-Tip: C-x t vloží na příkazovou řádku označené soubory.
+Tip: Ctrl-x t vloží názvy označených souborů na příkazový řádek.
 
-Tip: C-x p vloží na příkazovou řádku jméno aktuálního adresáře.
+Tip: Ctrl-x p vloží na příkazový řádek název složky, ve které se nacházíte.
 
-Tip: Doplňování: použijte M-Tab (nebo Esc+Tab). Dvojitým zadáním získáte seznam.
+Tip: Doplňování: použijte Meta-Tab (nebo Esc+Tab). Dalším stiskem se vypíše seznam možností.
 
-Tip: Použitím M-p nebo M-n se pohybujete v historii příkazů.
+Tip: V historii příkazů se pohybuje pomocí Meta-p a Meta-n.
 
-Tip: Chcete zadat speciální znak (např. tabulátor)? Použijte Ctrl-q a daný znak.
+Tip: Chcete zadat speciální znak (např. tabulátor)? Použijte Ctrl-q a pak daný znak.
 
-Tip: Nechcete již vidět tipy? Vypněte je v Nastavení/Zobrazení/Další nastavení.
+Tip: Nechcete už vidět tipy? Vypněte je v nabídce Nastavení/Rozvržení.
 
-Tip: Adresáře vyberete přidáním lomítka na konec vzorku.
+Tip: Složky vyberete přidáním lomítka na konec vzoru pro hledání shody v názvu.
 
-Tip: Pokud Váš terminál nezná nebo nemá funkční klávesy, použijte Esc+číslo.
+Tip: Pokud váš terminál nezná nebo nemá funkční (F1-12) klávesy, použijte Esc+číslo.
 
-Tip: Stránka GNU Midnight Commanderu je http://www.midnight-commander.org/
+Tip: Domovská stránka GNU Midnight Commander je: http://www.midnight-commander.org/
 
-Tip: Zprávy o chybách posílejte na mc-devel@gnome.org (anglicky).
+Tip: Chyby hlaste na mc-devel@gnome.org (v angličtině).
 
-Tip: Pomocí klávesy Tab změníte aktuální panel.
+Tip: Pomocí klávesy Tab přejdete na další panel.
 
-Tip: Stiskem Enter na souboru .tar nebo .tar.gz si prohlédnete obsah.
+Tip: Stiskem Enter na souboru .tar nebo .tar.gz si prohlédnete jeho obsah.
 
 Tip: Existuje také manuálová stránka [mc(1)].
 
 Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
 
-Tip: Makra uvozená % pracují na příkazové řádce.
+Tip: Makra uvozená % fungují i na příkazovém řádku.
 
-Tip: Pomocí M-! můžete spustit příkaz a prohlédnout si výstup v okně.
+Tip: Pomocí Meta-! můžete spustit příkaz a prohlédnout si výstup v prohlížeči.
 
 Tip: Zobrazení v panelech může být upraveno. Z „man mc“ se dozvíte více.
 
 Tip: %D/%T se rozvine na soubory označené v druhém panelu.
 
-Tip: Chcete opět váš shell? Stiskněte C-o. Do MC se vrátíte opět přes C-o.
+Tip: Chcete opět váš shell? Stiskněte Ctrl-o. Do MC se vrátíte opět přes Ctrl-o.
 
-Tip: Nastavením proměnné CDPATH můžete šetřit klávesnici.
+Tip: Nastavením proměnné CDPATH si můžete ušetřit psaní na klávesnici.
 
-Tip: Pokud chcete vidět soubory začínající tečkou, řekněte to v Nastavení.
+Tip: Pokud chcete vidět soubory začínající tečkou, vyjádřete to v Nastavení.
 
-Tip: Chcete vidět zálohy svých souborů (končí ~). Použijte Nastavení.
+Tip: Chcete vidět zálohy svých souborů (končí ~)? Použijte Nastavení.
 
-Tip: Doplňování funguje ve vstupních řádkách všech dialogů. Použijte M-Tab.
+Tip: Doplňování funguje ve vstupních řádcích všech dialogů. Použijte Meta-Tab.
 
 Tip: Na terminálech s pomalou odezvou zkuste parametr -s (mc -s).
 
-Tip: S nalezenými soubory můžete pracovat. Stiskněte tlačítko Panelizace.
+Tip: S nalezenými soubory je možné dále pracovat. Stiskněte tlačítko Panelizace.
 
-Tip: Pro opravdu složité operace zkuste příkaz Příkaz/Externí panelizace.
+Tip: Pro opravdu složité vyhledávání zkuste příkaz příkaz Externí panelizace.
 
-Tip: Pokud chcete změnit adresář při práci na příkazové řádce, zkuste M-c.
+Tip: Pokud chcete změnit složku při práci na příkazovém řádku, zkuste Meta-c.
 
 Pozn.: Příkazy shellu nefungují, pokud nepracujete na lokálním systému souborů.
 
-Tip: Smazaný text obnovíte C-y.
+Tip: Smazaný text obnovíte Ctrl-y.
 
 Tip: Pokud některé klávesy nefungují, použijte menu Nastavení/Učení kláves.
 
-Tip: K zobrazení výstupu příkazu v okně použijte M-!
+Tip: K zobrazení výstupu příkazu v okně použijte Meta-!
 
 Tip: F13 (nebo Shift-F3) vyvolá prohlížení bez zpracování obsahu souboru.
 
@@ -66,21 +66,21 @@ Tip: Editor pro klávesu F4 určíte pom
 
 Tip: Externí prohlížeč určíte proměnnými VIEWER nebo PAGER
 
-Tip: Všechny žádosti o potvrzení můžete zakázat v Nastavení/Potvrzování.
+Tip: Všechny žádosti o potvrzení je možné vypnout v Nastavení/Potvrzování.
 
 Hint: Leap to frequently used directories in a single bound with C-.
 
 Tip: Na anonymní FTP se připojíte pomocí „cd ftp://stroj.domena.cz“.
 
-Tip: MC má vestavěný FTP. Podívejte se do menu Levý/FTP spojení na počítač.
+Tip: MC má vestavěný FTP. Podívejte se do nabídka Levý/FTP spojení na počítač.
 
-Tip: M-t rychle mění formát zobrazení panelů.
+Tip: Meta-t rychle mění formát zobrazení panelů.
 
 Tip: Při FTP spojení můžete zadat i jméno: „cd ftp://jmeno@stroj.domena.cz“.
 
 Tip: RPM soubory si prohlédnete stiskem Enter.
 
-Tip: Pro označení adresářů v dialogovém okně výběru souborů, přidejte lomítko.
+Tip: Pro označení složek v dialogovém okně výběru souborů, přidejte lomítko.
 
 Tip: Chcete-li použít myš pro zkopírování nebo vložení textu, stiskněte Shift.
 
diff -urpN mc-4.8.20/doc/hints/l10n/mc.hint.da mc-4.8.21/doc/hints/l10n/mc.hint.da
--- mc-4.8.20/doc/hints/l10n/mc.hint.da	2017-11-25 19:21:18.000000000 +0100
+++ mc-4.8.21/doc/hints/l10n/mc.hint.da	2018-05-27 22:08:24.000000000 +0200
@@ -1,87 +1,87 @@
-Hint: Use C-x t to copy tagged file names to the command line.
+Fif: Brug C-x t til at kopiere filnavne til kommandolinjen.
 
-Hint: Use C-x p to copy the current pathname to the command line.
+Fif: Brug C-x p for at kopiere det nuværende stinavn til kommandolinjen.
 
-Hint: Completion: use M-Tab (or Esc+Tab).  Type it twice to get a list.
+Fif: Fuldførelse: brug M-Tab (eller Esc+Tab). Skriv det to gange for at få en liste.
 
-Fif: Brug M-p og M-n for at tilgå kommando-historikken.
+Fif: Brug M-p og M-n for at tilgå kommandohistorikken.
 
-Hint: Need to quote a character? Use Control-q and the character.
+Fif: Har du brug for at sætte citationstegn om et tegn? Brug Control-q og tegnet.
 
-Fif: Træt af disse meddelelser? Slå dem fra i Indstillinger/Udseende menuen.
+Fif: Træt af disse meddelelser? Slå dem fra i Indstillinger/Layout-menuen.
 
-Hint: Selecting directories: add a slash to the end of the matching pattern.
+Fif: Valg af mapper: tilføj en skråstreg til slutningen af det matchende mønster.
 
-Hint: If your terminal lacks functions keys, use the ESC+number sequence.
+Fif: Hvis din terminal mangler funktionstaster, så rug ESC+talsekvensen.
 
-Hint: The homepage of GNU Midnight Commander: http://www.midnight-commander.org/
+Fif: Hjemmesiden for GNU Midnight Commander: http://www.midnight-commander.org/
 
-Hint: Please send any bug reports to mc-devel@gnome.org
+Fif: Send venligst eventuelle fejlrappporter til mc-devel@gnome.org
 
-Hint: Tab changes your current panel.
+Fif: Tabulator skifter dit nuværende panel.
 
-Hint: VFS coolness: tap enter on a tar file to examine its contents.
+Fif: Cool VFS: tryk på enter på en tar-fil for at undersøge dens indhold.
 
-Hint: We also have a nice manual page.
+Fif: Vi har også en fin manualside.
 
 Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
 
-Hint: % macros work even on the command line.
+Fif: %-makroer virker også på kommandolinjen.
 
-Hint: M-! will allow you to execute programs and see the output in the viewer.
+Fif: M-! giver dig mulighed for at udføre programmer og se outputtet i fremviseren.
 
-Hint: The file listing format can be customized; do "man mc" for details.
+Fif: Fillistningsformatet kan tilpasses; brug "man mc" for detaljer.
 
-Hint: %D/%T expands to the tagged files in the opposite directory.
+Fif: %D/%T udvidder til de mærkede filer i den modsatte mappe.
 
-Hint: Want your plain shell? Press C-o, and get back to MC with C-o again.
+Fif: Vil du have en almindelig skal? Tryk på C-o, og vend tilbage til MC med C-o.
 
-Hint: Setting the CDPATH variable can save you keystrokes in cd commands.
+Fif: Hvis CDPATH-variablen sættes kan du spare tastetryk i cd-kommandoer.
 
-Hint: If you want to see your .* files, say so in the Configuration dialog.
+Fif: Hvis du vil se dine .*-filer, så sig det i konfigurationsdialogen.
 
-Hint: Want to see your *~ backup files? Set it in the Configuration dialog.
+Fif: Vil du se dine *~-backupfiler? Sæt det i konfigurationsdialogen.
 
-Hint: Completion works on all input lines in all dialogs. Just press M-Tab.
+Fif: Fuldførelse virker på alle inputlinjer i alle dialoger. Tryk blot på M-Tab.
 
-Hint: On slow terminals the -s flag may help.
+Hint: På langsomme maskiner kan flaget -s hjælpe.
 
-Hint: Find File: you can work on the files found using the Panelize button.
+Fif: Find fil: du kan arbejde på de fundne filer med Panelisér-knappen.
 
-Hint: Want to do complex searches? Use the External Panelize command.
+Fif: Vil du foretage komplekse søgninger? Brug Ekstern panelisering-kommandoen.
 
-Hint: To change directory halfway through typing a command, use M-c (quick cd).
+Fif: Brug M-c (hurtig cd), til at skifte mappe halvvejs gennem indtastningen af en kommando.
 
-Note: Shell commands will not work when you are on a non-local file system.
+Bemærk: Skalkommandoer virker ikke når du er på et ikke-lokalt filsystem.
 
-Hint: Bring text back from the dead with C-y.
+Fif: Bring tekst tilbage fra de døde med C-y.
 
-Hint: Are some of your keys not working? Look at Options/Learn keys.
+Fif: Er der nogen af dine taster som ikke virker? Kig i Indstillinger/Lær taster.
 
-Hint: To look at the output of a command in the viewer, use M-!
+Fif: Brug M-!, til at se på outputtet af en kommando i fremviseren.
 
-Hint: F13 (or Shift-F3) invokes the viewer in raw mode.
+Fif: F13 (eller Skift-F3) viser fremviseren i rå tilstand.
 
-Hint: You may specify the editor for F4 with the shell variable EDITOR.
+Fif: Du kan angive editoren til F4 med skalvariablen EDITOR.
 
-Hint: You may specify the external viewer with the shell vars VIEWER or PAGER.
+Fif: Du kan angive den eksterne fremviser med skalvariablerne VIEWER eller PAGER.
 
-Hint: You can disable all requests for confirmation in Options/Confirmation.
+Fif: Du kan deaktivere alle anmodninger om bekræftelse i Indstillinger/Bekræftelse.
 
 Hint: Leap to frequently used directories in a single bound with C-.
 
-Hint: You can do anonymous FTP with mc by typing 'cd ftp://machine.edu'
+Fif: Du kan brug anonym FTP i mc ved at skrive 'cd ftp://maskine.edu'
 
-Hint: FTP is built in the Midnight Commander, check the File/FTP link menu.
+Fif: FTP er indbygget i Midnight Commander, tjek Fil/FTP-link-menuen.
 
-Hint: M-t changes quickly the listing mode.
+Fif: M-t ændre hurtigt listningstilstanden.
 
-Hint: You can specify the username when doing ftps: 'cd ftp://user@machine.edu'
+Fif: Du kan angive brugernavnet når ftps bruges: 'cd ftp://bruger@maskine.edu'
 
-Hint: You can browse RPM files by tapping enter on top of an rpm file.
+Fif: Du kan gennemse RPM-filer ved at trykke på enter, på en rpm-fil.
 
-Hint: To mark directories on the select dialog box, append a slash.
+Fif: Tilføj en skråstreg, til at markere mapper i den valgte dialogboks.
 
-Hint: To use the mouse cut and paste may require holding the shift key
+Fif: Brug at klip og indsæt med musen kan kræve at skift-tasten holdes nede
 
 Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.20/doc/hints/l10n/mc.hint.de mc-4.8.21/doc/hints/l10n/mc.hint.de
--- mc-4.8.20/doc/hints/l10n/mc.hint.de	2017-11-25 19:21:18.000000000 +0100
+++ mc-4.8.21/doc/hints/l10n/mc.hint.de	2018-05-27 22:08:24.000000000 +0200
@@ -72,7 +72,7 @@ Hint: Leap to frequently used directorie
 
 Hinweis: Du kannst eine anonyme FTP Verbindung im mc starten mit der Eingabe von 'cd ftp://machine.edu'
 
-Hinweis: FTP ist im Midnight Commander eingebaut, prüfe das Datei/FTP-Verbindung Menü.
+Hinweis: FTP ist im Midnight Commander eingebaut, Menüeintrag: Datei/FTP-Verbindung.
 
 Hinweis: M-t wechselt schnell den Listenmodus.
 
@@ -82,6 +82,6 @@ Hinweis: Du kannst eine RPM Datei mit En
 
 Hinweis: Um Verzeichnisse in der Auswahlbox zu markieren, füge einen Schrägstrich hinzu.
 
-Hinweis: Um mit der Maus Ausschneiden und Einfügen zu nutzen, muss evtl die Shifttaste gedrückt werden.
+Hinweis: Um mit der Maus Ausschneiden und Einfügen nutzen zu könnenj, muß evtl die Shifttaste gedrückt werden.
 
 Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.20/doc/hints/l10n/mc.hint.ga mc-4.8.21/doc/hints/l10n/mc.hint.ga
--- mc-4.8.20/doc/hints/l10n/mc.hint.ga	1970-01-01 01:00:00.000000000 +0100
+++ mc-4.8.21/doc/hints/l10n/mc.hint.ga	2018-05-27 22:08:24.000000000 +0200
@@ -0,0 +1,87 @@
+Leid: Bain úsáid as C-x t chun ainmneacha comhaid clibáilte a chóipeáil chuig an líne ordaithe.
+
+Leid: Bain úsáid as C-x p chun an luíainm reatha a chóipeáil chuig an líne ordaithe.
+
+Leid: Críochnú: bain úsáid as M-Tab (nó Esc + Tab). Déan é a thaifeadadh faoi dhó chun liosta a fháil.
+
+Leid: Bain úsáid as M-p agus M-n chun rochtain a fháil ar stair na gceannasaí.
+
+Leid: An gá duit carachtar a lua? Bain úsáid as Rialú-q agus an carachtar.
+
+Leid: Tuirseach de na teachtaireachtaí seo? Cas iad as an roghchlár Roghanna / Leagan amach.
+
+Leid: Eolairí a roghnú: cuir slais isteach go dtí deireadh an patrún meaitseála.
+
+Leid: Má níl do críochfort eochracha feidhmeanna, bain úsáid as an ESC + seicheamh uimhir
+
+Leid: Leathanach baile GNU Midnight Commander: http://www.midnight-commander.org/
+
+Leid: Seol tuairiscí ar bith chuig mc-devel@gnome.org
+
+Leid: Athraíonn an tábla do phainéal reatha.
+
+Leid: VFS coolness: tap a chur isteach ar chomhad tarra chun scrúdú a dhéanamh ar a n-ábhar.
+
+Leid: Tá leathanach láimhe deas againn freisin.
+
+Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
+
+Leid:% Macraí ag obair fiú ar na n-orduithe.
+
+Leid: M-! beidh deis agat cláir a fhorghníomhú agus an t-aschur a fheiceáil sa lucht féachana.
+
+Leid: Is féidir an fhormáid liostaithe comhad a shaincheapadh; dhéanamh "man mc" le haghaidh sonraí.
+
+Leid: leathnaíonn% D /% T na comhaid clib sa chomhadlann eile.
+
+Leid: Want do bhlaosc plain? Brúigh C-o, agus téigh ar ais chuig MC le C-o arís.
+
+Leid: Is féidir le hathraithe an athróg CDPATH keystrokes tú a shábháil in orduithe cd.
+
+Leid: Más mian leat do chuid comhad. * A fheiceáil, mar sin sa dialóg Cumraíochta.
+
+Leid: Ar mhaith leat do * chomhaid cúltaca a fheiceáil? Socraigh é sa dialóg Cumraíochta.
+
+Leid: Oibríonn an chríochnú ar gach línte ionchuir i ngach dialóg. Just brúigh M-Tab.
+
+Leid: Ar críochfoirt mall an bhratach -s cabhrú.
+
+Leid: Faigh Comhad: is féidir leat oibriú ar na comhaid a fuarthas ag baint úsáide as an gcnaipe Painéal.
+
+Leid: An bhfuil tú ag iarraidh cuardach casta a dhéanamh? Bain úsáid as an ordú Painéal Seachtrach.
+
+Leid: A athrú leathbhealach eolaire trí clóscríobh a dtoil, a úsáid M-c (cd tapaidh).
+
+Nóta: Ní oibreoidh orduithe Shell nuair a bhíonn tú ar chóras comhaid neamh-áitiúil.
+
+Leid: Cuir téacs ar ais ó na marbh le C-y.
+
+Leid: An bhfuil cuid de do chuid eochracha nach bhfuil ag obair? Féach ar eochracha Roghanna / Foghlaim.
+
+Leid: Chun féachaint ar aschur ordú sa lucht féachana, bain úsáid as M-!
+
+Leid: Tugann F13 (nó Shift-F3) an breathnóir i mód amh.
+
+Leid: Is féidir leat a shonrú ar an eagarthóir don F4 leis an EDITOR bhlaosc athróg.
+
+Leid: Féadfaidh tú an breathnóir seachtrach a shonrú leis an vars bhlaosc VIEWER nó PAGER.
+
+Leid: Is féidir leat gach iarratas a dhíchumasú ar dheimhniú i Roghanna / Dearbhaithe.
+
+Hint: Leap to frequently used directories in a single bound with C-.
+
+Leid: Is féidir leat FTP gan ainm a dhéanamh le mc trí chlóscríobh 'cd ftp://machine.edu'
+
+Leid: tógtar FTP sa Cheannasaí Meán Oíche, seiceáil an roghchlár nasc File / FTP.
+
+Leid: Athraíonn M-t go tapa ar an mód liostaithe.
+
+Leid: Is féidir leat an t-ainm úsáideora a shonrú nuair a dhéanann tú ftps: \&'cd ftp: //user@machine.edu'
+
+Leid: Is féidir leat brabhsáil comhaid RPM trí scanadh a chur isteach ar bharr comhad rpm.
+
+Leid: Chun comharthaí a mharcáil ar an mbosca dialóige roghnaigh, cuir slash ar.
+
+Leid: Úsáid a bhaint as an gearrtha luch agus greamaigh theastóidh a bhfuil an eochair-athrú
+
+Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.20/doc/hints/l10n/mc.hint.he mc-4.8.21/doc/hints/l10n/mc.hint.he
--- mc-4.8.20/doc/hints/l10n/mc.hint.he	1970-01-01 01:00:00.000000000 +0100
+++ mc-4.8.21/doc/hints/l10n/mc.hint.he	2018-05-27 22:08:24.000000000 +0200
@@ -0,0 +1,87 @@
+Hint: Use C-x t to copy tagged file names to the command line.
+
+Hint: Use C-x p to copy the current pathname to the command line.
+
+Hint: Completion: use M-Tab (or Esc+Tab).  Type it twice to get a list.
+
+Hint: Use M-p and M-n to access the command history.
+
+Hint: Need to quote a character? Use Control-q and the character.
+
+Hint: Tired of these messages? Turn them off from the Options/Layout menu.
+
+Hint: Selecting directories: add a slash to the end of the matching pattern.
+
+Hint: If your terminal lacks functions keys, use the ESC+number sequence.
+
+Hint: The homepage of GNU Midnight Commander: http://www.midnight-commander.org/
+
+Hint: Please send any bug reports to mc-devel@gnome.org
+
+Hint: Tab changes your current panel.
+
+Hint: VFS coolness: tap enter on a tar file to examine its contents.
+
+Hint: We also have a nice manual page.
+
+Hint: Do you want Lynx-style navigation? Set it in the Configuration dialog.
+
+Hint: % macros work even on the command line.
+
+Hint: M-! will allow you to execute programs and see the output in the viewer.
+
+Hint: The file listing format can be customized; do "man mc" for details.
+
+Hint: %D/%T expands to the tagged files in the opposite directory.
+
+Hint: Want your plain shell? Press C-o, and get back to MC with C-o again.
+
+Hint: Setting the CDPATH variable can save you keystrokes in cd commands.
+
+Hint: If you want to see your .* files, say so in the Configuration dialog.
+
+Hint: Want to see your *~ backup files? Set it in the Configuration dialog.
+
+Hint: Completion works on all input lines in all dialogs. Just press M-Tab.
+
+Hint: On slow terminals the -s flag may help.
+
+Hint: Find File: you can work on the files found using the Panelize button.
+
+Hint: Want to do complex searches? Use the External Panelize command.
+
+Hint: To change directory halfway through typing a command, use M-c (quick cd).
+
+Note: Shell commands will not work when you are on a non-local file system.
+
+Hint: Bring text back from the dead with C-y.
+
+Hint: Are some of your keys not working? Look at Options/Learn keys.
+
+Hint: To look at the output of a command in the viewer, use M-!
+
+Hint: F13 (or Shift-F3) invokes the viewer in raw mode.
+
+Hint: You may specify the editor for F4 with the shell variable EDITOR.
+
+Hint: You may specify the external viewer with the shell vars VIEWER or PAGER.
+
+Hint: You can disable all requests for confirmation in Options/Confirmation.
+
+Hint: Leap to frequently used directories in a single bound with C-.
+
+Hint: You can do anonymous FTP with mc by typing 'cd ftp://machine.edu'
+
+Hint: FTP is built in the Midnight Commander, check the File/FTP link menu.
+
+Hint: M-t changes quickly the listing mode.
+
+Hint: You can specify the username when doing ftps: 'cd ftp://user@machine.edu'
+
+Hint: You can browse RPM files by tapping enter on top of an rpm file.
+
+Hint: To mark directories on the select dialog box, append a slash.
+
+Hint: To use the mouse cut and paste may require holding the shift key
+
+Hint: Key frequently visited ftp sites in the hotlist: type C-.
diff -urpN mc-4.8.20/doc/hlp/Makefile.in mc-4.8.21/doc/hlp/Makefile.in
--- mc-4.8.20/doc/hlp/Makefile.in	2017-11-25 19:33:49.000000000 +0100
+++ mc-4.8.21/doc/hlp/Makefile.in	2018-06-03 10:57:29.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/hlp/es/Makefile.in mc-4.8.21/doc/hlp/es/Makefile.in
--- mc-4.8.20/doc/hlp/es/Makefile.in	2017-11-25 19:33:49.000000000 +0100
+++ mc-4.8.21/doc/hlp/es/Makefile.in	2018-06-03 10:57:29.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/hlp/hu/Makefile.in mc-4.8.21/doc/hlp/hu/Makefile.in
--- mc-4.8.20/doc/hlp/hu/Makefile.in	2017-11-25 19:33:49.000000000 +0100
+++ mc-4.8.21/doc/hlp/hu/Makefile.in	2018-06-03 10:57:29.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/hlp/it/Makefile.in mc-4.8.21/doc/hlp/it/Makefile.in
--- mc-4.8.20/doc/hlp/it/Makefile.in	2017-11-25 19:33:49.000000000 +0100
+++ mc-4.8.21/doc/hlp/it/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/hlp/pl/Makefile.in mc-4.8.21/doc/hlp/pl/Makefile.in
--- mc-4.8.20/doc/hlp/pl/Makefile.in	2017-11-25 19:33:50.000000000 +0100
+++ mc-4.8.21/doc/hlp/pl/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/hlp/ru/Makefile.in mc-4.8.21/doc/hlp/ru/Makefile.in
--- mc-4.8.20/doc/hlp/ru/Makefile.in	2017-11-25 19:33:50.000000000 +0100
+++ mc-4.8.21/doc/hlp/ru/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/hlp/sr/Makefile.in mc-4.8.21/doc/hlp/sr/Makefile.in
--- mc-4.8.20/doc/hlp/sr/Makefile.in	2017-11-25 19:33:50.000000000 +0100
+++ mc-4.8.21/doc/hlp/sr/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/man/Makefile.in mc-4.8.21/doc/man/Makefile.in
--- mc-4.8.20/doc/man/Makefile.in	2017-11-25 19:33:50.000000000 +0100
+++ mc-4.8.21/doc/man/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -112,6 +112,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -119,6 +120,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/man/es/Makefile.in mc-4.8.21/doc/man/es/Makefile.in
--- mc-4.8.20/doc/man/es/Makefile.in	2017-11-25 19:33:50.000000000 +0100
+++ mc-4.8.21/doc/man/es/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -112,6 +112,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -119,6 +120,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/man/hu/Makefile.in mc-4.8.21/doc/man/hu/Makefile.in
--- mc-4.8.20/doc/man/hu/Makefile.in	2017-11-25 19:33:50.000000000 +0100
+++ mc-4.8.21/doc/man/hu/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -112,6 +112,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -119,6 +120,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/man/it/Makefile.in mc-4.8.21/doc/man/it/Makefile.in
--- mc-4.8.20/doc/man/it/Makefile.in	2017-11-25 19:33:50.000000000 +0100
+++ mc-4.8.21/doc/man/it/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -112,6 +112,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -119,6 +120,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/man/mc.1.in mc-4.8.21/doc/man/mc.1.in
--- mc-4.8.20/doc/man/mc.1.in	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/doc/man/mc.1.in	2018-05-27 21:56:21.000000000 +0200
@@ -503,9 +503,7 @@ To untag files, just retag a tagged file
 .B M\-e
 to change charset of panel you may use M\-e (Alt\-e).
 Recoding is made from selected codepage into system codepage. To
-cancel the recoding you may select "directory up" (..) in active panel.
-To cancel the charsets in all directories, select "No translation " in
-the dialog of encodings.
+cancel the recoding, select "No translation" in the dialog of encodings.
 .TP
 .B Alt\-g, Alt\-r, Alt\-j
 used to select the top file in a panel, the middle file and the bottom one,
@@ -1964,7 +1962,19 @@ and not to the directory where the link
 .I Safe delete.
 If this option is enabled, deleting files and directory hotlist entries
 unintentionally becomes more difficult.  The default selection in the
-confirmation dialogs for deletion changes from "Yes" to "No".
+confirmation dialogs for deletion changes from
+.B Yes
+to
+.BR No .
+This option is disabled by default.
+.PP
+.I Safe overwrite.
+If this option is enabled, overwriting files unintentionally becomes
+more difficult.  The default selection in the overwrite confirmation dialog
+changes from
+.B Yes
+to
+.BR No .
 This option is disabled by default.
 .PP
 .I Auto save setup.
diff -urpN mc-4.8.20/doc/man/pl/Makefile.in mc-4.8.21/doc/man/pl/Makefile.in
--- mc-4.8.20/doc/man/pl/Makefile.in	2017-11-25 19:33:50.000000000 +0100
+++ mc-4.8.21/doc/man/pl/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -112,6 +112,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -119,6 +120,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/man/ru/Makefile.in mc-4.8.21/doc/man/ru/Makefile.in
--- mc-4.8.20/doc/man/ru/Makefile.in	2017-11-25 19:33:50.000000000 +0100
+++ mc-4.8.21/doc/man/ru/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -112,6 +112,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -119,6 +120,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/doc/man/ru/mc.1.in mc-4.8.21/doc/man/ru/mc.1.in
--- mc-4.8.20/doc/man/ru/mc.1.in	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/doc/man/ru/mc.1.in	2018-05-27 21:56:21.000000000 +0200
@@ -8,7 +8,7 @@ mc \- Визуальная оболоч
 .\"SKIP_SECTION"
 .SH "СИНТАКСИС"
 .B mc
-[\-abcCdfhPstuUVx] [\-l журнал] [каталог1 [каталог2]] [\-e [файл] .     ..] [\-v файл]
+[\-abcCdfhPstuUVx] [\-l журнал] [каталог1 [каталог2]] [\-e [файл] ...] [\-v файл]
 .\"NODE "DESCRIPTION"
 .SH "ОПИСАНИЕ"
 Что такое Midnight Commander
@@ -495,9 +495,7 @@ отметки с файла испол
 .B M\-e
 Чтобы поменять кодировку панели, используйте комбинацию M\-e (Alt\-e).
 Перекодировка производится из выбранной кодировки в системную. Для отмены
-перекодировки просто перейдите на каталог вверх '..'. Для отмены
-перекодировки всех каталогов выберите "Без перекодировки" в диалоге
-выбора кодировок.
+перекодировки выберите "Без перекодировки" в диалоге выбора кодировок.
 .TP
 .B M\-g, M\-r, M\-j
 Используются для перемещения подсветки, соответственно, на самый
@@ -2103,6 +2101,15 @@ диалоговых окнах подт
 изменяется с
 .B Да
 на
+.BR Нет .
+По умолчанию эта опция отключена.
+.PP
+.I Безопасная перезапись.
+Если эта опция включена, непреднамеренно перезаписать файл будет сложнее. В
+диалоговом окне подтверждения перезаписи предлагаемая по умолчанию кнопка
+изменяется с
+.B Да
+на
 .BR Нет .
 По умолчанию эта опция отключена.
 .PP
diff -urpN mc-4.8.20/doc/man/sr/Makefile.in mc-4.8.21/doc/man/sr/Makefile.in
--- mc-4.8.20/doc/man/sr/Makefile.in	2017-11-25 19:33:50.000000000 +0100
+++ mc-4.8.21/doc/man/sr/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -112,6 +112,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -119,6 +120,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/lib/Makefile.in mc-4.8.21/lib/Makefile.in
--- mc-4.8.20/lib/Makefile.in	2017-11-25 19:33:50.000000000 +0100
+++ mc-4.8.21/lib/Makefile.in	2018-06-03 10:57:30.000000000 +0200
@@ -117,6 +117,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -124,6 +125,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/lib/charsets.c mc-4.8.21/lib/charsets.c
--- mc-4.8.20/lib/charsets.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/charsets.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Text conversion from one charset to another.
 
-   Copyright (C) 2001-2017
+   Copyright (C) 2001-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -106,12 +106,14 @@ load_codepages_list_from_file (GPtrArray
     {
         /* split string into id and cpname */
         char *p = buf;
-        size_t buflen = strlen (buf);
+        size_t buflen;
 
         if (*p == '\n' || *p == '\0' || *p == '#')
             continue;
 
-        if (buflen > 0 && buf[buflen - 1] == '\n')
+        buflen = strlen (buf);
+
+        if (buflen != 0 && buf[buflen - 1] == '\n')
             buf[buflen - 1] = '\0';
         while (*p != '\0' && !whitespace (*p))
             ++p;
@@ -181,11 +183,10 @@ translate_character (GIConv cd, char c)
     gsize bytes_read, bytes_written = 0;
     const char *ibuf = &c;
     char ch = UNKNCHAR;
-
     int ibuflen = 1;
 
     tmp_buff = g_convert_with_iconv (ibuf, ibuflen, cd, &bytes_read, &bytes_written, NULL);
-    if (tmp_buff)
+    if (tmp_buff != NULL)
         ch = tmp_buff[0];
     g_free (tmp_buff);
     return ch;
@@ -245,10 +246,11 @@ int
 get_codepage_index (const char *id)
 {
     size_t i;
-    if (strcmp (id, OTHER_8BIT) == 0)
-        return -1;
+
     if (codepages == NULL)
         return -1;
+    if (strcmp (id, OTHER_8BIT) == 0)
+        return -1;
     for (i = 0; i < codepages->len; i++)
         if (strcmp (id, ((codepage_desc *) g_ptr_array_index (codepages, i))->id) == 0)
             return i;
@@ -269,7 +271,9 @@ is_supported_encoding (const char *encod
 
     for (t = 0; t < codepages->len; t++)
     {
-        const char *id = ((codepage_desc *) g_ptr_array_index (codepages, t))->id;
+        const char *id;
+
+        id = ((codepage_desc *) g_ptr_array_index (codepages, t))->id;
         result |= (g_ascii_strncasecmp (encoding, id, strlen (id)) == 0);
     }
 
@@ -292,8 +296,8 @@ init_translation_table (int cpsource, in
         {
             conv_displ[i] = i;
             conv_input[i] = i;
-            cp_source = cp_display;
         }
+        cp_source = cp_display;
         return NULL;
     }
 
@@ -339,14 +343,9 @@ init_translation_table (int cpsource, in
 void
 convert_to_display (char *str)
 {
-    if (!str)
-        return;
-
-    while (*str)
-    {
-        *str = conv_displ[(unsigned char) *str];
-        str++;
-    }
+    if (str != NULL)
+        for (; *str != '\0'; str++)
+            *str = conv_displ[(unsigned char) *str];
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -355,7 +354,6 @@ GString *
 str_convert_to_display (const char *str)
 {
     return str_nconvert_to_display (str, -1);
-
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -366,7 +364,7 @@ str_nconvert_to_display (const char *str
     GString *buff;
     GIConv conv;
 
-    if (!str)
+    if (str == NULL)
         return g_string_new ("");
 
     if (cp_display == cp_source)
@@ -385,14 +383,9 @@ str_nconvert_to_display (const char *str
 void
 convert_from_input (char *str)
 {
-    if (!str)
-        return;
-
-    while (*str)
-    {
-        *str = conv_input[(unsigned char) *str];
-        str++;
-    }
+    if (str != NULL)
+        for (; *str != '\0'; str++)
+            *str = conv_input[(unsigned char) *str];
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -411,7 +404,7 @@ str_nconvert_to_input (const char *str,
     GString *buff;
     GIConv conv;
 
-    if (!str)
+    if (str == NULL)
         return g_string_new ("");
 
     if (cp_display == cp_source)
@@ -530,37 +523,16 @@ convert_from_8bit_to_utf_c (char input_c
 int
 convert_from_8bit_to_utf_c2 (char input_char)
 {
-    unsigned char str[2];
     int ch = '.';
     GIConv conv;
     const char *cp_from;
 
-    str[0] = (unsigned char) input_char;
-    str[1] = '\0';
-
     cp_from = get_codepage_id (mc_global.source_codepage);
-    conv = str_crt_conv_to (cp_from);
 
+    conv = str_crt_conv_to (cp_from);
     if (conv != INVALID_CONV)
     {
-        unsigned char buf_ch[UTF8_CHAR_LEN + 1];
-
-        switch (str_translate_char (conv, (char *) str, -1, (char *) buf_ch, sizeof (buf_ch)))
-        {
-        case ESTR_SUCCESS:
-            {
-                int res;
-
-                res = g_utf8_get_char_validated ((char *) buf_ch, -1);
-                ch = res >= 0 ? res : buf_ch[0];
-                break;
-            }
-        case ESTR_PROBLEM:
-        case ESTR_FAILURE:
-        default:
-            ch = '.';
-            break;
-        }
+        ch = convert_from_8bit_to_utf_c (input_char, conv);
         str_close_conv (conv);
     }
 
diff -urpN mc-4.8.20/lib/event/Makefile.in mc-4.8.21/lib/event/Makefile.in
--- mc-4.8.20/lib/event/Makefile.in	2017-11-25 19:33:51.000000000 +0100
+++ mc-4.8.21/lib/event/Makefile.in	2018-06-03 10:57:31.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/lib/event/event.c mc-4.8.21/lib/event/event.c
--- mc-4.8.20/lib/event/event.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/event/event.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Handle  events in application.
    Interface functions: init/deinit; start/stop
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -92,7 +92,7 @@ mc_event_deinit (GError ** mcerror)
 /* --------------------------------------------------------------------------------------------- */
 
 gboolean
-mc_event_mass_add (event_init_t * events, GError ** mcerror)
+mc_event_mass_add (const event_init_t * events, GError ** mcerror)
 {
     size_t array_index;
 
diff -urpN mc-4.8.20/lib/event/manage.c mc-4.8.21/lib/event/manage.c
--- mc-4.8.20/lib/event/manage.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/event/manage.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Handle any events in application.
    Manage events: add, delete, destroy, search
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/event/raise.c mc-4.8.21/lib/event/raise.c
--- mc-4.8.20/lib/event/raise.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/event/raise.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Handle any events in application.
    Raise events.
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/event.h mc-4.8.21/lib/event.h
--- mc-4.8.20/lib/event.h	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/event.h	2018-05-27 21:56:21.000000000 +0200
@@ -34,7 +34,7 @@ void mc_event_del (const gchar *, const
 void mc_event_destroy (const gchar *, const gchar *);
 void mc_event_group_del (const gchar *);
 gboolean mc_event_present (const gchar *, const gchar *);
-gboolean mc_event_mass_add (event_init_t *, GError **);
+gboolean mc_event_mass_add (const event_init_t *, GError **);
 
 /* raise.c: */
 gboolean mc_event_raise (const gchar *, const gchar *, gpointer);
diff -urpN mc-4.8.20/lib/filehighlight/Makefile.in mc-4.8.21/lib/filehighlight/Makefile.in
--- mc-4.8.20/lib/filehighlight/Makefile.in	2017-11-25 19:33:51.000000000 +0100
+++ mc-4.8.21/lib/filehighlight/Makefile.in	2018-06-03 10:57:31.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/lib/filehighlight/common.c mc-4.8.21/lib/filehighlight/common.c
--- mc-4.8.20/lib/filehighlight/common.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/filehighlight/common.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    File highlight plugin.
    Interface functions
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/filehighlight/get-color.c mc-4.8.21/lib/filehighlight/get-color.c
--- mc-4.8.20/lib/filehighlight/get-color.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/filehighlight/get-color.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    File highlight plugin.
    Interface functions. get color pair index for highlighted file.
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/filehighlight/ini-file-read.c mc-4.8.21/lib/filehighlight/ini-file-read.c
--- mc-4.8.20/lib/filehighlight/ini-file-read.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/filehighlight/ini-file-read.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    File highlight plugin.
    Reading and parse rules from ini-files
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -160,7 +160,7 @@ mc_fhl_parse_get_extensions (mc_fhl_t *
     mc_filter->type = MC_FLHGH_T_FREGEXP;
     mc_filter->search_condition = mc_search_new_len (buf->str, buf->len, DEFAULT_CHARSET);
     mc_filter->search_condition->is_case_sensitive =
-        mc_config_get_bool (fhl->config, group_name, "extensions_case", TRUE);
+        mc_config_get_bool (fhl->config, group_name, "extensions_case", FALSE);
     mc_filter->search_condition->search_type = MC_SEARCH_T_REGEX;
 
     mc_fhl_parse_fill_color_info (mc_filter, fhl, group_name);
diff -urpN mc-4.8.20/lib/glibcompat.c mc-4.8.21/lib/glibcompat.c
--- mc-4.8.20/lib/glibcompat.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/glibcompat.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    GLIB - Library of useful routines for C programming
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/global.c mc-4.8.21/lib/global.c
--- mc-4.8.20/lib/global.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/global.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Global structure for some library-related variables
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/global.h mc-4.8.21/lib/global.h
--- mc-4.8.20/lib/global.h	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/global.h	2018-05-27 21:56:21.000000000 +0200
@@ -27,6 +27,12 @@
 /* for sig_atomic_t */
 #include <signal.h>
 
+#ifdef HAVE_FUNC_ATTRIBUTE_FALLTHROUGH
+#define MC_FALLTHROUGH __attribute__((fallthrough))
+#else
+#define MC_FALLTHROUGH
+#endif
+
 /*** typedefs(not structures) and defined constants **********************************************/
 
 /* The O_BINARY definition was taken from gettext */
@@ -128,7 +134,7 @@
 #define TMPDIR_DEFAULT "/tmp"
 #define SCRIPT_SUFFIX ""
 #define get_default_editor() "vi"
-#define OS_SORT_CASE_SENSITIVE_DEFAULT 1
+#define OS_SORT_CASE_SENSITIVE_DEFAULT TRUE
 #define UTF8_CHAR_LEN 6
 
 /* Used to distinguish between a normal MC termination and */
diff -urpN mc-4.8.20/lib/hook.c mc-4.8.21/lib/hook.c
--- mc-4.8.20/lib/hook.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/hook.c	2018-05-27 21:56:21.000000000 +0200
@@ -4,7 +4,7 @@
    Slavaz: Warning! this file is deprecated and should be replaced
    by mcevents functional.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/keybind.c mc-4.8.21/lib/keybind.c
--- mc-4.8.20/lib/keybind.c	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/lib/keybind.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Definitions of key bindings.
 
-   Copyright (C) 2005-2017
+   Copyright (C) 2005-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/lock.c mc-4.8.21/lib/lock.c
--- mc-4.8.20/lib/lock.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/lock.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    File locking
 
-   Copyright (C) 2003-2017
+   Copyright (C) 2003-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/logging.c mc-4.8.21/lib/logging.c
--- mc-4.8.20/lib/logging.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/logging.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Provides a log file to ease tracing the program.
 
-   Copyright (C) 2006-2017
+   Copyright (C) 2006-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/mcconfig/Makefile.in mc-4.8.21/lib/mcconfig/Makefile.in
--- mc-4.8.20/lib/mcconfig/Makefile.in	2017-11-25 19:33:51.000000000 +0100
+++ mc-4.8.21/lib/mcconfig/Makefile.in	2018-06-03 10:57:31.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/lib/mcconfig/common.c mc-4.8.21/lib/mcconfig/common.c
--- mc-4.8.20/lib/mcconfig/common.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/mcconfig/common.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Configure module for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/lib/mcconfig/get.c mc-4.8.21/lib/mcconfig/get.c
--- mc-4.8.20/lib/mcconfig/get.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/mcconfig/get.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Configure module for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/lib/mcconfig/paths.c mc-4.8.21/lib/mcconfig/paths.c
--- mc-4.8.20/lib/mcconfig/paths.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/mcconfig/paths.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    paths to configuration files
 
-   Copyright (C) 2010-2017
+   Copyright (C) 2010-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/mcconfig/set.c mc-4.8.21/lib/mcconfig/set.c
--- mc-4.8.20/lib/mcconfig/set.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/mcconfig/set.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Configure module for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/lib/search/Makefile.in mc-4.8.21/lib/search/Makefile.in
--- mc-4.8.20/lib/search/Makefile.in	2017-11-25 19:33:51.000000000 +0100
+++ mc-4.8.21/lib/search/Makefile.in	2018-06-03 10:57:31.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/lib/search/glob.c mc-4.8.21/lib/search/glob.c
--- mc-4.8.20/lib/search/glob.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/search/glob.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Search text engine.
    Glob-style pattern matching
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/search/hex.c mc-4.8.21/lib/search/hex.c
--- mc-4.8.20/lib/search/hex.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/search/hex.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Search text engine.
    HEX-style pattern matching
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/search/lib.c mc-4.8.21/lib/search/lib.c
--- mc-4.8.20/lib/search/lib.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/search/lib.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Search text engine.
    Common share code for module.
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -61,31 +61,27 @@ gchar *
 mc_search__recode_str (const char *str, gsize str_len,
                        const char *charset_from, const char *charset_to, gsize * bytes_written)
 {
-    gchar *ret;
-    gsize bytes_read;
-    GIConv conv;
+    gchar *ret = NULL;
 
-    if (charset_from == NULL || charset_to == NULL
-        || g_ascii_strcasecmp (charset_to, charset_from) == 0)
+    if (charset_from != NULL && charset_to != NULL
+        && g_ascii_strcasecmp (charset_to, charset_from) != 0)
     {
-        *bytes_written = str_len;
-        return g_strndup (str, str_len);
-    }
+        GIConv conv;
 
-    conv = g_iconv_open (charset_to, charset_from);
-    if (conv == INVALID_CONV)
-    {
-        *bytes_written = str_len;
-        return g_strndup (str, str_len);
+        conv = g_iconv_open (charset_to, charset_from);
+        if (conv != INVALID_CONV)
+        {
+            gsize bytes_read;
+
+            ret = g_convert_with_iconv (str, str_len, conv, &bytes_read, bytes_written, NULL);
+            g_iconv_close (conv);
+        }
     }
 
-    ret = g_convert_with_iconv (str, str_len, conv, &bytes_read, bytes_written, NULL);
-    g_iconv_close (conv);
-
     if (ret == NULL)
     {
         *bytes_written = str_len;
-        return g_strndup (str, str_len);
+        ret = g_strndup (str, str_len);
     }
 
     return ret;
@@ -125,13 +121,8 @@ mc_search__get_one_symbol (const char *c
     converted_str2 =
         mc_search__recode_str (converted_str, tmp_len, cp_display, charset, &converted_str_len);
 #endif
-    if (just_letters)
-    {
-        if (str_isalnum (converted_str) && !str_isdigit (converted_str))
-            *just_letters = TRUE;
-        else
-            *just_letters = FALSE;
-    }
+    if (just_letters != NULL)
+        *just_letters = str_isalnum (converted_str) && !str_isdigit (converted_str);
 #ifdef HAVE_CHARSET
     g_free (converted_str);
     return converted_str2;
diff -urpN mc-4.8.20/lib/search/normal.c mc-4.8.21/lib/search/normal.c
--- mc-4.8.20/lib/search/normal.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/search/normal.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Search text engine.
    Plain search
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -71,7 +71,7 @@ mc_search__normal_translate_to_regex (co
         case '-':
         case '|':
             g_string_append_c (buff, '\\');
-            /* fall through */
+            MC_FALLTHROUGH;
         default:
             g_string_append_c (buff, str[loop]);
             break;
diff -urpN mc-4.8.20/lib/search/regex.c mc-4.8.21/lib/search/regex.c
--- mc-4.8.20/lib/search/regex.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/search/regex.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Search text engine.
    Regex search
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/search/search.c mc-4.8.21/lib/search/search.c
--- mc-4.8.20/lib/search/search.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/search/search.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Search text engine.
    Interface functions
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/serialize.c mc-4.8.21/lib/serialize.c
--- mc-4.8.20/lib/serialize.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/serialize.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Provides a serialize/unserialize functionality for INI-like formats.
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -133,7 +133,7 @@ mc_deserialize_str (const char prefix, c
 {
     size_t data_len;
 
-    if ((data == NULL) || (strlen (data) == 0))
+    if ((data == NULL) || (*data == '\0'))
     {
         g_set_error (error, MC_ERROR, 0, FUNC_NAME ": Input data is NULL or empty.");
         return NULL;
diff -urpN mc-4.8.20/lib/shell.c mc-4.8.21/lib/shell.c
--- mc-4.8.20/lib/shell.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/shell.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Provides a functions for working with shell.
 
-   Copyright (C) 2006-2017
+   Copyright (C) 2006-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/skin/Makefile.in mc-4.8.21/lib/skin/Makefile.in
--- mc-4.8.20/lib/skin/Makefile.in	2017-11-25 19:33:51.000000000 +0100
+++ mc-4.8.21/lib/skin/Makefile.in	2018-06-03 10:57:31.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/lib/skin/colors-old.c mc-4.8.21/lib/skin/colors-old.c
--- mc-4.8.20/lib/skin/colors-old.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/skin/colors-old.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Skins engine.
    Work with colors - backward compatibility
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/skin/colors.c mc-4.8.21/lib/skin/colors.c
--- mc-4.8.20/lib/skin/colors.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/skin/colors.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Skins engine.
    Work with colors
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/skin/common.c mc-4.8.21/lib/skin/common.c
--- mc-4.8.20/lib/skin/common.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/skin/common.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Skins engine.
    Interface functions
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/skin/hc-skins.c mc-4.8.21/lib/skin/hc-skins.c
--- mc-4.8.20/lib/skin/hc-skins.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/skin/hc-skins.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Skins engine.
    Set of hardcoded skins
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/skin/ini-file.c mc-4.8.21/lib/skin/ini-file.c
--- mc-4.8.20/lib/skin/ini-file.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/skin/ini-file.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Skins engine.
    Reading and parse ini-files
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/skin/lines.c mc-4.8.21/lib/skin/lines.c
--- mc-4.8.20/lib/skin/lines.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/skin/lines.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Skins engine.
    Work with line draving chars.
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/strutil/Makefile.in mc-4.8.21/lib/strutil/Makefile.in
--- mc-4.8.20/lib/strutil/Makefile.in	2017-11-25 19:33:51.000000000 +0100
+++ mc-4.8.21/lib/strutil/Makefile.in	2018-06-03 10:57:31.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/lib/strutil/replace.c mc-4.8.21/lib/strutil/replace.c
--- mc-4.8.20/lib/strutil/replace.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/strutil/replace.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Functions for replacing substrings in strings.
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/strutil/strescape.c mc-4.8.21/lib/strutil/strescape.c
--- mc-4.8.20/lib/strutil/strescape.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/strutil/strescape.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Functions for escaping and unescaping strings
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/strutil/strutil.c mc-4.8.21/lib/strutil/strutil.c
--- mc-4.8.20/lib/strutil/strutil.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/strutil/strutil.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Common strings utilities
 
-   Copyright (C) 2007-2017
+   Copyright (C) 2007-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -47,14 +47,14 @@ GIConv str_cnv_not_convert = INVALID_CON
 /*** file scope variables ************************************************************************/
 
 /* names, that are used for utf-8 */
-static const char *str_utf8_encodings[] = {
+static const char *const str_utf8_encodings[] = {
     "utf-8",
     "utf8",
     NULL
 };
 
 /* standard 8bit encodings, no wide or multibytes characters */
-static const char *str_8bit_encodings[] = {
+static const char *const str_8bit_encodings[] = {
     "cp-1251",
     "cp1251",
     "cp-1250",
@@ -219,7 +219,7 @@ _str_convert (GIConv coder, const char *
 /* --------------------------------------------------------------------------------------------- */
 
 static int
-str_test_encoding_class (const char *encoding, const char **table)
+str_test_encoding_class (const char *encoding, const char *const *table)
 {
     int result = 0;
 
@@ -714,7 +714,7 @@ str_column_to_pos (const char *text, siz
 
 /* --------------------------------------------------------------------------------------------- */
 
-int
+gboolean
 str_isspace (const char *ch)
 {
     return used_class.char_isspace (ch);
@@ -722,7 +722,7 @@ str_isspace (const char *ch)
 
 /* --------------------------------------------------------------------------------------------- */
 
-int
+gboolean
 str_ispunct (const char *ch)
 {
     return used_class.char_ispunct (ch);
@@ -730,7 +730,7 @@ str_ispunct (const char *ch)
 
 /* --------------------------------------------------------------------------------------------- */
 
-int
+gboolean
 str_isalnum (const char *ch)
 {
     return used_class.char_isalnum (ch);
@@ -738,7 +738,7 @@ str_isalnum (const char *ch)
 
 /* --------------------------------------------------------------------------------------------- */
 
-int
+gboolean
 str_isdigit (const char *ch)
 {
     return used_class.char_isdigit (ch);
@@ -746,7 +746,7 @@ str_isdigit (const char *ch)
 
 /* --------------------------------------------------------------------------------------------- */
 
-int
+gboolean
 str_toupper (const char *ch, char **out, size_t * remain)
 {
     return used_class.char_toupper (ch, out, remain);
@@ -754,7 +754,7 @@ str_toupper (const char *ch, char **out,
 
 /* --------------------------------------------------------------------------------------------- */
 
-int
+gboolean
 str_tolower (const char *ch, char **out, size_t * remain)
 {
     return used_class.char_tolower (ch, out, remain);
@@ -762,7 +762,7 @@ str_tolower (const char *ch, char **out,
 
 /* --------------------------------------------------------------------------------------------- */
 
-int
+gboolean
 str_isprint (const char *ch)
 {
     return used_class.char_isprint (ch);
@@ -787,7 +787,7 @@ str_trunc (const char *text, int width)
 /* --------------------------------------------------------------------------------------------- */
 
 char *
-str_create_search_needle (const char *needle, int case_sen)
+str_create_search_needle (const char *needle, gboolean case_sen)
 {
     return used_class.create_search_needle (needle, case_sen);
 }
@@ -795,7 +795,7 @@ str_create_search_needle (const char *ne
 /* --------------------------------------------------------------------------------------------- */
 
 void
-str_release_search_needle (char *needle, int case_sen)
+str_release_search_needle (char *needle, gboolean case_sen)
 {
     used_class.release_search_needle (needle, case_sen);
 }
@@ -803,7 +803,7 @@ str_release_search_needle (char *needle,
 /* --------------------------------------------------------------------------------------------- */
 
 const char *
-str_search_first (const char *text, const char *search, int case_sen)
+str_search_first (const char *text, const char *search, gboolean case_sen)
 {
     return used_class.search_first (text, search, case_sen);
 }
@@ -811,14 +811,14 @@ str_search_first (const char *text, cons
 /* --------------------------------------------------------------------------------------------- */
 
 const char *
-str_search_last (const char *text, const char *search, int case_sen)
+str_search_last (const char *text, const char *search, gboolean case_sen)
 {
     return used_class.search_last (text, search, case_sen);
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-int
+gboolean
 str_is_valid_string (const char *text)
 {
     return used_class.is_valid_string (text);
@@ -883,7 +883,7 @@ str_fix_string (char *text)
 /* --------------------------------------------------------------------------------------------- */
 
 char *
-str_create_key (const char *text, int case_sen)
+str_create_key (const char *text, gboolean case_sen)
 {
     return used_class.create_key (text, case_sen);
 }
@@ -891,7 +891,7 @@ str_create_key (const char *text, int ca
 /* --------------------------------------------------------------------------------------------- */
 
 char *
-str_create_key_for_filename (const char *text, int case_sen)
+str_create_key_for_filename (const char *text, gboolean case_sen)
 {
     return used_class.create_key_for_filename (text, case_sen);
 }
@@ -899,7 +899,7 @@ str_create_key_for_filename (const char
 /* --------------------------------------------------------------------------------------------- */
 
 int
-str_key_collate (const char *t1, const char *t2, int case_sen)
+str_key_collate (const char *t1, const char *t2, gboolean case_sen)
 {
     return used_class.key_collate (t1, t2, case_sen);
 }
@@ -907,7 +907,7 @@ str_key_collate (const char *t1, const c
 /* --------------------------------------------------------------------------------------------- */
 
 void
-str_release_key (char *key, int case_sen)
+str_release_key (char *key, gboolean case_sen)
 {
     used_class.release_key (key, case_sen);
 }
diff -urpN mc-4.8.20/lib/strutil/strutil8bit.c mc-4.8.21/lib/strutil/strutil8bit.c
--- mc-4.8.20/lib/strutil/strutil8bit.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/strutil/strutil8bit.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    8bit strings utilities
 
-   Copyright (C) 2007-2017
+   Copyright (C) 2007-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -84,11 +84,11 @@ str_8bit_insert_replace_char (GString *
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_8bit_is_valid_string (const char *text)
 {
     (void) text;
-    return 1;
+    return TRUE;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -143,42 +143,42 @@ str_8bit_cprev_noncomb_char (const char
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_8bit_isspace (const char *text)
 {
-    return char_isspace (text[0]);
+    return char_isspace (text[0]) != 0;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_8bit_ispunct (const char *text)
 {
-    return char_ispunct (text[0]);
+    return char_ispunct (text[0]) != 0;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_8bit_isalnum (const char *text)
 {
-    return char_isalnum (text[0]);
+    return char_isalnum (text[0]) != 0;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_8bit_isdigit (const char *text)
 {
-    return char_isdigit (text[0]);
+    return char_isdigit (text[0]) != 0;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_8bit_isprint (const char *text)
 {
-    return char_isprint (text[0]);
+    return char_isprint (text[0]) != 0;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -196,26 +196,26 @@ static int
 str_8bit_toupper (const char *text, char **out, size_t * remain)
 {
     if (*remain <= 1)
-        return 0;
+        return FALSE;
 
     (*out)[0] = char_toupper (text[0]);
     (*out)++;
     (*remain)--;
-    return 1;
+    return TRUE;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_8bit_tolower (const char *text, char **out, size_t * remain)
 {
     if (*remain <= 1)
-        return 0;
+        return FALSE;
 
     (*out)[0] = char_tolower (text[0]);
     (*out)++;
     (*remain)--;
-    return 1;
+    return TRUE;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -553,7 +553,7 @@ str_8bit_column_to_pos (const char *text
 /* --------------------------------------------------------------------------------------------- */
 
 static char *
-str_8bit_create_search_needle (const char *needle, int case_sen)
+str_8bit_create_search_needle (const char *needle, gboolean case_sen)
 {
     (void) case_sen;
     return (char *) needle;
@@ -562,7 +562,7 @@ str_8bit_create_search_needle (const cha
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-str_8bit_release_search_needle (char *needle, int case_sen)
+str_8bit_release_search_needle (char *needle, gboolean case_sen)
 {
     (void) case_sen;
     (void) needle;
@@ -589,14 +589,14 @@ str_8bit_strdown (const char *str)
 /* --------------------------------------------------------------------------------------------- */
 
 static const char *
-str_8bit_search_first (const char *text, const char *search, int case_sen)
+str_8bit_search_first (const char *text, const char *search, gboolean case_sen)
 {
     char *fold_text;
     char *fold_search;
     const char *match;
 
-    fold_text = (case_sen) ? (char *) text : str_8bit_strdown (text);
-    fold_search = (case_sen) ? (char *) search : str_8bit_strdown (search);
+    fold_text = case_sen ? (char *) text : str_8bit_strdown (text);
+    fold_search = case_sen ? (char *) search : str_8bit_strdown (search);
 
     match = g_strstr_len (fold_text, -1, fold_search);
     if (match != NULL)
@@ -619,14 +619,14 @@ str_8bit_search_first (const char *text,
 /* --------------------------------------------------------------------------------------------- */
 
 static const char *
-str_8bit_search_last (const char *text, const char *search, int case_sen)
+str_8bit_search_last (const char *text, const char *search, gboolean case_sen)
 {
     char *fold_text;
     char *fold_search;
     const char *match;
 
-    fold_text = (case_sen) ? (char *) text : str_8bit_strdown (text);
-    fold_search = (case_sen) ? (char *) search : str_8bit_strdown (search);
+    fold_text = case_sen ? (char *) text : str_8bit_strdown (text);
+    fold_search = case_sen ? (char *) search : str_8bit_strdown (search);
 
     match = g_strrstr_len (fold_text, -1, fold_search);
     if (match != NULL)
@@ -775,26 +775,23 @@ str_8bit_fix_string (char *text)
 /* --------------------------------------------------------------------------------------------- */
 
 static char *
-str_8bit_create_key (const char *text, int case_sen)
+str_8bit_create_key (const char *text, gboolean case_sen)
 {
-    return (case_sen) ? (char *) text : str_8bit_strdown (text);
+    return case_sen ? (char *) text : str_8bit_strdown (text);
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
 static int
-str_8bit_key_collate (const char *t1, const char *t2, int case_sen)
+str_8bit_key_collate (const char *t1, const char *t2, gboolean case_sen)
 {
-    if (case_sen)
-        return strcmp (t1, t2);
-    else
-        return strcoll (t1, t2);
+    return case_sen ? strcmp (t1, t2) : strcoll (t1, t2);
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-str_8bit_release_key (char *key, int case_sen)
+str_8bit_release_key (char *key, gboolean case_sen)
 {
     if (!case_sen)
         g_free (key);
diff -urpN mc-4.8.20/lib/strutil/strutilascii.c mc-4.8.21/lib/strutil/strutilascii.c
--- mc-4.8.20/lib/strutil/strutilascii.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/strutil/strutilascii.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    ASCII strings utilities
 
-   Copyright (C) 2007-2017
+   Copyright (C) 2007-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -57,11 +57,11 @@ str_ascii_insert_replace_char (GString *
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_ascii_is_valid_string (const char *text)
 {
     (void) text;
-    return 1;
+    return TRUE;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -116,7 +116,7 @@ str_ascii_cprev_noncomb_char (const char
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_ascii_isspace (const char *text)
 {
     return g_ascii_isspace ((gchar) text[0]);
@@ -124,7 +124,7 @@ str_ascii_isspace (const char *text)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_ascii_ispunct (const char *text)
 {
     return g_ascii_ispunct ((gchar) text[0]);
@@ -132,7 +132,7 @@ str_ascii_ispunct (const char *text)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_ascii_isalnum (const char *text)
 {
     return g_ascii_isalnum ((gchar) text[0]);
@@ -140,7 +140,7 @@ str_ascii_isalnum (const char *text)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_ascii_isdigit (const char *text)
 {
     return g_ascii_isdigit ((gchar) text[0]);
@@ -148,7 +148,7 @@ str_ascii_isdigit (const char *text)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_ascii_isprint (const char *text)
 {
     return g_ascii_isprint ((gchar) text[0]);
@@ -169,26 +169,26 @@ static int
 str_ascii_toupper (const char *text, char **out, size_t * remain)
 {
     if (*remain <= 1)
-        return 0;
+        return FALSE;
 
     (*out)[0] = (char) g_ascii_toupper ((gchar) text[0]);
     (*out)++;
     (*remain)--;
-    return 1;
+    return TRUE;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_ascii_tolower (const char *text, char **out, size_t * remain)
 {
     if (*remain <= 1)
-        return 0;
+        return FALSE;
 
     (*out)[0] = (char) g_ascii_tolower ((gchar) text[0]);
     (*out)++;
     (*remain)--;
-    return 1;
+    return TRUE;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -551,7 +551,7 @@ str_ascii_column_to_pos (const char *tex
 /* --------------------------------------------------------------------------------------------- */
 
 static char *
-str_ascii_create_search_needle (const char *needle, int case_sen)
+str_ascii_create_search_needle (const char *needle, gboolean case_sen)
 {
     (void) case_sen;
     return (char *) needle;
@@ -560,7 +560,7 @@ str_ascii_create_search_needle (const ch
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-str_ascii_release_search_needle (char *needle, int case_sen)
+str_ascii_release_search_needle (char *needle, gboolean case_sen)
 {
     (void) case_sen;
     (void) needle;
@@ -570,14 +570,14 @@ str_ascii_release_search_needle (char *n
 /* --------------------------------------------------------------------------------------------- */
 
 static const char *
-str_ascii_search_first (const char *text, const char *search, int case_sen)
+str_ascii_search_first (const char *text, const char *search, gboolean case_sen)
 {
     char *fold_text;
     char *fold_search;
     const char *match;
 
-    fold_text = (case_sen) ? (char *) text : g_ascii_strdown (text, -1);
-    fold_search = (case_sen) ? (char *) search : g_ascii_strdown (search, -1);
+    fold_text = case_sen ? (char *) text : g_ascii_strdown (text, -1);
+    fold_search = case_sen ? (char *) search : g_ascii_strdown (search, -1);
 
     match = g_strstr_len (fold_text, -1, fold_search);
     if (match != NULL)
@@ -600,14 +600,14 @@ str_ascii_search_first (const char *text
 /* --------------------------------------------------------------------------------------------- */
 
 static const char *
-str_ascii_search_last (const char *text, const char *search, int case_sen)
+str_ascii_search_last (const char *text, const char *search, gboolean case_sen)
 {
     char *fold_text;
     char *fold_search;
     const char *match;
 
-    fold_text = (case_sen) ? (char *) text : g_ascii_strdown (text, -1);
-    fold_search = (case_sen) ? (char *) search : g_ascii_strdown (search, -1);
+    fold_text = case_sen ? (char *) text : g_ascii_strdown (text, -1);
+    fold_search = case_sen ? (char *) search : g_ascii_strdown (search, -1);
 
     match = g_strrstr_len (fold_text, -1, fold_search);
     if (match != NULL)
@@ -671,7 +671,7 @@ str_ascii_fix_string (char *text)
 /* --------------------------------------------------------------------------------------------- */
 
 static char *
-str_ascii_create_key (const char *text, int case_sen)
+str_ascii_create_key (const char *text, gboolean case_sen)
 {
     (void) case_sen;
     return (char *) text;
@@ -680,15 +680,15 @@ str_ascii_create_key (const char *text,
 /* --------------------------------------------------------------------------------------------- */
 
 static int
-str_ascii_key_collate (const char *t1, const char *t2, int case_sen)
+str_ascii_key_collate (const char *t1, const char *t2, gboolean case_sen)
 {
-    return (case_sen) ? strcmp (t1, t2) : g_ascii_strcasecmp (t1, t2);
+    return case_sen ? strcmp (t1, t2) : g_ascii_strcasecmp (t1, t2);
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-str_ascii_release_key (char *key, int case_sen)
+str_ascii_release_key (char *key, gboolean case_sen)
 {
     (void) key;
     (void) case_sen;
diff -urpN mc-4.8.20/lib/strutil/strutilutf8.c mc-4.8.21/lib/strutil/strutilutf8.c
--- mc-4.8.20/lib/strutil/strutilutf8.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/lib/strutil/strutilutf8.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    UTF-8 strings utilities
 
-   Copyright (C) 2007-2017
+   Copyright (C) 2007-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -84,7 +84,7 @@ str_utf8_insert_replace_char (GString *
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_utf8_is_valid_string (const char *text)
 {
     return g_utf8_validate (text, -1, NULL);
@@ -171,7 +171,7 @@ str_utf8_fix_string (char *text)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_utf8_isspace (const char *text)
 {
     gunichar uni;
@@ -182,7 +182,7 @@ str_utf8_isspace (const char *text)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_utf8_ispunct (const char *text)
 {
     gunichar uni;
@@ -193,7 +193,7 @@ str_utf8_ispunct (const char *text)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_utf8_isalnum (const char *text)
 {
     gunichar uni;
@@ -204,7 +204,7 @@ str_utf8_isalnum (const char *text)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_utf8_isdigit (const char *text)
 {
     gunichar uni;
@@ -215,7 +215,7 @@ str_utf8_isdigit (const char *text)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_utf8_isprint (const char *ch)
 {
     gunichar uni;
@@ -273,7 +273,7 @@ str_utf8_cprev_noncomb_char (const char
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_utf8_toupper (const char *text, char **out, size_t * remain)
 {
     gunichar uni;
@@ -281,22 +281,22 @@ str_utf8_toupper (const char *text, char
 
     uni = g_utf8_get_char_validated (text, -1);
     if (uni == (gunichar) (-1) || uni == (gunichar) (-2))
-        return 0;
+        return FALSE;
 
     uni = g_unichar_toupper (uni);
     left = g_unichar_to_utf8 (uni, NULL);
     if (left >= *remain)
-        return 0;
+        return FALSE;
 
     left = g_unichar_to_utf8 (uni, *out);
     (*out) += left;
     (*remain) -= left;
-    return 1;
+    return TRUE;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-static int
+static gboolean
 str_utf8_tolower (const char *text, char **out, size_t * remain)
 {
     gunichar uni;
@@ -304,17 +304,17 @@ str_utf8_tolower (const char *text, char
 
     uni = g_utf8_get_char_validated (text, -1);
     if (uni == (gunichar) (-1) || uni == (gunichar) (-2))
-        return 0;
+        return FALSE;
 
     uni = g_unichar_tolower (uni);
     left = g_unichar_to_utf8 (uni, NULL);
     if (left >= *remain)
-        return 0;
+        return FALSE;
 
     left = g_unichar_to_utf8 (uni, *out);
     (*out) += left;
     (*remain) -= left;
-    return 1;
+    return TRUE;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -956,7 +956,7 @@ str_utf8_column_to_pos (const char *text
 /* --------------------------------------------------------------------------------------------- */
 
 static char *
-str_utf8_create_search_needle (const char *needle, int case_sen)
+str_utf8_create_search_needle (const char *needle, gboolean case_sen)
 {
     char *fold, *result;
 
@@ -966,7 +966,6 @@ str_utf8_create_search_needle (const cha
     if (case_sen)
         return g_utf8_normalize (needle, -1, G_NORMALIZE_ALL);
 
-
     fold = g_utf8_casefold (needle, -1);
     result = g_utf8_normalize (fold, -1, G_NORMALIZE_ALL);
     g_free (fold);
@@ -976,7 +975,7 @@ str_utf8_create_search_needle (const cha
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-str_utf8_release_search_needle (char *needle, int case_sen)
+str_utf8_release_search_needle (char *needle, gboolean case_sen)
 {
     (void) case_sen;
     g_free (needle);
@@ -985,7 +984,7 @@ str_utf8_release_search_needle (char *ne
 /* --------------------------------------------------------------------------------------------- */
 
 static const char *
-str_utf8_search_first (const char *text, const char *search, int case_sen)
+str_utf8_search_first (const char *text, const char *search, gboolean case_sen)
 {
     char *fold_text;
     char *deco_text;
@@ -993,7 +992,7 @@ str_utf8_search_first (const char *text,
     const char *result = NULL;
     const char *m;
 
-    fold_text = (case_sen) ? (char *) text : g_utf8_casefold (text, -1);
+    fold_text = case_sen ? (char *) text : g_utf8_casefold (text, -1);
     deco_text = g_utf8_normalize (fold_text, -1, G_NORMALIZE_ALL);
 
     match = deco_text;
@@ -1029,7 +1028,7 @@ str_utf8_search_first (const char *text,
 /* --------------------------------------------------------------------------------------------- */
 
 static const char *
-str_utf8_search_last (const char *text, const char *search, int case_sen)
+str_utf8_search_last (const char *text, const char *search, gboolean case_sen)
 {
     char *fold_text;
     char *deco_text;
@@ -1037,7 +1036,7 @@ str_utf8_search_last (const char *text,
     const char *result = NULL;
     const char *m;
 
-    fold_text = (case_sen) ? (char *) text : g_utf8_casefold (text, -1);
+    fold_text = case_sen ? (char *) text : g_utf8_casefold (text, -1);
     deco_text = g_utf8_normalize (fold_text, -1, G_NORMALIZE_ALL);
 
     do
@@ -1343,7 +1342,7 @@ str_utf8_caseprefix (const char *text, c
 /* --------------------------------------------------------------------------------------------- */
 
 static char *
-str_utf8_create_key_gen (const char *text, int case_sen,
+str_utf8_create_key_gen (const char *text, gboolean case_sen,
                          gchar * (*keygen) (const gchar * text, gssize size))
 {
     char *result;
@@ -1417,7 +1416,7 @@ str_utf8_create_key_gen (const char *tex
 /* --------------------------------------------------------------------------------------------- */
 
 static char *
-str_utf8_create_key (const char *text, int case_sen)
+str_utf8_create_key (const char *text, gboolean case_sen)
 {
     return str_utf8_create_key_gen (text, case_sen, g_utf8_collate_key);
 }
@@ -1426,7 +1425,7 @@ str_utf8_create_key (const char *text, i
 
 #ifdef MC__USE_STR_UTF8_CREATE_KEY_FOR_FILENAME
 static char *
-str_utf8_create_key_for_filename (const char *text, int case_sen)
+str_utf8_create_key_for_filename (const char *text, gboolean case_sen)
 {
     return str_utf8_create_key_gen (text, case_sen, g_utf8_collate_key_for_filename);
 }
@@ -1435,7 +1434,7 @@ str_utf8_create_key_for_filename (const
 /* --------------------------------------------------------------------------------------------- */
 
 static int
-str_utf8_key_collate (const char *t1, const char *t2, int case_sen)
+str_utf8_key_collate (const char *t1, const char *t2, gboolean case_sen)
 {
     (void) case_sen;
     return strcmp (t1, t2);
@@ -1444,7 +1443,7 @@ str_utf8_key_collate (const char *t1, co
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-str_utf8_release_key (char *key, int case_sen)
+str_utf8_release_key (char *key, gboolean case_sen)
 {
     (void) case_sen;
     g_free (key);
diff -urpN mc-4.8.20/lib/strutil/strverscmp.c mc-4.8.21/lib/strutil/strverscmp.c
--- mc-4.8.20/lib/strutil/strverscmp.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/strutil/strverscmp.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Compare strings while treating digits characters numerically.
 
-   Copyright (C) 1997-2017
+   Copyright (C) 1997-2018
    Free Software Foundation, Inc.
 
    This file is part of the GNU C Library.
diff -urpN mc-4.8.20/lib/strutil/xstrtol.c mc-4.8.21/lib/strutil/xstrtol.c
--- mc-4.8.20/lib/strutil/xstrtol.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/strutil/xstrtol.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,6 +1,6 @@
 /* A more useful interface to strtol.
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    This program is free software: you can redistribute it and/or modify
diff -urpN mc-4.8.20/lib/strutil.h mc-4.8.21/lib/strutil.h
--- mc-4.8.20/lib/strutil.h	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/strutil.h	2018-05-27 21:56:21.000000000 +0200
@@ -103,10 +103,11 @@ typedef enum
 /* all functions in str_class must be defined for every encoding */
 struct str_class
 {
+    /* *INDENT-OFF* */
     gchar *(*conv_gerror_message) (GError * error, const char *def_msg);
       /*I*/ estr_t (*vfs_convert_to) (GIConv coder, const char *string, int size, GString * buffer);
       /*I*/ void (*insert_replace_char) (GString * buffer);
-    int (*is_valid_string) (const char *);
+    gboolean (*is_valid_string) (const char *);
       /*I*/ int (*is_valid_char) (const char *, size_t);
       /*I*/ void (*cnext_char) (const char **);
     void (*cprev_char) (const char **);
@@ -114,17 +115,17 @@ struct str_class
       /*I*/ void (*cprev_char_safe) (const char **);
       /*I*/ int (*cnext_noncomb_char) (const char **text);
       /*I*/ int (*cprev_noncomb_char) (const char **text, const char *begin);
-      /*I*/ int (*char_isspace) (const char *);
-      /*I*/ int (*char_ispunct) (const char *);
-      /*I*/ int (*char_isalnum) (const char *);
-      /*I*/ int (*char_isdigit) (const char *);
-      /*I*/ int (*char_isprint) (const char *);
+      /*I*/ gboolean (*char_isspace) (const char *);
+      /*I*/ gboolean (*char_ispunct) (const char *);
+      /*I*/ gboolean (*char_isalnum) (const char *);
+      /*I*/ gboolean (*char_isdigit) (const char *);
+      /*I*/ gboolean (*char_isprint) (const char *);
       /*I*/ gboolean (*char_iscombiningmark) (const char *);
       /*I*/ int (*length) (const char *);
       /*I*/ int (*length2) (const char *, int);
       /*I*/ int (*length_noncomb) (const char *);
-      /*I*/ int (*char_toupper) (const char *, char **, size_t *);
-    int (*char_tolower) (const char *, char **, size_t *);
+      /*I*/ gboolean (*char_toupper) (const char *, char **, size_t *);
+    gboolean (*char_tolower) (const char *, char **, size_t *);
     void (*fix_string) (char *);
       /*I*/ const char *(*term_form) (const char *);
       /*I*/ const char *(*fit_to_term) (const char *, int, align_crt_t);
@@ -136,21 +137,22 @@ struct str_class
       /*I*/ const char *(*trunc) (const char *, int);
       /*I*/ int (*offset_to_pos) (const char *, size_t);
       /*I*/ int (*column_to_pos) (const char *, size_t);
-      /*I*/ char *(*create_search_needle) (const char *, int);
-    void (*release_search_needle) (char *, int);
-    const char *(*search_first) (const char *, const char *, int);
-    const char *(*search_last) (const char *, const char *, int);
+      /*I*/ char *(*create_search_needle) (const char *, gboolean);
+    void (*release_search_needle) (char *, gboolean);
+    const char *(*search_first) (const char *, const char *, gboolean);
+    const char *(*search_last) (const char *, const char *, gboolean);
     int (*compare) (const char *, const char *);
       /*I*/ int (*ncompare) (const char *, const char *);
       /*I*/ int (*casecmp) (const char *, const char *);
       /*I*/ int (*ncasecmp) (const char *, const char *);
       /*I*/ int (*prefix) (const char *, const char *);
       /*I*/ int (*caseprefix) (const char *, const char *);
-      /*I*/ char *(*create_key) (const char *text, int case_sen);
-      /*I*/ char *(*create_key_for_filename) (const char *text, int case_sen);
-      /*I*/ int (*key_collate) (const char *t1, const char *t2, int case_sen);
-      /*I*/ void (*release_key) (char *key, int case_sen);
-  /*I*/};
+      /*I*/ char *(*create_key) (const char *text, gboolean case_sen);
+      /*I*/ char *(*create_key_for_filename) (const char *text, gboolean case_sen);
+      /*I*/ int (*key_collate) (const char *t1, const char *t2, gboolean case_sen);
+      /*I*/ void (*release_key) (char *key, gboolean case_sen);
+    /* *INDENT-ON* */
+};
 
 /*** global variables defined in .c file *********************************************************/
 
@@ -245,7 +247,7 @@ estr_t str_translate_char (GIConv conv,
 /* test, if text is valid in terminal encoding
  * I
  */
-int str_is_valid_string (const char *text);
+gboolean str_is_valid_string (const char *text);
 
 /* test, if first char of ch is valid
  * size, how many bytes characters occupied, could be (size_t)(-1)
@@ -322,27 +324,27 @@ int str_cprev_noncomb_char (const char *
 /* if first characters in ch is space, tabulator  or new lines
  * I
  */
-int str_isspace (const char *ch);
+gboolean str_isspace (const char *ch);
 
 /* if first characters in ch is punctuation or symbol
  * I
  */
-int str_ispunct (const char *ch);
+gboolean str_ispunct (const char *ch);
 
 /* if first characters in ch is alphanum
  * I
  */
-int str_isalnum (const char *ch);
+gboolean str_isalnum (const char *ch);
 
 /* if first characters in ch is digit
  * I
  */
-int str_isdigit (const char *ch);
+gboolean str_isdigit (const char *ch);
 
 /* if first characters in ch is printable
  * I
  */
-int str_isprint (const char *ch);
+gboolean str_isprint (const char *ch);
 
 /* if first characters in ch is a combining mark (only in utf-8)
  * combining makrs are assumed to be zero width 
@@ -354,13 +356,13 @@ gboolean str_iscombiningmark (const char
  * decrase remain by size of returned characters
  * if out is not big enough, do nothing
  */
-int str_toupper (const char *ch, char **out, size_t * remain);
+gboolean str_toupper (const char *ch, char **out, size_t * remain);
 
 /* write upper from of fisrt characters in ch into out
  * decrase remain by size of returned characters
  * if out is not big enough, do nothing
  */
-int str_tolower (const char *ch, char **out, size_t * remain);
+gboolean str_tolower (const char *ch, char **out, size_t * remain);
 
 /* return length of text in characters
  * I
@@ -455,19 +457,19 @@ const char *str_trunc (const char *text,
  * so needle can be reused
  * in UTF-8 return normalized form of needle
  */
-char *str_create_search_needle (const char *needle, int case_sen);
+char *str_create_search_needle (const char *needle, gboolean case_sen);
 
 /* free needle returned by str_create_search_needle
  */
-void str_release_search_needle (char *needle, int case_sen);
+void str_release_search_needle (char *needle, gboolean case_sen);
 
 /* search for first occurrence of search in text
  */
-const char *str_search_first (const char *text, const char *needle, int case_sen);
+const char *str_search_first (const char *text, const char *needle, gboolean case_sen);
 
 /* search for last occurrence of search in text
  */
-const char *str_search_last (const char *text, const char *needle, int case_sen);
+const char *str_search_last (const char *text, const char *needle, gboolean case_sen);
 
 /* case sensitive compare two strings
  * I
@@ -507,25 +509,25 @@ int str_caseprefix (const char *text, co
 /* create a key that is used by str_key_collate
  * I
  */
-char *str_create_key (const char *text, int case_sen);
+char *str_create_key (const char *text, gboolean case_sen);
 
 /* create a key that is used by str_key_collate
  * should aware dot '.' in text
  * I
  */
-char *str_create_key_for_filename (const char *text, int case_sen);
+char *str_create_key_for_filename (const char *text, gboolean case_sen);
 
 /* compare two string using LC_COLLATE, if is possible
  * if case_sen is set, comparing is case sensitive,
  * case_sen must be same for str_create_key, str_key_collate and str_release_key
  * I
  */
-int str_key_collate (const char *t1, const char *t2, int case_sen);
+int str_key_collate (const char *t1, const char *t2, gboolean case_sen);
 
 /* release_key created by str_create_key, only rigth way to release key
  * I
  */
-void str_release_key (char *key, int case_sen);
+void str_release_key (char *key, gboolean case_sen);
 
 /* return TRUE if codeset_name is utf8 or utf-8
  * I
diff -urpN mc-4.8.20/lib/timefmt.c mc-4.8.21/lib/timefmt.c
--- mc-4.8.20/lib/timefmt.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/lib/timefmt.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Time formatting functions
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/timer.c mc-4.8.21/lib/timer.c
--- mc-4.8.20/lib/timer.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/timer.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Simple timer for the Midnight Commander.
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/Makefile.in mc-4.8.21/lib/tty/Makefile.in
--- mc-4.8.20/lib/tty/Makefile.in	2017-11-25 19:33:51.000000000 +0100
+++ mc-4.8.21/lib/tty/Makefile.in	2018-06-03 10:57:31.000000000 +0200
@@ -116,6 +116,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -123,6 +124,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/lib/tty/color-internal.c mc-4.8.21/lib/tty/color-internal.c
--- mc-4.8.20/lib/tty/color-internal.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/tty/color-internal.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Internal stuff of color setup
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/color-ncurses.c mc-4.8.21/lib/tty/color-ncurses.c
--- mc-4.8.20/lib/tty/color-ncurses.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/tty/color-ncurses.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Color setup for NCurses screen library
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/color-slang.c mc-4.8.21/lib/tty/color-slang.c
--- mc-4.8.20/lib/tty/color-slang.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/tty/color-slang.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Color setup for S_Lang screen library
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/color.c mc-4.8.21/lib/tty/color.c
--- mc-4.8.20/lib/tty/color.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/tty/color.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Color setup.
    Interface functions.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/key.c mc-4.8.21/lib/tty/key.c
--- mc-4.8.20/lib/tty/key.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/tty/key.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Keyboard support routines.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/keyxdef.c mc-4.8.21/lib/tty/keyxdef.c
--- mc-4.8.20/lib/tty/keyxdef.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/tty/keyxdef.c	2018-05-27 21:56:21.000000000 +0200
@@ -3,7 +3,7 @@
 /*
    Additional keyboard support routines.
 
-   Copyright (C) 1998-2017
+   Copyright (C) 1998-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/mouse.c mc-4.8.21/lib/tty/mouse.c
--- mc-4.8.20/lib/tty/mouse.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/tty/mouse.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Mouse managing
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/tty-ncurses.c mc-4.8.21/lib/tty/tty-ncurses.c
--- mc-4.8.20/lib/tty/tty-ncurses.c	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/lib/tty/tty-ncurses.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Interface to the terminal controlling library.
    Ncurses wrapper.
 
-   Copyright (C) 2005-2017
+   Copyright (C) 2005-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/tty-slang.c mc-4.8.21/lib/tty/tty-slang.c
--- mc-4.8.20/lib/tty/tty-slang.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/tty/tty-slang.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Interface to the terminal controlling library.
    Slang wrapper.
 
-   Copyright (C) 2005-2017
+   Copyright (C) 2005-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/tty.c mc-4.8.21/lib/tty/tty.c
--- mc-4.8.20/lib/tty/tty.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/tty/tty.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Interface to the terminal controlling library.
 
-   Copyright (C) 2005-2017
+   Copyright (C) 2005-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/win.c mc-4.8.21/lib/tty/win.c
--- mc-4.8.20/lib/tty/win.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/tty/win.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Terminal management xterm and rxvt support
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/tty/x11conn.c mc-4.8.21/lib/tty/x11conn.c
--- mc-4.8.20/lib/tty/x11conn.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/tty/x11conn.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    X11 support for the Midnight Commander.
 
-   Copyright (C) 2005-2017
+   Copyright (C) 2005-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/util.c mc-4.8.21/lib/util.c
--- mc-4.8.20/lib/util.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/lib/util.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Various utilities
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -383,7 +383,9 @@ size_trunc_sep (uintmax_t size, gboolean
     p += strlen (p) - 1;
     d = x + sizeof (x) - 1;
     *d-- = '\0';
-    while (p >= y && (isalpha ((unsigned char) *p) || (unsigned char) *p == ' '))
+    /* @size format is "size unit", i.e. "[digits][space][letters]".
+       Copy all charactes after digits. */
+    while (p >= y && !g_ascii_isdigit (*p))
         *d-- = *p--;
     for (count = 0; p >= y; count++)
     {
@@ -891,6 +893,9 @@ get_compression_type (int fd, const char
         && magic[2] == 0x7A && magic[3] == 0x58 && magic[4] == 0x5A && magic[5] == 0x00)
         return COMPRESSION_XZ;
 
+    if (magic[0] == 0x28 && magic[1] == 0xB5 && magic[2] == 0x2F && magic[3] == 0xFD)
+        return COMPRESSION_ZSTD;
+
     str_len = strlen (name);
     /* HACK: we must belive to extension of LZMA file :) ... */
     if ((str_len > 5 && strcmp (&name[str_len - 5], ".lzma") == 0) ||
@@ -921,6 +926,8 @@ decompress_extension (int type)
         return "/ulzma" VFS_PATH_URL_DELIMITER;
     case COMPRESSION_XZ:
         return "/uxz" VFS_PATH_URL_DELIMITER;
+    case COMPRESSION_ZSTD:
+        return "/uzst" VFS_PATH_URL_DELIMITER;
     default:
         break;
     }
diff -urpN mc-4.8.20/lib/util.h mc-4.8.21/lib/util.h
--- mc-4.8.20/lib/util.h	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/util.h	2018-05-27 21:56:21.000000000 +0200
@@ -60,7 +60,8 @@ enum compression_type
     COMPRESSION_LZIP,
     COMPRESSION_LZ4,
     COMPRESSION_LZMA,
-    COMPRESSION_XZ
+    COMPRESSION_XZ,
+    COMPRESSION_ZSTD,
 };
 
 /* stdout or stderr stream of child process */
@@ -214,11 +215,7 @@ char *tilde_expand (const char *);
 void custom_canonicalize_pathname (char *, CANON_PATH_FLAGS);
 void canonicalize_pathname (char *);
 
-#ifdef HAVE_REALPATH
-#define mc_realpath realpath
-#else
 char *mc_realpath (const char *path, char *resolved_path);
-#endif
 
 /* Looks for "magic" bytes at the start of the VFS file to guess the
  * compression type. Side effect: modifies the file position. */
diff -urpN mc-4.8.20/lib/utilunix.c mc-4.8.21/lib/utilunix.c
--- mc-4.8.20/lib/utilunix.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/utilunix.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Various utilities - Unix variants
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -454,6 +454,7 @@ my_systemv (const char *command, char *c
             execvp (command, argv);
             my_exit (127);      /* Exec error */
         }
+        MC_FALLTHROUGH;
         /* no break here, or unreachable-code warning by no returning my_exit() */
     default:
         status = 0;
@@ -1093,150 +1094,179 @@ gettimeofday (struct timeval *tp, void *
 
 /* --------------------------------------------------------------------------------------------- */
 
-#ifndef HAVE_REALPATH
 char *
 mc_realpath (const char *path, char *resolved_path)
 {
-    char copy_path[PATH_MAX];
-    char got_path[PATH_MAX];
-    char *new_path = got_path;
-    char *max_path;
-#ifdef S_IFLNK
-    char link_path[PATH_MAX];
-    int readlinks = 0;
-    int n;
-#endif /* S_IFLNK */
+#ifdef HAVE_CHARSET
+    const char *p = path;
+    gboolean absolute_path = FALSE;
 
-    /* Make a copy of the source path since we may need to modify it. */
-    if (strlen (path) >= PATH_MAX - 2)
+    if (IS_PATH_SEP (*p))
     {
-        errno = ENAMETOOLONG;
-        return NULL;
+        absolute_path = TRUE;
+        p++;
     }
-    strcpy (copy_path, path);
-    path = copy_path;
-    max_path = copy_path + PATH_MAX - 2;
-    /* If it's a relative pathname use getwd for starters. */
-    if (!IS_PATH_SEP (*path))
+
+    /* ignore encoding: skip "#enc:" */
+    if (g_str_has_prefix (p, VFS_ENCODING_PREFIX))
     {
-        new_path = g_get_current_dir ();
-        if (new_path == NULL)
+        p += strlen (VFS_ENCODING_PREFIX);
+        p = strchr (p, PATH_SEP);
+        if (p != NULL)
         {
-            strcpy (got_path, "");
+            if (!absolute_path && p[1] != '\0')
+                p++;
+
+            path = p;
         }
-        else
+    }
+#endif /* HAVE_CHARSET */
+
+#ifdef HAVE_REALPATH
+    return realpath (path, resolved_path);
+#else
+    {
+        char copy_path[PATH_MAX];
+        char got_path[PATH_MAX];
+        char *new_path = got_path;
+        char *max_path;
+#ifdef S_IFLNK
+        char link_path[PATH_MAX];
+        int readlinks = 0;
+        int n;
+#endif /* S_IFLNK */
+
+        /* Make a copy of the source path since we may need to modify it. */
+        if (strlen (path) >= PATH_MAX - 2)
         {
-            g_snprintf (got_path, sizeof (got_path), "%s", new_path);
-            g_free (new_path);
-            new_path = got_path;
+            errno = ENAMETOOLONG;
+            return NULL;
         }
+        strcpy (copy_path, path);
+        path = copy_path;
+        max_path = copy_path + PATH_MAX - 2;
+        /* If it's a relative pathname use getwd for starters. */
+        if (!IS_PATH_SEP (*path))
+        {
+            new_path = g_get_current_dir ();
+            if (new_path == NULL)
+            {
+                strcpy (got_path, "");
+            }
+            else
+            {
+                g_snprintf (got_path, sizeof (got_path), "%s", new_path);
+                g_free (new_path);
+                new_path = got_path;
+            }
 
-        new_path += strlen (got_path);
-        if (!IS_PATH_SEP (new_path[-1]))
-            *new_path++ = PATH_SEP;
-    }
-    else
-    {
-        *new_path++ = PATH_SEP;
-        path++;
-    }
-    /* Expand each slash-separated pathname component. */
-    while (*path != '\0')
-    {
-        /* Ignore stray "/". */
-        if (IS_PATH_SEP (*path))
+            new_path += strlen (got_path);
+            if (!IS_PATH_SEP (new_path[-1]))
+                *new_path++ = PATH_SEP;
+        }
+        else
         {
+            *new_path++ = PATH_SEP;
             path++;
-            continue;
         }
-        if (*path == '.')
+        /* Expand each slash-separated pathname component. */
+        while (*path != '\0')
         {
-            /* Ignore ".". */
-            if (path[1] == '\0' || IS_PATH_SEP (path[1]))
+            /* Ignore stray "/". */
+            if (IS_PATH_SEP (*path))
             {
                 path++;
                 continue;
             }
-            if (path[1] == '.')
+            if (*path == '.')
             {
-                if (path[2] == '\0' || IS_PATH_SEP (path[2]))
+                /* Ignore ".". */
+                if (path[1] == '\0' || IS_PATH_SEP (path[1]))
                 {
-                    path += 2;
-                    /* Ignore ".." at root. */
-                    if (new_path == got_path + 1)
-                        continue;
-                    /* Handle ".." by backing up. */
-                    while (!IS_PATH_SEP ((--new_path)[-1]))
-                        ;
+                    path++;
                     continue;
                 }
+                if (path[1] == '.')
+                {
+                    if (path[2] == '\0' || IS_PATH_SEP (path[2]))
+                    {
+                        path += 2;
+                        /* Ignore ".." at root. */
+                        if (new_path == got_path + 1)
+                            continue;
+                        /* Handle ".." by backing up. */
+                        while (!IS_PATH_SEP ((--new_path)[-1]))
+                            ;
+                        continue;
+                    }
+                }
             }
-        }
-        /* Safely copy the next pathname component. */
-        while (*path != '\0' && !IS_PATH_SEP (*path))
-        {
-            if (path > max_path)
+            /* Safely copy the next pathname component. */
+            while (*path != '\0' && !IS_PATH_SEP (*path))
             {
-                errno = ENAMETOOLONG;
-                return NULL;
+                if (path > max_path)
+                {
+                    errno = ENAMETOOLONG;
+                    return NULL;
+                }
+                *new_path++ = *path++;
             }
-            *new_path++ = *path++;
-        }
 #ifdef S_IFLNK
-        /* Protect against infinite loops. */
-        if (readlinks++ > MAXSYMLINKS)
-        {
-            errno = ELOOP;
-            return NULL;
-        }
-        /* See if latest pathname component is a symlink. */
-        *new_path = '\0';
-        n = readlink (got_path, link_path, PATH_MAX - 1);
-        if (n < 0)
-        {
-            /* EINVAL means the file exists but isn't a symlink. */
-            if (errno != EINVAL)
+            /* Protect against infinite loops. */
+            if (readlinks++ > MAXSYMLINKS)
             {
-                /* Make sure it's null terminated. */
-                *new_path = '\0';
-                strcpy (resolved_path, got_path);
+                errno = ELOOP;
                 return NULL;
             }
-        }
-        else
-        {
-            /* Note: readlink doesn't add the null byte. */
-            link_path[n] = '\0';
-            if (IS_PATH_SEP (*link_path))
-                /* Start over for an absolute symlink. */
-                new_path = got_path;
+            /* See if latest pathname component is a symlink. */
+            *new_path = '\0';
+            n = readlink (got_path, link_path, PATH_MAX - 1);
+            if (n < 0)
+            {
+                /* EINVAL means the file exists but isn't a symlink. */
+                if (errno != EINVAL)
+                {
+                    /* Make sure it's null terminated. */
+                    *new_path = '\0';
+                    strcpy (resolved_path, got_path);
+                    return NULL;
+                }
+            }
             else
-                /* Otherwise back up over this component. */
-                while (!IS_PATH_SEP (*(--new_path)))
-                    ;
-            /* Safe sex check. */
-            if (strlen (path) + n >= PATH_MAX - 2)
             {
-                errno = ENAMETOOLONG;
-                return NULL;
+                /* Note: readlink doesn't add the null byte. */
+                link_path[n] = '\0';
+                if (IS_PATH_SEP (*link_path))
+                    /* Start over for an absolute symlink. */
+                    new_path = got_path;
+                else
+                    /* Otherwise back up over this component. */
+                    while (!IS_PATH_SEP (*(--new_path)))
+                        ;
+                /* Safe sex check. */
+                if (strlen (path) + n >= PATH_MAX - 2)
+                {
+                    errno = ENAMETOOLONG;
+                    return NULL;
+                }
+                /* Insert symlink contents into path. */
+                strcat (link_path, path);
+                strcpy (copy_path, link_path);
+                path = copy_path;
             }
-            /* Insert symlink contents into path. */
-            strcat (link_path, path);
-            strcpy (copy_path, link_path);
-            path = copy_path;
-        }
 #endif /* S_IFLNK */
-        *new_path++ = PATH_SEP;
+            *new_path++ = PATH_SEP;
+        }
+        /* Delete trailing slash but don't whomp a lone slash. */
+        if (new_path != got_path + 1 && IS_PATH_SEP (new_path[-1]))
+            new_path--;
+        /* Make sure it's null terminated. */
+        *new_path = '\0';
+        strcpy (resolved_path, got_path);
+        return resolved_path;
     }
-    /* Delete trailing slash but don't whomp a lone slash. */
-    if (new_path != got_path + 1 && IS_PATH_SEP (new_path[-1]))
-        new_path--;
-    /* Make sure it's null terminated. */
-    *new_path = '\0';
-    strcpy (resolved_path, got_path);
-    return resolved_path;
-}
 #endif /* HAVE_REALPATH */
+}
 
 /* --------------------------------------------------------------------------------------------- */
 /**
diff -urpN mc-4.8.20/lib/vfs/Makefile.in mc-4.8.21/lib/vfs/Makefile.in
--- mc-4.8.20/lib/vfs/Makefile.in	2017-11-25 19:33:51.000000000 +0100
+++ mc-4.8.21/lib/vfs/Makefile.in	2018-06-03 10:57:31.000000000 +0200
@@ -114,6 +114,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -121,6 +122,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/lib/vfs/direntry.c mc-4.8.21/lib/vfs/direntry.c
--- mc-4.8.20/lib/vfs/direntry.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/lib/vfs/direntry.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Directory cache support
 
-   Copyright (C) 1998-2017
+   Copyright (C) 1998-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -141,7 +141,7 @@ vfs_s_resolve_symlink (struct vfs_class
         return entry;
     if (follow == 0)
         ERRNOR (ELOOP, NULL);
-    if (!entry)
+    if (entry == NULL)
         ERRNOR (ENOENT, NULL);
     if (!S_ISLNK (entry->ino->st.st_mode))
         return entry;
@@ -164,7 +164,7 @@ vfs_s_resolve_symlink (struct vfs_class
         }
     }
 
-    target = (MEDATA->find_entry) (me, entry->dir->super->root, linkname, follow - 1, 0);
+    target = MEDATA->find_entry (me, entry->dir->super->root, linkname, follow - 1, 0);
     g_free (fullname);
     return target;
 }
@@ -300,7 +300,7 @@ vfs_s_find_entry_linear (struct vfs_clas
         vfs_die ("find_linear: success but directory is not there\n");
 
 #if 0
-    if (!vfs_s_resolve_symlink (me, ent, follow))
+    if (vfs_s_resolve_symlink (me, ent, follow) == NULL)
     {
         g_free (path);
         return NULL;
@@ -345,7 +345,7 @@ vfs_s_free_super (struct vfs_class *me,
 
 #if 0
     /* FIXME: We currently leak small ammount of memory, sometimes. Fix it if you can. */
-    if (super->ino_usage)
+    if (super->ino_usage != 0)
         message (D_ERROR, "Direntry warning",
                  "Super ino_usage is %d, memory leak", super->ino_usage);
 
@@ -385,7 +385,7 @@ vfs_s_inode_from_path (const vfs_path_t
         vfs_s_find_inode (path_element->class, super, q,
                           (flags & FL_FOLLOW) != 0 ? LINK_FOLLOW : LINK_NO_FOLLOW,
                           flags & ~FL_FOLLOW);
-    if ((!ino) && (!*q))
+    if (ino == NULL && *q == '\0')
         /* We are asking about / directory of ftp server: assume it exists */
         ino =
             vfs_s_find_inode (path_element->class, super, q,
@@ -474,7 +474,7 @@ vfs_s_chdir (const vfs_path_t * vpath)
 
     data = vfs_s_opendir (vpath);
     if (data == NULL)
-        return -1;
+        return (-1);
     vfs_s_closedir (data);
     return 0;
 }
@@ -489,7 +489,7 @@ vfs_s_internal_stat (const vfs_path_t *
 
     ino = vfs_s_inode_from_path (vpath, flag);
     if (ino == NULL)
-        return -1;
+        return (-1);
     *buf = ino->st;
     return 0;
 }
@@ -506,19 +506,19 @@ vfs_s_readlink (const vfs_path_t * vpath
     path_element = vfs_path_get_by_index (vpath, -1);
 
     ino = vfs_s_inode_from_path (vpath, 0);
-    if (!ino)
-        return -1;
+    if (ino == NULL)
+        return (-1);
 
     if (!S_ISLNK (ino->st.st_mode))
     {
         path_element->class->verrno = EINVAL;
-        return -1;
+        return (-1);
     }
 
     if (ino->linkname == NULL)
     {
         path_element->class->verrno = EFAULT;
-        return -1;
+        return (-1);
     }
 
     len = strlen (ino->linkname);
@@ -538,8 +538,8 @@ vfs_s_read (void *fh, char *buffer, size
 
     if (FH->linear == LS_LINEAR_PREOPEN)
     {
-        if (!MEDATA->linear_start (me, FH, FH->pos))
-            return -1;
+        if (MEDATA->linear_start (me, FH, FH->pos) == 0)
+            return (-1);
     }
 
     if (FH->linear == LS_LINEAR_CLOSED)
@@ -558,7 +558,7 @@ vfs_s_read (void *fh, char *buffer, size
         return n;
     }
     vfs_die ("vfs_s_read: This should not happen\n");
-    return -1;
+    return (-1);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -568,10 +568,10 @@ vfs_s_write (void *fh, const char *buffe
 {
     struct vfs_class *me = FH_SUPER->me;
 
-    if (FH->linear)
+    if (FH->linear != LS_NOT_LINEAR)
         vfs_die ("no writing to linear files, please");
 
-    FH->changed = 1;
+    FH->changed = TRUE;
     if (FH->handle != -1)
     {
         ssize_t n;
@@ -597,7 +597,9 @@ vfs_s_lseek (void *fh, off_t offset, int
 
     if (FH->handle != -1)
     {                           /* If we have local file opened, we want to work with it */
-        off_t retval = lseek (FH->handle, offset, whence);
+        off_t retval;
+
+        retval = lseek (FH->handle, offset, whence);
         if (retval == -1)
             FH->ino->super->me->verrno = errno;
         return retval;
@@ -635,17 +637,20 @@ vfs_s_close (void *fh)
         return (-1);
 
     FH_SUPER->fd_usage--;
-    if (!FH_SUPER->fd_usage)
+    if (FH_SUPER->fd_usage == 0)
         vfs_stamp_create (me, FH_SUPER);
 
     if (FH->linear == LS_LINEAR_OPEN)
         MEDATA->linear_close (me, fh);
-    if (MEDATA->fh_close)
+    if (MEDATA->fh_close != NULL)
         res = MEDATA->fh_close (me, fh);
-    if ((MEDATA->flags & VFS_S_USETMP) && FH->changed && MEDATA->file_store)
+    if ((MEDATA->flags & VFS_S_USETMP) != 0 && FH->changed && MEDATA->file_store != NULL)
     {
-        char *s = vfs_s_fullpath (me, FH->ino);
-        if (!s)
+        char *s;
+
+        s = vfs_s_fullpath (me, FH->ino);
+
+        if (s == NULL)
             res = -1;
         else
         {
@@ -728,7 +733,7 @@ vfs_s_getlocalcopy (const vfs_path_t * v
         const struct vfs_class *me;
 
         me = vfs_path_get_by_index (vpath, -1)->class;
-        if ((MEDATA->flags & VFS_S_USETMP) != 0 && (fh->ino != NULL))
+        if ((MEDATA->flags & VFS_S_USETMP) != 0 && fh->ino != NULL)
             local = vfs_path_from_str_flags (fh->ino->localname, VPF_NO_CANON);
 
         vfs_s_close (fh);
@@ -770,11 +775,11 @@ vfs_s_setctl (const vfs_path_t * vpath,
             ino = vfs_s_inode_from_path (vpath, 0);
             if (ino == NULL)
                 return 0;
-            if (arg)
-                ino->super->want_stale = 1;
+            if (arg != NULL)
+                ino->super->want_stale = TRUE;
             else
             {
-                ino->super->want_stale = 0;
+                ino->super->want_stale = FALSE;
                 vfs_s_invalidate (path_element->class, ino->super);
             }
             return 1;
@@ -831,16 +836,15 @@ vfs_s_dir_uptodate (struct vfs_class *me
 {
     struct timeval tim;
 
-    if (MEDATA->flush)
+    if (MEDATA->flush != 0)
     {
         MEDATA->flush = 0;
         return 0;
     }
 
     gettimeofday (&tim, NULL);
-    if (tim.tv_sec < ino->timestamp.tv_sec)
-        return 1;
-    return 0;
+
+    return (tim.tv_sec < ino->timestamp.tv_sec ? 1 : 0);
 }
 
 
@@ -857,7 +861,7 @@ vfs_s_new_inode (struct vfs_class *me, s
     if (ino == NULL)
         return NULL;
 
-    if (initstat)
+    if (initstat != NULL)
         ino->st = *initstat;
     ino->super = super;
     ino->st.st_nlink = 0;
@@ -917,7 +921,6 @@ vfs_s_new_entry (struct vfs_class *me, c
     return entry;
 }
 
-
 /* --------------------------------------------------------------------------------------------- */
 
 void
@@ -1047,8 +1050,8 @@ vfs_s_find_inode (struct vfs_class *me,
     if (((MEDATA->flags & VFS_S_REMOTE) == 0) && (*path == '\0'))
         return super->root;
 
-    ent = (MEDATA->find_entry) (me, super->root, path, follow, flags);
-    return (ent != NULL) ? ent->ino : NULL;
+    ent = MEDATA->find_entry (me, super->root, path, follow, flags);
+    return (ent != NULL ? ent->ino : NULL);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1072,7 +1075,7 @@ vfs_get_super_by_vpath (const vfs_path_t
     vfs_path_t *vpath_archive;
 
     path_element = vfs_path_get_by_index (vpath, -1);
-    subclass = ((struct vfs_s_subclass *) path_element->class->data);
+    subclass = (struct vfs_s_subclass *) path_element->class->data;
     if (subclass == NULL)
         return NULL;
 
@@ -1135,7 +1138,7 @@ vfs_s_get_path (const vfs_path_t * vpath
     if (super != NULL)
         goto return_success;
 
-    if (flags & FL_NO_OPEN)
+    if ((flags & FL_NO_OPEN) != 0)
     {
         path_element->class->verrno = EIO;
         return NULL;
@@ -1143,7 +1146,7 @@ vfs_s_get_path (const vfs_path_t * vpath
 
     super = vfs_s_new_super (path_element->class);
 
-    subclass = ((struct vfs_s_subclass *) path_element->class->data);
+    subclass = (struct vfs_s_subclass *) path_element->class->data;
     if (subclass->open_archive != NULL)
     {
         vfs_path_t *vpath_archive;
@@ -1160,9 +1163,9 @@ vfs_s_get_path (const vfs_path_t * vpath
         path_element->class->verrno = EIO;
         return NULL;
     }
-    if (!super->name)
+    if (super->name == NULL)
         vfs_die ("You have to fill name\n");
-    if (!super->root)
+    if (super->root == NULL)
         vfs_die ("You have to fill root inode\n");
 
     vfs_s_insert_super (path_element->class, super);
@@ -1190,19 +1193,24 @@ vfs_s_invalidate (struct vfs_class *me,
 char *
 vfs_s_fullpath (struct vfs_class *me, struct vfs_s_inode *ino)
 {
-    if (!ino->ent)
+    if (ino->ent == NULL)
         ERRNOR (EAGAIN, NULL);
 
     if ((MEDATA->flags & VFS_S_USETMP) == 0)
     {
         /* archives */
-        char *newpath;
-        char *path = g_strdup (ino->ent->name);
-        while (1)
+        char *path;
+
+        path = g_strdup (ino->ent->name);
+
+        while (TRUE)
         {
+            char *newpath;
+
             ino = ino->ent->dir;
             if (ino == ino->super->root)
                 break;
+
             newpath = g_strconcat (ino->ent->name, PATH_SEP_STR, path, (char *) NULL);
             g_free (path);
             path = newpath;
@@ -1211,7 +1219,7 @@ vfs_s_fullpath (struct vfs_class *me, st
     }
 
     /* remote systems */
-    if ((!ino->ent->dir) || (!ino->ent->dir->ent))
+    if (ino->ent->dir == NULL || ino->ent->dir->ent == NULL)
         return g_strdup (ino->ent->name);
 
     return g_strconcat (ino->ent->dir->ent->name, PATH_SEP_STR, ino->ent->name, (char *) NULL);
@@ -1223,7 +1231,7 @@ vfs_s_fullpath (struct vfs_class *me, st
 void *
 vfs_s_open (const vfs_path_t * vpath, int flags, mode_t mode)
 {
-    int was_changed = 0;
+    gboolean was_changed = FALSE;
     vfs_file_handler_t *fh;
     struct vfs_s_super *super;
     const char *q;
@@ -1236,19 +1244,20 @@ vfs_s_open (const vfs_path_t * vpath, in
     if (q == NULL)
         return NULL;
     ino = vfs_s_find_inode (path_element->class, super, q, LINK_FOLLOW, FL_NONE);
-    if (ino && ((flags & (O_CREAT | O_EXCL)) == (O_CREAT | O_EXCL)))
+    if (ino != NULL && (flags & (O_CREAT | O_EXCL)) == (O_CREAT | O_EXCL))
     {
         path_element->class->verrno = EEXIST;
         return NULL;
     }
-    if (!ino)
+
+    if (ino == NULL)
     {
         char *dirname, *name;
         struct vfs_s_entry *ent;
         struct vfs_s_inode *dir;
 
         /* If the filesystem is read-only, disable file creation */
-        if (!(flags & O_CREAT) || !(path_element->class->write))
+        if ((flags & O_CREAT) == 0 || path_element->class->write == NULL)
             return NULL;
 
         dirname = g_path_get_dirname (q);
@@ -1260,6 +1269,7 @@ vfs_s_open (const vfs_path_t * vpath, in
             g_free (name);
             return NULL;
         }
+
         ent = vfs_s_generate_entry (path_element->class, name, dir, 0755);
         ino = ent->ino;
         vfs_s_insert_entry (path_element->class, dir, ent);
@@ -1282,7 +1292,7 @@ vfs_s_open (const vfs_path_t * vpath, in
         }
         g_free (dirname);
         g_free (name);
-        was_changed = 1;
+        was_changed = TRUE;
     }
 
     if (S_ISDIR (ino->st.st_mode))
@@ -1296,12 +1306,12 @@ vfs_s_open (const vfs_path_t * vpath, in
     fh->ino = ino;
     fh->handle = -1;
     fh->changed = was_changed;
-    fh->linear = 0;
+    fh->linear = LS_NOT_LINEAR;
     fh->data = NULL;
 
     if (IS_LINEAR (flags))
     {
-        if (VFSDATA (path_element)->linear_start)
+        if (VFSDATA (path_element)->linear_start != NULL)
         {
             vfs_print_message ("%s", _("Starting linear transfer..."));
             fh->linear = LS_LINEAR_PREOPEN;
@@ -1379,7 +1389,7 @@ vfs_s_retrieve_file (struct vfs_class *m
     vfs_path_t *tmp_vpath;
 
     if ((MEDATA->flags & VFS_S_USETMP) == 0)
-        return -1;
+        return (-1);
 
     memset (&fh, 0, sizeof (fh));
 
@@ -1395,16 +1405,17 @@ vfs_s_retrieve_file (struct vfs_class *m
         goto error_4;
     }
 
-    if (!MEDATA->linear_start (me, &fh, 0))
+    if (MEDATA->linear_start (me, &fh, 0) == 0)
         goto error_3;
 
     /* Clear the interrupt status */
     tty_got_interrupt ();
     tty_enable_interrupt_key ();
 
-    while ((n = MEDATA->linear_read (me, &fh, buffer, sizeof (buffer))))
+    while ((n = MEDATA->linear_read (me, &fh, buffer, sizeof (buffer))) != 0)
     {
         int t;
+
         if (n < 0)
             goto error_1;
 
@@ -1438,7 +1449,7 @@ vfs_s_retrieve_file (struct vfs_class *m
   error_4:
     MC_PTR_FREE (ino->localname);
     g_free (fh.data);
-    return -1;
+    return (-1);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1453,10 +1464,8 @@ vfs_s_init_class (struct vfs_class *vcla
     vclass->open = vfs_s_open;
     vclass->close = vfs_s_close;
     vclass->read = vfs_s_read;
-    if (!(sub->flags & VFS_S_READONLY))
-    {
+    if ((sub->flags & VFS_S_READONLY) == 0)
         vclass->write = vfs_s_write;
-    }
     vclass->opendir = vfs_s_opendir;
     vclass->readdir = vfs_s_readdir;
     vclass->closedir = vfs_s_closedir;
@@ -1509,13 +1518,14 @@ vfs_s_select_on_two (int fd1, int fd2)
     fd_set set;
     struct timeval time_out;
     int v;
-    int maxfd = (fd1 > fd2 ? fd1 : fd2) + 1;
+    int maxfd = MAX (fd1, fd2) + 1;
 
     time_out.tv_sec = 1;
     time_out.tv_usec = 0;
     FD_ZERO (&set);
     FD_SET (fd1, &set);
     FD_SET (fd2, &set);
+
     v = select (maxfd, &set, 0, 0, &time_out);
     if (v <= 0)
         return v;
@@ -1523,7 +1533,7 @@ vfs_s_select_on_two (int fd1, int fd2)
         return 1;
     if (FD_ISSET (fd2, &set))
         return 2;
-    return -1;
+    return (-1);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1539,30 +1549,34 @@ vfs_s_get_line (struct vfs_class *me, in
     {
         if (read (sock, buf, sizeof (char)) <= 0)
             return 0;
-        if (logfile)
+
+        if (logfile != NULL)
         {
             size_t ret1;
             int ret2;
+
             ret1 = fwrite (buf, 1, 1, logfile);
             ret2 = fflush (logfile);
             (void) ret1;
             (void) ret2;
         }
+
         if (*buf == term)
         {
-            *buf = 0;
+            *buf = '\0';
             return 1;
         }
     }
 
     /* Line is too long - terminate buffer and discard the rest of line */
-    *buf = 0;
+    *buf = '\0';
     while (read (sock, &c, sizeof (c)) > 0)
     {
-        if (logfile)
+        if (logfile != NULL)
         {
             size_t ret1;
             int ret2;
+
             ret1 = fwrite (&c, 1, 1, logfile);
             ret2 = fflush (logfile);
             (void) ret1;
@@ -1632,10 +1646,13 @@ vfs_s_normalize_filename_leading_spaces
     for (iter = root_inode->subdir; iter != NULL; iter = g_list_next (iter))
     {
         struct vfs_s_entry *entry = (struct vfs_s_entry *) iter->data;
+
         if ((size_t) entry->ino->data_offset > final_num_spaces)
         {
             char *source_name = entry->name;
-            char *spacer = g_strnfill (entry->ino->data_offset - final_num_spaces, ' ');
+            char *spacer;
+
+            spacer = g_strnfill (entry->ino->data_offset - final_num_spaces, ' ');
             entry->name = g_strdup_printf ("%s%s", spacer, source_name);
             g_free (spacer);
             g_free (source_name);
diff -urpN mc-4.8.20/lib/vfs/gc.c mc-4.8.21/lib/vfs/gc.c
--- mc-4.8.20/lib/vfs/gc.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/vfs/gc.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Virtual File System garbage collection code
 
-   Copyright (C) 2003-2017
+   Copyright (C) 2003-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/vfs/interface.c mc-4.8.21/lib/vfs/interface.c
--- mc-4.8.20/lib/vfs/interface.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/vfs/interface.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Virtual File System: interface functions
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/vfs/netutil.c mc-4.8.21/lib/vfs/netutil.c
--- mc-4.8.20/lib/vfs/netutil.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/vfs/netutil.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Network utilities for the Midnight Commander Virtual File System.
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/lib/vfs/parse_ls_vga.c mc-4.8.21/lib/vfs/parse_ls_vga.c
--- mc-4.8.20/lib/vfs/parse_ls_vga.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/lib/vfs/parse_ls_vga.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Routines for parsing output from the 'ls' command.
 
-   Copyright (C) 1988-2017
+   Copyright (C) 1988-2018
    Free Software Foundation, Inc.
 
    Copyright (C) 1995, 1996 Miguel de Icaza
diff -urpN mc-4.8.20/lib/vfs/path.c mc-4.8.21/lib/vfs/path.c
--- mc-4.8.20/lib/vfs/path.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/lib/vfs/path.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Virtual File System path handlers
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -236,13 +236,11 @@ static void
 vfs_path_url_split (vfs_path_element_t * path_element, const char *path)
 {
     char *pcopy;
-    const char *pend;
     char *colon, *at, *rest;
 
     path_element->port = 0;
 
     pcopy = g_strdup (path);
-    pend = pcopy + strlen (pcopy);
 
     /* search for any possible user */
     at = strrchr (pcopy, '@');
@@ -252,9 +250,12 @@ vfs_path_url_split (vfs_path_element_t *
         rest = pcopy;
     else
     {
+        const char *pend;
         char *inner_colon;
 
+        pend = strchr (at, '\0');
         *at = '\0';
+
         inner_colon = strchr (pcopy, ':');
         if (inner_colon != NULL)
         {
@@ -280,9 +281,9 @@ vfs_path_url_split (vfs_path_element_t *
         colon = strchr (++rest, ']');
         if (colon != NULL)
         {
-            colon[0] = '\0';
-            colon[1] = '\0';
+            *colon = '\0';
             colon++;
+            *colon = '\0';
             path_element->ipv6 = TRUE;
         }
     }
diff -urpN mc-4.8.20/lib/vfs/utilvfs.c mc-4.8.21/lib/vfs/utilvfs.c
--- mc-4.8.20/lib/vfs/utilvfs.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/vfs/utilvfs.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Utilities for VFS modules.
 
-   Copyright (C) 1988-2017
+   Copyright (C) 1988-2018
    Free Software Foundation, Inc.
 
    Copyright (C) 1995, 1996 Miguel de Icaza
@@ -177,13 +177,13 @@ int
 vfs_mkstemps (vfs_path_t ** pname_vpath, const char *prefix, const char *param_basename)
 {
     const char *p;
-    char *suffix, *q;
+    GString *suffix;
     int shift;
     int fd;
 
     /* Strip directories */
     p = strrchr (param_basename, PATH_SEP);
-    if (!p)
+    if (p == NULL)
         p = param_basename;
     else
         p++;
@@ -193,20 +193,16 @@ vfs_mkstemps (vfs_path_t ** pname_vpath,
     if (shift > 0)
         p += shift;
 
-    suffix = g_malloc (MC_MAXPATHLEN);
+    suffix = g_string_sized_new (32);
 
     /* Protection against unusual characters */
-    q = suffix;
-    while (*p && (*p != '#'))
-    {
-        if (strchr (".-_@", *p) || isalnum ((unsigned char) *p))
-            *q++ = *p;
-        p++;
-    }
-    *q = 0;
+    for (; *p != '\0' && *p != '#'; p++)
+        if (strchr (".-_@", *p) != NULL || g_ascii_isalnum (*p))
+            g_string_append_c (suffix, *p);
+
+    fd = mc_mkstemps (pname_vpath, prefix, suffix->str);
+    g_string_free (suffix, TRUE);
 
-    fd = mc_mkstemps (pname_vpath, prefix, suffix);
-    g_free (suffix);
     return fd;
 }
 
@@ -240,7 +236,7 @@ vfs_url_split (const char *path, int def
     char *pcopy;
     size_t pcopy_len;
     const char *pend;
-    char *dir, *colon, *at, *rest;
+    char *colon, *at, *rest;
 
     path_element = g_new0 (vfs_path_element_t, 1);
     path_element->port = default_port;
@@ -248,10 +244,11 @@ vfs_url_split (const char *path, int def
     pcopy_len = strlen (path);
     pcopy = g_strndup (path, pcopy_len);
     pend = pcopy + pcopy_len;
-    dir = pcopy;
 
     if ((flags & URL_NOSLASH) == 0)
     {
+        char *dir = pcopy;
+
         /* locate path component */
         while (!IS_PATH_SEP (*dir) && *dir != '\0')
             dir++;
@@ -293,8 +290,10 @@ vfs_url_split (const char *path, int def
     }
 
     if ((flags & URL_USE_ANONYMOUS) == 0)
+    {
+        g_free (path_element->user);
         path_element->user = vfs_get_local_username ();
-
+    }
     /* Check if the host comes with a port spec, if so, chop it */
     if (*rest != '[')
         colon = strchr (rest, ':');
@@ -310,6 +309,7 @@ vfs_url_split (const char *path, int def
         else
         {
             vfs_path_element_free (path_element);
+            g_free (pcopy);
             return NULL;
         }
     }
@@ -341,6 +341,7 @@ vfs_url_split (const char *path, int def
     }
 
     path_element->host = g_strdup (rest);
+    g_free (pcopy);
 #ifdef HAVE_CHARSET
     path_element->dir.converter = INVALID_CONV;
 #endif
diff -urpN mc-4.8.20/lib/vfs/vfs.c mc-4.8.21/lib/vfs/vfs.c
--- mc-4.8.20/lib/vfs/vfs.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/vfs/vfs.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Virtual File System switch code
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written by: 1995 Miguel de Icaza
diff -urpN mc-4.8.20/lib/vfs/xdirentry.h mc-4.8.21/lib/vfs/xdirentry.h
--- mc-4.8.20/lib/vfs/xdirentry.h	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/vfs/xdirentry.h	2018-05-27 21:56:21.000000000 +0200
@@ -41,11 +41,6 @@
 #define FH ((vfs_file_handler_t *) fh)
 #define FH_SUPER FH->ino->super
 
-#define LS_NOT_LINEAR 0
-#define LS_LINEAR_CLOSED 1
-#define LS_LINEAR_OPEN 2
-#define LS_LINEAR_PREOPEN 3
-
 /*** enums ***************************************************************************************/
 
 /* For vfs_s_subclass->flags */
@@ -56,6 +51,14 @@ typedef enum
     VFS_S_USETMP = 1L << 2,
 } vfs_subclass_flags_t;
 
+typedef enum
+{
+    LS_NOT_LINEAR = 0,
+    LS_LINEAR_CLOSED = 1,
+    LS_LINEAR_OPEN = 2,
+    LS_LINEAR_PREOPEN = 3
+} vfs_linear_state_t;
+
 /*** structures declarations (and typedefs of structures)*****************************************/
 
 /* Single connection or archive */
@@ -66,7 +69,7 @@ struct vfs_s_super
     char *name;                 /* My name, whatever it means */
     int fd_usage;               /* Number of open files */
     int ino_usage;              /* Usage count of this superblock */
-    int want_stale;             /* If set, we do not flush cache properly */
+    gboolean want_stale;        /* If set, we do not flush cache properly */
 #ifdef ENABLE_VFS_NET
     vfs_path_element_t *path_element;
 #endif                          /* ENABLE_VFS_NET */
@@ -106,8 +109,8 @@ typedef struct
     struct vfs_s_inode *ino;
     off_t pos;                  /* This is for module's use */
     int handle;                 /* This is for module's use, but if != -1, will be mc_close()d */
-    int changed;                /* Did this file change? */
-    int linear;                 /* Is that file open with O_LINEAR? */
+    gboolean changed;           /* Did this file change? */
+    vfs_linear_state_t linear;  /* Is that file open with O_LINEAR? */
     void *data;                 /* This is for filesystem-specific use */
 } vfs_file_handler_t;
 
diff -urpN mc-4.8.20/lib/widget/Makefile.in mc-4.8.21/lib/widget/Makefile.in
--- mc-4.8.20/lib/widget/Makefile.in	2017-11-25 19:33:51.000000000 +0100
+++ mc-4.8.21/lib/widget/Makefile.in	2018-06-03 10:57:31.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/lib/widget/button.c mc-4.8.21/lib/widget/button.c
--- mc-4.8.20/lib/widget/button.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/lib/widget/button.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
@@ -50,10 +50,16 @@
 
 /*** file scope variables ************************************************************************/
 
+/* --------------------------------------------------------------------------------------------- */
 /*** file scope functions ************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
+
+/* --------------------------------------------------------------------------------------------- */
+/*** public functions ****************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
 
-static cb_ret_t
-button_callback (Widget * w, Widget * sender, widget_msg_t msg, int parm, void *data)
+cb_ret_t
+button_default_callback (Widget * w, Widget * sender, widget_msg_t msg, int parm, void *data)
 {
     WButton *b = BUTTON (w);
     WDialog *h = w->owner;
@@ -173,8 +179,8 @@ button_callback (Widget * w, Widget * se
 
 /* --------------------------------------------------------------------------------------------- */
 
-static void
-button_mouse_callback (Widget * w, mouse_msg_t msg, mouse_event_t * event)
+void
+button_mouse_default_callback (Widget * w, mouse_msg_t msg, mouse_event_t * event)
 {
     (void) event;
 
@@ -195,8 +201,6 @@ button_mouse_callback (Widget * w, mouse
 }
 
 /* --------------------------------------------------------------------------------------------- */
-/*** public functions ****************************************************************************/
-/* --------------------------------------------------------------------------------------------- */
 
 WButton *
 button_new (int y, int x, int action, button_flags_t flags, const char *text, bcback_fn callback)
@@ -210,7 +214,8 @@ button_new (int y, int x, int action, bu
     b->action = action;
     b->flags = flags;
     b->text = parse_hotkey (text);
-    widget_init (w, y, x, 1, button_get_len (b), button_callback, button_mouse_callback);
+    widget_init (w, y, x, 1, button_get_len (b), button_default_callback,
+                 button_mouse_default_callback);
     w->options |= WOP_SELECTABLE | WOP_WANT_CURSOR | WOP_WANT_HOTKEY;
     b->callback = callback;
     b->hotpos = (b->text.hotkey != NULL) ? str_term_width1 (b->text.start) : -1;
diff -urpN mc-4.8.20/lib/widget/button.h mc-4.8.21/lib/widget/button.h
--- mc-4.8.20/lib/widget/button.h	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/button.h	2018-05-27 21:56:21.000000000 +0200
@@ -49,6 +49,10 @@ char *button_get_text (const WButton * b
 void button_set_text (WButton * b, const char *text);
 int button_get_len (const WButton * b);
 
+cb_ret_t button_default_callback (Widget * w, Widget * sender, widget_msg_t msg, int parm,
+                                  void *data);
+void button_mouse_default_callback (Widget * w, mouse_msg_t msg, mouse_event_t * event);
+
 /*** inline functions ****************************************************************************/
 
 #endif /* MC__WIDGET_BUTTON_H */
diff -urpN mc-4.8.20/lib/widget/buttonbar.c mc-4.8.21/lib/widget/buttonbar.c
--- mc-4.8.20/lib/widget/buttonbar.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/lib/widget/buttonbar.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/check.c mc-4.8.21/lib/widget/check.c
--- mc-4.8.20/lib/widget/check.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/check.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/dialog-switch.c mc-4.8.21/lib/widget/dialog-switch.c
--- mc-4.8.20/lib/widget/dialog-switch.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/dialog-switch.c	2018-05-27 21:56:21.000000000 +0200
@@ -3,7 +3,7 @@
 
    Original idea and code: Oleg "Olegarch" Konovalov <olegarch@linuxinside.com>
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/widget/dialog.c mc-4.8.21/lib/widget/dialog.c
--- mc-4.8.20/lib/widget/dialog.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/dialog.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Dialog box features module for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/lib/widget/gauge.c mc-4.8.21/lib/widget/gauge.c
--- mc-4.8.20/lib/widget/gauge.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/gauge.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/groupbox.c mc-4.8.21/lib/widget/groupbox.c
--- mc-4.8.20/lib/widget/groupbox.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/groupbox.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/history.c mc-4.8.21/lib/widget/history.c
--- mc-4.8.20/lib/widget/history.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/history.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/hline.c mc-4.8.21/lib/widget/hline.c
--- mc-4.8.20/lib/widget/hline.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/hline.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/input.c mc-4.8.21/lib/widget/input.c
--- mc-4.8.20/lib/widget/input.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/input.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
@@ -155,14 +155,12 @@ delete_region (WInput * in, int x_first,
 {
     int first = MIN (x_first, x_last);
     int last = MAX (x_first, x_last);
-    size_t len;
 
     input_mark_cmd (in, FALSE);
     in->point = first;
     last = str_offset_to_pos (in->buffer, last);
     first = str_offset_to_pos (in->buffer, first);
-    len = strlen (&in->buffer[last]) + 1;
-    memmove (&in->buffer[first], &in->buffer[last], len);
+    str_move (in->buffer + first, in->buffer + last);
     in->charpoint = 0;
     in->need_push = TRUE;
 }
diff -urpN mc-4.8.20/lib/widget/input_complete.c mc-4.8.21/lib/widget/input_complete.c
--- mc-4.8.20/lib/widget/input_complete.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/lib/widget/input_complete.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Input line filename/username/hostname/variable/command completion.
    (Let mc type for you...)
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -641,7 +641,7 @@ command_completion_function (const char
             }
         phase++;
         words = bash_builtins;
-        /* fallthrough */
+        MC_FALLTHROUGH;
     case 1:                    /* Builtin commands */
         for (; *words != NULL; words++)
             if (strncmp (*words, u_text, text_len) == 0)
@@ -654,7 +654,7 @@ command_completion_function (const char
             break;
         cur_path = path;
         cur_word = NULL;
-        /* fallthrough */
+        MC_FALLTHROUGH;
     case 2:                    /* And looking through the $PATH */
         while (found == NULL)
         {
@@ -675,7 +675,7 @@ command_completion_function (const char
             if (found == NULL)
                 MC_PTR_FREE (cur_word);
         }
-        /* fallthrough */
+        MC_FALLTHROUGH;
     default:
         break;
     }
@@ -887,11 +887,8 @@ try_complete_find_start_sign (try_comple
         /* don't substitute variable in \$ case */
         if (strutils_is_char_escaped (state->word, state->q))
         {
-            size_t qlen;
-
-            qlen = strlen (state->q);
             /* drop '\\' */
-            memmove (state->q - 1, state->q, qlen + 1);
+            str_move (state->q - 1, state->q);
             /* adjust flags */
             state->flags &= ~INPUT_COMPLETE_VARIABLES;
             state->q = NULL;
@@ -1107,7 +1104,7 @@ query_callback (Widget * w, Widget * sen
                 {
                 case -1:
                     bl = 0;
-                    /* fallthrough */
+                    MC_FALLTHROUGH;
                 case -2:
                     return MSG_HANDLED;
                 default:
diff -urpN mc-4.8.20/lib/widget/label.c mc-4.8.21/lib/widget/label.c
--- mc-4.8.20/lib/widget/label.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/label.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/listbox-window.c mc-4.8.21/lib/widget/listbox-window.c
--- mc-4.8.20/lib/widget/listbox-window.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/listbox-window.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widget based utility functions.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/listbox.c mc-4.8.21/lib/widget/listbox.c
--- mc-4.8.20/lib/widget/listbox.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/listbox.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/menu.c mc-4.8.21/lib/widget/menu.c
--- mc-4.8.20/lib/widget/menu.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/menu.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Pulldown menu code
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/lib/widget/mouse.c mc-4.8.21/lib/widget/mouse.c
--- mc-4.8.20/lib/widget/mouse.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/mouse.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 2016-2017
+   Copyright (C) 2016-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/quick.c mc-4.8.21/lib/widget/quick.c
--- mc-4.8.20/lib/widget/quick.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/lib/widget/quick.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widget based utility functions.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
@@ -441,7 +441,7 @@ quick_dialog_skip (quick_dialog_t * quic
                     break;
                 }
             }
-            /* fall through */
+            MC_FALLTHROUGH;
         case quick_checkbox:
         case quick_radio:
             if (item->widget->x != x1)
diff -urpN mc-4.8.20/lib/widget/radio.c mc-4.8.21/lib/widget/radio.c
--- mc-4.8.20/lib/widget/radio.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/radio.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/widget-common.c mc-4.8.21/lib/widget/widget-common.c
--- mc-4.8.20/lib/widget/widget-common.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/widget-common.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widgets for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
diff -urpN mc-4.8.20/lib/widget/wtools.c mc-4.8.21/lib/widget/wtools.c
--- mc-4.8.20/lib/widget/wtools.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/lib/widget/wtools.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Widget based utility functions.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Authors:
@@ -105,7 +105,7 @@ query_default_callback (Widget * w, Widg
 
             return MSG_HANDLED;
         }
-        /* fallthrough */
+        MC_FALLTHROUGH;
 
     default:
         return dlg_default_callback (w, sender, msg, parm, data);
diff -urpN mc-4.8.20/m4.include/ax_gcc_func_attribute.m4 mc-4.8.21/m4.include/ax_gcc_func_attribute.m4
--- mc-4.8.20/m4.include/ax_gcc_func_attribute.m4	1970-01-01 01:00:00.000000000 +0100
+++ mc-4.8.21/m4.include/ax_gcc_func_attribute.m4	2018-05-27 21:56:21.000000000 +0200
@@ -0,0 +1,238 @@
+# ===========================================================================
+#  https://www.gnu.org/software/autoconf-archive/ax_gcc_func_attribute.html
+# ===========================================================================
+#
+# SYNOPSIS
+#
+#   AX_GCC_FUNC_ATTRIBUTE(ATTRIBUTE)
+#
+# DESCRIPTION
+#
+#   This macro checks if the compiler supports one of GCC's function
+#   attributes; many other compilers also provide function attributes with
+#   the same syntax. Compiler warnings are used to detect supported
+#   attributes as unsupported ones are ignored by default so quieting
+#   warnings when using this macro will yield false positives.
+#
+#   The ATTRIBUTE parameter holds the name of the attribute to be checked.
+#
+#   If ATTRIBUTE is supported define HAVE_FUNC_ATTRIBUTE_<ATTRIBUTE>.
+#
+#   The macro caches its result in the ax_cv_have_func_attribute_<attribute>
+#   variable.
+#
+#   The macro currently supports the following function attributes:
+#
+#    alias
+#    aligned
+#    alloc_size
+#    always_inline
+#    artificial
+#    cold
+#    const
+#    constructor
+#    constructor_priority for constructor attribute with priority
+#    deprecated
+#    destructor
+#    dllexport
+#    dllimport
+#    error
+#    externally_visible
+#    fallthrough
+#    flatten
+#    format
+#    format_arg
+#    gnu_inline
+#    hot
+#    ifunc
+#    leaf
+#    malloc
+#    noclone
+#    noinline
+#    nonnull
+#    noreturn
+#    nothrow
+#    optimize
+#    pure
+#    sentinel
+#    sentinel_position
+#    unused
+#    used
+#    visibility
+#    warning
+#    warn_unused_result
+#    weak
+#    weakref
+#
+#   Unsupported function attributes will be tested with a prototype
+#   returning an int and not accepting any arguments and the result of the
+#   check might be wrong or meaningless so use with care.
+#
+# LICENSE
+#
+#   Copyright (c) 2013 Gabriele Svelto <gabriele.svelto@gmail.com>
+#
+#   Copying and distribution of this file, with or without modification, are
+#   permitted in any medium without royalty provided the copyright notice
+#   and this notice are preserved.  This file is offered as-is, without any
+#   warranty.
+
+#serial 9
+
+AC_DEFUN([AX_GCC_FUNC_ATTRIBUTE], [
+    AS_VAR_PUSHDEF([ac_var], [ax_cv_have_func_attribute_$1])
+
+    AC_CACHE_CHECK([for __attribute__(($1))], [ac_var], [
+        AC_LINK_IFELSE([AC_LANG_PROGRAM([
+            m4_case([$1],
+                [alias], [
+                    int foo( void ) { return 0; }
+                    int bar( void ) __attribute__(($1("foo")));
+                ],
+                [aligned], [
+                    int foo( void ) __attribute__(($1(32)));
+                ],
+                [alloc_size], [
+                    void *foo(int a) __attribute__(($1(1)));
+                ],
+                [always_inline], [
+                    inline __attribute__(($1)) int foo( void ) { return 0; }
+                ],
+                [artificial], [
+                    inline __attribute__(($1)) int foo( void ) { return 0; }
+                ],
+                [cold], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [const], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [constructor_priority], [
+                    int foo( void ) __attribute__((__constructor__(65535/2)));
+                ],
+                [constructor], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [deprecated], [
+                    int foo( void ) __attribute__(($1("")));
+                ],
+                [destructor], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [dllexport], [
+                    __attribute__(($1)) int foo( void ) { return 0; }
+                ],
+                [dllimport], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [error], [
+                    int foo( void ) __attribute__(($1("")));
+                ],
+                [externally_visible], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [fallthrough], [
+                    int foo( void ) {switch (0) { case 1: __attribute__(($1)); case 2: break ; }};
+                ],
+                [flatten], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [format], [
+                    int foo(const char *p, ...) __attribute__(($1(printf, 1, 2)));
+                ],
+                [format_arg], [
+                    char *foo(const char *p) __attribute__(($1(1)));
+                ],
+                [gnu_inline], [
+                    inline __attribute__(($1)) int foo( void ) { return 0; }
+                ],
+                [hot], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [ifunc], [
+                    int my_foo( void ) { return 0; }
+                    static int (*resolve_foo(void))(void) { return my_foo; }
+                    int foo( void ) __attribute__(($1("resolve_foo")));
+                ],
+                [leaf], [
+                    __attribute__(($1)) int foo( void ) { return 0; }
+                ],
+                [malloc], [
+                    void *foo( void ) __attribute__(($1));
+                ],
+                [noclone], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [noinline], [
+                    __attribute__(($1)) int foo( void ) { return 0; }
+                ],
+                [nonnull], [
+                    int foo(char *p) __attribute__(($1(1)));
+                ],
+                [noreturn], [
+                    void foo( void ) __attribute__(($1));
+                ],
+                [nothrow], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [optimize], [
+                    __attribute__(($1(3))) int foo( void ) { return 0; }
+                ],
+                [pure], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [sentinel], [
+                    int foo(void *p, ...) __attribute__(($1));
+                ],
+                [sentinel_position], [
+                    int foo(void *p, ...) __attribute__(($1(1)));
+                ],
+                [returns_nonnull], [
+                    void *foo( void ) __attribute__(($1));
+                ],
+                [unused], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [used], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [visibility], [
+                    int foo_def( void ) __attribute__(($1("default")));
+                    int foo_hid( void ) __attribute__(($1("hidden")));
+                    int foo_int( void ) __attribute__(($1("internal")));
+                    int foo_pro( void ) __attribute__(($1("protected")));
+                ],
+                [warning], [
+                    int foo( void ) __attribute__(($1("")));
+                ],
+                [warn_unused_result], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [weak], [
+                    int foo( void ) __attribute__(($1));
+                ],
+                [weakref], [
+                    static int foo( void ) { return 0; }
+                    static int bar( void ) __attribute__(($1("foo")));
+                ],
+                [
+                 m4_warn([syntax], [Unsupported attribute $1, the test may fail])
+                 int foo( void ) __attribute__(($1));
+                ]
+            )], [])
+            ],
+            dnl GCC doesn't exit with an error if an unknown attribute is
+            dnl provided but only outputs a warning, so accept the attribute
+            dnl only if no warning were issued.
+            [AS_IF([test -s conftest.err],
+                [AS_VAR_SET([ac_var], [no])],
+                [AS_VAR_SET([ac_var], [yes])])],
+            [AS_VAR_SET([ac_var], [no])])
+    ])
+
+    AS_IF([test yes = AS_VAR_GET([ac_var])],
+        [AC_DEFINE_UNQUOTED(AS_TR_CPP(HAVE_FUNC_ATTRIBUTE_$1), 1,
+            [Define to 1 if the system has the `$1' function attribute])], [])
+
+    AS_VAR_POPDEF([ac_var])
+])
diff -urpN mc-4.8.20/m4.include/fsusage.m4 mc-4.8.21/m4.include/fsusage.m4
--- mc-4.8.20/m4.include/fsusage.m4	2017-03-04 18:26:19.000000000 +0100
+++ mc-4.8.21/m4.include/fsusage.m4	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
-# serial 31
+# serial 32
 # Obtaining file system usage information.
 
-# Copyright (C) 1997-1998, 2000-2001, 2003-2016 Free Software Foundation, Inc.
+# Copyright (C) 1997-1998, 2000-2001, 2003-2017 Free Software Foundation, Inc.
 #
 # This file is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
@@ -295,17 +295,6 @@ if test $ac_fsusage_space = no; then
   fi
 fi
 
-if test $ac_fsusage_space = no; then
-  # SVR2
-  # (AIX, HP-UX, OSF/1 already handled above.)
-  AC_PREPROC_IFELSE([AC_LANG_SOURCE([[#include <sys/filsys.h>
-        ]])],
-    [AC_DEFINE([STAT_READ_FILSYS], [1],
-      [Define if there is no specific function for reading file systems usage
-       information and you have the <sys/filsys.h> header file.  (SVR2)])
-     ac_fsusage_space=yes])
-fi
-
 AS_IF([test $ac_fsusage_space = yes], [$1], [$2])
 
 ])
@@ -342,6 +331,6 @@ choke -- this is a workaround for a Sun-
 # Prerequisites of lib/fsusage.c not done by gl_FILE_SYSTEM_USAGE.
 AC_DEFUN([gl_PREREQ_FSUSAGE_EXTRA],
 [
-  AC_CHECK_HEADERS([dustat.h sys/fs/s5param.h sys/filsys.h sys/statfs.h])
+  AC_CHECK_HEADERS([dustat.h sys/fs/s5param.h sys/statfs.h])
   gl_STATFS_TRUNCATES
 ])
diff -urpN mc-4.8.20/m4.include/mc-cflags.m4 mc-4.8.21/m4.include/mc-cflags.m4
--- mc-4.8.20/m4.include/mc-cflags.m4	2017-03-04 18:26:19.000000000 +0100
+++ mc-4.8.21/m4.include/mc-cflags.m4	2018-05-27 21:56:21.000000000 +0200
@@ -63,6 +63,7 @@ dnl Sorted -W options:
     mc_CHECK_ONE_CFLAG([-Wformat-security])
     mc_CHECK_ONE_CFLAG([-Wformat-signedness])
     mc_CHECK_ONE_CFLAG([-Wimplicit])
+    mc_CHECK_ONE_CFLAG([-Wimplicit-fallthrough])
     mc_CHECK_ONE_CFLAG([-Wignored-qualifiers])
     mc_CHECK_ONE_CFLAG([-Wlogical-not-parentheses])
     mc_CHECK_ONE_CFLAG([-Wmaybe-uninitialized])
diff -urpN mc-4.8.20/m4.include/mc-with-screen-ncurses.m4 mc-4.8.21/m4.include/mc-with-screen-ncurses.m4
--- mc-4.8.20/m4.include/mc-with-screen-ncurses.m4	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/m4.include/mc-with-screen-ncurses.m4	2018-05-27 21:56:21.000000000 +0200
@@ -101,6 +101,9 @@ AC_DEFUN([mc_WITH_NCURSES], [
         LIBS=
         AC_SEARCH_LIBS([has_colors], [ncurses], [MCLIBS="$MCLIBS $LIBS"], 
                        [AC_MSG_ERROR([Cannot find ncurses library])])
+        AC_SEARCH_LIBS([stdscr], [tinfo ncurses], [MCLIBS="$MCLIBS $LIBS"],
+                       [AC_MSG_ERROR([Cannot find a library providing stdscr])])
+
 
         screen_type=ncurses
         screen_msg="NCurses"
@@ -111,10 +114,15 @@ AC_DEFUN([mc_WITH_NCURSES], [
         AC_SEARCH_LIBS([addwstr], [ncursesw ncurses curses], [MCLIBS="$MCLIBS $LIBS";ncursesw_found=yes],
                        [AC_MSG_WARN([Cannot find ncurses library, that support wide characters])])
 
+        AC_SEARCH_LIBS([stdscr], [tinfow tinfo ncursesw ncurses curses], [MCLIBS="$MCLIBS $LIBS"],
+                       [AC_MSG_ERROR([Cannot find a library providing stdscr])])
+
         if test x"$ncursesw_found" = "x"; then
             LIBS=
             AC_SEARCH_LIBS([has_colors], [ncurses curses], [MCLIBS="$MCLIBS $LIBS"], 
                            [AC_MSG_ERROR([Cannot find ncurses library])])
+            AC_SEARCH_LIBS([stdscr], [tinfo ncurses curses], [MCLIBS="$MCLIBS $LIBS"],
+                           [AC_MSG_ERROR([Cannot find a library providing stdscr])])
         fi
 
         dnl Check the header
@@ -166,6 +174,9 @@ AC_DEFUN([mc_WITH_NCURSESW], [
     LIBS=
     AC_SEARCH_LIBS([has_colors], [ncursesw], [MCLIBS="$MCLIBS $LIBS"],
 		   [AC_MSG_ERROR([Cannot find ncursesw library])])
+    AC_SEARCH_LIBS([stdscr], [tinfow ncursesw], [MCLIBS="$MCLIBS $LIBS"],
+           [AC_MSG_ERROR([Cannot find a library providing stdscr])])
+
 
     dnl Check the header
     ncurses_h_found=
diff -urpN mc-4.8.20/m4.include/sys_types_h.m4 mc-4.8.21/m4.include/sys_types_h.m4
--- mc-4.8.20/m4.include/sys_types_h.m4	1970-01-01 01:00:00.000000000 +0100
+++ mc-4.8.21/m4.include/sys_types_h.m4	2018-05-27 21:56:21.000000000 +0200
@@ -0,0 +1,60 @@
+# sys_types_h.m4 serial 9
+dnl Copyright (C) 2011-2018 Free Software Foundation, Inc.
+dnl This file is free software; the Free Software Foundation
+dnl gives unlimited permission to copy and/or distribute it,
+dnl with or without modifications, as long as this notice is preserved.
+
+AC_DEFUN_ONCE([gl_SYS_TYPES_H],
+[
+  dnl Use sane struct stat types in OpenVMS 8.2 and later.
+  AC_DEFINE([_USE_STD_STAT], 1, [For standard stat data types on VMS.])
+
+  AC_REQUIRE([gl_SYS_TYPES_H_DEFAULTS])
+  gl_NEXT_HEADERS([sys/types.h])
+
+  dnl Ensure the type pid_t gets defined.
+  AC_REQUIRE([AC_TYPE_PID_T])
+
+  dnl Ensure the type mode_t gets defined.
+  AC_REQUIRE([AC_TYPE_MODE_T])
+
+  dnl Whether to override the 'off_t' type.
+  AC_REQUIRE([gl_TYPE_OFF_T])
+
+  dnl Whether to override the 'dev_t' and 'ino_t' types.
+  m4_ifdef([gl_WINDOWS_STAT_INODES], [
+    AC_REQUIRE([gl_WINDOWS_STAT_INODES])
+  ], [
+    WINDOWS_STAT_INODES=0
+  ])
+  AC_SUBST([WINDOWS_STAT_INODES])
+])
+
+AC_DEFUN([gl_SYS_TYPES_H_DEFAULTS],
+[
+])
+
+# This works around a buggy version in autoconf <= 2.69.
+# See <https://lists.gnu.org/r/autoconf/2016-08/msg00014.html>
+
+m4_version_prereq([2.70], [], [
+
+# This is taken from the following Autoconf patch:
+# https://git.savannah.gnu.org/cgit/autoconf.git/commit/?id=e17a30e987d7ee695fb4294a82d987ec3dc9b974
+
+m4_undefine([AC_HEADER_MAJOR])
+AC_DEFUN([AC_HEADER_MAJOR],
+[AC_CHECK_HEADERS_ONCE([sys/types.h])
+AC_CHECK_HEADER([sys/mkdev.h],
+  [AC_DEFINE([MAJOR_IN_MKDEV], [1],
+    [Define to 1 if `major', `minor', and `makedev' are declared in
+     <mkdev.h>.])])
+if test $ac_cv_header_sys_mkdev_h = no; then
+  AC_CHECK_HEADER([sys/sysmacros.h],
+    [AC_DEFINE([MAJOR_IN_SYSMACROS], [1],
+      [Define to 1 if `major', `minor', and `makedev' are declared in
+       <sysmacros.h>.])])
+fi
+])
+
+])
diff -urpN mc-4.8.20/m4.include/windows-stat-inodes.m4 mc-4.8.21/m4.include/windows-stat-inodes.m4
--- mc-4.8.20/m4.include/windows-stat-inodes.m4	1970-01-01 01:00:00.000000000 +0100
+++ mc-4.8.21/m4.include/windows-stat-inodes.m4	2018-05-27 21:56:21.000000000 +0200
@@ -0,0 +1,19 @@
+# windows-stat-inodes.m4 serial 1
+dnl Copyright (C) 2017-2018 Free Software Foundation, Inc.
+dnl This file is free software; the Free Software Foundation
+dnl gives unlimited permission to copy and/or distribute it,
+dnl with or without modifications, as long as this notice is preserved.
+
+dnl Enable inode identification in 'struct stat' on native Windows platforms.
+dnl Set WINDOWS_STAT_INODES to
+dnl - 0 -> keep the default (dev_t = 32-bit, ino_t = 16-bit),
+dnl - 1 -> override types normally (dev_t = 32-bit, ino_t = 64-bit),
+dnl - 2 -> override types in an extended way (dev_t = 64-bit, ino_t = 128-bit).
+AC_DEFUN([gl_WINDOWS_STAT_INODES],
+[
+  AC_REQUIRE([AC_CANONICAL_HOST])
+  case "$host_os" in
+    mingw*) WINDOWS_STAT_INODES=1 ;;
+    *)      WINDOWS_STAT_INODES=0 ;;
+  esac
+])
diff -urpN mc-4.8.20/misc/Makefile.in mc-4.8.21/misc/Makefile.in
--- mc-4.8.20/misc/Makefile.in	2017-11-25 19:33:51.000000000 +0100
+++ mc-4.8.21/misc/Makefile.in	2018-06-03 10:57:32.000000000 +0200
@@ -117,6 +117,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -124,6 +125,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/misc/ext.d/Makefile.in mc-4.8.21/misc/ext.d/Makefile.in
--- mc-4.8.20/misc/ext.d/Makefile.in	2017-11-25 19:33:51.000000000 +0100
+++ mc-4.8.21/misc/ext.d/Makefile.in	2018-06-03 10:57:32.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/misc/ext.d/archive.sh mc-4.8.21/misc/ext.d/archive.sh
--- mc-4.8.20/misc/ext.d/archive.sh	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/misc/ext.d/archive.sh	2018-05-27 21:56:21.000000000 +0200
@@ -35,6 +35,9 @@ do_view_action() {
     xz)
         xz -dc "${MC_EXT_FILENAME}" 2>/dev/null
         ;;
+    zst)
+        zstd -dc "${MC_EXT_FILENAME}" 2>/dev/null
+        ;;
     tar)
         tar tvvf - < "${MC_EXT_FILENAME}"
         ;;
@@ -66,6 +69,10 @@ do_view_action() {
         xz -dc "${MC_EXT_FILENAME}" 2>/dev/null | \
             tar tvvf -
         ;;
+    tar.zst|tzst)
+        zstd -dc "${MC_EXT_FILENAME}" 2>/dev/null | \
+            tar tvvf -
+        ;;
     tar.F)
         freeze -dc "${MC_EXT_FILENAME}" 2>/dev/null | \
             tar tvvf -
@@ -107,6 +114,10 @@ do_view_action() {
         xz -dc "${MC_EXT_FILENAME}" | \
             cpio -itv 2>/dev/null
         ;;
+    cpio.zst)
+        zstd -dc "${MC_EXT_FILENAME}" | \
+            cpio -itv 2>/dev/null
+        ;;
     cpio)
         cpio -itv < "${MC_EXT_FILENAME}" 2>/dev/null
         ;;
@@ -158,6 +169,9 @@ do_open_action() {
     xz)
         xz -dc "${MC_EXT_FILENAME}" | ${pager}
         ;;
+    zst)
+        zstd -dc "${MC_EXT_FILENAME}" | ${pager}
+        ;;
     par2)
         par2 r "${MC_EXT_FILENAME}"
         ;;
diff -urpN mc-4.8.20/misc/ext.d/misc.sh.in mc-4.8.21/misc/ext.d/misc.sh.in
--- mc-4.8.20/misc/ext.d/misc.sh.in	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/misc/ext.d/misc.sh.in	2018-05-27 21:56:21.000000000 +0200
@@ -48,7 +48,8 @@ do_view_action() {
         ctorrent -x "${MC_EXT_FILENAME}" 2>/dev/null
         ;;
     javaclass)
-        jad -p "${MC_EXT_FILENAME}" 2>/dev/null
+        jad -p "${MC_EXT_FILENAME}" 2>/dev/null || \
+            (file -b "${MC_EXT_FILENAME}"; javap -private "${MC_EXT_FILENAME}" 2>/dev/null)
         ;;
     *)
         ;;
diff -urpN mc-4.8.20/misc/ext.d/text.sh.in mc-4.8.21/misc/ext.d/text.sh.in
--- mc-4.8.20/misc/ext.d/text.sh.in	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/misc/ext.d/text.sh.in	2018-05-27 21:56:21.000000000 +0200
@@ -34,6 +34,9 @@ get_unpacker() {
     man.xz)
         unpacker="xz -dc"
         ;;
+    man.zst)
+        unpacker="zstd -dc"
+        ;;
     esac
     echo ${unpacker}
 }
@@ -64,7 +67,7 @@ do_view_action() {
     nroff.ms)
         nroff @MAN_FLAGS@ -ms "${MC_EXT_FILENAME}"
         ;;
-    man.gz|man.bz|man.bz2|man.lz|man.lz4|man.lzma|man.xz)
+    man.gz|man.bz|man.bz2|man.lz|man.lz4|man.lzma|man.xz|man.zst)
         case "${MC_EXT_FILENAME}" in
         */log/*|*/logs/*)
             ${unpacker} "${MC_EXT_FILENAME}"
@@ -111,7 +114,7 @@ do_open_action() {
     nroff.ms)
         nroff @MAN_FLAGS@ -ms "${MC_EXT_FILENAME}" | ${pager}
         ;;
-    man.gz|man.bz|man.bz2|man.lz|man.lz4|man.lzma|man.xz)
+    man.gz|man.bz|man.bz2|man.lz|man.lz4|man.lzma|man.xz|man.zst)
         case "${MC_EXT_FILENAME}" in
         */log/*|*/logs/*)
             ${unpacker} "${MC_EXT_FILENAME}"
diff -urpN mc-4.8.20/misc/filehighlight.ini mc-4.8.21/misc/filehighlight.ini
--- mc-4.8.20/misc/filehighlight.ini	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/misc/filehighlight.ini	2018-05-27 21:56:21.000000000 +0200
@@ -21,20 +21,20 @@
 
 [core]
     regexp=^core\\.*\\d*$
+    extensions_case=true
 
 [temp]
     extensions=~;$$$;bak;tmp
-    extensions_case=false
     regexp=(^#.*|.*~$)
 
 [archive]
-    extensions=7z;Z;ace;arc;arj;ark;bz2;cab;gz;lha;lz;lz4;lzh;lzma;rar;rpm;tar;tbz;tbz2;tgz;tlz;txz;xz;zip;zoo
+    extensions=7z;Z;ace;arc;arj;ark;bz2;cab;gz;lha;lz;lz4;lzh;lzma;rar;rpm;tar;tbz;tbz2;tgz;tlz;txz;tzst;xz;zip;zoo;zst
 
 [doc]
     extensions=chm;css;ctl;diz;doc;docm;docx;dtd;htm;html;letter;lsm;mail;man;me;msg;nroff;odp;ods;odt;pdf;po;ppt;pptm;pptx;ps;rtf;sgml;shtml;tex;text;txt;xls;xlsm;xlsx;xml;xsd;xslt
 
 [source]
-    extensions=ada;asm;awk;bash;c;caml;cc;cgi;cpp;cxx;diff;erl;h;hh;hi;hpp;hs;inc;jasm;jav;java;js;m4;mak;ml;mli;mll;mlp;mly;pas;patch;php;phps;pl;pm;prg;py;rb;sas;sh;sl;st;tcl;tk;xq
+    extensions=ada;asm;awk;bash;c;caml;cc;cgi;cpp;cxx;diff;erl;h;hh;hi;hpp;hs;inc;jasm;jav;java;js;m4;mak;mjs;ml;mli;mll;mlp;mly;pas;patch;php;phps;pl;pm;prg;py;rb;sas;sh;sl;st;tcl;tk;xq
 
 [media]
     extensions=3gp;aac;ac3;ape;asf;avi;dts;flac;flv;it;m3u;m4a;med;mid;midi;mkv;mod;mol;mov;mp2;mp3;mp4;mpeg;mpg;mpl;ogg;ogv;s3m;umx;vob;wav;webm;wma;wmv;xm
diff -urpN mc-4.8.20/misc/macros.d/Makefile.in mc-4.8.21/misc/macros.d/Makefile.in
--- mc-4.8.20/misc/macros.d/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/misc/macros.d/Makefile.in	2018-06-03 10:57:32.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/misc/mc.ext.in mc-4.8.21/misc/mc.ext.in
--- mc-4.8.20/misc/mc.ext.in	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/misc/mc.ext.in	2018-05-27 21:56:21.000000000 +0200
@@ -150,6 +150,11 @@ regex/\.t(ar\.xz|xz)$
 	Open=%cd %p/utar://
 	View=%view{ascii} @EXTHELPERSDIR@/archive.sh view tar.xz
 
+# .tar.zst, .tzst
+regex/\.t(ar\.zst|zst)$
+	Open=%cd %p/utar://
+	View=%view{ascii} @EXTHELPERSDIR@/archive.sh view tar.zst
+
 # .tar.F - used in QNX
 shell/.tar.F
 	# Open=%cd %p/utar://
@@ -212,6 +217,10 @@ shell/.cpio.xz
 	Open=%cd %p/ucpio://
 	View=%view{ascii} @EXTHELPERSDIR@/archive.sh view cpio.xz
 
+shell/.cpio.zst
+	Open=%cd %p/ucpio://
+	View=%view{ascii} @EXTHELPERSDIR@/archive.sh view cpio.zst
+
 shell/.cpio.gz
 	Open=%cd %p/ucpio://
 	View=%view{ascii} @EXTHELPERSDIR@/archive.sh view cpio.gz
@@ -243,6 +252,10 @@ regex/\.(diff|patch)(\.xz)$
     Open=%cd %p/patchfs://
     View=%view{ascii} @EXTHELPERSDIR@/archive.sh view xz
 
+regex/\.(diff|patch)(\.zst)$
+    Open=%cd %p/patchfs://
+    View=%view{ascii} @EXTHELPERSDIR@/archive.sh view zst
+
 # ls-lR
 regex/(^|\.)ls-?lR(\.gz|Z|bz2)$
 	Open=%cd %p/lslR://
@@ -403,6 +416,10 @@ regex/([^0-9]|^[^\.]*)\.([1-9][A-Za-z]*|
 	Open=@EXTHELPERSDIR@/text.sh open man.xz %var{PAGER:more}
 	View=%view{ascii,nroff} @EXTHELPERSDIR@/text.sh view man.xz %var{PAGER:more}
 
+regex/([^0-9]|^[^\.]*)\.([1-9][A-Za-z]*|[ln])\.zst$
+	Open=@EXTHELPERSDIR@/text.sh open man.zst %var{PAGER:more}
+	View=%view{ascii,nroff} @EXTHELPERSDIR@/text.sh view man.zst %var{PAGER:more}
+
 # CHM
 shell/i/.chm
 	Open=@EXTHELPERSDIR@/text.sh open chm
@@ -602,7 +619,7 @@ shell/i/.rtf
 	Open=@EXTHELPERSDIR@/doc.sh open msdoc
 
 # Microsoft Excel Worksheet
-regex/i/\.xl[sw]$
+regex/i/\.(xl[sw]|xlsx)$
 	Open=@EXTHELPERSDIR@/doc.sh open msxls
 	View=%view{ascii} @EXTHELPERSDIR@/doc.sh view msxls
 type/^Microsoft\ Excel
@@ -790,6 +807,11 @@ regex/\.xz$
 	Open=@EXTHELPERSDIR@/archive.sh view xz %var{PAGER:more}
 	View=%view{ascii} @EXTHELPERSDIR@/archive.sh view xz
 
+# zstd
+regex/\.zst$
+	Open=@EXTHELPERSDIR@/archive.sh view zst %var{PAGER:more}
+	View=%view{ascii} @EXTHELPERSDIR@/archive.sh view zst
+
 # Parity Archive
 type/^Parity\ Archive\ Volume\ Set
 	Open=@EXTHELPERSDIR@/archive.sh open par2
diff -urpN mc-4.8.20/misc/mc.menu.in mc-4.8.21/misc/mc.menu.in
--- mc-4.8.20/misc/mc.menu.in	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/misc/mc.menu.in	2018-05-27 21:56:21.000000000 +0200
@@ -84,6 +84,15 @@ shell_patterns=0
         tar cf - "$Pwd" | xz -f > "$tar.tar.xz" && \
         echo "../$tar.tar.xz created."
 
+7       Compress the current subdirectory (tar.zst)
+        Pwd=`basename %d /`
+        echo -n "Name of the compressed file (without extension) [$Pwd]: "
+        read tar
+        [ "$tar"x = x ] && tar="$Pwd"
+        cd .. && \
+        tar cf - "$Pwd" | zstd -f > "$tar.tar.zst" && \
+        echo "../$tar.tar.zst created."
+
 = f \.c$ & t r
 + f \.c$ & t r & ! t t
 c       Compile and link current .c file
@@ -219,7 +228,7 @@ U       Uudecode marked news articles (n
         fi
         echo "Please test the output file before deleting anything."
 
-=+ f \.tar\.gz$ | f \.tar\.z$ | f \.tgz$ | f \.tpz$ | f \.tar\.lz$ | f \.tar\.lz4$ | f \.tar\.lzma$ | f \.tar\.7z$ | f \.tar\.xz$ | f \.tar\.Z$ | f \.tar\.bz2$ & t r
+=+ f \.tar\.gz$ | f \.tar\.z$ | f \.tgz$ | f \.tpz$ | f \.tar\.lz$ | f \.tar\.lz4$ | f \.tar\.lzma$ | f \.tar\.7z$ | f \.tar\.xz$ | f \.tar\.zst | f \.tar\.Z$ | f \.tar\.bz2$ & t r
 x       Extract the contents of a compressed tar file
         unset PRG
         case %f in
@@ -230,6 +239,7 @@ x       Extract the contents of a compre
             *.tar.lz4)  PRG="lz4 -dc";;
             *.tar.lzma) PRG="lzma -dc";;
             *.tar.xz)   PRG="xz -dc";;
+            *.tar.zst)  PRG="zstd -dc";;
             *)          exit 1;;
         esac
         $PRG %f | tar xvf -
diff -urpN mc-4.8.20/misc/skins/Makefile.in mc-4.8.21/misc/skins/Makefile.in
--- mc-4.8.20/misc/skins/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/misc/skins/Makefile.in	2018-06-03 10:57:32.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/misc/syntax/Makefile.am mc-4.8.21/misc/syntax/Makefile.am
--- mc-4.8.20/misc/syntax/Makefile.am	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/misc/syntax/Makefile.am	2018-05-27 21:56:21.000000000 +0200
@@ -71,6 +71,7 @@ SYNTAXFILES =			\
 	python.syntax		\
 	r.syntax		\
 	ruby.syntax		\
+	rust.syntax		\
 	sh.syntax		\
 	slang.syntax		\
 	smalltalk.syntax	\
diff -urpN mc-4.8.20/misc/syntax/Makefile.in mc-4.8.21/misc/syntax/Makefile.in
--- mc-4.8.20/misc/syntax/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/misc/syntax/Makefile.in	2018-06-03 10:57:32.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
@@ -507,6 +510,7 @@ SYNTAXFILES = \
 	python.syntax		\
 	r.syntax		\
 	ruby.syntax		\
+	rust.syntax		\
 	sh.syntax		\
 	slang.syntax		\
 	smalltalk.syntax	\
diff -urpN mc-4.8.20/misc/syntax/Syntax.in mc-4.8.21/misc/syntax/Syntax.in
--- mc-4.8.20/misc/syntax/Syntax.in	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/misc/syntax/Syntax.in	2018-05-27 21:56:21.000000000 +0200
@@ -49,7 +49,7 @@ include python.syntax
 file ..\*\\.(pyx|pxd|pxi)$ Cython\sor\sPyrex\sProgram
 include cython.syntax
 
-file ..\*\\.(?:rb)$ Ruby\sProgram ^#!.\*([\s/]ruby|@RUBY@)
+file ..\*\\.(?i:rb)$ Ruby\sProgram ^#!.\*([\s/]ruby|@RUBY@)
 include ruby.syntax
 
 file ..\*\\.(man|[0-9n]|[0-9](x|ncurses|ssl|p|pm|menu|form|vga|t|td))$ NROFF\sSource
@@ -103,6 +103,9 @@ include fortran.syntax
 file ..\*\\.go$ GoLang\sProgram
 include go.syntax
 
+file ..\*\\.rs$ Rust\sProgram
+include rust.syntax
+
 file ..\*\\.(?i:f)9[05]$ Freeform\sFortran\sProgram
 include f90.syntax
 
@@ -124,7 +127,7 @@ include properties.syntax
 file ..\*\\.(?i:cs)$ C\#\sProgram
 include cs.syntax
 
-file ..\*\\.(?i:js)$ JavaScript\sProgram ^#!.\*[\s/](node|nodejs)\\b
+file ..\*\\.(?i:m?js)$ JavaScript\sProgram ^#!.\*[\s/](node|nodejs)\\b
 include js.syntax
 
 file ..\*\\.(?i:ts)$ TypeScript\sProgram
diff -urpN mc-4.8.20/misc/syntax/markdown.syntax mc-4.8.21/misc/syntax/markdown.syntax
--- mc-4.8.20/misc/syntax/markdown.syntax	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/misc/syntax/markdown.syntax	2018-05-27 21:56:21.000000000 +0200
@@ -4,6 +4,13 @@ context default lightgray
     spellcheck
     # links
     keyword whole [*](*) yellow
+    keyword \*\* white
+    keyword \*   yellow
+    keyword \\_  lightgray
+    keyword wholeleft  __ white
+    keyword wholeright __ white
+    keyword wholeleft  _  yellow
+    keyword wholeright _  yellow
 
 context linestart #### \n red
     spellcheck
@@ -21,15 +28,3 @@ context ``` ``` cyan
 context `` `` cyan
 
 context ` ` cyan
-
-context \*\* \*\* brightgreen
-    spellcheck
-
-context \* \* magenta
-    spellcheck
-
-context \_\_ \_\_ brightgreen
-    spellcheck
-
-context \_ \_ magenta
-    spellcheck
diff -urpN mc-4.8.20/misc/syntax/rust.syntax mc-4.8.21/misc/syntax/rust.syntax
--- mc-4.8.20/misc/syntax/rust.syntax	1970-01-01 01:00:00.000000000 +0100
+++ mc-4.8.21/misc/syntax/rust.syntax	2018-05-27 21:56:21.000000000 +0200
@@ -0,0 +1,153 @@
+context default
+
+# keywords
+    keyword whole as yellow
+    keyword whole break yellow
+    keyword whole const yellow
+    keyword whole continue yellow
+    keyword whole crate yellow
+    keyword whole else yellow
+    keyword whole enum yellow
+    keyword whole extern yellow
+    keyword whole fn yellow
+    keyword whole for yellow
+    keyword whole if yellow
+    keyword whole impl yellow
+    keyword whole in yellow
+    keyword whole let yellow
+    keyword whole loop yellow
+    keyword whole match yellow
+    keyword whole mod yellow
+    keyword whole move yellow
+    keyword whole mut yellow
+    keyword whole pub yellow
+    keyword whole ref yellow
+    keyword whole return yellow
+    keyword whole Self yellow
+    keyword whole self brightgreen
+    keyword whole static yellow
+    keyword whole struct yellow
+    keyword whole super yellow
+    keyword whole trait yellow
+    keyword whole type yellow
+    keyword whole unsafe yellow
+    keyword whole use yellow
+    keyword whole where yellow
+    keyword whole while yellow
+
+# keywords reserved for future use
+    keyword whole abstract red
+    keyword whole alignof red
+    keyword whole become red
+    keyword whole box red
+    keyword whole do red
+    keyword whole final red
+    keyword whole macro red
+    keyword whole offsetof red
+    keyword whole override red
+    keyword whole priv red
+    keyword whole proc red
+    keyword whole pure red
+    keyword whole sizeof red
+    keyword whole typeof red
+    keyword whole unsized red
+    keyword whole virtual red
+    keyword whole yield red
+
+# common types
+    keyword whole bool brightcyan
+    keyword whole char brightcyan
+    keyword whole isize brightcyan
+    keyword whole usize brightcyan
+
+    keyword whole i8 brightcyan
+    keyword whole i16 brightcyan
+    keyword whole i32 brightcyan
+    keyword whole i64 brightcyan
+    keyword whole u8 brightcyan
+    keyword whole u16 brightcyan
+    keyword whole u32 brightcyan
+    keyword whole u64 brightcyan
+    keyword whole isize brightcyan
+    keyword whole usize brightcyan
+    keyword whole f32 brightcyan
+    keyword whole f64 brightcyan
+
+    keyword whole str brightcyan
+    keyword whole String brightcyan
+    keyword whole Vec brightcyan
+    keyword whole Option brightcyan
+    keyword whole Result brightcyan
+
+# constants
+    keyword whole false brightgreen
+    keyword whole true brightgreen
+    keyword whole Some brightgreen
+    keyword whole None brightgreen
+    keyword whole Ok brightgreen
+    keyword whole Err brightgreen
+
+# macros
+    keyword whole +! brightmagenta
+    keyword whole $+ brightblue
+
+# numbers
+    wholechars abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_.
+
+    keyword whole 0x\{0123456789abcdefABCDEF_\}\[0123456789abcdefABCDEF_\] brightgreen
+    keyword whole 0o\{01234567_\}\[01234567_\] brightgreen
+    keyword whole 0b\{01_\}\[01_\] brightgreen
+    keyword whole \{0123456789_\}\[0123456789_\] brightgreen
+    keyword whole \[0123456789_\]\.\{0123456789_\}\[0123456789_\] brightgreen
+    keyword whole \{0123456789_\}\[0123456789_\]\.\[0123456789_\] brightgreen
+    keyword whole \{0123456789_\}\[0123456789_\]\{eE\}\{0123456789_\}\[0123456789_\] brightgreen
+    keyword whole \{0123456789_\}\[0123456789_\]\{eE\}\{\-\+\}\{0123456789_\}\[0123456789_\] brightgreen
+    keyword whole \{0123456789_\}\[0123456789_\]\.\{0123456789_\}\[0123456789_\]\{eE\}\{0123456789_\}\[0123456789_\] brightgreen
+    keyword whole \{0123456789_\}\[0123456789_\]\.\{0123456789_\}\[0123456789_\]\{eE\}\{\-\+\}\{0123456789_\}\[0123456789_\] brightgreen
+
+# char
+    keyword '\\'' brightgreen
+    keyword '*' brightgreen
+
+# comments
+
+context /\* \*/ brown
+    spellcheck
+    keyword whole BUG brightred
+    keyword whole FixMe brightred
+    keyword whole FIXME brightred
+    keyword whole Note brightred
+    keyword whole NOTE brightred
+    keyword whole ToDo brightred
+    keyword whole TODO brightred
+    keyword !!\[!\] brightred
+    keyword ??\[?\] brightred
+
+
+context // \n brown
+    spellcheck
+    keyword whole BUG brightred
+    keyword whole FixMe brightred
+    keyword whole FIXME brightred
+    keyword whole Note brightred
+    keyword whole NOTE brightred
+    keyword whole ToDo brightred
+    keyword whole TODO brightred
+    keyword !!\[!\] brightred
+    keyword ??\[?\] brightred
+
+# strings
+context " " green
+    spellcheck
+    keyword \\" brightgreen
+    keyword \\' brightgreen
+    keyword \\\\ brightgreen
+    keyword \\\{abtnvfr0\} brightgreen
+
+
+context r#" "# green
+    spellcheck
+
+
+context #[ ] white
+context #![ ] white
diff -urpN mc-4.8.20/misc/syntax/sh.syntax mc-4.8.21/misc/syntax/sh.syntax
--- mc-4.8.20/misc/syntax/sh.syntax	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/misc/syntax/sh.syntax	2018-05-27 21:56:21.000000000 +0200
@@ -1995,6 +1995,7 @@ wholechars abcdefghijklmnopqrstuvwxyzABC
     keyword whole zoo cyan
     keyword whole zsh cyan
     keyword whole zsoelim cyan
+    keyword whole zstd cyan
     keyword whole zxpdf cyan
 
     keyword whole pamcut cyan
diff -urpN mc-4.8.20/po/POTFILES.in mc-4.8.21/po/POTFILES.in
--- mc-4.8.20/po/POTFILES.in	2017-11-25 19:33:57.000000000 +0100
+++ mc-4.8.21/po/POTFILES.in	2018-06-03 10:57:38.000000000 +0200
@@ -78,6 +78,7 @@ src/vfs/sfs/sfs.c
 src/vfs/sftpfs/config_parser.c
 src/vfs/sftpfs/connection.c
 src/vfs/sftpfs/file.c
+src/vfs/sftpfs/internal.c
 src/vfs/sftpfs/vfs_class.c
 src/vfs/sftpfs/vfs_subclass.c
 src/vfs/smbfs/smbfs.c
Binary files mc-4.8.20/po/az.gmo and mc-4.8.21/po/az.gmo differ
diff -urpN mc-4.8.20/po/az.po mc-4.8.21/po/az.po
--- mc-4.8.20/po/az.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/az.po	2018-06-03 11:03:46.000000000 +0200
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Azerbaijani (http://www.transifex.com/mc/mc/language/az/)\n"
 "Language: az\n"
@@ -631,6 +631,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Subshell dəstəyini fəallaşdırar (əsas)"
 
@@ -643,12 +646,18 @@ msgstr "Ftp dialoqlarını bildirilən f
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Faylda göstərici proqramı başladar"
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Xterm qabiliyyətlərini zorlayar"
 
@@ -688,6 +697,9 @@ msgstr "Rəngli modda başlat"
 msgid "Specifies a color configuration"
 msgstr "Rəng qurğularını bildir"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1553,7 +1565,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1733,6 +1745,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "Təzədən &sına"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1823,6 +1844,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2400,11 +2424,24 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
-msgstr "Təzədən &sına"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
+msgstr ""
 
 #, c-format
 msgid ""
@@ -2424,16 +2461,14 @@ msgstr "heç&biri"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2448,28 +2483,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2597,32 +2635,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -4015,6 +4030,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/be.gmo and mc-4.8.21/po/be.gmo differ
diff -urpN mc-4.8.20/po/be.po mc-4.8.21/po/be.po
--- mc-4.8.20/po/be.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/be.po	2018-06-03 11:03:46.000000000 +0200
@@ -5,13 +5,15 @@
 # Translators:
 # Slava Zanko <slavazanko@gmail.com>, 2011
 # Viktar Palstsiuk <vipals@gmail.com>, 2015
+# Zmicer Turok <zmicerturok@gmail.com>, 2018
+# Zmicer Turok <zmicerturok@gmail.com >, 2017-2018
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
-"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-05-21 16:57+0000\n"
+"Last-Translator: Zmicer Turok <zmicerturok@gmail.com>\n"
 "Language-Team: Belarusian (http://www.transifex.com/mc/mc/language/be/)\n"
 "Language: be\n"
 "MIME-Version: 1.0\n"
@@ -23,34 +25,34 @@ msgstr ""
 
 # "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 msgid "Warning: cannot load codepages list"
-msgstr "Перасьцярога: немагчыма заладаваць сьпіс кадовак"
+msgstr "Увага: немагчыма загрузіць спіс"
 
 msgid "7-bit ASCII"
 msgstr "7-бітная ASCII"
 
 #, c-format
 msgid "Cannot translate from %s to %s"
-msgstr "Немагчыма ператварыць з %s у %s"
+msgstr "Немагчыма пераўтварыць з %s у %s"
 
 msgid "Event system already initialized"
-msgstr "Сыстэму падзеяў ужо запусьцілі"
+msgstr "Сістэма падзей ужо запушчана"
 
 msgid "Failed to initialize event system"
-msgstr "Не ўдалося запусьціць сыстэму падзеяў"
+msgstr "Не атрымалася запусціць сістэму падзей"
 
 msgid "Event system not initialized"
-msgstr "Сыстэму падзеяў не запусьцілі"
+msgstr "Сістэма падзей не запушчана"
 
 msgid "Check input data! Some of parameters are NULL!"
-msgstr "Спраўдзіце ўведзенае! Пэўныя парамэтры роўныя «NULL»!"
+msgstr "Спраўдзіце ўведзенае! Пэўныя параметры роўныя «NULL»!"
 
 #, c-format
 msgid "Unable to create group '%s' for events!"
-msgstr "Не ўдаецца стварыць суполку падзей «%s»!"
+msgstr "Не атрымалася стварыць групу падзей «%s»!"
 
 #, c-format
 msgid "Unable to create event '%s'!"
-msgstr "Не ўдаецца стварыць падзею «%s»!"
+msgstr "Не атрымалася стварыць падзею «%s»!"
 
 #, c-format
 msgid ""
@@ -58,29 +60,29 @@ msgid ""
 "User: %s\n"
 "Process ID: %d"
 msgstr ""
-"Файл «%s» ужо рэдаґуецца.\n"
+"Файл «%s» ужо рэдагуецца.\n"
 "Карыстальнік: %s\n"
 "Нумар працэсу: %d"
 
 msgid "File locked"
-msgstr "Файл замкнёны"
+msgstr "Файл заблакаваны"
 
 msgid "&Grab lock"
-msgstr "&Захапіць замок"
+msgstr "Захапіць блакаванне(&G)"
 
 msgid "&Ignore lock"
-msgstr "&Не зважаць"
+msgstr "Не зважаць на блакаванне(&I)"
 
 #, c-format
 msgid "Cannot create %s directory"
-msgstr "Нельга стварыць каталёґ «%s»"
+msgstr "Нельга стварыць каталог «%s»"
 
 msgid "FATAL: not a directory:"
-msgstr "ХІБА: ня ёсьць каталёґам:"
+msgstr "ХІБА: не з’яўляецца каталогам:"
 
 #, c-format
 msgid "An error occurred while migrating user settings: %s"
-msgstr "Адбылася памылка пры пераносе настроек карыстальніка: %s"
+msgstr "Адбылася памылка падчас пераносу налад карыстальніка: %s"
 
 #, c-format
 msgid ""
@@ -89,80 +91,84 @@ msgid ""
 "To get more info, please visit\n"
 "http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html"
 msgstr ""
-"Старыя налады перанесьлі з «%s»\n"
-"у каталёґі, якія раіць «Freedesktop».\n"
-"Па падрабязнасьці завітайце сюды:\n"
-"http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html"
+"Старыя налады перанеслі з «%s»\n"
+" у каталогі, якія раіць «Freedesktop».\n"
+"Па падрабязнасці завітайце сюды:\n"
+"http: //standards.freedesktop.org/basedir-spec/basedir-spec-latest.html"
 
 #, c-format
 msgid ""
 "Your old settings were migrated from %s\n"
 "to %s\n"
 msgstr ""
-"Старыя налады перанесьлі з «%s»\n"
+"Старыя налады перанеслі з «%s»\n"
 "у «%s».\n"
 
 msgid ""
 "Number out of range (should be in byte range, 0 <= n <= 0xFF, expressed in "
 "hex)"
 msgstr ""
+"Лік па-за дыяпазонам (мусіць быць у дыяпазоне байтаў, 0 <= N <= 0xFF, "
+"шаснаццатковы)"
 
 msgid "Invalid character"
-msgstr ""
+msgstr "Хібны сімвал"
 
 msgid "Unmatched quotes character"
-msgstr ""
+msgstr "Няўзгоднены сімвал двукосся"
 
 #, c-format
 msgid ""
 "Hex pattern error at position %d:\n"
 "%s."
 msgstr ""
+"Памылка шаснаццатковага шаблону на пазіцыі %d:\n"
+"%s."
 
 msgid "Search string not found"
-msgstr "Не знайшлі шуканы радок"
+msgstr "Радок не знойдзены"
 
 msgid "Not implemented yet"
-msgstr "Яшчэ не ажыцьцявілі"
+msgstr "Пакуль не рэалізавана"
 
 msgid "Num of replace tokens not equal to num of found tokens"
 msgstr ""
-"Колькасьць адзінак, якія трэба замяніць, не супадае з колькасьцю знойдзеных."
+"Колькасць адзінак, якія патрэбна замяніць, не супадае з колькасцю знойдзеных"
 
 #, c-format
 msgid "Invalid token number %d"
 msgstr "Хібная адзінка нумар %d"
 
 msgid "Regular expression error"
-msgstr "Памылка ў сталым выразе"
+msgstr "Памылка ў рэгулярным выразе"
 
 msgid "No&rmal"
-msgstr "Як &звычайна"
+msgstr "Як звычайна(&R)"
 
 msgid "Re&gular expression"
-msgstr "&Cталы выраз"
+msgstr "Рэгулярны выраз(&G)"
 
 msgid "He&xadecimal"
-msgstr "&Шаснаццатковы"
+msgstr "Шаснаццатковы(&X)"
 
 msgid "Wil&dcard search"
-msgstr "&Паводле шаблёну"
+msgstr "Паводле шаблону(&D)"
 
 #, c-format
 msgid ""
 "Unable to load '%s' skin.\n"
 "Default skin has been loaded"
 msgstr ""
-"Немагчыма прачытаць аздабленьне «%s».\n"
-"Ужываецца звычайнае."
+"Немагчыма прачытаць абалонку «%s».\n"
+"Ужываецца звычайная"
 
 #, c-format
 msgid ""
 "Unable to parse '%s' skin.\n"
 "Default skin has been loaded"
 msgstr ""
-"Немагчыма разабраць аздабленьне «%s».\n"
-"Ужываецца звычайнае."
+"Немагчыма разабраць абалонку «%s».\n"
+"Ужываецца звычайная"
 
 #, c-format
 msgid ""
@@ -170,6 +176,9 @@ msgid ""
 "%s\n"
 "Default skin has been loaded"
 msgstr ""
+"Немагчыма ўжыць абалонку '%s' з падтрымкай колераў:\n"
+"%s\n"
+"Прадвызначаная абалонка будзе загружана"
 
 #, c-format
 msgid ""
@@ -177,21 +186,23 @@ msgid ""
 "on non-256 colors terminal.\n"
 "Default skin has been loaded"
 msgstr ""
-"Немагчыма ужываць аздабленьне «%s»: трэба 256 колераў,\n"
-"але тэрмінал не падтрымвае столькі колераў.\n"
-"Ужываецца звычайнае."
+"Немагчыма ўжыць абалонку «%s»: трэба 256 колераў,\n"
+"але тэрмінал не падтрымвае столькі .\n"
+"Ужываецца звычайная"
 
 msgid "True color not supported with ncurses."
-msgstr ""
+msgstr "Колер не падтрымліваецца ncurses."
 
 msgid "True color not supported in this slang version."
-msgstr ""
+msgstr "Сапраўдны колер не падтрымліваецца ў гэтай версіі slang."
 
 msgid "Your terminal doesn't even seem to support 256 colors."
-msgstr ""
+msgstr "Здаецца, ваш тэрмінал не падтрымлівае 256 колераў."
 
 msgid "Set COLORTERM=truecolor if your terminal really supports true colors."
 msgstr ""
+"Усталюйце COLORTERM=truecolor , калі ваш тэрмінал сапраўды падтрымлівае "
+"сапраўдныя колеры."
 
 msgid "Escape"
 msgstr "Escape"
@@ -287,7 +298,7 @@ msgid "Home"
 msgstr "Home"
 
 msgid "End key"
-msgstr "Клявіша «End»"
+msgstr "Клавіша «End»"
 
 msgid "Page Up"
 msgstr "Page Up"
@@ -296,49 +307,49 @@ msgid "Page Down"
 msgstr "Page Down"
 
 msgid "/ on keypad"
-msgstr "/ на лічбавых клавішах"
+msgstr "/ на лічбавай клавіятуры"
 
 msgid "* on keypad"
-msgstr "«*» лічбав. кляв."
+msgstr "«*» лічбавай клавіятуры"
 
 msgid "- on keypad"
-msgstr "«-» лічбав. кляв."
+msgstr "\"-\" лічбавай клавіятуры"
 
 msgid "+ on keypad"
-msgstr "«+» лічбав. кляв."
+msgstr "\"+\" лічбавай клавіятуры"
 
 msgid "Left arrow keypad"
-msgstr "«Улева» л/кл"
+msgstr "«Улева» лічбавай клавіятуры"
 
 msgid "Right arrow keypad"
-msgstr "«Управа» л/кл"
+msgstr "«Управа» лічбавай клавіятуры"
 
 msgid "Up arrow keypad"
-msgstr "«Уверх» л/кл"
+msgstr "«Уверх» лічбавай клавіятуры"
 
 msgid "Down arrow keypad"
-msgstr "«Уніз» л/кл"
+msgstr "«Уніз» лічбавай клавіятуры"
 
 msgid "Home on keypad"
-msgstr "«Home» л/кл"
+msgstr "«Home» лічбавай клавіятуры"
 
 msgid "End on keypad"
-msgstr "«End» л/кл"
+msgstr "«End» лічбавай клавіятуры"
 
 msgid "Page Down keypad"
-msgstr "«Page Down» л/кл"
+msgstr "«Page Down» лічбавай клавіятуры"
 
 msgid "Page Up keypad"
-msgstr "«Page Up» л/кл"
+msgstr "«Page Up» лічбавай клавіятуры"
 
 msgid "Insert on keypad"
-msgstr "«Insert» л/кл"
+msgstr "«Insert» лічбавай клавіятуры"
 
 msgid "Delete on keypad"
-msgstr "«Delete» л/кл"
+msgstr "«Delete» лічбавай клавіятуры"
 
 msgid "Enter on keypad"
-msgstr "«Enter» л/кл"
+msgstr "«Enter» лічбавай клавіятуры"
 
 msgid "Function key 21"
 msgstr "Функцыянальная 21"
@@ -353,10 +364,10 @@ msgid "Function key 24"
 msgstr "Функцыянальная 24"
 
 msgid "A1 key"
-msgstr "Клявіша «A1»"
+msgstr "Клавіша «A1»"
 
 msgid "C1 key"
-msgstr "Клявіша «C1»"
+msgstr "Клавіша «C1»"
 
 msgid "Asterisk"
 msgstr "Зорачка"
@@ -371,10 +382,10 @@ msgid "Dot"
 msgstr "Кропка"
 
 msgid "Less than"
-msgstr "Меней за"
+msgstr "Менш за"
 
 msgid "Great than"
-msgstr "Болей за"
+msgstr "Больш за"
 
 msgid "Equal"
 msgstr "Роўнае"
@@ -386,7 +397,7 @@ msgid "Apostrophe"
 msgstr "Апостраф"
 
 msgid "Colon"
-msgstr "Двухкроп’е"
+msgstr "Двукроп’е"
 
 msgid "Semicolon"
 msgstr "Кропка з коскай"
@@ -401,10 +412,10 @@ msgid "Ampersand"
 msgstr "Знак «&»"
 
 msgid "Dollar sign"
-msgstr "Знак даляру"
+msgstr "Знак даляра"
 
 msgid "Quotation mark"
-msgstr "Знак цытаваньня"
+msgstr "Знак цытавання"
 
 msgid "Percent sign"
 msgstr "Знак адсотку"
@@ -416,56 +427,56 @@ msgid "Tilda"
 msgstr "Тыльда"
 
 msgid "Prime"
-msgstr "Адваротны апостр."
+msgstr "Адваротны апостраф"
 
 msgid "Underline"
-msgstr "Падкрэсьліваньне"
+msgstr "Падкрэсліванне"
 
 msgid "Understrike"
-msgstr "Падкрэсьліваньне"
+msgstr "Падкрэсліванне"
 
 msgid "Pipe"
 msgstr "Простая рыска"
 
 msgid "Left parenthesis"
-msgstr "Левыя дужкі"
+msgstr "Левая дужка"
 
 msgid "Right parenthesis"
-msgstr "Правыя дужкі"
+msgstr "Правая дужка"
 
 msgid "Left bracket"
-msgstr "Лев. квадр. дужкі"
+msgstr "Левая квадратная дужка"
 
 msgid "Right bracket"
-msgstr "Прав. квадр. дужкі"
+msgstr "Правая квадратная дужка"
 
 msgid "Left brace"
-msgstr "Левыя фіґ. дужкі"
+msgstr "Левая фігурная дужка"
 
 msgid "Right brace"
-msgstr "Правыя фіґ. дужкі"
+msgstr "Правая фігурная дужка"
 
 msgid "Enter"
 msgstr "Увод"
 
 msgid "Tab key"
-msgstr "Клявіша «Tab»"
+msgstr "Клавіша «Tab»"
 
 msgid "Space key"
-msgstr "Клявіша «прагал»"
+msgstr "Клавіша «space»"
 
 msgid "Slash key"
 msgstr "Рыска «/»"
 
 msgid "Backslash key"
-msgstr "Адвар. рыска «\\»"
+msgstr "Адваротная рыска «\\»"
 
 msgid "Number sign #"
 msgstr "Знак нумару «#»"
 
 #. TRANSLATORS: Please translate as in "at sign" (@).
 msgid "At sign"
-msgstr "Сьлімак «@»"
+msgstr "Слімак «@»"
 
 msgid "Ctrl"
 msgstr "Ctrl"
@@ -477,103 +488,107 @@ msgid "Shift"
 msgstr "Shift"
 
 msgid "The TERM environment variable is unset!\n"
-msgstr "Зьменную асяродзьдзя «TERM» ня вызначылі!\n"
+msgstr "Зменную асяроддзя «TERM» не вызначылі!\n"
 
 #, c-format
 msgid ""
 "Screen size %dx%d is not supported.\n"
 "Check the TERM environment variable.\n"
 msgstr ""
-"Памер экрана %d×%d не падтрымваецца.\n"
-"Спраўдзіце зьменную асяродзьдзя «TERM».\n"
+"Памер экрана %d×%d не падтрымліваецца.\n"
+"Праверце зменную асяроддзя «TERM».\n"
 
 msgid "B"
-msgstr ""
+msgstr "Б"
 
 msgid "kB"
-msgstr ""
+msgstr "Кбайт"
 
 msgid "KiB"
-msgstr ""
+msgstr "КіБ"
 
 msgid "MB"
-msgstr ""
+msgstr "МБ"
 
 msgid "MiB"
-msgstr ""
+msgstr "МіБ"
 
 msgid "GB"
-msgstr ""
+msgstr "Гбайт"
 
 msgid "GiB"
-msgstr ""
+msgstr "Гбайт"
 
 msgid "Cannot create pipe descriptor"
-msgstr ""
+msgstr "Немагчыма стварыць дэскрыптар каналу"
 
 msgid "Cannot create pipe streams"
-msgstr ""
+msgstr "Немагчыма стварыць паток каналу"
 
 #, c-format
 msgid ""
 "Unexpected error in select() reading data from a child process:\n"
 "%s"
 msgstr ""
+"Нечакана адбылася памылка ў select() падчас чытання даных працэсу нашчадка\n"
+"%s"
 
 #, c-format
 msgid ""
 "Unexpected error in waitpid():\n"
 "%s"
 msgstr ""
+"Нечакана адбылася паылка ў waitpid():\n"
+"%s"
 
 msgid "Warning"
-msgstr "Перасьцярога"
+msgstr "Увага"
 
 msgid "Pipe failed"
-msgstr "Канал даў хібу"
+msgstr "Хібны канал"
 
 msgid "Dup failed"
-msgstr "Не ўдалося падвоіць"
+msgstr "Не атрымалася падвоіць"
 
 msgid "Error dup'ing old error pipe"
-msgstr "Не ўдалося падвоіць стары канал памылак"
+msgstr "Не атрымалася падвоіць стары канал памылак"
 
 #, c-format
 msgid "Directory cache expired for %s"
-msgstr "Запасьнік каталёґу састарэў для %s"
+msgstr "Кэш каталога састарэў для %s"
 
 #, c-format
 msgid "%s: %s: %s %3d%% (%lld) bytes transferred"
-msgstr ""
+msgstr "%s: %s: %s %3d%% (%lld) байтаў перададзена"
 
 #, c-format
 msgid "%s: %s: %s %lld bytes transferred"
-msgstr ""
+msgstr "%s: %s: %s %lld байтаў перададзена"
 
 msgid "Starting linear transfer..."
-msgstr "Пачынаем перадаваць лінейна…"
+msgstr "Запуск лінейнай перадачы..."
 
 msgid "Getting file"
-msgstr "Атрымваем файл"
+msgstr "Атрыманне файла"
 
 msgid "Changes to file lost"
-msgstr "Страцілі зьмены ў файле"
+msgstr "Змены ў файле былі страчаны"
 
 #, c-format
 msgid "%s is not a directory\n"
-msgstr "«%s» — не каталёґ\n"
+msgstr "«%s» — не каталог\n"
 
 #, c-format
 msgid "Directory %s is not owned by you\n"
-msgstr "Вы не валодаеце каталёґам «%s»\n"
+msgstr "Вы не валодаеце каталогам «%s»\n"
 
 #, c-format
 msgid "Cannot set correct permissions for directory %s\n"
-msgstr "Немагчыма вызначыць правільныя дазволы каталёґу «%s»\n"
+msgstr "Немагчыма задаць правільныя дазволы каталога «%s»\n"
 
 #, c-format
 msgid "Cannot create temporary directory %s: %s\n"
-msgstr "Немагчыма стварыць часовы каталёґ «%s»: %s\n"
+msgstr "Немагчыма стварыць часовы каталог «%s»: %s\n"
 
 #, c-format
 msgid "Temporary files will be created in %s\n"
@@ -581,16 +596,16 @@ msgstr "Часовыя файлы буд
 
 #, c-format
 msgid "Temporary files will not be created\n"
-msgstr "Часовыя файлы ня будуць стварацца\n"
+msgstr "Часовыя файлы не будуць стварацца\n"
 
 msgid "Press any key to continue..."
-msgstr "Каб працягваць, націсьніце хоць-якую клявішу…"
+msgstr "Каб працягнуць, націсніце хоць-якую клявішу…"
 
 msgid "Cannot parse:"
 msgstr "Немагчыма разабраць:"
 
 msgid "More parsing errors will be ignored."
-msgstr "На іншыя памылкі разбору не зважацьмем."
+msgstr "На іншыя памылкі разбору не зважаць."
 
 msgid "Internal error:"
 msgstr "Унутраная памылка:"
@@ -606,80 +621,89 @@ msgstr "Гісторыя"
 
 #. TRANSLATORS: no need to translate 'DialogTitle', it's just a context prefix
 msgid "DialogTitle|History cleanup"
-msgstr "Ачысьціць гісторыю"
+msgstr "Ачысціць гісторыю"
 
 msgid "Do you want clean this history?"
-msgstr "Ці ачысьціць гісторыю?"
+msgstr "Сапраўды ачысціць гісторыю?"
 
 msgid "&Yes"
-msgstr "&Так"
+msgstr "Так(&Y)"
 
 msgid "&No"
-msgstr "&Не"
+msgstr "Не(&N)"
 
 msgid "&OK"
-msgstr "&Добра"
+msgstr "Добра(&O)"
 
 msgid "&Cancel"
-msgstr "&Скасаваць"
+msgstr "Скасаваць(&C)"
 
 msgid "Background process:"
-msgstr "Працэс на тле:"
+msgstr "Працэс у фоне:"
 
 msgid "Error"
 msgstr "Памылка"
 
 #, c-format
 msgid "%s (%d)"
-msgstr ""
+msgstr "%s (%d)"
 
 msgid "&Abort"
-msgstr "&Перапыніць"
+msgstr "Скасаваць(&A)"
 
 msgid "Displays the current version"
-msgstr "Паказвае дзейную вэрсію"
+msgstr "Паказвае  версію"
 
 msgid "Print data directory"
-msgstr "Надрукаваць назву каталёґу зьвестак"
+msgstr "Вывесці назву каталога"
 
 msgid "Print extended info about used data directories"
-msgstr "Надрукаваць дадатковыя зьвесткі пра ўжываныя каталёґі"
+msgstr "Вывесці дадатковыя звесткі пра ўжываемыя каталогі"
 
 msgid "Print configure options"
-msgstr "Надрукаваць можнасьці настаўленьняў"
+msgstr "Вывесці параметры"
 
 msgid "Print last working directory to specified file"
-msgstr "Запісаць назву апошняга працоўнага каталёґу ў вызначаны файл"
+msgstr "Запісаць назву апошняга працоўнага каталога ў вызначаны файл"
+
+msgid "<file>"
+msgstr "<file>"
 
 msgid "Enables subshell support (default)"
-msgstr "Падтрымваць убудаваную абалонку (перадвызначана)"
+msgstr "Падтрымліваць убудаваную абалонку (прадвызначана)"
 
 msgid "Disables subshell support"
-msgstr "Не падтрымваць убудаваную абалонку"
+msgstr "Не падтрымліваць убудаваную абалонку"
 
 msgid "Log ftp dialog to specified file"
-msgstr "Запісваць дыялёґ па FTP у вызначаны файл"
+msgstr "Запісваць дыялог па FTP у вызначаны файл"
 
 msgid "Set debug level"
-msgstr "Вызначыць узровень высочваньня хібаў"
+msgstr "Задаць узровень пошуку хібаў"
+
+msgid "<integer>"
+msgstr "<integer>"
 
 msgid "Launches the file viewer on a file"
-msgstr "Прагледзець файл"
+msgstr "Праглядзець файл"
 
 msgid "Edit files"
-msgstr "Рэдаґаваць файлы"
+msgstr "Рэдагаваць файлы"
+
+msgid "<file> ..."
+msgstr "<file> ..."
 
 msgid "Forces xterm features"
-msgstr "Ужываць магчымасьці «xterm»"
+msgstr "Ужываць магчымасці «xterm»"
 
 msgid "Disable X11 support"
-msgstr "Не падтрымваць X11"
+msgstr "Не падтрымліваць X11"
 
 msgid "Tries to use an old highlight mouse tracking"
 msgstr "Спрабаваць сачыць за мышшу старым спосабам"
 
 msgid "Disable mouse support in text version"
-msgstr "Не падтрымваць мыш у тэкставай вэрсіі"
+msgstr "Не падтрымліваць мыш у тэкставай версіі"
 
 msgid "Tries to use termcap instead of terminfo"
 msgstr "Спрабаваць ужываць «termcap» замест «terminfo»"
@@ -688,29 +712,31 @@ msgid "To run on slow terminals"
 msgstr "Для павольных тэрміналаў"
 
 msgid "Use stickchars to draw"
-msgstr "Рысаваць псэўдаґрафікаю"
+msgstr "Выкарыстоўваць псеўдаграфіку для адалёўкі"
 
 msgid "Resets soft keys on HP terminals"
-msgstr "Скідвае праґрамныя клявішы на тэрміналах HP"
+msgstr "Скідвае праграмныя клавішы на тэрміналах HP"
 
 msgid "Load definitions of key bindings from specified file"
-msgstr "Прачытаць клявіятурныя выклічнікі з пазначанага файла"
+msgstr "Загрузіць спалучэнні клавіш з пазначанага файла"
 
 msgid "Don't load definitions of key bindings from file, use defaults"
-msgstr ""
-"Не чытаць клявіятурныя выклічнікі з пазначанага файла, ужываць звычайныя"
+msgstr "Не загружаць спалучэнні клавіш з пазначанага файла, ужываць звычайныя"
 
 msgid "Requests to run in black and white"
-msgstr "Запусьціць у чорна-белым аздабленьні"
+msgstr "Запусціць у чорна-белым аздабленні"
 
 msgid "Request to run in color mode"
-msgstr "Запусьціць у каляровым аздабленьні"
+msgstr "Запусціць у каляровым аздабленні"
 
 msgid "Specifies a color configuration"
-msgstr "Вызначае настаўленьні колераў"
+msgstr "Вызначае налады колераў"
+
+msgid "<string>"
+msgstr "<string>"
 
 msgid "Show mc with specified skin"
-msgstr "Паказвае праґраму ў вызначаным аздабленьні"
+msgstr "Паказвае праграму з вызначанай абалонкай"
 
 #. TRANSLATORS: don't translate keywords
 msgid ""
@@ -736,22 +762,22 @@ msgstr ""
 "--colors KEYWORD={FORE},{BACK},{ATTR}:KEYWORD2=...\n"
 "\n"
 "{FORE}, {BACK} і {ATTR} могуць быць апушчаны, будзе выкарыстоўвацца "
-"значэньне па змаўчаньні\n"
+"прадвызначанае значэнне \n"
 "\n"
 " Ключавыя словы:\n"
-"   Глябальныя:       errors, disabled, reverse, gauge, header\n"
+"   Глабальныя:       errors, disabled, reverse, gauge, header\n"
 "                 input, inputmark, inputunchanged, commandlinemark\n"
-"                 bbarhotkey, bbarbutton, statusbar\n"
+" bbarhotkey, bbarbutton, statusbar\n"
 "   Паказ файлаў: normal, selected, marked, markselect\n"
 "   Дыялогавыя вокны: dnormal, dfocus, dhotnormal, dhotfocus, errdhotnormal,\n"
 "                 errdhotfocus\n"
-"   Мэню:        menunormal, menuhot, menusel, menuhotsel, menuinactive\n"
-"   Усплываючыя мэню:  pmenunormal, pmenusel, pmenutitle\n"
+"   Меню:        menunormal, menuhot, menusel, menuhotsel, menuinactive\n"
+"   Усплываючыя меню:  pmenunormal, pmenusel, pmenutitle\n"
 "   Рэрактар:       editnormal, editbold, editmarked, editwhitespace,\n"
 "                 editlinestate, editbg, editframe, editframeactive\n"
 "                 editframedrag\n"
-"   Прагляд:       viewnormal,viewbold, viewunderline, viewselected\n"
-"   Дапамога:         helpnormal, helpitalic, helpbold, helplink, helpslink\n"
+"   Прагляд: viewnormal,viewbold, viewunderline, viewselected\n"
+"   Дапамога: helpnormal, helpitalic, helpbold, helplink, helpslink\n"
 
 #. TRANSLATORS: don't translate color names and attributes
 msgid ""
@@ -766,86 +792,100 @@ msgid ""
 "Attributes:\n"
 "   bold, italic, underline, reverse, blink; append more with '+'\n"
 msgstr ""
+"Стандартныя колеры:\n"
+" black, gray, red, brightred, green, brightgreen, brown,\n"
+" yellow, blue, brightblue, magenta, brightmagenta, cyan,\n"
+" brightcyan, lightgray, white\n"
+"\n"
+"Пашыраныя колеры, калі даступна 256:\n"
+" от color16 до color255 или от rgb000 до rgb555 и от gray0 до gray23\n"
+"\n"
+"Атрыбуты:\n"
+" bold, italic, underline, reverse, blink; некалькі атрыбутаў можна аб'яднаць "
+"сівалам \"+\"\n"
 
 msgid "Color options"
-msgstr "Можнасьці колераў"
+msgstr "Параметры колераў"
 
 msgid "[+lineno] file1[:lineno] [file2[:lineno]...]"
-msgstr ""
+msgstr "[+нумар_радка] файл1[:нумар_радка] [файл2[:нумар_радка]...]"
 
 msgid "file"
 msgstr "файл"
 
 msgid "file1 file2"
-msgstr ""
+msgstr "файл1 файл2"
 
 msgid "[this_dir] [other_panel_dir]"
-msgstr "[гэты_каталёґ] [каталёґ_іншае_панэлі]"
+msgstr "[гэты_каталог] [каталог_іншай_панэлі]"
 
 msgid ""
 "\n"
 "Please send any bug reports (including the output of 'mc -V')\n"
 "as tickets at www.midnight-commander.org\n"
 msgstr ""
+"\n"
+"Калі ласка, адпраўляйце справаздачы пра хібы (уключаючы вывад 'mc -V')\n"
+"як квіткі на www.midnight-commander.org\n"
 
 #, c-format
 msgid "GNU Midnight Commander %s\n"
-msgstr "GNU «Міднайт Камандэр», вэрсія %s\n"
+msgstr "GNU «Midnight Commander», версія %s\n"
 
 msgid "Main options"
-msgstr "Галоўныя можнасьці"
+msgstr "Асноўныя параметры"
 
 msgid "Terminal options"
-msgstr "Можнасьці тэрміналу"
+msgstr "Параметры тэрмінала"
 
 msgid "Arguments parse error!"
-msgstr "Не ўдалося разабраць довады!"
+msgstr "Памылка падчас разбору аргумента!"
 
 msgid "No arguments given to the viewer."
-msgstr "Праглядніку не перадалі довадаў."
+msgstr "Праграма для прагляду не атрымала аргументаў."
 
 msgid "Two files are required to envoke the diffviewer."
-msgstr ""
+msgstr "Для параўнання патрабуецца два файла."
 
 msgid "Background protocol error"
-msgstr "Даў хібу пратакол на тле"
+msgstr "Памылка пратаколу ў фоне"
 
 msgid "Reading failed"
-msgstr "Не ўдалося прачытаць"
+msgstr "Не атрымалася прачытаць"
 
 msgid "Background process error"
-msgstr "Даў хібу працэс на тле"
+msgstr "Памылка працэсу ў фоне"
 
 msgid "Unknown error in child"
-msgstr "Невядомая памылка ў даччыным працэсе"
+msgstr "Невядомая памылка працэсу нашчадка"
 
 msgid "Child died unexpectedly"
-msgstr "Даччыны працэс неспадзявана памёр"
+msgstr "Нашчадак нечакана завяршыўся"
 
 msgid ""
 "Background process sent us a request for more arguments\n"
 "than we can handle."
 msgstr ""
-"Працэс на тле запытваецца ў нас довадаў болей,\n"
-"як мы можам апрацаваць."
+"Фонавы працэс запытвае больш аргументаў,\n"
+"чым можна апрацаваць."
 
 msgid "&Dismiss"
-msgstr "&Адкінуць"
+msgstr "Адкінуць(&D)"
 
 msgid "Enter search string:"
-msgstr "Пазначце, што шукаць:"
+msgstr "Увядзіце што шукаць:"
 
 msgid "Cas&e sensitive"
-msgstr "Улічваць &памер літар"
+msgstr "Улічваць памер літар(&E)"
 
 msgid "&Backwards"
-msgstr "&Назад"
+msgstr "Назад(&B)"
 
 msgid "&Whole words"
-msgstr "&Слова цалкам"
+msgstr "Слова цалкам(&W)"
 
 msgid "&All charsets"
-msgstr "&Усе знаказборы"
+msgstr "Усе кадаванні(&A)"
 
 msgid "Search"
 msgstr "Шукаць"
@@ -858,7 +898,7 @@ msgid ""
 "Cannot create temporary diff file\n"
 "%s"
 msgstr ""
-"Немагчыма стварыць часовы файл адрозьненьняў\n"
+"Немагчыма стварыць часовы файл адрозненняў\n"
 "%s"
 
 #, c-format
@@ -867,7 +907,7 @@ msgid ""
 "%s%s\n"
 "%s"
 msgstr ""
-"Немагчыма стварыць файл адноўкі\n"
+"Немагчыма стварыць файл аднаўлення \n"
 "%s%s\n"
 "%s"
 
@@ -876,53 +916,53 @@ msgid ""
 "Cannot create temporary merge file\n"
 "%s"
 msgstr ""
-"Немагчыма стварыць часовы файл аб’яднаньня\n"
+"Немагчыма стварыць часовы файл аб’яднання\n"
 "%s"
 
 msgid "&Fastest (Assume large files)"
-msgstr "&Хуткі (для вялікіх файлаў)"
+msgstr "Хуткі (для вялікіх файлаў)(&F)"
 
 msgid "&Minimal (Find a smaller set of change)"
-msgstr "&Найменшы (шукаць найменшую колькасьць зьменаў)"
+msgstr "Найменшы (шукаць найменшую колькасць змен)(&M)"
 
 msgid "Diff algorithm"
-msgstr "Альґарытм параўнаньня"
+msgstr "Алгарытм параўнання"
 
 msgid "Diff extra options"
-msgstr "Дадатковыя можнасьці"
+msgstr "Дадатковыя параметры"
 
 msgid "&Ignore case"
-msgstr "Ня ўлічваць памер &літар"
+msgstr "Не ўлічваць памер літар(&I)"
 
 msgid "Ignore tab &expansion"
-msgstr "Ня ўлічваць з&рухі"
+msgstr "Не зважаць на табуляцыі(&E)"
 
 msgid "Ignore &space change"
-msgstr "Ня ўлічваць &зьмены ў прагалах"
+msgstr "Не ўлічваць змены прагалаў(&S)"
 
 msgid "Ignore all &whitespace"
-msgstr "Ня ўлічваць &прагалы"
+msgstr "Не ўлічваць прагалы(&W)"
 
 msgid "Strip &trailing carriage return"
-msgstr "Ня ўлічваць пераводы &радкоў"
+msgstr "Не ўлічваць пераводы радкоў(&T)"
 
 msgid "Diff Options"
-msgstr "Можнасьці параўнаньня"
+msgstr "Параметры параўнання"
 
 msgid "Edit"
-msgstr "Рэдаґаваць"
+msgstr "Рэдагаваць"
 
 msgid "Edit is disabled"
-msgstr "Рэдаґаваць забаронена"
+msgstr "Рэдагаваць забаронена"
 
 msgid "Goto line (left)"
-msgstr "Перайсьці да радку (леваруч)"
+msgstr "Перайсці да радка (злева )"
 
 msgid "Goto line (right)"
-msgstr "Перайсьці да радку (праваруч)"
+msgstr "Перайсці да радка (зправа )"
 
 msgid "Enter line:"
-msgstr "Нумар радку:"
+msgstr "Нумар радка:"
 
 msgid "ButtonBar|Help"
 msgstr "Даведка"
@@ -931,62 +971,62 @@ msgid "ButtonBar|Save"
 msgstr "Захаваць"
 
 msgid "ButtonBar|Edit"
-msgstr "Рэдаґаваць"
+msgstr "Рэдагаваць"
 
 msgid "ButtonBar|Merge"
-msgstr "Зьліць"
+msgstr "Аб'яднаць"
 
 msgid "ButtonBar|Search"
 msgstr "Шукаць"
 
 msgid "ButtonBar|Options"
-msgstr "Можнасьці"
+msgstr "Параметры"
 
 msgid "ButtonBar|Quit"
-msgstr "Выйсьці"
+msgstr "Выйсці"
 
 msgid "Quit"
-msgstr "Выйсьці"
+msgstr "Выйсці"
 
 msgid "File(s) was modified. Save with exit?"
-msgstr "Файл(ы) зьмянілі. Ці захаваць і выйсьці?"
+msgstr "Файл(ы) змянілі. Захаваць і выйсці?"
 
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file(s)?"
 msgstr ""
-"«Міднайт Камандэр» заканчвае працаваць.\n"
-"Ці захаваць зьменены(я) файл(ы)?"
+"«Midnight Commander» будзе выключаны .\n"
+"Захаваць зменены(я) файл(ы)?"
 
 msgid "Diff:"
-msgstr "Адрозьненьні:"
+msgstr "Адрозненні:"
 
 #, c-format
 msgid "\"%s\" is a directory"
-msgstr "«%s» — каталёґ"
+msgstr "«%s» — каталог"
 
 #, c-format
 msgid ""
 "Cannot stat \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма атрымаць уласьцівасьці «%s»\n"
+"Немагчыма атрымаць уласцівасці «%s»\n"
 "%s"
 
 msgid "Diff viewer: invalid mode"
-msgstr "Прагляднік адрозьненьняў запусьцілі ў хібным стане"
+msgstr "Праграма для прагляду адрозненняў была запушчана ў хібным стане"
 
 msgid "Two files are needed to compare"
-msgstr "Каб параўноўваць, трэба два файлы"
+msgstr "Для параўнання неабходна два файла"
 
 msgid "Choose syntax highlighting"
-msgstr "Абярыце, як падсьвечваць сынтакс"
+msgstr "Абярыце як падсвечваць сінтаксіс"
 
 msgid "< Auto >"
-msgstr "< Самарушна >"
+msgstr "< Аўтаматычна >"
 
 msgid "< Reload Current Syntax >"
-msgstr "< Перазаладаваць цяперашні сынтакс >"
+msgstr "< Перазагрузіць дзейны сінтаксіс >"
 
 #, c-format
 msgid "Loading: %3d%%"
@@ -997,14 +1037,14 @@ msgstr "Загрузка..."
 
 #, c-format
 msgid "Cannot open %s for reading"
-msgstr "Файл «%s» немагчыма адчыніць чытаць"
+msgstr "Немагчыма адкрыць «%s» для чытання"
 
 msgid "Load file"
-msgstr "Заладаваць файл"
+msgstr "Загрузіць файл"
 
 #, c-format
 msgid "Error reading %s"
-msgstr "Не ўдалося прачытаць «%s»"
+msgstr "Не атрымался прачытаць «%s»"
 
 #, c-format
 msgid "Cannot get size/permissions for %s"
@@ -1012,7 +1052,7 @@ msgstr "Немагчыма атрыма
 
 #, c-format
 msgid "\"%s\" is not a regular file"
-msgstr "«%s» ня ёсьць звычайным файлам"
+msgstr "«%s» не з’яўляецца звычайным файлам"
 
 #, c-format
 msgid ""
@@ -1020,15 +1060,15 @@ msgid ""
 "Open it anyway?"
 msgstr ""
 "Файл \"%s\" — завялікі.\n"
-"Адкрыць яго ў любым выпадку?"
+"Адкрыць яго?"
 
 #, c-format
 msgid "Error reading from pipe: %s"
-msgstr "Не ўдалося прачытаць з каналу: %s"
+msgstr "Памылка чытання з канала: %s"
 
 #, c-format
 msgid "Cannot open pipe for reading: %s"
-msgstr "Канал не ўдалося адчыніць чытаць: %s"
+msgstr "Не атрымалася адкрыць канал для чытання: %s"
 
 #, c-format
 msgid "Searching %s: %3d%%"
@@ -1036,85 +1076,85 @@ msgstr "Пошук %s: %3d%%"
 
 #, c-format
 msgid "Searching %s"
-msgstr "Шукаем «%s»"
+msgstr "Пошук  «%s»"
 
 msgid "File has hard-links. Detach before saving?"
-msgstr "Файл мае строгія спасылкі. Ці адлучыць іх перад тым, як захоўваць?"
+msgstr "У файла ёсць жорсткія  спасылкі. Адлучыць іх перад тым, як захаваць?"
 
 msgid "The file has been modified in the meantime. Save anyway?"
-msgstr "Іншая праґрама зьмяніла файл. Ці запісаць паўзьверх?"
+msgstr "Іншая праграма змяніла файл. Перазапісаць ?"
 
 #, c-format
 msgid "Error writing to pipe: %s"
-msgstr "Не ўдалося запісаць у канал: %s"
+msgstr "Не атрымалася запісаць у канал: %s"
 
 #, c-format
 msgid "Cannot open pipe for writing: %s"
-msgstr "Канал не ўдалося адчыніць запісваць: %s"
+msgstr "Канал не атрымалася адкрыць для запісу: %s"
 
 #, c-format
 msgid "Cannot open file for writing: %s"
-msgstr "Файл не ўдалося адчыніць запісваць: %s"
+msgstr "Файл не атрымалася адкрыць для запісу : %s"
 
 msgid "The file you are saving does not end with a newline."
-msgstr "Файл, які вы спрабуеце захаваць, не заканчваецца новым радком"
+msgstr "Файл, які вы спрабуеце захаваць, не заканчваецца новым радком."
 
 msgid "C&ontinue"
-msgstr "&Працягваць"
+msgstr "Працягнуць(&C)"
 
 msgid "&Do not change"
-msgstr "&Не зьмяняць"
+msgstr "Не змяняць(&D)"
 
 msgid "&Unix format (LF)"
-msgstr "Як у &UNIX (LF)"
+msgstr "Як у UNIX (LF)(&U)"
 
 msgid "&Windows/DOS format (CR LF)"
-msgstr "Як у &Windows/DOS (CR LF)"
+msgstr "Як у Windows/DOS (CR LF)(&W)"
 
 msgid "&Macintosh format (CR)"
-msgstr "Як у &Macintosh (CR)"
+msgstr "Як у Macintosh (CR)(&M)"
 
 msgid "Enter file name:"
-msgstr "Упішыце назву файла:"
+msgstr "Увядзіце назву файла:"
 
 msgid "Change line breaks to:"
-msgstr "Зьмяніць пераводы радкоў на:"
+msgstr "Змяніць пераводы радкоў на:"
 
 msgid "Save As"
 msgstr "Захаваць як"
 
 msgid "Block is large, you may not be able to undo this action"
-msgstr "Можа не атрымацца адрабіць дзеяньне: вялікі блёк"
+msgstr "Можа не атрымацца адрабіць дзеянне: вялікі блок"
 
 msgid "Collect completions"
-msgstr "Зьбіраць дапаўненьні"
+msgstr "Збіраць дапаўненні"
 
 msgid "&Quick save"
-msgstr "Захоўваць &хутка"
+msgstr "Захаваць хутка(&Q)"
 
 msgid "&Safe save"
-msgstr "Захоўваць &бясьпечна"
+msgstr "Захаваць бяспечна(&S)"
 
 msgid "&Do backups with following extension:"
-msgstr "Захоўваць &адноўкі з пашырэньнем:"
+msgstr "Захоўваць файлы аднаўлення ў фармаце(&D):"
 
 msgid "Check &POSIX new line"
-msgstr "Спраўджваць &перавод радку ў канцы файла"
+msgstr "Праверка пераводу радка ў канцы файла(&P)"
 
 msgid "Edit Save Mode"
-msgstr "Спосаб захоўваць"
+msgstr "Спосаб захавання"
 
 msgid "Save as"
 msgstr "Захаваць як"
 
 msgid "Cannot save: destination is not a regular file"
-msgstr "Немагчыма захаваць: прызначаны файл ня ёсьць звычайным"
+msgstr "Немагчыма захаваць: прызначаны файл не з’яўляецца звычайным"
 
 msgid "A file already exists with this name"
 msgstr "Файл з такою назваю ўжо існуе"
 
 msgid "&Overwrite"
-msgstr "&Запісаць паўзьверх"
+msgstr "Перазапісаць(&O)"
 
 msgid "Cannot save file"
 msgstr "Немагчыма захаваць файл"
@@ -1123,137 +1163,135 @@ msgid "Delete macro"
 msgstr "Выдаліць макрас"
 
 msgid "Press macro hotkey:"
-msgstr "Націсьніце выклічнік на макрас:"
+msgstr "Націсніце гарачую клавішу на макрас:"
 
 msgid "Macro not deleted"
-msgstr "Макрас ня выдалілі"
+msgstr "Макрас не выдалілі"
 
 msgid "Save macro"
 msgstr "Захаваць макрас"
 
 msgid "Press the macro's new hotkey:"
-msgstr "Націсьніце новы выклічнік на макрас:"
+msgstr "Націсніце новую гарачую клавішу на макрас:"
 
 msgid "Repeat last commands"
 msgstr "Паўтарыць апошнія загады"
 
 msgid "Repeat times:"
-msgstr "Колькасьць разоў:"
+msgstr "Колькасць разоў:"
 
 #, c-format
 msgid "Confirm save file: \"%s\""
-msgstr "Ці захаваць файл «%s»?"
+msgstr "Захаваць файл «%s»?"
 
 msgid "Save file"
 msgstr "Захаваць файл"
 
 msgid "&Save"
-msgstr "&Захаваць"
+msgstr "Захаваць(&S)"
 
 msgid "Load"
-msgstr "Заладаваць"
+msgstr "Загрузіць"
 
 msgid "Syntax file edit"
-msgstr "Рэдаґаваць файл сынтаксу"
+msgstr "Рэдагаваць файл сінтаксісу"
 
 msgid "Which syntax file you want to edit?"
-msgstr "Які файл сынтаксу рэдаґаваць?"
+msgstr "Які файл сінтаксісу рэдагаваць?"
 
 msgid "&User"
-msgstr "&Карыстальніцкі"
+msgstr "Карыстальніцкі(&U)"
 
 msgid "&System wide"
-msgstr "&Агульнасыстэмны"
+msgstr "Агульнасістэмны(&S)"
 
 msgid "Menu edit"
-msgstr "Рэдаґаваць мэню"
+msgstr "Рэдагаваць меню"
 
 msgid "Which menu file do you want to edit?"
-msgstr "Які файл мэню рэдаґаваць?"
+msgstr "Які файл меню рэдагаваць?"
 
 msgid "&Local"
-msgstr "&Мясцовы"
+msgstr "Лакальны(&L)"
 
 msgid "Replace"
 msgstr "Замяніць"
 
 #, c-format
 msgid "%ld replacements made"
-msgstr "Зрабілі заменаў: %ld"
+msgstr "Зроблена замен: %ld"
 
 msgid "[NoName]"
-msgstr "[Бяз назвы]"
+msgstr "[Без назвы]"
 
 #, c-format
 msgid ""
 "File %s was modified.\n"
 "Save before close?"
-msgstr ""
-"Файл «%s» зьмянілі.\n"
-"Ці захаваць перад тым, як зачыніць?"
+msgstr "Файл «%s» быў зменены? Захаваць перад тым, як закрыць ?"
 
 msgid "Close file"
-msgstr "Зачыніць файл"
+msgstr "Закрыць файл"
 
 #, c-format
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file %s?"
 msgstr ""
-"«Міднайт Камандэр» заканчвае працаваць.\n"
-"Ці захаваць зьменены файл «%s»?"
+"«Midnight Commander» закрываецца .\n"
+"Захаваць зменены файл «%s»?"
 
 msgid "This function is not implemented"
-msgstr "Гэтую магчымасьць не ўкаранілі"
+msgstr "Гэтая магчымасць яшчэ не рэалізавана"
 
 msgid "Copy to clipboard"
-msgstr "Капіяваць у кішэню"
+msgstr "Капіраваць у буфер абмену"
 
 msgid "Unable to save to file"
 msgstr "Немагчыма захаваць у файл"
 
 msgid "Cut to clipboard"
-msgstr "Выразаць у кішэню"
+msgstr "Выразаць у буфер абмену"
 
 msgid "Goto line"
-msgstr "Перайсьці да радку"
+msgstr "Перайсці да радка"
 
 msgid "Save block"
-msgstr "Захаваць блёк"
+msgstr "Захаваць блок"
 
 msgid "Insert file"
-msgstr "Устваіць файл"
+msgstr "Уставіць файл"
 
 msgid "Cannot insert file"
 msgstr "Немагчыма ўставіць файл"
 
 msgid "Sort block"
-msgstr "Упарадкаваць блёк"
+msgstr "Упарадкаваць блок"
 
 msgid "You must first highlight a block of text"
-msgstr "Спачатку трэба вылучыць блёк тэксту"
+msgstr "Спачатку патрэбна абраць блок тэксту"
 
 msgid "Run sort"
 msgstr "Упарадкаваць"
 
 msgid "Enter sort options (see manpage) separated by whitespace:"
-msgstr "Пазначце можнасьці (гл. «man sort»); аддзяляйце іх прагаламі:"
+msgstr "Увядзіце параметры парадкавання (глядзіце man), падзеленыя прагаламі:"
 
 msgid "Sort"
 msgstr "Упарадкаваць"
 
 msgid "Cannot execute sort command"
-msgstr "Немагчыма выканаць загад «sort»"
+msgstr "Немагчыма выканаць загад «упарадкаваць»"
 
 #, c-format
 msgid "Sort returned non-zero: %s"
-msgstr "Упарадкаваньне вярнула ненулявы код: %s"
+msgstr "Упарадкаванне вярнула ненулявы код: %s"
 
 msgid "Paste output of external command"
 msgstr "Уставіць вывад вонкавага загаду"
 
 msgid "Enter shell command(s):"
-msgstr "Упішыце загад(ы) абалонкі:"
+msgstr "Увядзіце загад(ы) абалонкі:"
 
 msgid "External command"
 msgstr "Вонкавы загад"
@@ -1271,7 +1309,7 @@ msgid "Subject"
 msgstr "Тэма"
 
 msgid "Copies to"
-msgstr "Каму даслаць копіі"
+msgstr "Каму адправіць копіі"
 
 msgid "Mail"
 msgstr "Пошта"
@@ -1280,38 +1318,38 @@ msgid "Insert literal"
 msgstr "Уставіць літарал"
 
 msgid "Press any key:"
-msgstr "Націсьніце клявішу:"
+msgstr "Націсніце клавішу:"
 
 msgid ""
 "Current text was modified without a file save.\n"
 "Continue discards these changes"
 msgstr ""
-"Тэкст зьмяніўся, але файл не захавалі.\n"
-"Калі працягваць, зьмены страцяцца"
+"Тэкст змяніўся, але файл не быў захаваны .\n"
+"Калі працягнуць, змены страцяцца"
 
 msgid "In se&lection"
-msgstr "У &выбраным"
+msgstr "У абраным(&L)"
 
 msgid "&Find all"
-msgstr "&Знайсьці ўсё"
+msgstr "Знайсці ўсё(&F)"
 
 msgid "Enter replacement string:"
-msgstr "Замяняць на радок:"
+msgstr "Замяніць на радок:"
 
 msgid "Replace with:"
 msgstr "Замяніць на:"
 
 msgid "&Replace"
-msgstr "За&мяніць"
+msgstr "Замяніць(&R)"
 
 msgid "A&ll"
-msgstr "&Усё"
+msgstr "Усё(&A)"
 
 msgid "&Skip"
-msgstr "&Прапусьціць"
+msgstr "Прамінуць(&S)"
 
 msgid "Confirm replace"
-msgstr "Ці замяніць?"
+msgstr "Замяніць?"
 
 msgid "Cancel"
 msgstr "Скасаваць"
@@ -1320,239 +1358,239 @@ msgid ""
 "Current text was modified without a file save.\n"
 "Continue discards these changes."
 msgstr ""
-"Тэкст зьмяніўся, але файл не захавалі.\n"
-"Калі працягваць, зьмены страцяцца."
+"Тэкст змяніўся, але файл не захавалі.\n"
+"Калі працягнуць, змены страцяцца."
 
 msgid "NoName"
-msgstr "Бяз назвы"
+msgstr "Без назвы"
 
 msgid "&Open file..."
-msgstr "&Адчыніць файл…"
+msgstr "Адкрыць файл(&O)…"
 
 msgid "&New"
-msgstr "&Новы"
+msgstr "Новы(&N)"
 
 msgid "&Close"
-msgstr "&Зачыніць"
+msgstr "Закрыць(&C)"
 
 msgid "Save &as..."
-msgstr "Захаваць &як…"
+msgstr "Захаваць як(&A)…"
 
 msgid "&Insert file..."
-msgstr "&Уставіць файл…"
+msgstr "Уставіць файл(&I)…"
 
 msgid "Cop&y to file..."
-msgstr "&Капіяваць у файл…"
+msgstr "Капіраваць у файл(&Y)…"
 
 msgid "&User menu..."
-msgstr "&Мэню карыстальніка…"
+msgstr "Меню карыстальніка(&U)…"
 
 msgid "A&bout..."
-msgstr "Пра &праґраму…"
+msgstr "Пра праграму(&B)…"
 
 msgid "&Quit"
-msgstr "&Выйсьці"
+msgstr "Выйсці(&Q)"
 
 msgid "&Undo"
-msgstr "&Адрабіць"
+msgstr "Адрабіць(&U)"
 
 msgid "&Redo"
-msgstr "&Узнавіць"
+msgstr "Паўтарыць(&R)"
 
 msgid "&Toggle ins/overw"
-msgstr "&Устаўляць або замяняць"
+msgstr "Уставіць або перазапісаць(&T)"
 
 msgid "To&ggle mark"
-msgstr "&Пазначаць або не"
+msgstr "Пазначаць або не(&G)"
 
 msgid "&Mark columns"
-msgstr "&Пазначыць слупкі"
+msgstr "Пазначыць слупкі(&M)"
 
 msgid "Mark &all"
-msgstr "Пазначыць &усё"
+msgstr "Пазначыць усё(&A)"
 
 msgid "Unmar&k"
-msgstr "Зь&няць пазначанае"
+msgstr "Зняць(&K)"
 
 msgid "Cop&y"
-msgstr "&Капіяваць"
+msgstr "Капіраваць(&Y)"
 
 msgid "Mo&ve"
-msgstr "&Перамясьціць"
+msgstr "Перамясціць(&V)"
 
 msgid "&Delete"
-msgstr "&Выдаліць"
+msgstr "Выдаліць(&D)"
 
 msgid "Co&py to clipfile"
-msgstr "Ка&піяваць у файл кішэні"
+msgstr "Капіраваць у буфер абмену(&P)"
 
 msgid "&Cut to clipfile"
-msgstr "Вы&разаць у файл кішэні"
+msgstr "Выразаць у буфер абмену(&C)"
 
 msgid "Pa&ste from clipfile"
-msgstr "Ус&тавіць з файла кішэні"
+msgstr "Уставіць з буфера абмену(&S)"
 
 msgid "&Beginning"
-msgstr "&Пачатак файла"
+msgstr "Пачатак файла(&B)"
 
 msgid "&End"
-msgstr "&Канец файла"
+msgstr "Канец файла(&E)"
 
 msgid "&Search..."
-msgstr "&Шукаць…"
+msgstr "Шукаць(&S)"
 
 msgid "Search &again"
-msgstr "&Працягваць шукаць"
+msgstr "Працягваць шукаць(&A)"
 
 msgid "&Replace..."
-msgstr "&Замяніць…"
+msgstr "Замяніць(&R)…"
 
 msgid "&Toggle bookmark"
-msgstr "Паставіць або зьняць &закладку"
+msgstr "Паставіць або зняць закладку(&T)"
 
 msgid "&Next bookmark"
-msgstr "&Наступная закладка"
+msgstr "Наступная закладка(&N)"
 
 msgid "&Prev bookmark"
-msgstr "&Папярэдняя закладка"
+msgstr "Папярэдняя закладка(&P)"
 
 msgid "&Flush bookmarks"
-msgstr "&Ачысьціць закладкі"
+msgstr "Ачысціць закладкі(&F)"
 
 msgid "&Go to line..."
-msgstr "Перайсьці да &радку…"
+msgstr "Перайсці да радка(&G)…"
 
 msgid "&Toggle line state"
-msgstr "Паказаць (схаваць) &нумары радкоў…"
+msgstr "Паказаць (схаваць) нумары радкоў(&T)"
 
 msgid "Go to matching &bracket"
-msgstr "Перайсьці да парнае &дужкі"
+msgstr "Перайсці да парнай дужкі(&B)"
 
 msgid "Toggle s&yntax highlighting"
-msgstr "Падсьвечваць або не &сынтакс"
+msgstr "Падсвечваць або не сінтаксіс(&Y)"
 
 msgid "&Find declaration"
-msgstr "Знайсьці &абвешчаньне"
+msgstr "Шукаць вызначэнне(&F)"
 
 msgid "Back from &declaration"
-msgstr "Вярнуцца ад а&бвешчаньня"
+msgstr "Вярнуцца да вызначэння(&D)"
 
 msgid "For&ward to declaration"
-msgstr "Наперад да аб&вешчаньня"
+msgstr "Наперад да вызначэння(&W)"
 
 msgid "Encod&ing..."
-msgstr "&Кадоўка…"
+msgstr "Кадаванне(&I)…"
 
 msgid "&Refresh screen"
-msgstr "&Абнавіць экран"
+msgstr "Абнавіць экран(&R)"
 
 msgid "&Start/Stop record macro"
-msgstr "&Пачаць (спыніць) запісваць макрас"
+msgstr "Пачаць (спыніць) запісваць макрас(&S)"
 
 msgid "Delete macr&o..."
-msgstr "Выдаліць &макрас…"
+msgstr "Выдаліць макрас(&O)…"
 
 msgid "Record/Repeat &actions"
-msgstr "Запісаць (паўтары) &дзеяньні"
+msgstr "Запісаць (паўтарыць) дзеянні(&A)"
 
 msgid "S&pell check"
-msgstr "Спраўдзіць &правапіс"
+msgstr "Праверка правапісу(&P)"
 
 msgid "C&heck word"
-msgstr "Спраўдзіць &слова"
+msgstr "Праверыць слова(&H)"
 
 msgid "Change spelling &language..."
-msgstr "Зьмяніць &мову правапісу…"
+msgstr "Змяніць мову правапісу(&L)…"
 
 msgid "&Mail..."
-msgstr "&Пошта…"
+msgstr "Пошта(&M)…"
 
 msgid "Insert &literal..."
-msgstr "Уставіць &літарал"
+msgstr "Уставіць літарал(&L)..."
 
 msgid "Insert &date/time"
-msgstr "Уставіць &дату (час)"
+msgstr "Уставіць дату/(час)(&D)"
 
 msgid "&Format paragraph"
-msgstr "&Падзяліць на абзацы"
+msgstr "Падзяліць на абзацы(&F)"
 
 msgid "&Sort..."
-msgstr "&Упарадкаваць…"
+msgstr "Упарадкаваць(&S)…"
 
 msgid "&Paste output of..."
-msgstr "Уставіць &вывад загаду…"
+msgstr "Уставіць вывад загаду(&P)…"
 
 msgid "&External formatter"
-msgstr "Вонкавы &аздабляльнік"
+msgstr "Фарматаваць(&E)"
 
 msgid "&Move"
-msgstr "&Перамясьціць"
+msgstr "Перамясціць(&M)"
 
 msgid "&Resize"
-msgstr "&Зьмяніць памер"
+msgstr "Змяніць памер(&R)"
 
 msgid "&Toggle fullscreen"
-msgstr "На ўвесь &экран"
+msgstr "На ўвесь экран(&T)"
 
 msgid "&Next"
-msgstr "&Наступнае"
+msgstr "Наступнае(&N)"
 
 msgid "&Previous"
-msgstr "&Папярэдняе"
+msgstr "Папярэдняе(&P)"
 
 msgid "&List..."
-msgstr "&Сьпіс вокнаў…"
+msgstr "Спіс(&L)…"
 
 msgid "&General..."
-msgstr "&Агульныя…"
+msgstr "Асноўныя(&G)…"
 
 msgid "Save &mode..."
-msgstr "Спосаб &захоўваць…"
+msgstr "Спосаб захавання(&M) …"
 
 msgid "Learn &keys..."
-msgstr "В&ывучыць клявішы…"
+msgstr "Вывучыць клавішы(&K)…"
 
 msgid "Syntax &highlighting..."
-msgstr "Падсьвечваць &сынтакс…"
+msgstr "Падсвечваць сінтаксіс(&H)…"
 
 msgid "S&yntax file"
-msgstr "Файл с&ынтаксу"
+msgstr "Файл сінтаксісу(&Y)"
 
 msgid "&Menu file"
-msgstr "Файл &мэню"
+msgstr "Файл меню(&M)"
 
 msgid "&Save setup"
-msgstr "&Захаваць налады"
+msgstr "Захаваць налады(&S)"
 
 msgid "&File"
-msgstr "&Файл"
+msgstr "Файл(&F)"
 
 msgid "&Edit"
-msgstr "&Рэдаґаваць"
+msgstr "Рэдагаваць(&E)"
 
 msgid "&Search"
-msgstr "&Шукаць"
+msgstr "Шукаць(&S)"
 
 msgid "&Command"
-msgstr "&Загад"
+msgstr "Загад(&C)"
 
 msgid "For&mat"
-msgstr "Р&азьметка"
+msgstr "Фарматаванне(&M)"
 
 msgid "&Window"
-msgstr "&Вакно"
+msgstr "Акно(&W)"
 
 msgid "&Options"
-msgstr "&Налады"
+msgstr "Параметры(&O)"
 
 msgid "&None"
-msgstr ""
+msgstr "Нічога(&N)"
 
 msgid "&Dynamic paragraphing"
-msgstr ""
+msgstr "Дынамічна(&D)"
 
 msgid "Type &writer wrap"
-msgstr ""
+msgstr "Аўтаматычны перанос(&W)"
 
 msgid "Wrap mode"
 msgstr "Спосаб пераносіць радкі"
@@ -1561,55 +1599,55 @@ msgid "Tabulation"
 msgstr "Табуляцыя"
 
 msgid "&Fake half tabs"
-msgstr "Падрабляць &няпоўныя зрухі"
+msgstr "Сімуляваць няпоўную табуляцыю(&F)"
 
 msgid "&Backspace through tabs"
-msgstr "Сь&ціраць праз зрухі"
+msgstr "Backspace мінае табуляцыі(&B)"
 
 msgid "Fill tabs with &spaces"
-msgstr "Запаўняць зрухі пра&галамі"
+msgstr "Запаўняць табуляцыю прагаламі(&S)"
 
 msgid "Tab spacing:"
-msgstr "Адлегласьць зруху:"
+msgstr "Крок табуляцыі:"
 
 msgid "Other options"
-msgstr "Іншыя налады"
+msgstr "Іншыя параметры"
 
 msgid "&Return does autoindent"
-msgstr "«Увод» паўтарае а&дступ"
+msgstr "Аўтаводступ уводам(&R)"
 
 msgid "Confir&m before saving"
-msgstr "&Пытацца, ці запісваць файл"
+msgstr "Пытацца падчас захавання(&M)"
 
 msgid "Save file &position"
-msgstr "Захоўваць &месца рэдаґаваньня"
+msgstr "Захоўваць месца рэдагавання(&P)"
 
 msgid "&Visible trailing spaces"
-msgstr ""
+msgstr "Адлюстроўваць прагалы(&V)"
 
 msgid "Visible &tabs"
-msgstr ""
+msgstr "Адлюстроўваць табуляцыі(&T)"
 
 msgid "Synta&x highlighting"
-msgstr "Падсьвечваць &сынтакс"
+msgstr "Падсвечваць сінтаксіс(&X)"
 
 msgid "C&ursor after inserted block"
-msgstr ""
+msgstr "Курсор пасля ўстаўленага блока(&U)"
 
 msgid "Pers&istent selection"
-msgstr "&Трымаць выбранае"
+msgstr "Сталыя блокі(&I)"
 
 msgid "Cursor be&yond end of line"
-msgstr ""
+msgstr "Курсор па-за межамі радка(&Y)"
 
 msgid "&Group undo"
-msgstr "&Адрабляць ґрупамі"
+msgstr "Адрабляць групамі(&G)"
 
 msgid "Word wrap line length:"
-msgstr "Даўжыня радку:"
+msgstr "Даўжыня радка:"
 
 msgid "Editor options"
-msgstr "Налады рэдактара"
+msgstr "Параметры рэдактара"
 
 msgid ""
 "A user friendly text editor\n"
@@ -1618,110 +1656,110 @@ msgstr ""
 "Зручны тэкставы рэдактар,\n"
 "напісаны для Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr ""
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr "Copyright (C) 1996-2018 the Free Software Foundation"
 
 msgid "About"
-msgstr "Пра праґраму"
+msgstr "Пра праграму"
 
 msgid "Open files"
-msgstr "Адчыненыя файлы"
+msgstr "Адкрытыя файлы"
 
 msgid "Edit: "
-msgstr "Рэдаґаваць: "
+msgstr "Рэдагаваць: "
 
 msgid "ButtonBar|Mark"
-msgstr "Выбраць"
+msgstr "Пазначыць"
 
 msgid "ButtonBar|Replac"
 msgstr "Замяніць"
 
 msgid "ButtonBar|Copy"
-msgstr "Капіяваць"
+msgstr "Капіраваць"
 
 msgid "ButtonBar|Move"
-msgstr "Перамясьціць"
+msgstr "Перамясціць"
 
 msgid "ButtonBar|Delete"
 msgstr "Выдаліць"
 
 msgid "ButtonBar|PullDn"
-msgstr "МэнюМК"
+msgstr "Меню"
 
 msgid "Breton"
-msgstr "брэтонская"
+msgstr "Брэтонская"
 
 msgid "Czech"
-msgstr "чэская"
+msgstr "Чэшская"
 
 msgid "Welsh"
-msgstr "уэльская"
+msgstr "Валійская"
 
 msgid "Danish"
-msgstr "дацкая"
+msgstr "Дацкая"
 
 msgid "German"
-msgstr "нямецкая"
+msgstr "Нямецкая"
 
 msgid "Greek"
-msgstr "грэцкая"
+msgstr "Грэчаская"
 
 msgid "English"
-msgstr "ангельская"
+msgstr "Англійская"
 
 msgid "British English"
-msgstr ""
+msgstr "Англійская (Вялікабрытанія)"
 
 msgid "Canadian English"
-msgstr ""
+msgstr "Англійская (Канада)"
 
 msgid "American English"
-msgstr ""
+msgstr "Англійская (ЗША)"
 
 msgid "Esperanto"
-msgstr "эспэранта"
+msgstr "Эсперанта"
 
 msgid "Spanish"
-msgstr "іспанская"
+msgstr "Іспанская"
 
 msgid "Faroese"
-msgstr "фарэрская"
+msgstr "Фарэрская"
 
 msgid "French"
-msgstr "французкая"
+msgstr "Французская"
 
 msgid "Italian"
-msgstr ""
+msgstr "Італьянская"
 
 msgid "Dutch"
-msgstr "галяндзкая"
+msgstr "Галандская"
 
 msgid "Norwegian"
-msgstr "нарвэская"
+msgstr "Нарвежская"
 
 msgid "Polish"
-msgstr "польская"
+msgstr "Польская"
 
 msgid "Portuguese"
-msgstr "партугальская"
+msgstr "Партугальская"
 
 msgid "Romanian"
-msgstr "румынская"
+msgstr "Румынская"
 
 msgid "Russian"
-msgstr "расейская"
+msgstr "Расійская"
 
 msgid "Slovak"
-msgstr "славацкая"
+msgstr "Славацкая"
 
 msgid "Swedish"
-msgstr "швэдзкая"
+msgstr "Шведская"
 
 msgid "Ukrainian"
-msgstr "украінская"
+msgstr "Украінская"
 
 msgid "&Add word"
-msgstr "&Дадаць слова"
+msgstr "Дадаць слова(&A)"
 
 msgid "Language"
 msgstr "Мова"
@@ -1730,7 +1768,7 @@ msgid "Misspelled"
 msgstr "Памылковае слова"
 
 msgid "Check word"
-msgstr "Спраўдзіць слова"
+msgstr "Праверыць слова"
 
 msgid "Suggest"
 msgstr "Прапановы"
@@ -1739,14 +1777,14 @@ msgid "Select language"
 msgstr "Абраць мову"
 
 msgid "Load syntax file"
-msgstr "Заладаваць файл сынтаксу"
+msgstr "Загрузіць файл сінтаксісу"
 
 #, c-format
 msgid ""
 "Cannot open file %s\n"
 "%s"
 msgstr ""
-"Немагчыма адчыніць файл «%s»\n"
+"Немагчыма адкрыць файл «%s»\n"
 "%s"
 
 #, c-format
@@ -1759,35 +1797,35 @@ msgid ""
 "deleted your working directory, or given yourself\n"
 "extra access permissions with the \"su\" command?"
 msgstr ""
-"«Камандэр» ня можа перайсьці ў каталёґ, які\n"
-"патрабуе ўбудаваная абалонка. Можа вы выдалілі\n"
-"працоўны каталёґ або надалі сабе дадатковыя\n"
-"правы доступу загадам «su»?"
+"MC не можа перайсці ў каталог, які патрабуе\n"
+"ўбудаваная абалонка. Можа, вы\n"
+"выдалілі працоўны каталог або далі сабе дадатковыя\n"
+"прывілеі загадам su?"
 
 #, c-format
 msgid "Cannot fetch a local copy of %s"
-msgstr "Немагчыма атрымаць лякальны асобнік «%s»"
+msgstr "Немагчыма атрымаць лакальную копію «%s»"
 
 msgid "The shell is already running a command"
 msgstr "Абалонка ўжо выконвае загад"
 
 msgid "Type 'exit' to return to the Midnight Commander"
-msgstr "Надрукуйце «exit», каб вярнуцца ў Midnight Commander"
+msgstr "Увядзіце «exit», каб вярнуцца ў Midnight Commander"
 
 msgid "Set &all"
-msgstr "Усталяваць ус&е"
+msgstr "Пазначыць усе(&A)"
 
 msgid "S&kip"
-msgstr "&Прапусьціць"
+msgstr "Прамінуць(&K)"
 
 msgid "&Set"
-msgstr "&Зрабіць"
+msgstr "Задаць(&S)"
 
 msgid "owner"
-msgstr "улад-к"
+msgstr "уладальнік"
 
 msgid "group"
-msgstr "суполка"
+msgstr "група"
 
 msgid "other"
 msgstr "іншыя"
@@ -1803,15 +1841,24 @@ msgid ""
 "Cannot chmod \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма зьмяніць дазволы «%s»\n"
+"Немагчыма змяніць дазволы «%s»\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "Не зважаць(&I)"
+
+msgid "Ignore &all"
+msgstr "Не зважаць ні нашто(&A)"
+
+msgid "&Retry"
+msgstr "Паўтарыць(&R)"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма зьмяніць уладальніка «%s»\n"
+"Немагчыма змяніць уладальніка «%s»\n"
 "%s"
 
 msgid "< Default >"
@@ -1821,163 +1868,166 @@ msgid "Skins"
 msgstr "Абалонкі"
 
 msgid "Other 8 bit"
-msgstr "Іншая 8-бітная"
+msgstr "Іншае 8-бітная"
 
 msgid "Running"
 msgstr "Выконваецца"
 
 msgid "Stopped"
-msgstr "Спынілася"
+msgstr "Спынена"
 
 msgid "&Never"
-msgstr "&Ніколі"
+msgstr "Ніколі(&N)"
 
 msgid "On dum&b terminals"
-msgstr "На &павольных тэрміналах"
+msgstr "На павольных тэрміналах(&B)"
 
 msgid "Alwa&ys"
-msgstr "&Заўжды"
+msgstr "Заўжды(&Y)"
 
 msgid "File operations"
-msgstr "Файлавыя апэрацыі"
+msgstr "Файлавыя аперацыі"
 
 msgid "&Verbose operation"
-msgstr "Падрабязнасьці &дзеяньняў"
+msgstr "Падрабязнасці дзеянняў(&V)"
 
 msgid "Compute tota&ls"
-msgstr "Падлічваць &агульны памер"
+msgstr "Падлічваць агульны памер(&L)"
 
 msgid "Classic pro&gressbar"
-msgstr "Звычайная сту&жка поступу"
+msgstr "Класічны індыкатар прагрэсу(&G)"
 
 msgid "Mkdi&r autoname"
-msgstr "Прыдумляць назву &каталёґу"
+msgstr "Аўтаматычна даваць назву каталогу(&R)"
 
 msgid "&Preallocate space"
-msgstr ""
+msgstr "Загадзя зарэзерваваць прастору(&P)"
 
 msgid "Esc key mode"
-msgstr "Націскаць на «Esc»"
+msgstr "Рэжым клавішы «Esc»"
 
 msgid "S&ingle press"
-msgstr "&Адзін націск"
+msgstr "Адзін націск(&I)"
 
 msgid "Timeout:"
 msgstr "Затрымка:"
 
 msgid "Pause after run"
-msgstr "Прыпыняць, калі скончылі"
+msgstr "Прыпыніць пасля запуску"
 
 msgid "Use internal edi&t"
-msgstr "Убудаваны &рэдактар"
+msgstr "Убудаваны рэдактар(&T)"
 
 msgid "Use internal vie&w"
-msgstr "Убудаваны пра&гляднік"
+msgstr "Убудаваная праграма прагляду(&W)"
 
 msgid "A&sk new file name"
-msgstr ""
+msgstr "Пытацца пра новую назву файла(&S)"
 
 msgid "Auto m&enus"
-msgstr "Пачынаць з мэню &карыстальніка"
+msgstr "Пачынаць з меню карыстальніка(&E)"
 
 msgid "&Drop down menus"
-msgstr "&Мэню выпадае адразу"
+msgstr "Меню выпадае адразу(&D)"
 
 msgid "S&hell patterns"
-msgstr ""
+msgstr "Шаблоны абалонкі(&H)"
 
 msgid "Co&mplete: show all"
-msgstr "&Дапаўняць: паказваць усё"
+msgstr "Завершана: паказваць усё(&M)"
 
 msgid "Rotating d&ash"
-msgstr "Круціць &рыску поступу"
+msgstr "Рухаючыся індыкатар(&A)"
 
 msgid "Cd follows lin&ks"
-msgstr "Зьмяняць каталёґ па &спасылцы"
+msgstr "Змена каталога па спасылкам(&K)"
 
 msgid "Sa&fe delete"
-msgstr "Выдаляць &бясьпечна"
+msgstr "Выдаляць бяспечна(&F)"
+
+msgid "Safe overwrite"
+msgstr "Бяспечны перазапіс"
 
 msgid "A&uto save setup"
-msgstr "Самарушна захоўваць &налады"
+msgstr "Аўтаматычна захоўваць налады(&U)"
 
 msgid "Configure options"
-msgstr "Наставіць налады"
+msgstr "Наладзіць параметры"
 
 msgid "Skin:"
 msgstr "Абалонка:"
 
 msgid "Appearance"
-msgstr "Зьнешнасьць"
+msgstr "Выгляд"
 
 msgid "Case &insensitive"
-msgstr "&Ня ўлічваць памер"
+msgstr "Не ўлічваць памер(&I)"
 
 msgid "Use panel sort mo&de"
-msgstr "Як у наладах &панэлі"
+msgstr "Як у наладах панэлі(&D)"
 
 msgid "Show mi&ni-status"
-msgstr "Паказваць &радок стану"
+msgstr "Паказваць радок стану(&N)"
 
 msgid "Use SI si&ze units"
-msgstr "Памер у адзінках &СІ"
+msgstr "Памер у адзінках СІ(&Z)"
 
 msgid "Mi&x all files"
-msgstr "Зь&мешваць файлы і каталёґі"
+msgstr "Змешваць файлы і каталогі(&X)"
 
 msgid "Show &backup files"
-msgstr "Паказваць файлы &адноўкі"
+msgstr "Паказваць файлы аднаўлення(&B)"
 
 msgid "Show &hidden files"
-msgstr "Паказваць с&хаваныя файлы"
+msgstr "Паказваць схаваныя файлы(&H)"
 
 msgid "&Fast dir reload"
-msgstr "&Хутка заладоўваць каталёґ"
+msgstr "Хутка перазагружаць каталогі(&F)"
 
 msgid "Ma&rk moves down"
-msgstr "Пазнака перасоўвае &ўказальнік"
+msgstr "Пазначэнне перамяшчае курсор(&R)"
 
 msgid "Re&verse files only"
-msgstr "Перастаўляць толькі &файлы"
+msgstr "Інвертаваць толькі файлы(&V)"
 
 msgid "Simple s&wap"
-msgstr "Перастаўляць як &звычайна"
+msgstr "Простае замяшчэнне(&W)"
 
 msgid "A&uto save panels setup"
-msgstr "Захоўваць &налады панэляў"
+msgstr "Аўтаматычна захоўваць налады панэляў(&U)"
 
 msgid "Navigation"
-msgstr "Рух"
+msgstr "Навігацыя"
 
 msgid "L&ynx-like motion"
-msgstr "Р&ухацца як у «Lynx»"
+msgstr "Рухацца як у «Lynx»(&Y)"
 
 msgid "Pa&ge scrolling"
-msgstr "Гартаць &бачыны"
+msgstr "Пракрутка старонак(&G)"
 
 msgid "Center &scrolling"
-msgstr ""
+msgstr "Адцэнтраваная пракрутка(&S)"
 
 msgid "&Mouse page scrolling"
-msgstr "Гартаць бачыны &мышшу"
+msgstr "Гартаць старонкі мышшу(&M)"
 
 msgid "File highlight"
-msgstr "Падсьвечваць"
+msgstr "Падсвятленне файлаў"
 
 msgid "File &types"
-msgstr "&Віды файлаў"
+msgstr "Тыпы файлаў(&T)"
 
 msgid "&Permissions"
-msgstr "&Дазволы"
+msgstr "Дазволы(&P)"
 
 msgid "Quick search"
-msgstr "Хутка шукаць"
+msgstr "Хуткі пошук"
 
 msgid "Panel options"
-msgstr "Налады панэляў"
+msgstr "Параметры панэляў"
 
 msgid "Information"
-msgstr "Зьвесткі"
+msgstr "Інфармацыя"
 
 msgid ""
 "Using the fast reload option may not reflect the exact\n"
@@ -1985,134 +2035,134 @@ msgid ""
 "manual reload of the directory. See the man page for\n"
 "the details."
 msgstr ""
-"Калі заладоўваць каталёґі хутка, можа не адлюстроўвацца цяперашняе "
-"зьмесьціва каталёґа. У такім разе давядзецца\n"
-"самастойна заладаваць каталёґ. Падрабязьней — у правадніцтве\n"
-"праґрамы («man mc»)."
+"Выкарыстанне хуткай перазагрузкі можа не адлюстраваць\n"
+"бягучае змесціва каталога. У такім разе спатрэбіцца ўласнаручна\n"
+"перезагрузіць каталог. Для дадатковай інфармацыі глядзіце\n"
+"дапаможнік (man)."
 
 msgid "&Full file list"
-msgstr "&Звычайны сьпіс"
+msgstr "Звычайны спіс(&F)"
 
 msgid "&Brief file list:"
-msgstr ""
+msgstr "Скарочаны спіс(&B):"
 
 msgid "&Long file list"
-msgstr "&Шырокі сьпіс"
+msgstr "Шырокі спіс(&L)"
 
 msgid "&User defined:"
-msgstr "&Абранае карыстальнікам:"
+msgstr "Абранае карыстальнікам(&U):"
 
 msgid "columns"
-msgstr ""
+msgstr "слупкі"
 
 msgid "User &mini status"
-msgstr "Адмысловы &радок стану панэлі:"
+msgstr "Адвольны радок стану панэлі(&M)"
 
 msgid "Listing format"
-msgstr ""
+msgstr "Фармат спіса"
 
 msgid "Executable &first"
-msgstr "Спачатку &выканальныя"
+msgstr "Спачатку запускальныя(&F)"
 
 msgid "&Reverse"
-msgstr "&Адваротны парадак"
+msgstr "Адваротны парадак(&R)"
 
 msgid "Sort order"
-msgstr "Упарадкоўваць"
+msgstr "Парадак сартавання"
 
 #. TRANSLATORS: no need to translate 'Confirmation', it's just a context prefix
 msgid "Confirmation|&Delete"
-msgstr "Вы&даляем"
+msgstr "Выдаленне(&D)"
 
 msgid "Confirmation|O&verwrite"
-msgstr "&Перазапісваем"
+msgstr "Перазапіс(&V)"
 
 msgid "Confirmation|&Execute"
-msgstr "Вы&конваем"
+msgstr "Запуск(&E)"
 
 msgid "Confirmation|E&xit"
-msgstr "&Выходзім"
+msgstr "Выхад(&X)"
 
 msgid "Confirmation|Di&rectory hotlist delete"
-msgstr "Выдаляем &сьпіс каталёґаў"
+msgstr "Выдаленне спіса каталогаў(&R)"
 
 msgid "Confirmation|&History cleanup"
-msgstr "Ачышчаем &гісторыю"
+msgstr "Ачышчэнне гісторыі(&H)"
 
 msgid "Confirmation"
-msgstr "Пацьвярджаць, калі"
+msgstr "Пацверджанне"
 
 msgid "&UTF-8 output"
-msgstr ""
+msgstr "вывад &UTF-8"
 
 msgid "&Full 8 bits output"
-msgstr ""
+msgstr "8-бітны вывад(&F)"
 
 msgid "&ISO 8859-1"
-msgstr ""
+msgstr "ISO 8859-1(&I)"
 
 msgid "7 &bits"
-msgstr ""
+msgstr "7 біт(&B)"
 
 msgid "F&ull 8 bits input"
-msgstr "Поўны &8-бітны ўвод"
+msgstr "Поўны 8-бітны ўвод(&U)"
 
 msgid "Display bits"
-msgstr "Кадоўка адлюстраваньня"
+msgstr "Кадаванне адлюстравання"
 
 msgid "Input / display codepage:"
-msgstr "Кадоўка ўводу (адлюстраваньня):"
+msgstr "Кадаванне ўводу/вываду:"
 
 msgid "Directory tree"
-msgstr "Дрэва каталёґаў"
+msgstr "Дрэва каталогаў"
 
 msgid "Timeout for freeing VFSs (sec):"
-msgstr ""
+msgstr "Таймаўт вызвалення  VFS (sec):"
 
 msgid "FTP anonymous password:"
-msgstr ""
+msgstr "Пароль ананімнага FTP:"
 
 msgid "FTP directory cache timeout (sec):"
-msgstr ""
+msgstr "Таймаўт кэша каталога (сек):"
 
 msgid "&Always use ftp proxy:"
-msgstr ""
+msgstr "Заўсёды выкарыстоўваць проксі ftp(&A):"
 
 msgid "&Use ~/.netrc"
-msgstr "&Ужываць ~/.netrc"
+msgstr "Ужываць ~/.netrc(&U)"
 
 msgid "Use &passive mode"
-msgstr "&Нядзейны спосаб"
+msgstr "Выкарыстоўваць пасіўны рэжым(&P)"
 
 msgid "Use passive mode over pro&xy"
-msgstr "Нядзейны спосаб праз &пасродак"
+msgstr "Выкарыстоўваць пасіўны рэжым праз проксі(&X)"
 
 msgid "Virtual File System Setting"
-msgstr "Налады ўяўнай файлавай сыстэмы"
+msgstr "Налады віртуальнай файлавай сістэмы"
 
 msgid "cd"
-msgstr "Зьмяніць каталёґ"
+msgstr "cd"
 
 msgid "Quick cd"
-msgstr "Хутка зьмяніць каталёґ"
+msgstr "Змена працоўнага каталога"
 
 msgid "Existing filename (filename symlink will point to):"
 msgstr "Назва існага файла (на які файл спасылацца):"
 
 msgid "Symbolic link filename:"
-msgstr "Назва сымбалічнае спасылкі:"
+msgstr "Назва сімвалічнай спасылкі:"
 
 msgid "Symbolic link"
-msgstr "Сымбалічная спасылка"
+msgstr "Сімвалічная спасылка"
 
 msgid "&Stop"
-msgstr "&Спыніць"
+msgstr "Спыніць(&S)"
 
 msgid "&Resume"
-msgstr "&Аднавіць"
+msgstr "Аднавіць(&R)"
 
 msgid "&Kill"
-msgstr "&Забіць"
+msgstr "Забіць(&K)"
 
 msgid "Background jobs"
 msgstr "Фонавыя задачы"
@@ -2122,70 +2172,70 @@ msgid "Password for \\\\%s\\%s"
 msgstr "Пароль на \\\\%s\\%s"
 
 msgid "Domain:"
-msgstr "Дамэн:"
+msgstr "Дамен:"
 
 msgid "Username:"
 msgstr "Імя карыстальніка:"
 
 msgid "SMB authentication"
-msgstr ""
+msgstr "Аўтэнтыфікацыя SMB"
 
 msgid "set &user ID on execution"
-msgstr ""
+msgstr "задаць user ID для запуску(&U)"
 
 msgid "set &group ID on execution"
-msgstr ""
+msgstr "задаць group ID для запуску(&G)"
 
 msgid "stick&y bit"
-msgstr ""
+msgstr "замацоўны біт(&Y)"
 
 msgid "&read by owner"
-msgstr ""
+msgstr "чытанне для карыстальніка(&R)"
 
 msgid "&write by owner"
-msgstr ""
+msgstr "запіс для карыстальніка(&W)"
 
 msgid "e&xecute/search by owner"
-msgstr ""
+msgstr "запуск/пошук для карыстальніка(&X)"
 
 msgid "rea&d by group"
-msgstr ""
+msgstr "чытанне для групы(&D)"
 
 msgid "write by grou&p"
-msgstr ""
+msgstr "запіс для групы(&P)"
 
 msgid "execu&te/search by group"
-msgstr ""
+msgstr "запуск/пошук для групы(&T)"
 
 msgid "read &by others"
-msgstr ""
+msgstr "чытанне для астатніх(&B)"
 
 msgid "wr&ite by others"
-msgstr ""
+msgstr "запіс для астатніх(&I)"
 
 msgid "execute/searc&h by others"
-msgstr ""
+msgstr "запуск/пошук для астатніх(&H)"
 
 msgid "Name:"
 msgstr "Імя:"
 
 msgid "Permissions (octal):"
-msgstr "Дазволы (васьмярковыя)"
+msgstr "Дазволы (васмярковыя)"
 
 msgid "Owner name:"
 msgstr "Імя ўладальніка:"
 
 msgid "Group name:"
-msgstr "Назва суполкі:"
+msgstr "Назва групы :"
 
 msgid "&Marked all"
-msgstr "Пазначыць ус&ё"
+msgstr "Пазначыць усё(&M)"
 
 msgid "S&et marked"
-msgstr "&Усталяваць пазначанае"
+msgstr "Прызначыць пазначанае(&E)"
 
 msgid "C&lear marked"
-msgstr "&Прыбраць пазначэньні"
+msgstr "Прыбраць пазначэнне(&L)"
 
 msgid "Chmod command"
 msgstr "Загад «chmod»"
@@ -2197,10 +2247,10 @@ msgid "File"
 msgstr "Файл"
 
 msgid "Set &groups"
-msgstr "&Суполкі"
+msgstr "Групы(&G)"
 
 msgid "Set &users"
-msgstr "&Карыстальнікі"
+msgstr "Карыстальнікі(&U)"
 
 msgid "Name"
 msgstr "Назва"
@@ -2209,7 +2259,7 @@ msgid "Owner name"
 msgstr "Імя ўладальніка"
 
 msgid "Group name"
-msgstr "Назва суполкі"
+msgstr "Назва групы"
 
 msgid "Size"
 msgstr "Памер"
@@ -2221,32 +2271,32 @@ msgid "User name"
 msgstr "Імя карыстальніка"
 
 msgid "<Unknown user>"
-msgstr "<Невядомы карыстальнік>"
+msgstr "<Unknown user>"
 
 msgid "<Unknown group>"
-msgstr "<Невядомая суполка>"
+msgstr "<Unknown group>"
 
 msgid "Enter machine name (F1 for details):"
 msgstr "Упішыце назву машыны (даведка — «F1»):"
 
 msgid "Files tagged, want to cd?"
-msgstr "Файлы пазначылі, ці зьмяніць каталёґ?"
+msgstr "Файлы пазначаны, змяніць каталог?"
 
 msgid "Cannot change directory"
-msgstr "Немагчыма зьмяніць каталёґ"
+msgstr "Немагчыма змяніць каталог"
 
 msgid "Filter"
-msgstr "Прасеяць"
+msgstr "Фільтраваць"
 
 msgid "Set expression for filtering filenames"
-msgstr "Вызначце выраз, па якім прасейваць назвы файлаў"
+msgstr "Задайце выраз для фільтравання назваў файлаў"
 
 #, c-format
 msgid "Link %s to:"
 msgstr "Стварыць спасылку «%s» на:"
 
 msgid "Link"
-msgstr "Строгая спасылка"
+msgstr "Спасылка"
 
 #, c-format
 msgid "link: %s"
@@ -2254,95 +2304,95 @@ msgstr "спасылка: %s"
 
 #, c-format
 msgid "symlink: %s"
-msgstr "сымбалічная спасылка: %s"
+msgstr "сімвалічная спасылка: %s"
 
 #, c-format
 msgid "Cannot chdir to \"%s\""
-msgstr "Немагчыма перайсьці ў «%s»"
+msgstr "Немагчыма перайсці ў «%s»"
 
 msgid "View file"
-msgstr "Прагледзець файл"
+msgstr "Праглядзець файл"
 
 msgid "Filename:"
 msgstr "Назва файла:"
 
 msgid "Filtered view"
-msgstr "Зірнуць вывад загаду"
+msgstr "Прагляд вываду загаду"
 
 msgid "Filter command and arguments:"
-msgstr "Загад і довады:"
+msgstr "Загад і аргументы :"
 
 msgid "Edit file"
-msgstr "Правіць файл"
+msgstr "Рэдагаваць файл"
 
 msgid "Create a new Directory"
-msgstr "Стварыць каталёґ"
+msgstr "Стварыць каталог"
 
 msgid "Enter directory name:"
-msgstr "Упішыце назву каталёґа:"
+msgstr "Увядзіце назву каталога:"
 
 msgid "Extension file edit"
-msgstr "Рэдаґаваць файл пашырэньняў"
+msgstr "Рэдагаваць файл пашырэння"
 
 msgid "Which extension file you want to edit?"
-msgstr "Які файл пашырэньняў рэдаґаваць?"
+msgstr "Які файл пашырэння хочаце адрэдагаваць?"
 
 msgid "&System Wide"
-msgstr "&Агульнасыстэмны"
+msgstr "Агульнасістэмны(&S)"
 
 msgid "Highlighting groups file edit"
-msgstr "Рэдаґаваць файл падсьвечваць назвы"
+msgstr "Рэдагаванне падсвятлення назваў файлаў"
 
 msgid "Which highlighting file you want to edit?"
-msgstr "Які файл рэдаґаваць?"
+msgstr "Які файл рэдагаваць?"
 
 msgid "Compare directories"
-msgstr "Параўнаць каталёґі"
+msgstr "Параўнаць каталогі"
 
 msgid "Select compare method:"
-msgstr "Спосаб параўноўваць:"
+msgstr "Спосаб параўнання:"
 
 msgid "&Quick"
-msgstr "&Хуткі"
+msgstr "Хуткі(&Q)"
 
 msgid "&Size only"
-msgstr "&Паводле памеру"
+msgstr "Паводле памеру(&S)"
 
 msgid "&Thorough"
-msgstr "&Вычарпальны"
+msgstr "Па байтах(&T)"
 
 msgid ""
 "Both panels should be in the listing mode\n"
 "to use this command"
 msgstr ""
-"Каб выканаць загад, трэба, каб абедзьве панэлі\n"
-"адлюстроўваліся сьпісамі"
+"Каб выканаць загад, патрэбна, каб абедзве панэлі\n"
+"адлюстроўваліся спісамі"
 
 msgid ""
 "Not an xterm or Linux console;\n"
 "the panels cannot be toggled."
 msgstr ""
-"Панэлі нельга вымкнуць:\n"
-"гэта не «xterm» і не кансоль «Linux»"
+"Гэта не xterm альбо кансоль Linux;\n"
+"панэлі немагчыма выключыць."
 
 #, c-format
 msgid "'%s' is not a symbolic link"
-msgstr "«%s» ня ёсьць сымбалічнаю спасылкаю"
+msgstr "«%s» не з’яўляецца сімвалічнай спасылкай"
 
 #, c-format
 msgid "Symlink '%s' points to:"
-msgstr ""
+msgstr "Сімвалічная спасылка \"%s\" спасылаецца на:"
 
 msgid "Edit symlink"
-msgstr "Рэдаґаваць спасылку"
+msgstr "Рэдагаваць спасылку"
 
 #, c-format
 msgid "edit symlink, unable to remove %s: %s"
-msgstr "рэдаґуем спасылку: немагчыма выдаліць %s: %s"
+msgstr "спасылка адкрытая ў рэдактары,  немагчыма выдаліць %s: %s"
 
 #, c-format
 msgid "edit symlink: %s"
-msgstr "рэдаґаваць спасылку: %s"
+msgstr "рэдагаваць спасылку: %s"
 
 msgid "FTP to machine"
 msgstr "Злучыцца праз FTP"
@@ -2357,45 +2407,45 @@ msgid "SMB link to machine"
 msgstr "Злучыцца праз SMB"
 
 msgid "Undelete files on an ext2 file system"
-msgstr "Аднавіць файлы на файлавай сыстэме «ext2»"
+msgstr "Аднавіць файлы на файлавай сістэме «ext2»"
 
 msgid ""
 "Enter device (without /dev/) to undelete\n"
 "files on: (F1 for details)"
 msgstr ""
 "Каб аднавіць файлы на прыладзе (даведка — «F1»),\n"
-"упішыце ейную назву (без «/dev/»)"
+"увядзіце яе назву (без «/dev/»)"
 
 msgid "Directory scanning"
-msgstr "Аглядаць каталёґ"
+msgstr "Сканаванне каталога"
 
 msgid "Setup"
 msgstr "Наладзіць"
 
 #, c-format
 msgid "Setup saved to %s"
-msgstr "Налады захавалі ў «%s»"
+msgstr "Налады захаваныя ў «%s»"
 
 #, c-format
 msgid "Unable to save setup to %s"
 msgstr "Немагчыма захаваць налады ў «%s»"
 
 msgid "Cannot execute commands on non-local filesystems"
-msgstr "На нелякальных файлавых сыстэмах нельга выконваць загады"
+msgstr "На нелакальных файлавых сістэмах нельга выконваць загады"
 
 #, c-format
 msgid ""
 "Cannot chdir to \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма перайсьці ў «%s»\n"
+"Немагчыма перайсці ў «%s»\n"
 "%s"
 
 msgid "Cannot read directory contents"
-msgstr "Немагчыма прачытаць зьмесьціва каталёґа"
+msgstr "Немагчыма прачытаць змесціва каталога"
 
 msgid "Parameter"
-msgstr "Парамэтар"
+msgstr "Параметр"
 
 #, c-format
 msgid ""
@@ -2415,8 +2465,8 @@ msgid ""
 "the installation failed. Please fetch a fresh copy from the Midnight "
 "Commander package."
 msgstr ""
-"Разьметка файла %smc.ext зьмянілася ў вэрсіі 3.0. Магчыма, усталявалі з "
-"памылкамі. Атрымайце сьвежы асобнік з пакунка ««Міднайт Камандэра»."
+"Фармат %smc.ext змяніўся з версіі 3.0. Магчыма, падчас усталёўкі адбыўся "
+"збой. Калі ласка, абярыце свежую версію з пакунка Midnight Commander."
 
 #, c-format
 msgid "%s file error"
@@ -2427,23 +2477,23 @@ msgid ""
 "The format of the %s file has changed with version 3.0. You may either want "
 "to copy it from %smc.ext or use that file as an example of how to write it."
 msgstr ""
-"Разьметка файла %s зьмянілася ў вэрсіі 3.0. Яго можна скапіяваць з %smc.ext "
-"або напісаць свой па прыкладзе гэтага файла."
+"Фармат файла %smc.ext змяніўся з версіі 3.0. Вы можаце або скапіраваць яго з "
+"%smc.ext альбо выкарыстаць гэты файл як прыклад і напісаць свой."
 
 msgid "DialogTitle|Copy"
-msgstr "Капіяваць"
+msgstr "Капіраваць"
 
 msgid "DialogTitle|Move"
-msgstr "Перамясьціць"
+msgstr "Перамясціць"
 
 msgid "DialogTitle|Delete"
 msgstr "Выдаліць"
 
 msgid "FileOperation|Copy"
-msgstr "Капіяваць"
+msgstr "Капіраваць"
 
 msgid "FileOperation|Move"
-msgstr "Перамясьціць"
+msgstr "Перамясціць"
 
 msgid "FileOperation|Delete"
 msgstr "Выдаліць"
@@ -2460,20 +2510,20 @@ msgid "files"
 msgstr "файлы"
 
 msgid "directory"
-msgstr "каталёґ"
+msgstr "каталог"
 
 msgid "directories"
-msgstr "каталёґі"
+msgstr "каталогі"
 
 msgid "files/directories"
-msgstr "файлы або каталёґі"
+msgstr "файлы альбо каталогі"
 
 #. TRANSLATORS: keep leading space here to split words in Copy/Move dialog
 msgid " with source mask:"
-msgstr " з зыходным шаблёнам:"
+msgstr " з зыходным шаблонам:"
 
 msgid "Cannot make the hardlink"
-msgstr "Немагчыма стварыць строгую спасылку"
+msgstr "Немагчыма стварыць жорсткую спасылку"
 
 #, c-format
 msgid ""
@@ -2488,27 +2538,52 @@ msgid ""
 "\n"
 "Option Stable Symlinks will be disabled"
 msgstr ""
+"Немагчыма стварыць устойлівыя сімвалічныя спасылкі\n"
+"на нелакальных файлавых сістэмах:\n"
+"\n"
+"Параметр \"Устойлівыя сімвалічныя спасылкі\" будзе скасаваны"
 
 #, c-format
 msgid ""
 "Cannot create target symlink \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма стварыць прызначаную спасылку «%s»\n"
+"Немагчыма стварыць мэтавую спасылку «%s»\n"
 "%s"
 
-msgid "Ski&p all"
-msgstr "Прапусьціць &усё"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"«%s»\n"
+"і\n"
+"«%s»\n"
+" адзін і той жа каталог"
 
-msgid "&Retry"
-msgstr "П&аўтарыць"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"і\n"
+"\"%s\"\n"
+"адзін і той жа файл"
+
+msgid "Ski&p all"
+msgstr "Прамінуць &усё"
 
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
 "Delete it recursively?"
 msgstr ""
-"Каталёг \"%s\" не пусты.\n"
+"Каталог \"%s\" не пусты.\n"
 "Выдаліць яго рэкурсіўна?"
 
 #, c-format
@@ -2518,82 +2593,81 @@ msgid ""
 "Delete it recursively?"
 msgstr ""
 "Фонавы працэс:\n"
-"каталёг \"%s\" не пусты.\n"
+"каталог \"%s\" не пусты.\n"
 "Выдаліць рэкурсіўна?"
 
 msgid "Non&e"
-msgstr "Ні&чога"
+msgstr "Нічога(&E)"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма атрымаць уласьцівасьці файла «%s»\n"
+"Немагчыма выдаліць файл «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"«%s»\n"
-"і\n"
-"«%s»\n"
-"ёсьць адным файлам"
+"Немагчыма атрымаць уласцівасці файла «%s»\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
-msgstr "Немагчыма перазапісаць каталёґ «%s»"
+msgstr "Немагчыма перазапісаць каталог «%s»"
 
 #, c-format
 msgid ""
 "Cannot move file \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма перамясьціць файл «%s» у «%s»\n"
+"Немагчыма перамясціць файл «%s» у «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма выдаліць файл «%s»\n"
+"Немагчыма выдаліць каталог «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма выдаліць файл «%s»\n"
+"Немагчыма перазапісаць каталог «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма выдаліць каталёґ «%s»\n"
+"Немагчыма перазапісаць файл «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма перазапісаць каталёґ «%s»\n"
+"Немагчыма перамясціць каталог «%s» у «%s»\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Немагчыма выканаць на «..»!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма атрымаць уласьцівасьці зыходнага файла «%s»\n"
+"Немагчыма атрымаць уласцівасці зыходнага файла «%s»\n"
 "%s"
 
 #, c-format
@@ -2601,7 +2675,7 @@ msgid ""
 "Cannot create special file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма стварыць адмысловы файл «%s»\n"
+"Немагчыма стварыць спецыяльны файл «%s»\n"
 "%s"
 
 #, c-format
@@ -2609,7 +2683,7 @@ msgid ""
 "Cannot chown target file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма зьмяніць уладальніка прызначанага файла «%s»\n"
+"Немагчыма змяніць уладальніка мэтавага файла «%s»\n"
 "%s"
 
 #, c-format
@@ -2617,7 +2691,7 @@ msgid ""
 "Cannot chmod target file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма зьмяніць дазволы прызначанага файла «%s»\n"
+"Немагчыма змяніць дазволы мэтавага файла «%s»\n"
 "%s"
 
 #, c-format
@@ -2625,18 +2699,18 @@ msgid ""
 "Cannot open source file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма адчыніць зыходны файл «%s»\n"
+"Немагчыма адкрыць зыходны файл «%s»\n"
 "%s"
 
 msgid "Reget failed, about to overwrite file"
-msgstr "Не ўдалося дапампаваць, будзем запісваць паўзьверх файла"
+msgstr "Не атрымалася дапампаваць, будзе перазапісана"
 
 #, c-format
 msgid ""
 "Cannot fstat source file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма атрымаць уласьцівасьці зыходнага файла «%s»\n"
+"Немагчыма атрымаць уласцівасці зыходнага файла «%s»\n"
 "%s"
 
 #, c-format
@@ -2644,7 +2718,7 @@ msgid ""
 "Cannot create target file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма стварыць прызначаны файл «%s»\n"
+"Немагчыма стварыць мэтавы файл «%s»\n"
 "%s"
 
 #, c-format
@@ -2652,7 +2726,7 @@ msgid ""
 "Cannot fstat target file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма атрымаць уласьцівасьці прызначанага файла «%s»\n"
+"Немагчыма атрымаць уласцівасці мэтавага файла «%s»\n"
 "%s"
 
 #, c-format
@@ -2660,7 +2734,7 @@ msgid ""
 "Cannot preallocate space for target file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма выдзеліць прастору на прызначаны файл «%s»\n"
+"Немагчыма адвесці прастору на мэтавы файл «%s»\n"
 "%s"
 
 #, c-format
@@ -2668,24 +2742,26 @@ msgid ""
 "Cannot read source file \"%s\"\n"
 "%s"
 msgstr ""
+"Немагчыма прачытаць зыходны файл \"%s\"\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot write target file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма запісаць прызначаны файл «%s»\n"
+"Немагчыма запісаць мэтавы файл «%s»\n"
 "%s"
 
 msgid "(stalled)"
-msgstr "(затрымваецца)"
+msgstr "(затрымліваецца)"
 
 #, c-format
 msgid ""
 "Cannot close source file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма зачыніць зыходны файл «%s»\n"
+"Немагчыма закрыць зыходны файл «%s»\n"
 "%s"
 
 #, c-format
@@ -2693,21 +2769,21 @@ msgid ""
 "Cannot close target file \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма зачыніць прызначаны файл «%s»\n"
+"Немагчыма закрыць мэтавы файл «%s»\n"
 "%s"
 
 msgid "Incomplete file was retrieved. Keep it?"
-msgstr "Атрымалі няпоўны файл. Ці захаваць яго?"
+msgstr "Быў атрыманы незавершаны файл. Пакінуць?"
 
 msgid "&Keep"
-msgstr "&Захаваць"
+msgstr "Захаваць(&K)"
 
 #, c-format
 msgid ""
 "Cannot stat source directory \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма атрымаць уласьцівасьці зыходнага файла «%s»\n"
+"Немагчыма атрымаць уласцівасці зыходнага файла «%s»\n"
 "%s"
 
 #, c-format
@@ -2715,21 +2791,21 @@ msgid ""
 "Source \"%s\" is not a directory\n"
 "%s"
 msgstr ""
-"Зыходнае «%s» ня ёсьць каталёґам\n"
+"Зыходнае «%s» не з’яўляецца каталогам\n"
 "%s"
 
 #, c-format
 msgid ""
 "Cannot copy cyclic symbolic link\n"
 "\"%s\""
-msgstr "Немагчыма капіяваць цыклічную сымбалічную спасылку «%s»"
+msgstr "Немагчыма капіраваць цыклічную сімвалічную спасылку «%s»"
 
 #, c-format
 msgid ""
 "Destination \"%s\" must be a directory\n"
 "%s"
 msgstr ""
-"Прызначанае «%s» мусіць быць каталёґам\n"
+"Прызначанае «%s» мусіць быць каталогам\n"
 "%s"
 
 #, c-format
@@ -2737,7 +2813,7 @@ msgid ""
 "Cannot create target directory \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма стварыць прызначаны каталёґ «%s»\n"
+"Немагчыма стварыць мэтавы каталог «%s»\n"
 "%s"
 
 #, c-format
@@ -2745,52 +2821,21 @@ msgid ""
 "Cannot chown target directory \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма зьмяніць уладальніка прызначанага каталёґа «%s»\n"
-"%s"
-
-#, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"«%s»\n"
-"і\n"
-"«%s»\n"
-"ёсьць адным каталёґам"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Немагчыма перазапісаць файл «%s»\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Немагчыма перамясьціць каталёґ «%s» у «%s»\n"
+"Немагчыма змяніць уладальніка мэтавага каталога «%s»\n"
 "%s"
 
 #, c-format
 msgid "Directories: %zu, total size: %s"
-msgstr ""
-
-msgid "Cannot operate on \"..\"!"
-msgstr "Немагчыма выканаць на «..»!"
+msgstr "Каталогаў: %zu, агульны памер: %s"
 
 msgid "Sorry, I could not put the job in background"
-msgstr "Гэта нельга рабіць на тле"
+msgstr "Гэта нельга рабіць у фоне"
 
 msgid "S&uspend"
-msgstr ""
+msgstr "Прыпыніць(&U)"
 
 msgid "Con&tinue"
-msgstr "Пра&цягваць"
+msgstr "Працягваць(&T)"
 
 #, c-format
 msgid "%d:%02d.%02d"
@@ -2813,7 +2858,7 @@ msgid "%ld B/s"
 msgstr "%ld Б/с"
 
 msgid "Target file already exists!"
-msgstr "Прызначаны файл ужо сінуе!"
+msgstr "Файл ужо сінуе!"
 
 #, c-format
 msgid "New     : %s, size %s"
@@ -2824,36 +2869,36 @@ msgid "Existing: %s, size %s"
 msgstr "Існуючы: %s, памер %s"
 
 msgid "Overwrite this target?"
-msgstr "Ці перазапісаць файл?"
+msgstr "Перазапісаць файл?"
 
 msgid "A&ppend"
-msgstr "Дапісаць у &канец"
+msgstr "Дапісаць у канец(&P)"
 
 msgid "&Reget"
-msgstr "&Дапампаваць"
+msgstr "Дапампаваць(&R)"
 
 msgid "Overwrite all targets?"
-msgstr "Ці перазапісаць усё?"
+msgstr "Перазапісаць усё?"
 
 msgid "&Update"
-msgstr "&Састарэлыя"
+msgstr "Састарэлыя(&U)"
 
 msgid "If &size differs"
-msgstr "Розныя &памерам"
+msgstr "Розныя памерам(&S)"
 
 msgid "File exists"
 msgstr "Файл існуе"
 
 msgid "Background process: File exists"
-msgstr "Працэс на тле: файл існуе"
+msgstr "Працэс у фоне: файл існуе"
 
 #, c-format
 msgid "Files processed: %zu/%zu"
-msgstr "Апрацавалі файлаў: %zu з %zu"
+msgstr "Апрацавана файлаў: %zu з %zu"
 
 #, c-format
 msgid "Files processed: %zu"
-msgstr "Апрацавалі файлаў: %zu"
+msgstr "Апрацавана файлаў: %zu"
 
 #, c-format
 msgid "Time: %s %s"
@@ -2873,320 +2918,320 @@ msgstr "Час: %s (%s)"
 
 #, c-format
 msgid " Total: %s "
-msgstr " Разам: %s "
+msgstr " Агулам : %s "
 
 #, c-format
 msgid " Total: %s/%s "
-msgstr " Разам: %s/%s "
+msgstr " Агулам: %s/%s "
 
 msgid "Source"
 msgstr "Крыніца"
 
 msgid "Target"
-msgstr "Прызначэньне"
+msgstr "Мэта"
 
 msgid "Deleting"
-msgstr "Выдаленьне"
+msgstr "Выдаленне"
 
 msgid "&Using shell patterns"
-msgstr "&Шаблёны абалонкі"
+msgstr "Шаблоны абалонкі(&U)"
 
 msgid "to:"
 msgstr "сюды:"
 
 msgid "Follow &links"
-msgstr "Ператвараць &спасылкі"
+msgstr "Выкарыстоўваць спасылкі(&L)"
 
 msgid "Preserve &attributes"
-msgstr "Захоўваць &азнакі"
+msgstr "Захоўваць атрыбуты(&A)"
 
 msgid "Di&ve into subdir if exists"
-msgstr "У &падкаталёґ, калі ён існуе"
+msgstr "У падкаталог, калі ён існуе(&V)"
 
 msgid "&Stable symlinks"
-msgstr ""
+msgstr "Устойлівыя сімвалічныя спасылкі(&S)"
 
 msgid "&Background"
-msgstr "На &тле"
+msgstr "У фоне(&B)"
 
 #, c-format
 msgid "Invalid source pattern '%s'"
-msgstr ""
+msgstr "Хібны шаблон крыніцы '%s'"
 
 msgid "&Chdir"
-msgstr "Пера&йсьці"
+msgstr "Перайсці(&C)"
 
 msgid "&Again"
-msgstr "&Паўтарыць"
+msgstr "Паўтарыць(&A)"
 
 msgid "Pane&lize"
-msgstr "На па&нэль"
+msgstr "На панэль(&L)"
 
 msgid "&View - F3"
-msgstr "&Прагледзець — F3"
+msgstr "Праглядзець(&V) — F3"
 
 msgid "&Edit - F4"
-msgstr "&Рэдаґаваць — F4"
+msgstr "Рэдагаваць(&E) — F4"
 
 #, c-format
 msgid "Found: %lu"
-msgstr ""
+msgstr "Знойдзена: %lu"
 
 msgid "Malformed regular expression"
-msgstr "Хібны сталы выраз"
+msgstr "Хібны рэгулярны выраз"
 
 msgid "File name:"
 msgstr "Назва файла:"
 
 msgid "&Find recursively"
-msgstr "&Шукаць у падкаталёґах"
+msgstr "Шукаць у падкаталогах(&F)"
 
 msgid "S&kip hidden"
-msgstr "Прапускаць &схаваныя"
+msgstr "Прамінаць схаваныя(&K)"
 
 msgid "Content:"
-msgstr "Зьмесьціва:"
+msgstr "Змесціва:"
 
 msgid "Sea&rch for content"
-msgstr "Шукаць у &зьмесьціве"
+msgstr "Шукаць у змесціве(&R)"
 
 msgid "Case sens&itive"
-msgstr "Улічваць &памер"
+msgstr "Улічваць памер(&I)"
 
 msgid "A&ll charsets"
-msgstr "&Усе знаказборы"
+msgstr "Усе кадаванні(&L)"
 
 msgid "Fir&st hit"
-msgstr "&Да першага знойдзенага"
+msgstr "Да першага знойдзенага(&S)"
 
 msgid "&Tree"
-msgstr "Д&рэва"
+msgstr "Дрэва(&T)"
 
 msgid "Find File"
 msgstr "Шукаць файл"
 
 msgid "Start at:"
-msgstr "Пачаць ад каталёґа:"
+msgstr "Пачаць ад каталога :"
 
 msgid "Ena&ble ignore directories:"
-msgstr "Прапускаць &каталёґі:"
+msgstr "Не зважаць на каталогі(&B):"
 
 #, c-format
 msgid "Grepping in %s"
-msgstr "Шукаем у «%s»"
+msgstr "Пошук у «%s»"
 
 msgid "Finished"
-msgstr "Скончылі"
+msgstr "Завершана"
 
 #, c-format
 msgid "Finished (ignored %zu directory)"
 msgid_plural "Finished (ignored %zu directories)"
-msgstr[0] ""
-msgstr[1] ""
-msgstr[2] ""
-msgstr[3] ""
+msgstr[0] "Завершана (мінуты %zu каталог)"
+msgstr[1] "Завершана (мінута %zu каталогі)"
+msgstr[2] "Завершана (мінута %zu каталогаў)"
+msgstr[3] "Завершана (мінута %zu каталогаў)"
 
 msgid "Searching"
-msgstr "Шукаем"
+msgstr "Пошук"
 
 msgid "Change &to"
-msgstr "&Перайсьці"
+msgstr "Перайсці(&T)"
 
 msgid "&Free VFSs now"
-msgstr ""
+msgstr "Вызваліць VFS(&F)"
 
 msgid "&Refresh"
-msgstr "&Абнавіць"
+msgstr "Абнавіць(&R)"
 
 msgid "&Add current"
-msgstr "&Дадаць дзейны"
+msgstr "Дадаць бягучы(&A)"
 
 msgid "&Up"
-msgstr "&Уверх"
+msgstr "Уверх(&U)"
 
 msgid "New &group"
-msgstr "Новая &суполка"
+msgstr "Новая група(&G)"
 
 msgid "New &entry"
-msgstr "Новы &запіс"
+msgstr "Новы запіс(&E)"
 
 msgid "&Insert"
-msgstr "У &пачатак"
+msgstr "Уставіць(&I)"
 
 msgid "&Remove"
-msgstr "&Выдаліць"
+msgstr "Выдаліць(&R)"
 
 msgid "Subgroup - press ENTER to see list"
-msgstr "Падсуполка (каб прагледзець, націсьніце «Enter»)"
+msgstr "Падгрупа (каб праглядзець, націсніце «Enter»)"
 
 msgid "Active VFS directories"
-msgstr "Дзейныя каталёґі УФС"
+msgstr "Дзейныя каталогі VFS"
 
 msgid "Directory hotlist"
-msgstr "Сьпіс каталёґаў"
+msgstr "Спіс каталогаў"
 
 msgid "Top level group"
-msgstr "Суполка верхняга ўзроўню"
+msgstr "Група верхняга ўзроўню"
 
 msgid "Directory path"
-msgstr "Шлях да каталёґа"
+msgstr "Шлях да каталога"
 
 #, c-format
 msgid "Moving %s"
-msgstr "Перамяшчаем %s"
+msgstr "Перамяшчаецца %s"
 
 msgid "Directory label"
-msgstr "Цэтлік каталёґа"
+msgstr "Адмеціна каталога"
 
 msgid "&Append"
-msgstr "У &канец"
+msgstr "У канец(&A)"
 
 msgid "New hotlist entry"
-msgstr "Новы запіс у сьпісе"
+msgstr "Новы запіс у спісе"
 
 msgid "Directory label:"
-msgstr "Цэтлік каталёґа:"
+msgstr "Адмеціна каталога:"
 
 msgid "Directory path:"
-msgstr "Шлях да каталёґа:"
+msgstr "Шлях да каталога:"
 
 msgid "New hotlist group"
-msgstr "Новая суполка ў сьпісе"
+msgstr "Новая група ў спісе"
 
 msgid "Name of new group:"
-msgstr "Назва суполкі:"
+msgstr "Назва групы :"
 
 #, c-format
 msgid "Are you sure you want to remove entry \"%s\"?"
-msgstr "Ці выдаліць запіс «%s»?"
+msgstr "Сапраўды выдаліць запіс «%s»?"
 
 #, c-format
 msgid ""
 "Group \"%s\" is not empty.\n"
 "Remove it?"
 msgstr ""
-"Суполка «%s» не парожняя.\n"
-"Ці прыбраць яе?"
+"Група «%s» не пустая .\n"
+"Выдаліць яе?"
 
 msgid "Hotlist Load"
-msgstr "Ладуецца сьпіс"
+msgstr "Спіс загружаецца"
 
 #, c-format
 msgid ""
 "MC was unable to write %s file,\n"
 "your old hotlist entries were not deleted"
 msgstr ""
-"«МК» ня змог запісаць файл «%s»,\n"
-"старыя запісы сьпісу ня выдалілі"
+"«МC» не змог запісаць файл «%s»,\n"
+"старыя запісы спісу не выдалены"
 
 #, c-format
 msgid "Label for \"%s\":"
-msgstr "Цэтлік на «%s»:"
+msgstr "Адмеціна на «%s»:"
 
 msgid "Add to hotlist"
-msgstr "Дадаць у сьпіс"
+msgstr "Дадаць у спіс"
 
 #, c-format
 msgid "Midnight Commander %s"
-msgstr "«Міднайт Камандэр» %s"
+msgstr "«Midnight Commander» %s"
 
 #, c-format
 msgid "File: %s"
 msgstr "Файл: %s"
 
 msgid "No node information"
-msgstr "Няма зьвестак пра вузел"
+msgstr "Няма звестак пра вузел"
 
 msgid "Free nodes:"
 msgstr "Вузлы:"
 
 msgid "No space information"
-msgstr "Няма зьвестак пра прастору"
+msgstr "Няма звестак пра прастору"
 
 #, c-format
 msgid "Free space: %s/%s (%d%%)"
-msgstr "Прастора:    %s/%s (%d%%)"
+msgstr "Вольнае месца:    %s/%s (%d%%)"
 
 #, c-format
 msgid "Type:       %s"
-msgstr ""
+msgstr "Тып:       %s"
 
 msgid "non-local vfs"
-msgstr "нелякальная УФС"
+msgstr "нелакальная vfs"
 
 #, c-format
 msgid "Device:     %s"
-msgstr ""
+msgstr "Прылада:     %s"
 
 #, c-format
 msgid "Filesystem: %s"
-msgstr "Файл. сыст.: %s"
+msgstr "Файлавая сістэма: %s"
 
 #, c-format
 msgid "Accessed:   %s"
-msgstr ""
+msgstr "Зварот: %s"
 
 #, c-format
 msgid "Modified:   %s"
-msgstr ""
+msgstr "Мадыфікавана:   %s"
 
 #. TRANSLATORS: Time of last status change as in stat(2) man.
 #, c-format
 msgid "Changed:    %s"
-msgstr ""
+msgstr "Зменена:    %s"
 
 #, c-format
 msgid "Dev. type: major %lu, minor %lu"
-msgstr "Від прылады: мажор %lu, мінор %lu"
+msgstr "Тып прылады: major %lu, minor %lu"
 
 #, c-format
 msgid "Size:       %s"
-msgstr ""
+msgstr "Памер:       %s"
 
 #, c-format
 msgid " (%lu block)"
 msgid_plural " (%lu blocks)"
-msgstr[0] ""
-msgstr[1] ""
-msgstr[2] ""
-msgstr[3] ""
+msgstr[0] " (%lu блок)"
+msgstr[1] " (%lu блокі)"
+msgstr[2] " (%lu блокаў)"
+msgstr[3] " (%lu блокаў)"
 
 #, c-format
 msgid "Owner:      %s/%s"
-msgstr ""
+msgstr "Уладальнік:      %s/%s"
 
 #, c-format
 msgid "Links:      %d"
-msgstr ""
+msgstr "Спасылкі:      %d"
 
 #, c-format
 msgid "Mode:       %s (%04o)"
-msgstr ""
+msgstr "Рэжым:       %s (%04o)"
 
 #, c-format
 msgid "Location:   %Xh:%Xh"
-msgstr ""
+msgstr "Размяшчэнне:   %Xh:%Xh"
 
 msgid "&Equal split"
-msgstr "&Аднолькавыя памеры"
+msgstr "Аднолькавыя памеры(&E)"
 
 msgid "&Menubar visible"
-msgstr ""
+msgstr "Адлюстроўваць меню(&M)"
 
 msgid "Command &prompt"
-msgstr "Загадны &радок"
+msgstr "Загадны радок(&P)"
 
 msgid "&Keybar visible"
-msgstr "Радок &клявішаў"
+msgstr "Радок клавіш(&K)"
 
 msgid "H&intbar visible"
-msgstr "Радок &падказак"
+msgstr "Радок падказак(&I)"
 
 msgid "&XTerm window title"
-msgstr "&Загаловак акна"
+msgstr "Загаловак акна(&X)"
 
 msgid "&Show free space"
-msgstr ""
+msgstr "Паказваць вольнае месца(&S)"
 
 msgid "Panel split"
 msgstr "Падзяляць панэлі"
@@ -3195,10 +3240,10 @@ msgid "Console output"
 msgstr "Вывад кансолі"
 
 msgid "&Vertical"
-msgstr "&Прастастаўныя"
+msgstr "Вертыкальна(&V)"
 
 msgid "&Horizontal"
-msgstr "&Раўналежныя"
+msgstr "Гарызантальна(&H)"
 
 msgid "Output lines:"
 msgstr "Выводзіць радкоў:"
@@ -3207,175 +3252,175 @@ msgid "Layout"
 msgstr "Выгляд"
 
 msgid "File listin&g"
-msgstr "&Сьпіс файлаў"
+msgstr "Спіс файлаў(&G)"
 
 msgid "&Quick view"
-msgstr "&Хуткі агляд"
+msgstr "Хуткі прагляд(&Q)"
 
 msgid "&Info"
-msgstr "&Зьвесткі"
+msgstr "Звесткі(&I)"
 
 msgid "&Listing format..."
-msgstr ""
+msgstr "Фармат спіса(&L)..."
 
 msgid "&Sort order..."
-msgstr "&Упарадкаваць…"
+msgstr "Упарадкаваць(&S)…"
 
 msgid "&Filter..."
-msgstr "&Прасеяць…"
+msgstr "Фільтраваць(&F)…"
 
 msgid "&Encoding..."
-msgstr "&Кадоўка…"
+msgstr "Кадаванне(&E)…"
 
 msgid "FT&P link..."
-msgstr "Злучыцца праз &FTP…"
+msgstr "Злучэнне праз FTP(&F)…"
 
 msgid "S&hell link..."
-msgstr "Злучыцца праз &абалонку…"
+msgstr "Злучэнне праз абалонку(&H)…"
 
 msgid "S&FTP link..."
-msgstr "Злучыцца праз &SFTP…"
+msgstr "Злучэнне праз SFTP(&F)…"
 
 msgid "SM&B link..."
-msgstr "Злучыцца праз S&MB…"
+msgstr "Злучэнне праз SMB(&B)…"
 
 msgid "Paneli&ze"
-msgstr "На &панэлі"
+msgstr "На панэлі(&Z)"
 
 msgid "&Rescan"
-msgstr "Пера&чытаць"
+msgstr "Перасканаваць(&R)"
 
 msgid "&View"
-msgstr "&Зірнуць"
+msgstr "Праглядзець(&V)"
 
 msgid "Vie&w file..."
-msgstr "Зірнуць &файл…"
+msgstr "Паказаць файл(&W)…"
 
 msgid "&Filtered view"
-msgstr "Зірнуць вывад з&агаду"
+msgstr "Прагляд вываду загаду(&F)"
 
 msgid "&Copy"
-msgstr "&Капіяваць"
+msgstr "Капіраваць(&C)"
 
 msgid "C&hmod"
-msgstr "Зьмяніць &дазволы"
+msgstr "Змяніць дазволы(&H)"
 
 msgid "&Link"
-msgstr "&Строгая спасылка"
+msgstr "Спасылка(&L)"
 
 msgid "&Symlink"
-msgstr "С&ымбалічная спасылка"
+msgstr "Сімвалічная спасылка(&S)"
 
 msgid "Relative symlin&k"
-msgstr "&Адносная сымбалічная спасылка"
+msgstr "Адносная сімвалічная спасылка(&K)"
 
 msgid "Edit s&ymlink"
-msgstr "Р&эдаґаваць спасылку"
+msgstr "Рэдагаваць спасылку(&Y)"
 
 msgid "Ch&own"
-msgstr "Зьмяніць &уладальніка"
+msgstr "Змяніць уладальніка(&O)"
 
 msgid "&Advanced chown"
-msgstr "&Дазволы (пашыраныя)"
+msgstr "Дазволы (пашыраныя)(&A)"
 
 msgid "&Rename/Move"
-msgstr "&Назваць або перамясьціць"
+msgstr "Змяніць назву або перамясціць(&R)"
 
 msgid "&Mkdir"
-msgstr "Стварыць &каталёґ"
+msgstr "Стварыць каталог(&M)"
 
 msgid "&Quick cd"
-msgstr "Зь&мяніць каталёґ"
+msgstr "Змяніць каталог(&Q)"
 
 msgid "Select &group"
-msgstr "Абраць &суполку"
+msgstr "Абраць групу(&G)"
 
 msgid "U&nselect group"
-msgstr "Не абіраць с&уполку"
+msgstr "Не абіраць групу(&N)"
 
 msgid "&Invert selection"
-msgstr "Пераставіць &выбранае"
+msgstr "Адвярнуць вылучэнне(&I)"
 
 msgid "E&xit"
-msgstr "В&ыйсьці"
+msgstr "Выйсці(&X)"
 
 msgid "&User menu"
-msgstr "&Мэню карыстальніка"
+msgstr "Меню карыстальніка(&U)"
 
 msgid "&Directory tree"
-msgstr "&Дрэва каталёґаў"
+msgstr "Дрэва каталогаў(&D)"
 
 msgid "&Find file"
-msgstr "&Шукаць файл"
+msgstr "Шукаць файл(&F)"
 
 msgid "S&wap panels"
-msgstr "Пера&ставіць панэлі"
+msgstr "Пераставіць панэлі(&W)"
 
 msgid "Switch &panels on/off"
-msgstr "Схаваць (паказаць) &панэлі"
+msgstr "Схаваць (паказаць) панэлі(&P)"
 
 msgid "&Compare directories"
-msgstr "Параўнаць &каталёґі"
+msgstr "Параўнаць каталогі(&)"
 
 msgid "C&ompare files"
-msgstr "Параўнаць &файлы"
+msgstr "Параўнаць файлы(&O)"
 
 msgid "E&xternal panelize"
-msgstr "Загад на &вонкавую панэль"
+msgstr "Загад на вонкавую панэль(&X)"
 
 msgid "Show directory s&izes"
-msgstr "Памеры катал&ёґаў"
+msgstr "Памеры каталогаў(&I)"
 
 msgid "Command &history"
-msgstr "Г&історыя загадаў"
+msgstr "Гісторыя загадаў(&H)"
 
 msgid "Di&rectory hotlist"
-msgstr "&Сьпіс каталёґаў"
+msgstr "Спіс каталогаў(&R)"
 
 msgid "&Active VFS list"
-msgstr "Сьпіс дзейных &УФС"
+msgstr "Спіс актыўных VFS(&A)"
 
 msgid "&Background jobs"
-msgstr "Заданьні на &тле"
+msgstr "Задачы ў фоне(&B)"
 
 msgid "Screen lis&t"
-msgstr "Сьпіс &экранаў"
+msgstr "Спіс экранаў(&T)"
 
 msgid "&Undelete files (ext2fs only)"
-msgstr "&Аднавіць файлы (толькі на ext2)"
+msgstr "Аднавіць файлы (толькі на ext2)(&U)"
 
 msgid "&Listing format edit"
-msgstr "&Зьмяніць від сьпісу"
+msgstr "Змяніць від спіса(&L)"
 
 msgid "Edit &extension file"
-msgstr "Файл п&ашырэньняў"
+msgstr "Рэдагаваць файл пашырэнняў(&E)"
 
 msgid "Edit &menu file"
-msgstr "Файл м&эню"
+msgstr "Файл меню(&M)"
 
 msgid "Edit hi&ghlighting group file"
-msgstr "Файл падсьвечваць &назвы"
+msgstr "Рэдагаваць файл падсвятлення назваў(&G)"
 
 msgid "&Configuration..."
-msgstr "&Настаўленьні…"
+msgstr "Канфігурацыя(&C)…"
 
 msgid "&Layout..."
-msgstr "&Выгляд…"
+msgstr "Выгляд(&L)…"
 
 msgid "&Panel options..."
-msgstr "Налады п&анэляў…"
+msgstr "Параметры панэляў(&P)…"
 
 msgid "C&onfirmation..."
-msgstr "&Пацьвярджаць…"
+msgstr "Пацверджанне(&O)…"
 
 msgid "&Appearance..."
-msgstr ""
+msgstr "Выгляд(&A)..."
 
 msgid "&Display bits..."
-msgstr "&Кадоўка адлюстраваньня…"
+msgstr "Кадаванне адлюстравання(&D)…"
 
 msgid "&Virtual FS..."
-msgstr "&Уяўныя ФС…"
+msgstr "Віртуальныя ФС(&V)…"
 
 msgid "Panels:"
 msgstr "Панэлі:"
@@ -3383,43 +3428,43 @@ msgstr "Панэлі:"
 #, c-format
 msgid "You have %zu opened screen. Quit anyway?"
 msgid_plural "You have %zu opened screens. Quit anyway?"
-msgstr[0] ""
-msgstr[1] ""
-msgstr[2] ""
-msgstr[3] ""
+msgstr[0] "Вы адкрылі %zu экран. Усё роўна выйсці?"
+msgstr[1] "Вы адкрылі %zu экраны. Усё роўна выйсці?"
+msgstr[2] "Вы адкрылі %zu экранаў. Усё роўна выйсці?"
+msgstr[3] "Вы адкрылі %zu экранаў. Усё роўна выйсці?"
 
 msgid "The Midnight Commander"
-msgstr "«Міднайт Камандэр»"
+msgstr "Midnight Commander"
 
 msgid "Do you really want to quit the Midnight Commander?"
-msgstr "Ці сапраўды выйсьці зь «Міднайт Камандэра»?"
+msgstr "Сапраўды выйсці з «Midnight Commander»?"
 
 msgid "&Above"
-msgstr "&Верхняя"
+msgstr "Верхняя панэль(&A)"
 
 msgid "&Left"
-msgstr "&Левая"
+msgstr "Левая(&L)"
 
 msgid "&Below"
-msgstr "Н&іжняя"
+msgstr "Ніжняя(&B)"
 
 msgid "&Right"
-msgstr "&Правая"
+msgstr "Правая(&R)"
 
 msgid "ButtonBar|Menu"
-msgstr "Мэню"
+msgstr "Меню"
 
 msgid "ButtonBar|View"
-msgstr "Зірнуць"
+msgstr "Праглядзець"
 
 msgid "ButtonBar|RenMov"
 msgstr "Назваць"
 
 msgid "ButtonBar|Mkdir"
-msgstr "Новы каталёґ"
+msgstr "Новы каталог"
 
 msgid "Memory exhausted!"
-msgstr "Вычарпалі памяць!"
+msgstr "Памяць вычарпана!"
 
 #. TRANSLATORS: one single character to represent 'unsorted' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3427,7 +3472,7 @@ msgid "sort|u"
 msgstr "б"
 
 msgid "&Unsorted"
-msgstr "&Не ўпарадкоўваць"
+msgstr "Не сартаваць(&U)"
 
 #. TRANSLATORS: one single character to represent 'name' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3435,7 +3480,7 @@ msgid "sort|n"
 msgstr "н"
 
 msgid "&Name"
-msgstr "&Назва"
+msgstr "Назва(&N)"
 
 #. TRANSLATORS: one single character to represent 'version' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3443,7 +3488,7 @@ msgid "sort|v"
 msgstr "в"
 
 msgid "&Version"
-msgstr "&Вэрсія"
+msgstr "Версія(&V)"
 
 #. TRANSLATORS: one single character to represent 'extension' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3451,7 +3496,7 @@ msgid "sort|e"
 msgstr "п"
 
 msgid "E&xtension"
-msgstr ""
+msgstr "Пашырэнні(&X)"
 
 #. TRANSLATORS: one single character to represent 'size' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3459,10 +3504,10 @@ msgid "sort|s"
 msgstr "м"
 
 msgid "&Size"
-msgstr "&Памер"
+msgstr "Памер(&S)"
 
 msgid "Block Size"
-msgstr "Памер блёку"
+msgstr "Памер блока"
 
 #. TRANSLATORS: one single character to represent 'Modify time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3470,7 +3515,7 @@ msgid "sort|m"
 msgstr "р"
 
 msgid "&Modify time"
-msgstr "&Рэдаґавалі"
+msgstr "Час мадыфікацыі(&M)"
 
 #. TRANSLATORS: one single character to represent 'Access time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3478,7 +3523,7 @@ msgid "sort|a"
 msgstr "д"
 
 msgid "&Access time"
-msgstr "&Час доступу"
+msgstr "Час доступу(&A)"
 
 #. TRANSLATORS: one single character to represent 'Change time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3486,7 +3531,7 @@ msgid "sort|h"
 msgstr "з"
 
 msgid "C&hange time"
-msgstr "&Зьмянілі"
+msgstr "Час змены(&H)"
 
 msgid "Perm"
 msgstr "Дазв"
@@ -3500,7 +3545,7 @@ msgid "sort|i"
 msgstr "в"
 
 msgid "&Inode"
-msgstr "&Вузел"
+msgstr "Вузел(&I)"
 
 msgid "UID"
 msgstr "UID"
@@ -3512,7 +3557,7 @@ msgid "Owner"
 msgstr "Уладальнік"
 
 msgid "Group"
-msgstr "Суполка"
+msgstr "Група"
 
 msgid "[dev]"
 msgstr "[прыл]"
@@ -3527,7 +3572,7 @@ msgid "SUB-DIR"
 msgstr "ПАД-КАТ"
 
 msgid "<readlink failed>"
-msgstr "<спасылка не прачыталася>"
+msgstr "<readlink failed>"
 
 #, c-format
 msgid "%s in %d file"
@@ -3541,13 +3586,13 @@ msgid "Panelize"
 msgstr "На панэлі"
 
 msgid "Unknown tag on display format:"
-msgstr "Невядомая пазнака ў разьметцы адлюстраваньня:"
+msgstr "Невядомая пазнака ў фармаце адлюстравання:"
 
 msgid "&Files only"
-msgstr "&Толькі файлы"
+msgstr "Толькі файлы(&F)"
 
 msgid "&Case sensitive"
-msgstr "&Улічваць памер літар"
+msgstr "Улічваць памер літар(&C)"
 
 msgid "Select"
 msgstr "Абраць"
@@ -3556,14 +3601,13 @@ msgid "Unselect"
 msgstr "Не абіраць"
 
 msgid "Do you really want to execute?"
-msgstr "Ці сапраўды выканаць?"
+msgstr "Сапраўды выканаць?"
 
 msgid "User supplied format looks invalid, reverting to default."
-msgstr ""
-"Вяртаем да перадвызначанага: здаецца, карыстальнік падаў хібную разьметку."
+msgstr "Вяртаем да прадвызначанага: здаецца, карыстальнік падаў хібны фармат."
 
 msgid "&Add new"
-msgstr "&Дадаць"
+msgstr "Дадаць(&A)"
 
 msgid "External panelize"
 msgstr "Загад на вонкавую панэль"
@@ -3578,68 +3622,68 @@ msgid "Add to external panelize"
 msgstr "Дадаць да загадаў"
 
 msgid "Enter command label:"
-msgstr "Упішыце цэтлік да загаду:"
+msgstr "Увядзіце назву загаду:"
 
 msgid "Cannot invoke command."
 msgstr "Немагчыма выканаць загад."
 
 msgid "Pipe close failed"
-msgstr "Не ўдалося зачыніць канал"
+msgstr "Памылка падчас закрыцця каналу"
 
 msgid "Cannot run external panelize in a non-local directory"
-msgstr "Немагчыма запусьціць загад на нелякальным каталёґу"
+msgstr "Немагчыма запусціць загад у адлеглым каталозе"
 
 msgid "Modified git files"
-msgstr "Зьмененыя файлы GIT"
+msgstr "Файлы GIT зменены"
 
 msgid "Find rejects after patching"
-msgstr "Знайсьці адкінутае загадам «patch»"
+msgstr "Знайсці адкінутае загадам «patch»"
 
 msgid "Find *.orig after patching"
-msgstr "Знайсьці арыґіналы (*.orig) пасьля загаду «patch»"
+msgstr "Знайсці арыгіналы (*.orig) пасля загаду «patch»"
 
 msgid "Find SUID and SGID programs"
-msgstr "Знайсьці праґрамы зь бітамі SUID і SGID"
+msgstr "Знайсці праграмы з бітамі SUID і SGID"
 
 #, c-format
 msgid ""
 "Cannot open the %s file for writing:\n"
 "%s\n"
 msgstr ""
-"Файл «%s» немагчыма адчыніць чытаць:\n"
+"Файл «%s» немагчыма адкрыць для запісу :\n"
 "%s\n"
 
 #, c-format
 msgid "Copy \"%s\" directory to:"
-msgstr "Капіяваць каталёґ «%s» сюды:"
+msgstr "Скапіраваць каталог «%s» сюды:"
 
 #, c-format
 msgid "Move \"%s\" directory to:"
-msgstr "Перамясьціць каталёґ «%s» сюды:"
+msgstr "Перамясціць каталог «%s» сюды:"
 
 #, c-format
 msgid ""
 "Cannot stat the destination\n"
 "%s"
 msgstr ""
-"Немагчыма атрымаць уласьцівасьці прызначэньня\n"
+"Немагчыма атрымаць уласцівасці прызначэння\n"
 "%s"
 
 #, c-format
 msgid "Delete %s?"
-msgstr "Ці выдаліць «%s»?"
+msgstr "Выдаліць «%s»?"
 
 msgid "ButtonBar|Static"
 msgstr "Сталае"
 
 msgid "ButtonBar|Dynamc"
-msgstr "Зьменл"
+msgstr "Дынамічнае"
 
 msgid "ButtonBar|Rescan"
-msgstr "Перагл"
+msgstr "Перасканаваць"
 
 msgid "ButtonBar|Forget"
-msgstr "Забыць"
+msgstr "Забыцца"
 
 msgid "ButtonBar|Rmdir"
 msgstr "ВыдКат"
@@ -3653,29 +3697,29 @@ msgstr ""
 "%s\n"
 
 msgid "Help file format error\n"
-msgstr "Памылка ў разьметцы файла даведкі\n"
+msgstr "Памылка фармату файла даведкі\n"
 
 msgid "Internal bug: Double start of link area"
-msgstr "Унутраная хіба: падвойны пачатак абсягу спасылкі"
+msgstr "Унутраная хіба: падвойны  запуск прасторы спасылкі"
 
 #, c-format
 msgid "Cannot find node %s in help file"
-msgstr "У файле дапамогі не знайшлі вузел «%s»"
+msgstr "У файле дапамогі не знойдзены вузел «%s»"
 
 msgid "Help"
 msgstr "Даведка"
 
 msgid "ButtonBar|Index"
-msgstr "Разьдзелы"
+msgstr "Раздзелы"
 
 msgid "ButtonBar|Prev"
 msgstr "Назад"
 
 msgid "Learn keys"
-msgstr "Вывучыць клявішы"
+msgstr "Вывучыць клавішы"
 
 msgid "Teach me a key"
-msgstr "Навучыце мяне клявішы"
+msgstr "Навучыце мяне клавішам"
 
 #, c-format
 msgid ""
@@ -3688,57 +3732,62 @@ msgid ""
 "If you want to escape, press a single Escape key\n"
 "and wait as well."
 msgstr ""
-"Націсьніце клявішу «%s»\n"
-"і пачакайце, пакуль гэтае паведамленьне ня зьнікне.\n"
+"Націсніце клавішу «%s»\n"
+"і пачакайце, пакуль гэтае паведамленне не знікне.\n"
 "\n"
-"Потым націсьніце яе зноўку, каб насупраць\n"
-"назвы клявішы зьявілася «Так».\n"
+"Потым націсніце яе зноў, каб насупраць\n"
+"назвы клавішы з'явілася «Добра».\n"
 "\n"
-"Калі хочаце спыніць навучаць, адзін раз\n"
-"націсьніце «Esc» і пачакайце."
+"Калі хочаце спыніць навучанне, адзін раз\n"
+"націсніце «Esc» і пачакайце."
 
 msgid "Cannot accept this key"
-msgstr "Немагчыма прыняць клявішу"
+msgstr "Немагчыма прыняць клавішу"
 
 #, c-format
 msgid "You have entered \"%s\""
-msgstr "Вы набралі «%s»"
+msgstr "Вы ўвялі «%s»"
 
 #. TRANSLATORS: This label appears near learned keys.  Keep it short.
 msgid "OK"
-msgstr " Так"
+msgstr "Добра"
 
 msgid ""
 "It seems that all your keys already\n"
 "work fine. That's great."
-msgstr "Здаецца, усе клявішы працуюць добра. Гэта выдатна!"
+msgstr ""
+"Здаецца, усе клавішы \n"
+"працуюць добра. Гэта выдатна!"
 
 msgid "&Discard"
-msgstr "&Адкінуць"
+msgstr "Адкінуць(&D)"
 
 msgid ""
 "Great! You have a complete terminal database!\n"
 "All your keys work well."
 msgstr ""
-"Выдатна! Вы маеце моўную базу тэрміналаў!\n"
-"Усе клявішы працуюць добра."
+"Выдатна! Вы маеце завершаную базу тэрміналаў!\n"
+"Усе клавішы працуюць выдатна."
 
 msgid ""
 "Press all the keys mentioned here. After you have done it, check\n"
 "which keys are not marked with OK. Press space on the missing\n"
 "key, or click with the mouse to define it. Move around with Tab."
 msgstr ""
+"Націсніце ўсе пералічаныя клавішы. Пасля знайдзіце,\n"
+"якія клавішы не пазначаны \"Добра\". Для навучанне клавішы абярыце\n"
+"яе з дапамогай Tab альбо мышшу, і націсніце прагал."
 
 #, c-format
 msgid ""
 "Failed to run:\n"
 "%s\n"
 msgstr ""
-"Не ўдалося запусьціць:\n"
+"Не атрымалася запусціць:\n"
 "%s\n"
 
 msgid "Home directory path is not absolute"
-msgstr "Шлях да хатняга каталёґу ня ёсьць поўным"
+msgstr "Шлях да хатняга каталога не поўны"
 
 #, c-format
 msgid ""
@@ -3747,11 +3796,11 @@ msgid ""
 "%s\n"
 msgstr ""
 "\n"
-"Не ўдалося зачыніць:\n"
+"Не атрымалася закрыць:\n"
 "%s\n"
 
 msgid "Choose codepage"
-msgstr "Абярыце кадоўку"
+msgstr "Абраць кадаванне"
 
 msgid "-  < No translation >"
 msgstr "-  < Не ператвараць >"
@@ -3776,94 +3825,94 @@ msgid ""
 "Subshell support will be disabled."
 msgstr ""
 "На тэрмінале ўжо працуе іншы\n"
-"«Міднайт Камандэр».\n"
-"Убудаваная абалонка працаваць ня будзе."
+"«Midnight Commander».\n"
+"Убудаваная абалонка працаваць не будзе."
 
 #, c-format
 msgid "Cannot open named pipe %s\n"
-msgstr "Немагчыма адчыніць названы канал «%s»\n"
+msgstr "Немагчыма адкрыць названы канал «%s»\n"
 
 msgid "The shell is still active. Quit anyway?"
-msgstr "Абалонка яшчэ выкарыстоўваецца. Усё роўна выйсьці?"
+msgstr "Абалонка яшчэ выкарыстоўваецца. Усё роўна выйсці?"
 
 #, c-format
 msgid "Warning: Cannot change to %s.\n"
-msgstr "Перасьцярога: немагчыма перайсьці ў «%s».\n"
+msgstr "Увага: немагчыма перайсці ў «%s».\n"
 
 msgid "Using the S-Lang library with terminfo database\n"
-msgstr "Зь бібліятэкаю «S-Lang» і базаю «terminfo»\n"
+msgstr "З бібліятэкай «S-Lang» і базай «terminfo»\n"
 
 msgid "Using the ncurses library\n"
-msgstr "Зь бібліятэкаю «ncurses»\n"
+msgstr "З бібліятэкай «ncurses»\n"
 
 msgid "Using the ncursesw library\n"
-msgstr "Зь бібліятэкаю «ncursesw»\n"
+msgstr "З бібліятэкай «ncursesw»\n"
 
 msgid "With builtin Editor\n"
 msgstr "З убудаваным рэдактарам\n"
 
 msgid "With optional subshell support\n"
-msgstr "Зь неабавязковаю падтрымкаю ўбудаванае абалонкі\n"
+msgstr "З наладжваемай падтрымкай ўбудаванай абалонкі\n"
 
 msgid "With subshell support as default\n"
-msgstr "З падтрымкаю ўбудаванае абалонкі\n"
+msgstr "З падтрымкай ўбудаванай абалонкі\n"
 
 msgid "With support for background operations\n"
-msgstr "З падтрымкаю дзеяньняў на тле\n"
+msgstr "З падтрымкай дзеянняў у фоне\n"
 
 msgid "With mouse support on xterm and Linux console\n"
-msgstr "З падтрымкаю мышы ў «xterm» і кансолі «Linux»\n"
+msgstr "З падтрымкай мышы ў «xterm» і кансолі «Linux»\n"
 
 msgid "With mouse support on xterm\n"
-msgstr "З падтрымкаю мышы ў «xterm»\n"
+msgstr "З падтрымкай мышы ў «xterm»\n"
 
 msgid "With support for X11 events\n"
-msgstr "З падтрымкаю падзей X11\n"
+msgstr "З падтрымкай падзей X11\n"
 
 msgid "With internationalization support\n"
-msgstr "З падтрымкаю інтэрнацыяналізацыі\n"
+msgstr "З падтрымкай інтэрнацыяналізацыі\n"
 
 msgid "With multiple codepages support\n"
-msgstr "З падтрымкаю шматлікіх кадовак\n"
+msgstr "З падтрымкаю мноства кадаванняў\n"
 
 #, c-format
 msgid "Built with GLib %d.%d.%d\n"
-msgstr "Сабралі зь бібліятэкаю «GLib» вэрсіі %d.%d.%d\n"
+msgstr "Сабрана з бібліятэкай «GLib» версіі %d.%d.%d\n"
 
 #, c-format
 msgid "Virtual File Systems:"
-msgstr "Уяўныя файлавыя сыстэмы:"
+msgstr "Віртуальныя файлавыя сістэмы:"
 
 #, c-format
 msgid "Data types:"
-msgstr "Віды зьвестак:"
+msgstr "Тыпы даных:"
 
 msgid "Home directory:"
-msgstr ""
+msgstr "Хатні каталог:"
 
 msgid "Profile root directory:"
-msgstr ""
+msgstr "Каранёвы каталог профілю:"
 
 msgid "System data"
-msgstr "Сыстэмныя зьвесткі"
+msgstr "Сістэмныя даныя"
 
 msgid "Config directory:"
-msgstr "Каталёґ настаўленьняў:"
+msgstr "Каталог налад:"
 
 msgid "Data directory:"
-msgstr "Каталёґ зьвестак:"
+msgstr "Каталог даных :"
 
 msgid "File extension handlers:"
-msgstr ""
+msgstr "Скрыпты апрацоўкі файлаў па пашырэнні:"
 
 msgid "VFS plugins and scripts:"
-msgstr "Утулкі ды скрыпты УФС:"
+msgstr "Убудовы і скрыпты VFS:"
 
 msgid "User data"
-msgstr "Зьвесткі карыстальніка"
+msgstr "Даныя карыстальніка"
 
 msgid "Cache directory:"
-msgstr "Каталёґ запасьніку:"
+msgstr "Каталог кэша :"
 
 msgid "Debug"
 msgstr "Адсочваць хібы"
@@ -3878,44 +3927,44 @@ msgid "False:"
 msgstr "Несапраўдна:"
 
 msgid "Error calling program"
-msgstr "Не ўдалося выклікаць праґраму"
+msgstr "Не атрымалася выклікаць праграму"
 
 msgid "Warning -- ignoring file"
-msgstr "Перасьцярога: файл прапускаецца"
+msgstr "Увага: файл ігнаруецца"
 
 #, c-format
 msgid ""
 "File %s is not owned by root or you or is world writable.\n"
 "Using it may compromise your security"
 msgstr ""
-"Спраўнік (root) або вы не валодаеце файлам «%s», або яго могуць запісваць "
-"усе.\n"
-"З гледзішча бясьпекі ўжываць гэты файл рызыкоўна"
+"Суперкарыстальнік (root) або вы не валодаеце файлам %s, або яго могуць "
+"змяняць усе. \n"
+"Ужываць гэты файл рызыкоўна"
 
 msgid "Format error on file Extensions File"
-msgstr "Памылка ў разьметцы файла пашырэньняў"
+msgstr "Памылка ў фармаце файла пашырэння"
 
 #, c-format
 msgid "The %%var macro has no default"
-msgstr "Макрас «%%var» ня мае прадвызначана значэньня"
+msgstr "Макрас «%%var» не мае прадвызначанага значэння"
 
 #, c-format
 msgid "The %%var macro has no variable"
-msgstr "Макрас «%%var» ня мае зьменнае"
+msgstr "Макрас «%%var» не мае зменнай"
 
 #, c-format
 msgid "No suitable entries found in %s"
-msgstr "«%s» ня мае адпаведных запісаў"
+msgstr "«%s» няма адпаведных запісаў"
 
 msgid "User menu"
-msgstr "Мэню карыстальніка"
+msgstr "Меню карыстальніка"
 
 #, c-format
 msgid ""
 "Cannot open cpio archive\n"
 "%s"
 msgstr ""
-"Немагчыма адчыніць архіў cpio\n"
+"Немагчыма адкрыць архіў cpio\n"
 "%s"
 
 #, c-format
@@ -3933,14 +3982,14 @@ msgid ""
 "in cpio archive\n"
 "%s"
 msgstr ""
-"Несуладныя строгія спасылкі\n"
+"Несуладныя жорсткія спасылкі\n"
 "%s\n"
 "у архіве cpio\n"
 "%s"
 
 #, c-format
 msgid "%s contains duplicate entries! Skipping!"
-msgstr "«%s» зьмяшчае падвоеныя запісы! Прапускаем!"
+msgstr "«%s» змяшчае падвоеныя запісы! Прамінаем!"
 
 #, c-format
 msgid ""
@@ -3963,7 +4012,7 @@ msgid ""
 "Cannot open %s archive\n"
 "%s"
 msgstr ""
-"Немагчыма адчыніць архіў «%s»\n"
+"Немагчыма адкрыць архіў «%s»\n"
 "%s"
 
 msgid "Inconsistent extfs archive"
@@ -3971,14 +4020,14 @@ msgstr "Несуладны архіў ex
 
 #, c-format
 msgid "Warning: cannot open %s directory\n"
-msgstr "Перасьцярога: немагчыма адчыніць каталёґ «%s»\n"
+msgstr "Увага: немагчыма адкрыць каталог «%s»\n"
 
 #, c-format
 msgid "fish: Disconnecting from %s"
 msgstr "fish: адлучаемся ад «%s»"
 
 msgid "fish: Waiting for initial line..."
-msgstr "fish: чакаем на пачатковы радок…"
+msgstr "fish: чакаецца пачатковы радок…"
 
 msgid "Sorry, we cannot do password authenticated connections for now."
 msgstr "Пакуль немагчыма злучыцца і апазнацца паролем"
@@ -3988,47 +4037,47 @@ msgid "fish: Password is required for %s
 msgstr "fish: «%s» патрабуе пароль"
 
 msgid "fish: Sending password..."
-msgstr "fish: дасылаецца пароль…"
+msgstr "fish: адпраўляецца пароль…"
 
 msgid "fish: Sending initial line..."
-msgstr "fish: дасылаецца пачатковы радок…"
+msgstr "fish: адпраўляецца пачатковы радок…"
 
 msgid "fish: Handshaking version..."
-msgstr "fish: пацьвярджаецца вэрсія…"
+msgstr "fish: пацвярджаецца версія…"
 
 msgid "fish: Getting host info..."
-msgstr "fish: атрымваюцца зьвесткі пра вузел…"
+msgstr "fish: атрымліваюцца звесткі пра вузел…"
 
 #, c-format
 msgid "fish: Reading directory %s..."
-msgstr "fish: чытаецца каталёґ «%s»…"
+msgstr "fish: чытаецца каталог «%s»…"
 
 #, c-format
 msgid "%s: done."
-msgstr "%s: зрабілі."
+msgstr "%s: завершана ."
 
 #, c-format
 msgid "%s: failure"
-msgstr "%s: не ўдалося"
+msgstr "%s: не атрымалася"
 
 #, c-format
 msgid "fish: store %s: sending command..."
-msgstr "fish: захаваць «%s»: дасылаецца загад…"
+msgstr "fish: захаваць «%s»: адпраўляецца загад…"
 
 msgid "fish: Local read failed, sending zeros"
-msgstr "fish: не ўдалося прачытаць лякальнае, дасылаюцца нулі"
+msgstr "fish: не атрымалася прачытаць лакальнае, адпраўляюцца нулі"
 
 msgid "fish: storing file"
 msgstr "fish: захоўваецца файл"
 
 msgid "Aborting transfer..."
-msgstr "Перапыняем перадаваць…"
+msgstr "Перадача скасоўваецца…"
 
 msgid "Error reported after abort."
-msgstr "Выявілі памылку, калі перапынілі."
+msgstr "Пасля скасавання выяўлена памылка"
 
 msgid "Aborted transfer would be successful."
-msgstr "Перапынілі перадаваць."
+msgstr "Перадача скасаваная ."
 
 #, c-format
 msgid "ftpfs: Disconnecting from %s"
@@ -4039,27 +4088,27 @@ msgid "FTP: Password required for %s"
 msgstr "FTP: «%s» патрабуе пароль"
 
 msgid "ftpfs: sending login name"
-msgstr "ftpfs: дасылаецца імя карыстальніка"
+msgstr "ftpfs: адпраўляецца імя карыстальніка"
 
 msgid "ftpfs: sending user password"
-msgstr "ftpfs: дасылаецца пароль карыстальніка"
+msgstr "ftpfs: адпраўляецца пароль карыстальніка"
 
 #, c-format
 msgid "FTP: Account required for user %s"
-msgstr "FTP: карыстальніку «%s» трэба рахунак"
+msgstr "FTP: карыстальніку «%s» патрэбны рахунак"
 
 msgid "Account:"
 msgstr "Рахунак:"
 
 msgid "ftpfs: sending user account"
-msgstr "ftpfs: дасылаецца рахунак карыстальніка"
+msgstr "ftpfs: адпраўляецца рахунак карыстальніка"
 
 msgid "ftpfs: logged in"
 msgstr "ftpfs: увайшлі"
 
 #, c-format
 msgid "ftpfs: Login incorrect for user %s "
-msgstr "ftpfs: не ўдалося ўвайсьці карыстальнікам «%s» "
+msgstr "ftpfs: Хібнае імя карыстальніка «%s» "
 
 msgid "ftpfs: Invalid host name."
 msgstr "ftpfs: хібная назва вузла."
@@ -4073,57 +4122,57 @@ msgid "ftpfs: making connection to %s"
 msgstr "ftpfs: злучаемся з «%s»"
 
 msgid "ftpfs: connection interrupted by user"
-msgstr "ftpfs: карыстальнік перапыніў злучацца"
+msgstr "ftpfs: карыстальнік кінуў злучацца"
 
 #, c-format
 msgid "ftpfs: connection to server failed: %s"
-msgstr "ftpfs: не ўдалося злучыцца з паслужніком: %s"
+msgstr "ftpfs: не атрымалася злучыцца з серверам : %s"
 
 #, c-format
 msgid "Waiting to retry... %d (Control-G to cancel)"
-msgstr "Чакаем на яшчэ адну спробу… %d (скасаваць — «Ctrl-G»)"
+msgstr "Чакаецца яшчэ спроба… %d (скасаваць — «Ctrl-G»)"
 
 msgid "ftpfs: invalid address family"
 msgstr "ftpfs: хібная сям’я адрасоў"
 
 #, c-format
 msgid "ftpfs: could not create socket: %s"
-msgstr "ftpfs: нельга стварыць гняздо: %s"
+msgstr "ftpfs: нельга стварыць сокет: %s"
 
 msgid "ftpfs: could not setup passive mode"
-msgstr "ftpfs: нельга наставіць нядзейны спосаб"
+msgstr "ftpfs: нельга наладзіць пасіўны рэжым"
 
 msgid "ftpfs: aborting transfer."
-msgstr "ftpfs: перапыняем перадаваць."
+msgstr "ftpfs:  перадача скасоўваецца."
 
 #, c-format
 msgid "ftpfs: abort error: %s"
-msgstr "ftpfs: не ўдалося перапыніць: %s"
+msgstr "ftpfs: не атрымалася скасаваць : %s"
 
 msgid "ftpfs: abort failed"
-msgstr "ftpfs: не ўдалося перапыніць"
+msgstr "ftpfs: памылка падчас скасавання"
 
 msgid "ftpfs: CWD failed."
-msgstr "ftpfs: не ўдалося зьмяніць дзейны працоўны каталёґ."
+msgstr "ftpfs: не атрымалася змяніць дзейны працоўны каталог ."
 
 msgid "ftpfs: couldn't resolve symlink"
-msgstr "ftpfs: немагчыма разабраць сымбалічную спасылку"
+msgstr "ftpfs: немагчыма разабраць сімвалічную спасылку"
 
 msgid "Resolving symlink..."
-msgstr "Разьбіраецца сымбалічная спасылка…"
+msgstr "Разбіраецца сімвалічная спасылка…"
 
 #, c-format
 msgid "ftpfs: Reading FTP directory %s... %s%s"
-msgstr "ftpfs: чытаецца FTP-каталёґ «%s»… %s%s"
+msgstr "ftpfs: чытаецца FTP-каталог «%s»… %s%s"
 
 msgid "(strict rfc959)"
-msgstr "(абмежаваньне RFC959)"
+msgstr "(абмежаванне RFC959)"
 
 msgid "(chdir first)"
 msgstr "(спачатку «chdir»)"
 
 msgid "ftpfs: failed; nowhere to fallback to"
-msgstr "ftpfs: не ўдалося; няма куды вярнуцца ў аварыйны стан"
+msgstr "ftpfs: памылка; няма куды вярнуцца ў аварыйны стан"
 
 msgid "ftpfs: storing file"
 msgstr "ftpfs: захоўваецца файл"
@@ -4132,19 +4181,19 @@ msgid ""
 "~/.netrc file has incorrect mode\n"
 "Remove password or correct mode"
 msgstr ""
-"Файл «~/.netrc» мае няправільныя дазволы (ўласьніка).\n"
-"Выдаліце пароль або выпраўце дазволы (ўласьніка)."
+"У файла «~/.netrc»  няправільныя дазволы (ўласнік).\n"
+"Выдаліце пароль або выпраўце дазволы (ўласніка)."
 
 #, c-format
 msgid "%s: Warning: file %s not found\n"
-msgstr "%s: перасьцярога — не знайшлі файл «%s»\n"
+msgstr "%s: Увага: файл «%s» не знойдзены\n"
 
 #, c-format
 msgid ""
 "Warning: Invalid line in %s:\n"
 "%s\n"
 msgstr ""
-"Перасьцярога: хібны радок у «%s»:\n"
+"Увага: хібны радок у «%s»:\n"
 "%s\n"
 
 #, c-format
@@ -4152,12 +4201,12 @@ msgid ""
 "Warning: Invalid flag %c in %s:\n"
 "%s\n"
 msgstr ""
-"Перасьцярога: хібная пазнака «%c» у «%s»\n"
+"Увага: хібная пазнака «%c» у «%s»\n"
 "%s\n"
 
 #, c-format
 msgid "sftp: an error occurred while reading %s: %s"
-msgstr ""
+msgstr "sftp: не атрымалася прачытаць «%s»: «%s»"
 
 msgid "sftp: Unable to get current user name."
 msgstr "sftp: немагчыма атрымаць імя карыстальніка."
@@ -4174,72 +4223,76 @@ msgid "sftp: making connection to %s"
 msgstr "sftp: злучаемся з «%s»"
 
 msgid "sftp: connection interrupted by user"
-msgstr "sftp: карыстальнік перапыніў злучацца"
+msgstr "sftp: карыстальнік кінуў злучацца"
 
 #, c-format
 msgid "sftp: connection to server failed: %s"
-msgstr "sftp: не ўдалося злучыцца з паслужніком: %s"
+msgstr "sftp: не атрымалася злучыцца з серверам : %s"
 
 #, c-format
 msgid "sftp: Enter passphrase for %s "
-msgstr "sftp: упішыце таемны выраз на «%s» "
+msgstr "sftp: увядзіце парольную фразу для «%s» "
 
 msgid "sftp: Passphrase is empty."
-msgstr "sftp: таемны выраз парожні."
+msgstr "sftp: парольная фраза пустая."
 
 #, c-format
 msgid "sftp: Enter password for %s "
-msgstr "sftp: упішыце пароль на «%s» "
+msgstr "sftp: увядзіце пароль для «%s» "
 
 msgid "sftp: Password is empty."
-msgstr "sftp: пароль парожні."
+msgstr "sftp: пароль пусты."
 
 msgid "sftp: Failure establishing SSH session"
-msgstr ""
+msgstr "sftp: Збой стабілізацыі сеансу SSH"
 
 msgid "sftp: No file handler data present for reading file"
-msgstr "sftp: няма апрацоўніка, каб прачытаць файл"
+msgstr "sftp: няма апрацоўшчыка каб прачытаць файл"
+
+#, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: памылка сокета: %s"
 
 #, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
-msgstr "sftp: чытаецца сьпіс (спыніць — «Ctrl-G»)… %s"
+msgstr "sftp: чытаецца спіс (спыніць — «Ctrl-G»)… %s"
 
 msgid "sftp: Listing done."
-msgstr "sftp: сьпіс прачыталі."
+msgstr "sftp: спіс прачытаны."
 
 #, c-format
 msgid "reconnect to %s failed"
-msgstr "не ўдалося зноўку злучыцца з «%s»"
+msgstr "зноўку не атрымалася злучыцца з «%s»"
 
 msgid "Authentication failed"
-msgstr "Не ўдалося апазнацца"
+msgstr "Не атрымалася апазнацца"
 
 #, c-format
 msgid "Error %s creating directory %s"
-msgstr "Памылка (%s) ствараць каталёґ «%s»"
+msgstr "Памылка (%s) падчас стварэння каталога «%s»"
 
 #, c-format
 msgid "Error %s removing directory %s"
-msgstr "Памылка (%s) выдаляць каталёґ «%s»"
+msgstr "Памылка (%s) падчас выдалення каталога «%s»"
 
 #, c-format
 msgid "%s opening remote file %s"
-msgstr "%s, калі адчынялі адлеглы файл «%s»"
+msgstr "%s падчас адкрыцця адлеглага файла «%s»"
 
 #, c-format
 msgid "%s removing remote file %s"
-msgstr "%s, калі выдалялі адлеглы файл «%s»"
+msgstr "%s падчас выдалення адлеглага файла «%s»"
 
 #, c-format
 msgid "%s renaming files\n"
-msgstr "%s, калі называлі файлы\n"
+msgstr "%s падчас змены назвы файла\n"
 
 #, c-format
 msgid ""
 "Cannot open tar archive\n"
 "%s"
 msgstr ""
-"Немагчыма адчыніць архіў tar\n"
+"Немагчыма адкрыць архіў tar\n"
 "%s"
 
 msgid "Inconsistent tar archive"
@@ -4260,10 +4313,10 @@ msgid "undelfs: error"
 msgstr "undelfs: памылка"
 
 msgid "not enough memory"
-msgstr "бракуе памяці"
+msgstr "не хапае памяці"
 
 msgid "while allocating block buffer"
-msgstr "калі выдзялялі буфэр блёкаў"
+msgstr "пры атрыманні блока буферу"
 
 #, c-format
 msgid "open_inode_scan: %d"
@@ -4271,26 +4324,26 @@ msgstr "open_inode_scan: %d"
 
 #, c-format
 msgid "while starting inode scan %d"
-msgstr "калі пачыналі праглядаць вузел %d"
+msgstr "пры запуску сканавання вузла %d"
 
 #, c-format
 msgid "undelfs: loading deleted files information %d inodes"
-msgstr "undelfs: ладуюцца зьвесткі пра выдаленыя файлы %d вузлоў"
+msgstr "undelfs: загружаюцца звесткі пра выдаленыя файлы %d вузлоў"
 
 #, c-format
 msgid "while calling ext2_block_iterate %d"
-msgstr "калі выклікалі ext2_block_iterate %d"
+msgstr "падчас выкліку ext2_block_iterate %d"
 
 msgid "no more memory while reallocating array"
-msgstr "не хапіла памяці, калі нанова адчынялі масіў"
+msgstr "не хапіла памяці, калі нанова адкрывалі масіў"
 
 #, c-format
 msgid "while doing inode scan %d"
-msgstr "калі праглядалі вузел %d"
+msgstr "падчас прагляду вузла %d"
 
 #, c-format
 msgid "Cannot open file %s"
-msgstr "Немагчыма адчыніць файл «%s»"
+msgstr "Немагчыма адкрыць файл «%s»"
 
 msgid "undelfs: reading inode bitmap..."
 msgstr "undelfs: чытаецца бітавая мапа вузлоў…"
@@ -4300,66 +4353,66 @@ msgid ""
 "Cannot load inode bitmap from:\n"
 "%s"
 msgstr ""
-"Немагчыма заладаваць бітавую мапу вузлоў з:\n"
+"Немагчыма загрузіць бітавую мапу вузлоў з:\n"
 "%s"
 
 msgid "undelfs: reading block bitmap..."
-msgstr "undelfs: чытаецца бітавая мапа блёку…"
+msgstr "undelfs: чытанне бітавай мапы блока…"
 
 #, c-format
 msgid ""
 "Cannot load block bitmap from:\n"
 "%s"
 msgstr ""
-"Немагчыма прачытаць бітавую мапу блёку з:\n"
+"Немагчыма загрузіць бітавую мапу блока з:\n"
 "%s"
 
 msgid "vfs_info is not fs!"
-msgstr "vfs_info — ня файлавая сыстэма!"
+msgstr "vfs_info — не файлавая сістэма!"
 
 msgid "You have to chdir to extract files first"
-msgstr "Каб выняць файлы, трэба зьмяніць каталёґ"
+msgstr "Каб выняць файлы, патрэбна змяніць каталог"
 
 msgid "while iterating over blocks"
-msgstr "калі перабіралі блёкі"
+msgstr "пры пераборцы блокаў"
 
 #, c-format
 msgid "Cannot open file \"%s\""
-msgstr "Немагчыма адчыніць файл «%s»"
+msgstr "Немагчыма адкрыць файл «%s»"
 
 msgid "Ext2lib error"
 msgstr "Памылка «Ext2lib»"
 
 msgid "Invalid value"
-msgstr "Хібнае значэньне"
+msgstr "Хібнае значэнне"
 
 msgid "File was modified. Save with exit?"
-msgstr "Файл зьмяніўся. Ці захаваць і выйсьці?"
+msgstr "Файл змяніўся. Захаваць і выйсці?"
 
 msgid "&Cancel quit"
-msgstr "&Не выходзіць"
+msgstr "Не выходзіць(&С)"
 
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file?"
 msgstr ""
-"«Міднайт Камандэр» заканчвае працаваць.\n"
-"Ці захаваць зьменены файл?"
+"«Midnight Commander» закрываецца .\n"
+"Захаваць зменены файл?"
 
 msgid "&Line number"
-msgstr ""
+msgstr "Нумар радка(&L)"
 
 msgid "Pe&rcents"
-msgstr "&Адсоткі"
+msgstr "Адсоткі(&R)"
 
 msgid "&Decimal offset"
-msgstr "&Дзесятковы адступ"
+msgstr "Дзесятковы водступ(&D)"
 
 msgid "He&xadecimal offset"
-msgstr "&Шаснаццатковы адступ"
+msgstr "Шаснаццатковы водступ(&X)"
 
 msgid "Goto"
-msgstr "Перайсьці"
+msgstr "Перайсці да"
 
 msgid "ButtonBar|Ascii"
 msgstr "ASCII"
@@ -4368,16 +4421,16 @@ msgid "ButtonBar|HxSrch"
 msgstr "Шукаць"
 
 msgid "ButtonBar|UnWrap"
-msgstr "Разьвінуць"
+msgstr "Разгарнуць"
 
 msgid "ButtonBar|Wrap"
-msgstr "Пераносіць"
+msgstr "Згарнуць"
 
 msgid "ButtonBar|Hex"
 msgstr "Шаснаццатковы"
 
 msgid "ButtonBar|Goto"
-msgstr "Перайсьці"
+msgstr "Перайсці"
 
 msgid "ButtonBar|Raw"
 msgstr "Зыходны"
@@ -4386,16 +4439,18 @@ msgid "ButtonBar|Parse"
 msgstr "Разабраць"
 
 msgid "ButtonBar|Unform"
-msgstr "Неразьмечаны"
+msgstr "Нефарматавана"
 
 msgid "ButtonBar|Format"
-msgstr "Разьмеціць"
+msgstr "Фарматаванне"
 
 #, c-format
 msgid ""
 "Failed to read data from child stdout:\n"
 "%s"
 msgstr ""
+"Не атрымалася прачытаць даныя з нашчадка stdout:\n"
+"%s"
 
 #, c-format
 msgid ""
@@ -4403,9 +4458,9 @@ msgid ""
 "%s\n"
 "Data may have been written or not"
 msgstr ""
-"Памылка зачыняць файл:\n"
+"Памылка падчас закрыцця файла:\n"
 "%s\n"
-"Зьвесткі маглі як запісацца, так і не."
+"Даныя маглі як запісацца, так і не."
 
 #, c-format
 msgid ""
@@ -4416,30 +4471,32 @@ msgstr ""
 "%s"
 
 msgid "View: "
-msgstr "Праглядаць: "
+msgstr "Праглядзець : "
 
 #, c-format
 msgid ""
 "Cannot open \"%s\"\n"
 "%s"
 msgstr ""
-"Немагчыма адчыніць «%s»\n"
+"Немагчыма адкрыць «%s»\n"
 "%s"
 
 msgid "Cannot view: not a regular file"
-msgstr "Немагчыма прагледзець: незвычайны файл"
+msgstr "Немагчыма праглядзець: незвычайны файл"
 
 #, c-format
 msgid ""
 "Cannot open \"%s\" in parse mode\n"
 "%s"
 msgstr ""
+"Немагчыма адкрыць \"%s\" у рэжыме разбору\n"
+"%s"
 
 msgid "Search done"
-msgstr "Скончылі шукаць"
+msgstr "Пошук завершаны"
 
 msgid "Continue from beginning?"
-msgstr "Ці працягваць ад пачатку?"
+msgstr "Працягваць ад пачатку?"
 
 msgid "Cannot fetch a local copy of /ftp://some.host/editme.txt"
-msgstr ""
+msgstr "Немагчыма атрымаць лакальную копію /ftp://some.host/editme.txt"
Binary files mc-4.8.20/po/bg.gmo and mc-4.8.21/po/bg.gmo differ
diff -urpN mc-4.8.20/po/bg.po mc-4.8.21/po/bg.po
--- mc-4.8.20/po/bg.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/bg.po	2018-06-03 11:03:46.000000000 +0200
@@ -11,9 +11,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-23 18:02+0000\n"
-"Last-Translator: Myselus\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Bulgarian (http://www.transifex.com/mc/mc/language/bg/)\n"
 "Language: bg\n"
 "MIME-Version: 1.0\n"
@@ -664,6 +664,9 @@ msgstr "Принтиране на кон
 msgid "Print last working directory to specified file"
 msgstr "Принтиране на последната работна директория в определен файл"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Поддръжка на подобвивка (по подразбиране)"
 
@@ -676,12 +679,18 @@ msgstr "Записване на ftp-се
 msgid "Set debug level"
 msgstr "Задаване на ниво на дебъгване"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Показване съдържанието на файл"
 
 msgid "Edit files"
 msgstr "Редактиране на файлове"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Използване възможности на xterm"
 
@@ -722,6 +731,9 @@ msgstr "Поиск за стартира
 msgid "Specifies a color configuration"
 msgstr "Указва цветова конфигурация"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Показване на mc с определена тема"
 
@@ -1628,8 +1640,8 @@ msgstr ""
 "Удобен за потребителя текстови редактор\n"
 "написан за Midnight Commander-а."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "Относно"
@@ -1816,6 +1828,15 @@ msgstr ""
 "Не може да се chmod-не \"%s\"\n"
 "%s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "Отново"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1908,6 +1929,9 @@ msgstr "Cd следва линков&е
 msgid "Sa&fe delete"
 msgstr "Бе&зопасно изтриване"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "А&втоматично записване настройка"
 
@@ -2513,12 +2537,33 @@ msgstr ""
 "Не може да се създаде целевия символичен линк \"%s\"\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"и\n"
+"\"%s\"\n"
+"са една и съща папка"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"и\n"
+"\"%s\"\n"
+"са един и същи файл"
+
 msgid "Ski&p all"
 msgstr "Проп&ускане всички"
 
-msgid "&Retry"
-msgstr "Отново"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2542,23 +2587,19 @@ msgstr "никой"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Не може да се stat-не файл \"%s\"\n"
+"Не може да изтрие файл \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"и\n"
-"\"%s\"\n"
-"са един и същи файл"
+"Не може да се stat-не файл \"%s\"\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2574,36 +2615,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Не може да изтрие файл \"%s\"\n"
+"Не може да се изтрие директория \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Не може да се изтрие файл \"%s\"\n"
+"Не може да се презапише директория \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Не може да се изтрие директория \"%s\"\n"
+"Не може да се презапише файл \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Не може да се презапише директория \"%s\"\n"
+"Не може да се премести директория \"%s\" в \"%s\"\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Не може да работи върху \"..\"!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2769,40 +2813,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"и\n"
-"\"%s\"\n"
-"са една и съща папка"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Не може да се презапише файл \"%s\"\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Не може да се премести директория \"%s\" в \"%s\"\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Директории: %zu, общ размер %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Не може да работи върху \"..\"!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Съжалявам, не мога да поставя задачата във фона"
 
@@ -4218,6 +4231,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Няма съществуващ обработчик за четене на файл"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G прекъсване) Изреждане... %s"
 
Binary files mc-4.8.20/po/ca.gmo and mc-4.8.21/po/ca.gmo differ
diff -urpN mc-4.8.20/po/ca.po mc-4.8.21/po/ca.po
--- mc-4.8.20/po/ca.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/ca.po	2018-06-03 11:03:46.000000000 +0200
@@ -3,12 +3,12 @@
 # This file is distributed under the same license as the mc package.
 #
 # Translators:
-# Antoni Bella Pérez <antonibella5@yahoo.com>, 2017
+# Antoni Bella Pérez <antonibella5@yahoo.com>, 2017-2018
 # Daniel <danicases@gmail.com>, 2011
 # Daniel <danicases@gmail.com>, 2011-2012
 # Daniel <danicases@gmail.com>, 2012
 # el_libre como el chaval <el.libre@gmail.com>, 2011
-# Marc Tormo i Bochaca <mtbochaca@gmail.com>, 2015-2017
+# Marc Tormo i Bochaca <mtbochaca@gmail.com>, 2015-2018
 # Martin Steghöfer <martin@steghoefer.eu>, 2015
 # Martin Steghöfer <martin@steghoefer.eu>, 2015
 # Slava Zanko <slavazanko@gmail.com>, 2011
@@ -16,9 +16,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
-"Last-Translator: Antoni Bella Pérez <antonibella5@yahoo.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-05-21 16:46+0000\n"
+"Last-Translator: Marc Tormo i Bochaca <mtbochaca@gmail.com>\n"
 "Language-Team: Catalan (http://www.transifex.com/mc/mc/language/ca/)\n"
 "Language: ca\n"
 "MIME-Version: 1.0\n"
@@ -670,6 +670,9 @@ msgstr "Imprimeix les opcions de configu
 msgid "Print last working directory to specified file"
 msgstr "Imprimeix l'últim directori de treball cap al fitxer especificat"
 
+msgid "<file>"
+msgstr "<file>"
+
 msgid "Enables subshell support (default)"
 msgstr "Habilita el suport de subintèrprets (per defecte)"
 
@@ -682,14 +685,20 @@ msgstr "Enregistra el diàleg FTP al fit
 msgid "Set debug level"
 msgstr "Determina el nivell de depuració"
 
+msgid "<integer>"
+msgstr "<integer>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Llança el visor de fitxers amb un fitxer"
 
 msgid "Edit files"
 msgstr "Edita els fitxers"
 
+msgid "<file> ..."
+msgstr "<file> ..."
+
 msgid "Forces xterm features"
-msgstr "Força l'ús de les característiques de l'xterm"
+msgstr "Força l'ús de les característiques del xterm"
 
 msgid "Disable X11 support"
 msgstr "Inhabilita el suport X11"
@@ -701,7 +710,7 @@ msgid "Disable mouse support in text ver
 msgstr "Inhabilita el suport de ratolí a la versió text"
 
 msgid "Tries to use termcap instead of terminfo"
-msgstr "Prova a emprar el «termcap» en comptes del «terminfo»"
+msgstr "Prova de emprar el «termcap» en comptes del «terminfo»"
 
 msgid "To run on slow terminals"
 msgstr "Per a funcionar amb terminals lents"
@@ -729,6 +738,9 @@ msgstr "Demana que s'empri el mode en co
 msgid "Specifies a color configuration"
 msgstr "Especifica una configuració de color"
 
+msgid "<string>"
+msgstr "<string>"
+
 msgid "Show mc with specified skin"
 msgstr "Mostra l'«mc» amb el tema especificat"
 
@@ -1123,10 +1135,10 @@ msgid "Collect completions"
 msgstr "Recull completat"
 
 msgid "&Quick save"
-msgstr "Desat &ràpid"
+msgstr "Desament &ràpid"
 
 msgid "&Safe save"
-msgstr "Desat &segur"
+msgstr "Desament &segur"
 
 msgid "&Do backups with following extension:"
 msgstr "&Fes les còpies de seguretat amb la següent extensió:"
@@ -1135,7 +1147,7 @@ msgid "Check &POSIX new line"
 msgstr "Comprova la línia nova &POSIX"
 
 msgid "Edit Save Mode"
-msgstr "Edita el mode de desat"
+msgstr "Edita el mode de desament"
 
 msgid "Save as"
 msgstr "Desa com a"
@@ -1542,7 +1554,7 @@ msgid "&General..."
 msgstr "&General..."
 
 msgid "Save &mode..."
-msgstr "&Mode del desat..."
+msgstr "&Mode de desament..."
 
 msgid "Learn &keys..."
 msgstr "Defineix les &tecles..."
@@ -1653,8 +1665,8 @@ msgstr ""
 "Un editor de text fàcil d'emprar\n"
 "escrit per al Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 la Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr "Copyright (C) 1996-2018 la Free Software Foundation"
 
 msgid "About"
 msgstr "Quant a"
@@ -1795,7 +1807,7 @@ msgid ""
 "extra access permissions with the \"su\" command?"
 msgstr ""
 "El Midnight Commander no pot canviar al directori\n"
-"en el que el subintèrpret d'ordres afirma que es troba.\n"
+"en el qual el subintèrpret d'ordres afirma que es troba.\n"
 "Potser heu suprimit el directori de treball, o doneu-vos\n"
 "permisos d'accés addicionals amb l'ordre «su»?"
 
@@ -1841,6 +1853,15 @@ msgstr ""
 "No s'ha pogut fer chmod a «%s»\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "&Ignora"
+
+msgid "Ignore &all"
+msgstr "Ignor&a-ho tot"
+
+msgid "&Retry"
+msgstr "&Reintenta"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1933,6 +1954,9 @@ msgstr "El canvi de directori seguei&x e
 msgid "Sa&fe delete"
 msgstr "Suprimeix de &forma segura"
 
+msgid "Safe overwrite"
+msgstr "Sobre-escriptura segura"
+
 msgid "A&uto save setup"
 msgstr "Desa &automàticament la configuració"
 
@@ -2129,7 +2153,7 @@ msgid "cd"
 msgstr "Canvia de directori"
 
 msgid "Quick cd"
-msgstr "Canvia ràpid de directori"
+msgstr "Canvia ràpidament de directori"
 
 msgid "Existing filename (filename symlink will point to):"
 msgstr "Nom del fitxer existent (nom de fitxer on apuntarà l'enllaç):"
@@ -2537,12 +2561,33 @@ msgstr ""
 "No s'ha pogut crear l'enllaç simbòlic de destinació «%s»\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"«%s»\n"
+"i\n"
+"«%s»\n"
+"són el mateix directori"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"«%s»\n"
+"i\n"
+"«%s»\n"
+"són el mateix fitxer"
+
 msgid "Ski&p all"
 msgstr "Saltar &tot"
 
-msgid "&Retry"
-msgstr "&Reintenta"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2566,23 +2611,19 @@ msgstr "Ca&p"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"No s'ha pogut fer estat al fitxer «%s»\n"
+"No s'ha pogut eliminar el fitxer «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"«%s»\n"
-"i\n"
-"«%s»\n"
-"són el mateix fitxer"
+"No s'ha pogut fer estat al fitxer «%s»\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2598,36 +2639,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"No s'ha pogut eliminar el fitxer «%s»\n"
+"No s'ha pogut eliminar el directori «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"No s'ha pogut suprimir el fitxer «%s»\n"
+"No s'ha pogut sobreescriure el directori «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"No s'ha pogut eliminar el directori «%s»\n"
+"No s'ha pogut sobreescriure el fitxer «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"No s'ha pogut sobreescriure el directori «%s»\n"
+"No s'ha pogut moure el directori «%s» a «%s»\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "No es pot operar a «..»!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2793,40 +2837,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"«%s»\n"
-"i\n"
-"«%s»\n"
-"són el mateix directori"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"No s'ha pogut sobreescriure el fitxer «%s»\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"No s'ha pogut moure el directori «%s» a «%s»\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Directoris: %zu, mida total: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "No es pot operar a «..»!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Ho sentim, no hem pogut posar la tasca en segon pla"
 
@@ -3325,7 +3338,7 @@ msgid "&Mkdir"
 msgstr "Crea un &directori"
 
 msgid "&Quick cd"
-msgstr "Canvia ràpid de direct&ori"
+msgstr "Canvia ràpidament de direct&ori"
 
 msgid "Select &group"
 msgstr "Selecciona un &grup"
@@ -3858,10 +3871,10 @@ msgstr "Amb implementació per a operaci
 
 msgid "With mouse support on xterm and Linux console\n"
 msgstr ""
-"Amb la possibilitat d'emprar el ratolí a l'xterm i a la consola de Linux\n"
+"Amb la possibilitat d'emprar el ratolí al xterm i a la consola de Linux\n"
 
 msgid "With mouse support on xterm\n"
-msgstr "Amb la possibilitat d'emprar el ratolí a l'xterm.\n"
+msgstr "Amb la possibilitat d'emprar el ratolí al xterm.\n"
 
 msgid "With support for X11 events\n"
 msgstr "Amb la possibilitat d'emprar els esdeveniments de l'X11\n"
@@ -4248,6 +4261,10 @@ msgstr ""
 "sftp: no hi ha dades presents del gestor del fitxer per a llegir el fitxer"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: s'ha produït un error en el sòcol: %s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G per a cancel·lar) s'està llistant... %s"
 
Binary files mc-4.8.20/po/cs.gmo and mc-4.8.21/po/cs.gmo differ
diff -urpN mc-4.8.20/po/cs.po mc-4.8.21/po/cs.po
--- mc-4.8.20/po/cs.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/cs.po	2018-06-03 11:03:46.000000000 +0200
@@ -5,7 +5,7 @@
 # Translators:
 # Jiří Vírava <appukonrad@gmail.com>, 2015,2017
 # Karel Kopecky <kdkopx@protonmail.com>, 2017
-# Pavel Borecki <pavel.borecki@gmail.com>, 2017
+# Pavel Borecki <pavel.borecki@gmail.com>, 2017-2018
 # Radek Valášek <valin@buchlovice.org>, 2014
 # Robin Kriebel <kriebel.robin@gmail.com>, 2016
 # Slava Zanko <slavazanko@gmail.com>, 2011
@@ -13,46 +13,47 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-11-20 17:59+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-05-22 14:53+0000\n"
 "Last-Translator: Pavel Borecki <pavel.borecki@gmail.com>\n"
 "Language-Team: Czech (http://www.transifex.com/mc/mc/language/cs/)\n"
 "Language: cs\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=3; plural=(n==1) ? 0 : (n>=2 && n<=4) ? 1 : 2;\n"
+"Plural-Forms: nplurals=4; plural=(n == 1 && n % 1 == 0) ? 0 : (n >= 2 && n "
+"<= 4 && n % 1 == 0) ? 1: (n % 1 != 0 ) ? 2 : 3;\n"
 
 # "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 msgid "Warning: cannot load codepages list"
-msgstr "Varování: není možné nahrát seznam znakových sad"
+msgstr "Varování: nedaří se načíst seznam znakových sad"
 
 msgid "7-bit ASCII"
 msgstr "7-bit ASCII"
 
 #, c-format
 msgid "Cannot translate from %s to %s"
-msgstr "Nelze převést z %s na %s"
+msgstr "Nedaří převést z %s na %s"
 
 msgid "Event system already initialized"
 msgstr "Systém událostí už je inicializován"
 
 msgid "Failed to initialize event system"
-msgstr "Systém událostí nelze inicializovat"
+msgstr "Systém událostí inicializovat se nepodařilo inicializovat"
 
 msgid "Event system not initialized"
 msgstr "Systém událostí není inicializován"
 
 msgid "Check input data! Some of parameters are NULL!"
-msgstr "Zkontrolujte vstupní data! Některé parametry nejsou vyplněné!"
+msgstr "Zkontrolujte vstupní údaje! Některé parametry nejsou vyplněné!"
 
 #, c-format
 msgid "Unable to create group '%s' for events!"
-msgstr "Nelze vytvořit skupinu '%s' pro události!"
+msgstr "Nedaří se vytvořit skupinu \"%s\" pro události!"
 
 #, c-format
 msgid "Unable to create event '%s'!"
-msgstr "Nelze vytvořit událost '%s'!"
+msgstr "Nedaří vytvořit událost \"%s\"!"
 
 #, c-format
 msgid ""
@@ -60,9 +61,9 @@ msgid ""
 "User: %s\n"
 "Process ID: %d"
 msgstr ""
-"Soubor \"%s\" už je upravován.\n"
+"Soubor „%s“ už je upravován.\n"
 "Uživatel: %s\n"
-"Číslo procesu: %d"
+"Identifikátor procesu: %d"
 
 msgid "File locked"
 msgstr "Soubor zamčen"
@@ -75,7 +76,7 @@ msgstr "&Ignorovat zámek"
 
 #, c-format
 msgid "Cannot create %s directory"
-msgstr "Není možné vytvořit adresář %s"
+msgstr "Není možné vytvořit složku %s"
 
 msgid "FATAL: not a directory:"
 msgstr "FATÁLNÍ: není složkou:"
@@ -92,8 +93,8 @@ msgid ""
 "http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html"
 msgstr ""
 "Vaše stará nastavení byla migrována z %s\n"
-"do doporučených adresářů Freedesktop.\n"
-"Pro více informací prosím navštivte\n"
+"do složek dle doporučení Freedesktop.\n"
+"Další informace naleznete na\n"
 "http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html"
 
 #, c-format
@@ -122,7 +123,7 @@ msgid ""
 "Hex pattern error at position %d:\n"
 "%s."
 msgstr ""
-"Chyba v hexadecimálním zápisu na poziici %d:\n"
+"Chyba v hexadecimálním zápisu na pozici %d:\n"
 "%s."
 
 msgid "Search string not found"
@@ -145,10 +146,10 @@ msgid "No&rmal"
 msgstr "No&rmálně"
 
 msgid "Re&gular expression"
-msgstr "&Regulární výraz"
+msgstr "Re&gulární výraz"
 
 msgid "He&xadecimal"
-msgstr "Hexadecimání"
+msgstr "He&xadecimání"
 
 msgid "Wil&dcard search"
 msgstr "Hle&dání pomocí zástupných znaků"
@@ -158,8 +159,8 @@ msgid ""
 "Unable to load '%s' skin.\n"
 "Default skin has been loaded"
 msgstr ""
-"Nepodařilo se nahrát schéma vzhledu „%s“.\n"
-"Bylo nahráno výchozí téma vzhledu"
+"Nepodařilo se načíst schéma vzhledu „%s“.\n"
+"Bylo načteno výchozí téma vzhledu"
 
 #, c-format
 msgid ""
@@ -175,7 +176,7 @@ msgid ""
 "%s\n"
 "Default skin has been loaded"
 msgstr ""
-"Nelze použít '%s' vzhled s podporou 24 bitových barev::\n"
+"Nelze použít \"%s\" vzhled s podporou 24 bitových barev:\n"
 "%s\n"
 "Bylo nahráno výchozí téma vzhledu"
 
@@ -187,21 +188,21 @@ msgid ""
 msgstr ""
 "Nelze použít vzhled '%s' s podporou 256 barev\n"
 "na terminálu bez této podpory.\n"
-"Byl zvolen standartní vzhled"
+"Byl zvolen standardní vzhled"
 
 msgid "True color not supported with ncurses."
-msgstr "Knihovna ncurses nepodporuje 24 bitové barvy"
+msgstr "Knihovna ncurses nepodporuje 24 bitové barvy."
 
 msgid "True color not supported in this slang version."
-msgstr "24 bitové barvy nejsou podporovány v tomto nářečí"
+msgstr "24 bitové barvy nejsou podporovány v tomto nářečí."
 
 msgid "Your terminal doesn't even seem to support 256 colors."
-msgstr "Váš terminál pravděpodobně nepodporuje ani spektrum 256 barev"
+msgstr "Váš terminál pravděpodobně nepodporuje ani spektrum 256 barev."
 
 msgid "Set COLORTERM=truecolor if your terminal really supports true colors."
 msgstr ""
 "Nastavte \"COLORTERM=truecolor\", jestiže váš terminál skutečně podporuje "
-"spektrum 256 barev"
+"spektrum 256 barev."
 
 msgid "Escape"
 msgstr "Escape"
@@ -330,7 +331,7 @@ msgid "Down arrow keypad"
 msgstr "Šipka dolů na numerické klávesnici"
 
 msgid "Home on keypad"
-msgstr "Klávesa Home na numerické klávesnici"
+msgstr "Home na numerické klávesnici"
 
 msgid "End on keypad"
 msgstr "End na numerické klávesnici"
@@ -387,7 +388,7 @@ msgid "Great than"
 msgstr "Větší než"
 
 msgid "Equal"
-msgstr "Rovný"
+msgstr "Rovná se"
 
 msgid "Comma"
 msgstr "Čárka"
@@ -519,7 +520,7 @@ msgid "GiB"
 msgstr "GiB"
 
 msgid "Cannot create pipe descriptor"
-msgstr "Nelze vytvořit pipe deskriptor"
+msgstr "Nelze vytvořit popisovač roury"
 
 msgid "Cannot create pipe streams"
 msgstr "Nelze vytvořit sekvence příkazů (pipe streams)"
@@ -544,17 +545,17 @@ msgid "Warning"
 msgstr "Varování"
 
 msgid "Pipe failed"
-msgstr "pipe() selhalo"
+msgstr "pipe() se nezdařilo"
 
 msgid "Dup failed"
-msgstr "dup() selhalo"
+msgstr "dup() se nezdařilo"
 
 msgid "Error dup'ing old error pipe"
 msgstr "Chyba při duplikaci staré chybové roury"
 
 #, c-format
 msgid "Directory cache expired for %s"
-msgstr "Adresářová keš %s vypršela"
+msgstr "Platnost adresářové mezipaměti pro %s skončila"
 
 #, c-format
 msgid "%s: %s: %s %3d%% (%lld) bytes transferred"
@@ -575,11 +576,11 @@ msgstr "Změny souboru byly ztraceny"
 
 #, c-format
 msgid "%s is not a directory\n"
-msgstr "%s není adresář\n"
+msgstr "%s není složka\n"
 
 #, c-format
 msgid "Directory %s is not owned by you\n"
-msgstr "Nejste vlastníkem adresáře %s\n"
+msgstr "Nejste vlastníkem složky %s\n"
 
 #, c-format
 msgid "Cannot set correct permissions for directory %s\n"
@@ -598,7 +599,7 @@ msgid "Temporary files will not be creat
 msgstr "Dočasné soubory se nebudou vytvářet\n"
 
 msgid "Press any key to continue..."
-msgstr "Stiskněte libovolnou klávesu pro pokračování..."
+msgstr "Stiskněte libovolnou klávesu pro pokračování…"
 
 msgid "Cannot parse:"
 msgstr "Nelze analyzovat:"
@@ -607,7 +608,7 @@ msgid "More parsing errors will be ignor
 msgstr "Další chyby analýzy budou ignorovány."
 
 msgid "Internal error:"
-msgstr "Interní chyba:"
+msgstr "Vnitřní chyba:"
 
 msgid "Password:"
 msgstr "Heslo:"
@@ -638,7 +639,7 @@ msgid "&Cancel"
 msgstr "&Storno"
 
 msgid "Background process:"
-msgstr "Procesy na pozadí:"
+msgstr "Proces na pozadí:"
 
 msgid "Error"
 msgstr "Chyba"
@@ -651,40 +652,49 @@ msgid "&Abort"
 msgstr "&Přerušit"
 
 msgid "Displays the current version"
-msgstr "Zobrazí číslo aktuální verze"
+msgstr "Zobrazí stávající verzi"
 
 msgid "Print data directory"
-msgstr "Vypíše obsah složky"
+msgstr "Vypsat obsah složky"
 
 msgid "Print extended info about used data directories"
-msgstr "Zobrazit rozšířené info o použitých adresářích"
+msgstr "Zobrazit rozšířené informace o použitých složkách"
 
 msgid "Print configure options"
-msgstr "Zobrazit konfigurační možnosti"
+msgstr "Zobrazit volby nastavení"
 
 msgid "Print last working directory to specified file"
 msgstr "Zapíše poslední pracovní adresář do zadaného souboru"
 
+msgid "<file>"
+msgstr "<file>"
+
 msgid "Enables subshell support (default)"
-msgstr "Povolí podporu podshellu (standardní volba)"
+msgstr "Zapíná podporu podřízeného shellu (výchozí)"
 
 msgid "Disables subshell support"
-msgstr "Vypne podporu podshellu"
+msgstr "Vypíná podporu podřízeného shellu"
 
 msgid "Log ftp dialog to specified file"
-msgstr "Zapíše dialog ftp do zadaného souboru"
+msgstr "Zapsat ftp dialog do zadaného souboru"
 
 msgid "Set debug level"
 msgstr "Nastavit stupeň podrobnosti ladících informací"
 
+msgid "<integer>"
+msgstr "<integer>"
+
 msgid "Launches the file viewer on a file"
-msgstr "Odstartuje jako prohlížeč souboru"
+msgstr "Otevře soubor v prohlížeči"
 
 msgid "Edit files"
 msgstr "Upravit soubory"
 
+msgid "<file> ..."
+msgstr "<file> …"
+
 msgid "Forces xterm features"
-msgstr "Vnutí použití možností Xtermu"
+msgstr "Vynutí použití možností Xtermu"
 
 msgid "Disable X11 support"
 msgstr "Vypne podporu X11"
@@ -714,14 +724,17 @@ msgid "Don't load definitions of key bin
 msgstr "Nenačítat definice klávesových zkratek ze souboru, použít standartní"
 
 msgid "Requests to run in black and white"
-msgstr "Spustí se černobíle"
+msgstr "Vyžádá spuštění v černobílém režimu"
 
 msgid "Request to run in color mode"
-msgstr "Spustí se v barevném režimu"
+msgstr "Vyžádat spuštění v barevném režimu"
 
 msgid "Specifies a color configuration"
 msgstr "Určí nastavení barev"
 
+msgid "<string>"
+msgstr "<string>"
+
 msgid "Show mc with specified skin"
 msgstr "Zobrazit mc se zadaným tématem vzhledu"
 
@@ -802,7 +815,7 @@ msgid "file1 file2"
 msgstr "soubor1 soubor2"
 
 msgid "[this_dir] [other_panel_dir]"
-msgstr "[aktuální_adresář] [druhý_adresář_panelu]"
+msgstr "[aktuální_složka] [složka_druhého_panelu]"
 
 msgid ""
 "\n"
@@ -824,7 +837,7 @@ msgid "Terminal options"
 msgstr "Nastavení terminálu"
 
 msgid "Arguments parse error!"
-msgstr "Chyba parsovaní argumentů!"
+msgstr "Chyba vyhodnocování argumentů!"
 
 msgid "No arguments given to the viewer."
 msgstr "Prohlížeči nebyly zadány žádné parametry"
@@ -842,10 +855,10 @@ msgid "Background process error"
 msgstr "Chyba procesu na pozadí"
 
 msgid "Unknown error in child"
-msgstr "Neznámá chyba v potomku procesu"
+msgstr "Neznámá chyba v podřízeném procesu"
 
 msgid "Child died unexpectedly"
-msgstr "Potomek procesu neočekávaně umřel"
+msgstr "Podřízený proces neočekávaně ukončen"
 
 msgid ""
 "Background process sent us a request for more arguments\n"
@@ -855,13 +868,13 @@ msgstr ""
 "než dokážeme zvládnout."
 
 msgid "&Dismiss"
-msgstr "&Odmítnout"
+msgstr "O&dmítnout"
 
 msgid "Enter search string:"
 msgstr "Zadejte hledaný text:"
 
 msgid "Cas&e sensitive"
-msgstr "Všímat si velikos&ti písmen"
+msgstr "Rozliš. malá/velká písm&ena"
 
 msgid "&Backwards"
 msgstr "Po&zpátku"
@@ -870,13 +883,13 @@ msgid "&Whole words"
 msgstr "Pouze &celá slova"
 
 msgid "&All charsets"
-msgstr "Všechny z&nakové sady"
+msgstr "Všechny zn&akové sady"
 
 msgid "Search"
 msgstr "Hledat"
 
 msgid "Search is disabled"
-msgstr "Hledání je zakázáno"
+msgstr "Hledání je vypnuto"
 
 #, c-format
 msgid ""
@@ -892,7 +905,7 @@ msgid ""
 "%s%s\n"
 "%s"
 msgstr ""
-"Nelze vytvořit záložní soubor\n"
+"Nedaří se vytvořit záložní soubor\n"
 "%s%s\n"
 "%s"
 
@@ -901,23 +914,23 @@ msgid ""
 "Cannot create temporary merge file\n"
 "%s"
 msgstr ""
-"Nelze vytvořit dočasný spojený soubor\n"
+"Nedaří se vytvořit dočasný spojovací soubor\n"
 "%s"
 
 msgid "&Fastest (Assume large files)"
-msgstr "&Rychlý (Předpokládá velké soubory)"
+msgstr "&Nejrychlejší (předpokládány velké soubory)"
 
 msgid "&Minimal (Find a smaller set of change)"
 msgstr "&Minimální (Pokusí se nalézt nejmenší sadu změn)"
 
 msgid "Diff algorithm"
-msgstr "Algoritmus diffu"
+msgstr "Algoritmus hledání rozdílů"
 
 msgid "Diff extra options"
-msgstr "Další nastavení diffu"
+msgstr "Další nastavení nástroje diff"
 
 msgid "&Ignore case"
-msgstr "&Ignorovat velikost písmen"
+msgstr "Nerozl&išovat malá/velká písmena"
 
 msgid "Ignore tab &expansion"
 msgstr "Ignorovat změny v odsazení tabulátorem"
@@ -929,66 +942,66 @@ msgid "Ignore all &whitespace"
 msgstr "Ignorovat všechny mezery"
 
 msgid "Strip &trailing carriage return"
-msgstr "Odstranit ukončovací znak CR na vstupu"
+msgstr "Odstranit ukončovací znak konce řádku na vstupu"
 
 msgid "Diff Options"
-msgstr "Možnosti diffu"
+msgstr "Předvolby diff"
 
 msgid "Edit"
 msgstr "Upravit"
 
 msgid "Edit is disabled"
-msgstr "Úpravy jsou zakázány"
+msgstr "Úpravy jsou vypnuté"
 
 msgid "Goto line (left)"
-msgstr "Jdi na řádek (vlevo)"
+msgstr "Přejít na řádek (vlevo)"
 
 msgid "Goto line (right)"
-msgstr "Jdi na řádek (vpravo)"
+msgstr "Přejít na řádek (vpravo)"
 
 msgid "Enter line:"
 msgstr "Zadejte číslo řádku:"
 
 msgid "ButtonBar|Help"
-msgstr "TlačítkováLišta|Pomoc"
+msgstr "ButtonBar|Nápověda"
 
 msgid "ButtonBar|Save"
-msgstr "TlačítkováLišta|Uložit"
+msgstr "ButtonBar|Uložit"
 
 msgid "ButtonBar|Edit"
-msgstr "TlačítkováLišta|Uprav"
+msgstr "ButtonBar|Upravit"
 
 msgid "ButtonBar|Merge"
-msgstr "TlačítkováLišta|Spojit"
+msgstr "TlačítkováLišta|Sloučit"
 
 msgid "ButtonBar|Search"
-msgstr "TlačítkováLišta|Hledat"
+msgstr "ButtonBar|Hledat"
 
 msgid "ButtonBar|Options"
-msgstr "TlačítkováLišta|Nastav"
+msgstr "ButtonBar|Nastav"
 
 msgid "ButtonBar|Quit"
 msgstr "TlačítkováLišta|Konec"
 
 msgid "Quit"
-msgstr "Konec"
+msgstr "Ukončit"
 
 msgid "File(s) was modified. Save with exit?"
-msgstr "Soubor(y) byl upraven. Uložit a odejít?"
+msgstr "Soubory byl upraveny. Uložit před ukončením?"
 
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file(s)?"
 msgstr ""
-"Právě probíhá vypnutí Midnight Commanderu.\n"
-"Uložit upravený soubor(y)?"
+"Midnight Commander se ukončuje.\n"
+"Uložit upravené soubory?"
 
 msgid "Diff:"
-msgstr "Diff:"
+msgstr "Rozdíl:"
 
 #, c-format
 msgid "\"%s\" is a directory"
-msgstr "\"%s\" je adresářem"
+msgstr "„%s“ je složka"
 
 #, c-format
 msgid ""
@@ -999,26 +1012,26 @@ msgstr ""
 "%s"
 
 msgid "Diff viewer: invalid mode"
-msgstr "Diff prohížeč: neplatný mód"
+msgstr "Prohlížeč rozdílů: neplatný režim"
 
 msgid "Two files are needed to compare"
 msgstr "K porovnání jsou potřeba dva soubory"
 
 msgid "Choose syntax highlighting"
-msgstr "Vyber zvýraznění syntaxe"
+msgstr "Vyberte zvýraznění syntaxe"
 
 msgid "< Auto >"
 msgstr "< Auto >"
 
 msgid "< Reload Current Syntax >"
-msgstr "< Nahraj aktuální syntaxi >"
+msgstr "< Znovu načíst aktuální syntaxi >"
 
 #, c-format
 msgid "Loading: %3d%%"
-msgstr "Nahrát: %3d%%"
+msgstr "Načítání: %3d%%"
 
 msgid "Loading..."
-msgstr "Nahrává se..."
+msgstr "Načítání…"
 
 #, c-format
 msgid "Cannot open %s for reading"
@@ -1067,7 +1080,7 @@ msgid "File has hard-links. Detach befor
 msgstr "Soubor má pevné odkazy. Odpojit před uložením?"
 
 msgid "The file has been modified in the meantime. Save anyway?"
-msgstr "Soubor byl mezitím změněný. Opravdu uložit?"
+msgstr "Soubor byl mezitím změněn. Opravdu uložit?"
 
 #, c-format
 msgid "Error writing to pipe: %s"
@@ -1136,7 +1149,7 @@ msgid "Cannot save: destination is not a
 msgstr "Nelze uložit: cíl není běžným souborem"
 
 msgid "A file already exists with this name"
-msgstr "Soubor tohoto jména již existuje"
+msgstr "Takto nazvaný soubor už existuje"
 
 msgid "&Overwrite"
 msgstr "&Přepsat"
@@ -1163,7 +1176,7 @@ msgid "Repeat last commands"
 msgstr "Opakovat poslední příkazy"
 
 msgid "Repeat times:"
-msgstr "Opakovat kolikrát:"
+msgstr "Kolikrát opakovat:"
 
 #, c-format
 msgid "Confirm save file: \"%s\""
@@ -1188,13 +1201,13 @@ msgid "&User"
 msgstr "&Uživatel"
 
 msgid "&System wide"
-msgstr "&Přes celý systém"
+msgstr "Pro celý &systém"
 
 msgid "Menu edit"
-msgstr "Úpravy menu"
+msgstr "Úpravy nabídky"
 
 msgid "Which menu file do you want to edit?"
-msgstr "Který soubor menu chcete upravit?"
+msgstr "Soubor které nabídky chcete upravit?"
 
 msgid "&Local"
 msgstr "&Lokální"
@@ -1207,7 +1220,7 @@ msgid "%ld replacements made"
 msgstr "Provedeno %ld nahrazení"
 
 msgid "[NoName]"
-msgstr "[beze jména]"
+msgstr "[beze názvu]"
 
 #, c-format
 msgid ""
@@ -1241,7 +1254,7 @@ msgid "Cut to clipboard"
 msgstr "Vyjmout do schránky"
 
 msgid "Goto line"
-msgstr "Jdi na řádek"
+msgstr "Jít na řádek"
 
 msgid "Save block"
 msgstr "Uložit blok"
@@ -1256,13 +1269,13 @@ msgid "Sort block"
 msgstr "Setřídit blok"
 
 msgid "You must first highlight a block of text"
-msgstr "Nejdříve je třeba označit blok textu"
+msgstr "Nejprve je třeba označit blok textu"
 
 msgid "Run sort"
 msgstr "Spustit třídění"
 
 msgid "Enter sort options (see manpage) separated by whitespace:"
-msgstr "Vložte parametry pro třídění (viz man sort) oddělené mezerami:"
+msgstr "Zadejte předvolby pro třídění (viz man sort) oddělované mezerami:"
 
 msgid "Sort"
 msgstr "Setřídit"
@@ -1272,19 +1285,19 @@ msgstr "Chyba při spouštění příkaz
 
 #, c-format
 msgid "Sort returned non-zero: %s"
-msgstr "Sort vrátil nenulovou hodnotu: %s"
+msgstr "Sort vrátilo nenulovou hodnotu: %s"
 
 msgid "Paste output of external command"
-msgstr "Vložte výstup externího příkazu"
+msgstr "Vložte výstup vnějšího příkazu"
 
 msgid "Enter shell command(s):"
 msgstr "Zadejte shellový(é) příkaz(y):"
 
 msgid "External command"
-msgstr "Externí příkaz"
+msgstr "Vnější příkaz"
 
 msgid "Cannot execute command"
-msgstr "Nemohu spustit příkaz"
+msgstr "Nedaří se spustit příkaz"
 
 msgid "mail -s <subject> -c <cc> <to>"
 msgstr "mail -s <předmět> -c <kopie> <komu>"
@@ -1296,7 +1309,7 @@ msgid "Subject"
 msgstr "Předmět"
 
 msgid "Copies to"
-msgstr "Kopie do"
+msgstr "Kopie na"
 
 msgid "Mail"
 msgstr "E-mail"
@@ -1321,25 +1334,25 @@ msgid "&Find all"
 msgstr "&Najít všechny"
 
 msgid "Enter replacement string:"
-msgstr "Zadejte náhradní text:"
+msgstr "Zadejte nahrazující text:"
 
 msgid "Replace with:"
 msgstr "Nahradit textem:"
 
 msgid "&Replace"
-msgstr "&Nahradit"
+msgstr "Nah&radit"
 
 msgid "A&ll"
 msgstr "&Všechny"
 
 msgid "&Skip"
-msgstr "&Přeskočit"
+msgstr "Pře&skočit"
 
 msgid "Confirm replace"
 msgstr "Potvrdit náhradu"
 
 msgid "Cancel"
-msgstr "Zrušit"
+msgstr "Storno"
 
 msgid ""
 "Current text was modified without a file save.\n"
@@ -1349,10 +1362,10 @@ msgstr ""
 "Pokračováním se změny ztratí."
 
 msgid "NoName"
-msgstr "Beze jména"
+msgstr "Beze názvu"
 
 msgid "&Open file..."
-msgstr "&Otevřít soubor..."
+msgstr "&Otevřít soubor…"
 
 msgid "&New"
 msgstr "&Nový"
@@ -1361,19 +1374,19 @@ msgid "&Close"
 msgstr "&Zavřít"
 
 msgid "Save &as..."
-msgstr "Uložit &jako..."
+msgstr "Uložit j&ako…"
 
 msgid "&Insert file..."
-msgstr "&Vložit soubor..."
+msgstr "Vlož&it soubor…"
 
 msgid "Cop&y to file..."
-msgstr "Zkopírovat do &souboru..."
+msgstr "Zkopírovat do &souboru…"
 
 msgid "&User menu..."
-msgstr "Uživatelské &menu..."
+msgstr "&Uživatelská nabídka…"
 
 msgid "A&bout..."
-msgstr "&O aplikaci..."
+msgstr "&O aplikaci…"
 
 msgid "&Quit"
 msgstr "&Konec"
@@ -1385,7 +1398,7 @@ msgid "&Redo"
 msgstr "&Znovu"
 
 msgid "&Toggle ins/overw"
-msgstr "Přepnout &vkládání/přepis"
+msgstr "Přepnou&t vkládání/přepis"
 
 msgid "To&ggle mark"
 msgstr "&Přepnout označení"
@@ -1409,31 +1422,31 @@ msgid "&Delete"
 msgstr "&Smazat"
 
 msgid "Co&py to clipfile"
-msgstr "&Zkopírovat do ústřižku"
+msgstr "Zko&pírovat do ústřižku"
 
 msgid "&Cut to clipfile"
 msgstr "&Vyjmout do ústřižku"
 
 msgid "Pa&ste from clipfile"
-msgstr "V&ložit z ústřižku"
+msgstr "Vložit z ú&střižku"
 
 msgid "&Beginning"
 msgstr "&Začátek"
 
 msgid "&End"
-msgstr "&Konec"
+msgstr "Kon&ec"
 
 msgid "&Search..."
 msgstr "&Hledat..."
 
 msgid "Search &again"
-msgstr "Hledat &znovu"
+msgstr "Hled&at znovu"
 
 msgid "&Replace..."
-msgstr "&Nahradit..."
+msgstr "Nah&radit…"
 
 msgid "&Toggle bookmark"
-msgstr "Přepnout zá&ložku"
+msgstr "Přepnou&t záložku"
 
 msgid "&Next bookmark"
 msgstr "&Další záložka"
@@ -1445,7 +1458,7 @@ msgid "&Flush bookmarks"
 msgstr "&Zrušit záložky"
 
 msgid "&Go to line..."
-msgstr "&Jdi na řádek..."
+msgstr "&Jít na řádek…"
 
 msgid "&Toggle line state"
 msgstr "Přepnout &zobrazení řádků"
@@ -1460,40 +1473,40 @@ msgid "&Find declaration"
 msgstr "Najít deklaraci"
 
 msgid "Back from &declaration"
-msgstr "Zpět z deklarace"
+msgstr "Zpět z &deklarace"
 
 msgid "For&ward to declaration"
 msgstr "Přejít k deklaraci"
 
 msgid "Encod&ing..."
-msgstr "&Kódování..."
+msgstr "&Kódování…"
 
 msgid "&Refresh screen"
-msgstr "&Obnovit obrazovku"
+msgstr "Přek&reslit obrazovku"
 
 msgid "&Start/Stop record macro"
 msgstr "&Spuštění/Zastavení záznamu makra"
 
 msgid "Delete macr&o..."
-msgstr "&Smazat makro..."
+msgstr "Smazat makr&o…"
 
 msgid "Record/Repeat &actions"
-msgstr "Nahrát/Opakovat &kroky"
+msgstr "Z&aznamenat/Opakovat kroky"
 
 msgid "S&pell check"
-msgstr "K&ontrola pravopisu"
+msgstr "Kontrola &pravopisu"
 
 msgid "C&heck word"
-msgstr "K&ontrola slova"
+msgstr "K&ontrola slov"
 
 msgid "Change spelling &language..."
-msgstr "Změnit pravopis a jazyk..."
+msgstr "Změnit jazyk pravopisu…"
 
 msgid "&Mail..."
-msgstr "&Pošta..."
+msgstr "&E-mail…"
 
 msgid "Insert &literal..."
-msgstr "Vložit &znak..."
+msgstr "Vložit &znak…"
 
 msgid "Insert &date/time"
 msgstr "Vložit &datum/čas"
@@ -1502,13 +1515,13 @@ msgid "&Format paragraph"
 msgstr "Pře&formátovat odstavec"
 
 msgid "&Sort..."
-msgstr "&Pořadí..."
+msgstr "&Seřadit…"
 
 msgid "&Paste output of..."
-msgstr "Vložit &výstup..."
+msgstr "Vložit výstu&p…"
 
 msgid "&External formatter"
-msgstr "E&xterní formátovač"
+msgstr "&Vnější nástroj pro formátování"
 
 msgid "&Move"
 msgstr "&Přesun"
@@ -1526,25 +1539,25 @@ msgid "&Previous"
 msgstr "&Předchozí"
 
 msgid "&List..."
-msgstr "&List..."
+msgstr "&Výpis…"
 
 msgid "&General..."
-msgstr "&Obecné..."
+msgstr "&Obecné…"
 
 msgid "Save &mode..."
-msgstr "&Režim ukládání..."
+msgstr "Reži&m ukládání…"
 
 msgid "Learn &keys..."
-msgstr "Učení &kláves..."
+msgstr "Učení &kláves…"
 
 msgid "Syntax &highlighting..."
-msgstr "Zvýraznění synta&xe..."
+msgstr "Zvýraznění synta&xe…"
 
 msgid "S&yntax file"
 msgstr "Soubor se s&yntaxí"
 
 msgid "&Menu file"
-msgstr "Soubor s &menu"
+msgstr "Soubor s nabídkou"
 
 msgid "&Save setup"
 msgstr "Uložit na&stavení"
@@ -1577,13 +1590,13 @@ msgid "&Dynamic paragraphing"
 msgstr "&Dynamické odstavce"
 
 msgid "Type &writer wrap"
-msgstr ""
+msgstr "&Zalamování jako na psacím stroji"
 
 msgid "Wrap mode"
 msgstr "Režim zalamování"
 
 msgid "Tabulation"
-msgstr "Tabulka"
+msgstr "Odsazování"
 
 msgid "&Fake half tabs"
 msgstr "&Falešné poloviční tabulátory"
@@ -1601,13 +1614,13 @@ msgid "Other options"
 msgstr "Další nastavení"
 
 msgid "&Return does autoindent"
-msgstr "&Return automaticky odsadí"
+msgstr "&Enter automaticky odsadí"
 
 msgid "Confir&m before saving"
-msgstr "&Potvrdit před uložením"
+msgstr "Potvrdit před uložení&m"
 
 msgid "Save file &position"
-msgstr "&Uložit pozici v souboru"
+msgstr "Uložit &pozici v souboru"
 
 msgid "&Visible trailing spaces"
 msgstr "&Viditelné mezery na konci"
@@ -1628,10 +1641,10 @@ msgid "Cursor be&yond end of line"
 msgstr "&Kurzor za koncem řádku"
 
 msgid "&Group undo"
-msgstr ""
+msgstr "&Skupinové vzetí zpět"
 
 msgid "Word wrap line length:"
-msgstr "Šířka řádku pro zlom:"
+msgstr "Délka řádku pro zalomení slova:"
 
 msgid "Editor options"
 msgstr "Nastavení editoru"
@@ -1643,8 +1656,8 @@ msgstr ""
 "Uživatelsky přívětivý textový editor\n"
 "napsaný pro Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr "Copyright (C) 1996-2018 the Free Software Foundation"
 
 msgid "About"
 msgstr "O programu"
@@ -1656,22 +1669,22 @@ msgid "Edit: "
 msgstr "Upravit: "
 
 msgid "ButtonBar|Mark"
-msgstr "TlačítkováLišta|Označ"
+msgstr "ButtonBar|Označ"
 
 msgid "ButtonBar|Replac"
-msgstr "TlačítkováLišta|Nahraď"
+msgstr "ButtonBar|Nahraď"
 
 msgid "ButtonBar|Copy"
-msgstr "TlačítkováLišta|Kopie"
+msgstr "ButtonBar|Kopie"
 
 msgid "ButtonBar|Move"
-msgstr "TlačítkováLišta|Přesun"
+msgstr "ButtonBar|Přesun"
 
 msgid "ButtonBar|Delete"
-msgstr "TlačítkováLišta|Smazat"
+msgstr "ButtonBar|Smazat"
 
 msgid "ButtonBar|PullDn"
-msgstr "TlačítkováLišta|H.Menu"
+msgstr "ButtonBar|Hl. nabíd"
 
 msgid "Breton"
 msgstr "Bretonština"
@@ -1731,7 +1744,7 @@ msgid "Portuguese"
 msgstr "Portugalština"
 
 msgid "Romanian"
-msgstr "Ruminština"
+msgstr "Rumunština"
 
 msgid "Russian"
 msgstr "Ruština"
@@ -1771,12 +1784,12 @@ msgid ""
 "Cannot open file %s\n"
 "%s"
 msgstr ""
-"Nelze otevřít soubor %s\n"
+"Nedaří se otevřít soubor %s\n"
 "%s"
 
 #, c-format
 msgid "Error in file %s on line %d"
-msgstr "Chyba v souboru %s na řádce %d"
+msgstr "Chyba v souboru %s na řádku %d"
 
 msgid ""
 "The Commander can't change to the directory that\n"
@@ -1784,29 +1797,30 @@ msgid ""
 "deleted your working directory, or given yourself\n"
 "extra access permissions with the \"su\" command?"
 msgstr ""
-"Midnight Commander nemůže změnit adresář na ten,\n"
-"který mu oznámil podshell.  Je to pravděpodobně proto,\n"
-"že byl tento adresář smazán nebo také proto, že jste se\n"
-"do tohoto adresáře přepnuli pomocí příkazu „su“."
+"Aplikaci Midnight Commander se nedaří přejít do\n"
+"složky, kterou mu oznámil podřízený shell. Nejspíš\n"
+"je to tím, že byla tato složka smazána nebo také\n"
+"proto, že jste do ní přešli se zvýšenými \n"
+"oprávněními (su, sudo)?"
 
 #, c-format
 msgid "Cannot fetch a local copy of %s"
-msgstr "Nelze vyrobit lokální kopii souboru %s"
+msgstr "Nedaří se získat místní kopii souboru %s"
 
 msgid "The shell is already running a command"
-msgstr "Shell už provádí příkaz"
+msgstr "V shellu je už spuštěný příkaz"
 
 msgid "Type 'exit' to return to the Midnight Commander"
-msgstr "Zadejte příkaz 'exit' pro návrat do Midnight Commanderu"
+msgstr "Do Midnight Commander se vrátíte zadáním příkazu „exit“"
 
 msgid "Set &all"
-msgstr "Nastavit &vše"
+msgstr "N&astavit vše"
 
 msgid "S&kip"
-msgstr "&Přeskočit"
+msgstr "Přes&kočit"
 
 msgid "&Set"
-msgstr "&Nastavit"
+msgstr "Na&stavit"
 
 msgid "owner"
 msgstr "vlastník"
@@ -1818,7 +1832,7 @@ msgid "other"
 msgstr " ostatní"
 
 msgid "Flag"
-msgstr "Práva"
+msgstr "Příznak"
 
 msgid "Chown advanced command"
 msgstr "Rozšířená změna vlastníka"
@@ -1828,28 +1842,37 @@ msgid ""
 "Cannot chmod \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze změnit práva souboru „%s“\n"
+"Práva „%s“ se nedaří změnit\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "&Ignorovat"
+
+msgid "Ignore &all"
+msgstr "Ignorov&at vše"
+
+msgid "&Retry"
+msgstr "&Zkusit znovu"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze změnit vlastníka souboru „%s“\n"
+"Nedaří se změnit vlastníka souboru „%s“\n"
 "%s"
 
 msgid "< Default >"
 msgstr "< Výchozí >"
 
 msgid "Skins"
-msgstr "Vzhledy"
+msgstr "Schémata vzhledu"
 
 msgid "Other 8 bit"
 msgstr "Ostatní 8 bitů"
 
 msgid "Running"
-msgstr "Běží"
+msgstr "Spuštěné"
 
 msgid "Stopped"
 msgstr "Zastaveno"
@@ -1867,82 +1890,85 @@ msgid "File operations"
 msgstr "Operace se soubory"
 
 msgid "&Verbose operation"
-msgstr "„Upovídaně&jší“ operace"
+msgstr "„Upo&vídanější“ operace"
 
 msgid "Compute tota&ls"
 msgstr "Počíta&t součty"
 
 msgid "Classic pro&gressbar"
-msgstr "Klasický progressbar"
+msgstr "&Klasický ukazatel postupu"
 
 msgid "Mkdi&r autoname"
-msgstr "Mkdir autonázev"
+msgstr "Vytvořit automaticky nazvanou složku"
 
 msgid "&Preallocate space"
 msgstr "&Předem přidělit prostor"
 
 msgid "Esc key mode"
-msgstr "Mód Escape klávesy"
+msgstr "Režim klávesy Esc"
 
 msgid "S&ingle press"
-msgstr "Jediný stisk"
+msgstr "Jed&iný stisk"
 
 msgid "Timeout:"
-msgstr "Timeout:"
+msgstr "Překročení časového limitu:"
 
 msgid "Pause after run"
 msgstr "Čekat po ukončení"
 
 msgid "Use internal edi&t"
-msgstr "Použít interní e&ditor"
+msgstr "Použít vestavěný edi&tor"
 
 msgid "Use internal vie&w"
-msgstr "Použít interní prohlíž&eč"
+msgstr "Použít vestavěný prohlíž&eč"
 
 msgid "A&sk new file name"
-msgstr ""
+msgstr "Zeptat &se na nový soubor"
 
 msgid "Auto m&enus"
-msgstr "Automatické &menu"
+msgstr "&Automatické nabídky"
 
 msgid "&Drop down menus"
-msgstr "Rolovat menu dolů"
+msgstr "Rozbalovací nabí&dky"
 
 msgid "S&hell patterns"
-msgstr ""
+msgstr "Vzory jako v s&hellu"
 
 msgid "Co&mplete: show all"
-msgstr "Doplňování: ukázat vše"
+msgstr "&Doplňování: ukázat vše"
 
 msgid "Rotating d&ash"
-msgstr "Rotující &/"
+msgstr "&Točící se dopředné lomítko"
 
 msgid "Cd follows lin&ks"
-msgstr "&cd následuje odkazy"
+msgstr "cd následuje od&kazy"
 
 msgid "Sa&fe delete"
 msgstr "&Bezpečné mazání"
 
+msgid "Safe overwrite"
+msgstr "Bezpečné přepsání"
+
 msgid "A&uto save setup"
-msgstr "&Automatické ukládání parametrů"
+msgstr "A&utomatické ukládání parametrů"
 
 msgid "Configure options"
 msgstr "Změna nastavení"
 
 msgid "Skin:"
-msgstr "Vzhled:"
+msgstr "Schéma vzhledu:"
 
 msgid "Appearance"
 msgstr "Vzhled"
 
 msgid "Case &insensitive"
-msgstr "Nevšímat si velikos&ti písmen"
+msgstr "Nerozl&išovat malá/velká písmena"
 
 msgid "Use panel sort mo&de"
-msgstr "Použít režim třídění panelu"
+msgstr "Použít režim, ve kterém je tříděno v panelu"
 
 msgid "Show mi&ni-status"
-msgstr ""
+msgstr "Zobrazovat mi&ni stav"
 
 msgid "Use SI si&ze units"
 msgstr "Používat &SI jednotky velikosti"
@@ -1957,7 +1983,7 @@ msgid "Show &hidden files"
 msgstr "Ukázat s&kryté soubory"
 
 msgid "&Fast dir reload"
-msgstr "&Rychlé načítání adresářů"
+msgstr "&Rychlé znovunačítání složek"
 
 msgid "Ma&rk moves down"
 msgstr "Označení &posune dolů"
@@ -1966,34 +1992,34 @@ msgid "Re&verse files only"
 msgstr "&Pozpátku pouze soubory"
 
 msgid "Simple s&wap"
-msgstr ""
+msgstr "&Jednoduché prohození"
 
 msgid "A&uto save panels setup"
-msgstr "&Automatické ukládání nastavení panelů"
+msgstr "A&utomatické ukládání nastavení panelů"
 
 msgid "Navigation"
 msgstr "Navigace"
 
 msgid "L&ynx-like motion"
-msgstr "Pohyb jako v lyn&xu"
+msgstr "Pohyb jako v prohlížeči l&ynx"
 
 msgid "Pa&ge scrolling"
-msgstr "Posun stránky"
+msgstr "&Posun stránky"
 
 msgid "Center &scrolling"
-msgstr ""
+msgstr "Vystředit po&souvání"
 
 msgid "&Mouse page scrolling"
-msgstr "Posun stránky myší"
+msgstr "Posun stránky &myší"
 
 msgid "File highlight"
-msgstr "Zvýraznění"
+msgstr "Zvýraznění souboru"
 
 msgid "File &types"
 msgstr "&Typy souborů"
 
 msgid "&Permissions"
-msgstr "Práva"
+msgstr "&Práva"
 
 msgid "Quick search"
 msgstr "Rychlé hledání"
@@ -2010,19 +2036,19 @@ msgid ""
 "manual reload of the directory. See the man page for\n"
 "the details."
 msgstr ""
-"Použitím rychlého načítání adresářů nebude někdy obsah\n"
-"adresáře přesně odpovídat obsahu panelu. V tom případě\n"
-"použijte ruční načtení obsahu adresáře (manual reload).\n"
+"Použitím rychlého znovunačítání složek nebude někdy obsah\n"
+"složky přesně odpovídat obsahu panelu. V tom případě\n"
+"použijte ruční načtení obsahu složky.\n"
 "Podrobnosti se dozvíte v manuálové stránce."
 
 msgid "&Full file list"
-msgstr "&Plný seznam souborů"
+msgstr "Ú&plný seznam souborů"
 
 msgid "&Brief file list:"
 msgstr "&Stručný seznam souborů:"
 
 msgid "&Long file list"
-msgstr "&Dlouhý seznam souborů"
+msgstr "D&louhý seznam souborů"
 
 msgid "&User defined:"
 msgstr "&Vlastní formát:"
@@ -2059,7 +2085,7 @@ msgid "Confirmation|E&xit"
 msgstr "Confirmation|&Ukončení"
 
 msgid "Confirmation|Di&rectory hotlist delete"
-msgstr "Confirmation|Smazání hotlistu &adresářů"
+msgstr "Confirmation|Smazání r&ychlého přístupu"
 
 msgid "Confirmation|&History cleanup"
 msgstr "Confirmation|Smazání &historie"
@@ -2086,28 +2112,28 @@ msgid "Display bits"
 msgstr "Zobrazení bitů"
 
 msgid "Input / display codepage:"
-msgstr "Vstupní/zobrazovací codepage:"
+msgstr "Znaková sada pro vstup/zobrazení:"
 
 msgid "Directory tree"
-msgstr "Strom adresářů"
+msgstr "Strom složek"
 
 msgid "Timeout for freeing VFSs (sec):"
-msgstr "Časový limit pro uvolnění  VFS (sec):"
+msgstr "Časový limit pro uvolnění VFS souborových systémů (sec):"
 
 msgid "FTP anonymous password:"
 msgstr "Heslo pro anonymní FTP:"
 
 msgid "FTP directory cache timeout (sec):"
-msgstr "Časový limit mezipaměti FTP adresáře (sec):"
+msgstr "Časový limit FTP mezipaměti složek (sec):"
 
 msgid "&Always use ftp proxy:"
-msgstr ""
+msgstr "&Vždy použít ftp proxy:"
 
 msgid "&Use ~/.netrc"
-msgstr "&Používat ~/.netrc"
+msgstr "Po&užívat ~/.netrc"
 
 msgid "Use &passive mode"
-msgstr "Používat pasivní &režim"
+msgstr "Používat &pasivní režim"
 
 msgid "Use passive mode over pro&xy"
 msgstr "Používat pasivní režim přes pro&xy"
@@ -2119,25 +2145,25 @@ msgid "cd"
 msgstr "cd"
 
 msgid "Quick cd"
-msgstr "Rychlá změna adresáře"
+msgstr "Rychlá změna složky"
 
 msgid "Existing filename (filename symlink will point to):"
-msgstr "Existující název souboru (na který bude symlink ukazovat):"
+msgstr "Existující soubor (na který bude symb. odkaz mířit):"
 
 msgid "Symbolic link filename:"
-msgstr "Jméno symbolického odkazu:"
+msgstr "Název symbolického odkazu:"
 
 msgid "Symbolic link"
 msgstr "Symbolický odkaz"
 
 msgid "&Stop"
-msgstr "Z&astavit"
+msgstr "Za&stavit"
 
 msgid "&Resume"
-msgstr "&Pokračovat"
+msgstr "Pok&račovat"
 
 msgid "&Kill"
-msgstr "&Ukončit"
+msgstr "Vynutit u&končení"
 
 msgid "Background jobs"
 msgstr "Úlohy na pozadí"
@@ -2150,64 +2176,64 @@ msgid "Domain:"
 msgstr "Doména:"
 
 msgid "Username:"
-msgstr "Jméno uživatele:"
+msgstr "Uživatelské jméno:"
 
 msgid "SMB authentication"
-msgstr "SMB autentizace"
+msgstr "SMB ověření"
 
 msgid "set &user ID on execution"
-msgstr ""
+msgstr "při spouštění nastavit identifikátor &uživatele"
 
 msgid "set &group ID on execution"
-msgstr ""
+msgstr "&při spouštění nastavit identifikátor skupiny"
 
 msgid "stick&y bit"
-msgstr ""
+msgstr "„lepkavý“ (stick&y) bit"
 
 msgid "&read by owner"
-msgstr "&číst vlastník"
+msgstr "vlastník &číst"
 
 msgid "&write by owner"
-msgstr "&zapisovat vlastník"
+msgstr "&vlastník zapisovat"
 
 msgid "e&xecute/search by owner"
-msgstr ""
+msgstr "vlastník &spouštět/vstupovat"
 
 msgid "rea&d by group"
-msgstr ""
+msgstr "&skupina číst"
 
 msgid "write by grou&p"
-msgstr ""
+msgstr "sku&pina zapisovat"
 
 msgid "execu&te/search by group"
-msgstr ""
+msgstr "skupina spouš&tět/vstupovat"
 
 msgid "read &by others"
-msgstr ""
+msgstr "&ostatní číst"
 
 msgid "wr&ite by others"
-msgstr ""
+msgstr "ostatní zap&isovat"
 
 msgid "execute/searc&h by others"
-msgstr ""
+msgstr "&ostatní spouštět/vstupovat"
 
 msgid "Name:"
 msgstr "Název:"
 
 msgid "Permissions (octal):"
-msgstr "Oprávnění (octal):"
+msgstr "Oprávnění (osmičkově):"
 
 msgid "Owner name:"
 msgstr "Jméno vlastníka:"
 
 msgid "Group name:"
-msgstr "Jméno skupiny:"
+msgstr "Název skupiny:"
 
 msgid "&Marked all"
 msgstr "&Nastavit vše na označených souborech"
 
 msgid "S&et marked"
-msgstr "&Nastavit označené"
+msgstr "Nastavit označ&ené"
 
 msgid "C&lear marked"
 msgstr "&Smazat označené"
@@ -2222,10 +2248,10 @@ msgid "File"
 msgstr "Soubor"
 
 msgid "Set &groups"
-msgstr "Nastav &skupiny"
+msgstr "Nastavit &skupiny"
 
 msgid "Set &users"
-msgstr "Nastav &uživatele"
+msgstr "Nastavit &uživatele"
 
 msgid "Name"
 msgstr "Jméno"
@@ -2234,16 +2260,16 @@ msgid "Owner name"
 msgstr "Jméno vlastníka"
 
 msgid "Group name"
-msgstr "Jméno skupiny"
+msgstr "Název skupiny"
 
 msgid "Size"
-msgstr "Délka"
+msgstr "Velikost"
 
 msgid "Chown command"
 msgstr "Příkaz chown"
 
 msgid "User name"
-msgstr "Jméno uživatele"
+msgstr "Uživatelské jméno"
 
 msgid "<Unknown user>"
 msgstr "<Neznámý uživatel>"
@@ -2252,13 +2278,13 @@ msgid "<Unknown group>"
 msgstr "<Neznámá skupina>"
 
 msgid "Enter machine name (F1 for details):"
-msgstr "Jméno počítače (nápověda F1):"
+msgstr "Zadejte název počítače (podrobnosti F1):"
 
 msgid "Files tagged, want to cd?"
-msgstr "Soubory označeny, chcete změnit adresář?"
+msgstr "Soubory označeny, chcete přejít do složky?"
 
 msgid "Cannot change directory"
-msgstr "Není možné změnit adresář"
+msgstr "Nedaří se přejít do složky"
 
 msgid "Filter"
 msgstr "Filtr"
@@ -2283,13 +2309,13 @@ msgstr "symbolický odkaz: %s"
 
 #, c-format
 msgid "Cannot chdir to \"%s\""
-msgstr "Pracovní adresář nelze změnit na „%s“"
+msgstr "Nedaří se přejít do složky „%s“"
 
 msgid "View file"
 msgstr "Prohlížet soubor"
 
 msgid "Filename:"
-msgstr "Jméno souboru:"
+msgstr "Název souboru:"
 
 msgid "Filtered view"
 msgstr "Filtrovaný pohled"
@@ -2301,10 +2327,10 @@ msgid "Edit file"
 msgstr "Upravit soubor"
 
 msgid "Create a new Directory"
-msgstr "Vytvořit nový adresář"
+msgstr "Vytvořit novou složku"
 
 msgid "Enter directory name:"
-msgstr "Zadejte jméno adresáře:"
+msgstr "Zadejte název složky:"
 
 msgid "Extension file edit"
 msgstr "Upravit akce k příponám"
@@ -2322,7 +2348,7 @@ msgid "Which highlighting file you want
 msgstr "Který zvýrazňovací soubor chcete upravit?"
 
 msgid "Compare directories"
-msgstr "Porovnat adresáře"
+msgstr "Porovnat složky"
 
 msgid "Select compare method:"
 msgstr "Vyberte metodu porovnání:"
@@ -2331,7 +2357,7 @@ msgid "&Quick"
 msgstr "&Rychlá"
 
 msgid "&Size only"
-msgstr "&Pouze velikost"
+msgstr "Pouze veliko&st"
 
 msgid "&Thorough"
 msgstr "&Důkladná"
@@ -2340,8 +2366,8 @@ msgid ""
 "Both panels should be in the listing mode\n"
 "to use this command"
 msgstr ""
-"Pokud chcete použít tento příkaz,\n"
-"oba panely musí zobrazovat seznam souborů"
+"Pro použití tohoto příkazu je třeba, aby\n"
+"oba panely zobrazovaly seznam souborů"
 
 msgid ""
 "Not an xterm or Linux console;\n"
@@ -2352,22 +2378,22 @@ msgstr ""
 
 #, c-format
 msgid "'%s' is not a symbolic link"
-msgstr "'%s' není symbolický odkaz"
+msgstr "„%s“ není symbolický odkaz"
 
 #, c-format
 msgid "Symlink '%s' points to:"
-msgstr "Symbolický odkaz '%s' vede na:"
+msgstr "Symbolický odkaz „%s“ vede na:"
 
 msgid "Edit symlink"
 msgstr "Upravit symbolický odkaz"
 
 #, c-format
 msgid "edit symlink, unable to remove %s: %s"
-msgstr "upravte symlink, nelze odstranit %s: %s"
+msgstr "upravte symbolický odkaz, %s není možné odstranit: %s"
 
 #, c-format
 msgid "edit symlink: %s"
-msgstr "upravte symbolický odkaz: %s"
+msgstr "upravit symbolický odkaz: %s"
 
 msgid "FTP to machine"
 msgstr "FTP spojení na počítač"
@@ -2382,7 +2408,7 @@ msgid "SMB link to machine"
 msgstr "SMB spojení na počítač"
 
 msgid "Undelete files on an ext2 file system"
-msgstr "Obnovit soubory na diskových oblastech typu ext2"
+msgstr "Obnovit soubory na souborovém systému typu ext2"
 
 msgid ""
 "Enter device (without /dev/) to undelete\n"
@@ -2392,7 +2418,7 @@ msgstr ""
 "obnovit soubory: (nápověda F1)"
 
 msgid "Directory scanning"
-msgstr "Prohledávání adresáře"
+msgstr "Prohledávání složky"
 
 msgid "Setup"
 msgstr "Nastavení"
@@ -2403,21 +2429,23 @@ msgstr "Nastavení uloženo do %s"
 
 #, c-format
 msgid "Unable to save setup to %s"
-msgstr "Nastavení nelze uložit do %s"
+msgstr "Nastavení se nedaří uložit do %s"
 
 msgid "Cannot execute commands on non-local filesystems"
-msgstr "Pokud nepracujete s lokálními soubory, nelze spouštět žádné příkazy"
+msgstr ""
+"Pokud nepracujete se soubory, nacházejícími se v tomto počítači, nelze "
+"spouštět žádné příkazy"
 
 #, c-format
 msgid ""
 "Cannot chdir to \"%s\"\n"
 "%s"
 msgstr ""
-"Adresář nelze změnit na „%s“\n"
+"Nedaří se přejít do složky „%s“\n"
 "%s"
 
 msgid "Cannot read directory contents"
-msgstr "Nelze číst obsah adresáře"
+msgstr "Nelze číst obsah složky"
 
 msgid "Parameter"
 msgstr "Parametr"
@@ -2427,7 +2455,7 @@ msgid ""
 "Cannot create temporary command file\n"
 "%s"
 msgstr ""
-"Nelze vytvořit dočasný příkazový soubor\n"
+"Nedaří se vytvořit dočasný příkazový soubor\n"
 "%s"
 
 #, c-format
@@ -2440,8 +2468,8 @@ msgid ""
 "the installation failed. Please fetch a fresh copy from the Midnight "
 "Commander package."
 msgstr ""
-"Formát souboru %smc.ext byl modifikován verzí 3.0. Zdá se, že instalace "
-"selhala. Prosím, nahrajte si novou aktuální kopii balíčku Midnight Commander."
+"Formát souboru %smc.ext byl upraven verzí 3.0. Zdá se, že instalace se "
+"nezdařila. Nahrajte si novou aktuální kopii z balíčku s Midnight Commander."
 
 #, c-format
 msgid "%s file error"
@@ -2452,6 +2480,8 @@ msgid ""
 "The format of the %s file has changed with version 3.0. You may either want "
 "to copy it from %smc.ext or use that file as an example of how to write it."
 msgstr ""
+"Formát %s souboru se s verzí 3.0 změnil. Můžete buď zkopírovat z %smc.ext "
+"nebo tento soubor použít jako ukázku jak ho napsat."
 
 msgid "DialogTitle|Copy"
 msgstr "DialogTitle|Kopírovat"
@@ -2473,7 +2503,7 @@ msgstr "FileOperation|Smazat"
 
 #, no-c-format
 msgid "%o %f%n\"%s\"%m"
-msgstr "%o %f%n\"%s\"%m"
+msgstr "%o %f%n„%s“%m"
 
 #, no-c-format
 msgid "%o %d %f%m"
@@ -2483,13 +2513,13 @@ msgid "files"
 msgstr "souborů"
 
 msgid "directory"
-msgstr "adresář"
+msgstr "složka"
 
 msgid "directories"
-msgstr "adresářů"
+msgstr "složek"
 
 msgid "files/directories"
-msgstr "souborů/adresářů"
+msgstr "souborů/složek"
 
 #. TRANSLATORS: keep leading space here to split words in Copy/Move dialog
 msgid " with source mask:"
@@ -2503,7 +2533,7 @@ msgid ""
 "Cannot read source link \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze přečíst zdrojový odkaz „%s“\n"
+"Nedaří se číst zdrojový odkaz „%s“\n"
 "%s"
 
 msgid ""
@@ -2521,20 +2551,43 @@ msgid ""
 "Cannot create target symlink \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze vytvořit cílový symlink „%s“\n"
+"Nelze vytvořit cílový symbolický odkaz „%s“\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"„%s“\n"
+"a\n"
+"„%s“\n"
+"jsou stejná složka"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"„%s“\n"
+"a\n"
+"„%s“\n"
+"jsou stejný soubor"
+
 msgid "Ski&p all"
 msgstr "&Přeskočit vše"
 
-msgid "&Retry"
-msgstr "&Zkusit znovu"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
 "Delete it recursively?"
 msgstr ""
+"Složka „%s“ není prázdná.\n"
+"Smazat rekurzivně?"
 
 #, c-format
 msgid ""
@@ -2543,7 +2596,7 @@ msgid ""
 "Delete it recursively?"
 msgstr ""
 "Proces na pozadí:\n"
-"Adresář \"%s\" není prázdný.\n"
+"Složka „%s“ není prázdná.\n"
 "Smazat rekurzivně?"
 
 msgid "Non&e"
@@ -2551,27 +2604,23 @@ msgstr "Žá&dné"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Na souboru „%s“ nelze provést stat\n"
+"Nelze smazat soubor „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"„%s“\n"
-"a\n"
-"„%s“\n"
-"jsou stejný soubor"
+"Na souboru „%s“ nelze provést stat\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
-msgstr "Nelze přepsat adresář „%s“"
+msgstr "Nelze přepsat složku „%s“"
 
 #, c-format
 msgid ""
@@ -2583,36 +2632,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze smazat soubor „%s“\n"
+"Nelze smazat složku „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze smazat soubor „%s“\n"
+"Nelze přepsat složku „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze smazat adresář „%s“\n"
+"Nelze přepsat soubor „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze přepsat adresář „%s“\n"
+"Nelze přesunout složku „%s“ na „%s“\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Nelze pracovat s „..“!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2654,7 +2706,7 @@ msgstr ""
 "%s"
 
 msgid "Reget failed, about to overwrite file"
-msgstr "Reget selhal, soubor bude přepsán"
+msgstr "Reget se nezdařilo, soubor bude přepsán"
 
 #, c-format
 msgid ""
@@ -2685,7 +2737,7 @@ msgid ""
 "Cannot preallocate space for target file \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze předem přiřadit místo pro cílový soubor \"%s\"\n"
+"Nelze předem přiřadit místo pro cílový soubor „%s“\n"
 "%s"
 
 #, c-format
@@ -2693,7 +2745,7 @@ msgid ""
 "Cannot read source file \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze číst zdrojový soubor \"%s\"\n"
+"Nelze číst zdrojový soubor „%s“\n"
 "%s"
 
 #, c-format
@@ -2742,7 +2794,7 @@ msgid ""
 "Source \"%s\" is not a directory\n"
 "%s"
 msgstr ""
-"Zdrojový adresář „%s“ není adresářem\n"
+"Zdroj „%s“ není složka\n"
 "%s"
 
 #, c-format
@@ -2758,7 +2810,7 @@ msgid ""
 "Destination \"%s\" must be a directory\n"
 "%s"
 msgstr ""
-"Cíl „%s“ musí být adresářem\n"
+"Je třeba, aby cíl „%s“ byla složka\n"
 "%s"
 
 #, c-format
@@ -2766,7 +2818,7 @@ msgid ""
 "Cannot create target directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze vytvořit cílový adresář „%s“\n"
+"Nelze vytvořit cílovou složku „%s“\n"
 "%s"
 
 #, c-format
@@ -2774,52 +2826,21 @@ msgid ""
 "Cannot chown target directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze změnit práva cílového adresáře „%s“\n"
-"%s"
-
-#, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"„%s“\n"
-"a\n"
-"„%s“\n"
-"jsou stejné adresáře"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Nelze přepsat soubor „%s“\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Nelze přesunout adresář „%s“ na „%s“\n"
+"Nelze změnit práva cílové složky „%s“\n"
 "%s"
 
 #, c-format
 msgid "Directories: %zu, total size: %s"
-msgstr "Adresáře: %zu, celková velikost: %s"
-
-msgid "Cannot operate on \"..\"!"
-msgstr "Nelze pracovat s „..“!"
+msgstr "Složky: %zu, celková velikost: %s"
 
 msgid "Sorry, I could not put the job in background"
-msgstr "Bohužel, úlohu nelze přesunout na pozadí"
+msgstr "Je nám líto, úlohu nelze přesunout na pozadí"
 
 msgid "S&uspend"
-msgstr ""
+msgstr "&Uspat"
 
 msgid "Con&tinue"
-msgstr "&Pokračovat"
+msgstr "Pokračova&t"
 
 #, c-format
 msgid "%d:%02d.%02d"
@@ -2827,7 +2848,7 @@ msgstr "%d:%02d.%02d"
 
 #, c-format
 msgid "ETA %s"
-msgstr "ČAS %s"
+msgstr "PŘEDP. DOBA %s"
 
 #, c-format
 msgid "%.2f MB/s"
@@ -2846,7 +2867,7 @@ msgstr "Cílový soubor už existuje!"
 
 #, c-format
 msgid "New     : %s, size %s"
-msgstr "Nový     : %s, velikost %s"
+msgstr "Nový: %s, velikost %s"
 
 #, c-format
 msgid "Existing: %s, size %s"
@@ -2868,13 +2889,13 @@ msgid "&Update"
 msgstr "Akt&ualizace"
 
 msgid "If &size differs"
-msgstr "Jestliže se velikost &liší"
+msgstr "Pokud se liší veliko&st"
 
 msgid "File exists"
 msgstr "Soubor existuje"
 
 msgid "Background process: File exists"
-msgstr "Proces na pozadí: Soubor existuje"
+msgstr "Proces na pozadí: soubor existuje"
 
 #, c-format
 msgid "Files processed: %zu/%zu"
@@ -2918,7 +2939,7 @@ msgid "Deleting"
 msgstr "Maže se"
 
 msgid "&Using shell patterns"
-msgstr "&Význam vzorů jako v shellu"
+msgstr "Význam vzorů jako v shell&u"
 
 msgid "to:"
 msgstr "na:"
@@ -2930,7 +2951,7 @@ msgid "Preserve &attributes"
 msgstr "Zachovat &atributy"
 
 msgid "Di&ve into subdir if exists"
-msgstr "&Ponořit se do existujících adresářů"
+msgstr "Pokud existují, &ponořit se do podsložek"
 
 msgid "&Stable symlinks"
 msgstr "&Stabilní symbolické odkazy"
@@ -2949,13 +2970,13 @@ msgid "&Again"
 msgstr "&Znovu"
 
 msgid "Pane&lize"
-msgstr "Pane&lizace"
+msgstr "Zobrazit v pane&lu"
 
 msgid "&View - F3"
-msgstr "&Prohlédnut - F3"
+msgstr "&Prohlédnout – F3"
 
 msgid "&Edit - F4"
-msgstr "&Upravit - F4"
+msgstr "&Upravit – F4"
 
 #, c-format
 msgid "Found: %lu"
@@ -2965,31 +2986,31 @@ msgid "Malformed regular expression"
 msgstr "Chybně zadaný regulární výraz"
 
 msgid "File name:"
-msgstr "Jméno souboru:"
+msgstr "Název souboru:"
 
 msgid "&Find recursively"
-msgstr "Najít re&kurzivně"
+msgstr "&Hledat i v podsložkách"
 
 msgid "S&kip hidden"
-msgstr "Přeskočit skr&yté"
+msgstr "Přes&kočit skryté"
 
 msgid "Content:"
 msgstr "Obsah:"
 
 msgid "Sea&rch for content"
-msgstr "Hledat obsah"
+msgstr "&Hledat obsah"
 
 msgid "Case sens&itive"
-msgstr "Všímat si velikos&ti písmen"
+msgstr "Rozl&išovat velká/malá písmena"
 
 msgid "A&ll charsets"
-msgstr "Všechny znakové sady"
+msgstr "&Všechny znakové sady"
 
 msgid "Fir&st hit"
-msgstr "&První výskyt"
+msgstr "První vý&skyt"
 
 msgid "&Tree"
-msgstr "&Strom"
+msgstr "S&trom"
 
 msgid "Find File"
 msgstr "Najít soubor"
@@ -2998,11 +3019,11 @@ msgid "Start at:"
 msgstr "Začít v:"
 
 msgid "Ena&ble ignore directories:"
-msgstr ""
+msgstr "&Ignorovat složky:"
 
 #, c-format
 msgid "Grepping in %s"
-msgstr "Hledám v %s"
+msgstr "Hledá se v %s"
 
 msgid "Finished"
 msgstr "Hotovo"
@@ -3012,22 +3033,23 @@ msgid "Finished (ignored %zu directory)"
 msgid_plural "Finished (ignored %zu directories)"
 msgstr[0] "Dokončeno (ignorován %zu adresář)"
 msgstr[1] "Dokončeno (ignorovány %zu adresáře)"
-msgstr[2] "Dokončeno (ignorováno %zu adresářů)"
+msgstr[2] "Dokončeno (ignorováno %zu složek)"
+msgstr[3] "Dokončeno (ignorováno %zu složek)"
 
 msgid "Searching"
-msgstr "Hledání"
+msgstr "Hledá se"
 
 msgid "Change &to"
-msgstr "Z&měnit na"
+msgstr "Změni&t na"
 
 msgid "&Free VFSs now"
 msgstr "Uvolnit V&FS souborové systémy"
 
 msgid "&Refresh"
-msgstr "&Obnovit"
+msgstr "&Načíst znovu"
 
 msgid "&Add current"
-msgstr "Přidat &tento"
+msgstr "Přid&at stávající"
 
 msgid "&Up"
 msgstr "Nahor&u"
@@ -3039,80 +3061,80 @@ msgid "New &entry"
 msgstr "&Nová položka"
 
 msgid "&Insert"
-msgstr "&Vložit"
+msgstr "Vlož&it"
 
 msgid "&Remove"
-msgstr "&Smazat"
+msgstr "Odeb&rat"
 
 msgid "Subgroup - press ENTER to see list"
-msgstr "Podskupina - pro seznam stiskněte ENTER"
+msgstr "Podskupina – seznam zobrazíte stisknutím ENTER"
 
 msgid "Active VFS directories"
-msgstr "Aktivní adresáře VFS"
+msgstr "Právě používané složky na VFS souborovém systému"
 
 msgid "Directory hotlist"
-msgstr "Rychlý přístup k adresářům"
+msgstr "Rychlý přístup ke složkám"
 
 msgid "Top level group"
 msgstr "Hlavní skupina"
 
 msgid "Directory path"
-msgstr "Cesta k adresáři"
+msgstr "Popis umístění složky"
 
 #, c-format
 msgid "Moving %s"
 msgstr "Přesunuje se %s"
 
 msgid "Directory label"
-msgstr "Popis adresáře"
+msgstr "Šítek složky"
 
 msgid "&Append"
-msgstr "&Přidat"
+msgstr "Přid&at"
 
 msgid "New hotlist entry"
 msgstr "Nová položka pro rychlý přístup"
 
 msgid "Directory label:"
-msgstr "Popis adresáře:"
+msgstr "Štítek složky:"
 
 msgid "Directory path:"
-msgstr "Cesta k adresáři:"
+msgstr "Popis umístění složky:"
 
 msgid "New hotlist group"
-msgstr "Nová skupina pro rychlý přístup"
+msgstr "Nová skupina rychlého přístupu"
 
 msgid "Name of new group:"
-msgstr "Jméno nové skupiny:"
+msgstr "Název pro novou skupinu:"
 
 #, c-format
 msgid "Are you sure you want to remove entry \"%s\"?"
-msgstr "Opravdu chcete odstranit položku \"%s\"?"
+msgstr "Opravdu chcete odstranit položku „%s“?"
 
 #, c-format
 msgid ""
 "Group \"%s\" is not empty.\n"
 "Remove it?"
 msgstr ""
-"Skupina \"%s\" není prázdná.\n"
+"Skupina „%s“ není prázdná.\n"
 "Přesto odstranit?"
 
 msgid "Hotlist Load"
-msgstr "Čtení seznamu pro rychlý přístup"
+msgstr "Načtení seznamu pro rychlý přístup"
 
 #, c-format
 msgid ""
 "MC was unable to write %s file,\n"
 "your old hotlist entries were not deleted"
 msgstr ""
-"MC nemohl zapsat soubor %s,\n"
-"Vaše staré položky v hotlistu nebyly odstraněny"
+"MC se nepodařilo zapsat soubor %s,\n"
+"původní položky nebyly z rychlého přístupu odstraněny"
 
 #, c-format
 msgid "Label for \"%s\":"
-msgstr "Popis pro „%s“:"
+msgstr "Štítek pro „%s“:"
 
 msgid "Add to hotlist"
-msgstr "Přidání pro rychlý přístup"
+msgstr "Přidat do rychlého přístupu"
 
 #, c-format
 msgid "Midnight Commander %s"
@@ -3123,13 +3145,13 @@ msgid "File: %s"
 msgstr "Soubor: %s"
 
 msgid "No node information"
-msgstr "O uzlu nejsou informace"
+msgstr "Informace o uzlech nejsou k dispozici"
 
 msgid "Free nodes:"
 msgstr "Volné uzly:"
 
 msgid "No space information"
-msgstr "Nelze získat informace o prostoru"
+msgstr "Informace o využití prostoru nejsou k dispozici"
 
 #, c-format
 msgid "Free space: %s/%s (%d%%)"
@@ -3140,7 +3162,7 @@ msgid "Type:       %s"
 msgstr "Typ:       %s"
 
 msgid "non-local vfs"
-msgstr "vzdálený vfs"
+msgstr "vzdálený vfs souborový systém"
 
 #, c-format
 msgid "Device:     %s"
@@ -3148,11 +3170,11 @@ msgstr "Zařízení:     %s"
 
 #, c-format
 msgid "Filesystem: %s"
-msgstr "Systém souborů: %s"
+msgstr "Souborový systém: %s"
 
 #, c-format
 msgid "Accessed:   %s"
-msgstr "Přístup:   %s"
+msgstr "Přistoupeno:   %s"
 
 #, c-format
 msgid "Modified:   %s"
@@ -3165,7 +3187,7 @@ msgstr "Změněno:    %s"
 
 #, c-format
 msgid "Dev. type: major %lu, minor %lu"
-msgstr "Typ zařízení: větší %lu, menší %lu"
+msgstr "Typ zařízení: hlavní %lu, vedlejší %lu"
 
 #, c-format
 msgid "Size:       %s"
@@ -3174,9 +3196,10 @@ msgstr "Velikost:       %s"
 #, c-format
 msgid " (%lu block)"
 msgid_plural " (%lu blocks)"
-msgstr[0] ""
-msgstr[1] ""
-msgstr[2] ""
+msgstr[0] " (%lu blok)"
+msgstr[1] " (%lu bloky)"
+msgstr[2] " (%lu bloků)"
+msgstr[3] " (%lu bloků)"
 
 #, c-format
 msgid "Owner:      %s/%s"
@@ -3195,22 +3218,22 @@ msgid "Location:   %Xh:%Xh"
 msgstr "Umístění:   %Xh:%Xh"
 
 msgid "&Equal split"
-msgstr "Rozdělení na &poloviny"
+msgstr "Rozděl&ení na poloviny"
 
 msgid "&Menubar visible"
-msgstr "Pruh nabídky viditelný"
+msgstr "&Pruh nabídek viditelný"
 
 msgid "Command &prompt"
-msgstr "Příkazová řá&dka"
+msgstr "&Příkazový řádek"
 
 msgid "&Keybar visible"
-msgstr "&Klávesy viditelné"
+msgstr "Pruh &kláves viditelný"
 
 msgid "H&intbar visible"
-msgstr "Tip&y viditelné"
+msgstr "Pruh s t&ipy viditelný"
 
 msgid "&XTerm window title"
-msgstr "Nadpis okna &xtermu"
+msgstr "Nadpis &XTerm okna"
 
 msgid "&Show free space"
 msgstr "&Zobrazit volné místo"
@@ -3222,19 +3245,19 @@ msgid "Console output"
 msgstr "Výstup z konzole"
 
 msgid "&Vertical"
-msgstr "&Vertikální"
+msgstr "S&vislé"
 
 msgid "&Horizontal"
-msgstr "&Horizontální"
+msgstr "&Vodorovné"
 
 msgid "Output lines:"
 msgstr "Řádky výstupu:"
 
 msgid "Layout"
-msgstr "Rozložení"
+msgstr "Rozvržení"
 
 msgid "File listin&g"
-msgstr "Seznam souborů"
+msgstr "&Seznam souborů"
 
 msgid "&Quick view"
 msgstr "&Rychlé zobrazení "
@@ -3243,40 +3266,40 @@ msgid "&Info"
 msgstr "&Info"
 
 msgid "&Listing format..."
-msgstr "Formát výpisu..."
+msgstr "&Formát výpisu…"
 
 msgid "&Sort order..."
-msgstr "&Pořadí..."
+msgstr "&Pořadí…"
 
 msgid "&Filter..."
-msgstr "&Filtr..."
+msgstr "&Filtr…"
 
 msgid "&Encoding..."
-msgstr "&Kódování"
+msgstr "&Kódování…"
 
 msgid "FT&P link..."
-msgstr "F&TP spojení..."
+msgstr "FT&P spojení…"
 
 msgid "S&hell link..."
-msgstr "S&hellové spojení..."
+msgstr "S&hell spojení…"
 
 msgid "S&FTP link..."
-msgstr "S&FTP odkaz..."
+msgstr "S&FTP spojení…"
 
 msgid "SM&B link..."
-msgstr "SM&B spojení..."
+msgstr "SM&B spojení…"
 
 msgid "Paneli&ze"
-msgstr ""
+msgstr "Zobra&zit v panelu"
 
 msgid "&Rescan"
-msgstr "&Obnovit"
+msgstr "Znovu p&roskenovat"
 
 msgid "&View"
 msgstr "&Prohlížet"
 
 msgid "Vie&w file..."
-msgstr "Pro&hlížet soubor..."
+msgstr "Pro&hlížet soubor…"
 
 msgid "&Filtered view"
 msgstr "&Filtrovaný pohled"
@@ -3291,10 +3314,10 @@ msgid "&Link"
 msgstr "O&dkaz"
 
 msgid "&Symlink"
-msgstr "Symbolický &odkaz"
+msgstr "&Symbolický odkaz"
 
 msgid "Relative symlin&k"
-msgstr "Relativní symlink"
+msgstr "Relativní symbolic&ký odkaz"
 
 msgid "Edit s&ymlink"
 msgstr "Upravit s&ymbolický odkaz"
@@ -3309,16 +3332,16 @@ msgid "&Rename/Move"
 msgstr "Přej&menovat/přesunout"
 
 msgid "&Mkdir"
-msgstr "&Nový adresář"
+msgstr "&Nová složka"
 
 msgid "&Quick cd"
-msgstr "Ry&chlá změna adresáře"
+msgstr "Ry&chlá změna složky"
 
 msgid "Select &group"
 msgstr "Vy&brat skupinu"
 
 msgid "U&nselect group"
-msgstr "Zr&ušit výběr skupiny"
+msgstr "Zrušit výběr skupi&ny"
 
 msgid "&Invert selection"
 msgstr "Převrát&it výběr"
@@ -3327,7 +3350,7 @@ msgid "E&xit"
 msgstr "Ukonč&it"
 
 msgid "&User menu"
-msgstr "&Uživatelské menu"
+msgstr "&Uživatelská nabídka"
 
 msgid "&Directory tree"
 msgstr "Strom a&dresářů"
@@ -3342,7 +3365,7 @@ msgid "Switch &panels on/off"
 msgstr "&Panely ano/ne"
 
 msgid "&Compare directories"
-msgstr "Porovnat &adresáře"
+msgstr "Porovnat &složky"
 
 msgid "C&ompare files"
 msgstr "P&orovnat soubory"
@@ -3351,22 +3374,22 @@ msgid "E&xternal panelize"
 msgstr "E&xterní panelizace"
 
 msgid "Show directory s&izes"
-msgstr "Ukázat velikost&i adresářů"
+msgstr "Zobrazit velikost&i složek"
 
 msgid "Command &history"
 msgstr "&Historie příkazů"
 
 msgid "Di&rectory hotlist"
-msgstr "&Rychlý přístup k adresářům"
+msgstr "&Rychlý přístup ke složkám"
 
 msgid "&Active VFS list"
-msgstr "Seznam a&ktivních VFS"
+msgstr "Seznam právě použív&aných VFS souborových systémů"
 
 msgid "&Background jobs"
 msgstr "Úlohy na po&zadí"
 
 msgid "Screen lis&t"
-msgstr "Seznam obrazovek"
+msgstr "Seznam obrazove&k"
 
 msgid "&Undelete files (ext2fs only)"
 msgstr "&Obnovit smazané soubory (jen ext2fs)"
@@ -3378,31 +3401,31 @@ msgid "Edit &extension file"
 msgstr "Upravit akc&e k příponám"
 
 msgid "Edit &menu file"
-msgstr "Upravit uživatelské &menu"
+msgstr "Upravit uživatelskou &nabídku"
 
 msgid "Edit hi&ghlighting group file"
-msgstr "Úprava souboru z&výrazňovacích skupin"
+msgstr "Upravit z&výrazňování skupin"
 
 msgid "&Configuration..."
-msgstr "Kon&figurace..."
+msgstr "&Nastavení…"
 
 msgid "&Layout..."
-msgstr "&Rozložení..."
+msgstr "&Rozvržení…"
 
 msgid "&Panel options..."
-msgstr "Nastavení panelu..."
+msgstr "Nastavení &panelu…"
 
 msgid "C&onfirmation..."
-msgstr "P&otvrzování..."
+msgstr "P&otvrzování…"
 
 msgid "&Appearance..."
-msgstr "&Vzhled..."
+msgstr "&Vzhled…"
 
 msgid "&Display bits..."
-msgstr "&Zobrazení bitů..."
+msgstr "&Zobrazení bitů…"
 
 msgid "&Virtual FS..."
-msgstr "&Virtuální FS..."
+msgstr "&Virtuální souborový systém…"
 
 msgid "Panels:"
 msgstr "Panely:"
@@ -3413,39 +3436,40 @@ msgid_plural "You have %zu opened screen
 msgstr[0] "Máte %zu otevřenou obrazovku. Ukončit i tak?"
 msgstr[1] "Máte %zu otevřené obrazovky. Ukončit i tak?"
 msgstr[2] "Máte otevřeno %zu obrazovek. Ukončit i tak?"
+msgstr[3] "Máte otevřeno %zu obrazovek. Ukončit i tak?"
 
 msgid "The Midnight Commander"
 msgstr "Midnight Commander"
 
 msgid "Do you really want to quit the Midnight Commander?"
-msgstr "Opravdu ukončit Midnight Commander?"
+msgstr "Opravdu chcete Midnight Commander ukončit?"
 
 msgid "&Above"
-msgstr "&Nahoře"
+msgstr "N&ad"
 
 msgid "&Left"
-msgstr "&Levý"
+msgstr "V&levo"
 
 msgid "&Below"
-msgstr "&Níže"
+msgstr "&Pod"
 
 msgid "&Right"
-msgstr "P&ravý"
+msgstr "Vp&ravo"
 
 msgid "ButtonBar|Menu"
-msgstr "ButtonBar|Menu"
+msgstr "ButtonBar|Nabídka"
 
 msgid "ButtonBar|View"
-msgstr "TlačítkováLišta|Zobraz"
+msgstr "ButtonBar|Zobrazit"
 
 msgid "ButtonBar|RenMov"
-msgstr "TlačítkováLišta|Přesun"
+msgstr "ButtonBar|Přejm./Přesun."
 
 msgid "ButtonBar|Mkdir"
-msgstr "TlačítkováLišta|NovAdr"
+msgstr "ButtonBar|Nová slož."
 
 msgid "Memory exhausted!"
-msgstr "Paměť je vyčerpána!"
+msgstr "Došla volná paměť!"
 
 #. TRANSLATORS: one single character to represent 'unsorted' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3461,7 +3485,7 @@ msgid "sort|n"
 msgstr "sort|n"
 
 msgid "&Name"
-msgstr "&Jméno"
+msgstr "&Název"
 
 #. TRANSLATORS: one single character to represent 'version' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3477,7 +3501,7 @@ msgid "sort|e"
 msgstr "sort|e"
 
 msgid "E&xtension"
-msgstr "R&ozšíření"
+msgstr "&Přípony"
 
 #. TRANSLATORS: one single character to represent 'size' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3485,10 +3509,10 @@ msgid "sort|s"
 msgstr "sort|d"
 
 msgid "&Size"
-msgstr "&Délka"
+msgstr "Veliko&st"
 
 msgid "Block Size"
-msgstr "Velikost bloků"
+msgstr "Velikost bloku"
 
 #. TRANSLATORS: one single character to represent 'Modify time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3496,7 +3520,7 @@ msgid "sort|m"
 msgstr "sort|m"
 
 msgid "&Modify time"
-msgstr "&Modifikace"
+msgstr "&Okamžik úpravy"
 
 #. TRANSLATORS: one single character to represent 'Access time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3504,7 +3528,7 @@ msgid "sort|a"
 msgstr "sort|p"
 
 msgid "&Access time"
-msgstr "Čas pří&stupu"
+msgstr "Ok&amžik přístupu"
 
 #. TRANSLATORS: one single character to represent 'Change time' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3512,7 +3536,7 @@ msgid "sort|h"
 msgstr "sort|z"
 
 msgid "C&hange time"
-msgstr "Čas změn&y"
+msgstr "Okamžik změn&y"
 
 msgid "Perm"
 msgstr "Práva"
@@ -3529,10 +3553,10 @@ msgid "&Inode"
 msgstr "&I-uzel"
 
 msgid "UID"
-msgstr "UID"
+msgstr "Identif. uživatele"
 
 msgid "GID"
-msgstr "GID"
+msgstr "Identif. skupiny"
 
 msgid "Owner"
 msgstr "Vlastník"
@@ -3544,16 +3568,16 @@ msgid "[dev]"
 msgstr "[zař.]"
 
 msgid "UP--DIR"
-msgstr "VYŠ-ADR"
+msgstr "VYŠ–ADR"
 
 msgid "SYMLINK"
-msgstr "SYMLINK"
+msgstr "SYMB. ODKAZ"
 
 msgid "SUB-DIR"
 msgstr "PODADR"
 
 msgid "<readlink failed>"
-msgstr "<čtení odkazu selhalo>"
+msgstr "<čtení odkazu se nezdařilo>"
 
 #, c-format
 msgid "%s in %d file"
@@ -3561,18 +3585,19 @@ msgid_plural "%s in %d files"
 msgstr[0] "%s v %d souboru"
 msgstr[1] "%s ve %d souborech"
 msgstr[2] "%s v %d souborech"
+msgstr[3] "%s v %d souborech"
 
 msgid "Panelize"
-msgstr ""
+msgstr "Zobrazit v panelu"
 
 msgid "Unknown tag on display format:"
-msgstr "Neznámá popiska ve formátu zobrazení:"
+msgstr "Neznámý štítek ve formátu zobrazení:"
 
 msgid "&Files only"
 msgstr "&Pouze soubory"
 
 msgid "&Case sensitive"
-msgstr "Rozliš. velikos&t"
+msgstr "&Rozliš. malá/velká písmena"
 
 msgid "Select"
 msgstr "Výběr"
@@ -3581,13 +3606,13 @@ msgid "Unselect"
 msgstr "Zrušit výběr"
 
 msgid "Do you really want to execute?"
-msgstr "Opravdu spustit?"
+msgstr "Opravdu chcete spustit?"
 
 msgid "User supplied format looks invalid, reverting to default."
-msgstr "Chybný formát zadaný uživatelem, bude použit standardní."
+msgstr "Chybný formát zadaný uživatelem, náhradně bude použit výchozí."
 
 msgid "&Add new"
-msgstr "&Přidat nový"
+msgstr "Přid&at nový"
 
 msgid "External panelize"
 msgstr "Externí panelizace"
@@ -3605,42 +3630,41 @@ msgid "Enter command label:"
 msgstr "Zadejte označení příkazu:"
 
 msgid "Cannot invoke command."
-msgstr "Nelze spustit příkaz."
+msgstr "Příkaz se nedaří vyvolat."
 
 msgid "Pipe close failed"
-msgstr "Nelze zavřít rouru"
+msgstr "Rouru (pipe) se nepodařilo zavřít"
 
 msgid "Cannot run external panelize in a non-local directory"
-msgstr ""
-"Pokud nepracujete s lokálním adresářem, není možné provést externí panelizaci"
+msgstr "Při práci se složkou, která není místní, není možné zobrazit v panelu"
 
 msgid "Modified git files"
 msgstr "Upravené git soubory"
 
 msgid "Find rejects after patching"
-msgstr "Najít odmítnuté části záplat (*.rej) po záplatování"
+msgstr "Po začlenění najít odmítnuté části změn (*.rej)"
 
 msgid "Find *.orig after patching"
-msgstr "Najít všechny soubory *.orig po záplatování"
+msgstr "Po začlenění najít *.orig soubory"
 
 msgid "Find SUID and SGID programs"
-msgstr "Najít programy SUID a SGID"
+msgstr "Najít programy s nastaveným SUID a SGID"
 
 #, c-format
 msgid ""
 "Cannot open the %s file for writing:\n"
 "%s\n"
 msgstr ""
-"Nelze otevřít soubor %s pro zápis:\n"
+"Do souboru %s se nedaří zapisovat:\n"
 "%s\n"
 
 #, c-format
 msgid "Copy \"%s\" directory to:"
-msgstr "Zkopírovat adresář „%s“ do:"
+msgstr "Zkopírovat složku „%s“ do:"
 
 #, c-format
 msgid "Move \"%s\" directory to:"
-msgstr "Přesunout adresář „%s“ do:"
+msgstr "Přesunout složku „%s“ do:"
 
 #, c-format
 msgid ""
@@ -3655,37 +3679,37 @@ msgid "Delete %s?"
 msgstr "Smazat %s?"
 
 msgid "ButtonBar|Static"
-msgstr "TlačítkováLišta|Static"
+msgstr "ButtonBar|Statické"
 
 msgid "ButtonBar|Dynamc"
-msgstr "TlačítkováLišta|Dynamc"
+msgstr "ButtonBar|Dynamické"
 
 msgid "ButtonBar|Rescan"
-msgstr "TlačítkováLišta|Obnov"
+msgstr "ButtonBar|Znovu prosken."
 
 msgid "ButtonBar|Forget"
-msgstr "TlačítkováLišta|Zapomn"
+msgstr "ButtonBar|Zapomen."
 
 msgid "ButtonBar|Rmdir"
-msgstr "TlačítkováLišta|OdsAdr"
+msgstr "ButtonBar|Odstr. složku"
 
 #, c-format
 msgid ""
 "Cannot write to the %s file:\n"
 "%s\n"
 msgstr ""
-"Nelze zapisovat do souboru %s:\n"
+"Do souboru %s se nedaří zapisovat:\n"
 "%s\n"
 
 msgid "Help file format error\n"
 msgstr "Chybný formát souboru s nápovědou\n"
 
 msgid "Internal bug: Double start of link area"
-msgstr "Interní závada: Dvojité spuštění pole odkazů"
+msgstr "Vnitřní závada: zdvojený začátek oblasti odkazu"
 
 #, c-format
 msgid "Cannot find node %s in help file"
-msgstr "V souboru s nápovědou nelze najít sekci %s"
+msgstr "Sekci %s se nedaří v souboru s nápovědou najít"
 
 msgid "Help"
 msgstr "Nápověda"
@@ -3697,10 +3721,10 @@ msgid "ButtonBar|Prev"
 msgstr "ButtonBar|Předch"
 
 msgid "Learn keys"
-msgstr "Učit klávesy"
+msgstr "Naučit klávesy"
 
 msgid "Teach me a key"
-msgstr "Naučte mne klávesu"
+msgstr "Naučit klávesu"
 
 #, c-format
 msgid ""
@@ -3713,17 +3737,17 @@ msgid ""
 "If you want to escape, press a single Escape key\n"
 "and wait as well."
 msgstr ""
-"Prosím, stiskněte %s\n"
+"Stiskněte %s\n"
 "a vyčkejte, dokud tato zpráva nezmizí.\n"
 "\n"
-"Potom stiskněte klávesu znovu až se objeví OK\n"
-"za tímto tlačítkem.\n"
+"Potom stiskněte klávesu znovu aby se\n"
+"za tlačítkem zobrazilo OK.\n"
 "\n"
-"Chcete-li operaci přerušit, stiskněte jednou klávesu Esc\n"
+"Pokud chcete přerušit, stiskněte jednou klávesu Esc\n"
 "a opět vyčkejte."
 
 msgid "Cannot accept this key"
-msgstr "Tuto klávesu nelze akceptovat"
+msgstr "Tuto klávesu nelze přijmout"
 
 #, c-format
 msgid "You have entered \"%s\""
@@ -3737,24 +3761,28 @@ msgid ""
 "It seems that all your keys already\n"
 "work fine. That's great."
 msgstr ""
-"Vypadá to, že všechny klávesy již fungují.\n"
+"Vypadá to, že všechny klávesy už fungují.\n"
 "To je skvělé."
 
 msgid "&Discard"
-msgstr "&Zrušit"
+msgstr "Zaho&dit"
 
 msgid ""
 "Great! You have a complete terminal database!\n"
 "All your keys work well."
 msgstr ""
-"Skvělé! Máte kompletní databázi terminálu.\n"
-"Všechny vaše klávesy budou funkční."
+"Skvělé! Máte kompletní databázi pro terminál.\n"
+"Všechny klávesy budou fungovat."
 
 msgid ""
 "Press all the keys mentioned here. After you have done it, check\n"
 "which keys are not marked with OK. Press space on the missing\n"
 "key, or click with the mouse to define it. Move around with Tab."
 msgstr ""
+"Stiskněte všechny zde zmíněné klávesy. Potom zkontrolujte\n"
+"které klávesy nejsou označené jako OK. Na těch chybějících stiskněte "
+"mezerník,\n"
+"nebo na ně klikněte myší a určete je. Pohybujte se tabulátorem."
 
 #, c-format
 msgid ""
@@ -3765,7 +3793,7 @@ msgstr ""
 "%s\n"
 
 msgid "Home directory path is not absolute"
-msgstr "Cesta k domovskému adresáři není absolutní"
+msgstr "Popis umístění domovské složky není zadaný od té kořenové"
 
 #, c-format
 msgid ""
@@ -3773,12 +3801,15 @@ msgid ""
 "Failed while close:\n"
 "%s\n"
 msgstr ""
+"\n"
+"Nezdar při zavírání:\n"
+"%s\n"
 
 msgid "Choose codepage"
 msgstr "Zvolte znakovou sadu"
 
 msgid "-  < No translation >"
-msgstr "-  < Bez převodu >"
+msgstr "–  < Bez převodu >"
 
 msgid "%b %e  %Y"
 msgstr "%e.%b  %Y"
@@ -3791,7 +3822,7 @@ msgid ""
 "Cannot save file %s:\n"
 "%s"
 msgstr ""
-"Nemohu uložit soubor %s:\n"
+"Soubor %s se nedaří uložit:\n"
 "%s"
 
 msgid ""
@@ -3799,20 +3830,21 @@ msgid ""
 "running on this terminal.\n"
 "Subshell support will be disabled."
 msgstr ""
-"GNU Midnight Commander je již\n"
-"spuštěn na tomto terminálu.\n"
-"Podpora podshellu bude zakázána."
+"GNU Midnight Commander je v tomto\n"
+"terminálu už spuštěný.\n"
+"Podřízený shell proto bude pro další\n"
+"instanci vypnut."
 
 #, c-format
 msgid "Cannot open named pipe %s\n"
-msgstr "Nelze otevřít pojmenovanou rouru %s\n"
+msgstr "Nedaří s otevřít pojmenovanou rouru %s\n"
 
 msgid "The shell is still active. Quit anyway?"
 msgstr "Shell je stále aktivní, přesto ukončit?"
 
 #, c-format
 msgid "Warning: Cannot change to %s.\n"
-msgstr "Varování: Adresář nelze změnit na %s.\n"
+msgstr "Varování: Nedaří se přepnout do složky %s.\n"
 
 msgid "Using the S-Lang library with terminfo database\n"
 msgstr "Používá se knihovna S-Lang s databází terminfo\n"
@@ -3824,28 +3856,28 @@ msgid "Using the ncursesw library\n"
 msgstr "Používá se knihovna ncursesw\n"
 
 msgid "With builtin Editor\n"
-msgstr "S vestavěným editorem\n"
+msgstr "Vestavěným editorem\n"
 
 msgid "With optional subshell support\n"
-msgstr "S volitelnou podporou podshellu\n"
+msgstr "S volitelnou podporou podřízeného shellu\n"
 
 msgid "With subshell support as default\n"
-msgstr "Se standardní podporou podshellu\n"
+msgstr "Se výchozí podporou podřízeného shellu\n"
 
 msgid "With support for background operations\n"
 msgstr "S podporou operací na pozadí\n"
 
 msgid "With mouse support on xterm and Linux console\n"
-msgstr "S podporou myši v konzolích Xterm a Linux\n"
+msgstr "S podporou myši v Xterm a Linux konzolích\n"
 
 msgid "With mouse support on xterm\n"
-msgstr "S podporou myši v konzoli Xterm\n"
+msgstr "S podporou myši v Xterm konzoli\n"
 
 msgid "With support for X11 events\n"
 msgstr "S podporou X11 událostí\n"
 
 msgid "With internationalization support\n"
-msgstr "S podporou internacionalizace\n"
+msgstr "S podporou pro místní jazyky a zvyklosti\n"
 
 msgid "With multiple codepages support\n"
 msgstr "S podporou více kódových stránek\n"
@@ -3863,22 +3895,22 @@ msgid "Data types:"
 msgstr "Typy dat:"
 
 msgid "Home directory:"
-msgstr "Domovský adresář:"
+msgstr "Domovská složka:"
 
 msgid "Profile root directory:"
-msgstr "Adresář root profilu:"
+msgstr "Kořenová složka profilu:"
 
 msgid "System data"
 msgstr "Systémová data"
 
 msgid "Config directory:"
-msgstr "Adresář nastavení:"
+msgstr "Složka s nastaveními:"
 
 msgid "Data directory:"
-msgstr "Adresář dat:"
+msgstr "Složka s daty:"
 
 msgid "File extension handlers:"
-msgstr "Obsluhy přípon souboru"
+msgstr "Obsluha přípon souborů:"
 
 msgid "VFS plugins and scripts:"
 msgstr "VFS zásuvné moduly a skripty:"
@@ -3887,7 +3919,7 @@ msgid "User data"
 msgstr "Uživatelská data"
 
 msgid "Cache directory:"
-msgstr "Adresář mezipaměti:"
+msgstr "Složka mezipaměti:"
 
 msgid "Debug"
 msgstr "Ladit"
@@ -3896,49 +3928,49 @@ msgid "ERROR:"
 msgstr "CHYBA:"
 
 msgid "True:"
-msgstr "True:"
+msgstr "Ano:"
 
 msgid "False:"
-msgstr "False:"
+msgstr "Ne:"
 
 msgid "Error calling program"
 msgstr "Chyba při volání programu"
 
 msgid "Warning -- ignoring file"
-msgstr "Varování -- soubor ignorován"
+msgstr "Varování – soubor ignorován"
 
 #, c-format
 msgid ""
 "File %s is not owned by root or you or is world writable.\n"
 "Using it may compromise your security"
 msgstr ""
-"Soubor %s není vlastněn uživatelem root nebo vámi, případně do něj mohou\n"
-"všichni zapisovat. Jeho použití by snižovalo Vaši bezpečnost"
+"Soubor %s není vlastněn uživatelem root nebo vámi, případně do něj mohou "
+"zapisovat všichni. Jeho použití může zhoršit zabezpečení"
 
 msgid "Format error on file Extensions File"
 msgstr "Chyba formátu v souboru přípon"
 
 #, c-format
 msgid "The %%var macro has no default"
-msgstr "Makro %%var nemá implicitní hodnotu"
+msgstr "Makro proměnné %% nemá určenou výchozí hodnotu"
 
 #, c-format
 msgid "The %%var macro has no variable"
-msgstr "Makro %%var nemá proměnnou"
+msgstr "Makro proměnné %% nemá proměnnou"
 
 #, c-format
 msgid "No suitable entries found in %s"
-msgstr "V %s nejsou odpovídající položky"
+msgstr "V %s nebyly nalezeny odpovídající položky"
 
 msgid "User menu"
-msgstr "Uživatelské menu"
+msgstr "Uživatelská nabídka"
 
 #, c-format
 msgid ""
 "Cannot open cpio archive\n"
 "%s"
 msgstr ""
-"Nelze otevřít cpio archiv\n"
+"Nedaří se otevřít cpio archiv\n"
 "%s"
 
 #, c-format
@@ -3946,7 +3978,7 @@ msgid ""
 "Premature end of cpio archive\n"
 "%s"
 msgstr ""
-"Neočekávaný konec cpio archivu\n"
+"Předčasný konec cpio archivu\n"
 "%s"
 
 #, c-format
@@ -3956,14 +3988,14 @@ msgid ""
 "in cpio archive\n"
 "%s"
 msgstr ""
-"Nekonzistentní pevné odkazy\n"
+"Nejednotné pevné odkazy\n"
 "z %s\n"
 "v cpio archivu\n"
 "%s"
 
 #, c-format
 msgid "%s contains duplicate entries! Skipping!"
-msgstr "%s obsahuje duplicitní položky! Přeskakují se!"
+msgstr "%s obsahuje duplicitní položky! Budou přeskočeny!"
 
 #, c-format
 msgid ""
@@ -3986,7 +4018,7 @@ msgid ""
 "Cannot open %s archive\n"
 "%s"
 msgstr ""
-"Nelze otevřít %s archiv\n"
+"Nedaří se otevřít %s archiv\n"
 "%s"
 
 msgid "Inconsistent extfs archive"
@@ -3994,58 +4026,59 @@ msgstr "Poškozený extfs archiv"
 
 #, c-format
 msgid "Warning: cannot open %s directory\n"
-msgstr "Varování: není možné otevřít adresář %s\n"
+msgstr "Varování: složku %s se nedaří otevřít\n"
 
 #, c-format
 msgid "fish: Disconnecting from %s"
-msgstr "fish: Odpojení od %s"
+msgstr "fish: Odpojování od %s"
 
 msgid "fish: Waiting for initial line..."
-msgstr "fish: Čekání na počáteční linku..."
+msgstr "fish: Čekání na úvodní spojení…"
 
 msgid "Sorry, we cannot do password authenticated connections for now."
-msgstr "Bohužel, nyní nelze provést heslem autentizované spojení."
+msgstr "Je nám líto, ale prozatím nelze navazovat heslem se ověřující spojení."
 
 #, c-format
 msgid "fish: Password is required for %s"
-msgstr "fish: Heslo je vyžadováno pro %s"
+msgstr "fish: Pro %s je vyžadováno heslo"
 
 msgid "fish: Sending password..."
-msgstr "fish: Posílá se heslo..."
+msgstr "fish: Odesílání hesla…"
 
 msgid "fish: Sending initial line..."
-msgstr "fish: Počáteční řádka odeslána..."
+msgstr "fish: Odesílá se úvodní řádek…"
 
 msgid "fish: Handshaking version..."
-msgstr "fish: Domlouvání verze..."
+msgstr "fish: Domlouvání verze…"
 
 msgid "fish: Getting host info..."
-msgstr "fish: Získávání informací o hostiteli..."
+msgstr "fish: Získávání informací o hostiteli…"
 
 #, c-format
 msgid "fish: Reading directory %s..."
-msgstr "fish: Načítaní adresáře %s..."
+msgstr "fish: Načítaní složky %s…"
 
 #, c-format
 msgid "%s: done."
-msgstr "%s: zpracován."
+msgstr "%s: hotovo."
 
 #, c-format
 msgid "%s: failure"
-msgstr "%s: selhání"
+msgstr "%s: nezdar"
 
 #, c-format
 msgid "fish: store %s: sending command..."
-msgstr "fish: ukládám %s: posílám příkaz..."
+msgstr "fish: ukládání %s: odesílání příkazu…"
 
 msgid "fish: Local read failed, sending zeros"
-msgstr "fish: Selhalo čtení lokálního souboru, posílám nuly"
+msgstr ""
+"fish: Načtení místního souboru se nezdařilo, náhradně se odesílají nuly"
 
 msgid "fish: storing file"
-msgstr "fish: ukládám soubor"
+msgstr "fish: ukládání souboru"
 
 msgid "Aborting transfer..."
-msgstr "Přerušení přenosu..."
+msgstr "Přerušení přenosu…"
 
 msgid "Error reported after abort."
 msgstr "Po přerušení byla oznámena chyba."
@@ -4055,37 +4088,37 @@ msgstr "Přerušení přenosu proběhlo
 
 #, c-format
 msgid "ftpfs: Disconnecting from %s"
-msgstr "ftpfs: Odpojení od %s"
+msgstr "ftpfs: Odpojuje se od %s"
 
 #, c-format
 msgid "FTP: Password required for %s"
-msgstr "FTP: Heslo je vyžadováno pro %s"
+msgstr "FTP: Pro %s je vyžadováno heslo"
 
 msgid "ftpfs: sending login name"
-msgstr "ftpfs: jméno odesláno"
+msgstr "ftpfs: odesílá se přihlašovací jméno"
 
 msgid "ftpfs: sending user password"
-msgstr "ftpfs: heslo pro anonymní ftp odesláno"
+msgstr "ftpfs: odesílá se heslo uživatele"
 
 #, c-format
 msgid "FTP: Account required for user %s"
-msgstr "FTP: Účet je vyžadován pro uživatele %s"
+msgstr "FTP: Pro uživatele %s je vyžadován účet"
 
 msgid "Account:"
 msgstr "Účet:"
 
 msgid "ftpfs: sending user account"
-msgstr "ftpfs: posílám uživatelský účet"
+msgstr "ftpfs: odesílá se uživatelský účet"
 
 msgid "ftpfs: logged in"
-msgstr "ftpfs: přihlášen"
+msgstr "ftpfs: přihlášeni"
 
 #, c-format
 msgid "ftpfs: Login incorrect for user %s "
-msgstr "ftpfs: Přihlášení uživatele %s selhalo "
+msgstr "ftpfs: Přihlášení uživatele %s se nezdařilo "
 
 msgid "ftpfs: Invalid host name."
-msgstr "ftpfs: Chybné jméno počítače."
+msgstr "ftpfs: Chybný název počítače."
 
 #, c-format
 msgid "ftpfs: %s"
@@ -4093,51 +4126,51 @@ msgstr "ftpfs: %s"
 
 #, c-format
 msgid "ftpfs: making connection to %s"
-msgstr "ftpfs: probíhá připojování k %s"
+msgstr "ftpfs: navazování spojení s %s"
 
 msgid "ftpfs: connection interrupted by user"
-msgstr "ftpfs: připojování přerušeno uživatelem"
+msgstr "ftpfs: připojení přerušeno uživatelem"
 
 #, c-format
 msgid "ftpfs: connection to server failed: %s"
-msgstr "ftpfs: připojování k serveru selhalo: %s"
+msgstr "ftpfs: připojení k serveru se nezdařilo: %s"
 
 #, c-format
 msgid "Waiting to retry... %d (Control-G to cancel)"
-msgstr ""
+msgstr "Čekání na opakovaný pokus… %d (Storno CTRL+G)"
 
 msgid "ftpfs: invalid address family"
-msgstr "ftpfs: chybná rodina adres"
+msgstr "ftpfs: neplatná generace adresy"
 
 #, c-format
 msgid "ftpfs: could not create socket: %s"
-msgstr "ftpfs: nelze vytvořit soket: %s"
+msgstr "ftpfs: nedaří se vytvořit soket: %s"
 
 msgid "ftpfs: could not setup passive mode"
-msgstr "ftpfs: nelze nastavit pasivní režim"
+msgstr "ftpfs: nedaří se nastavit pasivní režim"
 
 msgid "ftpfs: aborting transfer."
-msgstr "ftpfs: přerušení přenosu."
+msgstr "ftpfs: přenos bude přerušen."
 
 #, c-format
 msgid "ftpfs: abort error: %s"
-msgstr "ftpfs: chyba při přerušení: %s"
+msgstr "ftpfs: chyba při přerušování: %s"
 
 msgid "ftpfs: abort failed"
-msgstr "ftpfs: přerušení selhalo"
+msgstr "ftpfs: přerušení se nezdařilo"
 
 msgid "ftpfs: CWD failed."
-msgstr "ftpfs: příkaz CWD selhal."
+msgstr "ftpfs: příkaz CWD se nezdařil."
 
 msgid "ftpfs: couldn't resolve symlink"
-msgstr "ftpfs: nelze najít cíle symlinků"
+msgstr "ftpfs: nedaří se najít cíle symbolických odkazů"
 
 msgid "Resolving symlink..."
-msgstr "Vyhledávání cílů symlinků..."
+msgstr "Vyhledávání cílů symbolických odkazů…"
 
 #, c-format
 msgid "ftpfs: Reading FTP directory %s... %s%s"
-msgstr "ftpfs: Čte se FTP adresář %s... %s%s"
+msgstr "ftpfs: Načítání FTP složky %s… %s%s"
 
 msgid "(strict rfc959)"
 msgstr "(striktní rfc959)"
@@ -4146,10 +4179,10 @@ msgid "(chdir first)"
 msgstr "(nejdříve chdir)"
 
 msgid "ftpfs: failed; nowhere to fallback to"
-msgstr "ftpfs: selhání; není jiná možnost"
+msgstr "ftpfs: nezdar; není jiná možnost"
 
 msgid "ftpfs: storing file"
-msgstr "ftpfs: ukládám soubor"
+msgstr "ftpfs: ukládá se soubor"
 
 msgid ""
 "~/.netrc file has incorrect mode\n"
@@ -4160,7 +4193,7 @@ msgstr ""
 
 #, c-format
 msgid "%s: Warning: file %s not found\n"
-msgstr ""
+msgstr "%s: Varování: soubor %s nenalezen\n"
 
 #, c-format
 msgid ""
@@ -4183,10 +4216,10 @@ msgid "sftp: an error occurred while rea
 msgstr "sftp: došlo k chybě při čtení %s: %s"
 
 msgid "sftp: Unable to get current user name."
-msgstr "sftp: Nelze získat aktuální uživatelské jméno."
+msgstr "sftp: Nedaří se získat stávající uživatelské jméno."
 
 msgid "sftp: Invalid host name."
-msgstr "sftp: Chybné jméno počítače."
+msgstr "sftp: Chybný název počítače."
 
 #, c-format
 msgid "sftp: %s"
@@ -4194,75 +4227,79 @@ msgstr "sftp: %s"
 
 #, c-format
 msgid "sftp: making connection to %s"
-msgstr "sftp: probíhá připojování k %s"
+msgstr "sftp: navazování spojení s %s"
 
 msgid "sftp: connection interrupted by user"
 msgstr "sftp: připojování přerušeno uživatelem"
 
 #, c-format
 msgid "sftp: connection to server failed: %s"
-msgstr "sftp: připojování k serveru selhalo: %s"
+msgstr "sftp: připojování k serveru se nezdařilo: %s"
 
 #, c-format
 msgid "sftp: Enter passphrase for %s "
 msgstr "sftp: Zadejte heslo pro %s "
 
 msgid "sftp: Passphrase is empty."
-msgstr "sftp: Heslo je prázdné."
+msgstr "sftp: Heslová fráze není vyplněná."
 
 #, c-format
 msgid "sftp: Enter password for %s "
 msgstr "sftp: Zadejte heslo pro %s "
 
 msgid "sftp: Password is empty."
-msgstr "sftp: Heslo je prázdné."
+msgstr "sftp: Heslo není vyplněné."
 
 msgid "sftp: Failure establishing SSH session"
-msgstr "sftp: Selhání SSH relace"
+msgstr "sftp: Nepodařilo se navázat SSH sezení"
 
 msgid "sftp: No file handler data present for reading file"
-msgstr ""
+msgstr "sftp: Není přítomen žádný obslužný program pro čtení souboru"
+
+#, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: chyba soketu: %s"
 
 #, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
-msgstr ""
+msgstr "sftp: (přerušení CTRL+G) Vypisování… %s"
 
 msgid "sftp: Listing done."
 msgstr "sftp: Vypsání dokončeno."
 
 #, c-format
 msgid "reconnect to %s failed"
-msgstr "obnova připojení k %s selhala"
+msgstr "obnova připojení k %s se nezdařila"
 
 msgid "Authentication failed"
-msgstr "Autentizace selhala"
+msgstr "Ověření se nezdařilo"
 
 #, c-format
 msgid "Error %s creating directory %s"
-msgstr "Odchylka %s vytváří adresář %s"
+msgstr "Chyba %s při vytváření složky %s"
 
 #, c-format
 msgid "Error %s removing directory %s"
-msgstr "Odchylka %s ruší adresář %s"
+msgstr "Chyba %s při odstraňování složky %s"
 
 #, c-format
 msgid "%s opening remote file %s"
-msgstr "%s otevírá vzdálený soubor %s"
+msgstr "%s otevírá se vzdálený soubor %s"
 
 #, c-format
 msgid "%s removing remote file %s"
-msgstr "%s odstraňuje vzdálený soubor %s"
+msgstr "%s odstraňuje se vzdálený soubor %s"
 
 #, c-format
 msgid "%s renaming files\n"
-msgstr "%s přejmenovává soubory\n"
+msgstr "%s přejmenovávají se soubory\n"
 
 #, c-format
 msgid ""
 "Cannot open tar archive\n"
 "%s"
 msgstr ""
-"Nelze otevřít archiv .tar\n"
+".tar archiv se nedaří otevřít\n"
 "%s"
 
 msgid "Inconsistent tar archive"
@@ -4283,10 +4320,10 @@ msgid "undelfs: error"
 msgstr "undelfs: chyba"
 
 msgid "not enough memory"
-msgstr "není dostatek paměti"
+msgstr "nedostatek paměti"
 
 msgid "while allocating block buffer"
-msgstr "během alokace bloku bufferu"
+msgstr "při přidělování vyrovnávací paměti bloků"
 
 #, c-format
 msgid "open_inode_scan: %d"
@@ -4294,61 +4331,61 @@ msgstr "open_inode_scan: %d"
 
 #, c-format
 msgid "while starting inode scan %d"
-msgstr "během spouštění kontroly i-uzlů %d"
+msgstr "při spouštění kontroly i-uzlů %d"
 
 #, c-format
 msgid "undelfs: loading deleted files information %d inodes"
-msgstr "undelfs: čte se informace o smazaných souborech %d i-uzlů"
+msgstr "undelfs: načítají se informace o smazaných souborech %d i-uzlů"
 
 #, c-format
 msgid "while calling ext2_block_iterate %d"
-msgstr "během volání ext2_block_iterate %d"
+msgstr "při volání ext2_block_iterate %d"
 
 msgid "no more memory while reallocating array"
-msgstr "není již další paměť na přealokování pole"
+msgstr "došla paměť při opětovném přidělování pole"
 
 #, c-format
 msgid "while doing inode scan %d"
-msgstr "během kontroly i-uzlů %d"
+msgstr "při kontrole i-uzlů %d"
 
 #, c-format
 msgid "Cannot open file %s"
-msgstr "Nelze otevřít soubor %s"
+msgstr "Nedaří se otevřít soubor %s"
 
 msgid "undelfs: reading inode bitmap..."
-msgstr "undelfs: čte se bitová mapa i-uzlů..."
+msgstr "undelfs: čte se bitová mapa i-uzlů…"
 
 #, c-format
 msgid ""
 "Cannot load inode bitmap from:\n"
 "%s"
 msgstr ""
-"Nelze načíst bitovou mapu i-uzlů z:\n"
+"Nedaří se načíst bitovou mapu i-uzlů z:\n"
 "%s"
 
 msgid "undelfs: reading block bitmap..."
-msgstr "undelfs: čte se bitová mapa bloků..."
+msgstr "undelfs: načítání bitové mapy bloku…"
 
 #, c-format
 msgid ""
 "Cannot load block bitmap from:\n"
 "%s"
 msgstr ""
-"Nelze načíst bitovou mapu bloků z:\n"
+"Nedaří se načíst bitovou mapu bloků z:\n"
 "%s"
 
 msgid "vfs_info is not fs!"
-msgstr "vfs_info není soub. systém!"
+msgstr "vfs_info není soubor. systém!"
 
 msgid "You have to chdir to extract files first"
-msgstr "Před získáním souborů je nutné nejdříve změnit adresář"
+msgstr "Před získáním souborů je nutné nejdříve změnit složku (chdir)"
 
 msgid "while iterating over blocks"
-msgstr "během iterace přes bloky"
+msgstr "při průchodu nad bloky"
 
 #, c-format
 msgid "Cannot open file \"%s\""
-msgstr "Nelze otevřít soubor „%s“"
+msgstr "Nedaří se otevřít soubor „%s“"
 
 msgid "Ext2lib error"
 msgstr "Chyba ext2lib"
@@ -4357,68 +4394,70 @@ msgid "Invalid value"
 msgstr "Neplatná hodnota"
 
 msgid "File was modified. Save with exit?"
-msgstr "Soubor byl změněn, uložit při odchodu?"
+msgstr "Soubor byl změněn, uložit při ukončování?"
 
 msgid "&Cancel quit"
-msgstr "&Zrušit odchod"
+msgstr "&Zrušit ukončování"
 
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file?"
 msgstr ""
-"Midnight Commander se ukončuje.\n"
+"Midnight Commander je ukončován.\n"
 "Uložit upravený soubor?"
 
 msgid "&Line number"
-msgstr "&Počet řádek"
+msgstr "Čísl&o řádku"
 
 msgid "Pe&rcents"
-msgstr "Procenta"
+msgstr "P&rocenta"
 
 msgid "&Decimal offset"
-msgstr "Pozice (dekadicky)"
+msgstr "Posun (&desítkově)"
 
 msgid "He&xadecimal offset"
-msgstr "Pozice (hexadecimálně)"
+msgstr "Posun (hexadecimálně)"
 
 msgid "Goto"
-msgstr "Přejít"
+msgstr "Přejít na"
 
 msgid "ButtonBar|Ascii"
-msgstr "TlačítkováLišta|Ascii"
+msgstr "ButtonBar|Ascii"
 
 msgid "ButtonBar|HxSrch"
-msgstr "TlačítkováLišta|HxHled"
+msgstr "ButtonBar|HexHled"
 
 msgid "ButtonBar|UnWrap"
-msgstr "TlačítkováLišta|Nezal."
+msgstr "ButtonBar|Nezal."
 
 msgid "ButtonBar|Wrap"
-msgstr "TlačítkováLišta|Zalam."
+msgstr "ButtonBar|Zalam."
 
 msgid "ButtonBar|Hex"
-msgstr "TlačítkováLišta|Hex"
+msgstr "ButtonBar|Hex"
 
 msgid "ButtonBar|Goto"
-msgstr "TlačítkováLišta|JdiNa"
+msgstr "ButtonBar|JítNa"
 
 msgid "ButtonBar|Raw"
-msgstr "TlačítkováLišta|Hrubě"
+msgstr "ButtonBar|Nezprac"
 
 msgid "ButtonBar|Parse"
-msgstr "TlačítkováLišta|Rozeb."
+msgstr "ButtonBar|Rozbor"
 
 msgid "ButtonBar|Unform"
-msgstr "TlačítkováLišta|Odform"
+msgstr "ButtonBar|Odform"
 
 msgid "ButtonBar|Format"
-msgstr "TlačítkováLišta|Formát"
+msgstr "ButtonBar|Formát"
 
 #, c-format
 msgid ""
 "Failed to read data from child stdout:\n"
 "%s"
 msgstr ""
+"Nepodařilo se načíst data ze standardního vstupu podřízeného procesu:\n"
+"%s"
 
 #, c-format
 msgid ""
@@ -4426,16 +4465,16 @@ msgid ""
 "%s\n"
 "Data may have been written or not"
 msgstr ""
-"Chyba v průběhu zavírání souboru:\n"
+"Chyba v při zavírání souboru:\n"
 "%s\n"
-"Data mohou být zapsána nebo ne."
+"Není jisté, zda data byla zapsána"
 
 #, c-format
 msgid ""
 "Cannot save file:\n"
 "%s"
 msgstr ""
-"Nemohu uložit soubor:\n"
+"Soubor se nedaří uložit:\n"
 "%s"
 
 msgid "View: "
@@ -4446,17 +4485,19 @@ msgid ""
 "Cannot open \"%s\"\n"
 "%s"
 msgstr ""
-"Nelze otevřít „%s“\n"
+"„%s“ se nedaří otevřít\n"
 "%s"
 
 msgid "Cannot view: not a regular file"
-msgstr "Nelze prohlížet: není to normální soubor"
+msgstr "Není možné prohlížet: nejedná se o běžný soubor"
 
 #, c-format
 msgid ""
 "Cannot open \"%s\" in parse mode\n"
 "%s"
 msgstr ""
+"„%s\" se nedaří otevřít v režimu pro zpracování (parse)\n"
+"%s"
 
 msgid "Search done"
 msgstr "Hledání dokončeno"
@@ -4465,4 +4506,4 @@ msgid "Continue from beginning?"
 msgstr "Pokračovat od začátku?"
 
 msgid "Cannot fetch a local copy of /ftp://some.host/editme.txt"
-msgstr "Nelze načíst lokální kopii /ftp://some.host/editme.txt"
+msgstr "Nedaří získat místní kopii souboru /ftp://some.host/editme.txt"
Binary files mc-4.8.20/po/da.gmo and mc-4.8.21/po/da.gmo differ
diff -urpN mc-4.8.20/po/da.po mc-4.8.21/po/da.po
--- mc-4.8.20/po/da.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/da.po	2018-06-03 11:03:46.000000000 +0200
@@ -6,14 +6,16 @@
 # Henry Madsen Jensen <henry@madsen-jensen.dk>, 2016
 # Henry Madsen Jensen <henry@madsen-jensen.dk>, 2016
 # Joe Hansen <joedalton2@yahoo.dk>, 2014
+# Morten Bo Johansen <mortenbo@hotmail.com>, 2018
+# scootergrisen, 2018
 # Slava Zanko <slavazanko@gmail.com>, 2011
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
-"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-05-15 17:16+0000\n"
+"Last-Translator: Morten Bo Johansen <mortenbo@hotmail.com>\n"
 "Language-Team: Danish (http://www.transifex.com/mc/mc/language/da/)\n"
 "Language: da\n"
 "MIME-Version: 1.0\n"
@@ -23,7 +25,7 @@ msgstr ""
 
 # "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 msgid "Warning: cannot load codepages list"
-msgstr "Advarsel: kan ikke indlæse codepages-liste"
+msgstr "Advarsel: kan ikke indlæse tegnsæt-liste"
 
 msgid "7-bit ASCII"
 msgstr "7-bit ASCII"
@@ -33,24 +35,24 @@ msgid "Cannot translate from %s to %s"
 msgstr "Kan ikke oversætte fra %s til %s"
 
 msgid "Event system already initialized"
-msgstr ""
+msgstr "Hændelsessystem allerede initieret"
 
 msgid "Failed to initialize event system"
-msgstr ""
+msgstr "Kunne ikke initiere hændelsessystem"
 
 msgid "Event system not initialized"
-msgstr ""
+msgstr "Hændelsessystem ikke initieret"
 
 msgid "Check input data! Some of parameters are NULL!"
-msgstr ""
+msgstr "Tjek inputdata! Nogle af parametrene er NULL!"
 
 #, c-format
 msgid "Unable to create group '%s' for events!"
-msgstr ""
+msgstr "Kan ikke oprette gruppen '%s' for hændelser!"
 
 #, c-format
 msgid "Unable to create event '%s'!"
-msgstr ""
+msgstr "Kan ikke oprette hændelsen '%s'!"
 
 #, c-format
 msgid ""
@@ -58,7 +60,7 @@ msgid ""
 "User: %s\n"
 "Process ID: %d"
 msgstr ""
-"Fil »%s« er ved at blive redigeret.\n"
+"Filen »%s« er ved at blive redigeret.\n"
 "Bruger: %s\n"
 "Proces-id: %d"
 
@@ -80,7 +82,7 @@ msgstr "KRITISK: Ikke en folder:"
 
 #, c-format
 msgid "An error occurred while migrating user settings: %s"
-msgstr ""
+msgstr "Der opstod en fejl ved flytning af brugerindstillinger: %s"
 
 #, c-format
 msgid ""
@@ -89,29 +91,39 @@ msgid ""
 "To get more info, please visit\n"
 "http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html"
 msgstr ""
+"Dine gamle indstillinger blev flyttet fra %s\n"
+"til mapper anbefalet af Freedesktop.\n"
+"Besøg venligst http://standards.freedesktop.org/basedir-spec/basedir-spec-"
+"latest.html\n"
+"for mere information"
 
 #, c-format
 msgid ""
 "Your old settings were migrated from %s\n"
 "to %s\n"
 msgstr ""
+"Dine gamle indstillinger blev flyttet fra %s\n"
+"til %s\n"
 
 msgid ""
 "Number out of range (should be in byte range, 0 <= n <= 0xFF, expressed in "
 "hex)"
 msgstr ""
+"Tal udenfor område (skal være i byteområde, 0 <= n <= 0xFF, udtrykt i hex)"
 
 msgid "Invalid character"
-msgstr ""
+msgstr "Ugyldigt tegn"
 
 msgid "Unmatched quotes character"
-msgstr ""
+msgstr "Ikke matchet citationstegn"
 
 #, c-format
 msgid ""
 "Hex pattern error at position %d:\n"
 "%s."
 msgstr ""
+"Fejl i heksmønster ved placering %d:\n"
+"%s."
 
 msgid "Search string not found"
 msgstr "Søgestreng blev ikke fundet"
@@ -146,7 +158,7 @@ msgid ""
 "Unable to load '%s' skin.\n"
 "Default skin has been loaded"
 msgstr ""
-"Kunne ikke indlæse temaet »%s«.\n"
+"Kan ikke indlæse temaet »%s«.\n"
 "Standardtemaet er indlæst"
 
 #, c-format
@@ -154,7 +166,7 @@ msgid ""
 "Unable to parse '%s' skin.\n"
 "Default skin has been loaded"
 msgstr ""
-"Kunne ikke fortolke temaet »%s«.\n"
+"Kan ikke fortolke temaet »%s«.\n"
 "Standardtemaet er indlæst"
 
 #, c-format
@@ -163,6 +175,9 @@ msgid ""
 "%s\n"
 "Default skin has been loaded"
 msgstr ""
+"Kan ikke bruge '%s'-temaet med understøttelse af ægte farver:\n"
+"%s\n"
+"Standardtemaet er blevet indlæst"
 
 #, c-format
 msgid ""
@@ -170,21 +185,22 @@ msgid ""
 "on non-256 colors terminal.\n"
 "Default skin has been loaded"
 msgstr ""
-"Kunne ikke bruge »%s«-tema med 256 farveunderstøttelse\n"
-"på ikke-256 farveterminal.\n"
+"Kan ikke bruge »%s«-tema med understøttelse af\n"
+"256 farver, på terminal som ikke er bruger 256 farver.\n"
 "Standardtema er blevet indlæst"
 
 msgid "True color not supported with ncurses."
-msgstr ""
+msgstr "Ægte farver understøttes ikke med ncurses."
 
 msgid "True color not supported in this slang version."
-msgstr ""
+msgstr "Ægter farver understøttes ikke i denne version af slang."
 
 msgid "Your terminal doesn't even seem to support 256 colors."
-msgstr ""
+msgstr "Din terminal ser ikke ud til at understøtte 256 farver."
 
 msgid "Set COLORTERM=truecolor if your terminal really supports true colors."
 msgstr ""
+"Sæt COLORTERM=truecolor hvis din terminal virkeligt understøtter ægte farver."
 
 msgid "Escape"
 msgstr "Escape"
@@ -271,10 +287,10 @@ msgid "Right arrow"
 msgstr "Højre pil"
 
 msgid "Insert"
-msgstr "Indsæt"
+msgstr "Insert"
 
 msgid "Delete"
-msgstr "Slet"
+msgstr "Delete"
 
 msgid "Home"
 msgstr "Home"
@@ -283,10 +299,10 @@ msgid "End key"
 msgstr "End-tast"
 
 msgid "Page Up"
-msgstr "Side op"
+msgstr "Page Up"
 
 msgid "Page Down"
-msgstr "Side ned"
+msgstr "Page Down"
 
 msgid "/ on keypad"
 msgstr "/ på num. tastatur"
@@ -301,10 +317,10 @@ msgid "+ on keypad"
 msgstr "+ på numerisk tastatur"
 
 msgid "Left arrow keypad"
-msgstr "Venstrepil på numerisk tastatur"
+msgstr "Venstre pil på numerisk tastatur"
 
 msgid "Right arrow keypad"
-msgstr "Højrepil på numerisk tastatur"
+msgstr "Højre pil på numerisk tastatur"
 
 msgid "Up arrow keypad"
 msgstr "Pil op på numerisk tastatur"
@@ -313,22 +329,22 @@ msgid "Down arrow keypad"
 msgstr "Pil ned på numerisk tastatur"
 
 msgid "Home on keypad"
-msgstr "Hjem på numerisk tastatur"
+msgstr "Home på numerisk tastatur"
 
 msgid "End on keypad"
-msgstr "Slut på numerisk tastatur"
+msgstr "End på numerisk tastatur"
 
 msgid "Page Down keypad"
-msgstr "Side ned på numerisk tastatur"
+msgstr "Page Down på numerisk tastatur"
 
 msgid "Page Up keypad"
-msgstr "Side op på numerisk tastatur"
+msgstr "Page Up på numerisk tastatur"
 
 msgid "Insert on keypad"
-msgstr "Indsæt på numerisk tastatur"
+msgstr "Insert på numerisk tastatur"
 
 msgid "Delete on keypad"
-msgstr "Slet på numerisk tastatur"
+msgstr "Delete på numerisk tastatur"
 
 msgid "Enter on keypad"
 msgstr "Enter på numerisk tastatur"
@@ -352,7 +368,7 @@ msgid "C1 key"
 msgstr "C1-tast"
 
 msgid "Asterisk"
-msgstr "Stjerne"
+msgstr "Asterisk"
 
 msgid "Minus"
 msgstr "Minus"
@@ -397,13 +413,13 @@ msgid "Dollar sign"
 msgstr "Dollartegn"
 
 msgid "Quotation mark"
-msgstr "Anførelsestegn"
+msgstr "Anførselstegn"
 
 msgid "Percent sign"
 msgstr "Procenttegn"
 
 msgid "Caret"
-msgstr "Markør"
+msgstr "Indskudsmærke"
 
 msgid "Tilda"
 msgstr "Tilde"
@@ -418,7 +434,7 @@ msgid "Understrike"
 msgstr "Bundstreg"
 
 msgid "Pipe"
-msgstr "Streg"
+msgstr "Lodret streg"
 
 msgid "Left parenthesis"
 msgstr "Venstre parentes"
@@ -433,16 +449,16 @@ msgid "Right bracket"
 msgstr "Højre klamme"
 
 msgid "Left brace"
-msgstr "Venstre tuborgklamme"
+msgstr "Venstre krøllede parentes"
 
 msgid "Right brace"
-msgstr "Højre tuborgklamme"
+msgstr "Højre krøllede parentes"
 
 msgid "Enter"
 msgstr "Retur"
 
 msgid "Tab key"
-msgstr "Tab-tast"
+msgstr "Tabulatortast"
 
 msgid "Space key"
 msgstr "Mellemrum"
@@ -458,7 +474,7 @@ msgstr "Taltegn #"
 
 #. TRANSLATORS: Please translate as in "at sign" (@).
 msgid "At sign"
-msgstr "Snabeltegn"
+msgstr "Snabel-a"
 
 msgid "Ctrl"
 msgstr "Ctrl"
@@ -477,32 +493,32 @@ msgid ""
 "Screen size %dx%d is not supported.\n"
 "Check the TERM environment variable.\n"
 msgstr ""
-"Skærmstørrelse %dx%d er ikke understøttet.\n"
+"Skærmstørrelsen %dx%d understøttes ikke.\n"
 "Tjek TERM-miljøvariabelen.\n"
 
 msgid "B"
-msgstr ""
+msgstr "B"
 
 msgid "kB"
-msgstr ""
+msgstr "kB"
 
 msgid "KiB"
-msgstr ""
+msgstr "KiB"
 
 msgid "MB"
-msgstr ""
+msgstr "MB"
 
 msgid "MiB"
-msgstr ""
+msgstr "MiB"
 
 msgid "GB"
-msgstr ""
+msgstr "GB"
 
 msgid "GiB"
-msgstr ""
+msgstr "GiB"
 
 msgid "Cannot create pipe descriptor"
-msgstr "Kan ikke oprette datakanalbeskriver"
+msgstr "Kan ikke oprette datakanal-deskriptor"
 
 msgid "Cannot create pipe streams"
 msgstr "Kan ikke oprette datakanalstrømme"
@@ -562,15 +578,15 @@ msgstr "%s er ikke en mappe\n"
 
 #, c-format
 msgid "Directory %s is not owned by you\n"
-msgstr "Mappe %s er ikke ejet af dig\n"
+msgstr "Mappen %s er ikke ejet af dig\n"
 
 #, c-format
 msgid "Cannot set correct permissions for directory %s\n"
-msgstr "Kan ikke angive korrekte tilladelser for mappe %s\n"
+msgstr "Kan ikke angive korrekte tilladelser for mappen %s\n"
 
 #, c-format
 msgid "Cannot create temporary directory %s: %s\n"
-msgstr "Kan ikke oprette midlertidig mappe %s: %s\n"
+msgstr "Kan ikke oprette midlertidigt katalog %s: %s\n"
 
 #, c-format
 msgid "Temporary files will be created in %s\n"
@@ -584,7 +600,7 @@ msgid "Press any key to continue..."
 msgstr "Tryk på en tast for at fortsætte..."
 
 msgid "Cannot parse:"
-msgstr "Kunne ikke fortolke:"
+msgstr "Kan ikke fortolke:"
 
 msgid "More parsing errors will be ignored."
 msgstr "Flere fortolkningsfejl vil blive ignoreret."
@@ -606,7 +622,7 @@ msgid "DialogTitle|History cleanup"
 msgstr "Historikoprydning"
 
 msgid "Do you want clean this history?"
-msgstr "Ønsker du at rydde denne mappe?"
+msgstr "Ønsker du at rydde op i denne mappe?"
 
 msgid "&Yes"
 msgstr "&Ja"
@@ -615,7 +631,7 @@ msgid "&No"
 msgstr "&Nej"
 
 msgid "&OK"
-msgstr "&O.k."
+msgstr "&OK"
 
 msgid "&Cancel"
 msgstr "&Annuller"
@@ -634,10 +650,10 @@ msgid "&Abort"
 msgstr "&Afbryd"
 
 msgid "Displays the current version"
-msgstr "Udskriver versionsnummer"
+msgstr "Viser den nuværende version"
 
 msgid "Print data directory"
-msgstr "Udskriv datamappe"
+msgstr "Udskriv datakatalog"
 
 msgid "Print extended info about used data directories"
 msgstr "Udskriv udvidet information om brugte datamapper"
@@ -648,11 +664,14 @@ msgstr "Udskriv konfigurationsindstillin
 msgid "Print last working directory to specified file"
 msgstr "Udskriv sidste arbejdsmappe til angivet fil"
 
+msgid "<file>"
+msgstr "<fil>"
+
 msgid "Enables subshell support (default)"
-msgstr "Aktiverer underskalunderstøttelse (standard)"
+msgstr "Aktiverer understøttelse af underskal (standard)"
 
 msgid "Disables subshell support"
-msgstr "Deaktiverer underskalunderstøttelse"
+msgstr "Deaktiverer understøttelse af underskal"
 
 msgid "Log ftp dialog to specified file"
 msgstr "Gem ftp-meddelelser i angivet fil"
@@ -660,26 +679,32 @@ msgstr "Gem ftp-meddelelser i angivet fi
 msgid "Set debug level"
 msgstr "Angiv fejlsøgningsniveau"
 
+msgid "<integer>"
+msgstr "<heltal>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Bruger filfremviseren på en fil"
 
 msgid "Edit files"
 msgstr "Rediger filer"
 
+msgid "<file> ..."
+msgstr "<fil> ..."
+
 msgid "Forces xterm features"
 msgstr "Fremtvinger xterm-funktioner"
 
 msgid "Disable X11 support"
-msgstr "Deaktiver X11-understøttelse"
+msgstr "Deaktivér understøttelse af X11"
 
 msgid "Tries to use an old highlight mouse tracking"
-msgstr ""
+msgstr "Prøver at bruge en gammel fremhævelse af musesporing"
 
 msgid "Disable mouse support in text version"
 msgstr "Fjern museunderstøttelse i tekstversion"
 
 msgid "Tries to use termcap instead of terminfo"
-msgstr "Prøver at bruge termcap i steden for terminfo"
+msgstr "Prøver at bruge termcap i stedet for terminfo"
 
 msgid "To run on slow terminals"
 msgstr "For at køre på langsomme terminaler"
@@ -694,7 +719,7 @@ msgid "Load definitions of key bindings
 msgstr "Indlæs definitioner på genvejstaster fra angivet fil"
 
 msgid "Don't load definitions of key bindings from file, use defaults"
-msgstr ""
+msgstr "Indlæs ikke definitioner af tastebindinger fra fil, brug standarder"
 
 msgid "Requests to run in black and white"
 msgstr "Kør i sort-hvid"
@@ -705,6 +730,9 @@ msgstr "Forsøg at køre med farver"
 msgid "Specifies a color configuration"
 msgstr "Specificerer en farveindstilling"
 
+msgid "<string>"
+msgstr "<streng>"
+
 msgid "Show mc with specified skin"
 msgstr "Vis mc med angivet tema"
 
@@ -729,6 +757,24 @@ msgid ""
 "   Viewer:       viewnormal,viewbold, viewunderline, viewselected\n"
 "   Help:         helpnormal, helpitalic, helpbold, helplink, helpslink\n"
 msgstr ""
+"--colors NØGLEORD={FORG},{BAGG},{ATTR}:NØGLEORD2=...\n"
+"\n"
+"{FORG}, {BAGG} og {ATTR} kan udelades, så bruges standarden\n"
+"\n"
+" Nøgleord:\n"
+"   Globale:       errors, disabled, reverse, gauge, header\n"
+"                  input, inputmark, inputunchanged, commandlinemark\n"
+"                  bbarhotkey, bbarbutton, statusbar\n"
+"   Filvisning:    normal, selected, marked, markselect\n"
+"   Dialogbokse:   dnormal, dfocus, dhotnormal, dhotfocus, errdhotnormal,\n"
+"                  errdhotfocus\n"
+"   Menuer:        menunormal, menuhot, menusel, menuhotsel, menuinactive\n"
+"   Pop op-menuer: pmenunormal, pmenusel, pmenutitle\n"
+"   Editor:        editnormal, editbold, editmarked, editwhitespace,\n"
+"                  editlinestate, editbg, editframe, editframeactive\n"
+"                  editframedrag\n"
+"   Fremviser:     viewnormal,viewbold, viewunderline, viewselected\n"
+"   Hjælp:         helpnormal, helpitalic, helpbold, helplink, helpslink\n"
 
 #. TRANSLATORS: don't translate color names and attributes
 msgid ""
@@ -743,27 +789,40 @@ msgid ""
 "Attributes:\n"
 "   bold, italic, underline, reverse, blink; append more with '+'\n"
 msgstr ""
+"Standardfarver:\n"
+"   black, gray, red, brightred, green, brightgreen, brown,\n"
+"   yellow, blue, brightblue, magenta, brightmagenta, cyan,\n"
+"   brightcyan, lightgray og white\n"
+"\n"
+"Udvidede farver, når 256 farver er tilgængelig:\n"
+"   color16 til color255, eller rgb000 til rgb555 og gray0 til gray23\n"
+"\n"
+"Attributter:\n"
+"   bold, italic, underline, reverse, blink; tilføj flere med '+'\n"
 
 msgid "Color options"
 msgstr "Farveindstillinger"
 
 msgid "[+lineno] file1[:lineno] [file2[:lineno]...]"
-msgstr ""
+msgstr "[+linjenr.] fil1[:linjenr.] [fil2[:linjenr.]...]"
 
 msgid "file"
 msgstr "fil"
 
 msgid "file1 file2"
-msgstr ""
+msgstr "fil1 fil2"
 
 msgid "[this_dir] [other_panel_dir]"
-msgstr "[denne_mappe] [anden_panel_mappe]"
+msgstr "[denne_mappe] [andet_panel_mappe]"
 
 msgid ""
 "\n"
 "Please send any bug reports (including the output of 'mc -V')\n"
 "as tickets at www.midnight-commander.org\n"
 msgstr ""
+"\n"
+"Send venligst fejlrapporter (inklusiv outputtet af 'mc -V')\n"
+"som tickets på www.midnight-commander.org\n"
 
 #, c-format
 msgid "GNU Midnight Commander %s\n"
@@ -776,13 +835,13 @@ msgid "Terminal options"
 msgstr "Terminalindstillinger"
 
 msgid "Arguments parse error!"
-msgstr ""
+msgstr "Fejl ved fortolkning af argumenter!"
 
 msgid "No arguments given to the viewer."
 msgstr "Ingen argumenter givet til fremviseren."
 
 msgid "Two files are required to envoke the diffviewer."
-msgstr ""
+msgstr "Der kræves to filer for at vise diff-fremviseren."
 
 msgid "Background protocol error"
 msgstr "Fejl i baggrundsprotokol"
@@ -951,7 +1010,7 @@ msgstr ""
 "%s"
 
 msgid "Diff viewer: invalid mode"
-msgstr ""
+msgstr "Diff-fremviser: ugyldig tilstand"
 
 msgid "Two files are needed to compare"
 msgstr "To filer kræves for sammenligning"
@@ -970,7 +1029,7 @@ msgid "Loading: %3d%%"
 msgstr "Indlæser: %3d%%"
 
 msgid "Loading..."
-msgstr "Indlæser ..."
+msgstr "Indlæser..."
 
 #, c-format
 msgid "Cannot open %s for reading"
@@ -989,7 +1048,7 @@ msgstr "Kan ikke indhente størrelse/til
 
 #, c-format
 msgid "\"%s\" is not a regular file"
-msgstr "»%s« er ikke en regulær fil"
+msgstr "»%s« er ikke en almindelig fil"
 
 #, c-format
 msgid ""
@@ -1064,7 +1123,7 @@ msgid "Block is large, you may not be ab
 msgstr "Blok er stor, du vil måske ikke kunne fortryde denne handling"
 
 msgid "Collect completions"
-msgstr ""
+msgstr "Indsaml fuldførelser"
 
 msgid "&Quick save"
 msgstr "&Hurtiggem"
@@ -1085,7 +1144,7 @@ msgid "Save as"
 msgstr "Gem som"
 
 msgid "Cannot save: destination is not a regular file"
-msgstr "Kan ikke gemme: destination er ikke en normal fil"
+msgstr "Kan ikke gemme: destination er ikke en almindelig fil"
 
 msgid "A file already exists with this name"
 msgstr "En fil findes allerede med dette navn"
@@ -1167,7 +1226,7 @@ msgid ""
 "Save before close?"
 msgstr ""
 "Filen %s blev ændret.\n"
-"Gem før afslutning?"
+"Gem inden lukning?"
 
 msgid "Close file"
 msgstr "Luk fil"
@@ -1184,10 +1243,10 @@ msgid "This function is not implemented"
 msgstr "Denne funktion er ikke implementeret"
 
 msgid "Copy to clipboard"
-msgstr "Kopier til udklipsholder"
+msgstr "Kopiér til udklipsholder"
 
 msgid "Unable to save to file"
-msgstr "Kunne ikke gemme fil"
+msgstr "Kan ikke gemme fil"
 
 msgid "Cut to clipboard"
 msgstr "Klip til udklipsholder"
@@ -1208,7 +1267,7 @@ msgid "Sort block"
 msgstr "Sorter blok"
 
 msgid "You must first highlight a block of text"
-msgstr "Du skal først fremhvæe en tekstblok"
+msgstr "Du skal først fremhæve en tekstblok"
 
 msgid "Run sort"
 msgstr "Udfør sortering"
@@ -1217,7 +1276,7 @@ msgid "Enter sort options (see manpage)
 msgstr "Indtast sorteringsindstillinger (se manualside) adskilt af mellemrum:"
 
 msgid "Sort"
-msgstr "Sorter"
+msgstr "Sortér"
 
 msgid "Cannot execute sort command"
 msgstr "Kan ikke udføre sorteringskommando"
@@ -1248,7 +1307,7 @@ msgid "Subject"
 msgstr "Emne"
 
 msgid "Copies to"
-msgstr "Kopier til"
+msgstr "Kopiér til"
 
 msgid "Mail"
 msgstr "Post"
@@ -1298,7 +1357,7 @@ msgid ""
 "Continue discards these changes."
 msgstr ""
 "Aktuel tekst blev ændret uden en filgemning.\n"
-"Fortsæt med at ændre disse ændringer"
+"Fortsæt med at ændre disse ændringer."
 
 msgid "NoName"
 msgstr "IntetNavn"
@@ -1319,7 +1378,7 @@ msgid "&Insert file..."
 msgstr "&Indsæt fil..."
 
 msgid "Cop&y to file..."
-msgstr "&Kopier til fil..."
+msgstr "&Kopiér til fil..."
 
 msgid "&User menu..."
 msgstr "&Brugermenu..."
@@ -1352,7 +1411,7 @@ msgid "Unmar&k"
 msgstr "Fjern mark&ering"
 
 msgid "Cop&y"
-msgstr "&Kopier"
+msgstr "&Kopiér"
 
 msgid "Mo&ve"
 msgstr "&Flyt"
@@ -1385,7 +1444,7 @@ msgid "&Replace..."
 msgstr "&Erstat..."
 
 msgid "&Toggle bookmark"
-msgstr "%Skift bogmærke"
+msgstr "&Skift bogmærke"
 
 msgid "&Next bookmark"
 msgstr "&Næste bogmærke"
@@ -1412,7 +1471,7 @@ msgid "&Find declaration"
 msgstr "&Find erklæring"
 
 msgid "Back from &declaration"
-msgstr "Tilbage fra %erklæring"
+msgstr "Tilbage fra &erklæring"
 
 msgid "For&ward to declaration"
 msgstr "Frem&ad til erklæring"
@@ -1436,10 +1495,10 @@ msgid "S&pell check"
 msgstr "&Stavekontrol"
 
 msgid "C&heck word"
-msgstr "&Kontroller ord"
+msgstr "&Kontrollér ord"
 
 msgid "Change spelling &language..."
-msgstr "Ændr sprog for &stavekontrollen ..."
+msgstr "Skift sprog for &stavekontrollen..."
 
 msgid "&Mail..."
 msgstr "&Post..."
@@ -1451,10 +1510,10 @@ msgid "Insert &date/time"
 msgstr "Indsæt &dato/tid"
 
 msgid "&Format paragraph"
-msgstr "&Formater paragraf"
+msgstr "&Formatér paragraf"
 
 msgid "&Sort..."
-msgstr "&Sorter..."
+msgstr "&Sortér..."
 
 msgid "&Paste output of..."
 msgstr "&Indsæt uddata fra..."
@@ -1478,7 +1537,7 @@ msgid "&Previous"
 msgstr "&Forrige"
 
 msgid "&List..."
-msgstr "&Liste ..."
+msgstr "&Liste..."
 
 msgid "&General..."
 msgstr "&Generelt..."
@@ -1526,16 +1585,16 @@ msgid "&None"
 msgstr "&Ingen"
 
 msgid "&Dynamic paragraphing"
-msgstr ""
+msgstr "&Dynamiske paragraffer"
 
 msgid "Type &writer wrap"
-msgstr ""
+msgstr "&Skrivemaskine ombrydning"
 
 msgid "Wrap mode"
 msgstr "Ombrydningstilstand"
 
 msgid "Tabulation"
-msgstr ""
+msgstr "Tabulering"
 
 msgid "&Fake half tabs"
 msgstr "&Falske halve tabulatorer"
@@ -1562,25 +1621,25 @@ msgid "Save file &position"
 msgstr "Gem fil&placering"
 
 msgid "&Visible trailing spaces"
-msgstr ""
+msgstr "&Synlige efterstillede mellemrum"
 
 msgid "Visible &tabs"
-msgstr ""
+msgstr "Synlige &tabulatorer"
 
 msgid "Synta&x highlighting"
 msgstr "Synta&ksfremhævelse"
 
 msgid "C&ursor after inserted block"
-msgstr ""
+msgstr "&Markør efter indsat blok"
 
 msgid "Pers&istent selection"
 msgstr "&Fast markering"
 
 msgid "Cursor be&yond end of line"
-msgstr ""
+msgstr "Markør &forbi slutningen af linjen"
 
 msgid "&Group undo"
-msgstr ""
+msgstr "&Gruppe fortryd"
 
 msgid "Word wrap line length:"
 msgstr "Linjelængde for ordombrydning:"
@@ -1592,9 +1651,11 @@ msgid ""
 "A user friendly text editor\n"
 "written for the Midnight Commander."
 msgstr ""
+"En brugervenligst teksteditor\n"
+"skrevet til Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr ""
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr "Ophavsret (C) 1996-2018 Free Software Foundation"
 
 msgid "About"
 msgstr "Om"
@@ -1606,13 +1667,13 @@ msgid "Edit: "
 msgstr "Rediger: "
 
 msgid "ButtonBar|Mark"
-msgstr "Marker"
+msgstr "Markér"
 
 msgid "ButtonBar|Replac"
 msgstr "Erstat"
 
 msgid "ButtonBar|Copy"
-msgstr "Kopier"
+msgstr "Kopiér"
 
 msgid "ButtonBar|Move"
 msgstr "Flyt"
@@ -1624,13 +1685,13 @@ msgid "ButtonBar|PullDn"
 msgstr "Træk ned"
 
 msgid "Breton"
-msgstr ""
+msgstr "Bretonsk"
 
 msgid "Czech"
 msgstr "Tjekkisk"
 
 msgid "Welsh"
-msgstr ""
+msgstr "Walisisk"
 
 msgid "Danish"
 msgstr "Dansk"
@@ -1645,16 +1706,16 @@ msgid "English"
 msgstr "Engelsk"
 
 msgid "British English"
-msgstr "Britisk Engelsk"
+msgstr "Britisk engelsk"
 
 msgid "Canadian English"
-msgstr "Candisk Engelsk"
+msgstr "Candisk engelsk"
 
 msgid "American English"
-msgstr "Amerikansk Engelsk"
+msgstr "Amerikansk engelsk"
 
 msgid "Esperanto"
-msgstr ""
+msgstr "Esperanto"
 
 msgid "Spanish"
 msgstr "Spansk"
@@ -1705,7 +1766,7 @@ msgid "Misspelled"
 msgstr "Stavefejl"
 
 msgid "Check word"
-msgstr "Kontroller ord"
+msgstr "Kontrollér ord"
 
 msgid "Suggest"
 msgstr "Foreslå"
@@ -1781,6 +1842,15 @@ msgstr ""
 "Kan ikke chmod »%s«\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "&Ignorer"
+
+msgid "Ignore &all"
+msgstr "Ignorer &alle"
+
+msgid "&Retry"
+msgstr "&Prøv igen"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1790,7 +1860,7 @@ msgstr ""
 "%s"
 
 msgid "< Default >"
-msgstr ""
+msgstr "< Standard >"
 
 msgid "Skins"
 msgstr "Temaer"
@@ -1814,7 +1884,7 @@ msgid "Alwa&ys"
 msgstr "&Altid"
 
 msgid "File operations"
-msgstr "Filoperationer"
+msgstr "Filhandlinger"
 
 msgid "&Verbose operation"
 msgstr "&Uddybende handling"
@@ -1829,7 +1899,7 @@ msgid "Mkdi&r autoname"
 msgstr "&Mkdir autonavngiving"
 
 msgid "&Preallocate space"
-msgstr ""
+msgstr "&Præalloker plads"
 
 msgid "Esc key mode"
 msgstr "Tilstand for Esc-tast"
@@ -1850,7 +1920,7 @@ msgid "Use internal vie&w"
 msgstr "Brug intern &visning"
 
 msgid "A&sk new file name"
-msgstr "&Spørg efter nyt fil navn"
+msgstr "&Spørg efter nyt filnavn"
 
 msgid "Auto m&enus"
 msgstr "Automatiske &menuer"
@@ -1859,7 +1929,7 @@ msgid "&Drop down menus"
 msgstr "&Rullegardinmenuer"
 
 msgid "S&hell patterns"
-msgstr ""
+msgstr "&Skalmønstre"
 
 msgid "Co&mplete: show all"
 msgstr "&Færdig: Vis alle"
@@ -1873,6 +1943,9 @@ msgstr "Cd følger &henvisninger"
 msgid "Sa&fe delete"
 msgstr "&Sikker sletning"
 
+msgid "Safe overwrite"
+msgstr "Sikker overskrivning"
+
 msgid "A&uto save setup"
 msgstr "Opsætning for a&utomatisk gemning"
 
@@ -1880,7 +1953,7 @@ msgid "Configure options"
 msgstr "Konfigurer indstillinger"
 
 msgid "Skin:"
-msgstr ""
+msgstr "Tema:"
 
 msgid "Appearance"
 msgstr "Fremtoning"
@@ -1892,7 +1965,7 @@ msgid "Use panel sort mo&de"
 msgstr "Brug &panelsorteringstilstand"
 
 msgid "Show mi&ni-status"
-msgstr ""
+msgstr "Vis mi&nistatus"
 
 msgid "Use SI si&ze units"
 msgstr "Brug SI &størrelsesenheder"
@@ -1907,7 +1980,7 @@ msgid "Show &hidden files"
 msgstr "Vis &skjulte filer"
 
 msgid "&Fast dir reload"
-msgstr "Hurtig &mappe-genindlæsning"
+msgstr "Hurtig genindlæsning af &kataloger"
 
 msgid "Ma&rk moves down"
 msgstr "&Marker bevægelser ned"
@@ -1916,7 +1989,7 @@ msgid "Re&verse files only"
 msgstr "Kun &omvendte filer"
 
 msgid "Simple s&wap"
-msgstr ""
+msgstr "Enkel &ombytning"
 
 msgid "A&uto save panels setup"
 msgstr "&Panelopsætning for automatisk gemning"
@@ -1931,7 +2004,7 @@ msgid "Pa&ge scrolling"
 msgstr "&Siderulning"
 
 msgid "Center &scrolling"
-msgstr ""
+msgstr "Centrer &rulning"
 
 msgid "&Mouse page scrolling"
 msgstr "Siderulning med &mus"
@@ -1943,7 +2016,7 @@ msgid "File &types"
 msgstr "Fil&typer"
 
 msgid "&Permissions"
-msgstr "%Rettigheder"
+msgstr "&Rettigheder"
 
 msgid "Quick search"
 msgstr "Hurtig søgning"
@@ -1969,7 +2042,7 @@ msgid "&Full file list"
 msgstr "&Fuld filliste"
 
 msgid "&Brief file list:"
-msgstr ""
+msgstr "&Kortfattet filliste:"
 
 msgid "&Long file list"
 msgstr "&Lang filliste"
@@ -1984,7 +2057,7 @@ msgid "User &mini status"
 msgstr "&Ministatus for bruger"
 
 msgid "Listing format"
-msgstr ""
+msgstr "Listeformat"
 
 msgid "Executable &first"
 msgstr "&Først kørbare"
@@ -2018,16 +2091,16 @@ msgid "Confirmation"
 msgstr "Bekræftelse"
 
 msgid "&UTF-8 output"
-msgstr ""
+msgstr "&UTF-8-output"
 
 msgid "&Full 8 bits output"
-msgstr ""
+msgstr "&Fuld 8 bit-output"
 
 msgid "&ISO 8859-1"
-msgstr ""
+msgstr "&ISO 8859-1"
 
 msgid "7 &bits"
-msgstr ""
+msgstr "7 &bits"
 
 msgid "F&ull 8 bits input"
 msgstr "F&uld 8-bit inddata"
@@ -2036,22 +2109,22 @@ msgid "Display bits"
 msgstr "Vis bit"
 
 msgid "Input / display codepage:"
-msgstr "Kodning for inddata/visning:"
+msgstr "Tegnsæt for inddata/visning:"
 
 msgid "Directory tree"
 msgstr "Mappetræ"
 
 msgid "Timeout for freeing VFSs (sec):"
-msgstr ""
+msgstr "Tidsudløb til frigørelse af VFS'er (sek.):"
 
 msgid "FTP anonymous password:"
-msgstr ""
+msgstr "Anonym adgangskode til FTP:"
 
 msgid "FTP directory cache timeout (sec):"
-msgstr ""
+msgstr "Tidsudløb for mellemlager til FTP-mappe (sek.):"
 
 msgid "&Always use ftp proxy:"
-msgstr ""
+msgstr "&Brug altid ftp-proxy:"
 
 msgid "&Use ~/.netrc"
 msgstr "&Brug ~/.netrc"
@@ -2091,7 +2164,7 @@ msgid "&Kill"
 msgstr "&Dræb"
 
 msgid "Background jobs"
-msgstr ""
+msgstr "Baggrundsjobs"
 
 #, c-format
 msgid "Password for \\\\%s\\%s"
@@ -2104,55 +2177,55 @@ msgid "Username:"
 msgstr "Brugernavn:"
 
 msgid "SMB authentication"
-msgstr ""
+msgstr "SMB-godkendelse"
 
 msgid "set &user ID on execution"
-msgstr ""
+msgstr "sæt &bruger-id ved eksekvering"
 
 msgid "set &group ID on execution"
-msgstr ""
+msgstr "sæt &gruppe-id ved eksekvering"
 
 msgid "stick&y bit"
-msgstr ""
+msgstr "stick&y bit"
 
 msgid "&read by owner"
-msgstr ""
+msgstr "&læs af ejer"
 
 msgid "&write by owner"
-msgstr ""
+msgstr "&Skriv af ejer"
 
 msgid "e&xecute/search by owner"
-msgstr ""
+msgstr "&udfør/søg efter ejer"
 
 msgid "rea&d by group"
-msgstr ""
+msgstr "læs af &gruppe"
 
 msgid "write by grou&p"
-msgstr ""
+msgstr "skriv af g&ruppe"
 
 msgid "execu&te/search by group"
-msgstr ""
+msgstr "u&dfør/søg efter gruppe"
 
 msgid "read &by others"
-msgstr ""
+msgstr "læs af &andre"
 
 msgid "wr&ite by others"
-msgstr ""
+msgstr "skriv af a&ndre"
 
 msgid "execute/searc&h by others"
-msgstr ""
+msgstr "ud&før/søg efter andre"
 
 msgid "Name:"
 msgstr "Navn:"
 
 msgid "Permissions (octal):"
-msgstr ""
+msgstr "Rettigheder (oktal):"
 
 msgid "Owner name:"
-msgstr "Ejerens navn:"
+msgstr "Ejernavn:"
 
 msgid "Group name:"
-msgstr "Gruppe navn:"
+msgstr "Gruppenavn:"
 
 msgid "&Marked all"
 msgstr "&Marker alle"
@@ -2291,7 +2364,7 @@ msgid ""
 "Both panels should be in the listing mode\n"
 "to use this command"
 msgstr ""
-"Begge paneler skal være i lyttetilstand\n"
+"Begge paneler skal være i listeformat\n"
 "for at bruge denne kommando"
 
 msgid ""
@@ -2303,11 +2376,11 @@ msgstr ""
 
 #, c-format
 msgid "'%s' is not a symbolic link"
-msgstr ""
+msgstr "'%s' er ikke en symbolsk henvisning"
 
 #, c-format
 msgid "Symlink '%s' points to:"
-msgstr ""
+msgstr "Symbolsk henvisning '%s' peger til:"
 
 msgid "Edit symlink"
 msgstr "Rediger symbolsk henvisning"
@@ -2324,7 +2397,7 @@ msgid "FTP to machine"
 msgstr "FTP til maskine"
 
 msgid "SFTP to machine"
-msgstr ""
+msgstr "SFTP til maskine"
 
 msgid "Shell link to machine"
 msgstr "Skalhenvisning til maskine"
@@ -2350,11 +2423,11 @@ msgstr "Opsætning"
 
 #, c-format
 msgid "Setup saved to %s"
-msgstr ""
+msgstr "Opsætning gemt til %s"
 
 #, c-format
 msgid "Unable to save setup to %s"
-msgstr ""
+msgstr "Kan ikke gemme opsætning til %s"
 
 msgid "Cannot execute commands on non-local filesystems"
 msgstr "Kan ikke køre kommandoer på filsystemer der ikke er lokale"
@@ -2396,16 +2469,18 @@ msgstr ""
 
 #, c-format
 msgid "%s file error"
-msgstr ""
+msgstr "%s filfejl"
 
 #, c-format
 msgid ""
 "The format of the %s file has changed with version 3.0. You may either want "
 "to copy it from %smc.ext or use that file as an example of how to write it."
 msgstr ""
+"Formatet af %s-filen blev skiftet i version 3.0. Du kan enten kopiere den "
+"fra %smc.ext eller bruge filen som et eksempel på hvordan den skrives."
 
 msgid "DialogTitle|Copy"
-msgstr "Kopier"
+msgstr "Kopiér"
 
 msgid "DialogTitle|Move"
 msgstr "Flyt"
@@ -2414,7 +2489,7 @@ msgid "DialogTitle|Delete"
 msgstr "Slet"
 
 msgid "FileOperation|Copy"
-msgstr "Kopier"
+msgstr "Kopiér"
 
 msgid "FileOperation|Move"
 msgstr "Flyt"
@@ -2424,7 +2499,7 @@ msgstr "Slet"
 
 #, no-c-format
 msgid "%o %f%n\"%s\"%m"
-msgstr ""
+msgstr "%o %f%n\"%s\"%m"
 
 #, no-c-format
 msgid "%o %d %f%m"
@@ -2462,6 +2537,10 @@ msgid ""
 "\n"
 "Option Stable Symlinks will be disabled"
 msgstr ""
+"Kan ikke oprette stabile symbolske henvisninger på tværs af filsystemer som "
+"ikke er lokale:\n"
+"\n"
+"Valgmuligheden Stabile symbolske henvisninger deaktiveres"
 
 #, c-format
 msgid ""
@@ -2471,17 +2550,40 @@ msgstr ""
 "Kan ikke oprette symbolsk målhenvisning »%s«\n"
 "%s"
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
+"»%s«\n"
+"og\n"
+"»%s«\n"
+"er den samme mappe"
 
-msgid "&Retry"
-msgstr "&Prøv igen"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"»%s«\n"
+"og\n"
+"»%s«\n"
+"er den samme fil"
+
+msgid "Ski&p all"
+msgstr "&Spring over alle"
 
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
 "Delete it recursively?"
 msgstr ""
+"Mappen \"%s\" er ikke tom.\n"
+"Slet den rekursivt?"
 
 #, c-format
 msgid ""
@@ -2489,29 +2591,28 @@ msgid ""
 "Directory \"%s\" not empty.\n"
 "Delete it recursively?"
 msgstr ""
+"Baggrundsproces:\n"
+"Mappen \"%s\" er ikke tom.\n"
+"Slet den rekursivt?"
 
 msgid "Non&e"
 msgstr "Ing&en"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Kan ikke stat fil »%s«\n"
+"Kan ikke flytte fil »%s«\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"»%s«\n"
-"og\n"
-"»%s«\n"
-"er den samme fil"
+"Kan ikke stat fil »%s«\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2527,36 +2628,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Kan ikke flytte fil »%s«\n"
+"Kan ikke fjerne mappe »%s«\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Kan ikke slette fil »%s«\n"
+"Kan ikke overskrive mappe »%s«\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Kan ikke fjerne mappe »%s«\n"
+"Kan ikke overskrive fil »%s«\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Kan ikke overskrive mappe »%s«\n"
+"Kan ikke flytte mappe »%s« til »%s«\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Kan ikke bruge handling på »..«!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2598,7 +2702,7 @@ msgstr ""
 "%s"
 
 msgid "Reget failed, about to overwrite file"
-msgstr "Reget fejlede, ved at overskrive fil"
+msgstr "Reget fejlede, fil er i færd med at blive overskrevet"
 
 #, c-format
 msgid ""
@@ -2629,12 +2733,16 @@ msgid ""
 "Cannot preallocate space for target file \"%s\"\n"
 "%s"
 msgstr ""
+"Kan ikke præallokere plads til målfilen \"%s\"\n"
+"%s"
 
 #, c-format
 msgid ""
 "Cannot read source file \"%s\"\n"
 "%s"
 msgstr ""
+"Kan ikke læse kildefilen \"%s\"\n"
+"%s"
 
 #, c-format
 msgid ""
@@ -2718,45 +2826,14 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"»%s«\n"
-"og\n"
-"»%s«\n"
-"er den samme mappe"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Kan ikke overskrive fil »%s«\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Kan ikke flytte mappe »%s« til »%s«\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
-msgstr ""
-
-msgid "Cannot operate on \"..\"!"
-msgstr "Kan ikke fungere med »..«!"
+msgstr "Mapper: %zu, samlet størrelse: %s"
 
 msgid "Sorry, I could not put the job in background"
 msgstr "Beklager. Jeg kunne ikke placere jobbet i baggrunden"
 
 msgid "S&uspend"
-msgstr ""
+msgstr "&Suspendér"
 
 msgid "Con&tinue"
 msgstr "For&tsæt"
@@ -2786,11 +2863,11 @@ msgstr "Målfil findes allerede!"
 
 #, c-format
 msgid "New     : %s, size %s"
-msgstr ""
+msgstr "Ny      : %s, størrelse %s"
 
 #, c-format
 msgid "Existing: %s, size %s"
-msgstr ""
+msgstr "Eksisterende: %s, størrelse %s"
 
 msgid "Overwrite this target?"
 msgstr "Overskriv dette mål?"
@@ -2818,35 +2895,35 @@ msgstr "Baggrundproces: Fil findes"
 
 #, c-format
 msgid "Files processed: %zu/%zu"
-msgstr ""
+msgstr "Filer behandlet: %zu/%zu"
 
 #, c-format
 msgid "Files processed: %zu"
-msgstr ""
+msgstr "Filer behandlet: %zu"
 
 #, c-format
 msgid "Time: %s %s"
-msgstr ""
+msgstr "Tid: %s %s"
 
 #, c-format
 msgid "Time: %s %s (%s)"
-msgstr ""
+msgstr "Tid: %s %s (%s)"
 
 #, c-format
 msgid "Time: %s"
-msgstr ""
+msgstr "Tid: %s"
 
 #, c-format
 msgid "Time: %s (%s)"
-msgstr ""
+msgstr "Tid: %s (%s)"
 
 #, c-format
 msgid " Total: %s "
-msgstr ""
+msgstr " Samlet: %s "
 
 #, c-format
 msgid " Total: %s/%s "
-msgstr ""
+msgstr " Samlet: %s/%s "
 
 msgid "Source"
 msgstr "Kilde"
@@ -2864,7 +2941,7 @@ msgid "to:"
 msgstr "til:"
 
 msgid "Follow &links"
-msgstr "Følg %henvisninger"
+msgstr "Følg &henvisninger"
 
 msgid "Preserve &attributes"
 msgstr "Bevar &attributter"
@@ -2873,14 +2950,14 @@ msgid "Di&ve into subdir if exists"
 msgstr "D&yk ned i undermappe hvis den findes"
 
 msgid "&Stable symlinks"
-msgstr ""
+msgstr "&Stabile symbolsk henvisninger"
 
 msgid "&Background"
 msgstr "&Baggrund"
 
 #, c-format
 msgid "Invalid source pattern '%s'"
-msgstr ""
+msgstr "Ugyldigt kildemønster '%s'"
 
 msgid "&Chdir"
 msgstr "&Skift mappe"
@@ -2899,7 +2976,7 @@ msgstr "&Rediger - F4"
 
 #, c-format
 msgid "Found: %lu"
-msgstr ""
+msgstr "Fandt: %lu"
 
 msgid "Malformed regular expression"
 msgstr "Forkert udformet regulært udtryk"
@@ -2938,7 +3015,7 @@ msgid "Start at:"
 msgstr "Start ved:"
 
 msgid "Ena&ble ignore directories:"
-msgstr ""
+msgstr "Aktivér &ignore-mapper:"
 
 #, c-format
 msgid "Grepping in %s"
@@ -2950,8 +3027,8 @@ msgstr "Færdig"
 #, c-format
 msgid "Finished (ignored %zu directory)"
 msgid_plural "Finished (ignored %zu directories)"
-msgstr[0] ""
-msgstr[1] ""
+msgstr[0] "Færdig (ignorerede %zu mappe)"
+msgstr[1] "Færdig (ignorerede %zu mapper)"
 
 msgid "Searching"
 msgstr "Søger"
@@ -2960,7 +3037,7 @@ msgid "Change &to"
 msgstr "Ændr &til"
 
 msgid "&Free VFSs now"
-msgstr ""
+msgstr "&Frigør VFS'er nu"
 
 msgid "&Refresh"
 msgstr "&Opdater"
@@ -2990,7 +3067,7 @@ msgid "Active VFS directories"
 msgstr "Aktive VFS-mapper"
 
 msgid "Directory hotlist"
-msgstr "Mappefavoritliste"
+msgstr "Mappehotliste"
 
 msgid "Top level group"
 msgstr "Topniveaugruppe"
@@ -3009,7 +3086,7 @@ msgid "&Append"
 msgstr "&Tilføj"
 
 msgid "New hotlist entry"
-msgstr "Nyt punkt i favoritlisten"
+msgstr "Nyt punkt i hotlisten"
 
 msgid "Directory label:"
 msgstr "Mappeetiket:"
@@ -3025,13 +3102,15 @@ msgstr "Navn på ny gruppe:"
 
 #, c-format
 msgid "Are you sure you want to remove entry \"%s\"?"
-msgstr ""
+msgstr "Er du sikker på, at du vil fjerne punktet \"%s\"?"
 
 #, c-format
 msgid ""
 "Group \"%s\" is not empty.\n"
 "Remove it?"
 msgstr ""
+"Gruppen \"%s\" er ikke tom.\n"
+"Fjern den?"
 
 msgid "Hotlist Load"
 msgstr "Hotlistindlæsning"
@@ -3041,6 +3120,8 @@ msgid ""
 "MC was unable to write %s file,\n"
 "your old hotlist entries were not deleted"
 msgstr ""
+"MC kunne ikke skrive %s-filen,\n"
+"dine gamle hotliste-poster blev slettet"
 
 #, c-format
 msgid "Label for \"%s\":"
@@ -3061,7 +3142,7 @@ msgid "No node information"
 msgstr "Ingen knudeinformation"
 
 msgid "Free nodes:"
-msgstr ""
+msgstr "Ledige knuder:"
 
 msgid "No space information"
 msgstr "Ingen pladsinformation"
@@ -3072,14 +3153,14 @@ msgstr "Ledig plads: %s/%s (%d%%)"
 
 #, c-format
 msgid "Type:       %s"
-msgstr ""
+msgstr "Type:       %s"
 
 msgid "non-local vfs"
 msgstr "vfs der ikke er lokal"
 
 #, c-format
 msgid "Device:     %s"
-msgstr ""
+msgstr "Enhed:      %s"
 
 #, c-format
 msgid "Filesystem: %s"
@@ -3087,16 +3168,16 @@ msgstr "Filsystem:  %s"
 
 #, c-format
 msgid "Accessed:   %s"
-msgstr ""
+msgstr "Tilgået:   %s"
 
 #, c-format
 msgid "Modified:   %s"
-msgstr "Redigeret: %s"
+msgstr "Redigeret:  %s"
 
 #. TRANSLATORS: Time of last status change as in stat(2) man.
 #, c-format
 msgid "Changed:    %s"
-msgstr "Ændret: %s"
+msgstr "Ændret:     %s"
 
 #, c-format
 msgid "Dev. type: major %lu, minor %lu"
@@ -3104,50 +3185,50 @@ msgstr "Enhedstype: Stor %lu, lille %lu"
 
 #, c-format
 msgid "Size:       %s"
-msgstr "Størrelse: %s"
+msgstr "Størrelse:  %s"
 
 #, c-format
 msgid " (%lu block)"
 msgid_plural " (%lu blocks)"
-msgstr[0] ""
-msgstr[1] ""
+msgstr[0] " (%lu blokke)"
+msgstr[1] " (%lu blokke)"
 
 #, c-format
 msgid "Owner:      %s/%s"
-msgstr "Ejer: %s/%s"
+msgstr "Ejer:       %s/%s"
 
 #, c-format
 msgid "Links:      %d"
-msgstr ""
+msgstr "Henvisninger:      %d"
 
 #, c-format
 msgid "Mode:       %s (%04o)"
-msgstr ""
+msgstr "Tilstand:   %s (%04o)"
 
 #, c-format
 msgid "Location:   %Xh:%Xh"
-msgstr ""
+msgstr "Placering:   %Xh:%Xh"
 
 msgid "&Equal split"
 msgstr "&Ens opdeling"
 
 msgid "&Menubar visible"
-msgstr ""
+msgstr "&Menulinje synlig"
 
 msgid "Command &prompt"
 msgstr "Kommando&prompt"
 
 msgid "&Keybar visible"
-msgstr "&Tastbjælke synlig"
+msgstr "&Tastlinje synlig"
 
 msgid "H&intbar visible"
-msgstr "&Fifbjælke synlig"
+msgstr "&Fiflinje synlig"
 
 msgid "&XTerm window title"
 msgstr "&XTerm-vinduestitel"
 
 msgid "&Show free space"
-msgstr ""
+msgstr "&Vis ledig plads"
 
 msgid "Panel split"
 msgstr "Panelopdeling"
@@ -3165,7 +3246,7 @@ msgid "Output lines:"
 msgstr "Uddatalinjer:"
 
 msgid "Layout"
-msgstr "Udseende"
+msgstr "Layout"
 
 msgid "File listin&g"
 msgstr "Filvisnin&g"
@@ -3177,7 +3258,7 @@ msgid "&Info"
 msgstr "&Info"
 
 msgid "&Listing format..."
-msgstr ""
+msgstr "&Listeformat..."
 
 msgid "&Sort order..."
 msgstr "&Sorteringsrækkefølge..."
@@ -3195,13 +3276,13 @@ msgid "S&hell link..."
 msgstr "S&kalhenvisning..."
 
 msgid "S&FTP link..."
-msgstr ""
+msgstr "S&FTP-link..."
 
 msgid "SM&B link..."
 msgstr "SM&B-henvisning..."
 
 msgid "Paneli&ze"
-msgstr ""
+msgstr "Paneli&sér"
 
 msgid "&Rescan"
 msgstr "&Genskan"
@@ -3216,7 +3297,7 @@ msgid "&Filtered view"
 msgstr "&Filtreret visning"
 
 msgid "&Copy"
-msgstr "&Kopier"
+msgstr "&Kopiér"
 
 msgid "C&hmod"
 msgstr "C&hmod"
@@ -3246,7 +3327,7 @@ msgid "&Mkdir"
 msgstr "&Mkdir"
 
 msgid "&Quick cd"
-msgstr "%Hurtig cd"
+msgstr "&Hurtig cd"
 
 msgid "Select &group"
 msgstr "Vælg &gruppe"
@@ -3255,7 +3336,7 @@ msgid "U&nselect group"
 msgstr "&Fravælg gruppe"
 
 msgid "&Invert selection"
-msgstr ""
+msgstr "&Omvend markering"
 
 msgid "E&xit"
 msgstr "&Afslut"
@@ -3279,7 +3360,7 @@ msgid "&Compare directories"
 msgstr "&Sammenlign mapper"
 
 msgid "C&ompare files"
-msgstr ""
+msgstr "&Sammenlign filer"
 
 msgid "E&xternal panelize"
 msgstr "&Ekstern panelisering"
@@ -3306,7 +3387,7 @@ msgid "&Undelete files (ext2fs only)"
 msgstr "&Gendan filer (kun ext2fs)"
 
 msgid "&Listing format edit"
-msgstr "Redigering af &Listeformat"
+msgstr "Redigering af &listeformat"
 
 msgid "Edit &extension file"
 msgstr "Rediger fil&endelse"
@@ -3321,7 +3402,7 @@ msgid "&Configuration..."
 msgstr "&Opsætning..."
 
 msgid "&Layout..."
-msgstr "&Udseende..."
+msgstr "&Layout..."
 
 msgid "&Panel options..."
 msgstr "&Panelindstilinger..."
@@ -3330,7 +3411,7 @@ msgid "C&onfirmation..."
 msgstr "&Bekræftelse..."
 
 msgid "&Appearance..."
-msgstr ""
+msgstr "&Fremtoning..."
 
 msgid "&Display bits..."
 msgstr "&Vis bit..."
@@ -3344,8 +3425,8 @@ msgstr "Paneler:"
 #, c-format
 msgid "You have %zu opened screen. Quit anyway?"
 msgid_plural "You have %zu opened screens. Quit anyway?"
-msgstr[0] ""
-msgstr[1] ""
+msgstr[0] "Du har %zu åben skærm. Afslut alligevel?"
+msgstr[1] "Du har %zu åbne skærme. Afslut alligevel?"
 
 msgid "The Midnight Commander"
 msgstr "Midnight Commander"
@@ -3372,13 +3453,13 @@ msgid "ButtonBar|View"
 msgstr "Vis"
 
 msgid "ButtonBar|RenMov"
-msgstr "RenMov"
+msgstr "OmdFly"
 
 msgid "ButtonBar|Mkdir"
 msgstr "Mkdir"
 
 msgid "Memory exhausted!"
-msgstr ""
+msgstr "Der er ikke mere hukommelse!"
 
 #. TRANSLATORS: one single character to represent 'unsorted' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3410,7 +3491,7 @@ msgid "sort|e"
 msgstr "u"
 
 msgid "E&xtension"
-msgstr ""
+msgstr "&Udvidelse"
 
 #. TRANSLATORS: one single character to represent 'size' sort mode
 #. TRANSLATORS: no need to translate 'sort', it's just a context prefix
@@ -3477,7 +3558,7 @@ msgid "[dev]"
 msgstr "[enh.]"
 
 msgid "UP--DIR"
-msgstr "UP--DIR"
+msgstr "OPMAPPE"
 
 msgid "SYMLINK"
 msgstr "SYMBOLSKHENVISNING"
@@ -3495,7 +3576,7 @@ msgstr[0] "%s i %d fil"
 msgstr[1] "%s i %d filer"
 
 msgid "Panelize"
-msgstr ""
+msgstr "Panelisér"
 
 msgid "Unknown tag on display format:"
 msgstr "Ukendt mærke på visningsformat:"
@@ -3504,7 +3585,7 @@ msgid "&Files only"
 msgstr "&Kun filer"
 
 msgid "&Case sensitive"
-msgstr "%Store/små bogstaver"
+msgstr "&Store/små bogstaver"
 
 msgid "Select"
 msgstr "Vælg"
@@ -3546,7 +3627,7 @@ msgid "Cannot run external panelize in a
 msgstr "Kan ikke køre ekstern panelisering i en mappe, der ikke er lokal"
 
 msgid "Modified git files"
-msgstr ""
+msgstr "Ændrede git-filer"
 
 msgid "Find rejects after patching"
 msgstr "Find rester efter lapning"
@@ -3567,7 +3648,7 @@ msgstr ""
 
 #, c-format
 msgid "Copy \"%s\" directory to:"
-msgstr "Kopier mappen »%s« til:"
+msgstr "Kopiér mappen »%s« til:"
 
 #, c-format
 msgid "Move \"%s\" directory to:"
@@ -3647,7 +3728,7 @@ msgstr ""
 "Tryk venligst på %s\n"
 "og vent så indtil denne meddelelse forsvinder.\n"
 "\n"
-"Tryk så på den igen for at se om O.k. kommer frem\n"
+"Tryk så på den igen for at se om OK kommer frem\n"
 "ved siden af dets knappe.\n"
 "\n"
 "Hvis du vil afbryde, tryk på knappen Escape\n"
@@ -3662,7 +3743,7 @@ msgstr "Du har indtastet »%s«"
 
 #. TRANSLATORS: This label appears near learned keys.  Keep it short.
 msgid "OK"
-msgstr "O.k."
+msgstr "OK"
 
 msgid ""
 "It seems that all your keys already\n"
@@ -3686,15 +3767,21 @@ msgid ""
 "which keys are not marked with OK. Press space on the missing\n"
 "key, or click with the mouse to define it. Move around with Tab."
 msgstr ""
+"Tryk på alle tasterne som er nævnt nedenfor. Efter du har gjort det, så "
+"tjek\n"
+"hvilke taster som ikke er mærket med OK. Tryk på mellemrum på den manglende\n"
+"tast, eller klik med musen for at definere den. Flyt rundt med tabulator."
 
 #, c-format
 msgid ""
 "Failed to run:\n"
 "%s\n"
 msgstr ""
+"Kunne ikke køre:\n"
+"%s\n"
 
 msgid "Home directory path is not absolute"
-msgstr ""
+msgstr "Hjemmemappesti er ikke absolut"
 
 #, c-format
 msgid ""
@@ -3702,12 +3789,15 @@ msgid ""
 "Failed while close:\n"
 "%s\n"
 msgstr ""
+"\n"
+"Mislykkede under lukning:\n"
+"%s\n"
 
 msgid "Choose codepage"
-msgstr "Vælg codepage"
+msgstr "Vælg tegnsæt"
 
 msgid "-  < No translation >"
-msgstr "- < Ingen oversættelse >"
+msgstr "-  < Ingen oversættelse >"
 
 msgid "%b %e  %Y"
 msgstr "%e. %b %Y"
@@ -3730,11 +3820,11 @@ msgid ""
 msgstr ""
 "GNU Midnight Commander kører allerede\n"
 "på denne terminal.\n"
-"Underskalunderstøttelse vil blive deaktiveret."
+"Understøttelse af underskal vil blive deaktiveret."
 
 #, c-format
 msgid "Cannot open named pipe %s\n"
-msgstr "Kunne ikke åbne navngivet datakanal %s\n"
+msgstr "Kan ikke åbne navngivet datakanal %s\n"
 
 msgid "The shell is still active. Quit anyway?"
 msgstr "Skallen er stadig aktiv. Afslut alligevel?"
@@ -3762,7 +3852,7 @@ msgid "With subshell support as default\
 msgstr "Med underskalsunderstøttelse som standard\n"
 
 msgid "With support for background operations\n"
-msgstr "Med understøttelse for baggrundsoperationer\n"
+msgstr "Med understøttelse af baggrundshandlinger\n"
 
 msgid "With mouse support on xterm and Linux console\n"
 msgstr "Med museunderstøttelse i xterm og på Linuxkonsollen\n"
@@ -3792,31 +3882,31 @@ msgid "Data types:"
 msgstr "Datatyper:"
 
 msgid "Home directory:"
-msgstr ""
+msgstr "Hjemmemappe:"
 
 msgid "Profile root directory:"
-msgstr ""
+msgstr "Profilens rodmappe:"
 
 msgid "System data"
-msgstr ""
+msgstr "Systemdata"
 
 msgid "Config directory:"
-msgstr ""
+msgstr "Konfigurationsmappe:"
 
 msgid "Data directory:"
-msgstr ""
+msgstr "Datamappe:"
 
 msgid "File extension handlers:"
-msgstr ""
+msgstr "Behandlere til filendelse:"
 
 msgid "VFS plugins and scripts:"
-msgstr ""
+msgstr "VFS-plugins og -scripts:"
 
 msgid "User data"
-msgstr ""
+msgstr "Brugerdata"
 
 msgid "Cache directory:"
-msgstr ""
+msgstr "Mellemlagermappe:"
 
 msgid "Debug"
 msgstr "Fejlsøg"
@@ -4033,7 +4123,7 @@ msgstr "ftpfs: Forbindelse til server mi
 
 #, c-format
 msgid "Waiting to retry... %d (Control-G to cancel)"
-msgstr ""
+msgstr "Venter på at prøve igen... %d (Control-G for at annullere)"
 
 msgid "ftpfs: invalid address family"
 msgstr "ftpfs: Ugyldig adressefamilie"
@@ -4089,14 +4179,14 @@ msgstr ""
 
 #, c-format
 msgid "%s: Warning: file %s not found\n"
-msgstr ""
+msgstr "%s: Advarsel: filen %s blev ikke fundet\n"
 
 #, c-format
 msgid ""
 "Warning: Invalid line in %s:\n"
 "%s\n"
 msgstr ""
-"Advarsel: Ugyldig linje i %s.\n"
+"Advarsel: Ugyldig linje i %s:\n"
 "%s\n"
 
 #, c-format
@@ -4109,55 +4199,59 @@ msgstr ""
 
 #, c-format
 msgid "sftp: an error occurred while reading %s: %s"
-msgstr ""
+msgstr "sftp: der opstod en fejl under læsning af %s: %s"
 
 msgid "sftp: Unable to get current user name."
-msgstr ""
+msgstr "sftp: Kan ikke hente nuværende brugernavn."
 
 msgid "sftp: Invalid host name."
 msgstr "sftp: ugyldigt værtsnavn."
 
 #, c-format
 msgid "sftp: %s"
-msgstr ""
+msgstr "sftp: %s"
 
 #, c-format
 msgid "sftp: making connection to %s"
-msgstr ""
+msgstr "sftp: opretter forbindelse til %s"
 
 msgid "sftp: connection interrupted by user"
-msgstr ""
+msgstr "sftp: forbindelse afbrudt af bruger"
 
 #, c-format
 msgid "sftp: connection to server failed: %s"
-msgstr ""
+msgstr "sftp: forbindelse til server mislykkedes: %s"
 
 #, c-format
 msgid "sftp: Enter passphrase for %s "
-msgstr ""
+msgstr "sftp: Indtast adgangskode til %s "
 
 msgid "sftp: Passphrase is empty."
-msgstr ""
+msgstr "sftp: Adgangskoden er tom."
 
 #, c-format
 msgid "sftp: Enter password for %s "
-msgstr ""
+msgstr "sftp: Indtast adgangskode til %s "
 
 msgid "sftp: Password is empty."
-msgstr ""
+msgstr "sftp: Adgangskoden er tom."
 
 msgid "sftp: Failure establishing SSH session"
-msgstr ""
+msgstr "sftp: Kunne ikke etablere SSH-session"
 
 msgid "sftp: No file handler data present for reading file"
-msgstr ""
+msgstr "sftp: Ingen filbehandlerdata tilstedet til at læse fil"
+
+#, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: fejl ved sokkel: %s"
 
 #, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
-msgstr ""
+msgstr "sftp: (Ctrl-G break) Liste... %s"
 
 msgid "sftp: Listing done."
-msgstr ""
+msgstr "sftp: Liste færdig."
 
 #, c-format
 msgid "reconnect to %s failed"
@@ -4299,7 +4393,7 @@ msgstr ""
 "Gem ændret fil?"
 
 msgid "&Line number"
-msgstr ""
+msgstr "&Linjenummer"
 
 msgid "Pe&rcents"
 msgstr "&Procenter"
@@ -4317,7 +4411,7 @@ msgid "ButtonBar|Ascii"
 msgstr "Ascii"
 
 msgid "ButtonBar|HxSrch"
-msgstr "HxSrch"
+msgstr "HxSøg"
 
 msgid "ButtonBar|UnWrap"
 msgstr "Fjern ombryd"
@@ -4348,6 +4442,8 @@ msgid ""
 "Failed to read data from child stdout:\n"
 "%s"
 msgstr ""
+"Kunne ikke læse data fra barne-stdout:\n"
+"%s"
 
 #, c-format
 msgid ""
@@ -4379,13 +4475,15 @@ msgstr ""
 "%s"
 
 msgid "Cannot view: not a regular file"
-msgstr "Kan ikke vise: Ikke en regulær fil"
+msgstr "Kan ikke vise: Ikke en almindelig fil"
 
 #, c-format
 msgid ""
 "Cannot open \"%s\" in parse mode\n"
 "%s"
 msgstr ""
+"Kan ikke åbne \"%s\" i fortolkningstilstand\n"
+"%s"
 
 msgid "Search done"
 msgstr "Søgning færdig"
@@ -4394,4 +4492,4 @@ msgid "Continue from beginning?"
 msgstr "Fortsæt fra begyndelsen?"
 
 msgid "Cannot fetch a local copy of /ftp://some.host/editme.txt"
-msgstr ""
+msgstr "Kan ikke hente en lokal kopi af /ftp://en.vært/editme.txt"
Binary files mc-4.8.20/po/de.gmo and mc-4.8.21/po/de.gmo differ
diff -urpN mc-4.8.20/po/de.po mc-4.8.21/po/de.po
--- mc-4.8.20/po/de.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/de.po	2018-06-03 11:03:46.000000000 +0200
@@ -9,7 +9,7 @@
 # Fabian Affolter <fab@fedoraproject.org>, 2012-2013
 # Karsten <waldstadt@web.de>, 2016
 # Larson März <larson@protonmail.ch>, 2016
-# Ronny Hößrich, 2015
+# Ronny Hößrich, 2015,2018
 # Slava Zanko <slavazanko@gmail.com>, 2011
 # username <my.somewhat.lengthy.loginname@gmail.com>, 2011
 # valsu <valsu@hylia.de>, 2016
@@ -18,9 +18,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
-"Last-Translator: Ettore Atalan <atalanttore@googlemail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: German (http://www.transifex.com/mc/mc/language/de/)\n"
 "Language: de\n"
 "MIME-Version: 1.0\n"
@@ -676,6 +676,9 @@ msgstr "Konfigurationsoptionen anzeigen"
 msgid "Print last working directory to specified file"
 msgstr "Letztes Verzeichnis zur angegebenen Datei anzeigen"
 
+msgid "<file>"
+msgstr "<file>"
+
 msgid "Enables subshell support (default)"
 msgstr "Schaltet Subshell-Unterstützung ein (normal)"
 
@@ -688,12 +691,18 @@ msgstr "FTP-Dialog in die angegebene Dat
 msgid "Set debug level"
 msgstr "Debugging-Level setzen"
 
+msgid "<integer>"
+msgstr "<integer>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Startet den Ansichtsmodus für eine Datei"
 
 msgid "Edit files"
 msgstr "Datei bearbeiten"
 
+msgid "<file> ..."
+msgstr "<file> ..."
+
 msgid "Forces xterm features"
 msgstr "Erzwingt xterm-Funktionen"
 
@@ -735,6 +744,9 @@ msgstr "Anfrage für Ausführung im Farb
 msgid "Specifies a color configuration"
 msgstr "Gibt eine Farbkonfiguration an"
 
+msgid "<string>"
+msgstr "<string>"
+
 msgid "Show mc with specified skin"
 msgstr "mc mit dem angegebenen Skin anzeigen"
 
@@ -1658,8 +1670,8 @@ msgstr ""
 "Ein benutzerfreundlicher Texteditor\n"
 "geschrieben für Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "Über"
@@ -1846,6 +1858,15 @@ msgstr ""
 "Kann chmod für \"%s\" nicht durchführen\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "&Ignorieren"
+
+msgid "Ignore &all"
+msgstr "&Alles ignorieren"
+
+msgid "&Retry"
+msgstr "Wiede&rholen"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1938,6 +1959,9 @@ msgstr "cd folgt Lin&ks"
 msgid "Sa&fe delete"
 msgstr "Sicheres &löschen"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "Einstellungen auto&m. speichern"
 
@@ -2542,12 +2566,33 @@ msgstr ""
 "Kann das Ziel des symbolischen Links \"%s\" nicht anlegen\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"und\n"
+"\"%s\"\n"
+"sind die gleichen Verzeichnisse"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"und\n"
+"\"%s\"\n"
+"sind die gleichen Dateien"
+
 msgid "Ski&p all"
 msgstr "Alle übers&pringen"
 
-msgid "&Retry"
-msgstr "Wiede&rholen"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2571,23 +2616,19 @@ msgstr "Kein&e"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Kann Datei \"%s\" nicht untersuchen\n"
+"Kann Datei \"%s\" nicht löschen\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"und\n"
-"\"%s\"\n"
-"sind die gleichen Dateien"
+"Kann Datei \"%s\" nicht untersuchen\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2603,36 +2644,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Kann Datei \"%s\" nicht löschen\n"
+"Kann Verzeichnis \"%s\" nicht löschen\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Kann Datei \"%s\" nicht löschen\n"
+"Kann Verzeichnis \"%s\" nicht überschreiben\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Kann Verzeichnis \"%s\" nicht löschen\n"
+"Kann Datei \"%s\" nicht überschreiben\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Kann Verzeichnis \"%s\" nicht überschreiben\n"
+"Kann Verzeichnis \"%s\" nicht in \"%s\" umbenennen\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Kann nicht auf \"..\" agieren!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2798,40 +2842,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"und\n"
-"\"%s\"\n"
-"sind die gleichen Verzeichnisse"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Kann Datei \"%s\" nicht überschreiben\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Kann Verzeichnis \"%s\" nicht in \"%s\" umbenennen\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Verzeichnisse: %zu, Gesamtgröße: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Kann nicht auf \"..\" agieren!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Ich kann den Job nicht in den Hintergrund legen"
 
@@ -4251,6 +4264,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Kein Dateihandler vorhanden zum Lesen der Datei"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: Socket Fehler: %s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Control-G zum Unterbrechen) Auflisten... %s"
 
Binary files mc-4.8.20/po/de_CH.gmo and mc-4.8.21/po/de_CH.gmo differ
diff -urpN mc-4.8.20/po/de_CH.po mc-4.8.21/po/de_CH.po
--- mc-4.8.20/po/de_CH.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/de_CH.po	2018-06-03 11:03:46.000000000 +0200
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
 "PO-Revision-Date: 2015-02-26 09:48+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: German (Switzerland) (http://www.transifex.com/projects/p/mc/"
@@ -629,6 +629,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -641,12 +644,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr ""
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr ""
 
@@ -686,6 +695,9 @@ msgstr ""
 msgid "Specifies a color configuration"
 msgstr ""
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1551,7 +1563,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1731,6 +1743,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1821,6 +1842,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2398,10 +2422,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2422,16 +2459,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2446,28 +2481,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2595,32 +2633,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -3977,6 +3992,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/el.gmo and mc-4.8.21/po/el.gmo differ
diff -urpN mc-4.8.20/po/el.po mc-4.8.21/po/el.po
--- mc-4.8.20/po/el.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/el.po	2018-06-03 11:03:46.000000000 +0200
@@ -12,8 +12,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-23 18:02+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Greek (http://www.transifex.com/mc/mc/language/el/)\n"
 "Language: el\n"
@@ -648,6 +648,9 @@ msgstr "Εκτύπωση επιλογώ
 msgid "Print last working directory to specified file"
 msgstr "Εκτύπωση του τελευταίου καταλόγου εργασίας στο καθορισμένο αρχείο"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -660,12 +663,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr "Ρύθμιση επιπέδου αποσφαλμάτωσης"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Εκτελεί τον προβολέα αρχείων σε ένα αρχείο"
 
 msgid "Edit files"
 msgstr "&Επεξεργασία αρχείων"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Εξαναγκάζει λειτουργίες xterm"
 
@@ -705,6 +714,9 @@ msgstr "Αίτημα να τρέχει 
 msgid "Specifies a color configuration"
 msgstr "Καθορίζει τις ρυθμίσεις χρωμάτων"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1581,7 +1593,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1765,6 +1777,15 @@ msgstr ""
 "Αδυναμία chmod \"%s\"\n"
 "%s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Επαναπροσπάθεια"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1857,6 +1878,9 @@ msgstr "Το cd ακολουθεί το
 msgid "Sa&fe delete"
 msgstr "Ασ&φαλής διαγραφή"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2446,12 +2470,33 @@ msgid ""
 "%s"
 msgstr ""
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"και\n"
+"\"%s\"\n"
+"είναι ο ίδιος κατάλογος"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"και\n"
+"\"%s\"\n"
+"είναι το ίδιο αρχείο"
+
 msgid "Ski&p all"
 msgstr "&Παράβλεψη όλων"
 
-msgid "&Retry"
-msgstr "&Επαναπροσπάθεια"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2470,21 +2515,17 @@ msgstr "&Κανένα"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
+"Αδυναμία αφαίρεσης αρχείου \"%s\"\n"
+"%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"και\n"
-"\"%s\"\n"
-"είναι το ίδιο αρχείο"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2500,36 +2541,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Αδυναμία αφαίρεσης αρχείου \"%s\"\n"
+"Αδυναμία αφαίρεσης καταλόγου \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Αδυναμία διαγραφής αρχείου \"%s\"\n"
+"Αδυναμία αντικατάστασης καταλόγου \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Αδυναμία αφαίρεσης καταλόγου \"%s\"\n"
+"Αδυναμία αντικατάστασης αρχείου \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Αδυναμία αντικατάστασης καταλόγου \"%s\"\n"
+"Αδυναμία μετακίνησης καταλόγου \"%s\" to \"%s\"\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Αδυναμία λειτουργίας σε \"..\"!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2681,40 +2725,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"και\n"
-"\"%s\"\n"
-"είναι ο ίδιος κατάλογος"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Αδυναμία αντικατάστασης αρχείου \"%s\"\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Αδυναμία μετακίνησης καταλόγου \"%s\" to \"%s\"\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Αδυναμία λειτουργίας σε \"..\"!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Λυπούμαστε, η εργασία δεν μπορεί να μπει στο παρασκήνιο"
 
@@ -4105,6 +4118,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/en_GB.gmo and mc-4.8.21/po/en_GB.gmo differ
diff -urpN mc-4.8.20/po/en_GB.po mc-4.8.21/po/en_GB.po
--- mc-4.8.20/po/en_GB.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/en_GB.po	2018-06-03 11:03:46.000000000 +0200
@@ -8,9 +8,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-10-12 21:56+0000\n"
-"Last-Translator: Andi Chandler <andi@gowling.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: English (United Kingdom) (http://www.transifex.com/mc/mc/"
 "language/en_GB/)\n"
 "Language: en_GB\n"
@@ -639,6 +639,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -651,12 +654,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr ""
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr ""
 
@@ -696,6 +705,9 @@ msgstr ""
 msgid "Specifies a color configuration"
 msgstr ""
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1561,7 +1573,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1741,6 +1753,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1831,6 +1852,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2408,10 +2432,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2432,16 +2469,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2456,28 +2491,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2605,32 +2643,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -3987,6 +4002,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/eo.gmo and mc-4.8.21/po/eo.gmo differ
diff -urpN mc-4.8.20/po/eo.po mc-4.8.21/po/eo.po
--- mc-4.8.20/po/eo.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/eo.po	2018-06-03 11:03:46.000000000 +0200
@@ -3,14 +3,14 @@
 # This file is distributed under the same license as the mc package.
 #
 # Translators:
-# Keith Bowes <zooplah@gmail.com>, 2011,2016
+# Keith Bowes <zooplah@gmail.com>, 2011,2016,2018
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:16+0000\n"
-"Last-Translator: Keith Bowes <zooplah@gmail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Esperanto (http://www.transifex.com/mc/mc/language/eo/)\n"
 "Language: eo\n"
 "MIME-Version: 1.0\n"
@@ -659,6 +659,9 @@ msgstr "Eligi muntajn agordaĵojn"
 msgid "Print last working directory to specified file"
 msgstr "Eligi lastan labordosierujon al specifan dosieron"
 
+msgid "<file>"
+msgstr "<dosieron>"
+
 msgid "Enables subshell support (default)"
 msgstr "Aktivigi subŝelon (apriore)"
 
@@ -671,12 +674,18 @@ msgstr "Protokoli FTP-dialogon al specif
 msgid "Set debug level"
 msgstr "Specifi senerarigan nivelon"
 
+msgid "<integer>"
+msgstr "<entjero>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Plenumigi la dosiero-legilon je la dosiero"
 
 msgid "Edit files"
 msgstr "Redakti dosierojn"
 
+msgid "<file> ..."
+msgstr "<dosiero> …"
+
 msgid "Forces xterm features"
 msgstr "Devigi xterm-trajtojn"
 
@@ -716,6 +725,9 @@ msgstr "Peti plenumiĝi bunte"
 msgid "Specifies a color configuration"
 msgstr "Specifi koloran agordon"
 
+msgid "<string>"
+msgstr "<ĉeno>"
+
 msgid "Show mc with specified skin"
 msgstr "Montri kun specifa etoso"
 
@@ -1640,10 +1652,8 @@ msgstr ""
 "Afabla tekstoredaktilo\n"
 "verkita por Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
-"Kopirajto © 1996–2016 Free Software Foundation (Fondaĵo pri liberaj "
-"programoj)"
 
 msgid "About"
 msgstr "Pri"
@@ -1830,6 +1840,15 @@ msgstr ""
 "Ne eblas ŝanĝi permesojn de \"%s\"\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "&Ignori"
+
+msgid "Ignore &all"
+msgstr "Ignori ĉio&n"
+
+msgid "&Retry"
+msgstr "&Reprovi"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1922,6 +1941,9 @@ msgstr "Dosieruja ŝanĝo sek&vas ligilo
 msgid "Sa&fe delete"
 msgstr "Sendanĝera &forigo"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "Aŭtomate konservi agor&don"
 
@@ -2525,12 +2547,33 @@ msgstr ""
 "Ne eblas krei celan molan ligilon \"%s\"\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"kaj\n"
+"\"%s\"\n"
+"estas la sama dosierujo"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"kaj\n"
+"\"%s\"\n"
+"estas la sama dosiero"
+
 msgid "Ski&p all"
 msgstr "Preter&lasi ĉion"
 
-msgid "&Retry"
-msgstr "&Reprovi"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2554,23 +2597,19 @@ msgstr "Neni&o"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Ne eblas trovi dosieron \"%s\n"
+"Ne eblas forigi dosieron \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"kaj\n"
-"\"%s\"\n"
-"estas la sama dosiero"
+"Ne eblas trovi dosieron \"%s\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2586,36 +2625,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Ne eblas forigi dosieron \"%s\"\n"
+"Ne eblas forigi dosierujon \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Ne eblas forigi dosieron \"%s\"\n"
+"Ne eblas anstataŭigi dosierujon \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Ne eblas forigi dosierujon \"%s\"\n"
+"Ne eblas anstataŭigi dosieron \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Ne eblas anstataŭigi dosierujon \"%s\"\n"
+"Ne eblas movi dosierujon \"%s\" al \"%s\"\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Ne eblas operacii je \"..\"!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2781,40 +2823,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"kaj\n"
-"\"%s\"\n"
-"estas la sama dosierujo"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Ne eblas anstataŭigi dosieron \"%s\"\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Ne eblas movi dosierujon \"%s\" al \"%s\"\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Dosierujoj: %zu, ĉioma grando: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Ne eblas operacii je \"..\"!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Bedaŭrinde mi ne povis meti la taskon en la fonon"
 
@@ -4229,6 +4240,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Neniu dosiertraktila datumo ĉeestas por legi dosieron"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: kontaktoskatola eraro: %s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Stir-G rompi) Listo... %s"
 
Binary files mc-4.8.20/po/es.gmo and mc-4.8.21/po/es.gmo differ
diff -urpN mc-4.8.20/po/es.po mc-4.8.21/po/es.po
--- mc-4.8.20/po/es.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/es.po	2018-06-03 11:03:46.000000000 +0200
@@ -13,8 +13,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 20:11+0000\n"
 "Last-Translator: David Martin <dhmartina@yahoo.es>\n"
 "Language-Team: Spanish (http://www.transifex.com/mc/mc/language/es/)\n"
 "Language: es\n"
@@ -662,6 +662,9 @@ msgstr "Mostrar opciones de configuraci
 msgid "Print last working directory to specified file"
 msgstr "Guardar el nombre del directorio en un archivo"
 
+msgid "<file>"
+msgstr "<archivo>"
+
 msgid "Enables subshell support (default)"
 msgstr "Activar uso de subshell (por defecto)"
 
@@ -674,12 +677,18 @@ msgstr "Registrar diálogos ftp en un ar
 msgid "Set debug level"
 msgstr "Fijar el nivel de depuración"
 
+msgid "<integer>"
+msgstr "<número>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Abrir un archivo con el visor"
 
 msgid "Edit files"
 msgstr "Editar archivos"
 
+msgid "<file> ..."
+msgstr "<archivo> ..."
+
 msgid "Forces xterm features"
 msgstr "Utilizar las posibilidades de xterm"
 
@@ -719,6 +728,9 @@ msgstr "Solicitar la ejecución en color
 msgid "Specifies a color configuration"
 msgstr "Indicar una configuración de colores"
 
+msgid "<string>"
+msgstr "<texto>"
+
 msgid "Show mc with specified skin"
 msgstr "Mostrar mc con la careta (skin) indicada"
 
@@ -781,7 +793,7 @@ msgstr ""
 "Colores estándar:\n"
 "   black, gray, red, brightred, green, brightgreen, brown,\n"
 "   yellow, blue, brightblue, magenta, brightmagenta, cyan,\n"
-"   brightcyan, lightgray and white\n"
+"   brightcyan, lightgray y white\n"
 "\n"
 "Colores extendidos, cuando estén disponibles 256 colores:\n"
 "   color16 a color255, o rgb000 a rgb555 y gray0 a gray23\n"
@@ -1396,7 +1408,7 @@ msgid "&Mark columns"
 msgstr "marcar c&Olumnas"
 
 msgid "Mark &all"
-msgstr "marcar &Todo"
+msgstr "marcar &Todos"
 
 msgid "Unmar&k"
 msgstr "desma&Rcar"
@@ -1645,8 +1657,8 @@ msgstr ""
 "Un editor de texto amigable\n"
 "para Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr "Copyright (C) 1996-2018 the Free Software Foundation"
 
 msgid "About"
 msgstr "Acerca de..."
@@ -1833,6 +1845,15 @@ msgstr ""
 "Imposible cambiar los permisos de «%s»\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "&Ignorar"
+
+msgid "Ignore &all"
+msgstr "ignorar &Todos"
+
+msgid "&Retry"
+msgstr "&Reintentar"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1925,6 +1946,9 @@ msgstr "cd sigue en&Laces"
 msgid "Sa&fe delete"
 msgstr "precauciones de &Borrado"
 
+msgid "Safe overwrite"
+msgstr "precauciones de sobrescritura"
+
 msgid "A&uto save setup"
 msgstr "auto-guarda con&Figuración"
 
@@ -2530,12 +2554,33 @@ msgstr ""
 "Imposible crear el enlace simbólico destino «%s»\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"«%s»\n"
+"y\n"
+"«%s»\n"
+"son el mismo directorio"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"«%s»\n"
+"y\n"
+"«%s»\n"
+"son el mismo archivo"
+
 msgid "Ski&p all"
 msgstr "saltar &Todos"
 
-msgid "&Retry"
-msgstr "&Reintentar"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2558,23 +2603,19 @@ msgstr "nin&Guno"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Imposible identificar el archivo «%s»\n"
+"Imposible borrar el archivo «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"«%s»\n"
-"y\n"
-"«%s»\n"
-"son el mismo archivo"
+"Imposible identificar el archivo «%s»\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2590,36 +2631,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Imposible borrar el archivo «%s»\n"
+"Imposible eliminar el directorio «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Imposible borrar el archivo «%s»\n"
+"Imposible sobrescribir el directorio «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Imposible eliminar el directorio «%s»\n"
+"Imposible sobrescribir el archivo «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Imposible sobrescribir el directorio «%s»\n"
+"Imposible mover el directorio «%s» a «%s»\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "¡Imposible operar sobre «..»!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2785,40 +2829,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"«%s»\n"
-"y\n"
-"«%s»\n"
-"son el mismo directorio"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Imposible sobrescribir el archivo «%s»\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Imposible mover el directorio «%s» a «%s»\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Directorios: %zu, tamaño total: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "¡Imposible operar sobre «..»!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Lo siento, no se pudo poner la tarea en 2º plano"
 
@@ -4232,6 +4245,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Sin datos del descriptor de archivo al leer"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: Error de socket: %s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G para cancelar) Listando... %s"
 
@@ -4251,7 +4268,7 @@ msgstr "Error %s creando el directorio %
 
 #, c-format
 msgid "Error %s removing directory %s"
-msgstr "Eror %s eliminando el directorio %s"
+msgstr "Error %s eliminando el directorio %s"
 
 #, c-format
 msgid "%s opening remote file %s"
Binary files mc-4.8.20/po/et.gmo and mc-4.8.21/po/et.gmo differ
diff -urpN mc-4.8.20/po/et.po mc-4.8.21/po/et.po
--- mc-4.8.20/po/et.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/et.po	2018-06-03 11:03:46.000000000 +0200
@@ -3,13 +3,13 @@
 # This file is distributed under the same license as the mc package.
 #
 # Translators:
-# Kristjan Räts <kristjanrats@gmail.com>, 2013-2016
+# Kristjan Räts <kristjanrats@gmail.com>, 2013-2016,2018
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 18:39+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Estonian (http://www.transifex.com/mc/mc/language/et/)\n"
 "Language: et\n"
@@ -103,18 +103,22 @@ msgid ""
 "Number out of range (should be in byte range, 0 <= n <= 0xFF, expressed in "
 "hex)"
 msgstr ""
+"Väärtus ei ole oodatud vahemikus (peab olema baidi vahemikus 0x00 <= x <= "
+"0xFF, kirjutatud 16-süsteemis)"
 
 msgid "Invalid character"
-msgstr ""
+msgstr "Vigane märk"
 
 msgid "Unmatched quotes character"
-msgstr ""
+msgstr "Paariliseta jutumärk"
 
 #, c-format
 msgid ""
 "Hex pattern error at position %d:\n"
 "%s."
 msgstr ""
+"16-numbri mustri viga kohal %d:\n"
+"%s."
 
 msgid "Search string not found"
 msgstr "Otsitavat stringi ei leitud"
@@ -656,6 +660,9 @@ msgstr "Trüki häälestuse suvandid"
 msgid "Print last working directory to specified file"
 msgstr "Väljasta viimane töökataloog määratud faili"
 
+msgid "<file>"
+msgstr "<file>"
+
 msgid "Enables subshell support (default)"
 msgstr "Lubab alamkesta toe (vaikimisi)"
 
@@ -668,12 +675,18 @@ msgstr "Logi FTP dialoog määratud fail
 msgid "Set debug level"
 msgstr "Määra silumistase"
 
+msgid "<integer>"
+msgstr "<integer>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Käivitab failivaaturi failile"
 
 msgid "Edit files"
 msgstr "Muuda faile"
 
+msgid "<file> ..."
+msgstr "<file> ..."
+
 msgid "Forces xterm features"
 msgstr "Sunnib xterm'i tunnused"
 
@@ -713,6 +726,9 @@ msgstr "Nõuab värvide kasutamist"
 msgid "Specifies a color configuration"
 msgstr "Määrab värvide seadistuse"
 
+msgid "<string>"
+msgstr "<string>"
+
 msgid "Show mc with specified skin"
 msgstr "Kuva mc määratud nahaga"
 
@@ -785,13 +801,13 @@ msgid "Color options"
 msgstr "Värvi suvandid"
 
 msgid "[+lineno] file1[:lineno] [file2[:lineno]...]"
-msgstr ""
+msgstr "[+reanr] fail1[:reanr] [fail2[:reanr]...]"
 
 msgid "file"
 msgstr "fail"
 
 msgid "file1 file2"
-msgstr ""
+msgstr "fail1 fail2"
 
 msgid "[this_dir] [other_panel_dir]"
 msgstr "[this_dir] [other_panel_dir]"
@@ -1635,8 +1651,8 @@ msgstr ""
 "Kasutajasõbralik tekstitoimeti, mis\n"
 "on loodud Midnight Commanderile."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Autoriõigus (C) 1996-2016 Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "Programmist"
@@ -1822,6 +1838,15 @@ msgstr ""
 "\"%s\" õiguste muutmine nurjus\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "E&ira"
+
+msgid "Ignore &all"
+msgstr "Eira &kõiki"
+
+msgid "&Retry"
+msgstr "&Proovi uuesti"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1914,6 +1939,9 @@ msgstr "&Järgi kataloogide nimeviitu"
 msgid "Sa&fe delete"
 msgstr "&Kindel kustutamine"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "Seadete a&utomaatsalvestus"
 
@@ -2024,7 +2052,7 @@ msgid "User &mini status"
 msgstr "Kasutaja &mini info"
 
 msgid "Listing format"
-msgstr ""
+msgstr "Loendi vormindus"
 
 msgid "Executable &first"
 msgstr "Käivitatavad &esimestena"
@@ -2503,6 +2531,9 @@ msgid ""
 "\n"
 "Option Stable Symlinks will be disabled"
 msgstr ""
+"Stabiilseid nimeviitu saab luua ainult kohalikes failisüsteemides:\n"
+"\n"
+"Valik stabiilsed nimeviidad keelatakse"
 
 #, c-format
 msgid ""
@@ -2512,12 +2543,33 @@ msgstr ""
 "Nimeviida \"%s\" loomine nurjus sihtkohas\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"ja\n"
+"\"%s\"\n"
+"on üks ja see sama kataloog"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"ja\n"
+"\"%s\"\n"
+"on üks ja see sama fail"
+
 msgid "Ski&p all"
 msgstr "Jäta &kõik vahele"
 
-msgid "&Retry"
-msgstr "&Proovi uuesti"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2541,23 +2593,19 @@ msgstr "&Mitte ükski"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Faili \"%s\" info päring nurjus\n"
+"Faili \"%s\" eemaldamine nurjus\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"ja\n"
-"\"%s\"\n"
-"on üks ja see sama fail"
+"Faili \"%s\" info päring nurjus\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2573,36 +2621,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Faili \"%s\" eemaldamine nurjus\n"
+"Kataloogi \"%s\" eemaldamine nurjus\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Faili \"%s\" kustutamine nurjus\n"
+"Kataloogi \"%s\" ülekirjutamine nurjus\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Kataloogi \"%s\" eemaldamine nurjus\n"
+"Faili \"%s\" ülekirjutamine nurjus\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Kataloogi \"%s\" ülekirjutamine nurjus\n"
+"Kataloogi \"%s\" teisaldamine kataloogi \"%s\" nurjus\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Kataloogi \"..\" kasutamine on keelatud!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2768,40 +2819,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"ja\n"
-"\"%s\"\n"
-"on üks ja see sama kataloog"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Faili \"%s\" ülekirjutamine nurjus\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Kataloogi \"%s\" teisaldamine kataloogi \"%s\" nurjus\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Katalooge: %zu, kogumaht: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Kataloogi \"..\" kasutamine on keelatud!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Vabandust, töö saatmine taustale nurjus"
 
@@ -3231,7 +3251,7 @@ msgid "&Info"
 msgstr "&Info"
 
 msgid "&Listing format..."
-msgstr ""
+msgstr "&Loendi vormindus"
 
 msgid "&Sort order..."
 msgstr "&Sortimine..."
@@ -3854,10 +3874,10 @@ msgid "Data types:"
 msgstr "Andmetüübid:"
 
 msgid "Home directory:"
-msgstr ""
+msgstr "Kodukataloog:"
 
 msgid "Profile root directory:"
-msgstr ""
+msgstr "Profiili juurkataloog:"
 
 msgid "System data"
 msgstr "Süsteemi andmed"
@@ -4215,6 +4235,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: faili lugemiseks puuduvad faili käsitleja andmed"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: sokli viga: %s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl+G katkestab) Loendamine... %s"
 
Binary files mc-4.8.20/po/eu.gmo and mc-4.8.21/po/eu.gmo differ
diff -urpN mc-4.8.20/po/eu.po mc-4.8.21/po/eu.po
--- mc-4.8.20/po/eu.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/eu.po	2018-06-03 11:03:46.000000000 +0200
@@ -3,14 +3,14 @@
 # This file is distributed under the same license as the mc package.
 #
 # Translators:
-# Iñigo Salvador Azurmendi <xalba@euskalnet.net>, 2011,2015-2017
+# Iñigo Salvador Azurmendi <xalba@euskalnet.net>, 2011,2015-2018
 # Slava Zanko <slavazanko@gmail.com>, 2011
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-05-12 11:25+0000\n"
 "Last-Translator: Iñigo Salvador Azurmendi <xalba@euskalnet.net>\n"
 "Language-Team: Basque (http://www.transifex.com/mc/mc/language/eu/)\n"
 "Language: eu\n"
@@ -104,6 +104,8 @@ msgid ""
 "Number out of range (should be in byte range, 0 <= n <= 0xFF, expressed in "
 "hex)"
 msgstr ""
+"Barruti kanpoko zenbakia (byte barrutian egon behar luke, 0 <= n <= 0xFF, "
+"hamaseitarrean adierazita)"
 
 msgid "Invalid character"
 msgstr "Karaktere baliogabea"
@@ -656,6 +658,9 @@ msgstr "Inprimatu konfiguratzeko aukerak
 msgid "Print last working directory to specified file"
 msgstr "Inprimatu laneko azken direktorioa zehaztutako fitxategira"
 
+msgid "<file>"
+msgstr "<file>"
+
 msgid "Enables subshell support (default)"
 msgstr "Subshell euskarria (lehenetsia) gaitzen du"
 
@@ -668,12 +673,18 @@ msgstr "Gorde ftp elkarrizketa zehaztuta
 msgid "Set debug level"
 msgstr "Ezarri arazketa maila"
 
+msgid "<integer>"
+msgstr "<integer>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Fitxategi-ikustailea fitxategian abiarazten du"
 
 msgid "Edit files"
 msgstr "Editatu fitxategiak"
 
+msgid "<file> ..."
+msgstr "<file> ..."
+
 msgid "Forces xterm features"
 msgstr "xterm eginbideak behartzen ditu"
 
@@ -713,6 +724,9 @@ msgstr "Kolore moduan exekutatzeko eskat
 msgid "Specifies a color configuration"
 msgstr "Kolore-konfigurazioa zehazten du"
 
+msgid "<string>"
+msgstr "<string>"
+
 msgid "Show mc with specified skin"
 msgstr "Erakutsi mc zehaztutako azalarekin"
 
@@ -1638,8 +1652,8 @@ msgstr ""
 "Testu editore lagunkoi bat\n"
 "Midnight Commander-rarentzako idatzia."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr "Copyright (C) 1996-2018 the Free Software Foundation"
 
 msgid "About"
 msgstr "Honi buruz"
@@ -1826,6 +1840,15 @@ msgstr ""
 "\"%s\"-ren baimenak ezin aldatu (\"chmod\")\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "&Jaromonik ez"
+
+msgid "Ignore &all"
+msgstr "Jaramonik ez &guztiari"
+
+msgid "&Retry"
+msgstr "&Saiatu berriz"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1918,6 +1941,9 @@ msgstr "Cd-k este&kei jarraitzen die"
 msgid "Sa&fe delete"
 msgstr "E&zabatze segurua"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "A&uto gorde ezarpena"
 
@@ -2521,12 +2547,33 @@ msgstr ""
 "\"%s\" helburu esteka sinbolikoa ezin sortu\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"eta\n"
+"\"%s\"\n"
+"direktorio bera dira"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"eta\n"
+"\"%s\"\n"
+"fitxategi bera dira"
+
 msgid "Ski&p all"
 msgstr "Sa&hiestu guztia"
 
-msgid "&Retry"
-msgstr "&Saiatu berriz"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2550,23 +2597,19 @@ msgstr "&Bat ere ez"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"\"%s\" fitxategiaren egoera (\"stat\") ezin lortu\n"
+"\"%s\" fitxategia ezin ezabatu\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"eta\n"
-"\"%s\"\n"
-"fitxategi bera dira"
+"\"%s\" fitxategiaren egoera (\"stat\") ezin lortu\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2582,36 +2625,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"\"%s\" fitxategia ezin ezabatu\n"
+"\"%s\" direktorioa ezin ezabatu\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"\"%s\" fitxategia ezin ezabatu\n"
+"\"%s\" direktorioa ezin gainidatzi\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"\"%s\" direktorioa ezin ezabatu\n"
+"\"%s\" fitxategia ezin gainidatzi\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"\"%s\" direktorioa ezin gainidatzi\n"
+"\"%s\" direktorioa \"%s\"-ra ezin mugitu\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Ezin da \"..\" erabili!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2777,40 +2823,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"eta\n"
-"\"%s\"\n"
-"direktorio bera dira"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"\"%s\" fitxategia ezin gainidatzi\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"\"%s\" direktorioa \"%s\"-ra ezin mugitu\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Direktorioak: %zu, guztizko neurria: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Ezin da \"..\" erabili!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Barkatu, ezin izan dut lana hondoan ipini"
 
@@ -4226,6 +4241,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Ez dago fitxategi maneiatzaile daturik fitxategia irakurtzeko"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ktrl-G eteteko) Zerrendatzen... %s"
 
Binary files mc-4.8.20/po/fa.gmo and mc-4.8.21/po/fa.gmo differ
diff -urpN mc-4.8.20/po/fa.po mc-4.8.21/po/fa.po
--- mc-4.8.20/po/fa.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/fa.po	2018-06-03 11:03:46.000000000 +0200
@@ -12,15 +12,15 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-23 18:38+0000\n"
-"Last-Translator: Arya Hadi <arya.hadi97@gmail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Persian (http://www.transifex.com/mc/mc/language/fa/)\n"
 "Language: fa\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0;\n"
+"Plural-Forms: nplurals=2; plural=(n > 1);\n"
 
 # "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 msgid "Warning: cannot load codepages list"
@@ -633,6 +633,9 @@ msgstr "نوشتن تنظیمات پیک
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -645,12 +648,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr "تنظیم سطح خطایابی"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr ""
 
 msgid "Edit files"
 msgstr "ویرایش فایل‌ها"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr ""
 
@@ -690,6 +699,9 @@ msgstr "درخواست برای اجرا
 msgid "Specifies a color configuration"
 msgstr "مشخص کردن پیکربندی یک رنگ"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1555,7 +1567,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1735,6 +1747,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1825,6 +1846,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2402,10 +2426,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2426,16 +2463,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2450,28 +2485,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2599,32 +2637,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -2824,6 +2839,7 @@ msgstr ""
 msgid "Finished (ignored %zu directory)"
 msgid_plural "Finished (ignored %zu directories)"
 msgstr[0] ""
+msgstr[1] ""
 
 msgid "Searching"
 msgstr "در حال جستجو"
@@ -2982,6 +2998,7 @@ msgstr ""
 msgid " (%lu block)"
 msgid_plural " (%lu blocks)"
 msgstr[0] ""
+msgstr[1] ""
 
 #, c-format
 msgid "Owner:      %s/%s"
@@ -3216,6 +3233,7 @@ msgstr "قاب‌ها:"
 msgid "You have %zu opened screen. Quit anyway?"
 msgid_plural "You have %zu opened screens. Quit anyway?"
 msgstr[0] ""
+msgstr[1] ""
 
 msgid "The Midnight Commander"
 msgstr "فرماندار نیمه‌شب"
@@ -3362,6 +3380,7 @@ msgstr ""
 msgid "%s in %d file"
 msgid_plural "%s in %d files"
 msgstr[0] "%s در %d فایل"
+msgstr[1] "%s در %d فایل"
 
 msgid "Panelize"
 msgstr ""
@@ -3977,6 +3996,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/fi.gmo and mc-4.8.21/po/fi.gmo differ
diff -urpN mc-4.8.20/po/fi.po mc-4.8.21/po/fi.po
--- mc-4.8.20/po/fi.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/fi.po	2018-06-03 11:03:46.000000000 +0200
@@ -3,16 +3,16 @@
 # This file is distributed under the same license as the mc package.
 #
 # Translators:
-# Nikolay Korotkiy <sikmir@gmail.com>, 2017
+# Nikolay Korotkiy <sikmir@gmail.com>, 2017-2018
 # Slava Zanko <slavazanko@gmail.com>, 2011
 # Kasvain <kasvain@gmail.com>, 2015
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-10-29 09:42+0000\n"
-"Last-Translator: Nikolay Korotkiy <sikmir@gmail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Finnish (http://www.transifex.com/mc/mc/language/fi/)\n"
 "Language: fi\n"
 "MIME-Version: 1.0\n"
@@ -378,7 +378,7 @@ msgid "Colon"
 msgstr ""
 
 msgid "Semicolon"
-msgstr ""
+msgstr "Puolipiste"
 
 msgid "Exclamation mark"
 msgstr "Varoitus-merkki"
@@ -640,6 +640,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -652,12 +655,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr "Aseta debug-taso"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr ""
 
 msgid "Edit files"
 msgstr "Muokkaa tiedostoja"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Pakottaa xterm-ominaisuudet"
 
@@ -697,6 +706,9 @@ msgstr "Pyytää ajettavaksi värillisen
 msgid "Specifies a color configuration"
 msgstr "Määrittää värikonfiguraation"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Näytä mc määritetyllä ulkoasulla"
 
@@ -812,7 +824,7 @@ msgid "&Whole words"
 msgstr "&Kokonaiset sanat"
 
 msgid "&All charsets"
-msgstr ""
+msgstr "&Kaikki merkistöt"
 
 msgid "Search"
 msgstr "Etsi"
@@ -1145,7 +1157,7 @@ msgid ""
 msgstr ""
 
 msgid "Close file"
-msgstr ""
+msgstr "Sulje tiedosto"
 
 #, c-format
 msgid ""
@@ -1297,7 +1309,7 @@ msgid "A&bout..."
 msgstr ""
 
 msgid "&Quit"
-msgstr ""
+msgstr "&Lopeta"
 
 msgid "&Undo"
 msgstr ""
@@ -1489,7 +1501,7 @@ msgid "&Window"
 msgstr "&Ikkuna"
 
 msgid "&Options"
-msgstr ""
+msgstr "&Valinnat"
 
 msgid "&None"
 msgstr ""
@@ -1562,11 +1574,11 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
-msgstr ""
+msgstr "Tietoja"
 
 msgid "Open files"
 msgstr ""
@@ -1742,6 +1754,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1752,7 +1773,7 @@ msgid "< Default >"
 msgstr ""
 
 msgid "Skins"
-msgstr ""
+msgstr "Ulkoasuteemat"
 
 msgid "Other 8 bit"
 msgstr ""
@@ -1832,6 +1853,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -1839,7 +1863,7 @@ msgid "Configure options"
 msgstr ""
 
 msgid "Skin:"
-msgstr ""
+msgstr "Ulkoasuteema:"
 
 msgid "Appearance"
 msgstr ""
@@ -1911,7 +1935,7 @@ msgid "Panel options"
 msgstr ""
 
 msgid "Information"
-msgstr ""
+msgstr "Informaatio"
 
 msgid ""
 "Using the fast reload option may not reflect the exact\n"
@@ -2373,7 +2397,7 @@ msgid "%o %d %f%m"
 msgstr ""
 
 msgid "files"
-msgstr ""
+msgstr "tiedostot"
 
 msgid "directory"
 msgstr ""
@@ -2409,10 +2433,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2433,16 +2470,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2457,28 +2492,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2606,32 +2644,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -2775,7 +2790,7 @@ msgid "&View - F3"
 msgstr ""
 
 msgid "&Edit - F4"
-msgstr ""
+msgstr "&Muokkaa - F4"
 
 #, c-format
 msgid "Found: %lu"
@@ -2803,7 +2818,7 @@ msgid "Case sens&itive"
 msgstr ""
 
 msgid "A&ll charsets"
-msgstr ""
+msgstr "Kai&kki merkistöt"
 
 msgid "Fir&st hit"
 msgstr ""
@@ -3237,13 +3252,13 @@ msgid "&Above"
 msgstr ""
 
 msgid "&Left"
-msgstr ""
+msgstr "&Vasen"
 
 msgid "&Below"
 msgstr ""
 
 msgid "&Right"
-msgstr ""
+msgstr "&Oikea"
 
 msgid "ButtonBar|Menu"
 msgstr ""
@@ -3993,6 +4008,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/fr.gmo and mc-4.8.21/po/fr.gmo differ
diff -urpN mc-4.8.20/po/fr.po mc-4.8.21/po/fr.po
--- mc-4.8.20/po/fr.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/fr.po	2018-06-03 11:03:46.000000000 +0200
@@ -4,7 +4,8 @@
 #
 # Translators:
 # baua gonzo <baua.gonzo@gmail.com>, 2016
-# David D, 2017
+# David D, 2017-2018
+# David Prudhomme <david7.prudhomme@gmail.com>, 2018
 # Scoubidou <david.vantyghem@free.fr>, 2015
 # Effede Effede <g2sainfroc@gmail.com>, 2016
 # Matthieu Crapet <mcrapet@gmail.com>, 2013-2016
@@ -16,9 +17,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-23 18:02+0000\n"
-"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-05-03 09:01+0000\n"
+"Last-Translator: David Prudhomme <david7.prudhomme@gmail.com>\n"
 "Language-Team: French (http://www.transifex.com/mc/mc/language/fr/)\n"
 "Language: fr\n"
 "MIME-Version: 1.0\n"
@@ -119,13 +120,15 @@ msgid "Invalid character"
 msgstr "Caractère invalide"
 
 msgid "Unmatched quotes character"
-msgstr ""
+msgstr "Caractères de citation non appairés"
 
 #, c-format
 msgid ""
 "Hex pattern error at position %d:\n"
 "%s."
 msgstr ""
+"Erreur de motif Hexa à la position %d :\n"
+"%s."
 
 msgid "Search string not found"
 msgstr " Chaîne non trouvée "
@@ -198,7 +201,7 @@ msgid "True color not supported in this
 msgstr "Truecolor n'est pas permis cette version d'argot (\"slang version\")."
 
 msgid "Your terminal doesn't even seem to support 256 colors."
-msgstr "Votre terminal semble ne pas permettre 256 couleurs."
+msgstr "Votre terminal ne semble même pas permettre 256 couleurs."
 
 msgid "Set COLORTERM=truecolor if your terminal really supports true colors."
 msgstr ""
@@ -532,7 +535,7 @@ msgid ""
 "%s"
 msgstr ""
 "Erreur inattendue dans select() pendant la lecture de données d'un processus "
-"fils:\n"
+"fils :\n"
 "%s"
 
 #, c-format
@@ -540,7 +543,7 @@ msgid ""
 "Unexpected error in waitpid():\n"
 "%s"
 msgstr ""
-"Erreur inattendue dans waitpid():\n"
+"Erreur inattendue dans waitpid() :\n"
 "%s"
 
 msgid "Warning"
@@ -670,6 +673,9 @@ msgstr "Imprimer les options de configur
 msgid "Print last working directory to specified file"
 msgstr "Écrit le dernier répertoire courant dans le fichier donné"
 
+msgid "<file>"
+msgstr "<file>"
+
 msgid "Enables subshell support (default)"
 msgstr "Active le support des sous-shells (par défaut)"
 
@@ -682,12 +688,18 @@ msgstr "Consigne les échanges FTP dans
 msgid "Set debug level"
 msgstr "Définit le niveau de débogage"
 
+msgid "<integer>"
+msgstr "<integer>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Lance la visionneuse sur un fichier"
 
 msgid "Edit files"
 msgstr "Éditer les fichiers"
 
+msgid "<file> ..."
+msgstr "<file> ..."
+
 msgid "Forces xterm features"
 msgstr "Force un attribut xterm"
 
@@ -729,6 +741,9 @@ msgstr "Demande à fonctionner en mode c
 msgid "Specifies a color configuration"
 msgstr "Spécifie une configuration de couleurs"
 
+msgid "<string>"
+msgstr "<string>"
+
 msgid "Show mc with specified skin"
 msgstr "Afficher mc avec le thème donné"
 
@@ -798,13 +813,13 @@ msgid "Color options"
 msgstr "Options de couleur"
 
 msgid "[+lineno] file1[:lineno] [file2[:lineno]...]"
-msgstr ""
+msgstr "[+ligne] fichier1[:ligne] [fichier2[:ligne]...]"
 
 msgid "file"
 msgstr "fichier"
 
 msgid "file1 file2"
-msgstr ""
+msgstr "fichier1 fichier2"
 
 msgid "[this_dir] [other_panel_dir]"
 msgstr "[ce_rép] [autre_rép_panneau]"
@@ -1223,7 +1238,7 @@ msgid ""
 "Save before close?"
 msgstr ""
 "Le fichier %s a été modifié. \n"
-"Sauvegarder avant de quitter?"
+"Sauvegarder avant de quitter ?"
 
 msgid "Close file"
 msgstr "Fermer le fichier"
@@ -1628,7 +1643,7 @@ msgid "Synta&x highlighting"
 msgstr "Coloration synta&xique"
 
 msgid "C&ursor after inserted block"
-msgstr "C&urseur après le bloc insére"
+msgstr "C&urseur après le bloc inséré"
 
 msgid "Pers&istent selection"
 msgstr "Sélection pers&istante"
@@ -1640,7 +1655,7 @@ msgid "&Group undo"
 msgstr "&Annuler un groupe"
 
 msgid "Word wrap line length:"
-msgstr "Longueur avant cesure à la ligne :"
+msgstr "Longueur avant césure à la ligne :"
 
 msgid "Editor options"
 msgstr "Options de l'éditeur"
@@ -1652,8 +1667,8 @@ msgstr ""
 "Un éditeur de text facile d'utilisation.\n"
 "écrit pour Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr "Copyright (C) 1996-2018 the Free Software Foundation"
 
 msgid "About"
 msgstr "À propos"
@@ -1840,6 +1855,15 @@ msgstr ""
 "Ne peut changer les permissions de « %s »\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "&Ignorer"
+
+msgid "Ignore &all"
+msgstr "Ignorer &tout"
+
+msgid "&Retry"
+msgstr "&Réessayer"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1932,6 +1956,9 @@ msgstr "cd suit les &liens"
 msgid "Sa&fe delete"
 msgstr "E&ffacement sûr"
 
+msgid "Safe overwrite"
+msgstr "Écrasement sécurisé"
+
 msgid "A&uto save setup"
 msgstr "Enregistrement a&utomatique de la configuration"
 
@@ -2043,7 +2070,7 @@ msgid "User &mini status"
 msgstr "&Mini-statut utilisateur"
 
 msgid "Listing format"
-msgstr ""
+msgstr "Format de listing"
 
 msgid "Executable &first"
 msgstr "Exécutable en &premier"
@@ -2523,6 +2550,9 @@ msgid ""
 "\n"
 "Option Stable Symlinks will be disabled"
 msgstr ""
+"Impossible de réaliser des liens symboliques stables entre systèmes de "
+"fichiers non-locaux : désactivation de l'option \"Liens symboliques stables"
+"\"."
 
 #, c-format
 msgid ""
@@ -2532,12 +2562,33 @@ msgstr ""
 "Impossible de créer le lien symbolique cible « %s »\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"« %s »\n"
+"et\n"
+"« %s »\n"
+"sont les mêmes répertoires"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"« %s »\n"
+"et\n"
+"« %s »\n"
+"sont identiques"
+
 msgid "Ski&p all"
 msgstr "Sauter &tout"
 
-msgid "&Retry"
-msgstr "&Réessayer"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2561,23 +2612,19 @@ msgstr "&Aucun"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Impossible d'obtenir les caractéristiques du fichier « %s »\n"
+"Impossible d'effacer le fichier « %s »\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"« %s »\n"
-"et\n"
-"« %s »\n"
-"sont identiques"
+"Impossible d'obtenir les caractéristiques du fichier « %s »\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2593,36 +2640,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Impossible d'effacer le fichier « %s »\n"
+"Impossible d'effacer le répertoire « %s »\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Impossible d'effacer le fichier « %s »\n"
+"Impossible d'écraser le répertoire « %s »\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Impossible d'effacer le répertoire « %s »\n"
+"Impossible d'écraser le fichier « %s »\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Impossible d'écraser le répertoire « %s »\n"
+"Impossible de déplacer le répertoire de « %s » vers « %s »\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Impossible de travailler avec « .. » !"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2788,40 +2838,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"« %s »\n"
-"et\n"
-"« %s »\n"
-"sont les mêmes répertoires"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Impossible d'écraser le fichier « %s »\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Impossible de déplacer le répertoire de « %s » vers « %s »\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Répertoires : %zu, taille totale : %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Impossible de travailler avec « .. » !"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Impossible de mettre le processus en arrière-plan"
 
@@ -3251,7 +3270,7 @@ msgid "&Info"
 msgstr "&Informations"
 
 msgid "&Listing format..."
-msgstr ""
+msgstr "Format de &Listing ..."
 
 msgid "&Sort order..."
 msgstr "&Ordre de tri..."
@@ -3876,10 +3895,10 @@ msgid "Data types:"
 msgstr "Types de données :"
 
 msgid "Home directory:"
-msgstr ""
+msgstr "Répertoire de l'utilisateur :"
 
 msgid "Profile root directory:"
-msgstr ""
+msgstr "Répertoire racine de profil :"
 
 msgid "System data"
 msgstr "Données système"
@@ -4242,6 +4261,10 @@ msgstr ""
 "sftp : ne peut lire le fichier, aucune association de fichiers disponible"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp : erreur de socket : %s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp : (Ctrl-G break) Listing... %s"
 
Binary files mc-4.8.20/po/fr_CA.gmo and mc-4.8.21/po/fr_CA.gmo differ
diff -urpN mc-4.8.20/po/fr_CA.po mc-4.8.21/po/fr_CA.po
--- mc-4.8.20/po/fr_CA.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/fr_CA.po	2018-06-03 11:03:46.000000000 +0200
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
 "PO-Revision-Date: 2015-02-26 09:48+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: French (Canada) (http://www.transifex.com/projects/p/mc/"
@@ -629,6 +629,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -641,12 +644,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr ""
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr ""
 
@@ -686,6 +695,9 @@ msgstr ""
 msgid "Specifies a color configuration"
 msgstr ""
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1551,7 +1563,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1731,6 +1743,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1821,6 +1842,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2398,10 +2422,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2422,16 +2459,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2446,28 +2481,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2595,32 +2633,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -3977,6 +3992,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/gl.gmo and mc-4.8.21/po/gl.gmo differ
diff -urpN mc-4.8.20/po/gl.po mc-4.8.21/po/gl.po
--- mc-4.8.20/po/gl.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/gl.po	2018-06-03 11:03:46.000000000 +0200
@@ -12,8 +12,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-23 18:02+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Galician (http://www.transifex.com/mc/mc/language/gl/)\n"
 "Language: gl\n"
@@ -657,6 +657,9 @@ msgstr "Mostrar as opcións de configura
 msgid "Print last working directory to specified file"
 msgstr "Mostrar o último directorio de traballo para o ficheiro especificado"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Activar uso de subterminal (predeterminado)"
 
@@ -669,12 +672,18 @@ msgstr "Gardar rexistro dos diálogos ft
 msgid "Set debug level"
 msgstr "Definir o nivel de depuración"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Abrir un ficheiro co visor"
 
 msgid "Edit files"
 msgstr "Editar ficheiros"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Forzar as funcionalidades de xterm"
 
@@ -714,6 +723,9 @@ msgstr "Solicitar a execución a cores"
 msgid "Specifies a color configuration"
 msgstr "Indicar unha configuración de cores"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Mostrar mc co tema especificado"
 
@@ -1639,7 +1651,7 @@ msgstr ""
 "Un editor de texto de uso amigábel\n"
 "escrito para o Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1827,6 +1839,15 @@ msgstr ""
 "Non é posíbel cambiar permisos de «%s»\n"
 "%s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Reintentar"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1919,6 +1940,9 @@ msgstr "Cd segue li&Gazóns"
 msgid "Sa&fe delete"
 msgstr "&Borrado seguro"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "Configuración do &Auto-gardado"
 
@@ -2520,12 +2544,33 @@ msgstr ""
 "Non é posíbel crear a ligazón simbólica «%s»\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"«%s»\n"
+"e\n"
+"«%s»\n"
+"son o mesmo directorio"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"«%s»\n"
+"e\n"
+"«%s»\n"
+"son o mesmo ficheiro"
+
 msgid "Ski&p all"
 msgstr "omitir &Todos"
 
-msgid "&Retry"
-msgstr "&Reintentar"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2549,23 +2594,19 @@ msgstr "Nin&Gún"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Non é posíbel identificar o ficheiro «%s»\n"
+"Non é posíbel eliminar o ficheiro «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"«%s»\n"
-"e\n"
-"«%s»\n"
-"son o mesmo ficheiro"
+"Non é posíbel identificar o ficheiro «%s»\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2581,36 +2622,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Non é posíbel eliminar o ficheiro «%s»\n"
+"Non é posíbel eliminar o directorio «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Non é posíbel eliminar o ficheiro «%s»\n"
+"Non é posíbel sobrescribir o directorio «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Non é posíbel eliminar o directorio «%s»\n"
+"Non é posíbel sobrescribir o ficheiro «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Non é posíbel sobrescribir o directorio «%s»\n"
+"Non é posíbel mover o directorio «%s» a «%s»\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Non é posíbel operar sobre «..»!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2774,40 +2818,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"«%s»\n"
-"e\n"
-"«%s»\n"
-"son o mesmo directorio"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Non é posíbel sobrescribir o ficheiro «%s»\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Non é posíbel mover o directorio «%s» a «%s»\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Non é posíbel operar sobre «..»!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Síntoo, non se puido pór a tarefa en 2º plano"
 
@@ -4223,6 +4236,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Sen datos del descritor do ficheiro para lelo."
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G interrompe) Listado... %s"
 
Binary files mc-4.8.20/po/hr.gmo and mc-4.8.21/po/hr.gmo differ
diff -urpN mc-4.8.20/po/hr.po mc-4.8.21/po/hr.po
--- mc-4.8.20/po/hr.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/hr.po	2018-06-03 11:03:46.000000000 +0200
@@ -7,8 +7,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-05-03 01:03+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Croatian (http://www.transifex.com/mc/mc/language/hr/)\n"
 "Language: hr\n"
@@ -629,6 +629,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -641,12 +644,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr ""
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr ""
 
@@ -686,6 +695,9 @@ msgstr ""
 msgid "Specifies a color configuration"
 msgstr ""
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1551,7 +1563,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1731,6 +1743,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1821,6 +1842,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2398,10 +2422,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2422,16 +2459,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2446,28 +2481,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2595,32 +2633,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -3981,6 +3996,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/hu.gmo and mc-4.8.21/po/hu.gmo differ
diff -urpN mc-4.8.20/po/hu.po mc-4.8.21/po/hu.po
--- mc-4.8.20/po/hu.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/hu.po	2018-06-03 11:03:46.000000000 +0200
@@ -11,9 +11,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-11-20 23:51+0000\n"
-"Last-Translator: Rezső Páder <rezso@rezso.net>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Hungarian (http://www.transifex.com/mc/mc/language/hu/)\n"
 "Language: hu\n"
 "MIME-Version: 1.0\n"
@@ -650,6 +650,9 @@ msgstr "Beállítások kiíratása"
 msgid "Print last working directory to specified file"
 msgstr "A legutóbbi aktuális könyvtár írása az adott fájlba"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Háttér-shell bekapcsolása (alapértelmezett)"
 
@@ -662,12 +665,18 @@ msgstr "FTP-párbeszéd naplózása mega
 msgid "Set debug level"
 msgstr "Nyomkövetési (debug) szint beállítása"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Fájlmegjelenítés indítása a megadott fájlon"
 
 msgid "Edit files"
 msgstr "Fájlok szerkesztése"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Xterm-funkciók kikényszerítése"
 
@@ -709,6 +718,9 @@ msgstr "Színes üzemmód kérése"
 msgid "Specifies a color configuration"
 msgstr "Színösszeállítás megadása"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "MC a megadott borítással"
 
@@ -1630,8 +1642,8 @@ msgstr ""
 "Felhasználóbarát szövegszerkesztő\n"
 "a Midnight Commander-hez készítve"
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "Névjegy"
@@ -1818,6 +1830,15 @@ msgstr ""
 "\"%s\" jogai nem állíthatók\n"
 "%s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "Új&ra"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1910,6 +1931,9 @@ msgstr "Li&nkkövető könyvtárváltás
 msgid "Sa&fe delete"
 msgstr "\"Ó&vatos\" törlés"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "Auto &Beállításmentés"
 
@@ -2509,12 +2533,32 @@ msgstr ""
 "Nem sikerült létrehozni a cél szim-linket \"%s\"\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\" \n"
+"és \n"
+"\"%s\" \n"
+"ugyanaz a könyvtár"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"  és \n"
+"\"%s\" \n"
+"ugyanaz a fájl"
+
 msgid "Ski&p all"
 msgstr "Ö&sszes kihagyása"
 
-msgid "&Retry"
-msgstr "Új&ra"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2537,22 +2581,19 @@ msgstr "&Egyiket sem"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"A(z) \"%s\" fájl adatai nem lekérdezhetők \n"
+"A(z) \"%s\" fájl nem törölhető \n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"  és \n"
-"\"%s\" \n"
-"ugyanaz a fájl"
+"A(z) \"%s\" fájl adatai nem lekérdezhetők \n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2568,36 +2609,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"A(z) \"%s\" fájl nem törölhető \n"
+"A(z) \"%s\" könyvtár nem törölhető \n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"A(z) \"%s\" fájl nem törölhető \n"
+"A(z) \"%s\" könyvtár nem felülírható \n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"A(z) \"%s\" könyvtár nem törölhető \n"
+"A(z) \"%s\" fájl nem felülírható\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"A(z) \"%s\" könyvtár nem felülírható \n"
+"A(z) \"%s\" könyvtár nem átnevezhető/mozgatható erre: \"%s\" \n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "A \"..\" könyvtárral ez nem lehetséges!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2767,40 +2811,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\" \n"
-"és \n"
-"\"%s\" \n"
-"ugyanaz a könyvtár"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"A(z) \"%s\" fájl nem felülírható\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"A(z) \"%s\" könyvtár nem átnevezhető/mozgatható erre: \"%s\" \n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Könyvtár: %zu, teljes méret: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "A \"..\" könyvtárral ez nem lehetséges!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Nem tudtam a feladatot a háttérben végezni"
 
@@ -4217,6 +4230,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Nincs jelenleg elérhető fájlkezelő adat a fájl olvasásához"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: %s listázása... (megszakítás: Ctrl-G)"
 
Binary files mc-4.8.20/po/ia.gmo and mc-4.8.21/po/ia.gmo differ
diff -urpN mc-4.8.20/po/ia.po mc-4.8.21/po/ia.po
--- mc-4.8.20/po/ia.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/ia.po	2018-06-03 11:03:46.000000000 +0200
@@ -10,9 +10,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 10:23+0000\n"
-"Last-Translator: Martijn Dekker <mcdutchie@hotmail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Interlingua (http://www.transifex.com/mc/mc/language/ia/)\n"
 "Language: ia\n"
 "MIME-Version: 1.0\n"
@@ -640,6 +640,9 @@ msgstr "Imprimer le optiones de configur
 msgid "Print last working directory to specified file"
 msgstr "Scriber le ultime directorio de labor in un file"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Activar le supporto de sub-shells (predefinite)"
 
@@ -652,12 +655,18 @@ msgstr "Registrar dialogos FTP in un fil
 msgid "Set debug level"
 msgstr "Fixar le nivello de recerca de faltas"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Aperir un file con le visualisator"
 
 msgid "Edit files"
 msgstr "Modificar files"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Fortiar"
 
@@ -697,6 +706,9 @@ msgstr "Demandar de functionar in color"
 msgid "Specifies a color configuration"
 msgstr "Specificar un configuration de colores"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Visualisar MC con le apparentia specificate"
 
@@ -1571,7 +1583,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1751,6 +1763,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1841,6 +1862,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2418,10 +2442,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2442,16 +2479,14 @@ msgstr "Nul&le"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2466,28 +2501,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2615,32 +2653,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -4019,6 +4034,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/id.gmo and mc-4.8.21/po/id.gmo differ
diff -urpN mc-4.8.20/po/id.po mc-4.8.21/po/id.po
--- mc-4.8.20/po/id.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/id.po	2018-06-03 11:03:46.000000000 +0200
@@ -10,8 +10,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Indonesian (http://www.transifex.com/mc/mc/language/id/)\n"
 "Language: id\n"
@@ -654,6 +654,9 @@ msgid "Print last working directory to s
 msgstr ""
 "Cetak working directory yang terakhir digunakan ke file yang ditentukan"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Perbolehkan subshell (default)"
 
@@ -666,12 +669,18 @@ msgstr "Rekam log ftp dialog ke file yan
 msgid "Set debug level"
 msgstr "Tentukan level debug"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Jalankan file viewer atas file"
 
 msgid "Edit files"
 msgstr "Menyunting files"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Paksakan fitur xterm"
 
@@ -711,6 +720,9 @@ msgstr "Meminta untuk dijalankan dalam m
 msgid "Specifies a color configuration"
 msgstr "Tentukan konfigurasi warna"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Tampilkan mc dengan skin tertentu"
 
@@ -1594,7 +1606,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1774,6 +1786,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1864,6 +1885,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2441,10 +2465,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2465,16 +2502,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2489,28 +2524,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2638,32 +2676,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -4020,6 +4035,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/it.gmo and mc-4.8.21/po/it.gmo differ
diff -urpN mc-4.8.20/po/it.po mc-4.8.21/po/it.po
--- mc-4.8.20/po/it.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/it.po	2018-06-03 11:03:46.000000000 +0200
@@ -11,8 +11,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-05-03 09:33+0200\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-05-30 09:39+0200\n"
 "Last-Translator: Marco Ciampa <ciampix@libero.it>\n"
 "Language-Team: Italian (http://www.transifex.com/projects/p/mc/language/"
 "it/)\n"
@@ -661,6 +661,9 @@ msgstr "Stampa le opzioni di configurazi
 msgid "Print last working directory to specified file"
 msgstr "Stampa l'ultima directory corrente nel file specificato"
 
+msgid "<file>"
+msgstr "<file>"
+
 msgid "Enables subshell support (default)"
 msgstr "Abilita il supporto subshell (predefinito)"
 
@@ -673,12 +676,18 @@ msgstr "Annota i messaggi dell'ftp in un
 msgid "Set debug level"
 msgstr "Imposta livello di debug"
 
+msgid "<integer>"
+msgstr "<integer>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Esegue il visualizzatore per un file"
 
 msgid "Edit files"
 msgstr "Modifica i file"
 
+msgid "<file> ..."
+msgstr "<file> ..."
+
 msgid "Forces xterm features"
 msgstr "Forza il comportamento xterm"
 
@@ -719,6 +728,9 @@ msgstr "Richiede l'esecuzione a colori"
 msgid "Specifies a color configuration"
 msgstr "Specifica la configurazione dei colori"
 
+msgid "<string>"
+msgstr "<stringa>"
+
 msgid "Show mc with specified skin"
 msgstr "Mostra mc con il tema specificato"
 
@@ -1641,8 +1653,8 @@ msgstr ""
 "Un semplice editor di testi\n"
 "scritto per il Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr "Copyright (C) 1996-2018 the Free Software Foundation"
 
 msgid "About"
 msgstr "Informazioni"
@@ -1829,6 +1841,15 @@ msgstr ""
 "Impossibile eseguire chmod su \"%s\"\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "&Ignora"
+
+msgid "Ignore &all"
+msgstr "Ignor&a tutto"
+
+msgid "&Retry"
+msgstr "&Riprova"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1921,6 +1942,9 @@ msgstr "Cd seg&ue i collegamenti"
 msgid "Sa&fe delete"
 msgstr "Cance&llazione sicura"
 
+msgid "Safe overwrite"
+msgstr "Sovrascrittura sicura"
+
 msgid "A&uto save setup"
 msgstr "Autosalva &configurazione"
 
@@ -2525,12 +2549,33 @@ msgstr ""
 "Impossibile creare collegamento simb. destinazione \"%s\"\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"e\n"
+"\"%s\"\n"
+"sono la stessa directory"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"e\n"
+"\"%s\"\n"
+"sono lo stesso file"
+
 msgid "Ski&p all"
 msgstr "Sa&lta tutti"
 
-msgid "&Retry"
-msgstr "&Riprova"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2554,23 +2599,19 @@ msgstr "Nessun&o"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Impossibile ottenere info sul file \"%s\"\n"
+"Impossibile rimuovere il file \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"e\n"
-"\"%s\"\n"
-"sono lo stesso file"
+"Impossibile ottenere info sul file \"%s\"\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2586,36 +2627,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Impossibile rimuovere il file \"%s\"\n"
+"Impossibile cancellare la directory \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Impossibile eliminare il file \"%s\"\n"
+"Impossibile sovrascrivere la directory \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Impossibile cancellare la directory \"%s\"\n"
+"Impossibile sovrascrivere il file \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Impossibile sovrascrivere la directory \"%s\"\n"
+"Impossibile spostare la directory \"%s\" in \"%s\"\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Impossibile operare su \"..\"!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2781,40 +2825,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"e\n"
-"\"%s\"\n"
-"sono la stessa directory"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Impossibile sovrascrivere il file \"%s\"\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Impossibile spostare la directory \"%s\" in \"%s\"\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Directory: %zu, dim totale: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Impossibile operare su \"..\"!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Spiacente, non posso mettere il programma in background"
 
@@ -4228,6 +4241,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: nessun file handler dati per la lettura del file"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: errore socket: %s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G break) listato... %s"
 
Binary files mc-4.8.20/po/ja.gmo and mc-4.8.21/po/ja.gmo differ
diff -urpN mc-4.8.20/po/ja.po mc-4.8.21/po/ja.po
--- mc-4.8.20/po/ja.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/ja.po	2018-06-03 11:03:46.000000000 +0200
@@ -11,8 +11,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Japanese (http://www.transifex.com/mc/mc/language/ja/)\n"
 "Language: ja\n"
@@ -641,6 +641,9 @@ msgstr "印刷設定オプション"
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "サブシェルのサポート (デフォルト)"
 
@@ -653,12 +656,18 @@ msgstr "ftp の対話記録を指定し
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "ファイルビューアを起動"
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "強制的に xterm 機能を使う"
 
@@ -698,6 +707,9 @@ msgstr "カラーモードでの実行
 msgid "Specifies a color configuration"
 msgstr "カラー設定を指定"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1563,7 +1575,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1747,6 +1759,15 @@ msgstr ""
 "chmod \"%s\" ができません\n"
 "%s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "再試行(&R)"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1837,6 +1858,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "自動保存の設定(&U)"
 
@@ -2416,12 +2440,25 @@ msgid ""
 "%s"
 msgstr ""
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
 msgid "Ski&p all"
 msgstr "すべて飛ばす(&P)"
 
-msgid "&Retry"
-msgstr "再試行(&R)"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2440,16 +2477,14 @@ msgstr "なし(&E)"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2464,28 +2499,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2613,32 +2651,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -4024,6 +4039,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/ka.gmo and mc-4.8.21/po/ka.gmo differ
diff -urpN mc-4.8.20/po/ka.po mc-4.8.21/po/ka.po
--- mc-4.8.20/po/ka.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/ka.po	2018-06-03 11:03:46.000000000 +0200
@@ -8,15 +8,15 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-23 18:34+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Georgian (http://www.transifex.com/mc/mc/language/ka/)\n"
 "Language: ka\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0;\n"
+"Plural-Forms: nplurals=2; plural=(n!=1);\n"
 
 # "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 msgid "Warning: cannot load codepages list"
@@ -631,6 +631,9 @@ msgstr "კონფიგურაც
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -643,12 +646,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr ""
 
 msgid "Edit files"
 msgstr "ფაილების რედაქტირება"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr ""
 
@@ -688,6 +697,9 @@ msgstr ""
 msgid "Specifies a color configuration"
 msgstr ""
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1553,7 +1565,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1733,6 +1745,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1823,6 +1844,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2401,10 +2425,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2425,16 +2462,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2449,28 +2484,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2598,32 +2636,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -2823,6 +2838,7 @@ msgstr ""
 msgid "Finished (ignored %zu directory)"
 msgid_plural "Finished (ignored %zu directories)"
 msgstr[0] ""
+msgstr[1] ""
 
 msgid "Searching"
 msgstr ""
@@ -2981,6 +2997,7 @@ msgstr ""
 msgid " (%lu block)"
 msgid_plural " (%lu blocks)"
 msgstr[0] ""
+msgstr[1] ""
 
 #, c-format
 msgid "Owner:      %s/%s"
@@ -3215,6 +3232,7 @@ msgstr ""
 msgid "You have %zu opened screen. Quit anyway?"
 msgid_plural "You have %zu opened screens. Quit anyway?"
 msgstr[0] ""
+msgstr[1] ""
 
 msgid "The Midnight Commander"
 msgstr ""
@@ -3361,6 +3379,7 @@ msgstr ""
 msgid "%s in %d file"
 msgid_plural "%s in %d files"
 msgstr[0] ""
+msgstr[1] ""
 
 msgid "Panelize"
 msgstr "პანელში"
@@ -3976,6 +3995,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/kk.gmo and mc-4.8.21/po/kk.gmo differ
diff -urpN mc-4.8.20/po/kk.po mc-4.8.21/po/kk.po
--- mc-4.8.20/po/kk.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/kk.po	2018-06-03 11:03:46.000000000 +0200
@@ -8,15 +8,15 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 18:30+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Kazakh (http://www.transifex.com/mc/mc/language/kk/)\n"
 "Language: kk\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0;\n"
+"Plural-Forms: nplurals=2; plural=(n!=1);\n"
 
 # "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 msgid "Warning: cannot load codepages list"
@@ -629,6 +629,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -641,12 +644,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr ""
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr ""
 
@@ -686,6 +695,9 @@ msgstr ""
 msgid "Specifies a color configuration"
 msgstr ""
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1551,7 +1563,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1731,6 +1743,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1821,6 +1842,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2398,10 +2422,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2422,16 +2459,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2446,28 +2481,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2595,32 +2633,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -2820,6 +2835,7 @@ msgstr ""
 msgid "Finished (ignored %zu directory)"
 msgid_plural "Finished (ignored %zu directories)"
 msgstr[0] ""
+msgstr[1] ""
 
 msgid "Searching"
 msgstr ""
@@ -2978,6 +2994,7 @@ msgstr ""
 msgid " (%lu block)"
 msgid_plural " (%lu blocks)"
 msgstr[0] ""
+msgstr[1] ""
 
 #, c-format
 msgid "Owner:      %s/%s"
@@ -3212,6 +3229,7 @@ msgstr ""
 msgid "You have %zu opened screen. Quit anyway?"
 msgid_plural "You have %zu opened screens. Quit anyway?"
 msgstr[0] ""
+msgstr[1] ""
 
 msgid "The Midnight Commander"
 msgstr ""
@@ -3358,6 +3376,7 @@ msgstr ""
 msgid "%s in %d file"
 msgid_plural "%s in %d files"
 msgstr[0] ""
+msgstr[1] ""
 
 msgid "Panelize"
 msgstr ""
@@ -3973,6 +3992,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/ko.gmo and mc-4.8.21/po/ko.gmo differ
diff -urpN mc-4.8.20/po/ko.po mc-4.8.21/po/ko.po
--- mc-4.8.20/po/ko.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/ko.po	2018-06-03 11:03:46.000000000 +0200
@@ -9,8 +9,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Korean (http://www.transifex.com/mc/mc/language/ko/)\n"
 "Language: ko\n"
@@ -639,6 +639,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr "프로그램 종료 시 마지막 작업 디렉터리를 주어진 파일로 출력"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "subshell 지원함 (기본 값)"
 
@@ -651,12 +654,18 @@ msgstr "주어진 파일로 ftp 다이
 msgid "Set debug level"
 msgstr "디버그 레벨 설정"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "파일에 대해 파일 보기 실행"
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "xterm 기능을 무조건 사용"
 
@@ -696,6 +705,9 @@ msgstr "컬러 모드로 실행을 요
 msgid "Specifies a color configuration"
 msgstr "컬러 환경을 명세"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "특별한 스킨으로 MC 보기"
 
@@ -1561,7 +1573,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1741,6 +1753,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "재시도(&R)"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1831,6 +1852,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2408,11 +2432,24 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
-msgstr "재시도(&R)"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
+msgstr ""
 
 #, c-format
 msgid ""
@@ -2432,16 +2469,14 @@ msgstr "없음(&E)"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2456,28 +2491,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2605,32 +2643,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -4023,6 +4038,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/lt.gmo and mc-4.8.21/po/lt.gmo differ
diff -urpN mc-4.8.20/po/lt.po mc-4.8.21/po/lt.po
--- mc-4.8.20/po/lt.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/lt.po	2018-06-03 11:03:46.000000000 +0200
@@ -12,16 +12,17 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
-"Last-Translator: Andrius Burokas\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Lithuanian (http://www.transifex.com/mc/mc/language/lt/)\n"
 "Language: lt\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && (n"
-"%100<10 || n%100>=20) ? 1 : 2);\n"
+"Plural-Forms: nplurals=4; plural=(n % 10 == 1 && (n % 100 > 19 || n % 100 < "
+"11) ? 0 : (n % 10 >= 2 && n % 10 <=9) && (n % 100 > 19 || n % 100 < 11) ? "
+"1 : n % 1 != 0 ? 2: 3);\n"
 
 # "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 msgid "Warning: cannot load codepages list"
@@ -649,6 +650,9 @@ msgstr "Rodyti 'configure' parinktis"
 msgid "Print last working directory to specified file"
 msgstr "Įrašo paskutinį esamą aplanką į nurodytą failą"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Įjungia „subshell“ palaikymą (nenurodžius kitaip)"
 
@@ -661,12 +665,18 @@ msgstr "Veda FTP dialogo žurnalą į nu
 msgid "Set debug level"
 msgstr "Nurodo „debug“ lygį"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Parodo failo turinį"
 
 msgid "Edit files"
 msgstr "Redaguoti failus"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Priverčia naudoti „xterm“ galimybes"
 
@@ -706,6 +716,9 @@ msgstr "Paleidžia spalvotu režimu"
 msgid "Specifies a color configuration"
 msgstr "Nurodo spalvų konfigūraciją"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1579,7 +1592,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1759,6 +1772,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Iš naujo"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1849,6 +1871,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr "Saugus šalinimas"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2433,12 +2458,29 @@ msgid ""
 "%s"
 msgstr ""
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"yra tie patys aplankai"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
 msgid "Ski&p all"
 msgstr "Praleisti viską"
 
-msgid "&Retry"
-msgstr "&Iš naujo"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2462,16 +2504,16 @@ msgstr "&Joks"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
+"Nepavyko pašalinti failo \"%s\"\n"
+"%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2488,36 +2530,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nepavyko pašalinti failo \"%s\"\n"
+"Nepavyko pašalinti aplanko \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nepavyko pašalinti failo \"%s\"\n"
+"Nepavyko perrašyti aplanko \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Nepavyko pašalinti aplanko \"%s\"\n"
+"Nepavyko perrašyti failo \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Nepavyko perrašyti aplanko \"%s\"\n"
+"Nepavyko perkelti aplanko \"%s\" į \"%s\"\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2647,40 +2692,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"yra tie patys aplankai"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Nepavyko perrašyti failo \"%s\"\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Nepavyko perkelti aplanko \"%s\" į \"%s\"\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Nepavyko įvykdyti užduoties foniniame režime"
 
@@ -2882,6 +2896,7 @@ msgid_plural "Finished (ignored %zu dire
 msgstr[0] ""
 msgstr[1] ""
 msgstr[2] ""
+msgstr[3] ""
 
 msgid "Searching"
 msgstr "Ieškoma"
@@ -3044,6 +3059,7 @@ msgid_plural " (%lu blocks)"
 msgstr[0] ""
 msgstr[1] ""
 msgstr[2] ""
+msgstr[3] ""
 
 #, c-format
 msgid "Owner:      %s/%s"
@@ -3280,6 +3296,7 @@ msgid_plural "You have %zu opened screen
 msgstr[0] ""
 msgstr[1] ""
 msgstr[2] ""
+msgstr[3] ""
 
 msgid "The Midnight Commander"
 msgstr ""
@@ -3428,6 +3445,7 @@ msgid_plural "%s in %d files"
 msgstr[0] "%s %d faile"
 msgstr[1] "%s %d failuose"
 msgstr[2] "%s %d failų"
+msgstr[3] "%s %d failų"
 
 msgid "Panelize"
 msgstr ""
@@ -4082,6 +4100,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/lv.gmo and mc-4.8.21/po/lv.gmo differ
diff -urpN mc-4.8.20/po/lv.po mc-4.8.21/po/lv.po
--- mc-4.8.20/po/lv.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/lv.po	2018-06-03 11:03:46.000000000 +0200
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Latvian (http://www.transifex.com/mc/mc/language/lv/)\n"
 "Language: lv\n"
@@ -632,6 +632,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Ieslēdz zemčaulas atbalstu (noklusētais)"
 
@@ -644,12 +647,18 @@ msgstr "Iegrāmatot ftp dialogu noteikt
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Palaiž failam failu skatītāju"
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Aktivizē xterm iespējas"
 
@@ -689,6 +698,9 @@ msgstr "Pieprasījums darboties krāsu r
 msgid "Specifies a color configuration"
 msgstr "Nosaka krāsas konfigurāciju"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1554,7 +1566,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1734,6 +1746,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Vēlreiz"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1824,6 +1845,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2402,11 +2426,24 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
-msgstr "&Vēlreiz"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
+msgstr ""
 
 #, c-format
 msgid ""
@@ -2426,16 +2463,14 @@ msgstr "n&Evienu"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2450,28 +2485,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2599,32 +2637,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -4023,6 +4038,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
diff -urpN mc-4.8.20/po/mc.pot mc-4.8.21/po/mc.pot
--- mc-4.8.20/po/mc.pot	2017-11-25 19:35:32.000000000 +0100
+++ mc-4.8.21/po/mc.pot	2018-06-03 11:03:32.000000000 +0200
@@ -5,9 +5,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: mc 4.8.20\n"
+"Project-Id-Version: mc 4.8.21\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
 "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
 "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
 "Language-Team: LANGUAGE <LL@li.org>\n"
@@ -17,15 +17,15 @@ msgstr ""
 "Content-Transfer-Encoding: 8bit\n"
 # "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 
-#: lib/charsets.c:216
+#: lib/charsets.c:217
 msgid "Warning: cannot load codepages list"
 msgstr ""
 
-#: lib/charsets.c:219 src/filemanager/boxes.c:355
+#: lib/charsets.c:220 src/filemanager/boxes.c:355
 msgid "7-bit ASCII"
 msgstr ""
 
-#: lib/charsets.c:312 lib/charsets.c:323
+#: lib/charsets.c:316 lib/charsets.c:327
 #, c-format
 msgid "Cannot translate from %s to %s"
 msgstr ""
@@ -144,7 +144,7 @@ msgstr ""
 msgid "Invalid token number %d"
 msgstr ""
 
-#: lib/search/regex.c:339 lib/search/regex.c:834 src/filemanager/ext.c:732
+#: lib/search/regex.c:339 lib/search/regex.c:834 src/filemanager/ext.c:741
 msgid "Regular expression error"
 msgstr ""
 
@@ -626,48 +626,48 @@ msgstr ""
 msgid "GiB"
 msgstr ""
 
-#: lib/utilunix.c:520
+#: lib/utilunix.c:521
 msgid "Cannot create pipe descriptor"
 msgstr ""
 
-#: lib/utilunix.c:529
+#: lib/utilunix.c:530
 msgid "Cannot create pipe streams"
 msgstr ""
 
-#: lib/utilunix.c:608
+#: lib/utilunix.c:609
 #, c-format
 msgid ""
 "Unexpected error in select() reading data from a child process:\n"
 "%s"
 msgstr ""
 
-#: lib/utilunix.c:651
+#: lib/utilunix.c:652
 #, c-format
 msgid ""
 "Unexpected error in waitpid():\n"
 "%s"
 msgstr ""
 
-#: lib/utilunix.c:721 lib/utilunix.c:726 lib/utilunix.c:781
-#: src/editor/edit.c:358 src/editor/editcmd.c:229 src/editor/editcmd.c:252
-#: src/editor/editcmd.c:422 src/editor/editcmd.c:584 src/editor/editcmd.c:1724
-#: src/editor/editcmd.c:3440 src/editor/editcmd.c:3469
-#: src/editor/editcmd_dialogs.c:481 src/execute.c:135
-#: src/filemanager/file.c:1677 src/filemanager/panel.c:4479 src/help.c:362
+#: lib/utilunix.c:722 lib/utilunix.c:727 lib/utilunix.c:782
+#: src/editor/edit.c:359 src/editor/editcmd.c:229 src/editor/editcmd.c:252
+#: src/editor/editcmd.c:422 src/editor/editcmd.c:584 src/editor/editcmd.c:1720
+#: src/editor/editcmd.c:3436 src/editor/editcmd.c:3465
+#: src/editor/editcmd_dialogs.c:478 src/execute.c:135
+#: src/filemanager/file.c:2305 src/filemanager/panel.c:4479 src/help.c:362
 #: src/main.c:401 src/subshell/common.c:418 src/subshell/common.c:1246
 #: src/viewer/actions_cmd.c:419
 msgid "Warning"
 msgstr ""
 
-#: lib/utilunix.c:721 src/filemanager/ext.c:714
+#: lib/utilunix.c:722 src/filemanager/ext.c:723
 msgid "Pipe failed"
 msgstr ""
 
-#: lib/utilunix.c:726
+#: lib/utilunix.c:727
 msgid "Dup failed"
 msgstr ""
 
-#: lib/utilunix.c:789
+#: lib/utilunix.c:790
 msgid "Error dup'ing old error pipe"
 msgstr ""
 
@@ -676,21 +676,21 @@ msgstr ""
 msgid "Directory cache expired for %s"
 msgstr ""
 
-#: lib/vfs/direntry.c:674
+#: lib/vfs/direntry.c:679
 #, c-format
 msgid "%s: %s: %s %3d%% (%lld) bytes transferred"
 msgstr ""
 
-#: lib/vfs/direntry.c:677
+#: lib/vfs/direntry.c:682
 #, c-format
 msgid "%s: %s: %s %lld bytes transferred"
 msgstr ""
 
-#: lib/vfs/direntry.c:1306
+#: lib/vfs/direntry.c:1316
 msgid "Starting linear transfer..."
 msgstr ""
 
-#: lib/vfs/direntry.c:1412
+#: lib/vfs/direntry.c:1423
 msgid "Getting file"
 msgstr ""
 
@@ -740,11 +740,11 @@ msgstr ""
 msgid "More parsing errors will be ignored."
 msgstr ""
 
-#: lib/vfs/utilvfs.c:355
+#: lib/vfs/utilvfs.c:356
 msgid "Internal error:"
 msgstr ""
 
-#: lib/vfs/utilvfs.c:364 src/filemanager/boxes.c:1321
+#: lib/vfs/utilvfs.c:365 src/filemanager/boxes.c:1321
 msgid "Password:"
 msgstr ""
 
@@ -765,48 +765,50 @@ msgstr ""
 msgid "Do you want clean this history?"
 msgstr ""
 
-#: lib/widget/listbox.c:325 src/diffviewer/ydiff.c:3089 src/editor/edit.c:358
-#: src/editor/editcmd.c:231 src/editor/editcmd.c:254 src/editor/editcmd.c:2855
-#: src/editor/editcmd.c:2861 src/filemanager/cmd.c:140
-#: src/filemanager/file.c:728 src/filemanager/file.c:2776
+#: lib/widget/listbox.c:325 src/diffviewer/ydiff.c:3089 src/editor/edit.c:359
+#: src/editor/editcmd.c:231 src/editor/editcmd.c:254 src/editor/editcmd.c:2851
+#: src/editor/editcmd.c:2857 src/filemanager/cmd.c:140
+#: src/filemanager/file.c:880 src/filemanager/file.c:1863
 #: src/filemanager/filegui.c:434 src/filemanager/hotlist.c:1158
-#: src/filemanager/hotlist.c:1175 src/filemanager/midnight.c:1032
-#: src/filemanager/midnight.c:1040 src/filemanager/panel.c:2820
+#: src/filemanager/hotlist.c:1175 src/filemanager/midnight.c:1026
+#: src/filemanager/midnight.c:1034 src/filemanager/panel.c:2820
 #: src/filemanager/tree.c:828 src/subshell/common.c:1248
 #: src/viewer/actions_cmd.c:619 src/viewer/actions_cmd.c:625
 #: src/viewer/search.c:398
 msgid "&Yes"
 msgstr ""
 
-#: lib/widget/listbox.c:325 src/diffviewer/ydiff.c:3089 src/editor/edit.c:358
-#: src/editor/editcmd.c:231 src/editor/editcmd.c:2855 src/editor/editcmd.c:2861
-#: src/filemanager/cmd.c:140 src/filemanager/file.c:728
-#: src/filemanager/file.c:2776 src/filemanager/filegui.c:436
+#: lib/widget/listbox.c:325 src/diffviewer/ydiff.c:3089 src/editor/edit.c:359
+#: src/editor/editcmd.c:231 src/editor/editcmd.c:2851 src/editor/editcmd.c:2857
+#: src/filemanager/cmd.c:140 src/filemanager/file.c:880
+#: src/filemanager/file.c:1863 src/filemanager/filegui.c:436
 #: src/filemanager/hotlist.c:1158 src/filemanager/hotlist.c:1175
-#: src/filemanager/midnight.c:1032 src/filemanager/midnight.c:1040
+#: src/filemanager/midnight.c:1026 src/filemanager/midnight.c:1034
 #: src/filemanager/panel.c:2820 src/filemanager/tree.c:828
 #: src/subshell/common.c:1248 src/viewer/actions_cmd.c:619
 #: src/viewer/actions_cmd.c:625 src/viewer/search.c:399
 msgid "&No"
 msgstr ""
 
-#: lib/widget/quick.h:215 src/editor/editcmd.c:2721
+#: lib/widget/quick.h:215 src/editor/editcmd.c:2717
 #: src/editor/editcmd_dialogs.c:121 src/editor/editwidget.c:150
-#: src/filemanager/boxes.c:1243 src/filemanager/filegui.c:1252
+#: src/filemanager/boxes.c:1243 src/filemanager/filegui.c:1254
 #: src/filemanager/find.c:598 src/filemanager/layout.c:458
 #: src/subshell/common.c:421
 msgid "&OK"
 msgstr ""
 
 #: lib/widget/quick.h:216 src/editor/editcmd.c:231 src/editor/editcmd.c:254
-#: src/editor/editcmd.c:424 src/editor/editcmd.c:587 src/editor/editcmd.c:1725
-#: src/editor/editcmd.c:2073 src/editor/editcmd.c:2855
-#: src/editor/editcmd.c:3443 src/editor/editcmd.c:3472
-#: src/editor/editcmd_dialogs.c:123 src/editor/editcmd_dialogs.c:285
-#: src/editor/editcmd_dialogs.c:483 src/editor/spell_dialogs.c:99
-#: src/filemanager/achown.c:93 src/filemanager/chmod.c:125
-#: src/filemanager/chown.c:93 src/filemanager/cmd.c:1149
-#: src/filemanager/filegui.c:1256 src/filemanager/find.c:598
+#: src/editor/editcmd.c:424 src/editor/editcmd.c:587 src/editor/editcmd.c:1721
+#: src/editor/editcmd.c:2069 src/editor/editcmd.c:2851
+#: src/editor/editcmd.c:3439 src/editor/editcmd.c:3468
+#: src/editor/editcmd_dialogs.c:123 src/editor/editcmd_dialogs.c:282
+#: src/editor/editcmd_dialogs.c:480 src/editor/spell_dialogs.c:99
+#: src/filemanager/achown.c:89 src/filemanager/achown.c:847
+#: src/filemanager/achown.c:882 src/filemanager/chmod.c:117
+#: src/filemanager/chmod.c:411 src/filemanager/chown.c:88
+#: src/filemanager/chown.c:310 src/filemanager/cmd.c:1148
+#: src/filemanager/filegui.c:1258 src/filemanager/find.c:598
 #: src/filemanager/hotlist.c:187 src/filemanager/hotlist.c:1014
 #: src/filemanager/hotlist.c:1076 src/filemanager/layout.c:459
 #: src/filemanager/panelize.c:140 src/learn.c:256 src/viewer/hex.c:430
@@ -817,10 +819,10 @@ msgstr ""
 msgid "Background process:"
 msgstr ""
 
-#: lib/widget/wtools.c:286 lib/widget/wtools.c:413 src/editor/edit.c:193
-#: src/editor/edit.c:214 src/editor/edit.c:370 src/editor/edit.c:1980
-#: src/editor/edit.c:1990 src/editor/editcmd.c:316 src/editor/editcmd.c:326
-#: src/editor/editcmd.c:367 src/editor/editcmd.c:2958 src/editor/spell.c:315
+#: lib/widget/wtools.c:286 lib/widget/wtools.c:413 src/editor/edit.c:194
+#: src/editor/edit.c:215 src/editor/edit.c:371 src/editor/edit.c:1978
+#: src/editor/edit.c:1988 src/editor/editcmd.c:316 src/editor/editcmd.c:326
+#: src/editor/editcmd.c:367 src/editor/editcmd.c:2954 src/editor/spell.c:315
 #: src/editor/spell.c:551 src/editor/spell.c:559
 #: tests/src/execute__common.c:145
 #: tests/src/execute__execute_with_vfs_arg.c:154
@@ -832,9 +834,9 @@ msgstr ""
 msgid "%s (%d)"
 msgstr ""
 
-#: lib/widget/wtools.c:691 src/filemanager/file.c:633
-#: src/filemanager/file.c:687 src/filemanager/file.c:729
-#: src/filemanager/file.c:2502 src/filemanager/filegui.c:256
+#: lib/widget/wtools.c:691 src/filemanager/file.c:768
+#: src/filemanager/file.c:839 src/filemanager/file.c:881
+#: src/filemanager/file.c:2987 src/filemanager/filegui.c:256
 #: src/filemanager/filegui.c:452
 msgid "&Abort"
 msgstr ""
@@ -859,6 +861,10 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+#: src/args.c:140 src/args.c:165 src/args.c:182 src/args.c:267
+msgid "<file>"
+msgstr ""
+
 #: src/args.c:147
 msgid "Enables subshell support (default)"
 msgstr ""
@@ -875,6 +881,10 @@ msgstr ""
 msgid "Set debug level"
 msgstr ""
 
+#: src/args.c:173
+msgid "<integer>"
+msgstr ""
+
 #: src/args.c:181
 msgid "Launches the file viewer on a file"
 msgstr ""
@@ -883,6 +893,10 @@ msgstr ""
 msgid "Edit files"
 msgstr ""
 
+#: src/args.c:190
+msgid "<file> ..."
+msgstr ""
+
 #: src/args.c:206
 msgid "Forces xterm features"
 msgstr ""
@@ -935,6 +949,10 @@ msgstr ""
 msgid "Specifies a color configuration"
 msgstr ""
 
+#: src/args.c:309 src/args.c:316
+msgid "<string>"
+msgstr ""
+
 #: src/args.c:315
 msgid "Show mc with specified skin"
 msgstr ""
@@ -985,7 +1003,7 @@ msgstr ""
 msgid "[+lineno] file1[:lineno] [file2[:lineno]...]"
 msgstr ""
 
-#: src/args.c:399 src/filemanager/file.c:160
+#: src/args.c:399 src/filemanager/file.c:157
 msgid "file"
 msgstr ""
 
@@ -1004,7 +1022,7 @@ msgid ""
 "as tickets at www.midnight-commander.org\n"
 msgstr ""
 
-#: src/args.c:426 src/filemanager/midnight.c:1728 src/textconf.c:141
+#: src/args.c:426 src/filemanager/midnight.c:1722 src/textconf.c:141
 #, c-format
 msgid "GNU Midnight Commander %s\n"
 msgstr ""
@@ -1037,7 +1055,7 @@ msgstr ""
 msgid "Reading failed"
 msgstr ""
 
-#: src/background.c:217 src/filemanager/file.c:630 src/filemanager/file.c:685
+#: src/background.c:217 src/filemanager/file.c:765 src/filemanager/file.c:837
 msgid "Background process error"
 msgstr ""
 
@@ -1055,52 +1073,52 @@ msgid ""
 "than we can handle."
 msgstr ""
 
-#: src/diffviewer/internal.h:15 src/diffviewer/search.c:232
+#: src/diffviewer/internal.h:15 src/diffviewer/search.c:229
 #: src/editor/edit-impl.h:74 src/editor/edit-impl.h:75 src/viewer/search.c:430
 #: src/viewer/search.c:432
 msgid "&Dismiss"
 msgstr ""
 
 #: src/diffviewer/search.c:85 src/editor/editcmd_dialogs.c:104
-#: src/editor/editcmd_dialogs.c:202 src/viewer/dialogs.c:89
+#: src/editor/editcmd_dialogs.c:199 src/viewer/dialogs.c:89
 msgid "Enter search string:"
 msgstr ""
 
 #: src/diffviewer/search.c:92 src/editor/editcmd_dialogs.c:112
-#: src/editor/editcmd_dialogs.c:212 src/filemanager/boxes.c:639
+#: src/editor/editcmd_dialogs.c:209 src/filemanager/boxes.c:639
 #: src/filemanager/boxes.c:860 src/filemanager/find.c:584
 #: src/viewer/dialogs.c:97
 msgid "Cas&e sensitive"
 msgstr ""
 
 #: src/diffviewer/search.c:93 src/editor/editcmd_dialogs.c:113
-#: src/editor/editcmd_dialogs.c:213 src/viewer/dialogs.c:98
+#: src/editor/editcmd_dialogs.c:210 src/viewer/dialogs.c:98
 msgid "&Backwards"
 msgstr ""
 
 #: src/diffviewer/search.c:94 src/editor/editcmd_dialogs.c:115
-#: src/editor/editcmd_dialogs.c:215 src/filemanager/find.c:595
+#: src/editor/editcmd_dialogs.c:212 src/filemanager/find.c:595
 #: src/viewer/dialogs.c:99
 msgid "&Whole words"
 msgstr ""
 
 #: src/diffviewer/search.c:96 src/editor/editcmd_dialogs.c:117
-#: src/editor/editcmd_dialogs.c:217 src/filemanager/find.c:582
+#: src/editor/editcmd_dialogs.c:214 src/filemanager/find.c:582
 #: src/viewer/dialogs.c:101
 msgid "&All charsets"
 msgstr ""
 
-#: src/diffviewer/search.c:106 src/diffviewer/search.c:232
-#: src/diffviewer/search.c:245 src/diffviewer/search.c:278
-#: src/editor/editcmd.c:963 src/editor/editcmd.c:991 src/editor/editcmd.c:1020
-#: src/editor/editcmd.c:2604 src/editor/editcmd.c:2615
+#: src/diffviewer/search.c:106 src/diffviewer/search.c:229
+#: src/diffviewer/search.c:242 src/diffviewer/search.c:275
+#: src/editor/editcmd.c:960 src/editor/editcmd.c:987 src/editor/editcmd.c:1016
+#: src/editor/editcmd.c:2600 src/editor/editcmd.c:2611
 #: src/editor/editcmd_dialogs.c:130 src/viewer/dialogs.c:111
 #: src/viewer/search.c:350 src/viewer/search.c:410 src/viewer/search.c:430
 #: src/viewer/search.c:432
 msgid "Search"
 msgstr ""
 
-#: src/diffviewer/search.c:245 src/diffviewer/search.c:278
+#: src/diffviewer/search.c:242 src/diffviewer/search.c:275
 msgid "Search is disabled"
 msgstr ""
 
@@ -1182,22 +1200,22 @@ msgstr ""
 msgid "Goto line (right)"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2931 src/editor/editcmd.c:3041
+#: src/diffviewer/ydiff.c:2931 src/editor/editcmd.c:3037
 msgid "Enter line:"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2973 src/editor/editwidget.c:669
-#: src/filemanager/midnight.c:1615 src/filemanager/tree.c:1169 src/help.c:1128
+#: src/diffviewer/ydiff.c:2973 src/editor/editwidget.c:682
+#: src/filemanager/midnight.c:1609 src/filemanager/tree.c:1169 src/help.c:1128
 #: src/viewer/display.c:85
 msgid "ButtonBar|Help"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2974 src/editor/editwidget.c:670
+#: src/diffviewer/ydiff.c:2974 src/editor/editwidget.c:683
 #: src/viewer/display.c:97
 msgid "ButtonBar|Save"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2975 src/filemanager/midnight.c:1618
+#: src/diffviewer/ydiff.c:2975 src/filemanager/midnight.c:1612
 #: src/viewer/display.c:92
 msgid "ButtonBar|Edit"
 msgstr ""
@@ -1206,7 +1224,7 @@ msgstr ""
 msgid "ButtonBar|Merge"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2977 src/editor/editwidget.c:675
+#: src/diffviewer/ydiff.c:2977 src/editor/editwidget.c:688
 #: src/viewer/display.c:107
 msgid "ButtonBar|Search"
 msgstr ""
@@ -1215,13 +1233,13 @@ msgstr ""
 msgid "ButtonBar|Options"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:2979 src/editor/editwidget.c:678
-#: src/filemanager/midnight.c:1624 src/help.c:1137 src/viewer/display.c:116
+#: src/diffviewer/ydiff.c:2979 src/editor/editwidget.c:691
+#: src/filemanager/midnight.c:1618 src/help.c:1137 src/viewer/display.c:116
 #: src/viewer/display.c:119
 msgid "ButtonBar|Quit"
 msgstr ""
 
-#: src/diffviewer/ydiff.c:3086 src/editor/editcmd.c:2861
+#: src/diffviewer/ydiff.c:3086 src/editor/editcmd.c:2857
 #: src/viewer/actions_cmd.c:617 src/viewer/actions_cmd.c:623
 msgid "Quit"
 msgstr ""
@@ -1247,7 +1265,7 @@ msgid "\"%s\" is a directory"
 msgstr ""
 
 #: src/diffviewer/ydiff.c:3590 src/diffviewer/ydiff.c:3607
-#: src/filemanager/file.c:2672 src/viewer/mcviewer.c:337
+#: src/filemanager/file.c:1667 src/viewer/mcviewer.c:339
 #, c-format
 msgid ""
 "Cannot stat \"%s\"\n"
@@ -1274,52 +1292,52 @@ msgstr ""
 msgid "< Reload Current Syntax >"
 msgstr ""
 
-#: src/editor/edit.c:152
+#: src/editor/edit.c:153
 #, c-format
 msgid "Loading: %3d%%"
 msgstr ""
 
-#: src/editor/edit.c:155
+#: src/editor/edit.c:156
 msgid "Loading..."
 msgstr ""
 
-#: src/editor/edit.c:192 src/editor/edit.c:310
+#: src/editor/edit.c:193 src/editor/edit.c:311
 #, c-format
 msgid "Cannot open %s for reading"
 msgstr ""
 
-#: src/editor/edit.c:202
+#: src/editor/edit.c:203
 msgid "Load file"
 msgstr ""
 
-#: src/editor/edit.c:213
+#: src/editor/edit.c:214
 #, c-format
 msgid "Error reading %s"
 msgstr ""
 
-#: src/editor/edit.c:322
+#: src/editor/edit.c:323
 #, c-format
 msgid "Cannot get size/permissions for %s"
 msgstr ""
 
-#: src/editor/edit.c:331
+#: src/editor/edit.c:332
 #, c-format
 msgid "\"%s\" is not a regular file"
 msgstr ""
 
-#: src/editor/edit.c:356
+#: src/editor/edit.c:357
 #, c-format
 msgid ""
 "File \"%s\" is too large.\n"
 "Open it anyway?"
 msgstr ""
 
-#: src/editor/edit.c:1979
+#: src/editor/edit.c:1977
 #, c-format
 msgid "Error reading from pipe: %s"
 msgstr ""
 
-#: src/editor/edit.c:1989
+#: src/editor/edit.c:1987
 #, c-format
 msgid "Cannot open pipe for reading: %s"
 msgstr ""
@@ -1361,8 +1379,8 @@ msgstr ""
 msgid "The file you are saving does not end with a newline."
 msgstr ""
 
-#: src/editor/editcmd.c:424 src/editor/editcmd.c:587 src/editor/editcmd.c:3442
-#: src/editor/editcmd.c:3471 src/editor/editcmd_dialogs.c:483
+#: src/editor/editcmd.c:424 src/editor/editcmd.c:587 src/editor/editcmd.c:3438
+#: src/editor/editcmd.c:3467 src/editor/editcmd_dialogs.c:480
 msgid "C&ontinue"
 msgstr ""
 
@@ -1382,8 +1400,8 @@ msgstr ""
 msgid "&Macintosh format (CR)"
 msgstr ""
 
-#: src/editor/editcmd.c:445 src/editor/editcmd.c:2094 src/editor/editcmd.c:3082
-#: src/editor/editcmd.c:3114 src/filemanager/cmd.c:747
+#: src/editor/editcmd.c:445 src/editor/editcmd.c:2090 src/editor/editcmd.c:3078
+#: src/editor/editcmd.c:3110 src/filemanager/cmd.c:746
 msgid "Enter file name:"
 msgstr ""
 
@@ -1399,270 +1417,270 @@ msgstr ""
 msgid "Block is large, you may not be able to undo this action"
 msgstr ""
 
-#: src/editor/editcmd.c:1249
+#: src/editor/editcmd.c:1245
 msgid "Collect completions"
 msgstr ""
 
-#: src/editor/editcmd.c:1623
+#: src/editor/editcmd.c:1619
 msgid "&Quick save"
 msgstr ""
 
-#: src/editor/editcmd.c:1624
+#: src/editor/editcmd.c:1620
 msgid "&Safe save"
 msgstr ""
 
-#: src/editor/editcmd.c:1625
+#: src/editor/editcmd.c:1621
 msgid "&Do backups with following extension:"
 msgstr ""
 
-#: src/editor/editcmd.c:1644
+#: src/editor/editcmd.c:1640
 msgid "Check &POSIX new line"
 msgstr ""
 
-#: src/editor/editcmd.c:1652
+#: src/editor/editcmd.c:1648
 msgid "Edit Save Mode"
 msgstr ""
 
-#: src/editor/editcmd.c:1709 src/editor/editcmd.c:1779
+#: src/editor/editcmd.c:1705 src/editor/editcmd.c:1775
 msgid "Save as"
 msgstr ""
 
-#: src/editor/editcmd.c:1711
+#: src/editor/editcmd.c:1707
 msgid "Cannot save: destination is not a regular file"
 msgstr ""
 
-#: src/editor/editcmd.c:1725
+#: src/editor/editcmd.c:1721
 msgid "A file already exists with this name"
 msgstr ""
 
-#: src/editor/editcmd.c:1725
+#: src/editor/editcmd.c:1721
 msgid "&Overwrite"
 msgstr ""
 
-#: src/editor/editcmd.c:1779 src/editor/editcmd.c:3092
+#: src/editor/editcmd.c:1775 src/editor/editcmd.c:3088
 msgid "Cannot save file"
 msgstr ""
 
-#: src/editor/editcmd.c:1804 src/editor/editcmd.c:1807
+#: src/editor/editcmd.c:1800 src/editor/editcmd.c:1803
 msgid "Delete macro"
 msgstr ""
 
-#: src/editor/editcmd.c:1804
+#: src/editor/editcmd.c:1800
 msgid "Press macro hotkey:"
 msgstr ""
 
-#: src/editor/editcmd.c:1807
+#: src/editor/editcmd.c:1803
 msgid "Macro not deleted"
 msgstr ""
 
-#: src/editor/editcmd.c:1862
+#: src/editor/editcmd.c:1858
 msgid "Save macro"
 msgstr ""
 
-#: src/editor/editcmd.c:1862
+#: src/editor/editcmd.c:1858
 msgid "Press the macro's new hotkey:"
 msgstr ""
 
-#: src/editor/editcmd.c:1936
+#: src/editor/editcmd.c:1932
 msgid "Repeat last commands"
 msgstr ""
 
-#: src/editor/editcmd.c:1936
+#: src/editor/editcmd.c:1932
 msgid "Repeat times:"
 msgstr ""
 
-#: src/editor/editcmd.c:2071
+#: src/editor/editcmd.c:2067
 #, c-format
 msgid "Confirm save file: \"%s\""
 msgstr ""
 
-#: src/editor/editcmd.c:2073 src/viewer/hex.c:418 src/viewer/hex.c:430
+#: src/editor/editcmd.c:2069 src/viewer/hex.c:418 src/viewer/hex.c:430
 msgid "Save file"
 msgstr ""
 
-#: src/editor/editcmd.c:2073 src/editor/editmenu.c:77 src/learn.c:192
+#: src/editor/editcmd.c:2069 src/editor/editmenu.c:77 src/learn.c:192
 #: src/learn.c:255
 msgid "&Save"
 msgstr ""
 
-#: src/editor/editcmd.c:2094
+#: src/editor/editcmd.c:2090
 msgid "Load"
 msgstr ""
 
-#: src/editor/editcmd.c:2127
+#: src/editor/editcmd.c:2123
 msgid "Syntax file edit"
 msgstr ""
 
-#: src/editor/editcmd.c:2128
+#: src/editor/editcmd.c:2124
 msgid "Which syntax file you want to edit?"
 msgstr ""
 
-#: src/editor/editcmd.c:2129 src/editor/editcmd.c:2175
-#: src/filemanager/cmd.c:953 src/filemanager/cmd.c:993
-#: src/filemanager/cmd.c:1054
+#: src/editor/editcmd.c:2125 src/editor/editcmd.c:2171
+#: src/filemanager/cmd.c:952 src/filemanager/cmd.c:992
+#: src/filemanager/cmd.c:1053
 msgid "&User"
 msgstr ""
 
-#: src/editor/editcmd.c:2129 src/editor/editcmd.c:2175
+#: src/editor/editcmd.c:2125 src/editor/editcmd.c:2171
 msgid "&System wide"
 msgstr ""
 
-#: src/editor/editcmd.c:2173 src/filemanager/cmd.c:991
+#: src/editor/editcmd.c:2169 src/filemanager/cmd.c:990
 msgid "Menu edit"
 msgstr ""
 
-#: src/editor/editcmd.c:2174 src/filemanager/cmd.c:992
+#: src/editor/editcmd.c:2170 src/filemanager/cmd.c:991
 msgid "Which menu file do you want to edit?"
 msgstr ""
 
-#: src/editor/editcmd.c:2175 src/filemanager/cmd.c:993
+#: src/editor/editcmd.c:2171 src/filemanager/cmd.c:992
 msgid "&Local"
 msgstr ""
 
-#: src/editor/editcmd.c:2680 src/editor/editcmd.c:2721
-#: src/editor/editcmd.c:2733 src/editor/editcmd_dialogs.c:227
+#: src/editor/editcmd.c:2676 src/editor/editcmd.c:2717
+#: src/editor/editcmd.c:2729 src/editor/editcmd_dialogs.c:224
 msgid "Replace"
 msgstr ""
 
-#: src/editor/editcmd.c:2733
+#: src/editor/editcmd.c:2729
 #, c-format
 msgid "%ld replacements made"
 msgstr ""
 
-#: src/editor/editcmd.c:2836 src/editor/editwidget.c:391
+#: src/editor/editcmd.c:2832 src/editor/editwidget.c:391
 msgid "[NoName]"
 msgstr ""
 
-#: src/editor/editcmd.c:2854
+#: src/editor/editcmd.c:2850
 #, c-format
 msgid ""
 "File %s was modified.\n"
 "Save before close?"
 msgstr ""
 
-#: src/editor/editcmd.c:2855
+#: src/editor/editcmd.c:2851
 msgid "Close file"
 msgstr ""
 
-#: src/editor/editcmd.c:2859
+#: src/editor/editcmd.c:2855
 #, c-format
 msgid ""
 "Midnight Commander is being shut down.\n"
 "Save modified file %s?"
 msgstr ""
 
-#: src/editor/editcmd.c:2958
+#: src/editor/editcmd.c:2954
 msgid "This function is not implemented"
 msgstr ""
 
-#: src/editor/editcmd.c:2973
+#: src/editor/editcmd.c:2969
 msgid "Copy to clipboard"
 msgstr ""
 
-#: src/editor/editcmd.c:2973 src/editor/editcmd.c:2997
+#: src/editor/editcmd.c:2969 src/editor/editcmd.c:2993
 msgid "Unable to save to file"
 msgstr ""
 
-#: src/editor/editcmd.c:2997
+#: src/editor/editcmd.c:2993
 msgid "Cut to clipboard"
 msgstr ""
 
-#: src/editor/editcmd.c:3041
+#: src/editor/editcmd.c:3037
 msgid "Goto line"
 msgstr ""
 
-#: src/editor/editcmd.c:3082 src/editor/editcmd.c:3092
+#: src/editor/editcmd.c:3078 src/editor/editcmd.c:3088
 msgid "Save block"
 msgstr ""
 
-#: src/editor/editcmd.c:3114 src/editor/editcmd.c:3129
+#: src/editor/editcmd.c:3110 src/editor/editcmd.c:3125
 msgid "Insert file"
 msgstr ""
 
-#: src/editor/editcmd.c:3129
+#: src/editor/editcmd.c:3125
 msgid "Cannot insert file"
 msgstr ""
 
-#: src/editor/editcmd.c:3150
+#: src/editor/editcmd.c:3146
 msgid "Sort block"
 msgstr ""
 
-#: src/editor/editcmd.c:3150
+#: src/editor/editcmd.c:3146
 msgid "You must first highlight a block of text"
 msgstr ""
 
-#: src/editor/editcmd.c:3158
+#: src/editor/editcmd.c:3154
 msgid "Run sort"
 msgstr ""
 
-#: src/editor/editcmd.c:3159
+#: src/editor/editcmd.c:3155
 msgid "Enter sort options (see manpage) separated by whitespace:"
 msgstr ""
 
-#: src/editor/editcmd.c:3179 src/editor/editcmd.c:3186
+#: src/editor/editcmd.c:3175 src/editor/editcmd.c:3182
 msgid "Sort"
 msgstr ""
 
-#: src/editor/editcmd.c:3179
+#: src/editor/editcmd.c:3175
 msgid "Cannot execute sort command"
 msgstr ""
 
-#: src/editor/editcmd.c:3185
+#: src/editor/editcmd.c:3181
 #, c-format
 msgid "Sort returned non-zero: %s"
 msgstr ""
 
-#: src/editor/editcmd.c:3220
+#: src/editor/editcmd.c:3216
 msgid "Paste output of external command"
 msgstr ""
 
-#: src/editor/editcmd.c:3221
+#: src/editor/editcmd.c:3217
 msgid "Enter shell command(s):"
 msgstr ""
 
-#: src/editor/editcmd.c:3238
+#: src/editor/editcmd.c:3234
 msgid "External command"
 msgstr ""
 
-#: src/editor/editcmd.c:3238
+#: src/editor/editcmd.c:3234
 msgid "Cannot execute command"
 msgstr ""
 
-#: src/editor/editcmd.c:3282
+#: src/editor/editcmd.c:3278
 msgid "mail -s <subject> -c <cc> <to>"
 msgstr ""
 
-#: src/editor/editcmd.c:3283
+#: src/editor/editcmd.c:3279
 msgid "To"
 msgstr ""
 
-#: src/editor/editcmd.c:3286
+#: src/editor/editcmd.c:3282
 msgid "Subject"
 msgstr ""
 
-#: src/editor/editcmd.c:3289
+#: src/editor/editcmd.c:3285
 msgid "Copies to"
 msgstr ""
 
-#: src/editor/editcmd.c:3299
+#: src/editor/editcmd.c:3295
 msgid "Mail"
 msgstr ""
 
-#: src/editor/editcmd.c:3403
+#: src/editor/editcmd.c:3399
 msgid "Insert literal"
 msgstr ""
 
-#: src/editor/editcmd.c:3404
+#: src/editor/editcmd.c:3400
 msgid "Press any key:"
 msgstr ""
 
-#: src/editor/editcmd.c:3441 src/editor/editcmd.c:3470
+#: src/editor/editcmd.c:3437 src/editor/editcmd.c:3466
 msgid ""
 "Current text was modified without a file save.\n"
 "Continue discards these changes"
 msgstr ""
 
-#: src/editor/editcmd_dialogs.c:114 src/editor/editcmd_dialogs.c:214
+#: src/editor/editcmd_dialogs.c:114 src/editor/editcmd_dialogs.c:211
 msgid "In se&lection"
 msgstr ""
 
@@ -1670,38 +1688,38 @@ msgstr ""
 msgid "&Find all"
 msgstr ""
 
-#: src/editor/editcmd_dialogs.c:205
+#: src/editor/editcmd_dialogs.c:202
 msgid "Enter replacement string:"
 msgstr ""
 
-#: src/editor/editcmd_dialogs.c:279
+#: src/editor/editcmd_dialogs.c:276
 msgid "Replace with:"
 msgstr ""
 
-#: src/editor/editcmd_dialogs.c:282 src/editor/spell_dialogs.c:95
+#: src/editor/editcmd_dialogs.c:279 src/editor/spell_dialogs.c:95
 msgid "&Replace"
 msgstr ""
 
-#: src/editor/editcmd_dialogs.c:283 src/filemanager/file.c:728
+#: src/editor/editcmd_dialogs.c:280 src/filemanager/file.c:880
 #: src/filemanager/filegui.c:444
 msgid "A&ll"
 msgstr ""
 
-#: src/editor/editcmd_dialogs.c:284 src/editor/spell_dialogs.c:97
-#: src/filemanager/file.c:633 src/filemanager/file.c:687
-#: src/filemanager/file.c:2503 src/filemanager/filegui.c:253
+#: src/editor/editcmd_dialogs.c:281 src/editor/spell_dialogs.c:97
+#: src/filemanager/file.c:768 src/filemanager/file.c:839
+#: src/filemanager/file.c:2988 src/filemanager/filegui.c:253
 msgid "&Skip"
 msgstr ""
 
-#: src/editor/editcmd_dialogs.c:292
+#: src/editor/editcmd_dialogs.c:289
 msgid "Confirm replace"
 msgstr ""
 
-#: src/editor/editcmd_dialogs.c:334
+#: src/editor/editcmd_dialogs.c:331
 msgid "Cancel"
 msgstr ""
 
-#: src/editor/editcmd_dialogs.c:482
+#: src/editor/editcmd_dialogs.c:479
 msgid ""
 "Current text was modified without a file save.\n"
 "Continue discards these changes."
@@ -1784,7 +1802,7 @@ msgstr ""
 msgid "Mo&ve"
 msgstr ""
 
-#: src/editor/editmenu.c:112 src/filemanager/file.c:1967
+#: src/editor/editmenu.c:112 src/filemanager/file.c:2595
 #: src/filemanager/midnight.c:254
 msgid "&Delete"
 msgstr ""
@@ -2101,7 +2119,7 @@ msgid ""
 msgstr ""
 
 #: src/editor/editwidget.c:148
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 #: src/editor/editwidget.c:157
@@ -2116,28 +2134,28 @@ msgstr ""
 msgid "Edit: "
 msgstr ""
 
-#: src/editor/editwidget.c:671
+#: src/editor/editwidget.c:684
 msgid "ButtonBar|Mark"
 msgstr ""
 
-#: src/editor/editwidget.c:672
+#: src/editor/editwidget.c:685
 msgid "ButtonBar|Replac"
 msgstr ""
 
-#: src/editor/editwidget.c:673 src/filemanager/midnight.c:1619
+#: src/editor/editwidget.c:686 src/filemanager/midnight.c:1613
 #: src/filemanager/tree.c:1174
 msgid "ButtonBar|Copy"
 msgstr ""
 
-#: src/editor/editwidget.c:674
+#: src/editor/editwidget.c:687
 msgid "ButtonBar|Move"
 msgstr ""
 
-#: src/editor/editwidget.c:676 src/filemanager/midnight.c:1622
+#: src/editor/editwidget.c:689 src/filemanager/midnight.c:1616
 msgid "ButtonBar|Delete"
 msgstr ""
 
-#: src/editor/editwidget.c:677 src/filemanager/midnight.c:1623
+#: src/editor/editwidget.c:690 src/filemanager/midnight.c:1617
 msgid "ButtonBar|PullDn"
 msgstr ""
 
@@ -2265,8 +2283,8 @@ msgstr ""
 msgid "Load syntax file"
 msgstr ""
 
-#: src/editor/syntax.c:1492 src/help.c:1069 src/usermenu.c:960
-#: src/usermenu.c:1001
+#: src/editor/syntax.c:1492 src/help.c:1069 src/usermenu.c:955
+#: src/usermenu.c:995
 #, c-format
 msgid ""
 "Cannot open file %s\n"
@@ -2286,7 +2304,7 @@ msgid ""
 "extra access permissions with the \"su\" command?"
 msgstr ""
 
-#: src/execute.c:196 src/filemanager/ext.c:648
+#: src/execute.c:196 src/filemanager/ext.c:657
 #, c-format
 msgid "Cannot fetch a local copy of %s"
 msgstr ""
@@ -2299,54 +2317,68 @@ msgstr ""
 msgid "Type 'exit' to return to the Midnight Commander"
 msgstr ""
 
-#: src/filemanager/achown.c:90 src/filemanager/chmod.c:120
-#: src/filemanager/chown.c:89
+#: src/filemanager/achown.c:86 src/filemanager/chmod.c:112
+#: src/filemanager/chown.c:84
 msgid "Set &all"
 msgstr ""
 
-#: src/filemanager/achown.c:91
+#: src/filemanager/achown.c:87
 msgid "S&kip"
 msgstr ""
 
-#: src/filemanager/achown.c:92 src/filemanager/chmod.c:124
-#: src/filemanager/chown.c:92
+#: src/filemanager/achown.c:88 src/filemanager/chmod.c:116
+#: src/filemanager/chown.c:87
 msgid "&Set"
 msgstr ""
 
-#: src/filemanager/achown.c:331 src/filemanager/achown.c:439
-#: src/filemanager/achown.c:446
+#: src/filemanager/achown.c:289 src/filemanager/achown.c:296
+#: src/filemanager/achown.c:547
 msgid "owner"
 msgstr ""
 
-#: src/filemanager/achown.c:331 src/filemanager/achown.c:441
-#: src/filemanager/achown.c:448
+#: src/filemanager/achown.c:291 src/filemanager/achown.c:298
+#: src/filemanager/achown.c:552
 msgid "group"
 msgstr ""
 
-#: src/filemanager/achown.c:443
+#: src/filemanager/achown.c:293
 msgid "other"
 msgstr ""
 
-#: src/filemanager/achown.c:451
+#: src/filemanager/achown.c:301
 msgid "Flag"
 msgstr ""
 
-#: src/filemanager/achown.c:673
+#: src/filemanager/achown.c:739
 msgid "Chown advanced command"
 msgstr ""
 
-#: src/filemanager/achown.c:786 src/filemanager/achown.c:810
-#: src/filemanager/achown.c:879 src/filemanager/chmod.c:404
-#: src/filemanager/chmod.c:489
+#: src/filemanager/achown.c:844 src/filemanager/achown.c:1041
+#: src/filemanager/chmod.c:407 src/filemanager/chmod.c:555
 #, c-format
 msgid ""
 "Cannot chmod \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/achown.c:791 src/filemanager/achown.c:815
-#: src/filemanager/achown.c:885 src/filemanager/chown.c:303
-#: src/filemanager/chown.c:433
+#: src/filemanager/achown.c:846 src/filemanager/achown.c:881
+#: src/filemanager/chmod.c:410 src/filemanager/chown.c:309
+msgid "&Ignore"
+msgstr ""
+
+#: src/filemanager/achown.c:846 src/filemanager/achown.c:881
+#: src/filemanager/chmod.c:410 src/filemanager/chown.c:309
+msgid "Ignore &all"
+msgstr ""
+
+#: src/filemanager/achown.c:846 src/filemanager/achown.c:881
+#: src/filemanager/chmod.c:410 src/filemanager/chown.c:309
+#: src/filemanager/file.c:839 src/viewer/hex.c:430
+msgid "&Retry"
+msgstr ""
+
+#: src/filemanager/achown.c:879 src/filemanager/achown.c:1047
+#: src/filemanager/chown.c:306 src/filemanager/chown.c:474
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -2467,6 +2499,10 @@ msgid "Sa&fe delete"
 msgstr ""
 
 #: src/filemanager/boxes.c:549
+msgid "Safe overwrite"
+msgstr ""
+
+#: src/filemanager/boxes.c:550
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2768,132 +2804,132 @@ msgstr ""
 msgid "SMB authentication"
 msgstr ""
 
-#: src/filemanager/chmod.c:82
+#: src/filemanager/chmod.c:76
 msgid "set &user ID on execution"
 msgstr ""
 
-#: src/filemanager/chmod.c:83
+#: src/filemanager/chmod.c:77
 msgid "set &group ID on execution"
 msgstr ""
 
-#: src/filemanager/chmod.c:84
+#: src/filemanager/chmod.c:78
 msgid "stick&y bit"
 msgstr ""
 
-#: src/filemanager/chmod.c:85
+#: src/filemanager/chmod.c:79
 msgid "&read by owner"
 msgstr ""
 
-#: src/filemanager/chmod.c:86
+#: src/filemanager/chmod.c:80
 msgid "&write by owner"
 msgstr ""
 
-#: src/filemanager/chmod.c:87
+#: src/filemanager/chmod.c:81
 msgid "e&xecute/search by owner"
 msgstr ""
 
-#: src/filemanager/chmod.c:88
+#: src/filemanager/chmod.c:82
 msgid "rea&d by group"
 msgstr ""
 
-#: src/filemanager/chmod.c:89
+#: src/filemanager/chmod.c:83
 msgid "write by grou&p"
 msgstr ""
 
-#: src/filemanager/chmod.c:90
+#: src/filemanager/chmod.c:84
 msgid "execu&te/search by group"
 msgstr ""
 
-#: src/filemanager/chmod.c:91
+#: src/filemanager/chmod.c:85
 msgid "read &by others"
 msgstr ""
 
-#: src/filemanager/chmod.c:92
+#: src/filemanager/chmod.c:86
 msgid "wr&ite by others"
 msgstr ""
 
-#: src/filemanager/chmod.c:93
+#: src/filemanager/chmod.c:87
 msgid "execute/searc&h by others"
 msgstr ""
 
-#: src/filemanager/chmod.c:101
+#: src/filemanager/chmod.c:94
 msgid "Name:"
 msgstr ""
 
-#: src/filemanager/chmod.c:102
+#: src/filemanager/chmod.c:95
 msgid "Permissions (octal):"
 msgstr ""
 
-#: src/filemanager/chmod.c:103
+#: src/filemanager/chmod.c:96
 msgid "Owner name:"
 msgstr ""
 
-#: src/filemanager/chmod.c:104
+#: src/filemanager/chmod.c:97
 msgid "Group name:"
 msgstr ""
 
-#: src/filemanager/chmod.c:121
+#: src/filemanager/chmod.c:113
 msgid "&Marked all"
 msgstr ""
 
-#: src/filemanager/chmod.c:122
+#: src/filemanager/chmod.c:114
 msgid "S&et marked"
 msgstr ""
 
-#: src/filemanager/chmod.c:123
+#: src/filemanager/chmod.c:115
 msgid "C&lear marked"
 msgstr ""
 
-#: src/filemanager/chmod.c:309
+#: src/filemanager/chmod.c:311
 msgid "Chmod command"
 msgstr ""
 
-#: src/filemanager/chmod.c:311 src/filemanager/chown.c:165
+#: src/filemanager/chmod.c:313 src/filemanager/chown.c:169
 #: src/filemanager/panel.c:257
 msgid "Permission"
 msgstr ""
 
-#: src/filemanager/chmod.c:320 src/filemanager/chown.c:241
+#: src/filemanager/chmod.c:322 src/filemanager/chown.c:230
 msgid "File"
 msgstr ""
 
-#: src/filemanager/chown.c:90
+#: src/filemanager/chown.c:85
 msgid "Set &groups"
 msgstr ""
 
-#: src/filemanager/chown.c:91
+#: src/filemanager/chown.c:86
 msgid "Set &users"
 msgstr ""
 
-#: src/filemanager/chown.c:157
+#: src/filemanager/chown.c:161
 msgid "Name"
 msgstr ""
 
-#: src/filemanager/chown.c:159
+#: src/filemanager/chown.c:163
 msgid "Owner name"
 msgstr ""
 
-#: src/filemanager/chown.c:161 src/filemanager/chown.c:230
+#: src/filemanager/chown.c:165 src/filemanager/chown.c:219
 msgid "Group name"
 msgstr ""
 
-#: src/filemanager/chown.c:163
+#: src/filemanager/chown.c:167
 msgid "Size"
 msgstr ""
 
-#: src/filemanager/chown.c:217
+#: src/filemanager/chown.c:206
 msgid "Chown command"
 msgstr ""
 
-#: src/filemanager/chown.c:219
+#: src/filemanager/chown.c:208
 msgid "User name"
 msgstr ""
 
-#: src/filemanager/chown.c:223
+#: src/filemanager/chown.c:212
 msgid "<Unknown user>"
 msgstr ""
 
-#: src/filemanager/chown.c:234
+#: src/filemanager/chown.c:223
 msgid "<Unknown group>"
 msgstr ""
 
@@ -2905,7 +2941,7 @@ msgstr ""
 msgid "Files tagged, want to cd?"
 msgstr ""
 
-#: src/filemanager/cmd.c:147 src/filemanager/cmd.c:1132
+#: src/filemanager/cmd.c:147 src/filemanager/cmd.c:1131
 #: src/filemanager/panel.c:2796 src/filemanager/panel.c:3396
 msgid "Cannot change directory"
 msgstr ""
@@ -2942,157 +2978,157 @@ msgstr ""
 msgid "Cannot chdir to \"%s\""
 msgstr ""
 
-#: src/filemanager/cmd.c:624
+#: src/filemanager/cmd.c:623
 msgid "View file"
 msgstr ""
 
-#: src/filemanager/cmd.c:624
+#: src/filemanager/cmd.c:623
 msgid "Filename:"
 msgstr ""
 
-#: src/filemanager/cmd.c:658
+#: src/filemanager/cmd.c:657
 msgid "Filtered view"
 msgstr ""
 
-#: src/filemanager/cmd.c:659
+#: src/filemanager/cmd.c:658
 msgid "Filter command and arguments:"
 msgstr ""
 
-#: src/filemanager/cmd.c:747
+#: src/filemanager/cmd.c:746
 msgid "Edit file"
 msgstr ""
 
-#: src/filemanager/cmd.c:835
+#: src/filemanager/cmd.c:834
 msgid "Create a new Directory"
 msgstr ""
 
-#: src/filemanager/cmd.c:836
+#: src/filemanager/cmd.c:835
 msgid "Enter directory name:"
 msgstr ""
 
-#: src/filemanager/cmd.c:951
+#: src/filemanager/cmd.c:950
 msgid "Extension file edit"
 msgstr ""
 
-#: src/filemanager/cmd.c:952
+#: src/filemanager/cmd.c:951
 msgid "Which extension file you want to edit?"
 msgstr ""
 
-#: src/filemanager/cmd.c:953 src/filemanager/cmd.c:993
-#: src/filemanager/cmd.c:1054
+#: src/filemanager/cmd.c:952 src/filemanager/cmd.c:992
+#: src/filemanager/cmd.c:1053
 msgid "&System Wide"
 msgstr ""
 
-#: src/filemanager/cmd.c:1052
+#: src/filemanager/cmd.c:1051
 msgid "Highlighting groups file edit"
 msgstr ""
 
-#: src/filemanager/cmd.c:1053
+#: src/filemanager/cmd.c:1052
 msgid "Which highlighting file you want to edit?"
 msgstr ""
 
-#: src/filemanager/cmd.c:1147
+#: src/filemanager/cmd.c:1146
 msgid "Compare directories"
 msgstr ""
 
-#: src/filemanager/cmd.c:1148
+#: src/filemanager/cmd.c:1147
 msgid "Select compare method:"
 msgstr ""
 
-#: src/filemanager/cmd.c:1149
+#: src/filemanager/cmd.c:1148
 msgid "&Quick"
 msgstr ""
 
-#: src/filemanager/cmd.c:1149
+#: src/filemanager/cmd.c:1148
 msgid "&Size only"
 msgstr ""
 
-#: src/filemanager/cmd.c:1149
+#: src/filemanager/cmd.c:1148
 msgid "&Thorough"
 msgstr ""
 
-#: src/filemanager/cmd.c:1164
+#: src/filemanager/cmd.c:1163
 msgid ""
 "Both panels should be in the listing mode\n"
 "to use this command"
 msgstr ""
 
-#: src/filemanager/cmd.c:1212
+#: src/filemanager/cmd.c:1211
 msgid ""
 "Not an xterm or Linux console;\n"
 "the panels cannot be toggled."
 msgstr ""
 
-#: src/filemanager/cmd.c:1244
+#: src/filemanager/cmd.c:1243
 #, c-format
 msgid "'%s' is not a symbolic link"
 msgstr ""
 
-#: src/filemanager/cmd.c:1257
+#: src/filemanager/cmd.c:1256
 #, c-format
 msgid "Symlink '%s' points to:"
 msgstr ""
 
-#: src/filemanager/cmd.c:1259
+#: src/filemanager/cmd.c:1258
 msgid "Edit symlink"
 msgstr ""
 
-#: src/filemanager/cmd.c:1272
+#: src/filemanager/cmd.c:1271
 #, c-format
 msgid "edit symlink, unable to remove %s: %s"
 msgstr ""
 
-#: src/filemanager/cmd.c:1280
+#: src/filemanager/cmd.c:1279
 #, c-format
 msgid "edit symlink: %s"
 msgstr ""
 
-#: src/filemanager/cmd.c:1325
+#: src/filemanager/cmd.c:1324
 msgid "FTP to machine"
 msgstr ""
 
-#: src/filemanager/cmd.c:1336
+#: src/filemanager/cmd.c:1335
 msgid "SFTP to machine"
 msgstr ""
 
-#: src/filemanager/cmd.c:1348
+#: src/filemanager/cmd.c:1347
 msgid "Shell link to machine"
 msgstr ""
 
-#: src/filemanager/cmd.c:1360
+#: src/filemanager/cmd.c:1359
 msgid "SMB link to machine"
 msgstr ""
 
-#: src/filemanager/cmd.c:1371
+#: src/filemanager/cmd.c:1370
 msgid "Undelete files on an ext2 file system"
 msgstr ""
 
-#: src/filemanager/cmd.c:1372
+#: src/filemanager/cmd.c:1371
 msgid ""
 "Enter device (without /dev/) to undelete\n"
 "files on: (F1 for details)"
 msgstr ""
 
-#: src/filemanager/cmd.c:1438 src/filemanager/cmd.c:1473
-#: src/filemanager/file.c:1344
+#: src/filemanager/cmd.c:1437 src/filemanager/cmd.c:1472
+#: src/filemanager/file.c:681
 msgid "Directory scanning"
 msgstr ""
 
-#: src/filemanager/cmd.c:1519 src/filemanager/cmd.c:1521
+#: src/filemanager/cmd.c:1518 src/filemanager/cmd.c:1520
 msgid "Setup"
 msgstr ""
 
-#: src/filemanager/cmd.c:1519
+#: src/filemanager/cmd.c:1518
 #, c-format
 msgid "Setup saved to %s"
 msgstr ""
 
-#: src/filemanager/cmd.c:1521
+#: src/filemanager/cmd.c:1520
 #, c-format
 msgid "Unable to save setup to %s"
 msgstr ""
 
-#: src/filemanager/command.c:282 src/usermenu.c:949
+#: src/filemanager/command.c:282 src/usermenu.c:944
 msgid "Cannot execute commands on non-local filesystems"
 msgstr ""
 
@@ -3104,27 +3140,27 @@ msgid ""
 "%s"
 msgstr ""
 
-#: src/filemanager/dir.c:645 src/filemanager/dir.c:706
+#: src/filemanager/dir.c:638 src/filemanager/dir.c:699
 msgid "Cannot read directory contents"
 msgstr ""
 
-#: src/filemanager/ext.c:245 src/usermenu.c:475
+#: src/filemanager/ext.c:245 src/usermenu.c:476
 msgid "Parameter"
 msgstr ""
 
-#: src/filemanager/ext.c:449 src/usermenu.c:446
+#: src/filemanager/ext.c:458 src/usermenu.c:446
 #, c-format
 msgid ""
 "Cannot create temporary command file\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/ext.c:830
+#: src/filemanager/ext.c:839
 #, c-format
 msgid " %s%s file error"
 msgstr ""
 
-#: src/filemanager/ext.c:832
+#: src/filemanager/ext.c:841
 #, c-format
 msgid ""
 "The format of the %smc.ext file has changed with version 3.0. It seems that "
@@ -3132,19 +3168,19 @@ msgid ""
 "Commander package."
 msgstr ""
 
-#: src/filemanager/ext.c:852
+#: src/filemanager/ext.c:861
 #, c-format
 msgid "%s file error"
 msgstr ""
 
-#: src/filemanager/ext.c:854
+#: src/filemanager/ext.c:863
 #, c-format
 msgid ""
 "The format of the %s file has changed with version 3.0. You may either want "
 "to copy it from %smc.ext or use that file as an example of how to write it."
 msgstr ""
 
-#: src/filemanager/file.c:95 src/filemanager/file.c:1966
+#: src/filemanager/file.c:95 src/filemanager/file.c:2594
 #: src/filemanager/tree.c:716
 msgid "DialogTitle|Copy"
 msgstr ""
@@ -3158,90 +3194,104 @@ msgstr ""
 msgid "DialogTitle|Delete"
 msgstr ""
 
-#: src/filemanager/file.c:140
+#: src/filemanager/file.c:137
 msgid "FileOperation|Copy"
 msgstr ""
 
-#: src/filemanager/file.c:141
+#: src/filemanager/file.c:138
 msgid "FileOperation|Move"
 msgstr ""
 
-#: src/filemanager/file.c:142
+#: src/filemanager/file.c:139
 msgid "FileOperation|Delete"
 msgstr ""
 
-#: src/filemanager/file.c:155
+#: src/filemanager/file.c:152
 #, no-c-format
 msgid "%o %f%n\"%s\"%m"
 msgstr ""
 
-#: src/filemanager/file.c:157
+#: src/filemanager/file.c:154
 #, no-c-format
 msgid "%o %d %f%m"
 msgstr ""
 
-#: src/filemanager/file.c:161
+#: src/filemanager/file.c:158
 msgid "files"
 msgstr ""
 
-#: src/filemanager/file.c:162
+#: src/filemanager/file.c:159
 msgid "directory"
 msgstr ""
 
-#: src/filemanager/file.c:163
+#: src/filemanager/file.c:160
 msgid "directories"
 msgstr ""
 
-#: src/filemanager/file.c:164
+#: src/filemanager/file.c:161
 msgid "files/directories"
 msgstr ""
 
 #. TRANSLATORS: keep leading space here to split words in Copy/Move dialog
-#: src/filemanager/file.c:166
+#: src/filemanager/file.c:163
 msgid " with source mask:"
 msgstr ""
 
-#: src/filemanager/file.c:359
+#: src/filemanager/file.c:379
 msgid "Cannot make the hardlink"
 msgstr ""
 
-#: src/filemanager/file.c:411
+#: src/filemanager/file.c:431
 #, c-format
 msgid ""
 "Cannot read source link \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:425
+#: src/filemanager/file.c:445
 msgid ""
 "Cannot make stable symlinks across non-local filesystems:\n"
 "\n"
 "Option Stable Symlinks will be disabled"
 msgstr ""
 
-#: src/filemanager/file.c:494
+#: src/filemanager/file.c:514
 #, c-format
 msgid ""
 "Cannot create target symlink \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:687
-msgid "Ski&p all"
+#: src/filemanager/file.c:807
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-#: src/filemanager/file.c:687 src/viewer/hex.c:430
-msgid "&Retry"
+#: src/filemanager/file.c:809
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
 msgstr ""
 
-#: src/filemanager/file.c:720
+#: src/filemanager/file.c:839
+msgid "Ski&p all"
+msgstr ""
+
+#: src/filemanager/file.c:872
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
 "Delete it recursively?"
 msgstr ""
 
-#: src/filemanager/file.c:721
+#: src/filemanager/file.c:873
 #, c-format
 msgid ""
 "Background process:\n"
@@ -3249,196 +3299,197 @@ msgid ""
 "Delete it recursively?"
 msgstr ""
 
-#: src/filemanager/file.c:729 src/filemanager/filegui.c:448
+#: src/filemanager/file.c:881 src/filemanager/filegui.c:448
 msgid "Non&e"
 msgstr ""
 
-#: src/filemanager/file.c:955
+#: src/filemanager/file.c:1080
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:968 src/filemanager/file.c:1570
+#: src/filemanager/file.c:1138
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
-#: src/filemanager/file.c:974
+#: src/filemanager/file.c:1154
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
 msgstr ""
 
-#: src/filemanager/file.c:1019
+#: src/filemanager/file.c:1200
 #, c-format
 msgid ""
 "Cannot move file \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1051
+#: src/filemanager/file.c:1303
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1097
+#: src/filemanager/file.c:1531 src/filemanager/file.c:2169
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1170 src/filemanager/file.c:1230
-#: src/filemanager/file.c:2483
+#: src/filemanager/file.c:1533
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1537 src/filemanager/file.c:2371
+#: src/filemanager/file.c:1554
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1556
+#: src/filemanager/file.c:1656
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
+#: src/filemanager/file.c:2188
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1614
+#: src/filemanager/file.c:2242
 #, c-format
 msgid ""
 "Cannot create special file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1626 src/filemanager/file.c:1977
+#: src/filemanager/file.c:2254 src/filemanager/file.c:2605
 #, c-format
 msgid ""
 "Cannot chown target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1641 src/filemanager/file.c:1997
+#: src/filemanager/file.c:2269 src/filemanager/file.c:2625
 #, c-format
 msgid ""
 "Cannot chmod target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1662
+#: src/filemanager/file.c:2290
 #, c-format
 msgid ""
 "Cannot open source file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1677
+#: src/filemanager/file.c:2305
 msgid "Reget failed, about to overwrite file"
 msgstr ""
 
-#: src/filemanager/file.c:1689
+#: src/filemanager/file.c:2317
 #, c-format
 msgid ""
 "Cannot fstat source file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1726
+#: src/filemanager/file.c:2354
 #, c-format
 msgid ""
 "Cannot create target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1748
+#: src/filemanager/file.c:2376
 #, c-format
 msgid ""
 "Cannot fstat target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1768
+#: src/filemanager/file.c:2396
 #, c-format
 msgid ""
 "Cannot preallocate space for target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1824
+#: src/filemanager/file.c:2452
 #, c-format
 msgid ""
 "Cannot read source file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1869
+#: src/filemanager/file.c:2497
 #, c-format
 msgid ""
 "Cannot write target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1904
+#: src/filemanager/file.c:2532
 msgid "(stalled)"
 msgstr ""
 
-#: src/filemanager/file.c:1942
+#: src/filemanager/file.c:2570
 #, c-format
 msgid ""
 "Cannot close source file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1954
+#: src/filemanager/file.c:2582
 #, c-format
 msgid ""
 "Cannot close target file \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:1966
+#: src/filemanager/file.c:2594
 msgid "Incomplete file was retrieved. Keep it?"
 msgstr ""
 
-#: src/filemanager/file.c:1967
+#: src/filemanager/file.c:2595
 msgid "&Keep"
 msgstr ""
 
-#: src/filemanager/file.c:2062
+#: src/filemanager/file.c:2690
 #, c-format
 msgid ""
 "Cannot stat source directory \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2096
+#: src/filemanager/file.c:2724
 #, c-format
 msgid ""
 "Source \"%s\" is not a directory\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2108
+#: src/filemanager/file.c:2736
 #, c-format
 msgid ""
 "Cannot copy cyclic symbolic link\n"
 "\"%s\""
 msgstr ""
 
-#: src/filemanager/file.c:2146 src/filemanager/file.c:2957
+#: src/filemanager/file.c:2774 src/filemanager/file.c:3257
 #: src/filemanager/tree.c:773
 #, c-format
 msgid ""
@@ -3446,53 +3497,26 @@ msgid ""
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2178
+#: src/filemanager/file.c:2806
 #, c-format
 msgid ""
 "Cannot create target directory \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2202
+#: src/filemanager/file.c:2830
 #, c-format
 msgid ""
 "Cannot chown target directory \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/filemanager/file.c:2335
-#, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#: src/filemanager/file.c:2373
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#: src/filemanager/file.c:2394
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#: src/filemanager/file.c:2544
+#: src/filemanager/file.c:3029
 #, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-#: src/filemanager/file.c:2661
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
-#: src/filemanager/file.c:2798
+#: src/filemanager/file.c:3173
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -3627,36 +3651,36 @@ msgstr ""
 msgid "Deleting"
 msgstr ""
 
-#: src/filemanager/filegui.c:1239 src/filemanager/find.c:580
+#: src/filemanager/filegui.c:1241 src/filemanager/find.c:580
 #: src/filemanager/panel.c:2531
 msgid "&Using shell patterns"
 msgstr ""
 
-#: src/filemanager/filegui.c:1241
+#: src/filemanager/filegui.c:1243
 msgid "to:"
 msgstr ""
 
-#: src/filemanager/filegui.c:1245
+#: src/filemanager/filegui.c:1247
 msgid "Follow &links"
 msgstr ""
 
-#: src/filemanager/filegui.c:1246
+#: src/filemanager/filegui.c:1248
 msgid "Preserve &attributes"
 msgstr ""
 
-#: src/filemanager/filegui.c:1248
+#: src/filemanager/filegui.c:1250
 msgid "Di&ve into subdir if exists"
 msgstr ""
 
-#: src/filemanager/filegui.c:1249
+#: src/filemanager/filegui.c:1251
 msgid "&Stable symlinks"
 msgstr ""
 
-#: src/filemanager/filegui.c:1254
+#: src/filemanager/filegui.c:1256
 msgid "&Background"
 msgstr ""
 
-#: src/filemanager/filegui.c:1308
+#: src/filemanager/filegui.c:1310
 #, c-format
 msgid "Invalid source pattern '%s'"
 msgstr ""
@@ -3922,60 +3946,60 @@ msgstr ""
 msgid "Device:     %s"
 msgstr ""
 
-#: src/filemanager/info.c:203
+#: src/filemanager/info.c:204
 #, c-format
 msgid "Filesystem: %s"
 msgstr ""
 
-#: src/filemanager/info.c:209
+#: src/filemanager/info.c:211
 #, c-format
 msgid "Accessed:   %s"
 msgstr ""
 
-#: src/filemanager/info.c:214
+#: src/filemanager/info.c:217
 #, c-format
 msgid "Modified:   %s"
 msgstr ""
 
 #. TRANSLATORS: Time of last status change as in stat(2) man.
-#: src/filemanager/info.c:222
+#: src/filemanager/info.c:226
 #, c-format
 msgid "Changed:    %s"
 msgstr ""
 
-#: src/filemanager/info.c:230
+#: src/filemanager/info.c:234
 #, c-format
 msgid "Dev. type: major %lu, minor %lu"
 msgstr ""
 
-#: src/filemanager/info.c:237
+#: src/filemanager/info.c:241
 #, c-format
 msgid "Size:       %s"
 msgstr ""
 
-#: src/filemanager/info.c:239
+#: src/filemanager/info.c:243
 #, c-format
 msgid " (%lu block)"
 msgid_plural " (%lu blocks)"
 msgstr[0] ""
 msgstr[1] ""
 
-#: src/filemanager/info.c:246
+#: src/filemanager/info.c:250
 #, c-format
 msgid "Owner:      %s/%s"
 msgstr ""
 
-#: src/filemanager/info.c:250
+#: src/filemanager/info.c:254
 #, c-format
 msgid "Links:      %d"
 msgstr ""
 
-#: src/filemanager/info.c:254
+#: src/filemanager/info.c:258
 #, c-format
 msgid "Mode:       %s (%04o)"
 msgstr ""
 
-#: src/filemanager/info.c:259
+#: src/filemanager/info.c:263
 #, c-format
 msgid "Location:   %Xh:%Xh"
 msgstr ""
@@ -4264,55 +4288,55 @@ msgstr ""
 msgid "Panels:"
 msgstr ""
 
-#: src/filemanager/midnight.c:1029
+#: src/filemanager/midnight.c:1023
 #, c-format
 msgid "You have %zu opened screen. Quit anyway?"
 msgid_plural "You have %zu opened screens. Quit anyway?"
 msgstr[0] ""
 msgstr[1] ""
 
-#: src/filemanager/midnight.c:1032 src/filemanager/midnight.c:1038
+#: src/filemanager/midnight.c:1026 src/filemanager/midnight.c:1032
 #: src/filemanager/panel.c:2819
 msgid "The Midnight Commander"
 msgstr ""
 
-#: src/filemanager/midnight.c:1039
+#: src/filemanager/midnight.c:1033
 msgid "Do you really want to quit the Midnight Commander?"
 msgstr ""
 
-#: src/filemanager/midnight.c:1604
+#: src/filemanager/midnight.c:1598
 msgid "&Above"
 msgstr ""
 
-#: src/filemanager/midnight.c:1604
+#: src/filemanager/midnight.c:1598
 msgid "&Left"
 msgstr ""
 
-#: src/filemanager/midnight.c:1605
+#: src/filemanager/midnight.c:1599
 msgid "&Below"
 msgstr ""
 
-#: src/filemanager/midnight.c:1605
+#: src/filemanager/midnight.c:1599
 msgid "&Right"
 msgstr ""
 
-#: src/filemanager/midnight.c:1616
+#: src/filemanager/midnight.c:1610
 msgid "ButtonBar|Menu"
 msgstr ""
 
-#: src/filemanager/midnight.c:1617 src/viewer/display.c:90
+#: src/filemanager/midnight.c:1611 src/viewer/display.c:90
 msgid "ButtonBar|View"
 msgstr ""
 
-#: src/filemanager/midnight.c:1620 src/filemanager/tree.c:1175
+#: src/filemanager/midnight.c:1614 src/filemanager/tree.c:1175
 msgid "ButtonBar|RenMov"
 msgstr ""
 
-#: src/filemanager/midnight.c:1621 src/filemanager/tree.c:1178
+#: src/filemanager/midnight.c:1615 src/filemanager/tree.c:1178
 msgid "ButtonBar|Mkdir"
 msgstr ""
 
-#: src/filemanager/mountlist.c:1004
+#: src/filemanager/mountlist.c:986
 msgid "Memory exhausted!"
 msgstr ""
 
@@ -4712,15 +4736,15 @@ msgstr ""
 msgid "-  < No translation >"
 msgstr ""
 
-#: src/setup.c:220
+#: src/setup.c:222
 msgid "%b %e  %Y"
 msgstr ""
 
-#: src/setup.c:221
+#: src/setup.c:223
 msgid "%b %e %H:%M"
 msgstr ""
 
-#: src/setup.c:1288
+#: src/setup.c:1291
 #, c-format
 msgid ""
 "Cannot save file %s:\n"
@@ -4863,41 +4887,41 @@ msgstr ""
 msgid "False:"
 msgstr ""
 
-#: src/usermenu.c:562
+#: src/usermenu.c:563
 msgid "Error calling program"
 msgstr ""
 
-#: src/usermenu.c:593
+#: src/usermenu.c:590
 msgid "Warning -- ignoring file"
 msgstr ""
 
-#: src/usermenu.c:594
+#: src/usermenu.c:591
 #, c-format
 msgid ""
 "File %s is not owned by root or you or is world writable.\n"
 "Using it may compromise your security"
 msgstr ""
 
-#: src/usermenu.c:706
+#: src/usermenu.c:703
 msgid "Format error on file Extensions File"
 msgstr ""
 
-#: src/usermenu.c:707
+#: src/usermenu.c:704
 #, c-format
 msgid "The %%var macro has no default"
 msgstr ""
 
-#: src/usermenu.c:708
+#: src/usermenu.c:705
 #, c-format
 msgid "The %%var macro has no variable"
 msgstr ""
 
-#: src/usermenu.c:1103
+#: src/usermenu.c:1101
 #, c-format
 msgid "No suitable entries found in %s"
 msgstr ""
 
-#: src/usermenu.c:1117
+#: src/usermenu.c:1115
 msgid "User menu"
 msgstr ""
 
@@ -4961,210 +4985,210 @@ msgstr ""
 msgid "Warning: cannot open %s directory\n"
 msgstr ""
 
-#: src/vfs/fish/fish.c:308
+#: src/vfs/fish/fish.c:363
 #, c-format
 msgid "fish: Disconnecting from %s"
 msgstr ""
 
-#: src/vfs/fish/fish.c:484
+#: src/vfs/fish/fish.c:539
 msgid "fish: Waiting for initial line..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:494
+#: src/vfs/fish/fish.c:549
 msgid "Sorry, we cannot do password authenticated connections for now."
 msgstr ""
 
-#: src/vfs/fish/fish.c:502
+#: src/vfs/fish/fish.c:557
 #, c-format
 msgid "fish: Password is required for %s"
 msgstr ""
 
-#: src/vfs/fish/fish.c:510
+#: src/vfs/fish/fish.c:565
 msgid "fish: Sending password..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:547
+#: src/vfs/fish/fish.c:602
 msgid "fish: Sending initial line..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:558
+#: src/vfs/fish/fish.c:613
 msgid "fish: Handshaking version..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:568
+#: src/vfs/fish/fish.c:624
 msgid "fish: Getting host info..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:692
+#: src/vfs/fish/fish.c:747
 #, c-format
 msgid "fish: Reading directory %s..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:876 src/vfs/ftpfs/ftpfs.c:1814
+#: src/vfs/fish/fish.c:931 src/vfs/ftpfs/ftpfs.c:1808
 #: src/vfs/undelfs/undelfs.c:387
 #, c-format
 msgid "%s: done."
 msgstr ""
 
-#: src/vfs/fish/fish.c:883 src/vfs/ftpfs/ftpfs.c:1762
+#: src/vfs/fish/fish.c:938 src/vfs/ftpfs/ftpfs.c:1756
 #: src/vfs/undelfs/undelfs.c:390
 #, c-format
 msgid "%s: failure"
 msgstr ""
 
-#: src/vfs/fish/fish.c:941
+#: src/vfs/fish/fish.c:995
 #, c-format
 msgid "fish: store %s: sending command..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:980
+#: src/vfs/fish/fish.c:1017
 msgid "fish: Local read failed, sending zeros"
 msgstr ""
 
-#: src/vfs/fish/fish.c:999
+#: src/vfs/fish/fish.c:1036
 msgid "fish: storing file"
 msgstr ""
 
-#: src/vfs/fish/fish.c:1075
+#: src/vfs/fish/fish.c:1111
 msgid "Aborting transfer..."
 msgstr ""
 
-#: src/vfs/fish/fish.c:1091
+#: src/vfs/fish/fish.c:1127
 msgid "Error reported after abort."
 msgstr ""
 
-#: src/vfs/fish/fish.c:1093
+#: src/vfs/fish/fish.c:1129
 msgid "Aborted transfer would be successful."
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:572
+#: src/vfs/ftpfs/ftpfs.c:566
 #, c-format
 msgid "ftpfs: Disconnecting from %s"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:624
+#: src/vfs/ftpfs/ftpfs.c:618
 #, c-format
 msgid "FTP: Password required for %s"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:666
+#: src/vfs/ftpfs/ftpfs.c:660
 msgid "ftpfs: sending login name"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:671
+#: src/vfs/ftpfs/ftpfs.c:665
 msgid "ftpfs: sending user password"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:677
+#: src/vfs/ftpfs/ftpfs.c:671
 #, c-format
 msgid "FTP: Account required for user %s"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:679
+#: src/vfs/ftpfs/ftpfs.c:673
 msgid "Account:"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:684
+#: src/vfs/ftpfs/ftpfs.c:678
 msgid "ftpfs: sending user account"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:693
+#: src/vfs/ftpfs/ftpfs.c:687
 msgid "ftpfs: logged in"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:707
+#: src/vfs/ftpfs/ftpfs.c:701
 #, c-format
 msgid "ftpfs: Login incorrect for user %s "
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:838
+#: src/vfs/ftpfs/ftpfs.c:832
 msgid "ftpfs: Invalid host name."
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:887 src/vfs/ftpfs/ftpfs.c:903
+#: src/vfs/ftpfs/ftpfs.c:881 src/vfs/ftpfs/ftpfs.c:897
 #, c-format
 msgid "ftpfs: %s"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:910
+#: src/vfs/ftpfs/ftpfs.c:904
 #, c-format
 msgid "ftpfs: making connection to %s"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:920
+#: src/vfs/ftpfs/ftpfs.c:914
 msgid "ftpfs: connection interrupted by user"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:922
+#: src/vfs/ftpfs/ftpfs.c:916
 #, c-format
 msgid "ftpfs: connection to server failed: %s"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:976
+#: src/vfs/ftpfs/ftpfs.c:970
 #, c-format
 msgid "Waiting to retry... %d (Control-G to cancel)"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1305
+#: src/vfs/ftpfs/ftpfs.c:1299
 msgid "ftpfs: invalid address family"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1313
+#: src/vfs/ftpfs/ftpfs.c:1307
 #, c-format
 msgid "ftpfs: could not create socket: %s"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1347
+#: src/vfs/ftpfs/ftpfs.c:1341
 msgid "ftpfs: could not setup passive mode"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1459
+#: src/vfs/ftpfs/ftpfs.c:1453
 msgid "ftpfs: aborting transfer."
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1462
+#: src/vfs/ftpfs/ftpfs.c:1456
 #, c-format
 msgid "ftpfs: abort error: %s"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1470
+#: src/vfs/ftpfs/ftpfs.c:1464
 msgid "ftpfs: abort failed"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1601 src/vfs/ftpfs/ftpfs.c:1713
+#: src/vfs/ftpfs/ftpfs.c:1595 src/vfs/ftpfs/ftpfs.c:1707
 msgid "ftpfs: CWD failed."
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1611 src/vfs/ftpfs/ftpfs.c:1619
+#: src/vfs/ftpfs/ftpfs.c:1605 src/vfs/ftpfs/ftpfs.c:1613
 msgid "ftpfs: couldn't resolve symlink"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1680
+#: src/vfs/ftpfs/ftpfs.c:1674
 msgid "Resolving symlink..."
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1703
+#: src/vfs/ftpfs/ftpfs.c:1697
 #, c-format
 msgid "ftpfs: Reading FTP directory %s... %s%s"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1706
+#: src/vfs/ftpfs/ftpfs.c:1700
 msgid "(strict rfc959)"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1706
+#: src/vfs/ftpfs/ftpfs.c:1700
 msgid "(chdir first)"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1828
+#: src/vfs/ftpfs/ftpfs.c:1822
 msgid "ftpfs: failed; nowhere to fallback to"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:1907
+#: src/vfs/ftpfs/ftpfs.c:1901
 msgid "ftpfs: storing file"
 msgstr ""
 
-#: src/vfs/ftpfs/ftpfs.c:2402
+#: src/vfs/ftpfs/ftpfs.c:2396
 msgid ""
 "~/.netrc file has incorrect mode\n"
 "Remove password or correct mode"
@@ -5243,10 +5267,15 @@ msgstr ""
 msgid "sftp: Failure establishing SSH session"
 msgstr ""
 
-#: src/vfs/sftpfs/file.c:275
+#: src/vfs/sftpfs/file.c:267
 msgid "sftp: No file handler data present for reading file"
 msgstr ""
 
+#: src/vfs/sftpfs/internal.c:97
+#, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
 #: src/vfs/sftpfs/vfs_class.c:215
 #, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
@@ -5420,23 +5449,23 @@ msgid ""
 "Save modified file?"
 msgstr ""
 
-#: src/viewer/dialogs.c:179
+#: src/viewer/dialogs.c:176
 msgid "&Line number"
 msgstr ""
 
-#: src/viewer/dialogs.c:180
+#: src/viewer/dialogs.c:177
 msgid "Pe&rcents"
 msgstr ""
 
-#: src/viewer/dialogs.c:181
+#: src/viewer/dialogs.c:178
 msgid "&Decimal offset"
 msgstr ""
 
-#: src/viewer/dialogs.c:182
+#: src/viewer/dialogs.c:179
 msgid "He&xadecimal offset"
 msgstr ""
 
-#: src/viewer/dialogs.c:217
+#: src/viewer/dialogs.c:214
 msgid "Goto"
 msgstr ""
 
@@ -5502,22 +5531,22 @@ msgid ""
 "%s"
 msgstr ""
 
-#: src/viewer/lib.c:398 src/viewer/lib.c:400
+#: src/viewer/lib.c:394 src/viewer/lib.c:396
 msgid "View: "
 msgstr ""
 
-#: src/viewer/mcviewer.c:322
+#: src/viewer/mcviewer.c:324
 #, c-format
 msgid ""
 "Cannot open \"%s\"\n"
 "%s"
 msgstr ""
 
-#: src/viewer/mcviewer.c:352
+#: src/viewer/mcviewer.c:354
 msgid "Cannot view: not a regular file"
 msgstr ""
 
-#: src/viewer/mcviewer.c:387
+#: src/viewer/mcviewer.c:389
 #, c-format
 msgid ""
 "Cannot open \"%s\" in parse mode\n"
Binary files mc-4.8.20/po/mn.gmo and mc-4.8.21/po/mn.gmo differ
diff -urpN mc-4.8.20/po/mn.po mc-4.8.21/po/mn.po
--- mc-4.8.20/po/mn.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/mn.po	2018-06-03 11:03:46.000000000 +0200
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Mongolian (http://www.transifex.com/mc/mc/language/mn/)\n"
 "Language: mn\n"
@@ -631,6 +631,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr "Заагдсан файл руу хамгийн сүүлд ажилласан лавлахыг хэвлэх"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Subshell боломжыг нээх (анхны утга)"
 
@@ -643,12 +646,18 @@ msgstr "Тусгайлсан файл р
 msgid "Set debug level"
 msgstr "Дебаг түвшинг тодорхойлох"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Файл харагчыг ажиллуулах"
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "xterm хүчингүүд"
 
@@ -688,6 +697,9 @@ msgstr "өнгөт горимд ажил
 msgid "Specifies a color configuration"
 msgstr "өнгөний тусгай тохиргоо"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1553,7 +1565,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1733,6 +1745,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Дахих"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1823,6 +1844,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2400,11 +2424,24 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
-msgstr "&Дахих"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
+msgstr ""
 
 #, c-format
 msgid ""
@@ -2424,16 +2461,14 @@ msgstr "&үгүй"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2448,28 +2483,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2597,32 +2635,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -4015,6 +4030,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/nb.gmo and mc-4.8.21/po/nb.gmo differ
diff -urpN mc-4.8.20/po/nb.po mc-4.8.21/po/nb.po
--- mc-4.8.20/po/nb.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/nb.po	2018-06-03 11:03:46.000000000 +0200
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Norwegian Bokmål (http://www.transifex.com/mc/mc/language/"
 "nb/)\n"
@@ -632,6 +632,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Slår på støtte for underskall (standard)"
 
@@ -644,12 +647,18 @@ msgstr "Logg ftp dialogen til spesifiser
 msgid "Set debug level"
 msgstr "Sett feilsøkingsnivå"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Starter filvisning for en fil"
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Tvungen bruk av xterm funksjoner"
 
@@ -689,6 +698,9 @@ msgstr "Be om å kjøre i fargemodus"
 msgid "Specifies a color configuration"
 msgstr "Spesifiserer en fargekonfigurasjon"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1554,7 +1566,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1734,6 +1746,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Prøv igjen"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1824,6 +1845,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2401,11 +2425,24 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
-msgstr "&Prøv igjen"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
+msgstr ""
 
 #, c-format
 msgid ""
@@ -2425,16 +2462,14 @@ msgstr "ing&En"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2449,28 +2484,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2598,32 +2636,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -4016,6 +4031,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/nl.gmo and mc-4.8.21/po/nl.gmo differ
diff -urpN mc-4.8.20/po/nl.po mc-4.8.21/po/nl.po
--- mc-4.8.20/po/nl.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/nl.po	2018-06-03 11:03:46.000000000 +0200
@@ -14,9 +14,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-11-18 18:04+0000\n"
-"Last-Translator: Yury V. Zaytsev <yury@shurup.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Dutch (http://www.transifex.com/mc/mc/language/nl/)\n"
 "Language: nl\n"
 "MIME-Version: 1.0\n"
@@ -664,6 +664,9 @@ msgstr "Toon instellingsopties"
 msgid "Print last working directory to specified file"
 msgstr "Werkmap wegschrijven in bestand bij afsluiten programma"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Zet subshell-ondersteuning aan (standaard)"
 
@@ -676,12 +679,18 @@ msgstr "Schrijf FTP log naar aangegeven
 msgid "Set debug level"
 msgstr "Debugniveau instellen"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Start de bestandviewer voor een bestand"
 
 msgid "Edit files"
 msgstr "Bewerk bestanden"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Dwingt xterm features"
 
@@ -721,6 +730,9 @@ msgstr "Vraag om de kleurenmodus te gebr
 msgid "Specifies a color configuration"
 msgstr "Geef een kleurconfiguratie aan"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Laad mc met aangegeven skin"
 
@@ -1639,8 +1651,8 @@ msgstr ""
 "Eeen gebruikersvriendelijke tekstbewerker\n"
 "geschreven voor de Midnight Commander"
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "Over"
@@ -1827,6 +1839,15 @@ msgstr ""
 "chmod \"%s\" mislukt \n"
 "%s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Nogmaals"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1919,6 +1940,9 @@ msgstr "cd volgt lin&ks"
 msgid "Sa&fe delete"
 msgstr "Veili&g verwijderen"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "A&utomatisch instellingen opslaan"
 
@@ -2525,12 +2549,33 @@ msgstr ""
 "Maken van doel van symbolische link \"%s\" mislukt \n"
 "%s "
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"en \n"
+"\"%s\" \n"
+"zijn dezelfde map "
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"`%s' \n"
+"en \n"
+"`%s' \n"
+"zijn hetzelfde bestand "
+
 msgid "Ski&p all"
 msgstr "Alles ove&rslaan"
 
-msgid "&Retry"
-msgstr "&Nogmaals"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2554,23 +2599,19 @@ msgstr "Ge&en"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Bestand \"%s\" kan niet geïnspecteerd worden \n"
-"%s "
+"Verwijderen van bestand \"%s\" mislukt \n"
+"%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"`%s' \n"
-"en \n"
-"`%s' \n"
-"zijn hetzelfde bestand "
+"Bestand \"%s\" kan niet geïnspecteerd worden \n"
+"%s "
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2586,36 +2627,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Verwijderen van bestand \"%s\" mislukt \n"
+"Kan map \"%s\" niet verwijderen \n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Verwijderen van bestand \"%s\" mislukt \n"
-"%s"
+"Map \"%s\" kan niet overschreven worden \n"
+"%s "
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Kan map \"%s\" niet verwijderen \n"
-"%s"
+"Kan bestand \"%s\" niet overschrijven\n"
+"%s "
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Map \"%s\" kan niet overschreven worden \n"
+"Kan map  \"%s\" niet naar \"%s\" verplaatsen \n"
 "%s "
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Opereren op \"..\" is niet mogelijk! "
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2781,40 +2825,9 @@ msgstr ""
 "%s "
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"en \n"
-"\"%s\" \n"
-"zijn dezelfde map "
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Kan bestand \"%s\" niet overschrijven\n"
-"%s "
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Kan map  \"%s\" niet naar \"%s\" verplaatsen \n"
-"%s "
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Directories: %zu, totale grootte: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Opereren op \"..\" is niet mogelijk! "
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Sorry, de taak kon niet in de achtergrond geplaatst worden"
 
@@ -4232,6 +4245,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Geen gegevens over bestand aanwezig om bestand te kunnen lezen"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G break) Weergave lijst... %s"
 
Binary files mc-4.8.20/po/pl.gmo and mc-4.8.21/po/pl.gmo differ
diff -urpN mc-4.8.20/po/pl.po mc-4.8.21/po/pl.po
--- mc-4.8.20/po/pl.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/pl.po	2018-06-03 11:03:46.000000000 +0200
@@ -3,14 +3,14 @@
 # This file is distributed under the same license as the mc package.
 #
 # Translators:
-# Piotr Drąg <piotrdrag@gmail.com>, 2011-2017
+# Piotr Drąg <piotrdrag@gmail.com>, 2011-2018
 # Slava Zanko <slavazanko@gmail.com>, 2011
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-23 18:02+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-05-01 15:44+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Polish (http://www.transifex.com/mc/mc/language/pl/)\n"
 "Language: pl\n"
@@ -665,6 +665,9 @@ msgstr "Wyświetla opcje konfiguracji"
 msgid "Print last working directory to specified file"
 msgstr "Wyświetla ostatni katalog roboczy do podanego pliku"
 
+msgid "<file>"
+msgstr "<plik>"
+
 msgid "Enables subshell support (default)"
 msgstr "Włącza obsługę podpowłoki (domyślne)"
 
@@ -677,12 +680,18 @@ msgstr "Zapisuje dziennik FTP do podaneg
 msgid "Set debug level"
 msgstr "Ustawia poziom debugowania"
 
+msgid "<integer>"
+msgstr "<liczba-całkowita>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Uruchamia podgląd pliku"
 
 msgid "Edit files"
 msgstr "Modyfikuje pliki"
 
+msgid "<file> ..."
+msgstr "<plik> …"
+
 msgid "Forces xterm features"
 msgstr "Wymusza funkcje programu xterm"
 
@@ -724,6 +733,9 @@ msgstr "Żąda uruchomienia w trybie ko
 msgid "Specifies a color configuration"
 msgstr "Podaje konfigurację kolorów"
 
+msgid "<string>"
+msgstr "<ciąg>"
+
 msgid "Show mc with specified skin"
 msgstr "Wyświetla program mc za pomocą podanej skórki"
 
@@ -1649,8 +1661,8 @@ msgstr ""
 "Łatwy w obsłudze edytor tekstu,\n"
 "napisany dla programu Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright © 1996-2016 Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr "Copyright © 1996-2018 Free Software Foundation"
 
 msgid "About"
 msgstr "O programie"
@@ -1836,6 +1848,15 @@ msgstr ""
 "Nie można wykonać chmod na „%s”\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "Z&ignoruj"
+
+msgid "Ignore &all"
+msgstr "Zignoruj &wszystko"
+
+msgid "&Retry"
+msgstr "P&onów"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1928,6 +1949,9 @@ msgstr "„cd” podąża za &dowiązani
 msgid "Sa&fe delete"
 msgstr "Bezpieczne &usuwanie"
 
+msgid "Safe overwrite"
+msgstr "Bezpieczne zastępowanie"
+
 msgid "A&uto save setup"
 msgstr "Auto&m. zapis ustawień"
 
@@ -2531,12 +2555,33 @@ msgstr ""
 "Nie można utworzyć docelowego dowiązania symbolicznego „%s”\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"„%s”\n"
+"i\n"
+"„%s”\n"
+"to ten sam katalog"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"„%s”\n"
+"i\n"
+"„%s”\n"
+"to ten sam plik"
+
 msgid "Ski&p all"
 msgstr "&Pomiń wszystko"
 
-msgid "&Retry"
-msgstr "P&onów"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2560,23 +2605,19 @@ msgstr "Br&ak"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Nie można wykonać polecenia stat na pliku „%s”\n"
+"Nie można usunąć pliku „%s”\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"„%s”\n"
-"i\n"
-"„%s”\n"
-"to ten sam plik"
+"Nie można wykonać polecenia stat na pliku „%s”\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2592,36 +2633,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nie można usunąć pliku „%s”\n"
+"Nie można usunąć katalogu „%s”\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nie można usunąć pliku „%s”\n"
+"Nie można zastąpić katalogu „%s”\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Nie można usunąć katalogu „%s”\n"
+"Nie można zastąpić pliku „%s”\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Nie można zastąpić katalogu „%s”\n"
+"Nie można przenieść katalogu „%s” do „%s”\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Nie można wykonać działania na „..”."
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2787,40 +2831,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"„%s”\n"
-"i\n"
-"„%s”\n"
-"to ten sam katalog"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Nie można zastąpić pliku „%s”\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Nie można przenieść katalogu „%s” do „%s”\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Katalogi: %zu, całkowity rozmiar: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Nie można wykonać działania na „..”."
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Nie można umieścić zadania w tle"
 
@@ -4244,6 +4257,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: brak danych obsługi pliku do odczytania pliku"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: błąd gniazda: %s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G przerywa) wyświetlanie listy… %s"
 
Binary files mc-4.8.20/po/pt.gmo and mc-4.8.21/po/pt.gmo differ
diff -urpN mc-4.8.20/po/pt.po mc-4.8.21/po/pt.po
--- mc-4.8.20/po/pt.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/pt.po	2018-06-03 11:03:46.000000000 +0200
@@ -5,14 +5,14 @@
 # Translators:
 # Gilberto J <2101458@my.ipleiria.pt>, 2012
 # Gilberto Jorge <gmj125@gmail.com>, 2012-2013
-# Gilberto Jorge <gmj125@gmail.com>, 2013-2017
+# Gilberto Jorge <gmj125@gmail.com>, 2013-2018
 # Slava Zanko <slavazanko@gmail.com>, 2011
 msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-23 18:02+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 22:38+0000\n"
 "Last-Translator: Gilberto Jorge <gmj125@gmail.com>\n"
 "Language-Team: Portuguese (http://www.transifex.com/mc/mc/language/pt/)\n"
 "Language: pt\n"
@@ -662,6 +662,9 @@ msgstr "Opções de configuração de im
 msgid "Print last working directory to specified file"
 msgstr "Imprime último diretório de trabalho para o ficheiro especificado"
 
+msgid "<file>"
+msgstr "<file>"
+
 msgid "Enables subshell support (default)"
 msgstr "Ativar suporte de subshell (defeito)"
 
@@ -674,12 +677,18 @@ msgstr "Registar diálogo de ftp para o
 msgid "Set debug level"
 msgstr "Definir nível de depuração"
 
+msgid "<integer>"
+msgstr "<integer>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Executa o visualizador de ficheiros sobre um ficheiro"
 
 msgid "Edit files"
 msgstr "Editar ficheiros"
 
+msgid "<file> ..."
+msgstr "<file> ..."
+
 msgid "Forces xterm features"
 msgstr "Força funcionalidades xterm"
 
@@ -722,6 +731,9 @@ msgstr "Requerer a execução em modo de
 msgid "Specifies a color configuration"
 msgstr "Especificar uma configuração de cor"
 
+msgid "<string>"
+msgstr "<string>"
+
 msgid "Show mc with specified skin"
 msgstr "Mostra mc com a skin especificada"
 
@@ -1645,8 +1657,8 @@ msgstr ""
 "Um editor de texto amigo do utilizador\n"
 "escrito para o Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr "Copyright (C) 1996-2018 the Free Software Foundation"
 
 msgid "About"
 msgstr "Acerca"
@@ -1833,6 +1845,15 @@ msgstr ""
 "Não é possível efetuar chmod \"%s\"\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "&Ignorar"
+
+msgid "Ignore &all"
+msgstr "Ignor&ar tudo"
+
+msgid "&Retry"
+msgstr "&Repetir"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1925,6 +1946,9 @@ msgstr "Cd segue ligações"
 msgid "Sa&fe delete"
 msgstr "Apa&gar com segurança"
 
+msgid "Safe overwrite"
+msgstr "Sobregravação segura"
+
 msgid "A&uto save setup"
 msgstr "Guardar setup a&uto"
 
@@ -2529,12 +2553,33 @@ msgstr ""
 "Não é possível criar symlink alvo \"%s\"\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"e\n"
+"\"%s\"\n"
+"são o mesmo diretório"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"e\n"
+"\"%s\"\n"
+"são o mesmo ficheiro"
+
 msgid "Ski&p all"
 msgstr "Sal&tar todos"
 
-msgid "&Retry"
-msgstr "&Repetir"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2558,23 +2603,19 @@ msgstr "N&enhum"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Não é possível efetuar stat no ficheiro \"%s\"\n"
+"Não é possível remover o ficheiro \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"e\n"
-"\"%s\"\n"
-"são o mesmo ficheiro"
+"Não é possível efetuar stat no ficheiro \"%s\"\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2590,36 +2631,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Não é possível remover o ficheiro \"%s\"\n"
+"Não é possível remover o diretório \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Não é possível apagar o ficheiro \"%s\"\n"
+"Não é possível escrever por cima do diretório \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Não é possível remover o diretório \"%s\"\n"
+"Não é possível escrever por cima do ficheiro \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Não é possível escrever por cima do diretório \"%s\"\n"
+"Não é possível mover diretório \"%s\" para \"%s\"\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Não é possível operar em \"..\"!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2785,40 +2829,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"e\n"
-"\"%s\"\n"
-"são o mesmo diretório"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Não é possível escrever por cima do ficheiro \"%s\"\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Não é possível mover diretório \"%s\" para \"%s\"\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Directórios: %zu, tamanho total: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Não é possível operar em \"..\"!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Desculpe, não foi possível colocar o job em background"
 
@@ -4233,6 +4246,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Sem dados de uso de ficheiro presentes para ler ficheiro"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: erro de socket: %s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G break) A listar... %s"
 
Binary files mc-4.8.20/po/pt_BR.gmo and mc-4.8.21/po/pt_BR.gmo differ
diff -urpN mc-4.8.20/po/pt_BR.po mc-4.8.21/po/pt_BR.po
--- mc-4.8.20/po/pt_BR.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/pt_BR.po	2018-06-03 11:03:46.000000000 +0200
@@ -13,9 +13,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
-"Last-Translator: Mauro Hemerly Gazzani <mauro.hemerly@gmail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Portuguese (Brazil) (http://www.transifex.com/mc/mc/language/"
 "pt_BR/)\n"
 "Language: pt_BR\n"
@@ -663,6 +663,9 @@ msgstr "Opções de configuração de im
 msgid "Print last working directory to specified file"
 msgstr "Exibir último diretório de trabalho para o arquivo especificado"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Habilita suporte à sub interpretadores de comandos (padrão)"
 
@@ -675,12 +678,18 @@ msgstr "Acessar diálogo FTP para um arq
 msgid "Set debug level"
 msgstr "Definir nível de depuração"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Lança o visualizador de arquivos"
 
 msgid "Edit files"
 msgstr "Editar arquivos"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Força recursos do xterm"
 
@@ -720,6 +729,9 @@ msgstr "Solicita para ser executado em c
 msgid "Specifies a color configuration"
 msgstr "Especifica uma configuração de cores"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Exibir mc com o tema especificado"
 
@@ -1601,8 +1613,8 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "Sobre"
@@ -1789,6 +1801,15 @@ msgstr ""
 "Não foi possível executar chmod \"%s\"\n"
 "%s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Tentar Novamente"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1881,6 +1902,9 @@ msgstr "Cd segue lin&ks"
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2468,11 +2492,32 @@ msgstr ""
 "Não foi possível criar alvo symlink \"%s\"\n"
 "%s"
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"e\n"
+"\"%s\"\n"
+"são o mesmo diretório"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
 msgstr ""
+"\"%s\"\n"
+"e\n"
+"\"%s\"\n"
+"são o mesmo arquivo"
 
-msgid "&Retry"
-msgstr "&Tentar Novamente"
+msgid "Ski&p all"
+msgstr ""
 
 #, c-format
 msgid ""
@@ -2492,23 +2537,19 @@ msgstr "&Nenhum"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Não foi possível pegar estado de arquivo \"%s\"\n"
+"Não foi possível remover arquivo \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"e\n"
-"\"%s\"\n"
-"são o mesmo arquivo"
+"Não foi possível pegar estado de arquivo \"%s\"\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2524,36 +2565,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Não foi possível remover arquivo \"%s\"\n"
+"Não foi possível remover diretório \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Não foi possível deletar \"%s\"\n"
+"Não foi possível sobrescrever o diretório \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Não foi possível remover diretório \"%s\"\n"
+"Não foi possível sobrescrever o arquivo \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Não foi possível sobrescrever o diretório \"%s\"\n"
+"Não foi possível mover o diretório \"%s\" para \"%s\"\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Não foi possível operar em \"..\""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2715,40 +2759,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"e\n"
-"\"%s\"\n"
-"são o mesmo diretório"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Não foi possível sobrescrever o arquivo \"%s\"\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Não foi possível mover o diretório \"%s\" para \"%s\"\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Não foi possível operar em \"..\""
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Desculpe, não consegui colocar o procesos em plano de fundo"
 
@@ -4147,6 +4160,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/ro.gmo and mc-4.8.21/po/ro.gmo differ
diff -urpN mc-4.8.20/po/ro.po mc-4.8.21/po/ro.po
--- mc-4.8.20/po/ro.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/ro.po	2018-06-03 11:03:46.000000000 +0200
@@ -5,6 +5,7 @@
 # Translators:
 # Arthur Titeica <arthur@psw.ro>, 2013
 # Arthur Țițeică <arthur.titeica@gmail.com>, 2013-2014,2017
+# Christian Eichert, 2018
 # Mihai Draghicioiu <inactive+vampirefrog@transifex.com>, 2016
 # Nicolae Crefelean, 2014
 # Slava Zanko <slavazanko@gmail.com>, 2011
@@ -14,9 +15,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
-"Last-Translator: Arthur Țițeică <arthur.titeica@gmail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Romanian (http://www.transifex.com/mc/mc/language/ro/)\n"
 "Language: ro\n"
 "MIME-Version: 1.0\n"
@@ -110,18 +111,22 @@ msgid ""
 "Number out of range (should be in byte range, 0 <= n <= 0xFF, expressed in "
 "hex)"
 msgstr ""
+"Număr în afara intervalului (ar trebui să fie în intervalul octet, 0 <= n <= "
+"0xFF, exprimat în hex)"
 
 msgid "Invalid character"
 msgstr "Caracter nevalid"
 
 msgid "Unmatched quotes character"
-msgstr ""
+msgstr "Caracterul ghilimelelor neîmperecheate"
 
 #, c-format
 msgid ""
 "Hex pattern error at position %d:\n"
 "%s."
 msgstr ""
+"Eroare model Hex la poziția %d\n"
+"%s."
 
 msgid "Search string not found"
 msgstr "Șirul căutat nu a fost găsit"
@@ -173,6 +178,9 @@ msgid ""
 "%s\n"
 "Default skin has been loaded"
 msgstr ""
+"Nu se poate folosi tema '%s' cu suport pentru culori reale:\n"
+"%s\n"
+"Tema implicita a fost încărcata"
 
 #, c-format
 msgid ""
@@ -185,16 +193,16 @@ msgstr ""
 "A fost încărcată tematica implicită"
 
 msgid "True color not supported with ncurses."
-msgstr ""
+msgstr "CULORI REALE nu sunt acceptate cu ncurses."
 
 msgid "True color not supported in this slang version."
-msgstr ""
+msgstr "CULORI REALE  nu sunt acceptate în această versiune slang."
 
 msgid "Your terminal doesn't even seem to support 256 colors."
-msgstr ""
+msgstr "Terminalul dvs. nu pare ca nu suporta 256 de culori."
 
 msgid "Set COLORTERM=truecolor if your terminal really supports true colors."
-msgstr ""
+msgstr "Setați COLORTERM=truecolor dacă terminalul dvs. suporta culori reale."
 
 msgid "Escape"
 msgstr "Escape"
@@ -491,43 +499,47 @@ msgstr ""
 "Verificați variabila de mediu TERM.\n"
 
 msgid "B"
-msgstr ""
+msgstr "B"
 
 msgid "kB"
-msgstr ""
+msgstr "kB"
 
 msgid "KiB"
-msgstr ""
+msgstr "KiB"
 
 msgid "MB"
-msgstr ""
+msgstr "MB"
 
 msgid "MiB"
-msgstr ""
+msgstr "MiB"
 
 msgid "GB"
-msgstr ""
+msgstr "GB"
 
 msgid "GiB"
-msgstr ""
+msgstr "GiB"
 
 msgid "Cannot create pipe descriptor"
-msgstr ""
+msgstr "Nu pot crea descriptorul filtrului"
 
 msgid "Cannot create pipe streams"
-msgstr ""
+msgstr "Nu pot crea fluxul filtrului"
 
 #, c-format
 msgid ""
 "Unexpected error in select() reading data from a child process:\n"
 "%s"
 msgstr ""
+"Eroare neașteptată în select() se accesează datele dintr-un proces copil :\n"
+"%s"
 
 #, c-format
 msgid ""
 "Unexpected error in waitpid():\n"
 "%s"
 msgstr ""
+"Eroare surpriza in waitpid():\n"
+"%s"
 
 msgid "Warning"
 msgstr "Atenție"
@@ -551,7 +563,7 @@ msgstr "%s: %s: %s %3d%% (%lld) bytes tr
 
 #, c-format
 msgid "%s: %s: %s %lld bytes transferred"
-msgstr ""
+msgstr "%s: %s: %s %lld bytes transferați "
 
 msgid "Starting linear transfer..."
 msgstr "Pornesc transferul liniar..."
@@ -634,7 +646,7 @@ msgstr "Eroare"
 
 #, c-format
 msgid "%s (%d)"
-msgstr ""
+msgstr "%s (%d)"
 
 msgid "&Abort"
 msgstr "&Anulează"
@@ -654,6 +666,9 @@ msgstr "Afișează opțiunile de configu
 msgid "Print last working directory to specified file"
 msgstr "Arată ultimul dosar curent în fișierul specificat"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Activează suportul pentru subshell (implicit)"
 
@@ -666,12 +681,18 @@ msgstr "Înregistrează dialogul ftp în
 msgid "Set debug level"
 msgstr "Nivelul de depanare"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Lansează vizualizatorul pe un fișier"
 
 msgid "Edit files"
 msgstr "Editează fișiere"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Forțează facilitățile xterm"
 
@@ -713,6 +734,9 @@ msgstr "Cerere de rulare în culori"
 msgid "Specifies a color configuration"
 msgstr "Specifică o configurație de culori"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Arată mc cu tematica specificată"
 
@@ -737,6 +761,24 @@ msgid ""
 "   Viewer:       viewnormal,viewbold, viewunderline, viewselected\n"
 "   Help:         helpnormal, helpitalic, helpbold, helplink, helpslink\n"
 msgstr ""
+"--colors KEYWORD={FORE},{BACK},{ATTR}:KEYWORD2=...\n"
+"\n"
+"{FORE}, {BACK} and {ATTR} can be omitted, and the default will be used\n"
+"\n"
+" Keywords:\n"
+"   Global:       errors, disabled, reverse, gauge, header\n"
+"                 input, inputmark, inputunchanged, commandlinemark\n"
+"                 bbarhotkey, bbarbutton, statusbar\n"
+"   File display: normal, selected, marked, markselect\n"
+"   Dialog boxes: dnormal, dfocus, dhotnormal, dhotfocus, errdhotnormal,\n"
+"                 errdhotfocus\n"
+"   Menus:        menunormal, menuhot, menusel, menuhotsel, menuinactive\n"
+"   Popup menus:  pmenunormal, pmenusel, pmenutitle\n"
+"   Editor:       editnormal, editbold, editmarked, editwhitespace,\n"
+"                 editlinestate, editbg, editframe, editframeactive\n"
+"                 editframedrag\n"
+"   Viewer:       viewnormal,viewbold, viewunderline, viewselected\n"
+"   Help:         helpnormal, helpitalic, helpbold, helplink, helpslink\n"
 
 #. TRANSLATORS: don't translate color names and attributes
 msgid ""
@@ -751,18 +793,28 @@ msgid ""
 "Attributes:\n"
 "   bold, italic, underline, reverse, blink; append more with '+'\n"
 msgstr ""
+"Culori standard:\n"
+"   black, gray, red, brightred, green, brightgreen, brown,\n"
+"   yellow, blue, brightblue, magenta, brightmagenta, cyan,\n"
+"   brightcyan, lightgray and white\n"
+"\n"
+"Culori extinse, cînd 256 de culori sunt disponibile:\n"
+"   color16 la color255, sau rgb000 la rgb555 si gray0 la gray23\n"
+"\n"
+"Atribute:\n"
+"   bold, italic, underline, reverse, blink; append more with '+'\n"
 
 msgid "Color options"
 msgstr "Opțiuni culori"
 
 msgid "[+lineno] file1[:lineno] [file2[:lineno]...]"
-msgstr ""
+msgstr "[+lineno] file1[:lineno] [file2[:lineno]...]"
 
 msgid "file"
 msgstr "fișierul"
 
 msgid "file1 file2"
-msgstr ""
+msgstr "file1 file2"
 
 msgid "[this_dir] [other_panel_dir]"
 msgstr "[acest_dir] [celălalt_panou_dir]"
@@ -1593,7 +1645,7 @@ msgid "Cursor be&yond end of line"
 msgstr "Cursor &dincolo de sfârşit fișier"
 
 msgid "&Group undo"
-msgstr ""
+msgstr "&Group undo"
 
 msgid "Word wrap line length:"
 msgstr "Lungime linie pentru curgere cuvinte:"
@@ -1608,8 +1660,8 @@ msgstr ""
 "Un editor de text ușor de utilizat\n"
 "creat pentru Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "Despre"
@@ -1796,6 +1848,15 @@ msgstr ""
 "Nu se poate aplica chmod \"%s\"\n"
 "%s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Reîncearcă"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1888,6 +1949,9 @@ msgstr "Cd urmărește le&găturile"
 msgid "Sa&fe delete"
 msgstr "Ștergere sigu&ră"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "Auto-salvare a configurației"
 
@@ -1946,7 +2010,7 @@ msgid "Pa&ge scrolling"
 msgstr "Derulare pa&gină"
 
 msgid "Center &scrolling"
-msgstr ""
+msgstr "Centreaza &scrolling"
 
 msgid "&Mouse page scrolling"
 msgstr "Derulare pagină cu ajutorul &mausului"
@@ -1999,7 +2063,7 @@ msgid "User &mini status"
 msgstr "&Mini-status utilizator"
 
 msgid "Listing format"
-msgstr ""
+msgstr "formatul de listare"
 
 msgid "Executable &first"
 msgstr "Mai întâ&i executabilele"
@@ -2478,6 +2542,9 @@ msgid ""
 "\n"
 "Option Stable Symlinks will be disabled"
 msgstr ""
+"Nu pot face symlink-uri stabile în sistemele de fișiere non-locale:\n"
+"\n"
+"Opțiunea symlink-uri stabile va fi dezactivată"
 
 #, c-format
 msgid ""
@@ -2487,12 +2554,33 @@ msgstr ""
 "Nu se poate crea legătura destinație \"%s\"\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"și\n"
+"\"%s\"\n"
+"sunt în același dosar"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"și\n"
+"\"%s\"\n"
+"sunt același fișier"
+
 msgid "Ski&p all"
 msgstr "Sări t&ot"
 
-msgid "&Retry"
-msgstr "&Reîncearcă"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2516,23 +2604,19 @@ msgstr "&Nimic"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Nu se poate găsi fișierul \"%s\"\n"
+"Nu se poate șterge fișierul \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"și\n"
-"\"%s\"\n"
-"sunt același fișier"
+"Nu se poate găsi fișierul \"%s\"\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2548,36 +2632,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nu se poate șterge fișierul \"%s\"\n"
+"Nu se poate șterge dosarul \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nu se poate șterge fișierul \"%s\"\n"
+"Nu se poate suprascrie dosarul \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Nu se poate șterge dosarul \"%s\"\n"
+"Nu se poate suprascrie fișierul \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Nu se poate suprascrie dosarul \"%s\"\n"
+"Nu se poate muta dosarul \"%s\" în \"%s\"\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Nu se poate acționa asupra \"..\"!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2658,6 +2745,8 @@ msgid ""
 "Cannot read source file \"%s\"\n"
 "%s"
 msgstr ""
+"Nu se poate citi fișierul sursă \"%s\"\n"
+"%s"
 
 #, c-format
 msgid ""
@@ -2741,40 +2830,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"și\n"
-"\"%s\"\n"
-"sunt în același dosar"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Nu se poate suprascrie fișierul \"%s\"\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Nu se poate muta dosarul \"%s\" în \"%s\"\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Directoare: %zu, mărime totală: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Nu se poate acționa asupra \"..\"!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Scuze, nu am putut pune sarcina în fundal"
 
@@ -2922,7 +2980,7 @@ msgstr "&Editare - F4"
 
 #, c-format
 msgid "Found: %lu"
-msgstr ""
+msgstr "Găsit : %lu"
 
 msgid "Malformed regular expression"
 msgstr "Expresie regulată incorectă"
@@ -2973,9 +3031,9 @@ msgstr "Terminat"
 #, c-format
 msgid "Finished (ignored %zu directory)"
 msgid_plural "Finished (ignored %zu directories)"
-msgstr[0] ""
-msgstr[1] ""
-msgstr[2] ""
+msgstr[0] "Finalizat (au fost ignorate %zu dosar)"
+msgstr[1] "Finalizat (au fost ignorate %zu dosare)"
+msgstr[2] "Finalizat (au fost ignorate %zu dosare)"
 
 msgid "Searching"
 msgstr "Caut"
@@ -3137,9 +3195,9 @@ msgstr "Mărime: %s"
 #, c-format
 msgid " (%lu block)"
 msgid_plural " (%lu blocks)"
-msgstr[0] ""
-msgstr[1] ""
-msgstr[2] ""
+msgstr[0] " (%lu bloc)"
+msgstr[1] " (%lu blocuri)"
+msgstr[2] " (%lu blocuri)"
 
 #, c-format
 msgid "Owner:      %s/%s"
@@ -3206,7 +3264,7 @@ msgid "&Info"
 msgstr "&Info"
 
 msgid "&Listing format..."
-msgstr ""
+msgstr "formatul de  &listare "
 
 msgid "&Sort order..."
 msgstr "&Ordinea sortării..."
@@ -3373,9 +3431,9 @@ msgstr "Panouri:"
 #, c-format
 msgid "You have %zu opened screen. Quit anyway?"
 msgid_plural "You have %zu opened screens. Quit anyway?"
-msgstr[0] ""
-msgstr[1] ""
-msgstr[2] ""
+msgstr[0] "Ai %zu ecran deschis. Închizi oricum?"
+msgstr[1] "Ai %zu ecrane deschise. Închizi oricum?"
+msgstr[2] "Ai %zu ecrane deschise. Închizi oricum?"
 
 msgid "The Midnight Commander"
 msgstr "Midnight Commander"
@@ -3835,7 +3893,7 @@ msgid "Home directory:"
 msgstr "Director acasă:"
 
 msgid "Profile root directory:"
-msgstr ""
+msgstr "Director rădăcină:"
 
 msgid "System data"
 msgstr "Date sistem"
@@ -4189,12 +4247,16 @@ msgid "sftp: Password is empty."
 msgstr "sftp: Parola este goală."
 
 msgid "sftp: Failure establishing SSH session"
-msgstr ""
+msgstr "sftp: Eroare la stabilirea unei sesiuni SSH"
 
 msgid "sftp: No file handler data present for reading file"
 msgstr "sftp: Nu există date de manipulare a citirii fișierului"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G întrerupe) Afișare... %s"
 
@@ -4390,6 +4452,8 @@ msgid ""
 "Failed to read data from child stdout:\n"
 "%s"
 msgstr ""
+"Eroare la citirea datelor de la stdout-ul copil:\n"
+"%s"
 
 #, c-format
 msgid ""
Binary files mc-4.8.20/po/ru.gmo and mc-4.8.21/po/ru.gmo differ
diff -urpN mc-4.8.20/po/ru.po mc-4.8.21/po/ru.po
--- mc-4.8.20/po/ru.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/ru.po	2018-06-03 11:03:46.000000000 +0200
@@ -16,6 +16,7 @@
 # Mr GreyWolf, 2016
 # Mr.GreyWolf, 2016
 # NaiLi (aka jamesjames) Rootaerc <theism@mail.ru>, 2012
+# Piotr Drąg <piotrdrag@gmail.com>, 2018
 # Sergey Panov <sipan@mit.edu>, 1999
 # Simple88, 2016
 # Simple88, 2016
@@ -25,9 +26,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
-"Last-Translator: aborodin <aborodin@vmail.ru>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Russian (http://www.transifex.com/mc/mc/language/ru/)\n"
 "Language: ru\n"
 "MIME-Version: 1.0\n"
@@ -674,6 +675,9 @@ msgstr "Распечатать пара
 msgid "Print last working directory to specified file"
 msgstr "Записать последний рабочий каталог в указанный файл"
 
+msgid "<file>"
+msgstr "<файл>"
+
 msgid "Enables subshell support (default)"
 msgstr "Включить поддержку встроенной командной оболочки (по умолчанию)"
 
@@ -686,12 +690,18 @@ msgstr "Записывать диало
 msgid "Set debug level"
 msgstr "Установить уровень отладки"
 
+msgid "<integer>"
+msgstr "<целое число>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Просматривать файл"
 
 msgid "Edit files"
 msgstr "Редактировать файлы"
 
+msgid "<file> ..."
+msgstr "<файл> ..."
+
 msgid "Forces xterm features"
 msgstr "Подразумевать свойства xterm"
 
@@ -732,6 +742,9 @@ msgstr "Принудительно ус
 msgid "Specifies a color configuration"
 msgstr "Определить настройки цветов"
 
+msgid "<string>"
+msgstr "<строка>"
+
 msgid "Show mc with specified skin"
 msgstr "Отобразить mc с указанным скином"
 
@@ -1658,8 +1671,8 @@ msgstr ""
 "Текстовый редактор с дружественным интерфейсом пользователя.\n"
 "Создан для Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "О программе"
@@ -1846,6 +1859,15 @@ msgstr ""
 "Невозможно изменить режим доступа к \"%s\"\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "&Игнорировать"
+
+msgid "Ignore &all"
+msgstr "Игнорировать в&сё"
+
+msgid "&Retry"
+msgstr "По&вторить"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1938,6 +1960,9 @@ msgstr "Смена &каталога п
 msgid "Sa&fe delete"
 msgstr "Безопасное &удаление"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "&Автосохранение настроек"
 
@@ -2541,12 +2566,33 @@ msgstr ""
 "Невозможно создать целевую симв. ссылку \"%s\"\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"и\n"
+"\"%s\"\n"
+"один и тот же каталог"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"и\n"
+"\"%s\"\n"
+"один и тот же файл"
+
 msgid "Ski&p all"
 msgstr "Пропустить вс&ё"
 
-msgid "&Retry"
-msgstr "По&вторить"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2570,23 +2616,19 @@ msgstr "Ни &одного"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Невозможно получить свойства файла \"%s\"\n"
+"Невозможно удалить файл \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"и\n"
-"\"%s\"\n"
-"один и тот же файл"
+"Невозможно получить свойства файла \"%s\"\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2602,36 +2644,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Невозможно удалить файл \"%s\"\n"
+"Невозможно удалить каталог \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Невозможно удалить файл \"%s\"\n"
+"Невозможно переписать каталог \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Невозможно удалить каталог \"%s\"\n"
+"Невозможно переписать файл \"%s\"\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Невозможно переписать каталог \"%s\"\n"
+"Невозможно переместить каталог \"%s\" в \"%s\"\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Эту операцию невозможно выполнить на \"..\"!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2797,40 +2842,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"и\n"
-"\"%s\"\n"
-"один и тот же каталог"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Невозможно переписать файл \"%s\"\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Невозможно переместить каталог \"%s\" в \"%s\"\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Каталоги: %zu, общий объём: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Эту операцию невозможно выполнить на \"..\"!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Извините, сделать это в фоновом режиме невозможно"
 
@@ -4252,6 +4266,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: нет обработчика считываемого файла"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: ошибка сокета: %s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: чтение списка файлов (прерывание по Ctrl-G)... %s"
 
Binary files mc-4.8.20/po/sk.gmo and mc-4.8.21/po/sk.gmo differ
diff -urpN mc-4.8.20/po/sk.po mc-4.8.21/po/sk.po
--- mc-4.8.20/po/sk.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/sk.po	2018-06-03 11:03:46.000000000 +0200
@@ -14,15 +14,16 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-23 18:02+0000\n"
-"Last-Translator: Jose Riha <jose1711@gmail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Slovak (http://www.transifex.com/mc/mc/language/sk/)\n"
 "Language: sk\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=3; plural=(n==1) ? 0 : (n>=2 && n<=4) ? 1 : 2;\n"
+"Plural-Forms: nplurals=4; plural=(n % 1 == 0 && n == 1 ? 0 : n % 1 == 0 && n "
+">= 2 && n <= 4 ? 1 : n % 1 != 0 ? 2: 3);\n"
 
 # "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 msgid "Warning: cannot load codepages list"
@@ -658,6 +659,9 @@ msgstr "Vypísať konfiguráciu"
 msgid "Print last working directory to specified file"
 msgstr "Tlačiť posledný pracovný adresár do zadaného súboru"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Zapína podporu pre subshell (štandardne)"
 
@@ -670,12 +674,18 @@ msgstr "Zapisovať protokol dialógu ftp
 msgid "Set debug level"
 msgstr "Nastaviť ladiacu úroveň"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Spustí prehliadač súborov na súbore"
 
 msgid "Edit files"
 msgstr "Upraviť súbory"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Vynúti funkcie xterm"
 
@@ -716,6 +726,9 @@ msgstr "Požiadavky spúšťať vo fareb
 msgid "Specifies a color configuration"
 msgstr "Určuje farebnú konfiguráciu"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Zobraziť mc s uvedenou témou vzhľadu"
 
@@ -1639,8 +1652,8 @@ msgstr ""
 "Používateľsky prívetivý textový editor\n"
 "napísaný pre Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "O aplikácii"
@@ -1827,6 +1840,15 @@ msgstr ""
 "Nemožno vykonať chmod „%s“\n"
 "%s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Zopakovať"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1919,6 +1941,9 @@ msgstr "Cd nasleduje od&kazy"
 msgid "Sa&fe delete"
 msgstr "&Bezpečné zmazanie"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "A&utomaticky ukladať konfiguráciu"
 
@@ -2519,12 +2544,33 @@ msgstr ""
 "Nemožno vytvoriť cieľový sym. odkaz „%s“\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"„%s“\n"
+"a\n"
+"„%s“\n"
+"sú rovnaký adresár"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"„%s“\n"
+"a\n"
+"„%s“\n"
+"sú rovnaký súbor"
+
 msgid "Ski&p all"
 msgstr "&Preskočiť všetky"
 
-msgid "&Retry"
-msgstr "&Zopakovať"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2548,23 +2594,19 @@ msgstr "Žiadn&e"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Nemožno vykonať stat() súboru „%s“\n"
+"Nemožno odstrániť súbor „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"„%s“\n"
-"a\n"
-"„%s“\n"
-"sú rovnaký súbor"
+"Nemožno vykonať stat() súboru „%s“\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2580,36 +2622,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nemožno odstrániť súbor „%s“\n"
+"Nemožno odstrániť adresár „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Nemožno zmazať súbor „%s“\n"
+"Nemožno prepísať adresár „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Nemožno odstrániť adresár „%s“\n"
+"Nemožno prepísať súbor „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Nemožno prepísať adresár „%s“\n"
+"Nemožno presunúť adresár „%s“ do „%s“\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Nemožno vykonať operáciu na „..“!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2773,40 +2818,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"„%s“\n"
-"a\n"
-"„%s“\n"
-"sú rovnaký adresár"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Nemožno prepísať súbor „%s“\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Nemožno presunúť adresár „%s“ do „%s“\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Nemožno vykonať operáciu na „..“!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Ľutujeme, nepodarilo sa presunúť úlohu do pozadia"
 
@@ -3008,6 +3022,7 @@ msgid_plural "Finished (ignored %zu dire
 msgstr[0] ""
 msgstr[1] ""
 msgstr[2] ""
+msgstr[3] ""
 
 msgid "Searching"
 msgstr "Hľadá sa"
@@ -3172,6 +3187,7 @@ msgid_plural " (%lu blocks)"
 msgstr[0] ""
 msgstr[1] ""
 msgstr[2] ""
+msgstr[3] ""
 
 #, c-format
 msgid "Owner:      %s/%s"
@@ -3408,6 +3424,7 @@ msgid_plural "You have %zu opened screen
 msgstr[0] ""
 msgstr[1] ""
 msgstr[2] ""
+msgstr[3] ""
 
 msgid "The Midnight Commander"
 msgstr "Midnight Commander"
@@ -3556,6 +3573,7 @@ msgid_plural "%s in %d files"
 msgstr[0] "%s v %d súboroch"
 msgstr[1] "%s v %d súboroch"
 msgstr[2] "%s v %d súboroch"
+msgstr[3] "%s v %d súboroch"
 
 msgid "Panelize"
 msgstr "Panelizovať"
@@ -4226,6 +4244,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Na čítanie súboru nie sú prítomné dáta obsluhy súboru"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G preruší) Výpis... %s"
 
Binary files mc-4.8.20/po/sl.gmo and mc-4.8.21/po/sl.gmo differ
diff -urpN mc-4.8.20/po/sl.po mc-4.8.21/po/sl.po
--- mc-4.8.20/po/sl.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/sl.po	2018-06-03 11:03:46.000000000 +0200
@@ -10,8 +10,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Slovenian (http://www.transifex.com/mc/mc/language/sl/)\n"
 "Language: sl\n"
@@ -641,6 +641,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr "Izpiše zadnji delavni imenik v navedeno datoteko"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Vklopi podporo za podlupino (privzeto)"
 
@@ -653,12 +656,18 @@ msgstr "Zapiše dnevnik ftp dialogov v d
 msgid "Set debug level"
 msgstr "Nastavi stopnjo razhroščevanja"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Zažene pogled datoteke"
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Prisili uporabo xterm dodatkov"
 
@@ -698,6 +707,9 @@ msgstr "Prošnja za izvajanje v barvnem
 msgid "Specifies a color configuration"
 msgstr "Določi nastavitve barv"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1563,7 +1575,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1743,6 +1755,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "Poskusi &znova"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1833,6 +1854,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2410,11 +2434,24 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
-msgstr "Poskusi &znova"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
+msgstr ""
 
 #, c-format
 msgid ""
@@ -2434,16 +2471,14 @@ msgstr "&Brez"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2458,28 +2493,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2607,32 +2645,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -4035,6 +4050,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/sr.gmo and mc-4.8.21/po/sr.gmo differ
diff -urpN mc-4.8.20/po/sr.po mc-4.8.21/po/sr.po
--- mc-4.8.20/po/sr.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/sr.po	2018-06-03 11:03:46.000000000 +0200
@@ -9,8 +9,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Serbian (http://www.transifex.com/mc/mc/language/sr/)\n"
 "Language: sr\n"
@@ -653,6 +653,9 @@ msgstr "Исписује могућно
 msgid "Print last working directory to specified file"
 msgstr "Исписује последњи радни директоријум у наведеној датотеци"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Укључује подршку за подљуске (основно)"
 
@@ -665,12 +668,18 @@ msgstr "Бележи садржај фт
 msgid "Set debug level"
 msgstr "Подешава ниво прочишћавања"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Покреће прегледач датотека над датотеком"
 
 msgid "Edit files"
 msgstr "Уређује датотеке"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Захтева функције Х терминала"
 
@@ -710,6 +719,9 @@ msgstr "Захтева покретањ
 msgid "Specifies a color configuration"
 msgstr "Наводи подешавања боја"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Приказује поноћног наредника са наведеном маском"
 
@@ -1631,7 +1643,7 @@ msgstr ""
 "Уређивач текста наклоњен кориснику\n"
 "написан за Поноћног наредника."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1819,6 +1831,15 @@ msgstr ""
 "Не могу да променим режим „%s“\n"
 "%s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "Пробај &поново"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1911,6 +1932,9 @@ msgstr "Цд прати &везе"
 msgid "Sa&fe delete"
 msgstr "&Безбедно брисање"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "&Сам сачувај подешавања"
 
@@ -2510,12 +2534,33 @@ msgstr ""
 "Не могу да направим циљну симболичку везу „%s“\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"„%s“\n"
+"и\n"
+"„%s“\n"
+"су један исти директоријум"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"„%s“\n"
+"и\n"
+"„%s“\n"
+"су једна иста датотека"
+
 msgid "Ski&p all"
 msgstr "Прескочи &све"
 
-msgid "&Retry"
-msgstr "Пробај &поново"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2539,23 +2584,19 @@ msgstr "&Ништа"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Не могу да добијем податке о датотеци „%s“\n"
+"Не могу да уклоним датотеку „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"„%s“\n"
-"и\n"
-"„%s“\n"
-"су једна иста датотека"
+"Не могу да добијем податке о датотеци „%s“\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2571,36 +2612,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Не могу да уклоним датотеку „%s“\n"
+"Не могу да уклоним директоријум „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Не могу да обришем датотеку „%s“\n"
+"Не могу да препишем директоријум „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Не могу да уклоним директоријум „%s“\n"
+"Не могу да препишем датотеку „%s“\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Не могу да препишем директоријум „%s“\n"
+"Не могу да преместим директоријум „%s“ у „%s“\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Не могу да радим над \"..\"!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2764,40 +2808,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"„%s“\n"
-"и\n"
-"„%s“\n"
-"су један исти директоријум"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Не могу да препишем датотеку „%s“\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Не могу да преместим директоријум „%s“ у „%s“\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Не могу да радим над \"..\"!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Извините, не могу да поставим посао у позадину"
 
@@ -4216,6 +4229,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Нема података руковаоца датотеком за читање датотеке"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ктрл-Г прекида) Исписујем... %s"
 
Binary files mc-4.8.20/po/sv.gmo and mc-4.8.21/po/sv.gmo differ
diff -urpN mc-4.8.20/po/sv.po mc-4.8.21/po/sv.po
--- mc-4.8.20/po/sv.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/sv.po	2018-06-03 11:03:46.000000000 +0200
@@ -14,9 +14,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
-"Last-Translator: Jonas Hultén <jonas@kollektivet.nu>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Swedish (http://www.transifex.com/mc/mc/language/sv/)\n"
 "Language: sv\n"
 "MIME-Version: 1.0\n"
@@ -664,6 +664,9 @@ msgstr "Skriv ut configure-alternativ"
 msgid "Print last working directory to specified file"
 msgstr "Skriv ut senaste arbetskatalog till angiven fil"
 
+msgid "<file>"
+msgstr "<fil>"
+
 msgid "Enables subshell support (default)"
 msgstr "Aktiverar stöd för underskal (standardval)"
 
@@ -676,12 +679,18 @@ msgstr "Logga ftpdialog till specificera
 msgid "Set debug level"
 msgstr "Ställ in felsökningsnivå"
 
+msgid "<integer>"
+msgstr "<heltal>"
+
 msgid "Launches the file viewer on a file"
 msgstr "Startar filvisaren"
 
 msgid "Edit files"
 msgstr "Redigera filer"
 
+msgid "<file> ..."
+msgstr "<fil> ..."
+
 msgid "Forces xterm features"
 msgstr "Tvinga fram xtermfinesser"
 
@@ -724,6 +733,9 @@ msgstr "Begär att få köra i färgläg
 msgid "Specifies a color configuration"
 msgstr "Specificera en färgkonfiguration"
 
+msgid "<string>"
+msgstr "<sträng>"
+
 msgid "Show mc with specified skin"
 msgstr "Visa mc med specificerat tema"
 
@@ -1645,8 +1657,8 @@ msgstr ""
 "En användarvänlig texteditor\n"
 "skriven för Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "Om"
@@ -1833,6 +1845,15 @@ msgstr ""
 "Chmod \"%s\" misslyckades\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "I&gnorera"
+
+msgid "Ignore &all"
+msgstr "Ignorera a&lla"
+
+msgid "&Retry"
+msgstr "Försök &igen"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1925,6 +1946,9 @@ msgstr "&Cd följer länkar"
 msgid "Sa&fe delete"
 msgstr "S&äker borttagning"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "A&utospara inställningar"
 
@@ -2528,12 +2552,33 @@ msgstr ""
 "Skapandet av mål-symlänken \"%s\" misslyckades\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"och\n"
+"\"%s\"\n"
+"är samma katalog"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"och\n"
+"\"%s\"\n"
+"är samma fil"
+
 msgid "Ski&p all"
 msgstr "Ho&ppa över alla"
 
-msgid "&Retry"
-msgstr "Försök &igen"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2557,23 +2602,19 @@ msgstr "&Ingen"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Stat misslyckades på filen \"%s\"\n"
+"Borttagning av filen \"%s\" misslyckades\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"och\n"
-"\"%s\"\n"
-"är samma fil"
+"Stat misslyckades på filen \"%s\"\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2589,36 +2630,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Borttagning av filen \"%s\" misslyckades\n"
+"Borttagning av katalogen \"%s\" misslyckades\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Borttagning av filen \"%s\" misslyckades\n"
+"Katalogen \"%s\" kan inte skrivas över\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"Borttagning av katalogen \"%s\" misslyckades\n"
+"Att skriva över filen \"%s\" misslyckades\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Katalogen \"%s\" kan inte skrivas över\n"
+"Att flytta katalogen \"%s\" till \"%s\" misslyckades\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Kan inte använda \"..\"!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2784,40 +2828,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"och\n"
-"\"%s\"\n"
-"är samma katalog"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"Att skriva över filen \"%s\" misslyckades\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Att flytta katalogen \"%s\" till \"%s\" misslyckades\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Kataloger: %zu, total storlek: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Kan inte använda \"..\"!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Jobbet kunde tyvärr inte göras i bakgrunden"
 
@@ -4231,6 +4244,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Ingen filhanterardata existerar för läsning av filen"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp: socket-fel: %s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G avbryter) Listar... %s"
 
Binary files mc-4.8.20/po/szl.gmo and mc-4.8.21/po/szl.gmo differ
diff -urpN mc-4.8.20/po/szl.po mc-4.8.21/po/szl.po
--- mc-4.8.20/po/szl.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/szl.po	2018-06-03 11:03:46.000000000 +0200
@@ -7,8 +7,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-05-03 01:03+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Silesian (http://www.transifex.com/mc/mc/language/szl/)\n"
 "Language: szl\n"
@@ -629,6 +629,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -641,12 +644,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr ""
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr ""
 
@@ -686,6 +695,9 @@ msgstr ""
 msgid "Specifies a color configuration"
 msgstr ""
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1551,7 +1563,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1731,6 +1743,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1821,6 +1842,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2398,10 +2422,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2422,16 +2459,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2446,28 +2481,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2595,32 +2633,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -3981,6 +3996,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/ta.gmo and mc-4.8.21/po/ta.gmo differ
diff -urpN mc-4.8.20/po/ta.po mc-4.8.21/po/ta.po
--- mc-4.8.20/po/ta.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/ta.po	2018-06-03 11:03:46.000000000 +0200
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Tamil (http://www.transifex.com/mc/mc/language/ta/)\n"
 "Language: ta\n"
@@ -629,6 +629,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -641,12 +644,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr ""
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr ""
 
@@ -686,6 +695,9 @@ msgstr ""
 msgid "Specifies a color configuration"
 msgstr ""
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1551,7 +1563,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1731,6 +1743,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1821,6 +1842,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2398,10 +2422,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2422,16 +2459,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2446,28 +2481,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2595,32 +2633,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -3977,6 +3992,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/te.gmo and mc-4.8.21/po/te.gmo differ
diff -urpN mc-4.8.20/po/te.po mc-4.8.21/po/te.po
--- mc-4.8.20/po/te.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/te.po	2018-06-03 11:03:46.000000000 +0200
@@ -7,8 +7,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-05-03 01:03+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Telugu (http://www.transifex.com/mc/mc/language/te/)\n"
 "Language: te\n"
@@ -628,6 +628,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -640,12 +643,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr ""
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr ""
 
@@ -685,6 +694,9 @@ msgstr ""
 msgid "Specifies a color configuration"
 msgstr ""
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1550,7 +1562,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1730,6 +1742,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1820,6 +1841,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2397,10 +2421,23 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
 msgstr ""
 
 #, c-format
@@ -2421,16 +2458,14 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2445,28 +2480,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2594,32 +2632,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -3976,6 +3991,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/tr.gmo and mc-4.8.21/po/tr.gmo differ
diff -urpN mc-4.8.20/po/tr.po mc-4.8.21/po/tr.po
--- mc-4.8.20/po/tr.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/tr.po	2018-06-03 11:03:46.000000000 +0200
@@ -13,9 +13,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-11-05 02:24+0000\n"
-"Last-Translator: yusuf <yusuf.aydemir@pisilinux.org>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
+"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Turkish (http://www.transifex.com/mc/mc/language/tr/)\n"
 "Language: tr\n"
 "MIME-Version: 1.0\n"
@@ -656,6 +656,9 @@ msgstr "Yazdırma yapılandırma seçene
 msgid "Print last working directory to specified file"
 msgstr "Belirlenen dosyaya son çalışılan dizini yaz"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Altkabuk desteğini etkinleştirir (öntanımlı)"
 
@@ -668,12 +671,18 @@ msgstr "ftp dialog günlüğünü belirt
 msgid "Set debug level"
 msgstr "Hata ayıklama seviyesini ayarla"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Bir dosyayı dosya göstericide açar"
 
 msgid "Edit files"
 msgstr "Dosyasyaları düzenle"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "xterm özelliklerini etkinleştirir"
 
@@ -713,6 +722,9 @@ msgstr "Renkli kipte çalıştırma iste
 msgid "Specifies a color configuration"
 msgstr "Bir renk yapılandırması belirtir"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Mc'yi belirtilen önyüz ile göster"
 
@@ -1638,8 +1650,8 @@ msgstr ""
 "Kullanıcı dostu bir metin düzenleyici\n"
 "Midnight Commander için yazıldı"
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Telif hakkı (C) 1996-2016 Özgür Yazılım Vakfı"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "Hakkında"
@@ -1828,6 +1840,15 @@ msgstr ""
 "chmod \"%s\" yapılamadı \n"
 " %s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Tekrar"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1920,6 +1941,9 @@ msgstr "cd &Bağları izler"
 msgid "Sa&fe delete"
 msgstr "güvenilir si&lme"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "&Ayarları otomatik kaydet"
 
@@ -2523,12 +2547,33 @@ msgstr ""
 "Hedef sembolik bağ \"%s\" oluşturulamıyor \n"
 " %s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"\"%s\"\n"
+"ve\n"
+"\"%s\"\n"
+"aynı dizin"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"\"%s\"\n"
+"ve \n"
+"\"%s\"\n"
+"aynı dosya"
+
 msgid "Ski&p all"
 msgstr "Tümünü atla"
 
-msgid "&Retry"
-msgstr "&Tekrar"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2552,23 +2597,19 @@ msgstr "&hiçbiri"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"\"%s\" dosyası durumlanamıyor \n"
+"\"%s\" dosyası silinemiyor \n"
 " %s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"\"%s\"\n"
-"ve \n"
-"\"%s\"\n"
-"aynı dosya"
+"\"%s\" dosyası durumlanamıyor \n"
+" %s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2584,35 +2625,38 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"\"%s\" dosyası silinemiyor \n"
+"\"%s\" dizini silinemiyor \n"
 " %s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"\"%s\" dosyası silinemiyor \n"
-" %s"
+"\"%s\" dizininin üstüne yazılamıyor \n"
+"%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"\"%s\" dizini silinemiyor \n"
-" %s"
+"\"%s\" dosyasının üstüne yazılamadı\n"
+"%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"\"%s\" dizininin üstüne yazılamıyor \n"
-"%s"
+"\"%s\" dizini \"%s\"e taşınamıyor \n"
+" %s"
+
+msgid "Cannot operate on \"..\"!"
+msgstr "\"..\" üzerinde işlem yapılamıyor!"
 
 #, c-format
 msgid ""
@@ -2779,40 +2823,9 @@ msgstr ""
 " %s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"\"%s\"\n"
-"ve\n"
-"\"%s\"\n"
-"aynı dizin"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"\"%s\" dosyasının üstüne yazılamadı\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"\"%s\" dizini \"%s\"e taşınamıyor \n"
-" %s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Dizinler:%zu, toplam boyut:%s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "\"..\" üzerinde işlem yapılamıyor!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "İş artalana konulamadı"
 
@@ -4228,6 +4241,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Dosya okumak için hiç dosya işleyici verisi mevcut değil "
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (kesmek için Ctrl-G) Listeleniyor... %s"
 
Binary files mc-4.8.20/po/uk.gmo and mc-4.8.21/po/uk.gmo differ
diff -urpN mc-4.8.20/po/uk.po mc-4.8.21/po/uk.po
--- mc-4.8.20/po/uk.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/uk.po	2018-06-03 11:03:46.000000000 +0200
@@ -12,16 +12,18 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Ukrainian (http://www.transifex.com/mc/mc/language/uk/)\n"
 "Language: uk\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n"
-"%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);\n"
+"Plural-Forms: nplurals=4; plural=(n % 1 == 0 && n % 10 == 1 && n % 100 != "
+"11 ? 0 : n % 1 == 0 && n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 12 || n % "
+"100 > 14) ? 1 : n % 1 == 0 && (n % 10 ==0 || (n % 10 >=5 && n % 10 <=9) || "
+"(n % 100 >=11 && n % 100 <=14 )) ? 2: 3);\n"
 
 # "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 msgid "Warning: cannot load codepages list"
@@ -662,6 +664,9 @@ msgstr "Показати парамет
 msgid "Print last working directory to specified file"
 msgstr "Показати останній робочий каталог у вказаний файл"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Вмикає підтримку вкладеної оболонки (стандартно)"
 
@@ -674,12 +679,18 @@ msgstr "Журналювати кома
 msgid "Set debug level"
 msgstr "Встановити рівень відлагоджування"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Запускає програму перегляду для файлу"
 
 msgid "Edit files"
 msgstr "Редагувати файли"
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Нав’язує властивості xterm"
 
@@ -719,6 +730,9 @@ msgstr "Запит на запуск у
 msgid "Specifies a color configuration"
 msgstr "Вказує конфігурацію кольорів"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr "Показати mc із обраною обкладинкою"
 
@@ -1621,8 +1635,8 @@ msgstr ""
 "Дружній до користувача редактор тексту\n"
 "написаний для Midnight Commander."
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "Авторські права (C) 1996-2016 за Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr ""
 
 msgid "About"
 msgstr "Про програму"
@@ -1808,6 +1822,15 @@ msgstr ""
 "Не вдалося змінити права на «%s» \n"
 "%s"
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "По&вторити"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1900,6 +1923,9 @@ msgstr "Зміна &каталогу з
 msgid "Sa&fe delete"
 msgstr "Безпечне &видалення"
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr "&Автозбереження параметрів"
 
@@ -2498,12 +2524,33 @@ msgstr ""
 "Не вдалося створити цільове символьне посилання «%s»\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"«%s»\n"
+"та\n"
+"«%s» \n"
+"є одним і тим же каталогом"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"«%s»\n"
+"та\n"
+"«%s»\n"
+"є одним і тим же файлом "
+
 msgid "Ski&p all"
 msgstr "П&ропустити все"
 
-msgid "&Retry"
-msgstr "По&вторити"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2527,23 +2574,19 @@ msgstr "Ж&oдного"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"Не вдалося отримати властивості файлу «%s»\n"
+"Не вдалося видалити файл «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"«%s»\n"
-"та\n"
-"«%s»\n"
-"є одним і тим же файлом "
+"Не вдалося отримати властивості файлу «%s»\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2559,36 +2602,37 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"Не вдалося видалити файл «%s»\n"
+"Не вдалося видалити каталог «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"Не вдалося видалити файл «%s»\n"
+"Не вдалося перезаписати каталог «%s»\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
-"%s"
-msgstr ""
-"Не вдалося видалити каталог «%s»\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
+msgstr "Не вдалося перезаписати файл «%s» %s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"Не вдалося перезаписати каталог «%s»\n"
+"Не вдалося перенести каталог «%s» у «%s»\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "Не можна виконувати операції з «..»"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2754,38 +2798,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"«%s»\n"
-"та\n"
-"«%s» \n"
-"є одним і тим же каталогом"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr "Не вдалося перезаписати файл «%s» %s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"Не вдалося перенести каталог «%s» у «%s»\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "Теки: %zu, загальний розмір: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "Не можна виконувати операції з «..»"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "Не вдалося помістити цей процес у фон"
 
@@ -2987,6 +3002,7 @@ msgid_plural "Finished (ignored %zu dire
 msgstr[0] "Завершено (ігнорований %zu каталог)"
 msgstr[1] "Завершено (ігноровано %zu каталогів)"
 msgstr[2] "Завершено (ігноровано %zu каталогів)"
+msgstr[3] "Завершено (ігноровано %zu каталогів)"
 
 msgid "Searching"
 msgstr "Виконується пошук"
@@ -3151,6 +3167,7 @@ msgid_plural " (%lu blocks)"
 msgstr[0] " (%lu блок)"
 msgstr[1] " (%lu блоків)"
 msgstr[2] " (%lu блоків)"
+msgstr[3] " (%lu блоків)"
 
 #, c-format
 msgid "Owner:      %s/%s"
@@ -3387,6 +3404,7 @@ msgid_plural "You have %zu opened screen
 msgstr[0] "Відкрито %zu екран. Все одно вийти?"
 msgstr[1] "Відкрито %zu екрани. Все одно вийти?"
 msgstr[2] "Відкрито %zu екранів. Все одно вийти?"
+msgstr[3] "Відкрито %zu екранів. Все одно вийти?"
 
 msgid "The Midnight Commander"
 msgstr "Midnight Commander"
@@ -3535,6 +3553,7 @@ msgid_plural "%s in %d files"
 msgstr[0] "%s у %d файлі"
 msgstr[1] "%s у %d файлах"
 msgstr[2] "%s у %d файлах"
+msgstr[3] "%s у %d файлах"
 
 msgid "Panelize"
 msgstr "Панелізувати"
@@ -4204,6 +4223,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: Немає даних про  оброблювач для читання файлу"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G перервати) Створення списку... %s"
 
Binary files mc-4.8.20/po/vi.gmo and mc-4.8.21/po/vi.gmo differ
diff -urpN mc-4.8.20/po/vi.po mc-4.8.21/po/vi.po
--- mc-4.8.20/po/vi.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/vi.po	2018-06-03 11:03:46.000000000 +0200
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Vietnamese (http://www.transifex.com/mc/mc/language/vi/)\n"
 "Language: vi\n"
@@ -631,6 +631,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr "Ghi thư mục làm việc cuối cùng vào tập tin chỉ ra"
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "Bật hỗ trợ shell con (mặc định)"
 
@@ -643,12 +646,18 @@ msgstr "Ghi hội thoại FTP vào một
 msgid "Set debug level"
 msgstr "Đặt mức độ tìm sửa lỗi (debug)"
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Xem tập tin"
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "Bắt buộc dùng tính năng của xterm"
 
@@ -688,6 +697,9 @@ msgstr "Yêu cầu chạy trong chế đ
 msgid "Specifies a color configuration"
 msgstr "Xác định cấu hình màu sắc"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1553,7 +1565,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1733,6 +1745,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Thử lại"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1823,6 +1844,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2400,11 +2424,24 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
-msgstr "&Thử lại"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
+msgstr ""
 
 #, c-format
 msgid ""
@@ -2424,16 +2461,14 @@ msgstr "&Không"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2448,28 +2483,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2597,32 +2635,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -4015,6 +4030,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/wa.gmo and mc-4.8.21/po/wa.gmo differ
diff -urpN mc-4.8.20/po/wa.po mc-4.8.21/po/wa.po
--- mc-4.8.20/po/wa.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/wa.po	2018-06-03 11:03:46.000000000 +0200
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Walloon (http://www.transifex.com/mc/mc/language/wa/)\n"
 "Language: wa\n"
@@ -629,6 +629,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr ""
 
@@ -641,12 +644,18 @@ msgstr ""
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "Enonder li håyneu di fitchî so on fitchî"
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr ""
 
@@ -686,6 +695,9 @@ msgstr "Fé roter e coleurs"
 msgid "Specifies a color configuration"
 msgstr "Dire avou kénès coleurs"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1551,7 +1563,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1731,6 +1743,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "&Rissayî"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1821,6 +1842,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2398,11 +2422,24 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
-msgstr "&Rissayî"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
+msgstr ""
 
 #, c-format
 msgid ""
@@ -2422,16 +2459,14 @@ msgstr "&Nouk"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2446,28 +2481,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2595,32 +2633,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -3999,6 +4014,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
Binary files mc-4.8.20/po/zh_CN.gmo and mc-4.8.21/po/zh_CN.gmo differ
diff -urpN mc-4.8.20/po/zh_CN.po mc-4.8.21/po/zh_CN.po
--- mc-4.8.20/po/zh_CN.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/zh_CN.po	2018-06-03 11:03:46.000000000 +0200
@@ -5,8 +5,9 @@
 # Translators:
 # Jacques Yip <cong-ye@163.com>, 2017
 # Jake Li <gnozil@gmail.com>, 2012
-# liushuyu011 <liushuyu011@gmail.com>, 2016
-# Mingcong Bai <jeffbai@aosc.xyz>, 2016
+# Kenneth Cheung <zjhken01@163.com>, 2018
+# shuyu liu <liushuyu011@gmail.com>, 2016
+# Mingcong Bai <jeffbai@aosc.xyz>, 2016,2018
 # qingxianhao <qinghao1@foxmail.com>, 2012
 # qingxianhao <qinghao1@foxmail.com>, 2012
 # Slava Zanko <slavazanko@gmail.com>, 2011
@@ -16,9 +17,9 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
-"Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-05-10 15:41+0000\n"
+"Last-Translator: Mingcong Bai <jeffbai@aosc.xyz>\n"
 "Language-Team: Chinese (China) (http://www.transifex.com/mc/mc/language/"
 "zh_CN/)\n"
 "Language: zh_CN\n"
@@ -111,19 +112,21 @@ msgstr ""
 msgid ""
 "Number out of range (should be in byte range, 0 <= n <= 0xFF, expressed in "
 "hex)"
-msgstr ""
+msgstr "数字超出范围 (应在byte范围中, 0<=n <=0xFF, 以十六进制表示)"
 
 msgid "Invalid character"
-msgstr ""
+msgstr "无效的字符"
 
 msgid "Unmatched quotes character"
-msgstr ""
+msgstr "没有与之匹配的引号"
 
 #, c-format
 msgid ""
 "Hex pattern error at position %d:\n"
 "%s."
 msgstr ""
+"于 %d 发现十六进制格式错误：\n"
+"%s。"
 
 msgid "Search string not found"
 msgstr "没有找到要搜索的字符串"
@@ -663,6 +666,9 @@ msgstr "打印配置选项"
 msgid "Print last working directory to specified file"
 msgstr "将工作目录打印到指定文件"
 
+msgid "<file>"
+msgstr "<file>"
+
 msgid "Enables subshell support (default)"
 msgstr "启用子 shell 支持(默认)"
 
@@ -675,12 +681,18 @@ msgstr "记录 ftp 对话到指定的文
 msgid "Set debug level"
 msgstr "设置调试级别"
 
+msgid "<integer>"
+msgstr "<integer>"
+
 msgid "Launches the file viewer on a file"
 msgstr "在文件上启动文件查看器"
 
 msgid "Edit files"
 msgstr "编辑文件"
 
+msgid "<file> ..."
+msgstr "<file> …"
+
 msgid "Forces xterm features"
 msgstr "强制使用 xterm 特性"
 
@@ -720,6 +732,9 @@ msgstr "请求运行在彩色模式"
 msgid "Specifies a color configuration"
 msgstr "指定颜色配置"
 
+msgid "<string>"
+msgstr "<string>"
+
 msgid "Show mc with specified skin"
 msgstr "用指定的皮肤显示 MC"
 
@@ -790,13 +805,13 @@ msgid "Color options"
 msgstr "颜色选项"
 
 msgid "[+lineno] file1[:lineno] [file2[:lineno]...]"
-msgstr ""
+msgstr "[+lineno] file1[:lineno] [file2[:lineno]...]"
 
 msgid "file"
 msgstr "文件"
 
 msgid "file1 file2"
-msgstr ""
+msgstr "文件1 文件2"
 
 msgid "[this_dir] [other_panel_dir]"
 msgstr "[this_dir] [other_panel_dir]"
@@ -1640,8 +1655,8 @@ msgstr ""
 "为 Midnight Commander 编写的\n"
 "一个界面友好的文本编辑器。"
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
-msgstr "版权所有 (C) 1996-2016 自由软件基金会"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
+msgstr "版权所有 (C) 1996-2018 自由软件基金会"
 
 msgid "About"
 msgstr "关于"
@@ -1827,6 +1842,15 @@ msgstr ""
 "无法 chmod“%s”\n"
 "%s"
 
+msgid "&Ignore"
+msgstr "忽略(&I)"
+
+msgid "Ignore &all"
+msgstr "全部忽略(&A)"
+
+msgid "&Retry"
+msgstr "重试(&R)"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1919,6 +1943,9 @@ msgstr "切换目录跟随链接(&K)"
 msgid "Sa&fe delete"
 msgstr "安全删除(&F)"
 
+msgid "Safe overwrite"
+msgstr "安全覆盖"
+
 msgid "A&uto save setup"
 msgstr "自动保存设置(&U)"
 
@@ -2029,7 +2056,7 @@ msgid "User &mini status"
 msgstr "用户简要状态(&M)"
 
 msgid "Listing format"
-msgstr ""
+msgstr "列表格式"
 
 msgid "Executable &first"
 msgstr "可执行文件优先(&f)"
@@ -2508,6 +2535,9 @@ msgid ""
 "\n"
 "Option Stable Symlinks will be disabled"
 msgstr ""
+"无法在非本地文件系统上创建稳定的符号链接：\n"
+"\n"
+"稳定符号链接选项将被禁用"
 
 #, c-format
 msgid ""
@@ -2517,12 +2547,33 @@ msgstr ""
 "无法创建目标符号链接“%s”\n"
 "%s"
 
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
+msgstr ""
+"“%s”\n"
+"和\n"
+"“%s”\n"
+"是同一个目录"
+
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+"“%s”\n"
+"和\n"
+"“%s”\n"
+"是同一个文件"
+
 msgid "Ski&p all"
 msgstr "路过全部(&I)"
 
-msgid "&Retry"
-msgstr "重试(&R)"
-
 #, c-format
 msgid ""
 "Directory \"%s\" not empty.\n"
@@ -2546,23 +2597,19 @@ msgstr "无(&E)"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
-"无法 stat 文件“%s”\n"
+"无法删除文件“%s”\n"
 "%s"
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
-"“%s”\n"
-"和\n"
-"“%s”\n"
-"是同一个文件"
+"无法 stat 文件“%s”\n"
+"%s"
 
 #, c-format
 msgid "Cannot overwrite directory \"%s\""
@@ -2578,36 +2625,39 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
-"无法删除文件“%s”\n"
+"无法删除目录“%s”\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
-"无法删除文件“%s”\n"
+"无法覆盖目录“%s”\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
-"无法删除目录“%s”\n"
+"无法覆盖文件“%s”\n"
 "%s"
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
-"无法覆盖目录“%s”\n"
+"无法移动目录“%s”到“%s”\n"
 "%s"
 
+msgid "Cannot operate on \"..\"!"
+msgstr "无法操作\"..\"!"
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2773,40 +2823,9 @@ msgstr ""
 "%s"
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-"“%s”\n"
-"和\n"
-"“%s”\n"
-"是同一个目录"
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-"无法覆盖文件“%s”\n"
-"%s"
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-"无法移动目录“%s”到“%s”\n"
-"%s"
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr "目录: %zu, 总体积: %s"
 
-msgid "Cannot operate on \"..\"!"
-msgstr "无法操作\"..\"!"
-
 msgid "Sorry, I could not put the job in background"
 msgstr "抱歉，无法将任务放到后台"
 
@@ -3234,7 +3253,7 @@ msgid "&Info"
 msgstr "信息(&I)"
 
 msgid "&Listing format..."
-msgstr ""
+msgstr "列表格式(&L)…"
 
 msgid "&Sort order..."
 msgstr "排序(&S)..."
@@ -3855,10 +3874,10 @@ msgid "Data types:"
 msgstr "数据类型: "
 
 msgid "Home directory:"
-msgstr ""
+msgstr "Home路径"
 
 msgid "Profile root directory:"
-msgstr ""
+msgstr "Profile根路径"
 
 msgid "System data"
 msgstr "系统数据"
@@ -4216,6 +4235,10 @@ msgid "sftp: No file handler data presen
 msgstr "sftp: 读取的文件没有指定处理程序"
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr "sftp：套接字错误：%s"
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr "sftp: (Ctrl-G 终止) 正在列出... %s"
 
Binary files mc-4.8.20/po/zh_TW.gmo and mc-4.8.21/po/zh_TW.gmo differ
diff -urpN mc-4.8.20/po/zh_TW.po mc-4.8.21/po/zh_TW.po
--- mc-4.8.20/po/zh_TW.po	2017-11-25 19:35:46.000000000 +0100
+++ mc-4.8.21/po/zh_TW.po	2018-06-03 11:03:46.000000000 +0200
@@ -8,8 +8,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Midnight Commander\n"
 "Report-Msgid-Bugs-To: http://www.midnight-commander.org/\n"
-"POT-Creation-Date: 2017-11-25 19:35+0100\n"
-"PO-Revision-Date: 2017-09-19 09:10+0000\n"
+"POT-Creation-Date: 2018-06-03 11:03+0200\n"
+"PO-Revision-Date: 2018-04-30 12:37+0000\n"
 "Last-Translator: Piotr Drąg <piotrdrag@gmail.com>\n"
 "Language-Team: Chinese (Taiwan) (http://www.transifex.com/mc/mc/language/"
 "zh_TW/)\n"
@@ -632,6 +632,9 @@ msgstr ""
 msgid "Print last working directory to specified file"
 msgstr ""
 
+msgid "<file>"
+msgstr ""
+
 msgid "Enables subshell support (default)"
 msgstr "支援使用次殼層 (預設值)"
 
@@ -644,12 +647,18 @@ msgstr "紀錄 FTP 對話框到特定檔
 msgid "Set debug level"
 msgstr ""
 
+msgid "<integer>"
+msgstr ""
+
 msgid "Launches the file viewer on a file"
 msgstr "對某個檔案執行檔案檢視程式"
 
 msgid "Edit files"
 msgstr ""
 
+msgid "<file> ..."
+msgstr ""
+
 msgid "Forces xterm features"
 msgstr "強迫使用 xterm 特性"
 
@@ -689,6 +698,9 @@ msgstr "要求在彩色模式中執行"
 msgid "Specifies a color configuration"
 msgstr "指定一組色彩設定"
 
+msgid "<string>"
+msgstr ""
+
 msgid "Show mc with specified skin"
 msgstr ""
 
@@ -1554,7 +1566,7 @@ msgid ""
 "written for the Midnight Commander."
 msgstr ""
 
-msgid "Copyright (C) 1996-2016 the Free Software Foundation"
+msgid "Copyright (C) 1996-2018 the Free Software Foundation"
 msgstr ""
 
 msgid "About"
@@ -1734,6 +1746,15 @@ msgid ""
 "%s"
 msgstr ""
 
+msgid "&Ignore"
+msgstr ""
+
+msgid "Ignore &all"
+msgstr ""
+
+msgid "&Retry"
+msgstr "重試"
+
 #, c-format
 msgid ""
 "Cannot chown \"%s\"\n"
@@ -1824,6 +1845,9 @@ msgstr ""
 msgid "Sa&fe delete"
 msgstr ""
 
+msgid "Safe overwrite"
+msgstr ""
+
 msgid "A&uto save setup"
 msgstr ""
 
@@ -2401,11 +2425,24 @@ msgid ""
 "%s"
 msgstr ""
 
-msgid "Ski&p all"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same directory"
 msgstr ""
 
-msgid "&Retry"
-msgstr "重試"
+#, c-format
+msgid ""
+"\"%s\"\n"
+"and\n"
+"\"%s\"\n"
+"are the same file"
+msgstr ""
+
+msgid "Ski&p all"
+msgstr ""
 
 #, c-format
 msgid ""
@@ -2425,16 +2462,14 @@ msgstr "無"
 
 #, c-format
 msgid ""
-"Cannot stat file \"%s\"\n"
+"Cannot remove file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same file"
+"Cannot stat file \"%s\"\n"
+"%s"
 msgstr ""
 
 #, c-format
@@ -2449,28 +2484,31 @@ msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove file \"%s\"\n"
+"Cannot remove directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot delete file \"%s\"\n"
+"Cannot overwrite directory \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot remove directory \"%s\"\n"
+"Cannot overwrite file \"%s\"\n"
 "%s"
 msgstr ""
 
 #, c-format
 msgid ""
-"Cannot overwrite directory \"%s\"\n"
+"Cannot move directory \"%s\" to \"%s\"\n"
 "%s"
 msgstr ""
 
+msgid "Cannot operate on \"..\"!"
+msgstr ""
+
 #, c-format
 msgid ""
 "Cannot stat source file \"%s\"\n"
@@ -2598,32 +2636,9 @@ msgid ""
 msgstr ""
 
 #, c-format
-msgid ""
-"\"%s\"\n"
-"and\n"
-"\"%s\"\n"
-"are the same directory"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot overwrite file \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
-msgid ""
-"Cannot move directory \"%s\" to \"%s\"\n"
-"%s"
-msgstr ""
-
-#, c-format
 msgid "Directories: %zu, total size: %s"
 msgstr ""
 
-msgid "Cannot operate on \"..\"!"
-msgstr ""
-
 msgid "Sorry, I could not put the job in background"
 msgstr ""
 
@@ -4012,6 +4027,10 @@ msgid "sftp: No file handler data presen
 msgstr ""
 
 #, c-format
+msgid "sftp: socket error: %s"
+msgstr ""
+
+#, c-format
 msgid "sftp: (Ctrl-G break) Listing... %s"
 msgstr ""
 
diff -urpN mc-4.8.20/src/Makefile.in mc-4.8.21/src/Makefile.in
--- mc-4.8.20/src/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/src/Makefile.in	2018-06-03 10:57:32.000000000 +0200
@@ -124,6 +124,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -131,6 +132,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/args.c mc-4.8.21/src/args.c
--- mc-4.8.20/src/args.c	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/src/args.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Handle command line arguments.
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -137,7 +137,7 @@ static const GOptionEntry argument_main_
      "printwd", 'P', G_OPTION_FLAG_IN_MAIN, G_OPTION_ARG_STRING,
      &mc_args__last_wd_file,
      N_("Print last working directory to specified file"),
-     "<file>"
+     N_("<file>")
     },
 
 #ifdef ENABLE_SUBSHELL
@@ -162,7 +162,7 @@ static const GOptionEntry argument_main_
      "ftplog", 'l', G_OPTION_FLAG_IN_MAIN, G_OPTION_ARG_STRING,
      &mc_args__netfs_logfile,
      N_("Log ftp dialog to specified file"),
-     "<file>"
+     N_("<file>")
     },
 #endif /* ENABLE_VFS_FTP */
 #ifdef ENABLE_VFS_SMB
@@ -170,7 +170,7 @@ static const GOptionEntry argument_main_
      "debuglevel", 'D', G_OPTION_FLAG_IN_MAIN, G_OPTION_ARG_INT,
      &mc_args__debug_level,
      N_("Set debug level"),
-     "<integer>"
+     N_("<integer>")
     },
 #endif /* ENABLE_VFS_SMB */
 
@@ -179,7 +179,7 @@ static const GOptionEntry argument_main_
      "view", 'v', G_OPTION_FLAG_IN_MAIN | G_OPTION_FLAG_NO_ARG, G_OPTION_ARG_CALLBACK,
      (gpointer) parse_mc_v_argument,
      N_("Launches the file viewer on a file"),
-     "<file>"
+     N_("<file>")
     },
 
     {
@@ -187,7 +187,7 @@ static const GOptionEntry argument_main_
      "edit", 'e', G_OPTION_FLAG_IN_MAIN | G_OPTION_FLAG_NO_ARG, G_OPTION_ARG_CALLBACK,
      (gpointer) parse_mc_e_argument,
      N_("Edit files"),
-     "<file> ..." },
+     N_("<file> ...") },
 
     {
      NULL, '\0', 0, 0, NULL, NULL, NULL /* Complete struct initialization */
@@ -264,7 +264,7 @@ static const GOptionEntry argument_termi
      "keymap", 'K', ARGS_TERM_OPTIONS, G_OPTION_ARG_STRING,
      &mc_args__keymap_file,
      N_("Load definitions of key bindings from specified file"),
-     "<file>"
+     N_("<file>")
     },
 
     {
@@ -306,14 +306,14 @@ static const GOptionEntry argument_color
      "colors", 'C', ARGS_COLOR_OPTIONS, G_OPTION_ARG_STRING,
      &mc_global.tty.command_line_colors,
      N_("Specifies a color configuration"),
-     "<string>"
+     N_("<string>")
     },
 
     {
      "skin", 'S', ARGS_COLOR_OPTIONS, G_OPTION_ARG_STRING,
      &mc_global.tty.skin,
      N_("Show mc with specified skin"),
-     "<string>"
+     N_("<string>")
     },
 
     {
@@ -831,7 +831,7 @@ mc_setup_by_args (int argc, char **argv,
                                 _("Two files are required to envoke the diffviewer."));
             return FALSE;
         }
-        /* fallthrough */
+        MC_FALLTHROUGH;
 #endif /* USE_DIFF_VIEW */
 
     case MC_RUN_FULL:
diff -urpN mc-4.8.20/src/background.c mc-4.8.21/src/background.c
--- mc-4.8.20/src/background.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/background.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
 
 /* Background support.
 
-   Copyright (C) 1996-2017
+   Copyright (C) 1996-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/clipboard.c mc-4.8.21/src/clipboard.c
--- mc-4.8.20/src/clipboard.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/clipboard.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Util for external clipboard.
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/cons.handler.c mc-4.8.21/src/cons.handler.c
--- mc-4.8.20/src/cons.handler.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/cons.handler.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Client interface for General purpose Linux console save/restore server
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -42,7 +42,7 @@
 
 #include "lib/unixcompat.h"
 #include "lib/tty/tty.h"
-#include "lib/skin.h"           /* tty_set_normal_attrs */
+#include "lib/tty/color.h"      /* tty_set_normal_attrs */
 #include "lib/tty/win.h"
 #include "lib/util.h"           /* mc_build_filename() */
 
diff -urpN mc-4.8.20/src/consaver/Makefile.in mc-4.8.21/src/consaver/Makefile.in
--- mc-4.8.20/src/consaver/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/src/consaver/Makefile.in	2018-06-03 10:57:32.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/consaver/cons.saver.c mc-4.8.21/src/consaver/cons.saver.c
--- mc-4.8.20/src/consaver/cons.saver.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/consaver/cons.saver.c	2018-05-27 21:56:21.000000000 +0200
@@ -11,7 +11,7 @@
 
    Partly rewritten by Jakub Jelinek <jakub@redhat.com>.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/diffviewer/Makefile.in mc-4.8.21/src/diffviewer/Makefile.in
--- mc-4.8.20/src/diffviewer/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/src/diffviewer/Makefile.in	2018-06-03 10:57:32.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/diffviewer/search.c mc-4.8.21/src/diffviewer/search.c
--- mc-4.8.20/src/diffviewer/search.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/diffviewer/search.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Search functions for diffviewer.
 
-   Copyright (C) 2010-2017
+   Copyright (C) 2010-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -123,11 +123,8 @@ mcdiffview_dialog_search (WDiff * dview)
         GString *tmp;
 
         tmp = str_convert_to_input (exp);
-        if (tmp != NULL)
-        {
-            g_free (exp);
-            exp = g_string_free (tmp, FALSE);
-        }
+        g_free (exp);
+        exp = g_string_free (tmp, FALSE);
     }
 #endif
 
diff -urpN mc-4.8.20/src/diffviewer/ydiff.c mc-4.8.21/src/diffviewer/ydiff.c
--- mc-4.8.20/src/diffviewer/ydiff.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/diffviewer/ydiff.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    File difference viewer
 
-   Copyright (C) 2007-2017
+   Copyright (C) 2007-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -3106,7 +3106,7 @@ dview_ok_to_exit (WDiff * dview)
             res = mc_util_unlink_backup_if_possible (dview->file[DIFF_LEFT], "~~~");
         if (mc_util_restore_from_backup_if_possible (dview->file[DIFF_RIGHT], "~~~"))
             res = mc_util_unlink_backup_if_possible (dview->file[DIFF_RIGHT], "~~~");
-        /* fall through */
+        MC_FALLTHROUGH;
     default:
         res = TRUE;
         break;
diff -urpN mc-4.8.20/src/editor/Makefile.in mc-4.8.21/src/editor/Makefile.in
--- mc-4.8.20/src/editor/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/src/editor/Makefile.in	2018-06-03 10:57:32.000000000 +0200
@@ -117,6 +117,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -124,6 +125,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/editor/bookmark.c mc-4.8.21/src/editor/bookmark.c
--- mc-4.8.20/src/editor/bookmark.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/bookmark.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor book mark handling
 
-   Copyright (C) 2001-2017
+   Copyright (C) 2001-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/editor/choosesyntax.c mc-4.8.21/src/editor/choosesyntax.c
--- mc-4.8.20/src/editor/choosesyntax.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/choosesyntax.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    User interface for syntax selection.
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Copyright (C) 2005, 2006
diff -urpN mc-4.8.20/src/editor/edit.c mc-4.8.21/src/editor/edit.c
--- mc-4.8.20/src/editor/edit.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/editor/edit.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor low level data handling and cursor fundamentals.
 
-   Copyright (C) 1996-2017
+   Copyright (C) 1996-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -126,6 +126,7 @@ static const struct edit_filters
 {
     /* *INDENT-OFF* */
     { "xz -cd %s 2>&1", "xz > %s", ".xz"},
+    { "zstd -cd %s 2>&1", "zstd > %s", ".zst"},
     { "lz4 -cd %s 2>&1", "lz4 > %s", ".lz4" },
     { "lzip -cd %s 2>&1", "lzip > %s", ".lz"},
     { "lzma -cd %s 2>&1", "lzma > %s", ".lzma" },
@@ -890,11 +891,8 @@ my_type_of (int c)
     if (c == 0)
         return 0;
     if (c == '!')
-    {
-        if (*option_chars_move_whole_word == '!')
-            return 2;
-        return 0x80000000UL;
-    }
+        return 2;
+
     if (g_ascii_isupper ((gchar) c))
         c = 'A';
     else if (g_ascii_islower ((gchar) c))
@@ -3456,6 +3454,7 @@ edit_execute_cmd (WEdit * edit, long com
     case CK_MarkColumnDown:
         if (edit->mark2 == -1)
             break;              /*marking is following the cursor: may need to highlight a whole line */
+        MC_FALLTHROUGH;
     case CK_Left:
     case CK_Right:
     case CK_MarkLeft:
@@ -3551,18 +3550,21 @@ edit_execute_cmd (WEdit * edit, long com
 
     case CK_MarkColumnPageUp:
         edit->column_highlight = 1;
+        MC_FALLTHROUGH;
     case CK_PageUp:
     case CK_MarkPageUp:
         edit_move_up (edit, w->lines - 1, TRUE);
         break;
     case CK_MarkColumnPageDown:
         edit->column_highlight = 1;
+        MC_FALLTHROUGH;
     case CK_PageDown:
     case CK_MarkPageDown:
         edit_move_down (edit, w->lines - 1, TRUE);
         break;
     case CK_MarkColumnLeft:
         edit->column_highlight = 1;
+        MC_FALLTHROUGH;
     case CK_Left:
     case CK_MarkLeft:
         if (option_fake_half_tabs && is_in_indent (&edit->buffer) && right_of_four_spaces (edit))
@@ -3578,6 +3580,7 @@ edit_execute_cmd (WEdit * edit, long com
         break;
     case CK_MarkColumnRight:
         edit->column_highlight = 1;
+        MC_FALLTHROUGH;
     case CK_Right:
     case CK_MarkRight:
         if (option_fake_half_tabs && is_in_indent (&edit->buffer) && left_of_four_spaces (edit))
@@ -3608,36 +3611,42 @@ edit_execute_cmd (WEdit * edit, long com
         break;
     case CK_MarkColumnUp:
         edit->column_highlight = 1;
+        MC_FALLTHROUGH;
     case CK_Up:
     case CK_MarkUp:
         edit_move_up (edit, 1, FALSE);
         break;
     case CK_MarkColumnDown:
         edit->column_highlight = 1;
+        MC_FALLTHROUGH;
     case CK_Down:
     case CK_MarkDown:
         edit_move_down (edit, 1, FALSE);
         break;
     case CK_MarkColumnParagraphUp:
         edit->column_highlight = 1;
+        MC_FALLTHROUGH;
     case CK_ParagraphUp:
     case CK_MarkParagraphUp:
         edit_move_up_paragraph (edit, FALSE);
         break;
     case CK_MarkColumnParagraphDown:
         edit->column_highlight = 1;
+        MC_FALLTHROUGH;
     case CK_ParagraphDown:
     case CK_MarkParagraphDown:
         edit_move_down_paragraph (edit, FALSE);
         break;
     case CK_MarkColumnScrollUp:
         edit->column_highlight = 1;
+        MC_FALLTHROUGH;
     case CK_ScrollUp:
     case CK_MarkScrollUp:
         edit_move_up (edit, 1, TRUE);
         break;
     case CK_MarkColumnScrollDown:
         edit->column_highlight = 1;
+        MC_FALLTHROUGH;
     case CK_ScrollDown:
     case CK_MarkScrollDown:
         edit_move_down (edit, 1, TRUE);
diff -urpN mc-4.8.20/src/editor/editbuffer.c mc-4.8.21/src/editor/editbuffer.c
--- mc-4.8.20/src/editor/editbuffer.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/editbuffer.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor text keep buffer.
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/editor/editcmd.c mc-4.8.21/src/editor/editcmd.c
--- mc-4.8.20/src/editor/editcmd.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/editcmd.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor high level editing commands
 
-   Copyright (C) 1996-2017
+   Copyright (C) 1996-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -233,7 +233,7 @@ edit_save_file (WEdit * edit, const vfs_
             {
             case 0:
                 this_save_mode = EDIT_SAFE_SAVE;
-                /* fallthrough */
+                MC_FALLTHROUGH;
             case 1:
                 edit->skip_detach_prompt = 1;
                 break;
@@ -922,12 +922,9 @@ edit_replace_cmd__conv_to_input (char *s
     GString *tmp;
 
     tmp = str_convert_to_input (str);
-    if (tmp != NULL)
-    {
-        if (tmp->len != 0)
-            return g_string_free (tmp, FALSE);
-        g_string_free (tmp, TRUE);
-    }
+    if (tmp->len != 0)
+        return g_string_free (tmp, FALSE);
+    g_string_free (tmp, TRUE);
 #endif
     return g_strdup (str);
 }
@@ -965,7 +962,7 @@ edit_do_search (WEdit * edit)
 
     if (search_create_bookmark)
     {
-        int found = 0, books = 0;
+        gboolean found = FALSE;
         long l = 0, l_last = -1;
         long q = 0;
 
@@ -974,20 +971,19 @@ edit_do_search (WEdit * edit)
 
         while (mc_search_run (edit->search, (void *) &esm, q, edit->buffer.size, &len))
         {
-            if (found == 0)
+            if (!found)
                 edit->search_start = edit->search->normal_offset;
-            found++;
+            found = TRUE;
             l += edit_buffer_count_lines (&edit->buffer, q, edit->search->normal_offset);
             if (l != l_last)
             {
                 book_mark_insert (edit, l, BOOK_MARK_FOUND_COLOR);
-                books++;
             }
             l_last = l;
             q = edit->search->normal_offset + 1;
         }
 
-        if (found == 0)
+        if (!found)
             edit_error_dialog (_("Search"), _(STR_E_NOTFOUND));
         else
             edit_cursor_move (edit, edit->search_start - edit->buffer.curs1);
@@ -1308,9 +1304,9 @@ edit_collect_completions (WEdit * edit,
 #ifdef HAVE_CHARSET
         {
             GString *recoded;
-            recoded = str_convert_to_display (temp->str);
 
-            if (recoded && recoded->len)
+            recoded = str_convert_to_display (temp->str);
+            if (recoded->len != 0)
                 g_string_assign (temp, recoded->str);
 
             g_string_free (recoded, TRUE);
@@ -1777,7 +1773,7 @@ edit_save_as_cmd (WEdit * edit)
                 return TRUE;
             default:
                 edit_error_dialog (_("Save as"), get_sys_error (_("Cannot save file")));
-                /* fallthrough */
+                MC_FALLTHROUGH;
             case -1:
                 /* Failed, so maintain modify (not save) lock */
                 if (save_lock)
diff -urpN mc-4.8.20/src/editor/editcmd_dialogs.c mc-4.8.21/src/editor/editcmd_dialogs.c
--- mc-4.8.20/src/editor/editcmd_dialogs.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/editcmd_dialogs.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor dialogs for high level editing commands
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -150,11 +150,8 @@ editcmd_dialog_search_show (WEdit * edit
         GString *tmp;
 
         tmp = str_convert_to_input (search_text);
-        if (tmp != NULL)
-        {
-            g_free (search_text);
-            search_text = g_string_free (tmp, FALSE);
-        }
+        g_free (search_text);
+        search_text = g_string_free (tmp, FALSE);
     }
 #endif
 
diff -urpN mc-4.8.20/src/editor/editdraw.c mc-4.8.21/src/editor/editdraw.c
--- mc-4.8.20/src/editor/editdraw.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/editdraw.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor text drawing.
 
-   Copyright (C) 1996-2017
+   Copyright (C) 1996-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -731,7 +731,7 @@ edit_draw_this_line (WEdit * edit, off_t
                         col++;
                         break;
                     }
-                    /* fallthrough */
+                    MC_FALLTHROUGH;
                 default:
 #ifdef HAVE_CHARSET
                     if (mc_global.utf8_display)
diff -urpN mc-4.8.20/src/editor/editmenu.c mc-4.8.21/src/editor/editmenu.c
--- mc-4.8.20/src/editor/editmenu.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/editmenu.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor menu definitions and initialisation
 
-   Copyright (C) 1996-2017
+   Copyright (C) 1996-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/editor/editoptions.c mc-4.8.21/src/editor/editoptions.c
--- mc-4.8.20/src/editor/editoptions.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/editoptions.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor options dialog box
 
-   Copyright (C) 1996-2017
+   Copyright (C) 1996-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/editor/editwidget.c mc-4.8.21/src/editor/editwidget.c
--- mc-4.8.20/src/editor/editwidget.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/editwidget.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor initialisation and callback handler.
 
-   Copyright (C) 1996-2017
+   Copyright (C) 1996-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -145,7 +145,7 @@ edit_about (void)
         QUICK_LABEL (N_("A user friendly text editor\n"
                         "written for the Midnight Commander."), NULL),
         QUICK_SEPARATOR (FALSE),
-        QUICK_LABEL (N_("Copyright (C) 1996-2016 the Free Software Foundation"), NULL),
+        QUICK_LABEL (N_("Copyright (C) 1996-2018 the Free Software Foundation"), NULL),
         QUICK_START_BUTTONS (TRUE, TRUE),
             QUICK_BUTTON (N_("&OK"), B_ENTER, NULL, NULL),
         QUICK_END
@@ -632,10 +632,13 @@ edit_quit (WDialog * h)
 {
     GList *l;
     WEdit *e = NULL;
+    GSList *m = NULL;
+    GSList *me;
 
     /* don't stop the dialog before final decision */
     widget_set_state (WIDGET (h), WST_ACTIVE, TRUE);
 
+    /* check window state and get modified files */
     for (l = h->widgets; l != NULL; l = g_list_next (l))
         if (edit_widget_is_editor (CONST_WIDGET (l->data)))
         {
@@ -644,21 +647,31 @@ edit_quit (WDialog * h)
             if (e->drag_state != MCEDIT_DRAG_NONE)
             {
                 edit_restore_size (e);
+                g_slist_free (m);
                 return;
             }
 
+            /* create separate list because widget_select()
+               changes the window position in Z order */
             if (e->modified)
-            {
-                widget_select (WIDGET (e));
-
-                if (!edit_ok_to_exit (e))
-                    return;
-            }
+                m = g_slist_prepend (m, l->data);
         }
 
-    /* no editors in dialog at all or no any file required to be saved */
-    if (e == NULL || l == NULL)
+    for (me = m; me != NULL; me = g_slist_next (me))
+    {
+        e = (WEdit *) me->data;
+
+        widget_select (WIDGET (e));
+
+        if (!edit_ok_to_exit (e))
+            break;
+    }
+
+    /* if all files were checked, quit editor */
+    if (me == NULL)
         dlg_stop (h);
+
+    g_slist_free (m);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -811,13 +824,18 @@ edit_dialog_callback (Widget * w, Widget
                 if (!e->extmod)
                     command = keybind_lookup_keymap_command (editor_map, parm);
                 else
-                {
-                    e->extmod = FALSE;
                     command = keybind_lookup_keymap_command (editor_x_map, parm);
-                }
 
-                if (command != CK_IgnoreKey)
+                if (command == CK_IgnoreKey)
+                    e->extmod = FALSE;
+                else
+                {
                     ret = edit_dialog_command_execute (h, command);
+                    /* if command was not handled, keep the extended mode
+                       for the further key processing */
+                    if (ret == MSG_HANDLED)
+                        e->extmod = FALSE;
+                }
             }
 
             /*
@@ -1115,7 +1133,7 @@ edit_mouse_callback (Widget * w, mouse_m
             }
         }
 
-        /* fall through to start/stop text selection */
+        MC_FALLTHROUGH;         /* to start/stop text selection */
 
     case MSG_MOUSE_UP:
         edit_update_cursor (edit, event);
@@ -1435,6 +1453,7 @@ edit_handle_move_resize (WEdit * edit, l
         case CK_WindowMove:
             edit->drag_state = MCEDIT_DRAG_NONE;
             edit_status (edit, TRUE);   /* redraw frame and status */
+            MC_FALLTHROUGH;
         default:
             ret = TRUE;
             break;
@@ -1459,6 +1478,7 @@ edit_handle_move_resize (WEdit * edit, l
         case CK_WindowResize:
             edit->drag_state = MCEDIT_DRAG_NONE;
             edit_status (edit, TRUE);   /* redraw frame and status */
+            MC_FALLTHROUGH;
         default:
             ret = TRUE;
             break;
diff -urpN mc-4.8.20/src/editor/etags.c mc-4.8.21/src/editor/etags.c
--- mc-4.8.20/src/editor/etags.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/etags.c	2018-05-27 21:56:21.000000000 +0200
@@ -6,7 +6,7 @@
    or, if etags utility not installed:
    $ find . -type f -name "*.[ch]" | ctags --c-kinds=+p --fields=+iaS --extra=+q -e -L-
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -54,7 +54,7 @@
 /* --------------------------------------------------------------------------------------------- */
 
 static gboolean
-parse_define (char *buf, char **long_name, char **short_name, long *line)
+parse_define (const char *buf, char **long_name, char **short_name, long *line)
 {
     /* *INDENT-OFF* */
     enum
@@ -183,7 +183,7 @@ etags_set_definition_hash (const char *t
     /* *INDENT-ON* */
 
     FILE *f;
-    static char buf[BUF_LARGE];
+    char buf[BUF_LARGE];
 
     char *chekedstr = NULL;
 
@@ -241,14 +241,7 @@ etags_set_definition_hash (const char *t
 
                     canonicalize_pathname (def_hash[num].fullpath);
                     def_hash[num].filename = g_strdup (filename);
-                    if (shortname)
-                    {
-                        def_hash[num].short_define = g_strdup (shortname);
-                    }
-                    else
-                    {
-                        def_hash[num].short_define = g_strdup (longname);
-                    }
+                    def_hash[num].short_define = g_strdup (shortname ? shortname : longname);
                     def_hash[num].line = line;
                     num++;
                 }
diff -urpN mc-4.8.20/src/editor/format.c mc-4.8.21/src/editor/format.c
--- mc-4.8.20/src/editor/format.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/format.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Dynamic paragraph formatting.
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Copyright (C) 1996 Paul Sheer
diff -urpN mc-4.8.20/src/editor/spell.c mc-4.8.21/src/editor/spell.c
--- mc-4.8.20/src/editor/spell.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/spell.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor spell checker
 
-   Copyright (C) 2012-2017
+   Copyright (C) 2012-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/editor/spell_dialogs.c mc-4.8.21/src/editor/spell_dialogs.c
--- mc-4.8.20/src/editor/spell_dialogs.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/spell_dialogs.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor spell checker dialogs
 
-   Copyright (C) 2012-2017
+   Copyright (C) 2012-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/editor/syntax.c mc-4.8.21/src/editor/syntax.c
--- mc-4.8.20/src/editor/syntax.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/editor/syntax.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Editor syntax highlighting.
 
-   Copyright (C) 1996-2017
+   Copyright (C) 1996-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/events_init.c mc-4.8.21/src/events_init.c
--- mc-4.8.20/src/events_init.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/events_init.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Event callbacks initialization
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -58,7 +58,7 @@ gboolean
 events_init (GError ** mcerror)
 {
     /* *INDENT-OFF* */
-    event_init_t standard_events[] =
+    static const event_init_t standard_events[] =
     {
         {MCEVENT_GROUP_CORE, "clipboard_file_to_ext_clip", clipboard_file_to_ext_clip, NULL},
         {MCEVENT_GROUP_CORE, "clipboard_file_from_ext_clip", clipboard_file_from_ext_clip, NULL},
diff -urpN mc-4.8.20/src/execute.c mc-4.8.21/src/execute.c
--- mc-4.8.20/src/execute.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/execute.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Execution routines for GNU Midnight Commander
 
-   Copyright (C) 2003-2017
+   Copyright (C) 2003-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/filemanager/Makefile.in mc-4.8.21/src/filemanager/Makefile.in
--- mc-4.8.20/src/filemanager/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/src/filemanager/Makefile.in	2018-06-03 10:57:32.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/filemanager/achown.c mc-4.8.21/src/filemanager/achown.c
--- mc-4.8.20/src/filemanager/achown.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/achown.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Chown-advanced command -- for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -29,26 +29,23 @@
 #include <errno.h>
 #include <stdio.h>
 #include <string.h>
-
+#include <pwd.h>
+#include <grp.h>
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <unistd.h>
-#include <pwd.h>
-#include <grp.h>
 
 #include "lib/global.h"
 
 #include "lib/tty/tty.h"
 #include "lib/tty/key.h"        /* XCTRL and ALT macros */
 #include "lib/skin.h"
-#include "lib/strutil.h"
 #include "lib/vfs/vfs.h"
+#include "lib/strutil.h"
 #include "lib/util.h"
 #include "lib/widget.h"
 
-#include "dir.h"
 #include "midnight.h"           /* current_panel */
-#include "chmod.h"
 
 #include "achown.h"
 
@@ -56,44 +53,46 @@
 
 /*** file scope macro definitions ****************************************************************/
 
-#define BX              5
-#define BY              5
+#define BX 5
+#define BY 5
 
-#define BUTTONS         9
-#define BUTTONS_PERM    5
+#define BUTTONS      9
+#define BUTTONS_PERM 5
 
-#define B_SETALL        B_USER
-#define B_SKIP          (B_USER + 1)
+#define B_SETALL B_USER
+#define B_SKIP   (B_USER + 1)
 
 /*** file scope type declarations ****************************************************************/
 
 /*** file scope variables ************************************************************************/
 
-static WDialog *ch_dlg;
-
 static struct
 {
     unsigned long id;
     int ret_cmd;
     button_flags_t flags;
-    int x, len;
+    int x;
+    int len;
     const char *text;
-} chown_advanced_but[BUTTONS] =
+} advanced_chown_but[BUTTONS] =
 {
     /* *INDENT-OFF* */
-    { 0, B_ENTER,  NARROW_BUTTON,   3, 0, "   "},
-    { 0, B_ENTER,  NARROW_BUTTON,  11, 0, "   "},
-    { 0, B_ENTER,  NARROW_BUTTON,  19, 0, "   "},
-    { 0, B_ENTER,  NARROW_BUTTON,  29, 0, ""},
-    { 0, B_ENTER,  NARROW_BUTTON,  47, 0, ""},
-
-    { 0, B_SETALL, NORMAL_BUTTON,   0, 0, N_("Set &all")},
-    { 0, B_SKIP,   NORMAL_BUTTON,   0, 0, N_("S&kip") },
-    { 0, B_ENTER,  DEFPUSH_BUTTON,  0, 0, N_("&Set") },
-    { 0, B_CANCEL, NORMAL_BUTTON,   0, 0, N_("&Cancel") }
+    { 0, B_ENTER,   NARROW_BUTTON,  3, 0, "   " },
+    { 0, B_ENTER,   NARROW_BUTTON, 11, 0, "   " },
+    { 0, B_ENTER,   NARROW_BUTTON, 19, 0, "   " },
+    { 0, B_ENTER,   NARROW_BUTTON, 29, 0, ""    },
+    { 0, B_ENTER,   NARROW_BUTTON, 47, 0, ""    },
+
+    { 0, B_SETALL,  NORMAL_BUTTON,  0, 0, N_("Set &all") },
+    { 0, B_SKIP,    NORMAL_BUTTON,  0, 0, N_("S&kip")    },
+    { 0, B_ENTER,  DEFPUSH_BUTTON,  0, 0, N_("&Set")     },
+    { 0, B_CANCEL,  NORMAL_BUTTON,  0, 0, N_("&Cancel")  }
     /* *INDENT-ON* */
 };
 
+static int current_file;
+static gboolean ignore_all;
+
 static WButton *b_att[3];       /* permission */
 static WButton *b_user, *b_group;       /* owner */
 static WLabel *l_filename;
@@ -104,54 +103,66 @@ static int x_toggle;
 static char ch_flags[11];
 static const char ch_perm[] = "rwx";
 static mode_t ch_cmode;
-static struct stat *sf_stat;
-static gboolean need_update = FALSE;
-static gboolean end_chown = FALSE;
-static int current_file;
-static gboolean single_set = FALSE;
-static char *fname;
+static struct stat sf_stat;
 
 /* --------------------------------------------------------------------------------------------- */
 /*** file scope functions ************************************************************************/
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-update_ownership (void)
+advanced_chown_i18n (void)
 {
-    button_set_text (b_user, get_owner (sf_stat->st_uid));
-    button_set_text (b_group, get_group (sf_stat->st_gid));
+    static gboolean i18n = FALSE;
+    int i;
+
+    if (i18n)
+        return;
+
+    i18n = TRUE;
+
+    for (i = BUTTONS_PERM; i < BUTTONS; i++)
+    {
+#ifdef ENABLE_NLS
+        advanced_chown_but[i].text = _(advanced_chown_but[i].text);
+#endif /* ENABLE_NLS */
+
+        advanced_chown_but[i].len = str_term_width1 (advanced_chown_but[i].text) + 3;
+        if (advanced_chown_but[i].flags == DEFPUSH_BUTTON)
+            advanced_chown_but[i].len += 2;     /* "<>" */
+    }
+
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
 static cb_ret_t
-inc_flag_pos (int f_pos)
+inc_flag_pos (void)
 {
     if (flag_pos == 10)
     {
         flag_pos = 0;
         return MSG_NOT_HANDLED;
     }
+
     flag_pos++;
-    if ((flag_pos % 3) == 0 || f_pos > 2)
-        return MSG_NOT_HANDLED;
-    return MSG_HANDLED;
+
+    return flag_pos % 3 == 0 ? MSG_NOT_HANDLED : MSG_HANDLED;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
 static cb_ret_t
-dec_flag_pos (int f_pos)
+dec_flag_pos (void)
 {
     if (flag_pos == 0)
     {
         flag_pos = 10;
         return MSG_NOT_HANDLED;
     }
+
     flag_pos--;
-    if (((flag_pos + 1) % 3) == 0 || f_pos > 2)
-        return MSG_NOT_HANDLED;
-    return MSG_HANDLED;
+
+    return (flag_pos + 1) % 3 == 0 ? MSG_NOT_HANDLED : MSG_HANDLED;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -168,28 +179,17 @@ set_perm_by_flags (char *s, int f_p)
         else if (ch_flags[f_p + i] == '-')
             s[i] = '-';
         else
-            s[i] = (ch_cmode & (1 << (8 - f_p - i))) ? ch_perm[i] : '-';
+            s[i] = (ch_cmode & (1 << (8 - f_p - i))) != 0 ? ch_perm[i] : '-';
     }
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-static void
-update_permissions (void)
-{
-    set_perm_by_flags (b_att[0]->text.start, 0);
-    set_perm_by_flags (b_att[1]->text.start, 3);
-    set_perm_by_flags (b_att[2]->text.start, 6);
-}
-
-/* --------------------------------------------------------------------------------------------- */
-
 static mode_t
 get_perm (char *s, int base)
 {
-    mode_t m;
+    mode_t m = 0;
 
-    m = 0;
     m |= (s[0] == '-') ? 0 :
         ((s[0] == '+') ? (mode_t) (1 << (base + 2)) : (1 << (base + 2)) & ch_cmode);
 
@@ -219,7 +219,26 @@ get_mode (void)
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-print_flags (void)
+update_permissions (void)
+{
+    set_perm_by_flags (b_att[0]->text.start, 0);
+    set_perm_by_flags (b_att[1]->text.start, 3);
+    set_perm_by_flags (b_att[2]->text.start, 6);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static void
+update_ownership (void)
+{
+    button_set_text (b_user, get_owner (sf_stat.st_uid));
+    button_set_text (b_group, get_group (sf_stat.st_gid));
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static void
+print_flags (const WDialog * h)
 {
     int i;
 
@@ -227,19 +246,19 @@ print_flags (void)
 
     for (i = 0; i < 3; i++)
     {
-        widget_move (ch_dlg, BY + 1, 9 + i);
+        widget_move (h, BY + 1, advanced_chown_but[0].x + 6 + i);
         tty_print_char (ch_flags[i]);
     }
 
     for (i = 0; i < 3; i++)
     {
-        widget_move (ch_dlg, BY + 1, 17 + i);
+        widget_move (h, BY + 1, advanced_chown_but[1].x + 6 + i);
         tty_print_char (ch_flags[i + 3]);
     }
 
     for (i = 0; i < 3; i++)
     {
-        widget_move (ch_dlg, BY + 1, 25 + i);
+        widget_move (h, BY + 1, advanced_chown_but[2].x + 6 + i);
         tty_print_char (ch_flags[i + 6]);
     }
 
@@ -247,12 +266,12 @@ print_flags (void)
 
     for (i = 0; i < 15; i++)
     {
-        widget_move (ch_dlg, BY + 1, 35 + i);
+        widget_move (h, BY + 1, advanced_chown_but[3].x + 6 + i);
         tty_print_char (ch_flags[9]);
     }
     for (i = 0; i < 15; i++)
     {
-        widget_move (ch_dlg, BY + 1, 53 + i);
+        widget_move (h, BY + 1, advanced_chown_but[4].x + 6 + i);
         tty_print_char (ch_flags[10]);
     }
 }
@@ -260,7 +279,33 @@ print_flags (void)
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-chown_info_update (void)
+advanced_chown_refresh (WDialog * h)
+{
+    dlg_default_repaint (h);
+
+    tty_setcolor (COLOR_NORMAL);
+
+    widget_move (h, BY - 1, advanced_chown_but[0].x + 5);
+    tty_print_string (_("owner"));
+    widget_move (h, BY - 1, advanced_chown_but[1].x + 5);
+    tty_print_string (_("group"));
+    widget_move (h, BY - 1, advanced_chown_but[2].x + 5);
+    tty_print_string (_("other"));
+
+    widget_move (h, BY - 1, advanced_chown_but[3].x + 5);
+    tty_print_string (_("owner"));
+    widget_move (h, BY - 1, advanced_chown_but[4].x + 5);
+    tty_print_string (_("group"));
+
+    widget_move (h, BY + 1, 3);
+    tty_print_string (_("Flag"));
+    print_flags (h);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static void
+advanced_chown_info_update (void)
 {
     char buffer[BUF_SMALL];
 
@@ -277,14 +322,167 @@ chown_info_update (void)
 static void
 update_mode (WDialog * h)
 {
-    print_flags ();
-    chown_info_update ();
+    print_flags (h);
+    advanced_chown_info_update ();
     widget_set_state (WIDGET (h->current->data), WST_FOCUSED, TRUE);
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
 static cb_ret_t
+perm_button_callback (Widget * w, Widget * sender, widget_msg_t msg, int parm, void *data)
+{
+    WButton *b = BUTTON (w);
+    int i = 0;
+    int f_pos;
+
+    /* one of permission buttons */
+    if (b == b_att[0])
+        f_pos = 0;
+    else if (b == b_att[1])
+        f_pos = 1;
+    else                        /* if (w == b_att [1] */
+        f_pos = 2;
+
+    switch (msg)
+    {
+    case MSG_FOCUS:
+        if (b->hotpos == -1)
+            b->hotpos = 0;
+
+        flag_pos = f_pos * 3 + b->hotpos;
+        return MSG_HANDLED;
+
+    case MSG_KEY:
+        switch (parm)
+        {
+        case '*':
+            parm = '=';
+            MC_FALLTHROUGH;
+
+        case '-':
+        case '=':
+        case '+':
+            flag_pos = f_pos * 3 + b->hotpos;
+            ch_flags[flag_pos] = parm;
+            update_mode (w->owner);
+            send_message (w, NULL, MSG_KEY, KEY_RIGHT, NULL);
+            if (b->hotpos == 2)
+                dlg_select_next_widget (w->owner);
+            break;
+
+        case XCTRL ('f'):
+        case KEY_RIGHT:
+            {
+                cb_ret_t ret;
+
+                ret = inc_flag_pos ();
+                b->hotpos = flag_pos % 3;
+                return ret;
+            }
+
+        case XCTRL ('b'):
+        case KEY_LEFT:
+            {
+                cb_ret_t ret;
+
+                ret = dec_flag_pos ();
+                b->hotpos = flag_pos % 3;
+                return ret;
+            }
+
+        case 'x':
+            i++;
+            MC_FALLTHROUGH;
+
+        case 'w':
+            i++;
+            MC_FALLTHROUGH;
+
+        case 'r':
+            b->hotpos = i;
+            MC_FALLTHROUGH;
+
+        case ' ':
+            i = b->hotpos;
+
+            flag_pos = f_pos * 3 + i;
+            if (b->text.start[flag_pos % 3] == '-')
+                ch_flags[flag_pos] = '+';
+            else
+                ch_flags[flag_pos] = '-';
+            update_mode (w->owner);
+            break;
+
+        case '4':
+            i++;
+            MC_FALLTHROUGH;
+
+        case '2':
+            i++;
+            MC_FALLTHROUGH;
+
+        case '1':
+            b->hotpos = i;
+            flag_pos = f_pos * 3 + i;
+            ch_flags[flag_pos] = '=';
+            update_mode (w->owner);
+            break;
+
+        default:
+            break;
+        }
+        /* continue key handling in the dialog level */
+        return MSG_NOT_HANDLED;
+
+    default:
+        return button_default_callback (w, sender, msg, parm, data);
+    }
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static void
+perm_button_mouse_callback (Widget * w, mouse_msg_t msg, mouse_event_t * event)
+{
+    switch (msg)
+    {
+    case MSG_MOUSE_DOWN:
+        /* place cursor on flag that is being modified */
+        BUTTON (w)->hotpos = CLAMP (event->x - 1, 0, 2);
+        MC_FALLTHROUGH;
+
+    default:
+        button_mouse_default_callback (w, msg, event);
+        break;
+    }
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static WButton *
+perm_button_new (int y, int x, int action, button_flags_t flags, const char *text,
+                 bcback_fn callback)
+{
+    WButton *b;
+    Widget *w;
+
+    /* create base button using native API */
+    b = button_new (y, x, action, flags, text, callback);
+    w = WIDGET (b);
+
+    /* we don't want HOTKEY */
+    widget_want_hotkey (w, FALSE);
+
+    w->callback = perm_button_callback;
+    w->mouse_callback = perm_button_mouse_callback;
+
+    return b;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static cb_ret_t
 chl_callback (Widget * w, Widget * sender, widget_msg_t msg, int parm, void *data)
 {
     switch (msg)
@@ -311,35 +509,58 @@ chl_callback (Widget * w, Widget * sende
 
 /* --------------------------------------------------------------------------------------------- */
 
-static void
-do_enter_key (WDialog * h, int f_pos)
+static int
+user_group_button_cb (WButton * button, int action)
 {
-    WListbox *chl_list;
-    struct passwd *chl_pass;
-    struct group *chl_grp;
-    int fe;
-    gboolean chl_end, is_owner;
+    Widget *w = WIDGET (button);
+    int f_pos;
+    gboolean chl_end;
+
+    (void) action;
+
+    if (button == b_user)
+        f_pos = BUTTONS_PERM - 2;
+    else if (button == b_group)
+        f_pos = BUTTONS_PERM - 1;
+    else
+        return 0;               /* do nothing */
 
     do
     {
-        int result;
-        WDialog *chl_dlg;
-        const char *title;
-        int lxx, lyy, b_pos;
+        WDialog *h = w->owner;
+        Widget *wh = WIDGET (h);
 
-        is_owner = (f_pos == 3);
-        title = is_owner ? _("owner") : _("group");
+        gboolean is_owner = (f_pos == BUTTONS_PERM - 2);
+        const char *title;
+        int lxx, b_pos;
+        WDialog *chl_dlg;
+        WListbox *chl_list;
+        int result;
+        int fe;
+        struct passwd *chl_pass;
+        struct group *chl_grp;
 
-        lxx = (COLS - 74) / 2 + (is_owner ? 35 : 53);
-        lyy = (LINES - 13) / 2;
         chl_end = FALSE;
 
+        if (is_owner)
+        {
+            title = _("owner");
+            lxx = WIDGET (b_user)->x + 1;
+        }
+        else
+        {
+            title = _("group");
+            lxx = WIDGET (b_group)->x + 1;
+        }
+
         chl_dlg =
-            dlg_create (TRUE, lyy, lxx, 13, 17, WPOS_KEEP_DEFAULT, TRUE, dialog_colors,
-                        chl_callback, NULL, "[Advanced Chown]", title);
+            dlg_create (TRUE, wh->y - 1, lxx, wh->lines + 2, 17, WPOS_KEEP_DEFAULT, TRUE,
+                        dialog_colors, chl_callback, NULL, "[Advanced Chown]", title);
 
         /* get new listboxes */
-        chl_list = listbox_new (1, 1, 11, 15, FALSE, NULL);
+        chl_list =
+            listbox_new (1, 1, WIDGET (chl_dlg)->lines - 2, WIDGET (chl_dlg)->cols - 2, FALSE,
+                         NULL);
         listbox_add_item (chl_list, LISTBOX_APPEND_AT_END, 0, "<Unknown>", NULL, FALSE);
         if (is_owner)
         {
@@ -349,7 +570,7 @@ do_enter_key (WDialog * h, int f_pos)
                 listbox_add_item (chl_list, LISTBOX_APPEND_SORTED, 0, chl_pass->pw_name, NULL,
                                   FALSE);
             endpwent ();
-            fe = listbox_search_text (chl_list, get_owner (sf_stat->st_uid));
+            fe = listbox_search_text (chl_list, get_owner (sf_stat.st_uid));
         }
         else
         {
@@ -359,7 +580,7 @@ do_enter_key (WDialog * h, int f_pos)
                 listbox_add_item (chl_list, LISTBOX_APPEND_SORTED, 0, chl_grp->gr_name, NULL,
                                   FALSE);
             endgrent ();
-            fe = listbox_search_text (chl_list, get_group (sf_stat->st_gid));
+            fe = listbox_search_text (chl_list, get_group (sf_stat.st_gid));
         }
 
         listbox_select_entry (chl_list, fe);
@@ -382,8 +603,8 @@ do_enter_key (WDialog * h, int f_pos)
                     chl_pass = getpwnam (text);
                     if (chl_pass != NULL)
                     {
+                        sf_stat.st_uid = chl_pass->pw_uid;
                         ok = TRUE;
-                        sf_stat->st_uid = chl_pass->pw_uid;
                     }
                 }
                 else
@@ -391,31 +612,34 @@ do_enter_key (WDialog * h, int f_pos)
                     chl_grp = getgrnam (text);
                     if (chl_grp != NULL)
                     {
-                        sf_stat->st_gid = chl_grp->gr_gid;
+                        sf_stat.st_gid = chl_grp->gr_gid;
                         ok = TRUE;
                     }
                 }
-                if (ok)
+
+                if (!ok)
+                    dlg_select_current_widget (h);
+                else
                 {
                     ch_flags[f_pos + 6] = '+';
                     update_ownership ();
+                    dlg_select_current_widget (h);
+                    print_flags (h);
                 }
-                dlg_select_current_widget (h);
-                if (ok)
-                    print_flags ();
             }
+
             if (result == KEY_LEFT)
             {
                 if (!is_owner)
                     chl_end = TRUE;
-                dlg_select_prev_widget (ch_dlg);
+                dlg_select_prev_widget (h);
                 f_pos--;
             }
             else if (result == KEY_RIGHT)
             {
                 if (is_owner)
                     chl_end = TRUE;
-                dlg_select_next_widget (ch_dlg);
+                dlg_select_next_widget (h);
                 f_pos++;
             }
         }
@@ -424,44 +648,8 @@ do_enter_key (WDialog * h, int f_pos)
         dlg_destroy (chl_dlg);
     }
     while (chl_end);
-}
-
-/* --------------------------------------------------------------------------------------------- */
-
-static void
-chown_refresh (void)
-{
-    dlg_default_repaint (ch_dlg);
-
-    tty_setcolor (COLOR_NORMAL);
-
-    widget_move (ch_dlg, BY - 1, 8);
-    tty_print_string (_("owner"));
-    widget_move (ch_dlg, BY - 1, 16);
-    tty_print_string (_("group"));
-    widget_move (ch_dlg, BY - 1, 24);
-    tty_print_string (_("other"));
 
-    widget_move (ch_dlg, BY - 1, 35);
-    tty_print_string (_("owner"));
-    widget_move (ch_dlg, BY - 1, 53);
-    tty_print_string (_("group"));
-
-    widget_move (ch_dlg, BY + 1, 3);
-    tty_print_string (_("Flag"));
-
-    print_flags ();
-}
-
-/* --------------------------------------------------------------------------------------------- */
-
-static void
-b_setpos (int f_pos)
-{
-    b_att[0]->hotpos = -1;
-    b_att[1]->hotpos = -1;
-    b_att[2]->hotpos = -1;
-    b_att[f_pos]->hotpos = (flag_pos % 3);
+    return 0;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -470,74 +658,25 @@ static cb_ret_t
 advanced_chown_callback (Widget * w, Widget * sender, widget_msg_t msg, int parm, void *data)
 {
     WDialog *h = DIALOG (w);
-    int i;
-    int f_pos;
-    unsigned long id;
-
-    id = dlg_get_current_widget_id (h);
-
-    for (i = 0; i < BUTTONS_PERM; i++)
-        if (chown_advanced_but[i].id == id)
-            break;
-
-    f_pos = i;
-    i = 0;
+    int i = 0;
 
     switch (msg)
     {
     case MSG_DRAW:
-        chown_refresh ();
-        chown_info_update ();
-        return MSG_HANDLED;
-
-    case MSG_POST_KEY:
-        if (f_pos < 3)
-            b_setpos (f_pos);
-        return MSG_HANDLED;
-
-    case MSG_FOCUS:
-        if (f_pos < 3)
-        {
-            if ((flag_pos / 3) != f_pos)
-                flag_pos = f_pos * 3;
-            b_setpos (f_pos);
-        }
-        else if (f_pos < BUTTONS_PERM)
-            flag_pos = f_pos + 6;
+        advanced_chown_refresh (h);
+        advanced_chown_info_update ();
         return MSG_HANDLED;
 
     case MSG_KEY:
         switch (parm)
         {
-        case XCTRL ('b'):
-        case KEY_LEFT:
-            if (f_pos < BUTTONS_PERM)
-                return (dec_flag_pos (f_pos));
-            break;
-
-        case XCTRL ('f'):
-        case KEY_RIGHT:
-            if (f_pos < BUTTONS_PERM)
-                return (inc_flag_pos (f_pos));
-            break;
-
-        case ' ':
-            if (f_pos < 3)
-                return MSG_HANDLED;
-            break;
-
-        case '\n':
-        case KEY_ENTER:
-            if (f_pos <= 2 || f_pos >= BUTTONS_PERM)
-                break;
-            do_enter_key (h, f_pos);
-            return MSG_HANDLED;
-
         case ALT ('x'):
             i++;
+            MC_FALLTHROUGH;
 
         case ALT ('w'):
             i++;
+            MC_FALLTHROUGH;
 
         case ALT ('r'):
             parm = i + 3;
@@ -546,14 +685,15 @@ advanced_chown_callback (Widget * w, Wid
             x_toggle ^= (1 << parm);
             update_mode (h);
             dlg_broadcast_msg (h, MSG_DRAW);
-            widget_set_state (WIDGET (h->current->data), WST_FOCUSED, TRUE);
             break;
 
         case XCTRL ('x'):
             i++;
+            MC_FALLTHROUGH;
 
         case XCTRL ('w'):
             i++;
+            MC_FALLTHROUGH;
 
         case XCTRL ('r'):
             parm = i;
@@ -562,59 +702,6 @@ advanced_chown_callback (Widget * w, Wid
             x_toggle ^= (1 << parm);
             update_mode (h);
             dlg_broadcast_msg (h, MSG_DRAW);
-            widget_set_state (WIDGET (h->current->data), WST_FOCUSED, TRUE);
-            break;
-
-        case 'x':
-            i++;
-
-        case 'w':
-            i++;
-
-        case 'r':
-            if (f_pos > 2)
-                break;
-            flag_pos = f_pos * 3 + i;   /* (strchr(ch_perm,parm)-ch_perm); */
-            if (BUTTON (h->current->data)->text.start[(flag_pos % 3)] == '-')
-                ch_flags[flag_pos] = '+';
-            else
-                ch_flags[flag_pos] = '-';
-            update_mode (h);
-            break;
-
-        case '4':
-            i++;
-
-        case '2':
-            i++;
-
-        case '1':
-            if (f_pos <= 2)
-            {
-                flag_pos = i + f_pos * 3;
-                ch_flags[flag_pos] = '=';
-                update_mode (h);
-            }
-            break;
-
-        case '-':
-            if (f_pos > 2)
-                break;
-
-        case '*':
-            if (parm == '*')
-                parm = '=';
-
-        case '=':
-        case '+':
-            if (f_pos <= 4)
-            {
-                ch_flags[flag_pos] = parm;
-                update_mode (h);
-                send_message (h, sender, MSG_KEY, KEY_RIGHT, NULL);
-                if (flag_pos > 8 || (flag_pos % 3) == 0)
-                    dlg_select_next_widget (h);
-            }
             break;
 
         default:
@@ -629,47 +716,26 @@ advanced_chown_callback (Widget * w, Wid
 
 /* --------------------------------------------------------------------------------------------- */
 
-static void
-init_chown_advanced (void)
+static WDialog *
+advanced_chown_init (void)
 {
+    gboolean single_set;
+    WDialog *ch_dlg;
+    int lines = 12;
+    int cols = 74;
     int i;
-    int dlg_h = 12;
-    int dlg_w = 74;
     int y;
 
-    static gboolean i18n = FALSE;
-
-    if (!i18n)
-    {
-        for (i = BUTTONS_PERM; i < BUTTONS; i++)
-        {
-#ifdef ENABLE_NLS
-            chown_advanced_but[i].text = _(chown_advanced_but[i].text);
-#endif /* ENABLE_NLS */
-
-            chown_advanced_but[i].len = str_term_width1 (chown_advanced_but[i].text) + 3;
-            if (chown_advanced_but[i].flags == DEFPUSH_BUTTON)
-                chown_advanced_but[i].len += 2; /* "<>" */
-        }
-
-        i18n = TRUE;
-    }
-
-    do_refresh ();
-
-    sf_stat = g_new (struct stat, 1);
-    current_file = 0;
-    end_chown = need_update = FALSE;
-    single_set = (current_panel->marked < 2);
     memset (ch_flags, '=', 11);
     flag_pos = 0;
     x_toggle = 070;
 
+    single_set = (current_panel->marked < 2);
     if (!single_set)
-        dlg_h += 2;
+        lines += 2;
 
     ch_dlg =
-        dlg_create (TRUE, 0, 0, dlg_h, dlg_w, WPOS_CENTER, FALSE, dialog_colors,
+        dlg_create (TRUE, 0, 0, lines, cols, WPOS_CENTER, FALSE, dialog_colors,
                     advanced_chown_callback, NULL, "[Advanced Chown]", _("Chown advanced command"));
 
 
@@ -678,19 +744,19 @@ init_chown_advanced (void)
 
     add_widget (ch_dlg, hline_new (3, -1, -1));
 
-#define XTRACT(i,y) y, BX+chown_advanced_but[i].x, \
-        chown_advanced_but[i].ret_cmd, chown_advanced_but[i].flags, \
-        (chown_advanced_but[i].text), NULL
-    b_att[0] = button_new (XTRACT (0, BY));
-    chown_advanced_but[0].id = add_widget (ch_dlg, b_att[0]);
-    b_att[1] = button_new (XTRACT (1, BY));
-    chown_advanced_but[1].id = add_widget (ch_dlg, b_att[1]);
-    b_att[2] = button_new (XTRACT (2, BY));
-    chown_advanced_but[2].id = add_widget (ch_dlg, b_att[2]);
-    b_user = button_new (XTRACT (3, BY));
-    chown_advanced_but[3].id = add_widget (ch_dlg, b_user);
-    b_group = button_new (XTRACT (4, BY));
-    chown_advanced_but[4].id = add_widget (ch_dlg, b_group);
+#define XTRACT(i,y,cb) y, BX+advanced_chown_but[i].x, \
+        advanced_chown_but[i].ret_cmd, advanced_chown_but[i].flags, \
+        (advanced_chown_but[i].text), cb
+    b_att[0] = perm_button_new (XTRACT (0, BY, NULL));
+    advanced_chown_but[0].id = add_widget (ch_dlg, b_att[0]);
+    b_att[1] = perm_button_new (XTRACT (1, BY, NULL));
+    advanced_chown_but[1].id = add_widget (ch_dlg, b_att[1]);
+    b_att[2] = perm_button_new (XTRACT (2, BY, NULL));
+    advanced_chown_but[2].id = add_widget (ch_dlg, b_att[2]);
+    b_user = button_new (XTRACT (3, BY, user_group_button_cb));
+    advanced_chown_but[3].id = add_widget (ch_dlg, b_user);
+    b_group = button_new (XTRACT (4, BY, user_group_button_cb));
+    advanced_chown_but[4].id = add_widget (ch_dlg, b_group);
 #undef XTRACT
 
     l_mode = label_new (BY + 2, 3, "");
@@ -701,47 +767,48 @@ init_chown_advanced (void)
     {
         i = BUTTONS_PERM;
         add_widget (ch_dlg, hline_new (y++, -1, -1));
-        chown_advanced_but[i].id = add_widget (ch_dlg,
+        advanced_chown_but[i].id = add_widget (ch_dlg,
                                                button_new (y,
                                                            WIDGET (ch_dlg)->cols / 2 -
-                                                           chown_advanced_but[i].len,
-                                                           chown_advanced_but[i].ret_cmd,
-                                                           chown_advanced_but[i].flags,
-                                                           chown_advanced_but[i].text, NULL));
+                                                           advanced_chown_but[i].len,
+                                                           advanced_chown_but[i].ret_cmd,
+                                                           advanced_chown_but[i].flags,
+                                                           advanced_chown_but[i].text, NULL));
         i++;
-        chown_advanced_but[i].id = add_widget (ch_dlg,
+        advanced_chown_but[i].id = add_widget (ch_dlg,
                                                button_new (y, WIDGET (ch_dlg)->cols / 2 + 1,
-                                                           chown_advanced_but[i].ret_cmd,
-                                                           chown_advanced_but[i].flags,
-                                                           chown_advanced_but[i].text, NULL));
+                                                           advanced_chown_but[i].ret_cmd,
+                                                           advanced_chown_but[i].flags,
+                                                           advanced_chown_but[i].text, NULL));
         y++;
     }
 
     i = BUTTONS_PERM + 2;
     add_widget (ch_dlg, hline_new (y++, -1, -1));
-    chown_advanced_but[i].id = add_widget (ch_dlg,
+    advanced_chown_but[i].id = add_widget (ch_dlg,
                                            button_new (y,
                                                        WIDGET (ch_dlg)->cols / 2 -
-                                                       chown_advanced_but[i].len,
-                                                       chown_advanced_but[i].ret_cmd,
-                                                       chown_advanced_but[i].flags,
-                                                       chown_advanced_but[i].text, NULL));
+                                                       advanced_chown_but[i].len,
+                                                       advanced_chown_but[i].ret_cmd,
+                                                       advanced_chown_but[i].flags,
+                                                       advanced_chown_but[i].text, NULL));
     i++;
-    chown_advanced_but[i].id = add_widget (ch_dlg,
+    advanced_chown_but[i].id = add_widget (ch_dlg,
                                            button_new (y, WIDGET (ch_dlg)->cols / 2 + 1,
-                                                       chown_advanced_but[i].ret_cmd,
-                                                       chown_advanced_but[i].flags,
-                                                       chown_advanced_but[i].text, NULL));
+                                                       advanced_chown_but[i].ret_cmd,
+                                                       advanced_chown_but[i].flags,
+                                                       advanced_chown_but[i].text, NULL));
 
     widget_select (WIDGET (b_att[0]));
+
+    return ch_dlg;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-chown_advanced_done (void)
+advanced_chown_done (gboolean need_update)
 {
-    g_free (sf_stat);
     if (need_update)
         update_panels (UP_OPTIMIZE, UP_KEEPSEL);
     repaint_screen ();
@@ -749,76 +816,155 @@ chown_advanced_done (void)
 
 /* --------------------------------------------------------------------------------------------- */
 
-#if 0
-static void
-do_chown (uid_t u, gid_t g)
+static const char *
+next_file (void)
 {
-    chown (current_panel->dir.list[current_file].fname, u, g);
-    file_mark (current_panel, current_file, 0);
+    while (!current_panel->dir.list[current_file].f.marked)
+        current_file++;
+
+    return current_panel->dir.list[current_file].fname;
 }
-#endif
 
 /* --------------------------------------------------------------------------------------------- */
 
-static char *
-next_file (void)
+static gboolean
+try_advanced_chown (const vfs_path_t * p, mode_t m, uid_t u, gid_t g)
 {
-    while (!current_panel->dir.list[current_file].f.marked)
-        current_file++;
+    int chmod_result;
+    const char *fname;
+
+    fname = x_basename (vfs_path_as_str (p));
+
+    while ((chmod_result = mc_chmod (p, m)) == -1 && !ignore_all)
+    {
+        int my_errno = errno;
+        int result;
+        char *msg;
+
+        msg = g_strdup_printf (_("Cannot chmod \"%s\"\n%s"), fname, unix_error_string (my_errno));
+        result =
+            query_dialog (MSG_ERROR, msg, D_ERROR, 4, _("&Ignore"), _("Ignore &all"), _("&Retry"),
+                          _("&Cancel"));
+        g_free (msg);
+
+        switch (result)
+        {
+        case 0:
+            /* call mc_chown() only, if mc_chmod() didn't fail */
+            return TRUE;
+
+        case 1:
+            ignore_all = TRUE;
+            /* call mc_chown() only, if mc_chmod() didn't fail */
+            return TRUE;
+
+        case 2:
+            /* retry chmod of this file */
+            break;
+
+        case 3:
+        default:
+            /* stop remain files processing */
+            return FALSE;
+        }
+    }
+
+    /* call mc_chown() only, if mc_chmod didn't fail */
+    while (chmod_result != -1 && mc_chown (p, u, g) == -1 && !ignore_all)
+    {
+        int my_errno = errno;
+        int result;
+        char *msg;
+
+        msg = g_strdup_printf (_("Cannot chown \"%s\"\n%s"), fname, unix_error_string (my_errno));
+        result =
+            query_dialog (MSG_ERROR, msg, D_ERROR, 4, _("&Ignore"), _("Ignore &all"), _("&Retry"),
+                          _("&Cancel"));
+        g_free (msg);
+
+        switch (result)
+        {
+        case 0:
+            /* try next file */
+            return TRUE;
+
+        case 1:
+            ignore_all = TRUE;
+            /* try next file */
+            return TRUE;
+
+        case 2:
+            /* retry chown of this file */
+            break;
+
+        case 3:
+        default:
+            /* stop remain files processing */
+            return FALSE;
+        }
+    }
+
+    return TRUE;
 
-    return current_panel->dir.list[current_file].fname;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
+static gboolean
+do_advanced_chown (const vfs_path_t * p, mode_t m, uid_t u, gid_t g)
+{
+    gboolean ret;
+
+    ret = try_advanced_chown (p, m, u, g);
+
+    do_file_mark (current_panel, current_file, 0);
+
+    return ret;
+}
+
+ /* --------------------------------------------------------------------------------------------- */
+
 static void
-apply_advanced_chowns (struct stat *sf)
+apply_advanced_chowns (vfs_path_t * vpath, struct stat *sf)
 {
-    vfs_path_t *vpath;
-    char *lc_fname;
     gid_t a_gid = sf->st_gid;
     uid_t a_uid = sf->st_uid;
+    gboolean ok;
 
-    lc_fname = current_panel->dir.list[current_file].fname;
-    vpath = vfs_path_from_str (lc_fname);
-    need_update = end_chown = TRUE;
-    if (mc_chmod (vpath, get_mode ()) == -1)
-        message (D_ERROR, MSG_ERROR, _("Cannot chmod \"%s\"\n%s"),
-                 lc_fname, unix_error_string (errno));
-    /* call mc_chown only, if mc_chmod didn't fail */
-    else if (mc_chown (vpath, (ch_flags[9] == '+') ? sf->st_uid : (uid_t) (-1),
-                       (ch_flags[10] == '+') ? sf->st_gid : (gid_t) (-1)) == -1)
-        message (D_ERROR, MSG_ERROR, _("Cannot chown \"%s\"\n%s"),
-                 lc_fname, unix_error_string (errno));
-    do_file_mark (current_panel, current_file, 0);
-    vfs_path_free (vpath);
+    if (!do_advanced_chown
+        (vpath, get_mode (), (ch_flags[9] == '+') ? a_uid : (uid_t) (-1),
+         (ch_flags[10] == '+') ? a_gid : (gid_t) (-1)))
+        return;
 
     do
     {
-        lc_fname = next_file ();
-        vpath = vfs_path_from_str (lc_fname);
+        const char *fname;
 
-        if (mc_stat (vpath, sf) != 0)
+        fname = next_file ();
+        vpath = vfs_path_from_str (fname);
+        ok = (mc_stat (vpath, sf) == 0);
+
+        if (!ok)
         {
-            vfs_path_free (vpath);
-            break;
-        }
+            /* if current file was deleted outside mc -- try next file */
+            /* decrease current_panel->marked */
+            do_file_mark (current_panel, current_file, 0);
 
-        ch_cmode = sf->st_mode;
+            /* try next file */
+            ok = TRUE;
+        }
+        else
+        {
+            ch_cmode = sf->st_mode;
 
-        if (mc_chmod (vpath, get_mode ()) == -1)
-            message (D_ERROR, MSG_ERROR, _("Cannot chmod \"%s\"\n%s"),
-                     lc_fname, unix_error_string (errno));
-        /* call mc_chown only, if mc_chmod didn't fail */
-        else if (mc_chown (vpath, (ch_flags[9] == '+') ? a_uid : (uid_t) (-1),
-                           (ch_flags[10] == '+') ? a_gid : (gid_t) (-1)) == -1)
-            message (D_ERROR, MSG_ERROR, _("Cannot chown \"%s\"\n%s"),
-                     lc_fname, unix_error_string (errno));
+            ok = do_advanced_chown (vpath, get_mode (),
+                                    (ch_flags[9] == '+') ? a_uid : (uid_t) (-1),
+                                    (ch_flags[10] == '+') ? a_gid : (gid_t) (-1));
+        }
 
-        do_file_mark (current_panel, current_file, 0);
         vfs_path_free (vpath);
     }
-    while (current_panel->marked != 0);
+    while (ok && current_panel->marked != 0);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -826,43 +972,57 @@ apply_advanced_chowns (struct stat *sf)
 /* --------------------------------------------------------------------------------------------- */
 
 void
-chown_advanced_cmd (void)
+advanced_chown_cmd (void)
 {
+    gboolean need_update;
+    gboolean end_chown;
+
     /* Number of files at startup */
     int files_on_begin;
 
     files_on_begin = MAX (1, current_panel->marked);
 
+    advanced_chown_i18n ();
+
+    current_file = 0;
+    ignore_all = FALSE;
+
     do
     {                           /* do while any files remaining */
-        int file_idx;
-        char buffer[BUF_MEDIUM];
         vfs_path_t *vpath;
+        WDialog *ch_dlg;
+        const char *fname;
         int result;
+        int file_idx;
+        char buffer[BUF_MEDIUM];
 
-        init_chown_advanced ();
+        do_refresh ();
 
-        if (current_panel->marked)
+        need_update = FALSE;
+        end_chown = FALSE;
+
+        if (current_panel->marked != 0)
             fname = next_file ();       /* next marked file */
         else
             fname = selection (current_panel)->fname;   /* single file */
+
         vpath = vfs_path_from_str (fname);
 
-        if (mc_stat (vpath, sf_stat) != 0)
-        {                       /* get status of file */
-            dlg_destroy (ch_dlg);
+        if (mc_stat (vpath, &sf_stat) != 0)
+        {
             vfs_path_free (vpath);
             break;
         }
 
-        ch_cmode = sf_stat->st_mode;
+        ch_cmode = sf_stat.st_mode;
+
+        ch_dlg = advanced_chown_init ();
 
         file_idx = files_on_begin == 1 ? 1 : (files_on_begin - current_panel->marked + 1);
         g_snprintf (buffer, sizeof (buffer), "%s (%d/%d)",
                     str_fit_to_term (fname, WIDGET (ch_dlg)->cols - 20, J_LEFT_FIT),
                     file_idx, files_on_begin);
         label_set_text (l_filename, buffer);
-        chown_refresh ();
         update_ownership ();
 
         result = dlg_run (ch_dlg);
@@ -874,20 +1034,37 @@ chown_advanced_cmd (void)
             break;
 
         case B_ENTER:
+            if (current_panel->marked <= 1)
+            {
+                /* single or last file */
+                if (mc_chmod (vpath, get_mode ()) == -1)
+                    message (D_ERROR, MSG_ERROR, _("Cannot chmod \"%s\"\n%s"),
+                             fname, unix_error_string (errno));
+                /* call mc_chown only, if mc_chmod didn't fail */
+                else if (mc_chown
+                         (vpath, (ch_flags[9] == '+') ? sf_stat.st_uid : (uid_t) (-1),
+                          (ch_flags[10] == '+') ? sf_stat.st_gid : (gid_t) (-1)) == -1)
+                    message (D_ERROR, MSG_ERROR, _("Cannot chown \"%s\"\n%s"), fname,
+                             unix_error_string (errno));
+
+                end_chown = TRUE;
+            }
+            else if (!try_advanced_chown
+                     (vpath, get_mode (), (ch_flags[9] == '+') ? sf_stat.st_uid : (uid_t) (-1),
+                      (ch_flags[10] == '+') ? sf_stat.st_gid : (gid_t) (-1)))
+            {
+                /* stop multiple files processing */
+                result = B_CANCEL;
+                end_chown = TRUE;
+            }
+
             need_update = TRUE;
-            if (mc_chmod (vpath, get_mode ()) == -1)
-                message (D_ERROR, MSG_ERROR, _("Cannot chmod \"%s\"\n%s"),
-                         fname, unix_error_string (errno));
-            /* call mc_chown only, if mc_chmod didn't fail */
-            else if (mc_chown
-                     (vpath, (ch_flags[9] == '+') ? sf_stat->st_uid : (uid_t) (-1),
-                      (ch_flags[10] == '+') ? sf_stat->st_gid : (gid_t) (-1)) == -1)
-                message (D_ERROR, MSG_ERROR, _("Cannot chown \"%s\"\n%s"), fname,
-                         unix_error_string (errno));
             break;
 
         case B_SETALL:
-            apply_advanced_chowns (sf_stat);
+            apply_advanced_chowns (vpath, &sf_stat);
+            need_update = TRUE;
+            end_chown = TRUE;
             break;
 
         case B_SKIP:
@@ -895,17 +1072,19 @@ chown_advanced_cmd (void)
             break;
         }
 
-        if (current_panel->marked && result != B_CANCEL)
+        if (current_panel->marked != 0 && result != B_CANCEL)
         {
             do_file_mark (current_panel, current_file, 0);
             need_update = TRUE;
         }
-        dlg_destroy (ch_dlg);
+
         vfs_path_free (vpath);
+
+        dlg_destroy (ch_dlg);
     }
-    while (current_panel->marked && !end_chown);
+    while (current_panel->marked != 0 && !end_chown);
 
-    chown_advanced_done ();
+    advanced_chown_done (need_update);
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.20/src/filemanager/achown.h mc-4.8.21/src/filemanager/achown.h
--- mc-4.8.20/src/filemanager/achown.h	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/achown.h	2018-05-27 21:56:21.000000000 +0200
@@ -15,7 +15,7 @@
 
 /*** declarations of public functions ************************************************************/
 
-void chown_advanced_cmd (void);
+void advanced_chown_cmd (void);
 
 /*** inline functions ****************************************************************************/
 #endif /* MC__ACHOWN_H */
diff -urpN mc-4.8.20/src/filemanager/boxes.c mc-4.8.21/src/filemanager/boxes.c
--- mc-4.8.20/src/filemanager/boxes.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/filemanager/boxes.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Some misc dialog boxes for the program.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -546,10 +546,10 @@ configure_box (void)
                     QUICK_CHECKBOX (N_("Rotating d&ash"), &nice_rotating_dash, NULL),
                     QUICK_CHECKBOX (N_("Cd follows lin&ks"), &mc_global.vfs.cd_symlinks, NULL),
                     QUICK_CHECKBOX (N_("Sa&fe delete"), &safe_delete, NULL),
+                    QUICK_CHECKBOX (N_("Safe overwrite"), &safe_overwrite, NULL),       /* w/o hotkey */
                     QUICK_CHECKBOX (N_("A&uto save setup"), &auto_save_setup, NULL),
                     QUICK_SEPARATOR (FALSE),
                     QUICK_SEPARATOR (FALSE),
-                    QUICK_SEPARATOR (FALSE),
                 QUICK_STOP_GROUPBOX,
             QUICK_STOP_COLUMNS,
             QUICK_BUTTONS_OK_CANCEL,
diff -urpN mc-4.8.20/src/filemanager/chmod.c mc-4.8.21/src/filemanager/chmod.c
--- mc-4.8.20/src/filemanager/chmod.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/chmod.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Chmod command -- for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -39,9 +39,9 @@
 #include "lib/strutil.h"
 #include "lib/util.h"
 #include "lib/widget.h"
-#include "lib/keybind.h"        /* CK_Cancel */
 
 #include "midnight.h"           /* current_panel */
+
 #include "chmod.h"
 
 /*** global variables ****************************************************************************/
@@ -52,59 +52,51 @@
 #define PY 2
 
 #define B_MARKED B_USER
-#define B_ALL    (B_USER + 1)
+#define B_SETALL (B_USER + 1)
 #define B_SETMRK (B_USER + 2)
 #define B_CLRMRK (B_USER + 3)
 
+#define BUTTONS      6
+#define BUTTONS_PERM 12
+#define LABELS       4
+
 /*** file scope type declarations ****************************************************************/
 
 /*** file scope variables ************************************************************************/
 
-static gboolean single_set;
-
-static gboolean mode_change, need_update, end_chmod;
-static int c_file;
-
-static mode_t and_mask, or_mask, c_stat;
-
-static WLabel *statl;
-static WGroupbox *file_gb;
-
 static struct
 {
     mode_t mode;
     const char *text;
     gboolean selected;
     WCheck *check;
-} check_perm[] =
+} check_perm[BUTTONS_PERM] =
 {
     /* *INDENT-OFF* */
-    { S_ISUID, N_("set &user ID on execution"), FALSE, NULL },
+    { S_ISUID, N_("set &user ID on execution"),  FALSE, NULL },
     { S_ISGID, N_("set &group ID on execution"), FALSE, NULL },
-    { S_ISVTX, N_("stick&y bit"), FALSE, NULL },
-    { S_IRUSR, N_("&read by owner"), FALSE, NULL },
-    { S_IWUSR, N_("&write by owner"), FALSE, NULL },
-    { S_IXUSR, N_("e&xecute/search by owner"), FALSE, NULL },
-    { S_IRGRP, N_("rea&d by group"), FALSE, NULL },
-    { S_IWGRP, N_("write by grou&p"), FALSE, NULL },
-    { S_IXGRP, N_("execu&te/search by group"), FALSE, NULL },
-    { S_IROTH, N_("read &by others"), FALSE, NULL },
-    { S_IWOTH, N_("wr&ite by others"), FALSE, NULL },
-    { S_IXOTH, N_("execute/searc&h by others"), FALSE, NULL }
+    { S_ISVTX, N_("stick&y bit"),                FALSE, NULL },
+    { S_IRUSR, N_("&read by owner"),             FALSE, NULL },
+    { S_IWUSR, N_("&write by owner"),            FALSE, NULL },
+    { S_IXUSR, N_("e&xecute/search by owner"),   FALSE, NULL },
+    { S_IRGRP, N_("rea&d by group"),             FALSE, NULL },
+    { S_IWGRP, N_("write by grou&p"),            FALSE, NULL },
+    { S_IXGRP, N_("execu&te/search by group"),   FALSE, NULL },
+    { S_IROTH, N_("read &by others"),            FALSE, NULL },
+    { S_IWOTH, N_("wr&ite by others"),           FALSE, NULL },
+    { S_IXOTH, N_("execute/searc&h by others"),  FALSE, NULL }
     /* *INDENT-ON* */
 };
 
-static const int check_perm_num = G_N_ELEMENTS (check_perm);
 static int check_perm_len = 0;
 
-static const char *file_info_labels[] = {
+static const char *file_info_labels[LABELS] = {
     N_("Name:"),
     N_("Permissions (octal):"),
     N_("Owner name:"),
     N_("Group name:")
 };
 
-static const int file_info_labels_num = G_N_ELEMENTS (file_info_labels);
 static int file_info_labels_len = 0;
 
 static struct
@@ -114,19 +106,26 @@ static struct
     int y;                      /* vertical position relatively to dialog bottom boundary */
     int len;
     const char *text;
-} chmod_but[] =
+} chmod_but[BUTTONS] =
 {
     /* *INDENT-OFF* */
-    { B_ALL,    NORMAL_BUTTON, 6, 0, N_("Set &all") },
-    { B_MARKED, NORMAL_BUTTON, 6, 0, N_("&Marked all") },
-    { B_SETMRK, NORMAL_BUTTON, 5, 0, N_("S&et marked") },
+    { B_SETALL, NORMAL_BUTTON, 6, 0, N_("Set &all")      },
+    { B_MARKED, NORMAL_BUTTON, 6, 0, N_("&Marked all")   },
+    { B_SETMRK, NORMAL_BUTTON, 5, 0, N_("S&et marked")   },
     { B_CLRMRK, NORMAL_BUTTON, 5, 0, N_("C&lear marked") },
-    { B_ENTER, DEFPUSH_BUTTON, 3, 0, N_("&Set") },
-    { B_CANCEL, NORMAL_BUTTON, 3, 0, N_("&Cancel") }
+    { B_ENTER, DEFPUSH_BUTTON, 3, 0, N_("&Set")          },
+    { B_CANCEL, NORMAL_BUTTON, 3, 0, N_("&Cancel")       }
     /* *INDENT-ON* */
 };
 
-static const int chmod_but_num = G_N_ELEMENTS (chmod_but);
+static gboolean mode_change;
+static int current_file;
+static gboolean ignore_all;
+
+static mode_t and_mask, or_mask, ch_mode;
+
+static WLabel *statl;
+static WGroupbox *file_gb;
 
 /* --------------------------------------------------------------------------------------------- */
 /*** file scope functions ************************************************************************/
@@ -144,17 +143,17 @@ chmod_i18n (void)
     i18n = TRUE;
 
 #ifdef ENABLE_NLS
-    for (i = 0; i < check_perm_num; i++)
+    for (i = 0; i < BUTTONS_PERM; i++)
         check_perm[i].text = _(check_perm[i].text);
 
-    for (i = 0; i < file_info_labels_num; i++)
+    for (i = 0; i < LABELS; i++)
         file_info_labels[i] = _(file_info_labels[i]);
 
-    for (i = 0; i < chmod_but_num; i++)
+    for (i = 0; i < BUTTONS; i++)
         chmod_but[i].text = _(chmod_but[i].text);
 #endif /* ENABLE_NLS */
 
-    for (i = 0; i < check_perm_num; i++)
+    for (i = 0; i < BUTTONS_PERM; i++)
     {
         len = str_term_width1 (check_perm[i].text);
         check_perm_len = MAX (check_perm_len, len);
@@ -162,13 +161,13 @@ chmod_i18n (void)
 
     check_perm_len += 1 + 3 + 1;        /* mark, [x] and space */
 
-    for (i = 0; i < file_info_labels_num; i++)
+    for (i = 0; i < LABELS; i++)
     {
         len = str_term_width1 (file_info_labels[i]) + 2;        /* spaces around */
         file_info_labels_len = MAX (file_info_labels_len, len);
     }
 
-    for (i = 0; i < chmod_but_num; i++)
+    for (i = 0; i < BUTTONS; i++)
     {
         chmod_but[i].len = str_term_width1 (chmod_but[i].text) + 3;     /* [], spaces and w/o & */
         if (chmod_but[i].flags == DEFPUSH_BUTTON)
@@ -220,22 +219,26 @@ chmod_callback (Widget * w, Widget * sen
 
     switch (msg)
     {
+    case MSG_DRAW:
+        chmod_refresh (h);
+        return MSG_HANDLED;
+
     case MSG_NOTIFY:
         {
             /* handle checkboxes */
             int i;
 
             /* whether notification was sent by checkbox? */
-            for (i = 0; i < check_perm_num; i++)
+            for (i = 0; i < BUTTONS_PERM; i++)
                 if (sender == WIDGET (check_perm[i].check))
                     break;
 
-            if (i < check_perm_num)
+            if (i < BUTTONS_PERM)
             {
                 char buffer[BUF_TINY];
 
-                c_stat ^= check_perm[i].mode;
-                g_snprintf (buffer, sizeof (buffer), "%o", (unsigned int) c_stat);
+                ch_mode ^= check_perm[i].mode;
+                g_snprintf (buffer, sizeof (buffer), "%o", (unsigned int) ch_mode);
                 label_set_text (statl, buffer);
                 chmod_toggle_select (h, i);
                 mode_change = TRUE;
@@ -252,11 +255,11 @@ chmod_callback (Widget * w, Widget * sen
             unsigned long id;
 
             id = dlg_get_current_widget_id (h);
-            for (i = 0; i < check_perm_num; i++)
+            for (i = 0; i < BUTTONS_PERM; i++)
                 if (id == WIDGET (check_perm[i].check)->id)
                     break;
 
-            if (i < check_perm_num)
+            if (i < BUTTONS_PERM)
             {
                 chmod_toggle_select (h, i);
                 if (parm == KEY_IC)
@@ -266,10 +269,6 @@ chmod_callback (Widget * w, Widget * sen
         }
         return MSG_NOT_HANDLED;
 
-    case MSG_DRAW:
-        chmod_refresh (h);
-        return MSG_HANDLED;
-
     default:
         return dlg_default_callback (w, sender, msg, parm, data);
     }
@@ -278,8 +277,9 @@ chmod_callback (Widget * w, Widget * sen
 /* --------------------------------------------------------------------------------------------- */
 
 static WDialog *
-init_chmod (const char *fname, const struct stat *sf_stat)
+chmod_init (const char *fname, const struct stat *sf_stat)
 {
+    gboolean single_set;
     WDialog *ch_dlg;
     int lines, cols;
     int i, y;
@@ -288,6 +288,8 @@ init_chmod (const char *fname, const str
     const char *c_fname, *c_fown, *c_fgrp;
     char buffer[BUF_TINY];
 
+    mode_change = FALSE;
+
     single_set = (current_panel->marked < 2);
     perm_gb_len = check_perm_len + 2;
     file_gb_len = file_info_labels_len + 2;
@@ -308,16 +310,16 @@ init_chmod (const char *fname, const str
         dlg_create (TRUE, 0, 0, lines, cols, WPOS_CENTER, FALSE, dialog_colors,
                     chmod_callback, NULL, "[Chmod]", _("Chmod command"));
 
-    add_widget (ch_dlg, groupbox_new (PY, PX, check_perm_num + 2, perm_gb_len, _("Permission")));
+    add_widget (ch_dlg, groupbox_new (PY, PX, BUTTONS_PERM + 2, perm_gb_len, _("Permission")));
 
-    for (i = 0; i < check_perm_num; i++)
+    for (i = 0; i < BUTTONS_PERM; i++)
     {
-        check_perm[i].check = check_new (PY + i + 1, PX + 2, (c_stat & check_perm[i].mode) != 0,
+        check_perm[i].check = check_new (PY + i + 1, PX + 2, (ch_mode & check_perm[i].mode) != 0,
                                          check_perm[i].text);
         add_widget (ch_dlg, check_perm[i].check);
     }
 
-    file_gb = groupbox_new (PY, PX + perm_gb_len + 1, check_perm_num + 2, file_gb_len, _("File"));
+    file_gb = groupbox_new (PY, PX + perm_gb_len + 1, BUTTONS_PERM + 2, file_gb_len, _("File"));
     add_widget (ch_dlg, file_gb);
 
     /* Set the labels */
@@ -325,7 +327,7 @@ init_chmod (const char *fname, const str
     cols = PX + perm_gb_len + 3;
     c_fname = str_trunc (fname, file_gb_len - 3);
     add_widget (ch_dlg, label_new (y, cols, c_fname));
-    g_snprintf (buffer, sizeof (buffer), "%o", (unsigned int) c_stat);
+    g_snprintf (buffer, sizeof (buffer), "%o", (unsigned int) ch_mode);
     statl = label_new (y + 2, cols, buffer);
     add_widget (ch_dlg, statl);
     c_fown = str_trunc (get_owner (sf_stat->st_uid), file_gb_len - 3);
@@ -337,7 +339,7 @@ init_chmod (const char *fname, const str
     {
         i = 0;
         add_widget (ch_dlg, hline_new (lines - chmod_but[i].y - 1, -1, -1));
-        for (; i < chmod_but_num - 2; i++)
+        for (; i < BUTTONS - 2; i++)
         {
             y = lines - chmod_but[i].y;
             add_widget (ch_dlg,
@@ -352,7 +354,7 @@ init_chmod (const char *fname, const str
         }
     }
 
-    i = chmod_but_num - 2;
+    i = BUTTONS - 2;
     y = lines - chmod_but[i].y;
     add_widget (ch_dlg, hline_new (y - 1, -1, -1));
     add_widget (ch_dlg,
@@ -372,7 +374,7 @@ init_chmod (const char *fname, const str
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-chmod_done (void)
+chmod_done (gboolean need_update)
 {
     if (need_update)
         update_panels (UP_OPTIMIZE, UP_KEEPSEL);
@@ -381,61 +383,113 @@ chmod_done (void)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static char *
+static const char *
 next_file (void)
 {
-    while (!current_panel->dir.list[c_file].f.marked)
-        c_file++;
+    while (!current_panel->dir.list[current_file].f.marked)
+        current_file++;
 
-    return current_panel->dir.list[c_file].fname;
+    return current_panel->dir.list[current_file].fname;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
-static void
-do_chmod (struct stat *sf)
+static gboolean
+try_chmod (const vfs_path_t * p, mode_t m)
+{
+    while (mc_chmod (p, m) == -1 && !ignore_all)
+    {
+        int my_errno = errno;
+        int result;
+        char *msg;
+
+        msg =
+            g_strdup_printf (_("Cannot chmod \"%s\"\n%s"), x_basename (vfs_path_as_str (p)),
+                             unix_error_string (my_errno));
+        result =
+            query_dialog (MSG_ERROR, msg, D_ERROR, 4, _("&Ignore"), _("Ignore &all"), _("&Retry"),
+                          _("&Cancel"));
+        g_free (msg);
+
+        switch (result)
+        {
+        case 0:
+            /* try next file */
+            return TRUE;
+
+        case 1:
+            ignore_all = TRUE;
+            /* try next file */
+            return TRUE;
+
+        case 2:
+            /* retry this file */
+            break;
+
+        case 3:
+        default:
+            /* stop remain files processing */
+            return FALSE;
+        }
+    }
+
+    return TRUE;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static gboolean
+do_chmod (const vfs_path_t * p, struct stat *sf)
 {
-    vfs_path_t *vpath;
+    gboolean ret;
+
     sf->st_mode &= and_mask;
     sf->st_mode |= or_mask;
 
-    vpath = vfs_path_from_str (current_panel->dir.list[c_file].fname);
-    if (mc_chmod (vpath, sf->st_mode) == -1)
-        message (D_ERROR, MSG_ERROR, _("Cannot chmod \"%s\"\n%s"),
-                 current_panel->dir.list[c_file].fname, unix_error_string (errno));
+    ret = try_chmod (p, sf->st_mode);
+
+    do_file_mark (current_panel, current_file, 0);
 
-    vfs_path_free (vpath);
-    do_file_mark (current_panel, c_file, 0);
+    return ret;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-apply_mask (struct stat *sf)
+apply_mask (vfs_path_t * vpath, struct stat *sf)
 {
-    need_update = TRUE;
-    end_chmod = TRUE;
+    gboolean ok;
 
-    do_chmod (sf);
+    if (!do_chmod (vpath, sf))
+        return;
 
     do
     {
-        char *fname;
-        vfs_path_t *vpath;
-        gboolean ok;
+        const char *fname;
 
         fname = next_file ();
         vpath = vfs_path_from_str (fname);
         ok = (mc_stat (vpath, sf) == 0);
-        vfs_path_free (vpath);
+
         if (!ok)
-            return;
+        {
+            /* if current file was deleted outside mc -- try next file */
+            /* decrease current_panel->marked */
+            do_file_mark (current_panel, current_file, 0);
 
-        c_stat = sf->st_mode;
+            /* try next file */
+            ok = TRUE;
+        }
+        else
+        {
+            ch_mode = sf->st_mode;
+
+            ok = do_chmod (vpath, sf);
+        }
 
-        do_chmod (sf);
+        vfs_path_free (vpath);
     }
-    while (current_panel->marked != 0);
+    while (ok && current_panel->marked != 0);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -445,22 +499,26 @@ apply_mask (struct stat *sf)
 void
 chmod_cmd (void)
 {
+    gboolean need_update;
+    gboolean end_chmod;
+
     chmod_i18n ();
 
+    current_file = 0;
+    ignore_all = FALSE;
+
     do
     {                           /* do while any files remaining */
         vfs_path_t *vpath;
         WDialog *ch_dlg;
         struct stat sf_stat;
-        char *fname;
+        const char *fname;
         int i, result;
 
         do_refresh ();
 
-        mode_change = FALSE;
         need_update = FALSE;
         end_chmod = FALSE;
-        c_file = 0;
 
         if (current_panel->marked != 0)
             fname = next_file ();       /* next marked file */
@@ -475,33 +533,47 @@ chmod_cmd (void)
             break;
         }
 
-        c_stat = sf_stat.st_mode;
+        ch_mode = sf_stat.st_mode;
 
-        ch_dlg = init_chmod (fname, &sf_stat);
+        ch_dlg = chmod_init (fname, &sf_stat);
 
-        /* do action */
         result = dlg_run (ch_dlg);
 
         switch (result)
         {
-        case B_ENTER:
-            if (mode_change && mc_chmod (vpath, c_stat) == -1)
-                message (D_ERROR, MSG_ERROR, _("Cannot chmod \"%s\"\n%s"),
-                         fname, unix_error_string (errno));
-            need_update = TRUE;
-            break;
-
         case B_CANCEL:
             end_chmod = TRUE;
             break;
 
-        case B_ALL:
+        case B_ENTER:
+            if (mode_change)
+            {
+                if (current_panel->marked <= 1)
+                {
+                    /* single or last file */
+                    if (mc_chmod (vpath, ch_mode) == -1 && !ignore_all)
+                        message (D_ERROR, MSG_ERROR, _("Cannot chmod \"%s\"\n%s"), fname,
+                                 unix_error_string (errno));
+                    end_chmod = TRUE;
+                }
+                else if (!try_chmod (vpath, ch_mode))
+                {
+                    /* stop multiple files processing */
+                    result = B_CANCEL;
+                    end_chmod = TRUE;
+                }
+            }
+
+            need_update = TRUE;
+            break;
+
+        case B_SETALL:
         case B_MARKED:
             and_mask = or_mask = 0;
             and_mask = ~and_mask;
 
-            for (i = 0; i < check_perm_num; i++)
-                if (check_perm[i].selected || result == B_ALL)
+            for (i = 0; i < BUTTONS_PERM; i++)
+                if (check_perm[i].selected || result == B_SETALL)
                 {
                     if (check_perm[i].check->state)
                         or_mask |= check_perm[i].mode;
@@ -509,29 +581,35 @@ chmod_cmd (void)
                         and_mask &= ~check_perm[i].mode;
                 }
 
-            apply_mask (&sf_stat);
+            apply_mask (vpath, &sf_stat);
+            need_update = TRUE;
+            end_chmod = TRUE;
             break;
 
         case B_SETMRK:
             and_mask = or_mask = 0;
             and_mask = ~and_mask;
 
-            for (i = 0; i < check_perm_num; i++)
+            for (i = 0; i < BUTTONS_PERM; i++)
                 if (check_perm[i].selected)
                     or_mask |= check_perm[i].mode;
 
-            apply_mask (&sf_stat);
+            apply_mask (vpath, &sf_stat);
+            need_update = TRUE;
+            end_chmod = TRUE;
             break;
 
         case B_CLRMRK:
             and_mask = or_mask = 0;
             and_mask = ~and_mask;
 
-            for (i = 0; i < check_perm_num; i++)
+            for (i = 0; i < BUTTONS_PERM; i++)
                 if (check_perm[i].selected)
                     and_mask &= ~check_perm[i].mode;
 
-            apply_mask (&sf_stat);
+            apply_mask (vpath, &sf_stat);
+            need_update = TRUE;
+            end_chmod = TRUE;
             break;
 
         default:
@@ -540,7 +618,7 @@ chmod_cmd (void)
 
         if (current_panel->marked != 0 && result != B_CANCEL)
         {
-            do_file_mark (current_panel, c_file, 0);
+            do_file_mark (current_panel, current_file, 0);
             need_update = TRUE;
         }
 
@@ -550,7 +628,7 @@ chmod_cmd (void)
     }
     while (current_panel->marked != 0 && !end_chmod);
 
-    chmod_done ();
+    chmod_done (need_update);
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.20/src/filemanager/chown.c mc-4.8.21/src/filemanager/chown.c
--- mc-4.8.20/src/filemanager/chown.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/chown.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Chown command -- for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -45,9 +45,6 @@
 #include "lib/widget.h"
 
 #include "src/setup.h"          /* panels_options */
-
-/* Needed for the extern declarations of integer parameters */
-#include "chmod.h"
 #include "midnight.h"           /* current_panel */
 
 #include "chown.h"
@@ -73,40 +70,47 @@
 
 /*** file scope variables ************************************************************************/
 
-static int need_update, end_chown;
-static int current_file;
-static int single_set;
-static WListbox *l_user, *l_group;
 
-/* *INDENT-OFF* */
 static struct
 {
     int ret_cmd;
     button_flags_t flags;
-    int y, len;
+    int y;
+    int len;
     const char *text;
-} chown_but[BUTTONS] = {
-    { B_SETALL, NORMAL_BUTTON,  5, 0, N_("Set &all") },
-    { B_SETGRP, NORMAL_BUTTON,  5, 0, N_("Set &groups") },
-    { B_SETUSR, NORMAL_BUTTON,  5, 0, N_("Set &users") },
-    { B_ENTER,  DEFPUSH_BUTTON, 3, 0, N_("&Set") },
-    { B_CANCEL, NORMAL_BUTTON,  3, 0, N_("&Cancel") },
+} chown_but[BUTTONS] =
+{
+    /* *INDENT-OFF* */
+    { B_SETALL,  NORMAL_BUTTON, 5, 0, N_("Set &all")    },
+    { B_SETGRP,  NORMAL_BUTTON, 5, 0, N_("Set &groups") },
+    { B_SETUSR,  NORMAL_BUTTON, 5, 0, N_("Set &users")  },
+    { B_ENTER,  DEFPUSH_BUTTON, 3, 0, N_("&Set")        },
+    { B_CANCEL,  NORMAL_BUTTON, 3, 0, N_("&Cancel")     }
+    /* *INDENT-ON* */
 };
 
 /* summary length of three buttons */
 static int blen = 0;
 
-static struct {
+static struct
+{
     int y;
     WLabel *l;
-} chown_label [LABELS] = {
-    { 4 , NULL },
-    { 6 , NULL },
-    { 8 , NULL },
-    { 10 , NULL },
+} chown_label[LABELS] =
+{
+    /* *INDENT-OFF* */
+    {  4, NULL },
+    {  6, NULL },
+    {  8, NULL },
+    { 10, NULL },
     { 12, NULL }
+    /* *INDENT-ON* */
 };
-/* *INDENT-ON* */
+
+static int current_file;
+static gboolean ignore_all;
+
+static WListbox *l_user, *l_group;
 
 /* --------------------------------------------------------------------------------------------- */
 /*** file scope functions ************************************************************************/
@@ -116,7 +120,7 @@ static void
 chown_i18n (void)
 {
     static gboolean i18n = FALSE;
-    unsigned int i;
+    int i;
 
     if (i18n)
         return;
@@ -146,8 +150,8 @@ chown_i18n (void)
 static void
 chown_refresh (WDialog * h)
 {
-    const int y = 3;
-    const int x = 7 + GW * 2;
+    int y = 3;
+    int x = 7 + GW * 2;
 
     dlg_default_repaint (h);
 
@@ -167,17 +171,6 @@ chown_refresh (WDialog * h)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static char *
-next_file (void)
-{
-    while (!current_panel->dir.list[current_file].f.marked)
-        current_file++;
-
-    return current_panel->dir.list[current_file].fname;
-}
-
-/* --------------------------------------------------------------------------------------------- */
-
 static cb_ret_t
 chown_callback (Widget * w, Widget * sender, widget_msg_t msg, int parm, void *data)
 {
@@ -195,22 +188,18 @@ chown_callback (Widget * w, Widget * sen
 /* --------------------------------------------------------------------------------------------- */
 
 static WDialog *
-init_chown (void)
+chown_init (void)
 {
+    int single_set;
+    WDialog *ch_dlg;
     int lines, cols;
-    int i;
-    int y;
+    int i, y;
     struct passwd *l_pass;
     struct group *l_grp;
-    WDialog *ch_dlg;
-
-    do_refresh ();
 
-    end_chown = need_update = current_file = 0;
     single_set = (current_panel->marked < 2) ? 3 : 0;
-
+    lines = GH + 4 + (single_set != 0 ? 2 : 4);
     cols = GW * 3 + 2 + 6;
-    lines = GH + 4 + (single_set ? 2 : 4);
 
     ch_dlg =
         dlg_create (TRUE, 0, 0, lines, cols, WPOS_CENTER, FALSE, dialog_colors, chown_callback,
@@ -246,7 +235,7 @@ init_chown (void)
         add_widget (ch_dlg, chown_label[i].l);
     }
 
-    if (!single_set)
+    if (single_set == 0)
     {
         int x;
 
@@ -284,7 +273,7 @@ init_chown (void)
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-chown_done (void)
+chown_done (gboolean need_update)
 {
     if (need_update)
         update_panels (UP_OPTIMIZE, UP_KEEPSEL);
@@ -293,35 +282,107 @@ chown_done (void)
 
 /* --------------------------------------------------------------------------------------------- */
 
-static void
-do_chown (uid_t u, gid_t g)
+static const char *
+next_file (void)
+{
+    while (!current_panel->dir.list[current_file].f.marked)
+        current_file++;
+
+    return current_panel->dir.list[current_file].fname;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static gboolean
+try_chown (const vfs_path_t * p, uid_t u, gid_t g)
+{
+    while (mc_chown (p, u, g) == -1 && !ignore_all)
+    {
+        int my_errno = errno;
+        int result;
+        char *msg;
+
+        msg =
+            g_strdup_printf (_("Cannot chown \"%s\"\n%s"), x_basename (vfs_path_as_str (p)),
+                             unix_error_string (my_errno));
+        result =
+            query_dialog (MSG_ERROR, msg, D_ERROR, 4, _("&Ignore"), _("Ignore &all"), _("&Retry"),
+                          _("&Cancel"));
+        g_free (msg);
+
+        switch (result)
+        {
+        case 0:
+            /* try next file */
+            return TRUE;
+
+        case 1:
+            ignore_all = TRUE;
+            /* try next file */
+            return TRUE;
+
+        case 2:
+            /* retry this file */
+            break;
+
+        case 3:
+        default:
+            /* stop remain files processing */
+            return FALSE;
+        }
+    }
+
+    return TRUE;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static gboolean
+do_chown (const vfs_path_t * p, uid_t u, gid_t g)
 {
-    vfs_path_t *vpath;
+    gboolean ret;
 
-    vpath = vfs_path_from_str (current_panel->dir.list[current_file].fname);
-    if (mc_chown (vpath, u, g) == -1)
-        message (D_ERROR, MSG_ERROR, _("Cannot chown \"%s\"\n%s"),
-                 current_panel->dir.list[current_file].fname, unix_error_string (errno));
+    ret = try_chown (p, u, g);
 
-    vfs_path_free (vpath);
     do_file_mark (current_panel, current_file, 0);
+
+    return ret;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-apply_chowns (uid_t u, gid_t g)
+apply_chowns (vfs_path_t * vpath, uid_t u, gid_t g)
 {
+    gboolean ok;
 
-    need_update = end_chown = 1;
-    do_chown (u, g);
+    if (!do_chown (vpath, u, g))
+        return;
 
     do
     {
-        next_file ();
-        do_chown (u, g);
+        const char *fname;
+        struct stat sf;
+
+        fname = next_file ();
+        vpath = vfs_path_from_str (fname);
+        ok = (mc_stat (vpath, &sf) == 0);
+
+        if (!ok)
+        {
+            /* if current file was deleted outside mc -- try next file */
+            /* decrease current_panel->marked */
+            do_file_mark (current_panel, current_file, 0);
+
+            /* try next file */
+            ok = TRUE;
+        }
+        else
+            ok = do_chown (vpath, u, g);
+
+        vfs_path_free (vpath);
     }
-    while (current_panel->marked);
+    while (ok && current_panel->marked != 0);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -331,35 +392,44 @@ apply_chowns (uid_t u, gid_t g)
 void
 chown_cmd (void)
 {
-    char *fname;
-    struct stat sf_stat;
-    uid_t new_user;
-    gid_t new_group;
-    char buffer[BUF_TINY];
+    gboolean need_update;
+    gboolean end_chown;
 
     chown_i18n ();
 
+    current_file = 0;
+    ignore_all = FALSE;
+
     do
     {                           /* do while any files remaining */
         vfs_path_t *vpath;
         WDialog *ch_dlg;
+        struct stat sf_stat;
+        const char *fname;
+        int result;
+        char buffer[BUF_TINY];
+        uid_t new_user = (uid_t) (-1);
+        gid_t new_group = (gid_t) (-1);
+
+        do_refresh ();
 
-        ch_dlg = init_chown ();
-        new_user = new_group = -1;
+        need_update = FALSE;
+        end_chown = FALSE;
 
-        if (current_panel->marked)
+        if (current_panel->marked != 0)
             fname = next_file ();       /* next marked file */
         else
             fname = selection (current_panel)->fname;   /* single file */
 
         vpath = vfs_path_from_str (fname);
+
         if (mc_stat (vpath, &sf_stat) != 0)
-        {                       /* get status of file */
-            dlg_destroy (ch_dlg);
+        {
             vfs_path_free (vpath);
             break;
         }
-        vfs_path_free (vpath);
+
+        ch_dlg = chown_init ();
 
         /* select in listboxes */
         listbox_select_entry (l_user, listbox_search_text (l_user, get_owner (sf_stat.st_uid)));
@@ -372,88 +442,107 @@ chown_cmd (void)
         chown_label (3, buffer);
         chown_label (4, string_perm (sf_stat.st_mode));
 
-        switch (dlg_run (ch_dlg))
+        result = dlg_run (ch_dlg);
+
+        switch (result)
         {
         case B_CANCEL:
-            end_chown = 1;
+            end_chown = TRUE;
             break;
 
-        case B_SETUSR:
+        case B_ENTER:
+        case B_SETALL:
             {
+                struct group *grp;
                 struct passwd *user;
                 char *text;
 
+                listbox_get_current (l_group, &text, NULL);
+                grp = getgrnam (text);
+                if (grp != NULL)
+                    new_group = grp->gr_gid;
                 listbox_get_current (l_user, &text, NULL);
                 user = getpwnam (text);
-                if (user)
-                {
+                if (user != NULL)
                     new_user = user->pw_uid;
-                    apply_chowns (new_user, new_group);
+                if (result == B_ENTER)
+                {
+                    if (current_panel->marked <= 1)
+                    {
+                        /* single or last file */
+                        if (mc_chown (vpath, new_user, new_group) == -1)
+                            message (D_ERROR, MSG_ERROR, _("Cannot chown \"%s\"\n%s"),
+                                     fname, unix_error_string (errno));
+                        end_chown = TRUE;
+                    }
+                    else if (!try_chown (vpath, new_user, new_group))
+                    {
+                        /* stop multiple files processing */
+                        result = B_CANCEL;
+                        end_chown = TRUE;
+                    }
                 }
+                else
+                {
+                    apply_chowns (vpath, new_user, new_group);
+                    end_chown = TRUE;
+                }
+
+                need_update = TRUE;
                 break;
             }
 
-        case B_SETGRP:
+        case B_SETUSR:
             {
-                struct group *grp;
+                struct passwd *user;
                 char *text;
 
-                listbox_get_current (l_group, &text, NULL);
-                grp = getgrnam (text);
-                if (grp)
+                listbox_get_current (l_user, &text, NULL);
+                user = getpwnam (text);
+                if (user != NULL)
                 {
-                    new_group = grp->gr_gid;
-                    apply_chowns (new_user, new_group);
+                    new_user = user->pw_uid;
+                    apply_chowns (vpath, new_user, new_group);
+                    need_update = TRUE;
+                    end_chown = TRUE;
                 }
                 break;
             }
 
-        case B_SETALL:
-        case B_ENTER:
+        case B_SETGRP:
             {
                 struct group *grp;
-                struct passwd *user;
                 char *text;
 
                 listbox_get_current (l_group, &text, NULL);
                 grp = getgrnam (text);
-                if (grp)
-                    new_group = grp->gr_gid;
-                listbox_get_current (l_user, &text, NULL);
-                user = getpwnam (text);
-                if (user)
-                    new_user = user->pw_uid;
-                if (ch_dlg->ret_value == B_ENTER)
+                if (grp != NULL)
                 {
-                    vfs_path_t *fname_vpath;
-
-                    fname_vpath = vfs_path_from_str (fname);
-                    need_update = 1;
-                    if (mc_chown (fname_vpath, new_user, new_group) == -1)
-                        message (D_ERROR, MSG_ERROR, _("Cannot chown \"%s\"\n%s"),
-                                 fname, unix_error_string (errno));
-                    vfs_path_free (fname_vpath);
+                    new_group = grp->gr_gid;
+                    apply_chowns (vpath, new_user, new_group);
+                    need_update = TRUE;
+                    end_chown = TRUE;
                 }
-                else
-                    apply_chowns (new_user, new_group);
                 break;
             }
 
         default:
             break;
-        }                       /* switch */
+        }
 
-        if (current_panel->marked && ch_dlg->ret_value != B_CANCEL)
+        if (current_panel->marked != 0 && result != B_CANCEL)
         {
             do_file_mark (current_panel, current_file, 0);
-            need_update = 1;
+            need_update = TRUE;
         }
 
+        vfs_path_free (vpath);
+
         dlg_destroy (ch_dlg);
     }
-    while (current_panel->marked && !end_chown);
+    while (current_panel->marked != 0 && !end_chown);
 
-    chown_done ();
+    chown_done (need_update);
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.20/src/filemanager/cmd.c mc-4.8.21/src/filemanager/cmd.c
--- mc-4.8.20/src/filemanager/cmd.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/filemanager/cmd.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Routines invoked by a function key
    They normally operate on the current panel.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -522,31 +522,30 @@ view_file_at_line (const vfs_path_t * fi
 
     if (plain_view)
     {
-        int changed_hex_mode = 0;
-        int changed_nroff_flag = 0;
-        int changed_magic_flag = 0;
-
-        mcview_altered_hex_mode = 0;
-        mcview_altered_nroff_flag = 0;
-        mcview_altered_magic_flag = 0;
-        if (mcview_default_hex_mode)
-            changed_hex_mode = 1;
-        if (mcview_default_nroff_flag)
-            changed_nroff_flag = 1;
-        if (mcview_default_magic_flag)
-            changed_magic_flag = 1;
-        mcview_default_hex_mode = 0;
-        mcview_default_nroff_flag = 0;
-        mcview_default_magic_flag = 0;
+        mcview_mode_flags_t changed_flags;
+
+        mcview_clear_mode_flags (&changed_flags);
+        mcview_altered_flags.hex = FALSE;
+        mcview_altered_flags.magic = FALSE;
+        mcview_altered_flags.nroff = FALSE;
+        if (mcview_global_flags.hex)
+            changed_flags.hex = TRUE;
+        if (mcview_global_flags.magic)
+            changed_flags.magic = TRUE;
+        if (mcview_global_flags.nroff)
+            changed_flags.nroff = TRUE;
+        mcview_global_flags.hex = FALSE;
+        mcview_global_flags.magic = FALSE;
+        mcview_global_flags.nroff = FALSE;
 
         ret = mcview_viewer (NULL, filename_vpath, start_line, search_start, search_end);
 
-        if (changed_hex_mode && !mcview_altered_hex_mode)
-            mcview_default_hex_mode = 1;
-        if (changed_nroff_flag && !mcview_altered_nroff_flag)
-            mcview_default_nroff_flag = 1;
-        if (changed_magic_flag && !mcview_altered_magic_flag)
-            mcview_default_magic_flag = 1;
+        if (changed_flags.hex && !mcview_altered_flags.hex)
+            mcview_global_flags.hex = TRUE;
+        if (changed_flags.magic && !mcview_altered_flags.magic)
+            mcview_global_flags.magic = TRUE;
+        if (changed_flags.nroff && !mcview_altered_flags.nroff)
+            mcview_global_flags.nroff = TRUE;
 
         dialog_switch_process_pending ();
     }
diff -urpN mc-4.8.20/src/filemanager/command.c mc-4.8.21/src/filemanager/command.c
--- mc-4.8.20/src/filemanager/command.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/filemanager/command.c	2018-05-27 21:56:21.000000000 +0200
@@ -4,7 +4,7 @@
    with all the magic of the command input line, we depend on some
    help from the program's callback.
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -351,7 +351,7 @@ command_callback (Widget * w, Widget * s
         /* Special case: we handle the enter key */
         if (parm == '\n')
             return enter (INPUT (w));
-        /* fall through */
+        MC_FALLTHROUGH;
 
     default:
         return input_callback (w, sender, msg, parm, data);
diff -urpN mc-4.8.20/src/filemanager/dir.c mc-4.8.21/src/filemanager/dir.c
--- mc-4.8.20/src/filemanager/dir.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/dir.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Directory routines
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -47,6 +47,7 @@
 #include "src/setup.h"          /* panels_options */
 
 #include "treestore.h"
+#include "file.h"               /* file_is_symlink_to_dir() */
 #include "dir.h"
 #include "layout.h"             /* rotate_dash() */
 
@@ -67,7 +68,7 @@
 static int reverse = 1;
 
 /* Are the files sorted case sensitively? */
-static int case_sensitive = OS_SORT_CASE_SENSITIVE_DEFAULT;
+static gboolean case_sensitive = OS_SORT_CASE_SENSITIVE_DEFAULT;
 
 /* Are the exec_bit files top in list */
 static gboolean exec_first = TRUE;
@@ -150,6 +151,7 @@ handle_dirent (struct dirent *dp, const
                int *stale_link)
 {
     vfs_path_t *vpath;
+    gboolean stale;
 
     if (DIR_IS_DOT (dp->d_name) || DIR_IS_DOTDOT (dp->d_name))
         return FALSE;
@@ -173,17 +175,8 @@ handle_dirent (struct dirent *dp, const
         tree_store_mark_checked (dp->d_name);
 
     /* A link to a file or a directory? */
-    *link_to_dir = 0;
-    *stale_link = 0;
-    if (S_ISLNK (buf1->st_mode))
-    {
-        struct stat buf2;
-
-        if (mc_stat (vpath, &buf2) == 0)
-            *link_to_dir = S_ISDIR (buf2.st_mode) != 0;
-        else
-            *stale_link = 1;
-    }
+    *link_to_dir = file_is_symlink_to_dir (vpath, buf1, &stale) ? 1 : 0;
+    *stale_link = stale ? 1 : 0;
 
     vfs_path_free (vpath);
 
@@ -398,7 +391,7 @@ sort_ext (file_entry_t * a, file_entry_t
             b->second_sort_key = str_create_key (extension (b->fname), case_sensitive);
 
         r = str_key_collate (a->second_sort_key, b->second_sort_key, case_sensitive);
-        if (r)
+        if (r != 0)
             return r * reverse;
         else
             return sort_name (a, b);
diff -urpN mc-4.8.20/src/filemanager/ext.c mc-4.8.21/src/filemanager/ext.c
--- mc-4.8.20/src/filemanager/ext.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/filemanager/ext.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Extension dependent execution.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -353,25 +353,34 @@ exec_make_shell_string (const char *lc_d
 static void
 exec_extension_view (void *target, char *cmd, const vfs_path_t * filename_vpath, int start_line)
 {
-    int def_hex_mode = mcview_default_hex_mode, changed_hex_mode = 0;
-    int def_nroff_flag = mcview_default_nroff_flag, changed_nroff_flag = 0;
+    mcview_mode_flags_t def_flags = {
+        /* *INDENT-OFF* */
+        .wrap = FALSE,
+        .hex = mcview_global_flags.hex,
+        .magic = FALSE,
+        .nroff = mcview_global_flags.nroff
+        /* *INDENT-ON* */
+    };
+
+    mcview_mode_flags_t changed_flags;
 
-    mcview_altered_hex_mode = 0;
-    mcview_altered_nroff_flag = 0;
-    if (def_hex_mode != mcview_default_hex_mode)
-        changed_hex_mode = 1;
-    if (def_nroff_flag != mcview_default_nroff_flag)
-        changed_nroff_flag = 1;
+    mcview_clear_mode_flags (&changed_flags);
+    mcview_altered_flags.hex = FALSE;
+    mcview_altered_flags.nroff = FALSE;
+    if (def_flags.hex != mcview_global_flags.hex)
+        changed_flags.hex = TRUE;
+    if (def_flags.nroff != mcview_global_flags.nroff)
+        changed_flags.nroff = TRUE;
 
     if (target == NULL)
         mcview_viewer (cmd, filename_vpath, start_line, 0, 0);
     else
         mcview_load ((WView *) target, cmd, vfs_path_as_str (filename_vpath), start_line, 0, 0);
 
-    if (changed_hex_mode && !mcview_altered_hex_mode)
-        mcview_default_hex_mode = def_hex_mode;
-    if (changed_nroff_flag && !mcview_altered_nroff_flag)
-        mcview_default_nroff_flag = def_nroff_flag;
+    if (changed_flags.hex && !mcview_altered_flags.hex)
+        mcview_global_flags.hex = def_flags.hex;
+    if (changed_flags.nroff && !mcview_altered_flags.nroff)
+        mcview_global_flags.nroff = def_flags.nroff;
 
     dialog_switch_process_pending ();
 }
diff -urpN mc-4.8.20/src/filemanager/file.c mc-4.8.21/src/filemanager/file.c
--- mc-4.8.20/src/filemanager/file.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/file.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    File management.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -99,9 +99,6 @@ const char *op_names[3] = {
 
 /*** file scope macro definitions ****************************************************************/
 
-/* Hack: the vfs code should not rely on this */
-#define WITH_FULL_PATHS 1
-
 #define FILEOP_UPDATE_INTERVAL 2
 #define FILEOP_STALLING_INTERVAL 4
 
@@ -186,8 +183,6 @@ static GSList *erase_list = NULL;
  */
 static GSList *dest_dirs = NULL;
 
-static FileProgressStatus transform_error = FILE_CONT;
-
 /* --------------------------------------------------------------------------------------------- */
 /*** file scope functions ************************************************************************/
 /* --------------------------------------------------------------------------------------------- */
@@ -226,12 +221,14 @@ dirsize_status_locate_buttons (dirsize_s
 /* --------------------------------------------------------------------------------------------- */
 
 static char *
-transform_source (file_op_context_t * ctx, const vfs_path_t * source_vpath)
+build_dest (file_op_context_t * ctx, const char *src, const char *dest, FileProgressStatus * status)
 {
     char *s, *q;
     const char *fnsource;
 
-    s = g_strdup (vfs_path_as_str (source_vpath));
+    *status = FILE_CONT;
+
+    s = g_strdup (src);
 
     /* We remove \n from the filename since regex routines would use \n as an anchor */
     /* this is just to be allowed to maniupulate file names with \n on it */
@@ -241,7 +238,12 @@ transform_source (file_op_context_t * ct
 
     fnsource = x_basename (s);
 
-    if (mc_search_run (ctx->search_handle, fnsource, 0, strlen (fnsource), NULL))
+    if (!mc_search_run (ctx->search_handle, fnsource, 0, strlen (fnsource), NULL))
+    {
+        q = NULL;
+        *status = FILE_SKIP;
+    }
+    else
     {
         q = mc_search_prepare_replace_str2 (ctx->search_handle, ctx->dest_mask);
         if (ctx->search_handle->error != MC_SEARCH_E_OK)
@@ -249,17 +251,35 @@ transform_source (file_op_context_t * ct
             if (ctx->search_handle->error_str != NULL)
                 message (D_ERROR, MSG_ERROR, "%s", ctx->search_handle->error_str);
 
-            q = NULL;
-            transform_error = FILE_ABORT;
+            *status = FILE_ABORT;
         }
     }
-    else
+
+    MC_PTR_FREE (s);
+
+    if (*status == FILE_CONT)
     {
-        q = NULL;
-        transform_error = FILE_SKIP;
+        char *repl_dest;
+
+        repl_dest = mc_search_prepare_replace_str2 (ctx->search_handle, dest);
+        if (ctx->search_handle->error == MC_SEARCH_E_OK)
+            s = mc_build_filename (repl_dest, q, (char *) NULL);
+        else
+        {
+            if (ctx->search_handle->error_str != NULL)
+                message (D_ERROR, MSG_ERROR, "%s", ctx->search_handle->error_str);
+
+            *status = FILE_ABORT;
+        }
+
+        g_free (repl_dest);
     }
 
+    g_free (q);
+
+    q = strutils_shell_unescape (s);
     g_free (s);
+
     return q;
 }
 
@@ -590,6 +610,121 @@ do_compute_dir_size (const vfs_path_t *
 }
 
 /* --------------------------------------------------------------------------------------------- */
+/**
+ * panel_compute_totals:
+ *
+ * compute the number of files and the number of bytes
+ * used up by the whole selection, recursing directories
+ * as required.  In addition, it checks to see if it will
+ * overwrite any files by doing the copy.
+ */
+
+static FileProgressStatus
+panel_compute_totals (const WPanel * panel, dirsize_status_msg_t * sm, size_t * ret_count,
+                      uintmax_t * ret_total, gboolean compute_symlinks)
+{
+    int i;
+    size_t dir_count = 0;
+
+    for (i = 0; i < panel->dir.len; i++)
+    {
+        struct stat *s;
+
+        if (!panel->dir.list[i].f.marked)
+            continue;
+
+        s = &panel->dir.list[i].st;
+
+        if (S_ISDIR (s->st_mode))
+        {
+            vfs_path_t *p;
+            FileProgressStatus status;
+
+            p = vfs_path_append_new (panel->cwd_vpath, panel->dir.list[i].fname, (char *) NULL);
+            status = compute_dir_size (p, sm, &dir_count, ret_count, ret_total, compute_symlinks);
+            vfs_path_free (p);
+
+            if (status != FILE_CONT)
+                return status;
+        }
+        else
+        {
+            (*ret_count)++;
+            *ret_total += (uintmax_t) s->st_size;
+        }
+    }
+
+    return FILE_CONT;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+/** Initialize variables for progress bars */
+static FileProgressStatus
+panel_operate_init_totals (const WPanel * panel, const vfs_path_t * source,
+                           const struct stat *source_stat, file_op_context_t * ctx,
+                           gboolean compute_totals, filegui_dialog_type_t dialog_type)
+{
+    FileProgressStatus status;
+
+#ifdef ENABLE_BACKGROUND
+    if (mc_global.we_are_background)
+        return FILE_CONT;
+#endif
+
+    if (verbose && compute_totals)
+    {
+        dirsize_status_msg_t dsm;
+
+        memset (&dsm, 0, sizeof (dsm));
+        dsm.allow_skip = TRUE;
+        status_msg_init (STATUS_MSG (&dsm), _("Directory scanning"), 0, dirsize_status_init_cb,
+                         dirsize_status_update_cb, dirsize_status_deinit_cb);
+
+        ctx->progress_count = 0;
+        ctx->progress_bytes = 0;
+
+        if (source == NULL)
+            status = panel_compute_totals (panel, &dsm, &ctx->progress_count, &ctx->progress_bytes,
+                                           ctx->follow_links);
+        else if (S_ISDIR (source_stat->st_mode))
+        {
+            size_t dir_count = 0;
+
+            status = compute_dir_size (source, &dsm, &dir_count, &ctx->progress_count,
+                                       &ctx->progress_bytes, ctx->follow_links);
+        }
+        else
+        {
+            ctx->progress_count++;
+            ctx->progress_bytes += (uintmax_t) source_stat->st_size;
+            status = FILE_CONT;
+        }
+
+        status_msg_deinit (STATUS_MSG (&dsm));
+
+        ctx->progress_totals_computed = (status == FILE_CONT);
+
+        if (status == FILE_SKIP)
+            status = FILE_CONT;
+    }
+    else
+    {
+        status = FILE_CONT;
+        ctx->progress_count = panel->marked;
+        ctx->progress_bytes = panel->total;
+        ctx->progress_totals_computed = FALSE;
+    }
+
+    /* destroy already created UI for single file rename operation */
+    file_op_context_destroy_ui (ctx);
+
+    file_op_context_create_ui (ctx, TRUE, dialog_type);
+
+    return status;
+}
+
+/* --------------------------------------------------------------------------------------------- */
 
 static FileProgressStatus
 progress_update_one (file_op_total_context_t * tctx, file_op_context_t * ctx, off_t add)
@@ -661,6 +796,23 @@ warn_same_file (const char *fmt, const c
 
 /* --------------------------------------------------------------------------------------------- */
 
+static gboolean
+check_same_file (const char *a, const struct stat *ast, const char *b, const struct stat *bst,
+                 FileProgressStatus * status)
+{
+    if (ast->st_dev != bst->st_dev || ast->st_ino != bst->st_ino)
+        return FALSE;
+
+    if (S_ISDIR (ast->st_mode))
+        *status = warn_same_file (_("\"%s\"\nand\n\"%s\"\nare the same directory"), a, b);
+    else
+        *status = warn_same_file (_("\"%s\"\nand\n\"%s\"\nare the same file"), a, b);
+
+    return TRUE;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 static void
 get_times (const struct stat *sb, mc_timesbuf_t * times)
 {
@@ -920,10 +1072,40 @@ copy_file_file_display_progress (file_op
 
 /* --------------------------------------------------------------------------------------------- */
 
+static gboolean
+try_remove_file (file_op_context_t * ctx, const vfs_path_t * vpath, FileProgressStatus * status)
+{
+    while (mc_unlink (vpath) != 0 && !ctx->skip_all)
+    {
+        *status = file_error (_("Cannot remove file \"%s\"\n%s"), vfs_path_as_str (vpath));
+        if (*status == FILE_RETRY)
+            continue;
+        if (*status == FILE_SKIPALL)
+            ctx->skip_all = TRUE;
+        return FALSE;
+    }
+
+    return TRUE;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 /* {{{ Move routines */
+
+/**
+ * Move single file or one of many files from one location to another.
+ *
+ * @panel pointer to panel in case of single file, NULL otherwise
+ * @tctx file operation total context object
+ * @ctx file operation context object
+ * @s source file name
+ * @d destination file name
+ *
+ * @return operation result
+ */
 static FileProgressStatus
-move_file_file (file_op_total_context_t * tctx, file_op_context_t * ctx, const char *s,
-                const char *d)
+move_file_file (const WPanel * panel, file_op_total_context_t * tctx, file_op_context_t * ctx,
+                const char *s, const char *d)
 {
     struct stat src_stats, dst_stats;
     FileProgressStatus return_status = FILE_CONT;
@@ -937,6 +1119,7 @@ move_file_file (file_op_total_context_t
     file_progress_show_source (ctx, src_vpath);
     file_progress_show_target (ctx, dst_vpath);
 
+    /* FIXME: do we really need to check buttons in case of single file? */
     if (check_progress_buttons (ctx) == FILE_ABORT)
     {
         return_status = FILE_ABORT;
@@ -963,11 +1146,8 @@ move_file_file (file_op_total_context_t
 
     if (mc_lstat (dst_vpath, &dst_stats) == 0)
     {
-        if (src_stats.st_dev == dst_stats.st_dev && src_stats.st_ino == dst_stats.st_ino)
-        {
-            return_status = warn_same_file (_("\"%s\"\nand\n\"%s\"\nare the same file"), s, d);
+        if (check_same_file (s, &src_stats, d, &dst_stats, &return_status))
             goto ret;
-        }
 
         if (S_ISDIR (dst_stats.st_mode))
         {
@@ -998,6 +1178,7 @@ move_file_file (file_op_total_context_t
 
         if (mc_rename (src_vpath, dst_vpath) == 0)
         {
+            /* FIXME: do we really need to update progress in case of single file? */
             return_status = progress_update_one (tctx, ctx, src_stats.st_size);
             goto ret;
         }
@@ -1027,7 +1208,18 @@ move_file_file (file_op_total_context_t
     }
 #endif
 
-    /* Failed because filesystem boundary -> copy the file instead */
+    /* Failed rename -> copy the file instead */
+    if (panel != NULL)
+    {
+        /* In case of single file, calculate totals. In case of many files,
+           totals are calcuated already. */
+        return_status =
+            panel_operate_init_totals (panel, src_vpath, &src_stats, ctx, TRUE,
+                                       FILEGUI_DIALOG_ONE_ITEM);
+        if (return_status != FILE_CONT)
+            goto ret;
+    }
+
     old_ask_overwrite = tctx->ask_overwrite;
     tctx->ask_overwrite = FALSE;
     return_status = copy_file_file (tctx, ctx, s, d);
@@ -1037,24 +1229,23 @@ move_file_file (file_op_total_context_t
 
     copy_done = TRUE;
 
-    file_progress_show_source (ctx, NULL);
-    file_progress_show (ctx, 0, 0, "", FALSE);
+    /* FIXME: there is no need to update progress and check buttons
+       at the finish of single file operation. */
+    if (panel == NULL)
+    {
+        file_progress_show_source (ctx, NULL);
+        file_progress_show (ctx, 0, 0, "", FALSE);
+
+        return_status = check_progress_buttons (ctx);
+        if (return_status != FILE_CONT)
+            goto ret;
+    }
 
-    return_status = check_progress_buttons (ctx);
-    if (return_status != FILE_CONT)
-        goto ret;
     mc_refresh ();
 
   retry_src_remove:
-    if (mc_unlink (src_vpath) != 0 && !ctx->skip_all)
-    {
-        return_status = file_error (_("Cannot remove file \"%s\"\n%s"), s);
-        if (return_status == FILE_RETRY)
-            goto retry_src_remove;
-        if (return_status == FILE_SKIPALL)
-            ctx->skip_all = TRUE;
+    if (!try_remove_file (ctx, src_vpath, &return_status) && panel == NULL)
         goto ret;
-    }
 
     if (!copy_done)
         return_status = progress_update_one (tctx, ctx, src_stats.st_size);
@@ -1076,6 +1267,7 @@ static FileProgressStatus
 erase_file (file_op_total_context_t * tctx, file_op_context_t * ctx, const vfs_path_t * vpath)
 {
     struct stat buf;
+    FileProgressStatus return_status;
 
     file_progress_show_deleting (ctx, vfs_path_as_str (vpath), &tctx->progress_count);
     file_progress_show_count (ctx, tctx->progress_count, ctx->progress_count);
@@ -1090,19 +1282,8 @@ erase_file (file_op_total_context_t * tc
         buf.st_size = 0;
     }
 
-    while (mc_unlink (vpath) != 0 && !ctx->skip_all)
-    {
-        int return_status;
-
-        return_status = file_error (_("Cannot delete file \"%s\"\n%s"), vfs_path_as_str (vpath));
-        if (return_status == FILE_ABORT)
-            return return_status;
-        if (return_status == FILE_RETRY)
-            continue;
-        if (return_status == FILE_SKIPALL)
-            ctx->skip_all = TRUE;
-        break;
-    }
+    if (!try_remove_file (ctx, vpath, &return_status) && return_status == FILE_ABORT)
+        return FILE_ABORT;
 
     if (tctx->progress_count == 0)
         return FILE_CONT;
@@ -1112,6 +1293,25 @@ erase_file (file_op_total_context_t * tc
 
 /* --------------------------------------------------------------------------------------------- */
 
+static FileProgressStatus
+try_erase_dir (file_op_context_t * ctx, const char *dir)
+{
+    FileProgressStatus return_status = FILE_CONT;
+
+    while (my_rmdir (dir) != 0 && !ctx->skip_all)
+    {
+        return_status = file_error (_("Cannot remove directory \"%s\"\n%s"), dir);
+        if (return_status == FILE_SKIPALL)
+            ctx->skip_all = TRUE;
+        if (return_status != FILE_RETRY)
+            break;
+    }
+
+    return return_status;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 /**
   Recursive remove of files
   abort->cancel stack
@@ -1165,19 +1365,7 @@ recursive_erase (file_op_total_context_t
 
     mc_refresh ();
 
-    while (my_rmdir (s) != 0 && !ctx->skip_all)
-    {
-        return_status = file_error (_("Cannot remove directory \"%s\"\n%s"), s);
-        if (return_status == FILE_RETRY)
-            continue;
-        if (return_status == FILE_ABORT)
-            break;
-        if (return_status == FILE_SKIPALL)
-            ctx->skip_all = TRUE;
-        break;
-    }
-
-    return return_status;
+    return try_erase_dir (ctx, s);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1211,7 +1399,6 @@ check_dir_is_empty (const vfs_path_t * v
 static FileProgressStatus
 erase_dir_iff_empty (file_op_context_t * ctx, const vfs_path_t * vpath, size_t count)
 {
-    FileProgressStatus error = FILE_CONT;
     const char *s;
 
     s = vfs_path_as_str (vpath);
@@ -1223,24 +1410,201 @@ erase_dir_iff_empty (file_op_context_t *
 
     mc_refresh ();
 
-    if (check_dir_is_empty (vpath) == 1)        /* not empty or error */
+    if (check_dir_is_empty (vpath) != 1)
+        return FILE_CONT;
+
+    /* not empty or error */
+    return try_erase_dir (ctx, s);
+}
+
+
+/* --------------------------------------------------------------------------------------------- */
+
+static void
+erase_dir_after_copy (file_op_total_context_t * tctx, file_op_context_t * ctx,
+                      const vfs_path_t * vpath, FileProgressStatus * status)
+{
+    if (ctx->erase_at_end)
     {
-        while (my_rmdir (s) != 0 && !ctx->skip_all)
+        /* Reset progress count before delete to avoid counting files twice */
+        tctx->progress_count = tctx->prev_progress_count;
+
+        while (erase_list != NULL && *status != FILE_ABORT)
         {
-            error = file_error (_("Cannot remove directory \"%s\"\n%s"), s);
-            if (error == FILE_SKIPALL)
-                ctx->skip_all = TRUE;
-            if (error != FILE_RETRY)
-                break;
+            struct link *lp = (struct link *) erase_list->data;
+
+            if (S_ISDIR (lp->st_mode))
+                *status = erase_dir_iff_empty (ctx, lp->src_vpath, tctx->progress_count);
+            else
+                *status = erase_file (tctx, ctx, lp->src_vpath);
+
+            erase_list = g_slist_remove (erase_list, lp);
+            free_link (lp);
         }
+
+        /* Save progress counter before move next directory */
+        tctx->prev_progress_count = tctx->progress_count;
     }
 
-    return error;
+    erase_dir_iff_empty (ctx, vpath, tctx->progress_count);
 }
 
 /* }}} */
 
 /* --------------------------------------------------------------------------------------------- */
+
+/**
+ * Move single directory or one of many directories from one location to another.
+ *
+ * @panel pointer to panel in case of single directory, NULL otherwise
+ * @tctx file operation total context object
+ * @ctx file operation context object
+ * @s source directory name
+ * @d destination directory name
+ *
+ * @return operation result
+ */
+static FileProgressStatus
+do_move_dir_dir (const WPanel * panel, file_op_total_context_t * tctx, file_op_context_t * ctx,
+                 const char *s, const char *d)
+{
+    struct stat sbuf, dbuf;
+    FileProgressStatus return_status = FILE_CONT;
+    gboolean move_over = FALSE;
+    gboolean dstat_ok;
+    vfs_path_t *src_vpath, *dst_vpath;
+
+    src_vpath = vfs_path_from_str (s);
+    dst_vpath = vfs_path_from_str (d);
+
+    file_progress_show_source (ctx, src_vpath);
+    file_progress_show_target (ctx, dst_vpath);
+
+    /* FIXME: do we really need to check buttons in case of single directory? */
+    if (panel != NULL && check_progress_buttons (ctx) == FILE_ABORT)
+    {
+        return_status = FILE_ABORT;
+        goto ret_fast;
+    }
+
+    mc_refresh ();
+
+    mc_stat (src_vpath, &sbuf);
+
+    dstat_ok = (mc_stat (dst_vpath, &dbuf) == 0);
+
+    if (dstat_ok && check_same_file (s, &sbuf, d, &dbuf, &return_status))
+        goto ret_fast;
+
+    if (!dstat_ok)
+        ;                       /* destination doesn't exist */
+    else if (!ctx->dive_into_subdirs)
+        move_over = TRUE;
+    else
+    {
+        vfs_path_t *tmp;
+
+        tmp = dst_vpath;
+        dst_vpath = vfs_path_append_new (dst_vpath, x_basename (s), (char *) NULL);
+        vfs_path_free (tmp);
+    }
+
+    d = vfs_path_as_str (dst_vpath);
+
+    /* Check if the user inputted an existing dir */
+  retry_dst_stat:
+    if (mc_stat (dst_vpath, &dbuf) == 0)
+    {
+        if (move_over)
+        {
+            return_status = copy_dir_dir (tctx, ctx, s, d, FALSE, TRUE, TRUE, NULL);
+
+            if (return_status != FILE_CONT)
+                goto ret;
+            goto oktoret;
+        }
+        else if (ctx->skip_all)
+            return_status = FILE_SKIPALL;
+        else
+        {
+            if (S_ISDIR (dbuf.st_mode))
+                return_status = file_error (_("Cannot overwrite directory \"%s\"\n%s"), d);
+            else
+                return_status = file_error (_("Cannot overwrite file \"%s\"\n%s"), d);
+            if (return_status == FILE_SKIPALL)
+                ctx->skip_all = TRUE;
+            if (return_status == FILE_RETRY)
+                goto retry_dst_stat;
+        }
+
+        goto ret_fast;
+    }
+
+  retry_rename:
+    if (mc_rename (src_vpath, dst_vpath) == 0)
+    {
+        return_status = FILE_CONT;
+        goto ret;
+    }
+
+    if (errno != EXDEV)
+    {
+        if (!ctx->skip_all)
+        {
+            return_status = files_error (_("Cannot move directory \"%s\" to \"%s\"\n%s"), s, d);
+            if (return_status == FILE_SKIPALL)
+                ctx->skip_all = TRUE;
+            if (return_status == FILE_RETRY)
+                goto retry_rename;
+        }
+        goto ret;
+    }
+
+    /* Failed because of filesystem boundary -> copy dir instead */
+    if (panel != NULL)
+    {
+        /* In case of single directory, calculate totals. In case of many directories,
+           totals are calcuated already. */
+        return_status =
+            panel_operate_init_totals (panel, src_vpath, &sbuf, ctx, FALSE,
+                                       FILEGUI_DIALOG_ONE_ITEM);
+        if (return_status != FILE_CONT)
+            goto ret;
+    }
+
+    return_status = copy_dir_dir (tctx, ctx, s, d, FALSE, FALSE, TRUE, NULL);
+
+    if (return_status != FILE_CONT)
+        goto ret;
+
+  oktoret:
+    /* FIXME: there is no need to update progress and check buttons
+       at the finish of single directory operation. */
+    if (panel == NULL)
+    {
+        file_progress_show_source (ctx, NULL);
+        file_progress_show_target (ctx, NULL);
+        file_progress_show (ctx, 0, 0, "", FALSE);
+
+        return_status = check_progress_buttons (ctx);
+        if (return_status != FILE_CONT)
+            goto ret;
+    }
+
+    mc_refresh ();
+
+    erase_dir_after_copy (tctx, ctx, src_vpath, &return_status);
+
+  ret:
+    erase_list = free_linklist (erase_list);
+  ret_fast:
+    vfs_path_free (src_vpath);
+    vfs_path_free (dst_vpath);
+    return return_status;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 /* {{{ Panel operate routines */
 
 /**
@@ -1249,7 +1613,7 @@ erase_dir_iff_empty (file_op_context_t *
  */
 
 static const char *
-panel_get_file (WPanel * panel)
+panel_get_file (const WPanel * panel)
 {
     if (get_current_type () == view_tree)
     {
@@ -1274,111 +1638,52 @@ panel_get_file (WPanel * panel)
 }
 
 /* --------------------------------------------------------------------------------------------- */
-/**
- * panel_compute_totals:
- *
- * compute the number of files and the number of bytes
- * used up by the whole selection, recursing directories
- * as required.  In addition, it checks to see if it will
- * overwrite any files by doing the copy.
- */
 
-static FileProgressStatus
-panel_compute_totals (const WPanel * panel, dirsize_status_msg_t * sm, size_t * ret_count,
-                      uintmax_t * ret_total, gboolean compute_symlinks)
+static const char *
+check_single_entry (const WPanel * panel, gboolean force_single, struct stat *src_stat)
 {
-    int i;
-    size_t dir_count = 0;
-
-    for (i = 0; i < panel->dir.len; i++)
-    {
-        struct stat *s;
-
-        if (!panel->dir.list[i].f.marked)
-            continue;
-
-        s = &panel->dir.list[i].st;
-
-        if (S_ISDIR (s->st_mode))
-        {
-            vfs_path_t *p;
-            FileProgressStatus status;
-
-            p = vfs_path_append_new (panel->cwd_vpath, panel->dir.list[i].fname, (char *) NULL);
-            status = compute_dir_size (p, sm, &dir_count, ret_count, ret_total, compute_symlinks);
-            vfs_path_free (p);
-
-            if (status != FILE_CONT)
-                return status;
-        }
-        else
-        {
-            (*ret_count)++;
-            *ret_total += (uintmax_t) s->st_size;
-        }
-    }
-
-    return FILE_CONT;
-}
-
-/* --------------------------------------------------------------------------------------------- */
+    const char *source;
+    gboolean ok;
 
-/** Initialize variables for progress bars */
-static FileProgressStatus
-panel_operate_init_totals (const WPanel * panel, const char *source, file_op_context_t * ctx,
-                           filegui_dialog_type_t dialog_type)
-{
-    FileProgressStatus status;
+    if (force_single)
+        source = selection (panel)->fname;
+    else
+        source = panel_get_file (panel);
 
-#ifdef ENABLE_BACKGROUND
-    if (mc_global.we_are_background)
-        return FILE_CONT;
-#endif
+    ok = !DIR_IS_DOTDOT (source);
 
-    if (verbose && file_op_compute_totals)
+    if (!ok)
+        message (D_ERROR, MSG_ERROR, _("Cannot operate on \"..\"!"));
+    else
     {
-        dirsize_status_msg_t dsm;
-
-        memset (&dsm, 0, sizeof (dsm));
-        dsm.allow_skip = TRUE;
-        status_msg_init (STATUS_MSG (&dsm), _("Directory scanning"), 0, dirsize_status_init_cb,
-                         dirsize_status_update_cb, dirsize_status_deinit_cb);
+        vfs_path_t *source_vpath;
 
-        ctx->progress_count = 0;
-        ctx->progress_bytes = 0;
+        source_vpath = vfs_path_from_str (source);
 
-        if (source == NULL)
-            status = panel_compute_totals (panel, &dsm, &ctx->progress_count, &ctx->progress_bytes,
-                                           ctx->follow_links);
-        else
+        /* Update stat to get actual info */
+        ok = mc_lstat (source_vpath, src_stat) == 0;
+        if (!ok)
         {
-            vfs_path_t *p;
-            size_t dir_count = 0;
+            message (D_ERROR, MSG_ERROR, _("Cannot stat \"%s\"\n%s"),
+                     path_trunc (source, 30), unix_error_string (errno));
 
-            p = vfs_path_from_str (source);
-            status = compute_dir_size (p, &dsm, &dir_count, &ctx->progress_count,
-                                       &ctx->progress_bytes, ctx->follow_links);
-            vfs_path_free (p);
-        }
+            /* Directory was changed outside MC. Reload it forced */
+            if (!panel->is_panelized)
+            {
+                panel_update_flags_t flags = UP_RELOAD;
 
-        status_msg_deinit (STATUS_MSG (&dsm));
+                /* don't update panelized panel */
+                if (get_other_type () == view_listing && other_panel->is_panelized)
+                    flags |= UP_ONLY_CURRENT;
 
-        ctx->progress_totals_computed = (status == FILE_CONT);
+                update_panels (flags, UP_KEEPSEL);
+            }
+        }
 
-        if (status == FILE_SKIP)
-            status = FILE_CONT;
-    }
-    else
-    {
-        status = FILE_CONT;
-        ctx->progress_count = panel->marked;
-        ctx->progress_bytes = panel->total;
-        ctx->progress_totals_computed = FALSE;
+        vfs_path_free (source_vpath);
     }
 
-    file_op_context_create_ui (ctx, TRUE, dialog_type);
-
-    return status;
+    return ok ? source : NULL;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1468,6 +1773,291 @@ panel_operate_generate_prompt (const WPa
 
 /* --------------------------------------------------------------------------------------------- */
 
+static char *
+do_confirm_copy_move (const WPanel * panel, FileOperation operation, gboolean force_single,
+                      const char *source, struct stat *src_stat, file_op_context_t * ctx,
+                      gboolean * do_bg)
+{
+    const char *tmp_dest_dir;
+    char *dest_dir;
+    char *format;
+    char *ret;
+
+    /* Forced single operations default to the original name */
+    if (force_single)
+        tmp_dest_dir = source;
+    else if (get_other_type () == view_listing)
+        tmp_dest_dir = vfs_path_as_str (other_panel->cwd_vpath);
+    else
+        tmp_dest_dir = vfs_path_as_str (panel->cwd_vpath);
+
+    /*
+     * Add trailing backslash only when do non-local ops.
+     * It saves user from occasional file renames (when destination
+     * dir is deleted)
+     */
+    if (!force_single && tmp_dest_dir != NULL && tmp_dest_dir[0] != '\0'
+        && !IS_PATH_SEP (tmp_dest_dir[strlen (tmp_dest_dir) - 1]))
+    {
+        /* add trailing separator */
+        dest_dir = g_strconcat (tmp_dest_dir, PATH_SEP_STR, (char *) NULL);
+    }
+    else
+    {
+        /* just copy */
+        dest_dir = g_strdup (tmp_dest_dir);
+    }
+
+    if (dest_dir == NULL)
+        return NULL;
+
+    if (source == NULL)
+        src_stat = NULL;
+
+    /* Generate confirmation prompt */
+    format = panel_operate_generate_prompt (panel, operation, src_stat);
+
+    ret = file_mask_dialog (ctx, operation, source != NULL, format,
+                            source != NULL ? source : (const void *) &panel->marked, dest_dir,
+                            do_bg);
+
+    g_free (format);
+    g_free (dest_dir);
+
+    if (ret == NULL || ret[0] == '\0')
+        MC_PTR_FREE (ret);
+
+    return ret;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static gboolean
+do_confirm_erase (const WPanel * panel, const char *source, struct stat *src_stat)
+{
+    int i;
+    char *format;
+    char fmd_buf[BUF_MEDIUM];
+
+    if (source == NULL)
+        src_stat = NULL;
+
+    /* Generate confirmation prompt */
+    format = panel_operate_generate_prompt (panel, OP_DELETE, src_stat);
+
+    if (source == NULL)
+        g_snprintf (fmd_buf, sizeof (fmd_buf), format, panel->marked);
+    else
+    {
+        const int fmd_xlen = 64;
+
+        i = fmd_xlen - str_term_width1 (format) - 4;
+        g_snprintf (fmd_buf, sizeof (fmd_buf), format, str_trunc (source, i));
+    }
+
+    g_free (format);
+
+    if (safe_delete)
+        query_set_sel (1);
+
+    i = query_dialog (op_names[OP_DELETE], fmd_buf, D_ERROR, 2, _("&Yes"), _("&No"));
+
+    return (i == 0);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static FileProgressStatus
+operate_single_file (const WPanel * panel, FileOperation operation, file_op_total_context_t * tctx,
+                     file_op_context_t * ctx, const char *src, struct stat *src_stat,
+                     const char *dest, filegui_dialog_type_t dialog_type)
+{
+    FileProgressStatus value;
+    vfs_path_t *src_vpath;
+    gboolean is_file;
+
+    if (g_path_is_absolute (src))
+        src_vpath = vfs_path_from_str (src);
+    else
+        src_vpath = vfs_path_append_new (panel->cwd_vpath, src, (char *) NULL);
+
+    is_file = !S_ISDIR (src_stat->st_mode);
+    /* Is link to directory? */
+    if (is_file)
+    {
+        gboolean is_link;
+
+        is_link = file_is_symlink_to_dir (src_vpath, src_stat, NULL);
+        is_file = !(is_link && ctx->follow_links);
+    }
+
+
+    if (operation == OP_DELETE)
+    {
+        value = panel_operate_init_totals (panel, src_vpath, src_stat, ctx, !is_file, dialog_type);
+        if (value == FILE_CONT)
+        {
+            if (is_file)
+                value = erase_file (tctx, ctx, src_vpath);
+            else
+                value = erase_dir (tctx, ctx, src_vpath);
+        }
+    }
+    else
+    {
+        char *temp;
+
+        src = vfs_path_as_str (src_vpath);
+
+        temp = build_dest (ctx, src, dest, &value);
+        if (temp != NULL)
+        {
+            char *src2;
+
+            src2 = strutils_shell_unescape (src);
+
+            src = src2;
+            dest = temp;
+
+            switch (operation)
+            {
+            case OP_COPY:
+                /* we use file_mask_op_follow_links only with OP_COPY */
+                vfs_path_free (src_vpath);
+                src_vpath = vfs_path_from_str (src);
+                ctx->stat_func (src_vpath, src_stat);
+
+                value =
+                    panel_operate_init_totals (panel, src_vpath, src_stat, ctx, !is_file,
+                                               dialog_type);
+                if (value == FILE_CONT)
+                {
+                    is_file = !S_ISDIR (src_stat->st_mode);
+                    /* Is link to directory? */
+                    if (is_file)
+                    {
+                        gboolean is_link;
+
+                        is_link = file_is_symlink_to_dir (src_vpath, src_stat, NULL);
+                        is_file = !(is_link && ctx->follow_links);
+                    }
+
+                    if (is_file)
+                        value = copy_file_file (tctx, ctx, src, dest);
+                    else
+                        value = copy_dir_dir (tctx, ctx, src, dest, TRUE, FALSE, FALSE, NULL);
+                }
+                break;
+
+            case OP_MOVE:
+                if (is_file)
+                {
+#ifdef ENABLE_BACKGROUND
+                    /* create UI to show confirmation dialog */
+                    if (!mc_global.we_are_background)
+                        file_op_context_create_ui (ctx, TRUE, FILEGUI_DIALOG_ONE_ITEM);
+#endif
+                    value = move_file_file (panel, tctx, ctx, src, dest);
+                }
+                else
+                    value = do_move_dir_dir (panel, tctx, ctx, src, dest);
+                break;
+
+            default:
+                /* Unknown file operation */
+                abort ();
+            }
+
+            g_free (src2);
+            g_free (temp);
+        }
+    }
+
+    vfs_path_free (src_vpath);
+
+    return value;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static FileProgressStatus
+operate_one_file (const WPanel * panel, FileOperation operation, file_op_total_context_t * tctx,
+                  file_op_context_t * ctx, const char *src, struct stat *src_stat, const char *dest)
+{
+    FileProgressStatus value = FILE_CONT;
+    vfs_path_t *src_vpath;
+    gboolean is_file;
+
+    if (g_path_is_absolute (src))
+        src_vpath = vfs_path_from_str (src);
+    else
+        src_vpath = vfs_path_append_new (panel->cwd_vpath, src, (char *) NULL);
+
+    is_file = !S_ISDIR (src_stat->st_mode);
+
+    if (operation == OP_DELETE)
+    {
+        if (is_file)
+            value = erase_file (tctx, ctx, src_vpath);
+        else
+            value = erase_dir (tctx, ctx, src_vpath);
+    }
+    else
+    {
+        char *temp;
+
+        src = vfs_path_as_str (src_vpath);
+
+        temp = build_dest (ctx, src, dest, &value);
+        if (temp != NULL)
+        {
+            char *src2;
+
+            src2 = strutils_shell_unescape (src);
+
+            src = src2;
+            dest = temp;
+
+            switch (operation)
+            {
+            case OP_COPY:
+                /* we use file_mask_op_follow_links only with OP_COPY */
+                vfs_path_free (src_vpath);
+                src_vpath = vfs_path_from_str (src);
+                ctx->stat_func (src_vpath, src_stat);
+                is_file = !S_ISDIR (src_stat->st_mode);
+
+                if (is_file)
+                    value = copy_file_file (tctx, ctx, src, dest);
+                else
+                    value = copy_dir_dir (tctx, ctx, src, dest, TRUE, FALSE, FALSE, NULL);
+                dest_dirs = free_linklist (dest_dirs);
+                break;
+
+            case OP_MOVE:
+                if (is_file)
+                    value = move_file_file (NULL, tctx, ctx, src, dest);
+                else
+                    value = do_move_dir_dir (NULL, tctx, ctx, src, dest);
+                break;
+
+            default:
+                /* Unknown file operation */
+                abort ();
+            }
+
+            g_free (src2);
+            g_free (temp);
+        }
+    }
+
+    vfs_path_free (src_vpath);
+
+    return value;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 #ifdef ENABLE_BACKGROUND
 static int
 end_bg_process (file_op_context_t * ctx, enum OperationMode mode)
@@ -1488,6 +2078,48 @@ end_bg_process (file_op_context_t * ctx,
 /*** public functions ****************************************************************************/
 /* --------------------------------------------------------------------------------------------- */
 
+/* Is file symlink to directory or not.
+ *
+ * @param path file or directory
+ * @param st result of mc_lstat(vpath). If NULL, mc_lstat(vpath) is performed here
+ * @param stale_link TRUE if file is stale link to directory
+ *
+ * @return TRUE if file symlink to directory, ELSE otherwise.
+ */
+gboolean
+file_is_symlink_to_dir (const vfs_path_t * vpath, struct stat * st, gboolean * stale_link)
+{
+    struct stat st2;
+    gboolean stale = FALSE;
+    gboolean res = FALSE;
+
+    if (st == NULL)
+    {
+        st = &st2;
+
+        if (mc_lstat (vpath, st) != 0)
+            goto ret;
+    }
+
+    if (S_ISLNK (st->st_mode))
+    {
+        struct stat st3;
+
+        stale = (mc_stat (vpath, &st3) != 0);
+
+        if (!stale)
+            res = (S_ISDIR (st3.st_mode) != 0);
+    }
+
+  ret:
+    if (stale_link != NULL)
+        *stale_link = stale;
+
+    return res;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 FileProgressStatus
 copy_file_file (file_op_total_context_t * tctx, file_op_context_t * ctx,
                 const char *src_path, const char *dst_path)
@@ -1565,12 +2197,8 @@ copy_file_file (file_op_total_context_t
     if (dst_exists)
     {
         /* Destination already exists */
-        if (src_stat.st_dev == dst_stat.st_dev && src_stat.st_ino == dst_stat.st_ino)
-        {
-            return_status = warn_same_file (_("\"%s\"\nand\n\"%s\"\nare the same file"),
-                                            src_path, dst_path);
+        if (check_same_file (src_path, &src_stat, dst_path, &dst_stat, &return_status))
             goto ret_fast;
-        }
 
         /* Should we replace destination? */
         if (tctx->ask_overwrite)
@@ -2307,142 +2935,7 @@ copy_dir_dir (file_op_total_context_t *
 FileProgressStatus
 move_dir_dir (file_op_total_context_t * tctx, file_op_context_t * ctx, const char *s, const char *d)
 {
-    struct stat sbuf, dbuf;
-    FileProgressStatus return_status = FILE_CONT;
-    gboolean move_over = FALSE;
-    gboolean dstat_ok;
-    vfs_path_t *src_vpath, *dst_vpath;
-
-    src_vpath = vfs_path_from_str (s);
-    dst_vpath = vfs_path_from_str (d);
-
-    file_progress_show_source (ctx, src_vpath);
-    file_progress_show_target (ctx, dst_vpath);
-
-    if (check_progress_buttons (ctx) == FILE_ABORT)
-    {
-        return_status = FILE_ABORT;
-        goto ret_fast;
-    }
-
-    mc_refresh ();
-
-    mc_stat (src_vpath, &sbuf);
-
-    dstat_ok = (mc_stat (dst_vpath, &dbuf) == 0);
-    if (dstat_ok && sbuf.st_dev == dbuf.st_dev && sbuf.st_ino == dbuf.st_ino)
-    {
-        return_status = warn_same_file (_("\"%s\"\nand\n\"%s\"\nare the same directory"), s, d);
-        goto ret_fast;
-    }
-
-    if (!dstat_ok)
-        ;                       /* destination doesn't exist */
-    else if (!ctx->dive_into_subdirs)
-        move_over = TRUE;
-    else
-    {
-        vfs_path_t *tmp;
-
-        tmp = dst_vpath;
-        dst_vpath = vfs_path_append_new (dst_vpath, x_basename (s), (char *) NULL);
-        vfs_path_free (tmp);
-    }
-
-    d = vfs_path_as_str (dst_vpath);
-
-    /* Check if the user inputted an existing dir */
-  retry_dst_stat:
-    if (mc_stat (dst_vpath, &dbuf) == 0)
-    {
-        if (move_over)
-        {
-            return_status = copy_dir_dir (tctx, ctx, s, d, FALSE, TRUE, TRUE, NULL);
-
-            if (return_status != FILE_CONT)
-                goto ret;
-            goto oktoret;
-        }
-        else if (ctx->skip_all)
-            return_status = FILE_SKIPALL;
-        else
-        {
-            if (S_ISDIR (dbuf.st_mode))
-                return_status = file_error (_("Cannot overwrite directory \"%s\"\n%s"), d);
-            else
-                return_status = file_error (_("Cannot overwrite file \"%s\"\n%s"), d);
-            if (return_status == FILE_SKIPALL)
-                ctx->skip_all = TRUE;
-            if (return_status == FILE_RETRY)
-                goto retry_dst_stat;
-        }
-
-        goto ret_fast;
-    }
-
-  retry_rename:
-    if (mc_rename (src_vpath, dst_vpath) == 0)
-    {
-        return_status = FILE_CONT;
-        goto ret;
-    }
-
-    if (errno != EXDEV)
-    {
-        if (!ctx->skip_all)
-        {
-            return_status = files_error (_("Cannot move directory \"%s\" to \"%s\"\n%s"), s, d);
-            if (return_status == FILE_SKIPALL)
-                ctx->skip_all = TRUE;
-            if (return_status == FILE_RETRY)
-                goto retry_rename;
-        }
-        goto ret;
-    }
-    /* Failed because of filesystem boundary -> copy dir instead */
-    return_status = copy_dir_dir (tctx, ctx, s, d, FALSE, FALSE, TRUE, NULL);
-
-    if (return_status != FILE_CONT)
-        goto ret;
-  oktoret:
-    file_progress_show_source (ctx, NULL);
-    file_progress_show_target (ctx, NULL);
-    file_progress_show (ctx, 0, 0, "", FALSE);
-
-    return_status = check_progress_buttons (ctx);
-    if (return_status != FILE_CONT)
-        goto ret;
-
-    mc_refresh ();
-    if (ctx->erase_at_end)
-    {
-        /* Reset progress count before delete to avoid counting files twice */
-        tctx->progress_count = tctx->prev_progress_count;
-
-        while (erase_list != NULL && return_status != FILE_ABORT)
-        {
-            struct link *lp = (struct link *) erase_list->data;
-
-            if (S_ISDIR (lp->st_mode))
-                return_status = erase_dir_iff_empty (ctx, lp->src_vpath, tctx->progress_count);
-            else
-                return_status = erase_file (tctx, ctx, lp->src_vpath);
-
-            erase_list = g_slist_remove (erase_list, lp);
-            free_link (lp);
-        }
-
-        /* Save progress counter before move next directory */
-        tctx->prev_progress_count = tctx->progress_count;
-    }
-    erase_dir_iff_empty (ctx, src_vpath, tctx->progress_count);
-
-  ret:
-    erase_list = free_linklist (erase_list);
-  ret_fast:
-    vfs_path_free (src_vpath);
-    vfs_path_free (dst_vpath);
-    return return_status;
+    return do_move_dir_dir (NULL, tctx, ctx, s, d);
 }
 
 /* }}} */
@@ -2453,8 +2946,6 @@ move_dir_dir (file_op_total_context_t *
 FileProgressStatus
 erase_dir (file_op_total_context_t * tctx, file_op_context_t * ctx, const vfs_path_t * s_vpath)
 {
-    FileProgressStatus error;
-
     file_progress_show_deleting (ctx, vfs_path_as_str (s_vpath), NULL);
     file_progress_show_count (ctx, tctx->progress_count, ctx->progress_count);
     if (check_progress_buttons (ctx) == FILE_ABORT)
@@ -2469,23 +2960,17 @@ erase_dir (file_op_total_context_t * tct
        we would have to check also for EIO. I hope the new way is
        fool proof. (Norbert)
      */
-    error = check_dir_is_empty (s_vpath);
-    if (error == 0)
+    if (check_dir_is_empty (s_vpath) == 0)
     {                           /* not empty */
+        FileProgressStatus error;
+
         error = query_recursive (ctx, vfs_path_as_str (s_vpath));
         if (error == FILE_CONT)
             error = recursive_erase (tctx, ctx, s_vpath);
         return error;
     }
 
-    while (my_rmdir (vfs_path_as_str (s_vpath)) == -1 && !ctx->skip_all)
-    {
-        error = file_error (_("Cannot remove directory \"%s\"\n%s"), vfs_path_as_str (s_vpath));
-        if (error != FILE_RETRY)
-            return error;
-    }
-
-    return FILE_CONT;
+    return try_erase_dir (ctx, vfs_path_as_str (s_vpath));
 }
 
 /* }}} */
@@ -2617,12 +3102,8 @@ panel_operate (void *source_panel, FileO
         || (get_current_type () == view_tree);
 
     const char *source = NULL;
-#ifdef WITH_FULL_PATHS
-    vfs_path_t *source_with_vpath = NULL;
-#endif /* WITH_FULL_PATHS */
     char *dest = NULL;
     vfs_path_t *dest_vpath = NULL;
-    char *temp = NULL;
     char *save_cwd = NULL, *save_dest = NULL;
     struct stat src_stat;
     gboolean ret_val = TRUE;
@@ -2648,47 +3129,9 @@ panel_operate (void *source_panel, FileO
 
     if (single_entry)
     {
-        gboolean ok;
-
-        if (force_single)
-            source = selection (panel)->fname;
-        else
-            source = panel_get_file (panel);
-
-        ok = !DIR_IS_DOTDOT (source);
-
-        if (!ok)
-            message (D_ERROR, MSG_ERROR, _("Cannot operate on \"..\"!"));
-        else
-        {
-            vfs_path_t *source_vpath;
-
-            source_vpath = vfs_path_from_str (source);
-
-            /* Update stat to get actual info */
-            ok = mc_lstat (source_vpath, &src_stat) == 0;
-            if (!ok)
-            {
-                message (D_ERROR, MSG_ERROR, _("Cannot stat \"%s\"\n%s"),
-                         path_trunc (source, 30), unix_error_string (errno));
-
-                /* Directory was changed outside MC. Reload it forced */
-                if (!panel->is_panelized)
-                {
-                    panel_update_flags_t flags = UP_RELOAD;
-
-                    /* don't update panelized panel */
-                    if (get_other_type () == view_listing && other_panel->is_panelized)
-                        flags |= UP_ONLY_CURRENT;
-
-                    update_panels (flags, UP_KEEPSEL);
-                }
-            }
-
-            vfs_path_free (source_vpath);
-        }
+        source = check_single_entry (panel, force_single, &src_stat);
 
-        if (!ok)
+        if (source == NULL)
             return FALSE;
     }
 
@@ -2697,89 +3140,21 @@ panel_operate (void *source_panel, FileO
     /* Show confirmation dialog */
     if (operation != OP_DELETE)
     {
-        const char *tmp_dest_dir;
-        char *dest_dir;
-        char *format;
-
-        /* Forced single operations default to the original name */
-        if (force_single)
-            tmp_dest_dir = source;
-        else if (get_other_type () == view_listing)
-            tmp_dest_dir = vfs_path_as_str (other_panel->cwd_vpath);
-        else
-            tmp_dest_dir = vfs_path_as_str (panel->cwd_vpath);
-        /*
-         * Add trailing backslash only when do non-local ops.
-         * It saves user from occasional file renames (when destination
-         * dir is deleted)
-         */
-        if (!force_single && tmp_dest_dir != NULL && tmp_dest_dir[0] != '\0'
-            && !IS_PATH_SEP (tmp_dest_dir[strlen (tmp_dest_dir) - 1]))
-        {
-            /* add trailing separator */
-            dest_dir = g_strconcat (tmp_dest_dir, PATH_SEP_STR, (char *) NULL);
-        }
-        else
-        {
-            /* just copy */
-            dest_dir = g_strdup (tmp_dest_dir);
-        }
-        if (dest_dir == NULL)
-        {
-            ret_val = FALSE;
-            goto ret_fast;
-        }
-
-        /* Generate confirmation prompt */
-        format =
-            panel_operate_generate_prompt (panel, operation, source != NULL ? &src_stat : NULL);
-
         dest =
-            file_mask_dialog (ctx, operation, source != NULL, format,
-                              source != NULL ? source : (const void *) &panel->marked, dest_dir,
-                              &do_bg);
+            do_confirm_copy_move (panel, operation, force_single, source, &src_stat, ctx, &do_bg);
 
-        g_free (format);
-        g_free (dest_dir);
-
-        if (dest == NULL || dest[0] == '\0')
+        if (dest == NULL)
         {
-            g_free (dest);
             ret_val = FALSE;
             goto ret_fast;
         }
+
         dest_vpath = vfs_path_from_str (dest);
     }
-    else if (confirm_delete)
+    else if (confirm_delete && !do_confirm_erase (panel, source, &src_stat))
     {
-        char *format;
-        char fmd_buf[BUF_MEDIUM];
-
-        /* Generate confirmation prompt */
-        format =
-            panel_operate_generate_prompt (panel, OP_DELETE, source != NULL ? &src_stat : NULL);
-
-        if (source == NULL)
-            g_snprintf (fmd_buf, sizeof (fmd_buf), format, panel->marked);
-        else
-        {
-            const int fmd_xlen = 64;
-            i = fmd_xlen - str_term_width1 (format) - 4;
-            g_snprintf (fmd_buf, sizeof (fmd_buf), format, str_trunc (source, i));
-        }
-
-        g_free (format);
-
-        if (safe_delete)
-            query_set_sel (1);
-
-        i = query_dialog (op_names[operation], fmd_buf, D_ERROR, 2, _("&Yes"), _("&No"));
-
-        if (i != 0)
-        {
-            ret_val = FALSE;
-            goto ret_fast;
-        }
+        ret_val = FALSE;
+        goto ret_fast;
     }
 
     tctx = file_op_total_context_new ();
@@ -2857,86 +3232,11 @@ panel_operate (void *source_panel, FileO
             }
         }
 
-        /* The source and src_stat variables have been initialized before */
-#ifdef WITH_FULL_PATHS
-        if (g_path_is_absolute (source))
-            source_with_vpath = vfs_path_from_str (source);
-        else
-            source_with_vpath = vfs_path_append_new (panel->cwd_vpath, source, (char *) NULL);
-#endif /* WITH_FULL_PATHS */
-        if (panel_operate_init_totals (panel, vfs_path_as_str (source_with_vpath), ctx, dialog_type)
-            == FILE_CONT)
-        {
-            if (operation == OP_DELETE)
-            {
-                if (S_ISDIR (src_stat.st_mode))
-                    value = erase_dir (tctx, ctx, source_with_vpath);
-                else
-                    value = erase_file (tctx, ctx, source_with_vpath);
-            }
-            else
-            {
-                temp = transform_source (ctx, source_with_vpath);
-                if (temp == NULL)
-                    value = transform_error;
-                else
-                {
-                    char *repl_dest, *temp2;
-
-                    repl_dest = mc_search_prepare_replace_str2 (ctx->search_handle, dest);
-                    if (ctx->search_handle->error != MC_SEARCH_E_OK)
-                    {
-                        if (ctx->search_handle->error_str != NULL)
-                            message (D_ERROR, MSG_ERROR, "%s", ctx->search_handle->error_str);
-
-                        g_free (repl_dest);
-                        goto clean_up;
-                    }
-
-                    temp2 = mc_build_filename (repl_dest, temp, (char *) NULL);
-                    g_free (temp);
-                    g_free (repl_dest);
-                    g_free (dest);
-                    vfs_path_free (dest_vpath);
-                    dest = temp2;
-                    dest_vpath = vfs_path_from_str (dest);
+        value =
+            operate_single_file (panel, operation, tctx, ctx, source, &src_stat, dest, dialog_type);
 
-                    switch (operation)
-                    {
-                    case OP_COPY:
-                        /* we use file_mask_op_follow_links only with OP_COPY */
-                        ctx->stat_func (source_with_vpath, &src_stat);
-
-                        if (S_ISDIR (src_stat.st_mode))
-                            value =
-                                copy_dir_dir (tctx, ctx, vfs_path_as_str (source_with_vpath),
-                                              dest, TRUE, FALSE, FALSE, NULL);
-                        else
-                            value =
-                                copy_file_file (tctx, ctx, vfs_path_as_str (source_with_vpath),
-                                                dest);
-                        break;
-
-                    case OP_MOVE:
-                        if (S_ISDIR (src_stat.st_mode))
-                            value =
-                                move_dir_dir (tctx, ctx, vfs_path_as_str (source_with_vpath), dest);
-                        else
-                            value =
-                                move_file_file (tctx, ctx, vfs_path_as_str (source_with_vpath),
-                                                dest);
-                        break;
-
-                    default:
-                        /* Unknown file operation */
-                        abort ();
-                    }
-                }
-            }                   /* Copy or move operation */
-
-            if ((value == FILE_CONT) && !force_single)
-                unmark_files (panel);
-        }
+        if ((value == FILE_CONT) && !force_single)
+            unmark_files (panel);
     }
     else
     {
@@ -2958,7 +3258,13 @@ panel_operate (void *source_panel, FileO
                 goto clean_up;
         }
 
-        if (panel_operate_init_totals (panel, NULL, ctx, dialog_type) == FILE_CONT)
+        /* TODO: the good way is required to skip directories scanning in case of rename/move
+         * of several directories. Since reqular expression can be used for destination,
+         * some directory movements can be a cross-filesystem and directory scanning is useful
+         * for those directories only. */
+
+        if (panel_operate_init_totals (panel, NULL, NULL, ctx, file_op_compute_totals, dialog_type)
+            == FILE_CONT)
         {
             /* Loop for every file, perform the actual copy operation */
             for (i = 0; i < panel->dir.len; i++)
@@ -2971,84 +3277,7 @@ panel_operate (void *source_panel, FileO
                 source2 = panel->dir.list[i].fname;
                 src_stat = panel->dir.list[i].st;
 
-#ifdef WITH_FULL_PATHS
-                vfs_path_free (source_with_vpath);
-                if (g_path_is_absolute (source2))
-                    source_with_vpath = vfs_path_from_str (source2);
-                else
-                    source_with_vpath =
-                        vfs_path_append_new (panel->cwd_vpath, source2, (char *) NULL);
-#endif /* WITH_FULL_PATHS */
-
-                if (operation == OP_DELETE)
-                {
-                    if (S_ISDIR (src_stat.st_mode))
-                        value = erase_dir (tctx, ctx, source_with_vpath);
-                    else
-                        value = erase_file (tctx, ctx, source_with_vpath);
-                }
-                else
-                {
-                    temp = transform_source (ctx, source_with_vpath);
-                    if (temp == NULL)
-                        value = transform_error;
-                    else
-                    {
-                        char *temp2, *repl_dest, *source_with_path_str;
-
-                        repl_dest = mc_search_prepare_replace_str2 (ctx->search_handle, dest);
-                        if (ctx->search_handle->error != MC_SEARCH_E_OK)
-                        {
-                            if (ctx->search_handle->error_str != NULL)
-                                message (D_ERROR, MSG_ERROR, "%s", ctx->search_handle->error_str);
-
-                            g_free (repl_dest);
-                            goto clean_up;
-                        }
-
-                        temp2 = mc_build_filename (repl_dest, temp, (char *) NULL);
-                        g_free (temp);
-                        g_free (repl_dest);
-                        source_with_path_str =
-                            strutils_shell_unescape (vfs_path_as_str (source_with_vpath));
-                        temp = strutils_shell_unescape (temp2);
-                        g_free (temp2);
-
-                        switch (operation)
-                        {
-                        case OP_COPY:
-                            /* we use file_mask_op_follow_links only with OP_COPY */
-                            {
-                                vfs_path_t *vpath;
-
-                                vpath = vfs_path_from_str (source_with_path_str);
-                                ctx->stat_func (vpath, &src_stat);
-                                vfs_path_free (vpath);
-                            }
-                            if (S_ISDIR (src_stat.st_mode))
-                                value = copy_dir_dir (tctx, ctx, source_with_path_str, temp,
-                                                      TRUE, FALSE, FALSE, NULL);
-                            else
-                                value = copy_file_file (tctx, ctx, source_with_path_str, temp);
-                            dest_dirs = free_linklist (dest_dirs);
-                            break;
-
-                        case OP_MOVE:
-                            if (S_ISDIR (src_stat.st_mode))
-                                value = move_dir_dir (tctx, ctx, source_with_path_str, temp);
-                            else
-                                value = move_file_file (tctx, ctx, source_with_path_str, temp);
-                            break;
-
-                        default:
-                            /* Unknown file operation */
-                            abort ();
-                        }
-
-                        g_free (source_with_path_str);
-                        g_free (temp);
-                    }
-                }               /* Copy or move operation */
+                value = operate_one_file (panel, operation, tctx, ctx, source2, &src_stat, dest);
 
                 if (value == FILE_ABORT)
                     break;
@@ -3093,9 +3322,6 @@ panel_operate (void *source_panel, FileO
 
     linklist = free_linklist (linklist);
     dest_dirs = free_linklist (dest_dirs);
-#ifdef WITH_FULL_PATHS
-    vfs_path_free (source_with_vpath);
-#endif /* WITH_FULL_PATHS */
     g_free (dest);
     vfs_path_free (dest_vpath);
     MC_PTR_FREE (ctx->dest_mask);
diff -urpN mc-4.8.20/src/filemanager/file.h mc-4.8.21/src/filemanager/file.h
--- mc-4.8.20/src/filemanager/file.h	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/file.h	2018-05-27 21:56:21.000000000 +0200
@@ -39,6 +39,8 @@ struct dirsize_status_msg_t
 
 /*** declarations of public functions ************************************************************/
 
+gboolean file_is_symlink_to_dir (const vfs_path_t * path, struct stat *st, gboolean * stale_link);
+
 FileProgressStatus copy_file_file (file_op_total_context_t * tctx, file_op_context_t * ctx,
                                    const char *src_path, const char *dst_path);
 FileProgressStatus move_dir_dir (file_op_total_context_t * tctx, file_op_context_t * ctx,
diff -urpN mc-4.8.20/src/filemanager/filegui.c mc-4.8.21/src/filemanager/filegui.c
--- mc-4.8.20/src/filemanager/filegui.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/filemanager/filegui.c	2018-05-27 21:56:21.000000000 +0200
@@ -10,7 +10,7 @@
    Janne Kukonlehto added much error recovery to them for being used
    in an interactive program.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -157,7 +157,7 @@ statfs (char const *filename, struct fs_
 #include "lib/util.h"
 #include "lib/widget.h"
 
-#include "src/setup.h"          /* verbose */
+#include "src/setup.h"          /* verbose, safe_overwrite */
 
 #include "midnight.h"
 #include "fileopctx.h"          /* FILE_CONT */
@@ -409,7 +409,7 @@ overwrite_query_dialog (file_op_context_
     const int rd_ylen = 1;
     int rd_xlen = 60;
     int y = 2;
-    unsigned long yes_id;
+    unsigned long yes_id, no_id;
 
     struct
     {
@@ -565,7 +565,7 @@ overwrite_query_dialog (file_op_context_
 
     ADD_RD_LABEL (4, 0, 0, y);  /* Overwrite this target? */
     yes_id = ADD_RD_BUTTON (5, y);      /* Yes */
-    ADD_RD_BUTTON (6, y);       /* No */
+    no_id = ADD_RD_BUTTON (6, y);       /* No */
 
     /* "this target..." widgets */
     if (!S_ISDIR (ui->d_stat->st_mode))
@@ -591,7 +591,7 @@ overwrite_query_dialog (file_op_context_
 
     label_set_text (LABEL (label1), str_trunc (stripped_name, rd_xlen - 8));
     dlg_set_size (ui->replace_dlg, y + 3, rd_xlen);
-    dlg_select_by_id (ui->replace_dlg, yes_id);
+    dlg_select_by_id (ui->replace_dlg, safe_overwrite ? no_id : yes_id);
     result = dlg_run (ui->replace_dlg);
     dlg_destroy (ui->replace_dlg);
 
@@ -702,7 +702,7 @@ check_progress_buttons (file_op_context_
         ctx->suspended = !ctx->suspended;
         place_progress_buttons (ui->op_dlg, ctx->suspended);
         dlg_redraw (ui->op_dlg);
-        /* fallthrough */
+        MC_FALLTHROUGH;
     default:
         if (ctx->suspended)
             goto get_event;
@@ -1143,9 +1143,11 @@ file_progress_real_query_replace (file_o
     case REPLACE_REGET:
         /* Careful: we fall through and set do_append */
         ctx->do_reget = _d_stat->st_size;
+        MC_FALLTHROUGH;
 
     case REPLACE_APPEND:
         ctx->do_append = TRUE;
+        MC_FALLTHROUGH;
 
     case REPLACE_YES:
     case REPLACE_ALWAYS:
diff -urpN mc-4.8.20/src/filemanager/filenot.c mc-4.8.21/src/filemanager/filenot.c
--- mc-4.8.20/src/filemanager/filenot.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/filenot.c	2018-05-27 21:56:21.000000000 +0200
@@ -3,7 +3,7 @@
    tree about the changes made to the directory
    structure.
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Author:
diff -urpN mc-4.8.20/src/filemanager/fileopctx.c mc-4.8.21/src/filemanager/fileopctx.c
--- mc-4.8.20/src/filemanager/fileopctx.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/fileopctx.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    File operation contexts for the Midnight Commander
 
-   Copyright (C) 1999-2017
+   Copyright (C) 1999-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/filemanager/find.c mc-4.8.21/src/filemanager/find.c
--- mc-4.8.20/src/filemanager/find.c	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/src/filemanager/find.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Find file command for the Midnight Commander
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written  by:
@@ -540,7 +540,7 @@ find_parm_callback (Widget * w, Widget *
         }
 
         first_draw = FALSE;
-        /* fall through to call MSG_DRAW default handler */
+        MC_FALLTHROUGH;         /* to call MSG_DRAW default handler */
 
     default:
         return dlg_default_callback (w, sender, msg, parm, data);
diff -urpN mc-4.8.20/src/filemanager/hotlist.c mc-4.8.21/src/filemanager/hotlist.c
--- mc-4.8.20/src/filemanager/hotlist.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/hotlist.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Directory hotlist -- for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -449,9 +449,9 @@ hotlist_run_cmd (int action)
                 fill_listbox (list);
                 return 0;
             }
-            /* Fall through - go up */
+            MC_FALLTHROUGH;     /* go up */
         }
-        /* Fall through if list empty - just go up */
+        MC_FALLTHROUGH;         /* if list empty - just go up */
 
     case B_UP_GROUP:
         {
@@ -466,7 +466,7 @@ hotlist_run_cmd (int action)
 #ifdef ENABLE_VFS
     case B_FREE_ALL_VFS:
         vfs_expire (TRUE);
-        /* fall through */
+        MC_FALLTHROUGH;
 
     case B_REFRESH_VFS:
         listbox_remove_list (l_hotlist);
@@ -1289,7 +1289,7 @@ hot_next_token (void)
         if (c == '\n')
             goto again;
 
-        /* fall through; it is taken as normal character */
+        MC_FALLTHROUGH;         /* it is taken as normal character */
 
     default:
         do
diff -urpN mc-4.8.20/src/filemanager/info.c mc-4.8.21/src/filemanager/info.c
--- mc-4.8.20/src/filemanager/info.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/info.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Panel managing.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -153,7 +153,7 @@ info_show_info (WInfo * info)
         /* Note: all cases are fall-throughs */
 
     default:
-
+        MC_FALLTHROUGH;
     case 16:
         widget_move (w, 16, 3);
         if ((myfs_stats.nfree == 0 && myfs_stats.nodes == 0) ||
@@ -169,7 +169,7 @@ info_show_info (WInfo * info)
                         myfs_stats.nfree, myfs_stats.nodes,
                         myfs_stats.nodes == 0 ? 0 :
                         (int) (100 * (long double) myfs_stats.nfree / myfs_stats.nodes));
-
+        MC_FALLTHROUGH;
     case 15:
         widget_move (w, 15, 3);
         if (myfs_stats.avail == 0 && myfs_stats.total == 0)
@@ -184,36 +184,40 @@ info_show_info (WInfo * info)
                         myfs_stats.total == 0 ? 0 :
                         (int) (100 * (long double) myfs_stats.avail / myfs_stats.total));
         }
-
+        MC_FALLTHROUGH;
     case 14:
         widget_move (w, 14, 3);
         tty_printf (_("Type:       %s"),
                     myfs_stats.typename ? myfs_stats.typename : _("non-local vfs"));
         if (myfs_stats.type != 0xffff && myfs_stats.type != -1)
             tty_printf (" (%Xh)", (unsigned int) myfs_stats.type);
-
+        MC_FALLTHROUGH;
     case 13:
         widget_move (w, 13, 3);
         str_printf (buff, _("Device:     %s"),
                     str_trunc (myfs_stats.device, w->cols - i18n_adjust));
         tty_print_string (buff->str);
         g_string_set_size (buff, 0);
+        MC_FALLTHROUGH;
     case 12:
         widget_move (w, 12, 3);
         str_printf (buff, _("Filesystem: %s"),
                     str_trunc (myfs_stats.mpoint, w->cols - i18n_adjust));
         tty_print_string (buff->str);
         g_string_set_size (buff, 0);
+        MC_FALLTHROUGH;
     case 11:
         widget_move (w, 11, 3);
         str_printf (buff, _("Accessed:   %s"), file_date (st.st_atime));
         tty_print_string (buff->str);
         g_string_set_size (buff, 0);
+        MC_FALLTHROUGH;
     case 10:
         widget_move (w, 10, 3);
         str_printf (buff, _("Modified:   %s"), file_date (st.st_mtime));
         tty_print_string (buff->str);
         g_string_set_size (buff, 0);
+        MC_FALLTHROUGH;
     case 9:
         widget_move (w, 9, 3);
         /* The field st_ctime is changed by writing or by setting inode
@@ -222,7 +226,7 @@ info_show_info (WInfo * info)
         str_printf (buff, _("Changed:    %s"), file_date (st.st_ctime));
         tty_print_string (buff->str);
         g_string_set_size (buff, 0);
-
+        MC_FALLTHROUGH;
     case 8:
         widget_move (w, 8, 3);
 #ifdef HAVE_STRUCT_STAT_ST_RDEV
@@ -240,24 +244,24 @@ info_show_info (WInfo * info)
                                   (unsigned long) st.st_blocks), (unsigned long) st.st_blocks);
 #endif
         }
-
+        MC_FALLTHROUGH;
     case 7:
         widget_move (w, 7, 3);
         tty_printf (_("Owner:      %s/%s"), get_owner (st.st_uid), get_group (st.st_gid));
-
+        MC_FALLTHROUGH;
     case 6:
         widget_move (w, 6, 3);
         tty_printf (_("Links:      %d"), (int) st.st_nlink);
-
+        MC_FALLTHROUGH;
     case 5:
         widget_move (w, 5, 3);
         tty_printf (_("Mode:       %s (%04o)"),
                     string_perm (st.st_mode), (unsigned) st.st_mode & 07777);
-
+        MC_FALLTHROUGH;
     case 4:
         widget_move (w, 4, 3);
         tty_printf (_("Location:   %Xh:%Xh"), (unsigned int) st.st_dev, (unsigned int) st.st_ino);
-
+        MC_FALLTHROUGH;
     case 3:
         {
             const char *fname;
@@ -267,9 +271,11 @@ info_show_info (WInfo * info)
             str_printf (buff, file_label, str_trunc (fname, w->cols - i18n_adjust));
             tty_print_string (buff->str);
         }
-
+        MC_FALLTHROUGH;
     case 2:
+        MC_FALLTHROUGH;
     case 1:
+        MC_FALLTHROUGH;
     case 0:
         ;
     }                           /* switch */
diff -urpN mc-4.8.20/src/filemanager/layout.c mc-4.8.21/src/filemanager/layout.c
--- mc-4.8.20/src/filemanager/layout.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/layout.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Panel layout module for the Midnight Commander
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/filemanager/midnight.c mc-4.8.21/src/filemanager/midnight.c
--- mc-4.8.20/src/filemanager/midnight.c	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/src/filemanager/midnight.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Main dialog (file panels) of the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -694,19 +694,6 @@ create_panels (void)
 #endif /* ENABLE_VFS */
 
     mc_event_add (MCEVENT_GROUP_CORE, "vfs_print_message", print_vfs_message, NULL, NULL);
-
-    /* Create the nice widgets */
-    cmdline = command_new (0, 0, 0);
-    the_prompt = label_new (0, 0, mc_prompt);
-    the_prompt->transparent = 1;
-    the_bar = buttonbar_new (mc_global.keybar_visible);
-
-    the_hint = label_new (0, 0, 0);
-    the_hint->transparent = 1;
-    the_hint->auto_adjust_cols = 0;
-    WIDGET (the_hint)->cols = COLS;
-
-    the_menubar = menubar_new (0, 0, COLS, NULL, menubar_visible);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -929,30 +916,37 @@ done_mc (void)
 /* --------------------------------------------------------------------------------------------- */
 
 static void
-create_panels_and_run_mc (void)
+create_file_manager (void)
 {
     midnight_dlg->get_shortcut = midnight_get_shortcut;
     midnight_dlg->get_title = midnight_get_title;
     /* allow rebind tab */
     widget_want_tab (WIDGET (midnight_dlg), TRUE);
 
-    create_panels ();
-
+    the_menubar = menubar_new (0, 0, COLS, NULL, menubar_visible);
     add_widget (midnight_dlg, the_menubar);
     init_menu ();
 
+    create_panels ();
     add_widget (midnight_dlg, get_panel_widget (0));
     add_widget (midnight_dlg, get_panel_widget (1));
 
+    the_hint = label_new (0, 0, 0);
+    the_hint->transparent = 1;
+    the_hint->auto_adjust_cols = 0;
+    WIDGET (the_hint)->cols = COLS;
     add_widget (midnight_dlg, the_hint);
+
+    cmdline = command_new (0, 0, 0);
     add_widget (midnight_dlg, cmdline);
+
+    the_prompt = label_new (0, 0, mc_prompt);
+    the_prompt->transparent = TRUE;
     add_widget (midnight_dlg, the_prompt);
 
+    the_bar = buttonbar_new (mc_global.keybar_visible);
     add_widget (midnight_dlg, the_bar);
     midnight_set_buttonbar (the_bar);
-
-    /* Run the Midnight Commander if no file was specified in the command line */
-    dlg_run (midnight_dlg);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1123,7 +1117,7 @@ midnight_execute_cmd (Widget * sender, l
         chown_cmd ();
         break;
     case CK_ChangeOwnAdvanced:
-        chown_advanced_cmd ();
+        advanced_chown_cmd ();
         break;
     case CK_CompareDirs:
         compare_dirs_cmd ();
@@ -1792,7 +1786,10 @@ do_nc (void)
 
         setup_mc ();
         mc_filehighlight = mc_fhl_new (TRUE);
-        create_panels_and_run_mc ();
+
+        create_file_manager ();
+        (void) dlg_run (midnight_dlg);
+
         mc_fhl_free (&mc_filehighlight);
 
         ret = TRUE;
diff -urpN mc-4.8.20/src/filemanager/mountlist.c mc-4.8.21/src/filemanager/mountlist.c
--- mc-4.8.20/src/filemanager/mountlist.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/mountlist.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Return a list of mounted file systems
 
-   Copyright (C) 1991-2017
+   Copyright (C) 1991-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -75,9 +75,6 @@
 #ifdef HAVE_SYS_FS_S5PARAM_H    /* Fujitsu UXP/V */
 #include <sys/fs/s5param.h>
 #endif
-#if defined HAVE_SYS_FILSYS_H && !defined _CRAY
-#include <sys/filsys.h>         /* SVR2 */
-#endif
 #ifdef HAVE_SYS_STATFS_H
 #include <sys/statfs.h>
 #endif
@@ -119,10 +116,6 @@
 #include <dirent.h>
 #endif
 
-#ifdef MOUNTED_FREAD            /* SVR2.  */
-#include <mnttab.h>
-#endif
-
 #ifdef MOUNTED_FREAD_FSTYP      /* SVR3.  */
 #include <mnttab.h>
 #include <sys/fstyp.h>
@@ -309,17 +302,6 @@ me_remote (char const *fs_name, char con
 #endif
 #endif
 
-#ifdef STAT_READ_FILSYS         /* SVR2 */
-/* Set errno to zero upon EOF.  */
-#define ZERO_BYTE_TRANSFER_ERRNO 0
-
-#ifdef EINTR
-#define IS_EINTR(x) ((x) == EINTR)
-#else
-#define IS_EINTR(x) 0
-#endif
-#endif /* STAT_READ_FILSYS */
-
 /*** file scope type declarations ****************************************************************/
 
 /* A mount table entry. */
@@ -1406,76 +1388,6 @@ read_file_system_list (void)
 
 /* --------------------------------------------------------------------------------------------- */
 
-#ifdef STAT_READ_FILSYS         /* SVR2 */
-
-/* Read(write) up to COUNT bytes at BUF from(to) descriptor FD, retrying if
-   interrupted.  Return the actual number of bytes read(written), zero for EOF,
-   or SAFE_READ_ERROR(SAFE_WRITE_ERROR) upon error.  */
-static size_t
-safe_read (int fd, void *buf, size_t count)
-{
-    /* Work around a bug in Tru64 5.1.  Attempting to read more than
-       INT_MAX bytes fails with errno == EINVAL.  See
-       <http://lists.gnu.org/archive/html/bug-gnu-utils/2002-04/msg00010.html>.
-       When decreasing COUNT, keep it block-aligned.  */
-    /* *INDENT-OFF* */
-    enum { BUGGY_READ_MAXIMUM = INT_MAX & ~8191 };
-    /* *INDENT-ON* */
-
-    while (TRUE)
-    {
-        ssize_t result;
-
-        result = read (fd, buf, count);
-
-        if (0 <= result)
-            return result;
-        else if (IS_EINTR (errno))
-            continue;
-        else if (errno == EINVAL && BUGGY_READ_MAXIMUM < count)
-            count = BUGGY_READ_MAXIMUM;
-        else
-            return result;
-    }
-}
-
-/* --------------------------------------------------------------------------------------------- */
-
-/* Read COUNT bytes at BUF to(from) descriptor FD, retrying if
-   interrupted or if a partial write(read) occurs.  Return the number
-   of bytes transferred.
-   When writing, set errno if fewer than COUNT bytes are written.
-   When reading, if fewer than COUNT bytes are read, you must examine
-   errno to distinguish failure from EOF (errno == 0).  */
-
-static size_t
-full_read (int fd, void *buf, size_t count)
-{
-    size_t total = 0;
-    char *ptr = (char *) buf;
-
-    while (count > 0)
-    {
-        size_t n_rw = safe_read (fd, ptr, count);
-        if (n_rw == (size_t) (-1))
-            break;
-        if (n_rw == 0)
-        {
-            errno = ZERO_BYTE_TRANSFER_ERRNO;
-            break;
-        }
-        total += n_rw;
-        ptr += n_rw;
-        count -= n_rw;
-    }
-
-    return total;
-}
-
-#endif /* STAT_READ_FILSYS */
-
-/* --------------------------------------------------------------------------------------------- */
-
 #ifdef HAVE_INFOMOUNT
 /* Fill in the fields of FSP with information about space usage for
    the file system on which FILE resides.
@@ -1541,40 +1453,6 @@ get_fs_usage (char const *file, char con
         fsp->fsu_files = PROPAGATE_ALL_ONES (fsd.fd_req.gtot);
         fsp->fsu_ffree = PROPAGATE_ALL_ONES (fsd.fd_req.gfree);
 
-#elif defined STAT_READ_FILSYS  /* SVR2 */
-#ifndef SUPERBOFF
-#define SUPERBOFF (SUPERB * 512)
-#endif
-
-        struct filsys fsd;
-        int fd;
-
-        if (!disk)
-        {
-            errno = 0;
-            return -1;
-        }
-
-        fd = open (disk, O_RDONLY);
-        if (fd < 0)
-            return -1;
-        lseek (fd, (off_t) SUPERBOFF, 0);
-        if (full_read (fd, (char *) &fsd, sizeof (fsd)) != sizeof (fsd))
-        {
-            close (fd);
-            return -1;
-        }
-        close (fd);
-
-        fsp->fsu_blocksize = (fsd.s_type == Fs2b ? 1024 : 512);
-        fsp->fsu_blocks = PROPAGATE_ALL_ONES (fsd.s_fsize);
-        fsp->fsu_bfree = PROPAGATE_ALL_ONES (fsd.s_tfree);
-        fsp->fsu_bavail = PROPAGATE_TOP_BIT (fsd.s_tfree);
-        fsp->fsu_bavail_top_bit_set = EXTRACT_TOP_BIT (fsd.s_tfree) != 0;
-        fsp->fsu_files = (fsd.s_isize == -1
-                          ? UINTMAX_MAX : (fsd.s_isize - 2) * INOPB * (fsd.s_type == Fs2b ? 2 : 1));
-        fsp->fsu_ffree = PROPAGATE_ALL_ONES (fsd.s_tinode);
-
 #elif defined STAT_STATFS3_OSF1 /* OSF/1 */
 
         struct statfs fsd;
diff -urpN mc-4.8.20/src/filemanager/panel.c mc-4.8.21/src/filemanager/panel.c
--- mc-4.8.20/src/filemanager/panel.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/filemanager/panel.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Panel managing.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -3873,7 +3873,7 @@ panel_mouse_callback (Widget * w, mouse_
 
         if (!is_active)
             change_panel ();
-        /* fall through */
+        MC_FALLTHROUGH;
 
     case MSG_MOUSE_DRAG:
         {
@@ -4185,7 +4185,7 @@ panel_recursive_cd_to_parent (const vfs_
 
         /* check if path contains only '/' */
         panel_cwd_path = vfs_path_as_str (cwd_vpath);
-        if (IS_PATH_SEP (panel_cwd_path[0]) && panel_cwd_path[1] == '\0')
+        if (panel_cwd_path != NULL && IS_PATH_SEP (panel_cwd_path[0]) && panel_cwd_path[1] == '\0')
             return NULL;
 
         tmp_vpath = vfs_path_vtokens_get (cwd_vpath, 0, -1);
diff -urpN mc-4.8.20/src/filemanager/panelize.c mc-4.8.21/src/filemanager/panelize.c
--- mc-4.8.20/src/filemanager/panelize.c	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/src/filemanager/panelize.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    External panelize
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/filemanager/tree.c mc-4.8.21/src/filemanager/tree.c
--- mc-4.8.20/src/filemanager/tree.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/tree.c	2018-05-27 21:56:21.000000000 +0200
@@ -6,7 +6,7 @@
    created and destroyed.  This is required for the future vfs layer,
    it will be possible to have tree views over virtual file systems.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/filemanager/treestore.c mc-4.8.21/src/filemanager/treestore.c
--- mc-4.8.20/src/filemanager/treestore.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/filemanager/treestore.c	2018-05-27 21:56:21.000000000 +0200
@@ -8,7 +8,7 @@
    created and destroyed.  This is required for the future vfs layer,
    it will be possible to have tree views over virtual file systems.
 
-   Copyright (C) 1999-2017
+   Copyright (C) 1999-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/help.c mc-4.8.21/src/help.c
--- mc-4.8.20/src/help.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/help.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Hypertext file browser.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/keybind-defaults.c mc-4.8.21/src/keybind-defaults.c
--- mc-4.8.20/src/keybind-defaults.c	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/src/keybind-defaults.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Default values for keybinding engine
 
-   Copyright (C) 2009-2017
+   Copyright (C) 2009-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/learn.c mc-4.8.21/src/learn.c
--- mc-4.8.20/src/learn.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/learn.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Learn keys
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/main.c mc-4.8.21/src/main.c
--- mc-4.8.20/src/main.c	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/src/main.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Main program for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/man2hlp/Makefile.in mc-4.8.21/src/man2hlp/Makefile.in
--- mc-4.8.20/src/man2hlp/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/src/man2hlp/Makefile.in	2018-06-03 10:57:33.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/selcodepage.c mc-4.8.21/src/selcodepage.c
--- mc-4.8.20/src/selcodepage.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/selcodepage.c	2018-05-27 21:56:21.000000000 +0200
@@ -3,7 +3,7 @@
 
    Copyright (C) 2001 Walery Studennikov <despair@sama.ru>
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/setup.c mc-4.8.21/src/setup.c
--- mc-4.8.20/src/setup.c	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/src/setup.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Setup loading/saving.
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -87,6 +87,8 @@ gboolean boot_current_is_left = TRUE;
 
 /* If on, default for "No" in delete operations */
 gboolean safe_delete = FALSE;
+/* If on, default for "No" in overwrite files */
+gboolean safe_overwrite = FALSE;
 
 /* Controls screen clearing before an exec */
 gboolean clear_before_exec = TRUE;
@@ -293,6 +295,7 @@ static const struct
     { "confirm_directory_hotlist_delete", &confirm_directory_hotlist_delete },
     { "confirm_view_dir", &confirm_view_dir },
     { "safe_delete", &safe_delete },
+    { "safe_overwrite", &safe_overwrite },
 #ifndef HAVE_CHARSET
     { "eight_bit_clean", &mc_global.eight_bit_clean },
     { "full_eight_bits", &mc_global.full_eight_bits },
@@ -302,7 +305,7 @@ static const struct
     { "mouse_close_dialog", &mouse_close_dialog},
     { "fast_refresh", &fast_refresh },
     { "drop_menus", &drop_menus },
-    { "wrap_mode",  &mcview_global_wrap_mode },
+    { "wrap_mode",  &mcview_global_flags.wrap },
     { "old_esc_mode", &old_esc_mode },
     { "cd_symlinks", &mc_global.vfs.cd_symlinks },
     { "show_all_if_ambiguous", &mc_global.widget.show_all_if_ambiguous },
@@ -1456,12 +1459,13 @@ panel_load_setup (WPanel * panel, const
     size_t i;
     char *buffer, buffer2[BUF_TINY];
 
-    panel->sort_info.reverse = mc_config_get_int (mc_global.panels_config, section, "reverse", 0);
+    panel->sort_info.reverse =
+        mc_config_get_bool (mc_global.panels_config, section, "reverse", FALSE);
     panel->sort_info.case_sensitive =
-        mc_config_get_int (mc_global.panels_config, section, "case_sensitive",
-                           OS_SORT_CASE_SENSITIVE_DEFAULT);
+        mc_config_get_bool (mc_global.panels_config, section, "case_sensitive",
+                            OS_SORT_CASE_SENSITIVE_DEFAULT);
     panel->sort_info.exec_first =
-        mc_config_get_int (mc_global.panels_config, section, "exec_first", 0);
+        mc_config_get_bool (mc_global.panels_config, section, "exec_first", FALSE);
 
     /* Load sort order */
     buffer = mc_config_get_string (mc_global.panels_config, section, "sort_order", "name");
@@ -1514,10 +1518,11 @@ panel_save_setup (WPanel * panel, const
     char buffer[BUF_TINY];
     size_t i;
 
-    mc_config_set_int (mc_global.panels_config, section, "reverse", panel->sort_info.reverse);
-    mc_config_set_int (mc_global.panels_config, section, "case_sensitive",
-                       panel->sort_info.case_sensitive);
-    mc_config_set_int (mc_global.panels_config, section, "exec_first", panel->sort_info.exec_first);
+    mc_config_set_bool (mc_global.panels_config, section, "reverse", panel->sort_info.reverse);
+    mc_config_set_bool (mc_global.panels_config, section, "case_sensitive",
+                        panel->sort_info.case_sensitive);
+    mc_config_set_bool (mc_global.panels_config, section, "exec_first",
+                        panel->sort_info.exec_first);
 
     mc_config_set_string (mc_global.panels_config, section, "sort_order", panel->sort_field->id);
 
diff -urpN mc-4.8.20/src/setup.h mc-4.8.21/src/setup.h
--- mc-4.8.20/src/setup.h	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/setup.h	2018-05-27 21:56:21.000000000 +0200
@@ -82,6 +82,7 @@ extern gboolean confirm_exit;
 extern gboolean confirm_overwrite;
 extern gboolean confirm_view_dir;
 extern gboolean safe_delete;
+extern gboolean safe_overwrite;
 extern gboolean clear_before_exec;
 extern gboolean auto_menu;
 extern gboolean drop_menus;
diff -urpN mc-4.8.20/src/subshell/Makefile.in mc-4.8.21/src/subshell/Makefile.in
--- mc-4.8.20/src/subshell/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/src/subshell/Makefile.in	2018-06-03 10:57:33.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/subshell/common.c mc-4.8.21/src/subshell/common.c
--- mc-4.8.20/src/subshell/common.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/subshell/common.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Concurrent shell support for the Midnight Commander
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/subshell/proxyfunc.c mc-4.8.21/src/subshell/proxyfunc.c
--- mc-4.8.20/src/subshell/proxyfunc.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/subshell/proxyfunc.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Proxy functions for getting access to public variables into 'filemanager' module.
 
-   Copyright (C) 2015-2017
+   Copyright (C) 2015-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/textconf.c mc-4.8.21/src/textconf.c
--- mc-4.8.20/src/textconf.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/textconf.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Print features specific for this build
 
-   Copyright (C) 2000-2017
+   Copyright (C) 2000-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/usermenu.c mc-4.8.21/src/usermenu.c
--- mc-4.8.20/src/usermenu.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/usermenu.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    User Menu implementation
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -448,6 +448,7 @@ execute_menu_command (const WEdit * edit
         vfs_path_free (file_name_vpath);
         return;
     }
+
     cmd_file = fdopen (cmd_file_fd, "w");
     fputs ("#! /bin/sh\n", cmd_file);
     commands++;
@@ -520,30 +521,29 @@ execute_menu_command (const WEdit * edit
                 g_free (text);
             }
         }
-        else
+        else if (*commands == '%')
         {
-            if (*commands == '%')
-            {
-                int i;
+            int i;
 
-                i = check_format_view (commands + 1);
-                if (i != 0)
-                {
-                    commands += i;
-                    run_view = TRUE;
-                }
-                else
-                {
-                    do_quote = TRUE;    /* Default: Quote expanded macro */
-                    expand_prefix_found = TRUE;
-                }
+            i = check_format_view (commands + 1);
+            if (i != 0)
+            {
+                commands += i;
+                run_view = TRUE;
             }
             else
-                fputc (*commands, cmd_file);
+            {
+                do_quote = TRUE;        /* Default: Quote expanded macro */
+                expand_prefix_found = TRUE;
+            }
         }
+        else
+            fputc (*commands, cmd_file);
     }
+
     fclose (cmd_file);
     mc_chmod (file_name_vpath, S_IRWXU);
+
     if (run_view)
     {
         mcview_viewer (vfs_path_as_str (file_name_vpath), NULL, 0, 0, 0);
@@ -556,15 +556,12 @@ execute_menu_command (const WEdit * edit
         char *cmd;
 
         cmd = g_strconcat ("/bin/sh ", vfs_path_as_str (file_name_vpath), (char *) NULL);
-        if (!show_prompt)
-        {
-            if (system (cmd) == -1)
-                message (D_ERROR, MSG_ERROR, "%s", _("Error calling program"));
-        }
-        else
-        {
+
+        if (show_prompt)
             shell_execute (cmd, EXECUTE_HIDE);
-        }
+        else if (system (cmd) == -1)
+            message (D_ERROR, MSG_ERROR, "%s", _("Error calling program"));
+
         g_free (cmd);
     }
     mc_unlink (file_name_vpath);
@@ -640,22 +637,22 @@ check_format_view (const char *p)
             {
                 if (strncmp (q, DEFAULT_CHARSET, 5) == 0)
                 {
-                    mcview_default_hex_mode = 0;
+                    mcview_global_flags.hex = FALSE;
                     q += 4;
                 }
                 else if (strncmp (q, "hex", 3) == 0)
                 {
-                    mcview_default_hex_mode = 1;
+                    mcview_global_flags.hex = TRUE;
                     q += 2;
                 }
                 else if (strncmp (q, "nroff", 5) == 0)
                 {
-                    mcview_default_nroff_flag = 1;
+                    mcview_global_flags.nroff = TRUE;
                     q += 4;
                 }
                 else if (strncmp (q, "unform", 6) == 0)
                 {
-                    mcview_default_nroff_flag = 0;
+                    mcview_global_flags.nroff = FALSE;
                     q += 5;
                 }
             }
@@ -683,14 +680,14 @@ check_format_cd (const char *p)
 int
 check_format_var (const char *p, char **v)
 {
-    const char *q = p;
-    char *var_name;
-
     *v = NULL;
+
     if (strncmp (p, "var{", 4) == 0)
     {
+        const char *q = p;
         const char *dots = NULL;
         const char *value;
+        char *var_name;
 
         for (q += 4; *q != '\0' && *q != '}'; q++)
         {
@@ -711,16 +708,14 @@ check_format_var (const char *p, char **
 
         /* Copy the variable name */
         var_name = g_strndup (p + 4, dots - 2 - (p + 3));
-
         value = getenv (var_name);
         g_free (var_name);
+
         if (value != NULL)
-        {
             *v = g_strdup (value);
-            return q - p;
-        }
-        var_name = g_strndup (dots, q - dots);
-        *v = var_name;
+        else
+            *v = g_strndup (dots, q - dots);
+
         return q - p;
     }
     return 0;
@@ -883,7 +878,7 @@ expand_format (const WEdit * edit_widget
             goto ret;
         }
 
-        /* Fall through */
+        MC_FALLTHROUGH;
 
     case 't':
     case 'u':
@@ -969,7 +964,6 @@ user_menu_cmd (const WEdit * edit_widget
         else
             menu = mc_config_get_full_path (MC_USERMENU_FILE);
 
-
         if (!exist_file (menu))
         {
             g_free (menu);
@@ -1019,7 +1013,6 @@ user_menu_cmd (const WEdit * edit_widget
 
             menu_limit += MAX_ENTRIES;
             new_entries = g_try_realloc (entries, sizeof (new_entries[0]) * menu_limit);
-
             if (new_entries == NULL)
                 break;
 
@@ -1028,18 +1021,19 @@ user_menu_cmd (const WEdit * edit_widget
             while (--new_entries >= &entries[menu_lines])
                 *new_entries = NULL;
         }
+
         if (col == 0 && entries[menu_lines] == NULL)
-        {
-            if (*p == '#')
+            switch (*p)
             {
+            case '#':
                 /* show prompt if first line of external script is #interactive */
                 if (selected_entry >= 0 && strncmp (p, "#silent", 7) == 0)
                     interactive = FALSE;
                 /* A commented menu entry */
                 accept_entry = TRUE;
-            }
-            else if (*p == '+')
-            {
+                break;
+
+            case '+':
                 if (*(p + 1) == '=')
                 {
                     /* Combined adding and default */
@@ -1052,9 +1046,9 @@ user_menu_cmd (const WEdit * edit_widget
                     /* A condition for adding the entry */
                     p = test_line (edit_widget, p, &accept_entry);
                 }
-            }
-            else if (*p == '=')
-            {
+                break;
+
+            case '=':
                 if (*(p + 1) == '+')
                 {
                     /* Combined adding and default */
@@ -1070,16 +1064,20 @@ user_menu_cmd (const WEdit * edit_widget
                     if (selected == 0 && i != 0)
                         selected = menu_lines;
                 }
+                break;
+
+            default:
+                if (!whitespace (*p) && str_isprint (p))
+                {
+                    /* A menu entry title line */
+                    if (accept_entry)
+                        entries[menu_lines] = p;
+                    else
+                        accept_entry = TRUE;
+                }
+                break;
             }
-            else if (!whitespace (*p) && str_isprint (p))
-            {
-                /* A menu entry title line */
-                if (accept_entry)
-                    entries[menu_lines] = p;
-                else
-                    accept_entry = TRUE;
-            }
-        }
+
         if (*p == '\n')
         {
             if (entries[menu_lines] != NULL)
diff -urpN mc-4.8.20/src/util.c mc-4.8.21/src/util.c
--- mc-4.8.20/src/util.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/util.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Various non-library utilities
 
-   Copyright (C) 2003-2017
+   Copyright (C) 2003-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/vfs/Makefile.in mc-4.8.21/src/vfs/Makefile.in
--- mc-4.8.20/src/vfs/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/src/vfs/Makefile.in	2018-06-03 10:57:33.000000000 +0200
@@ -131,6 +131,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -138,6 +139,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/cpio/Makefile.in mc-4.8.21/src/vfs/cpio/Makefile.in
--- mc-4.8.20/src/vfs/cpio/Makefile.in	2017-11-25 19:33:52.000000000 +0100
+++ mc-4.8.21/src/vfs/cpio/Makefile.in	2018-06-03 10:57:33.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/cpio/cpio.c mc-4.8.21/src/vfs/cpio/cpio.c
--- mc-4.8.20/src/vfs/cpio/cpio.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/vfs/cpio/cpio.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Virtual File System: GNU Tar file system.
 
-   Copyright (C) 2000-2017
+   Copyright (C) 2000-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/vfs/extfs/Makefile.in mc-4.8.21/src/vfs/extfs/Makefile.in
--- mc-4.8.20/src/vfs/extfs/Makefile.in	2017-11-25 19:33:53.000000000 +0100
+++ mc-4.8.21/src/vfs/extfs/Makefile.in	2018-06-03 10:57:33.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/extfs/extfs.c mc-4.8.21/src/vfs/extfs/extfs.c
--- mc-4.8.20/src/vfs/extfs/extfs.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/vfs/extfs/extfs.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Virtual File System: External file system.
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/vfs/extfs/helpers/Makefile.in mc-4.8.21/src/vfs/extfs/helpers/Makefile.in
--- mc-4.8.20/src/vfs/extfs/helpers/Makefile.in	2017-11-25 19:33:53.000000000 +0100
+++ mc-4.8.21/src/vfs/extfs/helpers/Makefile.in	2018-06-03 10:57:33.000000000 +0200
@@ -114,6 +114,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -121,6 +122,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/extfs/helpers/iso9660.in mc-4.8.21/src/vfs/extfs/helpers/iso9660.in
--- mc-4.8.20/src/vfs/extfs/helpers/iso9660.in	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/src/vfs/extfs/helpers/iso9660.in	2018-05-27 21:56:21.000000000 +0200
@@ -125,6 +125,7 @@ mcisofs_list () {
       *.lz4) MYCAT="lz4 -dc";;
       *.lzma) MYCAT="lzma -dc";;
       *.xz)  MYCAT="xz -dc";;
+      *.zst) MYCAT="zstd -dc";;
       *.bz2) MYCAT="bzip2 -dc";;
       *.gz)  MYCAT="gzip -dc";;
       *.z)   MYCAT="gzip -dc";;
diff -urpN mc-4.8.20/src/vfs/extfs/helpers/lslR.in mc-4.8.21/src/vfs/extfs/helpers/lslR.in
--- mc-4.8.20/src/vfs/extfs/helpers/lslR.in	2017-03-04 18:26:20.000000000 +0100
+++ mc-4.8.21/src/vfs/extfs/helpers/lslR.in	2018-05-27 21:56:21.000000000 +0200
@@ -16,6 +16,7 @@ case "$1" in
   *.lz4) MYCAT="lz4 -dc";;
   *.lzma) MYCAT="lzma -dc";;
   *.xz)  MYCAT="xz -dc";;
+  *.zst) MYCAT="zstd -dc";;
   *.bz2) MYCAT="bzip2 -dc";;
   *.gz)  MYCAT="gzip -dc";;
   *.z)   MYCAT="gzip -dc";;
diff -urpN mc-4.8.20/src/vfs/extfs/helpers/mailfs.in mc-4.8.21/src/vfs/extfs/helpers/mailfs.in
--- mc-4.8.20/src/vfs/extfs/helpers/mailfs.in	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/src/vfs/extfs/helpers/mailfs.in	2018-05-27 21:56:21.000000000 +0200
@@ -11,6 +11,7 @@ $lzipcat="lzip -dc";          # unlzip t
 $lz4cat="lz4 -dc";            # unlz4 to stdout
 $lzcat="lzma -dc";            # unlzma to stdout
 $xzcat="xz -dc";              # unxz to stdout
+$zstdcat="zstd -dc";          # unzstd to stdout
 $file="file";                 # "file" command
 $TZ='GMT';                    # default timezone (for Date module)
 
@@ -194,6 +195,8 @@ if (/gzip/) {
     exit 1 unless (open IN, "$lzcat $mbox_qname|");
 } elsif (/xz/) {
     exit 1 unless (open IN, "$xzcat $mbox_qname|");
+} elsif (/zst/) {
+    exit 1 unless (open IN, "$zstdcat $mbox_qname|");
 } else {
     exit 1 unless (open IN, "<$mbox_name");
 }
diff -urpN mc-4.8.20/src/vfs/extfs/helpers/patchfs.in mc-4.8.21/src/vfs/extfs/helpers/patchfs.in
--- mc-4.8.20/src/vfs/extfs/helpers/patchfs.in	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/src/vfs/extfs/helpers/patchfs.in	2018-05-27 21:56:21.000000000 +0200
@@ -17,6 +17,7 @@ my $lzip = 'lzip';
 my $lz4  = 'lz4';
 my $lzma = 'lzma';
 my $xz   = 'xz';
+my $zstd = 'zstd';
 my $bzip = 'bzip2';
 my $gzip = 'gzip';
 my $fileutil = 'file -b';
@@ -88,6 +89,8 @@ sub myin
 	return "$lzma -dc $qfname";
     } elsif (/^'*xz/) {
 	return "$xz -dc $qfname";
+    } elsif (/^'*zst/) {
+	return "$zstd -dc $qfname";
     } elsif (/^'*bzip/) {
 	return "$bzip -dc $qfname";
     } elsif (/^'*gzip/) {
@@ -112,6 +115,8 @@ sub myout
 	return "$lzma -c $sep $qfname";
     } elsif (/^'*xz/) {
 	return "$xz -c $sep $qfname";
+    } elsif (/^'*zst/) {
+	return "$zstd -c $sep $qfname";
     } elsif (/^'*bzip/) {
 	return "$bzip -c $sep $qfname";
     } elsif (/^'*gzip/) {
diff -urpN mc-4.8.20/src/vfs/extfs/helpers/rpm mc-4.8.21/src/vfs/extfs/helpers/rpm
--- mc-4.8.20/src/vfs/extfs/helpers/rpm	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/src/vfs/extfs/helpers/rpm	2018-05-27 21:56:21.000000000 +0200
@@ -76,11 +76,6 @@ rpm_filename=$1; shift
 
 FILEPREF="-r--r--r--   1 root     root    "
 
-mcrpmfs_getSupportedTags()
-{
-    rpm --querytags
-}
-
 mcrpmfs_getDesription()
 {
     $RPM -qip "${rpm_filename}"
@@ -88,13 +83,6 @@ mcrpmfs_getDesription()
 
 mcrpmfs_getAllNeededTags()
 {
-    supportedTags=`mcrpmfs_getSupportedTags`
-    if test "`echo supportedTags | grep -c CONFLICTS`" -eq 1; then
-	tag_CONFLICTS="|CONFLICTS=%{CONFLICTS}"
-    else
-	tag_CONFLICTS=""
-    fi
-
     $RPM_QUERY_FMT \
 "|NAME=%{NAME}"\
 "|VERSION=%{VERSION}"\
@@ -109,7 +97,7 @@ mcrpmfs_getAllNeededTags()
 "|REQUIRES=%{REQUIRENAME} %{REQUIREFLAGS:depflags} %{REQUIREVERSION}"\
 "|OBSOLETES=%{OBSOLETES}"\
 "|PROVIDES=%{PROVIDES} %{PROVIDEFLAGS:depflags} %{PROVIDEVERSION}"\
-${tag_CONFLICTS}\
+"|CONFLICTS=%{CONFLICTS}"\
 "|PACKAGER=%{PACKAGER}" \
     "${rpm_filename}" \
     | tr '\n' ' '  # The newlines in DESCRIPTION mess with the sed script in mcrpmfs_getOneTag().
@@ -228,13 +216,13 @@ mcrpmfs_list ()
 
     HEADERSIZE=`printf '%s\n' "$DESC" | wc -c`  # 'echo' can't be used for arbitrary data (see commit message).
     printf '%s %s %s HEADER\n' "${FILEPREF}"  "${HEADERSIZE}" "${DATE}"
-    echo "-r-xr-xr-x   1 root     root    39 $DATE INSTALL"
+    echo "-r-xr-xr-x   1 root     root    0 $DATE INSTALL"
     case "${rpm_filename}" in
 	*.src.rpm)
-	    echo "-r-xr-xr-x   1 root     root    39 $DATE REBUILD"
+	    echo "-r-xr-xr-x   1 root     root    0 $DATE REBUILD"
 	;;
 	*)
-	    echo "-r-xr-xr-x   1 root     root    39 $DATE UPGRADE"
+	    echo "-r-xr-xr-x   1 root     root    0 $DATE UPGRADE"
 	;;
     esac
 
@@ -266,18 +254,15 @@ mcrpmfs_copyout ()
     case "$1" in
 	HEADER) mcrpmfs_getDesription > "$2"; exit 0;;
 	INSTALL)
-	    echo "# Run this script to install this RPM package" > "$2"
-	    echo $RPM -ivh "${rpm_filename}" >> "$2"
+	    echo "# Run this to install this RPM package" > "$2"
 	    exit 0
 	;;
 	UPGRADE)
 	    echo "# Run this to upgrade this RPM package" > "$2"
-	    echo $RPM -Uvh "${rpm_filename}" >> "$2"
 	    exit 0
 	;;
 	REBUILD)
 	    echo "# Run this to rebuild this RPM package" > "$2"
-	    echo $RPMBUILD --rebuild "${rpm_filename}" >> "$2"
 	    exit 0
 	;;
 	ERROR) mcrpmfs_getDesription > /dev/null 2> "$2"; exit 0;;
diff -urpN mc-4.8.20/src/vfs/extfs/helpers/sfs.ini mc-4.8.21/src/vfs/extfs/helpers/sfs.ini
--- mc-4.8.20/src/vfs/extfs/helpers/sfs.ini	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/src/vfs/extfs/helpers/sfs.ini	2018-05-27 21:56:21.000000000 +0200
@@ -18,6 +18,8 @@ lzma/1	lzma < %1 > %3
 ulzma/1	lzma -d < %1 > %3
 xz/1	xz < %1 > %3
 uxz/1	xz -d < %1 > %3
+zst/1	zstd < %1 > %3
+uzst/1	zstd -d < %1 > %3
 tar/1	tar cf %3 %1
 tgz/1	tar czf %3 %1
 uhtml/1	lynx -force_html -dump %1 > %3
diff -urpN mc-4.8.20/src/vfs/fish/Makefile.in mc-4.8.21/src/vfs/fish/Makefile.in
--- mc-4.8.20/src/vfs/fish/Makefile.in	2017-11-25 19:33:53.000000000 +0100
+++ mc-4.8.21/src/vfs/fish/Makefile.in	2018-06-03 10:57:33.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/fish/fish.c mc-4.8.21/src/vfs/fish/fish.c
--- mc-4.8.20/src/vfs/fish/fish.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/vfs/fish/fish.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Virtual File System: FISH implementation for transfering files over
    shell connections.
 
-   Copyright (C) 1998-2017
+   Copyright (C) 1998-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -262,30 +262,26 @@ fish_get_reply (struct vfs_class *me, in
 /* --------------------------------------------------------------------------------------------- */
 
 static int
-G_GNUC_PRINTF (4, 5)
-fish_command (struct vfs_class *me, struct vfs_s_super *super, int wait_reply, const char *fmt, ...)
+fish_command (struct vfs_class *me, struct vfs_s_super *super, int wait_reply, const char *cmd,
+              size_t cmd_len)
 {
-    va_list ap;
-    char *str;
     ssize_t status;
     FILE *logfile = MEDATA->logfile;
 
-    va_start (ap, fmt);
-    str = g_strdup_vprintf (fmt, ap);
-    va_end (ap);
+    if (cmd_len == (size_t) (-1))
+        cmd_len = strlen (cmd);
 
     if (logfile != NULL)
     {
         size_t ret;
 
-        ret = fwrite (str, strlen (str), 1, logfile);
+        ret = fwrite (cmd, cmd_len, 1, logfile);
         ret = fflush (logfile);
         (void) ret;
     }
 
     tty_enable_interrupt_key ();
-    status = write (SUP->sockw, str, strlen (str));
-    g_free (str);
+    status = write (SUP->sockw, cmd, cmd_len);
     tty_disable_interrupt_key ();
 
     if (status < 0)
@@ -293,20 +289,79 @@ fish_command (struct vfs_class *me, stru
 
     if (wait_reply)
         return fish_get_reply (me, SUP->sockr,
-                               (wait_reply & WANT_STRING) ? reply_str :
+                               (wait_reply & WANT_STRING) != 0 ? reply_str :
                                NULL, sizeof (reply_str) - 1);
     return COMPLETE;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 
+static int
+G_GNUC_PRINTF (5, 0)
+fish_command_va (struct vfs_class *me, struct vfs_s_super *super, int wait_reply, const char *scr,
+                 const char *vars, va_list ap)
+{
+    int r;
+    GString *command;
+
+    command = g_string_new (SUP->scr_env);
+    g_string_append_vprintf (command, vars, ap);
+    g_string_append (command, scr);
+    r = fish_command (me, super, wait_reply, command->str, command->len);
+    g_string_free (command, TRUE);
+
+    return r;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static int
+G_GNUC_PRINTF (5, 6)
+fish_command_v (struct vfs_class *me, struct vfs_s_super *super, int wait_reply, const char *scr,
+                const char *vars, ...)
+{
+    int r;
+    va_list ap;
+
+    va_start (ap, vars);
+    r = fish_command_va (me, super, wait_reply, scr, vars, ap);
+    va_end (ap);
+
+    return r;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static int
+G_GNUC_PRINTF (5, 6)
+fish_send_command (struct vfs_class *me, struct vfs_s_super *super, int flags, const char *scr,
+                   const char *vars, ...)
+{
+    int r;
+    va_list ap;
+
+    va_start (ap, vars);
+    r = fish_command_va (me, super, WAIT_REPLY, scr, vars, ap);
+    va_end (ap);
+    vfs_stamp_create (&vfs_fish_ops, super);
+
+    if (r != COMPLETE)
+        ERRNOR (E_REMOTE, -1);
+    if ((flags & OPT_FLUSH) != 0)
+        vfs_s_invalidate (me, super);
+
+    return 0;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
 static void
 fish_free_archive (struct vfs_class *me, struct vfs_s_super *super)
 {
     if ((SUP->sockw != -1) || (SUP->sockr != -1))
     {
         vfs_print_message (_("fish: Disconnecting from %s"), super->name ? super->name : "???");
-        fish_command (me, super, NONE, "%s", "#BYE\nexit\n");
+        fish_command (me, super, NONE, "#BYE\nexit\n", -1);
         close (SUP->sockw);
         close (SUP->sockr);
         SUP->sockw = SUP->sockr = -1;
@@ -409,7 +464,7 @@ fish_set_env (int flags)
 static gboolean
 fish_info (struct vfs_class *me, struct vfs_s_super *super)
 {
-    if (fish_command (me, super, NONE, "%s", SUP->scr_info) == COMPLETE)
+    if (fish_command (me, super, NONE, SUP->scr_info, -1) == COMPLETE)
     {
         while (TRUE)
         {
@@ -551,18 +606,19 @@ fish_open_archive_int (struct vfs_class
      */
 
     if (fish_command
-        (me, super, WAIT_REPLY, "%s",
-         "#FISH\necho; start_fish_server 2>&1; echo '### 200'\n") != COMPLETE)
+        (me, super, WAIT_REPLY, "#FISH\necho; start_fish_server 2>&1; echo '### 200'\n",
+         -1) != COMPLETE)
         ERRNOR (E_PROTO, -1);
 
     vfs_print_message ("%s", _("fish: Handshaking version..."));
-    if (fish_command (me, super, WAIT_REPLY, "%s", "#VER 0.0.3\necho '### 000'\n") != COMPLETE)
+    if (fish_command (me, super, WAIT_REPLY, "#VER 0.0.3\necho '### 000'\n", -1) != COMPLETE)
         ERRNOR (E_PROTO, -1);
 
     /* Set up remote locale to C, otherwise dates cannot be recognized */
     if (fish_command
-        (me, super, WAIT_REPLY, "%s",
-         "LANG=C LC_ALL=C LC_TIME=C; export LANG LC_ALL LC_TIME;\n" "echo '### 200'\n") != COMPLETE)
+        (me, super, WAIT_REPLY,
+         "LANG=C LC_ALL=C LC_TIME=C; export LANG LC_ALL LC_TIME;\n" "echo '### 200'\n",
+         -1) != COMPLETE)
         ERRNOR (E_PROTO, -1);
 
     vfs_print_message ("%s", _("fish: Getting host info..."));
@@ -678,7 +734,6 @@ fish_dir_load (struct vfs_class *me, str
     FILE *logfile;
     char *quoted_path;
     int reply_code;
-    gchar *shell_commands;
 
     /*
      * Simple FISH debug interface :]
@@ -693,11 +748,11 @@ fish_dir_load (struct vfs_class *me, str
 
     gettimeofday (&dir->timestamp, NULL);
     dir->timestamp.tv_sec += fish_directory_timeout;
+
     quoted_path = strutils_shell_escape (remote_path);
-    shell_commands = g_strconcat (SUP->scr_env, "FISH_FILENAME=%s;\n", SUP->scr_ls, (char *) NULL);
-    fish_command (me, super, NONE, shell_commands, quoted_path);
-    g_free (shell_commands);
+    (void) fish_command_v (me, super, NONE, SUP->scr_ls, "FISH_FILENAME=%s;\n", quoted_path);
     g_free (quoted_path);
+
     ent = vfs_s_generate_entry (me, NULL, dir, 0);
 
     while (TRUE)
@@ -890,7 +945,6 @@ static int
 fish_file_store (struct vfs_class *me, vfs_file_handler_t * fh, char *name, char *localname)
 {
     fish_fh_data_t *fish = (fish_fh_data_t *) fh->data;
-    gchar *shell_commands = NULL;
     struct vfs_s_super *super = FH_SUPER;
     int code;
     off_t total = 0;
@@ -941,26 +995,9 @@ fish_file_store (struct vfs_class *me, v
     vfs_print_message (_("fish: store %s: sending command..."), quoted_name);
 
     /* FIXME: File size is limited to ULONG_MAX */
-    if (fish->append)
-    {
-        shell_commands =
-            g_strconcat (SUP->scr_env, "FISH_FILENAME=%s FISH_FILESIZE=%" PRIuMAX ";\n",
-                         SUP->scr_append, (char *) NULL);
-
-        code = fish_command (me, super, WAIT_REPLY, shell_commands, quoted_name,
-                             (uintmax_t) s.st_size);
-        g_free (shell_commands);
-    }
-    else
-    {
-        shell_commands =
-            g_strconcat (SUP->scr_env, "FISH_FILENAME=%s FISH_FILESIZE=%" PRIuMAX ";\n",
-                         SUP->scr_send, (char *) NULL);
-        code = fish_command (me, super, WAIT_REPLY, shell_commands, quoted_name,
-                             (uintmax_t) s.st_size);
-        g_free (shell_commands);
-    }
-
+    code = fish_command_v (me, super, WAIT_REPLY, fish->append ? SUP->scr_append : SUP->scr_send,
+                           "FISH_FILENAME=%s FISH_FILESIZE=%" PRIuMAX ";\n", quoted_name,
+                           (uintmax_t) s.st_size);
     g_free (quoted_name);
 
     if (code != PRELIM)
@@ -1017,7 +1054,6 @@ static int
 fish_linear_start (struct vfs_class *me, vfs_file_handler_t * fh, off_t offset)
 {
     fish_fh_data_t *fish;
-    gchar *shell_commands = NULL;
     struct vfs_s_super *super = FH_SUPER;
     char *name;
     char *quoted_name;
@@ -1041,12 +1077,12 @@ fish_linear_start (struct vfs_class *me,
      * standard output (i.e. over the network).
      */
 
-    shell_commands =
-        g_strconcat (SUP->scr_env, "FISH_FILENAME=%s FISH_START_OFFSET=%" PRIuMAX ";\n",
-                     SUP->scr_get, (char *) NULL);
-    offset = fish_command (me, super, WANT_STRING, shell_commands, quoted_name, (uintmax_t) offset);
-    g_free (shell_commands);
+    offset =
+        fish_command_v (me, super, WANT_STRING, SUP->scr_get,
+                        "FISH_FILENAME=%s FISH_START_OFFSET=%" PRIuMAX ";\n", quoted_name,
+                        (uintmax_t) offset);
     g_free (quoted_name);
+
     if (offset != PRELIM)
         ERRNOR (E_REMOTE, 0);
     fh->linear = LS_LINEAR_OPEN;
@@ -1150,7 +1186,7 @@ fish_ctl (void *fh, int ctlop, void *arg
         {
             int v;
 
-            if (FH->linear == 0)
+            if (FH->linear == LS_NOT_LINEAR)
                 vfs_die ("You may not do this");
             if (FH->linear == LS_LINEAR_CLOSED || FH->linear == LS_LINEAR_PREOPEN)
                 return 0;
@@ -1168,30 +1204,13 @@ fish_ctl (void *fh, int ctlop, void *arg
 /* --------------------------------------------------------------------------------------------- */
 
 static int
-fish_send_command (struct vfs_class *me, struct vfs_s_super *super, const char *cmd, int flags)
-{
-    int r;
-
-    r = fish_command (me, super, WAIT_REPLY, "%s", cmd);
-    vfs_stamp_create (&vfs_fish_ops, super);
-    if (r != COMPLETE)
-        ERRNOR (E_REMOTE, -1);
-    if ((flags & OPT_FLUSH) != 0)
-        vfs_s_invalidate (me, super);
-    return 0;
-}
-
-/* --------------------------------------------------------------------------------------------- */
-
-static int
 fish_rename (const vfs_path_t * vpath1, const vfs_path_t * vpath2)
 {
-    gchar *shell_commands = NULL;
-    char buf[BUF_LARGE];
     const char *crpath1, *crpath2;
     char *rpath1, *rpath2;
     struct vfs_s_super *super, *super2;
     const vfs_path_element_t *path_element;
+    int ret;
 
     path_element = vfs_path_get_by_index (vpath1, -1);
 
@@ -1205,13 +1224,15 @@ fish_rename (const vfs_path_t * vpath1,
 
     rpath1 = strutils_shell_escape (crpath1);
     rpath2 = strutils_shell_escape (crpath2);
-    shell_commands = g_strconcat (SUP->scr_env, "FISH_FILEFROM=%s FISH_FILETO=%s;\n",
-                                  SUP->scr_mv, (char *) NULL);
-    g_snprintf (buf, sizeof (buf), shell_commands, rpath1, rpath2);
-    g_free (shell_commands);
+
+    ret =
+        fish_send_command (path_element->class, super2, OPT_FLUSH, SUP->scr_mv,
+                           "FISH_FILEFROM=%s FISH_FILETO=%s;\n", rpath1, rpath2);
+
     g_free (rpath1);
     g_free (rpath2);
-    return fish_send_command (path_element->class, super2, buf, OPT_FLUSH);
+
+    return ret;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1219,12 +1240,11 @@ fish_rename (const vfs_path_t * vpath1,
 static int
 fish_link (const vfs_path_t * vpath1, const vfs_path_t * vpath2)
 {
-    gchar *shell_commands = NULL;
-    char buf[BUF_LARGE];
     const char *crpath1, *crpath2;
     char *rpath1, *rpath2;
     struct vfs_s_super *super, *super2;
     const vfs_path_element_t *path_element;
+    int ret;
 
     path_element = vfs_path_get_by_index (vpath1, -1);
 
@@ -1238,15 +1258,16 @@ fish_link (const vfs_path_t * vpath1, co
 
     rpath1 = strutils_shell_escape (crpath1);
     rpath2 = strutils_shell_escape (crpath2);
-    shell_commands = g_strconcat (SUP->scr_env, "FISH_FILEFROM=%s FISH_FILETO=%s;\n",
-                                  SUP->scr_hardlink, (char *) NULL);
-    g_snprintf (buf, sizeof (buf), shell_commands, rpath1, rpath2);
-    g_free (shell_commands);
+
+    ret =
+        fish_send_command (path_element->class, super2, OPT_FLUSH, SUP->scr_hardlink,
+                           "FISH_FILEFROM=%s FISH_FILETO=%s;\n", rpath1, rpath2);
+
     g_free (rpath1);
     g_free (rpath2);
-    return fish_send_command (path_element->class, super2, buf, OPT_FLUSH);
-}
 
+    return ret;
+}
 
 /* --------------------------------------------------------------------------------------------- */
 
@@ -1254,12 +1275,11 @@ static int
 fish_symlink (const vfs_path_t * vpath1, const vfs_path_t * vpath2)
 {
     char *qsetto;
-    gchar *shell_commands = NULL;
-    char buf[BUF_LARGE];
     const char *crpath;
     char *rpath;
     struct vfs_s_super *super;
     const vfs_path_element_t *path_element;
+    int ret;
 
     path_element = vfs_path_get_by_index (vpath2, -1);
 
@@ -1270,13 +1290,14 @@ fish_symlink (const vfs_path_t * vpath1,
     rpath = strutils_shell_escape (crpath);
     qsetto = strutils_shell_escape (vfs_path_get_by_index (vpath1, -1)->path);
 
-    shell_commands = g_strconcat (SUP->scr_env, "FISH_FILEFROM=%s FISH_FILETO=%s;\n",
-                                  SUP->scr_ln, (char *) NULL);
-    g_snprintf (buf, sizeof (buf), shell_commands, qsetto, rpath);
-    g_free (shell_commands);
+    ret =
+        fish_send_command (path_element->class, super, OPT_FLUSH, SUP->scr_ln,
+                           "FISH_FILEFROM=%s FISH_FILETO=%s;\n", qsetto, rpath);
+
     g_free (qsetto);
     g_free (rpath);
-    return fish_send_command (path_element->class, super, buf, OPT_FLUSH);
+
+    return ret;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1320,26 +1341,27 @@ fish_fstat (void *vfs_info, struct stat
 static int
 fish_chmod (const vfs_path_t * vpath, mode_t mode)
 {
-    gchar *shell_commands = NULL;
-    char buf[BUF_LARGE];
     const char *crpath;
     char *rpath;
     struct vfs_s_super *super;
     const vfs_path_element_t *path_element;
+    int ret;
 
     path_element = vfs_path_get_by_index (vpath, -1);
 
     crpath = vfs_s_get_path (vpath, &super, 0);
     if (crpath == NULL)
         return -1;
+
     rpath = strutils_shell_escape (crpath);
 
-    shell_commands = g_strconcat (SUP->scr_env, "FISH_FILENAME=%s FISH_FILEMODE=%4.4o;\n",
-                                  SUP->scr_chmod, (char *) NULL);
-    g_snprintf (buf, sizeof (buf), shell_commands, rpath, (int) (mode & 07777));
-    g_free (shell_commands);
+    ret =
+        fish_send_command (path_element->class, super, OPT_FLUSH, SUP->scr_chmod,
+                           "FISH_FILENAME=%s FISH_FILEMODE=%4.4o;\n", rpath, (int) (mode & 07777));
+
     g_free (rpath);
-    return fish_send_command (path_element->class, super, buf, OPT_FLUSH);
+
+    return ret;;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1350,6 +1372,11 @@ fish_chown (const vfs_path_t * vpath, ui
     char *sowner, *sgroup;
     struct passwd *pw;
     struct group *gr;
+    const char *crpath;
+    char *rpath;
+    struct vfs_s_super *super;
+    const vfs_path_element_t *path_element;
+    int ret;
 
     pw = getpwuid (owner);
     if (pw == NULL)
@@ -1362,32 +1389,23 @@ fish_chown (const vfs_path_t * vpath, ui
     sowner = pw->pw_name;
     sgroup = gr->gr_name;
 
-    {
-        gchar *shell_commands = NULL;
-        char buf[BUF_LARGE];
-        const char *crpath;
-        char *rpath;
-        struct vfs_s_super *super;
-        const vfs_path_element_t *path_element;
-
-        path_element = vfs_path_get_by_index (vpath, -1);
-
-        crpath = vfs_s_get_path (vpath, &super, 0);
-        if (crpath == NULL)
-            return -1;
-        rpath = strutils_shell_escape (crpath);
-
-        shell_commands = g_strconcat (SUP->scr_env,
-                                      "FISH_FILENAME=%s FISH_FILEOWNER=%s FISH_FILEGROUP=%s;\n",
-                                      SUP->scr_chown, (char *) NULL);
-        g_snprintf (buf, sizeof (buf), shell_commands, rpath, sowner, sgroup);
-        g_free (shell_commands);
-        fish_send_command (path_element->class, super, buf, OPT_FLUSH);
-        /* FIXME: what should we report if chgrp succeeds but chown fails? */
-        /* fish_send_command(me, super, buf, OPT_FLUSH); */
-        g_free (rpath);
-        return fish_send_command (path_element->class, super, buf, OPT_FLUSH);
-    }
+    path_element = vfs_path_get_by_index (vpath, -1);
+
+    crpath = vfs_s_get_path (vpath, &super, 0);
+    if (crpath == NULL)
+        return -1;
+
+    rpath = strutils_shell_escape (crpath);
+
+    /* FIXME: what should we report if chgrp succeeds but chown fails? */
+    ret =
+        fish_send_command (path_element->class, super, OPT_FLUSH, SUP->scr_chown,
+                           "FISH_FILENAME=%s FISH_FILEOWNER=%s FISH_FILEGROUP=%s;\n", rpath, sowner,
+                           sgroup);
+
+    g_free (rpath);
+
+    return ret;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1423,13 +1441,11 @@ fish_get_mtime (mc_timesbuf_t * times, t
 static int
 fish_utime (const vfs_path_t * vpath, mc_timesbuf_t * times)
 {
-    gchar *shell_commands = NULL;
     char utcatime[16], utcmtime[16];
     char utcatime_w_nsec[30], utcmtime_w_nsec[30];
     time_t atime, mtime;
     long atime_nsec, mtime_nsec;
     struct tm *gmt;
-    char *cmd;
     const char *crpath;
     char *rpath;
     struct vfs_s_super *super;
@@ -1441,6 +1457,7 @@ fish_utime (const vfs_path_t * vpath, mc
     crpath = vfs_s_get_path (vpath, &super, 0);
     if (crpath == NULL)
         return -1;
+
     rpath = strutils_shell_escape (crpath);
 
     fish_get_atime (times, &atime, &atime_nsec);
@@ -1461,18 +1478,13 @@ fish_utime (const vfs_path_t * vpath, mc
                 gmt->tm_year + 1900, gmt->tm_mon + 1, gmt->tm_mday,
                 gmt->tm_hour, gmt->tm_min, gmt->tm_sec, mtime_nsec);
 
-    shell_commands =
-        g_strconcat (SUP->scr_env, "FISH_FILENAME=%s FISH_FILEATIME=%ld FISH_FILEMTIME=%ld ",
-                     "FISH_TOUCHATIME=%s FISH_TOUCHMTIME=%s ",
-                     "FISH_TOUCHATIME_W_NSEC=\"%s\" FISH_TOUCHMTIME_W_NSEC=\"%s\";\n",
-                     SUP->scr_utime, (char *) NULL);
-    cmd =
-        g_strdup_printf (shell_commands, rpath, (long) atime, (long) mtime, utcatime, utcmtime,
-                         utcatime_w_nsec, utcmtime_w_nsec);
-    g_free (shell_commands);
+    ret = fish_send_command (path_element->class, super, OPT_FLUSH, SUP->scr_utime,
+                             "FISH_FILENAME=%s FISH_FILEATIME=%ld FISH_FILEMTIME=%ld "
+                             "FISH_TOUCHATIME=%s FISH_TOUCHMTIME=%s FISH_TOUCHATIME_W_NSEC=\"%s\" "
+                             "FISH_TOUCHMTIME_W_NSEC=\"%s\";\n", rpath, (long) atime, (long) mtime,
+                             utcatime, utcmtime, utcatime_w_nsec, utcmtime_w_nsec);
+
     g_free (rpath);
-    ret = fish_send_command (path_element->class, super, cmd, OPT_FLUSH);
-    g_free (cmd);
 
     return ret;
 }
@@ -1482,26 +1494,27 @@ fish_utime (const vfs_path_t * vpath, mc
 static int
 fish_unlink (const vfs_path_t * vpath)
 {
-    gchar *shell_commands = NULL;
-    char buf[BUF_LARGE];
     const char *crpath;
     char *rpath;
     struct vfs_s_super *super;
     const vfs_path_element_t *path_element;
+    int ret;
 
     path_element = vfs_path_get_by_index (vpath, -1);
 
     crpath = vfs_s_get_path (vpath, &super, 0);
     if (crpath == NULL)
         return -1;
+
     rpath = strutils_shell_escape (crpath);
 
-    shell_commands =
-        g_strconcat (SUP->scr_env, "FISH_FILENAME=%s;\n", SUP->scr_unlink, (char *) NULL);
-    g_snprintf (buf, sizeof (buf), shell_commands, rpath);
-    g_free (shell_commands);
+    ret =
+        fish_send_command (path_element->class, super, OPT_FLUSH, SUP->scr_unlink,
+                           "FISH_FILENAME=%s;\n", rpath);
+
     g_free (rpath);
-    return fish_send_command (path_element->class, super, buf, OPT_FLUSH);
+
+    return ret;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1509,27 +1522,27 @@ fish_unlink (const vfs_path_t * vpath)
 static int
 fish_exists (const vfs_path_t * vpath)
 {
-    gchar *shell_commands = NULL;
-    char buf[BUF_LARGE];
     const char *crpath;
     char *rpath;
     struct vfs_s_super *super;
     const vfs_path_element_t *path_element;
+    int ret;
 
     path_element = vfs_path_get_by_index (vpath, -1);
 
     crpath = vfs_s_get_path (vpath, &super, 0);
     if (crpath == NULL)
         return -1;
+
     rpath = strutils_shell_escape (crpath);
 
-    shell_commands =
-        g_strconcat (SUP->scr_env, "FISH_FILENAME=%s;\n", SUP->scr_exists, (char *) NULL);
-    g_snprintf (buf, sizeof (buf), shell_commands, rpath);
-    g_free (shell_commands);
+    ret =
+        fish_send_command (path_element->class, super, OPT_FLUSH, SUP->scr_exists,
+                           "FISH_FILENAME=%s;\n", rpath);
+
     g_free (rpath);
 
-    return (fish_send_command (path_element->class, super, buf, OPT_FLUSH) == 0) ? 1 : 0;
+    return (ret == 0 ? 1 : 0);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -1537,13 +1550,11 @@ fish_exists (const vfs_path_t * vpath)
 static int
 fish_mkdir (const vfs_path_t * vpath, mode_t mode)
 {
-    gchar *shell_commands = NULL;
-    int ret_code;
-    char buf[BUF_LARGE];
     const char *crpath;
     char *rpath;
     struct vfs_s_super *super;
     const vfs_path_element_t *path_element;
+    int ret;
 
     (void) mode;
 
@@ -1552,18 +1563,16 @@ fish_mkdir (const vfs_path_t * vpath, mo
     crpath = vfs_s_get_path (vpath, &super, 0);
     if (crpath == NULL)
         return -1;
-    rpath = strutils_shell_escape (crpath);
 
-    shell_commands =
-        g_strconcat (SUP->scr_env, "FISH_FILENAME=%s;\n", SUP->scr_mkdir, (char *) NULL);
-    g_snprintf (buf, sizeof (buf), shell_commands, rpath);
-    g_free (shell_commands);
+    rpath = strutils_shell_escape (crpath);
 
+    ret =
+        fish_send_command (path_element->class, super, OPT_FLUSH, SUP->scr_mkdir,
+                           "FISH_FILENAME=%s;\n", rpath);
     g_free (rpath);
-    ret_code = fish_send_command (path_element->class, super, buf, OPT_FLUSH);
 
-    if (ret_code != 0)
-        return ret_code;
+    if (ret != 0)
+        return ret;
 
     if (fish_exists (vpath) == 0)
     {
@@ -1578,26 +1587,27 @@ fish_mkdir (const vfs_path_t * vpath, mo
 static int
 fish_rmdir (const vfs_path_t * vpath)
 {
-    gchar *shell_commands = NULL;
-    char buf[BUF_LARGE];
     const char *crpath;
     char *rpath;
     struct vfs_s_super *super;
     const vfs_path_element_t *path_element;
+    int ret;
 
     path_element = vfs_path_get_by_index (vpath, -1);
 
     crpath = vfs_s_get_path (vpath, &super, 0);
     if (crpath == NULL)
         return -1;
+
     rpath = strutils_shell_escape (crpath);
 
-    shell_commands =
-        g_strconcat (SUP->scr_env, "FISH_FILENAME=%s;\n", SUP->scr_rmdir, (char *) NULL);
-    g_snprintf (buf, sizeof (buf), shell_commands, rpath);
-    g_free (shell_commands);
+    ret =
+        fish_send_command (path_element->class, super, OPT_FLUSH, SUP->scr_rmdir,
+                           "FISH_FILENAME=%s;\n", rpath);
+
     g_free (rpath);
-    return fish_send_command (path_element->class, super, buf, OPT_FLUSH);
+
+    return ret;
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.20/src/vfs/fish/helpers/Makefile.in mc-4.8.21/src/vfs/fish/helpers/Makefile.in
--- mc-4.8.20/src/vfs/fish/helpers/Makefile.in	2017-11-25 19:33:53.000000000 +0100
+++ mc-4.8.21/src/vfs/fish/helpers/Makefile.in	2018-06-03 10:57:33.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/fish/helpers/ls mc-4.8.21/src/vfs/fish/helpers/ls
--- mc-4.8.20/src/vfs/fish/helpers/ls	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/src/vfs/fish/helpers/ls	2018-05-27 21:56:21.000000000 +0200
@@ -130,20 +130,20 @@ my $dirname = $ARGV[0];
 if (opendir (DIR, $dirname)) {
 while((my $filename = readdir (DIR))){
     my ($dev,$ino,$mode,$nlink,$uid,$gid,$rdev,$size,$atime,$mtime,$ctime,$blksize,$blocks) = lstat("$dirname/$filename");
-    my $mloctime= strftime("%%m-%%d-%%Y %%H:%%M", localtime $mtime);
+    my $mloctime= strftime("%m-%d-%Y %H:%M", localtime $mtime);
     my $strutils_shell_escape_regex = s/([;<>\*\|`&\$!#\(\)\[\]\{\}:'\''"\ \\])/\\$1/g;
     my $e_filename = $filename;
     $e_filename =~ $strutils_shell_escape_regex;
     if (S_ISLNK ($mode)) {
         my $linkname = readlink ("$dirname/$filename");
         $linkname =~ $strutils_shell_escape_regex;
-        printf("R%%o %%o $uid.$gid\nS$size\nd$mloctime\n:\"%%s\" -> \"%%s\"\n\n", S_IMODE($mode), S_IFMT($mode), $e_filename, $linkname);
+        printf("R%o %o $uid.$gid\nS$size\nd$mloctime\n:\"%s\" -> \"%s\"\n\n", S_IMODE($mode), S_IFMT($mode), $e_filename, $linkname);
     } elsif (S_ISCHR ($mode) || S_ISBLK ($mode)) {
-        my $minor = $rdev %% 256;
+        my $minor = $rdev % 256;
         my $major = int( $rdev / 256 );
-        printf("R%%o %%o $uid.$gid\nE$major,$minor\nd$mloctime\n:\"%%s\"\n\n", S_IMODE($mode), S_IFMT($mode), $e_filename);
+        printf("R%o %o $uid.$gid\nE$major,$minor\nd$mloctime\n:\"%s\"\n\n", S_IMODE($mode), S_IFMT($mode), $e_filename);
     } else {
-        printf("R%%o %%o $uid.$gid\nS$size\nd$mloctime\n:\"%%s\"\n\n", S_IMODE($mode), S_IFMT($mode), $e_filename);
+        printf("R%o %o $uid.$gid\nS$size\nd$mloctime\n:\"%s\"\n\n", S_IMODE($mode), S_IFMT($mode), $e_filename);
     }
 }
     printf("### 200\n");
diff -urpN mc-4.8.20/src/vfs/ftpfs/Makefile.in mc-4.8.21/src/vfs/ftpfs/Makefile.in
--- mc-4.8.20/src/vfs/ftpfs/Makefile.in	2017-11-25 19:33:53.000000000 +0100
+++ mc-4.8.21/src/vfs/ftpfs/Makefile.in	2018-06-03 10:57:33.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/ftpfs/ftpfs.c mc-4.8.21/src/vfs/ftpfs/ftpfs.c
--- mc-4.8.20/src/vfs/ftpfs/ftpfs.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/vfs/ftpfs/ftpfs.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Virtual File System: FTP file system.
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -96,6 +96,7 @@ What to do with this?
 
 #include "lib/global.h"
 #include "lib/util.h"
+#include "lib/strutil.h"        /* str_move() */
 #include "lib/mcconfig.h"
 
 #include "lib/tty/tty.h"        /* enable/disable interrupt key */
@@ -327,7 +328,7 @@ ftpfs_translate_path (struct vfs_class *
         /* replace first occurrence of ":/" with ":" */
         p = strchr (ret, ':');
         if (p != NULL && IS_PATH_SEP (p[1]))
-            memmove (p + 1, p + 2, strlen (p + 2) + 1);
+            str_move (p + 1, p + 2);
 
         /* strip trailing "/." */
         p = strrchr (ret, PATH_SEP);
@@ -477,30 +478,26 @@ ftpfs_command (struct vfs_class *me, str
                ...)
 {
     va_list ap;
-    char *cmdstr;
-    int status, cmdlen;
+    GString *cmdstr;
+    int status;
     static int retry = 0;
     static int level = 0;       /* ftpfs_login_server() use ftpfs_command() */
 
+    cmdstr = g_string_sized_new (32);
     va_start (ap, fmt);
-    cmdstr = g_strdup_vprintf (fmt, ap);
+    g_string_vprintf (cmdstr, fmt, ap);
     va_end (ap);
+    g_string_append (cmdstr, "\r\n");
 
-    cmdlen = strlen (cmdstr);
-    cmdstr = g_realloc (cmdstr, cmdlen + 3);
-    strcpy (cmdstr + cmdlen, "\r\n");
-    cmdlen += 2;
-
-    if (MEDATA->logfile)
+    if (MEDATA->logfile != NULL)
     {
-        if (strncmp (cmdstr, "PASS ", 5) == 0)
-        {
+        if (strncmp (cmdstr->str, "PASS ", 5) == 0)
             fputs ("PASS <Password not logged>\r\n", MEDATA->logfile);
-        }
         else
         {
             size_t ret;
-            ret = fwrite (cmdstr, cmdlen, 1, MEDATA->logfile);
+
+            ret = fwrite (cmdstr->str, cmdstr->len, 1, MEDATA->logfile);
             (void) ret;
         }
 
@@ -509,7 +506,7 @@ ftpfs_command (struct vfs_class *me, str
 
     got_sigpipe = 0;
     tty_enable_interrupt_key ();
-    status = write (SUP->sock, cmdstr, cmdlen);
+    status = write (SUP->sock, cmdstr->str, cmdstr->len);
 
     if (status < 0)
     {
@@ -522,15 +519,13 @@ ftpfs_command (struct vfs_class *me, str
                 level = 1;
                 status = ftpfs_reconnect (me, super);
                 level = 0;
-                if (status && (write (SUP->sock, cmdstr, cmdlen) > 0))
-                {
+                if (status && (write (SUP->sock, cmdstr->str, cmdstr->len) > 0))
                     goto ok;
-                }
 
             }
             got_sigpipe = 1;
         }
-        g_free (cmdstr);
+        g_string_free (cmdstr, TRUE);
         tty_disable_interrupt_key ();
         return TRANSIENT;
     }
@@ -549,16 +544,15 @@ ftpfs_command (struct vfs_class *me, str
             level = 1;
             status = ftpfs_reconnect (me, super);
             level = 0;
-            if (status && (write (SUP->sock, cmdstr, cmdlen) > 0))
-            {
+            if (status && (write (SUP->sock, cmdstr->str, cmdstr->len) > 0))
                 goto ok;
-            }
         }
         retry = 0;
-        g_free (cmdstr);
+        g_string_free (cmdstr, TRUE);
         return status;
     }
-    g_free (cmdstr);
+
+    g_string_free (cmdstr, TRUE);
     return COMPLETE;
 }
 
@@ -570,7 +564,7 @@ ftpfs_free_archive (struct vfs_class *me
     if (SUP->sock != -1)
     {
         vfs_print_message (_("ftpfs: Disconnecting from %s"), super->path_element->host);
-        ftpfs_command (me, super, NONE, "QUIT");
+        ftpfs_command (me, super, NONE, "%s", "QUIT");
         close (SUP->sock);
     }
     g_free (SUP->current_dir);
@@ -687,7 +681,7 @@ ftpfs_login_server (struct vfs_class *me
             }
             if (code != COMPLETE)
                 break;
-            /* fall through */
+            MC_FALLTHROUGH;
 
         case COMPLETE:
             vfs_print_message ("%s", _("ftpfs: logged in"));
@@ -1052,7 +1046,7 @@ ftpfs_get_current_directory (struct vfs_
 {
     char buf[MC_MAXPATHLEN + 1];
 
-    if (ftpfs_command (me, super, NONE, "PWD") == COMPLETE &&
+    if (ftpfs_command (me, super, NONE, "%s", "PWD") == COMPLETE &&
         ftpfs_get_reply (me, SUP->sock, buf, sizeof (buf)) == COMPLETE)
     {
         char *bufp = NULL;
@@ -1104,7 +1098,7 @@ ftpfs_setup_passive_pasv (struct vfs_cla
     char n[6];
     int xa, xb, xc, xd, xe, xf;
 
-    if (ftpfs_command (me, super, WAIT_REPLY | WANT_STRING, "PASV") != COMPLETE)
+    if (ftpfs_command (me, super, WAIT_REPLY | WANT_STRING, "%s", "PASV") != COMPLETE)
         return 0;
 
     /* Parse remote parameters */
@@ -1144,7 +1138,7 @@ ftpfs_setup_passive_epsv (struct vfs_cla
     char *c;
     int port;
 
-    if (ftpfs_command (me, super, WAIT_REPLY | WANT_STRING, "EPSV") != COMPLETE)
+    if (ftpfs_command (me, super, WAIT_REPLY | WANT_STRING, "%s", "EPSV") != COMPLETE)
         return 0;
 
     /* (|||<port>|) */
@@ -1996,7 +1990,7 @@ ftpfs_ctl (void *fh, int ctlop, void *ar
         {
             int v;
 
-            if (!FH->linear)
+            if (FH->linear == LS_NOT_LINEAR)
                 vfs_die ("You may not do this");
             if (FH->linear == LS_LINEAR_CLOSED || FH->linear == LS_LINEAR_PREOPEN)
                 return 0;
diff -urpN mc-4.8.20/src/vfs/local/Makefile.in mc-4.8.21/src/vfs/local/Makefile.in
--- mc-4.8.20/src/vfs/local/Makefile.in	2017-11-25 19:33:53.000000000 +0100
+++ mc-4.8.21/src/vfs/local/Makefile.in	2018-06-03 10:57:33.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/local/local.c mc-4.8.21/src/vfs/local/local.c
--- mc-4.8.20/src/vfs/local/local.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/local/local.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Virtual File System: local file system.
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/plugins_init.c mc-4.8.21/src/vfs/plugins_init.c
--- mc-4.8.20/src/vfs/plugins_init.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/vfs/plugins_init.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Init VFS plugins.
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/vfs/sfs/Makefile.in mc-4.8.21/src/vfs/sfs/Makefile.in
--- mc-4.8.20/src/vfs/sfs/Makefile.in	2017-11-25 19:33:53.000000000 +0100
+++ mc-4.8.21/src/vfs/sfs/Makefile.in	2018-06-03 10:57:34.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/sfs/sfs.c mc-4.8.21/src/vfs/sfs/sfs.c
--- mc-4.8.20/src/vfs/sfs/sfs.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/sfs/sfs.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Single File fileSystem
 
-   Copyright (C) 1998-2017
+   Copyright (C) 1998-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/vfs/sftpfs/Makefile.in mc-4.8.21/src/vfs/sftpfs/Makefile.in
--- mc-4.8.20/src/vfs/sftpfs/Makefile.in	2017-11-25 19:33:53.000000000 +0100
+++ mc-4.8.21/src/vfs/sftpfs/Makefile.in	2018-06-03 10:57:34.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/sftpfs/config_parser.c mc-4.8.21/src/vfs/sftpfs/config_parser.c
--- mc-4.8.20/src/vfs/sftpfs/config_parser.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/sftpfs/config_parser.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /* Virtual File System: SFTP file system.
    The SSH config parser
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/vfs/sftpfs/connection.c mc-4.8.21/src/vfs/sftpfs/connection.c
--- mc-4.8.20/src/vfs/sftpfs/connection.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/sftpfs/connection.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /* Virtual File System: SFTP file system.
    The internal functions: connections
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/vfs/sftpfs/dir.c mc-4.8.21/src/vfs/sftpfs/dir.c
--- mc-4.8.20/src/vfs/sftpfs/dir.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/sftpfs/dir.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /* Virtual File System: SFTP file system.
    The internal functions: dirs
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -95,14 +95,8 @@ sftpfs_opendir (const vfs_path_t * vpath
             break;
 
         libssh_errno = libssh2_session_last_errno (super_data->session);
-        if (libssh_errno != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, libssh_errno, mcerror);
+        if (!sftpfs_waitsocket (super_data, libssh_errno, mcerror))
             return NULL;
-        }
-        sftpfs_waitsocket (super_data, mcerror);
-
-        mc_return_val_if_error (mcerror, NULL);
     }
 
     sftpfs_dir = g_new0 (sftpfs_dir_data_t, 1);
@@ -138,14 +132,8 @@ sftpfs_readdir (void *data, GError ** mc
         if (rc >= 0)
             break;
 
-        if (rc != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (sftpfs_dir->super_data, rc, mcerror);
+        if (!sftpfs_waitsocket (sftpfs_dir->super_data, rc, mcerror))
             return NULL;
-        }
-
-        sftpfs_waitsocket (sftpfs_dir->super_data, mcerror);
-        mc_return_val_if_error (mcerror, NULL);
     }
     while (rc == LIBSSH2_ERROR_EAGAIN);
 
@@ -221,14 +209,8 @@ sftpfs_mkdir (const vfs_path_t * vpath,
         if (res >= 0)
             break;
 
-        if (res != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, res, mcerror);
+        if (!sftpfs_waitsocket (super_data, res, mcerror))
             return -1;
-        }
-
-        sftpfs_waitsocket (super_data, mcerror);
-        mc_return_val_if_error (mcerror, -1);
     }
     while (res == LIBSSH2_ERROR_EAGAIN);
 
@@ -277,14 +259,8 @@ sftpfs_rmdir (const vfs_path_t * vpath,
         if (res >= 0)
             break;
 
-        if (res != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, res, mcerror);
+        if (!sftpfs_waitsocket (super_data, res, mcerror))
             return -1;
-        }
-
-        sftpfs_waitsocket (super_data, mcerror);
-        mc_return_val_if_error (mcerror, -1);
     }
     while (res == LIBSSH2_ERROR_EAGAIN);
 
diff -urpN mc-4.8.20/src/vfs/sftpfs/file.c mc-4.8.21/src/vfs/sftpfs/file.c
--- mc-4.8.20/src/vfs/sftpfs/file.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/vfs/sftpfs/file.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /* Virtual File System: SFTP file system.
    The internal functions: files
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -26,6 +26,7 @@
 
 #include <config.h>
 
+#include <errno.h>
 #include <libssh2.h>
 #include <libssh2_sftp.h>
 
@@ -49,6 +50,7 @@ typedef struct
 
 /*** file scope variables ************************************************************************/
 
+/* --------------------------------------------------------------------------------------------- */
 /*** file scope functions ************************************************************************/
 /* --------------------------------------------------------------------------------------------- */
 /**
@@ -75,6 +77,23 @@ sftpfs_reopen (vfs_file_handler_t * file
 }
 
 /* --------------------------------------------------------------------------------------------- */
+
+static int
+sftpfs_file__handle_error (sftpfs_super_data_t * super_data, int sftp_res, GError ** mcerror)
+{
+    if (sftpfs_is_sftp_error (super_data->sftp_session, sftp_res, LIBSSH2_FX_PERMISSION_DENIED))
+        return -EACCES;
+
+    if (sftpfs_is_sftp_error (super_data->sftp_session, sftp_res, LIBSSH2_FX_NO_SUCH_FILE))
+        return -ENOENT;
+
+    if (!sftpfs_waitsocket (super_data, sftp_res, mcerror))
+        return -1;
+
+    return 0;
+}
+
+/* --------------------------------------------------------------------------------------------- */
 /*** public functions ****************************************************************************/
 /* --------------------------------------------------------------------------------------------- */
 /**
@@ -204,46 +223,19 @@ sftpfs_fstat (void *data, struct stat *b
 
     do
     {
+        int err;
+
         res = libssh2_sftp_fstat_ex (sftpfs_fh->handle, &attrs, 0);
         if (res >= 0)
             break;
 
-        if (res != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, res, mcerror);
-            return -1;
-        }
-
-        sftpfs_waitsocket (super_data, mcerror);
-        mc_return_val_if_error (mcerror, -1);
+        err = sftpfs_file__handle_error (super_data, res, mcerror);
+        if (err < 0)
+            return err;
     }
     while (res == LIBSSH2_ERROR_EAGAIN);
 
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_UIDGID) != 0)
-    {
-        buf->st_uid = attrs.uid;
-        buf->st_gid = attrs.gid;
-    }
-
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_ACMODTIME) != 0)
-    {
-        buf->st_atime = attrs.atime;
-        buf->st_mtime = attrs.mtime;
-        buf->st_ctime = attrs.mtime;
-#ifdef HAVE_STRUCT_STAT_ST_MTIM
-        buf->st_atim.tv_nsec = buf->st_mtim.tv_nsec = buf->st_ctim.tv_nsec = 0;
-#endif
-
-    }
-
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_SIZE) != 0)
-    {
-        buf->st_size = attrs.filesize;
-        sftpfs_blksize (buf);
-    }
-
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_PERMISSIONS) != 0)
-        buf->st_mode = attrs.permissions;
+    sftpfs_attr_to_stat (&attrs, buf);
 
     return 0;
 }
@@ -281,18 +273,15 @@ sftpfs_read_file (vfs_file_handler_t * f
 
     do
     {
+        int err;
+
         rc = libssh2_sftp_read (file_handler_data->handle, buffer, count);
         if (rc >= 0)
             break;
 
-        if (rc != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, rc, mcerror);
-            return -1;
-        }
-
-        sftpfs_waitsocket (super_data, mcerror);
-        mc_return_val_if_error (mcerror, -1);
+        err = sftpfs_file__handle_error (super_data, (int) rc, mcerror);
+        if (err < 0)
+            return err;
     }
     while (rc == LIBSSH2_ERROR_EAGAIN);
 
@@ -331,18 +320,15 @@ sftpfs_write_file (vfs_file_handler_t *
 
     do
     {
+        int err;
+
         rc = libssh2_sftp_write (file_handler_data->handle, buffer, count);
         if (rc >= 0)
             break;
 
-        if (rc != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, rc, mcerror);
-            return -1;
-        }
-
-        sftpfs_waitsocket (super_data, mcerror);
-        mc_return_val_if_error (mcerror, -1);
+        err = sftpfs_file__handle_error (super_data, (int) rc, mcerror);
+        if (err < 0)
+            return err;
     }
     while (rc == LIBSSH2_ERROR_EAGAIN);
 
@@ -364,17 +350,18 @@ int
 sftpfs_close_file (vfs_file_handler_t * file_handler, GError ** mcerror)
 {
     sftpfs_file_handler_data_t *file_handler_data;
+    int ret = -1;
 
     mc_return_val_if_error (mcerror, -1);
 
     file_handler_data = (sftpfs_file_handler_data_t *) file_handler->data;
-    if (file_handler_data == NULL)
-        return -1;
-
-    libssh2_sftp_close (file_handler_data->handle);
+    if (file_handler_data != NULL)
+    {
+        ret = libssh2_sftp_close (file_handler_data->handle);
+        g_free (file_handler_data);
+    }
 
-    g_free (file_handler_data);
-    return 0;
+    return ret;
 }
 
 /* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.20/src/vfs/sftpfs/init.c mc-4.8.21/src/vfs/sftpfs/init.c
--- mc-4.8.20/src/vfs/sftpfs/init.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/sftpfs/init.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /* Virtual File System: SFTP file system.
    The interface function
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/vfs/sftpfs/internal.c mc-4.8.21/src/vfs/sftpfs/internal.c
--- mc-4.8.20/src/vfs/sftpfs/internal.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/vfs/sftpfs/internal.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /* Virtual File System: SFTP file system.
    The internal functions
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -42,49 +42,19 @@ GString *sftpfs_filename_buffer = NULL;
 
 /*** file scope variables ************************************************************************/
 
-/*** file scope functions ************************************************************************/
-/* --------------------------------------------------------------------------------------------- */
-
 /* --------------------------------------------------------------------------------------------- */
-/*** public functions ****************************************************************************/
+/*** file scope functions ************************************************************************/
 /* --------------------------------------------------------------------------------------------- */
-/**
- * Convert libssh error to GError object.
- *
- * @param super_data   extra data for SFTP connection
- * @param libssh_errno errno from libssh
- * @param mcerror      pointer to the error object
- */
-
-void
-sftpfs_ssherror_to_gliberror (sftpfs_super_data_t * super_data, int libssh_errno, GError ** mcerror)
-{
-    char *err = NULL;
-    int err_len;
-
-    mc_return_if_error (mcerror);
-
-    libssh2_session_last_error (super_data->session, &err, &err_len, 1);
-    mc_propagate_error (mcerror, libssh_errno, "%s", err);
-    g_free (err);
-}
 
-/* --------------------------------------------------------------------------------------------- */
-/**
- * Fix filename for SFTP operations: add leading slash to file name.
- *
- * @param file_name file name
- * @param length length of returned string
- *
- * @return pointer to string that contains the file name with leading slash
- */
+/* Adjust block size and number of blocks */
 
-const char *
-sftpfs_fix_filename (const char *file_name, unsigned int *length)
+static void
+sftpfs_blksize (struct stat *s)
 {
-    g_string_printf (sftpfs_filename_buffer, "%c%s", PATH_SEP, file_name);
-    *length = sftpfs_filename_buffer->len;
-    return sftpfs_filename_buffer->str;
+#ifdef HAVE_STRUCT_STAT_ST_BLKSIZE
+    s->st_blksize = LIBSSH2_CHANNEL_WINDOW_DEFAULT;     /* FIXME */
+#endif /* HAVE_STRUCT_STAT_ST_BLKSIZE */
+    vfs_adjust_stat (s);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -96,14 +66,14 @@ sftpfs_fix_filename (const char *file_na
  * @return 0 if success, negative value otherwise
  */
 
-int
-sftpfs_waitsocket (sftpfs_super_data_t * super_data, GError ** mcerror)
+static int
+sftpfs_internal_waitsocket (sftpfs_super_data_t * super_data, GError ** mcerror)
 {
     struct timeval timeout = { 10, 0 };
     fd_set fd;
     fd_set *writefd = NULL;
     fd_set *readfd = NULL;
-    int dir;
+    int dir, ret;
 
     mc_return_val_if_error (mcerror, -1);
 
@@ -119,191 +89,239 @@ sftpfs_waitsocket (sftpfs_super_data_t *
     if ((dir & LIBSSH2_SESSION_BLOCK_OUTBOUND) != 0)
         writefd = &fd;
 
-    return select (super_data->socket_handle + 1, readfd, writefd, NULL, &timeout);
-}
-
-/* --------------------------------------------------------------------------------------------- */
+    ret = select (super_data->socket_handle + 1, readfd, writefd, NULL, &timeout);
+    if (ret < 0)
+    {
+        int my_errno = errno;
 
-/* Adjust block size and number of blocks */
+        mc_propagate_error (mcerror, my_errno, _("sftp: socket error: %s"),
+                            unix_error_string (my_errno));
+    }
 
-void
-sftpfs_blksize (struct stat *s)
-{
-#ifdef HAVE_STRUCT_STAT_ST_BLKSIZE
-    s->st_blksize = LIBSSH2_CHANNEL_WINDOW_DEFAULT;     /* FIXME */
-#endif /* HAVE_STRUCT_STAT_ST_BLKSIZE */
-    vfs_adjust_stat (s);
+    return ret;
 }
 
 /* --------------------------------------------------------------------------------------------- */
-/**
- * Getting information about a symbolic link.
- *
- * @param vpath   path to file, directory or symbolic link
- * @param buf     buffer for store stat-info
- * @param mcerror pointer to error object
- * @return 0 if success, negative value otherwise
- */
 
-int
-sftpfs_lstat (const vfs_path_t * vpath, struct stat *buf, GError ** mcerror)
+static gboolean
+sftpfs_op_init (sftpfs_super_data_t ** super_data, const vfs_path_element_t ** path_element,
+                const vfs_path_t * vpath, GError ** mcerror)
 {
-    struct vfs_s_super *super;
-    sftpfs_super_data_t *super_data;
-    LIBSSH2_SFTP_ATTRIBUTES attrs;
-    int res;
-    const vfs_path_element_t *path_element;
+    struct vfs_s_super *super = NULL;
 
-    mc_return_val_if_error (mcerror, -1);
-
-    path_element = vfs_path_get_by_index (vpath, -1);
+    mc_return_val_if_error (mcerror, FALSE);
 
     if (vfs_s_get_path (vpath, &super, 0) == NULL)
-        return -1;
+        return FALSE;
 
     if (super == NULL)
-        return -1;
+        return FALSE;
+
+    *super_data = (sftpfs_super_data_t *) super->data;
 
-    super_data = (sftpfs_super_data_t *) super->data;
-    if (super_data->sftp_session == NULL)
+    if ((*super_data)->sftp_session == NULL)
+        return FALSE;
+
+    *path_element = vfs_path_get_by_index (vpath, -1);
+
+    return TRUE;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+static int
+sftpfs_stat_init (sftpfs_super_data_t ** super_data, const vfs_path_element_t ** path_element,
+                  const vfs_path_t * vpath, GError ** mcerror, int stat_type,
+                  LIBSSH2_SFTP_ATTRIBUTES * attrs)
+{
+    int res;
+
+    if (!sftpfs_op_init (super_data, path_element, vpath, mcerror))
         return -1;
 
     do
     {
         const char *fixfname;
-        unsigned int fixfname_len = 0;
+        unsigned int fixfname_len;
 
-        fixfname = sftpfs_fix_filename (path_element->path, &fixfname_len);
+        fixfname = sftpfs_fix_filename ((*path_element)->path, &fixfname_len);
 
-        res =
-            libssh2_sftp_stat_ex (super_data->sftp_session, fixfname, fixfname_len,
-                                  LIBSSH2_SFTP_LSTAT, &attrs);
+        res = libssh2_sftp_stat_ex ((*super_data)->sftp_session, fixfname, fixfname_len,
+                                    stat_type, attrs);
         if (res >= 0)
             break;
 
-        if (res != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, res, mcerror);
-            return -1;
-        }
+        if (sftpfs_is_sftp_error ((*super_data)->sftp_session, res, LIBSSH2_FX_PERMISSION_DENIED))
+            return -EACCES;
+
+        if (sftpfs_is_sftp_error ((*super_data)->sftp_session, res, LIBSSH2_FX_NO_SUCH_FILE))
+            return -ENOENT;
 
-        sftpfs_waitsocket (super_data, mcerror);
-        mc_return_val_if_error (mcerror, -1);
+        if (!sftpfs_waitsocket (*super_data, res, mcerror))
+            return -1;
     }
     while (res == LIBSSH2_ERROR_EAGAIN);
 
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_UIDGID) != 0)
+    return res;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+/*** public functions ****************************************************************************/
+/* --------------------------------------------------------------------------------------------- */
+
+gboolean
+sftpfs_waitsocket (sftpfs_super_data_t * super_data, int sftp_res, GError ** mcerror)
+{
+    if (sftp_res != LIBSSH2_ERROR_EAGAIN)
     {
-        buf->st_uid = attrs.uid;
-        buf->st_gid = attrs.gid;
+        sftpfs_ssherror_to_gliberror (super_data, sftp_res, mcerror);
+        return FALSE;
     }
 
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_ACMODTIME) != 0)
+    sftpfs_internal_waitsocket (super_data, mcerror);
+
+    return (mcerror == NULL || *mcerror == NULL);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+gboolean
+sftpfs_is_sftp_error (LIBSSH2_SFTP * sftp_session, int sftp_res, int sftp_error)
+{
+    return (sftp_res == LIBSSH2_ERROR_SFTP_PROTOCOL &&
+            libssh2_sftp_last_error (sftp_session) == (unsigned long) sftp_error);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+/**
+ * Convert libssh error to GError object.
+ *
+ * @param super_data   extra data for SFTP connection
+ * @param libssh_errno errno from libssh
+ * @param mcerror      pointer to the error object
+ */
+
+void
+sftpfs_ssherror_to_gliberror (sftpfs_super_data_t * super_data, int libssh_errno, GError ** mcerror)
+{
+    char *err = NULL;
+    int err_len;
+
+    mc_return_if_error (mcerror);
+
+    libssh2_session_last_error (super_data->session, &err, &err_len, 1);
+    if (libssh_errno == LIBSSH2_ERROR_SFTP_PROTOCOL && super_data->sftp_session != NULL)
+        mc_propagate_error (mcerror, libssh_errno, "%s %lu", err,
+                            libssh2_sftp_last_error (super_data->sftp_session));
+    else
+        mc_propagate_error (mcerror, libssh_errno, "%s", err);
+    g_free (err);
+}
+
+/* --------------------------------------------------------------------------------------------- */
+/**
+ * Fix filename for SFTP operations: add leading slash to file name.
+ *
+ * @param file_name file name
+ * @param length length of returned string
+ *
+ * @return pointer to string that contains the file name with leading slash
+ */
+
+const char *
+sftpfs_fix_filename (const char *file_name, unsigned int *length)
+{
+    g_string_printf (sftpfs_filename_buffer, "%c%s", PATH_SEP, file_name);
+    *length = sftpfs_filename_buffer->len;
+    return sftpfs_filename_buffer->str;
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+void
+sftpfs_attr_to_stat (const LIBSSH2_SFTP_ATTRIBUTES * attrs, struct stat *s)
+{
+    if ((attrs->flags & LIBSSH2_SFTP_ATTR_UIDGID) != 0)
+    {
+        s->st_uid = attrs->uid;
+        s->st_gid = attrs->gid;
+    }
+
+    if ((attrs->flags & LIBSSH2_SFTP_ATTR_ACMODTIME) != 0)
     {
-        buf->st_atime = attrs.atime;
-        buf->st_mtime = attrs.mtime;
-        buf->st_ctime = attrs.mtime;
+        s->st_atime = attrs->atime;
+        s->st_mtime = attrs->mtime;
+        s->st_ctime = attrs->mtime;
 #ifdef HAVE_STRUCT_STAT_ST_MTIM
-        buf->st_atim.tv_nsec = buf->st_mtim.tv_nsec = buf->st_ctim.tv_nsec = 0;
+        s->st_atim.tv_nsec = s->st_mtim.tv_nsec = s->st_ctim.tv_nsec = 0;
 #endif
     }
 
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_SIZE) != 0)
+    if ((attrs->flags & LIBSSH2_SFTP_ATTR_SIZE) != 0)
     {
-        buf->st_size = attrs.filesize;
-        sftpfs_blksize (buf);
+        s->st_size = attrs->filesize;
+        sftpfs_blksize (s);
     }
 
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_PERMISSIONS) != 0)
-        buf->st_mode = attrs.permissions;
-
-    return 0;
+    if ((attrs->flags & LIBSSH2_SFTP_ATTR_PERMISSIONS) != 0)
+        s->st_mode = attrs->permissions;
 }
 
 /* --------------------------------------------------------------------------------------------- */
 /**
- * Getting information about a file or directory.
+ * Getting information about a symbolic link.
  *
- * @param vpath   path to file or directory
+ * @param vpath   path to file, directory or symbolic link
  * @param buf     buffer for store stat-info
  * @param mcerror pointer to error object
  * @return 0 if success, negative value otherwise
  */
 
 int
-sftpfs_stat (const vfs_path_t * vpath, struct stat *buf, GError ** mcerror)
+sftpfs_lstat (const vfs_path_t * vpath, struct stat *buf, GError ** mcerror)
 {
-    struct vfs_s_super *super;
-    sftpfs_super_data_t *super_data;
+    sftpfs_super_data_t *super_data = NULL;
+    const vfs_path_element_t *path_element = NULL;
     LIBSSH2_SFTP_ATTRIBUTES attrs;
     int res;
-    const vfs_path_element_t *path_element;
-
-    mc_return_val_if_error (mcerror, -1);
-
-    path_element = vfs_path_get_by_index (vpath, -1);
-
-    if (vfs_s_get_path (vpath, &super, 0) == NULL)
-        return -1;
 
-    if (super == NULL)
-        return -1;
-
-    super_data = (sftpfs_super_data_t *) super->data;
-    if (super_data->sftp_session == NULL)
-        return -1;
-
-    do
+    res = sftpfs_stat_init (&super_data, &path_element, vpath, mcerror, LIBSSH2_SFTP_LSTAT, &attrs);
+    if (res >= 0)
     {
-        const char *fixfname;
-        unsigned int fixfname_len = 0;
-
-        fixfname = sftpfs_fix_filename (path_element->path, &fixfname_len);
-
-        res =
-            libssh2_sftp_stat_ex (super_data->sftp_session, fixfname, fixfname_len,
-                                  LIBSSH2_SFTP_STAT, &attrs);
-        if (res >= 0)
-            break;
-
-        if (res != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, res, mcerror);
-            return -1;
-        }
-
-        sftpfs_waitsocket (super_data, mcerror);
-        mc_return_val_if_error (mcerror, -1);
+        sftpfs_attr_to_stat (&attrs, buf);
+        res = 0;
     }
-    while (res == LIBSSH2_ERROR_EAGAIN);
 
-    buf->st_nlink = 1;
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_UIDGID) != 0)
-    {
-        buf->st_uid = attrs.uid;
-        buf->st_gid = attrs.gid;
-    }
+    return res;
+}
 
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_ACMODTIME) != 0)
-    {
-        buf->st_atime = attrs.atime;
-        buf->st_mtime = attrs.mtime;
-        buf->st_ctime = attrs.mtime;
-#ifdef HAVE_STRUCT_STAT_ST_MTIM
-        buf->st_atim.tv_nsec = buf->st_mtim.tv_nsec = buf->st_ctim.tv_nsec = 0;
-#endif
-    }
+/* --------------------------------------------------------------------------------------------- */
+/**
+ * Getting information about a file or directory.
+ *
+ * @param vpath   path to file or directory
+ * @param buf     buffer for store stat-info
+ * @param mcerror pointer to error object
+ * @return 0 if success, negative value otherwise
+ */
 
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_SIZE) != 0)
+int
+sftpfs_stat (const vfs_path_t * vpath, struct stat *buf, GError ** mcerror)
+{
+    sftpfs_super_data_t *super_data = NULL;
+    const vfs_path_element_t *path_element = NULL;
+    LIBSSH2_SFTP_ATTRIBUTES attrs;
+    int res;
+
+    res = sftpfs_stat_init (&super_data, &path_element, vpath, mcerror, LIBSSH2_SFTP_STAT, &attrs);
+    if (res >= 0)
     {
-        buf->st_size = attrs.filesize;
-        sftpfs_blksize (buf);
+        buf->st_nlink = 1;
+        sftpfs_attr_to_stat (&attrs, buf);
+        res = 0;
     }
 
-    if ((attrs.flags & LIBSSH2_SFTP_ATTR_PERMISSIONS) != 0)
-        buf->st_mode = attrs.permissions;
-
-    return 0;
+    return res;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -320,23 +338,11 @@ sftpfs_stat (const vfs_path_t * vpath, s
 int
 sftpfs_readlink (const vfs_path_t * vpath, char *buf, size_t size, GError ** mcerror)
 {
-    struct vfs_s_super *super;
-    sftpfs_super_data_t *super_data;
+    sftpfs_super_data_t *super_data = NULL;
+    const vfs_path_element_t *path_element = NULL;
     int res;
-    const vfs_path_element_t *path_element;
-
-    mc_return_val_if_error (mcerror, -1);
-
-    path_element = vfs_path_get_by_index (vpath, -1);
-
-    if (vfs_s_get_path (vpath, &super, 0) == NULL)
-        return -1;
-
-    if (super == NULL)
-        return -1;
 
-    super_data = (sftpfs_super_data_t *) super->data;
-    if (super_data->sftp_session == NULL)
+    if (!sftpfs_op_init (&super_data, &path_element, vpath, mcerror))
         return -1;
 
     do
@@ -352,14 +358,8 @@ sftpfs_readlink (const vfs_path_t * vpat
         if (res >= 0)
             break;
 
-        if (res != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, res, mcerror);
+        if (!sftpfs_waitsocket (super_data, res, mcerror))
             return -1;
-        }
-
-        sftpfs_waitsocket (super_data, mcerror);
-        mc_return_val_if_error (mcerror, -1);
     }
     while (res == LIBSSH2_ERROR_EAGAIN);
 
@@ -379,26 +379,14 @@ sftpfs_readlink (const vfs_path_t * vpat
 int
 sftpfs_symlink (const vfs_path_t * vpath1, const vfs_path_t * vpath2, GError ** mcerror)
 {
-    struct vfs_s_super *super;
-    sftpfs_super_data_t *super_data;
+    sftpfs_super_data_t *super_data = NULL;
     const vfs_path_element_t *path_element1;
-    const vfs_path_element_t *path_element2;
+    const vfs_path_element_t *path_element2 = NULL;
     char *tmp_path;
     unsigned int tmp_path_len;
     int res;
 
-    mc_return_val_if_error (mcerror, -1);
-
-    path_element2 = vfs_path_get_by_index (vpath2, -1);
-
-    if (vfs_s_get_path (vpath2, &super, 0) == NULL)
-        return -1;
-
-    if (super == NULL)
-        return -1;
-
-    super_data = (sftpfs_super_data_t *) super->data;
-    if (super_data->sftp_session == NULL)
+    if (!sftpfs_op_init (&super_data, &path_element2, vpath2, mcerror))
         return -1;
 
     tmp_path = (char *) sftpfs_fix_filename (path_element2->path, &tmp_path_len);
@@ -419,15 +407,7 @@ sftpfs_symlink (const vfs_path_t * vpath
         if (res >= 0)
             break;
 
-        if (res != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, res, mcerror);
-            g_free (tmp_path);
-            return -1;
-        }
-
-        sftpfs_waitsocket (super_data, mcerror);
-        if (mcerror != NULL && *mcerror != NULL)
+        if (!sftpfs_waitsocket (super_data, res, mcerror))
         {
             g_free (tmp_path);
             return -1;
@@ -452,49 +432,14 @@ sftpfs_symlink (const vfs_path_t * vpath
 int
 sftpfs_chmod (const vfs_path_t * vpath, mode_t mode, GError ** mcerror)
 {
-    struct vfs_s_super *super;
-    sftpfs_super_data_t *super_data;
+    sftpfs_super_data_t *super_data = NULL;
+    const vfs_path_element_t *path_element = NULL;
     LIBSSH2_SFTP_ATTRIBUTES attrs;
     int res;
-    const vfs_path_element_t *path_element;
-
-    mc_return_val_if_error (mcerror, -1);
-
-    path_element = vfs_path_get_by_index (vpath, -1);
-
-    if (vfs_s_get_path (vpath, &super, 0) == NULL)
-        return -1;
-
-    if (super == NULL)
-        return -1;
-
-    super_data = (sftpfs_super_data_t *) super->data;
-    if (super_data->sftp_session == NULL)
-        return -1;
-
-    do
-    {
-        const char *fixfname;
-        unsigned int fixfname_len = 0;
-
-        fixfname = sftpfs_fix_filename (path_element->path, &fixfname_len);
-
-        res =
-            libssh2_sftp_stat_ex (super_data->sftp_session, fixfname, fixfname_len,
-                                  LIBSSH2_SFTP_LSTAT, &attrs);
-        if (res >= 0)
-            break;
-
-        if (res != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, res, mcerror);
-            return -1;
-        }
 
-        sftpfs_waitsocket (super_data, mcerror);
-        mc_return_val_if_error (mcerror, -1);
-    }
-    while (res == LIBSSH2_ERROR_EAGAIN);
+    res = sftpfs_stat_init (&super_data, &path_element, vpath, mcerror, LIBSSH2_SFTP_LSTAT, &attrs);
+    if (res < 0)
+        return res;
 
     attrs.permissions = mode;
 
@@ -511,16 +456,20 @@ sftpfs_chmod (const vfs_path_t * vpath,
         if (res >= 0)
             break;
 
-        if (res != LIBSSH2_ERROR_EAGAIN)
+        if (sftpfs_is_sftp_error (super_data->sftp_session, res, LIBSSH2_FX_NO_SUCH_FILE))
+            return -ENOENT;
+
+        if (sftpfs_is_sftp_error (super_data->sftp_session, res, LIBSSH2_FX_FAILURE))
         {
-            sftpfs_ssherror_to_gliberror (super_data, res, mcerror);
-            return -1;
+            res = 0;            /* need something like ftpfs_ignore_chattr_errors */
+            break;
         }
 
-        sftpfs_waitsocket (super_data, mcerror);
-        mc_return_val_if_error (mcerror, -1);
+        if (!sftpfs_waitsocket (super_data, res, mcerror))
+            return -1;
     }
     while (res == LIBSSH2_ERROR_EAGAIN);
+
     return res;
 }
 
@@ -536,23 +485,11 @@ sftpfs_chmod (const vfs_path_t * vpath,
 int
 sftpfs_unlink (const vfs_path_t * vpath, GError ** mcerror)
 {
-    struct vfs_s_super *super;
-    sftpfs_super_data_t *super_data;
+    sftpfs_super_data_t *super_data = NULL;
+    const vfs_path_element_t *path_element = NULL;
     int res;
-    const vfs_path_element_t *path_element;
-
-    mc_return_val_if_error (mcerror, -1);
 
-    path_element = vfs_path_get_by_index (vpath, -1);
-
-    if (vfs_s_get_path (vpath, &super, 0) == NULL)
-        return -1;
-
-    if (super == NULL)
-        return -1;
-
-    super_data = (sftpfs_super_data_t *) super->data;
-    if (super_data->sftp_session == NULL)
+    if (!sftpfs_op_init (&super_data, &path_element, vpath, mcerror))
         return -1;
 
     do
@@ -566,14 +503,8 @@ sftpfs_unlink (const vfs_path_t * vpath,
         if (res >= 0)
             break;
 
-        if (res != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, res, mcerror);
+        if (!sftpfs_waitsocket (super_data, res, mcerror))
             return -1;
-        }
-
-        sftpfs_waitsocket (super_data, mcerror);
-        mc_return_val_if_error (mcerror, -1);
     }
     while (res == LIBSSH2_ERROR_EAGAIN);
 
@@ -593,25 +524,14 @@ sftpfs_unlink (const vfs_path_t * vpath,
 int
 sftpfs_rename (const vfs_path_t * vpath1, const vfs_path_t * vpath2, GError ** mcerror)
 {
-    struct vfs_s_super *super;
-    sftpfs_super_data_t *super_data;
+    sftpfs_super_data_t *super_data = NULL;
     const vfs_path_element_t *path_element1;
-    const vfs_path_element_t *path_element2;
+    const vfs_path_element_t *path_element2 = NULL;
     char *tmp_path;
     unsigned int tmp_path_len;
     int res;
 
-    mc_return_val_if_error (mcerror, -1);
-    path_element2 = vfs_path_get_by_index (vpath2, -1);
-
-    if (vfs_s_get_path (vpath2, &super, 0) == NULL)
-        return -1;
-
-    if (super == NULL)
-        return -1;
-
-    super_data = (sftpfs_super_data_t *) super->data;
-    if (super_data->sftp_session == NULL)
+    if (!sftpfs_op_init (&super_data, &path_element2, vpath2, mcerror))
         return -1;
 
     tmp_path = (char *) sftpfs_fix_filename (path_element2->path, &tmp_path_len);
@@ -632,15 +552,7 @@ sftpfs_rename (const vfs_path_t * vpath1
         if (res >= 0)
             break;
 
-        if (res != LIBSSH2_ERROR_EAGAIN)
-        {
-            sftpfs_ssherror_to_gliberror (super_data, res, mcerror);
-            g_free (tmp_path);
-            return -1;
-        }
-
-        sftpfs_waitsocket (super_data, mcerror);
-        if (mcerror != NULL && *mcerror != NULL)
+        if (!sftpfs_waitsocket (super_data, res, mcerror))
         {
             g_free (tmp_path);
             return -1;
diff -urpN mc-4.8.20/src/vfs/sftpfs/internal.h mc-4.8.21/src/vfs/sftpfs/internal.h
--- mc-4.8.20/src/vfs/sftpfs/internal.h	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/sftpfs/internal.h	2018-05-27 21:56:21.000000000 +0200
@@ -66,12 +66,13 @@ void sftpfs_init_subclass_callbacks (voi
 void sftpfs_init_config_variables_patterns (void);
 void sftpfs_deinit_config_variables_patterns (void);
 
+gboolean sftpfs_is_sftp_error (LIBSSH2_SFTP * sftp_session, int sftp_res, int sftp_error);
 void sftpfs_ssherror_to_gliberror (sftpfs_super_data_t * super_data, int libssh_errno,
                                    GError ** mcerror);
-int sftpfs_waitsocket (sftpfs_super_data_t * super_data, GError ** mcerror);
+gboolean sftpfs_waitsocket (sftpfs_super_data_t * super_data, int sftp_res, GError ** mcerror);
 
 const char *sftpfs_fix_filename (const char *file_name, unsigned int *length);
-void sftpfs_blksize (struct stat *s);
+void sftpfs_attr_to_stat (const LIBSSH2_SFTP_ATTRIBUTES * attrs, struct stat *s);
 int sftpfs_lstat (const vfs_path_t * vpath, struct stat *buf, GError ** mcerror);
 int sftpfs_stat (const vfs_path_t * vpath, struct stat *buf, GError ** mcerror);
 int sftpfs_readlink (const vfs_path_t * vpath, char *buf, size_t size, GError ** mcerror);
diff -urpN mc-4.8.20/src/vfs/sftpfs/vfs_class.c mc-4.8.21/src/vfs/sftpfs/vfs_class.c
--- mc-4.8.20/src/vfs/sftpfs/vfs_class.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/sftpfs/vfs_class.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /* Virtual File System: SFTP file system.
    The VFS class functions
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -150,7 +150,7 @@ sftpfs_cb_open (const vfs_path_t * vpath
     file_handler->ino = path_inode;
     file_handler->handle = -1;
     file_handler->changed = is_changed;
-    file_handler->linear = 0;
+    file_handler->linear = LS_NOT_LINEAR;
     file_handler->data = NULL;
 
     if (!sftpfs_open_file (file_handler, flags, mode, &mcerror))
diff -urpN mc-4.8.20/src/vfs/sftpfs/vfs_subclass.c mc-4.8.21/src/vfs/sftpfs/vfs_subclass.c
--- mc-4.8.20/src/vfs/sftpfs/vfs_subclass.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/sftpfs/vfs_subclass.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /* Virtual File System: SFTP file system.
    The VFS subclass functions
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/vfs/smbfs/Makefile.in mc-4.8.21/src/vfs/smbfs/Makefile.in
--- mc-4.8.20/src/vfs/smbfs/Makefile.in	2017-11-25 19:33:53.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/Makefile.in	2018-06-03 10:57:34.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/include/stamp-h.in mc-4.8.21/src/vfs/smbfs/helpers/include/stamp-h.in
--- mc-4.8.20/src/vfs/smbfs/helpers/include/stamp-h.in	2017-11-25 19:33:57.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/include/stamp-h.in	2018-06-03 10:57:38.000000000 +0200
@@ -1 +1 @@
-Sat 25 Nov 18:33:57 UTC 2017
+Sun  3 Jun 08:57:38 UTC 2018
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/charcnv.c mc-4.8.21/src/vfs/smbfs/helpers/lib/charcnv.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/charcnv.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/charcnv.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/charset.c mc-4.8.21/src/vfs/smbfs/helpers/lib/charset.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/charset.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/charset.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/debug.c mc-4.8.21/src/vfs/smbfs/helpers/lib/debug.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/debug.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/debug.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/interface.c mc-4.8.21/src/vfs/smbfs/helpers/lib/interface.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/interface.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/interface.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -258,7 +258,7 @@ load_interfaces (void)
     interpret_interfaces (lp_interfaces (), &local_interfaces, "interface");
 }
 
-
+#if 0
 /****************************************************************************
   override the defaults
   **************************************************************************/
@@ -283,7 +283,7 @@ iface_set_default (char *ip, char *bcast
         default_nmask = *interpret_addr2 (nmask);
     }
 }
-
+#endif /* 0 */
 
 /****************************************************************************
   check if an IP is one of mine
@@ -298,6 +298,7 @@ ismyip (struct in_addr ip)
     return False;
 }
 
+#if 0
 /****************************************************************************
   check if a packet is from a local (known) net
   **************************************************************************/
@@ -310,6 +311,7 @@ is_local_net (struct in_addr from)
             return True;
     return False;
 }
+#endif /* 0 */
 
 /****************************************************************************
   how many interfaces do we have
@@ -325,6 +327,7 @@ iface_count (void)
     return ret;
 }
 
+#if 0
 /****************************************************************************
  True if we have two or more interfaces.
   **************************************************************************/
@@ -354,7 +357,7 @@ get_interface (int n)
         return i;
     return NULL;
 }
-
+#endif /* 0 */
 /****************************************************************************
   return IP of the Nth interface
   **************************************************************************/
@@ -388,7 +391,7 @@ iface_find (struct in_addr ip)
     return NULL;
 }
 
-
+#if 0
 /****************************************************************************
 this function provides a simple hash of the configured interfaces. It is
 used to detect a change in interfaces to tell us whether to discard
@@ -410,7 +413,7 @@ iface_hash (void)
 
     return ret;
 }
-
+#endif /* 0 */
 
 /* these 3 functions return the ip/bcast/nmask for the interface
    most appropriate for the given ip address. If they can't find
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/kanji.c mc-4.8.21/src/vfs/smbfs/helpers/lib/kanji.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/kanji.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/kanji.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Adding for Japanese language by <fujita@ainix.isac.co.jp> 1994.9.5
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/md4.c mc-4.8.21/src/vfs/smbfs/helpers/lib/md4.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/md4.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/md4.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1997-1998.
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/netmask.c mc-4.8.21/src/vfs/smbfs/helpers/lib/netmask.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/netmask.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/netmask.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/slprintf.c mc-4.8.21/src/vfs/smbfs/helpers/lib/slprintf.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/slprintf.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/slprintf.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/system.c mc-4.8.21/src/vfs/smbfs/helpers/lib/system.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/system.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/system.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -103,7 +103,6 @@ sys_select (int maxfd, fd_set * fds, str
 #else /* !NO_SELECT */
 int
 sys_select (int maxfd, fd_set * fds, struct timeval *tval)
-/* cppcheck-suppress syntaxError */
 {
 #ifdef USE_POLL
     struct pollfd pfd[256];
@@ -154,8 +153,8 @@ sys_select (int maxfd, fd_set * fds, str
     while (selrtn < 0 && errno == EINTR);
 
     return (selrtn);
-}
 #endif /* USE_POLL */
+}
 #endif /* NO_SELECT */
 
 /*******************************************************************
@@ -197,7 +196,7 @@ sys_ftell (FILE * fp)
 {
     return (SMB_OFF_T) ftell (fp);
 }
-#endif /* 0 */
+
 /*******************************************************************
  An open() wrapper that will deal with 64 bit filesizes.
 ********************************************************************/
@@ -211,6 +210,7 @@ sys_open (const char *path, int oflag, m
 /*******************************************************************
  An fopen() wrapper that will deal with 64 bit filesizes.
 ********************************************************************/
+#endif /* 0 */
 
 FILE *
 sys_fopen (const char *path, const char *type)
@@ -304,38 +304,3 @@ sys_gethostbyname (const char *name)
     return (gethostbyname (name));
 #endif /* REDUCE_ROOT_DNS_LOOKUPS */
 }
-
-/**************************************************************************
- Wrapper for random().
-****************************************************************************/
-#if 0
-long
-sys_random (void)
-{
-#if defined(HAVE_RANDOM)
-    return (long) random ();
-#elif defined(HAVE_RAND)
-    return (long) rand ();
-#else
-    DEBUG (0, ("Error - no random function available !\n"));
-    exit (1);
-#endif
-}
-
-/**************************************************************************
- Wrapper for srandom().
-****************************************************************************/
-
-void
-sys_srandom (unsigned int seed)
-{
-#if defined(HAVE_SRANDOM)
-    srandom (seed);
-#elif defined(HAVE_SRAND)
-    srand (seed);
-#else
-    DEBUG (0, ("Error - no srandom function available !\n"));
-    exit (1);
-#endif
-}
-#endif /* 0 */
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/time.c mc-4.8.21/src/vfs/smbfs/helpers/lib/time.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/time.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/time.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -424,6 +424,7 @@ put_dos_date (char *buf, int offset, tim
     SIVAL (buf, offset, x);
 }
 
+#if 0
 /*******************************************************************
 put a dos date into a buffer (date/time format)
 This takes GMT time and puts local time in the buffer
@@ -435,6 +436,7 @@ put_dos_date2 (char *buf, int offset, ti
     x = ((x & 0xFFFF) << 16) | ((x & 0xFFFF0000) >> 16);
     SIVAL (buf, offset, x);
 }
+#endif /* 0 */
 
 /*******************************************************************
 put a dos 32 bit "unix like" date into a buffer. This routine takes
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/username.c mc-4.8.21/src/vfs/smbfs/helpers/lib/username.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/username.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/username.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/util.c mc-4.8.21/src/vfs/smbfs/helpers/lib/util.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/util.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/util.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -59,8 +59,6 @@
 #ifdef WITH_SSL
 #include <ssl.h>
 #undef Realloc                  /* SSLeay defines this and samba has a function of this name */
-extern SSL *ssl;
-extern int sslFd;
 #endif /* WITH_SSL */
 
 extern int DEBUGLEVEL;
@@ -76,9 +74,6 @@ extern int Client;
 
 /* this is used by the chaining code */
 const int chain_size = 0;
-#if 0
-int trans_num = 0;
-#endif /*0 */
 
 /*
    case handling on filenames 
@@ -105,7 +100,7 @@ static const char *remote_proto = "UNKNO
 pstring myhostname = "";
 pstring user_socket_options = "";
 
-pstring sesssetup_user = "";
+static const char sesssetup_user[] = "";
 static const char *const samlogon_user = "";
 
 const BOOL sam_logon_in_ssb = False;
@@ -342,7 +337,7 @@ name_mangle (char *In, char *Out, char n
     p[0] = '\0';
 
     /* Add the scope string. */
-    for (i = 0, len = 0; NULL != global_scope; i++, len++)
+    for (i = 0, len = 0;; i++, len++)
     {
         switch (global_scope[i])
         {
@@ -437,22 +432,25 @@ return a string representing an attribut
 char *
 attrib_string (uint16 mode)
 {
-    static fstring attrstr;
+    static char attrstr[7];
+    int i = 0;
 
     attrstr[0] = 0;
 
     if (mode & aVOLID)
-        fstrcat (attrstr, "V");
+        attrstr[i++] = 'V';
     if (mode & aDIR)
-        fstrcat (attrstr, "D");
+        attrstr[i++] = 'D';
     if (mode & aARCH)
-        fstrcat (attrstr, "A");
+        attrstr[i++] = 'A';
     if (mode & aHIDDEN)
-        fstrcat (attrstr, "H");
+        attrstr[i++] = 'H';
     if (mode & aSYSTEM)
-        fstrcat (attrstr, "S");
+        attrstr[i++] = 'S';
     if (mode & aRONLY)
-        fstrcat (attrstr, "R");
+        attrstr[i++] = 'R';
+
+    attrstr[i] = 0;
 
     return (attrstr);
 }
@@ -2498,7 +2496,7 @@ Get_Hostbyname (const char *name)
     return (NULL);
 }
 
-
+#if 0
 /*******************************************************************
 turn a uid into a user name
 ********************************************************************/
@@ -2512,7 +2510,7 @@ uidtoname (uid_t uid)
     slprintf (name, sizeof (name) - 1, "%d", (int) uid);
     return (name);
 }
-
+#endif /* 0 */
 
 /*******************************************************************
 turn a gid into a group name
@@ -2529,6 +2527,7 @@ gidtoname (gid_t gid)
     return (name);
 }
 
+#if 0
 /*******************************************************************
 turn a user name into a uid
 ********************************************************************/
@@ -2540,7 +2539,7 @@ nametouid (const char *name)
         return (pass->pw_uid);
     return (uid_t) - 1;
 }
-
+#endif /* 0 */
 /*******************************************************************
 something really nasty happened - panic!
 ********************************************************************/
@@ -2769,121 +2768,6 @@ free_namearray (name_compare_entry * nam
     free ((char *) name_array);
 }
 
-/****************************************************************************
-routine to do file locking
-****************************************************************************/
-BOOL
-fcntl_lock (int fd, int op, SMB_OFF_T offset, SMB_OFF_T count, int type)
-{
-#ifdef HAVE_FCNTL_LOCK
-    SMB_STRUCT_FLOCK lock;
-    int ret;
-
-    if (lp_ole_locking_compat ())
-    {
-        SMB_OFF_T mask2 = ((SMB_OFF_T) 0x3) << (SMB_OFF_T_BITS - 4);
-        SMB_OFF_T mask = (mask2 << 2);
-
-        /* make sure the count is reasonable, we might kill the lockd otherwise */
-        count &= ~mask;
-
-        /* the offset is often strange - remove 2 of its bits if either of
-           the top two bits are set. Shift the top ones by two bits. This
-           still allows OLE2 apps to operate, but should stop lockd from
-           dieing */
-        if ((offset & mask) != 0)
-            offset = (offset & ~mask) | (((offset & mask) >> 2) & mask2);
-    }
-    else
-    {
-        SMB_OFF_T mask2 = ((SMB_OFF_T) 0x4) << (SMB_OFF_T_BITS - 4);
-        SMB_OFF_T mask = (mask2 << 1);
-        SMB_OFF_T neg_mask = ~mask;
-
-        /* interpret negative counts as large numbers */
-        if (count < 0)
-            count &= ~mask;
-
-        /* no negative offsets */
-        if (offset < 0)
-            offset &= ~mask;
-
-        /* count + offset must be in range */
-        while ((offset < 0 || (offset + count < 0)) && mask)
-        {
-            offset &= ~mask;
-            mask = ((mask >> 1) & neg_mask);
-        }
-    }
-
-    DEBUG (8, ("fcntl_lock %d %d %.0f %.0f %d\n", fd, op, (double) offset, (double) count, type));
-
-    lock.l_type = type;
-    lock.l_whence = SEEK_SET;
-    lock.l_start = offset;
-    lock.l_len = count;
-    lock.l_pid = 0;
-
-    errno = 0;
-
-    ret = fcntl (fd, op, &lock);
-    if (errno == EFBIG)
-    {
-        if (DEBUGLVL (0))
-        {
-            dbgtext ("fcntl_lock: WARNING: lock request at offset %.0f, length %.0f returned\n",
-                     (double) offset, (double) count);
-            dbgtext ("a 'file too large' error. This can happen when using 64 bit lock offsets\n");
-            dbgtext
-                ("on 32 bit NFS mounted file systems. Retrying with 32 bit truncated length.\n");
-        }
-        /* 32 bit NFS file system, retry with smaller offset */
-        errno = 0;
-        lock.l_len = count & 0xffffffff;
-        ret = fcntl (fd, op, &lock);
-    }
-
-    if (errno != 0)
-        DEBUG (3, ("fcntl lock gave errno %d (%s)\n", errno, unix_error_string (errno)));
-
-    /* a lock query */
-    if (op == SMB_F_GETLK)
-    {
-        if ((ret != -1) &&
-            (lock.l_type != F_UNLCK) && (lock.l_pid != 0) && (lock.l_pid != getpid ()))
-        {
-            DEBUG (3, ("fd %d is locked by pid %d\n", fd, (int) lock.l_pid));
-            return (True);
-        }
-
-        /* it must be not locked or locked by me */
-        return (False);
-    }
-
-    /* a lock set or unset */
-    if (ret == -1)
-    {
-        DEBUG (3, ("lock failed at offset %.0f count %.0f op %d type %d (%s)\n",
-                   (double) offset, (double) count, op, type, unix_error_string (errno)));
-
-        /* perhaps it doesn't support this sort of locking?? */
-        if (errno == EINVAL)
-        {
-            DEBUG (3, ("locking not supported? returning True\n"));
-            return (True);
-        }
-
-        return (False);
-    }
-
-    /* everything went OK */
-    DEBUG (8, ("Lock call successful\n"));
-
-    return (True);
-#else
-    return (False);
-#endif
-}
 
 /*******************************************************************
 is the name specified one of my netbios names
@@ -3073,6 +2957,7 @@ dump_data (int level, char *buf1, int le
     }
 }
 
+#if 0
 /*****************************************************************************
  * Provide a checksum on a string
  *
@@ -3101,8 +2986,6 @@ str_checksum (const char *s)
 }                               /* str_checksum */
 
 
-
-#if 0
 /*****************************************************************
 zero a memory area then free it. Used to catch bugs faster
 *****************************************************************/
@@ -3112,67 +2995,4 @@ zero_free (void *p, size_t size)
     memset (p, 0, size);
     free (p);
 }
-
-
-/*****************************************************************
-set our open file limit to a requested max and return the limit
-*****************************************************************/
-int
-set_maxfiles (int requested_max)
-{
-#if (defined(HAVE_GETRLIMIT) && defined(RLIMIT_NOFILE))
-    struct rlimit rlp;
-    int saved_current_limit;
-
-    if (getrlimit (RLIMIT_NOFILE, &rlp))
-    {
-        DEBUG (0, ("set_maxfiles: getrlimit (1) for RLIMIT_NOFILE failed with error %s\n",
-                   unix_error_string (errno)));
-        /* just guess... */
-        return requested_max;
-    }
-
-    /* 
-     * Set the fd limit to be real_max_open_files + MAX_OPEN_FUDGEFACTOR to
-     * account for the extra fd we need 
-     * as well as the log files and standard
-     * handles etc. Save the limit we want to set in case
-     * we are running on an OS that doesn't support this limit (AIX)
-     * which always returns RLIM_INFINITY for rlp.rlim_max.
-     */
-
-    saved_current_limit = rlp.rlim_cur = MIN (requested_max, rlp.rlim_max);
-
-    if (setrlimit (RLIMIT_NOFILE, &rlp))
-    {
-        DEBUG (0, ("set_maxfiles: setrlimit for RLIMIT_NOFILE for %d files failed with error %s\n",
-                   (int) rlp.rlim_cur, unix_error_string (errno)));
-        /* just guess... */
-        return saved_current_limit;
-    }
-
-    if (getrlimit (RLIMIT_NOFILE, &rlp))
-    {
-        DEBUG (0, ("set_maxfiles: getrlimit (2) for RLIMIT_NOFILE failed with error %s\n",
-                   unix_error_string (errno)));
-        /* just guess... */
-        return saved_current_limit;
-    }
-
-#if defined(RLIM_INFINITY)
-    if (rlp.rlim_cur == RLIM_INFINITY)
-        return saved_current_limit;
-#endif
-
-    if ((int) rlp.rlim_cur > saved_current_limit)
-        return saved_current_limit;
-
-    return rlp.rlim_cur;
-#else /* !defined(HAVE_GETRLIMIT) || !defined(RLIMIT_NOFILE) */
-    /*
-     * No way to know - just guess...
-     */
-    return requested_max;
-#endif
-}
 #endif /* 0 */
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/util_file.c mc-4.8.21/src/vfs/smbfs/helpers/lib/util_file.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/util_file.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/util_file.c	2018-05-27 21:56:21.000000000 +0200
@@ -3,7 +3,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998 Modified by Jeremy Allison 1995.
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/util_sock.c mc-4.8.21/src/vfs/smbfs/helpers/lib/util_sock.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/util_sock.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/util_sock.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -51,7 +51,7 @@ int lastport = 0;
 
 int smb_read_error = 0;
 
-
+#if 0
 /****************************************************************************
 determine if a file descriptor is in fact a socket
 ****************************************************************************/
@@ -63,7 +63,7 @@ is_a_socket (int fd)
     l = sizeof (int);
     return (getsockopt (fd, SOL_SOCKET, SO_TYPE, (char *) &v, &l) == 0);
 }
-
+#endif /* 0 */
 
 enum SOCK_OPT_TYPES
 { OPT_BOOL, OPT_INT, OPT_ON };
@@ -385,7 +385,7 @@ read_with_timeout (int fd, char *buf, si
     return ((ssize_t) nread);
 }
 
-
+#if 0
 /****************************************************************************
 send a keepalive packet (rfc1002)
 ****************************************************************************/
@@ -399,7 +399,7 @@ send_keepalive (int client)
 
     return (write_data (client, (char *) buf, 4) == 4);
 }
-
+#endif /* 0 */
 
 
 /****************************************************************************
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/lib/util_str.c mc-4.8.21/src/vfs/smbfs/helpers/lib/util_str.c
--- mc-4.8.20/src/vfs/smbfs/helpers/lib/util_str.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/lib/util_str.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/libsmb/clientgen.c mc-4.8.21/src/vfs/smbfs/helpers/libsmb/clientgen.c
--- mc-4.8.20/src/vfs/smbfs/helpers/libsmb/clientgen.c	2017-03-04 18:51:38.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/libsmb/clientgen.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1994-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -1690,7 +1690,7 @@ cli_getattrE (struct cli_state * cli, in
     return True;
 }
 
-
+#if 0
 /****************************************************************************
 do a SMBgetatr call
 ****************************************************************************/
@@ -1741,7 +1741,7 @@ cli_getatr (struct cli_state * cli, char
 
     return True;
 }
-
+#endif /* 0 */
 
 /****************************************************************************
 do a SMBsetatr call
@@ -2720,6 +2720,7 @@ cli_error (struct cli_state *cli, uint8
     return EINVAL;
 }
 
+#if 0
 /****************************************************************************
 set socket options on a open connection
 ****************************************************************************/
@@ -2739,6 +2740,7 @@ cli_setpid (struct cli_state *cli, uint1
     cli->pid = pid;
     return ret;
 }
+#endif /* 0 */
 
 /****************************************************************************
 re-establishes a connection
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/libsmb/namequery.c mc-4.8.21/src/vfs/smbfs/helpers/libsmb/namequery.c
--- mc-4.8.20/src/vfs/smbfs/helpers/libsmb/namequery.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/libsmb/namequery.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1994-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -303,8 +303,7 @@ resolve_bcast (const char *name, struct
         struct in_addr *iplist = NULL;
         int count;
         int num_interfaces = iface_count ();
-        static char so_broadcast[] = "SO_BROADCAST";
-        set_socket_options (sock, so_broadcast);
+        set_socket_options (sock, "SO_BROADCAST");
         /*
          * Lookup the name on all the interfaces, return on
          * the first successful match.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/libsmb/nmblib.c mc-4.8.21/src/vfs/smbfs/helpers/libsmb/nmblib.c
--- mc-4.8.20/src/vfs/smbfs/helpers/libsmb/nmblib.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/libsmb/nmblib.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1994-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/libsmb/nterr.c mc-4.8.21/src/vfs/smbfs/helpers/libsmb/nterr.c
--- mc-4.8.20/src/vfs/smbfs/helpers/libsmb/nterr.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/libsmb/nterr.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,6 +1,6 @@
 /* NT error codes.  please read nterr.h
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/libsmb/pwd_cache.c mc-4.8.21/src/vfs/smbfs/helpers/libsmb/pwd_cache.c
--- mc-4.8.20/src/vfs/smbfs/helpers/libsmb/pwd_cache.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/libsmb/pwd_cache.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Luke Kenneth Casson Leighton 1996-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -102,7 +102,7 @@ pwd_read (struct pwd_info *pwd, char *pa
         pwd_set_cleartext (pwd, user_pass);
     }
 }
-#endif
+
 
 /****************************************************************************
  stores a cleartext password
@@ -116,6 +116,7 @@ pwd_set_nullpwd (struct pwd_info *pwd)
     pwd->null_pwd = True;
     pwd->crypted = False;
 }
+#endif /* 0 */
 
 /****************************************************************************
  stores a cleartext password
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/libsmb/smbdes.c mc-4.8.21/src/vfs/smbfs/helpers/libsmb/smbdes.c
--- mc-4.8.20/src/vfs/smbfs/helpers/libsmb/smbdes.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/libsmb/smbdes.c	2018-05-27 21:56:21.000000000 +0200
@@ -7,7 +7,7 @@
 
    Copyright (C) Andrew Tridgell 1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
@@ -347,6 +347,7 @@ E_P24 (unsigned char *p21, unsigned char
     smbhash (p24 + 16, c8, p21 + 14, 1);
 }
 
+#if 0
 void
 D_P16 (unsigned char *p14, unsigned char *in, unsigned char *out)
 {
@@ -431,3 +432,4 @@ SamOEMhash (unsigned char *data, unsigne
         data[ind] = data[ind] ^ s_box[t];
     }
 }
+#endif /* 0 */
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/libsmb/smbencrypt.c mc-4.8.21/src/vfs/smbfs/helpers/libsmb/smbencrypt.c
--- mc-4.8.20/src/vfs/smbfs/helpers/libsmb/smbencrypt.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/libsmb/smbencrypt.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Andrew Tridgell 1992-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Modified by Jeremy Allison 1995.
@@ -165,6 +165,7 @@ SMBOWFencrypt (uchar passwd[16], uchar *
     E_P24 (p21, c8, p24);
 }
 
+#if 0
 /* Does the des encryption from the FIRST 8 BYTES of the NT or LM MD4 hash. */
 void
 NTLMSSPOWFencrypt (uchar passwd[8], uchar * ntlmchalresp, uchar p24[24])
@@ -183,7 +184,7 @@ NTLMSSPOWFencrypt (uchar passwd[8], ucha
     dump_data (100, (char *) p24, 24);
 #endif
 }
-
+#endif /* 0 */
 
 /* Does the NT MD4 hash then des encryption. */
 
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/libsmb/smberr.c mc-4.8.21/src/vfs/smbfs/helpers/libsmb/smberr.c
--- mc-4.8.20/src/vfs/smbfs/helpers/libsmb/smberr.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/libsmb/smberr.c	2018-05-27 21:56:21.000000000 +0200
@@ -4,7 +4,7 @@
 
    Copyright (C) Andrew Tridgell 1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/src/vfs/smbfs/helpers/param/loadparm.c mc-4.8.21/src/vfs/smbfs/helpers/param/loadparm.c
--- mc-4.8.20/src/vfs/smbfs/helpers/param/loadparm.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/helpers/param/loadparm.c	2018-05-27 21:56:21.000000000 +0200
@@ -5,7 +5,7 @@
 
    Copyright (C) Karl Auer 1993-1998
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Largely re-written by Andrew Tridgell, September 1994
@@ -1953,7 +1953,7 @@ init_copymap (service * pservice)
             pservice->copymap[i] = True;
 }
 
-
+#if 0
 /***************************************************************************
  return the local pointer to a parameter given the service number and the 
  pointer into the default structure
@@ -1963,6 +1963,7 @@ lp_local_ptr (int snum, void *ptr)
 {
     return (void *) (((char *) pSERVICE (snum)) + PTR_DIFF (ptr, &sDefault));
 }
+#endif /* 0 */
 
 /***************************************************************************
 Process a parameter for a particular service number. If snum < 0
@@ -2449,7 +2450,7 @@ lp_load (const char *pszFname, BOOL glob
     return (bRetval);
 }
 
-
+#if 0
 /***************************************************************************
 reset the max number of services
 ***************************************************************************/
@@ -2468,7 +2469,7 @@ lp_numservices (void)
 {
     return (iNumServices);
 }
-
+#endif /* 0 */
 
 /***************************************************************************
 Return the number of the service with the given name, or -1 if it doesn't
@@ -2503,7 +2504,6 @@ volume_label (int snum)
         return (lp_servicename (snum));
     return (ret);
 }
-#endif /* 0 */
 
 /***********************************************************
  Set the global name resolution order (used in smbclient).
@@ -2514,3 +2514,4 @@ lp_set_name_resolve_order (char *new_ord
 {
     Globals.szNameResolveOrder = new_order;
 }
+#endif /* 0 */
diff -urpN mc-4.8.20/src/vfs/smbfs/smbfs.c mc-4.8.21/src/vfs/smbfs/smbfs.c
--- mc-4.8.20/src/vfs/smbfs/smbfs.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/vfs/smbfs/smbfs.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Virtual File System: Midnight Commander file system.
 
-   Copyright (C) 1999-2017
+   Copyright (C) 1999-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/vfs/tar/Makefile.in mc-4.8.21/src/vfs/tar/Makefile.in
--- mc-4.8.20/src/vfs/tar/Makefile.in	2017-11-25 19:33:53.000000000 +0100
+++ mc-4.8.21/src/vfs/tar/Makefile.in	2018-06-03 10:57:34.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/tar/tar.c mc-4.8.21/src/vfs/tar/tar.c
--- mc-4.8.20/src/vfs/tar/tar.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/vfs/tar/tar.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Virtual File System: GNU Tar file system.
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -817,7 +817,7 @@ tar_open_archive (struct vfs_s_super *ar
                 {
                     message (D_ERROR, MSG_ERROR, _("%s\ndoesn't look like a tar archive."),
                              vfs_path_as_str (vpath));
-                    /* FALL THRU */
+                    MC_FALLTHROUGH;
 
                     /* Error after header rec */
                 }
@@ -836,7 +836,7 @@ tar_open_archive (struct vfs_s_super *ar
 
             /* Record of zeroes */
         case STATUS_EOFMARK:   /* If error after 0's */
-            /* FALL THRU */
+            MC_FALLTHROUGH;
             /* exit from loop */
         case STATUS_EOF:       /* End of archive */
             break;
diff -urpN mc-4.8.20/src/vfs/undelfs/Makefile.in mc-4.8.21/src/vfs/undelfs/Makefile.in
--- mc-4.8.20/src/vfs/undelfs/Makefile.in	2017-11-25 19:33:53.000000000 +0100
+++ mc-4.8.21/src/vfs/undelfs/Makefile.in	2018-06-03 10:57:34.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/vfs/undelfs/undelfs.c mc-4.8.21/src/vfs/undelfs/undelfs.c
--- mc-4.8.20/src/vfs/undelfs/undelfs.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/vfs/undelfs/undelfs.c	2018-05-27 21:56:21.000000000 +0200
@@ -7,7 +7,7 @@
    Parts of this program were taken from the lsdel.c and dump.c files
    written by Ted Ts'o (tytso@mit.edu) for the ext2fs package.
 
-   Copyright (C) 1995-2017
+   Copyright (C) 1995-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/viewer/Makefile.in mc-4.8.21/src/viewer/Makefile.in
--- mc-4.8.20/src/viewer/Makefile.in	2017-11-25 19:33:54.000000000 +0100
+++ mc-4.8.21/src/viewer/Makefile.in	2018-06-03 10:57:34.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/src/viewer/actions_cmd.c mc-4.8.21/src/viewer/actions_cmd.c
--- mc-4.8.20/src/viewer/actions_cmd.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/viewer/actions_cmd.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Callback function for some actions (hotkeys, menu)
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -105,7 +105,7 @@ mcview_search (WView * view, gboolean st
     {
         if (mcview_dialog_search (view))
         {
-            if (view->hex_mode)
+            if (view->mode_flags.hex)
                 want_search_start = view->hex_cursor;
 
             mcview_do_search (view, want_search_start);
@@ -113,7 +113,7 @@ mcview_search (WView * view, gboolean st
     }
     else
     {
-        if (view->hex_mode)
+        if (view->mode_flags.hex)
         {
             if (!mcview_search_options.backwards)
                 want_search_start = view->hex_cursor + 1;
@@ -459,11 +459,11 @@ mcview_execute_cmd (WView * view, long c
         mcview_move_right (view, 1);
         break;
     case CK_LeftQuick:
-        if (!view->hex_mode)
+        if (!view->mode_flags.hex)
             mcview_move_left (view, 10);
         break;
     case CK_RightQuick:
-        if (!view->hex_mode)
+        if (!view->mode_flags.hex)
             mcview_move_right (view, 10);
         break;
     case CK_SearchContinue:
@@ -552,7 +552,7 @@ mcview_handle_key (WView * view, int key
     key = convert_from_input_c (key);
 #endif
 
-    if (view->hex_mode)
+    if (view->mode_flags.hex)
     {
         if (view->hexedit_mode && (mcview_handle_editkey (view, key) == MSG_HANDLED))
             return MSG_HANDLED;
@@ -667,7 +667,7 @@ mcview_callback (Widget * w, Widget * se
         return MSG_HANDLED;
 
     case MSG_CURSOR:
-        if (view->hex_mode)
+        if (view->mode_flags.hex)
             mcview_place_cursor (view);
         return MSG_HANDLED;
 
diff -urpN mc-4.8.20/src/viewer/ascii.c mc-4.8.21/src/viewer/ascii.c
--- mc-4.8.20/src/viewer/ascii.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/viewer/ascii.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Function for plain view
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -402,7 +402,7 @@ mcview_get_next_maybe_nroff_char (WView
     if (color != NULL)
         *color = VIEW_NORMAL_COLOR;
 
-    if (!view->text_nroff_mode)
+    if (!view->mode_flags.nroff)
         return mcview_get_next_char (view, state, c);
 
     if (!mcview_get_next_char (view, state, c))
@@ -583,7 +583,7 @@ mcview_display_line (WView * view, mcvie
     const screen_dimen top = view->data_area.top;
     const screen_dimen width = view->data_area.width;
     const screen_dimen height = view->data_area.height;
-    off_t dpy_text_column = view->text_wrap_mode ? 0 : view->dpy_text_column;
+    off_t dpy_text_column = view->mode_flags.wrap ? 0 : view->dpy_text_column;
     screen_dimen col = 0;
     int cs[1 + MAX_COMBINING_CHARS];
     char str[(1 + MAX_COMBINING_CHARS) * UTF8_CHAR_LEN + 1];
@@ -592,7 +592,7 @@ mcview_display_line (WView * view, mcvie
     if (paragraph_ended != NULL)
         *paragraph_ended = TRUE;
 
-    if (!view->text_wrap_mode && (row < 0 || row >= (int) height) && linewidth == NULL)
+    if (!view->mode_flags.wrap && (row < 0 || row >= (int) height) && linewidth == NULL)
     {
         /* Optimization: Fast forward to the end of the line, rather than carefully
          * parsing and then not actually displaying it. */
@@ -661,7 +661,7 @@ mcview_display_line (WView * view, mcvie
         /* In wrap mode only: We're done with this row if the character sequence wouldn't fit.
          * Except if at the first column, because then it wouldn't fit in the next row either.
          * In this extreme case let the unwrapped code below do its best to display it. */
-        if (view->text_wrap_mode && (off_t) col + charwidth > dpy_text_column + (off_t) width
+        if (view->mode_flags.wrap && (off_t) col + charwidth > dpy_text_column + (off_t) width
             && col > 0)
         {
             *state = state_saved;
@@ -730,7 +730,7 @@ mcview_display_line (WView * view, mcvie
         col += charwidth;
         state->unwrapped_column += charwidth;
 
-        if (!view->text_wrap_mode && (off_t) col >= dpy_text_column + (off_t) width
+        if (!view->mode_flags.wrap && (off_t) col >= dpy_text_column + (off_t) width
             && linewidth == NULL)
         {
             /* Optimization: Fast forward to the end of the line, rather than carefully
@@ -870,7 +870,7 @@ mcview_display_text (WView * view)
         mcview_display_clean (view);
         mcview_display_ruler (view);
 
-        if (!view->text_wrap_mode)
+        if (!view->mode_flags.wrap)
             mcview_state_machine_init (&state, view->dpy_start);
         else
         {
@@ -888,7 +888,7 @@ mcview_display_text (WView * view)
                  * scroll the file and display again. This happens when e.g. the
                  * window is made bigger, or the file becomes shorter due to
                  * charset change or enabling nroff. */
-                if ((view->text_wrap_mode ? view->dpy_state_top.offset : view->dpy_start) > 0)
+                if ((view->mode_flags.wrap ? view->dpy_state_top.offset : view->dpy_start) > 0)
                 {
                     mcview_ascii_move_up (view, height - row);
                     again = TRUE;
@@ -940,7 +940,7 @@ mcview_ascii_move_down (WView * view, of
 
         /* Okay, there's enough data. Move by 1 row at the top, too. No need to check for
          * EOF, that can't happen. */
-        if (!view->text_wrap_mode)
+        if (!view->mode_flags.wrap)
         {
             view->dpy_start = mcview_eol (view, view->dpy_start);
             view->dpy_paragraph_skip_lines = 0;
@@ -977,7 +977,7 @@ mcview_ascii_move_down (WView * view, of
 void
 mcview_ascii_move_up (WView * view, off_t lines)
 {
-    if (!view->text_wrap_mode)
+    if (!view->mode_flags.wrap)
     {
         while (lines-- != 0)
             view->dpy_start = mcview_bol (view, view->dpy_start - 1, 0);
@@ -1027,7 +1027,7 @@ mcview_ascii_move_up (WView * view, off_
 void
 mcview_ascii_moveto_bol (WView * view)
 {
-    if (!view->text_wrap_mode)
+    if (!view->mode_flags.wrap)
         view->dpy_text_column = 0;
 }
 
@@ -1036,7 +1036,7 @@ mcview_ascii_moveto_bol (WView * view)
 void
 mcview_ascii_moveto_eol (WView * view)
 {
-    if (!view->text_wrap_mode)
+    if (!view->mode_flags.wrap)
     {
         mcview_state_machine_t state;
         off_t linewidth;
diff -urpN mc-4.8.20/src/viewer/coord_cache.c mc-4.8.21/src/viewer/coord_cache.c
--- mc-4.8.20/src/viewer/coord_cache.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/viewer/coord_cache.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Function for work with coordinate cache (ccache)
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -312,7 +312,7 @@ mcview_ccache_lookup (WView * view, coor
 
     if (sorter == CCACHE_OFFSET)
         cmp_func = mcview_coord_cache_entry_less_offset;
-    else if (view->text_nroff_mode)
+    else if (view->mode_flags.nroff)
         cmp_func = mcview_coord_cache_entry_less_nroff;
     else
         cmp_func = mcview_coord_cache_entry_less_plain;
@@ -342,7 +342,8 @@ mcview_ccache_lookup (WView * view, coor
 
         if (!cmp_func (&current, coord))
         {
-            if (lookup_what == CCACHE_OFFSET && view->text_nroff_mode && nroff_state != NROFF_START)
+            if (lookup_what == CCACHE_OFFSET && view->mode_flags.nroff
+                && nroff_state != NROFF_START)
             {
                 /* don't break here */
             }
diff -urpN mc-4.8.20/src/viewer/datasource.c mc-4.8.21/src/viewer/datasource.c
--- mc-4.8.20/src/viewer/datasource.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/viewer/datasource.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Functions for datasources
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/viewer/dialogs.c mc-4.8.21/src/viewer/dialogs.c
--- mc-4.8.20/src/viewer/dialogs.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/viewer/dialogs.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Function for paint dialogs
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -128,11 +128,8 @@ mcview_dialog_search (WView * view)
         GString *tmp;
 
         tmp = str_convert_to_input (exp);
-        if (tmp != NULL)
-        {
-            g_free (exp);
-            exp = g_string_free (tmp, FALSE);
-        }
+        g_free (exp);
+        exp = g_string_free (tmp, FALSE);
     }
 #endif
 
@@ -251,12 +248,12 @@ mcview_dialog_goto (WView * view, off_t
                 if (view->growbuf_in_use)
                     mcview_growbuf_read_all_data (view);
                 *offset = addr * mcview_get_filesize (view) / 100;
-                if (!view->hex_mode)
+                if (!view->mode_flags.hex)
                     *offset = mcview_bol (view, *offset, 0);
                 break;
             case MC_VIEW_GOTO_OFFSET_DEC:
             case MC_VIEW_GOTO_OFFSET_HEX:
-                if (!view->hex_mode)
+                if (!view->mode_flags.hex)
                 {
                     if (view->growbuf_in_use)
                         mcview_growbuf_read_until (view, addr);
diff -urpN mc-4.8.20/src/viewer/display.c mc-4.8.21/src/viewer/display.c
--- mc-4.8.20/src/viewer/display.c	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/src/viewer/display.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Function for whow info on display
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -80,11 +80,11 @@ mcview_set_buttonbar (WView * view)
 {
     WDialog *h = WIDGET (view)->owner;
     WButtonBar *b = find_buttonbar (h);
-    const global_keymap_t *keymap = view->hex_mode ? viewer_hex_map : viewer_map;
+    const global_keymap_t *keymap = view->mode_flags.hex ? viewer_hex_map : viewer_map;
 
     buttonbar_set_label (b, 1, Q_ ("ButtonBar|Help"), keymap, WIDGET (view));
 
-    if (view->hex_mode)
+    if (view->mode_flags.hex)
     {
         if (view->hexedit_mode)
             buttonbar_set_label (b, 2, Q_ ("ButtonBar|View"), keymap, WIDGET (view));
@@ -100,7 +100,7 @@ mcview_set_buttonbar (WView * view)
     }
     else
     {
-        buttonbar_set_label (b, 2, view->text_wrap_mode ? Q_ ("ButtonBar|UnWrap")
+        buttonbar_set_label (b, 2, view->mode_flags.wrap ? Q_ ("ButtonBar|UnWrap")
                              : Q_ ("ButtonBar|Wrap"), keymap, WIDGET (view));
         buttonbar_set_label (b, 4, Q_ ("ButtonBar|Hex"), keymap, WIDGET (view));
         buttonbar_set_label (b, 6, "", keymap, WIDGET (view));
@@ -108,13 +108,13 @@ mcview_set_buttonbar (WView * view)
     }
 
     buttonbar_set_label (b, 5, Q_ ("ButtonBar|Goto"), keymap, WIDGET (view));
-    buttonbar_set_label (b, 8, view->magic_mode ? Q_ ("ButtonBar|Raw")
+    buttonbar_set_label (b, 8, view->mode_flags.magic ? Q_ ("ButtonBar|Raw")
                          : Q_ ("ButtonBar|Parse"), keymap, WIDGET (view));
 
     if (!mcview_is_in_panel (view))     /* don't override some panel buttonbar keys  */
     {
         buttonbar_set_label (b, 3, Q_ ("ButtonBar|Quit"), keymap, WIDGET (view));
-        buttonbar_set_label (b, 9, view->text_nroff_mode ? Q_ ("ButtonBar|Unform")
+        buttonbar_set_label (b, 9, view->mode_flags.nroff ? Q_ ("ButtonBar|Unform")
                              : Q_ ("ButtonBar|Format"), keymap, WIDGET (view));
         buttonbar_set_label (b, 10, Q_ ("ButtonBar|Quit"), keymap, WIDGET (view));
     }
@@ -165,7 +165,7 @@ mcview_display_status (WView * view)
     if (width > 40)
     {
         widget_move (view, top, width - 32);
-        if (view->hex_mode)
+        if (view->mode_flags.hex)
             tty_printf ("0x%08" PRIxMAX, (uintmax_t) view->hex_cursor);
         else
         {
@@ -188,7 +188,7 @@ mcview_display_status (WView * view)
     else
         tty_print_string (str_fit_to_term (file_label, width - 5, J_LEFT_FIT));
     if (width > 26)
-        mcview_display_percent (view, view->hex_mode ? view->hex_cursor : view->dpy_end);
+        mcview_display_percent (view, view->mode_flags.hex ? view->hex_cursor : view->dpy_end);
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -244,14 +244,10 @@ mcview_update (WView * view)
 void
 mcview_display (WView * view)
 {
-    if (view->hex_mode)
-    {
+    if (view->mode_flags.hex)
         mcview_display_hex (view);
-    }
     else
-    {
         mcview_display_text (view);
-    }
     mcview_display_status (view);
 }
 
@@ -285,7 +281,7 @@ mcview_compute_areas (WView * view)
     view->status_area.height = height;
     rest -= height;
 
-    height = (ruler == RULER_NONE || view->hex_mode) ? 0 : 2;
+    height = (ruler == RULER_NONE || view->mode_flags.hex) ? 0 : 2;
     height = MIN (rest, height);
     view->ruler_area.height = height;
     rest -= height;
diff -urpN mc-4.8.20/src/viewer/growbuf.c mc-4.8.21/src/viewer/growbuf.c
--- mc-4.8.20/src/viewer/growbuf.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/viewer/growbuf.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Function for work with growing bufers
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/viewer/hex.c mc-4.8.21/src/viewer/hex.c
--- mc-4.8.20/src/viewer/hex.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/viewer/hex.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Function for hex view
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/src/viewer/internal.h mc-4.8.21/src/viewer/internal.h
--- mc-4.8.20/src/viewer/internal.h	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/viewer/internal.h	2018-05-27 21:56:21.000000000 +0200
@@ -134,13 +134,13 @@ struct WView
                                    growing buffer */
     gboolean growbuf_finished;  /* TRUE when all data has been read. */
 
-    /* Editor modes */
-    gboolean hex_mode;          /* Hexview or Hexedit */
-    gboolean hexedit_mode;      /* Hexedit */
+    mcview_mode_flags_t mode_flags;
+
+    /* Hex editor modes */
+    gboolean hexedit_mode;      /* Hexview or Hexedit */
     gboolean hexview_in_text;   /* Is the hexview cursor in the text area? */
-    gboolean text_nroff_mode;   /* Nroff-style highlighting */
-    gboolean text_wrap_mode;    /* Wrap text lines to fit them on the screen */
-    gboolean magic_mode;        /* Preprocess the file using external programs */
+    int bytes_per_line;         /* Number of bytes per line in hex mode */
+    off_t hex_cursor;           /* Hexview cursor position in file */
     gboolean hexedit_lownibble; /* Are we editing the last significant nibble? */
     gboolean locked;            /* We hold lock on current file */
 
@@ -160,7 +160,6 @@ struct WView
     gboolean dpy_wrap_dirty;    /* dpy_state_top needs to be recomputed */
     off_t dpy_text_column;      /* Number of skipped columns in non-wrap
                                  * text mode */
-    off_t hex_cursor;           /* Hexview cursor position in file */
     screen_dimen cursor_col;    /* Cursor column */
     screen_dimen cursor_row;    /* Cursor row */
     struct hexedit_change_node *change_list;    /* Linked list of changes */
@@ -173,31 +172,25 @@ struct WView
     int dirty;                  /* Number of skipped updates */
     gboolean dpy_bbar_dirty;    /* Does the button bar need to be updated? */
 
-    /* Mode variables */
-    int bytes_per_line;         /* Number of bytes per line in hex mode */
 
-    /* Search variables */
+    /* handle of search engine */
+    mc_search_t *search;
+    gchar *last_search_string;
+    struct mcview_nroff_struct *search_nroff_seq;
     off_t search_start;         /* First character to start searching from */
     off_t search_end;           /* Length of found string or 0 if none was found */
+    int search_numNeedSkipChar;
 
     /* Markers */
     int marker;                 /* mark to use */
     off_t marks[10];            /* 10 marks: 0..9 */
 
-    off_t update_steps;         /* The number of bytes between percent
-                                 * increments */
+    off_t update_steps;         /* The number of bytes between percent increments */
     off_t update_activate;      /* Last point where we updated the status */
 
     /* converter for translation of text */
     GIConv converter;
 
-    /* handle of search engine */
-    mc_search_t *search;
-    gchar *last_search_string;
-    struct mcview_nroff_struct *search_nroff_seq;
-
-    int search_numNeedSkipChar;
-
     GArray *saved_bookmarks;
 
     dir_list *dir;              /* List of current directory files
diff -urpN mc-4.8.20/src/viewer/lib.c mc-4.8.21/src/viewer/lib.c
--- mc-4.8.20/src/viewer/lib.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/viewer/lib.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Common finctions (used from some other mcviewer functions)
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -35,6 +35,7 @@
 
 #include <config.h>
 
+#include <string.h>             /* memset() */
 #include <sys/types.h>
 
 #include "lib/global.h"
@@ -74,8 +75,8 @@ mcview_toggle_magic_mode (WView * view)
     dir_list *dir;
     int *dir_idx;
 
-    mcview_altered_magic_flag = 1;
-    view->magic_mode = !view->magic_mode;
+    mcview_altered_flags.magic = TRUE;
+    view->mode_flags.magic = !view->mode_flags.magic;
 
     /* reinit view */
     filename = g_strdup (vfs_path_as_str (view->filename_vpath));
@@ -101,7 +102,7 @@ mcview_toggle_magic_mode (WView * view)
 void
 mcview_toggle_wrap_mode (WView * view)
 {
-    view->text_wrap_mode = !view->text_wrap_mode;
+    view->mode_flags.wrap = !view->mode_flags.wrap;
     view->dpy_wrap_dirty = TRUE;
     view->dpy_bbar_dirty = TRUE;
     view->dirty++;
@@ -112,8 +113,8 @@ mcview_toggle_wrap_mode (WView * view)
 void
 mcview_toggle_nroff_mode (WView * view)
 {
-    view->text_nroff_mode = !view->text_nroff_mode;
-    mcview_altered_nroff_flag = 1;
+    view->mode_flags.nroff = !view->mode_flags.nroff;
+    mcview_altered_flags.nroff = TRUE;
     view->dpy_wrap_dirty = TRUE;
     view->dpy_bbar_dirty = TRUE;
     view->dirty++;
@@ -124,9 +125,9 @@ mcview_toggle_nroff_mode (WView * view)
 void
 mcview_toggle_hex_mode (WView * view)
 {
-    view->hex_mode = !view->hex_mode;
+    view->mode_flags.hex = !view->mode_flags.hex;
 
-    if (view->hex_mode)
+    if (view->mode_flags.hex)
     {
         view->hex_cursor = view->dpy_start;
         view->dpy_start = mcview_offset_rounddown (view->dpy_start, view->bytes_per_line);
@@ -138,7 +139,7 @@ mcview_toggle_hex_mode (WView * view)
         view->hex_cursor = view->dpy_start;
         widget_want_cursor (WIDGET (view), FALSE);
     }
-    mcview_altered_hex_mode = 1;
+    mcview_altered_flags.hex = TRUE;
     view->dpy_paragraph_skip_lines = 0;
     view->dpy_wrap_dirty = TRUE;
     view->dpy_bbar_dirty = TRUE;
@@ -206,21 +207,16 @@ mcview_done (WView * view)
     if (mcview_remember_file_position && view->filename_vpath != NULL)
     {
         save_file_position (view->filename_vpath, -1, 0,
-                            view->hex_mode ? view->hex_cursor : view->dpy_start,
+                            view->mode_flags.hex ? view->hex_cursor : view->dpy_start,
                             view->saved_bookmarks);
         view->saved_bookmarks = NULL;
     }
 
     /* Write back the global viewer mode */
-    mcview_default_hex_mode = view->hex_mode;
-    mcview_default_nroff_flag = view->text_nroff_mode;
-    mcview_default_magic_flag = view->magic_mode;
-    mcview_global_wrap_mode = view->text_wrap_mode;
+    mcview_global_flags = view->mode_flags;
 
     /* Free memory used by the viewer */
-
     /* view->widget needs no destructor */
-
     vfs_path_free (view->filename_vpath);
     view->filename_vpath = NULL;
     vfs_path_free (view->workdir_vpath);
@@ -417,7 +413,7 @@ mcview_calc_percent (WView * view, off_t
         return (-1);
 
     filesize = mcview_get_filesize (view);
-    if (view->hex_mode && filesize > 0)
+    if (view->mode_flags.hex && filesize > 0)
     {
         /* p can't be beyond the last char, only over that. Compensate for this. */
         filesize--;
@@ -434,3 +430,11 @@ mcview_calc_percent (WView * view, off_t
 }
 
 /* --------------------------------------------------------------------------------------------- */
+
+void
+mcview_clear_mode_flags (mcview_mode_flags_t * flags)
+{
+    memset (flags, 0, sizeof (*flags));
+}
+
+/* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.20/src/viewer/mcviewer.c mc-4.8.21/src/viewer/mcviewer.c
--- mc-4.8.20/src/viewer/mcviewer.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/viewer/mcviewer.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Interface functions
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc
 
    Written by:
@@ -50,14 +50,19 @@
 
 /*** global variables ****************************************************************************/
 
-int mcview_default_hex_mode = 0;
-int mcview_default_nroff_flag = 0;
-gboolean mcview_global_wrap_mode = TRUE;
-int mcview_default_magic_flag = 1;
-
-int mcview_altered_hex_mode = 0;
-int mcview_altered_magic_flag = 0;
-int mcview_altered_nroff_flag = 0;
+mcview_mode_flags_t mcview_global_flags = {
+    .wrap = TRUE,
+    .hex = FALSE,
+    .magic = TRUE,
+    .nroff = FALSE
+};
+
+mcview_mode_flags_t mcview_altered_flags = {
+    .wrap = FALSE,
+    .hex = FALSE,
+    .magic = FALSE,
+    .nroff = FALSE
+};
 
 gboolean mcview_remember_file_position = FALSE;
 
@@ -106,10 +111,10 @@ mcview_mouse_callback (Widget * w, mouse
                 change_panel ();
             }
         }
-        /* fall through */
+        MC_FALLTHROUGH;
 
     case MSG_MOUSE_CLICK:
-        if (!view->text_wrap_mode)
+        if (!view->mode_flags.wrap)
         {
             /* Scrolling left and right */
             screen_dimen x;
@@ -197,26 +202,23 @@ mcview_new (int y, int x, int lines, int
     widget_init (w, y, x, lines, cols, mcview_callback, mcview_mouse_callback);
     w->options |= WOP_SELECTABLE | WOP_TOP_SELECT;
 
-    view->hex_mode = FALSE;
+    mcview_clear_mode_flags (&view->mode_flags);
     view->hexedit_mode = FALSE;
-    view->locked = FALSE;
     view->hexview_in_text = FALSE;
-    view->text_nroff_mode = FALSE;
-    view->text_wrap_mode = FALSE;
-    view->magic_mode = FALSE;
+    view->locked = FALSE;
 
     view->dpy_frame_size = is_panel ? 1 : 0;
     view->converter = str_cnv_from_term;
 
     mcview_init (view);
 
-    if (mcview_default_hex_mode)
+    if (mcview_global_flags.hex)
         mcview_toggle_hex_mode (view);
-    if (mcview_default_nroff_flag)
+    if (mcview_global_flags.nroff)
         mcview_toggle_nroff_mode (view);
-    if (mcview_global_wrap_mode)
+    if (mcview_global_flags.wrap)
         mcview_toggle_wrap_mode (view);
-    if (mcview_default_magic_flag)
+    if (mcview_global_flags.magic)
         mcview_toggle_magic_mode (view);
 
     return view;
@@ -306,7 +308,7 @@ mcview_load (WView * view, const char *c
 
     mcview_set_codeset (view);
 
-    if (command != NULL && (view->magic_mode || file == NULL || file[0] == '\0'))
+    if (command != NULL && (view->mode_flags.magic || file == NULL || file[0] == '\0'))
         retval = mcview_load_command_output (view, command);
     else if (file != NULL && file[0] != '\0')
     {
@@ -364,7 +366,7 @@ mcview_load (WView * view, const char *c
         }
         else
         {
-            if (view->magic_mode)
+            if (view->mode_flags.magic)
             {
                 int type;
 
@@ -426,7 +428,7 @@ mcview_load (WView * view, const char *c
             new_offset = 0;
         else
             new_offset = MIN (new_offset, max_offset);
-        if (!view->hex_mode)
+        if (!view->mode_flags.hex)
         {
             view->dpy_start = mcview_bol (view, new_offset, 0);
             view->dpy_wrap_dirty = TRUE;
diff -urpN mc-4.8.20/src/viewer/mcviewer.h mc-4.8.21/src/viewer/mcviewer.h
--- mc-4.8.20/src/viewer/mcviewer.h	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/viewer/mcviewer.h	2018-05-27 21:56:21.000000000 +0200
@@ -16,16 +16,18 @@
 struct WView;
 typedef struct WView WView;
 
+typedef struct
+{
+    gboolean wrap;              /* Wrap text lines to fit them on the screen */
+    gboolean hex;               /* Plainview or hexview */
+    gboolean magic;             /* Preprocess the file using external programs */
+    gboolean nroff;             /* Nroff-style highlighting */
+} mcview_mode_flags_t;
+
 /*** global variables defined in .c file *********************************************************/
 
-extern int mcview_default_hex_mode;
-extern int mcview_default_nroff_flag;
-extern gboolean mcview_global_wrap_mode;
-extern int mcview_default_magic_flag;
-
-extern int mcview_altered_hex_mode;
-extern int mcview_altered_magic_flag;
-extern int mcview_altered_nroff_flag;
+extern mcview_mode_flags_t mcview_global_flags;
+extern mcview_mode_flags_t mcview_altered_flags;
 
 extern gboolean mcview_remember_file_position;
 extern int mcview_max_dirt_limit;
@@ -49,5 +51,7 @@ extern gboolean mcview_viewer (const cha
 extern gboolean mcview_load (WView * view, const char *command, const char *file, int start_line,
                              off_t search_start, off_t search_end);
 
+extern void mcview_clear_mode_flags (mcview_mode_flags_t * flags);
+
 /*** inline functions ****************************************************************************/
 #endif /* MC__VIEWER_H */
diff -urpN mc-4.8.20/src/viewer/move.c mc-4.8.21/src/viewer/move.c
--- mc-4.8.20/src/viewer/move.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/viewer/move.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Functions for handle cursor movement
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -70,7 +70,7 @@
 static void
 mcview_scroll_to_cursor (WView * view)
 {
-    if (view->hex_mode)
+    if (view->mode_flags.hex)
     {
         off_t bytes = view->bytes_per_line;
         off_t cursor = view->hex_cursor;
@@ -96,7 +96,7 @@ mcview_movement_fixups (WView * view, gb
     mcview_scroll_to_cursor (view);
     if (reset_search)
     {
-        view->search_start = view->hex_mode ? view->hex_cursor : view->dpy_start;
+        view->search_start = view->mode_flags.hex ? view->hex_cursor : view->dpy_start;
         view->search_end = view->search_start;
     }
     view->dirty++;
@@ -109,9 +109,10 @@ mcview_movement_fixups (WView * view, gb
 void
 mcview_move_up (WView * view, off_t lines)
 {
-    if (view->hex_mode)
+    if (view->mode_flags.hex)
     {
         off_t bytes = lines * view->bytes_per_line;
+
         if (view->hex_cursor >= bytes)
         {
             view->hex_cursor -= bytes;
@@ -140,8 +141,10 @@ void
 mcview_move_down (WView * view, off_t lines)
 {
     off_t last_byte;
+
     last_byte = mcview_get_filesize (view);
-    if (view->hex_mode)
+
+    if (view->mode_flags.hex)
     {
         off_t i, limit;
 
@@ -170,7 +173,7 @@ mcview_move_down (WView * view, off_t li
 void
 mcview_move_left (WView * view, off_t columns)
 {
-    if (view->hex_mode)
+    if (view->mode_flags.hex)
     {
         off_t old_cursor = view->hex_cursor;
 
@@ -185,7 +188,7 @@ mcview_move_left (WView * view, off_t co
             if (old_cursor > 0 || view->hexedit_lownibble)
                 view->hexedit_lownibble = !view->hexedit_lownibble;
     }
-    else if (!view->text_wrap_mode)
+    else if (!view->mode_flags.wrap)
         view->dpy_text_column = mcview_offset_doz (view->dpy_text_column, columns);
     mcview_movement_fixups (view, FALSE);
 }
@@ -195,7 +198,7 @@ mcview_move_left (WView * view, off_t co
 void
 mcview_move_right (WView * view, off_t columns)
 {
-    if (view->hex_mode)
+    if (view->mode_flags.hex)
     {
         off_t last_byte;
         off_t old_cursor = view->hex_cursor;
@@ -213,7 +216,7 @@ mcview_move_right (WView * view, off_t c
             if (old_cursor < last_byte || !view->hexedit_lownibble)
                 view->hexedit_lownibble = !view->hexedit_lownibble;
     }
-    else if (!view->text_wrap_mode)
+    else if (!view->mode_flags.wrap)
     {
         view->dpy_text_column += columns;
     }
@@ -247,7 +250,7 @@ mcview_moveto_bottom (WView * view)
 
     filesize = mcview_get_filesize (view);
 
-    if (view->hex_mode)
+    if (view->mode_flags.hex)
     {
         view->hex_cursor = mcview_offset_doz (filesize, 1);
         mcview_movement_fixups (view, TRUE);
@@ -268,7 +271,7 @@ mcview_moveto_bottom (WView * view)
 void
 mcview_moveto_bol (WView * view)
 {
-    if (view->hex_mode)
+    if (view->mode_flags.hex)
     {
         view->hex_cursor -= view->hex_cursor % view->bytes_per_line;
         view->dpy_text_column = 0;
@@ -286,7 +289,8 @@ void
 mcview_moveto_eol (WView * view)
 {
     off_t bol;
-    if (view->hex_mode)
+
+    if (view->mode_flags.hex)
     {
         off_t filesize;
 
@@ -313,7 +317,7 @@ mcview_moveto_eol (WView * view)
 void
 mcview_moveto_offset (WView * view, off_t offset)
 {
-    if (view->hex_mode)
+    if (view->mode_flags.hex)
     {
         view->hex_cursor = offset;
         view->dpy_start = offset - offset % view->bytes_per_line;
@@ -365,7 +369,7 @@ mcview_offset_to_coord (WView * view, of
     mcview_ccache_lookup (view, &coord, CCACHE_LINECOL);
 
     *ret_line = coord.cc_line;
-    *ret_column = (view->text_nroff_mode) ? coord.cc_nroff_column : coord.cc_column;
+    *ret_column = view->mode_flags.nroff ? coord.cc_nroff_column : coord.cc_column;
 }
 
 /* --------------------------------------------------------------------------------------------- */
@@ -389,7 +393,7 @@ mcview_place_cursor (WView * view)
 void
 mcview_moveto_match (WView * view)
 {
-    if (view->hex_mode)
+    if (view->mode_flags.hex)
     {
         view->hex_cursor = view->search_start;
         view->hexedit_lownibble = FALSE;
diff -urpN mc-4.8.20/src/viewer/nroff.c mc-4.8.21/src/viewer/nroff.c
--- mc-4.8.20/src/viewer/nroff.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/src/viewer/nroff.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Functions for searching in nroff-like view
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -97,7 +97,7 @@ mcview__get_nroff_real_len (WView * view
     int ret = 0;
     off_t i = 0;
 
-    if (!view->text_nroff_mode)
+    if (!view->mode_flags.nroff)
         return 0;
 
     nroff = mcview_nroff_seq_new_num (view, start);
diff -urpN mc-4.8.20/src/viewer/search.c mc-4.8.21/src/viewer/search.c
--- mc-4.8.20/src/viewer/search.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/src/viewer/search.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    Internal file viewer for the Midnight Commander
    Function for search data
 
-   Copyright (C) 1994-2017
+   Copyright (C) 1994-2018
    Free Software Foundation, Inc.
 
    Written by:
@@ -148,7 +148,7 @@ mcview_find (mcview_search_status_msg_t
             ok = mc_search_run (view->search, (void *) ssm, search_start, search_end, len);
             if (ok && view->search->normal_offset == search_start)
             {
-                if (view->text_nroff_mode)
+                if (view->mode_flags.nroff)
                     view->search->normal_offset++;
                 return TRUE;
             }
@@ -178,17 +178,17 @@ mcview_search_show_result (WView * view,
     int nroff_len;
 
     nroff_len =
-        view->text_nroff_mode
+        view->mode_flags.nroff
         ? mcview__get_nroff_real_len (view, view->search->start_buffer,
                                       view->search->normal_offset - view->search->start_buffer) : 0;
     view->search_start = view->search->normal_offset + nroff_len;
 
-    if (!view->hex_mode)
+    if (!view->mode_flags.hex)
         view->search_start++;
 
     nroff_len =
-        view->text_nroff_mode ? mcview__get_nroff_real_len (view, view->search_start - 1,
-                                                            match_len) : 0;
+        view->mode_flags.nroff ? mcview__get_nroff_real_len (view, view->search_start - 1,
+                                                             match_len) : 0;
     view->search_end = view->search_start + match_len + nroff_len;
 
     mcview_moveto_match (view);
@@ -204,7 +204,7 @@ mcview_search_cmd_callback (const void *
     WView *view = ((const mcview_search_status_msg_t *) user_data)->view;
 
     /*    view_read_continue (view, &view->search_onechar_info); *//* AB:FIXME */
-    if (!view->text_nroff_mode)
+    if (!view->mode_flags.nroff)
     {
         mcview_get_byte (view, char_offset, current_char);
         return MC_SEARCH_CB_OK;
@@ -309,7 +309,7 @@ mcview_do_search (WView * view, off_t wa
 
     if (view->search_start != 0)
     {
-        if (!view->text_nroff_mode)
+        if (!view->mode_flags.nroff)
             search_start = view->search_start + (mcview_search_options.backwards ? -2 : 0);
         else
         {
diff -urpN mc-4.8.20/tests/Makefile.in mc-4.8.21/tests/Makefile.in
--- mc-4.8.20/tests/Makefile.in	2017-11-25 19:33:54.000000000 +0100
+++ mc-4.8.21/tests/Makefile.in	2018-06-03 10:57:34.000000000 +0200
@@ -112,6 +112,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -119,6 +120,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/tests/lib/Makefile.am mc-4.8.21/tests/lib/Makefile.am
--- mc-4.8.20/tests/lib/Makefile.am	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/tests/lib/Makefile.am	2018-05-27 21:56:21.000000000 +0200
@@ -6,7 +6,12 @@ AM_CPPFLAGS = $(GLIB_CFLAGS) -I$(top_src
 
 AM_LDFLAGS = @TESTS_LDFLAGS@
 
-LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la
+LIBS = @CHECK_LIBS@ \
+	$(top_builddir)/lib/libmc.la
+
+if ENABLE_MCLIB
+LIBS += $(GLIB_LIBS)
+endif
 
 EXTRA_DIST = utilunix__my_system-common.c
 
@@ -20,6 +25,10 @@ TESTS = \
 	utilunix__my_system_fork_child \
 	x_basename
 
+if CHARSET
+TESTS += mc_realpath
+endif
+
 check_PROGRAMS = $(TESTS)
 
 library_independ_SOURCES = \
@@ -28,6 +37,9 @@ library_independ_SOURCES = \
 mc_build_filename_SOURCES = \
 	mc_build_filename.c
 
+mc_realpath_SOURCES = \
+	mc_realpath.c
+
 name_quote_SOURCES = \
 	name_quote.c
 
diff -urpN mc-4.8.20/tests/lib/Makefile.in mc-4.8.21/tests/lib/Makefile.in
--- mc-4.8.20/tests/lib/Makefile.in	2017-11-25 19:33:54.000000000 +0100
+++ mc-4.8.21/tests/lib/Makefile.in	2018-06-03 10:57:34.000000000 +0200
@@ -87,12 +87,15 @@ PRE_UNINSTALL = :
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
+@ENABLE_MCLIB_TRUE@am__append_1 = $(GLIB_LIBS)
 TESTS = library_independ$(EXEEXT) mc_build_filename$(EXEEXT) \
 	name_quote$(EXEEXT) serialize$(EXEEXT) \
 	utilunix__my_system_fork_fail$(EXEEXT) \
 	utilunix__my_system_fork_child_shell$(EXEEXT) \
-	utilunix__my_system_fork_child$(EXEEXT) x_basename$(EXEEXT)
-check_PROGRAMS = $(am__EXEEXT_1)
+	utilunix__my_system_fork_child$(EXEEXT) x_basename$(EXEEXT) \
+	$(am__EXEEXT_1)
+@CHARSET_TRUE@am__append_2 = mc_realpath
+check_PROGRAMS = $(am__EXEEXT_2)
 subdir = tests/lib
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 am__aclocal_m4_deps = $(top_srcdir)/m4/codeset.m4 \
@@ -118,6 +121,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -125,6 +129,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
@@ -159,11 +165,13 @@ mkinstalldirs = $(install_sh) -d
 CONFIG_HEADER = $(top_builddir)/config.h
 CONFIG_CLEAN_FILES =
 CONFIG_CLEAN_VPATH_FILES =
-am__EXEEXT_1 = library_independ$(EXEEXT) mc_build_filename$(EXEEXT) \
+@CHARSET_TRUE@am__EXEEXT_1 = mc_realpath$(EXEEXT)
+am__EXEEXT_2 = library_independ$(EXEEXT) mc_build_filename$(EXEEXT) \
 	name_quote$(EXEEXT) serialize$(EXEEXT) \
 	utilunix__my_system_fork_fail$(EXEEXT) \
 	utilunix__my_system_fork_child_shell$(EXEEXT) \
-	utilunix__my_system_fork_child$(EXEEXT) x_basename$(EXEEXT)
+	utilunix__my_system_fork_child$(EXEEXT) x_basename$(EXEEXT) \
+	$(am__EXEEXT_1)
 am_library_independ_OBJECTS = library_independ.$(OBJEXT)
 library_independ_OBJECTS = $(am_library_independ_OBJECTS)
 library_independ_LDADD = $(LDADD)
@@ -174,6 +182,9 @@ am__v_lt_1 =
 am_mc_build_filename_OBJECTS = mc_build_filename.$(OBJEXT)
 mc_build_filename_OBJECTS = $(am_mc_build_filename_OBJECTS)
 mc_build_filename_LDADD = $(LDADD)
+am_mc_realpath_OBJECTS = mc_realpath.$(OBJEXT)
+mc_realpath_OBJECTS = $(am_mc_realpath_OBJECTS)
+mc_realpath_LDADD = $(LDADD)
 am_name_quote_OBJECTS = name_quote.$(OBJEXT)
 name_quote_OBJECTS = $(am_name_quote_OBJECTS)
 name_quote_LDADD = $(LDADD)
@@ -233,13 +244,14 @@ am__v_CCLD_ = $(am__v_CCLD_@AM_DEFAULT_V
 am__v_CCLD_0 = @echo "  CCLD    " $@;
 am__v_CCLD_1 = 
 SOURCES = $(library_independ_SOURCES) $(mc_build_filename_SOURCES) \
-	$(name_quote_SOURCES) $(serialize_SOURCES) \
-	$(utilunix__my_system_fork_child_SOURCES) \
+	$(mc_realpath_SOURCES) $(name_quote_SOURCES) \
+	$(serialize_SOURCES) $(utilunix__my_system_fork_child_SOURCES) \
 	$(utilunix__my_system_fork_child_shell_SOURCES) \
 	$(utilunix__my_system_fork_fail_SOURCES) $(x_basename_SOURCES)
 DIST_SOURCES = $(library_independ_SOURCES) \
-	$(mc_build_filename_SOURCES) $(name_quote_SOURCES) \
-	$(serialize_SOURCES) $(utilunix__my_system_fork_child_SOURCES) \
+	$(mc_build_filename_SOURCES) $(mc_realpath_SOURCES) \
+	$(name_quote_SOURCES) $(serialize_SOURCES) \
+	$(utilunix__my_system_fork_child_SOURCES) \
 	$(utilunix__my_system_fork_child_shell_SOURCES) \
 	$(utilunix__my_system_fork_fail_SOURCES) $(x_basename_SOURCES)
 RECURSIVE_TARGETS = all-recursive check-recursive cscopelist-recursive \
@@ -616,7 +628,7 @@ LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
 LIBPTH = @LIBPTH@
 LIBPTH_PREFIX = @LIBPTH_PREFIX@
-LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la
+LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
 LIBTHREAD = @LIBTHREAD@
@@ -755,6 +767,9 @@ library_independ_SOURCES = \
 mc_build_filename_SOURCES = \
 	mc_build_filename.c
 
+mc_realpath_SOURCES = \
+	mc_realpath.c
+
 name_quote_SOURCES = \
 	name_quote.c
 
@@ -824,6 +839,10 @@ mc_build_filename$(EXEEXT): $(mc_build_f
 	@rm -f mc_build_filename$(EXEEXT)
 	$(AM_V_CCLD)$(LINK) $(mc_build_filename_OBJECTS) $(mc_build_filename_LDADD) $(LIBS)
 
+mc_realpath$(EXEEXT): $(mc_realpath_OBJECTS) $(mc_realpath_DEPENDENCIES) $(EXTRA_mc_realpath_DEPENDENCIES) 
+	@rm -f mc_realpath$(EXEEXT)
+	$(AM_V_CCLD)$(LINK) $(mc_realpath_OBJECTS) $(mc_realpath_LDADD) $(LIBS)
+
 name_quote$(EXEEXT): $(name_quote_OBJECTS) $(name_quote_DEPENDENCIES) $(EXTRA_name_quote_DEPENDENCIES) 
 	@rm -f name_quote$(EXEEXT)
 	$(AM_V_CCLD)$(LINK) $(name_quote_OBJECTS) $(name_quote_LDADD) $(LIBS)
@@ -856,6 +875,7 @@ distclean-compile:
 
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/library_independ.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mc_build_filename.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mc_realpath.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/name_quote.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/serialize.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utilunix__my_system-fork_child.Po@am__quote@
@@ -1185,6 +1205,13 @@ x_basename.log: x_basename$(EXEEXT)
 	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
 	--log-file $$b.log --trs-file $$b.trs \
 	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
+	"$$tst" $(AM_TESTS_FD_REDIRECT)
+mc_realpath.log: mc_realpath$(EXEEXT)
+	@p='mc_realpath$(EXEEXT)'; \
+	b='mc_realpath'; \
+	$(am__check_pre) $(LOG_DRIVER) --test-name "$$f" \
+	--log-file $$b.log --trs-file $$b.trs \
+	$(am__common_driver_flags) $(AM_LOG_DRIVER_FLAGS) $(LOG_DRIVER_FLAGS) -- $(LOG_COMPILE) \
 	"$$tst" $(AM_TESTS_FD_REDIRECT)
 .test.log:
 	@p='$<'; \
diff -urpN mc-4.8.20/tests/lib/library_independ.c mc-4.8.21/tests/lib/library_independ.c
--- mc-4.8.20/tests/lib/library_independ.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/library_independ.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    libmc - check if library is independ to $(topsrc)/src directory
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/mc_build_filename.c mc-4.8.21/tests/lib/mc_build_filename.c
--- mc-4.8.20/tests/lib/mc_build_filename.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/mc_build_filename.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - mc_build_filename() function testing
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/mc_realpath.c mc-4.8.21/tests/lib/mc_realpath.c
--- mc-4.8.20/tests/lib/mc_realpath.c	1970-01-01 01:00:00.000000000 +0100
+++ mc-4.8.21/tests/lib/mc_realpath.c	2018-05-27 21:56:21.000000000 +0200
@@ -0,0 +1,139 @@
+/*
+   lib - realpath
+
+   Copyright (C) 2017-2018
+   Free Software Foundation, Inc.
+
+   Written by:
+   Andrew Borodin <aborodin@vmail.ru>, 2017
+
+   This file is part of the Midnight Commander.
+
+   The Midnight Commander is free software: you can redistribute it
+   and/or modify it under the terms of the GNU General Public License as
+   published by the Free Software Foundation, either version 3 of the License,
+   or (at your option) any later version.
+
+   The Midnight Commander is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.
+
+   You should have received a copy of the GNU General Public License
+   along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ */
+
+#define TEST_SUITE_NAME "/lib/util"
+
+#include "tests/mctest.h"
+
+#include "lib/strutil.h"
+#include "lib/vfs/vfs.h"        /* VFS_ENCODING_PREFIX, vfs_init(), vfs_shut() */
+#include "src/vfs/local/local.c"
+
+#include "lib/util.h"           /* mc_realpath() */
+
+/* --------------------------------------------------------------------------------------------- */
+
+static char resolved_path[PATH_MAX];
+
+/* --------------------------------------------------------------------------------------------- */
+
+/* @Before */
+static void
+setup (void)
+{
+    str_init_strings (NULL);
+    vfs_init ();
+    init_localfs ();
+    vfs_setup_work_dir ();
+}
+
+/* @After */
+static void
+teardown (void)
+{
+    vfs_shut ();
+    str_uninit_strings ();
+}
+
+/* --------------------------------------------------------------------------------------------- */
+
+/* @DataSource("data_source") */
+/* *INDENT-OFF* */
+static const struct data_source
+{
+    const char *input_string;
+    const char *expected_string;
+} data_source[] =
+{
+    /* absolute paths */
+    { "/", "/"},
+    { "/" VFS_ENCODING_PREFIX "UTF-8/", "/" },
+    { "/usr/bin", "/usr/bin" },
+    { "/" VFS_ENCODING_PREFIX "UTF-8/usr/bin", "/usr/bin" },
+
+    /* relative paths are relative to / */
+    { VFS_ENCODING_PREFIX "UTF-8/", "/" },
+    { "usr/bin", "/usr/bin" },
+    { VFS_ENCODING_PREFIX "UTF-8/usr/bin", "/usr/bin" }
+};
+/* *INDENT-ON* */
+
+/* @Test(dataSource = "data_source") */
+/* *INDENT-OFF* */
+START_PARAMETRIZED_TEST (realpath_test, data_source)
+/* *INDENT-ON* */
+{
+    int ret;
+
+    /* realpath(3) produces a canonicalized absolute pathname using curent directory.
+     * Change the current directory to produce correct pathname. */
+    ret = chdir ("/");
+
+    /* when */
+    if (mc_realpath (data->input_string, resolved_path) == NULL)
+        resolved_path[0] = '\0';
+
+    /* then */
+    mctest_assert_str_eq (resolved_path, data->expected_string);
+
+    (void) ret;
+}
+/* *INDENT-OFF* */
+END_PARAMETRIZED_TEST
+/* *INDENT-ON* */
+
+/* --------------------------------------------------------------------------------------------- */
+
+int
+main (void)
+{
+    int number_failed;
+    char *cwd, *logname;
+
+    Suite *s = suite_create (TEST_SUITE_NAME);
+    TCase *tc_core = tcase_create ("Core");
+    SRunner *sr;
+
+    cwd = g_get_current_dir ();
+    logname = g_strconcat (cwd, "realpath.log", (char *) NULL);
+    g_free (cwd);
+
+    tcase_add_checked_fixture (tc_core, setup, teardown);
+
+    /* Add new tests here: *************** */
+    mctest_add_parameterized_test (tc_core, realpath_test, data_source);
+    /* *********************************** */
+
+    suite_add_tcase (s, tc_core);
+    sr = srunner_create (s);
+    srunner_set_log (sr, logname);
+    srunner_run_all (sr, CK_ENV);
+    number_failed = srunner_ntests_failed (sr);
+    srunner_free (sr);
+    g_free (logname);
+    return (number_failed == 0) ? EXIT_SUCCESS : EXIT_FAILURE;
+}
+
+/* --------------------------------------------------------------------------------------------- */
diff -urpN mc-4.8.20/tests/lib/mcconfig/Makefile.am mc-4.8.21/tests/lib/mcconfig/Makefile.am
--- mc-4.8.20/tests/lib/mcconfig/Makefile.am	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/tests/lib/mcconfig/Makefile.am	2018-05-27 21:56:21.000000000 +0200
@@ -8,7 +8,12 @@ AM_CPPFLAGS = \
 
 AM_LDFLAGS = @TESTS_LDFLAGS@
 
-LIBS=@CHECK_LIBS@  $(top_builddir)/lib/libmc.la
+LIBS = @CHECK_LIBS@ \
+	$(top_builddir)/lib/libmc.la
+
+if ENABLE_MCLIB
+LIBS += $(GLIB_LIBS)
+endif
 
 TESTS = \
 	config_string \
diff -urpN mc-4.8.20/tests/lib/mcconfig/Makefile.in mc-4.8.21/tests/lib/mcconfig/Makefile.in
--- mc-4.8.20/tests/lib/mcconfig/Makefile.in	2017-11-25 19:33:54.000000000 +0100
+++ mc-4.8.21/tests/lib/mcconfig/Makefile.in	2018-06-03 10:57:34.000000000 +0200
@@ -87,6 +87,7 @@ PRE_UNINSTALL = :
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
+@ENABLE_MCLIB_TRUE@am__append_1 = $(GLIB_LIBS)
 TESTS = config_string$(EXEEXT) user_configs_path$(EXEEXT)
 check_PROGRAMS = $(am__EXEEXT_1)
 subdir = tests/lib/mcconfig
@@ -114,6 +115,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -121,6 +123,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
@@ -535,7 +539,7 @@ LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
 LIBPTH = @LIBPTH@
 LIBPTH_PREFIX = @LIBPTH_PREFIX@
-LIBS = @CHECK_LIBS@  $(top_builddir)/lib/libmc.la
+LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
 LIBTHREAD = @LIBTHREAD@
diff -urpN mc-4.8.20/tests/lib/mcconfig/config_string.c mc-4.8.21/tests/lib/mcconfig/config_string.c
--- mc-4.8.20/tests/lib/mcconfig/config_string.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/mcconfig/config_string.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    libmc - check mcconfig submodule. read and write config files
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/mcconfig/user_configs_path.c mc-4.8.21/tests/lib/mcconfig/user_configs_path.c
--- mc-4.8.20/tests/lib/mcconfig/user_configs_path.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/mcconfig/user_configs_path.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    libmc - check mcconfig submodule. Get full paths to user's config files.
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/name_quote.c mc-4.8.21/tests/lib/name_quote.c
--- mc-4.8.20/tests/lib/name_quote.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/name_quote.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - Quote file names
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/search/Makefile.am mc-4.8.21/tests/lib/search/Makefile.am
--- mc-4.8.20/tests/lib/search/Makefile.am	2017-03-04 18:26:20.000000000 +0100
+++ mc-4.8.21/tests/lib/search/Makefile.am	2018-05-27 21:56:21.000000000 +0200
@@ -7,7 +7,12 @@ AM_CPPFLAGS = \
 	@CHECK_CFLAGS@ \
 	@PCRE_CPPFLAGS@
 
-LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la @PCRE_LIBS@
+LIBS = @CHECK_LIBS@ \
+	$(top_builddir)/lib/libmc.la @PCRE_LIBS@
+
+if ENABLE_MCLIB
+LIBS += $(GLIB_LIBS)
+endif
 
 TESTS = \
 	glob_prepare_replace_str \
diff -urpN mc-4.8.20/tests/lib/search/Makefile.in mc-4.8.21/tests/lib/search/Makefile.in
--- mc-4.8.20/tests/lib/search/Makefile.in	2017-11-25 19:33:54.000000000 +0100
+++ mc-4.8.21/tests/lib/search/Makefile.in	2018-06-03 10:57:35.000000000 +0200
@@ -87,6 +87,7 @@ PRE_UNINSTALL = :
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
+@ENABLE_MCLIB_TRUE@am__append_1 = $(GLIB_LIBS)
 TESTS = glob_prepare_replace_str$(EXEEXT) \
 	glob_translate_to_regex$(EXEEXT) \
 	hex_translate_to_regex$(EXEEXT) regex_replace_esc_seq$(EXEEXT) \
@@ -118,6 +119,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -125,6 +127,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
@@ -573,7 +577,8 @@ LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
 LIBPTH = @LIBPTH@
 LIBPTH_PREFIX = @LIBPTH_PREFIX@
-LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la @PCRE_LIBS@
+LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la @PCRE_LIBS@ \
+	$(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
 LIBTHREAD = @LIBTHREAD@
diff -urpN mc-4.8.20/tests/lib/search/glob_prepare_replace_str.c mc-4.8.21/tests/lib/search/glob_prepare_replace_str.c
--- mc-4.8.20/tests/lib/search/glob_prepare_replace_str.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/search/glob_prepare_replace_str.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    libmc - checks for processing esc sequences in replace string
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/search/glob_translate_to_regex.c mc-4.8.21/tests/lib/search/glob_translate_to_regex.c
--- mc-4.8.20/tests/lib/search/glob_translate_to_regex.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/search/glob_translate_to_regex.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    libmc - checks for processing esc sequences in replace string
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/search/hex_translate_to_regex.c mc-4.8.21/tests/lib/search/hex_translate_to_regex.c
--- mc-4.8.20/tests/lib/search/hex_translate_to_regex.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/search/hex_translate_to_regex.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    libmc - checks for hex pattern parsing
 
-   Copyright (C) 2017
+   Copyright (C) 2017-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/tests/lib/search/regex_process_escape_sequence.c mc-4.8.21/tests/lib/search/regex_process_escape_sequence.c
--- mc-4.8.20/tests/lib/search/regex_process_escape_sequence.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/search/regex_process_escape_sequence.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    libmc - checks for processing esc sequences in replace string
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/search/regex_replace_esc_seq.c mc-4.8.21/tests/lib/search/regex_replace_esc_seq.c
--- mc-4.8.20/tests/lib/search/regex_replace_esc_seq.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/search/regex_replace_esc_seq.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    libmc - checks for processing esc sequences in replace string
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/search/translate_replace_glob_to_regex.c mc-4.8.21/tests/lib/search/translate_replace_glob_to_regex.c
--- mc-4.8.20/tests/lib/search/translate_replace_glob_to_regex.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/search/translate_replace_glob_to_regex.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    libmc - checks for processing esc sequences in replace string
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/serialize.c mc-4.8.21/tests/lib/serialize.c
--- mc-4.8.20/tests/lib/serialize.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/serialize.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - common serialize/deserialize functions
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/strutil/Makefile.am mc-4.8.21/tests/lib/strutil/Makefile.am
--- mc-4.8.20/tests/lib/strutil/Makefile.am	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/tests/lib/strutil/Makefile.am	2018-05-27 21:56:21.000000000 +0200
@@ -6,7 +6,12 @@ AM_CPPFLAGS = \
 	-I$(top_srcdir)/lib/search \
 	@CHECK_CFLAGS@
 
-LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la
+LIBS = @CHECK_LIBS@ \
+	$(top_builddir)/lib/libmc.la
+
+if ENABLE_MCLIB
+LIBS += $(GLIB_LIBS)
+endif
 
 TESTS = \
 	replace__str_replace_all \
diff -urpN mc-4.8.20/tests/lib/strutil/Makefile.in mc-4.8.21/tests/lib/strutil/Makefile.in
--- mc-4.8.20/tests/lib/strutil/Makefile.in	2017-11-25 19:33:54.000000000 +0100
+++ mc-4.8.21/tests/lib/strutil/Makefile.in	2018-06-03 10:57:35.000000000 +0200
@@ -87,6 +87,7 @@ PRE_UNINSTALL = :
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
+@ENABLE_MCLIB_TRUE@am__append_1 = $(GLIB_LIBS)
 TESTS = replace__str_replace_all$(EXEEXT) parse_integer$(EXEEXT)
 check_PROGRAMS = $(am__EXEEXT_1)
 subdir = tests/lib/strutil
@@ -114,6 +115,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -121,6 +123,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
@@ -539,7 +543,7 @@ LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
 LIBPTH = @LIBPTH@
 LIBPTH_PREFIX = @LIBPTH_PREFIX@
-LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la
+LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
 LIBTHREAD = @LIBTHREAD@
diff -urpN mc-4.8.20/tests/lib/strutil/parse_integer.c mc-4.8.21/tests/lib/strutil/parse_integer.c
--- mc-4.8.20/tests/lib/strutil/parse_integer.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/strutil/parse_integer.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/strutil - tests for lib/strutil/parse_integer function.
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/strutil/replace__str_replace_all.c mc-4.8.21/tests/lib/strutil/replace__str_replace_all.c
--- mc-4.8.20/tests/lib/strutil/replace__str_replace_all.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/strutil/replace__str_replace_all.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/strutil - tests for lib/strutil/replace:str_replace_all() function.
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/utilunix__my_system-common.c mc-4.8.21/tests/lib/utilunix__my_system-common.c
--- mc-4.8.20/tests/lib/utilunix__my_system-common.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/utilunix__my_system-common.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib - common code for testing lib/utilinux:my_system() function
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/utilunix__my_system-fork_child.c mc-4.8.21/tests/lib/utilunix__my_system-fork_child.c
--- mc-4.8.20/tests/lib/utilunix__my_system-fork_child.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/utilunix__my_system-fork_child.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib - tests lib/utilinux:my_system() function
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/utilunix__my_system-fork_child_shell.c mc-4.8.21/tests/lib/utilunix__my_system-fork_child_shell.c
--- mc-4.8.20/tests/lib/utilunix__my_system-fork_child_shell.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/utilunix__my_system-fork_child_shell.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib - tests lib/utilinux:my_system() function
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/utilunix__my_system-fork_fail.c mc-4.8.21/tests/lib/utilunix__my_system-fork_fail.c
--- mc-4.8.20/tests/lib/utilunix__my_system-fork_fail.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/utilunix__my_system-fork_fail.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib - tests lib/utilinux:my_system() function
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/Makefile.am mc-4.8.21/tests/lib/vfs/Makefile.am
--- mc-4.8.20/tests/lib/vfs/Makefile.am	2017-03-04 18:26:20.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/Makefile.am	2018-05-27 21:56:21.000000000 +0200
@@ -11,8 +11,12 @@ AM_LDFLAGS = @TESTS_LDFLAGS@
 
 EXTRA_DIST = mc.charsets
 
-LIBS=@CHECK_LIBS@  \
-    $(top_builddir)/lib/libmc.la
+LIBS = @CHECK_LIBS@ \
+	$(top_builddir)/lib/libmc.la
+
+if ENABLE_MCLIB
+LIBS += $(GLIB_LIBS)
+endif
 
 TESTS = \
 	canonicalize_pathname \
diff -urpN mc-4.8.20/tests/lib/vfs/Makefile.in mc-4.8.21/tests/lib/vfs/Makefile.in
--- mc-4.8.20/tests/lib/vfs/Makefile.in	2017-11-25 19:33:55.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/Makefile.in	2018-06-03 10:57:35.000000000 +0200
@@ -87,6 +87,7 @@ PRE_UNINSTALL = :
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
+@ENABLE_MCLIB_TRUE@am__append_1 = $(GLIB_LIBS)
 TESTS = canonicalize_pathname$(EXEEXT) current_dir$(EXEEXT) \
 	path_cmp$(EXEEXT) path_len$(EXEEXT) \
 	path_manipulations$(EXEEXT) path_serialize$(EXEEXT) \
@@ -95,7 +96,7 @@ TESTS = canonicalize_pathname$(EXEEXT) c
 	vfs_path_string_convert$(EXEEXT) vfs_prefix_to_class$(EXEEXT) \
 	vfs_setup_cwd$(EXEEXT) vfs_split$(EXEEXT) \
 	vfs_s_get_path$(EXEEXT) $(am__EXEEXT_1)
-@CHARSET_TRUE@am__append_1 = path_recode \
+@CHARSET_TRUE@am__append_2 = path_recode \
 @CHARSET_TRUE@	vfs_get_encoding
 
 check_PROGRAMS = $(am__EXEEXT_2)
@@ -124,6 +125,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -131,6 +133,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
@@ -624,9 +628,7 @@ LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
 LIBPTH = @LIBPTH@
 LIBPTH_PREFIX = @LIBPTH_PREFIX@
-LIBS = @CHECK_LIBS@  \
-    $(top_builddir)/lib/libmc.la
-
+LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
 LIBTHREAD = @LIBTHREAD@
diff -urpN mc-4.8.20/tests/lib/vfs/canonicalize_pathname.c mc-4.8.21/tests/lib/vfs/canonicalize_pathname.c
--- mc-4.8.20/tests/lib/vfs/canonicalize_pathname.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/canonicalize_pathname.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib - canonicalize path
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/current_dir.c mc-4.8.21/tests/lib/vfs/current_dir.c
--- mc-4.8.20/tests/lib/vfs/current_dir.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/current_dir.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - manipulate with current directory
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/path_cmp.c mc-4.8.21/tests/lib/vfs/path_cmp.c
--- mc-4.8.20/tests/lib/vfs/path_cmp.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/path_cmp.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,6 +1,6 @@
 /* lib/vfs - vfs_path_t compare functions
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/path_len.c mc-4.8.21/tests/lib/vfs/path_len.c
--- mc-4.8.20/tests/lib/vfs/path_len.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/path_len.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,6 +1,6 @@
 /* lib/vfs - tests for vfspath_len() function.
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/path_manipulations.c mc-4.8.21/tests/lib/vfs/path_manipulations.c
--- mc-4.8.20/tests/lib/vfs/path_manipulations.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/path_manipulations.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,6 +1,6 @@
 /* lib/vfs - test vfs_path_t manipulation functions
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/path_recode.c mc-4.8.21/tests/lib/vfs/path_recode.c
--- mc-4.8.20/tests/lib/vfs/path_recode.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/path_recode.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - vfs_path_t charset recode functions
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/path_serialize.c mc-4.8.21/tests/lib/vfs/path_serialize.c
--- mc-4.8.20/tests/lib/vfs/path_serialize.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/path_serialize.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - vfs_path_t serialize/deserialize functions
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/relative_cd.c mc-4.8.21/tests/lib/vfs/relative_cd.c
--- mc-4.8.20/tests/lib/vfs/relative_cd.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/relative_cd.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,6 +1,6 @@
 /* lib/vfs - test vfs_path_t manipulation functions
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/tempdir.c mc-4.8.21/tests/lib/vfs/tempdir.c
--- mc-4.8.20/tests/lib/vfs/tempdir.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/tempdir.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - manipulations with temp files and  dirs
 
-   Copyright (C) 2012-2017
+   Copyright (C) 2012-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/vfs_adjust_stat.c mc-4.8.21/tests/lib/vfs/vfs_adjust_stat.c
--- mc-4.8.20/tests/lib/vfs/vfs_adjust_stat.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/vfs_adjust_stat.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - test vfs_adjust_stat() functionality
 
-   Copyright (C) 2017
+   Copyright (C) 2017-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/vfs_get_encoding.c mc-4.8.21/tests/lib/vfs/vfs_get_encoding.c
--- mc-4.8.20/tests/lib/vfs/vfs_get_encoding.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/vfs_get_encoding.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - test vfs_get_encoding() functionality
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/vfs_parse_ls_lga.c mc-4.8.21/tests/lib/vfs/vfs_parse_ls_lga.c
--- mc-4.8.20/tests/lib/vfs/vfs_parse_ls_lga.c	2017-11-18 18:45:59.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/vfs_parse_ls_lga.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - test vfs_parse_ls_lga() functionality
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/vfs_path_from_str_flags.c mc-4.8.21/tests/lib/vfs/vfs_path_from_str_flags.c
--- mc-4.8.20/tests/lib/vfs/vfs_path_from_str_flags.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/vfs_path_from_str_flags.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,6 +1,6 @@
 /* lib/vfs - test vfs_path_from_str_flags() function
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/vfs_path_string_convert.c mc-4.8.21/tests/lib/vfs/vfs_path_string_convert.c
--- mc-4.8.20/tests/lib/vfs/vfs_path_string_convert.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/vfs_path_string_convert.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - get vfs_path_t from string
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/vfs_prefix_to_class.c mc-4.8.21/tests/lib/vfs/vfs_prefix_to_class.c
--- mc-4.8.20/tests/lib/vfs/vfs_prefix_to_class.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/vfs_prefix_to_class.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - test vfs_prefix_to_class() functionality
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/vfs_s_get_path.c mc-4.8.21/tests/lib/vfs/vfs_s_get_path.c
--- mc-4.8.20/tests/lib/vfs/vfs_s_get_path.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/vfs_s_get_path.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - test vfs_s_get_path() function
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/vfs_setup_cwd.c mc-4.8.21/tests/lib/vfs/vfs_setup_cwd.c
--- mc-4.8.20/tests/lib/vfs/vfs_setup_cwd.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/vfs_setup_cwd.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - test vfs_setup_cwd() functionality
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/vfs/vfs_split.c mc-4.8.21/tests/lib/vfs/vfs_split.c
--- mc-4.8.20/tests/lib/vfs/vfs_split.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/vfs/vfs_split.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/vfs - test vfs_split() functionality
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/widget/Makefile.am mc-4.8.21/tests/lib/widget/Makefile.am
--- mc-4.8.20/tests/lib/widget/Makefile.am	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/tests/lib/widget/Makefile.am	2018-05-27 21:56:21.000000000 +0200
@@ -8,8 +8,12 @@ AM_CPPFLAGS = \
 
 AM_LDFLAGS = @TESTS_LDFLAGS@
 
-LIBS=@CHECK_LIBS@  \
-    $(top_builddir)/lib/libmc.la
+LIBS = @CHECK_LIBS@ \
+	$(top_builddir)/lib/libmc.la
+
+if ENABLE_MCLIB
+LIBS += $(GLIB_LIBS)
+endif
 
 TESTS = \
 	complete_engine
diff -urpN mc-4.8.20/tests/lib/widget/Makefile.in mc-4.8.21/tests/lib/widget/Makefile.in
--- mc-4.8.20/tests/lib/widget/Makefile.in	2017-11-25 19:33:55.000000000 +0100
+++ mc-4.8.21/tests/lib/widget/Makefile.in	2018-06-03 10:57:35.000000000 +0200
@@ -87,6 +87,7 @@ PRE_UNINSTALL = :
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
+@ENABLE_MCLIB_TRUE@am__append_1 = $(GLIB_LIBS)
 TESTS = complete_engine$(EXEEXT)
 check_PROGRAMS = $(am__EXEEXT_1)
 subdir = tests/lib/widget
@@ -114,6 +115,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -121,6 +123,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
@@ -532,9 +536,7 @@ LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
 LIBPTH = @LIBPTH@
 LIBPTH_PREFIX = @LIBPTH_PREFIX@
-LIBS = @CHECK_LIBS@  \
-    $(top_builddir)/lib/libmc.la
-
+LIBS = @CHECK_LIBS@ $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
 LIBTHREAD = @LIBTHREAD@
diff -urpN mc-4.8.20/tests/lib/widget/complete_engine.c mc-4.8.21/tests/lib/widget/complete_engine.c
--- mc-4.8.20/tests/lib/widget/complete_engine.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/widget/complete_engine.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib/widget - tests for autocomplete feature
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/lib/x_basename.c mc-4.8.21/tests/lib/x_basename.c
--- mc-4.8.20/tests/lib/x_basename.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/lib/x_basename.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    lib - x_basename() function testing
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/src/Makefile.am mc-4.8.21/tests/src/Makefile.am
--- mc-4.8.20/tests/src/Makefile.am	2017-03-04 18:26:20.000000000 +0100
+++ mc-4.8.21/tests/src/Makefile.am	2018-05-27 21:56:21.000000000 +0200
@@ -14,7 +14,7 @@ AM_CPPFLAGS = \
 
 AM_LDFLAGS = @TESTS_LDFLAGS@
 
-LIBS=@CHECK_LIBS@  \
+LIBS = @CHECK_LIBS@ \
 	$(top_builddir)/src/libinternal.la \
 	$(top_builddir)/lib/libmc.la
 
@@ -23,6 +23,10 @@ if ENABLE_VFS_SMB
 LIBS += $(top_builddir)/src/vfs/smbfs/helpers/libsamba.a
 endif
 
+if ENABLE_MCLIB
+LIBS += $(GLIB_LIBS)
+endif
+
 EXTRA_DIST = execute__common.c
 
 TESTS = \
diff -urpN mc-4.8.20/tests/src/Makefile.in mc-4.8.21/tests/src/Makefile.in
--- mc-4.8.20/tests/src/Makefile.in	2017-11-25 19:33:55.000000000 +0100
+++ mc-4.8.21/tests/src/Makefile.in	2018-06-03 10:57:35.000000000 +0200
@@ -91,6 +91,7 @@ host_triplet = @host@
 
 # this is a hack for linking with own samba library in simple way
 @ENABLE_VFS_SMB_TRUE@am__append_2 = $(top_builddir)/src/vfs/smbfs/helpers/libsamba.a
+@ENABLE_MCLIB_TRUE@am__append_3 = $(GLIB_LIBS)
 TESTS = execute__execute_with_vfs_arg$(EXEEXT) \
 	execute__execute_external_editor_or_viewer$(EXEEXT) \
 	execute__execute_get_external_cmd_opts_from_config$(EXEEXT)
@@ -120,6 +121,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -127,6 +129,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
@@ -597,7 +601,7 @@ LIBOBJS = @LIBOBJS@
 LIBPTH = @LIBPTH@
 LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/src/libinternal.la \
-	$(top_builddir)/lib/libmc.la $(am__append_2)
+	$(top_builddir)/lib/libmc.la $(am__append_2) $(am__append_3)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
 LIBTHREAD = @LIBTHREAD@
diff -urpN mc-4.8.20/tests/src/editor/Makefile.am mc-4.8.21/tests/src/editor/Makefile.am
--- mc-4.8.20/tests/src/editor/Makefile.am	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/tests/src/editor/Makefile.am	2018-05-27 21:56:21.000000000 +0200
@@ -9,7 +9,7 @@ AM_CPPFLAGS = \
 
 AM_LDFLAGS = @TESTS_LDFLAGS@
 
-LIBS=@CHECK_LIBS@  \
+LIBS = @CHECK_LIBS@ \
 	$(top_builddir)/src/libinternal.la \
 	$(top_builddir)/lib/libmc.la \
 	@PCRE_LIBS@
@@ -19,6 +19,10 @@ if ENABLE_VFS_SMB
 LIBS += $(top_builddir)/src/vfs/smbfs/helpers/libsamba.a
 endif
 
+if ENABLE_MCLIB
+LIBS += $(GLIB_LIBS)
+endif
+
 EXTRA_DIST = mc.charsets test-data.txt.in
 
 TESTS = \
diff -urpN mc-4.8.20/tests/src/editor/Makefile.in mc-4.8.21/tests/src/editor/Makefile.in
--- mc-4.8.20/tests/src/editor/Makefile.in	2017-11-25 19:33:55.000000000 +0100
+++ mc-4.8.21/tests/src/editor/Makefile.in	2018-06-03 10:57:35.000000000 +0200
@@ -90,6 +90,7 @@ host_triplet = @host@
 
 # this is a hack for linking with own samba library in simple way
 @ENABLE_VFS_SMB_TRUE@am__append_1 = $(top_builddir)/src/vfs/smbfs/helpers/libsamba.a
+@ENABLE_MCLIB_TRUE@am__append_2 = $(GLIB_LIBS)
 TESTS = editcmd__edit_complete_word_cmd$(EXEEXT)
 check_PROGRAMS = $(am__EXEEXT_1)
 subdir = tests/src/editor
@@ -117,6 +118,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -124,6 +126,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
@@ -538,7 +542,8 @@ LIBOBJS = @LIBOBJS@
 LIBPTH = @LIBPTH@
 LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/src/libinternal.la \
-	$(top_builddir)/lib/libmc.la @PCRE_LIBS@ $(am__append_1)
+	$(top_builddir)/lib/libmc.la @PCRE_LIBS@ $(am__append_1) \
+	$(am__append_2)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
 LIBTHREAD = @LIBTHREAD@
diff -urpN mc-4.8.20/tests/src/editor/editcmd__edit_complete_word_cmd.c mc-4.8.21/tests/src/editor/editcmd__edit_complete_word_cmd.c
--- mc-4.8.20/tests/src/editor/editcmd__edit_complete_word_cmd.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/src/editor/editcmd__edit_complete_word_cmd.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    src/editor - tests for edit_complete_word_cmd() function
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/src/execute__common.c mc-4.8.21/tests/src/execute__common.c
--- mc-4.8.20/tests/src/execute__common.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/src/execute__common.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    Common code for testing functions in src/execute.c file.
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
 
    Free Software Foundation, Inc.
 
diff -urpN mc-4.8.20/tests/src/execute__execute_external_editor_or_viewer.c mc-4.8.21/tests/src/execute__execute_external_editor_or_viewer.c
--- mc-4.8.20/tests/src/execute__execute_external_editor_or_viewer.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/src/execute__execute_external_editor_or_viewer.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    src - tests for execute_external_editor_or_viewer() function
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/src/execute__execute_get_external_cmd_opts_from_config.c mc-4.8.21/tests/src/execute__execute_get_external_cmd_opts_from_config.c
--- mc-4.8.20/tests/src/execute__execute_get_external_cmd_opts_from_config.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/src/execute__execute_get_external_cmd_opts_from_config.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    src - tests for execute_external_editor_or_viewer() function
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/src/execute__execute_with_vfs_arg.c mc-4.8.21/tests/src/execute__execute_with_vfs_arg.c
--- mc-4.8.20/tests/src/execute__execute_with_vfs_arg.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/src/execute__execute_with_vfs_arg.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    src - tests for execute_with_vfs_arg() function
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/src/filemanager/Makefile.am mc-4.8.21/tests/src/filemanager/Makefile.am
--- mc-4.8.20/tests/src/filemanager/Makefile.am	2017-02-24 21:25:57.000000000 +0100
+++ mc-4.8.21/tests/src/filemanager/Makefile.am	2018-05-27 21:56:21.000000000 +0200
@@ -10,7 +10,7 @@ AM_CPPFLAGS = \
 
 AM_LDFLAGS = @TESTS_LDFLAGS@
 
-LIBS=@CHECK_LIBS@  \
+LIBS = @CHECK_LIBS@ \
 	$(top_builddir)/src/libinternal.la \
 	$(top_builddir)/lib/libmc.la \
 	@PCRE_LIBS@
@@ -20,6 +20,10 @@ if ENABLE_VFS_SMB
 LIBS += $(top_builddir)/src/vfs/smbfs/helpers/libsamba.a
 endif
 
+if ENABLE_MCLIB
+LIBS += $(GLIB_LIBS)
+endif
+
 EXTRA_DIST = hints/mc.hint
 
 TESTS = \
diff -urpN mc-4.8.20/tests/src/filemanager/Makefile.in mc-4.8.21/tests/src/filemanager/Makefile.in
--- mc-4.8.20/tests/src/filemanager/Makefile.in	2017-11-25 19:33:55.000000000 +0100
+++ mc-4.8.21/tests/src/filemanager/Makefile.in	2018-06-03 10:57:36.000000000 +0200
@@ -90,6 +90,7 @@ host_triplet = @host@
 
 # this is a hack for linking with own samba library in simple way
 @ENABLE_VFS_SMB_TRUE@am__append_1 = $(top_builddir)/src/vfs/smbfs/helpers/libsamba.a
+@ENABLE_MCLIB_TRUE@am__append_2 = $(GLIB_LIBS)
 TESTS = do_cd_command$(EXEEXT) examine_cd$(EXEEXT) \
 	exec_get_export_variables_ext$(EXEEXT) \
 	filegui_is_wildcarded$(EXEEXT) get_random_hint$(EXEEXT)
@@ -119,6 +120,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -126,6 +128,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
@@ -558,7 +562,8 @@ LIBOBJS = @LIBOBJS@
 LIBPTH = @LIBPTH@
 LIBPTH_PREFIX = @LIBPTH_PREFIX@
 LIBS = @CHECK_LIBS@ $(top_builddir)/src/libinternal.la \
-	$(top_builddir)/lib/libmc.la @PCRE_LIBS@ $(am__append_1)
+	$(top_builddir)/lib/libmc.la @PCRE_LIBS@ $(am__append_1) \
+	$(am__append_2)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
 LIBTHREAD = @LIBTHREAD@
diff -urpN mc-4.8.20/tests/src/filemanager/do_cd_command.c mc-4.8.21/tests/src/filemanager/do_cd_command.c
--- mc-4.8.20/tests/src/filemanager/do_cd_command.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/src/filemanager/do_cd_command.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    src/filemanager - tests for do_cd_command() function
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/src/filemanager/examine_cd.c mc-4.8.21/tests/src/filemanager/examine_cd.c
--- mc-4.8.20/tests/src/filemanager/examine_cd.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/src/filemanager/examine_cd.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    src/filemanager - examine_cd() function testing
 
-   Copyright (C) 2012-2017
+   Copyright (C) 2012-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/src/filemanager/exec_get_export_variables_ext.c mc-4.8.21/tests/src/filemanager/exec_get_export_variables_ext.c
--- mc-4.8.20/tests/src/filemanager/exec_get_export_variables_ext.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/src/filemanager/exec_get_export_variables_ext.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    src/filemanager - filemanager functions
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/src/filemanager/filegui_is_wildcarded.c mc-4.8.21/tests/src/filemanager/filegui_is_wildcarded.c
--- mc-4.8.20/tests/src/filemanager/filegui_is_wildcarded.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/src/filemanager/filegui_is_wildcarded.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    src/filemanager - tests for is_wildcarded() function
 
-   Copyright (C) 2011-2017
+   Copyright (C) 2011-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/src/filemanager/get_random_hint.c mc-4.8.21/tests/src/filemanager/get_random_hint.c
--- mc-4.8.20/tests/src/filemanager/get_random_hint.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/src/filemanager/get_random_hint.c	2018-05-27 21:56:21.000000000 +0200
@@ -2,7 +2,7 @@
    src/filemanager - filemanager functions.
    Tests for getting random hints.
 
-   Copyright (C) 2013-2017
+   Copyright (C) 2013-2018
    Free Software Foundation, Inc.
 
    Written by:
diff -urpN mc-4.8.20/tests/src/vfs/Makefile.in mc-4.8.21/tests/src/vfs/Makefile.in
--- mc-4.8.20/tests/src/vfs/Makefile.in	2017-11-25 19:33:56.000000000 +0100
+++ mc-4.8.21/tests/src/vfs/Makefile.in	2018-06-03 10:57:36.000000000 +0200
@@ -113,6 +113,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +121,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/tests/src/vfs/extfs/Makefile.in mc-4.8.21/tests/src/vfs/extfs/Makefile.in
--- mc-4.8.20/tests/src/vfs/extfs/Makefile.in	2017-11-25 19:33:56.000000000 +0100
+++ mc-4.8.21/tests/src/vfs/extfs/Makefile.in	2018-06-03 10:57:36.000000000 +0200
@@ -112,6 +112,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -119,6 +120,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/tests/src/vfs/extfs/helpers-list/Makefile.am mc-4.8.21/tests/src/vfs/extfs/helpers-list/Makefile.am
--- mc-4.8.20/tests/src/vfs/extfs/helpers-list/Makefile.am	2017-03-04 18:26:20.000000000 +0100
+++ mc-4.8.21/tests/src/vfs/extfs/helpers-list/Makefile.am	2018-05-27 21:56:21.000000000 +0200
@@ -10,6 +10,10 @@ AM_LDFLAGS = @TESTS_LDFLAGS@
 
 LIBS = $(top_builddir)/lib/libmc.la
 
+if ENABLE_MCLIB
+LIBS += $(GLIB_LIBS)
+endif
+
 # Programs/scripts to build on 'make check'.
 check_PROGRAMS = mc_parse_ls_l
 check_SCRIPTS = run
diff -urpN mc-4.8.20/tests/src/vfs/extfs/helpers-list/Makefile.in mc-4.8.21/tests/src/vfs/extfs/helpers-list/Makefile.in
--- mc-4.8.20/tests/src/vfs/extfs/helpers-list/Makefile.in	2017-11-25 19:33:56.000000000 +0100
+++ mc-4.8.21/tests/src/vfs/extfs/helpers-list/Makefile.in	2018-06-03 10:57:36.000000000 +0200
@@ -87,6 +87,7 @@ PRE_UNINSTALL = :
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
+@ENABLE_MCLIB_TRUE@am__append_1 = $(GLIB_LIBS)
 check_PROGRAMS = mc_parse_ls_l$(EXEEXT)
 subdir = tests/src/vfs/extfs/helpers-list
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
@@ -113,6 +114,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -120,6 +122,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
@@ -571,7 +575,7 @@ LIBMULTITHREAD = @LIBMULTITHREAD@
 LIBOBJS = @LIBOBJS@
 LIBPTH = @LIBPTH@
 LIBPTH_PREFIX = @LIBPTH_PREFIX@
-LIBS = $(top_builddir)/lib/libmc.la
+LIBS = $(top_builddir)/lib/libmc.la $(am__append_1)
 LIBSSH_CFLAGS = @LIBSSH_CFLAGS@
 LIBSSH_LIBS = @LIBSSH_LIBS@
 LIBTHREAD = @LIBTHREAD@
diff -urpN mc-4.8.20/tests/src/vfs/extfs/helpers-list/data/rpm.custom.output mc-4.8.21/tests/src/vfs/extfs/helpers-list/data/rpm.custom.output
--- mc-4.8.20/tests/src/vfs/extfs/helpers-list/data/rpm.custom.output	2017-05-02 21:00:18.000000000 +0200
+++ mc-4.8.21/tests/src/vfs/extfs/helpers-list/data/rpm.custom.output	2018-05-27 21:56:21.000000000 +0200
@@ -1,6 +1,6 @@
 -r--r--r--   1        0        0        597 2017-01-05 00:00:00 HEADER
--r-xr-xr-x   1        0        0         39 2017-01-05 00:00:00 INSTALL
--r-xr-xr-x   1        0        0         39 2017-01-05 00:00:00 UPGRADE
+-r-xr-xr-x   1        0        0          0 2017-01-05 00:00:00 INSTALL
+-r-xr-xr-x   1        0        0          0 2017-01-05 00:00:00 UPGRADE
 dr-xr-xr-x   3        0        0          0 2017-01-05 00:00:00 INFO
 -r--r--r--   1        0        0          0 2017-01-05 00:00:00 INFO/NAME-EPOCH:VERSION-RELEASE
 -r--r--r--   1        0        0          0 2017-01-05 00:00:00 INFO/GROUP
@@ -36,5 +36,6 @@ dr-xr-xr-x   3        0        0
 -r--r--r--   1        0        0          0 2017-01-05 00:00:00 INFO/REQUIRES
 -r--r--r--   1        0        0          0 2017-01-05 00:00:00 INFO/OBSOLETES
 -r--r--r--   1        0        0          0 2017-01-05 00:00:00 INFO/PROVIDES
+-r--r--r--   1        0        0          0 2017-01-05 00:00:00 INFO/CONFLICTS
 -r--r--r--   1        0        0          0 2017-01-05 00:00:00 INFO/CHANGELOG
 -r--r--r--   1        0        0          0 2017-01-05 00:00:00 CONTENTS.cpio
diff -urpN mc-4.8.20/tests/src/vfs/extfs/helpers-list/data/rpm.glib.output mc-4.8.21/tests/src/vfs/extfs/helpers-list/data/rpm.glib.output
--- mc-4.8.20/tests/src/vfs/extfs/helpers-list/data/rpm.glib.output	2017-03-04 18:26:20.000000000 +0100
+++ mc-4.8.21/tests/src/vfs/extfs/helpers-list/data/rpm.glib.output	2018-05-27 21:56:21.000000000 +0200
@@ -1,6 +1,6 @@
 -r--r--r--   1        0        0        868 2016-11-11 00:00:00 HEADER
--r-xr-xr-x   1        0        0         39 2016-11-11 00:00:00 INSTALL
--r-xr-xr-x   1        0        0         39 2016-11-11 00:00:00 UPGRADE
+-r-xr-xr-x   1        0        0          0 2016-11-11 00:00:00 INSTALL
+-r-xr-xr-x   1        0        0          0 2016-11-11 00:00:00 UPGRADE
 dr-xr-xr-x   3        0        0          0 2016-11-11 00:00:00 INFO
 -r--r--r--   1        0        0          0 2016-11-11 00:00:00 INFO/NAME-VERSION-RELEASE
 -r--r--r--   1        0        0          0 2016-11-11 00:00:00 INFO/GROUP
diff -urpN mc-4.8.20/tests/src/vfs/extfs/helpers-list/data/rpm.rewrite.sh mc-4.8.21/tests/src/vfs/extfs/helpers-list/data/rpm.rewrite.sh
--- mc-4.8.20/tests/src/vfs/extfs/helpers-list/data/rpm.rewrite.sh	2017-03-04 18:26:20.000000000 +0100
+++ mc-4.8.21/tests/src/vfs/extfs/helpers-list/data/rpm.rewrite.sh	2018-05-27 21:56:21.000000000 +0200
@@ -12,26 +12,6 @@ TAGSF="$MC_TEST_EXTFS_INPUT"
 # ----------------------------------------------------------------------------
 
 #
-# Overrides helper's.
-#
-# Imitates 'rpm --querytags'.
-#
-# @Mock
-#
-mcrpmfs_getSupportedTags()
-{
-  $PERL -e '
-    $tagsf = $ARGV[0];
-
-    do $tagsf or die("$tagsf: $!");
-    print join("\n", keys %$tags);
-  ' \
-  "$TAGSF"
-}
-
-# ----------------------------------------------------------------------------
-
-#
 # Imitates 'rpm -qp --qf <TEMPLATE> <PACKAGE_FILE>'.
 #
 # (It ignores <PACKAGE_FILE>, using our input instead.)
diff -urpN mc-4.8.20/tests/src/vfs/extfs/helpers-list/mc_parse_ls_l.c mc-4.8.21/tests/src/vfs/extfs/helpers-list/mc_parse_ls_l.c
--- mc-4.8.20/tests/src/vfs/extfs/helpers-list/mc_parse_ls_l.c	2017-03-04 18:51:39.000000000 +0100
+++ mc-4.8.21/tests/src/vfs/extfs/helpers-list/mc_parse_ls_l.c	2018-05-27 21:56:21.000000000 +0200
@@ -1,7 +1,7 @@
 /*
    A parser for file-listings formatted like 'ls -l'.
 
-   Copyright (C) 2016-2017
+   Copyright (C) 2016-2018
    Free Software Foundation, Inc.
 
    This file is part of the Midnight Commander.
diff -urpN mc-4.8.20/tests/src/vfs/extfs/helpers-list/misc/Makefile.in mc-4.8.21/tests/src/vfs/extfs/helpers-list/misc/Makefile.in
--- mc-4.8.20/tests/src/vfs/extfs/helpers-list/misc/Makefile.in	2017-11-25 19:33:56.000000000 +0100
+++ mc-4.8.21/tests/src/vfs/extfs/helpers-list/misc/Makefile.in	2018-06-03 10:57:36.000000000 +0200
@@ -112,6 +112,7 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/ax_path_lib_pcre.m4 \
 	$(top_srcdir)/m4.include/dx_doxygen.m4 \
 	$(top_srcdir)/m4.include/mc-cflags.m4 \
+	$(top_srcdir)/m4.include/ax_gcc_func_attribute.m4 \
 	$(top_srcdir)/m4.include/mc-check-search-type.m4 \
 	$(top_srcdir)/m4.include/mode_t.m4 \
 	$(top_srcdir)/m4.include/stat-size.m4 \
@@ -119,6 +120,8 @@ am__aclocal_m4_deps = $(top_srcdir)/m4/c
 	$(top_srcdir)/m4.include/fstypename.m4 \
 	$(top_srcdir)/m4.include/fsusage.m4 \
 	$(top_srcdir)/m4.include/mountlist.m4 \
+	$(top_srcdir)/m4.include/windows-stat-inodes.m4 \
+	$(top_srcdir)/m4.include/sys_types_h.m4 \
 	$(top_srcdir)/m4.include/mc-get-fs-info.m4 \
 	$(top_srcdir)/m4.include/mc-with-x.m4 \
 	$(top_srcdir)/m4.include/mc-use-termcap.m4 \
diff -urpN mc-4.8.20/version.h mc-4.8.21/version.h
--- mc-4.8.20/version.h	2017-11-25 19:33:57.000000000 +0100
+++ mc-4.8.21/version.h	2018-06-03 10:59:45.000000000 +0200
@@ -1,4 +1,4 @@
 #ifndef MC_CURRENT_VERSION
 /* This is an autogenerated file. Don't edit! */
-#define MC_CURRENT_VERSION "4.8.20"
+#define MC_CURRENT_VERSION "4.8.21"
 #endif
