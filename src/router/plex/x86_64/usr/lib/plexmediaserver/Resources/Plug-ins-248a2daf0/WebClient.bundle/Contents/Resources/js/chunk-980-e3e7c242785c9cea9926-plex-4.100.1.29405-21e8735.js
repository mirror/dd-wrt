"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[980],{11801:(e,t,r)=>{r.d(t,{J:()=>a});var l=r(67294),n=r(24305);const a=(0,l.forwardRef)((function({align:e="none","aria-label":t,color:r="inherit",size:a="inherit",testID:i},o){return l.createElement("svg",{ref:o,"aria-hidden":!t,"aria-label":t,className:(0,n.J)({align:e,color:r,size:a}),"data-testid":i,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{clipRule:"evenodd",d:"M24 4.5C24.8284 4.5 25.5 5.17157 25.5 6V37.3787L29.4393 33.4393C30.0251 32.8536 30.9749 32.8536 31.5607 33.4393C32.1464 34.0251 32.1464 34.9749 31.5607 35.5607L25.0607 42.0607C24.4749 42.6464 23.5251 42.6464 22.9393 42.0607L16.4393 35.5607C15.8536 34.9749 15.8536 34.0251 16.4393 33.4393C17.0251 32.8536 17.9749 32.8536 18.5607 33.4393L22.5 37.3787V6C22.5 5.17157 23.1716 4.5 24 4.5Z",fill:"currentColor",fillRule:"evenodd"}))}))},41779:(e,t,r)=>{r.d(t,{O:()=>a});var l=r(67294),n=r(24305);const a=(0,l.forwardRef)((function({align:e="none","aria-label":t,color:r="inherit",size:a="inherit",testID:i},o){return l.createElement("svg",{ref:o,"aria-hidden":!t,"aria-label":t,className:(0,n.J)({align:e,color:r,size:a}),"data-testid":i,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{clipRule:"evenodd",d:"M24 42.5C24.8284 42.5 25.5 41.8284 25.5 41V9.62132L29.4393 13.5607C30.0251 14.1464 30.9749 14.1464 31.5607 13.5607C32.1464 12.9749 32.1464 12.0251 31.5607 11.4393L25.0607 4.93934C24.4749 4.35355 23.5251 4.35355 22.9393 4.93934L16.4393 11.4393C15.8536 12.0251 15.8536 12.9749 16.4393 13.5607C17.0251 14.1464 17.9749 14.1464 18.5607 13.5607L22.5 9.62132V41C22.5 41.8284 23.1716 42.5 24 42.5Z",fill:"currentColor",fillRule:"evenodd"}))}))},91569:(e,t,r)=>{r.d(t,{Z:()=>m});var l=r(67294),n=r(71968),a=Object.defineProperty,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){return l.createElement(n.Z,((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&s(e,r,t[r]);if(i)for(var r of i(t))c.call(t,r)&&s(e,r,t[r]);return e})({},e))}u.defaultProps={className:"PageHeaderBadge-badge-Odac7M"};const m=u},99517:(e,t,r)=>{r.d(t,{Z:()=>o});var l=r(22222),n=r(18409),a=r(70617),i=r(38992);const o=(0,a.Z)((function(e){return(0,l.P1)((0,i.Z)(e),(e=>e.accounts.slice().sort(n.Z)))}))},18409:(e,t,r)=>{function l(e,t){if(1===e.id)return-1;if(1===t.id)return 1;const r=e.name.trim().toUpperCase(),l=t.name.trim().toUpperCase();return r<l?-1:r>l?1:0}r.d(t,{Z:()=>l})},93564:(e,t,r)=>{r.d(t,{Z:()=>o});var l=r(67294),n=r(11801),a=r(41779),i=r(5562);function o({isAscending:e=!0}){const t=e?n.J:a.O;return l.createElement("div",{className:"IconTableHeaderSortDirection-sortDirectionIcon-lpcD5T"},l.createElement(t,{"aria-label":e?(0,i.Z)("Ascending"):(0,i.Z)("Descending")}))}},1512:(e,t,r)=>{r.d(t,{Z:()=>p});var l=r(67294);const n={tableCell:"TableCell-tableCell-eytlAB",activeTableCell:"TableCell-activeTableCell-KGqIi8 TableCell-tableCell-eytlAB",title:"TableCell-title-swrhIF"};var a=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t,r=e,{className:a=n.title,cellClassName:p=n.tableCell,activeCellClassName:d=n.activeTableCell,style:y,component:f,type:v,isActiveSort:b}=r,Z=((e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&c)for(var l of c(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r})(r,["className","cellClassName","activeCellClassName","style","component","type","isActiveSort"]);return l.createElement("div",{className:b?d:p,style:y},l.createElement(f,(t=((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&m(e,r,t[r]);return e})({},Z),i(t,o({className:a})))))}},99711:(e,t,r)=>{r.d(t,{Z:()=>p});var l=r(67294);const n={tableHeader:"TableHeader-tableHeader-DV7Uvw"};var a=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t,r=e,{className:a=n.tableHeader}=r,p=((e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&c)for(var l of c(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r})(r,["className"]);return l.createElement("div",(t=((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&m(e,r,t[r]);return e})({},p),i(t,o({className:a}))))}},81179:(e,t,r)=>{r.d(t,{Z:()=>p});var l=r(67294);const n={tableHeaderCell:"TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB",activeTableHeaderCell:"TableHeaderCell-activeTableHeaderCell-jjqwYB TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB"};var a=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t=e,{className:r=n.tableHeaderCell,activeClassName:a=n.activeTableHeaderCell,children:p,isActive:d=!1}=t,y=((e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&c)for(var l of c(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r})(t,["className","activeClassName","children","isActive"]);const f=d?a:r;return l.createElement("span",(v=((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&m(e,r,t[r]);return e})({},y),i(v,o({className:f}))),p);var v}},46620:(e,t,r)=>{r.d(t,{Z:()=>d});var l=r(67294),n=r(74257);const a={tableHeaderLink:"TableHeaderLink-tableHeaderLink-ZM1qnf Link-link-vSsQW1"};var i=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){var t,r=e,{className:i=a.tableHeaderLink,children:d}=r,y=((e,t)=>{var r={};for(var l in e)u.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&s)for(var l of s(e))t.indexOf(l)<0&&m.call(e,l)&&(r[l]=e[l]);return r})(r,["className","children"]);return l.createElement(n.Z,(t=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&p(e,r,t[r]);if(s)for(var r of s(t))m.call(t,r)&&p(e,r,t[r]);return e})({},y),o(t,c({className:i}))),d)}},93965:(e,t,r)=>{r.d(t,{Z:()=>p});var l=r(67294);const n={tableHeaderTitle:"TableHeaderTitle-tableHeaderTitle-YBbHuP"};var a=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t,r=e,{className:a=n.tableHeaderTitle,children:p}=r,d=((e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&c)for(var l of c(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r})(r,["className","children"]);return l.createElement("span",(t=((e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&m(e,r,t[r]);return e})({},d),i(t,o({className:a}))),p)}},24980:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ft});var l=r(67294),n=r(69605),a=r(31235),i=r(74309),o=r(2200),c=r(1346),s=r(75989),u=r(31446),m=r(28216),p=r(13469),d=r.n(p),y=r(96638);r(11133);const f="boolean",v="other";var b=Object.defineProperty,Z=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&P(e,r,t[r]);if(Z)for(var r of Z(t))O.call(t,r)&&P(e,r,t[r]);return e},w=r(70560),E=r(23736);const C=`([^&!=<>]+)(${w.ZP.sort(((e,t)=>t.length-e.length)).map(y.Z).join("|")})([^&]+)?`,I=new RegExp(C,"g"),T=new RegExp(C),k={unwatched:!0,unwatchedLeaves:!0,unmatched:!0,duplicate:!0,inProgress:!0,hdonly:!0,hdr:!0};var j=r(27082),H=r(53334),S=r(14408),N=r(93683),x=r(56442),A=r(84936),M=r(12634);const D=H.Z.extend({name:"PlayHistoryListItemModel",syncedAttrs:{key:S.Z.string,parentKey:S.Z.string,grandparentKey:S.Z.string,title:S.Z.string,parentTitle:S.Z.string,grandparentTitle:S.Z.string,type:S.Z.string,thumb:S.Z.string,parentThumb:S.Z.string,grandparentThumb:S.Z.string,grandparentArt:S.Z.string,index:S.Z.integer,parentIndex:S.Z.integer,originallyAvailableAt:S.Z.string,viewedAt:S.Z.integer,accountID:S.Z.integer,deviceID:S.Z.integer},derivedAttrs:{itemKey(){return this.get("key")},id(){return this.cid}}}),L=M.Z.extend({name:"PlayHistoryListItemCollection",context:["server"],model:D});H.Z.extend({mixins:[N.Z],collectionName:"items",name:"PlayHistoryListModel",context:["server","accountID","filters","sort","limit"],responseType:x.AV,url(){const e=this.filters.reduce(((e,t)=>(e[t.key]=t.value,e)),{});null!=this.accountID&&(e.accountID=this.accountID),null!=this.sort&&(e.sort=this.sort),null!=this.limit&&(e.limit=this.limit);let t=A.Z.join("/status/sessions/history/all",e);return t=t.replace("viewedAt=","viewedAt>="),this.getPaginatedUrl(t)},sessionAttrs:{currentPageStart:S.Z.integer,currentPageSize:S.Z.integer,populatedRange:S.Z.object},syncedAttrs:{totalSize:S.Z.integer},syncedRelations:{items:{relationClass:L,rootPropertyName:"Metadata",setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()}});var R=r(74395),F=r(23306),z=r(19595),q=r(24546),U=r(76714),K=r(5623);function B(e,t){return!!e&&e.some((e=>e.key===t))}var V=r(5562),X=r(13550);var Y=r(22222),J=r(38992);var Q=r(86626),_=r(69881),W=r(31212),G=r(48903),$=r(96051);const ee={key:"user",title:()=>(0,V.Z)("User"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{accountID:n}=t,i=(0,l.useMemo)((()=>((e,t)=>(0,Y.P1)((0,J.Z)(e),(e=>e.accounts.find((e=>e.id===t)))))(r.machineIdentifier,n)),[n,r.machineIdentifier]),o=(0,m.v9)(i);return o?l.createElement("span",{className:e,title:o.name},o.name):l.createElement("span",{className:e},(0,V.Z)("Unknown User"))},style:{flex:"1 1 250px"}},te={key:"type",title:()=>(0,V.Z)("Type"),component:function({className:e,playHistoryItem:t}){const{type:r}=t,n=(0,_.getMetadataType)(r);return n?l.createElement("span",{className:e,title:n.title},n.title):null},style:{flex:"0 1 120px"}},re={key:"title",title:()=>(0,V.Z)("Title"),component:function({className:e,playHistoryItem:t}){const r=(0,X.Z)(t);return l.createElement("span",{className:e},l.createElement("div",{className:"PlayHistoryTableTitle-titleContainer-vVYJ11"},l.createElement("span",{className:"PlayHistoryTableTitle-title-KfbuOe",title:r},r)))},style:{flex:"2 0 350px"}},le={key:"viewedAt",ascKey:"viewedAt",descKey:"viewedAt:desc",title:()=>(0,V.Z)("Played"),component:function({className:e,playHistoryItem:t}){const{viewedAt:r}=t,n=(0,m.v9)(G.Z),a=(0,W.Z)(1e3*r,`${n} MMM d, yyyy`);return l.createElement("span",{className:e,title:a},a)},style:{flex:"1 1 150px"}},ne={key:"player",title:()=>(0,V.Z)("Player"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{deviceID:n}=t,i=(0,m.v9)((0,Q.Z)(r.machineIdentifier)).devices.find((e=>e.id===n));return i?l.createElement("span",{className:e,title:i.name},i.name):l.createElement("span",{className:e},(0,V.Z)("Unknown"))},style:{flex:"1 1 150px"}},ae={key:"platform",title:()=>(0,V.Z)("Platform"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{deviceID:n}=t,i=(0,m.v9)((0,Q.Z)(r.machineIdentifier)).devices.find((e=>e.id===n));return i?l.createElement("span",{className:e,title:i.platform},i.platform):l.createElement("span",{className:e},(0,V.Z)("Unknown"))},style:{flex:"1 1 150px"}},ie=[le];var oe=r(20272),ce=r(38770),se=r(75157),ue=r(7796),me=r(14146);const pe=parseInt(ue.Z.tableRowHeight,10),de=(0,me.Z)({rowHeight:pe,overscan:20});var ye=r(13517),fe=r(80367),ve=r(59886),be=r(41768),Ze=r(49228);const ge=(0,Y.P1)(Ze.Z,(e=>e.playHistory));var Oe=r(74257),Pe=r(1512),he=r(54778),we=r(99045);const Ee=l.forwardRef((({style:e,cellIndex:t},r)=>l.createElement("div",{ref:r,className:t%2?"PlayHistoryTableRowLoading-alternateLoadingItem-mBL8aM PlayHistoryTableRowLoading-loadingItem-ztQZqS":"PlayHistoryTableRowLoading-loadingItem-ztQZqS",style:e},(0,V.Z)("Loading..."))));var Ce=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;function ke(e){var t=e,{item:r,activeTableColumns:n}=t,i=((e,t)=>{var r={};for(var l in e)Ie.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&Ce)for(var l of Ce(e))t.indexOf(l)<0&&Te.call(e,l)&&(r[l]=e[l]);return r})(t,["item","activeTableColumns"]);const[o]=(0,a.c9)(),c=(0,he.Z)(i);let s;if(null==r?void 0:r.key){const e=n.some((e=>"title"===e.key)),t=r.type===_.TRACK?r.parentKey:r.key;s=e?(0,we.Z)(o,{isLibraryProvider:!0},t):void 0}return r?l.createElement("div",{ref:c.cellRef,className:i.cellIndex%2?"PlayHistoryTableRow-alternateItem-l9Zpev PlayHistoryTableRow-item-TN478t":"PlayHistoryTableRow-item-TN478t",style:c.style},l.createElement(Oe.Z,{"aria-label":r.title,className:"PlayHistoryTableRow-columns-RnVGEQ Link-link-vSsQW1",isDisabled:!s,to:s},n.map((({style:e,component:t},n)=>l.createElement(Pe.Z,{key:n,component:t,playHistoryItem:r,style:e}))))):l.createElement(Ee,{ref:c.cellRef,cellIndex:i.cellIndex,style:c.style})}var je=Object.defineProperty,He=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,Me=(e,t,r)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,De=(e,t)=>{for(var r in t||(t={}))xe.call(t,r)&&Me(e,r,t[r]);if(Ne)for(var r of Ne(t))Ae.call(t,r)&&Me(e,r,t[r]);return e},Le=(e,t)=>He(e,Se(t));function Re({activeTableColumns:e,activeFilters:t,activeSort:r}){const n=(0,m.I0)(),[i]=(0,a.c9)(),o=(0,m.v9)(ge),c=(0,m.v9)((0,Q.Z)(i.machineIdentifier)),{items:s,totalSize:u,isPopulated:p,error:d}=o,{isPopulated:y,error:f}=c,v=(0,l.useCallback)((e=>{n(K.Z.actions.fetchRangeRequested(Le(De({},e),{server:i,filters:t,sort:r})))}),[n,i,t,r]),b=(0,l.useMemo)((()=>t=>l.createElement(ke,Le(De({},t),{activeTableColumns:e}))),[e]);return p&&u&&(y||f)?l.createElement(ve.Z,{cellComponentFactory:b,className:"PlayHistoryList-playHistoryListPageContent-ebUqYI PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko",items:s,layout:de,totalSize:u,onPageRequest:v}):p&&!u?l.createElement(ye.Z,{description:(0,V.Z)("Snuggle up on the couch and play something!"),title:(0,V.Z)("Nothing to see here")}):d?l.createElement(fe.Z,null):l.createElement(ye.Z,null,l.createElement(be.Z,null))}var Fe=r(91569),ze=r(868),qe=r(55247),Ue=r(78958),Ke=r(7118),Be=Object.defineProperty,Ve=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,_e=(e,t,r)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,We=(e,t)=>{for(var r in t||(t={}))Je.call(t,r)&&_e(e,r,t[r]);if(Ye)for(var r of Ye(t))Qe.call(t,r)&&_e(e,r,t[r]);return e};function Ge(e,t,r){if(null==r)return e.filter((e=>e.key!==t));const l=[...e];let n=l.length;for(;n-- >0;){const e=l[n],o=e.key,c=e.value;if(t===o&&r===c)l.splice(n,1);else if(t===o&&Array.isArray(c)){const t=c.indexOf(r);t>-1&&(c.splice(t,1),1===c.length?l.splice(n,1,(a=We({},e),i={value:c[0]},Ve(a,Xe(i)))):c.length||l.splice(n,1))}}var a,i;return l}var $e=Object.defineProperty,et=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,lt=(e,t,r)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function nt(e,t,r){const l=[...e],n=l.findIndex((e=>e.key===t)),a=-1===n?0:n,i=((e,t)=>{for(var r in t||(t={}))tt.call(t,r)&&lt(e,r,t[r]);if(et)for(var r of et(t))rt.call(t,r)&&lt(e,r,t[r]);return e})({key:t},r);return-1===n?l.push(i):l.splice(a,1,i),l}var at=r(94372),it=r(9119),ot=r(75534),ct=r(99517),st=r(46905),ut=r(46525),mt=Object.defineProperty,pt=Object.defineProperties,dt=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,bt=(e,t,r)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;let Zt,gt;function Ot(e,t=window.location.hash){const r=function(e){if(Zt===e)return gt;const t=e.split("?"),r=t.length>1?t[1]:void 0,l=r?A.Z.parseParams(r):{};return Zt=e,gt={url:t[0],params:l},gt}(t);return A.Z.join(r.url,(l=((e,t)=>{for(var r in t||(t={}))ft.call(t,r)&&bt(e,r,t[r]);if(yt)for(var r of yt(t))vt.call(t,r)&&bt(e,r,t[r]);return e})({},r.params),n={filters:(0,ut.Z)(e.filters),activeTimePeriod:e.activeTimePeriod,sort:e.sort},pt(l,dt(n))));var l,n}var Pt=r(12038);function ht({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[n]=(0,a.c9)(),i=(0,ot.Z)(),o=(0,st.Z)(),c=(0,l.useMemo)((()=>({key:"",title:(0,V.Z)("All Users")})),[]),s=(0,m.v9)((0,ct.Z)(n.machineIdentifier)),u=(0,l.useMemo)((()=>s.reduce(((e,t)=>(e.push({key:String(t.id),title:t.name}),e)),[c])),[s,c]),p=(0,l.useMemo)((()=>{const t=e.find((e=>"accountID"===e.key));return t?u.find((e=>e.key===t.value)):c}),[e,u,c]),d=(0,l.useCallback)((l=>{let n;n=l?nt(e,$.F.AccountID,{value:String(l),type:v}):Ge(e,$.F.AccountID),window.location.hash=Ot({filters:n,activeTimePeriod:t,sort:r})}),[e,t,r]);return p&&u.length?l.createElement(l.Fragment,null,l.createElement(ze.Z,{hasMenu:!0,id:i,isMenuOpen:o.isOpen,onPress:o.onToggle},p.title),l.createElement(at.Z,{isOpen:o.isOpen,target:i,onMenuClose:o.onClose},u.map((e=>l.createElement(Pt.Z,{key:e.key,isSelected:p.key===e.key,value:e.key,onSelect:(0,it.Z)(d,o.onClose)},e.title))))):null}var wt=r(70617),Et=r(84389);const Ct=(0,wt.Z)((function(e,t){return(0,Y.P1)((0,Et.Z)(e,t),(e=>e.filter((e=>{const t=e.type?_.getMetadataType(e.type):null;return t&&t.typeString!==_.PLAYLIST}))))}));function It({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[n,i]=(0,a.c9)(),o=(0,ot.Z)(),c=(0,st.Z)(),s=(0,m.v9)(Ct(n.machineIdentifier,i.identifier)),u=(0,l.useMemo)((()=>({key:"all",title:(0,V.Z)("All Libraries")})),[]),p=(0,l.useMemo)((()=>s.reduce(((e,t)=>(e.push({key:t.id,title:t.title}),e)),[u])),[s,u]),d=(0,l.useMemo)((()=>{const t=e.find((e=>"librarySectionID"===e.key));return t&&p.length?p.find((e=>String(e.key)===t.value)):u}),[e,p,u]),y=(0,l.useCallback)((l=>{let n;n="all"!==l?nt(e,$.F.LibrarySectionID,{value:l,type:v}):Ge(e,$.F.LibrarySectionID),window.location.hash=Ot({filters:n,activeTimePeriod:t,sort:r})}),[e,t,r]);return d&&s.length?l.createElement(l.Fragment,null,l.createElement(ze.Z,{hasMenu:!0,id:o,isMenuOpen:c.isOpen,onPress:c.onToggle},d.title),l.createElement(at.Z,{isOpen:c.isOpen,target:o,onMenuClose:c.onClose},p.map((e=>l.createElement(Pt.Z,{key:e.key,isSelected:d.key===e.key,value:e.key,onSelect:(0,it.Z)(y,c.onClose)},e.title))))):null}var Tt=r(47192);function kt(){const[e]=(0,a.c9)(),t=(0,ot.Z)(),r=(0,st.Z)(),n=(0,m.v9)(Tt.Z),i=(0,l.useMemo)((()=>n.reduce(((e,t)=>(t.isFullOwnedServer&&t.isConnected&&e.push({key:t.machineIdentifier,title:t.friendlyName}),e)),[])),[n]),o=(0,l.useMemo)((()=>i.find((t=>t.key===e.machineIdentifier))),[e,i]),c=(0,l.useCallback)((e=>{window.location.hash=(0,Ke.Z)(e)}),[]);return o?l.createElement(l.Fragment,null,l.createElement(ze.Z,{hasMenu:!0,id:t,isMenuOpen:r.isOpen,onPress:r.onToggle},o.title),l.createElement(at.Z,{isOpen:r.isOpen,target:t,onMenuClose:r.onClose},i.map((e=>l.createElement(Pt.Z,{key:e.key,isSelected:o.key===e.key,value:e.key,onSelect:(0,it.Z)(c,r.onClose)},e.title))))):null}function jt({activeFilters:e,activeTimePeriod:t,activeSort:r}){const n=(0,ot.Z)(),a=(0,st.Z)(),i=[se.XH.Week,se.XH.Month,se.XH.NinetyDays,se.XH.Year,se.XH.AllTime],o=(0,l.useCallback)((t=>{const l=nt(e,$.F.ViewedAt,{value:String((0,se.xP)(t)),type:v});window.location.hash=Ot({filters:l,activeTimePeriod:t,sort:r})}),[e,r]);return l.createElement(l.Fragment,null,l.createElement(ze.Z,{hasMenu:!0,id:n,isMenuOpen:a.isOpen,onPress:a.onToggle},(0,se.dZ)(t)),l.createElement(at.Z,{isOpen:a.isOpen,target:n,onMenuClose:a.onClose},i.map((e=>l.createElement(Pt.Z,{key:e,isSelected:t===e,value:e,onSelect:(0,it.Z)(o,a.onClose)},(0,se.dZ)(e))))))}const Ht=(0,Y.P1)(ge,(e=>e.totalSize));function St({activeFilters:e,activeFilterTitle:t,activeTimePeriod:r,activeSort:n}){const[i]=(0,a.c9)(),o=(0,m.v9)(Ht),c=!B(e,$.F.MetadataItemID);return l.createElement(Ue.Z,null,l.createElement(qe.Z,null,l.createElement(ze.Z,{to:(0,Ke.Z)(i.machineIdentifier)},(0,V.Z)("Play History")),t?l.createElement(ze.Z,null,t):null,c?l.createElement(kt,null):null,c?l.createElement(l.Fragment,null,l.createElement(It,{activeFilters:e,activeSort:n,activeTimePeriod:r}),l.createElement(ht,{activeFilters:e,activeSort:n,activeTimePeriod:r}),l.createElement(jt,{activeFilters:e,activeSort:n,activeTimePeriod:r})):null,l.createElement(Fe.Z,null,o)))}var Nt=r(93564),xt=r(99711),At=r(81179),Mt=r(46620),Dt=r(93965);function Lt({activeTableColumns:e,activeFilters:t,activeTimePeriod:r,activeSort:n}){return l.createElement(xt.Z,null,e.map((({style:e,title:a,ascKey:i,descKey:o,key:c})=>{if(!i)return l.createElement("div",{key:c,className:"PlayHistoryTableHeader-tableHeader-SpG2fq",style:e},l.createElement(At.Z,null,l.createElement(Dt.Z,null,a())));const s=n===i||n===o,u=n===i;return l.createElement(Mt.Z,{key:c,style:e,to:Ot({filters:t,activeTimePeriod:r,sort:u?o:i})},l.createElement(At.Z,{isActive:s},l.createElement(Dt.Z,null,a()),s?l.createElement(Nt.Z,{isAscending:!u}):null))})))}function Rt(){var e;const t=(0,m.I0)(),[r]=(0,a.c9)(),n=(0,i.Z)(),o=function(e){if(!e)return[];const t=decodeURIComponent(e).match(I);return t?t.reduce(((e,t)=>{const r=t.match(T),[,l,n,a]=r||[];let i=a?d().uniq(a.split(E.OR)):"";return 1===i.length&&(i=i[0]),function(e,t,r){const l=[...e];if(r.type===f){const e=d().findIndex(l,(e=>e.key===t)),n=-1===e?0:e,a=h({key:t},r);-1===e?l.push(a):l.splice(n,1,a)}else d().findWhere(l,{key:t,value:r.value})||l.push(h({key:t},r));return l}(e,l,{value:i,type:k[l]?f:v,operator:n})}),[]):[]}(n.filters),c=(0,s.Z)(n.filterTitle),u=null!=(e=(0,oe.su)(se.XH).find((e=>e===(0,s.Z)(n.activeTimePeriod))))?e:se.XH.AllTime,p=n.sort?(0,s.Z)(n.sort):"viewedAt:desc",y=(0,ce.Z)(n.isParentType),b=function(e,t){let r=[ne,ae,...ie];return!t&&B(e,$.F.MetadataItemID)||(r=[re,...r]),B(e,$.F.LibrarySectionID)||B(e,$.F.MetadataItemID)||(r=[te,...r]),B(e,$.F.AccountID)||(r=[ee,...r]),r}(o,y);return(0,z.Z)(),(0,l.useEffect)((()=>{t(F.Z.actions.populateRequested({server:r})),t(R.Z.actions.populateRequested({server:r}))}),[t,r]),(0,l.useEffect)((()=>((0,j.c9)((()=>{t(K.Z.actions.fetchRangeRequested({server:r,filters:o,sort:p,startIndex:0,size:100}))})),()=>{t(K.Z.actions.reset())})),[o,p,t,r]),l.createElement(q.Z,{scrollDirection:U.I.None},l.createElement(St,{activeFilterTitle:c,activeFilters:o,activeSort:p,activeTimePeriod:u}),l.createElement(Lt,{activeFilters:o,activeSort:p,activeTableColumns:b,activeTimePeriod:u}),l.createElement(Re,{activeFilters:o,activeSort:p,activeTableColumns:b}))}function Ft(){const{machineIdentifier:e,providerIdentifier:t}=(0,c.Z)(),r=(0,i.Z)();return l.createElement(a.ZP,{machineIdentifier:e,providerIdentifier:t},l.createElement(u.Z,{machineIdentifier:e,providerIdentifier:t},l.createElement(o.ZP,{metricsContext:(0,s.Z)(r.context),metricsPage:n.mw},l.createElement(Rt,null))))}}}]);