"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[389],{33997:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(22222),s=r(4524),i=r(72194),l=r(59468);const a=(0,i.Z)(l.Z,(({homeSettings:e})=>e)),o=(0,n.P1)(a,(e=>e.servers),s.Z,((e,t,r)=>{const{preferredServerID:n}=e;if(n)for(let e=0,s=t.length;e<s;e++){const s=r[t[e]];if(s.machineIdentifier===n)return s}}))},9564:(e,t,r)=>{r.d(t,{Z:()=>_});var n=r(67294),s=r(37703),i=r(22222),l=r(4134),a=r(59468),o=r(27082),c=r(42248),u=(r(11133),r(5562)),p=r(91995),y=r(6103),m=r(74287),d=r(53851),h=r(21914),S=r(61214),b=r(37274),f=r(8979),v=r(15984),P=r(21848),g=r(55278);class E extends n.Component{constructor(){super(...arguments),this.onListStylePress=e=>{this.props.onListStylePress(this.props.listStyle)}}render(){const{isSelected:e,title:t}=this.props;return n.createElement(g.Z,{isSelected:e,onPress:this.onListStylePress},t)}}const O=E;class j extends n.Component{constructor(e,t){super(e,t),this.onSliderChange=({steppedValue:e})=>{this.setState({sliderValue:e}),this._clearTimeout(),this._columnAdjustmentTimeoutID=window.setTimeout((()=>{this.props.onColumnAdjustmentChange(-1*e)}),this.props.columnAdjustmentTimeout)},this.onStylesPress=e=>{this.setState({isStylesMenuOpen:!this.state.isStylesMenuOpen})},this.onStylesMenuClose=()=>{this.setState({isStylesMenuOpen:!1})},this.onListStylePress=e=>{this.props.onListStyleChange(e),this.onStylesMenuClose()},this.state={sliderValue:-1*e.columnAdjustment,isStylesMenuOpen:!1},this._stylesButtonID=(0,d.Z)()}UNSAFE_componentWillReceiveProps(e){e.columnAdjustment!==this.props.columnAdjustment&&this.setState({sliderValue:-1*e.columnAdjustment})}componentWillUnmount(){this._clearTimeout()}_clearTimeout(){this._columnAdjustmentTimeoutID&&window.clearTimeout(this._columnAdjustmentTimeoutID)}render(){const{listType:e,listContext:t,selectedListStyle:r,allListStyles:s}=this.props,{sliderValue:i,isStylesMenuOpen:l}=this.state,{POSTER:a,MOSAIC:o,TABLE:c,SUMMARY:d,SIMPLE_SUMMARY:g}=b,E=[{listStyle:a,title:(0,u.Z)("Grid View")},{listStyle:o,title:(0,u.Z)("Mosaic View")},{listStyle:c,title:(0,u.Z)("List View")},{listStyle:d,title:(0,u.Z)("Summary View")},{listStyle:g,title:(0,u.Z)("Summary View")}],j=b.showListStylesSlider(r),Z=b.showListStylesMenu(s),I=(C=r)===b.TABLE?f.Z:C===b.SUMMARY||C===b.SIMPLE_SUMMARY?v.Z:P.Z;var C;return j||Z?n.createElement("div",{className:"MetadataListStylesMenu-stylesContainer-10aTla"},j?n.createElement(S.Z,{className:"MetadataListStylesMenu-slider-3cUUJM Slider-slider-4zRCDI",label:(0,u.Z)("Poster Size"),max:2,min:-1,stepSize:1,value:i,onChange:this.onSliderChange}):null,n.createElement(y.Z,{"aria-label":(0,u.Z)("Show List Styles"),className:Z?"MetadataListStylesMenu-stylesButtonWithArrow-3AIrk3 MetadataListStylesMenu-stylesButton-1rFuP_":"MetadataListStylesMenu-stylesButton-1rFuP_","data-testid":"toolbarView",id:this._stylesButtonID,isDisabled:!Z,onPress:this.onStylesPress},n.createElement(I,{className:"MetadataListStylesMenu-stylesIcon-14_-OQ"}),Z?n.createElement(p.Z,{direction:l?h.UP:h.WV}):null),Z?n.createElement(m.Z,{isOpen:l,target:this._stylesButtonID,onMenuClose:this.onStylesMenuClose},E.map((({listStyle:e,title:t})=>s.indexOf(e)>-1&&n.createElement(O,{key:e,isSelected:r===e,listStyle:e,title:t,onListStylePress:this.onListStylePress})))):null):null}}j.defaultProps={selectedListStyle:b.POSTER,allListStyles:[b.POSTER],allListStyleActions:[],columnAdjustmentTimeout:500};const Z=j;var I=Object.defineProperty,C=Object.prototype.hasOwnProperty,w=Object.getOwnPropertySymbols,T=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&M(e,r,t[r]);if(w)for(var r of w(t))T.call(t,r)&&M(e,r,t[r]);return e};const A=(0,i.P1)(a.Z,(e=>({columnAdjustment:e.columnAdjustment,listStyles:e.listStyles})));class L extends n.Component{constructor(){super(...arguments),this.onColumnAdjustmentChange=e=>{(0,o.c9)((()=>{this.props.saveExperienceSettings({columnAdjustment:e})}))},this.onListStyleChange=e=>{const{listStyles:t,listType:r,listSubtype:n,listContext:s}=this.props,i=(0,c.Z)(r,n),l=D(D({},t),{[s]:D(D({},t[s]||{}),{[i]:e})});(0,o.c9)((()=>{this.props.saveExperienceSettings({listStyles:l})}))}}render(){return n.createElement(Z,D(D({},this.props),{onColumnAdjustmentChange:this.onColumnAdjustmentChange,onListStyleChange:this.onListStyleChange}))}}const _=(0,s.$j)((e=>A),{saveExperienceSettings:l.LN})(L)},62389:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ye});var n=r(67294),s=r(37703),i=r(22222),l=r(33997),a=r(58801),o=r(3704);const c=function(e){const{children:t,isPending:r}=e;return r?n.createElement(o.Z,null,n.createElement(a.Z,null)):n.createElement(n.Fragment,null,t)};var u=Object.defineProperty,p=Object.prototype.hasOwnProperty,y=Object.getOwnPropertySymbols,m=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&d(e,r,t[r]);if(y)for(var r of y(t))m.call(t,r)&&d(e,r,t[r]);return e};const S=(0,i.P1)((e=>e.isWaitingForServers),l.Z,((e,t)=>({preferredServerEntityID:t&&t.entityID,isWaitingForServers:e}))),b=(0,s.$j)(S)((function(e){const t=e,{isWaitingForServers:r,preferredServerEntityID:s}=t,i=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&y)for(var n of y(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["isWaitingForServers","preferredServerEntityID"]),l=(0,n.useRef)(r);return l.current&&!r&&(l.current=r),n.createElement(c,h(h({},i),{isPending:!s&&l.current}))}));var f=r(13469),v=r.n(f),P=r(20013),g=r(69605),E=r(90653),O=r(74309),j=r(95815),Z=r(72194),I=r(47933),C=r(59468),w=r(27082),T=r(5562),M=r(68966),D=r(95614),A=r(9220),L=r(82378),_=r(58501),N=r(81017),x=r(42980);const R=(0,s.$j)((function(){return(0,i.P1)((0,N.Z)(),((e={})=>({containerKey:e.skipParent?e.grandparentKey:e.parentKey})))}))(x.Z);var W=r(96649),U=r(60208),k=r(94184),q=r.n(k),V=r(83705),z=r(11956),F=r(97930),H=r(15065),$=r(52180);const B=function(e){const{className:t,serverEntityID:r,providerEntityID:s,searchResultEntityID:i,imageWidth:l,imageHeight:a,imageUrl:o,tag:c,tagType:u,librarySectionType:p,titleComponents:y}=e,m=(0,z.Z)(e),d=V.Z.get(u),h=!!d&&d.isPerson;return n.createElement("div",{className:t,style:m.style},n.createElement("div",{className:"SearchTagPosterCell-imageContainer-3o_Gy3"},n.createElement(H.Z,{imageHeight:a,imageUrl:o,imageWidth:l,librarySectionType:p,providerEntityID:s,serverEntityID:r,tag:c,tagType:u,title:c}),n.createElement($.Z,{className:q()("SearchTagPosterCell-imageLink-3CQYMF",h&&"SearchTagPosterCell-isPerson-1Nk7rc"),providerEntityID:s,searchResultEntityID:i,serverEntityID:r})),n.createElement("div",{className:"SearchTagPosterCell-titleContainer-3JNtLj"},y.map(((e,t)=>n.createElement(F.Z,{key:t,component:e,isSecondary:t>0,providerEntityID:s,searchResultEntityID:i,serverEntityID:r})))))};var Y=Object.defineProperty,K=Object.prototype.hasOwnProperty,J=Object.getOwnPropertySymbols,Q=Object.prototype.propertyIsEnumerable,G=(e,t,r)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const X=(0,s.$j)((function(){return(0,i.P1)(((e,{listType:t})=>t),((e,{listSubtype:t})=>t),((e,{listContext:t})=>t),((e,{cellWidth:t})=>t),(0,W.Z)(),((e,t,r,n,s={})=>{const i=s.tagItem,{tag:l,tagType:a,librarySectionType:o}=i,c=(0,U.Z)(n,null,e,t,i,r);return{tag:l,tagType:a,librarySectionType:o,imageWidth:c.width,imageHeight:c.height,imageUrl:c.url}}))}))((function(e){return n.createElement(B,((e,t)=>{for(var r in t||(t={}))K.call(t,r)&&G(e,r,t[r]);if(J)for(var r of J(t))Q.call(t,r)&&G(e,r,t[r]);return e})({},e))}));var ee=Object.defineProperty,te=Object.prototype.hasOwnProperty,re=Object.getOwnPropertySymbols,ne=Object.prototype.propertyIsEnumerable,se=(e,t,r)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ie=(e,t)=>{for(var r in t||(t={}))te.call(t,r)&&se(e,r,t[r]);if(re)for(var r of re(t))ne.call(t,r)&&se(e,r,t[r]);return e};const le=function(e){var t=e,{isMetadataItem:r}=t,s=((e,t)=>{var r={};for(var n in e)te.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&re)for(var n of re(e))t.indexOf(n)<0&&ne.call(e,n)&&(r[n]=e[n]);return r})(t,["isMetadataItem"]);return r?n.createElement(R,ie(ie({},s),{showSelect:!1})):n.createElement(X,ie({},s))};var ae=r(7839),oe=r(48425),ce=r(76639);var ue=Object.defineProperty,pe=Object.prototype.hasOwnProperty,ye=Object.getOwnPropertySymbols,me=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,he=(e,t)=>{for(var r in t||(t={}))pe.call(t,r)&&de(e,r,t[r]);if(ye)for(var r of ye(t))me.call(t,r)&&de(e,r,t[r]);return e};const Se=function(e){const{title:t,sourceTitle:r,hubs:s,columnAdjustment:i,isSearchPending:l,isSearchPopulated:c}=e,u=r?`${t} - ${r}`:t;return n.createElement("div",null,n.createElement("div",{"aria-level":"2",className:"SearchProviderHubs-providerTitle-1yX3nQ",role:"heading"},u,l?n.createElement(a.Z,{className:"SearchProviderHubs-spinner-1CFams",size:L.HC}):null),!s.length&&c?n.createElement(o.Z,{description:(0,T.Z)("Try a different query"),title:(0,T.Z)("No Results")}):s.map((e=>{const t=e.type,r=e.subtype,s=A.mo,l=(0,ce.Z)(t,s,{subtype:e.subtype,isSearch:!0,isSearchAll:!0});return n.createElement(_.Z,he(he({},e),{key:e.hubIdentifier,cellRenderer:(a={listType:t,listContext:s,titleComponents:l},e=>n.createElement(ae.Z,he(he({component:le},a),e))),items:e.results,itemsOffset:0,keyPropName:"searchResultEntityID",layout:(0,oe.Z)(t,r,s,i,l.length),listContext:s,listType:t,size:e.results.length}));var a})))};var be=Object.defineProperty,fe=Object.prototype.hasOwnProperty,ve=Object.getOwnPropertySymbols,Pe=Object.prototype.propertyIsEnumerable,ge=(e,t,r)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ee=function(e){const{isSearchCapable:t,providers:r,columnAdjustment:s}=e;return t?n.createElement(M.Z,{innerClassName:"SearchPageContent-content-2y4Jdd PageContent-innerPageContent-pPKWzL"},r.map((e=>n.createElement(Se,((e,t)=>{for(var r in t||(t={}))fe.call(t,r)&&ge(e,r,t[r]);if(ve)for(var r of ve(t))Pe.call(t,r)&&ge(e,r,t[r]);return e})({key:e.providerEntityID,columnAdjustment:s},e))))):n.createElement(D.Z,{description:(0,T.Z)("Browse libraries using the sidebar"),title:(0,T.Z)("This server does not support search")})};var Oe=Object.defineProperty,je=Object.prototype.hasOwnProperty,Ze=Object.getOwnPropertySymbols,Ie=Object.prototype.propertyIsEnumerable,Ce=(e,t,r)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function we(){return(0,Z.Z)((0,i.P1)(I.Z,(e=>e.reduce(((e,{server:t,provider:r})=>t&&r&&t.isConnected?(e[r.entityID]={serverEntityID:t.entityID,identifier:r.identifier,title:r.title,sourceTitle:r.sourceTitle},e):e),{}))),(e=>e))}const Te={fetchSearchPage:P.ES,clearSearchPage:P.Nu};class Me extends n.Component{UNSAFE_componentWillMount(){(0,w.c9)((()=>{this._clear(),this._populate()}))}UNSAFE_componentWillReceiveProps(e){const t=e.query!==this.props.query,r=e.availableProviders!==this.props.availableProviders;(t||r)&&(0,w.c9)((()=>{t&&this._clear(e),this._populate(e)}))}_clear(e=this.props){e.clearSearchPage()}_populate(e=this.props){e.fetchSearchPage({availableProviders:e.availableProviders,query:e.query,limit:30})}render(){return n.createElement(Ee,((e,t)=>{for(var r in t||(t={}))je.call(t,r)&&Ce(e,r,t[r]);if(Ze)for(var r of Ze(t))Ie.call(t,r)&&Ce(e,r,t[r]);return e})({},this.props))}}const De=(0,s.$j)((function(){return(0,i.P1)(we(),(0,i.P1)((e=>e.ui.searchPage.searches),we(),((e,t)=>{const r=e.reduce(((e,r)=>{const n=r.providerEntityID,s=t[n];if(!s)return e;let i=e[s.identifier];return i||(i=e[s.identifier]={providerEntityID:n,title:s.title,sourceTitle:s.sourceTitle,isSearchPending:!1,isSearchPopulated:!1,hubs:{}}),r.isSearchPending&&(i.isSearchPending=!0),r.isSearchPopulated&&(i.isSearchPopulated=!0),r.hubs.forEach((e=>{const t=e=>({serverEntityID:s.serverEntityID,providerEntityID:n,searchResultEntityID:e}),r=e.metadataResults.map(t),l=e.tagResults.map(t),a=i.hubs[e.hubIdentifier];a?(a.size+=e.size,a.results=a.results.concat(r,l)):i.hubs[e.hubIdentifier]={hubIdentifier:e.hubIdentifier,size:e.size,type:e.type,title:e.title,results:[].concat(r,l)}})),e}),{});return v().map(r,(e=>({providerEntityID:e.providerEntityID,title:e.title,sourceTitle:e.sourceTitle,isSearchPending:e.isSearchPending,isSearchPopulated:e.isSearchPopulated,hubs:v().values(e.hubs)})))})),C.Z,((e,t,r)=>({availableProviders:e,isSearchCapable:!!Object.keys(e).length,columnAdjustment:r.columnAdjustment,providers:t})))}),Te)(Me);function Ae({className:e,children:t}){return n.createElement("div",{className:e},t)}Ae.defaultProps={className:"PageHeaderCenter-pageHeaderCenter-jzV214"};const Le=Ae;var _e=r(24351),Ne=r(50948),xe=r(24754),Re=r(9564);const We=function(e){const{isSearchPending:t,query:r}=e;return n.createElement(xe.Z,null,n.createElement(_e.Z,null,(0,T.Z)("Search All Sources")),n.createElement(Le,null,n.createElement("span",null,t?(0,T.Z)('Searching for "{query}"',{query:r}):(0,T.Z)('Results for "{query}"',{query:r})),t?n.createElement(a.Z,{className:"SearchPageHeader-spinner-SNnUI2",size:L.HC}):null),n.createElement(Ne.Z,null,n.createElement(Re.Z,null)))},Ue=function(e){const{isSearchPending:t}=e,{query:r}=(0,O.Z)();return n.createElement(j.Z,{metricsPage:g.fP,scrollDirection:E.Hn},n.createElement(We,{isSearchPending:t,query:r}),n.createElement(De,{query:r}))};var ke=Object.defineProperty,qe=Object.prototype.hasOwnProperty,Ve=Object.getOwnPropertySymbols,ze=Object.prototype.propertyIsEnumerable,Fe=(e,t,r)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const He={clearSearchPage:P.Nu};class $e extends n.Component{componentWillUnmount(){this.props.clearSearchPage()}render(){return n.createElement(Ue,((e,t)=>{for(var r in t||(t={}))qe.call(t,r)&&Fe(e,r,t[r]);if(Ve)for(var r of Ve(t))ze.call(t,r)&&Fe(e,r,t[r]);return e})({},this.props))}}const Be=(0,s.$j)((function(){return(0,i.P1)((e=>e.ui.searchPage),(e=>({isSearchPending:!!v().findWhere(e.searches,{isSearchPending:!0})})))}),He)($e);function Ye(){return n.createElement(b,null,n.createElement(Be,null))}},42248:(e,t,r)=>{function n(e,t){return t?`${e}-${t}`:e}r.d(t,{Z:()=>n})}}]);