{"version":3,"file":"js/main-179-909f79c6eb0e3d3d2b63-plex-0.0.0.47-f01acfe.js","mappings":"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","sources":["webpack://server-manager/./app/js/libs/backbone/backbone-1.2.3+19b88d2+57e89d8.js","webpack://server-manager/./app/js/libs/backbone/backbone.babysitter-0.1.0.js","webpack://server-manager/./app/js/libs/backbone/backbone.marionette-1.6.4.js","webpack://server-manager/./app/js/libs/backbone/backbone.obscura-0.1.7.js","webpack://server-manager/./app/js/libs/backbone/backbone.wreqr-1.1.0.js","webpack://server-manager/./app/js/libs/bootstrap/button.js","webpack://server-manager/./app/js/libs/bootstrap/modal.js","webpack://server-manager/./app/js/libs/bootstrap/tooltip.js","webpack://server-manager/./app/js/libs/bootstrap/transition.js","webpack://server-manager/./app/js/libs/scroll-behavior-polyfill-2.0.13.js","webpack://server-manager/./app/js/adapters/Adapter.ts","webpack://server-manager/./app/js/adapters/adapters.ts","webpack://server-manager/./app/js/adapters/dimensionsAdapter.ts","webpack://server-manager/./app/js/adapters/localizerAdapter.ts","webpack://server-manager/./app/js/adapters/storageAdapter.ts","webpack://server-manager/./app/js/appConfig.ts","webpack://server-manager/./app/js/commands/commands.ts","webpack://server-manager/./app/js/mixins/views/bindingsMixin.ts","webpack://server-manager/./app/js/initializers/extensions/BackboneExtension.ts","webpack://server-manager/./app/js/utils/jquery/isDisabled.ts","webpack://server-manager/./app/js/utils/jquery/selectText.ts","webpack://server-manager/./app/js/utils/jquery/triggerReflow.ts","webpack://server-manager/./app/js/initializers/extensions/MarionetteExtension.ts","webpack://server-manager/./app/js/managers/MediaServerEventConnectionRetryManager.ts","webpack://server-manager/./app/js/managers/ServerEventManager.ts","webpack://server-manager/./app/js/managers/ServerRetryManager.ts","webpack://server-manager/./app/js/mixins/models/populateMixin.ts","webpack://server-manager/./app/js/mixins/views/stateMachineMixin.ts","webpack://server-manager/./app/js/models/AbstractCollection.ts","webpack://server-manager/./app/js/utils/filterDefaults.ts","webpack://server-manager/./app/js/models/AbstractModel.ts","webpack://server-manager/./app/js/models/BaseCollection.ts","webpack://server-manager/./app/js/models/BaseModel.ts","webpack://server-manager/./app/js/models/addFlexModel.ts","webpack://server-manager/./app/js/models/alerts.ts","webpack://server-manager/./app/js/models/attrTypes.ts","webpack://server-manager/./app/js/models/config.ts","webpack://server-manager/./app/js/models/library/FileModel.ts","webpack://server-manager/./app/js/models/library/FileCollection.ts","webpack://server-manager/./app/js/models/library/FilePathModel.ts","webpack://server-manager/./app/js/models/library/FilePathCollection.ts","webpack://server-manager/./app/js/models/library/FilePathListModel.ts","webpack://server-manager/./app/js/models/library/PlaylistModel.ts","webpack://server-manager/./app/js/models/library/convert/VersionGeneratorCollection.ts","webpack://server-manager/./app/js/models/library/convert/BackgroundProcessingListModel.ts","webpack://server-manager/./app/js/models/library/convert/BackgroundProcessingListCollection.ts","webpack://server-manager/./app/js/mixins/models/exclusiveBoolAttrMixin.ts","webpack://server-manager/./app/js/models/metadata/stream/LyricsSpanModel.ts","webpack://server-manager/./app/js/models/metadata/stream/LyricsSpanCollection.ts","webpack://server-manager/./app/js/models/metadata/stream/LyricsLineModel.ts","webpack://server-manager/./app/js/models/metadata/stream/LyricsLineCollection.ts","webpack://server-manager/./app/js/models/metadata/stream/LyricsStreamModel.ts","webpack://server-manager/./app/js/models/metadata/stream/LyricsStreamCollection.ts","webpack://server-manager/./app/js/models/library/VastModel.ts","webpack://server-manager/./app/js/models/library/PlayQueueItemModel.ts","webpack://server-manager/./app/js/models/library/PlayQueueItemCollection.ts","webpack://server-manager/./app/js/models/library/convert/BackgroundProcessingQueueModel.ts","webpack://server-manager/./app/js/models/library/convert/BackgroundProcessingQueueCollection.ts","webpack://server-manager/./app/js/models/library/convert/VersionGeneratorMediaSettingsModel.ts","webpack://server-manager/./app/js/models/library/convert/VersionGeneratorMetadataModel.ts","webpack://server-manager/./app/js/models/library/convert/VersionGeneratorMetadataCollection.ts","webpack://server-manager/./app/js/models/library/convert/VersionGeneratorMetadataListModel.ts","webpack://server-manager/./app/js/models/library/convert/VersionGeneratorPolicyModel.ts","webpack://server-manager/./app/js/models/library/convert/VersionGeneratorStatusModel.ts","webpack://server-manager/./app/js/models/library/convert/VersionGeneratorModel.ts","webpack://server-manager/./app/js/models/library/section/FilterModel.ts","webpack://server-manager/./app/js/models/library/section/FilterCollection.ts","webpack://server-manager/./app/js/models/library/section/FilterOptionModel.ts","webpack://server-manager/./app/js/models/library/section/FilterOptionCollection.ts","webpack://server-manager/./app/js/models/library/section/SectionCollection.ts","webpack://server-manager/./app/js/models/metadata/SectionMetadataListModel.ts","webpack://server-manager/./app/js/utils/types/subsetTypes.ts","webpack://server-manager/./app/js/models/library/section/FirstCharacterModel.ts","webpack://server-manager/./app/js/models/library/section/FirstCharacterCollection.ts","webpack://server-manager/./app/js/models/library/section/LinearFilterModel.ts","webpack://server-manager/./app/js/models/library/section/LinearFilterCollection.ts","webpack://server-manager/./app/js/models/library/section/LocationModel.ts","webpack://server-manager/./app/js/models/library/section/LocationCollection.ts","webpack://server-manager/./app/js/models/library/section/MediaTypeModel.ts","webpack://server-manager/./app/js/models/library/section/MediaTypeCollection.ts","webpack://server-manager/./app/js/models/library/section/SectionSubsetModel.ts","webpack://server-manager/./app/js/models/library/section/SectionSubsetCollection.ts","webpack://server-manager/./app/js/models/library/section/SectionModel.ts","webpack://server-manager/./app/js/models/library/section/SortCollection.ts","webpack://server-manager/./app/js/models/library/section/SortModel.ts","webpack://server-manager/./app/js/utils/types/hubStyleTypes.ts","webpack://server-manager/./app/js/models/metadata/HubCollection.ts","webpack://server-manager/./app/js/models/metadata/HubModel.ts","webpack://server-manager/./app/js/models/metadata/MetadataCollection.ts","webpack://server-manager/./app/js/models/library/section/OperatorModel.ts","webpack://server-manager/./app/js/models/library/section/OperatorCollection.ts","webpack://server-manager/./app/js/models/library/section/MetadataFieldTypeModel.ts","webpack://server-manager/./app/js/models/library/section/MetadataFieldTypeCollection.ts","webpack://server-manager/./app/js/models/library/section/FieldModel.ts","webpack://server-manager/./app/js/models/library/section/FieldCollection.ts","webpack://server-manager/./app/js/models/library/section/MetadataTypeModel.ts","webpack://server-manager/./app/js/models/library/section/MetadataTypeCollection.ts","webpack://server-manager/./app/js/models/metadata/MetaModel.ts","webpack://server-manager/./app/js/models/metadata/MetadataListModel.ts","webpack://server-manager/./app/js/models/server/TranscodeSessionModel.ts","webpack://server-manager/./app/js/models/metadata/ChapterModel.ts","webpack://server-manager/./app/js/models/metadata/ChapterCollection.ts","webpack://server-manager/./app/js/models/metadata/ConcertModel.ts","webpack://server-manager/./app/js/models/metadata/ConcertCollection.ts","webpack://server-manager/./app/js/models/metadata/metadataMergeStrategy.ts","webpack://server-manager/./app/js/models/metadata/MetadataModel.ts","webpack://server-manager/./app/js/utils/metadata/isLibraryItem.ts","webpack://server-manager/./app/js/models/mixins/controlledPopulateMixin.ts","webpack://server-manager/./app/js/utils/rangeUtil.ts","webpack://server-manager/./app/js/models/mixins/paginatedListModelMixin.ts","webpack://server-manager/./app/js/models/preserveMergeStrategy.ts","webpack://server-manager/./app/js/models/provider/ProviderCollection.ts","webpack://server-manager/./app/js/utils/provider/augmentWithSyntheticHomeProvider.ts","webpack://server-manager/./app/js/utils/constants/providerContentDirectoryIDs.ts","webpack://server-manager/./app/js/utils/constants/pivotIdentifiers.ts","webpack://server-manager/./app/js/models/provider/ProviderEPGChannelCollection.ts","webpack://server-manager/./app/js/models/provider/ProviderEPGChannelModel.ts","webpack://server-manager/./app/js/models/provider/ProviderActionModel.ts","webpack://server-manager/./app/js/models/provider/ProviderActionCollection.ts","webpack://server-manager/./app/js/models/provider/PivotModel.ts","webpack://server-manager/./app/js/models/provider/PivotCollection.ts","webpack://server-manager/./app/js/models/provider/ProviderDirectoryModel.ts","webpack://server-manager/./app/js/models/provider/ProviderDirectoryCollection.ts","webpack://server-manager/./app/js/models/provider/ProviderFeatureModel.ts","webpack://server-manager/./app/js/models/provider/ProviderFeatureCollection.ts","webpack://server-manager/./app/js/utils/provider/getSyntheticPivots.ts","webpack://server-manager/./app/js/models/provider/ProviderModel.ts","webpack://server-manager/./app/js/utils/constants/server/commonContentDirectoryKeys.ts","webpack://server-manager/./app/js/models/provider/ProviderCountryModel.ts","webpack://server-manager/./app/js/models/provider/ProviderCountryCollection.ts","webpack://server-manager/./app/js/models/provider/ProviderEPGRecentChannelCollection.ts","webpack://server-manager/./app/js/models/provider/ProviderSettingOptionsModel.ts","webpack://server-manager/./app/js/models/provider/ProviderSettingOptionsCollection.ts","webpack://server-manager/./app/js/models/provider/ProviderSettingModel.ts","webpack://server-manager/./app/js/models/provider/ProviderSettingCollection.ts","webpack://server-manager/./app/js/models/provider/grabber/MediaGrabberDeviceModel.ts","webpack://server-manager/./app/js/models/provider/grabber/MediaGrabberDeviceCollection.ts","webpack://server-manager/./app/js/models/provider/livetv/dvr/DVRModel.ts","webpack://server-manager/./app/js/models/provider/livetv/dvr/DVRCollection.ts","webpack://server-manager/./app/js/models/responseTypes.ts","webpack://server-manager/./app/js/models/server/AgentAttributionModel.ts","webpack://server-manager/./app/js/models/server/LanguageModel.ts","webpack://server-manager/./app/js/utils/language/getLanguageName.ts","webpack://server-manager/./app/js/models/server/LanguageCollection.ts","webpack://server-manager/./app/js/models/server/AgentModel.ts","webpack://server-manager/./app/js/models/server/AgentCollection.ts","webpack://server-manager/./app/js/models/server/ConnectionCollection.ts","webpack://server-manager/./app/js/models/server/ConnectionSourceModel.ts","webpack://server-manager/./app/js/models/server/ConnectionSourceCollection.ts","webpack://server-manager/./app/js/models/server/ConnectionModel.ts","webpack://server-manager/./app/js/utils/url/getIpAddressFromPlexDirectAddress.ts","webpack://server-manager/./app/js/models/server/ServerCloudAccountModel.ts","webpack://server-manager/./app/js/models/metadata/PlaylistItemModel.ts","webpack://server-manager/./app/js/models/metadata/PlaylistItemCollection.ts","webpack://server-manager/./app/js/models/metadata/PlaylistItemListModel.ts","webpack://server-manager/./app/js/models/metadata/PlaylistModel.ts","webpack://server-manager/./app/js/models/metadata/PlaylistCollection.ts","webpack://server-manager/./app/js/models/metadata/PlaylistListModel.ts","webpack://server-manager/./app/js/models/library/PlaylistsSectionModel.ts","webpack://server-manager/./app/js/models/server/ServerModel.ts","webpack://server-manager/./app/js/models/server/ServerSettingModel.ts","webpack://server-manager/./app/js/models/server/ServerSettingCollection.ts","webpack://server-manager/./app/js/models/server/serverFeatures.ts","webpack://server-manager/./app/js/models/storage/AbstractStorageModel.ts","webpack://server-manager/./app/js/models/storage/StoredModel.ts","webpack://server-manager/./app/js/models/storage/StoredConnectionSourceModel.ts","webpack://server-manager/./app/js/models/storage/StoredConnectionSourceCollection.ts","webpack://server-manager/./app/js/models/storage/StoredConnectionModel.ts","webpack://server-manager/./app/js/models/storage/StoredConnectionCollection.ts","webpack://server-manager/./app/js/models/storage/StoredProviderModel.ts","webpack://server-manager/./app/js/models/storage/StoredProviderCollection.ts","webpack://server-manager/./app/js/models/storage/StoredServerModel.ts","webpack://server-manager/./app/js/models/storage/StoredServerCollection.ts","webpack://server-manager/./app/js/models/storage/StoredUserSettingModel.ts","webpack://server-manager/./app/js/models/storage/StoredUserSettingCollection.ts","webpack://server-manager/./app/js/models/storage/StoredUserModel.ts","webpack://server-manager/./app/js/models/storage/StoredUserCollection.ts","webpack://server-manager/./app/js/models/storage/userStorageModel.ts","webpack://server-manager/./app/js/models/subscription/MediaGrabOperationCollection.ts","webpack://server-manager/./app/js/models/subscription/MediaGrabOperationModel.ts","webpack://server-manager/./app/js/models/subscription/MediaSettingCollection.ts","webpack://server-manager/./app/js/models/subscription/MediaSettingModel.ts","webpack://server-manager/./app/js/models/user/HomeUserModel.ts","webpack://server-manager/./app/js/models/user/HomeUserCollection.ts","webpack://server-manager/./app/js/models/user/UserEntitlementModel.ts","webpack://server-manager/./app/js/models/user/UserEntitlementCollection.ts","webpack://server-manager/./app/js/models/user/UserFeatureModel.ts","webpack://server-manager/./app/js/models/user/UserFeatureCollection.ts","webpack://server-manager/./app/js/models/user/UserRoleModel.ts","webpack://server-manager/./app/js/models/user/UserRoleCollection.ts","webpack://server-manager/./app/js/models/user/UserServiceModel.ts","webpack://server-manager/./app/js/models/user/UserServiceCollection.ts","webpack://server-manager/./app/js/models/user/UserSettingModel.ts","webpack://server-manager/./app/js/models/user/UserSubscriptionModel.ts","webpack://server-manager/./app/js/models/user/UserSubscriptionCollection.ts","webpack://server-manager/./app/js/models/metadata/HomeHubModel.ts","webpack://server-manager/./app/js/models/metadata/HomeHubCollection.ts","webpack://server-manager/./app/js/models/settings/HomeSettingsModel.ts","webpack://server-manager/./app/js/models/settings/SidebarSourceModel.ts","webpack://server-manager/./app/js/models/settings/SidebarSourceCollection.ts","webpack://server-manager/./app/js/models/settings/SidebarSettingsModel.ts","webpack://server-manager/./app/js/models/user/userExperienceModelAttrs.ts","webpack://server-manager/./app/js/utils/state/garbageCollectEntities.ts","webpack://server-manager/./app/js/stores/actions/appActions.ts","webpack://server-manager/./app/js/stores/actions/helpers/settings/saveSettingsModel.ts","webpack://server-manager/./app/js/utils/url/resolveDescriptor.ts","webpack://server-manager/./app/js/stores/actions/createActionCreator.ts","webpack://server-manager/./app/js/stores/actions/createActionHandler.ts","webpack://server-manager/./app/js/stores/actions/helpers/createFetchHandler.ts","webpack://server-manager/./app/js/stores/actions/helpers/createControlledFetchHandler.ts","webpack://server-manager/./app/js/stores/actions/helpers/createPopulateHandler.ts","webpack://server-manager/./app/js/stores/actions/helpers/getLegacyActionModels.ts","webpack://server-manager/./app/js/utils/constants/textFormats.ts","webpack://server-manager/./app/js/stores/actions/helpers/metadata/getProviderTextFormat.ts","webpack://server-manager/./app/js/stores/actions/helpers/refreshLibrary.ts","webpack://server-manager/./app/js/stores/actions/helpers/server/getAuthCodeExchangeModel.ts","webpack://server-manager/./app/js/stores/actions/helpers/user/createPIN.ts","webpack://server-manager/./app/js/stores/actions/helpers/user/getAuthXHRErrors.ts","webpack://server-manager/./app/js/utils/getServerErrorMessage.ts","webpack://server-manager/./app/js/stores/actions/helpers/user/getSignInErrorMessage.ts","webpack://server-manager/./app/js/stores/actions/provider/providerActions.ts","webpack://server-manager/./app/js/stores/actions/helpers/server/claimServer.ts","webpack://server-manager/./app/js/utils/promise/retryTimes.ts","webpack://server-manager/./app/js/utils/promise/maxDuration.ts","webpack://server-manager/./app/js/stores/actions/server/claimServerActions.ts","webpack://server-manager/./app/js/stores/actions/helpers/server/signOutServer.ts","webpack://server-manager/./app/js/views/alerts/MediaGrabberDeviceDiscoveredAlertBarView.ts","webpack://server-manager/./app/js/views/modals/RelayConfirmationModal.ts","webpack://server-manager/./app/js/stores/actions/serverActions.ts","webpack://server-manager/./app/js/utils/dateTime/isAfterReminderDate.ts","webpack://server-manager/./app/js/utils/server/addHttpFallbackConnectionToServer.ts","webpack://server-manager/./app/js/utils/server/canServerAllowHttpFallback.ts","webpack://server-manager/./app/js/stores/actions/serverUpdateActions.ts","webpack://server-manager/./app/js/stores/actions/ui/dvrSettingsUIActions.ts","webpack://server-manager/./app/js/stores/actions/ui/dvrSetupActions.ts","webpack://server-manager/./app/js/stores/actions/helpers/server/findIndexByTime.ts","webpack://server-manager/./app/js/stores/actions/helpers/server/parseServerLogTimestamp.ts","webpack://server-manager/./app/js/stores/actions/ui/serverLogPageActions.ts","webpack://server-manager/./app/js/stores/actions/ui/uiActions.ts","webpack://server-manager/./app/js/stores/actions/helpers/user/fetchPIN.ts","webpack://server-manager/./app/js/stores/actions/user/authCodeExchangeActions.ts","webpack://server-manager/./app/js/stores/actions/helpers/server/createBeginPollingHandler.ts","webpack://server-manager/./app/js/stores/actions/helpers/user/updateWebhooks.ts","webpack://server-manager/./app/js/utils/dateTime/getIncrementalReminder.ts","webpack://server-manager/./app/js/utils/metrics/getMetricsServerTypeForSource.ts","webpack://server-manager/./app/js/utils/metrics/getMetricsServerStatus.ts","webpack://server-manager/./app/js/utils/metrics/getMetricsServerType.ts","webpack://server-manager/./app/js/views/modals/user/UserSelectModalAlertBarView.ts","webpack://server-manager/./app/js/utils/constants/restrictionProfileTypes.ts","webpack://server-manager/./app/js/v4/utils/features.ts","webpack://server-manager/./app/js/views/images/GravatarImage.ts","webpack://server-manager/./app/js/views/modals/user/UserSelectModalUserListItem.ts","webpack://server-manager/./app/js/views/modals/user/UserSelectModalPINPane.ts","webpack://server-manager/./app/glyphs/add-560.svg","webpack://server-manager/./app/js/views/modals/user/UserSelectModalAddUserListItem.ts","webpack://server-manager/./app/js/views/modals/user/UserSelectModalUserList.ts","webpack://server-manager/./app/js/views/modals/user/UserSelectModalUsersPane.ts","webpack://server-manager/./app/js/views/modals/user/UserSelectModal.ts","webpack://server-manager/./app/js/stores/actions/userActions.ts","webpack://server-manager/./app/js/stores/actions/helpers/user/saveHomeSettings.ts","webpack://server-manager/./app/js/stores/actions/helpers/user/updateAvatar.ts","webpack://server-manager/./app/js/utils/metrics/trackPreferredServerEvent.ts","webpack://server-manager/./app/js/stores/selectors/createDeepEqualSelector.ts","webpack://server-manager/./app/js/stores/selectors/createShallowEqualSelector.ts","webpack://server-manager/./app/js/stores/selectors/provider/selectAllProviderEntities.ts","webpack://server-manager/./app/js/stores/selectors/provider/selectStableProvider.ts","webpack://server-manager/./app/js/stores/selectors/selectEntities.ts","webpack://server-manager/./app/js/stores/selectors/server/createServerFlexSelector.ts","webpack://server-manager/./app/js/stores/selectors/server/createServerNowPlayingSessionsCountSelector.ts","webpack://server-manager/./app/js/stores/selectors/server/createUnstableServerSelector.ts","webpack://server-manager/./app/js/stores/selectors/server/selectAllServerEntities.ts","webpack://server-manager/./app/js/stores/selectors/server/selectCloudServer.ts","webpack://server-manager/./app/js/stores/selectors/server/selectEmbeddedServer.ts","webpack://server-manager/./app/js/stores/selectors/server/selectPrimaryEligibleServers.ts","webpack://server-manager/./app/js/stores/selectors/server/selectManageableServerEntityIDs.ts","webpack://server-manager/./app/js/stores/selectors/server/selectServers.ts","webpack://server-manager/./app/js/stores/selectors/server/selectStableServer.ts","webpack://server-manager/./app/js/stores/selectors/settings/selectDeviceSettings.ts","webpack://server-manager/./app/js/stores/selectors/ui/selectAvailableLibraryUpgrades.ts","webpack://server-manager/./app/js/views/v3/helpers/provider/getProvidersContentDirectories.ts","webpack://server-manager/./app/js/stores/selectors/user/createUserAttributeSelector.ts","webpack://server-manager/./app/js/stores/selectors/user/selectAuthCodeExchange.ts","webpack://server-manager/./app/js/stores/selectors/user/selectIsAnonymousUser.ts","webpack://server-manager/./app/js/stores/selectors/user/selectUser.ts","webpack://server-manager/./app/js/stores/selectors/user/selectUserExperienceSettings.ts","webpack://server-manager/./app/js/stores/selectors/user/selectUserFeaturesByUUID.ts","webpack://server-manager/./app/js/utils/user/mapUserFeaturesByUUID.ts","webpack://server-manager/./app/js/stores/selectors/user/selectUserLanguage.ts","webpack://server-manager/./app/js/utils/BaseClass.ts","webpack://server-manager/./app/js/utils/array/mapToObject.ts","webpack://server-manager/./app/js/utils/cache/Cache.ts","webpack://server-manager/./app/js/utils/cache/CollectionCache.ts","webpack://server-manager/./app/js/utils/cache/ImageCache.ts","webpack://server-manager/./app/js/utils/cache/ModelCache.ts","webpack://server-manager/./app/js/utils/constants/agentIdentifiers.ts","webpack://server-manager/./app/js/utils/constants/alertTypes.ts","webpack://server-manager/./app/js/utils/constants/audioBoostLevels.ts","webpack://server-manager/./app/js/utils/constants/commonUrls.ts","webpack://server-manager/./app/js/utils/constants/getPixelRatio.ts","webpack://server-manager/./app/js/utils/constants/httpFallbackOptions.ts","webpack://server-manager/./app/js/utils/constants/imageSizes.ts","webpack://server-manager/./app/js/utils/constants/keyCodes.ts","webpack://server-manager/./app/js/utils/constants/metrics/metricsActions.ts","webpack://server-manager/./app/js/utils/constants/metrics/metricsContexts.ts","webpack://server-manager/./app/js/utils/constants/metrics/metricsEvents.ts","webpack://server-manager/./app/js/utils/constants/metrics/metricsPages.ts","webpack://server-manager/./app/js/utils/constants/providerActionIDs.ts","webpack://server-manager/./app/js/utils/constants/providerFeatureTypes.ts","webpack://server-manager/./app/js/utils/constants/providerIdentifiers.ts","webpack://server-manager/./app/js/utils/constants/providerProtocols.ts","webpack://server-manager/./app/js/utils/constants/providerSettingIDs.ts","webpack://server-manager/./app/js/utils/constants/proxyTypes.ts","webpack://server-manager/./app/js/utils/constants/scannerIdentifiers.ts","webpack://server-manager/./app/js/utils/constants/server/connectionTestStates.ts","webpack://server-manager/./app/js/utils/constants/serverIDs.ts","webpack://server-manager/./app/js/utils/constants/serverUpdateStates.ts","webpack://server-manager/./app/js/utils/constants/upsellOrigins.ts","webpack://server-manager/./app/js/utils/constants/user/ReminderType.ts","webpack://server-manager/./app/js/utils/constants/user/features.ts","webpack://server-manager/./app/js/utils/constants/user/subscriptionStates.ts","webpack://server-manager/./app/js/utils/constants/user/subscriptionTypes.ts","webpack://server-manager/./app/js/utils/contentUtil.ts","webpack://server-manager/./app/js/utils/string/getTitleList.ts","webpack://server-manager/./app/js/utils/dateTime/durationOf.ts","webpack://server-manager/./app/js/utils/dateTime/formatPlayerTime.ts","webpack://server-manager/./app/js/utils/device/browser.ts","webpack://server-manager/./app/js/utils/device/canUseDOM.ts","webpack://server-manager/./app/js/utils/device/capabilities.ts","webpack://server-manager/./app/js/utils/dispatcher.ts","webpack://server-manager/./app/js/utils/getErrorMessageFromXHR.ts","webpack://server-manager/./app/js/utils/getRuntimeUrl.ts","webpack://server-manager/./app/js/utils/getSupportedResponseType.ts","webpack://server-manager/./app/js/utils/handlebars/if_eq.ts","webpack://server-manager/./app/js/utils/handlebars/if_neq.ts","webpack://server-manager/./app/js/utils/handlebars/metadata/formatResolution.ts","webpack://server-manager/./app/js/utils/handlebars/metadata/formatVideoBitrate.ts","webpack://server-manager/./app/js/utils/handlebars/metadata/formatVideoQuality.ts","webpack://server-manager/./app/js/utils/handlebars/partial.ts","webpack://server-manager/./app/js/utils/handlebars/string/truncateFilename.ts","webpack://server-manager/./app/js/utils/handlebars/string/truncateMiddle.ts","webpack://server-manager/./app/js/utils/handlebars/stripOptions.ts","webpack://server-manager/./app/js/utils/handlebars/t.ts","webpack://server-manager/./app/js/utils/handlebars/url/getLastSegment.ts","webpack://server-manager/./app/js/utils/images/base64ImageStringToBlob.ts","webpack://server-manager/./app/js/utils/isVersionOrNewer.ts","webpack://server-manager/./app/js/utils/language/languages.ts","webpack://server-manager/./app/js/utils/livetv/getLiveTVMediaItemID.ts","webpack://server-manager/./app/js/utils/log/assert.ts","webpack://server-manager/./app/js/utils/log/log.ts","webpack://server-manager/./app/js/utils/number/leadingZero.ts","webpack://server-manager/./app/js/utils/media/getSeasonEpisodeIndex.ts","webpack://server-manager/./app/js/utils/media/getSectionForItem.ts","webpack://server-manager/./app/js/utils/media/getSelectedAudio.ts","webpack://server-manager/./app/js/utils/media/getSelectedSubtitles.ts","webpack://server-manager/./app/js/utils/media/getSelectedVideo.ts","webpack://server-manager/./app/js/utils/media/getStreams.ts","webpack://server-manager/./app/js/utils/metadata/createSourceFromIdentifiers.ts","webpack://server-manager/./app/js/utils/metadata/formatBytes.ts","webpack://server-manager/./app/js/utils/metadata/formatResolution.ts","webpack://server-manager/./app/js/utils/metadata/formatVideoBitrate.ts","webpack://server-manager/./app/js/utils/metadata/formatBitrateAsMegabits.ts","webpack://server-manager/./app/js/utils/metadata/formatBitrateAsKilobits.ts","webpack://server-manager/./app/js/utils/metadata/formatVideoQuality.ts","webpack://server-manager/./app/js/utils/metadata/getIdentifiersFromSource.ts","webpack://server-manager/./app/js/utils/metrics/getPerformanceReportingHost.ts","webpack://server-manager/./app/js/utils/metrics/performance.ts","webpack://server-manager/./app/js/utils/mixins/eventMixin.ts","webpack://server-manager/./app/js/utils/object/isPlainObject.ts","webpack://server-manager/./app/js/utils/parser.ts","webpack://server-manager/./app/js/utils/parser/parseBoolean.ts","webpack://server-manager/./app/js/utils/parser/parseInteger.ts","webpack://server-manager/./app/js/utils/parser/parseJSON.ts","webpack://server-manager/./app/js/utils/parser/parseQueryString.ts","webpack://server-manager/./app/js/utils/parser/parseXML.ts","webpack://server-manager/./app/js/utils/parser/replaceMetadataDirectoryXMLElementNames.ts","webpack://server-manager/./app/js/utils/parser/replaceMetadataXMLElementNames.ts","webpack://server-manager/./app/js/utils/parser/replaceXMLElementNames.ts","webpack://server-manager/./app/js/utils/parser/stringifyBoolean.ts","webpack://server-manager/./app/js/utils/parser/stringifyQueryString.ts","webpack://server-manager/./app/js/utils/parser2.ts","webpack://server-manager/./app/js/utils/parser/parseFloat.ts","webpack://server-manager/./app/js/utils/parser/parseString.ts","webpack://server-manager/./app/js/utils/parser/parseEncodedString.ts","webpack://server-manager/./app/js/utils/parser/parseArray.ts","webpack://server-manager/./app/js/utils/parser/parseList.ts","webpack://server-manager/./app/js/utils/parser/stringifyList.ts","webpack://server-manager/./app/js/utils/player/abstractPlayerQualities.ts","webpack://server-manager/./app/js/utils/player/isLocalMetadataItem.ts","webpack://server-manager/./app/js/utils/player/getQualityAttribute.ts","webpack://server-manager/./app/js/utils/metadata/getResolution.ts","webpack://server-manager/./app/js/utils/player/videoPlayerQualities.ts","webpack://server-manager/./app/js/utils/playerUtil.ts","webpack://server-manager/./app/js/utils/posterPlaceholders.ts","webpack://server-manager/./app/js/utils/posterSizes.ts","webpack://server-manager/./app/js/utils/predicates/device/isEdge.ts","webpack://server-manager/./app/js/utils/promise/alwaysResolve.ts","webpack://server-manager/./app/js/utils/promise/makeCancelable.ts","webpack://server-manager/./app/js/utils/promise/minDuration.ts","webpack://server-manager/./app/js/models/provider/LegacyLibraryProviderModel.ts","webpack://server-manager/./app/js/utils/provider/augmentProviderCollection.ts","webpack://server-manager/./app/js/utils/provider/createLibraryPivotKey.ts","webpack://server-manager/./app/js/utils/provider/normalizeProviderDataIdentifier.ts","webpack://server-manager/./app/js/utils/pubsub/getMessages.ts","webpack://server-manager/./app/js/utils/pubsub/BaseMediaServerEventConnection.ts","webpack://server-manager/./app/js/utils/pubsub/messageTypes.ts","webpack://server-manager/./app/js/utils/renderComponentToString.tsx","webpack://server-manager/./app/js/utils/server/activityTypes.ts","webpack://server-manager/./app/js/utils/server/getDirectoryUpgrade.ts","webpack://server-manager/./app/js/utils/server/isMediaProvidersRoot.ts","webpack://server-manager/./app/js/utils/shouldClientPoll.ts","webpack://server-manager/./app/js/utils/source/getSourceForStorage.ts","webpack://server-manager/./app/js/utils/source/getSourceKey.ts","webpack://server-manager/./app/js/utils/state/createEntityID.ts","webpack://server-manager/./app/js/utils/state/entityTypes.ts","webpack://server-manager/./app/js/utils/state/findEntity.ts","webpack://server-manager/./app/js/utils/state/modelFinders.ts","webpack://server-manager/./app/js/utils/state/stateUpdateScheduler.ts","webpack://server-manager/./app/js/utils/string/case/toUpperCase.ts","webpack://server-manager/./app/js/utils/string/case/toUpperCaseFirstLetter.ts","webpack://server-manager/./app/js/utils/string/escapeRegExp.ts","webpack://server-manager/./app/js/utils/string/format/formatBoolean.ts","webpack://server-manager/./app/js/utils/string/isString.ts","webpack://server-manager/./app/js/utils/string/random.ts","webpack://server-manager/./app/js/utils/math/clamp.ts","webpack://server-manager/./app/js/utils/string/shortVersion.ts","webpack://server-manager/./app/js/utils/string/truncate/truncateFilename.ts","webpack://server-manager/./app/js/utils/string/truncate/truncateMiddle.ts","webpack://server-manager/./app/js/utils/synthesizeDirectoryID.ts","webpack://server-manager/./app/js/utils/t.ts","webpack://server-manager/./app/js/utils/types/createTypes.ts","webpack://server-manager/./app/js/utils/types/isDirectoryForSourceType.ts","webpack://server-manager/./app/js/utils/types/getSourceTypeForDirectory.ts","webpack://server-manager/./app/js/utils/types/mediaTypes.ts","webpack://server-manager/./app/js/utils/types/metadataSubtypes.ts","webpack://server-manager/./app/js/utils/types/metadataTypes.ts","webpack://server-manager/./app/js/utils/types/playlistTypes.ts","webpack://server-manager/./app/js/utils/types/sectionTypes.ts","webpack://server-manager/./app/js/utils/types/sourceTypes.ts","webpack://server-manager/./app/js/utils/types/streamTypes.ts","webpack://server-manager/./app/js/utils/url/ip.ts","webpack://server-manager/./app/js/utils/url/isAbsoluteUrl.ts","webpack://server-manager/./app/js/utils/url/path.ts","webpack://server-manager/./app/js/utils/url/splitUrlSearchHashPathAndParams.ts","webpack://server-manager/./app/js/utils/user/canShareSyncSettings.ts","webpack://server-manager/./app/js/utils/user/getReminderID.ts","webpack://server-manager/./app/js/utils/window/isFramed.ts","webpack://server-manager/./app/js/utils/xhr/xhrErrorFilter.ts","webpack://server-manager/./app/js/utils/xhr/xhrTracker.ts","webpack://server-manager/./app/js/v4/core/metadata/metadataTypes.ts","webpack://server-manager/./app/js/v4/core/providers/utils/unknownProvider.ts","webpack://server-manager/./app/js/v4/core/selectCore.ts","webpack://server-manager/./app/js/v4/core/serverAccounts/selectors/createServerAccountsSelector.ts","webpack://server-manager/./app/js/v4/core/serverAccounts/serverAccountsSlice.ts","webpack://server-manager/./app/js/v4/core/serverActivities/serverActivitiesSlice.ts","webpack://server-manager/./app/js/v4/core/serverActivities/serverActivitiesTypes.ts","webpack://server-manager/./app/js/v4/core/serverNowPlayingSessions/selectors/createServerNowPlayingSessionsSelector.ts","webpack://server-manager/./app/js/v4/core/serverNowPlayingSessions/serverNowPlayingSessionsSlice.ts","webpack://server-manager/./app/js/v4/core/servers/selectors/selectServer.ts","webpack://server-manager/./app/js/v4/core/servers/serversSlice.ts","webpack://server-manager/./app/js/v4/core/servers/serversTypes.ts","webpack://server-manager/./app/js/v4/core/servers/utils/toStableServerObject.ts","webpack://server-manager/./app/js/v4/core/servers/utils/unknownServer.ts","webpack://server-manager/./app/js/v4/core/ui/hooks/useDisclosure.ts","webpack://server-manager/./app/js/v4/core/ui/metrics/components/MetricsContextProvider.tsx","webpack://server-manager/./app/js/v4/core/ui/pages/components/empty/EmptyPageContent.css?e087","webpack://server-manager/./app/js/v4/core/ui/pages/components/empty/EmptyPageContent.tsx","webpack://server-manager/./app/js/v4/core/ui/pages/components/empty/ErrorPageContent.tsx","webpack://server-manager/./app/js/v4/core/ui/utils/mergeRefs.ts","webpack://server-manager/./app/js/v4/core/ui/scrollers/components/Scroller.css?baa1","webpack://server-manager/./app/js/v4/core/ui/scrollers/components/Scroller.tsx","webpack://server-manager/./app/js/v4/core/ui/spinners/components/Spinner.css?8be7","webpack://server-manager/./app/js/v4/core/ui/spinners/components/Spinner.tsx","webpack://server-manager/./app/js/v4/core/ui/types/Size.ts","webpack://server-manager/./app/js/v4/features/dashboard/dashboardBandwidthSlice.ts","webpack://server-manager/./app/js/v4/features/dashboard/dashboardPlayHistorySlice.ts","webpack://server-manager/./app/js/v4/features/dashboard/dashboardResourcesSlice.ts","webpack://server-manager/./app/js/v4/features/dashboard/dashboardTopPlayedSlice.ts","webpack://server-manager/./app/js/v4/features/dashboard/dashboardTopUsersSlice.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/dvrManagementTypes.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/dvrSetupSlice.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/epgSettingsSlice.ts","webpack://server-manager/./app/js/utils/cleanXMLTVPath.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/selectors/createDeviceChannelsSelector.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/selectors/selectDVRManagement.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/selectors/selectDVRSetup.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/selectors/selectEPGSettings.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/selectors/selectSetupSelectedLineups.ts","webpack://server-manager/./app/js/v4/features/libraryManagement/libraryManagementSlice.ts","webpack://server-manager/./app/js/v4/features/libraryManagement/utils/getHubManagementKey.ts","webpack://server-manager/./app/js/v4/features/livetv/liveTVSlice.ts","webpack://server-manager/./app/js/v4/features/selectFeatures.ts","webpack://server-manager/./app/js/v4/history.ts","webpack://server-manager/./app/js/v4/root/selectRoot.ts","webpack://server-manager/./app/js/v4/routes/navigateToRoute.ts","webpack://server-manager/./app/js/v4/routes/urlForRoute.ts","webpack://server-manager/./app/js/v4/routes/routes.ts","webpack://server-manager/./app/js/v4/utils/assert.ts","webpack://server-manager/./app/js/v4/utils/data/asyncStateMarkers.ts","webpack://server-manager/./app/js/v4/utils/memoize.ts","webpack://server-manager/./app/js/v4/utils/timePeriods.ts","webpack://server-manager/./app/js/views/AbstractReactView.tsx","webpack://server-manager/./app/js/views/alerts/AlertBarView.ts","webpack://server-manager/./app/js/utils/media/getMediaIndex.ts","webpack://server-manager/./app/js/utils/media/getPartIndex.ts","webpack://server-manager/./app/js/utils/transcoder.ts","webpack://server-manager/./app/js/views/images/BaseImage.ts","webpack://server-manager/./app/js/views/images/MediaPosterImage.ts","webpack://server-manager/./app/js/views/lists/BaseList.ts","webpack://server-manager/./app/js/views/modals/BaseModal.ts","webpack://server-manager/./app/js/views/modals/ConfirmModal.ts","webpack://server-manager/./app/js/mixins/views/modals/paneModalMixin.ts","webpack://server-manager/./app/js/views/editsection/EditSectionAgentSettingsView.ts","webpack://server-manager/./app/js/models/server/ExclusiveAgentProxy.ts","webpack://server-manager/./app/js/models/server/ExclusiveScannerProxy.ts","webpack://server-manager/./app/js/models/server/ScannerModel.ts","webpack://server-manager/./app/js/models/server/ScannerCollection.ts","webpack://server-manager/./app/js/views/editsection/EditSectionBaseView.ts","webpack://server-manager/./app/js/views/editsection/EditSectionSettingView.ts","webpack://server-manager/./app/js/views/editsection/EditSectionAdvancedView.ts","webpack://server-manager/./app/js/views/editsection/EditSectionErrorView.ts","webpack://server-manager/./app/js/v4/core/user/utils/hasRequiredUserService.ts","webpack://server-manager/./app/js/views/editsection/EditSectionPathItemView.ts","webpack://server-manager/./app/js/views/editsection/EditSectionPathsListView.ts","webpack://server-manager/./app/js/views/lists/server/FileListItem.ts","webpack://server-manager/./app/js/views/lists/server/FileList.ts","webpack://server-manager/./app/js/views/lists/server/FilePathListItem.ts","webpack://server-manager/./app/js/views/lists/server/FilePathList.ts","webpack://server-manager/./app/js/views/modals/AddFolderModal.ts","webpack://server-manager/./app/js/views/editsection/EditSectionFoldersView.ts","webpack://server-manager/./app/js/views/modals/PlexPassModal.ts","webpack://server-manager/./app/js/views/editsection/EditSectionSelectPremiumMusicView.ts","webpack://server-manager/./app/js/utils/dateTime/formatTimeAgo.ts","webpack://server-manager/./app/js/utils/dateTime/formatTimeFromNow.ts","webpack://server-manager/./app/js/utils/dateTime/relativeTime.ts","webpack://server-manager/./app/js/views/v3/components/core/icons/getSectionTypeIcon.ts","webpack://server-manager/./app/js/views/editsection/EditSectionTypeView.ts","webpack://server-manager/./app/js/views/modals/EditSectionModal.ts","webpack://server-manager/./app/js/views/modals/LibraryFailureModal.ts","webpack://server-manager/./app/js/models/library/convert/VersionClientProfileModel.ts","webpack://server-manager/./app/js/models/library/convert/VersionClientProfileCollection.ts","webpack://server-manager/./app/js/models/library/convert/VersionTargetModel.ts","webpack://server-manager/./app/js/models/library/convert/VersionTargetCollection.ts","webpack://server-manager/./app/js/views/modals/convert/ConvertErrorView.ts","webpack://server-manager/./app/js/views/modals/convert/ConvertFormLocationView.ts","webpack://server-manager/./app/js/views/modals/convert/ConvertFormPolicyView.ts","webpack://server-manager/./app/js/views/modals/convert/ConvertFormTargetView.ts","webpack://server-manager/./app/js/utils/constants/convert/conversionQualities.ts","webpack://server-manager/./app/js/views/modals/convert/ConvertFormView.ts","webpack://server-manager/./app/js/views/modals/convert/ConvertLoadingView.ts","webpack://server-manager/./app/js/views/modals/convert/ConvertSuccessView.ts","webpack://server-manager/./app/js/views/modals/convert/ConvertModal.ts","webpack://server-manager/./app/js/views/v3/components/MarionetteComponent.tsx","webpack://server-manager/./app/js/views/v3/components/UserPage.tsx","webpack://server-manager/./app/js/views/v3/components/UserPageConnector.ts","webpack://server-manager/./app/js/views/v3/components/core/CircularProgressBar.css?edd7","webpack://server-manager/./app/js/views/v3/components/core/CircularProgressBar.tsx","webpack://server-manager/./app/js/views/v3/components/core/Spinner.tsx","webpack://server-manager/./app/js/views/v3/components/core/TagInjector.tsx","webpack://server-manager/./app/js/views/v3/components/core/base/DisclosureArrow.css?0bb0","webpack://server-manager/./app/js/views/v3/components/core/base/DisclosureArrow.tsx","webpack://server-manager/./app/js/views/v3/components/core/base/PopperPortal.tsx","webpack://server-manager/./app/js/views/v3/components/core/base/Portal.tsx","webpack://server-manager/./app/js/views/v3/components/core/base/Scroller.css?93da","webpack://server-manager/./app/js/views/v3/components/core/base/Scroller.tsx","webpack://server-manager/./app/js/views/v3/helpers/mapValidComponents.ts","webpack://server-manager/./app/js/views/v3/components/core/base/Spinner.css?4c1a","webpack://server-manager/./app/js/views/v3/components/core/base/Spinner.tsx","webpack://server-manager/./app/js/views/v3/components/core/buttons/Button.css?c1a8","webpack://server-manager/./app/js/views/v3/components/core/buttons/Button.tsx","webpack://server-manager/./app/js/views/v3/components/core/buttons/DisclosureArrowButton.css?4804","webpack://server-manager/./app/js/views/v3/components/core/buttons/DisclosureArrowButton.tsx","webpack://server-manager/./app/js/views/v3/helpers/focus/getActiveElementUID.ts","webpack://server-manager/./app/js/views/v3/components/core/buttons/Link.css?faf3","webpack://server-manager/./app/js/views/v3/components/core/buttons/Link.tsx","webpack://server-manager/./app/js/views/v3/components/core/buttons/SpinnerButton.tsx","webpack://server-manager/./app/js/views/v3/components/core/buttons/SpinnerButton.css?ce84","webpack://server-manager/./app/js/v4/utils/createAvatarUrl.ts","webpack://server-manager/./app/js/views/v3/components/core/images/AvatarImg.tsx","webpack://server-manager/./app/js/views/v3/components/core/images/AvatarImg.css?99d5","webpack://server-manager/./app/js/views/v3/components/core/images/BackgroundImage.tsx","webpack://server-manager/./app/js/stores/selectors/createImageTranscodeUrlSelector.ts","webpack://server-manager/./app/js/stores/selectors/provider/createUnstableProviderSelector.ts","webpack://server-manager/./app/js/views/v3/components/core/images/PreloadImage.tsx","webpack://server-manager/./app/js/views/v3/components/core/images/TranscodeImage.tsx","webpack://server-manager/./app/js/views/v3/components/core/images/TranscodeImageConnector.ts","webpack://server-manager/./app/js/views/v3/components/core/menus/Menu.css?77bc","webpack://server-manager/./app/js/views/v3/components/core/menus/Menu.tsx","webpack://server-manager/./app/js/views/v3/components/core/menus/MenuItem.css?abe0","webpack://server-manager/./app/js/views/v3/components/core/menus/MenuItem.tsx","webpack://server-manager/./app/js/views/v3/components/core/menus/MenuSeparator.css?362e","webpack://server-manager/./app/js/views/v3/components/core/menus/MenuSeparator.tsx","webpack://server-manager/./app/js/views/v3/components/core/metrics/MetricsClickTracker.ts","webpack://server-manager/./app/js/views/v3/components/core/metrics/MetricsPageTracker.tsx","webpack://server-manager/./app/js/views/v3/components/core/modals/Modal.css?da0d","webpack://server-manager/./app/js/views/v3/components/core/modals/Modal.tsx","webpack://server-manager/./app/js/views/v3/components/core/modals/ModalBody.tsx","webpack://server-manager/./app/js/views/v3/components/core/modals/ModalBody.css?f493","webpack://server-manager/./app/js/views/v3/components/core/modals/ModalContent.css?f9b9","webpack://server-manager/./app/js/views/v3/components/core/modals/ModalContent.tsx","webpack://server-manager/./app/js/views/v3/components/core/modals/ModalFooter.tsx","webpack://server-manager/./app/js/views/v3/components/core/modals/ModalFooterButtonBar.tsx","webpack://server-manager/./app/js/views/v3/components/core/modals/ModalFooterButtonBar.css?a85f","webpack://server-manager/./app/js/views/v3/components/core/modals/ModalHeader.tsx","webpack://server-manager/./app/js/views/v3/components/core/modals/ModalHeader.css?dc1e","webpack://server-manager/./app/js/views/v3/components/core/pages/FullPage.tsx","webpack://server-manager/./app/js/views/v3/components/core/pages/FullPage.css?d86f","webpack://server-manager/./app/js/views/v3/components/core/tooltips/Tooltip.css?bd77","webpack://server-manager/./app/js/views/v3/components/core/tooltips/Tooltip.tsx","webpack://server-manager/./app/js/views/v3/components/core/tooltips/TooltipWrapper.tsx","webpack://server-manager/./app/js/views/v3/components/core/tooltips/TooltipTrigger.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/UnexpectedErrorPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/Page.tsx","webpack://server-manager/./app/js/views/v3/components/pages/Page.css?e34f","webpack://server-manager/./app/js/views/v3/components/pages/PageConnector.tsx","webpack://server-manager/./app/js/views/v3/components/pages/PageScroller.tsx","webpack://server-manager/./app/js/stores/selectors/settings/selectDismissedUnclaimedServers.ts","webpack://server-manager/./app/js/views/v3/components/pages/InlinePrimaryServerPageConnector.tsx","webpack://server-manager/./app/js/views/v3/components/pages/ServerUnclaimedPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/ServerUnclaimedPageConnector.ts","webpack://server-manager/./app/js/views/v3/components/pages/ServerUpdateRequiredPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/ServerUpdateRequiredPageConnector.ts","webpack://server-manager/./app/js/views/v3/components/pages/ServerPageConnector.ts","webpack://server-manager/./app/js/stores/selectors/server/createIsEmbeddedServerSelector.ts","webpack://server-manager/./app/js/views/v3/components/pages/ServerPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/ServerUnauthorizedErrorPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/ServerUnavailableErrorPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/InsecureFallbackChoicePage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/InsecureFallbackChoicePage.css?2fc2","webpack://server-manager/./app/js/views/v3/components/pages/ServerUnavailableErrorPageConnector.css?4779","webpack://server-manager/./app/js/views/v3/components/pages/ServerUnavailableErrorPageConnector.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/AllowHttpFallbackModal.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/AllowHttpFallbackModalConnector.ts","webpack://server-manager/./app/js/views/v3/components/pages/empty/DownForMaintenancePage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/EmptyPage.css?8e47","webpack://server-manager/./app/js/views/v3/components/pages/empty/EmptyPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/EmptyPageDescription.css?c7d7","webpack://server-manager/./app/js/views/v3/components/pages/empty/EmptyPageDescription.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/ErrorPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/InstallingServerUpdatePage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/InstallingServerUpdatePageConnector.ts","webpack://server-manager/./app/js/views/v3/components/pages/empty/NotFoundErrorPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/UnreachablePage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/serverSettings/RedirectToConnector.ts","webpack://server-manager/./app/js/utils/object/compactDeep.ts","webpack://server-manager/./app/js/v4/core/user/selectors/selectUser.ts","webpack://server-manager/./app/js/stores/selectors/user/createServiceAuthUrlSelector.ts","webpack://server-manager/./app/js/utils/url/addHashParams.ts","webpack://server-manager/./app/js/utils/url/replaceUrlHash.ts","webpack://server-manager/./app/js/views/v3/components/pages/serverSettings/ServiceAuthUrlConnector.tsx","webpack://server-manager/./app/js/views/v3/components/user/modals/PlexPassFeature.css?ad45","webpack://server-manager/./app/js/views/v3/components/user/modals/PlexPassFeature.tsx","webpack://server-manager/./app/js/views/v3/components/user/modals/PlexPassModalContent.css?8cec","webpack://server-manager/./app/js/views/v3/components/user/modals/PlexPassModalContent.tsx","webpack://server-manager/./app/js/views/v3/components/user/modals/PlexPassModalContentConnector.tsx","webpack://server-manager/./app/js/views/v3/components/user/modals/PlexPassModal.tsx","webpack://server-manager/./app/js/views/v3/helpers/createChainedCallback.ts","webpack://server-manager/./app/js/views/v3/helpers/createKey.ts","webpack://server-manager/./app/js/views/v3/helpers/css/cssDurationToMilliseconds.ts","webpack://server-manager/./app/js/views/v3/helpers/css/cssDurationToSeconds.ts","webpack://server-manager/./app/js/views/v3/helpers/focus/findTabbableDescendants.ts","webpack://server-manager/./app/js/views/v3/helpers/focus/focusManager.ts","webpack://server-manager/./app/js/views/v3/helpers/getUniqueElementID.ts","webpack://server-manager/./app/js/views/v3/helpers/hooks/useEffectOnce.ts","webpack://server-manager/./app/js/views/v3/helpers/hooks/useModalState.ts","webpack://server-manager/./app/js/views/v3/helpers/hooks/usePrevious.ts","webpack://server-manager/./app/js/views/v3/helpers/hooks/useUniqueElementID.ts","webpack://server-manager/./app/js/views/v3/helpers/insecureFallbackHelpers.ts","webpack://server-manager/./app/js/views/v3/helpers/modifierClassNames.ts","webpack://server-manager/./app/js/views/v3/helpers/pageStorage.ts","webpack://server-manager/./app/js/views/v3/helpers/props/kinds.ts","webpack://server-manager/./app/js/views/v3/helpers/props/metadataContext.ts","webpack://server-manager/./app/js/views/v3/helpers/props/scrollDirections.ts","webpack://server-manager/./app/js/views/v3/helpers/props/sizes.ts","webpack://server-manager/./app/js/views/v3/helpers/props/tooltipAttachments.ts","webpack://server-manager/./app/js/views/v3/helpers/provider/findProviderContentFeature.ts","webpack://server-manager/./app/js/views/v3/helpers/routes/getPrePlayRoute.ts","webpack://server-manager/./app/js/views/v3/helpers/routes/getProviderBaseRoute.ts","webpack://server-manager/./app/js/views/v3/helpers/routes/getServerSettingsRoute.ts","webpack://server-manager/./app/js/views/v3/helpers/routes/getProviderRouteFromIdentifiers.ts","webpack://server-manager/./app/js/views/v3/helpers/routes/getSourceRoute.ts","webpack://server-manager/./app/js/views/v3/helpers/isEmbeddedServer.ts","webpack://server-manager/./app/js/views/v3/helpers/routes/getProviderRoute.ts","webpack://server-manager/./app/js/views/v3/helpers/routes/getViewRoute.ts","webpack://server-manager/./app/js/views/v3/helpers/shallowEqual.ts","webpack://server-manager/./app/js/views/v3/helpers/shouldPureComponentUpdate.ts","webpack://server-manager/./app/js/views/v3/styles/variables/colors.ts","webpack://server-manager/./app/js/views/alerts/AlertView.ts","webpack://server-manager/./app/js/managers/AlertManager.ts","webpack://server-manager/./app/js/initializers/alertInitializer.ts","webpack://server-manager/./app/js/managers/ModalManager.ts","webpack://server-manager/./app/js/initializers/modalInitializer.ts","webpack://server-manager/./app/js/v4/core/ui/pages/components/empty/UnexpectedErrorPageContent.tsx","webpack://server-manager/./app/js/v4/core/ui/pages/components/PageErrorBoundary.tsx","webpack://server-manager/./app/js/v4/features/background/FullPageBackground.css?7fa8","webpack://server-manager/./app/js/v4/features/background/FullPageBackground.tsx","webpack://server-manager/./app/js/views/v3/components/pages/FullPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/FullPage.css?6551","webpack://server-manager/./app/js/v4/features/serverSettings/ServerAwaitPage.tsx","webpack://server-manager/./app/js/stores/actions/user/signInLaunchActions.ts","webpack://server-manager/./app/js/views/v3/components/core/PlexHeaderImage.css?362f","webpack://server-manager/./app/js/views/v3/components/core/PlexHeaderImage.tsx","webpack://server-manager/./app/js/views/v3/components/sign-in/SignInFormSection.tsx","webpack://server-manager/./app/js/views/v3/components/sign-in/SignInFormSection.css?0a34","webpack://server-manager/./app/js/views/v3/components/sign-in/SkipSignInMessage.css?2bb4","webpack://server-manager/./app/js/views/v3/components/sign-in/SkipSignInMessage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/signIn/SignInLaunchPagePoll.tsx","webpack://server-manager/./app/js/views/v3/components/pages/signIn/SignInLaunchPagePoll.css?9505","webpack://server-manager/./app/js/views/v3/components/pages/signIn/SignInLaunchPagePollConnector.tsx","webpack://server-manager/./app/js/views/v3/components/pages/signIn/SignInLaunchPageRedirectConnector.tsx","webpack://server-manager/./app/js/views/v3/components/pages/signIn/SignInLaunchPageConnector.tsx","webpack://server-manager/./app/js/views/SignInViewReact.tsx","webpack://server-manager/./app/js/views/setup/SetupBasicView.tsx","webpack://server-manager/./app/js/utils/promise/whenEach.ts","webpack://server-manager/./app/js/views/setup/SetupCompleteView.tsx","webpack://server-manager/./app/js/views/setup/SetupErrorView.ts","webpack://server-manager/./app/js/views/setup/SetupIntroView.ts","webpack://server-manager/./app/js/views/lists/setup/SectionCardListItem.ts","webpack://server-manager/./app/js/views/lists/setup/SectionCardList.ts","webpack://server-manager/./app/js/views/setup/SetupLibraryView.ts","webpack://server-manager/./app/js/views/setup/SetupLoadingView.ts","webpack://server-manager/./app/js/views/setup/SetupView.ts","webpack://server-manager/./app/js/stores/actions/helpers/server/acceptEULA.ts","webpack://server-manager/./app/js/views/v3/components/pages/setup/AcceptEULAPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/setup/AcceptEULAPageConnector.ts","webpack://server-manager/./app/js/views/v3/components/pages/setup/SetupPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/setup/SetupPageConnector.ts","webpack://server-manager/./app/js/v4/core/ui/hooks/useLocationSearchParams.ts","webpack://server-manager/./app/js/v4/utils/parser/parseString.ts","webpack://server-manager/./app/js/v4/features/serverSetup/components/ServerSetupViewPage.tsx","webpack://server-manager/./app/js/v4/features/sources/hooks/useSelectedSource.ts","webpack://server-manager/./app/js/stores/selectors/server/selectAllSourcesSidebarServers.ts","webpack://server-manager/./app/js/stores/selectors/user/createUserFeatureSelector.ts","webpack://server-manager/./app/js/views/v3/components/navbar/UnexpectedErrorModal.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/ErrorNavBar.css?1034","webpack://server-manager/./app/js/views/v3/components/navbar/ErrorNavBar.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarButton.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarButton.css?8707","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarSignInButton.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarSignInButton.css?239c","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarSignUpButton.tsx","webpack://server-manager/./app/js/views/v3/components/core/menus/MenuHeader.tsx","webpack://server-manager/./app/js/views/v3/components/core/menus/MenuHeader.css?8d7a","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarAccountMenu.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarAccountMenuConnector.ts","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarAccountButton.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarAccountButton.css?21a8","webpack://server-manager/./app/js/stores/selectors/library/selectAllLibraryEntities.ts","webpack://server-manager/./app/js/stores/selectors/server/selectEmbeddedServerEntity.ts","webpack://server-manager/./app/js/stores/selectors/server/selectOwnedConnectedServers.ts","webpack://server-manager/./app/js/stores/selectors/server/selectOwnedConnectedServerEntityIDs.ts","webpack://server-manager/./app/js/stores/selectors/settings/selectDismissedServerUpdateVersions.ts","webpack://server-manager/./app/js/stores/selectors/settings/selectServerUpdateDismissedVersion.ts","webpack://server-manager/./app/js/utils/activityTypeWhitelist.ts","webpack://server-manager/./app/js/utils/server/isUpdateAvailable.ts","webpack://server-manager/./app/js/stores/selectors/ui/selectHasAnyManageableServerAvailableLibraryUpgrade.ts","webpack://server-manager/./app/js/utils/constants/mediaGrabOperationStatuses.ts","webpack://server-manager/./app/js/views/v3/components/navbar/ActivityMenuStatusItem.css?9879","webpack://server-manager/./app/js/views/v3/components/navbar/ActivityMenuStatusItem.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarActivityMenuStatusItem.css?3a38","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarActivityMenuStatusItem.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarActivityMenuStatusItemConnector.ts","webpack://server-manager/./app/js/stores/selectors/ui/createHasAvailableLibraryUpgradeSelector.ts","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarEmbeddedServerActivityMenuStatusItemConnector.ts","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarEmbeddedServerActivityMenuStatusItem.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarEmbeddedServerActivityMenuStatusItem.css","webpack://server-manager/./app/js/views/v3/helpers/routes/getDownloadsPageRoute.ts","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarActivityMenu.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarActivityMenu.css?5588","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarActivityIcon.css?fc6b","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarActivityIcon.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarIconButton.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarIconButton.css?11da","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarActivityButtonConnector.ts","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarActivityButton.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarActivityButton.css?6cf2","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarPlexPassButton.tsx","webpack://server-manager/./app/js/views/v3/components/navbar/NavBar.css?3c69","webpack://server-manager/./app/js/views/v3/components/navbar/NavBarConnector.tsx","webpack://server-manager/./app/js/utils/predicates/device/isIOS.ts","webpack://server-manager/./app/js/views/v3/components/navbar/NavBar.tsx","webpack://server-manager/./app/js/views/v3/components/pages/LoginPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/PageContent.tsx","webpack://server-manager/./app/js/views/v3/components/pages/PageContent.css?c11f","webpack://server-manager/./app/js/views/v3/components/pages/empty/InnerEmptyPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/empty/InnerEmptyPage.css?c08a","webpack://server-manager/./app/js/views/v3/components/pages/signOut/SignOutPage.tsx","webpack://server-manager/./app/js/views/v3/components/pages/signOut/SignOutPageConnector.ts","webpack://server-manager/./app/js/v4/App.tsx","webpack://server-manager/./app/js/v4/utils/hooks/useGarbageCollectEntities.ts","webpack://server-manager/./app/js/v4/features/navigationHistory/hooks/useNavigationHistory.ts","webpack://server-manager/./app/js/utils/xhr/simpleCORSFilter.ts","webpack://server-manager/./app/js/initializers/ajaxInitializer.ts","webpack://server-manager/./app/js/initializers/alertsInitializer.ts","webpack://server-manager/./app/js/initializers/appModelInitializer.ts","webpack://server-manager/./app/js/managers/CloudServerRetryManager.ts","webpack://server-manager/./app/js/utils/pubsub/CloudServerEventConnection.ts","webpack://server-manager/./app/js/initializers/cloudServerEventInitializer.ts","webpack://server-manager/./app/js/commands/server/testServerConnectionCommand.ts","webpack://server-manager/./app/js/commands/server/abortServerConnectionTestCommand.ts","webpack://server-manager/./app/js/commands/server/populateServerIdentityCommand.ts","webpack://server-manager/./app/js/commands/library/refreshMetadataCommand.ts","webpack://server-manager/./app/js/commands/library/analyzeItemsCommand.ts","webpack://server-manager/./app/js/commands/library/analyzeSectionCommand.ts","webpack://server-manager/./app/js/commands/library/unmatchCommand.ts","webpack://server-manager/./app/js/commands/library/splitApartCommand.ts","webpack://server-manager/./app/js/commands/library/mergeCommand.ts","webpack://server-manager/./app/js/commands/library/deleteItemsCommand.ts","webpack://server-manager/./app/js/views/modals/SelectModal.ts","webpack://server-manager/./app/js/views/modals/SelectMediaFileModal.ts","webpack://server-manager/./app/js/commands/library/deleteMediaItemCommand.ts","webpack://server-manager/./app/js/commands/library/deleteVersionsCommand.ts","webpack://server-manager/./app/js/commands/library/deleteSectionCommand.ts","webpack://server-manager/./app/js/commands/library/deleteSectionThumbnailsCommand.ts","webpack://server-manager/./app/js/commands/library/deletePlaylistCommand.ts","webpack://server-manager/./app/js/commands/library/updateLibraryCommand.ts","webpack://server-manager/./app/js/commands/library/optimizeCommand.ts","webpack://server-manager/./app/js/commands/library/cleanBundlesCommand.ts","webpack://server-manager/./app/js/commands/library/emptyTrashCommand.ts","webpack://server-manager/./app/js/commands/library/matchCommand.ts","webpack://server-manager/./app/js/commands/library/autoMatchCommand.ts","webpack://server-manager/./app/js/commands/library/changeArtworkCommand.ts","webpack://server-manager/./app/js/commands/library/rateCommand.ts","webpack://server-manager/./app/js/utils/media/selectStream.ts","webpack://server-manager/./app/js/commands/library/selectStreamCommand.ts","webpack://server-manager/./app/js/commands/library/deleteFileCommand.ts","webpack://server-manager/./app/js/commands/library/deleteItemCommand.ts","webpack://server-manager/./app/js/utils/provider/getSourceDirectoryFromProviderModel.ts","webpack://server-manager/./app/js/commands/library/convert/enableVersionGeneratorCommand.ts","webpack://server-manager/./app/js/commands/library/convert/disableVersionGeneratorCommand.ts","webpack://server-manager/./app/js/commands/library/convert/reprocessVersionGeneratorCommand.ts","webpack://server-manager/./app/js/commands/library/convert/deleteVersionGeneratorCommand.ts","webpack://server-manager/./app/js/commands/library/convert/deleteAllVersionGeneratorsCommand.ts","webpack://server-manager/./app/js/commands/channel/updateChannelCommand.ts","webpack://server-manager/./app/js/commands/channel/uninstallChannelCommand.ts","webpack://server-manager/./app/js/commands/server/connectServerCommand.ts","webpack://server-manager/./app/js/commands/server/reconnectServerCommand.ts","webpack://server-manager/./app/js/commands/server/signInServerCommand.ts","webpack://server-manager/./app/js/commands/server/removeServerCommand.ts","webpack://server-manager/./app/js/commands/user/resetUserCommand.ts","webpack://server-manager/./app/js/commands/user/switchUserCommand.ts","webpack://server-manager/./app/js/utils/getUserRequestParams.ts","webpack://server-manager/./app/js/utils/user/getUserAPIPromise.ts","webpack://server-manager/./app/js/commands/user/authenticateWithServerCommand.ts","webpack://server-manager/./app/js/commands/user/authenticateWithHashCommand.ts","webpack://server-manager/./app/js/commands/user/removeDeviceCommand.ts","webpack://server-manager/./app/js/stores/actions/helpers/user/signOut.ts","webpack://server-manager/./app/js/commands/user/signOutCommand.ts","webpack://server-manager/./app/js/initializers/commandsInitializer.ts","webpack://server-manager/./app/js/managers/cloudServerCompanionProxy.ts","webpack://server-manager/./app/js/utils/constants/localStorageLeaderEvents.ts","webpack://server-manager/./app/js/initializers/companionInitializer.ts","webpack://server-manager/./app/js/initializers/desktopSettingsInitializer.ts","webpack://server-manager/./app/js/adapters/storage/AbstractStorage.ts","webpack://server-manager/./app/js/adapters/storage/BasicVolatileStorage.ts","webpack://server-manager/./app/js/adapters/volatileStorageAdapter.ts","webpack://server-manager/./app/js/utils/storage/jsonStorage.ts","webpack://server-manager/./app/js/initializers/migrations/migrateExperienceSettingsToAllStoredUsers.ts","webpack://server-manager/./app/js/initializers/migrations/migrateExperienceSettings.ts","webpack://server-manager/./app/js/utils/constants/castAppIDs.ts","webpack://server-manager/./app/js/utils/constants/debugAdKinds.ts","webpack://server-manager/./app/js/utils/constants/debugLevels.ts","webpack://server-manager/./app/js/models/settings/DeviceSettingsModel.ts","webpack://server-manager/./app/js/initializers/migrations/migrateExperienceSettingsToDeviceSettings.ts","webpack://server-manager/./app/js/stores/actions/helpers/toHomeHubIdentifier.ts","webpack://server-manager/./app/js/utils/constants/subtitleColors.ts","webpack://server-manager/./app/js/utils/constants/subtitlePositions.ts","webpack://server-manager/./app/js/utils/constants/subtitlesBurnLevels.ts","webpack://server-manager/./app/js/utils/language/closestLanguage.ts","webpack://server-manager/./app/js/utils/language/getDefaultLanguage.ts","webpack://server-manager/./app/js/views/v3/helpers/props/metadataListStyle.ts","webpack://server-manager/./app/js/models/user/ReminderModel.ts","webpack://server-manager/./app/js/models/user/ReminderCollection.ts","webpack://server-manager/./app/js/models/user/UserExperienceSettingsModel.ts","webpack://server-manager/./app/js/views/v3/helpers/props/recordingScheduleViewTypes.ts","webpack://server-manager/./app/js/initializers/migrations/migrateDirectoryKeyToID.ts","webpack://server-manager/./app/js/initializers/migrations/migrateSourceHiddenAt.ts","webpack://server-manager/./app/js/initializers/migrations/migrateUserExperienceSettings.ts","webpack://server-manager/./app/js/initializers/migrations/migrateRelayReminders.ts","webpack://server-manager/./app/js/initializers/migrations/migrateToAutoHome.ts","webpack://server-manager/./app/js/initializers/migrations/migrateAudioBoost.ts","webpack://server-manager/./app/js/initializers/migrations/migrateCustomPromotedToHubs.ts","webpack://server-manager/./app/js/initializers/migrations/migrateLocalStorageUserExperienceSettings.ts","webpack://server-manager/./app/js/utils/constants/preferInsecureConnectionsOptions.ts","webpack://server-manager/./app/js/models/DesktopSettingsModel.ts","webpack://server-manager/./app/js/initializers/migrations/migrateSettingsToDeviceSettings.ts","webpack://server-manager/./app/js/initializers/migrations/migrateSettingsToUserExperienceSettings.ts","webpack://server-manager/./app/js/initializers/desktopStorageInitializer.ts","webpack://server-manager/./app/js/initializers/errorTrackerInitializer.ts","webpack://server-manager/./app/js/initializers/federatedAuthPINInitializer.ts","webpack://server-manager/./app/js/utils/url/removeUrlParam.ts","webpack://server-manager/./app/js/v4/utils/data/filters/omitProviderForbiddenHeadersFilter.ts","webpack://server-manager/./app/js/v4/utils/data/filters/simpleCORSFilter.ts","webpack://server-manager/./app/js/v4/utils/data/api.ts","webpack://server-manager/./app/js/initializers/languageInitializer.ts","webpack://server-manager/./app/js/utils/media/silentMP3.ts","webpack://server-manager/./app/js/utils/mediaElementPool.ts","webpack://server-manager/./app/js/initializers/mediaElementInitializer.ts","webpack://server-manager/./app/js/initializers/mediaServerEventInitializer.ts","webpack://server-manager/./app/js/utils/metrics/getMetricsProtocolContext.ts","webpack://server-manager/./app/js/initializers/metricsInitializer.ts","webpack://server-manager/./app/js/utils/log/AbstractReporter.ts","webpack://server-manager/./app/js/utils/log/ConsoleReporter.ts","webpack://server-manager/./app/js/initializers/reportersInitializer.ts","webpack://server-manager/./app/js/initializers/serverInitializer.ts","webpack://server-manager/./app/js/utils/server/getCloudServerConnection.ts","webpack://server-manager/./app/js/initializers/sourceInitializer.ts","webpack://server-manager/./app/js/utils/storage/deleteNonEssentialCookies.ts","webpack://server-manager/./app/js/managers/UserManager.ts","webpack://server-manager/./app/js/initializers/userInitializer.ts","webpack://server-manager/./app/js/initializers/appInitializer.tsx","webpack://server-manager/./app/js/initializers/configs/desktopPartials.ts","webpack://server-manager/./app/js/utils/xmlWriter.ts","webpack://server-manager/./app/js/adapters/MediaServerCompanionProxy.ts","webpack://server-manager/./app/js/adapters/createLocalStorageVote.ts","webpack://server-manager/./app/js/adapters/createCompanionVote.ts","webpack://server-manager/./app/js/utils/createTranslationInterpolator.ts","webpack://server-manager/./app/js/mixins/localizerMixin.ts","webpack://server-manager/./app/js/utils/language/languageFiles.ts","webpack://server-manager/./app/js/stores/actions/helpers/awaitEvents.ts","webpack://server-manager/./app/js/stores/actions/helpers/awaitReady.ts","webpack://server-manager/./app/js/adapters/Localizer.ts","webpack://server-manager/./app/js/adapters/DesktopLocalizer.ts","webpack://server-manager/./app/js/adapters/baseDesktopAdapters.ts","webpack://server-manager/./app/js/adapters/desktopDimensions.ts","webpack://server-manager/./app/js/utils/metrics/getEnvironmentForMetrics.ts","webpack://server-manager/./app/js/adapters/storage/PersistentWebStorage.ts","webpack://server-manager/./app/js/adapters/storage/VolatileWebStorage.ts","webpack://server-manager/./app/js/adapters/desktopAdapters.ts","webpack://server-manager/./app/js/utils/AjaxQueue.ts","webpack://server-manager/./app/js/adapters/analytics/createPlexMetricsReporter.ts","webpack://server-manager/./app/js/adapters/createSettingFinder.ts","webpack://server-manager/./app/js/adapters/interfaces/metricsInterface.ts","webpack://server-manager/./app/js/adapters/interfaces/metricsReporterInterface.ts","webpack://server-manager/./app/js/adapters/testServerConnection.ts","webpack://server-manager/./app/js/managers/CompanionServerManager.ts","webpack://server-manager/./app/js/managers/ServerConnectionManager.ts","webpack://server-manager/./app/js/managers/DesktopServerConnectionManager.ts","webpack://server-manager/./app/js/utils/metrics/getPerformanceMeasureName.ts","webpack://server-manager/./app/js/utils/metrics/roundMetricsDuration.ts","webpack://server-manager/./app/js/utils/number/roundToNearest.ts","webpack://server-manager/./app/js/utils/metrics/updateSessionLastInteractionTime.ts","webpack://server-manager/./app/js/utils/string/uuidV4.ts","webpack://server-manager/./app/js/managers/MetricsManager.ts","webpack://server-manager/./app/js/managers/PrimaryServerManager.ts","webpack://server-manager/./app/js/managers/ProviderManager.ts","webpack://server-manager/./app/js/managers/ServerConnectionTestManager.ts","webpack://server-manager/./app/js/utils/server/updateServerConnectionsFromResource.ts","webpack://server-manager/./app/js/utils/server/toStableServerModelJSON.ts","webpack://server-manager/./app/js/managers/ServerManager.ts","webpack://server-manager/./app/js/utils/server/createServerFromResource.ts","webpack://server-manager/./app/js/managers/ServerUpdateManager.ts","webpack://server-manager/./app/js/utils/source/getSource.ts","webpack://server-manager/./app/js/managers/SourceManager.ts","webpack://server-manager/./app/js/views/v3/helpers/provider/findProviderContentFeatureDirectory.ts","webpack://server-manager/./app/js/models/debug/LogModel.ts","webpack://server-manager/./app/js/models/debug/debugModel.ts","webpack://server-manager/./app/js/models/debug/LogCollection.ts","webpack://server-manager/./app/js/utils/constants/player/timelineStates.ts","webpack://server-manager/./app/js/stores/actions/helpers/player/getTimelineState.ts","webpack://server-manager/./app/js/stores/actions/helpers/isPlaybackActive.ts","webpack://server-manager/./app/js/stores/selectors/settings/selectDeviceSettingsVolume.ts","webpack://server-manager/./app/js/stores/selectors/settings/selectRemoteQuality.ts","webpack://server-manager/./app/js/stores/selectors/settings/selectRestorePlayQueue.ts","webpack://server-manager/./app/js/stores/selectors/settings/selectSubtitleSettings.ts","webpack://server-manager/./app/js/utils/player/handleLocalCompanionCommand.ts","webpack://server-manager/./app/js/models/server/ServerUpdateModel.ts","webpack://server-manager/./app/js/views/modals/DownloadVersionModal.ts","webpack://server-manager/./app/js/utils/metadata/formatVideoLevel.ts","webpack://server-manager/./app/js/utils/string/format/formatPropertyLabel.ts","webpack://server-manager/./app/js/views/modals/MediaInfoModal.ts","webpack://server-manager/./app/js/stores/actions/metadata/metadataActions.ts","webpack://server-manager/./app/js/utils/metadata/isFavorite.ts","webpack://server-manager/./app/js/stores/actions/helpers/player/fetchPrePlayMetadataItem.ts","webpack://server-manager/./app/js/stores/actions/helpers/player/resolveMediaFromOrigin.ts","webpack://server-manager/./app/js/stores/actions/helpers/user/hasUserFeature.ts","webpack://server-manager/./app/js/utils/mediaDecisionEngine.ts","webpack://server-manager/./app/js/utils/media/isBitmapSubtitles.ts","webpack://server-manager/./app/js/utils/media/getMissingParts.ts","webpack://server-manager/./app/js/stores/actions/ui/prePlayPageActions.ts","webpack://server-manager/./app/js/utils/constants/timelineEvents.ts","webpack://server-manager/./app/js/utils/parser/splitChildren.ts","webpack://server-manager/./app/js/utils/pubsub/MediaServerEventConnection.ts","webpack://server-manager/./app/js/models/BaseAppModel.ts","webpack://server-manager/./app/js/models/server/ResourceModel.ts","webpack://server-manager/./app/js/models/server/ResourceCollection.ts","webpack://server-manager/./app/js/models/server/CloudServerModel.ts","webpack://server-manager/./app/js/utils/promise/whenFirstSucceed.ts","webpack://server-manager/./app/js/models/server/ServerCollection.ts","webpack://server-manager/./app/js/models/server/TransientServerModel.ts","webpack://server-manager/./app/js/models/provider/ProviderIntegrationModel.ts","webpack://server-manager/./app/js/models/provider/ProviderIntegrationCollection.ts","webpack://server-manager/./app/js/models/provider/ProviderIntegrationsModel.ts","webpack://server-manager/./app/js/models/player/LiveTVSessionModel.ts","webpack://server-manager/./app/js/models/ui/PlayerModel.ts","webpack://server-manager/./app/js/utils/constants/player/confirmLocalToRemoteStates.ts","webpack://server-manager/./app/js/utils/constants/metrics/metricsPlayers.ts","webpack://server-manager/./app/js/models/ui/ProviderSettingsPageModel.ts","webpack://server-manager/./app/js/views/v3/components/pages/help/ServerLogPageModel.ts","webpack://server-manager/./app/js/models/ui/AuthCodeExchangeModel.ts","webpack://server-manager/./app/js/models/ui/BackgroundModel.ts","webpack://server-manager/./app/js/models/ui/DVRSettingsUIModel.ts","webpack://server-manager/./app/js/models/ui/DiscoverPageModel.ts","webpack://server-manager/./app/js/models/ui/DesktopUIModel.ts","webpack://server-manager/./app/js/models/user/AdConsentModel.ts","webpack://server-manager/./app/js/models/user/GeoIPModel.ts","webpack://server-manager/./app/js/v4/core/user/userTypes.ts","webpack://server-manager/./app/js/utils/types/sharingSettingsAttrs.ts","webpack://server-manager/./app/js/utils/constants/filterOptionTagTypes.ts","webpack://server-manager/./app/js/models/user/ServerShareLibraryModel.ts","webpack://server-manager/./app/js/models/user/ServerShareLibraryCollection.ts","webpack://server-manager/./app/js/models/user/ServerShareSharingSettingsModel.ts","webpack://server-manager/./app/js/models/user/ServerShareModel2.ts","webpack://server-manager/./app/js/models/user/ServerShareCollection2.ts","webpack://server-manager/./app/js/models/user/FriendModel2.ts","webpack://server-manager/./app/js/models/user/FriendCollection2.ts","webpack://server-manager/./app/js/models/user/HomeDetailsModel.ts","webpack://server-manager/./app/js/models/user/UserProfileModel.ts","webpack://server-manager/./app/js/models/user/UserSettingCollection.ts","webpack://server-manager/./app/js/models/user/UserModel.ts","webpack://server-manager/./app/js/utils/metrics/getUrlWithCampaignParams.ts","webpack://server-manager/./app/js/utils/url/addSearchParams.ts","webpack://server-manager/./app/js/utils/constants/player/companion/castApiAvailabilities.ts","webpack://server-manager/./app/js/models/EntityModel.ts","webpack://server-manager/./app/js/models/EntityCollection.ts","webpack://server-manager/./app/js/v4/core/serverDevices/serverDevicesSlice.ts","webpack://server-manager/./app/js/v4/core/user/userSlice.ts","webpack://server-manager/./app/js/v4/core/coreReducer.ts","webpack://server-manager/./app/js/v4/features/dashboard/dashboardReducer.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/dvrManagementReducer.ts","webpack://server-manager/./app/js/v4/features/featuresReducer.ts","webpack://server-manager/./app/js/v4/root/rootReducer.ts","webpack://server-manager/./app/js/v4/utils/data/saga/takeLeadingPerID.ts","webpack://server-manager/./app/js/v4/core/serverAccounts/serverAccountsSaga.ts","webpack://server-manager/./app/js/v4/core/serverDevices/selectors/createServerDevicesSelector.ts","webpack://server-manager/./app/js/v4/core/serverDevices/serverDevicesSaga.ts","webpack://server-manager/./app/js/v4/utils/data/normalizers/normalizeUtils.ts","webpack://server-manager/./app/js/v4/core/serverNowPlayingSessions/utils/normalizeServerNowPlayingSessionsResponse.ts","webpack://server-manager/./app/js/v4/core/serverNowPlayingSessions/serverNowPlayingSessionsSaga.ts","webpack://server-manager/./app/js/v4/utils/data/saga/putLegacyActionDangerously.ts","webpack://server-manager/./app/js/v4/core/user/userSaga.ts","webpack://server-manager/./app/js/v4/core/utils/unescapeResponse.ts","webpack://server-manager/./app/js/v4/core/coreSaga.ts","webpack://server-manager/./app/js/v4/features/dashboard/dashboardSaga.ts","webpack://server-manager/./app/js/utils/dateTime/getUTCDate.ts","webpack://server-manager/./app/js/v4/features/dashboard/utils/getServerUTCTime.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/utils/normalizeChannelMappingResponse.ts","webpack://server-manager/./app/js/v4/utils/TSObject.ts","webpack://server-manager/./app/js/v4/core/settings/settingsTypes.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/utils/normalizeDevicesResponse.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/utils/normalizeDVRResponse.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/utils/normalizeMediaSettingsResponse.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/dvrSetupSaga.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/epgSettingsSaga.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/utils/normalizeLineupChannelsResponse.ts","webpack://server-manager/./app/js/v4/features/dvrManagement/dvrManagementSaga.ts","webpack://server-manager/./app/js/v4/features/libraryManagement/libraryManagementSaga.ts","webpack://server-manager/./app/js/v4/features/livetv/utils/normalizeChannelsResponse.ts","webpack://server-manager/./app/js/v4/features/livetv/liveTVSaga.ts","webpack://server-manager/./app/js/v4/features/featuresSaga.ts","webpack://server-manager/./app/js/v4/root/store.ts","webpack://server-manager/./app/js/v4/root/rootSaga.ts","webpack://server-manager/./app/js/models/StoreModel.ts","webpack://server-manager/./app/js/models/DesktopAppModel.ts","webpack://server-manager/./app/js/utils/state/createEntitiesModelClass.ts","webpack://server-manager/./app/js/models/SessionStatsModel.ts","webpack://server-manager/./app/js/models/server/OauthProviderUsageModel.ts","webpack://server-manager/./app/js/models/server/OauthProviderModel.ts","webpack://server-manager/./app/js/models/server/OauthProviderCollection.ts","webpack://server-manager/./app/js/models/server/CloudServerFlexModel.ts","webpack://server-manager/./app/js/models/library/convert/BackgroundTranscodeJobModel.ts","webpack://server-manager/./app/js/models/library/convert/BackgroundTranscodeJobCollection.ts","webpack://server-manager/./app/js/models/player/PlexPlayerModel.ts","webpack://server-manager/./app/js/models/player/PlexPlayerCollection.ts","webpack://server-manager/./app/js/models/server/ActivityModel.ts","webpack://server-manager/./app/js/models/server/ActivityCollection.ts","webpack://server-manager/./app/js/models/server/NeighborhoodDeviceModel.ts","webpack://server-manager/./app/js/models/server/NeighborhoodDeviceCollection.ts","webpack://server-manager/./app/js/models/PaginatedCollection.ts","webpack://server-manager/./app/js/models/server/ServerAlertModel.ts","webpack://server-manager/./app/js/models/server/ServerAlertCollection.ts","webpack://server-manager/./app/js/models/server/TranscodeJobModel.ts","webpack://server-manager/./app/js/models/server/TranscodeJobCollection.ts","webpack://server-manager/./app/js/models/server/ServerFlexModel.ts","webpack://server-manager/./app/js/models/storage/StoredUserExperienceSettingsModel.ts","webpack://server-manager/./app/js/models/player/CloudPlayerCollection.ts","webpack://server-manager/./app/js/models/player/CloudCompanionModel.ts","webpack://server-manager/./app/js/utils/constants/player/companion/cloudCompanionLinkStates.ts","webpack://server-manager/./app/js/models/player/CloudCompanionCollection.ts","webpack://server-manager/./app/js/models/user/DeviceModel.ts","webpack://server-manager/./app/js/models/user/DeviceCollection.ts","webpack://server-manager/./app/js/models/user/HomeUserModel2.ts","webpack://server-manager/./app/js/models/user/HomeUserCollection2.ts","webpack://server-manager/./app/js/models/user/InviteModel.ts","webpack://server-manager/./app/js/models/user/InviteCollection.ts","webpack://server-manager/./app/js/models/user/SocialNetworkModel.ts","webpack://server-manager/./app/js/models/user/SocialNetworkCollection.ts","webpack://server-manager/./app/js/models/user/SubscriptionPlanModel.ts","webpack://server-manager/./app/js/models/user/SubscriptionPlanCollection.ts","webpack://server-manager/./app/js/models/user/WebhookModel.ts","webpack://server-manager/./app/js/models/user/WebhookCollection.ts","webpack://server-manager/./app/js/models/user/UserFlexModel.ts","webpack://server-manager/./app/js/stores/actions/provider/providerIntegrationsActions.ts","webpack://server-manager/./app/js/stores/actions/provider/createLocastAccount.ts","webpack://server-manager/./app/js/utils/constants/providerSettingTypes.ts","webpack://server-manager/./app/js/stores/actions/provider/providerSettingsActions.ts","webpack://server-manager/./app/js/stores/actions/oauthActions.ts","webpack://server-manager/./app/js/stores/actions/actionTypes.ts","webpack://server-manager/./app/js/stores/actions/ui/backgroundActions.ts","webpack://server-manager/./app/js/stores/actions/actionHandlers.ts","webpack://server-manager/./app/js/initializers/desktopAdaptersInitializer.ts","webpack://server-manager/./app/js/stores/createAppStore.ts","webpack://server-manager/./app/js/stores/createStore.ts","webpack://server-manager/./app/js/initializers/baseDesktopAdaptersInitializer.ts","webpack://server-manager/./app/js/app.ts","webpack://server-manager/./app/js/main.ts","webpack://server-manager/./app/main.js","webpack://server-manager/./app/styles/variables/animations.ts","webpack://server-manager/./app/styles/variables/colors.ts","webpack://server-manager/./app/styles/variables/dimensions.ts","webpack://server-manager/./app/styles/variables/easings.ts","webpack://server-manager/./app/js/libs/jssha256-0.1.js","webpack://server-manager/./app/js/views/lists/server/FileList.tpl","webpack://server-manager/./app/templates/alerts/AlertBarView.tpl","webpack://server-manager/./app/templates/alerts/AlertView.tpl","webpack://server-manager/./app/templates/alerts/MediaGrabberDeviceDiscoveredAlertBarView.tpl","webpack://server-manager/./app/templates/editsection/EditSectionAgentSettingsView.tpl","webpack://server-manager/./app/templates/editsection/EditSectionErrorView.tpl","webpack://server-manager/./app/templates/lists/server/FileListItem.tpl","webpack://server-manager/./app/templates/lists/server/FilePathListItem.tpl","webpack://server-manager/./app/templates/lists/setup/SectionCardListItem.tpl","webpack://server-manager/./app/templates/modals/AddFolderModal.tpl","webpack://server-manager/./app/templates/modals/ConfirmModal.tpl","webpack://server-manager/./app/templates/modals/DownloadVersionModal.tpl","webpack://server-manager/./app/templates/modals/EditSectionModal.tpl","webpack://server-manager/./app/templates/modals/LibraryFailureModal.tpl","webpack://server-manager/./app/templates/modals/MediaInfoModal.tpl","webpack://server-manager/./app/templates/modals/PlexPassModal.tpl","webpack://server-manager/./app/templates/modals/RelayConfirmationModal.tpl","webpack://server-manager/./app/templates/modals/SelectMediaFileModal.tpl","webpack://server-manager/./app/templates/modals/convert/ConvertErrorView.tpl","webpack://server-manager/./app/templates/modals/convert/ConvertFormLocationView.tpl","webpack://server-manager/./app/templates/modals/convert/ConvertFormPolicyView.tpl","webpack://server-manager/./app/templates/modals/convert/ConvertFormTargetView.tpl","webpack://server-manager/./app/templates/modals/convert/ConvertFormView.tpl","webpack://server-manager/./app/templates/modals/convert/ConvertLoadingView.tpl","webpack://server-manager/./app/templates/modals/convert/ConvertModal.tpl","webpack://server-manager/./app/templates/modals/convert/ConvertSuccessView.tpl","webpack://server-manager/./app/templates/modals/user/UserSelectModal.tpl","webpack://server-manager/./app/templates/modals/user/UserSelectModalAddUserListItem.tpl","webpack://server-manager/./app/templates/modals/user/UserSelectModalAlertBarView.tpl","webpack://server-manager/./app/templates/modals/user/UserSelectModalPINPane.tpl","webpack://server-manager/./app/templates/modals/user/UserSelectModalUserListItem.tpl","webpack://server-manager/./app/templates/modals/user/UserSelectModalUsersPane.tpl","webpack://server-manager/./app/templates/partials/AutocompleteTextInput.tpl","webpack://server-manager/./app/templates/partials/ConnectError.tpl","webpack://server-manager/./app/templates/partials/LockableNumericInput.tpl","webpack://server-manager/./app/templates/partials/LockableTagInput.tpl","webpack://server-manager/./app/templates/partials/LockableTextInput.tpl","webpack://server-manager/./app/templates/partials/Setting.tpl","webpack://server-manager/./app/templates/partials/TextInput.tpl","webpack://server-manager/./app/templates/section/edit/EditSectionAdvancedView.tpl","webpack://server-manager/./app/templates/section/edit/EditSectionFoldersView.tpl","webpack://server-manager/./app/templates/section/edit/EditSectionPathItemView.tpl","webpack://server-manager/./app/templates/section/edit/EditSectionSelectPremiumMusicView.tpl","webpack://server-manager/./app/templates/section/edit/EditSectionSettingView.tpl","webpack://server-manager/./app/templates/section/edit/EditSectionTypeView.tpl","webpack://server-manager/./app/templates/setup/SetupBasicView.tpl","webpack://server-manager/./app/templates/setup/SetupCompleteView.tpl","webpack://server-manager/./app/templates/setup/SetupErrorView.tpl","webpack://server-manager/./app/templates/setup/SetupIntroView.tpl","webpack://server-manager/./app/templates/setup/SetupLibraryView.tpl","webpack://server-manager/./app/templates/setup/SetupLoadingView.tpl","webpack://server-manager/./app/templates/setup/SetupView.tpl","webpack://server-manager/./app/js/views/v3/components/core/base/PlexIcon.css?45ee","webpack://server-manager/./app/js/views/v3/components/core/modals/ModalFooter.css?4746","webpack://server-manager/./app/glyphs/alert-560.svg","webpack://server-manager/./app/glyphs/remove-560.svg","webpack://server-manager/webpack/runtime/startup prefetch"],"sourcesContent":["//     Backbone.js 1.2.3\n\n//     (c) 2010-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(factory) {\n\n  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\n  // We use `self` instead of `window` for `WebWorker` support.\n  var root = (typeof self == 'object' && self.self == self && self) ||\n            (typeof global == 'object' && global.global == global && global);\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore'), $;\n    try { $ = require('jquery'); } catch(e) {}\n    factory(root, exports, _, $);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n\n}(function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create a local reference to a common array method we'll want to use later.\n  var slice = Array.prototype.slice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.2.3';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... this will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Proxy Backbone class methods to Underscore functions, wrapping the model's\n  // `attributes` object or collection's `models` array behind the scenes.\n  //\n  // collection.filter(function(model) { return model.get('age') > 10 });\n  // collection.each(this.addView);\n  //\n  // `Function#apply` can be slow so we use the method's arg count, if we know it.\n  var addMethod = function(length, method, attribute) {\n    switch (length) {\n      case 1: return function() {\n        return _[method](this[attribute]);\n      };\n      case 2: return function(value) {\n        return _[method](this[attribute], value);\n      };\n      case 3: return function(iteratee, context) {\n        return _[method](this[attribute], cb(iteratee, this), context);\n      };\n      case 4: return function(iteratee, defaultVal, context) {\n        return _[method](this[attribute], cb(iteratee, this), defaultVal, context);\n      };\n      default: return function() {\n        var args = slice.call(arguments);\n        args.unshift(this[attribute]);\n        return _[method].apply(_, args);\n      };\n    }\n  };\n  var addUnderscoreMethods = function(Class, methods, attribute) {\n    _.each(methods, function(length, method) {\n      if (_[method]) Class.prototype[method] = addMethod(length, method, attribute);\n    });\n  };\n\n  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\n  var cb = function(iteratee, instance) {\n    if (_.isFunction(iteratee)) return iteratee;\n    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\n    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\n    return iteratee;\n  };\n  var modelMatcher = function(attrs) {\n    var matcher = _.matches(attrs);\n    return function(model) {\n      return matcher(model.attributes);\n    };\n  };\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // a custom event channel. You may bind a callback to an event with `on` or\n  // remove with `off`; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {};\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // Iterates over the standard `event, callback` (as well as the fancy multiple\n  // space-separated events `\"change blur\", callback` and jQuery-style event\n  // maps `{event: callback}`).\n  var eventsApi = function(iteratee, events, name, callback, opts) {\n    var i = 0, names;\n    if (name && typeof name === 'object') {\n      // Handle event maps.\n      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\n      for (names = _.keys(name); i < names.length ; i++) {\n        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\n      }\n    } else if (name && eventSplitter.test(name)) {\n      // Handle space separated event names by delegating them individually.\n      for (names = name.split(eventSplitter); i < names.length; i++) {\n        events = iteratee(events, names[i], callback, opts);\n      }\n    } else {\n      // Finally, standard events.\n      events = iteratee(events, name, callback, opts);\n    }\n    return events;\n  };\n\n  // Bind an event to a `callback` function. Passing `\"all\"` will bind\n  // the callback to all events fired.\n  Events.on = function(name, callback, context) {\n    return internalOn(this, name, callback, context);\n  };\n\n  // Guard the `listening` argument from the public API.\n  var internalOn = function(obj, name, callback, context, listening) {\n    obj._events = eventsApi(onApi, obj._events || {}, name, callback, {\n        context: context,\n        ctx: obj,\n        listening: listening\n    });\n\n    if (listening) {\n      var listeners = obj._listeners || (obj._listeners = {});\n      listeners[listening.id] = listening;\n    }\n\n    return obj;\n  };\n\n  // Inversion-of-control versions of `on`. Tell *this* object to listen to\n  // an event in another object... keeping track of what it's listening to\n  // for easier unbinding later.\n  Events.listenTo =  function(obj, name, callback) {\n    if (!obj) return this;\n    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n    var listeningTo = this._listeningTo || (this._listeningTo = {});\n    var listening = listeningTo[id];\n\n    // This object is not listening to any other events on `obj` yet.\n    // Setup the necessary references to track the listening callbacks.\n    if (!listening) {\n      var thisId = this._listenId || (this._listenId = _.uniqueId('l'));\n      listening = listeningTo[id] = {obj: obj, objId: id, id: thisId, listeningTo: listeningTo, count: 0};\n    }\n\n    // Bind callbacks on obj, and keep track of them on listening.\n    internalOn(obj, name, callback, this, listening);\n    return this;\n  };\n\n  // The reducing API that adds a callback to the `events` object.\n  var onApi = function(events, name, callback, options) {\n    if (callback) {\n      var handlers = events[name] || (events[name] = []);\n      var context = options.context, ctx = options.ctx, listening = options.listening;\n      if (listening) listening.count++;\n\n      handlers.push({ callback: callback, context: context, ctx: context || ctx, listening: listening });\n    }\n    return events;\n  };\n\n  // Remove one or many callbacks. If `context` is null, removes all\n  // callbacks with that function. If `callback` is null, removes all\n  // callbacks for the event. If `name` is null, removes all bound\n  // callbacks for all events.\n  Events.off =  function(name, callback, context) {\n    if (!this._events) return this;\n    this._events = eventsApi(offApi, this._events, name, callback, {\n        context: context,\n        listeners: this._listeners\n    });\n    return this;\n  };\n\n  // Tell this object to stop listening to either specific events ... or\n  // to every object it's currently listening to.\n  Events.stopListening =  function(obj, name, callback) {\n    var listeningTo = this._listeningTo;\n    if (!listeningTo) return this;\n\n    var ids = obj ? [obj._listenId] : _.keys(listeningTo);\n\n    for (var i = 0; i < ids.length; i++) {\n      var listening = listeningTo[ids[i]];\n\n      // If listening doesn't exist, this object is not currently\n      // listening to obj. Break out early.\n      if (!listening) break;\n\n      listening.obj.off(name, callback, this);\n    }\n    if (_.isEmpty(listeningTo)) this._listeningTo = void 0;\n\n    return this;\n  };\n\n  // The reducing API that removes a callback from the `events` object.\n  var offApi = function(events, name, callback, options) {\n    if (!events) return;\n\n    var i = 0, listening;\n    var context = options.context, listeners = options.listeners;\n\n    // Delete all events listeners and \"drop\" events.\n    if (!name && !callback && !context) {\n      var ids = _.keys(listeners);\n      for (; i < ids.length; i++) {\n        listening = listeners[ids[i]];\n        delete listeners[listening.id];\n        delete listening.listeningTo[listening.objId];\n      }\n      return;\n    }\n\n    var names = name ? [name] : _.keys(events);\n    for (; i < names.length; i++) {\n      name = names[i];\n      var handlers = events[name];\n\n      // Bail out if there are no events stored.\n      if (!handlers) break;\n\n      // Replace events if there are any remaining.  Otherwise, clean up.\n      var remaining = [];\n      for (var j = 0; j < handlers.length; j++) {\n        var handler = handlers[j];\n        if (\n          callback && callback !== handler.callback &&\n            callback !== handler.callback._callback ||\n              context && context !== handler.context\n        ) {\n          remaining.push(handler);\n        } else {\n          listening = handler.listening;\n          if (listening && --listening.count === 0) {\n            delete listeners[listening.id];\n            delete listening.listeningTo[listening.objId];\n          }\n        }\n      }\n\n      // Update tail event if the list has any events.  Otherwise, clean up.\n      if (remaining.length) {\n        events[name] = remaining;\n      } else {\n        delete events[name];\n      }\n    }\n    if (_.size(events)) return events;\n  };\n\n  // Bind an event to only be triggered a single time. After the first time\n  // the callback is invoked, its listener will be removed. If multiple events\n  // are passed in using the space-separated syntax, the handler will fire\n  // once for each event, not once for a combination of all events.\n  Events.once =  function(name, callback, context) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.off, this));\n    return this.on(events, void 0, context);\n  };\n\n  // Inversion-of-control versions of `once`.\n  Events.listenToOnce =  function(obj, name, callback) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.stopListening, this, obj));\n    return this.listenTo(obj, events);\n  };\n\n  // Reduces the event callbacks into a map of `{event: onceWrapper}`.\n  // `offer` unbinds the `onceWrapper` after it has been called.\n  var onceMap = function(map, name, callback, offer) {\n    if (callback) {\n      var once = map[name] = _.once(function() {\n        offer(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n    }\n    return map;\n  };\n\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\n  // passed the same arguments as `trigger` is, apart from the event name\n  // (unless you're listening on `\"all\"`, which will cause your callback to\n  // receive the true name of the event as the first argument).\n  Events.trigger =  function(name) {\n    if (!this._events) return this;\n\n    var length = Math.max(0, arguments.length - 1);\n    var args = Array(length);\n    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\n\n    eventsApi(triggerApi, this._events, name, void 0, args);\n    return this;\n  };\n\n  // Handles triggering the appropriate event callbacks.\n  var triggerApi = function(objEvents, name, cb, args) {\n    if (objEvents) {\n      var events = objEvents[name];\n      var allEvents = objEvents.all;\n      if (events && allEvents) allEvents = allEvents.slice();\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, [name].concat(args));\n    }\n    return objEvents;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.cid = _.uniqueId(this.cidPrefix);\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    attrs = _.defaults({}, attrs, _.result(this, 'defaults'));\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // The prefix is used to create the client id which is used to identify models locally.\n    // You may want to override this if you're experiencing name clashes with model ids.\n    cidPrefix: 'c',\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Special-cased proxy to underscore's `_.matches` method.\n    matches: function(attrs) {\n      return !!_.iteratee(attrs, this)(this.attributes);\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      var unset      = options.unset;\n      var silent     = options.silent;\n      var changes    = [];\n      var changing   = this._changing;\n      this._changing = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n\n      var current = this.attributes;\n      var changed = this.changed;\n      var prev    = this._previousAttributes;\n\n      // For each `set` attribute, update or delete the current value.\n      for (var attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          changed[attr] = val;\n        } else {\n          delete changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Update the `id`.\n      this.id = this.get(this.idAttribute);\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0; i < changes.length; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      var changed = {};\n      for (var attr in diff) {\n        var val = diff[attr];\n        if (_.isEqual(old[attr], val)) continue;\n        changed[attr] = val;\n      }\n      return _.size(changed) ? changed : false;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server, merging the response with the model's\n    // local attributes. Any changed attributes will trigger a \"change\" event.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (!model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true, parse: true}, options);\n      var wait = options.wait;\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !wait) {\n        if (!this.set(attrs, options)) return false;\n      } else {\n        if (!this._validate(attrs, options)) return false;\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      var model = this;\n      var success = options.success;\n      var attributes = this.attributes;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\n        if (serverAttrs && !model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      // Set temporary attributes if `{wait: true}` to properly find new ids.\n      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\n\n      var method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n      if (method === 'patch' && !options.attrs) options.attrs = attrs;\n      var xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n      var wait = options.wait;\n\n      var destroy = function() {\n        model.stopListening();\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (wait) destroy();\n        if (success) success.call(options.context, model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      var xhr = false;\n      if (this.isNew()) {\n        _.defer(options.success);\n      } else {\n        wrapError(this, options);\n        xhr = this.sync('delete', this, options);\n      }\n      if (!wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      var id = this.get(this.idAttribute);\n      return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.defaults({validate: true}, options));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Model, mapped to the\n  // number of arguments they take.\n  var modelMethods = { keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\n      omit: 0, chain: 1, isEmpty: 1 };\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  addUnderscoreMethods(Model, modelMethods, 'attributes');\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analogous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Splices `insert` into `array` at index `at`.\n  var splice = function(array, insert, at) {\n    at = Math.min(Math.max(at, 0), array.length);\n    var tail = Array(array.length - at);\n    var length = insert.length;\n    for (var i = 0; i < tail.length; i++) tail[i] = array[i + at];\n    for (i = 0; i < length; i++) array[i + at] = insert[i];\n    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\n  };\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model) { return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set. `models` may be Backbone\n    // Models or raw JavaScript objects to be converted to Models, or any\n    // combination of the two.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      options = _.extend({}, options);\n      var singular = !_.isArray(models);\n      models = singular ? [models] : _.clone(models);\n      var removed = this._removeModels(models, options);\n      if (!options.silent && removed) this.trigger('update', this, options);\n      return singular ? removed[0] : removed;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      if (models == null) return;\n\n      options = _.defaults({}, options, setOptions);\n      if (options.parse && !this._isModel(models)) models = this.parse(models, options);\n\n      var singular = !_.isArray(models);\n      models = singular ? (models ? [models] : []) : models.slice();\n\n      var at = options.at;\n      if (at != null) at = +at;\n      if (at < 0) at += this.length + 1;\n\n      var set = [];\n      var toAdd = [];\n      var toRemove = [];\n      var modelMap = {};\n\n      var add = options.add;\n      var merge = options.merge;\n      var remove = options.remove;\n\n      var sort = false;\n      var sortable = this.comparator && (at == null) && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      var model;\n      for (var i = 0; i < models.length; i++) {\n        model = models[i];\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        var existing = this.get(model);\n        if (existing) {\n          if (merge && model !== existing) {\n            var attrs = this._isModel(model) ? model.attributes : model;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            if (sortable && !sort) sort = existing.hasChanged(sortAttr);\n          }\n          if (!modelMap[existing.cid]) {\n            modelMap[existing.cid] = true;\n            set.push(existing);\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(model, options);\n          if (model) {\n            toAdd.push(model);\n            this._addReference(model, options);\n            modelMap[model.cid] = true;\n            set.push(model);\n          }\n        }\n      }\n\n      // Remove stale models.\n      if (remove) {\n        for (i = 0; i < this.length; i++) {\n          model = this.models[i];\n          if (!modelMap[model.cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this._removeModels(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      var orderChanged = false;\n      var replace = !sortable && add && remove;\n      if (set.length && replace) {\n        orderChanged = this.length != set.length || _.some(this.models, function(model, index) {\n          return model !== set[index];\n        });\n        this.models.length = 0;\n        splice(this.models, set, 0);\n        this.length = this.models.length;\n      } else if (toAdd.length) {\n        if (sortable) sort = true;\n        splice(this.models, toAdd, at == null ? this.length : at);\n        this.length = this.models.length;\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort events.\n      if (!options.silent) {\n        for (i = 0; i < toAdd.length; i++) {\n          if (at != null) options.index = at + i;\n          model = toAdd[i];\n          model.trigger('add', model, this, options);\n        }\n        if (sort || orderChanged) this.trigger('sort', this, options);\n        if (toAdd.length || toRemove.length) this.trigger('update', this, options);\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options = options ? _.clone(options) : {};\n      for (var i = 0; i < this.models.length; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      return this.remove(model, options);\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      return this.remove(model, options);\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      var id = this.modelId(this._isModel(obj) ? obj.attributes : obj);\n      return this._byId[obj] || this._byId[id] || this._byId[obj.cid];\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      if (index < 0) index += this.length;\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      return this[first ? 'find' : 'filter'](attrs);\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      var comparator = this.comparator;\n      if (!comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      var length = comparator.length;\n      if (_.isFunction(comparator)) comparator = _.bind(comparator, this);\n\n      // Run sort based on type of `comparator`.\n      if (length === 1 || _.isString(comparator)) {\n        this.models = this.sortBy(comparator);\n      } else {\n        this.models.sort(comparator);\n      }\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return _.invoke(this.models, 'get', attr);\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success.call(options.context, collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      var wait = options.wait;\n      model = this._prepareModel(model, options);\n      if (!model) return false;\n      if (!wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(model, resp, callbackOpts) {\n        if (wait) collection.add(model, callbackOpts);\n        if (success) success.call(callbackOpts.context, model, resp, callbackOpts);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models, {\n        model: this.model,\n        comparator: this.comparator\n      });\n    },\n\n    // Define how to uniquely identify models in the collection.\n    modelId: function (attrs) {\n      return attrs[this.model.prototype.idAttribute || 'id'];\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (this._isModel(attrs)) {\n        if (!attrs.collection) attrs.collection = this;\n        return attrs;\n      }\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method called by both remove and set.\n    _removeModels: function(models, options) {\n      var removed = [];\n      for (var i = 0; i < models.length; i++) {\n        var model = this.get(models[i]);\n        if (!model) continue;\n\n        var index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n\n        removed.push(model);\n        this._removeReference(model, options);\n      }\n      return removed.length ? removed : false;\n    },\n\n    // Method for checking whether an object should be considered a model for\n    // the purposes of adding to the collection.\n    _isModel: function (model) {\n      return model instanceof Model;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      var id = this.modelId(model.attributes);\n      if (id != null) this._byId[id] = model;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      delete this._byId[model.cid];\n      var id = this.modelId(model.attributes);\n      if (id != null) delete this._byId[id];\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if ((event === 'add' || event === 'remove') && collection !== this) return;\n      if (event === 'destroy') this.remove(model, options);\n      if (event === 'change') {\n        var prevId = this.modelId(model.previousAttributes());\n        var id = this.modelId(model.attributes);\n        if (prevId !== id) {\n          if (prevId != null) delete this._byId[prevId];\n          if (id != null) this._byId[id] = model;\n        }\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var collectionMethods = { forEach: 3, each: 3, map: 3, collect: 3, reduce: 4,\n      foldl: 4, inject: 4, reduceRight: 4, foldr: 4, find: 3, detect: 3, filter: 3,\n      select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\n      contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\n      head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\n      without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\n      isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\n      sortBy: 3, indexBy: 3};\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  addUnderscoreMethods(Collection, collectionMethods, 'models');\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be set as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this._removeElement();\n      this.stopListening();\n      return this;\n    },\n\n    // Remove this view's element from the document and all event listeners\n    // attached to it. Exposed for subclasses using an alternative DOM\n    // manipulation API.\n    _removeElement: function() {\n      this.$el.remove();\n    },\n\n    // Change the view's element (`this.el` property) and re-delegate the\n    // view's events on the new element.\n    setElement: function(element) {\n      this.undelegateEvents();\n      this._setElement(element);\n      this.delegateEvents();\n      return this;\n    },\n\n    // Creates the `this.el` and `this.$el` references for this view using the\n    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\n    // context or an element. Subclasses can override this to utilize an\n    // alternative DOM manipulation API and are only required to set the\n    // `this.el` property.\n    _setElement: function(el) {\n      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n      this.el = this.$el[0];\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    delegateEvents: function(events) {\n      events || (events = _.result(this, 'events'));\n      if (!events) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[method];\n        if (!method) continue;\n        var match = key.match(delegateEventSplitter);\n        this.delegate(match[1], match[2], _.bind(method, this));\n      }\n      return this;\n    },\n\n    // Add a single event listener to the view's element (or a child element\n    // using `selector`). This only works for delegate-able events: not `focus`,\n    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\n    delegate: function(eventName, selector, listener) {\n      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view by `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      if (this.$el) this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // A finer-grained `undelegateEvents` for removing a single delegated event.\n    // `selector` and `listener` are both optional.\n    undelegate: function(eventName, selector, listener) {\n      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Produces a DOM element to be assigned to your view. Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _createElement: function(tagName) {\n      return document.createElement(tagName);\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        this.setElement(this._createElement(_.result(this, 'tagName')));\n        this._setAttributes(attrs);\n      } else {\n        this.setElement(_.result(this, 'el'));\n      }\n    },\n\n    // Set attributes from a hash on this view's element.  Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _setAttributes: function(attributes) {\n      this.$el.attr(attributes);\n    }\n\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // Pass along `textStatus` and `errorThrown` from jQuery.\n    var error = options.error;\n    options.error = function(xhr, textStatus, errorThrown) {\n      options.textStatus = textStatus;\n      options.errorThrown = errorThrown;\n      if (error) error.call(options.context, xhr, textStatus, errorThrown);\n    };\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch':  'PATCH',\n    'delete': 'DELETE',\n    'read':   'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        if (router.execute(callback, args, name) !== false) {\n          router.trigger.apply(router, ['route:' + name].concat(args));\n          router.trigger('route', name, args);\n          Backbone.history.trigger('route', router, name, args);\n        }\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args, name) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n                   .replace(optionalParam, '(?:$1)?')\n                   .replace(namedParam, function(match, optional) {\n                     return optional ? match : '([^/?]+)';\n                   })\n                   .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    this.checkUrl = _.bind(this.checkUrl, this);\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\n      return path === this.root && !this.getSearch();\n    },\n\n    // Does the pathname match the root?\n    matchRoot: function() {\n      var path = this.decodeFragment(this.location.pathname);\n      var root = path.slice(0, this.root.length - 1) + '/';\n      return root === this.root;\n    },\n\n    // Unicode characters in `location.pathname` are percent encoded so they're\n    // decoded for comparison. `%25` should not be decoded since it may be part\n    // of an encoded parameter.\n    decodeFragment: function(fragment) {\n      return decodeURI(fragment.replace(/%25/g, '%2525'));\n    },\n\n    // In IE6, the hash fragment and search params are incorrect if the\n    // fragment contains `?`.\n    getSearch: function() {\n      var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\n      return match ? match[0] : '';\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the pathname and search params, without the root.\n    getPath: function() {\n      var path = this.decodeFragment(\n        this.location.pathname + this.getSearch()\n      ).slice(this.root.length - 1);\n      return path.charAt(0) === '/' ? path.slice(1) : path;\n    },\n\n    // Get the cross-browser normalized URL fragment from the path or hash.\n    getFragment: function(fragment) {\n      if (fragment == null) {\n        if (this._usePushState || !this._wantsHashChange) {\n          fragment = this.getPath();\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error('Backbone.history has already been started');\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\n      this._useHashChange   = this._wantsHashChange && this._hasHashChange;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.history && this.history.pushState);\n      this._usePushState    = this._wantsPushState && this._hasPushState;\n      this.fragment         = this.getFragment();\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          var root = this.root.slice(0, -1) || '/';\n          this.location.replace(root + '#' + this.getPath());\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot()) {\n          this.navigate(this.getHash(), {replace: true});\n        }\n\n      }\n\n      // Proxy an iframe to handle location events if the browser doesn't\n      // support the `hashchange` event, HTML5 history, or the user wants\n      // `hashChange` but not `pushState`.\n      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\n        this.iframe = document.createElement('iframe');\n        this.iframe.src = 'javascript:0';\n        this.iframe.style.display = 'none';\n        this.iframe.tabIndex = -1;\n        var body = document.body;\n        // Using `appendChild` will throw on IE < 9 if the document is not ready.\n        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\n        iWindow.document.open();\n        iWindow.document.close();\n        iWindow.location.hash = '#' + this.fragment;\n      }\n\n      // Add a cross-platform `addEventListener` shim for older browsers.\n      var addEventListener = window.addEventListener || function (eventName, listener) {\n        return attachEvent('on' + eventName, listener);\n      };\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._usePushState) {\n        addEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        addEventListener('hashchange', this.checkUrl, false);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      // Add a cross-platform `removeEventListener` shim for older browsers.\n      var removeEventListener = window.removeEventListener || function (eventName, listener) {\n        return detachEvent('on' + eventName, listener);\n      };\n\n      // Remove window listeners.\n      if (this._usePushState) {\n        removeEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        removeEventListener('hashchange', this.checkUrl, false);\n      }\n\n      // Clean up the iframe if necessary.\n      if (this.iframe) {\n        document.body.removeChild(this.iframe);\n        this.iframe = null;\n      }\n\n      // Some environments will throw when clearing an undefined interval.\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n\n      // If the user pressed the back button, the iframe's hash will have\n      // changed and we should use that for comparison.\n      if (current === this.fragment && this.iframe) {\n        current = this.getHash(this.iframe.contentWindow);\n      }\n\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      // If the root doesn't match, no routes can match either.\n      if (!this.matchRoot()) return false;\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.some(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      // Normalize the fragment.\n      fragment = this.getFragment(fragment || '');\n\n      // Don't include a trailing slash on the root.\n      var root = this.root;\n      if (fragment === '' || fragment.charAt(0) === '?') {\n        root = root.slice(0, -1) || '/';\n      }\n      var url = root + fragment;\n\n      // Strip the fragment of the query and hash for matching.\n      fragment = fragment.replace(pathStripper, '');\n\n      // Decode for matching.\n      var decodedFragment = this.decodeFragment(fragment);\n\n      if (this.fragment === decodedFragment) return;\n      this.fragment = decodedFragment;\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._usePushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && (fragment !== this.getHash(this.iframe.contentWindow))) {\n          var iWindow = this.iframe.contentWindow;\n\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if (!options.replace) {\n            iWindow.document.open();\n            iWindow.document.close();\n          }\n\n          this._updateHash(iWindow.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent` constructor function.\n    var Surrogate = function(){ this.constructor = child; };\n    Surrogate.prototype = parent.prototype;\n    child.prototype = new Surrogate;\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) _.extend(child.prototype, protoProps);\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error.call(options.context, model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  return Backbone;\n\n}));\n","// Backbone.BabySitter\n// -------------------\n// v0.1.0\n//\n// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://github.com/marionettejs/backbone.babysitter\n\n(function (root, factory) {\n  if (typeof exports === 'object') {\n\n    var underscore = require('underscore');\n    var backbone = require('./backbone-1.2.3+19b88d2+57e89d8');\n\n    module.exports = factory(underscore, backbone);\n\n  } else if (typeof define === 'function' && define.amd) {\n\n    define(['underscore', './backbone-1.2.3+19b88d2+57e89d8'], factory);\n\n  }\n}(this, function (_, Backbone) {\n  \"option strict\";\n\n  // Backbone.ChildViewContainer\n// ---------------------------\n//\n// Provide a container to store, retrieve and\n// shut down child views.\n\nBackbone.ChildViewContainer = (function(Backbone, _){\n\n  // Container Constructor\n  // ---------------------\n\n  var Container = function(views){\n    this._views = {};\n    this._indexByModel = {};\n    this._indexByCustom = {};\n    this._updateLength();\n\n    _.each(views, this.add, this);\n  };\n\n  // Container Methods\n  // -----------------\n\n  _.extend(Container.prototype, {\n\n    // Add a view to this container. Stores the view\n    // by `cid` and makes it searchable by the model\n    // cid (and model itself). Optionally specify\n    // a custom key to store an retrieve the view.\n    add: function(view, customIndex){\n      var viewCid = view.cid;\n\n      // store the view\n      this._views[viewCid] = view;\n\n      // index it by model\n      if (view.model){\n        this._indexByModel[view.model.cid] = viewCid;\n      }\n\n      // index by custom\n      if (customIndex){\n        this._indexByCustom[customIndex] = viewCid;\n      }\n\n      this._updateLength();\n      return this;\n    },\n\n    // Find a view by the model that was attached to\n    // it. Uses the model's `cid` to find it.\n    findByModel: function(model){\n      return this.findByModelCid(model.cid);\n    },\n\n    // Find a view by the `cid` of the model that was attached to\n    // it. Uses the model's `cid` to find the view `cid` and\n    // retrieve the view using it.\n    findByModelCid: function(modelCid){\n      var viewCid = this._indexByModel[modelCid];\n      return this.findByCid(viewCid);\n    },\n\n    // Find a view by a custom indexer.\n    findByCustom: function(index){\n      var viewCid = this._indexByCustom[index];\n      return this.findByCid(viewCid);\n    },\n\n    // Find by index. This is not guaranteed to be a\n    // stable index.\n    findByIndex: function(index){\n      return _.values(this._views)[index];\n    },\n\n    // retrieve a view by its `cid` directly\n    findByCid: function(cid){\n      return this._views[cid];\n    },\n\n    // Remove a view\n    remove: function(view){\n      var viewCid = view.cid;\n\n      // delete model index\n      if (view.model){\n        delete this._indexByModel[view.model.cid];\n      }\n\n      // delete custom index\n      _.any(this._indexByCustom, function(cid, key) {\n        if (cid === viewCid) {\n          delete this._indexByCustom[key];\n          return true;\n        }\n      }, this);\n\n      // remove the view from the container\n      delete this._views[viewCid];\n\n      // update the length\n      this._updateLength();\n      return this;\n    },\n\n    // Call a method on every view in the container,\n    // passing parameters to the call method one at a\n    // time, like `function.call`.\n    call: function(method){\n      this.apply(method, _.tail(arguments));\n    },\n\n    // Apply a method on every view in the container,\n    // passing parameters to the call method one at a\n    // time, like `function.apply`.\n    apply: function(method, args){\n      _.each(this._views, function(view){\n        if (_.isFunction(view[method])){\n          view[method].apply(view, args || []);\n        }\n      });\n    },\n\n    // Update the `.length` attribute on this container\n    _updateLength: function(){\n      this.length = _.size(this._views);\n    }\n  });\n\n  // Borrowing this code from Backbone.Collection:\n  // http://backbonejs.org/docs/backbone.html#section-106\n  //\n  // Mix in methods from Underscore, for iteration, and other\n  // collection related features.\n  var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n    'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n    'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n    'last', 'without', 'isEmpty', 'pluck'];\n\n  _.each(methods, function(method) {\n    Container.prototype[method] = function() {\n      var views = _.values(this._views);\n      var args = [views].concat(_.toArray(arguments));\n      return _[method].apply(_, args);\n    };\n  });\n\n  // return the public API\n  return Container;\n})(Backbone, _);\n\n  return Backbone.ChildViewContainer;\n\n}));\n\n","// MarionetteJS (Backbone.Marionette)\n// ----------------------------------\n// v1.6.4\n//\n// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://marionettejs.com\n\n\n\n/*!\n * Includes BabySitter\n * https://github.com/marionettejs/backbone.babysitter/\n *\n * Includes Wreqr\n * https://github.com/marionettejs/backbone.wreqr/\n */\n\n(function (root, factory) {\n  if (typeof exports === 'object') {\n\n    var underscore = require('underscore');\n    var backbone = require('./backbone-1.2.3+19b88d2+57e89d8');\n    var wreqr = require('./backbone.wreqr-1.1.0');\n    var babysitter = require('./backbone.babysitter-0.1.0');\n\n    module.exports = factory(underscore, backbone, wreqr, babysitter);\n\n  } else if (typeof define === 'function' && define.amd) {\n\n    define(['underscore', './backbone-1.2.3+19b88d2+57e89d8', './backbone.wreqr-1.1.0', './backbone.babysitter-0.1.0'], factory);\n\n  }\n}(this, function (_, Backbone) {\n\n  var Marionette = (function(global, Backbone, _){\n  \"use strict\";\n\n  // Define and export the Marionette namespace\n  var Marionette = {};\n  Backbone.Marionette = Marionette;\n\n  // Get the DOM manipulator for later use\n  Marionette.$ = Backbone.$;\n\n// Helpers\n// -------\n\n// For slicing `arguments` in functions\nvar slice = Array.prototype.slice;\n\nfunction throwError(message, name) {\n  var error = new Error(message);\n  error.name = name || 'Error';\n  throw error;\n}\n\n// Marionette.extend\n// -----------------\n\n// Borrow the Backbone `extend` method so we can use it as needed\nMarionette.extend = Backbone.Model.extend;\n\n// Marionette.getOption\n// --------------------\n\n// Retrieve an object, function or other value from a target\n// object or its `options`, with `options` taking precedence.\nMarionette.getOption = function(target, optionName){\n  if (!target || !optionName){ return; }\n  var value;\n\n  if (target.options && (optionName in target.options) && (target.options[optionName] !== undefined)){\n    value = target.options[optionName];\n  } else {\n    value = target[optionName];\n  }\n\n  return value;\n};\n\n// Marionette.normalizeMethods\n// ----------------------\n\n// Pass in a mapping of events => functions or function names\n// and return a mapping of events => functions\nMarionette.normalizeMethods = function(hash) {\n  var normalizedHash = {}, method;\n  _.each(hash, function(fn, name) {\n    method = fn;\n    if (!_.isFunction(method)) {\n      method = this[method];\n    }\n    if (!method) {\n      return;\n    }\n    normalizedHash[name] = method;\n  }, this);\n  return normalizedHash;\n};\n\n// Trigger an event and/or a corresponding method name. Examples:\n//\n// `this.triggerMethod(\"foo\")` will trigger the \"foo\" event and\n// call the \"onFoo\" method.\n//\n// `this.triggerMethod(\"foo:bar\")` will trigger the \"foo:bar\" event and\n// call the \"onFooBar\" method.\nMarionette.triggerMethod = (function(){\n\n  // split the event name on the \":\"\n  var splitter = /(^|:)(\\w)/gi;\n\n  // take the event section (\"section1:section2:section3\")\n  // and turn it in to uppercase name\n  function getEventName(match, prefix, eventName) {\n    return eventName.toUpperCase();\n  }\n\n  // actual triggerMethod implementation\n  var triggerMethod = function(event) {\n    // get the method name from the event name\n    var methodName = 'on' + event.replace(splitter, getEventName);\n    var method = this[methodName];\n\n    // trigger the event, if a trigger method exists\n    if(_.isFunction(this.trigger)) {\n      this.trigger.apply(this, arguments);\n    }\n\n    // call the onMethodName if it exists\n    if (_.isFunction(method)) {\n      // pass all arguments, except the event name\n      return method.apply(this, _.tail(arguments));\n    }\n  };\n\n  return triggerMethod;\n})();\n\n// DOMRefresh\n// ----------\n//\n// Monitor a view's state, and after it has been rendered and shown\n// in the DOM, trigger a \"dom:refresh\" event every time it is\n// re-rendered.\n\nMarionette.MonitorDOMRefresh = (function(documentElement){\n  // track when the view has been shown in the DOM,\n  // using a Marionette.Region (or by other means of triggering \"show\")\n  function handleShow(view){\n    view._isShown = true;\n    triggerDOMRefresh(view);\n  }\n\n  // track when the view has been rendered\n  function handleRender(view){\n    view._isRendered = true;\n    triggerDOMRefresh(view);\n  }\n\n  // Trigger the \"dom:refresh\" event and corresponding \"onDomRefresh\" method\n  function triggerDOMRefresh(view){\n    if (view._isShown && view._isRendered && isInDOM(view)){\n      if (_.isFunction(view.triggerMethod)){\n        view.triggerMethod(\"dom:refresh\");\n      }\n    }\n  }\n\n  function isInDOM(view) {\n    return documentElement.contains(view.el);\n  }\n\n  // Export public API\n  return function(view){\n    view.listenTo(view, \"show\", function(){\n      handleShow(view);\n    });\n\n    view.listenTo(view, \"render\", function(){\n      handleRender(view);\n    });\n  };\n})(document.documentElement);\n\n\n// Marionette.bindEntityEvents & unbindEntityEvents\n// ---------------------------\n//\n// These methods are used to bind/unbind a backbone \"entity\" (collection/model)\n// to methods on a target object.\n//\n// The first parameter, `target`, must have a `listenTo` method from the\n// EventBinder object.\n//\n// The second parameter is the entity (Backbone.Model or Backbone.Collection)\n// to bind the events from.\n//\n// The third parameter is a hash of { \"event:name\": \"eventHandler\" }\n// configuration. Multiple handlers can be separated by a space. A\n// function can be supplied instead of a string handler name.\n\n(function(Marionette){\n  \"use strict\";\n\n  // Bind the event to handlers specified as a string of\n  // handler names on the target object\n  function bindFromStrings(target, entity, evt, methods){\n    var methodNames = methods.split(/\\s+/);\n\n    _.each(methodNames,function(methodName) {\n\n      var method = target[methodName];\n      if(!method) {\n        throwError(\"Method '\"+ methodName +\"' was configured as an event handler, but does not exist.\");\n      }\n\n      target.listenTo(entity, evt, method);\n    });\n  }\n\n  // Bind the event to a supplied callback function\n  function bindToFunction(target, entity, evt, method){\n      target.listenTo(entity, evt, method);\n  }\n\n  // Bind the event to handlers specified as a string of\n  // handler names on the target object\n  function unbindFromStrings(target, entity, evt, methods){\n    var methodNames = methods.split(/\\s+/);\n\n    _.each(methodNames,function(methodName) {\n      var method = target[methodName];\n      target.stopListening(entity, evt, method);\n    });\n  }\n\n  // Bind the event to a supplied callback function\n  function unbindToFunction(target, entity, evt, method){\n      target.stopListening(entity, evt, method);\n  }\n\n\n  // generic looping function\n  function iterateEvents(target, entity, bindings, functionCallback, stringCallback){\n    if (!entity || !bindings) { return; }\n\n    // allow the bindings to be a function\n    if (_.isFunction(bindings)){\n      bindings = bindings.call(target);\n    }\n\n    // iterate the bindings and bind them\n    _.each(bindings, function(methods, evt){\n\n      // allow for a function as the handler,\n      // or a list of event names as a string\n      if (_.isFunction(methods)){\n        functionCallback(target, entity, evt, methods);\n      } else {\n        stringCallback(target, entity, evt, methods);\n      }\n\n    });\n  }\n\n  // Export Public API\n  Marionette.bindEntityEvents = function(target, entity, bindings){\n    iterateEvents(target, entity, bindings, bindToFunction, bindFromStrings);\n  };\n\n  Marionette.unbindEntityEvents = function(target, entity, bindings){\n    iterateEvents(target, entity, bindings, unbindToFunction, unbindFromStrings);\n  };\n\n})(Marionette);\n\n\n// Callbacks\n// ---------\n\n// A simple way of managing a collection of callbacks\n// and executing them at a later point in time, using jQuery's\n// `Deferred` object.\nMarionette.Callbacks = function(){\n  this._deferred = Marionette.$.Deferred();\n  this._callbacks = [];\n};\n\n_.extend(Marionette.Callbacks.prototype, {\n\n  // Add a callback to be executed. Callbacks added here are\n  // guaranteed to execute, even if they are added after the\n  // `run` method is called.\n  add: function(callback, contextOverride){\n    this._callbacks.push({cb: callback, ctx: contextOverride});\n\n    this._deferred.done(function(context, options){\n      if (contextOverride){ context = contextOverride; }\n      callback.call(context, options);\n    });\n  },\n\n  // Run all registered callbacks with the context specified.\n  // Additional callbacks can be added after this has been run\n  // and they will still be executed.\n  run: function(options, context){\n    this._deferred.resolve(context, options);\n  },\n\n  // Resets the list of callbacks to be run, allowing the same list\n  // to be run multiple times - whenever the `run` method is called.\n  reset: function(){\n    var callbacks = this._callbacks;\n    this._deferred = Marionette.$.Deferred();\n    this._callbacks = [];\n\n    _.each(callbacks, function(cb){\n      this.add(cb.cb, cb.ctx);\n    }, this);\n  }\n});\n\n\n// Marionette Controller\n// ---------------------\n//\n// A multi-purpose object to use as a controller for\n// modules and routers, and as a mediator for workflow\n// and coordination of other objects, views, and more.\nMarionette.Controller = function(options){\n  this.triggerMethod = Marionette.triggerMethod;\n  this.options = options || {};\n\n  if (_.isFunction(this.initialize)){\n    this.initialize(this.options);\n  }\n};\n\nMarionette.Controller.extend = Marionette.extend;\n\n// Controller Methods\n// --------------\n\n// Ensure it can trigger events with Backbone.Events\n_.extend(Marionette.Controller.prototype, Backbone.Events, {\n  close: function(){\n    this.stopListening();\n    this.triggerMethod(\"close\");\n    this.unbind();\n  }\n});\n\n// Region\n// ------\n//\n// Manage the visual regions of your composite application. See\n// http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/\n\nMarionette.Region = function(options){\n  this.options = options || {};\n  this.el = Marionette.getOption(this, \"el\");\n\n  if (!this.el){\n    throwError(\"An 'el' must be specified for a region.\", \"NoElError\");\n  }\n\n  if (this.initialize){\n    var args = Array.prototype.slice.apply(arguments);\n    this.initialize.apply(this, args);\n  }\n};\n\n\n// Region Type methods\n// -------------------\n\n_.extend(Marionette.Region, {\n\n  // Build an instance of a region by passing in a configuration object\n  // and a default region type to use if none is specified in the config.\n  //\n  // The config object should either be a string as a jQuery DOM selector,\n  // a Region type directly, or an object literal that specifies both\n  // a selector and regionType:\n  //\n  // ```js\n  // {\n  //   selector: \"#foo\",\n  //   regionType: MyCustomRegion\n  // }\n  // ```\n  //\n  buildRegion: function(regionConfig, defaultRegionType){\n    var regionIsString = _.isString(regionConfig);\n    var regionSelectorIsString = _.isString(regionConfig.selector);\n    var regionTypeIsUndefined = _.isUndefined(regionConfig.regionType);\n    var regionIsType = _.isFunction(regionConfig);\n\n    if (!regionIsType && !regionIsString && !regionSelectorIsString) {\n      throwError(\"Region must be specified as a Region type, a selector string or an object with selector property\");\n    }\n\n    var selector, RegionType;\n\n    // get the selector for the region\n\n    if (regionIsString) {\n      selector = regionConfig;\n    }\n\n    if (regionConfig.selector) {\n      selector = regionConfig.selector;\n      delete regionConfig.selector;\n    }\n\n    // get the type for the region\n\n    if (regionIsType){\n      RegionType = regionConfig;\n    }\n\n    if (!regionIsType && regionTypeIsUndefined) {\n      RegionType = defaultRegionType;\n    }\n\n    if (regionConfig.regionType) {\n      RegionType = regionConfig.regionType;\n      delete regionConfig.regionType;\n    }\n\n    if (regionIsString || regionIsType) {\n      regionConfig = {};\n    }\n\n    regionConfig.el = selector;\n\n    // build the region instance\n    var region = new RegionType(regionConfig);\n\n    // override the `getEl` function if we have a parentEl\n    // this must be overridden to ensure the selector is found\n    // on the first use of the region. if we try to assign the\n    // region's `el` to `parentEl.find(selector)` in the object\n    // literal to build the region, the element will not be\n    // guaranteed to be in the DOM already, and will cause problems\n    if (regionConfig.parentEl){\n      region.getEl = function(selector) {\n        var parentEl = regionConfig.parentEl;\n        if (_.isFunction(parentEl)){\n          parentEl = parentEl();\n        }\n        return parentEl.find(selector);\n      };\n    }\n\n    return region;\n  }\n\n});\n\n// Region Instance Methods\n// -----------------------\n\n_.extend(Marionette.Region.prototype, Backbone.Events, {\n\n  // Displays a backbone view instance inside of the region.\n  // Handles calling the `render` method for you. Reads content\n  // directly from the `el` attribute. Also calls an optional\n  // `onShow` and `close` method on your view, just after showing\n  // or just before closing the view, respectively.\n  show: function(view){\n    this.ensureEl();\n\n    var isViewClosed = view.isClosed || _.isUndefined(view.$el);\n    var isDifferentView = view !== this.currentView;\n\n    if (isDifferentView) {\n      this.close();\n    }\n\n    view.render();\n\n    if (isDifferentView || isViewClosed) {\n      this.open(view);\n    }\n\n    this.currentView = view;\n\n    Marionette.triggerMethod.call(this, \"show\", view);\n    Marionette.triggerMethod.call(view, \"show\");\n  },\n\n  ensureEl: function(){\n    if (!this.$el || this.$el.length === 0){\n      this.$el = this.getEl(this.el);\n    }\n  },\n\n  // Override this method to change how the region finds the\n  // DOM element that it manages. Return a jQuery selector object.\n  getEl: function(selector){\n    return Marionette.$(selector);\n  },\n\n  // Override this method to change how the new view is\n  // appended to the `$el` that the region is managing\n  open: function(view){\n    this.$el.empty().append(view.el);\n  },\n\n  // Close the current view, if there is one. If there is no\n  // current view, it does nothing and returns immediately.\n  close: function(){\n    var view = this.currentView;\n    if (!view || view.isClosed){ return; }\n\n    // call 'close' or 'remove', depending on which is found\n    if (view.close) { view.close(); }\n    else if (view.remove) { view.remove(); }\n\n    Marionette.triggerMethod.call(this, \"close\", view);\n\n    delete this.currentView;\n  },\n\n  // Attach an existing view to the region. This\n  // will not call `render` or `onShow` for the new view,\n  // and will not replace the current HTML for the `el`\n  // of the region.\n  attachView: function(view){\n    this.currentView = view;\n  },\n\n  // Reset the region by closing any existing view and\n  // clearing out the cached `$el`. The next time a view\n  // is shown via this region, the region will re-query the\n  // DOM for the region's `el`.\n  reset: function(){\n    this.close();\n    delete this.$el;\n  }\n});\n\n// Copy the `extend` function used by Backbone's classes\nMarionette.Region.extend = Marionette.extend;\n\n// Marionette.RegionManager\n// ------------------------\n//\n// Manage one or more related `Marionette.Region` objects.\nMarionette.RegionManager = (function(Marionette){\n\n  var RegionManager = Marionette.Controller.extend({\n    constructor: function(options){\n      this._regions = {};\n      Marionette.Controller.prototype.constructor.call(this, options);\n    },\n\n    // Add multiple regions using an object literal, where\n    // each key becomes the region name, and each value is\n    // the region definition.\n    addRegions: function(regionDefinitions, defaults){\n      var regions = {};\n\n      _.each(regionDefinitions, function(definition, name){\n        if (_.isString(definition)){\n          definition = { selector: definition };\n        }\n\n        if (definition.selector){\n          definition = _.defaults({}, definition, defaults);\n        }\n\n        var region = this.addRegion(name, definition);\n        regions[name] = region;\n      }, this);\n\n      return regions;\n    },\n\n    // Add an individual region to the region manager,\n    // and return the region instance\n    addRegion: function(name, definition){\n      var region;\n\n      var isObject = _.isObject(definition);\n      var isString = _.isString(definition);\n      var hasSelector = !!definition.selector;\n\n      if (isString || (isObject && hasSelector)){\n        region = Marionette.Region.buildRegion(definition, Marionette.Region);\n      } else if (_.isFunction(definition)){\n        region = Marionette.Region.buildRegion(definition, Marionette.Region);\n      } else {\n        region = definition;\n      }\n\n      this._store(name, region);\n      this.triggerMethod(\"region:add\", name, region);\n      return region;\n    },\n\n    // Get a region by name\n    get: function(name){\n      return this._regions[name];\n    },\n\n    // Remove a region by name\n    removeRegion: function(name){\n      var region = this._regions[name];\n      this._remove(name, region);\n    },\n\n    // Close all regions in the region manager, and\n    // remove them\n    removeRegions: function(){\n      _.each(this._regions, function(region, name){\n        this._remove(name, region);\n      }, this);\n    },\n\n    // Close all regions in the region manager, but\n    // leave them attached\n    closeRegions: function(){\n      _.each(this._regions, function(region, name){\n        region.close();\n      }, this);\n    },\n\n    // Close all regions and shut down the region\n    // manager entirely\n    close: function(){\n      this.removeRegions();\n      Marionette.Controller.prototype.close.apply(this, arguments);\n    },\n\n    // internal method to store regions\n    _store: function(name, region){\n      this._regions[name] = region;\n      this._setLength();\n    },\n\n    // internal method to remove a region\n    _remove: function(name, region){\n      region.close();\n      delete this._regions[name];\n      this._setLength();\n      this.triggerMethod(\"region:remove\", name, region);\n    },\n\n    // set the number of regions current held\n    _setLength: function(){\n      this.length = _.size(this._regions);\n    }\n\n  });\n\n  // Borrowing this code from Backbone.Collection:\n  // http://backbonejs.org/docs/backbone.html#section-106\n  //\n  // Mix in methods from Underscore, for iteration, and other\n  // collection related features.\n  var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n    'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n    'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n    'last', 'without', 'isEmpty', 'pluck'];\n\n  _.each(methods, function(method) {\n    RegionManager.prototype[method] = function() {\n      var regions = _.values(this._regions);\n      var args = [regions].concat(_.toArray(arguments));\n      return _[method].apply(_, args);\n    };\n  });\n\n  return RegionManager;\n})(Marionette);\n\n\n// Template Cache\n// --------------\n\n// Manage templates stored in `<script>` blocks,\n// caching them for faster access.\nMarionette.TemplateCache = function(templateId){\n  this.templateId = templateId;\n};\n\n// TemplateCache object-level methods. Manage the template\n// caches from these method calls instead of creating\n// your own TemplateCache instances\n_.extend(Marionette.TemplateCache, {\n  templateCaches: {},\n\n  // Get the specified template by id. Either\n  // retrieves the cached version, or loads it\n  // from the DOM.\n  get: function(templateId){\n    var cachedTemplate = this.templateCaches[templateId];\n\n    if (!cachedTemplate){\n      cachedTemplate = new Marionette.TemplateCache(templateId);\n      this.templateCaches[templateId] = cachedTemplate;\n    }\n\n    return cachedTemplate.load();\n  },\n\n  // Clear templates from the cache. If no arguments\n  // are specified, clears all templates:\n  // `clear()`\n  //\n  // If arguments are specified, clears each of the\n  // specified templates from the cache:\n  // `clear(\"#t1\", \"#t2\", \"...\")`\n  clear: function(){\n    var i;\n    var args = slice.call(arguments);\n    var length = args.length;\n\n    if (length > 0){\n      for(i=0; i<length; i++){\n        delete this.templateCaches[args[i]];\n      }\n    } else {\n      this.templateCaches = {};\n    }\n  }\n});\n\n// TemplateCache instance methods, allowing each\n// template cache object to manage its own state\n// and know whether or not it has been loaded\n_.extend(Marionette.TemplateCache.prototype, {\n\n  // Internal method to load the template\n  load: function(){\n    // Guard clause to prevent loading this template more than once\n    if (this.compiledTemplate){\n      return this.compiledTemplate;\n    }\n\n    // Load the template and compile it\n    var template = this.loadTemplate(this.templateId);\n    this.compiledTemplate = this.compileTemplate(template);\n\n    return this.compiledTemplate;\n  },\n\n  // Load a template from the DOM, by default. Override\n  // this method to provide your own template retrieval\n  // For asynchronous loading with AMD/RequireJS, consider\n  // using a template-loader plugin as described here:\n  // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs\n  loadTemplate: function(templateId){\n    var template = Marionette.$(templateId).html();\n\n    if (!template || template.length === 0){\n      throwError(\"Could not find template: '\" + templateId + \"'\", \"NoTemplateError\");\n    }\n\n    return template;\n  },\n\n  // Pre-compile the template before caching it. Override\n  // this method if you do not need to pre-compile a template\n  // (JST / RequireJS for example) or if you want to change\n  // the template engine used (Handebars, etc).\n  compileTemplate: function(rawTemplate){\n    return _.template(rawTemplate);\n  }\n});\n\n\n// Renderer\n// --------\n\n// Render a template with data by passing in the template\n// selector and the data to render.\nMarionette.Renderer = {\n\n  // Render a template with data. The `template` parameter is\n  // passed to the `TemplateCache` object to retrieve the\n  // template function. Override this method to provide your own\n  // custom rendering and template handling for all of Marionette.\n  render: function(template, data){\n\n    if (!template) {\n      throwError(\"Cannot render the template since it's false, null or undefined.\", \"TemplateNotFoundError\");\n    }\n\n    var templateFunc;\n    if (typeof template === \"function\"){\n      templateFunc = template;\n    } else {\n      templateFunc = Marionette.TemplateCache.get(template);\n    }\n\n    return templateFunc(data);\n  }\n};\n\n\n\n// Marionette.View\n// ---------------\n\n// The core view type that other Marionette views extend from.\nMarionette.View = Backbone.View.extend({\n\n  constructor: function(options){\n    _.bindAll(this, \"render\");\n\n    // this exposes view options to the view initializer\n    // this is a backfill since backbone removed the assignment\n    // of this.options\n    // at some point however this may be removed\n    this.options = _.extend({}, _.result(this, 'options'), _.isFunction(options) ? options.call(this) : options);\n\n    // parses out the @ui DSL for events\n    this.events = this.normalizeUIKeys(_.result(this, 'events'));\n    Backbone.View.prototype.constructor.apply(this, arguments);\n\n    Marionette.MonitorDOMRefresh(this);\n    this.listenTo(this, \"show\", this.onShowCalled);\n  },\n\n  // import the \"triggerMethod\" to trigger events with corresponding\n  // methods if the method exists\n  triggerMethod: Marionette.triggerMethod,\n\n  // Imports the \"normalizeMethods\" to transform hashes of\n  // events=>function references/names to a hash of events=>function references\n  normalizeMethods: Marionette.normalizeMethods,\n\n  // Get the template for this view\n  // instance. You can set a `template` attribute in the view\n  // definition or pass a `template: \"whatever\"` parameter in\n  // to the constructor options.\n  getTemplate: function(){\n    return Marionette.getOption(this, \"template\");\n  },\n\n  // Mix in template helper methods. Looks for a\n  // `templateHelpers` attribute, which can either be an\n  // object literal, or a function that returns an object\n  // literal. All methods and attributes from this object\n  // are copies to the object passed in.\n  mixinTemplateHelpers: function(target){\n    target = target || {};\n    var templateHelpers = Marionette.getOption(this, \"templateHelpers\");\n    if (_.isFunction(templateHelpers)){\n      templateHelpers = templateHelpers.call(this);\n    }\n    return _.extend(target, templateHelpers);\n  },\n\n  // allows for the use of the @ui. syntax within\n  // a given key for triggers and events\n  // swaps the @ui with the associated selector\n  normalizeUIKeys: function(hash) {\n    var _this = this;\n    if (typeof(hash) === \"undefined\") {\n      return;\n    }\n\n    _.each(_.keys(hash), function(v) {\n      var pattern = /@ui.[a-zA-Z_$0-9]*/g;\n      if (v.match(pattern)) {\n        hash[v.replace(pattern, function(r) {\n          return _.result(_this, \"ui\")[r.slice(4)];\n        })] = hash[v];\n        delete hash[v];\n      }\n    });\n\n    return hash;\n  },\n\n  // Configure `triggers` to forward DOM events to view\n  // events. `triggers: {\"click .foo\": \"do:foo\"}`\n  configureTriggers: function(){\n    if (!this.triggers) { return; }\n\n    var triggerEvents = {};\n\n    // Allow `triggers` to be configured as a function\n    var triggers = this.normalizeUIKeys(_.result(this, \"triggers\"));\n\n    // Configure the triggers, prevent default\n    // action and stop propagation of DOM events\n    _.each(triggers, function(value, key){\n\n      var hasOptions = _.isObject(value);\n      var eventName = hasOptions ? value.event : value;\n\n      // build the event handler function for the DOM event\n      triggerEvents[key] = function(e){\n\n        // stop the event in its tracks\n        if (e) {\n          var prevent = e.preventDefault;\n          var stop = e.stopPropagation;\n\n          var shouldPrevent = hasOptions ? value.preventDefault : prevent;\n          var shouldStop = hasOptions ? value.stopPropagation : stop;\n\n          if (shouldPrevent && prevent) { prevent.apply(e); }\n          if (shouldStop && stop) { stop.apply(e); }\n        }\n\n        // build the args for the event\n        var args = {\n          view: this,\n          model: this.model,\n          collection: this.collection\n        };\n\n        // trigger the event\n        this.triggerMethod(eventName, args);\n      };\n\n    }, this);\n\n    return triggerEvents;\n  },\n\n  // Overriding Backbone.View's delegateEvents to handle\n  // the `triggers`, `modelEvents`, and `collectionEvents` configuration\n  delegateEvents: function(events){\n    this._delegateDOMEvents(events);\n    Marionette.bindEntityEvents(this, this.model, Marionette.getOption(this, \"modelEvents\"));\n    Marionette.bindEntityEvents(this, this.collection, Marionette.getOption(this, \"collectionEvents\"));\n  },\n\n  // internal method to delegate DOM events and triggers\n  _delegateDOMEvents: function(events){\n    events = events || this.events;\n    if (_.isFunction(events)){ events = events.call(this); }\n\n    var combinedEvents = {};\n    var triggers = this.configureTriggers();\n    _.extend(combinedEvents, events, triggers);\n\n    Backbone.View.prototype.delegateEvents.call(this, combinedEvents);\n  },\n\n  // Overriding Backbone.View's undelegateEvents to handle unbinding\n  // the `triggers`, `modelEvents`, and `collectionEvents` config\n  undelegateEvents: function(){\n    var args = Array.prototype.slice.call(arguments);\n    Backbone.View.prototype.undelegateEvents.apply(this, args);\n\n    Marionette.unbindEntityEvents(this, this.model, Marionette.getOption(this, \"modelEvents\"));\n    Marionette.unbindEntityEvents(this, this.collection, Marionette.getOption(this, \"collectionEvents\"));\n  },\n\n  // Internal method, handles the `show` event.\n  onShowCalled: function(){},\n\n  // Default `close` implementation, for removing a view from the\n  // DOM and unbinding it. Regions will call this method\n  // for you. You can specify an `onClose` method in your view to\n  // add custom code that is called after the view is closed.\n  close: function(){\n    if (this.isClosed) { return; }\n\n    // allow the close to be stopped by returning `false`\n    // from the `onBeforeClose` method\n    var shouldClose = this.triggerMethod(\"before:close\");\n    if (shouldClose === false){\n      return;\n    }\n\n    // mark as closed before doing the actual close, to\n    // prevent infinite loops within \"close\" event handlers\n    // that are trying to close other views\n    this.isClosed = true;\n    this.triggerMethod(\"close\");\n\n    // unbind UI elements\n    this.unbindUIElements();\n\n    // remove the view from the DOM\n    this.remove();\n  },\n\n  // This method binds the elements specified in the \"ui\" hash inside the view's code with\n  // the associated jQuery selectors.\n  bindUIElements: function(){\n    if (!this.ui) { return; }\n\n    // store the ui hash in _uiBindings so they can be reset later\n    // and so re-rendering the view will be able to find the bindings\n    if (!this._uiBindings){\n      this._uiBindings = this.ui;\n    }\n\n    // get the bindings result, as a function or otherwise\n    var bindings = _.result(this, \"_uiBindings\");\n\n    // empty the ui so we don't have anything to start with\n    this.ui = {};\n\n    // bind each of the selectors\n    _.each(_.keys(bindings), function(key) {\n      var selector = bindings[key];\n      this.ui[key] = this.$(selector);\n    }, this);\n  },\n\n  // This method unbinds the elements specified in the \"ui\" hash\n  unbindUIElements: function(){\n    if (!this.ui || !this._uiBindings){ return; }\n\n    // delete all of the existing ui bindings\n    _.each(this.ui, function($el, name){\n      delete this.ui[name];\n    }, this);\n\n    // reset the ui element to the original bindings configuration\n    this.ui = this._uiBindings;\n    delete this._uiBindings;\n  }\n});\n\n// Item View\n// ---------\n\n// A single item view implementation that contains code for rendering\n// with underscore.js templates, serializing the view's model or collection,\n// and calling several methods on extended views, such as `onRender`.\nMarionette.ItemView = Marionette.View.extend({\n\n  // Setting up the inheritance chain which allows changes to\n  // Marionette.View.prototype.constructor which allows overriding\n  constructor: function(){\n    Marionette.View.prototype.constructor.apply(this, arguments);\n  },\n\n  // Serialize the model or collection for the view. If a model is\n  // found, `.toJSON()` is called. If a collection is found, `.toJSON()`\n  // is also called, but is used to populate an `items` array in the\n  // resulting data. If both are found, defaults to the model.\n  // You can override the `serializeData` method in your own view\n  // definition, to provide custom serialization for your view's data.\n  serializeData: function(){\n    var data = {};\n\n    if (this.model) {\n      data = this.model.toJSON();\n    }\n    else if (this.collection) {\n      data = { items: this.collection.toJSON() };\n    }\n\n    return data;\n  },\n\n  // Render the view, defaulting to underscore.js templates.\n  // You can override this in your view definition to provide\n  // a very specific rendering for your view. In general, though,\n  // you should override the `Marionette.Renderer` object to\n  // change how Marionette renders views.\n  render: function(){\n    this.isClosed = false;\n\n    this.triggerMethod(\"before:render\", this);\n    this.triggerMethod(\"item:before:render\", this);\n\n    var data = this.serializeData();\n    data = this.mixinTemplateHelpers(data);\n\n    var template = this.getTemplate();\n    var html = Marionette.Renderer.render(template, data);\n\n    this.$el.html(html);\n    this.bindUIElements();\n\n    this.triggerMethod(\"render\", this);\n    this.triggerMethod(\"item:rendered\", this);\n\n    return this;\n  },\n\n  // Override the default close event to add a few\n  // more events that are triggered.\n  close: function(){\n    if (this.isClosed){ return; }\n\n    this.triggerMethod('item:before:close');\n\n    Marionette.View.prototype.close.apply(this, arguments);\n\n    this.triggerMethod('item:closed');\n  }\n});\n\n// Collection View\n// ---------------\n\n// A view that iterates over a Backbone.Collection\n// and renders an individual ItemView for each model.\nMarionette.CollectionView = Marionette.View.extend({\n  // used as the prefix for item view events\n  // that are forwarded through the collectionview\n  itemViewEventPrefix: \"itemview\",\n\n  // constructor\n  constructor: function(options){\n    this._initChildViewStorage();\n\n    Marionette.View.prototype.constructor.apply(this, arguments);\n\n    this._initialEvents();\n    this.initRenderBuffer();\n  },\n\n  // Instead of inserting elements one by one into the page,\n  // it's much more performant to insert elements into a document\n  // fragment and then insert that document fragment into the page\n  initRenderBuffer: function() {\n    this.elBuffer = document.createDocumentFragment();\n    this._bufferedChildren = [];\n  },\n\n  startBuffering: function() {\n    this.initRenderBuffer();\n    this.isBuffering = true;\n  },\n\n  endBuffering: function() {\n    this.isBuffering = false;\n    this.appendBuffer(this, this.elBuffer);\n    this._triggerShowBufferedChildren();\n    this.initRenderBuffer();\n  },\n\n  _triggerShowBufferedChildren: function () {\n    if (this._isShown) {\n      _.each(this._bufferedChildren, function (child) {\n        Marionette.triggerMethod.call(child, \"show\");\n      });\n      this._bufferedChildren = [];\n    }\n  },\n\n  // Configured the initial events that the collection view\n  // binds to.\n  _initialEvents: function(){\n    if (this.collection){\n      this.listenTo(this.collection, \"add\", this.addChildView);\n      this.listenTo(this.collection, \"remove\", this.removeItemView);\n      this.listenTo(this.collection, \"reset\", this.render);\n    }\n  },\n\n  // Handle a child item added to the collection\n  addChildView: function(item, collection, options){\n    this.closeEmptyView();\n    var ItemView = this.getItemView(item);\n    var index = this.collection.indexOf(item);\n    this.addItemView(item, ItemView, index);\n  },\n\n  // Override from `Marionette.View` to guarantee the `onShow` method\n  // of child views is called.\n  onShowCalled: function(){\n    this.children.each(function(child){\n      Marionette.triggerMethod.call(child, \"show\");\n    });\n  },\n\n  // Internal method to trigger the before render callbacks\n  // and events\n  triggerBeforeRender: function(){\n    this.triggerMethod(\"before:render\", this);\n    this.triggerMethod(\"collection:before:render\", this);\n  },\n\n  // Internal method to trigger the rendered callbacks and\n  // events\n  triggerRendered: function(){\n    this.triggerMethod(\"render\", this);\n    this.triggerMethod(\"collection:rendered\", this);\n  },\n\n  // Render the collection of items. Override this method to\n  // provide your own implementation of a render function for\n  // the collection view.\n  render: function(){\n    this.isClosed = false;\n    this.triggerBeforeRender();\n    this._renderChildren();\n    this.triggerRendered();\n    return this;\n  },\n\n  // Internal method. Separated so that CompositeView can have\n  // more control over events being triggered, around the rendering\n  // process\n  _renderChildren: function(){\n    this.startBuffering();\n\n    this.closeEmptyView();\n    this.closeChildren();\n\n    if (!this.isEmpty(this.collection)) {\n      this.showCollection();\n    } else {\n      this.showEmptyView();\n    }\n\n    this.endBuffering();\n  },\n\n  // Internal method to loop through each item in the\n  // collection view and show it\n  showCollection: function(){\n    var ItemView;\n    this.collection.each(function(item, index){\n      ItemView = this.getItemView(item);\n      this.addItemView(item, ItemView, index);\n    }, this);\n  },\n\n  // Internal method to show an empty view in place of\n  // a collection of item views, when the collection is\n  // empty\n  showEmptyView: function(){\n    var EmptyView = this.getEmptyView();\n\n    if (EmptyView && !this._showingEmptyView){\n      this._showingEmptyView = true;\n      var model = new Backbone.Model();\n      this.addItemView(model, EmptyView, 0);\n    }\n  },\n\n  // Internal method to close an existing emptyView instance\n  // if one exists. Called when a collection view has been\n  // rendered empty, and then an item is added to the collection.\n  closeEmptyView: function(){\n    if (this._showingEmptyView){\n      this.closeChildren();\n      delete this._showingEmptyView;\n    }\n  },\n\n  // Retrieve the empty view type\n  getEmptyView: function(){\n    return Marionette.getOption(this, \"emptyView\");\n  },\n\n  // Retrieve the itemView type, either from `this.options.itemView`\n  // or from the `itemView` in the object definition. The \"options\"\n  // takes precedence.\n  getItemView: function(item){\n    var itemView = Marionette.getOption(this, \"itemView\");\n\n    if (!itemView){\n      throwError(\"An `itemView` must be specified\", \"NoItemViewError\");\n    }\n\n    return itemView;\n  },\n\n  // Render the child item's view and add it to the\n  // HTML for the collection view.\n  addItemView: function(item, ItemView, index){\n    // get the itemViewOptions if any were specified\n    var itemViewOptions = Marionette.getOption(this, \"itemViewOptions\");\n    if (_.isFunction(itemViewOptions)){\n      itemViewOptions = itemViewOptions.call(this, item, index);\n    }\n\n    // build the view\n    var view = this.buildItemView(item, ItemView, itemViewOptions);\n\n    // set up the child view event forwarding\n    this.addChildViewEventForwarding(view);\n\n    // this view is about to be added\n    this.triggerMethod(\"before:item:added\", view);\n\n    // Store the child view itself so we can properly\n    // remove and/or close it later\n    this.children.add(view);\n\n    // Render it and show it\n    this.renderItemView(view, index);\n\n    // call the \"show\" method if the collection view\n    // has already been shown\n    if (this._isShown && !this.isBuffering){\n      Marionette.triggerMethod.call(view, \"show\");\n    }\n\n    // this view was added\n    this.triggerMethod(\"after:item:added\", view);\n\n    return view;\n  },\n\n  // Set up the child view event forwarding. Uses an \"itemview:\"\n  // prefix in front of all forwarded events.\n  addChildViewEventForwarding: function(view){\n    var prefix = Marionette.getOption(this, \"itemViewEventPrefix\");\n\n    // Forward all child item view events through the parent,\n    // prepending \"itemview:\" to the event name\n    this.listenTo(view, \"all\", function(){\n      var args = slice.call(arguments);\n      var rootEvent = args[0];\n      var itemEvents = this.normalizeMethods(this.getItemEvents());\n\n      args[0] = prefix + \":\" + rootEvent;\n      args.splice(1, 0, view);\n\n      // call collectionView itemEvent if defined\n      if (typeof itemEvents !== \"undefined\" && _.isFunction(itemEvents[rootEvent])) {\n        itemEvents[rootEvent].apply(this, args);\n      }\n\n      Marionette.triggerMethod.apply(this, args);\n    }, this);\n  },\n\n  // returns the value of itemEvents depending on if a function\n  getItemEvents: function() {\n    if (_.isFunction(this.itemEvents)) {\n      return this.itemEvents.call(this);\n    }\n\n    return this.itemEvents;\n  },\n\n  // render the item view\n  renderItemView: function(view, index) {\n    view.render();\n    this.appendHtml(this, view, index);\n  },\n\n  // Build an `itemView` for every model in the collection.\n  buildItemView: function(item, ItemViewType, itemViewOptions){\n    var options = _.extend({model: item}, itemViewOptions);\n    return new ItemViewType(options);\n  },\n\n  // get the child view by item it holds, and remove it\n  removeItemView: function(item){\n    var view = this.children.findByModel(item);\n    this.removeChildView(view);\n    this.checkEmpty();\n  },\n\n  // Remove the child view and close it\n  removeChildView: function(view){\n\n    // shut down the child view properly,\n    // including events that the collection has from it\n    if (view){\n      this.stopListening(view);\n\n      // call 'close' or 'remove', depending on which is found\n      if (view.close) { view.close(); }\n      else if (view.remove) { view.remove(); }\n\n      this.children.remove(view);\n    }\n\n    this.triggerMethod(\"item:removed\", view);\n  },\n\n  // helper to check if the collection is empty\n  isEmpty: function(collection){\n    // check if we're empty now\n    return !this.collection || this.collection.length === 0;\n  },\n\n  // If empty, show the empty view\n  checkEmpty: function (){\n    if (this.isEmpty(this.collection)){\n      this.showEmptyView();\n    }\n  },\n\n  // You might need to override this if you've overridden appendHtml\n  appendBuffer: function(collectionView, buffer) {\n    collectionView.$el.append(buffer);\n  },\n\n  // Append the HTML to the collection's `el`.\n  // Override this method to do something other\n  // than `.append`.\n  appendHtml: function(collectionView, itemView, index){\n    if (collectionView.isBuffering) {\n      // buffering happens on reset events and initial renders\n      // in order to reduce the number of inserts into the\n      // document, which are expensive.\n      collectionView.elBuffer.appendChild(itemView.el);\n      collectionView._bufferedChildren.push(itemView);\n    }\n    else {\n      // If we've already rendered the main collection, just\n      // append the new items directly into the element.\n      collectionView.$el.append(itemView.el);\n    }\n  },\n\n  // Internal method to set up the `children` object for\n  // storing all of the child views\n  _initChildViewStorage: function(){\n    this.children = new Backbone.ChildViewContainer();\n  },\n\n  // Handle cleanup and other closing needs for\n  // the collection of views.\n  close: function(){\n    if (this.isClosed){ return; }\n\n    this.triggerMethod(\"collection:before:close\");\n    this.closeChildren();\n    this.triggerMethod(\"collection:closed\");\n\n    Marionette.View.prototype.close.apply(this, arguments);\n  },\n\n  // Close the child views that this collection view\n  // is holding on to, if any\n  closeChildren: function(){\n    this.children.each(function(child){\n      this.removeChildView(child);\n    }, this);\n    this.checkEmpty();\n  }\n});\n\n\n// Composite View\n// --------------\n\n// Used for rendering a branch-leaf, hierarchical structure.\n// Extends directly from CollectionView and also renders an\n// an item view as `modelView`, for the top leaf\nMarionette.CompositeView = Marionette.CollectionView.extend({\n\n  // Setting up the inheritance chain which allows changes to\n  // Marionette.CollectionView.prototype.constructor which allows overriding\n  constructor: function(){\n    Marionette.CollectionView.prototype.constructor.apply(this, arguments);\n  },\n\n  // Configured the initial events that the composite view\n  // binds to. Override this method to prevent the initial\n  // events, or to add your own initial events.\n  _initialEvents: function(){\n\n    // Bind only after composite view is rendered to avoid adding child views\n    // to nonexistent itemViewContainer\n    this.once('render', function () {\n      if (this.collection){\n        this.listenTo(this.collection, \"add\", this.addChildView);\n        this.listenTo(this.collection, \"remove\", this.removeItemView);\n        this.listenTo(this.collection, \"reset\", this._renderChildren);\n      }\n    });\n\n  },\n\n  // Retrieve the `itemView` to be used when rendering each of\n  // the items in the collection. The default is to return\n  // `this.itemView` or Marionette.CompositeView if no `itemView`\n  // has been defined\n  getItemView: function(item){\n    var itemView = Marionette.getOption(this, \"itemView\") || this.constructor;\n\n    if (!itemView){\n      throwError(\"An `itemView` must be specified\", \"NoItemViewError\");\n    }\n\n    return itemView;\n  },\n\n  // Serialize the collection for the view.\n  // You can override the `serializeData` method in your own view\n  // definition, to provide custom serialization for your view's data.\n  serializeData: function(){\n    var data = {};\n\n    if (this.model){\n      data = this.model.toJSON();\n    }\n\n    return data;\n  },\n\n  // Renders the model once, and the collection once. Calling\n  // this again will tell the model's view to re-render itself\n  // but the collection will not re-render.\n  render: function(){\n    this.isRendered = true;\n    this.isClosed = false;\n    this.resetItemViewContainer();\n\n    this.triggerBeforeRender();\n    var html = this.renderModel();\n    this.$el.html(html);\n    // the ui bindings is done here and not at the end of render since they\n    // will not be available until after the model is rendered, but should be\n    // available before the collection is rendered.\n    this.bindUIElements();\n    this.triggerMethod(\"composite:model:rendered\");\n\n    this._renderChildren();\n\n    this.triggerMethod(\"composite:rendered\");\n    this.triggerRendered();\n    return this;\n  },\n\n  _renderChildren: function(){\n    if (this.isRendered){\n      this.triggerMethod(\"composite:collection:before:render\");\n      Marionette.CollectionView.prototype._renderChildren.call(this);\n      this.triggerMethod(\"composite:collection:rendered\");\n    }\n  },\n\n  // Render an individual model, if we have one, as\n  // part of a composite view (branch / leaf). For example:\n  // a treeview.\n  renderModel: function(){\n    var data = {};\n    data = this.serializeData();\n    data = this.mixinTemplateHelpers(data);\n\n    var template = this.getTemplate();\n    return Marionette.Renderer.render(template, data);\n  },\n\n\n  // You might need to override this if you've overridden appendHtml\n  appendBuffer: function(compositeView, buffer) {\n    var $container = this.getItemViewContainer(compositeView);\n    $container.append(buffer);\n  },\n\n  // Appends the `el` of itemView instances to the specified\n  // `itemViewContainer` (a jQuery selector). Override this method to\n  // provide custom logic of how the child item view instances have their\n  // HTML appended to the composite view instance.\n  appendHtml: function(compositeView, itemView, index){\n    if (compositeView.isBuffering) {\n      compositeView.elBuffer.appendChild(itemView.el);\n      compositeView._bufferedChildren.push(itemView);\n    }\n    else {\n      // If we've already rendered the main collection, just\n      // append the new items directly into the element.\n      var $container = this.getItemViewContainer(compositeView);\n      $container.append(itemView.el);\n    }\n  },\n\n\n  // Internal method to ensure an `$itemViewContainer` exists, for the\n  // `appendHtml` method to use.\n  getItemViewContainer: function(containerView){\n    if (\"$itemViewContainer\" in containerView){\n      return containerView.$itemViewContainer;\n    }\n\n    var container;\n    var itemViewContainer = Marionette.getOption(containerView, \"itemViewContainer\");\n    if (itemViewContainer){\n\n      var selector = _.isFunction(itemViewContainer) ? itemViewContainer.call(this) : itemViewContainer;\n      container = containerView.$(selector);\n      if (container.length <= 0) {\n        throwError(\"The specified `itemViewContainer` was not found: \" + containerView.itemViewContainer, \"ItemViewContainerMissingError\");\n      }\n\n    } else {\n      container = containerView.$el;\n    }\n\n    containerView.$itemViewContainer = container;\n    return container;\n  },\n\n  // Internal method to reset the `$itemViewContainer` on render\n  resetItemViewContainer: function(){\n    if (this.$itemViewContainer){\n      delete this.$itemViewContainer;\n    }\n  }\n});\n\n\n// Layout\n// ------\n\n// Used for managing application layouts, nested layouts and\n// multiple regions within an application or sub-application.\n//\n// A specialized view type that renders an area of HTML and then\n// attaches `Region` instances to the specified `regions`.\n// Used for composite view management and sub-application areas.\nMarionette.Layout = Marionette.ItemView.extend({\n  regionType: Marionette.Region,\n\n  // Ensure the regions are available when the `initialize` method\n  // is called.\n  constructor: function (options) {\n    options = options || {};\n\n    this._firstRender = true;\n    this._initializeRegions(options);\n\n    Marionette.ItemView.prototype.constructor.call(this, options);\n  },\n\n  // Layout's render will use the existing region objects the\n  // first time it is called. Subsequent calls will close the\n  // views that the regions are showing and then reset the `el`\n  // for the regions to the newly rendered DOM elements.\n  render: function(){\n\n    if (this.isClosed){\n      // a previously closed layout means we need to\n      // completely re-initialize the regions\n      this._initializeRegions();\n    }\n    if (this._firstRender) {\n      // if this is the first render, don't do anything to\n      // reset the regions\n      this._firstRender = false;\n    } else if (!this.isClosed){\n      // If this is not the first render call, then we need to\n      // re-initializing the `el` for each region\n      this._reInitializeRegions();\n    }\n\n    return Marionette.ItemView.prototype.render.apply(this, arguments);\n  },\n\n  // Handle closing regions, and then close the view itself.\n  close: function () {\n    if (this.isClosed){ return; }\n    this.regionManager.close();\n    Marionette.ItemView.prototype.close.apply(this, arguments);\n  },\n\n  // Add a single region, by name, to the layout\n  addRegion: function(name, definition){\n    var regions = {};\n    regions[name] = definition;\n    return this._buildRegions(regions)[name];\n  },\n\n  // Add multiple regions as a {name: definition, name2: def2} object literal\n  addRegions: function(regions){\n    this.regions = _.extend({}, this.regions, regions);\n    return this._buildRegions(regions);\n  },\n\n  // Remove a single region from the Layout, by name\n  removeRegion: function(name){\n    delete this.regions[name];\n    return this.regionManager.removeRegion(name);\n  },\n\n  // internal method to build regions\n  _buildRegions: function(regions){\n    var that = this;\n\n    var defaults = {\n      regionType: Marionette.getOption(this, \"regionType\"),\n      parentEl: function(){ return that.$el; }\n    };\n\n    return this.regionManager.addRegions(regions, defaults);\n  },\n\n  // Internal method to initialize the regions that have been defined in a\n  // `regions` attribute on this layout.\n  _initializeRegions: function (options) {\n    var regions;\n    this._initRegionManager();\n\n    if (_.isFunction(this.regions)) {\n      regions = this.regions(options);\n    } else {\n      regions = this.regions || {};\n    }\n\n    this.addRegions(regions);\n  },\n\n  // Internal method to re-initialize all of the regions by updating the `el` that\n  // they point to\n  _reInitializeRegions: function(){\n    this.regionManager.closeRegions();\n    this.regionManager.each(function(region){\n      region.reset();\n    });\n  },\n\n  // Internal method to initialize the region manager\n  // and all regions in it\n  _initRegionManager: function(){\n    this.regionManager = new Marionette.RegionManager();\n\n    this.listenTo(this.regionManager, \"region:add\", function(name, region){\n      this[name] = region;\n      this.trigger(\"region:add\", name, region);\n    });\n\n    this.listenTo(this.regionManager, \"region:remove\", function(name, region){\n      delete this[name];\n      this.trigger(\"region:remove\", name, region);\n    });\n  }\n});\n\n\n// AppRouter\n// ---------\n\n// Reduce the boilerplate code of handling route events\n// and then calling a single method on another object.\n// Have your routers configured to call the method on\n// your object, directly.\n//\n// Configure an AppRouter with `appRoutes`.\n//\n// App routers can only take one `controller` object.\n// It is recommended that you divide your controller\n// objects in to smaller pieces of related functionality\n// and have multiple routers / controllers, instead of\n// just one giant router and controller.\n//\n// You can also add standard routes to an AppRouter.\n\nMarionette.AppRouter = Backbone.Router.extend({\n\n  constructor: function(options){\n    Backbone.Router.prototype.constructor.apply(this, arguments);\n\n    this.options = options || {};\n\n    var appRoutes = Marionette.getOption(this, \"appRoutes\");\n    var controller = this._getController();\n    this.processAppRoutes(controller, appRoutes);\n  },\n\n  // Similar to route method on a Backbone Router but\n  // method is called on the controller\n  appRoute: function(route, methodName) {\n    var controller = this._getController();\n    this._addAppRoute(controller, route, methodName);\n  },\n\n  // Internal method to process the `appRoutes` for the\n  // router, and turn them in to routes that trigger the\n  // specified method on the specified `controller`.\n  processAppRoutes: function(controller, appRoutes) {\n    if (!appRoutes){ return; }\n\n    var routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes\n\n    _.each(routeNames, function(route) {\n      this._addAppRoute(controller, route, appRoutes[route]);\n    }, this);\n  },\n\n  _getController: function(){\n    return Marionette.getOption(this, \"controller\");\n  },\n\n  _addAppRoute: function(controller, route, methodName){\n    var method = controller[methodName];\n\n    if (!method) {\n      throwError(\"Method '\" + methodName + \"' was not found on the controller\");\n    }\n\n    this.route(route, methodName, _.bind(method, controller));\n  }\n});\n\n\n// Application\n// -----------\n\n// Contain and manage the composite application as a whole.\n// Stores and starts up `Region` objects, includes an\n// event aggregator as `app.vent`\nMarionette.Application = function(options){\n  this._initRegionManager();\n  this._initCallbacks = new Marionette.Callbacks();\n  this.vent = new Backbone.Wreqr.EventAggregator();\n  this.commands = new Backbone.Wreqr.Commands();\n  this.reqres = new Backbone.Wreqr.RequestResponse();\n  this.submodules = {};\n\n  _.extend(this, options);\n\n  this.triggerMethod = Marionette.triggerMethod;\n};\n\n_.extend(Marionette.Application.prototype, Backbone.Events, {\n  // Command execution, facilitated by Backbone.Wreqr.Commands\n  execute: function(){\n    this.commands.execute.apply(this.commands, arguments);\n  },\n\n  // Request/response, facilitated by Backbone.Wreqr.RequestResponse\n  request: function(){\n    return this.reqres.request.apply(this.reqres, arguments);\n  },\n\n  // Add an initializer that is either run at when the `start`\n  // method is called, or run immediately if added after `start`\n  // has already been called.\n  addInitializer: function(initializer){\n    this._initCallbacks.add(initializer);\n  },\n\n  // kick off all of the application's processes.\n  // initializes all of the regions that have been added\n  // to the app, and runs all of the initializer functions\n  start: function(options){\n    this.triggerMethod(\"initialize:before\", options);\n    this._initCallbacks.run(options, this);\n    this.triggerMethod(\"initialize:after\", options);\n\n    this.triggerMethod(\"start\", options);\n  },\n\n  // Add regions to your app.\n  // Accepts a hash of named strings or Region objects\n  // addRegions({something: \"#someRegion\"})\n  // addRegions({something: Region.extend({el: \"#someRegion\"}) });\n  addRegions: function(regions){\n    return this._regionManager.addRegions(regions);\n  },\n\n  // Close all regions in the app, without removing them\n  closeRegions: function(){\n    this._regionManager.closeRegions();\n  },\n\n  // Removes a region from your app, by name\n  // Accepts the regions name\n  // removeRegion('myRegion')\n  removeRegion: function(region) {\n    this._regionManager.removeRegion(region);\n  },\n\n  // Provides alternative access to regions\n  // Accepts the region name\n  // getRegion('main')\n  getRegion: function(region) {\n    return this._regionManager.get(region);\n  },\n\n  // Create a module, attached to the application\n  module: function(moduleNames, moduleDefinition){\n\n    // Overwrite the module class if the user specifies one\n    var ModuleClass = Marionette.Module.getClass(moduleDefinition);\n\n    // slice the args, and add this application object as the\n    // first argument of the array\n    var args = slice.call(arguments);\n    args.unshift(this);\n\n    // see the Marionette.Module object for more information\n    return ModuleClass.create.apply(ModuleClass, args);\n  },\n\n  // Internal method to set up the region manager\n  _initRegionManager: function(){\n    this._regionManager = new Marionette.RegionManager();\n\n    this.listenTo(this._regionManager, \"region:add\", function(name, region){\n      this[name] = region;\n    });\n\n    this.listenTo(this._regionManager, \"region:remove\", function(name, region){\n      delete this[name];\n    });\n  }\n});\n\n// Copy the `extend` function used by Backbone's classes\nMarionette.Application.extend = Marionette.extend;\n\n// Module\n// ------\n\n// A simple module system, used to create privacy and encapsulation in\n// Marionette applications\nMarionette.Module = function(moduleName, app, options){\n  this.moduleName = moduleName;\n  this.options = _.extend({}, this.options, options);\n  this.initialize = options.initialize || this.initialize;\n\n  // store sub-modules\n  this.submodules = {};\n\n  this._setupInitializersAndFinalizers();\n\n  // store the configuration for this module\n  this.app = app;\n  this.startWithParent = true;\n\n  this.triggerMethod = Marionette.triggerMethod;\n\n  if (_.isFunction(this.initialize)){\n    this.initialize(this.options, moduleName, app);\n  }\n};\n\nMarionette.Module.extend = Marionette.extend;\n\n// Extend the Module prototype with events / listenTo, so that the module\n// can be used as an event aggregator or pub/sub.\n_.extend(Marionette.Module.prototype, Backbone.Events, {\n\n  // Initialize is an empty function by default. Override it with your own\n  // initialization logic when extending Marionette.Module.\n  initialize: function(){},\n\n  // Initializer for a specific module. Initializers are run when the\n  // module's `start` method is called.\n  addInitializer: function(callback){\n    this._initializerCallbacks.add(callback);\n  },\n\n  // Finalizers are run when a module is stopped. They are used to teardown\n  // and finalize any variables, references, events and other code that the\n  // module had set up.\n  addFinalizer: function(callback){\n    this._finalizerCallbacks.add(callback);\n  },\n\n  // Start the module, and run all of its initializers\n  start: function(options){\n    // Prevent re-starting a module that is already started\n    if (this._isInitialized){ return; }\n\n    // start the sub-modules (depth-first hierarchy)\n    _.each(this.submodules, function(mod){\n      // check to see if we should start the sub-module with this parent\n      if (mod.startWithParent){\n        mod.start(options);\n      }\n    });\n\n    // run the callbacks to \"start\" the current module\n    this.triggerMethod(\"before:start\", options);\n\n    this._initializerCallbacks.run(options, this);\n    this._isInitialized = true;\n\n    this.triggerMethod(\"start\", options);\n  },\n\n  // Stop this module by running its finalizers and then stop all of\n  // the sub-modules for this module\n  stop: function(){\n    // if we are not initialized, don't bother finalizing\n    if (!this._isInitialized){ return; }\n    this._isInitialized = false;\n\n    Marionette.triggerMethod.call(this, \"before:stop\");\n\n    // stop the sub-modules; depth-first, to make sure the\n    // sub-modules are stopped / finalized before parents\n    _.each(this.submodules, function(mod){ mod.stop(); });\n\n    // run the finalizers\n    this._finalizerCallbacks.run(undefined,this);\n\n    // reset the initializers and finalizers\n    this._initializerCallbacks.reset();\n    this._finalizerCallbacks.reset();\n\n    Marionette.triggerMethod.call(this, \"stop\");\n  },\n\n  // Configure the module with a definition function and any custom args\n  // that are to be passed in to the definition function\n  addDefinition: function(moduleDefinition, customArgs){\n    this._runModuleDefinition(moduleDefinition, customArgs);\n  },\n\n  // Internal method: run the module definition function with the correct\n  // arguments\n  _runModuleDefinition: function(definition, customArgs){\n    if (!definition){ return; }\n\n    // build the correct list of arguments for the module definition\n    var args = _.flatten([\n      this,\n      this.app,\n      Backbone,\n      Marionette,\n      Marionette.$, _,\n      customArgs\n    ]);\n\n    definition.apply(this, args);\n  },\n\n  // Internal method: set up new copies of initializers and finalizers.\n  // Calling this method will wipe out all existing initializers and\n  // finalizers.\n  _setupInitializersAndFinalizers: function(){\n    this._initializerCallbacks = new Marionette.Callbacks();\n    this._finalizerCallbacks = new Marionette.Callbacks();\n  }\n});\n\n// Type methods to create modules\n_.extend(Marionette.Module, {\n\n  // Create a module, hanging off the app parameter as the parent object.\n  create: function(app, moduleNames, moduleDefinition){\n    var module = app;\n\n    // get the custom args passed in after the module definition and\n    // get rid of the module name and definition function\n    var customArgs = slice.call(arguments);\n    customArgs.splice(0, 3);\n\n    // split the module names and get the length\n    moduleNames = moduleNames.split(\".\");\n    var length = moduleNames.length;\n\n    // store the module definition for the last module in the chain\n    var moduleDefinitions = [];\n    moduleDefinitions[length-1] = moduleDefinition;\n\n    // Loop through all the parts of the module definition\n    _.each(moduleNames, function(moduleName, i){\n      var parentModule = module;\n      module = this._getModule(parentModule, moduleName, app, moduleDefinition);\n      this._addModuleDefinition(parentModule, module, moduleDefinitions[i], customArgs);\n    }, this);\n\n    // Return the last module in the definition chain\n    return module;\n  },\n\n  _getModule: function(parentModule, moduleName, app, def, args){\n    var options = _.extend({}, def);\n    var ModuleClass = this.getClass(def);\n\n    // Get an existing module of this name if we have one\n    var module = parentModule[moduleName];\n\n    if (!module){\n      // Create a new module if we don't have one\n      module = new ModuleClass(moduleName, app, options);\n      parentModule[moduleName] = module;\n      // store the module on the parent\n      parentModule.submodules[moduleName] = module;\n    }\n\n    return module;\n  },\n\n  getClass: function(moduleDefinition) {\n    var ModuleClass = Marionette.Module;\n\n    if (!moduleDefinition) {\n      return ModuleClass;\n    }\n\n    if (moduleDefinition.prototype instanceof ModuleClass) {\n      return moduleDefinition;\n    }\n\n    return moduleDefinition.moduleClass || ModuleClass;\n  },\n\n  _addModuleDefinition: function(parentModule, module, def, args){\n    var fn;\n    var startWithParent;\n\n    if (_.isFunction(def) && !(def.prototype instanceof Marionette.Module)){\n      // if a function is supplied for the module definition\n      fn = def;\n      startWithParent = true;\n\n    } else if (_.isObject(def)){\n      // if an object is supplied\n      fn = def.define;\n      startWithParent = !_.isUndefined(def.startWithParent) ? def.startWithParent : true;\n\n    } else {\n      // if nothing is supplied\n      startWithParent = true;\n    }\n\n    // add module definition if needed\n    if (fn){\n      module.addDefinition(fn, args);\n    }\n\n    // `and` the two together, ensuring a single `false` will prevent it\n    // from starting with the parent\n    module.startWithParent = module.startWithParent && startWithParent;\n\n    // setup auto-start if needed\n    if (module.startWithParent && !module.startWithParentIsConfigured){\n\n      // only configure this once\n      module.startWithParentIsConfigured = true;\n\n      // add the module initializer config\n      parentModule.addInitializer(function(options){\n        if (module.startWithParent){\n          module.start(options);\n        }\n      });\n\n    }\n\n  }\n});\n\n\n\n  return Marionette;\n})(this, Backbone, _);\n\n  return Backbone.Marionette;\n\n}));\n","(function (root, factory) {\n  if (typeof exports === 'object') {\n    module.exports = factory(require('underscore'), require('./backbone-1.2.3+19b88d2+57e89d8'));\n  }\n  else if (typeof define === 'function' && define.amd) {\n    define(['underscore', './backbone-1.2.3+19b88d2+57e89d8'], factory);\n  }\n  else {\n    root.Backbone.Obscura = factory(root['_'], root['Backbone']);\n  }\n}(this, function(_, Backbone) {\n  function _requireDep(name) {\n    return {'underscore': _, './backbone-1.2.3+19b88d2+57e89d8': Backbone}[name];\n  }\n\n  var _bundleExports =\n(function (define) {\n    function _require(index) {\n        var module = _require.cache[index];\n        if (!module) {\n            var exports = {};\n            module = _require.cache[index] = {\n                id: index,\n                exports: exports\n            };\n            _require.modules[index].call(exports, module, exports);\n        }\n        return module.exports;\n    }\n    _require.cache = [];\n    _require.modules = [\n        function (module, exports) {\n            var _ = _requireDep('underscore');\n            var Backbone = _requireDep('./backbone-1.2.3+19b88d2+57e89d8');\n            var FilteredCollection = _require(2);\n            var SortedCollection = _require(5);\n            var PaginatedCollection = _require(4);\n            var proxyCollection = _require(1);\n            var proxyEvents = _require(7);\n            function Obscura(superset, options) {\n                this._superset = superset;\n                this._filtered = new FilteredCollection(superset, options);\n                this._sorted = new SortedCollection(this._filtered, options);\n                this._paginated = new PaginatedCollection(this._sorted, options);\n                proxyCollection(this._paginated, this);\n                proxyEvents.call(this, this._filtered, filteredEvents);\n                proxyEvents.call(this, this._sorted, sortedEvents);\n                proxyEvents.call(this, this._paginated, paginatedEvents);\n                this.initialize(options);\n            }\n            var methods = {\n                    superset: function () {\n                        return this._superset;\n                    },\n                    getFilteredLength: function () {\n                        return this._filtered.length;\n                    },\n                    removeTransforms: function () {\n                        this._filtered.resetFilters();\n                        this._sorted.removeSort();\n                        this._paginated.removePagination();\n                        return this;\n                    },\n                    destroy: function () {\n                        this.stopListening();\n                        this._filtered.destroy();\n                        this._sorted.destroy();\n                        this._paginated.destroy();\n                        this.length = 0;\n                        this.trigger('obscura:destroy');\n                    }\n                };\n            var filteredMethods = [\n                    'filterBy',\n                    'removeFilter',\n                    'resetFilters',\n                    'refilter',\n                    'hasFilter',\n                    'getFilters'\n                ];\n            var filteredEvents = [\n                    'filtered:add',\n                    'filtered:remove',\n                    'filtered:reset'\n                ];\n            var sortedMethods = [\n                    'setSort',\n                    'reverseSort',\n                    'removeSort'\n                ];\n            var sortedEvents = [\n                    'sorted:add',\n                    'sorted:remove'\n                ];\n            var paginatedMethods = [\n                    'setPerPage',\n                    'setPage',\n                    'getPerPage',\n                    'getNumPages',\n                    'getPage',\n                    'hasNextPage',\n                    'hasPrevPage',\n                    'nextPage',\n                    'prevPage',\n                    'movePage',\n                    'removePagination',\n                    'firstPage',\n                    'lastPage'\n                ];\n            var paginatedEvents = [\n                    'paginated:change:perPage',\n                    'paginated:change:page',\n                    'paginated:change:numPages'\n                ];\n            var unsupportedMethods = [\n                    'add',\n                    'create',\n                    'remove',\n                    'set',\n                    'reset',\n                    'sort',\n                    'parse',\n                    'sync',\n                    'fetch',\n                    'push',\n                    'pop',\n                    'shift',\n                    'unshift'\n                ];\n            _.each(filteredMethods, function (method) {\n                methods[method] = function () {\n                    var result = FilteredCollection.prototype[method].apply(this._filtered, arguments);\n                    return result === this._filtered ? this : result;\n                };\n            });\n            _.each(paginatedMethods, function (method) {\n                methods[method] = function () {\n                    var result = PaginatedCollection.prototype[method].apply(this._paginated, arguments);\n                    return result === this._paginated ? this : result;\n                };\n            });\n            _.each(sortedMethods, function (method) {\n                methods[method] = function () {\n                    var result = SortedCollection.prototype[method].apply(this._sorted, arguments);\n                    return result === this._sorted ? this : result;\n                };\n            });\n            _.each(unsupportedMethods, function (method) {\n                methods[method] = function () {\n                    throw new Error('Backbone.Obscura: Unsupported method: ' + method + 'called on read-only proxy');\n                };\n            });\n            _.extend(Obscura.prototype, methods, Backbone.Events);\n            Obscura = Backbone.Collection.extend(Obscura.prototype);\n            Obscura.FilteredCollection = FilteredCollection;\n            Obscura.SortedCollection = SortedCollection;\n            Obscura.PaginatedCollection = PaginatedCollection;\n            module.exports = Obscura;\n        },\n        function (module, exports) {\n            var _ = _requireDep('underscore');\n            var Backbone = _requireDep('./backbone-1.2.3+19b88d2+57e89d8');\n            var blacklistedMethods = [\n                    '_onModelEvent',\n                    '_prepareModel',\n                    '_removeReference',\n                    '_reset',\n                    'add',\n                    'initialize',\n                    'sync',\n                    'remove',\n                    'reset',\n                    'set',\n                    'push',\n                    'pop',\n                    'unshift',\n                    'shift',\n                    'sort',\n                    'parse',\n                    'fetch',\n                    'create',\n                    'model',\n                    'off',\n                    'on',\n                    'listenTo',\n                    'listenToOnce',\n                    'bind',\n                    'trigger',\n                    'once',\n                    'stopListening'\n                ];\n            var eventWhiteList = [\n                    'add',\n                    'remove',\n                    'reset',\n                    'sort',\n                    'destroy',\n                    'sync',\n                    'request',\n                    'error'\n                ];\n            function proxyCollection(from, target) {\n                function updateLength() {\n                    target.length = from.length;\n                }\n                function pipeEvents(eventName) {\n                    var args = _.toArray(arguments);\n                    var isChangeEvent = eventName === 'change' || eventName.slice(0, 7) === 'change:';\n                    if (eventName === 'reset') {\n                        target.models = from.models;\n                    }\n                    if (_.contains(eventWhiteList, eventName)) {\n                        if (_.contains([\n                                'add',\n                                'remove',\n                                'destroy'\n                            ], eventName)) {\n                            args[2] = target;\n                        } else if (_.contains([\n                                'reset',\n                                'sort'\n                            ], eventName)) {\n                            args[1] = target;\n                        }\n                        target.trigger.apply(this, args);\n                    } else if (isChangeEvent) {\n                        if (target.contains(args[1])) {\n                            target.trigger.apply(this, args);\n                        }\n                    }\n                }\n                var methods = {};\n                _.each(_.functions(Backbone.Collection.prototype), function (method) {\n                    if (!_.contains(blacklistedMethods, method)) {\n                        methods[method] = function () {\n                            return from[method].apply(from, arguments);\n                        };\n                    }\n                });\n                _.extend(target, Backbone.Events, methods);\n                target.listenTo(from, 'all', updateLength);\n                target.listenTo(from, 'all', pipeEvents);\n                target.models = from.models;\n                updateLength();\n                return target;\n            }\n            module.exports = proxyCollection;\n        },\n        function (module, exports) {\n            var _ = _requireDep('underscore');\n            var Backbone = _requireDep('./backbone-1.2.3+19b88d2+57e89d8');\n            var proxyCollection = _require(1);\n            var createFilter = _require(3);\n            function invalidateCache() {\n                this._filterResultCache = {};\n            }\n            function invalidateCacheForFilter(filterName) {\n                for (var cid in this._filterResultCache) {\n                    if (this._filterResultCache.hasOwnProperty(cid)) {\n                        delete this._filterResultCache[cid][filterName];\n                    }\n                }\n            }\n            function addFilter(filterName, filterObj) {\n                if (this._filters[filterName]) {\n                    invalidateCacheForFilter.call(this, filterName);\n                }\n                this._filters[filterName] = filterObj;\n                this.trigger('filtered:add', filterName);\n            }\n            function removeFilter(filterName) {\n                delete this._filters[filterName];\n                invalidateCacheForFilter.call(this, filterName);\n                this.trigger('filtered:remove', filterName);\n            }\n            function execFilterOnModel(model) {\n                if (!this._filterResultCache[model.cid]) {\n                    this._filterResultCache[model.cid] = {};\n                }\n                var cache = this._filterResultCache[model.cid];\n                for (var filterName in this._filters) {\n                    if (this._filters.hasOwnProperty(filterName)) {\n                        if (!cache.hasOwnProperty(filterName)) {\n                            cache[filterName] = this._filters[filterName].fn(model);\n                        }\n                        if (!cache[filterName]) {\n                            return false;\n                        }\n                    }\n                }\n                return true;\n            }\n            function execFilter(options) {\n                options || (options = {});\n\n                var filtered = [];\n                if (this._superset) {\n                    filtered = this._superset.filter(_.bind(execFilterOnModel, this));\n                }\n\n                if (options.reset) {\n                    this._collection.reset(filtered);\n                } else {\n                    this._collection.set(filtered);\n                }\n\n                this.length = this._collection.length;\n            }\n            function onReset() {\n                execFilter.call(this, { reset: true });\n            }\n            function onSort() {\n                var hasComparator = !!(this._superset && this._superset.comparator);\n\n                execFilter.call(this, { reset: hasComparator });\n            }\n            function onAddChange(model) {\n                this._filterResultCache[model.cid] = {};\n                if (execFilterOnModel.call(this, model)) {\n                    if (!this._collection.get(model.cid)) {\n                        var index = this.superset().indexOf(model);\n                        var filteredIndex = null;\n                        for (var i = index - 1; i >= 0; i -= 1) {\n                            if (this.contains(this.superset().at(i))) {\n                                filteredIndex = this.indexOf(this.superset().at(i)) + 1;\n                                break;\n                            }\n                        }\n                        filteredIndex = filteredIndex || 0;\n                        this._collection.add(model, { at: filteredIndex });\n                    }\n                } else {\n                    if (this._collection.get(model.cid)) {\n                        this._collection.remove(model);\n                    }\n                }\n                this.length = this._collection.length;\n            }\n            function onModelAttributeChange(model) {\n                this._filterResultCache[model.cid] = {};\n                if (!execFilterOnModel.call(this, model)) {\n                    if (this._collection.get(model.cid)) {\n                        this._collection.remove(model);\n                    }\n                }\n            }\n            function onAll(eventName, model, value) {\n                if (eventName.slice(0, 7) === 'change:') {\n                    onModelAttributeChange.call(this, arguments[1]);\n                }\n            }\n            function onModelRemove(model) {\n                if (this.contains(model)) {\n                    this._collection.remove(model);\n                }\n                this.length = this._collection.length;\n            }\n            function Filtered(superset) {\n                this._superset = superset;\n                this._collection = new Backbone.Collection(superset.toArray());\n                proxyCollection(this._collection, this);\n                this.resetFilters();\n                this.listenTo(this._superset, 'reset', onReset);\n                this.listenTo(this._superset, 'sort', onSort);\n                this.listenTo(this._superset, 'add change', onAddChange);\n                this.listenTo(this._superset, 'remove', onModelRemove);\n                this.listenTo(this._superset, 'all', onAll);\n            }\n            var methods = {\n                    defaultFilterName: '__default',\n                    filterBy: function (filterName, filter) {\n                        if (!filter) {\n                            filter = filterName;\n                            filterName = this.defaultFilterName;\n                        }\n                        addFilter.call(this, filterName, createFilter(filter));\n                        execFilter.call(this);\n                        return this;\n                    },\n                    removeFilter: function (filterName) {\n                        if (!filterName) {\n                            filterName = this.defaultFilterName;\n                        }\n                        removeFilter.call(this, filterName);\n                        execFilter.call(this);\n                        return this;\n                    },\n                    resetFilters: function () {\n                        this._filters = {};\n                        invalidateCache.call(this);\n                        this.trigger('filtered:reset');\n                        execFilter.call(this);\n                        return this;\n                    },\n                    superset: function () {\n                        return this._superset;\n                    },\n                    refilter: function (arg) {\n                        if (typeof arg === 'object' && arg.cid) {\n                            onAddChange.call(this, arg);\n                        } else {\n                            invalidateCache.call(this);\n                            execFilter.call(this);\n                        }\n                        return this;\n                    },\n                    getFilters: function () {\n                        return _.keys(this._filters);\n                    },\n                    hasFilter: function (name) {\n                        return _.contains(this.getFilters(), name);\n                    },\n                    destroy: function () {\n                        this.stopListening();\n                        this._collection.reset([]);\n                        this._superset = this._collection;\n                        this.length = 0;\n                        this.trigger('filtered:destroy');\n                    }\n                };\n            _.extend(Filtered.prototype, methods, Backbone.Events);\n            module.exports = Filtered;\n        },\n        function (module, exports) {\n            var _ = _requireDep('underscore');\n            function convertKeyValueToFunction(key, value) {\n                return function (model) {\n                    return model.get(key) === value;\n                };\n            }\n            function convertKeyFunctionToFunction(key, fn) {\n                return function (model) {\n                    return fn(model.get(key));\n                };\n            }\n            function createFilterObject(filterFunction, keys) {\n                if (!_.isArray(keys)) {\n                    keys = null;\n                }\n                return {\n                    fn: filterFunction,\n                    keys: keys\n                };\n            }\n            function createFilterFromObject(filterObj) {\n                var keys = _.keys(filterObj);\n                var filterFunctions = _.map(keys, function (key) {\n                        var val = filterObj[key];\n                        if (_.isFunction(val)) {\n                            return convertKeyFunctionToFunction(key, val);\n                        }\n                        return convertKeyValueToFunction(key, val);\n                    });\n                var filterFunction = function (model) {\n                    for (var i = 0; i < filterFunctions.length; i++) {\n                        if (!filterFunctions[i](model)) {\n                            return false;\n                        }\n                    }\n                    return true;\n                };\n                return createFilterObject(filterFunction, keys);\n            }\n            function createFilter(filter, keys) {\n                if (_.isFunction(filter)) {\n                    return createFilterObject(filter, keys);\n                }\n                if (_.isObject(filter)) {\n                    return createFilterFromObject(filter);\n                }\n            }\n            module.exports = createFilter;\n        },\n        function (module, exports) {\n            var _ = _requireDep('underscore');\n            var Backbone = _requireDep('./backbone-1.2.3+19b88d2+57e89d8');\n            var proxyCollection = _require(1);\n            function getPageLimits() {\n                var start = this.getPage() * this.getPerPage();\n                var end = start + this.getPerPage();\n                return [\n                    start,\n                    end\n                ];\n            }\n            function updatePagination() {\n                var pages = getPageLimits.call(this);\n                this._collection.reset(this.superset().slice(pages[0], pages[1]));\n            }\n            function updateNumPages() {\n                var currentNumPages = this._totalPages;\n                var length = this.superset().length;\n                var perPage = this.getPerPage();\n                var totalPages = length % perPage === 0 ? length / perPage : Math.floor(length / perPage) + 1;\n                var numPagesChanged = this._totalPages !== totalPages;\n                this._totalPages = totalPages;\n                if (numPagesChanged) {\n                    this.trigger('paginated:change:numPages', { numPages: totalPages });\n                }\n                if (this.getPage() >= totalPages) {\n                    this.setPage(totalPages - 1);\n                    return true;\n                }\n            }\n            function recalculatePagination() {\n                if (updateNumPages.call(this)) {\n                    return;\n                }\n                updatePagination.call(this);\n            }\n            function difference(arrayA, arrayB) {\n                var maxLength = _.max([\n                        arrayA.length,\n                        arrayB.length\n                    ]);\n                for (var i = 0, j = 0; i < maxLength; i += 1, j += 1) {\n                    if (arrayA[i] !== arrayB[j]) {\n                        if (arrayB[i - 1] === arrayA[i]) {\n                            j -= 1;\n                        } else if (arrayB[i + 1] === arrayA[i]) {\n                            j += 1;\n                        } else {\n                            return arrayA[i];\n                        }\n                    }\n                }\n            }\n            function onAddRemove(model, collection, options) {\n                if (updateNumPages.call(this)) {\n                    return;\n                }\n                var pages = getPageLimits.call(this);\n                var start = pages[0], end = pages[1];\n                var toAdd = difference(this.superset().slice(start, end), this._collection.toArray());\n                var toRemove = difference(this._collection.toArray(), this.superset().slice(start, end));\n                if (toRemove) {\n                    this._collection.remove(toRemove);\n                }\n                if (toAdd) {\n                    this._collection.add(toAdd, { at: this.superset().indexOf(toAdd) - start });\n                }\n            }\n            function Paginated(superset, options) {\n                this._superset = superset;\n                this._collection = new Backbone.Collection(superset.toArray());\n                this._page = 0;\n                this.setPerPage(options && options.perPage ? options.perPage : null);\n                proxyCollection(this._collection, this);\n                this.listenTo(this._superset, 'add remove', onAddRemove);\n                this.listenTo(this._superset, 'reset sort', recalculatePagination);\n            }\n            var methods = {\n                    removePagination: function () {\n                        this.setPerPage(null);\n                        return this;\n                    },\n                    setPerPage: function (perPage) {\n                        this._perPage = perPage;\n                        recalculatePagination.call(this);\n                        this.setPage(0);\n                        this.trigger('paginated:change:perPage', {\n                            perPage: perPage,\n                            numPages: this.getNumPages()\n                        });\n                        return this;\n                    },\n                    setPage: function (page) {\n                        var lowerLimit = 0;\n                        var upperLimit = this.getNumPages() - 1;\n                        page = page > lowerLimit ? page : lowerLimit;\n                        page = page < upperLimit ? page : upperLimit;\n                        page = page < 0 ? 0 : page;\n                        this._page = page;\n                        updatePagination.call(this);\n                        this.trigger('paginated:change:page', { page: page });\n                        return this;\n                    },\n                    getPerPage: function () {\n                        return this._perPage || this.superset().length || 1;\n                    },\n                    getNumPages: function () {\n                        return this._totalPages;\n                    },\n                    getPage: function () {\n                        return this._page;\n                    },\n                    hasNextPage: function () {\n                        return this.getPage() < this.getNumPages() - 1;\n                    },\n                    hasPrevPage: function () {\n                        return this.getPage() > 0;\n                    },\n                    nextPage: function () {\n                        this.movePage(1);\n                        return this;\n                    },\n                    prevPage: function () {\n                        this.movePage(-1);\n                        return this;\n                    },\n                    firstPage: function () {\n                        this.setPage(0);\n                    },\n                    lastPage: function () {\n                        this.setPage(this.getNumPages() - 1);\n                    },\n                    movePage: function (delta) {\n                        this.setPage(this.getPage() + delta);\n                        return this;\n                    },\n                    superset: function () {\n                        return this._superset;\n                    },\n                    destroy: function () {\n                        this.stopListening();\n                        this._collection.reset([]);\n                        this._superset = this._collection;\n                        this._page = 0;\n                        this._totalPages = 0;\n                        this.length = 0;\n                        this.trigger('paginated:destroy');\n                    }\n                };\n            _.extend(Paginated.prototype, methods, Backbone.Events);\n            module.exports = Paginated;\n        },\n        function (module, exports) {\n            var _ = _requireDep('underscore');\n            var Backbone = _requireDep('./backbone-1.2.3+19b88d2+57e89d8');\n            var proxyCollection = _require(1);\n            var reverseSortedIndex = _require(6);\n            function lookupIterator(value) {\n                return _.isFunction(value) ? value : function (obj) {\n                    return obj.get(value);\n                };\n            }\n            function modelInsertIndex(model) {\n                if (!this._comparator) {\n                    return this._superset.indexOf(model);\n                } else {\n                    if (!this._reverse) {\n                        return _.sortedIndex(this._collection.toArray(), model, lookupIterator(this._comparator));\n                    } else {\n                        return reverseSortedIndex(this._collection.toArray(), model, lookupIterator(this._comparator));\n                    }\n                }\n            }\n            function onAdd(model) {\n                var index = modelInsertIndex.call(this, model);\n                this._collection.add(model, { at: index });\n            }\n            function onRemove(model) {\n                if (this.contains(model)) {\n                    this._collection.remove(model);\n                }\n            }\n            function onChange(model) {\n                if (this.contains(model) && this._collection.indexOf(model) !== modelInsertIndex.call(this, model)) {\n                    this._collection.remove(model);\n                    onAdd.call(this, model);\n                }\n            }\n            function sort() {\n                if (!this._comparator) {\n                    this._collection.reset(this._superset.toArray());\n                    return;\n                }\n                var newOrder = this._superset.sortBy(this._comparator);\n                this._collection.reset(this._reverse ? newOrder.reverse() : newOrder);\n            }\n            function Sorted(superset) {\n                this._superset = superset;\n                this._reverse = false;\n                this._comparator = null;\n                this._collection = new Backbone.Collection(superset.toArray());\n                proxyCollection(this._collection, this);\n                this.listenTo(this._superset, 'add', onAdd);\n                this.listenTo(this._superset, 'remove', onRemove);\n                this.listenTo(this._superset, 'change', onChange);\n                this.listenTo(this._superset, 'reset', sort);\n            }\n            var methods = {\n                    setSort: function (comparator, direction) {\n                        this._reverse = direction === 'desc' ? true : false;\n                        this._comparator = comparator;\n                        sort.call(this);\n                        if (!comparator) {\n                            this.trigger('sorted:remove');\n                        } else {\n                            this.trigger('sorted:add');\n                        }\n                        return this;\n                    },\n                    reverseSort: function () {\n                        this._reverse = !this._reverse;\n                        sort.call(this);\n                        return this;\n                    },\n                    removeSort: function () {\n                        this.setSort();\n                        return this;\n                    },\n                    superset: function () {\n                        return this._superset;\n                    },\n                    destroy: function () {\n                        this.stopListening();\n                        this._collection.reset([]);\n                        this._superset = this._collection;\n                        this.length = 0;\n                        this.trigger('sorted:destroy');\n                    }\n                };\n            _.extend(Sorted.prototype, methods, Backbone.Events);\n            module.exports = Sorted;\n        },\n        function (module, exports) {\n            var _ = _requireDep('underscore');\n            function lookupIterator(value) {\n                return _.isFunction(value) ? value : function (obj) {\n                    return obj[value];\n                };\n            }\n            function reverseSortedIndex(array, obj, iterator, context) {\n                iterator = iterator == null ? _.identity : lookupIterator(iterator);\n                var value = iterator.call(context, obj);\n                var low = 0, high = array.length;\n                while (low < high) {\n                    var mid = low + high >>> 1;\n                    iterator.call(context, array[mid]) < value ? high = mid : low = mid + 1;\n                }\n                return low;\n            }\n            module.exports = reverseSortedIndex;\n        },\n        function (module, exports) {\n            var _ = _requireDep('underscore');\n            function proxyEvents(from, eventNames) {\n                _.each(eventNames, function (eventName) {\n                    this.listenTo(from, eventName, function () {\n                        var args = _.toArray(arguments);\n                        args.unshift(eventName);\n                        this.trigger.apply(this, args);\n                    });\n                }, this);\n            }\n            module.exports = proxyEvents;\n        }\n    ];\n    return  _require(0);\n}());\n\n  return _bundleExports;\n}));\n","(function (root, factory) {\n  if (typeof exports === 'object') {\n\n    var underscore = require('underscore');\n    var backbone = require('./backbone-1.2.3+19b88d2+57e89d8');\n\n    module.exports = factory(underscore, backbone);\n\n  } else if (typeof define === 'function' && define.amd) {\n\n    define(['underscore', './backbone-1.2.3+19b88d2+57e89d8'], factory);\n\n  }\n}(this, function (_, Backbone) {\n  \"use strict\";\n\n  Backbone.Wreqr = (function(Backbone, Marionette, _){\n  \"use strict\";\n  var Wreqr = {};\n\n  // Handlers\n// --------\n// A registry of functions to call, given a name\n\nWreqr.Handlers = (function(Backbone, _){\n  \"use strict\";\n\n  // Constructor\n  // -----------\n\n  var Handlers = function(options){\n    this.options = options;\n    this._wreqrHandlers = {};\n\n    if (_.isFunction(this.initialize)){\n      this.initialize(options);\n    }\n  };\n\n  Handlers.extend = Backbone.Model.extend;\n\n  // Instance Members\n  // ----------------\n\n  _.extend(Handlers.prototype, Backbone.Events, {\n\n    // Add multiple handlers using an object literal configuration\n    setHandlers: function(handlers){\n      _.each(handlers, function(handler, name){\n        var context = null;\n\n        if (_.isObject(handler) && !_.isFunction(handler)){\n          context = handler.context;\n          handler = handler.callback;\n        }\n\n        this.setHandler(name, handler, context);\n      }, this);\n    },\n\n    // Add a handler for the given name, with an\n    // optional context to run the handler within\n    setHandler: function(name, handler, context){\n      var config = {\n        callback: handler,\n        context: context\n      };\n\n      this._wreqrHandlers[name] = config;\n\n      this.trigger(\"handler:add\", name, handler, context);\n    },\n\n    // Determine whether or not a handler is registered\n    hasHandler: function(name){\n      return !! this._wreqrHandlers[name];\n    },\n\n    // Get the currently registered handler for\n    // the specified name. Throws an exception if\n    // no handler is found.\n    getHandler: function(name){\n      var config = this._wreqrHandlers[name];\n\n      if (!config){\n        return;\n      }\n\n      return function(){\n        var args = Array.prototype.slice.apply(arguments);\n        return config.callback.apply(config.context, args);\n      };\n    },\n\n    // Remove a handler for the specified name\n    removeHandler: function(name){\n      delete this._wreqrHandlers[name];\n    },\n\n    // Remove all handlers from this registry\n    removeAllHandlers: function(){\n      this._wreqrHandlers = {};\n    }\n  });\n\n  return Handlers;\n})(Backbone, _);\n\n  // Wreqr.CommandStorage\n// --------------------\n//\n// Store and retrieve commands for execution.\nWreqr.CommandStorage = (function(){\n  \"use strict\";\n\n  // Constructor function\n  var CommandStorage = function(options){\n    this.options = options;\n    this._commands = {};\n\n    if (_.isFunction(this.initialize)){\n      this.initialize(options);\n    }\n  };\n\n  // Instance methods\n  _.extend(CommandStorage.prototype, Backbone.Events, {\n\n    // Get an object literal by command name, that contains\n    // the `commandName` and the `instances` of all commands\n    // represented as an array of arguments to process\n    getCommands: function(commandName){\n      var commands = this._commands[commandName];\n\n      // we don't have it, so add it\n      if (!commands){\n\n        // build the configuration\n        commands = {\n          command: commandName,\n          instances: []\n        };\n\n        // store it\n        this._commands[commandName] = commands;\n      }\n\n      return commands;\n    },\n\n    // Add a command by name, to the storage and store the\n    // args for the command\n    addCommand: function(commandName, args){\n      var command = this.getCommands(commandName);\n      command.instances.push(args);\n    },\n\n    // Clear all commands for the given `commandName`\n    clearCommands: function(commandName){\n      var command = this.getCommands(commandName);\n      command.instances = [];\n    }\n  });\n\n  return CommandStorage;\n})();\n\n  // Wreqr.Commands\n// --------------\n//\n// A simple command pattern implementation. Register a command\n// handler and execute it.\nWreqr.Commands = (function(Wreqr){\n  \"use strict\";\n\n  return Wreqr.Handlers.extend({\n    // default storage type\n    storageType: Wreqr.CommandStorage,\n\n    constructor: function(options){\n      this.options = options || {};\n\n      this._initializeStorage(this.options);\n      this.on(\"handler:add\", this._executeCommands, this);\n\n      var args = Array.prototype.slice.call(arguments);\n      Wreqr.Handlers.prototype.constructor.apply(this, args);\n    },\n\n    // Execute a named command with the supplied args\n    execute: function(name, args){\n      name = arguments[0];\n      args = Array.prototype.slice.call(arguments, 1);\n\n      if (this.hasHandler(name)){\n        this.getHandler(name).apply(this, args);\n      } else {\n        this.storage.addCommand(name, args);\n      }\n\n    },\n\n    // Internal method to handle bulk execution of stored commands\n    _executeCommands: function(name, handler, context){\n      var command = this.storage.getCommands(name);\n\n      // loop through and execute all the stored command instances\n      _.each(command.instances, function(args){\n        handler.apply(context, args);\n      });\n\n      this.storage.clearCommands(name);\n    },\n\n    // Internal method to initialize storage either from the type's\n    // `storageType` or the instance `options.storageType`.\n    _initializeStorage: function(options){\n      var storage;\n\n      var StorageType = options.storageType || this.storageType;\n      if (_.isFunction(StorageType)){\n        storage = new StorageType();\n      } else {\n        storage = StorageType;\n      }\n\n      this.storage = storage;\n    }\n  });\n\n})(Wreqr);\n\n  // Wreqr.RequestResponse\n// ---------------------\n//\n// A simple request/response implementation. Register a\n// request handler, and return a response from it\nWreqr.RequestResponse = (function(Wreqr){\n  \"use strict\";\n\n  return Wreqr.Handlers.extend({\n    request: function(){\n      var name = arguments[0];\n      var args = Array.prototype.slice.call(arguments, 1);\n      if (this.hasHandler(name)) {\n        return this.getHandler(name).apply(this, args);\n      }\n    }\n  });\n\n})(Wreqr);\n\n  // Event Aggregator\n// ----------------\n// A pub-sub object that can be used to decouple various parts\n// of an application through event-driven architecture.\n\nWreqr.EventAggregator = (function(Backbone, _){\n  \"use strict\";\n  var EA = function(){};\n\n  // Copy the `extend` function used by Backbone's classes\n  EA.extend = Backbone.Model.extend;\n\n  // Copy the basic Backbone.Events on to the event aggregator\n  _.extend(EA.prototype, Backbone.Events);\n\n  return EA;\n})(Backbone, _);\n\n\n  return Wreqr;\n})(Backbone, Backbone.Marionette, _);\n\n  return Backbone.Wreqr;\n\n}));\n\n","/* ========================================================================\n * Bootstrap: button.js v3.0.0\n * http://twbs.github.com/bootstrap/javascript.html#buttons\n * ========================================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ======================================================================== */\n\n\n+function ($) { \"use strict\";\n\n  // BUTTON PUBLIC CLASS DEFINITION\n  // ==============================\n\n  var Button = function (element, options) {\n    this.$element = $(element)\n    this.options  = $.extend({}, Button.DEFAULTS, options)\n  }\n\n  Button.DEFAULTS = {\n    loadingText: 'loading...'\n  }\n\n  Button.prototype.setState = function (state) {\n    var d    = 'disabled'\n    var $el  = this.$element\n    var val  = $el.is('input') ? 'val' : 'html'\n    var data = $el.data()\n\n    state = state + 'Text'\n\n    if (!data.resetText) $el.data('resetText', $el[val]())\n\n    $el[val](data[state] || this.options[state])\n\n    // push to event loop to allow forms to submit\n    setTimeout(function () {\n      state == 'loadingText' ?\n        $el.addClass(d).attr(d, d) :\n        $el.removeClass(d).removeAttr(d);\n    }, 0)\n  }\n\n  Button.prototype.toggle = function () {\n    var $parent = this.$element.closest('[data-toggle=\"buttons\"]')\n\n    if ($parent.length) {\n      var $input = this.$element.find('input')\n        .prop('checked', !this.$element.hasClass('active'))\n        .trigger('change')\n      if ($input.prop('type') === 'radio') $parent.find('.active').removeClass('active')\n    }\n\n    this.$element.toggleClass('active')\n  }\n\n\n  // BUTTON PLUGIN DEFINITION\n  // ========================\n\n  var old = $.fn.button\n\n  $.fn.button = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.button')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.button', (data = new Button(this, options)))\n\n      if (option == 'toggle') data.toggle()\n      else if (option) data.setState(option)\n    })\n  }\n\n  $.fn.button.Constructor = Button\n\n\n  // BUTTON NO CONFLICT\n  // ==================\n\n  $.fn.button.noConflict = function () {\n    $.fn.button = old\n    return this\n  }\n\n\n  // BUTTON DATA-API\n  // ===============\n\n  $(document).on('click.bs.button.data-api', '[data-toggle^=button]', function (e) {\n    var $btn = $(e.target)\n    if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')\n    $btn.button('toggle')\n    e.preventDefault()\n  })\n\n}(window.jQuery);\n","/* ========================================================================\n * Bootstrap: modal.js v3.0.0\n * http://twbs.github.com/bootstrap/javascript.html#modals\n * ========================================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ======================================================================== */\n\n\n+function ($) { \"use strict\";\n\n  // MODAL CLASS DEFINITION\n  // ======================\n\n  var Modal = function (element, options) {\n    this.options   = options\n    this.$element  = $(element)\n    this.$backdrop =\n    this.isShown   = null\n\n    if (this.options.remote) this.$element.load(this.options.remote)\n  }\n\n  Modal.DEFAULTS = {\n      backdrop: true\n    , keyboard: true\n    , show: true\n  }\n\n  Modal.prototype.toggle = function (_relatedTarget) {\n    return this[!this.isShown ? 'show' : 'hide'](_relatedTarget)\n  }\n\n  Modal.prototype.show = function (_relatedTarget) {\n    var that = this\n    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })\n\n    this.$element.trigger(e)\n\n    if (this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = true\n\n    this.escape()\n\n    this.$element.on('click.dismiss.modal', '[data-dismiss=\"modal\"]', $.proxy(this.hide, this))\n\n    this.backdrop(function () {\n      var transition = $.support.transition && that.$element.hasClass('fade')\n\n      if (!that.$element.parent().length) {\n        that.$element.appendTo(document.body) // don't move modals dom position\n      }\n\n      that.$element.show()\n\n      if (transition) {\n        that.$element[0].offsetWidth // force reflow\n      }\n\n      that.$element\n        .addClass('in')\n        .attr('aria-hidden', false)\n\n      that.enforceFocus()\n\n      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })\n\n      transition ?\n        that.$element.find('.modal-dialog') // wait for modal to slide in\n          .one($.support.transition.end, function () {\n            that.$element.focus().trigger(e)\n          })\n          .emulateTransitionEnd(300) :\n        that.$element.focus().trigger(e)\n    })\n  }\n\n  Modal.prototype.hide = function (e) {\n    if (e) e.preventDefault()\n\n    e = $.Event('hide.bs.modal')\n\n    this.$element.trigger(e)\n\n    if (!this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = false\n\n    this.escape()\n\n    $(document).off('focusin.bs.modal')\n\n    this.$element\n      .removeClass('in')\n      .attr('aria-hidden', true)\n      .off('click.dismiss.modal')\n\n    $.support.transition && this.$element.hasClass('fade') ?\n      this.$element\n        .one($.support.transition.end, $.proxy(this.hideModal, this))\n        .emulateTransitionEnd(300) :\n      this.hideModal()\n  }\n\n  Modal.prototype.enforceFocus = function () {\n    $(document)\n      .off('focusin.bs.modal') // guard against infinite focus loop\n      .on('focusin.bs.modal', $.proxy(function (e) {\n        if (this.$element[0] !== e.target && !this.$element.has(e.target).length) {\n          this.$element.focus()\n        }\n      }, this))\n  }\n\n  Modal.prototype.escape = function () {\n    if (this.isShown && this.options.keyboard) {\n      this.$element.on('keyup.dismiss.bs.modal', $.proxy(function (e) {\n        e.which == 27 && this.hide()\n      }, this))\n    } else if (!this.isShown) {\n      this.$element.off('keyup.dismiss.bs.modal')\n    }\n  }\n\n  Modal.prototype.hideModal = function () {\n    var that = this\n    this.$element.hide()\n    this.backdrop(function () {\n      that.removeBackdrop()\n      that.$element.trigger('hidden.bs.modal')\n    })\n  }\n\n  Modal.prototype.removeBackdrop = function () {\n    // PLEX\n    delete this.backdropMouseDownTarget;\n    // /PLEX\n    this.$backdrop && this.$backdrop.remove()\n    this.$backdrop = null\n  }\n\n  Modal.prototype.backdrop = function (callback) {\n    var that    = this\n    var animate = this.$element.hasClass('fade') ? 'fade' : ''\n\n    if (this.isShown && this.options.backdrop) {\n      var doAnimate = $.support.transition && animate\n\n      this.$backdrop = $('<div class=\"modal-backdrop ' + animate + '\" />')\n        .appendTo(document.body)\n\n      // PLEX\n      this.$element.on('mousedown.dismiss.modal', $.proxy(function (e) {\n        this.backdropMouseDownTarget = e.target;\n      }, this))\n\n      this.$element.on('mouseup.dismiss.modal', $.proxy(function (e) {\n        if (e.target === this.backdropMouseDownTarget) {\n          delete this.backdropMouseDownTarget;\n        } else {\n          return;\n        }\n\n        if (e.target !== e.currentTarget) return\n        this.options.backdrop == 'static'\n          ? this.$element[0].focus.call(this.$element[0])\n          : this.hide.call(this)\n      }, this))\n      // /PLEX\n\n      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow\n\n      this.$backdrop.addClass('in')\n\n      if (!callback) return\n\n      doAnimate ?\n        this.$backdrop\n          .one($.support.transition.end, callback)\n          .emulateTransitionEnd(150) :\n        callback()\n\n    } else if (!this.isShown && this.$backdrop) {\n      this.$backdrop.removeClass('in')\n\n      $.support.transition && this.$element.hasClass('fade')?\n        this.$backdrop\n          .one($.support.transition.end, callback)\n          .emulateTransitionEnd(150) :\n        callback()\n\n    } else if (callback) {\n      callback()\n    }\n  }\n\n\n  // MODAL PLUGIN DEFINITION\n  // =======================\n\n  var old = $.fn.modal\n\n  $.fn.modal = function (option, _relatedTarget) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.modal')\n      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))\n      if (typeof option == 'string') data[option](_relatedTarget)\n      else if (options.show) data.show(_relatedTarget)\n    })\n  }\n\n  $.fn.modal.Constructor = Modal\n\n\n  // MODAL NO CONFLICT\n  // =================\n\n  $.fn.modal.noConflict = function () {\n    $.fn.modal = old\n    return this\n  }\n\n\n  // MODAL DATA-API\n  // ==============\n\n  $(document).on('click.bs.modal.data-api', '[data-toggle=\"modal\"]', function (e) {\n    var $this   = $(this)\n    var href    = $this.attr('href')\n    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) //strip for ie7\n    var option  = $target.data('modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())\n\n    e.preventDefault()\n\n    $target\n      .modal(option, this)\n      .one('hide', function () {\n        $this.is(':visible') && $this.focus()\n      })\n  })\n\n  $(document)\n    .on('show.bs.modal',  '.modal', function () { $(document.body).addClass('modal-open') })\n    .on('hidden.bs.modal', '.modal', function () { $(document.body).removeClass('modal-open') })\n\n}(window.jQuery);\n","/* ========================================================================\n * Bootstrap: tooltip.js v3.0.0\n * http://twbs.github.com/bootstrap/javascript.html#tooltip\n * Inspired by the original jQuery.tipsy by Jason Frame\n * ========================================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ======================================================================== */\n\n\n+function ($) { \"use strict\";\n\n  // TOOLTIP PUBLIC CLASS DEFINITION\n  // ===============================\n\n  var Tooltip = function (element, options) {\n    this.type       =\n    this.options    =\n    this.enabled    =\n    this.timeout    =\n    this.hoverState =\n    this.$element   = null\n\n    this.init('tooltip', element, options)\n  }\n\n  Tooltip.DEFAULTS = {\n    animation: true\n  , placement: 'top'\n  , selector: false\n  , template: '<div class=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>'\n  , trigger: 'hover focus'\n  , title: ''\n  , delay: 0\n  , html: false\n  , container: false\n  }\n\n  Tooltip.prototype.init = function (type, element, options) {\n    this.enabled  = true\n    this.type     = type\n    this.$element = $(element)\n    this.options  = this.getOptions(options)\n\n    var triggers = this.options.trigger.split(' ')\n\n    for (var i = triggers.length; i--;) {\n      var trigger = triggers[i]\n\n      if (trigger == 'click') {\n        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\n      } else if (trigger != 'manual') {\n        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focus'\n        var eventOut = trigger == 'hover' ? 'mouseleave' : 'blur'\n\n        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\n        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\n      }\n    }\n\n    this.options.selector ?\n      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\n      this.fixTitle()\n  }\n\n  Tooltip.prototype.getDefaults = function () {\n    return Tooltip.DEFAULTS\n  }\n\n  Tooltip.prototype.getOptions = function (options) {\n    options = $.extend({}, this.getDefaults(), this.$element.data(), options)\n\n    if (options.delay && typeof options.delay == 'number') {\n      options.delay = {\n        show: options.delay\n      , hide: options.delay\n      }\n    }\n\n    return options\n  }\n\n  Tooltip.prototype.getDelegateOptions = function () {\n    var options  = {}\n    var defaults = this.getDefaults()\n\n    this._options && $.each(this._options, function (key, value) {\n      if (defaults[key] != value) options[key] = value\n    })\n\n    return options\n  }\n\n  Tooltip.prototype.enter = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'in'\n\n    if (!self.options.delay || !self.options.delay.show) return self.show()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'in') self.show()\n    }, self.options.delay.show)\n  }\n\n  Tooltip.prototype.leave = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'out'\n\n    if (!self.options.delay || !self.options.delay.hide) return self.hide()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'out') self.hide()\n    }, self.options.delay.hide)\n  }\n\n  Tooltip.prototype.show = function () {\n    var e = $.Event('show.bs.'+ this.type)\n\n    if (this.hasContent() && this.enabled) {\n      this.$element.trigger(e)\n\n      if (e.isDefaultPrevented()) return\n\n      var $tip = this.tip()\n\n      this.setContent()\n\n      if (this.options.animation) $tip.addClass('fade')\n\n      var placement = typeof this.options.placement == 'function' ?\n        this.options.placement.call(this, $tip[0], this.$element[0]) :\n        this.options.placement\n\n      var autoToken = /\\s?auto?\\s?/i\n      var autoPlace = autoToken.test(placement)\n      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'\n\n      $tip\n        .detach()\n        .css({ top: 0, left: 0, display: 'block' })\n        .addClass(placement)\n\n      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)\n\n      var pos          = this.getPosition()\n      var actualWidth  = $tip[0].offsetWidth\n      var actualHeight = $tip[0].offsetHeight\n\n      if (autoPlace) {\n        var $parent = this.$element.parent()\n\n        var orgPlacement = placement\n        var docScroll    = document.documentElement.scrollTop || document.body.scrollTop\n        var parentWidth  = this.options.container == 'body' ? window.innerWidth  : $parent.outerWidth()\n        var parentHeight = this.options.container == 'body' ? window.innerHeight : $parent.outerHeight()\n        var parentLeft   = this.options.container == 'body' ? 0 : $parent.offset().left\n\n        placement = placement == 'bottom' && pos.top   + pos.height  + actualHeight - docScroll > parentHeight  ? 'top'    :\n                    placement == 'top'    && pos.top   - docScroll   - actualHeight < 0                         ? 'bottom' :\n                    placement == 'right'  && pos.right + actualWidth > parentWidth                              ? 'left'   :\n                    placement == 'left'   && pos.left  - actualWidth < parentLeft                               ? 'right'  :\n                    placement\n\n        $tip\n          .removeClass(orgPlacement)\n          .addClass(placement)\n      }\n\n      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)\n\n      this.applyPlacement(calculatedOffset, placement)\n      this.$element.trigger('shown.bs.' + this.type)\n    }\n  }\n\n  Tooltip.prototype.applyPlacement = function(offset, placement) {\n    var replace\n    var $tip   = this.tip()\n    var width  = $tip[0].offsetWidth\n    var height = $tip[0].offsetHeight\n\n    // manually read margins because getBoundingClientRect includes difference\n    var marginTop = parseInt($tip.css('margin-top'), 10)\n    var marginLeft = parseInt($tip.css('margin-left'), 10)\n\n    // we must check for NaN for ie 8/9\n    if (isNaN(marginTop))  marginTop  = 0\n    if (isNaN(marginLeft)) marginLeft = 0\n\n    offset.top  = offset.top  + marginTop\n    offset.left = offset.left + marginLeft\n\n    $tip\n      .offset(offset)\n      .addClass('in')\n\n    // check to see if placing tip in new offset caused the tip to resize itself\n    var actualWidth  = $tip[0].offsetWidth\n    var actualHeight = $tip[0].offsetHeight\n\n    if (placement == 'top' && actualHeight != height) {\n      replace = true\n      offset.top = offset.top + height - actualHeight\n    }\n\n    if (/bottom|top/.test(placement)) {\n      var delta = 0\n\n      if (offset.left < 0) {\n        delta       = offset.left * -2\n        offset.left = 0\n\n        $tip.offset(offset)\n\n        actualWidth  = $tip[0].offsetWidth\n        actualHeight = $tip[0].offsetHeight\n      }\n\n      this.replaceArrow(delta - width + actualWidth, actualWidth, 'left')\n    } else {\n      this.replaceArrow(actualHeight - height, actualHeight, 'top')\n    }\n\n    if (replace) $tip.offset(offset)\n  }\n\n  Tooltip.prototype.replaceArrow = function(delta, dimension, position) {\n    this.arrow().css(position, delta ? (50 * (1 - delta / dimension) + \"%\") : '')\n  }\n\n  Tooltip.prototype.setContent = function () {\n    var $tip  = this.tip()\n    var title = this.getTitle()\n\n    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\n    $tip.removeClass('fade in top bottom left right')\n  }\n\n  Tooltip.prototype.hide = function () {\n    var that = this\n    var $tip = this.tip()\n    var e    = $.Event('hide.bs.' + this.type)\n\n    function complete() {\n      if (that.hoverState != 'in') $tip.detach()\n    }\n\n    this.$element.trigger(e)\n\n    if (e.isDefaultPrevented()) return\n\n    $tip.removeClass('in')\n\n    $.support.transition && this.$tip.hasClass('fade') ?\n      $tip\n        .one($.support.transition.end, complete)\n        .emulateTransitionEnd(150) :\n      complete()\n\n    this.$element.trigger('hidden.bs.' + this.type)\n\n    return this\n  }\n\n  Tooltip.prototype.fixTitle = function () {\n    var $e = this.$element\n    if ($e.attr('title') || typeof($e.attr('data-original-title')) != 'string') {\n      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')\n    }\n  }\n\n  Tooltip.prototype.hasContent = function () {\n    return this.getTitle()\n  }\n\n  Tooltip.prototype.getPosition = function () {\n    var el = this.$element[0]\n    return $.extend({}, (typeof el.getBoundingClientRect == 'function') ? el.getBoundingClientRect() : {\n      width: el.offsetWidth\n    , height: el.offsetHeight\n    }, this.$element.offset())\n  }\n\n  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {\n    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2  } :\n           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2  } :\n           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :\n        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width   }\n  }\n\n  Tooltip.prototype.getTitle = function () {\n    var title\n    var $e = this.$element\n    var o  = this.options\n\n    title = $e.attr('data-original-title')\n      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)\n\n    return title\n  }\n\n  Tooltip.prototype.tip = function () {\n    return this.$tip = this.$tip || $(this.options.template)\n  }\n\n  Tooltip.prototype.arrow = function () {\n    return this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow')\n  }\n\n  Tooltip.prototype.validate = function () {\n    if (!this.$element[0].parentNode) {\n      this.hide()\n      this.$element = null\n      this.options  = null\n    }\n  }\n\n  Tooltip.prototype.enable = function () {\n    this.enabled = true\n  }\n\n  Tooltip.prototype.disable = function () {\n    this.enabled = false\n  }\n\n  Tooltip.prototype.toggleEnabled = function () {\n    this.enabled = !this.enabled\n  }\n\n  Tooltip.prototype.toggle = function (e) {\n    var self = e ? $(e.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type) : this\n    self.tip().hasClass('in') ? self.leave(self) : self.enter(self)\n  }\n\n  Tooltip.prototype.destroy = function () {\n    this.hide().$element.off('.' + this.type).removeData('bs.' + this.type)\n  }\n\n\n  // TOOLTIP PLUGIN DEFINITION\n  // =========================\n\n  var old = $.fn.tooltip\n\n  $.fn.tooltip = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.tooltip')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.tooltip.Constructor = Tooltip\n\n\n  // TOOLTIP NO CONFLICT\n  // ===================\n\n  $.fn.tooltip.noConflict = function () {\n    $.fn.tooltip = old\n    return this\n  }\n\n}(window.jQuery);\n","/* ========================================================================\n * Bootstrap: transition.js v3.0.0\n * http://twbs.github.com/bootstrap/javascript.html#transitions\n * ========================================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ======================================================================== */\n\n\n+function ($) { \"use strict\";\n\n  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)\n  // ============================================================\n\n  function transitionEnd() {\n    var el = document.createElement('bootstrap')\n\n    var transEndEventNames = {\n      'WebkitTransition' : 'webkitTransitionEnd'\n    , 'MozTransition'    : 'transitionend'\n    , 'OTransition'      : 'oTransitionEnd otransitionend'\n    , 'transition'       : 'transitionend'\n    }\n\n    for (var name in transEndEventNames) {\n      if (el.style[name] !== undefined) {\n        return { end: transEndEventNames[name] }\n      }\n    }\n  }\n\n  // http://blog.alexmaccaw.com/css-transitions\n  $.fn.emulateTransitionEnd = function (duration) {\n    var called = false, $el = this\n    $(this).one($.support.transition.end, function () { called = true })\n    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }\n    setTimeout(callback, duration)\n    return this\n  }\n\n  $(function () {\n    $.support.transition = transitionEnd()\n  })\n\n}(window.jQuery);\n","(function () {\n  'use strict';\n\n  var UNSUPPORTED_ENVIRONMENT = typeof window === \"undefined\";\n\n  /**\n   * Is true if the browser natively supports the 'scroll-behavior' CSS-property.\n   * @type {boolean}\n   */\n  var SUPPORTS_SCROLL_BEHAVIOR = UNSUPPORTED_ENVIRONMENT ? false : \"scrollBehavior\" in document.documentElement.style;\n\n  /*! *****************************************************************************\n  Copyright (c) Microsoft Corporation.\n\n  Permission to use, copy, modify, and/or distribute this software for any\n  purpose with or without fee is hereby granted.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n  PERFORMANCE OF THIS SOFTWARE.\n  ***************************************************************************** */\n\n  var __assign = function() {\n      __assign = Object.assign || function __assign(t) {\n          for (var s, i = 1, n = arguments.length; i < n; i++) {\n              s = arguments[i];\n              for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n          }\n          return t;\n      };\n      return __assign.apply(this, arguments);\n  };\n\n  function __read(o, n) {\n      var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n      if (!m) return o;\n      var i = m.call(o), r, ar = [], e;\n      try {\n          while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n      }\n      catch (error) { e = { error: error }; }\n      finally {\n          try {\n              if (r && !r.done && (m = i[\"return\"])) m.call(i);\n          }\n          finally { if (e) throw e.error; }\n      }\n      return ar;\n  }\n\n  function getScrollingElement() {\n      if (document.scrollingElement != null) {\n          return document.scrollingElement;\n      }\n      else {\n          return document.documentElement;\n      }\n  }\n\n  var STYLE_ATTRIBUTE_PROPERTY_NAME = \"scroll-behavior\";\n  var STYLE_ATTRIBUTE_PROPERTY_REGEXP = new RegExp(STYLE_ATTRIBUTE_PROPERTY_NAME + \":\\\\s*([^;]*)\");\n  /**\n   * Given an Element, this function appends the given ScrollBehavior CSS property value to the elements' 'style' attribute.\n   * If it doesnt already have one, it will add it.\n   * @param {Element} element\n   * @param {ScrollBehavior} behavior\n   */\n  function appendScrollBehaviorToStyleAttribute(element, behavior) {\n      var addition = STYLE_ATTRIBUTE_PROPERTY_NAME + \":\" + behavior;\n      var attributeValue = element.getAttribute(\"style\");\n      if (attributeValue == null || attributeValue === \"\") {\n          element.setAttribute(\"style\", addition);\n          return;\n      }\n      // The style attribute may already include a 'scroll-behavior:<something>' in which case that should be replaced\n      var existingValueForProperty = parseScrollBehaviorFromStyleAttribute(element);\n      if (existingValueForProperty != null) {\n          var replacementProperty = STYLE_ATTRIBUTE_PROPERTY_NAME + \":\" + existingValueForProperty;\n          // Replace the variant that ends with a semi-colon which it may\n          attributeValue = attributeValue.replace(replacementProperty + \";\", \"\");\n          // Replace the variant that *doesn't* end with a semi-colon\n          attributeValue = attributeValue.replace(replacementProperty, \"\");\n      }\n      // Now, append the behavior to the string.\n      element.setAttribute(\"style\", attributeValue.endsWith(\";\") ? \"\" + attributeValue + addition : \";\" + attributeValue + addition);\n  }\n  /**\n   * Given an Element, this function attempts to parse its 'style' attribute (if it has one)' to extract\n   * a value for the 'scroll-behavior' CSS property (if it is given within that style attribute)\n   * @param {Element} element\n   * @returns {ScrollBehavior?}\n   */\n  function parseScrollBehaviorFromStyleAttribute(element) {\n      var styleAttributeValue = element.getAttribute(\"style\");\n      if (styleAttributeValue != null && styleAttributeValue.includes(STYLE_ATTRIBUTE_PROPERTY_NAME)) {\n          var match = styleAttributeValue.match(STYLE_ATTRIBUTE_PROPERTY_REGEXP);\n          if (match != null) {\n              var _a = __read(match, 2), behavior = _a[1];\n              if (behavior != null && behavior !== \"\") {\n                  return behavior;\n              }\n          }\n      }\n      return undefined;\n  }\n\n  var styleDeclarationPropertyName = \"scrollBehavior\";\n  /**\n   * Determines the scroll behavior to use, depending on the given ScrollOptions and the position of the Element\n   * within the DOM\n   * @param {Element|HTMLElement|Window} inputTarget\n   * @param {ScrollOptions} [options]\n   * @returns {ScrollBehavior}\n   */\n  function getScrollBehavior(inputTarget, options) {\n      // If the given 'behavior' is 'smooth', apply smooth scrolling no matter what\n      if (options != null && options.behavior === \"smooth\")\n          return \"smooth\";\n      var target = \"style\" in inputTarget ? inputTarget : getScrollingElement();\n      var value;\n      if (\"style\" in target) {\n          // Check if scroll-behavior is set as a property on the CSSStyleDeclaration\n          var scrollBehaviorPropertyValue = target.style[styleDeclarationPropertyName];\n          // Return it if it is given and has a proper value\n          if (scrollBehaviorPropertyValue != null && scrollBehaviorPropertyValue !== \"\") {\n              value = scrollBehaviorPropertyValue;\n          }\n      }\n      if (value == null) {\n          var attributeValue = target.getAttribute(\"scroll-behavior\");\n          if (attributeValue != null && attributeValue !== \"\") {\n              value = attributeValue;\n          }\n      }\n      if (value == null) {\n          // Otherwise, check if it is set as an inline style\n          value = parseScrollBehaviorFromStyleAttribute(target);\n      }\n      if (value == null) {\n          // Take the computed style for the element and see if it contains a specific 'scroll-behavior' value\n          var computedStyle = getComputedStyle(target);\n          var computedStyleValue = computedStyle.getPropertyValue(\"scrollBehavior\");\n          if (computedStyleValue != null && computedStyleValue !== \"\") {\n              value = computedStyleValue;\n          }\n      }\n      // In all other cases, use the value from the CSSOM\n      return value;\n  }\n\n  var HALF = 0.5;\n  /**\n   * The easing function to use when applying the smooth scrolling\n   * @param {number} k\n   * @returns {number}\n   */\n  function ease(k) {\n      return HALF * (1 - Math.cos(Math.PI * k));\n  }\n\n  var NOOP = {\n      reset: function () { }\n  };\n  var map = typeof WeakMap === \"undefined\" ? undefined : new WeakMap();\n  function disableScrollSnap(scroller) {\n      // If scroll-behavior is natively supported, or if there is no native WeakMap support, there's no need for this fix\n      if (SUPPORTS_SCROLL_BEHAVIOR || map == null) {\n          return NOOP;\n      }\n      var scrollingElement = getScrollingElement();\n      var cachedScrollSnapValue;\n      var cachedScrollBehaviorStyleAttributeValue;\n      var secondaryScroller;\n      var secondaryScrollerCachedScrollSnapValue;\n      var secondaryScrollerCachedScrollBehaviorStyleAttributeValue;\n      var existingResult = map.get(scroller);\n      if (existingResult != null) {\n          cachedScrollSnapValue = existingResult.cachedScrollSnapValue;\n          cachedScrollBehaviorStyleAttributeValue = existingResult.cachedScrollBehaviorStyleAttributeValue;\n          secondaryScroller = existingResult.secondaryScroller;\n          secondaryScrollerCachedScrollSnapValue = existingResult.secondaryScrollerCachedScrollSnapValue;\n          secondaryScrollerCachedScrollBehaviorStyleAttributeValue = existingResult.secondaryScrollerCachedScrollBehaviorStyleAttributeValue;\n          existingResult.release();\n      }\n      else {\n          cachedScrollSnapValue = scroller.style.scrollSnapType === \"\" ? null : scroller.style.scrollSnapType;\n          cachedScrollBehaviorStyleAttributeValue = parseScrollBehaviorFromStyleAttribute(scroller);\n          secondaryScroller = scroller === scrollingElement && scrollingElement !== document.body ? document.body : undefined;\n          secondaryScrollerCachedScrollSnapValue =\n              secondaryScroller == null ? undefined : secondaryScroller.style.scrollSnapType === \"\" ? null : secondaryScroller.style.scrollSnapType;\n          secondaryScrollerCachedScrollBehaviorStyleAttributeValue =\n              secondaryScroller == null ? undefined : parseScrollBehaviorFromStyleAttribute(secondaryScroller);\n          var cachedComputedScrollSnapValue = getComputedStyle(scroller).getPropertyValue(\"scroll-snap-type\");\n          var secondaryScrollerCachedComputedScrollSnapValue = secondaryScroller == null ? undefined : getComputedStyle(secondaryScroller).getPropertyValue(\"scroll-snap-type\");\n          // If it just so happens that there actually isn't any scroll snapping going on, there's no point in performing any additional work here.\n          if (cachedComputedScrollSnapValue === \"none\" && secondaryScrollerCachedComputedScrollSnapValue === \"none\") {\n              return NOOP;\n          }\n      }\n      scroller.style.scrollSnapType = \"none\";\n      if (secondaryScroller !== undefined) {\n          secondaryScroller.style.scrollSnapType = \"none\";\n      }\n      if (cachedScrollBehaviorStyleAttributeValue !== undefined) {\n          appendScrollBehaviorToStyleAttribute(scroller, cachedScrollBehaviorStyleAttributeValue);\n      }\n      if (secondaryScroller !== undefined && secondaryScrollerCachedScrollBehaviorStyleAttributeValue !== undefined) {\n          appendScrollBehaviorToStyleAttribute(secondaryScroller, secondaryScrollerCachedScrollBehaviorStyleAttributeValue);\n      }\n      var hasReleased = false;\n      var eventTarget = scroller === scrollingElement ? window : scroller;\n      function release() {\n          eventTarget.removeEventListener(\"scroll\", resetHandler);\n          if (map != null) {\n              map[\"delete\"](scroller);\n          }\n          hasReleased = true;\n      }\n      function resetHandler() {\n          scroller.style.scrollSnapType = cachedScrollSnapValue;\n          if (secondaryScroller != null && secondaryScrollerCachedScrollSnapValue !== undefined) {\n              secondaryScroller.style.scrollSnapType = secondaryScrollerCachedScrollSnapValue;\n          }\n          if (cachedScrollBehaviorStyleAttributeValue !== undefined) {\n              appendScrollBehaviorToStyleAttribute(scroller, cachedScrollBehaviorStyleAttributeValue);\n          }\n          if (secondaryScroller !== undefined && secondaryScrollerCachedScrollBehaviorStyleAttributeValue !== undefined) {\n              appendScrollBehaviorToStyleAttribute(secondaryScroller, secondaryScrollerCachedScrollBehaviorStyleAttributeValue);\n          }\n          release();\n      }\n      function reset() {\n          setTimeout(function () {\n              if (hasReleased)\n                  return;\n              eventTarget.addEventListener(\"scroll\", resetHandler);\n          });\n      }\n      map.set(scroller, {\n          release: release,\n          cachedScrollSnapValue: cachedScrollSnapValue,\n          cachedScrollBehaviorStyleAttributeValue: cachedScrollBehaviorStyleAttributeValue,\n          secondaryScroller: secondaryScroller,\n          secondaryScrollerCachedScrollSnapValue: secondaryScrollerCachedScrollSnapValue,\n          secondaryScrollerCachedScrollBehaviorStyleAttributeValue: secondaryScrollerCachedScrollBehaviorStyleAttributeValue\n      });\n      return {\n          reset: reset\n      };\n  }\n\n  /**\n   * The duration of a smooth scroll\n   * @type {number}\n   */\n  var SCROLL_TIME = 15000;\n  /**\n   * Performs a smooth repositioning of the scroll\n   * @param {ISmoothScrollOptions} options\n   */\n  function smoothScroll(options) {\n      var startTime = options.startTime, startX = options.startX, startY = options.startY, endX = options.endX, endY = options.endY, method = options.method, scroller = options.scroller;\n      var timeLapsed = 0;\n      var distanceX = endX - startX;\n      var distanceY = endY - startY;\n      var speed = Math.max(Math.abs((distanceX / 1000) * SCROLL_TIME), Math.abs((distanceY / 1000) * SCROLL_TIME));\n      // Temporarily disables any scroll snapping that may be active since it fights for control over the scroller with this polyfill\n      var scrollSnapFix = disableScrollSnap(scroller);\n      requestAnimationFrame(function animate(timestamp) {\n          timeLapsed += timestamp - startTime;\n          var percentage = Math.max(0, Math.min(1, speed === 0 ? 0 : timeLapsed / speed));\n          var positionX = Math.floor(startX + distanceX * ease(percentage));\n          var positionY = Math.floor(startY + distanceY * ease(percentage));\n          method(positionX, positionY);\n          if (positionX !== endX || positionY !== endY) {\n              requestAnimationFrame(animate);\n          }\n          else {\n              if (scrollSnapFix != null) {\n                  scrollSnapFix.reset();\n                  scrollSnapFix = undefined;\n              }\n          }\n      });\n  }\n\n  /**\n   * Returns a High Resolution timestamp if possible, otherwise fallbacks to Date.now()\n   * @returns {number}\n   */\n  function now() {\n      if (\"performance\" in window)\n          return performance.now();\n      return Date.now();\n  }\n\n  var ELEMENT_ORIGINAL_SCROLL = UNSUPPORTED_ENVIRONMENT ? undefined : Element.prototype.scroll;\n\n  var WINDOW_ORIGINAL_SCROLL = UNSUPPORTED_ENVIRONMENT ? undefined : window.scroll;\n\n  var ELEMENT_ORIGINAL_SCROLL_BY = UNSUPPORTED_ENVIRONMENT ? undefined : Element.prototype.scrollBy;\n\n  var WINDOW_ORIGINAL_SCROLL_BY = UNSUPPORTED_ENVIRONMENT ? undefined : window.scrollBy;\n\n  var ELEMENT_ORIGINAL_SCROLL_TO = UNSUPPORTED_ENVIRONMENT ? undefined : Element.prototype.scrollTo;\n\n  var WINDOW_ORIGINAL_SCROLL_TO = UNSUPPORTED_ENVIRONMENT ? undefined : window.scrollTo;\n\n  /**\n   * A fallback if Element.prototype.scroll is not defined\n   * @param {number} x\n   * @param {number} y\n   */\n  function elementPrototypeScrollFallback(x, y) {\n      this.__adjustingScrollPosition = true;\n      this.scrollLeft = x;\n      this.scrollTop = y;\n      delete this.__adjustingScrollPosition;\n  }\n  /**\n   * A fallback if Element.prototype.scrollTo is not defined\n   * @param {number} x\n   * @param {number} y\n   */\n  function elementPrototypeScrollToFallback(x, y) {\n      return elementPrototypeScrollFallback.call(this, x, y);\n  }\n  /**\n   * A fallback if Element.prototype.scrollBy is not defined\n   * @param {number} x\n   * @param {number} y\n   */\n  function elementPrototypeScrollByFallback(x, y) {\n      this.__adjustingScrollPosition = true;\n      this.scrollLeft += x;\n      this.scrollTop += y;\n      delete this.__adjustingScrollPosition;\n  }\n  /**\n   * Gets the original non-patched prototype method for the given kind\n   * @param {ScrollMethodName} kind\n   * @param {Element|Window} element\n   * @return {Function}\n   */\n  function getOriginalScrollMethodForKind(kind, element) {\n      switch (kind) {\n          case \"scroll\":\n              if (element instanceof Element) {\n                  if (ELEMENT_ORIGINAL_SCROLL != null) {\n                      return ELEMENT_ORIGINAL_SCROLL;\n                  }\n                  else {\n                      return elementPrototypeScrollFallback;\n                  }\n              }\n              else {\n                  return WINDOW_ORIGINAL_SCROLL;\n              }\n          case \"scrollBy\":\n              if (element instanceof Element) {\n                  if (ELEMENT_ORIGINAL_SCROLL_BY != null) {\n                      return ELEMENT_ORIGINAL_SCROLL_BY;\n                  }\n                  else {\n                      return elementPrototypeScrollByFallback;\n                  }\n              }\n              else {\n                  return WINDOW_ORIGINAL_SCROLL_BY;\n              }\n          case \"scrollTo\":\n              if (element instanceof Element) {\n                  if (ELEMENT_ORIGINAL_SCROLL_TO != null) {\n                      return ELEMENT_ORIGINAL_SCROLL_TO;\n                  }\n                  else {\n                      return elementPrototypeScrollToFallback;\n                  }\n              }\n              else {\n                  return WINDOW_ORIGINAL_SCROLL_TO;\n              }\n      }\n  }\n\n  /**\n   * Gets the Smooth Scroll Options to use for the step function\n   * @param {Element|Window} element\n   * @param {number} x\n   * @param {number} y\n   * @param {ScrollMethodName} kind\n   * @returns {ISmoothScrollOptions}\n   */\n  function getSmoothScrollOptions(element, x, y, kind) {\n      var startTime = now();\n      if (!(element instanceof Element)) {\n          // Use window as the scroll container\n          var scrollX_1 = window.scrollX, pageXOffset_1 = window.pageXOffset, scrollY_1 = window.scrollY, pageYOffset_1 = window.pageYOffset;\n          var startX = scrollX_1 == null || scrollX_1 === 0 ? pageXOffset_1 : scrollX_1;\n          var startY = scrollY_1 == null || scrollY_1 === 0 ? pageYOffset_1 : scrollY_1;\n          return {\n              startTime: startTime,\n              startX: startX,\n              startY: startY,\n              endX: Math.floor(kind === \"scrollBy\" ? startX + x : x),\n              endY: Math.floor(kind === \"scrollBy\" ? startY + y : y),\n              method: getOriginalScrollMethodForKind(\"scrollTo\", window).bind(window),\n              scroller: getScrollingElement()\n          };\n      }\n      else {\n          var scrollLeft = element.scrollLeft, scrollTop = element.scrollTop;\n          var startX = scrollLeft;\n          var startY = scrollTop;\n          return {\n              startTime: startTime,\n              startX: startX,\n              startY: startY,\n              endX: Math.floor(kind === \"scrollBy\" ? startX + x : x),\n              endY: Math.floor(kind === \"scrollBy\" ? startY + y : y),\n              method: getOriginalScrollMethodForKind(\"scrollTo\", element).bind(element),\n              scroller: element\n          };\n      }\n  }\n\n  /**\n   * Ensures that the given value is numeric\n   * @param {number} value\n   * @return {number}\n   */\n  function ensureNumeric(value) {\n      if (value == null)\n          return 0;\n      else if (typeof value === \"number\") {\n          return value;\n      }\n      else if (typeof value === \"string\") {\n          return parseFloat(value);\n      }\n      else {\n          return 0;\n      }\n  }\n\n  /**\n   * Returns true if the given value is some ScrollToOptions\n   * @param {number | ScrollToOptions} value\n   * @return {value is ScrollToOptions}\n   */\n  function isScrollToOptions(value) {\n      return value != null && typeof value === \"object\";\n  }\n\n  /**\n   * Handles a scroll method\n   * @param {Element|Window} element\n   * @param {ScrollMethodName} kind\n   * @param {number | ScrollToOptions} optionsOrX\n   * @param {number} y\n   */\n  function handleScrollMethod(element, kind, optionsOrX, y) {\n      onScrollWithOptions(getScrollToOptionsWithValidation(optionsOrX, y), element, kind);\n  }\n  /**\n   * Invoked when a 'ScrollToOptions' dict is provided to 'scroll()' as the first argument\n   * @param {ScrollToOptions} options\n   * @param {Element|Window} element\n   * @param {ScrollMethodName} kind\n   */\n  function onScrollWithOptions(options, element, kind) {\n      var behavior = getScrollBehavior(element, options);\n      // If the behavior is 'auto' apply instantaneous scrolling\n      if (behavior == null || behavior === \"auto\") {\n          getOriginalScrollMethodForKind(kind, element).call(element, options.left, options.top);\n      }\n      else {\n          smoothScroll(getSmoothScrollOptions(element, options.left, options.top, kind));\n      }\n  }\n  /**\n   * Normalizes the given scroll coordinates\n   * @param {number?} x\n   * @param {number?} y\n   * @return {Required<Pick<ScrollToOptions, \"top\" | \"left\">>}\n   */\n  function normalizeScrollCoordinates(x, y) {\n      return {\n          left: ensureNumeric(x),\n          top: ensureNumeric(y)\n      };\n  }\n  /**\n   * Gets ScrollToOptions based on the given arguments. Will throw if validation fails\n   * @param {number | ScrollToOptions} optionsOrX\n   * @param {number} y\n   * @return {Required<ScrollToOptions>}\n   */\n  function getScrollToOptionsWithValidation(optionsOrX, y) {\n      // If only one argument is given, and it isn't an options object, throw a TypeError\n      if (y === undefined && !isScrollToOptions(optionsOrX)) {\n          throw new TypeError(\"Failed to execute 'scroll' on 'Element': parameter 1 ('options') is not an object.\");\n      }\n      // Scroll based on the primitive values given as arguments\n      if (!isScrollToOptions(optionsOrX)) {\n          return __assign(__assign({}, normalizeScrollCoordinates(optionsOrX, y)), { behavior: \"auto\" });\n      }\n      // Scroll based on the received options object\n      else {\n          return __assign(__assign({}, normalizeScrollCoordinates(optionsOrX.left, optionsOrX.top)), { behavior: optionsOrX.behavior == null ? \"auto\" : optionsOrX.behavior });\n      }\n  }\n\n  /**\n   * Patches the 'scroll' method on the Element prototype\n   */\n  function patchElementScroll() {\n      Element.prototype.scroll = function (optionsOrX, y) {\n          handleScrollMethod(this, \"scroll\", optionsOrX, y);\n      };\n  }\n\n  /**\n   * Patches the 'scrollBy' method on the Element prototype\n   */\n  function patchElementScrollBy() {\n      Element.prototype.scrollBy = function (optionsOrX, y) {\n          handleScrollMethod(this, \"scrollBy\", optionsOrX, y);\n      };\n  }\n\n  /**\n   * Patches the 'scrollTo' method on the Element prototype\n   */\n  function patchElementScrollTo() {\n      Element.prototype.scrollTo = function (optionsOrX, y) {\n          handleScrollMethod(this, \"scrollTo\", optionsOrX, y);\n      };\n  }\n\n  /**\n   * Patches the 'scroll' method on the Window prototype\n   */\n  function patchWindowScroll() {\n      window.scroll = function (optionsOrX, y) {\n          handleScrollMethod(this, \"scroll\", optionsOrX, y);\n      };\n  }\n\n  /**\n   * Patches the 'scrollBy' method on the Window prototype\n   */\n  function patchWindowScrollBy() {\n      window.scrollBy = function (optionsOrX, y) {\n          handleScrollMethod(this, \"scrollBy\", optionsOrX, y);\n      };\n  }\n\n  /**\n   * Patches the 'scrollTo' method on the Window prototype\n   */\n  function patchWindowScrollTo() {\n      window.scrollTo = function (optionsOrX, y) {\n          handleScrollMethod(this, \"scrollTo\", optionsOrX, y);\n      };\n  }\n\n  // tslint:disable:no-any\n  /**\n   * Gets the parent of an element, taking into account DocumentFragments, ShadowRoots, as well as the root context (window)\n   * @param {EventTarget} currentElement\n   * @returns {EventTarget | null}\n   */\n  function getParent(currentElement) {\n      if (\"nodeType\" in currentElement && currentElement.nodeType === 1) {\n          return currentElement.parentNode;\n      }\n      if (\"ShadowRoot\" in window && currentElement instanceof window.ShadowRoot) {\n          return currentElement.host;\n      }\n      else if (currentElement === document) {\n          return window;\n      }\n      else if (currentElement instanceof Node)\n          return currentElement.parentNode;\n      return null;\n  }\n\n  /**\n   * Returns true if the given overflow property represents a scrollable overflow value\n   * @param {string | null} overflow\n   * @return {boolean}\n   */\n  function canOverflow(overflow) {\n      return overflow !== \"visible\" && overflow !== \"clip\";\n  }\n  /**\n   * Returns true if the given element is scrollable\n   * @param {Element} element\n   * @return {boolean}\n   */\n  function isScrollable(element) {\n      if (element.clientHeight < element.scrollHeight || element.clientWidth < element.scrollWidth) {\n          var style = getComputedStyle(element, null);\n          return canOverflow(style.overflowY) || canOverflow(style.overflowX);\n      }\n      return false;\n  }\n  /**\n   * Finds the nearest ancestor of an element that can scroll\n   * @param {Element} target\n   * @returns {Element|Window?}\n   */\n  function findNearestAncestorsWithScrollBehavior(target) {\n      var currentElement = target;\n      var scrollingElement = getScrollingElement();\n      while (currentElement != null) {\n          var behavior = getScrollBehavior(currentElement);\n          if (behavior != null && (currentElement === scrollingElement || isScrollable(currentElement))) {\n              return [currentElement, behavior];\n          }\n          var parent_1 = getParent(currentElement);\n          currentElement = parent_1;\n      }\n      // No such element could be found. Start over, but this time find the nearest ancestor that can simply scroll\n      currentElement = target;\n      while (currentElement != null) {\n          if (currentElement === scrollingElement || isScrollable(currentElement)) {\n              return [currentElement, \"auto\"];\n          }\n          var parent_2 = getParent(currentElement);\n          currentElement = parent_2;\n      }\n      // Default to the scrolling element\n      return [scrollingElement, \"auto\"];\n  }\n\n  // tslint:disable:no-any\n  /**\n   * Finds the nearest root from an element\n   * @param {Element} target\n   * @returns {Document|ShadowRoot}\n   */\n  function findNearestRoot(target) {\n      var currentElement = target;\n      while (currentElement != null) {\n          if (\"ShadowRoot\" in window && currentElement instanceof window.ShadowRoot) {\n              // Assume this is a ShadowRoot\n              return currentElement;\n          }\n          var parent_1 = getParent(currentElement);\n          if (parent_1 === currentElement) {\n              return document;\n          }\n          currentElement = parent_1;\n      }\n      return document;\n  }\n\n  /**\n   * Gets the origin of the given Location or HTMLAnchorElement if available in the runtime, and otherwise shims it. (it's a one-liner)\n   * @returns {string}\n   */\n  function getLocationOrigin(locationLike) {\n      if (locationLike === void 0) { locationLike = location; }\n      if (\"origin\" in locationLike && locationLike.origin != null) {\n          return locationLike.origin;\n      }\n      var port = locationLike.port != null && locationLike.port.length > 0 ? \":\" + locationLike.port : \"\";\n      if (locationLike.protocol === \"http:\" && port === \":80\") {\n          port = \"\";\n      }\n      else if (locationLike.protocol === \"https:\" && port === \":443\") {\n          port = \"\";\n      }\n      return locationLike.protocol + \"//\" + locationLike.hostname + port;\n  }\n\n  /**\n   * A Regular expression that matches id's of the form \"#[digit]\"\n   * @type {RegExp}\n   */\n  var ID_WITH_LEADING_DIGIT_REGEXP = /^#\\d/;\n  /**\n   * Catches anchor navigation to IDs within the same root and ensures that they can be smooth-scrolled\n   * if the scroll behavior is smooth in the first rooter within that context\n   */\n  function catchNavigation() {\n      // Listen for 'click' events globally\n      window.addEventListener(\"click\", function (e) {\n          // Only work with trusted events on HTMLAnchorElements\n          if (!e.isTrusted || !(e.target instanceof HTMLAnchorElement))\n              return;\n          var _a = e.target, pathname = _a.pathname, search = _a.search, hash = _a.hash;\n          var pointsToCurrentPage = getLocationOrigin(e.target) === getLocationOrigin(location) && pathname === location.pathname && search === location.search;\n          // Only work with HTMLAnchorElements that navigates to a specific ID on the current page\n          if (!pointsToCurrentPage || hash == null || hash.length < 1) {\n              return;\n          }\n          // Find the nearest root, whether it be a ShadowRoot or the document itself\n          var root = findNearestRoot(e.target);\n          // Attempt to match the selector from that root. querySelector' doesn't support IDs that start with a digit, so work around that limitation\n          var elementMatch = null;\n          try {\n              elementMatch = hash.match(ID_WITH_LEADING_DIGIT_REGEXP) != null ? root.getElementById(hash.slice(1)) : root.querySelector(hash);\n          }\n          catch (_b) {\n              // hash may contain a string that is not an element ID which may cause the selector to return an error if it contains anything disallowed in a selector\n          }\n          // If no selector could be found, don't proceed\n          if (elementMatch == null)\n              return;\n          // Find the nearest ancestor that can be scrolled\n          var _c = __read(findNearestAncestorsWithScrollBehavior(elementMatch), 2), behavior = _c[1];\n          // If the behavior isn't smooth, don't proceed\n          if (behavior !== \"smooth\")\n              return;\n          // Otherwise, first prevent the default action.\n          e.preventDefault();\n          // Now, scroll to the element with that ID\n          elementMatch.scrollIntoView({\n              behavior: behavior\n          });\n      });\n  }\n\n  var ELEMENT_ORIGINAL_SCROLL_INTO_VIEW = UNSUPPORTED_ENVIRONMENT ? undefined : Element.prototype.scrollIntoView;\n\n  /**\n   * The majority of this file is based on https://github.com/stipsan/compute-scroll-into-view (MIT license),\n   * but has been rewritten to accept a scroller as an argument.\n   */\n  /**\n   * Find out which edge to align against when logical scroll position is \"nearest\"\n   * Interesting fact: \"nearest\" works similarly to \"if-needed\", if the element is fully visible it will not scroll it\n   *\n   * Legends:\n   *      \n   *  target    frame\n   *      \n   */\n  function alignNearest(scrollingEdgeStart, scrollingEdgeEnd, scrollingSize, scrollingBorderStart, scrollingBorderEnd, elementEdgeStart, elementEdgeEnd, elementSize) {\n      /**\n       * If element edge A and element edge B are both outside scrolling box edge A and scrolling box edge B\n       *\n       *          \n       *        \n       *            \n       *                    do nothing\n       *            \n       *        \n       *          \n       *\n       *  If element edge C and element edge D are both outside scrolling box edge C and scrolling box edge D\n       *\n       *         \n       *   \n       *                    do nothing\n       *   \n       *         \n       */\n      if ((elementEdgeStart < scrollingEdgeStart && elementEdgeEnd > scrollingEdgeEnd) ||\n          (elementEdgeStart > scrollingEdgeStart && elementEdgeEnd < scrollingEdgeEnd)) {\n          return 0;\n      }\n      /**\n       * If element edge A is outside scrolling box edge A and element height is less than scrolling box height\n       *\n       *          \n       *                 \n       *                         \n       *  from             to    \n       *\n       *                     \n       *\n       * If element edge B is outside scrolling box edge B and element height is greater than scrolling box height\n       *\n       *                   \n       *                             \n       *  from         to      \n       *                           \n       *                 \n       *                         \n       *            \n       *          \n       *\n       * If element edge C is outside scrolling box edge C and element width is less than scrolling box width\n       *\n       *       from                 to\n       *                       \n       *                   \n       *                            \n       *                   \n       *                       \n       *\n       * If element edge D is outside scrolling box edge D and element width is greater than scrolling box width\n       *\n       *       from                 to\n       *                       \n       *           \n       *                              \n       *           \n       *                       \n       */\n      if ((elementEdgeStart <= scrollingEdgeStart && elementSize <= scrollingSize) ||\n          (elementEdgeEnd >= scrollingEdgeEnd && elementSize >= scrollingSize)) {\n          return elementEdgeStart - scrollingEdgeStart - scrollingBorderStart;\n      }\n      /**\n       * If element edge B is outside scrolling box edge B and element height is less than scrolling box height\n       *\n       *                     \n       *\n       *  from             to    \n       *                         \n       *                 \n       *          \n       *\n       * If element edge A is outside scrolling box edge A and element height is greater than scrolling box height\n       *\n       *          \n       *            \n       *                         \n       *                 \n       *                           \n       *  from         to      \n       *                             \n       *                   \n       *\n       * If element edge C is outside scrolling box edge C and element width is greater than scrolling box width\n       *\n       *           from                 to\n       *                           \n       *             \n       *                                \n       *             \n       *                           \n       *\n       * If element edge D is outside scrolling box edge D and element width is less than scrolling box width\n       *\n       *           from                 to\n       *                           \n       *                             \n       *                                \n       *                             \n       *                           \n       *\n       */\n      if ((elementEdgeEnd > scrollingEdgeEnd && elementSize < scrollingSize) || (elementEdgeStart < scrollingEdgeStart && elementSize > scrollingSize)) {\n          return elementEdgeEnd - scrollingEdgeEnd + scrollingBorderEnd;\n      }\n      return 0;\n  }\n  function computeScrollIntoView(target, scroller, options) {\n      var block = options.block, inline = options.inline;\n      // Used to handle the top most element that can be scrolled\n      var scrollingElement = getScrollingElement();\n      // Support pinch-zooming properly, making sure elements scroll into the visual viewport\n      // Browsers that don't support visualViewport will report the layout viewport dimensions on document.documentElement.clientWidth/Height\n      // and viewport dimensions on window.innerWidth/Height\n      // https://www.quirksmode.org/mobile/viewports2.html\n      // https://bokand.github.io/viewport/index.html\n      var viewportWidth = window.visualViewport != null ? visualViewport.width : innerWidth;\n      var viewportHeight = window.visualViewport != null ? visualViewport.height : innerHeight;\n      var viewportX = window.scrollX != null ? window.scrollX : window.pageXOffset;\n      var viewportY = window.scrollY != null ? window.scrollY : window.pageYOffset;\n      var _a = target.getBoundingClientRect(), targetHeight = _a.height, targetWidth = _a.width, targetTop = _a.top, targetRight = _a.right, targetBottom = _a.bottom, targetLeft = _a.left;\n      // These values mutate as we loop through and generate scroll coordinates\n      var targetBlock = block === \"start\" || block === \"nearest\" ? targetTop : block === \"end\" ? targetBottom : targetTop + targetHeight / 2; // block === 'center\n      var targetInline = inline === \"center\" ? targetLeft + targetWidth / 2 : inline === \"end\" ? targetRight : targetLeft; // inline === 'start || inline === 'nearest\n      var _b = scroller.getBoundingClientRect(), height = _b.height, width = _b.width, top = _b.top, right = _b.right, bottom = _b.bottom, left = _b.left;\n      var frameStyle = getComputedStyle(scroller);\n      var borderLeft = parseInt(frameStyle.borderLeftWidth, 10);\n      var borderTop = parseInt(frameStyle.borderTopWidth, 10);\n      var borderRight = parseInt(frameStyle.borderRightWidth, 10);\n      var borderBottom = parseInt(frameStyle.borderBottomWidth, 10);\n      var blockScroll = 0;\n      var inlineScroll = 0;\n      // The property existance checks for offset[Width|Height] is because only HTMLElement objects have them, but any Element might pass by here\n      // @TODO find out if the \"as HTMLElement\" overrides can be dropped\n      var scrollbarWidth = \"offsetWidth\" in scroller ? scroller.offsetWidth - scroller.clientWidth - borderLeft - borderRight : 0;\n      var scrollbarHeight = \"offsetHeight\" in scroller ? scroller.offsetHeight - scroller.clientHeight - borderTop - borderBottom : 0;\n      if (scrollingElement === scroller) {\n          // Handle viewport logic (document.documentElement or document.body)\n          if (block === \"start\") {\n              blockScroll = targetBlock;\n          }\n          else if (block === \"end\") {\n              blockScroll = targetBlock - viewportHeight;\n          }\n          else if (block === \"nearest\") {\n              blockScroll = alignNearest(viewportY, viewportY + viewportHeight, viewportHeight, borderTop, borderBottom, viewportY + targetBlock, viewportY + targetBlock + targetHeight, targetHeight);\n          }\n          else {\n              // block === 'center' is the default\n              blockScroll = targetBlock - viewportHeight / 2;\n          }\n          if (inline === \"start\") {\n              inlineScroll = targetInline;\n          }\n          else if (inline === \"center\") {\n              inlineScroll = targetInline - viewportWidth / 2;\n          }\n          else if (inline === \"end\") {\n              inlineScroll = targetInline - viewportWidth;\n          }\n          else {\n              // inline === 'nearest' is the default\n              inlineScroll = alignNearest(viewportX, viewportX + viewportWidth, viewportWidth, borderLeft, borderRight, viewportX + targetInline, viewportX + targetInline + targetWidth, targetWidth);\n          }\n          // Apply scroll position offsets and ensure they are within bounds\n          // @TODO add more test cases to cover this 100%\n          blockScroll = Math.max(0, blockScroll + viewportY);\n          inlineScroll = Math.max(0, inlineScroll + viewportX);\n      }\n      else {\n          // Handle each scrolling frame that might exist between the target and the viewport\n          if (block === \"start\") {\n              blockScroll = targetBlock - top - borderTop;\n          }\n          else if (block === \"end\") {\n              blockScroll = targetBlock - bottom + borderBottom + scrollbarHeight;\n          }\n          else if (block === \"nearest\") {\n              blockScroll = alignNearest(top, bottom, height, borderTop, borderBottom + scrollbarHeight, targetBlock, targetBlock + targetHeight, targetHeight);\n          }\n          else {\n              // block === 'center' is the default\n              blockScroll = targetBlock - (top + height / 2) + scrollbarHeight / 2;\n          }\n          if (inline === \"start\") {\n              inlineScroll = targetInline - left - borderLeft;\n          }\n          else if (inline === \"center\") {\n              inlineScroll = targetInline - (left + width / 2) + scrollbarWidth / 2;\n          }\n          else if (inline === \"end\") {\n              inlineScroll = targetInline - right + borderRight + scrollbarWidth;\n          }\n          else {\n              // inline === 'nearest' is the default\n              inlineScroll = alignNearest(left, right, width, borderLeft, borderRight + scrollbarWidth, targetInline, targetInline + targetWidth, targetWidth);\n          }\n          var scrollLeft = scroller.scrollLeft, scrollTop = scroller.scrollTop;\n          // Ensure scroll coordinates are not out of bounds while applying scroll offsets\n          blockScroll = Math.max(0, Math.min(scrollTop + blockScroll, scroller.scrollHeight - height + scrollbarHeight));\n          inlineScroll = Math.max(0, Math.min(scrollLeft + inlineScroll, scroller.scrollWidth - width + scrollbarWidth));\n      }\n      return {\n          top: blockScroll,\n          left: inlineScroll\n      };\n  }\n\n  /**\n   * Patches the 'scrollIntoView' method on the Element prototype\n   */\n  function patchElementScrollIntoView() {\n      Element.prototype.scrollIntoView = function (arg) {\n          var normalizedOptions = arg == null || arg === true\n              ? {\n                  block: \"start\",\n                  inline: \"nearest\"\n              }\n              : arg === false\n                  ? {\n                      block: \"end\",\n                      inline: \"nearest\"\n                  }\n                  : arg;\n          // Find the nearest ancestor that can be scrolled\n          var _a = __read(findNearestAncestorsWithScrollBehavior(this), 2), ancestorWithScroll = _a[0], ancestorWithScrollBehavior = _a[1];\n          var behavior = normalizedOptions.behavior != null ? normalizedOptions.behavior : ancestorWithScrollBehavior;\n          // If the behavior isn't smooth, simply invoke the original implementation and do no more\n          if (behavior !== \"smooth\") {\n              // Assert that 'scrollIntoView' is actually defined\n              if (ELEMENT_ORIGINAL_SCROLL_INTO_VIEW != null) {\n                  ELEMENT_ORIGINAL_SCROLL_INTO_VIEW.call(this, normalizedOptions);\n              }\n              // Otherwise, invoke 'scrollTo' instead and provide the scroll coordinates\n              else {\n                  var _b = computeScrollIntoView(this, ancestorWithScroll, normalizedOptions), top_1 = _b.top, left = _b.left;\n                  getOriginalScrollMethodForKind(\"scrollTo\", this).call(this, left, top_1);\n              }\n              return;\n          }\n          ancestorWithScroll.scrollTo(__assign({ behavior: behavior }, computeScrollIntoView(this, ancestorWithScroll, normalizedOptions)));\n      };\n      // On IE11, HTMLElement has its own declaration of scrollIntoView and does not inherit this from the prototype chain, so we'll need to patch that one too.\n      if (HTMLElement.prototype.scrollIntoView != null && HTMLElement.prototype.scrollIntoView !== Element.prototype.scrollIntoView) {\n          HTMLElement.prototype.scrollIntoView = Element.prototype.scrollIntoView;\n      }\n  }\n\n  var ELEMENT_ORIGINAL_SCROLL_TOP_SET_DESCRIPTOR = UNSUPPORTED_ENVIRONMENT\n      ? undefined\n      : Object.getOwnPropertyDescriptor(Element.prototype, \"scrollTop\").set;\n\n  /**\n   * Patches the 'scrollTop' property descriptor on the Element prototype\n   */\n  function patchElementScrollTop() {\n      Object.defineProperty(Element.prototype, \"scrollTop\", {\n          set: function (scrollTop) {\n              if (this.__adjustingScrollPosition) {\n                  return ELEMENT_ORIGINAL_SCROLL_TOP_SET_DESCRIPTOR.call(this, scrollTop);\n              }\n              handleScrollMethod(this, \"scrollTo\", this.scrollLeft, scrollTop);\n              return scrollTop;\n          }\n      });\n  }\n\n  var ELEMENT_ORIGINAL_SCROLL_LEFT_SET_DESCRIPTOR = UNSUPPORTED_ENVIRONMENT\n      ? undefined\n      : Object.getOwnPropertyDescriptor(Element.prototype, \"scrollLeft\").set;\n\n  /**\n   * Patches the 'scrollLeft' property descriptor on the Element prototype\n   */\n  function patchElementScrollLeft() {\n      Object.defineProperty(Element.prototype, \"scrollLeft\", {\n          set: function (scrollLeft) {\n              if (this.__adjustingScrollPosition) {\n                  return ELEMENT_ORIGINAL_SCROLL_LEFT_SET_DESCRIPTOR.call(this, scrollLeft);\n              }\n              handleScrollMethod(this, \"scrollTo\", scrollLeft, this.scrollTop);\n              return scrollLeft;\n          }\n      });\n  }\n\n  /**\n   * Applies the polyfill\n   */\n  function patch() {\n      // Element.prototype methods\n      patchElementScroll();\n      patchElementScrollBy();\n      patchElementScrollTo();\n      patchElementScrollIntoView();\n      // Element.prototype descriptors\n      patchElementScrollLeft();\n      patchElementScrollTop();\n      // window methods\n      patchWindowScroll();\n      patchWindowScrollBy();\n      patchWindowScrollTo();\n      // Navigation\n      catchNavigation();\n  }\n\n  /**\n   * Is true if the browser natively supports the Element.prototype.[scroll|scrollTo|scrollBy|scrollIntoView] methods\n   * @type {boolean}\n   */\n  var SUPPORTS_ELEMENT_PROTOTYPE_SCROLL_METHODS = UNSUPPORTED_ENVIRONMENT\n      ? false\n      : \"scroll\" in Element.prototype && \"scrollTo\" in Element.prototype && \"scrollBy\" in Element.prototype && \"scrollIntoView\" in Element.prototype;\n\n  if (!UNSUPPORTED_ENVIRONMENT && (!SUPPORTS_SCROLL_BEHAVIOR || !SUPPORTS_ELEMENT_PROTOTYPE_SCROLL_METHODS)) {\n      patch();\n  }\n\n}());\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n// Adapters provide a single module that any part of the application can\n// depend on, which allows us to ignore unnecessary modules in platform\n// specific builds. Modules registered to an adapter should adhere to the\n// interface defined for the adapter.\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst Adapter = BaseClass.extend({\n  mixins: eventMixin,\n  //\n  // Init\n  initialize(options = {}) {\n    if ((options as any).interface) {\n      this.interface = (options as any).interface;\n    }\n    if ((options as any).props) {\n      this.props = (options as any).props;\n    }\n    _.each(this.interface, (name) => {\n      this[name] = _.bind(this._proxy, this, name);\n    });\n  },\n  //\n  // Control\n  _proxy(name: any, ...args: any[]) {\n    const instance = this.getInstance();\n    return instance[name](...args);\n  },\n  register(instance: any, options = {}) {\n    if (this.hasInstance() && !(options as any).ignorePrevious) {\n      this._previousInstance = this.getInstance();\n    }\n    this._instance = instance;\n    if (!(options as any).silent) {\n      this.trigger('change:instance', instance);\n    }\n  },\n  registerOnce(callback: any) {\n    if (!this.hasInstance()) {\n      const result = callback();\n      this.register(result.instance || result, result.options || undefined);\n    }\n  },\n  restorePrevious() {\n    if (this._previousInstance) {\n      this.register(this._previousInstance);\n    }\n  },\n  registered() {\n    const deferred = $.Deferred();\n    if (this.hasInstance()) {\n      deferred.resolve(this.getInstance());\n    } else {\n      this.listenToOnce(this, 'change:instance', deferred.resolve);\n    }\n    return deferred.promise();\n  },\n  getInstance() {\n    if (this.hasInstance()) {\n      return this._instance;\n    } else {\n      throw new Error('Nothing has been registered to this adapter.');\n    }\n  },\n  hasInstance() {\n    return this._instance != null;\n  },\n  prop(name: any) {\n    if (_.contains(this.props, name)) {\n      return this.getInstance()[name];\n    } else {\n      throw new Error(\n        'The ' + name + ' property has not been defined for this adapter'\n      );\n    }\n  },\n});\nexport default Adapter;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport assert from 'app/js/utils/log/assert';\n\nconst map = {};\nconst swapped = {};\nconst awaiting = {};\nfunction proxyAdapter(implementation: any, adapterInterface: any) {\n  if (!adapterInterface) {\n    return implementation;\n  }\n  __DEV__ &&\n    assert(\n      Array.isArray(adapterInterface),\n      'An adapter interface must be an array of method names'\n    );\n  const proxy = {};\n  adapterInterface.forEach((fnName: any) => {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    proxy[fnName] = (...args: any[]) => {\n      return implementation[fnName](...args);\n    };\n  });\n  return proxy;\n}\nfunction destroy(obj: any, name: any) {\n  if (obj.hasOwnProperty(name)) {\n    const implementation = obj[name];\n    if (implementation && _.isFunction(implementation.destroy)) {\n      implementation.destroy();\n    }\n    delete obj[name];\n  }\n}\nfunction destroyAll(obj: any) {\n  for (const name in obj) {\n    destroy(obj, name);\n  }\n}\nexport function register(\n  name: any,\n  implementation: any,\n  adapterInterface: any\n) {\n  __DEV__ &&\n    assert(\n      implementation !== undefined,\n      `An implementation for ${name} must be provided when registering`\n    );\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  map[name] = proxyAdapter(implementation, adapterInterface);\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  const deferred = awaiting[name];\n  if (deferred) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    delete awaiting[name];\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    deferred.resolve(map[name]);\n  }\n}\nexport function registerOnce(name: any, callback: any, adapterInterface: any) {\n  if (!hasRegistered(name)) {\n    register(name, callback(), adapterInterface);\n  }\n}\nexport function registerAll(adapters: any) {\n  for (const name in adapters) {\n    const pair = adapters[name];\n    let implementation;\n    let adapterInterface;\n    if (Array.isArray(pair)) {\n      implementation = pair[0];\n      adapterInterface = pair[1];\n    } else {\n      implementation = pair;\n    }\n    register(name, implementation, adapterInterface);\n  }\n}\nexport function registerAllOnce(adapters: any) {\n  for (const name in adapters) {\n    const pair = adapters[name];\n    let callback;\n    let adapterInterface;\n    if (Array.isArray(pair)) {\n      callback = pair[0];\n      adapterInterface = pair[1];\n    } else {\n      callback = pair;\n    }\n    registerOnce(name, callback, adapterInterface);\n  }\n}\nexport function waitFor(name: any) {\n  if (hasRegistered(name)) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    return $.Deferred().resolve(map[name]).promise();\n  }\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  if (!awaiting[name]) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    awaiting[name] = $.Deferred();\n  }\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  return awaiting[name].promise();\n}\nexport function swapIn(name: any, implementation: any, adapterInterface: any) {\n  if (map.hasOwnProperty(name)) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    swapped[name] = map[name];\n  }\n  register(name, implementation, adapterInterface);\n}\nexport function swapOut(name: any) {\n  if (swapped.hasOwnProperty(name)) {\n    // Clean up the current implementation since it is being swapped out and\n    // left to GC.\n    destroy(map, name);\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n    register(name, swapped[name]);\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    delete swapped[name];\n  }\n}\nexport function reset() {\n  destroyAll(map);\n  destroyAll(swapped);\n}\nexport function hasRegistered(name: any) {\n  return map.hasOwnProperty(name);\n}\nexport function resolve(name: any) {\n  __DEV__ &&\n    assert(\n      hasRegistered(name),\n      __TEST__\n        ? `An implementation for ${name} has not been registered\\nRegistered adapters: ${Object.keys(\n            map\n          ).join(', ')}`\n        : `An implementation for ${name} has not been registered`\n    );\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  return map[name];\n}\nexport function execute(name: any, ...args: any[]) {\n  const implementation = resolve(name);\n  if (_.isFunction(implementation)) {\n    return implementation(...args);\n  }\n  // `resolve` asserts if the implementation is not registered.\n  __DEV__ &&\n    assert(\n      implementation === undefined,\n      `${name} is not a function. Use \\`resolve\\` instead of \\`execute\\`.`\n    );\n}\nif (__DEV__) {\n  (window as any)._resolve = resolve;\n  (window as any)._resolve.toString = () => {\n    return `Registered adapters: [\n  ${Object.keys(map).sort().join('\\n  ')}\n]`;\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport Adapter from 'app/js/adapters/Adapter';\n\n// Dimensions supply data to metrics platforms as well as to servers through\n// X-Plex- request headers.\n// See: `HEADER_NAMES` in `my-plex/app/models/device.rb`\n// See: `metricsInitializer` for a breakdown of fields sent to Plex Metrics\n\nconst dimensionsAdapter = new Adapter({\n  props: [\n    'X-Plex-Client-Identifier', // A unique identifier for the client app.\n    'X-Plex-Device', // The name of the device (e.g. iPhone).\n    'X-Plex-Device-Name', // A friendly name for the device (e.g. Eric's iPhone).\n    'X-Plex-Device-Screen-Resolution',\n    'X-Plex-Device-Vendor',\n    'X-Plex-Model', // Optional, the device model when available and dependable, otherwise `hosted` or `bundled`.\n    'X-Plex-Platform', // The name of the app platform (e.g. iOS).\n    'X-Plex-Platform-Version', // The version of the app platform.\n    'X-Plex-Product', // The product name for the client app (e.g. Plex Web).\n    'X-Plex-Version', // The version of the client app.\n  ],\n});\n\n// Singleton\nexport default dimensionsAdapter;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport Adapter from 'app/js/adapters/Adapter';\n\n// Some platforms may not use a full localizer, like the Chromecast, and\n// others may want to use their own localizer, like the XB1.\n\nconst localizerAdapter = new Adapter({\n  interface: [\n    'getLanguages', // () Get a hash of supported language codes and filenames.\n    'load', // (language) Load the translations for a language code.\n    't', // (str) Translate a string given the current language.\n    'tEscape', // (str) Translate a string, html-escaping interpolated values.\n  ],\n});\n\n// Singleton\nexport default localizerAdapter;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport Adapter from 'app/js/adapters/Adapter';\n\n// Storage operations should be considered async and should each return a\n// promise. Most platforms can use Web Storage, but the Playstation does not\n// allow localStorage, so we need to use cookies.\n\nexport function createStorageAdapter() {\n  return new Adapter({\n    interface: [\n      'get', // (`'key name'`) Get the value for a key.\n      'set', // (`'key name', value`) Set a value for a key.\n      'remove', // (`'key name'`) Remove a key value pair.\n      'clear', // () Clear all data.\n    ],\n  });\n}\n\n// Singleton\nexport default createStorageAdapter();\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst appConfig = {\n  allowFlash: true,\n  allowHttpsMediaServerConnections: true,\n  allowIPv6ServerConnections: true,\n  allowMediaServerRelayConnections: true,\n  allowMultipleWebSocketConnections: true,\n  shouldCreateFlexModels: true,\n  shouldCreateStateTree: true,\n  shouldRequestHTMLFromCloudProvider: true,\n  allowCloudPubSub: true,\n  allowLoopbackDiscovery: window.location.protocol === 'http:',\n  allowSSO: __HOSTED__,\n  bufferingDetectionLimit: 500,\n  allowSyncSettings: true,\n\n  // The Qt Desktop app is changing the presentation and functionality of Sync\n  // and Download actions in the UI. The UX changes described below are handled\n  // through app config until the Qt Desktop app ships to the general public.\n  //\n  // - Web Desktop in Browser:\n  //  - `Download` is available to admins and works like always has.\n  //  - `Sync...` is unavailable.\n  // - Desktop app (Qt)\n  //  - `Download` is available to all users and performs the new sync work.\n  //  - `Sync...` is unavailable.\n\n  // Should metadata items support a `Sync...` action?\n  allowSync: true,\n  // Should metadata items display a `Download` action to admins that downloads\n  // the source file directly?\n  allowDirectDownload: true,\n  // Should metadata items display a `Download` sync action?\n  allowSyncDownload: false,\n};\n\nexport default appConfig;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport assert from 'app/js/utils/log/assert';\nimport log from 'app/js/utils/log/log';\n\nconst commands = {\n  _map: {},\n\n  register(name: any, fn: any) {\n    assert(_.isFunction(fn), `The \"${name}\" command must be a function`);\n\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    this._map[name] = fn;\n  },\n\n  registerAll(map: any) {\n    _.each(map, (fn, name) => {\n      // Platforms within the TV parent run in loose mode. This results in the\n      // `__esModule` property being enumerable on ES2015 modules. Some calls\n      // `registerAll()` with a ES2015 module value. Avoids calling `register()`\n      // in this scenario due to the `assert()` activity in `register()`.\n      if (name !== '__esModule') {\n        this.register(name, fn);\n      }\n    });\n  },\n\n  hasRegistered(name: any) {\n    return this._map.hasOwnProperty(name);\n  },\n\n  reset() {\n    this._map = {};\n  },\n\n  execute(name: any, ...args: any[]) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const command = this._map[name];\n\n    assert(command, `The \"${name}\" command has not been registered`);\n\n    if (command) {\n      log('[Commands] Executing', name);\n      return command(...args);\n    }\n  },\n};\n\nexport default commands;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nconst bindingsMixin = {\n  //\n  // Control\n  bindToModel: function () {\n    if (!(this as any).bindings) {\n      return;\n    }\n    _.each(\n      _.keys((this as any).bindings),\n      function (selector: any) {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        const binding = this.bindings[selector];\n        let model: any;\n        // Allow a model string on a specific binding to override the\n        // bindingsModel or view model.\n        if (binding.model) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          model = this[binding.model];\n        } else {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          model = this[this.bindingsModel] || this.model;\n        }\n        if (!model) {\n          return;\n        }\n        const modelListeners = binding.modelListeners || [\n          binding.modelAttribute,\n        ];\n        _.each(\n          modelListeners,\n          function (modelListener) {\n            const listener = {\n              obj: model,\n              name: 'change:' + modelListener,\n              callback: _.bind(\n                // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n                this.renderBinding,\n                // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n                this,\n                selector,\n                binding,\n                model\n              ),\n            };\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this._bindingListeners || (this._bindingListeners = []);\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this._bindingListeners.push(listener);\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this.listenTo(listener.obj, listener.name, listener.callback);\n          },\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this\n        );\n        // Update our element so the view is immediately populated.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.renderBinding(selector, binding, model);\n      },\n      this\n    );\n  },\n  unbindFromModel: function () {\n    if (!(this as any).bindings) {\n      return;\n    }\n    _.each(\n      (this as any)._bindingListeners,\n      function (listener) {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.stopListening(listener.obj, listener.name, listener.callback);\n      },\n      this\n    );\n    (this as any)._bindingListeners = null;\n  },\n  renderBinding: function (selector: any, binding: any, model: any) {\n    const $selector = (this as any).$(selector);\n    const formatter = binding.formatter;\n    const isHtml = !!binding.isHtml;\n    const autohide = binding.autohide;\n    const hiddenClass = binding.hiddenClass || 'hidden';\n    let value = model.get(binding.modelAttribute);\n    // A formatter function can be provided that alters the value that we\n    // use in the ui.\n    if (formatter) {\n      value = formatter.call(this, value, $selector);\n    }\n    // If autohide is set, the element will automatically be given the hide\n    // class if the value is falsey or if the autohide function returns a\n    // falsey value.\n    if (autohide) {\n      const hideToggle = _.isFunction(autohide)\n        ? autohide.call(this, value)\n        : value;\n      $selector.toggleClass(hiddenClass, !hideToggle);\n    }\n    // Only update the element's html if the manual flag isn't set.\n    if (!binding.manual) {\n      // HTML entities should be escaped before the element is updated.\n      if (!isHtml && _.isString(value)) {\n        value = _.escape(value);\n      }\n      $selector.html(value);\n    }\n  },\n};\nexport default bindingsMixin;\n","/* eslint-plugin-disable @typescript-eslint */\n/* eslint filenames/match-exported: 0 */\n\nimport _ from 'underscore';\nimport BackboneLib from 'app/js/libs/backbone/backbone-1.2.3+19b88d2+57e89d8';\nimport bindingsMixin from 'app/js/mixins/views/bindingsMixin';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport verifyEventHandlers from 'app/js/utils/mixins/verifyEventHandlers';\nimport path from 'app/js/utils/url/path';\n\nfunction getHeaders(model: any) {\n  const headers = {};\n  const responseType = _.result(model, 'responseType');\n  if (responseType && responseType.accept) {\n    (headers as any).Accept = responseType.accept;\n  }\n  return headers;\n}\nfunction getXHROptionsModel(model: any, options: any) {\n  if (options.server) {\n    return options.server;\n  }\n  if (model.getXHROptions) {\n    return model;\n  }\n  if (model.provider) {\n    return model.provider;\n  }\n  if (model.server) {\n    return model.server;\n  }\n  return model;\n}\nexport const DEFAULT_TIMEOUT = 30000;\nexport const EXTENDED_TIMEOUT = 60000;\nconst Backbone = BackboneLib.noConflict();\nconst originalSync = Backbone.sync;\nBackbone.sync = function (\n  method: any,\n  model: any,\n  { url, data, headers, ...options }: any\n) {\n  const xhrOptionsModel = getXHROptionsModel(model, options);\n  const xhrUrl = url || _.result(model, 'syncUrl') || _.result(model, 'url');\n  // Convert the data object to a query string so we can reliably test for\n  // checkFiles when deciding on a timeout value. If checkFiles is included, we\n  // know we may need to wait for drives to spin up before the request responds.\n  const dataString = _.isObject(data) ? path.stringifyParams(data) : data;\n  const useExtendedTimeout =\n    !!dataString && dataString.indexOf('checkFiles=1') > -1;\n  // Add Accept header if responseType of model requires one, but allow it to be\n  // overwritten by a passed in header.\n  let xhrOptions = {\n    data: dataString,\n    dataType: 'text',\n    processData: false,\n    headers: _.extend(getHeaders(model), headers),\n    timeout: useExtendedTimeout ? EXTENDED_TIMEOUT : DEFAULT_TIMEOUT,\n    ...options,\n  };\n  if (_.isFunction(xhrOptionsModel.getXHROptions)) {\n    xhrOptions = xhrOptionsModel.getXHROptions(xhrUrl, xhrOptions);\n  } else {\n    xhrOptions.url = xhrUrl;\n  }\n  return originalSync(method, model, xhrOptions);\n};\n// Derived from Backbone's internal wrapError method. Expose it so we can\n// use the utility function with our extensions of Backbone.\nBackbone.wrapError = function (model: any, options: any) {\n  const error = options.error;\n  options.error = function (response: any) {\n    if (error) {\n      error(model, response, options);\n    }\n    model.trigger('error', model, response, options);\n  };\n};\n// Allow bindings to be used with any Backbone view.\n_.extend(Backbone.View.prototype, bindingsMixin);\n// Use the custom extend method on BaseClass, which adds support for mixins.\nfunction on(name: any, callback: any) {\n  verifyEventHandlers(name, callback);\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  // eslint-disable-next-line prefer-rest-params\n  return Backbone.Events.on.apply(this, arguments);\n}\n// @ts-expect-error ts-migrate(6133) FIXME: 'obj' is declared but its value is never read.\nfunction listenTo(obj: any, name: any, callback: any) {\n  verifyEventHandlers(name, callback);\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  // eslint-disable-next-line prefer-rest-params\n  return Backbone.Events.listenTo.apply(this, arguments);\n}\n[\n  Backbone.Model,\n  Backbone.Collection,\n  Backbone.Router,\n  Backbone.View,\n  Backbone.History,\n].forEach((Class) => {\n  Class.extend = BaseClass.extend;\n  if (__DEV__) {\n    Class.prototype.on = on;\n    Class.prototype.listenTo = listenTo;\n  }\n});\nexport default Backbone;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\n\n($.fn as any).isDisabled = function () {\n  return (\n    this.hasClass('disabled') ||\n    this.hasClass('active') ||\n    this.hasClass('hidden')\n  );\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\n// Used to select text inside an element.\n($.fn as any).selectText = function () {\n  const element = this[0];\n  let range;\n  if ((document.body as any).createTextRange) {\n    range = (document.body as any).createTextRange();\n    range.moveToElementText(element);\n    range.select();\n  } else if (window.getSelection) {\n    const selection = window.getSelection();\n    range = document.createRange();\n    range.selectNodeContents(element);\n    // @ts-expect-error ts-migrate(2531) FIXME: Object is possibly 'null'.\n    selection.removeAllRanges();\n    // @ts-expect-error ts-migrate(2531) FIXME: Object is possibly 'null'.\n    selection.addRange(range);\n  }\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\n\n($.fn as any).triggerReflow = function () {\n  const element = this[0];\n  if (element) {\n    // Force reflow by reading offsetHeight\n    element.offsetHeight;\n  }\n  return this;\n};\n","/* eslint-plugin-disable @typescript-eslint */\n/* eslint-disable prefer-rest-params */\n/* eslint filenames/match-exported: 0 */\n\nimport _ from 'underscore';\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\nimport 'app/js/utils/jquery/isDisabled';\nimport 'app/js/utils/jquery/selectText';\nimport 'app/js/utils/jquery/triggerReflow';\nimport assert from 'app/js/utils/log/assert';\nimport log from 'app/js/utils/log/log';\nimport Marionette from 'app/js/libs/backbone/backbone.marionette-1.6.4';\n// Marionette.isNodeAttached\n// Ported from Marionette 2.3\n// https://github.com/marionettejs/backbone.marionette/commit/e10904a28520d8633ebe7ebff6e381e3fdcb34bc\n// Determine if `el` is a child of the document\nMarionette.isNodeAttached = function (el: any) {\n  return Backbone.$.contains(document.documentElement, el);\n};\n// Keep clones of the original prototypes because we'll be extending them\n// and need to prevent infinite loops by referencing the original functions.\nconst MarionetteViewProto = _.clone(Marionette.View.prototype);\nconst MarionetteCollectionViewProto = _.clone(\n  Marionette.CollectionView.prototype\n);\nconst MarionetteRegionProto = _.clone(Marionette.Region.prototype);\nconst MarionetteRegion = _.clone(Marionette.Region);\nconst MarionetteLayoutProto = _.clone(Marionette.Layout.prototype);\nconst BaseView = {\n  constructor: function () {\n    this.wrapAfterRender();\n    MarionetteViewProto.constructor.apply(this, arguments);\n    this.listenViewEvents();\n  },\n  listenViewEvents: function () {\n    this.stopListeningViewEvents();\n    const viewEvents = _.result(this, 'viewEvents');\n    if (viewEvents) {\n      (this as any)._viewEventsListeners = _.mapObject(\n        viewEvents,\n        (handler) => {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          return _.isString(handler) ? this[handler] : handler;\n        }\n      );\n      (this as any).listenTo(this, (this as any)._viewEventsListeners);\n    }\n  },\n  stopListeningViewEvents: function () {\n    if ((this as any)._viewEventsListeners) {\n      (this as any).stopListening(this, (this as any)._viewEventsListeners);\n      delete (this as any)._viewEventsListeners;\n    }\n  },\n  _setElement: function () {\n    MarionetteViewProto._setElement.apply(this, arguments);\n    if (!(this as any).el) {\n      return;\n    }\n    if (!(this as any).el._viewInstance) {\n      (this as any).el._viewInstance = this;\n    } else if ((this as any).el._viewInstance !== this) {\n      log.warn(\n        'Multiple views registered for a single element with class=\"%s\"',\n        (this as any).el.className\n      );\n      // console.debug(this.el, this.el._viewInstance, this);\n    }\n  },\n  _removeElement: function () {\n    if ((this as any).el) {\n      delete (this as any).el._viewInstance;\n    }\n    MarionetteViewProto._removeElement.apply(this, arguments);\n  },\n  bindAllWhenRendered: function () {\n    assert(\n      arguments.length > 0,\n      '`bindAllWhenRendered` requires at least one function'\n    );\n    const fnNames = Array.isArray(arguments[0]) ? arguments[0] : arguments;\n    _.each(\n      fnNames,\n      function (fnName) {\n        try {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this[fnName] = this.whenRendered(this[fnName]);\n        } catch (error) {\n          assert(\n            false,\n            '`bindAllWhenRendered` is unable to wrap ' + JSON.stringify(fnName)\n          );\n        }\n      },\n      this\n    );\n  },\n  whenRendered: function (fn: any) {\n    assert(\n      _.isFunction(fn),\n      '`whenRendered` must be called with a single function'\n    );\n    return _.bind(function () {\n      // If the view has already been closed, ignore this call.\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      if (this.isClosed) {\n        return;\n      }\n      const args = _.toArray(arguments);\n      const boundFn = _.bind(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        if (!this.isRendered || this.isClosed) {\n          return;\n        }\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        fn.apply(this, args);\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      }, this);\n      // If the view has already been rendered and is not closed,\n      // schedule the function for the next tick.\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      if (this.isRendered) {\n        _.defer(boundFn);\n        return;\n      }\n      // If the view just hasn't been rendered yet, wait for it to\n      // render, then schedule the function for the next tick.\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      this.listenToOnce(this, 'render', function () {\n        _.defer(boundFn);\n      });\n    }, this);\n  },\n  wrapAfterRender: function () {\n    if ((this as any).onlyAfterRender === undefined) {\n      return;\n    }\n    assert(\n      Array.isArray((this as any).onlyAfterRender),\n      '`onlyAfterRender` must be an array'\n    );\n    // Wrap each ui listener so we can automatically check on isRendered.\n    // eslint-disable-next-line prefer-spread\n    this.bindAllWhenRendered.apply(this, (this as any).onlyAfterRender);\n  },\n  bindUIElements: function () {\n    MarionetteViewProto.bindUIElements.apply(this, arguments);\n    // Invoke our own bindToModel function to set up view / model bindings.\n    (this as any).bindToModel();\n    (this as any).isRendered = true;\n  },\n  unbindUIElements: function () {\n    MarionetteViewProto.unbindUIElements.apply(this, arguments);\n    // Clean up any listeners that were created by bindToModel.\n    (this as any).unbindFromModel();\n  },\n  // This method returns any views that are immediate\n  // children of this view\n  _getImmediateChildren: function () {\n    return [];\n  },\n  // Returns an array of every nested view within this view\n  _getNestedViews: function () {\n    const children = this._getImmediateChildren();\n    if (!children.length) {\n      return children;\n    }\n    return _.reduce(\n      children,\n      function (memo, view) {\n        if ((view as any)._getNestedViews) {\n          return memo.concat((view as any)._getNestedViews());\n        } else {\n          return memo;\n        }\n      },\n      children\n    );\n  },\n};\nconst BaseCollectionView = {\n  constructor: function () {\n    MarionetteCollectionViewProto.constructor.apply(this, arguments);\n  },\n  triggerRendered: function () {\n    (this as any).isRendered = true;\n    return MarionetteCollectionViewProto.triggerRendered.apply(this, arguments);\n  },\n  // The rebase function allows us to switch which collection the list is\n  // listening to easily.\n  rebase: function (collection: any) {\n    // Remove listeners that have been attached to the current collection.\n    (this as any).stopListening((this as any).collection);\n    // Switch out the collection and re-add the listeners.\n    (this as any).collection = collection;\n    (this as any)._initialEvents();\n    // Re-render the list with the new collection. However, if this is a\n    // composite view, we'll want to just re-render the children.\n    if (_.isFunction((this as any)._renderChildren)) {\n      (this as any)._renderChildren();\n    } else {\n      (this as any).render();\n    }\n    return this;\n  },\n  buildItemView: function () {\n    const view = MarionetteCollectionViewProto.buildItemView.apply(\n      this,\n      arguments\n    );\n    view._parentView = this;\n    return view;\n  },\n  _getImmediateChildren: function () {\n    return _.values((this as any).children._views);\n  },\n};\nconst BaseCompositeView = {\n  constructor: function () {\n    MarionetteCollectionViewProto.constructor.apply(this, arguments);\n  },\n};\nconst BaseRegion = {\n  // It can be inconvenient to have a container within each layout for each\n  // view that we want to add to the layout. This can lead to a lot of\n  // wrapper divs and styling issues. These utilities let us append or\n  // prepend a view to a region, which may have other children as well. If\n  // you need to append or prepend to the root element of a layout, you can\n  // pass in an element directly.\n  append: function (view: any, $el: any, prepend: any) {\n    const isViewClosed = view.isClosed || _.isUndefined(view.$el);\n    const isDifferentView = view !== (this as any).currentView;\n    if (isDifferentView) {\n      (this as any).close();\n    }\n    view.render();\n    if (isDifferentView || isViewClosed) {\n      $el || ($el = (this as any).getEl((this as any).el));\n      if (prepend) {\n        $el.prepend(view.el);\n      } else {\n        $el.append(view.el);\n      }\n    }\n    (this as any).attachView(view);\n    Marionette.triggerMethod.call(this, 'show', view);\n    Marionette.triggerMethod.call(view, 'show');\n    this._updateParentView(view);\n    this._triggerAttached(view, $el);\n    return this;\n  },\n  prepend: function (view: any, $el: any) {\n    return this.append(view, $el, true);\n  },\n  show: function (view: any) {\n    MarionetteRegionProto.show.apply(this, arguments);\n    this._updateParentView(view);\n    this._triggerAttached(view, (this as any).$el);\n  },\n  // TODO: remove this when upgrading to Marionette 2.3\n  // See https://github.com/plexinc/plex-web-client/issues/2546\n  _triggerAttached: function (view: any, $el: any) {\n    if (!Marionette.isNodeAttached($el.get(0))) {\n      return;\n    }\n    const attachedViews = _.union(\n      [view],\n      _.result(view, '_getNestedViews') || []\n    );\n    _.each(\n      attachedViews,\n      function (attachedView) {\n        if (attachedView.triggerMethod) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          attachedView.triggerMethod('attached', this);\n        }\n      },\n      this\n    );\n  },\n  _updateParentView: function (view: any) {\n    if (view) {\n      view._parentView = (this as any)._parentView;\n    }\n  },\n};\nconst Region = {\n  // @ts-expect-error ts-migrate(6133) FIXME: 'defaultRegionType' is declared but its value is n... Remove this comment to see the full error message\n  buildRegion: function (regionConfig: any, defaultRegionType: any) {\n    const region = MarionetteRegion.buildRegion.apply(this, arguments);\n    region._parentView = regionConfig._parentView;\n    return region;\n  },\n};\nconst BaseLayout = {\n  _buildRegions: function (regions: any) {\n    const regionsWithParentView = _.mapObject(regions, (regionConfig) => {\n      if (_.isString(regionConfig)) {\n        return {\n          _parentView: this,\n          selector: regionConfig,\n        };\n      } else {\n        return _.defaults(regionConfig, { _parentView: this });\n      }\n    });\n    return MarionetteLayoutProto._buildRegions.call(\n      this,\n      regionsWithParentView\n    );\n  },\n  _getImmediateChildren: function () {\n    return _.chain((this as any).regionManager._regions)\n      .values()\n      .pluck('currentView')\n      .compact()\n      .value();\n  },\n};\n_.extend(Marionette.View.prototype, BaseView);\n_.extend(Marionette.ItemView.prototype, BaseView);\n_.extend(Marionette.CollectionView.prototype, BaseView, BaseCollectionView);\n_.extend(Marionette.CompositeView.prototype, BaseView, BaseCompositeView);\n_.extend(Marionette.Region.prototype, BaseRegion);\n_.extend(Marionette.Region, Region);\n_.extend(Marionette.Layout.prototype, BaseLayout);\n// Ensure Marionette gets our extension of Backbone's extend.\nMarionette.extend = Backbone.Model.extend;\nMarionette.Controller.extend = Marionette.extend;\nMarionette.Region.extend = Marionette.extend;\nMarionette.Application.extend = Marionette.extend;\nMarionette.Module.extend = Marionette.extend;\nMarionette.View.extend = Marionette.extend;\nMarionette.ItemView.extend = Marionette.extend;\nMarionette.CollectionView.extend = Marionette.extend;\nMarionette.CompositeView.extend = Marionette.extend;\nMarionette.Layout.extend = Marionette.extend;\nexport default Marionette;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\nimport ServerRetryManager from './ServerRetryManager';\n\nconst MediaServerEventConnectionRetryManager = ServerRetryManager.extend({\n  mixins: [eventMixin],\n\n  //\n  // Init\n\n  initialize({ appModel }: any) {\n    // eslint-disable-next-line prefer-rest-params\n    ServerRetryManager.prototype.initialize.apply(this, arguments);\n\n    this.appModel = appModel;\n    this.listenTo(\n      this.appModel,\n      'change:primaryServer',\n      this.onPrimaryServerChange\n    );\n  },\n\n  //\n  // Control\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'server' is declared but its value is never read.\n  supportsRetry(server: any) {\n    return true;\n  },\n\n  //\n  // Listeners\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  onPrimaryServerChange(appModel: any, primaryServer: any) {\n    if (primaryServer && !primaryServer.get('hasEventConnection')) {\n      // Restart the connection testing for the new primary server if\n      // there isn't an established event connection to ensure the\n      // retry fires immediately.\n\n      this.stop(primaryServer);\n      this.start(primaryServer);\n    }\n  },\n});\n\nexport default MediaServerEventConnectionRetryManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport capabilities from 'app/js/utils/device/capabilities';\nimport log from 'app/js/utils/log/log';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst ServerEventManager = BaseClass.extend({\n  mixins: [eventMixin],\n\n  //\n  // Init\n\n  initialize(options: any) {\n    this.name = options.name || 'ServerEventManager';\n    this.appModel = options.appModel;\n    this.servers = options.servers || this.appModel.get('servers');\n    this.isValidServer = options.isValidServer;\n    this.supportsLongPolling = options.supportsLongPolling;\n    this.allowMultipleConnections = options.allowMultipleConnections;\n    this.allowAppendingHeaders = options.allowAppendingHeaders;\n    this.ServerEventConnection = options.ServerEventConnection;\n\n    this.connections = {};\n\n    this._serverRetryManager = new options.ServerRetryManager({\n      appModel: this.appModel,\n      callback: this.retryServerConnections.bind(this),\n      logFormat:\n        '[Connections] Retrying server events connection for %s in %s seconds',\n    });\n  },\n\n  //\n  // Control\n\n  start() {\n    if (this.allowMultipleConnections) {\n      this.listenTo(this.servers, {\n        'change:isResolved': this.onServerResolvedChange,\n        'change:isRejected': this.onServerRejectedChange,\n        remove: this.onServerRemove,\n        reset: this.onServersReset,\n      });\n    } else {\n      this.listenTo(\n        this.appModel,\n        'change:primaryServer',\n        this.onPrimaryServerChange\n      );\n    }\n  },\n\n  stop() {\n    this.stopListening();\n    this._serverRetryManager.stopAll();\n    this.disconnectAll();\n    this.connections = {};\n  },\n\n  tryConnectServer(server: any) {\n    const previouslyConnected = this.connections[server.id];\n\n    if (this.isValidServer(server) && !previouslyConnected) {\n      if (capabilities.hasWebSocket || this.supportsLongPolling) {\n        this.connect({ server: server }).then(null, () => {\n          this._serverRetryManager.start(server);\n        });\n      } else {\n        server.trigger('socket:websocket', { error: true });\n      }\n    }\n  },\n\n  connect(options: any) {\n    const server = options.server;\n    let connection = this.connections[server.id];\n\n    if (!connection) {\n      connection = new this.ServerEventConnection({\n        server: server,\n        appendHeaders: this.allowAppendingHeaders,\n      });\n\n      this.connections[server.id] = connection;\n      this.listenTo(connection, {\n        open: this.onOpen,\n        close: this.onClose,\n        error: this.onClose,\n      });\n    }\n\n    const promise = connection.open();\n    const url = connection.socket ? connection.socket.url : connection.pollUrl;\n\n    log(\n      `[${this.name}] Opening server event connection to ${server.get(\n        'debugName'\n      )} at ${url}`\n    );\n\n    return promise;\n  },\n\n  disconnectAll() {\n    _.each(this.connections, (connection) => {\n      this.disconnect({ connection });\n    });\n  },\n\n  disconnect(options: any) {\n    let connection = options.connection;\n    if (!connection) {\n      connection = this.connections[options.server.id];\n    }\n\n    if (connection) {\n      const url = connection.socket\n        ? connection.socket.url\n        : connection.pollUrl;\n      const server = connection.server;\n\n      log(\n        `[${this.name}] Closing server event connection to ${server.get(\n          'debugName'\n        )} at ${url}`\n      );\n\n      // Stop listening before closing the connection so we don't attempt to\n      // retry connecting.\n      this.stopListening(connection);\n      this._serverRetryManager.stop(connection.server);\n\n      connection.close();\n\n      delete this.connections[connection.server.id];\n    }\n  },\n\n  retryServerConnections: function (server: any) {\n    if (this.isValidServer(server) && server.get('isResolved')) {\n      this.connect({ server: server });\n    }\n  },\n\n  //\n  // Listeners\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  onPrimaryServerChange(appModel: any, primaryServer: any) {\n    this.disconnectAll();\n\n    if (primaryServer) {\n      this.tryConnectServer(primaryServer);\n    }\n  },\n\n  onServerResolvedChange(server: any, isResolved: any) {\n    if (isResolved) {\n      this.tryConnectServer(server);\n    }\n  },\n\n  onServerRejectedChange(server: any, isRejected: any) {\n    if (isRejected) {\n      this.disconnect({ server: server });\n    }\n  },\n\n  onServerRemove(server: any) {\n    const connection = this.connections[server.id];\n\n    if (connection) {\n      this.disconnect({ connection: connection });\n\n      // If the server was merged with another model, connect again using the\n      // surviving server model.\n\n      if (server.get('isMerged') && connection) {\n        const mergedServer = this.servers.get(server.id);\n\n        this.connect({ server: mergedServer });\n      }\n    }\n  },\n\n  onServersReset(servers: any, options: any) {\n    const previousServers = options.previousModels;\n\n    _.each(previousServers, (server) => {\n      if (!servers.contains(server)) {\n        this.disconnect({ server: server });\n      }\n    });\n  },\n\n  onOpen(server: any) {\n    const connection = this.connections[server.id];\n    const url = connection.socket ? connection.socket.url : connection.pollUrl;\n\n    log.info(\n      `[${this.name}] Opened server event connection to ${server.get(\n        'debugName'\n      )} at ${url}`\n    );\n\n    this._serverRetryManager.stop(server);\n  },\n\n  onClose(server: any) {\n    log.warn(\n      `[${\n        this.name\n      }] Unexpectedly closed server event connection to ${server.get(\n        'debugName'\n      )}`\n    );\n    this._serverRetryManager.start(server);\n  },\n});\n\nexport default ServerEventManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport log from 'app/js/utils/log/log';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst ServerRetryManager = BaseClass.extend({\n  //\n  // Properties\n\n  maximumDelay: 30,\n\n  //\n  // Init\n\n  initialize({ callback, logFormat }: any) {\n    this._serversBeingRetried = {};\n    this.callback = callback;\n    this.logFormat = logFormat;\n  },\n\n  //\n  // Control\n\n  start(server: any) {\n    // If we're already retrying this server, don't try again.\n    if (this._serversBeingRetried[server.cid]) {\n      return;\n    }\n\n    if (this.supportsRetry(server)) {\n      this._serversBeingRetried[server.cid] = {\n        server,\n        attempt: 1,\n      };\n\n      this._scheduleRetry(server);\n    }\n  },\n\n  stop(server: any) {\n    const retry = this._serversBeingRetried[server.cid];\n\n    if (retry) {\n      window.clearTimeout(retry.timeout);\n      delete this._serversBeingRetried[server.cid];\n    }\n  },\n\n  stopAll() {\n    _.each(this._serversBeingRetried, (retry, serverCID) => {\n      window.clearTimeout(retry.timeout);\n      delete this._serversBeingRetried[serverCID];\n    });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'server' is declared but its value is never read.\n  supportsRetry(server: any) {\n    return true;\n  },\n\n  _scheduleRetry(server: any) {\n    const retry = this._serversBeingRetried[server.cid];\n    const delay = Math.min(this.maximumDelay / 2, retry.attempt) * 2;\n\n    log(this.logFormat, server.get('debugName'), delay);\n\n    retry.timeout = window.setTimeout(() => {\n      this.callback(server);\n      retry.attempt++;\n\n      // Always schedule a retry regardless of the result of `retry.action.call()`.\n      this._scheduleRetry(server);\n    }, delay * 1000);\n  },\n});\n\nexport default ServerRetryManager;\n","/* eslint-plugin-disable @typescript-eslint */\n/* eslint-disable prefer-rest-params, prefer-spread */\n\nimport $ from 'jquery';\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\nimport xhrTracker from 'app/js/utils/xhr/xhrTracker';\n\nconst populateMixin = {\n  //\n  // Properties\n  isPopulating() {\n    return (\n      !!(this as any).populatePromise &&\n      (this as any).populatePromise.state() === 'pending'\n    );\n  },\n  isPopulated() {\n    return (\n      !!(this as any).populatePromise &&\n      (this as any).populatePromise.state() === 'resolved'\n    );\n  },\n  //\n  // Control\n  // A Deferred object useful for ensuring that the data has been fetched\n  // without necessarily refetching it. If the model or collection was\n  // previously fetched, populate will return immediately but could have\n  // stale data. If fresh data is desired, the plain old fetch method can\n  // still be used.\n  populate() {\n    if ((this as any).populatePromise) {\n      return (this as any).populatePromise;\n    }\n    // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'IArguments' is not assignable to... Remove this comment to see the full error message\n    return this.fetch.apply(this, arguments);\n  },\n  fetch() {\n    const deferred = $.Deferred();\n    let request: any;\n    // Don't allow multiple pending fetch requests at once.\n    if (this.isPopulating()) {\n      return (this as any).populatePromise;\n    }\n    // Allow overriding fetch implementation in a way compatible with populateMixin\n    // @ts-expect-error ts-migrate(2551) FIXME: Property '_fetch' does not exist on type '{ isPopu... Remove this comment to see the full error message\n    if (this._fetch) {\n      // @ts-expect-error ts-migrate(2551) FIXME: Property '_fetch' does not exist on type '{ isPopu... Remove this comment to see the full error message\n      request = this._fetch.apply(this, arguments);\n    } else if (this instanceof Backbone.Collection) {\n      request = Backbone.Collection.prototype.fetch.apply(this, arguments);\n    } else {\n      request = Backbone.Model.prototype.fetch.apply(this, arguments);\n    }\n    const promise = deferred.promise();\n    (promise as any).rid = request.rid;\n    (this as any).populatePromise = promise;\n    (this as any).failedPopulatePromise = null;\n    request.done((response: any) => {\n      // Free memory from link to response.\n      (this as any).populatePromise = $.Deferred()\n        .resolveWith(this, [this])\n        .promise();\n      // Pass the `responseText` to fetch handler callbacks for proper operation\n      // of cached fetched handlers created by `createCachedFetchHandler`.\n      deferred.resolveWith(this, [this, response, request]);\n    });\n    request.fail((xhr: any) => {\n      // Reset the populate promise so `populate` attempts to `fetch` again.\n      (this as any).populatePromise = null;\n      (this as any).failedPopulatePromise = promise;\n      deferred.rejectWith(this, [this, xhr]);\n    });\n    return promise;\n  },\n  abortPendingPopulate() {\n    if (this.isPopulating()) {\n      xhrTracker.abort((this as any).populatePromise.rid);\n    }\n    return (this as any).populatePromise;\n  },\n  resetPopulatePromise(promise: any) {\n    if (!this.isPopulating()) {\n      (this as any).populatePromise = promise;\n      (this as any).failedPopulatePromise = null;\n    }\n    return (this as any).populatePromise;\n  },\n};\nexport default populateMixin;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nconst stateMachineMixin = {\n  //\n  // Properties\n  currentState: null,\n  //\n  // Control\n  enterState: function (state: any) {\n    if (state === this.currentState) {\n      return;\n    }\n    const previousState = this.currentState;\n    // Before exiting the previous state, make sure the state we want to\n    // enter is valid.\n    const stateDefinition = (this as any).states[state];\n    if (!stateDefinition) {\n      throw new Error(\n        'The state machine is unable to enter undefined state: ' + state\n      );\n    }\n    if (previousState) {\n      const previousStateDefinition = (this as any).states[previousState];\n      if (_.isFunction(previousStateDefinition.onExit)) {\n        const exitResult = previousStateDefinition.onExit.call(this);\n        // Allow the `onExit` function of the previous state to abort.\n        if (exitResult === false) {\n          return;\n        }\n      }\n    }\n    this.currentState = state;\n    if (_.isFunction(stateDefinition.onEnter)) {\n      const enterResult = stateDefinition.onEnter.apply(\n        this,\n        // eslint-disable-next-line prefer-rest-params\n        _.rest(arguments)\n      );\n      // Allow the `onEnter` function of the next state to abort.\n      if (enterResult === false) {\n        this.currentState = previousState;\n        return;\n      }\n    }\n    (this as any).triggerMethod('stateMachineChange', {\n      from: previousState,\n      to: state,\n    });\n  },\n  enterNextState: function () {\n    let nextState;\n    if (this.currentState) {\n      const previousStateDefinition = (this as any).states[this.currentState];\n      nextState = previousStateDefinition.nextState;\n    } else if ((this as any).initialState) {\n      nextState = (this as any).initialState;\n    } else {\n      throw new Error('An initial state must be defined for the state machine');\n    }\n    if (nextState) {\n      this.enterState(nextState);\n    } else {\n      (this as any).triggerMethod('stateMachineComplete');\n    }\n  },\n};\nexport default stateMachineMixin;\n","/* eslint-plugin-disable @typescript-eslint */\n/* eslint-disable prefer-rest-params, prefer-spread */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\nimport populateMixin from 'app/js/mixins/models/populateMixin';\nimport config from 'app/js/models/config';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport assert from 'app/js/utils/log/assert';\nimport performance from 'app/js/utils/metrics/performance';\nimport * as stateUpdateScheduler from 'app/js/utils/state/stateUpdateScheduler';\nimport path from 'app/js/utils/url/path';\n\nconst INSTRUMENTED = false;\n\nconst AbstractCollection = Backbone.Collection.extend({\n  mixins: [populateMixin],\n\n  //\n  // Properties\n\n  responseType: responseTypes.xml,\n\n  instanceOptions: [\n    'url',\n    'path',\n    'pageStart',\n    'pageSize',\n    'persistInCache',\n    'skipCache',\n  ],\n\n  // This will be merged with the public, optional `context` property.\n  _context: ['parent'],\n\n  // A `CollectionCache` instance must be provided in order to enable\n  // caching for a collection class.\n  cache: null,\n  cacheKey: function () {\n    return _.result(this, 'url');\n  },\n\n  //\n  // Init\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'models' is declared but its value is never read.\n  constructor: function (models: any, options: any) {\n    options || (options = {});\n\n    // Automatically set context on the collection found in options. Context\n    // can be used for references to higher level models.\n\n    _.each(\n      this.getContext(),\n      function (contextName) {\n        const context = options[contextName];\n        if (context !== undefined) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.setContext(contextName, context);\n        }\n      },\n      this\n    );\n\n    // Certain options should be set on the instance of the collection and\n    // automatically passed to any clones.\n\n    const instanceOptions = _.result(this, 'instanceOptions');\n    _.each(\n      instanceOptions,\n      function (optionName) {\n        // Check if the option was actually passed, so we don't override a\n        // url on the prototype.\n\n        if (_.has(options, optionName)) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this[optionName] = options[optionName];\n        }\n      },\n      this\n    );\n\n    if (this.pageStart != null || this.pageSize != null) {\n      this.pageStart || (this.pageStart = 0);\n      this.pageSize || (this.pageSize = 0);\n    }\n\n    if (options.populated) {\n      this.resetPopulatePromise($.Deferred().resolve().promise());\n    }\n\n    if (!this.cache || this.skipCache) {\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\n      this._initState();\n      return;\n    }\n\n    // Options handled by initialize may affect the url used to get a cache\n    // key for the collection.\n    this.initialize.apply(this, arguments);\n\n    // If this instance is already in the cache, return the cached instance\n    // instead of constructing a new instance.\n    const cacheKey = this.cache.getItemCacheKey(this);\n    const cachedInstance = this.cache.get(cacheKey);\n\n    // Treat all instances as disposable. If it's intended for usage the\n    // constructor call below will re-invoke `initialize()`.\n    this.uninitialize();\n\n    if (cachedInstance) {\n      return cachedInstance;\n    }\n\n    if (options.onlyIfCached) {\n      return {};\n    }\n\n    // Not in the cache, so go ahead and use the original constructor,\n    // adding the result to the cache.\n    Backbone.Collection.prototype.constructor.apply(this, arguments);\n    this._initState();\n\n    this.cache.store(this, cacheKey);\n  },\n\n  uninitialize: function () {\n    this.stopListening();\n  },\n\n  _initState: function () {\n    if (!config.shouldCreateStateTree) {\n      return;\n    }\n\n    this.state = this.toState();\n    this.updateState = this.updateState.bind(this);\n\n    this.on('reset update sort', this.onCollectionChange, this);\n    this.on('statechange', this.onStateChange, this);\n  },\n\n  //\n  // Control\n\n  hasContext: function (contextName: any) {\n    return this.getContext().includes(contextName);\n  },\n\n  getContext: function () {\n    if (!this.context) {\n      return this._context;\n    }\n\n    const context = _.result(this, 'context');\n\n    // Gate on __DEV__ to ensure this block gets removed in minified builds.\n    if (__DEV__) {\n      this._context.forEach((key: any) => {\n        assert(\n          context.indexOf(key) === -1,\n          JSON.stringify(key) + ' is implicit in `context`'\n        );\n      });\n    }\n\n    return this._context.concat(context);\n  },\n\n  setContext: function (key: any, value: any) {\n    if (this.getContext().indexOf(key) === -1 || this[key] === value) {\n      return;\n    }\n\n    this[key] = value;\n\n    this.each(function (model: any) {\n      model.setContext(key, value);\n    });\n  },\n\n  getState: function () {\n    return this.state;\n  },\n\n  updateState: function () {\n    const previousRawState = this.state;\n    const previousState = this.getState();\n    this.state = this.toState();\n    const nextState = this.getState();\n\n    this.trigger('statechange', this, nextState, previousState);\n\n    return {\n      name: this.name,\n      previousState: previousRawState,\n      nextState,\n    };\n  },\n\n  toState: function () {\n    const name = `collection:${this.name}:toState`;\n\n    INSTRUMENTED && performance.startPeriod(name);\n\n    const state = this.reduce(this.reduceState, []);\n\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    INSTRUMENTED && performance.endPeriod(name);\n\n    return state;\n  },\n\n  reduceState: function (acc: any, model: any) {\n    const state = model.getState();\n\n    // If an entity does not have an id, state will be undefined so omit it\n    // from the array. Normal models will be represented by objects.\n\n    if (state) {\n      acc.push(state);\n    }\n\n    return acc;\n  },\n\n  shouldUpdateModelState: function (\n    // @ts-expect-error ts-migrate(6133) FIXME: 'instance' is declared but its value is never read... Remove this comment to see the full error message\n    instance: any,\n    nextState: any,\n    previousState: any\n  ) {\n    return nextState !== previousState;\n  },\n\n  sync: function () {\n    // Whenever the collection is synced, assume the url might have changed,\n    // which means we need to update the cache key.\n    if (this.cache) {\n      this.cache.store(this);\n    }\n\n    return Backbone.sync.apply(this, arguments);\n  },\n\n  syncUrl: function () {\n    let url = '';\n\n    if (this.url) {\n      url = _.result(this, 'url');\n    }\n\n    if (this.path) {\n      url = path.join([url, _.result(this, 'path')]);\n    }\n\n    // If pagination properties have been set, append the X-Plex pagination\n    // params to the end of the querystring.\n    if (this.pageStart != null || this.pageSize != null) {\n      const pageParams = {\n        'X-Plex-Container-Start': this.pageStart || 0,\n        'X-Plex-Container-Size': this.pageSize || 0,\n      };\n\n      url = path.join(url, pageParams);\n    }\n\n    return url;\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n  parse: function (response: any, xhr: any) {\n    const name = `collection:${this.name}:parse`;\n\n    INSTRUMENTED && performance.startPeriod(name);\n\n    const data = this.convert(response);\n\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    INSTRUMENTED && performance.endPeriod(name);\n\n    return data;\n  },\n\n  convert: function (response: any) {\n    let data = response;\n    const responseType = _.result(this, 'responseType');\n\n    if (_.isString(data)) {\n      if (_.isFunction(this.augmentResponseText)) {\n        data = this.augmentResponseText(data, responseType);\n      }\n\n      data = responseType.parse(data);\n\n      // JSON from PMS nests properties within a `MediaContainer` object.\n      if (responseType === responseTypes.json && data.MediaContainer) {\n        data = data.MediaContainer;\n      }\n    }\n\n    if (_.isFunction(this.augmentResponse)) {\n      data = this.augmentResponse(data, responseType);\n    }\n\n    if (Array.isArray(data)) {\n      return data;\n    }\n\n    const rootPropertyName = this.model.prototype.rootPropertyName;\n    if (!rootPropertyName) {\n      return data;\n    }\n\n    let models = data[rootPropertyName];\n    if (!models) {\n      return [];\n    }\n\n    if (!Array.isArray(models)) {\n      models = [models];\n    }\n\n    return models;\n  },\n\n  clone: function (models: any) {\n    // If no models are passed in, use the collection's existing models.\n    models || (models = this.models);\n\n    // Pass over the context and specific options to the cloned instance.\n    // Skip the cache since we want to avoid just reusing a cached instance.\n\n    const instanceOptions = _.result(this, 'instanceOptions');\n    const cloneOptions = _.extend(\n      _.pick(this, instanceOptions),\n      _.pick(this, this.getContext()),\n      {\n        skipCache: true,\n        persistInCache: false,\n      }\n    );\n\n    // Opera has some problems returning from a constructor when Dragonfly\n    // isn't running. The || null seems to  be sufficient to stop it\n    // misbehaving. Found by ExtJS team.\n    return new this.constructor(models, cloneOptions) || null;\n  },\n\n  cloneDeep: function (models: any) {\n    // If no models are passed in, use the collection's existing models.\n    models || (models = this.models);\n\n    const clonedModels = _.map(models, function (model) {\n      return model.clone();\n    });\n\n    return this.clone(clonedModels);\n  },\n\n  clear: function (options: any) {\n    options = _.extend({ silent: true }, options);\n\n    // If a request is pending, abort it so the response doesn't come back\n    // after we already cleared the collection, defeating our efforts.\n    this.abortPendingPopulate();\n    this.resetPopulatePromise(null);\n\n    this.reset([], options);\n  },\n\n  getSaveParams: function () {\n    return this.map(function (model: any) {\n      return model.getSaveParams();\n    });\n  },\n\n  //\n  // Listeners\n\n  onCollectionChange: function () {\n    stateUpdateScheduler.scheduleUpdate(this.updateState, this);\n  },\n\n  onStateChange: function (instance: any, nextState: any, previousState: any) {\n    // Only update state when a `statechange` event from a model is\n    // forwarded. The `reset`, `update`, and `sort` listeners handle changes\n    // to the collection.\n\n    if (\n      instance !== this &&\n      this.shouldUpdateModelState(instance, nextState, previousState)\n    ) {\n      stateUpdateScheduler.scheduleUpdate(this.updateState, this);\n    }\n  },\n});\n\nexport default AbstractCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nfunction filterDefaults(defaults: any, attributes: any) {\n  if (!defaults) {\n    return attributes;\n  }\n\n  return _.reduce(\n    attributes,\n    (acc, value, key) => {\n      if (!_.isEqual(defaults[key], value)) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        acc[key] = value;\n      }\n      return acc;\n    },\n    {}\n  );\n}\n\nexport default filterDefaults;\n","/* eslint-plugin-disable @typescript-eslint */\n/* eslint-disable prefer-rest-params, prefer-spread */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { hasRegistered, resolve } from 'app/js/adapters/adapters';\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\nimport populateMixin from 'app/js/mixins/models/populateMixin';\nimport attrTypes from 'app/js/models/attrTypes';\nimport config from 'app/js/models/config';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport filterDefaults from 'app/js/utils/filterDefaults';\nimport assert from 'app/js/utils/log/assert';\nimport log from 'app/js/utils/log/log';\nimport performance from 'app/js/utils/metrics/performance';\nimport parser2 from 'app/js/utils/parser2';\nimport * as stateUpdateScheduler from 'app/js/utils/state/stateUpdateScheduler';\nimport path from 'app/js/utils/url/path';\n\nconst DEV_MERGE_WARNINGS = {};\nconst shallowChangeRegEx = /^change:([\\w]+)$/;\nconst INSTRUMENTED = false;\nconst getContextName = (member: any) =>\n  Array.isArray(member) ? member[0] : member;\nconst AbstractModel = Backbone.Model.extend({\n  mixins: [populateMixin],\n  //\n  // Properties\n  name: 'AbstractModel',\n  responseType: responseTypes.xml,\n  hasInitialRelations: false,\n  // This will be merged with the public, optional `context` property.\n  _context: ['parent', 'skipCache'],\n  // A `ModelCache` instance must be provided in order to enable caching for\n  // a model class.\n  cache: null,\n  cacheKey: function (attributes: any) {\n    return attributes[this.idAttribute];\n  },\n  //\n  // Init\n  constructor: function (attributes: any, options: any) {\n    attributes || (attributes = {});\n    options || (options = {});\n    // Defer initialize until after relations and derived attributes\n    // have been setup in _initRelations and _initDerived\n    let deferredInitialize;\n    if (this.initialize !== Backbone.Model.prototype.initialize) {\n      deferredInitialize = this.initialize;\n      this.initialize = function () {};\n    }\n    // Automatically set context on the model found in options passed to the\n    // constructor or on the collection. Context can be used for references\n    // to higher level models.\n    this.getContextNames().forEach((contextName: any) => {\n      const context = this.findOption(options, contextName);\n      if (context !== undefined) {\n        this[contextName] = context;\n      }\n    });\n    if (!this.cache || this.findOption(options, 'skipCache')) {\n      Backbone.Model.prototype.constructor.apply(this, arguments);\n      this._initModel(options);\n      if (deferredInitialize) {\n        deferredInitialize.apply(this, arguments);\n        this.initialize = deferredInitialize;\n      }\n      return;\n    }\n    // If this instance is already in the cache, return the cached instance\n    // instead of constructing a new instance.\n    const onlyIfCached = this.findOption(options, 'onlyIfCached');\n    const cacheKey = this.cache.getItemCacheKey(this, attributes);\n    let cachedInstance = this.cache.get(cacheKey);\n    if (!cachedInstance && this.entityID && hasRegistered('appModel')) {\n      const appModel = resolve('appModel');\n      if (appModel.has('entities')) {\n        const entities = appModel.get('entities').get(this.entityType);\n        const entityID = this.entityID(attributes);\n        const entity = entities.get(entityID);\n        if (entity) {\n          cachedInstance = entity.get('model');\n        }\n      }\n    }\n    if (cachedInstance) {\n      // Clean up this instance since it won't be used.\n      this.uninitialize();\n      // If the `onlyIfCached` option is used, the model will be\n      // instantiated with just enough to identify it in cache. Do not\n      // attempt to set these attributes on the cached model. Attempting to\n      // update relations is particularly harmful.\n      if (!onlyIfCached) {\n        // Presumably these attributes were just fetched, so assume they're\n        // fresher than what we have cached. Update the cached instance and\n        // return it.\n        // In some instances, a model may be instantiated with incomplete\n        // data and we should preserve the cached model's attributes. Only\n        // set attributes in this case if the cached model does not have the\n        // attribute and the fresh model does.\n        if (this.mergeStrategy) {\n          cachedInstance.isMergingAttributes = true;\n        }\n        // If we need to parse the attributes, do that before setting them on\n        // the cached instance.\n        if (options.parse) {\n          attributes = cachedInstance.parse(attributes);\n        } else {\n          _.extend(\n            attributes,\n            cachedInstance._getRelations(this.syncedRelations, attributes)\n          );\n        }\n        cachedInstance.set(attributes);\n        cachedInstance.isMergingAttributes = false;\n      }\n      // Standalone models that skip the cache can end up overwriting these\n      // properties if they would normally get them from their collection.\n      // Make sure any models that should be associated with this instance\n      // are applied to the cached model.\n      this.getContextNames().forEach((contextName: any) => {\n        cachedInstance.setContext(\n          contextName,\n          this[contextName] || cachedInstance[contextName]\n        );\n      });\n      if (options.collection) {\n        cachedInstance.collection = options.collection;\n      }\n      // The entity may have been garbage collected from the state tree\n      // while the model still exists in the cache. Ensure it is re-added to\n      // the state tree.\n      cachedInstance.updateEntity();\n      return cachedInstance;\n    }\n    if (onlyIfCached) {\n      return {};\n    }\n    // Not in the cache, so go ahead and use the original constructor,\n    // adding the result to the cache. Apply the arguments object here since\n    // attributes may have been mucked with by the parse method without us\n    // explicitly wanting that.\n    Backbone.Model.prototype.constructor.apply(this, arguments);\n    this._initModel(options);\n    if (deferredInitialize) {\n      deferredInitialize.apply(this, arguments);\n      this.initialize = deferredInitialize;\n    }\n    // Store the instance in the cache after the constructor so the cacheKey\n    // function can use properties on the model instead of having to parse\n    // through the attributes.\n    this.cache.store(this, cacheKey);\n  },\n  uninitialize: function () {\n    this.stopListening();\n  },\n  _initModel: function (options: any) {\n    // Set state before relations are created so entity relations can use\n    // this model's entity id in their own entity id. State will need to be\n    // updated again after relations and derived attributes are done.\n    if (config.shouldCreateStateTree && this.entityID) {\n      this.state = this.toState();\n    }\n    this._initRelations(options);\n    this._initDerived(options);\n    this._initState();\n  },\n  _initRelations: function (options: any) {\n    this._relationListeners = {};\n    // Listen for changes to relations so event forwarding can be set up\n    // when relations are set and listeners from previous relations can be\n    // cleaned up.\n    const allRelations = _.extend(\n      {},\n      this.sessionRelations,\n      this.syncedRelations\n    );\n    _.each(\n      allRelations,\n      function (relationDefinition, relationKey) {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this._initRelation(relationDefinition, relationKey);\n        const relationListener = _.bind(\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this._initRelation,\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this,\n          relationDefinition,\n          relationKey\n        );\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.on('change:' + relationKey, relationListener);\n      },\n      this\n    );\n    this.hasInitialRelations = true;\n    this.set(this._getRelations(this.sessionRelations, this.attributes));\n    // If the model is being parsed on instantiation, synced relations will\n    // already be created.\n    if (!options.parse) {\n      this.set(this._getRelations(this.syncedRelations, this.attributes));\n    }\n  },\n  _initRelation: function (relationDefinition: any, relationKey: any) {\n    const resolvedDefinition =\n      this._resolveRelationDefinition(relationDefinition);\n    const RelationClass = resolvedDefinition.relationClass;\n    const relationInstance = this.get(relationKey);\n    const previousInstance = this.previous(relationKey);\n    const isValidInstance =\n      relationInstance && relationInstance instanceof RelationClass;\n    const isValidPreviousInstance =\n      previousInstance && previousInstance instanceof RelationClass;\n    if (\n      isValidPreviousInstance &&\n      _.has(this._relationListeners, relationKey)\n    ) {\n      previousInstance.off('all', this._relationListeners[relationKey]);\n      this._relationListeners[relationKey] = null;\n    }\n    if (isValidInstance) {\n      this._forwardRelationEvents(relationInstance, relationKey);\n    }\n  },\n  _initDerived: function () {\n    _.each(this.derivedAttrs, this._setDerived, this);\n  },\n  _initState: function () {\n    if (!config.shouldCreateStateTree) {\n      return;\n    }\n    this.state = this.toState();\n    this.updateState = this.updateState.bind(this);\n    this.updateEntity();\n    this.on('all', this.onEvent, this);\n  },\n  //\n  // Control\n  findOption: function (options: any, key: any) {\n    return options[key] || (options.collection && options.collection[key]);\n  },\n  getContextNames: function () {\n    return this.getContext().map(getContextName);\n  },\n  getContext: function () {\n    if (!this.context) {\n      return this._context;\n    }\n    const context = _.result(this, 'context');\n    // No member of `_context` should exist in the optional `context` object.\n    if (__DEV__) {\n      this._context.forEach((member: any) => {\n        const contextName = getContextName(member);\n        const isImplicitContext = context.some(\n          (innerMember: any) => contextName === getContextName(innerMember)\n        );\n        assert(\n          !isImplicitContext,\n          `${JSON.stringify(contextName)} is implicit in \\`context\\``\n        );\n      });\n    }\n    return this._context.concat(context);\n  },\n  setContext: function (key: any, value: any) {\n    if (!this.hasContext(key) || this[key] === value) {\n      return;\n    }\n    const context = this.getContext();\n    const definition = context.find(\n      (member: any) => getContextName(member) === key\n    );\n    const boundDerivedAttrs =\n      Array.isArray(definition) &&\n      definition[1] &&\n      definition[1].boundDerivedAttrs;\n    const possibleDerivedAttrs = boundDerivedAttrs\n      ? [key, ...boundDerivedAttrs]\n      : [key];\n    let nextAttrs: any;\n    this[key] = value;\n    possibleDerivedAttrs.forEach((attr) => {\n      if (this.hasDerived(attr)) {\n        nextAttrs = nextAttrs || {};\n        nextAttrs[attr] = this.derivedAttrs[attr].call(this);\n      }\n    });\n    if (nextAttrs) {\n      this.set(nextAttrs);\n    }\n    // Do not propagate the parent context to relations. All relations\n    // automatically get a parent option when instantiated. When setting\n    // context on cached instances, this could overwrite valid parent\n    // properties with invalid values.\n    if (key === 'parent') {\n      return;\n    }\n    const allRelations = _.extend(\n      {},\n      this.sessionRelations,\n      this.syncedRelations\n    );\n    _.each(\n      allRelations,\n      function (_relationDefinition, relationKey) {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        const relation = this.get(relationKey);\n        if (relation) {\n          relation.setContext(key, value);\n        }\n      },\n      this\n    );\n  },\n  getScopedKey: function (key: any) {\n    if (key != null && _.isFunction(this.cacheKey)) {\n      return this.cacheKey(this.attributes) + '!' + key;\n    } else {\n      return key;\n    }\n  },\n  getState: function () {\n    return this._computedEntityID || this.state;\n  },\n  updateState: function () {\n    const previousRawState = this.state;\n    const previousState = this.getState();\n    this.state = this.toState();\n    const nextState = this.getState();\n    if (nextState !== previousState) {\n      this.updateEntity();\n    }\n    this.trigger('statechange', this, nextState, previousState);\n    return {\n      name: this.name,\n      previousState: previousRawState,\n      nextState,\n    };\n  },\n  updateEntity: function () {\n    // `skipCache` is incompatible with entities because a model with incomplete\n    // attributes may step on an existing entity with complete attributes.\n    if (!this._computedEntityID || this.skipCache) {\n      return;\n    }\n    assert(this.entityType, this.name + ' requires an `entityType`');\n    dispatcher.trigger('change:entity', {\n      type: this.entityType,\n      id: this._computedEntityID,\n      model: this,\n    });\n  },\n  toState: function () {\n    const name = `model:${this.name}:toState`;\n    INSTRUMENTED && performance.startPeriod(name);\n    const keys = Object.keys(this.attributes);\n    const state = _.reduce(\n      keys,\n      this.reduceState,\n      { possibleEntityContainers: [] },\n      this\n    );\n    Object.defineProperty(state, 'possibleEntityContainers', {\n      enumerable: false,\n    });\n    if (this.entityID) {\n      this._computedEntityID = this.entityID(state);\n    }\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    INSTRUMENTED && performance.endPeriod(name);\n    return state;\n  },\n  reduceState: function (acc: any, key: any) {\n    const value = this.attributes[key];\n    // Relations have their own `getState` functions that can be used to\n    // compute state down the tree. Keep track of these keys to speed up\n    // garbage collection of entities.\n    if (value && value.getState) {\n      // Keep track of possible entity containers to speed up garbage\n      // collection of entities.\n      acc.possibleEntityContainers.push(key);\n      acc[key] = value.getState();\n      return acc;\n    }\n    // Do not support models and collections in the state tree that do not\n    // have a `getState` method (`AbstractModel` or `AbstractCollection`).\n    if (value && value.initialize) {\n      return acc;\n    }\n    acc[key] = value;\n    return acc;\n  },\n  shouldUpdateRelationState: function (\n    // @ts-expect-error ts-migrate(6133) FIXME: 'instance' is declared but its value is never read... Remove this comment to see the full error message\n    instance: any,\n    nextState: any,\n    previousState: any\n  ) {\n    return nextState !== previousState;\n  },\n  toJSON: function (options = {}) {\n    const name = `model:${this.name}:toJSON`;\n    INSTRUMENTED && performance.startPeriod(name);\n    // Exclude relations since they will need to be converted to JSON after\n    // we deep clone attributes. If the syncedOnly flag is passed, only\n    // allow synced attributes to be included.\n    const syncedAttrs = this.syncedAttrs;\n    const sessionRelations = this.sessionRelations;\n    const syncedRelations = this.syncedRelations;\n    const attrs = this.attributes;\n    const whitelisted = {};\n    for (const key in attrs) {\n      const isExcludedAttr =\n        (options as any).excluded && (options as any).excluded.includes(key);\n      const isSessionRelation =\n        sessionRelations && _.has(sessionRelations, key);\n      const isSyncedRelation = syncedRelations && _.has(syncedRelations, key);\n      const isSyncedOnlyViolation =\n        (options as any).syncedOnly &&\n        (!syncedAttrs || !_.has(syncedAttrs, key));\n      if (\n        !isExcludedAttr &&\n        !isSessionRelation &&\n        !isSyncedRelation &&\n        !isSyncedOnlyViolation\n      ) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        whitelisted[key] = attrs[key];\n      }\n    }\n    // Deep clone objects and arrays so we can work with the JSON without\n    // worrying about affecting the original model.\n    let json = $.extend(true, {}, whitelisted);\n    // Convert relations to JSON instead of including references to the\n    // instances in the object.\n    function toRelationJSON(_relationDefinition: any, relationKey: any) {\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      const instance = this.get(relationKey);\n      const excludeRelation =\n        (options as any).excluded &&\n        (options as any).excluded.includes(relationKey);\n      if (instance && !excludeRelation) {\n        let relationJSON;\n        if ((options as any).excludeDefaults) {\n          if (instance instanceof Backbone.Collection) {\n            relationJSON = instance.map(function (relationModel: any) {\n              return filterDefaults(\n                _.result(relationModel, 'defaults'),\n                relationModel.toJSON(options)\n              );\n            });\n          } else {\n            relationJSON = filterDefaults(\n              _.result(instance, 'defaults'),\n              instance.toJSON(options)\n            );\n          }\n        } else {\n          relationJSON = instance.toJSON(options);\n        }\n        json[relationKey] = relationJSON;\n      }\n    }\n    if ((options as any).excludeDefaults) {\n      json = filterDefaults(_.result(this, 'defaults'), json);\n    }\n    if (!(options as any).syncedOnly) {\n      _.each(sessionRelations, toRelationJSON, this);\n    }\n    _.each(syncedRelations, toRelationJSON, this);\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    INSTRUMENTED && performance.endPeriod(name);\n    return json;\n  },\n  clone: function () {\n    // Pass over the context to the cloned instance. Skip the cache since we\n    // want to avoid just reusing a cached instance.\n    const cloneOptions = _.extend(_.pick(this, this.getContextNames()), {\n      skipCache: true,\n    });\n    // Opera has some problems returning from a constructor when Dragonfly\n    // isn't running. The || null seems to  be sufficient to stop it\n    // misbehaving. Found by ExtJS team.\n    return new this.constructor(this.toJSON(), cloneOptions) || null;\n  },\n  copy: function (copyModel: any) {\n    assert(\n      copyModel instanceof this.constructor,\n      'Only a model of the same type may be copied'\n    );\n    const attrs = copyModel.toJSON();\n    _.extend(\n      attrs,\n      this._getRelations(this.sessionRelations, attrs, { parse: true }),\n      this._getRelations(this.syncedRelations, attrs, { parse: true })\n    );\n    return this.set(attrs);\n  },\n  restoreDefaults: function (overrideAttrs: any) {\n    // We need to forcibly clear existing attributes by setting them to\n    // undefined. Then, apply the defaults on top of that. Limit to one\n    // `set` call to reduce change event noise.\n    const attrs = {};\n    _.each(\n      this.attributes,\n      function (_value, key) {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        if (!this.derivedAttrs || !_.has(this.derivedAttrs, key)) {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          attrs[key] = undefined;\n        }\n      },\n      this\n    );\n    _.extend(\n      attrs,\n      this._getRelations(this.sessionRelations, {}, { reset: true }),\n      this._getRelations(this.syncedRelations, {}, { reset: true }),\n      _.result(this, 'defaults'),\n      overrideAttrs\n    );\n    return this.set(attrs);\n  },\n  set: function (key: any, value: any, options: any) {\n    let attrs;\n    // Handle both `\"key\", value` and `{key: value}` -style arguments.\n    if (_.isObject(key)) {\n      attrs = key;\n      options = value;\n    } else {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      (attrs = {})[key] = value;\n    }\n    options || (options = {});\n    // Always validate attributes in a development environment in order to\n    // surface potential issues.\n    if (__DEV__) {\n      this.validate(attrs);\n    }\n    // If a collection is merging a fetched model object into an existing model\n    // in its collection, optionally merge attributes. That model may have been\n    // individually fetched and have more complete attributes than the fetched\n    // model object in the collection.\n    let isCollectionMerge;\n    if (\n      __DEV__ &&\n      !__TEST__ &&\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      !DEV_MERGE_WARNINGS[this.name] &&\n      this.mergeStrategy &&\n      typeof options.merge !== 'boolean'\n    ) {\n      // We warn once per model when a merge strategy is defined yet there is no\n      // merge option was provided to `set()`.\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      DEV_MERGE_WARNINGS[this.name] = true;\n      window.console.warn(\n        '\"%s\" has ambiguous merge behavior. Provide `options.merge` or remove `mergeStrategy`.',\n        this.name\n      );\n    }\n    if (!this.isMergingAttributes && options.merge && this.mergeStrategy) {\n      isCollectionMerge = true;\n      this.isMergingAttributes = true;\n    }\n    if (this.isMergingAttributes) {\n      attrs = this._mergeAttributes(attrs);\n    }\n    Backbone.Model.prototype.set.call(this, attrs, options);\n    if (isCollectionMerge) {\n      this.isMergingAttributes = false;\n    }\n    return this;\n  },\n  hasAttr: function (attrName: any) {\n    const hasSessionAttr =\n      this.sessionAttrs && _.has(this.sessionAttrs, attrName);\n    const hasSyncedAttr = this.syncedAttrs && _.has(this.syncedAttrs, attrName);\n    return !!(hasSessionAttr || hasSyncedAttr);\n  },\n  hasRelation: function (relationName: any) {\n    const hasSessionRelation =\n      this.sessionRelations && _.has(this.sessionRelations, relationName);\n    const hasSyncedRelation =\n      this.syncedRelations && _.has(this.syncedRelations, relationName);\n    return !!(hasSessionRelation || hasSyncedRelation);\n  },\n  hasDerived: function (attrName: any) {\n    return !!(this.derivedAttrs && _.has(this.derivedAttrs, attrName));\n  },\n  hasContext: function (contextName: any) {\n    return this.getContextNames().includes(contextName);\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  validate: function (attrs: any, options: any) {\n    const definitions = _.extend(\n      {},\n      this.sessionAttrs,\n      this.syncedAttrs,\n      this.sessionRelations,\n      this.syncedRelations\n    );\n    const errorMessage = this._validateTypes(attrs, definitions);\n    if (errorMessage) {\n      assert(false, errorMessage);\n    }\n    return errorMessage;\n  },\n  parse: function (response: any, options: any) {\n    // If a model is saved, Backbone will try to parse the response for\n    // updated attributes. We usually have an empty response body, so just\n    // use existing attributes instead.\n    if (options && options.save && !this.hasResponseOnSave) {\n      return this.attributes;\n    }\n    const name = `model:${this.name}:parse`;\n    INSTRUMENTED && performance.startPeriod(name);\n    const data = this.convert(response, options);\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    INSTRUMENTED && performance.endPeriod(name);\n    return data;\n  },\n  parseResponse(response: any) {\n    let data = response;\n    const responseType = _.result(this, 'responseType');\n    let parseResponseText;\n    if (_.isString(data)) {\n      parseResponseText = true;\n      if (_.isFunction(this.augmentResponseText)) {\n        data = this.augmentResponseText(data, responseType);\n      }\n      data = responseType.parse(data);\n    }\n\n    // Although response parsing is expected to always return an object it may\n    // not always be the case.\n    // See: https://plex.slack.com/archives/C015HGJ91NG/p1624479057377700\n    data = data ?? {};\n\n    // JSON from PMS nests properties within a `MediaContainer` object.\n    if (responseType === responseTypes.json && data.MediaContainer) {\n      data = data.MediaContainer;\n    }\n    if (_.isFunction(this.augmentResponse)) {\n      data = this.augmentResponse(data, responseType);\n    }\n    // Models fetched individually instead of as part of a collection can\n    // have their attributes nested within an object. Extract the nested\n    // attributes if defined.\n    if (\n      parseResponseText &&\n      this.rootPropertyName &&\n      _.has(data, this.rootPropertyName)\n    ) {\n      data = data[this.rootPropertyName];\n    }\n    if (Array.isArray(data)) {\n      data = data[0];\n    }\n    return data;\n  },\n  convert: function (response: any, options: any) {\n    const data = this.parseResponse(response);\n    const attrs = {};\n    let defaults: any;\n    // @ts-expect-error ts-migrate(6133) FIXME: 'definition' is declared but its value is never re... Remove this comment to see the full error message\n    _.each(this.sessionAttrs, function (definition, key) {\n      if (_.has(data, key)) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        attrs[key] = data[key];\n      }\n    });\n    _.each(\n      this.syncedAttrs,\n      function (definition, key) {\n        if (_.has(data, key)) {\n          // We should try to clean up the data we get back. Most attributes\n          // will start off as strings after the conversion. For example,\n          // booleans are often represented by the strings '0' and '1'. We can\n          // make our lives easier by converting this to an actual boolean.\n          let type = definition;\n          let typeOptions;\n          if (!type.typeName) {\n            type = definition.type;\n            typeOptions = _.omit(definition, 'type');\n          }\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          attrs[key] =\n            data[key] == null ? data[key] : type.parse(data[key], typeOptions);\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        } else if (this.has(key)) {\n          if (!defaults) {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            defaults = _.result(this, 'defaults');\n          }\n          // The server will omit empty attributes in many cases, which leads\n          // Backbone to ignoring the change from a present attribute to a\n          // missing attribute. Restore missing synced attributes back to their\n          // defaults, or unset them if they do not have defaults.\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          attrs[key] =\n            defaults && _.has(defaults, key) ? defaults[key] : undefined;\n        }\n      },\n      this\n    );\n    // Attributes and models within synced relations will be set\n    // immediately, but the instances themselves will be returned and set\n    // with the rest of the attributes for this model.\n    const relationOptions = _.extend({}, options, { parse: true });\n    _.extend(\n      attrs,\n      this._getRelations(this.syncedRelations, data, relationOptions)\n    );\n    return attrs;\n  },\n  // Backbone always wants to send a complete representation of the model\n  // and read a response with the updated state. We usually only send what\n  // has changed and put parameters in the query string. The body is also\n  // usually empty.\n  save: function (key: any, value: any, options: any) {\n    let attrs;\n    // Handle both `\"key\", value` and `{key: value}` -style arguments.\n    if (key == null || typeof key === 'object') {\n      attrs = key;\n      options = value;\n    } else {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      (attrs = {})[key] = value;\n    }\n    const saveOptions = _.extend({ save: true }, options);\n    const params = _.extend(this.getSaveParams(attrs), saveOptions.data);\n    if (_.isEmpty(params)) {\n      if (saveOptions.success) {\n        saveOptions.success(this);\n      }\n      return $.Deferred().resolve(this);\n    }\n    saveOptions.data = params;\n    const originalSuccess = saveOptions.success;\n    saveOptions.success = function (\n      model: any,\n      response: any,\n      successOptions: any\n    ) {\n      // Refresh the cache key in case part of the key has changed.\n      if (model.cache) {\n        model.cache.store(model);\n      }\n      if (originalSuccess) {\n        originalSuccess(model, response, successOptions);\n      }\n    };\n    return Backbone.Model.prototype.save.call(this, attrs, saveOptions);\n  },\n  sync: function (method: any, model: any, options: any) {\n    const syncOptions = options ? _.clone(options) : {};\n    if (method === 'create' || method === 'update') {\n      const params = syncOptions.data;\n      // Add the save parameters to the query string part of the url.\n      const url =\n        syncOptions.url ||\n        _.result(this, 'saveUrl') ||\n        _.result(this, 'syncUrl') ||\n        _.result(this, 'url');\n      syncOptions.url = path.join(url, params);\n      syncOptions.data = '';\n    }\n    return Backbone.Model.prototype.sync.call(this, method, model, syncOptions);\n  },\n  getSaveParams: function (attrs: any) {\n    const saveAttrs = this._getSaveAttrs(attrs);\n    const params = _.reduce(\n      saveAttrs,\n      function (acc, attr, attrKey) {\n        const definition = attr.definition;\n        let value = attr.value;\n        let key = attrKey;\n        if (!definition) {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          acc[key] = value;\n          return acc;\n        }\n        const RelationClass = definition.relationClass;\n        if (RelationClass) {\n          const collectionModel = RelationClass.prototype.model;\n          let rootPropertyName;\n          // Prefer the rootPropertyName over the key of the relation, since\n          // that is usually what the server knows the model by.\n          if (definition.rootPropertyName) {\n            rootPropertyName = definition.rootPropertyName;\n          } else if (value && value.rootPropertyName) {\n            rootPropertyName = value.rootPropertyName;\n          } else if (collectionModel && collectionModel.prototype) {\n            rootPropertyName = collectionModel.prototype.rootPropertyName;\n          }\n          if (value) {\n            value = value.getSaveParams();\n          }\n          if (rootPropertyName) {\n            key = rootPropertyName;\n          }\n        } else {\n          let type;\n          let stringifyOptions;\n          if (_.has(definition, 'type')) {\n            type = definition.type;\n            stringifyOptions = _.omit(definition, 'type');\n          } else {\n            type = definition;\n          }\n          value = type.stringify(value, stringifyOptions);\n        }\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        acc[key] = value;\n        return acc;\n      },\n      {},\n      this\n    );\n    return params;\n  },\n  startCapturingChangeEvents: function () {\n    if (this.releaseCapturedChangeEvents) {\n      assert(false, this.name + ' is already capturing events');\n      return;\n    }\n    const originalSet = this.set;\n    const changeEvents: any = [];\n    const previousAttributes = _.clone(this.attributes);\n    this.set = function (key: any, value: any, options: any) {\n      // Silently set the attributes so the model is updated without\n      // actually triggering the change events.\n      const silentOptions = _.extend({}, options, { silent: true });\n      let attrs;\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (typeof key === 'object') {\n        attrs = key;\n        options = value;\n      } else {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        (attrs = {})[key] = value;\n      }\n      // Track the attributes that will actually change and will need change\n      // events triggered later.\n      _.each(\n        attrs,\n        function (changedValue, changedKey) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          if (this.get(changedKey) !== changedValue) {\n            changeEvents.push({ key: changedKey, value: changedValue });\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            originalSet.call(this, changedKey, changedValue, silentOptions);\n          }\n        },\n        this\n      );\n      // Derived attributes rely on change events, so execute derived\n      // attributes to check for changes and silently set any changes.\n      _.each(\n        this._derivedListeners,\n        function (derivedListener) {\n          const derivedKey = derivedListener.key;\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          const derivedFn = this.derivedAttrs[derivedKey];\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          const derivedValue = derivedFn.call(this);\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          if (this.get(derivedKey) !== derivedValue) {\n            changeEvents.push({ key: derivedKey, value: derivedValue });\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            originalSet.call(this, derivedKey, derivedValue, silentOptions);\n          }\n        },\n        this\n      );\n      return this;\n    };\n    this.releaseCapturedChangeEvents = function () {\n      // Restore the original set method before triggering change events, in\n      // case a listener tries to set.\n      this.set = originalSet;\n      this.releaseCapturedChangeEvents = null;\n      this.discardCapturedChangeEvents = null;\n      // Reset the private `_previousAttributes` object before triggering\n      // the change event so collections can properly manage their `_byId`\n      // object by detecting an id that is different than a previous id.\n      // Use the `_changing` flag to prevent a `set` within a change event\n      // listener from stepping on `_previousAttributes`.\n      this._previousAttributes = previousAttributes;\n      this._changing = true;\n      _.each(\n        changeEvents,\n        function (changeEvent) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.trigger('change:' + changeEvent.key, this, changeEvent.value);\n        },\n        this\n      );\n      this._changing = false;\n      if (!_.isEmpty(changeEvents)) {\n        this.trigger('change', this, {});\n      }\n    };\n    this.discardCapturedChangeEvents = function () {\n      this.set = originalSet;\n      this.releaseCapturedChangeEvents = null;\n      this.discardCapturedChangeEvents = null;\n      changeEvents.length = 0;\n    };\n  },\n  spyOnGet: function (fn: any) {\n    const changeEvents: any = [];\n    // Replace the `get` function with our own, so we can intercept\n    // invocations and add to the array of change events.\n    const originalGet = this.get;\n    this.get = function (attr: any) {\n      changeEvents.push('change:' + attr);\n      // The generic change event for a relation is `change:name.change`\n      // rather than simply `change:name`.\n      if (this.hasRelation(attr)) {\n        changeEvents.push('change:' + attr + '.change');\n      }\n      return originalGet.apply(this, arguments);\n    };\n    fn.call(this);\n    this.get = originalGet;\n    return changeEvents;\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'action' is declared but its value is never read.\n  dispatch: function (action: any) {\n    // Allow models to re-dispatch actions to a store.\n  },\n  _mergeAttributes: function (attributes: any) {\n    const mergeStrategy = this.mergeStrategy;\n    if (!mergeStrategy) {\n      return attributes;\n    }\n    const attrs = _.reduce(\n      attributes,\n      function (acc, value, key, _nextAttributes) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        acc[key] = mergeStrategy(key, this.get(key), value);\n        return acc;\n      },\n      {},\n      this\n    );\n    return attrs;\n  },\n  _resolveRelationDefinition: function (relationDefinition: any) {\n    // Allow a relation to be defined as an object that returns the relation\n    // definition. This allows for options like `this` to be passed to\n    // relations.\n    if (_.isFunction(relationDefinition)) {\n      return relationDefinition.call(this);\n    }\n    return relationDefinition;\n  },\n  _getRelations: function (relations: any, data: any, options: any) {\n    data || (data = {});\n    options || (options = {});\n    const attrs = {};\n    _.each(\n      relations,\n      function (relation, key) {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        const relationDefinition = this._resolveRelationDefinition(relation);\n        const RelationClass = relationDefinition.relationClass;\n        assert(\n          RelationClass,\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.name + ' requires a `relationClass` for the ' + key + ' relation'\n        );\n        let rootPropertyName = key;\n        if (\n          options.parse &&\n          !_.has(data, key) &&\n          _.has(relationDefinition, 'rootPropertyName')\n        ) {\n          rootPropertyName = relationDefinition.rootPropertyName;\n        }\n        let relatedData = data[rootPropertyName];\n        // If an instance is directly set, just use that instance.\n        if (relatedData instanceof RelationClass) {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          attrs[key] = relatedData;\n          return;\n        }\n        // If the relation can be deferred and we don't have any data for it,\n        // then return to avoid instantiating the relation early.\n        if (!relatedData && relationDefinition.deferred) {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          attrs[key] = undefined;\n          return;\n        }\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        let instance = options.reset ? null : this.get(key);\n        let isValidInstance = instance instanceof RelationClass;\n        const isCollection =\n          RelationClass.prototype instanceof Backbone.Collection;\n        if (isCollection) {\n          // Always pass the collection an array to avoid confusing the\n          // collection's `convert` method.\n          relatedData = parser2.parseArray(relatedData);\n        } else if (!relatedData) {\n          relatedData = {};\n        }\n        if (isValidInstance && !isCollection) {\n          // Models do not accept a parse option in `set`, so we have to\n          // parse them separately.\n          if (options.parse) {\n            relatedData = instance.parse(relatedData);\n          }\n          isValidInstance =\n            instance.id === relatedData[instance.idAttribute || 'id'];\n        }\n        if (isValidInstance) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          instance.isMergingAttributes = this.isMergingAttributes;\n          let setOptions = relationDefinition.setOptions;\n          if (_.isFunction(setOptions)) {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            setOptions = setOptions.call(this, options);\n          }\n          if (isCollection) {\n            instance.set(\n              relatedData,\n              _.extend(\n                {\n                  parse: options.parse,\n                  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n                  remove: !this.isMergingAttributes,\n                },\n                setOptions\n              )\n            );\n          } else {\n            instance.set(\n              relatedData,\n              _.extend(\n                {\n                  merge: true,\n                },\n                setOptions\n              )\n            );\n          }\n          instance.isMergingAttributes = false;\n        } else {\n          const instanceOptions = {\n            parse: options.parse,\n          };\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.getContextNames().forEach((contextName: any) => {\n            // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n            instanceOptions[contextName] = this[contextName];\n          });\n          if (!isCollection) {\n            let relationAttrs = relationDefinition.attrs;\n            if (_.isFunction(relationAttrs)) {\n              // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n              relationAttrs = relationAttrs.call(this, data);\n            }\n            relatedData = _.extend({}, relatedData, relationAttrs);\n          }\n          let relationOptions = relationDefinition.options;\n          if (_.isFunction(relationOptions)) {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            relationOptions = relationOptions.call(this, data);\n          }\n          // Always pass `this` as the parent and allow for custom options.\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          _.extend(instanceOptions, { parent: this }, relationOptions);\n          instance = new RelationClass(relatedData, instanceOptions);\n        }\n        // Store the instance with the attributes so it can be set. This is\n        // particularly important with deferred attributes that do not already\n        // exist as an attribute.\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        attrs[key] = instance;\n      },\n      this\n    );\n    return attrs;\n  },\n  _forwardRelationEvents: function (instance: any, key: any) {\n    const unchangedEvents = [\n      'sync',\n      'request',\n      'invalid',\n      'error',\n      // The `update` event will trigger the generic `change` event when a\n      // model is added or removed from a collection.\n      'add',\n      'remove',\n    ];\n    function onRelationEvent() {\n      const rootEvent = arguments[0];\n      // Don't duplicate the generic change events.\n      if (rootEvent === 'change') {\n        return;\n      }\n      // `updateState` triggers a `statechange` event for this model.\n      if (rootEvent === 'statechange') {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        if (this.shouldUpdateRelationState.apply(this, _.rest(arguments, 1))) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          stateUpdateScheduler.scheduleUpdate(this.updateState, this);\n        }\n        return;\n      }\n      // First, trigger the scoped change:name.event event.\n      const args = _.toArray(arguments);\n      args[0] = 'change:' + key + '.' + rootEvent;\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      this.trigger.apply(this, args);\n      if (!_.contains(unchangedEvents, rootEvent)) {\n        // Then, trigger the generic change:name.change event. This will\n        // allow derived attributes to update whenever a relation changes.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.trigger('change:' + key + '.change', this, instance);\n        // Finally, trigger the generic change event for this model.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.trigger('change', this);\n      }\n    }\n    instance.on('all', onRelationEvent, this);\n    this._relationListeners[key] = onRelationEvent;\n  },\n  _setDerived: function (fn: any, key: any) {\n    // Spy on the get function so we can set up listeners for attributes\n    // that determine the derived attribute.\n    let value;\n    const changeEvents = this.spyOnGet(function () {\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      const originalSet = this.set;\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      this.set = function () {\n        assert(\n          false,\n          this.name +\n            ' blocked `set` in the ' +\n            key +\n            ' attribute. Derived attributes are read-only.'\n        );\n      };\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      value = fn.call(this);\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      this.set = originalSet;\n    });\n    this.set(key, value);\n    _.each(\n      changeEvents,\n      function (changeEvent) {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this._addDerivedListener(key, changeEvent, fn);\n      },\n      this\n    );\n  },\n  _addDerivedListener: function (key: any, name: any, fn: any) {\n    this._derivedListeners || (this._derivedListeners = []);\n    const listener = {\n      key: key,\n      name: name,\n      callback: _.bind(this._setDerived, this, fn, key),\n    };\n    const existingListener = _.findWhere(this._derivedListeners, {\n      key: key,\n      name: listener.name,\n    });\n    if (!existingListener) {\n      this._derivedListeners.push(listener);\n      this.on(listener.name, listener.callback);\n    }\n  },\n  _getSaveAttrs: function (attrs: any) {\n    let saveAttrs;\n    // If attributes are passed in, only get save params for those\n    // attributes. Otherwise, get save params for all synced attributes and\n    // relations with the save flag.\n    if (attrs) {\n      saveAttrs = _.reduce(\n        attrs,\n        function (acc, value, key) {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          acc[key] = {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            definition: this.syncedAttrs[key],\n            value: value,\n          };\n          return acc;\n        },\n        {},\n        this\n      );\n    } else {\n      const syncedAttrs = _.extend({}, this.syncedAttrs, this.syncedRelations);\n      saveAttrs = _.reduce(\n        syncedAttrs,\n        function (acc, definition, key) {\n          const resolvedDefinition =\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this._resolveRelationDefinition(definition);\n          let shouldSave = resolvedDefinition.save;\n          if (_.isFunction(shouldSave)) {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            shouldSave = shouldSave.call(this);\n          }\n          if (shouldSave) {\n            // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n            acc[key] = {\n              definition: resolvedDefinition,\n              // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n              value: this.get(key),\n            };\n          }\n          return acc;\n        },\n        {},\n        this\n      );\n    }\n    return saveAttrs;\n  },\n  _validateTypes: function (attrs: any, definitions: any) {\n    const keys = Object.keys(attrs);\n    const errorMessages = _.reduce(\n      keys,\n      function (acc: any, key: any) {\n        // Derived attributes do not have a specific type to validate.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        if (this.hasDerived(key)) {\n          return acc;\n        }\n        if (!_.has(definitions, key)) {\n          acc.push(\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this.name +\n              ' received an unknown attribute: ' +\n              key +\n              '. All attributes must be defined in `sessionAttrs`, `syncedAttrs`, `sessionRelations`, or `syncedRelations`.'\n          );\n          return acc;\n        }\n        const value = attrs[key];\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        const definition = this._resolveRelationDefinition(definitions[key]);\n        const RelationClass = definition.relationClass;\n        let type;\n        if (RelationClass) {\n          // If the relations have not been initialized yet and the\n          // constructor set the initial values, they will still be plain\n          // objects or arrays.\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          if (this.hasInitialRelations) {\n            // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n            type = attrTypes.instanceOf(RelationClass);\n          } else if (RelationClass.prototype instanceof Backbone.Collection) {\n            // A collection can either be initialized with a single object\n            // or an array of objects.\n            // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 2.\n            type = attrTypes.oneOfType(attrTypes.array, attrTypes.object);\n          } else {\n            type = attrTypes.object;\n          }\n        } else if (definition.type) {\n          type = definition.type;\n        } else {\n          type = definition;\n        }\n        const typeValidator = type.validate;\n        if (!typeValidator) {\n          acc.push(\n            key +\n              ' has an unknown type. Specify the type in the attribute definition or use attrTypes.any as a wildcard type.'\n          );\n        } else if (!typeValidator(value)) {\n          acc.push(\n            key +\n              ' of type ' +\n              type.typeName +\n              ' has an invalid value: ' +\n              JSON.stringify(value)\n          );\n        }\n        return acc;\n      },\n      [],\n      this\n    );\n    if (errorMessages.length > 0) {\n      return errorMessages.join('\\n');\n    }\n  },\n  //\n  // Listeners\n  onEvent: function (eventName: any, model: any, value: any) {\n    if (!model) {\n      // This is a workaround to enable stream switching in the `tv-old` video\n      // player.\n      // See: https://github.com/plexinc/plex-web-client/issues/8168\n      log.warn('Unable to handle', eventName);\n      return;\n    }\n    // State changes from relations are handled when forwarding the relation\n    // event. Only update state changes from attributes here.\n    const match = eventName.match(shallowChangeRegEx);\n    if (!match) {\n      return;\n    }\n    // If the attribute value already matches the value in state, there was\n    // likely an immediate update. State is updated immediately and each\n    // subsequent change event that is part of that update will be unnecessary.\n    const attributeName = match[1];\n    if (model.get(attributeName) !== this.state[attributeName]) {\n      if (value && value.updateEntity) {\n        value.updateEntity();\n      }\n      stateUpdateScheduler.scheduleUpdate(this.updateState, this);\n    }\n  },\n});\nif (__DEV__) {\n  const validateAllAttrTypes = function validateAllAttrTypes(protoProps: any) {\n    return ['sessionAttrs', 'syncedAttrs'].reduce((acc, propertyName) => {\n      return acc.concat(\n        // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.\n        validateAttrTypes(\n          protoProps[propertyName] || {},\n          propertyName,\n          protoProps.name\n        )\n      );\n    }, []);\n  };\n  const validateAttrTypes = function validateAttrTypes(\n    definitions: any,\n    propertyName: any,\n    name: any\n  ) {\n    return (\n      Object.keys(definitions)\n        // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n        .map((attributeName) => {\n          const definition = definitions[attributeName];\n          if (!definition) {\n            return `${name} ${propertyName} ${attributeName} has no attrType. Did you make a spelling mistake?`;\n          } else {\n            const hasTypeValidation =\n              definition.type && _.isFunction(definition.type.validate);\n            if (!_.isFunction(definition.validate) && !hasTypeValidation) {\n              return `${name} ${propertyName} ${attributeName} attrType has no \\`validate\\` function.`;\n            }\n          }\n        })\n        .filter((message) => message)\n    );\n  };\n  const validateExclusivity = function validateExclusivity(protoProps: any) {\n    // For each attribute or relation, track all the places where it is defined.\n    const definitionLocations = [\n      'derivedAttrs',\n      'sessionAttrs',\n      'syncedAttrs',\n      'sessionRelations',\n      'syncedRelations',\n    ]\n      .map((propertyName) => {\n        return { propertyName, definitions: protoProps[propertyName] || {} };\n      })\n      .reduce((acc, { propertyName, definitions }) => {\n        Object.keys(definitions).forEach((attributeName) => {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          acc[attributeName] = acc[attributeName] || [];\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          acc[attributeName].push(propertyName);\n        });\n        return acc;\n      }, {});\n    // For each attribute defined in more than one place, add an error message.\n    return (\n      Object.keys(definitionLocations)\n        // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n        .map((attributeName) => {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          const locations = definitionLocations[attributeName];\n          if (locations.length > 1) {\n            return `${\n              protoProps.name\n            } ${attributeName} is defined by multiple managed properties: ${locations.join(\n              ', '\n            )}`;\n          }\n        })\n        .filter((message) => message)\n    );\n  };\n  const validateManagedProperties = function validateManagedProperties(\n    protoProps: any\n  ) {\n    const errors = validateExclusivity(protoProps).concat(\n      validateAllAttrTypes(protoProps)\n    );\n    if (errors.length) {\n      throw new Error(errors.join('\\n'));\n    }\n  };\n  // @ts-expect-error ts-migrate(6133) FIXME: 'protoProps' is declared but its value is never re... Remove this comment to see the full error message\n  AbstractModel.extend = function (protoProps: any, staticProps: any) {\n    const Class = Backbone.Model.extend.apply(this, arguments);\n    validateManagedProperties(Class.prototype);\n    return Class;\n  };\n}\nexport default AbstractModel;\n","/* eslint-disable prefer-rest-params, prefer-spread */\n/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\nimport populateMixin from 'app/js/mixins/models/populateMixin';\nimport CollectionCache from 'app/js/utils/cache/CollectionCache';\nimport parser from 'app/js/utils/parser';\nimport path from 'app/js/utils/url/path';\n\n// DEPRECATED: Use `AbstractCollection`\n\nconst BaseCollection = Backbone.Collection.extend({\n  //\n  // Properties\n\n  mixins: [populateMixin],\n  cache: new CollectionCache(),\n\n  //\n  // Init\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'models' is declared but its value is never read.\n  constructor: function (models: any, options: any) {\n    options || (options = {});\n\n    // For all models associated with a higher level models, try to store a\n    // reference to those models.\n    this.server = options.server;\n    this.section = options.section;\n    this.channel = options.channel;\n    this.device = options.device;\n    this.parent = options.parent;\n    this.allowInCache = options.allowInCache;\n    this.persistInCache = options.persistInCache;\n    // Individual models may rely on skipCache on the collection.\n    this.skipCache = options.skipCache;\n\n    if (options.url) {\n      this.url = options.url;\n    }\n\n    if (options.path) {\n      this.path = options.path;\n    }\n\n    if (options.pageStart != null || options.pageSize != null) {\n      this.pageStart = options.pageStart || 0;\n      this.pageSize = options.pageSize || 0;\n    }\n\n    if (options.populated) {\n      this.resetPopulatePromise($.Deferred().resolve().promise());\n    }\n\n    if (!options.allowInCache && !options.persistInCache) {\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\n      return;\n    }\n\n    // Options handled by initialize may affect the url used to get a cache\n    // key for the collection.\n    this.initialize.apply(this, arguments);\n\n    // If this instance is already in the cache, return the cached instance\n    // instead of constructing a new instance.\n    const cacheKey = this.cache.getItemCacheKey(this);\n    let cached = this.cache.get(cacheKey);\n\n    // Treat all instances as disposable. If it's intended for usage the\n    // constructor call below will re-invoke `initialize()`.\n    this.uninitialize();\n\n    if (options.onlyIfCached) {\n      cached || (cached = {});\n    }\n\n    if (cached) {\n      return cached;\n    }\n\n    // Not in the cache, so go ahead and use the original constructor,\n    // adding the result to the cache.\n    Backbone.Collection.prototype.constructor.apply(this, arguments);\n\n    this.cache.store(this, cacheKey);\n  },\n\n  uninitialize: function () {\n    this.stopListening();\n  },\n\n  //\n  // Control\n\n  sync: function () {\n    // Whenever the collection is synced, assume the url might have changed,\n    // which means we need to update the cache key.\n    if (this.allowInCache || this.persistInCache) {\n      this.cache.store(this);\n    }\n\n    return Backbone.sync.apply(this, arguments);\n  },\n\n  syncUrl: function () {\n    let url = '';\n\n    if (this.url) {\n      url = _.result(this, 'url');\n    }\n\n    if (this.path) {\n      url = path.join([url, _.result(this, 'path')]);\n    }\n\n    // If pagination properties have been set, append the X-Plex pagination\n    // params to the end of the querystring.\n    if (this.pageStart != null || this.pageSize != null) {\n      const pageStart = this.pageStart || 0;\n      const pageSize = this.pageSize || 0;\n\n      const pageParams = {};\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      pageParams['X-Plex-Container-Start'] = pageStart;\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      pageParams['X-Plex-Container-Size'] = pageSize;\n\n      url = path.join(url, pageParams);\n    }\n\n    return url;\n  },\n\n  convert: function (xml: any, element: any) {\n    const json = _.isObject(xml) ? xml : parser.parseXML(xml);\n\n    if (!element) {\n      return json;\n    }\n\n    let elements = json[element];\n\n    if (!elements) {\n      return [];\n    }\n\n    if (!Array.isArray(elements)) {\n      elements = [elements];\n    }\n\n    return elements;\n  },\n\n  // Override clone to pass in our custom options.\n  clone: function (models: any) {\n    const options = {\n      server: this.server,\n      section: this.section,\n      parent: this.parent,\n      url: this.url,\n    };\n\n    // If no models are passed in, use the collection's existing models.\n    models || (models = this.models);\n\n    return new this.constructor(models, options);\n  },\n\n  cloneDeep: function (models: any) {\n    if (!models) {\n      models = this.map(function (model: any) {\n        return model.clone();\n      });\n    }\n\n    return this.clone(models);\n  },\n\n  clear: function (options: any) {\n    options = _.extend({ silent: true }, options);\n\n    // If a request is pending, abort it so the response doesn't come back\n    // after we already cleared the collection, defeating our efforts.\n    this.abortPendingPopulate();\n    this.resetPopulatePromise(null);\n\n    this.reset([], options);\n  },\n});\n\n// A little tricky, but make sure each subclass gets its own cache. We can't\n// override extend without doing it after the initial extend call. The cache\n// is what you might call a static variable, so we need to define it on the\n// new class' prototype.\n\nBaseCollection.extend = function () {\n  const subclass = Backbone.Collection.extend.apply(this, arguments);\n\n  subclass.prototype.cache = new CollectionCache();\n\n  return subclass;\n};\n\nexport default BaseCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n/* eslint-disable prefer-rest-params */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\nimport populateMixin from 'app/js/mixins/models/populateMixin';\nimport ModelCache from 'app/js/utils/cache/ModelCache';\nimport assert from 'app/js/utils/log/assert';\nimport parser from 'app/js/utils/parser';\nimport path from 'app/js/utils/url/path';\n\n// DEPRECATED: Use `AbstractModel`\n\nconst BaseModel = Backbone.Model.extend({\n  //\n  // Properties\n\n  mixins: [populateMixin],\n  cache: new ModelCache(),\n\n  //\n  // Init\n\n  constructor: function (attributes: any, options: any) {\n    attributes || (attributes = {});\n    options || (options = {});\n\n    // For all models associated with a higher level models, try to store a\n    // reference to those models.\n    this.server = this.findOption(options, 'server');\n    this.section = this.findOption(options, 'section');\n    this.channel = this.findOption(options, 'channel');\n    this.device = this.findOption(options, 'device');\n    this.parent = this.findOption(options, 'parent');\n\n    const skipCache = this.findOption(options, 'skipCache');\n\n    if (skipCache) {\n      Backbone.Model.prototype.constructor.apply(this, arguments);\n      return;\n    }\n\n    // If this instance is already in the cache, return the cached instance\n    // instead of constructing a new instance.\n    const cacheKey = this.cache.getItemCacheKey(this, attributes);\n    const cached = this.cache.get(cacheKey);\n\n    if (cached) {\n      // Presumably these attributes were just fetched, so assume they're\n      // fresher than what we have cached. Update the cached instance and\n      // return it.\n\n      // If we need to parse the attributes, do that before setting them on\n      // the cached instance.\n      if (options.parse) {\n        attributes = cached.parse(attributes);\n      }\n\n      if (\n        this.preserveCachedAttributes &&\n        this.preserveCachedAttributes(options.url)\n      ) {\n        // Only overwrite undefined cached attributes if request model has\n        // fresher defined values.\n        _.each(attributes, function (value, attribute) {\n          if (_.isUndefined(cached.get(attribute)) && !_.isUndefined(value)) {\n            cached.set(attribute, value);\n          }\n        });\n      } else {\n        cached.set(attributes);\n      }\n\n      // Standalone models that skip the cache can end up overwriting these\n      // properties if they would normally get them from their collection.\n      // Make sure any models that should be associated with this instance\n      // are applied to the cached model.\n      cached.server = this.server || cached.server;\n      cached.section = this.section || cached.section;\n      cached.channel = this.channel || cached.channel;\n      cached.device = this.device || cached.device;\n      cached.parent = this.parent || cached.parent;\n\n      if (options.collection) {\n        cached.collection = options.collection;\n      }\n\n      return cached;\n    }\n\n    const onlyIfCached = this.findOption(options, 'onlyIfCached');\n\n    if (onlyIfCached) {\n      return {};\n    }\n\n    // Not in the cache, so go ahead and use the original constructor,\n    // adding the result to the cache. Apply the arguments object here since\n    // attributes may have been mucked with by the parse method without us\n    // explicitly wanting that.\n    Backbone.Model.prototype.constructor.apply(this, arguments);\n\n    // Store the instance in the cache after the constructor so the cacheKey\n    // function can use properties on the model instead of having to parse\n    // through the attributes.\n    this.cache.store(this, cacheKey);\n  },\n\n  //\n  // Control\n\n  findOption: function (options: any, option: any) {\n    return (\n      options[option] || (options.collection && options.collection[option])\n    );\n  },\n\n  // Override clone to pass in our custom options.\n  clone: function () {\n    const options = {\n      server: this.server,\n      section: this.section,\n      channel: this.channel,\n      parent: this.parent,\n      skipCache: true,\n    };\n\n    // Opera has some problems returning from a constructor when Dragonfly isn't running.\n    // The || null seems to  be sufficient to stop it misbehaving. Found by ExtJS team.\n    return new this.constructor(this.attributes, options) || null;\n  },\n\n  convert: function (xml: any) {\n    const json = _.isObject(xml) ? xml : parser.parseXML(xml);\n\n    return json;\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n  parse: function (response: any, xhr: any) {\n    let json = this.convert(response);\n\n    if (this.whitelistedAttrs) {\n      json = _.pick(json, this.whitelistedAttrs);\n    }\n\n    return json;\n  },\n\n  // Largely copied from Backbone.Model.save. The main difference is that\n  // Backbone always wants to send a complete representation of the model\n  // and read a response with the updated state. We (usually) only send what\n  // has changed, and put the parameters in the query string. The body is\n  // also usually empty.\n\n  save: function (key: any, value: any, options: any) {\n    let attrs: any;\n    let method;\n    const attributes = this.attributes;\n    // Handle both `\"key\", value` and `{key: value}` -style arguments.\n    if (key == null || typeof key === 'object') {\n      attrs = key;\n      options = value;\n    } else {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      (attrs = {})[key] = value;\n    }\n\n    options = _.extend({ validate: true }, options);\n\n    // Get the save parameters for attributes that have changed.\n    const data = this.getSaveParams(attrs, options);\n    _.extend(data, options.data);\n\n    // If we're not waiting and attributes exist, save acts as\n    // `set(attr).save(null, opts)` with validation. Otherwise, check if the\n    // model will be valid when the attributes, if any, are set.\n    if (attrs && !options.wait) {\n      if (!this.set(attrs, options)) {\n        return false;\n      }\n    } else if (!this._validate(attrs, options)) {\n      return false;\n    }\n\n    // Set temporary attributes if `{wait: true}`.\n    if (attrs && options.wait) {\n      this.attributes = _.extend({}, attributes, attrs);\n    }\n\n    // If we ended up with nothing to send, give up. We'll treat it as a\n    // success in terms of callbacks though.\n    if (_.isEmpty(data) && !options.force) {\n      if (options.success) {\n        options.success(this);\n      }\n\n      return $.Deferred().resolve(this);\n    }\n\n    // After a successful server-side save, the client is (optionally)\n    // updated with the server-side state.\n    if (options.parse === undefined) {\n      options.parse = true;\n    }\n\n    const self = this;\n    const success = options.success;\n\n    // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n    options.success = function (response: any) {\n      // Ensure attributes are restored during synchronous saves.\n      self.attributes = attributes;\n\n      if (response) {\n        let serverAttrs = self.parse(response, options);\n\n        if (options.wait) {\n          serverAttrs = _.extend(attrs || {}, serverAttrs);\n        }\n\n        if (_.isObject(serverAttrs) && !self.set(serverAttrs, options)) {\n          return false;\n        }\n\n        // Refresh the cache key in case part of the key has changed.\n        self.cache.store(self);\n      }\n\n      if (success) {\n        success(self, response, options);\n      }\n\n      self.trigger('sync', self, response, options);\n    };\n    Backbone.wrapError(this, options);\n\n    if (this.isNew()) {\n      method = 'create';\n    } else {\n      method = options.patch ? 'patch' : 'update';\n    }\n\n    if (method === 'patch') {\n      options.attrs = attrs;\n    }\n\n    // Add the save parameters to the query string part of the url.\n    const url = _.result(this, 'saveUrl') || _.result(this, 'url');\n\n    if (!_.isEmpty(data)) {\n      options.url = path.join(url, data);\n    }\n\n    options.data = '';\n\n    const xhr = this.sync(method, this, options);\n\n    // Restore attributes.\n    if (attrs && options.wait) {\n      this.attributes = attributes;\n    }\n\n    return xhr;\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  getSaveParams: function (data: any, options: any) {\n    if (this.isNew()) {\n      return data || this.toJSON();\n    } else {\n      return this.changedAttributes(data) || {};\n    }\n  },\n\n  getScopedKey: function (key: any) {\n    if (key != null && _.isFunction(this.cacheKey)) {\n      return this.cacheKey(this.attributes) + '!' + key;\n    } else {\n      return key;\n    }\n  },\n\n  restoreDefaults: function (options: any) {\n    const defaults = _.result(this, 'defaults');\n\n    if (!defaults) {\n      return this.clear(options);\n    }\n\n    const attributes = this.attributes;\n    let attr;\n\n    for (attr in attributes) {\n      if (!(attr in defaults)) {\n        this.unset(attr, options);\n      }\n    }\n\n    this.set(defaults, options);\n\n    return this;\n  },\n\n  startCapturingChangeEvents: function () {\n    if (this.releaseCapturedChangeEvents) {\n      assert(false, 'This model is already capturing events');\n      return;\n    }\n\n    const originalSet = this.set;\n    let changes = {};\n\n    this.set = function (key: any, value: any, options: any) {\n      let attrs;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (typeof key === 'object') {\n        attrs = key;\n        options = value;\n      } else {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        (attrs = {})[key] = value;\n      }\n\n      // Silently set the attributes so the model is updated without\n      // actually triggering the change events.\n      const silentOptions = _.extend({}, options, { silent: true });\n      const result = originalSet.call(this, attrs, silentOptions);\n\n      // Track the attributes that have actually changed and will need\n      // change events triggered later.\n      _.extend(changes, this.changed);\n\n      return result;\n    };\n\n    this.releaseCapturedChangeEvents = function () {\n      _.each(\n        changes,\n        function (value, key) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.trigger('change:' + key, this, value);\n        },\n        this\n      );\n\n      if (!_.isEmpty(changes)) {\n        this.trigger('change', this, {});\n      }\n\n      changes = {};\n      this.set = originalSet;\n      this.releaseCapturedChangeEvents = null;\n    };\n  },\n});\n\n// A little tricky, but make sure each subclass gets its own cache. We can't\n// override extend without doing it after the initial extend call. The cache\n// is what you might call a static variable, so we need to define it on the\n// new class' prototype.\n\nBaseModel.extend = function () {\n  const subclass = Backbone.Model.extend.apply(this, arguments);\n\n  subclass.prototype.cache = new ModelCache();\n\n  return subclass;\n};\n\nexport default BaseModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport config from 'app/js/models/config';\n\nexport default function addFlexModel(ModelClass: any, definition: any) {\n  if (config.shouldCreateFlexModels) {\n    ModelClass.prototype.sessionRelations = {\n      ...ModelClass.prototype.sessionRelations,\n      [__PLATFORM__]: definition,\n    };\n  }\n\n  return ModelClass;\n}\n\nexport function removeFlexModel(ModelClass: any) {\n  if (ModelClass.prototype.sessionRelations[__PLATFORM__]) {\n    delete ModelClass.prototype.sessionRelations[__PLATFORM__];\n  }\n\n  return ModelClass;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst alerts: any = [];\n\nexport default alerts;\n","/* eslint-plugin-disable @typescript-eslint */\n/* eslint-disable prefer-rest-params */\n\nimport _ from 'underscore';\nimport parser2 from 'app/js/utils/parser2';\n\nconst coreTypes = ['boolean', 'integer', 'float', 'string', 'object', 'array'];\n\n// @ts-expect-error ts-migrate(6133) FIXME: 'value' is declared but its value is never read.\nfunction isAny(value: any) {\n  return true;\n}\n\nfunction isObject(value: any) {\n  return _.isObject(value) && !Array.isArray(value);\n}\n\nfunction createAttrType(typeName: any, options: any) {\n  options || (options = {});\n\n  const type = _.defaults(options, {\n    typeName: typeName,\n    parse: _.bind(parser2.parseType, parser2, typeName),\n    stringify: _.bind(parser2.stringifyType, parser2, typeName),\n  });\n\n  type.validate = options.validate ? createValidator(options.validate) : isAny;\n\n  // Add an `isRequired` property to the type, which returns the same type,\n  // but disallows null or undefined as a valid value.\n  type.isRequired = {\n    ...type,\n    validate: (value: any) => (value == null ? false : type.validate(value)),\n    typeName: `${type.typeName}<required>`,\n  };\n\n  return type;\n}\n\nfunction createValidator(validator: any) {\n  return function (value: any) {\n    // By default, an attribute is valid if it's null or undefined.\n    if (value == null) {\n      return true;\n    }\n\n    return validator(value);\n  };\n}\n\nconst attrTypes = {\n  // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n  any: createAttrType('any'),\n  boolean: createAttrType('boolean', { validate: _.isBoolean }),\n  integer: createAttrType('integer', { validate: Number.isInteger }),\n  float: createAttrType('float', { validate: _.isNumber }),\n  string: createAttrType('string', { validate: _.isString }),\n  object: createAttrType('object', { validate: isObject }),\n  array: createAttrType('array', { validate: Array.isArray }),\n  list: createAttrType('list', { validate: Array.isArray }),\n  encodedString: createAttrType('encodedString', { validate: _.isString }),\n  queryString: createAttrType('queryString', { validate: isObject }),\n\n  instanceOf: function () {\n    const classes = _.toArray(arguments);\n\n    return createAttrType('instanceOf', {\n      validate: function (value: any) {\n        return _.some(classes, function (klass) {\n          return value instanceof klass;\n        });\n      },\n    });\n  },\n\n  oneOf: function () {\n    const possibleValues = _.toArray(arguments);\n\n    return createAttrType('oneOf', {\n      validate: function (value: any) {\n        return _.contains(possibleValues, value);\n      },\n    });\n  },\n\n  oneOfType: function () {\n    const types = _.toArray(arguments);\n\n    return createAttrType('oneOfType', {\n      validate: function (value: any) {\n        return _.some(types, function (type) {\n          return type.validate(value);\n        });\n      },\n    });\n  },\n\n  custom: function (validator: any) {\n    return createAttrType('custom', {\n      validate: validator,\n    });\n  },\n\n  // @ts-expect-error ts-migrate(7023) FIXME: 'getAttrTypeFor' implicitly has return type 'any' ... Remove this comment to see the full error message\n  getAttrTypeFor: function (value: any) {\n    if (value == null) {\n      return attrTypes.any;\n    }\n\n    // If the value validates as one of the core types, use that attribute\n    // type. Otherwise, use the wildcard type.\n\n    for (let i = 0, len = coreTypes.length; i < len; i++) {\n      const type = coreTypes[i];\n      // @ts-expect-error ts-migrate(7022) FIXME: 'attrType' implicitly has type 'any' because it do... Remove this comment to see the full error message\n      const attrType = attrTypes[type];\n\n      if (attrType.validate(value)) {\n        return attrType;\n      }\n    }\n\n    return attrTypes.any;\n  },\n};\n\nexport default attrTypes;\n","/* eslint-plugin-disable @typescript-eslint */\n\n// The test runner declares no platform defaults.\nconst platformDefaults =\n  typeof __CONFIG_PATH__ !== 'undefined'\n    ? require(__CONFIG_PATH__).default\n    : {};\nconst initialConfigState = {\n  allowFlash: false,\n  testPrivateConnectionsWhenPublicAddressDoesNotMatch: true,\n  allowHttpsMediaServerConnections: false,\n  allowMediaServerRelayConnections: false,\n  allowLoopbackDiscovery: false,\n  allowIPv6ServerConnections: false,\n  allowSSO: false,\n  allowMixedContent: false,\n  allowBaseImagePreloading: true,\n  allowBaseImageBlobs: true,\n  heartbeatInterval: 10000,\n  allowManualServers: false,\n  allowMobileServers: false,\n  allowMultiTrackAudio: false,\n  maximumConcurrentConnectionTests: 5,\n  // Allow platforms to opt-in to flex models and an immutable state tree.\n  shouldCreateFlexModels: false,\n  shouldCreateStateTree: false,\n  requiresSignIn: true,\n  requiresPlexPass: false,\n  myPlexAccessToken: null,\n  // A primary server can be passed from plex.tv.\n  primaryServer: null,\n  // Live TV via streaming MKV requires a new session when seeking\n  shouldCreateNewSessionWhenSeekingLiveTV: false,\n  // Some platforms have issues with 4k content and HTTPS connections.\n  // Allow those platforms to opt-out of secure local connections by default.\n  shouldPreferInsecureLocalConnections: false,\n  // Some platforms (i.e. TV and Cast) should not be requesting and embedding\n  // HTML from cloud providers.\n  shouldRequestHTMLFromCloudProvider: false,\n  // Some platform versions have issues with Live TV playback, this\n  // allows it to be disabled on those platforms while leaving it intact\n  // for other versions.\n  // See: https://github.com/plexinc/plex-web-client/issues/11544\n  allowLiveTVPlayback: true,\n  // Amount of time to wait after a seek occurs before actually\n  // doing the seek. This prevents immediate buffering on some platforms.\n  seekDebounceMilliseconds: null,\n  // Some platforms are not yet able to handle settings sync.  When this is\n  // false, settings will not even attempt to be sync'd.\n  allowSyncSettings: false,\n  // Should ad playback occur without closing the media element for the content.\n  allowAdsOverMedia: true,\n  ...platformDefaults,\n  ...(window as any).PLEXWEB,\n};\nconst config = __TEST__\n  ? { ...initialConfigState }\n  : Object.freeze(initialConfigState);\nexport default config;\nexport function resetConfig() {\n  Object.assign(config, initialConfigState);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst FileModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'FileModel',\n\n  idAttribute: 'key',\n  rootPropertyName: 'File',\n\n  syncedAttrs: {\n    key: attrTypes.string,\n    title: attrTypes.string,\n    path: attrTypes.string,\n    network: attrTypes.boolean,\n  },\n});\n\nexport default FileModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport FileModel from './FileModel';\n\nconst FileCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'FileCollection',\n\n  model: FileModel,\n});\n\nexport default FileCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport path from 'app/js/utils/url/path';\n\nconst FilePathModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'FilePathModel',\n  context: ['server', 'includeFiles'],\n  idAttribute: 'key',\n  rootPropertyName: 'Path',\n  sessionAttrs: {\n    isBackShortcut: attrTypes.boolean,\n  },\n  sessionRelations: {\n    children: function () {\n      const params = {};\n      if ((this as any).includeFiles) {\n        (params as any).includeFiles = 1;\n      }\n      return {\n        relationClass: require('./FilePathListModel').default,\n        options: { url: path.join([(this as any).id], params) },\n      };\n    },\n  },\n  syncedAttrs: {\n    key: attrTypes.string,\n    title: attrTypes.string,\n    path: attrTypes.string,\n    home: attrTypes.boolean,\n    network: attrTypes.boolean,\n  },\n});\nexport default FilePathModel;\n","import AbstractCollection from 'app/js/models/AbstractCollection';\nimport path from 'app/js/utils/url/path';\nimport FilePathModel from './FilePathModel';\n\nconst FilePathCollection = AbstractCollection.extend({\n  //\n  // Properties\n  name: 'FilePathCollection',\n  context: ['server', 'includeFiles'],\n  model: FilePathModel,\n  url() {\n    const params = {};\n    if (this.includeFiles) {\n      (params as any).includeFiles = 1;\n    }\n    return path.join(['/services/browse'], params);\n  },\n});\nexport default FilePathCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport path from 'app/js/utils/url/path';\nimport FileCollection from './FileCollection';\nimport FilePathCollection from './FilePathCollection';\n\nconst MAX_FILES = 500;\nconst FilePathListModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'FilePathListModel',\n  responseType: responseTypes.json,\n  context: ['server', 'includeFiles', 'url'],\n  url() {\n    const params = {};\n    if (this.includeFiles) {\n      (params as any).includeFiles = 1;\n    }\n    return path.join(['/services/browse'], params);\n  },\n  sessionAttrs: {\n    truncatedFilesCount: attrTypes.integer,\n  },\n  syncedRelations: {\n    paths: {\n      relationClass: FilePathCollection,\n      rootPropertyName: 'Path',\n    },\n    files: {\n      relationClass: FileCollection,\n      rootPropertyName: 'File',\n    },\n  },\n  //\n  // Control\n  augmentResponse(response: any) {\n    if (response.File) {\n      response.truncatedFilesCount = Math.max(\n        0,\n        response.File.length - MAX_FILES\n      );\n      response.File = response.File.slice(0, MAX_FILES);\n    }\n    return response;\n  },\n});\nexport default FilePathListModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport BaseModel from 'app/js/models/BaseModel';\nimport MetadataCollection from 'app/js/models/metadata/MetadataCollection';\nimport contentUtil from 'app/js/utils/contentUtil';\nimport parser from 'app/js/utils/parser';\nimport path from 'app/js/utils/url/path';\n// DEPRECATED - Use common/js/models/metadata/PlaylistModel\nconst PlaylistModel = BaseModel.extend({\n  //\n  // Properties\n  idAttribute: 'ratingKey',\n  whitelistedAttrs: [\n    'guid',\n    'addedAt',\n    'composite',\n    'duration',\n    'key',\n    'leafCount',\n    'playlistType',\n    'ratingKey',\n    'smart',\n    'summary',\n    'title',\n    'type',\n    'allowSync',\n  ],\n  defaults: function () {\n    return {\n      children: new MetadataCollection([], {\n        server: this.server,\n        parent: this,\n        url: function () {\n          const uriPath = '/playlists/' + this.parent.id + '/items';\n          let params;\n          // We need to request related items for tracks so we can discover\n          // Gracenote mixes.\n          if (this.parent.get('playlistType') === 'audio') {\n            params = { includeRelated: 1 };\n          }\n          return path.join(uriPath, params);\n        },\n      }),\n    };\n  },\n  urlRoot: '/playlists',\n  saveUrl: function () {\n    // See similar playlist key translation from /playlists/:ratingKey to /library/metadata/:ratingKey in:\n    // - app/common/js/models/metadata/MetadataModel.ts#saveUrl()\n    // - app/desktop/common/js/models/library/ArtworkCollection.ts#url()\n    return '/library/metadata/' + this.id;\n  },\n  cacheKey: function (attributes: any) {\n    if (attributes.key) {\n      return this.server && this.server.getScopedKey(attributes.key);\n    }\n  },\n  //\n  // Init\n  initialize: function () {\n    this.listenToOnce(this.get('children'), 'add', function (item: any) {\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      this.set('art', item.get('art'));\n    });\n  },\n  //\n  // Control\n  parse: function (response: any) {\n    let json = this.convert(response);\n    // If we've fetched this as a single item the response will be in a Playlist\n    if (json.Playlist) {\n      json = json.Playlist;\n    }\n    parser.parseInteger(json, ['duration', 'leafCount', 'addedAt']);\n    parser.parseBoolean(json, ['smart', 'allowSync']);\n    json.isPlaylist = true;\n    return json;\n  },\n  findItem: function (id: any) {\n    return this.get('children').findWhere({ playlistItemID: id });\n  },\n  moveItem: function (itemID: any, afterItemID: any) {\n    const params = afterItemID ? { after: afterItemID } : {};\n    const url = path.join(\n      [_.result(this, 'url'), '/items/', itemID, '/move'],\n      params\n    );\n    const xhrOptions = _.extend(this.server.getXHROptions(url), {\n      type: 'PUT',\n    });\n    const xhrDeferred = $.ajax(xhrOptions);\n    const items = this.get('children');\n    const item = this.findItem(itemID);\n    items.remove(item);\n    const afterItem = this.findItem(afterItemID);\n    const spliceAt = afterItem ? items.indexOf(afterItem) + 1 : 0;\n    items.add(item, { at: spliceAt });\n    return xhrDeferred;\n  },\n  removeItem: function (itemID: any) {\n    itemID = itemID.toString();\n    const url = path.join([_.result(this, 'url'), '/items/', itemID]);\n    const xhrOptions = _.extend(this.server.getXHROptions(url), {\n      type: 'DELETE',\n    });\n    const xhrDeferred = $.ajax(xhrOptions);\n    xhrDeferred.then(\n      _.bind(function (response: any) {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.set(this.parse(response));\n      }, this)\n    );\n    const items = this.get('children');\n    const item = this.findItem(itemID);\n    items.remove(item);\n    return xhrDeferred;\n  },\n  addContent: function (item: any, options: any) {\n    const method = this.isNew() ? 'POST' : 'PUT';\n    const segments = [_.result(this, 'url')];\n    const params = {};\n    if (this.isNew()) {\n      (params as any).type = this.get('playlistType');\n      (params as any).title = this.get('title');\n      (params as any).smart = this.get('smart') ? 1 : 0;\n    } else {\n      segments.push('/items');\n    }\n    if (item.get('playQueueID')) {\n      (params as any).playQueueID = item.get('playQueueID');\n    } else {\n      (params as any).uri = contentUtil.uri(item, options);\n    }\n    const url = path.join(segments, params);\n    const xhrOptions = _.extend(item.server.getXHROptions(url), {\n      type: method,\n    });\n    const xhrDeferred = $.ajax(xhrOptions);\n    xhrDeferred.then(\n      _.bind(function (response: any) {\n        // Both the metadata of the playlist (returned in response) and the\n        // collection of items will have changed on the server\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.set(this.parse(response));\n      }, this)\n    );\n    return xhrDeferred.promise();\n  },\n  isLibraryItem: function () {\n    return true;\n  },\n  isPlexMusicItem: function () {\n    return false;\n  },\n});\nexport default PlaylistModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport VersionGeneratorModel from 'app/js/models/library/convert/VersionGeneratorModel';\nimport proxyTypes from 'app/js/utils/constants/proxyTypes';\nimport path from 'app/js/utils/url/path';\n\nconst VersionGeneratorCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'VersionGeneratorCollection',\n\n  context: ['server'],\n\n  model: VersionGeneratorModel,\n\n  url() {\n    return path.join(['playlists', this.parent.id, 'items'], {\n      type: proxyTypes.LOCAL,\n    });\n  },\n});\n\nexport default VersionGeneratorCollection;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport PlaylistModel from 'app/js/models/library/PlaylistModel';\nimport VersionGeneratorCollection from 'app/js/models/library/convert/VersionGeneratorCollection';\nimport path from 'app/js/utils/url/path';\n\nconst BackgroundProcessingListModel = PlaylistModel.extend({\n  //\n  // Properties\n\n  defaults: function () {\n    return {\n      children: new VersionGeneratorCollection([], {\n        server: this.server,\n        parent: this,\n      }),\n    };\n  },\n\n  //\n  // Properties\n\n  findItem: function (id: any) {\n    return this.get('children').get(id);\n  },\n\n  addContent: function (item: any) {\n    const segments = [_.result(this, 'url'), 'items', item.id];\n\n    const url = path.join(segments, item.getSaveParams());\n    const xhrOptions = _.extend(item.server.getXHROptions(url), {\n      type: 'PUT',\n    });\n    const xhrDeferred = $.ajax(xhrOptions);\n\n    xhrDeferred.then(\n      _.bind(function (response: any) {\n        // Both the metadata of the playlist (returned in response) and the\n        // collection of items will have changed on the server\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.set(this.parse(response));\n      }, this)\n    );\n\n    return xhrDeferred.promise();\n  },\n});\n\nexport default BackgroundProcessingListModel;\n","import BaseCollection from 'app/js/models/BaseCollection';\nimport BackgroundProcessingListModel from 'app/js/models/library/convert/BackgroundProcessingListModel';\nimport proxyTypes from 'app/js/utils/constants/proxyTypes';\n\nconst BackgroundProcessingListCollection = BaseCollection.extend({\n  //\n  // Properties\n\n  model: BackgroundProcessingListModel,\n  url: '/playlists?type=' + proxyTypes.LOCAL,\n\n  //\n  // Control\n\n  parse: function (response: any) {\n    return this.convert(response, 'Playlist');\n  },\n});\n\nexport default BackgroundProcessingListCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\n// Only one model in the collection can have a truthy value for this attribute.\nconst exclusiveBoolAttrMixin = {\n  exclusiveBoolAttr(attr: any) {\n    (this as any).listenTo(\n      this,\n      'change:' + attr,\n      (changedModel: any, value: any) => {\n        if (!value) {\n          return;\n        }\n        (this as any).each((model: any) => {\n          model.set(attr, model === changedModel ? value : false);\n        });\n      }\n    );\n  },\n};\nexport default exclusiveBoolAttrMixin;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst defaultStartOffset = -1;\nconst defaultEndOffset = -1;\n\nconst LyricsSpanModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'LyricsSpanModel',\n  context: ['server', 'section'],\n\n  sessionAttrs: {\n    active: attrTypes.boolean,\n  },\n\n  syncedAttrs: {\n    startOffset: attrTypes.integer,\n    endOffset: attrTypes.integer,\n    text: attrTypes.string,\n  },\n\n  defaults: {\n    startOffset: defaultStartOffset,\n    endOffset: defaultEndOffset,\n  },\n\n  //\n  // Control\n\n  isPositionWithin(position: any) {\n    const startOffset = this.get('startOffset');\n    const endOffset = this.get('endOffset');\n\n    if (startOffset === defaultStartOffset) {\n      return false;\n    }\n\n    const isAfterStart = position >= startOffset;\n    const isBeforeEnd = position <= endOffset || endOffset === defaultEndOffset;\n\n    return isAfterStart && isBeforeEnd;\n  },\n});\n\nexport default LyricsSpanModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport LyricsSpanModel from './LyricsSpanModel';\n\nconst LyricsSpanCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'LyricsSpanCollection',\n  context: ['server', 'section'],\n\n  model: LyricsSpanModel,\n});\n\nexport default LyricsSpanCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport LyricsSpanCollection from './LyricsSpanCollection';\n\nconst LyricsLineModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'LyricsLineModel',\n  context: ['server', 'section'],\n\n  syncedAttrs: {\n    startOffset: attrTypes.integer,\n    endOffset: attrTypes.integer,\n  },\n\n  syncedRelations: {\n    spans: {\n      relationClass: LyricsSpanCollection,\n      rootPropertyName: 'Span',\n    },\n  },\n\n  defaults: {\n    startOffset: -1,\n    endOffset: -1,\n  },\n});\n\nexport default LyricsLineModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport LyricsLineModel from './LyricsLineModel';\n\nconst LyricsLineCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'LyricsLineCollection',\n  context: ['server', 'section'],\n\n  model: LyricsLineModel,\n\n  //\n  // Control\n\n  eachSpan(fn: any) {\n    this.each((line: any) => {\n      line.get('spans').each(fn);\n    });\n  },\n});\n\nexport default LyricsLineCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport preserveMergeStrategy from 'app/js/models/preserveMergeStrategy';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport path from 'app/js/utils/url/path';\nimport LyricsLineCollection from './LyricsLineCollection';\n\nconst LyricsStreamModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'LyricsStreamModel',\n  context: ['server', 'provider', 'section'],\n\n  responseType() {\n    /** At this moment PMS doesn't support lyrics as JSON, so we need\n     * to change our request based on the current server context.\n     * @see: https://github.com/plexinc/plex-media-server/issues/12851\n     */\n    if (this.server?.get('isCloud')) {\n      return responseTypes.json;\n    }\n    return responseTypes.xml;\n  },\n\n  rootPropertyName: 'Lyrics',\n\n  mergeStrategy: preserveMergeStrategy,\n\n  url() {\n    /** At this moment PMS doesn't support lyrics as JSON, so we need\n     * to change our request based on the current server context.\n     * @see: https://github.com/plexinc/plex-media-server/issues/12851\n     */\n    if (this.server?.get('isCloud')) {\n      return this.get('key');\n    }\n    return path.join(this.get('key'), { format: 'xml' });\n  },\n\n  sessionAttrs: {\n    follow: attrTypes.boolean,\n    lyricsError: attrTypes.object,\n  },\n\n  syncedAttrs: {\n    id: attrTypes.string,\n    key: attrTypes.string,\n    streamType: attrTypes.integer,\n    index: attrTypes.integer,\n    title: attrTypes.string,\n    selected: attrTypes.boolean,\n    codec: attrTypes.string,\n    provider: attrTypes.string,\n    format: attrTypes.string,\n    minLines: attrTypes.integer,\n    timed: attrTypes.boolean,\n  },\n\n  syncedRelations: {\n    lines: {\n      relationClass: LyricsLineCollection,\n      rootPropertyName: 'Line',\n    },\n  },\n\n  defaults: {\n    follow: true,\n    selected: false,\n    lyricsError: null,\n  },\n});\n\nexport default LyricsStreamModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport exclusiveBoolAttrMixin from 'app/js/mixins/models/exclusiveBoolAttrMixin';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport LyricsStreamModel from './LyricsStreamModel';\n\nconst LyricsStreamCollection = AbstractCollection.extend({\n  mixins: [exclusiveBoolAttrMixin],\n\n  //\n  // Properties\n\n  name: 'LyricsStreamCollection',\n  context: ['server', 'provider', 'section'],\n\n  model: LyricsStreamModel,\n\n  //\n  // Init\n\n  initialize() {\n    this.exclusiveBoolAttr('selected');\n  },\n});\n\nexport default LyricsStreamCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst VastModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'PlayQueueItemModel',\n\n  context: ['server', 'provider'],\n\n  syncedAttrs: {\n    internal: attrTypes.boolean,\n    url: attrTypes.string,\n  },\n});\n\nexport default VastModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport HubCollection from 'app/js/models/metadata/HubCollection';\nimport MetadataModel from 'app/js/models/metadata/MetadataModel';\nimport LyricsStreamCollection from 'app/js/models/metadata/stream/LyricsStreamCollection';\nimport ModelCache from 'app/js/utils/cache/ModelCache';\nimport parser2 from 'app/js/utils/parser2';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport streamTypes from 'app/js/utils/types/streamTypes';\nimport VastModel from './VastModel';\n\nconst PlayQueueItemModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'PlayQueueItemModel',\n  context: [\n    'server',\n    'provider',\n    'identifier',\n    'mediaTagPrefix',\n    'mediaTagVersion',\n  ],\n  entityType: entityTypes.PLAY_QUEUE_ITEM,\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    return createEntityID(\n      this.entityType,\n      state.playQueueItemID,\n      this.server.entityID()\n    );\n  },\n  idAttribute: 'playQueueItemID',\n  cache: new ModelCache(),\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'attributes' implicitly has an 'any' typ... Remove this comment to see the full error message\n  cacheKey(attributes) {\n    return this.server && this.server.getScopedKey(attributes.playQueueItemID);\n  },\n  sessionAttrs: {\n    isPlayQueueItem: attrTypes.boolean,\n    isLocal: attrTypes.boolean,\n  },\n  syncedAttrs: {\n    playQueueItemID: attrTypes.string,\n    queueIndex: attrTypes.integer,\n    key: attrTypes.string,\n    ratingKey: attrTypes.string,\n    type: attrTypes.string,\n    subtype: attrTypes.string,\n    advertisement: attrTypes.boolean,\n    allowSkipAfter: attrTypes.integer,\n    librarySectionID: attrTypes.string,\n    hasPremiumLyrics: attrTypes.boolean,\n    displayPostplay: attrTypes.boolean,\n    // Background Processing Queue items\n    syncItemId: attrTypes.integer,\n    generatorID: attrTypes.integer,\n    generatorType: attrTypes.integer,\n    clientIdentifier: attrTypes.string,\n    target: attrTypes.string,\n  },\n  syncedRelations: {\n    metadataItem: {\n      relationClass: MetadataModel,\n      deferred: true,\n    },\n    lyricsStreams: {\n      relationClass: LyricsStreamCollection,\n      deferred: true,\n    },\n    vast: {\n      relationClass: VastModel,\n      deferred: true,\n    },\n  },\n  sessionRelations: {\n    postPlay: {\n      relationClass: HubCollection,\n      options() {\n        return {\n          url: `hubs/metadata/${(this as any).get('metadataItem').id}/postplay`,\n        };\n      },\n    },\n  },\n  defaults: {\n    isPlayQueueItem: true,\n    isLocal: false,\n  },\n  //\n  // Control\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'response' implicitly has an 'any' type.\n  augmentResponse(response) {\n    // Separate the play queue attributes from the metadata attributes.\n    const playQueueAttributes = _.pick(response, Object.keys(this.syncedAttrs));\n    if (response.Ad) {\n      if (Array.isArray(response.Ad)) {\n        response.Ad = response.Ad[0];\n      }\n\n      playQueueAttributes.vast = response.Ad;\n    }\n\n    playQueueAttributes.metadataItem = response;\n    // Until media items, parts, and streams can be relations on `MetadataModel`\n    // wait until a play queue item to create a relation for lyrics streams.\n    // This helps performance when large collections metadata items.\n    const mediaItem = _.first(parser2.parseArray(response.Media));\n    if (mediaItem) {\n      const part = _.first(parser2.parseArray(mediaItem.Part));\n      if (part) {\n        const streams = parser2.parseArray(part.Stream);\n        if (streams) {\n          const lyricsType = streamTypes.get('lyrics');\n          playQueueAttributes.lyricsStreams = _.filter(streams, (stream) => {\n            return parser2.parseInteger(stream.streamType) === lyricsType.id;\n          });\n        }\n      }\n    }\n\n    return playQueueAttributes;\n  },\n});\nexport default PlayQueueItemModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport PlayQueueItemModel from './PlayQueueItemModel';\n\nconst PlayQueueItemCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'PlayQueueItemCollection',\n\n  context: [\n    'server',\n    'provider',\n    'identifier',\n    'mediaTagPrefix',\n    'mediaTagVersion',\n  ],\n\n  model: PlayQueueItemModel,\n});\n\nexport default PlayQueueItemCollection;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport BaseModel from 'app/js/models/BaseModel';\nimport PlayQueueItemCollection from 'app/js/models/library/PlayQueueItemCollection';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport parser from 'app/js/utils/parser';\nimport path from 'app/js/utils/url/path';\n\nconst BackgroundProcessingQueueModel = BaseModel.extend({\n  //\n  // Properties\n\n  idAttribute: 'playQueueID',\n\n  whitelistedAttrs: [\n    'playQueueID',\n    'playQueueSelectedItemID',\n    'playQueueSelectedItemOffset',\n    'playQueueSelectedMetadataItemID',\n    'playQueueLastAddedItemID',\n    'playQueueShuffled',\n    'playQueueSourceURI',\n    'playQueueTotalCount',\n    'playQueueVersion',\n    'message',\n  ],\n\n  defaults: {\n    selectedItem: null,\n    mediaType: null,\n    owned: true,\n    hasUserAdditions: false,\n    playQueueVersion: 0,\n  },\n\n  metadataElementNames: ['Directory', 'Video', 'Track', 'Photo', 'Hub'],\n\n  url: function () {\n    return '/playQueues/' + this.id;\n  },\n\n  //\n  // Init\n\n  initialize: function () {\n    this.listenTo(this, 'change:message', this.onMessageChange);\n  },\n\n  //\n  // Control\n\n  // Overriding fetch implementation in a way compatible with populateMixin\n  _fetch: function () {\n    const url = _.result(this, 'url');\n    return this._ajax('GET', url);\n  },\n\n  convert: function (xml: any) {\n    const json = _.isObject(xml) ? xml : parser.parseXML(xml);\n\n    parser.parseBoolean(json, 'playQueueShuffled');\n\n    parser.parseInteger(json, [\n      'playQueueSelectedItemOffset',\n      'playQueueTotalCount',\n      'playQueueVersion',\n    ]);\n\n    parser.parseArray(json, 'Metadata');\n\n    return json;\n  },\n\n  parse: function (response: any) {\n    if (_.isString(response)) {\n      response = parser.replaceXMLElementNames(\n        response,\n        this.metadataElementNames,\n        'Metadata'\n      );\n    }\n\n    const json = this.convert(response);\n\n    // The name of the id attribute is different if the model is fetched\n    // individually rather than as part of a collection.\n    if (json.id) {\n      json.playQueueID = json.id;\n    }\n\n    // FIXME: This is hacky, and I'd like to formalize change events when\n    // relations are also changing so they can be all be triggered after\n    // attributes are set. The reason for the hack is that we filter the up\n    // next region by this model's playQueueSelectedItemID and\n    // playQueueLastAddedItemID. However, since we have to set either the\n    // collection's models or this model's attributes first, the subsequent\n    // refiltering on change events will be incorrect momentarily, leading\n    // to a glitch. You can reproduce this by performing an action that\n    // leads to queue regeneration, like deleting a generator.\n\n    const attributes = _.pick(json, this.whitelistedAttrs);\n    this.set(attributes, { silent: true });\n\n    // Record what has changed so we can trigger change events when the\n    // collection is ready.\n    this.pendingChanges = this.changed;\n\n    this.parseItems(json);\n\n    return attributes;\n  },\n\n  parseItems: function (json: any) {\n    let collection = this.get('collection');\n    const models = json.Metadata;\n    const parse = !!models.length;\n\n    const selectedIndex = _.pluck(models, 'playQueueItemID').indexOf(\n      json.playQueueSelectedItemID\n    );\n    const selectedItemOffset = json.playQueueSelectedItemOffset;\n    const firstIndex = selectedItemOffset - selectedIndex;\n\n    _.each(models, function (item, index) {\n      item.queueIndex = firstIndex + index;\n      if (json.identifier) {\n        item.identifier = json.identifier;\n      }\n      if (json.mediaTagPrefix) {\n        item.mediaTagPrefix = json.mediaTagPrefix;\n      }\n      if (json.mediaTagVersion) {\n        item.mediaTagVersion = json.mediaTagVersion;\n      }\n    });\n\n    if (collection) {\n      collection.set(models, { parse: parse });\n    } else {\n      collection = new PlayQueueItemCollection(models, {\n        server: this.server,\n        parent: this,\n        parse: parse,\n      });\n\n      this.set('collection', collection);\n    }\n\n    collection.totalSize = json.playQueueTotalCount;\n    collection.availableRange = {\n      start: firstIndex,\n      end: firstIndex + collection.length,\n    };\n  },\n\n  moveItem: function (itemID: any, afterItemID: any) {\n    if (itemID === this.get('playQueueSelectedItemID')) {\n      return $.Deferred().resolve().promise();\n    }\n\n    this.set('hasUserAdditions', true);\n\n    const params = { after: afterItemID || -1 };\n    const url = path.join(\n      [_.result(this, 'url'), '/items/', itemID, '/move'],\n      params\n    );\n\n    return this._ajax('PUT', url);\n  },\n\n  getUpNextRange: function () {\n    const collection = this.get('collection');\n    const selectedItem = collection.get(this.get('playQueueSelectedItemID'));\n    const selectedIndex = collection.indexOf(selectedItem);\n    const startIndex = Math.max(selectedIndex, 0);\n    let endIndex = startIndex;\n\n    const lastAddedItemID = this.get('playQueueLastAddedItemID');\n    if (lastAddedItemID != null) {\n      const lastAddedItem = collection.get(lastAddedItemID);\n      const lastAddedIndex = collection.indexOf(lastAddedItem);\n\n      if (lastAddedIndex > startIndex) {\n        endIndex = lastAddedIndex;\n      }\n    }\n\n    return {\n      start: startIndex,\n      end: endIndex,\n    };\n  },\n\n  getCurrentItem: function () {\n    const selectedItemId = this.get('playQueueSelectedItemID');\n    return (\n      this.get('collection').findWhere({ playQueueItemID: selectedItemId }) ||\n      null\n    );\n  },\n\n  _ajax: function (type: any, url: any) {\n    const xhrOptions = _.extend(this.server.getXHROptions(url), { type: type });\n    const xhrDeferred = $.ajax(xhrOptions);\n\n    xhrDeferred.done(\n      _.bind(function (response: any) {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.set(this.parse(response));\n\n        // This is related to the silent `set` hack above. This set won't\n        // actually trigger all the change events that we need.\n\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        if (!_.isEmpty(this.pendingChanges)) {\n          _.each(\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this.pendingChanges,\n            function (value, key) {\n              // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n              this.trigger('change:' + key, this, value);\n            },\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this\n          );\n\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.trigger('change', this);\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.pendingChanges = null;\n        }\n\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.set('selectedItem', this.getCurrentItem());\n      }, this)\n    );\n\n    return xhrDeferred.promise();\n  },\n\n  //\n  // Listeners\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'model' is declared but its value is never read.\n  onMessageChange: function (model: any, message: any) {\n    if (message) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: message,\n      });\n    }\n  },\n});\n\nexport default BackgroundProcessingQueueModel;\n","import BaseCollection from 'app/js/models/BaseCollection';\nimport BackgroundProcessingQueueModel from 'app/js/models/library/convert/BackgroundProcessingQueueModel';\nimport proxyTypes from 'app/js/utils/constants/proxyTypes';\n\nconst BackgroundProcessingQueueCollection = BaseCollection.extend({\n  //\n  // Properties\n\n  model: BackgroundProcessingQueueModel,\n  url: '/playQueues?type=' + proxyTypes.LOCAL,\n\n  //\n  // Control\n\n  parse: function (response: any) {\n    return this.convert(response, 'PlayQueue');\n  },\n});\n\nexport default BackgroundProcessingQueueCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst VersionGeneratorMediaSettingsModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'VersionGeneratorMediaSettingsModel',\n  context: ['server'],\n\n  syncedAttrs: {\n    videoQuality: {\n      type: attrTypes.integer,\n      save: true,\n    },\n    videoResolution: {\n      type: attrTypes.string,\n      save: true,\n    },\n    maxVideoBitrate: {\n      type: attrTypes.integer,\n      save: true,\n    },\n    audioBoost: {\n      type: attrTypes.integer,\n      save: true,\n    },\n    subtitleSize: {\n      type: attrTypes.integer,\n      save: true,\n    },\n    musicBitrate: {\n      type: attrTypes.integer,\n      save: true,\n    },\n    photoQuality: {\n      type: attrTypes.integer,\n      save: true,\n    },\n    photoResolution: {\n      type: attrTypes.string,\n      save: true,\n    },\n  },\n});\n\nexport default VersionGeneratorMediaSettingsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport MetadataModel from 'app/js/models/metadata/MetadataModel';\n\nconst VersionGeneratorMetadataModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'VersionGeneratorMetadataModel',\n  context: ['server', 'generator'],\n\n  idAttribute: 'ratingKey',\n\n  // This model is separate from `MetadataModel` and extends `AbstractModel`.\n  // However, it reuses a lot of the same attributes as `MetadataModel`, but\n  // does not have any relations, so extend `syncedAttrs` only.\n\n  syncedAttrs: _.extend({}, MetadataModel.prototype.syncedAttrs, {\n    processingState: attrTypes.string,\n    processingStateContext: attrTypes.string,\n  }),\n});\n\nexport default VersionGeneratorMetadataModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport VersionGeneratorMetadataModel from './VersionGeneratorMetadataModel';\n\nconst VersionGeneratorMetadataCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'VersionGeneratorMetadataCollection',\n  context: ['server', 'generator'],\n\n  model: VersionGeneratorMetadataModel,\n});\n\nexport default VersionGeneratorMetadataCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport paginatedListModelMixin from 'app/js/models/mixins/paginatedListModelMixin';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport replaceMetadataXMLElementNames from 'app/js/utils/parser/replaceMetadataXMLElementNames';\nimport path from 'app/js/utils/url/path';\nimport VersionGeneratorMetadataCollection from './VersionGeneratorMetadataCollection';\n\nconst VersionGeneratorMetadataListModel = AbstractModel.extend({\n  mixins: [paginatedListModelMixin],\n\n  //\n  // Properties\n\n  name: 'VersionGeneratorMetadataListModel',\n  context: ['server', 'generator'],\n\n  collectionName: 'metadataItems',\n\n  url() {\n    const url = path.join([_.result(this.generator, 'url'), 'items']);\n\n    return this.getPaginatedUrl(url);\n  },\n\n  sessionAttrs: {\n    currentPageStart: attrTypes.integer,\n    currentPageSize: attrTypes.integer,\n    populatedRange: attrTypes.object,\n  },\n\n  syncedAttrs: {\n    totalSize: attrTypes.integer,\n    identifier: attrTypes.string,\n    mediaTagPrefix: attrTypes.string,\n    mediaTagVersion: attrTypes.string,\n    viewGroup: attrTypes.string,\n    title: attrTypes.string,\n  },\n\n  syncedRelations: {\n    metadataItems: {\n      relationClass: VersionGeneratorMetadataCollection,\n      rootPropertyName: 'Metadata',\n\n      setOptions(parseOptions: any) {\n        // `fetchRange` will add these options, which we'll need to provide when\n        // setting models for the collection.\n\n        return {\n          remove: parseOptions.remove,\n          at: parseOptions.at,\n        };\n      },\n    },\n  },\n\n  defaults() {\n    return {\n      populatedRange: {\n        start: 0,\n        end: 0,\n        size: 0,\n      },\n    };\n  },\n\n  //\n  // Init\n\n  initialize() {\n    this.startPopulatedRangeMonitor();\n  },\n\n  //\n  // Control\n\n  augmentResponseText(responseText: any, responseType: any) {\n    return responseType === responseTypes.xml\n      ? // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n        replaceMetadataXMLElementNames(responseText)\n      : responseText;\n  },\n});\n\nexport default VersionGeneratorMetadataListModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst VersionGeneratorPolicyModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'VersionGeneratorPolicyModel',\n  context: ['server'],\n\n  syncedAttrs: {\n    scope: {\n      type: attrTypes.string,\n      save: true,\n    },\n    value: {\n      type: attrTypes.integer,\n      save: true,\n    },\n    unwatched: {\n      type: attrTypes.boolean,\n      save: true,\n    },\n  },\n\n  defaults: {\n    unwatched: false,\n  },\n});\n\nexport default VersionGeneratorPolicyModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst VersionGeneratorStatusModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'VersionGeneratorStatusModel',\n  context: ['server'],\n\n  syncedAttrs: {\n    state: attrTypes.string,\n    failureCode: attrTypes.string,\n    failure: attrTypes.string,\n    itemsCount: attrTypes.integer,\n    itemsCompleteCount: attrTypes.integer,\n    itemsSuccessfulCount: attrTypes.integer,\n    itemsFailedCount: attrTypes.integer,\n    itemsDisabledCount: attrTypes.integer,\n    totalSize: attrTypes.integer,\n  },\n});\n\nexport default VersionGeneratorStatusModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport ModelCache from 'app/js/utils/cache/ModelCache';\nimport { AUDIO, PHOTO, VIDEO } from 'app/js/utils/types/mediaTypes';\nimport VersionGeneratorMediaSettingsModel from './VersionGeneratorMediaSettingsModel';\nimport VersionGeneratorMetadataListModel from './VersionGeneratorMetadataListModel';\nimport VersionGeneratorPolicyModel from './VersionGeneratorPolicyModel';\nimport VersionGeneratorStatusModel from './VersionGeneratorStatusModel';\n\nconst VersionGeneratorModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'VersionGeneratorModel',\n  context: ['server', 'section', 'playlistID'],\n  rootPropertyName: 'Item',\n  cache: new ModelCache(),\n  cacheKey(attributes: any) {\n    return this.server && this.server.getScopedKey(attributes.id);\n  },\n  urlRoot() {\n    const playlistID = this.playlistID || this.parent.id;\n    return `/playlists/${playlistID}/items`;\n  },\n  syncedAttrs: {\n    id: attrTypes.integer,\n    clientIdentifier: attrTypes.string,\n    contentType: attrTypes.string,\n    composite: attrTypes.string,\n    type: {\n      type: attrTypes.integer,\n      save: true,\n    },\n    title: {\n      type: attrTypes.string,\n      save: true,\n    },\n    target: {\n      type: attrTypes.string,\n      save: true,\n    },\n    targetTagID: {\n      type: attrTypes.integer,\n      save: true,\n    },\n    locationID: {\n      type: attrTypes.integer,\n      save: true,\n    },\n    Location: {\n      type: attrTypes.object,\n      save: true,\n    },\n    Device: {\n      type: attrTypes.object,\n      save: true,\n    },\n  },\n  sessionRelations: {\n    children: {\n      relationClass: VersionGeneratorMetadataListModel,\n      options() {\n        return {\n          generator: this,\n        };\n      },\n    },\n  },\n  syncedRelations: {\n    status: {\n      relationClass: VersionGeneratorStatusModel,\n      rootPropertyName: 'Status',\n    },\n    policy: {\n      relationClass: VersionGeneratorPolicyModel,\n      rootPropertyName: 'Policy',\n      save: true,\n    },\n    mediaSettings: {\n      relationClass: VersionGeneratorMediaSettingsModel,\n      rootPropertyName: 'MediaSettings',\n      save: true,\n    },\n  },\n  derivedAttrs: {\n    // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n    isDirectory() {\n      const location = (this as any).get('Location');\n      if (location.uri) {\n        return /(playlist:\\/\\/|library:\\/\\/([\\w-]*)\\/directory\\/)/.test(\n          location.uri\n        );\n      }\n    },\n  },\n  defaults() {\n    return {\n      type: 42,\n      locationID: -1,\n      Location: {},\n      Device: {},\n    };\n  },\n  defaultCounts: {\n    [VIDEO]: 5,\n    [AUDIO]: 50,\n    [PHOTO]: 50,\n  },\n  warningCounts: {\n    [VIDEO]: 10,\n    [AUDIO]: 100,\n    [PHOTO]: 100,\n  },\n  //\n  // Control\n  // @ts-expect-error ts-migrate(6133) FIXME: 'data' is declared but its value is never read.\n  getSaveParams(data: any, options: any) {\n    // eslint-disable-next-line prefer-rest-params\n    const Item = AbstractModel.prototype.getSaveParams.apply(this, arguments);\n    // There's no need to provide media settings or device info when using a\n    // predefined target.\n    if (Item.targetTagID) {\n      delete Item.MediaSettings;\n      delete Item.Device;\n    }\n    return { Item };\n  },\n  setPolicyDefaultsFor(mediaType: any) {\n    const policy = this.get('policy');\n    const isDirectory = this.get('isDirectory');\n    if (!policy.has('scope')) {\n      policy.set('scope', isDirectory ? 'count' : 'all');\n    }\n    if (!policy.has('value') && isDirectory) {\n      policy.set('value', this.defaultCounts[mediaType]);\n    }\n    return this;\n  },\n  shouldShowPolicyWarning(mediaType: any, policyValue: any) {\n    const policyScope = this.get('policy').get('scope');\n    if (policyScope === 'count') {\n      return policyValue > this.warningCounts[mediaType];\n    }\n    if (policyScope === 'all') {\n      return this.get('isDirectory');\n    }\n    return false;\n  },\n});\nexport default VersionGeneratorModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport FilterOptionCollection from './FilterOptionCollection';\n\nconst FilterModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'FilterModel',\n  context: ['server', 'section', 'type', 'standalone'],\n\n  idAttribute: 'filter',\n  rootPropertyName: 'Directory',\n\n  defaults: {\n    advanced: false,\n  },\n\n  syncedAttrs: {\n    filter: attrTypes.string,\n    filterType: attrTypes.string,\n    type: attrTypes.string,\n    key: attrTypes.string,\n    title: attrTypes.string,\n    advanced: attrTypes.boolean,\n  },\n\n  syncedRelations: {\n    options: {\n      relationClass: FilterOptionCollection,\n    },\n  },\n});\n\nexport default FilterModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport path from 'app/js/utils/url/path';\nimport FilterModel from './FilterModel';\n\nconst FilterCollection = AbstractCollection.extend({\n  //\n  // Properties\n  name: 'FilterCollection',\n  context: ['server', 'section', 'includeAdvanced'],\n  model: FilterModel,\n  comparator: 'filterType',\n  includeAdvanced: true,\n  url() {\n    const urlRoot = _.result(this.section, 'url');\n    const type = this.section.get('currentType');\n    const params = {\n      includeAdvanced: this.includeAdvanced ? 1 : 0,\n    };\n    if (type) {\n      (params as any).type = type.id;\n    }\n    return path.join([urlRoot, '/filters'], params);\n  },\n  //\n  // Control\n  findUnwatchedFilter() {\n    // This logic also exists in TVSectionViewStateStorageModel.toJSON()\n    return this.get('unwatched') || this.get('unwatchedLeaves');\n  },\n});\nexport default FilterCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst FilterOptionModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'FilterOptionModel',\n  context: ['server', 'section', 'type', 'standalone'],\n\n  idAttribute: 'key',\n  rootPropertyName: 'Directory',\n\n  syncedAttrs: {\n    key: attrTypes.encodedString,\n    type: attrTypes.string,\n    field: attrTypes.string,\n    value: attrTypes.string,\n    title: attrTypes.string,\n  },\n\n  //\n  // Control\n\n  augmentResponse(response: any) {\n    // Migrate old attributes to new ones if fastKey exists\n    // https://github.com/plexinc/api/issues/91#issuecomment-375445445\n\n    // If `fastKey` exists there is a 1:1 mapping of old values to new ones,\n    // aside from `type` which becomes `field`\n    if (response.fastKey) {\n      response.value = response.key;\n      response.key = response.fastKey;\n      response.field = response.type;\n\n      delete response.type;\n      delete response.fastKey;\n\n      // If neither `fastKey` nor `value` exist we are on an older PMS server, or\n      // on a options endpoint that does not offer a `fastKey` (resolution),\n      // handle this case separately to not step on the `key` value\n    } else if (!response.fastKey && !response.value) {\n      response.value = response.key;\n    }\n\n    return response;\n  },\n});\n\nexport default FilterOptionModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport path from 'app/js/utils/url/path';\nimport FilterOptionModel from './FilterOptionModel';\n\nconst FilterOptionCollection = AbstractCollection.extend({\n  //\n  // Properties\n  name: 'FilterOptionCollection',\n  context: [\n    'server',\n    'provider',\n    'section',\n    'type',\n    'standalone',\n    'includeExternalMedia',\n  ],\n  model: FilterOptionModel,\n  url() {\n    let params;\n    if (this.type) {\n      params = { type: this.type };\n    } else if (!this.standalone) {\n      params = this.getUrlParams();\n    }\n    const urlRoot = _.result(this.section, 'url');\n    return path.join([urlRoot, this.parent.id], params);\n  },\n  //\n  // Control\n  getUrlParams() {\n    const params = {};\n    const urlParams: any = [];\n    const type = this.section.get('currentType');\n    const filters = this.section.get('currentFilters');\n    if (type) {\n      (params as any).type = type.id;\n    }\n    // Filters with more than one value should send a comma-delimited list\n    // of values.\n    _.each(filters, (filter) => {\n      if (filter.key !== this.parent.id && filter.values.length) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        params[filter.key] = filter.values.join(',');\n      }\n    });\n    // Some of the params are special and can't just be handled by the path\n    // util so loop through the params and create a querystring manually.\n    _.each(params, (value, key) => {\n      // Send an operator for unviewedLeafCount.\n      if (key === 'unviewedLeafCount') {\n        urlParams.push(`${key}>=${value}`);\n      } else {\n        urlParams.push(`${key}=${value}`);\n      }\n    });\n    return urlParams.join('&');\n  },\n  augmentResponse(json: any) {\n    // https://github.com/plexinc/plex-web-client/issues/3304\n    if (json.Directory && !Array.isArray(json.Directory)) {\n      json.Directory = [json.Directory];\n    }\n    json.Directory = _.filter(json.Directory, (item) => item.title);\n    return json;\n  },\n  search(query: any) {\n    const matches = this.filter((filterOption: any) => {\n      return (\n        filterOption.get('title').toLowerCase().indexOf(query.toLowerCase()) >\n        -1\n      );\n    });\n    return this.clone(matches);\n  },\n});\nexport default FilterOptionCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport SectionModel from './SectionModel';\n\nconst SectionCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'SectionCollection',\n  context: ['server'],\n\n  model: SectionModel,\n  url: '/library/sections',\n\n  responseType() {\n    return getSupportedResponseType(this.server);\n  },\n});\n\nexport default SectionCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport SortModel from 'app/js/models/library/section/SortModel';\nimport { getMetadataType } from 'app/js/utils/types/metadataTypes';\nimport path from 'app/js/utils/url/path';\nimport MetadataListModel from './MetadataListModel';\n\nconst filterOperators = {\n  unviewedLeafCount: '>=',\n};\n\nconst SectionMetadataListModel = MetadataListModel.extend({\n  //\n  // Properties\n\n  name: 'SectionMetadataListModel',\n\n  context: [\n    'server',\n    'section',\n    'identifier',\n    'mediaTagPrefix',\n    'mediaTagVersion',\n    'allowSync',\n  ],\n\n  url() {\n    let segments = [];\n    let subsetID;\n    let params;\n\n    const folderKey = this.section.get('currentFolderKey');\n    if (folderKey) {\n      // If we are browsing within a folder, we don't need anything else aside\n      // from the folder key.\n      segments.push(folderKey);\n    } else {\n      segments.push(_.result(this.section, 'url'));\n\n      subsetID = this.section.get('currentSubset').id;\n\n      if (this.section.get('allowAdvancedFilters')) {\n        // We can sort all items for recently added and recently released\n        // instead of limiting ourselves to the actual subset.\n\n        if (subsetID === 'recentlyAdded' || subsetID === 'newest') {\n          subsetID = 'all';\n        }\n\n        segments.push(subsetID);\n        params = this.getParams();\n      } else {\n        const filters = this.section.get('currentFilters');\n\n        if (filters.length) {\n          segments = [filters[0].values[0]];\n        } else {\n          segments.push(subsetID);\n        }\n      }\n    }\n\n    let url = path.join(segments, params);\n    url = this.replaceSpecialFilterOperators(url);\n\n    this.set('containerKey', url);\n\n    return this.server.get('isFullServer') ? this.getPaginatedUrl(url) : url;\n  },\n\n  //\n  // Control\n\n  getParams() {\n    const params = this.getFilterParams();\n    const typeID = this.getMetadataTypeID();\n    const sort = this.getSort();\n\n    // Do not send a type param with photos since they are browsed by directory.\n    if (typeID && typeID !== getMetadataType('photo').id) {\n      params.type = typeID;\n    }\n\n    if (sort) {\n      params.sort = sort;\n    }\n\n    // If the section is being scanned, we will want the `metadataState` and\n    // `mediaState` attributes immediately.\n\n    if (\n      this.section.get('refreshing') &&\n      this.server.supports('timelineState')\n    ) {\n      params.timelineState = 1;\n    }\n\n    return params;\n  },\n\n  getFilterParams() {\n    const filters = this.section.get('currentFilters');\n    const params = {};\n\n    // Filters with more than one value should send a comma-delimited list of\n    // values.\n\n    _.each(filters, (filter) => {\n      if (filter.values.length) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        params[filter.key] = filter.values.map(decodeURIComponent).join(',');\n      }\n    });\n\n    return params;\n  },\n\n  getMetadataTypeID() {\n    // Even if the user has show or artist selected for the type, we want to\n    // enforce a specific media type when using some of the special subsets.\n\n    const subsetID = this.section.get('currentSubset').id;\n    let typeID =\n      this.section.get('currentType').id ||\n      getMetadataType(this.section.get('type')).id;\n\n    if (/^(onDeck|recentlyAdded|recentlyViewed|newest)$/.test(subsetID)) {\n      // Return the episode media type instead of the show type or season type.\n      if (\n        typeID === getMetadataType('show').id ||\n        typeID === getMetadataType('season').id\n      ) {\n        typeID = getMetadataType('episode').id;\n        // Return the album media type instead of the artist type.\n      } else if (\n        typeID === getMetadataType('artist').id ||\n        typeID === getMetadataType('track').id\n      ) {\n        typeID = getMetadataType('album').id;\n      }\n    } else if (/^recentlyViewedShows$/.test(subsetID)) {\n      typeID = getMetadataType('show').id;\n    }\n\n    return typeID;\n  },\n\n  getSort() {\n    const sort = this.section.get('currentSort');\n    const subset = this.section.get('currentSubset').id;\n\n    if (subset === 'recentlyAdded') {\n      return 'addedAt:desc';\n    } else if (subset === 'newest') {\n      return 'originallyAvailableAt:desc';\n    } else if (sort) {\n      const sortDirection =\n        sort.get('direction') || sort.get('defaultDirection');\n      return sortDirection === SortModel.directions.DESCENDING\n        ? sort.get('descKey')\n        : sort.get('key');\n    }\n  },\n\n  replaceSpecialFilterOperators(url: any) {\n    _.each(filterOperators, (operator, filter) => {\n      url = url.replace(filter + '=', filter + operator);\n    });\n\n    return url;\n  },\n});\n\nexport default SectionMetadataListModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport t from 'app/js/utils/t';\nimport createTypes from './createTypes';\n\nconst identifiers = ['key'];\n\nconst subsetTypes = createTypes(identifiers, [\n  {\n    key: 'all',\n    title: () => t('All'),\n  },\n  {\n    key: 'unwatched',\n    title: () => t('Unplayed'),\n  },\n  {\n    key: 'newest',\n    title: () => t('Recently Released'),\n  },\n  {\n    key: 'recentlyAdded',\n    title: () => t('Recently Added'),\n  },\n  {\n    key: 'recentlyViewed',\n    title: () => t('Recently Viewed'),\n  },\n  {\n    key: 'recentlyViewedShows',\n    title: () => t('Recently Viewed Shows'),\n  },\n  {\n    key: 'onDeck',\n    title: () => t('On Deck'),\n  },\n  {\n    key: 'folder',\n    title: () => t('By Folder'),\n  },\n]);\n\nexport default subsetTypes;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst FirstCharacterModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'FirstCharacterModel',\n  context: ['server', 'provider', 'section'],\n\n  idAttribute: 'key',\n  rootPropertyName: 'Directory',\n\n  syncedAttrs: {\n    key: attrTypes.string,\n    title: attrTypes.string,\n    size: attrTypes.integer,\n  },\n\n  urlRoot() {\n    return `/library/sections/${this.section.id}/firstCharacter`;\n  },\n});\n\nexport default FirstCharacterModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport FirstCharacterModel from './FirstCharacterModel';\n\nconst FirstCharacterCollection = AbstractCollection.extend({\n  //\n  // Properties\n  name: 'FirstCharacterCollection',\n  context: ['server', 'provider', 'section'],\n  model: FirstCharacterModel,\n  responseType() {\n    return getSupportedResponseType(this.server);\n  },\n  url() {\n    const urlRoot = _.result(this.section, 'url') + '/firstCharacter';\n    const params = this.getUrlParams();\n    // See: https://github.com/plexinc/plex-web-client/issues/3067\n    const url = params ? urlRoot + '?' + params : urlRoot;\n    return url;\n  },\n  //\n  // Control\n  getUrlParams() {\n    const params = {};\n    const urlParams: any = [];\n    const type = this.section.get('currentType');\n    if (type) {\n      (params as any).type = type.id;\n    }\n    const filters = this.section.get('currentFilters');\n    // Filters with more than one value should send a comma-delimited list\n    // of values.\n    _.each(filters, (filter) => {\n      if (filter.values.length) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        params[filter.key] = filter.values.join(',');\n      }\n    });\n    // Some of the params are special and can't just be handled by the path\n    // util so loop through the params and create a querystring manually.\n    // @ts-expect-error ts-migrate(6133) FIXME: 'value' is declared but its value is never read.\n    _.each(params, (value, key) => {\n      // Send an operator for unviewedLeafCount.\n      if (key === 'unviewedLeafCount') {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        urlParams.push(`${key}>=${params[key]}`);\n      } else {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        urlParams.push(`${key}=${params[key]}`);\n      }\n    });\n    return urlParams.join('&');\n  },\n});\nexport default FirstCharacterCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport FilterOptionCollection from './FilterOptionCollection';\n\nconst LinearFilterModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'LinearFilterModel',\n  context: ['server', 'section'],\n\n  idAttribute: 'key',\n  rootPropertyName: 'Directory',\n\n  syncedAttrs: {\n    secondary: attrTypes.boolean,\n    key: attrTypes.string,\n    title: attrTypes.string,\n  },\n\n  syncedRelations: {\n    options: {\n      relationClass: FilterOptionCollection,\n    },\n  },\n\n  defaults: {\n    secondary: false,\n  },\n});\n\nexport default LinearFilterModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport LinearFilterModel from './LinearFilterModel';\n\nconst LinearFilterCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'LinearFilterCollection',\n  context: ['server', 'section'],\n\n  model: LinearFilterModel,\n\n  url() {\n    return _.result(this.section, 'url');\n  },\n\n  //\n  // Control\n\n  filterBySecondary() {\n    const secondaries = this.filter((linearFilter: any) =>\n      linearFilter.get('secondary')\n    );\n\n    return this.clone(secondaries);\n  },\n});\n\nexport default LinearFilterCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst LocationModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'LocationModel',\n  context: ['server', 'section'],\n\n  rootPropertyName: 'Location',\n\n  syncedAttrs: {\n    id: attrTypes.integer,\n    path: {\n      type: attrTypes.string,\n      save: true,\n    },\n  },\n});\n\nexport default LocationModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport LocationModel from './LocationModel';\n\nconst LocationCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'LocationCollection',\n  context: ['server', 'section'],\n\n  model: LocationModel,\n});\n\nexport default LocationCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst MediaTypeModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'MediaTypeModel',\n  context: ['server', 'section'],\n\n  sessionAttrs: {\n    id: attrTypes.integer,\n    typeString: attrTypes.string,\n    title: attrTypes.string,\n    plural: attrTypes.string,\n    mediaType: attrTypes.string,\n    child: attrTypes.string,\n    parent: attrTypes.string,\n    selected: attrTypes.boolean,\n  },\n\n  defaults: {\n    selected: false,\n  },\n});\n\nexport default MediaTypeModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport MediaTypeModel from './MediaTypeModel';\n\nconst MediaTypeCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'MediaTypeCollection',\n  context: ['server', 'section'],\n\n  model: MediaTypeModel,\n});\n\nexport default MediaTypeCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport t from 'app/js/utils/t';\n\nconst whitelistedPrimaryKeySubsets = [\n  'all',\n  'recentlyAdded',\n  'recentlyViewed',\n  'recentlyViewedShows',\n  'onDeck',\n  'newest',\n  'folder',\n];\nconst SectionSubsetModel = AbstractModel.extend(\n  {\n    //\n    // Properties\n    name: 'SectionSubsetModel',\n    context: ['server', 'section'],\n    idAttribute: 'key',\n    rootPropertyName: 'Directory',\n    sessionAttrs: {\n      selected: attrTypes.boolean,\n    },\n    syncedAttrs: {\n      key: attrTypes.string,\n      title: attrTypes.string,\n      secondary: attrTypes.boolean,\n    },\n    derivedAttrs: {\n      // Only allow certain subsets to become primary subsets that are shown\n      // in the subset dropdown.\n      primary() {\n        return (\n          !(this as any).get('secondary') &&\n          _.contains(whitelistedPrimaryKeySubsets, (this as any).get('key'))\n        );\n      },\n    },\n    defaults: {\n      selected: false,\n    },\n    //\n    // Control\n    augmentResponse(json: any) {\n      // Simplify the title for the all subset.\n      if (json.key === 'all') {\n        json.title = t('All');\n      }\n      return json;\n    },\n  },\n  {\n    //\n    // Static\n    whitelistedPrimaryKeySubsets,\n  }\n);\nexport default SectionSubsetModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport SectionSubsetModel from './SectionSubsetModel';\n\nconst SectionSubsetCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'SectionSubsetCollection',\n  context: ['server', 'section'],\n\n  model: SectionSubsetModel,\n\n  url() {\n    return _.result(this.section, 'url');\n  },\n\n  //\n  // Control\n\n  filterPrimaries() {\n    const primaries = this.filter((subset: any) => subset.get('primary'));\n\n    return this.clone(primaries);\n  },\n});\n\nexport default SectionSubsetCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport SectionMetadataListModel from 'app/js/models/metadata/SectionMetadataListModel';\nimport ServerSettingCollection from 'app/js/models/server/ServerSettingCollection';\nimport ModelCache from 'app/js/utils/cache/ModelCache';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport { getRelatedTypes } from 'app/js/utils/types/metadataTypes';\nimport sectionTypes from 'app/js/utils/types/sectionTypes';\nimport subsetTypes from 'app/js/utils/types/subsetTypes';\nimport path from 'app/js/utils/url/path';\nimport FilterCollection from './FilterCollection';\nimport FirstCharacterCollection from './FirstCharacterCollection';\nimport FirstCharacterModel from './FirstCharacterModel';\nimport LinearFilterCollection from './LinearFilterCollection';\nimport LocationCollection from './LocationCollection';\nimport MediaTypeCollection from './MediaTypeCollection';\nimport MediaTypeModel from './MediaTypeModel';\nimport SectionSubsetCollection from './SectionSubsetCollection';\nimport SectionSubsetModel from './SectionSubsetModel';\nimport SortCollection from './SortCollection';\nimport SortModel from './SortModel';\n\nconst SectionModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'SectionModel',\n  context: ['server'],\n  entityType: entityTypes.LIBRARY,\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    return createEntityID(this.entityType, state.key, this.server.entityID());\n  },\n  idAttribute: 'key',\n  rootPropertyName: 'Directory',\n  cache: new ModelCache(),\n  persistInCache: true,\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'attributes' implicitly has an 'any' typ... Remove this comment to see the full error message\n  cacheKey(attributes) {\n    return this.server && this.server.getScopedKey(attributes.key);\n  },\n  url() {\n    if (this.isNew()) {\n      return _.result(this, 'urlRoot') || _.result(this.collection, 'url');\n    }\n    // If the section id has characters other than numbers (e.g. /sync/...),\n    // assume the id represents the full path to the section.\n    const isFullPath = _.isNaN(parseInt(this.id, 10));\n    const url = isFullPath ? this.id : '/library/sections/' + this.id;\n    return url;\n  },\n  sessionAttrs: {\n    isSection: attrTypes.boolean,\n    isCollectionsPopulated: attrTypes.boolean,\n    currentFilters: attrTypes.array,\n    currentFolderKey: attrTypes.string,\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n    settings: attrTypes.instanceOf(ServerSettingCollection),\n  },\n  syncedAttrs: {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 2.\n    key: attrTypes.oneOfType(attrTypes.string, attrTypes.integer),\n    uuid: attrTypes.string,\n    thumb: attrTypes.string,\n    art: attrTypes.string,\n    createdAt: attrTypes.integer,\n    updatedAt: attrTypes.integer,\n    allowAdvancedFilters: attrTypes.boolean,\n    allowSync: attrTypes.boolean,\n    refreshing: attrTypes.boolean,\n    name: {\n      type: attrTypes.string,\n      save: true,\n    },\n    title: {\n      type: attrTypes.string,\n      save: true,\n    },\n    type: {\n      type: attrTypes.string,\n      save: true,\n    },\n    agent: {\n      type: attrTypes.string,\n      save: true,\n    },\n    scanner: {\n      type: attrTypes.string,\n      save: true,\n    },\n    language: {\n      type: attrTypes.string,\n      save: true,\n    },\n    importFromiTunes: {\n      type: attrTypes.boolean,\n      save: true,\n    },\n    enableAutoPhotoTags: {\n      type: attrTypes.boolean,\n      save: true,\n    },\n    downloadMedia: {\n      type: attrTypes.integer,\n      save: true,\n    },\n  },\n  derivedAttrs: {\n    serverEntityID() {\n      // The unit test environment doesn't create the state tree universally.\n      // The following logic intends to only request an entityID from the server\n      // context when the state tree is present. This is similar to checking\n      // `config.shouldCreateStateTree` before querying for entityID.\n      return (this as any).state ? (this as any).server.entityID() : '';\n    },\n  },\n  syncedRelations: {\n    locations() {\n      return {\n        relationClass: LocationCollection,\n        rootPropertyName: 'Location',\n        options: { section: this },\n        save: true,\n      };\n    },\n  },\n  sessionRelations: {\n    items() {\n      return {\n        relationClass: SectionMetadataListModel,\n        options: { section: this },\n      };\n    },\n    currentSubset() {\n      return {\n        relationClass: SectionSubsetModel,\n        options: { section: this },\n      };\n    },\n    currentFirstCharacter() {\n      return {\n        relationClass: FirstCharacterModel,\n        deferred: true,\n      };\n    },\n    currentType() {\n      return {\n        relationClass: MediaTypeModel,\n        deferred: true,\n      };\n    },\n    currentSort() {\n      return {\n        relationClass: SortModel,\n        deferred: true,\n      };\n    },\n    types() {\n      return {\n        relationClass: MediaTypeCollection,\n        options: { section: this },\n      };\n    },\n    subsets() {\n      return {\n        relationClass: SectionSubsetCollection,\n        options: { section: this },\n      };\n    },\n    filters() {\n      const FilterCollectionClass = (this as any).get('allowAdvancedFilters')\n        ? FilterCollection\n        : LinearFilterCollection;\n      return {\n        relationClass: FilterCollectionClass,\n        options: { section: this },\n      };\n    },\n    sorts() {\n      return {\n        relationClass: SortCollection,\n        options: { section: this },\n      };\n    },\n    firstCharacters() {\n      return {\n        relationClass: FirstCharacterCollection,\n        options: { section: this },\n      };\n    },\n  },\n  defaults() {\n    return {\n      isSection: true,\n      isCollectionsPopulated: false,\n      currentType: null,\n      currentFilters: [],\n      currentSort: null,\n      currentFirstCharacter: null,\n      currentFolderKey: null,\n      currentSubset: subsetTypes.get('all'),\n      settings: new ServerSettingCollection([], {\n        server: this.server,\n        url: () => {\n          return path.join(['/library/sections/', this.get('key'), '/prefs']);\n        },\n      }),\n    };\n  },\n  //\n  // Init\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'attrs' implicitly has an 'any' type.\n  initialize(attrs) {\n    this.updateMediaTypes(this, attrs.type);\n    this.set({\n      currentType: this.get('types').findWhere({ typeString: attrs.type }),\n    });\n    this.on('change:type', this.updateMediaTypes, this);\n  },\n  uninitialize() {\n    this.off('change:type', this.updateMediaTypes, this);\n    this.stopListening();\n  },\n  //\n  // Control\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'json' implicitly has an 'any' type.\n  augmentResponse(json) {\n    // We already have an attribute named filters for the filter collection\n    // so use a limited attribute instead.\n    json.allowAdvancedFilters = !!json.filters;\n    delete json.filters;\n    return json;\n  },\n  getSectionType() {\n    const type = this.get('type');\n    return sectionTypes.get(type);\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'attrs' is declared but its value is never read.\n  getSaveParams(attrs) {\n    // eslint-disable-next-line prefer-rest-params\n    const params = AbstractModel.prototype.getSaveParams.apply(this, arguments);\n    if ('type' in params) {\n      // Convert ui-differentiated section type keys to\n      // server-acceptable equivalents\n      const sectionType = sectionTypes.get(params.type);\n      if (sectionType) {\n        params.type = sectionType.typeString;\n      }\n    }\n    // When creating and updating, the field is 'name' instead of 'title'\n    if ('title' in params) {\n      params.name = params.title;\n      delete params.title;\n    }\n    if (_.isObject(params.type)) {\n      params.type = params.type.typeString;\n    }\n    if ('Location' in params) {\n      params.location = _.pluck(params.Location, 'path');\n      delete params.Location;\n    }\n    return params;\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'models' implicitly has an 'any' type.\n  getSyncTitle(models) {\n    const title = this.get('title');\n    // @ts-expect-error ts-migrate(7034) FIXME: Variable 'titles' implicitly has type 'any[]' in s... Remove this comment to see the full error message\n    const titles = [];\n    const currentSubset = this.get('currentSubset');\n    const currentFilters = this.get('currentFilters');\n    // If multiple items have been selected for sync, just return the title\n    // of the items instead of looking at the section.\n    if (models) {\n      _.each(models, (model) => {\n        titles.push(model.get('title'));\n      });\n      // @ts-expect-error ts-migrate(7005) FIXME: Variable 'titles' implicitly has an 'any[]' type.\n      return title + ': ' + titles.join(', ');\n    }\n    // If On Deck or Recently Added is being synced, just return the subset\n    // title.\n    if (currentSubset.id !== 'all') {\n      return title + ': ' + currentSubset.get('title');\n    }\n    if (!currentFilters.length) {\n      return title;\n    }\n    _.each(currentFilters, function (currentFilter) {\n      titles.push(currentFilter.titles.join(', '));\n    });\n    // @ts-expect-error ts-migrate(7005) FIXME: Variable 'titles' implicitly has an 'any[]' type.\n    return title + ': ' + titles.join(',');\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'sectionType' implicitly has an 'any' ty... Remove this comment to see the full error message\n  setAgentAndScanner(sectionType, agents, scanners) {\n    // Set the agent and scanner to the first available default\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'defaultAgent' implicitly has an 'any' t... Remove this comment to see the full error message\n    const agent = sectionType.defaultAgents.find((defaultAgent) =>\n      agents.find(\n        // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'currentAgent' implicitly has an 'any' t... Remove this comment to see the full error message\n        (currentAgent) => currentAgent.get('identifier') === defaultAgent\n      )\n    );\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'defaultScanner' implicitly has an 'any'... Remove this comment to see the full error message\n    const scanner = sectionType.defaultScanners.find((defaultScanner) =>\n      scanners.find(\n        // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'currentScanner' implicitly has an 'any'... Remove this comment to see the full error message\n        (currentScanner) => currentScanner.get('name') === defaultScanner\n      )\n    );\n    this.set({\n      agent,\n      scanner,\n    });\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'section' is declared but its value is never read.\n  updateMediaTypes(section, type) {\n    // Add any related types to the collection, including the type\n    // corresponding to the section type.\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    const relatedTypes = getRelatedTypes(type);\n    this.get('types').reset(relatedTypes);\n  },\n});\nexport default SectionModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport path from 'app/js/utils/url/path';\nimport SortModel from './SortModel';\n\nconst SortCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'SortCollection',\n  context: ['server', 'section', 'typeID'],\n\n  model: SortModel,\n\n  url() {\n    const urlRoot = _.result(this.section, 'url');\n    const typeID = this.typeID || this.section.get('currentType').id;\n    const params = typeID ? { type: typeID } : {};\n\n    return path.join([urlRoot, '/sorts'], params);\n  },\n});\n\nexport default SortCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst directions = {\n  ASCENDING: 'asc',\n  DESCENDING: 'desc',\n};\n\nconst SortModel = AbstractModel.extend(\n  {\n    //\n    // Properties\n\n    name: 'SortModel',\n    context: ['server', 'section'],\n\n    idAttribute: 'key',\n    rootPropertyName: 'Directory',\n\n    sessionAttrs: {\n      selected: attrTypes.boolean,\n      direction: attrTypes.string,\n    },\n\n    syncedAttrs: {\n      key: attrTypes.string,\n      descKey: attrTypes.string,\n      title: attrTypes.string,\n      isDefault: attrTypes.boolean,\n      active: attrTypes.boolean,\n      defaultDirection: attrTypes.string,\n      activeDirection: attrTypes.string,\n      firstCharacterKey: attrTypes.string,\n    },\n\n    defaults: {\n      selected: false,\n    },\n\n    //\n    // Control\n\n    augmentResponse(json: any) {\n      // `defaultDirection` attribute was introduced in PMS 0.9.9.15\n      // If it is not present, fill it using the previous `default` logic.\n      if (!json.defaultDirection) {\n        json.defaultDirection = json.default || directions.ASCENDING;\n      }\n\n      // Default is a reserved word, so use something else.\n      json.isDefault = !!json.default;\n\n      if (!json.direction) {\n        json.direction = json.defaultDirection;\n      }\n\n      return json;\n    },\n\n    reverseSortDirection() {\n      let direction = this.get('direction') || this.get('defaultDirection');\n\n      if (!direction || direction === directions.ASCENDING) {\n        direction = directions.DESCENDING;\n      } else {\n        direction = directions.ASCENDING;\n      }\n\n      this.set('direction', direction);\n    },\n  },\n  {\n    //\n    // Static\n\n    directions,\n  }\n);\n\nexport default SortModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const BANNER = 'banner';\nexport const GRID = 'grid';\nexport const HERO = 'hero';\nexport const LIST = 'list';\nexport const SHELF = 'shelf';\nexport const SPOTLIGHT = 'spotlight';\nexport const UPSELL = 'upsell';\n\nexport const CONTENT_HUBS = [SHELF, GRID, LIST, BANNER, HERO];\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport replaceMetadataXMLElementNames from 'app/js/utils/parser/replaceMetadataXMLElementNames';\nimport toUpperCaseFirstLetter from 'app/js/utils/string/case/toUpperCaseFirstLetter';\nimport { CONTENT_HUBS } from 'app/js/utils/types/hubStyleTypes';\nimport path from 'app/js/utils/url/path';\nimport HubModel from './HubModel';\n\nconst HubCollection = AbstractCollection.extend({\n  //\n  // Properties\n  name: 'HubCollection',\n  context: [\n    'server',\n    'provider',\n    'section',\n    'identifier',\n    'hubKey',\n    'hubCount',\n    'count',\n    'includeEmpty',\n    'libraryHubsOnly',\n    'includeFeaturedTags',\n    'includeLibraryPlaylists',\n    'includeMeta',\n    'includeGames',\n    'includeStations',\n    'includeExternalMedia',\n    'includeExternalMetadata',\n    'includeRecentChannels',\n    'asyncAugmentMetadata',\n    'excludes',\n    'excludeFields',\n    'excludeElements',\n    'allowSync',\n    'maxLength',\n    'wait',\n  ],\n  responseContext: ['identifier', 'allowSync'],\n  model: HubModel,\n  responseType() {\n    return getSupportedResponseType(this.server);\n  },\n  url() {\n    let hubKey = '/hubs';\n    if (this.hubKey) {\n      hubKey = this.hubKey;\n    } else if (this.section) {\n      hubKey = '/hubs/sections/' + encodeURIComponent(this.section.id);\n    }\n    const params = {};\n    // An explicit empty string means no exclusions, otherwise default to summary\n    if (this.excludeFields !== '') {\n      (params as any).excludeFields = this.excludeFields || 'summary';\n    }\n    if (this.excludeElements) {\n      (params as any).excludeElements = this.excludeElements;\n    }\n    // Cloud providers support count:0 although PMS as of 1.13.9 still does not.\n    // Request 1 additional item to avoid showing \"more\" with only a single\n    // item behind it.\n    if (this.count) {\n      (params as any).count = this.count + 1;\n    }\n    if (this.hubCount) {\n      // See: https://github.com/plexinc/plex-web-client/issues/11463\n      (params as any).hubCount = this.hubCount;\n    }\n    if (this.includeEmpty) {\n      // `includeEmpty` is unsupported for `/hubs` on servers after ~ Feb 2016.\n      // https://github.com/plexinc/plex-media-server/issues/3934\n      (params as any).includeEmpty = 1;\n    }\n    if (this.libraryHubsOnly) {\n      (params as any).libraryHubsOnly = 1;\n    }\n    if (this.includeFeaturedTags) {\n      (params as any).includeFeaturedTags = 1;\n    }\n    if (this.includeLibraryPlaylists) {\n      (params as any).includeLibraryPlaylists = 1;\n    }\n    if (this.includeMeta) {\n      (params as any).includeMeta = 1;\n    }\n    if (this.includeGames) {\n      (params as any).includeGames = 1;\n    }\n    if (this.includeStations) {\n      (params as any).includeStations = 1;\n    }\n    if (this.includeExternalMedia) {\n      (params as any).includeExternalMedia = 1;\n    }\n    if (this.includeExternalMetadata) {\n      (params as any).includeExternalMetadata = 1;\n    }\n    if (this.includeRecentChannels) {\n      (params as any).includeRecentChannels = 1;\n    }\n    if (this.asyncAugmentMetadata) {\n      (params as any).asyncAugmentMetadata = 1;\n    }\n    if (this.wait) {\n      (params as any).wait = 1;\n    }\n    if (this.excludes && this.excludes.length) {\n      this.excludes.forEach((type: any) => {\n        // Format the param (e.g. excludePlaylists=1).\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        params['exclude' + toUpperCaseFirstLetter(type)] = 1;\n      });\n    }\n    return path.join(hubKey, params);\n  },\n  //\n  // Init\n  initialize: function () {\n    if (this.section) {\n      this.listenTo(dispatcher, 'clear:sections:hubs', this.clear);\n    }\n  },\n  //\n  // Control\n  fetch(options = {}) {\n    const fetchOptions = _.clone(options);\n    // Ignore the `onlyTransient` option on initial load.\n    if ((options as any).onlyTransient && this.populatePromise) {\n      // The `onlyTransient` param will return a subset of transient hubs. Do\n      // not remove models from the collection that are not represented in the\n      // subset.\n      (fetchOptions as any).remove = false;\n      (fetchOptions as any).url = path.join(_.result(this, 'url'), {\n        onlyTransient: 1,\n      });\n    }\n    return AbstractCollection.prototype.fetch.call(this, fetchOptions);\n  },\n  augmentResponseText(responseText: any, responseType: any) {\n    return responseType === responseTypes.xml\n      ? // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n        replaceMetadataXMLElementNames(responseText)\n      : responseText;\n  },\n  augmentResponse(json: any) {\n    const rootPropertyName = this.model.prototype.rootPropertyName;\n    if (json && rootPropertyName) {\n      if (Array.isArray(json)) {\n        // `json` value for movie extras hubs is an array.\n        json = { [rootPropertyName]: json };\n      } else if (\n        json[rootPropertyName] &&\n        !Array.isArray(json[rootPropertyName])\n      ) {\n        json = { [rootPropertyName]: [json[rootPropertyName]] };\n      }\n      const Hub = json[rootPropertyName];\n      // Copy MediaContainer.Meta to missing Hub.Meta\n      if (json.Meta) {\n        Hub.forEach((hub: any) => {\n          if (!hub.Meta) {\n            hub.Meta = json.Meta;\n          }\n        });\n      }\n      let count = Hub && Hub.length;\n      if (count) {\n        // The `includeEmpty` and `maxLength` properties work in conjunction to\n        // allow low-end devices to curtail the number of Hubs presented to the\n        // UI. PMS doesn't support limiting the number of hubs returned.\n        if (!this.includeEmpty) {\n          while (count && count--) {\n            const hub = Hub[count];\n            if (CONTENT_HUBS.includes(hub.style) && hub.size <= 0) {\n              Hub.splice(count, 1);\n            }\n          }\n        }\n        if (this.maxLength) {\n          // maxLength of zero is unsupported.\n          Hub.splice(this.maxLength);\n        }\n        if (json.size > Hub.length) {\n          // Keep the `size` member up to date for a seamless mutation.\n          json.size = String(Hub.length);\n        }\n        if (this.count) {\n          Hub.forEach((hub: any) => {\n            if (hub.more && hub.size > this.count) {\n              hub.Metadata.splice(this.count, hub.size - this.count);\n              hub.size = this.count;\n            }\n          });\n        }\n      }\n    }\n    // These need to be set before relations are parsed so each metadata item\n    // has the proper context on instantiation.\n    this.responseContext.forEach((contextName: any) => {\n      const context = json[contextName];\n      if (context !== undefined) {\n        this.setContext(contextName, context);\n      }\n    });\n    return json;\n  },\n});\nexport default HubCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport replaceMetadataXMLElementNames from 'app/js/utils/parser/replaceMetadataXMLElementNames';\nimport parser2 from 'app/js/utils/parser2';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport MetadataListModel from './MetadataListModel';\n// See: https://docs.plex.tv/docs/api/media-providers#header-hub\n// See: https://docs.plex.tv/docs/api/media-providers#header-discovery-hubs\nconst HubModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'HubModel',\n  context: [\n    'server',\n    'provider',\n    'section',\n    'identifier',\n    'allowSync',\n    'includeExternalMedia',\n  ],\n  entityType: entityTypes.HUB,\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    return createEntityID(\n      this.entityType,\n      state.key || state.hubKey || state.hubIdentifier,\n      this.provider.entityID()\n    );\n  },\n  idAttribute: 'hubIdentifier',\n  rootPropertyName: 'Hub',\n  responseType() {\n    return getSupportedResponseType(this.server);\n  },\n  url() {\n    return this.get('key') || this.get('hubKey');\n  },\n  syncedAttrs: {\n    // `key` is a required attribute to build the entity ID. Although the `url`\n    // property resolution requires treating `key` as optional. When `hubKey`\n    // support is removed from `url()` the `key` attribute should be required.\n    // See: https://github.com/plexinc/plex-web-client/issues/7792\n    key: attrTypes.string,\n    hubKey: attrTypes.string,\n    hubIdentifier: attrTypes.string,\n    source: attrTypes.string,\n    title: attrTypes.string,\n    summary: attrTypes.string,\n    icon: attrTypes.string,\n    thumb: attrTypes.string,\n    attribution: attrTypes.string,\n    type: attrTypes.string,\n    subtype: attrTypes.string,\n    style: attrTypes.string,\n    size: attrTypes.integer,\n    totalSize: attrTypes.integer,\n    more: attrTypes.boolean,\n    random: attrTypes.boolean,\n    browse: attrTypes.boolean,\n    upNext: attrTypes.boolean,\n    context: attrTypes.string,\n    promoted: attrTypes.boolean,\n    autoAdvanceDelayMs: attrTypes.integer,\n    // This is bolted-on to support Meta.DisplayFields, and doesn't use the full\n    // MetaModel.\n    Meta: attrTypes.object,\n  },\n  syncedRelations: {\n    metadataList: {\n      relationClass: MetadataListModel,\n      deferred: true,\n    },\n  },\n  //\n  // Init\n  initialize() {\n    this.listenTo(\n      this.get('metadataList'),\n      'change:populatedRange',\n      this.onPopulatedRangeChange\n    );\n  },\n  //\n  // Control\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'responseText' implicitly has an 'any' t... Remove this comment to see the full error message\n  augmentResponseText(responseText, responseType) {\n    return responseType === responseTypes.xml\n      ? // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n        replaceMetadataXMLElementNames(responseText)\n      : responseText;\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'response' implicitly has an 'any' type.\n  augmentResponse(response) {\n    const totalSize =\n      response.totalSize == null\n        ? undefined\n        : parser2.parseInteger(response.totalSize);\n    const size = parser2.parseInteger(response.size) || 0;\n    const containerKey = response.key || response.hubKey;\n    response.metadataList = {\n      containerKey,\n      Metadata: response.Metadata,\n      size,\n      totalSize,\n    };\n    return response;\n  },\n  //\n  // Listeners\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'listModel' implicitly has an 'any' type... Remove this comment to see the full error message\n  onPopulatedRangeChange(listModel, populatedRange) {\n    // Keep the hub size in sync with the size of the metadata list since the\n    // list is fetched separate from the hub. This can help us know when a hub\n    // has been emptied or populated and needs to be hidden or shown.\n    const size = populatedRange.size;\n    const totalSize = listModel.get('totalSize');\n    const attrs = { size };\n    if (totalSize != null) {\n      (attrs as any).more = totalSize > size;\n    }\n    this.set(attrs);\n  },\n});\nexport default HubModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport replaceMetadataXMLElementNames from 'app/js/utils/parser/replaceMetadataXMLElementNames';\nimport MetadataModel from './MetadataModel';\n\nconst MetadataCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'MetadataCollection',\n\n  context: [\n    'server',\n    'provider',\n    'section',\n    'playlist',\n    'identifier',\n    'mediaTagPrefix',\n    'mediaTagVersion',\n    'allowSync',\n    'containerKey',\n    'includeExternalMedia',\n  ],\n\n  model: MetadataModel,\n\n  responseType() {\n    return getSupportedResponseType(this.server);\n  },\n\n  url() {\n    return this.containerKey;\n  },\n\n  //\n  // Control\n\n  augmentResponseText(responseText: any, responseType: any) {\n    return responseType === responseTypes.xml\n      ? // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n        replaceMetadataXMLElementNames(responseText)\n      : responseText;\n  },\n\n  splitByType: function () {\n    const byType = {};\n\n    // Sort the items into the object based on the type.\n    this.each((metadataItem: any) => {\n      const type = metadataItem.get('type');\n\n      if (byType.hasOwnProperty(type)) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        byType[type].push(metadataItem);\n      } else {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        byType[type] = [metadataItem];\n      }\n    });\n\n    return byType;\n  },\n});\n\nexport default MetadataCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst OperatorModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'OperatorModel',\n  context: ['server'],\n\n  idAttribute: 'key',\n  rootPropertyName: 'Operator',\n\n  syncedAttrs: {\n    key: attrTypes.string,\n    title: attrTypes.string,\n  },\n});\n\nexport default OperatorModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport OperatorModel from './OperatorModel';\n\nconst OperatorCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'OperatorCollection',\n  context: ['server'],\n\n  model: OperatorModel,\n});\n\nexport default OperatorCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport OperatorCollection from './OperatorCollection';\n\nconst MetadataFieldTypeModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'MetadataFieldTypeModel',\n  context: ['server'],\n\n  idAttribute: 'type',\n  rootPropertyName: 'FieldType',\n\n  syncedAttrs: {\n    type: attrTypes.string.isRequired,\n  },\n\n  syncedRelations: {\n    operators: {\n      relationClass: OperatorCollection,\n      rootPropertyName: 'Operator',\n    },\n  },\n});\n\nexport default MetadataFieldTypeModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport MetadataFieldTypeModel from './MetadataFieldTypeModel';\n\nconst MetadataFieldTypeCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'MetadataTypeCollection',\n  context: ['server'],\n\n  model: MetadataFieldTypeModel,\n});\n\nexport default MetadataFieldTypeCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst FieldModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'FieldModel',\n  context: ['server'],\n\n  idAttribute: 'key',\n  rootPropertyName: 'Field',\n\n  syncedAttrs: {\n    key: attrTypes.string,\n    title: attrTypes.string,\n    type: attrTypes.string,\n    subType: attrTypes.string,\n  },\n});\n\nexport default FieldModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport FieldModel from './FieldModel';\n\nconst FieldCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'FieldCollection',\n  context: ['server'],\n\n  model: FieldModel,\n});\n\nexport default FieldCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport FieldCollection from './FieldCollection';\nimport FilterCollection from './FilterCollection';\nimport SortCollection from './SortCollection';\n\nconst MetadataTypeModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'MetadataTypeModel',\n  context: ['server'],\n\n  idAttribute: 'key',\n  rootPropertyName: 'Type',\n\n  syncedAttrs: {\n    type: attrTypes.string,\n    subtype: attrTypes.string,\n    key: attrTypes.string,\n    title: attrTypes.string,\n    context: attrTypes.string,\n  },\n\n  syncedRelations: {\n    filters: {\n      relationClass: FilterCollection,\n      rootPropertyName: 'Filter',\n    },\n\n    sorts: {\n      relationClass: SortCollection,\n      rootPropertyName: 'Sort',\n    },\n\n    fields: {\n      relationClass: FieldCollection,\n      rootPropertyName: 'Field',\n    },\n  },\n});\n\nexport default MetadataTypeModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport MetadataTypeModel from './MetadataTypeModel';\n\nconst MetadataTypeCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'MetadataTypeCollection',\n  context: ['server'],\n\n  model: MetadataTypeModel,\n});\n\nexport default MetadataTypeCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport MetadataFieldTypeCollection from 'app/js/models/library/section/MetadataFieldTypeCollection';\nimport MetadataTypeCollection from 'app/js/models/library/section/MetadataTypeCollection';\n\nconst MetaModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'MetaModel',\n\n  context: ['server', 'provider'],\n\n  syncedAttrs: {\n    DisplayFields: attrTypes.array,\n  },\n\n  syncedRelations: {\n    types: {\n      relationClass: MetadataTypeCollection,\n      rootPropertyName: 'Type',\n    },\n\n    fieldTypes: {\n      relationClass: MetadataFieldTypeCollection,\n      rootPropertyName: 'FieldType',\n    },\n  },\n});\n\nexport default MetaModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport paginatedListModelMixin from 'app/js/models/mixins/paginatedListModelMixin';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport replaceMetadataXMLElementNames from 'app/js/utils/parser/replaceMetadataXMLElementNames';\nimport parser2 from 'app/js/utils/parser2';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport path from 'app/js/utils/url/path';\nimport MetaModel from './MetaModel';\nimport MetadataCollection from './MetadataCollection';\n\nconst MetadataListModel = AbstractModel.extend({\n  mixins: [paginatedListModelMixin],\n  //\n  // Properties\n  name: 'MetadataListModel',\n  context: [\n    'server',\n    'provider',\n    'section',\n    'metadataItem',\n    'identifier',\n    'mediaTagPrefix',\n    'mediaTagVersion',\n    'allowSync',\n    'excludeFields',\n    'excludeElements',\n    'excludeAllLeaves',\n    'includeRelated',\n    'includeCollections',\n    'includeExternalMedia',\n    'includeAdvanced',\n    'includeMeta',\n  ],\n  responseContext: [\n    'identifier',\n    'mediaTagPrefix',\n    'mediaTagVersion',\n    'allowSync',\n  ],\n  entityType: entityTypes.METADATA_LIST,\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    return createEntityID(\n      this.entityType,\n      state.entityKey || state.containerKey || state.key || this.cid,\n      (this.provider || this.server).entityID()\n    );\n  },\n  idAttribute: 'containerKey',\n  collectionName: 'metadataItems',\n  responseType() {\n    return getSupportedResponseType(this.server);\n  },\n  url() {\n    const paginatedUrl = this.getPaginatedUrl(\n      this.get('containerKey') || this.get('key')\n    );\n    const params = {\n      excludeElements: this.excludeElements ? this.excludeElements : undefined,\n      excludeFields: this.excludeFields ? this.excludeFields : undefined,\n      excludeAllLeaves: this.excludeAllLeaves ? 1 : undefined,\n      includeRelated: this.includeRelated ? 1 : undefined,\n      includeCollections: this.includeCollections ? 1 : undefined,\n      includeExternalMedia: this.includeExternalMedia ? 1 : undefined,\n      includeAdvanced: this.includeAdvanced ? 1 : undefined,\n      includeMeta: this.includeMeta ? 1 : undefined,\n    };\n    return paginatedUrl ? path.join(paginatedUrl, params) : paginatedUrl;\n  },\n  sessionAttrs: {\n    // Prefer `containerKey` instead of `key` since the `key` attribute that\n    // exists when fetching children is the `ratingKey`, which would override\n    // our valid `key` value. We need `containerKey` to be stable.\n    isMetadataList: attrTypes.boolean,\n    entityKey: attrTypes.string,\n    containerKey: attrTypes.string,\n    containerTitle: attrTypes.string,\n    currentPageStart: attrTypes.integer,\n    currentPageSize: attrTypes.integer,\n    populatedRange: attrTypes.object,\n    isPending: attrTypes.boolean,\n    isPopulated: attrTypes.boolean,\n    error: attrTypes.object,\n  },\n  syncedAttrs: {\n    isDirectoryList: attrTypes.boolean,\n    isMetaPopulated: attrTypes.boolean,\n    key: attrTypes.string,\n    librarySectionID: attrTypes.string,\n    totalSize: attrTypes.integer,\n    viewGroup: attrTypes.string,\n    title: attrTypes.string,\n    thumb: attrTypes.string,\n    art: attrTypes.string,\n    banner: attrTypes.string,\n    theme: attrTypes.string,\n    allowSync: attrTypes.boolean,\n  },\n  syncedRelations: {\n    metadataItems: {\n      relationClass: MetadataCollection,\n      rootPropertyName: 'Metadata',\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'data' implicitly has an 'any' type.\n      options(data) {\n        return {\n          containerKey: data.containerKey || data.key,\n        };\n      },\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'parseOptions' implicitly has an 'any' t... Remove this comment to see the full error message\n      setOptions(parseOptions) {\n        // `fetchRange` will add these options, which we'll need to provide when\n        // setting models for the collection.\n        return {\n          remove: parseOptions.remove,\n          at: parseOptions.at,\n        };\n      },\n    },\n    meta: {\n      relationClass: MetaModel,\n      rootPropertyName: 'Meta',\n      deferred: true,\n    },\n  },\n  derivedAttrs: {\n    firstItemType() {\n      const firstItem = (this as any).getCollection().first();\n      // If the list is reset, use the last known value. Avoid `get` since we\n      // don't want a listener to its own changes.\n      return firstItem\n        ? firstItem.get('type')\n        : (this as any).attributes.firstItemType;\n    },\n    firstItemSubtype() {\n      const firstItem = (this as any).getCollection().first();\n      // If the list is reset, use the last known value. Avoid `get` since we\n      // don't want a listener to its own changes.\n      return firstItem\n        ? firstItem.get('subtype')\n        : (this as any).attributes.firstItemSubtype;\n    },\n    isFirstItemLibraryItem() {\n      const firstItem = (this as any).getCollection().first();\n      // If the list is reset, use the last known value. Avoid `get` since we\n      // don't want a listener to its own changes.\n      return firstItem\n        ? firstItem.get('isLibraryItem')\n        : (this as any).attributes.isFirstItemLibraryItem;\n    },\n    isChannelsList() {\n      const firstItem = (this as any).getCollection().first();\n      // If the list is reset, use the last known value. Avoid `get` since we\n      // don't want a listener to its own changes.\n      return firstItem\n        ? firstItem.get('dvrChannel')\n        : (this as any).attributes.isChannelsList;\n    },\n  },\n  defaults() {\n    return {\n      isMetadataList: true,\n      isDirectoryList: false,\n      populatedRange: {\n        start: 0,\n        end: 0,\n        size: 0,\n      },\n      isPending: true,\n      isPopulated: false,\n      isMetaPopulated: false,\n      error: null,\n    };\n  },\n  //\n  // Init\n  // @ts-expect-error ts-migrate(6133) FIXME: 'attributes' is declared but its value is never re... Remove this comment to see the full error message\n  initialize(attributes) {\n    this._totalSizeAdjustment = 0;\n    this.startPopulatedRangeMonitor();\n    this.on('change:key change:containerKey', this.onContainerKeyChange, this);\n  },\n  uninitialize() {\n    this.off('change:key change:containerKey', this.onContainerKeyChange, this);\n    this.stopListening();\n  },\n  //\n  // Control\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'responseText' implicitly has an 'any' t... Remove this comment to see the full error message\n  augmentResponseText(responseText, responseType) {\n    // By Folder requests use type-less <Directory> elements inline with\n    // metadata items. This means that we need to parse all directories as\n    // metadata items instead of just directories with known metadata types.\n    const key = this.get('containerKey') || this.get('key');\n    const includeDirectories = /\\/folder(\\?|$)/.test(key);\n    return responseType === responseTypes.xml\n      ? replaceMetadataXMLElementNames(responseText, { includeDirectories })\n      : responseText;\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'response' implicitly has an 'any' type.\n  augmentResponse(response, options) {\n    // These need to be set before relations are parsed so each metadata item\n    // has the proper context on instantiation.\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'contextName' implicitly has an 'any' ty... Remove this comment to see the full error message\n    this.responseContext.forEach((contextName) => {\n      const context = response[contextName];\n      if (context !== undefined) {\n        this.setContext(contextName, context);\n      }\n    });\n    const metadataItems = parser2.parseArray(response.Metadata);\n    const directoryItems = parser2.parseArray(response.Directory);\n    const totalSize = parser2.parseInteger(response.totalSize);\n    // The All Leaves (e.g. All Episodes) shortcuts introduce all kinds of\n    // problems because their keys and types are not standard.\n    if (!this.allowAllLeaves) {\n      response.Metadata = _.reject(\n        metadataItems,\n        function (item) {\n          const isAllLeaves = /\\/allLeaves$/.test(item.key);\n          if (isAllLeaves) {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this._totalSizeAdjustment -= 1;\n          }\n          return isAllLeaves;\n        },\n        this\n      );\n    }\n    if (!metadataItems.length && response.Directory) {\n      response.Metadata = directoryItems;\n      response.isDirectoryList = true;\n    }\n    if (this.includeMeta) {\n      response.isMetaPopulated = true;\n    }\n    if (totalSize && this._totalSizeAdjustment) {\n      response.totalSize = totalSize - this._totalSizeAdjustment;\n    }\n    // When fetching the library /all endpoint, there is no `title` attribute,\n    // but there is a `title1` attribute. Without a list title, we can't provide\n    // a suggested title in the sync or optimize modals.\n    if (!response.title && response.title1) {\n      response.title = response.title1;\n    }\n    return response;\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'model' is declared but its value is never read.\n  onContainerKeyChange(model, containerKey) {\n    // The `containerKey` will change when a metadata item parses its\n    // `childrenKey` and sets the value on its `children` relation.\n    const metadataItems = this.get('metadataItems');\n    const context = this.syncedRelations.metadataItems.options(this.attributes);\n    _.each(context, (value, key) => {\n      metadataItems.setContext(key, value);\n    });\n  },\n});\nexport default MetadataListModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst TranscodeSessionModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'TranscodeSessionModel',\n  context: ['server'],\n\n  url() {\n    return '/transcode/sessions/' + this.id;\n  },\n\n  syncedAttrs: {\n    key: attrTypes.string,\n    progress: attrTypes.float,\n    throttled: attrTypes.boolean,\n    speed: attrTypes.float,\n    duration: attrTypes.integer,\n    videoDecision: attrTypes.string, // (copy|transcode)\n    audioDecision: attrTypes.string, // (copy|transcode)\n    protocol: attrTypes.string,\n    container: attrTypes.string,\n    videoCodec: attrTypes.string,\n    audioCodec: attrTypes.string,\n    audioChannels: attrTypes.integer,\n    width: attrTypes.string,\n    height: attrTypes.string,\n    transcodeHwDecoding: attrTypes.string,\n    transcodeHwEncoding: attrTypes.string,\n    timeStamp: attrTypes.integer,\n    minOffsetAvailable: attrTypes.integer,\n    maxOffsetAvailable: attrTypes.integer,\n  },\n});\n\nexport default TranscodeSessionModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ChapterModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ChapterModel',\n  context: ['server', 'section'],\n\n  syncedAttrs: {\n    id: attrTypes.integer,\n    tag: attrTypes.string,\n    index: attrTypes.integer,\n    startTimeOffset: attrTypes.integer,\n    endTimeOffset: attrTypes.integer,\n    thumb: attrTypes.string,\n  },\n});\n\nexport default ChapterModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ChapterModel from './ChapterModel';\n\nconst ChapterCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ChapterCollection',\n  context: ['server', 'section'],\n\n  model: ChapterModel,\n\n  modelId(attrs: any) {\n    return `${attrs.id}_${attrs.index}`;\n  },\n});\n\nexport default ChapterCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ConcertModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ConcertModel',\n  context: ['server', 'section'],\n\n  syncedAttrs: {\n    id: attrTypes.integer,\n    at: attrTypes.integer,\n    tag: attrTypes.string,\n    venue: attrTypes.string,\n    city: attrTypes.string,\n    country: attrTypes.string,\n    url: attrTypes.string,\n  },\n});\n\nexport default ConcertModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ConcertModel from './ConcertModel';\n\nconst ConcertCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ConcertCollection',\n  context: ['server', 'section'],\n\n  model: ConcertModel,\n});\n\nexport default ConcertCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport attrTypes from 'app/js/models/attrTypes';\nimport MetadataModel from 'app/js/models/metadata/MetadataModel';\nimport preserveMergeStrategy from 'app/js/models/preserveMergeStrategy';\nimport mapToObject from 'app/js/utils/array/mapToObject';\nimport * as providerProtocols from 'app/js/utils/constants/providerProtocols';\nimport getLiveTVMediaItemID from 'app/js/utils/livetv/getLiveTVMediaItemID';\n\nconst unreliableAttributes = {\n  guid: true,\n  librarySectionID: true,\n  librarySectionTitle: true,\n  librarySectionUUID: true,\n  librarySectionKey: true,\n  source: true,\n  // Preserving Context maintains displayFields, which would otherwise be lost\n  // when the same item appears in different hubs.\n  Context: true,\n\n  // Common excludeFields\n  file: true,\n  summary: true,\n  tagline: true,\n  action: true,\n  attributionLogo: true,\n  backgroundColor: true,\n};\n\nfunction getStreamCount(mediaItems: any) {\n  let streamCount = 0;\n\n  if (!mediaItems) {\n    return streamCount;\n  }\n\n  for (\n    let i = 0, mediaItemsLength = mediaItems.length;\n    i < mediaItemsLength;\n    i++\n  ) {\n    const mediaItem = mediaItems[i];\n    const parts = mediaItem.Part;\n\n    if (parts) {\n      for (let j = 0, partsLength = parts.length; j < partsLength; j++) {\n        const part = parts[j];\n        const streams = part.Stream;\n\n        if (streams) {\n          streamCount += streams.length;\n        }\n      }\n    }\n  }\n\n  return streamCount;\n}\n\nfunction isMediaLiveTVProtocol(mediaItems: any) {\n  return (\n    mediaItems &&\n    mediaItems.some(\n      (mediaItem: any) => mediaItem.protocol === providerProtocols.LIVE_TV\n    )\n  );\n}\n\nfunction isMediaLiveTVOrigin(mediaItems: any) {\n  // Identify LTVoP items. These LTVoP items do not have the livetv protocol.\n  return (\n    mediaItems &&\n    mediaItems.some((mediaItem: any) => mediaItem.origin === 'livetv')\n  );\n}\n\nfunction getLiveTVMediaItems(mediaItems = []) {\n  // Live TV Media items can be duplicated with different IDs when a refresh occurs. We should\n  // use the channel and airing time for uniqueness instead, as that should remain unchanged\n  // between refreshes.\n  // See: https://github.com/plexinc/plex-web-client/issues/11386\n\n  return mapToObject(\n    mediaItems,\n    getLiveTVMediaItemID,\n    (mediaItem: any) => mediaItem\n  );\n}\n\nfunction mergeLiveTVMedia(previousValue: any, nextValue: any) {\n  if (!nextValue) {\n    return null;\n  }\n\n  // For grid items, we don't want to clear the `Media` array when new items are fetched. We want\n  // to merge them with the old ones because the grid is paginated. If we throw away old Media\n  // items, then items already fetched on the grid will get tossed out if the same show happens\n  // to show up in the grid again.\n\n  const previousMediaItems = getLiveTVMediaItems(previousValue);\n  const nextMediaItems = getLiveTVMediaItems(nextValue);\n\n  const mergedMediaItemsByID = {\n    ...previousMediaItems,\n    ...nextMediaItems,\n  };\n\n  for (const identifier in previousMediaItems) {\n    const previousMediaItem = previousMediaItems[identifier];\n    const nextMediaItem = nextMediaItems[identifier];\n\n    if (\n      previousMediaItem &&\n      nextMediaItem &&\n      previousMediaItem.Overlay.length &&\n      !nextMediaItem.Overlay.length\n    ) {\n      // LTVoP Media Overlay information is only available when fetching the\n      // grid and not when tuning the channel.\n      // See: https://plex.slack.com/archives/CDJQWUUUC/p1593732566347100?thread_ts=1593626370.317800&cid=CDJQWUUUC\n      mergedMediaItemsByID[identifier] = {\n        ...mergedMediaItemsByID[identifier],\n        Overlay: previousMediaItem.Overlay,\n      };\n    }\n\n    const prevStreamCount = previousMediaItem?.Part?.[0]?.Stream?.length ?? 0;\n    const nextStreamCount = nextMediaItem?.Part?.[0]?.Stream?.length ?? 0;\n\n    // LTVoP subtitle streams are only available when tuning the channel, not\n    // when fetching the grid. We must avoid grid requests erasing available\n    // streams during playback.\n    if (\n      previousMediaItem &&\n      nextMediaItem &&\n      prevStreamCount > nextStreamCount\n    ) {\n      mergedMediaItemsByID[identifier] = {\n        ...mergedMediaItemsByID[identifier],\n        Part: previousMediaItem.Part,\n      };\n    }\n  }\n\n  return Object.keys(mergedMediaItemsByID).map(\n    (id) => mergedMediaItemsByID[id]\n  );\n}\n\nfunction mergeMetadataMedia(previousValue: any, nextValue: any) {\n  const nextStreamCount = getStreamCount(nextValue);\n  const previousStreamCount = getStreamCount(previousValue);\n\n  return nextStreamCount || !previousStreamCount ? nextValue : previousValue;\n}\n\nfunction mergeMediaAttribute(key: any, previousValue: any, nextValue: any) {\n  // If the next media items have streams, then it should replace the previous\n  // value. Partial metadata items will not have streams, so we want to avoid\n  // overwriting media items with streams with media items with no streams.\n\n  if (nextValue && !previousValue) {\n    return nextValue;\n  }\n\n  const isLiveTV =\n    isMediaLiveTVProtocol(nextValue || previousValue) ||\n    isMediaLiveTVOrigin(nextValue || previousValue);\n\n  const mergeResult = isLiveTV\n    ? mergeLiveTVMedia(previousValue, nextValue)\n    : mergeMetadataMedia(previousValue, nextValue);\n\n  if (mergeResult) {\n    return mergeResult;\n  }\n\n  return preserveMergeStrategy(key, previousValue, nextValue);\n}\n\nfunction isFullTag(tag: any) {\n  return (\n    (tag.hasOwnProperty('ratingKey') || tag.hasOwnProperty('id')) &&\n    tag.hasOwnProperty('tag')\n  );\n}\n\n// @ts-expect-error ts-migrate(6133) FIXME: 'key' is declared but its value is never read.\nfunction mergeTagAttribute(key: any, previousValue: any, nextValue: any) {\n  // If either more tags are in the next value or it has the same amount of\n  // tags, but each tag has more properties, then overwrite the previous tags.\n\n  if (!nextValue) {\n    return previousValue;\n  }\n\n  if (!previousValue) {\n    return nextValue;\n  }\n\n  if (nextValue.length > previousValue.length) {\n    return nextValue;\n  }\n\n  if (!nextValue.length || nextValue.length < previousValue.length) {\n    return previousValue;\n  }\n\n  const firstPreviousTag = previousValue && previousValue[0];\n  const firstNextTag = nextValue && nextValue[0];\n\n  if (!firstPreviousTag && firstNextTag) {\n    return nextValue;\n  }\n\n  if (!firstNextTag && firstPreviousTag) {\n    return previousValue;\n  }\n\n  const isFirstPreviousTagFull = isFullTag(firstPreviousTag);\n  const isFirstNextTagFull = isFullTag(firstNextTag);\n\n  return isFirstPreviousTagFull && !isFirstNextTagFull\n    ? previousValue\n    : nextValue;\n}\n\nfunction isArrayAttribute(key: any) {\n  const attrType = MetadataModel.prototype.syncedAttrs[key];\n\n  return !!(attrType && attrType === attrTypes.array);\n}\n\nfunction isRelation(key: any) {\n  return !!MetadataModel.prototype.syncedRelations[key];\n}\n\nexport default function metadataMergeStrategy(\n  key: any,\n  previousValue: any,\n  nextValue: any\n) {\n  if (key === 'Media') {\n    return mergeMediaAttribute(key, previousValue, nextValue);\n  }\n\n  if (isArrayAttribute(key)) {\n    return mergeTagAttribute(key, previousValue, nextValue);\n  }\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  if (isRelation(key) || unreliableAttributes[key]) {\n    return preserveMergeStrategy(key, previousValue, nextValue);\n  }\n\n  return nextValue;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport TranscodeSessionModel from 'app/js/models/server/TranscodeSessionModel';\nimport MediaSettingCollection from 'app/js/models/subscription/MediaSettingCollection';\nimport ModelCache from 'app/js/utils/cache/ModelCache';\nimport * as agentIdentifiers from 'app/js/utils/constants/agentIdentifiers';\nimport { NONE } from 'app/js/utils/constants/player/subtitleStreamIDs';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport getSelectedVideo from 'app/js/utils/media/getSelectedVideo';\nimport createSourceFromIdentifiers from 'app/js/utils/metadata/createSourceFromIdentifiers';\nimport getIdentifiersFromSource from 'app/js/utils/metadata/getIdentifiersFromSource';\nimport isLibraryItem from 'app/js/utils/metadata/isLibraryItem';\nimport parser from 'app/js/utils/parser';\nimport replaceMetadataXMLElementNames from 'app/js/utils/parser/replaceMetadataXMLElementNames';\nimport parser2 from 'app/js/utils/parser2';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport t from 'app/js/utils/t';\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\nimport * as playlistTypes from 'app/js/utils/types/playlistTypes';\nimport streamTypes from 'app/js/utils/types/streamTypes';\nimport path from 'app/js/utils/url/path';\nimport ChapterCollection from './ChapterCollection';\nimport ConcertCollection from './ConcertCollection';\nimport metadataMergeStrategy from './metadataMergeStrategy';\n\n// @ts-expect-error ts-migrate(7006) FIXME: Parameter 'object' implicitly has an 'any' type.\nfunction tryConvertToString(object, attributes) {\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'attribute' implicitly has an 'any' type... Remove this comment to see the full error message\n  attributes.forEach((attribute) => {\n    if (object?.[attribute] != null && typeof object[attribute] !== 'string') {\n      object[attribute] = object[attribute].toString();\n    }\n  });\n}\nconst MetadataModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'MetadataModel',\n  context: [\n    ['server', { boundDerivedAttrs: ['serverEntityID'] }],\n    ['provider', { boundDerivedAttrs: ['providerEntityID'] }],\n    'section',\n    'playlist',\n    'identifier',\n    'mediaTagPrefix',\n    'mediaTagVersion',\n    'allowSync',\n    'containerKey',\n    // Options passed along to HubCollection relation.\n    'relatedOptions',\n    'includeExternalMedia',\n  ],\n  responseContext: [\n    'identifier',\n    'mediaTagPrefix',\n    'mediaTagVersion',\n    'allowSync',\n  ],\n  entityType: entityTypes.METADATA_ITEM,\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    let sourceServerEntityID;\n    if (state.source) {\n      const { serverIdentifier } = getIdentifiersFromSource(state.source);\n      // Avoid double server entityIDs for MetadataModel to ensure stable entities\n      if (serverIdentifier !== this.server.get('machineIdentifier')) {\n        sourceServerEntityID = createEntityID(\n          entityTypes.SERVER,\n          serverIdentifier\n        );\n      }\n    }\n    return createEntityID(\n      this.entityType,\n      state.key || this.cid,\n      sourceServerEntityID,\n      this.server.entityID()\n    );\n  },\n  idAttribute: 'ratingKey',\n  rootPropertyName: 'Metadata',\n  cache: new ModelCache(),\n  mergeStrategy: metadataMergeStrategy,\n  responseType() {\n    const key = this.get('key');\n    // See: https://github.com/plexinc/plex-media-server/issues/8244\n    if (key && key.indexOf('/system/services/url/lookup') > -1) {\n      return responseTypes.xml;\n    }\n    return getSupportedResponseType(this.server);\n  },\n  url() {\n    const params = {};\n    if (this.includeExternalMedia) {\n      (params as any).includeExternalMedia = 1;\n    }\n    return path.join(this.get('key'), params);\n  },\n  urlRoot() {\n    return this.get('key');\n  },\n  saveUrl() {\n    // If this model is a playlist from /playlists it will have an unsuitable\n    // URL for PUTing the changes back\n    // PMS issue: https://github.com/plexinc/plex-media-server/issues/7238\n    if (this.get('isPlaylist') && !this.server.supports('truePlaylistsPath')) {\n      // See similar playlist key translation from /playlists/:ratingKey to /library/metadata/:ratingKey in:\n      // - app/common/js/models/library/PlaylistModel.ts#saveUrl()\n      // - app/desktop/common/js/models/library/ArtworkCollection.ts#url()\n      return `/library/metadata/${this.get('ratingKey')}`;\n    }\n    return _.result(this, 'url');\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'attributes' implicitly has an 'any' typ... Remove this comment to see the full error message\n  cacheKey(attributes) {\n    // Don't use /children in the cache key because we will remove that part of\n    // the key when parsing the model anyway and it can lead to the same model\n    // being cached with different keys.\n    const result = this.extractChildrenKey(attributes.key);\n    if (attributes.source) {\n      result.key = attributes.source + result.key;\n    }\n    return this.server && this.server.getScopedKey(result.key);\n  },\n  sessionAttrs: {\n    isInUniversalWatchlist: attrTypes.boolean.isRequired,\n    isInUniversalWatchlistFetched: attrTypes.boolean.isRequired,\n    isPreFetched: attrTypes.boolean,\n    isStreamChangeInProgress: attrTypes.boolean,\n    isStreamDeleteInProgress: attrTypes.boolean,\n    metadataState: attrTypes.string,\n    mediaState: attrTypes.string,\n    isSettingsUpdating: attrTypes.boolean,\n    settingsUpdateError: attrTypes.object,\n    dvrChannel: attrTypes.object,\n    viewCountIncrementedByPlayQueueItemID: attrTypes.string,\n    // Once upon a time Desktop's download feature manually managed metadata\n    // model's subscriptionID and subscriptionType attributes. This broke due to\n    // the metadataMergeStrategy's approach. When displaying the preplay for a\n    // downloaded podcast episode a list of siblings is fetched in order to\n    // display the previous and next buttons. The downloaded podcast is one of\n    // the returned metadata items; it will not have the manually managed\n    // download subscriptionID. The merge strategy will intentionally overwrite\n    // the local attribute with the newly received attribute. Instead of making\n    // the merge strategy more complex we're forking and making unique\n    // attributes.\n    downloadSubscriptionID: attrTypes.string,\n    isDownloaded: attrTypes.boolean,\n  },\n  syncedAttrs: {\n    elementName: attrTypes.string,\n    ratingKey: attrTypes.string,\n    parentRatingKey: attrTypes.string,\n    grandparentRatingKey: attrTypes.string,\n    key: attrTypes.string,\n    childrenKey: attrTypes.string,\n    Context: attrTypes.object,\n    parentKey: attrTypes.string,\n    grandparentKey: attrTypes.string,\n    primaryExtraKey: attrTypes.string,\n    augmentationKey: attrTypes.string,\n    guid: attrTypes.string,\n    primaryGuid: attrTypes.string,\n    source: attrTypes.string,\n    sourceURI: attrTypes.string,\n    attribution: attrTypes.string,\n    attributionLogo: attrTypes.string,\n    action: attrTypes.string,\n    backgroundColor: attrTypes.string,\n    remoteMedia: attrTypes.boolean,\n    librarySectionID: attrTypes.string,\n    librarySectionTitle: attrTypes.string,\n    librarySectionUUID: attrTypes.string,\n    librarySectionKey: attrTypes.string,\n    type: attrTypes.string,\n    subtype: attrTypes.string,\n    title: attrTypes.string,\n    titleSort: attrTypes.string,\n    originalTitle: attrTypes.string,\n    parentTitle: attrTypes.string,\n    grandparentTitle: attrTypes.string,\n    year: attrTypes.string,\n    minYear: attrTypes.string,\n    maxYear: attrTypes.string,\n    tagline: attrTypes.string,\n    summary: attrTypes.string,\n    studio: attrTypes.string,\n    contentRating: attrTypes.string,\n    originallyAvailableAt: attrTypes.string,\n    thumb: attrTypes.string,\n    parentThumb: attrTypes.string,\n    grandparentThumb: attrTypes.string,\n    banner: attrTypes.string,\n    art: attrTypes.string,\n    parentArt: attrTypes.string,\n    grandparentArt: attrTypes.string,\n    hero: attrTypes.string,\n    theme: attrTypes.string,\n    parentTheme: attrTypes.string,\n    grandparentTheme: attrTypes.string,\n    chapterSource: attrTypes.string,\n    ratingImage: attrTypes.string,\n    audienceRating: attrTypes.float,\n    audienceRatingImage: attrTypes.string,\n    directory: attrTypes.boolean,\n    rating: attrTypes.float,\n    userRating: attrTypes.float,\n    playbackSpeed: attrTypes.float,\n    index: attrTypes.integer,\n    parentIndex: attrTypes.integer,\n    absoluteIndex: attrTypes.integer,\n    duration: attrTypes.integer,\n    preview: attrTypes.boolean,\n    viewOffset: attrTypes.integer,\n    viewCount: attrTypes.integer,\n    childCount: attrTypes.integer,\n    leafCount: attrTypes.integer,\n    viewedLeafCount: attrTypes.integer,\n    ratingCount: attrTypes.integer,\n    mediaCount: attrTypes.integer,\n    mediaCountOptimized: attrTypes.integer,\n    extraType: attrTypes.integer,\n    lastViewedAt: attrTypes.integer,\n    lastRatedAt: attrTypes.integer,\n    addedAt: attrTypes.integer,\n    updatedAt: attrTypes.integer,\n    deletedAt: attrTypes.integer,\n    Geolocation: attrTypes.object,\n    // Playlists\n    playlistID: attrTypes.integer,\n    playlistType: attrTypes.string,\n    specialPlaylistType: attrTypes.string,\n    radio: attrTypes.boolean,\n    smart: attrTypes.boolean,\n    readOnly: attrTypes.boolean,\n    icon: attrTypes.string,\n    composite: attrTypes.string,\n    content: attrTypes.string,\n    durationInSeconds: attrTypes.integer,\n    // Providers\n    skipChildren: attrTypes.boolean,\n    skipParent: attrTypes.boolean,\n    skipDetails: attrTypes.boolean,\n    subscriptionID: attrTypes.string,\n    saved: attrTypes.boolean,\n    picked: attrTypes.boolean,\n    grandparentSubscriptionID: attrTypes.string,\n    subscriptionType: attrTypes.string,\n    grandparentSubscriptionType: attrTypes.string,\n    Channel: attrTypes.array,\n    onAir: attrTypes.boolean,\n    watchlistedAt: attrTypes.integer,\n    publicPagesURL: attrTypes.string,\n    // These would ideally be relations, but the `MetadataModel` is requested in\n    // large quantities at high frequencies. Too many relations can hinder\n    // performance, and these were simple candidates that could be worked with\n    // as arrays.\n    Media: attrTypes.array,\n    Collection: attrTypes.array,\n    Director: attrTypes.array,\n    Producer: attrTypes.array,\n    Writer: attrTypes.array,\n    Studio: attrTypes.array,\n    Genre: attrTypes.array,\n    Mood: attrTypes.array,\n    Country: attrTypes.array,\n    Label: attrTypes.array,\n    Role: attrTypes.array,\n    Location: attrTypes.array,\n    Tag: attrTypes.array,\n    Autotag: attrTypes.array,\n    // Array of objects that satisfy markerShape.\n    Marker: attrTypes.array,\n    // Only available on servers newer than approximately 1.17.0. Only included\n    // when `X-Plex-Features` contains `indirect-media`.\n    indirect: attrTypes.boolean,\n    Origin: attrTypes.object,\n    // User needs to consent to targeted ads for VOD content in EU countries (GDPR).\n    requiresConsent: attrTypes.boolean,\n    // Game-only fields.\n    // Example: Platform: [{ id: 401362, filter: \"platform=401362\", tag: \"Nintendo 64\" }]\n    Platform: attrTypes.array,\n    Publisher: attrTypes.array,\n  },\n  syncedRelations: {\n    chapters: {\n      relationClass: ChapterCollection,\n      rootPropertyName: 'Chapter',\n      deferred: true,\n    },\n    preferences: {\n      relationClass: MediaSettingCollection,\n      rootPropertyName: 'Preferences',\n      deferred: true,\n    },\n    onDeck() {\n      return {\n        relationClass: MetadataModel,\n        rootPropertyName: 'OnDeck',\n        deferred: true,\n      };\n    },\n    related() {\n      // Do not allow related items to pull from the cache. This would lead to\n      // the possibility of a cyclic structure since `foo` may be in a related\n      // hub for `bar` and `bar` in a related hub for `foo`. `toJSON` and event\n      // forwarding breaks down in cyclic structures.\n      const options = { skipCache: true };\n      if ((this as any).relatedOptions) {\n        _.extend(options, (this as any).relatedOptions);\n      }\n      return {\n        relationClass: require('./HubCollection').default,\n        rootPropertyName: 'RelatedHubs',\n        deferred: true,\n        options: options,\n      };\n    },\n    popularLeaves() {\n      return {\n        relationClass: require('./MetadataListModel').default,\n        rootPropertyName: 'PopularLeaves',\n        deferred: true,\n      };\n    },\n    extras() {\n      return {\n        relationClass: require('./MetadataListModel').default,\n        rootPropertyName: 'Extras',\n        deferred: true,\n        // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'data' implicitly has an 'any' type.\n        attrs(data) {\n          return {\n            containerKey: path.join([data.key, 'extras']),\n          };\n        },\n      };\n    },\n    concerts: {\n      relationClass: ConcertCollection,\n      rootPropertyName: 'Concert',\n      deferred: true,\n    },\n    stations() {\n      return {\n        relationClass: require('./MetadataCollection').default,\n        rootPropertyName: 'Stations',\n        deferred: true,\n      };\n    },\n    transcodeSession: {\n      relationClass: TranscodeSessionModel,\n      rootPropertyName: 'TranscodeSession',\n      deferred: true,\n    },\n  },\n  derivedAttrs: {\n    identifier() {\n      return this.identifier;\n    },\n    serverEntityID() {\n      // Derived attributes are created regardless of state tree and we can't\n      // safely access entityIDs when there isn't one, such as in specs\n      if (!(this as any).state) {\n        return null;\n      }\n      const source = (this as any).get('source');\n      if (source) {\n        const { serverIdentifier } = getIdentifiersFromSource(source);\n        return createEntityID(entityTypes.SERVER, serverIdentifier);\n      }\n      if ((this as any).server) {\n        return (this as any).server.entityID();\n      }\n      return null;\n    },\n    providerEntityID() {\n      if (!(this as any).state) {\n        return null;\n      }\n      const source = (this as any).get('source');\n      if (source) {\n        const { providerIdentifier } = getIdentifiersFromSource(source);\n        return createEntityID(\n          entityTypes.PROVIDER,\n          providerIdentifier,\n          (this as any).get('serverEntityID')\n        );\n      }\n      if ((this as any).provider) {\n        return (this as any).provider.entityID();\n      }\n      return null;\n    },\n    mediaTagPrefix() {\n      return this.mediaTagPrefix;\n    },\n    mediaTagVersion() {\n      return this.mediaTagVersion;\n    },\n    allowSync() {\n      return this.allowSync;\n    },\n    containerKey() {\n      return this.containerKey;\n    },\n    // @ts-expect-error ts-migrate(7023) FIXME: 'isLibraryItem' implicitly has return type 'any' b... Remove this comment to see the full error message\n    isLibraryItem() {\n      return this.isLibraryItem(\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 2.\n        (this as any).get('identifier'),\n        (this as any).get('key')\n      );\n    },\n    isPlaylist() {\n      return (\n        (this as any).get('type') === metadataTypes.PLAYLIST &&\n        !(this as any).get('radio')\n      );\n    },\n    isFolder() {\n      return /\\/folder\\?parent=/.test((this as any).get('key'));\n    },\n    isExtra() {\n      return !!(this as any).get('extraType');\n    },\n    isPremium() {\n      const mediaItems = (this as any).get('Media') || [];\n      return _.any(mediaItems, (item) => item.premium);\n    },\n    hasRadioStation() {\n      const stations = (this as any).get('stations');\n      return (\n        !!stations &&\n        !!stations.findWhere({ playlistType: playlistTypes.AUDIO })\n      );\n    },\n    hasArtistTVStation() {\n      const stations = (this as any).get('stations');\n      return (\n        !!stations &&\n        !!stations.findWhere({ playlistType: playlistTypes.VIDEO })\n      );\n    },\n    // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n    unviewedLeafCount() {\n      const leafCount = (this as any).get('leafCount');\n      const viewedLeafCount = (this as any).get('viewedLeafCount');\n      if (leafCount) {\n        return leafCount - viewedLeafCount;\n      }\n    },\n    // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n    downloadUrl() {\n      const mediaItems = (this as any).get('Media');\n      if (mediaItems && mediaItems.length === 1) {\n        const part = _.first(_.first(mediaItems).Part);\n        const key = part && part.key;\n        if (key) {\n          // Return a function so the url isn't resolved until needed. This will\n          // help prevent a stale connection from being stuck in the download\n          // url.\n          return () => {\n            const downloadKey = path.join(key, { download: 1 });\n            return (this as any).server.resolveUrl(downloadKey, {\n              appendToken: true,\n            });\n          };\n        }\n      }\n    },\n  },\n  defaults: {\n    isInUniversalWatchlist: false,\n    isInUniversalWatchlistFetched: false,\n    isStreamChangeInProgress: false,\n    isStreamDeleteInProgress: false,\n    isSettingsUpdating: false,\n    isDownloaded: false,\n    settingsUpdateError: null,\n    rating: 0,\n    onAir: false,\n    skipDetails: false,\n    Media: [],\n    Collection: [],\n    Director: [],\n    Producer: [],\n    Writer: [],\n    Studio: [],\n    Genre: [],\n    Mood: [],\n    Country: [],\n    Label: [],\n    Channel: [],\n    Role: [],\n    Location: [],\n    Autotag: [],\n    Tag: [],\n    Platform: [],\n    Publisher: [],\n    requiresConsent: false,\n  },\n  //\n  // Control\n  fetch(options = {}) {\n    if ((options as any).data) {\n      this._populatedParams = _.extend(\n        {},\n        this._populatedParams,\n        (options as any).data\n      );\n    }\n    if ((options as any).usePopulatedParams) {\n      (options as any).data = this._populatedParams;\n    }\n    return AbstractModel.prototype.fetch.call(this, options);\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'responseText' implicitly has an 'any' t... Remove this comment to see the full error message\n  augmentResponseText(responseText, responseType) {\n    return responseType === responseTypes.xml\n      ? // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n        replaceMetadataXMLElementNames(responseText)\n      : responseText;\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'response' implicitly has an 'any' type.\n  augmentResponse(response, responseType) {\n    // Pass some attributes from the root node down to the model.\n    let metadata = response[this.rootPropertyName];\n    if (metadata) {\n      if (Array.isArray(metadata)) {\n        metadata = metadata[0];\n      }\n      // PMS and providers have some attributes at the response root and some\n      // at the top level metadata item\n      const responseAttributes = [\n        'attribution',\n        'augmentationKey',\n        'librarySectionID',\n        'librarySectionTitle',\n        'librarySectionUUID',\n      ];\n      responseAttributes.forEach((attribute) => {\n        if (!metadata[attribute]) {\n          metadata[attribute] = response[attribute];\n        }\n      });\n      if (response.type === metadataTypes.CHANNEL) {\n        metadata.dvrChannel = {\n          identifier: response.identifier || response.id,\n          thumb: response.thumb,\n          title: response.title,\n          callSign: response.callSign,\n        };\n      }\n    }\n    // Context that is passed from a collection may also exist in the response\n    // when fetched individually. It may exist in the response root or in the\n    // top level metadata item (allowSync is such a case)\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'contextName' implicitly has an 'any' ty... Remove this comment to see the full error message\n    this.responseContext.forEach((contextName) => {\n      const context =\n        response[contextName] || (metadata && metadata[contextName]);\n      if (context !== undefined) {\n        this.setContext(contextName, context);\n      }\n    });\n    // Separate the /children key from the key pointing directly at the item.\n    // This allows us to fetch the item and its children separately.\n    const attributes = metadata || response;\n    const related = attributes.Related;\n    const onDeck = attributes.OnDeck;\n    const Stations = attributes.Stations;\n    const preferences = attributes.Preferences;\n    const result = this.extractChildrenKey(attributes.key);\n    if (result.childrenKey) {\n      attributes.childrenKey = result.childrenKey;\n      attributes.key = result.key;\n    }\n    // Without relations, we need to manually handle types of properties within\n    // media and tag items.\n    attributes.Media = this.convertMediaItems(attributes.Media);\n    attributes.Role = this.convertRole(attributes.Role);\n    attributes.Marker = this.convertMarkers(attributes.Marker);\n\n    if (!attributes.source && this.server) {\n      // If the metadata item does not have its own source property, use the\n      // item's server and provider.\n      const source = createSourceFromIdentifiers({\n        providerIdentifier: this.provider?.get('identifier'),\n        serverIdentifier: this.server.get('machineIdentifier'),\n      });\n      attributes.source = source;\n      attributes.sourceURI = `${source}${attributes.key}`;\n    }\n    // Relations expect a single property one level deep. Modify the attributes\n    // to meet those expectations.\n    if (related) {\n      attributes.RelatedHubs = _.compact(\n        [].concat(related.Hub, related.Directory)\n      );\n    }\n    if (onDeck) {\n      attributes.OnDeck = onDeck.Metadata;\n    }\n    if (Stations) {\n      attributes.Stations = Stations.Metadata;\n    }\n    if (preferences) {\n      attributes.Preferences = preferences.Setting;\n    }\n    // PMS isn't consistent with photo album types.\n    if (attributes.type === metadataTypes.PHOTO && attributes.childrenKey) {\n      attributes.type = metadataTypes.PHOTO_ALBUM;\n    }\n    return attributes;\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'key' implicitly has an 'any' type.\n  extractChildrenKey(key) {\n    // Parent metadata items like shows, seasons, artists, etc. have keys that\n    // ends with `/children`, while playlists have keys that end with `/items`.\n    const match = /(.*)\\/(children|items)$/.exec(key);\n    let childrenKey;\n    // Update the key to the match before `/children` or `/items` so we can\n    // fetch the item without fetching all its children.\n    if (match) {\n      childrenKey = key;\n      key = match[1];\n    }\n    return {\n      childrenKey,\n      key,\n    };\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'Media' implicitly has an 'any' type.\n  convertMediaItems(Media) {\n    const mediaItems = parser2.parseArray(Media);\n    _.each(mediaItems, (mediaItem) => {\n      tryConvertToString(mediaItem, ['id']);\n      parser.parseBoolean(mediaItem, [\n        'indirect',\n        'optimizedForStreaming',\n        'onAir',\n        'premium',\n        'premiere',\n        'selected',\n      ]);\n      parser.parseInteger(mediaItem, [\n        'duration',\n        'width',\n        'height',\n        'bitrate',\n        'audioChannels',\n        'proxyType',\n        'beginsAt',\n        'endsAt',\n        'beginOffset',\n        'startOffsetSeconds',\n        'endOffsetSeconds',\n      ]);\n      // See: https://github.com/plexinc/media-provider-core/issues/1061\n      if (mediaItem.id == null && mediaItem.uuid == null) {\n        mediaItem.uuid = `${mediaItem.container}-${mediaItem.protocol}-${mediaItem.audioCodec}`;\n      }\n      parser.parseArray(mediaItem, 'Overlay');\n      parser.parseArray(mediaItem, 'Part');\n      // Restore numeric Overlay types lost in XML responses.\n      _.each(mediaItem.Overlay, (overlay) => {\n        // `duration` is optional, `startTimeOffset` is required.\n        if (overlay.duration != null) {\n          overlay.duration = parseInt(overlay.duration, 10);\n        }\n        overlay.startTimeOffset = parseInt(overlay.startTimeOffset, 10);\n      });\n      _.each(mediaItem.Part, (part) => {\n        tryConvertToString(part, ['id']);\n        if (part.exists != null) {\n          part.exists = parser2.parseBoolean(part.exists);\n        }\n        if (part.accessible != null) {\n          part.accessible = parser2.parseBoolean(part.accessible);\n        }\n        parser.parseInteger(part, ['duration', 'size']);\n        parser.parseBoolean(part, 'optimizedForStreaming');\n        parser.parseEncodedString(part, 'file');\n        parser.parseArray(part, 'Stream');\n        _.each(part.Stream, (stream) => {\n          tryConvertToString(stream, ['id']);\n          parser.parseBoolean(stream, [\n            'anamorphic',\n            'selected',\n            'default',\n            'forced',\n            'timed',\n            'cabac',\n            'hasScalingMatrix',\n            'headerStripping',\n          ]);\n          parser.parseInteger(stream, [\n            'index',\n            'streamType',\n            'duration',\n            'width',\n            'height',\n            'bitrate',\n            'bitDepth',\n            'level',\n            'refFrames',\n            'samplingRate',\n            'channels',\n            'minLines',\n            'offset',\n          ]);\n          parser.parseFloat(stream, 'frameRate');\n        });\n      });\n    });\n    return this.addNoneSubtitlesStreams(mediaItems);\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'Role' implicitly has an 'any' type.\n  convertRole(Role) {\n    const roleItems = parser2.parseArray(Role);\n    _.each(roleItems, (role) => {\n      parser.parseBoolean(role, ['directory']);\n    });\n    return roleItems;\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'Marker' implicitly has an 'any' type.\n  convertMarkers(Marker) {\n    const markerItems = parser2.parseArray(Marker);\n    _.each(markerItems, (marker) => {\n      parser.parseInteger(marker, ['endTimeOffset', 'startTimeOffset']);\n    });\n    return markerItems;\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'mediaItems' implicitly has an 'any' typ... Remove this comment to see the full error message\n  addNoneSubtitlesStreams(mediaItems) {\n    const subtitleType = streamTypes.get('subtitles');\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'mediaItem' implicitly has an 'any' type... Remove this comment to see the full error message\n    mediaItems.forEach((mediaItem) => {\n      const Part = mediaItem.Part;\n      const isLiveTVMediaItem = mediaItem.origin === 'livetv';\n      if (Part) {\n        // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'part' implicitly has an 'any' type.\n        Part.forEach((part) => {\n          if (!part.Stream) {\n            return;\n          }\n          // Skip adding \"None\" subtitle streams to media items without video\n          // streams. Live TV items are excluded from this check, as some do not\n          // expose any video streams.\n          if (!isLiveTVMediaItem && !getSelectedVideo(mediaItem)) {\n            return;\n          }\n          const subtitles = part.Stream.filter(\n            // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'stream' implicitly has an 'any' type.\n            (stream) => stream.streamType === subtitleType.id\n          );\n          // Don't add \"None\" subtitles if it has already been added\n          // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'sub' implicitly has an 'any' type.\n          if (subtitles.find((sub) => sub.id === NONE)) {\n            return;\n          }\n          // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'sub' implicitly has an 'any' type.\n          const selectedSubtitles = subtitles.find((sub) => sub.selected);\n          const none = {\n            id: NONE,\n            streamType: subtitleType.id,\n            language: t('None'),\n          };\n          // Set \"None\" as selected if there are no other selected subtitles.\n          if (!selectedSubtitles) {\n            (none as any).selected = true;\n          }\n          part.Stream.unshift(none);\n        });\n      }\n    });\n    return mediaItems;\n  },\n  getDownloadUrl(mediaIndex = 0) {\n    const mediaItem = this.get('Media')[mediaIndex];\n    if (mediaItem) {\n      const part = _.first(mediaItem.Part);\n      const key = part && part.key;\n      if (key) {\n        const downloadKey = path.join(key, { download: 1 });\n        return this.server.resolveUrl(downloadKey, { appendToken: true });\n      }\n    }\n  },\n  getFilepath(mediaIndex = 0) {\n    const mediaItem = this.get('Media')[mediaIndex];\n    if (mediaItem) {\n      const part = _.first(mediaItem.Part);\n      if (part) {\n        return part.file;\n      }\n    }\n  },\n  getLocation() {\n    // Use the first location if there are multiple associated with the item.\n    const locations = this.get('Location');\n    if (locations.length) {\n      return _.first(locations).path;\n    } else {\n      // If this item is not a directory, we can use the filepath instead.\n      return this.getFilepath();\n    }\n  },\n  getMediaKey() {\n    const mediaItem = _.first(this.get('Media'));\n    if (mediaItem) {\n      const part = _.first(mediaItem.Part);\n      if (part) {\n        return part.key;\n      }\n    }\n    return this.get('key');\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'identifier' implicitly has an 'any' typ... Remove this comment to see the full error message\n  isLibraryItem(identifier, key) {\n    if (this.provider && !this.provider.get('isLibraryProvider')) {\n      return false;\n    }\n    return isLibraryItem(identifier, key);\n  },\n  isPlexMusicItem() {\n    const section = this.section;\n    return (\n      section && section.get('agent') === agentIdentifiers.PLEXPREMIUMMUSIC\n    );\n  },\n});\nexport default MetadataModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\n\nexport default function isLibraryItem(\n  providerIdentifier: any,\n  metadataKey: any\n) {\n  if (providerIdentifier) {\n    return providerIdentifiers.matches(\n      providerIdentifier,\n      providerIdentifiers.LIBRARY\n    );\n  } else {\n    return /^(\\/sync\\/[\\w\\d-/]*)?\\/library\\//.test(metadataKey);\n  }\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport assert from 'app/js/utils/log/assert';\n\nconst controlledPopulateMixin = {\n  fetch() {\n    assert(\n      false,\n      'A model or collection with a controlled populate promise cannot be fetched directly'\n    );\n    return (this as any).populatePromise;\n  },\n  isPopulating() {\n    return (\n      !!(this as any).populatePromise &&\n      (this as any).populatePromise.state() === 'pending'\n    );\n  },\n  _resetPopulate() {\n    if (!this.isPopulating()) {\n      (this as any)._populateDeferred = $.Deferred();\n      (this as any).populatePromise = (this as any)._populateDeferred.promise();\n    }\n    return (this as any).populatePromise;\n  },\n  _resolvePopulate() {\n    if ((this as any).populatePromise.state() === 'resolved') {\n      return (this as any).populatePromise;\n    }\n    if ((this as any).populatePromise.state() === 'rejected') {\n      this._resetPopulate();\n    }\n    (this as any)._populateDeferred.resolveWith(this, [this]);\n    return (this as any).populatePromise;\n  },\n  _rejectPopulate() {\n    if ((this as any).populatePromise.state() === 'rejected') {\n      return (this as any).populatePromise;\n    }\n    if ((this as any).populatePromise.state() === 'resolved') {\n      this._resetPopulate();\n    }\n    (this as any)._populateDeferred.rejectWith(this, [this]);\n    return (this as any).populatePromise;\n  },\n};\nexport default controlledPopulateMixin;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\n// Augment range object to full set of properties:\n// start, end, size, last\nfunction augment(range: any) {\n  const r = _.clone(range);\n\n  // Assuming range.start to be present\n  if (typeof r.last !== 'undefined') {\n    r.end = r.last + 1;\n    r.size = r.end - r.start;\n  } else if (typeof r.size !== 'undefined') {\n    r.end = r.start + r.size;\n    r.last = r.end - 1;\n  } else if (typeof r.end !== 'undefined') {\n    r.last = r.end - 1;\n    r.size = r.end - r.start;\n  }\n\n  return r;\n}\n\n// Augment and filter out invalid and/or empty ranges\nfunction fixResult(result: any, allowEmpty: any) {\n  return _.filter(_.map(result, augment), function (range) {\n    if (allowEmpty) {\n      return range.size >= 0; // Range is invalid if size < 0\n    } else {\n      return range.size > 0;\n    }\n  });\n}\n\nconst rangeUtil = {\n  augment: augment,\n\n  difference: function (a: any, b: any, allowEmpty: any) {\n    a = augment(a);\n    b = augment(b);\n\n    const result = [\n      {\n        start: a.start,\n        last: Math.min(a.last, b.start - 1),\n      },\n      {\n        start: Math.max(a.start, b.end),\n        last: a.last,\n      },\n    ];\n\n    return fixResult(result, allowEmpty);\n  },\n\n  union: function (a: any, b: any, allowEmpty: any) {\n    a = augment(a);\n    b = augment(b);\n\n    if (a.start > b.start) {\n      // Swapping a and b to make a the first in line\n      const c = a;\n      a = b;\n      b = c;\n    }\n\n    const result = [a];\n\n    if (b.start <= a.end) {\n      result[0].last = Math.max(b.last, a.last);\n    } else {\n      result.push(b);\n    }\n\n    return fixResult(result, allowEmpty);\n  },\n\n  degap: function (range: any, targetRange: any) {\n    let result = augment(range);\n    targetRange = augment(targetRange);\n\n    // Ignore target range if it's empty\n    if (!targetRange.size) {\n      return result;\n    }\n\n    if (result.start > targetRange.end) {\n      result = {\n        start: targetRange.end,\n        end: result.end,\n      };\n    }\n    if (result.end < targetRange.start) {\n      result = {\n        start: result.start,\n        end: targetRange.start,\n      };\n    }\n\n    return augment(result);\n  },\n\n  each: function (range: any, iterator: any, context: any) {\n    range = augment(range);\n\n    let start = Math.min(range.start, range.end);\n    const end = Math.max(range.start, range.end);\n\n    for (; start <= end; start++) {\n      iterator.call(context, start);\n    }\n  },\n\n  roundByPage: function (range: any, pageSize: any) {\n    range = augment(range);\n\n    return augment({\n      start: Math.floor(range.start / pageSize) * pageSize,\n      end: Math.ceil(range.end / pageSize) * pageSize,\n    });\n  },\n};\n\nexport default rangeUtil;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport rangeUtil from 'app/js/utils/rangeUtil';\nimport path from 'app/js/utils/url/path';\n\nconst paginatedListModelMixin = {\n  getCollectionName() {\n    return (this as any).collectionName || 'items';\n  },\n  getCollection() {\n    return (this as any).get(this.getCollectionName());\n  },\n  getTotalSize() {\n    return (\n      (this as any).get('totalSize') || (this as any).get('populatedRange').size\n    );\n  },\n  getPaginatedUrl(url: any) {\n    const currentPageStart = (this as any).get('currentPageStart');\n    const currentPageSize = (this as any).get('currentPageSize');\n    // If pagination properties have been set, append the X-Plex pagination\n    // params to the end of the query string.\n    if (currentPageStart != null || currentPageSize != null) {\n      const pageParams = {\n        'X-Plex-Container-Start': currentPageStart || 0,\n        'X-Plex-Container-Size': currentPageSize || 0,\n      };\n      return path.join(url, pageParams);\n    }\n    return url;\n  },\n  getCollectionChangeEvents() {\n    const collectionName = this.getCollectionName();\n    const events = [\n      `change:${collectionName}.update`,\n      `change:${collectionName}.reset`,\n    ];\n    return events.join(' ');\n  },\n  startPopulatedRangeMonitor() {\n    const collectionName = this.getCollectionName();\n    this.updatePopulatedRange();\n    (this as any).on(\n      this.getCollectionChangeEvents(),\n      this.updatePopulatedRange,\n      this\n    );\n    (this as any).on(\n      `change:${collectionName}.destroy`,\n      this.decrementTotalSize,\n      this\n    );\n  },\n  stopPopulatedRangeMonitor() {\n    const collectionName = this.getCollectionName();\n    (this as any).off(\n      this.getCollectionChangeEvents(),\n      this.updatePopulatedRange,\n      this\n    );\n    (this as any).off(\n      `change:${collectionName}.destroy`,\n      this.decrementTotalSize,\n      this\n    );\n  },\n  fetchRange(options: any) {\n    const fetchOptions = _.extend({}, options, { remove: false });\n    if (options.prepend) {\n      fetchOptions.at = 0;\n    }\n    (this as any).set({\n      currentPageStart: options.start,\n      currentPageSize: options.size,\n    });\n    return (this as any).fetch(fetchOptions).promise();\n  },\n  // @ts-expect-error ts-migrate(7023) FIXME: 'populateRange' implicitly has return type 'any' b... Remove this comment to see the full error message\n  populateRange(options: any) {\n    const collection = this.getCollection();\n    const populatedRange = (this as any).get('populatedRange');\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n    let range = rangeUtil.difference(options, populatedRange)[0];\n    // We do not need to fetch anything if there is no difference between the\n    // requested range and the populated range.\n    if (!range) {\n      return $.Deferred().resolve().promise();\n    }\n    // We cannot have gaps in our collection so the models we fetch need to be\n    // part of the same range.\n    range = rangeUtil.degap(range, populatedRange);\n    // If a previous request is still pending, check if the range is the same.\n    // If the requested range is the same, reuse the existing promise.\n    // Otherwise, abort so it can make a fresh request with the updated range.\n    if ((this as any).isPopulating()) {\n      const isStartDifferent =\n        (this as any).get('currentPageStart') !== range.start;\n      const isSizeDifferent =\n        (this as any).get('currentPageSize') !== range.size;\n      if (isStartDifferent || isSizeDifferent) {\n        (this as any).abortPendingPopulate();\n      } else {\n        return (this as any).populatePromise;\n      }\n    }\n    // It's possible that the requested range is outside of our current\n    // populated range, for example when we \"jump to a letter\". When the\n    // difference between the two ranges is significant, it's more efficient to\n    // reset and start a new populate request rather than including the\n    // \"degapped\" items.\n    if (options.reloadThreshold && range.size > options.reloadThreshold) {\n      collection.reset();\n      return this.populateRange(_.omit(options, 'reloadThreshold'));\n    }\n    const fetchOptions = _.extend({}, options, range, {\n      prepend: range.start < populatedRange.start,\n    });\n    return this.fetchRange(fetchOptions);\n  },\n  repopulateRange(minSize = 0) {\n    const end = (this as any).get('populatedRange').end;\n    (this as any).set({\n      currentPageStart: 0,\n      currentPageSize: Math.max(end, minSize),\n    });\n    (this as any).abortPendingPopulate();\n    return (this as any).fetch();\n  },\n  updatePopulatedRange() {\n    const currentPageStart = (this as any).get('currentPageStart');\n    const previousStart = (this as any).get('populatedRange').start;\n    const previousSize = (this as any).get('populatedRange').size;\n    const size = this.getCollection().length;\n    let start;\n    if (!size) {\n      // Assign the default start value if collection was reset.\n      start = 0;\n    } else if (previousSize) {\n      // When populating items before the previously populated range, the\n      // updated populated range start should be less than the previous value.\n      // Otherwise, the populated range start value should remain the same.\n      start = Math.min(\n        previousStart,\n        currentPageStart == null ? Infinity : currentPageStart\n      );\n    } else {\n      // When fetching an initial batch of items in the middle of the list, the\n      // `previousStart` will be 0 and the `currentPageStart` will be greater\n      // than 0. Prefer the `currentPageStart`.\n      start = currentPageStart || previousStart;\n    }\n    (this as any).set('populatedRange', {\n      start,\n      end: start + size,\n      size,\n    });\n  },\n  decrementTotalSize() {\n    const totalSize = (this as any).get('totalSize');\n    if (totalSize > 0) {\n      (this as any).set('totalSize', totalSize - 1);\n    }\n  },\n};\nexport default paginatedListModelMixin;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nexport default function preserveMergeStrategy(\n  // @ts-expect-error ts-migrate(6133) FIXME: 'key' is declared but its value is never read.\n  key: any,\n  previousValue: any,\n  nextValue: any\n) {\n  // When preserving attributes, do not allow values to be unset and do not\n  // allow objects or arrays to be overwritten. Objects and arrays may have an\n  // incomplete set of data.\n\n  if (nextValue === undefined) {\n    return previousValue;\n  }\n\n  if (_.isObject(previousValue)) {\n    return previousValue;\n  }\n\n  return nextValue;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport * as features from 'app/js/utils/constants/user/features';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport augmentProviderCollection from 'app/js/utils/provider/augmentProviderCollection';\nimport augmentWithSyntheticHomeProvider from 'app/js/utils/provider/augmentWithSyntheticHomeProvider';\nimport ProviderModel from './ProviderModel';\n\nconst ProviderCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ProviderCollection',\n  context: ['server'],\n\n  model: ProviderModel,\n  url: '/media/providers',\n\n  responseType() {\n    return getSupportedResponseType(this.server);\n  },\n\n  //\n  // Control\n\n  fetch() {\n    const server = this.server;\n    const user = this.parent;\n    const mappedFeatures = user\n      ?.get('features')\n      ?.map((item: any) => item.get('uuid'));\n    const userHasUniversalWatchlist = mappedFeatures?.includes(\n      features.UNIVERSAL_WATCHLIST\n    );\n\n    let promise;\n\n    // Only make the request to `/media/providers` if the server has the\n    // `mediaProviders` flag set. Shared servers respond with a 401 instead of a\n    // 404 if a path is not there.\n\n    if (server.get('mediaProviders') || server.get('isCloud')) {\n      // eslint-disable-next-line prefer-rest-params\n      promise = AbstractCollection.prototype.fetch.apply(this, arguments);\n    } else {\n      promise = $.Deferred().resolve(this, '').promise();\n    }\n\n    promise.then((collection: any) => {\n      augmentProviderCollection(collection, server);\n    });\n\n    if (server.get('isCloud') && userHasUniversalWatchlist) {\n      promise.then((collection: any) => {\n        augmentWithSyntheticHomeProvider(collection, server);\n      });\n    }\n\n    return promise;\n  },\n});\n\nexport default ProviderCollection;\n","/* eslint-plugin-disable @typescript-eslint */\nimport ProviderModel from 'app/js/models/provider/ProviderModel';\nimport * as pivotIdentifiers from 'app/js/utils/constants/pivotIdentifiers';\nimport * as pivotTypes from 'app/js/utils/constants/pivotTypes';\nimport { HOME_CONTENT_DIRECTORY_ID } from 'app/js/utils/constants/providerContentDirectoryIDs';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport t from 'app/js/utils/t';\nimport { views } from 'app/js/views/v3/helpers/routes/getViewRoute';\n\nexport default function augmentWithSyntheticHomeProvider(\n  collection: any,\n  server: any\n) {\n  if (!collection.get(providerIdentifiers.HOME_SYNTHETIC)) {\n    collection.add(\n      new ProviderModel(\n        {\n          isPending: false,\n          isPopulated: true,\n          identifier: providerIdentifiers.HOME_SYNTHETIC,\n          title: 'Home Provider',\n          features: [\n            {\n              type: providerFeatureTypes.CONTENT,\n              directories: [\n                {\n                  id: HOME_CONTENT_DIRECTORY_ID,\n                  title: t('Home'),\n                  pivots: [\n                    {\n                      id: pivotIdentifiers.HOME_RECOMMENDED,\n                      key: views.HOME_RECOMMENDED,\n                      type: pivotTypes.VIEW,\n                      title: t('Recommended'),\n                    },\n                    {\n                      id: pivotIdentifiers.HOME_WATCHLIST,\n                      context: 'content.watchlist',\n                      key: views.HOME_WATCHLIST,\n                      type: pivotTypes.VIEW,\n                      title: t('Watchlist'),\n                    },\n                  ],\n                },\n              ],\n            },\n          ],\n        },\n        { server }\n      )\n    );\n  }\n}\n","export const HOME_CONTENT_DIRECTORY_ID = 'home';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const SHARED_ITEMS = 'shared.items';\nexport const VOD_CHANNELS = 'vod.channels';\nexport const VOD_WATCHLIST = 'vod.watchlist';\nexport const HOME_RECOMMENDED = 'home.recommended';\nexport const HOME_WATCHLIST = 'home.watchlist';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ProviderEPGChannelModel from 'app/js/models/provider/ProviderEPGChannelModel';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport * as providerSettingIDs from 'app/js/utils/constants/providerSettingIDs';\n\nconst ProviderEPGChannelCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ProviderEPGChannelCollection',\n  context: ['server', 'provider'],\n  model: ProviderEPGChannelModel,\n  url() {\n    const lineupSetting = this.provider\n      .get('features')\n      .get(providerFeatureTypes.SETTINGS)\n      .get('settings')\n      .get(providerSettingIDs.LINEUP);\n\n    return lineupSetting.get('key');\n  },\n});\n\nexport default ProviderEPGChannelCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ProviderEPGChannelModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ProviderEPGChannelModel',\n  context: ['provider'],\n\n  rootPropertyName: 'Channel',\n\n  syncedAttrs: {\n    id: attrTypes.string,\n    thumb: attrTypes.string,\n    title: attrTypes.string,\n    hidden: attrTypes.boolean,\n  },\n});\n\nexport default ProviderEPGChannelModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ProviderActionModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ProviderActionModel',\n  context: ['server', 'provider'],\n\n  syncedAttrs: {\n    id: attrTypes.string,\n    key: attrTypes.string,\n    reverseKey: attrTypes.string,\n    requires: attrTypes.string,\n  },\n});\n\nexport default ProviderActionModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ProviderActionModel from './ProviderActionModel';\n\nconst ProviderActionCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ProviderActionCollection',\n  context: ['server', 'provider'],\n\n  model: ProviderActionModel,\n});\n\nexport default ProviderActionCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport * as pivotTypes from 'app/js/utils/constants/pivotTypes';\n\nconst PivotModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'PivotModel',\n  idAttribute: 'key',\n\n  syncedAttrs: {\n    key: attrTypes.string.isRequired,\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 3.\n    type: attrTypes.oneOf(pivotTypes.HUB, pivotTypes.LIST, pivotTypes.VIEW)\n      .isRequired,\n    id: attrTypes.string,\n    title: attrTypes.string.isRequired,\n    context: attrTypes.string.isRequired,\n    requires: attrTypes.string,\n\n    // Used by synthetic pivots to fetch the Types, Filters, and Sorts in place of\n    // the Meta element\n    libraryKey: attrTypes.string,\n  },\n});\n\nexport default PivotModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport PivotModel from './PivotModel';\n\nconst PivotCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'PivotCollection',\n  model: PivotModel,\n});\n\nexport default PivotCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport PivotCollection from 'app/js/models/provider/PivotCollection';\n\nconst ProviderDirectoryModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ProviderDirectoryModel',\n  context: ['server', 'provider'],\n\n  syncedAttrs: {\n    id: attrTypes.string,\n    key: attrTypes.string,\n    hubKey: attrTypes.string,\n    title: attrTypes.string,\n    icon: attrTypes.string,\n    type: attrTypes.string,\n    subtype: attrTypes.string,\n    agent: attrTypes.string,\n    refreshing: attrTypes.boolean,\n    updatedAt: attrTypes.integer,\n    scannedAt: attrTypes.integer,\n    context: attrTypes.string,\n  },\n\n  syncedRelations: {\n    pivots: {\n      relationClass: PivotCollection,\n      rootPropertyName: 'Pivot',\n      deferred: true,\n    },\n  },\n});\n\nexport default ProviderDirectoryModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ProviderDirectoryModel from './ProviderDirectoryModel';\n\nconst ProviderDirectoryCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ProviderDirectoryCollection',\n  context: ['server', 'provider'],\n\n  model: ProviderDirectoryModel,\n\n  modelId(attrs: any) {\n    return attrs.key || attrs.hubKey;\n  },\n});\n\nexport default ProviderDirectoryCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport ProviderActionCollection from 'app/js/models/provider/ProviderActionCollection';\nimport ProviderSettingCollection from 'app/js/models/provider/ProviderSettingCollection';\nimport ProviderDirectoryCollection from './ProviderDirectoryCollection';\n\nconst ProviderFeatureModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ProviderFeatureModel',\n  context: ['server', 'provider'],\n\n  sessionAttrs: {\n    isSettingsPending: attrTypes.boolean,\n    isSettingsPopulated: attrTypes.boolean,\n    settingsError: attrTypes.object,\n  },\n\n  syncedAttrs: {\n    id: attrTypes.string,\n    key: attrTypes.string,\n    reverseKey: attrTypes.string,\n    scrobbleKey: attrTypes.string,\n    unscrobbleKey: attrTypes.string,\n    type: attrTypes.string,\n    flavor: attrTypes.string,\n    requires: attrTypes.string,\n    automaticLibraryFolders: attrTypes.boolean,\n    public: attrTypes.boolean,\n    storageTotal: attrTypes.integer,\n  },\n\n  syncedRelations: {\n    directories: {\n      relationClass: ProviderDirectoryCollection,\n      rootPropertyName: 'Directory',\n      deferred: true,\n    },\n    settings: {\n      relationClass: ProviderSettingCollection,\n      rootPropertyName: 'Setting',\n      deferred: true,\n    },\n    actions: {\n      relationClass: ProviderActionCollection,\n      rootPropertyName: 'Action',\n      deferred: true,\n      setOptions: {\n        // The providers listed at plex.tv do not have features.  However,\n        // ProviderFeatureCollection.augmentResponse adds in an empty actions\n        // feature when no action feature is present.  Don't allow actions to be\n        // removed in case the list of providers is fetched again.\n        remove: false,\n      },\n    },\n  },\n\n  defaults: {\n    isSettingsPending: true,\n    isSettingsPopulated: false,\n  },\n});\n\nexport default ProviderFeatureModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport * as providerActionIDs from 'app/js/utils/constants/providerActionIDs';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport * as features from 'app/js/utils/constants/user/features';\nimport ProviderFeatureModel from './ProviderFeatureModel';\n\nconst ProviderFeatureCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ProviderFeatureCollection',\n  context: ['server', 'provider'],\n\n  model: ProviderFeatureModel,\n\n  modelId(attrs: any) {\n    return attrs.type === providerFeatureTypes.ACTION ? attrs.id : attrs.type;\n  },\n\n  augmentResponse(response: any) {\n    // Check the response for an `actions` feature. If no such feature exists\n    // manually create it. With a missing `actions` feature it will break parts\n    // of the app that expect this feature to exist. LegacyLibraryProviderModel\n    // Also manually adds actions.\n    let actionsFeature = response.find(\n      (feature: any) => feature.type === providerFeatureTypes.ACTIONS\n    );\n\n    if (actionsFeature != null && !Array.isArray(actionsFeature.Action)) {\n      actionsFeature.Action = actionsFeature.Action\n        ? [actionsFeature.Action]\n        : [];\n    }\n\n    if (actionsFeature == null) {\n      actionsFeature = { Action: [], type: providerFeatureTypes.ACTIONS };\n      response.push(actionsFeature);\n    }\n\n    response.forEach((feature: any) => {\n      if (\n        feature.type === providerFeatureTypes.TIMELINE &&\n        (feature.scrobbleKey != null || feature.unscrobbleKey != null)\n      ) {\n        const { scrobbleKey: key, unscrobbleKey: reverseKey } = feature;\n\n        actionsFeature.Action.push({\n          id: providerActionIDs.SCROBBLE,\n          key,\n          reverseKey,\n        });\n\n        delete feature.scrobbleKey;\n        delete feature.unscrobbleKey;\n      }\n\n      if (feature.type === providerFeatureTypes.RATE) {\n        const { key } = feature;\n\n        actionsFeature.Action.push({\n          id: providerActionIDs.RATE,\n          key,\n        });\n\n        delete feature.key;\n      }\n\n      if (\n        feature.type === providerFeatureTypes.ACTION &&\n        (feature.key != null || feature.reverseKey != null)\n      ) {\n        const { key, reverseKey } = feature;\n\n        actionsFeature.Action.push({\n          id: feature.id,\n          key,\n          reverseKey,\n        });\n\n        delete feature.key;\n        delete feature.reverseKey;\n      }\n\n      // In the future the API will return `requires` attribute on Pivot, Action\n      // . The attribute value will be the short name of the feature flag. See\n      // https://github.com/plexinc/api/pull/276 &\n      // https://github.com/plexinc/my-plex/issues/5303\n      //\n      // Once API changes are made and we use the correct FF short name, this\n      // code can be deleted.\n      if (feature.type === providerFeatureTypes.ACTIONS) {\n        feature.Action.forEach((action: any) => {\n          if (\n            action.id === providerActionIDs.ADD_TO_WATCHLIST ||\n            action.id === providerActionIDs.ADD_TO_CATALOG ||\n            action.id === providerActionIDs.SAVE\n          ) {\n            action.requires = features.NON_ANONYMOUS_ACCOUNT;\n          }\n        });\n      }\n\n      if (feature.type === providerFeatureTypes.SETTINGS) {\n        feature.requires = features.NON_ANONYMOUS_ACCOUNT;\n      }\n    });\n\n    return response;\n  },\n});\n\nexport default ProviderFeatureCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as metricsContexts from 'app/js/utils/constants/metrics/metricsContexts';\nimport * as pivotTypes from 'app/js/utils/constants/pivotTypes';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport * as providerProtocols from 'app/js/utils/constants/providerProtocols';\nimport createLibraryPivotKey from 'app/js/utils/provider/createLibraryPivotKey';\nimport t from 'app/js/utils/t';\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\nimport * as playlistTypes from 'app/js/utils/types/playlistTypes';\nimport path from 'app/js/utils/url/path';\nimport { views } from 'app/js/views/v3/helpers/routes/getViewRoute';\n\nfunction getRecommendedPivot(directory: any) {\n  return {\n    key: directory.hubKey,\n    type: pivotTypes.HUB,\n    title: t('Recommended'),\n    context: metricsContexts.DISCOVER_PIVOT,\n  };\n}\n\nfunction getLibraryPivot(directory: any, type: any) {\n  return {\n    key: createLibraryPivotKey(directory.id, type),\n    libraryKey: directory.key,\n    type: pivotTypes.LIST,\n    title: t('Library'),\n    context: metricsContexts.LIBRARY_PIVOT,\n    isContent: true,\n  };\n}\n\nfunction getCollectionPivot(directory: any) {\n  const collectionType = metadataTypes.getMetadataType(\n    metadataTypes.COLLECTION\n  );\n\n  return {\n    key: path.join([directory.key, 'all'], { type: collectionType.id }),\n    type: pivotTypes.LIST,\n    title: t('Collections'),\n    context: metricsContexts.COLLECTIONS_PIVOT,\n  };\n}\n\nfunction getPlaylistRoute(directory: any, playlistType: any) {\n  const librarySectionID = directory.key.match(/\\/library\\/sections\\/(\\w+)/)[1];\n  const playlistMetadataType = metadataTypes.getMetadataType(\n    metadataTypes.PLAYLIST\n  );\n\n  return path.join('/playlists/all', {\n    type: playlistMetadataType.id,\n    playlistType,\n    sectionID: librarySectionID,\n  });\n}\n\nfunction getPlaylistsPivot(directory: any, playlistType: any) {\n  return {\n    key: getPlaylistRoute(directory, playlistType),\n    type: pivotTypes.LIST,\n    title: t('Playlists'),\n    context: metricsContexts.PLAYLISTS_PIVOT,\n  };\n}\n\nfunction hasLiveTVProtocol(protocolsString: any) {\n  return (\n    protocolsString &&\n    protocolsString.split(',').indexOf(providerProtocols.LIVE_TV) !== -1\n  );\n}\n\nfunction hasFeature(features: any, featureType: any) {\n  return (\n    features && features.some((feature: any) => feature.type === featureType)\n  );\n}\n\nfunction isTypeMatch(type: any, subtype: any, directory: any) {\n  return (\n    directory.type === type &&\n    ((subtype == null && directory.subtype == null) ||\n      (subtype != null && directory.subtype === subtype))\n  );\n}\n\nfunction isLibraryTypeMatch(type: any, directory: any) {\n  return (\n    /\\/library\\/sections\\/(\\w+)/.test(directory.key) &&\n    isTypeMatch(type, null, directory)\n  );\n}\n\nexport default function getSyntheticPivots(\n  directory: any,\n  protocolsString: any,\n  features: any\n) {\n  if (!directory.hubKey && directory.key !== '/playlists') {\n    return [];\n  } else if (isLibraryTypeMatch(metadataTypes.ARTIST, directory)) {\n    return [\n      getRecommendedPivot(directory),\n      getLibraryPivot(directory, metadataTypes.ARTIST),\n      getPlaylistsPivot(directory, playlistTypes.AUDIO),\n    ];\n  } else if (isLibraryTypeMatch(metadataTypes.MOVIE, directory)) {\n    return [\n      getRecommendedPivot(directory),\n      getLibraryPivot(directory, metadataTypes.MOVIE),\n      getCollectionPivot(directory),\n      getPlaylistsPivot(directory, playlistTypes.VIDEO),\n    ];\n  } else if (isLibraryTypeMatch(metadataTypes.SHOW, directory)) {\n    return [\n      getRecommendedPivot(directory),\n      getLibraryPivot(directory, metadataTypes.SHOW),\n      getCollectionPivot(directory),\n      getPlaylistsPivot(directory, playlistTypes.VIDEO),\n    ];\n  } else if (isLibraryTypeMatch(metadataTypes.PHOTO, directory)) {\n    return [\n      getRecommendedPivot(directory),\n      {\n        key: views.TIMELINE,\n        type: pivotTypes.VIEW,\n        title: t('Timeline'),\n        context: metricsContexts.TIMELINE_PIVOT,\n      },\n      getLibraryPivot(directory, metadataTypes.PHOTO),\n      getPlaylistsPivot(directory, playlistTypes.PHOTO),\n    ];\n  } else if (\n    hasLiveTVProtocol(protocolsString) &&\n    hasFeature(features, providerFeatureTypes.SUBSCRIBE)\n  ) {\n    return [\n      {\n        key: directory.hubKey,\n        type: pivotTypes.HUB,\n        title: t('Recommended'),\n        context: metricsContexts.DVR_DISCOVER_PIVOT,\n      },\n      {\n        key: views.GUIDE,\n        type: pivotTypes.VIEW,\n        title: t('Guide'),\n        context: metricsContexts.DVR_GUIDE_PIVOT,\n      },\n      {\n        key: views.RECORDING_SCHEDULE,\n        type: pivotTypes.VIEW,\n        title: t('DVR Schedule'),\n        context: metricsContexts.DVR_SCHEDULE_PIVOT,\n      },\n    ];\n  } else if (\n    hasLiveTVProtocol(protocolsString) ||\n    hasFeature(features, providerFeatureTypes.GRID)\n  ) {\n    return [\n      {\n        key: directory.hubKey,\n        type: pivotTypes.HUB,\n        title: t('Recommended'),\n        context: metricsContexts.DVR_DISCOVER_PIVOT,\n      },\n      {\n        key: views.GUIDE,\n        type: pivotTypes.VIEW,\n        title: t('Guide'),\n        context: metricsContexts.DVR_GUIDE_PIVOT,\n      },\n    ];\n  } else if (isTypeMatch(metadataTypes.PLAYLIST, null, directory)) {\n    return [\n      {\n        key: path.join(directory.key, {\n          playlistType: playlistTypes.AUDIO,\n        }),\n        type: pivotTypes.LIST,\n        title: t('Music'),\n        context: metricsContexts.PLAYLISTS_PIVOT,\n      },\n      {\n        key: path.join(directory.key, {\n          playlistType: playlistTypes.VIDEO,\n        }),\n        type: pivotTypes.LIST,\n        title: t('Video'),\n        context: metricsContexts.PLAYLISTS_PIVOT,\n      },\n      {\n        key: path.join(directory.key, {\n          playlistType: playlistTypes.PHOTO,\n        }),\n        type: pivotTypes.LIST,\n        title: t('Photo'),\n        context: metricsContexts.PLAYLISTS_PIVOT,\n      },\n    ];\n  }\n\n  return [];\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport preserveMergeStrategy from 'app/js/models/preserveMergeStrategy';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport getProviderTextFormat from 'app/js/stores/actions/helpers/metadata/getProviderTextFormat';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport { SYNTHETIC_CW_FEATURE_KEY } from 'app/js/utils/constants/server/commonContentDirectoryKeys';\nimport * as features from 'app/js/utils/constants/user/features';\nimport getSyntheticPivots from 'app/js/utils/provider/getSyntheticPivots';\nimport normalizeProviderDataIdentifier from 'app/js/utils/provider/normalizeProviderDataIdentifier';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport synthesizeDirectoryID from 'app/js/utils/synthesizeDirectoryID';\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\nimport isAbsoluteUrl from 'app/js/utils/url/isAbsoluteUrl';\nimport path from 'app/js/utils/url/path';\nimport ProviderFeatureCollection from './ProviderFeatureCollection';\n\n// @ts-expect-error ts-migrate(7006) FIXME: Parameter 'providerIdentifier' implicitly has an '... Remove this comment to see the full error message\nfunction getHeadersForProviderIdentifier(providerIdentifier) {\n  const headers = {\n    ['X-Plex-Text-Format']: getProviderTextFormat(providerIdentifier),\n    ['X-Plex-Provider-Version']: '3.2',\n  };\n  return headers;\n}\nconst entityType = entityTypes.PROVIDER;\n// @ts-expect-error ts-migrate(7031) FIXME: Binding element 'identifier' implicitly has an 'an... Remove this comment to see the full error message\nexport function createProviderEntityID({ identifier, serverEntityID }) {\n  return createEntityID(entityType, identifier, serverEntityID);\n}\nconst ProviderModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'ProviderModel',\n  context: ['server'],\n  entityType,\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    return createProviderEntityID({\n      identifier: state.identifier,\n      serverEntityID: this.server.entityID(),\n    });\n  },\n  idAttribute: 'identifier',\n  rootPropertyName: 'MediaProvider',\n  responseType: responseTypes.json,\n  url() {\n    return this.get('baseURL');\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'key' implicitly has an 'any' type.\n  mergeStrategy(key, previousValue, nextValue) {\n    if (key === 'protocols' && nextValue && nextValue.length > 0) {\n      return nextValue;\n    }\n    return preserveMergeStrategy(key, previousValue, nextValue);\n  },\n  // Several identifiers are similar, but have their own usages,\n  // explained below with examples in brackets.\n  // `id` numeric ID of the provider (30)\n  // `parentID` numeric ID of the parent (29)\n  // `identifier` string identifier for the provider (tv.plex.providers.epg.onconnect:29)\n  // `providerIdentifier` string identifier for the provider without parentID,\n  //   only provided when it differs from identifier (tv.plex.providers.epg.onconnect)\n  syncedAttrs: {\n    id: attrTypes.integer,\n    parentID: attrTypes.integer,\n    identifier: attrTypes.string,\n    providerIdentifier: attrTypes.string,\n    baseURL: attrTypes.string,\n    title: attrTypes.string,\n    sourceTitle: attrTypes.string,\n    types: attrTypes.list,\n    protocols: attrTypes.list,\n    subscriptions: attrTypes.boolean,\n    icon: attrTypes.string,\n    epgSource: attrTypes.string,\n    // `source` is used by nano sync provider models.\n    source: attrTypes.string,\n  },\n  sessionAttrs: {\n    isPending: attrTypes.boolean,\n    isPopulated: attrTypes.boolean,\n    error: attrTypes.object,\n  },\n  syncedRelations: {\n    features: {\n      relationClass: ProviderFeatureCollection,\n      rootPropertyName: 'Feature',\n      options() {\n        return { provider: this };\n      },\n      setOptions: {\n        // The providers listed at plex.tv do not have the features list.\n        // Don't allow them removed in case the list of providers is fetched again.\n        remove: false,\n      },\n    },\n  },\n  derivedAttrs: {\n    isLibraryProvider() {\n      return providerIdentifiers.matches(\n        normalizeProviderDataIdentifier(\n          (this as any).get('identifier'),\n          (this as any).get('providerIdentifier')\n        ),\n        providerIdentifiers.LIBRARY\n      );\n    },\n    metricsIdentifier() {\n      // `providerIdentifier` is only present when it differs from `identifier`.\n      // `providerIdentifier` allows us to track how often specific providers are used,\n      // without the extraneous metadata added on the end of `identifier`.\n      const providerIdentifier =\n        (this as any).get('providerIdentifier') ||\n        (this as any).get('identifier');\n      return providerIdentifiers.matches(\n        providerIdentifier,\n        providerIdentifiers.EPG\n      )\n        ? providerIdentifier.split(':')[0]\n        : providerIdentifier;\n    },\n  },\n  //\n  // Control\n  populate() {\n    // ProviderCollection sets isPopulated and isPending on specific providers.\n    // Respect that and skip populating when isPopulated is already set.\n    if (this.get('isPopulated')) {\n      return $.Deferred().resolve(this).promise();\n    }\n    // eslint-disable-next-line prefer-rest-params\n    return AbstractModel.prototype.populate.apply(this, arguments);\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'pathToResolve' implicitly has an 'any' ... Remove this comment to see the full error message\n  resolveUrl(pathToResolve, options) {\n    const serverOptions = { ...options };\n    if (this.url()) {\n      serverOptions.baseUrl = this.url();\n    }\n    return this.server.resolveUrl(pathToResolve, serverOptions);\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'pathToResolve' implicitly has an 'any' ... Remove this comment to see the full error message\n  getXHROptions(pathToResolve, options = {}) {\n    // Don't use baseURL if pathToResolve starts with http://, rtmp://, etc.\n    const url = isAbsoluteUrl(pathToResolve)\n      ? pathToResolve\n      : path.join([this.get('baseURL'), pathToResolve]);\n    const providerIdentifier =\n      this.get('providerIdentifier') || this.get('identifier');\n    const xhrOptions = this.server.getXHROptions(url, {\n      ...options,\n      headers: {\n        ...getHeadersForProviderIdentifier(providerIdentifier),\n        ...(options as any).headers,\n      },\n    });\n    if (this.server.get('isCloud')) {\n      delete xhrOptions.headers['X-Plex-Username'];\n      delete xhrOptions.headers['X-Plex-Device-Name'];\n    }\n    return xhrOptions;\n  },\n  defaults() {\n    return {\n      protocols: [],\n      isPending: true,\n      isPopulated: false,\n      error: null,\n    };\n  },\n  //\n  // Control\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'response' implicitly has an 'any' type.\n  augmentResponse(response) {\n    if (response.MediaProvider) {\n      response = response.MediaProvider;\n    }\n    if (!response.Feature) {\n      return response;\n    }\n    const isLibraryProvider = providerIdentifiers.matches(\n      response.identifier,\n      providerIdentifiers.LIBRARY\n    );\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'feature' implicitly has an 'any' type.\n    response.Feature.forEach((feature) => {\n      // In Provider Version 1.3 Settings are no longer returned in the provider\n      // definition. However, we want to keep the `settings` relation on\n      // ProviderFeatureModel to be `deferred` in order to reduce memory\n      // pressure on providers that don't offer settings. In order to set up the\n      // `ProviderSettingsCollection` on this feature, we must seed the element\n      // with an empty array, in order for this `deferred` relation to be\n      // created on this `ProviderFeatureModel`\n      if (feature.type === providerFeatureTypes.SETTINGS) {\n        feature.Setting = [];\n      }\n      if (!feature.Directory || feature.type !== providerFeatureTypes.CONTENT) {\n        return;\n      }\n      if (!feature.key && isLibraryProvider) {\n        feature.key = '/library/sections';\n      }\n      let playlistsIndex;\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'directory' implicitly has an 'any' type... Remove this comment to see the full error message\n      feature.Directory.forEach((directory, i) => {\n        const directoryKey = directory.key || directory.hubKey;\n        if (!directory.id && directoryKey) {\n          directory.id = synthesizeDirectoryID(directoryKey);\n        }\n        if (directory.type === metadataTypes.PLAYLIST) {\n          playlistsIndex = i;\n        }\n        if (!directory.Pivot) {\n          directory.Pivot = getSyntheticPivots(\n            directory,\n            response.protocols,\n            response.Feature\n          );\n        }\n        // In the future the API will return `requires` attribute on Pivot, Action\n        // . The attribute value will be the short name of the feature flag. See\n        // https://github.com/plexinc/api/pull/276 &\n        // https://github.com/plexinc/my-plex/issues/5303\n        //\n        // Once API changes are made and we use the correct FF short name, this\n        // code can be deleted.\n        if (!Array.isArray(directory.Pivot)) {\n          directory.Pivot = [directory.Pivot];\n        }\n        // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'pivot' implicitly has an 'any' type.\n        directory.Pivot.forEach((pivot) => {\n          if (pivot.id && pivot.id.match(/\\.(saved|watchlist|playlists)$/)) {\n            pivot.requires = features.NON_ANONYMOUS_ACCOUNT;\n          }\n        });\n\n        const isVODProvider = providerIdentifiers.matches(\n          response.identifier,\n          providerIdentifiers.VOD\n        );\n        const user = this.parent;\n        const mappedFeatures = user\n          ?.get('features')\n          ?.map((item: any) => item.get('uuid'));\n        const userHasUniversalWatchlist = mappedFeatures?.includes(\n          features.UNIVERSAL_WATCHLIST\n        );\n\n        // Manually remove the Watchlist pivot from VOD if the user has access\n        // to Universal Watchlist. This can be removed once the API is updated.\n        // See: https://github.com/plexinc/plex-web-client/issues/19554\n        if (isVODProvider && userHasUniversalWatchlist) {\n          directory.Pivot = directory.Pivot.filter(\n            (pivot: any) => !pivot.id.match(/\\.watchlist$/)\n          );\n        }\n      });\n      if (playlistsIndex && playlistsIndex < feature.Directory.length - 1) {\n        const playlistDirectory = feature.Directory[playlistsIndex];\n        feature.Directory.splice(playlistsIndex, 1);\n        feature.Directory.push(playlistDirectory);\n      }\n    });\n    // Check to see if this provider already has a `continuewatching` feature.\n    // If not augment a `continuewatching` feature using the `/hubs` endpoint to\n    // return the CW and OD hub. The CW hub will be merged into one global\n    // `ContinueWatchingHub` and the OD hub will be placed bellow\n    if (\n      isLibraryProvider &&\n      !response.Feature.find(\n        // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'feature' implicitly has an 'any' type.\n        (feature) => feature.type === providerFeatureTypes.CONTINUE_WATCHING\n      )\n    ) {\n      response.Feature.push({\n        type: providerFeatureTypes.CONTINUE_WATCHING,\n        key: SYNTHETIC_CW_FEATURE_KEY,\n      });\n    }\n    return response;\n  },\n});\nexport default ProviderModel;\n","export const SERVER_HOME_HUB_KEY = '/hubs';\nexport const SYNTHETIC_CW_FEATURE_KEY =\n  '/hubs?identifier=home.continue,home.ondeck';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ProviderCountryModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ProviderCountryModel',\n  context: ['server', 'provider'],\n  idAttribute: 'code',\n  rootPropertyName: 'Country',\n\n  syncedAttrs: {\n    code: attrTypes.string,\n    title: attrTypes.string,\n    postalCodeFormat: attrTypes.string,\n    flavor: attrTypes.string,\n  },\n});\n\nexport default ProviderCountryModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ProviderCountryModel from 'app/js/models/provider/ProviderCountryModel';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\n\nconst ProviderCountryCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ProviderCountryCollection',\n  context: ['server', 'provider'],\n  url() {\n    const locationFeature = this.provider.get('features').findWhere({\n      type: providerFeatureTypes.LOCATION,\n    });\n\n    return `${locationFeature.get('key')}/countries`;\n  },\n\n  model: ProviderCountryModel,\n});\n\nexport default ProviderCountryCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ProviderEPGChannelModel from 'app/js/models/provider/ProviderEPGChannelModel';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport * as providerSettingIDs from 'app/js/utils/constants/providerSettingIDs';\n\nconst ProviderEPGRecentChannelCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ProviderEPGChannelCollection',\n  context: ['server', 'provider'],\n  model: ProviderEPGChannelModel,\n  url() {\n    const lineupSetting = this.provider\n      .get('features')\n      .get(providerFeatureTypes.SETTINGS)\n      .get('settings')\n      .get(providerSettingIDs.RECENT_CHANNELS_IN_GRID);\n\n    return lineupSetting.get('key');\n  },\n});\n\nexport default ProviderEPGRecentChannelCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ProviderSettingOptionsModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ProviderSettingOptionsModel',\n  context: ['server', 'provider'],\n  idAttribute: 'key',\n  rootPropertyName: 'Directory',\n\n  syncedAttrs: {\n    key: attrTypes.string,\n    title: attrTypes.string,\n    type: attrTypes.string,\n    selected: attrTypes.boolean,\n  },\n});\n\nexport default ProviderSettingOptionsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ProviderSettingOptionsModel from './ProviderSettingOptionsModel';\n\nconst ProviderSettingOptionsCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ProviderSettingOptionsCollection',\n  context: ['server', 'provider'],\n\n  model: ProviderSettingOptionsModel,\n});\n\nexport default ProviderSettingOptionsCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport ProviderCountryCollection from 'app/js/models/provider/ProviderCountryCollection';\nimport ProviderEPGChannelCollection from 'app/js/models/provider/ProviderEPGChannelCollection';\nimport ProviderEPGRecentChannelCollection from 'app/js/models/provider/ProviderEPGRecentChannelCollection';\nimport ProviderSettingOptionsCollection from 'app/js/models/provider/ProviderSettingOptionsCollection';\nimport parser2 from 'app/js/utils/parser2';\n\nconst valueParsers = {\n  int: parser2.parseInteger,\n  bool: parser2.parseBoolean,\n  double: parser2.parseFloat,\n};\n\nconst ProviderSettingModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ProviderSettingModel',\n  context: ['server', 'provider'],\n  rootPropertyName: 'Setting',\n\n  url() {\n    return this.get('key');\n  },\n\n  sessionAttrs: {\n    isOptionsPending: attrTypes.boolean,\n    isOptionsPopulated: attrTypes.boolean,\n    optionsError: attrTypes.object,\n    isLocationsPending: attrTypes.boolean,\n    isLocationsPopulated: attrTypes.boolean,\n    locationsError: attrTypes.object,\n    isLineupPending: attrTypes.boolean,\n    isLineupPopulated: attrTypes.boolean,\n    lineupError: attrTypes.object,\n  },\n\n  syncedAttrs: {\n    country: attrTypes.string,\n    countryLabel: attrTypes.string,\n    hidden: attrTypes.boolean,\n    id: attrTypes.string,\n    key: attrTypes.string,\n    label: attrTypes.string,\n    multiselect: attrTypes.boolean,\n    postalCode: attrTypes.string,\n    required: attrTypes.boolean,\n    selectedCount: attrTypes.integer,\n    summary: attrTypes.string,\n    type: attrTypes.string,\n    value: attrTypes.oneOfType(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 3.\n      attrTypes.string,\n      attrTypes.boolean,\n      attrTypes.float\n    ),\n    min: attrTypes.float,\n    max: attrTypes.float,\n    step: attrTypes.float,\n    enumValues: attrTypes.string,\n    default: attrTypes.string,\n  },\n\n  sessionRelations: {\n    locations: {\n      relationClass: ProviderCountryCollection,\n    },\n\n    lineup: {\n      relationClass: ProviderEPGChannelCollection,\n    },\n\n    recentChannelsInGrid: {\n      relationClass: ProviderEPGRecentChannelCollection,\n    },\n  },\n\n  syncedRelations: {\n    settings() {\n      return {\n        relationClass: require('./ProviderSettingCollection').default,\n        rootPropertyName: 'Setting',\n        deferred: true,\n      };\n    },\n\n    options: {\n      relationClass: ProviderSettingOptionsCollection,\n      options(data: any) {\n        return {\n          url: data.key,\n        };\n      },\n    },\n  },\n\n  defaults: {\n    isOptionsPending: true,\n    isOptionsPopulated: false,\n    optionsError: null,\n    isLocationsPending: true,\n    isLocationsPopulated: false,\n    locationsError: null,\n    isLineupPending: true,\n    isLineupPopulated: false,\n    lineupError: null,\n  },\n\n  //\n  // Control\n\n  augmentResponse(response: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const valueParser = valueParsers[response.type];\n\n    if (valueParser) {\n      response.value = valueParser(response.value);\n    }\n\n    return response;\n  },\n});\n\nexport default ProviderSettingModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ProviderSettingModel from './ProviderSettingModel';\n\nconst ProviderSettingCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ProviderSettingCollection',\n  context: ['server', 'provider'],\n  url: '/settings',\n\n  model: ProviderSettingModel,\n});\n\nexport default ProviderSettingCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport MediaSettingCollection from 'app/js/models/subscription/MediaSettingCollection';\n\nexport const deviceStatuses = {\n  DEAD: 'dead',\n  ALIVE: 'alive',\n};\n\nexport const deviceStates = {\n  DISABLED: 'disabled',\n  ENABLED: 'enabled',\n};\n\nconst MediaGrabberDeviceModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'MediaGrabberDeviceModel',\n  context: ['server'],\n\n  rootPropertyName: 'Device',\n  idAttribute: 'key',\n\n  sessionAttrs: {\n    isChannelsPending: attrTypes.boolean,\n    isChannelsPopulated: attrTypes.boolean,\n    channelsError: attrTypes.object,\n    selectedSource: attrTypes.string,\n    isSaving: attrTypes.boolean,\n    saveError: attrTypes.object,\n  },\n\n  syncedAttrs: {\n    key: attrTypes.integer,\n    uuid: attrTypes.string,\n    parentID: attrTypes.integer,\n    uri: attrTypes.string,\n    protocol: attrTypes.string,\n    status: attrTypes.string,\n    state: attrTypes.string,\n    lastSeenAt: attrTypes.integer,\n    make: attrTypes.string,\n    model: attrTypes.string,\n    modelNumber: attrTypes.string,\n    source: attrTypes.integer,\n    sources: attrTypes.list,\n    title: attrTypes.string,\n    tuners: attrTypes.integer,\n    thumb: attrTypes.string,\n    unsupported: attrTypes.boolean,\n  },\n\n  syncedRelations: {\n    prefs: {\n      relationClass: MediaSettingCollection,\n      rootPropertyName: 'Setting',\n      deferred: true,\n      save: true,\n    },\n  },\n\n  defaults: {\n    isChannelsPending: false,\n    isChannelsPopulated: false,\n    channelsError: null,\n    isSaving: false,\n    saveError: null,\n    unsupported: false,\n  },\n});\n\nexport default MediaGrabberDeviceModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport MediaGrabberDeviceModel from './MediaGrabberDeviceModel';\n\nconst MediaGrabberDeviceCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'MediaGrabberDeviceCollection',\n  context: ['server'],\n\n  model: MediaGrabberDeviceModel,\n  url: '/media/grabbers/devices',\n});\n\nexport default MediaGrabberDeviceCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport MediaGrabberDeviceCollection from 'app/js/models/provider/grabber/MediaGrabberDeviceCollection';\nimport MediaSettingCollection from 'app/js/models/subscription/MediaSettingCollection';\n\nconst DVRModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'DVRModel',\n  context: ['server'],\n\n  rootPropertyName: 'Dvr',\n  idAttribute: 'key',\n\n  syncedAttrs: {\n    key: attrTypes.integer,\n  },\n\n  sessionAttrs: {\n    isSaving: attrTypes.boolean,\n    saveError: attrTypes.object,\n  },\n\n  syncedRelations: {\n    devices: {\n      relationClass: MediaGrabberDeviceCollection,\n      rootPropertyName: 'Device',\n    },\n\n    prefs: {\n      relationClass: MediaSettingCollection,\n      rootPropertyName: 'Setting',\n      deferred: true,\n      save: true,\n    },\n  },\n\n  defaults: {\n    isSaving: false,\n    saveError: null,\n  },\n});\n\nexport default DVRModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport DVRModel from './DVRModel';\n\nconst DVRCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'DVRCollection',\n  context: ['server'],\n\n  model: DVRModel,\n  url: '/livetv/dvrs',\n});\n\nexport default DVRCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport parser2 from 'app/js/utils/parser2';\n\nfunction createResponseType(typeName: any, options: any) {\n  options || (options = {});\n\n  const type = _.defaults(options, {\n    typeName: typeName,\n    parse: _.bind(parser2.parseType, parser2, typeName),\n  });\n\n  return type;\n}\n\nexport const xml = createResponseType('xml', { accept: 'application/xml' });\nexport const json = createResponseType('json', { accept: 'application/json' });\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nexport const text = createResponseType('text');\n","import AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport * as responseTypes from 'app/js/models/responseTypes';\n\nconst AgentAttributionModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'AgentAttributionModel',\n  context: ['server'],\n\n  responseType: responseTypes.text,\n\n  syncedAttrs: {\n    content: attrTypes.string,\n  },\n\n  url: function () {\n    return '/system/agents/attribution?identifier=' + this.parent.id;\n  },\n\n  //\n  // Control\n\n  augmentResponse: function (response: any) {\n    return { content: response };\n  },\n});\n\nexport default AgentAttributionModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport getLanguageName from 'app/js/utils/language/getLanguageName';\n\nconst LanguageModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'LanguageModel',\n  context: ['server'],\n  idAttribute: 'code',\n  rootPropertyName: 'Language',\n  syncedAttrs: {\n    code: attrTypes.string,\n    title: attrTypes.string,\n    default: attrTypes.boolean,\n  },\n  derivedAttrs: {\n    name: function () {\n      return (\n        (this as any).get('title') || getLanguageName((this as any).get('code'))\n      );\n    },\n  },\n});\nexport default LanguageModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport languages from './languages';\n\nexport default function getLanguageName(code: any) {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  return languages[code] || '';\n}\n","import AbstractCollection from 'app/js/models/AbstractCollection';\nimport LanguageModel from './LanguageModel';\n\nconst LanguageCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'LanguageCollection',\n  context: ['server'],\n\n  model: LanguageModel,\n  comparator: 'name',\n});\n\nexport default LanguageCollection;\n","import AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport AgentAttributionModel from './AgentAttributionModel';\nimport LanguageCollection from './LanguageCollection';\n\nconst AgentModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'AgentModel',\n  context: ['server'],\n\n  idAttribute: 'identifier',\n  rootPropertyName: 'Agent',\n\n  sessionAttrs: {\n    isPrimary: attrTypes.boolean,\n    selected: attrTypes.boolean,\n  },\n\n  sessionRelations: {\n    attribution: {\n      relationClass: AgentAttributionModel,\n    },\n  },\n\n  syncedAttrs: {\n    identifier: attrTypes.string,\n    name: attrTypes.string,\n    enabled: attrTypes.boolean,\n    hasPrefs: attrTypes.boolean,\n\n    // Order is only used when saving an agent after reordering.\n    order: attrTypes.string,\n  },\n\n  syncedRelations: {\n    languages: {\n      relationClass: LanguageCollection,\n      rootPropertyName: 'Language',\n    },\n  },\n});\n\nexport default AgentModel;\n","import _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport CollectionCache from 'app/js/utils/cache/CollectionCache';\nimport AgentModel from './AgentModel';\n\nconst AgentCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'AgentCollection',\n  context: ['server', 'mediaTypeID', 'primaryAgentID', 'relatedAgentID'],\n\n  model: AgentModel,\n\n  cache: new CollectionCache(),\n  cacheKey: function () {\n    const url = _.result(this, 'url');\n\n    return this.server?.getScopedKey(url);\n  },\n\n  url: function () {\n    const path = '/system/agents';\n\n    if (this.primaryAgentID) {\n      return (\n        path +\n        '/contributors?mediaType=' +\n        this.mediaTypeID +\n        '&primaryAgent=' +\n        this.primaryAgentID\n      );\n    } else if (this.relatedAgentID) {\n      return path + '/' + this.relatedAgentID + '/config/' + this.mediaTypeID;\n    } else if (this.mediaTypeID) {\n      return path + '?mediaType=' + this.mediaTypeID;\n    } else {\n      return path;\n    }\n  },\n\n  //\n  // Control\n\n  hasExclusiveAgent: function (exclusiveAgents: any) {\n    return !!_.intersection(this.pluck('identifier'), exclusiveAgents).length;\n  },\n});\n\nexport default AgentCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport config from 'app/js/models/config';\nimport * as ip from 'app/js/utils/url/ip';\nimport ConnectionModel from './ConnectionModel';\n\nexport const connectionComparator = (a: any, b: any) => {\n  if (!a.get('relay') && b.get('relay')) {\n    return a;\n  }\n  if (!b.get('relay') && a.get('relay')) {\n    return b;\n  }\n\n  if (!a.get('isLoopback') && b.get('isLoopback')) {\n    return b;\n  }\n  if (!b.get('isLoopback') && a.get('isLoopback')) {\n    return a;\n  }\n\n  if (!a.get('isPrivate') && b.get('isPrivate')) {\n    return b;\n  }\n  if (!b.get('isPrivate') && a.get('isPrivate')) {\n    return a;\n  }\n\n  if (!a.get('isHttps') && b.get('isHttps')) {\n    return b;\n  }\n  if (!b.get('isHttps') && a.get('isHttps')) {\n    return a;\n  }\n\n  // Prefer the former one for stable best connection\n  return a;\n};\n\nconst ConnectionCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ConnectionCollection',\n  context: ['server'],\n\n  model: ConnectionModel,\n\n  //\n  // Control\n\n  getBestConnection() {\n    const allowHttpsMediaServerConnections =\n      config.allowHttpsMediaServerConnections;\n    const allowHttps =\n      !this.server ||\n      this.server.get('isCloud') ||\n      allowHttpsMediaServerConnections;\n\n    const availableConnections = this.filter(\n      (connection: any) =>\n        connection.get('isConnected') &&\n        (allowHttps || !connection.get('isHttps'))\n    );\n\n    if (!availableConnections.length) {\n      return;\n    }\n\n    return _.reduce(availableConnections, connectionComparator);\n  },\n\n  hasBetterConnectionCandidates() {\n    const activeConnection = this.server && this.server.get('activeConnection');\n\n    return this.some((connection: any) => {\n      const isPending =\n        connection.get('isUntested') || connection.get('isPending');\n      const isBetter = activeConnection\n        ? connection !== activeConnection &&\n          connectionComparator(connection, activeConnection) === connection\n        : true;\n      return isPending && isBetter;\n    });\n  },\n\n  hasOnlyFailedConnections() {\n    return this.every((connection: any) => connection.get('isFailed'));\n  },\n\n  hasFailedEveryDirectConnection() {\n    return this.where({ relay: false }).every((connection: any) =>\n      connection.get('isFailed')\n    );\n  },\n\n  hasMultiplePrivateV4Subnets() {\n    let knownSubnet: any;\n\n    // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n    return this.some((connection: any) => {\n      const address = connection.get('address');\n      if (connection.get('isPrivate') && ip.isValidV4Address(address)) {\n        const subnet = ip.getV4Subnet(address);\n        if (!knownSubnet) {\n          knownSubnet = subnet;\n        }\n        return knownSubnet !== subnet;\n      }\n    });\n  },\n});\n\nexport default ConnectionCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ConnectionSourceModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ConnectionSourceModel',\n  context: ['server'],\n\n  sessionAttrs: {\n    id: attrTypes.string, // e.g. myPlex, internal\n  },\n});\n\nexport default ConnectionSourceModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ConnectionSourceModel from './ConnectionSourceModel';\n\nconst ConnectionSourceCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ConnectionSourceCollection',\n  context: ['server'],\n\n  model: ConnectionSourceModel,\n});\n\nexport default ConnectionSourceCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport * as connectionTestStates from 'app/js/utils/constants/server/connectionTestStates';\nimport assert from 'app/js/utils/log/assert';\nimport getIpAddressFromPlexDirectAddress from 'app/js/utils/url/getIpAddressFromPlexDirectAddress';\nimport * as ip from 'app/js/utils/url/ip';\nimport path from 'app/js/utils/url/path';\nimport ConnectionSourceCollection from './ConnectionSourceCollection';\n\nconst requiredBoolean = attrTypes.boolean.isRequired;\nconst ConnectionModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'ConnectionModel',\n  context: ['server'],\n  idAttribute: 'uri',\n  sessionAttrs: {\n    // The currentTest attribute should be an object that allows the test to be\n    // aborted (e.g. jqXHR from $.ajax).\n    currentTest: attrTypes.custom(\n      (value: any) =>\n        Array.isArray(value) && value.every((v) => _.isFunction(v.abort))\n    ),\n    testState: attrTypes.oneOf(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 6.\n      connectionTestStates.UNTESTED,\n      connectionTestStates.PENDING,\n      connectionTestStates.CONNECTED,\n      connectionTestStates.UNAUTHORIZED,\n      connectionTestStates.UNAVAILABLE,\n      connectionTestStates.ABORTED\n    ).isRequired,\n    isBundled: requiredBoolean,\n    isFallback: requiredBoolean,\n  },\n  sessionRelations: {\n    sources: {\n      relationClass: ConnectionSourceCollection,\n    },\n  },\n  syncedAttrs: {\n    uri: attrTypes.string,\n    scheme: attrTypes.string,\n    address: attrTypes.string,\n    port: attrTypes.string,\n    relay: attrTypes.boolean,\n  },\n  derivedAttrs: {\n    isUntested() {\n      return (this as any).get('testState') === connectionTestStates.UNTESTED;\n    },\n    isPending() {\n      return (this as any).get('testState') === connectionTestStates.PENDING;\n    },\n    isConnected() {\n      return (this as any).get('testState') === connectionTestStates.CONNECTED;\n    },\n    isUnauthorized() {\n      return (\n        (this as any).get('testState') === connectionTestStates.UNAUTHORIZED\n      );\n    },\n    isUnavailable() {\n      return (\n        (this as any).get('testState') === connectionTestStates.UNAVAILABLE\n      );\n    },\n    isFailed() {\n      return (\n        (this as any).get('isUnauthorized') ||\n        (this as any).get('isUnavailable')\n      );\n    },\n    isAborted() {\n      return (this as any).get('testState') === connectionTestStates.ABORTED;\n    },\n    isLoopback() {\n      const address = (this as any).get('address');\n      return address === 'localhost' || ip.isLoopbackAddress(address);\n    },\n    isPrivate() {\n      return (\n        (this as any).get('isLoopback') ||\n        ip.isPrivateAddress((this as any).get('address'))\n      );\n    },\n    isHttps() {\n      return (this as any).get('scheme') === 'https';\n    },\n    isSecure() {\n      return (this as any).get('isLoopback') || (this as any).get('isHttps');\n    },\n    isPlexDirect() {\n      return /\\.plex\\.direct:/.test((this as any).get('uri'));\n    },\n  },\n  defaults: {\n    testState: connectionTestStates.UNTESTED,\n    isBundled: false,\n    isFallback: false,\n    relay: false,\n  },\n  url() {\n    return this.get('uri');\n  },\n  //\n  // Init\n  constructor: function (attrs: any, options: any) {\n    const clonedAttrs = _.clone(attrs);\n    // Ensure that a uri exists since it is used for the connection id and url.\n    if (_.isObject(attrs) && !attrs.uri) {\n      assert(\n        attrs.scheme && attrs.address,\n        `A server connection requires either a uri or a scheme and address. ${attrs.scheme}://${attrs.address}`\n      );\n      clonedAttrs.uri = `${attrs.scheme}://${attrs.address}`;\n      if (attrs.port) {\n        clonedAttrs.uri += ':' + attrs.port;\n      }\n    }\n    AbstractModel.prototype.constructor.call(this, clonedAttrs, options);\n  },\n  initialize() {\n    this.listenTo(this.get('sources'), 'remove reset', this.onSourcesChange);\n  },\n  //\n  // Control\n  augmentResponse(response: any) {\n    // Connections from `/api/resources` use the attribute name \"protocol\"\n    // instead of \"scheme\".\n    const protocol = response.protocol;\n    if (protocol) {\n      return _.extend({}, response, { scheme: protocol });\n    }\n    return response;\n  },\n  getAddressFromUri() {\n    return path.parseUrl(this.get('uri')).hostname;\n  },\n  getIpAddressFromPlexDirectAddress() {\n    return getIpAddressFromPlexDirectAddress(this.get('address'));\n  },\n  getLoopbackAttributes() {\n    const loopbackConnection = {\n      scheme: 'http',\n      address: '127.0.0.1',\n      port: this.get('port'),\n    };\n    return loopbackConnection;\n  },\n  hasSource(sourceID: any) {\n    return this.get('sources').some((source: any) => {\n      return sourceID && source.get('id') === sourceID;\n    });\n  },\n  //\n  // Listeners\n  onSourcesChange() {\n    // A connection should not exist without any sources. If all sources are\n    // removed, destroy the connection.\n    if (!this.get('sources').length) {\n      this.trigger('destroy', this, this.collection);\n    }\n  },\n});\nexport default ConnectionModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function getIpAddressFromPlexDirectAddress(address: any) {\n  if (/\\.plex\\.direct$/.test(address)) {\n    const delimiter = address.indexOf('.');\n\n    if (delimiter > 0) {\n      address = address.substring(0, delimiter);\n      address = address.replace(/-/g, '.');\n    }\n  }\n\n  return address;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport log from 'app/js/utils/log/log';\n\nexport const SIGN_IN_STATE_OK = 'ok';\nexport const SIGN_IN_STATE_NONE = 'none';\nexport const SIGN_IN_STATE_UNKNOWN = 'unknown';\nexport const SIGN_IN_STATE_INVALID = 'invalid';\nexport const MAPPING_STATE_UNKNOWN = 'unknown';\nexport const MAPPING_STATE_WAITING = 'waiting';\nexport const MAPPING_STATE_FAILED = 'failed';\nexport const MAPPING_STATE_MAPPED = 'mapped';\nexport const MAPPING_ERROR_BAD_AUTH = 'badauth';\nexport const MAPPING_ERROR_UNREACHABLE = 'unreachable';\nexport const MAPPING_ERROR_MY_PLEX_GONE = 'myplexgone';\nexport const MAPPING_ERROR_PUBLISH_ERROR = 'publisherror';\nexport const MAPPING_ERROR_DOUBLE_NAT = 'doublenat';\nexport const MAPPING_ERROR_JUMBO_FRAMES = 'jumboframes';\nexport const MAPPING_ERROR_NONE = '';\nexport const REMOTE_ACCESS_STATE_OK = 'ok';\nexport const REMOTE_ACCESS_STATE_CONNECTING = 'connecting';\nexport const REMOTE_ACCESS_STATE_DISCONNECTING = 'disconnecting';\nexport const REMOTE_ACCESS_STATE_UNREACHABLE = 'unreachable';\nexport const REMOTE_ACCESS_STATE_UNKNOWN = '';\nconst ServerCloudAccountModel = AbstractModel.extend({\n  //\n  // Properties\n  context: ['server'],\n  url: '/myplex/account',\n  responseType: responseTypes.json,\n  sessionAttrs: {\n    remoteAccessState: attrTypes.oneOf(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 5.\n      REMOTE_ACCESS_STATE_CONNECTING,\n      REMOTE_ACCESS_STATE_DISCONNECTING,\n      REMOTE_ACCESS_STATE_UNREACHABLE,\n      REMOTE_ACCESS_STATE_OK,\n      REMOTE_ACCESS_STATE_UNKNOWN\n    ),\n  },\n  syncedAttrs: {\n    username: attrTypes.string,\n    mappingState: attrTypes.oneOf(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 4.\n      MAPPING_STATE_UNKNOWN,\n      MAPPING_STATE_WAITING,\n      MAPPING_STATE_FAILED,\n      MAPPING_STATE_MAPPED\n    ),\n    mappingError: attrTypes.oneOf(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 7.\n      MAPPING_ERROR_BAD_AUTH,\n      MAPPING_ERROR_UNREACHABLE,\n      MAPPING_ERROR_MY_PLEX_GONE,\n      MAPPING_ERROR_PUBLISH_ERROR,\n      MAPPING_ERROR_DOUBLE_NAT,\n      MAPPING_ERROR_JUMBO_FRAMES,\n      MAPPING_ERROR_NONE\n    ),\n    signInState: attrTypes.oneOf(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 4.\n      SIGN_IN_STATE_NONE,\n      SIGN_IN_STATE_UNKNOWN,\n      SIGN_IN_STATE_INVALID,\n      SIGN_IN_STATE_OK\n    ),\n    publicAddress: attrTypes.string,\n    publicPort: attrTypes.integer,\n    privateAddress: attrTypes.string,\n    privatePort: attrTypes.integer,\n    subscriptionActive: attrTypes.boolean,\n    subscriptionState: attrTypes.string,\n  },\n  derivedAttrs: {\n    signedIn() {\n      return (this as any).get('signInState') === SIGN_IN_STATE_OK;\n    },\n    isWaiting() {\n      const remoteAccessState = (this as any).get('remoteAccessState');\n      return (\n        remoteAccessState === REMOTE_ACCESS_STATE_CONNECTING ||\n        remoteAccessState === REMOTE_ACCESS_STATE_DISCONNECTING\n      );\n    },\n  },\n  defaults: {\n    signedIn: false,\n    mappingState: null,\n    mappingError: null,\n    signInState: null,\n    publicAddress: null,\n    publicPort: null,\n    privateAddress: null,\n    privatePort: null,\n  },\n  //\n  // Control\n  isNew() {\n    return !this.get('signedIn');\n  },\n  augmentResponse(response: any) {\n    let json = response.MyPlex;\n    if (!json) {\n      log.warn(\n        `[Account] Failed to get reachable information for account - received ${JSON.stringify(\n          response\n        )}`\n      );\n      json = {};\n    }\n    const signedIn = json.signInState === SIGN_IN_STATE_OK;\n    if (!signedIn) {\n      json.username = null;\n    }\n    const isUnreachable = !signedIn || json.mappingError;\n    const isOk = !isUnreachable && json.mappingState === MAPPING_STATE_MAPPED;\n    if (isUnreachable) {\n      json.remoteAccessState = REMOTE_ACCESS_STATE_UNREACHABLE;\n    } else if (isOk) {\n      json.remoteAccessState = REMOTE_ACCESS_STATE_OK;\n    }\n    return json;\n  },\n});\nexport default ServerCloudAccountModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport MetadataModel from 'app/js/models/metadata/MetadataModel';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\n\nconst PlaylistItemModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'PlaylistItemModel',\n\n  context: ['server', 'provider', 'playlist'],\n\n  entityType: entityTypes.PLAYLIST_ITEM,\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    // Smart playlists don't have a playlistItemID but have unique keys\n    return createEntityID(\n      this.entityType,\n      state.playlistItemID || state.key,\n      this.server.entityID()\n    );\n  },\n\n  idAttribute: 'playlistItemID',\n\n  syncedAttrs: {\n    playlistItemID: attrTypes.string,\n    key: attrTypes.string,\n    type: attrTypes.string,\n  },\n\n  syncedRelations: {\n    metadataItem: {\n      relationClass: MetadataModel,\n      deferred: true,\n    },\n  },\n\n  //\n  // Control\n\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'response' implicitly has an 'any' type.\n  augmentResponse(response) {\n    // Split the metadata item from the playlist item.\n    return {\n      playlistItemID: response.playlistItemID,\n      key: response.key,\n      type: response.type,\n      metadataItem: response,\n    };\n  },\n});\n\nexport default PlaylistItemModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport PlaylistItemModel from './PlaylistItemModel';\n\nconst PlaylistItemCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'PlaylistItemCollection',\n\n  context: ['server', 'provider', 'playlist'],\n\n  model: PlaylistItemModel,\n});\n\nexport default PlaylistItemCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport paginatedListModelMixin from 'app/js/models/mixins/paginatedListModelMixin';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport replaceMetadataXMLElementNames from 'app/js/utils/parser/replaceMetadataXMLElementNames';\nimport path from 'app/js/utils/url/path';\nimport PlaylistItemCollection from './PlaylistItemCollection';\n\nconst PlaylistItemListModel = AbstractModel.extend({\n  mixins: [paginatedListModelMixin],\n\n  //\n  // Properties\n\n  name: 'PlaylistItemListModel',\n  context: ['server', 'provider', 'playlist', 'includeExternalMedia'],\n\n  idAttribute: 'key',\n  collectionName: 'metadataItems',\n\n  url() {\n    let url = this.getPaginatedUrl(this.get('containerKey'));\n\n    if (this.includeExternalMedia) {\n      url = path.join(url, { includeExternalMedia: 1 });\n    }\n\n    return url;\n  },\n\n  sessionAttrs: {\n    containerKey: attrTypes.string,\n    currentPageStart: attrTypes.integer,\n    currentPageSize: attrTypes.integer,\n    populatedRange: attrTypes.object,\n  },\n\n  syncedAttrs: {\n    totalSize: attrTypes.integer,\n  },\n\n  syncedRelations: {\n    metadataItems: {\n      relationClass: PlaylistItemCollection,\n      rootPropertyName: 'Metadata',\n\n      setOptions(parseOptions: any) {\n        // `fetchRange` will add these options, which we'll need to provide when\n        // setting models for the collection.\n\n        return {\n          remove: parseOptions.remove,\n          at: parseOptions.at,\n        };\n      },\n    },\n  },\n\n  defaults() {\n    return {\n      populatedRange: {\n        start: 0,\n        end: 0,\n        size: 0,\n      },\n    };\n  },\n\n  //\n  // Init\n\n  initialize() {\n    this.startPopulatedRangeMonitor();\n  },\n\n  //\n  // Control\n\n  augmentResponseText(responseText: any, responseType: any) {\n    return responseType === responseTypes.xml\n      ? // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n        replaceMetadataXMLElementNames(responseText)\n      : responseText;\n  },\n});\n\nexport default PlaylistItemListModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport contentUtil from 'app/js/utils/contentUtil';\nimport path from 'app/js/utils/url/path';\nimport PlaylistItemListModel from './PlaylistItemListModel';\n\nconst PlaylistModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'PlaylistModel',\n  context: ['server', 'containerKey'],\n  idAttribute: 'ratingKey',\n  rootPropertyName: 'Playlist',\n  urlRoot: '/playlists',\n  saveUrl() {\n    if (this.server.supports('truePlaylistsPath')) {\n      return _.result(this, 'url');\n    }\n    return `/library/metadata/${this.id}`;\n  },\n  sessionAttrs: {\n    isPlaylist: attrTypes.boolean,\n    isLibraryItem: attrTypes.boolean,\n  },\n  syncedAttrs: {\n    ratingKey: attrTypes.string,\n    key: attrTypes.string,\n    guid: attrTypes.string,\n    type: attrTypes.string,\n    playlistType: attrTypes.string,\n    title: attrTypes.string,\n    titleSort: attrTypes.string,\n    composite: attrTypes.string,\n    summary: attrTypes.string,\n    smart: attrTypes.boolean,\n    allowSync: attrTypes.boolean,\n    duration: attrTypes.integer,\n    durationInSeconds: attrTypes.integer,\n    leafCount: attrTypes.integer,\n    addedAt: attrTypes.integer,\n    updatedAt: attrTypes.integer,\n  },\n  sessionRelations: {\n    children: {\n      relationClass: PlaylistItemListModel,\n      attrs(data: any) {\n        const params = {};\n        // We need to request related items for tracks so we can discover\n        // Gracenote mixes.\n        if (data.playlistType === 'audio') {\n          (params as any).includeRelated = 1;\n        }\n        return {\n          containerKey: path.join(\n            ['/playlists', data.ratingKey, 'items'],\n            params\n          ),\n        };\n      },\n      options() {\n        return {\n          playlist: this,\n        };\n      },\n    },\n  },\n  defaults: {\n    isPlaylist: true,\n    isLibraryItem: true,\n  },\n  //\n  // Control\n  findItem(id: any) {\n    return this.get('children')\n      .getCollection()\n      .findWhere({ playlistItemID: id });\n  },\n  moveItem(itemID: any, afterItemID: any) {\n    if (itemID === undefined) {\n      return;\n    }\n    const params = afterItemID ? { after: afterItemID } : {};\n    const url = path.join(\n      [_.result(this, 'url'), '/items/', itemID, '/move'],\n      params\n    );\n    const xhrOptions = _.extend(this.server.getXHROptions(url), {\n      type: 'PUT',\n    });\n    const xhrDeferred = $.ajax(xhrOptions);\n    const items = this.get('children').getCollection();\n    const item = this.findItem(itemID);\n    items.remove(item);\n    const afterItem = this.findItem(afterItemID);\n    const spliceAt = afterItem ? items.indexOf(afterItem) + 1 : 0;\n    items.add(item, { at: spliceAt });\n    return xhrDeferred;\n  },\n  removeItem(itemID: any) {\n    if (itemID === undefined) {\n      return;\n    }\n    const url = path.join([_.result(this, 'url'), '/items/', itemID]);\n    const xhrOptions = _.extend(this.server.getXHROptions(url), {\n      type: 'DELETE',\n    });\n    const xhrDeferred = $.ajax(xhrOptions);\n    xhrDeferred.then((response) => {\n      this.set(this.parse(response));\n    });\n    const items = this.get('children').getCollection();\n    const item = this.findItem(itemID);\n    items.remove(item);\n    // We trigger a `destroy` event here so that the paginated collection\n    // updates the `totalSize` of the collection. We call `destroy` on\n    // the collection rather than the item because a consequence of the\n    // latter is the item being removed from every collection that contains\n    // it, something that we don't want in this particular instance.\n    // See https://github.com/plexinc/plex-web-client/issues/6456\n    items.trigger('destroy', item, items);\n    return xhrDeferred;\n  },\n  addContent(item: any, options: any) {\n    const method = this.isNew() ? 'POST' : 'PUT';\n    const segments = [_.result(this, 'url')];\n    const params = {};\n    if (this.isNew()) {\n      (params as any).type = this.get('playlistType');\n      (params as any).title = this.get('title');\n      (params as any).smart = this.get('smart') ? 1 : 0;\n    } else {\n      segments.push('/items');\n    }\n    if (item.get('playQueueID')) {\n      (params as any).playQueueID = item.get('playQueueID');\n    } else {\n      (params as any).uri = contentUtil.uri(item, options);\n    }\n    const url = path.join(segments, params);\n    const xhrOptions = _.extend(item.server.getXHROptions(url), {\n      type: method,\n    });\n    const xhrDeferred = $.ajax(xhrOptions);\n    xhrDeferred.then((response) => {\n      // Both the metadata of the playlist (returned in response) and the\n      // collection of items will have changed on the server\n      this.set(this.parse(response));\n    });\n    return xhrDeferred.promise();\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'identifier' is declared but its value is never re... Remove this comment to see the full error message\n  isLibraryItem(identifier: any, key: any) {\n    return true;\n  },\n  isPlexMusicItem() {\n    return false;\n  },\n});\nexport default PlaylistModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport PlaylistModel from './PlaylistModel';\n\nconst PlaylistCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'PlaylistCollection',\n\n  context: ['server', 'containerKey'],\n\n  model: PlaylistModel,\n\n  url() {\n    return this.containerKey;\n  },\n});\n\nexport default PlaylistCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport paginatedListModelMixin from 'app/js/models/mixins/paginatedListModelMixin';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport path from 'app/js/utils/url/path';\nimport PlaylistCollection from './PlaylistCollection';\n\nconst PlaylistListModel = AbstractModel.extend({\n  mixins: [paginatedListModelMixin],\n  //\n  // Properties\n  name: 'PlaylistListModel',\n  context: ['server', 'section'],\n  idAttribute: 'key',\n  collectionName: 'playlists',\n  responseType() {\n    return getSupportedResponseType(this.server);\n  },\n  url() {\n    return this.getPaginatedUrl(_.result(this, 'containerKey'));\n  },\n  containerKey() {\n    const currentType = this.section.get('currentType');\n    const currentSort = this.section.get('currentSort');\n    const params = {\n      // The explicit type=15 is to get a list of all playlists without folders.\n      type: 15,\n    };\n    if (currentSort) {\n      (params as any).sort =\n        currentSort.id + ':' + (currentSort.get('direction') || 'asc');\n    } else {\n      (params as any).sort = 'titleSort:asc';\n    }\n    if (currentType) {\n      (params as any).playlistType = currentType;\n    }\n    if (this.section.get('onlyDumb')) {\n      (params as any).smart = 0;\n    }\n    return path.join('/playlists/all', params);\n  },\n  sessionAttrs: {\n    isPlaylistList: attrTypes.boolean,\n    currentPageStart: attrTypes.integer,\n    currentPageSize: attrTypes.integer,\n    populatedRange: attrTypes.object,\n  },\n  syncedAttrs: {\n    totalSize: attrTypes.integer,\n  },\n  syncedRelations: {\n    playlists: {\n      relationClass: PlaylistCollection,\n      rootPropertyName: 'Playlist',\n      // @ts-expect-error ts-migrate(6133) FIXME: 'data' is declared but its value is never read.\n      options(data: any) {\n        return {\n          containerKey: _.result(this, 'containerKey'),\n        };\n      },\n      setOptions(parseOptions: any) {\n        // `fetchRange` will add these options, which we'll need to provide when\n        // setting models for the collection.\n        return {\n          remove: parseOptions.remove,\n          at: parseOptions.at,\n        };\n      },\n    },\n  },\n  defaults() {\n    return {\n      isPlaylistList: true,\n      populatedRange: {\n        start: 0,\n        end: 0,\n        size: 0,\n      },\n    };\n  },\n  //\n  // Init\n  initialize() {\n    this.startPopulatedRangeMonitor();\n  },\n  //\n  // Control\n  augmentResponse(data: any) {\n    // Wrapper is named differently depending on JSON or XML response type.\n    // See: https://github.com/plexinc/plex-media-server/issues/7319\n    if (data.Metadata) {\n      data.Playlist = data.Metadata;\n      delete data.Metadata;\n    }\n    return data;\n  },\n});\nexport default PlaylistListModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport BaseModel from 'app/js/models/BaseModel';\nimport SortCollection from 'app/js/models/library/section/SortCollection';\nimport PlaylistListModel from 'app/js/models/metadata/PlaylistListModel';\n\nconst PlaylistsSectionModel = BaseModel.extend({\n  //\n  // Properties\n\n  name: 'PlaylistsSectionModel',\n\n  defaults() {\n    return {\n      pseudo: true,\n      currentType: 0,\n      sorts: new SortCollection([], { section: this, server: this.server }),\n      items: new PlaylistListModel({}, { section: this, server: this.server }),\n    };\n  },\n\n  url() {\n    // Used by the SortCollection when querying available sorts.\n    return '/playlists';\n  },\n});\n\nexport default PlaylistsSectionModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport dimensionsAdapter from 'app/js/adapters/dimensionsAdapter';\nimport commands from 'app/js/commands/commands';\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport addFlexModel from 'app/js/models/addFlexModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport config from 'app/js/models/config';\nimport PlaylistsSectionModel from 'app/js/models/library/PlaylistsSectionModel';\nimport SectionCollection from 'app/js/models/library/section/SectionCollection';\nimport controlledPopulateMixin from 'app/js/models/mixins/controlledPopulateMixin';\nimport preserveMergeStrategy from 'app/js/models/preserveMergeStrategy';\nimport ProviderCollection from 'app/js/models/provider/ProviderCollection';\nimport { addHttpFallbackConnection } from 'app/js/stores/actions/serverActions';\nimport ModelCache from 'app/js/utils/cache/ModelCache';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport isVersionOrNewer from 'app/js/utils/isVersionOrNewer';\nimport assert from 'app/js/utils/log/assert';\nimport log from 'app/js/utils/log/log';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport shortVersion from 'app/js/utils/string/shortVersion';\nimport isAbsoluteUrl from 'app/js/utils/url/isAbsoluteUrl';\nimport path from 'app/js/utils/url/path';\nimport ConnectionCollection from './ConnectionCollection';\nimport ConnectionModel from './ConnectionModel';\nimport serverFeatures from './serverFeatures';\n\nexport const connectionTestResults = {\n  PENDING: 'pending',\n  CONNECTED: 'connected',\n  UNAVAILABLE: 'unavailable',\n  UNAUTHORIZED: 'unauthorized',\n};\nconst promiseStates = {\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\nconst serverClasses = {\n  SECONDARY: 'secondary',\n};\nconst legacyOwnerFeatures = [\n  'camera_upload',\n  'content_filter',\n  'home',\n  'lyrics',\n  'music_videos',\n  'pass',\n  'premium_music_metadata',\n  'sync',\n  'trailers',\n];\nexport const MY_PLEX_SIGN_IN_STATE_OK = 'ok';\nexport const MY_PLEX_SIGN_IN_STATE_NONE = 'none';\nexport const MY_PLEX_SIGN_IN_STATE_INVALID = 'invalid';\nconst entityType = entityTypes.SERVER;\n// @ts-expect-error ts-migrate(7031) FIXME: Binding element 'machineIdentifier' implicitly has... Remove this comment to see the full error message\nexport function createServerEntityID({ machineIdentifier }) {\n  return createEntityID(entityType, machineIdentifier);\n}\nconst ServerModel = AbstractModel.extend(\n  {\n    mixins: [controlledPopulateMixin],\n    //\n    // Properties\n    name: 'ServerModel',\n    entityType,\n    // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n    entityID(state = this.state) {\n      // The server may not have a machine identifier initially if instantiated as\n      // a loopback or bundled server, so fallback to the model's cid.\n      return createServerEntityID({\n        machineIdentifier: state.machineIdentifier || this.cid,\n      });\n    },\n    idAttribute: 'machineIdentifier',\n    connectionTestTimeout: 10000,\n    responseType() {\n      return getSupportedResponseType(this);\n    },\n    mergeStrategy: preserveMergeStrategy,\n    cache: new ModelCache(),\n    persistInCache: true,\n    sessionAttrs: {\n      connectionTestResult: attrTypes.oneOf(\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 4.\n        connectionTestResults.PENDING,\n        connectionTestResults.CONNECTED,\n        connectionTestResults.UNAVAILABLE,\n        connectionTestResults.UNAUTHORIZED\n      ).isRequired,\n      promiseState: attrTypes.oneOf(\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 3.\n        promiseStates.PENDING,\n        promiseStates.RESOLVED,\n        promiseStates.REJECTED\n      ).isRequired,\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n      sections: attrTypes.instanceOf(SectionCollection).isRequired,\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n      playlists: attrTypes.instanceOf(PlaylistsSectionModel).isRequired,\n      isShared: attrTypes.boolean.isRequired,\n      isBundled: attrTypes.boolean.isRequired,\n      isCloud: attrTypes.boolean.isRequired,\n      isMerged: attrTypes.boolean.isRequired,\n      isEmbedded: attrTypes.boolean.isRequired,\n      isInstallingServerUpdate: attrTypes.boolean.isRequired,\n      // A super token can be passed as an attribute for a server by plex.tv. This\n      // is set on on the server during the initial setup process.\n      superToken: attrTypes.string,\n      // These attributes come from resources (ResourceModel) and do not exist in\n      // a server's root xml.\n      accessToken: attrTypes.string,\n      sourceTitle: attrTypes.string,\n      publicAddressMatches: attrTypes.boolean,\n      httpsRequired: attrTypes.boolean,\n      presence: attrTypes.boolean,\n      home: attrTypes.boolean,\n      createdAt: attrTypes.integer,\n      lastSeenAt: attrTypes.integer,\n      ownerId: attrTypes.integer,\n      hasEventConnection: attrTypes.boolean,\n      // It's in sessionAttrs instead of syncedAttrs because we don't use the\n      // value from the server response, inferring it from others.\n      // See ServerManager/_convertResourceToServer\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n      serverClass: attrTypes.oneOf(serverClasses.SECONDARY),\n      // An override to respond with XML when we don't have enough detail from the\n      // server attributes to determine the correct response type\n      onlyXML: attrTypes.boolean,\n      isProvidersPending: attrTypes.boolean.isRequired,\n      isProvidersPopulated: attrTypes.boolean.isRequired,\n      providersError: attrTypes.object,\n    },\n    sessionRelations: {\n      activeConnection: {\n        relationClass: ConnectionModel,\n        deferred: true,\n      },\n      connections: {\n        relationClass: ConnectionCollection,\n        options() {\n          return { server: this };\n        },\n      },\n    },\n    syncedRelations: {\n      providers: {\n        relationClass: ProviderCollection,\n        rootPropertyName: 'MediaProvider',\n        options() {\n          return { server: this };\n        },\n      },\n    },\n    syncedAttrs: {\n      machineIdentifier: attrTypes.string,\n      friendlyName: attrTypes.string,\n      startState: attrTypes.string,\n      version: attrTypes.string,\n      platform: attrTypes.string,\n      platformVersion: attrTypes.string,\n      sync: attrTypes.boolean,\n      backgroundProcessing: attrTypes.boolean,\n      multiuser: attrTypes.boolean,\n      transcoderLyrics: attrTypes.boolean,\n      myPlex: attrTypes.boolean,\n      myPlexMappingState: attrTypes.string,\n      myPlexSigninState: attrTypes.oneOf(\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 3.\n        MY_PLEX_SIGN_IN_STATE_OK,\n        MY_PLEX_SIGN_IN_STATE_NONE,\n        MY_PLEX_SIGN_IN_STATE_INVALID\n      ),\n      myPlexSubscription: attrTypes.boolean,\n      myPlexUsername: attrTypes.string,\n      transcoderPhoto: attrTypes.boolean,\n      transcoderAudio: attrTypes.boolean,\n      transcoderVideo: attrTypes.boolean,\n      transcoderVideoRemuxOnly: attrTypes.boolean,\n      transcoderSubtitles: attrTypes.boolean,\n      transcoderActiveVideoSessions: attrTypes.integer,\n      allowMediaDeletion: attrTypes.boolean,\n      allowChannelAccess: attrTypes.boolean,\n      allowSync: attrTypes.boolean,\n      diagnostics: attrTypes.list,\n      companionProxy: attrTypes.boolean,\n      updater: attrTypes.boolean,\n      isDesktop: attrTypes.boolean,\n      photoAutoTag: attrTypes.boolean,\n      itemClusters: attrTypes.boolean,\n      updatedAt: attrTypes.integer,\n      countryCode: attrTypes.string,\n      ownerFeatures: attrTypes.list,\n      mediaProviders: attrTypes.integer,\n      maxUploadBitrate: attrTypes.integer,\n      maxUploadBitrateReason: attrTypes.string,\n      maxUploadBitrateReasonMessage: attrTypes.string,\n      streamingBrainABRVersion: attrTypes.integer,\n      livetv: attrTypes.integer,\n      // This is undefined in a signed out server.\n      audiobook: attrTypes.boolean,\n      // This is undefined in a signed out server.\n      games: attrTypes.boolean,\n    },\n    derivedAttrs: {\n      debugName() {\n        // Use the `get` function instead of the id property since derived\n        // attributes rely on spying on get.\n        const id = (this as any).get('machineIdentifier');\n        const connections = (this as any).get('connections');\n        const hasOnlyLoopbackConnection =\n          connections.length === 1 && connections.at(0).get('isLoopback');\n        let name = (this as any).get('friendlyName');\n        if (!name && (this as any).get('isBundled')) {\n          name = '[Bundled]';\n        } else if (!name && hasOnlyLoopbackConnection) {\n          name = '[Loopback]';\n        }\n        return name || (id ? `[${id}]` : '[Anonymous]');\n      },\n      shortVersion() {\n        return shortVersion((this as any).get('version'));\n      },\n      isConnected() {\n        return (\n          (this as any).get('connectionTestResult') ===\n          connectionTestResults.CONNECTED\n        );\n      },\n      isUnavailable() {\n        return (\n          (this as any).get('connectionTestResult') ===\n          connectionTestResults.UNAVAILABLE\n        );\n      },\n      isUnauthorized() {\n        return (\n          (this as any).get('connectionTestResult') ===\n          connectionTestResults.UNAUTHORIZED\n        );\n      },\n      isPending() {\n        return (this as any).get('promiseState') === promiseStates.PENDING;\n      },\n      isPrivateConnection() {\n        const activeConnection = (this as any).get('activeConnection');\n        return !!(activeConnection && activeConnection.get('isPrivate'));\n      },\n      isResolved() {\n        return (this as any).get('promiseState') === promiseStates.RESOLVED;\n      },\n      isRejected() {\n        return (this as any).get('promiseState') === promiseStates.REJECTED;\n      },\n      isRelayed() {\n        const activeConnection = (this as any).get('activeConnection');\n        return !!(activeConnection && activeConnection.get('relay'));\n      },\n      isSecure() {\n        const activeConnection = (this as any).get('activeConnection');\n        return !!(activeConnection && activeConnection.get('isSecure'));\n      },\n      hasHttpsConnections() {\n        const connections = (this as any).get('connections');\n        return !!connections.findWhere({ isHttps: true });\n      },\n      hasFallbackConnections() {\n        const connections = (this as any).get('connections');\n        return !!connections.findWhere({ isFallback: true });\n      },\n      isMobileServer() {\n        return (this as any).get('serverClass') === serverClasses.SECONDARY;\n      },\n      isFullServer() {\n        return (\n          !(this as any).get('isCloud') &&\n          !(this as any).get('isMobileServer') &&\n          !(this as any).get('isEmbedded')\n        );\n      },\n      isFullOwnedServer() {\n        return (\n          (this as any).get('isFullServer') && !(this as any).get('isShared')\n        );\n      },\n      isPrimaryEligible() {\n        if (!config.allowMobileServers && (this as any).get('isMobileServer')) {\n          return false;\n        }\n        return (\n          !!(this as any).get('machineIdentifier') &&\n          !(this as any).get('isUnauthorized') &&\n          !(this as any).get('isCloud') &&\n          !(this as any).get('isEmbedded')\n        );\n      },\n      isOutOfDate() {\n        // Mobile servers get their versions from an app version which doesn't\n        // align with PMS versioning.\n        if ((this as any).get('isMobileServer')) {\n          return false;\n        }\n        return !(this as any).isVersionOrNewer(__MIN_SERVER_VERSION__);\n      },\n      isClaimed: function () {\n        return (this as any).get('isConnected')\n          ? (this as any).get('myPlexSigninState') === MY_PLEX_SIGN_IN_STATE_OK\n          : undefined;\n      },\n      hasManualConnection() {\n        const connections = (this as any).get('connections');\n        // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n        return connections.some((connection) => {\n          // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'source' implicitly has an 'any' type.\n          return connection.get('sources').some((source) => {\n            return /^manual/.test(source.id);\n          });\n        });\n      },\n      hasAdaptiveBitrate() {\n        // ABR with DASH stable since streamingBrainABRVersion === 3\n        return (this as any).get('streamingBrainABRVersion') >= 3;\n      },\n      shared() {\n        // DEPRECATED\n        return (this as any).get('isShared');\n      },\n      bundled() {\n        // DEPRECATED\n        return (this as any).get('isBundled');\n      },\n      cloud() {\n        // DEPRECATED\n        return (this as any).get('isCloud');\n      },\n      merged() {\n        // DEPRECATED\n        return (this as any).get('isMerged');\n      },\n      connected() {\n        // DEPRECATED\n        const isPending =\n          (this as any).get('connectionTestResult') ===\n          connectionTestResults.PENDING;\n        return isPending ? null : (this as any).get('isConnected');\n      },\n      available() {\n        // DEPRECATED\n        const isPending =\n          (this as any).get('connectionTestResult') ===\n          connectionTestResults.PENDING;\n        return isPending ? null : !(this as any).get('isUnavailable');\n      },\n      authorized() {\n        // DEPRECATED\n        const isPending =\n          (this as any).get('connectionTestResult') ===\n          connectionTestResults.PENDING;\n        return isPending ? null : (this as any).get('isResolved');\n      },\n      relayed() {\n        // DEPRECATED\n        return (this as any).get('isRelayed');\n      },\n    },\n    defaults() {\n      return {\n        connectionTestResult: connectionTestResults.PENDING,\n        promiseState: promiseStates.PENDING,\n        sections: new SectionCollection([], { server: this }),\n        playlists: new PlaylistsSectionModel({}, { server: this }),\n        isShared: false,\n        isBundled: false,\n        isCloud: false,\n        isMerged: false,\n        isEmbedded: false,\n        isInstallingServerUpdate: false,\n        hasEventConnection: false,\n        sync: false,\n        backgroundProcessing: false,\n        allowChannelAccess: false,\n        updater: true,\n        ownerFeatures: [],\n        audiobook: false,\n        games: false,\n        isProvidersPending: true,\n        isProvidersPopulated: false,\n        providersError: null,\n      };\n    },\n    // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n    url(connection = this.get('activeConnection')) {\n      // Assert precisely in development and generically in production. The\n      // generic assertion message allows for the consolidation of errors across\n      // many media servers.\n      assert(\n        connection,\n        __DEV__\n          ? `${this.get(\n              'debugName'\n            )} requires an active or manual connection to determine server url`\n          : 'An active or manual connection is required for a server url'\n      );\n      let url = _.result(connection, 'url');\n      // Always terminate the url with a forward slash.\n      if (!/\\/$/.test(url)) {\n        url += '/';\n      }\n      return url;\n    },\n    //\n    // Init\n    initialize() {\n      this._reset();\n      this.on('change:machineIdentifier', this.onMachineIdentifierChange, this);\n      this.listenTo(this.get('connections'), {\n        remove: this.onConnectionRemove,\n        reset: this.onConnectionsReset,\n      });\n    },\n    uninitialize() {\n      this.off(\n        'change:machineIdentifier',\n        this.onMachineIdentifierChange,\n        this\n      );\n      this.stopListening();\n    },\n    //\n    // Control\n    updateEntity() {\n      if (!this.get('isMerged')) {\n        // eslint-disable-next-line prefer-rest-params\n        return AbstractModel.prototype.updateEntity.apply(this, arguments);\n      }\n    },\n    fetch() {\n      // Servers have a controlled populate promise. A fetch override allows this\n      // to bypass the `populateMixin`.\n      // eslint-disable-next-line prefer-rest-params\n      return Backbone.Model.prototype.fetch.apply(this, arguments);\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'pathToResolve' implicitly has an 'any' ... Remove this comment to see the full error message\n    resolveUrl(pathToResolve, options = {}) {\n      // Don't resolve the url if it starts with http://, rtmp://, etc.\n      if (isAbsoluteUrl(pathToResolve)) {\n        return pathToResolve;\n      }\n      let url;\n      if ((options as any).useRelativeUrl) {\n        // Android 5.4.3.131 (PMS 1.1.3.39-efd4313) doesn't support relative URLs.\n        // Perhaps iOS and Windows Phone have similar troubles. Use our legacy\n        // loopback for urls until we fully understand their behaviors.\n        // See: https://github.com/plexinc/plex-web-client/issues/6472\n        url = this.get('isMobileServer')\n          ? `http://127.0.0.1:${this.getLoopbackPort()}/`\n          : '';\n      } else {\n        url = (options as any).baseUrl || this.url((options as any).connection);\n      }\n      const token = this.get('accessToken');\n      const params = _.extend({}, (options as any).params);\n      if ((options as any).appendHeaders) {\n        _.defaults(params, this.getHeaders());\n      }\n      if ((options as any).appendToken && token) {\n        // Redirect requests that use CORS must be simple, meaning that the token\n        // must go in the url instead of the headers. If the `appendToken` flag is\n        // passed, send the token as a url param.\n        params['X-Plex-Token'] = token;\n      }\n      return path.join([url, pathToResolve], params);\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'pathToResolve' implicitly has an 'any' ... Remove this comment to see the full error message\n    getXHROptions(pathToResolve, { headers, baseUrl, ...options } = {}) {\n      return {\n        url: this.resolveUrl(pathToResolve, { baseUrl }),\n        dataType: 'text',\n        headers: _.extend(this.getHeaders(), headers),\n        allowHeadersInUrl: true,\n        allowBlacklistedMethodHeaders: this.supports(\n          'allowBlacklistedMethodHeaders'\n        ),\n        ...options,\n      };\n    },\n    getHeaders() {\n      const dimensions = dimensionsAdapter.getInstance();\n      const headers = _.clone(dimensions);\n      const token = this.get('accessToken');\n      if (token) {\n        headers['X-Plex-Token'] = token;\n      }\n      const language = resolve('settingFinder').find('language');\n      if (language) {\n        headers['X-Plex-Language'] = language;\n        headers['Accept-Language'] = language;\n      }\n      return headers;\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connectionAttrs' implicitly has an 'any... Remove this comment to see the full error message\n    addConnection(connectionAttrs) {\n      // Assume the connection came internally if there's not a source explicitly\n      // provided.\n      if (!connectionAttrs.sources) {\n        connectionAttrs.sources = [{ id: 'internal' }];\n      }\n      const connections = this.get('connections');\n      const connection = new ConnectionModel(connectionAttrs);\n      const existingConnection = connections.get(connection.id);\n      if (existingConnection) {\n        // If this connection already exists, just add the new connection's\n        // sources to the existing connection's sources.\n        const existingSources = existingConnection.get('sources');\n        existingSources.set(connectionAttrs.sources, { remove: false });\n        return existingConnection;\n      } else {\n        return connections.add(connectionAttrs);\n      }\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'sourceID' implicitly has an 'any' type.\n    hasSource(sourceID) {\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n      return this.get('connections').some((connection) =>\n        connection.hasSource(sourceID)\n      );\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'sourceID' implicitly has an 'any' type.\n    removeSource(sourceID) {\n      // If a resource disappears and the server has no connections from other\n      // sources, clean up the server. Decrement through through the connections\n      // since connections may be removed as sources are removed.\n      const connections = this.get('connections');\n      let i = connections.length - 1;\n      while (i >= 0) {\n        const connection = connections.at(i);\n        const sources = connection.get('sources');\n        sources.remove(sourceID);\n        i--;\n      }\n    },\n    testAllConnections() {\n      const connections = this.get('connections');\n      log(\n        '[Connections] Testing all %s connection(s) for %s',\n        connections.length,\n        this.get('debugName')\n      );\n      // If a promise was previously resolved or rejected and all connections are\n      // being tested again, it's important to reset the promise to pending so\n      // anything populating the server receives the outcome of the fresh tests.\n      this._reset();\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n      connections.each((connection) => {\n        const isDirect = !connection.get('relay');\n        const isTested = !connection.get('isUntested');\n        if (isDirect || isTested) {\n          this.testConnection(connection);\n        }\n      });\n      return this.populatePromise;\n    },\n    testOnlyUntestedConnections() {\n      const connections = this.get('connections');\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n      connections.each((connection) => {\n        const isDirect = !connection.get('relay');\n        const isUntested = connection.get('isUntested');\n        const isAborted = connection.get('isAborted');\n        if (isDirect && (isUntested || isAborted)) {\n          this.testConnection(connection);\n        }\n      });\n      return this.populatePromise;\n    },\n    testOnlyUntestedRelayConnections() {\n      const connections = this.get('connections');\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n      connections.each((connection) => {\n        const isRelayed = connection.get('relay');\n        const isUntested = connection.get('isUntested');\n        if (isRelayed && isUntested) {\n          this.testConnection(connection);\n        }\n      });\n      return this.populatePromise;\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n    testConnection(connection, options = {}) {\n      (options as any).server = this;\n      (options as any).connection = connection;\n      // If the server already failed all connection tests and we are testing\n      // again, reset since the server may be able to connect after this test.\n      if (this.get('promiseState') === promiseStates.REJECTED) {\n        this._reset();\n      }\n      const promise = commands\n        .execute('testServerConnection', options)\n        .done(this.onConnectionTestSuccess.bind(this))\n        .fail(this.onConnectionTestError.bind(this));\n      return promise;\n    },\n    abortAllConnectionTests() {\n      const connections = this.get('connections');\n      log(\n        '[Connections] Aborting all pending connection tests for',\n        this.get('debugName')\n      );\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n      connections.each((connection) => {\n        this.abortConnectionTest(connection);\n      });\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n    abortConnectionTest(connection) {\n      const options = {\n        server: this,\n        connection,\n      };\n      commands.execute('abortServerConnectionTest', options);\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n    populateIdentity(connection) {\n      if (this._identityPromise) {\n        return this._identityPromise;\n      }\n      const promise = commands.execute('populateServerIdentity', {\n        server: this,\n        connection: connection,\n      });\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'machineIdentifier' implicitly has an 'a... Remove this comment to see the full error message\n      promise.done((machineIdentifier) => {\n        this.set('machineIdentifier', machineIdentifier);\n      });\n      this._identityPromise = promise;\n      return promise;\n    },\n    updateCacheKey() {\n      // If a server starts anonymous (e.g. a bundled server) and later discovers\n      // its `machineIdentifier`, it may collide with an existing server that is\n      // already known.\n      const debugName = this.get('debugName');\n      const cacheKey = this.cacheKey(this.attributes);\n      const cachedServer = this.cache.get(cacheKey);\n      if (cachedServer) {\n        const cachedServerDebugName = cachedServer.get('debugName');\n        log.warn(\n          '[Identity] %s and %s (cached) collide',\n          debugName,\n          cachedServerDebugName\n        );\n        // Prefer merging a failed or pending server into a connected server to\n        // reduce the effect the merge has on the application.\n        if (cachedServer.get('isConnected') || !this.get('isConnected')) {\n          log(\n            '[Identity] Merging %s into %s (cached)',\n            debugName,\n            cachedServerDebugName\n          );\n          cachedServer.merge(this);\n        } else {\n          log(\n            '[Identity] Merging %s (cached) into %s',\n            cachedServerDebugName,\n            debugName\n          );\n          this.merge(cachedServer);\n          this.cache.store(this, cacheKey);\n        }\n      } else {\n        this.cache.store(this, cacheKey);\n      }\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'server' implicitly has an 'any' type.\n    merge(server) {\n      server.set('isMerged', true);\n      // If we're merging the bundled server into a server found in local storage,\n      // make sure we copy over the bundled flag.\n      if (server.get('isBundled')) {\n        this.set('isBundled', true);\n      }\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n      server.get('connections').each((connection) => {\n        this.addConnection(connection.toJSON());\n      });\n      // Use the cid to remove the server since there might be id conflicts that\n      // could lead to Backbone removing the wrong server if we just pass a server\n      // reference or id.\n      if (this.collection) {\n        this.collection.remove(server.cid, { silent: true });\n        // Ensure that the _byId hash points to the surviving server.\n        this.collection._byId[this.id] = this;\n        // Don't trigger the event until after we have set up the reference to the\n        // surviving server.\n        this.collection.trigger('remove', server, this.collection);\n        // Trigger the update event to ensure `update` listeners\n        // are updated even though we silently removed the server.\n        this.collection.trigger('update', this.collection);\n      }\n      this.cache.remove(server);\n      // Ensure the entity model has the correct server in case the entity\n      // previously had the merged server.\n      if (config.shouldCreateStateTree) {\n        this.updateEntity();\n      }\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'feature' implicitly has an 'any' type.\n    hasOwnerFeature(feature) {\n      if (this.supports('ownerFeatures')) {\n        const ownerFeatures = this.get('ownerFeatures');\n        return !!(ownerFeatures && ownerFeatures.indexOf(feature) > -1);\n      }\n      return (\n        !!this.get('myPlexSubscription') &&\n        legacyOwnerFeatures.indexOf(feature) > -1\n      );\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'feature' implicitly has an 'any' type.\n    supports(feature) {\n      const featureFlag = this.get(feature);\n      if (_.isBoolean(featureFlag)) {\n        return featureFlag;\n      }\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      const minVersion = serverFeatures[feature];\n      // Determine if the version of the server is equal to or greater than the\n      // minimum version required for the feature.\n      if (minVersion != null) {\n        return this.isVersionOrNewer(minVersion);\n      }\n      // If the server has no entry for the feature, it isn't supported.\n      return false;\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'minVersion' implicitly has an 'any' typ... Remove this comment to see the full error message\n    isVersionOrNewer(minVersion) {\n      const serverVersion = this.get('shortVersion');\n      if (!minVersion || !serverVersion) {\n        return true;\n      }\n      return isVersionOrNewer(serverVersion, minVersion);\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'regression' implicitly has an 'any' typ... Remove this comment to see the full error message\n    hasRegression(regression) {\n      if (!regression) {\n        return false;\n      }\n      __DEV__ &&\n        assert(\n          regression.introduced,\n          'hasRegression() missing `introduced` attribute'\n        );\n      const isVersionOrNewerThanIntroduced = this.isVersionOrNewer(\n        regression.introduced\n      );\n      const isVersionOrNewerThanResolved =\n        regression.resolved && this.isVersionOrNewer(regression.resolved);\n      return isVersionOrNewerThanIntroduced && !isVersionOrNewerThanResolved;\n    },\n    hasOtherLoopbackServer() {\n      return !!this.collection && this.collection.hasLoopbackServer();\n    },\n    getLoopbackPort() {\n      const connection = this.get('connections').findWhere({ isPrivate: true });\n      return connection ? connection.get('port') : '32400';\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'accessToken' implicitly has an 'any' ty... Remove this comment to see the full error message\n    authenticate(accessToken) {\n      this._resolve({\n        accessToken: accessToken,\n      });\n    },\n    deauthenticate() {\n      this._reject({\n        accessToken: null,\n      });\n    },\n    _reset() {\n      this.startCapturingChangeEvents();\n      this.set('promiseState', promiseStates.PENDING);\n      this._resetPopulate();\n      this.releaseCapturedChangeEvents();\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'attrs' implicitly has an 'any' type.\n    _resolve(attrs) {\n      // Use the attributes for the best connection from its connection test,\n      // which requests the root xml for the server. The root xml will be more\n      // complete than the xml plex.tv provides for a server.\n      const resolvedAttrs = _.extend(\n        {\n          connectionTestResult: connectionTestResults.CONNECTED,\n          promiseState: promiseStates.RESOLVED,\n        },\n        attrs\n      );\n      // Capture all change events so the attributes are set when any promise\n      // callbacks are invoked while delaying the triggering of change events\n      // until the promise's state is resolved. This ensures all callbacks and\n      // event listeners get the complete representation of the resolved server.\n      this.startCapturingChangeEvents();\n      this.set(resolvedAttrs);\n      // Loopback servers have an `entityID` created with the models `cID`. The\n      // `computedEntityID` does not get updated in time due to the change events\n      // being captured. We force `updateState` here to avoid relations getting\n      // set with a stale `computedEntityID`.\n      if (config.shouldCreateStateTree) {\n        this.updateState();\n      }\n      this._resolvePopulate();\n      this.releaseCapturedChangeEvents();\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'attrs' implicitly has an 'any' type.\n    _reject(attrs) {\n      const connections = this.get('connections');\n      // The `ServerModel` should always have only failed connections when\n      // rejecting, but other types of servers using this method may not need only\n      // failed connections to reject.\n      if (connections.hasOnlyFailedConnections()) {\n        log.warn(\n          '[Connections] All connections to %s failed',\n          this.get('debugName')\n        );\n      }\n      // If any connection has failed due to authorization, consider the entire\n      // result unauthorized.\n      const connectionTestResult = connections.findWhere({\n        isUnauthorized: true,\n      })\n        ? connectionTestResults.UNAUTHORIZED\n        : connectionTestResults.UNAVAILABLE;\n      const rejectedAttrs = _.extend(\n        {\n          connectionTestResult: connectionTestResult,\n          promiseState: promiseStates.REJECTED,\n        },\n        attrs\n      );\n      // Capture all change events so the attributes are set when any promise\n      // callbacks are invoked while delaying the triggering of change events\n      // until the promise's state is rejected. This ensures all callbacks and\n      // event listeners get the complete representation of the rejected server.\n      this.startCapturingChangeEvents();\n      this.set(rejectedAttrs);\n      this._rejectPopulate();\n      this.releaseCapturedChangeEvents();\n    },\n    _checkActiveConnection() {\n      const activeConnection = this.get('activeConnection');\n      const connections = this.get('connections');\n      // If the active connection is removed, then we need to find a new active\n      // connection. If there are no other candidates, test all connections\n      // again, which will reject the server if it is unavailable without the\n      // connection that was removed.\n      if (activeConnection && !connections.contains(activeConnection)) {\n        const bestConnection = connections.getBestConnection();\n        if (bestConnection) {\n          this.set({\n            activeConnection: bestConnection,\n          });\n        } else {\n          this.testAllConnections();\n        }\n      }\n    },\n    //\n    // Listeners\n    // @ts-expect-error ts-migrate(6133) FIXME: 'server' is declared but its value is never read.\n    onMachineIdentifierChange(server, machineIdentifier) {\n      // The collection's model event listener will fire after this listener,\n      // overwriting the changes we make to the collection's _byId hash if we need\n      // to merge servers together. Make sure that we don't merge until after the\n      // collection has been updated.\n      if (this.collection) {\n        this.listenToOnce(\n          this.collection,\n          'change:machineIdentifier',\n          function () {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this.updateCacheKey();\n          }\n        );\n      } else {\n        this.updateCacheKey();\n      }\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n    onConnectionRemove(connection, connections) {\n      // A server should not exist without any connections. If all connections are\n      // removed, destroy the server.\n      if (connections.length) {\n        this._checkActiveConnection();\n      } else {\n        // Manually trigger the `change:connections.remove` event because\n        // destroying the server will remove event forwarding in the servers\n        // collection for this server before the event can bubble up through the\n        // collection.\n        this.trigger('change:connections.remove', connection, connections);\n        this.trigger('change:connections.change', this, connections);\n        this.trigger('destroy', this, this.collection);\n      }\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connections' implicitly has an 'any' ty... Remove this comment to see the full error message\n    onConnectionsReset(connections, options) {\n      // A server should not exist without any connections. If all connections are\n      // removed, destroy the server.\n      if (connections.length) {\n        this._checkActiveConnection();\n      } else {\n        // Manually trigger the `change:connections.reset` event because\n        // destroying the server will remove event forwarding in the servers\n        // collection for this server before the event can bubble up through the\n        // collection.\n        this.trigger('change:connections.reset', connections, options);\n        this.trigger('change:connections.change', this, connections);\n        this.trigger('destroy', this, this.collection);\n      }\n    },\n    // @ts-expect-error ts-migrate(6133) FIXME: 'connection' is declared but its value is never re... Remove this comment to see the full error message\n    onConnectionTestSuccess(connection, serverAttrs) {\n      const bestConnection = this.get('connections').getBestConnection();\n      if (bestConnection !== this.get('activeConnection')) {\n        log.info(\n          '[Connections] Active connection to %s is %s',\n          this.get('debugName'),\n          bestConnection.id\n        );\n      }\n      this._resolve({\n        activeConnection: bestConnection,\n        ...serverAttrs,\n      });\n      if (config.allowLoopbackDiscovery) {\n        const connections = this.get('connections');\n        const activeConnection = this.get('activeConnection');\n        const isPrivateConnection = activeConnection.get('isPrivate');\n        const hasLoopbackConnection = !!connections.findWhere({\n          isLoopback: true,\n        });\n        if (\n          isPrivateConnection &&\n          !hasLoopbackConnection &&\n          !this.hasOtherLoopbackServer()\n        ) {\n          log(\n            '[Connections] Adding possible loopback connection for',\n            this.get('debugName')\n          );\n          this.addConnection(activeConnection.getLoopbackAttributes());\n        }\n      }\n    },\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'connection' implicitly has an 'any' typ... Remove this comment to see the full error message\n    onConnectionTestError(connection, xhr) {\n      if (connection.get('isAborted')) {\n        return;\n      }\n      const connections = this.get('connections');\n      // If mixed content is allowed and the scheme is https, we should try\n      // connecting via http which will use a direct IP connection. This will\n      // indicate if DNS rebinding protection or a possible certificate issue was\n      // the cause of the https connection failing.\n      if (\n        connection.get('isHttps') &&\n        !connection.get('isUnauthorized') &&\n        !connection.get('relay')\n      ) {\n        resolve('appStore').dispatch(\n          addHttpFallbackConnection({\n            serverEntityID: this.entityID(),\n            address: connection.get('address'),\n            port: connection.get('port'),\n          })\n        );\n      }\n      // If the server is unauthorized and we don't already have a machine\n      // identifier for it, attempt to request the server's identity in case we\n      // have a cached token for the server.\n      if (!this.id && connection.get('isUnauthorized')) {\n        this.populateIdentity(connection);\n      }\n      if (connections.hasOnlyFailedConnections()) {\n        if (this.id || !this._identityPromise) {\n          this._reject();\n        } else {\n          // Merged connections might be added to the server if the found identity\n          // collides with an existing server. Reject if the server still has only\n          // failed connections after the identity is resolved.\n          this._identityPromise.always(() => {\n            if (connections.hasOnlyFailedConnections()) {\n              this._reject();\n            }\n          });\n        }\n      } else if (connections.hasFailedEveryDirectConnection()) {\n        // Relayed connections should not be tested until all other connections\n        // have failed. This reduces unnecessary server load.\n        this.testOnlyUntestedRelayConnections();\n      }\n    },\n  },\n  {\n    //\n    // Static\n    connectionTestResults,\n    promiseStates,\n    serverClasses,\n  }\n);\naddFlexModel(ServerModel, function () {\n  return {\n    relationClass: resolve('ServerFlexModel'),\n    options: {\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      server: this,\n    },\n  };\n});\nexport default ServerModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport parser2 from 'app/js/utils/parser2';\n\nconst SEPARATOR = '|';\n\nexport const settingsTypes = {\n  INT: 'int',\n  TEXT: 'text',\n  BOOL: 'bool',\n  ENUM: 'enum',\n  DOUBLE: 'double',\n};\n\nfunction parseValueType(type: any, value: any) {\n  switch (type) {\n    case settingsTypes.INT:\n    case settingsTypes.ENUM:\n      return parser2.parseInteger(value);\n    case settingsTypes.BOOL:\n      return parser2.parseBoolean(value);\n    default:\n      return value;\n  }\n}\n\nconst ServerSettingModel = AbstractModel.extend({\n  //\n  // Properties\n\n  idAttribute: 'id',\n  url: '/:/prefs',\n  context: ['server'],\n\n  sessionAttrs: {\n    isSaving: attrTypes.boolean,\n  },\n\n  syncedAttrs: {\n    id: attrTypes.string,\n    label: attrTypes.string,\n    default: attrTypes.oneOfType(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 4.\n      attrTypes.integer,\n      attrTypes.string,\n      attrTypes.boolean,\n      attrTypes.array\n    ),\n    summary: attrTypes.string,\n    value: {\n      type: attrTypes.oneOfType(\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 4.\n        attrTypes.integer,\n        attrTypes.string,\n        attrTypes.boolean,\n        attrTypes.array\n      ),\n      save: true,\n    },\n    type: attrTypes.oneOf(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 5.\n      settingsTypes.INT,\n      settingsTypes.TEXT,\n      settingsTypes.BOOL,\n      settingsTypes.ENUM,\n      settingsTypes.DOUBLE\n    ),\n    group: attrTypes.string,\n    advanced: attrTypes.boolean,\n    option: attrTypes.string,\n    hidden: attrTypes.boolean,\n    enumValues: attrTypes.array,\n    values: attrTypes.string,\n  },\n\n  defaults: {\n    isSaving: false,\n    type: 'string',\n    summary: '',\n    label: '',\n    group: '',\n  },\n\n  //\n  // Control\n\n  augmentResponse(response: any) {\n    response.value = parseValueType(response.type, response.value);\n    response.advanced = parseValueType(settingsTypes.BOOL, response.advanced);\n    response.hidden = parseValueType(settingsTypes.BOOL, response.hidden);\n\n    if (response.enumValues && !Array.isArray(response.enumValues)) {\n      response.enumValues = response.enumValues\n        .split(SEPARATOR)\n        .map((valueStr: any) => {\n          const [value, label = value] = valueStr.split(':');\n\n          return {\n            label,\n            value: parseValueType(response.type, value),\n          };\n        });\n    }\n\n    if (\n      response.type === settingsTypes.ENUM &&\n      response.values &&\n      !Array.isArray(response.values)\n    ) {\n      let i = 0;\n\n      response.enumValues = response.values\n        .split(SEPARATOR)\n        .map((valueStr: any) => {\n          return {\n            label: valueStr,\n            value: i++,\n          };\n        });\n    }\n\n    return response;\n  },\n\n  getSaveParams(attrs: any) {\n    // Settings are saved in a batch, not individually.  Since\n    // collections don't have a save function we sort of cheat, and\n    // allow the caller to set settings by calling save on a single\n    // setting.\n\n    // eslint-disable-next-line prefer-rest-params\n    const params = AbstractModel.prototype.getSaveParams.apply(this, arguments);\n\n    if (attrs && !attrs.hasOwnProperty('value')) {\n      // Ensure attributes that are saved via params are not passed\n      // through to Backbone's save.\n      Object.keys(params).forEach((key) => delete attrs[key]);\n      return params;\n    } else {\n      return {\n        [this.get('id')]: params.value,\n      };\n    }\n  },\n});\n\nexport default ServerSettingModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ServerSettingModel from 'app/js/models/server/ServerSettingModel';\n\nconst ServerSettingCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ServerSettingCollection',\n  context: ['server'],\n  url: '/:/prefs',\n\n  model: ServerSettingModel,\n\n  //\n  // Control\n\n  augmentResponse(response: any) {\n    if (!response.Setting) {\n      return [];\n    }\n\n    const settings = Array.isArray(response.Setting)\n      ? response.Setting\n      : [response.Setting];\n\n    // When PMS serializes prefs, if it gets to one that is marked as not to\n    // serialize, it's too late to skip it, so it outputs <Setting/>. We\n    // have no use for those, so filter them out.\n    return settings.filter((setting: any) => setting.id);\n  },\n});\n\nexport default ServerSettingCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst serverFeatures = {\n  playlistArtEditing: '1.24.5',\n  gridPagination: '1.24.4',\n  playlistPosterEditing: '1.23.5',\n  // Earlier server versions lack an endpoint required for multi-lineup support.\n  // Additionally, they contain a bug that results in badly formatted XML when\n  // requesting added tuner devices that results in the Live TV settings page\n  // always showing the zero state.\n  v4DVRSetup: '1.22.2',\n  gracenoteAttribution: '1.21.1',\n  firstCharacterKeySortDirection: '1.20.4',\n  pivotIDs: '1.20.4',\n  freeLiveTVDVRSettings: '1.20.2',\n  augmentedHubsInRelatedHubs: '1.19.5',\n  simpleRelatedKey: '1.19.2',\n  transientTokenProxy: '1.15.4',\n  mediaProvidersServerRoot: '1.13.10',\n  streamDisplayTitles: '1.13.8',\n  bundledWebAppNewSettingsRoutes: '1.13.8',\n  softSubtitlesWithDirectPlay: '1.13.4',\n  truePlaylistsPath: '1.9.3',\n  optimizeDatabaseActivity: '1.4.2',\n  asyncCheckFiles: '1.4.0',\n  json: '1.8.0',\n  // Server versions before 1.2.1.0 would blow up on certain types of requests\n  // with empty header values.\n  // See: https://github.com/plexinc/plex-media-server/issues/5315\n  allowBlacklistedMethodHeaders: '1.2.1',\n  // The `/video/:/transcode/universal/decision` endpoint crashes when the PMS\n  // profile requires dummy video transcoding for music before 1.0.3. Although\n  // other decision requests complete as expected, I've placed all `decision`\n  // endpoint communication behind a single version check for simplicity. Our\n  // communication with `decision` is related to streaming brain work, not to\n  // media decision work, and all of our streaming brain integration is\n  // incomplete / fledgling.\n  // See: https://github.com/plexinc/plex-web-client/issues/4994\n  decisionEndpoint: '1.0.3',\n  defaultSections: '0.9.17.3',\n  ownerFeatures: '0.9.17.0',\n  replaceTranscodeTarget: '0.9.17.0',\n  quickSearch: '0.9.16.0',\n  relay: '0.9.15.0',\n  claimServer: '0.9.14.2',\n  searchSpecificType: '0.9.14.2',\n  linkedYearMetadata: '0.9.14.0',\n  streamReady: '0.9.14.0',\n  syncOriginalQuality: '0.9.14.0',\n  allPartsStreamSelection: '0.9.12.5',\n  sharedChannels: '0.9.12.5',\n  shortenTranscodeURL: '0.9.12.5',\n  companionProxy: '0.9.12.5',\n  editSimilarArtists: '0.9.12.2',\n  neuterRedirect: '0.9.12.0',\n  // Earlier servers don't support the dummyVideo transcoder options and\n  // the necessary TranscodeTarget profile semantics. 0.9.12.0 only\n  // officially supports PS3/4.\n  audioAsVideo: '0.9.12.0',\n  // Season, Artists, etc. can be deleted and all leaves will be deleted.\n  compositeDelete: '0.9.12.0',\n  batchEdit: '0.9.12.0',\n  premiumMusic: '0.9.12.0',\n  // There are bugs with transient tokens related to play queues and\n  // setting streams, which are fixed in 0.9.12.0.\n  transientToken: '0.9.12.0',\n  softSubtitles: '0.9.12.0',\n  sharedSyncStatus: '0.9.11.14',\n  reachability: '0.9.11.14',\n  photoPlayQueues: '0.9.11.12',\n  publicNowPlaying: '0.9.11.3',\n  labels: '0.9.11.2',\n  updater: '0.9.11.1',\n  playItemsBatchAdd: '0.9.9.16',\n  playlists: '0.9.9.13',\n  imageFilters: '0.9.9.13',\n  hubFilterSigns: '0.9.9.12',\n  cancelAllUpdates: '0.9.9.10',\n  playQueues: '0.9.9.6',\n  sectionSettings: '0.9.9.6',\n  hubFilters: '0.9.9.2',\n  streamingMKV: '0.9.9.16',\n  chunkedHTTP: '0.9.9.3',\n  sharedSync: '0.9.9.3',\n  dash: '0.9.8.6',\n  specificMediaDeletion: '0.9.7.23',\n  sharedSettings: '0.9.7.23',\n  syncNotifications: '0.9.7.23',\n  universalMusicTranscoder: '0.9.8.3',\n  universalTranscoder: '0.9.7.17',\n  // Sync needs 0.9.7.10 for the /sync/items/XX endpoint.\n  sync: '0.9.7.10',\n  artworkUpload: '0.9.7.9',\n  firstRunPref: '0.9.7.3',\n  timelineState: '0.9.7.2',\n  cleanBundles: '0.9.7.0',\n  advancedFilters: '0.9.7.0',\n  // Search needs 0.9.7.0 for the librarySectionID attribute on results.\n  search: '0.9.7.0',\n  merge: '0.9.7.0',\n  splitApart: '0.9.7.0',\n};\n\nexport default serverFeatures;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport storageAdapter from 'app/js/adapters/storageAdapter';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport assert from 'app/js/utils/log/assert';\n// `AbstractStorageModel` provides access to a storage object like localStorage,\n// as if it were any other Backbone model. This allows us to fetch and save\n// using storage instead of a server.\nconst AbstractStorageModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'AbstractStorageModel',\n  responseType: responseTypes.json,\n  //\n  // Control\n  save(key: any, value: any, options = {}) {\n    const attributes = this.attributes;\n    let attrs;\n    // Handle both `\"key\", value` and `{ key: value }` style arguments.\n    if (key == null || _.isObject(key)) {\n      attrs = key;\n      options = value;\n    } else {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      (attrs = {})[key] = value;\n    }\n    options = _.extend({ validate: true }, options);\n    __DEV__ && this._warnUnsupportedOptions(options);\n    // If we're not waiting and attributes exist, save acts as\n    // `set(attr).save(null, opts)` with validation. Otherwise, check if the\n    // model will be valid when the attributes, if any, are set.\n    if (attrs && !(options as any).wait) {\n      if (!this.set(attrs, options)) {\n        return false;\n      }\n    } else if (!this._validate(attrs, options)) {\n      return false;\n    }\n    // Set temporary attributes if `{ wait: true }`.\n    if (attrs && (options as any).wait) {\n      this.attributes = _.extend({}, attributes, attrs);\n    }\n    // Assume all synced attributes and relations should be saved rather than\n    // requiring the save flag for every attribute.\n    const excludeDefaults =\n      this._getStorageAdapter().getInstance().excludeDefaults;\n    const json = this.toJSON({\n      syncedOnly: true,\n      excludeDefaults: excludeDefaults !== false,\n    });\n    const serialized = this._serialize(json);\n    const promise = this._getStorageAdapter().set(\n      this._getStorageKey(),\n      serialized\n    );\n    promise.done(() => {\n      this.attributes = attributes;\n      this.trigger('sync', this, attributes, options);\n    });\n    promise.fail((error: any) => {\n      this.trigger('error', this, error, options);\n    });\n    // Restore attributes.\n    if (attrs && (options as any).wait) {\n      this.attributes = attributes;\n    }\n    return promise;\n  },\n  destroy(options = {}) {\n    __DEV__ && this._warnUnsupportedOptions(options);\n    if (!(options as any).wait) {\n      this.trigger('destroy', this, this.collection, options);\n    }\n    const promise = this._getStorageAdapter().remove(this._getStorageKey());\n    promise.done((response: any) => {\n      if ((options as any).wait) {\n        this.trigger('destroy', this, this.collection, options);\n      }\n      this.trigger('sync', this, response, options);\n    });\n    promise.fail((error: any) => {\n      this.trigger('error', this, error, options);\n    });\n    return promise;\n  },\n  sync() {\n    this._logError('does not support syncing to a server');\n  },\n  _getStorageAdapter() {\n    return storageAdapter;\n  },\n  _getStorageKey() {\n    const key = _.result(this, 'storageKey');\n    if (!key) {\n      throw new Error(`${this.name} requires a \\`storageKey\\` property`);\n    }\n    return key;\n  },\n  _fetch(options = {}) {\n    __DEV__ && this._warnUnsupportedOptions(options);\n    const promise = this._getStorageAdapter().get(this._getStorageKey());\n    promise.done((response: any) => {\n      if (response) {\n        this.set(this.parse(response));\n      }\n      this.trigger('sync', this, response, options);\n    });\n    promise.fail((error: any) => {\n      this.trigger('error', this, error, options);\n    });\n    return promise;\n  },\n  _serialize(data: any) {\n    let serialized = '';\n    try {\n      serialized = JSON.stringify(data);\n    } catch (error) {\n      this._logError('serialization error: ' + error.message);\n    }\n    return serialized;\n  },\n  _warnUnsupportedOptions(options: any) {\n    if (options.parse) {\n      this._logError(\n        'does not support the `parse` option. The response from storage is always parsed.'\n      );\n    }\n    if (options.success) {\n      this._logError(\n        'does not support a `success` callback. Use the returned promise.'\n      );\n    }\n    if (options.error) {\n      this._logError(\n        'does not support an `error` callback. Use the returned promise.'\n      );\n    }\n  },\n  _logError(message: any) {\n    let storageKey;\n    try {\n      storageKey = this._getStorageKey();\n    } catch (error) {\n      storageKey = 'no storageKey';\n    }\n    assert(false, `${this.name} (${storageKey}) ${message}`);\n  },\n});\nexport default AbstractStorageModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\n\nconst StoredModel = AbstractModel.extend({\n  //\n  // Properties\n\n  additionalRelations: [],\n\n  //\n  // Control\n\n  copyFromModel(model: any, options: any) {\n    this._copy(model, this, options);\n  },\n\n  copyToModel(model: any, options: any) {\n    this._copy(this, model, options);\n  },\n\n  _copy(fromModel: any, toModel: any, options = {}) {\n    const isCapturingChangeEvents = !!toModel.releaseCapturedChangeEvents;\n\n    if (!isCapturingChangeEvents) {\n      toModel.startCapturingChangeEvents();\n    }\n\n    this._copyAttributes(fromModel, toModel, options);\n    this._copyRelations(fromModel, toModel, options);\n\n    if (!isCapturingChangeEvents) {\n      toModel.releaseCapturedChangeEvents();\n    }\n  },\n\n  _copyAttributes(fromModel: any, toModel: any, options: any) {\n    const attrs = {};\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'value' is declared but its value is never read.\n    _.each(this.syncedAttrs, (value, key) => {\n      if (options.included && !options.included.includes(key)) {\n        return;\n      }\n\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      attrs[key] = fromModel.get(key);\n    });\n\n    toModel.set(attrs);\n  },\n\n  _copyRelations(fromModel: any, toModel: any, options: any) {\n    // @ts-expect-error ts-migrate(6133) FIXME: 'relation' is declared but its value is never read... Remove this comment to see the full error message\n    _.each(this.syncedRelations, (relation, key) => {\n      if (options.included && !options.included.includes(key)) {\n        return;\n      }\n\n      // Allow some relations to be managed independently, like a user's servers\n      // and server connections .\n\n      if (this.additionalRelations.includes(key)) {\n        return;\n      }\n\n      const fromRelation = fromModel.get(key);\n      const toRelation = toModel.get(key);\n\n      if (fromRelation && toRelation) {\n        const json = fromRelation.toJSON();\n\n        if (toRelation instanceof AbstractModel) {\n          toRelation.set(toRelation.parse(json));\n        } else {\n          toRelation.set(json, { parse: true });\n        }\n      }\n    });\n  },\n});\n\nexport default StoredModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst StoredConnectionSourceModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'StoredConnectionSourceModel',\n\n  syncedAttrs: {\n    id: attrTypes.string,\n  },\n});\n\nexport default StoredConnectionSourceModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport StoredConnectionSourceModel from './StoredConnectionSourceModel';\n\nconst StoredConnectionSourceCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'StoredConnectionSourceCollection',\n  model: StoredConnectionSourceModel,\n});\n\nexport default StoredConnectionSourceCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport StoredConnectionSourceCollection from './StoredConnectionSourceCollection';\n\nconst StoredConnectionModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'StoredConnectionModel',\n  idAttribute: 'uri',\n\n  syncedAttrs: {\n    uri: attrTypes.string,\n    scheme: attrTypes.string,\n    address: attrTypes.string,\n    port: attrTypes.string,\n    relay: attrTypes.boolean,\n  },\n\n  syncedRelations: {\n    sources: {\n      relationClass: StoredConnectionSourceCollection,\n    },\n  },\n});\n\nexport default StoredConnectionModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport StoredConnectionModel from './StoredConnectionModel';\n\nconst StoredConnectionCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'StoredConnectionCollection',\n  model: StoredConnectionModel,\n});\n\nexport default StoredConnectionCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport ProviderFeatureCollection from 'app/js/models/provider/ProviderFeatureCollection';\nimport ProviderModel from 'app/js/models/provider/ProviderModel';\n\nconst StoredProviderModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'StoredProviderModel',\n  idAttribute: 'identifier',\n\n  syncedAttrs: {\n    ...ProviderModel.prototype.syncedAttrs,\n  },\n\n  syncedRelations: {\n    features: {\n      relationClass: ProviderFeatureCollection,\n    },\n  },\n});\n\nexport default StoredProviderModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport StoredProviderModel from './StoredProviderModel';\n\nconst StoredProviderCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'StoredProviderCollection',\n  model: StoredProviderModel,\n});\n\nexport default StoredProviderCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport attrTypes from 'app/js/models/attrTypes';\nimport StoredConnectionCollection from './StoredConnectionCollection';\nimport StoredModel from './StoredModel';\nimport StoredProviderCollection from './StoredProviderCollection';\n\nconst StoredServerModel = StoredModel.extend({\n  //\n  // Properties\n\n  name: 'StoredServerModel',\n  idAttribute: 'machineIdentifier',\n\n  additionalRelations: ['connections'],\n\n  syncedAttrs: {\n    machineIdentifier: attrTypes.string,\n    friendlyName: attrTypes.string,\n    accessToken: attrTypes.string,\n    sourceTitle: attrTypes.string,\n    home: attrTypes.boolean,\n    serverClass: attrTypes.string, // Mobile media servers\n    platform: attrTypes.string,\n    isShared: attrTypes.boolean,\n    version: attrTypes.string,\n    publicAddressMatches: attrTypes.boolean,\n    ownerId: attrTypes.integer,\n    mediaProviders: attrTypes.integer,\n  },\n\n  syncedRelations: {\n    providers: {\n      relationClass: StoredProviderCollection,\n    },\n\n    // Additional\n    connections: {\n      relationClass: StoredConnectionCollection,\n    },\n  },\n});\n\nexport default StoredServerModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport StoredServerModel from './StoredServerModel';\n\nconst StoredServerCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'StoredServerCollection',\n  model: StoredServerModel,\n});\n\nexport default StoredServerCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport UserSettingModel from 'app/js/models/user/UserSettingModel';\n\nconst StoredUserSettingModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'StoredUserSettingModel',\n\n  syncedAttrs: {\n    ...UserSettingModel.prototype.syncedAttrs,\n    isDirty: attrTypes.boolean,\n  },\n});\n\nexport default StoredUserSettingModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport StoredUserSettingModel from './StoredUserSettingModel';\n\nconst StoredUserSettingCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'StoredUserSettingCollection',\n\n  model: StoredUserSettingModel,\n});\n\nexport default StoredUserSettingCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport attrTypes from 'app/js/models/attrTypes';\nimport UserEntitlementCollection from 'app/js/models/user/UserEntitlementCollection';\nimport UserFeatureCollection from 'app/js/models/user/UserFeatureCollection';\nimport UserRoleCollection from 'app/js/models/user/UserRoleCollection';\nimport UserServiceCollection from 'app/js/models/user/UserServiceCollection';\nimport UserSubscriptionCollection from 'app/js/models/user/UserSubscriptionCollection';\nimport StoredModel from './StoredModel';\nimport StoredServerCollection from './StoredServerCollection';\nimport StoredUserSettingCollection from './StoredUserSettingCollection';\n\nconst StoredUserModel = StoredModel.extend({\n  //\n  // Properties\n\n  name: 'StoredUserModel',\n\n  additionalRelations: ['servers'],\n\n  syncedAttrs: {\n    id: attrTypes.integer,\n    authToken: attrTypes.string,\n    anonymous: attrTypes.boolean,\n    username: attrTypes.string,\n    email: attrTypes.string,\n    title: attrTypes.string,\n    thumb: attrTypes.string,\n    pin: attrTypes.string,\n    home: attrTypes.boolean,\n    restricted: attrTypes.boolean,\n    guest: attrTypes.boolean,\n    hasAllEntitlements: attrTypes.boolean,\n    lastPrimaryServerID: attrTypes.string,\n  },\n\n  syncedRelations: {\n    subscriptions: {\n      relationClass: UserSubscriptionCollection,\n    },\n    roles: {\n      relationClass: UserRoleCollection,\n    },\n    entitlements: {\n      relationClass: UserEntitlementCollection,\n    },\n    services: {\n      relationClass: UserServiceCollection,\n    },\n    features: {\n      relationClass: UserFeatureCollection,\n    },\n    settings: {\n      relationClass: StoredUserSettingCollection,\n    },\n    experienceSettings() {\n      return {\n        relationClass: resolve('StoredUserExperienceSettingsModel'),\n      };\n    },\n\n    // Additional\n    servers: {\n      relationClass: StoredServerCollection,\n    },\n  },\n\n  //\n  // Control\n\n  clearSensitiveAttributes() {\n    this.unset('authToken');\n    this.unset('pin');\n    this.get('servers').reset();\n  },\n});\n\nexport default StoredUserModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport StoredUserModel from './StoredUserModel';\n\nconst StoredUserCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'StoredUserCollection',\n  model: StoredUserModel,\n});\n\nexport default StoredUserCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport attrTypes from 'app/js/models/attrTypes';\nimport AbstractStorageModel from 'app/js/models/storage/AbstractStorageModel';\nimport assert from 'app/js/utils/log/assert';\nimport StoredUserCollection from './StoredUserCollection';\n\nconst UserStorageModel = AbstractStorageModel.extend({\n  //\n  // Properties\n\n  name: 'UserStorageModel',\n  storageKey: 'users',\n\n  sessionAttrs: {\n    activeUserID: attrTypes.integer,\n  },\n\n  syncedRelations: {\n    users: {\n      relationClass: StoredUserCollection,\n    },\n  },\n\n  //\n  // Init\n\n  initialize() {\n    this.debouncedSaveTimeout = null;\n  },\n\n  //\n  // Control\n\n  debouncedSave() {\n    __DEV__ &&\n      assert(\n        !arguments.length,\n        'Set attributes before using `debouncedSave` so the model is immediately updated. Otherwise, race conditions may occur.'\n      );\n\n    if (this.debouncedSaveTimeout) {\n      window.clearTimeout(this.debouncedSaveTimeout);\n    }\n\n    this.debouncedSaveTimeout = window.setTimeout(() => this.save(), 1000);\n  },\n\n  flushDebouncedSave() {\n    if (this.debouncedSaveTimeout) {\n      window.clearTimeout(this.debouncedSaveTimeout);\n\n      this.save();\n    }\n  },\n\n  getActiveUser() {\n    const storedUsers = this.get('users');\n    const activeUserID = this.get('activeUserID');\n\n    if (activeUserID != null) {\n      return storedUsers.get(activeUserID);\n    }\n  },\n\n  clearActiveUser() {\n    const activeUser = this.getActiveUser();\n\n    if (activeUser) {\n      activeUser.clearSensitiveAttributes();\n    }\n\n    this.unset('activeUserID');\n\n    return this.save();\n  },\n\n  getActiveServers() {\n    const activeUser = this.getActiveUser();\n\n    if (activeUser) {\n      return activeUser.get('servers');\n    }\n  },\n});\n\n// Singleton\nexport default new UserStorageModel();\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport MediaGrabOperationModel from './MediaGrabOperationModel';\n\nconst MediaGrabOperationCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'MediaGrabOperationCollection',\n  context: ['server', 'provider'],\n\n  model: MediaGrabOperationModel,\n\n  comparator(mediaGrabOperation: any) {\n    const mediaItem = mediaGrabOperation.get('mediaItem');\n\n    if (!mediaItem) {\n      return;\n    }\n\n    const beginsAt = mediaItem.beginsAt;\n    const startOffsetSeconds = mediaItem.startOffsetSeconds || 0;\n\n    return beginsAt - startOffsetSeconds;\n  },\n});\n\nexport default MediaGrabOperationCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport config from 'app/js/models/config';\nimport MetadataModel from 'app/js/models/metadata/MetadataModel';\nimport getLiveTVMediaItemID from 'app/js/utils/livetv/getLiveTVMediaItemID';\nimport parser2 from 'app/js/utils/parser2';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport { tryFindEntity } from 'app/js/utils/state/findEntity';\n\nconst MediaGrabOperationModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'MediaGrabOperationModel',\n  context: ['server', 'provider'],\n  idAttribute: 'key',\n  rootPropertyName: 'MediaGrabOperation',\n  url() {\n    return this.get('key');\n  },\n  syncedAttrs: {\n    mediaSubscriptionID: attrTypes.string,\n    provider: attrTypes.string,\n    identifier: attrTypes.string,\n    mediaIndex: attrTypes.integer,\n    channelTitle: attrTypes.string,\n    status: attrTypes.string,\n    error: attrTypes.string,\n    linkedKey: attrTypes.string,\n    key: attrTypes.string,\n    rolling: attrTypes.boolean,\n  },\n  sessionAttrs: {\n    isLibraryMetadataItemPending: attrTypes.boolean,\n    isLibraryMetadataItemPopulated: attrTypes.boolean,\n    libraryMetadataItemError: attrTypes.object,\n  },\n  syncedRelations: {\n    metadataItem: {\n      relationClass: MetadataModel,\n      rootPropertyName: 'Metadata',\n    },\n    conflicts() {\n      return {\n        relationClass: require('./MediaGrabOperationCollection').default,\n        deferred: true,\n      };\n    },\n  },\n  sessionRelations: {\n    libraryMetadataItem: {\n      relationClass: MetadataModel,\n      deferred: true,\n    },\n  },\n  derivedAttrs: {\n    mediaItem() {\n      const mediaIndex = (this as any).get('mediaIndex');\n      const metadataItem = (this as any).get('metadataItem');\n      const mediaItems = metadataItem.get('Media') || [];\n      return mediaItems[mediaIndex];\n    },\n    beginsAt() {\n      const mediaItem = (this as any).get('mediaItem');\n      return mediaItem && mediaItem.beginsAt;\n    },\n    endsAt() {\n      const mediaItem = (this as any).get('mediaItem');\n      return mediaItem && mediaItem.endsAt;\n    },\n  },\n  defaults: {\n    rolling: false,\n    isLibraryMetadataItemPending: true,\n    isLibraryMetadataItemPopulated: false,\n    libraryMetadataItemError: null,\n  },\n  //\n  // Control\n  augmentResponse(json: any) {\n    let jsonRoot = json;\n    if (jsonRoot[this.rootPropertyName]) {\n      jsonRoot = jsonRoot[this.rootPropertyName];\n    }\n    if (jsonRoot.Conflicts) {\n      jsonRoot.conflicts = jsonRoot.Conflicts.MediaGrabOperation;\n      delete jsonRoot.Conflicts;\n    }\n    if (!config.shouldCreateStateTree) {\n      return jsonRoot;\n    }\n    // If we have several grab operations for the same item, entity management\n    // will merge them into a single metadata item. Because of this, we need to\n    // adjust the `mediaIndex` saved to this model to reflect the combined\n    // number of `Media` elements in the resulting item.\n    const responseMetadata = jsonRoot.Metadata;\n    const responseMedia = parser2.parseArray(responseMetadata.Media);\n    const responseMediaIndex = parser2.parseInteger(jsonRoot.mediaIndex);\n\n    const metadataItemEntityID = createEntityID(\n      entityTypes.METADATA_ITEM,\n      responseMetadata.key,\n      this.server.entityID()\n    );\n    const appModel = resolve('appModel');\n    const metadataItem = tryFindEntity(\n      appModel,\n      entityTypes.METADATA_ITEM,\n      metadataItemEntityID\n    );\n\n    // We only need to increment `mediaIndex` when the entity's `Media`\n    // element does not contain the response's. If we find the element in app\n    // state, we can override the response's `mediaIndex` completely.\n    if (metadataItem) {\n      const mediaItemIDs = metadataItem.get('Media').map(getLiveTVMediaItemID);\n      const responseMediaItemIDs = responseMedia.map(getLiveTVMediaItemID);\n      const responseMediaItem = responseMediaItemIDs[responseMediaIndex];\n      const mediaIndex = mediaItemIDs.findIndex(\n        (mediaItemID: any) => responseMediaItem === mediaItemID\n      );\n      if (mediaIndex !== -1) {\n        jsonRoot.mediaIndex = mediaIndex;\n      } else {\n        jsonRoot.mediaIndex = responseMediaIndex + mediaItemIDs.length;\n      }\n    }\n    return jsonRoot;\n  },\n});\nexport default MediaGrabOperationModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport MediaSettingModel from './MediaSettingModel';\n\nconst MediaSettingCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'MediaSettingCollection',\n  context: ['server', 'provider'],\n\n  model: MediaSettingModel,\n\n  //\n  // Control\n\n  getSaveParams() {\n    return this.reduce((obj: any, model: any) => {\n      obj[model.id] = model.get('value');\n      return obj;\n    }, {});\n  },\n});\n\nexport default MediaSettingCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport parser2 from 'app/js/utils/parser2';\n\nconst SEPARATOR = '|';\nexport const settingsTypes = {\n  INT: 'int',\n  TEXT: 'text',\n  BOOL: 'bool',\n  DOUBLE: 'double',\n};\nfunction parseValueType(type: any, value: any) {\n  switch (type) {\n    case settingsTypes.INT:\n    case (settingsTypes as any).ENUM:\n      return parser2.parseInteger(value);\n    case settingsTypes.BOOL:\n      return parser2.parseBoolean(value);\n    case settingsTypes.DOUBLE:\n      return parser2.parseFloat(value);\n    default:\n      return value;\n  }\n}\nconst MediaSettingModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'MediaSettingModel',\n  context: ['server', 'provider'],\n  idAttribute: 'id',\n  rootPropertyName: 'Setting',\n  syncedAttrs: {\n    id: attrTypes.string,\n    advanced: attrTypes.boolean,\n    default: attrTypes.oneOfType(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 3.\n      attrTypes.integer,\n      attrTypes.string,\n      attrTypes.boolean\n    ),\n    hidden: attrTypes.boolean,\n    group: attrTypes.string,\n    label: attrTypes.string,\n    summary: attrTypes.string,\n    type: attrTypes.oneOf(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 5.\n      settingsTypes.INT,\n      settingsTypes.TEXT,\n      settingsTypes.BOOL,\n      (settingsTypes as any).ENUM,\n      settingsTypes.DOUBLE\n    ),\n    value: attrTypes.oneOfType(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 4.\n      attrTypes.integer,\n      attrTypes.float,\n      attrTypes.string,\n      attrTypes.boolean\n    ),\n    min: attrTypes.float,\n    max: attrTypes.float,\n    step: attrTypes.float,\n    enumValues: attrTypes.array,\n  },\n  //\n  // Control\n  augmentResponse(json: any) {\n    json.default = parseValueType(json.type, json.default);\n    json.value = parseValueType(json.type, json.value);\n    if (json.enumValues) {\n      json.enumValues = json.enumValues\n        .split(SEPARATOR)\n        .map((valueStr: any) => {\n          const [value, label = value] = valueStr.split(':');\n          return {\n            label: decodeURIComponent(label),\n            value: parseValueType(json.type, value),\n          };\n        });\n    }\n    return json;\n  },\n  parseAndSetValue(value: any) {\n    this.set('value', parseValueType(this.get('type'), value));\n  },\n});\nexport default MediaSettingModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport BaseModel from 'app/js/models/BaseModel';\nimport parser from 'app/js/utils/parser';\n\nconst HomeUserModel = BaseModel.extend({\n  //\n  // Properties\n  urlRoot: '/api/home/users',\n  whitelistedAttrs: [\n    'id',\n    'uuid',\n    'admin',\n    'protected',\n    'restricted',\n    'restrictionProfile',\n    'guest',\n    'title',\n    'username',\n    'email',\n    'thumb',\n  ],\n  //\n  // Control\n  convert(xml: any) {\n    let json = _.isObject(xml) ? xml : parser.parseXML(xml);\n    if (json.User) {\n      json = json.User;\n    }\n    parser.parseInteger(json, 'id');\n    parser.parseBoolean(json, ['admin', 'protected', 'restricted', 'guest']);\n    return json;\n  },\n  parse(response: any) {\n    let json = this.convert(response);\n    json = _.pick(json, this.whitelistedAttrs);\n    return json;\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  getSaveParams(data: any, options: any) {\n    if (_.isEmpty(data)) {\n      const params = {};\n      if (this.get('restricted')) {\n        (params as any).title = this.get('title');\n      } else if (this.isNew()) {\n        (params as any).invitedEmail = this.get('username');\n      }\n      return params;\n    } else {\n      // eslint-disable-next-line prefer-rest-params\n      return BaseModel.prototype.getSaveParams.apply(this, arguments);\n    }\n  },\n});\nexport default HomeUserModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport BaseCollection from 'app/js/models/BaseCollection';\nimport HomeUserModel from './HomeUserModel';\n\nconst HomeUserCollection = BaseCollection.extend({\n  //\n  // Properties\n\n  model: HomeUserModel,\n  url: '/api/home/users',\n\n  //\n  // Control\n\n  parse(response: any) {\n    return this.convert(response, 'User');\n  },\n});\n\nexport default HomeUserCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst UserEntitlementModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'UserEntitlementModel',\n\n  syncedAttrs: {\n    id: attrTypes.string, // e.g. roku, android\n  },\n});\n\nexport default UserEntitlementModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport UserEntitlementModel from './UserEntitlementModel';\n\nconst UserEntitlementCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'UserEntitlementCollection',\n  model: UserEntitlementModel,\n});\n\nexport default UserEntitlementCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst UserFeatureModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'UserFeatureModel',\n\n  idAttribute: 'uuid',\n\n  syncedAttrs: {\n    uuid: attrTypes.string.isRequired,\n    id: attrTypes.string,\n  },\n});\n\nexport default UserFeatureModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport { getMyPlexUrl } from 'app/js/utils/getRuntimeUrl';\nimport UserFeatureModel from './UserFeatureModel';\n\nconst UserFeatureCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'UserFeatureCollection',\n\n  context: ['server'],\n\n  model: UserFeatureModel,\n\n  // User features may be fetched before the cloud server connection is\n  // available for signed-out users.\n  url: getMyPlexUrl('/api/v2/features'),\n\n  responseType: responseTypes.json,\n});\n\nexport default UserFeatureCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst UserRoleModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'UserRoleModel',\n\n  syncedAttrs: {\n    id: attrTypes.string, // e.g. employee, ninja\n  },\n});\n\nexport default UserRoleModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport UserRoleModel from './UserRoleModel';\n\nconst UserRoleCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'UserRoleCollection',\n  model: UserRoleModel,\n});\n\nexport default UserRoleCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst UserServiceModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'UserServiceModel',\n\n  syncedAttrs: {\n    id: attrTypes.string,\n    subscriptionType: attrTypes.string,\n  },\n});\n\nexport default UserServiceModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport UserServiceModel from './UserServiceModel';\n\nconst UserServiceCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'UserServiceCollection',\n  model: UserServiceModel,\n});\n\nexport default UserServiceCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport parseBoolean from 'app/js/utils/parser/parseBoolean';\nimport parseInteger from 'app/js/utils/parser/parseInteger';\nimport parseJSON from 'app/js/utils/parser/parseJSON';\n\nexport const userSettingTypes = {\n  BOOL: 'bool',\n  JSON: 'json',\n};\n\nconst valueParsers = {\n  [userSettingTypes.BOOL]: parseBoolean,\n  [userSettingTypes.JSON]: parseJSON,\n};\n\nconst UserSettingModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'UserSettingModel',\n\n  context: ['server'],\n\n  sessionAttrs: {\n    isDirty: attrTypes.boolean,\n  },\n\n  syncedAttrs: {\n    id: attrTypes.string,\n    type: attrTypes.string,\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 2.\n    value: attrTypes.oneOfType(attrTypes.boolean, attrTypes.object),\n    hidden: attrTypes.boolean,\n    updatedAt: attrTypes.integer,\n  },\n\n  defaults: {\n    isDirty: false,\n  },\n\n  augmentResponse(response: any) {\n    const isDirty = this.get('isDirty');\n    const updatedAt = this.get('updatedAt');\n    const responseUpdatedAt = parseInteger(response.updatedAt);\n\n    const isModelNewerVersion =\n      updatedAt && responseUpdatedAt && updatedAt > responseUpdatedAt;\n\n    const isResponseNewerVersion =\n      updatedAt && responseUpdatedAt && updatedAt < responseUpdatedAt;\n\n    // Prefer our local values when they have not yet been synced successfully\n    // and it is same version as what is returned from server.\n    //\n    // It is possible that this model is populated from the server before we\n    // restore the stored settings.  In which case we prefer the values from\n    // this model.\n    if ((isDirty && updatedAt === responseUpdatedAt) || isModelNewerVersion) {\n      return this.toJSON();\n    }\n\n    if (isDirty && isResponseNewerVersion) {\n      response.isDirty = false;\n    }\n\n    const valueParser = valueParsers[response.type];\n\n    if (valueParser) {\n      response.value = valueParser(response.value);\n    }\n\n    return response;\n  },\n});\n\nexport default UserSettingModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport subscriptionStates from 'app/js/utils/constants/user/subscriptionStates';\nimport subscriptionTypes from 'app/js/utils/constants/user/subscriptionTypes';\n\nconst UserSubscriptionModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'UserSubscriptionModel',\n\n  syncedAttrs: {\n    // @ts-expect-error ts-migrate(2556) FIXME: Expected 0 arguments, but got 1 or more.\n    type: attrTypes.oneOf(...subscriptionTypes).isRequired,\n    // @ts-expect-error ts-migrate(2556) FIXME: Expected 0 arguments, but got 1 or more.\n    state: attrTypes.oneOf(...subscriptionStates).isRequired,\n    mode: attrTypes.string.isRequired,\n  },\n});\n\nexport default UserSubscriptionModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport UserSubscriptionModel from './UserSubscriptionModel';\n\nconst UserSubscriptionCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'UserSubscriptionCollection',\n  model: UserSubscriptionModel,\n});\n\nexport default UserSubscriptionCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\n// Changes to the composition of these models should reflect in a version bump\n// in the HomeSettingsModel.\n\nexport const FORWARDED_HUB_ATTRS = {\n  hubIdentifier: attrTypes.string,\n  hubKey: attrTypes.string,\n  key: attrTypes.string,\n  style: attrTypes.string,\n  subtype: attrTypes.string,\n  title: attrTypes.string,\n  type: attrTypes.string,\n};\n\nexport const FORWARDED_SERVER_ATTRS = {\n  friendlyName: attrTypes.string,\n  machineIdentifier: attrTypes.string.isRequired,\n  sourceTitle: attrTypes.string,\n};\n\nexport const FORWARDED_PROVIDER_ATTRS = {\n  identifier: attrTypes.string,\n  providerIdentifier: attrTypes.string,\n  title: attrTypes.string,\n};\n\nconst HomeHubProviderModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'HomeHubProviderModel',\n\n  syncedAttrs: {\n    ...FORWARDED_PROVIDER_ATTRS,\n  },\n});\n\nconst HomeHubServerModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'HomeHubServerModel',\n\n  syncedAttrs: {\n    ...FORWARDED_SERVER_ATTRS,\n  },\n});\n\nconst HomeHubModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'HomeHubModel',\n\n  syncedAttrs: {\n    ...FORWARDED_HUB_ATTRS,\n\n    id: attrTypes.string.isRequired,\n    directoryID: attrTypes.string.isRequired,\n    directoryKey: attrTypes.string.isRequired,\n    isHidden: attrTypes.boolean.isRequired,\n    hiddenAt: attrTypes.integer,\n  },\n\n  syncedRelations: {\n    provider: {\n      relationClass: HomeHubProviderModel,\n    },\n    server: {\n      relationClass: HomeHubServerModel,\n    },\n  },\n\n  defaults: {\n    isHidden: false,\n  },\n});\n\nexport default HomeHubModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport HomeHubModel from './HomeHubModel';\n\nconst HomeHubCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'HomeHubCollection',\n\n  model: HomeHubModel,\n});\n\nexport default HomeHubCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport HomeHubCollection from 'app/js/models/metadata/HomeHubCollection';\nimport random from 'app/js/utils/string/random';\n\nconst HomeSettingsModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'HomeSettingsModel',\n\n  syncedAttrs: {\n    hasCustomizations: attrTypes.boolean.isRequired,\n    hasSeededPreferredServerContent: attrTypes.boolean.isRequired,\n    hasSeededProviderPromotedContent: attrTypes.boolean.isRequired,\n    preferredServerID: attrTypes.string,\n    settingsKey: attrTypes.string.isRequired,\n    version: attrTypes.integer.isRequired,\n  },\n\n  syncedRelations: {\n    hubs: {\n      relationClass: HomeHubCollection,\n    },\n  },\n\n  defaults() {\n    return {\n      hasCustomizations: false,\n      hasSeededPreferredServerContent: false,\n      hasSeededProviderPromotedContent: false,\n      settingsKey: random(),\n      // This value needs to be updated anytime we make a format change in the\n      // settings model or the HomeHubModel. It's an attribute that can then be\n      // included in logic that converts cached home settings to a newer\n      // version's format.\n      version: 1,\n    };\n  },\n});\n\nexport default HomeSettingsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst SidebarSourceModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'SidebarSourceModel',\n\n  idAttribute: 'key',\n\n  syncedAttrs: {\n    key: attrTypes.string.isRequired,\n    sourceType: attrTypes.string.isRequired,\n    machineIdentifier: attrTypes.string.isRequired,\n    providerIdentifier: attrTypes.string.isRequired,\n    directoryID: attrTypes.string,\n    directoryIcon: attrTypes.string,\n    title: attrTypes.string.isRequired,\n    serverFriendlyName: attrTypes.string.isRequired,\n    serverSourceTitle: attrTypes.string,\n    providerSourceTitle: attrTypes.string,\n    detail: attrTypes.string,\n    isCloud: attrTypes.boolean,\n    isFullOwnedServer: attrTypes.boolean,\n    isHidden: attrTypes.boolean.isRequired,\n    hiddenAt: attrTypes.integer,\n  },\n\n  defaults: {\n    isHidden: false,\n  },\n});\n\nexport default SidebarSourceModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport SidebarSourceModel from './SidebarSourceModel';\n\nconst SidebarSourceCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'SidebarSourceCollection',\n\n  model: SidebarSourceModel,\n});\n\nexport default SidebarSourceCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport SidebarSourceCollection from './SidebarSourceCollection';\n\nconst SidebarSettingsModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'SidebarSettingsModel',\n\n  syncedAttrs: {\n    hasCompletedSetup: attrTypes.boolean.isRequired,\n  },\n\n  syncedRelations: {\n    pinnedSources: {\n      relationClass: SidebarSourceCollection,\n    },\n  },\n\n  defaults() {\n    return {\n      hasCompletedSetup: false,\n    };\n  },\n});\n\nexport default SidebarSettingsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport attrTypes from 'app/js/models/attrTypes';\nimport HomeSettingsModel from 'app/js/models/settings/HomeSettingsModel';\nimport SidebarSettingsModel from 'app/js/models/settings/SidebarSettingsModel';\n\nexport const userExperienceSettingsID = 'experience';\n\nconst userExperienceModelAttrs = {\n  sessionAttrs: {\n    sidebarPreferredSourcesSavedEnteredPath: attrTypes.string,\n    isDirty: attrTypes.boolean.isRequired,\n    isSaving: attrTypes.boolean.isRequired,\n    saveError: attrTypes.object,\n  },\n  syncedAttrs: {\n    updatedAt: attrTypes.integer,\n    autoHomeHubsEnabled: attrTypes.boolean,\n    shouldSaveLastSourcePivots: attrTypes.boolean.isRequired,\n    lastSourcePivots: attrTypes.object.isRequired,\n    savedPivotParams: attrTypes.object.isRequired,\n    disabledUniversalSearchIdentifiers: attrTypes.object.isRequired,\n    autoPinnedProviders: attrTypes.array.isRequired,\n    dismissedUpsellModals: attrTypes.array,\n  },\n  syncedRelations: {\n    homeSettings: {\n      relationClass: HomeSettingsModel,\n    },\n    sidebarSettings: {\n      relationClass: SidebarSettingsModel,\n    },\n  },\n  defaults: {\n    // autoHomeHubsEnabled is set during the settings migration. We check for null\n    // to see if it has been migrated already or has been manually set by the user\n    autoHomeHubsEnabled: null,\n    sidebarPreferredSourcesSavedEnteredPath: null,\n    isDirty: false,\n    isSaving: false,\n    saveError: null,\n    shouldSaveLastSourcePivots: true,\n    lastSourcePivots: {},\n    savedPivotParams: {},\n    disabledUniversalSearchIdentifiers: {},\n    autoPinnedProviders: [],\n    dismissedUpsellModals: [],\n  },\n};\n\nexport default userExperienceModelAttrs;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport isPlainObject from 'app/js/utils/object/isPlainObject';\n\nconst DEFAULT_BUDGET = 1000 / 60;\nlet currentTypeIndex = 0;\nlet currentEntityIndex = 0;\nlet startTypeIndex;\nlet startEntityIndex;\nfunction searchForEntityID(state: any, entityID: any) {\n  if (isPlainObject(state)) {\n    return searchInObject(state, entityID);\n  }\n  if (Array.isArray(state)) {\n    return searchInArray(state, entityID);\n  }\n  return state === entityID;\n}\nfunction searchInObject(obj: any, entityID: any) {\n  // Only iterate through keys that have been provided as possible entity\n  // containers. Otherwise, we would be wasting time looking for entities where\n  // they can't exist and walking the tree is expensive.\n  const possibleEntityContainers = obj.possibleEntityContainers;\n  const len = possibleEntityContainers ? possibleEntityContainers.length : 0;\n  for (let i = 0; i < len; i++) {\n    const key = possibleEntityContainers[i];\n    const value = obj[key];\n    if (searchForEntityID(value, entityID)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction searchInArray(arr: any, entityID: any) {\n  for (let i = 0, len = arr.length; i < len; i++) {\n    const value = arr[i];\n    if (searchForEntityID(value, entityID)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction incrementIndex(index: any, limit: any) {\n  if (index + 1 >= limit) {\n    return 0;\n  }\n  return index + 1;\n}\n// Walk the state tree, looking for entity ids that no longer exist as values in\n// the tree. Since entity ids are unique, if an entity no longer exists\n// elsewhere in the tree, we know it can be safely removed from the tree.\nexport default function garbageCollectEntities(state: any, options = {}) {\n  const processingBudget =\n    (options as any).budget != null ? (options as any).budget : DEFAULT_BUDGET;\n  const start = window.performance.now();\n  const allEntities = state.entities;\n  const allEntityTypes = Object.keys(allEntities);\n  const numTypes = allEntityTypes.length;\n  const garbage = {};\n\n  // Start from the beginning if we're trying to do a full pass.\n  if (processingBudget === Infinity) {\n    currentTypeIndex = 0;\n    currentEntityIndex = 0;\n  }\n\n  const startingEntityType = allEntityTypes[currentTypeIndex];\n  const startingEntities = allEntities[startingEntityType];\n  startTypeIndex = currentTypeIndex;\n  // The entity at `currentEntityIndex` may no longer exist in the state tree\n  // when calling garbage collection again after it has exited early due to\n  // running out of budget in a previous run. In this case, start the index\n  // at the last item in the entity type list or zero.\n  startEntityIndex = Math.max(\n    Math.min(currentEntityIndex, Object.keys(startingEntities).length - 1),\n    0\n  );\n  while (currentTypeIndex < numTypes) {\n    const entityType = allEntityTypes[currentTypeIndex];\n    const entities = allEntities[entityType];\n    const entityIDs = Object.keys(entities);\n    const numIDs = entityIDs.length;\n    const nextTypeIndex = incrementIndex(currentTypeIndex, numTypes);\n    while (currentEntityIndex < numIDs) {\n      const entityID = entityIDs[currentEntityIndex];\n      const nextEntityIndex = incrementIndex(currentEntityIndex, numIDs);\n      if (!searchForEntityID(state, entityID)) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        if (!garbage[entityType]) {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          garbage[entityType] = [];\n        }\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        garbage[entityType].push(entityID);\n      }\n      // If we've completed a full cycle, return early so we don't endlessly\n      // loop over the tree.\n      if (\n        nextTypeIndex === startTypeIndex &&\n        nextEntityIndex === startEntityIndex\n      ) {\n        currentTypeIndex = nextTypeIndex;\n        currentEntityIndex = nextEntityIndex;\n        return garbage;\n      }\n      // If we run out of budget, we can use the current indices as a starting\n      // point for the next round of garbage collection to continue where we\n      // left off.\n      if (window.performance.now() - start >= processingBudget) {\n        currentTypeIndex = nextTypeIndex;\n        currentEntityIndex = nextEntityIndex;\n        return garbage;\n      }\n      currentEntityIndex++;\n    }\n    currentTypeIndex = nextTypeIndex;\n    currentEntityIndex = 0;\n    // If we've completed a full cycle, return early so we don't endlessly\n    // loop over the tree.\n    if (\n      currentTypeIndex === startTypeIndex &&\n      currentEntityIndex === startEntityIndex\n    ) {\n      return garbage;\n    }\n  }\n  return garbage;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport saveSettingsModel from 'app/js/stores/actions/helpers/settings/saveSettingsModel';\nimport { saveExperienceSettings } from 'app/js/stores/actions/userActions';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport log from 'app/js/utils/log/log';\nimport garbageCollectEntitiesHelper from 'app/js/utils/state/garbageCollectEntities';\nimport {\n  findProviderModel,\n  findServerModel,\n  tryFindServerModel,\n} from 'app/js/utils/state/modelFinders';\nimport { scheduleImmediateUpdate } from 'app/js/utils/state/stateUpdateScheduler';\nimport resolveDescriptor from 'app/js/utils/url/resolveDescriptor';\nimport history from 'app/js/v4/history';\nimport navigateToRoute from 'app/js/v4/routes/navigateToRoute';\nimport createKey from 'app/js/views/v3/helpers/createKey';\nimport getPrePlayRoute from 'app/js/views/v3/helpers/routes/getPrePlayRoute';\n\n//\n// Action Types\n\nexport const SET_PRIMARY_SERVER = 'app/setPrimaryServer';\nexport const RESET_PRIMARY_SERVER = 'app/resetPrimaryServer';\nexport const CHANGE_PRIMARY_SERVER = 'app/changePrimaryServer';\nexport const CHANGE_COMPANION_SERVER = 'app/changeCompanionServer';\nexport const REMOVE_COMPANION_SERVER = 'app/removeCompanionServer';\nexport const GARBAGE_COLLECT_ENTITIES = 'app/garbageCollectEntities';\nexport const NAVIGATE = 'app/navigate';\nexport const NAVIGATE_BACK = 'app/navigateBack';\nexport const NAVIGATE_FORWARD = 'app/navigateForward';\nexport const NAVIGATE_HOME = 'app/navigateHome';\nexport const NAVIGATE_SEARCH = 'app/navigateSearch';\nexport const NAVIGATE_PRE_PLAY = 'app/navigatePrePlay';\nexport const SAVE_DEVICE_SETTINGS = 'app/saveDeviceSettings';\nexport const SAVE_LAST_SOURCE_PIVOT = 'app/saveLastSourcePivot';\nexport const CLEAR_LAST_SOURCE_PIVOTS = 'app/clearLastSourcePivots';\nexport const SAVE_PIVOT_PARAMS = 'app/savePivotParams';\nexport const DISCOVER_SERVERS = 'app/discoverServers';\nexport const DISMISS_UNCLAIMED_SERVER = 'app/dismissUnclaimedServer';\nexport const REDIRECT_TO_ROUTE = 'app/redirectToRoute';\nexport const REDIRECT_TO_URL = 'app/redirectToUrl';\nexport const TOGGLE_FULLSCREEN = 'app/toggleFullscreen';\nexport const SELECT_AUDIO_DEVICE = 'app/selectAudioDevice';\nexport const UPDATE_AUDIO_DEVICES = 'app/updateAudioDevices';\nexport const POPULATE_CLOUD_SERVER = 'app/populateCloudServer';\nexport const UPDATE_NAVIGATION_HISTORY = 'app/updateNavigationHistory';\nexport const UPDATE_AVAILABLE = 'app/updateAvailable';\n\n//\n// Action Creators\n\nexport const setPrimaryServer = createActionCreator(SET_PRIMARY_SERVER);\nexport const resetPrimaryServer = createActionCreator(RESET_PRIMARY_SERVER);\nexport const changePrimaryServer = createActionCreator(CHANGE_PRIMARY_SERVER);\nexport const changeCompanionServer = createActionCreator(\n  CHANGE_COMPANION_SERVER\n);\nexport const removeCompanionServer = createActionCreator(\n  REMOVE_COMPANION_SERVER\n);\nexport const garbageCollectEntities = createActionCreator(\n  GARBAGE_COLLECT_ENTITIES\n);\nexport const navigate = createActionCreator(NAVIGATE);\nexport const navigateBack = createActionCreator(NAVIGATE_BACK);\nexport const navigateForward = createActionCreator(NAVIGATE_FORWARD);\nexport const navigateHome = createActionCreator(NAVIGATE_HOME);\nexport const navigateSearch = createActionCreator(NAVIGATE_SEARCH);\nexport const navigatePrePlay = createActionCreator(NAVIGATE_PRE_PLAY);\nexport const saveDeviceSettings = createActionCreator(SAVE_DEVICE_SETTINGS);\nexport const saveLastSourcePivot = createActionCreator(SAVE_LAST_SOURCE_PIVOT);\nexport const clearLastSourcePivots = createActionCreator(\n  CLEAR_LAST_SOURCE_PIVOTS\n);\nexport const savePivotParams = createActionCreator(SAVE_PIVOT_PARAMS);\nexport const discoverServers = createActionCreator(DISCOVER_SERVERS);\nexport const dismissUnclaimedServer = createActionCreator(\n  DISMISS_UNCLAIMED_SERVER\n);\nexport const redirectToRoute = createActionCreator(REDIRECT_TO_ROUTE);\nexport const redirectToUrl = createActionCreator(REDIRECT_TO_URL);\nexport const selectAudioDevice = createActionCreator(SELECT_AUDIO_DEVICE);\nexport const updateAudioDevices = createActionCreator(UPDATE_AUDIO_DEVICES);\nexport const populateCloudServer = createActionCreator(POPULATE_CLOUD_SERVER);\nexport const updateNavigationHistory = createActionCreator(\n  UPDATE_NAVIGATION_HISTORY\n);\nexport const updateAvailable = createActionCreator(UPDATE_AVAILABLE);\n\nexport const enterFullscreen = createActionCreator(\n  TOGGLE_FULLSCREEN,\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  (payload: any) => {\n    return { isFullscreen: true };\n  }\n);\n\nexport const exitFullscreen = createActionCreator(\n  TOGGLE_FULLSCREEN,\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  (payload: any) => {\n    return { isFullscreen: false };\n  }\n);\n\n//\n// Action Handlers\n\nexport const appActionHandlers = {\n  [CHANGE_COMPANION_SERVER](appModel: any, payload: any) {\n    const serverModel = tryFindServerModel(appModel, payload);\n\n    if (serverModel) {\n      appModel.set('companionServer', serverModel);\n    } else {\n      log.warn(\n        '[Companion] Could not find %s to use as companion server',\n        payload.serverEntityID\n      );\n    }\n  },\n\n  [REMOVE_COMPANION_SERVER](appModel: any) {\n    appModel.unset('companionServer');\n  },\n\n  [GARBAGE_COLLECT_ENTITIES](appModel: any, payload: any) {\n    // Ensure that the state tree accurately reflects the `appModel` before\n    // determining what can be garbage collected.\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 0.\n    scheduleImmediateUpdate();\n\n    const garbage = garbageCollectEntitiesHelper(appModel.getState(), payload);\n    const entities = appModel.get('entities');\n\n    for (const entityType in garbage) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      const collectedIDs = garbage[entityType];\n      entities.get(entityType).remove(collectedIDs);\n    }\n\n    if (payload && payload.budget === Infinity && Object.keys(garbage).length) {\n      // When the garbage collector is required to do a full pass (budget ===\n      // Infinity) then we want to ensure there are no lingering entities on the\n      // state tree.  If full pass is not required then lingering entities on\n      // the state tree should not be an issue.\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 0.\n      scheduleImmediateUpdate();\n    }\n  },\n\n  [NAVIGATE_FORWARD]() {\n    __DEV__ &&\n      window.console.warn(\n        'NAVIGATE_FORWARD action handler requires app-specific implementation'\n      );\n  },\n\n  [NAVIGATE_HOME]() {\n    __DEV__ &&\n      window.console.warn(\n        'NAVIGATE_HOME action handler requires app-specific implementation'\n      );\n  },\n\n  [NAVIGATE_SEARCH]() {\n    __DEV__ &&\n      window.console.warn(\n        'NAVIGATE_SEARCH action handler requires app-specific implementation'\n      );\n  },\n\n  [SAVE_LAST_SOURCE_PIVOT](appModel: any, payload: any, dispatch: any) {\n    const server = findServerModel(appModel, payload);\n    const provider = findProviderModel(appModel, payload);\n    const experienceSettings = appModel.get('user').get('experienceSettings');\n    const lastSourcePivots = experienceSettings.get('lastSourcePivots');\n    const shouldSaveLastSourcePivots = experienceSettings.get(\n      'shouldSaveLastSourcePivots'\n    );\n\n    if (!shouldSaveLastSourcePivots) {\n      return;\n    }\n\n    const sourceKey = createKey(\n      server.get('machineIdentifier'),\n      provider.get('identifier'),\n      payload.directoryID\n    );\n\n    dispatch(\n      saveExperienceSettings({\n        lastSourcePivots: {\n          ...lastSourcePivots,\n          [sourceKey]: payload.pivotKey,\n        },\n      })\n    );\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [CLEAR_LAST_SOURCE_PIVOTS](appModel: any, payload: any, dispatch: any) {\n    dispatch(\n      saveExperienceSettings({\n        lastSourcePivots: {},\n      })\n    );\n  },\n\n  [SAVE_PIVOT_PARAMS](appModel: any, payload: any, dispatch: any) {\n    const server = findServerModel(appModel, payload);\n    const provider = findProviderModel(appModel, payload);\n\n    const savedPivotParams = appModel\n      .get('user')\n      .get('experienceSettings')\n      .get('savedPivotParams');\n\n    const pivotParamsKey = createKey(\n      server.get('machineIdentifier'),\n      provider.get('identifier'),\n      payload.directoryID,\n      payload.pivotKey\n    );\n\n    dispatch(\n      saveExperienceSettings({\n        savedPivotParams: {\n          ...savedPivotParams,\n          [pivotParamsKey]: payload.params,\n        },\n      })\n    );\n  },\n\n  [SAVE_DEVICE_SETTINGS](appModel: any, payload: any) {\n    saveSettingsModel(appModel.get('deviceSettings'), payload);\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [DISCOVER_SERVERS](appModel: any) {\n    dispatcher.trigger('discover:servers');\n  },\n\n  [DISMISS_UNCLAIMED_SERVER](appModel: any, payload: any, dispatch: any) {\n    const { machineIdentifier } = payload;\n    const dismissedUnclaimedServers = appModel\n      .get('deviceSettings')\n      .get('dismissedUnclaimedServers');\n\n    if (dismissedUnclaimedServers[machineIdentifier]) {\n      return;\n    }\n\n    dispatch(\n      saveDeviceSettings({\n        dismissedUnclaimedServers: {\n          ...dismissedUnclaimedServers,\n          [machineIdentifier]: true,\n        },\n      })\n    );\n  },\n\n  [SET_PRIMARY_SERVER](appModel: any, payload: any) {\n    const { machineIdentifier } = payload;\n    const servers = appModel.get('servers');\n\n    servers.findServer(machineIdentifier).then(\n      (server: any) => {\n        appModel.set({\n          primaryServer: server,\n          isWaitingForPrimaryServer: false,\n        });\n      },\n      () => {\n        log.warn('Unable to set primary server to:', machineIdentifier);\n      }\n    );\n  },\n\n  [RESET_PRIMARY_SERVER](appModel: any) {\n    appModel.set({\n      primaryServer: null,\n      isWaitingForPrimaryServer: true,\n    });\n  },\n\n  [CHANGE_PRIMARY_SERVER](appModel: any, payload: any) {\n    const { machineIdentifier } = payload;\n\n    appModel\n      .get('servers')\n      .findServer(machineIdentifier)\n      .done((server: any) => {\n        if (\n          !server.get('isOutOfDate') &&\n          server.get('isPrimaryEligible') &&\n          appModel.get('primaryServer') !== server\n        ) {\n          appModel.set({\n            primaryServer: server,\n            isWaitingForPrimaryServer: false,\n          });\n        }\n      });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [NAVIGATE](appModel: any, payload: any, dispatch: any) {\n    const url = resolveDescriptor(payload);\n\n    if (payload.replace) {\n      window.location.replace(url);\n    } else {\n      window.location.href = url;\n    }\n  },\n\n  [NAVIGATE_PRE_PLAY](appModel: any, payload: any, dispatch: any) {\n    const { key, replace } = payload;\n    const serverModel = findServerModel(appModel, payload);\n    const providerModel = findProviderModel(appModel, payload);\n\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 5 arguments, but got 3.\n    const route = getPrePlayRoute(\n      serverModel.toJSON(),\n      providerModel.toJSON(),\n      key\n    );\n\n    if (route) {\n      dispatch(navigate({ pathname: route, replace }));\n    }\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [REDIRECT_TO_ROUTE](appModel: any, { route, params, replace }: any) {\n    // Defer to avoid the race condition where a Marionette view is not rendered\n    // so the React components will not be unmounted in `onClose`.\n\n    _.defer(() => {\n      navigateToRoute(route, params, replace);\n    });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [REDIRECT_TO_URL](appModel: any, { url, replace }: any) {\n    if (replace) {\n      window.location.replace(url);\n    } else {\n      window.location.href = url;\n    }\n  },\n\n  [TOGGLE_FULLSCREEN](appModel: any, { isFullscreen }: any) {\n    if (appModel.get('isFullscreen') !== isFullscreen) {\n      // The fullscreenManager will dispatch an enter or exit fullscreen action\n      // after a manual or event-driven fullscreen change.\n      appModel.set('isFullscreen', isFullscreen);\n    }\n  },\n\n  [UPDATE_AVAILABLE](appModel: any, { isUpdateAvailable }: any) {\n    if (appModel.get('isUpdateAvailable') !== isUpdateAvailable) {\n      appModel.set('isUpdateAvailable', isUpdateAvailable);\n    }\n  },\n\n  [SELECT_AUDIO_DEVICE]() {\n    __DEV__ &&\n      window.console.warn(\n        'SELECT_AUDIO_DEVICE action handler requires app-specific implementation'\n      );\n  },\n\n  [UPDATE_AUDIO_DEVICES]() {\n    __DEV__ &&\n      window.console.warn(\n        'UPDATE_AUDIO_DEVICES action handler requires app-specific implementation'\n      );\n  },\n\n  [POPULATE_CLOUD_SERVER](appModel: any) {\n    appModel.get('cloudServer').populate();\n  },\n\n  [UPDATE_NAVIGATION_HISTORY](appModel: any, payload: any) {\n    const { location } = payload;\n    const navHistory = appModel.get('history');\n\n    if (\n      !navHistory.length ||\n      navHistory[navHistory.length - 1].pathname !== location.pathname ||\n      navHistory[navHistory.length - 1].search !== location.search\n    ) {\n      appModel.set('history', [\n        ...navHistory,\n        {\n          pathname: location.pathname,\n          search: location.search,\n        },\n      ]);\n    }\n  },\n\n  [NAVIGATE_BACK](appModel: any, { replace }: any = {}) {\n    const navHistory = appModel.get('history');\n\n    if (navHistory.length < 2) {\n      // If there is not enough history to go back, navigate home.\n      appModel.set('history', []);\n      navigateToRoute('home', {}, replace);\n    } else {\n      const newNavHistory = navHistory.slice(0, navHistory.length - 1);\n      appModel.set('history', newNavHistory);\n\n      const previous = newNavHistory[newNavHistory.length - 1];\n      if (replace) {\n        history.replace(previous);\n      } else {\n        history.push(previous);\n      }\n    }\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function saveSettingsModel(model: any, settings: any) {\n  return model\n    .save({\n      ...settings,\n      isSaving: true,\n      saveError: null,\n    })\n    .then(\n      () => {\n        model.set({ isSaving: false });\n      },\n      (error: any) => {\n        // The error object is provided by the storageAdapter and has no\n        // enforced interface. Conservatively cherry-pick a non-localized\n        // error message to keep other error members out of the state tree.\n        const message = (error && error.message) || '';\n\n        model.set({ isSaving: false, saveError: { message } });\n      }\n    );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport path from 'app/js/utils/url/path';\n\nconst hashBang = '#!';\n\nexport default function resolveDescriptor(\n  descriptor: any,\n  prependHashBang = true\n) {\n  let url = '';\n\n  // See: https://github.com/ReactJSTraining/history/blob/master/docs/Location.md#location-descriptors\n  if (descriptor) {\n    if (typeof descriptor.pathname === 'string') {\n      url = descriptor.query\n        ? path.join(descriptor.pathname, descriptor.query)\n        : descriptor.pathname;\n    } else if (typeof descriptor === 'string') {\n      url = descriptor;\n    }\n  }\n\n  // If there is a url, prependHashbang is true and the url does not begin\n  // with a hashBang then prepend one ourselves.\n  if (url && prependHashBang && url.indexOf(hashBang) !== 0) {\n    url = hashBang + url;\n  }\n\n  return url;\n}\n","// Based on redux-actions from:\n// https://github.com/acdlite/redux-actions/blob/master/src/createAction.js\n\nexport interface Action<Payload> {\n  type: string;\n  payload: Payload;\n}\n\ntype ActionFunction<R> = (...args: any[]) => R;\n\nfunction createActionCreator<Payload>(\n  type: string,\n  actionCreator?: ActionFunction<Payload>\n): ActionFunction<Action<Payload>> {\n  return function (...args) {\n    const payload =\n      typeof actionCreator === 'function' ? actionCreator(...args) : args[0];\n\n    return { type, payload };\n  };\n}\n\nexport default createActionCreator;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport assert from 'app/js/utils/log/assert';\nimport isPlainObject from 'app/js/utils/object/isPlainObject';\n\nfunction createActionHandler(actionHandlers: any) {\n  if (__DEV__) {\n    assert(\n      isPlainObject(actionHandlers),\n      'Action handlers must be plain objects'\n    );\n\n    for (const type in actionHandlers) {\n      assert(\n        type !== 'undefined',\n        `Bad action handler name provided. Have you misspelled a constant? ${Object.keys(\n          actionHandlers\n        ).join(',')}`\n      );\n      assert(\n        typeof actionHandlers[type] === 'function',\n        `Action handler ${type} must be a function`\n      );\n    }\n  }\n\n  return actionHandlers;\n}\n\nexport default createActionHandler;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport assert from 'app/js/utils/log/assert';\nimport createControlledFetchHandler from './createControlledFetchHandler';\n\nexport default function createFetchHandler(options: any) {\n  const { key, getModel } = options;\n\n  return createControlledFetchHandler({\n    ...options,\n    fetch(appModel: any, payload: any) {\n      const model = getModel(appModel, payload);\n      const instance = key ? model.get(key) : model;\n\n      if (!instance) {\n        __DEV__ && assert(instance, 'Instance unavailable, cannot fetch');\n\n        return $.Deferred().reject({ status: 0 }).promise();\n      }\n\n      return (\n        instance\n          .fetch(payload.options)\n          // @ts-expect-error ts-migrate(6133) FIXME: 'instance_' is declared but its value is never rea... Remove this comment to see the full error message\n          .then(null, (instance_: any, xhr: any) =>\n            $.Deferred().reject(xhr).promise()\n          )\n      );\n    },\n  });\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport assert from 'app/js/utils/log/assert';\nimport toUpperCaseFirstLetter from 'app/js/utils/string/case/toUpperCaseFirstLetter';\nimport xhrErrorFilter from 'app/js/utils/xhr/xhrErrorFilter';\n\nexport default function createControlledFetchHandler(options: any) {\n  const { key, getModel, onResolved, onRejected } = options;\n\n  __DEV__ && assert(!!getModel, 'Missing mandatory `getModel` function');\n\n  const keyTitle = toUpperCaseFirstLetter(key);\n  const pendingKey = `is${keyTitle}Pending`;\n  const populatedKey = `is${keyTitle}Populated`;\n  const errorKey = key ? `${key}Error` : 'error';\n\n  return (appModel: any, payload = {}, dispatch: any) => {\n    const model = getModel(appModel, payload);\n    const sessionAttrs = model.sessionAttrs;\n\n    __DEV__ &&\n      assert(\n        !!sessionAttrs,\n        `${model.name} is missing session attributes ${pendingKey}, ${populatedKey}, and ${errorKey}`\n      );\n\n    __DEV__ &&\n      assert(\n        sessionAttrs.hasOwnProperty(pendingKey),\n        `${model.name} is missing a session attribute for ${pendingKey}`\n      );\n\n    __DEV__ &&\n      assert(\n        sessionAttrs.hasOwnProperty(populatedKey),\n        `${model.name} is missing a session attribute for ${populatedKey}`\n      );\n\n    __DEV__ &&\n      assert(\n        sessionAttrs.hasOwnProperty(errorKey),\n        `${model.name} is missing a session attribute for ${errorKey}`\n      );\n\n    const previousPending = model.get(pendingKey);\n    model.set(pendingKey, true);\n\n    options.fetch(appModel, payload, dispatch).then(\n      () => {\n        model.set({\n          [pendingKey]: false,\n          [populatedKey]: true,\n          [errorKey]: null,\n        });\n\n        if (onResolved) {\n          // Guarantee an optional side-effect and/or post-processing step runs\n          // within the same tick as the model attribute changes above.\n          onResolved(model, appModel, payload, dispatch);\n        }\n      },\n      (xhr: any) => {\n        __DEV__ &&\n          assert(\n            xhr,\n            `An XHR error object is required fetching ${model.name} fails`\n          );\n\n        const nextAttrs = xhr.aborting\n          ? {\n              [pendingKey]: previousPending,\n            }\n          : {\n              [pendingKey]: false,\n              [errorKey]: xhrErrorFilter(xhr),\n            };\n\n        model.set(nextAttrs);\n\n        if (onRejected) {\n          onRejected(model, appModel, payload, dispatch);\n        }\n      }\n    );\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport assert from 'app/js/utils/log/assert';\nimport toUpperCaseFirstLetter from 'app/js/utils/string/case/toUpperCaseFirstLetter';\n\nexport default function createPopulateHandler(options: any) {\n  const { key, fetchActionCreator, getModel } = options;\n  const populatedKey = `is${toUpperCaseFirstLetter(key)}Populated`;\n\n  __DEV__ &&\n    assert(\n      getModel && fetchActionCreator,\n      'Missing mandatory `getModel` and/or `fetchActionCreator`'\n    );\n\n  return (appModel: any, payload: any, dispatch: any) => {\n    const model = getModel(appModel, payload);\n\n    if (!model.get(populatedKey)) {\n      dispatch(fetchActionCreator(payload));\n    }\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport cloneDeep from 'lodash/cloneDeep';\nimport MetadataModel from 'app/js/models/metadata/MetadataModel';\nimport getIdentifiersFromSource from 'app/js/utils/metadata/getIdentifiersFromSource';\nimport {\n  findProviderModel,\n  findServerModel,\n} from 'app/js/utils/state/modelFinders';\n\nexport default function getLegacyActionModels(appModel: any, payload: any) {\n  const serverModel = findServerModel(appModel, {\n    serverEntityID: payload.server.entityID,\n  });\n  const providerModel = findProviderModel(appModel, {\n    providerEntityID: payload.provider.entityID,\n  });\n  let itemServerModel;\n  let itemProviderModel;\n  if (payload.itemServer) {\n    itemServerModel = findServerModel(appModel, {\n      serverEntityID: payload.itemServer.entityID,\n    });\n  }\n  if (payload.itemProvider) {\n    itemProviderModel = findProviderModel(appModel, {\n      providerEntityID: payload.itemProvider.entityID,\n    });\n  }\n  const legacyMetadataItem = cloneDeep({\n    ...payload.metadataItem,\n    ...payload.metadataItemState,\n  });\n  // V4 metadata items normalize the source to always exist, but V3 actions may\n  // get confused by the presence of a source that is the same as the\n  // container's. Strip the normalized source in that case.\n  if (legacyMetadataItem.source) {\n    const {\n      serverIdentifier: sourceServerIdentifier,\n      providerIdentifier: sourceProviderIdentifier,\n    } = getIdentifiersFromSource(legacyMetadataItem.source);\n    if (\n      sourceServerIdentifier === payload.server.machineIdentifier &&\n      sourceProviderIdentifier === payload.provider.identifier\n    ) {\n      delete legacyMetadataItem.source;\n    }\n  }\n  const metadataItemModel = new MetadataModel(legacyMetadataItem, {\n    server: serverModel,\n    provider: providerModel,\n    identifier: payload.provider.identifier,\n    parse: true,\n  });\n  // Some redispatched actions call `REPOPULATE_METADATA_ITEM` which fetches\n  // the item with `usePopulatedParams`. In order to make sure we get back the\n  // same data do checks to see if this data was requested, and add them to\n  // `_populatedParams` so they are not missing after the fetch.\n  if (metadataItemModel._populatedParams == null) {\n    metadataItemModel._populatedParams = {};\n  }\n  const includeParams = {\n    includeExternalMedia: 1,\n  };\n  if (legacyMetadataItem.preferences) {\n    (includeParams as any).includePreferences = 1;\n  }\n  if (legacyMetadataItem.extras) {\n    (includeParams as any).includeExtras = 1;\n  }\n  if (legacyMetadataItem.stations) {\n    (includeParams as any).includeStations = 1;\n  }\n  if (legacyMetadataItem.onDeck) {\n    (includeParams as any).includeOnDeck = 1;\n  }\n  if (legacyMetadataItem.popularLeaves) {\n    (includeParams as any).includePopularLeaves = 1;\n  }\n  // The following are not currently typed in Typescript so we pass though the\n  // raw API attribute\n  if (legacyMetadataItem.Concert) {\n    (includeParams as any).includeConcerts = 1;\n  }\n  if (legacyMetadataItem.Chapter) {\n    (includeParams as any).includeChapters = 1;\n  }\n  Object.assign(metadataItemModel._populatedParams, includeParams);\n  return {\n    serverModel,\n    providerModel,\n    itemServerModel,\n    itemProviderModel,\n    metadataItemModel,\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const HTML = 'html';\nexport const MARKDOWN = 'markdown';\nexport const PLAIN = 'plain';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport config from 'app/js/models/config';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport * as textFormats from 'app/js/utils/constants/textFormats';\n\nfunction getProviderTextFormat(providerIdentifier: any) {\n  if (!config.shouldRequestHTMLFromCloudProvider) {\n    return textFormats.PLAIN;\n  }\n\n  const htmlProviders = [\n    providerIdentifiers.PODCASTS,\n    providerIdentifiers.WEBSHOWS,\n  ];\n\n  if (providerIdentifiers.matches(providerIdentifier, htmlProviders)) {\n    return textFormats.HTML;\n  }\n\n  return textFormats.PLAIN;\n}\n\nexport default getProviderTextFormat;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport path from 'app/js/utils/url/path';\n\nexport default function refreshLibrary(serverModel: any, options: any) {\n  const {\n    libraryID,\n    libraryType,\n    cancel,\n    force,\n    allowMetrics,\n    metricsProperties = {},\n  } = options;\n\n  const params = force ? { force: 1 } : undefined;\n  const url = path.join(['/library/sections', libraryID, 'refresh'], params);\n  const xhrOptions = serverModel.getXHROptions(url, {\n    type: cancel ? 'DELETE' : 'GET',\n  });\n\n  if (allowMetrics) {\n    let action;\n\n    if (cancel) {\n      action = metricsActions.CANCEL_LIBRARY_UPDATE;\n    } else if (force) {\n      action = metricsActions.FORCE_REFRESH_LIBRARY;\n    } else {\n      action = metricsActions.UPDATE_LIBRARY;\n    }\n\n    resolve('metrics').trackClick({\n      ...metricsProperties,\n      action,\n      type: libraryID === 'all' ? 'all' : libraryType,\n    });\n  }\n\n  return $.ajax(xhrOptions).promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction getAuthCodeExchangeModel(appModel: any) {\n  return appModel.get('ui').get('authCodeExchange');\n}\n\nexport default getAuthCodeExchangeModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\n\nfunction createPIN(appModel: any) {\n  const cloudServer = appModel.get('cloudServer');\n\n  return (\n    $.ajax(\n      cloudServer.getXHROptions('/api/v2/pins', {\n        method: 'POST',\n        dataType: 'json',\n        data: {\n          strong: true,\n        },\n      })\n    )\n      // Strip XHR from promise resolution so consumers only receive JSON.\n      .then((response) => response)\n  );\n}\n\nexport default createPIN;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport parser2 from 'app/js/utils/parser2';\n\nfunction getAuthXHRErrors(xhr: any) {\n  const jsonResponse = xhr && xhr.responseJSON;\n\n  const xmlResponse =\n    !jsonResponse &&\n    xhr &&\n    xhr.responseText &&\n    parser2.parseXML(xhr.responseText);\n\n  const errors =\n    (jsonResponse && jsonResponse.errors) || (xmlResponse && xmlResponse.error);\n\n  if (!errors) {\n    return [];\n  }\n\n  return Array.isArray(errors) ? errors : [errors];\n}\n\nexport default getAuthXHRErrors;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport t from 'app/js/utils/t';\n\nexport enum ErrorContexts {\n  Subscription = 'subscription',\n  SendRecoveryCode = 'sendRecoveryCode',\n}\n\nfunction getMessage(code: any, context?: ErrorContexts) {\n  switch (context) {\n    case ErrorContexts.Subscription:\n      switch (code) {\n        case '1003':\n          return t(\n            'Subscriptions have been temporarily disabled: too many failed attempts. Please try again later.'\n          );\n      }\n      break;\n    case ErrorContexts.SendRecoveryCode:\n      switch (code) {\n        case '1001':\n          return t('User could not be authenticated.');\n        case '1003':\n          return t(\n            'A temporary recovery code has already been sent recently. Please try again later.'\n          );\n        case '1028':\n          return t('Invalid recovery code');\n      }\n      break;\n  }\n\n  switch (code) {\n    case '1001':\n      return t('The username or password is incorrect');\n    case '1003':\n      return t(\n        'Sign in has been temporarily disabled: too many failed attempts. Please try again later.'\n      );\n    case '1004':\n      return t('Authentication failed. Please try again later.');\n    case '1010-login':\n      return t('Login is required');\n    case '1010-password':\n      return t('Password is required');\n    case '1010-email':\n      return t('Email is required');\n    case '1011-username':\n      return t('Username has already been taken');\n    case '1011-email':\n      return t('Email has already been taken');\n    case '1028':\n      return t('Invalid verification code');\n    case '1029':\n      return t('Please enter the verification code');\n    case '1030':\n      return t('This account only allows signing in with an email address');\n    case '1031':\n      return t(\n        'The username or password is incorrect. Repeated attempts may temporarily disable sign in.'\n      );\n    case '1032-password':\n      return t('Password must be at least 8 characters');\n    case '1033-password':\n      return t('Password is too weak');\n    case '1034-password':\n      return t('Password must be different from username or email address');\n    case '1035-email':\n      return t('Email is not a valid email address');\n    case '1036-username':\n      return t('Username must not be an email address');\n    case '1037-username':\n      return t('Username contains invalid characters');\n    case '1038-pin':\n      return t('Pin must be 4 digits');\n    case '1039-passwordConfirmation':\n      return t('Confirm Password must match Password');\n    case '1040':\n      return t('Invalid Password');\n    case '1044':\n      return t('Invalid Password');\n  }\n\n  return;\n}\n\nexport default function getServerErrorMessage(\n  error?: any,\n  context?: ErrorContexts\n) {\n  if (!error) {\n    return;\n  }\n\n  const code = String(error.code);\n  const codeField = `${error.code}-${error.field}`;\n  const errorMessage =\n    getMessage(codeField, context) || getMessage(code, context);\n\n  return errorMessage || error.message || t('An unknown error occurred');\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport getServerErrorMessage, {\n  ErrorContexts,\n} from 'app/js/utils/getServerErrorMessage';\nimport t from 'app/js/utils/t';\n\nexport default function getSignInErrorMessage(\n  errors: any,\n  context?: ErrorContexts\n) {\n  const error = errors && errors[0];\n\n  if (error) {\n    return _.isObject(error) ? getServerErrorMessage(error, context) : error;\n  } else {\n    return t('There was a problem signing in to Plex.');\n  }\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport MetadataModel from 'app/js/models/metadata/MetadataModel';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createFetchHandler from 'app/js/stores/actions/helpers/createFetchHandler';\nimport createPopulateHandler from 'app/js/stores/actions/helpers/createPopulateHandler';\nimport refreshLibrary from 'app/js/stores/actions/helpers/refreshLibrary';\nimport * as serverActions from 'app/js/stores/actions/serverActions';\nimport { repopulatePage, showAlert } from 'app/js/stores/actions/ui/uiActions';\nimport * as agentIdentifiers from 'app/js/utils/constants/agentIdentifiers';\nimport * as alertTypes from 'app/js/utils/constants/alertTypes';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport * as metricsContexts from 'app/js/utils/constants/metrics/metricsContexts';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport * as scannerIdentifiers from 'app/js/utils/constants/scannerIdentifiers';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport * as activityTypes from 'app/js/utils/server/activityTypes';\nimport {\n  findProviderModel,\n  findServerModel,\n  findUserModel,\n} from 'app/js/utils/state/modelFinders';\nimport { scheduleImmediateUpdate } from 'app/js/utils/state/stateUpdateScheduler';\nimport t from 'app/js/utils/t';\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\nimport path from 'app/js/utils/url/path';\nimport xhrErrorFilter from 'app/js/utils/xhr/xhrErrorFilter';\nimport { ContentDirectory } from 'app/js/v4/core/providers/providersTypes';\nimport EditSectionModal from 'app/js/views/modals/EditSectionModal';\nimport getPrePlayRoute from 'app/js/views/v3/helpers/routes/getPrePlayRoute';\n\n//\n// Action Types\n\nexport const FETCH_CLOUD_PROVIDERS = 'provider/fetchCloudProviders';\nexport const POPULATE_CLOUD_PROVIDERS = 'provider/populateCloudProviders';\nexport const FETCH_PROVIDER = 'providers/fetchProvider';\nexport const POPULATE_PROVIDER = 'providers/populateProvider';\nexport const ADD_TO_CATALOG = 'provider/addToCatalog';\nexport const CLEAR_ADD_TO_CATALOG_ERROR = 'provider/clearAddToCatalogError';\nexport const SCAN_LIBRARY_FILES = 'provider/scanLibraryFiles';\nexport const EDIT_LIBRARY = 'provider/editLibrary';\nexport const ANALYZE_LIBRARY = 'provider/analyzeLibrary';\nexport const EMPTY_LIBRARY_TRASH = 'provider/emptyLibraryTrash';\nexport const DELETE_LIBRARY = 'provider/deleteLibrary';\nexport const UPGRADE_LIBRARY = 'provider/upgradeLibrary';\n\n//\n// Action Creators\n\nexport const fetchCloudProviders = createActionCreator(FETCH_CLOUD_PROVIDERS);\nexport const populateCloudProviders = createActionCreator(\n  POPULATE_CLOUD_PROVIDERS\n);\nexport const fetchProvider = createActionCreator(\n  FETCH_PROVIDER,\n  (payload: any) => {\n    const { options = {} } = payload;\n\n    return {\n      ...payload,\n      options: {\n        ...options,\n        // Disallow headers in the URL for the root provider request on cloud\n        // providers only. This allows the provider root endpoint to be cached.\n        // See: https://github.com/plexinc/plex-web-client/issues/14201\n        allowHeadersInUrl: false,\n      },\n    };\n  }\n);\nexport const populateProvider = createActionCreator(POPULATE_PROVIDER);\nexport const addToCatalog = createActionCreator(ADD_TO_CATALOG);\nexport const clearAddToCatalogError = createActionCreator(\n  CLEAR_ADD_TO_CATALOG_ERROR\n);\nexport const scanLibraryFiles = createActionCreator(SCAN_LIBRARY_FILES);\nexport const editLibrary = createActionCreator(EDIT_LIBRARY);\nexport const emptyLibraryTrash = createActionCreator(EMPTY_LIBRARY_TRASH);\nexport const analyzeLibrary = createActionCreator(ANALYZE_LIBRARY);\nexport const deleteLibrary = createActionCreator(DELETE_LIBRARY);\nexport const upgradeLibrary = createActionCreator(UPGRADE_LIBRARY);\nexport const refreshAllLibraryMetadata = createActionCreator(\n  SCAN_LIBRARY_FILES,\n  (payload: any) => {\n    return { ...payload, force: true };\n  }\n);\nexport const cancelScanLibraryFiles = createActionCreator(\n  SCAN_LIBRARY_FILES,\n  (payload: any) => {\n    return { ...payload, cancel: true };\n  }\n);\n\n//\n// Action Helpers\n\nfunction getLibraryIDFromContentDirectory(contentDirectoryModel: any) {\n  // PMS 1.13.10 and earlier is missing `id` on directories.\n  // See: https://github.com/plexinc/plex-media-server/issues/9292\n  const directoryKey = contentDirectoryModel.get('key');\n  return (\n    contentDirectoryModel.get('id') ||\n    directoryKey.substr(directoryKey.lastIndexOf('/') + 1)\n  );\n}\n\nfunction findContentDirectoryModel(appModel: any, payload: any) {\n  const providerModel = findProviderModel(appModel, payload);\n  const contentFeatureModel = providerModel\n    .get('features')\n    .get(providerFeatureTypes.CONTENT);\n  const findAttrs = {};\n  // Conditionally add key and addKey because otherwise\n  // findWhere({ key: undefined, hubKey: 'foo' }) would not find\n  // { hubKey: 'foo' }.\n  if (payload.contentDirectory.key) {\n    (findAttrs as any).key = payload.contentDirectory.key;\n  }\n  if (payload.contentDirectory.hubKey) {\n    (findAttrs as any).hubKey = payload.contentDirectory.hubKey;\n  }\n  return contentFeatureModel.get('directories').findWhere(findAttrs);\n}\n\nfunction getContentDirectoryKey(\n  providerModel: any,\n  contentDirectoryModel: any\n) {\n  const contentFeatureModel = providerModel\n    .get('features')\n    .get(providerFeatureTypes.CONTENT);\n  const contentFeatureKey = contentFeatureModel.get('key');\n  // Modern providers just have an `id` on the directory and clients are\n  // expected to construct the full `key` using the content feature's `key`.\n  let key;\n  if (contentFeatureKey) {\n    key = path.join([contentFeatureKey, contentDirectoryModel.get('id')]);\n  } else {\n    key = contentDirectoryModel.get('key');\n  }\n  return key;\n}\n\nfunction refreshProviders(dispatch: any, serverEntityID: any) {\n  dispatch(serverActions.fetchProviders({ serverEntityID }));\n  dispatch(serverActions.fetchLibraries({ serverEntityID }));\n  dispatch(repopulatePage({ serverEntityID }));\n}\n\n//\n// Action Handlers\n\nexport const providerActionHandlers = {\n  [FETCH_CLOUD_PROVIDERS]: createFetchHandler({\n    key: 'providers',\n    getModel: findUserModel,\n  }),\n\n  [POPULATE_CLOUD_PROVIDERS]: createPopulateHandler({\n    key: 'providers',\n    fetchActionCreator: fetchCloudProviders,\n    getModel: findUserModel,\n  }),\n\n  [FETCH_PROVIDER]: createFetchHandler({\n    getModel: findProviderModel,\n  }),\n\n  [POPULATE_PROVIDER]: createPopulateHandler({\n    getModel: findProviderModel,\n    fetchActionCreator: fetchProvider,\n  }),\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [CLEAR_ADD_TO_CATALOG_ERROR](appModel: any, payload: any) {\n    const addToCatalogModalModel = appModel.get('ui').get('addToCatalogModal');\n    addToCatalogModalModel.set('error', null);\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'dispatch' is declared but its value is never read... Remove this comment to see the full error message\n  [ADD_TO_CATALOG](appModel: any, payload: any, dispatch: any) {\n    const addToCatalogModalModel = appModel.get('ui').get('addToCatalogModal');\n    const providerModel = findProviderModel(appModel, payload);\n    const addToCatalogAction = providerModel\n      .get('features')\n      .get('actions')\n      .get('actions')\n      .get('addToCatalog');\n    const actionKey = addToCatalogAction.get('key');\n    scheduleImmediateUpdate(() => {\n      addToCatalogModalModel.set({\n        isUpdating: true,\n        error: null,\n      });\n    });\n    if (payload.data.fileURL) {\n      const blobXHR = new window.XMLHttpRequest();\n      blobXHR.open('GET', payload.data.fileURL, true);\n      blobXHR.responseType = 'blob';\n      blobXHR.onload = (event) => {\n        if ((event.target as any).status === 200) {\n          const file = (event.target as any).response;\n          const formData = new window.FormData();\n          formData.append('file', file);\n          const xhrOptions = providerModel.getXHROptions(actionKey, {\n            method: 'POST',\n            processData: false,\n            contentType: false,\n            data: formData,\n          });\n          $.ajax(xhrOptions).then(\n            // @ts-expect-error ts-migrate(6133) FIXME: 'response' is declared but its value is never read... Remove this comment to see the full error message\n            (response, status, xhr) => {\n              addToCatalogModalModel.set({\n                isUpdating: false,\n              });\n            },\n            (xhr) => {\n              addToCatalogModalModel.set({\n                isUpdating: false,\n                error: xhrErrorFilter(xhr),\n              });\n            }\n          );\n        }\n        // Always revoke the object URL when we are finished so that we clear up\n        // the used memory\n        window.URL.revokeObjectURL(payload.data.fileURL);\n      };\n      blobXHR.send();\n      return;\n    }\n    const url = path.join(actionKey, {\n      url: payload.data.channelURL,\n    });\n    const xhrOptions = providerModel.getXHROptions(url, {\n      method: 'PUT',\n      dataType: 'json',\n    });\n    const promise = $.ajax(xhrOptions);\n    promise.then(\n      // @ts-expect-error ts-migrate(6133) FIXME: 'status' is declared but its value is never read.\n      (response, status, xhr) => {\n        addToCatalogModalModel.set('isUpdating', false);\n        const showModel = new MetadataModel(response, {\n          server: providerModel.server,\n          provider: providerModel,\n          parse: true,\n        });\n        // Some failure conditions cause the provider to return an empty metadata\n        // container. Treat this case as an error.\n        if (!showModel.get('key')) {\n          addToCatalogModalModel.set({\n            isUpdating: false,\n            error: xhrErrorFilter(xhr),\n          });\n          return;\n        }\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 5 arguments, but got 3.\n        const route = getPrePlayRoute(\n          providerModel.server.state,\n          providerModel.state,\n          showModel.get('key')\n        );\n        // @ts-expect-error ts-migrate(2322) FIXME: Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n        window.location.hash = route;\n      },\n      (xhr) => {\n        addToCatalogModalModel.set({\n          isUpdating: false,\n          error: xhrErrorFilter(xhr),\n        });\n      }\n    );\n  },\n\n  [SCAN_LIBRARY_FILES](appModel: any, payload: any, dispatch: any) {\n    const { cancel, force, metricsPage } = payload;\n    const serverModel = findServerModel(appModel, payload);\n    const contentDirectoryModel = findContentDirectoryModel(appModel, payload);\n    const options = {\n      libraryID: getLibraryIDFromContentDirectory(contentDirectoryModel),\n      libraryType: contentDirectoryModel.get('type'),\n      cancel,\n      force,\n      allowMetrics: !!metricsPage,\n      metricsProperties: { page: metricsPage },\n    };\n    contentDirectoryModel.set('refreshing', !cancel);\n    refreshLibrary(serverModel, options)\n      .fail((xhr) => {\n        let errorMessage;\n        if (cancel) {\n          errorMessage = t('There was an unexpected error canceling the scan.');\n        } else if (force) {\n          errorMessage =\n            xhr.status === 503\n              ? t(\n                  \"An internet connection is required to refresh library metadata. Please check this server's connection and try again.\"\n                )\n              : t('There was an unexpected error refreshing library metadata.');\n        } else {\n          errorMessage =\n            xhr.status === 503\n              ? t(\n                  \"An internet connection is required to scan library files. Please check this server's connection and try again.\"\n                )\n              : t('There was an unexpected error scanning library files.');\n        }\n        dispatch(showAlert(errorMessage));\n      })\n      // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n      .always((xhr) => {\n        dispatch(\n          serverActions.testServer({\n            serverEntityID: payload.serverEntityID,\n          })\n        );\n      });\n  },\n\n  [EDIT_LIBRARY](appModel: any, payload: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const libraries = serverModel.get(__PLATFORM__).get('libraries');\n    const contentDirectoryModel = findContentDirectoryModel(appModel, payload);\n    libraries.fetch().then(() => {\n      const libraryID = getLibraryIDFromContentDirectory(contentDirectoryModel);\n      const libraryModel = libraries.get(libraryID);\n      dispatcher.trigger(\n        'show:modal',\n        new EditSectionModal({\n          server: serverModel,\n          model: libraryModel,\n        })\n      );\n      resolve('metrics').trackClick({\n        page: payload.metricsPage,\n        action: metricsActions.EDIT_LIBRARY,\n        type: libraryModel.get('type'),\n        context: metricsContexts.LIBRARY,\n      });\n    });\n  },\n\n  [EMPTY_LIBRARY_TRASH](appModel: any, payload: any, dispatch: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const providerModel = findProviderModel(appModel, payload);\n    const contentDirectoryModel = findContentDirectoryModel(appModel, payload);\n    const key = getContentDirectoryKey(providerModel, contentDirectoryModel);\n    const url = path.join([key, 'emptyTrash']);\n    const xhrOptions = serverModel.getXHROptions(url, { type: 'PUT' });\n    $.ajax(xhrOptions)\n      .done(() => {\n        dispatch(\n          showAlert({\n            type: alertTypes.SUCCESS,\n            message: t('The trash was emptied.'),\n          })\n        );\n      })\n      // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n      .fail((xhr) => {\n        dispatch(showAlert(t('There was a problem emptying the trash.')));\n      });\n    resolve('metrics').trackClick({\n      page: payload.metricsPage,\n      action: metricsActions.EMPTY_TRASH,\n      type: contentDirectoryModel.get('type'),\n      context: metricsContexts.LIBRARY,\n    });\n  },\n\n  [ANALYZE_LIBRARY](appModel: any, payload: any, dispatch: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const providerModel = findProviderModel(appModel, payload);\n    const contentDirectoryModel = findContentDirectoryModel(appModel, payload);\n    const key = getContentDirectoryKey(providerModel, contentDirectoryModel);\n    const url = path.join([key, 'analyze']);\n    const xhrOptions = serverModel.getXHROptions(url, { type: 'PUT' });\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    $.ajax(xhrOptions).fail((xhr) => {\n      dispatch(showAlert(t('There was a problem analyzing the library.')));\n    });\n    resolve('metrics').trackClick({\n      page: payload.metricsPage,\n      action: metricsActions.ANALYZE_LIBRARY,\n      type: contentDirectoryModel.get('type'),\n      context: metricsContexts.LIBRARY,\n    });\n  },\n\n  [DELETE_LIBRARY](appModel: any, payload: any, dispatch: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const providerModel = findProviderModel(appModel, payload);\n    const contentDirectoryModel = findContentDirectoryModel(appModel, payload);\n    const key = getContentDirectoryKey(providerModel, contentDirectoryModel);\n    const url = path.join(key, { async: 1 });\n    const xhrOptions = serverModel.getXHROptions(url, { type: 'DELETE' });\n    // Optimistically remove the content directory so the delete is reflected in\n    // the UI immediately.\n    providerModel\n      .get('features')\n      .get(providerFeatureTypes.CONTENT)\n      .get('directories')\n      .remove(contentDirectoryModel);\n    $.ajax(xhrOptions).fail(() => {\n      // Refresh the provider so our models reflect the real state, ie: reverses\n      // the optimistic deletion of the content directory.\n      refreshProviders(dispatch, payload.serverEntityID);\n      dispatch(showAlert(t('There was a problem deleting the library.')));\n    });\n    resolve('metrics').trackClick({\n      page: payload.metricsPage,\n      action: metricsActions.DELETE_LIBRARY,\n      type: contentDirectoryModel.get('type'),\n      context: metricsContexts.LIBRARY,\n    });\n  },\n\n  [UPGRADE_LIBRARY](\n    appModel: any,\n    payload: {\n      serverEntityID: string;\n      providerEntityID: string;\n      contentDirectory?: ContentDirectory;\n      options: {\n        refreshMetadata: boolean;\n      };\n    },\n    dispatch: any\n  ) {\n    const serverModel = findServerModel(appModel, payload);\n    const providerModel = findProviderModel(appModel, payload);\n    const contentDirectoryModel = findContentDirectoryModel(appModel, payload);\n    const libraryType = contentDirectoryModel.get('type');\n\n    let options;\n    if (libraryType === metadataTypes.MOVIE) {\n      options = {\n        agent: agentIdentifiers.PLEXMOVIE,\n        scanner: scannerIdentifiers.PLEX_MOVIE,\n      };\n    } else if (libraryType === metadataTypes.ARTIST) {\n      options = {\n        agent: agentIdentifiers.PLEXMUSIC,\n        scanner: scannerIdentifiers.PLEX_MUSIC,\n      };\n    } else {\n      options = {\n        agent: agentIdentifiers.PLEXSERIES,\n        scanner: scannerIdentifiers.PLEX_SERIES,\n      };\n    }\n\n    const key = getContentDirectoryKey(providerModel, contentDirectoryModel);\n    const url = path.join(key, options);\n    const xhrOptions = serverModel.getXHROptions(url, { type: 'PUT' });\n\n    const promise = $.ajax(xhrOptions).then(\n      () => {\n        refreshProviders(dispatch, payload.serverEntityID);\n      },\n      () => {\n        dispatch(showAlert(t('There was a problem upgrading the library.')));\n      }\n    );\n\n    if (payload.options.refreshMetadata) {\n      promise.then(() => {\n        dispatch(\n          serverActions.startLibrariesRefresh({\n            serverEntityID: payload.serverEntityID,\n            cancel: false,\n            force: true,\n            metricsPage: metricsPages.CONFIRM_UPGRADE_LIBRARY,\n          })\n        );\n      });\n    }\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [serverActions.FINISH_ACTIVITY](appModel: any, payload: any, dispatch: any) {\n    if (payload.activity.type === activityTypes.LIBRARY_DELETE) {\n      // Refresh the providers so content directory changes are accurate.\n      refreshProviders(dispatch, payload.serverEntityID);\n    }\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { MY_PLEX_SIGN_IN_STATE_OK } from 'app/js/models/server/ServerModel';\nimport parser from 'app/js/utils/parser2';\nimport maxDuration from 'app/js/utils/promise/maxDuration';\nimport retryTimes from 'app/js/utils/promise/retryTimes';\nimport isMediaProvidersRoot from 'app/js/utils/server/isMediaProvidersRoot';\nimport path from 'app/js/utils/url/path';\n\nfunction pollForResource(appModel: any, serverModel: any) {\n  const cloudServerModel = appModel.get('cloudServer');\n  const resources = cloudServerModel.get('resources');\n  const where = { clientIdentifier: serverModel.get('machineIdentifier') };\n\n  return retryTimes(\n    () =>\n      resources\n        .fetch()\n        .then(() =>\n          resources.findWhere(where)\n            ? $.Deferred().resolve().promise()\n            : $.Deferred().reject().promise()\n        ),\n    {\n      times: 30,\n      delay: 1000,\n    }\n  );\n}\n\nfunction ensurePrimaryServer(\n  appModel: any,\n  serverModel: any,\n  setPrimaryServer: any\n) {\n  const deferred = $.Deferred();\n\n  const primaryServer = appModel.get('primaryServer');\n  const isAlreadyPrimaryServer = primaryServer === serverModel;\n\n  if (isAlreadyPrimaryServer) {\n    // If the claimed server never became non-primary, resolve immediately\n    deferred.resolve();\n  } else {\n    // If the claimed server became non-primary, switch back to it\n    appModel.once('change:primaryServer', deferred.resolve);\n    setPrimaryServer();\n  }\n\n  return maxDuration(deferred.promise(), 2000);\n}\n\nfunction claimServer(\n  appModel: any,\n  serverModel: any,\n  authToken: any,\n  setPrimaryServer: any\n) {\n  const user = appModel.get('user');\n  const cloudServer = appModel.get('cloudServer');\n\n  if (user.get('anonymous')) {\n    // Be defensive against anonymous users ever claiming a server. We should\n    // never present anonymous user ability to claim a server through the UI.\n    return $.Deferred().reject().promise();\n  }\n\n  // Get a token from plex.tv, then have the server claim the token\n  return $.ajax(\n    cloudServer.getXHROptions('/api/claim/token', {\n      headers: { ['X-Plex-Token']: authToken },\n    })\n  )\n    .promise()\n    .then((response) => parser.parseXML(response).token)\n    .then((token) =>\n      $.ajax(\n        serverModel.getXHROptions(path.join('/myplex/claim', { token }), {\n          type: 'POST',\n        })\n      )\n    )\n    .then(() => pollForResource(appModel, serverModel))\n    .then(() => {\n      // If we know this server supports the /media/provider root attributes\n      // use this new endpoint so that we have the providers we expect\n      // from the server.\n\n      const useMediaProviderRoot = isMediaProvidersRoot(serverModel);\n      let xhrOptions;\n\n      if (useMediaProviderRoot) {\n        xhrOptions = serverModel.getXHROptions('/media/providers');\n      }\n\n      return serverModel.fetch(xhrOptions);\n    })\n    .then(() => ensurePrimaryServer(appModel, serverModel, setPrimaryServer))\n    .then(() => {\n      const email = user.get('email');\n      const cloudAccount = serverModel.get(__PLATFORM__).get('cloudAccount');\n\n      serverModel.set({\n        myPlexSigninState: MY_PLEX_SIGN_IN_STATE_OK,\n        myPlexUsername: email,\n      });\n\n      cloudAccount.set({\n        signedIn: true,\n        username: email,\n      });\n    });\n}\n\nexport default claimServer;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\n\nexport default function retryTimes(promiseGeneratingFn: any, options = {}) {\n  let retriesLeft = Math.floor(Math.max((options as any).times || 0, 0));\n  const delay = Math.floor(Math.max((options as any).delay || 0, 0));\n  if ((options as any).cancel) {\n    (options as any).cancel.always(() => {\n      retriesLeft = -1;\n    });\n  }\n  const deferred = $.Deferred();\n  let timer: any;\n  if ((options as any).maxDuration) {\n    timer = window.setTimeout(() => {\n      deferred.reject('maxDuration');\n    }, (options as any).maxDuration);\n  }\n  function tryAgain() {\n    if (retriesLeft < 0) {\n      return;\n    }\n    promiseGeneratingFn()\n      .done(function () {\n        if (timer) {\n          window.clearTimeout(timer);\n        }\n        // eslint-disable-next-line prefer-rest-params\n        deferred.resolve(...arguments);\n      })\n      .fail(function () {\n        retriesLeft = retriesLeft - 1;\n        if (retriesLeft < 0) {\n          if (timer) {\n            window.clearTimeout(timer);\n          }\n          // eslint-disable-next-line prefer-rest-params\n          deferred.reject(...arguments);\n        } else if (deferred.state() === 'pending') {\n          window.setTimeout(tryAgain, delay);\n        }\n      });\n  }\n  tryAgain();\n  return deferred.promise();\n}\n","import $ from 'jquery';\n\nfunction maxDuration<ResolveValue>(\n  promise: JQueryPromise<ResolveValue>,\n  duration: number\n): JQueryPromise<ResolveValue> {\n  const deferred = $.Deferred<ResolveValue>();\n\n  const timeout = window.setTimeout(() => {\n    deferred.reject();\n  }, duration);\n\n  promise.then(deferred.resolve, deferred.reject).always(() => {\n    window.clearTimeout(timeout);\n  });\n\n  return deferred.promise();\n}\n\nexport default maxDuration;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport { changePrimaryServer } from 'app/js/stores/actions/appActions';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport claimServerHelper from 'app/js/stores/actions/helpers/server/claimServer';\nimport getAuthCodeExchangeModel from 'app/js/stores/actions/helpers/server/getAuthCodeExchangeModel';\nimport signOutServerHelper from 'app/js/stores/actions/helpers/server/signOutServer';\nimport createPINHelper from 'app/js/stores/actions/helpers/user/createPIN';\nimport getAuthXHRErrors from 'app/js/stores/actions/helpers/user/getAuthXHRErrors';\nimport getSignInErrorMessage from 'app/js/stores/actions/helpers/user/getSignInErrorMessage';\nimport * as metricsContexts from 'app/js/utils/constants/metrics/metricsContexts';\nimport * as metricsEvents from 'app/js/utils/constants/metrics/metricsEvents';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport { findServerModel } from 'app/js/utils/state/modelFinders';\nimport t from 'app/js/utils/t';\n\n//\n// Action Types\n\nexport const CLAIM_SERVER = 'server/claim/claimServer';\nexport const SIGN_IN_THEN_CLAIM_SERVER = 'server/claim/signInThenClaimServer';\nexport const SIGN_OUT_SERVER = 'server/claim/signOutServer';\nexport const CREATE_PIN = 'server/claim/createPIN';\n\n//\n// Action Creators\n\nexport const claimServer = createActionCreator(CLAIM_SERVER);\nexport const signInThenClaimServer = createActionCreator(\n  SIGN_IN_THEN_CLAIM_SERVER\n);\nexport const signOutServer = createActionCreator(SIGN_OUT_SERVER);\nexport const createPIN = createActionCreator(CREATE_PIN);\n\n//\n// Helpers\n\nfunction signIn(appModel: any, payload: any) {\n  const userModel = appModel.get('user');\n\n  const { authToken } = payload;\n\n  return $.ajax(\n    userModel.server.getXHROptions(_.result(userModel, 'url'), {\n      headers: { 'X-Plex-Token': authToken },\n    })\n  ).then((response) => userModel.signIn(response, {}));\n}\n\nfunction claimServerHandler(appModel: any, payload: any, dispatch: any) {\n  const { authToken } = payload;\n\n  const serverModel = findServerModel(appModel, payload);\n  const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n\n  authCodeExchangeModel.set({\n    errorMessage: null,\n    isBusy: true,\n  });\n\n  const metrics = resolve('metrics');\n\n  return claimServerHelper(appModel, serverModel, authToken, () => {\n    dispatch(\n      changePrimaryServer({\n        machineIdentifier: serverModel.id,\n        metricsProperties: { context: metricsContexts.SETTINGS },\n      })\n    );\n  })\n    .done(() => {\n      metrics.trackEvent({\n        event: metricsEvents.CLIENT_CLAIM_SERVER,\n        interaction: true,\n      });\n    })\n    .fail(() => {\n      metrics.trackEvent({\n        event: metricsEvents.CLIENT_CLAIM_SERVER_FAILURE,\n        interaction: false,\n      });\n\n      authCodeExchangeModel.set({\n        errorMessage: t('There was a problem claiming this server.'),\n        isBusy: false,\n      });\n    });\n}\n\n//\n// Action Handlers\n\nexport const claimServerActionHandlers = {\n  [CLAIM_SERVER](appModel: any, payload: any, dispatch: any) {\n    claimServerHandler(appModel, payload, dispatch).then(() => {\n      const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n\n      authCodeExchangeModel.set({\n        errorMessage: null,\n        isBusy: false,\n      });\n    });\n  },\n\n  [SIGN_IN_THEN_CLAIM_SERVER](appModel: any, payload: any, dispatch: any) {\n    signIn(appModel, payload)\n      .then(() => claimServerHandler(appModel, payload, dispatch))\n      .then(() => {\n        const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n\n        authCodeExchangeModel.set({\n          errorMessage: null,\n          isBusy: false,\n        });\n      })\n      .fail((xhr) => {\n        const errors = getAuthXHRErrors(xhr);\n        dispatcher.trigger('show:alert', {\n          message: getSignInErrorMessage(errors),\n        });\n\n        const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n        authCodeExchangeModel.set({\n          errorMessage: t('There was a problem claiming this server.'),\n          isBusy: false,\n        });\n      });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'dispatch' is declared but its value is never read... Remove this comment to see the full error message\n  [SIGN_OUT_SERVER](appModel: any, payload: any, dispatch: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const cloudAccountModel = serverModel.get(__PLATFORM__).get('cloudAccount');\n    const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n\n    authCodeExchangeModel.set({\n      errorMessage: null,\n      isBusy: true,\n    });\n\n    signOutServerHelper(cloudAccountModel)\n      .done(() => {\n        authCodeExchangeModel.set({\n          errorMessage: null,\n          isBusy: false,\n        });\n      })\n      .fail(() => {\n        authCodeExchangeModel.set({\n          errorMessage: t('There was a problem signing the server out.'),\n          isBusy: false,\n        });\n      });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [CREATE_PIN](appModel: any, payload: any, dispatch: any) {\n    const pinPromise = createPINHelper(appModel);\n    const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n\n    pinPromise.then((pin) => {\n      authCodeExchangeModel.set({\n        pinID: pin.id,\n        code: pin.code,\n        isBusy: true,\n      });\n    });\n\n    pinPromise.fail(() => {\n      authCodeExchangeModel.set({\n        fatalErrorMessage: t('An error occurred'),\n        isBusy: false,\n      });\n    });\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { MY_PLEX_SIGN_IN_STATE_NONE } from 'app/js/models/server/ServerModel';\n\nfunction signOutServer(cloudAccount: any) {\n  return (\n    cloudAccount\n      // These request can take a while, so don't use our default timeout.\n      .destroy({ timeout: 0 })\n      .promise()\n      .done(() => {\n        cloudAccount.server.set({\n          accessToken: undefined,\n          myPlexSigninState: MY_PLEX_SIGN_IN_STATE_NONE,\n          myPlexSubscription: false,\n        });\n\n        cloudAccount.restoreDefaults();\n      })\n  );\n}\n\nexport default signOutServer;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport { setDVRDeviceEnabled } from 'app/js/stores/actions/ui/dvrSetupActions';\nimport AlertBarView from 'app/js/views/alerts/AlertBarView';\nimport getServerSettingsRoute from 'app/js/views/v3/helpers/routes/getServerSettingsRoute';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/alert... Remove this comment to see the full error message\nimport tpl from 'app/templates/alerts/MediaGrabberDeviceDiscoveredAlertBarView.tpl';\n\nconst MediaGrabberDeviceDiscoveredAlertBarView = AlertBarView.extend({\n  //\n  // Properties\n\n  className: 'alert-bar notify',\n  template: tpl,\n\n  events: _.extend(\n    {\n      'click .setup-link': 'onSetupClick',\n    },\n    AlertBarView.prototype.events\n  ),\n\n  //\n  // Control\n\n  serializeData() {\n    return {\n      model: this.model.get('model'),\n      make: this.model.get('make'),\n      dvrSettingsRoute: getServerSettingsRoute('manage', 'dvr'),\n    };\n  },\n\n  disableDevice() {\n    const appStore = resolve('appStore');\n    const serverEntityID = this.options.serverEntityID;\n\n    if (serverEntityID) {\n      appStore.dispatch(\n        setDVRDeviceEnabled({\n          serverEntityID,\n          deviceID: this.model.id,\n          enabled: false,\n        })\n      );\n    }\n  },\n\n  //\n  // Listeners\n\n  onSetupClick() {\n    this.hide();\n    this.disableDevice();\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n  onCloseClick(event: any) {\n    // eslint-disable-next-line prefer-rest-params\n    AlertBarView.prototype.onCloseClick.apply(this, arguments);\n\n    this.disableDevice();\n  },\n});\n\nexport default MediaGrabberDeviceDiscoveredAlertBarView;\n","import _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/RelayConfirmationModal.tpl';\n\nconst RelayConfirmationModal = ConfirmModal.extend({\n  //\n  // Properties\n\n  template: tpl,\n\n  events: _.extend(\n    {\n      'click .learn-more': 'onLearnMoreClick',\n    },\n    ConfirmModal.prototype.events\n  ),\n\n  //\n  // Listeners\n\n  onRender: function () {\n    // eslint-disable-next-line prefer-rest-params\n    ConfirmModal.prototype.onRender.apply(this, arguments);\n\n    resolve('metrics').trackView(\n      {\n        page: 'relayNotification',\n        mode: 'modal',\n        action: metricsActions.DISMISS,\n      },\n      { interaction: false }\n    );\n  },\n\n  onHide() {\n    // eslint-disable-next-line prefer-rest-params\n    ConfirmModal.prototype.onHide.apply(this, arguments);\n\n    resolve('metrics').trackClick({\n      page: 'relayNotification',\n      mode: 'modal',\n      action: metricsActions.DISMISS,\n    });\n  },\n\n  onLearnMoreClick() {\n    resolve('metrics').trackClick({\n      page: 'relayNotification',\n      mode: 'modal',\n      action: metricsActions.LEARN,\n    });\n  },\n\n  //\n  // Control\n\n  serializeData() {\n    return {\n      serverName: this.options.serverName,\n      escapedServerName: _.escape(this.options.serverName),\n    };\n  },\n});\n\nexport default RelayConfirmationModal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport MediaGrabberDeviceModel from 'app/js/models/provider/grabber/MediaGrabberDeviceModel';\nimport { MY_PLEX_SIGN_IN_STATE_NONE } from 'app/js/models/server/ServerModel';\nimport { redirectToRoute } from 'app/js/stores/actions/appActions';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createFetchHandler from 'app/js/stores/actions/helpers/createFetchHandler';\nimport createPopulateHandler from 'app/js/stores/actions/helpers/createPopulateHandler';\nimport getLegacyActionModels from 'app/js/stores/actions/helpers/getLegacyActionModels';\nimport refreshLibrary from 'app/js/stores/actions/helpers/refreshLibrary';\nimport { showAlert } from 'app/js/stores/actions/ui/uiActions';\nimport {\n  saveExperienceSettings,\n  setReminder,\n} from 'app/js/stores/actions/userActions';\nimport * as alertTypes from 'app/js/utils/constants/alertTypes';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport * as metricsContexts from 'app/js/utils/constants/metrics/metricsContexts';\nimport ReminderType from 'app/js/utils/constants/user/ReminderType';\nimport isAfterReminderDate from 'app/js/utils/dateTime/isAfterReminderDate';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport * as activityTypes from 'app/js/utils/server/activityTypes';\nimport addHttpFallbackConnectionToServer from 'app/js/utils/server/addHttpFallbackConnectionToServer';\nimport {\n  findServerFlexModel,\n  findServerModel,\n} from 'app/js/utils/state/modelFinders';\nimport { scheduleImmediateUpdate } from 'app/js/utils/state/stateUpdateScheduler';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\nimport getReminderID from 'app/js/utils/user/getReminderID';\nimport MediaGrabberDeviceDiscoveredAlertBarView from 'app/js/views/alerts/MediaGrabberDeviceDiscoveredAlertBarView';\nimport EditSectionModal from 'app/js/views/modals/EditSectionModal';\nimport RelayConfirmationModal from 'app/js/views/modals/RelayConfirmationModal';\n\n//\n// Action Types\n\nexport const TEST_SERVER = 'server/testServer';\nexport const TEST_SERVERS = 'server/testServers';\nexport const CONFIRM_RELAY_CONNECTION = 'server/confirmRelayConnection';\nexport const ADD_HTTP_FALLBACK_CONNECTION = 'server/addHttpFallbackConnection';\nexport const START_ACTIVITY = 'server/startActivity';\nexport const UPDATE_ACTIVITY = 'server/updateActivity';\nexport const FINISH_ACTIVITY = 'server/finishActivity';\nexport const START_SYNTHETIC_ACTIVITY = 'server/startSyntheticActivity';\nexport const FINISH_SYNTHETIC_ACTIVITY = 'server/finishSyntheticActivity';\nexport const EVENT_CONNECTION_OPEN = 'server/eventConnectionOpen';\nexport const EVENT_CONNECTION_CLOSE = 'server/eventConnectionClose';\nexport const FETCH_PROVIDERS = 'server/fetchProviders';\nexport const POPULATE_PROVIDERS = 'server/populateProviders';\nexport const FETCH_LIBRARIES = 'server/fetchLibraries';\nexport const POPULATE_LIBRARIES = 'server/populateLibraries';\nexport const REDISPATCH_LEGACY_SERVER_ACTION =\n  'server/redispatchLegacyServerAction';\nexport const FETCH_SETTINGS = 'server/fetchSettings';\nexport const POPULATE_SETTINGS = 'server/populateSettings';\nexport const UPDATE_SETTING = 'server/updateSetting';\nexport const SAVE_SETTING = 'server/saveSetting';\nexport const ADD_LIBRARY = 'server/addLibrary';\nexport const START_LIBRARIES_REFRESH = 'server/startLibrariesRefresh';\nexport const ALLOW_HTTP_FALLBACK = 'server/allowHttpFallback';\nexport const OPTIMIZE_DATABASE = 'server/optimizeDatabase';\nexport const CLEAN_BUNDLES = 'server/cleanBundles';\nexport const EMPTY_TRASH = 'server/emptyTrash';\nexport const DELETE_SERVER = 'server/deleteServer';\nexport const DISCOVER_MEDIA_GRABBER_DEVICE =\n  'server/discoverMediaGrabberDevice';\nexport const POPULATE_HAS_ITUNES = 'server/populateHasiTunes';\n\n//\n// Action Handlers\n\nexport const testServer = createActionCreator(TEST_SERVER);\nexport const testServers = createActionCreator(TEST_SERVERS);\nexport const confirmRelayConnection = createActionCreator(\n  CONFIRM_RELAY_CONNECTION\n);\nexport const addHttpFallbackConnection = createActionCreator(\n  ADD_HTTP_FALLBACK_CONNECTION\n);\nexport const startActivity = createActionCreator(START_ACTIVITY);\nexport const updateActivity = createActionCreator(UPDATE_ACTIVITY);\nexport const finishActivity = createActionCreator(FINISH_ACTIVITY);\nexport const startSyntheticActivity = createActionCreator(\n  START_SYNTHETIC_ACTIVITY\n);\nexport const finishSyntheticActivity = createActionCreator(\n  FINISH_SYNTHETIC_ACTIVITY\n);\nexport const eventConnectionOpen = createActionCreator(EVENT_CONNECTION_OPEN);\nexport const eventConnectionClose = createActionCreator(EVENT_CONNECTION_CLOSE);\nexport const fetchProviders = createActionCreator(FETCH_PROVIDERS);\nexport const populateProviders = createActionCreator(POPULATE_PROVIDERS);\nexport const fetchLibraries = createActionCreator(FETCH_LIBRARIES);\nexport const populateLibraries = createActionCreator(POPULATE_LIBRARIES);\nexport const redispatchLegacyServerAction = createActionCreator(\n  REDISPATCH_LEGACY_SERVER_ACTION\n);\n\nexport const fetchSettings = createActionCreator(FETCH_SETTINGS);\nexport const populateSettings = createActionCreator(POPULATE_SETTINGS);\nexport const updateSetting = createActionCreator(UPDATE_SETTING);\nexport const saveSetting = createActionCreator(SAVE_SETTING);\n\nexport const addLibrary = createActionCreator(ADD_LIBRARY);\nexport const startLibrariesRefresh = createActionCreator(\n  START_LIBRARIES_REFRESH\n);\n\nexport const allowHttpFallback = createActionCreator(ALLOW_HTTP_FALLBACK);\nexport const optimizeDatabase = createActionCreator(OPTIMIZE_DATABASE);\nexport const cleanBundles = createActionCreator(CLEAN_BUNDLES);\nexport const emptyTrash = createActionCreator(EMPTY_TRASH);\n\nexport const deleteServer = createActionCreator(DELETE_SERVER);\n\nexport const discoverMediaGrabberDevice = createActionCreator(\n  DISCOVER_MEDIA_GRABBER_DEVICE\n);\n\nexport const populateHasiTunes = createActionCreator(POPULATE_HAS_ITUNES);\n\nexport const cancelLibrariesRefresh = createActionCreator(\n  START_LIBRARIES_REFRESH,\n  (payload: any) => {\n    return { ...payload, cancel: true };\n  }\n);\n\n//\n// Helpers\n\nfunction trackAction(action: any, page: any) {\n  resolve('metrics').trackClick({\n    page,\n    action,\n    context: metricsContexts.SERVER,\n  });\n}\n\nfunction updateSettingModel(appModel: any, payload: any) {\n  const server = findServerModel(appModel, payload);\n  const serverFlexModel = findServerFlexModel(appModel, payload);\n  const settingModel = serverFlexModel.get('settings').get(payload.setting.id);\n\n  if (settingModel) {\n    // Need to parse to ensure value is of correct type.\n    const setting = settingModel.parse(payload.setting);\n    settingModel.set('value', setting.value);\n\n    if (setting.id === 'FriendlyName' && setting.value) {\n      server.set('friendlyName', setting.value);\n    } else if (setting.id === 'allowMediaDeletion') {\n      server.set('allowMediaDeletion', setting.value);\n    }\n  }\n}\n\n//\n// Action Handlers\n\nexport const serverActionHandlers = {\n  [TEST_SERVER](appModel: any, payload: any) {\n    const serverModel = findServerModel(appModel, payload);\n    dispatcher.trigger('test:server', serverModel);\n  },\n\n  [TEST_SERVERS]() {\n    dispatcher.trigger('test:servers');\n  },\n\n  [START_ACTIVITY](appModel: any, payload: any, dispatch: any) {\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n    if (!serverFlexModel) {\n      // Exit early if the necessary model(s) are not found.\n      // See: https://github.com/plexinc/plex-web-client/issues/16537\n      return;\n    }\n    const activity = payload.activity;\n    const activities = serverFlexModel.get('activities');\n    activities.add([activity], { parse: true });\n    // Now that we have a real activity, we can remove the synthetic activity.\n    if (!activity.synthetic) {\n      dispatch(\n        finishSyntheticActivity({\n          serverEntityID: payload.serverEntityID,\n          activityType: activity.type,\n        })\n      );\n    }\n  },\n\n  [UPDATE_ACTIVITY](appModel: any, payload: any) {\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n    if (!serverFlexModel) {\n      // Exit early if the necessary model(s) are not found.\n      // See: https://github.com/plexinc/plex-web-client/issues/16537\n      return;\n    }\n    const activities = serverFlexModel.get('activities');\n    activities.add([payload.activity], { parse: true, merge: true });\n  },\n\n  [FINISH_ACTIVITY](appModel: any, payload: any) {\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n    if (!serverFlexModel) {\n      // Exit early if the necessary model(s) are not found.\n      // See: https://github.com/plexinc/plex-web-client/issues/16537\n      return;\n    }\n    const activities = serverFlexModel.get('activities');\n    activities.remove(payload.activity.uuid);\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [START_SYNTHETIC_ACTIVITY](appModel: any, payload: any, dispatch: any) {\n    // Components rely on activities being added and removed to trigger an\n    // action, like a modal closing. Some activities are fast enough that they\n    // are added and removed in the same batch of state updates. Schedule an\n    // that the activity is added to and removed from the state tree separately.\n    scheduleImmediateUpdate(() => {\n      const activity = {\n        type: payload.activityType,\n        synthetic: true,\n        uuid: `${payload.activityType}-${Date.now()}`,\n      };\n      if (payload.title) {\n        (activity as any).title = payload.title;\n      }\n      if (payload.Context) {\n        (activity as any).Context = payload.Context;\n      }\n      dispatch(\n        startActivity({\n          serverEntityID: payload.serverEntityID,\n          activity,\n        })\n      );\n    });\n  },\n\n  [FINISH_SYNTHETIC_ACTIVITY](appModel: any, payload: any) {\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n    if (!serverFlexModel) {\n      // Exit early if the necessary model(s) are not found.\n      // See: https://github.com/plexinc/plex-web-client/issues/16537\n      return;\n    }\n    const activities = serverFlexModel.get('activities');\n    const { activityType, Context, title } = payload;\n    const syntheticActivity = activities.findWhere((activity: any) => {\n      return (\n        activity.get('type') === activityType &&\n        activity.get('synthetic') === true &&\n        (title ? activity.get('title') === title : true) &&\n        (Context ? _.isEqual(activity.get('Context'), Context) : true)\n      );\n    });\n    if (syntheticActivity) {\n      activities.remove(syntheticActivity);\n    }\n  },\n\n  [EVENT_CONNECTION_OPEN](appModel: any, payload: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n    if (!serverModel || !serverFlexModel) {\n      // Exit early if the necessary model(s) are not found.\n      // See: https://github.com/plexinc/plex-web-client/issues/16537\n      return;\n    }\n    const activities = serverFlexModel.get('activities');\n    serverModel.set('hasEventConnection', true);\n    activities.fetch();\n  },\n\n  [EVENT_CONNECTION_CLOSE](appModel: any, payload: any) {\n    const serverModel = findServerModel(appModel, payload);\n    if (!serverModel) {\n      // Exit early if the necessary model(s) are not found.\n      // See: https://github.com/plexinc/plex-web-client/issues/16537\n      return;\n    }\n    serverModel.set('hasEventConnection', false);\n  },\n\n  [FETCH_PROVIDERS]: createFetchHandler({\n    key: 'providers',\n    getModel: findServerModel,\n  }),\n\n  [POPULATE_PROVIDERS]: createPopulateHandler({\n    key: 'providers',\n    fetchActionCreator: fetchProviders,\n    getModel: findServerModel,\n  }),\n\n  [FETCH_LIBRARIES]: createFetchHandler({\n    key: 'libraries',\n    getModel: findServerFlexModel,\n  }),\n\n  [POPULATE_LIBRARIES]: createPopulateHandler({\n    key: 'libraries',\n    fetchActionCreator: fetchLibraries,\n    getModel: findServerFlexModel,\n  }),\n\n  [REDISPATCH_LEGACY_SERVER_ACTION](\n    appModel: any,\n    payload: any,\n    dispatch: any\n  ) {\n    const { serverModel, providerModel } = getLegacyActionModels(\n      appModel,\n      payload\n    );\n\n    const legacyType = payload.legacyAction.type;\n    const legacyPayload = payload.legacyAction.payload;\n\n    dispatch({\n      type: legacyType,\n      payload: {\n        ...legacyPayload,\n        serverEntityID: serverModel.entityID(),\n        providerEntityID: providerModel.entityID(),\n      },\n    });\n  },\n\n  [FETCH_SETTINGS]: createFetchHandler({\n    key: 'settings',\n    getModel: findServerFlexModel,\n  }),\n\n  [POPULATE_SETTINGS]: createPopulateHandler({\n    key: 'settings',\n    fetchActionCreator: fetchSettings,\n    getModel: findServerFlexModel,\n  }),\n\n  [UPDATE_SETTING](appModel: any, payload: any) {\n    updateSettingModel(appModel, payload);\n  },\n\n  [SAVE_SETTING](appModel: any, payload: any) {\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n    const settingModel = serverFlexModel\n      .get('settings')\n      .get(payload.setting.id);\n\n    scheduleImmediateUpdate(() => settingModel.set({ isSaving: true }));\n    updateSettingModel(appModel, payload);\n\n    settingModel.save().then(\n      () => settingModel.set({ isSaving: false }),\n      () => settingModel.set({ isSaving: false })\n    );\n  },\n\n  [CONFIRM_RELAY_CONNECTION](\n    appModel: any,\n    { machineIdentifier, serverName }: any,\n    dispatch: any\n  ) {\n    const experienceSettingsModel = appModel\n      .get('user')\n      .get('experienceSettings');\n    const reminders = experienceSettingsModel.get('reminders');\n    const id = getReminderID(ReminderType.Relay, machineIdentifier);\n    const reminder = reminders.get(id);\n\n    if (reminder && !isAfterReminderDate(reminder.get('remindAfter'))) {\n      return;\n    }\n\n    const relayConfirmationModal = new RelayConfirmationModal({ serverName });\n\n    dispatcher.trigger('show:modal', relayConfirmationModal);\n\n    dispatch(setReminder({ id }));\n  },\n\n  [ADD_HTTP_FALLBACK_CONNECTION](appModel: any, payload: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const experienceSettings = appModel.get('user').get('experienceSettings');\n    const allowHttpFallbackSetting =\n      experienceSettings.get('allowHttpFallback');\n\n    addHttpFallbackConnectionToServer(\n      serverModel,\n      payload.address,\n      payload.port,\n      allowHttpFallbackSetting\n    );\n  },\n\n  [ADD_LIBRARY](appModel: any, payload: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const { options = {} } = payload;\n\n    const modal = new EditSectionModal({\n      server: serverModel,\n      redirect: payload.redirect !== false,\n      ...options,\n    });\n\n    dispatcher.trigger('show:modal', modal);\n\n    trackAction(metricsActions.ADD_LIBRARY, payload.metricsPage);\n  },\n\n  [START_LIBRARIES_REFRESH](appModel: any, payload: any, dispatch: any) {\n    const { cancel, force, metricsPage } = payload;\n\n    const serverModel = findServerModel(appModel, payload);\n\n    const options = {\n      serverModel,\n      libraryID: 'all',\n      cancel,\n      force,\n      allowMetrics: !!metricsPage,\n      metricsProperties: { page: metricsPage },\n    };\n\n    if (payload.cancel) {\n      const serverFlexModel = findServerFlexModel(appModel, payload);\n      const libraries = serverFlexModel.get('libraries');\n\n      libraries.each((library: any) => library.set('refreshing', false));\n    }\n\n    refreshLibrary(serverModel, options)\n      .fail(() => {\n        const errorMessage = payload.cancel\n          ? t('There was a problem canceling the update.')\n          : t('There was a problem updating libraries.');\n\n        dispatch(showAlert(errorMessage));\n      })\n      .always(() => {\n        dispatch(\n          fetchLibraries({\n            serverEntityID: payload.serverEntityID,\n          })\n        );\n      });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [ALLOW_HTTP_FALLBACK](appModel: any, payload: any, dispatch: any) {\n    dispatch(\n      saveExperienceSettings({ allowHttpFallback: payload.allowHttpFallback })\n    );\n    // Kick off a connection test immediately so the user doesn't need to wait\n    // for the next scheduled test.\n\n    dispatch(testServer({ serverEntityID: payload.serverEntityID }));\n  },\n\n  [OPTIMIZE_DATABASE](appModel: any, payload: any, dispatch: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n    const useActivity = serverModel.supports('optimizeDatabaseActivity');\n    const url = path.join('/library/optimize', useActivity ? { async: 1 } : {});\n    const xhrOptions = serverModel.getXHROptions(url, { type: 'PUT' });\n\n    dispatch(\n      startSyntheticActivity({\n        serverEntityID: payload.serverEntityID,\n        activityType: activityTypes.OPTIMIZE_DATABASE,\n      })\n    );\n    serverFlexModel.set({ optimizeDatabaseError: null });\n\n    $.ajax(xhrOptions)\n      .done(() => {\n        if (!useActivity) {\n          dispatch(\n            finishSyntheticActivity({\n              serverEntityID: payload.serverEntityID,\n              activityType: activityTypes.OPTIMIZE_DATABASE,\n            })\n          );\n        }\n      })\n      .fail(() => {\n        serverFlexModel.set({\n          optimizeDatabaseError: t(\n            'There was a problem optimizing the database.'\n          ),\n        });\n        dispatch(\n          finishSyntheticActivity({\n            serverEntityID: payload.serverEntityID,\n            activityType: activityTypes.OPTIMIZE_DATABASE,\n          })\n        );\n\n        if (!payload.hideAlerts) {\n          dispatch(\n            showAlert(t('There was a problem optimizing the database.'))\n          );\n        }\n      });\n\n    trackAction(metricsActions.OPTIMIZE_DATABASE, payload.metricsPage);\n  },\n\n  [CLEAN_BUNDLES](appModel: any, payload: any, dispatch: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n    const url = path.join('/library/clean/bundles', { async: 1 });\n    const xhrOptions = serverModel.getXHROptions(url, { type: 'PUT' });\n\n    dispatch(\n      startSyntheticActivity({\n        serverEntityID: payload.serverEntityID,\n        activityType: activityTypes.CLEAN_BUNDLES,\n      })\n    );\n    serverFlexModel.set({ cleanBundlesError: null });\n\n    $.ajax(xhrOptions).fail(() => {\n      serverFlexModel.set({\n        cleanBundlesError: t('There was a problem removing unused bundles.'),\n      });\n      dispatch(\n        finishSyntheticActivity({\n          serverEntityID: payload.serverEntityID,\n          activityType: activityTypes.CLEAN_BUNDLES,\n        })\n      );\n\n      if (!payload.hideAlerts) {\n        dispatch(showAlert(t('There was a problem removing unused bundles.')));\n      }\n    });\n\n    trackAction(metricsActions.CLEAN_BUNDLES, payload.metricsPage);\n  },\n\n  [EMPTY_TRASH](appModel: any, payload: any, dispatch: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n    const libraries = serverFlexModel.get('libraries');\n\n    const libraryIDsPromise = payload.libraryID\n      ? $.Deferred().resolve([payload.libraryID]).promise()\n      : libraries.populate().then(() => libraries.map(({ id }: any) => id));\n\n    libraryIDsPromise\n      .then((ids: any) => {\n        // There is not an endpoint to empty all trash, so we need to make\n        // individual requests for each library.\n\n        const promises = ids.map((id: any) =>\n          $.ajax(\n            serverModel.getXHROptions(`/library/sections/${id}/emptyTrash`, {\n              type: 'PUT',\n            })\n          )\n        );\n\n        return $.when(...promises);\n      })\n      .then(\n        () => {\n          dispatch(\n            showAlert({\n              type: alertTypes.SUCCESS,\n              message: t('The trash was emptied.'),\n            })\n          );\n        },\n        // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n        (xhr: any) => {\n          dispatch(showAlert(t('There was a problem emptying the trash.')));\n        }\n      );\n\n    trackAction(metricsActions.EMPTY_TRASH, payload.metricsPage);\n  },\n\n  [DELETE_SERVER](appModel: any, payload: any, dispatch: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const cloudServerModel = appModel.get('cloudServer');\n\n    if (!serverModel) {\n      return;\n    }\n\n    // If the user is signed in, remove the server from their account. If the\n    // server is still signed to their account, starting the server again will\n    // re-add the server to their account.\n\n    if (cloudServerModel.get('isResolved')) {\n      const xhrOptions = cloudServerModel.getXHROptions(\n        `/api/servers/${serverModel.id}`,\n        { type: 'DELETE' }\n      );\n\n      $.ajax(xhrOptions);\n    }\n\n    // Remove the associated resource, if it exists, so fetching resources will\n    // re-discover the server if it shows up again.\n\n    const resources = cloudServerModel.get('resources');\n    const resource = resources.get(serverModel.id);\n\n    if (resource) {\n      resource.trigger('destroy', resource, resource.collection);\n    }\n\n    // If the server is owned and connected, first try signing the server out of\n    // their account and then see if the server is still accessible before\n    // removing it from the app.\n\n    if (\n      serverModel.get('isFullOwnedServer') &&\n      serverModel.get('isConnected')\n    ) {\n      const cloudAccount = serverModel.get(__PLATFORM__).get('cloudAccount');\n\n      cloudAccount\n        .destroy()\n        .done(() => {\n          serverModel.set({\n            myPlexSigninState: MY_PLEX_SIGN_IN_STATE_NONE,\n            myPlexSubscription: false,\n          });\n        })\n        .always(() => {\n          // Attempt to connect to the server again after signing the server\n          // out. If it fails, then remove the server completely from the app.\n\n          dispatch(\n            testServer({\n              serverEntityID: payload.serverEntityID,\n            })\n          );\n\n          serverModel.populate().fail(function () {\n            serverModel.trigger('destroy', serverModel, serverModel.collection);\n            dispatch(redirectToRoute({ route: 'home' }));\n          });\n        });\n    } else {\n      serverModel.trigger('destroy', serverModel, serverModel.collection);\n      dispatch(redirectToRoute({ route: 'home' }));\n    }\n\n    trackAction(metricsActions.DELETE_SERVER, payload.metricsPage);\n  },\n\n  [DISCOVER_MEDIA_GRABBER_DEVICE](appModel: any, payload: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const dvrSettingsUIModel = appModel.get('ui').get('dvrSettingsUI');\n    const device = payload.device;\n\n    // If the DVR settings UI is currently open (isUIPopulated is true)\n    // don't show an alert because the user is already there.\n\n    if (dvrSettingsUIModel.get('isUIPopulated')) {\n      return;\n    }\n\n    const mediaGrabberDeviceDiscoveredAlertBarView =\n      new MediaGrabberDeviceDiscoveredAlertBarView({\n        model: new MediaGrabberDeviceModel(device, { parse: true }),\n        serverEntityID: payload.serverEntityID,\n        machineIdentifier: serverModel.get('machineIdentifier'),\n      });\n\n    dispatcher.trigger(\n      'show:bar',\n      'alertbar',\n      mediaGrabberDeviceDiscoveredAlertBarView\n    );\n  },\n\n  [POPULATE_HAS_ITUNES](appModel: any, payload: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n\n    if (!serverFlexModel.get('isHasiTunesPopulated')) {\n      const url = path.join('/music/iTunes');\n      const xhrOptions = serverModel.getXHROptions(url);\n\n      $.ajax(xhrOptions)\n        .done(() => {\n          serverFlexModel.set({\n            hasiTunes: true,\n            isHasiTunesPopulated: true,\n          });\n        })\n        .fail(() => {\n          serverFlexModel.set({\n            hasiTunes: false,\n            isHasiTunesPopulated: true,\n          });\n        });\n    }\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function isAfterReminderDate(iso8601: any) {\n  return (\n    !!iso8601 &&\n    typeof iso8601 == 'string' &&\n    Date.now() >= new Date(iso8601).getTime()\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport log from 'app/js/utils/log/log';\nimport canServerAllowHttpFallback from 'app/js/utils/server/canServerAllowHttpFallback';\n\nfunction addHttpFallbackConnectionToServer(\n  serverModel: any,\n  address: any,\n  port: any,\n  allowHttpFallbackSetting: any\n) {\n  if (canServerAllowHttpFallback(serverModel, allowHttpFallbackSetting)) {\n    const httpConnection = serverModel.addConnection({\n      scheme: 'http',\n      address,\n      port,\n      isFallback: true,\n    });\n\n    log(\n      '[Connections] Added insecure fallback connection for %s at %s',\n      serverModel.get('debugName'),\n      httpConnection.id\n    );\n  } else {\n    log.warn(\n      '[Connections] Prevented fallback to insecure connection for',\n      serverModel.get('debugName')\n    );\n  }\n}\n\nexport default addHttpFallbackConnectionToServer;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport config from 'app/js/models/config';\nimport httpFallbackOptions from 'app/js/utils/constants/httpFallbackOptions';\nimport capabilities from 'app/js/utils/device/capabilities';\n\nexport default function canServerAllowHttpFallback(\n  server: any,\n  allowHttpFallbackSetting: any\n) {\n  // Do not allow plex.tv or nano servers to fallback.\n  if (!server.get('isFullServer')) {\n    return false;\n  }\n\n  // Only allow mixed content if specified by the config option.\n  if (capabilities.isHostedHttps && !config.allowMixedContent) {\n    return false;\n  }\n\n  const hasAllowedAllFallback =\n    allowHttpFallbackSetting === httpFallbackOptions.ALWAYS;\n  const hasAllowedSameNetworkFallback =\n    allowHttpFallbackSetting === httpFallbackOptions.SAME_NETWORK;\n  const allowHttpFallback =\n    hasAllowedAllFallback ||\n    (hasAllowedSameNetworkFallback && server.get('publicAddressMatches'));\n\n  return !!allowHttpFallback;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { saveDeviceSettings } from 'app/js/stores/actions/appActions';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport * as serverUpdateStates from 'app/js/utils/constants/serverUpdateStates';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport {\n  findServerFlexModel,\n  findServerModel,\n} from 'app/js/utils/state/modelFinders';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n//\n// Action Types\nexport const FETCH_SERVER_UPDATE_STATUS =\n  'serverUpdate/fetchServerUpdateStatus';\nexport const CHECK_FOR_SERVER_UPDATE = 'serverUpdate/checkForServerUpdate';\nexport const DISMISS_SERVER_UPDATE = 'serverUpdate/dismissServerUpdate';\nexport const DOWNLOAD_SERVER_UPDATE = 'serverUpdate/downloadServerUpdate';\nexport const INSTALL_SERVER_UPDATE = 'serverUpdate/installServerUpdate';\n//\n// Helpers\nfunction updaterCheckRequest(serverModel: any, options: any) {\n  // isChecking should only be set false when caller knows there most likely\n  // won't be a WebSocket event received, but still needs to initiate the check.\n  const { download, initialState, isChecking = true } = options;\n  const params = { download: download ? '1' : '0' };\n  const url = path.join('/updater/check', params);\n  const xhrOptions = serverModel.getXHROptions(url, { type: 'PUT' });\n  const update = serverModel.get(__PLATFORM__).get('update');\n  const attrs = { isChecking };\n  if (initialState != null) {\n    (attrs as any).state = initialState;\n  }\n  update.set(attrs);\n  // https://github.com/plexinc/specs/blob/master/Server/Auto%20Update.md#updatercheck\n  // The updater check request returns 200 when completed, but the result of the\n  // check will be transmitted via WebSockets when available. So in the success\n  // case here we do not set isChecking false, since the 'check' isn't complete\n  // until the WebSocket event received.\n  // @ts-expect-error ts-migrate(2769) FIXME: No overloads match this call.\n  $.ajax(xhrOptions).then(null, () => {\n    update.set({ isChecking: false, state: serverUpdateStates.ERROR });\n  });\n}\nfunction getUpdaterApplyRequest(serverModel: any, params: any) {\n  const url = path.join(['/updater/apply'], params);\n  const xhrOptions = serverModel.getXHROptions(url, { type: 'PUT' });\n  return $.ajax(xhrOptions);\n}\nfunction install(serverModel: any) {\n  const update = serverModel.get(__PLATFORM__).get('update');\n  // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n  getUpdaterApplyRequest(serverModel).then(\n    () => {\n      update.set('state', serverUpdateStates.INSTALLING);\n      serverModel.set('isInstallingServerUpdate', true);\n    },\n    () => {\n      update.set('state', serverUpdateStates.ERROR);\n      serverModel.set('isInstallingServerUpdate', false);\n    }\n  );\n}\nfunction dismissServerUpdateVersion(\n  appModel: any,\n  dispatch: any,\n  serverModel: any,\n  version: any\n) {\n  const deviceSettingsModel = appModel.get('deviceSettings');\n  const dismissedServerUpdateVersions = deviceSettingsModel.get(\n    'dismissedServerUpdateVersions'\n  );\n  dispatch(\n    saveDeviceSettings({\n      dismissedServerUpdateVersions: {\n        ...dismissedServerUpdateVersions,\n        [serverModel.get('machineIdentifier')]: version,\n      },\n    })\n  );\n}\n//\n// Action Creators\nexport const fetchServerUpdateStatus = createActionCreator(\n  FETCH_SERVER_UPDATE_STATUS\n);\nexport const checkForServerUpdate = createActionCreator(\n  CHECK_FOR_SERVER_UPDATE\n);\nexport const dismissServerUpdate = createActionCreator(DISMISS_SERVER_UPDATE);\nexport const downloadServerUpdate = createActionCreator(DOWNLOAD_SERVER_UPDATE);\nexport const installServerUpdate = createActionCreator(INSTALL_SERVER_UPDATE);\n//\n// Action Handlers\nexport const serverUpdateActionHandlers = {\n  [FETCH_SERVER_UPDATE_STATUS](appModel: any, payload: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n    const update = serverFlexModel.get('update');\n    if (\n      !serverModel.get('isFullOwnedServer') ||\n      !serverModel.get('updater') ||\n      serverModel.get('isOutOfDate') ||\n      update.get('isChecking')\n    ) {\n      return;\n    }\n    update.set({ isChecking: true });\n    update.fetch().then(\n      () => {\n        const state = update.get('state');\n        // We don't want to set isChecking true when we suspect there will be no\n        // socket events from the updater check. Without this isChecking would\n        // remain true and the ServerSettingsUpdateView would be stuck in the\n        // checking state.\n        const isChecking =\n          state === serverUpdateStates.DONE ||\n          state === serverUpdateStates.ERROR ||\n          state === serverUpdateStates.NONE;\n        updaterCheckRequest(serverModel, { isChecking });\n      },\n      () => {\n        update.set({ isChecking: false });\n      }\n    );\n  },\n  [CHECK_FOR_SERVER_UPDATE](appModel: any, payload: any) {\n    const { download, initialState } = payload;\n    const serverModel = findServerModel(appModel, payload);\n    updaterCheckRequest(serverModel, { download, initialState });\n  },\n  [DISMISS_SERVER_UPDATE](appModel: any, payload: any, dispatch: any) {\n    const serverModel = findServerModel(appModel, payload);\n    const serverFlexModel = findServerFlexModel(appModel, payload);\n    const update = serverFlexModel.get('update');\n    // Skip via API is only available if the server supports auto install\n    if (update.get('canInstall')) {\n      getUpdaterApplyRequest(serverModel, { skip: 1 }).then(\n        () => {\n          dispatch(fetchServerUpdateStatus(payload));\n        },\n        () => {\n          // Fallback to local storage when skip request fails.\n          dismissServerUpdateVersion(\n            appModel,\n            dispatch,\n            serverModel,\n            payload.version\n          );\n        }\n      );\n    } else {\n      dismissServerUpdateVersion(\n        appModel,\n        dispatch,\n        serverModel,\n        payload.version\n      );\n    }\n  },\n  [DOWNLOAD_SERVER_UPDATE](appModel: any, payload: any) {\n    const serverModel = findServerModel(appModel, payload);\n    updaterCheckRequest(serverModel, {\n      download: true,\n      initialState: serverUpdateStates.DOWNLOADING,\n    });\n  },\n  [INSTALL_SERVER_UPDATE](appModel: any, payload: any) {\n    const serverModel = findServerModel(appModel, payload);\n    if (serverModel.get('activeConnection').get('isLoopback')) {\n      install(serverModel);\n    } else {\n      const confirmModal = new ConfirmModal({\n        title: t('Remote Installation'),\n        confirmLabel: t('Continue'),\n        cancelLabel: t('Cancel'),\n        message: t(\n          'The installer may display dialogs that require input. Make sure you have desktop access to the computer running Plex Media Server before continuing.'\n        ),\n      });\n      dispatcher.trigger('show:modal', confirmModal);\n      confirmModal.promise.then(() => install(serverModel));\n    }\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport DVRCollection from 'app/js/models/provider/livetv/dvr/DVRCollection';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createActionHandler from 'app/js/stores/actions/createActionHandler';\nimport createFetchHandler from 'app/js/stores/actions/helpers/createFetchHandler';\nimport { findServerModel } from 'app/js/utils/state/modelFinders';\nimport path from 'app/js/utils/url/path';\n\n//\n// Action Types\n\nexport const INIT_DVR_SETTINGS_UI = 'ui/dvrSettings/initDVRSettingsUI';\nexport const CLEAR_DVR_SETTINGS_UI = 'ui/dvrSettings/clearDVRSettingsUI';\nexport const FETCH_DVRS = 'ui/dvrSettings/fetchDVRs';\nexport const RELOAD_GUIDE = 'ui/dvrSettings/reloadGuide';\nexport const CANCEL_RELOAD_GUIDE = 'ui/dvrSettings/cancelReloadGuide';\n\n//\n// Action Creators\n\nexport const initDVRSettingsUI = createActionCreator(INIT_DVR_SETTINGS_UI);\nexport const clearDVRSettingsUI = createActionCreator(CLEAR_DVR_SETTINGS_UI);\nexport const fetchDVRs = createActionCreator(FETCH_DVRS);\nexport const reloadGuide = createActionCreator(RELOAD_GUIDE);\nexport const cancelReloadGuide = createActionCreator(CANCEL_RELOAD_GUIDE);\n\n//\n// Helpers\n\nfunction findDVRSettingsUIModel(appModel: any) {\n  return appModel.get('ui').get('dvrSettingsUI');\n}\n\nfunction sendReloadGuideRequest(appModel: any, payload: any, method: any) {\n  const server = findServerModel(appModel, payload);\n  const url = path.join(['/livetv/dvrs', payload.dvrID, 'reloadGuide']);\n  const xhrOptions = server.getXHROptions(url, { method });\n  $.ajax(xhrOptions);\n}\n\n//\n// Action Handlers\n\nexport const dvrSettingsUIActionHandlers = createActionHandler({\n  [FETCH_DVRS]: createFetchHandler({\n    key: 'dvrs',\n    getModel: findDVRSettingsUIModel,\n  }),\n\n  [INIT_DVR_SETTINGS_UI](appModel: any, payload: any, dispatch: any) {\n    const dvrSettingsUIModel = findDVRSettingsUIModel(appModel);\n    const currentDVRs = dvrSettingsUIModel.get('dvr');\n    const server = findServerModel(appModel, payload);\n    const machineIdentifier = server.get('machineIdentifier');\n    // Only create a new `DVRCollection` if one does not already exist for that\n    // server. Otherwise, we can reset and reuse the existing collection.\n    const attrs = {\n      isUIPopulated: true,\n    };\n    if (\n      !currentDVRs ||\n      currentDVRs.server.get('machineIdentifier') !== machineIdentifier\n    ) {\n      (attrs as any).dvrs = new DVRCollection([], {\n        server,\n      });\n    }\n    dvrSettingsUIModel.set(attrs);\n    if (server.hasOwnerFeature('dvr') || server.hasOwnerFeature('livetv')) {\n      dispatch(fetchDVRs(payload));\n    }\n  },\n\n  [CLEAR_DVR_SETTINGS_UI](appModel: any) {\n    const dvrSettingsUIModel = findDVRSettingsUIModel(appModel);\n    dvrSettingsUIModel.set('isUIPopulated', false);\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'dispatch' is declared but its value is never read... Remove this comment to see the full error message\n  [RELOAD_GUIDE](appModel: any, payload: any, dispatch: any) {\n    sendReloadGuideRequest(appModel, payload, 'POST');\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'dispatch' is declared but its value is never read... Remove this comment to see the full error message\n  [CANCEL_RELOAD_GUIDE](appModel: any, payload: any, dispatch: any) {\n    sendReloadGuideRequest(appModel, payload, 'DELETE');\n  },\n});\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createActionHandler from 'app/js/stores/actions/createActionHandler';\nimport { findServerModel } from 'app/js/utils/state/modelFinders';\nimport path from 'app/js/utils/url/path';\nimport xhrErrorFilter from 'app/js/utils/xhr/xhrErrorFilter';\n\n//\n// Action Types\n\nexport const SAVE_DVR_SETTINGS = 'SAVE_DVR_SETTINGS';\nexport const CLEAR_DVR_SETTINGS_SAVE_ERROR = 'CLEAR_DVR_SETTINGS_SAVE_ERROR';\nexport const SAVE_DEVICE_SETTINGS = 'SAVE_DEVICE_SETTINGS';\nexport const SAVE_DEVICE_TITLE = 'SAVE_DEVICE_TITLE';\nexport const CLEAR_DEVICE_SETTINGS_SAVE_ERROR =\n  'CLEAR_DEVICE_SETTINGS_SAVE_ERROR';\nexport const SET_DVR_DEVICE_ENABLED = 'SET_DVR_DEVICE_ENABLED';\n\n//\n// Action Creators\n\nexport const saveDVRSettings = createActionCreator(SAVE_DVR_SETTINGS);\nexport const clearDVRSettingsSaveError = createActionCreator(\n  CLEAR_DVR_SETTINGS_SAVE_ERROR\n);\nexport const saveDeviceSettings = createActionCreator(SAVE_DEVICE_SETTINGS);\nexport const saveDeviceTitle = createActionCreator(SAVE_DEVICE_TITLE);\nexport const clearDeviceSettingsSaveError = createActionCreator(\n  CLEAR_DEVICE_SETTINGS_SAVE_ERROR\n);\nexport const setDVRDeviceEnabled = createActionCreator(SET_DVR_DEVICE_ENABLED);\n\n//\n// Helpers\n\nfunction findDVRSetupModel(appModel: any) {\n  return appModel.get('ui').get('dvrSettingsUI').get('dvrSetup');\n}\n\nfunction findDVRs(appModel: any) {\n  return appModel.get('ui').get('dvrSettingsUI').get('dvrs');\n}\n\nfunction findDVR(appModel: any, payload: any) {\n  const dvrs = findDVRs(appModel);\n  return dvrs.get(payload.dvrID);\n}\n\nfunction getDevice(appModel: any, payload: any) {\n  const dvrSetupModel = findDVRSetupModel(appModel);\n  const deviceID = payload.deviceID;\n  // Try to find a device using the dvrID and deviceID,\n  // if that fails look for the device in the `dvrSetupModel`\n  // because we may be looking for a device that is being\n  // added to a DVR. If we still haven't found a device\n  // return the selected device.\n  if (payload.dvrID && deviceID) {\n    const dvrDevice = findDVR(appModel, payload).get('devices').get(deviceID);\n    if (dvrDevice) {\n      return dvrDevice;\n    }\n  }\n  if (deviceID) {\n    const device = dvrSetupModel.get('devices').get(deviceID);\n    if (device) {\n      return device;\n    }\n  }\n  return dvrSetupModel.get('selectedDevice');\n}\n\n//\n// Action Handlers\n\nexport const dvrSetupActionHandlers = createActionHandler({\n  [SAVE_DVR_SETTINGS](appModel: any, payload: any) {\n    const server = findServerModel(appModel, payload);\n    const dvr = findDVR(appModel, payload);\n    const prefs = payload.prefs;\n    const url = path.join(['/livetv/dvrs', payload.dvrID, 'prefs'], prefs);\n    dvr.set('isSaving', true);\n    const xhrOptions = server.getXHROptions(url, { type: 'PUT' });\n    const promise = $.ajax(xhrOptions);\n    promise.done(() => {\n      const dvrPrefs = dvr.get('prefs');\n      Object.keys(prefs).forEach((pref) => {\n        dvrPrefs.get(pref).set('value', prefs[pref]);\n      });\n      dvr.set({\n        isSaving: false,\n        saveError: null,\n      });\n    });\n    promise.fail((xhr) => {\n      dvr.set({\n        isSaving: false,\n        saveError: xhrErrorFilter(xhr),\n      });\n    });\n  },\n\n  [CLEAR_DVR_SETTINGS_SAVE_ERROR](appModel: any, payload: any) {\n    const dvr = findDVR(appModel, payload);\n    dvr.set('saveError', null);\n  },\n\n  [SAVE_DEVICE_SETTINGS](appModel: any, payload: any) {\n    const server = findServerModel(appModel, payload);\n    const device = getDevice(appModel, payload);\n    const prefs = payload.prefs;\n    const url = path.join(\n      ['/media/grabbers/devices', payload.deviceID, 'prefs'],\n      prefs\n    );\n    device.set('isSaving', true);\n    const xhrOptions = server.getXHROptions(url, { type: 'PUT' });\n    const promise = $.ajax(xhrOptions);\n    promise.done(() => {\n      const devicePrefs = device.get('prefs');\n      Object.keys(prefs).forEach((pref) => {\n        devicePrefs.get(pref).set('value', prefs[pref]);\n      });\n      device.set({\n        isSaving: false,\n        saveError: null,\n      });\n    });\n    promise.fail((xhr) => {\n      device.set({\n        isSaving: false,\n        saveError: xhrErrorFilter(xhr),\n      });\n    });\n  },\n\n  [SAVE_DEVICE_TITLE](appModel: any, payload: any) {\n    const { title } = payload;\n    const server = findServerModel(appModel, payload);\n    const device = getDevice(appModel, payload);\n    // `enabled` is always required by this endpoint. Because this action is\n    // only dispatched by a user setting the title on a configured device, we\n    // can assume the device is enabled and should remain enabled.\n    const url = path.join(['/media/grabbers/devices', payload.deviceID], {\n      title,\n      enabled: 1,\n    });\n    const xhrOptions = server.getXHROptions(url, { type: 'PUT' });\n    const promise = $.ajax(xhrOptions);\n\n    promise.then(() => {\n      device.set('title', title);\n    });\n  },\n\n  [CLEAR_DEVICE_SETTINGS_SAVE_ERROR](appModel: any, payload: any) {\n    const device = getDevice(appModel, payload);\n    device.set('saveError', null);\n  },\n  [SET_DVR_DEVICE_ENABLED](appModel: any, payload: any) {\n    const server = findServerModel(appModel, payload);\n    const enabled = payload.enabled;\n    const url = path.join(['/media/grabbers/devices', payload.deviceID], {\n      enabled: enabled ? 1 : 0,\n    });\n    const xhrOptions = server.getXHROptions(url, { type: 'PUT' });\n    const promise = $.ajax(xhrOptions).promise();\n    promise.done(() => {\n      const dvrSetupModel = findDVRSetupModel(appModel);\n      if (dvrSetupModel) {\n        const device = getDevice(appModel, payload);\n        if (device) {\n          device.set('status', enabled ? 'enabled' : 'disabled');\n        }\n      }\n    });\n  },\n});\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport isValid from 'date-fns/isValid';\n\nfunction findIndexByTime(lines: any, formattedTime: any, index: any) {\n  if (!formattedTime) {\n    return null;\n  }\n\n  const date = new Date(formattedTime);\n\n  if (!isValid(date)) {\n    return -1;\n  }\n\n  const time = date.getTime();\n\n  let minIndex = 0;\n  let maxIndex = lines.length - 1;\n  let currentIndex;\n\n  while (minIndex <= maxIndex) {\n    currentIndex = Math.floor((minIndex + maxIndex) / 2);\n\n    const lineA = lines[currentIndex];\n    const lineB = lines[currentIndex + 1];\n\n    const lineTimeA = new Date(lineA.time).getTime();\n\n    if (!lineB) {\n      return time > lineTimeA ? currentIndex : currentIndex + 1;\n    }\n\n    if (time === lineTimeA) {\n      return index < currentIndex ? currentIndex : currentIndex + 1;\n    }\n\n    const lineTimeB = new Date(lineB.time).getTime();\n\n    if (time > lineTimeA && time < lineTimeB) {\n      return currentIndex + 1;\n    }\n\n    if (time > lineTimeA) {\n      minIndex = currentIndex + 1;\n    } else if (time < lineTimeA) {\n      maxIndex = currentIndex - 1;\n    }\n  }\n\n  // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'number | undefined' is not assig... Remove this comment to see the full error message\n  return Math.max(0, currentIndex);\n}\n\nexport function findFirstIndexByTime(lines: any, time: any) {\n  return findIndexByTime(lines, time, -Infinity);\n}\n\nexport function findLastIndexByTime(lines: any, time: any) {\n  return findIndexByTime(lines, time, Infinity);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport parse from 'date-fns/parse';\n\n// Example dateString: 'Dec 01, 2018 01:01:01.001'. Chrome works correctly when\n// passing strings of this format directly to the Date constructor. Although, at\n// least Safari does not.\nconst dateFormat = 'MMM dd, yyyy HH:mm:ss.SSS';\n\nexport default function parseServerLogTimestamp(dateString: any) {\n  return parse(dateString, dateFormat, new Date());\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport isAfter from 'date-fns/isAfter';\nimport isBefore from 'date-fns/isBefore';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createActionHandler from 'app/js/stores/actions/createActionHandler';\nimport {\n  findFirstIndexByTime,\n  findLastIndexByTime,\n} from 'app/js/stores/actions/helpers/server/findIndexByTime';\nimport parseServerLogTimestamp from 'app/js/stores/actions/helpers/server/parseServerLogTimestamp';\nimport escapeRegExp from 'app/js/utils/string/escapeRegExp';\n\nexport const CHANGE_TEXT_FILTER = 'ui/serverLogPageActions/changeTextFilter';\nexport const CHANGE_TIME_FILTER = 'ui/serverLogPageActions/changeTimeFilter';\nexport const CLEAR_FILTER = 'ui/serverLogPageActions/clearFilter';\nexport const ADD_LOG_LINE = 'ui/serverLogPageActions/addLogLine';\nexport const RESET_LOG_LEVELS = 'ui/serverLogPageActions/resetLogLevels';\nexport const TOGGLE_LOG_LEVEL = 'ui/serverLogPageActions/toggleLogLevel';\nexport const CLEAR_LOG = 'ui/serverLogPageActions/clearLog';\nexport const LOAD_LOG_FILE = 'ui/serverLogPageActions/loadLogfile';\nexport const TOGGLE_TIME_FILTER = 'ui/serverLogPageActions/toggleTimeFilter';\nexport const TOGGLE_RAW = 'ui/serverLogPageActions/toggleRaw';\nexport const HIGHLIGHT_LINE = 'ui/serverLogPageActions/highlightLine';\n\nexport const changeTextFilter = createActionCreator(CHANGE_TEXT_FILTER);\nexport const changeTimeFilter = createActionCreator(CHANGE_TIME_FILTER);\nexport const clearFilter = createActionCreator(CLEAR_FILTER);\nexport const addLogLine = createActionCreator(ADD_LOG_LINE);\nexport const resetLogLevels = createActionCreator(RESET_LOG_LEVELS);\nexport const toggleLogLevel = createActionCreator(TOGGLE_LOG_LEVEL);\nexport const clearLog = createActionCreator(CLEAR_LOG);\nexport const loadLogFile = createActionCreator(LOAD_LOG_FILE);\nexport const toggleTimeFilter = createActionCreator(TOGGLE_TIME_FILTER);\nexport const toggleRaw = createActionCreator(TOGGLE_RAW);\nexport const highlightLine = createActionCreator(HIGHLIGHT_LINE);\n\nfunction addLogLineHelper(\n  logLine: any,\n  logLines: any,\n  serverLogPageModel: any\n) {\n  if (!logLines.all) {\n    logLines.all = [];\n  }\n  logLine.index = logLines.all.length;\n  const filter = serverLogPageModel.get('filter');\n  const timeFilterStart = serverLogPageModel.get('timeFilterStart');\n  const timeFilterEnd = serverLogPageModel.get('timeFilterEnd');\n  const logLevels = serverLogPageModel.get('logLevels');\n  if (\n    filterLogLine(logLine, {\n      filter,\n      timeFilterStart,\n      timeFilterEnd,\n      logLevels,\n    })\n  ) {\n    if (logLines.filtered) {\n      logLines.filtered.push(logLine);\n    }\n  } else if (!logLines.filtered) {\n    logLines.filtered = logLines.all.slice(0);\n  }\n  logLines.all.push(logLine);\n  return logLines;\n}\n\nfunction getServerLogPage(appModel: any) {\n  return appModel.get('ui').get('serverLogPage');\n}\n\nfunction createFilterRegExps(filter: any) {\n  return filter\n    .split(/\\s+/)\n    .map((str: any) => new RegExp(escapeRegExp(str), 'i'));\n}\n\nfunction filterLogLine(line: any, options: any) {\n  const {\n    filter,\n    timeFilterStart,\n    timeFilterStartIndex,\n    timeFilterEnd,\n    timeFilterEndIndex,\n    logLevels,\n  } = options;\n  const hasLevel = !logLevels.length || logLevels.indexOf(line.level) !== -1;\n  if (!hasLevel) {\n    return false;\n  }\n  if (\n    timeFilterStart ||\n    timeFilterStartIndex != null ||\n    timeFilterEnd ||\n    timeFilterEndIndex != null\n  ) {\n    let logLineDate;\n    let startDate;\n    let endDate;\n    if (timeFilterStartIndex == null || timeFilterEndIndex == null) {\n      logLineDate = parseServerLogTimestamp(line.time);\n      if (timeFilterStartIndex == null) {\n        startDate = timeFilterStart && parseServerLogTimestamp(timeFilterStart);\n      }\n      if (timeFilterEndIndex == null) {\n        endDate = timeFilterEnd && parseServerLogTimestamp(timeFilterEnd);\n      }\n    }\n    if (\n      (timeFilterStartIndex != null && timeFilterStartIndex > line.index) ||\n      (timeFilterEndIndex != null && timeFilterEndIndex < line.index) ||\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'Date | undefined' is not assigna... Remove this comment to see the full error message\n      (startDate && isAfter(startDate, logLineDate)) ||\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'Date | undefined' is not assigna... Remove this comment to see the full error message\n      (endDate && isBefore(endDate, logLineDate))\n    ) {\n      return false;\n    }\n  }\n  if (!filter) {\n    return true;\n  }\n  const regexps = options.regexps || createFilterRegExps(filter);\n  return regexps.every(\n    (regexp: any) => regexp.test(line.message) || regexp.test(line.thread)\n  );\n}\n\nfunction filterLogLines(lines: any, options: any) {\n  const regexps = createFilterRegExps(options.filter);\n  return lines.filter((line: any) =>\n    filterLogLine(line, { ...options, regexps })\n  );\n}\n\nfunction updateLogLines(serverLogPageModel: any) {\n  const filter = serverLogPageModel.get('filter');\n  const timeFilterStart = serverLogPageModel.get('timeFilterStart');\n  const timeFilterEnd = serverLogPageModel.get('timeFilterEnd');\n  const logLevels = serverLogPageModel.get('logLevels');\n  const unfilteredLogLines = serverLogPageModel._unfilteredLogLines;\n  const timeFilterStartIndex = findFirstIndexByTime(\n    unfilteredLogLines,\n    timeFilterStart\n  );\n  const timeFilterEndIndex = findLastIndexByTime(\n    unfilteredLogLines,\n    timeFilterEnd\n  );\n  const logLines = filterLogLines(unfilteredLogLines, {\n    logLevels,\n    filter,\n    timeFilterStart,\n    timeFilterStartIndex:\n      timeFilterStartIndex === -1 ? null : timeFilterStartIndex,\n    timeFilterEndIndex: timeFilterEndIndex === -1 ? null : timeFilterEndIndex,\n    timeFilterEnd,\n  });\n  serverLogPageModel.set({\n    logLines,\n    unfilteredLogLinesCount: unfilteredLogLines.length,\n    isTimeFilterStartValid: timeFilterStartIndex !== -1,\n    isTimeFilterEndValid: timeFilterEndIndex !== -1,\n  });\n}\n\nconst TEXT_LOG_LINE_TO_LOG_LINE_REGEX =\n  /^([^[]+)\\[([^\\]]+)]\\s+([^\\s]+)\\s+-\\s+(.*)/;\nconst LOG_LEVEL_NAMES_TO_LEVELS = {\n  ERROR: 0,\n  WARN: 1,\n  INFO: 2,\n  DEBUG: 3,\n  VERBOSE: 4,\n};\n\nfunction textLogLineToLogLine(textLogLine: any) {\n  if (!textLogLine) {\n    return null;\n  }\n  const match = textLogLine.match(TEXT_LOG_LINE_TO_LOG_LINE_REGEX);\n  const [, time, thread, level, message] = match;\n  return {\n    time: time.trim(),\n    thread: thread.trim(),\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    level: LOG_LEVEL_NAMES_TO_LEVELS[level],\n    message: message.trim(),\n  };\n}\n\nconst serverLogPageActions = createActionHandler({\n  [ADD_LOG_LINE](appModel: any, payload: any) {\n    const { message: logLine } = payload;\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 2.\n    const serverLogPageModel = getServerLogPage(appModel, payload);\n    if (!serverLogPageModel._unfilteredLogLines) {\n      serverLogPageModel._unfilteredLogLines = [];\n    }\n    const isFiltered =\n      serverLogPageModel.get('logLines').length !==\n      serverLogPageModel._unfilteredLogLines.length;\n    // Get a reference to the filtered list, but don't clone it yet;\n    // it may not change.\n    const filtered = isFiltered ? serverLogPageModel.get('logLines') : null;\n    const originalFilteredLength = isFiltered ? filtered.length : null;\n    const logLines = addLogLineHelper(\n      logLine,\n      { all: serverLogPageModel._unfilteredLogLines.slice(0), filtered },\n      serverLogPageModel\n    );\n    // If the list of filtered lines changed, then clone it so the new lines are\n    // rendered.\n    if (\n      logLines.filtered &&\n      logLines.filtered.length !== originalFilteredLength\n    ) {\n      logLines.filtered = logLines.filtered.slice(0);\n    }\n    serverLogPageModel._unfilteredLogLines = logLines.all;\n    serverLogPageModel.set({\n      unfilteredLogLinesCount: logLines.all.length,\n      logLines: logLines.filtered || logLines.all,\n    });\n  },\n\n  [CHANGE_TEXT_FILTER](appModel: any, payload: any) {\n    const serverLogPageModel = getServerLogPage(appModel);\n    const { filter } = payload;\n    serverLogPageModel.set({ filter });\n    updateLogLines(serverLogPageModel);\n  },\n\n  [CHANGE_TIME_FILTER](appModel: any, payload: any) {\n    const serverLogPageModel = getServerLogPage(appModel);\n    const { timeFilterStart, timeFilterEnd } = payload;\n    serverLogPageModel.set({\n      showTimeFilter: !!(timeFilterStart || timeFilterEnd),\n      timeFilterStart,\n      timeFilterEnd,\n    });\n    updateLogLines(serverLogPageModel);\n  },\n\n  [CLEAR_FILTER](appModel: any) {\n    const serverLogPageModel = getServerLogPage(appModel);\n    serverLogPageModel.set({\n      filter: '',\n      timeFilterStart: '',\n      timeFilterEnd: '',\n      logLevels: [],\n    });\n    updateLogLines(serverLogPageModel);\n  },\n\n  [RESET_LOG_LEVELS](appModel: any) {\n    const serverLogPageModel = getServerLogPage(appModel);\n    serverLogPageModel.set({ logLevels: [] });\n    updateLogLines(serverLogPageModel);\n  },\n\n  [TOGGLE_LOG_LEVEL](appModel: any, payload: any) {\n    const serverLogPageModel = getServerLogPage(appModel);\n    const logLevels = serverLogPageModel.get('logLevels');\n    const nextLogLevels = logLevels.slice(0);\n    const index = logLevels.indexOf(payload.logLevel);\n    if (index === -1) {\n      nextLogLevels.push(payload.logLevel);\n    } else {\n      nextLogLevels.splice(index, 1);\n    }\n    serverLogPageModel.set({ logLevels: nextLogLevels });\n    updateLogLines(serverLogPageModel);\n  },\n\n  [CLEAR_LOG](appModel: any) {\n    const serverLogPageModel = getServerLogPage(appModel);\n    serverLogPageModel.set({\n      logLines: [],\n      unfilteredLogLinesCount: 0,\n      highlightedLineIndex: null,\n      showRawText: false,\n    });\n    serverLogPageModel._unfilteredLogLines = [];\n  },\n\n  [LOAD_LOG_FILE](appModel: any, payload: any) {\n    const { result } = payload;\n    const serverLogPageModel = getServerLogPage(appModel);\n    let logLines = { all: [] };\n    serverLogPageModel.set({\n      logLines: [],\n      unfilteredLogLinesCount: 0,\n    });\n    try {\n      result\n        .split(/\\n+/)\n        .map(textLogLineToLogLine)\n        .forEach((logLine: any) => {\n          if (logLine) {\n            logLines = addLogLineHelper(logLine, logLines, serverLogPageModel);\n          }\n        });\n      serverLogPageModel._unfilteredLogLines = logLines.all;\n      serverLogPageModel.set({\n        unfilteredLogLinesCount: logLines.all.length,\n        logLines: (logLines as any).filtered || logLines.all,\n      });\n    } catch (error) {\n      // No-op\n    }\n  },\n\n  [TOGGLE_TIME_FILTER](appModel: any) {\n    const serverLogPageModel = getServerLogPage(appModel);\n    const showTimeFilter = serverLogPageModel.get('showTimeFilter');\n    serverLogPageModel.set({\n      timeFilterStart: '',\n      timeFilterEnd: '',\n      showTimeFilter: !showTimeFilter,\n    });\n    updateLogLines(serverLogPageModel);\n  },\n\n  [TOGGLE_RAW](appModel: any) {\n    const serverLogPageModel = getServerLogPage(appModel);\n    serverLogPageModel.set(\n      'showRawText',\n      !serverLogPageModel.get('showRawText')\n    );\n  },\n\n  [HIGHLIGHT_LINE](appModel: any, logLine: any) {\n    const serverLogPageModel = getServerLogPage(appModel);\n    serverLogPageModel.set('highlightedLineIndex', logLine.index);\n  },\n});\n\nexport default serverLogPageActions;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport * as alertTypes from 'app/js/utils/constants/alertTypes';\nimport dispatcher from 'app/js/utils/dispatcher';\n\n//\n// Action Types\n\nexport const REPOPULATE_PAGE = 'ui/repopulatePage';\nexport const SHOW_ALERT = 'ui/showAlert';\n\n//\n// Action Creators\n\nexport const repopulatePage = createActionCreator(REPOPULATE_PAGE);\n\nexport const showAlert = createActionCreator(SHOW_ALERT, (alert: any) => {\n  // Support the common case as well as a full alert object.\n  //\n  // showAlert('message');\n  // showAlert({ type: alertTypes.SUCCESS, message: 'message' });\n\n  return typeof alert === 'string'\n    ? { type: alertTypes.ERROR, message: alert }\n    : alert;\n});\n\n//\n// Action Handlers\n\nexport const uiActionHandlers = {\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [SHOW_ALERT](appModel: any, payload: any) {\n    dispatcher.trigger('show:alert', payload);\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\n\nfunction fetchPIN(appModel: any, pinID: any) {\n  const cloudServer = appModel.get('cloudServer');\n\n  return (\n    $.ajax(\n      cloudServer.getXHROptions(`/api/v2/pins/${pinID}`, {\n        dataType: 'json',\n      })\n    )\n      .promise()\n      // Strip XHR from promise resolution so consumers only receive JSON.\n      .then((response) => response)\n  );\n}\n\nexport default fetchPIN;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createBeginPollingHandler from 'app/js/stores/actions/helpers/server/createBeginPollingHandler';\nimport getAuthCodeExchangeModel from 'app/js/stores/actions/helpers/server/getAuthCodeExchangeModel';\nimport createPINHelper from 'app/js/stores/actions/helpers/user/createPIN';\nimport fetchPINHelper from 'app/js/stores/actions/helpers/user/fetchPIN';\nimport { scheduleImmediateUpdate } from 'app/js/utils/state/stateUpdateScheduler';\nimport t from 'app/js/utils/t';\n\n//\n// Action Types\n\nexport const READ_STORED_PIN = 'user/authCodeExchange/readStoredPIN';\nexport const PRELOAD_PIN = 'user/authCodeExchange/preloadPIN';\nexport const RESET_AUTH_CODE_EXCHANGE =\n  'user/authCodeExchange/resetAuthCodeExchange';\nexport const BEGIN_POLLING = 'user/authCodeExchange/beginPolling';\nexport const STOP_POLLING = 'user/authCodeExchange/stopPolling';\nexport const SKIP_SIGN_IN = 'user/authCodeExchange/skipSignIn';\n\n//\n// Action Creators\n\nexport const readStoredPIN = createActionCreator(READ_STORED_PIN);\nexport const preloadPIN = createActionCreator(PRELOAD_PIN);\nexport const resetAuthCodeExchange = createActionCreator(\n  RESET_AUTH_CODE_EXCHANGE\n);\nexport const beginPolling = createActionCreator(BEGIN_POLLING);\nexport const stopPolling = createActionCreator(STOP_POLLING);\nexport const skipSignIn = createActionCreator(SKIP_SIGN_IN);\n\n//\n// Helpers\n\nfunction createAndSetPIN(appModel: any, dispatch: any) {\n  const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n  authCodeExchangeModel.set({ isBusy: true });\n\n  return createPINHelper(appModel)\n    .then(({ id: pinID, code, expiresIn }) => {\n      const pinTimeout = window.setTimeout(() => {\n        dispatch(stopPolling());\n      }, expiresIn * 1000);\n\n      authCodeExchangeModel.set({\n        code,\n        pinID,\n        pinTimeout,\n        isBusy: false,\n      });\n    })\n    .fail(() => {\n      authCodeExchangeModel.set({\n        fatalErrorMessage: t('An error occurred'),\n        isBusy: false,\n      });\n    });\n}\n\n//\n// Action Handlers\n\nexport const authCodeExchangeActionHandlers = {\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [RESET_AUTH_CODE_EXCHANGE](appModel: any, payload: any, dispatch: any) {\n    const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n\n    scheduleImmediateUpdate(() => {\n      authCodeExchangeModel.set({\n        code: null,\n        pinID: null,\n        authToken: null,\n        errorMessage: null,\n      });\n    });\n  },\n\n  [READ_STORED_PIN](appModel: any, payload: any, dispatch: any) {\n    const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n    const pinID = authCodeExchangeModel.get('pinIDInitial');\n\n    const pinIDPromise = pinID\n      ? $.Deferred().resolve(pinID).promise()\n      : $.Deferred().reject().promise();\n\n    const authTokenPromise = pinIDPromise\n      .then(() =>\n        fetchPINHelper(appModel, pinID).fail(() => {\n          authCodeExchangeModel.set({\n            errorMessage: t('There was an error signing in'),\n          });\n        })\n      )\n      .then(({ authToken }) => {\n        if (authToken) {\n          return $.Deferred().resolve(authToken).promise();\n        } else {\n          authCodeExchangeModel.set({\n            errorMessage: t('There was an error signing in'),\n          });\n          return $.Deferred().reject().promise();\n        }\n      })\n      .then((authToken) => {\n        authCodeExchangeModel.set({ authToken });\n      });\n\n    if (payload.shouldCreatePIN) {\n      authTokenPromise.fail(() => createAndSetPIN(appModel, dispatch));\n    }\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [PRELOAD_PIN](appModel: any, payload: any, dispatch: any) {\n    const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n\n    authCodeExchangeModel.set({\n      isBusy: true,\n      code: null,\n      pinID: null,\n    });\n\n    createAndSetPIN(appModel, dispatch);\n  },\n\n  [BEGIN_POLLING]: createBeginPollingHandler(),\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [STOP_POLLING](appModel: any, payload: any, dispatch: any) {\n    const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n\n    const pinTimeout = authCodeExchangeModel.get('pinTimeout');\n    if (pinTimeout) {\n      window.clearTimeout(pinTimeout);\n    }\n\n    authCodeExchangeModel.set({\n      pinID: null,\n      pinTimeout: null,\n      code: null,\n    });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [SKIP_SIGN_IN](appModel: any, payload: any, dispatch: any) {\n    appModel.set({ skipSignIn: true });\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport getAuthCodeExchangeModel from 'app/js/stores/actions/helpers/server/getAuthCodeExchangeModel';\nimport fetchPIN from 'app/js/stores/actions/helpers/user/fetchPIN';\nimport t from 'app/js/utils/t';\n\nfunction createBeginPollingHandler() {\n  // @ts-expect-error ts-migrate(6133) FIXME: 'dispatch' is declared but its value is never read... Remove this comment to see the full error message\n  return function (appModel: any, payload: any, dispatch: any) {\n    const { pinID } = payload;\n    const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n    function _poll() {\n      // Stop polling if pinID changes from the one originally dispatched, such\n      // as if the user navigates away from, then back to Claim Server.\n      const expectedPIN = authCodeExchangeModel.get('pinID');\n      if (pinID !== expectedPIN) {\n        return;\n      }\n      fetchPIN(appModel, pinID)\n        .then(({ authToken }) => {\n          if (authToken) {\n            authCodeExchangeModel.set({\n              authToken,\n            });\n          } else {\n            schedulePoll();\n          }\n        })\n        .fail((xhr) => {\n          // When a PIN expires, we expect to see a 404 for its id\n          authCodeExchangeModel.set({\n            code: null,\n            pinID: null,\n            isBusy: false,\n            fatalErrorMessage:\n              xhr && (xhr as any).status === 404\n                ? null\n                : t('An error occurred'),\n          });\n        });\n    }\n    function schedulePoll() {\n      window.setTimeout(_poll, 2000);\n    }\n    schedulePoll();\n  };\n}\nexport default createBeginPollingHandler;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport qs from 'qs';\nimport _ from 'underscore';\nimport minDuration from 'app/js/utils/promise/minDuration';\n\nfunction updateWebhooks(webhooks: any, urls: any) {\n  const cloudServer = webhooks.server;\n  const xhrOptions = cloudServer.getXHROptions(_.result(webhooks, 'url'), {\n    method: 'POST',\n    dataType: 'json',\n    data: qs.stringify({ urls }, { arrayFormat: 'brackets' }) || 'urls=',\n  });\n\n  return minDuration($.ajax(xhrOptions), 400).then(\n    (json) => {\n      webhooks.reset(json);\n    },\n    (xhr) => {\n      return $.Deferred()\n        .reject((xhr.status && xhr.responseJSON.errors) || [])\n        .promise();\n    }\n  );\n}\n\nexport default updateWebhooks;\n","import addDays from 'date-fns/addDays';\n\nexport const MAX_INTERVAL = 180;\n\nexport const INTERVALS = [7, 30, 60, 90];\n\nexport default function getIncrementalReminder(timesReminded = 0): Date {\n  return addDays(Date.now(), INTERVALS[timesReminded] || MAX_INTERVAL);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function getMetricsServerTypeForSource(source: any) {\n  if (source.isCloud) {\n    return 'online';\n  }\n\n  if (source.isFullOwnedServer) {\n    return 'owned';\n  }\n\n  return 'shared';\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function getMetricsServerStatus(server: any) {\n  return server.isConnected ? 'online' : 'offline';\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function getMetricsServerType(server: any) {\n  if (server.isCloud) {\n    return 'online';\n  }\n\n  if (server.isShared) {\n    return 'shared';\n  }\n\n  return 'owned';\n}\n","import AlertBarView from 'app/js/views/alerts/AlertBarView';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/user/UserSelectModalAlertBarView.tpl';\n\nconst UserSelectModalAlertBarView = AlertBarView.extend({\n  //\n  // Properties\n\n  className: 'user-select-alert-bar',\n  template: tpl,\n});\n\nexport default UserSelectModalAlertBarView;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport t from 'app/js/utils/t';\nimport createTypes from 'app/js/utils/types/createTypes';\n\nexport const LITTLE_KID = 'little_kid';\nexport const OLDER_KID = 'older_kid';\nexport const TEEN = 'teen';\nexport const UNRESTRICTED = 'unrestricted';\n\nconst restrictionProfileTypes = createTypes(\n  ['identifier'],\n  [\n    {\n      identifier: LITTLE_KID,\n      title: () => t('Younger Kid'),\n      defaultUsername: () => t('Kids'),\n    },\n    {\n      identifier: OLDER_KID,\n      title: () => t('Older Kid'),\n      defaultUsername: () => t('Kids'),\n    },\n    {\n      identifier: TEEN,\n      title: () => t('Teen'),\n      defaultUsername: () => t('Kids'),\n    },\n    {\n      identifier: UNRESTRICTED,\n      title: () => t('None'),\n      defaultUsername: () => '',\n    },\n  ]\n);\n\nexport const getType = restrictionProfileTypes.get;\nexport const getAllTypes = restrictionProfileTypes.getAll;\n","import * as adapters from 'app/js/adapters/adapters';\n\nexport function userHasFeature(feature: string): boolean {\n  const mappedFeatures: string[] = adapters\n    .resolve('appModel')\n    .state.user.features?.map((item: { uuid: string }) => item.uuid);\n  return mappedFeatures?.includes(feature);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport getPixelRatio from 'app/js/utils/constants/getPixelRatio';\nimport path from 'app/js/utils/url/path';\nimport MediaPosterImage from 'app/js/views/images/MediaPosterImage';\n\nconst GravatarImage = MediaPosterImage.extend({\n  getUrl(url: any) {\n    if (url) {\n      const pixelRatio = getPixelRatio();\n      return path.join(url, {\n        size: Math.round(this.width * pixelRatio),\n      });\n    }\n    return url;\n  },\n});\n\nexport default GravatarImage;\n","import * as adapters from 'app/js/adapters/adapters';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport * as restrictionProfileTypes from 'app/js/utils/constants/restrictionProfileTypes';\nimport * as features from 'app/js/utils/constants/user/features';\nimport t from 'app/js/utils/t';\nimport { userHasFeature } from 'app/js/v4/utils/features';\nimport GravatarImage from 'app/js/views/images/GravatarImage';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/user/UserSelectModalUserListItem.tpl';\n\nconst UserSelectModalUserListItem = Marionette.ItemView.extend({\n  //\n  // Properties\n  tagName: 'li',\n  className: 'user-select-list-item',\n  template: tpl,\n  ui: {\n    container: '.user-select-container',\n    poster: '.user-poster',\n  },\n  events: {\n    'click a': 'onClick',\n  },\n  //\n  // Init\n  initialize: function (options: any) {\n    this.disabled = options.disabled;\n    this.posterImage = new GravatarImage({\n      model: this.model,\n      type: 'friend',\n      width: 80,\n    });\n    const appModel = adapters.resolve('appModel');\n    const primaryServer = appModel.get('primaryServer');\n    if (primaryServer?.supports('imageFilters')) {\n      this.backgroundImage = new GravatarImage({\n        model: this.model,\n        type: 'friend',\n        width: 120,\n        background: true,\n        filters: {\n          blur: 20,\n          opacity: 50,\n          background: '000000',\n        },\n      });\n      // Do not show a placeholder image for the background.\n      this.backgroundImage.placeholderClass = false;\n    }\n  },\n  //\n  // Control\n  serializeData: function () {\n    return {\n      disabled: this.disabled,\n    };\n  },\n  //\n  // Bindings\n  bindings: {\n    '.username': {\n      modelAttribute: 'title',\n    },\n    '.managed-title': {\n      modelAttribute: 'restrictionProfile',\n      autohide: true,\n      formatter(restrictionProfile: any) {\n        const hasHomeLibraryAccessLabels = userHasFeature(\n          features.HOME_LIBRARY_ACCESS_LABELS\n        );\n        const hasCommunityFeatures = userHasFeature(\n          features.ALLOW_COMMUNITY_FEATURES\n        );\n\n        // We only want to show this label with the legacy styles when we don't have the feature flag on.\n        if (hasCommunityFeatures) {\n          return;\n        }\n\n        const managedLabel = hasHomeLibraryAccessLabels\n          ? t('Managed Account')\n          : t('Managed User');\n\n        const username = (this as any).model.get('username');\n        const title = (this as any).model.get('title');\n\n        if (username && title !== username) {\n          return username;\n        }\n\n        if (\n          (this as any).model.get('restricted') &&\n          !(this as any).model.get('guest')\n        ) {\n          return restrictionProfile\n            ? restrictionProfileTypes.getType(restrictionProfile).title\n            : managedLabel;\n        }\n      },\n    },\n    '.managed-title-community': {\n      modelAttribute: 'restrictionProfile',\n      autohide: true,\n      formatter(restrictionProfile: any) {\n        const hasCommunityFeatures = userHasFeature(\n          features.ALLOW_COMMUNITY_FEATURES\n        );\n\n        // We only want to show this label with new styles when have the feature flag on.\n        if (!hasCommunityFeatures) {\n          return;\n        }\n\n        const username = (this as any).model.get('username');\n        const title = (this as any).model.get('title');\n\n        if (username && title !== username) {\n          return username;\n        }\n\n        if (\n          (this as any).model.get('restricted') &&\n          !(this as any).model.get('guest')\n        ) {\n          return restrictionProfile\n            ? restrictionProfileTypes.getType(restrictionProfile).title\n            : t('Managed Account');\n        }\n      },\n    },\n    '.protected-icon': {\n      modelAttribute: 'protected',\n      autohide: true,\n      manual: true,\n    },\n    '.admin-icon': {\n      modelAttribute: 'admin',\n      autohide: true,\n      manual: true,\n    },\n  },\n  //\n  // Listeners\n  onRender: function () {\n    this.posterImage.setElement(this.ui.poster);\n    if (this.backgroundImage) {\n      this.backgroundImage.setElement(this.ui.container);\n    }\n  },\n  onClose: function () {\n    // Manually close the images because we aren't actually showing them so\n    // they won't be cleaned up automatically.\n    this.posterImage.close();\n    if (this.backgroundImage) {\n      this.backgroundImage.close();\n    }\n  },\n  onClick: function (event: any) {\n    event.preventDefault();\n    this.trigger('selectUser', this.model);\n  },\n});\nexport default UserSelectModalUserListItem;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport * as adapters from 'app/js/adapters/adapters';\nimport commands from 'app/js/commands/commands';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport browser from 'app/js/utils/device/browser';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\nimport UserSelectModalUserListItem from 'app/js/views/modals/user/UserSelectModalUserListItem';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/user/UserSelectModalPINPane.tpl';\n\nconst UserSelectModalPINPane = Marionette.Layout.extend({\n  //\n  // Properties\n  className: 'user-select-modal-pin-container',\n  template: tpl,\n  ui: {\n    digitContainer: '.pin-digit-container',\n    input: '.pin-input',\n    digits: '.pin-digit',\n    loading: '.loading',\n    removeBtn: '.remove-btn',\n    saveBtn: '.save-btn',\n    pinForgotLink: '.pin-forgot-link',\n  },\n  regions: {\n    userList: '.user-select-list',\n  },\n  events: {\n    'keydown input': 'onKeyDown',\n    'input input': 'onInput',\n    'keyup input': 'onKeyUp',\n    'focus input': 'onFocus',\n    'blur input': 'onBlur',\n    'change input': 'onChange',\n    // TODO: Abstract vendor prefixed events behind our view layer.\n    'animationend .pin-input-container': 'onInputsAnimationEnd',\n    'webkitAnimationEnd .pin-input-container': 'onInputsAnimationEnd',\n    'oAnimationEnd .pin-input-container': 'onInputsAnimationEnd',\n    'click .back-btn': 'onBackClick',\n    'click .remove-btn': 'onRemoveClick',\n    'submit #pin-form': 'onSubmit',\n    'click .pin-digit': 'onPINClick',\n    'keydown .save-btn': 'onSaveKeyDown',\n  },\n  onlyAfterRender: ['confirmUser'],\n  //\n  // Init\n  initialize: function (options: any) {\n    const appModel = adapters.resolve('appModel');\n    this.isForced = options.isForced;\n    this.isEditing = options.isEditing;\n    this.isEditWarning = options.isEditWarning;\n    this.showBackButton = options.showBackButton;\n    this.openAddManagedUser = options.openAddManagedUser;\n    this.focusDelay = options.focusDelay;\n    this.user = appModel.get('user');\n    // If the user already has a PIN and is not a managed user, we should\n    // confirm their current PIN before allowing them to edit it.\n    this.isEditConfirmation =\n      this.isEditing &&\n      this.model.get('protected') &&\n      !this.model.get('restricted');\n  },\n  //\n  // Control\n  serializeData: function () {\n    const isEditing = this.isEditing && !this.isEditConfirmation;\n    return {\n      isEditing: isEditing,\n      isEditWarning: this.isEditWarning,\n      isEditConfirmation: this.isEditConfirmation,\n      isOpeningAddManagedUser: this.openAddManagedUser,\n      hasCurrentPIN: this.model.get('protected'),\n      showBackButton: this.showBackButton,\n    };\n  },\n  focusInput: function () {\n    // Clearing on focus means we don't have a hidden cursor\n    // when the user types 4 digits then re-focuses the input\n    this.ui.input.val('');\n    this.ui.input.focus();\n  },\n  getPIN: function () {\n    return this.ui.input.val();\n  },\n  editPIN: function (pin: any) {\n    if (this.ui.saveBtn.isDisabled()) {\n      return;\n    }\n    this.ui.saveBtn.addClass('disabled');\n    const promise = this.savePIN(pin);\n    promise.fail(\n      this.whenRendered(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.ui.saveBtn.removeClass('disabled');\n        dispatcher.trigger('show:alert', {\n          type: 'error',\n          message: t('This PIN could not be saved.'),\n        });\n      })\n    );\n  },\n  removePIN: function () {\n    if (this.ui.removeBtn.isDisabled()) {\n      return;\n    }\n    this.ui.removeBtn.addClass('disabled');\n    const promise = this.savePIN('');\n    promise.fail(\n      this.whenRendered(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.ui.removeBtn.removeClass('disabled');\n        dispatcher.trigger('show:alert', {\n          type: 'error',\n          message: t('This PIN could not be removed.'),\n        });\n      })\n    );\n  },\n  savePIN: function (pin: any) {\n    this.ui.loading.removeClass('hidden');\n    const isManagedUser = this.model.get('restricted');\n    const defaultSaveParams = this.model.getSaveParams();\n    const params = {};\n    // Include the user's current pin if it exists.\n    if (this.currentPin) {\n      (params as any).currentPin = this.currentPin;\n    }\n    // When removing the PIN for a managed user the v2 API requires we send a\n    // `removePin` parameter rather than simply setting an empty PIN.\n    if (pin === '' && isManagedUser) {\n      (params as any).removePin = 1;\n    } else {\n      (params as any).pin = pin;\n    }\n    const finalParams = $.extend(true, {}, defaultSaveParams, params);\n    const url = path.join(this.model.pinUrl(), finalParams);\n    const xhrOptions = this.model.server.getXHROptions(url, {\n      type: isManagedUser ? 'POST' : 'PUT',\n    });\n    const promise = $.ajax(xhrOptions);\n    promise.done(\n      _.bind(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.model.set('protected', !!pin);\n        // If the signed in user is updating their own PIN, we should also\n        // update to the user model to match what we'd expect from plex.tv.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        if (this.model.id === this.user.id) {\n          if (pin) {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this.user.set('pin', this.user.hashPIN(pin));\n          } else {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this.user.unset('pin');\n          }\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.user.set('home', this.user.hasHome());\n        }\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.trigger('resolve', pin);\n      }, this)\n    );\n    promise.always(\n      this.whenRendered(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.ui.loading.addClass('hidden');\n      })\n    );\n    return promise;\n  },\n  confirmUser: function (pin: any) {\n    this.ui.loading.removeClass('hidden');\n    const promise = commands.execute('switchUser', {\n      homeUser: this.model,\n      pin: pin,\n      allowGuestLock: !this.isEditing,\n      openAddManagedUser: this.openAddManagedUser,\n    });\n    promise.done(\n      _.bind(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        if (this.isEditing) {\n          // Now that the user has confirmed their current pin, render the\n          // edit form.\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.isEditConfirmation = false;\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.currentPin = pin;\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.render();\n        } else {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.trigger('resolve', pin);\n        }\n      }, this)\n    );\n    promise.fail(\n      this.whenRendered(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.ui.digitContainer.addClass('shake');\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.ui.input.val('');\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.focusInput();\n      })\n    );\n    promise.always(\n      this.whenRendered(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.ui.loading.addClass('hidden');\n      })\n    );\n  },\n  renderPIN: function () {\n    const pin = this.getPIN();\n    const length = pin.length;\n    const showPin = this.isEditing && !this.isEditConfirmation;\n    this.ui.digits.each(function (i: any, el: any) {\n      let character = pin[i] || '';\n      if (character && !showPin) {\n        character = '&bull;';\n      }\n      $(el)\n        .toggleClass('current', i === length)\n        .html(character);\n    });\n  },\n  //\n  // Listeners\n  onRender: function () {\n    this.userList.show(\n      new UserSelectModalUserListItem({\n        model: this.model,\n        disabled: true,\n      })\n    );\n    // Don't show the forgot PIN link to managed users.\n    this.ui.pinForgotLink.toggleClass('hidden', this.model.get('restricted'));\n    // Mobile browsers won't always open the keyboard when an input is focused by JS\n    // Safari won't ever if focus was triggered by JS\n    // Chrome on Android won't if the user hasn't interacted with the page\n    // (ie. first load with a single user that requires a PIN)\n    if (!browser.mobile) {\n      window.setTimeout(_.bind(this.focusInput, this), this.focusDelay);\n    }\n  },\n  onKeyDown: function (event: any) {\n    const keyCode = event.which;\n    // Allow the enter key to behave normally.\n    if (keyCode === 13) {\n      return;\n    }\n    // Allow the backspace and delete keys to continue to `onInput`\n    if (keyCode === 8 || keyCode === 46) {\n      return;\n    }\n    // The Samsung Android keyboard (and possibly others) send 229 for almost all key presses,\n    // backspace sends the proper key code so users can still delete input.\n    // Allow 229 key codes to be validated in the `onInput` handler.\n    if (keyCode === 229) {\n      return;\n    }\n    const isNumeric = keyCode >= 48 && keyCode <= 57;\n    const isNumericKeypad = keyCode >= 96 && keyCode <= 105;\n    // If the key code is numeric or from the numeric keypad\n    // allow it to be validated in the `onInput` handler.\n    if (isNumeric || isNumericKeypad) {\n      return;\n    }\n    // Prevent other characters from triggering the `onInput` handler\n    event.preventDefault();\n  },\n  onInput: function (event: any) {\n    const $target = $(event.currentTarget);\n    const value = $target.val();\n    const length = (value as any).length;\n    const lastCharacter = (value as any).charAt((value as any).length - 1);\n    if (!/[0-9]/.test(lastCharacter)) {\n      $target.val((value as any).slice(0, length - 1));\n      return;\n    }\n    if ((value as any).length === 4) {\n      if (!this.isEditing || this.isEditConfirmation) {\n        $target.blur();\n        this.confirmUser(this.getPIN());\n      } else {\n        this.ui.saveBtn.focus();\n      }\n    }\n  },\n  onKeyUp: function () {\n    this.renderPIN();\n  },\n  onFocus: function () {\n    this.renderPIN();\n  },\n  onBlur: function () {\n    this.renderPIN();\n    this.ui.digits.removeClass('current');\n  },\n  onChange: function () {\n    this.renderPIN();\n  },\n  onInputsAnimationEnd: function (event: any) {\n    $(event.currentTarget).removeClass('shake');\n  },\n  onBackClick: function (event: any) {\n    event.preventDefault();\n    this.trigger('change:pane', 'users');\n  },\n  onRemoveClick: function (event: any) {\n    event.preventDefault();\n    this.removePIN();\n  },\n  onSubmit: function (event: any) {\n    event.preventDefault();\n    const pin = this.getPIN();\n    if (pin.length !== 4) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('Please enter a 4 digit PIN.'),\n      });\n      return;\n    }\n    if (this.isEditing && !this.isEditConfirmation) {\n      this.editPIN(pin);\n    } else {\n      this.confirmUser(pin);\n    }\n  },\n  onSaveKeyDown: function (event: any) {\n    const keyCode = event.which;\n    // Add special handling for the backspace and delete keys.\n    if (keyCode === 8 || keyCode === 46) {\n      event.preventDefault();\n      this.ui.input.val('');\n      this.focusInput();\n    }\n  },\n  onPINClick: function () {\n    this.focusInput();\n  },\n});\nexport default UserSelectModalPINPane;\n","\n    import PropTypes from 'prop-types';\n    import React from 'react';\n    import styles from 'app/js/views/v3/components/core/base/PlexIcon.css';\n\n    function IconAdd(props) {\n      const label = props['aria-label'];\n      const className = props.className;\n      const style = props.style;\n\n      const svgProps = {\"viewBox\":\"0 0 560 560\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"strokeMiterlimit\":\"1.414\",\"strokeLinejoin\":\"round\",\"id\":\"plex-icon-add-560\"};\n\n      svgProps['aria-hidden'] = !label;\n      svgProps.style = style;\n      svgProps.className = styles.plexIcon + (className ? ' ' + className : '');\n\n      const children = [React.createElement.apply(React, ['path', {\"d\":\"m320 320l0 200-80 0 0-200-200 0 0-80 200 0 0-200 80 0 0 200 200 0 0 80-200 0\"}].concat([]))];\n\n      if (label) {\n        children.unshift(React.createElement('title', null, label));\n      }\n\n      // Arrays require a key, but a fixed number of elements don't.\n      // Spread the elements since it'll be a fixed number anyways\n      return React.createElement.apply(React, ['svg', svgProps].concat(children));\n    };\n\n    IconAdd.propTypes = {\n      'aria-label': PropTypes.string,\n      className: PropTypes.string,\n      style: PropTypes.object\n    };\n\n    export default IconAdd;\n  ","/* eslint-plugin-disable @typescript-eslint */\n\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport renderComponentToString from 'app/js/utils/renderComponentToString';\nimport IconAdd from 'app/glyphs/add-560.svg';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/user/UserSelectModalAddUserListItem.tpl';\n\nconst UserSelectModalAddUserListItem = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  tagName: 'li',\n  className: 'user-select-list-item',\n  template: tpl,\n\n  events: {\n    'click a': 'onClick',\n  },\n\n  //\n  // Init\n\n  initialize(options: any) {\n    this.disabled = options.disabled;\n  },\n\n  //\n  // Control\n\n  serializeData() {\n    return {\n      iconAdd: renderComponentToString(IconAdd, { className: 'add-icon' }),\n      disabled: this.disabled,\n    };\n  },\n\n  //\n  // Listeners\n\n  onClick(event: any) {\n    event.preventDefault();\n\n    this.trigger('selectUser', this.model, true);\n  },\n});\n\nexport default UserSelectModalAddUserListItem;\n","import BaseList from 'app/js/views/lists/BaseList';\nimport UserSelectModalAddUserListItem from './UserSelectModalAddUserListItem';\nimport UserSelectModalUserListItem from './UserSelectModalUserListItem';\n\nconst UserSelectModalUserList = BaseList.extend({\n  //\n  // Properties\n\n  tagName: 'ul',\n  className: 'tile-list user-select-list',\n  itemView: UserSelectModalUserListItem,\n\n  onRender() {\n    if (this.options.showAddUser) {\n      this.addItemView(\n        this.options.adminModel,\n        UserSelectModalAddUserListItem,\n        this.collection.length\n      );\n    }\n  },\n});\n\nexport default UserSelectModalUserList;\n","import _ from 'underscore';\nimport * as adapters from 'app/js/adapters/adapters';\nimport commands from 'app/js/commands/commands';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport HomeUserCollection from 'app/js/models/user/HomeUserCollection';\nimport UserSelectModalUserList from 'app/js/views/modals/user/UserSelectModalUserList';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/user/UserSelectModalUsersPane.tpl';\n\nconst UserSelectModalUsersPane = Marionette.Layout.extend({\n  //\n  // Properties\n\n  className: 'user-select-modal-users-container',\n  template: tpl,\n\n  ui: {\n    loading: '.loading',\n  },\n\n  regions: {\n    body: '.modal-body',\n  },\n\n  onlyAfterRender: ['onUserPopulated', 'onHomeUsersPopulated', 'onError'],\n\n  //\n  // Init\n\n  initialize: function () {\n    const appModel = adapters.resolve('appModel');\n\n    this.user = appModel.get('user');\n    this.homeUsers = this.user.get('homeUsers');\n    this.user.server\n      .populate()\n      .done(_.bind(this.onUserPopulated, this))\n      .fail(_.bind(this.onError, this));\n  },\n\n  //\n  // Control\n\n  showList: function (homeUsers: any) {\n    this.ui.loading.addClass('hidden');\n\n    const adminModel = homeUsers.findWhere({ admin: true });\n\n    this.body.show(\n      new UserSelectModalUserList({\n        collection: homeUsers,\n        adminModel,\n        showAddUser: !!adminModel,\n      })\n    );\n\n    this.listenTo(\n      this.body.currentView,\n      'itemview:selectUser',\n      this.onUserSelect\n    );\n  },\n\n  selectUser: function (homeUser: any, openAddManagedUser: any) {\n    this.ui.loading.removeClass('hidden');\n\n    const switchPromise = commands.execute('switchUser', {\n      homeUser: homeUser,\n      switchUser: true,\n      allowGuestLock: true,\n      openAddManagedUser,\n    });\n\n    switchPromise.done(\n      _.bind(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.trigger('resolve', null);\n      }, this)\n    );\n\n    switchPromise.always(\n      this.whenRendered(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.ui.loading.addClass('hidden');\n      })\n    );\n  },\n\n  //\n  // Listeners\n\n  onUserPopulated: function () {\n    this.homeUsers\n      .fetch()\n      .done(_.bind(this.onHomeUsersPopulated, this))\n      .fail(_.bind(this.onError, this));\n  },\n\n  onHomeUsersPopulated: function (homeUsers: any) {\n    this.showList(homeUsers);\n  },\n\n  onError: function () {\n    // Check if we have user details in the cache. If we do, we can show a\n    // limited select user list. Otherwise, just let the user through.\n\n    const activeUser = userStorageModel.getActiveUser();\n\n    if (activeUser?.get('home')) {\n      const homeUser = {\n        id: activeUser.id,\n        title: activeUser.get('title'),\n        protected: !!activeUser.get('pin'),\n      };\n\n      this.showList(\n        new HomeUserCollection([homeUser], {\n          server: this.user.server,\n          parent: this.user,\n        })\n      );\n    } else {\n      this.trigger('resolve');\n    }\n  },\n\n  onUserSelect: function (\n    // @ts-expect-error ts-migrate(6133) FIXME: 'itemView' is declared but its value is never read... Remove this comment to see the full error message\n    itemView: any,\n    homeUser: any,\n    openAddManagedUser: any\n  ) {\n    if (homeUser.get('protected')) {\n      this.trigger('change:pane', 'pin', {\n        model: homeUser,\n        showBackButton: true,\n        openAddManagedUser,\n        focusDelay: 0,\n      });\n    } else {\n      this.selectUser(homeUser, openAddManagedUser);\n    }\n  },\n});\n\nexport default UserSelectModalUsersPane;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport * as adapters from 'app/js/adapters/adapters';\nimport alerts from 'app/js/models/alerts';\nimport BaseModal from 'app/js/views/modals/BaseModal';\nimport UserSelectModalAlertBarView from 'app/js/views/modals/user/UserSelectModalAlertBarView';\nimport UserSelectModalPINPane from 'app/js/views/modals/user/UserSelectModalPINPane';\nimport UserSelectModalUsersPane from 'app/js/views/modals/user/UserSelectModalUsersPane';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/user/UserSelectModal.tpl';\n\nconst UserSelectModal = BaseModal.extend({\n  //\n  // Properties\n\n  name: 'userSelectModal',\n  className: 'user-select-modal modal modal-transparent fade',\n  template: tpl,\n  transparent: true,\n\n  panes: {\n    users: UserSelectModalUsersPane,\n    pin: UserSelectModalPINPane,\n  },\n\n  regions: {\n    content: '.modal-content',\n    alertBar: '.modal-alert',\n  },\n\n  //\n  // Init\n\n  initialize: function (options: any) {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.initialize.apply(this, arguments);\n\n    const appModel = adapters.resolve('appModel');\n\n    this.options = options;\n    this.isForced = options.isForced;\n    this.user = appModel.get('user');\n\n    this.promise = $.Deferred();\n  },\n\n  showPane: function (paneType: any, options: any) {\n    if (this.currentPane) {\n      this.stopListening(this.currentPane);\n    }\n\n    const PaneConstructor = this.panes[paneType];\n    const pane = new PaneConstructor(_.extend({}, this.options, options));\n\n    this.listenTo(pane, {\n      'change:pane': this.onChangePane,\n      resolve: this.onResolve,\n      reject: this.onReject,\n    });\n\n    this.currentPane = pane;\n    this.content.show(pane);\n\n    return pane;\n  },\n\n  showAlertBar: function () {\n    const alert = alerts[0];\n    alerts.length = 0;\n    this.alertBar.show(\n      new UserSelectModalAlertBarView({\n        alert,\n      })\n    );\n  },\n\n  //\n  // Listeners\n\n  onRender: function () {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.onRender.apply(this, arguments);\n\n    if (this.model) {\n      this.showPane('pin', { focusDelay: this.focusDelay });\n    } else {\n      this.showPane('users');\n    }\n\n    this.showAlertBar();\n  },\n\n  onHide: function () {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.onHide.apply(this, arguments);\n\n    if (this.promise.state() === 'pending') {\n      this.promise.reject();\n    }\n  },\n\n  onChangePane: function (paneType: any, options: any) {\n    this.showPane(paneType, options);\n  },\n\n  onResolve: function (pin: any) {\n    this.promise.resolve(pin);\n    this.hide();\n  },\n\n  onReject: function () {\n    this.promise.reject();\n    this.hide();\n  },\n});\n\nexport default UserSelectModal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport config from 'app/js/models/config';\nimport { userExperienceSettingsID } from 'app/js/models/user/userExperienceModelAttrs';\nimport { navigate } from 'app/js/stores/actions/appActions';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createFetchHandler from 'app/js/stores/actions/helpers/createFetchHandler';\nimport createPopulateHandler from 'app/js/stores/actions/helpers/createPopulateHandler';\nimport saveHomeSettings from 'app/js/stores/actions/helpers/user/saveHomeSettings';\nimport updateAvatar from 'app/js/stores/actions/helpers/user/updateAvatar';\nimport updateWebhooks from 'app/js/stores/actions/helpers/user/updateWebhooks';\nimport { showAlert } from 'app/js/stores/actions/ui/uiActions';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport * as metricsEvents from 'app/js/utils/constants/metrics/metricsEvents';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport getIncrementalReminder from 'app/js/utils/dateTime/getIncrementalReminder';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport getErrorMessageFromXHR from 'app/js/utils/getErrorMessageFromXHR';\nimport log from 'app/js/utils/log/log';\nimport getMetricsServerTypeForSource from 'app/js/utils/metrics/getMetricsServerTypeForSource';\nimport trackPreferredServerEvent from 'app/js/utils/metrics/trackPreferredServerEvent';\nimport parser2 from 'app/js/utils/parser2';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport getSourceForStorage from 'app/js/utils/source/getSourceForStorage';\nimport {\n  findFriendModel,\n  findHomeUserModel,\n  findServerModel,\n  findUserFlexModel,\n  findUserModel,\n} from 'app/js/utils/state/modelFinders';\nimport { scheduleImmediateUpdate } from 'app/js/utils/state/stateUpdateScheduler';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\nimport canShareSyncSettings from 'app/js/utils/user/canShareSyncSettings';\nimport navigateToRoute from 'app/js/v4/routes/navigateToRoute';\nimport UserSelectModal from 'app/js/views/modals/user/UserSelectModal';\n\n//\n// Action Types\n\nexport const FETCH_USER_FEATURES = 'user/fetchUserFeatures';\nexport const POPULATE_USER_FEATURES = 'user/populateUserFeatures';\nexport const SAVE_EXPERIENCE_SETTINGS = 'user/saveExperienceSettings';\nexport const SAVE_SUBTITLE_COLOR = 'user/saveSubtitleColor';\nexport const SAVE_SUBTITLE_POSITION = 'user/saveSubtitlePosition';\nexport const SAVE_SUBTITLE_SIZE = 'user/saveSubtitleSize';\nexport const SAVE_AUTO_PLAY = 'user/saveAutoPlay';\nexport const CHANGE_PREFERRED_SERVER = 'user/changePreferredServer';\nexport const FETCH_ALL_FRIENDS = 'user/fetchAllFriends';\nexport const POPULATE_ALL_FRIENDS = 'user/populateAllFriends';\nexport const FETCH_HOME_USERS = 'user/fetchHomeUsers';\nexport const POPULATE_HOME_USERS = 'user/populateHomeUsers';\nexport const FETCH_PLANS = 'user/fetchPlans';\nexport const POPULATE_PLANS = 'user/populatePlans';\nexport const UPDATE_USER = 'user/updateUser';\nexport const CLEAR_UPDATE_USER_ERROR = 'user/clearUpdateUserError';\nexport const FETCH_WEBHOOKS = 'user/fetchWebhooks';\nexport const ADD_WEBHOOK = 'user/addWebhook';\nexport const REPLACE_WEBHOOK = 'user/replaceWebhook';\nexport const CLEAR_UPDATE_WEBHOOK_ERROR = 'user/clearUpdateWebhookError';\nexport const REMOVE_WEBHOOK = 'user/removeWebhook';\nexport const START_FIRST_RUN_EXPERIENCE = 'user/startFirstRunExperience';\nexport const END_FIRST_RUN_EXPERIENCE = 'user/endFirstRunExperience';\nexport const FETCH_HOME_DETAILS = 'user/fetchHomeDetails';\nexport const REMOVE_HOME_USER = 'user/removeHomeUser';\nexport const REMOVE_FRIEND = 'user/removeFriend';\nexport const TOGGLE_GUEST_USER = 'user/toggleGuestUser';\nexport const EDIT_HOME_USER_PIN = 'user/editHomeUserPIN';\nexport const FETCH_INVITES = 'user/fetchInvites';\nexport const FETCH_SENT_INVITES = 'user/fetchSentInvites';\nexport const ACCEPT_INVITE = 'user/acceptInvite';\nexport const REJECT_INVITE = 'user/rejectInvite';\nexport const CANCEL_INVITE = 'user/cancelInvite';\nexport const SHOW_NEW_HOME_WARNINGS = 'user/showNewHomeWarnings';\nexport const PIN_SOURCES = 'user/pinSources';\nexport const UNPIN_SOURCES = 'user/unpinSources';\nexport const SETUP_SOURCES = 'user/setupSources';\nexport const REORDER_PINNED_SOURCES = 'user/reorderPinnedSources';\nexport const UPDATE_PINNED_SOURCES = 'user/updatePinnedSources';\nexport const DISMISS_UPSELL_MODAL = 'user/dismissUpsellModal';\nexport const SAVE_SETTING = 'user/saveSetting';\nexport const SYNC_SETTINGS = 'user/syncSettings';\nexport const SYNC_EXPERIENCE_SETTINGS = 'user/syncExperienceSettings';\nexport const RESTORE_DEFAULT_EXPERIENCE_SETTINGS =\n  'user/restoreDefaultExperienceSettings';\nexport const RESTORE_DEFAULT_CUSTOMIZATION_SETTINGS =\n  'user/restoreCustomizationSettings';\nexport const SET_TWO_FACTOR_ENABLED = 'user/setTwoFactorEnabled';\nexport const SET_REMINDER = 'user/setReminder';\nexport const REMOVE_REMINDER = 'user/removeReminder';\nexport const RESET_REMINDERS = 'user/resetReminders';\nexport const FETCH_USER = 'user/fetch';\n\n//\n// Action Creators\n\nexport const fetchUserFeatures = createActionCreator(FETCH_USER_FEATURES);\nexport const populateUserFeatures = createActionCreator(POPULATE_USER_FEATURES);\n\nexport const saveExperienceSettings = createActionCreator(\n  SAVE_EXPERIENCE_SETTINGS\n);\nexport const saveSubtitleColor = createActionCreator(SAVE_SUBTITLE_COLOR);\nexport const saveSubtitlePosition = createActionCreator(SAVE_SUBTITLE_POSITION);\nexport const saveSubtitleSize = createActionCreator(SAVE_SUBTITLE_SIZE);\nexport const saveAutoPlay = createActionCreator(SAVE_AUTO_PLAY);\nexport const changePreferredServer = createActionCreator(\n  CHANGE_PREFERRED_SERVER\n);\nexport const fetchAllFriends = createActionCreator(FETCH_ALL_FRIENDS);\nexport const fetchHomeUsers = createActionCreator(FETCH_HOME_USERS);\nexport const populateHomeUsers = createActionCreator(POPULATE_HOME_USERS);\nexport const populateAllFriends = createActionCreator(POPULATE_ALL_FRIENDS);\nexport const fetchPlans = createActionCreator(FETCH_PLANS);\nexport const populatePlans = createActionCreator(POPULATE_PLANS);\nexport const updateUser = createActionCreator(UPDATE_USER);\nexport const clearUpdateUserError = createActionCreator(\n  CLEAR_UPDATE_USER_ERROR\n);\nexport const fetchWebhooks = createActionCreator(FETCH_WEBHOOKS);\nexport const addWebhook = createActionCreator(ADD_WEBHOOK);\nexport const replaceWebhook = createActionCreator(REPLACE_WEBHOOK);\nexport const clearUpdateWebhookError = createActionCreator(\n  CLEAR_UPDATE_WEBHOOK_ERROR\n);\nexport const removeWebhook = createActionCreator(REMOVE_WEBHOOK);\nexport const startFirstRunExperience = createActionCreator(\n  START_FIRST_RUN_EXPERIENCE\n);\nexport const endFirstRunExperience = createActionCreator(\n  END_FIRST_RUN_EXPERIENCE\n);\nexport const fetchHomeDetails = createActionCreator(FETCH_HOME_DETAILS);\nexport const removeHomeUser = createActionCreator(REMOVE_HOME_USER);\nexport const removeFriend = createActionCreator(REMOVE_FRIEND);\nexport const toggleGuestUser = createActionCreator(TOGGLE_GUEST_USER);\nexport const editHomeUserPIN = createActionCreator(EDIT_HOME_USER_PIN);\nexport const fetchInvites = createActionCreator(FETCH_INVITES);\nexport const fetchSentInvites = createActionCreator(FETCH_SENT_INVITES);\nexport const acceptInvite = createActionCreator(ACCEPT_INVITE);\nexport const rejectInvite = createActionCreator(REJECT_INVITE);\nexport const cancelInvite = createActionCreator(CANCEL_INVITE);\nexport const showNewHomeWarnings = createActionCreator(SHOW_NEW_HOME_WARNINGS);\nexport const pinSources = createActionCreator(PIN_SOURCES);\nexport const unpinSources = createActionCreator(UNPIN_SOURCES);\nexport const setupSources = createActionCreator(SETUP_SOURCES);\nexport const reorderPinnedSources = createActionCreator(REORDER_PINNED_SOURCES);\nexport const updatePinnedSources = createActionCreator(UPDATE_PINNED_SOURCES);\nexport const dismissUpsellModal = createActionCreator(DISMISS_UPSELL_MODAL);\nexport const saveSetting = createActionCreator(SAVE_SETTING);\nexport const syncSettings = createActionCreator(SYNC_SETTINGS);\nexport const syncExperienceSettings = createActionCreator(\n  SYNC_EXPERIENCE_SETTINGS\n);\nexport const restoreDefaultExperienceSettings = createActionCreator(\n  RESTORE_DEFAULT_EXPERIENCE_SETTINGS\n);\nexport const restoreDefaultCustomizationSettings = createActionCreator(\n  RESTORE_DEFAULT_CUSTOMIZATION_SETTINGS\n);\nexport const setTwoFactorEnabled = createActionCreator(SET_TWO_FACTOR_ENABLED);\nexport const setReminder = createActionCreator(SET_REMINDER);\nexport const removeReminder = createActionCreator(REMOVE_REMINDER);\nexport const resetReminders = createActionCreator(RESET_REMINDERS);\nexport const fetchUser = createActionCreator(FETCH_USER);\n\n//\n// Helpers\n\nfunction requestSettingSync(userModel: any, setting: any) {\n  if (!userModel.get('isSignedIn') || !config.allowSyncSettings) {\n    return $.Deferred().resolve().promise();\n  }\n  const settings = Array.isArray(setting) ? setting : [setting];\n  const url = path.join('/api/v2/user/settings', {\n    sharedSettings: canShareSyncSettings(userModel) ? 1 : 0,\n  });\n  const xhrOptions = userModel.server.getXHROptions(url, {\n    type: 'POST',\n    contentType: 'application/json',\n    dataType: 'json',\n    data: JSON.stringify({\n      value: JSON.stringify(settings),\n    }),\n  });\n  return $.ajax(xhrOptions).promise();\n}\n\nfunction getUpdatedAtForSetting(settings: any, settingID: any) {\n  if (!settings) {\n    return null;\n  }\n  const matchedSetting = settings.find(\n    (setting: any) => setting.id === settingID\n  );\n  return matchedSetting && matchedSetting.updatedAt;\n}\n\nfunction showPINWarning(user: any) {\n  const userSelectModal = new UserSelectModal({\n    model: user,\n    isEditing: true,\n    isEditWarning: true,\n  });\n  dispatcher.trigger('show:modal', userSelectModal);\n  return alwaysResolve(userSelectModal.promise);\n}\n\nfunction getUserModel(appModel: any) {\n  return appModel.get('user');\n}\n\nfunction getSidebarSettings(appModel: any) {\n  return appModel.get('user').get('experienceSettings').get('sidebarSettings');\n}\n\nfunction getHomeSettings(appModel: any) {\n  return appModel.get('user').get('experienceSettings').get('homeSettings');\n}\n\n//\n// Action Handlers\n\nexport const userActionHandlers = {\n  [FETCH_USER_FEATURES]: createFetchHandler({\n    key: 'features',\n    getModel: findUserModel,\n  }),\n\n  [POPULATE_USER_FEATURES]: createPopulateHandler({\n    key: 'features',\n    fetchActionCreator: fetchUserFeatures,\n    getModel: findUserModel,\n  }),\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [SAVE_SUBTITLE_COLOR](appModel: any, payload: any, dispatch: any) {\n    // Subtitle color is stored in different locations on the appModel for\n    // different platforms.  Once all platforms store subtitleColor on\n    // user.experienceSettings; this action can be deleted, and usages replaced\n    // with saveExperienceSettings\n    dispatch(saveExperienceSettings(payload));\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [SAVE_SUBTITLE_POSITION](appModel: any, payload: any, dispatch: any) {\n    // Subtitle position is stored in different locations on the appModel for\n    // different platforms.  Once all platforms store subtitlePosition on\n    // user.experienceSettings; this action can be deleted, and usages replaced\n    // with saveExperienceSettings\n    dispatch(saveExperienceSettings(payload));\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [SAVE_SUBTITLE_SIZE](appModel: any, payload: any, dispatch: any) {\n    // Subtitle size is stored in different locations on the appModel for\n    // different platforms.  Once all platforms store subtitleSize on\n    // user.experienceSettings; this action can be deleted, and usages replaced\n    // with saveExperienceSettings\n    dispatch(saveExperienceSettings(payload));\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [SAVE_AUTO_PLAY](appModel: any, payload: any, dispatch: any) {\n    // autoPlay is stored in different locations on the appModel for different\n    // platforms.  Once all platforms store autoPlay on user.experienceSettings;\n    // this action can be deleted, and usages replaced with\n    // saveExperienceSettings\n    dispatch(saveExperienceSettings(payload));\n  },\n\n  [CHANGE_PREFERRED_SERVER](appModel: any, payload: any, dispatch: any) {\n    const { machineIdentifier } = payload;\n    const homeSettings = getHomeSettings(appModel);\n    homeSettings.set('preferredServerID', machineIdentifier);\n    saveHomeSettings(appModel, dispatch);\n  },\n\n  [FETCH_ALL_FRIENDS]: createFetchHandler({\n    key: 'allFriends',\n    getModel: getUserModel,\n  }),\n\n  [POPULATE_ALL_FRIENDS]: createPopulateHandler({\n    key: 'allFriends',\n    fetchActionCreator: fetchAllFriends,\n    getModel: getUserModel,\n  }),\n\n  [FETCH_HOME_USERS]: createFetchHandler({\n    key: 'homeUsers',\n    getModel: findUserFlexModel,\n  }),\n\n  [POPULATE_HOME_USERS]: createFetchHandler({\n    key: 'homeUsers',\n    fetchActionCreator: fetchHomeUsers,\n    getModel: findUserFlexModel,\n  }),\n\n  [FETCH_PLANS]: createFetchHandler({\n    key: 'plans',\n    getModel: findUserFlexModel,\n  }),\n\n  [POPULATE_PLANS]: createPopulateHandler({\n    key: 'plans',\n    fetchActionCreator: fetchPlans,\n    getModel: findUserFlexModel,\n  }),\n\n  [CLEAR_UPDATE_USER_ERROR](appModel: any) {\n    const userFlexModel = findUserFlexModel(appModel);\n    userFlexModel.set('updateUserError', null);\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'dispatch' is declared but its value is never read... Remove this comment to see the full error message\n  [UPDATE_USER](appModel: any, payload: any, dispatch: any) {\n    const userFlexModel = findUserFlexModel(appModel);\n    const user = appModel.get('user');\n    const { avatar, ...params } = payload;\n    userFlexModel.set({\n      isUpdatingUser: true,\n      updateUserError: null,\n    });\n    let promise;\n    if (avatar) {\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n      promise = updateAvatar(avatar);\n    } else {\n      const formData = new window.FormData();\n      _.each(params, (value, key) => {\n        formData.append(key, value);\n      });\n\n      const userUrl = _.result(user, 'url');\n\n      // The experimental_features setting is different from the rest of the\n      // user settings, where it must be changed via a bespoke API endpoint. In\n      // order to avoid needing a custom action handler just for this setting we\n      // intercept the payload and change the request options to match what is\n      // expected.\n      // See: https://plex.slack.com/archives/C2S3LBBAL/p1613648727123300?thread_ts=1613604131.118700\n      const url =\n        params.experimentalFeatures != null\n          ? path.join([userUrl, 'settings', 'experimental_features'], {\n              opt_in: params.experimentalFeatures,\n            })\n          : userUrl;\n\n      const options = user.server.getXHROptions(url, {\n        type: 'PUT',\n        processData: false,\n        contentType: false,\n        data: params.experimentalFeatures != null ? undefined : formData,\n      });\n      promise = $.ajax(options);\n    }\n    promise\n      // @ts-expect-error ts-migrate(6133) FIXME: 'response' is declared but its value is never read... Remove this comment to see the full error message\n      .done((response) => {\n        if (payload.avatar || !user.get('hasPassword')) {\n          user.fetch();\n        }\n        const setAttrs = _.reduce(\n          payload,\n          (obj, value, key) => {\n            if (user.hasAttr(key)) {\n              // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n              obj[key] = value;\n            }\n            return obj;\n          },\n          {}\n        );\n        user.set(setAttrs);\n        userFlexModel.set({\n          isUpdatingUser: false,\n          updateUserError: null,\n        });\n      })\n      .fail((xhr) => {\n        const response = parser2.parseXML(xhr.responseText);\n        const errorsArray =\n          (Array.isArray(response) && response) ||\n          (Array.isArray(response.error) ? response.error : [response.error]);\n        const errors = _.mapObject(\n          _.groupBy(errorsArray, (error) =>\n            error && error.field ? error.field : 'request'\n          ),\n          // @ts-expect-error ts-migrate(6133) FIXME: 'key' is declared but its value is never read.\n          (val, key) => _.flatten(val)\n        );\n        userFlexModel.set({\n          isUpdatingUser: false,\n          updateUserError: errors,\n        });\n      });\n  },\n\n  [FETCH_WEBHOOKS]: createFetchHandler({\n    key: 'webhooks',\n    getModel: findUserFlexModel,\n  }),\n\n  [ADD_WEBHOOK](appModel: any) {\n    const userFlexModel = findUserFlexModel(appModel);\n    const webhooks = userFlexModel.get('webhooks');\n    webhooks.add({});\n    userFlexModel.set('updateWebhooksError', null);\n  },\n\n  [REPLACE_WEBHOOK](appModel: any, { oldUrl, newUrl }: any) {\n    const userFlexModel = findUserFlexModel(appModel);\n    const webhooks = userFlexModel.get('webhooks');\n    const oldWebhook = webhooks.findWhere({ url: oldUrl });\n    if (oldWebhook) {\n      const urls = webhooks.map((webhook: any) => {\n        const url = webhook.get('url');\n        return url === oldUrl ? newUrl : url;\n      });\n      userFlexModel.set({\n        isUpdatingWebhooks: true,\n        updateWebhooksError: null,\n      });\n      updateWebhooks(webhooks, urls)\n        .always(() => {\n          userFlexModel.set('isUpdatingWebhooks', false);\n        })\n        .fail((errors) => {\n          userFlexModel.set('updateWebhooksError', errors[0]);\n        });\n    }\n  },\n\n  [CLEAR_UPDATE_WEBHOOK_ERROR](appModel: any) {\n    const userFlexModel = findUserFlexModel(appModel);\n    userFlexModel.set('updateWebhooksError', null);\n  },\n\n  [REMOVE_WEBHOOK](appModel: any, url: any) {\n    const userFlexModel = findUserFlexModel(appModel);\n    const webhooks = userFlexModel.get('webhooks');\n    if (!url) {\n      const filtered = webhooks.filter(\n        (webhook: any) => webhook.get('url') !== url\n      );\n      webhooks.reset(filtered);\n      return;\n    }\n    userFlexModel.set({\n      isRemovingWebhooks: true,\n      updateWebhooksError: null,\n    });\n    const urls = webhooks\n      .map((webhook: any) => webhook.get('url'))\n      .filter((webhookURL: any) => webhookURL !== url);\n    updateWebhooks(webhooks, urls)\n      .always(() => {\n        userFlexModel.set('isRemovingWebhooks', false);\n      })\n      .fail((errors) => {\n        userFlexModel.set('updateWebhooksError', errors[0]);\n      });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  [START_FIRST_RUN_EXPERIENCE](appModel: any, payload = {}, dispatch: any) {\n    // This is triggered in a Lifecycle method. Wait for the next tick before\n    // triggering the redirect so that React can unmount cleanly\n    window.setTimeout(() => {\n      dispatch(\n        navigate({\n          replace: true,\n          pathname: '/client-setup',\n        })\n      );\n    }, 0);\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'dispatch' is declared but its value is never read... Remove this comment to see the full error message\n  [END_FIRST_RUN_EXPERIENCE](appModel: any, payload: any, dispatch: any) {\n    const { preferredServerEntityID } = payload;\n    if (preferredServerEntityID) {\n      const preferredServer = findServerModel(appModel, {\n        serverEntityID: preferredServerEntityID,\n      });\n      trackPreferredServerEvent(\n        preferredServer.toJSON(),\n        payload.preferredServerInteraction\n      );\n    }\n    // This is triggered in a Lifecycle method. Wait for the next tick before\n    // triggering the redirect so that React can unmount cleanly\n    window.setTimeout(() => {\n      navigateToRoute('home', {}, true);\n    }, 0);\n  },\n\n  [FETCH_HOME_DETAILS](appModel: any) {\n    const userFlexModel = findUserFlexModel(appModel);\n    const homeDetails = userFlexModel.get('homeDetails');\n    userFlexModel.set('isHomeDetailsPending', true);\n    homeDetails.fetch().then(\n      () => {\n        userFlexModel.set({\n          isHomeDetailsPending: false,\n          isHomeDetailsPopulated: true,\n          homeDetailsError: null,\n        });\n      },\n      // @ts-expect-error ts-migrate(6133) FIXME: 'model' is declared but its value is never read.\n      (model: any, xhr: any) => {\n        const attrs = {\n          isHomeDetailsPending: false,\n        };\n        if (xhr.status === 404) {\n          (attrs as any).isHomeDetailsPopulated = true;\n          (attrs as any).homeDetailsError = null;\n        } else {\n          (attrs as any).isHomeDetailsPopulated = false;\n          (attrs as any).homeDetailsError = xhr;\n        }\n        userFlexModel.set(attrs);\n      }\n    );\n  },\n\n  [REMOVE_HOME_USER](appModel: any, payload: any, dispatch: any) {\n    const user = appModel.get('user');\n    const userFlexModel = findUserFlexModel(appModel);\n    const homeUsers = userFlexModel.get('homeUsers');\n    const legacyHomeUsers = user.get('homeUsers');\n    const friends = user.get('allFriends');\n    const homeUser = findHomeUserModel(appModel, payload);\n    const isSignedInUser = user.id === homeUser.id;\n    scheduleImmediateUpdate(() => {\n      homeUser.set('isRemoving', true);\n    });\n    const xhrOptions = homeUser.server.getXHROptions(homeUser.url(), {\n      type: 'DELETE',\n    });\n    $.ajax(xhrOptions).then(\n      () => {\n        const friend = friends.get(homeUser.id);\n        // A friend won't be found if you are removing yourself from the home.\n        if (friend) {\n          if (homeUser.get('restricted')) {\n            // A restricted user is deleted when it loses its home.\n            friends.remove(friend);\n          } else {\n            friend.set('home', false);\n          }\n          // Remove this user from the home.\n          homeUsers.remove(homeUser);\n        } else {\n          // Remove everyone from the home but yourself.\n          homeUsers.reset([homeUser]);\n          homeUser.set('admin', true);\n          // None of your friends can be in your home after removing yourself\n          // from a home.\n          friends.each((currentFriend: any) => {\n            currentFriend.set('home', false);\n          });\n        }\n        // Your user will not be flagged as part of a home if you are the only\n        // one in the home and you do not have a pin.\n        const hasHome = !!user.get('pin') || homeUsers.length > 1;\n        user.set('home', hasHome);\n        // Clear homeDetails if the user is leaving a home so that it can be\n        // created again later rather than updated\n        if (!hasHome) {\n          const homeDetails = userFlexModel.get('homeDetails');\n          const legacyHomeDetails = user.get('homeDetails');\n          homeDetails.restoreDefaults();\n          legacyHomeDetails.restoreDefaults();\n        }\n        // Refetch the home users used for user selection and the v2\n        // home user settings.\n        legacyHomeUsers.fetch();\n        homeUser.set('isRemoving', false);\n      },\n      () => {\n        dispatch(\n          showAlert({\n            type: 'error',\n            message: isSignedInUser\n              ? t('There was a problem leaving this home.')\n              : t('There was a problem removing this user.'),\n          })\n        );\n        homeUser.set({\n          isRemoving: false,\n        });\n      }\n    );\n  },\n\n  [REMOVE_FRIEND](appModel: any, payload: any, dispatch: any) {\n    const user = appModel.get('user');\n    const userFlexModel = findUserFlexModel(appModel);\n    const homeUsers = userFlexModel.get('homeUsers');\n    const friends = user.get('allFriends');\n    const legacyHomeUsers = user.get('homeUsers');\n    const friend = findFriendModel(appModel, payload);\n    scheduleImmediateUpdate(() => {\n      friend.set('isRemoving', true);\n    });\n    const url = path.join(['/api/v2/friends', friend.id]);\n    const xhrOptions = friend.server.getXHROptions(url, {\n      type: 'DELETE',\n    });\n    $.ajax(xhrOptions).then(\n      () => {\n        const isHomeUser = friend.get('home');\n        // Invites for this friend will be cancelled, fetch the collections\n        // to keep our information up to date.\n        userFlexModel.get('invites').fetch();\n        userFlexModel.get('sentInvites').fetch();\n        if (isHomeUser) {\n          // Fetch because either the signed in user will be removed from the\n          // home or the friend will be removed from the home.\n          homeUsers.fetch();\n          legacyHomeUsers.fetch();\n        }\n        if (\n          friend\n            .get('serverShares')\n            .some((serverShare: any) => !serverShare.owned)\n        ) {\n          // If a server share was part of the friendship, fetch secondary\n          // servers from plex.tv again so we can remove their server(s) from\n          // our servers collection.\n          dispatcher.trigger('discover:servers');\n        }\n        friend.set({\n          isRemoving: false,\n        });\n        friends.remove(friend);\n      },\n      () => {\n        dispatch(\n          showAlert({\n            type: 'error',\n            message: t('There was a problem removing this friend.'),\n          })\n        );\n        friend.set({\n          isRemoving: false,\n        });\n      }\n    );\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [TOGGLE_GUEST_USER](appModel: any, payload: any, dispatch: any) {\n    const user = appModel.get('user');\n    const userFlexModel = findUserFlexModel(appModel);\n    const homeSize = user.get('homeSize');\n    const homeDetails = userFlexModel.get('homeDetails');\n    const homeUsers = userFlexModel.get('homeUsers');\n    const friends = user.get('allFriends');\n    const legacyHomeDetails = user.get('homeDetails');\n    const legacyHomeUsers = user.get('homeUsers');\n    const isEnabling = !homeDetails.get('guestEnabled');\n    homeDetails.set('isTogglingGuestUser', true);\n    const url = path.join('/api/home', {\n      guestEnabled: isEnabling ? 1 : 0,\n    });\n    const isCreatingHome = isEnabling && homeSize === 1;\n    const xhrOptions = user.server.getXHROptions(url, {\n      type: isCreatingHome ? 'POST' : 'PUT',\n    });\n    $.ajax(xhrOptions).then(\n      () => {\n        homeUsers.fetch();\n        friends.fetch();\n        // Used for user switching, remove once `HomeUsersModel` is an abstract model.\n        legacyHomeUsers.fetch();\n        // If the guest user is being disabled and there are no other home\n        // users the home is destroyed on the plex.tv side and we'll update\n        // our state to match.\n        if (!isEnabling && homeSize === 2) {\n          legacyHomeDetails.clear();\n          homeDetails.clear();\n          user.set('home', false);\n        } else {\n          legacyHomeDetails.set('guestEnabled', isEnabling);\n          homeDetails.set({\n            guestEnabled: isEnabling,\n            isTogglingGuestUser: false,\n          });\n          if (isCreatingHome) {\n            user.set('home', true);\n          }\n        }\n      },\n      (xhr) => {\n        const fallbackErrorMessage = isEnabling\n          ? t('Unable to enable guest account')\n          : t('Unable to disable guest account');\n        const message = getErrorMessageFromXHR(\n          xhr,\n          fallbackErrorMessage,\n          'status'\n        );\n        dispatch(\n          showAlert({\n            type: 'error',\n            message,\n          })\n        );\n        homeDetails.set('isTogglingGuestUser', false);\n      }\n    );\n  },\n\n  [EDIT_HOME_USER_PIN](appModel: any, payload: any) {\n    const homeUser = findHomeUserModel(appModel, payload);\n    // Eventually this all needs to be replaced with a v3 modal, but it works for now.\n    const modal = new UserSelectModal({\n      model: homeUser,\n      isEditing: true,\n    });\n    dispatcher.trigger('show:modal', modal);\n    modal.promise.then((pin: any) => {\n      homeUser.set('protected', !!pin);\n    });\n  },\n\n  [FETCH_INVITES]: createFetchHandler({\n    key: 'invites',\n    getModel: findUserFlexModel,\n  }),\n\n  [FETCH_SENT_INVITES]: createFetchHandler({\n    key: 'sentInvites',\n    getModel: findUserFlexModel,\n  }),\n\n  [ACCEPT_INVITE](appModel: any, payload: any, dispatch: any) {\n    const user = appModel.get('user');\n    const userFlexModel = findUserFlexModel(appModel);\n    const invites = userFlexModel.get('invites');\n    const invite = invites.get(payload.inviteID);\n    const homeUsers = userFlexModel.get('homeUsers');\n    const signedInHomeUser = homeUsers.get(user.id);\n    const legacyHomeUsers = user.get('homeUsers');\n    invite.set('isAccepting', true);\n    const hasPIN = signedInHomeUser.get('protected');\n    const pinPromise =\n      invite.get('home') && !hasPIN\n        ? showPINWarning(signedInHomeUser)\n        : $.Deferred().resolve().promise();\n    pinPromise\n      .then(() => invite.save(null, { force: true }))\n      .then(\n        () => {\n          invites.remove(invite);\n          // Assume that the home and friends collections are now stale. Either\n          // a new home user or friend model will be added, or the Server\n          // property of the friend model will change.\n          legacyHomeUsers.fetch();\n          dispatch(fetchHomeUsers());\n          dispatch(fetchAllFriends());\n          // A pending invite may be automatically accepted. For example, a\n          // pending friend invite will be accepted if you accept a home invite\n          // from that same user.\n          dispatch(fetchSentInvites());\n          // If a server share was included in the invite, fetch secondary\n          // servers from plex.tv again so we can add the new server to our\n          // servers collection.\n          if (invite.get('server')) {\n            dispatcher.trigger('discover:servers');\n          }\n        },\n        // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n        (xhr) => {\n          invite.set('isAccepting', false);\n          dispatch(\n            showAlert({\n              type: 'error',\n              message: t('There was a problem accepting this invite.'),\n            })\n          );\n        }\n      );\n  },\n\n  [REJECT_INVITE](appModel: any, payload: any, dispatch: any) {\n    const userFlexModel = findUserFlexModel(appModel);\n    const invites = userFlexModel.get('invites');\n    const invite = invites.get(payload.inviteID);\n    invite.set('isRemoving', true);\n    const xhrOptions = invite.server.getXHROptions(invite.url(), {\n      type: 'DELETE',\n    });\n    $.ajax(xhrOptions).then(\n      () => {\n        invites.remove(invite);\n        if (invite.get('server')) {\n          dispatch(fetchAllFriends());\n        }\n      },\n      () => {\n        invite.set('isRemoving', false);\n        dispatch(\n          showAlert({\n            type: 'error',\n            message: t('There was a problem rejecting this invite.'),\n          })\n        );\n      }\n    );\n  },\n\n  [CANCEL_INVITE](appModel: any, payload: any, dispatch: any) {\n    const userFlexModel = findUserFlexModel(appModel);\n    const sentInvites = userFlexModel.get('sentInvites');\n    const sentInvite = sentInvites.get(payload.inviteID);\n    sentInvite.set('isRemoving', true);\n    const xhrOptions = sentInvite.server.getXHROptions(sentInvite.url(), {\n      type: 'DELETE',\n    });\n    $.ajax(xhrOptions).then(\n      () => {\n        sentInvites.remove(sentInvite);\n        if (sentInvite.get('server')) {\n          dispatch(fetchAllFriends());\n        }\n      },\n      () => {\n        sentInvite.set('isRemoving', false);\n        dispatch(\n          showAlert({\n            type: 'error',\n            message: t('There was a problem canceling this invite.'),\n          })\n        );\n      }\n    );\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [SHOW_NEW_HOME_WARNINGS](appModel: any, payload: any, dispatch: any) {\n    const user = appModel.get('user');\n    const userFlexModel = findUserFlexModel(appModel);\n    const homeUsers = userFlexModel.get('homeUsers');\n    const signedInHomeUser = homeUsers.get(user.id);\n    if (signedInHomeUser.get('protected') || homeUsers.length > 1) {\n      return;\n    }\n    // If the user is adding someone to their home and the user doesn't have\n    // a PIN, show a warning and let them set the PIN.\n    const userSelectModal = new UserSelectModal({\n      model: signedInHomeUser,\n      isEditing: true,\n      isEditWarning: true,\n    });\n    dispatcher.trigger('show:modal', userSelectModal);\n  },\n\n  [SETUP_SOURCES](appModel: any, payload: any, dispatch: any) {\n    const sidebarSettings = getSidebarSettings(appModel);\n    const pinnedSources = sidebarSettings.get('pinnedSources');\n    const { sources = [] } = payload;\n    if (!sidebarSettings.get('hasCompletedSetup')) {\n      sidebarSettings.set('hasCompletedSetup', true);\n    }\n    const sourcesForStorage = sources.map(getSourceForStorage);\n    pinnedSources.reset(sourcesForStorage);\n    dispatch(saveExperienceSettings({ sidebarSettings }));\n    sourcesForStorage.forEach((source: any) => {\n      resolve('metrics').trackEvent({\n        event: metricsEvents.CLIENT_CLICK,\n        interaction: true,\n        identifier: source.providerIdentifier,\n        properties: {\n          page: metricsPages.PREFERRED_SOURCES,\n          action: metricsActions.PIN_TO_NAV,\n          type: source.sourceType,\n          serverType: getMetricsServerTypeForSource(source),\n          firstRun: true,\n        },\n      });\n    });\n  },\n\n  [PIN_SOURCES](appModel: any, payload: any, dispatch: any) {\n    const sidebarSettings = getSidebarSettings(appModel);\n    const pinnedSources = sidebarSettings.get('pinnedSources');\n    const { sources = [], interaction = true } = payload;\n    const sourcesForStorage = sources.map(getSourceForStorage);\n    pinnedSources.add(sourcesForStorage);\n\n    dispatch(saveExperienceSettings({ sidebarSettings }));\n    sourcesForStorage.forEach((source: any) => {\n      resolve('metrics').trackEvent({\n        event: metricsEvents.CLIENT_CLICK,\n        interaction,\n        identifier: source.providerIdentifier,\n        properties: {\n          page: metricsPages.SIDEBAR,\n          action: metricsActions.PIN_TO_NAV,\n          type: source.sourceType,\n          serverType: getMetricsServerTypeForSource(source),\n          firstRun: false,\n        },\n      });\n    });\n  },\n\n  [UNPIN_SOURCES](appModel: any, payload: any, dispatch: any) {\n    const sidebarSettings = getSidebarSettings(appModel);\n    const pinnedSources = sidebarSettings.get('pinnedSources');\n    const { sources = [] } = payload;\n    const sourcesToRemove = sources.map((source: any) => {\n      return pinnedSources.get(source.key);\n    });\n    pinnedSources.remove(sourcesToRemove);\n\n    dispatch(saveExperienceSettings({ sidebarSettings }));\n    sources.forEach((source: any) => {\n      resolve('metrics').trackEvent({\n        event: metricsEvents.CLIENT_CLICK,\n        interaction: true,\n        identifier: source.providerIdentifier,\n        properties: {\n          page: metricsPages.SIDEBAR,\n          action: metricsActions.UNPIN_FROM_NAV,\n          type: source.sourceType,\n          serverType: getMetricsServerTypeForSource(source),\n          firstRun: false,\n        },\n      });\n    });\n  },\n\n  [REORDER_PINNED_SOURCES](appModel: any, payload: any, dispatch: any) {\n    const sidebarSettings = getSidebarSettings(appModel);\n    const pinnedSources = sidebarSettings.get('pinnedSources');\n    const reorderedPinnedSources = payload.sourceKeys.map((sourceKey: any) =>\n      pinnedSources.get(sourceKey)\n    );\n    pinnedSources.reset(reorderedPinnedSources);\n\n    dispatch(saveExperienceSettings({ sidebarSettings }));\n    resolve('metrics').trackEvent({\n      event: metricsEvents.CLIENT_CLICK,\n      interaction: true,\n      properties: {\n        page: metricsPages.SIDEBAR,\n        action: metricsActions.REORDER_NAV,\n      },\n    });\n  },\n\n  [UPDATE_PINNED_SOURCES](appModel: any, payload: any, dispatch: any) {\n    const { sourceKeys, pinnedSourceAttrs } = payload;\n    const sidebarSettings = getSidebarSettings(appModel);\n    const pinnedSources = sidebarSettings.get('pinnedSources');\n    sourceKeys.forEach((sourceKey: any) => {\n      const pinnedSource = pinnedSources.get(sourceKey);\n      if (pinnedSource) {\n        pinnedSource.set(pinnedSourceAttrs);\n      }\n    });\n    dispatch(saveExperienceSettings({ sidebarSettings }));\n  },\n\n  [DISMISS_UPSELL_MODAL](appModel: any, payload: any, dispatch: any) {\n    const experienceSettings = appModel.get('user').get('experienceSettings');\n    const dismissedUpsellModals = experienceSettings.get(\n      'dismissedUpsellModals'\n    );\n    const { dismissedModal } = payload;\n    if (!dismissedUpsellModals.includes(dismissedModal)) {\n      dispatch(\n        saveExperienceSettings({\n          dismissedUpsellModals: [...dismissedUpsellModals, dismissedModal],\n        })\n      );\n    }\n  },\n\n  [SAVE_SETTING](appModel: any, setting: any, dispatch: any) {\n    const settings = appModel.get('user').get('settings');\n    const settingModel = settings.get(setting.id);\n    settingModel.set({\n      value: setting.value,\n      isDirty: true,\n    });\n    dispatch(syncSettings([setting.id]));\n  },\n\n  [SYNC_SETTINGS](appModel: any, settingIDs: any) {\n    const userModel = appModel.get('user');\n    const settings = userModel.get('settings');\n    const settingsJSON = settingIDs.map((id: any) => {\n      const settingModel = settings.get(id);\n      return settingModel.toJSON({ syncedOnly: true });\n    });\n    requestSettingSync(userModel, settingsJSON).then((response) => {\n      settingIDs.forEach((id: any) => {\n        const settingModel = settings.get(id);\n        const updatedAt = getUpdatedAtForSetting(response, id);\n        if (updatedAt) {\n          settingModel.set({\n            updatedAt,\n            isDirty: false,\n          });\n        }\n      });\n    });\n  },\n\n  [SAVE_EXPERIENCE_SETTINGS](appModel: any, settings: any, dispatch: any) {\n    const experienceSettingsModel = appModel\n      .get('user')\n      .get('experienceSettings');\n    experienceSettingsModel.set({\n      ...settings,\n      isDirty: true,\n    });\n    dispatch(syncExperienceSettings());\n  },\n\n  [SYNC_EXPERIENCE_SETTINGS](appModel: any) {\n    const userModel = appModel.get('user');\n    const experienceSettingsModel = userModel.get('experienceSettings');\n    const settingsJSON = experienceSettingsModel.toJSON({\n      excluded: ['updatedAt'],\n      syncedOnly: true,\n      excludeDefaults: true,\n    });\n    experienceSettingsModel.set({\n      isSaving: true,\n      saveError: null,\n    });\n    requestSettingSync(userModel, {\n      id: userExperienceSettingsID,\n      type: 'json',\n      value: JSON.stringify(settingsJSON),\n      hidden: true,\n    }).then(\n      (response) => {\n        const updatedAt = getUpdatedAtForSetting(\n          response,\n          userExperienceSettingsID\n        );\n        const updates = { isSaving: false };\n        if (updatedAt) {\n          (updates as any).updatedAt = updatedAt;\n          (updates as any).isDirty = false;\n        }\n        experienceSettingsModel.set(updates);\n      },\n      () => {\n        experienceSettingsModel.set({\n          isSaving: false,\n          saveError: { message: t('An error occurred while syncing settings') },\n        });\n      }\n    );\n  },\n\n  [RESTORE_DEFAULT_EXPERIENCE_SETTINGS](\n    appModel: any,\n    // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n    payload: any,\n    dispatch: any\n  ) {\n    const experienceSettingsModel = appModel\n      .get('user')\n      .get('experienceSettings');\n    const overrideAttrs = {\n      showAdvancedSettings: experienceSettingsModel.get('showAdvancedSettings'),\n      isDirty: true,\n    };\n    experienceSettingsModel.restoreDefaults(overrideAttrs);\n    dispatch(syncExperienceSettings());\n  },\n\n  [RESTORE_DEFAULT_CUSTOMIZATION_SETTINGS](\n    appModel: any,\n    // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n    payload: any,\n    dispatch: any\n  ) {\n    const experienceSettingsModel = appModel\n      .get('user')\n      .get('experienceSettings');\n    experienceSettingsModel.set('autoHomeHubsEnabled', true);\n    experienceSettingsModel.get('homeSettings').restoreDefaults();\n    experienceSettingsModel.get('sidebarSettings').restoreDefaults();\n    dispatch(syncExperienceSettings());\n  },\n\n  [SET_TWO_FACTOR_ENABLED](\n    appModel: any,\n    { twoFactorEnabled }: any,\n    // @ts-expect-error ts-migrate(6133) FIXME: 'dispatch' is declared but its value is never read... Remove this comment to see the full error message\n    dispatch: any\n  ) {\n    appModel.get('user').set({ twoFactorEnabled });\n  },\n\n  [SET_REMINDER](\n    appModel: any,\n    payload: { id: string; data: any; remindAfter?: Date | null },\n    dispatch: any\n  ) {\n    const experienceSettingsModel = appModel\n      .get('user')\n      .get('experienceSettings');\n    const { id, data, remindAfter } = payload;\n    const reminders = experienceSettingsModel.get('reminders');\n    const reminder = reminders.get(id);\n    // The times attribute is incremented each time a user is reminded. The\n    // initial value is 0.\n    const times = reminder ? reminder.get('times') + 1 : 0;\n\n    reminders.add(\n      {\n        data,\n        id,\n        times,\n        remindAfter: (\n          remindAfter || getIncrementalReminder(times)\n        ).toISOString(),\n      },\n      { merge: true }\n    );\n    dispatch(saveExperienceSettings());\n  },\n\n  [REMOVE_REMINDER](appModel: any, payload: any, dispatch: any) {\n    const experienceSettingsModel = appModel\n      .get('user')\n      .get('experienceSettings');\n    experienceSettingsModel.get('reminders').remove(payload.id);\n    dispatch(saveExperienceSettings());\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [RESET_REMINDERS](appModel: any, payload: any, dispatch: any) {\n    const experienceSettingsModel = appModel\n      .get('user')\n      .get('experienceSettings');\n    const reminders = experienceSettingsModel.get('reminders');\n    log(`[User] Removing ${reminders.length} reminders`);\n    reminders.clear();\n    dispatch(saveExperienceSettings());\n  },\n\n  [FETCH_USER](appModel: any, _payload: any, _dispatch: any) {\n    const user = appModel.get('user');\n    user.fetch();\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { saveExperienceSettings } from 'app/js/stores/actions/userActions';\nimport random from 'app/js/utils/string/random';\n\nexport default function saveHomeSettings(appModel: any, dispatch: any) {\n  const experienceSettings = appModel.get('user').get('experienceSettings');\n  const homeSettings = experienceSettings.get('homeSettings');\n\n  // This identifier is changed each time `homeSettings` changes are saved such\n  // that components have an easy single attribute to compare to detect changes.\n  // The attribute is also useful for coupling settings with in-memory caches.\n  homeSettings.set('settingsKey', random());\n\n  dispatch(saveExperienceSettings({ homeSettings }));\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport base64ImageStringToBlob from 'app/js/utils/images/base64ImageStringToBlob';\n\nexport default function updateAvatar(avatar: any, userID: any) {\n  const appModel = resolve('appModel');\n  const cloudServerModel = appModel.get('cloudServer');\n\n  const avatarBlob = base64ImageStringToBlob(avatar);\n\n  const formData = new window.FormData();\n  // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'Blob | null' is not assignable t... Remove this comment to see the full error message\n  formData.append('avatar', avatarBlob);\n\n  if (userID) {\n    formData.append('userId', userID);\n  }\n\n  const xhrOptions = cloudServerModel.getXHROptions('/api/v2/user', {\n    type: 'PUT',\n    processData: false,\n    contentType: false,\n    data: formData,\n  });\n\n  return $.ajax(xhrOptions);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport * as metricsEvents from 'app/js/utils/constants/metrics/metricsEvents';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport getMetricsServerStatus from 'app/js/utils/metrics/getMetricsServerStatus';\nimport getMetricsServerType from 'app/js/utils/metrics/getMetricsServerType';\n\nfunction trackPreferredServerEvent(server: any, interaction = true) {\n  resolve('metrics').trackEvent({\n    event: metricsEvents.CLIENT_CLICK,\n    interaction,\n    properties: {\n      page: metricsPages.PREFERRED_SERVER,\n      action: metricsActions.SELECT_PREFERRED_SERVER,\n      serverType: getMetricsServerType(server),\n      status: getMetricsServerStatus(server),\n      firstRun: true,\n    },\n  });\n}\n\nexport default trackPreferredServerEvent;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelectorCreator, defaultMemoize } from 'reselect';\nimport _ from 'underscore';\n\nconst createDeepEqualSelector = createSelectorCreator(\n  defaultMemoize,\n  _.isEqual\n);\n\nexport default createDeepEqualSelector;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelectorCreator, defaultMemoize } from 'reselect';\nimport shallowEqual from 'app/js/views/v3/helpers/shallowEqual';\n\nconst createShallowEqualSelector = createSelectorCreator(\n  defaultMemoize,\n  shallowEqual\n);\n\nexport default createShallowEqualSelector;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectEntities from '../selectEntities';\n\nconst selectAllProviderEntities = createSelector(\n  selectEntities,\n  (entities) => entities.providers\n);\n\nexport default selectAllProviderEntities;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport createDeepEqualSelector from 'app/js/stores/selectors/createDeepEqualSelector';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\n\nexport function createStableProvider(provider: any) {\n  if (!provider) {\n    return null;\n  }\n\n  return {\n    entityID: provider.entityID,\n    id: provider.id,\n    parentID: provider.parentID,\n    identifier: provider.identifier,\n    metricsIdentifier: provider.metricsIdentifier,\n    isLibraryProvider: provider.isLibraryProvider,\n    isPopulated: !!provider.isPopulated,\n    epgSource: provider.epgSource,\n    title: provider.title,\n    sourceTitle: provider.sourceTitle,\n    protocols: provider.protocols.reduce((acc: any, protocol: any) => {\n      acc[protocol] = true;\n      return acc;\n    }, {}),\n    features: provider.features.reduce((acc: any, feature: any) => {\n      let finalFeature = feature;\n\n      if (feature.type === providerFeatureTypes.ACTIONS) {\n        // Create a new object so we don't mutate the feature in the state tree\n        let newFeature = {\n          type: providerFeatureTypes.ACTIONS,\n        };\n\n        newFeature = feature.actions.reduce((acc2: any, action: any) => {\n          acc2[action.id] = action;\n\n          return acc2;\n        }, newFeature);\n\n        finalFeature = newFeature;\n      }\n\n      acc[feature.type] = finalFeature;\n      return acc;\n    }, {}),\n  };\n}\n\n// This selector is used frequently in metadata list items. Rather than create a\n// unique selector for each component in order for reselect to memoize\n// correctly, add a layer of memoization on top of reselect using the entity id\n// since there is a small set of stable providers. This allows all metadata list\n// items to reuse the same selector.\n\nconst memo = {};\n\nfunction createStableProviderSelector() {\n  return createSelector(\n    (appState: any, providerEntityID: any) =>\n      appState.entities.providers[providerEntityID],\n    createStableProvider\n  );\n}\n\nexport default function selectStableProvider(\n  appState: any,\n  { providerEntityID }: any\n) {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  let selector = memo[providerEntityID];\n\n  if (!selector) {\n    selector = createDeepEqualSelector(\n      createStableProviderSelector(),\n      (provider) => provider\n    );\n\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    memo[providerEntityID] = selector;\n  }\n\n  return selector(appState, providerEntityID);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function selectEntities(appState: any) {\n  return appState.entities;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport createUnstableServerSelector from 'app/js/stores/selectors/server/createUnstableServerSelector';\n\nexport default function createServerFlexSelector() {\n  return createSelector(\n    createUnstableServerSelector(),\n    (server) => server && server[__PLATFORM__]\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport createUnstableServerSelector from 'app/js/stores/selectors/server/createUnstableServerSelector';\n\nexport default function createServerNowPlayingSessionsCountSelector() {\n  return createSelector(\n    createUnstableServerSelector(),\n    (appState) => appState.v4.core.serverNowPlayingSessions,\n    (server, serverNowPlayingSessions) => {\n      // `ServerSettingsPageConnector` can call this selector before a server is\n      // discovered or even if a server cannot be found matching the\n      // `machineIdentifier` in the route.\n\n      if (!server) {\n        return 0;\n      }\n\n      const sessions = serverNowPlayingSessions[server.machineIdentifier];\n      const sessionKeys = sessions?.sessionKeys;\n\n      return sessionKeys?.length ?? 0;\n    }\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectAllServerEntities from './selectAllServerEntities';\n\nexport default function createUnstableServerSelector() {\n  return createSelector(\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { serverEntityID }: any) => serverEntityID,\n    selectAllServerEntities,\n    (serverEntityID, serverEntities) => serverEntities[serverEntityID]\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectEntities from '../selectEntities';\n\nconst selectAllServerEntities = createSelector(\n  selectEntities,\n  (entities) => entities.servers\n);\n\nexport default selectAllServerEntities;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectAllServerEntities from 'app/js/stores/selectors/server/selectAllServerEntities';\n\nconst selectCloudServer = createSelector(\n  selectAllServerEntities,\n  (appState) => appState.cloudServer,\n  (serverEntities, cloudServer) => serverEntities[cloudServer]\n);\n\nexport default selectCloudServer;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function selectEmbeddedServer(appState: any) {\n  return appState.embeddedServer;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport createDeepEqualSelector from 'app/js/stores/selectors/createDeepEqualSelector';\nimport selectServers from 'app/js/stores/selectors/server/selectServers';\n\nconst selectPrimaryEligibleServers = createDeepEqualSelector(\n  selectServers,\n  (servers) => servers.filter((server: any) => server.isPrimaryEligible)\n);\n\nexport default selectPrimaryEligibleServers;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectPrimaryEligibleServers from 'app/js/stores/selectors/server/selectPrimaryEligibleServers';\n\nconst selectManageableServerEntityIDs = createSelector(\n  selectPrimaryEligibleServers,\n  (servers) => {\n    return servers.reduce((acc: any, server: any) => {\n      if (!server.isShared && !server.isOutOfDate) {\n        acc.push(server.entityID);\n      }\n\n      return acc;\n    }, []);\n  }\n);\n\nexport default selectManageableServerEntityIDs;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectAllServerEntities from './selectAllServerEntities';\n\nconst selectServers = createSelector(\n  selectAllServerEntities,\n  (appState) => appState.servers,\n  (appState) => appState.embeddedServer,\n  (appState) => appState.transientServer,\n  (\n    serverEntities,\n    serverEntityIDs,\n    embeddedServerEntityID,\n    transientServerEntityID\n  ) => {\n    const servers = serverEntityIDs\n      ? serverEntityIDs.map(\n          (serverEntityID: any) => serverEntities[serverEntityID]\n        )\n      : [];\n\n    if (embeddedServerEntityID && serverEntities[embeddedServerEntityID]) {\n      servers.push(serverEntities[embeddedServerEntityID]);\n    }\n\n    if (transientServerEntityID && serverEntities[transientServerEntityID]) {\n      servers.push(serverEntities[transientServerEntityID]);\n    }\n\n    return servers;\n  }\n);\n\nexport default selectServers;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport createShallowEqualSelector from 'app/js/stores/selectors/createShallowEqualSelector';\n\nexport function createStableServer(server: any) {\n  if (!server) {\n    return null;\n  }\n\n  return {\n    entityID: server.entityID,\n    machineIdentifier: server.machineIdentifier,\n    version: server.version,\n    friendlyName: server.friendlyName,\n    sourceTitle: server.sourceTitle,\n    allowSync: server.allowSync,\n    allowMediaDeletion: server.allowMediaDeletion,\n    backgroundProcessing: server.backgroundProcessing,\n    transcoderVideo: server.transcoderVideo,\n    isConnected: server.isConnected,\n    isUnavailable: server.isUnavailable,\n    isFullServer: server.isFullServer,\n    isFullOwnedServer: server.isFullOwnedServer,\n    isOutOfDate: server.isOutOfDate,\n    isCloud: server.isCloud,\n    isShared: server.isShared,\n    livetv: server.livetv,\n    ownerId: server.ownerId,\n    ownerFeatures: server.ownerFeatures,\n  };\n}\n\n// This selector is used frequently in metadata list items. Rather than create a\n// unique selector for each component in order for reselect to memoize\n// correctly, add a layer of memoization on top of reselect using the entity id\n// since there is a small set of stable servers. This allows all metadata list\n// items to reuse the same selector.\n\nconst memo = {};\n\nfunction createStableServerSelector() {\n  return createSelector(\n    (appState: any, serverEntityID: any) =>\n      appState.entities.servers[serverEntityID],\n    createStableServer\n  );\n}\n\nexport default function selectStableServer(\n  appState: any,\n  { serverEntityID }: any\n) {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  let selector = memo[serverEntityID];\n\n  if (!selector) {\n    selector = createShallowEqualSelector(\n      createStableServerSelector(),\n      (server) => server\n    );\n\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    memo[serverEntityID] = selector;\n  }\n\n  return selector(appState, serverEntityID);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function selectDeviceSettings(appState: any) {\n  return appState.deviceSettings;\n}\n","import createDeepEqualSelector from 'app/js/stores/selectors/createDeepEqualSelector';\nimport selectAllProviderEntities from 'app/js/stores/selectors/provider/selectAllProviderEntities';\nimport selectAllServerEntities from 'app/js/stores/selectors/server/selectAllServerEntities';\nimport selectManageableServerEntityIDs from 'app/js/stores/selectors/server/selectManageableServerEntityIDs';\nimport getDirectoryUpgrade from 'app/js/utils/server/getDirectoryUpgrade';\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\nimport { Provider } from 'app/js/v4/core/providers/providersTypes';\nimport { ContentDirectory } from 'app/js/views/v3/helpers/props/shapes/contentDirectoryShape';\nimport getProvidersContentDirectories from 'app/js/views/v3/helpers/provider/getProvidersContentDirectories';\n\nexport type LibraryUpgradeTuple = [\n  machineIdentifier: string,\n  serverEntityID: string,\n  providerEntityID: string,\n  contentDirectory: ContentDirectory\n];\n\nconst selectAvailableLibraryUpgrades = createDeepEqualSelector(\n  selectManageableServerEntityIDs,\n  selectAllServerEntities,\n  selectAllProviderEntities,\n  (serverEntityIDs: string[], serverEntities: any, providerEntities: any) => {\n    return serverEntityIDs.reduce<LibraryUpgradeTuple[]>(\n      (acc, serverEntityID: string) => {\n        const server = serverEntities[serverEntityID];\n\n        const providers: Provider[] = server.providers.map(\n          (providerEntityID: string) => providerEntities[providerEntityID]\n        );\n\n        const contentDirectories = getProvidersContentDirectories(providers, [\n          metadataTypes.MOVIE,\n          metadataTypes.SHOW,\n          metadataTypes.ARTIST,\n        ]);\n\n        const upgradeableTuples = contentDirectories\n          .map(([providerEntityID, contentDirectory]) => {\n            const upgrade = getDirectoryUpgrade(server, contentDirectory);\n            const result: [string, ContentDirectory, boolean] = [\n              providerEntityID,\n              contentDirectory,\n              upgrade.hasPlexMusicUpgrade ||\n                upgrade.hasPlexMovieUpgrade ||\n                upgrade.hasPlexSeriesUpgrade,\n            ];\n            return result;\n          })\n          .filter(([, , hasAvailableUpgrade]) => hasAvailableUpgrade);\n\n        if (upgradeableTuples.length > 0) {\n          upgradeableTuples.forEach(([providerEntityID, contentDirectory]) => {\n            acc.push([\n              server.machineIdentifier,\n              serverEntityID,\n              providerEntityID,\n              contentDirectory,\n            ]);\n          });\n        }\n\n        return acc;\n      },\n      []\n    );\n  }\n);\n\nexport default selectAvailableLibraryUpgrades;\n","import { ContentDirectory } from 'app/js/views/v3/helpers/props/shapes/contentDirectoryShape';\nimport findProviderContentFeature from 'app/js/views/v3/helpers/provider/findProviderContentFeature';\n\nexport default function getProvidersContentDirectories(\n  providers: unknown[],\n  types: string[]\n): [string, ContentDirectory][] {\n  return providers.reduce<[string, ContentDirectory][]>((acc, provider) => {\n    const contentFeature = findProviderContentFeature(provider);\n    const directories: ContentDirectory[] = contentFeature\n      ? contentFeature.directories\n      : [];\n\n    directories\n      .filter((directory) => directory.type && types.includes(directory.type))\n      .map<[string, ContentDirectory]>((directory) => [\n        (provider as { entityID: string }).entityID,\n        directory,\n      ])\n      .forEach((tuple) => {\n        acc.push(tuple);\n      });\n\n    return acc;\n  }, []);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectUser from './selectUser';\n\nconst memo = {};\n\nexport default function createUserAttributeSelector(attribute: any) {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  if (memo[attribute]) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    return memo[attribute];\n  }\n\n  const selector = createSelector(selectUser, (user) => user[attribute]);\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  memo[attribute] = selector;\n\n  return selector;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction selectAuthCodeExchange(appState: any) {\n  return appState.ui.authCodeExchange;\n}\n\nexport default selectAuthCodeExchange;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function selectIsAnonymousUser(appState: any) {\n  return !!appState.user.anonymous;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function selectUser(appState: any) {\n  return appState.user;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectUser from './selectUser';\n\nconst selectUserExperienceSettings = createSelector(selectUser, (user) => {\n  return user.experienceSettings;\n});\n\nexport default selectUserExperienceSettings;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport mapUserFeaturesByUUID from 'app/js/utils/user/mapUserFeaturesByUUID';\nimport createUserAttributeSelector from './createUserAttributeSelector';\n\nconst selectUserFeaturesByUUID = createSelector(\n  createUserAttributeSelector('features'),\n  (features) => mapUserFeaturesByUUID(features || [])\n);\n\nexport default selectUserFeaturesByUUID;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport mapToObject from 'app/js/utils/array/mapToObject';\n\nfunction mapUserFeaturesByUUID(userFeatures: any) {\n  return mapToObject(\n    userFeatures,\n    (feature: any) => feature.uuid,\n    () => true\n  );\n}\n\nexport default mapUserFeaturesByUUID;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectUserExperienceSettings from 'app/js/stores/selectors/user/selectUserExperienceSettings';\n\nconst selectUserLanguage = createSelector(\n  selectUserExperienceSettings,\n  ({ language }) => language\n);\n\nexport default selectUserLanguage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\n// BaseClass is a class that can be extended, which allows for the easy\n// implementation of inheritance and mixins using the prototype.\n\n// Derived from the extend method used by Backbone.\nconst extend = function (protoProps: any, staticProps: any) {\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  const self = this;\n  let child: any;\n\n  // The constructor function for the new subclass is either defined by you\n  // (the \"constructor\" property in your `extend` definition), or defaulted\n  // by us to simply call the self's constructor.\n  if (protoProps && _.has(protoProps, 'constructor')) {\n    child = protoProps.constructor;\n\n    if (__DEV__ && !/^function\\s*\\w*\\(/.test(child.toString())) {\n      // See: https://github.com/plexinc/plex-web-client/pull/13366#issuecomment-461696398\n      throw new Error(\n        'BaseClass constructor must be constructable; use long-hand declaration `constructor: function (`'\n      );\n    }\n  } else {\n    child = function () {\n      // Opera has some problems returning from a constructor when Dragonfly isn't running.\n      // The || null seems to  be sufficient to stop it misbehaving. Found by ExtJS team.\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      // eslint-disable-next-line prefer-rest-params\n      return self.apply(this, arguments) || null;\n    };\n  }\n\n  // Add static properties to the constructor function, if supplied.\n  _.extend(child, self, staticProps);\n\n  // Set the prototype chain to inherit from `self`, without calling\n  // `self`'s constructor function.\n  const Surrogate = function () {\n    // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n    this.constructor = child;\n  };\n  Surrogate.prototype = self.prototype;\n  // @ts-expect-error ts-migrate(7009) FIXME: 'new' expression, whose target lacks a construct s... Remove this comment to see the full error message\n  child.prototype = new Surrogate();\n\n  if (protoProps && protoProps.hasOwnProperty('mixins')) {\n    let mixins = protoProps.mixins;\n\n    // Remove the mixins so they are not added to the prototype as\n    // a mixins property.\n    delete protoProps.mixins;\n\n    // Convert mixins to an array if it is not already, so we can loop over\n    // each mixin and add their properties to the prototype.\n    if (!Array.isArray(mixins)) {\n      mixins = [mixins];\n    }\n\n    _.each(mixins, function (mixin) {\n      _.extend(child.prototype, mixin);\n    });\n  }\n\n  // Add prototype properties (instance properties) to the subclass,\n  // if supplied.\n  if (protoProps) {\n    _.extend(child.prototype, protoProps);\n  }\n\n  // Set a convenience property in case the self's prototype is needed\n  // later.\n  child.__super__ = self.prototype;\n\n  return child;\n};\n\nfunction BaseClass() {\n  // If an initialize function is provided, call it after the constructor\n  // with the arguments passed to the constructor.\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  if (_.isFunction(this.initialize)) {\n    // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n    // eslint-disable-next-line prefer-rest-params, prefer-spread\n    this.initialize.apply(this, arguments);\n  }\n}\n\nBaseClass.extend = extend;\n\nexport default BaseClass;\n","export default function mapToObject<Value, MappedValue>(\n  array: Value[],\n  mapKey: (value: Value, i: number, array: Value[]) => number | string,\n  mapValue: (value: Value, i: number, array: Value[]) => MappedValue\n): { [key: string]: MappedValue } {\n  return array.reduce<{ [key: string]: MappedValue }>(\n    (acc, object: Value, i: number) => {\n      acc[mapKey(object, i, array)] = mapValue(object, i, array);\n      return acc;\n    },\n    {}\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport log from 'app/js/utils/log/log';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst Cache = BaseClass.extend({\n  //\n  // Properties\n\n  mixins: eventMixin,\n\n  maxCycles: 3,\n  maxSize: 50,\n\n  isListening: false,\n\n  //\n  // Init\n\n  initialize: function () {\n    this._cache = {};\n    this.size = 0;\n    this.cycles = [];\n\n    this.cycle();\n  },\n\n  startListening: function () {\n    if (this.isListening) {\n      return;\n    }\n\n    this.isListening = true;\n\n    this.listenTo(dispatcher, {\n      'cycle:cache': this.cycle,\n      'clearWhere:cache': this.clearWhere,\n      'clearAll:cache': this.clearAll,\n      'clearCycles:cache': this.clearCycles,\n    });\n  },\n\n  //\n  // Control\n\n  get: function (key: any) {\n    const item = this._cache[key];\n\n    // Move the item to the first cycle when it is retrieved.\n    if (item && item._cacheCycle) {\n      this.setItemCycle(item, key, _.first(this.cycles));\n    }\n\n    return item;\n  },\n\n  store: function (item: any, key: any) {\n    key || (key = this.getItemCacheKey(item));\n\n    // If the item already exists in the cache, remove it before storing it\n    // again with an updated cache key.\n    this.remove(item);\n\n    if (!key) {\n      return;\n    }\n\n    // Only start cycling and clearing the cache once an item has been added\n    // to the cache.\n    this.startListening();\n\n    item._cacheKey = key;\n    this._cache[key] = item;\n    this.size++;\n\n    if (!item.persistInCache) {\n      this.setItemCycle(item, key, _.first(this.cycles));\n    }\n  },\n\n  getItemCacheKey: function (item: any) {\n    return _.result(item, 'cacheKey');\n  },\n\n  setItemCycle: function (item: any, key: any, cycle: any) {\n    const previous = item._cacheCycle;\n\n    if (previous && previous.hasOwnProperty(key)) {\n      delete previous[key];\n    }\n\n    item._cacheCycle = cycle;\n    cycle[key] = item;\n  },\n\n  cycle: function () {\n    // If the cache has overflowed, remove everything except for items\n    // stored in the newest cycle.\n    if (this.size > this.maxSize) {\n      log.warn('Cache overflow, size: ' + this.size);\n      _.each(this.cycles.slice(1), this.removeCycle, this);\n    }\n\n    // Start the next cycle.\n    this.cycles.unshift({});\n\n    // If we have reached our cycles limit, remove the oldest cycle.\n    if (this.cycles.length > Math.max(this.maxCycles, 1)) {\n      this.removeCycle(_.last(this.cycles));\n    }\n  },\n\n  remove: function (item: any) {\n    if (!item || !item._cacheKey) {\n      return;\n    }\n\n    const key = item._cacheKey;\n\n    if (this._cache.hasOwnProperty(key)) {\n      delete this._cache[key];\n      this.size--;\n    }\n\n    if (item._cacheCycle) {\n      if (item._cacheCycle.hasOwnProperty(key)) {\n        delete item._cacheCycle[key];\n      }\n\n      delete item._cacheCycle;\n    }\n\n    delete item._cacheKey;\n  },\n\n  removeCycle: function (cycle: any) {\n    _.each(_.values(cycle), this.remove, this);\n\n    const i = _.indexOf(this.cycles, cycle);\n    this.cycles.splice(i, 1);\n  },\n\n  clearWhere: function (attrs: any) {\n    const matchingItems = _.where(_.values(this._cache), attrs);\n\n    _.each(matchingItems, this.remove, this);\n  },\n\n  clearAll: function () {\n    _.each(_.values(this._cache), this.remove, this);\n\n    this.cycles.length = 0;\n    this.cycle();\n\n    this.stopListening();\n    this.isListening = false;\n  },\n\n  clearCycles: function () {\n    const cycles = this.cycles;\n\n    while (cycles.length) {\n      this.removeCycle(cycles[cycles.length - 1]);\n    }\n\n    this.cycle();\n  },\n});\n\nexport default Cache;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport Cache from 'app/js/utils/cache/Cache';\n\nconst CollectionCache = Cache.extend({\n  //\n  // Properties\n\n  maxCycles: 3,\n  maxSize: 20,\n\n  //\n  // Control\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'key' is declared but its value is never read.\n  get: function (key: any) {\n    // eslint-disable-next-line prefer-rest-params\n    const collection = Cache.prototype.get.apply(this, arguments);\n\n    if (collection) {\n      collection.every(function (model: any) {\n        if (!model.cache || !model.cache.isListening) {\n          return false;\n        }\n\n        // Cached collections should ensure that all of their models are\n        // also in the cache when appropriate. This is because the\n        // collection cache may have a different maximum number of cycles.\n        model.cache.store(model);\n        return true;\n      });\n    }\n\n    return collection;\n  },\n\n  getItemCacheKey: function (collection: any) {\n    let url = _.result(collection, 'url');\n\n    if (collection.server) {\n      url = collection.server.getScopedKey(url);\n    }\n\n    if (collection.provider) {\n      url = collection.provider.getScopedKey(url);\n    }\n\n    return url;\n  },\n});\n\nexport default CollectionCache;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport capabilities from 'app/js/utils/device/capabilities';\nimport Cache from './Cache';\n\nconst ImageCache = Cache.extend({\n  //\n  // Properties\n  maxCycles: 3,\n  maxSize: 50,\n  imageParamsRegex: /&?(size|scale|width|height)=([^&]+)/g,\n  //\n  // Init\n  initialize: function () {\n    // eslint-disable-next-line prefer-rest-params\n    Cache.prototype.initialize.apply(this, arguments);\n    this._infoMemo = {};\n  },\n  //\n  // Control\n  store: function (item: any, key: any) {\n    key || (key = this.getItemCacheKey(item));\n    if (!key) {\n      return;\n    }\n    const url = item.url;\n    const info = this.getImageInfo(url);\n    const image = { url: url, blobUrl: item.blobUrl, size: info.size };\n    let cachedItem = this.get(key);\n    if (cachedItem) {\n      if (!cachedItem.images.hasOwnProperty(url)) {\n        const sizes = cachedItem.sizes;\n        cachedItem.images[url] = image;\n        // Keep the sizes array sorted by size so we can easily find\n        // alternate sizes to act as placeholders for uncached images.\n        const i = _.sortedIndex(sizes, image, 'size');\n        sizes.splice(i, 0, image);\n      }\n    } else {\n      cachedItem = {\n        images: {},\n        sizes: [image],\n      };\n      cachedItem.images[url] = image;\n      // Only start cycling and clearing the cache once an item has been\n      // added to the cache.\n      this.startListening();\n      cachedItem._cacheKey = key;\n      this._cache[key] = cachedItem;\n      this.size++;\n      if (!item.persistInCache) {\n        this.setItemCycle(cachedItem, key, _.first(this.cycles));\n      }\n    }\n  },\n  getItemCacheKey: function (item: any) {\n    const info = this.getImageInfo(item.url);\n    return info.key;\n  },\n  getImageInfo: function (url: any) {\n    if (this._infoMemo.hasOwnProperty(url)) {\n      return this._infoMemo[url];\n    }\n    const params = { width: '0', scale: '1' };\n    const key = url.replace(\n      this.imageParamsRegex,\n      function (\n        // @ts-expect-error ts-migrate(6133) FIXME: 'match' is declared but its value is never read.\n        match: any,\n        name: any,\n        value: any\n      ) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        params[name] = value;\n        return '';\n      }\n    );\n    const sizeParts = (params as any).size && (params as any).size.split('-');\n    const width =\n      sizeParts && sizeParts.length === 2\n        ? sizeParts[1]\n        : parseInt(params.width, 10);\n    const info = {\n      key: key,\n      size: width * parseInt(params.scale, 10),\n    };\n    this._infoMemo[url] = info;\n    return info;\n  },\n  removeImageInfo: function (url: any) {\n    if (this._infoMemo.hasOwnProperty(url)) {\n      delete this._infoMemo[url];\n    }\n  },\n  getBlobUrl: function (url: any) {\n    const info = this.getImageInfo(url);\n    const item = this.get(info.key);\n    if (item) {\n      const image = item.images[url];\n      if (image) {\n        return image.blobUrl;\n      }\n    }\n  },\n  getPlaceholder: function (url: any) {\n    // If we have another resolution for the same image, use that as a\n    // placeholder while we wait for the larger image to load.\n    const info = this.getImageInfo(url);\n    const item = this.get(info.key);\n    if (item) {\n      // If we already have this exact image cached, we don't need to use a\n      // placeholder.\n      if (item.images[url]) {\n        return;\n      }\n      const largestCachedImage = _.last(item.sizes);\n      return largestCachedImage.blobUrl;\n    }\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  remove: function (item: any, options: any) {\n    // eslint-disable-next-line prefer-rest-params\n    Cache.prototype.remove.apply(this, arguments);\n    _.each(\n      item.sizes,\n      function (image) {\n        // Clean up the info memo when revoking the blob url so it doesn't\n        // endlessly grow.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.removeImageInfo(image.url);\n        if (capabilities.hasObjectUrl) {\n          window.URL.revokeObjectURL(image.blobUrl);\n        }\n      },\n      this\n    );\n  },\n});\nexport default ImageCache;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport Cache from 'app/js/utils/cache/Cache';\n\nconst ModelCache = Cache.extend({\n  //\n  // Properties\n\n  maxCycles: 5,\n  maxSize: 100,\n\n  //\n  // Control\n\n  getItemCacheKey: function (model: any, attributes: any) {\n    if (_.isFunction(model.cacheKey)) {\n      attributes || (attributes = model.toJSON());\n\n      return model.cacheKey(attributes);\n    }\n  },\n});\n\nexport default ModelCache;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const FREEBASE = 'com.plexapp.agents.freebase';\nexport const IMDB = 'com.plexapp.agents.imdb';\nexport const LASTFM = 'com.plexapp.agents.lastfm';\nexport const LYRICFIND = 'com.plexapp.agents.lyricfind';\nexport const NONE = 'com.plexapp.agents.none';\nexport const PLEXPREMIUMMUSIC = 'com.plexapp.agents.plexmusic';\nexport const PLEXMUSIC = 'tv.plex.agents.music';\nexport const PLEXMOVIE = 'tv.plex.agents.movie';\nexport const PLEX_PERSONAL_MEDIA_AGENT = 'tv.plex.agents.none';\nexport const PLEXGAME = 'tv.plex.agents.game';\nexport const PLEXSERIES = 'tv.plex.agents.series';\nexport const THEMOVIEDB = 'com.plexapp.agents.themoviedb';\nexport const THETVDB = 'com.plexapp.agents.thetvdb';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const ERROR = 'error';\nexport const SUCCESS = 'success';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const DEPRECATED_NONE = 100;\n\nexport const NORMALIZED = 100;\n\nexport const UNNORMALIZED = 700;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const WEB_APP_URL = 'https://app.plex.tv';\nexport const ATTRIBUTED_SIGN_UP_URL = 'https://plex.tv/go/{attribution}';\nexport const FORUMS_URL = 'https://forums.plex.tv';\nexport const LINK_URL = 'https://plex.tv/link';\nexport const METRICS_URL = 'https://analytics.plex.tv';\nexport const METRICS_DEVELOPMENT_URL = 'https://analytics-stage.plex.tv';\nexport const SIGN_UP_URL = 'https://plex.tv/sign-up';\nexport const MEDIA_SERVER_DOWNLOADS =\n  'https://www.plex.tv/media-server-downloads';\nexport const PLEX_APP_DOWNLOADS = `${MEDIA_SERVER_DOWNLOADS}/#plex-app`;\nexport const SYSTEM_STATUS_URL = 'https://status.plex.tv';\nexport const PRIVACY_POLICY_TEXT_URL =\n  'https://www.plex.tv/wp-json/plex/v1/privacy_policy';\nexport const TERMS_OF_SERVICE_TEXT_URL =\n  'https://www.plex.tv/wp-json/plex/v1/terms_of_service';\nexport const THIRD_PARTY_POLICY_TEXT_URL =\n  'https://www.plex.tv/wp-json/plex/v1/third_party';\nexport const TIDAL_URL = 'https://www.plex.tv/tidal';\nexport const PRIVACY_POLICY_URL = 'https://www.plex.tv/privacy';\n\n// Support URLs\nexport const SUPPORT_DISPLAY_URL = 'https://support.plex.tv';\nexport const SUPPORT_URL_PARAMS =\n  '?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps';\nexport const SUPPORT_URL = SUPPORT_DISPLAY_URL + SUPPORT_URL_PARAMS;\n\nexport const PLEX_WEB_CUSTOMIZATION_SUPPORT_URL =\n  'https://support.plex.tv/articles/customizing-plex-web/' + SUPPORT_URL_PARAMS;\n\nexport const SUPPORTED_TUNERS_SUPPORT_URL =\n  'https://support.plex.tv/articles/225877427-supported-dvr-tuners-and-antennas/' +\n  SUPPORT_URL_PARAMS;\n\nexport const COMMUNITY_TUNERS_SUPPORT_URL =\n  'https://support.plex.tv/articles/community-supported-tuners/' +\n  SUPPORT_URL_PARAMS;\n\nexport const PLEX_HOME_SETUP_SUPPORT_URL =\n  'https://support.plex.tv/hc/en-us/articles/204234313-Example-Plex-Home-Setup/' +\n  SUPPORT_URL_PARAMS;\n\nexport const SECURE_CONNECTIONS_SUPPORT_URL =\n  'https://support.plex.tv/articles/206225077-how-to-use-secure-server-connections/' +\n  SUPPORT_URL_PARAMS;\n\nexport const AUDIO_SUBTITLE_SUPPORT_URL =\n  'https://support.plex.tv/articles/204985278-account-audio-subtitle-language-settings/' +\n  SUPPORT_URL_PARAMS;\n\nexport const WEBHOOKS_SUPPORT_URL =\n  'https://support.plex.tv/hc/en-us/articles/115002267687-Webhooks/' +\n  SUPPORT_URL_PARAMS;\n\nexport const SHARE_RESTRICTIONS_SUPPORT_URL =\n  'https://support.plex.tv/articles/204232573-restricting-the-shares/';\n\nexport const METADATA_AGENTS_SUPPORT_URL =\n  'https://support.plex.tv/articles/200241558-agents/';\n\nexport const OTHER_SERVICES_PATH = '/users/other-services';\nexport const OTHER_SERVICES_DISPLAY_URL = `plex.tv${OTHER_SERVICES_PATH}`;\nexport const OTHER_SERVICES_URL = `https://plex.tv${OTHER_SERVICES_PATH}`;\n\nexport const LOCAST_LINK_URL = 'https://app.plex.tv/locast';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function getPixelRatio() {\n  return (\n    ((window as any).viewport && (window as any).viewport.pixelRatio) ||\n    window.devicePixelRatio ||\n    1\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst httpFallbackOptions = {\n  NEVER: 'never',\n  SAME_NETWORK: 'samenetwork',\n  ALWAYS: 'always',\n};\n// See: app/desktop/common/translations/en.manual.json\n(httpFallbackOptions as any).settings = [\n  {\n    value: httpFallbackOptions.NEVER,\n    title: 'Never',\n  },\n  {\n    value: httpFallbackOptions.SAME_NETWORK,\n    title: 'On same network as server',\n  },\n  {\n    value: httpFallbackOptions.ALWAYS,\n    title: 'Always',\n  },\n];\nexport default httpFallbackOptions;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const SMALL_60 = 'small-60';\nexport const SMALL_120 = 'small-120';\nexport const MEDIUM_240 = 'medium-240';\nexport const MEDIUM_360 = 'medium-360';\nexport const LARGE_480 = 'large-480';\nexport const LARGE_720 = 'large-720';\nexport const LARGE_1280 = 'large-1280';\nexport const LARGE_1920 = 'large-1920';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const BACKSPACE = 8;\nexport const TAB = 9;\nexport const ENTER = 13;\nexport const SHIFT = 16;\nexport const CONTROL = 17;\nexport const ESCAPE = 27;\nexport const LEFT_ARROW = 37;\nexport const UP_ARROW = 38;\nexport const RIGHT_ARROW = 39;\nexport const DOWN_ARROW = 40;\nexport const META_1 = 91;\nexport const META_2 = 93;\nexport const META_3 = 224;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const CLAIM = 'claim';\nexport const DISMISS = 'dismiss';\nexport const SKIP = 'skip';\nexport const CONFIRM = 'confirm';\nexport const SELECT = 'select';\nexport const CANCEL = 'cancel';\nexport const LEARN = 'learn';\nexport const COMPLETE = 'complete';\n\n//\n// Metadata\n\nexport const PLAY = 'play';\nexport const SHUFFLE = 'shuffle';\nexport const PLAY_ALL = 'playAll';\nexport const PLAY_VERSION = 'playVersion';\nexport const PLAY_PRIMARY_EXTRA = 'playPrimaryExtra';\nexport const PLAY_RELATED_MIX = 'playRelatedMix';\nexport const PLAY_ARTIST_TV = 'playArtistTV';\nexport const QUEUE_RELATED_MIX = 'queueRelatedMix';\nexport const PLAY_NEXT = 'playNext';\nexport const ADD_TO_QUEUE = 'addToQueue';\nexport const ADD_TO_PLAYLIST = 'addToPlaylist';\nexport const ADD_TO_COLLECTION = 'addToCollection';\nexport const REMOVE_FROM_PLAYLIST = 'removeFromPlaylist';\nexport const REMOVE_FROM_COLLECTION = 'removeFromCollection';\nexport const EDIT = 'edit';\nexport const EDIT_FILTERS = 'editFilters';\nexport const MARK_AS_WATCHED = 'markAsWatched';\nexport const MARK_AS_UNWATCHED = 'markAsUnwatched';\nexport const REFRESH = 'refresh';\nexport const ANALYZE = 'analyze';\nexport const FIX_MATCH = 'fixMatch';\nexport const UNMATCH = 'unmatch';\nexport const MERGE = 'merge';\nexport const SPLIT_APART = 'splitApart';\nexport const OPTIMIZE = 'optimize';\nexport const DOWNLOAD_FILE = 'downloadFile';\nexport const SHARE = 'share';\nexport const DELETE = 'delete';\nexport const GET_INFO = 'getInfo';\nexport const RATE = 'rate';\nexport const SELECT_STREAM = 'selectStream';\nexport const ADD_TO_LIBRARY = 'addToLibrary';\nexport const ADD_TO_SAVED = 'addToSaved';\nexport const REMOVE_FROM_SAVED = 'removeFromSaved';\nexport const ADD_TO_WATCHLIST = 'addToWatchlist';\nexport const REMOVE_FROM_WATCHLIST = 'removeFromWatchlist';\nexport const REMOVE_FROM_CONTINUE_WATCHING = 'removeFromContinueWatching';\n\n//\n// Server\n\nexport const SELECT_SERVER = 'selectServer';\nexport const OPTIMIZE_DATABASE = 'optimizeDatabase';\nexport const CLEAN_BUNDLES = 'cleanBundles';\nexport const EMPTY_TRASH = 'emptyTrash';\nexport const DELETE_SERVER = 'deleteServer';\n\n//\n// Library\n\nexport const ADD_LIBRARY = 'addLibrary';\nexport const UPDATE_LIBRARY = 'updateLibrary';\nexport const CANCEL_LIBRARY_UPDATE = 'cancelLibraryUpdate';\nexport const FORCE_REFRESH_LIBRARY = 'forceRefreshLibrary';\nexport const EDIT_LIBRARY = 'editLibrary';\nexport const ANALYZE_LIBRARY = 'analyzeLibrary';\nexport const DELETE_LIBRARY = 'deleteLibrary';\n\n//\n// Source\n\nexport const PIN_TO_NAV = 'pinToNav';\nexport const UNPIN_FROM_NAV = 'unpinFromNav';\nexport const REORDER_NAV = 'reorderNav';\nexport const SELECT_SOURCE = 'selectSource';\nexport const SELECT_TAB = 'selectTab';\n\n//\n// Setup\n\nexport const DOWNLOAD_SERVER = 'downloadServer';\nexport const WHATS_THIS = 'whatsThis';\nexport const OPT_OUT_METRICS = 'optOutMetrics';\nexport const REMOTE_ACCESS = 'remoteAccess';\nexport const SELECT_PREFERRED_SERVER = 'selectPreferredServer';\n\n//\n// Plex Pass\n\nexport const SUBSCRIBE = 'subscribe';\n\n//\n// Media Subscriptions\n\nexport const ADD_SUBSCRIPTION = 'addSubscription';\nexport const EDIT_SUBSCRIPTION = 'editSubscription';\nexport const REMOVE_SUBSCRIPTION = 'removeSubscription';\n\n//\n// Upsells\n\nexport const UPSELL_TIDAL = 'upsellTidal';\nexport const UPSELL_STREAMING_SERVICES = 'upsellStreamingServices';\n\n//\n// Ad Consent\n\nexport const AGREE = 'agree';\nexport const DISAGREE = 'disagree';\n\n//\n// Users\nexport const SWITCH_USER = 'switchUser';\n\n//\n// Profile\nexport const CHANGE_USERNAME = 'username';\nexport const CHANGE_DISPLAY_NAME = 'username';\nexport const CHANGE_PROFILE_PHOTO = 'setAvatar';\n\n//\n// Friends\nexport const ADD_FRIEND = 'addFriend';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const PICKER = 'picker';\nexport const FALLBACK = 'fallback';\nexport const STARTUP = 'startup';\nexport const SERVER = 'server';\nexport const LIBRARY = 'library';\nexport const LIST = 'list';\nexport const SELECTION = 'selection';\nexport const SETTINGS = 'settings';\nexport const SETUP_WIZARD = 'setupWizard';\nexport const SERVER_DOWNLOAD = 'serverDownload';\nexport const AGENDA = 'agenda';\nexport const CALENDAR = 'calendar';\nexport const NAV_BAR = 'navBar';\nexport const COMPANION = 'companion';\nexport const DVR_SETUP = 'dvrSetup';\nexport const USERS_AND_SHARING = 'usersAndSharing';\nexport const DISCOVER_PIVOT = 'content.discover';\nexport const LIBRARY_PIVOT = 'content.library';\nexport const PLAYLISTS_PIVOT = 'content.playlists';\nexport const COLLECTIONS_PIVOT = 'content.collections';\nexport const TIMELINE_PIVOT = 'content.timeline';\nexport const DVR_DISCOVER_PIVOT = 'content.dvr.discover';\nexport const DVR_GUIDE_PIVOT = 'content.dvr.guide';\nexport const DVR_SCHEDULE_PIVOT = 'content.dvr.schedule';\nexport const WATCHLIST = 'content.watchlist';\nexport const HDR_CONVERSION = 'hdr-conversion';\nexport const SELF = 'self';\nexport const FRIEND = 'friend';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const CLIENT_ATTRIBUTION = 'client:attribution';\nexport const CLIENT_CLAIM_SERVER = 'client:claimServer';\nexport const CLIENT_CLAIM_SERVER_FAILURE = 'client:claimServerFailure';\nexport const CLIENT_CLICK = 'client:click';\nexport const CLIENT_DOWNLOAD = 'client:download';\nexport const CLIENT_MMP_START = 'client:mmp:start';\nexport const CLIENT_RELAY_TESTED = 'client:relayTested';\nexport const CLIENT_SEARCH = 'client:search';\nexport const CLIENT_SELECT_SOURCE = 'client:selectsource';\nexport const CLIENT_SETTING = 'client:setting';\nexport const CLIENT_SHUTDOWN = 'client:shutdown';\nexport const CLIENT_SIGN_IN = 'client:signin';\nexport const CLIENT_SIGN_OUT = 'client:signout';\nexport const CLIENT_SIGN_UP = 'client:signup';\nexport const CLIENT_START = 'client:start';\nexport const CLIENT_SWITCH_USER = 'client:switchuser';\nexport const CLIENT_VIEW = 'client:view';\nexport const CLIENT_VOICE = 'client:voice';\nexport const CLIENT_UPSELL = 'client:upsell';\nexport const DEVICE_SEEN = 'device:seen';\nexport const PLAYBACK_FAILURE = 'playback:failure';\nexport const PLAYBACK_ITEM_END = 'playback:itemend';\nexport const PLAYBACK_ITEM_RESTART = 'playback:itemrestart';\nexport const PLAYBACK_ITEM_START = 'playback:itemstart';\nexport const PLAYBACK_SESSION_END = 'playback:sessionend';\nexport const WATCH_TOGETHER_CREATED = 'watchtogether:created';\nexport const WATCH_TOGETHER_JOINED = 'watchtogether:joined';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const HOME = 'home';\nexport const SOURCE = 'source';\nexport const DISCOVER = 'discover';\nexport const LIBRARY = 'library';\nexport const PRE_PLAY = 'preplay';\nexport const PLAYLISTS = 'playlists';\nexport const SEARCH_RESULTS = 'searchResults';\nexport const QUICK_SEARCH_RESULTS = 'quickSearchResults';\nexport const METADATA_LIST = 'metadataList';\nexport const PLAYER = 'player';\nexport const ACCOUNT = 'account';\nexport const PLEX_PASS = 'plexpass';\nexport const SIGN_IN = 'signIn';\nexport const SIGN_UP = 'signUp';\nexport const SIGN_OUT = 'signOut';\nexport const SETUP_WIZARD = 'setupWizard';\nexport const DOWNLOADS = 'downloads';\nexport const UNCLAIMED_SERVER = 'unclaimedServer';\nexport const CHANNELS = 'channels';\nexport const METADATA_SETTINGS = 'metadataSettings';\nexport const STATUS = 'status';\nexport const DEVICES = 'devices';\nexport const SUBTITLES = 'subtitles';\nexport const SUBTITLES_UPLOAD = 'subtitlesUpload';\nexport const STOP_SERVER_SESSION = 'stopServerSession';\nexport const STOP_SERVER_SESSION_ERROR = 'stopServerSessionError';\nexport const PLAY_HISTORY = 'playHistory';\nexport const SIDEBAR = 'sidebar';\nexport const WHATS_NEW = 'whatsNew';\nexport const SHARED_ITEMS = 'sharedItems';\nexport const RELEASE_NOTES = 'releaseNotes';\nexport const PHOTO_TIMELINE = 'photoTimeline';\nexport const UNKNOWN = 'unknown';\nexport const ADD_TO_PLAYLIST = 'addToPlaylist';\nexport const WATCH_TOGETHER_INVITE = 'watchTogetherInvite';\nexport const WATCH_TOGETHER_ITEM_ERROR = 'watchTogetherItemError';\nexport const PROFILE = 'userProfile';\nexport const EDIT_PROFILE = 'editProfile';\nexport const FRIENDS = 'friends';\nexport const ADD_FRIEND = 'addFriend';\n\n//\n// Settings\n\nexport const USERS_SHARING = 'usersSharing';\nexport const PLEX_HOME = 'homeUsers';\nexport const MANAGE_LIBRARY_ACCESS = 'shareUsers';\nexport const SHARE = 'share';\nexport const SETTINGS = 'settings';\nexport const SHARING = 'sharing';\nexport const SETTINGS_SIDEBAR = 'settingsSidebar';\n\n//\n// UNO\n\nexport const PREFERRED_SERVER = 'preferredServer';\nexport const PREFERRED_SOURCES = 'preferredSources';\n\n//\n// DVR\n\nexport const DVR_SETTINGS = 'dvrSettings';\nexport const DVR_SETUP = 'dvrSetup';\nexport const DVR_GUIDE = 'dvrGuide';\nexport const DVR_SCHEDULE = 'dvrSchedule';\nexport const DVR_PRIORITY = 'dvrPriority';\nexport const DVR_MANAGE_CHANNELS = 'dvrManageChannels';\nexport const DVR_DEVICE_SETTINGS = 'dvrDeviceSettings';\nexport const DVR_AIRING_DETAILS = 'dvrAiringDetails';\nexport const MANAGE_SUBSCRIPTION = 'manageSubscription';\n\n//\n// Confirm Modals\n\nexport const CONFIRM_MARK_AS_WATCHED = 'confirmMarkAsWatched';\nexport const CONFIRM_MARK_AS_UNWATCHED = 'confirmMarkAsUnwatched';\nexport const CONFIRM_DELETE = 'confirmDelete';\nexport const CONFIRM_OPTIMIZE_DATABASE = 'confirmOptimizeDatabase';\nexport const CONFIRM_CLEAN_BUNDLES = 'confirmCleanBundles';\nexport const CONFIRM_EMPTY_TRASH = 'confirmEmptyTrash';\nexport const CONFIRM_DELETE_SERVER = 'confirmDeleteServer';\nexport const CONFIRM_UPGRADE_LIBRARY = 'confirmUpgradeLibrary';\nexport const CONFIRM_ANALYZE_LIBRARY = 'confirmAnalyzeLibrary';\nexport const CONFIRM_FORCE_REFRESH_LIBRARY = 'confirmForceRefreshLibrary';\nexport const CONFIRM_EMPTY_TRASH_LIBRARY = 'confirmEmptyTrashLibrary';\nexport const CONFIRM_DELETE_LIBRARY = 'confirmDeleteLibrary';\nexport const CONFIRM_REMOVE_WEBHOOK = 'confirmRemoveWebhook';\nexport const CONFIRM_UNLINK_OAUTH_PROVIDER = 'confirmUnlinkOauthProvider';\nexport const CONFIRM_REMOVE_DVR = 'confirmRemoveDVR';\nexport const CONFIRM_CLOSE_PLAYER = 'confirmClosePlayer';\nexport const CONFIRM_DELETE_SUBTITLE_STREAM = 'confirmDeleteSubtitleStream';\nexport const CONFIRM_CANCEL_DOWNLOAD = 'confirmCancelDownload';\nexport const CONFIRM_REMOVE_DOWNLOAD = 'confirmRemoveDownload';\nexport const CONFIRM_ADD_TO_HOME = 'confirmAddToHome';\nexport const CONFIRM_RESET_CUSTOMIZATION = 'confirmResetCustomization';\nexport const CONFIRM_ADVERTISING_NOTICE = 'adConsent';\nexport const CONFIRM_UPSELL = 'confirmUpsell';\nexport const CONFIRM_UPDATE_APP = 'confirmUpdateApp';\n\n//\n// Player\n\nexport const CONFIRM_PLAYBACK = 'confirmPlayback';\nexport const CONFIRM_REMOTE_TO_LOCAL_PLAYBACK = 'confirmRemoteToLocalPlayback';\nexport const CONFIRM_LOCAL_TO_REMOTE_PLAYBACK = 'confirmLocalToRemotePlayback';\nexport const PLAY_VERSION = 'playVersion';\nexport const RESUME_PLAYBACK = 'resumePlayback';\nexport const PLAYER_ERROR = 'playerError';\nexport const LIVE_TV_PLAYER_CONFLICT = 'liveTVPlayerConflict';\nexport const LIVE_TV_JOIN_SESSION = 'liveTVJoinSession';\nexport const RELAY_NOTIFICATION = 'relayNotification';\nexport const CAST_API_MISSING = 'castApiMissing';\nexport const AD_CONSENT = 'adConsent';\n\n//\n// Providers\n\nexport const PROVIDER_SETTINGS = 'settings';\nexport const LOCAST_SETUP = 'locastSetup';\n","export const SCROBBLE = 'scrobble';\nexport const SAVE = 'save';\nexport const PICK = 'pick';\nexport const ADD_TO_CATALOG = 'addToCatalog';\nexport const ADD_TO_WATCHLIST = 'addToWatchlist';\nexport const RATE = 'rate';\n","enum providerFeatureTypes {\n  ACTION = 'action',\n  ACTIONS = 'actions',\n  CONTENT = 'content',\n  CONTINUE_WATCHING = 'continuewatching',\n  GRID = 'grid',\n  IMAGE_TRANSCODER = 'imagetranscoder',\n  INTEGRATIONS = 'integrations',\n  LINEUPS = 'lineups',\n  LOCATION = 'location',\n  MANAGE = 'manage',\n  MATCH = 'match',\n  METADATA = 'metadata',\n  PLAY_QUEUE = 'playqueue',\n  PLAYLIST = 'playlist',\n  PROMOTED = 'promoted',\n  RATE = 'rate',\n  SEARCH = 'search',\n  SETTINGS = 'settings',\n  SUBSCRIBE = 'subscribe',\n  TIMELINE = 'timeline',\n  UNIVERSAL = 'universal',\n}\n\nexport default providerFeatureTypes;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const CLOUD_EPG = 'tv.plex.provider.epg';\nexport const EPG = 'tv.plex.providers.epg';\nexport const XMLTV = 'tv.plex.providers.epg.xmltv';\nexport const LIBRARY = 'com.plexapp.plugins.library';\nexport const LIBRARY_SYNC = 'com.plexapp.plugins.library.sync';\nexport const METADATA = 'tv.plex.provider.metadata';\nexport const MUSIC = 'tv.plex.provider.music';\nexport const PODCASTS = 'tv.plex.provider.podcasts';\nexport const VOD = 'tv.plex.provider.vod';\nexport const WEBSHOWS = 'tv.plex.provider.webshows';\nexport const DISCOVER = 'tv.plex.provider.discover';\nexport const HOME_SYNTHETIC = 'synthetic.provider.home';\n\nexport const ALL = [\n  CLOUD_EPG,\n  EPG,\n  XMLTV,\n  LIBRARY,\n  LIBRARY_SYNC,\n  METADATA,\n  MUSIC,\n  PODCASTS,\n  VOD,\n  WEBSHOWS,\n  DISCOVER,\n  HOME_SYNTHETIC,\n];\n\nexport function matches(identifier: any, providerIdentifiers: any) {\n  if (!identifier) {\n    return false;\n  }\n\n  if (!Array.isArray(providerIdentifiers)) {\n    providerIdentifiers = [providerIdentifiers];\n  }\n\n  return providerIdentifiers.some(\n    (providerIdentifier: any) => identifier.indexOf(providerIdentifier) !== -1\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const LIVE_TV = 'livetv';\nexport const STREAM = 'stream';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const PLAYBACK_SPEED = 'playbackSpeed';\nexport const LINEUP = 'lineup';\nexport const RECENT_CHANNELS_IN_GRID = 'recentChannelsInGrid';\nexport const NUM_RECENT_CHANNELS_IN_GRID = 'numRecentChannelsInGrid';\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst proxyTypes = {\n  NORMAL: 0,\n  LOCAL: 42,\n  CLOUD: 43,\n};\n\nexport default proxyTypes;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const PLEX_AUDIOBOOK = 'Plex Audiobook';\nexport const PLEX_ITUNES_SCANNER = 'Plex iTunes Scanner';\nexport const PLEX_MOVIE_SCANNER = 'Plex Movie Scanner';\nexport const PLEX_MUSIC = 'Plex Music';\nexport const PLEX_MOVIE = 'Plex Movie';\nexport const PLEX_SERIES = 'Plex TV Series';\nexport const PLEX_MUSIC_SCANNER = 'Plex Music Scanner';\nexport const PLEX_PHOTO_SCANNER = 'Plex Photo Scanner';\nexport const PLEX_PREMIUM_MUSIC_SCANNER = 'Plex Premium Music Scanner';\nexport const PLEX_SERIES_SCANNER = 'Plex Series Scanner';\nexport const PLEX_VIDEO_FILES_SCANNER = 'Plex Video Files Scanner';\nexport const PLEX_GAME = 'Plex Game';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const UNTESTED = 'untested';\nexport const PENDING = 'pending';\nexport const CONNECTED = 'connected';\nexport const UNAUTHORIZED = 'unauthorized';\nexport const UNAVAILABLE = 'unavailable';\nexport const ABORTED = 'aborted';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const CLOUD_SERVER_ID = 'myPlex';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const AVAILABLE = 'available';\nexport const DONE = 'done';\nexport const DOWNLOADED = 'downloaded';\nexport const DOWNLOADING = 'downloading';\nexport const ERROR = 'error';\nexport const INSTALLING = 'installing';\nexport const NONE = 'none';\nexport const NOTIFY = 'notify';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const ACCOUNT = 'account';\nexport const DOWNLOAD_BUTTON = 'download-button';\nexport const DOWNLOADS_PAGE = 'downloads-page';\nexport const DVR_SETUP = 'dvr-setup';\nexport const LYRICS = 'lyrics';\nexport const NAV_BAR = 'nav-bar';\nexport const SERVER_SETUP = 'server-setup';\nexport const SONOS = 'sonos';\nexport const USERS_AND_SHARING = 'users-and-sharing';\nexport const WEBHOOKS = 'webhooks';\n\nexport const ALL = [\n  ACCOUNT,\n  DOWNLOAD_BUTTON,\n  DOWNLOADS_PAGE,\n  DVR_SETUP,\n  LYRICS,\n  NAV_BAR,\n  SERVER_SETUP,\n  SONOS,\n  USERS_AND_SHARING,\n  WEBHOOKS,\n];\n","enum ReminderType {\n  Relay = 'relay',\n  Upsell = 'upsell',\n  LibraryUpgrade = 'libraryUpgrade',\n}\n\nexport default ReminderType;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const LIVE_TV = 'de789b83-9c5e-4472-bccf-791c69e67500';\nexport const LIVE_TV_REMOTE_PLAYER = '64ed42f8-259d-4957-8530-0fff2d846cd0';\nexport const WEB_SHOWS_REMOTE_PLAYER = '7c4200b1-a2ab-4803-adcd-6c36b22a9269';\nexport const WEBHOOKS = '6f82ca43-6117-4e55-ae0e-5ea3b3e99a96';\nexport const SUBTITLES_ON_DEMAND = 'bb50c92f-b412-44fe-8d8a-b1684f212a44';\nexport const SERVER_DASHBOARD_CHARTS = '222020fb-1504-492d-af33-a0b80a49558a';\nexport const PLEX_PICKS = '4bdcac7b-f25b-43b3-93d8-2bbcb9605fd7';\nexport const ADD_TO_LIBRARY = '644c4466-05fa-45e0-a478-c594cf81778f';\nexport const PLEX_MOVIE_SCANNER = 'f3235e61-c0eb-4718-ac0a-7d6eb3d8ff75';\nexport const GLOBAL_CONTINUE_WATCHING = '4742780c-af9d-4b44-bf5b-7b27e3369aa8';\nexport const UNIVERSAL_WATCHLIST = 'd9528436-ee7c-42e3-ab7b-814f85ef74b4';\n\n// Controls access to the Live TV & DVR setup if the user does not have the DVR owner feature on the server\nexport const LIVE_TV_SETUP = '65685ff8-4375-4e4c-a806-ec1f0b4a8b7f';\n\n// Can be removed once we start making use of the real feature flag, and we\n// retrieve the short name of feature flags\n// https://github.com/plexinc/my-plex/issues/5303\nexport const NON_ANONYMOUS_ACCOUNT = 'nonAnonymousAccount';\n\n// An experiment to bypass the upsell and go directly to the purchase page.\nexport const BYPASS_PLEX_PASS_UPSELL_MODAL =\n  '6aaaf4fc-c55f-4042-92c8-b35f7886d249';\n\n// Controls visibility of Game library creation, playback, and dashboard\n// statistics.\nexport const RETRO_GAMES = '4e27cf82-9fb6-4ebe-8e10-c48bfe6fbbb6';\n\n// Controls visibility of hub reordering and promotion.\nexport const MANAGE_HUBS = '3c376154-d47e-4bbf-9428-2ea2592fd20a';\n\n// Allows user to merge recently added library hubs for a server.\nexport const MERGE_RECENTLY_ADDED = 'f3a99481-9671-4274-a0d3-4c06a72ef746';\n\nexport const AUDIOBOOKS_CLIENT = '85410409-ebe4-47f8-9814-034ff05c47d7';\n\n// Community project related feature flags.\nexport const HOME_LIBRARY_ACCESS_LABELS =\n  'fc3e8322-5e6e-4f4a-9d71-728c6d5656bd';\n\nexport const ALLOW_COMMUNITY_FEATURES = 'a852775a-2b74-4624-aaa3-3d624471a537';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const ACTIVE = 'active';\nexport const INACTIVE = 'inactive';\nexport const CANCELED = 'canceled';\nexport const PENDING_CANCELLATION = 'pending_cancellation';\n\n// These states only apply to pastSubscriptions.\nexport const LAPSED = 'lapsed';\nexport const ENDED = 'ended';\n\nconst subscriptionStates = [\n  ACTIVE,\n  INACTIVE,\n  CANCELED,\n  PENDING_CANCELLATION,\n  LAPSED,\n  ENDED,\n];\n\nexport default subscriptionStates;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const ARCADE = 'arcade';\nexport const PLEX_PASS = 'plexpass';\nexport const TIDAL = 'tidal';\n\nconst subscriptionTypes = [ARCADE, PLEX_PASS, TIDAL];\n\nexport default subscriptionTypes;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\nimport HubModel from 'app/js/models/metadata/HubModel';\nimport getSeasonEpisodeIndex from 'app/js/utils/media/getSeasonEpisodeIndex';\nimport getSectionForItem from 'app/js/utils/media/getSectionForItem';\nimport getTitleList from 'app/js/utils/string/getTitleList';\nimport { getLeafType } from 'app/js/utils/types/metadataTypes';\nimport path from 'app/js/utils/url/path';\n\nconst contentUtil = {\n  uri: function (item: any, options: any) {\n    // library://uuid/(directory|item)/path\n    // channel://identifier/(directory|item)/key\n    // playlist:///guid/\n\n    const items = options && options.items;\n    if (items && items.length) {\n      if (items.length > 1) {\n        return this.getBatchLibraryMetadataURI(items, options);\n      } else if (!item) {\n        item = _.first(items);\n      }\n    }\n\n    if (item instanceof Backbone.Model) {\n      if (item.get('isSection')) {\n        return this.getSectionURI(item, options);\n      }\n\n      if (item.get('isMetadataList')) {\n        return this.getMetadataListURI(item, options);\n      }\n\n      if (item.get('isPlaylist')) {\n        return this.getPlaylistURI(item, options);\n      }\n    }\n\n    return this.getLibraryMetadataURI(item, options);\n  },\n\n  parseLibraryUri: function (uri: any) {\n    const lastSegment = path.getLastSegment(uri);\n    const libraryKey = decodeURIComponent(lastSegment);\n    const libraryMatch = libraryKey.match(\n      /(\\/library\\/sections\\/\\w+)\\/all(?:\\?(.*))?/\n    );\n    // @ts-expect-error ts-migrate(2488) FIXME: Type 'RegExpMatchArray | null' must have a '[Symbo... Remove this comment to see the full error message\n    const [, sectionKey, queryString = ''] = libraryMatch;\n\n    // We want to carefully parse the query to keep the values escaped\n    const params = {};\n    for (const param of queryString.split('&')) {\n      const [field, value] = param.split('=');\n\n      // Some clients send `includeCollections` etc with the library URI\n      if (!field.startsWith('include')) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        params[field] = value;\n      }\n    }\n\n    // Split out the filter and sort/type/limits\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'type' does not exist on type '{}'.\n    const { type, sourceType, sort, limit, ...filterParams } = params;\n\n    // Recreate the filter string with just filters\n    const filterString = Object.entries(filterParams)\n      .map(([k, v]) => `${k}=${v}`)\n      .join('&');\n\n    return {\n      sectionKey,\n      type,\n      sourceType,\n      sort,\n      limit,\n      filterString,\n    };\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  getSectionURI: function (section: any, options: any) {\n    const sectionUrl = _.result(section, 'url');\n    const currentSubset = section.get('currentSubset');\n    const currentFolderKey = section.get('currentFolderKey');\n    const currentType = section.get('currentType');\n    let uriPath;\n\n    // If we are browsing within a folder, we don't need anything else aside\n    // from the folder key.\n    if (currentSubset.id === 'folder') {\n      if (currentFolderKey) {\n        uriPath = currentFolderKey;\n      } else {\n        uriPath = path.join([sectionUrl, 'all']);\n      }\n    } else {\n      const items = section.get('items');\n      const params = items.getParams();\n\n      if (params.type) {\n        delete params.type;\n      }\n\n      if (params.timelineState) {\n        delete params.timelineState;\n      }\n\n      // We're filtering leaves, so replace unwatchedLeaves with unwatched.\n      if (params.unwatchedLeaves) {\n        const leafType = getLeafType(section.get('type')).typeString;\n        params[leafType + '.unwatched'] = 1;\n        delete params.unwatchedLeaves;\n      }\n\n      if (currentType) {\n        params.sourceType = currentType.id;\n      }\n\n      uriPath = path.join([sectionUrl, currentSubset.id], params);\n      uriPath = items.replaceSpecialFilterOperators(uriPath);\n    }\n\n    return this._resolveURI({\n      prefix: 'library',\n      parts: [section.get('uuid'), 'directory', uriPath],\n    });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  getBatchLibraryMetadataURI: function (items: any, options: any) {\n    // If an array of items is passed in, use a directory with a comma\n    // separated list of rating keys.\n\n    const sectionInfo = this._getSectionInfo(_.first(items));\n    const ratingKeys = _.map(items, function (item) {\n      return item.get('ratingKey');\n    });\n    const uriPath = '/library/metadata/' + ratingKeys.join(',');\n\n    return this._resolveURI({\n      prefix: 'library',\n      parts: [sectionInfo.sectionUUID, 'directory', uriPath],\n    });\n  },\n\n  getLibraryMetadataURI: function (item: any, options: any) {\n    options || (options = {});\n\n    const sectionInfo = this._getSectionInfo(item);\n    let uriPath = _.result(item, 'url');\n    let type;\n\n    if (options.excludeSeedItem) {\n      uriPath = path.join(uriPath, { excludeSeedItem: 1 });\n    }\n\n    if (item.models || item.collectionName || item instanceof HubModel) {\n      type = 'directory';\n    } else if (item.get('radio')) {\n      type = 'station';\n    } else {\n      type = 'item';\n    }\n\n    return this._resolveURI({\n      prefix: 'library',\n      parts: [sectionInfo.sectionUUID, type, uriPath],\n    });\n  },\n\n  getMetadataListURI: function (item: any, options: any) {\n    options || (options = {});\n\n    const sectionInfo = this._getSectionInfo(item);\n\n    return this._resolveURI({\n      prefix: 'library',\n      parts: [\n        sectionInfo.sectionUUID,\n        'directory',\n        path.join(item.get('containerKey'), { sourceType: options.sourceType }),\n      ],\n    });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  getPlaylistURI: function (item: any, options: any) {\n    return this._resolveURI({\n      prefix: 'playlist',\n      parts: ['', item.get('guid')],\n    });\n  },\n\n  title: function (item: any, options: any) {\n    const items = options && options.items;\n    if (items && items.length) {\n      if (items.length > 1) {\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 2.\n        return this.getBatchLibraryMetadataTitle(items, options);\n      } else {\n        item = _.first(items);\n      }\n    }\n\n    if (item.get('isSection')) {\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 2.\n      return this.getSectionTitle(item, options);\n    }\n\n    if (item.get('isMetadataList')) {\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 2.\n      return this.getMetadataListTitle(item, options);\n    }\n\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 2.\n    return this.getLibraryMetadataTitle(item, options);\n  },\n\n  getSectionTitle: function (section: any) {\n    const title = section.get('title');\n    const currentSubset = section.get('currentSubset');\n    const currentFilters = section.get('currentFilters');\n\n    if (currentSubset.id !== 'all') {\n      return title + ': ' + currentSubset.get('title');\n    }\n\n    if (!currentFilters.length) {\n      return title;\n    }\n\n    const filterTitles = _.flatten(\n      _.map(currentFilters, function (currentFilter) {\n        return currentFilter.titles;\n      })\n    );\n\n    return title + ': ' + filterTitles.join(', ');\n  },\n\n  getMetadataListTitle: function (metadataList: any) {\n    return metadataList.get('containerTitle') || metadataList.get('title');\n  },\n\n  getBatchLibraryMetadataTitle: function (items: any) {\n    const titles = _.map(items, function (item) {\n      return item.get('title');\n    });\n\n    return getTitleList(titles);\n  },\n\n  getLibraryMetadataTitle: function (item: any) {\n    const parentTitle = item.get('grandparentTitle') || item.get('parentTitle');\n    let title = item.get('title');\n\n    if (parentTitle) {\n      title = parentTitle + ' - ' + title;\n    }\n\n    if (item.get('type') === 'episode') {\n      const formattedIndex = getSeasonEpisodeIndex({\n        seasonIndex: item.get('parentIndex'),\n        episodeIndex: item.get('index'),\n        date: item.get('originallyAvailableAt'),\n        noLeadingZero: true,\n        separator: ' ',\n      });\n\n      title += ' (' + formattedIndex + ')';\n    }\n\n    return title;\n  },\n\n  _resolveURI: function (options: any) {\n    const parts = options.parts;\n    const encodedParts = _.map(parts, function (part) {\n      return part ? encodeURIComponent(part) : '';\n    });\n\n    return options.prefix + '://' + encodedParts.join('/');\n  },\n\n  _getSectionInfo: function (item: any) {\n    let sectionUUID = item.get('librarySectionUUID');\n    let sectionID = item.get('librarySectionID');\n\n    if (!sectionUUID || !sectionID) {\n      const section = getSectionForItem(item);\n\n      if (!_.isEmpty(section)) {\n        sectionUUID = section.get('uuid');\n        sectionID = section.id;\n      }\n    }\n\n    return {\n      sectionUUID: sectionUUID,\n      sectionID: sectionID,\n    };\n  },\n};\n\nexport default contentUtil;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport t from 'app/js/utils/t';\n\nfunction getTitleList(titles: any) {\n  if (!titles || !titles.length) {\n    return;\n  }\n\n  const count = titles.length;\n\n  if (count === 1) {\n    return titles[0];\n  }\n\n  if (count === 2) {\n    return t('{1} and {2}', titles[0], titles[1]);\n  }\n\n  if (count === 3) {\n    return t('{1}, {2}, and {3}', titles[0], titles[1], titles[2]);\n  }\n\n  return t('{1}, {2}, and {3} others', titles[0], titles[1], titles.length - 2);\n}\n\nexport default getTitleList;\n","/* eslint-plugin-disable @typescript-eslint */\n\n// A 'month' is defined as 30 days\nexport const DAYS_PER_MONTH = 30;\n// A 'year' is defined as 365 days\nexport const DAYS_PER_YEAR = 365;\n\nexport const MILLISECOND = 1;\nexport const SECOND = MILLISECOND * 1000;\nexport const MINUTE = SECOND * 60;\nexport const HOUR = MINUTE * 60;\nexport const DAY = HOUR * 24;\nexport const MONTH = DAY * DAYS_PER_MONTH;\nexport const YEAR = DAY * DAYS_PER_YEAR;\n\nconst precedent = [\n  'years',\n  'months',\n  'days',\n  'hours',\n  'minutes',\n  'seconds',\n  'milliseconds',\n];\n\nconst divisors = {\n  years: YEAR,\n  months: MONTH,\n  days: DAY,\n  hours: HOUR,\n  minutes: MINUTE,\n  seconds: SECOND,\n  milliseconds: MILLISECOND,\n};\n\nexport default function durationOf(milliseconds: any) {\n  // If milliseconds is negative then invert the value to ensure that the\n  // divisor and dividends below have the same sign. The returned value is also\n  // inverted to regain its correct sign.\n  const sign = milliseconds < 0 ? -1 : 1;\n  const result = {};\n\n  let nextMilliseconds = milliseconds * sign;\n  let i = -1;\n\n  while (++i < precedent.length) {\n    const unit = precedent[i];\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const divisor = divisors[unit];\n    const quotient = Math.floor(nextMilliseconds / divisor);\n\n    // Avoids signing a quotient of 0.\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    result[unit] = quotient && quotient * sign;\n\n    nextMilliseconds = nextMilliseconds % divisor;\n  }\n\n  return result;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport durationOf from 'app/js/utils/dateTime/durationOf';\n\nfunction formatPlayerTime(milliseconds: any) {\n  if (milliseconds <= 0 || !_.isNumber(milliseconds)) {\n    return '0:00';\n  }\n  const duration = durationOf(milliseconds);\n  const sec = (duration as any).seconds;\n  const min = (duration as any).minutes;\n  const hr = (duration as any).hours + 24 * (duration as any).days;\n  let str = '';\n  if (sec < 10) {\n    str = ':0' + sec;\n  } else {\n    str = ':' + sec;\n  }\n  if (min < 10 && hr > 0) {\n    str = '0' + min + str;\n  } else {\n    str = min + str;\n  }\n  if (hr > 0) {\n    str = hr + ':' + str;\n  }\n  return str;\n}\nexport default formatPlayerTime;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport canUseDOM from './canUseDOM';\n// Regex derived from bowser.js\nconst basicVersion = /version\\/(\\d+(\\.\\d+)?)/i;\nconst chromeVersion = /(?:chrome|crios|gfibertv)[/-](\\d+(\\.\\d+)?)/i;\nconst firefoxVersion = /firefox[ /](\\d+(\\.\\d+)?)/i;\nconst ieVersion = /(msie |rv:)(\\d+(\\.\\d+)?)/i;\nconst vizioVersion = /\\/([^\\s]+)\\s+\\(Vizio/;\n// There is no browser version to extract on many WebKit based TV devices.\n// Grab the WebKit version instead to keep the interface happy.\nconst webkitVersion = /(?:applewebkit|safari)\\/(\\d+(\\.\\d+)?)/i;\n// We can get extra information on platform with Konvergo's UA\nconst konvergoPlatformVersion = function (context: any) {\n  const match = /\\(.* ([^)]+)\\)$/.exec(context);\n  return (match && match[1]) || undefined;\n};\nfunction Browser(context: any) {\n  let userAgent = '';\n  let platform = '';\n  if (context) {\n    userAgent = context.userAgent;\n    platform = context.platform;\n  } else if (canUseDOM && window.navigator != null) {\n    userAgent = window.navigator.userAgent;\n    platform = window.navigator.platform;\n  }\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  this.platformVersion = '0';\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  this.detect({ userAgent: userAgent, platform: platform });\n}\nBrowser.prototype = {\n  //\n  // Properties\n  // Expose the constructor for spec work.\n  constructor: Browser,\n  // List the more generic browsers last so there aren't false positives\n  // early in the testing.\n  browsers: [\n    {\n      id: 'konvergo',\n      name: 'Plex Media Player',\n      webkit: true,\n      regex: /plexmediaplayer/i,\n      versionRegex: /plexmediaplayer (\\d+\\.\\d+\\.\\d+)/i,\n    },\n    {\n      id: 'wiiu',\n      name: 'Wii U',\n      regex: /wiiu/i,\n      versionRegex: webkitVersion,\n      webkit: true,\n    },\n    {\n      // Keep the PlayStation 3 built-in browser using its backward\n      // compatible name. User agent example:\n      // Mozilla/5.0 (PLAYSTATION 3 4.55) AppleWebKit/531.22.8 (KHTML, like Gecko)\n      id: 'ps3',\n      name: 'Unknown Browser',\n      webkit: true,\n      regex: /\\(PLAYSTATION 3 \\d\\./,\n    },\n    {\n      // Keep the PlayStation 4 built-in browser using its backward\n      // compatible name. User agent example:\n      // Mozilla/5.0 (PlayStation 4 1.70) AppleWebKit/536.26 (KHTML, like Gecko)\n      id: 'ps4',\n      name: 'Unknown Browser',\n      webkit: true,\n      regex: /\\(PlayStation 4 \\d\\./,\n    },\n    {\n      // PlayStation 3 WebMAF browser is in \"mystery mode\". User agent example:\n      // Mozilla/5.0 (PlayStation 3) AppleWebKit/531.3 (KHTML, like Gecko) SCEE/1.0 Nuanti/2.0\n      // The \"mystery\" naming must continue until >= 0.9.12.0 becomes the\n      // minimum server version for the TV app.\n      id: 'ps3',\n      name: 'PlayStation 3',\n      webkit: true,\n      regex: /\\(PlayStation 3\\)/,\n      versionRegex: webkitVersion,\n    },\n    {\n      // PlayStation 4 WebMAF browser is in \"mystery mode\". User agent example:\n      // Mozilla/5.0 (PlayStation 4) AppleWebKit/531.3 (KHTML, like Gecko) SCEE/1.0 Nuanti/2.0\n      // The \"mystery\" naming must continue until >= 0.9.12.0 becomes the\n      // minimum server version for the TV app.\n      id: 'ps4',\n      name: 'PlayStation 4',\n      webkit: true,\n      regex: /\\(PlayStation 4\\)/,\n      versionRegex: webkitVersion,\n    },\n    {\n      id: 'edge',\n      name: 'Microsoft Edge',\n      regex: /edge?|(windows phone.+chrome)/i,\n      versionRegex: /edge?\\/(\\d+(\\.\\d+)?)/i,\n    },\n    {\n      id: 'ie',\n      name: 'Internet Explorer',\n      msie: true,\n      regex: /(msie|trident|iemobile)/i,\n      versionRegex: ieVersion,\n      versionMatchIndex: 2,\n    },\n    {\n      // Opera <= 12\n      id: 'opera',\n      name: 'Opera',\n      presto: true,\n      regex: /opera/i,\n      versionRegex: basicVersion,\n    },\n    {\n      // Opera >= 15 needs to be tested before Chrome and Safari\n      id: 'opera',\n      name: 'Opera',\n      webkit: true,\n      regex: /OPR\\//,\n      versionRegex: /OPR\\/\\s?(\\d+(\\.\\d+)?)/,\n    },\n    {\n      // Vivaldi needs to be tested before Chrome and Safari\n      id: 'vivaldi',\n      name: 'Vivaldi',\n      webkit: true,\n      regex: /vivaldi/i,\n      versionRegex: /Vivaldi\\/\\s?(\\d+(\\.\\d+)?)/,\n    },\n    {\n      // Chrome needs to be tested before Safari\n      id: 'chrome',\n      name: 'Chrome',\n      webkit: true,\n      regex: /(chrome|crios|gfiber|netbox)/i,\n      versionRegex: chromeVersion,\n    },\n    {\n      id: 'firefox',\n      name: 'Firefox',\n      gecko: true,\n      regex: /firefox/i,\n      versionRegex: firefoxVersion,\n    },\n    {\n      // OS X Safari, iOS is treated as generic Safari.\n      id: 'safari',\n      name: 'Safari',\n      webkit: true,\n      regex: /macintosh.+safari/i,\n      versionRegex: basicVersion,\n    },\n    {\n      // Any remaining WebKit devices identify as Safari. Version number\n      // represents WebKit build number.\n      id: 'safari',\n      name: 'Safari',\n      webkit: true,\n      regex: /applewebkit/i,\n      versionRegex: webkitVersion,\n    },\n  ],\n  // List the more generic platforms last so there aren't false positives\n  // early in the testing.\n  platforms: [\n    {\n      id: 'metrological',\n      name: 'Metrological',\n      tv: true,\n      regex: /WPE([-\\w]+)?$/,\n      // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n      version: function (context = '') {\n        const matches = /WPE(?:-(\\w*))?$/.exec(context);\n        if (matches && matches[1]) {\n          return matches[1];\n        }\n      },\n    },\n    {\n      id: 'netgem',\n      name: 'Netgem',\n      tv: true,\n      regex: /^Netbox/,\n      version: function (context = '') {\n        return context.split('/')[1] || context;\n      },\n    },\n    {\n      // NetCast devices are also, technically, Smart TV Alliance (STA)\n      // devices. Yet these devices implement the STA methods with their\n      // own proprietary API. Keep them separate. Place this test before\n      // webOS tests in order test our handling of webOS user agents which\n      // contain the 'netcast' substring.\n      id: 'netcast',\n      name: 'NetCast',\n      tv: true,\n      predicate: function (context: any) {\n        // See: https://github.com/plexinc/plex-web-client/issues/3719\n        return /netcast/i.test(context) && !/web[o0]s/i.test(context);\n      },\n    },\n    {\n      // Various version information is managed by a standalone util.\n      // See: app/tv-old/generic/js/utils/webOSProductInfo.js\n      id: 'webos',\n      name: 'webOS',\n      tv: true,\n      predicate: function (context: any) {\n        return /web[o0]s/i.test(context) && /smarttv/i.test(context);\n      },\n    },\n    {\n      id: 'blackberry',\n      name: 'Blackberry',\n      mobile: true,\n      regex: /BlackBerry|RIM|BB10/,\n      version: function (context: any) {\n        // http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/How-to-detect-the-BlackBerry-Browser/ta-p/559862\n        const regex = /PlayBook/.test(context)\n          ? /Tablet OS (\\d+\\.\\d+)/\n          : basicVersion;\n        const matches = regex.exec(context);\n        return matches && matches[1];\n      },\n    },\n    {\n      id: 'ps3',\n      name: 'PlayStation 3',\n      tv: true,\n      regex: /P(lay)?S(tation )?3/i,\n      // @ts-expect-error ts-migrate(6133) FIXME: 'context' is declared but its value is never read.\n      version: function (context: any) {\n        return (window as any).WM_devSettings\n          ? (window as any).WM_devSettings.version\n          : undefined;\n      },\n    },\n    {\n      id: 'ps4',\n      name: 'PlayStation 4',\n      tv: true,\n      regex: /P(lay)?S(tation )?4/i,\n      // @ts-expect-error ts-migrate(6133) FIXME: 'context' is declared but its value is never read.\n      version: function (context: any) {\n        return (window as any).WM_devSettings\n          ? (window as any).WM_devSettings.version\n          : undefined;\n      },\n    },\n    {\n      id: 'wiiu',\n      name: 'Wii U',\n      tv: true,\n      regex: /Nintendo WiiU/,\n    },\n    {\n      id: 'tizen',\n      name: 'Tizen',\n      tv: true,\n      predicate: function (context: any) {\n        return !!this.version(context);\n      },\n      version: function (context: any) {\n        const match = /Tizen (\\d+(\\.\\d+)*)/i.exec(context);\n        return (match && match[1]) || undefined;\n      },\n    },\n    {\n      id: 'winvergo',\n      name: 'Windows',\n      tv: true,\n      // @ts-expect-error ts-migrate(6133) FIXME: 'context' is declared but its value is never read.\n      predicate: function (context: any) {\n        // @ts-expect-error ts-migrate(2551) FIXME: Property 'Windows' does not exist on type 'Window ... Remove this comment to see the full error message\n        return canUseDOM && !!window.Windows;\n      },\n      // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n      version: function (context: any) {\n        try {\n          const deviceFamilyVersion =\n            // @ts-expect-error ts-migrate(2551) FIXME: Property 'Windows' does not exist on type 'Window ... Remove this comment to see the full error message\n            window.Windows.System.Profile.AnalyticsInfo.versionInfo\n              .deviceFamilyVersion;\n          // `deviceFamilyVersion` is a long int that we need to convert to hex and pad\n          // to make sure it's 16 digits long, as `parseInt` will strip out leading 0's.\n          const deviceFamilyVersionHex = (\n            '0000000000000000' + parseInt(deviceFamilyVersion, 10).toString(16)\n          ).slice(-16);\n          // We loop over the hex version string and convert each group of 4 digits\n          // into an integer version number.\n          const versions = [];\n          let substringIndex = 0;\n          while (substringIndex < deviceFamilyVersionHex.length) {\n            const subVersionHex = deviceFamilyVersionHex.substring(\n              substringIndex,\n              substringIndex + 4\n            );\n            const decimalValue = parseInt(subVersionHex, 16);\n            versions.push(decimalValue);\n            substringIndex += 4;\n          }\n          // Finally return a formatted version string.\n          return versions.join('.');\n        } catch (error) {\n          // NOOP\n        }\n      },\n    },\n    {\n      id: 'viera',\n      name: 'Viera',\n      tv: true,\n      predicate: function (context: any) {\n        return !!this.version(context);\n      },\n      version: function (context: any) {\n        const match = /Viera\\/(\\d+(\\.\\d+)*)/i.exec(context);\n        return (match && match[1]) || undefined;\n      },\n    },\n    {\n      id: 'sta',\n      name: 'Smart TV Alliance',\n      tv: true,\n      version: function (context: any) {\n        // Based on code in `Smart_TV_Alliance_SDK_Diversity_Handling_Guidelines_3.0.1.pdf`\n        // and smarttv_getplatform.js.\n        let version;\n        let match;\n        if (/SmartTvA/.test(context)) {\n          // Smart TV Alliance 2.5+ compliant.\n          match = /SmartTvA\\/(\\d+\\.\\d+)/.exec(context);\n          version = (match && match[1]) || version;\n        } else {\n          // Smart TV Alliance <= 2.0 requires manual matching/guessing.\n          // Match the older emulator, then various manufacturers. The\n          // Panasonic Viera check is a guess, there's no documented way to\n          // determine STA SDK version from a non-compliant UA.\n          const v2 = [\n            /Linux i686.+Chromium\\/18/,\n            /nettv\\/4.2/i,\n            /toshiba-dtv/i,\n            /viera/i,\n          ];\n          const v1 = [/nettv\\/4/i];\n          const ambiguous = [/nettv/i];\n          const predicate = function (regex: any) {\n            return regex.test(context);\n          };\n          // Docs mention 2.0 is the minimum version yet example scripts\n          // allocate some Philips UA to v1 and v?.\n          if (v2.some(predicate)) {\n            version = '2.0';\n          } else if (v1.some(predicate)) {\n            version = '1.0';\n          } else if (ambiguous.some(predicate)) {\n            version = '0';\n          }\n        }\n        return version;\n      },\n      predicate: function (context: any) {\n        return this.version(context) !== undefined;\n      },\n    },\n    {\n      id: 'tivo',\n      name: 'TiVo',\n      tv: true,\n      // See: https://github.com/plexinc/plex-web-client/issues/3415\n      regex: /TiVo/,\n      version: function (context: any) {\n        // Use the TCDXXXX section of the user agent to determine version\n        // numbers. The model number corresponds also to the serial number\n        // prefix of a TiVo TCD. Retail models should be all numbers. When\n        // you see a letter, such as E or D, it means the box is a\n        // development or prototype unit. Those are typically used in the\n        // office for testing, but are occasionly sent to partners.\n        const match = /TCD[^,]+/.exec(context);\n        return (match && match[0]) || undefined;\n      },\n    },\n    {\n      // Vizio SmartCast >= 2017\n      id: 'viziosmartcast',\n      name: 'Vizio SmartCast',\n      tv: true,\n      // @ts-expect-error ts-migrate(6133) FIXME: 'context' is declared but its value is never read.\n      predicate: function (context: any) {\n        return (\n          canUseDOM &&\n          (window as any).VIZIO &&\n          (window as any).VIZIO.isSmartCastDevice\n        );\n      },\n      // @ts-expect-error ts-migrate(6133) FIXME: 'context' is declared but its value is never read.\n      version: function (context: any) {\n        // The Vizio SmartCast API exposes `getFirmwareVersion(callback)` to\n        // access the system software version. Browser request the version check\n        // to resolve sync. So, the `platformVersion` returned from browser\n        // will always be '0'. The `dimensionsInitializer` is then responsible\n        // for querying the async API.\n      },\n    },\n    {\n      // Vizio MTK Presto\n      id: 'viziomtk',\n      name: 'Vizio MTK',\n      tv: true,\n      predicate: function (context: any) {\n        // Despite iMTK_JSP has the way to get the manufacturer string\n        // we can't trust it. At least on Vizio M it's undefined.\n        // @ts-expect-error ts-migrate(2304) FIXME: Cannot find name 'iMTK_JSP'.\n        return /opera/i.test(context) && typeof iMTK_JSP !== 'undefined';\n      },\n    },\n    {\n      // Vizio Sigma Presto\n      id: 'viziosigma',\n      name: 'Vizio Sigma',\n      tv: true,\n      predicate: function (context: any) {\n        return /opera/i.test(context) && /vizio/i.test(context);\n      },\n      version: function (context: any) {\n        const match = vizioVersion.exec(context);\n        return (match && match[1]) || undefined;\n      },\n    },\n    {\n      // Vizio MTK Blink\n      id: 'viziomtk',\n      name: 'Vizio MTK',\n      tv: true,\n      predicate: function (context: any) {\n        // @ts-expect-error ts-migrate(2304) FIXME: Cannot find name 'iMTK_JSP'.\n        return vizioVersion.test(context) && typeof iMTK_JSP !== 'undefined';\n      },\n      version: function (context: any) {\n        const match = vizioVersion.exec(context);\n        return (match && match[1]) || undefined;\n      },\n    },\n    {\n      // Vizio Sigma Blink\n      id: 'viziosigma',\n      name: 'Vizio Sigma',\n      tv: true,\n      regex: vizioVersion,\n      version: function (context: any) {\n        const match = vizioVersion.exec(context);\n        return (match && match[1]) || undefined;\n      },\n    },\n    {\n      // An app that the user installed themselves from the Opera TV store.\n      // These apps come with additional global variables we use to assign\n      // key mapping.\n      id: 'operatvstore',\n      name: 'Opera TV Store',\n      tv: true,\n      predicate: function (context: any) {\n        const isSDK3 = /Opera TV Store/.test(context);\n        const isSDK4 = /TV Store/.test(context) && /OMI\\//.test(context);\n        return isSDK3 || isSDK4;\n      },\n    },\n    {\n      // An app selected by manufacturers and embedded on the device or\n      // available from the manufacturers \"store\".\n      id: 'operatv',\n      name: 'Opera TV',\n      tv: true,\n      regex: /opera\\/\\d+\\.\\d+ \\(linux (mips|arm)/i,\n    },\n    {\n      id: 'ios',\n      name: 'iOS',\n      mobile: true,\n      regex: /(iphone|ipad|ipod)/i,\n      version: function (context: any) {\n        const matches = /OS (\\d+_\\d+)/.exec(context);\n        return matches && matches[1] ? matches[1].replace('_', '.') : undefined;\n      },\n    },\n    {\n      // Test Windows Phone before Android due to IE 11 user agent spoofing.\n      id: 'windowsphone',\n      name: 'Windows Phone',\n      mobile: true,\n      regex: /windows phone/i,\n      version: function (context: any) {\n        const matches = /windows phone[ os]*(\\d+\\.\\d+);/i.exec(context);\n        return matches && matches[1];\n      },\n    },\n    {\n      id: 'android',\n      name: 'Android',\n      mobile: true,\n      regex: /android/i,\n      version: function (context: any) {\n        const matches = /Android (\\d+\\.\\d+)/.exec(context);\n        return matches && matches[1];\n      },\n    },\n    {\n      id: 'webos',\n      name: 'webOS',\n      mobile: true,\n      predicate: function (context: any) {\n        // webOS docs show Web0S not webOS.\n        return (\n          /hpwOS/.test(context) ||\n          (/web[o0]s/i.test(context) && !/smarttv/i.test(context))\n        );\n      },\n      version: function (context: any) {\n        const matches = /(?:hpw|web)OS\\/(\\d+\\.\\d+)/.exec(context);\n        return matches && matches[1];\n      },\n    },\n    {\n      id: 'openelec-rpi2',\n      name: 'Embedded (Raspberry Pi)',\n      tv: true,\n      regex: /plexmediaplayer.*openelec-rpi2/i,\n      version: konvergoPlatformVersion,\n    },\n    {\n      id: 'openelec',\n      name: 'Embedded',\n      tv: true,\n      regex: /plexmediaplayer.*openelec/i,\n      version: konvergoPlatformVersion,\n    },\n    {\n      id: 'linuxkonvergo',\n      name: 'Linux',\n      tv: true,\n      regex: /plexmediaplayer.*linux/i,\n      version: konvergoPlatformVersion,\n    },\n    {\n      id: 'osxkonvergo',\n      name: 'OSX',\n      tv: true,\n      regex: /plexmediaplayer.*mac/i,\n      version: konvergoPlatformVersion,\n    },\n    {\n      id: 'windowskonvergo',\n      name: 'Windows',\n      tv: true,\n      regex: /plexmediaplayer.*win/i,\n      version: konvergoPlatformVersion,\n    },\n    {\n      id: 'linux',\n      name: 'Linux',\n      regex: /linux/i,\n    },\n    {\n      id: 'osx',\n      name: 'OSX',\n      regex: /Macintosh/,\n      // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n      version: function (context: any) {\n        // Will return `undefined` for PPC Macs. Some user agents use `_` to\n        // delimit version segments, others use the `.`.\n        const matches = /OS X (\\d+)[_.]?(\\d+)?/.exec(context);\n        if (matches) {\n          return matches[2] ? matches[1] + '.' + matches[2] : matches[1];\n        }\n      },\n    },\n    {\n      id: 'windows',\n      name: 'Windows',\n      regex: /Windows/,\n      version: function (context: any) {\n        // https://msdn.microsoft.com/en-us/library/windows/desktop/ms724832(v=vs.85).aspx\n        const productName = {\n          '6.0': 'Vista / Server 2008',\n          '6.1': '7 / Server 2008 R2',\n          '6.2': '8',\n          '6.3': '8.1',\n          '6.4': '10',\n          '10.0': '10',\n        };\n        // Based on: Platform.js v1.3.0 <http://mths.be/platform>\n        // https://github.com/bestiejs/platform.js/\n        // Match against any Windows ... X.Y version\n        const matches = /Windows [^\\d;)]*(\\d+\\.\\d+)/.exec(context);\n        if (matches) {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          return productName[matches[1]];\n        }\n      },\n    },\n    {\n      id: 'chromeos',\n      name: 'Chrome OS',\n      regex: /CrOS/,\n      // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n      version: function (context: any) {\n        const matches = /CrOS [\\S]* (\\d+)[_.]?(\\d+)?/.exec(context);\n        if (matches) {\n          return matches[2] ? matches[1] + '.' + matches[2] : matches[1];\n        }\n      },\n    },\n  ],\n  //\n  // Control\n  detect: function (contexts: any) {\n    const browser = this.runTests(this.browsers, contexts);\n    const platform = this.runTests(this.platforms, contexts);\n    let platformVersion;\n    if (browser) {\n      this.id = browser.id;\n      this.name = browser.name;\n      this.version = this.getVersion(\n        contexts.userAgent,\n        browser.versionRegex,\n        browser.versionMatchIndex || 1\n      );\n      this.webkit = !!browser.webkit;\n      this.gecko = !!browser.gecko;\n      this.msie = !!browser.msie;\n      this.presto = !!browser.presto;\n    } else {\n      this.id = 'unknown';\n      this.name = 'Unknown Browser';\n      this.version = '0';\n      this.webkit = false;\n      this.gecko = false;\n      this.msie = false;\n      this.presto = false;\n    }\n    if (platform) {\n      platformVersion =\n        typeof platform.version === 'function'\n          ? platform.version(contexts.userAgent)\n          : platform.version;\n      this.platform = platform.name;\n      this.platformID = platform.id;\n      this.platformVersion = platformVersion || this.platformVersion;\n      this.mobile = !!platform.mobile;\n      this.tv = !!platform.tv;\n    } else {\n      this.platformID = 'unknown';\n      this.platform = 'Unknown Platform';\n      this.mobile = false;\n      this.tv = false;\n    }\n    if (!this.tv) {\n      this.platformModifierKey =\n        this.platformID === 'osx' || this.platformID === 'ios'\n          ? 'command'\n          : 'ctrl';\n    }\n  },\n  runTests: function (tests: any, contexts: any) {\n    let context;\n    let passed;\n    let test;\n    let i = 0;\n    while (passed !== true && (test = tests[i++])) {\n      context = contexts[test.context || 'userAgent'];\n      if (test.regex) {\n        passed = test.regex.test(context);\n      } else if (test.predicate) {\n        passed = test.predicate(context);\n      }\n    }\n    // The value of `test` is a reference to the last test which passed. Or,\n    // undefined when no test passes.\n    return test;\n  },\n  getVersion: function (ua: any, regex: any, matchIndex: any) {\n    const match = ua.match(regex);\n    return (match && match.length > matchIndex && match[matchIndex]) || '0';\n  },\n  toJSON: function () {\n    const o = {};\n    for (const each in this) {\n      // Keep the serialized object light by only truish values which aren't\n      // the browser and platform tests.\n      if (this[each] && each !== 'browsers' && each !== 'platforms') {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        o[each] = this[each];\n      }\n    }\n    return o;\n  },\n};\n// Singleton\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 0.\nexport default new Browser();\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default !!(\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined'\n);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport browser from './browser';\nimport canUseDOM from './canUseDOM';\n// Immediately execute each function so we only have to evaluate the\n// expression once.\nconst hasCanvas = (function () {\n  if (!canUseDOM) {\n    return false;\n  }\n  const canvas = document.createElement('canvas');\n  return (\n    !__TEST__ && !!(canvas && canvas.getContext && canvas.getContext('2d'))\n  );\n})();\nconst capabilities = {\n  isHostedHttps: canUseDOM && window.location.protocol === 'https:',\n  // IE8 provides console.log when developer tools are open, but it isn't\n  // a true function.\n  hasConsole: !!(\n    !__TEST__ &&\n    window.console &&\n    window.console.log &&\n    window.console.log.call\n  ),\n  hasWebSocket: canUseDOM && !!window.WebSocket,\n  hasEventSource: canUseDOM && !!window.EventSource,\n  hasReplaceState:\n    canUseDOM && !!(window.history && window.history.replaceState),\n  hasFileUpload:\n    canUseDOM && !!(window.File && window.FileList && window.FileReader),\n  hasMediaSource:\n    canUseDOM && !!(window.MediaSource || (window as any).WebKitMediaSource),\n  hasObjectUrl: (function () {\n    // Opera 12 (Opera TV) supports the window.URL object yet the URL object\n    // created cannot accept a Blob. Result is that Blob and URL cannot be\n    // used together to render Blob images.\n    // See: http://caniuse.com/bloburls\n    if (browser.presto) {\n      return false;\n    }\n    return (\n      canUseDOM &&\n      !!(\n        window.URL &&\n        typeof window.URL.createObjectURL === 'function' &&\n        typeof window.URL.revokeObjectURL === 'function'\n      )\n    );\n  })(),\n  hasBlob: (function () {\n    try {\n      return !!new window.Blob();\n    } catch (error) {\n      return false;\n    }\n  })(),\n  hasFullscreen: (function () {\n    if (!canUseDOM) {\n      return false;\n    }\n    const el = document.createElement('div');\n    return !!(\n      el.requestFullscreen ||\n      (el as any).webkitRequestFullScreen ||\n      (el as any).mozRequestFullScreen\n    );\n  })(),\n  hasCanvas,\n  hasWebGL: (function () {\n    if (!hasCanvas) {\n      return false;\n    }\n    // See: https://developer.mozilla.org/en-US/docs/Learn/WebGL/By_example/Detect_WebGL\n    const canvas = document.createElement('canvas');\n    const gl =\n      canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n    return gl ? gl instanceof window.WebGLRenderingContext : false;\n  })(),\n  hasTouchScreen: canUseDOM && !!('ontouchstart' in window),\n  hasPageVisibility: (function () {\n    return canUseDOM && (document.hidden === true || document.hidden === false);\n  })(),\n  hasWebKitPageVisibility: (function () {\n    return (\n      canUseDOM &&\n      ((document as any).webkitHidden === true ||\n        (document as any).webkitHidden === false)\n    );\n  })(),\n  hasPassiveEventListeners: (function () {\n    // See: https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n    let supportsPassive = false;\n    try {\n      const opts = Object.defineProperty({}, 'passive', {\n        get: function () {\n          supportsPassive = true;\n          return true;\n        },\n      });\n      // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.\n      window.addEventListener('test', null, opts);\n    } catch (e) {\n      // NOOP\n    }\n    return supportsPassive;\n  })(),\n  hasWebSpeech: canUseDOM && !!window.speechSynthesis,\n  hasGamepads: canUseDOM && typeof window.navigator.getGamepads === 'function',\n  hasMediaSession: canUseDOM && 'mediaSession' in window.navigator,\n  hasLocalStorage: (() => {\n    if (!canUseDOM) {\n      return false;\n    }\n\n    let localStorageAvailable = false;\n\n    try {\n      window.localStorage.setItem('testKey', 'test');\n      window.localStorage.removeItem('testKey');\n      localStorageAvailable = true;\n    } catch {\n      // discard error\n    }\n\n    return localStorageAvailable;\n  })(),\n};\nexport default capabilities;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport BaseClass from 'app/js/utils/BaseClass';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n\n// The dispatcher is a simple event handler based on Backbone that allows us\n// to decouple parts of the application.\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst Dispatcher = BaseClass.extend({ mixins: eventMixin });\n\n// Singleton\nexport default new Dispatcher();\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport parser2 from 'app/js/utils/parser2';\n\nexport default function getErrorMessageFromXHR(\n  xhr: any,\n  errorMessage: any,\n  messageProperty = 'message'\n) {\n  if (!xhr) {\n    return errorMessage;\n  }\n\n  const error = parser2.parseXML(xhr.responseText);\n\n  if (error && error[messageProperty]) {\n    return error[messageProperty];\n  }\n\n  return errorMessage;\n}\n","import isAbsoluteUrl from 'app/js/utils/url/isAbsoluteUrl';\nimport path from 'app/js/utils/url/path';\n\nfunction sanitizeUrl(url: string): string | undefined {\n  if (__DEV__) {\n    return url;\n  }\n\n  return /^https:\\/\\/(?:(\\w|-)+\\.)*plex\\.tv(?:\\/|$)/i.test(url)\n    ? url\n    : undefined;\n}\n\nfunction runtimeUrlParam(param: string): string | undefined {\n  const url = new URLSearchParams(window.location.search).get(param);\n\n  return url ? sanitizeUrl(url) : undefined;\n}\n\nexport function getMyPlexUrl(urlPath?: string): string {\n  const root = runtimeUrlParam('myPlexUrl') || 'https://plex.tv';\n\n  return urlPath ? path.join([root, urlPath]) : root;\n}\n\nexport function getWWWPlexUrl(urlPath?: string): string {\n  const root = runtimeUrlParam('wwwPlexUrl') || 'https://www.plex.tv';\n\n  return urlPath ? path.join([root, urlPath]) : root;\n}\n\nexport function getAuthAppUrl(absolute?: boolean): string {\n  const root = runtimeUrlParam('authAppUrl') || __AUTH_APP_URL__;\n\n  const params = {\n    myPlexUrl: runtimeUrlParam('myPlexUrl'),\n    wwwPlexUrl: runtimeUrlParam('wwwPlexUrl'),\n  };\n\n  let url = path.join(root, params, { trailingSlash: true });\n\n  if (absolute && !isAbsoluteUrl(url)) {\n    url = path.join([window.location.origin, url]);\n  }\n\n  return url;\n}\n\nexport function getAuthFormUrl(): string {\n  const root = runtimeUrlParam('authFormUrl') || __AUTH_FORM_URL__;\n\n  const params = {\n    myPlexUrl: runtimeUrlParam('myPlexUrl'),\n    wwwPlexUrl: runtimeUrlParam('wwwPlexUrl'),\n  };\n\n  return path.join(root, params, { trailingSlash: true });\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as responseTypes from 'app/js/models/responseTypes';\n\nfunction isJSONSupported(server: any) {\n  if (!server) {\n    return false;\n  }\n\n  // Media providers support JSON similar to media servers.\n  if (server.get('isCloud')) {\n    return true;\n  }\n\n  // Only allow JSON with full media servers. Nano servers support JSON, but\n  // mobile clients have proxies in front of the nano servers, which may not\n  // support JSON.\n  return (\n    server.supports('json') &&\n    !server.get('onlyXML') &&\n    !server.get('isMobileServer')\n  );\n}\n\nexport default function getSupportedResponseType(server: any) {\n  return isJSONSupported(server) ? responseTypes.json : responseTypes.xml;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction if_eq(value: any, test: any, options: any) {\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  return value === test ? options.fn(this) : options.inverse(this);\n}\n\nmodule.exports = if_eq;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction if_neq(value: any, test: any, options: any) {\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  return value !== test ? options.fn(this) : options.inverse(this);\n}\n\nmodule.exports = if_neq;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst formatResolution =\n  require('app/js/utils/metadata/formatResolution').default;\n// @ts-expect-error ts-migrate(2451) FIXME: Cannot redeclare block-scoped variable 'stripOptio... Remove this comment to see the full error message\nconst stripOptions = require('../stripOptions');\n\nmodule.exports = stripOptions(formatResolution);\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst formatVideoBitrate =\n  require('app/js/utils/metadata/formatVideoBitrate').default;\n// @ts-expect-error ts-migrate(2451) FIXME: Cannot redeclare block-scoped variable 'stripOptio... Remove this comment to see the full error message\nconst stripOptions = require('../stripOptions');\n\nmodule.exports = stripOptions(formatVideoBitrate);\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst formatVideoQuality =\n  require('app/js/utils/metadata/formatVideoQuality').default;\n// @ts-expect-error ts-migrate(2451) FIXME: Cannot redeclare block-scoped variable 'stripOptio... Remove this comment to see the full error message\nconst stripOptions = require('../stripOptions');\n\nmodule.exports = stripOptions(formatVideoQuality);\n","/* eslint-plugin-disable @typescript-eslint */\n\n/* eslint filenames/match-exported: 0 */\n\n// @ts-expect-error ts-migrate(2649) FIXME: Cannot augment module '_' with value exports becau... Remove this comment to see the full error message\nconst _ = require('underscore');\n// @ts-expect-error ts-migrate(2451) FIXME: Cannot redeclare block-scoped variable 'Handlebars... Remove this comment to see the full error message\nconst Handlebars = require('handlebars');\n\nfunction renderPartial(name: any, options: any) {\n  const partial = Handlebars.partials[name];\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  const context = _.extend({}, options.hash.context || this, options.hash);\n\n  return new Handlebars.SafeString(partial(context));\n}\n\nmodule.exports = renderPartial;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst truncateFilename =\n  require('app/js/utils/string/truncate/truncateFilename').default;\n// @ts-expect-error ts-migrate(2451) FIXME: Cannot redeclare block-scoped variable 'stripOptio... Remove this comment to see the full error message\nconst stripOptions = require('../stripOptions');\n\nmodule.exports = stripOptions(truncateFilename);\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst truncateMiddle =\n  require('app/js/utils/string/truncate/truncateMiddle').default;\n// @ts-expect-error ts-migrate(2451) FIXME: Cannot redeclare block-scoped variable 'stripOptio... Remove this comment to see the full error message\nconst stripOptions = require('../stripOptions');\n\nmodule.exports = stripOptions(truncateMiddle);\n","/* eslint-plugin-disable @typescript-eslint */\n\n// @ts-expect-error ts-migrate(2403) FIXME: Subsequent variable declarations must have the sam... Remove this comment to see the full error message\nconst _ = require('underscore');\n\n// @ts-expect-error ts-migrate(2451) FIXME: Cannot redeclare block-scoped variable 'stripOptio... Remove this comment to see the full error message\nfunction stripOptions(fn: any) {\n  return function () {\n    // Drop the last `options` argument. It may clash with default arguments\n    // in util functions, and we usually don't need it anyway.\n    // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n    // eslint-disable-next-line prefer-rest-params\n    return fn.apply(this, _.initial(arguments));\n  };\n}\n\nmodule.exports = stripOptions;\n","/* eslint-plugin-disable @typescript-eslint */\n\n/* eslint filenames/match-exported: 0 */\n\n// @ts-expect-error ts-migrate(2649) FIXME: Cannot augment module '_' with value exports becau... Remove this comment to see the full error message\nconst _ = require('underscore');\nconst tEscape = require('app/js/utils/t').tEscape;\n// @ts-expect-error ts-migrate(2451) FIXME: Cannot redeclare block-scoped variable 'Handlebars... Remove this comment to see the full error message\nconst Handlebars = require('handlebars');\n\nfunction translate() {\n  // Handlebars automatically includes an object as the last argument for a\n  // helper function. Remove that argument before sending the others to the\n  // translate function.\n  // eslint-disable-next-line prefer-rest-params\n  const args = _.initial(arguments);\n  // eslint-disable-next-line prefer-rest-params\n  const hash = _.last(arguments).hash;\n\n  if (_.isObject(hash) && !_.isEmpty(hash)) {\n    // Insert the hash into the args array as it the object used for named translations.\n    args.splice(1, 0, hash);\n  }\n\n  return new Handlebars.SafeString(tEscape.apply(tEscape, args));\n}\n\nmodule.exports = translate;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst getLastSegment = require('app/js/utils/url/path').default.getLastSegment;\n// @ts-expect-error ts-migrate(2451) FIXME: Cannot redeclare block-scoped variable 'stripOptio... Remove this comment to see the full error message\nconst stripOptions = require('../stripOptions');\n\nmodule.exports = stripOptions(getLastSegment);\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function base64ImageStringToBlob(base64String: any) {\n  if (!base64String) {\n    return null;\n  }\n\n  const [typeInfo, base64Image] = base64String.split(',');\n  const mimeType = typeInfo.substr(5);\n  const decodedImage = window.atob(base64Image);\n\n  const blobArray = [];\n  for (let i = 0; i < decodedImage.length; i++) {\n    blobArray.push(decodedImage.charCodeAt(i));\n  }\n  const byteArray = new Uint8Array(blobArray);\n  const imageBlog = new window.Blob([byteArray], { type: mimeType });\n\n  return imageBlog;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport assert from 'app/js/utils/log/assert';\n\nexport default function isVersionOrNewer(version: any, minVersion: any) {\n  assert(version != null, 'No `version` supplied to `isVersionOrNewer`.');\n\n  assert(\n    minVersion != null,\n    'No `minVersion` supplied to `isVersionOrNewer`. Have you misspelled a constant?'\n  );\n\n  const minVersionParts = minVersion.split('.');\n  const versionParts = version.split('.');\n\n  for (let i = 0, len = minVersionParts.length; i < len; i++) {\n    if (i < versionParts.length) {\n      const minVersionDot = parseInt(minVersionParts[i], 10);\n      const versionDot = parseInt(versionParts[i], 10);\n\n      if (minVersionDot < versionDot) {\n        return true;\n      } else if (minVersionDot > versionDot) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst UNKNOWN_LANG_CODE = 'xx';\nconst NONE_LANG_CODE = 'xn';\n\nconst languages = {\n  aa: 'Afaraf',\n  af: 'Afrikaans',\n  ab: 'Abkhazian',\n  ak: 'Akan',\n  sq: 'Shqip',\n  am: 'Amharic',\n  ar: '\\u0627\\u0644\\u0639\\u0631\\u0628\\u064A\\u0629',\n  an: 'Aragon\\u00E9s',\n  hy: '\\u0540\\u0561\\u0575\\u0565\\u0580\\u0565\\u0576',\n  as: 'Assamese',\n  av: '\\u0430\\u0432\\u0430\\u0440 \\u043C\\u0430\\u0446\\u04C0',\n  ae: 'avesta',\n  ay: 'aymar aru',\n  az: 'az\\u0259rbaycan dili',\n  ba: '\\u0431\\u0430\\u0448\\u04A1\\u043E\\u0440\\u0442 \\u0442\\u0435\\u043B\\u0435',\n  bm: 'bamanankan',\n  eu: 'euskara',\n  be: '\\u0411\\u0435\\u043B\\u0430\\u0440\\u0443\\u0441\\u043A\\u0430\\u044F',\n  bn: 'Bengali',\n  bh: '\\u092D\\u094B\\u091C\\u092A\\u0941\\u0930\\u0940',\n  bi: 'Bislama',\n  bs: 'bosanski jezik',\n  br: 'brezhoneg',\n  bg: '\\u0431\\u044A\\u043B\\u0433\\u0430\\u0440\\u0441\\u043A\\u0438 \\u0435\\u0437\\u0438\\u043A',\n  my: 'Burmese',\n  ca: 'Catal\\u00E0',\n  ch: 'Chamoru',\n  ce: '\\u043D\\u043E\\u0445\\u0447\\u0438\\u0439\\u043D \\u043C\\u043E\\u0442\\u0442',\n  cu: '\\u0469\\u0437\\u044B\\u043A\\u044A \\u0441\\u043B\\u043E\\u0432\\u0463\\u043D\\u044C\\u0441\\u043A\\u044A',\n  cv: '\\u0447\\u04D1\\u0432\\u0430\\u0448 \\u0447\\u04D7\\u043B\\u0445\\u0438',\n  kw: 'Kernewek',\n  co: 'corsu',\n  cr: '\\u14C0\\u1426\\u1403\\u152D\\u140D\\u140F\\u1423',\n  dv: 'Divehi',\n  dz: '\\u0F62\\u0FAB\\u0F7C\\u0F44\\u0F0B\\u0F41',\n  en: 'English',\n  'en-GB': 'English (UK)',\n  eo: 'Esperanto',\n  et: 'eesti',\n  ee: 'E\\u028Begbe',\n  fo: 'f\\u00F8royskt',\n  fj: 'vosa Vakaviti',\n  fy: 'Frysk',\n  ff: 'Fulfulde',\n  ka: '\\u10E5\\u10D0\\u10E0\\u10D7\\u10E3\\u10DA\\u10D8',\n  gd: 'G\\u00E0idhlig',\n  ga: 'Gaeilge',\n  gl: 'Galego',\n  gv: 'Gaelg',\n  gn: 'Ava\\u00F1e&apos;\\u1EBD',\n  gu: '\\u0A97\\u0AC1\\u0A9C\\u0AB0\\u0ABE\\u0AA4\\u0AC0',\n  ht: 'Krey\\u00F2l ayisyen',\n  ha: '\\u0647\\u064E\\u0648\\u064F\\u0633\\u064E',\n  hz: 'Otjiherero',\n  hi: '\\u0939\\u093F\\u0928\\u094D\\u0926\\u0940',\n  ho: 'Hiri Motu',\n  hr: 'hrvatski',\n  ig: 'As\\u1EE5s\\u1EE5 Igbo',\n  is: '\\u00CDslenska',\n  io: 'Ido',\n  ii: '\\uA188\\uA320\\uA4BF Nuosuhxop',\n  iu: '\\u1403\\u14C4\\u1483\\u144E\\u1450\\u1466',\n  ie: 'Interlingue',\n  ia: 'Interlingua',\n  id: 'Bahasa Indonesia',\n  ik: 'I\\u00F1upiaq',\n  jv: 'basa Jawa',\n  kl: 'kalaallisut',\n  kn: '\\u0C95\\u0CA8\\u0CCD\\u0CA8\\u0CA1',\n  ks: '\\u0915\\u0936\\u094D\\u092E\\u0940\\u0930\\u0940',\n  kr: 'Kanuri',\n  kk: '\\u049A\\u0430\\u0437\\u0430\\u049B \\u0442\\u0456\\u043B\\u0456',\n  km: 'Khmer',\n  ki: 'G\\u0129k\\u0169y\\u0169',\n  rw: 'Ikinyarwanda',\n  ky: '\\u043A\\u044B\\u0440\\u0433\\u044B\\u0437 \\u0442\\u0438\\u043B\\u0438',\n  kv: '\\u043A\\u043E\\u043C\\u0438 \\u043A\\u044B\\u0432',\n  kg: 'KiKongo',\n  kj: 'Kuanyama',\n  ku: 'Kurd\\u00EE',\n  lo: 'Lao',\n  la: 'latine',\n  lv: 'latvie\\u0161u valoda',\n  li: 'Limburgs',\n  ln: 'Ling\\u00E1la',\n  lt: 'lietuvi\\u0173 kalba',\n  lb: 'L\\u00EBtzebuergesch',\n  lu: 'Luba-Katanga',\n  lg: 'Luganda',\n  mk: '\\u043C\\u0430\\u043A\\u0435\\u0434\\u043E\\u043D\\u0441\\u043A\\u0438 \\u0458\\u0430\\u0437\\u0438\\u043A',\n  mh: 'Kajin M\\u0327aje\\u013C',\n  ml: 'Malayalam',\n  mi: 'te reo M\\u0101ori',\n  mr: '\\u092E\\u0930\\u093E\\u0920\\u0940',\n  ms: 'bahasa Melayu',\n  mg: 'Malagasy fiteny',\n  mt: 'Malti',\n  mo: 'Moldavian',\n  mn: '\\u043C\\u043E\\u043D\\u0433\\u043E\\u043B',\n  na: 'Ekakair\\u0169 Naoero',\n  nv: 'Din\\u00E9 bizaad',\n  nr: 'isiNdebele (North)',\n  nd: 'isiNdebele (South)',\n  ng: 'Owambo',\n  ne: '\\u0928\\u0947\\u092A\\u093E\\u0932\\u0940',\n  nn: 'Norsk nynorsk',\n  nb: 'Norsk bokm\\u00E5l',\n  ny: 'chiChe\\u0175a',\n  oc: 'Occitan',\n  oj: '\\u140A\\u14C2\\u1511\\u14C8\\u142F\\u14A7\\u140E\\u14D0',\n  or: 'Oriya',\n  om: 'Afaan Oromoo',\n  os: '\\u0438\\u0440\\u043E\\u043D \\u00E6\\u0432\\u0437\\u0430\\u0433',\n  pa: '\\u0A2A\\u0A70\\u0A1C\\u0A3E\\u0A2C\\u0A40',\n  pi: '\\u092A\\u093E\\u0934\\u093F',\n  ps: '\\u067E\\u069A\\u062A\\u0648',\n  qu: 'Runa Simi',\n  rm: 'rumantsch grischun',\n  ro: 'rom\\u00E2n\\u0103',\n  rn: 'kiRundi',\n  sg: 'y\\u00E2ng\\u00E2 t\\u00EE s\\u00E4ng\\u00F6',\n  sa: '\\u0938\\u0902\\u0938\\u094D\\u0915\\u0943\\u0924\\u092E\\u094D',\n  sr: '\\u0441\\u0440\\u043F\\u0441\\u043A\\u0438 \\u0458\\u0435\\u0437\\u0438\\u043A',\n  si: 'Sinhala',\n  sk: 'sloven\\u010Dina',\n  sl: 'Sloven\\u0161\\u010Dina',\n  se: 'Davvis\\u00E1megiella',\n  sm: 'gagana fa&apos;a Samoa',\n  sn: 'chiShona',\n  sd: '\\u0938\\u093F\\u0928\\u094D\\u0927\\u0940',\n  so: 'Soomaaliga',\n  st: 'Sesotho',\n  sc: 'sardu',\n  ss: 'SiSwati',\n  su: 'Basa Sunda',\n  sw: 'Kiswahili',\n  ty: 'Reo Tahiti',\n  ta: '\\u0BA4\\u0BAE\\u0BBF\\u0BB4\\u0BCD',\n  tt: '\\u0442\\u0430\\u0442\\u0430\\u0440\\u0447\\u0430',\n  te: 'Telugu',\n  tg: '\\u0442\\u043E\\u04B7\\u0438\\u043A\\u04E3',\n  tl: 'Wikang Tagalog',\n  th: '\\u0E44\\u0E17\\u0E22',\n  bo: '\\u0F56\\u0F7C\\u0F51\\u0F0B\\u0F61\\u0F72\\u0F42',\n  ti: 'Tigrinya',\n  to: 'faka Tonga',\n  tn: 'Setswana',\n  ts: 'Xitsonga',\n  tk: 'T\\u00FCrkmen',\n  tw: 'Twi',\n  ug: 'Uy\\u01A3urq\\u0259',\n  uk: '\\u0443\\u043A\\u0440\\u0430\\u0457\\u043D\\u0441\\u044C\\u043A\\u0430',\n  ur: '\\u0627\\u0631\\u062F\\u0648',\n  uz: 'O&apos;zbek',\n  ve: 'Tshiven\\u1E13a',\n  vi: 'Ti\\u1EBFng Vi\\u1EC7t',\n  vo: 'Volap\\u00FCk',\n  cy: 'Cymraeg',\n  wa: 'Walon',\n  wo: 'Wollof',\n  xh: 'isiXhosa',\n  yi: '\\u05D9\\u05D9\\u05B4\\u05D3\\u05D9\\u05E9',\n  yo: 'Yor\\u00F9b\\u00E1',\n  za: 'Sa\\u026F cue\\u014B\\u0185',\n  zu: 'isiZulu',\n  pb: 'Portugu\\u00EAs (Brasil)',\n  fr: 'Fran\\u00E7ais',\n  'fr-CA': 'Fran\\u00E7ais Canadien',\n  de: 'Deutsch',\n  sv: 'Svenska',\n  no: 'Norsk',\n  da: 'Dansk',\n  fi: 'Suomeksi',\n  nl: 'Nederlands',\n  it: 'Italiano',\n  es: 'Espa\\u00F1ol',\n  'es-419': 'Espa\\u00F1ol (Latinoam\\u00E9rica)',\n  pl: 'Polski',\n  hu: 'Magyar',\n  el: '\\u0395\\u03BB\\u03BB\\u03B7\\u03BD\\u03B9\\u03BA\\u03AC',\n  tr: 'T\\u00FCrk\\u00E7e',\n  zh: '\\u4E2D\\u6587',\n  'zh-TW': '\\u81FA\\u8A9E',\n  ru: '\\u0440\\u0443\\u0441\\u0441\\u043A\\u0438\\u0439 \\u044F\\u0437\\u044B\\u043A',\n  he: '\\u05E2\\u05D1\\u05E8\\u05D9\\u05EA',\n  ja: '\\u65E5\\u672C\\u8A9E',\n  pt: 'Portugu\\u00EAs',\n  'pt-BR': 'Portugu\\u00EAs Brasileiro',\n  ko: '\\uD55C\\uAD6D\\uC5B4',\n  cs: '\\u010De\\u0161tina',\n  fa: '\\u0641\\u0627\\u0631\\u0633\\u06CC',\n  [UNKNOWN_LANG_CODE]: 'Unknown',\n  [NONE_LANG_CODE]: 'None',\n};\n\nfunction getSortedLanguageCodes() {\n  const languageCodes = Object.keys(languages).filter((languageCode) => {\n    return NON_LANGUAGE_CODES.indexOf(languageCode) === -1;\n  });\n\n  languageCodes.sort(languageCodeComparator);\n\n  return languageCodes.concat(NON_LANGUAGE_CODES);\n}\n\nexport function languageCodeComparator(languageCodeA: any, languageCodeB: any) {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  return languages[languageCodeA].localeCompare(languages[languageCodeB]);\n}\n\nexport const NON_LANGUAGE_CODES = [UNKNOWN_LANG_CODE, NONE_LANG_CODE];\nexport const sortedLanguageCodes = getSortedLanguageCodes();\nexport default languages;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction getLiveTVMediaItemID(mediaItem: any) {\n  return `${mediaItem.beginsAt}-${mediaItem.channelIdentifier}-${mediaItem.endsAt}`;\n}\n\nexport default getLiveTVMediaItemID;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport log from 'app/js/utils/log/log';\n\nconst defaultMessage = '`assert` requires an error message argument';\n\nfunction assert(condition: any, message = defaultMessage, isDev = __DEV__) {\n  if (condition) {\n    return true;\n  }\n\n  // Always log errors. React will entirely swallow errors thrown during\n  // component mounting causing assertions to fail silently.\n  // See: https://github.com/plexinc/plex-web-client/pull/5097\n  log.error(message);\n\n  if (isDev) {\n    throw new Error(message);\n  }\n\n  return false;\n}\n\nexport default assert;\n","/* eslint-plugin-disable @typescript-eslint */\n\n/* eslint no-fallthrough: 0*/\nimport dispatcher from 'app/js/utils/dispatcher';\n\nconst messageType = 'log:message';\nconst groupType = 'log:group';\nconst groupCollapsedType = 'log:groupCollapsed';\nconst groupEndType = 'log:groupEnd';\nconst redactions = {\n  accessToken: 1,\n  address: 1,\n  auth_token: 1,\n  authToken: 1,\n  Authorization: 1,\n  clientIdentifier: 1,\n  email: 1,\n  host: 1,\n  myPlexAccessToken: 1,\n  password: 1,\n  uri: 1,\n  'X-Plex-Token': 1,\n};\nconst redact = new RegExp(\n  '(' +\n    Object.keys(redactions).join('|') +\n    ')(\\\\s?=\\\\s?)([\\'\"]?)[^\\'\"\\n]+([\\'\"]?)',\n  'g'\n);\nconst token = /%[sdifo]/g;\nconst isErrorLike = /(error|exception)\\]$/i;\n// The token formatters assumes the value argument has already been serialized.\nconst formatters = {\n  '%s'(value: any) {\n    return value;\n  },\n  '%d'(value: any) {\n    return Number.parseInt(value, 10);\n  },\n  '%f'(value: any) {\n    return Number.parseFloat(value);\n  },\n  '%o'(value: any) {\n    return value;\n  },\n};\nconst factory = (type: any, level: any, defaultMessage: any) => {\n  return function () {\n    let filter;\n    if (__DEV__) {\n      const getDevOption = require('app/js/utils/dev/getDevOption').default;\n      const quietLogs = getDevOption('quietLogs');\n      if (quietLogs === true) {\n        return;\n      }\n      filter = quietLogs;\n    }\n    const len = arguments.length;\n    let message;\n    level = level === undefined ? (log as any).LEVEL_LOG : level;\n    if ((log as any).level < level) {\n      return;\n    }\n    if (len === 0 && defaultMessage) {\n      message = defaultMessage;\n    } else if (len === 1) {\n      // Fast path single argument logs, there is no tokenization possible.\n      // eslint-disable-next-line prefer-rest-params\n      message = (log as any).serialize(arguments[0]);\n    } else if (len > 1) {\n      // Else serialize all values and then replace associated tokens using a\n      // single loop.\n      const serialized = Array(len);\n      let i = -1;\n      while (++i < len) {\n        // eslint-disable-next-line prefer-rest-params\n        serialized[i] = (log as any).serialize(arguments[i]);\n      }\n      serialized[0] = serialized[0].replace(\n        token,\n        // @ts-expect-error ts-migrate(6133) FIXME: 'offset' is declared but its value is never read.\n        (match: any, offset: any) => {\n          let result = match;\n          if (serialized.length > 1) {\n            // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n            result = formatters[match](serialized[1]);\n            serialized.splice(1, 1);\n          }\n          return result;\n        }\n      );\n      message = serialized.join(' ');\n    }\n    if (message && (!filter || filter.test(message))) {\n      // Trigger messages with `type` so queues can buffer the messages and replay\n      // them to a deferred reporter.\n      dispatcher.trigger(type, { type, level, message });\n    }\n    // Return the message for test coverage.\n    return message;\n  };\n};\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 1.\nconst log = factory(messageType);\n//\n// Properties\n(log as any).LEVEL_NONE = -1;\n(log as any).LEVEL_ERROR = 0;\n(log as any).LEVEL_WARN = 1;\n(log as any).LEVEL_INFO = 2;\n(log as any).LEVEL_DEBUG = 3;\n(log as any).LEVEL_LOG = 4;\n(log as any).LEVEL_GROUP = (log as any).LEVEL_INFO;\n(log as any).LEVEL_GROUP_END = (log as any).LEVEL_INFO;\n(log as any).level = (log as any).LEVEL_LOG;\n(log as any).redacts = !__DEV__;\n//\n// Control\n(log as any).setLevel = (level: any) => {\n  (log as any).level = Math.max(\n    (log as any).LEVEL_NONE,\n    Math.min(level, (log as any).LEVEL_LOG)\n  );\n};\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n(log as any).debug = factory(messageType, (log as any).LEVEL_DEBUG);\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n(log as any).info = factory(messageType, (log as any).LEVEL_INFO);\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n(log as any).warn = factory(messageType, (log as any).LEVEL_WARN);\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n(log as any).error = factory(messageType, (log as any).LEVEL_ERROR);\n(log as any).group = factory(groupType, (log as any).LEVEL_GROUP, 'Group');\n(log as any).groupCollapsed = factory(\n  groupCollapsedType,\n  (log as any).LEVEL_GROUP,\n  'Group'\n);\n(log as any).groupEnd = () => {\n  if ((log as any).level < (log as any).LEVEL_GROUP_END) {\n    return;\n  }\n  dispatcher.trigger(groupEndType, {\n    type: groupEndType,\n    level: (log as any).LEVEL_GROUP_END,\n  });\n};\n(log as any).serialize = (value: any) => {\n  let type;\n  // See: https://github.com/ariya/phantomjs/issues/11722\n  if (value === undefined) {\n    type = '[object Undefined]';\n  } else if (value === null) {\n    type = '[object Null]';\n  } else {\n    type = Object.prototype.toString.call(value);\n  }\n  switch (type) {\n    case '[object String]':\n      // Only sanitizes key=value pairs. JSON deserialization requires context,\n      // `value` must be an Object or Array for JSON redactions.\n      return (log as any).redacts\n        ? value.replace(redact, '$1$2$3REDACTED$4')\n        : value;\n    case '[object Object]':\n    // falls through\n    case '[object Array]':\n      try {\n        const replacer = (log as any).redacts\n          ? (log as any)._jsonReplacer\n          : null;\n        return JSON.stringify(value, replacer, 2);\n      } catch (error) {\n        return 'Unable to serialize value';\n      }\n    case '[object Boolean]':\n    // falls through\n    case '[object Number]':\n    // falls through\n    case '[object Function]':\n    // falls through\n    case '[object RegExp]':\n      return value.toString();\n    case '[object Date]':\n      return value.toUTCString();\n    case '[object Undefined]':\n      return 'undefined';\n    case '[object Null]':\n      return 'null';\n    default:\n      if (isErrorLike.test(type)) {\n        // Handle all error like objects uniformly by avoiding the internal\n        // error type information returned by toString().\n        // Opera Presto populates a stacktrace property more completely than the\n        // stack property.\n        const maxStackLength = (log as any)._getMaxStackLength();\n        let stack = value.stacktrace || value.stack;\n        if (stack && stack.length > maxStackLength) {\n          stack = stack.substr(0, maxStackLength - 3) + '...';\n        }\n        return (log as any).serialize({\n          type,\n          stack,\n          name: value.name,\n          message: value.message,\n        });\n      } else {\n        return value.toString();\n      }\n  }\n};\n(log as any)._jsonReplacer = (key: any, value: any) => {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  if (redactions[key]) {\n    return 'REDACTED';\n  } else if (Object.prototype.toString.call(value) === '[object String]') {\n    return (log as any).serialize(value);\n  } else {\n    return value;\n  }\n};\n(log as any)._getMaxStackLength = () => {\n  // Use a method so it can be overwritten by a test stub. This assumes logging\n  // Error instances is low-volume.\n  return 1000;\n};\nexport default log;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nfunction leadingZero(num: any) {\n  num = parseInt(num, 10);\n\n  if (_.isNaN(num)) {\n    return '';\n  }\n\n  const prefix = num < 10 ? '0' : '';\n  return prefix + num;\n}\n\nexport default leadingZero;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport format from 'date-fns/format';\nimport getDate from 'date-fns/getDate';\nimport getMonth from 'date-fns/getMonth';\nimport toDate from 'date-fns/toDate';\nimport leadingZero from 'app/js/utils/number/leadingZero';\nimport t from 'app/js/utils/t';\n\nfunction getSeasonEpisodeIndex(options: any) {\n  let seasonNumber = options.seasonIndex;\n  let episodeNumber = options.episodeIndex;\n\n  // If the seasonIndex is greater than 1000, assume it's a year.\n  // Separate zero equality check needed because `null >= 0 === true`\n  if ((episodeNumber > 0 || episodeNumber === 0) && seasonNumber < 1000) {\n    if (!options.noLeadingZero) {\n      seasonNumber = leadingZero(seasonNumber);\n      episodeNumber = leadingZero(episodeNumber);\n    }\n\n    const separator = options.separator;\n\n    if (options.useLongName) {\n      const translatedSeason = t('Season {seasonNumber}', { seasonNumber });\n      const translatedEpisode = t('Episode {episodeNumber}', { episodeNumber });\n\n      return `${translatedSeason}${separator || ' '}${translatedEpisode}`;\n    } else {\n      const translatedSeason = t('S{seasonNumber}', { seasonNumber });\n      const translatedEpisode = t('E{episodeNumber}', { episodeNumber });\n\n      return `${translatedSeason}${separator || ''}${translatedEpisode}`;\n    }\n  } else if (options.date) {\n    const date = toDate(options.date);\n\n    return t('{monthNumber}/{dayNumber}/{shortYear}', {\n      monthNumber: getMonth(date) + 1,\n      dayNumber: getDate(date),\n      shortYear: format(date, 'yy'),\n    });\n  } else {\n    return '';\n  }\n}\n\nexport default getSeasonEpisodeIndex;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport SectionModel from 'app/js/models/library/section/SectionModel';\n\n// @ts-expect-error ts-migrate(7023) FIXME: 'getSectionForItem' implicitly has return type 'an... Remove this comment to see the full error message\nexport default function getSectionForItem(item: any, options = {}) {\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'onlyIfCached' does not exist on type '{}... Remove this comment to see the full error message\n  const { onlyIfCached = true } = options;\n\n  if (!item) {\n    return undefined;\n  }\n\n  if (item.section) {\n    return item.section;\n  }\n\n  if (item.get('isSection')) {\n    return item;\n  }\n\n  const key = item.get('librarySectionID');\n\n  if (key) {\n    const cachedSection = new SectionModel(\n      { key },\n      {\n        server: item.server,\n        onlyIfCached,\n      }\n    );\n\n    return _.isEmpty(cachedSection) ? undefined : cachedSection;\n  }\n\n  if (item.parent) {\n    return getSectionForItem(item.parent, options);\n  }\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport streamTypes from 'app/js/utils/types/streamTypes';\nimport getStreams from './getStreams';\n\nfunction getSelectedAudio(media: any) {\n  const streamType = streamTypes.get('audio').id;\n  const selectedStreams = getStreams(media, { streamType, selected: true });\n\n  return _.first(selectedStreams);\n}\n\nexport default getSelectedAudio;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { NONE } from 'app/js/utils/constants/player/subtitleStreamIDs';\nimport streamTypes from 'app/js/utils/types/streamTypes';\nimport getStreams from './getStreams';\n\nfunction getSelectedSubtitles(media: any) {\n  const streams = getStreams(media, {\n    streamType: streamTypes.get('subtitles').id,\n  });\n\n  // Do not consider a \"None\" stream as selected.\n  const selectedStreams = streams.filter(\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'stream' implicitly has an 'any' type.\n    (stream) => stream.selected && stream.id !== NONE\n  );\n\n  return selectedStreams[0];\n}\n\nexport default getSelectedSubtitles;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport streamTypes from 'app/js/utils/types/streamTypes';\nimport getStreams from './getStreams';\n\nfunction getSelectedVideo(media: any) {\n  // Video streams don't actually have a selected flag, so just grab the first\n  // video stream.\n  const streamType = streamTypes.get('video').id;\n  const selectedStreams = getStreams(media, { streamType });\n\n  return _.first(selectedStreams);\n}\n\nexport default getSelectedVideo;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nfunction getStreams(media: any, options: any) {\n  const streams: any = [];\n\n  if (media) {\n    const part = _.first(media.Part);\n\n    if (part && part.Stream) {\n      // eslint-disable-next-line prefer-spread\n      streams.push.apply(streams, _.where(part.Stream, options));\n    }\n  }\n\n  return streams;\n}\n\nexport default getStreams;\n","import { LIBRARY } from 'app/js/utils/constants/providerIdentifiers';\nimport { CLOUD_SERVER_ID } from 'app/js/utils/constants/serverIDs';\n\ninterface SourceOptions {\n  serverIdentifier: string;\n  providerIdentifier?: string;\n  key?: string;\n}\n\nexport default function createSourceFromIdentifiers(\n  options: SourceOptions\n): string {\n  const { providerIdentifier = LIBRARY, serverIdentifier, key } = options;\n\n  const isServer = serverIdentifier !== CLOUD_SERVER_ID;\n\n  // See: https://docs.plex.tv/docs/api/media-providers#header-sources\n  let source = isServer\n    ? `server://${serverIdentifier}/${providerIdentifier}`\n    : `provider://${providerIdentifier}`;\n\n  if (key) {\n    source = `${source}${key}`;\n  }\n\n  return source;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst suffixes = ['B', 'KB', 'MB', 'GB', 'TB'];\n\nfunction formatBytes(bytes: any, digits = 2) {\n  if (bytes === 0) {\n    return `${(0).toFixed(digits)} ${suffixes[0]}`;\n  }\n\n  // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'number' is not assignable to par... Remove this comment to see the full error message\n  const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)), 10);\n\n  return `${(bytes / Math.pow(1024, i)).toFixed(digits)} ${suffixes[i]}`;\n}\n\nexport default formatBytes;\n","function formatResolution(\n  resolution: string | null | undefined,\n  scanType: string | null | undefined\n): string {\n  if (!resolution) {\n    return '';\n  }\n\n  if (/^\\d+$/.test(resolution)) {\n    const scanTypeAbbrev = scanType?.length ? scanType[0] : 'p';\n    return resolution + scanTypeAbbrev;\n  } else {\n    return resolution.toUpperCase();\n  }\n}\n\nexport default formatResolution;\n","import formatBitrateAsKilobits from 'app/js/utils/metadata/formatBitrateAsKilobits';\nimport formatBitrateAsMegabits from 'app/js/utils/metadata/formatBitrateAsMegabits';\n\nfunction formatVideoBitrate(kbps: number): string {\n  if (kbps >= 100) {\n    return formatBitrateAsMegabits(kbps);\n  }\n  return formatBitrateAsKilobits(kbps);\n}\n\nexport default formatVideoBitrate;\n","export default function formatBitrateAsMegabits(kbps: number): string {\n  if (!(kbps > 0)) {\n    return '';\n  }\n\n  let mbps = kbps / 1000;\n  mbps = mbps >= 0.1 ? Number(mbps.toFixed(1)) : mbps;\n  return mbps + ' Mbps';\n}\n","export default function formatBitrateAsKilobits(kbps: number): string {\n  return kbps > 0 ? `${kbps} kbps` : '';\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport videoPlayerQualities from 'app/js/utils/player/videoPlayerQualities';\nimport t from 'app/js/utils/t';\nimport formatResolution from './formatResolution';\nimport formatVideoBitrate from './formatVideoBitrate';\n\nfunction formatVideoQuality(quality: any) {\n  if (quality.index === videoPlayerQualities.CONVERT_AUTOMATICALLY) {\n    return t('Convert Automatically');\n  }\n\n  if (quality.index === videoPlayerQualities.ORIGINAL) {\n    return t('Original');\n  }\n\n  // Internal quality objects use `bitrate`, but server-provided media\n  // settings use `maxVideoBitrate`.\n\n  const bitrate = quality.bitrate || quality.maxVideoBitrate;\n  const videoResolution = quality.videoResolution;\n\n  if (!bitrate && !videoResolution) {\n    return t('Unknown');\n  }\n\n  const units = [];\n\n  if (bitrate) {\n    units.push(formatVideoBitrate(bitrate));\n  }\n\n  if (videoResolution && (!bitrate || bitrate >= 1000)) {\n    const resolution =\n      videoPlayerQualities.getResolutionFromSize(videoResolution);\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    units.push(formatResolution(resolution));\n  }\n\n  const formattedUnits = units.join(', ');\n\n  if (quality.description) {\n    return formattedUnits + ' ' + quality.description;\n  }\n\n  return formattedUnits;\n}\n\nexport default formatVideoQuality;\n","import { LIBRARY } from 'app/js/utils/constants/providerIdentifiers';\nimport { CLOUD_SERVER_ID } from 'app/js/utils/constants/serverIDs';\nimport path from 'app/js/utils/url/path';\n\nexport interface SourceIdentifiers {\n  isServer: boolean;\n  serverIdentifier: string;\n  providerIdentifier: string;\n  key: string;\n  ratingKey: string;\n}\n\nconst matchProviderAndMetadataKey = /\\/([^/]+)([^$]+)?/;\nconst identifiers: Record<string, SourceIdentifiers> = {};\n\nexport default function getIdentifiersFromSource(\n  source: string\n): SourceIdentifiers {\n  if (identifiers[source]) {\n    return identifiers[source];\n  }\n\n  // Parse identifiers from a source URI or source attribute.\n  // See: https://docs.plex.tv/docs/api/media-providers#header-sources\n  const {\n    // The source type that is the scheme of the URI can be either server or\n    // provider.\n    protocol,\n    // The host of the URI is the source identifier, which is the servers\n    // machine identifier or the providers identifier.\n    host,\n    // The provider ID at the start of the path is the providers identifier.\n    // This component is optional when the scheme is provider, since the\n    // SOURCE_ID and PROVIDER_ID would always be the same. The rest of the path\n    // represents the path of the content at the provider.\n    pathname,\n    // The source may include additional query parameters like X-Plex- headers\n    // or media query syntax for sorts and filters\n    search,\n  } = path.parseUri(source);\n\n  const isProvider = protocol === 'provider:';\n  const isServer = protocol === 'server:';\n\n  if (!isProvider && !isServer) {\n    throw new Error('Source identifier is lacking provider or server scheme');\n  }\n\n  const cleanPathname = pathname.replace(/\\/$/, '') || undefined;\n\n  const pathnameMatches =\n    cleanPathname?.match(matchProviderAndMetadataKey) || [];\n\n  // The embedded server doesn't return a provider with its source and will\n  // always start with /media/provider\n  const hasNoProvider = cleanPathname && pathnameMatches[1] === 'media';\n  const serverProviderIdentifier = hasNoProvider ? LIBRARY : pathnameMatches[1];\n\n  const key = isProvider || hasNoProvider ? cleanPathname : pathnameMatches[2];\n  const ratingKey = key ? key.slice(key.lastIndexOf('/') + 1) : undefined;\n\n  identifiers[source] = {\n    isServer,\n    serverIdentifier: isProvider ? CLOUD_SERVER_ID : host,\n    providerIdentifier: isProvider ? host : serverProviderIdentifier || LIBRARY,\n    // In order to preserve order of the query parameters do not parse the\n    // search query further and reattach it directly to the path to construct\n    // the key\n    key: key ? `${key}${search}` : '',\n    ratingKey: ratingKey || '',\n  };\n\n  return identifiers[source];\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport config from 'app/js/models/config';\n\nlet reportingHost: any;\n\nexport default function getPerformanceReportingHost() {\n  if (reportingHost === undefined) {\n    const matches = window.location.search.match(\n      new RegExp('performanceReportingHost=([^&=]+)')\n    );\n\n    reportingHost =\n      (matches && matches[1]\n        ? decodeURIComponent(matches[1])\n        : config.performanceReportingHost) || null;\n  }\n\n  return reportingHost;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport log from 'app/js/utils/log/log';\nimport getPerformanceReportingHost from 'app/js/utils/metrics/getPerformanceReportingHost';\n\nconst VERBOSE = __DEV__ && false;\n\nexport function createPerformanceUtil(\n  getReportingHost = getPerformanceReportingHost\n) {\n  const isSupportedByName = {};\n\n  function isSupported(name: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    if (name && !isSupportedByName[name]) {\n      // Plex Metrics event names are always supported for latency reporting.\n      // See: https://github.com/plexinc/plex-web-client/issues/10070\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      isSupportedByName[name] =\n        /^(client|playback):/.test(name) || !!getReportingHost();\n    }\n\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    return !!name && isSupportedByName[name];\n  }\n\n  const performance = {\n    startPeriod(name: any) {\n      return performance.mark(`${name}-start`);\n    },\n\n    endPeriod(name: any, startMark: any) {\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n      return performance.measure(name, startMark || `${name}-start`);\n    },\n\n    mark(name: any) {\n      let result = null;\n\n      if (isSupported(name)) {\n        __DEV__ && log('[Performance] Marking \"%s\"', name);\n\n        window.performance.mark(name);\n\n        const marks = window.performance.getEntriesByName(name);\n\n        result = marks[marks.length - 1];\n      } else if (VERBOSE) {\n        log('[Performance] Ignoring mark \"%s\"', name);\n      }\n\n      return result;\n    },\n\n    measure(name: any, startMark: any, endMark: any) {\n      let result = null;\n\n      if (isSupported(name)) {\n        try {\n          window.performance.measure(name, startMark, endMark);\n\n          window.performance.clearMarks(startMark);\n\n          const measures = window.performance.getEntriesByName(name);\n\n          result = measures[measures.length - 1];\n\n          __DEV__ &&\n            log(\n              '[Performance] Measure \"%s\" duration %dms',\n              name,\n              result.duration\n            );\n        } catch (error) {\n          // `performance.measure()` throws if `startMark` is not found.\n          __DEV__ && log('[Performance]', error.message);\n        }\n      } else if (VERBOSE) {\n        log('[Performance] Ignoring measure \"%s\"', name);\n      }\n\n      return result;\n    },\n  };\n\n  return performance;\n}\n\nexport default createPerformanceUtil();\n","/* eslint-plugin-disable @typescript-eslint */\n/* eslint-disable prefer-rest-params, prefer-spread */\n/* eslint consistent-this: 0 */\n\nimport _ from 'underscore';\nimport verifyEventHandlers from 'app/js/utils/mixins/verifyEventHandlers';\n\nconst eventSplitter = /\\s+/;\n// Implement fancy features of the Events API such as multiple event\n// names `\"change blur\"` and jQuery-style event maps `{change: action}`\n// in terms of the existing API.\nconst eventsApi = function (obj: any, action: any, name: any, rest: any) {\n  if (!name) {\n    return true;\n  }\n  // Handle event maps.\n  if (typeof name === 'object') {\n    for (const key in name) {\n      obj[action].apply(obj, [key, name[key]].concat(rest));\n    }\n    return false;\n  }\n  // Handle space separated event names.\n  if (eventSplitter.test(name)) {\n    const names = name.split(eventSplitter);\n    for (let i = 0, l = names.length; i < l; i++) {\n      obj[action].apply(obj, [names[i]].concat(rest));\n    }\n    return false;\n  }\n  return true;\n};\n// A difficult-to-believe, but optimized internal dispatch function for\n// triggering events. Tries to keep the usual cases speedy (most internal\n// Backbone events have 3 arguments).\nconst triggerEvents = function (events: any, args: any) {\n  let ev;\n  let i = -1;\n  const l = events.length;\n  const a1 = args[0];\n  const a2 = args[1];\n  const a3 = args[2];\n  switch (args.length) {\n    case 0:\n      while (++i < l) {\n        (ev = events[i]).callback.call(ev.ctx);\n      }\n      return;\n    case 1:\n      while (++i < l) {\n        (ev = events[i]).callback.call(ev.ctx, a1);\n      }\n      return;\n    case 2:\n      while (++i < l) {\n        (ev = events[i]).callback.call(ev.ctx, a1, a2);\n      }\n      return;\n    case 3:\n      while (++i < l) {\n        (ev = events[i]).callback.call(ev.ctx, a1, a2, a3);\n      }\n      return;\n    default:\n      while (++i < l) {\n        (ev = events[i]).callback.apply(ev.ctx, args);\n      }\n  }\n};\n// Derived from Backbone events.\nconst eventMixin = {\n  // Bind an event to a `callback` function. Passing `\"all\"` will bind\n  // the callback to all events fired.\n  on: function (name: any, callback: any, context: any) {\n    __DEV__ && verifyEventHandlers(name, callback);\n    if (!eventsApi(this, 'on', name, [callback, context]) || !callback) {\n      return this;\n    }\n    (this as any)._events || ((this as any)._events = {});\n    const events =\n      (this as any)._events[name] || ((this as any)._events[name] = []);\n    events.push({ callback: callback, context: context, ctx: context || this });\n    return this;\n  },\n  // Bind an event to only be triggered a single time. After the first time\n  // the callback is invoked, it will be removed.\n  once: function (name: any, callback: any, context: any) {\n    if (!eventsApi(this, 'once', name, [callback, context]) || !callback) {\n      return this;\n    }\n    const self = this;\n    const once = _.once(function () {\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n      self.off(name, once);\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      callback.apply(this, arguments);\n    });\n    (once as any)._callback = callback;\n    return this.on(name, once, context);\n  },\n  // Remove one or many callbacks. If `context` is null, removes all\n  // callbacks with that function. If `callback` is null, removes all\n  // callbacks for the event. If `name` is null, removes all bound\n  // callbacks for all events.\n  off: function (name: any, callback: any, context: any) {\n    let retain;\n    let ev;\n    let events;\n    let i;\n    let l;\n    let j;\n    let k;\n    if (\n      !(this as any)._events ||\n      !eventsApi(this, 'off', name, [callback, context])\n    ) {\n      return this;\n    }\n    if (!name && !callback && !context) {\n      (this as any)._events = undefined;\n      return this;\n    }\n    const names = name ? [name] : _.keys((this as any)._events);\n    for (i = 0, l = names.length; i < l; i++) {\n      name = names[i];\n      events = (this as any)._events[name];\n      if (events) {\n        (this as any)._events[name] = retain = [];\n        if (callback || context) {\n          for (j = 0, k = events.length; j < k; j++) {\n            ev = events[j];\n            if (\n              (callback &&\n                callback !== ev.callback &&\n                callback !== ev.callback._callback) ||\n              (context && context !== ev.context)\n            ) {\n              retain.push(ev);\n            }\n          }\n        }\n        if (!retain.length) {\n          delete (this as any)._events[name];\n        }\n      }\n    }\n    return this;\n  },\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\n  // passed the same arguments as `trigger` is, apart from the event name\n  // (unless you're listening on `\"all\"`, which will cause your callback to\n  // receive the true name of the event as the first argument).\n  trigger: function (name: any) {\n    if (!(this as any)._events) {\n      return this;\n    }\n    const args = [].slice.call(arguments, 1);\n    if (!eventsApi(this, 'trigger', name, args)) {\n      return this;\n    }\n    const events = (this as any)._events[name];\n    const allEvents = (this as any)._events.all;\n    if (events) {\n      triggerEvents(events, args);\n    }\n    if (allEvents) {\n      triggerEvents(allEvents, arguments);\n    }\n    return this;\n  },\n  // Tell this object to stop listening to either specific events ... or\n  // to every object it's currently listening to.\n  stopListening: function (obj: any, name: any, callback: any) {\n    let listeningTo = (this as any)._listeningTo;\n    if (!listeningTo) {\n      return this;\n    }\n    const remove = !name && !callback;\n    if (!callback && typeof name === 'object') {\n      callback = this;\n    }\n    if (obj) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      (listeningTo = {})[obj._listenId] = obj;\n    }\n    for (const id in listeningTo) {\n      obj = listeningTo[id];\n      obj.off(name, callback, this);\n      if (remove || _.isEmpty(obj._events)) {\n        delete (this as any)._listeningTo[id];\n      }\n    }\n    return this;\n  },\n  hasListener: function (eventName: any) {\n    const eventListeners =\n      (this as any)._events && (this as any)._events[eventName];\n    return Array.isArray(eventListeners) && eventListeners.length > 0;\n  },\n};\nconst listenMethods = { listenTo: 'on', listenToOnce: 'once' };\n// Inversion-of-control versions of `on` and `once`. Tell *this* object to\n// listen to an event in another object ... keeping track of what it's\n// listening to.\n_.each(listenMethods, function (implementation, method) {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  eventMixin[method] = function (obj: any, name: any, callback: any) {\n    const listeningTo =\n      (this as any)._listeningTo || ((this as any)._listeningTo = {});\n    const id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n    listeningTo[id] = obj;\n    if (!callback && typeof name === 'object') {\n      callback = this;\n    }\n    obj[implementation](name, callback, this);\n    return this;\n  };\n});\n// Aliases for backwards compatibility.\n(eventMixin as any).bind = eventMixin.on;\n(eventMixin as any).unbind = eventMixin.off;\nexport default eventMixin;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst fnToString = (fn: any) => Function.prototype.toString.call(fn);\nconst objStringValue = fnToString(Object);\n\nexport default function isPlainObject(obj: any) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  const proto =\n    typeof obj.constructor === 'function'\n      ? Object.getPrototypeOf(obj)\n      : Object.prototype;\n\n  if (proto === null) {\n    return true;\n  }\n\n  const constructor = proto.constructor;\n\n  return (\n    typeof constructor === 'function' &&\n    constructor instanceof constructor &&\n    fnToString(constructor) === objStringValue\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport log from 'app/js/utils/log/log';\nimport parseXML from 'app/js/utils/parser/parseXML';\n\n// DEPRECATED: Use `parser2`\n\n// We should try to clean up the data we get back from Plex Media Server.\n// For example, booleans are represented by the string '1' most times. We\n// can make our lives easier by converting this to an actual boolean.\n\nfunction parseIterator(fn: any, keys: any) {\n  if (Array.isArray(keys)) {\n    _.each(keys, fn);\n  } else {\n    fn(keys);\n  }\n}\n\nfunction decodeQueryString(queryStringParts: any) {\n  return _.reduce(\n    queryStringParts,\n    function (memo, param) {\n      const parts = param.split('=');\n      let key = parts[0];\n      let val = parts[1];\n\n      try {\n        key = decodeURIComponent(key);\n        // missing `=` should be `null`:\n        // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n        val = val === undefined ? null : decodeURIComponent(val);\n\n        if (!memo.hasOwnProperty(key)) {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          memo[key] = val;\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        } else if (Array.isArray(memo[key])) {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          memo[key].push(val);\n        } else {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          memo[key] = [memo[key], val];\n        }\n      } catch (error) {\n        log.warn('Unable to decode query string at ' + key);\n      }\n\n      return memo;\n    },\n    {}\n  );\n}\n\nconst parser = {\n  parseXML,\n\n  replaceXMLElementNames: function (\n    xml: any,\n    elementNames: any,\n    replacement: any\n  ) {\n    if (!Array.isArray(elementNames)) {\n      elementNames = [elementNames];\n    }\n\n    const joinedNames = elementNames.join('|');\n    const openRegex = new RegExp('<(' + joinedNames + ')', 'g');\n    const closeRegex = new RegExp('</(' + joinedNames + ')>', 'g');\n\n    xml = xml.replace(openRegex, '<' + replacement + ' elementName=\"$1\"');\n    xml = xml.replace(closeRegex, '</' + replacement + '>');\n\n    return xml;\n  },\n\n  parseEncodedString: function (attributes: any, keys: any) {\n    if (!attributes) {\n      return;\n    }\n\n    function decodeString(key: any) {\n      if (attributes.hasOwnProperty(key)) {\n        const value = attributes[key];\n\n        if (value == null) {\n          attributes[key] = '';\n        } else {\n          try {\n            attributes[key] = decodeURIComponent(value);\n          } catch (error) {\n            // Use the encoded string if we are unable to decode.\n          }\n        }\n      }\n    }\n\n    parseIterator(decodeString, keys);\n  },\n\n  parseInteger: function (attributes: any, keys: any) {\n    if (!attributes) {\n      return;\n    }\n\n    function convertToInteger(key: any) {\n      if (attributes.hasOwnProperty(key)) {\n        const value = attributes[key];\n\n        if (value == null || value === '') {\n          attributes[key] = 0;\n        } else {\n          attributes[key] = parseInt(value, 10);\n        }\n      }\n    }\n\n    parseIterator(convertToInteger, keys);\n  },\n\n  parseFloat: function (attributes: any, keys: any) {\n    if (!attributes) {\n      return;\n    }\n\n    function convertToFloat(key: any) {\n      if (attributes.hasOwnProperty(key)) {\n        const value = attributes[key];\n\n        if (value === null || value === '') {\n          attributes[key] = 0;\n        } else {\n          attributes[key] = parseFloat(value);\n        }\n      }\n    }\n\n    parseIterator(convertToFloat, keys);\n  },\n\n  parseBoolean: function (attributes: any, keys: any) {\n    if (!attributes) {\n      return;\n    }\n\n    function convertToBoolean(key: any) {\n      if (attributes.hasOwnProperty(key)) {\n        const value = attributes[key];\n\n        attributes[key] = Number(value) === 1 || value === 'true';\n      }\n    }\n\n    parseIterator(convertToBoolean, keys);\n  },\n\n  parseArray: function (attributes: any, keys: any) {\n    if (!attributes) {\n      return;\n    }\n\n    function convertToArray(key: any) {\n      if (attributes.hasOwnProperty(key)) {\n        const value = attributes[key];\n\n        if (!Array.isArray(value)) {\n          attributes[key] = [value];\n        }\n      } else {\n        attributes[key] = [];\n      }\n    }\n\n    parseIterator(convertToArray, keys);\n  },\n\n  // Derived from https://github.com/sindresorhus/query-string\n  parseQueryString: function (attributes: any, keys: any, separator: any) {\n    if (!attributes) {\n      return;\n    }\n\n    separator || (separator = '&');\n\n    function convertToObject(key: any) {\n      if (!attributes.hasOwnProperty(key)) {\n        return;\n      }\n\n      let queryString = attributes[key];\n\n      // Don't try to parse again if it's already an object.\n      if (_.isObject(queryString)) {\n        return;\n      }\n\n      if (!_.isString(queryString)) {\n        attributes[key] = {};\n        return;\n      }\n\n      queryString = queryString.trim().replace(/^(\\?|#)/, '');\n\n      if (!queryString) {\n        attributes[key] = {};\n        return;\n      }\n\n      attributes[key] = decodeQueryString(queryString.split(separator));\n    }\n\n    parseIterator(convertToObject, keys);\n  },\n};\n\nexport default parser;\n","function parseBoolean(value: unknown): boolean {\n  return Number(value) === 1 || value === 'true';\n}\n\nexport default parseBoolean;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction parseInteger(value: any) {\n  if (value == null || value === '') {\n    return 0;\n  } else {\n    return parseInt(value, 10);\n  }\n}\n\nexport default parseInteger;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport log from 'app/js/utils/log/log';\nimport isString from 'app/js/utils/string/isString';\n\nfunction parseJSON(value: any, defaultValue = {}) {\n  try {\n    return JSON.parse(value);\n  } catch (error) {\n    const snippet = isString(value) ? value.substring(0, 50) : 'no response';\n    log.warn(`[Parser] Unable to parse JSON: ${error.message} (${snippet})`);\n\n    return defaultValue;\n  }\n}\n\nexport default parseJSON;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport log from 'app/js/utils/log/log';\nimport isPlainObject from 'app/js/utils/object/isPlainObject';\nimport isString from 'app/js/utils/string/isString';\n\n// Derived from https://github.com/sindresorhus/query-string\nfunction parseQueryString(value: any, options: any) {\n  options || (options = {});\n\n  // Don't try to parse again if it's already an object.\n  if (isPlainObject(value)) {\n    return value;\n  }\n\n  if (!isString(value)) {\n    return {};\n  }\n\n  value = value.trim().replace(/^(\\?|#)/, '');\n\n  if (!value) {\n    return {};\n  }\n\n  const separators =\n    (options.separators && options.separators.join('')) ||\n    options.separator ||\n    '&';\n\n  const separatorsRegex = new RegExp(`[${separators}]+`);\n\n  return value.split(separatorsRegex).reduce((memo: any, param: any) => {\n    let [key, val] = param.split('=');\n\n    try {\n      key = decodeURIComponent(key);\n      // missing `=` should be `null`:\n      // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n      val = val === undefined ? null : decodeURIComponent(val);\n\n      if (!memo.hasOwnProperty(key)) {\n        memo[key] = val;\n      } else if (Array.isArray(memo[key])) {\n        memo[key].push(val);\n      } else {\n        memo[key] = [memo[key], val];\n      }\n    } catch (error) {\n      log.warn(`[Parser] Unable to decode query string at ${key}`);\n    }\n\n    return memo;\n  }, {});\n}\n\nexport default parseQueryString;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport X2JS from 'x2js';\nimport log from 'app/js/utils/log/log';\n\nlet xmlParser: any;\n\nfunction parseXML(value: any) {\n  const empty = {};\n\n  let result;\n\n  if (!value) {\n    log.warn('[Parser] Empty XML source');\n    return empty;\n  }\n\n  xmlParser =\n    xmlParser ||\n    new X2JS({\n      attributePrefix: '',\n      // @ts-expect-error ts-migrate(2322) FIXME: Type '{}' is not assignable to type '\"object\" | \"t... Remove this comment to see the full error message\n      emptyNodeForm: {},\n      ignoreRoot: true,\n    });\n\n  try {\n    result = value && xmlParser.xml2js(value);\n  } catch (error) {\n    log.warn('[Parser] Unable to parse XML: ' + error.message);\n  }\n\n  return result || empty;\n}\n\nexport default parseXML;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { getAllMetadataTypes } from 'app/js/utils/types/metadataTypes';\n\nlet metadataDirectoryTypes: any;\n\nfunction replaceMetadataDirectoryXMLElementNames(xml: any) {\n  // Defer this work since the type names are translated by\n  // `getAllMetadataTypes` and a localizer won't be ready immediately.\n\n  if (!metadataDirectoryTypes) {\n    metadataDirectoryTypes = getAllMetadataTypes()\n      .map((metadataType: any) => metadataType.typeString)\n      .join('|');\n  }\n\n  const openRegex = new RegExp(\n    `<Directory([^>]*?)type=\"(${metadataDirectoryTypes})\"([\\\\s\\\\S]*?)</Directory>`,\n    'gm'\n  );\n  const closedRegex = new RegExp(\n    `<Directory([^>]*?)type=\"(${metadataDirectoryTypes})\"([\\\\s\\\\S]*?)/>`,\n    'gm'\n  );\n\n  return xml\n    .replace(\n      openRegex,\n      '<Metadata$1type=\"$2\" elementName=\"Directory\"$3</Metadata>'\n    )\n    .replace(closedRegex, '<Metadata$1type=\"$2\" elementName=\"Directory\"$3/>');\n}\n\nexport default replaceMetadataDirectoryXMLElementNames;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport replaceMetadataDirectoryXMLElementNames from './replaceMetadataDirectoryXMLElementNames';\nimport replaceXMLElementNames from './replaceXMLElementNames';\n\nexport const METADATA_XML_ELEMENT_NAMES = [\n  'Video',\n  'Track',\n  'Photo',\n  'Playlist',\n  'Game',\n];\n\nfunction replaceMetadataXMLElementNames(xml: any, options: any) {\n  const includeDirectories = options && options.includeDirectories;\n  const names = includeDirectories\n    ? ['Directory', ...METADATA_XML_ELEMENT_NAMES]\n    : METADATA_XML_ELEMENT_NAMES;\n\n  const output = replaceXMLElementNames(xml, names, 'Metadata');\n\n  if (includeDirectories) {\n    return output;\n  }\n\n  return replaceMetadataDirectoryXMLElementNames(output);\n}\n\nexport default replaceMetadataXMLElementNames;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction replaceXMLElementNames(xml: any, elementNames: any, replacement: any) {\n  if (!Array.isArray(elementNames)) {\n    elementNames = [elementNames];\n  }\n\n  const joinedNames = elementNames.join('|');\n  const openRegex = new RegExp(`<(${joinedNames})`, 'g');\n  const closeRegex = new RegExp(`</(${joinedNames})>`, 'g');\n\n  return xml\n    .replace(openRegex, `<${replacement} elementName=\"$1\"`)\n    .replace(closeRegex, `</${replacement}>`);\n}\n\nexport default replaceXMLElementNames;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction stringifyBoolean(value: any) {\n  return value ? '1' : '0';\n}\n\nexport default stringifyBoolean;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction getOrderedKeys(value: any, options: any) {\n  const keys = Object.keys(value);\n  if (options.orFields && options.andFields) {\n    // Keys are sorted so that OR parameters are grouped together first,\n    // with AND keys sorted last. This avoids simple ambiguities in logic.\n    keys.sort((keyA, keyB) => {\n      if (options.orFields.includes(keyA) && options.andFields.includes(keyB)) {\n        return -1;\n      }\n      if (options.andFields.includes(keyA) && options.orFields.includes(keyB)) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n  return keys;\n}\nfunction stringifyQueryString(value = {}, options = {}) {\n  return getOrderedKeys(value, options).reduce((queryString, key, index) => {\n    let separator = (options as any).separator || '&';\n    if (index === 0) {\n      separator = '';\n    } else if (\n      (options as any).orFields &&\n      (options as any).orFields.includes(key)\n    ) {\n      separator = '|';\n    } else if (\n      (options as any).andFields &&\n      (options as any).andFields.includes(key)\n    ) {\n      separator = '&';\n    }\n    return (\n      queryString +\n      `${separator}${encodeURIComponent(key)}=${encodeURIComponent(\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        value[key]\n      )}`\n    );\n  }, '');\n}\nexport default stringifyQueryString;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport parseArray from 'app/js/utils/parser/parseArray';\nimport parseBoolean from 'app/js/utils/parser/parseBoolean';\nimport parseEncodedString from 'app/js/utils/parser/parseEncodedString';\nimport parseFloat from 'app/js/utils/parser/parseFloat';\nimport parseInteger from 'app/js/utils/parser/parseInteger';\nimport parseJSON from 'app/js/utils/parser/parseJSON';\nimport parseList from 'app/js/utils/parser/parseList';\nimport parseQueryString from 'app/js/utils/parser/parseQueryString';\nimport parseString from 'app/js/utils/parser/parseString';\nimport parseXML from 'app/js/utils/parser/parseXML';\nimport stringifyBoolean from 'app/js/utils/parser/stringifyBoolean';\nimport stringifyList from 'app/js/utils/parser/stringifyList';\nimport stringifyQueryString from 'app/js/utils/parser/stringifyQueryString';\n\nconst parser2 = {\n  // @ts-expect-error ts-migrate(7023) FIXME: 'parseType' implicitly has return type 'any' becau... Remove this comment to see the full error message\n  parseType: function (type: any, value: any, options: any) {\n    // @ts-expect-error ts-migrate(7022) FIXME: 'parse' implicitly has type 'any' because it does ... Remove this comment to see the full error message\n    const parse = this.getByType('parse', type, (this as any)._parseTypeMap);\n    if (parse) {\n      return parse(value, options);\n    } else {\n      return value;\n    }\n  },\n  // @ts-expect-error ts-migrate(7023) FIXME: 'stringifyType' implicitly has return type 'any' b... Remove this comment to see the full error message\n  stringifyType: function (type: any, value: any, options: any) {\n    if (_.isString(value)) {\n      return value;\n    }\n    if (value == null) {\n      return '';\n    }\n    // @ts-expect-error ts-migrate(7022) FIXME: 'stringify' implicitly has type 'any' because it d... Remove this comment to see the full error message\n    const stringify = this.getByType(\n      'stringify',\n      type,\n      (this as any)._stringifyTypeMap\n    );\n    if (stringify) {\n      return stringify(value, options);\n    } else {\n      // We don't need to stringify this type in any specific way. Let query\n      // string serialization handle it.\n      return value;\n    }\n  },\n  // @ts-expect-error ts-migrate(7023) FIXME: 'getByType' implicitly has return type 'any' becau... Remove this comment to see the full error message\n  getByType: function (prefix: any, type: any, typeMap: any) {\n    if (typeMap && _.has(typeMap, type)) {\n      return typeMap[type];\n    }\n    // If the parser isn't explicitly defined in a map, try to derive it by\n    // formatting the name as we'd expect (e.g. parseExample).\n    const titleCaseType = type.charAt(0).toUpperCase() + type.slice(1);\n    const name = prefix + titleCaseType;\n    if (_.has(this, name)) {\n      // Store it in the type map so we don't need to do the string\n      // manipulation again.\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      typeMap[type] = this[name];\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      return this[name];\n    }\n  },\n  parseBoolean,\n  stringifyBoolean,\n  parseInteger,\n  parseFloat,\n  parseString,\n  parseEncodedString,\n  parseArray,\n  parseList,\n  stringifyList,\n  parseQueryString,\n  stringifyQueryString,\n  parseJSON,\n  parseXML,\n  reset: function () {\n    // Add the types that break out naming convention to the map so\n    // `parseType` works with them.\n    (this as any)._parseTypeMap = {\n      json: this.parseJSON,\n      xml: this.parseXML,\n    };\n    (this as any)._stringifyTypeMap = {};\n  },\n};\nparser2.reset();\nexport default parser2;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction parseFloat(value: any) {\n  if (value == null || value === '') {\n    return 0;\n  } else {\n    return window.parseFloat(value);\n  }\n}\n\nexport default parseFloat;\n","function parseString(value: unknown): string {\n  if (value == null) {\n    return '';\n  }\n\n  return String(value);\n}\n\nexport default parseString;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport log from 'app/js/utils/log/log';\n\nfunction parseEncodedString(value: any) {\n  if (value == null) {\n    return '';\n  } else {\n    try {\n      return decodeURIComponent(value);\n    } catch (error) {\n      log.warn('[Parser] Unable to parse encoded string');\n      return value;\n    }\n  }\n}\n\nexport default parseEncodedString;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction parseArray(value: any) {\n  if (value) {\n    if (Array.isArray(value)) {\n      return value;\n    } else {\n      return [value];\n    }\n  } else {\n    return [];\n  }\n}\n\nexport default parseArray;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction parseList(value: any) {\n  if (value) {\n    if (Array.isArray(value)) {\n      return value;\n    } else {\n      return value.split(',');\n    }\n  } else {\n    return [];\n  }\n}\n\nexport default parseList;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction stringifyList(value: any) {\n  return value.join(',');\n}\n\nexport default stringifyList;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport log from 'app/js/utils/log/log';\nimport getQualityAttribute from './getQualityAttribute';\n\nconst abstractPlayerQualities = {\n  //\n  // Properties\n  ORIGINAL: -1,\n  CONVERT_AUTOMATICALLY: -2,\n  qualities: {},\n  //\n  // Control\n  getQualityByIndex: function (qualityIndex: any) {\n    if (qualityIndex === this.CONVERT_AUTOMATICALLY) {\n      return { index: this.CONVERT_AUTOMATICALLY };\n    }\n    // The \"Original\" quality setting has an index of this.ORIGINAL.\n    if (qualityIndex < 0) {\n      return { index: this.ORIGINAL };\n    }\n    const quality = { index: qualityIndex };\n    _.each(\n      this.qualities,\n      // @ts-expect-error ts-migrate(6133) FIXME: 'value' is declared but its value is never read.\n      function (value, key) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        quality[key] = _.result(this.qualities, key)[qualityIndex];\n      },\n      this\n    );\n    return quality;\n  },\n  getQualityCount: function () {\n    const key = _.first(_.keys(this.qualities));\n    // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'string | undefined' is not assig... Remove this comment to see the full error message\n    return _.result(this.qualities, key).length;\n  },\n  getQualityAttribute: function (item: any) {\n    const name = getQualityAttribute(\n      item,\n      item.server.get('isPrivateConnection')\n    );\n    // Keep the video quality attribute names the same for backwards\n    // compatibility, but prefix the names for music and photos so they\n    // don't collide.\n    return (this as any).type !== 'video'\n      ? (this as any).type + '!' + name\n      : name;\n  },\n  getSyncQualityAttribute: function () {\n    return 'syncQuality!' + (this as any).type;\n  },\n  getCurrentQuality: function (\n    item: any,\n    settings: any,\n    onSettingsQualityIndexDoesNotExist: any\n  ) {\n    const qualityAttribute = this.getQualityAttribute(item);\n    let qualityIndex = settings.get(qualityAttribute);\n    // Make sure the quality setting is within reasonable bounds.\n    if (qualityIndex >= this.getQualityCount()) {\n      log.warn('Quality index ' + qualityIndex + ' is out of bounds');\n      qualityIndex = _.result(settings, 'defaults')[qualityAttribute];\n      onSettingsQualityIndexDoesNotExist({ [qualityAttribute]: qualityIndex });\n    }\n    return _.extend(this.getQualityByIndex(qualityIndex), {\n      attribute: qualityAttribute,\n    });\n  },\n  getAvailableQualities: function (options: any) {\n    options || (options = {});\n    const lowestQualityIndex = options.lowestQualityIndex;\n    let highestQualityIndex = options.highestQualityIndex;\n    const comparator = options.comparator;\n    const availableQualities = [];\n    // TV callers define a highestQualityIndex argument with this.ORIGINAL\n    // value. Web callers don't define highestQualityIndex and treat\n    // an undefined highestQualityIndex as equaling this.ORIGINAL.\n    if (highestQualityIndex === this.ORIGINAL) {\n      highestQualityIndex = undefined;\n    }\n    for (let i = 0, len = this.getQualityCount(); i < len; i++) {\n      if (lowestQualityIndex && i < lowestQualityIndex) {\n        continue;\n      }\n      if (highestQualityIndex && i > highestQualityIndex) {\n        return availableQualities;\n      }\n      if (comparator && comparator.call(this, i)) {\n        return availableQualities;\n      }\n      availableQualities.push(this.getQualityByIndex(i));\n    }\n    return availableQualities;\n  },\n  getResolutionFromSize: function (size: any) {\n    // Format: 'widthxheight'\n    const dimensions = size.split('x');\n    const height = parseInt(dimensions[1], 10);\n    return this.getResolutionFromHeight(height);\n  },\n  getResolutionFromHeight: function (height: any) {\n    // Values are derived from Plex Media Server's MediaItem.cpp\n    if (height > 2560) {\n      return '8k';\n    } else if (height > 1100) {\n      return '4k';\n    } else if (height > 720) {\n      return '1080';\n    } else if (height > 576) {\n      return '720';\n    } else if (height > 480) {\n      return '576';\n    } else if (height > 360) {\n      return '480';\n    } else {\n      return 'sd';\n    }\n  },\n  getHeightFromResolution: function (resolution: any) {\n    switch (resolution) {\n      case '8k':\n        return 5120;\n      case '4k':\n        return 2560;\n      case '1080':\n        return 1080;\n      case '720':\n        return 720;\n      case '576':\n        return 576;\n      case '480':\n        return 480;\n      case 'sd':\n        return 360;\n      default:\n        return 360;\n    }\n  },\n  // Returns the quality index equal to or closest to the target value\n  // without going over.\n  getNearestIndex: function (collection: any, target: any) {\n    if (!target) {\n      return this.ORIGINAL;\n    }\n    let qualityIndex = collection.indexOf(target);\n    if (qualityIndex < 0) {\n      qualityIndex = 0;\n      for (let i = 0, len = collection.length; i < len; i++) {\n        const value = collection[i];\n        if (value > target) {\n          break;\n        }\n        qualityIndex = i;\n      }\n    }\n    return qualityIndex;\n  },\n};\nexport default abstractPlayerQualities;\n","/* eslint-plugin-disable @typescript-eslint */\n\n/**\n * @param {MetadataModel|MetadataItem} metadataItemOrModel\n * @param {boolean} isPrivateConnection\n * @returns {boolean} true if item is considered local\n */\nexport default function isLocalMetadataItem(\n  metadataItemOrModel: any,\n  isPrivateConnection: any\n) {\n  const metadataItem = metadataItemOrModel.toJSON\n    ? metadataItemOrModel.toJSON()\n    : metadataItemOrModel;\n\n  const { isExtra, guid } = metadataItem;\n\n  const isOnlineExtra = isExtra && !/^file:\\/\\//.test(guid);\n\n  return !isOnlineExtra && isPrivateConnection;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport isLocalMetadataItem from 'app/js/utils/player/isLocalMetadataItem';\n\n/**\n * @param {MetadataModel} metadataItem\n * @param {boolean} isPrivateConnection\n * @returns string The quality attribute to be used with a model.\n */\nexport default function getQualityAttribute(\n  metadataItem: any,\n  isPrivateConnection: any\n) {\n  return isLocalMetadataItem(metadataItem, isPrivateConnection)\n    ? 'localQuality'\n    : 'remoteQuality';\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function getResolution(width: any, height: any) {\n  const resolutionByHeight = height ? Math.round(height / 8) * 8 : 0;\n  const resolutionByWidth = width ? Math.round((width / 8) * (9 / 16)) * 8 : 0;\n\n  return Math.max(resolutionByHeight, resolutionByWidth);\n}\n","/* eslint array-bracket-spacing: 0 */\n\nimport _ from 'underscore';\nimport getResolution from 'app/js/utils/metadata/getResolution';\nimport abstractPlayerQualities from 'app/js/utils/player/abstractPlayerQualities';\n\nconst videoPlayerQualities = _.extend({}, abstractPlayerQualities, {\n  //\n  // Properties\n\n  type: 'video',\n\n  qualities: {\n    bitrate: [\n      64, 96, 208, 320, 720, 1500, 2000, 3000, 4000, 8000, 10000, 12000, 20000,\n    ],\n    videoResolution: [\n      '220x128',\n      '220x128',\n      '284x160',\n      '420x240',\n      '576x320',\n      '720x480',\n      '1280x720',\n      '1280x720',\n      '1280x720',\n      '1920x1080',\n      '1920x1080',\n      '1920x1080',\n      '1920x1080',\n    ],\n    videoQuality: [10, 20, 30, 30, 40, 60, 60, 75, 100, 60, 75, 90, 100],\n  },\n\n  //\n  // Control\n  getAvailableQualitiesFor(media: any, transcodeServer: any, options: any) {\n    if (!media || !transcodeServer) {\n      return [];\n    }\n\n    if (!Array.isArray(media)) {\n      media = [media];\n    }\n\n    if (media.length === 0) {\n      return [];\n    }\n\n    const canTranscode = transcodeServer.get('transcoderVideo');\n    const canRemuxOnly = transcodeServer.get('transcoderVideoRemuxOnly');\n    const mediaResolution = this.getMaximumResolution(media);\n\n    // If the video does not specify the resolution for an\n    // individual video stream, we can't know when to transcode to a\n    // different quality.\n\n    if (!canTranscode || canRemuxOnly || !mediaResolution) {\n      return [];\n    }\n\n    const maxUploadBitrate = transcodeServer.get('maxUploadBitrate');\n\n    const qualityOptions = _.extend({}, options, {\n      comparator: function (i: any) {\n        if (maxUploadBitrate && this.qualities.bitrate[i] > maxUploadBitrate) {\n          return true;\n        }\n\n        const dimensions = this.qualities.videoResolution[i].split('x');\n        const qualityResolution = getResolution(dimensions[0], dimensions[1]);\n\n        return qualityResolution > mediaResolution;\n      },\n    });\n\n    return this.getAvailableQualities(qualityOptions);\n  },\n\n  getBestAvailableQuality: function (\n    preferredQuality: any,\n    availableQualities: any\n  ) {\n    if (availableQualities.length === 0) {\n      return videoPlayerQualities.ORIGINAL;\n    }\n\n    if (\n      availableQualities.find(\n        (quality: any) => quality.index === preferredQuality.index\n      )\n    ) {\n      return preferredQuality.index;\n    }\n\n    return _.last(availableQualities).index;\n  },\n\n  getNearestIndexToBitrate: function (targetBitrate: any) {\n    return this.getNearestIndex(this.qualities.bitrate, targetBitrate);\n  },\n\n  getMinimumQuality: function (indexA: any, indexB: any) {\n    // ORIGINAL quality index is -1 while others are >= 0. Project ORIGINAL\n    // indices to MAX_VALUE to ensure a linear comparison.\n    const projectedIndexA =\n      indexA === videoPlayerQualities.ORIGINAL ? Number.MAX_VALUE : indexA;\n    const projectedIndexB =\n      indexB === videoPlayerQualities.ORIGINAL ? Number.MAX_VALUE : indexB;\n    return projectedIndexA < projectedIndexB ? indexA : indexB;\n  },\n\n  getMaximumQuality: function (indexA: any, indexB: any) {\n    return this.getMinimumQuality(indexA, indexB) === indexA ? indexB : indexA;\n  },\n\n  getMaximumResolution: function (mediaItems: any) {\n    return mediaItems.reduce(function (maxResolution: any, mediaItem: any) {\n      if (!mediaItem.width && !mediaItem.height) {\n        return maxResolution;\n      }\n\n      const resolution = getResolution(mediaItem.width, mediaItem.height);\n      return maxResolution === null || resolution > maxResolution\n        ? resolution\n        : maxResolution;\n    }, null);\n  },\n\n  isExplicitQuality: function (index: any) {\n    return (\n      index !== videoPlayerQualities.ORIGINAL &&\n      index !== videoPlayerQualities.CONVERT_AUTOMATICALLY\n    );\n  },\n});\n\nexport default videoPlayerQualities;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport BaseClass from 'app/js/utils/BaseClass';\n\nfunction mapInverted(keys: any, values: any) {\n  const invertedKeys = _.invert(keys);\n\n  return _.reduce(\n    keys,\n    (memo, key) => {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      memo[key] = values[invertedKeys[key]];\n      return memo;\n    },\n    {}\n  );\n}\n\nconst slideshowStateByState = {\n  playing: 'playing',\n  paused: 'paused',\n  stopped: 'paused',\n  error: 'paused',\n  buffering: 'playing',\n};\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst PlayerUtil = BaseClass.extend({\n  //\n  // Properties\n\n  types: {\n    VIDEO: 'video',\n    MUSIC: 'music',\n    PHOTO: 'photo',\n    ROM: 'rom',\n  },\n\n  elements: {\n    VIDEO: 'video',\n    MUSIC: 'audio',\n    PHOTO: 'photo',\n  },\n\n  streams: {\n    VIDEO: 'video',\n    MUSIC: 'audio',\n    PHOTO: 'photo',\n  },\n\n  states: {\n    STOPPED: 'stopped',\n    PAUSED: 'paused',\n    PLAYING: 'playing',\n    BUFFERING: 'buffering',\n    ERROR: 'error',\n  },\n\n  slideshowStates: {\n    PLAYING: 'playing',\n    PAUSED: 'paused',\n  },\n\n  castStates: {\n    // Cast errors use the IDLE state with idleReason=ERROR. List the error\n    // state first so the inverted object maps IDLE to STOPPED.\n    ERROR: 'IDLE',\n    STOPPED: 'IDLE',\n    PAUSED: 'PAUSED',\n    PLAYING: 'PLAYING',\n    BUFFERING: 'BUFFERING',\n  },\n\n  mediaStates: {\n    LOADING: 'LOADING',\n    BUFFERING: 'BUFFERING',\n    READY: 'READY',\n    ERROR: 'ERROR',\n  },\n\n  //\n  // Init\n\n  initialize() {\n    this.typeByElement = mapInverted(this.elements, this.types);\n    this.elementByType = mapInverted(this.types, this.elements);\n\n    this.typeByStream = mapInverted(this.streams, this.types);\n    this.streamByType = mapInverted(this.types, this.streams);\n\n    this.statebyCastState = mapInverted(this.castStates, this.states);\n    this.castStateByState = mapInverted(this.states, this.castStates);\n  },\n\n  //\n  // Control\n\n  getTypeByElement(element: any) {\n    return this.typeByElement[element];\n  },\n\n  getElementByType(type: any) {\n    return this.elementByType[type];\n  },\n\n  getTypeByStream(type: any) {\n    return this.typeByStream[type];\n  },\n\n  getStreamByType(type: any) {\n    return this.streamByType[type];\n  },\n\n  getStateByCastState(castState: any) {\n    return this.statebyCastState[castState];\n  },\n\n  getCastStateByState(state: any) {\n    return this.castStateByState[state];\n  },\n\n  getSlideshowStateByState(state: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    return slideshowStateByState[state];\n  },\n});\n\n// Singleton\nconst playerUtil = new PlayerUtil();\n\nexport default playerUtil;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst standard = 'placeholder-standard';\nconst square = 'placeholder-square';\nconst widescreen = 'placeholder-widescreen';\nconst folder = 'placeholder-folder';\nconst friend = 'placeholder-friend';\n\nconst posterPlaceholders = {\n  movie: standard,\n  show: standard,\n  season: standard,\n  episode: widescreen,\n  artist: square,\n  album: square,\n  track: square,\n  photo: square,\n  photoalbum: square,\n  clip: widescreen,\n  playlist: square,\n  playlistFolder: square,\n  channel: square,\n  channelDirectory: square,\n  folder: folder,\n  friend: friend,\n  device: square,\n  poster: standard,\n  art: widescreen,\n  banner: widescreen,\n  collection: standard,\n};\n\nexport default posterPlaceholders;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst posterSizes = {\n  //\n  // Properties\n\n  sizes: {\n    movie: 'portrait',\n    show: 'portrait',\n    season: 'portrait',\n    episode: 'landscape',\n    artist: 'square',\n    album: 'square',\n    track: 'square',\n    photo: 'square',\n    photoalbum: 'square',\n    clip: 'landscape',\n    playlist: 'square',\n    playlistFolder: 'square',\n    channel: 'square',\n    channelDirectory: 'square',\n    folder: 'portrait',\n    friend: 'square',\n    poster: 'portrait',\n    art: 'landscape',\n    banner: 'banner',\n    collection: 'portrait',\n  },\n\n  ratios: {\n    portrait: 1 / 1.5,\n    square: 1,\n    landscape: 16 / 9,\n    banner: 52 / 10,\n  },\n\n  //\n  // Control\n\n  getRatioByType: function (type: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    return this.ratios[this.sizes[type]];\n  },\n\n  getPosterWidthUsingRatio: function (ratio: any, height: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    return Math.round(this.ratios[ratio] * height);\n  },\n\n  getPosterHeightUsingRatio: function (ratio: any, width: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    return Math.round(this.ratios[ratio] & width);\n  },\n\n  getPosterWidth: function (type: any, height: any) {\n    return Math.round(height * this.getRatioByType(type));\n  },\n\n  getPosterHeight: function (type: any, width: any) {\n    return Math.round(width / this.getRatioByType(type));\n  },\n};\n\nexport default posterSizes;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport browser from 'app/js/utils/device/browser';\n\nexport default function isEdge(browser_ = browser) {\n  return browser_.id === 'edge';\n}\n","import $ from 'jquery';\n\nexport default function alwaysResolve<ResolveValue>(\n  promise:\n    | JQueryPromise<ResolveValue>\n    | PromiseLike<ResolveValue>\n    | ResolveValue\n): JQueryPromise<ResolveValue> {\n  const deferred = $.Deferred<ResolveValue>();\n\n  if (typeof promise === 'object' && 'then' in promise) {\n    // JQueryPromise and PromiseLike have mis-matched function signatures where\n    // jQuery promises have an arbitrary number of resolve values. Since the\n    // return type of this helper will always be JQueryPromise this distinction\n    // is not relevant so we cast the promise to JQueryPromise and then resolve\n    // the value\n    (promise as JQueryPromise<ResolveValue>).then(\n      deferred.resolve,\n      deferred.resolve\n    );\n  } else {\n    deferred.resolve(promise);\n  }\n\n  return deferred.promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\n\nfunction makeCancelable(promise: any) {\n  const deferred = $.Deferred();\n  promise.then(deferred.resolve, deferred.reject, deferred.notify);\n  return {\n    promise: deferred.promise(),\n    cancel: function () {\n      deferred.reject({ isCanceled: true });\n    },\n  };\n}\n\nexport default makeCancelable;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\n\nfunction minDuration(promise: any, delay: any) {\n  const deferred = $.Deferred();\n  const end = new Date().getTime() + delay;\n\n  let finalize: any;\n\n  promise.then(\n    (...args: any[]) => {\n      finalize = () => deferred.resolve(...args);\n    },\n    (...args: any[]) => {\n      finalize = () => deferred.reject(...args);\n    }\n  );\n\n  function startTimeout() {\n    const now = new Date().getTime();\n    const remaining = Math.max(end - now, 0);\n    window.setTimeout(finalize, remaining);\n  }\n\n  promise.then(startTimeout, startTimeout);\n\n  return deferred.promise();\n}\n\nexport default minDuration;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as providerActionIDs from 'app/js/utils/constants/providerActionIDs';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport t from 'app/js/utils/t';\nimport ProviderFeatureCollection from './ProviderFeatureCollection';\nimport ProviderModel from './ProviderModel';\n\nconst LegacyLibraryProviderModel = ProviderModel.extend({\n  //\n  // Properties\n\n  name: 'LegacyLibraryProviderModel',\n\n  defaults() {\n    const server = this.server;\n    const isFullServer = server.get('isFullServer');\n    const isFullOwnedServer = server.get('isFullOwnedServer');\n\n    const features = [\n      { type: providerFeatureTypes.CONTENT, key: '/library/sections' },\n      { type: providerFeatureTypes.MATCH, key: '/library/matches' },\n      { type: providerFeatureTypes.METADATA, key: '/library/metadata' },\n    ];\n\n    if (isFullServer) {\n      features.push(\n        { type: providerFeatureTypes.SEARCH, key: '/hubs/search' },\n        { type: providerFeatureTypes.PLAY_QUEUE, key: '/playQueues' },\n        { type: providerFeatureTypes.PLAYLIST, key: '/playlists' },\n        {\n          type: providerFeatureTypes.TIMELINE,\n          key: '/:/timeline',\n        },\n        {\n          type: providerFeatureTypes.ACTIONS,\n          // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ type: string; actions: ({ id: ... Remove this comment to see the full error message\n          actions: [\n            {\n              id: providerActionIDs.SCROBBLE,\n              key: '/:/scrobble',\n              reverseKey: '/:/unscrobble',\n            },\n            {\n              id: providerActionIDs.RATE,\n              key: '/:/rate',\n            },\n          ],\n        }\n      );\n    }\n\n    if (isFullOwnedServer) {\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ type: string; }' is not assign... Remove this comment to see the full error message\n      features.push({ type: providerFeatureTypes.MANAGE });\n    }\n\n    return {\n      identifier: providerIdentifiers.LIBRARY,\n      title: t('Library'),\n      types: ['video', 'audio', 'photo'],\n      protocols: isFullOwnedServer ? ['stream', 'download'] : ['stream'],\n      features: new ProviderFeatureCollection(features, {\n        parse: true,\n        server,\n      }),\n    };\n  },\n});\n\nexport default LegacyLibraryProviderModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport LegacyLibraryProviderModel from 'app/js/models/provider/LegacyLibraryProviderModel';\nimport ProviderModel from 'app/js/models/provider/ProviderModel';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\n\nlet addDevelopmentProvider: any;\n\nif (__DEV__) {\n  const DEV_PROVIDER_ID = 'tv.plex.provider.development';\n\n  addDevelopmentProvider = (collection: any, server: any) => {\n    if (!collection.get(DEV_PROVIDER_ID)) {\n      collection.add(\n        new ProviderModel(\n          {\n            baseURL: __DEV_PROVIDER_URL__,\n            identifier: DEV_PROVIDER_ID,\n            title: 'Development Provider',\n          },\n          { server }\n        )\n      );\n    }\n  };\n}\n\nexport default function augmentProviderCollection(\n  collection: any,\n  server: any\n) {\n  // Providers returned from `plex.tv/media/providers` are not full Providers.\n  // We must fetch the root provider to get the full XML. Manually set `isPopulated`\n  // and `isPending` flags for PMS servers which respond with the full provider.\n\n  const isProvidersPrepopulated = !server.get('isCloud');\n\n  if (isProvidersPrepopulated) {\n    collection.forEach((model: any) => {\n      model.set({\n        isPending: false,\n        isPopulated: true,\n      });\n    });\n  }\n\n  // If the server is too old to support the `/media/providers` endpoint we\n  // still want the legacy providers to be created. This allows us to rely on\n  // all metadata items having a provider.\n  // See: https://github.com/plexinc/plex-media-server/issues/6015\n\n  if (!server.get('isCloud') && !collection.get(providerIdentifiers.LIBRARY)) {\n    collection.add(\n      new LegacyLibraryProviderModel(\n        {\n          isPending: false,\n          isPopulated: true,\n        },\n        { server }\n      )\n    );\n  }\n\n  if (__DEV__ && __DEV_PROVIDER_URL__ && server.get('isCloud')) {\n    addDevelopmentProvider(collection, server);\n  }\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\nimport path from 'app/js/utils/url/path';\n\nexport default function createLibraryPivotKey(directoryID: any, type: any) {\n  const keyParts = ['/library/sections', directoryID, 'all'];\n\n  if (type === metadataTypes.PHOTO) {\n    return path.join(keyParts);\n  }\n\n  return path.join(keyParts, { type: metadataTypes.getMetadataType(type).id });\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\n\nfunction normalizeProviderDataIdentifier(\n  identifier: any,\n  providerIdentifier: any\n) {\n  const rawProviderIdentifier = providerIdentifier || identifier;\n  const isEPG = providerIdentifiers.matches(\n    rawProviderIdentifier,\n    providerIdentifiers.EPG\n  );\n\n  return isEPG ? providerIdentifiers.EPG : rawProviderIdentifier;\n}\n\nexport default normalizeProviderDataIdentifier;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as messageTypes from 'app/js/utils/pubsub/messageTypes';\n\nfunction getBaseMessages(notification: any) {\n  switch (notification.type) {\n    case messageTypes.PREFERENCE:\n      return notification.Setting;\n    case messageTypes.TIMELINE:\n      return notification.TimelineEntry;\n    case messageTypes.STATUS:\n      return notification.StatusNotification;\n    case messageTypes.PROGRESS:\n      return notification.ProgressNotification;\n    case messageTypes.PLAYING:\n      return notification.PlaySessionStateNotification;\n    case messageTypes.BACKGROUND_GENERATOR_STATE:\n      return notification.BackgroundGeneratorStateNotification;\n    case messageTypes.VERSION_STATE:\n      return notification.VersionStateNotification;\n    case messageTypes.BACKGROUND_PROCESSING_QUEUE:\n      return notification.BackgroundProcessingQueueEventNotification;\n    case messageTypes.TRANSCODE_START:\n    case messageTypes.TRANSCODE_UPDATE:\n    case messageTypes.TRANSCODE_END:\n      return notification.TranscodeSession;\n    case messageTypes.UPDATE_STATE_CHANGE:\n      return notification.AutoUpdateNotification;\n    case messageTypes.REACHABILITY:\n      return notification.ReachabilityNotification;\n    case messageTypes.ACCOUNT:\n      return notification.AccountUpdateNotification;\n    case messageTypes.ACTIVITY:\n      return notification.ActivityNotification;\n    case messageTypes.GRABBER_DEVICE:\n      return notification.MediaGrabberDeviceNotification;\n    case messageTypes.PROVIDER_CHANGE:\n      return notification.MediaProviderNotification;\n    case messageTypes.PROVIDER_CONTENT_CHANGE:\n      return notification.MediaProviderContentNotification;\n    case messageTypes.LOG:\n      return notification.LogSentNotification;\n    case messageTypes.PROVIDER_SUBSCRIPTION_CHANGE:\n      return notification.MediaProviderSubscriptionNotification;\n    case messageTypes.CLIENT_DECISION:\n      return notification.ClientDecisionRequestEventNotification;\n  }\n}\n\nfunction getMessages(notification: any, acceptedMessageTypes: any) {\n  return (\n    (acceptedMessageTypes.indexOf(notification.type) === -1\n      ? []\n      : getBaseMessages(notification)) || []\n  );\n}\n\nexport default getMessages;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport * as Sentry from '@sentry/browser';\nimport * as adapters from 'app/js/adapters/adapters';\nimport ConnectionModel from 'app/js/models/server/ConnectionModel';\nimport {\n  eventConnectionClose,\n  eventConnectionOpen,\n} from 'app/js/stores/actions/serverActions';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport * as serverUpdateStates from 'app/js/utils/constants/serverUpdateStates';\nimport log from 'app/js/utils/log/log';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\nimport getMessages from 'app/js/utils/pubsub/getMessages';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst BaseMediaServerEventConnection = BaseClass.extend({\n  mixins: eventMixin,\n\n  //\n  // Properties\n\n  url() {\n    const activeConnection = this.server.get('activeConnection');\n\n    if (!activeConnection) {\n      return;\n    }\n\n    const socketConnectionUri = activeConnection.id.replace(/^http/, 'ws');\n\n    // If the the app is being served over https we want to use wss://\n    // instead of ws:// to prevent warnings about insecure connections.\n    const url = this.server.resolveUrl('/:/websockets/notifications', {\n      connection: new ConnectionModel({ uri: socketConnectionUri }),\n      appendToken: true,\n      appendHeaders: this.appendHeaders,\n    });\n\n    return url;\n  },\n\n  //\n  // Init\n\n  initialize(options: any) {\n    _.bindAll(\n      this,\n      'onOpen',\n      'onClose',\n      'onError',\n      'onMessage',\n      'getMessageTypes'\n    );\n\n    this.server = options.server;\n    this.appendHeaders = options.appendHeaders || false;\n  },\n\n  //\n  // Control\n\n  open() {\n    if (this.socket) {\n      this.close();\n    }\n\n    this._deferred = $.Deferred();\n    const url = _.result(this, 'url');\n\n    if (!url) {\n      return this._deferred.reject().promise();\n    }\n\n    this.socket = new window.WebSocket(url);\n    this.socket.onopen = this.onOpen;\n    this.socket.onclose = this.onClose;\n    this.socket.onerror = this.onError;\n    this.socket.onmessage = this.onMessage;\n\n    return this._deferred.promise();\n  },\n\n  close() {\n    if (!this.socket) {\n      return;\n    }\n\n    this.socket.onopen = null;\n    this.socket.onclose = null;\n    this.socket.onerror = null;\n    this.socket.onmessage = null;\n    this.socket.close();\n    this.socket = null;\n\n    if (this._deferred && this._deferred.state() === 'pending') {\n      this._deferred.reject();\n    }\n  },\n\n  testConnection() {\n    if (!this.server.get('connected')) {\n      return;\n    }\n\n    // If this server is in the process of updating, we should unset\n    // `connected` immediately since we expected it to go offline.\n\n    const update = this.server.get(__PLATFORM__).get('update');\n    if (update && update.get('state') === serverUpdateStates.INSTALLING) {\n      this.server.set('connected', null);\n    }\n\n    this.server.trigger('error:connection', this.server);\n  },\n\n  //\n  // Listeners\n\n  onOpen(event: any) {\n    const appStore = adapters.resolve('appStore');\n    const serverEntityID = this.server.entityID();\n\n    if (serverEntityID) {\n      appStore.dispatch(eventConnectionOpen({ serverEntityID, event }));\n    }\n\n    this.server.trigger('socket:websocket', { opened: true });\n\n    this.trigger('open', this.server, event);\n    this._deferred.resolve(this.server, event);\n  },\n\n  onClose(event: any) {\n    this.close();\n\n    const appStore = adapters.resolve('appStore');\n    const serverEntityID = this.server.entityID();\n\n    if (serverEntityID) {\n      appStore.dispatch(eventConnectionClose({ serverEntityID, event }));\n    }\n\n    this.server.trigger('socket:websocket', { closed: true });\n\n    this.trigger('close', this.server, event);\n    this._deferred.reject(this.server, event);\n\n    // We should test the server's connections after a request fails.\n    this.testConnection();\n  },\n\n  onError(event: any) {\n    this.close();\n\n    this.server.trigger('socket:websocket', { error: true });\n\n    this.trigger('error', this.server, event);\n    this._deferred.reject(this.server, event);\n\n    // We should test the server's connections after a request fails.\n    this.testConnection();\n  },\n\n  onMessage(event: any) {\n    let data;\n\n    // Catch errors from poorly formatted JSON.\n    try {\n      data = JSON.parse(event.data);\n    } catch (error) {\n      log.warn('[Connections] Error formatting message:\\n%s', event.data);\n      return;\n    }\n\n    const isLegacyJSON = !!data._elementType;\n    const notification = isLegacyJSON\n      ? _.first(data._children)\n      : data.NotificationContainer;\n\n    if (notification) {\n      const type = isLegacyJSON ? data.type : notification.type;\n      const handler = this[type];\n\n      let messages;\n\n      if (isLegacyJSON) {\n        messages = Array.isArray(notification) ? notification : [notification];\n      } else {\n        messages = getMessages(notification, this.getMessageTypes());\n      }\n\n      messages.forEach((message: any) => {\n        try {\n          this.trigger('message', message);\n        } catch (error) {\n          log.error('[Connections] Error when triggering', message, error);\n          Sentry.captureException(error, { extra: { message } });\n        }\n\n        if (_.isFunction(handler)) {\n          try {\n            handler.call(this, message);\n          } catch (error) {\n            log.error('[Connections] Error when handling', message, error);\n            Sentry.captureException(error, { extra: { message } });\n          }\n        }\n      });\n    }\n  },\n});\n\nexport default BaseMediaServerEventConnection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const ACCOUNT = 'account';\nexport const ACTIVITY = 'activity';\nexport const BACKGROUND_GENERATOR_STATE = 'backgroundGeneratorState';\nexport const BACKGROUND_PROCESSING_QUEUE = 'backgroundProcessingQueue';\nexport const GRABBER_DEVICE = 'grabber.device';\nexport const LOG = 'log';\nexport const PLAYING = 'playing';\nexport const PREFERENCE = 'preference';\nexport const PROGRESS = 'progress';\nexport const PROVIDER_CHANGE = 'provider.change';\nexport const PROVIDER_CONTENT_CHANGE = 'provider.content.change';\nexport const PROVIDER_SUBSCRIPTION_CHANGE = 'provider.subscription.change';\nexport const REACHABILITY = 'reachability';\nexport const STATUS = 'status';\nexport const TIMELINE = 'timeline';\nexport const TRANSCODE_END = 'transcodeSession.end';\nexport const TRANSCODE_START = 'transcodeSession.start';\nexport const TRANSCODE_UPDATE = 'transcodeSession.update';\nexport const UPDATE_STATE_CHANGE = 'update.statechange';\nexport const VERSION_STATE = 'versionState';\nexport const CLIENT_DECISION = 'clientDecision';\nexport const NOTIFY_ACCOUNT_CHANGE = 'notifyAccountChange';\nexport const NOTIFY_WATCH_TOGETHER_EXPIRE = 'notifyWatchTogetherExpire';\nexport const NOTIFY_WATCH_TOGETHER_INVITE = 'notifyWatchTogetherInvite';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport { renderToStaticMarkup } from 'react-dom/server';\n\nexport default function renderComponentToString(Component: any, props = {}) {\n  return renderToStaticMarkup(<Component {...props} />);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const BACKUP_DATABASE = 'general.db.backup';\nexport const CLEAN_BUNDLES = 'general.bundle.clean';\nexport const GRABBER_GRAB = 'grabber.grab';\nexport const GRABBER_ASSIMILATE = 'grabber.assimilate';\nexport const LIBRARY_DELETE = 'library.delete';\nexport const LIBRARY_UPDATE_SECTION = 'library.update.section';\nexport const LIBRARY_REFRESH_ITEMS = 'library.refresh.items';\nexport const LIBRARY_UPDATE_ITEM_METADATA = 'library.update.item.metadata';\nexport const MEDIA_DOWNLOAD = 'media.download';\nexport const MEDIA_GENERATE_BIF = 'media.generate.bif';\nexport const MEDIA_GENERATE_CHAPTER_THUMBS = 'media.generate.chapter.thumbs';\nexport const MEDIA_GENERATE_INTROS = 'media.generate.intros';\nexport const MEDIA_GENERATE_MUSIC_ANALYSIS = 'media.generate.music.analysis';\nexport const MEDIA_OFFLINE_TRANSCODE = 'media.offline.transcode';\nexport const OPTIMIZE_DATABASE = 'general.db.optimize';\nexport const PROVIDER_DEVICE_CHANNELSCAN = 'provider.device.channelscan';\nexport const PROVIDER_EPG_LOAD = 'provider.epg.load';\nexport const PROVIDER_SUBSCRIPTIONS_PROCESS = 'provider.subscriptions.process';\nexport const PROVIDER_SUBSCRIPTION_REFRESH = 'provider.subscription.refresh';\nexport const SUBTITLE_DOWNLOAD = 'subtitle.download';\n","import * as agentIdentifiers from 'app/js/utils/constants/agentIdentifiers';\nimport * as features from 'app/js/utils/constants/user/features';\nimport { ARTIST, MOVIE, SHOW } from 'app/js/utils/types/metadataTypes';\nimport { Server } from 'app/js/v4/core/servers/serversTypes';\nimport { ContentDirectory } from 'app/js/views/v3/helpers/props/shapes/contentDirectoryShape';\n\nexport interface DirectoryUpgrades {\n  hasPlexMusicUpgrade: boolean;\n  hasPlexMovieUpgrade: boolean;\n  hasPlexSeriesUpgrade: boolean;\n}\n\nexport default function getDirectoryUpgrade(\n  server: Server,\n  sourceDirectory: ContentDirectory | undefined\n): DirectoryUpgrades {\n  const isServerEligible =\n    server.isConnected &&\n    server.isFullOwnedServer &&\n    server.ownerFeatures?.includes(features.PLEX_MOVIE_SCANNER);\n\n  return {\n    hasPlexMusicUpgrade: !!(\n      isServerEligible &&\n      sourceDirectory &&\n      sourceDirectory.type === ARTIST &&\n      (sourceDirectory.agent === agentIdentifiers.PLEXPREMIUMMUSIC ||\n        sourceDirectory.agent === agentIdentifiers.LASTFM)\n    ),\n    hasPlexMovieUpgrade: !!(\n      isServerEligible &&\n      sourceDirectory &&\n      sourceDirectory.type === MOVIE &&\n      (sourceDirectory.agent === agentIdentifiers.THEMOVIEDB ||\n        sourceDirectory.agent === agentIdentifiers.IMDB)\n    ),\n    hasPlexSeriesUpgrade: !!(\n      isServerEligible &&\n      sourceDirectory &&\n      sourceDirectory.type === SHOW &&\n      (sourceDirectory.agent === agentIdentifiers.THEMOVIEDB ||\n        sourceDirectory.agent === agentIdentifiers.THETVDB)\n    ),\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport serverFeatures from 'app/js/models/server/serverFeatures';\nimport isVersionOrNewer from 'app/js/utils/isVersionOrNewer';\n\nexport default function isMediaProvidersRoot(serverModel: any) {\n  return (\n    !!serverModel.get('shortVersion') &&\n    isVersionOrNewer(\n      serverModel.get('shortVersion'),\n      serverFeatures.mediaProvidersServerRoot\n    )\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport isFramed from 'app/js/utils/window/isFramed';\n\nfunction shouldClientPoll() {\n  return isFramed();\n}\n\nexport default shouldClientPoll;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction getSourceForStorage(source: any) {\n  const {\n    key,\n    sourceType,\n    machineIdentifier,\n    providerIdentifier,\n    directoryID,\n    directoryIcon,\n    title,\n    serverFriendlyName,\n    serverSourceTitle,\n    providerSourceTitle,\n    isCloud,\n    isFullOwnedServer,\n  } = source;\n\n  return {\n    key,\n    sourceType,\n    machineIdentifier,\n    providerIdentifier,\n    directoryID,\n    directoryIcon,\n    title,\n    serverFriendlyName,\n    serverSourceTitle,\n    providerSourceTitle,\n    isCloud,\n    isFullOwnedServer,\n  };\n}\n\nexport default getSourceForStorage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport createKey from 'app/js/views/v3/helpers/createKey';\n\nexport default function getSourceKey(\n  sourceType: any,\n  machineIdentifier: any,\n  providerIdentifier: any,\n  directoryID: any\n) {\n  return createKey(\n    'source',\n    sourceType,\n    machineIdentifier,\n    providerIdentifier,\n    directoryID\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function createEntityID(type: any, id: any, ...scope: any[]) {\n  if (!id) {\n    return;\n  }\n\n  const parts = [];\n\n  parts.push(type);\n\n  for (let i = 0, len = scope.length; i < len; i++) {\n    const scopeID = scope[i];\n\n    if (scopeID) {\n      parts.push(scopeID);\n    }\n  }\n\n  parts.push(id);\n\n  return parts.join('--');\n}\n","export const SERVER = 'servers';\nexport const PROVIDER = 'providers';\nexport const LIBRARY = 'libraries';\nexport const HUB = 'hubs';\nexport const USER = 'users';\nexport const RESOURCE = 'resources';\nexport const FRIEND = 'friends';\nexport const HOME_USER = 'homeUsers';\nexport const METADATA_LIST = 'metadataLists';\nexport const METADATA_ITEM = 'metadataItems';\nexport const MEDIA_SUBSCRIPTION = 'mediaSubscriptions';\nexport const LIVE_TV_SESSION = 'liveTVSessions';\nexport const PLAY_QUEUE_ITEM = 'playQueueItems';\nexport const PLAYLIST_ITEM = 'playlistItems';\nexport const SEARCH_RESULT = 'searchResults';\nexport const TRANSCODE_JOBS = 'transcodeJobs';\nexport const WATCH_TOGETHER_ROOM = 'watchTogetherRooms';\nexport const BACKGROUND_TRANSCODE_JOBS = 'backgroundTranscodeJobs';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport log from 'app/js/utils/log/log';\n\nexport function tryFindEntity(model: any, entityType: any, entityID: any) {\n  const entities = model.get('entities').get(entityType);\n\n  if (entities) {\n    const entity = entities.get(entityID);\n\n    if (entity) {\n      return entity.get('model');\n    }\n  }\n}\n\nexport default function findEntity(model: any, entityType: any, entityID: any) {\n  const entity = tryFindEntity(model, entityType, entityID);\n\n  if (!entity) {\n    log.warn(\n      'An entity does not exist with the type \"%s\" and id \"%s\"',\n      entityType,\n      entityID\n    );\n  }\n\n  return entity;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport findEntity, { tryFindEntity } from 'app/js/utils/state/findEntity';\nimport * as entityTypes from './entityTypes';\n\nexport function findUserModel(appModel: any) {\n  return appModel.get('user');\n}\n\nexport function findUserFlexModel(appModel: any) {\n  return appModel.get('user').get(__PLATFORM__);\n}\n\nexport function findServerModel(appModel: any, { serverEntityID }: any) {\n  return findEntity(appModel, entityTypes.SERVER, serverEntityID);\n}\n\nexport function tryFindServerModel(appModel: any, { serverEntityID }: any) {\n  return tryFindEntity(appModel, entityTypes.SERVER, serverEntityID);\n}\n\nexport function findServerFlexModel(appModel: any, payload: any) {\n  const serverModel = findServerModel(appModel, payload);\n\n  return serverModel && serverModel.get(__PLATFORM__);\n}\n\nexport function findProviderModel(appModel: any, { providerEntityID }: any) {\n  return findEntity(appModel, entityTypes.PROVIDER, providerEntityID);\n}\n\nexport function tryFindProviderModel(appModel: any, { providerEntityID }: any) {\n  return tryFindEntity(appModel, entityTypes.PROVIDER, providerEntityID);\n}\n\nexport function findLibraryModel(appModel: any, { libraryEntityID }: any) {\n  return findEntity(appModel, entityTypes.LIBRARY, libraryEntityID);\n}\n\nexport function findHubModel(appModel: any, { hubEntityID }: any) {\n  return findEntity(appModel, entityTypes.HUB, hubEntityID);\n}\n\nexport function findMetadataListModel(\n  appModel: any,\n  { metadataListEntityID }: any\n) {\n  return findEntity(appModel, entityTypes.METADATA_LIST, metadataListEntityID);\n}\n\nexport function tryFindMetadataListModel(\n  appModel: any,\n  { metadataListEntityID }: any\n) {\n  return tryFindEntity(\n    appModel,\n    entityTypes.METADATA_LIST,\n    metadataListEntityID\n  );\n}\n\nexport function findMetadataItemModel(\n  appModel: any,\n  { metadataItemEntityID }: any\n) {\n  return findEntity(appModel, entityTypes.METADATA_ITEM, metadataItemEntityID);\n}\n\nexport function tryFindMetadataItemModel(\n  appModel: any,\n  { metadataItemEntityID }: any\n) {\n  return tryFindEntity(\n    appModel,\n    entityTypes.METADATA_ITEM,\n    metadataItemEntityID\n  );\n}\n\nexport function findMediaSubscriptionModel(\n  appModel: any,\n  { mediaSubscriptionEntityID }: any\n) {\n  return findEntity(\n    appModel,\n    entityTypes.MEDIA_SUBSCRIPTION,\n    mediaSubscriptionEntityID\n  );\n}\n\nexport function findLiveTVSessionModel(\n  appModel: any,\n  { liveTVSessionEntityID }: any\n) {\n  return findEntity(\n    appModel,\n    entityTypes.LIVE_TV_SESSION,\n    liveTVSessionEntityID\n  );\n}\n\nexport function tryFindLiveTVSessionModel(\n  appModel: any,\n  { liveTVSessionEntityID }: any\n) {\n  return tryFindEntity(\n    appModel,\n    entityTypes.LIVE_TV_SESSION,\n    liveTVSessionEntityID\n  );\n}\n\nexport function findPlayQueueItemModel(\n  appModel: any,\n  { playQueueItemEntityID }: any\n) {\n  return findEntity(\n    appModel,\n    entityTypes.PLAY_QUEUE_ITEM,\n    playQueueItemEntityID\n  );\n}\n\nexport function findPlaylistItemModel(\n  appModel: any,\n  { playlistItemEntityID }: any\n) {\n  return findEntity(appModel, entityTypes.PLAYLIST_ITEM, playlistItemEntityID);\n}\n\nexport function findFriendModel(appModel: any, { friendEntityID }: any) {\n  return findEntity(appModel, entityTypes.FRIEND, friendEntityID);\n}\n\nexport function findSearchResultModel(\n  appModel: any,\n  { searchResultEntityID }: any\n) {\n  return findEntity(appModel, entityTypes.SEARCH_RESULT, searchResultEntityID);\n}\n\nexport function findWatchTogetherRoomModel(\n  appModel: any,\n  { watchTogetherRoomEntityID }: any\n) {\n  return findEntity(\n    appModel,\n    entityTypes.WATCH_TOGETHER_ROOM,\n    watchTogetherRoomEntityID\n  );\n}\n\nexport function findHomeUserModel(appModel: any, { homeUserEntityID }: any) {\n  return findEntity(appModel, entityTypes.HOME_USER, homeUserEntityID);\n}\n\nexport function findSyncProviderModel(appModel: any, { source }: any) {\n  const embeddedServer = appModel.get('embeddedServer');\n\n  return (\n    embeddedServer && embeddedServer.get('providers').findWhere({ source })\n  );\n}\n\nexport function findPlexPlayerModel(appModel: any, { playerIdentifier }: any) {\n  const cloudCompanions = appModel\n    .get('user')\n    .get(__PLATFORM__)\n    .get('cloudCompanions');\n\n  for (const cloudCompanion of cloudCompanions.models) {\n    const player = cloudCompanion\n      .get('cloudPlayers')\n      .findWhere({ playerIdentifier });\n\n    if (player) {\n      return player;\n    }\n  }\n\n  return appModel\n    .get('companionServer')\n    .get(__PLATFORM__)\n    .get('players')\n    .findWhere({ playerIdentifier });\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport assert from 'app/js/utils/log/assert';\nimport log from 'app/js/utils/log/log';\n\nconst updateQueue: any = [];\nlet isImmediateUpdate = false;\nlet isProcessing = false;\nlet processingBudget = 1000 / 60;\nlet processingDelay = 1000 / 60;\nlet branchTimeoutID: any;\nlet rootTimeoutID: any;\nlet updateRootState: any;\nfunction clearBranchTimeout() {\n  if (branchTimeoutID) {\n    branchTimeoutID = window.clearTimeout(branchTimeoutID);\n  }\n}\nfunction clearRootTimeout() {\n  if (rootTimeoutID) {\n    rootTimeoutID = window.clearTimeout(rootTimeoutID);\n  }\n}\nfunction startRootStateUpdate() {\n  const currentUpdateRootState = updateRootState;\n  updateRootState = null;\n  // See: https://github.com/plexinc/plex-web-client/issues/7921\n  clearRootTimeout();\n  // See: https://github.com/plexinc/plex-web-client/issues/11554\n  if (!currentUpdateRootState) {\n    return;\n  }\n  const result = currentUpdateRootState();\n  if (__DEV__) {\n    const getDevOption = require('app/js/utils/dev/getDevOption').default;\n    const logStateUpdate = require('./logStateUpdate').default;\n    if (getDevOption('stateLogs')) {\n      logStateUpdate(result);\n    }\n  }\n}\nfunction startProcessingUpdates() {\n  clearBranchTimeout();\n  clearRootTimeout();\n  // Process updates until we have exceeded our budget or there are no more\n  // updates. If we have exceeded our budget, schedule another update. If there\n  // are no more updates, schedule the root update, which will trigger a\n  // `statechange` event that a store can listen for.\n  const start = window.performance.now();\n  let end;\n  isProcessing = true;\n  while (updateQueue.length && (!end || end - start < processingBudget)) {\n    updateQueue.pop()();\n    end = window.performance.now();\n  }\n  isProcessing = false;\n  if (updateQueue.length) {\n    log.warn(\n      '[State] Unable to process all updates within budget; %s update(s) remaining',\n      updateQueue.length\n    );\n    branchTimeoutID = window.setTimeout(\n      startProcessingUpdates,\n      processingDelay\n    );\n  } else if (updateRootState) {\n    rootTimeoutID = window.setTimeout(startRootStateUpdate, processingDelay);\n  }\n}\nexport function configure(options = {}) {\n  if ((options as any).budget != null) {\n    processingBudget = (options as any).budget;\n  }\n  if ((options as any).delay != null) {\n    processingDelay = (options as any).delay;\n  }\n}\nexport function resetUpdates() {\n  clearBranchTimeout();\n  clearRootTimeout();\n  isProcessing = false;\n  isImmediateUpdate = false;\n  updateRootState = null;\n  updateQueue.length = 0;\n}\nexport function scheduleImmediateUpdate(callback: any) {\n  clearBranchTimeout();\n  clearRootTimeout();\n  isProcessing = true;\n  isImmediateUpdate = true;\n  while (updateQueue.length) {\n    updateQueue.pop()();\n  }\n  // If a callback is passed invoke it before we update our state tree. Although\n  // the callback itself may assert, use assert to throw an error while in dev\n  // (useful for unit tests).\n  if (callback) {\n    try {\n      callback();\n    } catch (error) {\n      assert(false, error.name + ': ' + error.message);\n    }\n  }\n  if (updateRootState) {\n    startRootStateUpdate();\n  }\n  isProcessing = false;\n  isImmediateUpdate = false;\n}\nexport function scheduleUpdate(updateState: any, instance: any) {\n  if (instance.isStateTreeRoot) {\n    updateRootState = updateState;\n    if (!isProcessing && !rootTimeoutID) {\n      rootTimeoutID = window.setTimeout(startRootStateUpdate, processingDelay);\n    }\n    return;\n  }\n  if (isImmediateUpdate) {\n    updateState();\n    return;\n  }\n  clearRootTimeout();\n  // Add updates to the beginning of the array and process them from the end.\n  // Only update the root once after all branches are updated to minimize\n  // changes being handled in a store.\n  if (updateQueue[0] !== updateState) {\n    updateQueue.unshift(updateState);\n  }\n  if (!isProcessing && !branchTimeoutID) {\n    branchTimeoutID = window.setTimeout(\n      startProcessingUpdates,\n      processingDelay\n    );\n  }\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction toUpperCase(str: any) {\n  return str ? str.toUpperCase() : '';\n}\n\nexport default toUpperCase;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction toUpperCaseFirstLetter(str: any) {\n  return str ? str.charAt(0).toUpperCase() + str.slice(1) : '';\n}\n\nexport default toUpperCaseFirstLetter;\n","function escapeRegExp(str: string): string {\n  return str.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n\nexport default escapeRegExp;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport parser2 from 'app/js/utils/parser2';\nimport t from 'app/js/utils/t';\n\nfunction formatBoolean(value: any) {\n  if (!value || !parser2.parseBoolean(value)) {\n    return t('No');\n  } else {\n    return t('Yes');\n  }\n}\n\nexport default formatBoolean;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction isString(string: any) {\n  return window.toString.call(string) === '[object String]';\n}\n\nexport default isString;\n","import clamp from 'app/js/utils/math/clamp';\n\nexport default function random(unclampedLength = 24): string {\n  const targetLength = clamp(unclampedLength, 0, 1024);\n  let result = '';\n\n  while (result.length < targetLength) {\n    result += Math.random()\n      .toString(36)\n      .substring(2, targetLength - result.length + 2);\n  }\n\n  return result;\n}\n","function clamp(input: number, min: number, max: number): number {\n  return Math.max(Math.min(input, max), min);\n}\n\nexport default clamp;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nfunction shortVersion(version: any) {\n  const match = /(\\d+\\.){2,3}\\d+/.exec(version);\n\n  // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'RegExpExecArray | null' is not a... Remove this comment to see the full error message\n  return _.first(match) || version;\n}\n\nexport default shortVersion;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport path from 'app/js/utils/url/path';\nimport truncateMiddle from './truncateMiddle';\n\nfunction truncateFilename(str: any, length: any) {\n  // @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n  return truncateMiddle(path.getLastSegment(str || ''), length);\n}\n\nexport default truncateFilename;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction truncateMiddle(str: any, len: any, frontLen: any) {\n  if (!str) {\n    return '';\n  }\n\n  if (str.length > len) {\n    frontLen = frontLen || Math.floor((len - 3) / 2);\n    const backLen = len - 3 - frontLen;\n    return str.substr(0, frontLen) + '...' + str.substr(str.length - backLen);\n  } else {\n    return str;\n  }\n}\n\nexport default truncateMiddle;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\n\nexport default function synthesizeDirectoryID(directoryKey: any) {\n  const directoryKeyParts = directoryKey.split('/');\n  // Discard the first item in the array, which will be an empty string\n  const firstPart = directoryKeyParts.shift();\n\n  // If the firstPart is an empty string that means we got a `/` as the first\n  // item in the array, and this source has not been migrated yet\n  if (firstPart === '') {\n    const secondPart = directoryKeyParts[0];\n    const lastPart = directoryKeyParts[directoryKeyParts.length - 1];\n\n    let directoryID;\n\n    // The directoryID of the EPG directory is the ID of the DVR, whcih will be\n    // in the first segment\n    if (providerIdentifiers.matches(secondPart, providerIdentifiers.EPG)) {\n      directoryID = secondPart;\n    } else if (lastPart) {\n      directoryID = lastPart;\n    }\n\n    return directoryID;\n  }\n\n  return directoryKey;\n}\n","import localizerAdapter from 'app/js/adapters/localizerAdapter';\nimport { InterpolationValue } from 'app/js/utils/TranslationTypes';\n\nexport default function t(\n  translation: string,\n  valuesTemplate?: InterpolationValue | { [key: string]: InterpolationValue },\n  ...args: InterpolationValue[]\n): string {\n  return localizerAdapter.t(translation, valuesTemplate, ...args);\n}\n\nexport function tEscape(\n  translation: string,\n  valuesTemplate?: InterpolationValue | { [key: string]: InterpolationValue },\n  ...args: InterpolationValue[]\n): string {\n  return localizerAdapter.tEscape(translation, valuesTemplate, ...args);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport log from 'app/js/utils/log/log';\n\nfunction getTranslatedCopy(type: any) {\n  const clone = _.clone(type);\n\n  if (!clone.hasOwnProperty('title')) {\n    return clone;\n  }\n\n  // Titles may be functions so they can use the translate helper and be\n  // properly scanned by tscan.\n\n  clone.title = _.result(clone, 'title');\n\n  if (clone.hasOwnProperty('shortTitle')) {\n    clone.shortTitle = _.result(clone, 'shortTitle');\n  }\n\n  if (clone.hasOwnProperty('plural')) {\n    clone.plural = _.result(clone, 'plural');\n  }\n\n  return clone;\n}\n\nexport default function createTypes(identifiers: any, types: any) {\n  const lookups = {};\n\n  // Generate lookups using reduceRight so that earlier entries take precedence\n  // over later ones.\n\n  identifiers.forEach((identifier: any) => {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    lookups[identifier] = types.reduceRight((acc: any, type: any) => {\n      const value = type[identifier];\n\n      if (value != null) {\n        acc[value] = type;\n      }\n\n      return acc;\n    }, {});\n  });\n\n  function contains(id: any) {\n    for (const identifier in lookups) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      if (lookups[identifier][id]) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function get(id: any) {\n    for (const identifier in lookups) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      const lookup = lookups[identifier];\n      const match = lookup[id];\n\n      if (match) {\n        return getTranslatedCopy(match);\n      }\n    }\n\n    log.warn(`No type was found for ${id}`);\n  }\n\n  function getAll() {\n    return types.map(getTranslatedCopy);\n  }\n\n  return {\n    contains,\n    get,\n    getAll,\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as agentIdentifiers from 'app/js/utils/constants/agentIdentifiers';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport * as providerProtocols from 'app/js/utils/constants/providerProtocols';\nimport * as sourceTypes from 'app/js/utils/types/sourceTypes';\n\nfunction isDirectoryForSourceType(\n  sourceTypeObject: any,\n  provider: any,\n  contentDirectory: any\n) {\n  const { key: sourceType, types = {} } = sourceTypeObject;\n\n  // The `protocols` attribute on the provider model might be an array or an\n  // object depending on the source.\n  const isLiveTVProvider = Array.isArray(provider.protocols)\n    ? provider.protocols.includes(providerProtocols.LIVE_TV)\n    : provider.protocols[providerProtocols.LIVE_TV];\n\n  const isDVRSourceType = sourceType === sourceTypes.DVR;\n  const isDiscoverSourceType = sourceType === sourceTypes.DISCOVER;\n\n  if (isLiveTVProvider) {\n    return isDVRSourceType;\n  }\n\n  if (\n    providerIdentifiers.matches(\n      provider.identifier,\n      providerIdentifiers.DISCOVER\n    )\n  ) {\n    return isDiscoverSourceType;\n  }\n\n  // DVR and Discover have no types to compare to the content directory.\n  if (isDVRSourceType || isDiscoverSourceType) {\n    return false;\n  }\n\n  const hasNoneAgent = contentDirectory.agent === agentIdentifiers.NONE;\n  if (\n    (sourceType === sourceTypes.VIDEOS && !hasNoneAgent) ||\n    (sourceType === sourceTypes.MOVIES && hasNoneAgent)\n  ) {\n    return false;\n  }\n\n  const { type, subtype } = types;\n  return (\n    contentDirectory.type === type &&\n    ((subtype == null && contentDirectory.subtype == null) ||\n      (subtype != null && contentDirectory.subtype === subtype))\n  );\n}\n\nexport default isDirectoryForSourceType;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { getAllSourceTypes, UNKNOWN } from 'app/js/utils/types/sourceTypes';\nimport isDirectoryForSourceType from './isDirectoryForSourceType';\n\nexport default function getSourceTypeForDirectory(\n  provider: any,\n  directory: any\n) {\n  if (!provider || !directory || directory.id === 'hubs') {\n    return;\n  }\n\n  const allTypes = getAllSourceTypes();\n  for (let i = 0, len = allTypes.length; i < len; i++) {\n    const type = allTypes[i];\n\n    if (isDirectoryForSourceType(type, provider, directory)) {\n      return type;\n    }\n  }\n\n  return allTypes.find((type: any) => type.key === UNKNOWN);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport createTypes from './createTypes';\n\nexport const NONE = 'none';\nexport const VIDEO = 'video';\nexport const AUDIO = 'audio';\nexport const PHOTO = 'photo';\n// This media type is unknown to PMS.\nexport const ROM = 'rom';\n\nconst identifiers = ['id', 'typeString'];\n\nconst mediaTypes = createTypes(identifiers, [\n  {\n    id: 0,\n    typeString: NONE,\n  },\n  {\n    id: 1,\n    typeString: VIDEO,\n  },\n  {\n    id: 2,\n    typeString: AUDIO,\n  },\n  {\n    id: 3,\n    typeString: PHOTO,\n  },\n  {\n    // This media type is unknown to PMS.\n    id: 999,\n    typeString: ROM,\n  },\n]);\n\nexport const getMediaType = mediaTypes.get;\nexport const getAllMediaTypes = mediaTypes.getAll;\n","export const PODCAST = 'podcast';\nexport const WEBSHOW = 'webshow';\nexport const MUSIC_VIDEO = 'musicVideo';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport t from 'app/js/utils/t';\nimport createTypes from './createTypes';\nimport * as mediaTypes from './mediaTypes';\n\nexport const MOVIE = 'movie';\nexport const SHOW = 'show';\nexport const SEASON = 'season';\nexport const EPISODE = 'episode';\nexport const ARTIST = 'artist';\nexport const ALBUM = 'album';\nexport const TRACK = 'track';\nexport const CLIP = 'clip';\nexport const TRAILER = 'trailer';\nexport const COMIC = 'comic';\nexport const PERSON = 'person';\nexport const PHOTO = 'photo';\nexport const PHOTO_ALBUM = 'photoalbum';\nexport const AUDIO = 'audio';\nexport const VIDEO = 'video';\nexport const PLAYLIST = 'playlist';\nexport const PLAYLIST_FOLDER = 'playlistFolder';\nexport const STATION = 'station';\nexport const COLLECTION = 'collection';\nexport const MIXED = 'mixed';\nexport const FOLDER = 'folder';\nexport const CHANNEL = 'channel';\nexport const GAME = 'game';\nexport const AUTHOR = 'author';\nexport const AUDIOBOOK = 'audiobook';\nexport const CHAPTER = 'chapter';\n\nconst identifiers = ['id', 'typeString'];\n\nconst metadataTypes = createTypes(identifiers, [\n  {\n    id: 1,\n    typeString: MOVIE,\n    title: () => t('Movie'),\n    plural: () => t('Movies'),\n    mediaType: mediaTypes.VIDEO,\n  },\n  {\n    id: 2,\n    typeString: SHOW,\n    title: () => t('Show'),\n    plural: () => t('Shows'),\n    mediaType: mediaTypes.NONE,\n    child: SEASON,\n  },\n  {\n    id: 3,\n    typeString: SEASON,\n    title: () => t('Season'),\n    plural: () => t('Seasons'),\n    mediaType: mediaTypes.NONE,\n    parent: SHOW,\n    child: EPISODE,\n  },\n  {\n    id: 4,\n    typeString: EPISODE,\n    title: () => t('Episode'),\n    plural: () => t('Episodes'),\n    mediaType: mediaTypes.VIDEO,\n    parent: SEASON,\n  },\n  {\n    id: 5,\n    typeString: TRAILER,\n    title: () => t('Trailer'),\n    plural: () => t('Trailers'),\n    mediaType: mediaTypes.VIDEO,\n  },\n  {\n    id: 6,\n    typeString: COMIC,\n    title: () => t('Comic'),\n    plural: () => t('Comics'),\n    mediaType: mediaTypes.PHOTO,\n  },\n  {\n    id: 7,\n    typeString: PERSON,\n    title: () => t('Person'),\n    plural: () => t('People'),\n    mediaType: mediaTypes.NONE,\n  },\n  {\n    id: 8,\n    typeString: ARTIST,\n    title: () => t('Artist'),\n    plural: () => t('Artists'),\n    mediaType: mediaTypes.NONE,\n    child: ALBUM,\n  },\n  {\n    id: 9,\n    typeString: ALBUM,\n    title: () => t('Album'),\n    plural: () => t('Albums'),\n    mediaType: mediaTypes.NONE,\n    parent: ARTIST,\n    child: TRACK,\n  },\n  {\n    id: 10,\n    typeString: TRACK,\n    title: () => t('Track'),\n    plural: () => t('Tracks'),\n    mediaType: mediaTypes.AUDIO,\n    parent: ALBUM,\n  },\n  {\n    id: 11,\n    typeString: 'picture',\n    title: () => t('Picture'),\n    plural: () => t('Pictures'),\n    mediaType: mediaTypes.PHOTO,\n  },\n  {\n    id: 12,\n    typeString: CLIP,\n    title: () => t('Clip'),\n    plural: () => t('Clips'),\n    mediaType: mediaTypes.VIDEO,\n  },\n  {\n    id: 13,\n    typeString: PHOTO,\n    title: () => t('Photo'),\n    plural: () => t('Photos'),\n    mediaType: mediaTypes.PHOTO,\n    parent: PHOTO_ALBUM,\n  },\n  {\n    id: 14,\n    typeString: PHOTO_ALBUM,\n    title: () => t('Photo Album'),\n    plural: () => t('Photo Albums'),\n    mediaType: mediaTypes.NONE,\n    child: PHOTO,\n  },\n  {\n    id: 15,\n    typeString: PLAYLIST,\n    title: () => t('Playlist'),\n    plural: () => t('Playlists'),\n    mediaType: mediaTypes.NONE,\n    parent: PHOTO_ALBUM,\n  },\n  {\n    id: 16,\n    typeString: PLAYLIST_FOLDER,\n    title: () => t('Playlist'),\n    plural: () => t('Playlists'),\n    mediaType: mediaTypes.NONE,\n    child: PLAYLIST,\n  },\n  {\n    id: 18,\n    typeString: COLLECTION,\n    title: () => t('Collection'),\n    plural: () => t('Collections'),\n    mediaType: mediaTypes.NONE,\n  },\n  {\n    id: 19,\n    typeString: GAME,\n    title: () => t('Game'),\n    plural: () => t('Games'),\n    mediaType: mediaTypes.ROM,\n  },\n  {\n    id: 20,\n    typeString: AUTHOR,\n    // Intentionally untranslated.\n    title: () => 'Author',\n    // Intentionally untranslated.\n    plural: () => 'Authors',\n    mediaType: mediaTypes.NONE,\n  },\n  {\n    id: 21,\n    typeString: AUDIOBOOK,\n    // Intentionally untranslated.\n    title: () => 'Audiobook',\n    // Intentionally untranslated.\n    plural: () => 'Audiobooks',\n    mediaType: mediaTypes.AUDIO,\n  },\n  {\n    id: 22,\n    typeString: CHAPTER,\n    // Intentionally untranslated.\n    title: () => 'Chapter',\n    // Intentionally untranslated.\n    plural: () => 'Chapters',\n    mediaType: mediaTypes.AUDIO,\n    parent: AUDIOBOOK,\n  },\n]);\n\nexport const containsMetadataType = metadataTypes.contains;\nexport const getMetadataType = metadataTypes.get;\nexport const getAllMetadataTypes = metadataTypes.getAll;\n\nexport function getChildType(type: any) {\n  const metadataType = metadataTypes.get(type);\n\n  if (metadataType && metadataType.child) {\n    return metadataTypes.get(metadataType.child);\n  }\n}\n\n// @ts-expect-error ts-migrate(7023) FIXME: 'getLeafType' implicitly has return type 'any' bec... Remove this comment to see the full error message\nexport function getLeafType(type: any) {\n  const metadataType = metadataTypes.get(type);\n\n  if (metadataType) {\n    const child = metadataType.child;\n\n    return child == null ? metadataType : getLeafType(child);\n  }\n}\n\nexport function getParentType(type: any) {\n  const metadataType = metadataTypes.get(type);\n\n  if (metadataType) {\n    return metadataTypes.get(metadataType.parent);\n  }\n}\n\n// @ts-expect-error ts-migrate(7023) FIXME: 'getRootType' implicitly has return type 'any' bec... Remove this comment to see the full error message\nexport function getRootType(type: any) {\n  const metadataType = metadataTypes.get(type);\n\n  if (metadataType) {\n    const parent = metadataType.parent;\n\n    return parent == null ? metadataType : getRootType(parent);\n  }\n}\n\n// @ts-expect-error ts-migrate(7023) FIXME: 'getRelatedTypes' implicitly has return type 'any'... Remove this comment to see the full error message\nexport function getRelatedTypes(type: any, relatedTypes: any) {\n  if (!relatedTypes) {\n    const rootType = getRootType(type);\n\n    return rootType ? getRelatedTypes(rootType.id, []) : [];\n  }\n\n  const metadataType = metadataTypes.get(type);\n  const childType = getChildType(type);\n  const nextRelatedTypes = [...relatedTypes, metadataType];\n\n  return childType\n    ? getRelatedTypes(childType.id, nextRelatedTypes)\n    : nextRelatedTypes;\n}\n\nexport function isParentType(type: any) {\n  return !!getChildType(type);\n}\n\nexport function isDirectoryType(type: any) {\n  const metadataType = metadataTypes.get(type);\n\n  return !!metadataType && metadataType.mediaType === mediaTypes.NONE;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const AUDIO = 'audio';\nexport const VIDEO = 'video';\nexport const PHOTO = 'photo';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as agentIdentifiers from 'app/js/utils/constants/agentIdentifiers';\nimport * as scannerIdentifiers from 'app/js/utils/constants/scannerIdentifiers';\nimport t from 'app/js/utils/t';\nimport createTypes from './createTypes';\nimport * as metadataTypes from './metadataTypes';\n\nexport const MOVIES = 'movies';\nexport const TV = 'tv';\nexport const MUSIC = 'music';\nexport const PHOTOS = 'photos';\nexport const VIDEOS = 'videos';\nexport const GAMES = 'game';\nexport const AUTHOR = 'author';\n\nconst identifiers = ['key', 'typeID', 'typeString', 'rootTypeString'];\n\nconst sectionTypes = createTypes(identifiers, [\n  {\n    key: MOVIES,\n    typeID: '1',\n    typeString: metadataTypes.MOVIE,\n    rootTypeString: metadataTypes.MOVIE,\n    title: () => t('Movies'),\n    shortTitle: () => t('Movies'),\n    defaultLanguage: 'en',\n    defaultAgents: [agentIdentifiers.PLEXMOVIE, agentIdentifiers.IMDB],\n    defaultScanners: [\n      scannerIdentifiers.PLEX_MOVIE,\n      scannerIdentifiers.PLEX_MOVIE_SCANNER,\n    ],\n    mutual: {\n      agent: agentIdentifiers.PLEXMOVIE,\n      scanner: scannerIdentifiers.PLEX_MOVIE,\n    },\n  },\n  {\n    key: TV,\n    typeID: '2',\n    typeString: metadataTypes.SHOW,\n    rootTypeString: metadataTypes.SHOW,\n    title: () => t('TV Shows'),\n    shortTitle: () => t('Shows'),\n    defaultLanguage: 'en',\n    defaultAgents: [agentIdentifiers.PLEXSERIES, agentIdentifiers.THETVDB],\n    defaultScanners: [\n      scannerIdentifiers.PLEX_SERIES,\n      scannerIdentifiers.PLEX_SERIES_SCANNER,\n    ],\n    mutual: {\n      agent: agentIdentifiers.PLEXSERIES,\n      scanner: scannerIdentifiers.PLEX_SERIES,\n    },\n  },\n  {\n    key: MUSIC,\n    typeID: '8',\n    typeString: metadataTypes.ARTIST,\n    rootTypeString: metadataTypes.ARTIST,\n    title: () => t('Music'),\n    shortTitle: () => t('Music'),\n    defaultLanguage: 'en',\n    defaultAgents: [agentIdentifiers.PLEXMUSIC, agentIdentifiers.LASTFM],\n    defaultScanners: [\n      scannerIdentifiers.PLEX_MUSIC,\n      scannerIdentifiers.PLEX_MUSIC_SCANNER,\n    ],\n    exclusiveAgents: [agentIdentifiers.PLEXPREMIUMMUSIC],\n    exclusiveScanners: [scannerIdentifiers.PLEX_PREMIUM_MUSIC_SCANNER],\n    mutual: {\n      agent: agentIdentifiers.PLEXMUSIC,\n      scanner: scannerIdentifiers.PLEX_MUSIC,\n    },\n  },\n  {\n    key: PHOTOS,\n    typeID: '13',\n    typeString: metadataTypes.PHOTO,\n    rootTypeString: metadataTypes.PHOTO_ALBUM,\n    title: () => t('Photos'),\n    shortTitle: () => t('Photos'),\n    defaultLanguage: 'en',\n    defaultAgents: [agentIdentifiers.NONE],\n    defaultScanners: [scannerIdentifiers.PLEX_PHOTO_SCANNER],\n    mutual: {},\n  },\n  {\n    key: VIDEOS,\n    typeID: '1',\n    typeString: metadataTypes.MOVIE,\n    rootTypeString: metadataTypes.CLIP,\n    title: () => t('Other Videos'),\n    shortTitle: () => t('Videos'),\n    defaultLanguage: 'xn',\n    defaultAgents: [agentIdentifiers.NONE],\n    defaultScanners: [scannerIdentifiers.PLEX_VIDEO_FILES_SCANNER],\n    mutual: {},\n  },\n  {\n    key: GAMES,\n    typeID: '19',\n    typeString: metadataTypes.GAME,\n    rootTypeString: metadataTypes.GAME,\n    title: () => t('Games'),\n    shortTitle: () => t('Games'),\n    defaultLanguage: 'en',\n    defaultAgents: [agentIdentifiers.PLEXGAME],\n    defaultScanners: [scannerIdentifiers.PLEX_GAME],\n    mutual: {\n      agent: agentIdentifiers.PLEXGAME,\n      scanner: scannerIdentifiers.PLEX_GAME,\n    },\n  },\n  {\n    key: AUTHOR,\n    typeID: '20',\n    typeString: metadataTypes.AUTHOR,\n    rootTypeString: metadataTypes.AUTHOR,\n    // Intentionally untranslated.\n    title: () => 'Audiobooks',\n    // Intentionally untranslated.\n    shortTitle: () => 'Audiobooks',\n    defaultLanguage: 'en',\n    defaultAgents: [agentIdentifiers.PLEX_PERSONAL_MEDIA_AGENT],\n    defaultScanners: [scannerIdentifiers.PLEX_AUDIOBOOK],\n    mutual: {},\n  },\n]);\n\nexport default sectionTypes;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport t from 'app/js/utils/t';\nimport createTypes from 'app/js/utils/types/createTypes';\nimport * as metadataSubtypes from 'app/js/utils/types/metadataSubtypes';\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\n\nexport const UNKNOWN = 'unknown';\nexport const DISCOVER = 'discover';\nexport const DVR = 'dvr';\nexport const EPISODE = 'episode';\nexport const HOME = 'home';\nexport const MOVIES = 'movies';\nexport const MUSIC = 'music';\nexport const PHOTOS = 'photos';\nexport const PLAYLISTS = 'playlists';\nexport const PODCASTS = 'podcasts';\nexport const TV = 'tv';\nexport const VIDEOS = 'videos';\nexport const WEBSHOWS = 'webShows';\nexport const SHARED = 'shared';\nexport const GAME = 'game';\nexport const AUDIOBOOK = 'audiobook';\n\nconst sourceTypes = createTypes(\n  ['key'],\n  [\n    {\n      key: UNKNOWN,\n      title: () => t('Unknown'),\n      types: {},\n    },\n    {\n      key: PLAYLISTS,\n      types: { type: metadataTypes.PLAYLIST },\n    },\n    {\n      key: MOVIES,\n      types: { type: metadataTypes.MOVIE },\n    },\n    {\n      key: TV,\n      types: { type: metadataTypes.SHOW },\n    },\n    {\n      key: MUSIC,\n      types: { type: metadataTypes.ARTIST },\n    },\n    {\n      key: PHOTOS,\n      types: { type: metadataTypes.PHOTO },\n    },\n    {\n      key: VIDEOS,\n      types: { type: metadataTypes.MOVIE },\n    },\n    {\n      key: EPISODE,\n      types: { type: metadataTypes.EPISODE },\n    },\n    {\n      key: DVR,\n      title: () => t('Live TV & DVR'),\n    },\n    {\n      key: SHARED,\n      types: { type: metadataTypes.MIXED },\n    },\n    {\n      key: PODCASTS,\n      types: { type: metadataTypes.SHOW, subtype: metadataSubtypes.PODCAST },\n    },\n    {\n      key: WEBSHOWS,\n      types: { type: metadataTypes.SHOW, subtype: metadataSubtypes.WEBSHOW },\n    },\n    {\n      key: GAME,\n      types: { type: metadataTypes.GAME },\n    },\n    {\n      key: DISCOVER,\n    },\n    {\n      key: AUDIOBOOK,\n      types: { type: metadataTypes.AUTHOR },\n    },\n  ]\n);\n\nexport const getSourceType = sourceTypes.get;\nexport const getAllSourceTypes = sourceTypes.getAll;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport t from 'app/js/utils/t';\nimport createTypes from './createTypes';\n\nconst identifiers = ['id', 'typeString'];\n\nconst streamTypes = createTypes(identifiers, [\n  {\n    id: 1,\n    typeString: 'video',\n    key: 'videoStreamID',\n    title: () => t('Video'),\n  },\n  {\n    id: 2,\n    typeString: 'audio',\n    key: 'audioStreamID',\n    title: () => t('Audio'),\n  },\n  {\n    id: 3,\n    typeString: 'subtitles',\n    key: 'subtitleStreamID',\n    title: () => t('Subtitles'),\n  },\n  {\n    id: 4,\n    typeString: 'lyrics',\n    key: 'lyricStreamID',\n    title: () => t('Lyrics'),\n  },\n]);\n\nexport default streamTypes;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nconst portValidityRegex =\n  /^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/;\nconst ipv4Regex = /^([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/;\nconst ipv6ValidityRegex =\n  /(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/i;\nconst ipv6ParsingRegex = /[a-f0-9]{1,4}/gi;\n\nfunction parseV4Address(input: any) {\n  const matches = ipv4Regex.exec(input);\n\n  if (matches == null) {\n    return;\n  }\n\n  return {\n    octets: _.map(_.rest(matches), (value) => parseInt(value, 10)),\n  };\n}\n\nfunction parseV6Address(input: any) {\n  // Check if its valid before we try to parse it.\n\n  if (!ipv6ValidityRegex.test(input)) {\n    return;\n  }\n\n  const split = input.split('::');\n  const firstHalfMatches = split[0].match(ipv6ParsingRegex);\n\n  const result = {\n    parts: [],\n  };\n\n  if (firstHalfMatches != null) {\n    // If we found more than 8 matches the address isn't valid\n\n    if (firstHalfMatches.length > 8) {\n      return;\n    }\n\n    // @ts-expect-error ts-migrate(2322) FIXME: Type 'number[]' is not assignable to type 'never[]... Remove this comment to see the full error message\n    result.parts = _.map(firstHalfMatches, (value) => parseInt(value, 16));\n  }\n\n  if (split.length > 1) {\n    const secondHalfMatches = split[1].match(ipv6ParsingRegex);\n\n    const secondHalfParts = _.map(secondHalfMatches, (value) =>\n      parseInt(value, 16)\n    );\n\n    const difference = 8 - result.parts.length - secondHalfParts.length;\n\n    // If we found more than 8 parts or we have no parts this isn't valid\n\n    if (difference < 0 || difference === 8) {\n      return;\n    }\n\n    _.times(difference, () => {\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'number' is not assignable to par... Remove this comment to see the full error message\n      result.parts.push(0);\n    });\n\n    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.\n    result.parts = result.parts.concat(secondHalfParts);\n  }\n\n  return result;\n}\n\nexport function isValidPort(input: any) {\n  return portValidityRegex.test(input);\n}\n\nexport function isValidAddress(input: any) {\n  return isValidV4Address(input) || isValidV6Address(input);\n}\n\nexport function isLoopbackAddress(input: any) {\n  return (\n    input === 'localhost' ||\n    isLoopbackV4Address(input) ||\n    isLoopbackV6Address(input)\n  );\n}\n\nexport function isPrivateAddress(input: any) {\n  return isPrivateV4Address(input) || isPrivateV6Address(input);\n}\n\nexport function isPlexDirectAddress(input: any) {\n  return /plex\\.direct$/.test(input);\n}\n\nexport function isValidV4Address(input: any) {\n  const parsed = parseV4Address(input);\n\n  return !!(\n    parsed && _.all(parsed.octets, (octet) => octet >= 0 && octet <= 255)\n  );\n}\n\nexport function isLoopbackV4Address(input: any) {\n  const parsed = parseV4Address(input);\n\n  return !!(\n    parsed &&\n    (parsed.octets[0] === 127 || _.all(parsed.octets, (octet) => octet === 0))\n  );\n}\n\nexport function isPrivateV4Address(input: any) {\n  const parsed = parseV4Address(input);\n\n  if (parsed) {\n    if (parsed.octets[0] === 10) {\n      return true;\n    }\n\n    if (\n      parsed.octets[0] === 172 &&\n      parsed.octets[1] >= 16 &&\n      parsed.octets[1] <= 31\n    ) {\n      return true;\n    }\n\n    if (parsed.octets[0] === 192 && parsed.octets[1] === 168) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function isValidV6Address(input: any) {\n  const parsed = parseV6Address(input);\n\n  return !!(\n    parsed && _.all(parsed.parts, (part) => part >= 0 && part <= 65535)\n  );\n}\n\nexport function isLoopbackV6Address(input: any) {\n  const parsed = parseV6Address(input);\n\n  if (parsed) {\n    const leadingZeros = _.all(_.take(parsed.parts, 7), (part) => part === 0);\n\n    return leadingZeros && _.last(parsed.parts) === 1;\n  }\n\n  return false;\n}\n\nexport function isPrivateV6Address(input: any) {\n  const parsed = parseV6Address(input);\n\n  return !!(parsed && parsed.parts[0] >= 64512 && parsed.parts[0] <= 65023);\n}\n\nexport function getV4Subnet(input: any) {\n  return isValidV4Address(input) ? input.split('.').slice(0, -1).join('.') : '';\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function isAbsoluteUrl(url: any) {\n  return /^\\w+:\\/\\//.test(url);\n}\n","import qs, { IParseOptions, IStringifyOptions } from 'qs';\nimport URI from 'urijs';\n\nexport interface ParsedParams {\n  [key: string]: unknown;\n}\n\nexport interface ParsedURI {\n  isAbsolute: boolean;\n  hash: string;\n  host: string;\n  hostname: string;\n  href: string;\n  origin: string;\n  params: ParsedParams;\n  pathname: string;\n  port: string;\n  protocol: string;\n  search: string;\n}\n\nfunction sanitizeSegment(segment: string): string {\n  return String(segment).replace(/^\\/|\\/$/g, '');\n}\n\nconst PATH_PARAMS_HASH_REGEX = /^([^?#]*)(?:\\?([^#]*))?(#.*)?/;\nconst PATH_PARAMS_REGEX = /([^?]*)\\??(.*)()/;\n\nfunction getLastSegment(segmentedPath?: string): string {\n  if (segmentedPath) {\n    const match = /[^/\\\\]+$/.exec(segmentedPath);\n    const segment = match?.[0];\n\n    return segment || segmentedPath;\n  }\n\n  return '';\n}\n\nfunction stringifyParams(params: object, options?: IStringifyOptions): string {\n  // Plex Media Server does not accept brackets for arrays in the query\n  // string.\n  // See: https://github.com/plexinc/plex-media-server/issues/3081\n\n  return qs.stringify(params, {\n    arrayFormat: 'repeat',\n    ...options,\n  });\n}\n\nfunction parseParams(\n  queryString: string,\n  options?: IParseOptions\n): ParsedParams {\n  return qs.parse(queryString, options);\n}\n\nfunction parseUri(uri: string, options?: IParseOptions): ParsedURI {\n  const parts = URI.parse(uri);\n\n  const protocol = parts.protocol ? `${parts.protocol}:` : '';\n  const port = parts.port ? String(parts.port) : '';\n  const host = parts.hostname\n    ? (port && `${parts.hostname}:${port}`) || parts.hostname\n    : '';\n  const hostname = parts.hostname || '';\n  const hash = parts.fragment ? `#${parts.fragment}` : '';\n  const href = uri;\n  const origin = protocol && host ? `${protocol}//${host}` : '';\n  const pathname = parts.path || '';\n  const search = parts.query ? `?${parts.query}` : '';\n  const params = parts.query ? parseParams(parts.query, options) : {};\n\n  return {\n    isAbsolute: /^[\\w:]*\\/\\//.test(uri),\n    hash,\n    host,\n    hostname,\n    href,\n    origin,\n    params,\n    pathname,\n    port,\n    protocol,\n    search,\n  };\n}\n\nfunction parseUrl(url: string): ParsedURI {\n  const properties = { ...parseUri(url) };\n\n  // URL parsing inserts fallback values when the parsed string does not contain\n  // the related value. You can see this in action by running the gist below\n  // with different `href` inputs.\n  // See: https://gist.github.com/mseeley/f501b72c3dbee1bc25e5757ece7c16d0\n\n  const isFile = /file/.test(properties.protocol);\n\n  if (!properties.protocol) {\n    properties.protocol = window.location.protocol;\n  }\n\n  if (!isFile) {\n    if (!properties.host) {\n      properties.host = window.location.host;\n    }\n\n    if (!properties.hostname) {\n      properties.hostname = window.location.hostname;\n    }\n\n    if (!properties.port) {\n      properties.port = window.location.port;\n    }\n  }\n\n  if (!properties.origin) {\n    properties.origin = isFile\n      ? `${properties.protocol}//`\n      : `${properties.protocol}//${properties.host}`;\n  }\n\n  return properties;\n}\n\nfunction join(\n  segments: (string | null | undefined)[] | string,\n  params?: object | string,\n  options?: {\n    recognizeHash?: boolean;\n    parseParams?: boolean;\n    stringifyOptions?: IStringifyOptions;\n    trailingSlash?: boolean;\n  }\n): string {\n  // Normalize segments to an array of truthy strings.\n  if (typeof segments === 'string') {\n    segments = [segments];\n  }\n\n  segments = segments.filter((segment: any) => segment);\n\n  // Once segments are normalized, go through splitting them into parts;\n  // either path+params+hash, or just path+params.\n  const recognizeHash = options?.recognizeHash;\n  const regex = recognizeHash ? PATH_PARAMS_HASH_REGEX : PATH_PARAMS_REGEX;\n\n  // Walk the segments, building up path, params, and hash parts.\n  const traversal = segments.reduce(\n    (acc: any, segment: any) => {\n      const match = sanitizeSegment(segment).match(regex);\n\n      if (!match) {\n        return acc;\n      }\n\n      const [, path, segmentParams, hash] = match;\n\n      if (path) {\n        acc.path = acc.path ? acc.path + '/' + path : path;\n      }\n\n      if (segmentParams) {\n        acc.params = acc.params\n          ? acc.params + '&' + segmentParams\n          : segmentParams;\n      }\n\n      if (hash) {\n        acc.hash = hash;\n      }\n\n      return acc;\n    },\n    {\n      path: '',\n      params: '',\n      hash: '',\n    }\n  );\n\n  let stringifiedParams: string | undefined;\n  if (options?.parseParams) {\n    // Parse the built-up string params and merge the new params in.\n    stringifiedParams = stringifyParams(\n      Object.assign(\n        parseParams(traversal.params),\n        typeof params === 'string' ? parseParams(params) : params\n      )\n    );\n  } else if (traversal.params || params) {\n    if (traversal.params) {\n      stringifiedParams = traversal.params;\n    }\n\n    if (params) {\n      const newParams =\n        typeof params === 'string'\n          ? params\n          : stringifyParams(params, options?.stringifyOptions);\n\n      if (newParams) {\n        stringifiedParams = stringifiedParams\n          ? `${stringifiedParams}&${newParams}`\n          : newParams;\n      }\n    }\n  }\n\n  // Check if the first segment began with a slash before sanitization,\n  // and preserve it if so.\n  const leadingSlash =\n    segments.length && segments[0]?.charAt(0) === '/' ? '/' : '';\n\n  const path = traversal.path;\n\n  // Only add a trailing slash if one is not already present.\n  const trailingSlash =\n    options?.trailingSlash && path.length && path[path.length - 1] !== '/'\n      ? '/'\n      : '';\n\n  return (\n    leadingSlash +\n    path +\n    trailingSlash +\n    (stringifiedParams ? '?' + stringifiedParams : '') +\n    traversal.hash\n  );\n}\n\nconst path = {\n  getLastSegment,\n  stringifyParams,\n  parseParams,\n  parseUrl,\n  parseUri,\n  join,\n};\n\nexport default path;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction splitUrlSearchHashPathAndParams(url: any) {\n  const [, preHash, hash = ''] = url.match(/(^[^#]+)(?:#(.*$))?/);\n  const [, base, searchParams = ''] = preHash.match(/(^[^?]+)(\\?.*$)?/);\n  const [, hashPath, hashParams = ''] = hash.match(/(^[^?]*)(\\?.*$)?/);\n\n  return {\n    base,\n    searchParams,\n    hashPath,\n    hashParams,\n  };\n}\n\nexport default splitUrlSearchHashPathAndParams;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport config from 'app/js/models/config';\n\n// We should only share sync settings when the user is able to;  app\n// configuration allows it and the setting is enabled for this device\nexport default function canShareSyncSettings(userModel: any) {\n  return (\n    !userModel.get('experienceSettings').get('isRemoteSchemaVersionNewer') &&\n    config.allowSyncSettings &&\n    resolve('settingFinder').find('shouldSyncSettings')\n  );\n}\n","import ReminderType from 'app/js/utils/constants/user/ReminderType';\n\nexport const GLUE = '::';\n\nexport default function getReminderID(\n  reminderType: ReminderType,\n  key: string\n): string {\n  // The key is expected to be unique per reminderType.\n  return `${reminderType}${GLUE}${key}`;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction isFramed() {\n  return window !== window.top;\n}\n\nexport default isFramed;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function xhrErrorFilter(xhr: any) {\n  return {\n    status: xhr.status,\n    statusText: xhr.statusText,\n    readyState: xhr.readyState,\n    responseText: xhr.responseText,\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport log from 'app/js/utils/log/log';\nimport path from 'app/js/utils/url/path';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst XHRTracker = BaseClass.extend({\n  //\n  // Init\n\n  initialize() {\n    _.bindAll(this, 'onAjaxSend', 'onAjaxComplete');\n\n    this.requests = [];\n    this.byId = {};\n  },\n\n  //\n  // Control\n\n  startListening() {\n    const $document = $(document);\n\n    $document.on('ajaxSend', this.onAjaxSend);\n    $document.on('ajaxComplete', this.onAjaxComplete);\n  },\n\n  stopListening() {\n    const $document = $(document);\n\n    $document.off('ajaxSend', this.onAjaxSend);\n    $document.off('ajaxComplete', this.onAjaxComplete);\n  },\n\n  abortAll(scope: any) {\n    for (let i = this.requests.length - 1; i > -1; i--) {\n      const request = this.requests[i];\n\n      if (scope == null || scope === request.settings.scope) {\n        this.abort(request);\n      }\n    }\n  },\n\n  abort(rid: any) {\n    // Allow an id or the request object to be passed in.\n    const request = _.isString(rid) ? this.byId[rid] : rid;\n\n    if (request) {\n      request.xhr.aborting = true;\n      request.xhr.abort();\n\n      this.remove(request);\n    }\n  },\n\n  store(xhr: any, settings: any) {\n    const rid = _.uniqueId('r');\n    xhr.rid = rid;\n\n    const request = {\n      xhr: xhr,\n      settings: settings,\n    };\n\n    this.requests.push(request);\n    this.byId[rid] = request;\n\n    return request;\n  },\n\n  remove(request: any) {\n    const i = _.indexOf(this.requests, request);\n\n    if (i > -1) {\n      this.requests.splice(i, 1);\n    }\n\n    if (this.byId.hasOwnProperty(request.xhr.rid)) {\n      delete this.byId[request.xhr.rid];\n    }\n  },\n\n  //\n  // Listeners\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n  onAjaxSend(event: any, xhr: any, settings: any) {\n    // The CORS redirect transform causes two ajax send events. Ignore the\n    // second one since we can abort the inner request with the wrapper.\n    if (settings.skipCorsWithRedirect) {\n      return;\n    }\n\n    const request = this.store(xhr, settings);\n\n    xhr.always(() => {\n      // If we are currently aborting pending requests, removing items from\n      // the array can be harmful since the array will be changing as we\n      // loop through it.\n      if (!xhr.aborting) {\n        this.remove(request);\n      }\n    });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n  onAjaxComplete(event: any, xhr: any, options: any) {\n    const hasInvalidToken = xhr.status === 401;\n\n    if (xhr.aborting || !hasInvalidToken) {\n      return;\n    }\n\n    // Parse the URL once we know that this wasn't an intentional abort or the\n    // users token is valid.\n    const uri = path.parseUrl(options.url);\n    if (\n      hasInvalidToken &&\n      (uri.pathname === '/log' ||\n        uri.pathname === '/' ||\n        uri.pathname === '/media/providers')\n    ) {\n      // Defer connection testing due to auth failures to other non-passive\n      // requests. A connection test that fails should also be ignored since it\n      // may be a connection test for a server that happens to match another\n      // server's active connection. A connection test failure is handled\n      // separately.\n      // See: https://github.com/plexinc/plex-web-client/issues/5111\n      return;\n    }\n\n    const servers = resolve('appModel').get('servers');\n\n    const server = servers\n      ? servers.find((server_: any) => {\n          const activeConnection = server_.get('activeConnection');\n          const isConnected =\n            activeConnection && activeConnection.get('isConnected');\n          const url = _.result(activeConnection, 'url');\n\n          return isConnected\n            ? options.url.substring(0, url.length) === url\n            : false;\n        })\n      : null;\n\n    if (server) {\n      log(\n        '[Connections] Active connection to \"%s\" lost authorization',\n        server.get('debugName')\n      );\n      // We should test the server's active connection after a request fails.\n      server.trigger('error:connection', server);\n    }\n  },\n});\n\n// Singleton\nexport default new XHRTracker();\n","import { ComponentType } from 'react';\nimport {\n  DisplayFieldName,\n  DisplayImageType,\n} from 'app/js/v4/core/meta/metaTypes';\nimport {\n  MetadataItemState,\n  MetadataItemStateResponse,\n} from 'app/js/v4/core/metadataItemState/metadataItemStateTypes';\n\nexport enum MetadataType {\n  Movie = 'movie',\n  Show = 'show',\n  Season = 'season',\n  Episode = 'episode',\n  Person = 'person',\n  Artist = 'artist',\n  Album = 'album',\n  Track = 'track',\n  Clip = 'clip',\n  Photo = 'photo',\n  Game = 'game',\n  PhotoAlbum = 'photoalbum',\n  Playlist = 'playlist',\n  Collection = 'collection',\n  Directory = 'directory',\n  // Directory elements may contain a key that returns a pivot, or a Live TV\n  // channel. We treat Directory and Metadata elements the same, so allow for\n  // these types to exist on MetadataType\n  Channel = 'channel',\n  Hub = 'hub',\n  List = 'list',\n  Author = 'author',\n  Audiobook = 'audiobook',\n  Chapter = 'chapter',\n}\n\nexport enum MetadataNumericType {\n  Movie = 1,\n  Show = 2,\n  Season = 3,\n  Episode = 4,\n  Person = 7,\n  Artist = 8,\n  Album = 9,\n  Track = 10,\n  Clip = 12,\n  Photo = 13,\n  PhotoAlbum = 14,\n  Playlist = 15,\n  Collection = 18,\n  Game = 19,\n  Author = 20,\n  Audiobook = 21,\n  Chapter = 22,\n}\n\nexport enum MetadataSubtype {\n  Podcast = 'podcast',\n  Webshow = 'webshow',\n  Movie = 'movie',\n  Show = 'show',\n  Season = 'season',\n  Episode = 'episode',\n  Artist = 'artist',\n  Album = 'album',\n  Track = 'track',\n  Trailer = 'trailer',\n  DeletedScene = 'deletedScene',\n  Interview = 'interview',\n  MusicVideo = 'musicVideo',\n  BehindTheScenes = 'behindTheScenes',\n  SceneOrSample = 'sceneOrSample',\n  LiveMusicVideo = 'liveMusicVideo',\n  LyricMusicVideo = 'lyricMusicVideo',\n  Concert = 'concert',\n  Featurette = 'featurette',\n  Short = 'short',\n  Other = 'other',\n  // Photo and Clip subtypes were added in recent (1.20.3+) PMS versions that\n  // help identify clips and a photo library and movies in an Other Videos\n  // library respectively. We augment these types during normalization for older\n  // PMS versions\n  Photo = 'photo',\n  Clip = 'clip',\n  Author = 'author',\n  Audiobook = 'audiobook',\n  Chapter = 'chapter',\n}\n\nexport enum ExtraType {\n  Trailer = 1,\n  DeletedScene = 2,\n  Interview = 3,\n  MusicVideo = 4,\n  BehindTheScenes = 5,\n  SceneOrSample = 6,\n  LiveMusicVideo = 7,\n  LyricMusicVideo = 8,\n  Concert = 9,\n  Featurette = 10,\n  Short = 11,\n  Other = 12,\n}\n\nexport enum MediaType {\n  Video = 'video',\n  Audio = 'audio',\n  Photo = 'photo',\n  Rom = 'rom',\n}\n\nexport interface MetadataImage {\n  alt: string;\n  type: DisplayImageType;\n  url: string;\n  width?: number;\n  height?: number;\n}\n\nexport enum AdTypes {\n  VMAP = 'vmap',\n}\n\nexport enum GuidSource {\n  Gracenote = 'gracenote:/',\n  Imdb = 'imdb:/',\n  Iva = 'iva:/',\n  Plex = 'plex:/',\n  Tmdb = 'tmdb:/',\n  Tvdb = 'tvdb:/',\n  RottenTomatoes = 'rottentomatoes:/',\n  Unknown = '',\n}\nexport interface MetadataItemResponse\n  extends MetadataItemStateResponse,\n    Partial<MetadataItemRequired> {\n  action?: string;\n  addedAt?: number;\n  allowSync?: boolean;\n  art?: string;\n  attribution?: string;\n  attributionLogo?: string;\n  audienceRating?: number;\n  audienceRatingImage?: string;\n  augmentationKey?: string;\n  Ad?: {\n    internal: boolean;\n    type: AdTypes;\n    url: string;\n  }[];\n  backgroundColor?: string;\n  childCount?: number;\n  childrenKey?: string;\n  composite?: string;\n  content?: string;\n  contentRating?: string;\n  Context?: {\n    displayFields?: DisplayFieldName[];\n    displayImage?: DisplayImageType;\n  };\n  deletedAt?: number;\n  directory?: boolean;\n  duration?: number;\n  Extras?: InlineMetadataListResponse;\n  extraTitle?: string;\n  extraType?: ExtraType;\n  grandparentArt?: string;\n  grandparentHero?: string;\n  grandparentKey?: string;\n  grandparentRatingKey?: string;\n  grandparentTheme?: string;\n  grandparentThumb?: string;\n  grandparentTitle?: string;\n  guid?: string;\n  hero?: string;\n  icon?: string;\n  id?: string;\n  Image?: MetadataImage[];\n  includedAt?: number;\n  index?: number;\n  indirect?: boolean;\n  key: string;\n  leafCount?: number;\n  librarySectionID?: string;\n  librarySectionTitle?: string;\n  librarySectionUUID?: string;\n  maxYear?: number;\n  Metadata?: MetadataItemResponse;\n  minYear?: number;\n  OnDeck?: {\n    Metadata: MetadataItemResponse;\n  };\n  originallyAvailableAt?: string;\n  originalTitle?: string;\n  parentArt?: string;\n  parentIndex?: number;\n  parentKey?: string;\n  parentRatingKey?: string;\n  parentTheme?: string;\n  parentThumb?: string;\n  parentTitle?: string;\n  playableKey?: string;\n  playlistItemID?: string;\n  playlistType?: MediaType;\n  playQueueItemID?: string;\n  PopularLeaves?: InlineMetadataListResponse;\n  Preferences?: {\n    Setting: object[];\n  };\n  preview?: boolean;\n  primaryExtraKey?: string;\n  primaryGuid?: string;\n  publicPagesURL?: string;\n  radio?: boolean;\n  rating?: number;\n  ratingImage?: string;\n  ratingCount?: number;\n  ratingKey: string;\n  readOnly?: boolean;\n  remoteMedia?: boolean;\n  skipChildren?: boolean;\n  skipDetails?: boolean;\n  skipGrandparent?: boolean;\n  skipParent?: boolean;\n  source?: string;\n  sourceTitle?: string;\n  Stations?: InlineMetadataListResponse;\n  studio?: string;\n  subtype?: MetadataSubtype;\n  smart?: boolean;\n  summary?: string;\n  tagline?: string;\n  theme?: string;\n  thumb?: string;\n  title: string;\n  titleSort?: string;\n  type: MetadataType;\n  updatedAt?: number;\n  viewOffsetThumb?: string;\n  year?: number;\n  Autotag?: Tag[];\n  Channel?: Tag[];\n  Collection?: Tag[];\n  Country?: Tag[];\n  Director?: Tag[];\n  Genre?: Tag[];\n  Label?: Tag[];\n  Location?: Location[];\n  Media?: Media[];\n  Mood?: Tag[];\n  Platform?: Tag[];\n  Publisher?: Tag[];\n  Producer?: Tag[];\n  Role?: Tag[];\n  Review?: Tag[];\n  Studio?: Tag[];\n  Style?: Tag[];\n  Tag?: Tag[];\n  Writer?: Tag[];\n}\n\ninterface InlineMetadataListResponse {\n  size: number;\n  key?: string;\n  Metadata: MetadataItemResponse[];\n}\n\nexport interface MetadataItem\n  extends Omit<\n      MetadataItemResponse,\n      | keyof MetadataItemRequired\n      | keyof MetadataItemState\n      | 'Context'\n      | 'Extras'\n      | 'OnDeck'\n      | 'PopularLeaves'\n      | 'Stations'\n    >,\n    MetadataItemRequired {\n  // Properties added during normalization.\n  sourceURI: string;\n  listItemKey: string;\n  liveTVChannel?: LiveTVChannel;\n  isPlaylist: boolean;\n  isLiveTVChannel: boolean;\n  isExtra: boolean;\n  isFolder: boolean;\n  isUnreleased: boolean;\n  stations?: MetadataItem[];\n  extras?: MetadataItem[];\n  popularLeaves?: {\n    key: string;\n    items: MetadataItem[];\n  };\n  onDeck?: MetadataItem;\n  displayFields?: DisplayFieldName[];\n  displayImage?: DisplayImageType;\n}\n\ninterface MetadataItemRequired {\n  userState: boolean;\n  source: string;\n}\n\nexport enum StreamType {\n  Video = 1,\n  Audio = 2,\n  Subtitles = 3,\n  Lyrics = 4,\n}\n\nexport enum StreamIDParam {\n  Video = 'videoStreamID',\n  Audio = 'audioStreamID',\n  Subtitles = 'subtitleStreamID',\n  Lyrics = 'lyricStreamID',\n}\n\nexport interface Stream {\n  bitDepth?: number;\n  bitrate?: number;\n  chromaLocation?: string;\n  chromaSubsampling?: string;\n  codec?: string;\n  default?: boolean;\n  displayTitle?: string;\n  frameRate?: number;\n  hasScalingMatrix?: boolean;\n  height?: number;\n  id?: string;\n  index?: number;\n  key?: string;\n  language?: string;\n  level?: number;\n  profile?: string;\n  refFrames?: number;\n  scanType?: string;\n  selected?: boolean;\n  streamType?: StreamType;\n  title?: string;\n  width?: number;\n}\n\nexport interface Part {\n  accessible?: boolean;\n  audioProfile?: string;\n  container?: string;\n  duration?: number;\n  exists?: boolean;\n  file?: string;\n  id?: string;\n  indexes?: string;\n  key: string;\n  size?: number;\n  Stream?: Stream[];\n  videoProfile?: string;\n}\n\nexport enum OverlayGravity {\n  North = 'north',\n  NorthEast = 'northeast',\n  East = 'east',\n  SouthEast = 'southeast',\n  South = 'south',\n  SouthWest = 'southwest',\n  West = 'west',\n  NorthWest = 'northwest',\n  Center = 'center',\n}\n\nexport enum OverlaySize {\n  Small = 'small',\n  Medium = 'medium',\n  Large = 'large',\n}\n\nexport enum OverlayStartTimeOffsetType {\n  Absolute = 'absolute',\n  Relative = 'relative',\n}\n\nexport interface Overlay {\n  startTimeOffset: number;\n  startTimeOffsetType: OverlayStartTimeOffsetType;\n  duration?: number;\n  key: string;\n  gravity: OverlayGravity;\n  size: OverlaySize;\n}\n\nexport interface Media {\n  aspectRatio?: number;\n  audioChannels?: number;\n  audioCodec?: string;\n  audioProfile?: string;\n  beginsAt?: number;\n  bitrate?: number;\n  channelID?: number;\n  channelIdentifier?: string;\n  container?: string;\n  duration?: number;\n  endsAt?: number;\n  height?: number;\n  id: string;\n  origin?: string;\n  Part?: Part[];\n  Overlay?: Overlay[];\n  premiere?: boolean;\n  premium?: boolean;\n  onAir?: boolean;\n  proxyType?: string;\n  title?: string;\n  videoCodec?: string;\n  videoFrameRate?: string;\n  videoProfile?: string;\n  videoResolution?: string;\n  width?: number;\n}\n\nexport interface EPGMedia extends Media {\n  // which are required to describe EPG Media. // Union with Media to communicate attributes optional to general Media type\n  // Seconds elapsed since UTC epoch when the Media airing begins.\n  beginsAt: number;\n  channelIdentifier: string;\n  // Seconds elapsed since UTC epoch when the Media airing ends.\n  endsAt: number;\n}\n\nexport interface Location {\n  path: string;\n}\n\n// A subset of the Tag types from PMS. The full list can be found at\n// https://github.com/plexinc/plex-media-server/blob/master/Library/Tag.h\nexport enum TagNumericType {\n  Genre = 1,\n  Collection = 2,\n  Director = 4,\n  Writer = 5,\n  Actor = 6,\n  Marker = 12,\n  PhotoAutotag = 207,\n  Channel = 310,\n  Place = 400,\n}\n\nexport interface Tag {\n  context?: string;\n  filter?: string;\n  id?: number;\n  image?: string;\n  key?: string;\n  librarySectionID?: number;\n  librarySectionTitle?: string;\n  librarySectionType?: number;\n  link?: string;\n  role?: string;\n  source?: string;\n  tag: string;\n  tagType: TagNumericType;\n  text?: string;\n  thumb?: string;\n  type?: string;\n}\n\nexport interface LiveTVChannel {\n  id?: string;\n  thumb?: string;\n  title?: string;\n}\n\nexport type SimpleTitleComponent = ComponentType<{\n  className?: string;\n  metadataItem: MetadataItem;\n}>;\n\nexport type LinkTitleComponent = ComponentType<{\n  className?: string;\n  tabIndex?: number;\n  allowLink?: boolean;\n  metadataItem: MetadataItem;\n}>;\n","import { Provider } from 'app/js/v4/core/providers/providersTypes';\n\n// Rather than trying to handle `provider | undefined` in many places throughout\n// the codebase that rely on identifiers and selectors to find provider, use an\n// unknown provider object instead of `undefined`.\n\nconst unknownProvider: Provider = {\n  entityID: '',\n  identifier: '',\n  metricsIdentifier: '',\n  title: '',\n  features: [],\n  protocols: [],\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nexport default unknownProvider;\n","import { createSelector, Selector } from 'reselect';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\nimport selectRoot from 'app/js/v4/root/selectRoot';\nimport { CoreState } from './coreTypes';\n\nconst selectCore: Selector<LegacyRootState, CoreState> = createSelector(\n  selectRoot,\n  (root) => root.core\n);\n\nexport default selectCore;\n","import { createSelector, Selector } from 'reselect';\nimport selectCore from 'app/js/v4/core/selectCore';\nimport { ServerAccountsPerServerState } from 'app/js/v4/core/serverAccounts/serverAccountsTypes';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\nimport memoize from 'app/js/v4/utils/memoize';\n\n// This selector may be created frequently in components and saga workers,\n// but there is a limited number of possible selectors based on the arguments.\n// Rather than independently memoize in each component or saga, add a layer of\n// memoization on top of reselect here.\n\nfunction createServerAccountsSelector(\n  machineIdentifier: string\n): Selector<LegacyRootState, ServerAccountsPerServerState> {\n  return createSelector(\n    selectCore,\n    (core) => core.serverAccounts[machineIdentifier]\n  );\n}\n\nexport default memoize(createServerAccountsSelector);\n","import { createSlice } from '@reduxjs/toolkit';\nimport serversSlice from 'app/js/v4/core/servers/serversSlice';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\nimport {\n  ServerAccountsFetchFailedAction,\n  ServerAccountsFetchRequestedAction,\n  ServerAccountsFetchSucceededAction,\n  ServerAccountsPerServerState,\n  ServerAccountsState,\n} from './serverAccountsTypes';\n\nconst initialState: ServerAccountsState = {};\n\nconst initialPerServerState: ServerAccountsPerServerState = {\n  accounts: [],\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nconst serverAccountsSlice = createSlice({\n  name: 'serverAccounts',\n  initialState,\n\n  reducers: {\n    populateRequested(_state, _action: ServerAccountsFetchRequestedAction) {\n      // Handled by saga, no state change.\n    },\n\n    fetchRequested(state, { payload }: ServerAccountsFetchRequestedAction) {\n      const serverState = state[payload.server.machineIdentifier];\n\n      markPending(serverState);\n    },\n\n    fetchSucceeded(state, { payload }: ServerAccountsFetchSucceededAction) {\n      const serverState = state[payload.server.machineIdentifier];\n\n      markPopulated(serverState);\n      serverState.accounts = payload.data;\n    },\n\n    fetchFailed(state, { payload }: ServerAccountsFetchFailedAction) {\n      const serverState = state[payload.server.machineIdentifier];\n\n      markFailed(serverState, payload.error);\n    },\n  },\n\n  extraReducers: (builder) => {\n    builder.addCase(serversSlice.actions.connected, (state, { payload }) => {\n      const { server } = payload;\n\n      if (!state[server.machineIdentifier]) {\n        state[server.machineIdentifier] = { ...initialPerServerState };\n      }\n    });\n  },\n});\n\nexport default serverAccountsSlice;\n","import { createSlice } from '@reduxjs/toolkit';\nimport serversSlice from 'app/js/v4/core/servers/serversSlice';\nimport {\n  ServerActivitiesState,\n  ServerActivityAction,\n} from './serverActivitiesTypes';\n\nconst initialState: ServerActivitiesState = {};\n\nconst serverActivitiesSlice = createSlice({\n  name: 'serverActivities',\n  initialState,\n\n  reducers: {\n    activityStarted(_state, _action: ServerActivityAction) {\n      // Handled by other slices for now, no state change.\n    },\n\n    activityUpdated(_state, _action: ServerActivityAction) {\n      // Handled by other slices for now, no state change.\n    },\n\n    activityFinished(_state, _action: ServerActivityAction) {\n      // Handled by other slices for now, no state change.\n    },\n  },\n\n  extraReducers: (builder) => {\n    builder.addCase(serversSlice.actions.connected, (state, { payload }) => {\n      const { server } = payload;\n\n      if (!state[server.machineIdentifier]) {\n        state[server.machineIdentifier] = [];\n      }\n    });\n  },\n});\n\nexport default serverActivitiesSlice;\n","import { PayloadAction } from '@reduxjs/toolkit';\nimport { Server } from 'app/js/v4/core/servers/serversTypes';\n\nexport enum ServerActivityType {\n  BackupDatabase = 'general.db.backup',\n  CleanBundles = 'general.bundle.clean',\n  GrabberGrab = 'grabber.grab',\n  GrabberAssimilate = 'grabber.assimilate',\n  LibraryDelete = 'library.delete',\n  LibraryUpdateSection = 'library.update.section',\n  LibraryRefreshItems = 'library.refresh.items',\n  MediaGenerateBIF = 'media.generate.bif',\n  MediaGenerateChapterThumbs = 'media.generate.chapter.thumbs',\n  MediaGenerateIntros = 'media.generate.intros',\n  OptimizeDatabase = 'general.db.optimize',\n  ProviderDeviceChannelScan = 'provider.device.channelscan',\n  ProviderEpgLineupScan = 'provider.epg.lineupscan',\n  ProviderEpgLoad = 'provider.epg.load',\n  ProviderSubscriptionsProcess = 'provider.subscriptions.process',\n  ProviderSubscriptionRefresh = 'provider.subscription.refresh',\n  SubtitleDownload = 'subtitle.download',\n}\n\nexport interface ServerActivitiesState {\n  [machineIdentifier: string]: ServerActivity[];\n}\n\nexport interface ServerActivity {\n  uuid: string;\n  type: ServerActivityType;\n  cancellable: boolean;\n  title?: string;\n  subtitle?: string;\n  userID?: number;\n  progress?: number;\n  Context: any;\n  Response: any;\n}\n\nexport type ServerActivityAction = PayloadAction<{\n  server: Server;\n  activity: ServerActivity;\n}>;\n","import { createSelector, Selector } from 'reselect';\nimport selectCore from 'app/js/v4/core/selectCore';\nimport { ServerNowPlayingSessionsPerServerState } from 'app/js/v4/core/serverNowPlayingSessions/serverNowPlayingSessionsTypes';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\nimport memoize from 'app/js/v4/utils/memoize';\n\n// This selector may be created frequently in components and saga workers,\n// but there is a limited number of possible selectors based on the arguments.\n// Rather than independently memoize in each component or saga, add a layer of\n// memoization on top of reselect here.\n\nfunction createServerNowPlayingSessionsSelector(\n  machineIdentifier: string\n): Selector<LegacyRootState, ServerNowPlayingSessionsPerServerState> {\n  return createSelector(\n    selectCore,\n    (core) => core.serverNowPlayingSessions[machineIdentifier]\n  );\n}\n\nexport default memoize(createServerNowPlayingSessionsSelector);\n","import { createSlice } from '@reduxjs/toolkit';\nimport * as Sentry from '@sentry/browser';\nimport log from 'app/js/utils/log/log';\nimport {\n  ServerNowPlayingSessionsChangedAction,\n  ServerNowPlayingSessionsFetchFailedAction,\n  ServerNowPlayingSessionsFetchRequestedAction,\n  ServerNowPlayingSessionsFetchSucceededAction,\n  ServerNowPlayingSessionsPerServerState,\n  ServerNowPlayingSessionsState,\n  ServerNowPlayingSessionsStopErrorDismissedAction,\n  ServerNowPlayingSessionsStopFailedAction,\n  ServerNowPlayingSessionsStoppedAction,\n  ServerNowPlayingSessionsStopRequestedAction,\n} from 'app/js/v4/core/serverNowPlayingSessions/serverNowPlayingSessionsTypes';\nimport serversSlice from 'app/js/v4/core/servers/serversSlice';\nimport { Server } from 'app/js/v4/core/servers/serversTypes';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\n\nfunction reportServer(errorMessage: string, server: Server): void {\n  const {\n    isCloud,\n    isConnected,\n    isEmbedded,\n    isFullOwnedServer,\n    isFullServer,\n    isUnauthorized,\n    isUnavailable,\n  } = server;\n\n  // See: https://docs.sentry.io/platforms/javascript/enriching-events/context/#passing-context-directly\n  const context = {\n    extra: {\n      isCloud,\n      isConnected,\n      isEmbedded,\n      isFullOwnedServer,\n      isFullServer,\n      isUnauthorized,\n      isUnavailable,\n    },\n  };\n\n  const error = new Error(errorMessage);\n\n  log.error(error, context.extra);\n\n  Sentry.captureException(error, context);\n}\n\nconst initialState: ServerNowPlayingSessionsState = {};\n\nconst initialPerServerState: ServerNowPlayingSessionsPerServerState = {\n  sessionKeys: [],\n  sessionsByKey: {},\n  isPending: false,\n  isPopulated: false,\n  error: null,\n  stopSessionError: null,\n};\n\nconst serverNowPlayingSessionsSlice = createSlice({\n  name: 'serverNowPlayingSessions',\n  initialState,\n\n  reducers: {\n    fetchRequested(\n      state,\n      { payload }: ServerNowPlayingSessionsFetchRequestedAction\n    ) {\n      const serverState = state[payload.server.machineIdentifier];\n\n      if (!serverState) {\n        return;\n      }\n\n      markPending(serverState);\n    },\n\n    fetchSucceeded(\n      state,\n      { payload }: ServerNowPlayingSessionsFetchSucceededAction\n    ) {\n      const serverState = state[payload.server.machineIdentifier];\n\n      if (!serverState) {\n        return;\n      }\n\n      const { sessionKeys, sessionsByKey } = payload.data.reduce<{\n        sessionKeys: typeof initialPerServerState.sessionKeys;\n        sessionsByKey: typeof initialPerServerState.sessionsByKey;\n      }>(\n        (acc, session) => {\n          acc.sessionKeys.push(session.sessionKey);\n          acc.sessionsByKey[session.sessionKey] = session;\n\n          return acc;\n        },\n        { sessionKeys: [], sessionsByKey: {} }\n      );\n\n      markPopulated(serverState);\n      serverState.sessionKeys = sessionKeys;\n      serverState.sessionsByKey = sessionsByKey;\n    },\n\n    fetchFailed(state, { payload }: ServerNowPlayingSessionsFetchFailedAction) {\n      const serverState = state[payload.server.machineIdentifier];\n\n      if (!serverState) {\n        return;\n      }\n\n      markFailed(serverState, payload.error);\n    },\n\n    sessionChanged(state, { payload }: ServerNowPlayingSessionsChangedAction) {\n      const { server, message } = payload;\n      const serverState = state[server.machineIdentifier];\n\n      // See: https://github.com/plexinc/plex-web-client/issues/16539\n      if (!serverState) {\n        reportServer('Session changed without serverState', server);\n        return;\n      }\n\n      const existingSession = serverState.sessionsByKey[message.sessionKey];\n\n      if (existingSession && existingSession.key === message.key) {\n        existingSession.viewOffset = message.viewOffset;\n        existingSession.Player.state = message.state;\n      }\n    },\n\n    sessionStopped(state, { payload }: ServerNowPlayingSessionsStoppedAction) {\n      const { server, sessionKey } = payload;\n      const serverState = state[server.machineIdentifier];\n\n      // See: https://github.com/plexinc/plex-web-client/issues/16539\n      if (!serverState) {\n        reportServer('Session stopped without serverState', server);\n        return;\n      }\n\n      const existingSession = serverState.sessionsByKey[sessionKey];\n\n      if (existingSession) {\n        delete serverState.sessionsByKey[sessionKey];\n\n        serverState.sessionKeys.splice(\n          serverState.sessionKeys.indexOf(sessionKey),\n          1\n        );\n      }\n    },\n\n    stopRequested(\n      _state,\n      _action: ServerNowPlayingSessionsStopRequestedAction\n    ) {\n      // Handled by saga, no state change.\n    },\n\n    stopFailed(state, { payload }: ServerNowPlayingSessionsStopFailedAction) {\n      const serverState = state[payload.server.machineIdentifier];\n\n      if (!serverState) {\n        return;\n      }\n\n      serverState.stopSessionError = payload.error;\n    },\n\n    stopErrorDismissed(\n      state,\n      { payload }: ServerNowPlayingSessionsStopErrorDismissedAction\n    ) {\n      const serverState = state[payload.server.machineIdentifier];\n\n      if (!serverState) {\n        return;\n      }\n\n      serverState.stopSessionError = null;\n    },\n  },\n\n  extraReducers: (builder) => {\n    builder.addCase(serversSlice.actions.connected, (state, { payload }) => {\n      const { server } = payload;\n\n      if (!state[server.machineIdentifier]) {\n        state[server.machineIdentifier] = { ...initialPerServerState };\n      }\n    });\n  },\n});\n\nexport default serverNowPlayingSessionsSlice;\n","import { createSelector, Selector } from 'reselect';\nimport selectManageableServerEntityIDs from 'app/js/stores/selectors/server/selectManageableServerEntityIDs';\nimport selectServers from 'app/js/stores/selectors/server/selectServers';\nimport { Server, UnstableServer } from 'app/js/v4/core/servers/serversTypes';\nimport unknownServer from 'app/js/v4/core/servers/utils/unknownServer';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\n\nfunction getManageableServer(\n  primaryServerEntityID: string,\n  manageableServerEntityIDs: string[]\n): string | null {\n  if (manageableServerEntityIDs.includes(primaryServerEntityID)) {\n    return primaryServerEntityID;\n  }\n\n  if (manageableServerEntityIDs) {\n    return manageableServerEntityIDs[0];\n  }\n\n  return null;\n}\n\nconst selectServer: Selector<LegacyRootState, Server & UnstableServer> =\n  createSelector(\n    selectServers,\n    selectManageableServerEntityIDs,\n    (appState: any) => appState.primaryServer,\n    (servers, manageableServers, primaryServer) => {\n      const serverEntityID = getManageableServer(\n        primaryServer,\n        manageableServers\n      );\n\n      return (\n        servers.find(\n          (server: Server & UnstableServer) =>\n            server.entityID === serverEntityID\n        ) || unknownServer\n      );\n    }\n  );\n\nexport default selectServer;\n","import { createSlice } from '@reduxjs/toolkit';\nimport {\n  ServerConnectedAction,\n  ServerLibraryScanUpdatedAction,\n  ServersState,\n} from './serversTypes';\n\nconst initialState: ServersState = {};\n\nconst serversSlice = createSlice({\n  name: 'servers',\n  initialState,\n\n  reducers: {\n    connected(_state, _action: ServerConnectedAction) {\n      // Handled by other slices for now, no state change.\n    },\n\n    libraryScanUpdated(_state, _action: ServerLibraryScanUpdatedAction) {\n      // Handled by other slices for now, no state change.\n    },\n  },\n});\n\nexport default serversSlice;\n","import { PayloadAction } from '@reduxjs/toolkit';\nimport { ServerActivity } from 'app/js/v4/core/serverActivities/serverActivitiesTypes';\nimport { ServerSetting } from 'app/js/v4/core/serverSettings/serverSettingsTypes';\n\nexport type ServersState = object;\n\nexport enum ServerPlatform {\n  Windows = 'Windows',\n  Android = 'Android',\n  Linux = 'Linux',\n  FreeBSD = 'FreeBSD',\n  MacOSX = 'MacOSX',\n  IOS = 'iOS',\n}\n\nexport interface Server {\n  entityID: string;\n  machineIdentifier: string;\n  accessToken?: string;\n  uri?: string;\n  version?: string;\n  platform?: ServerPlatform;\n  friendlyName: string;\n  sourceTitle?: string;\n  countryCode?: string;\n  allowSync: boolean;\n  allowMediaDeletion: boolean;\n  backgroundProcessing: boolean;\n  transcoderVideo: boolean;\n  isCloud: boolean;\n  isEmbedded: boolean;\n  isFullServer: boolean;\n  isFullOwnedServer: boolean;\n  isOutOfDate: boolean;\n  isUnavailable: boolean;\n  isUnauthorized: boolean;\n  isConnected: boolean;\n  isShared: boolean;\n  isTransient: boolean;\n  livetv?: number;\n  connectionTestResult: ConnectionTestResult;\n  ownerId?: number;\n  ownerFeatures?: string[];\n}\n\nexport interface UnstableServer {\n  entityID: string;\n  machineIdentifier: string;\n  accessToken?: string;\n  version?: string;\n  platform?: ServerPlatform;\n  friendlyName: string;\n  sourceTitle?: string;\n  countryCode?: string;\n  allowSync: boolean;\n  allowMediaDeletion: boolean;\n  backgroundProcessing: boolean;\n  transcoderVideo: boolean;\n  isClaimed?: boolean;\n  isCloud: boolean;\n  isEmbedded: boolean;\n  isFullServer: boolean;\n  isFullOwnedServer: boolean;\n  isOutOfDate: boolean;\n  isShared: boolean;\n  isUnavailable: boolean;\n  isUnauthorized: boolean;\n  isConnected: boolean;\n  isTransient: boolean;\n  livetv?: number;\n  ownerId?: number;\n  ownerFeatures?: string[];\n  activeConnection?: { uri: string };\n  connectionTestResult: ConnectionTestResult;\n  providers: string[];\n  desktop?: {\n    activities: ServerActivity[];\n    settings: ServerSetting[];\n  };\n}\n\nexport type ServerConnectedAction = PayloadAction<{\n  server: Server;\n}>;\n\nexport type ServerLibraryScanUpdatedAction = PayloadAction<{\n  server: Server;\n}>;\n\nexport enum ConnectionTestResult {\n  Pending = 'pending',\n  Connected = 'connected',\n  Unavailable = 'unavailable',\n  Unauthorized = 'unauthorized',\n}\n","import { Server, UnstableServer } from 'app/js/v4/core/servers/serversTypes';\n\nexport default function toStableServerObject(server: UnstableServer): Server {\n  return {\n    entityID: server.entityID,\n    machineIdentifier: server.machineIdentifier,\n    accessToken: server.accessToken,\n    uri: server.activeConnection ? server.activeConnection.uri : undefined,\n    version: server.version,\n    platform: server.platform,\n    friendlyName: server.friendlyName,\n    sourceTitle: server.sourceTitle,\n    countryCode: server.countryCode,\n    allowSync: server.allowSync,\n    allowMediaDeletion: server.allowMediaDeletion,\n    backgroundProcessing: server.backgroundProcessing,\n    transcoderVideo: server.transcoderVideo,\n    isCloud: server.isCloud,\n    isEmbedded: server.isEmbedded,\n    isFullServer: server.isFullServer,\n    isFullOwnedServer: server.isFullOwnedServer,\n    isOutOfDate: server.isOutOfDate,\n    isShared: server.isShared,\n    isUnavailable: server.isUnavailable,\n    isUnauthorized: server.isUnauthorized,\n    isConnected: server.isConnected,\n    isTransient: server.isTransient,\n    livetv: server.livetv,\n    connectionTestResult: server.connectionTestResult,\n    ownerId: server.ownerId,\n    ownerFeatures: server.ownerFeatures,\n  };\n}\n","import {\n  ConnectionTestResult,\n  Server,\n  UnstableServer,\n} from 'app/js/v4/core/servers/serversTypes';\n\n// Rather than trying to handle `server | undefined` in many places throughout\n// the codebase that rely on identifiers and selectors to find servers, use an\n// unknown server object instead of `undefined`.\n\nconst unknownServer: Server & UnstableServer = {\n  entityID: '',\n  machineIdentifier: '',\n  friendlyName: 'Unknown',\n  allowSync: false,\n  allowMediaDeletion: false,\n  backgroundProcessing: false,\n  transcoderVideo: false,\n  isCloud: false,\n  isEmbedded: false,\n  isFullServer: false,\n  isFullOwnedServer: false,\n  isOutOfDate: false,\n  isShared: false,\n  isUnavailable: false,\n  isUnauthorized: false,\n  isConnected: false,\n  isTransient: false,\n  connectionTestResult: ConnectionTestResult.Pending,\n  ownerFeatures: [],\n  providers: [],\n};\n\nexport default unknownServer;\n","import { useCallback, useMemo, useState } from 'react';\n\nexport interface UseDisclosureReturn {\n  isOpen: boolean;\n  onOpen(): void;\n  onClose(): void;\n  onToggle(): void;\n}\n\nexport default function useDisclosure(): UseDisclosureReturn {\n  const [isOpen, setIsOpenState] = useState(false);\n\n  const onOpen = useCallback(() => setIsOpenState(true), []);\n  const onClose = useCallback(() => setIsOpenState(false), []);\n  const onToggle = useCallback(() => setIsOpenState(!isOpen), [isOpen]);\n\n  return useMemo(() => {\n    return {\n      isOpen,\n      onOpen,\n      onClose,\n      onToggle,\n    };\n  }, [isOpen, onClose, onOpen, onToggle]);\n}\n","import React, { createContext, ReactElement, useContext, useMemo } from 'react';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport { MetricsPage } from 'app/js/v4/core/ui/metrics/metricsTypes';\n\nexport const Missing = Symbol(__DEV__ ? 'Missing' : undefined);\nexport const Placeholder = Symbol(__DEV__ ? 'Placeholder' : undefined);\n\ninterface MetricsContextProviderProps {\n  metricsPage?: MetricsPage;\n  name?: string;\n  children: JSX.Element;\n  metricsContextParam?: string;\n  row?: number | typeof Missing;\n  column?: number | typeof Missing;\n}\n\nexport type MetricsContextTuple = readonly [\n  string | typeof Missing,\n  number | typeof Missing | typeof Placeholder,\n  number | typeof Missing | typeof Placeholder\n];\n\ninterface Metrics {\n  metricsPage: MetricsPage;\n  metricsContextTuple: MetricsContextTuple;\n}\n\nexport const Empty: MetricsContextTuple = [Missing, Missing, Missing];\n\nexport const MetricsContext = createContext<Metrics>({\n  metricsPage: metricsPages.UNKNOWN,\n  metricsContextTuple: Empty,\n});\n\nexport function useMetricsContext(): Metrics {\n  return useContext<Metrics>(MetricsContext);\n}\n\nexport function stringifyMetricsContextTuple([\n  name,\n  row,\n  column,\n]: MetricsContextTuple): string | undefined {\n  if (name === Missing) {\n    return;\n  }\n\n  return [\n    name,\n    row === Missing || row === Placeholder ? '' : row,\n    column === Missing || column === Placeholder ? '' : column,\n  ]\n    .join('~')\n    .replace(/~+$/, ''); // trim trailing tildes\n}\n\nexport function parseMetricsContextString(str?: string): MetricsContextTuple {\n  if (!str) {\n    return Empty;\n  }\n\n  const [name, rowStr, columnStr] = str.split('~');\n  if (!name) {\n    return Empty;\n  }\n\n  return [\n    name,\n    rowStr ? parseInt(rowStr, 10) : Placeholder,\n    columnStr ? parseInt(columnStr, 10) : Placeholder,\n  ];\n}\n\nexport type MetricsContextProperties =\n  | { context: string; row?: number; col?: number }\n  | undefined;\n\nexport function toMetricsProperties([\n  context,\n  row,\n  col,\n]: MetricsContextTuple): MetricsContextProperties {\n  if (context === Missing) {\n    return;\n  }\n\n  return {\n    context,\n    row: row === Placeholder || row === Missing ? undefined : row,\n    col: col === Placeholder || col === Missing ? undefined : col,\n  };\n}\n\nexport default function MetricsContextProvider({\n  children,\n  metricsPage: metricsPageFromProps,\n  metricsContextParam,\n  name: nameFromProps,\n  row: rowFromProps = Missing,\n  column: columnFromProps = Missing,\n}: MetricsContextProviderProps): ReactElement {\n  const { metricsPage, metricsContextTuple } = useMetricsContext();\n\n  const metricsContextValue = useMemo<MetricsContextTuple | undefined>(() => {\n    const [name, row, column] = metricsContextTuple;\n\n    if (metricsContextParam) {\n      // A string-encoded context takes precedence; parse and proceed;\n      // This is the only path by which Placeholder elements come into play.\n      return parseMetricsContextString(metricsContextParam);\n    } else if (nameFromProps) {\n      // If name is provided by props, set up a new, fillable row+column layer.\n      return [`${metricsPage}:${nameFromProps}`, rowFromProps, columnFromProps];\n    } else if (name !== Missing) {\n      // Ensure we're in a fillable layer; no row+column until we have a name.\n      // When row+column props come in, only place them in Missing slots.\n      return [\n        name,\n        row === Missing ? rowFromProps : row,\n        column === Missing ? columnFromProps : column,\n      ];\n    } else if (metricsPageFromProps && metricsPageFromProps !== metricsPage) {\n      // Forward the original context when the metrics page changes.\n      return metricsContextTuple;\n    }\n\n    return;\n  }, [\n    columnFromProps,\n    metricsContextTuple,\n    metricsContextParam,\n    metricsPage,\n    metricsPageFromProps,\n    nameFromProps,\n    rowFromProps,\n  ]);\n\n  const metricsValue = useMemo<Metrics | undefined>(() => {\n    return metricsContextValue\n      ? {\n          metricsPage: metricsPageFromProps || metricsPage,\n          metricsContextTuple: metricsContextValue,\n        }\n      : undefined;\n  }, [metricsContextValue, metricsPage, metricsPageFromProps]);\n\n  return metricsValue ? (\n    <MetricsContext.Provider value={metricsValue}>\n      {children}\n    </MetricsContext.Provider>\n  ) : (\n    children\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyPageContentScroller\":\"NPdXX ecHmp sWZ6m\",\"content\":\"rhlQN\",\"icon\":\"lHMe0\",\"imgIcon\":\"kL3BT\",\"title\":\"M4uOC\",\"description\":\"qPWwL\",\"footer\":\"AC2LT\"};","import React, { ReactElement, ReactNode } from 'react';\nimport Scroller, {\n  ScrollerProps,\n} from 'app/js/v4/core/ui/scrollers/components/Scroller';\nimport styles from './EmptyPageContent.css';\n\nexport interface EmptyPageContentProps extends Omit<ScrollerProps, 'children'> {\n  children?: ReactNode;\n  className?: string;\n  contentClassName?: string;\n  icon?: ReactElement;\n  iconSrc?: string;\n  titleClassName?: string;\n  title?: string;\n  descriptionClassName?: string;\n  description?: ReactNode;\n  footerClassName?: string;\n  footer?: string;\n}\n\nexport default function EmptyPageContent({\n  children,\n  className = styles.emptyPageContentScroller,\n  contentClassName = styles.content,\n  icon,\n  titleClassName = styles.title,\n  iconSrc,\n  title,\n  descriptionClassName = styles.description,\n  description,\n  footerClassName = styles.footer,\n  footer,\n  ...scrollerProps\n}: EmptyPageContentProps): ReactElement {\n  return (\n    <Scroller className={className} {...scrollerProps}>\n      <div className={contentClassName}>\n        {icon ? <span className={styles.icon}>{icon}</span> : null}\n\n        {iconSrc ? <img className={styles.imgIcon} src={iconSrc} /> : null}\n\n        {title ? <div className={titleClassName}>{title}</div> : null}\n\n        {description ? (\n          <div className={descriptionClassName}>{description}</div>\n        ) : null}\n\n        {children}\n      </div>\n\n      {footer ? <div className={footerClassName}>{footer}</div> : null}\n    </Scroller>\n  );\n}\n","import React, { ReactElement } from 'react';\nimport IconAlert from 'app/glyphs/alert-560.svg';\nimport EmptyPageContent, { EmptyPageContentProps } from './EmptyPageContent';\n\nexport type ErrorPageContentProps = EmptyPageContentProps;\n\nexport default function ErrorPageContent(\n  props: ErrorPageContentProps\n): ReactElement {\n  return <EmptyPageContent icon={<IconAlert />} {...props} />;\n}\n","import { MutableRefObject, Ref } from 'react';\n\nfunction mergeRefs<RefType>(...refs: Ref<RefType>[]): (value: RefType) => void {\n  return (value) => {\n    refs.forEach((ref) => {\n      if (typeof ref === 'function') {\n        ref(value);\n      } else if (ref != null) {\n        (ref as MutableRefObject<RefType>).current = value;\n      }\n    });\n  };\n}\n\nexport default mergeRefs;\n","// extracted by mini-css-extract-plugin\nexport default {\"scroller\":\"sWZ6m\",\"none\":\"ROO8w\",\"vertical\":\"MRMQs\",\"auto\":\"qbtq4\",\"horizontal\":\"J2Ktf\",\"omni\":\"njLyG\"};","import classNames from 'classnames';\nimport React, {\n  CSSProperties,\n  ReactElement,\n  ReactNode,\n  Ref,\n  useCallback,\n  useEffect,\n  useRef,\n} from 'react';\nimport mergeRefs from 'app/js/v4/core/ui/utils/mergeRefs';\nimport 'app/js/libs/scroll-behavior-polyfill-2.0.13';\nimport styles from './Scroller.css';\n\nexport enum ScrollDirection {\n  None = 'none',\n  Vertical = 'vertical',\n  Horizontal = 'horizontal',\n  Omni = 'omni',\n}\n\nexport interface InnerScrollerProps {\n  forwardedRef: Ref<HTMLDivElement>;\n  className?: string;\n  style?: CSSProperties;\n  children: ReactNode;\n  scrollDirection?: ScrollDirection;\n  autoScroll?: boolean;\n  smoothScroll?: boolean;\n  targetScrollTop?: number;\n  targetScrollLeft?: number;\n  onScrollPositionChange?(position: {\n    scrollTop: number;\n    scrollLeft: number;\n  }): void;\n}\n\nexport type ScrollerProps = Omit<InnerScrollerProps, 'forwardedRef'>;\n\nfunction Scroller({\n  forwardedRef,\n  className = styles.scroller,\n  style,\n  children,\n  scrollDirection = ScrollDirection.Vertical,\n  autoScroll = true,\n  smoothScroll = false,\n  targetScrollTop,\n  targetScrollLeft,\n  onScrollPositionChange,\n}: InnerScrollerProps): ReactElement {\n  const ref = useRef<HTMLDivElement>(null);\n\n  //\n  // Callbacks\n\n  const onScroll = useCallback(\n    (event) => {\n      // Avoid handling the scroll event unless this component is what triggered\n      // the scroll event. Avoid stop propagation because parents sill need to\n      // know if a scroll event happened.\n\n      if (\n        onScrollPositionChange &&\n        ref.current != null &&\n        ref.current === event.target\n      ) {\n        onScrollPositionChange({\n          scrollTop: ref.current.scrollTop,\n          scrollLeft: ref.current.scrollLeft,\n        });\n      }\n    },\n    [ref, onScrollPositionChange]\n  );\n\n  //\n  // Effects\n\n  useEffect(() => {\n    if (\n      ref.current != null &&\n      (targetScrollTop != null || targetScrollLeft != null)\n    ) {\n      ref.current.scrollTo({\n        top: targetScrollTop,\n        left: targetScrollLeft,\n        behavior: smoothScroll ? 'smooth' : 'auto',\n      });\n    }\n  }, [ref, targetScrollTop, targetScrollLeft, smoothScroll]);\n\n  //\n  // Render\n\n  return (\n    <div\n      ref={mergeRefs<HTMLDivElement>(forwardedRef, ref)}\n      className={classNames(\n        className,\n        styles[scrollDirection],\n        autoScroll && styles.auto\n      )}\n      style={style}\n      onScroll={onScroll}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport default React.forwardRef<HTMLDivElement, ScrollerProps>((props, ref) => {\n  return <Scroller {...props} forwardedRef={ref} />;\n});\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"RD8jJ m_4Rc\",\"tiny\":\"aehJH\",\"small\":\"C1jU8\",\"medium\":\"RqLXq\",\"large\":\"KGGxk\"};","import classNames from 'classnames';\nimport React, { ReactElement } from 'react';\nimport t from 'app/js/utils/t';\nimport Size from 'app/js/v4/core/ui/types/Size';\nimport styles from './Spinner.css';\n\nexport interface SpinnerProps {\n  className?: string;\n  size?: Size;\n}\n\nexport default function Spinner({\n  className = styles.spinner,\n  size = Size.Medium,\n}: SpinnerProps): ReactElement {\n  return (\n    <div\n      aria-label={t('Loading')}\n      className={classNames(className, styles[size])}\n    />\n  );\n}\n","enum Size {\n  Tiny = 'tiny',\n  Small = 'small',\n  Medium = 'medium',\n  Large = 'large',\n}\n\nexport default Size;\n","import { createSlice } from '@reduxjs/toolkit';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\nimport {\n  BandwidthFetchFailedAction,\n  BandwidthFetchRequestedAction,\n  BandwidthFetchSucceededAction,\n  BandwidthState,\n} from './dashboardBandwidthTypes';\n\nconst initialState: BandwidthState = {\n  statistics: [],\n  isPending: false,\n  isPopulated: false,\n  error: null,\n  requestTimestampMilliseconds: null,\n  responseTimestampMilliseconds: null,\n};\n\nconst dashboardBandwidthSlice = createSlice({\n  name: 'dashboardBandwidth',\n  initialState,\n\n  reducers: {\n    reset() {\n      return initialState;\n    },\n\n    bandwidthFetchRequested(state, _action: BandwidthFetchRequestedAction) {\n      markPending(state);\n    },\n\n    bandwidthFetchSucceeded(state, { payload }: BandwidthFetchSucceededAction) {\n      markPopulated(state);\n      state.statistics = payload.data;\n      state.requestTimestampMilliseconds = payload.requestTimestampMilliseconds;\n      state.responseTimestampMilliseconds =\n        payload.responseTimestampMilliseconds;\n    },\n\n    bandwidthFetchFailed(state, { payload }: BandwidthFetchFailedAction) {\n      markFailed(state, payload.error);\n      state.requestTimestampMilliseconds = null;\n      state.responseTimestampMilliseconds = null;\n    },\n\n    bandwidthAbortRequested() {\n      // Handled by saga, no state change.\n    },\n  },\n});\n\nexport default dashboardBandwidthSlice;\n","import { createSlice } from '@reduxjs/toolkit';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\nimport {\n  PlayHistoryFetchFailedAction,\n  PlayHistoryFetchRequestedAction,\n  PlayHistoryFetchSucceededAction,\n  PlayHistoryState,\n} from './dashboardPlayHistoryTypes';\n\nconst initialState: PlayHistoryState = {\n  statistics: [],\n  accounts: [],\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nconst dashboardPlayHistorySlice = createSlice({\n  name: 'dashboardPlayHistory',\n  initialState,\n\n  reducers: {\n    reset() {\n      return initialState;\n    },\n\n    playHistoryFetchRequested(state, _action: PlayHistoryFetchRequestedAction) {\n      markPending(state);\n    },\n\n    playHistoryFetchSucceeded(\n      state,\n      { payload }: PlayHistoryFetchSucceededAction\n    ) {\n      markPopulated(state);\n      state.statistics = payload.data.statistics;\n      state.accounts = payload.data.accounts;\n    },\n\n    playHistoryFetchFailed(state, { payload }: PlayHistoryFetchFailedAction) {\n      markFailed(state, payload.error);\n    },\n  },\n});\n\nexport default dashboardPlayHistorySlice;\n","import { createSlice } from '@reduxjs/toolkit';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\nimport {\n  ResourcesFetchFailedAction,\n  ResourcesFetchRequestedAction,\n  ResourcesFetchSucceededAction,\n  ResourcesState,\n} from './dashboardResourcesTypes';\n\nconst initialState: ResourcesState = {\n  statistics: [],\n  isPending: false,\n  isPopulated: false,\n  isUnsupported: false,\n  error: null,\n  requestTimestampMilliseconds: null,\n};\n\nconst dashboardResourcesSlice = createSlice({\n  name: 'dashboardResources',\n  initialState,\n\n  reducers: {\n    reset() {\n      return initialState;\n    },\n\n    resourcesFetchRequested(state, _action: ResourcesFetchRequestedAction) {\n      markPending(state);\n      state.isUnsupported = false;\n    },\n\n    resourcesFetchSucceeded(state, { payload }: ResourcesFetchSucceededAction) {\n      markPopulated(state);\n      state.statistics = payload.data;\n\n      state.requestTimestampMilliseconds = payload.requestTimestampMilliseconds;\n    },\n\n    resourcesFetchFailed(state, { payload }: ResourcesFetchFailedAction) {\n      markFailed(state, payload.error);\n      state.isUnsupported = payload.error.status === 404;\n    },\n  },\n});\n\nexport default dashboardResourcesSlice;\n","import { createSlice } from '@reduxjs/toolkit';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\nimport {\n  TopPlayedFetchFailedAction,\n  TopPlayedFetchRequestedAction,\n  TopPlayedFetchSucceededAction,\n  TopPlayedState,\n} from './dashboardTopPlayedTypes';\n\nconst initialState: TopPlayedState = {\n  moviesStatistics: [],\n  tvStatistics: [],\n  musicStatistics: [],\n  gameStatistics: [],\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nconst dashboardTopPlayedSlice = createSlice({\n  name: 'dashboardTopPlayed',\n  initialState,\n\n  reducers: {\n    reset() {\n      return initialState;\n    },\n\n    topPlayedFetchRequested(state, _action: TopPlayedFetchRequestedAction) {\n      markPending(state);\n    },\n\n    topPlayedFetchSucceeded(state, { payload }: TopPlayedFetchSucceededAction) {\n      markPopulated(state);\n      state.moviesStatistics = payload.data.moviesStatistics;\n      state.tvStatistics = payload.data.tvStatistics;\n      state.musicStatistics = payload.data.musicStatistics;\n      state.gameStatistics = payload.data.gameStatistics;\n    },\n\n    topPlayedFetchFailed(state, { payload }: TopPlayedFetchFailedAction) {\n      markFailed(state, payload.error);\n    },\n  },\n});\n\nexport default dashboardTopPlayedSlice;\n","import { createSlice } from '@reduxjs/toolkit';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\nimport {\n  TopUsersFetchFailedAction,\n  TopUsersFetchRequestedAction,\n  TopUsersFetchSucceededAction,\n  TopUsersState,\n} from './dashboardTopUsersTypes';\n\nconst initialState: TopUsersState = {\n  statistics: [],\n  accounts: [],\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nconst dashboardTopUsersSlice = createSlice({\n  name: 'dashboardTopUsers',\n  initialState,\n\n  reducers: {\n    reset() {\n      return initialState;\n    },\n\n    topUsersFetchRequested(state, _action: TopUsersFetchRequestedAction) {\n      markPending(state);\n    },\n\n    topUsersFetchSucceeded(state, { payload }: TopUsersFetchSucceededAction) {\n      markPopulated(state);\n      state.statistics = payload.data.statistics;\n      state.accounts = payload.data.accounts;\n    },\n\n    topUsersFetchFailed(state, { payload }: TopUsersFetchFailedAction) {\n      markFailed(state, payload.error);\n    },\n  },\n});\n\nexport default dashboardTopUsersSlice;\n","import { PayloadAction } from '@reduxjs/toolkit';\nimport { Server } from 'app/js/v4/core/servers/serversTypes';\nimport { MediaSetting } from 'app/js/v4/core/settings/settingsTypes';\nimport { PlainError } from 'app/js/v4/utils/data/api';\nimport { AsyncState } from 'app/js/v4/utils/data/asyncStateMarkers';\n\nexport interface DVRSettingsUI {\n  isDvrsPending: boolean;\n  isDvrsPopulated: boolean;\n  isUIPopulated: boolean;\n  dvrsError?: PlainError;\n  dvrs: DVR[];\n}\n\nexport interface DVRManagementState {\n  dvrSetup: DVRSetupState;\n  epgSettings: EPGSettingsState;\n}\n\nexport interface DevicesState extends AsyncState {\n  mediaGrabberDevices: MediaGrabberDevice[];\n}\n\nexport interface SelectedDVRState extends AsyncState {\n  dvr?: DVR;\n}\n\nexport interface DVRSetupState {\n  devices: DevicesState;\n  epgDownloadActivityID?: string;\n  selectedDevice?: MediaGrabberDevice;\n  selectedDVR: SelectedDVRState;\n  channelsByDeviceKey: {\n    [deviceKey: string]: DeviceChannelsState;\n  };\n  scanPrefs: MediaSetting[];\n  scanNetworks: DVRNetwork[];\n  hasScannedChannels: boolean;\n  isSavingDVR: boolean;\n  isDeletingDVR: boolean;\n  isAddingDevice: boolean;\n  isDiscoveringDevices: boolean;\n  isSavingChannelMappings: boolean;\n  isCancellingChannelScan: boolean;\n  isCancellingReloadGuide: boolean;\n  channelMappingsSaveError: PlainError | null;\n  setupErrorMessage: string | null;\n}\n\nexport interface LineupChannelsState extends AsyncState {\n  channelsByLineupUUID: {\n    [lineupUUID: string]: LineupChannel[];\n  };\n}\n\nexport interface LineupGroupsState extends AsyncState {\n  epgLineupGroups: EPGLineupGroup[];\n}\n\nexport interface ChannelMappingsState extends AsyncState {\n  mappings: ChannelMapping[];\n}\n\nexport interface EPGSettingsState {\n  channelMappings: ChannelMappingsState;\n\n  lineupChannels: LineupChannelsState;\n\n  countries: AsyncState & {\n    epgCountries: EPGCountry[];\n  };\n\n  languages: AsyncState & {\n    epgLanguages: EPGLanguage[];\n  };\n\n  regions: AsyncState & {\n    epgCountryRegions: EPGCountryRegion[];\n  };\n\n  lineupGroups: LineupGroupsState;\n\n  selectedCountry: EPGCountry | undefined;\n  selectedLanguage: EPGLanguage | undefined;\n  selectedRegion: EPGCountryRegion | undefined;\n  selectedLineupGroups: SelectedEPGLineupGroup[];\n  postalCode: string | undefined;\n}\n\n//\n// Selected Countries\n\nexport enum EPGCountryFlavor {\n  Regions = 0,\n  PostalCode = 1,\n  SinglePostalCode = 2,\n}\n\nexport interface EPGCountry {\n  key: string;\n  type: string;\n  title: string;\n  code: string;\n  example: string;\n  flavor: EPGCountryFlavor;\n  language: string;\n  languageTitle: string;\n}\n\nexport type EPGCountriesFetchRequestedAction = PayloadAction<{\n  server: Server;\n}>;\n\nexport type EPGCountriesFetchSucceededAction = PayloadAction<{\n  server: Server;\n  data: EPGCountry[];\n}>;\n\nexport type EPGCountriesFetchFailedAction = PayloadAction<{\n  error: PlainError;\n}>;\n\nexport type EPGCountrySelectedAction = PayloadAction<{\n  countryCode: EPGCountry['code'];\n}>;\n\nexport type EPGCountryRegionSelectedAction = PayloadAction<{\n  regionKey: EPGCountryRegion['key'];\n}>;\n\n//\n// Country Regions\n\nexport interface EPGCountryRegion {\n  key: string;\n  type: string;\n  title: string;\n}\n\nexport type EPGCountryRegionsFetchRequestedAction = PayloadAction<{\n  server: Server;\n  country: EPGCountry;\n}>;\n\nexport type EPGCountryRegionsFetchSucceededAction = PayloadAction<{\n  data: EPGCountryRegion[];\n}>;\n\nexport type EPGCountryRegionsFetchFailedAction = PayloadAction<{\n  error: PlainError;\n}>;\n\n//\n// DVRs\n\nexport interface DVR {\n  key: string;\n  epgIdentifier: string;\n  country: string;\n  language: string;\n  lineup: string;\n  lineupTitle: string;\n  uuid: string;\n  isSaving: boolean;\n  saveError: PlainError;\n  Device?: MediaGrabberDevice[];\n  // TODO: Properly type device settings when relevant UI is migrated to v4.\n  Setting?: any[];\n  Lineup?: DVRLineup[];\n}\n\nexport interface DVRLineup {\n  id: string;\n  title: string;\n}\n\nexport interface DVRResponse {\n  key: number;\n  epgIdentifier: string;\n  country: string;\n  language: string;\n  lineup: string;\n  lineupTitle: string;\n  Device?: MediaGrabberDeviceResponse[];\n}\n\nexport type DVRFetchRequestedAction = PayloadAction<{\n  server: Server;\n  dvrID?: DVR['key'];\n}>;\n\nexport type DVRFetchSucceededAction = PayloadAction<{\n  dvr?: DVR;\n}>;\n\nexport type DVRFetchFailedAction = PayloadAction<{\n  error: PlainError;\n}>;\n\nexport type DVRSaveRequestedAction = PayloadAction<{\n  server: Server;\n  device: MediaGrabberDevice;\n  channelMappings: ChannelMappingFormData[];\n}>;\n\nexport type DVRSaveSucceededAction = PayloadAction<{\n  activityUUID: string;\n  dvr?: DVR;\n}>;\n\nexport type DVRSaveFailedAction = PayloadAction<{\n  error: PlainError;\n}>;\n\nexport type DVRDeleteRequestedAction = PayloadAction<{\n  server: Server;\n  dvrID: DVR['key'];\n}>;\n\nexport type DVRDeleteSucceededAction = PayloadAction;\n\nexport type DVRDeleteFailedAction = PayloadAction;\n\nexport type AddDVRDeviceRequestedAction = PayloadAction<{\n  server: Server;\n  dvrID: DVR['key'];\n  deviceKey: MediaGrabberDevice['key'];\n  channelMappings: ChannelMappingFormData[];\n}>;\n\nexport type AddDVRDeviceSucceededAction = PayloadAction<{\n  activityUUID: string;\n  dvr?: DVR;\n}>;\n\nexport type AddDVRDeviceFailedAction = PayloadAction<{\n  error: PlainError;\n}>;\n\nexport type RemoveDVRDeviceRequestedAction = PayloadAction<{\n  server: Server;\n  dvrID: DVR['key'];\n  deviceKey: MediaGrabberDevice['key'];\n}>;\n\nexport type RemoveDVRDeviceSucceededAction = PayloadAction<{\n  deviceKey: MediaGrabberDevice['key'];\n}>;\n\nexport type RemoveDVRDeviceFailedAction = PayloadAction;\n\n//\n// Devices\n\nexport interface MediaGrabberDevice {\n  key: string;\n  uuid: string;\n  parentID?: number;\n  uri: string;\n  protocol: string;\n  status: MediaGrabberDeviceStatus;\n  state: MediaGrabberDeviceState;\n  lastSeenAt: number;\n  make: string;\n  model: string;\n  modelNumber: string;\n  source: MediaGrabberDeviceSourceType;\n  sources?: MediaGrabberDeviceSourceType[];\n  tuners: number;\n  thumb?: string;\n  title?: string;\n  unsupported?: boolean;\n  ChannelMapping?: ChannelMapping[];\n  // TODO: Properly type device settings when relevant UI is migrated to v4.\n  Setting?: any[];\n}\n\nexport interface MediaGrabberDeviceResponse {\n  key: number;\n  uuid: string;\n  parentID?: number;\n  uri: string;\n  protocol: string;\n  status: MediaGrabberDeviceStatus;\n  state: MediaGrabberDeviceState;\n  lastSeenAt: number;\n  make: string;\n  model: string;\n  modelNumber: string;\n  source: MediaGrabberDeviceSourceType;\n  sources: string;\n  tuners: number;\n  thumb?: string;\n  title?: string;\n  unsupported?: boolean;\n  ChannelMapping?: ChannelMapping[];\n}\n\nexport enum MediaGrabberDeviceStatus {\n  Dead = 'dead',\n  Alive = 'alive',\n}\n\nexport enum MediaGrabberDeviceState {\n  Disabled = 'disabled',\n  Enabled = 'enabled',\n}\n\nexport enum MediaGrabberDeviceSourceType {\n  Unknown = '-1',\n  Antenna = '0',\n  Cable = '1',\n  Satellite = '2',\n}\n\nexport type DevicesFetchRequestedAction = PayloadAction<{\n  server: Server;\n}>;\n\nexport type DevicesFetchSucceededAction = PayloadAction<{\n  server: Server;\n  data: MediaGrabberDevice[];\n}>;\n\nexport type DevicesFetchFailedAction = PayloadAction<{\n  server: Server;\n  error: PlainError;\n}>;\n\nexport type DevicesDiscoverRequestedAction = PayloadAction<{\n  server: Server;\n}>;\n\nexport type DevicesDiscoverSucceededAction = PayloadAction<{\n  server: Server;\n  data: MediaGrabberDevice[];\n}>;\n\nexport type DevicesDiscoverFailedAction = PayloadAction<{\n  server: Server;\n  error: PlainError;\n}>;\n\nexport type DeviceSelectedAction = PayloadAction<{\n  deviceKey: MediaGrabberDevice['key'];\n}>;\n\nexport type DeviceSourceSelectedAction = PayloadAction<{\n  deviceKey: MediaGrabberDevice['key'];\n  source: MediaGrabberDevice['source'];\n}>;\n\nexport type DeviceEnableRequestedAction = PayloadAction<{\n  server: Server;\n  deviceKey: MediaGrabberDevice['key'];\n  enabled: boolean;\n  title?: string;\n}>;\n\nexport type DeviceEnableSucceededAction = PayloadAction<{\n  deviceKey: MediaGrabberDevice['key'];\n  enabled: boolean;\n  title?: string;\n}>;\n\nexport type DeviceEnableFailedAction = PayloadAction;\n\nexport type DeviceAddRequestedAction = PayloadAction<{\n  server: Server;\n  uri: string;\n}>;\n\nexport type DeviceAddSucceededAction = PayloadAction<{\n  server: Server;\n  data: MediaGrabberDevice;\n}>;\n\nexport type DeviceAddFailedAction = PayloadAction<{\n  server: Server;\n  error: PlainError;\n}>;\n\n//\n// Channels\n\nexport interface DeviceChannelsState extends AsyncState {\n  channels: DeviceChannel[];\n}\n\nexport interface DeviceChannel {\n  key: string;\n  identifier: string;\n  name: string;\n  signalStrength?: number;\n  signalQuality?: number;\n  drm?: boolean;\n  hd?: boolean;\n}\n\nexport interface LineupChannel {\n  key: string;\n  identifier: string;\n  title: string;\n  thumb: string;\n  callSign: string;\n  language: string;\n  hd?: boolean;\n  lineupUUID?: string;\n}\n\nexport type DeviceChannelsFetchRequestedAction = PayloadAction<{\n  server: Server;\n  deviceKey: MediaGrabberDevice['key'];\n}>;\n\nexport type DeviceChannelsFetchSucceededAction = PayloadAction<{\n  server: Server;\n  deviceKey: MediaGrabberDevice['key'];\n  data: DeviceChannel[];\n}>;\n\nexport type DeviceChannelsFetchFailedAction = PayloadAction<{\n  deviceKey: MediaGrabberDevice['key'];\n  error: PlainError;\n}>;\n\nexport type DeviceChannelsScanRequestedAction = PayloadAction<{\n  server: Server;\n  deviceKey: MediaGrabberDevice['key'];\n  source: MediaGrabberDeviceSourceType;\n  prefs?: Record<string, MediaSetting['value']>;\n  network?: DVRNetwork;\n  country?: string;\n}>;\n\nexport type DeviceChannelsScanFailedAction = PayloadAction;\n\nexport type DeviceChannelsCancelScanRequestedAction = PayloadAction<{\n  server: Server;\n  deviceKey: MediaGrabberDevice['key'];\n}>;\n\nexport type DeviceChannelsCancelScanFailedAction = PayloadAction;\n\nexport type SelectedDVRLineupChannelsFetchRequestedAction = PayloadAction<{\n  server: Server;\n}>;\n\nexport type SelectedDVRLineupChannelsFetchSucceededAction = PayloadAction<{\n  lineupChannels: EPGLineup[];\n}>;\n\nexport type SelectedDVRLineupChannelsFetchFailedAction = PayloadAction<{\n  error: PlainError;\n}>;\n\nexport interface LineupChannelSelectOption {\n  value: string;\n  label: string;\n}\n\n//\n// Channel Mapping\n\nexport interface SelectedChannelMapping {\n  key: string;\n  name: string;\n  deviceIdentifier: string;\n  channelKey?: string;\n  lineupIdentifier?: string;\n  signalStrength?: number;\n  signalQuality?: number;\n  enabled: boolean;\n  drm: boolean;\n  isChannelMissing: boolean;\n  isDeviceChannelHD: boolean;\n  isLineupChannelHD: boolean;\n}\n\nexport interface ChannelMapping {\n  deviceIdentifier: string;\n  lineupIdentifier?: string;\n  channelKey?: string;\n  enabled: boolean;\n}\n\nexport interface ChannelMappingFormData {\n  key: string;\n  lineupIdentifier?: string;\n  channelKey?: string;\n  enabled: boolean;\n}\n\nexport type ChannelMappingsFetchRequestedAction = PayloadAction<{\n  server: Server;\n  device: MediaGrabberDevice;\n  lineups: EPGLineup[];\n}>;\n\nexport type ChannelMappingsFetchSucceededAction = PayloadAction<{\n  channelMappings: ChannelMapping[];\n  lineupChannels: EPGLineup[];\n}>;\n\nexport type ChannelMappingsFetchFailedAction = PayloadAction<{\n  error: PlainError;\n}>;\n\nexport type ChannelMappingChangedAction = PayloadAction<{\n  index: number;\n  enabled?: ChannelMapping['enabled'];\n  channelKey?: ChannelMapping['channelKey'];\n  lineupIdentifier?: ChannelMapping['lineupIdentifier'];\n}>;\n\nexport type DeviceChannelMappingsSaveRequestedAction = PayloadAction<{\n  server: Server;\n  deviceKey: MediaGrabberDevice['key'];\n  mappings: ChannelMappingFormData[];\n}>;\n\nexport type DeviceChannelMappingsSaveSucceededAction = PayloadAction;\n\nexport type DeviceChannelMappingsSaveFailedAction = PayloadAction<{\n  error: PlainError;\n}>;\n\n//\n// Languages\n\nexport interface EPGLanguage {\n  code: string;\n  title: string;\n}\n\nexport type EPGLanguagesFetchRequestedAction = PayloadAction<{\n  server: Server;\n}>;\n\nexport type EPGLanguagesFetchSucceededAction = PayloadAction<{\n  data: EPGLanguage[];\n}>;\n\nexport type EPGLanguagesFetchFailedAction = PayloadAction<{\n  error: PlainError;\n}>;\n\nexport type EPGLanguageSelectedAction = PayloadAction<{\n  languageCode: EPGLanguage['code'];\n}>;\n\n//\n// Lineups\n\nexport enum EPGLineupType {\n  Unknown = -1,\n  OverTheAir = 0,\n  Cable = 1,\n  Satellite = 2,\n  IPTV = 3,\n  Virtual = 4,\n}\n\nexport interface EPGLineup {\n  uuid: string;\n  type?: string;\n  title: string;\n  lineupType: EPGLineupType;\n  location?: string;\n  Channel?: LineupChannel[];\n}\n\nexport type BestEPGLineupSearchRequestedAction = PayloadAction<{\n  server: Server;\n  device: MediaGrabberDevice;\n  lineupGroup: SelectedEPGLineupGroup;\n}>;\n\nexport type BestEPGLineupSearchSucceededAction = PayloadAction<{\n  lineupGroup: SelectedEPGLineupGroup;\n  data: SelectedEPGLineupGroup['activityUUID'];\n}>;\n\nexport type BestEPGLineupSearchFailedAction = PayloadAction<{\n  error: PlainError;\n}>;\n\nexport interface EPGLineupGroup {\n  uuid: string;\n  epgLineups: EPGLineup[];\n}\n\nexport interface SelectedEPGLineupGroup extends EPGLineupGroup {\n  activityUUID: string | undefined;\n  selectedLineup: EPGLineup | undefined;\n  isSelectedLineupPending: boolean;\n  isSelectedLineupPopulated: boolean;\n  isChannelMappingsFetched: boolean;\n}\n\nexport type EPGLineupGroupResponse = Omit<\n  EPGLineupGroup,\n  'activityUUID' | 'selectedLineup'\n>;\n\nexport type EPGLineupGroupFetchRequestedAction = PayloadAction<{\n  server: Server;\n  country: EPGCountry;\n  region?: EPGCountryRegion;\n  postalCode?: EPGSettingsState['postalCode'];\n}>;\n\nexport type EPGLineupGroupFetchSucceededAction = PayloadAction<{\n  data: EPGLineupGroupResponse;\n}>;\n\nexport type EPGLineupGroupFetchFailedAction = PayloadAction<{\n  error: PlainError;\n}>;\n\nexport type SelectedEPGLineupGroupAddRequestedAction = PayloadAction<{\n  lineupGroup: EPGLineupGroup;\n}>;\n\nexport type SelectedEPGLineupGroupAddSucceededAction = PayloadAction<{\n  lineupGroup: EPGLineupGroup;\n}>;\n\nexport type SelectedEPGLineupGroupRemovedAction = PayloadAction<{\n  lineupGroupUUID: EPGLineupGroup['uuid'];\n}>;\n\nexport type SelectedLineupSelectedAction = PayloadAction<{\n  lineupGroupUUID: SelectedEPGLineupGroup['uuid'];\n  selectedLineupUUID: EPGLineup['uuid'];\n}>;\n\nexport type XMLTVSelectedEPGLineupGroupAddedAction = PayloadAction<{\n  path: string;\n  title: string;\n}>;\n\n//\n// Postal Code\n\nexport type EPGPostalCodeChangedAction = PayloadAction<{\n  postalCode: EPGSettingsState['postalCode'];\n}>;\n\n//\n// Errors\n\nexport type DVRSetupErrorAddedAction = PayloadAction<{\n  message: string;\n}>;\n\nexport type DVRSetupErrorRemovedAction = PayloadAction;\n\n//\n// Scan Prefs/Networks\n\nexport interface DVRNetwork {\n  key: string;\n  title: string;\n}\n\nexport type ScanPrefsAddedAction = PayloadAction<{\n  settings: MediaSetting[];\n}>;\n\nexport type ScanNetworksAddedAction = PayloadAction<{\n  networks: DVRNetwork[];\n}>;\n","import { createSlice } from '@reduxjs/toolkit';\nimport t from 'app/js/utils/t';\nimport serverActivitiesSlice from 'app/js/v4/core/serverActivities/serverActivitiesSlice';\nimport {\n  ServerActivityAction,\n  ServerActivityType,\n} from 'app/js/v4/core/serverActivities/serverActivitiesTypes';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\nimport {\n  AddDVRDeviceFailedAction,\n  AddDVRDeviceRequestedAction,\n  AddDVRDeviceSucceededAction,\n  DeviceAddFailedAction,\n  DeviceAddRequestedAction,\n  DeviceAddSucceededAction,\n  DeviceChannelMappingsSaveFailedAction,\n  DeviceChannelMappingsSaveRequestedAction,\n  DeviceChannelMappingsSaveSucceededAction,\n  DeviceChannelsCancelScanFailedAction,\n  DeviceChannelsCancelScanRequestedAction,\n  DeviceChannelsFetchFailedAction,\n  DeviceChannelsFetchRequestedAction,\n  DeviceChannelsFetchSucceededAction,\n  DeviceChannelsScanFailedAction,\n  DeviceChannelsScanRequestedAction,\n  DeviceChannelsState,\n  DeviceEnableFailedAction,\n  DeviceEnableRequestedAction,\n  DeviceEnableSucceededAction,\n  DevicesDiscoverFailedAction,\n  DevicesDiscoverRequestedAction,\n  DevicesDiscoverSucceededAction,\n  DeviceSelectedAction,\n  DevicesFetchFailedAction,\n  DevicesFetchRequestedAction,\n  DevicesFetchSucceededAction,\n  DeviceSourceSelectedAction,\n  DevicesState,\n  DVRDeleteFailedAction,\n  DVRDeleteRequestedAction,\n  DVRDeleteSucceededAction,\n  DVRFetchFailedAction,\n  DVRFetchRequestedAction,\n  DVRFetchSucceededAction,\n  DVRSaveFailedAction,\n  DVRSaveRequestedAction,\n  DVRSaveSucceededAction,\n  DVRSetupErrorAddedAction,\n  DVRSetupErrorRemovedAction,\n  DVRSetupState,\n  MediaGrabberDeviceState,\n  RemoveDVRDeviceFailedAction,\n  RemoveDVRDeviceRequestedAction,\n  RemoveDVRDeviceSucceededAction,\n  ScanNetworksAddedAction,\n  ScanPrefsAddedAction,\n  SelectedDVRState,\n} from './dvrManagementTypes';\n\nexport const initialDeviceChannelsState: DeviceChannelsState = {\n  channels: [],\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nconst initialSelectedDVRState: SelectedDVRState = {\n  dvr: undefined,\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nconst initialDevicesState: DevicesState = {\n  mediaGrabberDevices: [],\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nexport const initialState: DVRSetupState = {\n  devices: initialDevicesState,\n  epgDownloadActivityID: undefined,\n  selectedDevice: undefined,\n  selectedDVR: initialSelectedDVRState,\n  channelsByDeviceKey: {},\n  scanPrefs: [],\n  scanNetworks: [],\n  hasScannedChannels: false,\n  isSavingDVR: false,\n  isDeletingDVR: false,\n  isAddingDevice: false,\n  isDiscoveringDevices: false,\n  isSavingChannelMappings: false,\n  isCancellingChannelScan: false,\n  isCancellingReloadGuide: false,\n  channelMappingsSaveError: null,\n  setupErrorMessage: null,\n};\n\nfunction channelScanActivityReducer(\n  state: DVRSetupState,\n  { payload }: ServerActivityAction\n): void {\n  const { activity } = payload;\n\n  if (activity.type !== ServerActivityType.ProviderDeviceChannelScan) {\n    return;\n  }\n\n  // A network provides additional information to the scanner.\n  // If we receive `Network` on the response store it so an option can be\n  // presented to the user.\n  const networks = activity?.Response?.Network;\n\n  if (networks) {\n    state.hasScannedChannels = false;\n    state.scanNetworks = networks;\n  } else {\n    const isFinished = activity?.progress === 100;\n\n    state.hasScannedChannels = isFinished;\n\n    if (state.isCancellingChannelScan && isFinished) {\n      state.isCancellingChannelScan = false;\n    }\n  }\n}\n\nconst dvrSetupSlice = createSlice({\n  name: 'dvrSetup',\n\n  initialState,\n\n  reducers: {\n    reset() {\n      return initialState;\n    },\n\n    setupReset(state) {\n      // Selectively reset state to avoid unnecessary data fetching.\n      state.devices = initialDevicesState;\n      state.selectedDevice = undefined;\n      state.hasScannedChannels = false;\n      state.isSavingDVR = false;\n      state.isAddingDevice = false;\n      state.isDiscoveringDevices = false;\n      state.isSavingChannelMappings = false;\n      state.channelMappingsSaveError = null;\n      state.setupErrorMessage = null;\n    },\n\n    setupErrorMessageAdded(state, { payload }: DVRSetupErrorAddedAction) {\n      state.setupErrorMessage = payload.message;\n    },\n\n    setupErrorMessageRemoved(state, _action: DVRSetupErrorRemovedAction) {\n      state.setupErrorMessage = null;\n    },\n\n    devicesDiscoverRequested(state, _action: DevicesDiscoverRequestedAction) {\n      state.isDiscoveringDevices = true;\n    },\n\n    devicesDiscoverSucceeded(\n      state,\n      { payload }: DevicesDiscoverSucceededAction\n    ) {\n      state.isDiscoveringDevices = false;\n\n      const { mediaGrabberDevices } = state.devices;\n\n      for (let index = 0; index < payload.data.length; index++) {\n        const device = payload.data[index];\n        const existingDevice = mediaGrabberDevices.find(\n          (mediaGrabberDevice) => device.uuid === mediaGrabberDevice.uuid\n        );\n\n        if (existingDevice) {\n          // Keep most attributes from existing device in state. Doing so\n          // prevents losing changes made by user in the device step.\n          existingDevice.state = device.state;\n          existingDevice.status = device.status;\n          existingDevice.parentID = device.parentID;\n        } else {\n          mediaGrabberDevices.push(device);\n        }\n      }\n    },\n\n    devicesDiscoverFailed(state, _action: DevicesDiscoverFailedAction) {\n      state.isDiscoveringDevices = false;\n    },\n\n    devicesFetchRequested({ devices }, _action: DevicesFetchRequestedAction) {\n      markPending(devices);\n    },\n\n    devicesFetchSucceeded(\n      { devices },\n      { payload }: DevicesFetchSucceededAction\n    ) {\n      markPopulated(devices);\n      devices.mediaGrabberDevices = payload.data;\n    },\n\n    devicesFetchFailed({ devices }, { payload }: DevicesFetchFailedAction) {\n      markFailed(devices, payload.error);\n    },\n\n    deviceChannelsFetchRequested(\n      state,\n      { payload }: DeviceChannelsFetchRequestedAction\n    ) {\n      let deviceChannels = state.channelsByDeviceKey[payload.deviceKey];\n\n      if (!deviceChannels) {\n        deviceChannels = { ...initialDeviceChannelsState };\n        state.channelsByDeviceKey[payload.deviceKey] = deviceChannels;\n      } else {\n        deviceChannels.channels = [];\n        deviceChannels.isPopulated = false;\n      }\n\n      state.setupErrorMessage = null;\n      markPending(deviceChannels);\n    },\n\n    deviceChannelsFetchSucceeded(\n      state,\n      { payload }: DeviceChannelsFetchSucceededAction\n    ) {\n      const deviceChannels = state.channelsByDeviceKey[payload.deviceKey];\n\n      markPopulated(deviceChannels);\n      deviceChannels.channels = payload.data;\n    },\n\n    deviceChannelsFetchFailed(\n      state,\n      { payload }: DeviceChannelsFetchFailedAction\n    ) {\n      let deviceChannels = state.channelsByDeviceKey[payload.deviceKey];\n\n      if (!deviceChannels) {\n        deviceChannels = { ...initialDeviceChannelsState };\n        state.channelsByDeviceKey[payload.deviceKey] = deviceChannels;\n      }\n\n      markFailed(deviceChannels, payload.error);\n    },\n\n    deviceChannelsScanRequested(\n      state,\n      _action: DeviceChannelsScanRequestedAction\n    ) {\n      state.hasScannedChannels = false;\n    },\n\n    deviceChannelsScanFailed(state, _action: DeviceChannelsScanFailedAction) {\n      state.hasScannedChannels = true;\n    },\n\n    deviceChannelsCancelScanRequested(\n      state,\n      _action: DeviceChannelsCancelScanRequestedAction\n    ) {\n      state.isCancellingChannelScan = true;\n    },\n\n    deviceChannelsCancelScanFailed(\n      state,\n      _action: DeviceChannelsCancelScanFailedAction\n    ) {\n      state.isCancellingChannelScan = false;\n    },\n\n    deviceSelected(state, { payload }: DeviceSelectedAction) {\n      const mediaGrabberDevice = state.devices.mediaGrabberDevices.find(\n        (device) => device.key === payload.deviceKey\n      );\n\n      if (mediaGrabberDevice) {\n        state.selectedDevice = mediaGrabberDevice;\n      }\n    },\n\n    deviceSourceSelected({ devices }, { payload }: DeviceSourceSelectedAction) {\n      const mediaGrabberDevice = devices.mediaGrabberDevices.find(\n        (device) => device.key === payload.deviceKey\n      );\n\n      if (mediaGrabberDevice) {\n        mediaGrabberDevice.source = payload.source;\n      }\n    },\n\n    deviceChannelMappingsSaveRequested(\n      state,\n      _action: DeviceChannelMappingsSaveRequestedAction\n    ) {\n      state.isSavingChannelMappings = true;\n      state.channelMappingsSaveError = null;\n    },\n\n    deviceChannelMappingsSaveSucceeded(\n      state,\n      _action: DeviceChannelMappingsSaveSucceededAction\n    ) {\n      state.isSavingChannelMappings = false;\n      state.channelMappingsSaveError = null;\n    },\n\n    deviceChannelMappingsSaveFailed(\n      state,\n      { payload }: DeviceChannelMappingsSaveFailedAction\n    ) {\n      state.isSavingChannelMappings = false;\n      state.channelMappingsSaveError = payload.error;\n    },\n\n    deviceEnableRequested(_state, _action: DeviceEnableRequestedAction) {\n      // Handled by saga, no state change.\n    },\n\n    deviceEnableSucceeded(state, { payload }: DeviceEnableSucceededAction) {\n      const mediaGrabberDevice = state.devices.mediaGrabberDevices.find(\n        (device) => device.key === payload.deviceKey\n      );\n\n      if (mediaGrabberDevice) {\n        mediaGrabberDevice.state = payload.enabled\n          ? MediaGrabberDeviceState.Enabled\n          : MediaGrabberDeviceState.Disabled;\n        mediaGrabberDevice.title = payload.title;\n      }\n    },\n\n    deviceEnableFailed(_state, _action: DeviceEnableFailedAction) {\n      // Handled by saga, no state change.\n    },\n\n    deviceAddRequested(state, _action: DeviceAddRequestedAction) {\n      state.isAddingDevice = true;\n    },\n\n    deviceAddSucceeded(state, { payload }: DeviceAddSucceededAction) {\n      state.setupErrorMessage = null;\n      state.isAddingDevice = false;\n\n      const mediaGrabberDevice = state.devices.mediaGrabberDevices.find(\n        (device) => device.key === payload.data.key\n      );\n\n      if (!mediaGrabberDevice) {\n        state.devices.mediaGrabberDevices.push(payload.data);\n      } else {\n        Object.assign(mediaGrabberDevice, payload.data);\n      }\n    },\n\n    deviceAddFailed(state, _action: DeviceAddFailedAction) {\n      state.isAddingDevice = false;\n    },\n\n    //\n    // DVR\n\n    dvrFetchRequested(state, _action: DVRFetchRequestedAction) {\n      state.setupErrorMessage = null;\n      markPending(state.selectedDVR);\n    },\n\n    dvrFetchSucceeded(\n      { selectedDVR, devices },\n      { payload }: DVRFetchSucceededAction\n    ) {\n      const { dvr } = payload;\n      markPopulated(selectedDVR);\n      selectedDVR.dvr = dvr;\n\n      if (dvr?.Device) {\n        markPopulated(devices);\n        devices.mediaGrabberDevices = dvr.Device;\n      }\n    },\n\n    dvrFetchFailed(state, { payload }: DVRFetchFailedAction) {\n      markFailed(state.selectedDVR, payload.error);\n      state.setupErrorMessage = t(\n        'There was a problem fetching your DVR. Please try again later.'\n      );\n    },\n\n    dvrSaveRequested(state, _action: DVRSaveRequestedAction) {\n      state.setupErrorMessage = null;\n      state.isSavingDVR = true;\n    },\n\n    dvrSaveSucceeded(state, { payload }: DVRSaveSucceededAction) {\n      markPopulated(state.selectedDVR);\n      state.epgDownloadActivityID = payload.activityUUID;\n      state.isSavingDVR = false;\n      state.selectedDVR.dvr = payload.dvr;\n    },\n\n    dvrSaveFailed(state, { payload }: DVRSaveFailedAction) {\n      markFailed(state.selectedDVR, payload.error);\n      state.isSavingDVR = false;\n    },\n\n    dvrDeleteRequested(state, _action: DVRDeleteRequestedAction) {\n      state.isDeletingDVR = true;\n    },\n\n    dvrDeleteSucceeded(state, _action: DVRDeleteSucceededAction) {\n      state.selectedDVR = initialSelectedDVRState;\n      state.isDeletingDVR = false;\n    },\n\n    dvrDeleteFailed(state, _action: DVRDeleteFailedAction) {\n      state.isDeletingDVR = false;\n    },\n\n    addDVRDeviceRequested(state, _action: AddDVRDeviceRequestedAction) {\n      state.setupErrorMessage = null;\n      state.isSavingDVR = true;\n    },\n\n    addDVRDeviceSucceeded(state, { payload }: AddDVRDeviceSucceededAction) {\n      markPopulated(state.selectedDVR);\n      state.epgDownloadActivityID = payload.activityUUID;\n      state.isSavingDVR = false;\n      state.selectedDVR.dvr = payload.dvr;\n    },\n\n    addDVRDeviceFailed(state, { payload }: AddDVRDeviceFailedAction) {\n      markFailed(state.selectedDVR, payload.error);\n      state.isSavingDVR = false;\n    },\n\n    removeDVRDeviceRequested(_state, _action: RemoveDVRDeviceRequestedAction) {\n      // Handled by saga, no state change.\n    },\n\n    removeDVRDeviceSucceeded(state, action: RemoveDVRDeviceSucceededAction) {\n      if (state.selectedDVR?.dvr?.Device) {\n        state.selectedDVR.dvr.Device = state.selectedDVR.dvr.Device.filter(\n          (device) => device.key !== action.payload.deviceKey\n        );\n      }\n\n      state.devices.mediaGrabberDevices =\n        state.devices.mediaGrabberDevices.filter(\n          (device) => device.key !== action.payload.deviceKey\n        );\n    },\n\n    removeDVRDeviceFailed(_state, _action: RemoveDVRDeviceFailedAction) {\n      // Handled by saga, no state change.\n    },\n\n    cancelReloadGuide(state) {\n      state.isCancellingReloadGuide = true;\n    },\n\n    scanPrefsAndNetworksReset(state) {\n      state.scanPrefs = [];\n      state.scanNetworks = [];\n    },\n\n    scanPrefsAdded(state, { payload }: ScanPrefsAddedAction) {\n      state.scanPrefs = payload.settings;\n    },\n\n    scanNetworksAdded(state, { payload }: ScanNetworksAddedAction) {\n      state.scanNetworks = payload.networks;\n    },\n  },\n\n  extraReducers: (builder) => {\n    builder\n      .addCase(\n        serverActivitiesSlice.actions.activityStarted,\n        channelScanActivityReducer\n      )\n      .addCase(\n        serverActivitiesSlice.actions.activityUpdated,\n        channelScanActivityReducer\n      )\n      .addCase(\n        serverActivitiesSlice.actions.activityFinished,\n        (state, action) => {\n          if (\n            action.payload.activity.type === ServerActivityType.ProviderEpgLoad\n          ) {\n            state.isCancellingReloadGuide = false;\n            state.epgDownloadActivityID = undefined;\n          } else {\n            channelScanActivityReducer(state, action);\n          }\n        }\n      );\n  },\n});\n\nexport default dvrSetupSlice;\n","import { createSlice } from '@reduxjs/toolkit';\nimport cleanXMLTVPath from 'app/js/utils/cleanXMLTVPath';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport random from 'app/js/utils/string/random';\nimport serverActivitiesSlice from 'app/js/v4/core/serverActivities/serverActivitiesSlice';\nimport { ServerActivityType } from 'app/js/v4/core/serverActivities/serverActivitiesTypes';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\nimport {\n  BestEPGLineupSearchFailedAction,\n  BestEPGLineupSearchRequestedAction,\n  BestEPGLineupSearchSucceededAction,\n  ChannelMappingChangedAction,\n  ChannelMappingsFetchFailedAction,\n  ChannelMappingsFetchRequestedAction,\n  ChannelMappingsFetchSucceededAction,\n  ChannelMappingsState,\n  EPGCountriesFetchFailedAction,\n  EPGCountriesFetchRequestedAction,\n  EPGCountriesFetchSucceededAction,\n  EPGCountryRegionSelectedAction,\n  EPGCountryRegionsFetchFailedAction,\n  EPGCountryRegionsFetchRequestedAction,\n  EPGCountryRegionsFetchSucceededAction,\n  EPGCountrySelectedAction,\n  EPGLanguageSelectedAction,\n  EPGLanguagesFetchFailedAction,\n  EPGLanguagesFetchRequestedAction,\n  EPGLanguagesFetchSucceededAction,\n  EPGLineup,\n  EPGLineupGroupFetchFailedAction,\n  EPGLineupGroupFetchRequestedAction,\n  EPGLineupGroupFetchSucceededAction,\n  EPGLineupType,\n  EPGPostalCodeChangedAction,\n  EPGSettingsState,\n  LineupChannelsState,\n  LineupGroupsState,\n  SelectedDVRLineupChannelsFetchFailedAction,\n  SelectedDVRLineupChannelsFetchRequestedAction,\n  SelectedDVRLineupChannelsFetchSucceededAction,\n  SelectedEPGLineupGroup,\n  SelectedEPGLineupGroupAddRequestedAction,\n  SelectedEPGLineupGroupAddSucceededAction,\n  SelectedEPGLineupGroupRemovedAction,\n  SelectedLineupSelectedAction,\n  XMLTVSelectedEPGLineupGroupAddedAction,\n} from './dvrManagementTypes';\nimport dvrSetupSlice from './dvrSetupSlice';\n\nexport const initialChannelMappingsState: ChannelMappingsState = {\n  mappings: [],\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nconst initialLineupChannelsState: LineupChannelsState = {\n  channelsByLineupUUID: {},\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nconst initialLineupGroupsState: LineupGroupsState = {\n  epgLineupGroups: [],\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nexport const initialState: EPGSettingsState = {\n  channelMappings: initialChannelMappingsState,\n\n  lineupChannels: initialLineupChannelsState,\n\n  countries: {\n    epgCountries: [],\n    isPending: false,\n    isPopulated: false,\n    error: null,\n  },\n\n  languages: {\n    epgLanguages: [],\n    isPending: false,\n    isPopulated: false,\n    error: null,\n  },\n\n  regions: {\n    epgCountryRegions: [],\n    isPending: false,\n    isPopulated: false,\n    error: null,\n  },\n\n  lineupGroups: initialLineupGroupsState,\n\n  selectedCountry: undefined,\n  selectedLanguage: undefined,\n  selectedRegion: undefined,\n  selectedLineupGroups: [],\n  postalCode: '',\n};\n\nconst epgSettingsSlice = createSlice({\n  name: 'epgSettings',\n\n  initialState,\n\n  reducers: {\n    reset() {\n      return initialState;\n    },\n\n    //\n    // Channel Mapping\n\n    channelMappingsFetchRequested(\n      { lineupChannels, channelMappings },\n      _action: ChannelMappingsFetchRequestedAction\n    ) {\n      markPending(lineupChannels);\n      markPending(channelMappings);\n    },\n\n    channelMappingsFetchSucceeded(\n      { channelMappings, lineupChannels, selectedLineupGroups },\n      { payload }: ChannelMappingsFetchSucceededAction\n    ) {\n      channelMappings.mappings = payload.channelMappings;\n      markPopulated(channelMappings);\n\n      payload.lineupChannels.forEach(({ uuid, Channel }) => {\n        lineupChannels.channelsByLineupUUID[uuid] = Channel ?? [];\n      });\n      markPopulated(lineupChannels);\n\n      selectedLineupGroups.forEach((lineupGroup) => {\n        lineupGroup.isChannelMappingsFetched = true;\n      });\n    },\n\n    channelMappingsFetchFailed(\n      { channelMappings, lineupChannels },\n      { payload }: ChannelMappingsFetchFailedAction\n    ) {\n      markFailed(channelMappings, payload.error);\n      markFailed(lineupChannels, payload.error);\n    },\n\n    channelMappingChanged(\n      { channelMappings },\n      { payload }: ChannelMappingChangedAction\n    ) {\n      const { index, ...channelMappingAttributes } = payload;\n\n      const mapping = channelMappings.mappings[index];\n\n      Object.assign(mapping, channelMappingAttributes);\n    },\n\n    //\n    // Lineups\n\n    epgLineupGroupFetchRequested(\n      { lineupGroups },\n      _action: EPGLineupGroupFetchRequestedAction\n    ) {\n      markPending(lineupGroups);\n    },\n\n    epgLineupGroupFetchSucceeded(\n      { lineupGroups },\n      { payload }: EPGLineupGroupFetchSucceededAction\n    ) {\n      markPopulated(lineupGroups);\n\n      lineupGroups.epgLineupGroups.push({\n        uuid: payload.data.uuid,\n        epgLineups: payload.data.epgLineups,\n      });\n    },\n\n    epgLineupGroupFetchFailed(\n      { lineupGroups },\n      { payload }: EPGLineupGroupFetchFailedAction\n    ) {\n      markFailed(lineupGroups, payload.error);\n    },\n\n    bestEPGLineupSearchRequested(\n      _state,\n      _action: BestEPGLineupSearchRequestedAction\n    ) {\n      // Handled by saga, no state change.\n    },\n\n    bestEPGLineupSearchSucceeded(\n      { selectedLineupGroups },\n      { payload }: BestEPGLineupSearchSucceededAction\n    ) {\n      const lineupGroup = selectedLineupGroups.find(\n        (epgLineupGroup) => epgLineupGroup.uuid === payload.lineupGroup.uuid\n      );\n\n      if (lineupGroup) {\n        lineupGroup.activityUUID = payload.data;\n        lineupGroup.isSelectedLineupPending = true;\n      }\n    },\n\n    bestEPGLineupSearchFailed(\n      _state,\n      _action: BestEPGLineupSearchFailedAction\n    ) {\n      // Handled by saga, no state change.\n    },\n\n    selectedLineupSelected(\n      { selectedLineupGroups },\n      { payload }: SelectedLineupSelectedAction\n    ) {\n      const lineupGroup = selectedLineupGroups.find(\n        (epgLineupGroup) => epgLineupGroup.uuid === payload.lineupGroupUUID\n      );\n\n      if (lineupGroup) {\n        const selectedLineup = lineupGroup.epgLineups.find(\n          (epgLineup) => epgLineup.uuid === payload.selectedLineupUUID\n        );\n\n        lineupGroup.selectedLineup = selectedLineup;\n      }\n    },\n\n    selectedEPGLineupGroupAddRequested(\n      _state,\n      _action: SelectedEPGLineupGroupAddRequestedAction\n    ) {\n      // Handled by saga, no state change.\n    },\n\n    selectedEPGLineupGroupAddSucceeded(\n      { selectedLineupGroups },\n      { payload }: SelectedEPGLineupGroupAddSucceededAction\n    ) {\n      selectedLineupGroups.push({\n        ...payload.lineupGroup,\n        activityUUID: undefined,\n        selectedLineup: undefined,\n        isChannelMappingsFetched: false,\n        isSelectedLineupPending: false,\n        isSelectedLineupPopulated: false,\n      });\n    },\n\n    selectedEPGLineupGroupRemoved(\n      state,\n      { payload }: SelectedEPGLineupGroupRemovedAction\n    ) {\n      state.selectedLineupGroups = state.selectedLineupGroups.filter(\n        (epgLineupGroup) => epgLineupGroup.uuid !== payload.lineupGroupUUID\n      );\n    },\n\n    xmltvSelectedEPGLineupGroupAdded(\n      { selectedLineupGroups },\n      { payload }: XMLTVSelectedEPGLineupGroupAddedAction\n    ) {\n      const { path, title } = payload;\n      const cleanPath = cleanXMLTVPath(path);\n      const lineupUUID = `lineup://${\n        providerIdentifiers.XMLTV\n      }/${cleanPath}#${encodeURIComponent(title)}`;\n\n      const syntheticLineup: EPGLineup = {\n        uuid: lineupUUID,\n        title,\n        lineupType: EPGLineupType.Virtual,\n      };\n\n      const syntheticLineupGroup: SelectedEPGLineupGroup = {\n        uuid: `xmltv-${random()}`,\n        epgLineups: [syntheticLineup],\n        activityUUID: undefined,\n        selectedLineup: syntheticLineup,\n        isChannelMappingsFetched: false,\n        isSelectedLineupPending: false,\n        isSelectedLineupPopulated: true,\n      };\n\n      selectedLineupGroups.push(syntheticLineupGroup);\n    },\n\n    selectedDVRLineupChannelsFetchRequested(\n      { lineupChannels },\n      _action: SelectedDVRLineupChannelsFetchRequestedAction\n    ): void {\n      markPending(lineupChannels);\n    },\n\n    selectedDVRLineupChannelsFetchSucceeded(\n      { lineupChannels },\n      { payload }: SelectedDVRLineupChannelsFetchSucceededAction\n    ): void {\n      payload.lineupChannels.forEach(({ uuid, Channel }) => {\n        lineupChannels.channelsByLineupUUID[uuid] = Channel ?? [];\n      });\n      markPopulated(lineupChannels);\n    },\n\n    selectedDVRLineupChannelsFetchFailed(\n      { lineupChannels },\n      { payload }: SelectedDVRLineupChannelsFetchFailedAction\n    ) {\n      markFailed(lineupChannels, payload.error);\n    },\n\n    //\n    // Countries\n\n    epgCountriesFetchRequested(\n      { countries },\n      _action: EPGCountriesFetchRequestedAction\n    ) {\n      markPending(countries);\n    },\n\n    epgCountriesFetchSucceeded(\n      { countries },\n      { payload }: EPGCountriesFetchSucceededAction\n    ) {\n      markPopulated(countries);\n      countries.epgCountries = payload.data;\n    },\n\n    epgCountriesFetchFailed(\n      { countries },\n      { payload }: EPGCountriesFetchFailedAction\n    ) {\n      markFailed(countries, payload.error);\n    },\n\n    epgCountrySelected(state, { payload }: EPGCountrySelectedAction) {\n      const selectedCountry = state.countries.epgCountries.find(\n        (country) => country.code === payload.countryCode\n      );\n\n      state.selectedCountry = selectedCountry;\n      state.selectedRegion = undefined;\n      state.postalCode = undefined;\n    },\n\n    //\n    // Country Regions\n\n    epgCountryRegionSelected(\n      state,\n      { payload }: EPGCountryRegionSelectedAction\n    ) {\n      const selectedRegion = state.regions.epgCountryRegions.find(\n        (region) => region.key === payload.regionKey\n      );\n\n      state.selectedRegion = selectedRegion;\n    },\n\n    epgCountryRegionsFetchRequested(\n      { regions },\n      _action: EPGCountryRegionsFetchRequestedAction\n    ) {\n      markPending(regions);\n    },\n\n    epgCountryRegionsFetchSucceeded(\n      { regions },\n      { payload }: EPGCountryRegionsFetchSucceededAction\n    ) {\n      markPopulated(regions);\n      regions.epgCountryRegions = payload.data;\n    },\n\n    epgCountryRegionsFetchFailed(\n      { regions },\n      { payload }: EPGCountryRegionsFetchFailedAction\n    ) {\n      markFailed(regions, payload.error);\n    },\n\n    //\n    // Languages\n\n    epgLanguagesFetchRequested(\n      { languages },\n      _action: EPGLanguagesFetchRequestedAction\n    ) {\n      markPending(languages);\n    },\n\n    epgLanguagesFetchSucceeded(\n      { languages },\n      { payload }: EPGLanguagesFetchSucceededAction\n    ) {\n      markPopulated(languages);\n      languages.epgLanguages = payload.data;\n    },\n\n    epgLanguagesFetchFailed(\n      { languages },\n      { payload }: EPGLanguagesFetchFailedAction\n    ) {\n      markFailed(languages, payload.error);\n    },\n\n    epgLanguageSelected(state, { payload }: EPGLanguageSelectedAction) {\n      const selectedLanguage = state.languages.epgLanguages.find(\n        (language) => language.code === payload.languageCode\n      );\n\n      state.selectedLanguage = selectedLanguage;\n    },\n\n    //\n    // Postal Code\n\n    epgPostalCodeChanged(state, { payload }: EPGPostalCodeChangedAction) {\n      state.postalCode = payload.postalCode;\n    },\n  },\n\n  extraReducers(builder) {\n    builder\n      .addCase(dvrSetupSlice.actions.setupReset, (state) => {\n        // Selectively reset state to avoid unnecessary data fetching.\n        state.channelMappings = initialChannelMappingsState;\n        state.lineupChannels = initialLineupChannelsState;\n        state.lineupGroups = initialLineupGroupsState;\n        state.selectedRegion = undefined;\n        state.selectedLineupGroups = [];\n        state.postalCode = '';\n      })\n\n      .addCase(\n        serverActivitiesSlice.actions.activityFinished,\n        (state, { payload }) => {\n          const { activity } = payload;\n\n          if (activity.type === ServerActivityType.ProviderEpgLineupScan) {\n            const lineupGroup = state.selectedLineupGroups.find(\n              (epgLineupGroup) => epgLineupGroup.activityUUID === activity.uuid\n            );\n\n            if (lineupGroup) {\n              const selectedLineup = lineupGroup.epgLineups.find(\n                (epgLineup) => epgLineup.uuid === activity.Response.lineup\n              );\n\n              lineupGroup.activityUUID = undefined;\n              lineupGroup.selectedLineup = selectedLineup;\n              lineupGroup.isSelectedLineupPending = false;\n              lineupGroup.isSelectedLineupPopulated = true;\n            }\n          }\n        }\n      );\n  },\n});\n\nexport default epgSettingsSlice;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function cleanXMLTVPath(path: any) {\n  // Convert back slashes to forward slashes so the URI is valid\n  if (/^[a-z]:\\\\|\\\\\\\\/i.test(path)) {\n    path = path.replace(/\\\\/g, '/');\n  }\n\n  // URL encode the individual parts of the path (folders and filenames)\n  if (/^(\\/|[a-z]:\\/)/i.test(path)) {\n    // @ts-expect-error ts-migrate(6133) FIXME: 'match' is declared but its value is never read.\n    path = path.replace(/\\/(.+?)(?=\\/|$)/g, (match: any, part: any) => {\n      return `/${encodeURIComponent(part)}`;\n    });\n  }\n\n  // Trim the leading forward slash, it will be added when building the lineupUUID\n  if (path.charAt(0) === '/') {\n    path = path.substring(1);\n  }\n\n  // Encode if a URL is provided and it's not already encoded\n  if (/^[a-z]+?:\\/\\//i.test(path)) {\n    path = encodeURIComponent(path);\n  }\n\n  return path;\n}\n","import { createSelector, Selector } from 'reselect';\nimport {\n  DeviceChannelsState,\n  MediaGrabberDevice,\n} from 'app/js/v4/features/dvrManagement/dvrManagementTypes';\nimport { initialDeviceChannelsState } from 'app/js/v4/features/dvrManagement/dvrSetupSlice';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\nimport selectDVRSetup from './selectDVRSetup';\n\nconst createDeviceChannelsSelector = (\n  deviceKey?: MediaGrabberDevice['key']\n): Selector<LegacyRootState, DeviceChannelsState> => {\n  return createSelector(selectDVRSetup, (dvrSetup) =>\n    deviceKey\n      ? dvrSetup.channelsByDeviceKey?.[deviceKey] ?? {\n          ...initialDeviceChannelsState,\n        }\n      : { ...initialDeviceChannelsState }\n  );\n};\n\nexport default createDeviceChannelsSelector;\n","import { createSelector, Selector } from 'reselect';\nimport { DVRManagementState } from 'app/js/v4/features/dvrManagement/dvrManagementTypes';\nimport selectFeatures from 'app/js/v4/features/selectFeatures';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\n\nconst selectDVRManagement: Selector<LegacyRootState, DVRManagementState> =\n  createSelector(selectFeatures, (features) => features.dvrManagement);\n\nexport default selectDVRManagement;\n","import { createSelector, Selector } from 'reselect';\nimport { DVRSetupState } from 'app/js/v4/features/dvrManagement/dvrManagementTypes';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\nimport selectDVRManagement from './selectDVRManagement';\n\nconst selectDVRSetup: Selector<LegacyRootState, DVRSetupState> = createSelector(\n  selectDVRManagement,\n  (dvrManagement) => dvrManagement.dvrSetup\n);\n\nexport default selectDVRSetup;\n","import { createSelector, Selector } from 'reselect';\nimport { EPGSettingsState } from 'app/js/v4/features/dvrManagement/dvrManagementTypes';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\nimport selectDVRManagement from './selectDVRManagement';\n\nconst selectEPGSettings: Selector<LegacyRootState, EPGSettingsState> =\n  createSelector(\n    selectDVRManagement,\n    (dvrManagement) => dvrManagement.epgSettings\n  );\n\nexport default selectEPGSettings;\n","import { createSelector, Selector } from 'reselect';\nimport { EPGLineup } from 'app/js/v4/features/dvrManagement/dvrManagementTypes';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\nimport selectEPGSettings from './selectEPGSettings';\n\nconst selectSetupSelectedLineups: Selector<\n  LegacyRootState,\n  EPGLineup[] | undefined\n> = createSelector(selectEPGSettings, ({ selectedLineupGroups }) => {\n  if (selectedLineupGroups.length === 0) {\n    return;\n  }\n\n  return selectedLineupGroups.reduce((acc: EPGLineup[], { selectedLineup }) => {\n    if (selectedLineup) {\n      acc.push(selectedLineup);\n    }\n\n    return acc;\n  }, []);\n});\n\nexport default selectSetupSelectedLineups;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport {\n  HubListState,\n  HubOptions,\n  HubsFetchFailedAction,\n  HubsFetchRequestedAction,\n  HubsFetchSucceededAction,\n  LibraryManagementState,\n  PromoteChangedAction,\n  PromoteRequestedAction,\n  PublishedFetchFailedAction,\n  PublishedFetchRequestedAction,\n  PublishedFetchSucceededAction,\n  PublishedUpdateFailedAction,\n  PublishedUpdateRequestedAction,\n  PublishedUpdateSucceededAction,\n  RemoveFailedAction,\n  RemoveRequestedAction,\n  RemoveSucceededAction,\n  ReorderFailedAction,\n  ReorderRequestedAction,\n  ReorderSucceededAction,\n  ResetFailedAction,\n  ResetRequestedAction,\n  ResetSucceededAction,\n  SettingsFetchFailedAction,\n  SettingsFetchRequestedAction,\n  SettingsFetchSucceededAction,\n  SettingsUpdateFailedAction,\n  SettingsUpdateRequestedAction,\n  SettingsUpdateSucceededAction,\n} from 'app/js/v4/features/libraryManagement/libraryManagementTypes';\nimport { PlainError } from 'app/js/v4/utils/data/api';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\n\nconst initialState: LibraryManagementState = {\n  hubs: {},\n  publishedItems: {},\n  settings: {},\n};\n\nfunction hubsChangeRequested(\n  hubs: HubListState | undefined,\n  options: HubOptions[]\n): void {\n  if (hubs) {\n    markPending(hubs);\n    hubs.options = options;\n  }\n}\n\nfunction hubsChangeSucceeded(hubs: HubListState | undefined): void {\n  if (hubs) {\n    markPopulated(hubs);\n  }\n}\n\nfunction hubsChangeFailed(\n  hubs: HubListState | undefined,\n  options: HubOptions[],\n  error: PlainError\n): void {\n  if (hubs) {\n    markFailed(hubs, error);\n    hubs.options = options;\n  }\n}\n\nconst libraryManagementSlice = createSlice({\n  name: 'libraryManagement',\n  initialState,\n\n  reducers: {\n    settingsFetchRequested(state, { payload }: SettingsFetchRequestedAction) {\n      state.settings[payload.server.machineIdentifier] = {\n        isPending: true,\n        isPopulated: false,\n        isUpdating: false,\n        error: null,\n      };\n    },\n\n    settingsFetchSucceeded(state, { payload }: SettingsFetchSucceededAction) {\n      const settings = state.settings[payload.server.machineIdentifier];\n\n      if (settings) {\n        settings.isMergeRecentlyAddedEnabled =\n          payload.isMergeRecentlyAddedEnabled;\n        markPopulated(settings);\n      }\n    },\n\n    settingsFetchFailed(state, { payload }: SettingsFetchFailedAction) {\n      const settings = state.settings[payload.server.machineIdentifier];\n\n      if (settings) {\n        markFailed(settings, payload.error);\n      }\n    },\n\n    settingsUpdateRequested(state, { payload }: SettingsUpdateRequestedAction) {\n      const settings = state.settings[payload.server.machineIdentifier];\n\n      if (settings) {\n        settings.isUpdating = true;\n      }\n    },\n\n    settingsUpdateSucceeded(state, { payload }: SettingsUpdateSucceededAction) {\n      const settings = state.settings[payload.server.machineIdentifier];\n\n      if (settings) {\n        settings.isMergeRecentlyAddedEnabled =\n          payload.isMergeRecentlyAddedEnabled;\n        settings.isUpdating = false;\n      }\n    },\n\n    settingsUpdateFailed(state, { payload }: SettingsUpdateFailedAction) {\n      const settings = state.settings[payload.server.machineIdentifier];\n\n      if (settings) {\n        settings.error = payload.error;\n        settings.isUpdating = false;\n      }\n    },\n\n    resetHubs(_state, _action: PayloadAction) {\n      // Handled by saga, no state change\n    },\n\n    hubsFetchRequested(state, { payload }: HubsFetchRequestedAction) {\n      state.hubs[payload.sourceURI] = {\n        options: state.hubs[payload.sourceURI]?.options || [],\n        isPending: true,\n        isPopulated: false,\n        isResetting: false,\n        error: null,\n      };\n    },\n\n    hubsFetchSucceeded(state, { payload }: HubsFetchSucceededAction) {\n      const hubs = state.hubs[payload.sourceURI];\n\n      if (hubs) {\n        markPopulated(hubs);\n        hubs.options = payload.options;\n      }\n    },\n\n    hubsFetchFailed(state, { payload }: HubsFetchFailedAction) {\n      const hubs = state.hubs[payload.sourceURI];\n\n      if (hubs) {\n        markFailed(hubs, payload.error);\n      }\n    },\n\n    reorderRequested(state, { payload }: ReorderRequestedAction) {\n      hubsChangeRequested(state.hubs[payload.sourceURI], payload.options);\n    },\n\n    reorderSucceeded(state, { payload }: ReorderSucceededAction) {\n      hubsChangeSucceeded(state.hubs[payload.sourceURI]);\n    },\n\n    reorderFailed(state, { payload }: ReorderFailedAction) {\n      hubsChangeFailed(\n        state.hubs[payload.sourceURI],\n        payload.options,\n        payload.error\n      );\n    },\n\n    removeRequested(state, { payload }: RemoveRequestedAction) {\n      hubsChangeRequested(state.hubs[payload.sourceURI], payload.options);\n    },\n\n    removeSucceeded(state, { payload }: RemoveSucceededAction) {\n      hubsChangeSucceeded(state.hubs[payload.sourceURI]);\n    },\n\n    removeFailed(state, { payload }: RemoveFailedAction) {\n      hubsChangeFailed(\n        state.hubs[payload.sourceURI],\n        payload.options,\n        payload.error\n      );\n    },\n\n    resetRequested(state, { payload }: ResetRequestedAction) {\n      const hubs = state.hubs[payload.sourceURI];\n\n      if (hubs) {\n        hubs.isResetting = true;\n      }\n    },\n\n    resetSucceeded(state, { payload }: ResetSucceededAction) {\n      const hubs = state.hubs[payload.sourceURI];\n\n      if (hubs) {\n        hubs.isResetting = false;\n        hubs.options = payload.options;\n      }\n    },\n\n    resetFailed(state, { payload }: ResetFailedAction) {\n      const hubs = state.hubs[payload.sourceURI];\n\n      if (hubs) {\n        hubs.isResetting = false;\n      }\n    },\n\n    promoteRequested(_state, _action: PromoteRequestedAction) {\n      // Handled by saga, no state change\n    },\n\n    promoteChanged(state, { payload }: PromoteChangedAction) {\n      const hubs = state.hubs[payload.sourceURI];\n      if (hubs) {\n        const hubOptions = hubs.options.find(\n          (options) => options.identifier === payload.options.identifier\n        );\n\n        if (hubOptions) {\n          hubOptions.promotedToRecommended =\n            payload.options.promotedToRecommended;\n          hubOptions.promotedToOwnHome = payload.options.promotedToOwnHome;\n          hubOptions.promotedToSharedHome =\n            payload.options.promotedToSharedHome;\n        }\n      }\n    },\n\n    publishedFetchRequested(state, { payload }: PublishedFetchRequestedAction) {\n      state.publishedItems[payload.sourceURI] = {\n        isPending: true,\n        isPopulated: false,\n        isUpdating: false,\n        error: null,\n      };\n    },\n\n    publishedFetchSucceeded(state, { payload }: PublishedFetchSucceededAction) {\n      const publishedItem = state.publishedItems[payload.sourceURI];\n\n      if (publishedItem) {\n        publishedItem.hub = payload.hub;\n        markPopulated(publishedItem);\n      }\n    },\n\n    publishedFetchFailed(state, { payload }: PublishedFetchFailedAction) {\n      const publishedItem = state.publishedItems[payload.sourceURI];\n\n      if (publishedItem) {\n        markFailed(publishedItem, payload.error);\n      }\n    },\n\n    publishedUpdateRequested(\n      state,\n      { payload }: PublishedUpdateRequestedAction\n    ) {\n      const publishedItem = state.publishedItems[payload.sourceURI];\n\n      if (publishedItem) {\n        publishedItem.isUpdating = true;\n      }\n    },\n\n    publishedUpdateSucceeded(\n      state,\n      { payload }: PublishedUpdateSucceededAction\n    ) {\n      const publishedItem = state.publishedItems[payload.sourceURI];\n\n      if (publishedItem) {\n        publishedItem.hub = payload.hub;\n        publishedItem.isUpdating = false;\n      }\n    },\n\n    publishedUpdateFailed(state, { payload }: PublishedUpdateFailedAction) {\n      const publishedItem = state.publishedItems[payload.sourceURI];\n\n      if (publishedItem) {\n        publishedItem.error = payload.error;\n        publishedItem.isUpdating = false;\n      }\n    },\n  },\n});\n\nexport default libraryManagementSlice;\n","import path from 'app/js/utils/url/path';\n\nexport default function getHubManagementKey(\n  contentDirectoryID: string\n): string {\n  return path.join(['/hubs/sections', contentDirectoryID, 'manage']);\n}\n","import { createSlice } from '@reduxjs/toolkit';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\nimport {\n  ChannelsGridSetStartTimeAction,\n  ChannelsGridSetViewportSizeAction,\n  ChannelsGridState,\n  GuideChannelsFetchFailedAction,\n  GuideChannelsFetchRequestedAction,\n  GuideChannelsFetchSucceededAction,\n  LiveTVState,\n} from './liveTVTypes';\n\nconst HALF_HOUR_IN_SECONDS = 30 * 60;\nconst MIN_CHANNEL_CELLS = 1;\nconst PAST_AIRINGS_DURATION_IN_SECONDS = HALF_HOUR_IN_SECONDS * 6;\n\nexport const initialState: LiveTVState = {\n  guideChannels: {\n    channels: [],\n    isPending: false,\n    isPopulated: false,\n    error: null,\n  },\n\n  channelsGrid: {\n    startTime: 0,\n    visibleColumns: 1,\n    columnTimes: [],\n    columnWidth: 0,\n    viewportWidth: 0,\n    viewportHeight: 0,\n    airedProgress: 0,\n  },\n};\n\nfunction getColumnTimes(\n  startTime: number,\n  visibleColumns: number\n): ChannelsGridState['columnTimes'] {\n  const roundedStartTime =\n    Math.floor(startTime / HALF_HOUR_IN_SECONDS) * HALF_HOUR_IN_SECONDS;\n  const columnTimes = [];\n\n  // Add an extra frame for the end time, so use <= for comparison here\n  for (let i = 0; i <= visibleColumns; i++) {\n    columnTimes.push(roundedStartTime + i * HALF_HOUR_IN_SECONDS);\n  }\n\n  return columnTimes;\n}\n\nconst liveTVSlice = createSlice({\n  name: 'livetv',\n\n  initialState,\n\n  reducers: {\n    reset() {\n      return initialState;\n    },\n\n    //\n    // Channels Grid\n\n    channelsGridResetStartTime({ channelsGrid }) {\n      const startTime = Math.floor(Date.now() / 1000);\n      const columnTimes = getColumnTimes(\n        startTime,\n        channelsGrid.visibleColumns\n      );\n\n      channelsGrid.startTime = startTime;\n      channelsGrid.columnTimes = columnTimes;\n    },\n\n    channelsGridSetStartTime(\n      { channelsGrid },\n      { payload }: ChannelsGridSetStartTimeAction\n    ) {\n      const columnTimes = getColumnTimes(\n        payload.startTime,\n        channelsGrid.visibleColumns\n      );\n\n      channelsGrid.startTime = payload.startTime;\n      channelsGrid.columnTimes = columnTimes;\n    },\n\n    channelsGridSetViewportSize(\n      { channelsGrid },\n      { payload }: ChannelsGridSetViewportSizeAction\n    ) {\n      const {\n        width = 1,\n        height = 1,\n        overflowWidth = 0,\n        channelWidth = 1,\n        channelTitleWidth = 0,\n      } = payload;\n\n      const viewportWidth = Math.floor(width + overflowWidth);\n      const visibleColumns =\n        Math.max(\n          Math.floor((width - channelTitleWidth) / channelWidth),\n          MIN_CHANNEL_CELLS\n        ) + 1;\n      const columnWidth = Math.floor(\n        (viewportWidth - channelTitleWidth) / visibleColumns\n      );\n      const columnTimes = getColumnTimes(\n        channelsGrid.startTime,\n        visibleColumns\n      );\n\n      channelsGrid.visibleColumns = visibleColumns;\n      channelsGrid.columnTimes = columnTimes;\n      channelsGrid.columnWidth = columnWidth;\n      channelsGrid.viewportWidth = viewportWidth;\n      channelsGrid.viewportHeight = Math.floor(height);\n    },\n\n    channelsGridUpdateAiredProgress({ channelsGrid }) {\n      const { columnTimes } = channelsGrid;\n      const startTime = columnTimes[0];\n      const endTime = columnTimes[columnTimes.length - 1];\n      const duration = endTime - startTime;\n      const now = Math.floor(Date.now() / 1000);\n      const airedProgress = Math.min(\n        100,\n        Math.max(0, ((now - startTime) / duration) * 100)\n      );\n\n      channelsGrid.airedProgress = airedProgress;\n    },\n\n    channelsGridNavigateTimeForward({ channelsGrid }) {\n      const nextStartTime = channelsGrid.columnTimes[0] + HALF_HOUR_IN_SECONDS;\n      const columnTimes = getColumnTimes(\n        nextStartTime,\n        channelsGrid.visibleColumns\n      );\n\n      channelsGrid.startTime = nextStartTime;\n      channelsGrid.columnTimes = columnTimes;\n    },\n\n    channelsGridNavigateTimeBack({ channelsGrid }) {\n      const nextStartTime = channelsGrid.columnTimes[0] - HALF_HOUR_IN_SECONDS;\n      const earliestAiringTime =\n        Math.floor(Date.now() / 1000) - PAST_AIRINGS_DURATION_IN_SECONDS;\n\n      if (nextStartTime + HALF_HOUR_IN_SECONDS > earliestAiringTime) {\n        const columnTimes = getColumnTimes(\n          nextStartTime,\n          channelsGrid.visibleColumns\n        );\n\n        channelsGrid.startTime = nextStartTime;\n        channelsGrid.columnTimes = columnTimes;\n      }\n    },\n\n    //\n    // Guide Channels\n\n    guideChannelsFetchRequested(\n      { guideChannels },\n      _action: GuideChannelsFetchRequestedAction\n    ) {\n      markPending(guideChannels);\n    },\n\n    guideChannelsFetchSucceeded(\n      { guideChannels },\n      { payload }: GuideChannelsFetchSucceededAction\n    ) {\n      markPopulated(guideChannels);\n      guideChannels.channels = payload.data;\n    },\n\n    guideChannelsFetchFailed(\n      { guideChannels },\n      { payload }: GuideChannelsFetchFailedAction\n    ) {\n      markFailed(guideChannels, payload.error);\n    },\n  },\n});\n\nexport default liveTVSlice;\n","import { createSelector, Selector } from 'reselect';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\nimport selectRoot from 'app/js/v4/root/selectRoot';\nimport { FeaturesState } from './featuresTypes';\n\nconst selectFeatures: Selector<LegacyRootState, FeaturesState> = createSelector(\n  selectRoot,\n  (root) => root.features\n);\n\nexport default selectFeatures;\n","import { createHashHistory } from 'history';\n\nexport default createHashHistory({ hashType: 'hashbang' });\n","import { LegacyRootState, RootState } from './rootTypes';\n\nfunction isLegacyRootState(\n  appState: LegacyRootState | RootState\n): appState is LegacyRootState {\n  return !!(appState as LegacyRootState).v4;\n}\n\nexport default function selectRoot(\n  appState: LegacyRootState | RootState\n): RootState {\n  // Selectors from components will see v4, while selectors from within sagas\n  // only see appState from within the v4 slice.\n  return isLegacyRootState(appState) ? appState.v4 : appState;\n}\n","import history from 'app/js/v4/history';\nimport routes from 'app/js/v4/routes/routes';\nimport urlForRoute from 'app/js/v4/routes/urlForRoute';\n\nexport default function navigateToRoute(\n  routeKey: keyof typeof routes,\n  params = {},\n  queryParams = {},\n  replace = false\n): void {\n  const url = urlForRoute(routeKey, params, queryParams);\n\n  if (replace) {\n    history.replace(url);\n  } else {\n    history.push(url);\n  }\n}\n\nexport function navigateToServerSettings(): void {\n  navigateToRoute('serverSettings', {\n    settingsSection: 'manage',\n    settingsGroup: 'libraries',\n  });\n}\n","import { generatePath } from 'react-router-dom';\nimport path from 'app/js/utils/url/path';\nimport routes from 'app/js/v4/routes/routes';\n\nfunction urlForRoute(\n  routeKey: keyof typeof routes,\n  params = {},\n  queryParams = {}\n): string {\n  const route = routes[routeKey];\n  const firstRoute = Array.isArray(route) ? route[0] : route;\n\n  return path.join(generatePath(firstRoute, params), queryParams);\n}\n\nexport default urlForRoute;\n","const routes = {\n  home: '/',\n  info: '/info',\n  logs: '/logs',\n  serverAwait: '/server/await',\n  serverSetup: '/setup/:machineIdentifier?',\n  serverUpdate: '/server/update',\n  serverSettings: '/:settingsSection/:settingsGroup',\n  serverSettingsPMS: '/settings/server/:machineIdentifier', // PMS links directly to this route\n  login: '/login',\n  logout: '/logout',\n  signUp: '/signUp',\n};\n\nexport default routes;\n","export default function assert(\n  condition: unknown,\n  msg?: string\n): asserts condition {\n  if (!condition) {\n    throw new Error(msg);\n  }\n}\n","import { PlainError } from './api';\n\nexport interface AsyncState {\n  isPending: boolean;\n  isPopulated: boolean;\n  error: PlainError | null;\n}\n\nexport function markPending(state: AsyncState): void {\n  state.isPending = true;\n  state.error = null;\n}\n\nexport function markPopulated(state: AsyncState): void {\n  state.isPending = false;\n  state.isPopulated = true;\n}\n\nexport function markFailed(state: AsyncState, error: PlainError): void {\n  state.isPending = false;\n  state.error = error;\n}\n\nexport function markCancelled(state: AsyncState): void {\n  state.isPending = false;\n  state.error = null;\n}\n","const DEBUG = __DEV__ && false;\n\nexport default function memoize<T extends (...args: any[]) => R, R>(fn: T): T {\n  const cache = new Map<string, R>();\n\n  const memo = (...args: any[]): R => {\n    const key = JSON.stringify(args);\n\n    if (cache.has(key)) {\n      if (DEBUG) {\n        window.console.log(\n          '[memoize] %s: fetching cache for key %s',\n          fn.name,\n          key\n        );\n      }\n\n      return cache.get(key) as R;\n    } else {\n      if (DEBUG) {\n        window.console.log(\n          '[memoize] %s: setting cache for key %s',\n          fn.name,\n          key\n        );\n      }\n\n      const result = fn(...args);\n      cache.set(key, result);\n      return result;\n    }\n  };\n\n  return memo as T;\n}\n","import getUnixTime from 'date-fns/getUnixTime';\nimport subDays from 'date-fns/subDays';\nimport subHours from 'date-fns/subHours';\nimport subMonths from 'date-fns/subMonths';\nimport subWeeks from 'date-fns/subWeeks';\nimport subYears from 'date-fns/subYears';\nimport t from 'app/js/utils/t';\n\nexport enum TimePeriod {\n  RealTime = 'real-time',\n  TwelveHours = 'twelve-hours',\n  Day = 'day',\n  Week = 'week',\n  Month = 'month',\n  NinetyDays = 'ninety-days',\n  Year = 'year',\n  AllTime = 'all-time',\n}\n\nexport enum Timespan {\n  Year = 0,\n  Month = 1,\n  Week = 2,\n  Day = 3,\n  Hour = 4,\n  Minutes = 5, // Currently unused\n  RealTime = 6,\n}\n\nexport function getTimePeriodLabel(timePeriod: TimePeriod): string {\n  switch (timePeriod) {\n    case TimePeriod.RealTime:\n      return t('Real Time');\n    case TimePeriod.TwelveHours:\n      return t('Last 12 Hours');\n    case TimePeriod.Day:\n      return t('Last 24 Hours');\n    case TimePeriod.Week:\n      return t('Last 7 Days');\n    case TimePeriod.Month:\n      return t('Last 30 Days');\n    case TimePeriod.NinetyDays:\n      return t('Last 90 Days');\n    case TimePeriod.Year:\n      return t('Last Year');\n    case TimePeriod.AllTime:\n      return t('All Time');\n    default:\n      return '';\n  }\n}\n\nexport function getTimePeriodTimespan(timePeriod: TimePeriod): Timespan {\n  switch (timePeriod) {\n    case TimePeriod.RealTime:\n      return Timespan.RealTime;\n    case TimePeriod.TwelveHours:\n    case TimePeriod.Day:\n      return Timespan.Hour;\n    case TimePeriod.Week:\n      return Timespan.Day;\n    case TimePeriod.Month:\n      return Timespan.Week;\n    case TimePeriod.NinetyDays:\n      return Timespan.Week;\n    case TimePeriod.Year:\n    case TimePeriod.AllTime:\n      return Timespan.Month;\n    default:\n      return Timespan.Day;\n  }\n}\n\nexport function getTimePeriodAfter(timePeriod: TimePeriod): number | undefined {\n  switch (timePeriod) {\n    case TimePeriod.TwelveHours:\n      return getUnixTime(subHours(new Date(), 12));\n    case TimePeriod.Day:\n      return getUnixTime(subDays(new Date(), 1));\n    case TimePeriod.Week:\n      return getUnixTime(subWeeks(new Date(), 1));\n    case TimePeriod.Month:\n      return getUnixTime(subMonths(new Date(), 1));\n    case TimePeriod.NinetyDays:\n      return getUnixTime(subDays(new Date(), 90));\n    case TimePeriod.Year:\n      return getUnixTime(subYears(new Date(), 1));\n    case TimePeriod.AllTime:\n      return 0;\n    default:\n      // RealTime\n      return;\n  }\n}\n\nexport function getTimePeriodDateFormat(\n  timePeriod: TimePeriod,\n  useLongFormat?: boolean\n): string {\n  switch (timePeriod) {\n    case TimePeriod.TwelveHours:\n      return 'H:00';\n    case TimePeriod.Day:\n      return useLongFormat ? 'H:00' : 'HH';\n    case TimePeriod.Week:\n    case TimePeriod.Month:\n    case TimePeriod.NinetyDays:\n      return useLongFormat ? 'MMMM do' : 'MMM d';\n    case TimePeriod.Year:\n      return useLongFormat ? 'MMMM' : 'MMM';\n    case TimePeriod.AllTime:\n      return useLongFormat ? 'MMMM yyyy' : 'MMM yy';\n    default:\n      return useLongFormat ? 'MMMM do' : 'MMM d';\n  }\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { resolve } from 'app/js/adapters/adapters';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n\nconst AbstractReactView = Marionette.Layout.extend({\n  //\n  // Properties\n\n  template: () => '',\n\n  //\n  // Control\n\n  mountReact() {\n    const appStore = resolve('appStore');\n\n    ReactDOM.render(\n      <DndProvider backend={HTML5Backend}>\n        <Provider store={appStore}>{this.component(this.options)}</Provider>\n      </DndProvider>,\n      this.el\n    );\n  },\n\n  unmountReact() {\n    if (this.isRendered) {\n      ReactDOM.unmountComponentAtNode(this.el);\n    }\n  },\n\n  //\n  // Listeners\n\n  onBeforeRender() {\n    this.unmountReact();\n  },\n\n  onRender() {\n    this.mountReact();\n  },\n\n  onClose() {\n    this.unmountReact();\n  },\n});\n\nexport default AbstractReactView;\n","import Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport dispatcher from 'app/js/utils/dispatcher';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/alert... Remove this comment to see the full error message\nimport tpl from 'app/templates/alerts/AlertBarView.tpl';\n\nconst ALERT_TYPES = {\n  success: true,\n  error: true,\n  notify: true,\n};\n\nconst AlertBarView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  className: 'alert-bar',\n  template: tpl,\n\n  events: {\n    'click .close-btn': 'onCloseClick',\n  },\n\n  //\n  // Init\n\n  initialize: function (options: any) {\n    const alert = options.alert;\n    this.alert = alert;\n\n    if (alert) {\n      const type = alert.type;\n\n      // Since these class names may be user-supplied, only permit known values.\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      if (type && ALERT_TYPES[type]) {\n        this.$el.addClass(type);\n      }\n    }\n  },\n\n  //\n  // Control\n\n  hide: function () {\n    dispatcher.trigger('hide:bar', 'alertbar');\n  },\n\n  serializeData: function () {\n    return this.alert;\n  },\n\n  //\n  // Listeners\n\n  onCloseClick: function (event: any) {\n    event.preventDefault();\n    this.hide();\n  },\n});\n\nexport default AlertBarView;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction getMediaIndex(item: any, id: any) {\n  // Live TV items don't have IDs on media, if id is undefined\n  // return the first media item.\n\n  if (!id) {\n    return 0;\n  }\n\n  const medias = item.get('Media');\n\n  return medias.findIndex((media: any) => media.id === id);\n}\n\nexport default getMediaIndex;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nfunction getPartIndex(media: any, key: any) {\n  // Use a key to find the part since not all channel content provides\n  // parts with an id.\n\n  const parts = media.Part;\n  const partIndex = _.indexOf(parts, _.findWhere(parts, { key }));\n\n  return partIndex;\n}\n\nexport default getPartIndex;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport * as audioBoostLevels from 'app/js/utils/constants/audioBoostLevels';\nimport log from 'app/js/utils/log/log';\nimport getMediaIndex from 'app/js/utils/media/getMediaIndex';\nimport getPartIndex from 'app/js/utils/media/getPartIndex';\nimport path from 'app/js/utils/url/path';\n\nconst transcoder = {\n  extensions: {\n    dash: '.mpd',\n    hls: '.m3u8',\n    http: '',\n  },\n  logParams: function (type: any, action: any, params: any) {\n    log('[Transcoder] %s (%s) options:', type, action, params);\n  },\n  // `server` is optional. TV uses it to serialize param values differently\n  // based on server version.\n  // @ts-expect-error ts-migrate(6133) FIXME: 'server' is declared but its value is never read.\n  serializeParams: function (params: any, server: any) {\n    // See: https://github.com/plexinc/plex-web-client/issues/2768\n    let serialized;\n    let head = {};\n    let tail = {};\n    const xPlex = /^X-Plex/;\n    _.each(params, function (value, key) {\n      if (xPlex.test(key)) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        tail[key] = value;\n      } else {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        head[key] = value;\n      }\n    });\n    head = path.stringifyParams(head);\n    tail = path.stringifyParams(tail);\n    if (head && tail) {\n      serialized = head + '&' + tail;\n    } else {\n      serialized = head || tail;\n    }\n    return serialized;\n  },\n  image: function (server: any, imagePath: any, options: any) {\n    if (!imagePath) {\n      return '';\n    }\n    const fallbackCandidate = options.fallbackServer;\n    let useFallbackServer = false;\n    let fallbackServer;\n    if (fallbackCandidate && fallbackCandidate.get('isConnected')) {\n      const isFullServer = fallbackCandidate.get('isFullServer');\n      fallbackServer = isFullServer ? fallbackCandidate : null;\n    }\n    if (fallbackServer) {\n      if (server.get('cloud')) {\n        useFallbackServer = true;\n      } else if (!server.get('isFullServer')) {\n        // A synced server is only reachable from a fallback server if it has a\n        // remote connection or both it and the fallback server have local\n        // connections.\n        const serverHasRemoteConnection = !server\n          .get('activeConnection')\n          .get('isPrivate');\n        const fallbackHasPrivateConnection = fallbackServer\n          .get('activeConnection')\n          .get('isPrivate');\n        useFallbackServer =\n          serverHasRemoteConnection || fallbackHasPrivateConnection;\n      }\n    }\n    const transcodeServer = useFallbackServer ? fallbackServer : server;\n    const useRelativeUrl = transcodeServer.id === server.id;\n    const params = {\n      url: server.resolveUrl(imagePath, {\n        useRelativeUrl: useRelativeUrl,\n        appendToken: true,\n      }),\n      width: options.width && Math.round(parseFloat(options.width)),\n      height: options.height && Math.round(parseFloat(options.height)),\n    };\n    if (options.minSize) {\n      (params as any).minSize = 1;\n    }\n    if (options.format) {\n      (params as any).format = options.format;\n    }\n    if (options.quality) {\n      (params as any).quality = options.quality;\n    }\n    if (options.filters) {\n      _.each(options.filters, function (value, key) {\n        if (value !== undefined) {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          params[key] = value;\n        }\n      });\n    }\n    const url =\n      '/photo/:/transcode?' + this.serializeParams(params, transcodeServer);\n    return transcodeServer.resolveUrl(url, { appendToken: true });\n  },\n  music: function (server: any, item: any, options: any, action: any) {\n    action || (action = 'start');\n    const media = _.first(item.get('Media'));\n    if (!media) {\n      return;\n    }\n    const part = _.first(media.Part);\n    if (!part) {\n      return;\n    }\n    let params;\n    let baseUrl;\n    if (server.supports('universalMusicTranscoder')) {\n      params = _.extend(\n        {\n          hasMDE: 1,\n          path: server.resolveUrl(item.get('key'), { useRelativeUrl: true }),\n          mediaIndex: 0,\n          partIndex: 0,\n        },\n        options\n      );\n      baseUrl = '/music/:/transcode/universal/' + action;\n    } else {\n      params = {\n        identifier: item.get('identifier'),\n        url: server.resolveUrl(part.key, { useRelativeUrl: true }),\n        format: 'mp3',\n        audioCodec: 'libmp3lame',\n        audioBitrate: 320,\n        audioSamples: 44100,\n      };\n      baseUrl = '/music/:/transcode/generic.mp3';\n    }\n    this.logParams('Music', action, params);\n    params = _.extend(params, server.getHeaders());\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const extension = this.extensions[params.protocol];\n    if (action === 'start' && extension) {\n      baseUrl += extension;\n    }\n    return server.resolveUrl(\n      baseUrl + '?' + this.serializeParams(params, server)\n    );\n  },\n  video: function (\n    server: any,\n    item: any,\n    media: any,\n    part: any,\n    options: any,\n    action: any\n  ) {\n    options || (options = {});\n    action || (action = 'start');\n    // If the transcodeServer matches the item's server, use a loopback.\n    const useRelativeUrl = server.entityID() === item.get('serverEntityID');\n    const activeConnection = server.get('activeConnection');\n    const isPrivateConnection = activeConnection.get('isPrivate');\n    let params = _.extend(\n      {\n        hasMDE: 1,\n        path: server.resolveUrl(item.get('key'), {\n          useRelativeUrl: useRelativeUrl,\n          appendToken: !useRelativeUrl,\n        }),\n        mediaIndex: getMediaIndex(item, media.id),\n        partIndex: getPartIndex(media, part.key),\n        protocol: 'hls',\n        fastSeek: 1,\n        directPlay: 0,\n        directStream: 1,\n        subtitleSize: 100,\n        audioBoost: audioBoostLevels.NORMALIZED,\n        location: isPrivateConnection ? 'lan' : 'wan',\n      },\n      options\n    );\n    this.logParams('Video', action, params);\n    params = _.extend(params, server.getHeaders());\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const extension = this.extensions[params.protocol];\n    let baseUrl = '/video/:/transcode/universal/' + action;\n    if (action === 'start' && extension) {\n      baseUrl += extension;\n    }\n    return server.resolveUrl(\n      baseUrl + '?' + this.serializeParams(params, server)\n    );\n  },\n  game: function (\n    server: any,\n    item: any,\n    media: any,\n    options: any,\n    action: any\n  ) {\n    options || (options = {});\n    action || (action = 'start');\n    // If the transcodeServer matches the item's server, use a loopback.\n    const useRelativeUrl = server.entityID() === item.get('serverEntityID');\n    const activeConnection = server.get('activeConnection');\n    const isPrivateConnection = activeConnection.get('isPrivate');\n    let params = _.extend(\n      {\n        path: server.resolveUrl(item.get('key'), {\n          useRelativeUrl: useRelativeUrl,\n          appendToken: !useRelativeUrl,\n        }),\n        location: isPrivateConnection ? 'lan' : 'wan',\n        mediaIndex: getMediaIndex(item, media.id),\n      },\n      options,\n      {\n        // Our `protocol: 'parsec'` is Web implementation detail. Don't allow it\n        // to leak to PMS.\n        protocol: undefined,\n      }\n    );\n    this.logParams('Game', action, params);\n    params = _.extend(params, server.getHeaders());\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const extension = this.extensions[params.protocol];\n    let baseUrl = '/game/:/transcode/' + action;\n    if (action === 'start' && extension) {\n      baseUrl += extension;\n    }\n    return server.resolveUrl(\n      baseUrl + '?' + this.serializeParams(params, server)\n    );\n  },\n};\nexport default transcoder;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport * as adapters from 'app/js/adapters/adapters';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport config from 'app/js/models/config';\nimport ImageCache from 'app/js/utils/cache/ImageCache';\nimport getPixelRatio from 'app/js/utils/constants/getPixelRatio';\nimport capabilities from 'app/js/utils/device/capabilities';\nimport transcoder from 'app/js/utils/transcoder';\n\n// From: http://css-tricks.com/snippets/html/base64-encode-of-1x1px-transparent-gif/\nconst placeholderSrc =\n  'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n\nconst BaseImage = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  tagName: 'img',\n  background: false,\n  backgroundSize: '',\n\n  cache: new ImageCache(),\n\n  //\n  // Init\n\n  initialize: function (options: any) {\n    options || (options = {});\n\n    _.bindAll(this, 'onLoad', 'onError', 'loadImage');\n\n    this.url = options.url;\n    this.server = options.server;\n    this.placeholder = options.placeholder;\n    this.placeholderClass = options.placeholderClass;\n    this.modelAttribute = options.modelAttribute;\n    this.ignoreAttributeChanges = options.ignoreAttributeChanges;\n    this.exposeUrl = options.exposeUrl;\n    this.resetOnError = options.resetOnError;\n\n    this.emptyImage = options.explicitEmpty\n      ? 'url(' + placeholderSrc + ')'\n      : '';\n\n    if (options.background) {\n      this.background = options.background;\n    }\n\n    if (options.backgroundSize) {\n      this.backgroundSize = options.backgroundSize;\n    }\n\n    if (options.format) {\n      this.format = options.format;\n    }\n\n    // 0 to 100: JPEG quality default: 75\n    if (options.quality) {\n      this.quality = options.quality;\n    }\n\n    if (_.isFunction(options.getUrl)) {\n      this.getUrl = options.getUrl;\n    }\n\n    this.allowBaseImageBlobs = config.allowBaseImageBlobs;\n    this.allowBaseImagePreloading = config.allowBaseImagePreloading;\n\n    this.setup(options);\n  },\n\n  setup: function (options: any) {\n    this.setDimensions(options);\n    this.setFilters(options.filters);\n    this.setModel(options.model, options);\n  },\n\n  setDimensions: function (options: any) {\n    if (options.width && options.height) {\n      this.transcode = true;\n      this.width = options.width;\n      this.height = options.height;\n    }\n  },\n\n  // @param {Object} filterOptions\n  // @param {Number} filterOptions.blur         0 to 100: blur radius applied to composed image\n  // @param {String} filterOptions.background   '000000' to 'ffffff': solid color composed behind image\n  // @param {Number} filterOptions.opacity      0 to 100: transparency applied to image when composed with \"background\" color\n  // @param {Number} filterOptions.saturation   0 to 100: saturation of image when composed with \"background\" color\n  setFilters: function (filterOptions: any) {\n    this.filters = filterOptions || undefined;\n  },\n\n  hasFilters: function () {\n    return this.filters !== undefined;\n  },\n\n  setModel: function (model: any, options: any) {\n    options || (options = {});\n\n    // Clean up any listeners in case we are changing models.\n    this.stopListening();\n\n    // Clear up previous state\n    this.src = null;\n\n    this.model = model;\n\n    if (!model) {\n      return;\n    }\n\n    if (!this.server) {\n      this.server = model.server;\n    }\n\n    // If a url was passed in explicitly, don't go any further.\n    if (options.url) {\n      return;\n    }\n\n    if (this.modelAttribute) {\n      this.url = this.getUrl(model.get(this.modelAttribute));\n\n      if (!this.ignoreAttributeChanges) {\n        this.listenTo(model, 'change:' + this.modelAttribute, this.onChange);\n      }\n    }\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: '$el' is declared but its value is never read.\n  setElement: function ($el: any) {\n    // eslint-disable-next-line prefer-rest-params\n    Marionette.ItemView.prototype.setElement.apply(this, arguments);\n\n    // If the element changes, we need to show the image on the new element.\n    this.render({ force: true });\n  },\n\n  //\n  // Control\n  getUrl: function (url: any) {\n    // This lets us override the url used by the onChange listener.\n    return url;\n  },\n\n  getTranscodeUrl: function (url: any) {\n    if (!this.server || !this.transcode) {\n      return url;\n    }\n\n    const appModel = adapters.resolve('appModel');\n    const pixelRatio = getPixelRatio();\n\n    return transcoder.image(this.server, url, {\n      fallbackServer: appModel.get('primaryServer'),\n      width: this.width * pixelRatio,\n      height: this.height * pixelRatio,\n      minSize: this.minSize,\n      filters: this.filters,\n      format: this.format,\n      quality: this.quality,\n    });\n  },\n\n  render: function (options: any) {\n    options || (options = {});\n\n    if (!this.url && !this.placeholder && !this.placeholderClass) {\n      return this;\n    }\n\n    if (this.src) {\n      // If the image has already been loaded but the force flag is set,\n      // update the image again because the element might have changed.\n      if (options.force) {\n        this.showImage(this.src);\n      }\n\n      return this;\n    }\n\n    // First set the placeholder image if there is one, then load the actual\n    // image to replace the placeholder if successful.\n\n    if (!this.isPlaceholderRendered || !this.url) {\n      this.showPlaceholder();\n    }\n\n    if (this.url) {\n      this.load(this.url, this.transcode).then(\n        this.onLoad,\n        this.onError,\n        this.onLoad\n      );\n    }\n\n    return this;\n  },\n\n  showPlaceholder: function () {\n    this.isPlaceholderRendered = true;\n\n    this.$el.removeClass('loaded');\n\n    if (this.placeholderClass) {\n      this.$el.addClass(this.placeholderClass);\n      this.$el.css('background-image', this.emptyImage);\n      return;\n    }\n\n    if (!this.placeholder) {\n      this.clearImage();\n      return;\n    }\n\n    this.showImage(this.placeholder);\n  },\n\n  clearImage: function () {\n    if (this.background) {\n      // If you're not using a placeholder and you're rendering to\n      // background then clear the background image.\n      this.$el.css('background-image', this.emptyImage);\n    } else {\n      // Use a transparent image to prevent the default white border that\n      // is used in some browsers for empty images.\n      this.showImage(placeholderSrc);\n    }\n  },\n\n  showImage: function (src: any) {\n    if (this.background) {\n      this.showBackgroundImage(src);\n      return;\n    }\n\n    // IE will occasionally add width and height attributes when changing\n    // the src of an image.\n    this.$el.attr('src', src).removeAttr('width').removeAttr('height');\n  },\n\n  showBackgroundImage: function (src: any) {\n    this.$el.css('background-image', 'url(' + src + ')');\n  },\n\n  load: function (url: any) {\n    if (!url) {\n      return $.Deferred().reject().promise();\n    }\n\n    url = this.getTranscodeUrl(url);\n\n    // Expose the url used for the image as a data attribute so third\n    // parties have a way of getting the source image.\n    if (this.exposeUrl) {\n      this.$el.attr('data-image-url', url);\n    }\n\n    if (\n      this.allowBaseImageBlobs &&\n      capabilities.hasBlob &&\n      capabilities.hasObjectUrl\n    ) {\n      let promise = this.loadBlob(url);\n\n      // Still use loadImage to preload the image so there is no flicker\n      // between the placeholder and the blob image.\n      promise = promise.then(this.loadImage, null, this.loadImage);\n\n      return promise;\n    } else if (!this.allowBaseImagePreloading) {\n      return $.Deferred().resolve(url).promise();\n    } else {\n      return this.loadImage(url);\n    }\n  },\n\n  loadBlob: function (url: any) {\n    const deferred = $.Deferred();\n\n    // Cancel the current request if it is still waiting.\n    this.cancel();\n\n    // First try to pull the image or a placeholder from the cache.\n    const cachedBlobUrl = this.cache.getBlobUrl(url);\n\n    if (cachedBlobUrl) {\n      deferred.resolve(cachedBlobUrl);\n      return deferred.promise();\n    } else {\n      const cachedPlaceholder = this.cache.getPlaceholder(url);\n      if (cachedPlaceholder) {\n        deferred.notify(cachedPlaceholder, true);\n      }\n    }\n\n    // Request the image data and create a Blob which is stored by the\n    // browser and then referenced with an object url.\n\n    const xhr = new window.XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'arraybuffer';\n\n    // Keep a reference to the request so we can abort if necessary.\n    this.xhr = xhr;\n\n    xhr.onreadystatechange = _.bind(function () {\n      if (xhr.readyState === 4) {\n        xhr.onreadystatechange = null;\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.xhr = null;\n\n        if (xhr.status === 200) {\n          const blob = new window.Blob([xhr.response], { type: 'image/jpeg' });\n          const blobUrl = window.URL.createObjectURL(blob);\n\n          // Store the blobUrl in the image cache so it can be used again\n          // or revoked as needed.\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.cache.store({ url: url, blobUrl: blobUrl });\n\n          deferred.resolve(blobUrl);\n        } else {\n          deferred.reject();\n        }\n      }\n    }, this);\n\n    xhr.send();\n\n    return deferred.promise();\n  },\n\n  loadImage: function (url: any, placeholder: any) {\n    const deferred = $.Deferred();\n    const img = new window.Image();\n\n    img.onload = function () {\n      img.onload = img.onabort = img.onerror = null;\n      placeholder\n        ? deferred.notify(url, img.width, img.height)\n        : deferred.resolve(url, img.width, img.height);\n    };\n\n    img.onabort = img.onerror = function () {\n      img.onload = img.onabort = img.onerror = null;\n      deferred.reject();\n    };\n\n    img.src = url;\n\n    return deferred.promise();\n  },\n\n  cancel: function () {\n    if (!this.xhr) {\n      return;\n    }\n\n    this.xhr.onreadystatechange = null;\n    this.xhr.abort();\n    this.xhr = null;\n  },\n\n  //\n  // Listeners\n\n  onLoad: function (src: any, width: any, height: any) {\n    if (this.backgroundSize) {\n      // Determine handling of background images larger than the element size.\n      const value =\n        (width && width > this.width) || (height && height > this.height)\n          ? this.backgroundSize\n          : 'auto';\n      this.$el[0].style.backgroundSize = value;\n    }\n\n    this.src = src;\n\n    if (this.placeholderClass) {\n      this.$el.removeClass(this.placeholderClass);\n    }\n\n    this.$el.addClass('loaded');\n\n    this.showImage(src);\n    this.trigger('load', src, width, height);\n  },\n\n  onError: function () {\n    if (this.resetOnError) {\n      this.showPlaceholder();\n    }\n    this.trigger('error');\n  },\n\n  onClose: function () {\n    this.cancel();\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'model' is declared but its value is never read.\n  onChange: function (model: any, url: any) {\n    url = this.getUrl(url);\n\n    if (this.url === url) {\n      return this;\n    }\n\n    this.url = url;\n    this.src = null;\n\n    this.render();\n  },\n});\n\nexport default BaseImage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport posterPlaceholders from 'app/js/utils/posterPlaceholders';\nimport posterSizes from 'app/js/utils/posterSizes';\nimport BaseImage from 'app/js/views/images/BaseImage';\n\nconst MediaPosterImage = BaseImage.extend({\n  //\n  // Properties\n\n  background: true,\n\n  //\n  // Init\n\n  setup(options: any) {\n    this.minSize = true;\n    this.type = options.type;\n    this.modelAttribute = options.modelAttribute || 'thumb';\n\n    if (options.placeholder !== false) {\n      if (this.model && this.model.get('isFolder')) {\n        this.placeholderClass = posterPlaceholders.folder;\n      } else if (!options.placeholderClass) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        this.placeholderClass = posterPlaceholders[this.type];\n      }\n    }\n\n    // eslint-disable-next-line prefer-rest-params\n    BaseImage.prototype.setup.apply(this, arguments);\n  },\n\n  setDimensions(options: any) {\n    if (options.width) {\n      options.height = posterSizes.getPosterHeight(this.type, options.width);\n    } else if (options.height) {\n      options.width = posterSizes.getPosterWidth(this.type, options.height);\n    }\n\n    BaseImage.prototype.setDimensions.call(this, options);\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'model' is declared but its value is never read.\n  setModel(model: any, options: any) {\n    // eslint-disable-next-line prefer-rest-params\n    BaseImage.prototype.setModel.apply(this, arguments);\n\n    if (this.model && this.model.get('isFolder')) {\n      this.placeholderClass = posterPlaceholders.folder;\n    }\n  },\n});\n\nexport default MediaPosterImage;\n","import _ from 'underscore';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n\nconst BaseList = Marionette.CollectionView.extend({\n  //\n  // Control\n\n  appendHtml: function () {\n    // Use the append method appropriate to the flag set on the list. If no\n    // flags are set, defer to the default appendHtml method on Marionette's\n    // CollectionView.\n\n    if (this.sorted) {\n      // eslint-disable-next-line prefer-rest-params, prefer-spread\n      return this.sortedAppendHtml.apply(this, arguments);\n    } else if (this.reversed) {\n      // eslint-disable-next-line prefer-rest-params, prefer-spread\n      return this.reversedAppendHtml.apply(this, arguments);\n    } else {\n      return Marionette.CollectionView.prototype.appendHtml.apply(\n        this,\n        // eslint-disable-next-line prefer-rest-params\n        arguments\n      );\n    }\n  },\n\n  sortedAppendHtml: function (collectionView: any, itemView: any, index: any) {\n    // Use the index parameter to insert item views at a specified place\n    // in the list, so the list retains the sort order of the collection.\n\n    if (collectionView.isBuffering) {\n      // Buffering happens on reset events and initial renders in order to\n      // reduce the number of inserts into the document, which are\n      // expensive.\n\n      const children = collectionView.elBuffer.childNodes;\n\n      if (children.length <= index) {\n        collectionView.elBuffer.appendChild(itemView.el);\n      } else {\n        collectionView.elBuffer.insertBefore(itemView.el, children[index]);\n      }\n\n      collectionView._bufferedChildren.push(itemView);\n    } else {\n      const $container = collectionView.itemViewContainer\n        ? collectionView.$(collectionView.itemViewContainer)\n        : collectionView.$el;\n      const $children = $container.children();\n\n      if ($children.size() <= index) {\n        $container.append(itemView.el);\n      } else {\n        $children.eq(index).before(itemView.el);\n      }\n    }\n  },\n\n  reversedAppendHtml: function (collectionView: any, itemView: any) {\n    // Use prepend and insertBefore instead of appending items to the list.\n\n    if (collectionView.isBuffering) {\n      // Buffering happens on reset events and initial renders in order to\n      // reduce the number of inserts into the document, which are\n      // expensive.\n\n      collectionView.elBuffer.insertBefore(\n        itemView.el,\n        collectionView.elBuffer.firstChild\n      );\n      collectionView._bufferedChildren.push(itemView);\n    } else {\n      const $container = collectionView.itemViewContainer\n        ? collectionView.$(collectionView.itemViewContainer)\n        : collectionView.$el;\n\n      $container.prepend(itemView.el);\n    }\n  },\n\n  measureList: function () {\n    if (!this.children.length) {\n      return;\n    }\n\n    const children = this.children._views;\n    // @ts-expect-error ts-migrate(2538) FIXME: Type 'undefined' cannot be used as an index type.\n    const listItem = children[_.first(_.keys(children))];\n\n    // Defer so the list item can be rendered and we get an actual width and\n    // height back.\n    _.defer(\n      _.bind(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.itemWidth = listItem.$el.outerWidth(true);\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.itemHeight = listItem.$el.outerHeight(true);\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.itemMarginRight = parseInt(listItem.$el.css('margin-right'), 10);\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.itemMarginBottom = parseInt(listItem.$el.css('margin-bottom'), 10);\n\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.triggerMethod('measure', this);\n      }, this)\n    );\n  },\n\n  getViewForModel: function (model: any) {\n    // Reach into Marionette internal view cache\n    const viewId = this.children._indexByModel[model.cid];\n    return this.children._views[viewId];\n  },\n\n  reorder: function () {\n    const children = this.children;\n    const models = this.collection.models;\n\n    const els = _.map(models, function (model, index) {\n      const view = children.findByModel(model);\n      view._index = index;\n      return view.el;\n    });\n\n    this.$el.append(els);\n  },\n\n  //\n  // Listeners\n\n  onCollectionRendered: function () {\n    if (!this.measure) {\n      return;\n    }\n\n    this.measureList();\n  },\n});\n\nexport default BaseList;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport dispatcher from 'app/js/utils/dispatcher';\n\nlet visibleModalsCount = 0;\nconst closeableModalsStack: any = [];\n\nconst BaseModal = Marionette.Layout.extend({\n  //\n  // Properties\n\n  className: 'modal fade',\n\n  // Modals with a transition cannot have elements focused immediately in\n  // onRender. A slight delay must be used before attempting to focus.\n  focusDelay: 500,\n  animationDelay: 500,\n\n  events: {\n    'hide.bs.modal': 'onHide',\n  },\n\n  //\n  // Init\n\n  initialize: function () {\n    this.once('render', function () {\n      visibleModalsCount += 1;\n      dispatcher.trigger('anyModalOpen');\n    });\n    this.once('close', function () {\n      visibleModalsCount -= 1;\n      if (visibleModalsCount === 0) {\n        dispatcher.trigger('allModalsClosed');\n      }\n    });\n  },\n\n  //\n  // Control\n\n  hide: function () {\n    if (!this.isClosed && !this.isHidden) {\n      this.$el.modal('hide');\n    }\n  },\n\n  //\n  // Listeners\n\n  onRender: function () {\n    // If a modal wants to re-render itself, we don't want to trigger\n    // bootstrap to try to show the modal again.\n    if (this.rerender) {\n      return;\n    }\n\n    if (this.isForced) {\n      this.$el.modal({\n        backdrop: false,\n        keyboard: false,\n      });\n    } else {\n      this.listenTo(\n        dispatcher,\n        'shortcut:escape',\n        _.bind(function () {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          if (closeableModalsStack[0] === this) {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this.hide();\n          }\n        }, this)\n      );\n\n      this.listenToOnce(this, 'close', function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        const i = closeableModalsStack.indexOf(this);\n        if (i !== -1) {\n          closeableModalsStack.splice(i, 1);\n        }\n      });\n\n      closeableModalsStack.unshift(this);\n      this.$el.modal();\n    }\n\n    // Don't hold focus on elements outside of the modal\n    $(':focus').blur();\n  },\n\n  onHide: function () {\n    this.isHidden = true;\n\n    _.each(\n      this.panes,\n      function (paneDef) {\n        const onModalClose = paneDef.constructor.onModalClose;\n        if (onModalClose) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          onModalClose.apply(this);\n        }\n      },\n      this\n    );\n\n    // Wait for the modal to animate out.\n    window.setTimeout(\n      _.bind(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        dispatcher.trigger('hide:modal', this);\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.trigger('close');\n      }, this),\n      this.animationDelay\n    );\n  },\n});\n\nexport default BaseModal;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport BaseModal from 'app/js/views/modals/BaseModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/ConfirmModal.tpl';\n\nconst ConfirmModal = BaseModal.extend({\n  //\n  // Properties\n\n  className: 'confirm-modal modal modal-sm fade',\n  template: tpl,\n\n  ui: {\n    doubleConfirmMessage: '.double-confirm-message',\n    confirmBtn: '.confirm-btn',\n    confirmLabel: '.confirm-btn .btn-label',\n  },\n\n  events: _.extend(\n    {\n      'click .confirm-btn': 'onConfirm',\n    },\n    BaseModal.prototype.events\n  ),\n\n  whitelistedOptions: [\n    'title',\n    'message',\n    'warningMessage',\n    'confirmLabel',\n    'cancelLabel',\n    'hasDanger',\n    'hideCancel',\n  ],\n\n  //\n  // Init\n\n  initialize: function (options: any) {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.initialize.apply(this, arguments);\n\n    this.async = options.async;\n    this.data = _.pick(options, this.whitelistedOptions);\n\n    this.promise = $.Deferred();\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    return _.defaults(this.data, {\n      confirmLabel: 'Yes',\n      cancelLabel: 'No',\n    });\n  },\n\n  //\n  // Listeners\n\n  onRender: function () {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.onRender.apply(this, arguments);\n\n    window.setTimeout(\n      _.bind(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.ui.confirmBtn.focus();\n      }, this),\n      this.focusDelay\n    );\n  },\n\n  onHide: function () {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.onHide.apply(this, arguments);\n\n    this.promise.reject();\n  },\n\n  onConfirm: function (event: any) {\n    event.preventDefault();\n\n    if (this.options.requireDoubleConfirm && !this.hasConfirmedOnce) {\n      this.hasConfirmedOnce = true;\n\n      const doubleConfirmMessage = this.options.doubleConfirmMessage;\n      const doubleConfirmLabel = this.options.doubleConfirmLabel;\n\n      if (doubleConfirmMessage) {\n        this.ui.doubleConfirmMessage.text(doubleConfirmMessage);\n      }\n\n      if (doubleConfirmLabel) {\n        this.ui.confirmLabel.text(doubleConfirmLabel);\n      }\n\n      return;\n    }\n\n    this.promise.resolve();\n\n    if (this.async) {\n      this.ui.confirmBtn.addClass('active');\n    } else {\n      this.hide();\n    }\n  },\n});\n\nexport default ConfirmModal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nfunction validatePane(model: any, paneDef: any) {\n  const validate = paneDef.constructor.prototype.validate;\n  return validate ? validate(model) : [];\n}\nfunction filterValidPanes(paneName: any) {\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  const dependentPane = this.panes[paneName];\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  const model = getModel.call(this, dependentPane);\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  return validatePane.call(this, model, dependentPane).length === 0;\n}\nfunction accumulateDependentPanes(acc: any, paneName: any) {\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  let dependentPanes = this.panes[paneName].dependentPanes;\n  if (typeof dependentPanes === 'function') {\n    // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n    dependentPanes = dependentPanes.call(this);\n  }\n  return acc.concat(dependentPanes || []);\n}\nfunction updateSidebarBtns() {\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  const changePaneBtns = this.$('.change-pane-btn');\n  changePaneBtns.addClass('disabled').removeClass('selected');\n  _.each(\n    // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n    this.getReachablePanes(),\n    function (paneName) {\n      changePaneBtns.filter('.' + paneName + '-btn').removeClass('disabled');\n    },\n    // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n    this\n  );\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  changePaneBtns.filter('.' + this.selectedPane + '-btn').addClass('selected');\n}\nfunction getModel(paneDef: any) {\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  return this[paneDef.model] || this[this.panesModel] || this.model;\n}\nconst paneModalMixin = {\n  showPane: function (paneName: any) {\n    if (paneName === (this as any).selectedPane) {\n      return;\n    }\n    // Unhook the old pane\n    const lastView = (this as any).paneRegion.currentView;\n    if (lastView) {\n      (this as any).stopListening(lastView, 'valid', updateSidebarBtns);\n      (this as any).stopListening(lastView, 'invalid', updateSidebarBtns);\n      (this as any).$el.removeClass('pane-' + (this as any).selectedPane);\n      if ((this as any).onPaneHide) {\n        (this as any).onPaneHide((this as any).selectedPane, lastView);\n      }\n    }\n    // Construct the new pane\n    (this as any).selectedPane = paneName;\n    const paneDef = (this as any).panes[paneName];\n    const PaneViewConstructor = paneDef.constructor;\n    const arg = (this as any).paneConstructorArg\n      ? (this as any).paneConstructorArg()\n      : {};\n    const view = new PaneViewConstructor(\n      _.extend(arg, {\n        model: getModel.call(this, paneDef),\n      })\n    );\n    if (view.onModalClose) {\n      if (!(this as any)._paneOnModalCloseCallbacks) {\n        (this as any).listenToOnce(this, 'close', function () {\n          _.each(\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this._paneOnModalCloseCallbacks,\n            function (pair) {\n              pair[1].call(pair[0]);\n            },\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this\n          );\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this._paneOnModalCloseCallbacks = null;\n        });\n      }\n      const callbacks = (this as any)._paneOnModalCloseCallbacks || [];\n      callbacks.push([view, view.onModalClose]);\n      (this as any)._paneOnModalCloseCallbacks = _.uniq(\n        callbacks,\n        function (pair) {\n          return pair[1];\n        }\n      );\n    }\n    // The view is responsible for triggering these events\n    // when the modal should update to indicate valid/invalid.\n    // For example, enabling/disabling save buttons.\n    (this as any).listenTo(view, 'valid', updateSidebarBtns);\n    (this as any).listenTo(view, 'invalid', updateSidebarBtns);\n    updateSidebarBtns.call(this);\n    if ((this as any).onPaneShow) {\n      (this as any).onPaneShow(paneName, view);\n    }\n    (this as any).$el.addClass('pane-' + paneName);\n    (this as any).paneRegion.show(view);\n    updateSidebarBtns.call(this);\n  },\n  getReachablePanes: function () {\n    const allDependentPanes = _.reduce(\n      (this as any).panes,\n      function (deps, paneDef) {\n        let dependentPanes = paneDef.dependentPanes;\n        if (typeof dependentPanes === 'function') {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          dependentPanes = dependentPanes.call(this);\n        }\n        return _.union(deps, dependentPanes || []);\n      },\n      [],\n      this\n    );\n    let reachablePanes: any = _.filter(\n      _.keys((this as any).panes),\n      function (paneName) {\n        return !_.contains(allDependentPanes, paneName);\n      }\n    );\n    // accumulate panes-to-enable by recursing into dependent panes,\n    // and terminating at invalid panes and leaf panes.\n    let validPanes;\n    let isAnyInvalid;\n    let addedPanes = reachablePanes;\n    while (addedPanes.length) {\n      validPanes = _.filter(addedPanes, filterValidPanes, this);\n      isAnyInvalid = isAnyInvalid || validPanes.length !== addedPanes.length;\n      addedPanes = _.reduce(validPanes, accumulateDependentPanes, [], this);\n      reachablePanes = reachablePanes.concat(addedPanes);\n    }\n    reachablePanes.isAnyInvalid = isAnyInvalid;\n    return reachablePanes;\n  },\n  onChangePaneClick: function (event: any) {\n    event.preventDefault();\n    const $target = (this as any).$(event.currentTarget);\n    if ($target.isDisabled()) {\n      return;\n    }\n    this.showPane($target.data('pane'));\n  },\n};\nexport default paneModalMixin;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/edits... Remove this comment to see the full error message\nimport tpl from 'app/templates/editsection/EditSectionAgentSettingsView.tpl';\n\nconst EditSectionAgentSettingsView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  template: tpl,\n\n  events: {\n    'change input[name]': 'onInputChange',\n    'change select[name]': 'onInputChange',\n  },\n\n  //\n  // Init\n\n  initialize: function () {\n    this.changes = {};\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    return {\n      settings: this.collection.toJSON(),\n      escapedAgentName: _.escape(\n        this.model.agents.get(this.model.get('agent')).get('name')\n      ),\n    };\n  },\n\n  //\n  // Listeners\n\n  onInputChange: function (event: any) {\n    const $target = $(event.currentTarget);\n\n    const value = $target.is(':checkbox')\n      ? $target.prop('checked')\n      : $target.val();\n\n    const setting = this.collection.findWhere({ id: $target.attr('name') });\n    setting.set('value', value);\n  },\n});\n\nexport default EditSectionAgentSettingsView;\n","import _ from 'underscore';\nimport Obscura from 'app/js/libs/backbone/backbone.obscura-0.1.7';\n\nconst ExclusiveAgentProxy = Obscura.extend({\n  constructor: function (\n    agents: any,\n    exclusiveAgents: any,\n    agentIdentifier: any,\n    options: any\n  ) {\n    this.exclusiveAgents = exclusiveAgents;\n    this.agentIdentifier = agentIdentifier;\n\n    Obscura.call(this, agents, options);\n    this.filterBy(_.bind(this.filterExclusiveAgent, this));\n  },\n\n  filterExclusiveAgent: function (agent: any) {\n    const identifier = agent.get('identifier');\n    const exclusiveAgents = this.exclusiveAgents;\n\n    // If the sectionType has no exclusive agent list,\n    // this agent passes the filter.\n    if (!exclusiveAgents) {\n      return true;\n    }\n\n    const currentAgent = this.agentIdentifier;\n    const isCurrentFoundInExclusives =\n      exclusiveAgents.indexOf(currentAgent) !== -1;\n    const isAgentFoundInExclusives = exclusiveAgents.indexOf(identifier) !== -1;\n\n    // If the section being shown belongs to an exclusive agent, only show\n    // that agent. Otherwise, show every agent that isn't in the list of\n    // exclusive agents.\n    const result = isCurrentFoundInExclusives\n      ? identifier === currentAgent\n      : !isAgentFoundInExclusives;\n\n    return result;\n  },\n});\n\nexport default ExclusiveAgentProxy;\n","import _ from 'underscore';\nimport Obscura from 'app/js/libs/backbone/backbone.obscura-0.1.7';\n\nconst ExclusiveScannerProxy = Obscura.extend({\n  constructor: function (\n    scanners: any,\n    exclusiveScanners: any,\n    scannerName: any,\n    options: any\n  ) {\n    this.exclusiveScanners = exclusiveScanners;\n    this.scannerName = scannerName;\n\n    Obscura.call(this, scanners, options);\n    this.filterBy(_.bind(this.filterExclusiveScanner, this));\n  },\n\n  filterExclusiveScanner: function (scanner: any) {\n    const name = scanner.get('name');\n    const exclusiveScanners = this.exclusiveScanners;\n\n    // If the sectionType has no exclusive agent list,\n    // this agent passes the filter.\n    if (!exclusiveScanners) {\n      return true;\n    }\n\n    const currentScanner = this.scannerName;\n    const isCurrentFoundInExclusives =\n      exclusiveScanners.indexOf(currentScanner) !== -1;\n    const isScannerFoundInExclusives = exclusiveScanners.indexOf(name) !== -1;\n\n    // If the section being shown belongs to an exclusive agent, only show\n    // that agent. Otherwise, show every agent that isn't in the list of\n    // exclusive agents.\n    const result = isCurrentFoundInExclusives\n      ? name === currentScanner\n      : !isScannerFoundInExclusives;\n\n    return result;\n  },\n});\n\nexport default ExclusiveScannerProxy;\n","import AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ScannerModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ScannerModel',\n  context: ['server'],\n\n  rootPropertyName: 'Scanner',\n\n  syncedAttrs: {\n    name: attrTypes.string,\n  },\n});\n\nexport default ScannerModel;\n","import _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ScannerModel from './ScannerModel';\n\nconst ScannerCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ScannerCollection',\n  context: ['server', 'sectionTypeID'],\n\n  model: ScannerModel,\n\n  url: function () {\n    return '/system/scanners/' + this.sectionTypeID;\n  },\n\n  //\n  // Control\n\n  hasExclusiveScanner: function (exclusiveScanners: any) {\n    return !!_.intersection(this.pluck('name'), exclusiveScanners).length;\n  },\n});\n\nexport default ScannerCollection;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport AgentCollection from 'app/js/models/server/AgentCollection';\nimport ExclusiveAgentProxy from 'app/js/models/server/ExclusiveAgentProxy';\nimport ExclusiveScannerProxy from 'app/js/models/server/ExclusiveScannerProxy';\nimport ScannerCollection from 'app/js/models/server/ScannerCollection';\nimport ServerSettingCollection from 'app/js/models/server/ServerSettingCollection';\nimport * as agentIdentifiers from 'app/js/utils/constants/agentIdentifiers';\nimport t from 'app/js/utils/t';\nimport sectionTypes from 'app/js/utils/types/sectionTypes';\nimport path from 'app/js/utils/url/path';\n\nconst EditSectionBaseView = Marionette.Layout.extend({\n  //\n  // Properties\n  ui: {\n    formGroup: '.form-group',\n  },\n  onlyAfterRender: ['showValidationResult'],\n  //\n  // Control\n  serializeData: function () {\n    const data = {};\n    if (this.model.isNew()) {\n      (data as any).add = true;\n    } else {\n      (data as any).edit = true;\n    }\n    (data as any).section = this.model.toJSON();\n    return data;\n  },\n  showValidationResult: function (invalidAttrs: any) {\n    // Clear errors\n    const formGroup = this.ui.formGroup;\n    formGroup.removeClass('has-error');\n    // Mark errors\n    _.each(invalidAttrs, function (attr) {\n      formGroup.filter('.' + attr + '-group').addClass('has-error');\n    });\n    this.trigger(invalidAttrs.length ? 'invalid' : 'valid');\n  },\n  createMenuOptions: function (options: any, selectedValue: any) {\n    return _.map(options, function (option) {\n      return (\n        '<option value=\"' +\n        option.value +\n        '\"' +\n        (option.value === selectedValue ? ' selected' : '') +\n        '>' +\n        option.label +\n        '</option>'\n      );\n    }).join('\\n');\n  },\n  getSectionType: function () {\n    if (this.model.sectionType) {\n      return this.model.sectionType;\n    }\n    const sectionKey = this.model.get('type');\n    let currentSectionType = sectionTypes.get(sectionKey);\n    if (\n      sectionKey === 'movie' &&\n      this.model.get('agent') === agentIdentifiers.NONE\n    ) {\n      currentSectionType = sectionTypes.get('videos');\n    }\n    this.model.sectionType = currentSectionType;\n    return currentSectionType;\n  },\n  setSectionType: function (sectionType: any) {\n    this.model.sectionType = sectionType;\n  },\n  populateAgents: function () {\n    const sectionType = this.getSectionType();\n    if (!sectionType) {\n      return $.Deferred().reject().promise();\n    }\n    if (!this.model.agents) {\n      this.model.agents = new AgentCollection([], {\n        server: this.model.server,\n        mediaTypeID: sectionType.typeID,\n      });\n    }\n    return this.model.agents.populate().then(function (agents: any) {\n      // Discard XML response\n      return agents;\n    });\n  },\n  populateScanners: function () {\n    const sectionType = this.getSectionType();\n    if (!sectionType) {\n      return $.Deferred().reject().promise();\n    }\n    if (!this.model.scanners) {\n      this.model.scanners = new ScannerCollection([], {\n        server: this.model.server,\n        sectionTypeID: sectionType.typeID,\n      });\n    }\n    return this.model.scanners.populate().then(function (scanners: any) {\n      // Discard XML response\n      return scanners;\n    });\n  },\n  populateAgentsProxy: function () {\n    const exclusiveAgents = this.getSectionType().exclusiveAgents;\n    const proxy = new ExclusiveAgentProxy(\n      this.model.agents,\n      exclusiveAgents,\n      this.model.get('agent')\n    );\n    this.model.agentsProxy = proxy;\n    return $.Deferred().resolve(proxy).promise();\n  },\n  populateScannersProxy: function () {\n    const exclusiveScanners = this.getSectionType().exclusiveScanners;\n    const proxy = new ExclusiveScannerProxy(\n      this.model.scanners,\n      exclusiveScanners,\n      this.model.get('scanner')\n    );\n    this.model.scannersProxy = proxy;\n    return $.Deferred().resolve(proxy).promise();\n  },\n  populateSectionSettings: function () {\n    // If the server doesn't suppose sectionSettings, just resolve\n    if (!this.model.server.supports('sectionSettings')) {\n      return $.Deferred().resolve().promise();\n    }\n    if (!this.model.settings) {\n      const settings = new ServerSettingCollection([], {\n        server: this.model.server,\n      });\n      // Always pass the agent through so PMS can pass back the correct settings.\n      const params = {\n        agent: this.model.get('agent'),\n      };\n      // If the section isn't persisted, request section default settings\n      if (this.model.isNew()) {\n        const sectionType = this.getSectionType();\n        (params as any).type = sectionType.typeID;\n        settings.url = path.join(['/library/sections/prefs'], params);\n      } else {\n        settings.url = path.join(\n          ['/library/sections/', this.model.id, '/prefs'],\n          params\n        );\n      }\n      this.model.settings = settings;\n    }\n    return this.model.settings.populate().then(() => {\n      const shouldSynthesizeImportFromiTunesSetting = !!(\n        this.model.isNew() &&\n        this.model.get('type') === 'music' &&\n        this.model.server.supports('premiumMusic') &&\n        !this.model.settings.findWhere({ id: 'importFromiTunes' }) &&\n        this.model.server\n          .get(__PLATFORM__)\n          .get('settings')\n          .findWhere({ id: 'iTunesLibraryXmlPath' })\n      );\n      if (shouldSynthesizeImportFromiTunesSetting) {\n        this.model.settings.unshift({\n          type: 'bool',\n          id: 'importFromiTunes',\n          value: false,\n          label: t('Import from iTunes'),\n          summary: t(\n            'Importing from iTunes will import your music playlists. It will also import your ratings, the date you added the music, as well as play and skip counts for tracks in your library.'\n          ),\n        });\n      }\n      // END TODO\n      return this.model.settings;\n    });\n  },\n  populateSectionAgentSettings: function () {\n    if (!this.model.agentSettings) {\n      const agentSettings = new ServerSettingCollection([], {\n        server: this.model.server,\n        url: path.join(['/:/plugins/', this.model.get('agent'), '/prefs']),\n      });\n      this.model.agentSettings = agentSettings;\n    }\n    const promise = this.model.agentSettings.populate();\n    return promise;\n  },\n  onModalClose: function () {\n    this.model.scanners = null;\n    this.model.scannersProxy = null;\n    this.model.agents = null;\n    this.model.agentsProxy = null;\n    this.model.settings = null;\n  },\n});\nexport default EditSectionBaseView;\n","import $ from 'jquery';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/secti... Remove this comment to see the full error message\nimport tpl from 'app/templates/section/edit/EditSectionSettingView.tpl';\n\nconst EditSectionSettingView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  template: tpl,\n\n  events: {\n    'change [name]': 'onEditSectionSettingInputChange',\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    return { settings: this.collection.toJSON(), edit: !this.model.isNew() };\n  },\n\n  //\n  // Listeners\n\n  onEditSectionSettingInputChange: function (event: any) {\n    const $target = $(event.currentTarget);\n    const name = $target.attr('name');\n\n    // The import from iTunes setting is synthetic and needs to be sent with\n    // the POST to create a section.\n    if (name === 'importFromiTunes') {\n      this.model.set(name, true);\n      return;\n    }\n\n    const value = $target.is(':checkbox')\n      ? $target.prop('checked')\n      : $target.val();\n\n    const setting = this.collection.findWhere({ id: name });\n    setting.set('value', value);\n  },\n});\n\nexport default EditSectionSettingView;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport commands from 'app/js/commands/commands';\nimport EditSectionAgentSettingsView from 'app/js/views/editsection/EditSectionAgentSettingsView';\nimport EditSectionBaseView from 'app/js/views/editsection/EditSectionBaseView';\nimport EditSectionSettingView from 'app/js/views/editsection/EditSectionSettingView';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/secti... Remove this comment to see the full error message\nimport tpl from 'app/templates/section/edit/EditSectionAdvancedView.tpl';\n\nconst EditSectionAdvancedView = EditSectionBaseView.extend({\n  //\n  // Properties\n\n  template: tpl,\n\n  ui: _.extend(\n    {\n      sectionAgent: '#edit-section-agent',\n      sectionScanner: '#edit-section-scanner',\n      thumbnailsCheckbox: 'input[name=\"enableBIFGeneration\"]',\n      agentGroup: '.agent-group',\n      scannerGroup: '.scanner-group',\n    },\n    EditSectionBaseView.prototype.ui\n  ),\n\n  events: {\n    'change #edit-section-agent': 'onEditSectionAgentChange',\n    'change #edit-section-scanner': 'onEditSectionScannerChange',\n    'click .delete-thumbnails-btn': 'onThumbnailsDeleteClick',\n  },\n\n  regions: {\n    sectionSettingsRegion: '.section-settings-region',\n    agentSettingsRegion: '.section-agent-settings-region',\n  },\n\n  onlyAfterRender: [\n    'renderSectionAgent',\n    'renderSectionScanner',\n    'renderSectionSettings',\n    'renderSectionAgentSettings',\n  ].concat(EditSectionBaseView.prototype.onlyAfterRender),\n\n  //\n  // Init\n\n  initialize: function () {\n    this.populateCollections();\n  },\n\n  //\n  // Control\n\n  onRender: function () {\n    this.model.agents.populate();\n    this.model.scanners.populate();\n  },\n\n  validate: function (model: any) {\n    const invalidAttrs = [];\n\n    if (!model.get('agent')) {\n      invalidAttrs.push('agent');\n    }\n\n    if (!model.get('scanner')) {\n      invalidAttrs.push('scanner');\n    }\n\n    return invalidAttrs;\n  },\n\n  renderSectionSettings: function () {\n    const view = new EditSectionSettingView({\n      model: this.model,\n      collection: this.model.settings,\n    });\n    this.sectionSettingsRegion.show(view);\n  },\n\n  renderSectionAgentSettings: function () {\n    const view = new EditSectionAgentSettingsView({\n      model: this.model,\n      collection: this.model.agentSettings,\n    });\n    this.agentSettingsRegion.show(view);\n  },\n\n  populateCollections: function () {\n    const populateAgents = this.populateAgents();\n    const populateScanners = this.populateScanners();\n    const populateSectionSettings = this.populateSectionSettings();\n    const populateSectionAgentSettings = this.populateSectionAgentSettings();\n\n    this.populateAgentsProxy();\n    this.populateScannersProxy();\n\n    populateAgents.then(_.bind(this.onAgentsPopulate, this));\n    populateScanners.then(_.bind(this.onScannersPopulate, this));\n    populateSectionSettings.then(_.bind(this.renderSectionSettings, this));\n    populateSectionAgentSettings.then(\n      _.bind(this.renderSectionAgentSettings, this)\n    );\n\n    return $.when(\n      populateAgents,\n      populateScanners,\n      populateSectionSettings,\n      populateSectionAgentSettings\n    ).then(_.bind(this.validate, this, this.model));\n  },\n\n  renderSectionAgent: function () {\n    const agents = this.model.agentsProxy;\n    const html = this.createMenuOptions(\n      agents.map(function (agent: any) {\n        return {\n          label: agent.get('name'),\n          value: agent.get('identifier'),\n        };\n      }),\n      this.model.get('agent')\n    );\n\n    this.ui.sectionAgent.html(html);\n\n    if (agents.length > 1) {\n      this.ui.agentGroup.removeClass('hidden');\n    }\n  },\n\n  renderSectionScanner: function () {\n    const scanners = this.model.scannersProxy;\n    const html = this.createMenuOptions(\n      scanners.map(function (scanner: any) {\n        return {\n          label: scanner.get('name'),\n          value: scanner.get('name'),\n        };\n      }),\n      this.model.get('scanner')\n    );\n\n    this.ui.sectionScanner.html(html);\n\n    if (scanners.length > 1) {\n      this.ui.scannerGroup.removeClass('hidden');\n    }\n  },\n\n  updateSectionAgent: function (selectedAgent: string): void {\n    const selectedScanner = this.model.get('scanner');\n\n    this.model.set('agent', selectedAgent);\n    this.agentSettingsRegion.close();\n\n    const agent = this.model.agents.get(selectedAgent);\n    if (agent) {\n      // If the selected language is no longer available with the new agent,\n      // set it to the server provided default or the first available language.\n      const agentLanguages = agent.get('languages');\n      const currentLanguage = this.model.get('language');\n      const sectionType = this.getSectionType();\n\n      if (!agentLanguages.get(currentLanguage)) {\n        let defaultLanguage = agentLanguages.findWhere({ default: true });\n\n        // If PMS didn't return a default and our currently selected language is\n        // of the hyphenated variant (e.g. \"en-US\") then just try with the language part.\n        if (!defaultLanguage && currentLanguage.search('-') === 2) {\n          defaultLanguage = agentLanguages.get(currentLanguage.substr(0, 2));\n        }\n\n        // Always make sure we have a fallback.\n        if (!defaultLanguage) {\n          defaultLanguage =\n            agentLanguages.get(sectionType.defaultLanguage) ||\n            agentLanguages.first();\n        }\n\n        this.model.set('language', defaultLanguage.get('code'));\n      }\n\n      // Reset to null so settings for the new agent are fetched.\n      this.model.agentSettings = null;\n      this.populateSectionAgentSettings().then(\n        _.bind(this.renderSectionAgentSettings, this)\n      );\n\n      // Also ensure we pull in the section settings specific to the agent.\n      this.model.settings = null;\n      this.populateSectionSettings().then(\n        _.bind(this.renderSectionSettings, this)\n      );\n\n      if (selectedAgent === sectionType.mutual.agent) {\n        this.model.set('scanner', sectionType.mutual.scanner);\n        this.renderSectionScanner();\n      } else if (this.model.get('scanner') === sectionType.mutual.scanner) {\n        const scanner = this.model.scanners.find(\n          (currentScanner: any) =>\n            currentScanner.get('name') !== selectedScanner\n        );\n        this.model.set('scanner', scanner.get('name'));\n        this.renderSectionScanner();\n      }\n    }\n    this.showValidationResult(this.validate(this.model));\n  },\n\n  //\n  // Listeners\n\n  onEditSectionAgentChange: function (event: any) {\n    const $target = $(event.currentTarget);\n    const selectedAgent = $target.val();\n\n    this.updateSectionAgent(selectedAgent);\n  },\n\n  onEditSectionScannerChange: function (event: any) {\n    const $target = $(event.currentTarget);\n    const selectedScanner = $target.val();\n    const selectedAgent = this.model.get('agent');\n    const sectionType = this.getSectionType();\n\n    this.model.set('scanner', selectedScanner);\n\n    if (selectedScanner === sectionType.mutual.scanner) {\n      this.updateSectionAgent(sectionType.mutual.agent);\n\n      this.renderSectionAgent();\n    } else if (this.model.get('agent') === sectionType.mutual.agent) {\n      const agent = this.model.agents.find(\n        (currentAgent: any) => currentAgent.get('identifier') !== selectedAgent\n      );\n\n      this.updateSectionAgent(agent.get('identifier'));\n\n      this.renderSectionAgent();\n    }\n\n    this.showValidationResult(this.validate(this.model));\n  },\n\n  onAgentsPopulate: function () {\n    this.renderSectionAgent();\n  },\n\n  onScannersPopulate: function () {\n    this.renderSectionScanner();\n  },\n\n  onThumbnailsDeleteClick: function (event: any) {\n    event.preventDefault();\n\n    const promise = commands.execute('deleteSectionThumbnails', {\n      section: this.model,\n    });\n\n    promise.done(\n      this.whenRendered(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.ui.thumbnailsCheckbox.prop('checked', false);\n      })\n    );\n  },\n});\n\nexport default EditSectionAdvancedView;\n","import EditSectionBaseView from 'app/js/views/editsection/EditSectionBaseView';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/edits... Remove this comment to see the full error message\nimport tpl from 'app/templates/editsection/EditSectionErrorView.tpl';\n\nconst EditSectionErrorView = EditSectionBaseView.extend({\n  //\n  // Properties\n\n  template: tpl,\n});\n\nexport default EditSectionErrorView;\n","import { UserService } from 'app/js/v4/core/user/userTypes';\n\nconst unsuitableSubscriptionTypes = ['free'];\n\nexport default function hasRequiredUserService(\n  userServices: UserService[],\n  requires?: string\n): boolean {\n  // Nothing required for this feature.\n  if (!requires) {\n    return true;\n  }\n\n  // Otherwise check the user has this service and it's a suitable\n  // subscription type. e.g. TIDAL free subscriptions aren't suitable to meet\n  // the tidal requirement.\n\n  const service = userServices.find(\n    (userService) => userService.id === requires\n  );\n\n  return service\n    ? !service.subscriptionType ||\n        !unsuitableSubscriptionTypes.includes(service.subscriptionType)\n    : false;\n}\n","import Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/secti... Remove this comment to see the full error message\nimport tpl from 'app/templates/section/edit/EditSectionPathItemView.tpl';\n\nconst EditSectionPathItemView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  template: tpl,\n  className: 'row',\n\n  events: {\n    'click .remove-path-btn': 'onRemovePathClick',\n  },\n\n  //\n  // Listeners\n\n  onRemovePathClick: function (event: any) {\n    event.preventDefault();\n\n    this.model.trigger('destroy', this.model, this.model.collection);\n  },\n});\n\nexport default EditSectionPathItemView;\n","import Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport EditSectionPathItemView from 'app/js/views/editsection/EditSectionPathItemView';\n\nconst EditSectionPathsListView = Marionette.CollectionView.extend({\n  //\n  // Properties\n\n  itemView: EditSectionPathItemView,\n});\n\nexport default EditSectionPathsListView;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/lists... Remove this comment to see the full error message\nimport tpl from 'app/templates/lists/server/FileListItem.tpl';\n\nconst FileListItem = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  tagName: 'li',\n  className: 'striped-list-item browse-directory-list-item disabled',\n  template: tpl,\n\n  //\n  // Control\n\n  serializeData: function () {\n    return {\n      filePath: this.model.toJSON(),\n    };\n  },\n});\n\nexport default FileListItem;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport t from 'app/js/utils/t';\nimport FileListItem from 'app/js/views/lists/server/FileListItem';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module './FileList.tpl' or its corresp... Remove this comment to see the full error message\nimport tpl from './FileList.tpl';\n\nconst FileList = Marionette.CompositeView.extend({\n  //\n  // Properties\n\n  template: tpl,\n  itemView: FileListItem,\n  itemViewContainer: '.js-file-list-items',\n\n  //\n  // Bindings\n\n  bindings: {\n    '.js-file-list-truncated-message': {\n      modelAttribute: 'truncatedFilesCount',\n\n      formatter(truncatedFilesCount: any) {\n        if (!truncatedFilesCount) {\n          return null;\n        }\n\n        return t('and {truncatedFilesCount} more', { truncatedFilesCount });\n      },\n    },\n  },\n});\n\nexport default FileList;\n","import Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/lists... Remove this comment to see the full error message\nimport tpl from 'app/templates/lists/server/FilePathListItem.tpl';\n\nconst FilePathListItem = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  tagName: 'li',\n  className: 'striped-list-item browse-directory-list-item',\n  template: tpl,\n\n  ui: {\n    link: 'a',\n    spinner: '.loading',\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    return {\n      filePath: this.model.toJSON(),\n      isRoot: !this.model.parent,\n    };\n  },\n\n  select: function (loading: any) {\n    this.ui.link.addClass('selected');\n    this.ui.spinner.toggleClass('hidden', !loading);\n  },\n\n  unselect: function () {\n    this.ui.link.removeClass('selected');\n    this.ui.spinner.addClass('hidden');\n  },\n});\n\nexport default FilePathListItem;\n","import $ from 'jquery';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport FilePathListItem from 'app/js/views/lists/server/FilePathListItem';\n\nconst FilePathList = Marionette.CollectionView.extend({\n  //\n  // Properties\n\n  tagName: 'ul',\n  className: 'list browse-directory-list',\n  itemView: FilePathListItem,\n\n  selectedFilePath: null,\n\n  events: {\n    'click a': 'onDirectoryClick',\n  },\n\n  collectionEvents: {\n    reset: 'onReset',\n  },\n\n  //\n  // Control\n\n  startLoadingItem: function (filePath: any) {\n    if (this.selectedFilePath) {\n      this.unselectItem(this.selectedFilePath);\n    }\n\n    this.selectedFilePath = filePath;\n\n    const child = this.children.findByModel(filePath);\n    if (child) {\n      child.select(true);\n    }\n  },\n\n  stopLoadingItem: function (filePath: any) {\n    const child = this.children.findByModel(filePath);\n    if (child) {\n      child.select(false);\n    }\n  },\n\n  unselectItem: function (filePath: any) {\n    this.selectedFilePath = null;\n\n    const child = this.children.findByModel(filePath);\n    if (child) {\n      child.unselect();\n    }\n  },\n\n  //\n  // Listeners\n\n  onReset: function () {\n    if (this.parentFilePath) {\n      // Prepend an item to our collection to render the [Back] list item.\n      this.collection.add(this.parentFilePath, { at: 0 });\n    }\n  },\n\n  onDirectoryClick: function (event: any) {\n    event.preventDefault();\n\n    const $target = $(event.currentTarget);\n    const key = $target.data('key');\n    const filePath = this.collection.get(key) || this.parentFilePath;\n\n    this.trigger('change:path', filePath);\n\n    if (this.options.isRoot) {\n      return;\n    }\n\n    if (filePath.parent.parent) {\n      this.parentFilePath = filePath.parent.parent.clone();\n      this.parentFilePath.set({\n        title: '.. [Back]',\n        isBackShortcut: true,\n      });\n    } else {\n      this.parentFilePath = null;\n    }\n  },\n});\n\nexport default FilePathList;\n","import _ from 'underscore';\nimport FilePathListModel from 'app/js/models/library/FilePathListModel';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport xhrTracker from 'app/js/utils/xhr/xhrTracker';\nimport FileList from 'app/js/views/lists/server/FileList';\nimport FilePathList from 'app/js/views/lists/server/FilePathList';\nimport BaseModal from 'app/js/views/modals/BaseModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/AddFolderModal.tpl';\n\nconst AddFolderModal = BaseModal.extend({\n  //\n  // Properties\n\n  name: 'addFolderModal',\n  className: 'add-folder-modal modal fade',\n  template: tpl,\n\n  events: _.extend(\n    {\n      'submit form': 'onSubmitForm',\n    },\n    BaseModal.prototype.events\n  ),\n\n  ui: {\n    path: 'input[name=\"path\"]',\n  },\n\n  regions: {\n    rootList: '.home-directory-container',\n    childrenList: '.path-container',\n    childrenFileList: '.file-container',\n  },\n\n  //\n  // Init\n\n  initialize: function (options: any) {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.initialize.apply(this, arguments);\n\n    this.rootPathList = new FilePathListModel(\n      {},\n      { server: options.server, includeFiles: 1 }\n    );\n    this.childrenPathList = new FilePathListModel(\n      {},\n      { server: options.server, includeFiles: 1 }\n    );\n\n    this.loadRootPaths();\n  },\n\n  //\n  // Control\n\n  loadRootPaths: function () {\n    this.rootPathList.fetch().done(\n      this.whenRendered(function () {\n        // Start by loading the children of the first home path.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        const homePaths = this.rootPathList.get('paths').where({ home: true });\n        const homePath =\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          _.first(homePaths) || this.rootPathList.get('paths').first();\n\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.rootList.currentView.startLoadingItem(homePath);\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.loadChildrenPaths(homePath);\n      })\n    );\n  },\n\n  loadChildrenPaths: function (filePath: any) {\n    xhrTracker.abortAll('addFolderModal');\n\n    const children = filePath.get('children');\n    const promise = children.fetch({ scope: 'addFolderModal' });\n\n    promise.done(\n      this.whenRendered(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.ui.path.val(filePath.get('path'));\n\n        // Keep the collection instance the same, but reset it with the\n        // children's models so we don't have to re-render the list.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.childrenPathList.get('paths').reset(children.get('paths').models);\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.childrenPathList.get('files').reset(children.get('files').models);\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.childrenPathList.set(\n          'truncatedFilesCount',\n          children.get('truncatedFilesCount')\n        );\n      })\n    );\n\n    promise.fail(\n      this.whenRendered(function () {\n        // If this was a child path's children being loaded, hide the spinner\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.childrenList.currentView.unselectItem(filePath);\n\n        dispatcher.trigger('show:alert', {\n          type: 'error',\n          message: t(\"Unable to load contents of '{1}'\", filePath.get('path')),\n        });\n      })\n    );\n\n    promise.always(\n      this.whenRendered(function () {\n        // If this was a root path's children being loaded, hide the spinner.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.rootList.currentView.stopLoadingItem(filePath);\n      })\n    );\n  },\n\n  //\n  // Listeners\n\n  onRender: function () {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.onRender.apply(this, arguments);\n\n    const rootListView = new FilePathList({\n      isRoot: true,\n      collection: this.rootPathList.get('paths'),\n    });\n    const childrenListView = new FilePathList({\n      collection: this.childrenPathList.get('paths'),\n    });\n    const childrenFileListView = new FileList({\n      model: this.childrenPathList,\n      collection: this.childrenPathList.get('files'),\n    });\n\n    this.listenTo(rootListView, 'change:path', this.onRootPathChange);\n    this.listenTo(childrenListView, 'change:path', this.onChildrenPathChange);\n\n    this.rootList.show(rootListView);\n    this.childrenList.show(childrenListView);\n    this.childrenFileList.show(childrenFileListView);\n  },\n\n  onRootPathChange: function (filePath: any) {\n    // Reset the parent file path since the root has changed and there\n    // should be no back item.\n    this.childrenList.currentView.parentFilePath = null;\n\n    this.rootList.currentView.startLoadingItem(filePath);\n    this.loadChildrenPaths(filePath);\n  },\n\n  onChildrenPathChange: function (filePath: any) {\n    this.childrenList.currentView.startLoadingItem(filePath);\n    this.loadChildrenPaths(filePath);\n  },\n\n  onSubmitForm: function (event: any) {\n    event.preventDefault();\n\n    this.trigger('add:folder', this.ui.path.val());\n    this.hide();\n  },\n});\n\nexport default AddFolderModal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport * as subscriptionStates from 'app/js/utils/constants/user/subscriptionStates';\nimport * as subscriptionTypes from 'app/js/utils/constants/user/subscriptionTypes';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport { getWWWPlexUrl } from 'app/js/utils/getRuntimeUrl';\nimport * as sectionTypes from 'app/js/utils/types/sectionTypes';\nimport hasRequiredUserService from 'app/js/v4/core/user/utils/hasRequiredUserService';\nimport EditSectionBaseView from 'app/js/views/editsection/EditSectionBaseView';\nimport EditSectionPathsListView from 'app/js/views/editsection/EditSectionPathsListView';\nimport AddFolderModal from 'app/js/views/modals/AddFolderModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/secti... Remove this comment to see the full error message\nimport tpl from 'app/templates/section/edit/EditSectionFoldersView.tpl';\n\nexport function findActiveSubscription(\n  subscriptions: any,\n  subscriptionType: any\n) {\n  return (\n    subscriptions.findWhere({\n      type: subscriptionType,\n      state: subscriptionStates.ACTIVE,\n    }) ||\n    subscriptions.findWhere({\n      type: subscriptionType,\n      state: subscriptionStates.PENDING_CANCELLATION,\n    })\n  );\n}\n\nexport function findPastSubscription(\n  subscriptions: any,\n  subscriptionType: any\n) {\n  return (\n    subscriptions.findWhere({\n      type: subscriptionType,\n      state: subscriptionStates.INACTIVE,\n    }) ||\n    subscriptions.findWhere({\n      type: subscriptionType,\n      state: subscriptionStates.CANCELED,\n    }) ||\n    subscriptions.findWhere({\n      type: subscriptionType,\n      state: subscriptionStates.ENDED,\n    })\n  );\n}\n\nconst EditSectionFoldersView = EditSectionBaseView.extend({\n  //\n  // Properties\n\n  template: tpl,\n  fieldNames: ['Location'],\n\n  regions: {\n    pathsRegion: '.paths-region',\n  },\n\n  ui: {\n    ...EditSectionBaseView.prototype.ui,\n    addFolderBtn: '.add-folder-btn',\n    addFolderPopulating: '.add-folder-populating',\n    addFolderError: '.add-folder-error',\n    arcadeDownloadMediaInput: '#arcade-download-media',\n    arcadeGreeting: '#arcade-greeting',\n    arcadeRequired: '#arcade-required',\n    arcadeUpsell: '#arcade-upsell',\n    parsecRequired: '#parsec-required',\n  },\n\n  events: {\n    'click .add-folder-btn': 'onAddFolderClick',\n    'change input[name=path]': 'onFolderChange',\n    'change input[name=downloadMedia]': 'onDownloadMediaChange',\n  },\n\n  onlyAfterRender: ['renderSectionLocation'].concat(\n    EditSectionBaseView.prototype.onlyAfterRender\n  ),\n\n  //\n  // Init\n\n  initialize: function () {\n    this.listenTo(this.model.get('locations'), {\n      add: this.onCollectionChange,\n      remove: this.onCollectionChange,\n    });\n\n    if (this.model.get('type') === sectionTypes.GAMES) {\n      this.listenTo(resolve('appModel').get('user'), {\n        change: this.onUserChange,\n      });\n    }\n\n    this.renderSectionLocation();\n\n    this.showValidationResult(this.validate(this.model));\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    const isGamesSection = this.model.get('type') === sectionTypes.GAMES;\n    const isNewGamesSection = this.model.isNew() && isGamesSection;\n    const user = resolve('appModel').get('user');\n\n    // Find an active or pending cancellation subscription.\n    const hasActiveSubscription = !!findActiveSubscription(\n      user.get('subscriptions'),\n      subscriptionTypes.ARCADE\n    );\n\n    const hasPastSubscription = !!(\n      // Find an inactive or canceled subscription.\n      (\n        findPastSubscription(\n          user.get('subscriptions'),\n          subscriptionTypes.ARCADE\n        ) ||\n        // Find an ended subscription.\n        findPastSubscription(\n          user.get('pastSubscriptions'),\n          subscriptionTypes.ARCADE\n        )\n      )\n    );\n\n    const hasParsecUserService = hasRequiredUserService(\n      user.get('services').toJSON(),\n      'parsec'\n    );\n\n    const showArcadeGreeting = isGamesSection && hasActiveSubscription;\n\n    const showArcadeRequired =\n      isNewGamesSection && hasPastSubscription && !hasActiveSubscription;\n\n    const showArcadeUpsell =\n      isNewGamesSection && !hasPastSubscription && !hasActiveSubscription;\n\n    const showParsecRequired =\n      isGamesSection && hasActiveSubscription && !hasParsecUserService;\n\n    return {\n      ...EditSectionBaseView.prototype.serializeData.call(this),\n\n      hideArcadeGreeting: !showArcadeGreeting,\n      hideArcadeRequired: !showArcadeRequired,\n      hideArcadeUpsell: !showArcadeUpsell,\n      hideParsecRequired: !showParsecRequired,\n      isDisabled: isNewGamesSection && !hasActiveSubscription,\n      isGamesSection,\n      isNewGamesSection,\n      subscribeURL: getWWWPlexUrl('/arcade/checkout'),\n    };\n  },\n\n  validate: function (model: any) {\n    const user = resolve('appModel').get('user');\n\n    const subscription = findActiveSubscription(\n      user.get('subscriptions'),\n      subscriptionTypes.ARCADE\n    );\n\n    if (model.isNew() && model.get('type') === sectionTypes.GAMES) {\n      if (!subscription) {\n        return ['subscriptionRequired'];\n      } else if (model.get('downloadMedia')) {\n        // Short-circuit validation when creating a new section and the section\n        // does not rely on a location for its media.\n        return [];\n      }\n    }\n\n    const invalidAttrs = [];\n\n    if (!model.get('locations').length) {\n      invalidAttrs.push('locations');\n    }\n\n    return invalidAttrs;\n  },\n\n  renderSectionLocation: function () {\n    const view = new EditSectionPathsListView({\n      collection: this.model.get('locations'),\n    });\n    this.pathsRegion.show(view);\n  },\n\n  //\n  // Control\n\n  onCollectionChange: function () {\n    this.showValidationResult(this.validate(this.model));\n  },\n\n  onAddFolderClick: function (event: any) {\n    event.preventDefault();\n\n    const addFolderModal = new AddFolderModal({ server: this.model.server });\n\n    this.listenToOnce(addFolderModal, 'add:folder', this.onAddFolder);\n\n    dispatcher.trigger('show:modal', addFolderModal);\n  },\n\n  onAddFolder: function (folderPath: any) {\n    // Don't add empty paths\n    if (!folderPath) {\n      return;\n    }\n\n    const attrs = { path: folderPath };\n\n    // Don't add duplicate paths\n    if (this.model.get('locations').findWhere(attrs)) {\n      return;\n    }\n\n    this.model.get('locations').add(attrs);\n  },\n\n  onFolderChange: function (event: any) {\n    const $target = $(event.currentTarget);\n    const defaultValue = $target.prop('defaultValue');\n    const value = $target.val();\n\n    // Don't allow an empty path to be set.\n    if (!value) {\n      $target.val(defaultValue);\n      return;\n    }\n\n    const location = this.model\n      .get('locations')\n      .findWhere({ path: defaultValue });\n    location.set('path', value);\n\n    // Update the default value so if the input changes again, we know which\n    // path to replace.\n    $target.prop('defaultValue', value);\n  },\n\n  onDownloadMediaChange: function (event: any) {\n    const $target = $(event.currentTarget);\n\n    if ($target.prop('checked')) {\n      this.model.set('downloadMedia', 1);\n\n      this.trigger('valid');\n    } else {\n      this.model.unset('downloadMedia');\n\n      this.trigger('invalid');\n    }\n  },\n\n  onUserChange: function () {\n    const {\n      hideArcadeGreeting,\n      hideArcadeRequired,\n      hideArcadeUpsell,\n      hideParsecRequired,\n      isDisabled,\n    } = this.serializeData();\n\n    const {\n      addFolderBtn,\n      arcadeDownloadMediaInput,\n      arcadeGreeting,\n      arcadeRequired,\n      arcadeUpsell,\n      parsecRequired,\n    } = this.ui;\n\n    addFolderBtn.prop('disabled', isDisabled);\n    arcadeDownloadMediaInput.prop('disabled', isDisabled);\n\n    arcadeGreeting.toggleClass('hidden', hideArcadeGreeting);\n    arcadeRequired.toggleClass('hidden', hideArcadeRequired);\n    arcadeUpsell.toggleClass('hidden', hideArcadeUpsell);\n    parsecRequired.toggleClass('hidden', hideParsecRequired);\n\n    // Re-run validation to update other pane components such as the `Add\n    // Library` or `Save Changes` button.\n    this.showValidationResult(this.validate(this.model));\n  },\n});\n\nexport default EditSectionFoldersView;\n","import _ from 'underscore';\nimport * as adapters from 'app/js/adapters/adapters';\nimport BaseModal from 'app/js/views/modals/BaseModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/PlexPassModal.tpl';\n\nconst PlexPassModal = BaseModal.extend({\n  //\n  // Properties\n\n  name: 'plexPassModal',\n  template: tpl,\n\n  //\n  // Control\n\n  serializeData: function () {\n    const appModel = adapters.resolve('appModel');\n    const cloudServer = appModel.get('user').server;\n\n    return {\n      plexPassUrl: cloudServer.get('plexPassUrl'),\n      escapedFriendlyName: _.escape(this.model.get('friendlyName')),\n      isClaimed: this.model.get('isClaimed'),\n    };\n  },\n});\n\nexport default PlexPassModal;\n","import $ from 'jquery';\nimport * as adapters from 'app/js/adapters/adapters';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport EditSectionBaseView from 'app/js/views/editsection/EditSectionBaseView';\nimport PlexPassModal from 'app/js/views/modals/PlexPassModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/secti... Remove this comment to see the full error message\nimport tpl from 'app/templates/section/edit/EditSectionSelectPremiumMusicView.tpl';\n\nconst EditSectionSelectPremiumMusicView = EditSectionBaseView.extend({\n  //\n  // Properties\n\n  template: tpl,\n\n  ui: {\n    chooseLibrary: '.choose-library',\n  },\n\n  events: {\n    'click .choose-library': 'onChooseLibraryClick',\n  },\n\n  modelEvents: {\n    'change:agent': 'onSectionAgentChange',\n    'change:scanner': 'onSectionScannerChange',\n  },\n\n  onlyAfterRender: ['updateSelectedOffering'],\n\n  //\n  // Init\n\n  initialize: function () {\n    this.hasPremiumMusic = this.model.server.hasOwnerFeature(\n      'premium_music_metadata'\n    );\n\n    this.updateSelectedOffering();\n  },\n\n  serializeData: function () {\n    const appModel = adapters.resolve('appModel');\n    const user = appModel.get('user');\n    const data = {\n      hasPremiumMusic: this.hasPremiumMusic,\n      plexPassUrl: user.server.get('plexPassUrl'),\n      hasLyrics: this.model.server.get('transcoderLyrics'),\n    };\n\n    return data;\n  },\n\n  //\n  // Control\n\n  updateSelectedOffering: function () {\n    const agent = this.model.get('agent');\n    const scanner = this.model.get('scanner');\n\n    this.ui.chooseLibrary.find('input').prop('checked', false);\n\n    let selected = this.ui.chooseLibrary\n      .filter('[data-agent=\"' + agent + '\"][data-scanner=\"' + scanner + '\"]')\n      .find('input');\n\n    if (!selected.length) {\n      selected = this.ui.chooseLibrary\n        .not('[data-agent][data-scanner]')\n        .find('input');\n    }\n\n    selected.prop('checked', true);\n  },\n\n  //\n  // Listeners\n\n  onChooseLibraryClick: function (event: any) {\n    const $target = $(event.currentTarget);\n\n    const agent = $target.data('agent');\n    const scanner = $target.data('scanner');\n\n    if ((agent || scanner) && !this.hasPremiumMusic) {\n      dispatcher.trigger(\n        'show:modal',\n        new PlexPassModal({ model: this.model.server })\n      );\n      return;\n    }\n\n    // Reset to null so settings for the new agent are fetched.\n    this.model.agentSettings = null;\n\n    this.model.set({\n      agent: agent || this.getSectionType().defaultAgent,\n      scanner: scanner || this.getSectionType().defaultScanner,\n    });\n  },\n\n  onSectionAgentChange: function () {\n    this.updateSelectedOffering();\n  },\n\n  onSectionScannerChange: function () {\n    this.updateSelectedOffering();\n  },\n});\n\nexport default EditSectionSelectPremiumMusicView;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport formatTimeFromNow from './formatTimeFromNow';\n\nfunction formatTimeAgo(timestamp: any, shorthand: any) {\n  return formatTimeFromNow(timestamp, { limit: 'past' }, shorthand);\n}\n\nexport default formatTimeAgo;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport addSeconds from 'date-fns/addSeconds';\nimport fromUnixTime from 'date-fns/fromUnixTime';\nimport getUnixTime from 'date-fns/getUnixTime';\nimport relativeTime from 'app/js/utils/dateTime/relativeTime';\n\nexport default function formatTimeFromNow(\n  timestamp: any,\n  { limit }: any = {},\n  shorthand = false\n) {\n  if (!timestamp) {\n    return '';\n  }\n\n  const now = new Date();\n\n  // Round to eliminate floating point timestamps occurring when callers pass in\n  // a unix time with a decimal.\n  timestamp = Math.round(timestamp);\n\n  if (limit === 'past') {\n    timestamp = Math.min(timestamp, getUnixTime(now));\n  } else if (limit === 'future') {\n    timestamp = Math.max(timestamp, getUnixTime(addSeconds(now, 1)));\n  }\n\n  const then = fromUnixTime(timestamp);\n  const duration = then.getTime() - now.getTime();\n\n  let isFuture;\n\n  if (limit === 'future') {\n    isFuture = true;\n  } else if (limit === 'past') {\n    isFuture = false;\n  } else {\n    isFuture = duration > 0;\n  }\n\n  return relativeTime({\n    milliseconds: duration,\n    isShorthand: shorthand,\n    isFuture,\n  });\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport t from 'app/js/utils/t';\n\nexport default function relativeTime({\n  milliseconds,\n  isShorthand,\n  isFuture,\n}: any) {\n  let seconds = Math.abs(milliseconds) / 1000;\n  if (seconds) {\n    seconds = seconds < 1 ? 1 : Math.round(seconds);\n  }\n\n  const minutes = Math.round(seconds / 60);\n  const hours = Math.round(minutes / 60);\n  const days = Math.round(hours / 24);\n  const months = Math.round(days / 30);\n  const years = Math.round(days / 365);\n\n  const time = {\n    seconds,\n    minutes,\n    hours,\n    days,\n    months,\n    years,\n  };\n\n  const tokens = {\n    unitOfTime:\n      (seconds <= 44 &&\n        (isShorthand ? t('{seconds}s', time) : t('a few seconds', time))) ||\n      (seconds < 45 &&\n        (isShorthand ? t('{seconds}s', time) : t('{seconds} seconds', time))) ||\n      (minutes <= 1 &&\n        (isShorthand ? t('{minutes}m', time) : t('a minute', time))) ||\n      (minutes < 45 &&\n        (isShorthand ? t('{minutes}m', time) : t('{minutes} minutes', time))) ||\n      (hours <= 1 &&\n        (isShorthand ? t('{hours}h', time) : t('an hour', time))) ||\n      (hours < 22 &&\n        (isShorthand ? t('{hours}h', time) : t('{hours} hours', time))) ||\n      (days <= 1 && (isShorthand ? t('{days}d', time) : t('a day', time))) ||\n      (days < 26 &&\n        (isShorthand ? t('{days}d', time) : t('{days} days', time))) ||\n      (months <= 1 &&\n        (isShorthand ? t('{months}mo', time) : t('a month', time))) ||\n      (months < 11 &&\n        (isShorthand ? t('{months}mo', time) : t('{months} months', time))) ||\n      (years <= 1 && (isShorthand ? t('{years}y', time) : t('a year', time))) ||\n      (isShorthand ? t('{years}y', time) : t('{years} years', time)),\n  };\n  /* eslint-enable no-multi-spaces */\n\n  return isFuture\n    ? t('in {unitOfTime}', tokens)\n    : t('{unitOfTime} ago', tokens);\n}\n","import { FunctionComponent } from 'react';\nimport {\n  IconBook,\n  IconCamera,\n  IconGames,\n  IconMovie,\n  IconMusic,\n  IconProps,\n  IconTv,\n  IconVideo,\n} from '@plex/react-chroma-icon';\nimport {\n  AUTHOR,\n  GAMES,\n  MOVIES,\n  MUSIC,\n  PHOTOS,\n  TV,\n  VIDEOS,\n} from 'app/js/utils/types/sectionTypes';\n\nfunction getSectionTypeIcon(\n  typeKey: string\n): FunctionComponent<IconProps> | undefined {\n  switch (typeKey) {\n    case MOVIES:\n      return IconMovie;\n    case MUSIC:\n      return IconMusic;\n    case PHOTOS:\n      return IconCamera;\n    case TV:\n      return IconTv;\n    case VIDEOS:\n      return IconVideo;\n    case GAMES:\n      return IconGames;\n    case AUTHOR:\n      return IconBook;\n  }\n\n  return undefined;\n}\n\nexport default getSectionTypeIcon;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport * as adapters from 'app/js/adapters/adapters';\nimport * as features from 'app/js/utils/constants/user/features';\nimport formatTimeAgo from 'app/js/utils/dateTime/formatTimeAgo';\nimport renderComponentToString from 'app/js/utils/renderComponentToString';\nimport sectionTypes, { AUTHOR, GAMES } from 'app/js/utils/types/sectionTypes';\nimport EditSectionBaseView from 'app/js/views/editsection/EditSectionBaseView';\nimport getSectionTypeIcon from 'app/js/views/v3/components/core/icons/getSectionTypeIcon';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/secti... Remove this comment to see the full error message\nimport tpl from 'app/templates/section/edit/EditSectionTypeView.tpl';\n\nfunction isTypeSupportedByServer(sectionType: any, server: any) {\n  if (sectionType?.key === GAMES) {\n    return server.get('games');\n  } else if (sectionType?.key === AUTHOR) {\n    return server.get('audiobook');\n  }\n  return true;\n}\nconst EditSectionTypeView = EditSectionBaseView.extend({\n  //\n  // Properties\n  template: tpl,\n  ui: _.extend(\n    {\n      sectionTypes: '.wizard-block',\n      sectionTitle: '#edit-section-title',\n      sectionLanguage: '#edit-section-language',\n      sectionLanguageGroup: '.language-group',\n    },\n    EditSectionBaseView.prototype.ui\n  ),\n  modelEvents: {\n    'change:type': 'onSectionTypeChange',\n    'change:title': 'onSectionTitleChange',\n    'change:language': 'onSectionLanguageChange',\n  },\n  events: {\n    'click .section-type': 'onSectionTypeClick',\n    'keyup #edit-section-title': 'onEditSectionTitleChange',\n    'change #edit-section-title': 'onEditSectionTitleChange',\n    'change #edit-section-language': 'onEditSectionLanguageChange',\n  },\n  onlyAfterRender: [\n    'renderSectionLanguage',\n    'updateSectionTypesWizardBlocks',\n    'updateSectionLanguage',\n    'updateSectionTitle',\n  ].concat(EditSectionBaseView.prototype.onlyAfterRender),\n  //\n  // Init\n  initialize: function (options: any) {\n    this.populateCollections();\n    this.isDefaultSection = options.isDefaultSection;\n  },\n  //\n  // Control\n  serializeData: function () {\n    const data = EditSectionBaseView.prototype.serializeData.apply(\n      this,\n      // eslint-disable-next-line prefer-rest-params\n      arguments\n    );\n    const appModel = adapters.resolve('appModel');\n    const user = appModel.get('user');\n    const hasGamesFeatureFlags =\n      user.get('features').get(features.RETRO_GAMES) &&\n      this.model.server.hasOwnerFeature(features.RETRO_GAMES);\n    const hasAudiobooksFeatureFlag = user\n      .get('features')\n      .get(features.AUDIOBOOKS_CLIENT);\n\n    // The Games section is displayed when the user and server owner have the\n    // RETRO_GAMES feature flag. The flag is used as a version gate to identify\n    // client and server versions which support complete games functionality.\n    //\n    // Later the section type is only allowed to be created if the server's\n    // platform supports running the game transcoder.\n    data.sectionTypes = sectionTypes.getAll().reduce((acc: any, type: any) => {\n      if (\n        // If type is neither games nor author.\n        (type.key !== GAMES && type.key !== AUTHOR) ||\n        // Or type is game or audiobook with the necessary feature flag.\n        (type.key === GAMES && hasGamesFeatureFlags) ||\n        (type.key === AUTHOR && hasAudiobooksFeatureFlag)\n      ) {\n        acc.push({\n          ...type,\n          typeIcon: renderComponentToString(getSectionTypeIcon(type.key)),\n        });\n      }\n      return acc;\n    }, []);\n    const currentSectionType = this.getSectionType();\n    if (currentSectionType) {\n      data.currentSectionKey = currentSectionType.key;\n    }\n    const updatedAt = this.model.get('updatedAt');\n    if (updatedAt) {\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n      data.updatedAt = formatTimeAgo(updatedAt);\n    }\n    data.canChangeType = this.model.isNew() && !this.isDefaultSection;\n    data.hasType = !!this.model.get('type');\n    data.isInitialTypeSupported = isTypeSupportedByServer(\n      this.model.sectionType,\n      this.model.server\n    );\n    data.escapedUpdatedAt = _.escape(data.updatedAt);\n    return data;\n  },\n  validate: function (model: any) {\n    const invalidAttrs = [];\n    if (!model.get('type')) {\n      invalidAttrs.push('type');\n    }\n    if (!model.get('title')) {\n      invalidAttrs.push('title');\n    }\n    if (!model.get('language')) {\n      invalidAttrs.push('language');\n    }\n    if (!model.get('isCollectionsPopulated')) {\n      invalidAttrs.push('collectionsNotPopulated');\n    }\n    if (!isTypeSupportedByServer(model.sectionType, model.server)) {\n      invalidAttrs.push('unsupportedType');\n    }\n    return invalidAttrs;\n  },\n  populateCollections: function () {\n    this.model.set('isCollectionsPopulated', false);\n    const populateAgents = this.populateAgents();\n    const populateScanners = this.populateScanners();\n    const sectionType = this.getSectionType();\n    let promise = $.when(\n      sectionType,\n      populateAgents,\n      populateScanners,\n      this.model.server.get('myPlexSubscription') &&\n        this.model.server.supports('premiumMusic')\n    );\n    if (this.model.isNew()) {\n      promise = promise.then(_.bind(this.model.setAgentAndScanner, this.model));\n    }\n    promise = promise\n      .then(populateAgents)\n      .then(_.bind(this.onAgentsPopulate, this))\n      .then(\n        _.bind(function () {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.showValidationResult(this.validate(this.model));\n        }, this)\n      )\n      .then(() => {\n        // This synced attribute is provided by clients only during creation of\n        // games sections.\n        if (this.model.isNew() && this.model.get('type') === GAMES) {\n          this.model.set('downloadMedia', 1);\n        } else {\n          this.model.unset('downloadMedia');\n        }\n        this.model.set('isCollectionsPopulated', true);\n      });\n    return promise;\n  },\n  renderSectionLanguage: function () {\n    let currentLanguage = this.model.get('language');\n    const agent = this.model.agents.get(this.model.get('agent'));\n    if (!agent) {\n      this.ui.sectionLanguageGroup.hide();\n      return;\n    }\n    const agentLanguages = agent.get('languages');\n    if (!agentLanguages.get(currentLanguage)) {\n      const defaultServerLanguage = agentLanguages.findWhere({ default: true });\n      let defaultLanguage;\n      if (defaultServerLanguage) {\n        defaultLanguage = defaultServerLanguage.get('code');\n      }\n      if (!defaultLanguage) {\n        const type = this.model.get('type');\n        const sectionType = sectionTypes.get(type);\n        defaultLanguage = sectionType.defaultLanguage;\n      }\n      this.model.set('language', defaultLanguage, { silent: true });\n      currentLanguage = defaultLanguage;\n    }\n    const options = agentLanguages.map(function (language: any) {\n      return {\n        label: language.get('name'),\n        value: language.id,\n      };\n    });\n    this.updateSectionLanguage();\n    this.ui.sectionLanguage.html(\n      this.createMenuOptions(options, currentLanguage)\n    );\n  },\n  updateSectionTypesWizardBlocks: function () {\n    this.ui.sectionTypes.removeClass('selected');\n    this.ui.sectionTypes\n      .filter('[data-key=\"' + this.model.get('type') + '\"]')\n      .addClass('selected');\n    this.$el.addClass('section-type-chosen');\n  },\n  updateSectionLanguage: function () {\n    this.ui.sectionLanguage.val(this.model.get('language'));\n  },\n  updateSectionTitle: function () {\n    const uiVal = this.ui.sectionTitle.val();\n    const currentVal = this.model.get('title');\n    if (uiVal !== currentVal) {\n      this.ui.sectionTitle.val(currentVal);\n    }\n  },\n  //\n  // Listeners\n  onSectionTypeClick: function (event: any) {\n    event.preventDefault();\n    const $target = $(event.currentTarget);\n    if (!$target.hasClass('selectable')) {\n      return;\n    }\n    const sectionKey = $target.data('key');\n    const attrs = { type: sectionKey };\n    const sectionType = sectionTypes.get(sectionKey);\n    if (!this.model.get('title')) {\n      (attrs as any).title = sectionType.title;\n    }\n    this.model.set(attrs);\n  },\n  onEditSectionTitleChange: function (event: any) {\n    const $target = $(event.currentTarget);\n    this.model.set('title', $target.val());\n    this.showValidationResult(this.validate(this.model));\n  },\n  onEditSectionLanguageChange: function (event: any) {\n    const $target = $(event.currentTarget);\n    this.model.set('language', $target.val());\n    this.showValidationResult(this.validate(this.model));\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'section' is declared but its value is never read.\n  onSectionTypeChange: function (section: any, sectionKey: any) {\n    this.updateSectionTypesWizardBlocks();\n    // Get initial language\n    const sectionType = sectionTypes.get(sectionKey);\n    if (!this.model.get('language')) {\n      const defaultLanguage = sectionType.defaultLanguage;\n      this.model.set('language', defaultLanguage);\n    }\n    // Section title tracks section type name\n    const title = this.model.get('title');\n    const previousSectionKey = this.model.previous('type');\n    const previousSectionType = sectionTypes.get(previousSectionKey);\n    const previousTitle = previousSectionType && previousSectionType.title;\n    if (!title || title === previousTitle) {\n      this.model.set('title', sectionType.title);\n    }\n    this.setSectionType(sectionType);\n    // Clear section-specific collections\n    this.model.agents = null;\n    this.model.scanners = null;\n    this.model.settings = null;\n    // The server only exposes the games FF on systems which can run games. For,\n    // example Linux-based PMS cannot run games.\n    const isSupported = isTypeSupportedByServer(sectionType, this.model.server);\n    this.$el.toggleClass('is-type-unsupported', !isSupported);\n    if (isSupported) {\n      this.populateCollections();\n    }\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'section' is declared but its value is never read.\n  onSectionTitleChange: function (section: any, title: any) {\n    this.updateSectionTitle();\n    this.showValidationResult(this.validate(this.model));\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'section' is declared but its value is never read.\n  onSectionLanguageChange: function (section: any, language: any) {\n    this.updateSectionLanguage();\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'agents' is declared but its value is never read.\n  onAgentsPopulate: function (agents: any) {\n    this.renderSectionLanguage();\n  },\n});\nexport default EditSectionTypeView;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport paneModalMixin from 'app/js/mixins/views/modals/paneModalMixin';\nimport SectionModel from 'app/js/models/library/section/SectionModel';\nimport serverFeatures from 'app/js/models/server/serverFeatures';\nimport {\n  fetchLibraries,\n  fetchProviders,\n} from 'app/js/stores/actions/serverActions';\nimport { pinSources } from 'app/js/stores/actions/userActions';\nimport * as agentIdentifiers from 'app/js/utils/constants/agentIdentifiers';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport isVersionOrNewer from 'app/js/utils/isVersionOrNewer';\nimport parser from 'app/js/utils/parser';\nimport createLibraryPivotKey from 'app/js/utils/provider/createLibraryPivotKey';\nimport getSourceKey from 'app/js/utils/source/getSourceKey';\nimport t, { tEscape } from 'app/js/utils/t';\nimport getSourceTypeForDirectory from 'app/js/utils/types/getSourceTypeForDirectory';\nimport {\n  ALBUM,\n  ARTIST,\n  getMetadataType,\n} from 'app/js/utils/types/metadataTypes';\nimport sectionTypes from 'app/js/utils/types/sectionTypes';\nimport path from 'app/js/utils/url/path';\nimport EditSectionAdvancedView from 'app/js/views/editsection/EditSectionAdvancedView';\nimport EditSectionErrorView from 'app/js/views/editsection/EditSectionErrorView';\nimport EditSectionFoldersView from 'app/js/views/editsection/EditSectionFoldersView';\nimport EditSectionSelectPremiumMusicView from 'app/js/views/editsection/EditSectionSelectPremiumMusicView';\nimport EditSectionTypeView from 'app/js/views/editsection/EditSectionTypeView';\nimport BaseModal from 'app/js/views/modals/BaseModal';\nimport LibraryFailureModal from 'app/js/views/modals/LibraryFailureModal';\nimport getSourceRoute from 'app/js/views/v3/helpers/routes/getSourceRoute';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/EditSectionModal.tpl';\n\nconst EditSectionModal = BaseModal.extend({\n  mixins: [paneModalMixin],\n  //\n  // Properties\n  name: 'editSectionModal',\n  className: 'edit-section-modal modal modal-lg fade',\n  template: tpl,\n  panes: {\n    type: {\n      constructor: EditSectionTypeView,\n      nextPane: 'folders',\n      dependentPanes() {\n        return (this as any).showFolders\n          ? ['folders']\n          : ['options', 'advanced'];\n      },\n    },\n    folders: {\n      constructor: EditSectionFoldersView,\n      nextPane: 'options',\n      dependentPanes: ['options', 'advanced'],\n    },\n    options: {\n      constructor: EditSectionSelectPremiumMusicView,\n      nextPane: 'advanced',\n    },\n    advanced: {\n      constructor: EditSectionAdvancedView,\n    },\n    error: {\n      constructor: EditSectionErrorView,\n    },\n  },\n  panesModel: 'tempModel',\n  ui: {\n    sidebar: '.modal-nav-list',\n    optionsBtn: '.options-btn',\n    saveBtn: '.save-btn',\n    message: '.form-message',\n    headerSectionType: '.section-type-title',\n  },\n  regions: {\n    paneRegion: '.pane-region',\n  },\n  events: _.extend(\n    {\n      'click .change-pane-btn': 'onChangePaneClick',\n      'click .save-btn': 'onSaveClick',\n      'submit .edit-section-type-form': 'onGeneralFormSubmit',\n    },\n    BaseModal.prototype.events\n  ),\n  onlyAfterRender: [\n    'showPane',\n    'updateMessage',\n    'updateSectionTitle',\n    'updateSectionTitleDestabilized',\n    'updateSaveBtn',\n  ],\n  paneConstructorArg: function () {\n    return { isDefaultSection: this.isDefaultSection };\n  },\n  //\n  // Init\n  initialize: function (options: any) {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.initialize.apply(this, arguments);\n    this.server = options.server;\n    this.redirect = options.redirect;\n    this.isDefaultSection = options.isDefaultSection;\n    this.isLoading = true;\n    // Keep any changes on a clone of the model until we're ready to save.\n    if (this.model) {\n      this.tempModel = this.model.clone();\n      this.tempModel.collection = this.model.collection;\n    } else {\n      this.tempModel = new SectionModel(\n        {},\n        {\n          server: this.server,\n          collection: this.server.get('sections'),\n        }\n      );\n    }\n    this.listenTo(this.tempModel, 'change:type', this.onSectionTypeChange);\n    // Set attributes after we show the pane, so any type change listeners\n    // are set up already.\n    if (this.tempModel.isNew() && options.seedAttrs) {\n      this.tempModel.set(this.tempModel.parse(options.seedAttrs));\n    }\n    this._deferred = $.Deferred();\n    this.promise = this._deferred.promise();\n    const providers = this.server.get('providers');\n    providers.populate().done(\n      this.whenRendered(() => {\n        const libraryProvider = providers.get(providerIdentifiers.LIBRARY);\n        const manageFeature = libraryProvider\n          .get('features')\n          .get(providerFeatureTypes.MANAGE);\n        const automaticLibraryFolders = manageFeature.get(\n          'automaticLibraryFolders'\n        );\n        this.showFolders = !automaticLibraryFolders;\n        this.isLoading = false;\n        this.render();\n        this.showPane(options.selectedPane || 'type');\n      })\n    );\n  },\n  //\n  // Control\n  serializeData: function () {\n    const model = this.tempModel;\n    const isNew = model.isNew();\n    const paneTitle = model && tEscape('Edit {1}', model.get('title'));\n    const data = {\n      isLoading: this.isLoading,\n      add: isNew,\n      edit: !isNew,\n      paneTitle,\n      section: model?.toJSON(),\n      selectedPane: this.selectedPane,\n      showFolders: this.showFolders,\n    };\n    return data;\n  },\n  updateMessage: function (text: any) {\n    this.ui.message.text(text || '');\n  },\n  updateSaveBtn: function () {\n    const saveBtn = this.ui.saveBtn;\n    const selectedPane = this.panes[this.selectedPane];\n    const updateSaveBtn = _.bind(function (options: any) {\n      const nextPane = selectedPane.nextPane;\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      const isNew = this.tempModel.isNew();\n      const isSelectedPaneValid =\n        !selectedPane.constructor.prototype.validate ||\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        selectedPane.constructor.prototype.validate(this.tempModel).length ===\n          0;\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      const isEveryPaneValid = !this.getReachablePanes().isAnyInvalid;\n      // Although the EditSectionTypeView pane validates isCollectionsPopulated,\n      // we still need that validation when on other panes.\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      const isModelPopulated = this.tempModel.get('isCollectionsPopulated');\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      this.ui.optionsBtn.toggleClass('hidden', !options.showOptions);\n      let isNextBtn;\n      const isEnabled =\n        isModelPopulated &&\n        (isEveryPaneValid || // if there are no invalid panes\n          (isNew && isSelectedPaneValid)); // the section is new the selected pane is valid\n      isNextBtn = nextPane;\n      if (!options.showOptions && nextPane === 'options') {\n        isNextBtn = false;\n      }\n      if (isEveryPaneValid) {\n        isNextBtn = false;\n      }\n      if (options.showOptions && nextPane === 'options') {\n        isNextBtn = true;\n      }\n      if (options.showAdvanced && nextPane === 'advanced') {\n        isNextBtn = true;\n      }\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      if (this.tempModel.isNew() && nextPane === 'folders') {\n        // Ease restrictions on EditSectionsFoldersView validation. Always\n        // navigate to the folders pane when creating a new section. Editing an\n        // existing section doesn't require selecting a folder.\n        isNextBtn = true;\n      }\n      saveBtn.toggleClass('save', !isNextBtn);\n      saveBtn.toggleClass('next', !!isNextBtn);\n      saveBtn.toggleClass('disabled', !isEnabled);\n    }, this);\n    const server = this.tempModel.server;\n    const sectionType = this.tempModel.sectionType;\n    const isMusic = sectionType && sectionType.key === 'music';\n    const isPremiumMusicCandidate = isMusic && server.supports('premiumMusic');\n    const isNew = this.tempModel.isNew();\n    if (isPremiumMusicCandidate) {\n      // Can only edit or select premium music on an able server at creation\n      this.paneRegion.currentView.populateAgents().then(function (agents: any) {\n        const hasPremiumMusic = agents.findWhere({\n          identifier: agentIdentifiers.PLEXPREMIUMMUSIC,\n        });\n        const canSelectPremiumMusic = isNew && hasPremiumMusic;\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n        updateSaveBtn({\n          showOptions: canSelectPremiumMusic,\n          showAdvanced: canSelectPremiumMusic,\n        });\n      });\n    } else {\n      // No premium option\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n      updateSaveBtn({});\n    }\n  },\n  updateSectionTitle: function () {\n    const sectionType = sectionTypes.get(this.tempModel.get('type'));\n    if (sectionType) {\n      this.updateSectionTitleDestabilized();\n      const html = _.escape(sectionType.title);\n      this.ui.headerSectionType.html(html);\n    }\n  },\n  updateSectionTitleDestabilized: function () {\n    this.ui.headerSectionType.addClass('section-type-title-unstable');\n    this.ui.headerSectionType.triggerReflow();\n    this.ui.headerSectionType.removeClass('section-type-title-unstable');\n  },\n  save: function () {\n    const saveBtn = this.ui.saveBtn;\n    this.updateMessage('');\n    saveBtn.addClass('active');\n    // Save the model\n    const sectionPromise = this.saveModel();\n    // Remove the active style from the button, regardless of outcome\n    sectionPromise.always(function () {\n      saveBtn.removeClass('active');\n    });\n    // Inform the user if something failed\n    sectionPromise.fail(\n      _.bind(function (xhr: any) {\n        if (xhr.status === 503) {\n          dispatcher.trigger(\n            'show:modal',\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            new LibraryFailureModal({ model: this.server })\n          );\n        } else {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.updateMessage(t('Your changes could not be saved.'));\n        }\n      }, this)\n    );\n    // Success! Hide the modal, and maybe navigate to the section\n    sectionPromise.then(\n      _.bind(function () {\n        // Fetch providers so the directories can update.\n        // See: https://github.com/plexinc/plex-web-client/issues/6178\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        const serverEntityID = this.model.server.entityID();\n        const dispatch = resolve('appStore').dispatch;\n        dispatch(fetchProviders({ serverEntityID }));\n        dispatch(fetchLibraries({ serverEntityID }));\n        // If we're not redirecting, just close the modal and be done with it.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        if (!this.redirect) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this._deferred.resolve();\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.hide();\n          return;\n        }\n        // Create server, provider and sourceDirectory that can satisfy our\n        // route builders.\n        const server = {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          machineIdentifier: this.model.server.get('machineIdentifier'),\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          isCloud: this.model.server.get('isCloud'),\n        };\n        const provider = {\n          identifier: providerIdentifiers.LIBRARY,\n          isLibraryProvider: true,\n        };\n        const sourceDirectory = {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          id: this.model.id,\n        };\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        const type = this.model.get('type');\n        const routeParams = {};\n        (routeParams as any).pivot = isVersionOrNewer(\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.model.server.get('version'),\n          serverFeatures.pivotIDs\n        )\n          ? 'library'\n          : // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            createLibraryPivotKey(this.model.id, type);\n        if (type === ARTIST) {\n          (routeParams as any).key = path.join(\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            ['/library/sections', this.model.id, 'all'],\n            {\n              type: getMetadataType(ALBUM).id,\n              sort: 'addedAt:desc',\n            }\n          );\n        }\n        const route = getSourceRoute(\n          server,\n          provider,\n          sourceDirectory,\n          routeParams\n        );\n        // @ts-expect-error ts-migrate(2322) FIXME: Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n        window.location.hash = route;\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this._deferred.resolve();\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.hide();\n      }, this)\n    );\n  },\n  saveModel: function () {\n    const settingsParams = this.getSectionSettingsParams();\n    const saveOptions = settingsParams\n      ? { data: { prefs: settingsParams } }\n      : {};\n    let sectionPromise;\n    if (this.tempModel.isNew()) {\n      sectionPromise = this.tempModel.save(null, saveOptions);\n      sectionPromise = sectionPromise.then(\n        _.bind(function (\n          response: any,\n          // @ts-expect-error ts-migrate(6133) FIXME: 'status' is declared but its value is never read.\n          status: any,\n          xhr: any\n        ) {\n          let json = parser.parseXML(response);\n          // If we just created the section, we'll get back a 201\n          // and need to read the key from the response headers.\n          if (xhr.status !== 201) {\n            return;\n          }\n          // PMS 0.9.7 should return the new section with the response.\n          if (json.Directory) {\n            json = json.Directory;\n          }\n          if (!json.key) {\n            const locationPath = xhr.getResponseHeader('Location');\n            if (locationPath) {\n              json.key = locationPath.substring(\n                locationPath.lastIndexOf('/') + 1\n              );\n            }\n          }\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          const server = this.server;\n          if (server.supports('advancedFilters')) {\n            json.filters = true;\n          }\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.model = new SectionModel(json, {\n            parse: true,\n            server,\n          });\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          server.get('sections').add(this.model);\n          const hiddenValue = settingsParams?.hidden;\n          const hiddenInt =\n            typeof hiddenValue === 'string' ? parseInt(hiddenValue, 10) : null;\n          // If the section is not excluded from the home screen, automatically\n          // try to pin it to the sidebar.\n          if (hiddenInt !== 1 && hiddenInt !== 2) {\n            const libraryProvider = server\n              .get('providers')\n              .get(providerIdentifiers.LIBRARY);\n            const sourceTypeObject = libraryProvider\n              ? getSourceTypeForDirectory(\n                  libraryProvider.toJSON(),\n                  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n                  this.model.toJSON()\n                )\n              : null;\n            const sourceType = sourceTypeObject ? sourceTypeObject.key : null;\n            if (libraryProvider && sourceType) {\n              resolve('appStore').dispatch(\n                pinSources({\n                  sources: [\n                    {\n                      key: getSourceKey(\n                        sourceType,\n                        server.get('machineIdentifier'),\n                        libraryProvider.get('identifier'),\n                        json.key\n                      ),\n                      sourceType,\n                      serverEntityID: server.entityID(),\n                      machineIdentifier: server.get('machineIdentifier'),\n                      providerEntityID: libraryProvider.entityID(),\n                      providerIdentifier: libraryProvider.get('identifier'),\n                      providerMetricsIdentifier:\n                        libraryProvider.get('metricsIdentifier'),\n                      directoryID: json.key,\n                      directoryIcon: null,\n                      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n                      title: this.model.get('title'),\n                      serverFriendlyName: server.get('friendlyName'),\n                      serverSourceTitle: server.get('sourceTitle'),\n                      isLocal: server.get('isPrivateConnection'),\n                      isUnavailable: false,\n                      isOutOfDate: false,\n                      isUnclaimedServer: !server.get('isClaimed'),\n                      isFullOwnedServer: server.get('isFullOwnedServer'),\n                      isProviderReady: true,\n                    },\n                  ],\n                  interaction: false,\n                })\n              );\n            }\n          }\n          return xhr;\n        }, this)\n      );\n    } else {\n      this.model.copy(this.tempModel);\n      sectionPromise = this.model.save(null, saveOptions);\n    }\n    sectionPromise = sectionPromise.then(_.bind(this.saveAgentSettings, this));\n    return sectionPromise;\n  },\n  saveSettings: function (params: any) {\n    // We'll save the new settings, but the section\n    // remains the value propagated through the promise.\n    const resolvedPromise = $.Deferred().resolve(this.model).promise();\n    if (!this.server.supports('sectionSettings')) {\n      return resolvedPromise;\n    }\n    if (!params) {\n      return resolvedPromise;\n    }\n    const url = path.join(\n      ['/library/sections/', this.model.id, '/prefs'],\n      params\n    );\n    const xhrOptions = _.extend(this.server.getXHROptions(url), {\n      type: 'PUT',\n    });\n    return $.ajax(xhrOptions)\n      .promise()\n      .then(function () {\n        return resolvedPromise;\n      });\n  },\n  saveAgentSettings: function () {\n    // We'll save the new settings, but the section\n    // remains the value propagated through the promise.\n    const resolvedPromise = $.Deferred().resolve(this.model).promise();\n    // Take settings from the temporary model, since this\n    // is where any changes will have been made.\n    const agentSettings = this.tempModel.agentSettings;\n    if (!this.tempModel.agentSettings) {\n      return resolvedPromise;\n    }\n    const agentSettingsChanges = this.getSettingsChanges(agentSettings);\n    if (_.isEmpty(agentSettingsChanges)) {\n      return resolvedPromise;\n    }\n    const agentSetting = agentSettings.first();\n    const params = agentSetting.getSaveParams(agentSettingsChanges);\n    const urlRoot = _.result(agentSettings, 'url');\n    const url = path.join([urlRoot, '/set'], params);\n    const xhrOptions = agentSetting.server.getXHROptions(url);\n    return $.ajax(xhrOptions)\n      .promise()\n      .then(function () {\n        return resolvedPromise;\n      });\n  },\n  getSectionSettingsParams: function () {\n    // Take settings from the temporary model, since this\n    // is where any changes will have been made.\n    const settings = this.tempModel.settings;\n    if (!settings) {\n      return;\n    }\n    const settingsChanges = this.getSettingsChanges(settings);\n    if (_.isEmpty(settingsChanges)) {\n      return;\n    }\n    const setting = settings.first();\n    return setting.getSaveParams(settingsChanges);\n  },\n  getSettingsChanges: function (settings: any) {\n    const settingsChanges = settings\n      // Only consider settings that have changed\n      .filter(\n        function (setting: any) {\n          return setting.changedAttributes();\n        }\n        // Transform to hash of params\n      )\n      .reduce(\n        function (acc: any, setting: any) {\n          let value = setting.get('value');\n          // Transform bools to 0/1 param values\n          if (setting.get('type') === 'bool') {\n            value = value ? '1' : '0';\n          }\n          // Populate the params for this setting's key\n          // with it's corresponding value.\n          acc[setting.get('id')] = value;\n          return acc;\n        },\n        // Initially empty params hash\n        {}\n      );\n    return settingsChanges;\n  },\n  //\n  // Listeners\n  // @ts-expect-error ts-migrate(6133) FIXME: 'paneName' is declared but its value is never read... Remove this comment to see the full error message\n  onPaneShow: function (paneName: any, view: any) {\n    this.listenTo(view, 'valid', this.updateSaveBtn);\n    this.listenTo(view, 'invalid', this.updateSaveBtn);\n    this.updateSaveBtn();\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'paneName' is declared but its value is never read... Remove this comment to see the full error message\n  onPaneHide: function (paneName: any, view: any) {\n    this.stopListening(view, 'valid', this.updateSaveBtn);\n    this.stopListening(view, 'invalid', this.updateSaveBtn);\n  },\n  onChangePaneClick: function (event: any) {\n    event.preventDefault();\n    const $target = this.$(event.currentTarget);\n    if ($target.isDisabled()) {\n      return;\n    }\n    this.showPane($target.data('pane'));\n  },\n  onSaveClick: function (event: any) {\n    event.preventDefault();\n    const saveBtn = this.ui.saveBtn;\n    if (saveBtn.isDisabled()) {\n      return;\n    }\n    if (saveBtn.hasClass('next')) {\n      let nextPane = this.panes[this.selectedPane].nextPane;\n      if (nextPane === 'folders' && !this.showFolders) {\n        nextPane = this.ui.sidebar.find('.options-btn').isDisabled()\n          ? 'advanced'\n          : 'options';\n      }\n      if (\n        nextPane &&\n        !this.ui.sidebar.find('.' + nextPane + '-btn').isDisabled()\n      ) {\n        this.showPane(nextPane);\n      }\n    } else {\n      this.save();\n    }\n  },\n  onGeneralFormSubmit: function (event: any) {\n    this.onSaveClick(event);\n  },\n  onSectionTypeChange: function () {\n    this.updateSaveBtn();\n  },\n});\nexport default EditSectionModal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport { MY_PLEX_SIGN_IN_STATE_OK } from 'app/js/models/server/ServerModel';\nimport BaseModal from 'app/js/views/modals/BaseModal';\nimport getServerSettingsRoute from 'app/js/views/v3/helpers/routes/getServerSettingsRoute';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/LibraryFailureModal.tpl';\n\nconst LibraryFailureModal = BaseModal.extend({\n  //\n  // Properties\n\n  name: 'libraryFailureModal',\n  className: 'confirm-modal modal modal-sm fade',\n  template: tpl,\n\n  events: _.extend(\n    {\n      'click .confirm-btn': 'hide',\n    },\n    BaseModal.prototype.events\n  ),\n\n  //\n  // Control\n\n  serializeData() {\n    return {\n      isSignedIn:\n        this.model.get('myPlexSigninState') === MY_PLEX_SIGN_IN_STATE_OK,\n      hasPlexSubscription: this.model.get('myPlexSubscription'),\n      serverSettingsRoute: getServerSettingsRoute('settings', 'general'),\n    };\n  },\n});\n\nexport default LibraryFailureModal;\n","import _ from 'underscore';\nimport BaseModel from 'app/js/models/BaseModel';\nimport parser from 'app/js/utils/parser';\n\nconst VersionClientProfileModel = BaseModel.extend({\n  //\n  // Properties\n\n  idAttribute: 'title',\n\n  whitelistedAttrs: ['title', 'selected'],\n\n  //\n  // Control\n\n  convert: function (xml: any) {\n    const json = _.isObject(xml) ? xml : parser.parseXML(xml);\n\n    parser.parseBoolean(json, 'selected');\n\n    return json;\n  },\n\n  parse: function (response: any) {\n    let json = this.convert(response);\n\n    json = _.pick(json, this.whitelistedAttrs);\n\n    return json;\n  },\n});\n\nexport default VersionClientProfileModel;\n","import BaseCollection from 'app/js/models/BaseCollection';\nimport VersionClientProfileModel from 'app/js/models/library/convert/VersionClientProfileModel';\nimport proxyTypes from 'app/js/utils/constants/proxyTypes';\n\nconst VersionClientProfileCollection = BaseCollection.extend({\n  //\n  // Properties\n\n  model: VersionClientProfileModel,\n  url: '/clients/profiles?type=' + proxyTypes.LOCAL,\n\n  //\n  // Control\n\n  parse: function (response: any) {\n    return this.convert(response, 'Profile');\n  },\n});\n\nexport default VersionClientProfileCollection;\n","import _ from 'underscore';\nimport BaseModel from 'app/js/models/BaseModel';\nimport parser from 'app/js/utils/parser';\n\nconst VersionTargetModel = BaseModel.extend({\n  //\n  // Properties\n\n  name: 'VersionTargetModel',\n\n  whitelistedAttrs: ['id', 'tag', 'tagType', 'MediaSettings', 'Device'],\n\n  //\n  // Control\n\n  convert: function (xml: any) {\n    const json = _.isObject(xml) ? xml : parser.parseXML(xml);\n\n    parser.parseInteger(json, 'id');\n\n    return json;\n  },\n\n  parse: function (response: any) {\n    let json = this.convert(response);\n\n    json = _.pick(json, this.whitelistedAttrs);\n\n    return json;\n  },\n});\n\nexport default VersionTargetModel;\n","import BaseCollection from 'app/js/models/BaseCollection';\nimport VersionTargetModel from 'app/js/models/library/convert/VersionTargetModel';\nimport proxyTypes from 'app/js/utils/constants/proxyTypes';\n\nconst VersionTargetCollection = BaseCollection.extend({\n  //\n  // Properties\n\n  model: VersionTargetModel,\n  url: '/library/tags?type=' + proxyTypes.LOCAL,\n\n  comparator: function (target: any) {\n    return target.get('MediaSettings').maxVideoBitrate;\n  },\n\n  //\n  // Control\n\n  parse: function (response: any) {\n    return this.convert(response, 'Tag');\n  },\n});\n\nexport default VersionTargetCollection;\n","import Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/convert/ConvertErrorView.tpl';\n\nconst ConvertErrorView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  className: 'modal-body',\n  template: tpl,\n\n  events: {\n    'click .try-again-link': 'onTryAgainClick',\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    return {\n      status: this.options.status,\n    };\n  },\n\n  //\n  // Listeners\n\n  onTryAgainClick: function (event: any) {\n    event.preventDefault();\n\n    this.triggerMethod('request:state', 'loading');\n  },\n});\n\nexport default ConvertErrorView;\n","import Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/convert/ConvertFormLocationView.tpl';\n\nconst ConvertFormLocationView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  className: 'convert-location-container form-group',\n  template: tpl,\n\n  events: {\n    'change select[name=storageLocation]': 'onLocationChange',\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    return {\n      disableLocation: !this.model.isNew(),\n      selectedLocationID: this.model.get('locationID'),\n      locations: this.model.section?.get('locations').toJSON(),\n    };\n  },\n\n  //\n  // Listeners\n\n  onLocationChange: function (event: any) {\n    this.model.set('locationID', parseInt(event.currentTarget.value, 10));\n  },\n});\n\nexport default ConvertFormLocationView;\n","import _ from 'underscore';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport { VIDEO } from 'app/js/utils/types/mediaTypes';\nimport { getLeafType, getMetadataType } from 'app/js/utils/types/metadataTypes';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/convert/ConvertFormPolicyView.tpl';\n\nconst ConvertFormPolicyView = Marionette.ItemView.extend({\n  //\n  // Properties\n  className: 'convert-policy-container',\n  template: tpl,\n  ui: {\n    policyUnwatchedInput: '#convert-policy-unwatched',\n    policyScopeInput: '#convert-policy-scope',\n    policyValueInput: '#convert-policy-value',\n    policyWarning: '.convert-warning',\n  },\n  events: {\n    'change input[name=policyUnwatched]': 'onPolicyUnwatchedChange',\n    'change input[name=policyScope]': 'onPolicyScopeChange',\n    'keyup input[name=policyValue]': 'onPolicyValueChange',\n    'change input[name=policyValue]': 'onPolicyValueChange',\n  },\n  //\n  // Init\n  initialize: function () {\n    // Only sync items have a `metadataType`, but we can assume all version\n    // generators are videos.\n    this.type = getMetadataType(this.model.get('metadataType') || 'movie');\n    this.leafMediaType = getLeafType(this.type.typeString).mediaType;\n    this.model.setPolicyDefaultsFor(this.leafMediaType);\n  },\n  //\n  // Control\n  serializeData: function () {\n    const data = {\n      isSync: this.options.isSync,\n      isDirectory: this.model.get('isDirectory'),\n      policy: this.model.get('policy').toJSON(),\n    };\n    (data as any).showLimitWarning = this.model.shouldShowPolicyWarning(\n      this.leafMediaType,\n      data.policy.value\n    );\n    (data as any).showUnwatched =\n      data.isDirectory && this.leafMediaType === VIDEO;\n    return data;\n  },\n  updatePolicyValue: function () {\n    const policy = this.model.get('policy');\n    let policyValue = Math.abs(parseInt(this.ui.policyValueInput.val(), 10));\n    // Write the value back after parsing so the input is accurate.\n    this.ui.policyValueInput.val(_.isNaN(policyValue) ? '' : policyValue);\n    if (_.isNaN(policyValue)) {\n      policyValue = 0;\n    }\n    // A policy with a scope of \"all\" should not have a value.\n    policy.set('value', policy.scope === 'all' ? null : policyValue);\n    const showWarning = this.model.shouldShowPolicyWarning(\n      this.leafMediaType,\n      policyValue\n    );\n    this.ui.policyWarning.toggleClass('hidden', !showWarning);\n  },\n  //\n  // Listeners\n  onPolicyUnwatchedChange: function () {\n    const policy = this.model.get('policy');\n    policy.set('unwatched', this.ui.policyUnwatchedInput.prop('checked'));\n  },\n  onPolicyScopeChange: function () {\n    const policy = this.model.get('policy');\n    const scope = this.ui.policyScopeInput.prop('checked')\n      ? this.ui.policyScopeInput.val()\n      : 'all';\n    policy.set('scope', scope);\n    // The value will reset depending on the scope.\n    this.updatePolicyValue();\n  },\n  onPolicyValueChange: function () {\n    this.updatePolicyValue();\n  },\n});\nexport default ConvertFormPolicyView;\n","import _ from 'underscore';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport { LOWEST_VIDEO_QUALITY_INDEX } from 'app/js/utils/constants/convert/conversionQualities';\nimport videoPlayerQualities from 'app/js/utils/player/videoPlayerQualities';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/convert/ConvertFormTargetView.tpl';\n\nconst ConvertFormTargetView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  className: 'convert-target-container form-group',\n  template: tpl,\n\n  ui: {\n    targetTitleInput: '.convert-target-title',\n  },\n\n  events: {\n    'change select[name=target]': 'onTargetChange',\n    'keydown input[name=targetTitle]': 'onTitleKeyDown',\n    'change input[name=targetTitle]': 'onTitleChange',\n    'change select[name=targetProfile]': 'onProfileChange',\n    'change select[name=targetQuality]': 'onQualityChange',\n  },\n\n  //\n  // Init\n\n  initialize: function (options: any) {\n    this.targets = options.targets;\n    this.profiles = options.profiles;\n\n    const profile = this.model.get('Device').profile;\n    if (profile) {\n      this.selectedProfile = this.profiles.get(profile);\n    } else {\n      this.selectedProfile = this.profiles.findWhere({ selected: true });\n    }\n\n    this.availableCustomQualities = videoPlayerQualities\n      .getAvailableQualities({\n        lowestQualityIndex: LOWEST_VIDEO_QUALITY_INDEX,\n      })\n      .reverse();\n\n    const maxVideoBitrate = this.model\n      .get('mediaSettings')\n      .get('maxVideoBitrate');\n    if (maxVideoBitrate) {\n      const nearestIndex =\n        videoPlayerQualities.getNearestIndexToBitrate(maxVideoBitrate);\n      this.selectedCustomQuality =\n        videoPlayerQualities.getQualityByIndex(nearestIndex);\n    } else {\n      this.selectedCustomQuality = _.first(this.availableCustomQualities);\n    }\n\n    if (!this.model.isNew() && !this.model.get('targetTagID')) {\n      this.$el.addClass('show-custom-target');\n    }\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    return {\n      item: this.model.toJSON(),\n      targets: this.targets.toJSON(),\n      disableTarget: !this.model.isNew(),\n      profiles: this.profiles.toJSON(),\n      selectedProfile: this.selectedProfile.toJSON(),\n      availableCustomQualities: this.availableCustomQualities,\n      selectedCustomQuality: this.selectedCustomQuality,\n    };\n  },\n\n  updateDeviceProfile: function () {\n    const device = this.model.get('Device');\n    device.profile = this.selectedProfile.get('title');\n  },\n\n  updateMediaSettings: function (quality: any) {\n    const mediaSettings = this.model.get('mediaSettings');\n\n    mediaSettings.set({\n      videoQuality: quality.videoQuality,\n      videoResolution: quality.videoResolution,\n      maxVideoBitrate: quality.bitrate,\n    });\n  },\n\n  //\n  // Listeners\n\n  onTargetChange: function (event: any) {\n    const targetTagID = parseInt(event.currentTarget.value, 10);\n\n    // The Custom target uses a synthetic id of -1.\n    if (targetTagID > -1) {\n      this.model.unset('target');\n\n      // A target provided by the server already has its own set of\n      // MediaSettings and client profile, so empty out any custom settings\n      // that were set.\n\n      this.model.set({\n        targetTagID: targetTagID,\n        Device: {},\n      });\n\n      this.model.get('mediaSettings').restoreDefaults();\n    } else {\n      this.model.set('target', this.ui.targetTitleInput.val());\n      this.model.unset('targetTagID');\n\n      this.updateDeviceProfile(this.selectedProfile);\n      this.updateMediaSettings(this.selectedCustomQuality);\n    }\n\n    this.$el.toggleClass('show-custom-target', targetTagID === -1);\n  },\n\n  onTitleKeyDown: function (event: any) {\n    // Prevent periods at the beginning of the title, since that would lead\n    // to hidden directories on OSX.\n    if (event.which === 190 && event.currentTarget.selectionStart === 0) {\n      event.preventDefault();\n    }\n  },\n\n  onTitleChange: function (event: any) {\n    this.model.set('target', event.currentTarget.value);\n  },\n\n  onProfileChange: function (event: any) {\n    this.selectedProfile = this.profiles.findWhere({\n      title: event.currentTarget.value,\n    });\n\n    this.updateDeviceProfile(this.selectedProfile);\n  },\n\n  onQualityChange: function (event: any) {\n    const qualityIndex = parseInt(event.currentTarget.value, 10);\n    this.selectedCustomQuality =\n      videoPlayerQualities.getQualityByIndex(qualityIndex);\n\n    this.updateMediaSettings(this.selectedCustomQuality);\n  },\n});\n\nexport default ConvertFormTargetView;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const LOWEST_VIDEO_QUALITY_INDEX = 2;\n","import _ from 'underscore';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport VersionGeneratorModel from 'app/js/models/library/convert/VersionGeneratorModel';\nimport SectionModel from 'app/js/models/library/section/SectionModel';\nimport MetadataListModel from 'app/js/models/metadata/MetadataListModel';\nimport contentUtil from 'app/js/utils/contentUtil';\nimport getSectionForItem from 'app/js/utils/media/getSectionForItem';\nimport parser from 'app/js/utils/parser';\nimport t from 'app/js/utils/t';\nimport ConvertFormLocationView from 'app/js/views/modals/convert/ConvertFormLocationView';\nimport ConvertFormPolicyView from 'app/js/views/modals/convert/ConvertFormPolicyView';\nimport ConvertFormTargetView from 'app/js/views/modals/convert/ConvertFormTargetView';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/convert/ConvertFormView.tpl';\n\nconst ConvertFormView = Marionette.Layout.extend({\n  //\n  // Properties\n\n  template: tpl,\n\n  ui: {\n    submitBtn: '.submit-btn',\n  },\n\n  regions: {\n    policyRegion: '.policy-region',\n    targetsRegion: '.targets-region',\n    locationRegion: '.location-region',\n  },\n\n  events: {\n    'change input[name=title]': 'onTitleChange',\n    'submit #convert-form': 'onSubmit',\n  },\n\n  //\n  // Init\n\n  initialize: function (options: any) {\n    this.playlist = options.playlist;\n    this.targets = options.targets;\n    this.profiles = options.profiles;\n\n    if (this.model) {\n      this.tempModel = this.model.clone();\n\n      // A section reference is needed to populate the possible locations,\n      // so try to use the id to grab it from the cache.\n\n      const librarySectionID = this.model.get('Location').librarySectionID;\n      if (librarySectionID) {\n        const cachedSection = new SectionModel(\n          { key: librarySectionID },\n          {\n            server: this.model.server,\n            onlyIfCached: true,\n          }\n        );\n\n        if (!_.isEmpty(cachedSection)) {\n          this.tempModel.section = cachedSection;\n        }\n      }\n    } else {\n      const item = options.item;\n      const items = options.items;\n      const itemForUri = item.has('childrenKey')\n        ? new MetadataListModel(\n            { containerKey: item.get('childrenKey') },\n            {\n              server: item.server,\n              provider: item.provider,\n            }\n          )\n        : item;\n      const server = item.server;\n      let section;\n\n      if (item.get('isSection')) {\n        section = item;\n      } else {\n        const sectionForItem = getSectionForItem(item);\n        if (!_.isEmpty(sectionForItem)) {\n          section = sectionForItem;\n        }\n      }\n\n      this.tempModel = new VersionGeneratorModel(\n        {\n          title: contentUtil.title(item, { items: items }),\n          targetTagID: this.targets.first().id,\n          Location: {\n            uri: contentUtil.uri(itemForUri, { items: items }),\n          },\n        },\n        {\n          server: server,\n          section: section,\n        }\n      );\n    }\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    return {\n      conversionItem: this.tempModel.toJSON(),\n      isNew: this.tempModel.isNew(),\n      showRemuxOnlyWarning: this.tempModel.server.get(\n        'transcoderVideoRemuxOnly'\n      ),\n    };\n  },\n\n  //\n  // Listeners\n\n  onRender: function () {\n    this.policyRegion.show(\n      new ConvertFormPolicyView({\n        model: this.tempModel,\n        isSync: false,\n      })\n    );\n\n    this.targetsRegion.show(\n      new ConvertFormTargetView({\n        model: this.tempModel,\n        targets: this.targets,\n        profiles: this.profiles,\n      })\n    );\n\n    this.locationRegion.show(\n      new ConvertFormLocationView({\n        model: this.tempModel,\n      })\n    );\n  },\n\n  onTitleChange: function (event: any) {\n    this.tempModel.set('title', event.currentTarget.value);\n  },\n\n  onSubmit: function (event: any) {\n    event.preventDefault();\n\n    const submitBtn = this.ui.submitBtn;\n    if (submitBtn.hasClass('active')) {\n      return;\n    }\n\n    submitBtn.addClass('active');\n\n    // Default the target title if a custom target was selected and a name\n    // was not specified.\n    if (!this.tempModel.get('targetTagID') && !this.tempModel.get('target')) {\n      const device = this.tempModel.get('Device');\n      this.tempModel.set('target', t('Custom: {1}', device.profile));\n    }\n\n    const promise = this.playlist.addContent(this.tempModel);\n\n    promise.done(\n      this.whenRendered(function () {\n        // Update the existing model with its newly saved attributes.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        if (this.model) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          const attrs = _.omit(this.tempModel.toJSON(), 'children');\n\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.model.set(this.model.parse(attrs));\n        }\n\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.trigger('request:nextState');\n      })\n    );\n\n    promise.fail(\n      this.whenRendered(function (xhr: any) {\n        const response = xhr.responseText;\n        const json = parser.parseXML(response);\n        const status = json?.status;\n\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.trigger('request:state', 'error', status);\n      })\n    );\n  },\n});\n\nexport default ConvertFormView;\n","import Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/convert/ConvertLoadingView.tpl';\n\nconst ConvertLoadingView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  className: 'modal-body loading-container',\n  template: tpl,\n});\n\nexport default ConvertLoadingView;\n","import Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport navigateToRoute from 'app/js/v4/routes/navigateToRoute';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/convert/ConvertSuccessView.tpl';\n\nconst ConvertSuccessView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  className: 'modal-body',\n  template: tpl,\n\n  events: {\n    'click .status-link': 'onStatusClick',\n  },\n\n  //\n  // Listeners\n\n  onStatusClick: function (event: any) {\n    event.preventDefault();\n\n    this.triggerMethod('request:nextState');\n\n    navigateToRoute('serverSettings', {\n      machineIdentifier: this.options.server.id,\n      settingsSection: 'status',\n      settingsGroup: 'conversion',\n    });\n  },\n});\n\nexport default ConvertSuccessView;\n","import $ from 'jquery';\nimport stateMachineMixin from 'app/js/mixins/views/stateMachineMixin';\nimport BackgroundProcessingListCollection from 'app/js/models/library/convert/BackgroundProcessingListCollection';\nimport VersionClientProfileCollection from 'app/js/models/library/convert/VersionClientProfileCollection';\nimport VersionTargetCollection from 'app/js/models/library/convert/VersionTargetCollection';\nimport BaseModal from 'app/js/views/modals/BaseModal';\nimport ConvertErrorView from 'app/js/views/modals/convert/ConvertErrorView';\nimport ConvertFormView from 'app/js/views/modals/convert/ConvertFormView';\nimport ConvertLoadingView from 'app/js/views/modals/convert/ConvertLoadingView';\nimport ConvertSuccessView from 'app/js/views/modals/convert/ConvertSuccessView';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/convert/ConvertModal.tpl';\n\nconst ConvertModal = BaseModal.extend({\n  mixins: [stateMachineMixin],\n  //\n  // Properties\n  name: 'convertModal',\n  className: 'convert-modal modal fade',\n  template: tpl,\n  regions: {\n    bodyRegion: '.modal-body-region',\n  },\n  //\n  // Init\n  initialize: function (options: any) {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.initialize.apply(this, arguments);\n    this.server = this.model ? this.model.server : options.item.server;\n    const collectionOptions = {\n      server: this.server,\n      allowInCache: true,\n    };\n    this.playlists = new BackgroundProcessingListCollection(\n      [],\n      collectionOptions\n    );\n    this.targets = new VersionTargetCollection([], collectionOptions);\n    this.profiles = new VersionClientProfileCollection([], collectionOptions);\n  },\n  //\n  // States\n  initialState: 'loading',\n  states: {\n    loading: {\n      nextState: 'form',\n      onEnter: function () {\n        (this as any).bodyRegion.show(new ConvertLoadingView());\n        (this as any).listenForStateRequests();\n        // Populate a metadata model to ensure we have attributes that allow us\n        // to find the section locations for the item.\n        const item = (this as any).options.item;\n        const shouldPopulateItem = item && !item.get('isMetadataList');\n        const promise = $.when(\n          shouldPopulateItem ? item.populate() : null,\n          (this as any).playlists.populate(),\n          (this as any).targets.populate(),\n          (this as any).profiles.populate(),\n          // Sections are needed when editing a generator and we need to\n          // list locations from a section.\n          (this as any).server.get('sections').populate()\n        );\n        promise.done(\n          (this as any).whenRendered(function () {\n            // Check that we have a background processing list to add the item\n            // to. If we don't, show the error.\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this.playlist = this.playlists.first();\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            if (this.playlist) {\n              // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n              this.enterNextState();\n            } else {\n              // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n              this.enterState('error');\n            }\n          })\n        );\n        promise.fail(\n          (this as any).whenRendered(function () {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this.enterState('error');\n          })\n        );\n      },\n    },\n    form: {\n      nextState: 'success',\n      onEnter: function () {\n        (this as any).bodyRegion.show(\n          new ConvertFormView({\n            model: (this as any).model,\n            item: (this as any).options.item,\n            items: (this as any).options.items,\n            playlist: (this as any).playlist,\n            targets: (this as any).targets,\n            profiles: (this as any).profiles,\n          })\n        );\n        (this as any).listenForStateRequests();\n      },\n    },\n    success: {\n      onEnter: function () {\n        if ((this as any).model) {\n          (this as any).hide();\n        } else {\n          (this as any).bodyRegion.show(\n            new ConvertSuccessView({ server: (this as any).server })\n          );\n          (this as any).listenForStateRequests();\n        }\n      },\n    },\n    error: {\n      onEnter: function (status: any) {\n        (this as any).bodyRegion.show(new ConvertErrorView({ status: status }));\n        (this as any).listenForStateRequests();\n      },\n    },\n  },\n  //\n  // Control\n  listenForStateRequests: function () {\n    if (this.bodyRegion?.currentView) {\n      this.listenTo(this.bodyRegion.currentView, {\n        'request:state': this.enterState,\n        'request:nextState': this.enterNextState,\n      });\n    }\n  },\n  //\n  // Listeners\n  onRender: function () {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.onRender.apply(this, arguments);\n    this.enterNextState();\n  },\n  onStateMachineComplete: function () {\n    this.hide();\n  },\n});\nexport default ConvertModal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\n\ntype MarionetteComponentProps = {\n  className?: string;\n  view: (...args: any[]) => any;\n  viewOptions?: any;\n};\n\nclass MarionetteComponent extends Component<MarionetteComponentProps> {\n  // eslint-disable-next-line react/sort-comp\n  _el: any;\n  _view: any;\n\n  componentDidMount() {\n    const View = this.props.view;\n    // @ts-expect-error ts-migrate(7009) FIXME: 'new' expression, whose target lacks a construct s... Remove this comment to see the full error message\n    this._view = new View(this.props.viewOptions);\n\n    this._view.render();\n\n    this._el.appendChild(this._view.el);\n    this._view.triggerMethod('show');\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentWillUnmount() {\n    if (this._view.close) {\n      this._view.close();\n    }\n  }\n\n  render() {\n    return (\n      <div ref={(el) => (this._el = el)} className={this.props.className} />\n    );\n  }\n}\n\nexport default MarionetteComponent;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport EmptyPageContent from 'app/js/v4/core/ui/pages/components/empty/EmptyPageContent';\nimport Spinner from 'app/js/v4/core/ui/spinners/components/Spinner';\nimport routes from 'app/js/v4/routes/routes';\nimport DownForMaintenancePage from 'app/js/views/v3/components/pages/empty/DownForMaintenancePage';\nimport UnreachablePage from 'app/js/views/v3/components/pages/empty/UnreachablePage';\nimport useEffectOnce from 'app/js/views/v3/helpers/hooks/useEffectOnce';\n\ntype UserPageProps = {\n  children?: React.ReactNode;\n  isWaitingForServers: boolean;\n  isAnyServerAuthenticated: boolean;\n  isWaitingForCloudServer: boolean;\n  isAccountRequired: boolean;\n  isCloudServerUnauthorized?: boolean;\n  isCloudServerConnected: boolean;\n  isCloudServerUnavailable: boolean;\n  isCloudServerDownForMaintenance: boolean;\n  hasAttemptedSignIn: boolean;\n  isUserFeaturesPopulated: boolean;\n  isUserFeaturesError: boolean;\n  onPopulateUserFeatures: (...args: any[]) => any;\n};\n\n// When refactoring this UserPage keep in mind the following conditions:\n//\n// 1. Not signed in. Has local server.\n// 2. Not signed in. Has local server. Has Downloads.\n// 3. Not signed in. No local server.\n// 4. Not signed in. No local server. Block /anonymous request.\n// 5. Not signed in. No local server. Has Downloads.\n// 6. Signed in. No Home.\n// 7. Signed in. Has Home. Automatically signed in.\n// 8. Signed in. Has Home. Not automatically signed in.\n// 9. Block plex.tv. No local server.\n\nfunction UserPage(props: UserPageProps) {\n  const {\n    children,\n    isWaitingForServers,\n    isAnyServerAuthenticated,\n    isWaitingForCloudServer,\n    isCloudServerUnauthorized,\n    isCloudServerConnected,\n    isCloudServerUnavailable,\n    isCloudServerDownForMaintenance,\n    hasAttemptedSignIn,\n    isUserFeaturesPopulated,\n    isUserFeaturesError,\n    onPopulateUserFeatures,\n  } = props;\n\n  const history = useHistory();\n\n  // If a request for features has already completed outside of this component,\n  // retry the request, but don't block page load on it anymore.\n  const [hasWaitedForUserFeatures, setHasWaitedForUserFeatures] = useState(\n    isUserFeaturesError || isUserFeaturesPopulated\n  );\n\n  const isUserReady = hasAttemptedSignIn || isCloudServerUnavailable;\n\n  const isReadyToRequestFeatures = isUserReady && isCloudServerConnected;\n\n  const isUserFeaturesReady =\n    isUserFeaturesPopulated ||\n    isUserFeaturesError ||\n    hasWaitedForUserFeatures ||\n    isCloudServerUnavailable;\n\n  const shouldRedirectToLogin =\n    (!isWaitingForServers &&\n      !isAnyServerAuthenticated &&\n      !isCloudServerDownForMaintenance &&\n      !isCloudServerUnavailable &&\n      isUserReady) ||\n    isCloudServerUnauthorized;\n\n  // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n  useEffect(() => {\n    if (isReadyToRequestFeatures) {\n      // Waiting for user features blocks page load, so use a shorter timeout in\n      // case the network is bad and we're unable to fetch user features, but we\n      // are able to access a server.\n      const timerID = window.setTimeout(\n        () => setHasWaitedForUserFeatures(true),\n        5000\n      );\n\n      return () => window.clearTimeout(timerID);\n    }\n  }, [isReadyToRequestFeatures]);\n\n  useEffect(() => {\n    if (isReadyToRequestFeatures) {\n      onPopulateUserFeatures();\n    }\n  }, [isReadyToRequestFeatures, onPopulateUserFeatures]);\n\n  useEffectOnce(() => {\n    history.push(routes.login);\n  }, shouldRedirectToLogin);\n\n  if (\n    isAnyServerAuthenticated &&\n    isUserFeaturesReady &&\n    isUserReady &&\n    isCloudServerConnected\n  ) {\n    return children;\n  }\n\n  if (\n    !isWaitingForCloudServer &&\n    !isWaitingForServers &&\n    !isAnyServerAuthenticated\n  ) {\n    if (isCloudServerDownForMaintenance) {\n      return <DownForMaintenancePage />;\n    }\n\n    if (isCloudServerUnavailable) {\n      return <UnreachablePage />;\n    }\n  }\n\n  return (\n    <EmptyPageContent>\n      <Spinner />\n    </EmptyPageContent>\n  );\n}\n\nUserPage.defaultProps = {\n  isAccountRequired: false,\n};\n\nexport default UserPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { populateUserFeatures } from 'app/js/stores/actions/userActions';\nimport selectCloudServer from 'app/js/stores/selectors/server/selectCloudServer';\nimport selectServers from 'app/js/stores/selectors/server/selectServers';\nimport selectUser from 'app/js/stores/selectors/user/selectUser';\nimport UserPage from 'app/js/views/v3/components/UserPage';\n\nconst selectIsWaitingForDownloads = createSelector(\n  // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n  (appState) => appState.downloads,\n  (downloads) => {\n    return downloads\n      ? !downloads.isSubscriptionsPopulated && !downloads.subscriptionsError\n      : false;\n  }\n);\n\nconst selectHasDownloads = createSelector(\n  // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n  (appState) => appState.downloads,\n  (downloads) => {\n    return !!(\n      downloads &&\n      downloads.subscriptions &&\n      downloads.subscriptions.length > 0\n    );\n  }\n);\n\nconst selectIsAnyServerAuthenticated = createSelector(\n  selectServers,\n  (servers) => {\n    return servers.some((server: any) => {\n      // The cloud server (plex.tv) must use `isResolved` in order to ensure the\n      // user is authenticated, but media servers can shortcut at `isConnected`,\n      // which saves time if connections are being re-tested. The presence of an\n      // embedded server is not enough to consider user authenticated.\n\n      return (\n        (server.isCloud && server.isResolved) ||\n        (!server.isCloud && server.isConnected)\n      );\n    });\n  }\n);\n\nconst mapStateToProps = createSelector(\n  (appState) => appState.isWaitingForServers,\n  selectIsWaitingForDownloads,\n  selectIsAnyServerAuthenticated,\n  selectHasDownloads,\n  selectUser,\n  selectCloudServer,\n  (\n    isWaitingForServers,\n    isWaitingForDownloads,\n    isAnyServerAuthenticated,\n    hasDownloads,\n    user,\n    cloudServer\n  ) => {\n    return {\n      // When there is an embedded server but no media it complicates sign-in\n      // prompt presentation in the Desktop app. So let the user in if there is\n      // any downloads, which means we also need to wait for downloads to\n      // populate.\n      isWaitingForServers: isWaitingForServers || isWaitingForDownloads,\n      isAnyServerAuthenticated: isAnyServerAuthenticated || hasDownloads,\n\n      isWaitingForCloudServer:\n        !cloudServer.isResolved && !cloudServer.isRejected,\n      isCloudServerUnauthorized: cloudServer.isUnauthorized,\n      isCloudServerConnected: cloudServer.isConnected,\n      isCloudServerUnavailable: cloudServer.isUnavailable,\n      isCloudServerDownForMaintenance: cloudServer.isDownForMaintenance,\n      hasAttemptedSignIn: user.hasAttemptedSignIn,\n      isUserFeaturesPopulated: user.isFeaturesPopulated,\n      isUserFeaturesError: !!user.featuresError,\n    };\n  }\n);\n\nconst mapDispatchToProps = {\n  onPopulateUserFeatures: populateUserFeatures,\n};\n\n// @ts-expect-error\nexport default connect(mapStateToProps, mapDispatchToProps)(UserPage);\n","// extracted by mini-css-extract-plugin\nexport default {\"circularProgressBarContainer\":\"fifdd\",\"absoluteCenterCircularProgressBarContainer\":\"PA8DX\",\"circularProgressBar\":\"clDAn\",\"circularProgressBarBackground\":\"gKSWm\",\"circularProgressBarText\":\"vgbPn\",\"indeterminate\":\"YIX_3 m_4Rc\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport classNames from 'classnames';\nimport { motion } from 'framer-motion';\nimport React from 'react';\nimport colors from 'app/js/views/v3/styles/variables/colors';\nimport styles from './CircularProgressBar.css';\n\nexport interface CircularProgressBarProps {\n  className?: string;\n  containerClassName?: string;\n  backgroundClassName?: string;\n  textClassName?: string;\n  size?: number;\n  progress: number;\n  progressText?: string | number;\n  lineWidth?: number;\n  strokeColor?: string;\n  trackColor?: string;\n  showIndeterminate?: boolean;\n  showProgressText?: boolean;\n  smoothProgressDuration?: number;\n  easing?: 'linear' | 'easeOut';\n}\n\nfunction CircularProgressBar(props: CircularProgressBarProps) {\n  const {\n    className = styles.circularProgressBar,\n    containerClassName = styles.circularProgressBarContainer,\n    backgroundClassName = styles.circularProgressBarBackground,\n    textClassName = styles.circularProgressBarText,\n    size = 60,\n    lineWidth = 5,\n    strokeColor = colors.primaryColor,\n    trackColor,\n    progress,\n    progressText = `${Math.round(progress)}%`,\n    easing = 'easeOut',\n    showProgressText = true,\n    showIndeterminate,\n    smoothProgressDuration = 1000,\n  } = props;\n\n  const duration = smoothProgressDuration / 1000;\n\n  const finalProgress = showIndeterminate ? 50 : progress;\n  const finalProgressText = showIndeterminate ? null : progressText;\n\n  const center = size / 2;\n  const radius = center - lineWidth;\n  const circumference = Math.PI * (radius * 2);\n  const sizeInPixels = size + 'px';\n  const backgroundSizeInPixels = size - lineWidth * 3 + 'px';\n  const strokeDashoffset = ((100 - finalProgress) / 100) * circumference;\n\n  return (\n    <div\n      className={containerClassName}\n      style={{\n        width: sizeInPixels,\n        height: sizeInPixels,\n        lineHeight: sizeInPixels,\n      }}\n    >\n      <svg\n        className={classNames(\n          className,\n          showIndeterminate && styles.indeterminate\n        )}\n        height={size}\n        version=\"1.1\"\n        width={size}\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        {trackColor ? (\n          <circle\n            cx={center}\n            cy={center}\n            fill=\"transparent\"\n            r={radius}\n            style={{\n              strokeWidth: lineWidth,\n              stroke: trackColor,\n            }}\n          />\n        ) : null}\n        <motion.circle\n          animate={{\n            strokeDashoffset,\n          }}\n          cx={center}\n          cy={center}\n          fill=\"transparent\"\n          initial={true}\n          r={radius}\n          strokeDasharray={circumference}\n          strokeDashoffset={strokeDashoffset}\n          style={{\n            strokeWidth: lineWidth,\n            stroke: strokeColor,\n          }}\n          transition={{ duration, ease: easing }}\n        />\n      </svg>\n\n      <div\n        className={backgroundClassName}\n        style={{\n          width: backgroundSizeInPixels,\n          height: backgroundSizeInPixels,\n        }}\n      />\n\n      {showProgressText && finalProgressText ? (\n        <div className={textClassName}>{finalProgressText}</div>\n      ) : null}\n    </div>\n  );\n}\n\nexport default CircularProgressBar;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport t from 'app/js/utils/t';\nimport CoreSpinner from 'app/js/views/v3/components/core/base/Spinner';\n\nfunction Spinner(props: any) {\n  return <CoreSpinner {...props} loadingLabel={t('Loading')} />;\n}\nSpinner.propTypes = (CoreSpinner as any).propTypes;\nSpinner.defaultProps = CoreSpinner.defaultProps;\nexport default Spinner;\n","import React from 'react';\nimport assert from 'app/js/utils/log/assert';\nimport escapeRegExp from 'app/js/utils/string/escapeRegExp';\n\ninterface TagInjectorProps {\n  className?: string;\n  component?: React.ComponentType<{ className?: string }> | string;\n  childrenPropName?: string;\n  tags?: any;\n  message: string;\n}\n\nfunction TagInjector(props: TagInjectorProps): JSX.Element {\n  const {\n    className,\n    component: RootComponent = 'span',\n    childrenPropName: rootChildrenPropName = 'children',\n    tags,\n    message,\n  } = props;\n\n  if (__DEV__) {\n    const validTagRegExp = /^\\w+$/;\n    const isValid = tags.every(\n      (link: any) =>\n        (validTagRegExp.test(link.open) && validTagRegExp.test(link.close)) ||\n        (link.children && validTagRegExp.test(link.unpaired))\n    );\n    assert(\n      isValid,\n      'Expected all `open` and `close` keys to be \\\\w word characters'\n    );\n  }\n\n  let segments = [message];\n  let componentIndex = tags.length - 1;\n  let componentCount = 0;\n\n  while (componentIndex >= 0) {\n    const {\n      open,\n      close,\n      unpaired,\n      children,\n      component: Component,\n      childrenPropName,\n      ...componentProps\n    } = tags[componentIndex];\n\n    const tagRegExp = open\n      ? new RegExp(\n          '(^.*)' +\n            escapeRegExp(`{${open}}`) +\n            '(.*)' +\n            escapeRegExp(`{${close}}`) +\n            '(.*$)'\n        )\n      : new RegExp('(^.*)' + escapeRegExp(`{${unpaired}}`) + '()(.*$)');\n\n    const nextSegments = [];\n    for (\n      let segmentIndex = segments.length - 1;\n      segmentIndex >= 0;\n      segmentIndex--\n    ) {\n      const segment = segments[segmentIndex];\n      if (typeof segment !== 'string') {\n        nextSegments.unshift(segment);\n      } else {\n        const match = segment.match(tagRegExp);\n        if (match) {\n          const [\n            ,\n            preComponentSegment,\n            componentChildren,\n            postComponentSegment,\n          ] = match;\n\n          if (Component) {\n            nextSegments.unshift(\n              preComponentSegment,\n              <Component\n                key={componentCount}\n                {...componentProps}\n                {...{\n                  [childrenPropName || 'children']: componentChildren,\n                }}\n              />,\n              postComponentSegment\n            );\n          } else {\n            nextSegments.unshift(\n              preComponentSegment,\n              children,\n              postComponentSegment\n            );\n          }\n          componentCount = componentCount + 1;\n        } else {\n          nextSegments.unshift(segment);\n        }\n      }\n    }\n\n    if (nextSegments.length === segments.length) {\n      componentIndex = componentIndex - 1;\n    } else {\n      segments = nextSegments;\n    }\n  }\n\n  return (\n    <RootComponent\n      className={className}\n      {...{ [rootChildrenPropName]: segments }}\n    />\n  );\n}\n\nexport default TagInjector;\n","// extracted by mini-css-extract-plugin\nexport default {\"disclosureArrow\":\"LzfC_\",\"default\":\"Zp7Wt\",\"primary\":\"hEq49\",\"success\":\"Uf8bA\",\"danger\":\"qkqy_\",\"small\":\"oRMRS\",\"up\":\"J_usl\",\"right\":\"V8mDn\",\"medium\":\"LGKVq\",\"large\":\"s6uc8\",\"down\":\"AHqoK J_usl\",\"left\":\"qt2wI V8mDn\",\"isSelected\":\"ymHLz\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport classNames from 'classnames';\nimport React from 'react';\nimport * as directions from 'app/js/views/v3/helpers/props/directions';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport styles from './DisclosureArrow.css';\n\ninterface DisclosureArrowProps {\n  className?: string;\n  direction?: any; // TODO: PropTypes.oneOf(directions.all)\n  kind?: any; // TODO: PropTypes.oneOf(kinds.all)\n  size?: any; // TODO: PropTypes.oneOf(sizes.all)\n  isSelected?: boolean;\n}\n\nfunction DisclosureArrow({\n  className,\n  kind,\n  size,\n  direction,\n  isSelected,\n}: DisclosureArrowProps) {\n  return (\n    <span\n      className={classNames(\n        className,\n        styles[direction],\n        styles[kind],\n        styles[size],\n        isSelected && styles.isSelected\n      )}\n    />\n  );\n}\n\nDisclosureArrow.defaultProps = {\n  className: styles.disclosureArrow,\n  direction: directions.DOWN,\n  kind: kinds.DEFAULT,\n  size: sizes.MEDIUM,\n  isSelected: false,\n};\n\nexport default DisclosureArrow;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { createPopper } from '@popperjs/core';\nimport assert from 'app/js/utils/log/assert';\nimport Portal from 'app/js/views/v3/components/core/base/Portal';\n// @ts-expect-error ts-migrate(6133) FIXME: 'forwardedRefShape' is declared but its value is n... Remove this comment to see the full error message\nimport forwardedRefShape from 'app/js/views/v3/helpers/props/shapes/forwardedRefShape';\nimport shouldPureComponentUpdate from 'app/js/views/v3/helpers/shouldPureComponentUpdate';\n\n/*\n(ts-migrate) TODO: Migrate the remaining prop types\n...Portal.propTypes\n*/\ninterface PopperPortalProps {\n  target: string;\n  options?: any;\n  // @ts-expect-error ts-migrate(2749) FIXME: 'forwardedRefShape' refers to a value, but is bein... Remove this comment to see the full error message\n  forwardedRef?: forwardedRefShape;\n  onOpen?: (...args: any[]) => any;\n  onClose?: (...args: any[]) => any;\n}\n\nclass PopperPortal extends Component<PopperPortalProps> {\n  static defaultProps: any;\n\n  // eslint-disable-next-line react/sort-comp\n  _popper: any;\n  _ref: any;\n\n  //\n  // Lifecycle\n\n  constructor(props: any, context: any) {\n    super(props, context);\n\n    this._ref = props.forwardedRef || React.createRef();\n    this._popper = null;\n  }\n\n  shouldComponentUpdate(nextProps: PopperPortalProps, nextState: any) {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 5 arguments, but got 3.\n    return shouldPureComponentUpdate(this, nextProps, nextState);\n  }\n\n  componentDidUpdate(prevProps: PopperPortalProps) {\n    if (this._popper) {\n      // Make popper recalculate offset if the component changes\n      this._popper.update();\n    }\n\n    if (__DEV__) {\n      assert(\n        this.props.forwardedRef === prevProps.forwardedRef,\n        'The `forwardedRef` prop provided to `PopperPortal` should not change'\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    this._close();\n  }\n\n  //\n  // Control\n\n  _open() {\n    const { target, options } = this.props;\n\n    const targetElement =\n      document.getElementById(target) || document.getElementsByName(target)[0];\n    this._popper = createPopper(\n      targetElement,\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'Element | Text | null' is not as... Remove this comment to see the full error message\n      ReactDOM.findDOMNode(this._ref.current),\n      options\n    );\n\n    // Workaround to ensure the popper has the correct position.\n    this._popper.update();\n  }\n\n  _close() {\n    if (this._popper) {\n      this._popper.destroy();\n      this._popper = null;\n    }\n  }\n\n  //\n  // Listeners\n\n  onOpen = () => {\n    this._open();\n\n    this.props.onOpen?.();\n  };\n\n  onClose = () => {\n    this._close();\n\n    this.props.onClose?.();\n  };\n\n  //\n  // Render\n\n  render() {\n    return (\n      <Portal\n        {...this.props}\n        ref={this._ref}\n        // @ts-expect-error ts-migrate(2322) FIXME: Type '{ ref: any; onOpen: () => void; onClose: () ... Remove this comment to see the full error message\n        onClose={this.onClose}\n        onOpen={this.onOpen}\n      />\n    );\n  }\n}\n\nexport const defaultProps = {\n  options: {\n    placement: 'bottom-start',\n  },\n};\n\nPopperPortal.defaultProps = defaultProps;\n\nexport default React.forwardRef((props, ref) => {\n  return <PopperPortal {...props} forwardedRef={ref} />;\n});\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n// @ts-expect-error ts-migrate(6133) FIXME: 'forwardedRefShape' is declared but its value is n... Remove this comment to see the full error message\nimport forwardedRefShape from 'app/js/views/v3/helpers/props/shapes/forwardedRefShape';\n\ninterface PortalProps {\n  className?: string;\n  style?: any;\n  isOpen?: boolean;\n  closeTimeoutMilliseconds?: number;\n  allowInteractionEventBubbling?: boolean;\n  // @ts-expect-error ts-migrate(2749) FIXME: 'forwardedRefShape' refers to a value, but is bein... Remove this comment to see the full error message\n  forwardedRef?: forwardedRefShape;\n  onOpen?: (...args: any[]) => any;\n  onClose?: (...args: any[]) => any;\n}\n\ntype PortalState = any;\n\n// A portal can be used to transport a component rendered in the component tree\n// to the document body. This allows us to create modals, menus, etc. where they\n// are needed, but render them in a way that they overlay the entire\n// application.\n\nclass Portal extends Component<PortalProps, PortalState> {\n  static defaultProps = {\n    isOpen: true,\n    closeTimeoutMilliseconds: 0,\n    allowInteractionEventBubbling: false,\n  };\n\n  // eslint-disable-next-line react/sort-comp\n  _closeTimeoutID: any;\n\n  //\n  // Static\n\n  // eslint-disable-next-line react/sort-comp\n  static getDerivedStateFromProps(nextProps: any, prevState: any) {\n    if (nextProps.isOpen === prevState.isOpen) {\n      return null;\n    }\n\n    return {\n      isOpen: nextProps.isOpen,\n      shouldPreventPortalClose:\n        nextProps.closeTimeoutMilliseconds &&\n        !nextProps.isOpen &&\n        prevState.isOpen,\n    };\n  }\n\n  //\n  // Lifecycle\n\n  constructor(props: any, context: any) {\n    super(props, context);\n\n    this.state = {\n      isOpen: props.isOpen,\n      shouldPreventPortalClose: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.onOpen && this.props.isOpen) {\n      this.props.onOpen();\n    }\n  }\n\n  componentDidUpdate(prevProps: PortalProps, prevState: PortalState) {\n    if (\n      !this.state.shouldPreventPortalClose &&\n      prevState.shouldPreventPortalClose\n    ) {\n      this._closeTimeoutID = window.clearTimeout(this._closeTimeoutID);\n    }\n\n    if (\n      this.state.shouldPreventPortalClose &&\n      !prevState.shouldPreventPortalClose\n    ) {\n      this._closeTimeoutID = window.setTimeout(\n        this.onCloseTimeout,\n        this.props.closeTimeoutMilliseconds\n      );\n    }\n\n    if (this.props.onOpen && this.props.isOpen && !prevProps.isOpen) {\n      this.props.onOpen();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._closeTimeoutID) {\n      window.clearTimeout(this._closeTimeoutID);\n    }\n  }\n\n  //\n  // Listeners\n\n  onCloseTimeout = () => {\n    this._closeTimeoutID = null;\n    this.setState({ shouldPreventPortalClose: false }, () => {\n      if (this.props.onClose) {\n        this.props.onClose();\n      }\n    });\n  };\n\n  onInteractionEvent = (event: any) => {\n    // React 16 portals allow events to bubble up through the component tree, so\n    // a click event can bubble up to the button that opened the portal. This\n    // can lead to unexpected behavior, so stop propagation of interaction\n    // events up from the portal.\n\n    if (!this.props.allowInteractionEventBubbling) {\n      event.stopPropagation();\n    }\n  };\n\n  //\n  // Render\n\n  render() {\n    const { className, style, children, forwardedRef } = this.props;\n\n    const { isOpen, shouldPreventPortalClose } = this.state;\n\n    if (!isOpen && !shouldPreventPortalClose) {\n      return null;\n    }\n\n    return ReactDOM.createPortal(\n      <div\n        ref={forwardedRef}\n        className={className}\n        style={style}\n        onBlur={this.onInteractionEvent}\n        onClick={this.onInteractionEvent}\n        onFocus={this.onInteractionEvent}\n        onMouseDown={this.onInteractionEvent}\n        onMouseUp={this.onInteractionEvent}\n        onTouchCancel={this.onInteractionEvent}\n        onTouchEnd={this.onInteractionEvent}\n        onTouchMove={this.onInteractionEvent}\n        onTouchStart={this.onInteractionEvent}\n      >\n        {children}\n      </div>,\n      document.body\n    );\n  }\n}\n\nexport default React.forwardRef((props, ref) => {\n  return <Portal {...props} forwardedRef={ref} />;\n});\n","// extracted by mini-css-extract-plugin\nexport default {\"scroller\":\"aoByP\",\"none\":\"wyI3C\",\"vertical\":\"RXkcY\",\"auto\":\"SYUm8\",\"horizontal\":\"WuPH1\",\"omni\":\"SisGX\",\"compactScroller\":\"EekQO\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport classNames from 'classnames';\nimport { animate } from 'framer-motion';\nimport React, { Component } from 'react';\nimport mapValidComponents from 'app/js/views/v3/helpers/mapValidComponents';\nimport * as scrollDirections from 'app/js/views/v3/helpers/props/scrollDirections';\n// @ts-expect-error ts-migrate(6133) FIXME: 'forwardedRefShape' is declared but its value is n... Remove this comment to see the full error message\nimport forwardedRefShape from 'app/js/views/v3/helpers/props/shapes/forwardedRefShape';\nimport shouldPureComponentUpdate from 'app/js/views/v3/helpers/shouldPureComponentUpdate';\nimport styles from './Scroller.css';\n\ninterface ScrollerProps {\n  // @ts-expect-error ts-migrate(2749) FIXME: 'forwardedRefShape' refers to a value, but is bein... Remove this comment to see the full error message\n  forwardedRef?: forwardedRefShape;\n  className?: string;\n  scrollDirection: any; // TODO: PropTypes.oneOf(scrollDirections.all)\n  autoScroll?: boolean;\n  compactScroller?: boolean;\n  smoothScroll?: boolean;\n  restoreScroll?: boolean;\n  smoothScrollDuration: number;\n  scrollTop?: number;\n  scrollLeft?: number;\n  enableChildrenProps?: boolean;\n  isScrollingTimeout: number;\n  onScroll?: (...args: any[]) => any;\n  onScrollPositionChange?: (...args: any[]) => any;\n  onScrollToUpdate?: (...args: any[]) => any;\n  onScrollToComplete?: (...args: any[]) => any;\n}\ntype ScrollerState = any;\nclass Scroller extends Component<ScrollerProps, ScrollerState> {\n  static defaultProps = {\n    scrollDirection: scrollDirections.VERTICAL,\n    autoScroll: false,\n    smoothScroll: true,\n    restoreScroll: false,\n    smoothScrollDuration: 400,\n    enableChildrenProps: false,\n    isScrollingTimeout: 100,\n  };\n  // eslint-disable-next-line react/sort-comp\n  _animationFrameID: any;\n  _currentScrollLeft: any;\n  _currentScrollTop: any;\n  _scrollTimeoutID: any;\n  _scrollToPosition: any;\n  _scrollTopTween: any;\n  _scrollLeftTween: any;\n  _scrollerRef: any;\n  //\n  // Lifecycle\n  constructor(props: any, context: any) {\n    super(props, context);\n    this.state = {\n      isScrolling: false,\n    };\n    // Don't put these in state. We don't want to re-render the component when\n    // these change since `scrollTop` and `scrollLeft` should be passed in when\n    // monitoring scroll position.\n    this._scrollerRef = props.forwardedRef || React.createRef();\n    this._currentScrollTop = 0;\n    this._currentScrollLeft = 0;\n  }\n  componentDidMount() {\n    this._scrollTo(this.props);\n  }\n  UNSAFE_componentWillReceiveProps(nextProps: ScrollerProps) {\n    if (\n      nextProps.scrollTop !== this.props.scrollTop ||\n      nextProps.scrollLeft !== this.props.scrollLeft\n    ) {\n      this.setState({\n        isScrolling: true,\n      });\n    }\n  }\n  shouldComponentUpdate(nextProps: ScrollerProps, nextState: ScrollerState) {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 5 arguments, but got 3.\n    return shouldPureComponentUpdate(this, nextProps, nextState);\n  }\n  // @ts-expect-error ts-migrate(6133) FIXME: 'prevProps' is declared but its value is never rea... Remove this comment to see the full error message\n  componentDidUpdate(prevProps: ScrollerProps) {\n    if (this.state.isScrolling) {\n      if (this._scrollTimeoutID) {\n        window.clearTimeout(this._scrollTimeoutID);\n      }\n      this._scrollTimeoutID = window.setTimeout(\n        this.onScrollTimeout,\n        this.props.isScrollingTimeout\n      );\n    }\n    this._scrollTo(this.props);\n  }\n  componentWillUnmount() {\n    this._clearTimeouts();\n    this._cancelScrollTo();\n  }\n  //\n  // Control\n  _setScrollPosition({ scrollTop, scrollLeft }: any) {\n    this._clearTimeouts();\n    this._currentScrollTop = scrollTop;\n    this._currentScrollLeft = scrollLeft;\n    this._animationFrameID = window.requestAnimationFrame(\n      this.onScrollPositionChange\n    );\n  }\n  _updateScrollPosition({ scrollTop, scrollLeft }: any) {\n    const scrollerRef = this._scrollerRef.current;\n    if (scrollTop != null) {\n      scrollerRef.scrollTop = scrollTop;\n    }\n    if (scrollLeft != null) {\n      scrollerRef.scrollLeft = scrollLeft;\n    }\n  }\n  _scrollTo({ scrollTop, scrollLeft }: any) {\n    if (scrollTop == null && scrollLeft == null) {\n      return;\n    }\n    const hasTopChanged =\n      scrollTop != null && scrollTop !== this._currentScrollTop;\n    const hasLeftChanged =\n      scrollLeft != null && scrollLeft !== this._currentScrollLeft;\n    if (!hasTopChanged && !hasLeftChanged) {\n      return;\n    }\n    if (!this.props.smoothScroll && !this.props.restoreScroll) {\n      this._currentScrollTop = scrollTop;\n      this._currentScrollLeft = scrollLeft;\n      this._updateScrollPosition({ scrollTop, scrollLeft });\n      return;\n    }\n    const duration = this.props.smoothScrollDuration / 1000;\n\n    this._scrollToPosition = {};\n    const scrollerRef = this._scrollerRef.current;\n\n    this._cancelScrollTo();\n\n    if (hasTopChanged) {\n      const scrollTopRequest = Math.min(\n        scrollTop,\n        scrollerRef.scrollHeight - scrollerRef.clientHeight\n      );\n      this._scrollToPosition.scrollTop = scrollerRef.scrollTop;\n      this._scrollTopTween = animate(scrollerRef.scrollTop, scrollTopRequest, {\n        type: 'tween',\n        duration,\n        onUpdate: this.onScrollTopUpdate,\n        onComplete: this.onScrollTopComplete,\n      });\n    }\n    if (hasLeftChanged) {\n      const scrollLeftRequest = Math.min(\n        scrollLeft,\n        scrollerRef.scrollWidth - scrollerRef.clientWidth\n      );\n      this._scrollToPosition.scrollLeft = scrollerRef.scrollLeft;\n      this._scrollLeftTween = animate(\n        scrollerRef.scrollLeft,\n        scrollLeftRequest,\n        {\n          type: 'tween',\n          duration,\n          onUpdate: this.onScrollLeftUpdate,\n          onComplete: this.onScrollLeftComplete,\n        }\n      );\n    }\n  }\n  _cancelScrollTo() {\n    if (this._scrollTopTween) {\n      this._scrollTopTween.stop();\n      this._scrollTopTween = null;\n    }\n\n    if (this._scrollLeftTween) {\n      this._scrollLeftTween.stop();\n      this._scrollLeftTween = null;\n    }\n  }\n  _clearTimeouts() {\n    if (this._animationFrameID) {\n      window.cancelAnimationFrame(this._animationFrameID);\n    }\n    if (this._scrollTimeoutID) {\n      window.clearTimeout(this._scrollTimeoutID);\n    }\n  }\n  //\n  // Listeners\n  onScroll = (event: any) => {\n    // Avoid handling the scroll event unless this component is what triggered\n    // the scroll event. Avoid stop propagation because parents sill need to\n    // know if a scroll event happened.\n    if (event.target !== this._scrollerRef.current) {\n      return;\n    }\n    const scrollTop = event.target.scrollTop;\n    const scrollLeft = event.target.scrollLeft;\n    const hasTopChanged = scrollTop !== this._currentScrollTop;\n    const hasLeftChanged = scrollLeft !== this._currentScrollLeft;\n    if (hasTopChanged || hasLeftChanged) {\n      this._setScrollPosition({ scrollTop, scrollLeft });\n    }\n    if (this.props.onScroll) {\n      this.props.onScroll(event);\n    }\n  };\n  onScrollPositionChange = () => {\n    this._animationFrameID = null;\n    // @ts-expect-error ts-migrate(2722) FIXME: Cannot invoke an object which is possibly 'undefin... Remove this comment to see the full error message\n    this.props.onScrollPositionChange({\n      scrollTop: this._currentScrollTop,\n      scrollLeft: this._currentScrollLeft,\n    });\n  };\n  onScrollTimeout = () => {\n    this.setState({\n      isScrolling: false,\n    });\n  };\n  onScrollTopUpdate = (scrollTop: number) => {\n    this._updateScrollPosition({ scrollTop });\n    if (this.props.onScrollToUpdate) {\n      this.props.onScrollToUpdate({ scrollTop });\n    }\n  };\n  onScrollTopComplete = () => {\n    this._scrollTopTween = null;\n    if (this.props.onScrollToComplete) {\n      this.props.onScrollToComplete();\n    }\n  };\n  onScrollLeftUpdate = (scrollLeft: number) => {\n    this._updateScrollPosition({ scrollLeft });\n    if (this.props.onScrollToUpdate) {\n      this.props.onScrollToUpdate({ scrollLeft });\n    }\n  };\n  onScrollLeftComplete = () => {\n    this._scrollLeftTween = null;\n    if (this.props.onScrollToComplete) {\n      this.props.onScrollToComplete();\n    }\n  };\n  //\n  // Render\n  render() {\n    const {\n      className,\n      children,\n      scrollDirection,\n      autoScroll,\n      compactScroller,\n      enableChildrenProps,\n      onScroll,\n      onScrollPositionChange,\n      // Discarded props\n      forwardedRef,\n      smoothScroll,\n      restoreScroll,\n      smoothScrollDuration,\n      scrollTop,\n      scrollLeft,\n      isScrollingTimeout,\n      onScrollToUpdate,\n      onScrollToComplete,\n      // Rest props\n      ...otherProps\n    } = this.props;\n    return (\n      <div\n        ref={this._scrollerRef}\n        className={classNames(\n          className,\n          styles.scroller,\n          styles[scrollDirection],\n          autoScroll && styles.auto,\n          compactScroller && styles.compactScroller\n        )}\n        onScroll={onScrollPositionChange ? this.onScroll : onScroll}\n        {...otherProps}\n      >\n        {enableChildrenProps\n          ? // @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n            mapValidComponents(children, (child: any) => {\n              return React.cloneElement(child, {\n                isScrolling: this.state.isScrolling,\n                scrollTop: this._currentScrollTop,\n                scrollLeft: this._currentScrollLeft,\n              });\n            })\n          : children}\n      </div>\n    );\n  }\n}\nexport default React.forwardRef((props, ref) => {\n  return <Scroller {...props} forwardedRef={ref} />;\n});\n","/* eslint-plugin-disable @typescript-eslint */\n\n// https://github.com/react-bootstrap/react-bootstrap/blob/master/src/utils/ValidComponentChildren.js\n\nimport React from 'react';\n\n/**\n * Maps children that are typically specified as `props.children`,\n * but only iterates over children that are \"valid components\".\n *\n * The mapFunction provided index will be normalised to the components mapped,\n * so an invalid component would not increase the index.\n *\n * @param {?*} children Children tree container.\n * @param {function(*, int)} mapFunction.\n * @param {*} mapContext Context for mapFunction.\n * @return {object} Object containing the ordered map of results.\n */\nexport default function mapValidComponents(\n  children: any,\n  func: any,\n  context: any\n) {\n  let index = 0;\n\n  return React.Children.map(children, (child) => {\n    if (React.isValidElement(child)) {\n      const lastIndex = index;\n      index++;\n      return func.call(context, child, lastIndex);\n    }\n\n    return child;\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"dHO6j m_4Rc\",\"spinnerContainer\":\"iSU8J\",\"spinnerLabel\":\"iOyIg\",\"small\":\"HM5yP dHO6j m_4Rc\",\"medium\":\"rjY6J dHO6j m_4Rc\",\"large\":\"ckZ9X dHO6j m_4Rc\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport classNames from 'classnames';\nimport React from 'react';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport colors from 'app/styles/variables/colors';\nimport styles from './Spinner.css';\n\ninterface SpinnerProps {\n  className?: string;\n  containerClassName?: string;\n  labelClassName?: string;\n  label?: string;\n  loadingLabel?: string;\n  size?: any; // TODO: PropTypes.oneOf(sizes.all)\n  color: string;\n}\n\nfunction Spinner({\n  className,\n  containerClassName,\n  labelClassName,\n  size,\n  color,\n  label,\n  loadingLabel,\n}: SpinnerProps) {\n  const spinnerClassName = classNames(className, styles[size]);\n\n  const spinnerStyle = {\n    borderTopColor: color,\n    borderLeftColor: color,\n  };\n\n  if (!label) {\n    return (\n      <div\n        aria-label={loadingLabel}\n        className={spinnerClassName}\n        style={spinnerStyle}\n      />\n    );\n  }\n\n  return (\n    <div className={classNames(containerClassName, styles.spinnerContainer)}>\n      <div className={spinnerClassName} style={spinnerStyle} />\n      <div className={classNames(labelClassName, styles.spinnerLabel)}>\n        {label}\n      </div>\n    </div>\n  );\n}\n\nSpinner.defaultProps = {\n  size: sizes.MEDIUM,\n  color: colors.primaryColor,\n};\n\nexport default Spinner;\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"r2dcz x5jRQ\",\"default\":\"JAqpM\",\"primary\":\"czPbW\",\"success\":\"R5b41\",\"danger\":\"H1CLA\",\"dark\":\"H4O1a\",\"small\":\"ehPXv\",\"medium\":\"okUEB\",\"large\":\"OMhm8\"};","import classNames from 'classnames';\nimport React, { ButtonHTMLAttributes, ReactElement } from 'react';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport Link, { LinkProps } from './Link';\nimport styles from './Button.css';\n\nexport interface ButtonProps extends LinkProps {\n  children?: React.ReactNode;\n  type?: ButtonHTMLAttributes<HTMLButtonElement>['type'];\n}\n\nfunction Button({\n  className,\n  children,\n  kind = kinds.DEFAULT,\n  size = sizes.MEDIUM,\n  ...otherProps\n}: ButtonProps): ReactElement {\n  return (\n    <Link\n      className={classNames(\n        className,\n        styles.button,\n        kind && styles[kind],\n        size && styles[size]\n      )}\n      {...otherProps}\n    >\n      {children}\n    </Link>\n  );\n}\n\nexport default Button;\n","// extracted by mini-css-extract-plugin\nexport default {\"disclosureArrowButton\":\"IZ0cW x5jRQ\",\"isSelected\":\"vj2_K\",\"small\":\"O8mL2\",\"medium\":\"Ok1hU\",\"large\":\"aPeP8\",\"disclosureArrow\":\"Js4ax LzfC_\",\"down\":\"hBJ6U\",\"left\":\"AWCf5\",\"up\":\"KSfjB\",\"right\":\"FYWin\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport classNames from 'classnames';\nimport React, { Component } from 'react';\nimport DisclosureArrow from 'app/js/views/v3/components/core/base/DisclosureArrow';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport * as directions from 'app/js/views/v3/helpers/props/directions';\n// @ts-expect-error ts-migrate(6133) FIXME: 'kinds' is declared but its value is never read.\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport styles from './DisclosureArrowButton.css';\n\ninterface DisclosureArrowButtonProps {\n  className?: string;\n  arrowClassName?: string;\n  direction?: any; // TODO: PropTypes.oneOf(directions.all)\n  kind?: any; // TODO: PropTypes.oneOf(kinds.all)\n  size?: any; // TODO: PropTypes.oneOf(sizes.all)\n  isSelected?: boolean;\n}\n\nclass DisclosureArrowButton extends Component<DisclosureArrowButtonProps> {\n  static defaultProps = {\n    className: styles.disclosureArrowButton,\n    arrowClassName: styles.disclosureArrow,\n    direction: directions.DOWN,\n    isSelected: true,\n  };\n\n  //\n  // Render\n\n  render() {\n    const {\n      className,\n      arrowClassName,\n      children,\n      direction,\n      kind,\n      size,\n      isSelected,\n      ...otherProps\n    } = this.props;\n\n    const arrowSize = size || sizes.MEDIUM;\n\n    return (\n      <Link\n        aria-haspopup={true}\n        className={classNames(\n          className,\n          styles[arrowSize],\n          isSelected && styles.isSelected\n        )}\n        isSelected={isSelected}\n        kind={kind}\n        size={size}\n        {...otherProps}\n      >\n        {children}\n        <DisclosureArrow\n          className={classNames(\n            arrowClassName,\n            styles[direction],\n            styles[arrowSize]\n          )}\n          direction={direction}\n          isSelected={isSelected}\n          kind={kind}\n          size={arrowSize}\n        />\n      </Link>\n    );\n  }\n}\n\nexport default DisclosureArrowButton;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const emptyElementUID = null;\nexport default function getActiveElementUID() {\n  // See: https://github.com/plexinc/plex-web-client/issues/13419\n  const activeElement = document.activeElement;\n  const uid =\n    activeElement &&\n    (activeElement as any).dataset &&\n    (activeElement as any).dataset.uid;\n  return uid || emptyElementUID;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"link\":\"x5jRQ\",\"default\":\"TwynL\",\"primary\":\"vIlXB\",\"success\":\"BeT_7\",\"danger\":\"I5EZg\",\"dark\":\"IOwXJ\",\"small\":\"LmZ3l\",\"medium\":\"MfxKQ\",\"large\":\"XFBw0\",\"isSelected\":\"Yp_Xa\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport classNames from 'classnames';\nimport React, { Component } from 'react';\nimport canUseDOM from 'app/js/utils/device/canUseDOM';\nimport assert from 'app/js/utils/log/assert';\nimport getActiveElementUID, {\n  emptyElementUID,\n} from 'app/js/views/v3/helpers/focus/getActiveElementUID';\nimport getUniqueElementID from 'app/js/views/v3/helpers/getUniqueElementID';\nimport {\n  IS_ACTIVE,\n  IS_DISABLED,\n  IS_FOCUSED,\n} from 'app/js/views/v3/helpers/modifierClassNames';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport shouldPureComponentUpdate from 'app/js/views/v3/helpers/shouldPureComponentUpdate';\nimport styles from './Link.css';\n\nexport interface LinkProps {\n  component?: string;\n  className?: string;\n  download?: string;\n  to?: string;\n  target?: string;\n  tabIndex?: string;\n  role?: string;\n  kind?: any; // TODO: PropTypes.oneOf(kinds.all)\n  size?: any; // TODO: PropTypes.oneOf(sizes.all)\n  isSelected?: boolean;\n  isDisabled?: boolean;\n  allowFocusOnPress?: boolean;\n  focusOnEnabled?: boolean;\n  onPress?: (event: any) => void;\n  onTouchStart?: (event: any) => void;\n  onTouchMove?: (event: any) => void;\n  onTouchEnd?: (event: any) => void;\n  onTouchCancel?: (event: any) => void;\n  onMouseDown?: (event: any) => void;\n  onMouseUp?: (event: any) => void;\n  onMouseLeave?: (event: any) => void;\n  onClick?: (event: any) => void;\n  onFocus?: (event: any) => void;\n  onBlur?: (event: any) => void;\n}\n\nlet lastActiveElementUID = emptyElementUID;\n\nif (canUseDOM) {\n  window.addEventListener('blur', () => {\n    // See: https://github.com/plexinc/plex-web-client/issues/12836\n    lastActiveElementUID = getActiveElementUID();\n  });\n}\n\nclass Link extends Component<LinkProps> {\n  static defaultProps = {\n    component: 'button',\n    kind: kinds.DEFAULT,\n    isSelected: false,\n    isDisabled: false,\n    allowFocusOnPress: false,\n  };\n  // eslint-disable-next-line react/sort-comp\n  _isActive: any;\n  _isFocused: any;\n  _isTouch: any;\n  _preventFocus: any;\n  _preventOnClick: any;\n  _ref: any;\n  _uid: any;\n\n  //\n  // Lifecycle\n\n  constructor(props: LinkProps, context: any) {\n    super(props, context);\n    __DEV__ &&\n      assert(\n        !props.onClick,\n        'Use `onPress` instead of `onClick` for reliable behavior on touch screens'\n      );\n    this._preventFocus = false;\n    this._preventOnClick = false;\n    this._isTouch = false;\n    this._isActive = false;\n    this._isFocused = false;\n    this._uid = getUniqueElementID();\n    this.state = {\n      isActive: false,\n      isFocused: false,\n    };\n    this._ref = React.createRef();\n  }\n\n  componentDidMount() {\n    if (!(this.props as any).isDisabled && (this.props as any).focusOnEnabled) {\n      this._ref.current.focus();\n    }\n  }\n\n  shouldComponentUpdate(nextProps: any, nextState: any) {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 5 arguments, but got 3.\n    return shouldPureComponentUpdate(this, nextProps, nextState);\n  }\n\n  componentDidUpdate(prevProps: any) {\n    const shouldFocus =\n      (this.props as any).focusOnEnabled && !(this.props as any).isDisabled;\n    const previousShouldFocus =\n      prevProps.focusOnEnabled && !prevProps.isDisabled;\n    if (shouldFocus && !previousShouldFocus) {\n      this._ref.current.focus();\n    }\n  }\n\n  //\n  // Control\n\n  _activate(isActive: any) {\n    // `setState` is async, so events may trigger listeners before\n    // `this.state` reflects the current state. Use instance properties to\n    // avoid this pitfall.\n    this._isActive = isActive;\n    this.setState({ isActive });\n  }\n\n  _focus(isFocused: any) {\n    // `setState` is async, so events may trigger listeners before\n    // `this.state` reflects the current state. Use instance properties to\n    // avoid this pitfall.\n    this._isFocused = isFocused;\n    this.setState({ isFocused });\n  }\n\n  _shouldPreventFocus() {\n    if ((this.props as any).allowFocusOnPress) {\n      return false;\n    }\n    const activeElementUID = getActiveElementUID();\n    const isAlreadyFocused = activeElementUID === this._uid;\n    return !isAlreadyFocused;\n  }\n\n  _press(event: any) {\n    const { onPress } = this.props;\n    if (onPress) {\n      onPress(event);\n    }\n  }\n\n  //\n  // Listeners\n\n  onTouchStart = (event: any) => {\n    this._isTouch = true;\n    this._preventFocus = this._shouldPreventFocus();\n    if (event.touches.length === 1) {\n      this._activate(true);\n    }\n    if ((this.props as any).onTouchStart) {\n      (this.props as any).onTouchStart(event);\n    }\n  };\n\n  onTouchMove = (event: any) => {\n    // The user might be scrolling, so don't consider this touch as a press.\n    this._activate(false);\n    if ((this.props as any).onTouchMove) {\n      (this.props as any).onTouchMove(event);\n    }\n  };\n\n  onTouchEnd = (event: any) => {\n    const { to, target, isDisabled, onTouchEnd } = this.props;\n    if (this._isActive && !isDisabled) {\n      // If the pressable component is a link, navigate on touch end to avoid\n      // the touch delay on some devices, which could interfere with app\n      // behavior (e.g. a menu closing on press).\n      if (to && (!target || target === '_self')) {\n        event.preventDefault();\n        window.location.href = to;\n      }\n      this._press(event);\n    }\n    this._activate(false);\n    if (onTouchEnd) {\n      onTouchEnd(event);\n    }\n  };\n\n  onTouchCancel = (event: any) => {\n    this._isTouch = false;\n    this._activate(false);\n    if ((this.props as any).onTouchCancel) {\n      (this.props as any).onTouchCancel(event);\n    }\n  };\n\n  onMouseDown = (event: any) => {\n    if (this._isTouch) {\n      return;\n    }\n    this._preventFocus = this._shouldPreventFocus();\n    if (event.button === 0) {\n      this._activate(true);\n    }\n    if ((this.props as any).onMouseDown) {\n      (this.props as any).onMouseDown(event);\n    }\n  };\n\n  onMouseUp = (event: any) => {\n    if (this._isTouch) {\n      return;\n    }\n    const { isDisabled, onMouseUp } = this.props;\n    if (this._isActive && !isDisabled) {\n      this._press(event);\n      this._preventOnClick = true;\n    }\n    this._activate(false);\n    if (onMouseUp) {\n      onMouseUp(event);\n    }\n  };\n\n  onMouseLeave = (event: any) => {\n    if (this._isTouch) {\n      return;\n    }\n    // The mouseup event does not fire for the pressable component if no\n    // longer hovered over the component. Cancel the press if the mouse leaves\n    // the component so the active state does not stick. Do not actually set\n    // _isActive because there is an issue in Edge on touch screens that fires\n    // onMouseUp and onMouseLeave before onMouseDown when touching a child of\n    // the element.\n    if (this._isActive) {\n      this.setState({ isActive: false });\n    }\n    if ((this.props as any).onMouseLeave) {\n      (this.props as any).onMouseLeave(event);\n    }\n  };\n\n  onClick = (event: any) => {\n    // If the browser does not focus on click, reset the `_preventFocus` flag\n    // so it does not prevent future focus events.\n    this._preventFocus = false;\n    const { isDisabled } = this.props;\n    if (\n      !this._preventOnClick &&\n      !this._isTouch &&\n      !this._isActive &&\n      this._isFocused &&\n      !isDisabled\n    ) {\n      this._press(event);\n    }\n    this._preventOnClick = false;\n    // Reset the `_isTouch` flag after the click event in case the user is\n    // transitioning between a mouse and touch.\n    this._isTouch = false;\n  };\n\n  onFocus = (event: any) => {\n    if (this._preventFocus) {\n      this._preventFocus = false;\n      return;\n    }\n    if (this._uid === lastActiveElementUID) {\n      lastActiveElementUID = emptyElementUID;\n      return;\n    }\n    this._focus(true);\n    if ((this.props as any).onFocus) {\n      (this.props as any).onFocus(event);\n    }\n  };\n\n  onBlur = (event: any) => {\n    this._focus(false);\n    if ((this.props as any).onBlur) {\n      (this.props as any).onBlur(event);\n    }\n  };\n\n  //\n  // Render\n\n  render() {\n    const {\n      className,\n      to,\n      kind,\n      size,\n      isSelected,\n      isDisabled,\n      component,\n      allowFocusOnPress,\n      role,\n      focusOnEnabled,\n      onPress,\n      ...otherProps\n    } = this.props;\n\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'isActive' does not exist on type 'Readon... Remove this comment to see the full error message\n    const { isActive, isFocused } = this.state;\n    const linkProps = { 'data-uid': this._uid };\n\n    let el = component;\n\n    if (to) {\n      el = 'a';\n      (linkProps as any).href = to;\n    }\n    if (role) {\n      (linkProps as any).role = role;\n    } else {\n      (linkProps as any).role = to ? 'link' : 'button';\n    }\n\n    (linkProps as any).className = classNames(\n      className,\n      styles.link,\n      styles[kind],\n      size && styles[size],\n      isSelected && styles.isSelected,\n      isActive && IS_ACTIVE,\n      isFocused && IS_FOCUSED,\n      isDisabled && IS_DISABLED\n    );\n\n    if (el === 'button' || el === 'input') {\n      (linkProps as any).type = (otherProps as any).type || 'button';\n      (linkProps as any).disabled = isDisabled;\n    }\n\n    return el\n      ? React.createElement(el, {\n          ...otherProps,\n          ...linkProps,\n          ref: this._ref,\n          onTouchStart: this.onTouchStart,\n          onTouchMove: this.onTouchMove,\n          onTouchEnd: this.onTouchEnd,\n          onTouchCancel: this.onTouchCancel,\n          onMouseDown: this.onMouseDown,\n          onMouseUp: this.onMouseUp,\n          onMouseLeave: this.onMouseLeave,\n          onClick: this.onClick,\n          onFocus: this.onFocus,\n          onBlur: this.onBlur,\n        })\n      : null;\n  }\n}\n\nexport default Link;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport classNames from 'classnames';\nimport React from 'react';\nimport t from 'app/js/utils/t';\nimport Spinner from 'app/js/views/v3/components/core/base/Spinner';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport colors from 'app/styles/variables/colors';\nimport Button, { ButtonProps } from './Button';\nimport styles from './SpinnerButton.css';\n\ninterface SpinnerButtonProps extends Partial<ButtonProps> {\n  className?: string;\n  children?: React.ReactNode;\n  isDisabled?: boolean;\n  isSpinning?: boolean;\n  loadingLabel?: string;\n  spinnerSize?: any; // TODO: PropTypes.oneOf(sizes.all)\n  spinnerColor?: string;\n}\n\nfunction SpinnerButton({\n  children,\n  className,\n  loadingLabel = t('Loading'),\n  spinnerSize = sizes.SMALL,\n  spinnerColor = colors.defaultColor,\n  isDisabled = false,\n  isSpinning = false,\n  ...props\n}: SpinnerButtonProps) {\n  return (\n    <Button\n      className={classNames(\n        className,\n        styles.button,\n        isSpinning && styles.isSpinning\n      )}\n      isDisabled={isDisabled || isSpinning}\n      {...props}\n    >\n      <span className={styles.spinnerContainer}>\n        <Spinner\n          className={styles.spinner}\n          color={spinnerColor}\n          loadingLabel={loadingLabel}\n          size={spinnerSize}\n        />\n      </span>\n      <span className={styles.label}>{children}</span>\n    </Button>\n  );\n}\n\nexport default SpinnerButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"mfBoX r2dcz x5jRQ\",\"spinnerContainer\":\"X__bn\",\"spinner\":\"RfHtl dHO6j m_4Rc\",\"label\":\"JNAY4\",\"isSpinning\":\"t6Ayq\"};","export default function createAvatarUrl(baseUrl: string, size: number): string {\n  return `${baseUrl}&size=${size}`;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport createAvatarUrl from 'app/js/v4/utils/createAvatarUrl';\nimport TranscodeImageConnector from 'app/js/views/v3/components/core/images/TranscodeImageConnector';\nimport styles from './AvatarImg.css';\n\ntype AvatarImgProps = {\n  height: number;\n  width: number;\n  serverEntityID: string;\n  url?: string;\n  className?: string;\n};\n\nfunction AvatarImg(props: AvatarImgProps) {\n  const { className, url, width: size, ...otherProps } = props;\n\n  return (\n    <div className={className}>\n      <TranscodeImageConnector\n        {...otherProps}\n        url={url && createAvatarUrl(url, size)}\n        width={size}\n      />\n    </div>\n  );\n}\n\nAvatarImg.defaultProps = {\n  className: styles.avatar,\n};\n\nexport default AvatarImg;\n","// extracted by mini-css-extract-plugin\nexport default {\"avatar\":\"hdLnl\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\n\ninterface BackgroundImageProps {\n  className?: string;\n  style?: any;\n  src?: string;\n  width?: number | string;\n  height?: number | string;\n  backgroundSize?: string;\n  backgroundPosition?: string;\n  backgroundRepeat?: string;\n}\n\nfunction BackgroundImage(props: BackgroundImageProps) {\n  const {\n    className,\n    style,\n    src,\n    width,\n    height,\n    backgroundSize,\n    backgroundPosition,\n    backgroundRepeat,\n  } = props;\n\n  return (\n    <div\n      className={className}\n      style={{\n        width,\n        height,\n        backgroundImage: `url(${src})`,\n        backgroundSize,\n        backgroundPosition,\n        backgroundRepeat,\n        ...style,\n      }}\n    />\n  );\n}\n\nBackgroundImage.defaultProps = {\n  backgroundSize: 'cover',\n  backgroundPosition: 'center',\n  backgroundRepeat: 'no-repeat',\n};\n\nexport default BackgroundImage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport _ from 'underscore';\nimport createShallowEqualSelector from 'app/js/stores/selectors/createShallowEqualSelector';\nimport createUnstableProviderSelector from 'app/js/stores/selectors/provider/createUnstableProviderSelector';\nimport createUnstableServerSelector from 'app/js/stores/selectors/server/createUnstableServerSelector';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport isAbsoluteUrl from 'app/js/utils/url/isAbsoluteUrl';\nimport path from 'app/js/utils/url/path';\n\nconst NOOP = {};\nconst memo = {};\n\nfunction selectTranscoderDetails(appState_: any, props: any) {\n  const { serverEntityID, providerEntityID } = props;\n  const key = `${serverEntityID}:${providerEntityID}`;\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  if (!memo[key]) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    memo[key] = createShallowEqualSelector(\n      createSelector(\n        createUnstableServerSelector(),\n        createUnstableProviderSelector(),\n        (server, provider) => {\n          const uri =\n            server && server.activeConnection && server.activeConnection.uri;\n\n          if (!uri) {\n            // Return an Object to satisfy shallowEqual within\n            // createShallowEqualSelector.\n            return NOOP;\n          }\n\n          let transcodeKey = '/photo/:/transcode';\n          let isAbsoluteTranscodeKey = false;\n          let isPublicTranscoder = false;\n          let baseUrl;\n\n          // If we're not using a fallback media server for the image transcode,\n          // try to find the provider feature for an image transcoder.\n\n          if (provider) {\n            const imageTranscoderFeature = _.findWhere(provider.features, {\n              type: providerFeatureTypes.IMAGE_TRANSCODER,\n            });\n\n            if (imageTranscoderFeature) {\n              transcodeKey = imageTranscoderFeature.key;\n              isAbsoluteTranscodeKey = isAbsoluteUrl(transcodeKey);\n              isPublicTranscoder = imageTranscoderFeature.public;\n            }\n          }\n\n          // Use a relative path if the transcoder is relative to the image's\n          // server. If the transcoder is hosted separately or part of a\n          // different server, use the absolute path.\n\n          if (isAbsoluteTranscodeKey) {\n            baseUrl = provider && provider.baseURL ? provider.baseURL : uri;\n          } else {\n            baseUrl = '';\n          }\n\n          return {\n            accessToken: server.accessToken,\n            baseUrl,\n            isAbsoluteTranscodeKey,\n            isPublicTranscoder,\n            transcodeKey,\n            uri,\n          };\n        }\n      ),\n      (parts) => parts\n    );\n  }\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  return memo[key](appState_, props);\n}\n\nexport default function createImageTranscodeUrlSelector(options: any) {\n  // These optional parameters are appended onto the `url` prop before being\n  // passed into the transcoder.\n  const urlParams = options && options.urlParams;\n\n  return createSelector(\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState, { url }) => url,\n    selectTranscoderDetails,\n    (url, transcoderDetails) => {\n      if (!url || transcoderDetails === NOOP) {\n        return;\n      }\n\n      const {\n        accessToken,\n        baseUrl,\n        isAbsoluteTranscodeKey,\n        isPublicTranscoder,\n        transcodeKey,\n        uri,\n      } = transcoderDetails;\n\n      let imageUrl;\n\n      if (isAbsoluteUrl(url)) {\n        imageUrl = url;\n      } else {\n        const params = { 'X-Plex-Token': accessToken };\n\n        if (urlParams) {\n          Object.assign(params, urlParams);\n        }\n\n        imageUrl = path.join([baseUrl, url], params);\n      }\n\n      const pathParts = isAbsoluteTranscodeKey\n        ? transcodeKey\n        : [uri, transcodeKey];\n\n      const transcodeUrl = path.join(pathParts, {\n        url: imageUrl,\n        'X-Plex-Token': isPublicTranscoder ? undefined : accessToken,\n      });\n\n      return transcodeUrl;\n    }\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectAllProviderEntities from './selectAllProviderEntities';\n\nexport default function createUnstableProviderSelector() {\n  return createSelector(\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { providerEntityID }: any) => providerEntityID,\n    selectAllProviderEntities,\n    (providerEntityID, providerEntities) => providerEntities[providerEntityID]\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport BackgroundImage from './BackgroundImage';\n\n// From: http://css-tricks.com/snippets/html/base64-encode-of-1x1px-transparent-gif/\nexport const EMPTY_IMAGE =\n  'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n\nfunction cleanup(img: any) {\n  if (img) {\n    img.onload = img.onabort = img.onerror = undefined;\n  }\n  return undefined;\n}\n\ninterface PreloadImageProps {\n  src?: string;\n  emptySrc?: string;\n  component: React.ReactElement;\n  preloadOnMount?: boolean;\n  onLoad?: (...args: any[]) => any;\n  onError?: (...args: any[]) => any;\n}\n\nfunction PreloadImage(props: PreloadImageProps) {\n  const {\n    src,\n    emptySrc,\n    component: ImageComponent,\n    preloadOnMount,\n    onLoad,\n    onError,\n    ...otherProps\n  } = props;\n\n  const [preloadedSrc, setPreloadedSrc] = useState(preloadOnMount ? null : src);\n  const [error, setError] = useState(null);\n  const hasSatisfiedMountCondition = useRef(preloadOnMount);\n\n  useEffect(() => {\n    if (!hasSatisfiedMountCondition.current) {\n      // Ignore the initial src effects when using preloadOnMount={false}. The\n      // first `src` value should not be preloaded while the later ones should.\n      hasSatisfiedMountCondition.current = true;\n      return;\n    }\n\n    if (!src) {\n      return;\n    }\n\n    let img = new window.Image();\n\n    img.onload = () => {\n      // @ts-expect-error ts-migrate(2322) FIXME: Type 'undefined' is not assignable to type 'HTMLIm... Remove this comment to see the full error message\n      img = cleanup(img);\n      setPreloadedSrc(src);\n      setError(null);\n    };\n\n    img.onabort = img.onerror = () => {\n      // @ts-expect-error ts-migrate(2322) FIXME: Type 'undefined' is not assignable to type 'HTMLIm... Remove this comment to see the full error message\n      img = cleanup(img);\n      setPreloadedSrc(null);\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'Error' is not assignable to para... Remove this comment to see the full error message\n      setError(new Error(`Unable to load ${src}`));\n    };\n\n    img.src = src;\n\n    return () => {\n      // @ts-expect-error ts-migrate(2322) FIXME: Type 'undefined' is not assignable to type 'HTMLIm... Remove this comment to see the full error message\n      img = cleanup(img);\n    };\n  }, [src]);\n\n  useEffect(() => {\n    if (!src && preloadedSrc) {\n      setPreloadedSrc(null);\n    }\n  }, [preloadedSrc, src]);\n\n  useEffect(() => {\n    if (preloadedSrc && onLoad) {\n      onLoad(preloadedSrc);\n    }\n  }, [preloadedSrc, onLoad]);\n\n  useEffect(() => {\n    if (error && onError) {\n      onError(error);\n    }\n  }, [error, onError]);\n\n  // @ts-expect-error ts-migrate(2604) FIXME: JSX element type 'ImageComponent' does not have an... Remove this comment to see the full error message\n  return <ImageComponent {...otherProps} src={preloadedSrc || emptySrc} />;\n}\n\nPreloadImage.defaultProps = {\n  emptySrc: EMPTY_IMAGE,\n  component: BackgroundImage,\n  preloadOnMount: true,\n};\n\nexport default PreloadImage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport React, { memo, useEffect, useRef, useState } from 'react';\nimport ImageCache from 'app/js/utils/cache/ImageCache';\nimport getPixelRatio from 'app/js/utils/constants/getPixelRatio';\nimport * as imageSizes from 'app/js/utils/constants/imageSizes';\nimport assert from 'app/js/utils/log/assert';\nimport makeCancelable from 'app/js/utils/promise/makeCancelable';\nimport path from 'app/js/utils/url/path';\nimport PreloadImage from './PreloadImage';\n\nexport const cache = new ImageCache();\n\nconst sizeMemo = {};\nconst widthMemo = {};\n\nconst sortedImageSizes = [\n  imageSizes.SMALL_60,\n  imageSizes.SMALL_120,\n  imageSizes.MEDIUM_240,\n  imageSizes.MEDIUM_360,\n  imageSizes.LARGE_480,\n  imageSizes.LARGE_720,\n  imageSizes.LARGE_1280,\n  imageSizes.LARGE_1920,\n].sort((a, b) => getWidthForSize(a) - getWidthForSize(b));\n\nfunction getWidthForSize(imageSize: any) {\n  if (widthMemo.hasOwnProperty(imageSize)) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    return widthMemo[imageSize];\n  }\n\n  const width = imageSize.split('-')[1];\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  widthMemo[imageSize] = width;\n  return width;\n}\n\nfunction getSizeForWidth(width: any) {\n  if (sizeMemo.hasOwnProperty(width)) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    return sizeMemo[width];\n  }\n\n  const size =\n    sortedImageSizes.find((imageSize) => getWidthForSize(imageSize) >= width) ||\n    sortedImageSizes[sortedImageSizes.length - 1];\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  sizeMemo[width] = size;\n  return size;\n}\n\nfunction getDimensionsParams(props: any) {\n  if (__DEV__) {\n    assert(\n      props.size || (props.width && (props.height || props.supportsSize)),\n      'TranscodeImage requires `width` to determine `size` or both `width` and `height`'\n    );\n  }\n\n  if (__DEV__) {\n    assert(\n      !props.size || props.supportsSize,\n      'TranscodeImage cannot use `size` directly if the server does not support the param'\n    );\n  }\n\n  const pxRatio = props.allowPixelRatioSize ? getPixelRatio() : 1;\n  const size = props.size || getSizeForWidth(props.width);\n\n  if (props.supportsSize) {\n    return {\n      size,\n      scale: Math.ceil(pxRatio),\n    };\n  } else {\n    const bracketedWidth = getWidthForSize(size);\n    const aspectRatio = props.height / props.width;\n\n    return {\n      width: Math.ceil(bracketedWidth * pxRatio),\n      height: Math.ceil(aspectRatio * bracketedWidth * pxRatio),\n      minSize: props.minSize ? 1 : undefined,\n      upscale: props.upscale ? 1 : undefined,\n    };\n  }\n}\n\nfunction appendTranscodeParams(url: any, props: any) {\n  if (!url) {\n    return;\n  }\n\n  const params = Object.assign(getDimensionsParams(props), props.filters);\n\n  if (props.format) {\n    params.format = props.format;\n  }\n\n  if (props.quality) {\n    params.quality = props.quality;\n  }\n\n  // Move existing params to the end of the url. Plex Media Server expects\n  // X-Plex- params at the end of the query string because they can be headers\n  // as well as params.\n\n  const queryIndex = url.indexOf('?');\n\n  let urlWithParams = url;\n\n  if (queryIndex > -1) {\n    urlWithParams = path.join(url.substring(0, queryIndex), params);\n    urlWithParams += urlWithParams.indexOf('?') === -1 ? '?' : '&';\n    urlWithParams += url.substring(queryIndex + 1);\n  } else {\n    urlWithParams = path.join(urlWithParams, params);\n  }\n\n  return urlWithParams;\n}\n\nfunction loadBlob(url: any) {\n  const deferred = $.Deferred();\n  const cancelable = makeCancelable(deferred.promise());\n\n  const request = {\n    cancelable,\n    xhr: null,\n  };\n\n  // Request the image data and create a Blob which is stored by the browser and\n  // then referenced with an object url.\n\n  const xhr = new window.XMLHttpRequest();\n  xhr.open('GET', url, true);\n  xhr.responseType = 'arraybuffer';\n\n  // Keep a reference to the request so we can abort if necessary.\n  // @ts-expect-error ts-migrate(2322) FIXME: Type 'XMLHttpRequest' is not assignable to type 'n... Remove this comment to see the full error message\n  request.xhr = xhr;\n\n  xhr.onreadystatechange = () => {\n    if (xhr.readyState === 4) {\n      xhr.onreadystatechange = null;\n\n      if (xhr.status === 200) {\n        const blob = new window.Blob([xhr.response], { type: 'image/jpeg' });\n        const blobUrl = window.URL.createObjectURL(blob);\n\n        // Store the blobUrl in the image cache so it can be reused later.\n        cache.store({ url, blobUrl });\n\n        deferred.resolve(blobUrl);\n      } else {\n        deferred.reject();\n      }\n    }\n  };\n\n  xhr.send();\n\n  return request;\n}\n\nexport interface TranscodeImageProps {\n  url?: string;\n  size?: any; // TODO: PropTypes.oneOf(sortedImageSizes)\n  width?: number;\n  height?: number;\n  minSize?: boolean;\n  upscale?: boolean;\n  format?: string;\n  quality?: number;\n  filters?: {\n    blur?: number;\n    background?: string;\n    opacity?: number;\n    saturation?: number;\n  };\n  allowPixelRatioSize?: boolean;\n  allowImageBlobs?: boolean;\n  supportsSize?: boolean;\n  onError?: (...args: any[]) => any;\n}\n\nexport function TranscodeImage(props: TranscodeImageProps) {\n  const {\n    url,\n    minSize,\n    format,\n    quality,\n    upscale,\n    filters,\n    allowPixelRatioSize,\n    allowImageBlobs,\n    supportsSize,\n    onError,\n    ...otherProps\n  } = props;\n\n  const transcodeUrl = appendTranscodeParams(url, props);\n  let cachedBlobUrl: any;\n  let cachedPlaceholderUrl;\n\n  if (transcodeUrl && allowImageBlobs) {\n    cachedBlobUrl = cache.getBlobUrl(transcodeUrl);\n\n    if (!cachedBlobUrl) {\n      cachedPlaceholderUrl = cache.getPlaceholder(transcodeUrl);\n    }\n  }\n\n  const [src, setSrc] = useState(\n    cachedBlobUrl ||\n      cachedPlaceholderUrl ||\n      (allowImageBlobs ? null : transcodeUrl)\n  );\n  const isErrorRef = useRef(false);\n\n  useEffect(() => {\n    if (isErrorRef.current) {\n      isErrorRef.current = false;\n\n      // If an image failed to load, call the `onError` callback and bail early\n      // so the component doesn't request the bad url again. Be careful of\n      // batched state updates. The effect might not run immediately after\n      // `setSrc(null)`.\n\n      if (src == null) {\n        onError && onError();\n        return;\n      }\n    }\n\n    let request: any;\n\n    if (cachedBlobUrl) {\n      // If we already have a blob url for this transcode url in cache, we do\n      // not need to load a new blob image. If this is not the initial render,\n      // we still need to set the src to the new blob url.\n\n      if (src !== cachedBlobUrl) {\n        setSrc(cachedBlobUrl);\n      }\n    } else if (transcodeUrl && allowImageBlobs) {\n      request = loadBlob(transcodeUrl);\n\n      request.cancelable.promise.then(\n        // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'nextBlobUrl' implicitly has an 'any' ty... Remove this comment to see the full error message\n        (nextBlobUrl) => {\n          request = null;\n\n          setSrc(nextBlobUrl);\n        },\n        // @ts-expect-error ts-migrate(2525) FIXME: Initializer provides no value for this binding ele... Remove this comment to see the full error message\n        ({ isCanceled } = {}) => {\n          if (!isCanceled) {\n            request = null;\n\n            if (src === null) {\n              // The effect won't run again if `src` is already null, so it's\n              // safe to call `onError` immediately.\n              onError && onError();\n            } else {\n              isErrorRef.current = true;\n              setSrc(null);\n            }\n          }\n        }\n      );\n    } else if (transcodeUrl && !allowImageBlobs) {\n      setSrc(transcodeUrl);\n    } else {\n      setSrc(null);\n    }\n\n    return () => {\n      if (request) {\n        request.cancelable.cancel();\n\n        if (request.xhr) {\n          request.xhr.onreadystatechange = null;\n          request.xhr.abort();\n        }\n      }\n    };\n  }, [src, transcodeUrl, cachedBlobUrl, allowImageBlobs, onError]);\n\n  // `PreloadImage` is responsible for calling `onLoad` after the image is\n  // preloaded and rendered.\n  return <PreloadImage {...otherProps} src={src} onError={onError} />;\n}\n\nTranscodeImage.defaultProps = {\n  minSize: true,\n  upscale: true,\n  allowPixelRatioSize: true,\n  allowImageBlobs: true,\n};\n\nexport default memo(TranscodeImage);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport config from 'app/js/models/config';\nimport createImageTranscodeUrlSelector from 'app/js/stores/selectors/createImageTranscodeUrlSelector';\nimport selectStableProvider from 'app/js/stores/selectors/provider/selectStableProvider';\nimport selectStableServer from 'app/js/stores/selectors/server/selectStableServer';\nimport TranscodeImage from 'app/js/views/v3/components/core/images/TranscodeImage';\n\n// All requests from the Qt Desktop client to the nano host should include the\n// X-Plex-Account-ID: 1 header. Specifically this header ensures that poster\n// requests for playlist composites of downloaded playlists work correctly.\nconst options = config.allowSyncDownload\n  ? { urlParams: { 'X-Plex-Account-ID': 1 } }\n  : null;\n\nfunction createMapStateToProps() {\n  return createSelector(\n    selectStableServer,\n    selectStableProvider,\n    createImageTranscodeUrlSelector(options),\n    (server, provider, transcodeUrl) => {\n      return {\n        url: transcodeUrl,\n        // The size parameter is only supported by the provider cloud transcoder\n        // currently, not the plex.tv or PMS transcoders.\n        supportsSize: !!(server && server.isCloud && provider),\n      };\n    }\n  );\n}\n\nconst TranscodeImageConnector = connect(createMapStateToProps)(TranscodeImage);\n\nexport default TranscodeImageConnector;\n","// extracted by mini-css-extract-plugin\nexport default {\"menuPortal\":\"QVH3_\",\"menuScroller\":\"iYDY8 RXkcY\",\"menu\":\"CgKY7\",\"isDisabled\":\"UhC8e\",\"small\":\"_MjW_\",\"medium\":\"TAtgQ\",\"large\":\"lYXUn\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport classNames from 'classnames';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport React, { Component } from 'react';\nimport * as keyCodes from 'app/js/utils/constants/keyCodes';\nimport PopperPortal from 'app/js/views/v3/components/core/base/PopperPortal';\nimport Scroller from 'app/js/views/v3/components/core/base/Scroller';\nimport cssDurationToSeconds from 'app/js/views/v3/helpers/css/cssDurationToSeconds';\nimport * as focusManager from 'app/js/views/v3/helpers/focus/focusManager';\nimport getUniqueElementID from 'app/js/views/v3/helpers/getUniqueElementID';\nimport * as scrollDirections from 'app/js/views/v3/helpers/props/scrollDirections';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport shouldPureComponentUpdate from 'app/js/views/v3/helpers/shouldPureComponentUpdate';\nimport animations from 'app/styles/variables/animations';\nimport dimensions from 'app/styles/variables/dimensions';\nimport easings from 'app/styles/variables/easings';\nimport styles from './Menu.css';\n\nconst MENU_SPEED_SECONDS = cssDurationToSeconds(animations.menuSpeed);\nconst MENU_SPEED_MILLISECONDS = MENU_SPEED_SECONDS * 1000;\nconst MENU_PADDING = parseInt(dimensions.menuPadding, 10);\n\nconst opacityTransition = {\n  ease: 'easeOut',\n  duration: MENU_SPEED_SECONDS,\n};\n\nconst transformTransition = {\n  ease: easings.motionEasing,\n  duration: MENU_SPEED_SECONDS,\n};\n\nconst transition = {\n  opacity: opacityTransition,\n  y: transformTransition,\n  scale: transformTransition,\n};\n\nconst containerVariants = {\n  preEnter: {\n    opacity: 0,\n    y: -10,\n    scale: 0.95,\n    transition,\n  },\n  enter: {\n    opacity: 1,\n    y: 0,\n    scale: 1,\n    transition,\n  },\n  exit: {\n    opacity: 0,\n    y: 10,\n    scale: 0.95,\n    transition,\n  },\n};\n\nconst menuPopperModifiers = [\n  {\n    name: 'preventOverflow',\n    enabled: true,\n    options: {\n      altAxis: true,\n    },\n  },\n];\n\nfunction getMaxHeight(props: any) {\n  return Math.min(window.innerHeight - MENU_PADDING * 2, props.maxHeight);\n}\n\ninterface MenuProps {\n  className?: string;\n  portalClassName?: string;\n  target: string;\n  options?: any;\n  isOpen: boolean;\n  isDisabled?: boolean;\n  isAutoCloseDisabled?: boolean;\n  maxHeight?: number;\n  scrollerProps?: any;\n  size?: any; // TODO: PropTypes.oneOf(sizes.all)\n  onMenuClose: (...args: any[]) => any;\n  onMouseEnter?: (...args: any[]) => any;\n  onMouseLeave?: (...args: any[]) => any;\n  onMenuCloseComplete?: (...args: any[]) => any;\n}\n\ntype MenuState = any;\n\nclass Menu extends Component<MenuProps, MenuState> {\n  static defaultProps = {\n    className: styles.menu,\n    portalClassName: styles.menuPortal,\n    size: sizes.MEDIUM,\n    maxHeight: 600,\n    isDisabled: false,\n    scrollerProps: {\n      className: styles.menuScroller,\n      scrollDirection: scrollDirections.VERTICAL,\n      autoScroll: true,\n    },\n  };\n\n  // eslint-disable-next-line react/sort-comp\n  _menuID: any;\n  _willMenuClose: any;\n\n  //\n  // Lifecycle\n\n  constructor(props: any, context: any) {\n    super(props, context);\n\n    this.state = {\n      maxHeight: getMaxHeight(props),\n    };\n\n    this._willMenuClose = false;\n\n    this._menuID = getUniqueElementID();\n  }\n\n  componentDidMount() {\n    if (this.props.isOpen) {\n      this._enable();\n    }\n\n    window.addEventListener('resize', this.onResize);\n  }\n\n  shouldComponentUpdate(nextProps: MenuProps, nextState: MenuState) {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 5 arguments, but got 3.\n    return shouldPureComponentUpdate(this, nextProps, nextState);\n  }\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'prevState' is declared but its value is never rea... Remove this comment to see the full error message\n  componentDidUpdate(prevProps: MenuProps, prevState: MenuState) {\n    const wasEnabled = prevProps.isOpen && !prevProps.isAutoCloseDisabled;\n    const isEnabled = this.props.isOpen && !this.props.isAutoCloseDisabled;\n\n    if (!wasEnabled && isEnabled) {\n      this._enable();\n    } else if (wasEnabled && !isEnabled) {\n      this._disable();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isOpen && !this.props.isAutoCloseDisabled) {\n      this._disable();\n    }\n\n    window.removeEventListener('resize', this.onResize);\n  }\n\n  //\n  // Control\n\n  _enable() {\n    focusManager.startScopedFocus(document.getElementById(this._menuID));\n\n    // Avoid the touch click delay by using `mouseup` and `touchend` events.\n    document.addEventListener('mousedown', this.onWindowDownPress);\n    document.addEventListener('touchstart', this.onWindowDownPress);\n    document.addEventListener('mouseup', this.onWindowUpPress);\n    document.addEventListener('touchend', this.onWindowUpPress);\n    document.addEventListener('keydown', this.onKeyDown);\n  }\n\n  _disable() {\n    document.removeEventListener('mousedown', this.onWindowDownPress);\n    document.removeEventListener('touchstart', this.onWindowDownPress);\n    document.removeEventListener('mouseup', this.onWindowUpPress);\n    document.removeEventListener('touchend', this.onWindowUpPress);\n    document.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  _isElementContainedOrTarget(el: any) {\n    // Check to see if element is inside the menu or the component that\n    // triggered the event. Do not close the menu in these cases. Only find the\n    // target node if we know the event target is not in the container.\n\n    const { target } = this.props;\n    const containerElement = document.getElementById(this._menuID);\n    const isContainer = containerElement && containerElement.contains(el);\n    const targetElement = !isContainer && document.getElementById(target);\n    const isTarget = targetElement && targetElement.contains(el);\n\n    return isContainer || isTarget;\n  }\n\n  //\n  // Listeners\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n  onResize = (event: any) => {\n    this.setState({\n      maxHeight: getMaxHeight(this.props),\n    });\n  };\n\n  onWindowDownPress = (event: any) => {\n    if (!this._isElementContainedOrTarget(event.target)) {\n      this._willMenuClose = true;\n    }\n  };\n\n  onWindowUpPress = (event: any) => {\n    if (\n      this._willMenuClose &&\n      !this._isElementContainedOrTarget(event.target)\n    ) {\n      this.props.onMenuClose();\n    }\n\n    this._willMenuClose = false;\n  };\n\n  onKeyDown = (event: any) => {\n    const keyCode = event.keyCode;\n\n    if (keyCode === keyCodes.TAB) {\n      focusManager.scopeTabEvent(event);\n    } else if (keyCode === keyCodes.ESCAPE) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.props.onMenuClose();\n\n      // Since the user used the keyboard to close the menu, attempt to\n      // automatically restore the previously focused element to retain the\n      // focus position.\n\n      focusManager.restorePreviousFocus();\n    }\n  };\n\n  //\n  // Render\n\n  render() {\n    const {\n      children,\n      className,\n      portalClassName,\n      target,\n      options,\n      isOpen,\n      isDisabled,\n      scrollerProps,\n      size,\n      onMouseEnter,\n      onMouseLeave,\n      onMenuCloseComplete,\n    } = this.props;\n\n    const { maxHeight } = this.state;\n\n    return (\n      // @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: Element; className: string | und... Remove this comment to see the full error message\n      <PopperPortal\n        className={portalClassName}\n        closeTimeoutMilliseconds={MENU_SPEED_MILLISECONDS}\n        isOpen={isOpen}\n        options={{\n          placement: 'bottom-start',\n          ...options,\n          // Ensure we don't stop on any modifiers that might have been passed\n          // in to this component though props\n          modifiers: [...menuPopperModifiers, ...(options?.modifiers ?? [])],\n        }}\n        target={target}\n        onClose={onMenuCloseComplete}\n      >\n        <AnimatePresence>\n          {isOpen ? (\n            <motion.div\n              key=\"container\"\n              animate=\"enter\"\n              className={classNames(\n                className,\n                styles[size],\n                isDisabled && styles.isDisabled\n              )}\n              exit=\"exit\"\n              id={this._menuID}\n              initial=\"preEnter\"\n              variants={containerVariants}\n              onMouseEnter={onMouseEnter}\n              onMouseLeave={onMouseLeave}\n            >\n              <Scroller {...scrollerProps} style={{ maxHeight }}>\n                {children}\n              </Scroller>\n            </motion.div>\n          ) : null}\n        </AnimatePresence>\n      </PopperPortal>\n    );\n  }\n}\n\nexport default Menu;\n","// extracted by mini-css-extract-plugin\nexport default {\"menuItem\":\"Q4FVu\",\"isDisabled\":\"ZNVWR\",\"isHidden\":\"CrWPD\",\"default\":\"aBSil\",\"primary\":\"RQGUr\",\"success\":\"f7AUO\",\"danger\":\"l2YZ6\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport classNames from 'classnames';\nimport React from 'react';\nimport Link, { LinkProps } from 'app/js/views/v3/components/core/buttons/Link';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport styles from './MenuItem.css';\n\ninterface MenuItemProps extends LinkProps {\n  className?: string;\n  children?: React.ReactNode;\n  kind?: any; // TODO: PropTypes.oneOf(kinds.all)\n  isDisabled?: boolean;\n  isHidden?: boolean;\n}\n\nfunction MenuItem(props: MenuItemProps) {\n  const { className, children, kind, isDisabled, isHidden, ...otherProps } =\n    props;\n\n  return (\n    <Link\n      className={classNames(\n        className,\n        styles.menuItem,\n        styles[kind],\n        isDisabled && styles.isDisabled,\n        isHidden && styles.isHidden\n      )}\n      data-testid=\"dropdownItem\"\n      role=\"menuitem\"\n      {...otherProps}\n    >\n      {children}\n    </Link>\n  );\n}\n\nMenuItem.defaultProps = {\n  kind: kinds.DEFAULT,\n  isDisabled: false,\n};\n\nexport default MenuItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"separator\":\"ujh6D\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport styles from './MenuSeparator.css';\n\nfunction MenuSeparator() {\n  return <div className={styles.separator} />;\n}\n\nexport default MenuSeparator;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { resolve } from 'app/js/adapters/adapters';\nimport createChainedCallback from 'app/js/views/v3/helpers/createChainedCallback';\nimport shouldPureComponentUpdate from 'app/js/views/v3/helpers/shouldPureComponentUpdate';\n\nclass MetricsClickTracker extends Component {\n  static propTypes = {\n    children: PropTypes.element.isRequired,\n    action: PropTypes.string.isRequired,\n  };\n  static contextTypes = {\n    metricsPage: PropTypes.string.isRequired,\n  };\n  //\n  // Lifecycle\n  shouldComponentUpdate(nextProps: any, nextState: any) {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 5 arguments, but got 3.\n    return shouldPureComponentUpdate(this, nextProps, nextState);\n  }\n  //\n  // Listeners\n  // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n  onPress = (event: any) => {\n    const { children, ...metricsProperties } = this.props;\n    const { metricsPage } = this.context;\n    resolve('metrics').trackClick({\n      ...metricsProperties,\n      page: metricsPage,\n    });\n  };\n  //\n  // Render\n  render() {\n    const child = React.Children.only(this.props.children);\n    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.\n    return React.cloneElement(child, {\n      onPress: createChainedCallback(\n        this.onPress,\n        (child as any).props.onPress\n      ),\n    });\n  }\n}\nexport default MetricsClickTracker;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { resolve } from 'app/js/adapters/adapters';\nimport assert from 'app/js/utils/log/assert';\nimport shallowEqual from 'app/js/views/v3/helpers/shallowEqual';\n\ninterface MetricsPageTrackerProps {\n  page: string;\n  isDelegated?: boolean;\n}\n\nclass MetricsPageTracker extends Component<MetricsPageTrackerProps> {\n  static childContextTypes = {\n    metricsPage: PropTypes.string.isRequired,\n  };\n\n  // eslint-disable-next-line react/sort-comp\n  page: any;\n\n  //\n  // Lifecycle\n\n  constructor(props: any, context: any) {\n    super(props, context);\n\n    this.page = props.page;\n  }\n\n  getChildContext() {\n    return { metricsPage: this.page };\n  }\n\n  componentDidMount() {\n    const { children, isDelegated, ...metricsProperties } = this.props;\n\n    if (!isDelegated) {\n      // Waiting until the next frame helps our latency tracking include the\n      // browser's repaint.\n      window.requestAnimationFrame(() => {\n        resolve('metrics').trackView(metricsProperties);\n      });\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: MetricsPageTrackerProps) {\n    __DEV__ &&\n      assert(\n        nextProps.page === this.page,\n        '<MetricsPageTracker> does not support changing `page` on the fly. Context is used to pass the page value to children.'\n      );\n  }\n\n  componentDidUpdate(prevProps: MetricsPageTrackerProps) {\n    const {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'children' does not exist on type 'Metric... Remove this comment to see the full error message\n      children: prevChildren,\n      isDelegated: prevIsDelegated,\n      ...prevMetricsProperties\n    } = prevProps;\n\n    const { children, isDelegated, ...metricsProperties } = this.props;\n\n    const hasChanged =\n      prevIsDelegated !== isDelegated ||\n      !shallowEqual(prevMetricsProperties, metricsProperties);\n\n    if (!isDelegated && hasChanged) {\n      resolve('metrics').trackView(metricsProperties);\n    }\n  }\n\n  //\n  // Render\n\n  render() {\n    return this.props.children\n      ? React.Children.only(this.props.children)\n      : null;\n  }\n}\n\nexport default MetricsPageTracker;\n","// extracted by mini-css-extract-plugin\nexport default {\"modalContainer\":\"ZpXJa\",\"modalBackdrop\":\"Tw82H\",\"modal\":\"fm6U4\",\"small\":\"qB4xz fm6U4\",\"medium\":\"fNGCP fm6U4\",\"large\":\"S1gPT fm6U4\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport { AnimatePresence, motion } from 'framer-motion';\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport * as keyCodes from 'app/js/utils/constants/keyCodes';\nimport Portal from 'app/js/views/v3/components/core/base/Portal';\nimport MetricsPageTracker from 'app/js/views/v3/components/core/metrics/MetricsPageTracker';\nimport cssDurationToSeconds from 'app/js/views/v3/helpers/css/cssDurationToSeconds';\nimport * as focusManager from 'app/js/views/v3/helpers/focus/focusManager';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport shouldPureComponentUpdate from 'app/js/views/v3/helpers/shouldPureComponentUpdate';\nimport animations from 'app/styles/variables/animations';\nimport easings from 'app/styles/variables/easings';\nimport styles from './Modal.css';\n\nconst modalSpeedSeconds = cssDurationToSeconds(animations.modalSpeed);\nconst modalSpeedMilliseconds = modalSpeedSeconds * 1000;\n\nconst opacityTransition = {\n  ease: 'easeOut',\n  duration: modalSpeedSeconds,\n};\n\nconst scaleTransition = {\n  ease: easings.motionEasing,\n  duration: modalSpeedSeconds,\n};\n\nconst backdropTransition = {\n  opacity: opacityTransition,\n};\n\nconst backdropVariants = {\n  enter: {\n    opacity: 1,\n    transition: backdropTransition,\n  },\n  exit: {\n    opacity: 0,\n    transition: backdropTransition,\n  },\n};\n\nconst containerTransition = {\n  scale: scaleTransition,\n  opacity: opacityTransition,\n};\n\nconst modalContainerVariants = {\n  enter: {\n    opacity: 1,\n    scale: 1,\n    transition: containerTransition,\n  },\n  exit: {\n    opacity: 0,\n    scale: 0.95,\n    transition: containerTransition,\n  },\n};\n\ninterface ModalProps {\n  className?: string;\n  backdropClassName?: string;\n  containerClassName?: string;\n  isOpen: boolean;\n  metricsPage: string;\n  metricsProperties?: any;\n  onModalClose: () => void;\n  preventCloseOnBackdropPress?: boolean;\n  size?: typeof sizes[keyof typeof sizes];\n}\n\nclass Modal extends Component<ModalProps> {\n  static defaultProps = {\n    backdropClassName: styles.modalBackdrop,\n    containerClassName: styles.modalContainer,\n    size: sizes.MEDIUM,\n    preventCloseOnBackdropPress: false,\n  };\n\n  // eslint-disable-next-line react/sort-comp\n  _autoFocusTimeoutID: any;\n  _isBackdropPressed: any;\n\n  //\n  // Lifecycle\n\n  componentDidMount() {\n    if (this.props.isOpen) {\n      this._openModal();\n    }\n  }\n\n  shouldComponentUpdate(nextProps: ModalProps, nextState: any) {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 5 arguments, but got 3.\n    return shouldPureComponentUpdate(this, nextProps, nextState);\n  }\n\n  componentDidUpdate(prevProps: ModalProps) {\n    if (!prevProps.isOpen && this.props.isOpen) {\n      this._openModal();\n    } else if (prevProps.isOpen && !this.props.isOpen) {\n      this._closeModal();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isOpen) {\n      this._closeModal();\n    }\n  }\n\n  //\n  // Control\n\n  _openModal() {\n    focusManager.startScopedFocus(ReactDOM.findDOMNode(this.refs.modal));\n\n    this._autoFocusTimeoutID = window.setTimeout(\n      focusManager.scopeAutoFocus,\n      modalSpeedMilliseconds\n    );\n\n    document.addEventListener('keydown', this.onKeyDown);\n  }\n\n  _closeModal() {\n    window.clearTimeout(this._autoFocusTimeoutID);\n\n    document.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  _isBackdropTarget(event: any) {\n    const targetElement = this._findEventTarget(event);\n\n    if (targetElement) {\n      const modalElement = ReactDOM.findDOMNode(this.refs.modal);\n\n      return !modalElement || !modalElement.contains(targetElement);\n    }\n\n    return false;\n  }\n\n  _findEventTarget(event: any) {\n    const changedTouches = event.changedTouches;\n\n    if (!changedTouches) {\n      return event.target;\n    }\n\n    if (changedTouches.length === 1) {\n      const touch = changedTouches[0];\n\n      return document.elementFromPoint(touch.clientX, touch.clientY);\n    }\n  }\n\n  //\n  // Listeners\n\n  onBackdropBeginPress = (event: any) => {\n    this._isBackdropPressed = this._isBackdropTarget(event);\n  };\n\n  onBackdropEndPress = (event: any) => {\n    if (\n      !this.props.preventCloseOnBackdropPress &&\n      this._isBackdropPressed &&\n      this._isBackdropTarget(event)\n    ) {\n      this.props.onModalClose();\n    }\n\n    this._isBackdropPressed = false;\n  };\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n  onTouchMove = (event: any) => {\n    this._isBackdropPressed = false;\n  };\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n  onTouchCancel = (event: any) => {\n    this._isBackdropPressed = false;\n  };\n\n  onKeyDown = (event: any) => {\n    const keyCode = event.keyCode;\n\n    if (keyCode === keyCodes.TAB) {\n      focusManager.scopeTabEvent(event);\n    } else if (keyCode === keyCodes.ESCAPE) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.props.onModalClose();\n\n      // Since the user used the keyboard to close the modal, attempt to\n      // automatically restore the previously focused element to retain the\n      // focus position.\n\n      focusManager.restorePreviousFocus();\n    }\n  };\n\n  //\n  // Render\n\n  render() {\n    const {\n      className,\n      backdropClassName,\n      containerClassName,\n      children,\n      size,\n      isOpen,\n      metricsPage,\n      metricsProperties,\n    } = this.props;\n\n    return (\n      // @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: Element; isOpen: boolean; closeT... Remove this comment to see the full error message\n      <Portal\n        className={containerClassName}\n        closeTimeoutMilliseconds={modalSpeedMilliseconds}\n        isOpen={isOpen}\n      >\n        <AnimatePresence>\n          {isOpen ? (\n            <motion.div\n              key=\"backdrop\"\n              animate=\"enter\"\n              className={backdropClassName}\n              exit=\"exit\"\n              initial=\"exit\"\n              variants={backdropVariants}\n              onMouseDown={this.onBackdropBeginPress}\n              onMouseUp={this.onBackdropEndPress}\n              onTouchCancel={this.onTouchCancel}\n              onTouchEnd={this.onBackdropEndPress}\n              onTouchMove={this.onTouchMove}\n              onTouchStart={this.onBackdropBeginPress}\n            >\n              <motion.div\n                key=\"modal\"\n                // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type '((instanc... Remove this comment to see the full error message\n                ref=\"modal\"\n                animate=\"enter\"\n                className={className || styles[size!]}\n                exit=\"exit\"\n                initial=\"exit\"\n                variants={modalContainerVariants}\n              >\n                <MetricsPageTracker {...metricsProperties} page={metricsPage}>\n                  {children}\n                </MetricsPageTracker>\n              </motion.div>\n            </motion.div>\n          ) : null}\n        </AnimatePresence>\n      </Portal>\n    );\n  }\n}\n\nexport default Modal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport Scroller from 'app/js/views/v3/components/core/base/Scroller';\nimport * as scrollDirections from 'app/js/views/v3/helpers/props/scrollDirections';\nimport styles from './ModalBody.css';\n\ninterface ModalBodyProps {\n  children?: React.ReactNode;\n  className?: string;\n  innerClassName?: string;\n  scrollDirection?: any; // TODO: PropTypes.oneOf(scrollDirections.all)\n}\n\nfunction ModalBody({\n  children,\n  className,\n  innerClassName,\n  scrollDirection,\n  ...otherProps\n}: ModalBodyProps) {\n  const isScroller = scrollDirection !== scrollDirections.NONE;\n\n  if (!className) {\n    className = isScroller ? styles.modalScroller : styles.modalBody;\n  }\n\n  return (\n    // @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: {} | null | undefined; className... Remove this comment to see the full error message\n    <Scroller\n      autoScroll={true}\n      className={className}\n      scrollDirection={scrollDirection}\n      {...otherProps}\n    >\n      {isScroller ? <div className={innerClassName}>{children}</div> : children}\n    </Scroller>\n  );\n}\n\nModalBody.defaultProps = {\n  innerClassName: styles.innerModalBody,\n};\n\nexport default ModalBody;\n","// extracted by mini-css-extract-plugin\nexport default {\"modalBody\":\"Oeojk\",\"modalScroller\":\"KmjAG Oeojk\",\"innerModalBody\":\"Itgwf\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalContent\":\"W5jPb\",\"closeButton\":\"XWrxW x5jRQ\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { PropsWithChildren } from 'react';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport IconRemove from 'app/glyphs/remove-560.svg';\nimport styles from './ModalContent.css';\n\ninterface ModalContentProps {\n  className?: string;\n  iconComponent?: React.ReactElement;\n  onModalClose: (...args: any[]) => any;\n}\n\nfunction ModalContent(props: PropsWithChildren<ModalContentProps>) {\n  const {\n    className = styles.modalContent,\n    children,\n    iconComponent: Icon = IconRemove,\n    onModalClose,\n    ...otherProps\n  } = props;\n\n  return (\n    <div className={className} {...otherProps}>\n      <Link className={styles.closeButton} onPress={onModalClose}>\n        {/* @ts-expect-error ts-migrate(2604) FIXME: JSX element type 'Icon' does not have any construc... Remove this comment to see the full error message */}\n        {Icon ? <Icon /> : null}\n      </Link>\n\n      {children}\n    </div>\n  );\n}\n\nexport default ModalContent;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport styles from './ModalFooter.css';\n\ninterface ModalFooterProps {\n  className?: string;\n  children?: React.ReactNode;\n}\n\nfunction ModalFooter({ className, children, ...otherProps }: ModalFooterProps) {\n  return (\n    <div className={className} {...otherProps}>\n      {children}\n    </div>\n  );\n}\n\nModalFooter.defaultProps = {\n  className: styles.modalFooter,\n};\n\nexport default ModalFooter;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport styles from './ModalFooterButtonBar.css';\n\ninterface ModalFooterButtonBarProps {\n  children?: React.ReactNode;\n  className?: string;\n}\n\nfunction ModalFooterButtonBar({\n  children,\n  ...otherProps\n}: ModalFooterButtonBarProps) {\n  return <div {...otherProps}>{children}</div>;\n}\n\nModalFooterButtonBar.defaultProps = {\n  className: styles.buttonBar,\n};\n\nexport default ModalFooterButtonBar;\n","// extracted by mini-css-extract-plugin\nexport default {\"buttonBar\":\"dZE3G\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport styles from './ModalHeader.css';\n\ninterface ModalHeaderProps {\n  children?: React.ReactNode;\n}\n\nfunction ModalHeader({ children, ...otherProps }: ModalHeaderProps) {\n  return (\n    <div className={styles.modalHeader} {...otherProps}>\n      {children}\n    </div>\n  );\n}\n\nexport default ModalHeader;\n","// extracted by mini-css-extract-plugin\nexport default {\"modalHeader\":\"GB5xN\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport styles from './FullPage.css';\n\ninterface FullPageProps {\n  className?: string;\n  children: React.ReactNode;\n}\n\nfunction FullPage(props: FullPageProps) {\n  const { className, children } = props;\n\n  return <div className={className}>{children}</div>;\n}\n\nFullPage.defaultProps = {\n  className: styles.container,\n};\n\nexport default FullPage;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"B6YGR\"};","// extracted by mini-css-extract-plugin\nexport default {\"tooltipPortal\":\"lfpK9\",\"tooltip\":\"GtJsp\",\"tooltipArrow\":\"If9gp\",\"tooltipBottomArrow\":\"VJGxZ\",\"tooltipTopArrow\":\"cb5I0\",\"tooltipRightArrow\":\"fmYHh\",\"tooltipLeftArrow\":\"egNyl\",\"tooltipCenterAlignArrow\":\"rII2m\",\"tooltipLeftAlignArrow\":\"FDsdp\",\"tooltipRightAlignArrow\":\"c63xo\",\"tooltipMiddleAlignArrow\":\"rjhVo\",\"topLeft\":\"MxuDU GtJsp If9gp VJGxZ FDsdp\",\"topCenter\":\"KdgV3 GtJsp If9gp VJGxZ rII2m\",\"topRight\":\"aRfI0 GtJsp If9gp VJGxZ c63xo\",\"bottomLeft\":\"iH9ts GtJsp If9gp cb5I0 FDsdp\",\"bottomCenter\":\"a1e4c GtJsp If9gp cb5I0 rII2m\",\"bottomRight\":\"BCoc8 GtJsp If9gp cb5I0 c63xo\",\"middleLeft\":\"_eS22 GtJsp If9gp fmYHh rjhVo\",\"middleRight\":\"w6QSF GtJsp If9gp egNyl rjhVo\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport { AnimatePresence, motion } from 'framer-motion';\nimport React from 'react';\nimport PopperPortal from 'app/js/views/v3/components/core/base/PopperPortal';\nimport cssDurationToSeconds from 'app/js/views/v3/helpers/css/cssDurationToSeconds';\nimport * as tooltipAttachments from 'app/js/views/v3/helpers/props/tooltipAttachments';\nimport animations from 'app/styles/variables/animations';\nimport easings from 'app/styles/variables/easings';\nimport styles from './Tooltip.css';\n\nconst tooltipSpeedSeconds = cssDurationToSeconds(animations.tooltipSpeed);\nconst tooltipSpeedMilliseconds = tooltipSpeedSeconds * 1000;\n\nconst tooltipTransition = {\n  opacity: {\n    ease: 'easeOut',\n    duration: tooltipSpeedSeconds,\n  },\n  y: {\n    ease: easings.motionEasing,\n    duration: tooltipSpeedSeconds,\n  },\n  x: {\n    ease: easings.motionEasing,\n    duration: tooltipSpeedSeconds,\n  },\n  scale: {\n    ease: easings.motionEasing,\n    duration: tooltipSpeedSeconds,\n  },\n};\n\nfunction tooltipBeforeY(attachment: string) {\n  switch (attachment) {\n    case tooltipAttachments.TOP_LEFT:\n    case tooltipAttachments.TOP_CENTER:\n    case tooltipAttachments.TOP_RIGHT:\n      return 5;\n    case tooltipAttachments.BOTTOM_LEFT:\n    case tooltipAttachments.BOTTOM_CENTER:\n    case tooltipAttachments.BOTTOM_RIGHT:\n      return -5;\n    case tooltipAttachments.MIDDLE_LEFT:\n    case tooltipAttachments.MIDDLE_RIGHT:\n      return 0;\n    default:\n      return 0;\n  }\n}\n\nfunction tooltipBeforeX(attachment: string) {\n  switch (attachment) {\n    case tooltipAttachments.TOP_LEFT:\n    case tooltipAttachments.TOP_CENTER:\n    case tooltipAttachments.TOP_RIGHT:\n      return 0;\n    case tooltipAttachments.BOTTOM_LEFT:\n    case tooltipAttachments.BOTTOM_CENTER:\n    case tooltipAttachments.BOTTOM_RIGHT:\n      return 0;\n    case tooltipAttachments.MIDDLE_LEFT:\n      return 5;\n    case tooltipAttachments.MIDDLE_RIGHT:\n      return -5;\n    default:\n      return 0;\n  }\n}\n\nfunction tooltipExitY(attachment: string) {\n  switch (attachment) {\n    case tooltipAttachments.TOP_LEFT:\n    case tooltipAttachments.TOP_CENTER:\n    case tooltipAttachments.TOP_RIGHT:\n      return -5;\n    case tooltipAttachments.BOTTOM_LEFT:\n    case tooltipAttachments.BOTTOM_CENTER:\n    case tooltipAttachments.BOTTOM_RIGHT:\n      return 5;\n    case tooltipAttachments.MIDDLE_LEFT:\n    case tooltipAttachments.MIDDLE_RIGHT:\n      return 0;\n    default:\n      return 0;\n  }\n}\n\nfunction tooltipExitX(attachment: string) {\n  switch (attachment) {\n    case tooltipAttachments.TOP_LEFT:\n    case tooltipAttachments.TOP_CENTER:\n    case tooltipAttachments.TOP_RIGHT:\n      return 0;\n    case tooltipAttachments.BOTTOM_LEFT:\n    case tooltipAttachments.BOTTOM_CENTER:\n    case tooltipAttachments.BOTTOM_RIGHT:\n      return 0;\n    case tooltipAttachments.MIDDLE_LEFT:\n      return -5;\n    case tooltipAttachments.MIDDLE_RIGHT:\n      return 5;\n    default:\n      return 0;\n  }\n}\n\nconst tooltipContainerVariants = {\n  before: (attachment: string) => ({\n    opacity: 0,\n    y: tooltipBeforeY(attachment),\n    x: tooltipBeforeX(attachment),\n    scale: 0.95,\n    transition: tooltipTransition,\n  }),\n  enter: {\n    opacity: 1,\n    y: 0,\n    // When a value of 0 is used posed uses a `none` value which breaks the\n    // position of the arrow\n    x: 0.001,\n    scale: 1,\n    transition: tooltipTransition,\n  },\n  exit: (attachment: string) => ({\n    opacity: 0,\n    y: tooltipExitY(attachment),\n    x: tooltipExitX(attachment),\n    scale: 0.95,\n    transition: tooltipTransition,\n  }),\n};\n\nconst popperOptions = {\n  [tooltipAttachments.TOP_LEFT]: {\n    placement: 'top-start',\n  },\n  [tooltipAttachments.TOP_CENTER]: {\n    placement: 'top',\n  },\n  [tooltipAttachments.TOP_RIGHT]: {\n    placement: 'top-end',\n  },\n  [tooltipAttachments.BOTTOM_LEFT]: {\n    placement: 'bottom-start',\n  },\n  [tooltipAttachments.BOTTOM_CENTER]: {\n    placement: 'bottom',\n  },\n  [tooltipAttachments.BOTTOM_RIGHT]: {\n    placement: 'bottom-end',\n  },\n  [tooltipAttachments.MIDDLE_LEFT]: {\n    placement: 'left',\n  },\n  [tooltipAttachments.MIDDLE_RIGHT]: {\n    placement: 'right',\n  },\n};\n\ninterface TooltipProps {\n  children?: React.ReactNode;\n  className?: string;\n  target: string;\n  attachment?: string;\n  options?: any;\n  isOpen: boolean;\n  onMenuClose?: (...args: any[]) => any;\n}\n\nfunction Tooltip(props: TooltipProps) {\n  const {\n    children,\n    className,\n    target,\n    attachment,\n    options,\n    isOpen,\n    onMenuClose,\n    ...otherProps\n  } = props;\n\n  return (\n    // @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: Element; className: string; targ... Remove this comment to see the full error message\n    <PopperPortal\n      className={styles.tooltipPortal}\n      closeTimeoutMilliseconds={tooltipSpeedMilliseconds}\n      isOpen={isOpen}\n      // @ts-expect-error ts-migrate(2538) FIXME: Type 'undefined' cannot be used as an index type.\n      options={options || popperOptions[attachment]}\n      target={target}\n    >\n      <AnimatePresence>\n        {isOpen ? (\n          <motion.div\n            key=\"container\"\n            animate=\"enter\"\n            // @ts-expect-error ts-migrate(2538) FIXME: Type 'undefined' cannot be used as an index type.\n            className={className || styles[attachment]}\n            custom={attachment}\n            exit=\"exit\"\n            initial=\"before\"\n            variants={tooltipContainerVariants}\n            {...otherProps}\n          >\n            {children}\n          </motion.div>\n        ) : null}\n      </AnimatePresence>\n    </PopperPortal>\n  );\n}\n\nTooltip.defaultProps = {\n  attachment: tooltipAttachments.BOTTOM_CENTER,\n};\n\nexport default Tooltip;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\n\ninterface TooltipWrapperProps {\n  children?: React.ReactNode;\n}\n\nfunction TooltipWrapper(props: TooltipWrapperProps) {\n  const { children, ...otherProps } = props;\n\n  return <div {...otherProps}>{children}</div>;\n}\n\nexport default TooltipWrapper;\n","import React, {\n  ReactElement,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport useUniqueElementID from 'app/js/views/v3/helpers/hooks/useUniqueElementID';\nimport Tooltip from './Tooltip';\nimport TooltipWrapper from './TooltipWrapper';\n\nexport interface TooltipTriggerProps {\n  id?: string;\n  className?: string;\n  component: React.ComponentType<{\n    onMouseEnter: () => void;\n    onMouseLeave: () => void;\n    onFocus: () => void;\n    onBlur: () => void;\n    onPress: () => void;\n  }>;\n  tooltip?: string;\n  tooltipClassName?: string;\n  tooltipFocusedClassName?: string;\n  tooltipAttachment?: string;\n  tooltipTarget?: string;\n  tooltipOptions?: any;\n  showOnHover?: boolean;\n  showOnFocus?: boolean;\n  hideOnPress?: boolean;\n  hideOnDisabled?: boolean;\n  isDisabled?: boolean;\n  onMouseEnter?: (...args: any[]) => void;\n  onMouseLeave?: (...args: any[]) => void;\n  onFocus?: (...args: any[]) => void;\n  onBlur?: (...args: any[]) => void;\n  onPress?: (...args: any[]) => void;\n}\n\nexport default function TooltipTrigger(\n  props: TooltipTriggerProps\n): ReactElement {\n  const {\n    component: TargetComponent = TooltipWrapper,\n    hideOnDisabled = true,\n    hideOnPress = true,\n    showOnFocus = true,\n    showOnHover = true,\n    tooltip,\n    tooltipAttachment,\n    tooltipClassName,\n    tooltipFocusedClassName,\n    tooltipOptions,\n    ...otherProps\n  } = props;\n\n  const [isOpen, setIsOpen] = useState(false);\n  const isFocusedRef = useRef(false);\n  const isHoveredRef = useRef(false);\n\n  const uniqueElementID = useUniqueElementID();\n  const targetID = props.tooltipTarget || props.id || uniqueElementID;\n\n  const onMouseEnter = useCallback(\n    (...args) => {\n      if (showOnHover) {\n        isHoveredRef.current = true;\n        setIsOpen(true);\n      }\n      props.onMouseEnter?.(...args);\n    },\n    [props, showOnHover]\n  );\n\n  const onMouseLeave = useCallback(\n    (...args) => {\n      if (showOnHover) {\n        isHoveredRef.current = false;\n        setIsOpen(isFocusedRef.current);\n      }\n      props.onMouseLeave?.(...args);\n    },\n    [props, showOnHover]\n  );\n\n  const onFocus = useCallback(\n    (...args) => {\n      if (showOnFocus) {\n        isFocusedRef.current = true;\n        setIsOpen(true);\n      }\n      props.onFocus?.(...args);\n    },\n    [props, showOnFocus]\n  );\n\n  const onBlur = useCallback(\n    (...args) => {\n      if (props.showOnFocus) {\n        isFocusedRef.current = false;\n        setIsOpen(isHoveredRef.current);\n      }\n      props.onBlur?.(...args);\n    },\n    [props]\n  );\n\n  const onPress = useCallback(\n    (...args) => {\n      if (hideOnPress) {\n        isFocusedRef.current = false;\n        isHoveredRef.current = false;\n        setIsOpen(false);\n      }\n      props.onPress?.(...args);\n    },\n    [hideOnPress, props]\n  );\n\n  const finalClassName =\n    isFocusedRef.current && tooltipFocusedClassName\n      ? tooltipFocusedClassName\n      : tooltipClassName;\n\n  //\n  // Effects\n\n  useEffect(() => {\n    if (isOpen && hideOnDisabled && props.isDisabled) {\n      isFocusedRef.current = false;\n      isHoveredRef.current = false;\n      setIsOpen(false);\n    }\n  }, [hideOnDisabled, isOpen, props.isDisabled]);\n\n  //\n  // Render\n\n  return (\n    <>\n      <TargetComponent\n        id={targetID}\n        {...otherProps}\n        onBlur={onBlur}\n        onFocus={onFocus}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        onPress={onPress}\n      />\n      {tooltip ? (\n        <Tooltip\n          attachment={tooltipAttachment}\n          className={finalClassName}\n          isOpen={isOpen}\n          options={tooltipOptions}\n          target={targetID}\n        >\n          {tooltip}\n        </Tooltip>\n      ) : null}\n    </>\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport { FORUMS_URL } from 'app/js/utils/constants/commonUrls';\nimport t from 'app/js/utils/t';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport ErrorPage from 'app/js/views/v3/components/pages/empty/ErrorPage';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\n\ntype UnexpectedErrorPageProps = {\n  children?: React.ReactNode;\n};\n\nfunction UnexpectedErrorPage(props: UnexpectedErrorPageProps) {\n  const { children, ...otherProps } = props;\n\n  return (\n    <ErrorPage\n      description={t(\n        'Please visit our forums if you continue to experience problems'\n      )}\n      title={t('There was an unexpected error')}\n      {...otherProps}\n    >\n      <Link\n        kind={kinds.PRIMARY}\n        target={__EXTERNAL_LINK_TARGET__}\n        to={FORUMS_URL}\n      >\n        {t('Go to Forums')}\n      </Link>\n      {children}\n    </ErrorPage>\n  );\n}\n\nexport default UnexpectedErrorPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport MetricsPageTracker from 'app/js/views/v3/components/core/metrics/MetricsPageTracker';\nimport PageScroller from './PageScroller';\nimport styles from './Page.css';\n\ntype PageProps = {\n  children?: React.ReactNode;\n  metricsPage: string;\n  metricsProperties?: any;\n  isMetricsDelegated?: boolean;\n};\n\nfunction Page(props: PageProps) {\n  const {\n    children,\n    metricsPage,\n    metricsProperties,\n    isMetricsDelegated,\n    ...otherProps\n  } = props;\n\n  return (\n    <MetricsPageTracker\n      {...metricsProperties}\n      isDelegated={isMetricsDelegated}\n      page={metricsPage}\n    >\n      <PageScroller className={styles.page} {...otherProps}>\n        {children}\n      </PageScroller>\n    </MetricsPageTracker>\n  );\n}\n\nexport default Page;\n","// extracted by mini-css-extract-plugin\nexport default {\"page\":\"ma9n0\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport log from 'app/js/utils/log/log';\nimport UnexpectedErrorPage from 'app/js/views/v3/components/pages/empty/UnexpectedErrorPage';\nimport Page from './Page';\n\ntype PageConnectorProps = any;\ntype PageConnectorState = any;\n\nclass PageConnector extends Component<PageConnectorProps, PageConnectorState> {\n  constructor(props: any, context: any) {\n    super(props, context);\n\n    this.state = { hasError: false };\n  }\n\n  //\n  // Lifecycle\n\n  componentDidCatch(error: any) {\n    log.error(error);\n\n    this.setState({ hasError: true });\n  }\n\n  //\n  // Render\n\n  render() {\n    const { hasError } = this.state;\n\n    if (hasError) {\n      return <UnexpectedErrorPage />;\n    }\n\n    // @ts-expect-error ts-migrate(2741) FIXME: Property 'metricsPage' is missing in type '{ child... Remove this comment to see the full error message\n    return <Page {...this.props} />;\n  }\n}\n\nexport default PageConnector;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport Scroller from 'app/js/views/v3/components/core/base/Scroller';\nimport pageStorage from 'app/js/views/v3/helpers/pageStorage';\n\ntype PageScrollerProps = {\n  className?: string;\n  restoreScrollDelay: number;\n  scrollPositionKey?: string;\n  smoothScroll?: boolean;\n  smoothScrollDuration: number;\n};\n\ntype PageScrollerState = any;\n\nclass PageScroller extends Component<PageScrollerProps, PageScrollerState> {\n  static defaultProps = {\n    restoreScrollDelay: 100,\n    scrollPositionKey: 'scrollPosition',\n    smoothScroll: true,\n    smoothScrollDuration: 400,\n  };\n\n  // eslint-disable-next-line react/sort-comp\n  _currentScrollTop: any;\n  _positionKey: any;\n  _restoreScroll: any;\n  _restoreScrollDelay: any;\n  _restoreScrollTimeoutID: any;\n\n  constructor(props: any, context: any) {\n    super(props, context);\n\n    this.state = {\n      isScrolling: false,\n    };\n\n    // Set the key early and use it when the component unmounts. The hash will\n    // have changed after a page change and before the component can unmount,\n    // which would lead to different keys.\n    this._positionKey = pageStorage.getKey(props.scrollPositionKey);\n    this._currentScrollTop = 0;\n\n    // Set delay to restore the isScrolling value.\n    // This happens only after componentDidMount and does not need to change\n    // when the props change.\n    this._restoreScrollDelay = props.smoothScroll\n      ? props.smoothScrollDuration\n      : props.restoreScrollDelay;\n    this._restoreScroll = false;\n    this._restoreScrollTimeoutID = null;\n  }\n\n  //\n  // Lifecycle\n\n  componentDidMount() {\n    this._restoreScrollPosition();\n  }\n\n  componentDidUpdate(prevProps: PageScrollerProps) {\n    const { scrollPositionKey } = this.props;\n\n    if (prevProps.scrollPositionKey !== scrollPositionKey) {\n      this._positionKey = pageStorage.getKey(scrollPositionKey);\n    }\n  }\n\n  componentWillUnmount() {\n    this._storeScrollPosition();\n\n    if (this._restoreScrollTimeoutID) {\n      window.clearTimeout(this._restoreScrollTimeoutID);\n    }\n  }\n\n  //\n  // Control\n\n  _restoreScrollPosition() {\n    const scrollPosition = pageStorage.get(this._positionKey);\n\n    if (scrollPosition) {\n      this.setState({ isScrolling: true });\n      this._currentScrollTop = scrollPosition.scrollTop;\n      this._restoreScroll = true;\n\n      this._restoreScrollTimeoutID = window.setTimeout(() => {\n        this.setState({\n          isScrolling: false,\n        });\n        this._restoreScroll = false;\n      }, this._restoreScrollDelay);\n    }\n  }\n\n  _storeScrollPosition() {\n    pageStorage.set(this._positionKey, {\n      scrollTop: this._currentScrollTop,\n    });\n  }\n\n  //\n  // Listeners\n\n  onScrollPositionChange = ({ scrollTop }: any) => {\n    if (!this.state.isScrolling) {\n      this._currentScrollTop = scrollTop;\n    }\n  };\n\n  //\n  // Render\n\n  render() {\n    const {\n      children,\n      className,\n      // Discarded props\n      restoreScrollDelay,\n      scrollPositionKey,\n      // Rest props\n      ...otherProps\n    } = this.props;\n\n    return (\n      // @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: ReactNode; smoothScroll?: boolea... Remove this comment to see the full error message\n      <Scroller\n        className={className}\n        restoreScroll={this._restoreScroll}\n        scrollTop={this._currentScrollTop}\n        onScrollPositionChange={this.onScrollPositionChange}\n        {...otherProps}\n      >\n        {children}\n      </Scroller>\n    );\n  }\n}\n\nexport default PageScroller;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectDeviceSettings from 'app/js/stores/selectors/settings/selectDeviceSettings';\n\nconst selectDismissedUnclaimedServers = createSelector(\n  selectDeviceSettings,\n  (deviceSettings) => deviceSettings.dismissedUnclaimedServers\n);\n\nexport default selectDismissedUnclaimedServers;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setPrimaryServer } from 'app/js/stores/actions/appActions';\nimport { scheduleImmediateUpdate } from 'app/js/utils/state/stateUpdateScheduler';\n\ntype InlinePrimaryServerPageConnectorProps = {\n  machineIdentifier?: string;\n  dispatchSetPrimaryServer: (...args: any[]) => any;\n};\n\nclass InlinePrimaryServerPageConnector extends Component<InlinePrimaryServerPageConnectorProps> {\n  //\n  // Lifecycle\n\n  componentDidMount() {\n    this._populate(this.props);\n  }\n\n  componentDidUpdate(prevProps: InlinePrimaryServerPageConnectorProps) {\n    const { machineIdentifier } = this.props;\n\n    if (\n      machineIdentifier &&\n      machineIdentifier !== prevProps.machineIdentifier\n    ) {\n      this._populate(this.props);\n    }\n  }\n\n  //\n  // Control\n\n  _populate(props: any) {\n    const { machineIdentifier, dispatchSetPrimaryServer } = props;\n\n    if (machineIdentifier) {\n      scheduleImmediateUpdate(() => {\n        dispatchSetPrimaryServer({ machineIdentifier });\n      });\n    }\n  }\n\n  //\n  // Render\n\n  render() {\n    return <>{this.props.children}</>;\n  }\n}\n\nconst mapDispatchToProps = {\n  dispatchSetPrimaryServer: setPrimaryServer,\n};\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(InlinePrimaryServerPageConnector);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { resolve } from 'app/js/adapters/adapters';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport t from 'app/js/utils/t';\nimport routes from 'app/js/v4/routes/routes';\nimport Button from 'app/js/views/v3/components/core/buttons/Button';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport EmptyPageDescription from 'app/js/views/v3/components/pages/empty/EmptyPageDescription';\nimport ErrorPage from 'app/js/views/v3/components/pages/empty/ErrorPage';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport getServerSettingsRoute from 'app/js/views/v3/helpers/routes/getServerSettingsRoute';\n\ntype ServerUnclaimedPageProps = {\n  machineIdentifier?: string;\n  friendlyName?: string;\n  isPlexAccountRequired: boolean;\n  dispatchDismissUnclaimedServer: (...args: any[]) => any;\n};\n\nfunction ServerUnclaimedPage(props: ServerUnclaimedPageProps) {\n  const {\n    machineIdentifier,\n    friendlyName,\n    isPlexAccountRequired,\n    dispatchDismissUnclaimedServer,\n  } = props;\n\n  const history = useHistory();\n\n  const onSignInPress = useCallback(() => {\n    history.push(routes.login);\n  }, [history]);\n\n  const onClaimPress = useCallback(() => {\n    resolve('metrics').trackClick({\n      page: metricsPages.UNCLAIMED_SERVER,\n      action: metricsActions.CLAIM,\n    });\n  }, []);\n\n  const onDismissPress = useCallback(() => {\n    resolve('metrics').trackClick({\n      page: metricsPages.UNCLAIMED_SERVER,\n      action: metricsActions.DISMISS,\n    });\n\n    dispatchDismissUnclaimedServer({ machineIdentifier });\n  }, [machineIdentifier, dispatchDismissUnclaimedServer]);\n\n  return (\n    <ErrorPage\n      description={t(\n        'Claiming this server will associate it with your Plex account. This helps your devices find each other and helps keep your media safe.'\n      )}\n      title={t('{friendlyName} server is unclaimed and not secure', {\n        friendlyName,\n      })}\n    >\n      {isPlexAccountRequired ? (\n        <Button kind={kinds.PRIMARY} size={sizes.LARGE} onPress={onSignInPress}>\n          {t('Sign in to claim this server')}\n        </Button>\n      ) : (\n        <Button\n          kind={kinds.PRIMARY}\n          size={sizes.LARGE}\n          to={getServerSettingsRoute('settings', 'general')}\n          onPress={onClaimPress}\n        >\n          {t('Claim it now')}\n        </Button>\n      )}\n      <EmptyPageDescription>\n        <Link kind={kinds.PRIMARY} size={sizes.SMALL} onPress={onDismissPress}>\n          {t(\"Don't show this again\")}\n        </Link>\n      </EmptyPageDescription>\n    </ErrorPage>\n  );\n}\n\nexport default ServerUnclaimedPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { dismissUnclaimedServer } from 'app/js/stores/actions/appActions';\nimport createUnstableServerSelector from 'app/js/stores/selectors/server/createUnstableServerSelector';\nimport selectIsAnonymousUser from 'app/js/stores/selectors/user/selectIsAnonymousUser';\nimport ServerUnclaimedPage from 'app/js/views/v3/components/pages/ServerUnclaimedPage';\n\nexport function createMapStateToProps() {\n  return createSelector(\n    createUnstableServerSelector(),\n    selectIsAnonymousUser,\n    (server, isAnonymousUser) => {\n      return {\n        machineIdentifier: server.machineIdentifier,\n        friendlyName: server.friendlyName,\n        isPlexAccountRequired: isAnonymousUser,\n      };\n    }\n  );\n}\n\nconst mapDispatchToProps = {\n  dispatchDismissUnclaimedServer: dismissUnclaimedServer,\n};\n\nexport default connect(\n  createMapStateToProps,\n  mapDispatchToProps\n)(ServerUnclaimedPage);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport dimensionsAdapter from 'app/js/adapters/dimensionsAdapter';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\nimport Button from 'app/js/views/v3/components/core/buttons/Button';\nimport ErrorPage from 'app/js/views/v3/components/pages/empty/ErrorPage';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport getServerSettingsRoute from 'app/js/views/v3/helpers/routes/getServerSettingsRoute';\n\ntype ServerUpdateRequiredPageProps = {\n  machineIdentifier?: string;\n  friendlyName?: string;\n  activeConnectionUri?: string;\n  shouldUseNewSettingsRoutes?: boolean;\n  isShared?: boolean;\n};\n\nfunction ServerUpdateRequiredPage(props: ServerUpdateRequiredPageProps) {\n  const {\n    friendlyName,\n    activeConnectionUri,\n    shouldUseNewSettingsRoutes,\n    isShared,\n  } = props;\n\n  let description;\n\n  if (friendlyName) {\n    description = t(\n      'The server {1} is out of date and cannot be used.',\n      friendlyName\n    );\n  }\n\n  description =\n    description +\n    ' ' +\n    t(\n      'This version of {productName} requires Plex Media Server {minServerVersion} or higher.',\n      {\n        productName: dimensionsAdapter.prop('X-Plex-Product'),\n        minServerVersion: __MIN_SERVER_VERSION__,\n      }\n    );\n\n  let route = '/web/index.html';\n  if (!isShared) {\n    route += shouldUseNewSettingsRoutes\n      ? getServerSettingsRoute('settings', 'general')\n      : '#!/settings/server';\n  }\n\n  return (\n    <ErrorPage description={description} title=\"Update your Plex Media Server\">\n      <Button\n        kind={kinds.PRIMARY}\n        size={sizes.LARGE}\n        target={__EXTERNAL_LINK_TARGET__}\n        to={path.join([activeConnectionUri, route])}\n      >\n        {t('Open server directly')}\n      </Button>\n    </ErrorPage>\n  );\n}\n\nexport default ServerUpdateRequiredPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport serverFeatures from 'app/js/models/server/serverFeatures';\nimport createUnstableServerSelector from 'app/js/stores/selectors/server/createUnstableServerSelector';\nimport isVersionOrNewer from 'app/js/utils/isVersionOrNewer';\nimport ServerUpdateRequiredPage from 'app/js/views/v3/components/pages/ServerUpdateRequiredPage';\n\nexport function createMapStateToProps() {\n  return createSelector(createUnstableServerSelector(), (server) => {\n    return {\n      machineIdentifier: server.machineIdentifier,\n      friendlyName: server.friendlyName,\n      activeConnectionUri: server.activeConnection.uri,\n      shouldUseNewSettingsRoutes: isVersionOrNewer(\n        server.version,\n        serverFeatures.bundledWebAppNewSettingsRoutes\n      ),\n      isShared: server.isShared,\n    };\n  });\n}\n\nexport default connect(createMapStateToProps)(ServerUpdateRequiredPage);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport createIsEmbeddedServerSelector from 'app/js/stores/selectors/server/createIsEmbeddedServerSelector';\nimport createUnstableServerSelector from 'app/js/stores/selectors/server/createUnstableServerSelector';\nimport selectDismissedUnclaimedServers from 'app/js/stores/selectors/settings/selectDismissedUnclaimedServers';\nimport capabilities from 'app/js/utils/device/capabilities';\nimport ServerPage from 'app/js/views/v3/components/pages/ServerPage';\n\nfunction createMapStateToProps() {\n  return createSelector(\n    (appState) => appState.isWaitingForServers,\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState, { hideUnclaimedPage }) => hideUnclaimedPage,\n    createUnstableServerSelector(),\n    createIsEmbeddedServerSelector(),\n    selectDismissedUnclaimedServers,\n    (\n      isWaitingForServers,\n      hideUnclaimedPage,\n      server,\n      isEmbeddedServer,\n      dismissedUnclaimedServers\n    ) => {\n      if (!server) {\n        return {\n          hasServer: false,\n          showSpinner: isWaitingForServers,\n        };\n      }\n      return {\n        hasServer: true,\n        showSpinner:\n          !server.isConnected &&\n          !server.isUnauthorized &&\n          !server.isUnavailable,\n        machineIdentifier: server.machineIdentifier,\n        isUnauthorized: server.isUnauthorized,\n        isUnavailable: server.isUnavailable,\n        isOutOfDate: server.isOutOfDate,\n        isInstallingServerUpdate: server.isInstallingServerUpdate,\n        isUnclaimed:\n          server.isConnected &&\n          !server.isClaimed &&\n          !dismissedUnclaimedServers[server.machineIdentifier] &&\n          !isEmbeddedServer &&\n          !hideUnclaimedPage,\n        hasHttpsConnections: server.hasHttpsConnections,\n        isHostedHttps: capabilities.isHostedHttps,\n      };\n    }\n  );\n}\nconst ServerPageConnector = connect(createMapStateToProps)(ServerPage);\n(ServerPageConnector as any).propTypes = {\n  ...(ServerPageConnector as any).propTypes,\n  serverEntityID: PropTypes.string.isRequired,\n};\nexport default ServerPageConnector;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectEmbeddedServer from 'app/js/stores/selectors/server/selectEmbeddedServer';\n\nexport default function createIsEmbeddedServerSelector() {\n  return createSelector(\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { serverEntityID }: any) => serverEntityID,\n    selectEmbeddedServer,\n    (serverEntityID, embeddedServer) => {\n      return !!(serverEntityID && serverEntityID === embeddedServer);\n    }\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport Spinner from 'app/js/views/v3/components/core/Spinner';\nimport InlinePrimaryServerPageConnector from 'app/js/views/v3/components/pages/InlinePrimaryServerPageConnector';\nimport ServerUnauthorizedErrorPage from 'app/js/views/v3/components/pages/ServerUnauthorizedErrorPage';\nimport ServerUnavailableErrorPageConnector from 'app/js/views/v3/components/pages/ServerUnavailableErrorPageConnector';\nimport ServerUnclaimedPageConnector from 'app/js/views/v3/components/pages/ServerUnclaimedPageConnector';\nimport ServerUpdateRequiredPageConnector from 'app/js/views/v3/components/pages/ServerUpdateRequiredPageConnector';\nimport EmptyPage from 'app/js/views/v3/components/pages/empty/EmptyPage';\nimport InstallingServerUpdatePageConnector from 'app/js/views/v3/components/pages/empty/InstallingServerUpdatePageConnector';\nimport NotFoundErrorPage from 'app/js/views/v3/components/pages/empty/NotFoundErrorPage';\n\ntype ServerPageProps = {\n  children: React.ReactNode;\n  serverEntityID: string;\n  hasServer: boolean;\n  showSpinner: boolean;\n  machineIdentifier?: string;\n  isUnauthorized?: boolean;\n  isUnavailable?: boolean;\n  isOutOfDate?: boolean;\n  isUnclaimed?: boolean;\n  isInstallingServerUpdate?: boolean;\n  hasHttpsConnections?: boolean;\n  isHostedHttps?: boolean;\n};\n\nfunction ServerPage(props: ServerPageProps) {\n  const {\n    serverEntityID,\n    children,\n    hasServer,\n    showSpinner,\n    machineIdentifier,\n    isUnauthorized,\n    isUnavailable,\n    isOutOfDate,\n    isUnclaimed,\n    isInstallingServerUpdate,\n  } = props;\n\n  if (showSpinner) {\n    return (\n      <EmptyPage>\n        <Spinner />\n      </EmptyPage>\n    );\n  }\n\n  if (!hasServer) {\n    return <NotFoundErrorPage />;\n  }\n\n  if (isInstallingServerUpdate) {\n    return (\n      <InstallingServerUpdatePageConnector serverEntityID={serverEntityID} />\n    );\n  }\n\n  if (isUnavailable) {\n    return (\n      <ServerUnavailableErrorPageConnector serverEntityID={serverEntityID} />\n    );\n  }\n\n  if (isOutOfDate) {\n    return (\n      <ServerUpdateRequiredPageConnector serverEntityID={serverEntityID} />\n    );\n  }\n\n  if (isUnauthorized) {\n    return <ServerUnauthorizedErrorPage />;\n  }\n\n  if (isUnclaimed) {\n    return <ServerUnclaimedPageConnector serverEntityID={serverEntityID} />;\n  }\n\n  return (\n    // @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: ReactNode; machineIdentifier: st... Remove this comment to see the full error message\n    <InlinePrimaryServerPageConnector machineIdentifier={machineIdentifier}>\n      {children}\n    </InlinePrimaryServerPageConnector>\n  );\n}\n\nexport default ServerPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport t from 'app/js/utils/t';\nimport ErrorPage from 'app/js/views/v3/components/pages/empty/ErrorPage';\n\nfunction ServerUnauthorizedErrorPage() {\n  return (\n    <ErrorPage\n      description={t('You do not have access to this server')}\n      title={t('Not authorized')}\n    />\n  );\n}\n\nexport default ServerUnauthorizedErrorPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport t from 'app/js/utils/t';\nimport TagInjector from 'app/js/views/v3/components/core/TagInjector';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport SpinnerButton from 'app/js/views/v3/components/core/buttons/SpinnerButton';\nimport ErrorPage from 'app/js/views/v3/components/pages/empty/ErrorPage';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\n\ntype ServerUnavailableErrorPageProps = {\n  friendlyName?: string;\n  isPending?: boolean;\n  onTryAgainPress: (...args: any[]) => any;\n};\n\nfunction ServerUnavailableErrorPage(props: ServerUnavailableErrorPageProps) {\n  const { friendlyName, isPending, onTryAgainPress } = props;\n\n  return (\n    <ErrorPage\n      description={\n        <TagInjector\n          message={t(\n            'Verify you have a network connection and that the server is online, or see our {openLink}troubleshooting{closeLink} tips for further assistance.'\n          )}\n          tags={[\n            {\n              open: 'openLink',\n              close: 'closeLink',\n              component: Link,\n              kind: kinds.PRIMARY,\n              to: 'https://help.plex.tv/noserver',\n              target: '_blank',\n            },\n          ]}\n        />\n      }\n      title={\n        friendlyName\n          ? t('{serverName} is currently unavailable', {\n              serverName: friendlyName,\n            })\n          : t('Server is currently unavailable')\n      }\n    >\n      <SpinnerButton\n        isSpinning={isPending}\n        kind={kinds.PRIMARY}\n        onPress={onTryAgainPress}\n      >\n        {t('Retry connection')}\n      </SpinnerButton>\n    </ErrorPage>\n  );\n}\n\nexport default ServerUnavailableErrorPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport t from 'app/js/utils/t';\nimport TagInjector from 'app/js/views/v3/components/core/TagInjector';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport EmptyPage from 'app/js/views/v3/components/pages/empty/EmptyPage';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport pmsLogo from 'app/img/pms-logo.svg';\nimport styles from 'app/js/views/v3/components/pages/empty/InsecureFallbackChoicePage.css';\n\ntype InsecureFallbackChoicePageProps = {\n  title: string;\n  description?: string;\n  children: React.ReactNode;\n};\n\nclass InsecureFallbackChoicePage extends Component<InsecureFallbackChoicePageProps> {\n  //\n  // Render\n  render() {\n    const { title, description, children } = this.props;\n\n    return (\n      <EmptyPage\n        description={\n          <>\n            <TagInjector\n              message={t(\n                'Its \"Secure connections\" setting may be set to disabled, or you may need to adjust some settings on your network. You can {openLink}learn more about secure connections here{closeLink}.'\n              )}\n              tags={[\n                {\n                  open: 'openLink',\n                  close: 'closeLink',\n                  component: Link,\n                  to: 'https://support.plex.tv/hc/en-us/articles/206225077-How-to-Use-Secure-Server-Connections',\n                  kind: kinds.PRIMARY,\n                  target: '_blank',\n                },\n              ]}\n            />\n          </>\n        }\n        iconSrc={pmsLogo}\n        title={title}\n      >\n        {description ? (\n          <div className={styles.description}>{description}</div>\n        ) : null}\n\n        {children}\n      </EmptyPage>\n    );\n  }\n}\n\nexport default InsecureFallbackChoicePage;\n","// extracted by mini-css-extract-plugin\nexport default {\"description\":\"BMkrY BQ0Uf\"};","// extracted by mini-css-extract-plugin\nexport default {\"downloadButtonContainer\":\"vg2aF\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { discoverServers } from 'app/js/stores/actions/appActions';\nimport * as commonServerActions from 'app/js/stores/actions/serverActions';\nimport createUnstableServerSelector from 'app/js/stores/selectors/server/createUnstableServerSelector';\nimport { PLEX_APP_DOWNLOADS } from 'app/js/utils/constants/commonUrls';\nimport browser from 'app/js/utils/device/browser';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\nimport useDisclosure from 'app/js/v4/core/ui/hooks/useDisclosure';\nimport Button from 'app/js/views/v3/components/core/buttons/Button';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport ServerUnavailableErrorPage from 'app/js/views/v3/components/pages/ServerUnavailableErrorPage';\nimport AllowHttpFallbackModalConnector from 'app/js/views/v3/components/pages/empty/AllowHttpFallbackModalConnector';\nimport InsecureFallbackChoicePage from 'app/js/views/v3/components/pages/empty/InsecureFallbackChoicePage';\nimport * as insecureFallbackHelpers from 'app/js/views/v3/helpers/insecureFallbackHelpers';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport styles from './ServerUnavailableErrorPageConnector.css';\n\nfunction createMapStateToProps() {\n  return createSelector(createUnstableServerSelector(), (server) => {\n    const bundledConnection = server.connections.find((connection: any) => {\n      // Rely on the `connectionComparator` in `ConnectionCollection` to find\n      // the first http connection. This sorts a private address before a\n      // loopback if one is available\n      return connection.scheme === 'http';\n    });\n    return {\n      friendlyName: server.friendlyName,\n      bundledConnectionUri: bundledConnection?.uri,\n      shouldShowInsecureAppMessage:\n        insecureFallbackHelpers.shouldShowInsecureAppMessage(server),\n      shouldAllowInsecureFallback:\n        insecureFallbackHelpers.shouldAllowInsecureFallback(server),\n      isPending: server.isPending,\n    };\n  });\n}\n\nfunction createMapDispatchToProps(dispatch: any, props: any) {\n  const payload = {\n    serverEntityID: props.serverEntityID,\n    metricsPage: props.metricsPage,\n  };\n\n  return {\n    onTryAgainPress() {\n      dispatch(discoverServers());\n      dispatch(commonServerActions.testServer(payload));\n    },\n  };\n}\n\ntype ServerUnavailableErrorPageConnectorProps = {\n  serverEntityID: string;\n  friendlyName?: string;\n  bundledConnectionUri?: string;\n  shouldShowInsecureAppMessage: boolean;\n  shouldAllowInsecureFallback: boolean;\n  isPending?: boolean;\n  onTryAgainPress: (...args: any[]) => any;\n};\n\nfunction ServerUnavailableErrorPageConnector(\n  props: ServerUnavailableErrorPageConnectorProps\n) {\n  const {\n    friendlyName,\n    bundledConnectionUri,\n    shouldShowInsecureAppMessage,\n    shouldAllowInsecureFallback,\n    isPending,\n    onTryAgainPress,\n  } = props;\n\n  const { isOpen, onOpen, onClose } = useDisclosure();\n\n  if (shouldShowInsecureAppMessage) {\n    const shouldShowDownloadButton =\n      browser.platformID === 'macos' || browser.platformID === 'windows';\n    return (\n      <InsecureFallbackChoicePage\n        title={t(\n          'app.plex.tv is unable to connect to \"{serverName}\" securely',\n          {\n            serverName: friendlyName,\n          }\n        )}\n      >\n        {shouldShowDownloadButton ? (\n          <div className={styles.downloadButtonContainer}>\n            <Button\n              kind={kinds.PRIMARY}\n              target=\"_blank\"\n              to={PLEX_APP_DOWNLOADS}\n            >\n              {browser.platformID === 'windows'\n                ? t('Download Plex for Windows')\n                : t('Download Plex for Mac')}\n            </Button>\n          </div>\n        ) : null}\n\n        {bundledConnectionUri ? (\n          <Link\n            kind={kinds.PRIMARY}\n            to={path.join([bundledConnectionUri, '/web/index.html'])}\n          >\n            {shouldShowDownloadButton\n              ? t('Or you can try to navigate directly to Plex Media Server')\n              : t('You can try to navigate directly to Plex Media Server')}\n          </Link>\n        ) : null}\n      </InsecureFallbackChoicePage>\n    );\n  }\n\n  if (shouldAllowInsecureFallback) {\n    return (\n      <InsecureFallbackChoicePage\n        description={t(\n          'The app is loaded insecurely. You can attempt to use an insecure connection now.'\n        )}\n        title={t(\n          'The server \"{serverName}\" does not allow secure connections',\n          { serverName: friendlyName }\n        )}\n      >\n        <AllowHttpFallbackModalConnector\n          isOpen={isOpen}\n          serverEntityID={props.serverEntityID}\n          onModalClose={onClose}\n        />\n\n        <Button kind={kinds.PRIMARY} onPress={onOpen}>\n          {t('Allow Insecure Connections')}\n        </Button>\n      </InsecureFallbackChoicePage>\n    );\n  }\n\n  return (\n    <ServerUnavailableErrorPage\n      friendlyName={friendlyName}\n      isPending={isPending}\n      onTryAgainPress={onTryAgainPress}\n    />\n  );\n}\n\nexport default connect(\n  createMapStateToProps,\n  createMapDispatchToProps\n)(ServerUnavailableErrorPageConnector);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport httpFallbackOptions from 'app/js/utils/constants/httpFallbackOptions';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport t from 'app/js/utils/t';\nimport SpinnerButton from 'app/js/views/v3/components/core/buttons/SpinnerButton';\nimport Modal from 'app/js/views/v3/components/core/modals/Modal';\nimport ModalBody from 'app/js/views/v3/components/core/modals/ModalBody';\nimport ModalContent from 'app/js/views/v3/components/core/modals/ModalContent';\nimport ModalFooter from 'app/js/views/v3/components/core/modals/ModalFooter';\nimport ModalFooterButtonBar from 'app/js/views/v3/components/core/modals/ModalFooterButtonBar';\nimport ModalHeader from 'app/js/views/v3/components/core/modals/ModalHeader';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\n\ntype AllowHttpFallbackModalProps = {\n  serverEntityID: string;\n  publicAddressMatches: boolean;\n  isOpen: boolean;\n  onAllowHttpFallback: (...args: any[]) => any;\n  onModalClose: (...args: any[]) => any;\n};\n\ntype AllowHttpFallbackModalState = any;\n\nclass AllowHttpFallbackModal extends Component<\n  AllowHttpFallbackModalProps,\n  AllowHttpFallbackModalState\n> {\n  constructor(props: any, context: any) {\n    super(props, context);\n\n    this.state = {\n      isSubmitting: false,\n    };\n  }\n\n  //\n  // Listeners\n\n  onAllowFallbackConfirm = () => {\n    this.setState({ isSubmitting: true });\n\n    this.props.onAllowHttpFallback({\n      serverEntityID: this.props.serverEntityID,\n      allowHttpFallback: this.props.publicAddressMatches\n        ? httpFallbackOptions.SAME_NETWORK\n        : httpFallbackOptions.ALWAYS,\n    });\n  };\n\n  //\n  // Render\n\n  render() {\n    const { publicAddressMatches, isOpen, onModalClose } = this.props;\n\n    const { isSubmitting } = this.state;\n\n    return (\n      <Modal\n        isOpen={isOpen}\n        metricsPage={metricsPages.HOME}\n        size={sizes.SMALL}\n        onModalClose={onModalClose}\n      >\n        <ModalContent onModalClose={onModalClose}>\n          <ModalHeader>{t('Allow Insecure Connections')}</ModalHeader>\n          <ModalBody>\n            {publicAddressMatches\n              ? t(\n                  \"Insecure connections will only be allowed when you're on the same network as the server.\"\n                )\n              : t('Insecure connections will be allowed to any server.')}\n            <br />\n            {t(\n              'The Allow Fallback to Insecure Connections setting can be changed in Web Settings. Would you like to allow insecure connections?'\n            )}\n          </ModalBody>\n          <ModalFooter>\n            <ModalFooterButtonBar>\n              <SpinnerButton\n                isDisabled={isSubmitting}\n                kind={kinds.DEFAULT}\n                onPress={onModalClose}\n              >\n                {t('Cancel')}\n              </SpinnerButton>\n              <SpinnerButton\n                isSpinning={isSubmitting}\n                kind={kinds.DANGER}\n                onPress={this.onAllowFallbackConfirm}\n              >\n                {t('Allow')}\n              </SpinnerButton>\n            </ModalFooterButtonBar>\n          </ModalFooter>\n        </ModalContent>\n      </Modal>\n    );\n  }\n}\n\nexport default AllowHttpFallbackModal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport * as desktopServerActions from 'app/js/stores/actions/serverActions';\nimport createUnstableServerSelector from 'app/js/stores/selectors/server/createUnstableServerSelector';\nimport AllowHttpFallbackModal from './AllowHttpFallbackModal';\n\nfunction createMapStateToProps() {\n  return createSelector(createUnstableServerSelector(), (server) => {\n    return {\n      publicAddressMatches: server.publicAddressMatches,\n    };\n  });\n}\n\nconst mapDispatchToProps = {\n  onAllowHttpFallback: desktopServerActions.allowHttpFallback,\n};\n\nexport default connect(\n  createMapStateToProps,\n  mapDispatchToProps\n)(AllowHttpFallbackModal);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport { SYSTEM_STATUS_URL } from 'app/js/utils/constants/commonUrls';\nimport t from 'app/js/utils/t';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport ErrorPage from 'app/js/views/v3/components/pages/empty/ErrorPage';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\n\nfunction DownForMaintenancePage() {\n  return (\n    <ErrorPage\n      description={t(\"Don't worry, it will be back soon\")}\n      title={t('Plex is down for maintenance')}\n    >\n      <Link kind={kinds.PRIMARY} target=\"_blank\" to={SYSTEM_STATUS_URL}>\n        status.plex.tv\n      </Link>\n    </ErrorPage>\n  );\n}\n\nexport default DownForMaintenancePage;\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyPage\":\"BmNjQ\",\"content\":\"Ocumg\",\"icon\":\"BIfF7\",\"default\":\"q27mR\",\"primary\":\"RiRlN\",\"success\":\"SM8HT\",\"danger\":\"iBxg7\",\"imgIcon\":\"uEwNS\",\"title\":\"eTubS\",\"footer\":\"D_Abe\"};","import classNames from 'classnames';\nimport React, { FunctionComponent, ReactElement } from 'react';\nimport { IconProps } from '@plex/react-chroma-icon';\nimport Scroller from 'app/js/views/v3/components/core/base/Scroller';\nimport EmptyPageDescription from 'app/js/views/v3/components/pages/empty/EmptyPageDescription';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport styles from 'app/js/views/v3/components/pages/empty/EmptyPage.css';\n\nexport interface EmptyPageProps {\n  className?: string;\n  contentClassName?: string;\n  iconClassName?: string;\n  titleClassName?: string;\n  footerClassName?: string;\n  children?: React.ReactNode;\n  scrollDirection?: any;\n  iconComponent?: FunctionComponent<IconProps>;\n  iconSrc?: string;\n  kind?: any; // TODO: PropTypes.oneOf(kinds.all)\n  title?: string;\n  description?: any | string;\n  footer?: string;\n}\n\nfunction EmptyPage(props: EmptyPageProps): ReactElement {\n  const {\n    className,\n    contentClassName,\n    iconClassName,\n    titleClassName,\n    footerClassName,\n    children,\n    kind,\n    scrollDirection,\n    iconComponent: Icon,\n    iconSrc,\n    title,\n    description,\n    footer,\n    ...otherProps\n  } = props;\n\n  return (\n    // @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: (Element | null)[]; className: s... Remove this comment to see the full error message\n    <Scroller\n      className={className}\n      scrollDirection={scrollDirection}\n      {...otherProps}\n    >\n      <div className={contentClassName}>\n        {iconSrc ? <img className={styles.imgIcon} src={iconSrc} /> : null}\n        {Icon ? (\n          <span className={classNames(iconClassName, styles[kind])}>\n            <Icon />\n          </span>\n        ) : null}\n        {title ? <div className={titleClassName}>{title}</div> : null}\n        {description ? (\n          <EmptyPageDescription>{description}</EmptyPageDescription>\n        ) : null}\n        {children}\n      </div>\n\n      {footer ? <div className={footerClassName}>{footer}</div> : null}\n    </Scroller>\n  );\n}\n\nEmptyPage.defaultProps = {\n  className: styles.emptyPage,\n  contentClassName: styles.content,\n  iconClassName: styles.icon,\n  titleClassName: styles.title,\n  footerClassName: styles.footer,\n  kind: kinds.DEFAULT,\n};\n\nexport default EmptyPage;\n","// extracted by mini-css-extract-plugin\nexport default {\"description\":\"BQ0Uf\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport styles from 'app/js/views/v3/components/pages/empty/EmptyPageDescription.css';\n\ntype EmptyPageDescriptionProps = {\n  children?: React.ReactNode;\n};\n\nfunction EmptyPageDescription({ children }: EmptyPageDescriptionProps) {\n  return <div className={styles.description}>{children}</div>;\n}\n\nexport default EmptyPageDescription;\n","import React, { ReactElement } from 'react';\nimport { IconWarning } from '@plex/react-chroma-icon';\nimport EmptyPage, {\n  EmptyPageProps,\n} from 'app/js/views/v3/components/pages/empty/EmptyPage';\n\ntype ErrorPageProps = Pick<\n  EmptyPageProps,\n  'children' | 'description' | 'title'\n>;\n\nfunction ErrorPage(props: ErrorPageProps): ReactElement {\n  return <EmptyPage iconComponent={IconWarning} {...props} />;\n}\n\nexport default ErrorPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport t from 'app/js/utils/t';\nimport SpinnerButton from 'app/js/views/v3/components/core/buttons/SpinnerButton';\nimport EmptyPage from 'app/js/views/v3/components/pages/empty/EmptyPage';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport pmsLogo from 'app/img/pms-logo.svg';\n\ntype InstallingServerUpdatePageProps = {\n  friendlyName?: string;\n  isPending?: boolean;\n  onTryAgainPress: (...args: any[]) => any;\n};\n\nfunction InstallingServerUpdatePage(props: InstallingServerUpdatePageProps) {\n  const { friendlyName, isPending, onTryAgainPress } = props;\n\n  return (\n    <EmptyPage\n      description={t('Grab a cup of tea. This may take a couple of minutes.')}\n      iconSrc={pmsLogo}\n      title={t('The server \"{serverName}\" is installing an update', {\n        serverName: friendlyName,\n      })}\n    >\n      <SpinnerButton\n        isSpinning={isPending}\n        kind={kinds.PRIMARY}\n        onPress={onTryAgainPress}\n      >\n        {t('Retry connection')}\n      </SpinnerButton>\n    </EmptyPage>\n  );\n}\n\nexport default InstallingServerUpdatePage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { discoverServers } from 'app/js/stores/actions/appActions';\nimport * as commonServerActions from 'app/js/stores/actions/serverActions';\nimport createUnstableServerSelector from 'app/js/stores/selectors/server/createUnstableServerSelector';\nimport InstallingServerUpdatePage from 'app/js/views/v3/components/pages/empty/InstallingServerUpdatePage';\n\nfunction createMapStateToProps() {\n  return createSelector(createUnstableServerSelector(), (server) => {\n    return {\n      friendlyName: server.friendlyName,\n      isPending: server.isPending,\n    };\n  });\n}\n\nfunction createMapDispatchToProps(dispatch: any, props: any) {\n  const payload = {\n    serverEntityID: props.serverEntityID,\n  };\n\n  return {\n    onTryAgainPress() {\n      dispatch(discoverServers());\n      dispatch(commonServerActions.testServer(payload));\n    },\n  };\n}\n\nexport default connect(\n  createMapStateToProps,\n  createMapDispatchToProps\n)(InstallingServerUpdatePage);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport t from 'app/js/utils/t';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport ErrorPage from 'app/js/views/v3/components/pages/empty/ErrorPage';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\n\nfunction NotFoundErrorPage() {\n  return (\n    <ErrorPage\n      description={t(\"We can't find the page you're looking for\")}\n      title={t('Not found')}\n    >\n      <Link kind={kinds.PRIMARY} to=\"#\">\n        {t('Go Home')}\n      </Link>\n    </ErrorPage>\n  );\n}\n\nexport default NotFoundErrorPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport t from 'app/js/utils/t';\nimport ErrorPage from 'app/js/views/v3/components/pages/empty/ErrorPage';\n\nfunction UnreachablePage() {\n  return (\n    <ErrorPage\n      description={t(\n        'We are unable to connect to plex.tv at this time. Please try again later.'\n      )}\n      title={t('Plex is not reachable')}\n    />\n  );\n}\n\nexport default UnreachablePage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { redirectToUrl } from 'app/js/stores/actions/appActions';\n\nconst mapDispatchToProps = {\n  dispatchRedirectToUrl: redirectToUrl,\n};\ninterface ConnectedRedirectToProps {\n  to: string;\n  replace?: boolean;\n  dispatchRedirectToUrl: (...args: any[]) => any;\n}\nclass RedirectToConnector extends Component<ConnectedRedirectToProps> {\n  static propTypes = {\n    to: PropTypes.string.isRequired,\n    replace: PropTypes.bool,\n    dispatchRedirectToUrl: PropTypes.func.isRequired,\n  };\n  //\n  // Lifecycle\n  componentDidMount() {\n    const { to, replace } = this.props;\n    this.props.dispatchRedirectToUrl({ url: to, replace });\n  }\n  //\n  // Render\n  render() {\n    return null;\n  }\n}\nexport default connect(null, mapDispatchToProps)(RedirectToConnector);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\n// lodash-like _.omitBy\nfunction omitBy(obj: any, predicate = _.identity) {\n  // Do in-place removal of omitted items, preserving object identity\n  Object.keys(obj).forEach((key) => {\n    if (!predicate(obj[key])) {\n      delete obj[key];\n    }\n  });\n\n  return obj;\n}\n\n// lodash-like _.mapValues\nfunction mapValues(obj: any, transform = _.identity) {\n  // Do in-place mapping of values, preserving object identity\n\n  Object.keys(obj).forEach((key) => {\n    obj[key] = transform(obj[key]);\n  });\n\n  return obj;\n}\n\n// @ts-expect-error ts-migrate(7023) FIXME: 'compactDeep' implicitly has return type 'any' bec... Remove this comment to see the full error message\nfunction compactDeep(obj: any) {\n  // First remove top-level falsey values, then recurse into object values\n  return mapValues(omitBy(obj), (val) =>\n    _.isObject(val) ? compactDeep(val) : val\n  );\n}\n\nexport default compactDeep;\n","import { Selector } from 'reselect';\nimport { User } from 'app/js/v4/core/user/userTypes';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\n\nconst selectUser: Selector<LegacyRootState, User> = (appState) => appState.user;\n\nexport default selectUser;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { matchPath } from 'react-router-dom';\nimport { createSelector } from 'reselect';\nimport { resolve } from 'app/js/adapters/adapters';\nimport selectUserLanguage from 'app/js/stores/selectors/user/selectUserLanguage';\nimport { getAuthAppUrl, getWWWPlexUrl } from 'app/js/utils/getRuntimeUrl';\nimport compactDeep from 'app/js/utils/object/compactDeep';\nimport shouldClientPoll from 'app/js/utils/shouldClientPoll';\nimport addHashParams from 'app/js/utils/url/addHashParams';\nimport path from 'app/js/utils/url/path';\nimport replaceUrlHash from 'app/js/utils/url/replaceUrlHash';\nimport splitUrlSearchHashPathAndParams from 'app/js/utils/url/splitUrlSearchHashPathAndParams';\nimport selectUser from 'app/js/v4/core/user/selectors/selectUser';\nimport history from 'app/js/v4/history';\nimport routes from 'app/js/v4/routes/routes';\n// No need to pass through context.user to auth as it is not useful for auth\n// metrics events.\nfunction getMetricsContextForAuth(metricsJSON: any) {\n  const { user, ...otherContext } = metricsJSON.context || {};\n  return compactDeep({ ...otherContext });\n}\nfunction createServiceAuthUrlSelector() {\n  return createSelector(\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { signUp }: any) => signUp,\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { email }: any) => email,\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { providerID }: any) => providerID,\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { userAuthToken }: any) => userAuthToken,\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { code }: any) => code,\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { pinID }: any) => pinID,\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { errorMessage }: any) => errorMessage,\n    (appState) => (appState as any).clientID,\n    selectUser,\n    selectUserLanguage,\n    (\n      signUp,\n      email,\n      providerID,\n      userAuthToken,\n      code,\n      pinID,\n      errorMessage,\n      clientID,\n      user,\n      language\n    ) => {\n      const metrics = resolve('metrics');\n      const metricsJSON = metrics.toJSON();\n      const context = getMetricsContextForAuth(metricsJSON);\n      if (signUp) {\n        const { base } = splitUrlSearchHashPathAndParams(window.location.href);\n        const params = {\n          forwardUrl: base,\n          twop: '1',\n          context,\n        };\n        if (language) {\n          (params as any).lang = language;\n        }\n        if ((user as any).anonymous) {\n          (params as any).guestToken = user.authToken;\n        }\n        return path.join(getWWWPlexUrl('sign-up/'), params, {\n          trailingSlash: true,\n        });\n      } else {\n        const params = {\n          clientID,\n          context,\n        };\n        if (!shouldClientPoll()) {\n          const forwardUrl = pinID\n            ? addHashParams(window.location.href, { pinID })\n            : window.location.href;\n          (params as any).forwardUrl = forwardUrl;\n          if (\n            matchPath(history.location.pathname, { path: routes.serverSetup })\n          ) {\n            (params as any).skipSignInUrl = replaceUrlHash(\n              window.location.href,\n              path.join(['#!/setup'], { forwardUrl }, { trailingSlash: true })\n            );\n          }\n        }\n        if (code) {\n          (params as any).code = code;\n        }\n        if (providerID) {\n          (params as any).provider = providerID;\n        }\n        if (email) {\n          (params as any).email = email;\n        }\n        if (userAuthToken) {\n          (params as any).authToken = userAuthToken;\n        }\n        if (errorMessage) {\n          (params as any).error = errorMessage;\n        }\n        if (language) {\n          (params as any).language = language;\n        }\n        if ((user as any).anonymous) {\n          (params as any).guestToken = user.authToken;\n        }\n        return path.join(\n          [getAuthAppUrl(), path.join(['#!/'], params)],\n          {},\n          { recognizeHash: true, trailingSlash: true }\n        );\n      }\n    }\n  );\n}\nexport default createServiceAuthUrlSelector;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport parseQueryString from 'app/js/utils/parser/parseQueryString';\nimport stringifyQueryString from 'app/js/utils/parser/stringifyQueryString';\nimport splitUrlSearchHashPathAndParams from 'app/js/utils/url/splitUrlSearchHashPathAndParams';\n\nfunction addHashParams(url: any, params: any) {\n  const { base, searchParams, hashPath, hashParams } =\n    splitUrlSearchHashPathAndParams(url);\n  // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n  const parsedParams = parseQueryString(hashParams);\n\n  const stringifiedParams = stringifyQueryString({\n    ...parsedParams,\n    ...params,\n  });\n\n  return `${base}${searchParams}#${hashPath}?${stringifiedParams}`;\n}\n\nexport default addHashParams;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function replaceUrlHash(url: any, replacement: any) {\n  let [, host] = url.match(/(^[^#]+)?/);\n  host = host || '';\n\n  return `${host}${replacement}`;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport createServiceAuthUrlSelector from 'app/js/stores/selectors/user/createServiceAuthUrlSelector';\n\nfunction createMapStateToProps() {\n  return createSelector(createServiceAuthUrlSelector(), (serviceAuthUrl) => {\n    return {\n      serviceAuthUrl,\n    };\n  });\n}\n\ntype ServiceAuthUrlConnectorProps = {\n  component: React.ReactElement;\n  serviceAuthUrl?: string;\n};\n\nfunction ServiceAuthUrlConnector(props: ServiceAuthUrlConnectorProps) {\n  const { component: Component, serviceAuthUrl, ...otherProps } = props;\n\n  // @ts-expect-error ts-migrate(2604) FIXME: JSX element type 'Component' does not have any con... Remove this comment to see the full error message\n  return <Component to={serviceAuthUrl} {...otherProps} />;\n}\n\n// Explicitly pass {} as 2nd `connect` arg to avoid injecting `dispatch` prop\nexport default connect(createMapStateToProps, {})(ServiceAuthUrlConnector);\n","// extracted by mini-css-extract-plugin\nexport default {\"feature\":\"v68Zv\",\"featurePadding\":\"RhJbE\",\"featureImage\":\"ld3K4\",\"featureContainer\":\"ezibF\",\"featureTitle\":\"UK0W0\",\"featureDescription\":\"IEISx\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport styles from './PlexPassFeature.css';\n\ntype PlexPassFeatureProps = {\n  img: string;\n  title: string;\n  description: string;\n};\n\nfunction PlexPassFeature({ img, title, description }: PlexPassFeatureProps) {\n  return (\n    <div className={styles.feature}>\n      <div className={styles.featurePadding}>\n        <img className={styles.featureImage} src={img} />\n        <div className={styles.featureContainer}>\n          <div className={styles.featureTitle}>{title}</div>\n          <div className={styles.featureDescription}>{description}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PlexPassFeature;\n","// extracted by mini-css-extract-plugin\nexport default {\"plexPassTitle\":\"Oeu_z\",\"header\":\"oy4UL GB5xN\",\"body\":\"Tqt8q Itgwf\",\"moreFeatures\":\"dXd6r\",\"footer\":\"xMKyL dNFZf\",\"planButton\":\"yn8Ev\",\"link\":\"m1P8l\",\"spinnerContainer\":\"BOSsi\",\"plansContainer\":\"ADVyI\",\"isPlansPending\":\"jWRRD\",\"marketingFrame\":\"qsGrV\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport classNames from 'classnames';\nimport React from 'react';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\nimport Spinner from 'app/js/views/v3/components/core/Spinner';\nimport Button from 'app/js/views/v3/components/core/buttons/Button';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport MetricsClickTracker from 'app/js/views/v3/components/core/metrics/MetricsClickTracker';\nimport ModalBody from 'app/js/views/v3/components/core/modals/ModalBody';\nimport ModalContent from 'app/js/views/v3/components/core/modals/ModalContent';\nimport ModalFooter from 'app/js/views/v3/components/core/modals/ModalFooter';\nimport ModalHeader from 'app/js/views/v3/components/core/modals/ModalHeader';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport serverDashboardImg from 'app/img/upsell/upsell-dashboard.svg';\nimport liveDVRImg from 'app/img/upsell/upsell-live-dvr.svg';\nimport mobileSyncImg from 'app/img/upsell/upsell-mobile-sync.svg';\nimport musicImg from 'app/img/upsell/upsell-music.svg';\nimport plexHomeImg from 'app/img/upsell/upsell-plex-home.svg';\nimport webhooksImg from 'app/img/upsell/upsell-webhooks.svg';\nimport PlexPassFeature from './PlexPassFeature';\nimport styles from './PlexPassModalContent.css';\n\ntype PlexPassModalContentProps = {\n  metricsProperties?: any;\n  subscribeUrl: string;\n  infoUrl: string;\n  plans: any[];\n  isPlansPending: boolean;\n  isPlansPopulated: boolean;\n  plansError?: any;\n  onModalClose: (...args: any[]) => any;\n};\n\nfunction PlexPassModalContent(props: PlexPassModalContentProps) {\n  const {\n    metricsProperties,\n    subscribeUrl,\n    infoUrl,\n    plans,\n    isPlansPending,\n    isPlansPopulated,\n    plansError,\n    onModalClose,\n  } = props;\n\n  return (\n    <ModalContent onModalClose={onModalClose}>\n      {/* @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: any[]; className: string; }' is ... Remove this comment to see the full error message */}\n      <ModalHeader className={styles.header}>\n        <div className={styles.plexPassTitle}>{t('Plex Pass')}</div>\n        {t('Enhance your Plex experience with exclusive premium features')}\n      </ModalHeader>\n\n      <ModalBody innerClassName={styles.body}>\n        <PlexPassFeature\n          description={t('Enjoy your media offline on Android and iOS devices')}\n          img={mobileSyncImg}\n          title={t('Downloads')}\n        />\n        <PlexPassFeature\n          description={t(\n            'Connect a tuner and antenna to record free OTA broadcasts'\n          )}\n          img={liveDVRImg}\n          title={t('Live TV & DVR')}\n        />\n        <PlexPassFeature\n          description={t(\n            'Set up managed user accounts to create custom access restrictions'\n          )}\n          img={plexHomeImg}\n          title={t('Parental Controls')}\n        />\n        <PlexPassFeature\n          description={t(\n            'Connect your media server to your home automation system'\n          )}\n          img={webhooksImg}\n          title={t('Webhooks')}\n        />\n        <PlexPassFeature\n          description={t(\n            'See the play history, bandwidth, and top users on your media server'\n          )}\n          img={serverDashboardImg}\n          title={t('Server Dashboard')}\n        />\n        <PlexPassFeature\n          description={t('Sweet Fades, Loudness Leveling, Lyrics, and more')}\n          img={musicImg}\n          title={t('Premium Music Magic')}\n        />\n        <div className={styles.moreFeatures}>\n          <Link\n            className={styles.link}\n            target={__EXTERNAL_LINK_TARGET__}\n            to={infoUrl}\n          >\n            {t('...plus more exclusive features!')}\n          </Link>\n        </div>\n      </ModalBody>\n\n      <ModalFooter className={styles.footer}>\n        {isPlansPending ? (\n          <div className={styles.spinnerContainer}>\n            <Spinner />\n          </div>\n        ) : null}\n        <div\n          className={classNames(\n            styles.plansContainer,\n            isPlansPending && styles.isPlansPending\n          )}\n        >\n          {!isPlansPending && isPlansPopulated\n            ? plans.map((plan) => (\n                <MetricsClickTracker\n                  key={plan.id}\n                  {...metricsProperties}\n                  action={metricsActions.SUBSCRIBE}\n                  plan={plan.id}\n                >\n                  <Button\n                    className={styles.planButton}\n                    kind={kinds.PRIMARY}\n                    size={sizes.LARGE}\n                    target={__EXTERNAL_LINK_TARGET__}\n                    to={path.join(subscribeUrl, {\n                      plan: plan.id,\n                      continue: window.location.href,\n                    })}\n                  >\n                    {plan.formattedPrice}  {plan.name}\n                  </Button>\n                </MetricsClickTracker>\n              ))\n            : null}\n          {!isPlansPending && plansError ? (\n            <MetricsClickTracker\n              {...metricsProperties}\n              action={metricsActions.SUBSCRIBE}\n              plan=\"unknown\"\n            >\n              <Button\n                className={styles.planButton}\n                kind={kinds.PRIMARY}\n                size={sizes.LARGE}\n                target={__EXTERNAL_LINK_TARGET__}\n                to={subscribeUrl}\n              >\n                {t('Subscribe')}\n              </Button>\n            </MetricsClickTracker>\n          ) : null}\n        </div>\n      </ModalFooter>\n    </ModalContent>\n  );\n}\n\nexport default PlexPassModalContent;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { fetchPlans } from 'app/js/stores/actions/userActions';\nimport selectUser from 'app/js/stores/selectors/user/selectUser';\nimport { getWWWPlexUrl } from 'app/js/utils/getRuntimeUrl';\nimport path from 'app/js/utils/url/path';\nimport PlexPassModalContent from './PlexPassModalContent';\n\nfunction createMapStateToProps() {\n  return createSelector(\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { origin }: any) => origin,\n    selectUser,\n    (origin, user) => {\n      const userFlexState = user[__PLATFORM__];\n      const subscribeParams = {\n        utm_source: 'app.plex.tv',\n        utm_medium: 'app',\n        utm_campaign: 'PP_in-app-upsell_01',\n      };\n      if (origin) {\n        (subscribeParams as any).utm_content = origin;\n      }\n      return {\n        isSignedIn: user.isSignedIn,\n        plans: userFlexState.plans,\n        isPlansPending: userFlexState.isPlansPending,\n        isPlansPopulated: userFlexState.isPlansPopulated,\n        plansError: userFlexState.plansError,\n        subscribeUrl: path.join(\n          getWWWPlexUrl('/plex-pass/purchase'),\n          subscribeParams\n        ),\n        infoUrl: getWWWPlexUrl('/plex-pass'),\n      };\n    }\n  );\n}\ntype PlexPassModalContentConnectorProps = {\n  isSignedIn: boolean;\n  fetchPlans: (...args: any[]) => any;\n};\nclass PlexPassModalContentConnector extends Component<PlexPassModalContentConnectorProps> {\n  //\n  // Lifecycle\n  UNSAFE_componentWillMount() {\n    if (this.props.isSignedIn) {\n      this.props.fetchPlans();\n    }\n  }\n  UNSAFE_componentWillReceiveProps(\n    nextProps: PlexPassModalContentConnectorProps\n  ) {\n    if (\n      nextProps.isSignedIn &&\n      nextProps.isSignedIn !== this.props.isSignedIn\n    ) {\n      nextProps.fetchPlans();\n    }\n  }\n  //\n  // Render\n  render() {\n    // @ts-expect-error ts-migrate(2740) FIXME: Type '{ isSignedIn: boolean; fetchPlans: (...args:... Remove this comment to see the full error message\n    return <PlexPassModalContent {...this.props} />;\n  }\n}\nexport default connect(createMapStateToProps, { fetchPlans })(\n  PlexPassModalContentConnector\n);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport { resolve } from 'app/js/adapters/adapters';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport Modal from 'app/js/views/v3/components/core/modals/Modal';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport shouldPureComponentUpdate from 'app/js/views/v3/helpers/shouldPureComponentUpdate';\nimport PlexPassModalContentConnector from './PlexPassModalContentConnector';\n\ntype PlexPassModalProps = {\n  origin?: any; // TODO: PropTypes.oneOf(upsellOrigins.ALL)\n  isOpen: boolean;\n  metricsProperties?: any;\n  onModalClose: (...args: any[]) => any;\n};\n\nclass PlexPassModal extends Component<PlexPassModalProps> {\n  //\n  // Lifecycle\n\n  shouldComponentUpdate(nextProps: PlexPassModalProps, nextState: any) {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 5 arguments, but got 3.\n    return shouldPureComponentUpdate(this, nextProps, nextState);\n  }\n\n  //\n  // Listeners\n\n  onModalClose = () => {\n    const metrics = resolve('metrics');\n\n    metrics.trackClick({\n      ...this.props.metricsProperties,\n      page: metricsPages.PLEX_PASS,\n      action: metricsActions.SKIP,\n    });\n\n    this.props.onModalClose();\n  };\n\n  //\n  // Render\n\n  render() {\n    const { origin, isOpen, metricsProperties } = this.props;\n\n    return (\n      <Modal\n        isOpen={isOpen}\n        metricsPage={metricsPages.PLEX_PASS}\n        metricsProperties={metricsProperties}\n        size={sizes.LARGE}\n        onModalClose={this.onModalClose}\n      >\n        <PlexPassModalContentConnector\n          metricsProperties={metricsProperties}\n          origin={origin}\n          onModalClose={this.onModalClose}\n        />\n      </Modal>\n    );\n  }\n}\n\nexport default PlexPassModal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function createChainedCallback(...callbacks: any[]) {\n  return function chainedCallback(...args: any[]) {\n    for (let i = 0, len = callbacks.length; i < len; i++) {\n      const callback = callbacks[i];\n\n      if (typeof callback === 'function') {\n        callback(...args);\n      }\n    }\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function createKey(...parts: any[]) {\n  return parts.filter((part) => !!part).join('--');\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function cssDurationToMilliseconds(duration: any) {\n  // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 2.\n  const num = parseFloat(duration, 10);\n  let unit = duration.match(/m?s/);\n\n  if (unit) {\n    unit = unit[0];\n  }\n\n  switch (unit) {\n    // Seconds\n    case 's':\n      return num * 1000;\n    // Milliseconds\n    case 'ms':\n      return num;\n  }\n\n  return 0;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport cssDurationToMilliseconds from 'app/js/views/v3/helpers/css/cssDurationToMilliseconds';\n\nexport default function cssDurationToSeconds(duration: any) {\n  return cssDurationToMilliseconds(duration) / 1000;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\n// @ts-expect-error ts-migrate(7023) FIXME: 'isVisible' implicitly has return type 'any' becau... Remove this comment to see the full error message\nfunction isVisible(element: any) {\n  if (element === document) {\n    return true;\n  }\n  if (!element) {\n    return false;\n  }\n  if (!element.parentNode) {\n    return false;\n  }\n  if (element.style) {\n    const style = element.style;\n    if (style.display === 'none' || style.visibility === 'hidden') {\n      return false;\n    }\n  }\n  if (window.getComputedStyle) {\n    const style = window.getComputedStyle(element);\n    if (\n      style.getPropertyValue('display') === 'none' ||\n      style.getPropertyValue('visibility') === 'hidden'\n    ) {\n      return false;\n    }\n  }\n  return isVisible(element.parentNode);\n}\nfunction isTabbable(element: any) {\n  let tabIndex = element.tabIndex;\n  if (tabIndex === null) {\n    tabIndex = undefined;\n  }\n  return !isNaN(tabIndex) && tabIndex >= 0 && isFocusable(element);\n}\nfunction isFocusable(element: any) {\n  if (!isVisible(element)) {\n    return false;\n  }\n  const nodeName = element.nodeName.toLowerCase();\n  if (/input|select|textarea|button|object/.test(nodeName)) {\n    return !element.disabled;\n  } else if (nodeName === 'a') {\n    return element.href;\n  }\n  return true;\n}\nexport default function findTabbableDescendants(element: any) {\n  if (!element) {\n    return [];\n  }\n  const tabbable = [].slice\n    .call(element.getElementsByTagName('*'), 0)\n    .filter((currentElement) => {\n      return isTabbable(currentElement);\n    });\n  // Use `_.sortBy` as opposed to Array.prototype.sort for its stable sort.\n  return _.sortBy(tabbable, (tabbableElement) => {\n    return (tabbableElement as any).tabIndex === 0\n      ? Infinity\n      : (tabbableElement as any).tabIndex;\n  });\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport assert from 'app/js/utils/log/assert';\nimport parseBoolean from 'app/js/utils/parser/parseBoolean';\nimport findTabbableDescendants from './findTabbableDescendants';\n\nlet previousActiveElement: any;\nlet scopedElement: any;\nfunction tryFocus(element: any) {\n  try {\n    element.focus();\n  } catch (error) {\n    // The element may not exist in the DOM anymore.\n  }\n}\nexport function resetFocus(parentElement: any) {\n  const activeElement = document.activeElement;\n  const doesParentContainActiveElement =\n    activeElement && parentElement && parentElement.contains(activeElement);\n  if (activeElement && !doesParentContainActiveElement) {\n    (activeElement as any).blur();\n  }\n}\nexport function startScopedFocus(element: any) {\n  previousActiveElement = document.activeElement;\n  scopedElement = element;\n  resetFocus(element);\n}\nexport function scopeTabEvent(event: any) {\n  assert(\n    scopedElement,\n    'Call `startScopedFocus(element)` before `scopeTabEvent`'\n  );\n  const tabbable = findTabbableDescendants(scopedElement);\n  if (!tabbable.length) {\n    return;\n  }\n  event.preventDefault();\n  const activeElement = document.activeElement;\n  // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'Element' is not assignable to pa... Remove this comment to see the full error message\n  const index = activeElement ? tabbable.indexOf(activeElement) : -1;\n  const lastIndex = tabbable.length - 1;\n  let nextIndex;\n  if (index === -1) {\n    nextIndex = event.shiftKey ? lastIndex : 0;\n  } else {\n    nextIndex = event.shiftKey ? index - 1 : index + 1;\n    // Wrap focus to the first or last tabbable element.\n    if (nextIndex < 0) {\n      nextIndex = lastIndex;\n    } else if (nextIndex > lastIndex) {\n      nextIndex = 0;\n    }\n  }\n  tryFocus(tabbable[nextIndex]);\n}\nexport function scopeAutoFocus() {\n  assert(\n    scopedElement,\n    'Call `startScopedFocus(element)` before `scopeAutoFocus`'\n  );\n  const tabbable = findTabbableDescendants(scopedElement);\n  const element = _.find(tabbable, (elem) =>\n    parseBoolean((elem as any).getAttribute('data-autofocus'))\n  );\n  if (element) {\n    tryFocus(element);\n  }\n}\nexport function resetScopedFocus() {\n  scopedElement = null;\n}\nexport function restorePreviousFocus() {\n  if (previousActiveElement) {\n    tryFocus(previousActiveElement);\n    previousActiveElement = null;\n  }\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nlet i = 0;\n\n// `getUniqueElementID` returns HTML 4.0 compliant element IDs.\n// See: http://stackoverflow.com/a/79022\n\nfunction getUniqueElementID() {\n  return `id-${i++}`;\n}\n\nif (__TEST__) {\n  getUniqueElementID.reset = () => {\n    i = 0;\n  };\n}\n\nexport default getUniqueElementID;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { useEffect, useRef } from 'react';\n\n/**\n * Ensures the effect is only called the first time the condition is met.\n * Defaults to run immediately once only.\n *\n * @deprecated Prefer to use `useEffect` directly. If an effect is unsafe to\n * re-run when a dependency changes it should be refactored so that re-runs are\n * safe. `useEffectOnce` can have unintended consequences with a React app root\n * when a component is reused instead of unmounted and re-mounted.\n */\nexport default function useEffectOnce(effect: any, condition = true) {\n  const hasUsedEffect = useRef(false);\n\n  useEffect(() => {\n    if (condition && !hasUsedEffect.current) {\n      hasUsedEffect.current = true;\n\n      return effect();\n    }\n  }, [condition, effect, hasUsedEffect]);\n}\n","import { useCallback, useState } from 'react';\n\nexport default function useModalState(confirmCallback?: () => void): {\n  isOpen: boolean;\n  onOpen: () => void;\n  onClose: () => void;\n  onConfirm: () => void;\n} {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const onOpen = useCallback(() => setIsOpen(true), []);\n  const onClose = useCallback(() => setIsOpen(false), []);\n\n  const onConfirm = useCallback(() => {\n    setIsOpen(false);\n\n    if (confirmCallback) {\n      confirmCallback();\n    }\n  }, [confirmCallback]);\n\n  return {\n    isOpen,\n    onOpen,\n    onClose,\n    onConfirm,\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { useEffect, useRef } from 'react';\n\nexport default function usePrevious(value: any) {\n  const ref = useRef();\n\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n\n  return ref.current;\n}\n","import { useState } from 'react';\nimport getUniqueElementID from 'app/js/views/v3/helpers/getUniqueElementID';\n\nfunction useUniqueElementID(): string {\n  const [id] = useState(getUniqueElementID);\n\n  return id;\n}\n\nexport default useUniqueElementID;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport config from 'app/js/models/config';\nimport capabilities from 'app/js/utils/device/capabilities';\n\n// Insecure fallback rules:\n//\n// If a server is unavailable and the app prevented insecure connections\n// from being tested, but the server can be seen by plex.tv (presence), we\n// have reason to believe that a fallback may allow the user to connect to\n// the server.\n//\n// 1. If the app is https and does not allow mixed content, but the server\n//    only has http connections, show the \"Reload app insecurely\" action.\n// 2. If the app is https and the server has https connections, but the\n//    https connections failed for some reason (DNS rebinding protection),\n//    show the \"Reload app insecurely\" action.\n// 3. If the app is http and the server has https connections, but the https\n//    connections failed for some reason (DNS rebinding protection), show\n//    the \"Allow insecure connection\" action.\n\nfunction isFallbackPossible() {\n  return !capabilities.isHostedHttps || !!config.allowMixedContent;\n}\n\nfunction isFallbackSuccessLikely(server: any) {\n  return server.isFullServer && !!server.presence && !server.httpsRequired;\n}\n\nexport function shouldShowInsecureAppMessage(server: any) {\n  return !isFallbackPossible() && isFallbackSuccessLikely(server);\n}\n\nexport function shouldAllowInsecureFallback(server: any) {\n  const canCreateFallbackConnections =\n    server.hasHttpsConnections && !server.hasFallbackConnections;\n\n  return (\n    isFallbackPossible() &&\n    isFallbackSuccessLikely(server) &&\n    canCreateFallbackConnections\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const IS_SCROLLING = 'isScrolling';\n\nexport const IS_ACTIVE = 'isActive';\nexport const IS_FOCUSED = 'isFocused';\nexport const IS_DISABLED = 'isDisabled';\nexport const IS_ENTERED = 'isEntered';\n\nexport const IS_DRAGGING = 'isDragging';\nexport const IS_DRAGGING_BEFORE = 'isDraggingBefore';\nexport const IS_DRAGGING_AFTER = 'isDraggingAfter';\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst glue = '!';\n\nlet storage = {};\n\nconst pageStorage = {\n  getPageKey() {\n    return window.location.hash;\n  },\n\n  getKey(nonce: any) {\n    return `${pageStorage.getPageKey()}${glue}${nonce}`;\n  },\n\n  get(key: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    return storage[key];\n  },\n\n  set(key: any, value: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    storage[key] = value;\n  },\n\n  remove(key: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    delete storage[key];\n  },\n\n  clear() {\n    storage = {};\n  },\n};\n\nexport default pageStorage;\n","export const DEFAULT = 'default';\nexport const PRIMARY = 'primary';\nexport const SUCCESS = 'success';\nexport const DANGER = 'danger';\nexport const DARK = 'dark';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport PropTypes from 'prop-types';\n\nexport const DISCOVER = 'discover';\nexport const LIBRARY = 'library';\nexport const DIRECTORY_LIST = 'directoryList';\nexport const METADATA_LIST = 'metadataList';\nexport const TIMELINE = 'timeline';\nexport const CONTINUE_WATCHING = 'continueWatching';\nexport const PRE_PLAY = 'prePlay';\nexport const POST_PLAY_PREVIOUS = 'postPlayPrevious';\nexport const POST_PLAY_NEXT = 'postPlayNext';\nexport const PLAYLIST = 'playlist';\nexport const RELATED = 'related';\nexport const SEARCH = 'search';\nexport const QUICK_SEARCH = 'quickSearch';\nexport const PLAYER = 'player';\nexport const PLAY_QUEUE = 'playQueue';\nexport const LIVE_TV_TIMELINE = 'liveTVTimeline';\nexport const LIVE_TV_GRID = 'liveTVGrid';\nexport const RECOMMENDED = 'recommended';\nexport const NOW_PLAYING = 'nowPlaying';\nexport const DOWNLOADS = 'downloads';\nexport const SHARED = 'shared';\nexport const WATCH_TOGETHER = 'watchTogether';\nexport const WATCH_TOGETHER_LOBBY = 'watchTogetherLobby';\n\nconst metadataContext = PropTypes.oneOf([\n  DISCOVER,\n  LIBRARY,\n  DIRECTORY_LIST,\n  METADATA_LIST,\n  TIMELINE,\n  CONTINUE_WATCHING,\n  PRE_PLAY,\n  POST_PLAY_PREVIOUS,\n  POST_PLAY_NEXT,\n  PLAYLIST,\n  SEARCH,\n  QUICK_SEARCH,\n  PLAYER,\n  PLAY_QUEUE,\n  LIVE_TV_TIMELINE,\n  LIVE_TV_GRID,\n  RECOMMENDED,\n  NOW_PLAYING,\n  DOWNLOADS,\n  SHARED,\n  WATCH_TOGETHER,\n  WATCH_TOGETHER_LOBBY,\n]);\n\nexport default metadataContext;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const NONE = 'none';\nexport const VERTICAL = 'vertical';\nexport const HORIZONTAL = 'horizontal';\nexport const OMNI = 'omni';\n\nexport const all = [NONE, VERTICAL, HORIZONTAL, OMNI];\n","export const TINY = 'tiny';\nexport const SMALL = 'small';\nexport const MEDIUM = 'medium';\nexport const LARGE = 'large';\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const TOP_LEFT = 'topLeft';\nexport const TOP_CENTER = 'topCenter';\nexport const TOP_RIGHT = 'topRight';\nexport const BOTTOM_LEFT = 'bottomLeft';\nexport const BOTTOM_CENTER = 'bottomCenter';\nexport const BOTTOM_RIGHT = 'bottomRight';\nexport const MIDDLE_LEFT = 'middleLeft';\nexport const MIDDLE_RIGHT = 'middleRight';\n\nexport const all = [\n  TOP_LEFT,\n  TOP_CENTER,\n  TOP_RIGHT,\n  BOTTOM_LEFT,\n  BOTTOM_CENTER,\n  BOTTOM_RIGHT,\n  MIDDLE_LEFT,\n  MIDDLE_RIGHT,\n];\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\n\nexport default function findProviderContentFeature(provider: any) {\n  if (!provider || !provider.features) {\n    return;\n  }\n\n  return provider.features.find(\n    (feature: any) => feature.type === providerFeatureTypes.CONTENT\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as mediaTypes from 'app/js/utils/types/mediaTypes';\nimport path from 'app/js/utils/url/path';\nimport getProviderBaseRoute from 'app/js/views/v3/helpers/routes/getProviderBaseRoute';\n\nexport default function getPrePlayRoute(\n  server: any,\n  provider: any,\n  key: any,\n  routeParams = {},\n  playlistType: any\n) {\n  if (!server || !provider || !key) {\n    return;\n  }\n\n  const baseRoute = getProviderBaseRoute(server, provider);\n  const encodedKey = encodeURIComponent(key);\n\n  const playlistRoutes = {\n    [mediaTypes.PHOTO]: 'album',\n    [mediaTypes.VIDEO]: 'playlist',\n    [mediaTypes.AUDIO]: 'playlist',\n  };\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  const route = playlistType ? playlistRoutes[playlistType] : 'details';\n  const url = `#!${baseRoute}/${route}?key=${encodedKey}`;\n\n  return path.join(url, routeParams);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function getProviderBaseRoute(server: any, provider: any) {\n  const encodedMachineIdentifier = encodeURIComponent(server.machineIdentifier);\n  const encodedProviderID = encodeURIComponent(provider.identifier);\n\n  const serverPath = `/server/${encodedMachineIdentifier}`;\n\n  if (provider.isLibraryProvider) {\n    return serverPath;\n  }\n\n  const pathBase = server.isCloud ? '' : serverPath;\n  return `${pathBase}/provider/${encodedProviderID}`;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function getServerSettingsRoute(section: any, group: any) {\n  return `#!/${section}/${group}`;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport path from 'app/js/utils/url/path';\n\nexport const MEDIA_ROUTE_PREFIX = 'media';\n\nexport default function getProviderRouteFromIdentifiers(\n  isCloud: any,\n  machineIdentifier: any,\n  providerIdentifier: any,\n  params: any = {},\n  pathSuffix: any\n) {\n  if (providerIdentifier === providerIdentifiers.HOME_SYNTHETIC) {\n    return params.pivot ? path.join('#!', { pivot: params.pivot }) : '#!';\n  }\n\n  const parts = ['#!', MEDIA_ROUTE_PREFIX];\n\n  if (!isCloud) {\n    parts.push(encodeURIComponent(machineIdentifier));\n  }\n\n  parts.push(encodeURIComponent(providerIdentifier), pathSuffix);\n\n  return path.join(parts, params);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport isEmbeddedServer from 'app/js/views/v3/helpers/isEmbeddedServer';\nimport getProviderRoute from 'app/js/views/v3/helpers/routes/getProviderRoute';\n\nexport default function getSourceRoute(\n  server: any,\n  provider: any,\n  sourceDirectory: any,\n  params = {},\n  path?: any\n) {\n  if (isEmbeddedServer(server)) {\n    return;\n  }\n\n  if (!sourceDirectory) {\n    return getProviderRoute(server, provider, params, path);\n  }\n\n  return getProviderRoute(\n    server,\n    provider,\n    {\n      source: sourceDirectory.id,\n      ...params,\n    },\n    path\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\n\nexport default function isEmbeddedServer(server: any) {\n  const embeddedServer = resolve('appModel').get('embeddedServer');\n\n  return (\n    !!server &&\n    !!embeddedServer &&\n    server.machineIdentifier === embeddedServer.get('machineIdentifier')\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport getProviderRouteFromIdentifiers from 'app/js/views/v3/helpers/routes/getProviderRouteFromIdentifiers';\n\nexport default function getProviderRoute(\n  server: any,\n  provider: any,\n  params: any,\n  path: any\n) {\n  return getProviderRouteFromIdentifiers(\n    server.isCloud,\n    server.machineIdentifier,\n    provider.identifier,\n    params,\n    path\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport path from 'app/js/utils/url/path';\nimport findProviderContentFeature from 'app/js/views/v3/helpers/provider/findProviderContentFeature';\nimport getSourceRoute from 'app/js/views/v3/helpers/routes/getSourceRoute';\n\nexport const views = {\n  RECORDING_SCHEDULE: 'view://dvr/recording-schedule',\n  GUIDE: 'view://dvr/guide',\n  TIMELINE: 'view://photo/timeline',\n  SHARED_ITEMS: 'view://shared-items',\n  HOME_RECOMMENDED: 'view://home/recommended',\n  HOME_WATCHLIST: 'view://home/watchlist',\n};\n\nconst viewRoutes = {\n  [views.RECORDING_SCHEDULE]: {\n    getRouteParams() {\n      return {\n        pivot: views.RECORDING_SCHEDULE,\n      };\n    },\n  },\n  [views.GUIDE]: {\n    getRouteParams() {\n      return {\n        pivot: views.GUIDE,\n      };\n    },\n  },\n  [views.TIMELINE]: {\n    getRouteParams: (contentFeature: any, sourceDirectory: any) => {\n      return {\n        pivot: views.TIMELINE,\n        key: path.join([contentFeature.key, sourceDirectory.id, 'cluster'], {\n          clusterZoomLevel: 1,\n        }),\n      };\n    },\n  },\n  [views.SHARED_ITEMS]: {\n    // @ts-expect-error ts-migrate(6133) FIXME: 'contentFeature' is declared but its value is neve... Remove this comment to see the full error message\n    getRouteParams: (contentFeature: any, sourceDirectory: any) => {\n      return {\n        key: sourceDirectory.pivots[0].key,\n      };\n    },\n  },\n};\n\nexport function isViewRoute(view: any) {\n  return !!viewRoutes[view];\n}\n\nexport default function getViewRoute(\n  view: any,\n  server: any,\n  provider: any,\n  sourceDirectory: any,\n  params = {}\n) {\n  if (!isViewRoute(view)) {\n    return;\n  }\n\n  const viewRoute = viewRoutes[view];\n\n  const contentFeature = findProviderContentFeature(provider);\n\n  return getSourceRoute(\n    server,\n    provider,\n    sourceDirectory,\n    viewRoute.getRouteParams\n      ? {\n          ...params,\n          ...viewRoute.getRouteParams(contentFeature, sourceDirectory),\n        }\n      : params\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\n// From react-redux\n// https://github.com/rackt/react-redux/blob/master/src/utils/shallowEqual.js\n\nexport default function shallowEqual(objA: any, objB: any) {\n  if (objA === objB) {\n    return true;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  const hasOwn = Object.prototype.hasOwnProperty;\n  for (let i = 0; i < keysA.length; i++) {\n    if (!hasOwn.call(objB, keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport shallowEqual from './shallowEqual';\n\nconst getDisplayName =\n  __DEV__ &&\n  ((instance: any) => {\n    return (\n      instance.displayName ||\n      instance.constructor.displayName ||\n      instance.constructor.name\n    );\n  });\n\nconst tryShallowCompareDebug =\n  __DEV__ &&\n  ((instance: any, key: any, nextValue: any) => {\n    const shallowCompareDebug = require('./shallowCompareDebug').default;\n    // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\n    const name = getDisplayName(instance);\n    const enterablePath = instance.props.enterablePath;\n\n    shallowCompareDebug(instance[key], nextValue, {\n      name: `${name}${enterablePath ? `[${enterablePath}]` : ''}.${key}`,\n    });\n  });\n\nexport default function shouldPureComponentUpdate(\n  instance: any,\n  nextProps: any,\n  nextState: any,\n  nextContext: any,\n  shallowEqual_: any\n) {\n  let debug = false;\n\n  if (__DEV__) {\n    const getDevOption = require('app/js/utils/dev/getDevOption').default;\n    const pureComponentUpdateLogs = getDevOption('pureComponentUpdateLogs');\n\n    if (pureComponentUpdateLogs) {\n      if (pureComponentUpdateLogs === true) {\n        debug = true;\n      } else {\n        // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\n        debug = pureComponentUpdateLogs.test(getDisplayName(instance));\n      }\n    }\n  }\n\n  // This more terse than Babel's default value transform.\n  const comparator = shallowEqual_ || shallowEqual;\n\n  let areEqual = comparator(instance.props, nextProps);\n\n  if (areEqual) {\n    areEqual = comparator(instance.state, nextState);\n\n    if (areEqual && nextContext) {\n      // `nextContext` is unique in that it's optional.\n      areEqual = comparator(instance.context, nextContext);\n\n      if (!areEqual) {\n        // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\n        debug && tryShallowCompareDebug(instance, 'context', nextContext);\n      }\n    } else {\n      // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\n      debug && tryShallowCompareDebug(instance, 'state', nextState);\n    }\n  } else {\n    // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\n    debug && tryShallowCompareDebug(instance, 'props', nextProps);\n  }\n\n  return !areEqual;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport coreColors from 'app/styles/variables/colors';\n\n// v4 Palette\nconst v4AccentLight = '#e5a00d';\nconst v4AltLight = '#fafafa';\nconst v4AltMedium = '#a0aab1';\nconst v4AltMediumDark = '#737e87';\nconst v4AltMediumLight = '#d6dcdf';\nconst v4BaseDark = '#1f2326';\nconst v4BaseLight = '#444f56';\nconst v4BaseMedium = '#2a3136';\nconst v4BaseMediumLight = '#343a3f';\n\nconst colors = Object.assign({}, coreColors, {\n  // v4\n  v4AccentLight,\n  v4AltLight,\n  v4AltMedium,\n  v4AltMediumDark,\n  v4AltMediumLight,\n  v4BaseDark,\n  v4BaseLight,\n  v4BaseMedium,\n  v4BaseMediumLight,\n\n  v4DefaultColor: v4AltLight,\n  v4DividerColor: v4BaseDark,\n\n  // Buttons\n  primaryButtonColor: v4BaseDark,\n\n  // Forms\n  selectBackground: '#525252',\n\n  // Drag and Drop\n  dragPreviewBackgroundColor: 'rgba(76, 76, 76, 0.7)',\n  dragPreviewOpacity: '0.9',\n  dragPreviewLowOpacity: '0.35',\n  dropLocationColor: '#f9be03',\n\n  // Slider\n  sliderTrackBackgroundColor: 'rgba(255, 255, 255, 0.2)',\n  sliderThumbBackgroundColor: '#ddd',\n  sliderThumbHoverBackgroundColor: '#fff',\n\n  // Lists\n  rowOddBackgroundColor: 'rgba(255, 255, 255, 0.03)',\n  rowEvenBackgroundColor: '#292929',\n\n  // Avatar\n  avatarLoadingBackgroundColor: '#999',\n  avatarBackgroundColor: '#EEEEEE',\n\n  // Details\n  detailsShadowColor: '#000',\n\n  // Player\n  playerBackgroundColor: '#232426',\n  playerTopControlsBackgroundColor: 'rgba(35, 36, 38, 0.45)',\n  playerBottomControlsBackgroundColor: 'rgba(35, 36, 38, 0.8)',\n  playerPrimaryButtonBackgroundColor: 'rgba(0, 0, 0, 0.45)',\n  miniPlayerBackgroundColor: coreColors.blackDarkerTranslucentBackgroundColor,\n  playerSecondaryOverlayColor: 'rgba(0, 0, 0, 0.5)',\n  playerPosterActionColor: coreColors.blackDarkTranslucentBackgroundColor,\n  playerPanelColor: 'rgba(0, 0, 0, 0.6)',\n  playerDisabledLinkColor: 'rgba(255, 255, 255, 0.15)',\n  playerShadowColor: 'rgba(0, 0, 0, 0.45)',\n  seekBarTrackColor: 'rgba(0, 0, 0, 0.75)',\n  seekBarTrackColorHover: 'rgba(255, 255, 255, 0.15)',\n  seekBarFillColor: '#cc7b19',\n  seekBarBufferColor: 'rgba(204, 123, 25, 0.3)',\n  seekBarThumbnailShadowColor: 'rgba(0, 0, 0, 0.45)',\n  seekBarTooltipBackgroundColor: '#000',\n  seekBarTooltipShadowColor: 'rgba(0, 0, 0, 0.5)',\n  thumbnailBackgroundColor: 'rgba(0, 0, 0, 0.45)',\n  adSeekBarFillColor: '#f9be03',\n  equalizerBarColor: '#f9be03',\n  htmlMediaElementBackgroundColor: '#000',\n  toastBackgroundColor: 'rgba(1, 1, 1, 0.50)',\n\n  // Poster\n  posterBackgroundColor: 'rgba(0, 0, 0, 0.45)',\n  posterHoverBackgroundColor:\n    'radial-gradient(farthest-corner at 50% 50%, rgba(50, 50, 50, 0.5) 50%, rgb(50, 50, 50) 100%)',\n  posterSelectedBackgroundColor: 'rgba(30, 30, 30, 0.5)',\n  posterBlendedSelectedBackgroundColor: 'rgba(19, 19, 19, 0.78);',\n  posterPlaceholderIconColor: 'rgba(255, 255, 255, 0.15)',\n  posterCenterCircleBackgroundColor: 'rgba(0, 0, 0, 0.45)',\n  posterBadgeShadowColor: 'rgba(0, 0, 0, 0.6)',\n  posterProgressTrackBackgroundColor: 'rgba(0, 0, 0, 0.75)',\n  posterVersionBadgeColor: '#556688',\n  posterSmartBadgeColor: 'rgb(142, 97, 145)',\n  posterFavoriteBadgeColor: 'rgb(229, 172, 182)',\n\n  // Card\n  v4CardBackgroundColor: 'rgba(0, 0, 0, 0.45)',\n  v4CardShimmerBackgroundColor: 'rgba(0, 0, 0, 0.3)',\n  v4CardShadowColor: 'rgba(0, 0, 0, 0.3)',\n  v4CardHoverBackgroundColor: 'rgba(30, 30, 30, 0.6)',\n  v4CardHoverBorderColor: v4AccentLight,\n\n  // Guide\n  recordColor: '#f53',\n  recordHoverColor: 'lighten(#f53, 0.1)',\n  recordBackgroundColor: '#b32',\n  recordActiveBackgroundColor: 'darken(#b32, 0.1)',\n\n  // Calendar\n  dayOfWeekBackgroundColor: 'rgba(255, 255, 255, 0.1)',\n  dayOfWeekColor: 'rgba(255, 255, 255, 0.75)',\n  todayBackgroundColor: 'rgba(255, 255, 255, 0.3)',\n  todayColor: 'rgba(255, 255, 255, 0.1)',\n  calendarEventSuccessBackgroundColor: 'rgba(0, 102, 153, 0.15)',\n  calendarEventSuccessAlternateBackgroundColor: 'rgba(31, 120, 165, 0.17)',\n  calendarEventSuccessHoverBackgroundColor: 'rgba(76, 148, 183, 0.20)',\n  calendarEventErrorBackgroundColor: 'rgba(187, 51, 34, 0.3)',\n  calendarEventErrorAlternateBackgroundColor: 'rgba(191, 64, 48, 0.31)',\n  calendarEventErrorHoverBackgroundColor: 'rgba(199, 87, 73, 0.34)',\n  recordingIconColor: '#ff5533',\n  playColor: 'rgba(255, 255, 255, 0.75)',\n\n  // Channels Grid\n  channelGridTimelineLabelColor: v4AltMedium,\n  channelGridSelectedItemDetailsBackgroundColor: 'rgba(0, 0, 0, 0.2)',\n  channelGridBorderColor: v4BaseMediumLight,\n  channelGridHoverColor: 'rgba(255, 255, 255, 0.2)',\n  channelGridBackgroundColor: 'rgba(160, 170, 177, 0.1)',\n  channelGridOnAirBackgroundColor: 'rgba(160, 170, 177, 0.1)',\n  channelGridFinishedAiringBackgroundColor: 'rgba(160, 170, 177, 0.3)',\n  channelGridProgressColor: 'rgba(160, 170, 177, 0.1)',\n  channelGridMissingItemBackgroundColor: 'rgba(0, 0, 0, 0)',\n  channelGridChannelThumbBackgroundColor: 'rgba(42, 49, 54, 0.5)',\n  channelGridRecentChannelThumbBackgroundColor: 'rgba(255, 255, 255, 0.05)',\n  channelGridChannelIdentifierBackroundColor: 'rgba(42, 49, 54, 0.5)',\n  channelGridNewBadgeColor: 'rgba(84, 84, 84)',\n\n  // Filter Builder\n  filterBuilderInputBackgroundColor: '#1e2121',\n  altFilterBuilderInputBackgroundColor:\n    coreColors.blackDarkerTranslucentBackgroundColor,\n\n  // DVR Settings\n  dvrBackgroundColor: coreColors.blackDarkTranslucentBackgroundColor,\n\n  // Preplay\n  prePlayUnavailableButtonBackgroundColor: 'rgba(255, 84, 50, 0.6)',\n  prePlayPartialButtonBackgroundColor: 'rgba(204, 123, 25, 0.6)',\n\n  // Search\n  searchInputBackgroundColor: 'rgba(255, 255, 255, 0.08)',\n\n  // Preferred Server Page\n  preferredServerButtonBackgroundColor: 'rgba(0, 0, 0, 0.45)',\n\n  // Home servers Page\n  sortableHomeHubsContainerBackgroundColor: 'rgba(255, 255, 255, 0.03)',\n  sortableHomeHubsRowBackgroundColor: 'rgba(255, 255, 255, 0.02)',\n\n  // Charts\n  chartTranslucentOpacity: '0.25',\n\n  // Server Dashboard Page\n  serverDashboardTileRowBackgroundPrimaryColor: 'rgba(229, 160, 13, 0.2)',\n  serverDashboardTileRowBackgroundSecondaryColor: 'rgba(229, 160, 13, 0.15)',\n  serverDashboardTileRowBackgroundTertiaryColor: 'rgba(229, 160, 13, 0.1)',\n  serverDashboardTileRowBackgroundQuaternaryColor: 'rgba(229, 160, 13, 0.05)',\n  sessionStopBackgroundColor: '#701f29',\n  sessionStopIconColor: 'rgba(255, 255, 255, 0.5)',\n\n  // Source side bar\n  sourceSidebarSelectedColor: 'rgba(255, 255, 255, 0.07)',\n\n  // Live TV Settings\n  liveTVSettingsTuner1Color: '#7EB0D5',\n  liveTVSettingsTuner2Color: '#BC9BB7',\n  liveTVSettingsTuner3Color: '#8f9148',\n  liveTVSettingsTuner4Color: '#7a3d84',\n  liveTVSettingsTuner5Color: '#ca5f5a',\n});\n\nexport default colors;\n","import _ from 'underscore';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport stateMachineMixin from 'app/js/mixins/views/stateMachineMixin';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/alert... Remove this comment to see the full error message\nimport tpl from 'app/templates/alerts/AlertView.tpl';\n\nconst AlertView = Marionette.ItemView.extend({\n  mixins: [stateMachineMixin],\n  //\n  // Properties\n  className: 'alert transition-in',\n  template: tpl,\n  alertDuration: 2000,\n  transitionDuration: 500,\n  events: {\n    mouseenter: 'onMouseEnter',\n    mouseleave: 'onMouseLeave',\n    'click .close-btn': 'onCloseClick',\n  },\n  initialState: 'transitionIn',\n  states: {\n    transitionIn: {\n      nextState: 'visible',\n      onEnter: function () {\n        // Trigger a reflow, which recalculates styles. Otherwise, the\n        // browser will simply overwrite our initial styles without\n        // transitioning.\n        (this as any).$el.triggerReflow();\n        (this as any).$el.removeClass('transition-in');\n        (this as any).startTransition();\n      },\n    },\n    visible: {\n      nextState: 'transitionOut',\n      onEnter: function () {\n        (this as any).transitionOutTimeout = window.setTimeout(\n          (this as any).enterNextState,\n          (this as any).alertDuration\n        );\n      },\n    },\n    transitionOut: {\n      onEnter: function () {\n        (this as any).$el.addClass('transition-out');\n        (this as any).startTransition();\n      },\n    },\n  },\n  //\n  // Init\n  initialize: function (options: any) {\n    this.bindAllWhenRendered(['enterNextState']);\n    if (_.isString(options)) {\n      options = { message: options };\n    }\n    this.type = options.type;\n    this.message = options.message;\n    // Add a state class to the root element if needed. If no type is\n    // provided, the default alert style will be used.\n    if (this.type) {\n      this.$el.addClass('has-' + this.type);\n    }\n  },\n  //\n  // Control\n  serializeData: function () {\n    return {\n      type: this.type,\n      message: this.message,\n    };\n  },\n  startTransition: function () {\n    window.setTimeout(this.enterNextState, this.transitionDuration);\n  },\n  //\n  // Listeners\n  onRender: function () {\n    // TODO: Use onAttach after upgrading Marionette.\n    _.defer(this.enterNextState);\n  },\n  onStateMachineComplete: function () {\n    // If we have cycled through all states, it's time to close the view.\n    this.close();\n  },\n  onMouseEnter: function () {\n    window.clearTimeout(this.transitionOutTimeout);\n  },\n  onMouseLeave: function () {\n    // Hide the alert quickly if the user mouses over and then mouses out.\n    if (this.currentState === 'visible') {\n      window.clearTimeout(this.transitionOutTimeout);\n      this.transitionOutTimeout = window.setTimeout(\n        this.enterNextState,\n        this.alertDuration / 2\n      );\n    }\n  },\n  onCloseClick: function (event: any) {\n    event.preventDefault();\n    if (this.currentState === 'visible') {\n      window.clearTimeout(this.transitionOutTimeout);\n      this.enterNextState();\n    }\n  },\n});\nexport default AlertView;\n","import $ from 'jquery';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\nimport AlertView from 'app/js/views/alerts/AlertView';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst AlertManager = BaseClass.extend({\n  mixins: [eventMixin],\n\n  //\n  // Init\n\n  initialize() {\n    this.openAlerts = {};\n  },\n\n  //\n  // Control\n\n  start() {\n    this.listenTo(dispatcher, {\n      'show:alert': this.showAlert,\n    });\n  },\n\n  //\n  // Listeners\n\n  showAlert: function (options: any) {\n    const message = options.message;\n\n    if (this.openAlerts[message]) {\n      return;\n    }\n\n    const alert = new AlertView(options);\n    this.openAlerts[message] = true;\n    this.listenToOnce(alert, 'close', function () {\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      delete this.openAlerts[message];\n    });\n\n    $('body').append(alert.render().el);\n  },\n});\n\nexport default AlertManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AlertManager from '../managers/AlertManager';\n\nexport default function alertInitializer() {\n  new AlertManager().start();\n}\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n\n// @ts-expect-error FIXME: Expected 2 arguments, but got 1.\nconst ModalManager = BaseClass.extend({\n  mixins: [eventMixin],\n\n  //\n  // Init\n\n  initialize() {\n    this.modals = [];\n  },\n\n  //\n  // Control\n\n  start() {\n    this.listenTo(dispatcher, {\n      'show:modal': this.showModal,\n      'hide:modal': this.hideModal,\n    });\n  },\n\n  //\n  // Listeners\n\n  showModal(modal: any) {\n    this.modals.push(modal);\n\n    const $body = $('body');\n\n    // Allow unique styling for transparent modals.\n    if (modal.transparent) {\n      $body.addClass('show-modal-transparent');\n    }\n\n    $body.append(modal.render().el);\n  },\n\n  hideModal(modal: any) {\n    const i = _.indexOf(this.modals, modal);\n\n    if (i > -1) {\n      this.modals.splice(i, 1)[0].close();\n    }\n\n    // Remove our modifier class if this was the last transparent modal in\n    // the stack.\n    if (modal.transparent && !_.findWhere(this.modals, { transparent: true })) {\n      $('body').removeClass('show-modal-transparent');\n    }\n  },\n});\n\nexport default ModalManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport ModalManager from 'app/js/managers/ModalManager';\n\nexport default function modalInitializer() {\n  new ModalManager().start();\n}\n","import React, { ReactElement, ReactNode } from 'react';\nimport t from 'app/js/utils/t';\nimport ErrorPageContent from './ErrorPageContent';\n\ninterface UnexpectedErrorPageContentProps {\n  children?: ReactNode;\n}\n\nexport default function UnexpectedErrorPageContent({\n  children,\n}: UnexpectedErrorPageContentProps): ReactElement {\n  return (\n    <ErrorPageContent\n      description={t('An unexpected error occurred.')}\n      title={t('Something went wrong')}\n    >\n      {children}\n    </ErrorPageContent>\n  );\n}\n","import React, { Component, ReactElement } from 'react';\nimport * as Sentry from '@sentry/browser';\nimport log from 'app/js/utils/log/log';\nimport UnexpectedErrorPageContent from 'app/js/v4/core/ui/pages/components/empty/UnexpectedErrorPageContent';\n\ninterface PageErrorBoundaryState {\n  hasError: boolean;\n}\n\nclass PageErrorBoundary extends Component<object, PageErrorBoundaryState> {\n  public static getDerivedStateFromError(): PageErrorBoundaryState {\n    return { hasError: true };\n  }\n\n  public constructor(props: object, context: object) {\n    super(props, context);\n\n    this.state = { hasError: false };\n  }\n\n  public componentDidCatch(error: Error, errorInfo: React.ErrorInfo): void {\n    log.error(error);\n\n    // See: https://docs.sentry.io/platforms/javascript/enriching-events/context/#passing-context-directly\n    const context = { extra: { componentStack: errorInfo.componentStack } };\n\n    Sentry.captureException(error, context);\n  }\n\n  public render(): ReactElement {\n    return this.state.hasError ? (\n      <UnexpectedErrorPageContent />\n    ) : (\n      <>{this.props.children}</>\n    );\n  }\n}\n\nexport default PageErrorBoundary;\n","// extracted by mini-css-extract-plugin\nexport default {\"backgroundContainer\":\"EQJNO\"};","import React, { ReactElement } from 'react';\nimport { UltraBlur } from '@plex/react-chroma-ultra-blur';\nimport styles from './FullPageBackground.css';\n\nconst colors = ['#3a3a3a', '#4c4c4c', '#3f3f3f', '#2f2f2f'];\n\nexport default function FullPageBackground(): ReactElement {\n  return (\n    <div className={styles.backgroundContainer}>\n      <UltraBlur\n        bottomLeft={colors[3]}\n        bottomRight={colors[2]}\n        topLeft={colors[0]}\n        topRight={colors[1]}\n      />\n    </div>\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport CoreFullPage from 'app/js/views/v3/components/core/pages/FullPage';\nimport styles from 'app/js/views/v3/components/pages/FullPage.css';\n\nfunction FullPage(props: any) {\n  return <CoreFullPage {...props} />;\n}\n\nFullPage.defaultProps = {\n  className: styles.container,\n};\n\nexport default FullPage;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"eYAwO B6YGR\"};","import React, { ReactElement, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { discoverServers } from 'app/js/stores/actions/appActions';\nimport t from 'app/js/utils/t';\nimport selectServer from 'app/js/v4/core/servers/selectors/selectServer';\nimport EmptyPageContent from 'app/js/v4/core/ui/pages/components/empty/EmptyPageContent';\nimport ErrorPageContent from 'app/js/v4/core/ui/pages/components/empty/ErrorPageContent';\nimport Spinner from 'app/js/v4/core/ui/spinners/components/Spinner';\nimport navigateToRoute from 'app/js/v4/routes/navigateToRoute';\nimport UserPageConnector from 'app/js/views/v3/components/UserPageConnector';\nimport FullPage from 'app/js/views/v3/components/pages/FullPage';\n\nexport default function ServerAwaitPage(): ReactElement {\n  const [isExpired, setIsExpired] = useState(false);\n  const dispatch = useDispatch();\n\n  const server = useSelector(selectServer);\n\n  const acceptedEULASetting = server.desktop?.settings.find((setting) => {\n    return setting.id === 'AcceptedEULA';\n  });\n\n  //\n  // Effects\n\n  useEffect(() => {\n    const intervalID = window.setInterval(() => {\n      dispatch(discoverServers());\n    }, 2_000);\n\n    return () => {\n      window.clearInterval(intervalID);\n    };\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (\n      acceptedEULASetting &&\n      server.isFullOwnedServer &&\n      server.isConnected &&\n      server.isClaimed\n    ) {\n      if (acceptedEULASetting.value) {\n        navigateToRoute('home');\n      } else {\n        navigateToRoute('serverSetup', {\n          machineIdentifier: server.machineIdentifier,\n        });\n      }\n    }\n  }, [\n    acceptedEULASetting,\n    server.isClaimed,\n    server.isConnected,\n    server.isFullOwnedServer,\n    server.machineIdentifier,\n  ]);\n\n  useEffect(() => {\n    const timeoutID = window.setTimeout(() => {\n      setIsExpired(true);\n    }, 300_000);\n\n    return () => {\n      window.clearTimeout(timeoutID);\n    };\n  }, []);\n\n  //\n  // Render\n\n  return (\n    <FullPage>\n      {/* @ts-expect-error */}\n      <UserPageConnector>\n        {!isExpired ? (\n          <EmptyPageContent description={t('Initializing Plex Media Server')}>\n            <Spinner />\n          </EmptyPageContent>\n        ) : (\n          <ErrorPageContent>\n            {t(\n              'Something went wrong. Make sure the server is available and try again.'\n            )}\n          </ErrorPageContent>\n        )}\n      </UserPageConnector>\n    </FullPage>\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport storageAdapter from 'app/js/adapters/storageAdapter';\nimport commands from 'app/js/commands/commands';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport getAuthXHRErrors from 'app/js/stores/actions/helpers/user/getAuthXHRErrors';\nimport getSignInErrorMessage from 'app/js/stores/actions/helpers/user/getSignInErrorMessage';\nimport dispatcher from 'app/js/utils/dispatcher';\n\n//\n// Action Types\n\nexport const SIGN_IN_WITH_AUTH_TOKEN = 'user/signIn/signInWithAuthToken';\n\n//\n// Action Creators\n\nexport const signInWithAuthToken = createActionCreator(SIGN_IN_WITH_AUTH_TOKEN);\n\n//\n// Helpers\n\nfunction signIn(appModel: any, { authToken, onSignInSuccess }: any) {\n  const cloudServer = appModel.get('cloudServer');\n  const userModel = appModel.get('user');\n\n  return $.ajax(\n    cloudServer.getXHROptions(_.result(userModel, 'url'), {\n      headers: { 'X-Plex-Token': authToken },\n    })\n  )\n    .then((response) => userModel.signIn(response))\n    .then(() => {\n      if (onSignInSuccess) {\n        onSignInSuccess();\n      }\n    })\n    .fail((xhr) => {\n      const errors = getAuthXHRErrors(xhr);\n      dispatcher.trigger('show:alert', {\n        message: getSignInErrorMessage(errors),\n      });\n    });\n}\n\n//\n// Action Handlers\n\nexport const signInLaunchActionHandlers = {\n  // @ts-expect-error ts-migrate(6133) FIXME: 'dispatch' is declared but its value is never read... Remove this comment to see the full error message\n  [SIGN_IN_WITH_AUTH_TOKEN](appModel: any, payload: any, dispatch: any) {\n    const { authToken, onSignInSuccess } = payload;\n    const userModel = appModel.get('user');\n\n    if (\n      userModel.get('isSignedIn') &&\n      userModel.get('authToken') !== authToken\n    ) {\n      // Refresh to use the token and sign in the user in.\n      commands\n        .execute('resetUser')\n        .then(() => storageAdapter.set('myPlexAccessToken', authToken))\n        .then(() => window.location.reload());\n    } else {\n      signIn(appModel, { authToken, onSignInSuccess });\n    }\n  },\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"plexImage\":\"qQ06J\",\"plexImageContainer\":\"lDuPy\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport styles from './PlexHeaderImage.css';\n\nfunction PlexHeaderImage() {\n  return (\n    <div className={styles.plexImageContainer}>\n      <div className={styles.plexImage} />\n    </div>\n  );\n}\n\nexport default PlexHeaderImage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport styles from './SignInFormSection.css';\n\ninterface SignInFormSectionProps {\n  component: React.ReactElement | string;\n}\n\nfunction SignInFormSection(props: SignInFormSectionProps) {\n  const { component: Component, ...otherProps } = props;\n\n  // @ts-expect-error ts-migrate(2604) FIXME: JSX element type 'Component' does not have any con... Remove this comment to see the full error message\n  return <Component className={styles.section} {...otherProps} />;\n}\n\nSignInFormSection.defaultProps = {\n  component: 'div',\n};\n\nexport default SignInFormSection;\n","// extracted by mini-css-extract-plugin\nexport default {\"section\":\"yndst\"};","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"ISQNC\",\"list\":\"_wt68\",\"item\":\"UdP0h\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport t from 'app/js/utils/t';\nimport SignInFormSection from './SignInFormSection';\nimport styles from './SkipSignInMessage.css';\n\n// @ts-expect-error ts-migrate(6133) FIXME: 'props' is declared but its value is never read.\nfunction SkipSignInMessage(props: any) {\n  return (\n    <SignInFormSection>\n      <div className={styles.header}>\n        {t(\n          'You must be signed in for Plex to work properly. If you are not signed in'\n        )}\n      </div>\n\n      <ul className={styles.list}>\n        <li className={styles.item}>\n          {t(\n            'Any connections between your media server and players WILL NOT BE SECURE'\n          )}\n        </li>\n        <li className={styles.item}>\n          {t('You may experience degraded streaming performance')}\n        </li>\n        <li className={styles.item}>\n          {t(\n            'It will be more difficult, and sometimes impossible, to find your server and discover players'\n          )}\n        </li>\n        <li className={styles.item}>\n          {t(\n            'You will not be able to access your media server from outside your home'\n          )}\n        </li>\n        <li className={styles.item}>\n          {t(\n            'You will not be able to access content and many features provided by Plex'\n          )}\n        </li>\n      </ul>\n    </SignInFormSection>\n  );\n}\n\nexport default SkipSignInMessage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport { matchPath } from 'react-router-dom';\nimport t from 'app/js/utils/t';\nimport history from 'app/js/v4/history';\nimport routes from 'app/js/v4/routes/routes';\nimport PlexHeaderImage from 'app/js/views/v3/components/core/PlexHeaderImage';\nimport Scroller from 'app/js/views/v3/components/core/base/Scroller';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport SpinnerButton from 'app/js/views/v3/components/core/buttons/SpinnerButton';\nimport SkipSignInMessage from 'app/js/views/v3/components/sign-in/SkipSignInMessage';\nimport { PRIMARY } from 'app/js/views/v3/helpers/props/kinds';\nimport { LARGE } from 'app/js/views/v3/helpers/props/sizes';\nimport styles from './SignInLaunchPagePoll.css';\n\ntype SignInLaunchPagePollProps = {\n  to?: string;\n  code?: string;\n  signUp?: boolean;\n  isBusy: boolean;\n  onSignInPress: (...args: any[]) => any;\n  onStillTherePress: (...args: any[]) => any;\n  onSkipSignInPress: (...args: any[]) => any;\n};\n\ntype SignInLaunchPagePollState = any;\n\nclass SignInLaunchPagePoll extends Component<\n  SignInLaunchPagePollProps,\n  SignInLaunchPagePollState\n> {\n  //\n  // Lifecycle\n\n  constructor(props: any, context: any) {\n    super(props, context);\n\n    this.state = {\n      isSkipSignInVisible: false,\n    };\n  }\n\n  //\n  // Listeners\n\n  onSwitchToSkipSignInPress = () => {\n    this.setState({\n      isSkipSignInVisible: true,\n    });\n  };\n\n  onStillTherePress = () => {\n    this.setState({\n      isSkipSignInVisible: false,\n    });\n\n    this.props.onStillTherePress();\n  };\n\n  onSignInPress = () => {\n    this.setState({\n      isSkipSignInVisible: false,\n    });\n\n    this.props.onSignInPress();\n  };\n\n  //\n  // Render\n\n  render() {\n    const { to, code, signUp, isBusy, onSkipSignInPress } = this.props;\n\n    const showTimedOut = !(isBusy || code);\n    const showButton = !showTimedOut;\n    const isSkipSignInVisible = this.state.isSkipSignInVisible;\n    const isFirstRunRoute = matchPath(history.location.pathname, {\n      path: routes.serverSetup,\n    });\n\n    return (\n      // @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: (Element | null)[]; className: s... Remove this comment to see the full error message\n      <Scroller autoScroll={true} className={styles.page}>\n        {isFirstRunRoute && !isSkipSignInVisible ? (\n          <Link\n            className={styles.switchToSkipSignInLink}\n            kind={PRIMARY}\n            onPress={this.onSwitchToSkipSignInPress}\n          >\n            {t(\"What's this?\")}\n          </Link>\n        ) : null}\n\n        <PlexHeaderImage />\n\n        <div className={styles.container}>\n          {isSkipSignInVisible ? <SkipSignInMessage /> : null}\n\n          <div className={styles.section}>\n            {showButton ? (\n              <SpinnerButton\n                className={styles.button}\n                isSpinning={!code}\n                kind={PRIMARY}\n                size={LARGE}\n                target=\"_blank\"\n                to={to}\n                type=\"submit\"\n                onPress={this.onSignInPress}\n              >\n                {signUp ? t('Sign up') : t('Sign in')}\n              </SpinnerButton>\n            ) : null}\n\n            {showTimedOut ? (\n              <Link kind={PRIMARY} onPress={this.onStillTherePress}>\n                {t('Are you still there?')}\n              </Link>\n            ) : null}\n          </div>\n        </div>\n\n        {isSkipSignInVisible ? (\n          <Link\n            className={styles.addendumLink}\n            kind={PRIMARY}\n            onPress={onSkipSignInPress}\n          >\n            {t('Skip and accept limited functionality')}\n          </Link>\n        ) : null}\n      </Scroller>\n    );\n  }\n}\n\nexport default SignInLaunchPagePoll;\n","// extracted by mini-css-extract-plugin\nexport default {\"page\":\"kqpn0\",\"container\":\"jQLrf\",\"section\":\"aN1YV\",\"addendumLink\":\"n4Yjg\",\"switchToSkipSignInLink\":\"wd9jj\",\"button\":\"no8mf mfBoX r2dcz x5jRQ OMhm8\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport {\n  beginPolling,\n  preloadPIN,\n  skipSignIn,\n  stopPolling,\n} from 'app/js/stores/actions/user/authCodeExchangeActions';\nimport selectAuthCodeExchange from 'app/js/stores/selectors/user/selectAuthCodeExchange';\nimport ServiceAuthUrlConnector from 'app/js/views/v3/components/pages/serverSettings/ServiceAuthUrlConnector';\nimport SignInLaunchPagePoll from './SignInLaunchPagePoll';\n\nconst mapDispatchToProps = {\n  dispatchPreloadPIN: preloadPIN,\n  dispatchBeginPolling: beginPolling,\n  dispatchStopPolling: stopPolling,\n  dispatchSkipSignIn: skipSignIn,\n};\n\ntype SignInLaunchPagePollConnectorProps = {\n  serviceAuthUrl?: string;\n  pinID?: number;\n  authToken?: string;\n  dispatchPreloadPIN: (...args: any[]) => any;\n  dispatchBeginPolling: (...args: any[]) => any;\n  dispatchStopPolling: (...args: any[]) => any;\n  dispatchSkipSignIn: (...args: any[]) => any;\n};\n\nclass SignInLaunchPagePollConnector extends Component<SignInLaunchPagePollConnectorProps> {\n  //\n  // Lifecycle\n\n  componentDidMount() {\n    this.props.dispatchPreloadPIN();\n  }\n\n  componentWillUnmount() {\n    this.props.dispatchStopPolling();\n  }\n\n  //\n  // Listeners\n\n  onSignInPress = () => {\n    this.props.dispatchBeginPolling({ pinID: this.props.pinID });\n  };\n\n  onStillTherePress = () => {\n    this.props.dispatchPreloadPIN();\n  };\n\n  onSkipSignInPress = () => {\n    this.props.dispatchSkipSignIn();\n  };\n\n  //\n  // Render\n\n  render() {\n    const {\n      dispatchPreloadPIN,\n      dispatchBeginPolling,\n      dispatchStopPolling,\n      dispatchSkipSignIn,\n      ...otherProps\n    } = this.props;\n\n    return (\n      <ServiceAuthUrlConnector\n        component={SignInLaunchPagePoll}\n        onSignInPress={this.onSignInPress}\n        onSkipSignInPress={this.onSkipSignInPress}\n        onStillTherePress={this.onStillTherePress}\n        {...otherProps}\n      />\n    );\n  }\n}\n\nexport default connect(\n  selectAuthCodeExchange,\n  mapDispatchToProps\n)(SignInLaunchPagePollConnector);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { readStoredPIN } from 'app/js/stores/actions/user/authCodeExchangeActions';\nimport selectAuthCodeExchange from 'app/js/stores/selectors/user/selectAuthCodeExchange';\nimport Spinner from 'app/js/views/v3/components/core/Spinner';\nimport EmptyPage from 'app/js/views/v3/components/pages/empty/EmptyPage';\nimport RedirectToConnector from 'app/js/views/v3/components/pages/serverSettings/RedirectToConnector';\nimport ServiceAuthUrlConnector from 'app/js/views/v3/components/pages/serverSettings/ServiceAuthUrlConnector';\n\nconst mapDispatchToProps = {\n  dispatchReadStoredPIN: readStoredPIN,\n};\n\ntype SignInLaunchPageRedirectConnectorProps = {\n  pinID?: number;\n  dispatchReadStoredPIN: (...args: any[]) => any;\n};\n\nclass SignInLaunchPageRedirectConnector extends Component<SignInLaunchPageRedirectConnectorProps> {\n  //\n  // Lifecycle\n\n  componentDidMount() {\n    this.props.dispatchReadStoredPIN({ shouldCreatePIN: true });\n  }\n\n  //\n  // Render\n\n  render() {\n    const { pinID, dispatchReadStoredPIN, ...otherProps } = this.props;\n\n    if (pinID) {\n      return (\n        <ServiceAuthUrlConnector\n          component={RedirectToConnector}\n          pinID={pinID}\n          replace={true}\n          {...otherProps}\n        />\n      );\n    }\n\n    return (\n      <EmptyPage>\n        <Spinner />\n      </EmptyPage>\n    );\n  }\n}\n\nexport default connect(\n  selectAuthCodeExchange,\n  mapDispatchToProps\n)(SignInLaunchPageRedirectConnector);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { resetAuthCodeExchange } from 'app/js/stores/actions/user/authCodeExchangeActions';\nimport { signInWithAuthToken } from 'app/js/stores/actions/user/signInLaunchActions';\nimport selectAuthCodeExchange from 'app/js/stores/selectors/user/selectAuthCodeExchange';\nimport shouldClientPoll from 'app/js/utils/shouldClientPoll';\nimport navigateToRoute from 'app/js/v4/routes/navigateToRoute';\nimport DownForMaintenancePage from 'app/js/views/v3/components/pages/empty/DownForMaintenancePage';\nimport RedirectToConnector from 'app/js/views/v3/components/pages/serverSettings/RedirectToConnector';\nimport ServiceAuthUrlConnector from 'app/js/views/v3/components/pages/serverSettings/ServiceAuthUrlConnector';\nimport SignInLaunchPagePollConnector from './SignInLaunchPagePollConnector';\nimport SignInLaunchPageRedirectConnector from './SignInLaunchPageRedirectConnector';\n\nfunction createMapStateToProps() {\n  return createSelector(selectAuthCodeExchange, (authCodeExchangeProps) => {\n    return {\n      isPollClient: shouldClientPoll(),\n      ...authCodeExchangeProps,\n    };\n  });\n}\n\nconst mapDispatchToProps = {\n  dispatchResetAuthCodeExchange: resetAuthCodeExchange,\n  dispatchSignInWithAuthToken: signInWithAuthToken,\n};\n\ntype SignInLaunchPageConnectorProps = {\n  providerID?: string;\n  pinID?: number;\n  code?: string;\n  authToken?: string;\n  errorMessage?: string;\n  fatalErrorMessage?: string;\n  signUp?: boolean;\n  isPollClient: boolean;\n  dispatchResetAuthCodeExchange: (...args: any[]) => any;\n  dispatchSignInWithAuthToken: (...args: any[]) => any;\n};\n\nclass SignInLaunchPageConnector extends Component<SignInLaunchPageConnectorProps> {\n  //\n  // Lifecycle\n\n  componentDidMount() {\n    this.props.dispatchResetAuthCodeExchange();\n  }\n\n  componentDidUpdate(prevProps: SignInLaunchPageConnectorProps) {\n    const didReceiveAuthToken =\n      this.props.authToken !== prevProps.authToken && this.props.authToken;\n\n    if (didReceiveAuthToken) {\n      this.props.dispatchSignInWithAuthToken({\n        authToken: this.props.authToken,\n        onSignInSuccess: this.props.signUp\n          ? () => navigateToRoute('home')\n          : null,\n      });\n    }\n  }\n\n  //\n  // Render\n\n  render() {\n    const {\n      providerID,\n      errorMessage,\n      fatalErrorMessage,\n      signUp,\n      isPollClient,\n      dispatchResetAuthCodeExchange,\n      dispatchSignInWithAuthToken,\n      ...otherProps\n    } = this.props;\n\n    if (fatalErrorMessage) {\n      // fatalErrorMessage isn't displayed anywhere, but its presence means\n      // we couldn't create a PIN\n      return <DownForMaintenancePage />;\n    } else if (providerID) {\n      return (\n        <ServiceAuthUrlConnector\n          component={RedirectToConnector}\n          providerID={providerID}\n          replace={true}\n          signUp={signUp}\n          {...otherProps}\n        />\n      );\n    } else if (isPollClient) {\n      return (\n        <SignInLaunchPagePollConnector\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '{ pinID?: number | undefined; code?: string ... Remove this comment to see the full error message\n          signUp={signUp}\n          {...otherProps}\n        />\n      );\n    } else {\n      // @ts-expect-error ts-migrate(2322) FIXME: Type '{ signUp: boolean | undefined; }' is not ass... Remove this comment to see the full error message\n      return <SignInLaunchPageRedirectConnector signUp={signUp} />;\n    }\n  }\n}\n\nexport default connect(\n  createMapStateToProps,\n  mapDispatchToProps\n)(SignInLaunchPageConnector);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport AbstractReactView from 'app/js/views/AbstractReactView';\nimport FullPage from 'app/js/views/v3/components/core/pages/FullPage';\nimport SignInLaunchPageConnector from 'app/js/views/v3/components/pages/signIn/SignInLaunchPageConnector';\n\nconst SignInViewReact = AbstractReactView.extend({\n  //\n  // Control\n\n  component(options: any) {\n    return (\n      <FullPage>\n        {/* @ts-expect-error ts-migrate(2739) FIXME: Type '{ signUp: any; }' is missing the following p... Remove this comment to see the full error message */}\n        <SignInLaunchPageConnector signUp={options.signUp} />\n      </FullPage>\n    );\n  },\n});\n\nexport default SignInViewReact;\n","import $ from 'jquery';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport commands from 'app/js/commands/commands';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport * as metricsContexts from 'app/js/utils/constants/metrics/metricsContexts';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport * as upsellOrigins from 'app/js/utils/constants/upsellOrigins';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport t from 'app/js/utils/t';\nimport PlexPassModal from 'app/js/views/v3/components/user/modals/PlexPassModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/setup... Remove this comment to see the full error message\nimport tpl from 'app/templates/setup/SetupBasicView.tpl';\n\nconst SetupBasicView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  className: 'setup-basic-container',\n  template: tpl,\n\n  ui: {\n    modalContainer: '.modal-container',\n    connectCheckbox: '#connect',\n    publishServerCheckbox: '#PublishServerOnPlexOnlineKey',\n    submitBtn: '.submit-btn',\n    nextBtn: '.next-btn',\n  },\n\n  collectionEvents: {\n    reset: 'render',\n  },\n\n  events: {\n    'change input[id]': 'onInputChange',\n    'submit #setup-basic-form': 'onSubmit',\n    'change #PublishServerOnPlexOnlineKey': 'onPublishSettingChange',\n  },\n\n  //\n  // Init\n\n  initialize: function () {\n    _.bindAll(this, 'onPlexPassModalClose');\n\n    this.collection = this.model.get(__PLATFORM__).get('settings');\n    this.collection.populate({ reset: true });\n\n    // The `FirstRun` pref was removed from PMS in favor of `AcceptedEULA`\n    // in version 0.9.15.5.\n\n    if (this.model.isVersionOrNewer('0.9.15.5')) {\n      this.changes = {\n        PublishServerOnPlexOnlineKey: 1,\n      };\n    } else {\n      this.changes = {\n        FirstRun: 0,\n        PublishServerOnPlexOnlineKey: 1,\n      };\n    }\n\n    const superToken = this.model.get('superToken');\n    if (superToken) {\n      this.changes.PlexOnlineToken = superToken;\n    }\n\n    const appModel = resolve('appModel');\n    const hasPlexSubscription = appModel.get('user').get('hasPlexSubscription');\n\n    // If the server is eligible for the Intel Plex Pass Lite program, do\n    // not show the Plex Pass upsell in this step.\n\n    this.isPlexPassModalOpen =\n      !this.model.get('isDesktop') && !hasPlexSubscription;\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    const server = this.model.toJSON();\n    const friendlyNameSetting = this.collection.get('FriendlyName');\n    const publishSetting = this.collection.get('PublishServerOnPlexOnlineKey');\n\n    return {\n      server: server,\n      friendlyNameSetting: friendlyNameSetting\n        ? friendlyNameSetting.toJSON()\n        : null,\n      publishSetting: publishSetting ? publishSetting.toJSON() : null,\n    };\n  },\n\n  mountReact: function () {\n    if (!__BUNDLED__) {\n      return;\n    }\n\n    ReactDOM.render(\n      <Provider store={resolve('appStore')}>\n        <PlexPassModal\n          isOpen={this.isPlexPassModalOpen}\n          metricsProperties={{\n            context: metricsContexts.SETUP_WIZARD,\n            firstRun: true,\n          }}\n          origin={upsellOrigins.SERVER_SETUP}\n          onModalClose={this.onPlexPassModalClose}\n        />\n      </Provider>,\n      this.ui.modalContainer[0]\n    );\n  },\n\n  unmountReact: function () {\n    if (__BUNDLED__ && this.isRendered) {\n      ReactDOM.unmountComponentAtNode(this.ui.modalContainer[0]);\n    }\n  },\n\n  submit: function () {\n    const submitBtn = this.ui.submitBtn;\n    if (submitBtn.hasClass('active')) {\n      return;\n    }\n\n    submitBtn.addClass('active');\n\n    resolve('metrics').trackClick({\n      action: metricsActions.REMOTE_ACCESS,\n      page: metricsPages.SETUP_WIZARD,\n      pane: 'name',\n      firstRun: true,\n      value: this.ui.publishServerCheckbox.is(':checked'),\n    });\n\n    let promise = this.save();\n\n    promise = promise.done(() => {\n      this.ui.nextBtn.click();\n    });\n\n    promise.always(function () {\n      submitBtn.removeClass('active');\n    });\n  },\n\n  save() {\n    // We only want to get into server-claiming if saving settings worked.\n    // Server claiming may have its own failures which should display warnings\n    // but shouldn't halt the setup process.\n    return this.saveChanges().then(() => this.claimServer());\n  },\n\n  saveChanges() {\n    const serverChangesPromise = _.isEmpty(this.changes)\n      ? $.Deferred().resolve().promise()\n      : this.collection.first().save(this.changes);\n\n    return serverChangesPromise.then(null, () => {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem saving these settings.'),\n      });\n    });\n  },\n\n  claimServer() {\n    const appModel = resolve('appModel');\n    const cloudServer = appModel.get('cloudServer');\n\n    const shouldClaimServer =\n      this.model.supports('claimServer') &&\n      !this.model.get('isClaimed') &&\n      !this.model.get('superToken') &&\n      !appModel.get('user').get('anonymous');\n\n    // Succeed if for any reason the server doesn't need to be claimed\n    if (!shouldClaimServer) {\n      return $.Deferred().resolve().promise();\n    }\n\n    return alwaysResolve(\n      cloudServer.populate().then(() => {\n        return commands\n          .execute('signInServer', {\n            claim: true,\n            cloudAccount: this.model.get(__PLATFORM__).get('cloudAccount'),\n          })\n          .then(null, () => {\n            dispatcher.trigger('show:alert', {\n              type: 'error',\n              message: t('There was a problem claiming this server.'),\n            });\n          });\n      })\n    );\n  },\n\n  //\n  // Listeners\n\n  onBeforeRender: function () {\n    this.unmountReact();\n  },\n\n  onRender: function () {\n    this.mountReact();\n  },\n\n  onClose: function () {\n    this.unmountReact();\n  },\n\n  onInputChange: function (event: any) {\n    const field = event.currentTarget;\n    let value = field.value;\n\n    if (field.type === 'checkbox') {\n      value = field.checked ? 1 : 0;\n    }\n\n    this.changes[field.id] = value;\n  },\n\n  onSubmit: function (event: any) {\n    event.preventDefault();\n\n    this.submit();\n  },\n\n  onPlexPassModalClose: function () {\n    this.isPlexPassModalOpen = false;\n    this.mountReact();\n  },\n});\n\nexport default SetupBasicView;\n","import $ from 'jquery';\nimport alwaysResolve from './alwaysResolve';\n\nfunction whenEach<T>(promises: JQueryPromise<T>[]): JQueryPromise<T> {\n  return $.when(...promises.map(alwaysResolve));\n}\n\nexport default whenEach;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport * as adapters from 'app/js/adapters/adapters';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport whenEach from 'app/js/utils/promise/whenEach';\nimport t from 'app/js/utils/t';\nimport devicesImg from 'app/img/setup/setup-complete-devices.svg';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/setup... Remove this comment to see the full error message\nimport tpl from 'app/templates/setup/SetupCompleteView.tpl';\n\nconst SetupCompleteView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  className: 'setup-complete-container',\n  template: tpl,\n\n  ui: {\n    modalContainer: '.modal-container',\n    submitBtn: '.submit-btn',\n    doneBtn: '.done-btn',\n  },\n\n  collectionEvents: {\n    reset: 'render',\n  },\n\n  events: {\n    'change input[id]': 'onInputChange',\n    'submit #setup-complete-form': 'onSubmit',\n  },\n\n  //\n  // Init\n\n  initialize: function () {\n    this.collection = this.model.get(__PLATFORM__).get('settings');\n    this.collection.populate({ reset: true });\n\n    // If the server has a super token, setup is happening in the hosted app\n    // and we should set this token on the server so we don't need to\n    // require the user to sign in again.\n\n    this.changes = {};\n\n    const appModel = adapters.resolve('appModel');\n    const user = appModel.get('user');\n\n    if (user.get('isSignedIn')) {\n      user.fetch().done(\n        this.whenRendered(() => {\n          this.ui.submitBtn.removeClass('active');\n        })\n      );\n    } else {\n      this.once('attached', () => {\n        this.ui.submitBtn.removeClass('active');\n      });\n    }\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    const collectUsageDataSetting = this.collection.get('collectUsageData');\n\n    return {\n      devicesImg: devicesImg,\n      collectUsageDataSetting: collectUsageDataSetting\n        ? collectUsageDataSetting.toJSON()\n        : null,\n    };\n  },\n\n  submit: function () {\n    const submitBtn = this.ui.submitBtn;\n    if (submitBtn.hasClass('active')) {\n      return;\n    }\n\n    submitBtn.addClass('active');\n\n    const promise = this.save();\n\n    promise.always(\n      this.whenRendered(function () {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.ui.doneBtn.click();\n        submitBtn.removeClass('active');\n      })\n    );\n  },\n\n  save: function () {\n    this.saved = true;\n\n    if (\n      _.has(this.changes, 'collectUsageData') &&\n      !this.changes.collectUsageData\n    ) {\n      adapters.resolve('metrics').trackClick({\n        action: metricsActions.OPT_OUT_METRICS,\n        page: metricsPages.SETUP_WIZARD,\n        pane: 'complete',\n        firstRun: true,\n      });\n    }\n\n    // Save the settings\n    const settingsPromise = this.collection.first().save(this.changes);\n\n    // Save any unsaved default sections, treating errors as success\n    const sectionPromises = this.model\n      .get('sections')\n      .filter((section: any) => section.isNew())\n      .map((section: any) => section.save());\n\n    // Let the requests run in parallel, wait until all are complete.\n    const promise = $.when(settingsPromise, whenEach(sectionPromises));\n\n    promise.fail(() => {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem saving these settings.'),\n      });\n    });\n\n    return promise;\n  },\n\n  //\n  // Listeners\n\n  onClose: function () {\n    if (!this.saved) {\n      this.save();\n    }\n  },\n\n  onInputChange: function (event: any) {\n    const field = event.currentTarget;\n    let value = field.value;\n\n    if (field.type === 'checkbox') {\n      value = field.checked ? 1 : 0;\n    }\n\n    this.changes[field.id] = value;\n  },\n\n  onSubmit: function (event: any) {\n    event.preventDefault();\n\n    this.submit();\n  },\n});\n\nexport default SetupCompleteView;\n","import Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/setup... Remove this comment to see the full error message\nimport tpl from 'app/templates/setup/SetupErrorView.tpl';\n\nconst SetupErrorView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  className: 'setup-error-container',\n  template: tpl,\n});\n\nexport default SetupErrorView;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport computerImg from 'app/img/setup/setup-intro-computer.svg';\nimport mediaImg from 'app/img/setup/setup-intro-media.svg';\nimport playImg from 'app/img/setup/setup-intro-play.svg';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/setup... Remove this comment to see the full error message\nimport tpl from 'app/templates/setup/SetupIntroView.tpl';\n\nconst SetupIntroView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  className: 'setup-intro-container',\n  template: tpl,\n\n  //\n  // Control\n\n  serializeData() {\n    return {\n      computerImg,\n      mediaImg,\n      playImg,\n    };\n  },\n});\n\nexport default SetupIntroView;\n","import commands from 'app/js/commands/commands';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport EditSectionModal from 'app/js/views/modals/EditSectionModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/lists... Remove this comment to see the full error message\nimport tpl from 'app/templates/lists/setup/SectionCardListItem.tpl';\n\nconst icons = {\n  artist: 'music',\n  movie: 'film',\n  photo: 'picture',\n  show: 'display',\n};\n\nconst SectionCardListItem = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  tagName: 'li',\n  className: 'card-tile-list-single-item',\n  template: tpl,\n\n  events: {\n    'click .edit-section-btn': 'onEditClick',\n    'click .delete-section-btn': 'onDeleteClick',\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    const server = this.model.server;\n    const section = this.model.toJSON();\n    const location = section.locations?.[0];\n    const pathCount = section.locations ? section.locations.length : 0;\n\n    return {\n      section: section,\n      serverID: server.id,\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      icon: icons[section.type],\n      path: location.path,\n      more: pathCount - 1,\n    };\n  },\n\n  //\n  // Bindings\n\n  bindings: {\n    '.section-title': {\n      modelAttribute: 'title',\n    },\n  },\n\n  //\n  // Listeners\n\n  onEditClick: function (event: any) {\n    event.preventDefault();\n\n    const model = this.model;\n    const modal = new EditSectionModal({\n      model,\n      server: model.server,\n      isDefaultSection: model.isNew(),\n    });\n\n    // Default sections are initially unsaved. If they're saved manually\n    // during the setup process, a real section is added to the server's\n    // section list, but the default section is not removed, so remove it\n    // manually when the modal is dismissed.\n\n    if (model.isNew()) {\n      modal.promise.always(() => {\n        model.trigger('destroy', model, model.collection);\n      });\n    }\n\n    dispatcher.trigger('show:modal', modal);\n  },\n\n  onDeleteClick: function (event: any) {\n    event.preventDefault();\n\n    // We don't need to show a confirm modal when deleting a default section.\n\n    const model = this.model;\n    if (model.isNew()) {\n      model.trigger('destroy', model, model.collection);\n    } else {\n      commands.execute('deleteSection', { section: model });\n    }\n  },\n});\n\nexport default SectionCardListItem;\n","import BaseList from 'app/js/views/lists/BaseList';\nimport SectionCardListItem from 'app/js/views/lists/setup/SectionCardListItem';\n\nconst SectionCardList = BaseList.extend({\n  //\n  // Properties\n\n  tagName: 'ul',\n  className: 'list card-tile-list',\n  itemView: SectionCardListItem,\n});\n\nexport default SectionCardList;\n","import $ from 'jquery';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport SectionCollection from 'app/js/models/library/section/SectionCollection';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport SectionCardList from 'app/js/views/lists/setup/SectionCardList';\nimport EditSectionModal from 'app/js/views/modals/EditSectionModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/setup... Remove this comment to see the full error message\nimport tpl from 'app/templates/setup/SetupLibraryView.tpl';\n\nconst SetupLibraryView = Marionette.Layout.extend({\n  //\n  // Properties\n\n  className: 'setup-library-container',\n  template: tpl,\n\n  regions: {\n    list: '.setup-section-list-container',\n  },\n\n  events: {\n    'click .add-section-btn': 'onAddSectionClick',\n  },\n\n  metricsValue: function () {\n    return this.collection.size();\n  },\n\n  //\n  // Init\n\n  initialize: function (options: any) {\n    const server = this.model;\n    const serverSections = server.get('sections');\n\n    const url = '/services/defaultLibraries';\n\n    const defaultSections = new SectionCollection([], { server, url });\n\n    this.collection = serverSections;\n\n    if (\n      this.model.supports('defaultSections') &&\n      options.isFirstVisitToSubset\n    ) {\n      // If the server supports defaultSections, fetch the defaults.\n      // After the real sections are populated, append the default sections.\n      $.when(defaultSections.populate(), serverSections.populate()).done(() => {\n        // Don't suggest default sections if server already has sections.\n        if (serverSections.length) {\n          return;\n        }\n\n        defaultSections.forEach((section: any) => {\n          // Set the collection because it is needed when saving the\n          // library. We cannot remove the section and then add it in an\n          // each loop.\n\n          section.collection = serverSections;\n          serverSections.add(section);\n        });\n      });\n    }\n  },\n\n  //\n  // Listeners\n\n  onRender: function () {\n    this.list.show(new SectionCardList({ collection: this.collection }));\n  },\n\n  onAddSectionClick: function (event: any) {\n    event.preventDefault();\n\n    dispatcher.trigger(\n      'show:modal',\n      new EditSectionModal({ server: this.model })\n    );\n  },\n});\n\nexport default SetupLibraryView;\n","import Marionette from 'app/js/initializers/extensions/MarionetteExtension';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/setup... Remove this comment to see the full error message\nimport tpl from 'app/templates/setup/SetupLoadingView.tpl';\n\nconst SetupLoadingView = Marionette.ItemView.extend({\n  //\n  // Properties\n\n  className: 'setup-loading-container',\n  template: tpl,\n});\n\nexport default SetupLoadingView;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport commands from 'app/js/commands/commands';\nimport Marionette from 'app/js/initializers/extensions/MarionetteExtension';\nimport AgentCollection from 'app/js/models/server/AgentCollection';\nimport acceptEULA from 'app/js/stores/actions/helpers/server/acceptEULA';\nimport * as agentIdentifiers from 'app/js/utils/constants/agentIdentifiers';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport log from 'app/js/utils/log/log';\nimport { findServerModel } from 'app/js/utils/state/modelFinders';\nimport navigateToRoute from 'app/js/v4/routes/navigateToRoute';\nimport SignInViewReact from 'app/js/views/SignInViewReact';\nimport SetupBasicView from 'app/js/views/setup/SetupBasicView';\nimport SetupCompleteView from 'app/js/views/setup/SetupCompleteView';\nimport SetupErrorView from 'app/js/views/setup/SetupErrorView';\nimport SetupIntroView from 'app/js/views/setup/SetupIntroView';\nimport SetupLibraryView from 'app/js/views/setup/SetupLibraryView';\nimport SetupLoadingView from 'app/js/views/setup/SetupLoadingView';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/setup... Remove this comment to see the full error message\nimport tpl from 'app/templates/setup/SetupView.tpl';\n\nfunction getSubsetView(subset: any) {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  return {\n    setupSignIn: SignInViewReact,\n    setupIntro: SetupIntroView,\n    setupLoading: SetupLoadingView,\n    setupError: SetupErrorView,\n    setupBasic: SetupBasicView,\n    setupLibrary: SetupLibraryView,\n    setupComplete: SetupCompleteView,\n  }[subset];\n}\n\nconst metricsLabels = {\n  setupIntro: 'intro',\n  setupError: 'error',\n  setupBasic: 'name',\n  setupLibrary: 'library',\n  setupComplete: 'complete',\n};\n\nconst coreAgents = [\n  agentIdentifiers.IMDB,\n  agentIdentifiers.THETVDB,\n  agentIdentifiers.LASTFM,\n];\n\nconst SetupView = Marionette.Layout.extend({\n  //\n  // Properties\n\n  className: 'container',\n  template: tpl,\n\n  maxAttempts: 120,\n\n  ui: {\n    header: '.setup-header',\n  },\n\n  regions: {\n    container: '.setup-container',\n  },\n\n  events: {\n    'click .segment-btn': 'onNavClick',\n    'click .next-btn': 'onNavClick',\n    'click .done-btn': 'onDoneClick',\n  },\n\n  onlyAfterRender: ['onAgentsSuccess', 'onAgentsFail', 'onUpdatesComplete'],\n\n  //\n  // Init\n\n  initialize: function (options: any) {\n    _.bindAll(\n      this,\n      'start',\n      'onAgentsSuccess',\n      'onAgentsFail',\n      'onUpdatesComplete',\n      'onSkipSignInChange'\n    );\n\n    this.subset = options.subset || 'setupIntro';\n    this.attempts = 0;\n    this._visitedSubsets = {};\n\n    log.info('Starting the setup wizard');\n\n    const appModel = resolve('appModel');\n    this.model = findServerModel(appModel, options);\n    this.listenTo(appModel, 'change:skipSignIn', this.onSkipSignInChange);\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    return {\n      subset: this.subset,\n    };\n  },\n\n  renderSubset: function () {\n    if (this.model.get('shared')) {\n      this.navigate('setupError');\n      return;\n    }\n\n    const appModel = resolve('appModel');\n    const userModel = appModel.get('user');\n    const cloudServer = userModel.server;\n\n    const cloudServerPromise = cloudServer.populate();\n    // This promise resolves when the user is authenticated at plex.tv\n    cloudServerPromise.done(\n      this.whenRendered(() => {\n        this.navigate('setupIntro');\n      })\n    );\n\n    cloudServerPromise.fail(() => {\n      const primaryServer = appModel.get('primaryServer');\n      const primaryServerFlexModel = primaryServer.get(__PLATFORM__);\n\n      const acceptedEULAPromise = primaryServerFlexModel\n        .get('settings')\n        .fetch()\n        .then((settings: any) => {\n          return settings.get('AcceptedEULA').get('value') === true\n            ? $.Deferred().resolve()\n            : $.Deferred().reject();\n        });\n\n      // The cloud server promise fails when the user is unauthenticated OR\n      // when plex.tv is down.\n      acceptedEULAPromise\n        .then(\n          this.whenRendered(() => {\n            this.navigate('setupIntro');\n          })\n        )\n        .fail(\n          this.whenRendered(() => {\n            const skipSignIn = appModel.get('skipSignIn');\n            const isCloudServerUnavailable = cloudServer.get('isUnavailable');\n            // If plex.tv is down, or the user has explicitly skipped sign-in, go\n            // directly to the setup intro\n            this.navigate(\n              skipSignIn || isCloudServerUnavailable\n                ? 'setupIntro'\n                : 'setupSignIn'\n            );\n          })\n        );\n    });\n  },\n\n  start: function () {\n    // If we let the user try to add sections or install channels before\n    // everything is ready and updated, we could run into trouble. First,\n    // check the startState passed back at the root of the server. Then,\n    // check the /system/agents request succeeds. Then, make sure all\n    // plug-ins are up to date.\n\n    // After a certain number of attempts, just give up and show the error.\n    if (this.attempts >= this.maxAttempts) {\n      log.error(\n        'Failed to start the setup wizard after ' + this.attempts + ' attempts'\n      );\n      this.navigate('setupError');\n\n      return;\n    }\n\n    this.attempts++;\n\n    const startState = this.model.get('startState');\n\n    if (startState) {\n      log('Waiting for server to start (' + startState + ')');\n\n      // If the startState is not null, that means the media server is still\n      // starting. Keep fetching details for the server so we know when\n      // startState changes.\n      this.model.fetch().done(_.delay(this.start, 500));\n    } else {\n      const agents = new AgentCollection([], { server: this.model });\n      const agentsPromise = agents.fetch({ timeout: 0 });\n\n      agentsPromise.done(this.onAgentsSuccess);\n      agentsPromise.fail(this.onAgentsFail);\n    }\n  },\n\n  navigate: function (subset: any) {\n    const isIntroStep = subset === 'setupIntro';\n    const isSignInStep = subset === 'setupSignIn';\n    const isLoadingStep = subset === 'setupLoading';\n\n    const View = getSubsetView(subset);\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const metricsLabel = metricsLabels[subset];\n\n    this.previousSubset = this.subset;\n    this.subset = subset;\n\n    if (metricsLabel) {\n      resolve('metrics').trackView({\n        page: metricsPages.SETUP_WIZARD,\n        pane: metricsLabel,\n        firstRun: true,\n      });\n    }\n\n    const isFirstVisitToSubset = !this._visitedSubsets[subset];\n    this._visitedSubsets[subset] = true;\n\n    const view = new View({\n      model: this.model,\n      isFirstRun: true,\n      isFirstVisitToSubset,\n    });\n    this.container.show(view);\n\n    this.ui.header.toggleClass('hidden', isIntroStep || isSignInStep);\n\n    this.$el.addClass(subset);\n\n    if (this.previousSubset !== subset) {\n      this.$el.removeClass(this.previousSubset);\n    }\n\n    if (isLoadingStep) {\n      this.start();\n    }\n  },\n\n  //\n  // Listeners\n\n  onRender: function () {\n    this.renderSubset();\n  },\n\n  onAgentsSuccess: function (agents: any) {\n    log('Looking for a core agent');\n\n    // Check if one of the three \"core\" agents is listed. If none of them\n    // are there, we probably have a problem.\n    const coreAgent = coreAgents.find((agent) => agents.get(agent));\n\n    if (coreAgent) {\n      log(coreAgent + ' found');\n\n      // Accept EULA asynchronously, don't block UI\n      acceptEULA(this.model);\n\n      commands\n        .execute('updateChannel', { server: this.model, silent: true })\n        .always(this.onUpdatesComplete);\n    } else {\n      log.error('No core agents found');\n      this.navigate('setupError');\n    }\n  },\n\n  onAgentsFail: function () {\n    log.warn('Unable to request agents');\n\n    // If the agents request fails, the media server might still be getting\n    // ready, so try again.\n    _.delay(this.start, 500);\n  },\n\n  onUpdatesComplete: function () {\n    this.navigate('setupBasic');\n  },\n\n  onNavClick: function (event: any) {\n    event.preventDefault();\n\n    const $target = $(event.currentTarget);\n    const subset = $target.data('subset');\n    const isSkippingBasicForm =\n      $target.hasClass('segment-btn') && this.subset === 'setupBasic';\n\n    // Hack to simulate the form submission to save the basic pref info if\n    // navigation tabs are clicked.\n    if (isSkippingBasicForm && this.container.currentView) {\n      event.preventDefault();\n      this.container.currentView.submit();\n    } else {\n      this.navigate(subset);\n    }\n  },\n\n  onDoneClick: function (event: any) {\n    event.preventDefault();\n\n    resolve('metrics').trackClick({\n      page: metricsPages.SETUP_WIZARD,\n      action: metricsActions.COMPLETE,\n      firstRun: true,\n    });\n\n    navigateToRoute('home');\n  },\n\n  onSkipSignInChange() {\n    this.renderSubset();\n  },\n});\n\nexport default SetupView;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction acceptEULA(server: any) {\n  const serverFlexModel = server.get(__PLATFORM__);\n  const settingsModel = serverFlexModel.get('settings');\n\n  return settingsModel\n    .populate()\n    .then((settings: any) =>\n      settings.get('AcceptedEULA').save({ AcceptedEULA: true })\n    );\n}\n\nexport default acceptEULA;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport t from 'app/js/utils/t';\nimport Spinner from 'app/js/views/v3/components/core/Spinner';\nimport EmptyPage from 'app/js/views/v3/components/pages/empty/EmptyPage';\nimport ErrorPage from 'app/js/views/v3/components/pages/empty/ErrorPage';\nimport useEffectOnce from 'app/js/views/v3/helpers/hooks/useEffectOnce';\n\ntype AcceptEULAPageProps = {\n  isSettingsPopulated?: boolean;\n  settingsError?: any;\n  hasAcceptedEULA: boolean;\n  isAcceptedEULASaving: boolean;\n  onPopulateSettings: (...args: any[]) => any;\n  onAcceptEULA: (...args: any[]) => any;\n  onSkipSignIn: (...args: any[]) => any;\n};\n\nfunction AcceptEULAPage(props: AcceptEULAPageProps) {\n  const {\n    isSettingsPopulated,\n    settingsError,\n    hasAcceptedEULA,\n    isAcceptedEULASaving,\n    onPopulateSettings,\n    onAcceptEULA,\n    onSkipSignIn,\n  } = props;\n\n  useEffectOnce(() => {\n    onPopulateSettings();\n  });\n\n  useEffectOnce(() => {\n    onAcceptEULA();\n  }, isSettingsPopulated && !hasAcceptedEULA);\n\n  useEffectOnce(() => {\n    onSkipSignIn();\n  }, hasAcceptedEULA && !isAcceptedEULASaving);\n\n  return settingsError ? (\n    <ErrorPage\n      description={t(\n        \"The server you're trying to access doesn't seem to exist.\"\n      )}\n      title={t('Media server not found')}\n    />\n  ) : (\n    <EmptyPage>\n      <Spinner />\n    </EmptyPage>\n  );\n}\n\nexport default AcceptEULAPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { resolve } from 'app/js/adapters/adapters';\nimport { redirectToUrl } from 'app/js/stores/actions/appActions';\nimport {\n  populateSettings,\n  saveSetting,\n} from 'app/js/stores/actions/serverActions';\nimport createServerFlexSelector from 'app/js/stores/selectors/server/createServerFlexSelector';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport AcceptEULAPage from 'app/js/views/v3/components/pages/setup/AcceptEULAPage';\n\nfunction createMapStateToProps() {\n  return createSelector(createServerFlexSelector(), (serverFlex) => {\n    const acceptedEULASetting = serverFlex.settings.find(\n      (setting: any) => setting.id === 'AcceptedEULA'\n    );\n\n    return {\n      isSettingsPopulated: serverFlex.isSettingsPopulated,\n      settingsError: serverFlex.settingsError,\n      hasAcceptedEULA: !!(acceptedEULASetting && acceptedEULASetting.value),\n      isAcceptedEULASaving: !!(\n        acceptedEULASetting && acceptedEULASetting.isSaving\n      ),\n    };\n  });\n}\n\nfunction createMapDispatchToProps(dispatch: any, props: any) {\n  const { serverEntityID, forwardUrl } = props;\n\n  return {\n    onPopulateSettings() {\n      dispatch(populateSettings({ serverEntityID }));\n    },\n\n    onAcceptEULA() {\n      dispatch(\n        saveSetting({\n          serverEntityID,\n          setting: { id: 'AcceptedEULA', value: true },\n        })\n      );\n    },\n\n    onSkipSignIn() {\n      resolve('metrics').trackClick({\n        page: metricsPages.SIGN_IN,\n        action: metricsActions.SKIP,\n        firstRun: true,\n      });\n\n      dispatch(redirectToUrl({ url: forwardUrl }));\n    },\n  };\n}\n\nexport default connect(\n  createMapStateToProps,\n  createMapDispatchToProps\n)(AcceptEULAPage);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport t from 'app/js/utils/t';\nimport { CONTENT_CLASS_NAMES } from 'app/js/v4/App';\nimport useLocationSearchParams from 'app/js/v4/core/ui/hooks/useLocationSearchParams';\nimport parseString from 'app/js/v4/utils/parser/parseString';\nimport SetupView from 'app/js/views/setup/SetupView';\nimport MarionetteComponent from 'app/js/views/v3/components/MarionetteComponent';\nimport Spinner from 'app/js/views/v3/components/core/Spinner';\nimport ServerPageConnector from 'app/js/views/v3/components/pages/ServerPageConnector';\nimport EmptyPage from 'app/js/views/v3/components/pages/empty/EmptyPage';\nimport ErrorPage from 'app/js/views/v3/components/pages/empty/ErrorPage';\nimport AcceptEULAPageConnector from 'app/js/views/v3/components/pages/setup/AcceptEULAPageConnector';\nimport createKey from 'app/js/views/v3/helpers/createKey';\n\ntype SetupPageProps = {\n  serverEntityID?: string;\n  isWaitingForPrimaryServer: boolean;\n};\n\nfunction SetupPage(props: SetupPageProps) {\n  const { serverEntityID, isWaitingForPrimaryServer } = props;\n  const params = useLocationSearchParams();\n  const forwardUrl = parseString(params.forwardUrl);\n\n  if (!serverEntityID) {\n    return isWaitingForPrimaryServer ? (\n      <EmptyPage>\n        <Spinner />\n      </EmptyPage>\n    ) : (\n      <ErrorPage\n        description={t(\n          \"The server you're trying to access doesn't seem to exist.\"\n        )}\n        title={t('Media server not found')}\n      />\n    );\n  }\n\n  return (\n    <ServerPageConnector\n      hideUnclaimedPage={true}\n      serverEntityID={serverEntityID}\n    >\n      {forwardUrl ? (\n        <AcceptEULAPageConnector\n          forwardUrl={forwardUrl}\n          serverEntityID={serverEntityID}\n        />\n      ) : (\n        <MarionetteComponent\n          key={createKey('SetupPage', serverEntityID)}\n          className={CONTENT_CLASS_NAMES}\n          view={SetupView}\n          viewOptions={{ serverEntityID, subset: 'setupBasic' }}\n        />\n      )}\n    </ServerPageConnector>\n  );\n}\n\nexport default SetupPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport selectCloudServer from 'app/js/stores/selectors/server/selectCloudServer';\nimport SetupPage from 'app/js/views/v3/components/pages/setup/SetupPage';\n\nfunction createMapStateToProps() {\n  return createSelector(\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { serverEntityID }: any) => serverEntityID,\n    (appState) => appState.primaryServer,\n    (appState) => appState.isWaitingForPrimaryServer,\n    selectCloudServer,\n    (serverEntityID, primaryServerEntityID, isWaitingForPrimaryServer) => {\n      return {\n        serverEntityID: serverEntityID || primaryServerEntityID,\n        isWaitingForPrimaryServer,\n      };\n    }\n  );\n}\n\nexport default connect(createMapStateToProps)(SetupPage);\n","import { useMemo } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport path, { ParsedParams } from 'app/js/utils/url/path';\n\nfunction useLocationSearchParams(): ParsedParams {\n  const location = useLocation();\n  const queryString = location.search;\n  return useMemo(() => {\n    const { params } = path.parseUri(queryString);\n\n    return params;\n  }, [queryString]);\n}\n\nexport default useLocationSearchParams;\n","function parseString(value: unknown): string {\n  if (value == null) {\n    return '';\n  }\n\n  return String(value);\n}\n\nexport default parseString;\n","import React, { ReactElement } from 'react';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport useSelectedSource from 'app/js/v4/features/sources/hooks/useSelectedSource';\nimport UserPageConnector from 'app/js/views/v3/components/UserPageConnector';\nimport FullPage from 'app/js/views/v3/components/pages/FullPage';\nimport SetupPageConnector from 'app/js/views/v3/components/pages/setup/SetupPageConnector';\n\nexport default function ServerSetupViewPage(): ReactElement {\n  const selectedSource = useSelectedSource();\n\n  const serverEntityID = createEntityID(\n    entityTypes.SERVER,\n    selectedSource.machineIdentifier\n  );\n\n  return (\n    <FullPage>\n      {/* @ts-expect-error */}\n      <UserPageConnector>\n        <SetupPageConnector serverEntityID={serverEntityID} />\n      </UserPageConnector>\n    </FullPage>\n  );\n}\n","import { useRouteMatch } from 'react-router-dom';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport { CLOUD_SERVER_ID } from 'app/js/utils/constants/serverIDs';\nimport unknownProvider from 'app/js/v4/core/providers/utils/unknownProvider';\nimport unknownServer from 'app/js/v4/core/servers/utils/unknownServer';\nimport routes from 'app/js/v4/routes/routes';\n\ninterface ServerProviderRouteParams {\n  machineIdentifier?: string;\n  providerIdentifier?: string;\n}\n\nexport interface SelectedSource {\n  machineIdentifier: string;\n  providerIdentifier: string;\n}\n\nfunction useSelectedSource(): SelectedSource {\n  // The order of routes is significant, especially when routes contain optional\n  // parts. First one matched is used. eg: /foo/:bar? should be before /foo.\n  const routeMatch = useRouteMatch({\n    path: [routes.serverSetup],\n    exact: true,\n  });\n\n  const params: ServerProviderRouteParams | undefined = routeMatch?.params;\n  const machineIdentifier = params?.machineIdentifier;\n  const providerIdentifier = params?.providerIdentifier;\n\n  if (!machineIdentifier && !providerIdentifier) {\n    return {\n      machineIdentifier: unknownServer.machineIdentifier,\n      providerIdentifier: unknownProvider.identifier,\n    };\n  }\n\n  return {\n    machineIdentifier: machineIdentifier || CLOUD_SERVER_ID,\n    providerIdentifier: providerIdentifier\n      ? decodeURIComponent(providerIdentifier)\n      : providerIdentifiers.LIBRARY,\n  };\n}\nexport default useSelectedSource;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectServers from 'app/js/stores/selectors/server/selectServers';\n\nconst selectAllSourcesSidebarServers = createSelector(\n  selectServers,\n  (servers) => {\n    return servers.filter(\n      (server: any) =>\n        !server.isCloud && !server.isEmbedded && !!server.friendlyName\n    );\n  }\n);\n\nexport default selectAllSourcesSidebarServers;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectUserFeaturesByUUID from './selectUserFeaturesByUUID';\n\nconst memo = {};\n\nfunction createUserFeatureSelector(uuid: string): (appState: any) => boolean {\n  const selector =\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    memo[uuid] ||\n    createSelector(\n      selectUserFeaturesByUUID,\n      (userFeaturesByUUID) => !!userFeaturesByUUID[uuid]\n    );\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  memo[uuid] = selector;\n\n  return selector;\n}\n\nexport default createUserFeatureSelector;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport { FORUMS_URL } from 'app/js/utils/constants/commonUrls';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport t from 'app/js/utils/t';\nimport Button from 'app/js/views/v3/components/core/buttons/Button';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport Modal from 'app/js/views/v3/components/core/modals/Modal';\nimport ModalBody from 'app/js/views/v3/components/core/modals/ModalBody';\nimport ModalContent from 'app/js/views/v3/components/core/modals/ModalContent';\nimport ModalFooter from 'app/js/views/v3/components/core/modals/ModalFooter';\nimport ModalHeader from 'app/js/views/v3/components/core/modals/ModalHeader';\nimport * as kinds from 'app/js/views/v3/helpers/props/kinds';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport styles from 'app/js/views/v3/components/core/modals/ModalFooter.css';\n\ntype UnexpectedErrorModalProps = {\n  isOpen: boolean;\n  errorMessage?: string;\n  onModalClose: (...args: any[]) => any;\n};\n\nfunction UnexpectedErrorModal(props: UnexpectedErrorModalProps) {\n  const { isOpen, errorMessage, onModalClose } = props;\n\n  const sentences = [\n    errorMessage ? errorMessage : t('There was an unexpected error.'),\n    t('Please visit our forums if you continue to experience problems.'),\n  ];\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      metricsPage={metricsPages.HOME}\n      size={sizes.SMALL}\n      onModalClose={onModalClose}\n    >\n      <ModalContent onModalClose={onModalClose}>\n        <ModalHeader>{t('There was an unexpected error')}</ModalHeader>\n        <ModalBody>\n          {sentences.join(' ')}\n          <br />\n          <Link\n            kind={kinds.PRIMARY}\n            target={__EXTERNAL_LINK_TARGET__}\n            to={FORUMS_URL}\n            onPress={onModalClose}\n          >\n            {t('Go to Forums')}\n          </Link>\n        </ModalBody>\n        <ModalFooter>\n          <Button\n            className={styles.button}\n            data-autofocus={true}\n            kind={kinds.PRIMARY}\n            onPress={onModalClose}\n          >\n            {t('Okay')}\n          </Button>\n        </ModalFooter>\n      </ModalContent>\n    </Modal>\n  );\n}\n\nexport default UnexpectedErrorModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"d5Vrk cgzdn\",\"icon\":\"Hv42T\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport t from 'app/js/utils/t';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport TooltipTrigger from 'app/js/views/v3/components/core/tooltips/TooltipTrigger';\nimport UnexpectedErrorModal from 'app/js/views/v3/components/navbar/UnexpectedErrorModal';\nimport useModalState from 'app/js/views/v3/helpers/hooks/useModalState';\nimport * as tooltipAttachments from 'app/js/views/v3/helpers/props/tooltipAttachments';\nimport IconAlert from 'app/glyphs/alert-560.svg';\nimport styles from './ErrorNavBar.css';\n\nfunction ErrorNavBar() {\n  const errorModalState = useModalState();\n  const title = t('An unexpected error is impacting the navigation bar');\n\n  return (\n    <div className={styles.container}>\n      <TooltipTrigger\n        aria-label={title}\n        // @ts-expect-error ts-migrate(2739) FIXME: Type 'typeof Link' is missing the following proper... Remove this comment to see the full error message\n        component={Link}\n        tooltip={title}\n        tooltipAttachment={tooltipAttachments.BOTTOM_CENTER}\n        onPress={errorModalState.onOpen}\n      >\n        <IconAlert className={styles.icon} />\n      </TooltipTrigger>\n\n      <UnexpectedErrorModal\n        errorMessage={`${title}.`}\n        isOpen={errorModalState.isOpen}\n        onModalClose={errorModalState.onClose}\n      />\n    </div>\n  );\n}\n\nexport default ErrorNavBar;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport Link, { LinkProps } from 'app/js/views/v3/components/core/buttons/Link';\nimport styles from './NavBarButton.css';\n\ninterface NavBarButtonProps extends LinkProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nfunction NavBarButton(props: NavBarButtonProps) {\n  const { children, className, ...linkProps } = props;\n\n  return (\n    <Link {...linkProps} className={className}>\n      {children}\n    </Link>\n  );\n}\n\nNavBarButton.defaultProps = {\n  className: styles.button,\n};\n\nexport default NavBarButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"O0hHq x5jRQ\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport t from 'app/js/utils/t';\nimport routes from 'app/js/v4/routes/routes';\nimport NavBarButton from 'app/js/views/v3/components/navbar/NavBarButton';\nimport styles from './NavBarSignInButton.css';\n\nfunction NavBarSignInButton() {\n  const history = useHistory();\n\n  const onSignInPress = useCallback(() => {\n    history.push(routes.login);\n  }, [history]);\n\n  return (\n    <NavBarButton\n      className={styles.signInButton}\n      data-testid=\"signInButton\"\n      onPress={onSignInPress}\n    >\n      {t('Sign In')}\n    </NavBarButton>\n  );\n}\n\nexport default NavBarSignInButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"signInButton\":\"jQVX4 O0hHq x5jRQ\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport t from 'app/js/utils/t';\nimport routes from 'app/js/v4/routes/routes';\nimport NavBarButton from 'app/js/views/v3/components/navbar/NavBarButton';\n\nfunction NavBarSignUpButton() {\n  const history = useHistory();\n\n  const onSignUpPress = useCallback(() => {\n    history.push(routes.signUp);\n  }, [history]);\n\n  return (\n    <NavBarButton data-testid=\"signUpButton\" onPress={onSignUpPress}>\n      {t('Sign Up')}\n    </NavBarButton>\n  );\n}\n\nexport default NavBarSignUpButton;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport styles from './MenuHeader.css';\n\ninterface MenuHeaderProps {\n  className?: string;\n  children?: React.ReactNode;\n}\n\nfunction MenuHeader(props: MenuHeaderProps) {\n  const { className, children } = props;\n\n  return <div className={className}>{children}</div>;\n}\n\nMenuHeader.defaultProps = {\n  className: styles.menuHeader,\n};\n\nexport default MenuHeader;\n","// extracted by mini-css-extract-plugin\nexport default {\"menuHeader\":\"K6VfI\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport { SUPPORT_URL } from 'app/js/utils/constants/commonUrls';\nimport t from 'app/js/utils/t';\nimport Menu from 'app/js/views/v3/components/core/menus/Menu';\nimport MenuHeader from 'app/js/views/v3/components/core/menus/MenuHeader';\nimport MenuItem from 'app/js/views/v3/components/core/menus/MenuItem';\nimport MenuSeparator from 'app/js/views/v3/components/core/menus/MenuSeparator';\nimport createChainedCallback from 'app/js/views/v3/helpers/createChainedCallback';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\n\ntype NavBarAccountMenuProps = {\n  isOpen: boolean;\n  target: string;\n  options?: any;\n  username?: string;\n  isSignedIn: boolean;\n  isAnonymousUser: boolean;\n  isFullUser: boolean;\n  appsURL: string;\n  isCloudServerConnected: boolean;\n  hasHomeLibraryAccessLabels: boolean;\n  onSignInPress: (...args: any[]) => any;\n  onSignOutPress: (...args: any[]) => any;\n  onMenuClose: (...args: any[]) => any;\n};\n\nfunction NavBarAccountMenu(props: NavBarAccountMenuProps) {\n  const {\n    isOpen,\n    target,\n    options,\n    username,\n    isSignedIn,\n    isAnonymousUser,\n    isFullUser,\n    appsURL,\n    isCloudServerConnected,\n    onSignInPress,\n    onSignOutPress,\n\n    onMenuClose,\n    hasHomeLibraryAccessLabels,\n  } = props;\n\n  const shouldShowSignIn =\n    isCloudServerConnected && (!isSignedIn || isAnonymousUser);\n  const shouldShowSignOut = isSignedIn && isFullUser && !isAnonymousUser;\n\n  return (\n    <Menu\n      isOpen={isOpen}\n      options={options}\n      size={hasHomeLibraryAccessLabels ? sizes.LARGE : sizes.MEDIUM}\n      target={target}\n      onMenuClose={onMenuClose}\n    >\n      {username ? <MenuHeader>{username}</MenuHeader> : null}\n\n      {isSignedIn ? <MenuSeparator /> : null}\n\n      {isCloudServerConnected ? (\n        <MenuItem\n          target={__EXTERNAL_LINK_TARGET__}\n          to={appsURL}\n          onPress={onMenuClose}\n        >\n          {t('Get Plex Apps')}\n        </MenuItem>\n      ) : null}\n      {isCloudServerConnected ? (\n        <MenuItem\n          target={__EXTERNAL_LINK_TARGET__}\n          to={SUPPORT_URL}\n          onPress={onMenuClose}\n        >\n          {t('Help')}\n        </MenuItem>\n      ) : null}\n\n      <MenuSeparator />\n\n      {shouldShowSignIn ? (\n        <MenuItem onPress={createChainedCallback(onMenuClose, onSignInPress)}>\n          {t('Sign In')}\n        </MenuItem>\n      ) : null}\n      {shouldShowSignOut ? (\n        <MenuItem onPress={createChainedCallback(onMenuClose, onSignOutPress)}>\n          {t('Sign Out')}\n        </MenuItem>\n      ) : null}\n    </Menu>\n  );\n}\n\nexport default NavBarAccountMenu;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport selectCloudServer from 'app/js/stores/selectors/server/selectCloudServer';\nimport createUserFeatureSelector from 'app/js/stores/selectors/user/createUserFeatureSelector';\nimport selectUser from 'app/js/stores/selectors/user/selectUser';\nimport * as features from 'app/js/utils/constants/user/features';\nimport navigateToRoute from 'app/js/v4/routes/navigateToRoute';\nimport NavBarAccountMenu from './NavBarAccountMenu';\n\nfunction createMapStateToProps() {\n  return createSelector(\n    selectUser,\n    selectCloudServer,\n    createUserFeatureSelector(features.HOME_LIBRARY_ACCESS_LABELS),\n    createUserFeatureSelector(features.ALLOW_COMMUNITY_FEATURES),\n    (user, cloudServer, hasHomeLibraryAccessLabels: boolean) => {\n      return {\n        username: user.title,\n        isSignedIn: user.signedIn,\n        isRestricted: user.isRestricted,\n        isCloudServerConnected: cloudServer.isConnected,\n        isAnonymousUser: !!user.anonymous,\n        isFullUser: user.isFullUser,\n        appsURL: cloudServer\n          ? cloudServer.appsUrl\n          : 'https://plex.tv/downloads',\n        hasHomeLibraryAccessLabels,\n      };\n    }\n  );\n}\n\n// @ts-expect-error ts-migrate(6133) FIXME: 'props' is declared but its value is never read.\nfunction createMapDispatchToProps(dispatch: any, props: any) {\n  return {\n    onSignInPress(event: any) {\n      event.preventDefault();\n\n      navigateToRoute('login');\n    },\n    onSignOutPress(event: any) {\n      event.preventDefault();\n\n      navigateToRoute('logout');\n    },\n  };\n}\n\nconst NavBarAccountMenuConnector = connect(\n  createMapStateToProps,\n  createMapDispatchToProps\n)(NavBarAccountMenu);\n\nexport default NavBarAccountMenuConnector;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport classNames from 'classnames';\nimport React, { Component } from 'react';\nimport t from 'app/js/utils/t';\nimport DisclosureArrowButton from 'app/js/views/v3/components/core/buttons/DisclosureArrowButton';\nimport AvatarImg from 'app/js/views/v3/components/core/images/AvatarImg';\nimport TooltipTrigger from 'app/js/views/v3/components/core/tooltips/TooltipTrigger';\nimport getUniqueElementID from 'app/js/views/v3/helpers/getUniqueElementID';\nimport * as directions from 'app/js/views/v3/helpers/props/directions';\nimport NavBarAccountMenuConnector from './NavBarAccountMenuConnector';\nimport styles from './NavBarAccountButton.css';\n\ninterface NavBarAccountButtonProps {\n  className?: string;\n  tooltipClassName?: string;\n  tooltipFocusedClassName?: string;\n  serverEntityID: string;\n  userThumb?: string;\n}\n\ntype NavBarAccountButtonState = any;\n\nclass NavBarAccountButton extends Component<\n  NavBarAccountButtonProps,\n  NavBarAccountButtonState\n> {\n  static defaultProps = {\n    className: styles.button,\n    tooltipClassName: styles.tooltip,\n    tooltipFocusedClassName: styles.tooltipTriggerHasFocus,\n  };\n\n  // eslint-disable-next-line react/sort-comp\n  _buttonID: any;\n\n  //\n  // Lifecycle\n\n  constructor(props: any, context: any) {\n    super(props, context);\n\n    this.state = {\n      isMenuOpen: false,\n    };\n\n    this._buttonID = getUniqueElementID();\n  }\n\n  //\n  // Listeners\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n  onButtonPress = (event: any) => {\n    this.setState({\n      isMenuOpen: !this.state.isMenuOpen,\n    });\n  };\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n  onMenuClose = (event: any) => {\n    this.setState({\n      isMenuOpen: false,\n    });\n  };\n\n  render() {\n    const {\n      className,\n      tooltipClassName,\n      tooltipFocusedClassName,\n      serverEntityID,\n      userThumb,\n    } = this.props;\n\n    return (\n      <>\n        <TooltipTrigger\n          className={className}\n          // @ts-expect-error ts-migrate(2739) FIXME: Type 'typeof DisclosureArrowButton' is missing the... Remove this comment to see the full error message\n          component={DisclosureArrowButton}\n          direction={this.state.isMenuOpen ? directions.UP : directions.DOWN}\n          id={this._buttonID}\n          isSelected={false}\n          tooltip={this.state.isMenuOpen ? undefined : t('Account')}\n          tooltipClassName={tooltipClassName}\n          tooltipFocusedClassName={tooltipFocusedClassName}\n          onPress={this.onButtonPress}\n        >\n          <div className={styles.avatarContainer}>\n            <div\n              className={classNames(\n                styles.overlay,\n                this.state.isMenuOpen && styles.isMenuOpen\n              )}\n            />\n            <AvatarImg\n              height={30}\n              serverEntityID={serverEntityID}\n              url={userThumb}\n              width={30}\n            />\n          </div>\n        </TooltipTrigger>\n\n        <NavBarAccountMenuConnector\n          isOpen={this.state.isMenuOpen}\n          target={this._buttonID}\n          onMenuClose={this.onMenuClose}\n        />\n      </>\n    );\n  }\n}\n\nexport default NavBarAccountButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"LOGsx IZ0cW x5jRQ\",\"tooltip\":\"gRTc1 a1e4c GtJsp If9gp cb5I0 rII2m\",\"tooltipTriggerHasFocus\":\"Nqmbw gRTc1 a1e4c GtJsp If9gp cb5I0 rII2m\",\"avatarContainer\":\"z5YBr\",\"overlay\":\"Wz4N3\",\"isMenuOpen\":\"Fa0Hu\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectEntities from '../selectEntities';\n\nconst selectAllLibraryEntities = createSelector(\n  selectEntities,\n  (entities) => entities.libraries\n);\n\nexport default selectAllLibraryEntities;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport createDeepEqualSelector from 'app/js/stores/selectors/createDeepEqualSelector';\nimport selectAllServerEntities from 'app/js/stores/selectors/server/selectAllServerEntities';\nimport selectEmbeddedServer from './selectEmbeddedServer';\n\nconst selectEmbeddedServerEntity = createDeepEqualSelector(\n  createSelector(\n    selectEmbeddedServer,\n    selectAllServerEntities,\n    (embeddedServer, serverEntities) => serverEntities[embeddedServer]\n  ),\n  (props) => props\n);\n\nexport default selectEmbeddedServerEntity;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport createShallowEqualSelector from 'app/js/stores/selectors/createShallowEqualSelector';\nimport selectServers from 'app/js/stores/selectors/server/selectServers';\n\nconst selectOwnedConnectedServers = createShallowEqualSelector(\n  createSelector(selectServers, (allServerEntities) => {\n    return allServerEntities.filter(\n      (server: any) =>\n        server.isFullOwnedServer && server.isConnected && !server.isTransient\n    );\n  }),\n  (ownedConnectedServers) => ownedConnectedServers\n);\n\nexport default selectOwnedConnectedServers;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectOwnedConnectedServers from './selectOwnedConnectedServers';\n\nconst selectOwnedConnectedServerEntityIDs = createSelector(\n  selectOwnedConnectedServers,\n  (ownedConnectedServers) =>\n    ownedConnectedServers.map((server: any) => server.entityID)\n);\n\nexport default selectOwnedConnectedServerEntityIDs;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectDeviceSettings from 'app/js/stores/selectors/settings/selectDeviceSettings';\n\nconst selectDismissedServerUpdateVersions = createSelector(\n  selectDeviceSettings,\n  (deviceSettings) => deviceSettings.dismissedServerUpdateVersions\n);\n\nexport default selectDismissedServerUpdateVersions;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectDeviceSettings from 'app/js/stores/selectors/settings/selectDeviceSettings';\n\nconst selectServerUpdateDismissedVersion = createSelector(\n  selectDeviceSettings,\n  (deviceSettings) => deviceSettings.serverUpdateDismissedVersion\n);\n\nexport default selectServerUpdateDismissedVersion;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as activityTypes from 'app/js/utils/server/activityTypes';\n\nconst activityTypeWhitelist = {\n  [activityTypes.PROVIDER_DEVICE_CHANNELSCAN]: true,\n  [activityTypes.PROVIDER_EPG_LOAD]: true,\n  [activityTypes.GRABBER_GRAB]: true,\n  [activityTypes.GRABBER_ASSIMILATE]: true,\n  [activityTypes.CLEAN_BUNDLES]: true,\n  [activityTypes.BACKUP_DATABASE]: true,\n  [activityTypes.OPTIMIZE_DATABASE]: true,\n  [activityTypes.LIBRARY_DELETE]: true,\n  [activityTypes.LIBRARY_UPDATE_SECTION]: true,\n  [activityTypes.LIBRARY_UPDATE_ITEM_METADATA]: true,\n  [activityTypes.MEDIA_DOWNLOAD]: true,\n  [activityTypes.MEDIA_GENERATE_BIF]: true,\n  [activityTypes.MEDIA_GENERATE_CHAPTER_THUMBS]: true,\n  [activityTypes.MEDIA_GENERATE_INTROS]: true,\n  [activityTypes.MEDIA_GENERATE_MUSIC_ANALYSIS]: true,\n  [activityTypes.MEDIA_OFFLINE_TRANSCODE]: true,\n  [activityTypes.SUBTITLE_DOWNLOAD]: true,\n};\n\nexport default activityTypeWhitelist;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as serverUpdateStates from 'app/js/utils/constants/serverUpdateStates';\nimport shortVersion from 'app/js/utils/string/shortVersion';\n\nfunction getAvailableUpdateVersion(server: any) {\n  const update = server[__PLATFORM__] && server[__PLATFORM__].update;\n\n  if (\n    update &&\n    (update.state === serverUpdateStates.AVAILABLE ||\n      update.state === serverUpdateStates.DOWNLOADED ||\n      update.state === serverUpdateStates.DOWNLOADING ||\n      update.state === serverUpdateStates.NOTIFY)\n  ) {\n    return shortVersion(update.version);\n  }\n}\n\nexport default function isUpdateAvailable(\n  server: any,\n  dismissedServerUpdateVersions: any,\n  serverUpdateDismissedVersion: any\n) {\n  const serverUpdateVersion = getAvailableUpdateVersion(server);\n\n  return !!(\n    server.isConnected &&\n    server.isFullOwnedServer &&\n    serverUpdateVersion &&\n    serverUpdateVersion !== serverUpdateDismissedVersion &&\n    serverUpdateVersion !==\n      dismissedServerUpdateVersions[server.machineIdentifier]\n  );\n}\n","import { createSelector } from 'reselect';\nimport selectAvailableLibraryUpgrades from 'app/js/stores/selectors/ui/selectAvailableLibraryUpgrades';\n\nconst selectHasAnyManageableServerAvailableLibraryUpgrade = createSelector(\n  selectAvailableLibraryUpgrades,\n  (availableUpgrades) => availableUpgrades.length > 0\n);\n\nexport default selectHasAnyManageableServerAvailableLibraryUpgrade;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const INACTIVE = 'inactive';\nexport const SCHEDULED = 'scheduled';\nexport const IN_PROGRESS = 'inprogress';\nexport const COMPLETE = 'complete';\nexport const CANCELLED = 'cancelled';\nexport const ERROR = 'error';\nexport const POST_PROCESSING = 'postprocessing';\n","// extracted by mini-css-extract-plugin\nexport default {\"splitButton\":\"jwZ3i Q4FVu\",\"activityTitleContainer\":\"jS3Sd\",\"activityTitle\":\"tu4Z9\",\"activitySubtitle\":\"Uyyik\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport CircularProgressBar from 'app/js/views/v3/components/core/CircularProgressBar';\nimport Spinner from 'app/js/views/v3/components/core/Spinner';\nimport * as sizes from 'app/js/views/v3/helpers/props/sizes';\nimport styles from './ActivityMenuStatusItem.css';\n\ntype ActivityMenuStatusItemProps = {\n  title: string;\n  subtitle?: string;\n  progress?: number;\n  isPostProcessing?: boolean;\n};\n\nfunction ActivityMenuStatusItem(props: ActivityMenuStatusItemProps) {\n  const { title, subtitle, progress, isPostProcessing } = props;\n\n  return (\n    <div className={styles.splitButton}>\n      <span className={styles.activityTitleContainer}>\n        <span className={styles.activityTitle} title={title}>\n          {title}\n          {subtitle ? ':' : null}\n        </span>\n        {subtitle ? (\n          <span className={styles.activitySubtitle} title={subtitle}>\n            {subtitle}\n          </span>\n        ) : null}\n      </span>\n      <span>\n        {progress == null || isPostProcessing ? (\n          <Spinner size={sizes.SMALL} />\n        ) : (\n          <CircularProgressBar\n            lineWidth={2}\n            progress={progress}\n            showProgressText={false}\n            size={18}\n          />\n        )}\n      </span>\n    </div>\n  );\n}\n\nexport default ActivityMenuStatusItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"statusContainer\":\"RpUEJ\",\"splitButton\":\"X8md1 jwZ3i Q4FVu\",\"statusButtonIndicator\":\"Jj0bR\",\"alertIndicator\":\"qiUZl\",\"statusTitle\":\"VGqVJ\",\"primaryLabel\":\"xXcb0\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { useCallback } from 'react';\nimport { IconUpCircledFilled } from '@plex/react-chroma-icon';\nimport activityTypeWhitelist from 'app/js/utils/activityTypeWhitelist';\nimport * as grabOperationStatuses from 'app/js/utils/constants/mediaGrabOperationStatuses';\nimport t from 'app/js/utils/t';\nimport { navigateToServerSettings } from 'app/js/v4/routes/navigateToRoute';\nimport MenuItem from 'app/js/views/v3/components/core/menus/MenuItem';\nimport ActivityMenuStatusItem from './ActivityMenuStatusItem';\nimport styles from './NavBarActivityMenuStatusItem.css';\n\ninterface StatusButtonProps {\n  indicator?: React.ReactNode;\n  label: string;\n  labelClassName?: string;\n  onPress?: (...args: any[]) => any;\n  to?: string;\n}\n\nfunction StatusButton(props: StatusButtonProps) {\n  const { labelClassName, label, indicator } = props;\n  return (\n    <MenuItem\n      className={styles.splitButton}\n      to={props?.to}\n      onPress={props?.onPress}\n    >\n      <span className={labelClassName}>{label}</span>\n\n      {indicator ? (\n        <span className={styles.statusButtonIndicator}>{indicator}</span>\n      ) : null}\n    </MenuItem>\n  );\n}\n\nexport interface NavBarActivityMenuStatusItemProps {\n  friendlyName: string;\n  machineIdentifier: string;\n  providerEntityID: string;\n  serverEntityID: string;\n  sessionsCount: number;\n  backgroundTranscodeJobs: any[];\n  activities: any[];\n  showLibraryUpgradeAvailable: boolean;\n  showUpdateAvailable: boolean;\n  onMenuClose: (...args: any[]) => any;\n}\n\nfunction NavBarActivityMenuStatusItem(\n  props: NavBarActivityMenuStatusItemProps\n) {\n  const {\n    friendlyName,\n    sessionsCount,\n    backgroundTranscodeJobs,\n    activities,\n    showUpdateAvailable,\n    onMenuClose,\n  } = props;\n\n  const onUpgradeLibrariesPress = useCallback(() => {\n    navigateToServerSettings();\n    onMenuClose();\n  }, [onMenuClose]);\n\n  //\n  // Render\n\n  return (\n    <div className={styles.statusContainer}>\n      <div className={styles.statusTitle}>{friendlyName}</div>\n\n      <StatusButton\n        indicator={sessionsCount ? `${sessionsCount}` : null}\n        label={t('Dashboard')}\n        to=\"#!/status/server-dashboard\"\n        onPress={onMenuClose}\n      />\n\n      {backgroundTranscodeJobs.length ? (\n        <StatusButton\n          indicator={`${backgroundTranscodeJobs.length}`}\n          label={t('Conversions')}\n          to=\"#!/status/conversion\"\n          onPress={onMenuClose}\n        />\n      ) : null}\n\n      {activities.length\n        ? activities.map((activity) => {\n            const {\n              uuid,\n              type,\n              title,\n              subtitle,\n              progress,\n              Context = {},\n            } = activity;\n\n            // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n            if (!activityTypeWhitelist[type]) {\n              return null;\n            }\n\n            return (\n              <ActivityMenuStatusItem\n                key={uuid}\n                isPostProcessing={\n                  Context.status === grabOperationStatuses.POST_PROCESSING\n                }\n                progress={progress}\n                subtitle={subtitle}\n                title={title}\n              />\n            );\n          })\n        : null}\n\n      {showUpdateAvailable ? (\n        <StatusButton\n          indicator={\n            <div className={styles.alertIndicator}>\n              <IconUpCircledFilled />\n            </div>\n          }\n          label={t('Server Update Available')}\n          labelClassName={styles.primaryLabel}\n          to=\"#!/server/update\"\n          onPress={onMenuClose}\n        />\n      ) : null}\n\n      {props.showLibraryUpgradeAvailable ? (\n        <StatusButton\n          indicator={\n            <div className={styles.alertIndicator}>\n              <IconUpCircledFilled />\n            </div>\n          }\n          label={t('Upgrade Libraries')}\n          labelClassName={styles.primaryLabel}\n          onPress={onUpgradeLibrariesPress}\n        />\n      ) : null}\n    </div>\n  );\n}\n\nexport default NavBarActivityMenuStatusItem;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport selectAllProviderEntities from 'app/js/stores/selectors/provider/selectAllProviderEntities';\nimport createServerFlexSelector from 'app/js/stores/selectors/server/createServerFlexSelector';\nimport createServerNowPlayingSessionsCountSelector from 'app/js/stores/selectors/server/createServerNowPlayingSessionsCountSelector';\nimport createUnstableServerSelector from 'app/js/stores/selectors/server/createUnstableServerSelector';\nimport selectDismissedServerUpdateVersions from 'app/js/stores/selectors/settings/selectDismissedServerUpdateVersions';\nimport selectServerUpdateDismissedVersion from 'app/js/stores/selectors/settings/selectServerUpdateDismissedVersion';\nimport createHasAvailableLibraryUpgradeSelector from 'app/js/stores/selectors/ui/createHasAvailableLibraryUpgradeSelector';\nimport { LIBRARY } from 'app/js/utils/constants/providerIdentifiers';\nimport isUpdateAvailable from 'app/js/utils/server/isUpdateAvailable';\nimport NavBarActivityMenuStatusItem from './NavBarActivityMenuStatusItem';\n\nfunction createSelectServerBackgroundTranscodeJobs() {\n  return createSelector(createServerFlexSelector(), (serverFlexModel) =>\n    serverFlexModel.backgroundTranscodeJobs\n      ? serverFlexModel.backgroundTranscodeJobs\n      : []\n  );\n}\n\nfunction createSelectServerActivities() {\n  return createSelector(createServerFlexSelector(), (serverFlexModel) =>\n    serverFlexModel.activities ? serverFlexModel.activities : []\n  );\n}\n\nfunction createMapStateToProps() {\n  return createSelector(\n    createUnstableServerSelector(),\n    createServerNowPlayingSessionsCountSelector(),\n    createSelectServerBackgroundTranscodeJobs(),\n    createSelectServerActivities(),\n    createHasAvailableLibraryUpgradeSelector(),\n    selectDismissedServerUpdateVersions,\n    selectServerUpdateDismissedVersion,\n    selectAllProviderEntities,\n    (\n      server,\n      sessionsCount,\n      backgroundTranscodeJobs,\n      activities,\n      hasAvailableLibraryUpgrade,\n      dismissedServerUpdateVersions,\n      serverUpdateDismissedVersion,\n      providers\n    ) => {\n      return {\n        friendlyName: server.friendlyName,\n        machineIdentifier: server.machineIdentifier,\n        providerEntityID: server.providers\n          .map((providerEntityID: string) => providers[providerEntityID])\n          .find((provider: any) => provider.identifier === LIBRARY).entityID,\n        sessionsCount,\n        backgroundTranscodeJobs,\n        activities,\n        showLibraryUpgradeAvailable: hasAvailableLibraryUpgrade,\n        showUpdateAvailable: isUpdateAvailable(\n          server,\n          dismissedServerUpdateVersions,\n          serverUpdateDismissedVersion\n        ),\n      };\n    }\n  );\n}\n\nconst NavBarActivityMenuStatusItemConnector = connect(createMapStateToProps)(\n  NavBarActivityMenuStatusItem\n);\n\nexport default NavBarActivityMenuStatusItemConnector;\n","import { createSelector, OutputParametricSelector } from 'reselect';\nimport selectAvailableLibraryUpgrades, {\n  LibraryUpgradeTuple,\n} from 'app/js/stores/selectors/ui/selectAvailableLibraryUpgrades';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\n\nexport default function createHasAvailableLibraryUpgradeSelector(): OutputParametricSelector<\n  LegacyRootState,\n  {\n    serverEntityID: string;\n  },\n  boolean,\n  (res1: string, res2: LibraryUpgradeTuple[]) => boolean\n> {\n  return createSelector(\n    (\n      _appState: LegacyRootState,\n      { serverEntityID }: { serverEntityID: string }\n    ) => serverEntityID,\n    selectAvailableLibraryUpgrades,\n    (targetServerEntityID, availableUpgrades) => {\n      return availableUpgrades.some(\n        ([, serverEntityID]) => targetServerEntityID === serverEntityID\n      );\n    }\n  );\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport createServerFlexSelector from 'app/js/stores/selectors/server/createServerFlexSelector';\nimport activityTypeWhitelist from 'app/js/utils/activityTypeWhitelist';\nimport NavBarEmbeddedServerActivityMenuStatusItem from './NavBarEmbeddedServerActivityMenuStatusItem';\n\nfunction createMapStateToProps() {\n  return createSelector(createServerFlexSelector(), (serverFlexModel) => {\n    const activities =\n      serverFlexModel && serverFlexModel.activities\n        ? serverFlexModel.activities.filter(\n            // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n            (activity: any) => activityTypeWhitelist[activity.type]\n          )\n        : [];\n\n    return { activities };\n  });\n}\n\nconst NavBarEmbeddedServerActivityMenuStatusItemConnector = connect(\n  createMapStateToProps\n)(NavBarEmbeddedServerActivityMenuStatusItem);\n\nexport default NavBarEmbeddedServerActivityMenuStatusItemConnector;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport * as grabOperationStatuses from 'app/js/utils/constants/mediaGrabOperationStatuses';\nimport t from 'app/js/utils/t';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport getDownloadsPageRoute from 'app/js/views/v3/helpers/routes/getDownloadsPageRoute';\nimport ActivityMenuStatusItem from './ActivityMenuStatusItem';\nimport styles from './NavBarEmbeddedServerActivityMenuStatusItem.css';\n\ntype NavBarEmbeddedServerActivityMenuStatusItemProps = {\n  activities: any[];\n  onMenuClose?: (...args: any[]) => any;\n};\n\nfunction NavBarEmbeddedServerActivityMenuStatusItem(\n  props: NavBarEmbeddedServerActivityMenuStatusItemProps\n) {\n  const { activities, onMenuClose } = props;\n\n  return activities.length ? (\n    <div className={styles.statusContainer}>\n      <div className={styles.statusTitle}>\n        <Link to={getDownloadsPageRoute()} onPress={onMenuClose}>\n          {t('Downloads')}\n        </Link>\n      </div>\n      {activities.map((activity) => {\n        const { uuid, title, subtitle, progress, Context = {} } = activity;\n\n        return (\n          <ActivityMenuStatusItem\n            key={uuid}\n            isPostProcessing={\n              Context.status === grabOperationStatuses.POST_PROCESSING\n            }\n            progress={progress}\n            subtitle={subtitle}\n            title={title}\n          />\n        );\n      })}\n    </div>\n  ) : null;\n}\n\nexport default NavBarEmbeddedServerActivityMenuStatusItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"statusContainer\":\"_6VjBC RpUEJ\",\"statusTitle\":\"EioCA VGqVJ\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport path from 'app/js/utils/url/path';\n\nexport const url = '#!/downloads';\n\nexport default function getDownloadsPageRoute(params?: any): string {\n  return path.join(url, params);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport Menu from 'app/js/views/v3/components/core/menus/Menu';\nimport NavBarActivityMenuStatusItemConnector from './NavBarActivityMenuStatusItemConnector';\nimport NavBarEmbeddedServerActivityMenuStatusItemConnector from './NavBarEmbeddedServerActivityMenuStatusItemConnector';\nimport styles from './NavBarActivityMenu.css';\n\nconst menuOptions = {\n  placement: 'bottom-end',\n};\n\ninterface NavBarActivityMenuProps {\n  isOpen: boolean;\n  target: string;\n  embeddedServerEntityID?: string;\n  ownedServerEntityIDs: string[];\n  onMenuClose: (...args: any[]) => any;\n}\n\nfunction NavBarActivityMenu(props: NavBarActivityMenuProps) {\n  const {\n    isOpen,\n    target,\n    embeddedServerEntityID,\n    ownedServerEntityIDs,\n    onMenuClose,\n  } = props;\n\n  //\n  // Render\n\n  return (\n    <Menu\n      className={styles.menu}\n      isOpen={isOpen}\n      options={menuOptions}\n      target={target}\n      onMenuClose={onMenuClose}\n    >\n      {ownedServerEntityIDs.map((serverEntityID) => {\n        return (\n          <NavBarActivityMenuStatusItemConnector\n            key={serverEntityID}\n            serverEntityID={serverEntityID}\n            onMenuClose={onMenuClose}\n          />\n        );\n      })}\n      {embeddedServerEntityID ? (\n        <NavBarEmbeddedServerActivityMenuStatusItemConnector\n          key={embeddedServerEntityID}\n          serverEntityID={embeddedServerEntityID}\n          onMenuClose={onMenuClose}\n        />\n      ) : null}\n    </Menu>\n  );\n}\n\nexport default NavBarActivityMenu;\n","// extracted by mini-css-extract-plugin\nexport default {\"menu\":\"duuJG CgKY7\"};","// extracted by mini-css-extract-plugin\nexport default {\"iconContainer\":\"gT56r\",\"activityIndicator\":\"WUBgv dHO6j m_4Rc\"};","import classNames from 'classnames';\nimport React from 'react';\nimport {\n  IconActivity,\n  IconActivityCircledFilled,\n  IconUpCircledFilled,\n} from '@plex/react-chroma-icon';\nimport Spinner from 'app/js/views/v3/components/core/Spinner';\nimport colors from 'app/js/views/v3/styles/variables/colors';\nimport styles from './NavBarActivityIcon.css';\n\ninterface NavBarActivityIconProps {\n  className?: string;\n  showSpinner?: boolean;\n  showHighlighted?: boolean;\n  showUpdateIcon?: boolean;\n}\n\nfunction NavBarActivityIcon({\n  className,\n  showSpinner,\n  showHighlighted,\n  showUpdateIcon,\n}: NavBarActivityIconProps): React.ReactElement {\n  //\n  // Render\n\n  return (\n    <span className={classNames(className, styles.iconContainer)}>\n      {showSpinner ? (\n        <Spinner\n          className={styles.activityIndicator}\n          color={colors.primaryAlternateColor}\n        />\n      ) : null}\n      {showHighlighted ? <IconActivityCircledFilled /> : null}\n      {!showHighlighted && showUpdateIcon ? <IconUpCircledFilled /> : null}\n      {!showHighlighted && !showUpdateIcon ? <IconActivity /> : null}\n    </span>\n  );\n}\n\nexport default NavBarActivityIcon;\n","import React, { FunctionComponent, ReactElement } from 'react';\nimport assert from 'app/js/utils/log/assert';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport TooltipTrigger, {\n  TooltipTriggerProps,\n} from 'app/js/views/v3/components/core/tooltips/TooltipTrigger';\nimport styles from './NavBarIconButton.css';\n\ntype NavBarIconButtonProps = Omit<TooltipTriggerProps, 'component'> & {\n  className?: string;\n  tooltipClassName?: string;\n  tooltipFocusedClassName?: string;\n  labelClassName?: string;\n  iconComponent: FunctionComponent<any>;\n  isMenuOpen?: boolean;\n  title?: string;\n  ariaLabel?: string;\n  label?: string;\n  iconProps?: any;\n};\n\nfunction NavBarIconButton(props: NavBarIconButtonProps): ReactElement {\n  const {\n    className,\n    tooltipClassName,\n    tooltipFocusedClassName,\n    labelClassName,\n    iconComponent: IconComponent,\n    title,\n    ariaLabel,\n    label,\n    iconProps,\n    ...otherProps\n  } = props;\n\n  const finalAriaLabel = title || ariaLabel;\n\n  __DEV__ &&\n    assert(\n      finalAriaLabel,\n      'NavBarIconButton requires an `ariaLabel` or `title` string prop.'\n    );\n\n  return (\n    <TooltipTrigger\n      aria-label={finalAriaLabel}\n      className={className}\n      // @ts-expect-error ts-migrate(2739) FIXME: Type 'typeof Link' is missing the following proper... Remove this comment to see the full error message\n      component={Link}\n      tooltip={title}\n      tooltipClassName={tooltipClassName}\n      tooltipFocusedClassName={tooltipFocusedClassName}\n      {...otherProps}\n    >\n      <IconComponent {...iconProps} />\n      {label ? <span className={labelClassName}>{label}</span> : null}\n    </TooltipTrigger>\n  );\n}\n\nNavBarIconButton.defaultProps = {\n  className: styles.button,\n  tooltipClassName: styles.tooltip,\n  tooltipFocusedClassName: styles.tooltipTriggerHasFocus,\n};\n\nexport default NavBarIconButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"fa3uy LHQ7Y\",\"tooltip\":\"o48En a1e4c GtJsp If9gp cb5I0 rII2m\",\"tooltipTriggerHasFocus\":\"O5ZA3 o48En a1e4c GtJsp If9gp cb5I0 rII2m\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport selectAllLibraryEntities from 'app/js/stores/selectors/library/selectAllLibraryEntities';\nimport selectEmbeddedServer from 'app/js/stores/selectors/server/selectEmbeddedServer';\nimport selectEmbeddedServerEntity from 'app/js/stores/selectors/server/selectEmbeddedServerEntity';\nimport selectOwnedConnectedServerEntityIDs from 'app/js/stores/selectors/server/selectOwnedConnectedServerEntityIDs';\nimport selectOwnedConnectedServers from 'app/js/stores/selectors/server/selectOwnedConnectedServers';\nimport selectDismissedServerUpdateVersions from 'app/js/stores/selectors/settings/selectDismissedServerUpdateVersions';\nimport selectServerUpdateDismissedVersion from 'app/js/stores/selectors/settings/selectServerUpdateDismissedVersion';\nimport activityTypeWhitelist from 'app/js/utils/activityTypeWhitelist';\nimport isUpdateAvailable from 'app/js/utils/server/isUpdateAvailable';\nimport NavBarActivityButton from './NavBarActivityButton';\n\nconst initialActivityCounts = {\n  sessionsCount: 0,\n  backgroundTranscodeJobsCount: 0,\n  activitiesCount: 0,\n};\n\nfunction reduceActivityCounts(servers: any, serverNowPlayingSessions: any) {\n  return servers.reduce(\n    (counts: any, server: any) => {\n      const { backgroundTranscodeJobs = [], activities = [] } =\n        server[__PLATFORM__];\n\n      const sessions = serverNowPlayingSessions[server.machineIdentifier];\n      const sessionCount = sessions?.sessionKeys.length;\n      const backgroundTranscodeJobsCount = backgroundTranscodeJobs.length;\n      const activitiesCount = activities.filter(\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        (activity: any) => !!activityTypeWhitelist[activity.type]\n      ).length;\n\n      // Avoid arithmetic on non numbers.\n      // See: https://github.com/plexinc/plex-desktop/issues/705\n\n      if (sessionCount > 0) {\n        counts.sessionsCount += sessionCount;\n      }\n\n      if (backgroundTranscodeJobsCount > 0) {\n        counts.backgroundTranscodeJobsCount += backgroundTranscodeJobsCount;\n      }\n\n      if (activitiesCount > 0) {\n        counts.activitiesCount += activitiesCount;\n      }\n\n      return counts;\n    },\n    { ...initialActivityCounts }\n  );\n}\n\nconst selectOwnedServerActivityCounts = createSelector(\n  selectOwnedConnectedServers,\n  (appState) => appState.v4.core.serverNowPlayingSessions,\n  (ownedServers, serverNowPlayingSessions) =>\n    reduceActivityCounts(ownedServers, serverNowPlayingSessions)\n);\n\nconst selectEmbeddedServerActivityCounts = createSelector(\n  selectEmbeddedServerEntity,\n  (appState) => appState.v4.core.serverNowPlayingSessions,\n  (embeddedServer, serverNowPlayingSessions) =>\n    embeddedServer\n      ? reduceActivityCounts([embeddedServer], serverNowPlayingSessions)\n      : initialActivityCounts\n);\n\nconst selectActivityCounts = createSelector(\n  selectOwnedServerActivityCounts,\n  selectEmbeddedServerActivityCounts,\n  (ownedServerActivityCounts, embeddedServerActivityCounts) => {\n    return {\n      activitiesCount:\n        ownedServerActivityCounts.activitiesCount +\n        embeddedServerActivityCounts.activitiesCount,\n      backgroundTranscodeJobsCount:\n        ownedServerActivityCounts.backgroundTranscodeJobsCount +\n        embeddedServerActivityCounts.backgroundTranscodeJobsCount,\n      sessionsCount:\n        ownedServerActivityCounts.sessionsCount +\n        embeddedServerActivityCounts.sessionsCount,\n    };\n  }\n);\n\nconst selectServerRefreshingLibrariesCount = createSelector(\n  selectOwnedConnectedServers,\n  selectAllLibraryEntities,\n  (ownedServers, libraryEntities) => {\n    return ownedServers.reduce((count: any, server: any) => {\n      const { libraries: libraryEntityIDs } = server[__PLATFORM__];\n      const refreshingLibraries = libraryEntityIDs.filter(\n        (libraryEntityID: any) => {\n          const library = libraryEntities[libraryEntityID];\n\n          return !!library && library.refreshing;\n        }\n      );\n\n      count += refreshingLibraries.length;\n\n      return count;\n    }, 0);\n  }\n);\n\nconst selectHasAvailableServerUpdate = createSelector(\n  selectOwnedConnectedServers,\n  selectDismissedServerUpdateVersions,\n  selectServerUpdateDismissedVersion,\n  (servers, dismissedServerUpdateVersions, serverUpdateDismissedVersion) => {\n    return servers.some((server: any) => {\n      return isUpdateAvailable(\n        server,\n        dismissedServerUpdateVersions,\n        serverUpdateDismissedVersion\n      );\n    });\n  }\n);\n\nfunction createMapStateToProps() {\n  return createSelector(\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appState' is declared but its value is never read... Remove this comment to see the full error message\n    (appState: any, { isDisabled }: any) => !!isDisabled,\n    selectEmbeddedServer,\n    selectOwnedConnectedServerEntityIDs,\n    selectActivityCounts,\n    selectServerRefreshingLibrariesCount,\n    selectHasAvailableServerUpdate,\n    (\n      isDisabled,\n      embeddedServerEntityID,\n      ownedServerEntityIDs,\n      activitiesCounts,\n      libraryRefreshingCount,\n      hasAvailableServerUpdate\n    ) => {\n      const hasOwnedServers = ownedServerEntityIDs.length > 0;\n      let showActivityButton = hasOwnedServers;\n\n      if (embeddedServerEntityID) {\n        showActivityButton = true;\n        isDisabled =\n          isDisabled ||\n          (!hasOwnedServers &&\n            activitiesCounts.sessionsCount +\n              activitiesCounts.backgroundTranscodeJobsCount +\n              activitiesCounts.activitiesCount ===\n              0);\n      }\n\n      return {\n        isDisabled,\n        embeddedServerEntityID,\n        ownedServerEntityIDs,\n        showActivityButton,\n        hasSessions: activitiesCounts.sessionsCount > 0,\n        hasConversions: activitiesCounts.backgroundTranscodeJobsCount > 0,\n        hasActivities: activitiesCounts.activitiesCount > 0,\n        hasAvailableServerUpdate,\n        hasLibraryRefreshing: libraryRefreshingCount > 0,\n        activityButtonCount:\n          activitiesCounts.sessionsCount +\n          activitiesCounts.backgroundTranscodeJobsCount,\n      };\n    }\n  );\n}\n\nexport default connect(createMapStateToProps)(NavBarActivityButton);\n","import classNames from 'classnames';\nimport React, { ReactElement, useCallback, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport selectHasAnyManageableServerAvailableLibraryUpgrade from 'app/js/stores/selectors/ui/selectHasAnyManageableServerAvailableLibraryUpgrade';\nimport t from 'app/js/utils/t';\nimport NavBarActivityMenu from 'app/js/views/v3/components/navbar/NavBarActivityMenu';\nimport useUniqueElementID from 'app/js/views/v3/helpers/hooks/useUniqueElementID';\nimport NavBarActivityIcon from './NavBarActivityIcon';\nimport NavBarIconButton from './NavBarIconButton';\nimport styles from './NavBarActivityButton.css';\n\ninterface NavBarActivityButtonProps {\n  isDisabled: boolean;\n  showActivityButton: boolean;\n  embeddedServerEntityID?: string;\n  ownedServerEntityIDs: string[];\n  hasSessions?: boolean;\n  hasConversions?: boolean;\n  hasActivities?: boolean;\n  hasAvailableServerUpdate?: boolean;\n  hasLibraryRefreshing?: boolean;\n  activityButtonCount?: number;\n}\n\nexport default function NavBarActivityButton(\n  props: NavBarActivityButtonProps\n): ReactElement {\n  const {\n    activityButtonCount,\n    embeddedServerEntityID,\n    hasActivities,\n    hasAvailableServerUpdate,\n    hasConversions,\n    hasLibraryRefreshing,\n    hasSessions,\n    isDisabled,\n    ownedServerEntityIDs,\n  } = props;\n\n  const isLibraryUpgradeAvailable = useSelector(\n    selectHasAnyManageableServerAvailableLibraryUpgrade\n  );\n\n  const buttonID = useUniqueElementID();\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const onActivityPress = useCallback(() => {\n    setIsMenuOpen(!isMenuOpen);\n  }, [isMenuOpen]);\n\n  const onMenuClose = useCallback(() => {\n    setIsMenuOpen(false);\n  }, []);\n\n  const showSpinner = hasActivities || hasLibraryRefreshing;\n  const showHighlighted = hasSessions || hasConversions;\n  const showUpdateIcon =\n    !showHighlighted &&\n    !activityButtonCount &&\n    (hasAvailableServerUpdate || isLibraryUpgradeAvailable);\n\n  //\n  // Effects\n\n  useEffect(() => {\n    if (isDisabled && isMenuOpen) {\n      // See: https://github.com/plexinc/plex-web-client/issues/13952\n      // Steps to reproduce this use-case:\n      // - Run Qt Desktop without any owned servers returned from resources\n      // - This button should be visible but disabled\n      // - Download a podcast\n      // - The button should display spinner and when clicked show menu\n      // - When finished downloading the menu should close\n      onMenuClose();\n    }\n  }, [isDisabled, isMenuOpen, onMenuClose]);\n\n  //\n  // Render\n\n  return (\n    <>\n      <NavBarIconButton\n        ariaLabel={t('Activity')}\n        className={classNames(\n          styles.button,\n          (showHighlighted || showUpdateIcon) && styles.isHighlighted\n        )}\n        iconComponent={NavBarActivityIcon}\n        iconProps={{\n          className: styles.activityIcon,\n          showSpinner,\n          showHighlighted,\n          showUpdateIcon,\n        }}\n        id={buttonID}\n        isDisabled={isDisabled}\n        label={activityButtonCount ? String(activityButtonCount) : undefined}\n        labelClassName={styles.label}\n        title={isMenuOpen ? undefined : t('Activity')}\n        onPress={onActivityPress}\n      />\n\n      <NavBarActivityMenu\n        embeddedServerEntityID={embeddedServerEntityID}\n        isOpen={isMenuOpen}\n        ownedServerEntityIDs={ownedServerEntityIDs}\n        target={buttonID}\n        onMenuClose={onMenuClose}\n      />\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"bBF2y fa3uy LHQ7Y\",\"activityIcon\":\"zdedE gT56r\",\"label\":\"R0Io4\",\"isHighlighted\":\"l0h1v\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport { resolve } from 'app/js/adapters/adapters';\nimport * as metricsContexts from 'app/js/utils/constants/metrics/metricsContexts';\nimport * as metricsEvents from 'app/js/utils/constants/metrics/metricsEvents';\nimport * as upsellOrigins from 'app/js/utils/constants/upsellOrigins';\nimport { getWWWPlexUrl } from 'app/js/utils/getRuntimeUrl';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\nimport NavBarButton from 'app/js/views/v3/components/navbar/NavBarButton';\nimport PlexPassModal from 'app/js/views/v3/components/user/modals/PlexPassModal';\n\ntype State = any;\n\nclass NavBarPlexPassButton extends Component<\n  { shouldBypassModal: boolean },\n  State\n> {\n  //\n  // Lifecycle\n\n  constructor(props: any, context: any) {\n    super(props, context);\n\n    this.state = {\n      isPlexPassModalOpen: false,\n    };\n  }\n\n  //\n  // Listeners\n\n  onButtonPress = (_event: any) => {\n    const { shouldBypassModal } = this.props;\n\n    resolve('metrics').trackEvent({\n      event: metricsEvents.CLIENT_UPSELL,\n      interaction: true,\n      context: {\n        experiments: {\n          'upsell-experiment': shouldBypassModal ? 'direct' : 'in-app',\n        },\n      },\n    });\n\n    if (!shouldBypassModal) {\n      this.setState({\n        isPlexPassModalOpen: true,\n      });\n    }\n  };\n\n  onModalClose = (_event: any) => {\n    this.setState({\n      isPlexPassModalOpen: false,\n    });\n  };\n\n  //\n  // Render\n\n  render() {\n    const { shouldBypassModal } = this.props;\n\n    const subscribeUrl = path.join(getWWWPlexUrl('/plex-pass/purchase'), {\n      utm_source: 'app.plex.tv',\n      utm_medium: 'app',\n      utm_campaign: 'PP_in-app-upsell_01',\n      utm_content: upsellOrigins.NAV_BAR,\n    });\n\n    return (\n      <>\n        <NavBarButton\n          target=\"_blank\"\n          to={shouldBypassModal ? subscribeUrl : undefined}\n          onPress={this.onButtonPress}\n        >\n          {t('Go Premium')}\n        </NavBarButton>\n        <PlexPassModal\n          isOpen={this.state.isPlexPassModalOpen}\n          metricsProperties={{\n            context: metricsContexts.NAV_BAR,\n          }}\n          origin={upsellOrigins.NAV_BAR}\n          onModalClose={this.onModalClose}\n        />\n      </>\n    );\n  }\n}\n\nexport default NavBarPlexPassButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"cgzdn\",\"side\":\"FVw8d\",\"plexLogo\":\"c3WX2 fa3uy LHQ7Y\",\"buttonSeparator\":\"iJOQ4\",\"accountButton\":\"pipOk LOGsx IZ0cW x5jRQ\",\"left\":\"OuWyU FVw8d\",\"right\":\"crowu FVw8d\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { resolve } from 'app/js/adapters/adapters';\nimport { navigateBack } from 'app/js/stores/actions/appActions';\nimport selectAllSourcesSidebarServers from 'app/js/stores/selectors/server/selectAllSourcesSidebarServers';\nimport selectCloudServer from 'app/js/stores/selectors/server/selectCloudServer';\nimport createUserFeatureSelector from 'app/js/stores/selectors/user/createUserFeatureSelector';\nimport selectUser from 'app/js/stores/selectors/user/selectUser';\nimport { CLOUD_SERVER_ID } from 'app/js/utils/constants/serverIDs';\nimport * as features from 'app/js/utils/constants/user/features';\nimport log from 'app/js/utils/log/log';\nimport { isIOS } from 'app/js/utils/predicates/device';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport ErrorNavBar from 'app/js/views/v3/components/navbar/ErrorNavBar';\nimport NavBar from './NavBar';\n\nconst hasManualHistoryNavigation = isIOS();\n\nconst selectIsFullscreen = createSelector(\n  // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n  (appState) => appState.isFullscreen,\n  (isFullscreen) => isFullscreen\n);\n\nconst selectHasDownloads = createSelector(\n  // The downloads relation is not available on every platform. While the\n  // subscriptions relation is deferred.\n  // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n  (appState) => appState.downloads && appState.downloads.subscriptions,\n  (subscriptions) => (subscriptions ? subscriptions.length > 0 : false)\n);\n\nconst selectHasConnectedSidebarSource = createSelector(\n  selectAllSourcesSidebarServers,\n  (servers) => servers.some((server: any) => server.isConnected)\n);\n\nconst createShouldRenderSelector = () => {\n  return createSelector(\n    selectCloudServer,\n    selectHasDownloads,\n    selectHasConnectedSidebarSource,\n    (cloudServer, hasDownloads, hasConnectedSidebarSource) => {\n      if (\n        // Assume we're racing startup. Multiple navbar components throw if a\n        // cloudServer is not present.\n        !cloudServer\n      ) {\n        return false;\n      }\n\n      return (\n        cloudServer.isResolved || hasDownloads || hasConnectedSidebarSource\n      );\n    }\n  );\n};\n\nfunction createMapStateToProps() {\n  return createSelector(\n    // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n    (appState) => appState.history,\n    selectUser,\n    selectIsFullscreen,\n    createShouldRenderSelector(),\n    createUserFeatureSelector(features.BYPASS_PLEX_PASS_UPSELL_MODAL),\n\n    (\n      history,\n      user,\n      isFullscreen,\n      shouldRender,\n      shouldBypassPlexPassUpsellModal\n    ) => {\n      const serverEntityID = createEntityID(\n        entityTypes.SERVER,\n        CLOUD_SERVER_ID\n      );\n\n      return {\n        serverEntityID,\n        hasHistory: history.length > 1,\n        userThumb: user.thumb,\n        isFullscreen,\n        isAnonymousUser: !!user.anonymous,\n        canGoPremium: user.canGoPremium,\n        shouldBypassPlexPassUpsellModal,\n        canNavigateHistory: hasManualHistoryNavigation,\n        shouldRender,\n      };\n    }\n  );\n}\n\n// @ts-expect-error ts-migrate(6133) FIXME: 'props' is declared but its value is never read.\nfunction createMapDispatchToProps(dispatch: any, props: any) {\n  return {\n    // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n    onBackPress(event: any) {\n      dispatch(navigateBack());\n    },\n    // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n    onEnterFullscreen(event: any) {\n      resolve('fullscreenManager').enter();\n    },\n    // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n    onExitFullscreen(event: any) {\n      resolve('fullscreenManager').exit();\n    },\n  };\n}\n\nconst UnsafeNavBarConnector = connect(\n  createMapStateToProps,\n  createMapDispatchToProps\n  // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '(props: NavBarProps) => Element ... Remove this comment to see the full error message\n)(NavBar);\n\ntype NavBarConnectorState = any;\n\nclass NavBarConnector extends Component<{}, NavBarConnectorState> {\n  //\n  // Static\n\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n\n  //\n  // Lifecycle\n\n  constructor(props: {}) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  componentDidCatch(error: any) {\n    log.error(error);\n  }\n\n  //\n  // Render\n\n  render() {\n    return this.state.hasError ? <ErrorNavBar /> : <UnsafeNavBarConnector />;\n  }\n}\n\nexport default NavBarConnector;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport browser from 'app/js/utils/device/browser';\n\nexport default function isIOS(browser_ = browser) {\n  return browser_.platformID === 'ios';\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport {\n  IconBack,\n  IconHome,\n  IconMaximize,\n  IconMinimize,\n  IconPlexLogo,\n} from '@plex/react-chroma-icon';\nimport { Row } from '@plex/react-chroma-layout';\nimport { Align } from '@plex/react-chroma-types';\nimport selectUserLanguage from 'app/js/stores/selectors/user/selectUserLanguage';\nimport t from 'app/js/utils/t';\nimport Link from 'app/js/views/v3/components/core/buttons/Link';\nimport NavBarSignInButton from 'app/js/views/v3/components/navbar/NavBarSignInButton';\nimport NavBarSignUpButton from 'app/js/views/v3/components/navbar/NavBarSignUpButton';\nimport createKey from 'app/js/views/v3/helpers/createKey';\nimport NavBarAccountButton from './NavBarAccountButton';\nimport NavBarActivityButtonConnector from './NavBarActivityButtonConnector';\nimport NavBarIconButton from './NavBarIconButton';\nimport NavBarPlexPassButton from './NavBarPlexPassButton';\nimport styles from './NavBar.css';\n\ntype NavBarProps = {\n  className?: string;\n  serverEntityID: string;\n  hasHistory: boolean;\n  userThumb: string;\n  isAnonymousUser: boolean;\n  canGoPremium?: boolean;\n  shouldBypassPlexPassUpsellModal: boolean;\n  canEnterFullscreen?: boolean;\n  canExitFullscreen?: boolean;\n  canNavigateHistory?: boolean;\n  shouldRender: boolean;\n  onBackPress: (...args: any[]) => any;\n  onEnterFullscreen: (...args: any[]) => any;\n  onExitFullscreen: (...args: any[]) => any;\n};\n\nfunction NavBar(props: NavBarProps) {\n  const {\n    serverEntityID,\n    hasHistory,\n    userThumb,\n    canEnterFullscreen,\n    canExitFullscreen,\n    isAnonymousUser,\n    canGoPremium,\n    shouldBypassPlexPassUpsellModal,\n    canNavigateHistory,\n    shouldRender,\n    onBackPress,\n    onEnterFullscreen,\n    onExitFullscreen,\n  } = props;\n\n  const userLanguage = useSelector(selectUserLanguage);\n\n  if (!shouldRender) {\n    return null;\n  }\n\n  // Force re-render when language changes by changing the key. Language can be changed on the web client settings page where this NavBar is visible.\n  const key = createKey('NavBar', userLanguage);\n\n  return (\n    <div key={key} className={styles.container}>\n      <Row\n        align={Align.Left}\n        grow={true}\n        height=\"100%\"\n        verticalAlign={Align.Center}\n      >\n        <NavBarIconButton\n          className={styles.firstButton}\n          iconComponent={IconHome}\n          title={t('Home')}\n          // @ts-expect-error\n          to=\"#\"\n        />\n\n        <Link className={styles.plexLogo} to=\"#\">\n          <IconPlexLogo />\n        </Link>\n\n        {canNavigateHistory ? (\n          <NavBarIconButton\n            iconComponent={IconBack}\n            isDisabled={!hasHistory}\n            title={t('Back')}\n            onPress={onBackPress}\n          />\n        ) : null}\n      </Row>\n      <div className={styles.right}>\n        {canGoPremium ? (\n          <NavBarPlexPassButton\n            shouldBypassModal={shouldBypassPlexPassUpsellModal}\n          />\n        ) : null}\n\n        {isAnonymousUser ? (\n          <>\n            <NavBarSignInButton />\n            <NavBarSignUpButton />\n          </>\n        ) : null}\n\n        {canGoPremium || isAnonymousUser ? (\n          <div className={styles.buttonSeparator} />\n        ) : null}\n\n        {canExitFullscreen ? (\n          <NavBarIconButton\n            iconComponent={IconMinimize}\n            title={t('Exit Full Screen')}\n            onPress={onExitFullscreen}\n          />\n        ) : null}\n\n        {canEnterFullscreen ? (\n          <NavBarIconButton\n            iconComponent={IconMaximize}\n            title={t('Enter Full Screen')}\n            onPress={onEnterFullscreen}\n          />\n        ) : null}\n\n        {canEnterFullscreen || canExitFullscreen ? (\n          <div className={styles.buttonSeparator} />\n        ) : null}\n\n        <NavBarActivityButtonConnector />\n\n        <NavBarAccountButton\n          className={styles.accountButton}\n          serverEntityID={serverEntityID}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string | null | undefined' is not assignable... Remove this comment to see the full error message\n          userThumb={isAnonymousUser ? null : userThumb}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default NavBar;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { populateCloudServer } from 'app/js/stores/actions/appActions';\nimport selectCloudServer from 'app/js/stores/selectors/server/selectCloudServer';\nimport selectIsAnonymousUser from 'app/js/stores/selectors/user/selectIsAnonymousUser';\nimport EmptyPageContent from 'app/js/v4/core/ui/pages/components/empty/EmptyPageContent';\nimport Spinner from 'app/js/v4/core/ui/spinners/components/Spinner';\nimport routes from 'app/js/v4/routes/routes';\nimport UnreachablePage from 'app/js/views/v3/components/pages/empty/UnreachablePage';\nimport SignInLaunchPageConnector from 'app/js/views/v3/components/pages/signIn/SignInLaunchPageConnector';\nimport useEffectOnce from 'app/js/views/v3/helpers/hooks/useEffectOnce';\nimport usePrevious from 'app/js/views/v3/helpers/hooks/usePrevious';\n\nfunction LoginPage() {\n  const dispatch = useDispatch();\n\n  const isAnonymousUser = useSelector(selectIsAnonymousUser);\n  const {\n    available: isCloudServerAvailable,\n    isResolved: isCloudServerResolved,\n    isRejected: isCloudServerRejected,\n  } = useSelector(selectCloudServer);\n\n  const previousIsCloudServerAvailable = usePrevious(isCloudServerAvailable);\n\n  // Wait until `available` is known. Resetting the user cancels a\n  // pending plex.tv connection test which introduces a `null` value for\n  // `available` immediately before this function runs.\n  const isAvailableKnown =\n    isCloudServerAvailable === true || isCloudServerAvailable === false;\n  const isPreviousAvailableUnknown =\n    previousIsCloudServerAvailable !== true &&\n    previousIsCloudServerAvailable !== false;\n\n  useEffectOnce(() => {\n    dispatch(populateCloudServer());\n  });\n\n  useEffect(() => {\n    if (isPreviousAvailableUnknown && isAvailableKnown) {\n      dispatch(populateCloudServer());\n    }\n  }, [dispatch, isAvailableKnown, isPreviousAvailableUnknown]);\n\n  if (isCloudServerResolved) {\n    if (isAnonymousUser) {\n      // @ts-expect-error FIXME: Remove this comment to see the full error message\n      return <SignInLaunchPageConnector />;\n    } else {\n      return <Redirect to={routes.home} />;\n    }\n  }\n\n  if (isCloudServerRejected && isAvailableKnown) {\n    if (isCloudServerAvailable) {\n      // @ts-expect-error FIXME: Remove this comment to see the full error message\n      return <SignInLaunchPageConnector />;\n    } else {\n      return <UnreachablePage />;\n    }\n  }\n\n  return (\n    <EmptyPageContent>\n      <Spinner />\n    </EmptyPageContent>\n  );\n}\n\nexport default LoginPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport PageScroller from './PageScroller';\nimport styles from './PageContent.css';\n\ntype PageContentProps = {\n  children?: React.ReactNode;\n  innerClassName?: string;\n};\n\nfunction PageContent({\n  children,\n  innerClassName,\n  ...otherProps\n}: PageContentProps) {\n  return (\n    <PageScroller className={styles.pageContent} {...otherProps}>\n      <div className={innerClassName}>{children}</div>\n    </PageScroller>\n  );\n}\n\nPageContent.defaultProps = {\n  innerClassName: styles.innerPageContent,\n};\n\nexport default PageContent;\n","// extracted by mini-css-extract-plugin\nexport default {\"pageContent\":\"t0i7E\",\"innerPageContent\":\"ZdrJU\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React from 'react';\nimport EmptyPage, {\n  EmptyPageProps,\n} from 'app/js/views/v3/components/pages/empty/EmptyPage';\nimport * as scrollDirections from 'app/js/views/v3/helpers/props/scrollDirections';\nimport styles from 'app/js/views/v3/components/pages/empty/InnerEmptyPage.css';\n\n// An empty page container that adjusts for the `PageHeader` and scrollbar. This\n// keeps spinners and content consistently positioned.\n\ntype InnerEmptyPageProps = Omit<\n  EmptyPageProps,\n  'contentClassName' | 'scrollDirection'\n>;\n\nfunction InnerEmptyPage(props: InnerEmptyPageProps) {\n  return (\n    <EmptyPage\n      className={styles.innerEmptyPage}\n      contentClassName={styles.innerEmptyPageContent}\n      scrollDirection={scrollDirections.NONE}\n      {...props}\n    />\n  );\n}\n\nexport default InnerEmptyPage;\n","// extracted by mini-css-extract-plugin\nexport default {\"innerEmptyPage\":\"DeXf3 BmNjQ\",\"innerEmptyPageContent\":\"g4Fv4 Ocumg\"};","/* eslint-plugin-disable @typescript-eslint */\n\nimport React, { Component } from 'react';\nimport { SIGN_OUT } from 'app/js/utils/constants/metrics/metricsPages';\nimport Spinner from 'app/js/views/v3/components/core/Spinner';\nimport PageConnector from 'app/js/views/v3/components/pages/PageConnector';\nimport PageContent from 'app/js/views/v3/components/pages/PageContent';\nimport InnerEmptyPage from 'app/js/views/v3/components/pages/empty/InnerEmptyPage';\n\ntype SignOutPageProps = {\n  isSignedIn: boolean;\n  onSignOut: (...args: any[]) => any;\n};\n\ntype SignOutPageState = any;\n\nclass SignOutPage extends Component<SignOutPageProps, SignOutPageState> {\n  //\n  // Static\n\n  static getDerivedStateFromProps(nextProps: any, prevState: any) {\n    return nextProps.isSignedIn && !prevState.isSigningOut\n      ? { isSigningOut: true }\n      : null;\n  }\n\n  //\n  // Lifecycle\n\n  constructor(props: any, context: any) {\n    super(props, context);\n\n    this.state = { isSigningOut: false };\n  }\n\n  componentDidMount() {\n    if (this.state.isSigningOut) {\n      this.props.onSignOut();\n    }\n  }\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'prevProps' is declared but its value is never rea... Remove this comment to see the full error message\n  componentDidUpdate(prevProps: SignOutPageProps, prevState: SignOutPageState) {\n    if (this.state.isSigningOut && !prevState.isSigningOut) {\n      this.props.onSignOut();\n    }\n  }\n\n  //\n  // Render\n\n  render() {\n    // The `SignOutView` parents this component in a `FullPage`.\n    return (\n      <PageConnector metricsPage={SIGN_OUT}>\n        <PageContent>\n          <InnerEmptyPage>\n            <Spinner />\n          </InnerEmptyPage>\n        </PageContent>\n      </PageConnector>\n    );\n  }\n}\n\nexport default SignOutPage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport commands from 'app/js/commands/commands';\nimport { redirectToRoute } from 'app/js/stores/actions/appActions';\nimport selectUser from 'app/js/stores/selectors/user/selectUser';\nimport SignOutPage from './SignOutPage';\n\nconst mapStateToProps = createSelector(selectUser, ({ isSignedIn }) => ({\n  isSignedIn,\n}));\n\nfunction createMapDispatchToProps(dispatch: any) {\n  return {\n    onSignOut() {\n      commands.execute('signOut').then(() => {\n        dispatch(redirectToRoute({ route: 'login', replace: true }));\n      });\n    },\n  };\n}\n\nexport default connect(mapStateToProps, createMapDispatchToProps)(SignOutPage);\n","import React, { ReactElement, Suspense } from 'react';\nimport { generatePath, Redirect, Route, Switch } from 'react-router-dom';\nimport PageErrorBoundary from 'app/js/v4/core/ui/pages/components/PageErrorBoundary';\nimport EmptyPageContent from 'app/js/v4/core/ui/pages/components/empty/EmptyPageContent';\nimport Spinner from 'app/js/v4/core/ui/spinners/components/Spinner';\nimport FullPageBackground from 'app/js/v4/features/background/FullPageBackground';\nimport useNavigationHistory from 'app/js/v4/features/navigationHistory/hooks/useNavigationHistory';\nimport ServerAwaitPage from 'app/js/v4/features/serverSettings/ServerAwaitPage';\nimport ServerSetupViewPage from 'app/js/v4/features/serverSetup/components/ServerSetupViewPage';\nimport routes from 'app/js/v4/routes/routes';\nimport NavBarConnector from 'app/js/views/v3/components/navbar/NavBarConnector';\nimport FullPage from 'app/js/views/v3/components/pages/FullPage';\nimport LoginPage from 'app/js/views/v3/components/pages/LoginPage';\nimport NotFoundErrorPage from 'app/js/views/v3/components/pages/empty/NotFoundErrorPage';\nimport SignInLaunchPageConnector from 'app/js/views/v3/components/pages/signIn/SignInLaunchPageConnector';\nimport SignOutPageConnector from 'app/js/views/v3/components/pages/signOut/SignOutPageConnector';\nimport useGarbageCollectEntities from './utils/hooks/useGarbageCollectEntities';\n\nconst InfoViewPage = React.lazy(\n  () =>\n    import(\n      /* webpackPrefetch: true */\n      'app/js/v4/features/info/components/InfoViewPage'\n    )\n);\nconst LogsViewPage = React.lazy(\n  () =>\n    import(\n      /* webpackPrefetch: true */\n      'app/js/v4/features/logs/components/LogsViewPage'\n    )\n);\nconst ServerUpdateViewPage = React.lazy(\n  () =>\n    import(\n      /* webpackPrefetch: true */\n      'app/js/v4/features/serverUpdate/components/ServerUpdateViewPage'\n    )\n);\nconst ServerSettingsViewPage = React.lazy(\n  () =>\n    import(\n      /* webpackPrefetch: true */\n      'app/js/v4/features/serverSettings/components/ServerSettingsViewPage'\n    )\n);\n\nexport const CONTENT_CLASS_NAMES = 'scroll-container dark-scrollbar';\n\nexport default function App(): ReactElement {\n  useGarbageCollectEntities();\n  useNavigationHistory();\n\n  const serverDashboardRoute = generatePath(routes.serverSettings, {\n    settingsSection: 'status',\n    settingsGroup: 'server-dashboard',\n  });\n\n  return (\n    <>\n      <FullPageBackground />\n\n      <PageErrorBoundary>\n        <Suspense\n          fallback={\n            <FullPage>\n              <EmptyPageContent>\n                <Spinner />\n              </EmptyPageContent>\n            </FullPage>\n          }\n        >\n          <Switch>\n            <Redirect\n              exact={true}\n              from={routes.home}\n              to={serverDashboardRoute}\n            />\n\n            <Redirect\n              exact={true}\n              from={routes.serverSettingsPMS}\n              to={serverDashboardRoute}\n            />\n\n            <Route\n              component={ServerSetupViewPage}\n              exact={true}\n              path={routes.serverSetup}\n            />\n\n            <Route>\n              <div>\n                <NavBarConnector />\n              </div>\n\n              <div className={CONTENT_CLASS_NAMES}>\n                {/* This error boundary and suspense spinner ensures navbar is displayed at all times */}\n                <PageErrorBoundary>\n                  <Suspense\n                    fallback={\n                      <FullPage>\n                        <EmptyPageContent>\n                          <Spinner />\n                        </EmptyPageContent>\n                      </FullPage>\n                    }\n                  >\n                    <Switch>\n                      <Route\n                        component={ServerAwaitPage}\n                        exact={true}\n                        path={routes.serverAwait}\n                      />\n\n                      <Route exact={true} path={routes.logout}>\n                        <FullPage>\n                          <SignOutPageConnector />\n                        </FullPage>\n                      </Route>\n\n                      <Route exact={true} path={routes.login}>\n                        <FullPage>\n                          <LoginPage />\n                        </FullPage>\n                      </Route>\n\n                      <Route exact={true} path={routes.signUp}>\n                        <FullPage>\n                          {/* @ts-expect-error FIXME: Remove this comment to see the full error message */}\n                          <SignInLaunchPageConnector signUp={true} />\n                        </FullPage>\n                      </Route>\n\n                      <Route\n                        component={InfoViewPage}\n                        exact={true}\n                        path={routes.info}\n                      />\n\n                      <Route\n                        component={LogsViewPage}\n                        exact={true}\n                        path={routes.logs}\n                      />\n\n                      <Route\n                        component={ServerUpdateViewPage}\n                        exact={true}\n                        path={routes.serverUpdate}\n                      />\n\n                      <Route\n                        component={ServerSettingsViewPage}\n                        exact={true}\n                        path={routes.serverSettings}\n                      />\n\n                      <Route component={NotFoundErrorPage} />\n                    </Switch>\n                  </Suspense>\n                </PageErrorBoundary>\n              </div>\n            </Route>\n          </Switch>\n        </Suspense>\n      </PageErrorBoundary>\n    </>\n  );\n}\n","import { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { garbageCollectEntities } from 'app/js/stores/actions/appActions';\n\nexport default function useGarbageCollectEntities(): void {\n  const dispatch = useDispatch();\n  const location = useLocation();\n\n  useEffect(() => {\n    dispatch(garbageCollectEntities());\n  }, [location, dispatch]);\n}\n","import { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { updateNavigationHistory } from 'app/js/stores/actions/appActions';\n\nexport default function useNavigationHistory(): void {\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  useEffect(() => {\n    dispatch(\n      updateNavigationHistory({\n        location: {\n          pathname: history.location.pathname,\n          search: history.location.search,\n        },\n      })\n    );\n\n    return history.listen((newLocation) => {\n      dispatch(\n        updateNavigationHistory({\n          location: {\n            pathname: newLocation.pathname,\n            search: newLocation.search,\n          },\n        })\n      );\n    });\n  }, [dispatch, history]);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport log from 'app/js/utils/log/log';\nimport path from 'app/js/utils/url/path';\n\n// CORS requests with custom headers require an OPTIONS preflight request.\n// Moving custom headers to the query string can avoid the preflight. In\n// addition, warn against requests that will require an unnecessary preflight.\n// See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS\n\nconst blacklistedMethods = {\n  PUT: true,\n  DELETE: true,\n};\n\nconst allowedHeaders = {\n  Accept: true,\n  'Accept-Language': true,\n  'Content-Language': true,\n  'Content-Type': true,\n};\n\nconst contentTypeRegex =\n  /^(text\\/plain|multipart\\/form-data|application\\/x-www-form-urlencoded)/;\nconst plexHeaderRegex = /(^X-Plex-[^=]+)/i;\nconst urlWithQueryRegex = /(^[^?]+)\\?(.+$)/;\n\nexport default function simpleCORSFilter(options: any) {\n  const {\n    type,\n    contentType,\n    headers,\n    allowHeadersInUrl,\n    allowBlacklistedMethodHeaders,\n  } = options;\n\n  // Only allow headers to be moved to the url with requests to plex.tv or\n  // Plex Media Server. Other clients may not support headers as query string\n  // arguments.\n\n  if (!allowHeadersInUrl) {\n    return;\n  }\n\n  // Older server versions can't handle empty request headers for some methods.\n  // See: https://github.com/plexinc/plex-media-server/issues/5315\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  if (blacklistedMethods[type] && !allowBlacklistedMethodHeaders) {\n    return;\n  }\n\n  const plexHeaders = {};\n  let hasPlexHeaders = false;\n\n  _.each(headers, (value, key) => {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    if (allowedHeaders[key]) {\n      return;\n    }\n\n    if (plexHeaderRegex.test(key)) {\n      hasPlexHeaders = true;\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      plexHeaders[key] = value;\n      delete headers[key];\n    } else {\n      log.warn(\n        'Did not move header \"%s\" to query string. This can result in an unnecessary OPTIONS preflight request.',\n        key\n      );\n    }\n  });\n\n  if (hasPlexHeaders) {\n    const searchMatch = options.url.match(urlWithQueryRegex);\n    const [, origin, query] = searchMatch || [null, options.url, null];\n\n    // Capture and preserve existing url params first, unless they're plex\n    // header params which get stripped out and appended last.\n    const parts = query ? query.split('&') : [];\n    const [plexParams, nonPlexParams] = _.partition(parts, (part) =>\n      plexHeaderRegex.test(part)\n    );\n\n    // Add data not already encoded in url params for GET requests.\n    const data = options.data;\n    if (type === 'GET' && data) {\n      nonPlexParams.push(_.isString(data) ? data : path.stringifyParams(data));\n      delete options.data;\n    }\n\n    // Add plex headers that do not already exist in url params.\n    plexParams.forEach((param) => {\n      const match = param.match(plexHeaderRegex);\n      if (match) {\n        // Remove header parameters already listed in url params.\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        delete plexHeaders[match[1]];\n      }\n    });\n\n    const encodedPlexHeaders = path.stringifyParams(plexHeaders);\n    if (encodedPlexHeaders) {\n      plexParams.push(encodedPlexHeaders);\n    }\n\n    options.url = `${origin}?${nonPlexParams.concat(plexParams).join('&')}`;\n  }\n\n  if (contentType && !contentTypeRegex.test(contentType)) {\n    // See https://github.com/plexinc/plex-web-client/issues/2940\n    log.warn(\n      'Sending %s request with Content-Type \"%s\". This can result in an unnecessary OPTIONS preflight request.',\n      type,\n      contentType\n    );\n  }\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport simpleCORSFilter from 'app/js/utils/xhr/simpleCORSFilter';\nimport xhrTracker from 'app/js/utils/xhr/xhrTracker';\n\nexport default function ajaxInitializer() {\n  // This filter makes all requests simple enough so they no longer require an\n  // OPTIONS preflight to the server.\n  $.ajaxPrefilter(simpleCORSFilter);\n\n  xhrTracker.startListening();\n\n  return $.Deferred().resolve().promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport alerts from 'app/js/models/alerts';\nimport capabilities from 'app/js/utils/device/capabilities';\nimport parser2 from 'app/js/utils/parser2';\nimport path from 'app/js/utils/url/path';\n\nfunction alertsInitializer() {\n  if (!capabilities.hasReplaceState) {\n    return $.Deferred().resolve().promise();\n  }\n\n  const deferred = $.Deferred();\n  const location = window.location;\n  // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n  const parsedQuery = parser2.parseQueryString(location.search);\n\n  let parsedAlerts;\n\n  try {\n    parsedAlerts = JSON.parse(parsedQuery.alerts);\n    delete parsedQuery.alerts;\n  } catch (error) {\n    // Ignore any errors from parsing JSON\n  }\n\n  if (parsedAlerts) {\n    alerts.push(...parsedAlerts);\n    const url = `${path.join(\n      [`${location.origin}${location.pathname}`],\n      parsedQuery\n    )}${location.hash}`;\n\n    window.history.replaceState({}, '', url);\n  }\n\n  return deferred.resolve().promise();\n}\n\nexport default alertsInitializer;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport storageAdapter from 'app/js/adapters/storageAdapter';\nimport log from 'app/js/utils/log/log';\nimport whenEach from 'app/js/utils/promise/whenEach';\nimport random from 'app/js/utils/string/random';\n\nfunction isValidClientID(clientID: any) {\n  return _.isString(clientID) && clientID.trim().length > 0;\n}\n\nfunction generateClientID(appModel: any, name: any) {\n  // Generate a random client identifier and save\n  // in storage so it persists for future sessions.\n  const clientID = random();\n  log('[appModelInitializer] Generating new %s [%s]', name, clientID);\n  appModel.set(name, clientID);\n  return storageAdapter.set(name, clientID);\n}\n\n// Grab the client identifier so we can include it in all xhr requests. Returns\n// a promise that will resolve once a clientID has been successfully loaded\n// (into the appModel) and stored (in the storageAdapter). The promise will fail\n// if writing to storage fails. In either case, the value of the promise is\n// unspecified.\nfunction loadClientID(appModel: any, name: any) {\n  // It may have already been populated by a platform initializer or may need to\n  // be pulled out of storage. Any value defined in the appModel always takes\n  // precedence over possibly stale stored values.\n  let promise;\n  const currentClientID = appModel.get(name);\n\n  if (isValidClientID(currentClientID)) {\n    promise = storageAdapter.set(name, currentClientID);\n  } else {\n    promise = storageAdapter.get(name);\n    promise = promise.then(\n      (clientID: any) => {\n        if (isValidClientID(clientID)) {\n          appModel.set(name, clientID);\n        } else {\n          log.error(\n            '[appModelInitializer] Invalid %s found in storage [%s]',\n            name,\n            currentClientID\n          );\n          return generateClientID(appModel, name);\n        }\n      },\n      () => {\n        // This is either an actual error reading from storage or an indication\n        // that there is no stored value yet (such as first-run). It is not\n        // logged at error level since we cannot distinguish.\n        log('[appModelInitializer] Failed to read %s from storage', name);\n        return generateClientID(appModel, name);\n      }\n    );\n  }\n\n  return promise;\n}\n\nfunction loadSkipSignInFlag(appModel: any) {\n  const promise = storageAdapter.get('skipSignIn');\n\n  promise.always((value: any) => {\n    appModel.set('skipSignIn', value === '1');\n  });\n\n  return promise;\n}\n\nexport default function appModelInitializer() {\n  const appModel = resolve('appModel');\n\n  return whenEach([\n    loadClientID(appModel, 'clientID'),\n    loadClientID(appModel, 'anonymousClientID'),\n    loadSkipSignInFlag(appModel),\n  ]);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport ServerRetryManager from './ServerRetryManager';\n\nconst CloudServerRetryManager = ServerRetryManager.extend({\n  //\n  // Control\n\n  supportsRetry(server: any) {\n    return server.get('isCloud');\n  },\n});\n\nexport default CloudServerRetryManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport * as adapters from 'app/js/adapters/adapters';\nimport ConnectionModel from 'app/js/models/server/ConnectionModel';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport capabilities from 'app/js/utils/device/capabilities';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\nimport parser from 'app/js/utils/parser';\nimport path from 'app/js/utils/url/path';\nimport xhrTracker from 'app/js/utils/xhr/xhrTracker';\n\nconst SOCKET_PING_DELAY = 30000;\nconst POLL_TIMEOUT = 30000;\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst CloudServerEventConnection = BaseClass.extend({\n  lastModified: null,\n  eTag: null,\n  mixins: eventMixin,\n\n  //\n  // Properties\n\n  url: function () {\n    const appModel = adapters.resolve('appModel');\n    const user = appModel.get('user');\n    const subscriptionPath =\n      '/sub/' +\n      this.requestType +\n      '/' +\n      user.id +\n      '/' +\n      appModel.get('clientID');\n\n    const connection = new ConnectionModel({\n      scheme: this.requestType === 'websockets' ? 'wss' : 'https',\n      address: 'pubsub.plex.tv',\n    });\n\n    const url = this.server.resolveUrl(subscriptionPath, {\n      connection: connection,\n      appendToken: true,\n    });\n\n    return url;\n  },\n\n  //\n  // Init\n\n  initialize: function (options: any) {\n    _.bindAll(\n      this,\n      'onSocketOpen',\n      'onSocketClose',\n      'onSocketError',\n      'onSocketMessage',\n      'onPingTimeout',\n      'onPollSuccess',\n      'onPollError'\n    );\n\n    this.server = options.server;\n  },\n\n  //\n  // Control\n\n  open: function () {\n    if (this.socket || this.pollRequest) {\n      this.close();\n    }\n\n    if (!capabilities.hasWebSocket) {\n      return this.poll();\n    }\n\n    this._deferred = $.Deferred();\n    this.requestType = 'websockets';\n    this.socket = new window.WebSocket(_.result(this, 'url'));\n\n    this.socket.onopen = this.onSocketOpen;\n    this.socket.onclose = this.onSocketClose;\n    this.socket.onerror = this.onSocketError;\n    this.socket.onmessage = this.onSocketMessage;\n\n    return this._deferred.promise();\n  },\n\n  close: function () {\n    if (this.pollRequest) {\n      xhrTracker.abort(this.pollRequest.rid);\n      this.pollRequest = null;\n    }\n\n    if (this._deferred && this._deferred.state() === 'pending') {\n      this._deferred.reject();\n    }\n\n    if (this.socket) {\n      this.cancelPing();\n\n      this.socket.onopen = null;\n      this.socket.onclose = null;\n      this.socket.onerror = null;\n      this.socket.onmessage = null;\n      this.socket.close();\n      this.socket = null;\n    }\n  },\n\n  schedulePing: function () {\n    this.cancelPing();\n    this._pingTimeoutID = window.setTimeout(\n      this.onPingTimeout,\n      SOCKET_PING_DELAY\n    );\n  },\n\n  cancelPing: function () {\n    if (this._pingTimeoutID) {\n      window.clearTimeout(this._pingTimeoutID);\n      this._pingTimeoutID = null;\n    }\n  },\n\n  poll: function () {\n    this.requestType = 'longpolling';\n    this.pollUrl = path.join(_.result(this, 'url'), {\n      ttl: String(POLL_TIMEOUT / 1000) + 's',\n    });\n\n    const xhrOptions = this.server.getXHROptions(this.pollUrl, {\n      timeout: POLL_TIMEOUT + 5000,\n    });\n\n    xhrOptions.headers['If-Modified-Since'] = this.lastModified\n      ? this.lastModified\n      : 'Thu, 01 Jan 1970 00:00:00 GMT';\n\n    if (this.eTag) {\n      xhrOptions.headers['If-None-Match'] = this.eTag;\n    }\n\n    this.pollRequest = $.ajax(xhrOptions)\n      .done(this.onPollSuccess)\n      .fail(this.onPollError);\n\n    return this.pollRequest.promise();\n  },\n\n  handleResponse: function (response: any) {\n    if (!response) {\n      return;\n    }\n\n    const message = parser.parseXML(response);\n\n    if (_.isObject(message)) {\n      const commandName = message.command;\n      dispatcher.trigger(`cloudServer:${commandName}`, message);\n    }\n  },\n\n  //\n  // Listeners\n\n  onSocketOpen: function (event: any) {\n    this.server.set('hasEventConnection', true);\n    this.trigger('open', this.server, event);\n    this._deferred.resolve(this.server, event);\n\n    this.schedulePing();\n  },\n\n  onSocketClose: function (event: any) {\n    this.close();\n\n    this.server.set('hasEventConnection', false);\n    this.trigger('close', this.server, event);\n    this._deferred.reject(this.server, event);\n  },\n\n  onSocketError: function (event: any) {\n    this.close();\n\n    this.trigger('error', this.server, event);\n    this._deferred.reject(this.server, event);\n  },\n\n  onSocketMessage: function (event: any) {\n    this.handleResponse(event.data);\n  },\n\n  onPingTimeout: function () {\n    this._pingTimeoutID = null;\n\n    this.socket.send('hello');\n    this.schedulePing();\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'textStatus' is declared but its value is never re... Remove this comment to see the full error message\n  onPollSuccess: function (response: any, textStatus: any, jqXHR: any) {\n    this.trigger('open', this.server, response);\n\n    this.lastModified = jqXHR.getResponseHeader('Last-Modified');\n    this.eTag = jqXHR.getResponseHeader('ETag');\n\n    this.handleResponse(response);\n    this.poll();\n  },\n\n  onPollError: function (xhr: any, textStatus: any) {\n    if (textStatus === 'abort') {\n      // If the poll request times out because the ttl was not respected for\n      // some reason, keep polling.\n      this.poll();\n    } else if (!this.pollRequest.aborting) {\n      this.trigger('error', this.server, xhr);\n    }\n  },\n});\n\nexport default CloudServerEventConnection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport CloudServerRetryManager from 'app/js/managers/CloudServerRetryManager';\nimport ServerEventManager from 'app/js/managers/ServerEventManager';\nimport capabilities from 'app/js/utils/device/capabilities';\nimport CloudServerEventConnection from 'app/js/utils/pubsub/CloudServerEventConnection';\n\nfunction isValidServer(server: any) {\n  return server.get('isCloud');\n}\n\nexport default function cloudServerEventInitializer() {\n  let serverEventManager: any;\n\n  if (capabilities.hasWebSocket) {\n    serverEventManager = new ServerEventManager({\n      name: 'CloudServerEventManager',\n      appModel: resolve('appModel'),\n      isValidServer,\n      supportsLongPolling: true,\n      allowMultipleConnections: true,\n      ServerEventConnection: CloudServerEventConnection,\n      ServerRetryManager: CloudServerRetryManager,\n    });\n\n    serverEventManager.start();\n  }\n\n  return $.Deferred().resolve().promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\n\nfunction testServerConnectionCommand(options: any) {\n  return resolve('serverConnectionTestManager').queueConnectionTest(options);\n}\n\nexport default testServerConnectionCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\n\nfunction abortServerConnectionTestCommand(options: any) {\n  return resolve('serverConnectionTestManager').abortConnectionTest(options);\n}\n\nexport default abortServerConnectionTestCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport log from 'app/js/utils/log/log';\nimport parser2 from 'app/js/utils/parser2';\n\nfunction populateServerIdentityCommand(options: any) {\n  const { server, connection } = options;\n\n  if (server.id) {\n    return $.Deferred().resolve(server.id).promise();\n  }\n\n  const url = server.resolveUrl('/identity', { connection: connection });\n  const xhrOptions = _.extend(server.getXHROptions(url), {\n    timeout: server.connectionTestTimeout,\n  });\n\n  log(\n    `[Identity] Requesting the machine identifier of ${server.get(\n      'debugName'\n    )} at ${url}`\n  );\n\n  let promise = $.ajax(xhrOptions).promise();\n\n  promise = promise.then((response) => {\n    const deferred = $.Deferred();\n    const json = parser2.parseXML(response);\n    const machineIdentifier = json && json.machineIdentifier;\n\n    if (machineIdentifier) {\n      log(\n        `[Identity] Machine identifier found for ${server.get(\n          'debugName'\n        )}: ${machineIdentifier}`\n      );\n\n      if (!server.collection || server.collection.get(machineIdentifier)) {\n        deferred.resolve(machineIdentifier);\n      } else {\n        // If there is not an existing server to merge with, wait for additional\n        // resources before setting this identifier. Otherwise, a\n        // `populateServer` call for this server may be rejected prematurely.\n\n        // Use `populateServer` here so the callback is not invoked until after\n        // the `ServerManager` has a chance to fetch resources. Otherwise, there\n        // will be a duplicate fetch.\n\n        server.collection\n          .populateServer({ isCloud: true })\n          .done((cloudServer: any) => {\n            cloudServer\n              .get('resources')\n              .populate()\n              .always(() => {\n                deferred.resolve(machineIdentifier);\n              });\n          });\n\n        // `populateServer` will not reject until an unidentified server is\n        // resolved or rejected. Handle failures directly from the cloud server\n        // to avoid this.\n\n        server.collection\n          .findServer({ isCloud: true })\n          .done((cloudServer: any) => {\n            cloudServer.populate().fail(() => {\n              deferred.resolve(machineIdentifier);\n            });\n          })\n          .fail(() => {\n            deferred.resolve(machineIdentifier);\n          });\n      }\n    } else {\n      deferred.reject();\n    }\n\n    return deferred.promise();\n  });\n\n  promise.fail(() => {\n    log.warn(\n      `[Identity] Machine identifier not found for ${server.get(\n        'debugName'\n      )} at ${url}`\n    );\n  });\n\n  return promise;\n}\n\nexport default populateServerIdentityCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport LibraryFailureModal from 'app/js/views/modals/LibraryFailureModal';\n\nfunction refreshMetadataCommand(options: any) {\n  let item: any;\n  let items;\n  if (options.item) {\n    item = options.item;\n    items = [item];\n  } else {\n    items = options.items;\n    item = items[0];\n  }\n\n  // eslint-disable-next-line prefer-spread\n  return $.when\n    .apply(\n      $,\n      _.map(items, function (item_) {\n        const url = '/library/metadata/' + item_.id + '/refresh';\n        const xhrOptions = _.extend(item.server.getXHROptions(url), {\n          type: 'PUT',\n        });\n\n        return $.ajax(xhrOptions).promise();\n      })\n    )\n    .fail(function (xhr) {\n      if (xhr.status === 503) {\n        dispatcher.trigger(\n          'show:modal',\n          new LibraryFailureModal({ model: item.server })\n        );\n      } else {\n        dispatcher.trigger('show:alert', {\n          type: 'error',\n          message: t('There was a problem refreshing.'),\n        });\n      }\n    });\n}\n\nexport default refreshMetadataCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\n\nfunction analyzeItemsCommand(options: any) {\n  const items = options.items;\n\n  // eslint-disable-next-line prefer-spread\n  return $.when.apply(\n    $,\n    _.map(items, function (item) {\n      const url = '/library/metadata/' + item.id + '/analyze';\n      const xhrOptions = _.extend(item.server.getXHROptions(url), {\n        type: 'PUT',\n      });\n\n      return $.ajax(xhrOptions).promise();\n    })\n  );\n}\n\nexport default analyzeItemsCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction analyzeSectionCommand(options: any) {\n  const deferred = $.Deferred();\n  const section = options.section;\n  const url = '/library/sections/' + section.id + '/analyze';\n  const xhrOptions = _.extend(section.server.getXHROptions(url), {\n    type: 'PUT',\n  });\n\n  function analyzeSection() {\n    const xhrDeferred = $.ajax(xhrOptions);\n\n    xhrDeferred.done(function () {\n      deferred.resolve();\n    });\n\n    xhrDeferred.fail(function (xhr) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem analyzing the library.'),\n      });\n\n      deferred.reject(xhr);\n    });\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    xhrDeferred.always(function (xhr) {\n      confirmModal.hide();\n    });\n  }\n\n  const confirmModal = new ConfirmModal({\n    title: t('Analyze Library'),\n    message: t(\n      'Analyzes all the media files in the library. The analysis captures information about the media which helps Plex decide how to optimally play back the media.'\n    ),\n    confirmLabel: t('Analyze'),\n    cancelLabel: t('Cancel'),\n    async: true,\n  });\n\n  const confirmPromise = confirmModal.promise;\n  confirmPromise.done(analyzeSection);\n  confirmPromise.fail(function () {\n    deferred.reject();\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return deferred.promise();\n}\n\nexport default analyzeSectionCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\n\nfunction unmatchCommand(options: any) {\n  const item = options.item;\n  const url = '/library/metadata/' + item.id + '/unmatch';\n  const xhrOptions = _.extend(item.server.getXHROptions(url), { type: 'PUT' });\n\n  const deferred = $.ajax(xhrOptions);\n\n  deferred.fail(function () {\n    dispatcher.trigger('show:alert', {\n      type: 'error',\n      message: t('There was a problem unmatching this item.'),\n    });\n  });\n\n  return deferred.promise();\n}\n\nexport default unmatchCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport { navigateBack } from 'app/js/stores/actions/appActions';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction splitApartCommand(options: any) {\n  const deferred = $.Deferred();\n  const item = options.item;\n  const url = '/library/metadata/' + item.id + '/split';\n\n  function splitApart() {\n    const xhrOptions = _.extend(item.server.getXHROptions(url), {\n      type: 'PUT',\n    });\n\n    const xhrDeferred = $.ajax(xhrOptions);\n\n    xhrDeferred.done(function () {\n      const type = item.get('type');\n      let locations;\n\n      if (type === 'show' || type === 'artist' || type === 'album') {\n        locations = 'Location';\n      } else {\n        locations = 'Media';\n      }\n\n      item.set(locations, item.get(locations).slice(0, 1));\n\n      if (!options.skipNavigate) {\n        resolve('appStore').dispatch(navigateBack());\n      }\n\n      deferred.resolve();\n    });\n\n    xhrDeferred.fail(function (xhr) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem splitting this item apart.'),\n      });\n\n      deferred.reject(xhr);\n    });\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    xhrDeferred.always(function (xhr) {\n      confirmModal.hide();\n    });\n  }\n\n  const confirmModal = new ConfirmModal({\n    title: t('Split Apart'),\n    message: t('Are you sure you want to split this item apart?'),\n    async: true,\n  });\n\n  const confirmPromise = confirmModal.promise;\n  confirmPromise.done(splitApart);\n  confirmPromise.fail(function () {\n    deferred.reject();\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return deferred.promise();\n}\n\nexport default splitApartCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction mergeCommand(options: any) {\n  const deferred = $.Deferred();\n  const item = options.item;\n  const ids = _.pluck(options.items, 'id').join(',');\n  const url = '/library/metadata/' + item.id + '/merge?ids=' + ids;\n  const xhrOptions = _.extend(item.server.getXHROptions(url), { type: 'PUT' });\n\n  function merge() {\n    const xhrDeferred = $.ajax(xhrOptions);\n\n    xhrDeferred.done(function () {\n      deferred.resolve();\n    });\n\n    xhrDeferred.fail(function (xhr) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem merging these items.'),\n      });\n\n      deferred.reject(xhr);\n    });\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    xhrDeferred.always(function (xhr) {\n      confirmModal.hide();\n    });\n  }\n\n  const confirmModal = new ConfirmModal({\n    title: t('Merge'),\n    message: t('Are you sure you want to merge these items together?'),\n    async: true,\n  });\n\n  const confirmPromise = confirmModal.promise;\n  confirmPromise.done(merge);\n  confirmPromise.fail(function () {\n    deferred.reject();\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return deferred.promise();\n}\n\nexport default mergeCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport commands from 'app/js/commands/commands';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction deletePromises(items: any, skipRedirect: any) {\n  return _.map(items, function (item) {\n    return commands.execute('deleteItem', {\n      item,\n      skipRedirect,\n    });\n  });\n}\nfunction deleteItemsCommand(options: any) {\n  let items = options.items;\n  let item = options.item;\n  const skipConfirmation = options.skipConfirmation;\n  const skipRedirect = options.skipRedirect;\n  // Ensure we have an items array and a specific item to work with.\n  if (!items) {\n    items = [item];\n  }\n  if (!item) {\n    item = _.first(items);\n  }\n  // If this item has multiple media items, allow the user to pick which\n  // media item to delete.\n  const mediaItems = item.get('Media');\n  if (\n    items.length === 1 &&\n    mediaItems.length > 1 &&\n    !item.get('remoteMedia') &&\n    item.server.supports('specificMediaDeletion')\n  ) {\n    return commands.execute('deleteMediaItem', { item: item });\n  }\n  let promise;\n  if (skipConfirmation) {\n    // eslint-disable-next-line prefer-spread\n    promise = $.when.apply($, deletePromises(items, skipRedirect));\n  } else {\n    const confirmModal = showConfirmation({ item: item, items: items });\n    const confirmPromise = confirmModal.promise;\n    promise = confirmPromise.then(function () {\n      // eslint-disable-next-line prefer-spread\n      return $.when\n        .apply($, deletePromises(items, skipRedirect))\n        .always(function () {\n          confirmModal.hide();\n        });\n    });\n  }\n  return promise;\n}\nfunction showConfirmation(options: any) {\n  const item = options.item;\n  const items = options.items;\n  const isMultiple = items.length > 1;\n  const isRemote = item.get('remoteMedia');\n  const type = item.get('type');\n  const metadataType = metadataTypes.getMetadataType(type);\n  let typeLabel;\n  let message;\n  if (isRemote && !isMultiple) {\n    typeLabel = metadataType.title;\n    message = t('Are you sure you want to remove {1}?', item.get('title'));\n  } else if (isMultiple && items.every((i: any) => i.get('remoteMedia'))) {\n    typeLabel = metadataType.plural;\n    message = t('Are you sure you want to remove {1} items?', items.length);\n  } else if (type === metadataTypes.COLLECTION) {\n    typeLabel = metadataType.title;\n    message = t(\n      'Are you sure you want to delete {1}? This cannot be undone.',\n      item.get('title')\n    );\n  } else if (isMultiple) {\n    typeLabel = metadataType.plural;\n    message = t(\n      'Are you sure you want to delete {1} items from your filesystem?',\n      items.length\n    );\n  } else {\n    typeLabel = metadataType.title;\n    message = t(\n      'Are you sure you want to delete this item from your filesystem?'\n    );\n  }\n  const modalOptions = {\n    title: isRemote\n      ? t('Remove {typeLabel}', { typeLabel })\n      : t('Delete {typeLabel}', { typeLabel }),\n    message: message,\n    confirmLabel: isRemote ? t('Remove') : t('Delete'),\n    cancelLabel: t('Cancel'),\n    async: true,\n    hasDanger: true,\n  };\n  // If we are deleting multiple items or a composite item, show an\n  // additional confirmation step to be cautious.\n  if (isMultiple || metadataTypes.isParentType(type)) {\n    (modalOptions as any).requireDoubleConfirm = true;\n    (modalOptions as any).doubleConfirmMessage = isRemote\n      ? t('Multiple files may be removed.')\n      : t('Multiple items may be deleted.');\n    (modalOptions as any).doubleConfirmLabel = t(\"Yes, I'm sure\");\n  }\n  const confirmModal = new ConfirmModal(modalOptions);\n  dispatcher.trigger('show:modal', confirmModal);\n  return confirmModal;\n}\nexport default deleteItemsCommand;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport BaseModal from 'app/js/views/modals/BaseModal';\n\nconst SelectModal = BaseModal.extend({\n  //\n  // Properties\n\n  className: 'select-modal modal modal-sm fade',\n\n  events: _.extend(\n    {\n      'click a': 'onClick',\n    },\n    BaseModal.prototype.events\n  ),\n\n  //\n  // Init\n\n  initialize: function () {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.initialize.apply(this, arguments);\n\n    this.promise = $.Deferred();\n  },\n\n  //\n  // Listeners\n\n  onRender: function () {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.onRender.apply(this, arguments);\n  },\n\n  onHide: function () {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.onHide.apply(this, arguments);\n\n    this.promise.reject();\n  },\n\n  onClick: function (event: any) {\n    event.preventDefault();\n\n    this.promise.resolve($(event.currentTarget).data('value'));\n    this.hide();\n  },\n});\n\nexport default SelectModal;\n","import SelectModal from 'app/js/views/modals/SelectModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/SelectMediaFileModal.tpl';\n\nconst SelectMediaFileModal = SelectModal.extend({\n  //\n  // Properties\n\n  name: 'SelectMediaFileModal',\n  template: tpl,\n\n  //\n  // Control\n\n  serializeData: function () {\n    const medias = this.model.get('Media');\n\n    return {\n      medias: medias,\n    };\n  },\n});\n\nexport default SelectMediaFileModal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport commands from 'app/js/commands/commands';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\nimport SelectMediaFileModal from 'app/js/views/modals/SelectMediaFileModal';\n\nfunction deleteMediaItemCommand(options: any) {\n  let promise = selectMediaItem(options);\n\n  promise = promise.then(function (mediaItem) {\n    const confirmModal = showConfirmation();\n\n    const deletePromise = confirmModal.promise.then(function () {\n      return commands\n        .execute('deleteFile', { item: options.item, media: mediaItem })\n        .always(function () {\n          confirmModal.hide();\n        });\n    });\n\n    return deletePromise;\n  });\n\n  return promise;\n}\n\nfunction selectMediaItem(options: any) {\n  const deferred = $.Deferred();\n  const item = options.item;\n  const mediaItems = item.get('Media');\n\n  // If an explicit index is passed in, we don't need to show a modal to\n  // select a media item.\n  if (options.index in mediaItems) {\n    return deferred.resolve(mediaItems[options.index]).promise();\n  }\n\n  const mediaModal = new SelectMediaFileModal({ model: item });\n  const mediaPromise = mediaModal.promise;\n\n  mediaPromise.done(function (mediaIndex: any) {\n    deferred.resolve(mediaItems[mediaIndex]);\n  });\n\n  mediaPromise.fail(function () {\n    deferred.reject();\n  });\n\n  dispatcher.trigger('show:modal', mediaModal);\n\n  return deferred.promise();\n}\n\nfunction showConfirmation() {\n  const confirmModal = new ConfirmModal({\n    title: t('Delete File'),\n    message: t(\n      'Are you sure you want to delete this file from your filesystem?'\n    ),\n    confirmLabel: t('Delete'),\n    cancelLabel: t('Cancel'),\n    async: true,\n    hasDanger: true,\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return confirmModal;\n}\n\nexport default deleteMediaItemCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction deleteVersionsCommand(options: any) {\n  const item = options.item;\n  const server = item.server;\n\n  const mediaItems = item.get('Media');\n  const versions = _.filter(mediaItems, function (media) {\n    return !!media.proxyType;\n  });\n\n  const confirmModal = showConfirmation({ item: item, versions: versions });\n  const confirmPromise = confirmModal.promise;\n\n  const promise = confirmPromise.then(function () {\n    const url = path.join(['/library/metadata/', item.id], { proxy: 1 });\n    const xhrOptions = _.extend(server.getXHROptions(url), { type: 'DELETE' });\n    const xhrDeferred = $.ajax(xhrOptions);\n\n    xhrDeferred.done(function () {\n      _.each(versions, function (version) {\n        mediaItems.splice(_.indexOf(mediaItems, version), 1);\n      });\n\n      // Manually trigger the change event so views are updated.\n      item.trigger('change:Media', item, item.get('Media'));\n    });\n\n    xhrDeferred.fail(function (xhr) {\n      const message =\n        xhr.status === 403\n          ? t(\n              'Ensure that media deletion is enabled for library content in your server settings.'\n            )\n          : t('There was a problem deleting these versions.');\n\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: message,\n      });\n    });\n\n    xhrDeferred.always(function () {\n      confirmModal.hide();\n    });\n\n    return xhrDeferred.promise();\n  });\n\n  return promise;\n}\n\nfunction showConfirmation(options: any) {\n  const item = options.item;\n  const versions = options.versions;\n  const isMultiple = versions.length > 1;\n  let message;\n\n  if (isMultiple) {\n    message = t(\n      'Are you sure you want to delete {1} versions of {2}?',\n      versions.length,\n      item.get('title')\n    );\n  } else {\n    const version = _.first(versions);\n    message = t(\n      'Are you sure you want to delete the {1} version of {2}?',\n      version.title,\n      item.get('title')\n    );\n  }\n\n  const confirmModal = new ConfirmModal({\n    title: isMultiple ? t('Delete Versions') : t('Delete Version'),\n    message: message,\n    confirmLabel: t('Delete'),\n    cancelLabel: t('Cancel'),\n    async: true,\n    hasDanger: true,\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return confirmModal;\n}\n\nexport default deleteVersionsCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport * as adapters from 'app/js/adapters/adapters';\nimport { repopulatePage } from 'app/js/stores/actions/ui/uiActions';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction deleteSectionCommand(options: any) {\n  const deferred = $.Deferred();\n  const section = options.section;\n\n  function deleteSection() {\n    const xhrDeferred = section.destroy({ wait: true });\n\n    // It's possible to try and delete a partially-hydrated section model\n    // from the setup flow. In that case, `destroy` returns false.\n    if (!xhrDeferred) {\n      deferred.resolve();\n      return;\n    }\n\n    xhrDeferred.done(function () {\n      const dispatch = adapters.resolve('appStore').dispatch;\n      const serverEntityID = section.server.entityID();\n\n      if (serverEntityID) {\n        dispatch(repopulatePage({ serverEntityID }));\n      }\n\n      deferred.resolve();\n    });\n\n    xhrDeferred.fail(function (xhr: any) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem deleting the library.'),\n      });\n\n      deferred.reject(xhr);\n    });\n  }\n\n  const confirmModal = new ConfirmModal({\n    title: t('Delete Library'),\n    message: t('Are you sure you want to delete {1}?', section.get('title')),\n    confirmLabel: t('Delete'),\n    cancelLabel: t('Cancel'),\n    requireDoubleConfirm: true,\n    doubleConfirmMessage: t('This cannot be undone.'),\n    doubleConfirmLabel: t(\"Yes, I'm sure\"),\n    async: true,\n    hasDanger: true,\n  });\n\n  const confirmPromise = confirmModal.promise;\n  confirmPromise.done(deleteSection);\n  confirmPromise.fail(function () {\n    deferred.reject();\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  deferred.promise().always(() => {\n    confirmModal.hide();\n  });\n\n  return deferred.promise();\n}\n\nexport default deleteSectionCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction deleteSectionThumbnailsCommand(options: any) {\n  const section = options.section;\n  const url = '/library/sections/' + section.id + '/indexes';\n  const xhrOptions = _.extend(section.server.getXHROptions(url), {\n    type: 'DELETE',\n  });\n\n  function deleteSectionThumbnails() {\n    const xhrDeferred = $.ajax(xhrOptions);\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    xhrDeferred.done(function (xhr) {\n      dispatcher.trigger('show:alert', {\n        type: 'success',\n        message: t(\n          'The preview thumbnails for items in this library were deleted.'\n        ),\n      });\n    });\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    xhrDeferred.fail(function (xhr) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t(\n          'There was a problem deleting the preview thumbnails for items in this library.'\n        ),\n      });\n    });\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    xhrDeferred.always(function (xhr) {\n      confirmModal.hide();\n    });\n\n    return xhrDeferred;\n  }\n\n  const confirmModal = new ConfirmModal({\n    title: t('Delete Preview Thumbnails'),\n    message: t(\n      'Are you sure you want to delete the preview thumbnails for items in this library? This cannot be undone.'\n    ),\n    confirmLabel: t('Delete'),\n    cancelLabel: t('Cancel'),\n    async: true,\n    hasDanger: true,\n  });\n\n  let promise = confirmModal.promise;\n  promise = promise.then(function () {\n    return deleteSectionThumbnails();\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return promise;\n}\n\nexport default deleteSectionThumbnailsCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport { navigateBack } from 'app/js/stores/actions/appActions';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction deletePlaylistCommand(options: any) {\n  const deferred = $.Deferred();\n  const isAlbum = options.item.get('playlistType') === 'photo';\n\n  function deletePlaylist() {\n    const xhrDeferred = options.item.destroy();\n\n    xhrDeferred.done(function () {\n      if (!options.skipRedirect) {\n        resolve('appStore').dispatch(navigateBack());\n      }\n\n      deferred.resolve();\n    });\n\n    xhrDeferred.fail(function (xhr: any) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: isAlbum\n          ? t('There was a problem deleting the album.')\n          : t('There was a problem deleting the playlist.'),\n      });\n\n      deferred.reject(xhr);\n    });\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    xhrDeferred.always(function (xhr: any) {\n      confirmModal.hide();\n    });\n  }\n\n  const confirmModal = new ConfirmModal({\n    title: isAlbum ? t('Delete Album') : t('Delete Playlist'),\n    message: t(\n      'Are you sure you want to delete {1}? This cannot be undone.',\n      options.item.get('title')\n    ),\n    confirmLabel: t('Delete'),\n    cancelLabel: t('Cancel'),\n    async: true,\n    hasDanger: true,\n  });\n\n  const confirmPromise = confirmModal.promise;\n  confirmPromise.done(deletePlaylist);\n  confirmPromise.fail(function () {\n    deferred.reject();\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return deferred.promise();\n}\n\nexport default deletePlaylistCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\nimport LibraryFailureModal from 'app/js/views/modals/LibraryFailureModal';\n\nfunction updateLibraryCommand(options: any) {\n  const deferred = $.Deferred();\n  const section = options.section;\n  const sectionID = section ? section.id : 'all';\n  const cancel = options.cancel;\n  const server = section ? section.server : options.server;\n  const params = options.params || {};\n  const data = {};\n  if (params.force) {\n    (data as any).force = 1;\n  }\n  const url = '/library/sections/' + sectionID + '/refresh';\n  const xhrOptions = _.extend(server.getXHROptions(url), { data: data });\n  if (cancel) {\n    xhrOptions.type = 'DELETE';\n    if (section) {\n      section.set('refreshing', false);\n    }\n  }\n  function updateLibrary() {\n    const xhrDeferred = $.ajax(xhrOptions);\n    xhrDeferred.done(function () {\n      deferred.resolve();\n    });\n    xhrDeferred.fail(function (xhr) {\n      if (xhr.status === 503) {\n        dispatcher.trigger(\n          'show:modal',\n          new LibraryFailureModal({ model: server })\n        );\n      } else {\n        const message = cancel\n          ? t('There was a problem canceling the update.')\n          : t('There was a problem updating the library.');\n        dispatcher.trigger('show:alert', {\n          type: 'error',\n          message: message,\n        });\n      }\n      deferred.reject(xhr);\n    });\n  }\n  if ((data as any).force) {\n    const confirmModal = new ConfirmModal({\n      title: t('Refresh All'),\n      message: t(\n        'Forces a download of fresh media information from the internet. This can take a long time. Any locked fields are not modified.'\n      ),\n      confirmLabel: t('Refresh'),\n      cancelLabel: t('Cancel'),\n    });\n    const confirmPromise = confirmModal.promise;\n    confirmPromise.done(updateLibrary);\n    confirmPromise.fail(function () {\n      deferred.reject();\n    });\n    dispatcher.trigger('show:modal', confirmModal);\n  } else {\n    updateLibrary();\n  }\n  return deferred.promise();\n}\nexport default updateLibraryCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction optimizeCommand(options: any) {\n  const deferred = $.Deferred();\n  const server = options.server;\n  const url = '/library/optimize';\n  const xhrOptions = _.extend(server.getXHROptions(url), { type: 'PUT' });\n\n  function optimize() {\n    const xhrDeferred = $.ajax(xhrOptions);\n\n    xhrDeferred.done(function () {\n      dispatcher.trigger('show:alert', {\n        type: 'success',\n        message: t('The database was optimized.'),\n      });\n\n      deferred.resolve();\n    });\n\n    xhrDeferred.fail(function (xhr) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem optimizing this database.'),\n      });\n\n      deferred.reject(xhr);\n    });\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    xhrDeferred.always(function (xhr) {\n      confirmModal.hide();\n    });\n  }\n\n  const confirmModal = new ConfirmModal({\n    title: t('Optimize Database'),\n    message: t(\n      \"Cleans up the library database and ensures it is operating as quickly as possible. This is especially useful when you've added or removed a large amount of media from the library.\"\n    ),\n    confirmLabel: t('Optimize'),\n    cancelLabel: t('Cancel'),\n    async: true,\n  });\n\n  const confirmPromise = confirmModal.promise;\n  confirmPromise.done(optimize);\n  confirmPromise.fail(function () {\n    deferred.reject();\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return deferred.promise();\n}\n\nexport default optimizeCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction cleanBundlesCommand(options: any) {\n  const deferred = $.Deferred();\n  const server = options.server;\n  const url = '/library/clean/bundles';\n  const xhrOptions = _.extend(server.getXHROptions(url), { type: 'PUT' });\n\n  function optimize() {\n    const xhrDeferred = $.ajax(xhrOptions);\n\n    xhrDeferred.done(function () {\n      dispatcher.trigger('show:alert', {\n        type: 'success',\n        message: t('Unused bundles are being removed.'),\n      });\n\n      deferred.resolve();\n    });\n\n    xhrDeferred.fail(function (xhr) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem removing unused bundles.'),\n      });\n\n      deferred.reject(xhr);\n    });\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    xhrDeferred.always(function (xhr) {\n      confirmModal.hide();\n    });\n  }\n\n  const confirmModal = new ConfirmModal({\n    title: t('Clean Bundles'),\n    message: t(\n      'The media server stores information about your media to disk, as well as posters, artwork, and other media resources from the internet. Running this task deletes any bundles which are no longer in use.'\n    ),\n    confirmLabel: t('Clean'),\n    cancelLabel: t('Cancel'),\n    async: true,\n  });\n\n  const confirmPromise = confirmModal.promise;\n  confirmPromise.done(optimize);\n  confirmPromise.fail(function () {\n    deferred.reject();\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return deferred.promise();\n}\n\nexport default cleanBundlesCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction emptyTrashCommand(options: any) {\n  const deferred = $.Deferred();\n  const section = options.section;\n  const server = section ? section.server : options.server;\n  const sectionIDs: any = [];\n  const requests: any = [];\n\n  if (section) {\n    sectionIDs.push(section.id);\n  } else {\n    const sections = server.get('sections');\n\n    sections.each(function (currentSection: any) {\n      sectionIDs.push(currentSection.id);\n    });\n  }\n\n  function emptyTrash() {\n    // There is not an endpoint for emptying the trash for all library\n    // sections, so instead loop through and make each individual request\n    // to empty the trash for all sections.\n\n    _.each(sectionIDs, function (sectionID) {\n      const url = '/library/sections/' + sectionID + '/emptyTrash';\n      const xhrOptions = _.extend(server.getXHROptions(url), { type: 'PUT' });\n\n      requests.push($.ajax(xhrOptions));\n    });\n\n    // eslint-disable-next-line prefer-spread\n    const xhrDeferred = $.when.apply($, requests);\n\n    xhrDeferred.done(function () {\n      dispatcher.trigger('show:alert', {\n        type: 'success',\n        message: t('The trash was emptied.'),\n      });\n\n      deferred.resolve();\n    });\n\n    xhrDeferred.fail(function (xhr) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem emptying the trash.'),\n      });\n\n      deferred.reject(xhr);\n    });\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    xhrDeferred.always(function (xhr) {\n      confirmModal.hide();\n    });\n  }\n\n  const confirmModal = new ConfirmModal({\n    title: t('Empty Trash'),\n    message: t(\n      \"By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted.\"\n    ),\n    confirmLabel: t('Empty'),\n    cancelLabel: t('Cancel'),\n    async: true,\n  });\n\n  const confirmPromise = confirmModal.promise;\n  confirmPromise.done(emptyTrash);\n  confirmPromise.fail(function () {\n    deferred.reject();\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return deferred.promise();\n}\n\nexport default emptyTrashCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport path from 'app/js/utils/url/path';\n\nfunction matchCommand(options: any) {\n  const item = options.item;\n  const params = {\n    guid: options.guid,\n    name: options.name,\n    year: options.year,\n  };\n\n  if (item.get('type') === 'album' && options.children) {\n    options.children.reduce(function (acc: any, child: any) {\n      const id = child.get('id');\n      if (id) {\n        acc['guid[' + id + ']'] = child.get('guid');\n      }\n\n      return acc;\n    }, params);\n  }\n\n  const url = path.join(['/library/metadata/', item.id, '/match'], params);\n  const xhrOptions = _.extend(item.server.getXHROptions(url), { type: 'PUT' });\n\n  return $.ajax(xhrOptions).promise();\n}\n\nexport default matchCommand;\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport parser from 'app/js/utils/parser';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\n\nfunction autoMatchCommand(options: {\n  item: any;\n  agent: any;\n}): JQueryPromise<void> {\n  const deferred = $.Deferred<void>();\n  const item = options.item;\n  const agent = options.agent;\n  let params = { agent: agent.id, manual: 0 };\n  const searchUrl = path.join(\n    ['/library/metadata/', item.id, '/matches'],\n    params\n  );\n  const searchOptions = _.extend(item.server.getXHROptions(searchUrl));\n  const searchPromise = $.ajax(searchOptions);\n\n  searchPromise.done(function (response) {\n    const json = _.isObject(response) ? response : parser.parseXML(response);\n\n    if (json.SearchResult) {\n      let match = json.SearchResult;\n\n      // Always match the first search result.\n      if (Array.isArray(json.SearchResult)) {\n        match = json.SearchResult[0];\n      }\n\n      // @ts-expect-error ts-migrate(2322) FIXME: Type '{ guid: any; name: any; }' is not assignable... Remove this comment to see the full error message\n      params = { guid: match.guid, name: match.name };\n\n      const matchUrl = path.join(\n        ['/library/metadata/', item.id, '/match'],\n        params\n      );\n      const matchOptions = _.extend(item.server.getXHROptions(matchUrl), {\n        type: 'PUT',\n      });\n      const matchPromise = $.ajax(matchOptions);\n\n      matchPromise.done(function () {\n        deferred.resolve();\n      });\n\n      matchPromise.fail(function () {\n        dispatcher.trigger('show:alert', {\n          type: 'error',\n          message: t('There was a problem matching this item.'),\n        });\n\n        deferred.reject();\n      });\n    } else {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('No matches were found using this agent.'),\n      });\n\n      deferred.reject();\n    }\n  });\n\n  searchPromise.fail(function (xhr) {\n    dispatcher.trigger('show:alert', {\n      type: 'error',\n      message: t('There was a problem searching for matches.'),\n    });\n\n    deferred.reject(xhr);\n  });\n\n  return deferred.promise();\n}\n\nexport default autoMatchCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport path from 'app/js/utils/url/path';\n\nconst artworkAttributes = {\n  poster: 'thumb',\n  art: 'art',\n  banner: 'banner',\n};\n\nfunction changeArtworkCommand(options: any) {\n  const item = options.item;\n  const params = { url: options.artworkRatingKey };\n  const url = path.join(\n    ['/library/metadata/', item.id, options.artworkType],\n    params\n  );\n  const xhrOptions = _.extend(item.server.getXHROptions(url), { type: 'PUT' });\n\n  const xhrDeferred = $.ajax(xhrOptions);\n\n  xhrDeferred.done(function (response) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    item.set(artworkAttributes[options.artworkType], response);\n  });\n\n  return xhrDeferred.promise();\n}\n\nexport default changeArtworkCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\n\nfunction rateCommand(options: any) {\n  const item = options.item;\n  const rating = options.rating;\n\n  // Track the original rating so it can be restored should the request fail\n  const originalRating = item.get('userRating');\n\n  // Set the rating before we get a success so that our ui can update\n  // immediately after the user tries to rate an item\n  if (rating === -1) {\n    item.unset('userRating');\n  } else {\n    item.set('userRating', rating);\n  }\n\n  if (options.passive) {\n    return $.Deferred().resolve().promise();\n  }\n\n  const params = {\n    key: item.get('ratingKey'),\n    identifier: item.get('identifier'),\n    rating: rating,\n  };\n\n  const url = path.join('/:/rate', params);\n  const deferred = $.ajax(item.server.getXHROptions(url));\n\n  deferred.fail(function () {\n    // Revert the local rating change\n    item.set('userRating', originalRating);\n\n    dispatcher.trigger('show:alert', {\n      type: 'error',\n      message: t('There was a problem rating this item.'),\n    });\n  });\n\n  return deferred.promise();\n}\n\nexport default rateCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport getStreams from './getStreams';\n\nfunction selectStream(media: any, streamType: any, id: any) {\n  if (media) {\n    const streams = getStreams(media, { streamType: streamType.id });\n\n    _.each(streams, (stream) => {\n      stream.selected = stream.id === id;\n    });\n  }\n}\n\nexport default selectStream;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport selectStream from 'app/js/utils/media/selectStream';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\n\nfunction selectStreamCommand(options: any) {\n  const deferred = $.Deferred();\n  const item = options.item;\n  const server = item.server;\n  const media = options.media || _.first(item.get('Media'));\n  const part = options.part || (media && _.first(media.Part));\n  const streamType = options.streamType;\n  const streamID = options.streamID;\n  if (!media || !part) {\n    return deferred.reject().promise();\n  }\n  const params = {};\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  params[streamType.key] = streamID;\n  // When selecting a stream without a specific media item (e.g. pre-play),\n  // the `allParts` param will instruct the the server to perform stream\n  // selection across all media items in the metadata item.\n  if (!options.media && server.supports('allPartsStreamSelection')) {\n    (params as any).allParts = 1;\n  }\n  const url = path.join(['/library/parts/', part.id], params);\n  const xhrOptions = _.extend(server.getXHROptions(url), { type: 'PUT' });\n  const xhrDeferred = $.ajax(xhrOptions);\n  xhrDeferred.done(function () {\n    // Update our streams to reflect the new selected stream.\n    selectStream(media, streamType, streamID);\n    // Trigger a custom event since anything we change within Media won't\n    // automatically trigger a change event.\n    item.trigger('change:streams');\n    deferred.resolve();\n  });\n  xhrDeferred.fail(function (xhr) {\n    dispatcher.trigger('show:alert', {\n      type: 'error',\n      message: t('There was a problem selecting the stream for this item.'),\n    });\n    deferred.reject(xhr);\n  });\n  return deferred.promise();\n}\nexport default selectStreamCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\n\nfunction deleteFileCommand(options: any) {\n  const item = options.item;\n  const media = options.media;\n  const server = item.server;\n\n  let promise;\n\n  // If a specific media was selected, we need to make a special request\n  // to not delete other media associated with the metadata item.\n\n  if (media) {\n    const url = '/library/metadata/' + item.id + '/media/' + media.id;\n    const xhrOptions = _.extend(server.getXHROptions(url), { type: 'DELETE' });\n\n    promise = $.ajax(xhrOptions);\n\n    promise.done(function () {\n      // If specific media item was deleted, the metadata item will remain\n      // intact but we should remove that media item from the array.\n      const mediaItems = options.item.get('Media');\n      mediaItems.splice(_.indexOf(mediaItems, media), 1);\n\n      // Manually trigger the change event so views are updated.\n      item.trigger('change:Media', item, item.get('Media'));\n    });\n  } else {\n    promise = item.destroy({ wait: true });\n  }\n\n  promise.fail(function (xhr: any) {\n    const message =\n      xhr.status === 403\n        ? t(\n            'Ensure that media deletion is enabled for library content in your server settings.'\n          )\n        : t('There was a problem deleting this item.');\n\n    dispatcher.trigger('show:alert', {\n      type: 'error',\n      message: message,\n    });\n  });\n\n  return promise;\n}\n\nexport default deleteFileCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport commands from 'app/js/commands/commands';\nimport MetadataListModel from 'app/js/models/metadata/MetadataListModel';\nimport MetadataModel from 'app/js/models/metadata/MetadataModel';\nimport {\n  navigate,\n  navigateBack,\n  navigatePrePlay,\n} from 'app/js/stores/actions/appActions';\nimport getSourceDirectoryFromProviderModel from 'app/js/utils/provider/getSourceDirectoryFromProviderModel';\nimport getSourceRoute from 'app/js/views/v3/helpers/routes/getSourceRoute';\n\nfunction deleteItemCommand(options: any) {\n  const promise = commands.execute('deleteFile', options);\n\n  promise.done(function () {\n    const item = options.item;\n\n    // Attempt to navigate back to either a parent item or a section now\n    // that this item doesn't exist.\n\n    const parent = getParentFromCache(item.get('parentKey'), options);\n    if (!parent) {\n      navigateToSection(options);\n      return;\n    }\n\n    const siblingsListModel = new MetadataListModel(\n      { containerKey: parent.get('childrenKey') },\n      {\n        server: parent.server,\n        provider: parent.provider,\n        skipCache: true,\n      }\n    );\n\n    siblingsListModel.fetchRange({ size: 1 }).then(() => {\n      // If there are still siblings in its collection, we know the parent\n      // still exists and we can navigate to the parent.\n\n      if (siblingsListModel.getCollection().length > 0) {\n        navigateToDetails(parent, options);\n        return;\n      }\n\n      // If the last child was deleted, the parent will automatically be\n      // destroyed, so we can try to navigate to the grandparent.\n\n      parent.trigger('destroy', parent, parent.collection);\n\n      const grandparent = getParentFromCache(\n        item.get('grandparentKey'),\n        options\n      );\n      if (!grandparent) {\n        navigateToSection({\n          ...options,\n          skipRedirect: false,\n        });\n        return;\n      }\n\n      const parentsListModel = new MetadataListModel(\n        { containerKey: grandparent.get('childrenKey') },\n        {\n          server: grandparent.server,\n          provider: grandparent.provider,\n          skipCache: true,\n        }\n      );\n\n      parentsListModel.fetchRange({ size: 1 }).then(() => {\n        if (parentsListModel.getCollection().length > 0) {\n          navigateToDetails(grandparent, {\n            ...options,\n            skipRedirect: false,\n          });\n        } else {\n          navigateToSection(options);\n        }\n      });\n    });\n  });\n\n  return promise;\n}\n\nfunction getParentFromCache(key: any, options: any) {\n  if (!key) {\n    return false;\n  }\n\n  const parent = new MetadataModel(\n    { key: key },\n    {\n      server: options.item.server,\n      onlyIfCached: true,\n    }\n  );\n\n  if (_.isEmpty(parent)) {\n    return false;\n  }\n\n  return parent;\n}\n\nfunction navigateToSection(options: any) {\n  if (options.skipRedirect) {\n    return;\n  }\n\n  const item = options.item;\n  const container = item.get('isLibraryItem') && item.parent;\n  const librarySectionKey =\n    item.get('librarySectionKey') || container?.get('librarySectionKey');\n\n  if (!librarySectionKey) {\n    resolve('appStore').dispatch(navigateBack());\n\n    return;\n  }\n\n  const sourceDirectory = getSourceDirectoryFromProviderModel(\n    item.provider,\n    librarySectionKey\n  );\n\n  const route = getSourceRoute(\n    item.server.toJSON(),\n    item.provider.toJSON(),\n    sourceDirectory\n  );\n\n  if (route) {\n    resolve('appStore').dispatch(\n      navigate({\n        pathname: route,\n        replace: true,\n      })\n    );\n  } else {\n    resolve('appStore').dispatch(navigateBack());\n  }\n}\n\nfunction navigateToDetails(model: any, options: any) {\n  if (options.skipRedirect) {\n    return;\n  }\n\n  resolve('appStore').dispatch(\n    navigatePrePlay({\n      serverEntityID: model.server.entityID(),\n      providerEntityID: model.provider.entityID(),\n      key: model.get('key'),\n      replace: true,\n    })\n  );\n}\n\nexport default deleteItemCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\n\nexport default function getSourceDirectoryFromProviderModel(\n  providerModel: any,\n  directoryKey: any\n) {\n  const contentFeatureModel = providerModel\n    .get('features')\n    .get(providerFeatureTypes.CONTENT);\n\n  const directoriesModel = contentFeatureModel.get('directories');\n\n  if (!contentFeatureModel || !directoriesModel) {\n    return null;\n  }\n\n  const directoryModel = directoriesModel.find(\n    (directory: any) =>\n      directory.get('hubKey') === directoryKey ||\n      directory.get('key') === directoryKey\n  );\n\n  if (!directoryModel) {\n    return null;\n  }\n\n  return directoryModel.toJSON();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\n\nfunction enableVersionGeneratorCommand(options: any) {\n  const generator = options.generator;\n  const url = _.result(generator, 'url') + '/' + options.ratingKey + '/enable';\n\n  const xhrOptions = _.extend(generator.server.getXHROptions(url), {\n    type: 'PUT',\n  });\n  const promise = $.ajax(xhrOptions).promise();\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n  promise.fail(function (xhr) {\n    dispatcher.trigger('show:alert', {\n      type: 'error',\n      message: t('There was a problem enabling this version.'),\n    });\n  });\n\n  return promise;\n}\n\nexport default enableVersionGeneratorCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction disableVersionGeneratorCommand(options: any) {\n  const generator = options.generator;\n  const url = _.result(generator, 'url') + '/' + options.ratingKey + '/disable';\n  const confirmModal = showConfirmation();\n\n  const promise = confirmModal.promise.then(function () {\n    const xhrOptions = _.extend(generator.server.getXHROptions(url), {\n      type: 'PUT',\n    });\n    const disablePromise = $.ajax(xhrOptions).promise();\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    disablePromise.fail(function (xhr) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem disabling this version.'),\n      });\n    });\n\n    disablePromise.always(function () {\n      confirmModal.hide();\n    });\n\n    return disablePromise;\n  });\n\n  return promise;\n}\n\nfunction showConfirmation() {\n  const confirmModal = new ConfirmModal({\n    title: t('Remove Version'),\n    message: t(\n      'Are you sure you want to delete this version? You can enable it again in Optimized Versions Settings.'\n    ),\n    confirmLabel: t('Remove'),\n    cancelLabel: t('Cancel'),\n    async: true,\n    hasDanger: true,\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return confirmModal;\n}\n\nexport default disableVersionGeneratorCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\n\nfunction reprocessVersionGeneratorCommand(options: any) {\n  const generator = options.generator;\n  const ratingKey = options.ratingKey;\n  let url = _.result(generator, 'url');\n\n  if (ratingKey) {\n    url += '/' + ratingKey;\n  }\n\n  url += '/reprocess';\n\n  const xhrOptions = _.extend(generator.server.getXHROptions(url), {\n    type: 'PUT',\n  });\n  const promise = $.ajax(xhrOptions).promise();\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n  promise.fail(function (xhr) {\n    const message = ratingKey\n      ? t('There was a problem processing this item.')\n      : t('There was a problem processing these items.');\n\n    dispatcher.trigger('show:alert', {\n      type: 'error',\n      message: message,\n    });\n  });\n\n  return promise;\n}\n\nexport default reprocessVersionGeneratorCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction deleteVersionGeneratorCommand(options: any) {\n  const generator = options.generator;\n  const confirmModal = showConfirmation(options);\n\n  const promise = confirmModal.promise.then(function () {\n    const deletePromise = generator.destroy();\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    deletePromise.fail(function (xhr: any) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('Unable to stop generating these versions.'),\n      });\n    });\n\n    deletePromise.always(function () {\n      confirmModal.hide();\n    });\n\n    return deletePromise;\n  });\n\n  return promise;\n}\n\nfunction showConfirmation(options: any) {\n  const title = options.generator.get('title');\n  const message = title\n    ? t(\n        'Removing this item will delete all versions created by {1}. Are you sure you want to continue?',\n        title\n      )\n    : t(\n        'Removing this item will delete all related versions. Are you sure you want to continue?'\n      );\n\n  const confirmModal = new ConfirmModal({\n    title: t('Delete Versions'),\n    message: message,\n    confirmLabel: t('Remove'),\n    cancelLabel: t('Cancel'),\n    async: true,\n    hasDanger: true,\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return confirmModal;\n}\n\nexport default deleteVersionGeneratorCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport proxyTypes from 'app/js/utils/constants/proxyTypes';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction deleteAllVersionGeneratorsCommand(options: any) {\n  const confirmModal = showConfirmation();\n  let promise = confirmModal.promise;\n\n  promise = promise.then(function () {\n    const url = '/playlists/generators?type=' + proxyTypes.LOCAL;\n    const xhrOptions = _.extend(options.server.getXHROptions(url), {\n      type: 'DELETE',\n    });\n    const xhrPromise = $.ajax(xhrOptions).promise();\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    xhrPromise.fail(function (xhr) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem deleting all versions.'),\n      });\n    });\n\n    xhrPromise.always(function () {\n      confirmModal.hide();\n    });\n\n    return xhrPromise.promise();\n  });\n\n  return promise;\n}\n\nfunction showConfirmation() {\n  const confirmModal = new ConfirmModal({\n    title: t('Delete All Versions'),\n    message: t(\n      'Are you sure you want to delete all versions? This cannot be undone.'\n    ),\n    confirmLabel: t('Delete'),\n    cancelLabel: t('Cancel'),\n    async: true,\n    hasDanger: true,\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return confirmModal;\n}\n\nexport default deleteAllVersionGeneratorsCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport parser from 'app/js/utils/parser';\nimport t from 'app/js/utils/t';\n\nfunction updateChannelCommand(options: any) {\n  const deferred = $.Deferred();\n  const channel = options.channel;\n  const server = channel ? channel.server : options.server;\n  const silent = options.silent;\n  let url;\n\n  // If a channel is passed in, only check for updates for that channel.\n  // Otherwise, check for updates for all channels.\n  if (channel) {\n    const identifier = channel.get('identifier');\n    const urlRoot = identifier\n      ? '/system/appstore/apps/' + identifier\n      : channel.get('key');\n    url = urlRoot + '/update';\n  } else {\n    url = '/system/appstore/updates';\n  }\n\n  const xhrDeferred = $.ajax(server.getXHROptions(url));\n\n  function resolve(response: any) {\n    const json = _.isObject(response) ? response : parser.parseXML(response);\n\n    if (!json || (!json.message && !json.Directory)) {\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 0.\n      reject();\n      return;\n    }\n\n    if (json.message) {\n      if (!silent) {\n        dispatcher.trigger('show:alert', {\n          type: 'success',\n          message: json.message,\n        });\n      }\n\n      deferred.resolve();\n    } else {\n      parser.parseArray(json, 'Directory');\n\n      // The first Directory object in the response will have the key we\n      // need to request in order to download the updates.\n      const updateUrl = json.Directory[0].key;\n      const updateDeferred = $.ajax(server.getXHROptions(updateUrl));\n\n      updateDeferred.done(resolve);\n      updateDeferred.fail(reject);\n    }\n  }\n\n  function reject(xhr: any) {\n    if (!silent) {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem checking for updates.'),\n      });\n    }\n\n    deferred.reject(xhr);\n  }\n\n  xhrDeferred.done(resolve);\n  xhrDeferred.fail(reject);\n\n  return deferred.promise();\n}\n\nexport default updateChannelCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport parser from 'app/js/utils/parser';\nimport t from 'app/js/utils/t';\nimport navigateToRoute from 'app/js/v4/routes/navigateToRoute';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction uninstallChannelCommand(options: any) {\n  const deferred = $.Deferred();\n  const channel = options.channel;\n  const identifier = channel.get('identifier');\n  const urlRoot = identifier\n    ? '/system/appstore/apps/' + identifier\n    : channel.get('key');\n  const url = urlRoot + '/uninstall';\n  const xhrOptions = channel.server.getXHROptions(url);\n\n  function uninstall() {\n    const xhrDeferred = $.ajax(xhrOptions);\n\n    xhrDeferred.done(function (response) {\n      const json = _.isObject(response) ? response : parser.parseXML(response);\n\n      channel.set('installed', false);\n\n      if (json.message && !options.skipConfirmation) {\n        dispatcher.trigger('show:alert', {\n          type: 'success',\n          message: json.message,\n        });\n      }\n\n      deferred.resolve();\n    });\n\n    xhrDeferred.fail(function (xhr) {\n      // A 400 response indicates that this channel does not exist in `self.system.storeservice.plugins`\n      // and can thus not be uninstalled. This includes iLife channels.\n      // Display a popup explaining that these channels may be disabled in the settings instead.\n      // See https://github.com/plexinc/plex-media-server/issues/3297\n\n      if (xhr.status === 400) {\n        const confirmModal = new ConfirmModal({\n          title: t('Unable to Uninstall Plugin'),\n          message: t(\n            'This plugin could not be uninstalled, but you can disable it in the server settings.'\n          ),\n          confirmLabel: t('OK'),\n          cancelLabel: t('Ignore'),\n        });\n\n        confirmModal.promise.done(function () {\n          navigateToRoute('serverSettings', {\n            machineIdentifier: channel.server.id,\n            settingsSection: 'settings',\n            settingsGroup: 'channels',\n          });\n        });\n\n        dispatcher.trigger('show:modal', confirmModal);\n      } else {\n        dispatcher.trigger('show:alert', {\n          type: 'error',\n          message: t('This plugin could not be uninstalled.'),\n        });\n      }\n\n      deferred.reject(xhr);\n    });\n  }\n\n  if (options.skipConfirmation) {\n    uninstall();\n  } else {\n    const confirmModal = new ConfirmModal({\n      title: t('Uninstall Plugin'),\n      message: t('Are you sure you want to uninstall this plugin?'),\n    });\n\n    const confirmPromise = confirmModal.promise;\n    confirmPromise.done(uninstall);\n    confirmPromise.fail(function () {\n      deferred.reject();\n    });\n\n    dispatcher.trigger('show:modal', confirmModal);\n  }\n\n  return deferred.promise();\n}\n\nexport default uninstallChannelCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport {\n  MAPPING_STATE_MAPPED,\n  MAPPING_STATE_UNKNOWN,\n  MAPPING_STATE_WAITING,\n  REMOTE_ACCESS_STATE_CONNECTING,\n  REMOTE_ACCESS_STATE_DISCONNECTING,\n  REMOTE_ACCESS_STATE_UNKNOWN,\n} from 'app/js/models/server/ServerCloudAccountModel';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\n\nfunction connectServerCommand(options: any) {\n  const cloudAccount = options.cloudAccount;\n  const settings = cloudAccount.server.get(__PLATFORM__).get('settings');\n  const publishSetting = settings.get('PublishServerOnPlexOnlineKey');\n  const deferred = $.Deferred();\n  const pollDelay = 500;\n  let pollInterval: any;\n\n  // If we are retrying, the state will have already been set, and we don't\n  // want to show disconnecting and then connecting, which might confuse\n  // users.\n\n  if (!cloudAccount.get('isWaiting')) {\n    const status = options.value\n      ? REMOTE_ACCESS_STATE_CONNECTING\n      : REMOTE_ACCESS_STATE_DISCONNECTING;\n    cloudAccount.set('remoteAccessState', status);\n  }\n\n  const initialState = cloudAccount.previous('remoteAccessState');\n\n  function verifyAccount() {\n    const accountPromise = cloudAccount.fetch();\n\n    accountPromise.done(function () {\n      const mappingState = cloudAccount.get('mappingState');\n      const waitingOnPublish =\n        options.value && mappingState === MAPPING_STATE_UNKNOWN;\n      const waitingOnUnpublish =\n        !options.value && mappingState === MAPPING_STATE_MAPPED;\n\n      // Poll for changes if the publish is in an interim step.\n      if (\n        mappingState === MAPPING_STATE_WAITING ||\n        waitingOnPublish ||\n        waitingOnUnpublish\n      ) {\n        if (!pollInterval) {\n          pollInterval = window.setInterval(verifyAccount, pollDelay);\n        }\n      } else {\n        pollInterval = window.clearInterval(pollInterval);\n\n        // When disabled, the state is neither ok nor disabled, but we\n        // shouldn't stay in a disconnecting state indefinitely.\n        if (cloudAccount.get('isWaiting')) {\n          cloudAccount.set('remoteAccessState', REMOTE_ACCESS_STATE_UNKNOWN);\n        }\n\n        deferred.resolve();\n      }\n    });\n  }\n\n  // These request can take awhile, so don't use our default timeout.\n  const promise = publishSetting.save(\n    {\n      PublishServerOnPlexOnlineKey: options.value,\n    },\n    { timeout: 0 }\n  );\n\n  promise.done(verifyAccount);\n\n  promise.fail(function (xhr: any) {\n    let message;\n\n    if (options.value) {\n      message = t('There was a problem connecting your server.');\n    } else {\n      message = t('There was a problem disconnecting your server.');\n    }\n\n    dispatcher.trigger('show:alert', {\n      type: 'error',\n      message: message,\n    });\n\n    cloudAccount.set('remoteAccessState', initialState);\n    deferred.reject(xhr);\n  });\n\n  return deferred.promise();\n}\n\nexport default connectServerCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport commands from 'app/js/commands/commands';\n\nfunction reconnectServerCommand(options: any) {\n  const cloudAccount = options.cloudAccount;\n\n  const connectOptions = {\n    cloudAccount: cloudAccount,\n    value: false,\n  };\n\n  let promise = commands.execute('connectServer', connectOptions);\n\n  promise = promise.then(function () {\n    connectOptions.value = true;\n\n    return commands.execute('connectServer', connectOptions);\n  });\n\n  // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n  promise = promise.then(function () {\n    if (cloudAccount.get('mappingError')) {\n      return $.Deferred().reject().promise();\n    }\n  });\n\n  return promise;\n}\n\nexport default reconnectServerCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport { MY_PLEX_SIGN_IN_STATE_OK } from 'app/js/models/server/ServerModel';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport parser from 'app/js/utils/parser2';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\n\nfunction claimServer(server: any, cloudServer: any) {\n  const tokenXhrOptions = cloudServer.getXHROptions('/api/claim/token');\n\n  let promise = $.ajax(tokenXhrOptions).promise();\n\n  promise = promise.then((response) => {\n    const { token } = parser.parseXML(response);\n    const claimUrl = path.join('/myplex/claim', { token });\n    const claimXhrOptions = server.getXHROptions(claimUrl, { type: 'POST' });\n\n    return $.ajax(claimXhrOptions).promise();\n  });\n\n  return promise;\n}\n\nfunction signInServer(username: any, password: any, server: any) {\n  const url = path.join('/myplex/account', { username, password });\n  const xhrOptions = server.getXHROptions(url, { type: 'PUT' });\n\n  return $.ajax(xhrOptions).promise();\n}\n\nfunction signInServerCommand(options: any) {\n  const { cloudAccount, username, password, claim = false } = options;\n\n  const deferred = $.Deferred();\n  const server = cloudAccount.server;\n  const appModel = resolve('appModel');\n  const user = appModel.get('user');\n  const cloudServer = appModel.get('cloudServer');\n  const previousToken = server.get('accessToken');\n\n  // Let the server immediately use the user's token. This prevents the bundled\n  // web app from getting locked out after the server is signed in.\n\n  server.set('accessToken', user.get('authToken'));\n\n  const promise = claim\n    ? claimServer(server, cloudServer)\n    : signInServer(username, password, server);\n\n  promise.done((response) => {\n    const json = _.isObject(response) ? response : parser.parseXML(response);\n\n    if (json && json.signInState === 'invalid') {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('The username or password is incorrect.'),\n      });\n\n      deferred.reject();\n    } else {\n      server.set({\n        myPlexSigninState: MY_PLEX_SIGN_IN_STATE_OK,\n        myPlexUsername: user.get('email'),\n      });\n\n      cloudAccount.set({\n        signedIn: true,\n        username: user.get('email'),\n      });\n\n      deferred.resolve();\n    }\n  });\n\n  promise.fail((xhr) => {\n    server.set('accessToken', previousToken);\n\n    if (cloudAccount.get('signedIn') === true) {\n      cloudAccount.set('signedIn', false);\n    }\n\n    let message;\n\n    if (xhr.status === 401) {\n      message = t('The username or password is incorrect.');\n    } else {\n      message = t('There was a problem signing in to Plex.');\n    }\n\n    dispatcher.trigger('show:alert', {\n      type: 'error',\n      message: message,\n    });\n\n    deferred.reject(xhr);\n  });\n\n  return deferred.promise();\n}\n\nexport default signInServerCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport * as adapters from 'app/js/adapters/adapters';\nimport ServerModel, {\n  MY_PLEX_SIGN_IN_STATE_NONE,\n  MY_PLEX_SIGN_IN_STATE_OK,\n} from 'app/js/models/server/ServerModel';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction getCachedServer(serverID: any) {\n  const server = new ServerModel(\n    { machineIdentifier: serverID },\n    { onlyIfCached: true }\n  );\n  if (!_.isEmpty(server)) {\n    return server;\n  }\n}\nfunction signOutServer(server: any) {\n  const cloudAccount = server.get(__PLATFORM__).get('cloudAccount');\n  const promise = cloudAccount.destroy();\n  promise.done(function () {\n    server.set({\n      accessToken: undefined,\n      myPlexSigninState: MY_PLEX_SIGN_IN_STATE_NONE,\n      myPlexSubscription: false,\n    });\n  });\n  return promise;\n}\nfunction destroyServer(server: any) {\n  // Remove the model from its collection.\n  server.trigger('destroy', server, server.collection);\n  // Completely remove the server from our cache so the same instance cannot\n  // be used again and it can be garbage collected.\n  server.cache.remove(server);\n}\nfunction removeServerCommand(options: any) {\n  const appModel = adapters.resolve('appModel');\n  const user = appModel.get('user');\n  const device = options.device;\n  const server =\n    options.server || getCachedServer(device.get('clientIdentifier'));\n  function remove() {\n    let xhrDeferred;\n    if (device) {\n      xhrDeferred = device.destroy({ wait: true });\n    } else {\n      const url = '/api/servers/' + server.id;\n      const xhrOptions = _.extend(user.server.getXHROptions(url), {\n        type: 'DELETE',\n      });\n      xhrDeferred = $.ajax(xhrOptions);\n    }\n    if (server) {\n      // If the server is already available, try to also sign the server out\n      // before removing the server entirely.\n      if (\n        server.get('connected') &&\n        server.get('myPlexSigninState') === MY_PLEX_SIGN_IN_STATE_OK\n      ) {\n        const cloudAccount = server.get(__PLATFORM__).get('cloudAccount');\n        xhrDeferred = xhrDeferred.then(function () {\n          return cloudAccount.fetch();\n        });\n        xhrDeferred = xhrDeferred.then(function () {\n          return signOutServer(server);\n        });\n      }\n      if (server.get('connected') === false) {\n        // If the server is unavailable to begin with, immediately destroy it.\n        destroyServer(server);\n      } else {\n        xhrDeferred.always(function () {\n          // Attempt to connect to the server again. If it fails, then we\n          // should remove the server completely from the app.\n          dispatcher.trigger('test:server', server);\n          server.populate().fail(function () {\n            destroyServer(server);\n          });\n        });\n      }\n    }\n    xhrDeferred.always(function () {\n      confirmModal.hide();\n    });\n    return xhrDeferred.promise();\n  }\n  let message;\n  if (device) {\n    message = t(\n      'If you remove the server, all syncs and shares associated with the server will be lost and you will need to sign the server in again to restore access to Plex.'\n    );\n  } else {\n    message = t('Are you sure you want to remove this server?');\n  }\n  const modalOptions = {\n    title: t('Remove Server'),\n    message: message,\n    confirmLabel: t('Remove'),\n    cancelLabel: t('Cancel'),\n    async: true,\n    hasDanger: true,\n  };\n  if (device) {\n    (modalOptions as any).requireDoubleConfirm = true;\n    (modalOptions as any).doubleConfirmMessage = t(\n      'Are you sure you want to remove this server?'\n    );\n    (modalOptions as any).doubleConfirmLabel = t(\"Yes, I'm sure\");\n  }\n  const confirmModal = new ConfirmModal(modalOptions);\n  let promise = confirmModal.promise;\n  promise = promise.then(function () {\n    return remove();\n  });\n  dispatcher.trigger('show:modal', confirmModal);\n  return promise;\n}\nexport default removeServerCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport { garbageCollectEntities } from 'app/js/stores/actions/appActions';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport log from 'app/js/utils/log/log';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport xhrTracker from 'app/js/utils/xhr/xhrTracker';\n\nfunction resetUserCommand() {\n  const appStore = resolve('appStore');\n  const appModel = resolve('appModel');\n  const ui = appModel.get('ui');\n  const user = appModel.get('user');\n  const fakeRouter = appModel.get('fakeRouter');\n  const cloudServer = user.server;\n  let promise = user.clearAccessToken();\n\n  promise = promise\n    .fail(() => {\n      log.warn('Failed to clear the access token and user storage');\n    })\n    .always(() => {\n      appModel.set('history', []);\n\n      if (ui) {\n        ui.restoreDefaults();\n      }\n\n      if (fakeRouter) {\n        fakeRouter.restoreDefaults();\n      }\n\n      xhrTracker.abortAll();\n\n      user.signOut();\n      user.uninitialize();\n      user.initialize();\n\n      // Clear all servers before garbage collecting so server entities can be\n      // cleaned up.\n\n      dispatcher.trigger('clear:servers');\n\n      // When the user is signed out, the user model is reset.  This can cause\n      // dangling entities (eg: providers)\n\n      appStore.dispatch(garbageCollectEntities({ budget: Infinity }));\n\n      // Restore the cloud server in the server cache since the cloud server is\n      // reused. This ensures that a task like switching users does not need to\n      // wait for a fresh cloud server with its own connection test.\n\n      dispatcher.trigger('clearAll:cache');\n      cloudServer.cache.store(cloudServer);\n    });\n\n  return alwaysResolve(promise);\n}\n\nexport default resetUserCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport commands from 'app/js/commands/commands';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport * as metricsEvents from 'app/js/utils/constants/metrics/metricsEvents';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport navigateToRoute from 'app/js/v4/routes/navigateToRoute';\n\nfunction switchUserCommand(options = {}) {\n  // If plex.tv is available, always use the server to authenticate.\n  // Otherwise, try to use the hash from storage.\n  const user = resolve('appModel').get('user');\n  const isUserSignedIn = user.get('signedIn');\n  const isDifferentUser = user.id !== (options as any).homeUser.id;\n  const allowGuestLock = (options as any).allowGuestLock;\n  const isRemoteUser = !!(options as any).isRemoteUser;\n  const shouldSwitchUser = isDifferentUser || allowGuestLock;\n  let authPromise = isUserSignedIn\n    ? commands.execute('authenticateWithServer', options)\n    : commands.execute('authenticateWithHash', options);\n  if (isUserSignedIn && shouldSwitchUser) {\n    authPromise = authPromise.then((response: any) => {\n      return switchUser(response, options);\n    });\n  } else {\n    authPromise.done(() => {\n      const attributes = {\n        isRemote: isRemoteUser,\n      };\n      user.set(attributes);\n    });\n  }\n  authPromise.done(() => {\n    navigateToRoute('home');\n  });\n  return authPromise;\n}\nfunction switchUser(response: any, options: any) {\n  // After the current user has been completely signed out, switch to\n  // the new user with the response from our initial request.\n  const user = resolve('appModel').get('user');\n  let promise = commands.execute('resetUser');\n  promise = promise.then(() => {\n    // Activate the stored user before resetting the servers and providers so\n    // the stored user model and `lastPrimaryServerID` is available to each\n    // initializer.\n    user.activateStoredUser(options.homeUser.id);\n    const storedUser = userStorageModel.getActiveUser();\n    if (storedUser) {\n      storedUser.copyToModel(user);\n    }\n    dispatcher.trigger('init:servers');\n    const attributes = {};\n    return user.signIn(response, attributes);\n  });\n  promise.done(() => {\n    resolve('metrics').trackEvent({\n      event: metricsEvents.CLIENT_SWITCH_USER,\n      interaction: true,\n    });\n  });\n  return promise;\n}\nexport default switchUserCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport config from 'app/js/models/config';\nimport canShareSyncSettings from 'app/js/utils/user/canShareSyncSettings';\n\n// All requests that return user(s) should contain certain params to ensure we\n// get back all the attributes and relations that we expect.\nexport default function getUserRequestParams(userModel: any, overrides = {}) {\n  return {\n    includeSubscriptions: 1,\n    includeProviders: 1,\n\n    // When a platform does not yet support settings sync we should not receive\n    // settings from plex.tv.  Otherwise if for some reason settings have been\n    // sync'd to plex.tv they could possibly overwrite the local settings.\n    includeSettings: config.allowSyncSettings ? 1 : 0,\n\n    includeSharedSettings: canShareSyncSettings(userModel) ? 1 : 0,\n    ...overrides,\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport dimensionsAdapter from 'app/js/adapters/dimensionsAdapter';\n\nfunction getUserAPIPromise(xhrOptions: any) {\n  xhrOptions.headers = {\n    ...dimensionsAdapter.getInstance(),\n    ...(xhrOptions.headers || {}),\n  };\n\n  return $.ajax(xhrOptions);\n}\n\nexport default getUserAPIPromise;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as adapters from 'app/js/adapters/adapters';\nimport config from 'app/js/models/config';\nimport getUserRequestParams from 'app/js/utils/getUserRequestParams';\nimport path from 'app/js/utils/url/path';\nimport getUserAPIPromise from 'app/js/utils/user/getUserAPIPromise';\n\nfunction authenticateWithServerCommand(options: any) {\n  const homeUser = options.homeUser;\n  const appModel = adapters.resolve('appModel');\n  const user = appModel.get('user');\n  const uuID = homeUser.get('uuid') || user.get('uuid');\n  const params = getUserRequestParams(user, { pin: options.pin });\n\n  // Send credentials with the request so plex.tv can update its session to\n  // reflect the switched to user, if the app is configured to share auth.\n  const url = path.join(['/api/v2/home/users/', uuID, '/switch'], params);\n  const xhrOptions = homeUser.server.getXHROptions(url, {\n    type: 'POST',\n    xhrFields: { withCredentials: config.allowSSO },\n  });\n\n  return getUserAPIPromise(xhrOptions);\n}\n\nexport default authenticateWithServerCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\n\nfunction authenticateWithHashCommand(options: any) {\n  const resolvedPromise = $.Deferred().resolve().promise();\n  const rejectedPromise = $.Deferred().reject().promise();\n  const activeUser = userStorageModel.getActiveUser();\n\n  if (!activeUser) {\n    return rejectedPromise;\n  }\n\n  const pin = activeUser.get('pin');\n  const authToken = activeUser.get('authToken');\n\n  // Allow users without a pin to authenticate.\n  if (!pin && !options.pin) {\n    return resolvedPromise;\n  }\n\n  const user = resolve('appModel').get('user');\n  const hash = user.hashPIN(options.pin, authToken);\n\n  if (pin === hash) {\n    return resolvedPromise;\n  } else {\n    return rejectedPromise;\n  }\n}\n\nexport default authenticateWithHashCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport dispatcher from 'app/js/utils/dispatcher';\nimport t from 'app/js/utils/t';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n\nfunction removeDeviceCommand(options: any) {\n  const device = options.device;\n\n  function remove() {\n    const xhrDeferred = device.destroy({ wait: true });\n\n    xhrDeferred.fail(function () {\n      dispatcher.trigger('show:alert', {\n        type: 'error',\n        message: t('There was a problem removing this device.'),\n      });\n    });\n\n    xhrDeferred.always(function () {\n      confirmModal.hide();\n    });\n\n    return xhrDeferred.promise();\n  }\n\n  const message = t(\n    'If you remove this device, you will need to sign in again on the device to restore access to Plex.'\n  );\n\n  const confirmModal = new ConfirmModal({\n    title: t('Remove Device'),\n    message: message,\n    confirmLabel: t('Remove'),\n    cancelLabel: t('Cancel'),\n    async: true,\n    hasDanger: true,\n  });\n\n  let promise = confirmModal.promise;\n  promise = promise.then(function () {\n    return remove();\n  });\n\n  dispatcher.trigger('show:modal', confirmModal);\n\n  return promise;\n}\n\nexport default removeDeviceCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { getMyPlexUrl } from 'app/js/utils/getRuntimeUrl';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport getUserAPIPromise from 'app/js/utils/user/getUserAPIPromise';\n\nfunction signOut(options: any) {\n  return alwaysResolve(\n    getUserAPIPromise({\n      url: getMyPlexUrl('/api/v2/users/signout'),\n      headers: {\n        'X-Plex-Token': options.accessToken,\n      },\n      type: 'DELETE',\n      xhrFields: { withCredentials: __HOSTED__ },\n    })\n  );\n}\n\nexport default signOut;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport commands from 'app/js/commands/commands';\nimport config from 'app/js/models/config';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport signOutHelper from 'app/js/stores/actions/helpers/user/signOut';\nimport * as metricsEvents from 'app/js/utils/constants/metrics/metricsEvents';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\n\nfunction signOutCommand() {\n  resolve('metrics').trackEvent({\n    event: metricsEvents.CLIENT_SIGN_OUT,\n    interaction: true,\n  });\n\n  const allowSSO = config.allowSSO;\n  const accessToken = resolve('appModel').get('user').get('authToken');\n\n  return alwaysResolve(\n    allowSSO\n      ? signOutHelper({\n          accessToken,\n        })\n      : $.Deferred().resolve().promise()\n  )\n    .then(() => commands.execute('resetUser'))\n    .then(() => {\n      // Switching users only clears sensitive attributes, but signing out\n      // should completely reset the storage model.\n      userStorageModel.restoreDefaults();\n\n      return userStorageModel.save();\n    })\n    .then(() => {\n      if (allowSSO) {\n        signOutHelper({ accessToken });\n      }\n\n      // Kick off `serverInitializer` to discover servers and providers.\n      dispatcher.trigger('init:servers');\n    });\n}\n\nexport default signOutCommand;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport commands from 'app/js/commands/commands';\nimport * as desktopCommands from 'app/js/commands/desktopCommands';\n\nexport default function commandsInitializer() {\n  commands.registerAll(desktopCommands);\n\n  return $.Deferred().resolve().promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport dispatcher from 'app/js/utils/dispatcher';\n\nconst cloudServerCompanionProxy = {\n  subscribe() {\n    dispatcher.on(\n      'cloudServer:processRemoteControlCommand',\n      this.onCloudServerCommand,\n      this\n    );\n  },\n\n  unsubscribe() {\n    dispatcher.off(\n      'cloudServer:processRemoteControlCommand',\n      this.onCloudServerCommand,\n      this\n    );\n  },\n\n  onCloudServerCommand(message: any) {\n    const command = message.Command;\n\n    const signal = {\n      supportsTimeline: false,\n      path: command.path,\n      commandID: command.commandID,\n      query: {\n        key: [command.queryKey],\n        offset: [command.queryOffset],\n        mediaIndex: [command.queryMediaIndex],\n        containerKey: [command.queryContainerKey],\n        playQueueID: [command.queryPlayqueueid],\n        type: [command.queryType],\n        volume: [command.queryVolume],\n        repeat: [command.queryRepeat],\n        autoPlay: [command.queryAutoPlay],\n        subtitleSize: [command.querySubtitleSize],\n        audioStreamID: [command.queryAudioStreamID],\n        subtitleStreamID: [command.querySubtitleStreamID],\n\n        token: [command.queryToken],\n        machineIdentifier: [command.queryMachineIdentifier],\n\n        protocol: [command.queryProtocol],\n        address: [command.queryAddress],\n        port: [command.queryPort],\n\n        text: [command.queryText],\n        field: [command.queryField],\n      },\n    };\n\n    resolve('localCompanionCommandHandler')(signal);\n  },\n};\n\nexport default cloudServerCompanionProxy;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const LEADER_STATUS_CHANGED = 'leaderStatusChanged';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { hasRegistered, resolve } from 'app/js/adapters/adapters';\nimport cloudServerCompanionProxy from 'app/js/managers/cloudServerCompanionProxy';\nimport { LEADER_STATUS_CHANGED } from 'app/js/utils/constants/localStorageLeaderEvents';\nimport log from 'app/js/utils/log/log';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\n\nlet registeredClientID: any = null;\nlet currentCompanionState: any = null;\nfunction isCompanionEnabled() {\n  const vote = getVote();\n  if (vote && !vote.isLeader()) {\n    return false;\n  }\n  return resolve('settingFinder').find('companion');\n}\nfunction validatePlayerRegistration() {\n  if (!isCompanionEnabled()) {\n    return;\n  }\n  const appModel = resolve('appModel');\n  const cloudServerModel = appModel.get('cloudServer');\n  const clientID = appModel.get('clientID');\n  if (\n    !cloudServerModel ||\n    !cloudServerModel.get('authorized') ||\n    !clientID ||\n    clientID === registeredClientID\n  ) {\n    return;\n  }\n  registeredClientID = clientID;\n  log.info(\n    '[Companion] Registering player with plex.tv, clientID=\"%s\"',\n    clientID\n  );\n  const companionProxy = resolve('companionProxy');\n  companionProxy\n    .registerPlayer(cloudServerModel, clientID)\n    .done(() => {\n      log.info(\n        '[Companion] Registered player with plex.tv, clientID=\"%s\"',\n        clientID\n      );\n    })\n    .fail((xhr: any) => {\n      xhr || (xhr = {});\n      registeredClientID = null;\n      log.warn(\n        '[Companion] Couldn\\'t register player with plex.tv, status=\"%s\", response=\"%s\"',\n        xhr.status,\n        xhr.responseText && xhr.responseText.substr(0, 100)\n      );\n    });\n}\nfunction unregisterPlayer() {\n  const appModel = resolve('appModel');\n  const cloudServerModel = appModel.get('cloudServer');\n  const clientID = appModel.get('clientID');\n  if (!cloudServerModel.get('authorized') || !clientID) {\n    return;\n  }\n  log.info(\n    '[Companion] Unregistering player with plex.tv, clientID=\"%s\"',\n    clientID\n  );\n  const companionProxy = resolve('companionProxy');\n  return companionProxy\n    .unregisterPlayer(cloudServerModel, clientID)\n    .done(() =>\n      log.info(\n        '[Companion] Unregistered player with plex.tv, clientID=\"%s\"',\n        clientID\n      )\n    )\n    .fail((xhr = {}) =>\n      log.warn(\n        '[Companion] Couldn\\'t unregister player with plex.tv, status=\"%s\", response=\"%s\"',\n        (xhr as any).status,\n        (xhr as any).responseText && (xhr as any).responseText.substr(0, 100)\n      )\n    );\n}\nfunction getVote() {\n  return hasRegistered('companionVote') ? resolve('companionVote') : null;\n}\nfunction updateCompanionState() {\n  const companionProxy = resolve('companionProxy');\n  const companionState = isCompanionEnabled();\n  if (currentCompanionState === companionState) {\n    return $.Deferred().resolve().promise();\n  }\n  currentCompanionState = companionState;\n  if (companionState) {\n    cloudServerCompanionProxy.subscribe();\n    return $.when(\n      companionProxy.subscribe(resolve('localCompanionCommandHandler'))\n    );\n  } else {\n    cloudServerCompanionProxy.unsubscribe();\n    return $.when(companionProxy.unsubscribe(), unregisterPlayer());\n  }\n}\nexport default function companionInitializer() {\n  const appModel = resolve('appModel');\n  const cloudServerModel = appModel.get('cloudServer');\n  // We might already have a clientID and an authorized cloud server at this\n  // stage, so try registering the player now. Otherwise listen out for changes\n  // after and register then.\n  // See: https://github.com/plexinc/plex-web-client/issues/8635\n  validatePlayerRegistration();\n  appModel.on('change:clientID', validatePlayerRegistration);\n  cloudServerModel.on('change:authorized', validatePlayerRegistration);\n  resolve('settingFinder').addCompanionChangeListener(updateCompanionState);\n  const vote = getVote();\n  if (vote) {\n    vote.on(LEADER_STATUS_CHANGED, (isLeader: any) => {\n      log.info(\n        isLeader\n          ? '[Companion] Elected to poll leader role'\n          : '[Companion] Lost poll leader role'\n      );\n      updateCompanionState();\n    });\n  }\n  let promise;\n  if (isCompanionEnabled()) {\n    promise = updateCompanionState().then(() => {\n      const companionProxy = resolve('companionProxy');\n      const deepLinkPromise = companionProxy.getDeepLink();\n      deepLinkPromise.fail(() => {\n        log.warn('[Companion] Ignoring error getting deep link');\n      });\n      return alwaysResolve(deepLinkPromise);\n    });\n  } else {\n    promise = $.Deferred().resolve().promise();\n  }\n  return promise;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport whenEach from 'app/js/utils/promise/whenEach';\n\nexport default function desktopSettingsInitializer() {\n  const appModel = resolve('appModel');\n\n  return whenEach([\n    appModel.get('settings').populate(),\n    appModel.get('deviceSettings').populate(),\n  ]);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport log from 'app/js/utils/log/log';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst AbstractStorage = BaseClass.extend({\n  //\n  // Control\n  getStorage() {\n    // Abstract function\n  },\n  get(key: any) {\n    return this._catchStorageError((storage: any) => {\n      // Value resolution rules are shared with between storage modules.\n      // See: https://github.com/plexinc/plex-web-client/issues/1645\n      const PLEXWEB = (window as any).PLEXWEB;\n      const value =\n        PLEXWEB && key in PLEXWEB ? PLEXWEB[key] : storage.getItem(key);\n      if (value == null) {\n        throw new Error(`${key} is not in ${this.name}`);\n      }\n      return value;\n    });\n  },\n  set(key: any, value: any) {\n    return this._catchStorageError((storage: any) => {\n      if (!key) {\n        throw new Error(`Unable to set value in ${this.name} without a key`);\n      }\n      if (value == null) {\n        throw new Error(\n          `Unable to set null or undefined value for ${key} in ${this.name}. Use the remove function.`\n        );\n      }\n      return storage.setItem(key, value);\n    });\n  },\n  remove(key: any) {\n    return this._catchStorageError((storage: any) => {\n      return storage.removeItem(key);\n    });\n  },\n  clear() {\n    return this._catchStorageError((storage: any) => {\n      return storage.clear();\n    });\n  },\n  // Accessing session storage can result in errors if we run out of storage\n  // space or the browser is in a private browsing mode that disables session\n  // storage. Wrap all storage access in a try catch to prevent these errors\n  // from breaking the application.\n  _catchStorageError(accessFn: any) {\n    const deferred = $.Deferred();\n    try {\n      deferred.resolve(accessFn(this.getStorage()));\n    } catch (error) {\n      log.warn(error.message);\n      deferred.reject(error);\n    }\n    return deferred.promise();\n  },\n});\nexport default AbstractStorage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractStorage from 'app/js/adapters/storage/AbstractStorage';\n\nconst BasicVolatileStorage = AbstractStorage.extend({\n  //\n  // Properties\n\n  name: 'BasicVolatileStorage',\n\n  //\n  // Init\n\n  initialize() {\n    const storage = {};\n\n    this.api = {\n      getItem(key: any) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        return storage[key];\n      },\n\n      setItem(key: any, value: any) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        storage[key] = value;\n      },\n\n      removeItem(key: any) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        delete storage[key];\n      },\n\n      clear() {\n        for (const prop in storage) {\n          if (storage.hasOwnProperty(prop)) {\n            // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n            delete storage[prop];\n          }\n        }\n      },\n    };\n  },\n\n  //\n  // Control\n\n  getStorage() {\n    return this.api;\n  },\n});\n\nexport default BasicVolatileStorage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport Adapter from 'app/js/adapters/Adapter';\n\n// Storage operations should be considered async and should each return a\n// promise. Most platforms can use webStorage, but the Chrome app uses the\n// chrome.storage api, while the Playstation does not allow localStorage, so\n// we need to use cookies.\n\nconst volatileStorageAdapter = new Adapter({\n  interface: [\n    'get', // (`'key name'`) Get the value for a key.\n    'set', // (`'key name', value`) Set a value for a key.\n    'remove', // (`'key name'`) Remove a key value pair.\n    'clear', // () Clear all data.\n  ],\n});\n\n// Singleton\nexport default volatileStorageAdapter;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport storageAdapter from 'app/js/adapters/storageAdapter';\nimport parseJSON from 'app/js/utils/parser/parseJSON';\n\nexport function getJSON(key: any, defaultValue: any) {\n  return storageAdapter.get(key).then(\n    (storageString: any) => parseJSON(storageString, defaultValue),\n    // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n    () => {\n      if (defaultValue) {\n        return $.Deferred().resolve(defaultValue).promise();\n      }\n    }\n  );\n}\n\nexport function setJSON(key: any, value: any) {\n  return storageAdapter.set(key, JSON.stringify(value));\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport * as jsonStorage from 'app/js/utils/storage/jsonStorage';\n\n// Previously experienceSettings were per device.  Now they are per user. So all\n// users must have these settings applied to their experienceSettings.\n\nfunction migrateExperienceSettingsToAllStoredUsers(experienceSettings: any) {\n  // Settings are marked as dirty so they are updated on plex.tv during\n  // application start up.\n  experienceSettings.isDirty = true;\n\n  // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n  return jsonStorage.getJSON(userStorageModel.storageKey).then((json: any) => {\n    if (!json.users) {\n      return;\n    }\n\n    json.users.forEach((user: any) => {\n      user.experienceSettings = {\n        ...user.experienceSettings,\n        ...experienceSettings,\n      };\n    });\n\n    return jsonStorage.setJSON(userStorageModel.storageKey, json);\n  });\n}\n\nexport default migrateExperienceSettingsToAllStoredUsers;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport storageAdapter from 'app/js/adapters/storageAdapter';\nimport migrateExperienceSettingsToAllStoredUsers from 'app/js/initializers/migrations/migrateExperienceSettingsToAllStoredUsers';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport * as jsonStorage from 'app/js/utils/storage/jsonStorage';\n\n// Some existing settings are specific to a user and cannot be migrated.  eg:\n// homeSettings refers to hubs that users might not have access too.\nconst userSpecificAttrs = ['homeSettings'];\n\n// appModel.experienceSettings -> appModel.user.experienceSettings\n//\n// This migration handles the migration of settings from, and the deletion of\n// ExperienceSettingsModel.  Previously there were platform specific experience\n// settings but now there is only a single UserExperienceSettingsModel.\n//\n// If there are platform specific fields that need to be migrated from\n// appModel.experienceSettings they need to be done before this migration runs.\n\nfunction migrateExperienceSettings() {\n  const StoredUserExperienceSettingsModel = resolve(\n    'StoredUserExperienceSettingsModel'\n  );\n  const allAttrs = Object.keys({\n    ...StoredUserExperienceSettingsModel.prototype.syncedAttrs,\n    ...StoredUserExperienceSettingsModel.prototype.syncedRelations,\n  });\n  const migrationAttrs = _.without(allAttrs, ...userSpecificAttrs);\n\n  const promise = jsonStorage\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    .getJSON('experience')\n    .then((existingExperienceSettings: any) => {\n      const migratedSettings = _.pick(\n        existingExperienceSettings,\n        migrationAttrs\n      );\n\n      return migrateExperienceSettingsToAllStoredUsers(migratedSettings).then(\n        () => {\n          // All attrs from experienceSettings have been migrated now, so it can be\n          // deleted.\n          return storageAdapter.remove('experience');\n        }\n      );\n    });\n\n  return alwaysResolve(promise);\n}\n\nexport default migrateExperienceSettings;\n","const castAppIDs = {\n  PRODUCTION: '9AC194DC',\n  QA: '4289C4E0',\n  NINJA: 'EB90125F',\n  CUSTOM: 'custom',\n};\n(castAppIDs as any).settings = [\n  {\n    value: castAppIDs.PRODUCTION,\n    title: 'Production',\n  },\n  {\n    value: castAppIDs.QA,\n    title: 'QA',\n  },\n  {\n    value: castAppIDs.NINJA,\n    title: 'Ninja',\n  },\n  {\n    value: castAppIDs.CUSTOM,\n    title: 'Custom',\n  },\n];\nexport default castAppIDs;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst debugAdKinds = {\n  NONE: 0,\n  VAST: 1,\n};\n(debugAdKinds as any).settings = [\n  {\n    value: debugAdKinds.NONE,\n    title: 'None',\n  },\n  {\n    value: debugAdKinds.VAST,\n    title: 'Add ?debug=1 to ad requests',\n  },\n];\nexport default debugAdKinds;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst debugLevels = {\n  DISABLED: 0,\n  ENABLED: 1,\n  VERBOSE: 2,\n};\n// See: translations/master/base/en.manual.json\n(debugLevels as any).settings = [\n  {\n    value: debugLevels.DISABLED,\n    title: 'Disabled',\n  },\n  {\n    value: debugLevels.ENABLED,\n    title: 'Enabled',\n  },\n  {\n    value: debugLevels.VERBOSE,\n    title: 'Verbose',\n  },\n];\nexport default debugLevels;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport attrTypes from 'app/js/models/attrTypes';\nimport config from 'app/js/models/config';\nimport AbstractStorageModel from 'app/js/models/storage/AbstractStorageModel';\nimport castAppIDs from 'app/js/utils/constants/castAppIDs';\nimport debugAdKinds from 'app/js/utils/constants/debugAdKinds';\nimport debugLevels from 'app/js/utils/constants/debugLevels';\n\nconst DeviceSettingsModel = AbstractStorageModel.extend({\n  //\n  // Properties\n\n  name: 'DeviceSettingsModel',\n  storageKey: 'deviceSettings',\n\n  sessionAttrs: {\n    isSaving: attrTypes.boolean,\n    saveError: attrTypes.object,\n  },\n\n  syncedAttrs: {\n    chromecastAppID: attrTypes.string,\n    chromecastCustomAppID: attrTypes.string,\n    sonosCustomBaseURL: attrTypes.string,\n    debugAdKind: attrTypes.integer,\n    debugLevel: attrTypes.integer,\n    debugVideoQualityOverlay: attrTypes.boolean,\n    directPlay: attrTypes.boolean,\n    directStream: attrTypes.boolean,\n    rejectDirectConnections: attrTypes.boolean,\n    restorePlayQueue: attrTypes.object,\n    shouldSyncSettings: attrTypes.boolean,\n    hasDismissedServerDownloadMessage: attrTypes.boolean,\n    dismissedUnclaimedServers: attrTypes.object,\n    dismissedServerUpdateVersions: attrTypes.object,\n    volume: attrTypes.integer,\n\n    // Deprecated. Once dismissedServerUpdateVersions is included in a public\n    // bundled PMS release, then after the following public PMS release we can\n    // remove serverUpdateDismissedVersion and its usages.\n    serverUpdateDismissedVersion: attrTypes.string,\n  },\n\n  defaults() {\n    return {\n      isSaving: false,\n      saveError: null,\n\n      chromecastAppID: castAppIDs.PRODUCTION,\n      debugAdKind: debugAdKinds.NONE,\n      debugLevel: debugLevels.DISABLED,\n      debugVideoQualityOverlay: false,\n      directPlay: true,\n      directStream: true,\n      rejectDirectConnections: false,\n      restorePlayQueue: null,\n      shouldSyncSettings: config.allowSyncSettings,\n      hasDismissedServerDownloadMessage: false,\n      dismissedUnclaimedServers: {},\n      dismissedServerUpdateVersions: {},\n      volume: 90,\n    };\n  },\n});\n\nexport default DeviceSettingsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport DeviceSettingsModel from 'app/js/models/settings/DeviceSettingsModel';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport * as jsonStorage from 'app/js/utils/storage/jsonStorage';\n\nconst movedAttrs = ['debugVideoQualityOverlay', 'restorePlayQueue', 'volume'];\n\n// Handles the migration of attributes from appModel.experienceSettings to\n// appModel.deviceSettings\n//\n// This migration assumes that appModel.experience will be deleted by a later\n// migration.\n\nfunction migrateExperienceSettingsToDeviceSettings() {\n  const deviceSettingsStorageKey = DeviceSettingsModel.prototype.storageKey;\n\n  const promise = jsonStorage\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    .getJSON('experience')\n    .then((existingExperienceSettings: any) => {\n      const migratedDeviceSettings = _.pick(\n        existingExperienceSettings,\n        movedAttrs\n      );\n\n      if (Object.keys(migratedDeviceSettings).length === 0) {\n        return;\n      }\n\n      return jsonStorage\n        .getJSON(deviceSettingsStorageKey, {})\n        .then((originalDeviceSettings: any) => {\n          const updatedDeviceSettings = {\n            ...originalDeviceSettings,\n            ...migratedDeviceSettings,\n          };\n\n          return jsonStorage.setJSON(\n            deviceSettingsStorageKey,\n            updatedDeviceSettings\n          );\n        });\n    });\n\n  return alwaysResolve(promise);\n}\n\nexport default migrateExperienceSettingsToDeviceSettings;\n","/* eslint-plugin-disable @typescript-eslint */\n\n// We should only match when there is an appropriate server-level equivalent.\n// The list of server level hubs available are here:\n// https://github.com/plexinc/plex-media-server/blob/a28c9f74a3c03a09ff083a849e4a36897b71f934/Hubs/HubsRequestHandler.cpp#L1856-L1863\nconst patternsByGlobalIdentifier = {\n  'home.continue': [/^(movie|tv)\\.inprogress\\.([0-9]+)/],\n  'home.movies.recent': [/^movie\\.recentlyadded\\.([0-9]+)/],\n  'home.music.recent': [/^music\\.recent\\.added\\.([0-9]+)/],\n  'home.photos.recent': [/^photo\\.recent\\.([0-9]+)/],\n  'home.ondeck': [/^tv\\.ondeck\\.([0-9]+)/],\n  'home.television.recent': [/^tv\\.recentlyadded\\.([0-9]+)/],\n  'home.videos.recent': [/^video\\.recent\\.([0-9]+)/],\n};\n\nfunction patternMatches(hubIdentifier: any, patterns: any) {\n  return patterns.some((pattern: any) => pattern.test(hubIdentifier));\n}\n\nexport default function toHomeHubIdentifier(hubIdentifier: any) {\n  for (const globalIdentifier in patternsByGlobalIdentifier) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const patterns = patternsByGlobalIdentifier[globalIdentifier];\n\n    if (patternMatches(hubIdentifier, patterns)) {\n      return globalIdentifier;\n    }\n  }\n\n  return hubIdentifier;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst subtitleColors = {\n  WHITE: '#ffffff',\n  YELLOW: '#ffee00',\n  BLACK: '#000000',\n  CYAN: '#00ffff',\n  BLUE: '#0000ff',\n  GREEN: '#00ff00',\n  MAGENTA: '#ee00ee',\n  RED: '#ff0000',\n  GREY: '#808080',\n};\n// See: translations/master/base/en.manual.json\n(subtitleColors as any).settings = [\n  {\n    value: subtitleColors.WHITE,\n    title: 'White',\n  },\n  {\n    value: subtitleColors.YELLOW,\n    title: 'Yellow',\n  },\n  {\n    value: subtitleColors.BLACK,\n    title: 'Black',\n  },\n  {\n    value: subtitleColors.CYAN,\n    title: 'Cyan',\n  },\n  {\n    value: subtitleColors.BLUE,\n    title: 'Blue',\n  },\n  {\n    value: subtitleColors.GREEN,\n    title: 'Green',\n  },\n  {\n    value: subtitleColors.MAGENTA,\n    title: 'Magenta',\n  },\n  {\n    value: subtitleColors.RED,\n    title: 'Red',\n  },\n  {\n    value: subtitleColors.GREY,\n    title: 'Grey',\n  },\n];\n(subtitleColors as any).ALL = [\n  subtitleColors.WHITE,\n  subtitleColors.YELLOW,\n  subtitleColors.BLACK,\n  subtitleColors.CYAN,\n  subtitleColors.BLUE,\n  subtitleColors.GREEN,\n  subtitleColors.MAGENTA,\n  subtitleColors.RED,\n  subtitleColors.GREY,\n];\nexport default subtitleColors;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst subtitlePositions = {\n  TOP: 'top',\n  MIDDLE: 'middle',\n  BOTTOM: 'bottom',\n};\n// See: translations/master/base/en.manual.json\n(subtitlePositions as any).settings = [\n  {\n    value: subtitlePositions.TOP,\n    title: 'Top',\n  },\n  {\n    value: subtitlePositions.MIDDLE,\n    title: 'Middle',\n  },\n  {\n    value: subtitlePositions.BOTTOM,\n    title: 'Bottom',\n  },\n];\n(subtitlePositions as any).ALL = [\n  subtitlePositions.TOP,\n  subtitlePositions.MIDDLE,\n  subtitlePositions.BOTTOM,\n];\nexport default subtitlePositions;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst subtitlesBurnLevels = {\n  AUTO: 'auto',\n  AVOID: 'avoid',\n  ALWAYS: 'always',\n  NEVER: 'never',\n};\n// See: translations/master/base/en.manual.json\n(subtitlesBurnLevels as any).settings = [\n  {\n    value: subtitlesBurnLevels.AUTO,\n    title: 'Automatic',\n  },\n  {\n    value: subtitlesBurnLevels.AVOID,\n    title: 'Only image formats',\n  },\n  {\n    value: subtitlesBurnLevels.ALWAYS,\n    title: 'Always',\n  },\n];\nexport default subtitlesBurnLevels;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport languages from './languages';\n\n// Compares an array of language and region strings against known languages.\n// If a language-region combination is unsupported the language-only value is\n// examined as well.\n\nconst hyphenatedRegExp = /(^[^-]+)-/;\n\n// @ts-expect-error ts-migrate(7023) FIXME: 'closestLanguage' implicitly has return type 'any'... Remove this comment to see the full error message\nexport default function closestLanguage(searchLanguages: any) {\n  searchLanguages = searchLanguages || [];\n\n  for (let i = 0, len = searchLanguages.length; i < len; i++) {\n    const code = searchLanguages[i];\n\n    if (code === 'xx' || code === 'xn') {\n      continue;\n    }\n\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    if (languages[code]) {\n      return code;\n    }\n\n    const match = code.match(hyphenatedRegExp);\n    // @ts-expect-error ts-migrate(7022) FIXME: 'codeFromMatch' implicitly has type 'any' because ... Remove this comment to see the full error message\n    const codeFromMatch = match && closestLanguage([match[1]]);\n\n    if (codeFromMatch) {\n      return codeFromMatch;\n    }\n  }\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport closestLanguage from './closestLanguage';\n\nexport default function getDefaultLanguage(language: any) {\n  const navigator = window.navigator;\n  let languages;\n  if (language) {\n    languages = [language];\n  } else if (navigator.languages) {\n    languages = navigator.languages;\n  } else if (navigator.language) {\n    languages = [navigator.language];\n  } else if ((navigator as any).userLanguage) {\n    languages = [(navigator as any).userLanguage];\n  }\n  return closestLanguage(languages) || 'en';\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport PropTypes from 'prop-types';\n\nexport const POSTER = 'poster';\nexport const MOSAIC = 'mosaic';\nexport const TABLE = 'table';\nexport const SIMPLE_SUMMARY = 'simpleSummary';\nexport const SUMMARY = 'summary';\nexport const EPG_EPISODE = 'epgEpisode';\nexport const SHARED_ITEMS = 'sharedItems';\n\n// Show the menu if there is more than one style option. Otherwise, still\n// show the container with the poster size slider if the selected/only style\n// is the poster or mosaic view.\nexport function showListStyles(allListStyles: any, selectedListStyle: any) {\n  return (\n    showListStylesSlider(selectedListStyle) || showListStylesMenu(allListStyles)\n  );\n}\n\nexport function showListStylesSlider(selectedListStyle: any) {\n  return selectedListStyle === POSTER || selectedListStyle === MOSAIC;\n}\n\nexport function showListStylesMenu(allListStyles: any) {\n  return allListStyles.length > 1;\n}\n\nconst metadataListStyle = PropTypes.oneOf([\n  POSTER,\n  MOSAIC,\n  TABLE,\n  SIMPLE_SUMMARY,\n  SUMMARY,\n  EPG_EPISODE,\n  SHARED_ITEMS,\n]);\n\nexport default metadataListStyle;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\n// A ReminderModel is created the first time a reminder is displayed. It is then\n// responsible for influencing the timing of future reminders.\nconst ReminderModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ReminderModel',\n\n  syncedAttrs: {\n    data: attrTypes.object,\n    id: attrTypes.string.isRequired,\n    // Next date to show a reminder formatted as an ISO8601 string.\n    remindAfter: attrTypes.string.isRequired,\n    // The number of times the user has been reminded not counting the initial\n    // notification.\n    times: attrTypes.integer.isRequired,\n  },\n});\n\nexport default ReminderModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ReminderModel from './ReminderModel';\n\nconst ReminderCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ReminderCollection',\n\n  model: ReminderModel,\n});\n\nexport default ReminderCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport migrateUserExperienceSettings from 'app/js/initializers/migrations/migrateUserExperienceSettings';\nimport attrTypes from 'app/js/models/attrTypes';\nimport AbstractStorageModel from 'app/js/models/storage/AbstractStorageModel';\nimport * as audioBoostLevels from 'app/js/utils/constants/audioBoostLevels';\nimport httpFallbackOptions from 'app/js/utils/constants/httpFallbackOptions';\nimport subtitleColors from 'app/js/utils/constants/subtitleColors';\nimport subtitlePositions from 'app/js/utils/constants/subtitlePositions';\nimport subtitlesBurnLevels from 'app/js/utils/constants/subtitlesBurnLevels';\nimport getDefaultLanguage from 'app/js/utils/language/getDefaultLanguage';\nimport log from 'app/js/utils/log/log';\nimport parseInteger from 'app/js/utils/parser/parseInteger';\nimport abstractPlayerQualities from 'app/js/utils/player/abstractPlayerQualities';\nimport * as metadataContexts from 'app/js/views/v3/helpers/props/metadataContext';\nimport * as metadataListStyles from 'app/js/views/v3/helpers/props/metadataListStyle';\nimport * as recordingScheduleViewTypes from 'app/js/views/v3/helpers/props/recordingScheduleViewTypes';\nimport ReminderCollection from './ReminderCollection';\nimport userExperienceModelAttrs from './userExperienceModelAttrs';\n\nexport const localQualityDefault = abstractPlayerQualities.ORIGINAL;\nexport const remoteQualityDefault = 6;\n\n// schemaVersion represents the version of the structure of the stored\n// settings. It is critical when retrieving settings from plex.tv and the sync\n// settings feature.\n//\n// schemaVersion must be incremented when:\n// - add to syncedAttrs or syncedRelations\n// - remove from syncedAttrs or syncedRelations\n// - change the way a syncedAttrs or syncedRelations is used.  Which includes\n//   when we change the expected structure of an attr / relation of type\n//   `attrTypes.object`\n//\n// We do not *need* to increment schemaVersion when:\n// - making changes to sessionAttrs or sessionRelations\n// - making changes to code like augmentResponse etc.\n// - making changes to defaults\n//\n// schemaVersion increment checklist:\n// - Add to migrateUserExperienceSettings.schemaVersionMigrations\n// - Manually increment schemaVersion\nconst schemaVersion = 6;\n\nconst UserExperienceSettingsModel = AbstractStorageModel.extend(\n  {\n    //\n    // Properties\n\n    name: 'UserExperienceSettingsModel',\n\n    sessionAttrs: {\n      ...userExperienceModelAttrs.sessionAttrs,\n      isRemoteSchemaVersionNewer: attrTypes.boolean,\n    },\n\n    syncedAttrs: {\n      ...userExperienceModelAttrs.syncedAttrs,\n\n      // General\n      schemaVersion: attrTypes.integer,\n      language: attrTypes.string,\n      playThemeMusic: attrTypes.boolean,\n      companion: attrTypes.boolean,\n      allowHttpFallback: attrTypes.string,\n      timeFormat: attrTypes.string,\n      dismissedWhatsNewFeatures: attrTypes.object,\n\n      // Quality\n      autoAdjustQuality: attrTypes.boolean,\n      remoteSmallVideoAtOriginalQuality: attrTypes.boolean,\n      useHomeStreamingRecommendedSettings: attrTypes.boolean,\n      localQuality: attrTypes.integer,\n      remoteQuality: attrTypes.integer,\n\n      // Player\n      audioBoost: attrTypes.integer,\n      subtitleColor: attrTypes.string,\n      subtitlePosition: attrTypes.string,\n      subtitleSize: attrTypes.integer,\n      subtitlesBurnLevel: attrTypes.string,\n      extrasPrefixCount: attrTypes.integer,\n      audioForceMultiChannel: attrTypes.boolean,\n      forceTranscodeProtocolHLS: attrTypes.boolean,\n\n      // Inline\n      autoPlay: attrTypes.boolean,\n      calendarViewType: attrTypes.string,\n      columnAdjustment: attrTypes.integer,\n      columnWidthMultiplier: attrTypes.float,\n      dashboardNowPlayingShowDetails: attrTypes.boolean,\n      hasDismissedDVRUpsell: attrTypes.boolean,\n      hasDismissedServerDashboardUpsell: attrTypes.boolean,\n      hasDismissedHubPromotionWarning: attrTypes.boolean,\n      isSidebarCollapsed: attrTypes.boolean,\n      libraryTableColumns: attrTypes.object,\n      listStyles: attrTypes.object,\n      prePlayListStyles: attrTypes.object,\n      directoryListStyles: attrTypes.object,\n      directoryTableColumns: attrTypes.object,\n      savedDirectoryListKeys: attrTypes.object,\n      relayReminders: attrTypes.object,\n      showAdvancedSettings: attrTypes.boolean,\n      showPrePlayArtwork: attrTypes.boolean,\n\n      // Downloads\n      musicDownloadQuality: attrTypes.integer,\n      videoDownloadQuality: attrTypes.integer,\n\n      // Search\n      recentSearches: attrTypes.array,\n\n      // Unused attributes\n      // The following attributes are no longer used and only\n      // kept to avoid unnecessarily bumping schema version\n      searchAllServers: attrTypes.boolean,\n      libraryRoutes: attrTypes.object,\n      hasDismissedNewsSunsetBanner: attrTypes.boolean,\n      hasDismissedCustomHomeSunset: attrTypes.boolean,\n    },\n\n    syncedRelations: {\n      ...userExperienceModelAttrs.syncedRelations,\n\n      reminders: {\n        relationClass: ReminderCollection,\n      },\n    },\n\n    defaults() {\n      return {\n        ...userExperienceModelAttrs.defaults,\n\n        // General\n        isRemoteSchemaVersionNewer: false,\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 0.\n        language: getDefaultLanguage(),\n        playThemeMusic: false,\n        companion: true,\n        allowHttpFallback: httpFallbackOptions.NEVER,\n        timeFormat: 'h:mma',\n        dismissedWhatsNewFeatures: {},\n\n        // Quality\n        autoAdjustQuality: false,\n        remoteSmallVideoAtOriginalQuality: true,\n        useHomeStreamingRecommendedSettings: true,\n        localQuality: localQualityDefault,\n        remoteQuality: remoteQualityDefault,\n\n        // Player\n        audioBoost: audioBoostLevels.NORMALIZED,\n        subtitleColor: subtitleColors.WHITE,\n        subtitlePosition: subtitlePositions.BOTTOM,\n        subtitleSize: 100,\n        subtitlesBurnLevel: subtitlesBurnLevels.AUTO,\n        extrasPrefixCount: 0,\n        audioForceMultiChannel: false,\n        forceTranscodeProtocolHLS: false,\n\n        // Inline\n        autoPlay: true,\n        calendarViewType: recordingScheduleViewTypes.CALENDAR,\n        columnAdjustment: 0,\n        columnWidthMultiplier: 1.5,\n        dashboardNowPlayingShowDetails: false,\n        hasDismissedServerDashboardUpsell: false,\n        isSidebarCollapsed: false,\n        libraryTableColumns: {},\n        listStyles: {\n          [metadataContexts.LIBRARY]: {\n            episode: metadataListStyles.TABLE,\n            track: metadataListStyles.TABLE,\n          },\n          [metadataContexts.PRE_PLAY]: {\n            track: metadataListStyles.TABLE,\n          },\n        },\n        prePlayListStyles: {},\n        directoryListStyles: {},\n        directoryTableColumns: {},\n        savedDirectoryListKeys: {},\n        relayReminders: {},\n        showAdvancedSettings: false,\n        showPrePlayArtwork: false,\n\n        // Downloads\n        musicDownloadQuality: abstractPlayerQualities.ORIGINAL,\n        videoDownloadQuality: abstractPlayerQualities.ORIGINAL,\n\n        // Search\n        recentSearches: [],\n\n        // Unused attributes\n        searchAllServers: false,\n        libraryRoutes: {},\n        hasDismissedNewsSunsetBanner: false,\n        hasDismissedCustomHomeSunset: false,\n      };\n    },\n\n    //\n    // Init\n\n    initialize() {\n      // We want schemaVersion to be included in the toJSON response.  So set it\n      // in the initialise and not as a default.\n      this.set({ schemaVersion: UserExperienceSettingsModel.schemaVersion });\n    },\n\n    //\n    // Control\n\n    augmentResponse(response: any) {\n      if (response.schemaVersion > UserExperienceSettingsModel.schemaVersion) {\n        // We can't use the response.  It could contain unknown attrs and break\n        // the app.  From this point we cannot share sync settings with other\n        // devices.\n        log.warn(\n          `[Settings] Received settings with schemaVersion of ${response.schemaVersion}; expected ${UserExperienceSettingsModel.schemaVersion} or less.  Settings sharing is now disabled.`\n        );\n\n        return {\n          ...this.toJSON(),\n          isRemoteSchemaVersionNewer: true,\n        };\n      }\n\n      response = migrateUserExperienceSettings(response);\n\n      const isDirty = this.get('isDirty');\n      const updatedAt = this.get('updatedAt');\n      const responseUpdatedAt = parseInteger(response.updatedAt);\n\n      const isModelNewerVersion =\n        updatedAt && responseUpdatedAt && updatedAt > responseUpdatedAt;\n\n      const isResponseNewerVersion =\n        updatedAt && responseUpdatedAt && updatedAt < responseUpdatedAt;\n\n      // Prefer our local values when they have not yet been synced successfully\n      // and it is same version as what is returned from server.\n      //\n      // It is possible that this model is populated from the server before we\n      // restore the stored settings.  In which case we prefer the values from\n      // this model.\n      if ((isDirty && updatedAt === responseUpdatedAt) || isModelNewerVersion) {\n        return this.toJSON();\n      }\n\n      if (isDirty && isResponseNewerVersion) {\n        response.isDirty = false;\n      }\n\n      // Response version is known.  We can share sync settings now.\n      response.isRemoteSchemaVersionNewer = false;\n\n      return response;\n    },\n  },\n  {\n    //\n    // Static\n\n    schemaVersion,\n  }\n);\n\nexport default UserExperienceSettingsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const CALENDAR = 'calendar';\nexport const AGENDA = 'agenda';\n\nexport const all = [CALENDAR, AGENDA];\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport synthesizeDirectoryID from 'app/js/utils/synthesizeDirectoryID';\nimport createKey from 'app/js/views/v3/helpers/createKey';\n\nfunction breakSourceKey(sourceKey: any) {\n  if (sourceKey) {\n    return sourceKey.split('--');\n  }\n}\n\nfunction migrateSourceKey(sourceKey: any) {\n  const keyParts = breakSourceKey(sourceKey);\n\n  // `sourceKey` doesn't look like we expect. It's likely a downloads key or\n  // something else unknown. Bail on work if we don't have enough parts.\n\n  if (keyParts.length < 3) {\n    return sourceKey;\n  }\n\n  const [machineIdentifier, providerIdentifier, directoryKey, pivotKey] =\n    keyParts;\n\n  const directoryID = synthesizeDirectoryID(directoryKey);\n\n  return createKey(\n    machineIdentifier,\n    providerIdentifier,\n    directoryID,\n    pivotKey\n  );\n}\n\nfunction migrateStoredKeys(storedKeys: any) {\n  Object.keys(storedKeys).forEach((key) => {\n    const newKey = migrateSourceKey(key);\n    if (newKey !== key) {\n      const currentValue = storedKeys[key];\n      storedKeys[newKey] = currentValue;\n      delete storedKeys[key];\n    }\n  });\n}\n\nexport default function migrateDirectoryKeyToID(userExperienceSettings: any) {\n  const {\n    lastSourcePivots,\n    savedPivotParams,\n    // @ts-expect-error ts-migrate(2525) FIXME: Initializer provides no value for this binding ele... Remove this comment to see the full error message\n    sidebarSettings: { pinnedSources } = {},\n  } = userExperienceSettings;\n\n  if (lastSourcePivots) {\n    migrateStoredKeys(lastSourcePivots);\n  }\n\n  if (savedPivotParams) {\n    migrateStoredKeys(savedPivotParams);\n  }\n\n  if (pinnedSources) {\n    pinnedSources.forEach((pinnedSource: any) => {\n      const keyParts = breakSourceKey(pinnedSource.key);\n      if (!keyParts) {\n        return;\n      }\n\n      const directoryKey = keyParts.pop();\n      const directoryID = synthesizeDirectoryID(directoryKey);\n\n      if (directoryID !== directoryKey) {\n        const newKey = createKey(...keyParts, directoryID);\n\n        if (!pinnedSource.directoryID) {\n          pinnedSource.directoryID = directoryID;\n        }\n\n        pinnedSource.key = newKey;\n      }\n    });\n  }\n\n  return userExperienceSettings;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction migrateHiddenAt(source: any) {\n  if (source.isHidden && !source.hiddenAt) {\n    source.hiddenAt = Date.now();\n  }\n}\n\nexport default function migrateSourceHiddenAt(userExperienceSettings: any) {\n  const sidebarSettings = userExperienceSettings.sidebarSettings;\n  if (sidebarSettings && sidebarSettings.pinnedSources) {\n    sidebarSettings.pinnedSources.forEach(migrateHiddenAt);\n  }\n\n  const homeSettings = userExperienceSettings.homeSettings;\n  if (homeSettings && homeSettings.hubs) {\n    homeSettings.hubs.forEach(migrateHiddenAt);\n  }\n\n  return userExperienceSettings;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport migrateCustomPromotedToHubs from 'app/js/initializers/migrations/migrateCustomPromotedToHubs';\nimport UserExperienceSettingsModel from 'app/js/models/user/UserExperienceSettingsModel';\nimport assert from 'app/js/utils/log/assert';\nimport log from 'app/js/utils/log/log';\nimport migrateAudioBoost from './migrateAudioBoost';\nimport migrateDirectoryKeyToID from './migrateDirectoryKeyToID';\nimport migrateRelayReminders from './migrateRelayReminders';\nimport migrateSourceHiddenAt from './migrateSourceHiddenAt';\nimport migrateToAutoHome from './migrateToAutoHome';\n\nconst schemaVersionMigrations = {\n  1: versionBumpOnlyMigration,\n  2: migrateDirectoryKeyToID,\n  3: versionBumpOnlyMigration,\n  4: migrateRelayReminders,\n  5: versionBumpOnlyMigration,\n  6: versionBumpOnlyMigration,\n};\n// List of migrations to run after all schemaVersionMigrations have already run.\nconst migrations = [\n  migrateToAutoHome,\n  migrateSourceHiddenAt,\n  migrateAudioBoost,\n  migrateCustomPromotedToHubs,\n];\n// A migration that results in only the schemaVersion being set\nfunction versionBumpOnlyMigration(userExperienceSettings: any) {\n  return userExperienceSettings;\n}\nexport default function migrateUserExperienceSettings(\n  userExperienceSettings = {}\n) {\n  if (__DEV__) {\n    Array.from({\n      length: Math.max(\n        UserExperienceSettingsModel.schemaVersion,\n        ...Object.keys(schemaVersionMigrations).map((key) => parseInt(key, 10))\n      ),\n    })\n      // @ts-expect-error\n      .map((_, i) => schemaVersionMigrations[i + 1])\n      .forEach((migration, i) => {\n        assert(\n          i < UserExperienceSettingsModel.schemaVersion,\n          `Schema migration ${\n            i + 1\n          } greater than UserExperienceSettingsModel.schemaVersion ${\n            UserExperienceSettingsModel.schemaVersion\n          }`\n        );\n        assert(migration, `Missing expected schema migration version ${i + 1}`);\n      });\n  }\n\n  // Default to zero as the settings could pre-date our usage of schemaVersion.\n  let schemaVersion = (userExperienceSettings as any).schemaVersion || 0;\n  while (schemaVersion < UserExperienceSettingsModel.schemaVersion) {\n    (userExperienceSettings as any).schemaVersion = ++schemaVersion;\n    // @ts-expect-error\n    schemaVersionMigrations[schemaVersion](userExperienceSettings);\n  }\n  migrations.forEach((migration, i) => {\n    try {\n      migration(userExperienceSettings);\n    } catch (error) {\n      log.error('[User] Setting migration[%d] error', i, error);\n    }\n  });\n  return userExperienceSettings;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport fromUnixTime from 'date-fns/fromUnixTime';\nimport ReminderModel from 'app/js/models/user/ReminderModel';\nimport ReminderType from 'app/js/utils/constants/user/ReminderType';\nimport log from 'app/js/utils/log/log';\nimport getReminderID from 'app/js/utils/user/getReminderID';\n\nexport default function migrateRelayReminders(userExperienceSettings: any) {\n  if (!userExperienceSettings.relayReminders) {\n    return userExperienceSettings;\n  }\n\n  __DEV__ &&\n    log(\n      '[User] Relay reminders to migrate:',\n      userExperienceSettings.relayReminders\n    );\n\n  // Be safe #1: Don't overwrite an existing reminders list. This shouldn't\n  // happen to users.\n  userExperienceSettings.reminders = userExperienceSettings.reminders || [];\n\n  for (const machineIdentifier in userExperienceSettings.relayReminders) {\n    const id = getReminderID(ReminderType.Relay, machineIdentifier);\n\n    if (userExperienceSettings.reminders.some((r: any) => r.id === id)) {\n      // Be safe #2: Don't overwrite an existing reminder. This shouldn't\n      // happen to users.\n      continue;\n    }\n\n    const relayReminder =\n      userExperienceSettings.relayReminders[machineIdentifier];\n\n    const attrs = {\n      id,\n      // Convert the unix timestamp to human readable ISO8601 string.\n      remindAfter: fromUnixTime(relayReminder.remindAfter).toISOString(),\n      // Adjust existing `times` values for new behavior. Previously `times: 1`\n      // was set on reminders when initially created. It included the initial\n      // notification in the count of reminders. The refactored implementation\n      // uses `times` to represent the number of times a user has been notified\n      // _after_ the initial notification.\n      times: Math.max(0, relayReminder.times - 1),\n    };\n\n    userExperienceSettings.reminders.push(new ReminderModel(attrs).toJSON());\n  }\n\n  __DEV__ &&\n    log('[User] Reminders after migration:', userExperienceSettings.reminders);\n\n  delete userExperienceSettings.relayReminders;\n\n  return userExperienceSettings;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function migrateToAutoHome(userExperienceSettings: any) {\n  // If there is a value for autoHomeHubsEnabled it has been migrated already\n  if (userExperienceSettings.autoHomeHubsEnabled != null) {\n    return userExperienceSettings;\n  }\n\n  const homeSettings = userExperienceSettings.homeSettings;\n\n  if (homeSettings && homeSettings.hasCustomizations) {\n    userExperienceSettings.autoHomeHubsEnabled = false;\n  } else {\n    userExperienceSettings.autoHomeHubsEnabled = true;\n  }\n\n  return userExperienceSettings;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport UserExperienceSettingsModel from 'app/js/models/user/UserExperienceSettingsModel';\nimport {\n  DEPRECATED_NONE,\n  NORMALIZED,\n  UNNORMALIZED,\n} from 'app/js/utils/constants/audioBoostLevels';\n\nexport default function migrateAudioBoost(userExperienceSettings: any) {\n  const { audioBoost } = userExperienceSettings;\n\n  if (audioBoost != null) {\n    const nextAudioBoost =\n      audioBoost === DEPRECATED_NONE ? NORMALIZED : UNNORMALIZED;\n\n    const defaults = UserExperienceSettingsModel.prototype.defaults();\n    const defaultAudioBoost = defaults.audioBoost;\n\n    if (nextAudioBoost !== audioBoost && nextAudioBoost !== defaultAudioBoost) {\n      userExperienceSettings.audioBoost = nextAudioBoost;\n    }\n  }\n\n  return userExperienceSettings;\n}\n","/* eslint-plugin-disable @typescript-eslint */\nimport toHomeHubIdentifier from 'app/js/stores/actions/helpers/toHomeHubIdentifier';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\n\nexport default function migrateCustomPromotedToHubs(\n  userExperienceSettings: any\n) {\n  const homeSettings = userExperienceSettings.homeSettings;\n\n  if (homeSettings && !userExperienceSettings.autoHomeHubsEnabled) {\n    homeSettings.hubs = homeSettings.hubs?.reduce((memo: any[], hub: any) => {\n      const homeHubIdentifier = toHomeHubIdentifier(hub.hubIdentifier);\n\n      if (\n        hub.directoryKey === '/hubs/promoted' &&\n        hub.provider.identifier === providerIdentifiers.LIBRARY\n      ) {\n        if (\n          !memo.find(\n            (hub_: any) =>\n              hub_.hubIdentifier === homeHubIdentifier &&\n              hub_.provider?.identifier === hub.provider?.identifier &&\n              hub_.server?.machineIdentifier === hub.server?.machineIdentifier\n          )\n        ) {\n          hub.directoryKey = '/hubs';\n          hub.hubIdentifier = homeHubIdentifier;\n          memo.push(hub);\n        }\n      } else {\n        memo.push(hub);\n      }\n\n      return memo;\n    }, []);\n  }\n\n  return userExperienceSettings;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport migrateUserExperienceSettings from 'app/js/initializers/migrations/migrateUserExperienceSettings';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport UserExperienceSettingsModel from 'app/js/models/user/UserExperienceSettingsModel';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport * as jsonStorage from 'app/js/utils/storage/jsonStorage';\n\nexport default function migrateLocalStorageUserExperienceSettings() {\n  const promise = jsonStorage\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    .getJSON(userStorageModel.storageKey)\n    .then((json: any) => {\n      const isMigrationRequired =\n        json.users &&\n        json.users.some(\n          (user: any) =>\n            user.experienceSettings &&\n            user.experienceSettings.schemaVersion !==\n              UserExperienceSettingsModel.schemaVersion\n        );\n\n      if (!isMigrationRequired) {\n        return;\n      }\n\n      json.users.forEach((user: any) => {\n        user.experienceSettings = migrateUserExperienceSettings(\n          user.experienceSettings\n        );\n      });\n\n      return jsonStorage.setJSON(userStorageModel.storageKey, json);\n    });\n\n  return alwaysResolve(promise);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const NEVER = 'never';\nexport const SAME_NETWORK = 'samenetwork';\nexport const ALWAYS = 'always';\n\n// See: app/desktop/common/translations/en.manual.json\nexport const settings = [\n  {\n    value: NEVER,\n    title: 'Never',\n  },\n  {\n    value: SAME_NETWORK,\n    title: 'On same network as server',\n  },\n  {\n    value: ALWAYS,\n    title: 'Always',\n  },\n];\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport attrTypes from 'app/js/models/attrTypes';\nimport config from 'app/js/models/config';\nimport AbstractStorageModel from 'app/js/models/storage/AbstractStorageModel';\nimport * as preferInsecureConnectionsOptions from 'app/js/utils/constants/preferInsecureConnectionsOptions';\n\nconst DesktopSettingsModel = AbstractStorageModel.extend({\n  //\n  // Properties\n\n  name: 'DesktopSettingsModel',\n  storageKey: 'settingsv2',\n\n  syncedAttrs: {\n    // General\n    preferInsecureConnections: attrTypes.string,\n\n    // Sync\n    'syncQuality!video': attrTypes.integer,\n    'syncQuality!music': attrTypes.integer,\n    'syncQuality!photo': attrTypes.integer,\n\n    // Hidden\n    viewedUnclaimedServers: attrTypes.list,\n    dismissedUnclaimedServers: attrTypes.list,\n  },\n\n  defaults() {\n    return {\n      // General\n      preferInsecureConnections: config.shouldPreferInsecureLocalConnections\n        ? preferInsecureConnectionsOptions.SAME_NETWORK\n        : preferInsecureConnectionsOptions.NEVER,\n\n      // Sync\n      'syncQuality!video': 8,\n      'syncQuality!music': 2,\n      'syncQuality!photo': 2,\n\n      // Hidden\n      viewedUnclaimedServers: [],\n      dismissedUnclaimedServers: [],\n    };\n  },\n});\n\nexport default DesktopSettingsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport DesktopSettingsModel from 'app/js/models/DesktopSettingsModel';\nimport DeviceSettingsModel from 'app/js/models/settings/DeviceSettingsModel';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport * as jsonStorage from 'app/js/utils/storage/jsonStorage';\n\nconst movedAttrs = [\n  'chromecastAppID',\n  'chromecastCustomAppID',\n  'debugLevel',\n  'directPlay',\n  'directStream',\n  'rejectDirectConnections',\n  'serverUpdateDismissedVersion',\n];\n\n// Handles the migration of attributes from appModel.settings to\n// appModel.deviceSettings\n\nfunction migrateSettingsToDeviceSettings() {\n  const settingsStorageKey = DesktopSettingsModel.prototype.storageKey;\n  const deviceSettingsStorageKey = DeviceSettingsModel.prototype.storageKey;\n\n  const promise = jsonStorage\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    .getJSON(settingsStorageKey)\n    .then((existingSettings: any) => {\n      const migratedSettings = _.pick(existingSettings, movedAttrs);\n\n      if (Object.keys(migratedSettings).length === 0) {\n        return;\n      }\n\n      return jsonStorage\n        .getJSON(deviceSettingsStorageKey, {})\n        .then((originalDeviceSettings: any) => {\n          const updatedDeviceSettings = {\n            ...originalDeviceSettings,\n            ...migratedSettings,\n          };\n\n          return jsonStorage.setJSON(\n            deviceSettingsStorageKey,\n            updatedDeviceSettings\n          );\n        })\n        .then(() => {\n          // Complete the move by deleting the original attrs\n          return jsonStorage.setJSON(\n            settingsStorageKey,\n            _.omit(existingSettings, movedAttrs)\n          );\n        });\n    });\n\n  return alwaysResolve(promise);\n}\n\nexport default migrateSettingsToDeviceSettings;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport migrateExperienceSettingsToAllStoredUsers from 'app/js/initializers/migrations/migrateExperienceSettingsToAllStoredUsers';\nimport DesktopSettingsModel from 'app/js/models/DesktopSettingsModel';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport * as jsonStorage from 'app/js/utils/storage/jsonStorage';\n\nconst movedAttrs = ['allowHttpFallback', 'audioBoost', 'companion', 'language'];\n\n// Handles the migration of attributes from appModel.settings to\n// appModel.user.experienceSettings\n\nfunction migrateSettingsToUserExperienceSettings() {\n  const promise = jsonStorage\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    .getJSON(DesktopSettingsModel.prototype.storageKey)\n    .then((existingSettings: any) => {\n      const migratedSettings = _.pick(existingSettings, movedAttrs);\n\n      if (Object.keys(migratedSettings).length === 0) {\n        return;\n      }\n\n      return migrateExperienceSettingsToAllStoredUsers(migratedSettings).then(\n        () => {\n          // Complete the move by deleting the original attrs\n          return jsonStorage.setJSON(\n            DesktopSettingsModel.prototype.storageKey,\n            _.omit(existingSettings, movedAttrs)\n          );\n        }\n      );\n    });\n\n  return alwaysResolve(promise);\n}\n\nexport default migrateSettingsToUserExperienceSettings;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport BasicVolatileStorage from 'app/js/adapters/storage/BasicVolatileStorage';\nimport storageAdapter from 'app/js/adapters/storageAdapter';\nimport volatileStorageAdapter from 'app/js/adapters/volatileStorageAdapter';\nimport migrateExperienceSettings from 'app/js/initializers/migrations/migrateExperienceSettings';\nimport migrateExperienceSettingsToDeviceSettings from 'app/js/initializers/migrations/migrateExperienceSettingsToDeviceSettings';\nimport migrateLocalStorageUserExperienceSettings from 'app/js/initializers/migrations/migrateLocalStorageUserExperienceSettings';\nimport migrateSettingsToDeviceSettings from 'app/js/initializers/migrations/migrateSettingsToDeviceSettings';\nimport migrateSettingsToUserExperienceSettings from 'app/js/initializers/migrations/migrateSettingsToUserExperienceSettings';\nimport log from 'app/js/utils/log/log';\n\nconst PLEX_TEST_TOKEN = 'plexTestToken';\nfunction determineStorageModule() {\n  // Check if `myPlexAccessToken` is in the volatile storage, if it is, the user\n  // has previously signed in with `Remember Me` unchecked and we need to switch\n  // the storage.\n  const deferred = $.Deferred();\n  const promise = volatileStorageAdapter.get('myPlexAccessToken');\n  promise.done(() => {\n    // Storage will always successfully get the token if it is provided through\n    // the global PLEXWEB object (e.g. by plex.tv).\n    if (\n      !(window as any).PLEXWEB ||\n      !(window as any).PLEXWEB.myPlexAccessToken\n    ) {\n      storageAdapter.register(volatileStorageAdapter.getInstance());\n    }\n  });\n  promise.always(() => {\n    deferred.resolve();\n  });\n  return deferred.promise();\n}\nfunction testStorageModule() {\n  // Perform a test to see if the storage module can operate with the current\n  // browser settings. Safari in private mode will block localStorage and in\n  // such cases we need to swap in a more basic storage method.\n  const deferred = $.Deferred();\n  const promise = storageAdapter.set(PLEX_TEST_TOKEN, 1);\n  promise.done(() => {\n    storageAdapter.remove(PLEX_TEST_TOKEN);\n    deferred.resolve();\n  });\n  promise.fail((error: any) => {\n    const basicVolatileStorage = new BasicVolatileStorage();\n    log.warn(\n      `Storage module swapped for ${basicVolatileStorage.name} due to exception: \"${error}\"`\n    );\n    volatileStorageAdapter.register(basicVolatileStorage);\n    storageAdapter.register(basicVolatileStorage, { ignorePrevious: true });\n    deferred.resolve();\n  });\n  return deferred.promise();\n}\nexport default function desktopStorageInitializer() {\n  // All migrations are expected to resolve.  If a migration fails, it is best\n  // to continue and migrate what we can.\n  // First run migrations that massage storage into new structure.  These\n  // migrations must run before any models are populated.\n  return determineStorageModule()\n    .then(testStorageModule)\n    .then(migrateSettingsToDeviceSettings)\n    .then(migrateExperienceSettingsToDeviceSettings)\n    .then(migrateExperienceSettings)\n    .then(migrateSettingsToUserExperienceSettings)\n    .then(migrateLocalStorageUserExperienceSettings);\n}\n","import $ from 'jquery';\nimport * as Sentry from '@sentry/browser';\nimport dimensionsAdapter from 'app/js/adapters/dimensionsAdapter';\nimport escapeRegExp from 'app/js/utils/string/escapeRegExp';\n\nconst dimensionKeys = [\n  'X-Plex-Device',\n  'X-Plex-Model',\n  'X-Plex-Platform',\n  'X-Plex-Platform-Version',\n  'X-Plex-Product',\n  'X-Plex-Version',\n];\n\nexport default function errorTrackerInitializer(\n  options: Record<string, string> = {},\n  tags: Record<string, string> = {}\n  // Use JQueryPromise<any> even though `void` is correct in order to make `alwaysResolve` usage correct which is currently untyped\n): JQueryPromise<any> {\n  // Sentry hooks into the global console scope which causes the \"file\" which\n  // logs it to all come from the same place. This is undesirable during\n  // development where developers may want to see the file which triggered the\n  // log. During development we completely disable Sentry.\n  if (__DEV__) {\n    return $.Deferred().resolve().promise();\n  }\n\n  const isAppScriptRegExp = new RegExp(escapeRegExp(__ERROR_FILE_SIGIL__));\n\n  // Configures the sample rate for error events, in the range of 0.0 to 1.0.\n  // The default is 1.0 which means that 100% of error events are sent. If set\n  // to 0.1 only 10% of error events will be sent. Events are picked randomly.\n  // See: https://docs.sentry.io/platforms/javascript/configuration/filtering/\n  const sampleRate = __BUNDLED__ ? 0.05 : 1.0;\n\n  const finalOptions = {\n    allowUrls: [isAppScriptRegExp],\n    debug: __DEV__,\n    dsn: __ERROR_TRACKER_ID__,\n    // This value is also provided to the Sentry CLI plugin.\n    environment: __SENTRY_ENVIRONMENT__,\n    ignoreErrors: [\n      // Chrome's ResizeObserver implementation may throw an error caught by\n      // window.onerror when all observer notifications cannot be dispatched\n      // within a single frame. It's benign and should not be an error.\n      // See: https://github.com/w3c/csswg-drafts/issues/5023\n      'ResizeObserver',\n      // Ignore a high-volume error not originating in Plex code:\n      // See: https://github.com/plexinc/plex-web-client/issues/13067\n      'songId',\n      // Unhandled Promise Rejections appear to be happening from some third\n      // party libraries and can flood sentry\n      // See: https://github.com/plexinc/plex-web-client/issues/18035\n      /^Non-Error promise rejection captured/,\n      // Promises that deal with localStorage can fail causing\n      // unhandledrejection events which are caught and reported by sentry.\n      // These errors are harmless and noise so filter ignore them\n      /^SecurityError: The operation is insecure/,\n    ],\n    integrations: [\n      // Override only the Breadcrumbs integration; other integrations are\n      // unaffected. All breadcrumb types are enabled by default. The\n      // integrations below are opted-out due to potential privacy concerns.\n      new Sentry.Integrations.Breadcrumbs({ fetch: false, xhr: false }),\n    ],\n    release: __SENTRY_RELEASE__,\n    sampleRate,\n    version: __VERSION__,\n    ...options,\n  };\n\n  const finalTags = dimensionKeys.reduce((acc, key) => {\n    if (!acc.hasOwnProperty(key)) {\n      acc[key] = dimensionsAdapter.prop(key);\n    }\n\n    return acc;\n  }, tags);\n\n  Sentry.init(finalOptions);\n\n  Object.entries(finalTags).forEach(([key, value]) => {\n    Sentry.setTag(key, value);\n  });\n\n  return $.Deferred().resolve().promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport qs from 'qs';\nimport { resolve } from 'app/js/adapters/adapters';\nimport getAuthCodeExchangeModel from 'app/js/stores/actions/helpers/server/getAuthCodeExchangeModel';\nimport parseInteger from 'app/js/utils/parser/parseInteger';\nimport { scheduleImmediateUpdate } from 'app/js/utils/state/stateUpdateScheduler';\nimport removeUrlParam from 'app/js/utils/url/removeUrlParam';\nimport splitUrlSearchHashPathAndParams from 'app/js/utils/url/splitUrlSearchHashPathAndParams';\n\nfunction federatedAuthPINInitializer() {\n  const { hashParams } = splitUrlSearchHashPathAndParams(window.location.href);\n  const params = qs.parse(hashParams.substr(1));\n  const pinID = parseInteger(params.pinID);\n\n  if (pinID) {\n    const appModel = resolve('appModel');\n    const authCodeExchangeModel = getAuthCodeExchangeModel(appModel);\n    authCodeExchangeModel.set({ pinIDInitial: pinID });\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 0.\n    scheduleImmediateUpdate();\n\n    window.history.replaceState(\n      null,\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'null' is not assignable to param... Remove this comment to see the full error message\n      null,\n      removeUrlParam(window.location.href, 'pinID')\n    );\n  }\n\n  return $.Deferred().resolve().promise();\n}\n\nexport default federatedAuthPINInitializer;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport escapeRegExp from 'app/js/utils/string/escapeRegExp';\n\nfunction removeUrlParam(url: any, paramName: any) {\n  const regExp = new RegExp(\n    `(\\\\?|&)(${escapeRegExp(paramName)}=[^\\\\?&]+(?:[\\\\?&]?))`,\n    'g'\n  );\n\n  return (\n    url\n      // @ts-expect-error ts-migrate(6133) FIXME: 'full' is declared but its value is never read.\n      .replace(regExp, (full: any, delimiter: any) => delimiter)\n      .replace(/(\\?|&)$/, '')\n  );\n}\n\nexport default removeUrlParam;\n","import { APIRequestConfig, Headers } from 'app/js/v4/utils/data/api';\n\nfunction getAllowedHeaders(headers: Headers | undefined): Headers | undefined {\n  if (!headers) {\n    return headers;\n  }\n\n  const {\n    ['X-Plex-Username']: forbiddenUsername,\n    ['X-Plex-Device-Name']: forbiddenDeviceName,\n    ...allowedHeaders\n  } = headers;\n\n  return allowedHeaders;\n}\n\nexport default function omitProviderForbiddenHeadersFilter(\n  config: APIRequestConfig\n): APIRequestConfig {\n  return {\n    ...config,\n    headers: getAllowedHeaders(config.headers),\n  };\n}\n","import log from 'app/js/utils/log/log';\nimport { APIRequestConfig } from 'app/js/v4/utils/data/api';\n\nconst blacklistedMethods: { [index: string]: boolean } = {\n  PUT: true,\n  DELETE: true,\n};\n\nconst allowedHeaders: { [index: string]: boolean } = {\n  Accept: true,\n  'Accept-Language': true,\n  'Content-Language': true,\n  'Content-Type': true,\n};\n\nconst plexHeaderRegex = /(^X-Plex-[^=]+)/i;\n\nexport default function simpleCORSFilter(\n  config: APIRequestConfig\n): APIRequestConfig {\n  const {\n    method = 'GET',\n    headers = {},\n    params = {},\n    allowHeadersInUrl = false,\n    allowBlacklistedMethodHeaders = false,\n  } = config;\n  // Only allow headers to be moved to the url with requests to plex.tv or\n  // Plex Media Server. Other clients may not support headers as query string\n  // arguments.\n\n  if (!allowHeadersInUrl) {\n    return config;\n  }\n\n  // Older server versions can't handle empty request headers for some methods.\n  // See: https://github.com/plexinc/plex-media-server/issues/531\n  if (blacklistedMethods[method] && !allowBlacklistedMethodHeaders) {\n    return config;\n  }\n\n  const nextHeaders = { ...headers };\n  const nextParams = { ...params };\n\n  Object.keys(headers).forEach((key: string) => {\n    const value = headers[key];\n\n    if (allowedHeaders[key]) {\n      return;\n    }\n\n    if (plexHeaderRegex.test(key)) {\n      nextParams[key] = value;\n      delete nextHeaders[key];\n    } else {\n      log.warn(\n        '[CORS] Did not move header \"%s\" to query string. This can result in an unnecessary OPTIONS preflight request.',\n        key\n      );\n    }\n  });\n\n  return {\n    ...config,\n    headers: nextHeaders,\n    params: nextParams,\n  };\n}\n","import axios, { AxiosError, AxiosRequestConfig, AxiosResponse } from 'axios';\nimport qs from 'qs';\nimport { SagaIterator } from 'redux-saga';\nimport { call, cancelled } from 'redux-saga/effects';\nimport dimensionsAdapter from 'app/js/adapters/dimensionsAdapter';\nimport getProviderTextFormat from 'app/js/stores/actions/helpers/metadata/getProviderTextFormat';\nimport log from 'app/js/utils/log/log';\nimport isAbsoluteUrl from 'app/js/utils/url/isAbsoluteUrl';\nimport path from 'app/js/utils/url/path';\nimport { Provider } from 'app/js/v4/core/providers/providersTypes';\nimport { Server } from 'app/js/v4/core/servers/serversTypes';\nimport omitProviderForbiddenHeadersFilter from 'app/js/v4/utils/data/filters/omitProviderForbiddenHeadersFilter';\nimport simpleCORSFilter from 'app/js/v4/utils/data/filters/simpleCORSFilter';\n\nexport interface API {\n  get(url: string, config: APIRequestConfig): SagaIterator;\n  post(url: string, config: APIRequestConfig, data?: any): SagaIterator;\n  put(url: string, config: APIRequestConfig, data?: any): SagaIterator;\n  del(url: string, config: APIRequestConfig, data?: any): SagaIterator;\n  setOption<K extends keyof APIOptions>(name: K, value: APIOptions[K]): void;\n  toPlainErrorObject(error: AxiosError | Error): PlainError;\n}\n\nexport interface Headers {\n  [name: string]: string;\n}\n\nexport interface APIRequestConfig extends AxiosRequestConfig {\n  server?: Server;\n  provider?: Provider;\n  headers?: Headers;\n  allowHeadersInUrl?: boolean;\n  allowBlacklistedMethodHeaders?: boolean;\n  providerVersionOverride?: string;\n}\n\nexport interface PlainError {\n  message: string;\n  name?: string;\n  stack?: string;\n  status?: number;\n  data?: any;\n}\n\nexport type APIResponse<T extends object = any> = AxiosResponse<T>;\n\ninterface APIOptions {\n  timeout: number;\n  language: string;\n  providerVersion: string;\n}\n\nfunction isAxiosError(error: AxiosError | Error): error is AxiosError {\n  return (error as AxiosError).isAxiosError;\n}\n\nexport function createAPI(defaultOptions: APIOptions): API {\n  const options: APIOptions = { ...defaultOptions };\n\n  function* makeRequest(url: string, config: APIRequestConfig): SagaIterator {\n    const {\n      server,\n      provider,\n      timeout = options.timeout,\n      allowHeadersInUrl = !!(server || provider),\n      providerVersionOverride,\n      ...axiosConfig\n    } = config;\n\n    const dimensions = dimensionsAdapter.hasInstance()\n      ? dimensionsAdapter.getInstance()\n      : {};\n\n    const headers: Headers = { ...dimensions, ...config.headers };\n\n    let finalUrl = url;\n\n    if (server) {\n      if (!isAbsoluteUrl(url)) {\n        const baseURL = provider?.baseURL ? provider.baseURL : server.uri;\n\n        if (!baseURL) {\n          throw new Error(\n            'Unable to make a request to a relative path without `server.uri` or `baseURL`'\n          );\n        }\n\n        finalUrl = path.join([baseURL, url]);\n      }\n\n      if (server.accessToken) {\n        headers['X-Plex-Token'] = server.accessToken;\n      }\n\n      if (server.isEmbedded) {\n        // This causes all communication with nano to be attributed to an\n        // admin account. It's difficult to set the header ad-hoc and it's\n        // not clearly defined exactly which requests which require the\n        // admin account ID.\n        // See: https://github.com/plexinc/plex-web-client/issues/13630\n        headers['X-Plex-Account-ID'] = '1';\n      }\n\n      if (provider) {\n        headers['X-Plex-Provider-Version'] =\n          providerVersionOverride ?? options.providerVersion;\n        headers['X-Plex-Text-Format'] = getProviderTextFormat(\n          provider.identifier\n        );\n      }\n    }\n\n    if (options.language) {\n      headers['X-Plex-Language'] = options.language;\n      headers['Accept-Language'] = options.language;\n    }\n\n    const source = axios.CancelToken.source();\n\n    let nextConfig = {\n      ...axiosConfig,\n      url: finalUrl,\n      // Axios may not have a cancel token source when mocked by Jest.\n      cancelToken: source ? source.token : undefined,\n      headers,\n      timeout,\n      allowHeadersInUrl,\n      paramsSerializer(params) {\n        return qs.stringify(params, { arrayFormat: 'repeat' });\n      },\n    } as APIRequestConfig;\n\n    if (server?.isCloud && provider) {\n      nextConfig = omitProviderForbiddenHeadersFilter(nextConfig);\n    }\n\n    nextConfig = simpleCORSFilter(nextConfig);\n\n    try {\n      return yield call(axios.request, nextConfig);\n    } finally {\n      if (yield cancelled()) {\n        source?.cancel();\n      }\n    }\n  }\n\n  return {\n    get(url, config = {}) {\n      return makeRequest(url, { ...config, method: 'GET' });\n    },\n\n    post(url, config = {}, data) {\n      return makeRequest(url, { ...config, method: 'POST', data });\n    },\n\n    put(url, config = {}, data) {\n      return makeRequest(url, { ...config, method: 'PUT', data });\n    },\n\n    del(url, config = {}) {\n      return makeRequest(url, { ...config, method: 'DELETE' });\n    },\n\n    setOption(name, value) {\n      options[name] = value;\n    },\n\n    toPlainErrorObject(error) {\n      // Filter either an error instance to a simple object that can exist in\n      // the state tree. In the case of a network error, include some additional\n      // data about the error.\n\n      let status;\n      let data;\n\n      if (isAxiosError(error)) {\n        if (error.response) {\n          // The request was made and the server responded with a status code\n          // that falls out of the range of 2xx.\n          status = error.response.status;\n          data = error.response.data;\n        } else if (error.request) {\n          // The request was made but no response was received `error.request`\n          // is an instance of XMLHttpRequest in the browser and an instance of\n          // http.ClientRequest in node.js\n          status = error.request.status;\n        }\n      }\n\n      const filteredError: PlainError = {\n        message: error.message,\n        name: error.name,\n        stack: error.stack,\n        status,\n        data,\n      };\n\n      log.error(filteredError);\n\n      return filteredError;\n    },\n  };\n}\n\nconst api = createAPI({\n  timeout: 30000,\n  language: 'en',\n  providerVersion: '6.0',\n});\n\nexport default api;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport localizerAdapter from 'app/js/adapters/localizerAdapter';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport api from 'app/js/v4/utils/data/api';\n\n// Once language setting lives on the same model in all platforms and the\n// settingFinder is no longer required for language; this should be deleted and\n// language initialization moved closer to the initialized model.\nexport default function languageInitializer() {\n  const defaultLanguage = resolve('settingFinder').find('language');\n\n  api.setOption('language', defaultLanguage);\n\n  return alwaysResolve(localizerAdapter.load(defaultLanguage));\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst silentMP3 =\n  'data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=';\n\nexport default silentMP3;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport assert from 'app/js/utils/log/assert';\nimport log from 'app/js/utils/log/log';\n\nconst elements = {};\nlet preventRecycle = false;\n\nexport function createMediaElement(type: any, allowRecycle: any) {\n  const recycle = allowRecycle && !preventRecycle;\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  const elementsByType = elements[type];\n\n  if (recycle && elementsByType && elementsByType.length) {\n    log('[MediaElement] Found existing media element to use. type: %s', type);\n\n    // Release the element so it can't be reused until whatever is using the\n    // element releases it back to the pool.\n    return elementsByType.shift();\n  }\n\n  log('[MediaElement] Creating new media element. type: %s', type);\n\n  return document.createElement(type);\n}\n\nexport function releaseMediaElement(element: any) {\n  const type = element.nodeName.toLowerCase();\n\n  log('[MediaElement] Releasing media element to pool. type: %s', type);\n\n  if (__DEV__) {\n    assert(\n      !element.src && !element.firstChild && !element.parentNode,\n      \"This media element's source must be reset before releasing back to pool. Use mediaElement.src = ''; and mediaElement.removeAttribute('src');\"\n    );\n  }\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  if (!elements[type]) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    elements[type] = [];\n  }\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  elements[type].push(element);\n}\n\nexport function preventMediaElementRecycle(prevent: any) {\n  preventRecycle = prevent;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport silentMP3 from 'app/js/utils/media/silentMP3';\nimport {\n  createMediaElement,\n  releaseMediaElement,\n} from 'app/js/utils/mediaElementPool';\n\n// In some browsers, audio can only be started from user interaction.\n// We start silent media playback on any user interaction in order to re-use\n// the media element for later asynchronously-driven playback.\n\nconst events = ['touchstart', 'mousedown', 'click', 'keydown', 'keypress'];\n\nexport default function mediaElementInitializer() {\n  function onInteract() {\n    events.forEach((eventName) => {\n      document.body.removeEventListener(eventName, onInteract, true);\n    });\n\n    const mediaElement = createMediaElement('audio', true);\n\n    function onReady() {\n      mediaElement.removeEventListener('playing', onReady);\n      mediaElement.removeEventListener('error', onReady);\n\n      mediaElement.src = '';\n      mediaElement.removeAttribute('src');\n      releaseMediaElement(mediaElement);\n    }\n\n    mediaElement.addEventListener('playing', onReady);\n    mediaElement.addEventListener('error', onReady);\n\n    mediaElement.src = silentMP3;\n\n    const promise = mediaElement.play();\n\n    if (promise && promise.then) {\n      promise.catch(() => {\n        // No-op to silence unhandled promise rejection warnings. The onReady\n        // handler cleans up on `error` events.\n      });\n    }\n  }\n\n  events.forEach((eventName) => {\n    document.body.addEventListener(eventName, onInteract, true);\n  });\n\n  return $.Deferred().resolve().promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport MediaServerEventConnectionRetryManager from 'app/js/managers/MediaServerEventConnectionRetryManager';\nimport ServerEventManager from 'app/js/managers/ServerEventManager';\nimport config from 'app/js/models/config';\nimport capabilities from 'app/js/utils/device/capabilities';\n\nfunction isValidServer(server: any) {\n  return server.get('isFullOwnedServer') || server.get('isFullServer');\n}\n\nexport default function mediaServerEventInitializer() {\n  let serverEventManager: any;\n\n  if (capabilities.hasWebSocket) {\n    serverEventManager = new ServerEventManager({\n      name: 'MediaServerEventManager',\n      appModel: resolve('appModel'),\n      isValidServer,\n      supportsLongPolling: false,\n      allowMultipleConnections: config.allowMultipleWebSocketConnections,\n      ServerEventConnection: resolve('mediaServerEventConnection'),\n      ServerRetryManager: MediaServerEventConnectionRetryManager,\n    });\n\n    serverEventManager.start();\n  }\n\n  return $.Deferred().resolve().promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport assert from 'app/js/utils/log/assert';\nimport * as ip from 'app/js/utils/url/ip';\n\nexport const CONTEXT_FILE = 'file';\nexport const CONTEXT_HTTP = 'http';\nexport const CONTEXT_HTTP_LOOPBACK = 'http-loopback';\nexport const CONTEXT_HTTPS = 'https';\n\nfunction getMetricsProtocolContext(location: any) {\n  const { hostname, protocol } = location;\n  const isFile = protocol === 'file:';\n  const isHttp = protocol === 'http:';\n  const isHttps = protocol === 'https:';\n\n  let context;\n\n  if (isHttps) {\n    context = CONTEXT_HTTPS;\n  } else if (isHttp) {\n    context = ip.isLoopbackAddress(hostname)\n      ? CONTEXT_HTTP_LOOPBACK\n      : CONTEXT_HTTP;\n  } else if (isFile) {\n    context = CONTEXT_FILE;\n  }\n\n  __DEV__ && assert(context, 'A metrics protocol context is required');\n\n  return context;\n}\n\nexport default getMetricsProtocolContext;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport dimensionsAdapter from 'app/js/adapters/dimensionsAdapter';\nimport getMetricsProtocolContext from 'app/js/utils/metrics/getMetricsProtocolContext';\nimport parseQueryString from 'app/js/utils/parser/parseQueryString';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport splitUrlSearchHashPathAndParams from 'app/js/utils/url/splitUrlSearchHashPathAndParams';\n\nconst UTM_REGEX = /^utm_/;\n\nfunction getCampaignParams() {\n  const { searchParams, hashParams } = splitUrlSearchHashPathAndParams(\n    window.location.href\n  );\n\n  // Campaign params from query string take precedence of hash params\n  const params = {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    ...parseQueryString(hashParams),\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    ...parseQueryString(searchParams),\n  };\n\n  return Object.keys(params).reduce((acc, key) => {\n    if (UTM_REGEX.test(key)) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      acc[key.replace(UTM_REGEX, '')] = params[key];\n    }\n\n    return acc;\n  }, {});\n}\n\nexport default function metricsInitializer(options = {}) {\n  const metrics = resolve('metrics');\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'context' does not exist on type '{}'.\n  const { context = {} } = options;\n\n  // See: https://github.com/plexinc/specs/blob/master/Metrics/Overview.md\n  metrics.set({\n    deviceIdentifier: dimensionsAdapter.prop('X-Plex-Client-Identifier'),\n    context: {\n      ...context,\n      campaign: getCampaignParams(),\n      device: {\n        product: dimensionsAdapter.prop('X-Plex-Product'),\n        version: dimensionsAdapter.prop('X-Plex-Version'),\n        platform: dimensionsAdapter.prop('X-Plex-Platform'),\n        platformVersion: dimensionsAdapter.prop('X-Plex-Platform-Version'),\n        device: dimensionsAdapter.prop('X-Plex-Device'),\n        model: dimensionsAdapter.prop('X-Plex-Model'),\n        screenResolution: dimensionsAdapter.prop(\n          'X-Plex-Device-Screen-Resolution'\n        ),\n        protocol: getMetricsProtocolContext(window.location),\n      },\n    },\n  });\n\n  // Metrics are enabled by default until possibly disabled by the client.\n  return alwaysResolve(metrics.start());\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport BaseClass from 'app/js/utils/BaseClass';\nimport capabilities from 'app/js/utils/device/capabilities';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst AbstractReporter = BaseClass.extend({\n  mixins: eventMixin,\n  //\n  // Properties\n  name: 'AbstractReporter',\n  enabled: false,\n  destroyed: false,\n  _suspended: false,\n  //\n  // Init\n  initialize(options = {}) {\n    if ((options as any).enabled !== false) {\n      this.enable();\n    }\n  },\n  //\n  // Control\n  hasSupport() {\n    return true;\n  },\n  enable() {\n    if (this.enabled || this.destroyed || !this.hasSupport()) {\n      return;\n    }\n    this.enabled = true;\n    this.listenTo(dispatcher, {\n      'log:message': this.onLog,\n      'log:group': this.onLog,\n      'log:groupCollapsed': this.onLog,\n      'log:groupEnd': this.onLog,\n    });\n    this.onEnabled();\n  },\n  disable() {\n    if (!this.enabled) {\n      return;\n    }\n    this.enabled = false;\n    this.stopListening();\n    this.onDisabled();\n  },\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n    this.disable();\n    this.destroyed = true;\n    this.onDestroyed();\n  },\n  // Suspends accepting new log messages. Doesn't suspend actual reporting of\n  // previously received log messages.\n  _suspend() {\n    if (this._suspended) {\n      return;\n    }\n    this._suspended = true;\n    this.onSuspended();\n  },\n  _resume() {\n    if (!this._suspended) {\n      return;\n    }\n    this._suspended = false;\n    this.onResumed();\n  },\n  //\n  // Listeners\n  // Subclasses should implement the specific log type event handlers below.\n  // This method serves a single gateway for the abstract to avoid reentrancy.\n  onLog(log: any) {\n    if (this._suspended) {\n      if (capabilities.hasConsole) {\n        window.console.warn(\n          '[Logging] Ignored log reentrancy:',\n          JSON.stringify(log)\n        );\n      }\n      return;\n    }\n    // Manually suspend and resume reporting to avoid maximum callstack death by\n    // reentrancy triggered when dependencies call `log` methods while a\n    // previous log is processing.\n    this._suspend();\n    switch (log.type) {\n      case 'log:message':\n        this.onLogMessage(log);\n        break;\n      case 'log:group':\n        this.onLogGroup(log);\n        break;\n      case 'log:groupCollapsed':\n        this.onLogGroupCollapsed(log);\n        break;\n      case 'log:groupEnd':\n        this.onLogGroupEnd(log);\n        break;\n    }\n    this._resume();\n  },\n  // Logging event listeners subclasses are expected to implement.\n  onLogMessage() {},\n  onLogGroup() {},\n  onLogGroupCollapsed() {\n    // A collapsed group only makes sense in a browser.\n    // Call `onLogGroup` if `onLogGroupCollapsed` is not defined.\n    // eslint-disable-next-line prefer-rest-params, prefer-spread\n    this.onLogGroup.apply(this, arguments);\n  },\n  onLogGroupEnd() {},\n  // Event style extension points make it easy for subclasses to respond to\n  // changes without overriding base methods.\n  onEnabled() {},\n  onDisabled() {},\n  onResumed() {},\n  onSuspended() {},\n  onDestroyed() {},\n});\nexport default AbstractReporter;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport capabilities from 'app/js/utils/device/capabilities';\nimport AbstractReporter from 'app/js/utils/log/AbstractReporter';\nimport log from 'app/js/utils/log/log';\n\nconst LOG_METHODS = {\n  [(log as any).LEVEL_LOG]: 'log',\n  [(log as any).LEVEL_DEBUG]: 'debug',\n  [(log as any).LEVEL_INFO]: 'info',\n  [(log as any).LEVEL_WARN]: 'warn',\n  [(log as any).LEVEL_ERROR]: 'error',\n};\nconst ConsoleReporter = AbstractReporter.extend({\n  //\n  // Properties\n  name: 'ConsoleReporter',\n  //\n  // Control\n  hasSupport() {\n    return capabilities.hasConsole;\n  },\n  //\n  // Listeners\n  onLogMessage(data: any) {\n    const message = data.message;\n    const method = LOG_METHODS[data.level];\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const logFn = window.console[method] || window.console.log;\n    logFn.call(window.console, message);\n  },\n  onLogGroup(data: any) {\n    // See: https://github.com/plexinc/plex-web-client/issues/4062\n    const logFn = window.console.group || window.console.log;\n    logFn.call(window.console, data.message);\n  },\n  onLogGroupCollapsed(data: any) {\n    // See: https://github.com/plexinc/plex-web-client/issues/4062\n    const logFn = window.console.groupCollapsed || window.console.log;\n    logFn.call(window.console, data.message);\n  },\n  onLogGroupEnd() {\n    // See: https://github.com/plexinc/plex-web-client/issues/4062\n    if (window.console.groupEnd) {\n      window.console.groupEnd();\n    }\n  },\n});\nexport default ConsoleReporter;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport ConsoleReporter from 'app/js/utils/log/ConsoleReporter';\n\nexport default function reportersInitializer() {\n  new ConsoleReporter();\n\n  return $.Deferred().resolve().promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport config from 'app/js/models/config';\nimport ServerModel from 'app/js/models/server/ServerModel';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport log from 'app/js/utils/log/log';\nimport getCloudServerConnection from 'app/js/utils/server/getCloudServerConnection';\n\nfunction initServers() {\n  log('[Servers] Initializing...');\n\n  initCloudServer();\n  // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 0.\n  initStoredServers();\n  initConfigServer();\n  initBundledServer();\n  initLoopbackServer();\n\n  resolve('serverManager').start();\n  resolve('primaryServerManager').start();\n  resolve('serverConnectionManager').start();\n  resolve('companionServerManager').start();\n  resolve('providerManager').start();\n  resolve('serverUpdateManager').start();\n\n  log('[Servers] Finished initialization');\n}\n\nfunction clearServers() {\n  log('[Servers] Clearing...');\n\n  const appModel = resolve('appModel');\n  const servers = appModel.get('servers');\n\n  resolve('serverManager').stop();\n  resolve('primaryServerManager').stop();\n  resolve('serverConnectionManager').stop();\n  resolve('serverConnectionTestManager').reset();\n  resolve('companionServerManager').stop();\n  resolve('providerManager').stop();\n  resolve('serverUpdateManager').stop();\n\n  servers.uninitialize();\n  servers.reset();\n  servers.initialize();\n\n  appModel.unset('primaryServer');\n  appModel.unset('companionServer');\n  appModel.unset('transientServer');\n}\n\nfunction logInitServer(serverModel: any) {\n  const connections = serverModel\n    .get('connections')\n    .map((connectionModel: any) => connectionModel.get('uri'));\n\n  log(\n    '[Servers]',\n    'Initialize server',\n    serverModel.get('accessToken') ? 'with token,' : 'without token,',\n    _.compact([\n      serverModel.get('debugName'),\n      serverModel.get('machineIdentifier'),\n      ...connections,\n    ]).join(', ')\n  );\n}\n\nfunction initCloudServer() {\n  // The cloud server is instantiated in `appModel`, but we need to provide it\n  // a connection and add it to the collection.\n\n  const appModel = resolve('appModel');\n  const servers = appModel.get('servers');\n  const cloudServer = appModel.get('cloudServer');\n\n  cloudServer.addConnection(getCloudServerConnection());\n\n  servers.add(cloudServer);\n}\n\n// @ts-expect-error ts-migrate(6133) FIXME: 'accessToken' is declared but its value is never r... Remove this comment to see the full error message\nfunction initStoredServers(accessToken: any) {\n  const appModel = resolve('appModel');\n  const servers = appModel.get('servers');\n  const storedServers = userStorageModel.getActiveServers();\n\n  if (!storedServers) {\n    return;\n  }\n\n  storedServers.each((storedServer: any) => {\n    // Only allow a stored server with at least one connection to be added\n    // to the collection. A server with zero connections is invalid.\n    if (storedServer.get('connections').length) {\n      try {\n        const server = new ServerModel(storedServer.toJSON(), {\n          parent: appModel,\n        });\n        const connections = server.get('connections');\n\n        // Eliminate relay connections stored before ServerConnectionManager\n        // began omitting relay connections from storage.\n        connections.reset(\n          connections.filter((connection: any) => !connection.get('relay'))\n        );\n\n        // Avoid adding mobile servers and a server which has no connections,\n        // such as one with only relay connections.\n        if (!server.get('isMobileServer') && connections.length > 0) {\n          logInitServer(server);\n          servers.add(server);\n        }\n      } catch (error) {\n        // Ignore possible mismatch between cached server data and current model\n        log.warn(error);\n      }\n    }\n  });\n}\n\nfunction initConfigServer() {\n  // It's possible for server data to be templated in using the global PLEXWEB\n  // object. If such data exists, automatically create a server model for it.\n\n  const appModel = resolve('appModel');\n  const servers = appModel.get('servers');\n  const serverFromConfig = config.primaryServer;\n\n  if (!serverFromConfig) {\n    return;\n  }\n\n  const configServer = new ServerModel(\n    {\n      machineIdentifier: serverFromConfig.machineIdentifier,\n      friendlyName: serverFromConfig.name,\n      isShared: serverFromConfig.shared,\n      superToken: serverFromConfig.superToken,\n      accessToken: serverFromConfig.accessToken,\n      sourceTitle: serverFromConfig.sourceTitle,\n    },\n    { parent: appModel }\n  );\n\n  configServer.addConnection({\n    scheme: serverFromConfig.scheme,\n    address: serverFromConfig.address,\n    port: serverFromConfig.port,\n  });\n\n  servers.add(configServer);\n}\n\nfunction initBundledServer() {\n  if (!__BUNDLED__) {\n    return;\n  }\n\n  // If the application is being served from the bundle, we can assume a\n  // server exists at the window's host.\n\n  const appModel = resolve('appModel');\n  const servers = appModel.get('servers');\n  const bundledServer = new ServerModel(\n    { isBundled: true },\n    { parent: appModel }\n  );\n\n  bundledServer.addConnection({\n    scheme: window.location.protocol.replace(':', ''),\n    address: window.location.hostname,\n    port: window.location.port,\n    isBundled: true,\n  });\n\n  logInitServer(bundledServer);\n  servers.add(bundledServer);\n}\n\nfunction initLoopbackServer() {\n  if (!config.allowLoopbackDiscovery) {\n    return;\n  }\n\n  const appModel = resolve('appModel');\n  const servers = appModel.get('servers');\n  const loopbackServer = new ServerModel({}, { parent: appModel });\n\n  loopbackServer.addConnection({\n    scheme: 'http',\n    address: '127.0.0.1',\n    port: '32400',\n  });\n\n  logInitServer(loopbackServer);\n  servers.add(loopbackServer);\n}\n\nexport default function serverInitializer() {\n  initServers();\n\n  dispatcher.on('clear:servers', clearServers);\n  dispatcher.on('init:servers', initServers);\n\n  return $.Deferred().resolve().promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { getMyPlexUrl } from 'app/js/utils/getRuntimeUrl';\n\nexport default function getCloudServerConnection() {\n  const [, scheme, address] = getMyPlexUrl().match(/^([^:]+):\\/\\/(.*)$/) || [];\n\n  return { scheme, address };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport log from 'app/js/utils/log/log';\n\nexport default function sourceInitializer() {\n  log('[Sources] Initializing...');\n\n  resolve('sourceManager').start();\n\n  log('[Sources] Finished initialization');\n\n  return $.Deferred().resolve().promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst ESSENTIAL_PLEX_TV_COOKIES = ['plex_tv_auth', 'plex_tv_lang'];\n\n// We need to delete non essential cookies to ensure no tracking cookies are\n// present for children profiles.\nexport default function deleteNonEssentialCookies() {\n  document.cookie.split(';').forEach((cookie) => {\n    const [name] = cookie.trim().split('=');\n\n    if (name && !ESSENTIAL_PLEX_TV_COOKIES.includes(name)) {\n      // We can't know which domain the cookie is from, so try the domains we\n      // know of.\n      document.cookie = `${name}=; Domain=plex.tv; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n      document.cookie = `${name}=; Domain=.plex.tv; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n      document.cookie = `${name}=; Domain=.app.plex.tv; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n    }\n  });\n}\n","import $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport { populateCloudProviders } from 'app/js/stores/actions/provider/providerActions';\nimport {\n  populateAllFriends,\n  syncExperienceSettings,\n  syncSettings,\n} from 'app/js/stores/actions/userActions';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport log from 'app/js/utils/log/log';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\nimport { NOTIFY_ACCOUNT_CHANGE } from 'app/js/utils/pubsub/messageTypes';\nimport deleteNonEssentialCookies from 'app/js/utils/storage/deleteNonEssentialCookies';\nimport t from 'app/js/utils/t';\nimport navigateToRoute from 'app/js/v4/routes/navigateToRoute';\nimport ConfirmModal from 'app/js/views/modals/ConfirmModal';\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst UserManager = BaseClass.extend({\n  mixins: eventMixin,\n  //\n  // Init\n  initialize(user: any) {\n    this.user = user;\n    this.debouncedChangeTimeout = null;\n  },\n  //\n  // Control\n  start() {\n    const user = this.user;\n\n    this.listenTo(user, {\n      change: this.onUserChange,\n      'change:hasInvalidToken': this.onHasInvalidTokenChange,\n      'change:isSignedIn': this.onIsSignedInChange,\n    });\n\n    this.listenTo(dispatcher, {\n      [`cloudServer:${NOTIFY_ACCOUNT_CHANGE}`]: this.onNotifyAccountChange,\n    });\n\n    // Keep the UserManager in sync if the derived attributes go to\n    // affirmative values before the manager is started.\n    const hasInvalidToken = user.get('hasInvalidToken');\n    const isSignedIn = user.get('isSignedIn');\n\n    if (hasInvalidToken) {\n      this.onHasInvalidTokenChange(user, hasInvalidToken);\n    }\n    if (isSignedIn) {\n      this.onIsSignedInChangeHandleToken(user, isSignedIn);\n    }\n  },\n  handleInvalidToken() {\n    const confirmModal = new ConfirmModal({\n      title: t('Invalid Credentials'),\n      message: t('Your credentials have expired. Please sign in again.'),\n      confirmLabel: t('OK'),\n      cancelLabel: t('Ignore'),\n    });\n    confirmModal.promise.done(() => {\n      navigateToRoute('login');\n    });\n    dispatcher.trigger('show:modal', confirmModal);\n  },\n  _updateUser(user: any, activeUser: any) {\n    if (activeUser) {\n      const options = {};\n      if (activeUser.id !== user.id) {\n        // When plex.tv is unavailable, the user will appear signed out despite\n        // being able to use stored servers. When ids do not match only copy\n        // across experience settings, and prevent the active user from copying\n        // other attributes from the signed out user.\n        // See: https://github.com/plexinc/plex-web-client/issues/13450\n        // See: https://github.com/plexinc/plex-web-client/issues/3797\n        (options as any).included = ['experienceSettings'];\n      }\n      activeUser.copyFromModel(user, options);\n    } else {\n      const storedUsers = userStorageModel.get('users');\n      storedUsers.add(user.toJSON(), { parse: true });\n    }\n    userStorageModel.debouncedSave();\n  },\n  //\n  // Listeners\n  // @ts-expect-error ts-migrate(6133) FIXME: 'user' is declared but its value is never read.\n  onHasInvalidTokenChange(user: any, hasInvalidToken: any) {\n    if (hasInvalidToken) {\n      this.handleInvalidToken();\n    }\n  },\n  onUserChange(user: any) {\n    if (this.debouncedChangeTimeout) {\n      window.clearTimeout(this.debouncedChangeTimeout);\n    }\n    const activeUser = userStorageModel.getActiveUser();\n    this.debouncedChangeTimeout = window.setTimeout(\n      this._updateUser.bind(this, user, activeUser),\n      0\n    );\n  },\n  onIsSignedInChange(user: any, isSignedIn: any) {\n    this.onIsSignedInChangeHandleToken(user, isSignedIn);\n    this.onIsSignedInChangeHandleSyncSettings(user, isSignedIn);\n    this.onIsSignedInChangeHandlePopulateUser(user, isSignedIn);\n  },\n  onIsSignedInChangeHandleToken(user: any, isSignedIn: any) {\n    // Only use the listener to handle an invalid token before the user first\n    // signs in. After initial sign in, call `handleInvalidToken` token directly\n    // when the user is signed out with an invalid token.\n    this.stopListening(\n      user,\n      'change:hasInvalidToken',\n      this.onHasInvalidTokenChange\n    );\n    if (!isSignedIn) {\n      if (user.get('hasInvalidToken')) {\n        this.handleInvalidToken();\n      }\n      return;\n    }\n    if (isSignedIn && user.get('restricted')) {\n      deleteNonEssentialCookies();\n    }\n    if (user.get('isFullUser') && isSignedIn) {\n      const xhrOptions = user.server.getXHROptions('/api/claim/subscribe');\n      $.ajax({\n        ...xhrOptions,\n        type: 'POST',\n      });\n    }\n  },\n  onIsSignedInChangeHandleSyncSettings(user: any, isSignedIn: any) {\n    if (!isSignedIn) {\n      return;\n    }\n    // If any settings were saved and unable to be synced to the user's account\n    // because the user was offline or plex.tv was down, do that now.\n    const dispatch = resolve('appStore').dispatch;\n    const userSettings = user.get('settings');\n    const experienceSettingsModel = user.get('experienceSettings');\n    const dirtySettingIDs = userSettings.reduce(\n      (arr: any, userSetting: any) => {\n        if (userSetting.get('isDirty')) {\n          arr.push(userSetting.get('id'));\n        }\n        return arr;\n      },\n      []\n    );\n    if (experienceSettingsModel.get('isDirty')) {\n      dispatch(syncExperienceSettings());\n    }\n    if (dirtySettingIDs.length) {\n      dispatch(syncSettings(dirtySettingIDs));\n    }\n  },\n  onIsSignedInChangeHandlePopulateUser(user: any, isSignedIn: any) {\n    if (!isSignedIn) {\n      const features = user.get('features');\n      features.clear();\n      return;\n    }\n    // Assume UserPage waits for user features to populate\n    const dispatch = resolve('appStore').dispatch;\n    const populateOptions = { reset: true };\n\n    user.get('homeDetails').populate(populateOptions);\n    user.get('homeUsers').populate(populateOptions);\n    user.get('consent').populate(populateOptions);\n    user.get('geo').populate(populateOptions);\n\n    const flexUserModel = user.get(__PLATFORM__);\n    flexUserModel.get('cloudCompanions').populate(populateOptions);\n    flexUserModel.get('devices').populate(populateOptions);\n    flexUserModel.get('invites').populate(populateOptions);\n    flexUserModel.get('socialNetworks').populate(populateOptions);\n\n    user\n      .get('features')\n      .populate(populateOptions)\n      .then(() => {\n        dispatch(populateCloudProviders());\n      });\n\n    dispatch(populateAllFriends());\n  },\n  onNotifyAccountChange() {\n    // Reload the user's subscriptions and services after an account change\n    // notification from plex.tv. This is important to maintain an accurate\n    // representation of a user's account without requiring a reload.\n    const user = this.user;\n\n    user.fetch().then(\n      () => {\n        log('[User] updated account following account change notification');\n      },\n      (error: any) => {\n        log.error(\n          '[User] Unable to update account following account change notification',\n          error\n        );\n      }\n    );\n  },\n});\nexport default UserManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport storageAdapter from 'app/js/adapters/storageAdapter';\nimport UserManager from 'app/js/managers/UserManager';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\n\nexport default function userInitializer() {\n  let promise = alwaysResolve(userStorageModel.populate());\n\n  promise = promise.then(() => storageAdapter.get('myPlexAccessToken'));\n\n  promise = promise.then(\n    (myPlexAccessToken) => {\n      const user = resolve('appModel').get('user');\n      const storedUsers = userStorageModel.get('users');\n      const storedUser = storedUsers.findWhere({\n        authToken: myPlexAccessToken,\n      });\n\n      if (storedUser) {\n        user.activateStoredUser(storedUser.id);\n        storedUser.copyToModel(user);\n      }\n    },\n    () => {\n      // Activate the anonymous user if there is no stored token.\n      const user = resolve('appModel').get('user');\n      user.activateStoredUser(0);\n\n      const storedUser = userStorageModel.getActiveUser();\n\n      if (storedUser) {\n        storedUser.copyToModel(user);\n      }\n    }\n  );\n\n  return alwaysResolve(promise).then(() => {\n    const user = resolve('appModel').get('user');\n\n    const userManager = new UserManager(user);\n    userManager.start();\n  });\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport React from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { Router } from 'react-router-dom';\nimport { resolve } from 'app/js/adapters/adapters';\nimport alertInitializer from 'app/js/initializers/alertInitializer';\nimport modalInitializer from 'app/js/initializers/modalInitializer';\nimport 'app/js/libs/bootstrap/button';\nimport 'app/js/libs/bootstrap/modal';\nimport 'app/js/libs/bootstrap/tooltip';\nimport 'app/js/libs/bootstrap/transition';\nimport config from 'app/js/models/config';\nimport App from 'app/js/v4/App';\nimport history from 'app/js/v4/history';\nimport ajaxInitializer from './ajaxInitializer';\nimport alertsInitializer from './alertsInitializer';\nimport appModelInitializer from './appModelInitializer';\nimport cloudServerEventInitializer from './cloudServerEventInitializer';\nimport commandsInitializer from './commandsInitializer';\nimport companionInitializer from './companionInitializer';\nimport desktopSettingsInitializer from './desktopSettingsInitializer';\nimport desktopStorageInitializer from './desktopStorageInitializer';\nimport errorTrackerInitializer from './errorTrackerInitializer';\nimport federatedAuthPINInitializer from './federatedAuthPINInitializer';\nimport languageInitializer from './languageInitializer';\nimport mediaElementInitializer from './mediaElementInitializer';\nimport mediaServerEventInitializer from './mediaServerEventInitializer';\nimport metricsInitializer from './metricsInitializer';\nimport reportersInitializer from './reportersInitializer';\nimport serverInitializer from './serverInitializer';\nimport sourceInitializer from './sourceInitializer';\nimport userInitializer from './userInitializer';\n\nfunction renderToDOM() {\n  ReactDOM.render(\n    <Provider store={resolve('appStore')}>\n      <Router history={history}>\n        <DndProvider backend={HTML5Backend}>\n          <App />\n        </DndProvider>\n      </Router>\n    </Provider>,\n    document.getElementById('plex')\n  );\n\n  return $.Deferred().resolve().promise();\n}\n\nexport default function appInitializer() {\n  // Start tracking errors as early as possible, in case something throws during\n  // initialization and prevents the app from loading.\n  let promise = errorTrackerInitializer();\n\n  // Instantiate reporters for logs.\n  promise = promise.then(reportersInitializer);\n\n  // Register all commands the app will be using.\n  promise = promise.then(commandsInitializer);\n\n  // Initialize storage next to make sure the following operations are reading\n  // from the correct storage and run all migrations before settings are\n  // fetched.\n  promise = promise.then(desktopStorageInitializer);\n\n  // Check the query string for alerts to display, push them into config,\n  // clean up the history.\n  promise = promise.then(alertsInitializer);\n\n  // Initialize the app model after storage is initialized so we can grab a\n  // client identifier from storage or generate one if it does not already\n  // exist.\n  promise = promise.then(appModelInitializer);\n\n  // Start tracking ajax requests.\n  promise = promise.then(ajaxInitializer);\n\n  // Fetch all settings from storage.\n  promise = promise.then(desktopSettingsInitializer);\n\n  // Set the active user from user storage from stored user after settings are\n  // fetched. This should happen before servers are initialized so the server\n  // initializer knows where to look for stored servers.\n  promise = promise.then(userInitializer);\n\n  // Can now set the language since the settings model containing language would\n  // have been initialized\n  promise = promise.then(languageInitializer);\n\n  if (config.allowCloudPubSub) {\n    // Start listening to open connections to receive server events before\n    // servers are initialized.\n    promise = promise.then(() => cloudServerEventInitializer());\n  }\n\n  // Start listening to open connections to receive server events before\n  // servers are initialized.\n  promise = promise.then(mediaServerEventInitializer);\n\n  // Start listening for changes to sources before server and providers are\n  // initialized\n  promise = promise.then(sourceInitializer);\n\n  // Create servers that were stored from a previous session and create\n  // configured servers.\n  promise = promise.then(serverInitializer);\n\n  // Create the singleton audio media element and be ready to start silent\n  // playback on interaction so auto-play works correctly in browsers that block\n  // auto-play.\n  promise = promise.then(mediaElementInitializer);\n\n  promise = promise.then(companionInitializer);\n\n  // Read PIN from query string\n  promise = promise.then(federatedAuthPINInitializer);\n\n  // Initializing metrics starts tracking immediately. Start tracking after we\n  // have a client identifier to send along with events as well as the user's\n  // tracking preference. Tracking is started last as a means to capture startup\n  // time excluding advanced rendering and routing.\n  promise = promise.then(metricsInitializer);\n\n  promise = promise.then(modalInitializer);\n\n  promise = promise.then(alertInitializer);\n\n  promise = promise.then(renderToDOM);\n\n  return promise;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\n// @ts-expect-error ts-migrate(7016) FIXME: Could not find a declaration file for module 'hand... Remove this comment to see the full error message\nimport Handlebars from 'handlebars';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/parti... Remove this comment to see the full error message\nimport autocompleteTextInputTpl from 'app/templates/partials/AutocompleteTextInput.tpl';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/parti... Remove this comment to see the full error message\nimport connectErrorTpl from 'app/templates/partials/ConnectError.tpl';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/parti... Remove this comment to see the full error message\nimport lockableNumericInputTpl from 'app/templates/partials/LockableNumericInput.tpl';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/parti... Remove this comment to see the full error message\nimport lockableTagInputTpl from 'app/templates/partials/LockableTagInput.tpl';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/parti... Remove this comment to see the full error message\nimport lockableTextInputTpl from 'app/templates/partials/LockableTextInput.tpl';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/parti... Remove this comment to see the full error message\nimport settingTpl from 'app/templates/partials/Setting.tpl';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/parti... Remove this comment to see the full error message\nimport textInputTpl from 'app/templates/partials/TextInput.tpl';\n\n// Partials should be precompiled, but we cannot use the hb plugin within\n// HandlebarsConfig because there's no dependency hierarchy.\n\nHandlebars.registerPartial('setting', settingTpl);\nHandlebars.registerPartial('lockableTagInput', lockableTagInputTpl);\nHandlebars.registerPartial('lockableTextInput', lockableTextInputTpl);\nHandlebars.registerPartial('lockableNumericInput', lockableNumericInputTpl);\nHandlebars.registerPartial('textInput', textInputTpl);\nHandlebars.registerPartial('autocompleteTextInput', autocompleteTextInputTpl);\nHandlebars.registerPartial('connectError', connectErrorTpl);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport X2JS from 'x2js';\n\nconst xmlParser = new X2JS({\n  attributePrefix: '_',\n  // @ts-expect-error ts-migrate(2322) FIXME: Type '{}' is not assignable to type '\"object\" | \"t... Remove this comment to see the full error message\n  emptyNodeForm: {},\n  ignoreRoot: true,\n});\n\nconst xmlWriter = {\n  writeXml: function (json: any) {\n    return '<?xml version=\"1.0\"?>' + xmlParser.js2xml(json);\n  },\n};\n\nexport default xmlWriter;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport config from 'app/js/models/config';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport log from 'app/js/utils/log/log';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\nimport parser2 from 'app/js/utils/parser2';\nimport xmlWriter from 'app/js/utils/xmlWriter';\n\nfunction resolveAllAndClear(deferreds: any) {\n  deferreds.forEach((deferred: any) => {\n    deferred.resolve();\n  });\n  deferreds.length = 0;\n}\n\nfunction rejectAllAndClear(deferreds: any) {\n  deferreds.forEach((deferred: any) => {\n    deferred.reject();\n  });\n  deferreds.length = 0;\n}\n\nconst POLL_RETRY_DELAY = 1000;\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst MediaServerCompanionProxy = BaseClass.extend({\n  mixins: [eventMixin],\n\n  //\n  // Properties\n\n  name: 'MediaServerCompanionProxy',\n\n  commandID: 0,\n\n  //\n  // Init\n\n  initialize() {\n    _.bindAll(\n      this,\n      '_checkPollRequestStatus',\n      '_pickProxyServer',\n      '_poll',\n      '_repoll',\n      '_sendResponse',\n      '_unregisterPlayer',\n      'onPollSuccess',\n      'onPollError'\n    );\n\n    this._debounceUnregisterPlayer = _.debounce(this._unregisterPlayer, 2000);\n    this._debouncePickProxyServer = _.debounce(this._pickProxyServer, 2000);\n    this._deepLinkDeferred = $.Deferred().resolve();\n    this._playerRegistrationDeferreds = [];\n    this._playerUnregistrationDeferreds = [];\n    this._pollRetryDelay = POLL_RETRY_DELAY;\n  },\n\n  //\n  // Control\n\n  getDeepLink() {\n    return this._deepLinkDeferred.promise();\n  },\n\n  publish(timeline: any) {\n    if (!this.proxyServer) {\n      return;\n    }\n\n    if (this.timelineInflight) {\n      // we only need to keep the last timeline,\n      this._pendingTimeline = timeline;\n      return;\n    }\n\n    this.timelineInflight = true;\n\n    const xml = xmlWriter.writeXml(timeline);\n\n    const url = _.result(this.proxyServer, 'url');\n    const xhrOptions = this.proxyServer.getXHROptions(\n      `${url}player/proxy/timeline?commandID=${this.commandID}`\n    );\n\n    xhrOptions.data = `timeline=${encodeURIComponent(xml)}`;\n    xhrOptions.method = 'POST';\n    xhrOptions.contentType = 'application/x-www-form-urlencoded';\n\n    $.ajax(xhrOptions).always(() => {\n      this.timelineInflight = false;\n      const pendingTimeline = this._pendingTimeline;\n      if (pendingTimeline) {\n        delete this._pendingTimeline;\n        this.publish(pendingTimeline);\n      }\n    });\n  },\n\n  subscribe(callback: any) {\n    if (this.started) {\n      return;\n    }\n\n    this.callback = callback;\n    this.started = true;\n    this.appModel = resolve('appModel');\n\n    this.listenTo(\n      this.appModel,\n      'change:companionServer',\n      this._debouncePickProxyServer\n    );\n    this._debouncePickProxyServer(\n      this.appModel,\n      this.appModel.get('companionServer')\n    );\n  },\n\n  unsubscribe() {\n    if (!this.started) {\n      return;\n    }\n\n    const activeProxyServer = this.proxyServer;\n\n    this.started = false;\n    this.stopListening(\n      this.servers,\n      'change:connected',\n      this._debouncePickProxyServer\n    );\n    this.callback = null;\n    this.proxyServer = null;\n\n    if (activeProxyServer) {\n      this._debounceUnregisterPlayer(activeProxyServer);\n    }\n\n    this._clearPollRequestStatusCheck();\n\n    if (this.pollRequest) {\n      this.pollRequest.abort();\n      this.pollRequest = null;\n    }\n  },\n\n  unregisterPlayer(cloudServer: any, clientID: any) {\n    this.cloudServer = cloudServer;\n    this.clientID = clientID;\n\n    const deferred = $.Deferred();\n    this._playerUnregistrationDeferreds.push(deferred);\n\n    return deferred.promise();\n  },\n\n  registerPlayer(server: any, clientID: any) {\n    this.cloudServer = server;\n    this.clientID = clientID;\n\n    const deferred = $.Deferred();\n    this._playerRegistrationDeferreds.push(deferred);\n\n    return deferred.promise();\n  },\n\n  debugStatus() {\n    const server = this.proxyServer;\n    return server ? `Proxied: ${server.get('debugName')}` : undefined;\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'appModel' is declared but its value is never read... Remove this comment to see the full error message\n  _pickProxyServer(appModel: any, proxyServer: any) {\n    if (!this.started) {\n      return;\n    }\n\n    this.proxyServer = proxyServer;\n\n    if (this.proxyServer) {\n      this._registerServer();\n      this._poll();\n    }\n  },\n\n  _registerServer() {\n    if (!this.proxyServer || !this.cloudServer || !this.clientID) {\n      // Companion proxy not initialized yet\n      return;\n    }\n\n    const xhrOptions = this.cloudServer.getXHROptions(\n      `devices/${this.clientID}`,\n      {\n        method: 'POST',\n        headers: {\n          'X-Plex-Provides': config.allowCloudPubSub\n            ? 'client,player,pubsub-player'\n            : 'client,player',\n        },\n        data: {\n          // This helps us avoid CORS requests in opera since POSTs require a CORS\n          // OPTIONS request, but PUT doesn't.\n          // See: https://github.com/plexinc/plex-web-client/issues/2940\n          _method: 'PUT',\n          proxiedBy: this.proxyServer.id,\n        },\n      }\n    );\n\n    $.ajax(xhrOptions)\n      .done(() => {\n        resolveAllAndClear(this._playerRegistrationDeferreds);\n      })\n      .fail(() => {\n        rejectAllAndClear(this._playerRegistrationDeferreds);\n      });\n  },\n\n  _unregisterPlayer(proxyServer: any) {\n    if (!proxyServer || !this.cloudServer || !this.clientID) {\n      return;\n    }\n\n    const xhrOptions = this.cloudServer.getXHROptions(\n      `/devices/${this.clientID}`,\n      {\n        method: 'POST',\n        headers: {\n          'X-Plex-Provides': 'client',\n        },\n        data: {\n          _method: 'PUT',\n        },\n      }\n    );\n\n    $.ajax(xhrOptions)\n      .done(() => {\n        resolveAllAndClear(this._playerUnregistrationDeferreds);\n      })\n      .fail(() => {\n        rejectAllAndClear(this._playerUnregistrationDeferreds);\n      });\n  },\n\n  _poll() {\n    if (!this.started) {\n      return;\n    }\n\n    const proxyServer = this.proxyServer;\n\n    if (!proxyServer) {\n      log.info('[Companion] No proxy server available to long poll');\n      return;\n    } else if (this._isPollRequestPending()) {\n      log.info(\n        '[Companion] Long poll already open to ',\n        proxyServer.get('debugName')\n      );\n      return;\n    }\n\n    // Wait for a delay then check if the poll is still pending. If it is still\n    // pending then assume it is safe to reset the poll retry delay.\n    this._clearPollRequestStatusCheck();\n    this._checkPollRequestStatusLater();\n    this._clearRepollLater();\n\n    const xhrOptions = proxyServer.getXHROptions('/player/proxy/poll', {\n      data: {\n        deviceClass: 'pc',\n        protocolVersion: '3',\n        protocolCapabilities: 'timeline,playback,navigation,mirror,playqueues',\n        // Allow PMS to timeout our poll request after a delay.\n        timeout: 1,\n      },\n    });\n\n    log.info(\n      '[Companion] Opening long poll to %s at %s',\n      proxyServer.get('debugName'),\n      xhrOptions.url\n    );\n\n    this.pollRequest = $.ajax(xhrOptions)\n      .done(this.onPollSuccess)\n      .fail(this.onPollError);\n  },\n\n  _repoll() {\n    // Clean up from any previous polls and open a new async connection.\n    this._clearPollRequestStatusCheck();\n    this._clearRepollLater();\n    this._poll();\n  },\n\n  _isPollRequestPending() {\n    return this.pollRequest ? this.pollRequest.state() === 'pending' : false;\n  },\n\n  _checkPollRequestStatus() {\n    if (this._isPollRequestPending() && this.proxyServer) {\n      log.info(\n        '[Companion] Poll connection successfully opened with %s',\n        this.proxyServer.get('debugName')\n      );\n      this._pollRetryDelay = POLL_RETRY_DELAY;\n    }\n  },\n\n  _checkPollRequestStatusLater() {\n    this._pollRequestStatusCheckTimeout = window.setTimeout(\n      this._checkPollRequestStatus,\n      5000\n    );\n  },\n\n  _clearPollRequestStatusCheck() {\n    this._pollRequestStatusCheckTimeout = window.clearTimeout(\n      this._pollRequestStatusCheckTimeout\n    );\n  },\n\n  _repollLater() {\n    this._pollRetryTimeout = window.setTimeout(\n      this._repoll,\n      this._pollRetryDelay\n    );\n  },\n\n  _clearRepollLater() {\n    this._pollRetryTimeout = window.clearTimeout(this._pollRetryTimeout);\n  },\n\n  _processCommand(command: any) {\n    if (!this.started) {\n      return;\n    }\n\n    const signal = {\n      path: command.path,\n      commandID: command.commandID,\n      supportsTimeline: true,\n      query: {\n        key: [command.queryKey],\n        providerIdentifier: [command.queryProviderIdentifier],\n        offset: [command.queryOffset],\n        mediaIndex: [command.queryMediaIndex],\n        containerKey: [command.queryContainerKey],\n        playQueueID: [command.queryPlayqueueid],\n        type: [command.queryType],\n        volume: [command.queryVolume],\n        repeat: [command.queryRepeat],\n        shuffle: [command.queryShuffle],\n        autoPlay: [command.queryAutoPlay],\n        subtitleColor: [command.querySubtitleColor],\n        subtitlePosition: [command.querySubtitlePosition],\n        subtitleSize: [command.querySubtitleSize],\n        subtitleOffset: [command.querySubtitleOffset],\n        audioStreamID: [command.queryAudioStreamID],\n        subtitleStreamID: [command.querySubtitleStreamID],\n\n        token: [command.queryToken],\n        machineIdentifier: [command.queryMachineIdentifier],\n\n        protocol: [command.queryProtocol],\n        address: [command.queryAddress],\n        port: [command.queryPort],\n\n        text: [command.queryText],\n        field: [command.queryField],\n      },\n    };\n\n    const stillWaitingForCommand =\n      this._deepLinkDeferred.state() !== 'resolved';\n\n    this.callback(signal, stillWaitingForCommand).always((result: any) => {\n      if (stillWaitingForCommand && result && result.deferredAction) {\n        this._deepLinkDeferred.resolve(result.deferredAction);\n      }\n      this._sendResponse(result.controllerResponse);\n    });\n  },\n\n  _sendResponse(resp: any) {\n    if (!this.proxyServer) {\n      return;\n    }\n\n    const commandID = parseInt(resp.commandID, 10);\n\n    if (this.commandID < commandID) {\n      this.commandID = commandID;\n    }\n\n    // The PMS proxy requires `commandID` be present as GET parameter. Sending\n    // as POST data results in a `400 Bad Request` from PMS and may strand\n    // controllers in inconsistent states.\n    // See: https://github.com/plexinc/plex-web-client/issues/6427\n    const url = `/player/proxy/response?commandID=${resp.commandID}`;\n\n    const xhrOptions = this.proxyServer.getXHROptions(url, {\n      method: 'POST',\n      contentType: 'application/x-www-form-urlencoded',\n      data: {\n        // Encoding is done by the `$.ajax()` transport before sending.\n        response: resp.body,\n      },\n    });\n\n    $.ajax(xhrOptions);\n  },\n\n  //\n  // Listeners\n\n  onPollSuccess(data: any) {\n    const json = data && parser2.parseXML(data);\n    const Command = json && json.Command;\n\n    // An empty response could indicate one of two things:\n    //\n    //   * The server has timed out the poll.\n    //   * The server is shutdown (gracefully or abruptly). This can result\n    //     in either an empty successful response or a failed request.\n    //\n    // We cannot distinguish between the two so we assume it's the former\n    // and repoll. If the server has shutdown then the repoll will fail\n    // and hit the `onPollError` path.\n    if (!data) {\n      this._repoll();\n      return;\n    }\n\n    if (!json) {\n      log.warn('[Companion] Poll succeeded without a parseable response', data);\n    } else if (!Command) {\n      log.warn('[Companion] Poll succeeded without a Command response', json);\n    }\n\n    // Guard against misbehaving servers.\n    if (!Command) {\n      this.onPollError();\n      return;\n    }\n\n    // Open up a new poll before handling commands.\n    this._repoll();\n\n    const commands = Array.isArray(Command) ? Command : [Command];\n\n    commands.forEach((command) => {\n      try {\n        log.info(\n          '[Companion] Received %s from %s',\n          command.path,\n          command.deviceName\n        );\n        this._processCommand(command);\n      } catch (error) {\n        log.warn(\n          '[Companion] encountered %s while processing %s',\n          error.message,\n          command\n        );\n      }\n    }, this);\n  },\n\n  // Poll errors occur when:\n  //\n  //   * The server is shutdown (gracefully or abruptly). This can result\n  //     in either an empty successful response or a failed request.\n  //   * The connection is aborted.\n  //   * The connection is terminated.\n  //   * The connection succeeds yet returns an unexpected response.\n  //\n  // After poll errors retry on a delay\n  // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n  onPollError(xhr = {}) {\n    const proxyServer = this.proxyServer;\n\n    if (!this.started || !proxyServer) {\n      return;\n    }\n\n    this._clearPollRequestStatusCheck();\n    this._clearRepollLater();\n\n    this._repollLater();\n\n    this._pollRetryDelay *= 2;\n\n    const debugName = proxyServer.get('debugName');\n    log.warn('[Companion] Poll failed to %s', debugName);\n  },\n});\n\nexport default MediaServerCompanionProxy;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { LEADER_STATUS_CHANGED } from 'app/js/utils/constants/localStorageLeaderEvents';\nimport log from 'app/js/utils/log/log';\nimport random from 'app/js/utils/string/random';\n\nconst ELECTION_DURATION = 500;\nconst MAX_LEADER_AGE = 90000; // 1.5 minutes\nconst MIN_LEADER_REFRESH_DURATION = 10000; // 10 seconds\n\n// Storage\nexport const LEADER_STORAGE_KEY = 'vote/leader';\n\n// @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\nfunction localStorageGetItem(key: any) {\n  try {\n    return window.localStorage.getItem(key);\n  } catch (error) {\n    log.debug(\n      `[Vote] Unable to get ${key} from storage due to error:`,\n      error.message\n    );\n  }\n}\n\nfunction localStorageSetItem(key: any, value: any) {\n  try {\n    return window.localStorage.setItem(key, value);\n  } catch (error) {\n    log.debug(\n      `[Vote] Unable to set ${key}: ${value} in storage due to error:`,\n      error.message\n    );\n  }\n}\n\nfunction localStorageRemoveItem(key: any) {\n  try {\n    return window.localStorage.removeItem(key);\n  } catch (error) {\n    log.debug(\n      `[Vote] Unable to remove ${key} from storage due to error:`,\n      error.message\n    );\n  }\n}\n\nconst EMPTY_LEADER_INFO = { id: null, time: null };\n\nfunction createLocalStorageVote({\n  id = random(),\n  getItem = localStorageGetItem,\n  setItem = localStorageSetItem,\n  remove = localStorageRemoveItem,\n  electionDuration = ELECTION_DURATION,\n  maxLeaderAge = MAX_LEADER_AGE,\n  minLeaderRefreshDuration = MIN_LEADER_REFRESH_DURATION,\n}) {\n  function isLeader(now = Date.now()) {\n    return getLeaderInfo(now).id === id;\n  }\n\n  function getLeaderInfo(now: any) {\n    try {\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'string | null | undefined' is no... Remove this comment to see the full error message\n      const { id: leaderID, time } = JSON.parse(getItem(LEADER_STORAGE_KEY));\n      return now - time < maxLeaderAge\n        ? { id: leaderID, time }\n        : EMPTY_LEADER_INFO;\n    } catch (error) {\n      return EMPTY_LEADER_INFO;\n    }\n  }\n\n  let electionTimeout: any;\n  let wasLeader = false;\n\n  function scheduleElection() {\n    window.clearTimeout(electionTimeout);\n\n    electionTimeout = window.setTimeout(() => {\n      const now = Date.now();\n      const { id: leaderID } = getLeaderInfo(now);\n\n      if (leaderID) {\n        const isNowLeader = leaderID === id;\n        const didLeaderStatusChange = isNowLeader !== wasLeader;\n\n        if (didLeaderStatusChange) {\n          log.debug(\n            isNowLeader ? `[Vote:${id}] Elected` : `[Vote:${id}] Unelected`\n          );\n\n          // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\n          callbacks[LEADER_STATUS_CHANGED].forEach((fn) => fn(isNowLeader));\n        }\n\n        wasLeader = isNowLeader;\n      } else {\n        log.debug(`[Vote:${id}] Election ended with no leader found`);\n\n        // If the old leader left, try to become leader\n        up(now);\n      }\n    }, electionDuration);\n  }\n\n  function down(now = Date.now()) {\n    if (isLeader(now)) {\n      log.debug(`[Vote:${id}] Downvote, stepping down as leader`);\n      remove(LEADER_STORAGE_KEY);\n    } else {\n      log.debug(`[Vote:${id}] Downvote, chilling since someone else is leader`);\n    }\n\n    scheduleElection();\n  }\n\n  function up(now = Date.now()) {\n    // Everybody race to be leader\n    const { id: leaderID, time } = getLeaderInfo(now);\n\n    if (leaderID === id && now - time > minLeaderRefreshDuration) {\n      log.debug(`[Vote:${id}] Upvote, refreshing my leader time`);\n      setItem(LEADER_STORAGE_KEY, JSON.stringify({ time: now, id }));\n    } else if (leaderID === id) {\n      log.debug(`[Vote:${id}] Upvote, chilling since leader time is fresh`);\n    } else if (leaderID) {\n      log.debug(`[Vote:${id}] Upvote, someone else is leader`);\n    } else {\n      log.debug(`[Vote:${id}] Upvote, becoming leader`);\n      setItem(LEADER_STORAGE_KEY, JSON.stringify({ time: now, id }));\n    }\n\n    scheduleElection();\n  }\n\n  function on(eventName: any, fn: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    callbacks[eventName].push(fn);\n  }\n\n  function off(eventName: any, fn: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    callbacks[eventName] = callbacks[eventName].filter(\n      (_fn: any) => _fn !== fn\n    );\n  }\n\n  // Setup internal state\n  const callbacks = { [LEADER_STATUS_CHANGED]: [] };\n\n  return {\n    on,\n    off,\n    isLeader,\n    up,\n    down,\n  };\n}\n\nexport default createLocalStorageVote;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport capabilities from 'app/js/utils/device/capabilities';\nimport createLocalStorageVote, {\n  LEADER_STORAGE_KEY,\n} from './createLocalStorageVote';\n\nfunction createCompanionVote() {\n  const maxLeaderAge = 90000; // 1.5 minutes\n  const leaderRefreshTiming = 60000; // 1 minute\n\n  const vote = createLocalStorageVote({ maxLeaderAge });\n\n  if (capabilities.hasLocalStorage) {\n    window.addEventListener('storage', (event) => {\n      if (event.key === LEADER_STORAGE_KEY) {\n        vote.up();\n      }\n    });\n\n    window.addEventListener('beforeunload', () => {\n      vote.down();\n    });\n\n    // Try to become leader immediately\n    vote.up();\n\n    // Try to become leader every minute\n    window.setInterval(vote.up, leaderRefreshTiming);\n  }\n\n  return vote;\n}\n\nexport default createCompanionVote;\n","import _ from 'underscore';\nimport { InterpolationValue } from 'app/js/utils/TranslationTypes';\nimport escapeRegExp from 'app/js/utils/string/escapeRegExp';\n\nconst tokenMemo: { [key: string]: RegExp } = {};\n\nfunction formatInterpolationValue(value: InterpolationValue): string {\n  return value == null ? '' : String(value);\n}\n\nfunction interpolateTokens(\n  translation: string,\n  tokens: { [key: string]: any }\n): string {\n  return translation.replace(\n    /\\{([a-z0-9]+?)\\}/gi,\n    (match: string, tokenMatch: string) =>\n      tokens.hasOwnProperty(tokenMatch)\n        ? formatInterpolationValue(tokens[tokenMatch])\n        : match\n  );\n}\n\nfunction interpolateIteration(\n  translation: string,\n  ...args: InterpolationValue[]\n): string {\n  // Iteratively interpolate variables, as placeholders may\n  // appear in arguments other than the translation key.\n  let regexp;\n  let i = 1;\n  const len = args.length;\n\n  while (i <= len) {\n    regexp = tokenMemo[i];\n    if (!regexp) {\n      regexp = new RegExp(escapeRegExp(`{${i}}`), 'g');\n      tokenMemo[i] = regexp;\n    }\n    translation = translation.replace(\n      regexp,\n      formatInterpolationValue(args[i - 1])\n    );\n    i++;\n  }\n\n  return translation;\n}\n\nfunction interpolate(\n  translation: string,\n  ...args: InterpolationValue[]\n): string {\n  if (_.isObject(args[0])) {\n    return interpolateTokens(translation, args[0]);\n  } else if (_.isObject(args[args.length - 1])) {\n    args.pop();\n    return interpolateIteration(translation, ...args);\n  } else {\n    return interpolateIteration(translation, ...args);\n  }\n}\n\nfunction translate(isEscaped: boolean, translation: string): string {\n  if (!translation) {\n    return '';\n  }\n\n  return isEscaped ? _.escape(translation) : translation;\n}\n\ntype GetTranslation = (key: string) => string | undefined;\n\nfunction createTranslationInterpolator(getTranslation: GetTranslation) {\n  return function t(key: string, ...args: any[]): string {\n    const translation = translate(\n      false,\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      getTranslation.call(this, key) || key\n    );\n\n    return interpolate(translation, ...args);\n  };\n}\n\nexport function createEscapedTranslationInterpolator(\n  getTranslation: GetTranslation\n) {\n  return function t(key: string, ...args: any[]): string {\n    const translation = translate(\n      true,\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      getTranslation.call(this, key) || key\n    );\n\n    return interpolate(translation, ...args);\n  };\n}\n\nexport default createTranslationInterpolator;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport createTranslationInterpolator, {\n  createEscapedTranslationInterpolator,\n} from 'app/js/utils/createTranslationInterpolator';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport languageFiles from 'app/js/utils/language/languageFiles';\nimport path from 'app/js/utils/url/path';\n\nconst localizerMixin = {\n  //\n  // Properties\n  // List of all available localizations. Call `getLanguage()` to obtain a\n  // the list of all supported localizations.\n  languages: languageFiles,\n  loadingPromise: null,\n  loadingLanguage: null,\n  //\n  // Control\n  // Provides list of all supported localizations.\n  getLanguages: function () {\n    return this.languages;\n  },\n  // @ts-expect-error ts-migrate(7023) FIXME: 'getTranslation' implicitly has return type 'any' ... Remove this comment to see the full error message\n  getTranslation: function (key: any) {\n    // @ts-expect-error ts-migrate(2551) FIXME: Property 'translations' does not exist on type '{ ... Remove this comment to see the full error message\n    if (this.translations[this.language]) {\n      // @ts-expect-error ts-migrate(2551) FIXME: Property 'translations' does not exist on type '{ ... Remove this comment to see the full error message\n      return this.translations[this.language][key];\n    }\n  },\n  t: createTranslationInterpolator(function (key: any, ...args: any[]) {\n    // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n    return this.getTranslation(key, ...args);\n  }),\n  tEscape: createEscapedTranslationInterpolator(function (\n    key: any,\n    ...args: any[]\n  ) {\n    // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n    return this.getTranslation(key, ...args);\n  }),\n  load: function (language: any) {\n    if (this.loadingLanguage && this.loadingLanguage === language) {\n      // Do not make multiple requests for the same language.\n      return this.loadingPromise;\n    }\n    const languagesNow = this.getLanguages();\n    let promise;\n    if (!_.has(languagesNow, language)) {\n      // Only allow predefined languages to be loaded.\n      promise = $.Deferred().reject().promise();\n      // @ts-expect-error ts-migrate(2551) FIXME: Property 'translations' does not exist on type '{ ... Remove this comment to see the full error message\n    } else if (_.has(this.translations, language)) {\n      // If we already have translations for this language, just trigger the\n      // change event instead of making another request.\n      promise = $.Deferred().resolve().promise();\n    } else {\n      // Make a request for the translations json file and set the response\n      // on the translations object so we don't need to request it again.\n      promise = $.ajax({\n        dataType: 'json',\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 1.\n        url: path.join([(this as any).basePath, languagesNow[language]]),\n      });\n    }\n    // Capture state for use determining if the completed promise is valid.\n    this.loadingLanguage = language;\n    // @ts-expect-error ts-migrate(2322) FIXME: Type 'Promise<any, any, any>' is not assignable to... Remove this comment to see the full error message\n    this.loadingPromise = promise;\n    promise.done(_.bind(this.onLoadSuccess, this, promise));\n    promise.fail(_.bind(this.onLoadError, this, promise));\n    return promise;\n  },\n  //\n  // Listeners\n  onLoadSuccess: function (promise: any, response: any) {\n    const language = this.loadingLanguage;\n    if (promise === this.loadingPromise) {\n      this.loadingPromise = null;\n      this.loadingLanguage = null;\n      // @ts-expect-error ts-migrate(2551) FIXME: Property 'language' does not exist on type '{ lang... Remove this comment to see the full error message\n      this.language = language;\n      // Only store this translation in memory if we actually fetched it from the server\n      // and received a response. In the cases where we switch to a language we've previously\n      // fetched we don't want to set the language again since there is no response.\n      // See https://github.com/plexinc/plex-web-client/issues/3587\n      if (response) {\n        // @ts-expect-error ts-migrate(2551) FIXME: Property 'translations' does not exist on type '{ ... Remove this comment to see the full error message\n        this.translations[language] = response;\n      }\n\n      dispatcher.trigger('languageLoaded', language);\n    }\n  },\n  onLoadError: function (promise: any) {\n    if (promise === this.loadingPromise) {\n      dispatcher.trigger('languageLoaded', this.loadingLanguage);\n\n      this.loadingPromise = null;\n      this.loadingLanguage = null;\n    }\n  },\n};\nexport default localizerMixin;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst languageFiles = {\n  // English\n  en: 'en.json',\n  // English (United Kingdom)\n  'en-GB': 'en-GB.json',\n  // Afrikaans\n  af: 'af.json',\n  // Malaysia\n  my: 'my.json',\n  // Catalan\n  ca: 'ca.json',\n  // Czech\n  cs: 'cs.json',\n  // Serbian\n  sr: 'sr.json',\n  // Danish\n  da: 'da.json',\n  // German\n  de: 'de.json',\n  // Estonian\n  et: 'et.json',\n  // Spanish\n  es: 'es.json',\n  // Spanish (Latin America)\n  'es-419': 'es-419.json',\n  // Greek\n  el: 'el.json',\n  // French\n  fr: 'fr.json',\n  // French (Canada)\n  'fr-CA': 'fr-CA.json',\n  // Croatian\n  hr: 'hr.json',\n  // Icelandic\n  is: 'is.json',\n  // Italian\n  it: 'it.json',\n  // Lithuanian\n  lt: 'lt.json',\n  // Hungarian\n  hu: 'hu.json',\n  // Dutch\n  nl: 'nl.json',\n  // Norwegian\n  no: 'no.json',\n  // Polish\n  pl: 'pl.json',\n  // Portuguese\n  pt: 'pt.json',\n  // Portuguese (Brazil)\n  'pt-BR': 'pt-BR.json',\n  // Russian\n  ru: 'ru.json',\n  // Romanian\n  ro: 'ro.json',\n  // Slovak\n  sk: 'sk.json',\n  // Slovenian\n  sl: 'sl.json',\n  // Finnish\n  fi: 'fi.json',\n  // Swedish\n  sv: 'sv.json',\n  // Vietnamese\n  vi: 'vi.json',\n  // Turkish\n  tr: 'tr.json',\n  // Ukrainian\n  uk: 'uk.json',\n  // Bulgarian\n  bg: 'bg.json',\n  // Chinese (Simplified)\n  zh: 'zh.json',\n  // Chinese (Traditional Taiwan)\n  'zh-TW': 'zh-TW.json',\n  // Japanese\n  ja: 'ja.json',\n  // Korean\n  ko: 'ko.json',\n  // Thai\n  th: 'th.json',\n  // Farsi\n  fa: 'fa.json',\n  // Arabic\n  ar: 'ar.json',\n  // Hebrew\n  he: 'he.json',\n};\n\nexport default languageFiles;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport log from 'app/js/utils/log/log';\n\nconst WAIT_DURATION = 2500;\n\nexport default function awaitEvents(options: any) {\n  const {\n    eventSource,\n    events,\n    predicate = () => true,\n    waitDuration = WAIT_DURATION,\n  } = options;\n\n  const deferred = $.Deferred();\n\n  const callback = () => {\n    if (predicate(eventSource)) {\n      // @ts-expect-error ts-migrate(2322) FIXME: Type 'void' is not assignable to type 'number'.\n      timeoutID = window.clearTimeout(timeoutID);\n      eventSource.off(callbacks);\n      deferred.resolve(eventSource);\n    }\n  };\n\n  const callbacks = events.reduce((acc: any, event: any) => {\n    acc[event] = callback;\n    return acc;\n  }, {});\n\n  let timeoutID = window.setTimeout(() => {\n    log.warn(\n      'Model \"%s\" events %o did not pass the predicate within %dms',\n      eventSource.name,\n      events,\n      waitDuration\n    );\n\n    eventSource.off('add', callbacks);\n\n    deferred.reject(eventSource);\n  }, waitDuration);\n\n  eventSource.on(callbacks);\n\n  return deferred.promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport awaitEvents from './awaitEvents';\n\n// The promise returned by this helper:\n// - Resolves with a model when a model was found and is or became ready.\n// - Rejects with a model when a model was found but did not become ready.\n// - Rejects with nothing when a model was not found.\n\nexport default function awaitReady(model: any) {\n  return model.get('isPopulated')\n    ? $.Deferred().resolve(model).promise()\n    : awaitEvents({\n        eventSource: model,\n        events: ['change:error', 'change:isPopulated'],\n      });\n}\n","import { resolve, waitFor } from 'app/js/adapters/adapters';\nimport localizerMixin from 'app/js/mixins/localizerMixin';\nimport awaitReady from 'app/js/stores/actions/helpers/awaitReady';\nimport { fetchProvider } from 'app/js/stores/actions/provider/providerActions';\nimport { fetchProviders } from 'app/js/stores/actions/serverActions';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport whenEach from 'app/js/utils/promise/whenEach';\nimport path from 'app/js/utils/url/path';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst Localizer = BaseClass.extend({\n  mixins: localizerMixin,\n\n  //\n  // Init\n\n  constructor: function () {\n    this.basePath = path.join([__PUBLIC_PATH__, 'translations']);\n    this.translations = {};\n\n    waitFor('appModel').done(this.onAppModelRegistered.bind(this));\n  },\n\n  //\n  // Control\n\n  _repopulateProviders() {\n    const appModel = resolve('appModel');\n    const serverModels = appModel.get('servers');\n\n    return whenEach(\n      serverModels\n        .map((serverModel: any) => {\n          if (serverModel.get('isCloud')) {\n            const providers = appModel.get('user').get('providers');\n\n            return whenEach(\n              providers.map((providerModel: any) => {\n                resolve('appStore').dispatch(\n                  fetchProvider({\n                    providerEntityID: providerModel.entityID(),\n                    options: {\n                      merge: true,\n                    },\n                  })\n                );\n\n                return awaitReady(providerModel);\n              })\n            );\n          } else if (serverModel.get('isConnected')) {\n            resolve('appStore').dispatch(\n              fetchProviders({\n                serverEntityID: serverModel.entityID(),\n                options: {\n                  merge: true,\n                },\n              })\n            );\n\n            return awaitReady(serverModel);\n          }\n\n          return;\n        })\n        .filter(Boolean)\n    );\n  },\n\n  //\n  // Listeners\n\n  onAppModelRegistered() {\n    if (__DEV__) {\n      throw new Error(\n        '[Localizer] Missing onAppModelRegistered implementation.'\n      );\n    }\n  },\n});\n\nexport default Localizer;\n","import Localizer from 'app/js/adapters/Localizer';\nimport api from 'app/js/v4/utils/data/api';\n\nconst DesktopLocalizer = Localizer.extend({\n  //\n  // Listeners\n\n  onAppModelRegistered(appModel: any) {\n    appModel.on(\n      'change:user.change:experienceSettings.change:language',\n      (_model: any, language: any) => {\n        this.load(language).done(() => {\n          api.setOption('language', language);\n          this._repopulateProviders();\n        });\n      }\n    );\n  },\n});\n\nexport default DesktopLocalizer;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport DesktopLocalizer from 'app/js/adapters/DesktopLocalizer';\nimport localizerAdapter from 'app/js/adapters/localizerAdapter';\n\nconst baseDesktopAdapters = {\n  registerAll: function () {\n    localizerAdapter.register(new DesktopLocalizer());\n  },\n};\n\nexport default baseDesktopAdapters;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport browser from 'app/js/utils/device/browser';\nimport getEnvironmentForMetrics from 'app/js/utils/metrics/getEnvironmentForMetrics';\n\nconst desktopDimensions = {\n  init() {\n    const appModel = resolve('appModel');\n\n    const windowSize = `${window.innerWidth}x${window.innerHeight}`;\n    const screenSize = `${window.screen.width}x${window.screen.height}`;\n\n    const dimensions = {\n      'X-Plex-Product': 'Plex Web',\n      'X-Plex-Version': __VERSION__,\n      'X-Plex-Client-Identifier': appModel.get('clientID'),\n      'X-Plex-Platform': browser.name,\n      'X-Plex-Platform-Version': browser.version,\n      'X-Plex-Features': 'external-media,indirect-media',\n      'X-Plex-Model': getEnvironmentForMetrics(),\n      'X-Plex-Device': browser.platform,\n      'X-Plex-Device-Name': browser.name,\n      'X-Plex-Device-Screen-Resolution': `${windowSize},${screenSize}`,\n    };\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'appModel_' is declared but its value is never rea... Remove this comment to see the full error message\n    appModel.on('change:clientID', (appModel_: any, clientID: any) => {\n      dimensions['X-Plex-Client-Identifier'] = clientID;\n    });\n\n    return $.Deferred().resolve(dimensions).promise();\n  },\n};\n\nexport default desktopDimensions;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction getEnvironmentForMetrics() {\n  if (__HOSTED__) {\n    return 'hosted';\n  } else if (__BUNDLED__) {\n    return 'bundled';\n  } else {\n    return 'standalone';\n  }\n}\n\nexport default getEnvironmentForMetrics;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractStorage from 'app/js/adapters/storage/AbstractStorage';\n\nconst PersistentWebStorage = AbstractStorage.extend({\n  //\n  // Properties\n\n  name: 'PersistentWebStorage',\n\n  //\n  // Control\n\n  getStorage() {\n    return window.localStorage;\n  },\n});\n\nexport default PersistentWebStorage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractStorage from 'app/js/adapters/storage/AbstractStorage';\n\nconst VolatileWebStorage = AbstractStorage.extend({\n  //\n  // Properties\n\n  name: 'VolatileWebStorage',\n\n  //\n  // Control\n\n  getStorage() {\n    return window.sessionStorage;\n  },\n});\n\nexport default VolatileWebStorage;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport baseDesktopAdapters from 'app/js/adapters/baseDesktopAdapters';\nimport desktopDimensions from 'app/js/adapters/desktopDimensions';\nimport dimensionsAdapter from 'app/js/adapters/dimensionsAdapter';\nimport PersistentWebStorage from 'app/js/adapters/storage/PersistentWebStorage';\nimport VolatileWebStorage from 'app/js/adapters/storage/VolatileWebStorage';\nimport storageAdapter from 'app/js/adapters/storageAdapter';\nimport volatileStorageAdapter from 'app/js/adapters/volatileStorageAdapter';\n\nconst desktopAdapters = {\n  registerAll() {\n    const promise = desktopDimensions.init();\n    promise.done((dimensions: any) => dimensionsAdapter.register(dimensions));\n\n    const persistentWebStorage = new PersistentWebStorage();\n\n    storageAdapter.register(persistentWebStorage);\n    volatileStorageAdapter.register(new VolatileWebStorage());\n\n    // The storage adapter needs to be registered before any base adapters.\n    baseDesktopAdapters.registerAll();\n\n    return $.when(promise);\n  },\n};\n\nexport default desktopAdapters;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n// Simple fire-and-forget queue for serializing $.ajax() activity.\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst AjaxQueue = BaseClass.extend({\n  mixins: [eventMixin],\n  //\n  // Properties\n  name: 'AjaxQueue',\n  queue: null,\n  request: null,\n  enabled: false,\n  destroyed: false,\n  //\n  // Init\n  initialize(options = {}) {\n    this.queue = [];\n    if ((options as any).enabled !== false) {\n      this.enable();\n    }\n  },\n  //\n  // Control\n  enable() {\n    if (this.enabled || this.destroyed) {\n      return;\n    }\n    this.enabled = true;\n    this.onEnabled();\n  },\n  disable() {\n    if (!this.enabled) {\n      return;\n    }\n    this.enabled = false;\n    this.request = null;\n    this.onDisabled();\n  },\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n    this.disable();\n    this.queue.length = 0;\n    this.destroyed = true;\n    this.onDestroyed();\n  },\n  send(params: any) {\n    if (params) {\n      this.queue.push(params);\n      this._next();\n    }\n  },\n  _next() {\n    if (!this._canNext()) {\n      return;\n    }\n    const params = this.queue.shift();\n    const ajaxOptions = params && this._getAjaxOptions(params);\n    if (ajaxOptions) {\n      const request = $.ajax(ajaxOptions);\n      request.always(this.onAjaxAlways.bind(this, request));\n      this.request = request;\n    }\n  },\n  _canNext() {\n    // Use `enabled` to guard against sending parameters when disabled. Use\n    // `request` to guard against more than one request in flight.\n    return this.enabled && !this.request;\n  },\n  // Subclasses are expected to implement this method to return the appropriate\n  // options object to pass to $.ajax(). By default assume the params provided\n  // to `send()` are fully viable.\n  _getAjaxOptions(params: any) {\n    return params;\n  },\n  //\n  // Listeners\n  onAjaxAlways(request: any) {\n    // Use `request` to guard against zombie requests.\n    if (this.enabled && request === this.request) {\n      this.request = null;\n      this._next();\n    }\n  },\n  onEnabled() {\n    this._next();\n  },\n  // Lifecycle event listeners subclasses are expected to implement.\n  onDisabled() {},\n  onDestroyed() {},\n});\nexport default AjaxQueue;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AjaxQueue from 'app/js/utils/AjaxQueue';\nimport { METRICS_DEVELOPMENT_URL } from 'app/js/utils/constants/commonUrls';\nimport assert from 'app/js/utils/log/assert';\nimport path from 'app/js/utils/url/path';\n\nexport default function createPlexMetricsReporter() {\n  const queue = new AjaxQueue();\n\n  // The production baseURL is returned by plex.tv's /api/v2/user/privacy\n  // resource. The same resource doesn't provide a development URL.\n  let baseUrl = __DEV__ ? METRICS_DEVELOPMENT_URL : null;\n\n  return {\n    setBaseUrl(url: any) {\n      baseUrl = url;\n    },\n\n    trackEvent(event: any) {\n      if (!baseUrl) {\n        assert(\n          false,\n          'Network metrics reporters requires a base URL to be set before tracking events'\n        );\n        return;\n      }\n\n      const url = path.join([baseUrl, 'collect/event']);\n      const data = JSON.stringify(event);\n\n      // The sendBeacon method is supported in all target environments but may\n      // be disabled by a user's privacy settings.\n      // See: https://github.com/plexinc/plex-web-client/pull/18550\n      if (window.navigator.sendBeacon) {\n        window.navigator.sendBeacon(url, data);\n      } else {\n        queue.send({\n          type: 'POST',\n          url,\n          // Use `text/plain` to avoid the OPTIONS preflight request. The metrics\n          // server forces parsing of content as JSON.\n          contentType: 'text/plain',\n          data,\n        });\n      }\n    },\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\n// Some common code references settings that are on different locations on the\n// appModel depending on platform.  This settingFinder allows us to use those\n// settings in common code.\n//\n// If a setting is added to this settingFinder, it must be added to\n// settingFinder on all other platforms.\n//\n// Once a setting lives in the same location for all platforms, it should be\n// removed from here.\nexport default function createSettingFinder(appModel: any) {\n  const findDeviceSettingsModel = () => appModel.get('deviceSettings');\n  const findUserExperienceSettingsModel = () =>\n    appModel.get('user').get('experienceSettings');\n\n  const settingModelFinders = {\n    autoPlay: findUserExperienceSettingsModel,\n    companion: findUserExperienceSettingsModel,\n    language: findUserExperienceSettingsModel,\n    shouldSyncSettings: findDeviceSettingsModel,\n    subtitleColor: findUserExperienceSettingsModel,\n    subtitlePosition: findUserExperienceSettingsModel,\n    subtitleSize: findUserExperienceSettingsModel,\n    volume: findDeviceSettingsModel,\n  };\n\n  return {\n    find(attr: any) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      return settingModelFinders[attr]().get(attr);\n    },\n    addCompanionChangeListener(listener: any) {\n      appModel.on(\n        'change:user.change:experienceSettings.change:companion',\n        listener\n      );\n    },\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst metricsInterface = [\n  'enable',\n  'disable',\n  'set',\n  'start',\n  'trackClick',\n  'trackEvent',\n  'trackView',\n  'incrementPlaybackCount',\n  'addPlaybackTime',\n  'toJSON',\n];\n\nexport default metricsInterface;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst metricsReporterInterface = ['setBaseUrl', 'trackEvent'];\n\nexport default metricsReporterInterface;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport config from 'app/js/models/config';\nimport * as metricsEvents from 'app/js/utils/constants/metrics/metricsEvents';\nimport * as preferInsecureConnectionsOptions from 'app/js/utils/constants/preferInsecureConnectionsOptions';\nimport * as connectionTestStates from 'app/js/utils/constants/server/connectionTestStates';\nimport capabilities from 'app/js/utils/device/capabilities';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport log from 'app/js/utils/log/log';\nimport whenEach from 'app/js/utils/promise/whenEach';\nimport augmentProviderCollection from 'app/js/utils/provider/augmentProviderCollection';\nimport isMediaProvidersRoot from 'app/js/utils/server/isMediaProvidersRoot';\n// See: https://github.com/plexinc/specs/blob/master/Metrics/Client.md#relay-connection-tested\nexport const NO_OTHER_CONNECTIONS_EXIST = 101;\nexport const OTHER_CONNECTIONS_UNAVAILABLE = 102;\nfunction isRequestUnauthorized(xhrStatus: any) {\n  // Plex Media Server may return 406 instead of 401 for certain requests.\n  // See: AuthenticationFilter.h doCheckReply\n  return xhrStatus === 401 || xhrStatus === 403 || xhrStatus === 406;\n}\nfunction rejectSecureConnectionTest(url: any, options: any) {\n  const { server } = options;\n  const debugName = server.get('debugName');\n  log.warn(\n    '[Connections] Aborting connection test for %s at %s because secure connections are disallowed',\n    debugName,\n    url\n  );\n  return immediatelyRejectConnectionTest(url, options);\n}\nfunction rejectSecureLocalConnectionTest(url: any, options: any) {\n  const { server } = options;\n  const debugName = server.get('debugName');\n  log.warn(\n    '[Connections] Aborting connection test for %s at %s because insecure connections are preferred',\n    debugName,\n    url\n  );\n  return immediatelyRejectConnectionTest(url, options);\n}\nfunction rejectMixedContentTest(url: any, options: any) {\n  const { server } = options;\n  const debugName = server.get('debugName');\n  log.warn(\n    '[Connections] Aborting connection test for %s at %s due to mixed content prevention',\n    debugName,\n    url\n  );\n  return immediatelyRejectConnectionTest(url, options);\n}\nfunction rejectDirectConnectionTest(url: any, options: any) {\n  const { server } = options;\n  const debugName = server.get('debugName');\n  log.warn(\n    '[Connections] Aborting connection test for %s at %s due to reject direct connection debug setting',\n    debugName,\n    url\n  );\n  return immediatelyRejectConnectionTest(url, options);\n}\n// @ts-expect-error ts-migrate(6133) FIXME: 'url' is declared but its value is never read.\nfunction immediatelyRejectConnectionTest(url: any, options: any) {\n  const { connection } = options;\n  const deferred = $.Deferred();\n  // Defer to always keep the command async.\n  _.defer(() => {\n    connection.set({\n      currentTest: null,\n      testState: connectionTestStates.UNAVAILABLE,\n    });\n    deferred.reject(connection);\n  });\n  return deferred.promise();\n}\nfunction makeXHRFail(xhrOptions: any) {\n  // Emulating lower-level behavior is more accurate than emulating it's effect\n  // on higher levels. Corrupting the URL is more accurate than overriding XHR\n  // promise and it provides better visibility in web dev tools.\n  xhrOptions.forEach((xhrOption: any) => {\n    xhrOption.url = 'fail' + xhrOption.url;\n  });\n}\nfunction sendConnectionTest(url: any, options: any) {\n  const { server, connection } = options;\n  const deferred = $.Deferred();\n  const debugName = server.get('debugName');\n  const responseType = getSupportedResponseType(server);\n  const timeStart = Date.now();\n  log('[Connections] Testing connection for %s at %s', debugName, url);\n  const xhrOptions = [];\n  const getXHROptions = {\n    dataType: 'text',\n    headers: { Accept: responseType.accept },\n    timeout: server.connectionTestTimeout,\n  };\n  xhrOptions.push(server.getXHROptions(url, getXHROptions));\n  // A loopback server will not have a shortVersion, so always fallback to legacy\n  // in that case. Otherwise check the server version to see if the server is\n  // supported.\n  const includeLegacyEndpoint = !isMediaProvidersRoot(server);\n  // A legacy connection is tested when the `/media/providers` endpoint does not\n  // contain the mirrored attributes from the server root. During this case we\n  // make a request to the old server root `/` to fetch the rest of the attributes.\n  // When `url` is supplied it means we are testing some specific path that is\n  // not part of the standard PMS connection testing. Ensure we don't spend a\n  // legacy test for that case. One such scenario for a `url` being supplied\n  // is the Cloud Server which tests https://plex.tv/monitoring/health since\n  // there are no attributes to populate.\n  if (options.url == null && includeLegacyEndpoint) {\n    const rootURL = server.resolveUrl('/', { connection });\n    log(\n      '[Connections] Testing legacy connection for %s at %s',\n      debugName,\n      rootURL\n    );\n    xhrOptions.push(server.getXHROptions(rootURL, getXHROptions));\n  }\n  // Emulate problems with HTTPS connectivity:\n  // - 'private' to emulate router DNS rebinding protection\n  // - 'all' to emulate broken HTTPS by any reason like broken cert in PMS\n  if (config.emulateBrokenHTTPS) {\n    const isApplicable = connection.get('isHttps') && !server.get('isCloud');\n    const isPrivateCriteriaMet =\n      config.emulateBrokenHTTPS !== 'private' || connection.get('isPrivate');\n    if (isApplicable && isPrivateCriteriaMet) {\n      makeXHRFail(xhrOptions);\n    }\n  }\n  const allXHRDeferred = xhrOptions.map((xhrOption) => $.ajax(xhrOption));\n  const whenDeferred = whenEach(allXHRDeferred);\n  connection.set({\n    currentTest: allXHRDeferred,\n    testState: connectionTestStates.PENDING,\n  });\n  function trackConnectionTest(attrs: any) {\n    if (!connection.get('relay')) {\n      return;\n    }\n    resolve('metrics').trackEvent({\n      ...attrs,\n      event: metricsEvents.CLIENT_RELAY_TESTED,\n      interaction: false,\n      reason:\n        connection.server.get('connections').length === 1\n          ? NO_OTHER_CONNECTIONS_EXIST\n          : OTHER_CONNECTIONS_UNAVAILABLE,\n      serverType: connection.server.get('isShared') ? 'shared' : 'owned',\n      latency: Date.now() - timeStart,\n    });\n  }\n  function resolveConnectionTest(attributes: any) {\n    log('[Connections] %s connected at %s', debugName, url);\n    connection.set({\n      currentTest: null,\n      testState: connectionTestStates.CONNECTED,\n    });\n    trackConnectionTest({\n      status: 'success',\n    });\n    deferred.resolve(connection, attributes);\n  }\n  function rejectConnectionTest(xhrs: any, xhrStatus: any) {\n    const attrs = {\n      currentTest: null,\n    };\n    const isAborting = xhrs.some((xhr: any) => xhr.aborting);\n    if (isAborting) {\n      log(\n        '[Connections] Aborted pending connection test for %s at %s',\n        debugName,\n        url\n      );\n      (attrs as any).testState = connectionTestStates.ABORTED;\n    } else {\n      const isUnauthorized = isRequestUnauthorized(xhrStatus);\n      const testState = isUnauthorized\n        ? connectionTestStates.UNAUTHORIZED\n        : connectionTestStates.UNAVAILABLE;\n      trackConnectionTest({\n        status: 'failure',\n        error: xhrStatus,\n      });\n      xhrs.forEach((xhr: any) => {\n        log.warn(\n          '[Connections] %s is %s at %s (Status %s)',\n          debugName,\n          testState,\n          url,\n          xhr.status\n        );\n      });\n      (attrs as any).testState = testState;\n    }\n    connection.set(attrs);\n    deferred.reject(connection, xhrs);\n  }\n  whenDeferred.done(() => {\n    const [providerXHR, rootXHR] = allXHRDeferred;\n    let xhrErrorStatus;\n    if (providerXHR.status !== 200 && providerXHR.status !== 404) {\n      xhrErrorStatus = providerXHR.status;\n    } else if (rootXHR && rootXHR.status !== 200) {\n      xhrErrorStatus = rootXHR.status;\n    }\n    if (xhrErrorStatus !== undefined) {\n      rejectConnectionTest(allXHRDeferred, xhrErrorStatus);\n      return;\n    }\n    // A plex.tv connection test does not fetch root xml.\n    if (server.get('isCloud')) {\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 0.\n      resolveConnectionTest();\n      return;\n    }\n    // $.when resolves with all the arguments of the sole promise. When there\n    // are multiple promises $.when resolves with each resolved promise as\n    // individual arguments, using an array only if there are multiple arguments\n    // in that resolved promise. Use the original XHR objects to avoid this\n    // unwanted behavior.\n    const providerResponse = responseType.parse(providerXHR.responseText);\n    const rootResponse = rootXHR\n      ? responseType.parse(rootXHR.responseText)\n      : undefined;\n    const response = server.parseResponse(\n      $.extend(true, {}, providerResponse, rootResponse)\n    );\n    const machineIdentifier = response.machineIdentifier;\n    // Transient servers add `transient-` to their machine identifier to\n    // distinguish themselves from normal servers. Use the original machine\n    // identifier for the sanity check.\n    const existingMachineIdentifier = server.get('isTransient')\n      ? server.get('originalMachineIdentifier')\n      : server.get('machineIdentifier');\n    // Sanity check the response to make sure it matches what we expect. If the\n    // server doesn't have an id yet, it's probably the bundled server, so let\n    // it through anyway.\n    if (\n      machineIdentifier &&\n      (!existingMachineIdentifier ||\n        machineIdentifier === existingMachineIdentifier)\n    ) {\n      // The unified media providers root request does not have the\n      // `mediaProviders` feature attribute, since it can be assumed. JSON has\n      // a boolean type but the model assumed a version integer, so convert the\n      // boolean to an integer for now. Eventually, this can be removed when all\n      // servers rely on the unified connection test.\n      if (response.mediaProviders === true) {\n        response.mediaProviders = 1;\n      } else if (response.mediaProviders === false) {\n        response.mediaProviders = 0;\n      } else if (!rootXHR) {\n        response.mediaProviders = 1;\n      }\n      const attributes = server.parse(response);\n      // Preserve the synthetic `transient-` machineIdentifier in case of a\n      // transient server.\n      if (server.get('isTransient')) {\n        attributes.machineIdentifier = server.get('machineIdentifier');\n      }\n      // When a server first connects after installing; consider the install\n      // complete\n      attributes.isInstallingServerUpdate = false;\n      attributes.isProvidersPending = false;\n      attributes.isProvidersPopulated = true;\n      augmentProviderCollection(attributes.providers, server);\n      resolveConnectionTest(attributes);\n    } else {\n      log.warn(\n        '[Connections] %s has an unexpected machine identifier at %s',\n        debugName,\n        url\n      );\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n      rejectConnectionTest(allXHRDeferred);\n    }\n  });\n  return deferred.promise();\n}\nexport default function testServerConnection(options: any) {\n  const { server, connection } = options;\n  const url = server.resolveUrl(options.url || '/media/providers', {\n    connection,\n  });\n  const appModel = resolve('appModel');\n  const settings = appModel.get('settings');\n  const deviceSettingsModel = appModel.get('deviceSettings');\n  // Before starting the connection test check if it should be\n  // rejected for the reasons list below.\n  // The app doesn't allow https connections to anything except plex.tv and the\n  // connection is https\n  if (\n    !config.allowHttpsMediaServerConnections &&\n    connection.get('isHttps') &&\n    !server.get('isCloud')\n  ) {\n    return rejectSecureConnectionTest(url, options);\n  }\n  // The user prefers insecure connections for local connections\n  // and a local connection is being tested\n  const preferInsecureConnections =\n    settings && settings.get('preferInsecureConnections');\n  // The server does not require secure connections and prefers insecure\n  // connections for all connections (except plex.tv).\n  if (\n    !server.get('httpsRequired') &&\n    !server.get('isCloud') &&\n    connection.get('isHttps') &&\n    preferInsecureConnections === preferInsecureConnectionsOptions.ALWAYS\n  ) {\n    return rejectSecureConnectionTest(url, options);\n  }\n  // The server does not require secure connections, prefers insecure\n  // connections for local connections and a local connection is being\n  // tested for a local server.\n  if (\n    !server.get('httpsRequired') &&\n    connection.get('isHttps') &&\n    preferInsecureConnections ===\n      preferInsecureConnectionsOptions.SAME_NETWORK &&\n    connection.get('isPrivate') &&\n    server.get('publicAddressMatches')\n  ) {\n    return rejectSecureLocalConnectionTest(url, options);\n  }\n  // The app is hosted over https, mixed content is not allowed and the\n  // connection is http.\n  if (\n    !config.allowMixedContent &&\n    capabilities.isHostedHttps &&\n    !connection.get('isHttps')\n  ) {\n    return rejectMixedContentTest(url, options);\n  }\n  // Not all platforms have deviceSettings, so need to check if they exist first\n  const rejectDirectConnectionsSetting =\n    deviceSettingsModel && deviceSettingsModel.get('rejectDirectConnections');\n  // The Debug setting `Reject Direct Connections` is enabled.\n  if (\n    !server.get('isCloud') &&\n    !connection.get('relay') &&\n    (rejectDirectConnectionsSetting || config.rejectDirectConnections)\n  ) {\n    return rejectDirectConnectionTest(url, options);\n  }\n  return sendConnectionTest(url, options);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport {\n  changeCompanionServer,\n  removeCompanionServer,\n} from 'app/js/stores/actions/appActions';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport log from 'app/js/utils/log/log';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n\nfunction isServerSupported(server: any) {\n  return !!(\n    server &&\n    !server.get('isCloud') &&\n    server.get('platform') !== 'iOS' &&\n    server.supports('companionProxy')\n  );\n}\n\nfunction isConnectionSupported(connection: any) {\n  return !!(\n    connection &&\n    connection.get('isPrivate') &&\n    connection.get('isConnected')\n  );\n}\n\nfunction isEligibleForCompanion(server: any) {\n  return !!(\n    isServerSupported(server) &&\n    isConnectionSupported(server.get('activeConnection'))\n  );\n}\n\nfunction isLocallyOwned(server: any) {\n  return !!(isEligibleForCompanion(server) && !server.get('isShared'));\n}\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst CompanionServerManager = BaseClass.extend({\n  mixins: [eventMixin],\n\n  //\n  // Properties\n\n  name: 'CompanionServerManager',\n\n  //\n  // Init\n\n  initialize(options: any) {\n    this.appModel = options.appModel;\n    this.servers = this.appModel.get('servers');\n\n    this._throttlePickCompanionServer = _.throttle(\n      this._pickCompanionServer,\n      2000\n    );\n  },\n\n  //\n  // Control\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  start(options: any) {\n    this.stop();\n\n    this.listenTo(\n      this.servers,\n      'change:connected change:activeConnection update',\n      this._throttlePickCompanionServer\n    );\n    this.started = true;\n\n    this._pickCompanionServer();\n  },\n\n  stop() {\n    this.stopListening();\n    this.started = false;\n  },\n\n  _pickCompanionServer() {\n    if (!this.started) {\n      return;\n    }\n\n    // We prefer not to switch companion servers if the current one is good enough\n    if (\n      this.companionServer &&\n      isEligibleForCompanion(this.companionServer) &&\n      this.servers.contains(this.companionServer)\n    ) {\n      return;\n    }\n\n    // Try and find a local AND owned server and, if nothing is found, fallback\n    // to local and shared.\n    this.companionServer =\n      this.servers.find(isLocallyOwned) ||\n      this.servers.find(isEligibleForCompanion);\n\n    if (this.companionServer) {\n      resolve('appStore').dispatch(\n        changeCompanionServer({\n          serverEntityID: this.companionServer.entityID(),\n        })\n      );\n\n      log.info(\n        '[Companion] Found companion',\n        this.companionServer.get('debugName')\n      );\n    } else {\n      resolve('appStore').dispatch(removeCompanionServer());\n      log.warn('[Companion] No companion found');\n    }\n  },\n});\n\nexport default CompanionServerManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport ServerModel from 'app/js/models/server/ServerModel';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport log from 'app/js/utils/log/log';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst ServerConnectionManager = BaseClass.extend({\n  mixins: [eventMixin],\n\n  //\n  // Properties\n\n  browserConnectionChangeDelay: 2000, // 2 seconds\n\n  //\n  // Init\n\n  initialize(options: any) {\n    _.bindAll(this, 'onBrowserConnectionChange');\n\n    this.appModel = options.appModel;\n    this.servers = this.appModel.get('servers');\n    this.settings = this.appModel.get('settings');\n  },\n\n  //\n  // Control\n\n  start() {\n    this.stop();\n\n    const $window = $(window);\n    $window.on('online', this.onBrowserConnectionChange);\n    $window.on('offline', this.onBrowserConnectionChange);\n\n    this.listenTo(dispatcher, {\n      'test:servers': this.onTestAllServers,\n      'test:server': this.onTestServer,\n    });\n\n    this.listenTo(this.servers, {\n      add: this.onServerAdd,\n      remove: this.onServerRemove,\n      reset: this.onServersReset,\n      'error:connection': this.onServerConnectionError,\n      'change:connections.add': this.onServerConnectionAdd,\n      'change:connections.remove': this.onServerConnectionRemove,\n      'change:connections.reset': this.onServerConnectionsReset,\n      'change:connections.change:isConnected':\n        this.onServerConnectionConnectedChange,\n      'change:connections.change:sources.change':\n        this.onServerConnectionSourcesChange,\n      'change:accessToken': this.onServerAccessTokenChange,\n      'change:isConnected': this.onServerConnectedChange,\n      'change:isUnavailable': this.onServerUnavailableChange,\n      'change:publicAddressMatches': this.onServerPublicAddressMatchesChange,\n    });\n\n    this.listenTo(this.settings, 'sync', this.onSettingsSave);\n\n    this.servers.invoke('testOnlyUntestedConnections');\n  },\n\n  stop() {\n    this.stopListening();\n\n    const $window = $(window);\n    $window.off('online', this.onBrowserConnectionChange);\n    $window.off('offline', this.onBrowserConnectionChange);\n  },\n\n  retryServerConnections: function (server: any) {\n    server.testAllConnections();\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'server' is declared but its value is never read.\n  startFailedServerRetries(server: any) {},\n  // @ts-expect-error ts-migrate(6133) FIXME: 'server' is declared but its value is never read.\n  stopFailedServerRetries(server: any) {},\n\n  _removeConnection(connection: any) {\n    const { server } = connection;\n    const storedServers = userStorageModel.getActiveServers();\n\n    log(\n      '[Connections] Removed connection %s from %s',\n      connection.id,\n      server.get('debugName')\n    );\n\n    server.abortConnectionTest(connection);\n\n    if (storedServers) {\n      const storedServer = storedServers.get(server.id);\n      const storedConnections = storedServer && storedServer.get('connections');\n\n      if (storedConnections && storedConnections.get(connection.id)) {\n        storedConnections.remove(connection.id);\n\n        if (!storedConnections.length) {\n          storedServers.remove(server.id);\n        }\n\n        userStorageModel.debouncedSave();\n      }\n    }\n  },\n\n  //\n  // Listeners\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n  onBrowserConnectionChange(event: any) {\n    log(\n      '[Connections] Browser online status changed to',\n      window.navigator.onLine\n    );\n\n    // We can run into requests failing prematurely if we kick off connection\n    // tests too early. This also helps protect against rapid connection\n    // changes.\n\n    window.clearTimeout(this.browserConnectionChangeTimeout);\n\n    this.browserConnectionChangeTimeout = window.setTimeout(() => {\n      this.servers.invoke('testAllConnections');\n    }, this.browserConnectionChangeDelay);\n  },\n\n  onTestAllServers() {\n    this.servers.invoke('testAllConnections');\n  },\n\n  onTestServer(server: any) {\n    server.testAllConnections();\n  },\n\n  onServerAdd(server: any) {\n    server.testOnlyUntestedConnections();\n  },\n\n  onServerRemove(server: any) {\n    const storedServers = userStorageModel.getActiveServers();\n    let storedServer;\n\n    server.abortAllConnectionTests();\n    this.stopFailedServerRetries(server);\n\n    if (storedServers) {\n      if (server.get('isMerged')) {\n        // If the server still exists in the collection, it was merged with\n        // another server. We should update the stored server to reflect the\n        // changed `machineIdentifier`.\n\n        const previousServerID = server.previous('machineIdentifier');\n\n        if (previousServerID) {\n          storedServer = storedServers.get(previousServerID);\n\n          if (storedServer) {\n            storedServer.set('machineIdentifier', server.id);\n            userStorageModel.debouncedSave();\n          }\n        }\n      } else {\n        // Otherwise, the server was actually removed and we should remove it\n        // from storage as well.\n\n        storedServer = storedServers.get(server.id);\n\n        if (storedServer) {\n          storedServers.remove(server.id);\n          userStorageModel.debouncedSave();\n        }\n      }\n    }\n  },\n\n  onServersReset(servers: any, options: any) {\n    const previousServers = options.previousModels;\n\n    _.each(previousServers, (server) => {\n      if (!servers.contains(server)) {\n        server.abortAllConnectionTests();\n        this.stopFailedServerRetries(server);\n      }\n    });\n  },\n\n  onServerConnectionError(server: any) {\n    log.warn(\n      '[Connections] Possible connection error for %s, retrying connection tests',\n      server.get('debugName')\n    );\n\n    // Test all connections again in the case of an error or closed socket. If\n    // the server has multiple connected connections, just checking the active\n    // connection won't suffice.\n\n    if (server.get('isCloud')) {\n      // If the cloud server responds with an error, check if the user can still\n      // sign in with the stored token.\n      const user = this.appModel.get('user');\n      user.signInUnsupervised();\n    } else {\n      server.testAllConnections();\n    }\n  },\n\n  onServerConnectionAdd(connection: any) {\n    const { server } = connection;\n\n    log(\n      '[Connections] Added connection %s for %s',\n      connection.id,\n      server.get('debugName')\n    );\n\n    if (connection.get('relay')) {\n      // If a relay connection is discovered, only test it if every direct\n      // connection test has already failed. Test all connections in case the\n      // server was temporarily offline and a resources request discovered a\n      // different relay connection. We do not want the relay connection test\n      // to succeed ahead of a scheduled retry of the direct connections.\n\n      if (server.get('connections').hasFailedEveryDirectConnection()) {\n        server.testAllConnections();\n      }\n    } else {\n      server.testConnection(connection);\n    }\n  },\n\n  onServerConnectionRemove(connection: any) {\n    this._removeConnection(connection);\n  },\n\n  onServerConnectionsReset(connections: any, options: any) {\n    const previousConnections = options.previousModels;\n\n    _.each(previousConnections, (connection) => {\n      if (!connections.contains(connection)) {\n        this._removeConnection(connection);\n      }\n    });\n  },\n\n  onServerConnectionConnectedChange(connection: any, isConnected: any) {\n    // Storing a bundled connection would be repetitive since the app creates\n    // bundled servers during initialization. Relayed connections can expire and\n    // should be returned by plex.tv if they are still valid.\n\n    const { server } = connection;\n    const isBundled = connection.get('isBundled');\n    const isFallback = connection.get('isFallback');\n    const isRelay = connection.get('relay');\n    const isEligibleConnection =\n      isConnected && !isBundled && !isFallback && !isRelay;\n    const storedServers = userStorageModel.getActiveServers();\n\n    if (\n      server.id &&\n      !server.get('isCloud') &&\n      isEligibleConnection &&\n      storedServers\n    ) {\n      let storedServer = storedServers.get(server.id);\n\n      if (storedServer) {\n        storedServer.copyFromModel(server);\n      } else {\n        const serverAttrs = _.omit(server.toJSON(), 'connections');\n        storedServer = storedServers.add(serverAttrs, {\n          merge: true,\n          parse: true,\n        });\n      }\n\n      storedServer\n        .get('connections')\n        .add(connection.toJSON(), { merge: true, parse: true });\n      userStorageModel.debouncedSave();\n    }\n  },\n\n  onServerConnectionSourcesChange(connection: any, sources: any) {\n    // If a source or added to or removed from a connection that is already in\n    // storage, update storage to reflect reality.\n\n    const { server } = connection;\n    const storedServers = userStorageModel.getActiveServers();\n    const storedServer = storedServers && storedServers.get(server.id);\n\n    if (storedServer) {\n      const storedConnections = storedServer.get('connections');\n      const storedConnection = storedConnections.get(connection.id);\n\n      if (storedConnection) {\n        const storedSources = storedConnection.get('sources');\n\n        storedSources.set(sources.toJSON());\n        userStorageModel.debouncedSave();\n      }\n    }\n  },\n\n  onServerAccessTokenChange(server: any, accessToken: any) {\n    // If a server gets an access token somehow, a previously failed connection\n    // may now be valid, so test all connections again. The cloud server gets an\n    // access token from the user, so a token change is expected with it.\n\n    if (!server.get('isCloud')) {\n      log(\n        '[Connections] Access token for %s changed to %s',\n        server.get('debugName'),\n        accessToken\n      );\n\n      const storedServers = userStorageModel.getActiveServers();\n      const storedServer = storedServers && storedServers.get(server.id);\n\n      if (storedServer) {\n        storedServer.set('accessToken', accessToken);\n        userStorageModel.debouncedSave();\n      }\n\n      // Assume that the access token will allow a previously unauthorized\n      // server to successfully connect. Otherwise, looking for a primary server\n      // would skip this server since it would be unauthorized until after a\n      // test succeeds, which may be too late.\n\n      if (server.get('isUnauthorized')) {\n        server.set(\n          'connectionTestResult',\n          ServerModel.connectionTestResults.PENDING\n        );\n      }\n\n      server.testAllConnections();\n    }\n  },\n\n  onServerConnectedChange(server: any, isConnected: any) {\n    if (isConnected) {\n      // Stop retrying connection tests for a failed server once it connects.\n      this.stopFailedServerRetries(server);\n    }\n  },\n\n  onServerUnavailableChange(server: any, isUnavailable: any) {\n    if (isUnavailable) {\n      // Start periodically retrying connection tests for this server.\n      this.startFailedServerRetries(server);\n    }\n  },\n\n  onServerPublicAddressMatchesChange(server: any, publicAddressMatches: any) {\n    if (publicAddressMatches !== undefined) {\n      server.testAllConnections();\n    }\n  },\n\n  onSettingsSave(model: any) {\n    // Retest all connections to all servers when `preferInsecureConnections`\n    // has changed in order to accept or reject secure connections based on\n    // it's new value.\n\n    if (model.changed.hasOwnProperty('preferInsecureConnections')) {\n      this.servers.invoke('testAllConnections');\n    }\n  },\n});\n\nexport default ServerConnectionManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport ServerConnectionManager from './ServerConnectionManager';\nimport ServerRetryManager from './ServerRetryManager';\n\nconst DesktopServerConnectionManager = ServerConnectionManager.extend({\n  //\n  // Init\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  initialize(options: any) {\n    // eslint-disable-next-line prefer-rest-params\n    ServerConnectionManager.prototype.initialize.apply(this, arguments);\n\n    this._serverRetryManager = new ServerRetryManager({\n      callback: this.retryServerConnections.bind(this),\n      logFormat: '[Connections] Retrying connection tests for %s in %s seconds',\n    });\n  },\n\n  //\n  // Control\n\n  stop() {\n    // eslint-disable-next-line prefer-rest-params\n    ServerConnectionManager.prototype.stop.apply(this, arguments);\n\n    this._serverRetryManager.stopAll();\n  },\n\n  startFailedServerRetries(server: any) {\n    this._serverRetryManager.start(server);\n  },\n\n  stopFailedServerRetries(server: any) {\n    this._serverRetryManager.stop(server);\n  },\n});\n\nexport default DesktopServerConnectionManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst propertyWhitelist = ['page', 'type', 'style', 'mode'];\n\nexport default function getPerformanceMeasureName(\n  eventName: any,\n  metricsProperties: any\n) {\n  let measureName = eventName;\n\n  for (let i = 0; i < propertyWhitelist.length; i++) {\n    const value = metricsProperties[propertyWhitelist[i]];\n    if (value != null) {\n      measureName = `${measureName}:${value}`;\n    }\n  }\n\n  return measureName;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport roundToNearest from 'app/js/utils/number/roundToNearest';\n\nexport default function roundMetricsDuration(durationMilliseconds: any) {\n  if (durationMilliseconds == null) {\n    return;\n  }\n\n  const durationSeconds = Math.round(durationMilliseconds / 1000);\n  let nearest;\n\n  if (durationSeconds >= 60 * 60) {\n    // Nearest 5 minutes over 1 hour\n    nearest = 5 * 60;\n  } else {\n    // Nearest 1 minute under 1 hour\n    nearest = 60;\n  }\n\n  return roundToNearest(durationSeconds, nearest);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function roundToNearest(value: any, n: any) {\n  let newValue = value / n;\n  newValue = Math.round(newValue);\n  newValue = newValue * n;\n\n  return newValue;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport log from 'app/js/utils/log/log';\n\nfunction updateSessionLastInteractionTime() {\n  const now = Date.now();\n  const sessionStats = resolve('sessionStats');\n\n  log.debug('[Metrics] Updating session last interaction time');\n  sessionStats.save('lastInteractionTime', now);\n}\n\nexport default updateSessionLastInteractionTime;\n","/* eslint-plugin-disable @typescript-eslint */\n\n// From: https://gist.github.com/jed/982883#gistcomment-55248\n\nconst template = '00000000-0000-4000-8000-000000000000';\nconst match = /0/g;\nconst replacer = () => (0 | (Math.random() * 16)).toString(16);\n\nfunction uuidV4() {\n  return template.replace(match, replacer);\n}\n\nexport default uuidV4;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport config from 'app/js/models/config';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport * as metricsEvents from 'app/js/utils/constants/metrics/metricsEvents';\nimport assert from 'app/js/utils/log/assert';\nimport log from 'app/js/utils/log/log';\nimport getPerformanceMeasureName from 'app/js/utils/metrics/getPerformanceMeasureName';\nimport performance from 'app/js/utils/metrics/performance';\nimport roundMetricsDuration from 'app/js/utils/metrics/roundMetricsDuration';\nimport updateSessionLastInteractionTime from 'app/js/utils/metrics/updateSessionLastInteractionTime';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport uuidV4 from 'app/js/utils/string/uuidV4';\nimport { toMetricsProperties } from 'app/js/v4/core/ui/metrics/components/MetricsContextProvider';\n\ndeclare global {\n  interface Window {\n    AF_SDK: {\n      PLUGINS?: {\n        PBA?: {\n          turnOnDevMode(): void;\n        };\n      };\n      utils?: {\n        cookie?: {\n          get(name: string): string | undefined;\n        };\n      };\n    };\n  }\n}\n\nconst OFF = 'off';\nconst ANONYMOUS = 'anonymous';\nexport const INTERACTION_SESSION_TIMEOUT = 1800000; // 30 minutes\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst MetricsManager = BaseClass.extend({\n  mixins: eventMixin,\n  //\n  // Initialize\n  initialize(options: any) {\n    this.privacySettings = null;\n    this.defaults = {};\n    this._pendingPrivacyRequest = null;\n    this._pendingEvents = [];\n    // See onUserIDChange for more info about this debounce\n    this.debouncedFetchPrivacySettings = _.debounce(\n      this.fetchPrivacySettings,\n      250\n    );\n    if (__HOSTED__ && __DEV__) {\n      window.AF_SDK?.PLUGINS?.PBA?.turnOnDevMode();\n    }\n    if (__DEV__) {\n      assert(\n        options.isPlaybackActive,\n        'An `isPlaybackActive` function must be provided to a metrics manager to aid in determining session idle state'\n      );\n    }\n    this.isPlaybackActive = options.isPlaybackActive;\n    this.enable();\n  },\n  //\n  // Control\n  enable() {\n    this.enabled = true;\n  },\n  disable() {\n    this.enabled = false;\n  },\n  set(options: any) {\n    this.defaults = {\n      ...this.defaults,\n      ...options,\n    };\n  },\n  setUser(user: any) {\n    this.set({ userId: user.id });\n    if (!this.defaults.context) {\n      this.defaults.context = {};\n    }\n    this.defaults.context.user = user.get('subscriptions').reduce(\n      (acc: any, subscription: any) => {\n        acc[subscription.get('type')] = subscription.get('mode');\n        return acc;\n      },\n      {\n        anonymous: user.get('anonymous'),\n      }\n    );\n  },\n  fetchPrivacySettings() {\n    // If we're re-fetching privacy settings, reset so events are not sent until\n    // we get a response.\n    this.privacySettings = null;\n    if (this._pendingPrivacyRequest) {\n      this._pendingPrivacyRequest.abort();\n      this._pendingPrivacyRequest = null;\n    }\n    const user = resolve('appModel').get('user');\n    if (!user.server.get('isConnected')) {\n      return $.Deferred().reject().promise();\n    }\n    const xhrOptions = user.server.getXHROptions('/api/v2/user/privacy', {\n      dataType: 'json',\n    });\n    this._pendingPrivacyRequest = $.ajax(xhrOptions);\n    return this._pendingPrivacyRequest\n      .promise()\n      .done((privacySettings: any) => {\n        this.setUser(user);\n        this.setPrivacySettings(privacySettings);\n        this.trackPendingEvents();\n        this.sendMMPEvent();\n      })\n      .always(() => {\n        this._pendingPrivacyRequest = null;\n      });\n  },\n  setPrivacySettings(rawPrivacySettings: any) {\n    if (!rawPrivacySettings || !rawPrivacySettings.metrics) {\n      return;\n    }\n    this.privacySettings = {\n      ...rawPrivacySettings,\n      metrics: rawPrivacySettings.metrics.reduce((acc: any, metric: any) => {\n        acc[metric.event] = metric.status;\n        return acc;\n      }, {}),\n    };\n    if (!__DEV__) {\n      const metricsReporter = resolve('metricsReporter');\n      metricsReporter.setBaseUrl(rawPrivacySettings.baseUrl);\n    }\n  },\n  sendMMPEvent() {\n    if (!__HOSTED__) {\n      return;\n    }\n\n    // Appsflyer SDK has no 'onready' event to bind to, so we have to rely on\n    // checking the object for initialization on an interval. Average\n    // initialization time on 3Mbps connection is about 50ms from the first\n    // time this function is called.\n\n    this._appsflyerIntervalID = window.setInterval(() => {\n      const afUserId = window.AF_SDK?.utils?.cookie?.get('afUserId');\n\n      if (afUserId) {\n        window.clearInterval(this._appsflyerIntervalID);\n\n        if (afUserId) {\n          resolve('metrics').trackEvent({\n            event: metricsEvents.CLIENT_MMP_START,\n            interaction: false,\n            properties: {\n              identifier: afUserId,\n            },\n          });\n        }\n      }\n    }, 50);\n\n    this._appsflyerTimeoutID = window.setTimeout(() => {\n      // Clear interval in case SDK fails or is blocked.\n      window.clearInterval(this._appsflyerIntervalID);\n    }, 1500);\n  },\n  incrementPlaybackCount() {\n    const key = 'playbackCount';\n    const sessionStats = resolve('sessionStats');\n    sessionStats.save(key, sessionStats.get(key) + 1);\n  },\n  addPlaybackTime(elapsedTime: any) {\n    const key = 'playbackTime';\n    const sessionStats = resolve('sessionStats');\n    sessionStats.save(key, sessionStats.get(key) + elapsedTime);\n  },\n  trackView(properties: any, options: any) {\n    const event = metricsEvents.CLIENT_VIEW;\n    const payload = {\n      event,\n      interaction: true,\n      properties,\n      ...options,\n    };\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n    const measure = performance.measure(\n      getPerformanceMeasureName(event, properties),\n      `${event}:${properties.page}-start`\n    );\n    if (measure) {\n      payload.properties = {\n        ...payload.properties,\n        latency: Math.round(measure.duration),\n      };\n    }\n    this.trackEvent(payload);\n  },\n  trackClick(properties: any, options: any) {\n    this.trackEvent({\n      event: metricsEvents.CLIENT_CLICK,\n      interaction: true,\n      properties,\n      ...options,\n    });\n  },\n  trackEvent(options: any) {\n    if (!this.enabled) {\n      return;\n    }\n    const contextTuple = options.properties?.contextTuple;\n    if (contextTuple) {\n      delete options.properties.contextTuple;\n      Object.assign(options.properties, toMetricsProperties(contextTuple));\n    }\n    const sessionStats = resolve('sessionStats');\n    const sessionIdentifier = sessionStats.get('sessionId');\n    const anonymousSessionIdentifier = sessionStats.get('anonymousSessionId');\n    // If privacy settings have not been fetched yet, hold on to these metrics\n    // events until they come back. We do not know which events should be\n    // tracked and which events should be anonymous without them.\n    if (!this.privacySettings) {\n      this._pendingEvents.push({\n        ...options,\n        sessionIdentifier,\n        anonymousSessionIdentifier,\n      });\n      return;\n    }\n    const event = $.extend(true, {}, this.defaults, options);\n    // If the client:shutdown event comes from the pending queue, we do not want\n    // to set the next session's identifier on the event, overriding the\n    // previous session's identifier.\n    if (!event.sessionIdentifier) {\n      event.sessionIdentifier = sessionIdentifier;\n    }\n    if (!event.anonymousSessionIdentifier) {\n      event.anonymousSessionIdentifier = anonymousSessionIdentifier;\n    }\n    const now = Date.now();\n    const isFlushEvent = !(\n      options.event === metricsEvents.CLIENT_SHUTDOWN ||\n      options.event === metricsEvents.CLIENT_START\n    );\n    // Session-start and stop events skip session-freshness checking\n    if (isFlushEvent) {\n      const lastInteractionTime = sessionStats.get('lastInteractionTime');\n      const lastPlayingHeartbeatTime = sessionStats.get(\n        'lastPlayingHeartbeatTime'\n      );\n      const recentSessionTime = Math.max(\n        lastInteractionTime,\n        lastPlayingHeartbeatTime\n      );\n      const durationSinceRecentSessionTime = now - recentSessionTime;\n      if (durationSinceRecentSessionTime > INTERACTION_SESSION_TIMEOUT) {\n        this.flushSession().then(() => {\n          this.trackEvent(options);\n        });\n        return;\n      }\n    }\n    const allEvents = this.privacySettings.metrics;\n    const status = allEvents[event.event];\n    if (status) {\n      if (status === OFF) {\n        __DEV__ &&\n          log('[Metrics] Ignoring opted out metrics event: ' + event.event);\n      } else {\n        if (event.interaction) {\n          updateSessionLastInteractionTime();\n        }\n        if (status === ANONYMOUS) {\n          delete event.userId;\n          event.deviceIdentifier = resolve('appModel').get('anonymousClientID');\n          event.sessionIdentifier = event.anonymousSessionIdentifier;\n        }\n        delete event.anonymousSessionIdentifier;\n        const metricsReporter = resolve('metricsReporter');\n        metricsReporter.trackEvent(event);\n      }\n    } else {\n      __DEV__ &&\n        log('[Metrics] Ignoring unknown metrics event: ' + event.event);\n    }\n  },\n  trackPendingEvents() {\n    const events = this._pendingEvents;\n    let i = 0;\n    while (i < events.length) {\n      this.trackEvent(events[i]);\n      i++;\n    }\n    this._pendingEvents = [];\n  },\n  start() {\n    const user = resolve('appModel').get('user');\n    this.flushSession()\n      // Wait for the cloud server to have an access token before fetching\n      // privacy settings.\n      .then(() => alwaysResolve(user.server.populate()))\n      // Fetch privacy settings regardless of whether the user successfully\n      // signed in or not. A signed out user will use the defaults.\n      .then(() => this.fetchPrivacySettings())\n      .always(() => {\n        this.listenTo(\n          user.server,\n          'change:isConnected',\n          this.onCloudServerChange\n        );\n        this.listenTo(user, 'change:id', this.onUserIDChange);\n      });\n    // Do not hold up app initialization while privacy settings are fetched.\n    return $.Deferred().resolve().promise();\n  },\n  flushSession() {\n    const sessionStats = resolve('sessionStats');\n    const promise = sessionStats.populate().then(\n      () => {\n        // Complete the session which is in storage.\n        this.stopSession();\n        this.startSession();\n      },\n      () => {\n        this.startSession();\n      }\n    );\n    return alwaysResolve(promise);\n  },\n  startSession() {\n    const startTime = Date.now();\n    const sessionStats = resolve('sessionStats');\n    if (!this.interval) {\n      const heartbeatInterval = config.heartbeatInterval;\n      if (__DEV__) {\n        assert(\n          heartbeatInterval < INTERACTION_SESSION_TIMEOUT,\n          'heartbeat interval should be less than interaction session timeout'\n        );\n      }\n      this.interval = window.setInterval(() => {\n        const now = Date.now();\n        const attrs = {\n          heartbeatTime: now,\n        };\n        if (this.isPlaybackActive()) {\n          (attrs as any).lastPlayingHeartbeatTime = now;\n        }\n        sessionStats.set(attrs);\n      }, heartbeatInterval);\n    }\n    sessionStats.save({\n      sessionId: uuidV4(),\n      anonymousSessionId: uuidV4(),\n      startTime,\n      lastInteractionTime: startTime,\n      heartbeatTime: startTime,\n      lastPlayingHeartbeatTime: null,\n      playbackCount: 0,\n      playbackTime: 0,\n    });\n    const event = metricsEvents.CLIENT_START;\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n    const measure = performance.endPeriod(event);\n    const payload = {\n      event,\n      interaction: true,\n      properties: { mode: 'uno' },\n    };\n    if (measure) {\n      (payload.properties as any).latency = Math.round(measure.duration);\n    }\n    this.trackEvent(payload);\n  },\n  stopSession() {\n    // Track previous session shutdown.\n    const sessionStats = resolve('sessionStats');\n    const heartbeatTime = sessionStats.get('heartbeatTime');\n    const playbackCount = sessionStats.get('playbackCount');\n    const playbackTime = sessionStats.get('playbackTime');\n    const startTime = sessionStats.get('startTime');\n    // The `heartbeatTime` interval and other background listeners are still\n    // active. They continue to update storage metrics information which spans\n    // sessions.\n    this.trackEvent({\n      event: metricsEvents.CLIENT_SHUTDOWN,\n      interaction: false,\n      properties: {\n        sessionLength: Math.floor((heartbeatTime - startTime) / 1000),\n        playbackCount,\n        playbackTime: roundMetricsDuration(playbackTime),\n      },\n    });\n  },\n  toJSON() {\n    return { ...this.defaults };\n  },\n  //\n  // Listeners\n  // @ts-expect-error ts-migrate(6133) FIXME: 'cloudServer' is declared but its value is never r... Remove this comment to see the full error message\n  onCloudServerChange(cloudServer: any, isConnected: any) {\n    if (isConnected) {\n      this.fetchPrivacySettings();\n    } else {\n      // If we're offline, reset privacy settings so we queue events in the\n      // `pendingEvents` array.\n      this.privacySettings = null;\n    }\n  },\n  onUserIDChange() {\n    if (this._appsflyerIntervalID) {\n      window.clearInterval(this._appsflyerIntervalID);\n    }\n    if (this._appsflyerTimeoutID) {\n      window.clearTimeout(this._appsflyerTimeoutID);\n    }\n\n    // Immediately clear privacy settings when the userID changes. This way\n    // metrics events for a new user get queued until privacy settings are\n    // fetched instead of sent immediately.\n    // See: https://github.com/plexinc/plex-web-client/issues/12671\n    this.privacySettings = null;\n    // When switching between Plex Home users, userID briefly becomes undefined,\n    // before becoming the guest user ID.\n    // When signing-out, userID becomes undefined indefinitely.\n    // Avoid a spurious signed-out privacy request by debouncing fetch briefly.\n    this.debouncedFetchPrivacySettings();\n  },\n});\nexport default MetricsManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport {\n  changePrimaryServer,\n  resetPrimaryServer,\n} from 'app/js/stores/actions/appActions';\nimport { confirmRelayConnection } from 'app/js/stores/actions/serverActions';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport * as metricsContexts from 'app/js/utils/constants/metrics/metricsContexts';\nimport log from 'app/js/utils/log/log';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst PrimaryServerManager = BaseClass.extend({\n  mixins: [eventMixin],\n\n  //\n  // Init\n\n  initialize(options: any) {\n    this.appModel = options.appModel;\n    this.servers = this.appModel.get('servers');\n  },\n\n  //\n  // Control\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  start(options: any) {\n    this.stop();\n\n    this.listenTo(this.appModel, {\n      'change:primaryServer': this.onPrimaryServerChange,\n      'change:primaryServer.change:isPrimaryEligible':\n        this.onPrimaryServerEligibleChange,\n      'change:primaryServer.change:isOutOfDate':\n        this.onPrimaryServerOutOfDateChange,\n      'change:isWaitingForServers': this.onWaitingForServersChange,\n      'change:primaryServer.change:isRelayed':\n        this.onPrimaryServerIsRelayedChange,\n    });\n\n    // It is important to use the `update` event instead of the `remove` event,\n    // since Backbone does not remove the model reference from the collection\n    // until after the `remove` event is triggered and the listener checks if\n    // the primary server's id still exists in the collection.\n\n    this.listenTo(this.servers, {\n      'update reset': this.onServersUpdate,\n    });\n\n    this._setPrimaryServer(metricsContexts.STARTUP);\n  },\n\n  stop() {\n    this.stopListening();\n    this._primaryServerPromise = null;\n  },\n\n  _setPrimaryServer(metricsContext: any) {\n    if (this._primaryServerPromise) {\n      return this._primaryServerPromise;\n    }\n\n    const appStore = resolve('appStore');\n\n    // Reset the primary server while we wait for a decision. If we\n    // previously had no servers or the primary server is removed, keeping the\n    // primary server stale can be dangerous.\n    appStore.dispatch(resetPrimaryServer());\n\n    const primaryServerPromise = this._waitForPrimaryServer();\n    this._primaryServerPromise = primaryServerPromise;\n\n    // If the manager is stopped before the promise resolves or rejects, ensure\n    // that the callback is a no-op.\n\n    primaryServerPromise\n      .done((server: any) => {\n        if (primaryServerPromise === this._primaryServerPromise) {\n          this._primaryServerPromise = null;\n\n          // Do not overwrite a primary server if something else set it while we\n          // were waiting for one.\n\n          if (this.appModel.get('primaryServer')) {\n            return;\n          }\n\n          const isWaitingForVersion =\n            !server.get('version') && !server.get('isRejected');\n\n          // A server may not have a version immediately, so an out of date\n          // server can slip through our checks. If the server is out of date or\n          // does not yet have a version and is not unavailable, try to set the\n          // primary server again.\n\n          if (\n            __MIN_SERVER_VERSION__ &&\n            (server.get('isOutOfDate') || isWaitingForVersion)\n          ) {\n            log(\n              '[Primary Server] The server, %s, is waiting for a version',\n              server.get('debugName')\n            );\n\n            this._setPrimaryServer(metricsContext);\n          } else {\n            appStore.dispatch(\n              changePrimaryServer({\n                machineIdentifier: server.id,\n                metricsProperties: { context: metricsContext },\n              })\n            );\n          }\n        }\n      })\n      .fail(() => {\n        if (primaryServerPromise === this._primaryServerPromise) {\n          this._primaryServerPromise = null;\n          this.appModel.set('isWaitingForPrimaryServer', false);\n        }\n      });\n\n    return primaryServerPromise;\n  },\n\n  _waitForPrimaryServer() {\n    // Prioritize the last primary server above all else. Then, try to find an\n    // owned server, followed by any full server, shared or owned.\n\n    const user = this.appModel.get('user');\n    const lastPrimaryServerID = user.get('lastPrimaryServerID');\n    let promise;\n\n    if (lastPrimaryServerID) {\n      log(\n        '[Primary Server] Waiting for the last primary server, %s, to connect',\n        lastPrimaryServerID\n      );\n\n      promise = this.servers.populateServer({\n        machineIdentifier: lastPrimaryServerID,\n        isPrimaryEligible: true,\n        isOutOfDate: false,\n      });\n    } else {\n      promise = $.Deferred().reject().promise();\n    }\n\n    promise = promise.then(null, () => {\n      log('[Primary Server] Waiting for any owned server to connect');\n\n      return this.servers.populateServer({\n        isFullOwnedServer: true,\n        isPrimaryEligible: true,\n        isOutOfDate: false,\n      });\n    });\n\n    promise = promise.then(null, () => {\n      log('[Primary Server] Waiting for any eligible server to connect');\n\n      return this.servers.populateServer({\n        isPrimaryEligible: true,\n        isOutOfDate: false,\n      });\n    });\n\n    promise = promise.then(null, () => {\n      log('[Primary Server] Waiting for any eligible server');\n\n      return this.servers.findServer({\n        isPrimaryEligible: true,\n        isOutOfDate: false,\n      });\n    });\n\n    return promise;\n  },\n\n  //\n  // Listeners\n\n  onPrimaryServerChange(appModel: any, primaryServer: any) {\n    // Immediately save the primary server change to server in case the app\n    // layout changes during the debounce wait time.\n    userStorageModel.flushDebouncedSave();\n\n    const previousPrimaryServer = appModel.previous('primaryServer');\n    if (previousPrimaryServer) {\n      this.stopListening(previousPrimaryServer);\n    }\n\n    if (primaryServer) {\n      log.info(\n        '[Primary Server] %s is now the primary server',\n        primaryServer.get('debugName')\n      );\n\n      const user = appModel.get('user');\n      user.set('lastPrimaryServerID', primaryServer.id);\n\n      if (primaryServer.get('isRelayed')) {\n        const appStore = resolve('appStore');\n        appStore.dispatch(\n          confirmRelayConnection({\n            machineIdentifier: primaryServer.id,\n            serverName: primaryServer.get('friendlyName'),\n          })\n        );\n      }\n    } else if (!appModel.get('isWaitingForPrimaryServer')) {\n      log.warn('[Primary Server] No primary server found');\n    } else {\n      log('[Primary Server] Waiting to set the primary server');\n    }\n  },\n\n  onPrimaryServerEligibleChange(primaryServer: any, isPrimaryEligible: any) {\n    const user = this.appModel.get('user');\n\n    if (!isPrimaryEligible) {\n      log(\n        '[Primary Server] The previous primary server, %s, is unauthorized',\n        primaryServer.get('debugName')\n      );\n\n      user.unset('lastPrimaryServerID');\n      this._setPrimaryServer(metricsContexts.FALLBACK);\n    }\n  },\n\n  onPrimaryServerOutOfDateChange(primaryServer: any, isOutOfDate: any) {\n    const user = this.appModel.get('user');\n\n    if (isOutOfDate) {\n      log(\n        '[Primary Server] The previous primary server, %s, is out of date',\n        primaryServer.get('debugName')\n      );\n\n      user.unset('lastPrimaryServerID');\n      this._setPrimaryServer(metricsContexts.FALLBACK);\n    }\n  },\n\n  onWaitingForServersChange(appModel: any, isWaitingForServers: any) {\n    // If the servers collection is reset, make sure we reset the primary server\n    // to null until a decision is made.\n\n    if (isWaitingForServers) {\n      const primaryServer = appModel.get('primaryServer');\n      const willPrimaryServerChange =\n        !primaryServer || !this.servers.get(primaryServer.id);\n      const isWaitingForPrimaryServer = appModel.get(\n        'isWaitingForPrimaryServer'\n      );\n\n      if (willPrimaryServerChange && !isWaitingForPrimaryServer) {\n        this._setPrimaryServer(metricsContexts.FALLBACK);\n      }\n    }\n  },\n\n  onPrimaryServerIsRelayedChange(primaryServer: any, isRelayed: any) {\n    if (isRelayed) {\n      const appStore = resolve('appStore');\n      appStore.dispatch(\n        confirmRelayConnection({\n          machineIdentifier: primaryServer.id,\n          serverName: primaryServer.get('friendlyName'),\n        })\n      );\n    }\n  },\n\n  onServersUpdate() {\n    const user = this.appModel.get('user');\n    const primaryServer = this.appModel.get('primaryServer');\n\n    if (primaryServer) {\n      // Check if the collection still has the primary server's id after a server\n      // is removed. This is more truthful than comparing the removed server since\n      // a server may be removed after it is merged with another server.\n\n      const isPrimaryServerRemoved =\n        primaryServer && !this.servers.get(primaryServer.id);\n\n      if (isPrimaryServerRemoved) {\n        log(\n          '[Primary Server] The previous primary server, %s, was removed',\n          primaryServer.get('debugName')\n        );\n\n        user.unset('lastPrimaryServerID');\n        this._setPrimaryServer(metricsContexts.FALLBACK);\n      }\n    } else {\n      // If there is no primary server yet, and a server has been added, try to\n      // set the primary server again.\n\n      this._setPrimaryServer(metricsContexts.STARTUP);\n    }\n  },\n});\n\nexport default PrimaryServerManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport { populateProvider } from 'app/js/stores/actions/provider/providerActions';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst ProviderManager = BaseClass.extend({\n  mixins: [eventMixin],\n\n  //\n  // Init\n\n  initialize(options: any) {\n    this.appModel = options.appModel;\n  },\n\n  //\n  // Control\n\n  start() {\n    const userModel = this.appModel.get('user');\n\n    this.populateCloudProviders(userModel.get('providers'));\n\n    this.listenTo(this.appModel, {\n      ['change:user.change:providers.add']: this.onProviderAdd,\n    });\n  },\n\n  stop() {\n    this.stopListening();\n  },\n\n  populateCloudProviders(providers: any) {\n    providers.each((providerModel: any) => {\n      this.populateCloudProvider(providerModel);\n    });\n  },\n\n  populateCloudProvider(providerModel: any) {\n    if (providerModel.get('isPopulated')) {\n      return;\n    }\n\n    resolve('appStore').dispatch(\n      populateProvider({\n        providerEntityID: providerModel.entityID(),\n        options: {\n          merge: true,\n        },\n      })\n    );\n  },\n\n  onProviderAdd(providerModel: any) {\n    this.populateCloudProvider(providerModel);\n  },\n});\n\nexport default ProviderManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport config from 'app/js/models/config';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport log from 'app/js/utils/log/log';\nimport xhrTracker from 'app/js/utils/xhr/xhrTracker';\n\nfunction getMatchingTestComparator(server: any, connection: any, url: any) {\n  return function matchingTest(existing: any) {\n    // Companion transient servers could share the same server ID but have different tokens,\n    // which means connection tests can't be reused and they need to be tested independently and,\n    // because of that we can't rely on comparing server IDs alone and need to actually compare instances\n    // to make sure the servers are actually the same.\n    return (\n      existing.server === server &&\n      existing.connection.id === connection.id &&\n      existing.url === url\n    );\n  };\n}\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst ServerConnectionTestManager = BaseClass.extend({\n  //\n  // Init\n\n  initialize(options: any) {\n    this.appModel = options.appModel;\n    this.queued = [];\n    this.executing = [];\n    this.maximumConcurrent = config.maximumConcurrentConnectionTests;\n    this.throttledStartProcessing = _.throttle(\n      this._startProcessing.bind(this),\n      50,\n      { leading: false }\n    );\n  },\n\n  //\n  // Control\n\n  queueConnectionTest({ server, connection, url }: any) {\n    const previous = this._queuedOrExecuting(server, connection, url);\n\n    if (previous) {\n      return previous.deferred.promise();\n    }\n\n    const deferred = $.Deferred();\n\n    this.queued.push({\n      server,\n      connection,\n      url,\n      deferred,\n    });\n\n    this._sortQueue();\n\n    // Throttle calls to startProcessing to avoid testing connections\n    // before we have a chance to sort them.\n    // `leading: false` prevents from calling startProcessing immediately.\n    this.throttledStartProcessing();\n\n    return deferred.promise();\n  },\n\n  abortConnectionTest({ server, connection, url }: any) {\n    this._abortCurrentTest(server, connection, url);\n    this._removeQueuedOrExecuting(server, connection, url);\n\n    return $.Deferred().resolve().promise();\n  },\n\n  reset() {\n    this.queued.length = 0;\n\n    while (this.executing.length > 0) {\n      this.abortConnectionTest(this.executing[0]);\n    }\n  },\n\n  _sortQueue() {\n    const lastPrimaryServerID = this.appModel\n      .get('user')\n      .get('lastPrimaryServerID');\n\n    this.queued.sort((a: any, b: any) => {\n      const serverA = a.server;\n      const serverB = b.server;\n      const connectionA = a.connection;\n      const connectionB = b.connection;\n\n      const manualConnectionA = this._isManualConnection(connectionA);\n      const manualConnectionB = this._isManualConnection(connectionB);\n      const matchingLocationA = this._isMatchingLocation(serverA, connectionA);\n      const matchingLocationB = this._isMatchingLocation(serverB, connectionB);\n\n      if (\n        serverA.id === lastPrimaryServerID &&\n        serverB.id !== lastPrimaryServerID\n      ) {\n        return -1;\n      }\n      if (\n        serverB.id === lastPrimaryServerID &&\n        serverA.id !== lastPrimaryServerID\n      ) {\n        return 1;\n      }\n\n      if (serverA.get('isCloud') && !serverB.get('isCloud')) {\n        return -1;\n      }\n      if (serverB.get('isCloud') && !serverA.get('isCloud')) {\n        return 1;\n      }\n\n      if (!connectionA.get('relay') && connectionB.get('relay')) {\n        return -1;\n      }\n      if (!connectionB.get('relay') && connectionA.get('relay')) {\n        return 1;\n      }\n\n      if (!connectionA.get('isConnected') && connectionB.get('isConnected')) {\n        return -1;\n      }\n      if (!connectionB.get('isConnected') && connectionA.get('isConnected')) {\n        return 1;\n      }\n\n      if (!serverA.get('isShared') && serverB.get('isShared')) {\n        return -1;\n      }\n      if (!serverB.get('isShared') && serverA.get('isShared')) {\n        return 1;\n      }\n\n      if (serverA.get('isFullServer') && !serverB.get('isFullServer')) {\n        return -1;\n      }\n      if (serverB.get('isFullServer') && !serverA.get('isFullServer')) {\n        return 1;\n      }\n\n      if (manualConnectionA && !manualConnectionB) {\n        return -1;\n      }\n      if (manualConnectionB && !manualConnectionA) {\n        return 1;\n      }\n\n      if (connectionA.get('isBundled') && !connectionB.get('isBundled')) {\n        return -1;\n      }\n      if (connectionB.get('isBundled') && !connectionA.get('isBundled')) {\n        return 1;\n      }\n\n      if (matchingLocationA && !matchingLocationB) {\n        return -1;\n      }\n      if (matchingLocationB && !matchingLocationA) {\n        return 1;\n      }\n\n      return 0;\n    });\n  },\n\n  _startProcessing() {\n    _.times(\n      this.maximumConcurrent - this.executing.length,\n      this._process.bind(this)\n    );\n  },\n\n  _process() {\n    if (this.executing.length >= this.maximumConcurrent) {\n      return;\n    }\n\n    if (!this.queued.length) {\n      return;\n    }\n\n    const connectionTest = this.queued.shift();\n    const { server, connection, url } = connectionTest;\n\n    // If there is a pending request still from a previous test, abort that\n    // request before we kick off a new one.\n    this._abortCurrentTest(server, connection, url);\n\n    const testServerConnection = resolve('testServerConnection');\n    const promise = testServerConnection({ server, connection, url });\n    this.executing.push(connectionTest);\n\n    promise.done((connection_: any, attributes: any) => {\n      connectionTest.deferred.resolve(connection_, attributes);\n    });\n\n    promise.fail((connection_: any, xhr: any) => {\n      connectionTest.deferred.reject(connection_, xhr);\n    });\n\n    promise.always(() => {\n      const index = this.executing.indexOf(connectionTest);\n\n      this.executing.splice(index, 1);\n      this._process();\n    });\n  },\n\n  _abortCurrentTest(server: any, connection: any, connectionTestUrl: any) {\n    if (!connection.get('currentTest')) {\n      return;\n    }\n\n    const currentTests = connection.get('currentTest');\n\n    currentTests.forEach((currentTest: any) => {\n      const url = server.resolveUrl(connectionTestUrl || currentTest.url, {\n        connection: connection,\n      });\n\n      if (currentTest && currentTest.state() === 'pending') {\n        log(\n          '[Connections] Aborting pending connection test for %s at %s',\n          server.get('debugName'),\n          url\n        );\n        xhrTracker.abort(currentTest.rid);\n        currentTest.abort();\n      }\n    });\n  },\n\n  _isManualConnection(connection: any) {\n    return connection.get('sources').some((source: any) => {\n      return source.id.indexOf('manualServer') === 0;\n    });\n  },\n\n  _isMatchingLocation(server: any, connection: any) {\n    const publicAddressMatches = server.get('publicAddressMatches');\n    const isPrivate = connection.get('isPrivate');\n\n    return (\n      (publicAddressMatches && isPrivate) ||\n      (!publicAddressMatches && !isPrivate)\n    );\n  },\n\n  _queuedOrExecuting(server: any, connection: any, url: any) {\n    const comparator = getMatchingTestComparator(server, connection, url);\n\n    return (\n      _.find(this.executing, comparator) || _.find(this.queued, comparator)\n    );\n  },\n\n  _removeQueuedOrExecuting(server: any, connection: any, url: any) {\n    const comparator = getMatchingTestComparator(server, connection, url);\n    const executingIndex = _.findIndex(this.executing, comparator);\n    const queuedIndex = _.findIndex(this.queued, comparator);\n\n    if (executingIndex >= 0) {\n      this.executing.splice(executingIndex, 1);\n    }\n\n    if (queuedIndex >= 0) {\n      this.queued.splice(queuedIndex, 1);\n    }\n  },\n});\n\nexport default ServerConnectionTestManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nexport default function updateServerConnectionsFromResource(\n  server: any,\n  resource: any\n) {\n  resource.get('connections').each((connection: any) => {\n    const sources = [{ id: resource.server.id }];\n    const connectionAttrs = _.extend(connection.toJSON(), {\n      sources: sources,\n    });\n\n    server.addConnection(connectionAttrs);\n  });\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport toStableServerObject from 'app/js/v4/core/servers/utils/toStableServerObject';\n\nexport default function toStableServerModelJSON(serverModel: any) {\n  const json = {\n    entityID: serverModel.entityID(),\n    ...serverModel.toJSON(),\n  };\n\n  return toStableServerObject(json);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport StoredServerModel from 'app/js/models/storage/StoredServerModel';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport { populateSettings } from 'app/js/stores/actions/serverActions';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport log from 'app/js/utils/log/log';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\nimport createServerFromResource from 'app/js/utils/server/createServerFromResource';\nimport toStableServerModelJSON from 'app/js/utils/server/toStableServerModelJSON';\nimport updateServerConnectionsFromResource from 'app/js/utils/server/updateServerConnectionsFromResource';\nimport { scheduleImmediateUpdate } from 'app/js/utils/state/stateUpdateScheduler';\nimport serverNowPlayingSessionsSlice from 'app/js/v4/core/serverNowPlayingSessions/serverNowPlayingSessionsSlice';\nimport serversSlice from 'app/js/v4/core/servers/serversSlice';\nimport navigateToRoute from 'app/js/v4/routes/navigateToRoute';\n\nconst storedServerAttrs = Object.keys(StoredServerModel.prototype.syncedAttrs);\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst ServerManager = BaseClass.extend({\n  mixins: [eventMixin],\n\n  //\n  // Init\n\n  initialize(options: any) {\n    this.appModel = options.appModel;\n    this.servers = this.appModel.get('servers');\n  },\n\n  //\n  // Control\n\n  start() {\n    this.stop();\n\n    this.listenTo(this.servers, {\n      'change:promiseState': this.onServerPromiseStateChange,\n      remove: this.onServerRemove,\n      'update reset': this.onServersUpdateReset,\n      'change:resources.add': this.onResourceAdd,\n      'change:resources.remove': this.onResourceRemove,\n      'change:resources.update': this.onResourcesUpdate,\n      'change:resources.reset': this.onResourcesReset,\n      'change:resources.change:presence': this.onResourcesPresenceChange,\n      'change:resources.change:connections.update':\n        this.onResourceConnectionsUpdate,\n      'change:isConnected': this.onConnectedChange,\n      [`change:${__PLATFORM__}.change:isSettingsPopulated`]:\n        this.onSettingsPopulatedChange,\n    });\n\n    storedServerAttrs.forEach((attrName) => {\n      this.listenTo(\n        this.servers,\n        'change:' + attrName,\n        this.onStoredServerAttributeChange.bind(this, attrName)\n      );\n    });\n\n    this.listenTo(dispatcher, 'discover:servers', this.onDiscoverServers);\n\n    this._setAuthorized();\n    this._checkFoundAllServers();\n  },\n\n  stop() {\n    this.stopListening();\n  },\n\n  _checkFoundAllServers() {\n    // The server collection's populate promise will be resolved or rejected at\n    // the bottom, or left pending if we are still waiting on servers.\n\n    if (this.servers.shouldWaitForInitialServers()) {\n      this._waitForServers();\n    } else if (this.servers.shouldWaitForResources()) {\n      this._waitForServers();\n    } else if (this.servers.shouldWaitForPendingServers()) {\n      this._waitForServers();\n    } else {\n      this._foundAllServers();\n    }\n  },\n\n  _waitForServers() {\n    this.servers.waitForServers();\n    scheduleImmediateUpdate(() => {\n      this.appModel.set('isWaitingForServers', true);\n    });\n  },\n\n  _foundAllServers() {\n    this.servers.foundAllServers();\n    scheduleImmediateUpdate(() => {\n      this.appModel.set('isWaitingForServers', false);\n    });\n  },\n\n  _fetchResources(cloudServer: any) {\n    if (cloudServer.get('isRejected')) {\n      log.warn(\n        '[Servers] Failed to request resources through %s',\n        cloudServer.get('debugName')\n      );\n\n      cloudServer.set({\n        isResourcesPending: false,\n        hasFailedResources: true,\n        isDownForMaintenance: false,\n      });\n      return $.Deferred().reject().promise();\n    }\n\n    if (!cloudServer.get('isResolved')) {\n      log(\n        '[Servers] Finding resources through unresolved cloud server %o, resolving',\n        cloudServer.get('debugName')\n      );\n      return cloudServer\n        .populate()\n        .then(() => this._fetchResources(cloudServer));\n    }\n\n    log('[Servers] Finding resources through %s', cloudServer.get('debugName'));\n\n    // We know the server collection should wait if we are fetching resources.\n    this._waitForServers();\n\n    cloudServer.set('isResourcesPending', true);\n\n    const resources = cloudServer.get('resources');\n    const promise = resources\n      .fetch()\n      .done(() => {\n        log(\n          '[Servers] Found %s resources through %s',\n          resources.length,\n          cloudServer.get('debugName')\n        );\n\n        cloudServer.set({\n          isResourcesPending: false,\n          isResourcesPopulated: true,\n          hasFailedResources: false,\n          isDownForMaintenance: false,\n        });\n      })\n      // @ts-expect-error ts-migrate(6133) FIXME: 'resources_' is declared but its value is never re... Remove this comment to see the full error message\n      .fail((resources_: any, xhr: any) => {\n        log.warn(\n          '[Servers] Failed to request resources through %s',\n          cloudServer.get('debugName')\n        );\n\n        cloudServer.set({\n          isResourcesPending: false,\n          hasFailedResources: true,\n          isDownForMaintenance: xhr.status === 503,\n        });\n      })\n      .always(() => {\n        this._checkFoundAllServers();\n      });\n\n    return promise;\n  },\n\n  _convertResourceToServer(resource: any) {\n    log(\n      '[Servers] %s was found through %s',\n      resource.get('name'),\n      resource.server.get('debugName')\n    );\n\n    return createServerFromResource(resource);\n  },\n\n  _removeResource(resource: any) {\n    log(\n      '[Servers] %s was removed as a resource from %s',\n      resource.get('name'),\n      resource.server.id\n    );\n\n    const server = this.servers.get(resource.id);\n    if (server) {\n      server.removeSource(resource.server.id);\n    }\n  },\n\n  _pruneStaleSources(cloudServer: any) {\n    // After all resources for a server are known, we should check that all\n    // connections with that cloud server's id as a source are cleaned up if\n    // they are no longer represented by a resource. Decrement through through\n    // the servers since servers may be removed as sources are removed.\n\n    const resources = cloudServer.get('resources');\n    let i = this.servers.length - 1;\n\n    while (i >= 0) {\n      const server = this.servers.at(i);\n      const resource = resources.get(server.id);\n\n      if (resource) {\n        // If the resource still exists, but no longer has a connection that was\n        // backed by the cloud server, remove the cloud server as a source for\n        // that connection.\n\n        const connections = server.get('connections');\n        let j = connections.length - 1;\n\n        while (j >= 0) {\n          const connection = connections.at(j);\n          const sources = connection.get('sources');\n\n          if (sources.get(cloudServer.id)) {\n            const resourceConnections = resource.get('connections');\n\n            if (!resourceConnections.get(connection.id)) {\n              connection.get('sources').remove(cloudServer.id);\n            }\n          }\n\n          j--;\n        }\n      } else {\n        // If the server doesn't even exist as a resource anymore, ensure that\n        // the cloud server is removed as a source for all connections.\n\n        server.removeSource(cloudServer.id);\n      }\n\n      i--;\n    }\n  },\n\n  _setAuthorized() {\n    // `isConnected` is more stable for media servers since the promise resets\n    // to pending at times during connection testing.\n\n    const hasConnectedMediaServer = !!this.servers.findWhere({\n      isConnected: true,\n      isCloud: false,\n    });\n    const hasResolvedCloudServer = !!this.servers.findWhere({\n      isResolved: true,\n      isCloud: true,\n    });\n\n    this.appModel.set(\n      'authorized',\n      hasConnectedMediaServer || hasResolvedCloudServer\n    );\n  },\n\n  //\n  // Listeners\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'promiseState' is declared but its value is never ... Remove this comment to see the full error message\n  onServerPromiseStateChange(server: any, promiseState: any) {\n    const resources = server.get('resources');\n    if (resources) {\n      this._fetchResources(server);\n    }\n\n    this._setAuthorized();\n    this._checkFoundAllServers();\n  },\n\n  onStoredServerAttributeChange(attrName: any, server: any, attrValue: any) {\n    const storedServers = userStorageModel.getActiveServers();\n    const storedServer = storedServers && storedServers.get(server.id);\n\n    if (\n      storedServer &&\n      attrValue != null &&\n      storedServer.get(attrName) !== attrValue\n    ) {\n      storedServer.set(attrName, attrValue);\n      userStorageModel.debouncedSave();\n    }\n  },\n\n  onServerRemove(server: any) {\n    log.warn('[Servers] %s was removed', server.get('debugName'));\n\n    server.cache.remove(server);\n    dispatcher.trigger('clearWhere:cache', { server: server });\n  },\n\n  onServersUpdateReset() {\n    this._setAuthorized();\n    this._checkFoundAllServers();\n  },\n\n  onDiscoverServers() {\n    const cloudServer = this.appModel.get('cloudServer');\n\n    this._fetchResources(cloudServer);\n  },\n\n  onResourceAdd(resource: any) {\n    if (_.contains(resource.get('provides'), 'server')) {\n      const server = this._convertResourceToServer(resource);\n      if (!server.get('isMobileServer')) {\n        this.servers.add(server);\n      }\n    }\n  },\n\n  onResourceRemove(resource: any) {\n    this._removeResource(resource);\n  },\n\n  onResourcesUpdate(resources: any) {\n    this._pruneStaleSources(resources.server);\n    this._checkFoundAllServers();\n  },\n\n  onResourcesReset(resources: any, options: any) {\n    const previousResources = options.previousModels;\n\n    _.each(previousResources, (resource) => {\n      if (!resources.contains(resource)) {\n        this._removeResource(resource);\n      }\n    });\n\n    this._checkFoundAllServers();\n  },\n\n  onResourcesPresenceChange(resource: any) {\n    const server = this.servers.get(resource.id);\n\n    if (server) {\n      server.set('presence', resource.get('presence'));\n    }\n  },\n\n  onResourceConnectionsUpdate(connections: any) {\n    const resource = connections.parent;\n    const server = this.servers.get(resource.id);\n\n    if (server) {\n      updateServerConnectionsFromResource(server, resource);\n      this._pruneStaleSources(connections.server);\n      this._checkFoundAllServers();\n    }\n  },\n\n  onConnectedChange(server: any, isConnected: any) {\n    if (!isConnected) {\n      return;\n    }\n\n    const appStore = resolve('appStore');\n    const stableServer = toStableServerModelJSON(server);\n\n    appStore.dispatch(serversSlice.actions.connected({ server: stableServer }));\n\n    if (server.get('isFullOwnedServer')) {\n      // Fetch Now Playing sessions so activity is updated immediately.\n      appStore.dispatch(\n        serverNowPlayingSessionsSlice.actions.fetchRequested({\n          server: stableServer,\n        })\n      );\n\n      // Populate settings in case this server needs to go through first run.\n      appStore.dispatch(\n        populateSettings({ serverEntityID: server.entityID() })\n      );\n    }\n  },\n\n  onSettingsPopulatedChange(serverFlex: any, isSettingsPopulated: any) {\n    if (isSettingsPopulated) {\n      const settings = serverFlex.get('settings');\n      const setting = settings.get('AcceptedEULA');\n      const isFirstRun = setting && setting.get('value') === false;\n\n      // Check if a different server already navigated to first run.\n      if (isFirstRun && !window.location.hash.includes('/setup')) {\n        navigateToRoute('serverSetup', {\n          machineIdentifier: settings.server.id,\n        });\n      }\n    }\n  },\n});\n\nexport default ServerManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as adapters from 'app/js/adapters/adapters';\nimport ServerModel from 'app/js/models/server/ServerModel';\nimport updateServerConnectionsFromResource from './updateServerConnectionsFromResource';\n\nexport default function createServerFromResource(\n  resource: any,\n  isAlwaysPMS = false\n) {\n  // Attempt to infer if a server is a full Plex Media Server or a mobile\n  // server. The `version` and `serverClass` attributes are used in the\n  // primary server decision and it is useful to have these set immediately.\n  const isPMS = isAlwaysPMS || resource.get('product') === 'Plex Media Server';\n\n  const server = new ServerModel(\n    {\n      machineIdentifier: resource.id,\n      friendlyName: resource.get('name'),\n      // The `productVersion` is not indicative of the server version for mobile\n      // media servers.\n      version: isPMS ? resource.get('productVersion') : undefined,\n      isShared: !resource.get('owned'),\n      accessToken: resource.get('accessToken'),\n      sourceTitle: resource.get('sourceTitle'),\n      publicAddressMatches: resource.get('publicAddressMatches'),\n      httpsRequired: resource.get('httpsRequired'),\n      platform: resource.get('platform'),\n      platformVersion: resource.get('platformVersion'),\n      presence: resource.get('presence'),\n      home: resource.get('home'),\n      serverClass: isPMS ? undefined : ServerModel.serverClasses.SECONDARY,\n      createdAt: resource.get('createdAt'),\n      lastSeenAt: resource.get('lastSeenAt'),\n      ownerId: resource.get('ownerId'),\n    },\n    { parent: adapters.resolve('appModel') }\n  );\n\n  updateServerConnectionsFromResource(server, resource);\n\n  return server;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as adapters from 'app/js/adapters/adapters';\nimport { fetchServerUpdateStatus } from 'app/js/stores/actions/serverUpdateActions';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\n\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst ServerUpdateManager = BaseClass.extend({\n  mixins: [eventMixin],\n\n  //\n  // Init\n\n  initialize(options: any) {\n    this.appModel = options.appModel;\n  },\n\n  //\n  // Control\n\n  start() {\n    this.stop();\n\n    this.listenTo(this.appModel.get('servers'), {\n      ['change:isConnected']: this.onServerIsConnectedChange,\n\n      // Once install completes we need to start checking for server updates, or\n      // else the state will remain in `downloaded` since that is the last\n      // message we receive. During install on Windows the server isConnected\n      // doesn't change so we must listen to isInstallingServerUpdate.\n      ['change:isInstallingServerUpdate']:\n        this.onIsInstallingServerUpdateChange,\n    });\n  },\n\n  stop() {\n    this.stopListening();\n  },\n\n  //\n  // Listeners\n\n  onServerIsConnectedChange(serverModel: any, isConnected: any) {\n    if (isConnected) {\n      adapters.resolve('appStore').dispatch(\n        fetchServerUpdateStatus({\n          serverEntityID: serverModel.entityID(),\n        })\n      );\n    }\n  },\n\n  onIsInstallingServerUpdateChange(\n    serverModel: any,\n    isInstallingServerUpdate: any\n  ) {\n    if (!isInstallingServerUpdate) {\n      adapters.resolve('appStore').dispatch(\n        fetchServerUpdateStatus({\n          serverEntityID: serverModel.entityID(),\n        })\n      );\n    }\n  },\n});\n\nexport default ServerUpdateManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport getSourceKey from 'app/js/utils/source/getSourceKey';\nimport t from 'app/js/utils/t';\nimport * as sourceTypes from 'app/js/utils/types/sourceTypes';\n\nexport default function getSource(options: any) {\n  const { sourceType, sourceServer, sourceProvider, sourceDirectory } = options;\n  const source = {\n    key: getSourceKey(\n      sourceType,\n      sourceServer.machineIdentifier,\n      sourceProvider.identifier,\n      sourceDirectory.id\n    ),\n    sourceType,\n    serverEntityID: sourceServer.entityID,\n    machineIdentifier: sourceServer.machineIdentifier,\n    providerEntityID: sourceProvider.entityID,\n    providerIdentifier: sourceProvider.identifier,\n    providerMetricsIdentifier: sourceProvider.metricsIdentifier,\n    directoryID: sourceDirectory.id,\n    directoryIcon: sourceDirectory.icon,\n    title: sourceDirectory.title,\n    serverFriendlyName: sourceServer.friendlyName,\n    serverSourceTitle: sourceServer.sourceTitle,\n    providerSourceTitle: sourceProvider.sourceTitle,\n    isLocal:\n      sourceServer.isConnected &&\n      sourceServer.activeConnection &&\n      sourceServer.activeConnection.isPrivate,\n    isUnavailable: sourceServer.isUnavailable,\n    isOutOfDate: sourceServer.isOutOfDate,\n    isUnclaimedServer:\n      sourceServer.isConnected &&\n      !sourceServer.isClaimed &&\n      !sourceServer.isCloud,\n    isFullOwnedServer: sourceServer.isFullOwnedServer,\n    isProviderReady:\n      sourceProvider.isPopulated ||\n      sourceProvider.error != null ||\n      sourceServer.isUnavailable ||\n      sourceServer.isUnauthorized,\n  };\n  if (sourceServer.isCloud) {\n    (source as any).isCloud = true;\n  } else if (sourceType === sourceTypes.DVR) {\n    // See: https://github.com/plexinc/plex-media-server/issues/9169\n    source.title = t('Live TV & DVR');\n  }\n  return source;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport {\n  pinSources,\n  saveExperienceSettings,\n} from 'app/js/stores/actions/userActions';\nimport BaseClass from 'app/js/utils/BaseClass';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport eventMixin from 'app/js/utils/mixins/eventMixin';\nimport getSource from 'app/js/utils/source/getSource';\nimport getSourceForStorage from 'app/js/utils/source/getSourceForStorage';\nimport getSourceKey from 'app/js/utils/source/getSourceKey';\nimport getSourceTypeForDirectory from 'app/js/utils/types/getSourceTypeForDirectory';\nimport createKey from 'app/js/views/v3/helpers/createKey';\nimport findProviderContentFeature from 'app/js/views/v3/helpers/provider/findProviderContentFeature';\nimport findProviderContentFeatureDirectory from 'app/js/views/v3/helpers/provider/findProviderContentFeatureDirectory';\nimport shallowEqual from 'app/js/views/v3/helpers/shallowEqual';\n\nconst SEVEN_DAYS = 604800;\nconst EXPERIENCE_SETTINGS_SAVE_TIMEOUT = 1000;\n// @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\nconst SourceManager = BaseClass.extend({\n  mixins: [eventMixin],\n  //\n  // Init\n  initialize(options: any) {\n    this.appModel = options.appModel;\n    this.debouncedSaveTimeout = null;\n  },\n  //\n  // Control\n  start() {\n    this.listenTo(this.appModel, {\n      ['change:user.change:providers.add']: this.onCloudProviderAdd,\n      ['change:user.change:providers.change:isPending']:\n        this.onCloudProviderIsPendingChange,\n      ['change:user.change:isProvidersPending']:\n        this.onCloudProvidersIsPendingChange,\n    });\n    this.listenTo(this.appModel.get('servers'), {\n      ['change:isConnected']: this.onServerIsConnectedChange,\n      ['change:isProvidersPending']: this.onServerIsProvidersPendingChange,\n      add: this.onServerAdd,\n      // Listen for changes to server attributes that result in changes to\n      // stored sources. See getSourceForStorage.\n      ['change:friendlyName']: this.onServerAttrChanged,\n      ['change:sourceTitle']: this.onServerAttrChanged,\n    });\n    this.listenTo(this.appModel.get('cloudServer'), {\n      ['change:isResourcesPending']: this.onCloudReadyChange,\n      ['change:hasFailedResources']: this.onCloudReadyChange,\n    });\n  },\n  _getPinnedSources() {\n    const userExperienceSettingsModel = this.appModel\n      .get('user')\n      .get('experienceSettings');\n    const sidebarSettings = userExperienceSettingsModel.get('sidebarSettings');\n    return sidebarSettings.get('pinnedSources');\n  },\n\n  _shouldRemoveHiddenSource(sourceModel: any) {\n    const hiddenAt = sourceModel.get('hiddenAt');\n    return hiddenAt > 0 && Date.now() - hiddenAt > SEVEN_DAYS;\n  },\n  _hidePinnedSources(pinnedSourcesToBeHidden: any) {\n    pinnedSourcesToBeHidden.forEach((pinnedSourceModel: any) => {\n      if (!pinnedSourceModel.get('isHidden')) {\n        pinnedSourceModel.set({\n          isHidden: true,\n          hiddenAt: Date.now(),\n        });\n\n        this._debouncedSaveExperienceSettings();\n      } else if (this._shouldRemoveHiddenSource(pinnedSourceModel)) {\n        pinnedSourceModel.trigger(\n          'destroy',\n          pinnedSourceModel,\n          pinnedSourceModel.collection\n        );\n        this._debouncedSaveExperienceSettings();\n      }\n    });\n  },\n  _hideSourcesWithNoServer() {\n    const servers = this.appModel.get('servers');\n    const pinnedSourcesToBeHidden = this._getPinnedSources().filter(\n      (pinnedSourceModel: any) => {\n        return !servers.get(pinnedSourceModel.get('machineIdentifier'));\n      }\n    );\n\n    this._hidePinnedSources(pinnedSourcesToBeHidden);\n  },\n  _hideSourcesWithNoProvider(\n    serverModel: any,\n    providersModel: any,\n    isProvidersPopulated: any,\n    providersError: any\n  ) {\n    // We should only hide sources when we know the server is connected and list\n    // of providers is populated.\n    //\n    // If the provider is no longer in the list of providers then we should hide\n    // this source.  Examples of this scenario include:\n    // - When a user re-creates their Live TV & DVR setup; in this case the\n    // original DVR provider is removed.\n    // - Unfortunately there is currently a bug in PMS where the Live TV & DVR\n    // provider isn't returned during startup of PMS\n    // (https://github.com/plexinc/plex-media-server/issues/10410)\n    // - An entire online media source is disabled for a user\n    if (\n      serverModel.get('isConnected') &&\n      isProvidersPopulated &&\n      !providersError\n    ) {\n      const serverMachineIdentifier = serverModel.get('machineIdentifier');\n      const pinnedSourcesToBeHidden = this._getPinnedSources().filter(\n        (pinnedSourceModel: any) => {\n          const machineIdentifier = pinnedSourceModel.get('machineIdentifier');\n          const providerIdentifier =\n            pinnedSourceModel.get('providerIdentifier');\n          return (\n            machineIdentifier === serverMachineIdentifier &&\n            !providersModel.get(providerIdentifier)\n          );\n        }\n      );\n\n      this._hidePinnedSources(pinnedSourcesToBeHidden);\n    }\n  },\n  _hideCloudSourcesWithNoProvider(userModel: any) {\n    const serverModel = this.appModel.get('cloudServer');\n    this._hideSourcesWithNoProvider(\n      serverModel,\n      userModel.get('providers'),\n      userModel.get('isProvidersPopulated'),\n      userModel.get('providersError')\n    );\n  },\n  _hideServerSourcesWithNoProvider(serverModel: any) {\n    this._hideSourcesWithNoProvider(\n      serverModel,\n      serverModel.get('providers'),\n      serverModel.get('isProvidersPopulated'),\n      serverModel.get('providersError')\n    );\n  },\n  _updateStoredPinnedSources(server: any, provider: any) {\n    const pinnedSourcesToBeHidden: any = [];\n    this._getPinnedSources().forEach((pinnedSourceModel: any) => {\n      const pinnedSource = getSourceForStorage(pinnedSourceModel.toJSON());\n      if (\n        pinnedSource.machineIdentifier !== server.machineIdentifier ||\n        pinnedSource.providerIdentifier !== provider.identifier\n      ) {\n        return;\n      }\n      const directory = findProviderContentFeatureDirectory(\n        provider,\n        pinnedSource.directoryID\n      );\n      if (!directory) {\n        // If the provider is populated and the origin of the source (eg: content\n        // directory) no longer exists then it should also be hidden.  Examples of\n        // this scenario include:\n        // - User deletes a library.\n        // - PMS no longer returns a playlists directory once all playlists are\n        // deleted\n        if (server.isConnected && provider.isPopulated) {\n          pinnedSourcesToBeHidden.push(pinnedSourceModel);\n        }\n        return;\n      }\n      const sourceTypeObject = getSourceTypeForDirectory(provider, directory);\n      const updatedPinnedSource = getSourceForStorage(\n        getSource({\n          sourceType: sourceTypeObject ? sourceTypeObject.key : null,\n          sourceServer: server,\n          sourceProvider: provider,\n          sourceDirectory: directory,\n        })\n      );\n      if (pinnedSourceModel.get('isHidden')) {\n        (updatedPinnedSource as any).isHidden = false;\n        (updatedPinnedSource as any).hiddenAt = null;\n      }\n      if (!shallowEqual(pinnedSource, updatedPinnedSource)) {\n        pinnedSourceModel.set(updatedPinnedSource);\n        this._debouncedSaveExperienceSettings();\n      }\n    });\n    this._hidePinnedSources(pinnedSourcesToBeHidden);\n  },\n\n  _autoPinSources(server: any, provider: any) {\n    const userExperienceSettingsModel = this.appModel\n      .get('user')\n      .get('experienceSettings');\n    const autoPinnedProviders = userExperienceSettingsModel.get(\n      'autoPinnedProviders'\n    );\n    const sidebarSettings = userExperienceSettingsModel.get('sidebarSettings');\n    const pinnedSources = sidebarSettings.get('pinnedSources');\n    const providerKey = createKey(\n      server.machineIdentifier,\n      provider.identifier\n    );\n    if (\n      !providerIdentifiers.matches(provider.identifier, [\n        providerIdentifiers.VOD,\n        providerIdentifiers.CLOUD_EPG,\n      ]) ||\n      autoPinnedProviders.includes(providerKey)\n    ) {\n      return;\n    }\n    userExperienceSettingsModel.set({\n      autoPinnedProviders: [...autoPinnedProviders, providerKey],\n    });\n    this._debouncedSaveExperienceSettings();\n    const contentFeature = findProviderContentFeature(provider);\n    if (\n      // User has chance to pin sources during FRE, so we should not be\n      // auto-pinning any sources from this provider if setup not completed.\n      !sidebarSettings.get('hasCompletedSetup') ||\n      !contentFeature ||\n      !contentFeature.directories\n    ) {\n      return;\n    }\n    const autoPinnedSources = contentFeature.directories.reduce(\n      (acc: any, directory: any) => {\n        const sourceTypeObject = getSourceTypeForDirectory(provider, directory);\n        const sourceKey = getSourceKey(\n          sourceTypeObject ? sourceTypeObject.key : null,\n          server.machineIdentifier,\n          provider.identifier,\n          directory.id\n        );\n        if (sourceTypeObject && !pinnedSources.get(sourceKey)) {\n          const source = getSource({\n            sourceType: sourceTypeObject ? sourceTypeObject.key : null,\n            sourceServer: server,\n            sourceProvider: provider,\n            sourceDirectory: directory,\n          });\n          acc.push(getSourceForStorage(source));\n        }\n        return acc;\n      },\n      []\n    );\n    if (autoPinnedSources.length > 0) {\n      resolve('appStore').dispatch(\n        pinSources({\n          sources: autoPinnedSources,\n          interaction: false,\n        })\n      );\n    }\n  },\n  _processSources(server: any, provider: any) {\n    if (!provider.isPopulated) {\n      return;\n    }\n    this._updateStoredPinnedSources(server, provider);\n    this._autoPinSources(server, provider);\n  },\n  _debouncedSaveExperienceSettings() {\n    // By making use of a timeout we reduce number of settings syncs to plex.tv.\n    // This is important during a language change where all cloud providers and\n    // servers are re-fetched resulting in a large number of updates.\n    const userExperienceSettingsModel = this.appModel\n      .get('user')\n      .get('experienceSettings');\n    userExperienceSettingsModel.set({ isDirty: true });\n    if (this.debouncedSaveTimeout) {\n      window.clearTimeout(this.debouncedSaveTimeout);\n    }\n    this.debouncedSaveTimeout = window.setTimeout(() => {\n      if (userExperienceSettingsModel.get('isDirty')) {\n        resolve('appStore').dispatch(saveExperienceSettings());\n      }\n    }, EXPERIENCE_SETTINGS_SAVE_TIMEOUT);\n  },\n  _processCloudProviderChange(providerModel: any) {\n    const server = this.appModel.get('cloudServer').toJSON();\n    const provider = providerModel.toJSON();\n    this._processSources(server, provider);\n  },\n  _processServerChange(serverModel: any) {\n    if (\n      !serverModel.get('isConnected') ||\n      !serverModel.get('isProvidersPopulated')\n    ) {\n      return;\n    }\n    const server = serverModel.toJSON();\n    server.providers.forEach((provider: any) =>\n      this._processSources(server, provider)\n    );\n  },\n  //\n  // Listeners\n  onCloudProviderAdd(providerModel: any) {\n    this._processCloudProviderChange(providerModel);\n  },\n  onCloudProviderIsPendingChange(providerModel: any, isPending: any) {\n    if (isPending) {\n      return;\n    }\n    this._processCloudProviderChange(providerModel);\n  },\n  onCloudProvidersIsPendingChange(userModel: any, isProvidersPending: any) {\n    if (isProvidersPending) {\n      return;\n    }\n    this._hideCloudSourcesWithNoProvider(userModel);\n  },\n  onServerAttrChanged(serverModel: any) {\n    this._processServerChange(serverModel);\n  },\n  onServerIsConnectedChange(serverModel: any, isConnected: any) {\n    if (isConnected) {\n      return;\n    }\n    this._processServerChange(serverModel);\n  },\n  onServerIsProvidersPendingChange(serverModel: any, isProvidersPending: any) {\n    if (isProvidersPending) {\n      return;\n    }\n    this._hideServerSourcesWithNoProvider(serverModel);\n    this._processServerChange(serverModel);\n  },\n  onServerAdd(serverModel: any) {\n    this._processServerChange(serverModel);\n  },\n  onCloudReadyChange(cloudServerModel: any) {\n    if (\n      !cloudServerModel.get('isResourcesPending') &&\n      !cloudServerModel.get('hasFailedResources')\n    ) {\n      // If there is no server, only hide the source when all resources have been\n      // fetched.  While resources are loading we do not want to assume the\n      // server does not exist.\n      this._hideSourcesWithNoServer();\n    }\n  },\n});\nexport default SourceManager;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport findProviderContentFeature from 'app/js/views/v3/helpers/provider/findProviderContentFeature';\n\nexport default function findProviderContentFeatureDirectory(\n  provider: any,\n  directoryID: any\n) {\n  const contentFeature = findProviderContentFeature(provider);\n\n  if (!contentFeature || !contentFeature.directories) {\n    return null;\n  }\n\n  return contentFeature.directories.find((directory: any) => {\n    return directory.id === directoryID;\n  });\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\n\nconst LogModel = Backbone.Model.extend({\n  //\n  // Init\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'attributes' is declared but its value is never re... Remove this comment to see the full error message\n  initialize: function (attributes: any, options: any) {\n    this.set('time', new Date());\n  },\n});\n\nexport default LogModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\nimport browser from 'app/js/utils/device/browser';\n\nconst DebugModel = Backbone.Model.extend({\n  //\n  // Init\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'attributes' is declared but its value is never re... Remove this comment to see the full error message\n  initialize: function (attributes: any, options: any) {\n    this.set('host', window.location.host);\n    this.set('userAgent', window.navigator.userAgent);\n    this.set('browser', browser);\n  },\n\n  //\n  // Control\n\n  toJSON: function () {\n    const appModel = this.parent;\n    const primary = appModel.get('primaryServer');\n    const user = appModel.get('user');\n\n    this.set('version', __VERSION__);\n\n    if (primary) {\n      if (primary.get('activeConnection')) {\n        this.set('primaryServerUrl', primary.url());\n      }\n\n      this.set('primaryServerAuthToken', !!primary.get('accessToken'));\n      this.set('primaryServerVersion', primary.get('versionFull'));\n    }\n\n    this.set('username', user.get('username'));\n    this.set('cloudUrl', user.server.get('connections'));\n\n    // eslint-disable-next-line prefer-rest-params\n    return Backbone.Model.prototype.toJSON.apply(this, arguments);\n  },\n});\n\n// Singleton\nexport default new DebugModel();\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve, waitFor } from 'app/js/adapters/adapters';\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\nimport LogModel from 'app/js/models/debug/LogModel';\nimport debugModel from 'app/js/models/debug/debugModel';\nimport dispatcher from 'app/js/utils/dispatcher';\n\nconst tokenRegEx =\n  /(\"?(auth_token|accessToken|X-Plex-Token|authToken|token)\"?[:=].*?)(\"?[-\\w]+\"?)/g;\nconst emailRegEx = /(\"?(email)\"?[:=]([\\s]+)?)(\"(.*)\")/g;\nconst ipRegEx = /(\"?(address|host|uri)\"?[:=].*?)(\".*\")/g;\nexport function scrubResponse(response: any) {\n  if (!response) {\n    return;\n  }\n  return response\n    .replace(tokenRegEx, '$1\"TOKEN\"')\n    .replace(emailRegEx, '$1\"EMAIL\"')\n    .replace(ipRegEx, '$1\"IP ADDRESS\"');\n}\nconst passwordRegEx = /(password=)([^&]+)/;\nfunction scrubUrl(url: any) {\n  return url\n    .replace(tokenRegEx, '$1TOKEN')\n    .replace(passwordRegEx, '$1PASSWORD');\n}\nfunction scrubHeaders(headers: any) {\n  if (headers && headers.hasOwnProperty('X-Plex-Token')) {\n    headers['X-Plex-Token'] = 'TOKEN';\n  }\n  if (headers && headers.hasOwnProperty('Authorization')) {\n    headers.Authorization = 'BASIC AUTHORIZATION';\n  }\n  return headers;\n}\nconst LogCollection = Backbone.Collection.extend({\n  //\n  // Properties\n  model: LogModel,\n  //\n  // Init\n  // @ts-expect-error ts-migrate(6133) FIXME: 'models' is declared but its value is never read.\n  initialize: function (models: any, options: any) {\n    _.bindAll(this, 'onAjaxComplete', 'onAppModelRegistered');\n    this.parent = options.parent;\n    debugModel.parent = options.parent;\n    waitFor('appModel').done(this.onAppModelRegistered);\n  },\n  //\n  // Control\n  reconfigure() {\n    const debugLevel = resolve('appModel')\n      .get('deviceSettings')\n      .get('debugLevel');\n    if (debugLevel) {\n      this.start();\n    } else {\n      this.stop();\n    }\n  },\n  start: function () {\n    if (this.enabled) {\n      return;\n    }\n    this.enabled = true;\n    this.reset();\n    this.listenTo(dispatcher, 'log:message', this.onLogMessage);\n    Backbone.history.on('route', this.onRoute, this);\n    $(document).on('ajaxComplete', this.onAjaxComplete);\n  },\n  stop: function () {\n    if (!this.enabled) {\n      return;\n    }\n    this.enabled = false;\n    this.reset();\n    this.stopListening(dispatcher);\n    Backbone.history.off('route', this.onRoute, this);\n    $(document).off('ajaxComplete', this.onAjaxComplete);\n  },\n  // LogCollection is used with the adapters system. Implement a destroy\n  // method that will clean up after itself when called.\n  destroy: function () {\n    this.stop();\n    this.stopListening();\n  },\n  add: function () {\n    // I'm somewhat paranoid about this sort of debug logging using\n    // up a ton of memory. So limit the number of entries to some\n    // arbitrary value, users should generally pull up the logs\n    // shortly after reproducing the problem.\n    if (this.length > 1000) {\n      this.shift();\n    }\n    // eslint-disable-next-line prefer-rest-params\n    Backbone.Collection.prototype.add.apply(this, arguments);\n  },\n  toJSON: function () {\n    // Always add some debug info to the beginning.\n    // eslint-disable-next-line prefer-rest-params\n    const models = Backbone.Collection.prototype.toJSON.apply(this, arguments);\n    models.unshift(_.extend({ type: 'info' }, debugModel.toJSON()));\n    return models;\n  },\n  toJSONString: function () {\n    // Output pretty JSON.\n    return JSON.stringify(this.toJSON(), null, 2);\n  },\n  //\n  // Listeners\n  onAppModelRegistered: function (appModel: any) {\n    const deviceSettings = appModel.get('deviceSettings');\n    this.listenTo(deviceSettings, 'change:debugLevel', this.reconfigure);\n    this.reconfigure();\n  },\n  onLogMessage: function (message: any) {\n    this.add(message);\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'router' is declared but its value is never read.\n  onRoute: function (router: any, name: any, args: any) {\n    const message = {\n      type: 'navigation',\n      route: name,\n      args: args,\n      fragment: window.location.hash,\n    };\n    this.add(message);\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'event' is declared but its value is never read.\n  onAjaxComplete: function (event: any, xhr: any, options: any) {\n    const debugLevel = resolve('appModel')\n      .get('deviceSettings')\n      .get('debugLevel');\n    const message = {\n      type: 'ajax',\n      url: scrubUrl(options.url),\n      status: xhr.status,\n    };\n    // We need to scrub the headers and response in case they contain\n    // tokens or other info that users would not want to share publicly.\n    if (!_.isEmpty(options.headers)) {\n      (message as any).headers = scrubHeaders(options.headers);\n    }\n    if (!_.isEmpty(options.data)) {\n      (message as any).params = scrubUrl(options.data);\n    }\n    if (xhr.status === 200) {\n      // Only include the response if the debug level is set to verbose.\n      if (debugLevel === 2) {\n        (message as any).response = scrubResponse(xhr.responseText);\n      } else {\n        (message as any).responseLength = xhr.responseText\n          ? xhr.responseText.length\n          : 0;\n      }\n    } else {\n      (message as any).statusText = xhr.statusText;\n      (message as any).response = scrubResponse(xhr.responseText);\n    }\n    this.add(message);\n  },\n});\nexport default LogCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const STOPPED = 'stopped';\nexport const PLAYING = 'playing';\nexport const PAUSED = 'paused';\nexport const BUFFERING = 'buffering';\nexport const ERROR = 'error';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport * as timelineStates from 'app/js/utils/constants/player/timelineStates';\n\nexport default function getTimelineState(playerModel: any) {\n  if (!playerModel.get('isOpen')) {\n    return timelineStates.STOPPED;\n  }\n\n  if (playerModel.get('hasError')) {\n    return timelineStates.ERROR;\n  }\n\n  if (playerModel.get('isPaused')) {\n    return timelineStates.PAUSED;\n  }\n\n  if (playerModel.get('isBuffering')) {\n    return timelineStates.BUFFERING;\n  }\n\n  return timelineStates.PLAYING;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport getTimelineState from 'app/js/stores/actions/helpers/player/getTimelineState';\nimport { PLAYING } from 'app/js/utils/constants/player/timelineStates';\n\nfunction isPlaybackActive() {\n  const appModel = resolve('appModel');\n\n  const uiModel = appModel.get('ui');\n  const audioVideoPlayer = uiModel.get('audioVideoPlayer');\n  const photoPlayer = uiModel.get('photoPlayer');\n  const romPlayer = uiModel.get('romPlayer');\n\n  const audioVideoPlayerState = getTimelineState(audioVideoPlayer);\n  const photoPlayerState = getTimelineState(photoPlayer);\n\n  return (\n    audioVideoPlayerState === PLAYING ||\n    photoPlayerState === PLAYING ||\n    (!!romPlayer && getTimelineState(romPlayer) === PLAYING)\n  );\n}\n\nexport default isPlaybackActive;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectDeviceSettings from 'app/js/stores/selectors/settings/selectDeviceSettings';\n\nconst selectDeviceSettingsVolume = createSelector(\n  selectDeviceSettings,\n  (deviceSettings) => {\n    return deviceSettings.volume;\n  }\n);\n\nexport default selectDeviceSettingsVolume;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectUserExperienceSettings from 'app/js/stores/selectors/user/selectUserExperienceSettings';\n\nconst selectRemoteQuality = createSelector(\n  selectUserExperienceSettings,\n  (experienceSettings) => experienceSettings.remoteQuality\n);\n\nexport default selectRemoteQuality;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectDeviceSettings from 'app/js/stores/selectors/settings/selectDeviceSettings';\n\nconst selectRestorePlayQueue = createSelector(\n  selectDeviceSettings,\n  (deviceSettings) => deviceSettings.restorePlayQueue\n);\n\nexport default selectRestorePlayQueue;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { createSelector } from 'reselect';\nimport selectUserExperienceSettings from 'app/js/stores/selectors/user/selectUserExperienceSettings';\n\nconst selectSubtitleSettings = createSelector(\n  selectUserExperienceSettings,\n  (experienceSettings) => {\n    return {\n      color: experienceSettings.subtitleColor,\n      position: experienceSettings.subtitlePosition,\n      size: experienceSettings.subtitleSize,\n    };\n  }\n);\n\nexport default selectSubtitleSettings;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport log from 'app/js/utils/log/log';\nimport xmlWriter from 'app/js/utils/xmlWriter';\n\n//\n// Helpers\n\nfunction createResponse(commandID: any, code: any, status: any) {\n  const body = xmlWriter.writeXml({\n    Response: {\n      _code: code,\n      _status: status,\n    },\n  });\n  return {\n    commandID,\n    body,\n    responseCode: code,\n  };\n}\n\nfunction noticeInputActivity() {\n  const appModel = resolve('appModel');\n  const inputActivity = appModel.get('inputActivity');\n  // The input activity model only exists on TV platforms.\n  if (inputActivity) {\n    inputActivity.notice();\n  }\n}\n\n// @ts-expect-error ts-migrate(6133) FIXME: 'query' is declared but its value is never read.\nfunction populateProviders(serverModel: any, query: any) {\n  const appModel = resolve('appModel');\n  const userModel = appModel.get('user');\n  const providers =\n    serverModel.get('isCloud') && !serverModel.get('isTransient')\n      ? userModel.get('providers')\n      : serverModel.get('providers');\n  serverModel.set({\n    isProvidersPending: true,\n    isProvidersPopulated: false,\n    providersError: null,\n  });\n  const promise = providers.populate();\n  return promise.then(\n    () => {\n      serverModel.set({\n        isProvidersPending: false,\n        isProvidersPopulated: true,\n      });\n      return promise;\n    },\n    () => {\n      serverModel.set({\n        isProvidersPending: false,\n        providersError: {},\n      });\n      return promise;\n    }\n  );\n}\n\nexport default function handleLocalCompanionCommand(command: any) {\n  const { path, query, commandID, supportsTimeline } = command;\n  const deferred = $.Deferred();\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  const handler = handlers[path];\n  noticeInputActivity();\n  if (supportsTimeline !== false) {\n    // If the app is reloaded we might not get a new subscribe command. This\n    // considers a companion signal as a sign that there is a controller out\n    // there listening.\n    resolve('localCompanionTimelineManager').start();\n  }\n  if (handler) {\n    const promise = handler(query) || $.Deferred().resolve().promise();\n    promise\n      .done(() => {\n        log(`[Companion] Successfully processed command from path \"${path}\"`);\n        const controllerResponse = createResponse(commandID, 200, 'OK');\n        deferred.resolve({ controllerResponse });\n      })\n      .fail(() => {\n        log.warn(`[Companion] Failed to process command from path \"${path}\"`);\n        const controllerResponse = createResponse(\n          commandID,\n          400,\n          'Bad Request'\n        );\n        deferred.resolve({ controllerResponse });\n      });\n  } else {\n    log.warn(\n      `[Companion] Unable to handle command from unknown path \"${path}\"`\n    );\n    const controllerResponse = createResponse(commandID, 400, 'Bad Request');\n    deferred.resolve({ controllerResponse });\n  }\n  return deferred.promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport * as serverUpdateStates from 'app/js/utils/constants/serverUpdateStates';\n\nconst ServerUpdateModel = AbstractModel.extend({\n  //\n  // Properties\n\n  context: ['server'],\n  url: '/updater/status',\n\n  sessionAttrs: {\n    isChecking: attrTypes.boolean.isRequired,\n  },\n\n  syncedAttrs: {\n    status: attrTypes.integer,\n    canInstall: attrTypes.boolean,\n    downloadURL: attrTypes.string,\n\n    // Release\n    state: attrTypes.string,\n    progress: attrTypes.integer,\n    version: attrTypes.string,\n    error: attrTypes.string,\n    added: attrTypes.string,\n    fixed: attrTypes.string,\n  },\n\n  defaults: {\n    // Only defaults for Release are needed to reset missing attributes.\n    state: serverUpdateStates.NONE,\n    status: 0,\n    progress: 0,\n    version: null,\n    error: '',\n    added: null,\n    fixed: null,\n    isChecking: false,\n  },\n\n  //\n  // Control\n\n  augmentResponse(response: any) {\n    const { Release, ...otherAttrs } = response;\n\n    if (Release) {\n      response = { ...otherAttrs, ...Release };\n    }\n\n    if (response.status !== '0') {\n      response.state = serverUpdateStates.ERROR;\n    }\n\n    return response;\n  },\n});\n\nexport default ServerUpdateModel;\n","import _ from 'underscore';\nimport path from 'app/js/utils/url/path';\nimport SelectModal from 'app/js/views/modals/SelectModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/DownloadVersionModal.tpl';\n\nconst DownloadVersionModal = SelectModal.extend({\n  //\n  // Properties\n\n  name: 'downloadVersionModal',\n  template: tpl,\n\n  //\n  // Control\n\n  serializeData: function () {\n    const model = this.model;\n    const downloadList = _.map(\n      this.model.get('Media'),\n      function (mediaItem, index) {\n        const item = _.clone(mediaItem);\n        item.downloadUrl = model.getDownloadUrl(index);\n        const filePath = model.getFilepath(index);\n        if (filePath) {\n          item.downloadName = path.getLastSegment(filePath);\n        }\n        return item;\n      }\n    );\n\n    return {\n      defaultLinkTarget: __EXTERNAL_LINK_TARGET__,\n      mediaItems: downloadList,\n    };\n  },\n\n  onClick: function () {\n    // Empty click method to override default\n  },\n});\n\nexport default DownloadVersionModal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst LEVEL_FACTOR = {\n  h264: 10,\n  hevc: 30,\n};\n\nfunction formatVideoLevel(level: any, codec: any) {\n  if (level === null || level === undefined || Number.isNaN(level)) {\n    return '';\n  }\n\n  const levelNumber = parseInt(level, 10);\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  const factor = LEVEL_FACTOR[codec || 'h264']; // default to h264 if codec is falsy\n\n  return Number.isFinite(levelNumber) && Number.isFinite(factor)\n    ? (levelNumber / factor).toFixed(1)\n    : String(level);\n}\n\nexport default formatVideoLevel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nfunction formatPropertyLabel(propertyName: any) {\n  let label = '';\n\n  for (let i = 0, len = propertyName.length; i < len; i++) {\n    const currChar = propertyName.charAt(i);\n    const upperChar = currChar.toUpperCase();\n\n    if (i === 0) {\n      label += upperChar;\n    } else if (currChar === upperChar) {\n      label += ' ' + upperChar;\n    } else {\n      label += currChar;\n    }\n  }\n\n  return label;\n}\n\nexport default formatPropertyLabel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport * as adapters from 'app/js/adapters/adapters';\nimport commands from 'app/js/commands/commands';\nimport { NONE } from 'app/js/utils/constants/player/subtitleStreamIDs';\nimport formatPlayerTime from 'app/js/utils/dateTime/formatPlayerTime';\nimport formatBytes from 'app/js/utils/metadata/formatBytes';\nimport formatResolution from 'app/js/utils/metadata/formatResolution';\nimport formatVideoLevel from 'app/js/utils/metadata/formatVideoLevel';\nimport toUpperCase from 'app/js/utils/string/case/toUpperCase';\nimport formatBoolean from 'app/js/utils/string/format/formatBoolean';\nimport formatPropertyLabel from 'app/js/utils/string/format/formatPropertyLabel';\nimport path from 'app/js/utils/url/path';\nimport BaseModal from 'app/js/views/modals/BaseModal';\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'app/templates/modal... Remove this comment to see the full error message\nimport tpl from 'app/templates/modals/MediaInfoModal.tpl';\n\nconst hiddenProperties = [\n  'id',\n  'key',\n  'index',\n  'videoCodec',\n  'audioCodec',\n  'audioChannels',\n  'default',\n  'selected',\n  'languageCode',\n  'accessible',\n  'exists',\n  'provider',\n  'lines',\n  'minLines',\n  'follow',\n  'requiredBandwidths',\n  'deepAnalysisVersion',\n  'deepAnalysisDate',\n  'Overlay',\n];\n\nconst mapping = {\n  size: formatBytes,\n  duration: formatPlayerTime,\n  codec: toUpperCase,\n  format: toUpperCase,\n  container: toUpperCase,\n  videoResolution: formatResolution,\n  bitrateMode: toUpperCase,\n  accessible: formatBoolean,\n  exists: formatBoolean,\n  optimizedForStreaming: formatBoolean,\n  timed: formatBoolean,\n  file: path.getLastSegment,\n};\n\nconst labels = {\n  optimizedForStreaming: 'Web Optimized',\n  has64bitOffsets: 'Has 64bit Offsets',\n  cabac: 'CABAC',\n  postURL: 'URL',\n  codecID: 'Codec ID',\n};\n\nconst units = {\n  frameRate: ' fps',\n  dialogNorm: ' dB',\n  bitrate: ' kbps',\n  samplingRate: ' Hz',\n};\n\nconst sanitizeProperties = function (root: any, exempt: any) {\n  const sanitized = { properties: [] };\n\n  // Copy properties into an array so we can easily loop through them.\n\n  for (const name in root) {\n    if (name === exempt || _.indexOf(hiddenProperties, name) !== -1) {\n      continue;\n    }\n\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    let label = labels[name];\n    let value = root[name];\n\n    if (name === 'level') {\n      value = formatVideoLevel(value, root.codec);\n    }\n\n    // If a mapping is specified, store the formatted value.\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    if (mapping[name]) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      value = mapping[name](value);\n    }\n\n    if (!value) {\n      continue;\n    }\n\n    // If units are specified, append them to the value.\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    if (units[name]) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      value += units[name];\n    }\n\n    if (!label) {\n      label = formatPropertyLabel(name);\n    }\n\n    sanitized.properties.push({\n      // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n      name: label,\n      // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n      value: value,\n    });\n  }\n\n  // Copy the exempt property over to the new object.\n  if (exempt && root) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    sanitized[exempt] = root[exempt];\n  }\n\n  return sanitized;\n};\n\nfunction mapStreams(streams: any) {\n  const filtered = _.reject(streams, function (s) {\n    // Filter out \"None\" subtitles fake stream\n    return s.id === NONE;\n  });\n  const sorted = _.sortBy(filtered, 'streamType');\n\n  return _.map(sorted, function (stream) {\n    return sanitizeProperties(stream, 'streamType');\n  });\n}\n\nfunction mapMedia(model: any) {\n  return _.map(model.get('Media'), function (mediaItem) {\n    return _.extend(sanitizeProperties(mediaItem, 'Part'), {\n      Part: _.map(mediaItem.Part, function (uPart) {\n        return _.extend(sanitizeProperties(uPart, 'Stream'), {\n          file: uPart.file,\n          exists: uPart.exists !== false,\n          accessible: uPart.accessible !== false,\n          Stream: mapStreams(uPart.Stream),\n        });\n      }),\n    });\n  });\n}\n\nconst MediaInfoModal = BaseModal.extend({\n  //\n  // Properties\n\n  name: 'mediaInfoModal',\n  className: 'media-info-modal modal modal-lg fade',\n  template: tpl,\n\n  ui: {\n    scroller: '.modal-body-scroll',\n    files: '.files > ul',\n    stickyProps: '.media > .props, .part > .props',\n  },\n\n  events: _.extend(\n    {\n      'click .delete-btn': 'onDeleteClick',\n    },\n    BaseModal.prototype.events\n  ),\n\n  modelEvents: {\n    'change:Media': 'onMediaChange',\n  },\n\n  //\n  // Init\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  initialize: function (options: any) {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.initialize.apply(this, arguments);\n\n    this.bindAllWhenRendered('onMediaChange', 'onScroll');\n\n    this.loading = false;\n    this.media = mapMedia(this.model);\n\n    // We don't have full metadata in track list, so we need to populate the\n    // model in order to show streams\n\n    this.loading = true;\n\n    this.model\n      .fetch({\n        usePopulatedParams: true,\n        data: { checkFiles: 1, asyncCheckFiles: 0 },\n      })\n      .always(\n        this.whenRendered(function () {\n          // Update the view even if the Media hasn't changed so we can remove\n          // the Loading... message. If Media has changed, `onMediaChange`\n          // will handle the update.\n\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          if (!this.model.changed.hasOwnProperty('Media')) {\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this.updateMedia();\n          }\n        })\n      );\n  },\n\n  //\n  // Control\n\n  serializeData: function () {\n    let key = this.model.get('key');\n    const appModel = adapters.resolve('appModel');\n    const user = appModel.get('user');\n    const server = this.model.server;\n\n    if (this.model.get('isLibraryItem')) {\n      key = path.join(key, {\n        checkFiles: 1,\n        includeAllConcerts: 1,\n        includeBandwidths: 1,\n        includeChapters: 1,\n        includeChildren: 1,\n        includeConcerts: 1,\n        includeExtras: 1,\n        includeFields: 1,\n        includeGeolocation: 1,\n        includeLoudnessRamps: 1,\n        includeMarkers: 1,\n        includeOnDeck: 1,\n        includePopularLeaves: 1,\n        includePreferences: 1,\n        includeRelated: 1,\n        includeRelatedCount: 1,\n        includeReviews: 1,\n        includeStations: 1,\n      });\n    }\n\n    return {\n      key: key,\n      url: this.model.server.resolveUrl(key, { appendToken: true }),\n      media: this.media,\n      hasFiles: this.hasFiles(),\n      hasStreams: this.hasStreams() || this.loading,\n      showDeleteFile:\n        server.get('isFullOwnedServer') &&\n        server.get('allowMediaDeletion') &&\n        server.supports('specificMediaDeletion'),\n      showFilepath: !server.get('shared') || user.isNinja(),\n      loading: this.loading,\n    };\n  },\n\n  updateMedia: function () {\n    this.loading = false;\n    this.rerender = true;\n\n    this.ui.scroller.off('scroll', this.onScroll);\n\n    this.media = mapMedia(this.model);\n    this.render();\n  },\n\n  hasFiles: function () {\n    return !!_.chain(this.media)\n      .pluck('Part')\n      .flatten()\n      .pluck('file')\n      .compact()\n      .size()\n      .value();\n  },\n\n  hasStreams: function () {\n    return !!_.chain(this.media)\n      .pluck('Part')\n      .flatten()\n      .pluck('Stream')\n      .flatten()\n      .size()\n      .value();\n  },\n\n  //\n  // Listeners\n\n  onRender: function () {\n    // eslint-disable-next-line prefer-rest-params\n    BaseModal.prototype.onRender.apply(this, arguments);\n\n    // Scroll event doesn't bubble up so we can't declare it in event delegate hash\n    this.ui.scroller.on('scroll', this.onScroll);\n\n    this.$el.tooltip({\n      selector: '.files .label',\n      placement: 'bottom',\n    });\n  },\n\n  onClose: function () {\n    this.ui.scroller.off('scroll', this.onScroll);\n  },\n\n  onMediaChange: function () {\n    if (this.isHidden) {\n      return;\n    }\n\n    if (!this.model.get('Media').length) {\n      this.hide();\n      return;\n    }\n\n    this.updateMedia();\n  },\n\n  onDeleteClick: function (event: any) {\n    event.preventDefault();\n\n    commands.execute('deleteMediaItem', {\n      item: this.model,\n      index: $(event.currentTarget).data('media-item'),\n    });\n  },\n\n  onScroll: function () {\n    const scrollTop = this.ui.scroller.scrollTop();\n    let mediaSectionOffset = this.ui.scroller.offset().top;\n\n    if (this.ui.files.length) {\n      mediaSectionOffset += parseInt(this.ui.files.css('margin-bottom'), 10);\n    }\n\n    // Firefox restores scrolling position and produces first `scroll` event\n    // before modal finishes its show animation.\n    if (mediaSectionOffset < 0) {\n      window.setTimeout(this.onScroll, 500);\n      return;\n    }\n\n    this.ui.stickyProps.each(function () {\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      const $this = $(this);\n\n      // top value corresponding to \"bottom = 0\"\n      const maxTop = $this.parent().height() - $this.height();\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      const unadjustedTop = scrollTop - this.parentNode.offsetTop;\n      const top = Math.min(Math.max(unadjustedTop, 0), maxTop);\n\n      if (top && top === unadjustedTop) {\n        // Somewhere between top and bottom position within container\n        $this.addClass('sticky');\n        $this.css('top', mediaSectionOffset);\n      } else {\n        $this.removeClass('sticky');\n        $this.css('top', top);\n      }\n    });\n  },\n});\n\nexport default MediaInfoModal;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport commands from 'app/js/commands/commands';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport getLegacyActionModels from 'app/js/stores/actions/helpers/getLegacyActionModels';\nimport analyzeMetadataItemHelper from 'app/js/stores/actions/helpers/metadata/analyzeMetadataItem';\nimport rateMetadataItemHelper from 'app/js/stores/actions/helpers/metadata/rateMetadataItem';\nimport refreshMetadataItemHelper from 'app/js/stores/actions/helpers/metadata/refreshMetadataItem';\nimport selectMetadataItemStreamHelper from 'app/js/stores/actions/helpers/metadata/selectMetadataItemStream';\nimport updateMetadataSettingsHelper from 'app/js/stores/actions/helpers/metadata/updateMetadataSettings';\nimport updatePlayedStatusHelper from 'app/js/stores/actions/helpers/metadata/updatePlayedStatus';\nimport { repopulatePage, showAlert } from 'app/js/stores/actions/ui/uiActions';\nimport * as metricsActions from 'app/js/utils/constants/metrics/metricsActions';\nimport * as metricsContexts from 'app/js/utils/constants/metrics/metricsContexts';\nimport * as metricsPages from 'app/js/utils/constants/metrics/metricsPages';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport {\n  FAVORITE_RATING,\n  UNFAVORITE_RATING,\n} from 'app/js/utils/metadata/isFavorite';\nimport parseXML from 'app/js/utils/parser/parseXML';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport {\n  findMetadataItemModel,\n  findProviderModel,\n  findServerModel,\n  tryFindMetadataItemModel,\n} from 'app/js/utils/state/modelFinders';\nimport { scheduleImmediateUpdate } from 'app/js/utils/state/stateUpdateScheduler';\nimport t from 'app/js/utils/t';\nimport { getMetadataType } from 'app/js/utils/types/metadataTypes';\nimport sectionTypes, { MUSIC } from 'app/js/utils/types/sectionTypes';\nimport path from 'app/js/utils/url/path';\nimport DownloadVersionModal from 'app/js/views/modals/DownloadVersionModal';\nimport LibraryFailureModal from 'app/js/views/modals/LibraryFailureModal';\nimport MediaInfoModal from 'app/js/views/modals/MediaInfoModal';\nimport ConvertModal from 'app/js/views/modals/convert/ConvertModal';\n\n//\n// Action Types\n\nexport const SELECT_METADATA_ITEM_STREAM = 'metadata/selectMetadataItemStream';\nexport const REPOPULATE_METADATA_ITEM = 'metadata/repopulateMetadataItem';\nexport const REMOVE_METADATA_ITEM = 'metadata/removeMetadataItem';\nexport const TOGGLE_METADATA_ITEM_SAVE = 'metadata/toggleMetadataItemSave';\nexport const TOGGLE_METADATA_ITEM_PICK = 'metadata/toggleMetadataItemPlexPick';\nexport const TOGGLE_METADATA_ITEM_WATCHLIST =\n  'metadata/toggleMetadataItemWatchlist';\nexport const ADD_METADATA_ITEM_TO_LIBRARY = 'metadata/addMetadataItemToLibrary';\nexport const DELETE_METADATA_ITEM_STREAM = 'metadata/deleteMetadataItemStream';\nexport const SET_METADATA_ITEM_STREAM_OFFSET =\n  'metadata/setMetadataItemStreamOffset';\nexport const SET_METADATA_ITEM_IS_IN_UNIVERSAL_WATCHLIST =\n  'metadata/setMetadataItemIsInUniversalWatchlist';\nexport const REDISPATCH_LEGACY_METADATA_ACTION =\n  'metadata/redispatchLegacyMetadataAction';\nexport const ANALYZE_METADATA_ITEM = 'metadata/analyzeMetadataItem';\nexport const DELETE_METADATA_ITEM = 'metadata/deleteMetadataItem';\nexport const DELETE_METADATA_ITEM_VERSION =\n  'metadata/deleteMetadataItemVersion';\nexport const DOWNLOAD_METADATA_ITEM_VERSION =\n  'metadata/downloadMetadataItemVersion';\nexport const EDIT_METADATA_ITEM = 'metadata/editMetadataItem';\nexport const FIX_METADATA_ITEM_MATCH = 'metadata/fixMetadataItemMatch';\nexport const GET_METADATA_ITEM_INFO = 'metadata/getMetadataItemInfo';\nexport const UPDATE_METADATA_ITEM_PLAYED_STATUS =\n  'metadata/updateMetadataItemPlayedStatus';\nexport const OPTIMIZE_METADATA_ITEM = 'metadata/optimizeMetadataItem';\nexport const RATE_METADATA_ITEM = 'metadata/rateMetadataItem';\nexport const REFRESH_METADATA_ITEM = 'metadata/refreshMetadataItem';\nexport const SPLIT_METADATA_ITEM_APART = 'metadata/splitMetadataItemApart';\nexport const UNMATCH_METADATA_ITEM = 'metadata/unmatchMetadataItem';\nexport const CHANGE_METADATA_ITEM_FIELD = 'metadata/changeMetadataItemField';\nexport const UPDATE_METADATA_ITEM_REFRESHING_STATE =\n  'metadata/updateMetadataItemRefreshingState';\nexport const UPDATE_METADATA_SETTINGS = 'metadata/UPDATE_METADATA_SETTINGS';\nexport const CLEAR_METADATA_SETTINGS_ERROR = 'CLEAR_METADATA_SETTINGS_ERROR';\nexport const UPDATE_DOWNLOAD_AVAILABILITY =\n  'metadata/updateDownloadAvailability';\nexport const UPDATE_DOWNLOAD_AVAILABILITY_FROM_DELETED_TIMELINE =\n  'metadata/updateDownloadAvailabilityFromDeletedTimeline';\nexport const SET_DOWNLOAD_SUBSCRIPTION_ID =\n  'metadata/setDownloadSubscriptionID';\nexport const UNSET_DOWNLOAD_SUBSCRIPTION_ID =\n  'metadata/unsetDownloadSubscriptionID';\nexport const UPDATE_DOWNLOAD_SUBSCRIPTION_IDS =\n  'metadata/updateDownloadSubscriptionIDs';\nexport const MODIFY_SMART_PLAYLIST = 'metadata/modifySmartPlaylist';\n\n//\n// Action Creators\n\nexport const selectMetadataItemStream = createActionCreator(\n  SELECT_METADATA_ITEM_STREAM\n);\nexport const repopulateMetadataItem = createActionCreator(\n  REPOPULATE_METADATA_ITEM\n);\nexport const removeMetadataItem = createActionCreator(REMOVE_METADATA_ITEM);\nexport const toggleMetadataItemSave = createActionCreator(\n  TOGGLE_METADATA_ITEM_SAVE\n);\nexport const toggleMetadataItemPick = createActionCreator(\n  TOGGLE_METADATA_ITEM_PICK\n);\nexport const toggleMetadataItemWatchlist = createActionCreator(\n  TOGGLE_METADATA_ITEM_WATCHLIST\n);\nexport const addMetadataItemToLibrary = createActionCreator(\n  ADD_METADATA_ITEM_TO_LIBRARY\n);\nexport const deleteMetadataItemStream = createActionCreator(\n  DELETE_METADATA_ITEM_STREAM\n);\nexport const setMetadataItemStreamOffset = createActionCreator(\n  SET_METADATA_ITEM_STREAM_OFFSET\n);\nexport const setMetadataItemIsInUniversalWatchlist = createActionCreator(\n  SET_METADATA_ITEM_IS_IN_UNIVERSAL_WATCHLIST\n);\nexport const redispatchLegacyMetadataAction = createActionCreator(\n  REDISPATCH_LEGACY_METADATA_ACTION\n);\n\nexport const analyzeMetadataItem = createActionCreator(ANALYZE_METADATA_ITEM);\nexport const deleteMetadataItem = createActionCreator(DELETE_METADATA_ITEM);\nexport const deleteMetadataItemVersion = createActionCreator(\n  DELETE_METADATA_ITEM_VERSION\n);\nexport const downloadMetadataItemVersion = createActionCreator(\n  DOWNLOAD_METADATA_ITEM_VERSION\n);\nexport const editMetadataItem = createActionCreator(EDIT_METADATA_ITEM);\nexport const fixMetadataItemMatch = createActionCreator(\n  FIX_METADATA_ITEM_MATCH\n);\nexport const getMetadataItemInfo = createActionCreator(GET_METADATA_ITEM_INFO);\nexport const updateMetadataItemPlayedStatus = createActionCreator(\n  UPDATE_METADATA_ITEM_PLAYED_STATUS\n);\nexport const optimizeMetadataItem = createActionCreator(OPTIMIZE_METADATA_ITEM);\nexport const rateMetadataItem = createActionCreator(RATE_METADATA_ITEM);\nexport const refreshMetadataItem = createActionCreator(REFRESH_METADATA_ITEM);\nexport const splitMetadataItemApart = createActionCreator(\n  SPLIT_METADATA_ITEM_APART\n);\nexport const unmatchMetadataItem = createActionCreator(UNMATCH_METADATA_ITEM);\nexport const changeMetadataItemField = createActionCreator(\n  CHANGE_METADATA_ITEM_FIELD\n);\nexport const updateMetadataItemRefreshingState = createActionCreator(\n  UPDATE_METADATA_ITEM_REFRESHING_STATE\n);\nexport const updateMetadataSettings = createActionCreator(\n  UPDATE_METADATA_SETTINGS\n);\nexport const clearMetadataSettingsError = createActionCreator(\n  CLEAR_METADATA_SETTINGS_ERROR\n);\n\nexport const favoriteMetadataItem = createActionCreator(\n  RATE_METADATA_ITEM,\n  (payload: any) => ({\n    ...payload,\n    rating: FAVORITE_RATING,\n  })\n);\n\nexport const unfavoriteMetadataItem = createActionCreator(\n  RATE_METADATA_ITEM,\n  (payload: any) => ({\n    ...payload,\n    rating: UNFAVORITE_RATING,\n  })\n);\n\nexport const markMetadataItemUnplayed = createActionCreator(\n  UPDATE_METADATA_ITEM_PLAYED_STATUS,\n  (payload: any) => ({\n    ...payload,\n    played: false,\n  })\n);\n\nexport const markMetadataItemPlayed = createActionCreator(\n  UPDATE_METADATA_ITEM_PLAYED_STATUS,\n  (payload: any) => ({\n    ...payload,\n    played: true,\n  })\n);\n\nexport const setDownloadSubscriptionID = createActionCreator(\n  SET_DOWNLOAD_SUBSCRIPTION_ID\n);\nexport const unsetDownloadSubscriptionID = createActionCreator(\n  UNSET_DOWNLOAD_SUBSCRIPTION_ID\n);\nexport const updateDownloadAvailability = createActionCreator(\n  UPDATE_DOWNLOAD_AVAILABILITY\n);\nexport const updateDownloadAvailabilityFromDeletedTimeline =\n  createActionCreator(UPDATE_DOWNLOAD_AVAILABILITY_FROM_DELETED_TIMELINE);\nexport const updateDownloadSubscriptionIDs = createActionCreator(\n  UPDATE_DOWNLOAD_SUBSCRIPTION_IDS\n);\nexport const modifySmartPlaylist = createActionCreator(MODIFY_SMART_PLAYLIST);\n\n//\n// Helpers\n\nfunction trackAction(\n  action: any,\n  metadataItemModel: any,\n  page: any,\n  options = {}\n) {\n  if (!page) {\n    return;\n  }\n\n  resolve('metrics').trackClick({\n    page,\n    action,\n    type: metadataItemModel.get('type'),\n    ...options,\n  });\n}\n\n//\n// Action Handlers\n\nexport const metadataActionHandlers = {\n  [SELECT_METADATA_ITEM_STREAM](appModel: any, payload: any, dispatch: any) {\n    const {\n      mediaIndex,\n      streamTypeString,\n      streamID,\n      allParts,\n      metricsPage,\n      updateLocalOnly,\n    } = payload;\n\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    const options = {\n      mediaIndex,\n      streamTypeString,\n      streamID,\n      allParts,\n      allowMetrics: !!metricsPage,\n      metricsProperties: { page: metricsPage },\n      updateLocalOnly,\n    };\n\n    selectMetadataItemStreamHelper(metadataItemModel, options).fail((xhr) => {\n      if (xhr && xhr.aborting) {\n        // The request was aborted because a newer select stream request was made.\n        return;\n      }\n\n      dispatch(showAlert(t('There was a problem selecting this stream.')));\n    });\n  },\n\n  [REPOPULATE_METADATA_ITEM](appModel: any, payload: any) {\n    const metadataItemModel = tryFindMetadataItemModel(appModel, payload);\n\n    if (metadataItemModel) {\n      // Pass the `skipRefresh` param so on-the-fly media analysis does not\n      // happen for items while a scan is in progress. This helps to avoid\n      // overwhelming low-powered servers.\n\n      metadataItemModel.fetch({\n        data: { skipRefresh: 1 },\n        usePopulatedParams: true,\n      });\n    }\n  },\n\n  [REMOVE_METADATA_ITEM](appModel: any, payload: any) {\n    const metadataItemModel = tryFindMetadataItemModel(appModel, payload);\n\n    if (metadataItemModel) {\n      metadataItemModel.trigger(\n        'destroy',\n        metadataItemModel,\n        metadataItemModel.collection\n      );\n    }\n  },\n\n  [TOGGLE_METADATA_ITEM_SAVE](appModel: any, payload: any, dispatch: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n    const providerModel = findProviderModel(appModel, {\n      providerEntityID: metadataItemModel.get('providerEntityID'),\n    });\n\n    const providerIdentifier = providerModel.get('identifier');\n    const isMusicProvider = providerIdentifiers.matches(\n      providerIdentifier,\n      providerIdentifiers.MUSIC\n    );\n\n    let ratingKey = metadataItemModel.get('ratingKey');\n\n    const grandparentRatingKey = metadataItemModel.get('grandparentRatingKey');\n    let metadataItemGrandparentModel: any;\n\n    if (grandparentRatingKey && !isMusicProvider) {\n      ratingKey = grandparentRatingKey;\n\n      const grandparentKey = metadataItemModel.get('grandparentKey');\n\n      if (grandparentKey) {\n        const metadataModelGrandparentEntityID = createEntityID(\n          entityTypes.METADATA_ITEM,\n          grandparentKey,\n          payload.serverEntityID\n        );\n\n        metadataItemGrandparentModel = tryFindMetadataItemModel(appModel, {\n          metadataItemEntityID: metadataModelGrandparentEntityID,\n        });\n      }\n    }\n\n    const currentSavedStatus = metadataItemModel.get('saved');\n    const nextSavedStatus = !currentSavedStatus;\n    metadataItemModel.set('saved', nextSavedStatus);\n\n    if (metadataItemGrandparentModel) {\n      metadataItemGrandparentModel.set('saved', nextSavedStatus);\n    }\n\n    const action = providerModel\n      .get('features')\n      .get(providerFeatureTypes.ACTIONS)\n      .get('actions')\n      .get('save');\n    const key = nextSavedStatus ? action.get('key') : action.get('reverseKey');\n    const url = path.join(key, { ratingKey });\n    const xhrOptions = providerModel.getXHROptions(url, {\n      type: 'PUT',\n    });\n\n    $.ajax(xhrOptions).then(\n      () => {\n        dispatch(repopulatePage({ serverEntityID: payload.serverEntityID }));\n      },\n      () => {\n        metadataItemModel.set('saved', currentSavedStatus);\n\n        if (metadataItemGrandparentModel) {\n          metadataItemGrandparentModel.set('saved', currentSavedStatus);\n        }\n      }\n    );\n  },\n\n  [TOGGLE_METADATA_ITEM_PICK](appModel: any, payload: any, dispatch: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n    const providerModel = findProviderModel(appModel, {\n      providerEntityID: metadataItemModel.get('providerEntityID'),\n    });\n\n    const ratingKey = metadataItemModel.get('ratingKey');\n    const currentPicked = metadataItemModel.get('picked');\n    const nextPicked = !currentPicked;\n\n    metadataItemModel.set('picked', nextPicked);\n\n    const action = providerModel\n      .get('features')\n      .get(providerFeatureTypes.ACTIONS)\n      .get('actions')\n      .get('pick');\n    const key = nextPicked ? action.get('key') : action.get('reverseKey');\n    const url = path.join(key, { ratingKey });\n    const xhrOptions = providerModel.getXHROptions(url, {\n      type: 'PUT',\n    });\n\n    $.ajax(xhrOptions).then(\n      () => {\n        dispatch(\n          repopulateMetadataItem({\n            metadataItemEntityID: payload.metadataItemEntityID,\n          })\n        );\n      },\n      (response) => {\n        const json = parseXML(response.responseText);\n        dispatch(showAlert(json.message));\n        metadataItemModel.set('picked', currentPicked);\n      }\n    );\n  },\n\n  [TOGGLE_METADATA_ITEM_WATCHLIST](appModel: any, payload: any, dispatch: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n    const providerModel = findProviderModel(appModel, {\n      providerEntityID: metadataItemModel.get('providerEntityID'),\n    });\n\n    const ratingKey = metadataItemModel.get('ratingKey');\n    const currentWatchlistedAt = metadataItemModel.get('watchlistedAt');\n    const nextWatchlistedAt = !currentWatchlistedAt ? Date.now() : undefined;\n\n    metadataItemModel.set('watchlistedAt', nextWatchlistedAt);\n\n    const action = providerModel\n      .get('features')\n      .get(providerFeatureTypes.ACTIONS)\n      .get('actions')\n      .get('addToWatchlist');\n    const key = nextWatchlistedAt\n      ? action.get('key')\n      : action.get('reverseKey');\n    const url = path.join(key, { ratingKey });\n    const xhrOptions = providerModel.getXHROptions(url, {\n      type: 'PUT',\n    });\n\n    $.ajax(xhrOptions).then(\n      () => {\n        if (\n          payload.metricsPage === metricsPages.SOURCE &&\n          payload.metricsProperties.context.includes(metricsContexts.LIBRARY)\n        ) {\n          dispatch(repopulatePage({ serverEntityID: payload.serverEntityID }));\n        } else {\n          dispatch(\n            repopulateMetadataItem({\n              metadataItemEntityID: payload.metadataItemEntityID,\n            })\n          );\n        }\n      },\n      (response) => {\n        const json = parseXML(response.responseText);\n        dispatch(showAlert(json.message));\n        metadataItemModel.set('watchlistedAt', currentWatchlistedAt);\n      }\n    );\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'dispatch' is declared but its value is never read... Remove this comment to see the full error message\n  [ADD_METADATA_ITEM_TO_LIBRARY](appModel: any, payload: any, dispatch: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n    const destinationServerModel = findServerModel(appModel, payload);\n    const providerModel = findProviderModel(appModel, {\n      providerEntityID: metadataItemModel.get('providerEntityID'),\n    });\n    const libraryID = payload.sectionKey.match(/\\/library\\/sections\\/(\\w+)/)[1];\n\n    const params = {\n      providers: `provider://${providerModel.get('identifier')}`,\n      prefs: {\n        oneShot: 1,\n        remoteMedia: 1,\n      },\n      params: {\n        // We only support adding to music libraries\n        libraryType: sectionTypes.get(MUSIC).typeID,\n      },\n      targetLibrarySectionID: libraryID,\n      hints: {\n        guid: metadataItemModel.get('guid'),\n        ratingKey: metadataItemModel.get('ratingKey'),\n        title: metadataItemModel.get('title'),\n        parentTitle: metadataItemModel.get('parentTitle'),\n        // See https://github.com/plexinc/plex-media-server/issues/9975\n        // for why we don't yet send grandparentTitle\n      },\n      type: getMetadataType(metadataItemModel.get('type')).id,\n    };\n\n    const xhrOptions = destinationServerModel.getXHROptions(\n      path.join('/media/subscriptions', params),\n      {\n        type: 'POST',\n      }\n    );\n    $.ajax(xhrOptions);\n  },\n\n  [DELETE_METADATA_ITEM_STREAM](appModel: any, payload: any, dispatch: any) {\n    const { streamKey, metadataItemEntityID } = payload;\n\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    scheduleImmediateUpdate(() => {\n      metadataItemModel.set('isStreamDeleteInProgress', true);\n    });\n\n    const xhrOptions = metadataItemModel.server.getXHROptions(streamKey, {\n      type: 'DELETE',\n    });\n\n    $.ajax(xhrOptions).then(\n      () => {\n        metadataItemModel.set('isStreamDeleteInProgress', false);\n        dispatch(repopulateMetadataItem({ metadataItemEntityID }));\n      },\n      // @ts-expect-error ts-migrate(6133) FIXME: 'response' is declared but its value is never read... Remove this comment to see the full error message\n      (response) => {\n        metadataItemModel.set('isStreamDeleteInProgress', false);\n        dispatch(showAlert(t('There was a problem deleting this stream.')));\n      }\n    );\n  },\n\n  [SET_METADATA_ITEM_STREAM_OFFSET](\n    appModel: any,\n    payload: any,\n    dispatch: any\n  ) {\n    const {\n      mediaIndex,\n      streamTypeString,\n      streamID,\n      allParts,\n      metricsPage,\n      updateLocalOnly,\n    } = payload;\n\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    const options = {\n      mediaIndex,\n      streamTypeString,\n      streamID,\n      allParts,\n      allowMetrics: !!metricsPage,\n      metricsProperties: { page: metricsPage },\n      updateLocalOnly,\n    };\n\n    selectMetadataItemStreamHelper(metadataItemModel, options).fail((xhr) => {\n      if (xhr && xhr.aborting) {\n        // The request was aborted because a newer select stream request was made.\n        return;\n      }\n\n      dispatch(showAlert(t('There was a problem selecting this stream.')));\n    });\n  },\n\n  [SET_METADATA_ITEM_IS_IN_UNIVERSAL_WATCHLIST](appModel: any, payload: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    metadataItemModel.set('isInUniversalWatchlist', true);\n  },\n\n  [REDISPATCH_LEGACY_METADATA_ACTION](\n    appModel: any,\n    payload: any,\n    dispatch: any\n  ) {\n    const {\n      serverModel,\n      providerModel,\n      itemServerModel,\n      itemProviderModel,\n      metadataItemModel,\n    } = getLegacyActionModels(appModel, payload);\n\n    const legacyType = payload.legacyAction.type;\n    const legacyPayload = payload.legacyAction.payload;\n    const legacyMetricsProperties = legacyPayload?.metricsProperties || {};\n\n    dispatch({\n      type: legacyType,\n      payload: {\n        ...legacyPayload,\n        serverEntityID: serverModel.entityID(),\n        providerEntityID: providerModel.entityID(),\n        itemServerEntityID: itemServerModel ? itemServerModel.entityID() : null,\n        itemProviderEntityID: itemProviderModel\n          ? itemProviderModel.entityID()\n          : null,\n        metadataItemEntityID: metadataItemModel.entityID(),\n        metricsPage: payload.metricsPage,\n        metricsProperties: {\n          ...legacyMetricsProperties,\n          ...payload.metricsProperties,\n        },\n        skipClickMetrics: true,\n      },\n    });\n  },\n\n  [ANALYZE_METADATA_ITEM](appModel: any, payload: any, dispatch: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n    const metricsPage = payload.metricsPage;\n\n    const options = {\n      allowMetrics: !!metricsPage,\n      metricsProperties: { page: metricsPage },\n    };\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    analyzeMetadataItemHelper(metadataItemModel, options).fail((xhr) => {\n      dispatch(showAlert(t('There was a problem analyzing this item.')));\n    });\n  },\n\n  [DOWNLOAD_METADATA_ITEM_VERSION](appModel: any, payload: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n    const modal = new DownloadVersionModal({\n      model: metadataItemModel,\n    });\n\n    dispatcher.trigger('show:modal', modal);\n  },\n\n  [DELETE_METADATA_ITEM](appModel: any, payload: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n    const options = payload.options || {};\n\n    const command = metadataItemModel.get('isPlaylist')\n      ? 'deletePlaylist'\n      : 'deleteItems';\n\n    commands.execute(command, {\n      item: metadataItemModel,\n      ...options,\n    });\n\n    trackAction(metricsActions.DELETE, metadataItemModel, payload.metricsPage);\n  },\n\n  [DELETE_METADATA_ITEM_VERSION](appModel: any, payload: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    commands.execute('deleteVersions', { item: metadataItemModel });\n\n    trackAction(metricsActions.DELETE, metadataItemModel, payload.metricsPage);\n  },\n\n  [EDIT_METADATA_ITEM]() {\n    __DEV__ &&\n      window.console.warn(\n        'EDIT_METADATA_ITEM action handler requires app-specific implementation'\n      );\n  },\n\n  [FIX_METADATA_ITEM_MATCH]() {},\n\n  [GET_METADATA_ITEM_INFO](appModel: any, payload: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n    const modal = new MediaInfoModal({\n      model: metadataItemModel,\n    });\n\n    dispatcher.trigger('show:modal', modal);\n\n    trackAction(\n      metricsActions.GET_INFO,\n      metadataItemModel,\n      payload.metricsPage\n    );\n  },\n\n  [UPDATE_METADATA_ITEM_PLAYED_STATUS](\n    appModel: any,\n    payload: any,\n    dispatch: any\n  ) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    const promise = updatePlayedStatusHelper(appModel, payload);\n\n    promise.then(\n      () => {\n        dispatch(repopulatePage({ serverEntityID: payload.serverEntityID }));\n      },\n      () => {\n        const message = payload.played\n          ? t('There was an unexpected error marking an item played.')\n          : t('There was an unexpected error marking an item unplayed.');\n\n        dispatch(showAlert(message));\n      }\n    );\n\n    const metricsAction = payload.played\n      ? metricsActions.MARK_AS_WATCHED\n      : metricsActions.MARK_AS_UNWATCHED;\n\n    trackAction(metricsAction, metadataItemModel, payload.metricsPage);\n  },\n\n  [OPTIMIZE_METADATA_ITEM](appModel: any, payload: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n    const modal = new ConvertModal({\n      item: metadataItemModel,\n    });\n\n    dispatcher.trigger('show:modal', modal);\n\n    trackAction(\n      metricsActions.OPTIMIZE,\n      metadataItemModel,\n      payload.metricsPage\n    );\n  },\n\n  [RATE_METADATA_ITEM](appModel: any, payload: any, dispatch: any) {\n    const { rating, metricsPage } = payload;\n\n    const providerModel = findProviderModel(appModel, payload);\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    const options = {\n      rating,\n      allowMetrics: !!metricsPage,\n      metricsProperties: { page: metricsPage },\n    };\n\n    rateMetadataItemHelper(providerModel, metadataItemModel, options).fail(\n      // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n      (xhr) => {\n        dispatch(showAlert(t('There was a problem rating this item.')));\n      }\n    );\n  },\n\n  [REFRESH_METADATA_ITEM](appModel: any, payload: any, dispatch: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n    const metricsPage = payload.metricsPage;\n\n    const options = {\n      allowMetrics: !!metricsPage,\n      metricsProperties: { page: metricsPage },\n    };\n\n    refreshMetadataItemHelper(metadataItemModel, options).fail((xhr) => {\n      if (xhr.status === 503) {\n        dispatcher.trigger(\n          'show:modal',\n          new LibraryFailureModal({ model: metadataItemModel.server })\n        );\n      } else {\n        dispatch(showAlert(t('There was a problem refreshing this item.')));\n      }\n    });\n  },\n\n  [SPLIT_METADATA_ITEM_APART](appModel: any, payload: any, dispatch: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    commands\n      .execute('splitApart', { item: metadataItemModel, skipNavigate: true })\n      .done(() => {\n        dispatch(repopulatePage({ serverEntityID: payload.serverEntityID }));\n      });\n\n    trackAction(\n      metricsActions.SPLIT_APART,\n      metadataItemModel,\n      payload.metricsPage\n    );\n  },\n\n  [UNMATCH_METADATA_ITEM](appModel: any, payload: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    commands.execute('unmatch', { item: metadataItemModel });\n\n    trackAction(metricsActions.UNMATCH, metadataItemModel, payload.metricsPage);\n  },\n\n  [CHANGE_METADATA_ITEM_FIELD](appModel: any, payload: any, dispatch: any) {\n    const { providerEntityID, metadataItemEntityID, name, value, save } =\n      payload;\n\n    const metadataItemModel = findMetadataItemModel(appModel, {\n      metadataItemEntityID,\n    });\n\n    if (!save) {\n      metadataItemModel.set({ [name]: value });\n      return;\n    }\n\n    const providerModel = findProviderModel(appModel, { providerEntityID });\n    const url = path.join(metadataItemModel.get('key'), {\n      [name]: value,\n      [`${name}.locked`]: 1,\n    });\n    const xhrOptions = providerModel.getXHROptions(url, { type: 'PUT' });\n\n    // @ts-expect-error ts-migrate(6133) FIXME: 'xhr' is declared but its value is never read.\n    $.ajax(xhrOptions).fail((xhr) => {\n      dispatch(showAlert(t('There was a problem editing this item.')));\n    });\n\n    trackAction(metricsActions.EDIT, metadataItemModel, payload.metricsPage);\n  },\n\n  [UPDATE_METADATA_ITEM_REFRESHING_STATE](appModel: any, payload: any) {\n    const metadataItemModel = tryFindMetadataItemModel(appModel, payload);\n\n    if (metadataItemModel) {\n      metadataItemModel.set({\n        metadataState: payload.metadataState,\n        mediaState: payload.mediaState,\n      });\n    }\n  },\n\n  [UPDATE_METADATA_SETTINGS](appModel: any, payload: any, dispatch: any) {\n    const providerModel = findProviderModel(appModel, payload);\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    const { data } = payload;\n\n    updateMetadataSettingsHelper(providerModel, metadataItemModel, data).then(\n      () => {\n        dispatch(\n          repopulateMetadataItem({\n            serverEntityID: payload.serverEntityID,\n            metadataItemEntityID: payload.metadataItemEntityID,\n          })\n        );\n      }\n    );\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'dispatch' is declared but its value is never read... Remove this comment to see the full error message\n  [CLEAR_METADATA_SETTINGS_ERROR](appModel: any, payload: any, dispatch: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    metadataItemModel.set('settingsUpdateError', null);\n  },\n\n  [UPDATE_DOWNLOAD_AVAILABILITY]() {\n    __DEV__ &&\n      window.console.warn(\n        'UPDATE_DOWNLOAD_AVAILABILITY action handler requires app-specific implementation'\n      );\n  },\n\n  [UPDATE_DOWNLOAD_SUBSCRIPTION_IDS]() {\n    __DEV__ &&\n      window.console.warn(\n        'UPDATE_DOWNLOAD_SUBSCRIPTION_IDS action handler requires app-specific implementation'\n      );\n  },\n\n  [MODIFY_SMART_PLAYLIST]() {\n    __DEV__ &&\n      window.console.warn(\n        'MODIFY_SMART_PLAYLIST action handler requires app-specific implementation'\n      );\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const UNFAVORITE_RATING = -1;\nexport const FAVORITE_RATING = 10;\n\nfunction isFavorite(metadataItem: any) {\n  return metadataItem.userRating === FAVORITE_RATING;\n}\n\nexport default isFavorite;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { resolve } from 'app/js/adapters/adapters';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport log from 'app/js/utils/log/log';\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\nimport resolveMediaFromOrigin from './resolveMediaFromOrigin';\n\nexport function fetchMetadataItemModel(\n  metadataItemModel: any,\n  options: any = {}\n) {\n  const { itemProvider } = options;\n  const data = {\n    includeConcerts: 1,\n    includeExtras: 1,\n    includeOnDeck: 1,\n    includePopularLeaves: 1,\n    includePreferences: 1,\n    includeChapters: 1,\n    includeStations: 1,\n    includeMarkers: 1,\n    includeExternalMedia: 1,\n    asyncAugmentMetadata: 1,\n  };\n  if (metadataItemModel.get('type') === metadataTypes.TRACK) {\n    (data as any).includeRelated = 1;\n  }\n  if (\n    !options.forceSyncCheckFiles &&\n    metadataItemModel.server.supports('asyncCheckFiles')\n  ) {\n    (data as any).asyncCheckFiles = 1;\n    (data as any).asyncRefreshAnalysis = 1;\n    (data as any).asyncRefreshLocalMediaAgent = 1;\n  } else {\n    (data as any).checkFiles = 1;\n  }\n  // If the item is from a different provider to the context then we need to\n  // fetch from the source but merge with the context provided model to\n  // preserve attributes such as `source` and `attribution`.\n  const provider = itemProvider || metadataItemModel.provider;\n  const responseType = getSupportedResponseType(provider.server);\n  const url = provider.resolveUrl(metadataItemModel.url(), {\n    appendHeaders: true,\n  });\n  const xhrOptions = provider.getXHROptions(url, {\n    dataType: responseType.typeName,\n    data,\n    merge: true,\n  });\n  return metadataItemModel.fetch(xhrOptions).done(() => {\n    metadataItemModel.set('isPreFetched', true);\n  });\n}\n\n/**\n * @param metadataItemModel {Object} The model to fetch\n * @param options.forceFetch {Boolean} When true; will fetch the metadata item even when item is pre-fetched\n * @param options.forceSyncCheckFiles {Boolean}\n * @param options.itemProvider {Object} ProviderModel override for augmented items\n * @returns {Promise}\n */\nexport default function fetchPrePlayMetadataItem(\n  metadataItemModel: any,\n  options = {}\n) {\n  let promise =\n    (options as any).forceFetch || !metadataItemModel.get('isPreFetched')\n      ? fetchMetadataItemModel(metadataItemModel, options)\n      : $.Deferred().resolve().promise();\n  // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n  promise = promise.then(() => {\n    const Media = metadataItemModel.get('Media');\n    const indirect = metadataItemModel.get('indirect');\n    // Accept any non-empty Media that the provider has included up front.\n    if (indirect && (!Media || !Media.length)) {\n      const innerPromise = resolveMediaFromOrigin(\n        resolve('appModel'),\n        metadataItemModel\n      ).then((NextMedia) => {\n        metadataItemModel.set({ Media: NextMedia });\n      });\n      // @ts-expect-error ts-migrate(2769) FIXME: No overloads match this call.\n      innerPromise.then(null, (error) => {\n        log.error('[Metadata] %s', (error as any).message);\n      });\n      return innerPromise;\n    }\n  });\n  return promise;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport MetadataModel from 'app/js/models/metadata/MetadataModel';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport createSourceFromIdentifiers from 'app/js/utils/metadata/createSourceFromIdentifiers';\nimport getIdentifiersFromSource from 'app/js/utils/metadata/getIdentifiersFromSource';\n\nfunction resolveOrigin(metadataItemModel: any) {\n  return (\n    metadataItemModel.get('Origin') || {\n      key: metadataItemModel.get('key'),\n      source: createSourceFromIdentifiers({\n        serverIdentifier: metadataItemModel.server.get('machineIdentifier'),\n        providerIdentifier: metadataItemModel.provider.get('identifier'),\n      }),\n    }\n  );\n}\n\nfunction resolveMediaFromOrigin(appModel: any, metadataItemModel: any) {\n  const Origin = resolveOrigin(metadataItemModel);\n  const deferred = $.Deferred();\n\n  const { source: sourceAttr, key } = Origin;\n  const { providerIdentifier, serverIdentifier } =\n    getIdentifiersFromSource(sourceAttr);\n\n  const server = appModel.get('servers').get(serverIdentifier);\n  const providerContext =\n    server && server.get('isCloud') ? appModel.get('user') : server;\n  const provider =\n    providerContext && providerContext.get('providers').get(providerIdentifier);\n\n  let errorMessage;\n\n  // The Origin may point to a server and provider which do not exist or are not\n  // in a state to handle requests.\n  if (!server) {\n    errorMessage = 'Unknown server';\n  } else if (!server.get('isConnected')) {\n    errorMessage = 'Server is not connected';\n  } else if (!provider) {\n    errorMessage = 'Unknown provider';\n  } else if (!provider.get('isPopulated')) {\n    errorMessage = 'Provider is not populated';\n  }\n\n  if (errorMessage) {\n    deferred.reject(new Error(errorMessage));\n  } else {\n    const originMetadataItemModel = new MetadataModel(\n      { key },\n      {\n        server,\n        provider,\n        channel: metadataItemModel.channel,\n        includeExternalMedia: metadataItemModel.includeExternalMedia,\n        skipCache: true,\n      }\n    );\n\n    const responseType = getSupportedResponseType(provider.server);\n\n    const url = provider.resolveUrl(originMetadataItemModel.url(), {\n      appendHeaders: true,\n    });\n\n    const xhrOptions = provider.getXHROptions(url, {\n      dataType: responseType.typeName,\n      data: { resolveIndirect: 1 },\n    });\n\n    originMetadataItemModel.fetch(xhrOptions).then(\n      // @ts-expect-error ts-migrate(6133) FIXME: 'model' is declared but its value is never read.\n      (model: any) => {\n        // The originMetadataItemModel is not examined after fetching to\n        // determine if it continues to have an indirect attribute. We assume\n        // that a model has a single Origin, not a chain of Origins.\n        const Media = originMetadataItemModel.get('Media');\n        const indirectMedia = Media\n          ? Media.map((media: any) =>\n              $.extend(true, { source: sourceAttr }, media)\n            )\n          : [];\n\n        deferred.resolve(indirectMedia);\n      },\n      () => {\n        deferred.reject(new Error('Unable to fetch Origin metadata'));\n      }\n    );\n  }\n\n  return deferred.promise();\n}\n\nexport default resolveMediaFromOrigin;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function hasUserFeature(appModel: any, feature: any) {\n  return !!appModel.get('user').get('features').findWhere({\n    uuid: feature,\n  });\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport proxyTypes from 'app/js/utils/constants/proxyTypes';\nimport subtitlesBurnLevels from 'app/js/utils/constants/subtitlesBurnLevels';\nimport assert from 'app/js/utils/log/assert';\nimport log from 'app/js/utils/log/log';\nimport getMissingParts from 'app/js/utils/media/getMissingParts';\nimport getSelectedAudio from 'app/js/utils/media/getSelectedAudio';\nimport getSelectedSubtitles from 'app/js/utils/media/getSelectedSubtitles';\nimport getSelectedVideo from 'app/js/utils/media/getSelectedVideo';\nimport getStreams from 'app/js/utils/media/getStreams';\nimport isBitmapSubtitles from 'app/js/utils/media/isBitmapSubtitles';\nimport videoPlayerQualities from 'app/js/utils/player/videoPlayerQualities';\nimport playerUtil from 'app/js/utils/playerUtil';\nimport t from 'app/js/utils/t';\nimport streamTypes from 'app/js/utils/types/streamTypes';\n// The media decision engine determines the best media item to play given a\n// transcode server and optional upper-limit quality. It returns a decision\n// object with information about how it thinks the item can be played. The\n// engine makes a direct play decision and makes an educated guess whether\n// video and audio can be direct streamed in order to rank the possible\n// media items, but the ultimate decider for direct stream vs transcode is\n// still the server.\nconst mediaDecisionEngine = {\n  //\n  // Control\n  /**\n   * Analyzes media items and returns the analysis for the recommended media\n   * item to play.\n   *\n   * Required *\n   *\n   * @param  options.type *              video|music|photo\n   * @param  options.profile *           The player profile for this platform.\n   * @param  options.item *              The metadata item to be played.\n   * @param  options.media               An optional media item to be played.\n   * @param  options.transcodeServer *   The server that will be used to transcode the item.\n   * @param  options.allowDirectPlay     Allow items to be played directly.\n   * @param  options.forceDirectPlay     Skip analysis and force direct play.\n   * @param  options.skipCanPlayTypeTest Skip the canPlayType test and assume the client can play the mime type\n   * @param  options.allowMultiTrackAudio  Avoid transcoding when the selected audio stream is not the first.\n   * @param  options.allowedAC3Containers  Allow direct play of AC-3 audio in videos with these containers. Use '*' for all containers.\n   * @param  options.allowedEAC3Containers Allow direct play of E-AC-3 audio in videos with these containers. Use '*' for all containers.\n   * @param  options.allowedDCAContainers  Allow direct play of DTS audio in videos with these containers. Use '*' for all containers.\n   * @param  options.allowedTrueHDContainers  Allow direct play of Dolby TrueHD audio in videos with these containers. Use '*' for all containers.\n   * @param  options.allowDirectStreamVideoWithSoftSubtitles  Allow direct stream of video with soft subtitles\n   * @param  options.subtitlesBurnLevel  The subtitles burn level setting.\n   * @param  options.hasFlash            The device has the Flash player.\n   * @param  options.hasNativeHLS        The device can play HLS natively.\n   * @param  options.canDisplayHDR              This device can display the HDR color space.\n   * @param  options.canDisplayDolbyVision      This device can display the Dolby Vision color space.\n   * @param  options.quality             The max bitrate, video resolution, and video quality.\n   * @param  options.transcoderOptions   Url params to be sent to the transcode server.\n   * @param  options.preferredDirectPlayProtocol  Segmented protocol to prefer when direct playing HLS or DASH.\n   * @param  options.videoCodecOptions   Values used to augment / override an existing video codec profile.\n   *\n   * @return {Object}                    The decision object for the chosen media item.\n   */\n  getMediaDecision: function (options: any) {\n    const profile = this.augmentProfile(options);\n    log.info('[MDE] Augmented profile:', profile);\n    // If a specific media item is passed in, just analyze it and return the\n    // decision for that item.\n    if (options.media) {\n      return this.analyzeMedia(options.media, profile, options);\n    }\n    const item = options.item;\n    const mediaToAnalyze = item.get('Media');\n    // The transcoder needs a media index. If the metadata item does not\n    // have media items, force a direct play and hope for the best.\n    if (!mediaToAnalyze.length) {\n      return {\n        transcodeServer: options.transcodeServer,\n        canPlay: true,\n        canDirectPlay: true,\n      };\n    }\n    // If the metadata item only has one media item, don't bother trying to\n    // find the best decision.\n    if (mediaToAnalyze.length === 1) {\n      return this.analyzeMedia(_.first(mediaToAnalyze), profile, options);\n    }\n    // Analyze each media item and determine which one should be played.\n    const decisions = _.map(\n      mediaToAnalyze,\n      function (media) {\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        return this.analyzeMedia(media, profile, options);\n      },\n      this\n    );\n    return this.getBestDecision(decisions);\n  },\n  augmentProfile: function (options: any) {\n    const profile = options.profile;\n    if (!profile) {\n      throw new Error('MDE: No player profile provided for ' + options.type);\n    }\n    const isVideo = options.type === playerUtil.types.VIDEO;\n    // Work with deep clones so we do not modify the source profile.\n    const directPlay = $.extend(true, {}, profile.directPlay);\n    const directStream = $.extend(true, {}, profile.directStream);\n    // Apply the generic properties to each container specific profile.\n    // Merge quality options so the bitrate limit passed to the engine is\n    // considered alongside bitrate limits provided in the profile.\n    const generic = directPlay.generic;\n    if (generic) {\n      delete directPlay.generic;\n    }\n    let allowedAC3Containers = options.allowedAC3Containers;\n    const allowAC3AllContainers = allowedAC3Containers === '*';\n    if (!allowAC3AllContainers && allowedAC3Containers) {\n      allowedAC3Containers = Array.isArray(allowedAC3Containers)\n        ? allowedAC3Containers\n        : [allowedAC3Containers];\n    }\n    let allowedEAC3Containers = options.allowedEAC3Containers;\n    const allowEAC3AllContainers = allowedEAC3Containers === '*';\n    if (!allowEAC3AllContainers && allowedEAC3Containers) {\n      allowedEAC3Containers = Array.isArray(allowedEAC3Containers)\n        ? allowedEAC3Containers\n        : [allowedEAC3Containers];\n    }\n    let allowedDCAContainers = options.allowedDCAContainers;\n    const allowDCAAllContainers = allowedDCAContainers === '*';\n    if (!allowDCAAllContainers && allowedDCAContainers) {\n      allowedDCAContainers = Array.isArray(allowedDCAContainers)\n        ? allowedDCAContainers\n        : [allowedDCAContainers];\n    }\n    let allowedTrueHDContainers = options.allowedTrueHDContainers;\n    const allowTrueHDAllContainers = allowedTrueHDContainers === '*';\n    if (!allowTrueHDAllContainers && allowedTrueHDContainers) {\n      allowedTrueHDContainers = Array.isArray(allowedTrueHDContainers)\n        ? allowedTrueHDContainers\n        : [allowedTrueHDContainers];\n    }\n    _.each(\n      directPlay,\n      function (containerProfile, container) {\n        // First transform the container profiles.\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.mergeGenericOptions(containerProfile, generic);\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.mergeMaxQualityOptions(containerProfile, options);\n        if (\n          allowAC3AllContainers ||\n          (allowedAC3Containers && _.contains(allowedAC3Containers, container))\n        ) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.addAudioCodec('ac3', containerProfile, options);\n        }\n        if (\n          allowEAC3AllContainers ||\n          (allowedEAC3Containers &&\n            _.contains(allowedEAC3Containers, container))\n        ) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.addAudioCodec('eac3', containerProfile, options);\n        }\n        if (\n          allowDCAAllContainers ||\n          (allowedDCAContainers && _.contains(allowedDCAContainers, container))\n        ) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.addAudioCodec('dca', containerProfile, options);\n        }\n        if (\n          allowTrueHDAllContainers ||\n          (allowedTrueHDContainers &&\n            _.contains(allowedTrueHDContainers, container))\n        ) {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          this.addAudioCodec('truehd', containerProfile, options);\n        }\n        // Then transform the codec profiles.\n        const primaryStreamName = playerUtil.getStreamByType(options.type);\n        const primaryStreamProfile = containerProfile[primaryStreamName];\n        if (primaryStreamProfile) {\n          const primaryStreamCodecs = primaryStreamProfile.codecs;\n          _.each(\n            primaryStreamCodecs,\n            function (codecProfile, codecName) {\n              // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n              this.mergeMaxQualityOptions(codecProfile, options, true);\n              // Only merge video codec options when there is overlap between\n              // the profile and the options.\n              if (\n                options.videoCodecOptions &&\n                options.videoCodecOptions[codecName]\n              ) {\n                // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n                this.mergeCodecOptions(\n                  codecProfile,\n                  options.videoCodecOptions[codecName]\n                );\n              }\n            },\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this\n          );\n        }\n        const secondaryStreamProfile = isVideo && containerProfile.audio;\n        if (secondaryStreamProfile && options.audioCodecOptions) {\n          const secondaryStreamCodecs = secondaryStreamProfile.codecs;\n          _.each(\n            secondaryStreamCodecs,\n            function (codecProfile, codecName) {\n              // Only merge audio codec options when there is overlap between\n              // the profile and the options.\n              if (options.audioCodecOptions[codecName]) {\n                // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n                this.mergeCodecOptions(\n                  codecProfile,\n                  options.audioCodecOptions[codecName]\n                );\n              }\n            },\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this\n          );\n        }\n      },\n      this\n    );\n    // Finally transform the directStream profile.\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 3 arguments, but got 2.\n    this.mergeMaxQualityOptions(directStream, options);\n    if (isVideo) {\n      if (options.videoCodecOptions && directStream.video) {\n        _.each(\n          directStream.video.codecs,\n          function (codecProfile, codecName) {\n            if (options.videoCodecOptions[codecName]) {\n              // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n              this.mergeCodecOptions(\n                codecProfile,\n                options.videoCodecOptions[codecName]\n              );\n            }\n          },\n          this\n        );\n      }\n      if (options.audioCodecOptions && directStream.audio) {\n        _.each(\n          directStream.audio.codecs,\n          function (codecProfile, codecName) {\n            if (options.audioCodecOptions[codecName]) {\n              // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n              this.mergeCodecOptions(\n                codecProfile,\n                options.audioCodecOptions[codecName]\n              );\n            }\n          },\n          this\n        );\n      }\n    }\n    return {\n      directPlay: directPlay,\n      directStream: directStream,\n    };\n  },\n  mergeGenericOptions: function (profile: any, generic: any) {\n    if (!generic) {\n      return;\n    }\n    _.defaults(profile, _.omit(generic, 'video', 'audio'));\n    _.each(\n      ['audio', 'video'],\n      function (type) {\n        const genericByType = generic[type];\n        let profileByType = profile[type];\n        if (!genericByType) {\n          return;\n        }\n        if (!profileByType) {\n          profileByType = {};\n          profile[type] = profileByType;\n        }\n        // Assign all non-codec generic values. Codecs will be assigned later\n        // to avoid assigning their values by reference.\n        _.defaults(profileByType, _.omit(genericByType, 'codecs'));\n        if (genericByType.codecs) {\n          // Mix-in and create codecs entries in the profile based on generic.\n          _.each(\n            genericByType.codecs,\n            function (codecProfile, codecName) {\n              _.defaults(\n                // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n                this.ensureCodecs(codecName, profileByType),\n                codecProfile\n              );\n            },\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            this\n          );\n        }\n      },\n      this\n    );\n  },\n  mergeCodecOptions: function (codecProfile: any, codecOptions: any) {\n    _.each(\n      codecOptions,\n      function (value, key) {\n        // Intentionally overwrite existing values.\n        codecProfile[key] = value;\n      },\n      this\n    );\n  },\n  ensureCodecs: function (codecName: any, profile: any) {\n    if (!profile.codecs) {\n      profile.codecs = {};\n    }\n    if (!profile.codecs[codecName]) {\n      profile.codecs[codecName] = {};\n    }\n    return profile.codecs[codecName];\n  },\n  mergeMaxQualityOptions: function (\n    profile: any,\n    options: any,\n    isCodecProfile: any\n  ) {\n    const names = [\n      { option: 'bitrate', setting: 'maxBitrate' },\n      { option: 'videoResolution', setting: 'maxVideoResolution' },\n    ];\n    _.each(\n      names,\n      function (name) {\n        if (\n          (name as any).option === 'videoResolution' &&\n          options.type !== playerUtil.types.VIDEO\n        ) {\n          return;\n        }\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        const optionValue = this.getMaxQualityOption(\n          profile,\n          (name as any).option,\n          options\n        );\n        // Don't change anything if a value hasn't been specified.\n        if (optionValue == null) {\n          return;\n        }\n        const setting = (name as any).setting;\n        const primaryStreamName = playerUtil.getStreamByType(options.type);\n        if (profile.hasOwnProperty(setting)) {\n          profile[setting] = optionValue;\n        } else if (profile.hasOwnProperty(primaryStreamName)) {\n          profile[primaryStreamName][setting] = optionValue;\n        } else if (!isCodecProfile) {\n          profile[primaryStreamName] = {};\n          profile[primaryStreamName][setting] = optionValue;\n        }\n      },\n      this\n    );\n  },\n  getMaxQualityOption: function (profile: any, name: any, options: any) {\n    const quality = options.quality || {};\n    // bitrate -> maxBitrate\n    const maxName = 'max' + name.charAt(0).toUpperCase() + name.slice(1);\n    let maxOptionsValue = quality[name];\n    const maxProfileValue = this.getPrimaryStreamProperty(\n      profile,\n      maxName,\n      options\n    );\n    if (name === 'videoResolution' && maxOptionsValue) {\n      maxOptionsValue =\n        videoPlayerQualities.getResolutionFromSize(maxOptionsValue);\n    }\n    if (name === 'bitrate') {\n      const server = options.item.server;\n      const maxUploadBitrate = server.get('maxUploadBitrate');\n      if (\n        maxUploadBitrate &&\n        (!maxOptionsValue || maxUploadBitrate < maxOptionsValue)\n      ) {\n        maxOptionsValue = maxUploadBitrate;\n      }\n    }\n    if (maxOptionsValue || maxProfileValue) {\n      let maxValue;\n      // If both a max value is passed in the quality option and a max value\n      // is specified in the profile, take the lower of the two.\n      if (maxOptionsValue && maxProfileValue) {\n        maxValue = Math.min(maxOptionsValue, maxProfileValue);\n      } else {\n        maxValue = maxOptionsValue || maxProfileValue;\n      }\n      return maxValue;\n    }\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  addAudioCodec: function (codec: any, profile: any, options: any) {\n    profile.audio || (profile.audio = {});\n    this.ensureCodecs(codec, profile.audio);\n  },\n  analyzeMedia: function (media: any, profile: any, options: any) {\n    log.info('[MDE] Starting analysis of', this.getMediaTitle(media));\n    log('[MDE] Analyzing direct play');\n    const directPlayDecision = this.canDirectPlay(\n      media,\n      profile.directPlay,\n      options\n    );\n    if (!directPlayDecision.result) {\n      log('[MDE] Cannot direct play:', directPlayDecision.failedCheck);\n    }\n    const decision = {\n      finalProfile: profile,\n      transcodeServer: options.transcodeServer,\n      preferredDirectPlayProtocol: options.preferredDirectPlayProtocol,\n      item: options.item,\n      media: media,\n      canDirectPlay: directPlayDecision.result,\n      canDirectPlayFailedCheck: directPlayDecision.failedCheck,\n      // These properties are unused internally; eventually they should\n      // influence Media selection. These properties are however passed through\n      // for decision-based upsell logic.\n      canDisplayHDR: !!options.canDisplayHDR,\n      canDisplayDolbyVision: !!options.canDisplayDolbyVision,\n    };\n    // `transcoderOptions` may be a function that we need to pass the\n    // decision object to so it has a media item reference.\n    let transcoderOptions = options.transcoderOptions || {};\n    if (_.isFunction(transcoderOptions)) {\n      transcoderOptions = transcoderOptions(decision);\n    }\n    if (options.type === playerUtil.types.VIDEO) {\n      log('[MDE] Analyzing video direct stream');\n      const videoStream = getSelectedVideo(media);\n      if (videoStream) {\n        const directStreamDecision = this.canDirectStreamVideo(\n          videoStream,\n          profile.directStream.video,\n          options,\n          transcoderOptions\n        );\n        (decision as any).canDirectStreamVideo = directStreamDecision.result;\n        (decision as any).canDirectStreamVideoFailedCheck =\n          directStreamDecision.failedCheck;\n      }\n    }\n    if (options.type !== playerUtil.types.PHOTO) {\n      log('[MDE] Analyzing audio direct stream');\n      const audioStream = getSelectedAudio(media);\n      if (audioStream) {\n        const directStreamDecision = this.canDirectStreamAudio(\n          audioStream,\n          profile.directStream.audio,\n          options,\n          transcoderOptions\n        );\n        (decision as any).canDirectStreamAudio = directStreamDecision.result;\n        (decision as any).canDirectStreamAudioFailedCheck =\n          directStreamDecision.failedCheck;\n      }\n    }\n    // Decide if we are going to use soft subtitles or burn subtitles into\n    // the video. This could affect the `canDirectPlay` and\n    // `canDirectStreamVideo` decisions.\n    const selectedSubtitles = getSelectedSubtitles(decision.media);\n    if (selectedSubtitles) {\n      log('[MDE] Analyzing subtitles');\n      _.extend(decision, this.analyzeSubtitles(selectedSubtitles, options));\n    }\n    // Verify that the item has no missing parts. If the item cannot direct\n    // play, check that the server can transcode. If the server cannot\n    // remux, check that the server is not remux only.\n    log('[MDE] Analyzing playability');\n    _.extend(decision, this.canPlay(decision, options));\n    // Extend the decision with the effective bitrate and resolution of the\n    // media item. These could be lower than the media item's bitrate and\n    // resolution if we are transcoding down to a lower quality.\n    _.extend(\n      decision,\n      this.getEffectiveQuality(media, profile.directStream, options)\n    );\n    log(\n      '[MDE] Finished analysis of:',\n      this.getMediaTitle(media),\n      this.getDecisionLogs(decision)\n    );\n    return decision;\n  },\n  canDirectPlay: function (media: any, directPlayProfile: any, options: any) {\n    if (options.forceDirectPlay) {\n      log('[MDE] Direct play forced');\n      return { result: true };\n    }\n    if (\n      options.allowDirectPlay === false &&\n      !options.transcodeServer.get('isCloud')\n    ) {\n      log.warn('[MDE] Direct play failed; option is disabled');\n      return { result: false, failedCheck: 'allowDirectPlay' };\n    }\n    if (\n      options.type === playerUtil.types.VIDEO &&\n      !this.canDirectPlayVideo(media, options)\n    ) {\n      return { result: false, failedCheck: 'canDirectPlayVideo' };\n    }\n    const containerProfile = directPlayProfile[media.container];\n    if (!containerProfile) {\n      log.warn(\n        '[MDE] Direct play failed; unsupported container:',\n        media.container\n      );\n      return { result: false, failedCheck: 'containerProfile' };\n    }\n    const keys = _.keys(containerProfile);\n    if (keys && keys.length) {\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const key = keys[i];\n        const profileValue = containerProfile[key];\n        // Check the mime type with a canPlayType test.\n        if (key === 'mimeType') {\n          if (\n            !options.skipCanPlayTypeTest &&\n            !this.canPlayType(\n              playerUtil.getElementByType(options.type),\n              profileValue\n            )\n          ) {\n            log.warn(\n              '[MDE] Direct play failed; canPlayType test, %s: %s',\n              key,\n              profileValue\n            );\n            return { result: false, failedCheck: 'canPlayType' };\n          }\n          // We can perform stream specific tests for video and audio.\n        } else if (key === 'video' || key === 'audio') {\n          // The html video element does not respect our selected audio\n          // stream. If the first stream does not match the selected stream,\n          // we should transcode unless explicitly told that the player\n          // allows multi-track audio.\n          const streamType = streamTypes.get(key);\n          const streams = getStreams(media, { streamType: streamType.id });\n          const selectedStream =\n            key === 'video' ? getSelectedVideo(media) : getSelectedAudio(media);\n          if (!selectedStream) {\n            log.warn(\n              '[MDE] No stream selected; will not be able to analyze stream codecs'\n            );\n            continue;\n          }\n          const requiresMultiTrackAudio =\n            key === 'audio' && selectedStream !== streams[0];\n          if (requiresMultiTrackAudio && !options.allowMultiTrackAudio) {\n            log.warn('[MDE] Direct play failed; multi-track audio is required');\n            return { result: false, failedCheck: 'allowMultiTrackAudio' };\n          }\n          const analyzeStream = this.analyzeStream(\n            selectedStream,\n            profileValue,\n            options\n          );\n          if (!analyzeStream.result) {\n            return { result: false, failedCheck: analyzeStream.failedCheck };\n          }\n        } else if (key === 'photo') {\n          const analyzeStream = this.analyzeStream(\n            _.first(media.Part),\n            profileValue,\n            options\n          );\n          if (!analyzeStream.result) {\n            return { result: false, failedCheck: analyzeStream.failedCheck };\n          }\n        } else if (!this.validateProfileProperty(key, profileValue, media)) {\n          return {\n            result: false,\n            failedCheck: `validateProfileProperty:${key}`,\n          };\n        }\n      }\n      return { result: true };\n    }\n    // Allow direct play if the container exists, but no limitations have\n    // been provided for the container in the profile.\n    return { result: true };\n  },\n  canDirectPlayVideo: function (media: any, options: any) {\n    // Never try to direct play if the option is disabled.\n    if (!options.allowDirectPlay && !options.transcodeServer.get('isCloud')) {\n      log.warn('[MDE] Direct play failed; option is disabled');\n      return false;\n    }\n    // Do not allow direct play of HLS videos without native HLS support.\n    if (media.protocol === 'hls' && !options.hasNativeHLS) {\n      log.warn('[MDE] Direct play failed; cannot play HLS');\n      return false;\n    }\n    // Do not allow direct play of FLV videos without Flash.\n    if (media.container === 'flv' && !options.hasFlash) {\n      log.warn('[MDE] Direct play failed; cannot play FLV');\n      return false;\n    }\n    // Do not allow direct play of DASH videos without DASH support.\n    if (media.protocol === 'dash' && !options.hasDASH) {\n      log.warn('[MDE] Direct play failed; cannot play DASH');\n      return false;\n    }\n    return true;\n  },\n  canPlayType: function (elementType: any, mimeType: any) {\n    if (elementType === playerUtil.elements.PHOTO) {\n      return true;\n    }\n    const el = document.createElement(elementType);\n    return !!(el.canPlayType && el.canPlayType(mimeType).replace(/^no$/, ''));\n  },\n  canDirectStreamVideo: function (\n    stream: any,\n    streamProfile: any,\n    options: any,\n    transcoderOptions: any\n  ) {\n    // Never try to direct stream video if the option is disabled.\n    if (\n      !transcoderOptions.directStream &&\n      !options.transcodeServer.get('isCloud')\n    ) {\n      log.warn('[MDE] Direct stream video failed; option is disabled');\n      return { result: false, failedCheck: 'options:directStream' };\n    }\n    return this.analyzeStream(stream, streamProfile, options);\n  },\n  canDirectStreamAudio: function (\n    stream: any,\n    streamProfile: any,\n    options: any,\n    transcoderOptions: any\n  ) {\n    // Never try to direct stream audio if the option is disabled.\n    if (\n      !transcoderOptions.directStreamAudio &&\n      !options.transcodeServer.get('isCloud')\n    ) {\n      log.warn('[MDE] Direct stream audio failed; option is disabled');\n      return { result: false, failedCheck: 'options:directStreamAudio' };\n    }\n    return this.analyzeStream(stream, streamProfile, options);\n  },\n  // @ts-expect-error ts-migrate(7023) FIXME: 'analyzeStream' implicitly has return type 'any' b... Remove this comment to see the full error message\n  analyzeStream: function (stream: any, streamProfile: any, options: any) {\n    const codecProfile =\n      streamProfile &&\n      streamProfile.codecs &&\n      streamProfile.codecs[stream.codec];\n    for (const key in streamProfile) {\n      const profileValue = streamProfile[key];\n      if (key === 'codecs') {\n        const codecValue = profileValue[stream.codec];\n        if (!codecValue) {\n          return {\n            result: false,\n            failedCheck: `noCodecInProfile:${stream.codec}`,\n          };\n        }\n        // @ts-expect-error ts-migrate(7022) FIXME: 'analyzeStream' implicitly has type 'any' because ... Remove this comment to see the full error message\n        const analyzeStream = this.analyzeStream(stream, codecValue, options);\n        if (!analyzeStream.result) {\n          return { result: false, failedCheck: analyzeStream.failedCheck };\n        }\n      } else if (\n        !(codecProfile && key in codecProfile) &&\n        !this.validateProfileProperty(key, profileValue, stream)\n      ) {\n        return { result: false, failedCheck: `validateProfileProperty:${key}` };\n      }\n    }\n    return { result: true };\n  },\n  validateProfileProperty: function (\n    propertyName: any,\n    profileValue: any,\n    source: any\n  ) {\n    // Any key that starts with \"max\" must use the greater than operator.\n    // Otherwise, use a basic equality test and check if the profile value\n    // is an array that contains the property.\n    const boundParam = propertyName.match(/^(min|max)(\\w)(\\w*)/);\n    let value;\n    if (boundParam) {\n      const isLowerBound = boundParam[1] === 'min';\n      const isUpperBound = boundParam[1] === 'max';\n      // Fix the casing. maxBitDepth -> bitDepth\n      propertyName = boundParam[2].toLowerCase() + boundParam[3];\n      value = source[propertyName];\n      if (value == null) {\n        log.warn(\n          '[MDE] Unable to validate %s; re-analyze the media if possible',\n          propertyName\n        );\n      }\n      // We can't directly compare resolution strings, so convert to height\n      // values that can be compared.\n      if (value != null && propertyName === 'videoResolution') {\n        value = videoPlayerQualities.getHeightFromResolution(value);\n        profileValue =\n          videoPlayerQualities.getHeightFromResolution(profileValue);\n      }\n      if (value != null) {\n        if (isLowerBound && value < profileValue) {\n          log.warn(\n            '[MDE] Invalid profile property; %s: %s < %s',\n            propertyName,\n            value,\n            profileValue\n          );\n          return false;\n        }\n        if (isUpperBound && value > profileValue) {\n          log.warn(\n            '[MDE] Invalid profile property; %s: %s > %s',\n            propertyName,\n            value,\n            profileValue\n          );\n          return false;\n        }\n      }\n    } else {\n      value = source[propertyName];\n      if (value == null) {\n        log.warn(\n          '[MDE] Unable to validate %s; re-analyze the media if possible',\n          propertyName\n        );\n      }\n      if (value !== profileValue && !_.contains(profileValue, value)) {\n        log.warn(\n          '[MDE] Invalid profile property; %s: %s !== %s',\n          propertyName,\n          value,\n          profileValue\n        );\n        return false;\n      }\n    }\n    return true;\n  },\n  analyzeSubtitles: function (subtitles: any, options: any) {\n    // Retain the current behavior of always burning subtitles into the\n    // video unless specified otherwise.\n    const burnLevel = options.subtitlesBurnLevel || subtitlesBurnLevels.ALWAYS;\n    const codec = subtitles.codec;\n    const isVodLike =\n      !!subtitles.key &&\n      codec === undefined &&\n      options.transcodeServer.get('isCloud');\n    const isCloudLiveTvWithSubtitles =\n      options.transcodeServer.get('isCloud') &&\n      (codec === 'vtt' || codec === 'eia_608');\n    log('[MDE] Subtitle codec:', codec);\n    log('[MDE] Burn level:', burnLevel);\n    if (isVodLike) {\n      log('[MDE] Using sidecar subtitles %s', subtitles.key);\n      // Allow VOD sidecar SRT subs to be direct played. Inject this test early\n      // to a) ALWAYS ignore subtitles burn level and b) avoid the `supports`\n      // calls below returning `true` incorrectly when the cloud server is\n      // involved.\n      return {\n        useSidecarSrtSubtitles: true,\n      };\n    }\n    if (isCloudLiveTvWithSubtitles) {\n      // Similar to the VOD check, allow LTVoP streams to be direct played.\n      return {\n        canDirectPlay: true,\n      };\n    }\n    if (burnLevel === subtitlesBurnLevels.NEVER) {\n      // If we've insisted never to burn, do not attempt soft subs.\n      // This will allow the player to handle the selected subtitles itself.\n      return {\n        useSoftSubtitles: false,\n      };\n    }\n    if (burnLevel === subtitlesBurnLevels.ALWAYS) {\n      log.warn('[MDE] Direct play failed; asked to always burn subtitles');\n      return {\n        useSoftSubtitles: false,\n        canDirectPlay: false,\n        canDirectPlayFailedCheck: 'subtitles:burnLevelAlways',\n        canDirectStreamVideo: false,\n      };\n    }\n    if (!options.transcodeServer.supports('softSubtitles')) {\n      // Server needs to meet a minimum version to use soft subtitles\n      log.warn(\n        '[MDE] Direct play failed; server support requires burn subtitles'\n      );\n      log.warn('[MDE] Soft subtitles failed; server version');\n      return {\n        useSoftSubtitles: false,\n        canDirectPlay: false,\n        canDirectPlayFailedCheck: 'subtitles:softSubtitlesUnsupported',\n        canDirectStreamVideo: false,\n      };\n    }\n    if (isBitmapSubtitles(codec)) {\n      // Bitmap subtitles, as opposed to other text-based formats, must be\n      // burned in to the video.\n      log.warn('[MDE] Soft subtitles failed; bitmap subtitles');\n      return {\n        useSoftSubtitles: false,\n        canDirectPlay: false,\n        canDirectPlayFailedCheck: 'subtitles',\n        canDirectStreamVideo: false,\n      };\n    } else if (\n      /^(ass|ssa)$/i.test(codec) &&\n      burnLevel === subtitlesBurnLevels.AUTO\n    ) {\n      // Auto should burn in subtitles so we can be sure to display ASS\n      // subtitles with the proper styling.\n      log.warn('[MDE] Soft subtitles failed; ASS subtitles');\n      return {\n        useSoftSubtitles: false,\n        canDirectPlay: false,\n        canDirectPlayFailedCheck: 'subtitles',\n        canDirectStreamVideo: false,\n      };\n    } else if (/^eia_608$/i.test(codec)) {\n      log.warn('[MDE] Soft subtitles failed; Closed captioning');\n      return {\n        useSoftSubtitles: false,\n        canDirectPlay: false,\n        canDirectPlayFailedCheck: 'subtitles',\n        canDirectStreamVideo: false,\n      };\n    } else if (\n      options.transcodeServer.supports('softSubtitlesWithDirectPlay')\n    ) {\n      if (options.allowDirectStreamVideoWithSoftSubtitles) {\n        __DEV__ &&\n          assert(\n            options.allowDirectStreamVideoWithSoftSubtitles != null,\n            'options.allowDirectStreamVideoWithSoftSubtitles must be set'\n          );\n        return {\n          useSoftSubtitles: true,\n        };\n      }\n      return {\n        useSoftSubtitles: true,\n        canDirectStreamVideo: false,\n      };\n    } else {\n      // The user's PMS version does not support direct play with soft subtitles.\n      log.warn('[MDE] Direct play failed; %s subtitles', codec);\n      if (options.allowDirectStreamVideoWithSoftSubtitles) {\n        return {\n          useSoftSubtitles: true,\n          canDirectPlay: false,\n          canDirectPlayFailedCheck: 'subtitles',\n        };\n      }\n      return {\n        useSoftSubtitles: false,\n        canDirectPlay: false,\n        canDirectPlayFailedCheck: 'subtitles',\n        canDirectStreamVideo: false,\n      };\n    }\n  },\n  canPlay: function (decision: any, options: any) {\n    const errorMessage =\n      this.validateParts(decision, options) ||\n      this.validateTranscoder(decision, options);\n    if (errorMessage) {\n      return {\n        canPlay: false,\n        errorMessage: errorMessage,\n      };\n    }\n    return { canPlay: true };\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  validateParts: function (decision: any, options: any) {\n    const missingParts = getMissingParts(decision.media);\n    if (!missingParts.length) {\n      return;\n    }\n    log.warn('[MDE] Unable to play; missing parts');\n    const missingPart = _.first(missingParts);\n    if (Number(missingPart.exists) === 1) {\n      return t('Please check the permissions for this file.');\n    } else {\n      return t(\n        'Please check that the file exists and the necessary drive is mounted.'\n      );\n    }\n  },\n  validateTranscoder: function (decision: any, options: any) {\n    if (decision.canDirectPlay) {\n      return;\n    }\n    const type = options.type;\n    const isMusic = type === playerUtil.types.MUSIC;\n    const isVideo = type === playerUtil.types.VIDEO;\n    const transcodeServer = options.transcodeServer;\n    const transcoderAudio = transcodeServer.get('transcoderAudio');\n    const transcoderVideo = transcodeServer.get('transcoderVideo');\n    let notPowerfulEnoughMessage;\n    // With dummy video music transcoding the `type` will be video and the\n    // item will be a music track. Handle transcode requests for the music\n    // `type` and any playback of a music track the same way.\n    if (isMusic || options.item.get('type') === 'track') {\n      notPowerfulEnoughMessage = t(\n        'This server is not powerful enough to convert audio.'\n      );\n      if (isVideo && !transcoderVideo) {\n        // Ignore the `transcoderVideoRemuxOnly` flag for transcoding a\n        // track to dummy video.\n        // See: https://plex.slack.com/archives/transcoder/p1458608327000385\n        log.warn(\n          '[MDE] Unable to play; server unable to transcode music using video transcoder'\n        );\n        return notPowerfulEnoughMessage;\n      }\n      if (isMusic && !transcoderAudio) {\n        log.warn(\n          '[MDE] Unable to play; server unable to transcode music using audio transcoder'\n        );\n        return notPowerfulEnoughMessage;\n      }\n    } else if (isVideo) {\n      const tryIncreasingQualityMessage = t(\n        'This server is not powerful enough to convert video. You may be able to enable playback by increasing your quality setting.'\n      );\n      const relayLimitationMessage = t(\n        'This server is not powerful enough to convert video. Playback qualities are limited because an indirect connection is being used.'\n      );\n      const canTranscodeVideo =\n        decision.canDirectStreamVideo ||\n        !transcodeServer.get('transcoderVideoRemuxOnly');\n      notPowerfulEnoughMessage = t(\n        'This server is not powerful enough to convert video.'\n      );\n      if (!transcoderVideo || !canTranscodeVideo) {\n        log.warn('[MDE] Unable to play; server unable to transcode video');\n        if (options.quality) {\n          // If original quality (index -1) was already selected\n          // tell the user we can't transcode\n          if (options.quality.index === videoPlayerQualities.ORIGINAL) {\n            return notPowerfulEnoughMessage;\n          }\n          // Check if we can direct play original quality\n          // so we can give a better error message.\n          const originalDecisionOptions = _.clone(options);\n          originalDecisionOptions.quality = _.extend(\n            { index: videoPlayerQualities.ORIGINAL },\n            _.pick(options.quality, 'attribute')\n          );\n          if (this.getMediaDecision(originalDecisionOptions).canDirectPlay) {\n            return tryIncreasingQualityMessage;\n          }\n          if (transcodeServer.get('maxUploadBitrateReason') === 'relay') {\n            return relayLimitationMessage;\n          }\n          return notPowerfulEnoughMessage;\n        }\n        return tryIncreasingQualityMessage;\n      }\n    }\n\n    return;\n  },\n  getEffectiveQuality: function (\n    media: any,\n    directStreamProfile: any,\n    options: any\n  ) {\n    const quality = options.quality;\n    const effectiveQuality = {};\n    const transcoderQualityOptions = {};\n    if (!media.bitrate) {\n      log.warn(\n        '[MDE] Unable to determine effective quality; re-analyze the media if possible'\n      );\n    }\n    // If an item is going to be transcoded to a lower quality, we should\n    // consider that when comparing resolutions and bitrates between\n    // decisions. A 1080p video should not be selected because it's\n    // resolution is higher than a 720p video if it's going to be\n    // transcoded to 720p anyway.\n    if (options.type === playerUtil.types.VIDEO) {\n      (effectiveQuality as any).bitrate = media.bitrate;\n      (effectiveQuality as any).videoResolution =\n        videoPlayerQualities.getHeightFromResolution(media.videoResolution);\n      const maxVideoBitrate = this.getPrimaryStreamProperty(\n        directStreamProfile,\n        'maxBitrate',\n        options\n      );\n      if (maxVideoBitrate) {\n        const videoStream = getSelectedVideo(media);\n        const videoBitrate = videoStream ? videoStream.bitrate : media.bitrate;\n        (effectiveQuality as any).bitrate = Math.min(\n          videoBitrate,\n          maxVideoBitrate\n        );\n        (transcoderQualityOptions as any).maxVideoBitrate = maxVideoBitrate;\n      }\n      if (quality) {\n        // We need to have an integer value that can compare to the video's\n        // resolution. First convert to a resolution string and then to the\n        // comparable height.\n        const videoResolution = quality.videoResolution;\n        if (videoResolution) {\n          const maxResolution = videoPlayerQualities.getResolutionFromSize(\n            quality.videoResolution\n          );\n          const maxHeight =\n            videoPlayerQualities.getHeightFromResolution(maxResolution);\n          (effectiveQuality as any).videoResolution = Math.min(\n            (effectiveQuality as any).videoResolution,\n            maxHeight\n          );\n        }\n      }\n    } else if (options.type === playerUtil.types.MUSIC) {\n      (effectiveQuality as any).bitrate = media.bitrate;\n      const maxAudioBitrate = this.getPrimaryStreamProperty(\n        directStreamProfile,\n        'maxBitrate',\n        options\n      );\n      if (maxAudioBitrate) {\n        (effectiveQuality as any).bitrate = Math.min(\n          media.bitrate,\n          maxAudioBitrate\n        );\n        (transcoderQualityOptions as any).musicBitrate = maxAudioBitrate;\n      }\n    }\n    (effectiveQuality as any).transcoderQualityOptions =\n      transcoderQualityOptions;\n    return effectiveQuality;\n  },\n  getPrimaryStreamProperty: function (\n    profile: any,\n    propertyName: any,\n    options: any\n  ) {\n    // First look for the property at the root, and then look in the stream\n    // type specific object (e.g. profile.video and profile.audio).\n    const primaryStreamName = playerUtil.getStreamByType(options.type);\n    const primaryStreamProfile = profile[primaryStreamName];\n    let value = profile[propertyName];\n    if (value == null && primaryStreamProfile) {\n      value = primaryStreamProfile[propertyName];\n    }\n    return value;\n  },\n  getMediaTitle: function (media: any) {\n    let title =\n      media.title || media.videoResolution || media.bitrate || media.container;\n    const details = _.compact([\n      media.container,\n      media.videoCodec,\n      media.audioCodec,\n    ]);\n    const video = getSelectedVideo(media);\n    if (video) {\n      details.push(video.level, video.profile);\n    }\n    if (details.length) {\n      title += ' (' + details.join(', ') + ')';\n    }\n    return title;\n  },\n  getDecisionLogs: function (decision: any) {\n    const logs = {\n      canPlay: decision.canPlay,\n      canDirectPlay: decision.canDirectPlay,\n    };\n    const canDirectStreamVideo = decision.canDirectStreamVideo;\n    if (canDirectStreamVideo != null) {\n      (logs as any).canDirectStreamVideo = canDirectStreamVideo;\n    }\n    const canDirectStreamAudio = decision.canDirectStreamAudio;\n    if (canDirectStreamAudio != null) {\n      (logs as any).canDirectStreamAudio = canDirectStreamAudio;\n    }\n    const useSoftSubtitles = decision.useSoftSubtitles;\n    if (useSoftSubtitles != null) {\n      (logs as any).useSoftSubtitles = useSoftSubtitles;\n    }\n    const bitrate = decision.bitrate;\n    if (bitrate != null && !_.isNaN(bitrate)) {\n      (logs as any).bitrate = bitrate;\n    }\n    const videoResolution = decision.videoResolution;\n    if (videoResolution != null && !_.isNaN(videoResolution)) {\n      (logs as any).videoResolution = videoResolution;\n    }\n    return logs;\n  },\n  //\n  // Sorting\n  getBestDecision: function (decisions: any) {\n    const bestDecision = _.last(this.sortDecisions(decisions));\n    log(\n      '[MDE] Selected %s to play:',\n      this.getMediaTitle(bestDecision.media),\n      this.getDecisionLogs(bestDecision)\n    );\n    return bestDecision;\n  },\n  sortDecisions: function (decisions: any) {\n    // Decisions are sorted from worst choice to best. Sort functions are\n    // from least important to most important.\n    // Return null values instead of undefined so `sortBy` behaves reliably.\n    // Undefined values are sorted after false and true, while null is\n    // sorted before.\n    //\n    // [null, false, true, undefined]\n    // [-1, null, 0, 1, undefined]\n    return _.chain(decisions)\n      .reverse() // If all else is equal, prefer the first item.\n      .sortBy(this.preferHigherBitrate, this)\n      .sortBy(this.preferMoreAudioChannels, this)\n      .sortBy(this.preferDirectStreamAudio, this)\n      .sortBy(this.preferHigherResolution, this)\n      .sortBy(this.preferDirectStreamVideo, this)\n      .sortBy(this.preferDirectPlayMatchingPreferredProtocol, this)\n      .sortBy(this.preferDirectPlay, this)\n      .sortBy(this.preferHigherResolutionIfCapable, this)\n      .sortBy(this.preferCloudIfRemote, this)\n      .sortBy(this.preferDirectPlayOrDirectStreamIfUHD, this)\n      .sortBy(this.preferPlayable, this)\n      .value();\n  },\n  preferPlayable: function (decision: any) {\n    if (decision.canPlay === undefined) {\n      return null;\n    }\n    return decision.canPlay;\n  },\n  preferDirectPlayOrDirectStreamIfUHD: function (decision: any) {\n    const height = decision.media.height;\n    if (height === undefined) {\n      return null;\n    }\n    // Transcoding >= 4K content is infrequently practical.\n    // See: https://github.com/plexinc/plex-web-client/issues/15440\n    const description = videoPlayerQualities.getResolutionFromHeight(height);\n    // Expression is case insensitive as our utilities mix capitalization.\n    return /^\\d+k$/i.test(description)\n      ? decision.canDirectPlay || decision.canDirectStreamVideo\n      : true;\n  },\n  preferCloudIfRemote: function (decision: any) {\n    // If local to the server, prefer the original media item or a local\n    // proxy. If remote, prefer a cloud proxy.\n    const isCloudProxy = decision.media.proxyType === proxyTypes.CLOUD;\n    if (decision.transcodeServer.get('isPrivateConnection')) {\n      return !isCloudProxy;\n    } else {\n      return isCloudProxy;\n    }\n  },\n  preferHigherResolutionIfCapable: function (decision: any) {\n    // If the transcode server can fully transcode video and the item can\n    // direct play or direct stream, prefer the higher resolution item.\n    const transcodeServer = decision.transcodeServer;\n    const canTranscode = transcodeServer.get('transcoderVideo');\n    const canRemuxOnly = transcodeServer.get('transcoderVideoRemuxOnly');\n    if (\n      canTranscode &&\n      !canRemuxOnly &&\n      (decision.canDirectPlay || decision.canDirectStreamVideo)\n    ) {\n      return this.preferHigherResolution(decision);\n    } else {\n      return null;\n    }\n  },\n  preferDirectPlay: function (decision: any) {\n    if (decision.canDirectPlay === undefined) {\n      return null;\n    }\n    return decision.canDirectPlay;\n  },\n  preferDirectPlayMatchingPreferredProtocol: function (decision: any) {\n    if (\n      !decision.canDirectPlay ||\n      !decision.media.protocol ||\n      !decision.preferredDirectPlayProtocol\n    ) {\n      return null;\n    }\n    return decision.media.protocol === decision.preferredDirectPlayProtocol;\n  },\n  preferDirectStreamVideo: function (decision: any) {\n    if (decision.canDirectStreamVideo === undefined) {\n      return null;\n    }\n    return decision.canDirectStreamVideo;\n  },\n  preferHigherResolution: function (decision: any) {\n    // Use the effective quality determined and set on the decision.\n    if (decision.videoResolution === undefined) {\n      return null;\n    }\n    return decision.videoResolution;\n  },\n  preferDirectStreamAudio: function (decision: any) {\n    if (decision.canDirectStreamAudio === undefined) {\n      return null;\n    }\n    return decision.canDirectStreamAudio;\n  },\n  preferMoreAudioChannels: function (decision: any) {\n    const audioChannels = decision.media.audioChannels;\n    if (audioChannels === undefined) {\n      return null;\n    }\n    return audioChannels;\n  },\n  preferHigherBitrate: function (decision: any) {\n    // Use the effective quality determined and set on the decision.\n    if (decision.bitrate === undefined) {\n      return null;\n    }\n    return decision.bitrate;\n  },\n};\nexport default mediaDecisionEngine;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport default function isBitmapSubtitles(codec: any) {\n  return /^(idx|pgs|vobsub)$/i.test(codec);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\n\nfunction getMissingParts(medias: any) {\n  const missing: any = [];\n\n  if (!Array.isArray(medias)) {\n    medias = [medias];\n  }\n\n  _.each(medias, (media) => {\n    const parts = media.Part;\n    if (!parts) {\n      return;\n    }\n\n    _.each(parts, (part) => {\n      if (part.exists === false || part.accessible === false) {\n        missing.push(part);\n      }\n    });\n  });\n\n  return missing;\n}\n\nexport default getMissingParts;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport HubCollection from 'app/js/models/metadata/HubCollection';\nimport MetadataListModel from 'app/js/models/metadata/MetadataListModel';\nimport MetadataModel from 'app/js/models/metadata/MetadataModel';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createActionHandler from 'app/js/stores/actions/createActionHandler';\nimport createFetchHandler from 'app/js/stores/actions/helpers/createFetchHandler';\nimport fetchPrePlayMetadataItemHelper from 'app/js/stores/actions/helpers/player/fetchPrePlayMetadataItem';\nimport hasUserFeature from 'app/js/stores/actions/helpers/user/hasUserFeature';\nimport {\n  REPOPULATE_METADATA_ITEM,\n  repopulateMetadataItem,\n} from 'app/js/stores/actions/metadata/metadataActions';\nimport {\n  FINISH_ACTIVITY,\n  UPDATE_ACTIVITY,\n} from 'app/js/stores/actions/serverActions';\nimport { REPOPULATE_PAGE } from 'app/js/stores/actions/ui/uiActions';\nimport { saveExperienceSettings } from 'app/js/stores/actions/userActions';\nimport * as features from 'app/js/utils/constants/user/features';\nimport mediaDecisionEngine from 'app/js/utils/mediaDecisionEngine';\nimport videoPlayerQualities from 'app/js/utils/player/videoPlayerQualities';\nimport * as activityTypes from 'app/js/utils/server/activityTypes';\nimport {\n  findMetadataItemModel,\n  findProviderModel,\n  findServerModel,\n  tryFindMetadataItemModel,\n} from 'app/js/utils/state/modelFinders';\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\nimport path from 'app/js/utils/url/path';\nimport xhrErrorFilter from 'app/js/utils/xhr/xhrErrorFilter';\n\n//\n// Action Types\n\nexport const INIT_PRE_PLAY_PAGE = 'INIT_PRE_PLAY_PAGE';\nexport const INIT_PRE_PLAY_DESCENDANT_LIST = 'INIT_PRE_PLAY_DESCENDANT_LIST';\nexport const INIT_PRE_PLAY_SIBLING_LIST = 'INIT_PRE_PLAY_SIBLING_LIST';\nexport const INIT_PRE_PLAY_AUGMENTED_HUBS = 'INIT_PRE_PLAY_AUGMENTED_HUBS';\nexport const PRE_FETCH_PRE_PLAY_METADATA_ITEM =\n  'PRE_FETCH_PRE_PLAY_METADATA_ITEM';\nexport const FETCH_PRE_PLAY_METADATA_ITEM = 'FETCH_PRE_PLAY_METADATA_ITEM';\nexport const FETCH_PRE_PLAY_RELATED_HUBS = 'FETCH_PRE_PLAY_RELATED_HUBS';\nexport const FETCH_PRE_PLAY_AUGMENTED_HUBS = 'FETCH_PRE_PLAY_AUGMENTED_HUBS';\nexport const MAKE_PRE_PLAY_VIDEO_DECISION = 'MAKE_PRE_PLAY_VIDEO_DECISION';\nexport const REPOPULATE_PRE_PLAY_POPULAR_TRACKS =\n  'REPOPULATE_PRE_PLAY_POPULAR_TRACKS';\n\n//\n// Action Creators\n\nexport const initPrePlayPage = createActionCreator(INIT_PRE_PLAY_PAGE);\nexport const initPrePlayDescendantList = createActionCreator(\n  INIT_PRE_PLAY_DESCENDANT_LIST\n);\nexport const initPrePlaySiblingList = createActionCreator(\n  INIT_PRE_PLAY_SIBLING_LIST\n);\nexport const initPrePlayAugmentedHubs = createActionCreator(\n  INIT_PRE_PLAY_AUGMENTED_HUBS\n);\nexport const preFetchPrePlayMetadataItem = createActionCreator(\n  PRE_FETCH_PRE_PLAY_METADATA_ITEM\n);\nexport const fetchPrePlayMetadataItem = createActionCreator(\n  FETCH_PRE_PLAY_METADATA_ITEM\n);\nexport const fetchPrePlayRelatedHubs = createActionCreator(\n  FETCH_PRE_PLAY_RELATED_HUBS\n);\nexport const fetchPrePlayAugmentedHubs = createActionCreator(\n  FETCH_PRE_PLAY_AUGMENTED_HUBS\n);\nexport const makePrePlayVideoDecision = createActionCreator(\n  MAKE_PRE_PLAY_VIDEO_DECISION\n);\nexport const repopulatePrePlayPopularTracks = createActionCreator(\n  REPOPULATE_PRE_PLAY_POPULAR_TRACKS\n);\n\n//\n// Helpers\n\nfunction findPrePlayPageModel(appModel: any) {\n  return appModel.get('ui').get('prePlayPage');\n}\n\nfunction isMetadataForPage(appModel: any, payload: any) {\n  const { metadataItemEntityID, containerKeyPattern } = payload;\n\n  if (containerKeyPattern) {\n    return false;\n  }\n\n  const serverModel = findServerModel(appModel, payload);\n  const prePlayPageModel = findPrePlayPageModel(appModel);\n  const metadataItemModel = prePlayPageModel.get('metadataItem');\n\n  if (!metadataItemModel || metadataItemModel.server !== serverModel) {\n    return false;\n  }\n\n  if (\n    metadataItemEntityID &&\n    metadataItemModel.entityID() !== metadataItemEntityID\n  ) {\n    return false;\n  }\n\n  return true;\n}\n\n// @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\nfunction repopulatePageChildren(appModel: any, payload: any, dispatch: any) {\n  const prePlayPageModel = findPrePlayPageModel(appModel);\n\n  const relatedHubs = prePlayPageModel.get('relatedHubs');\n\n  if (relatedHubs) {\n    dispatch(fetchPrePlayRelatedHubs());\n  }\n}\n\nfunction setFileUnavailable(appModel: any, payload: any) {\n  const serverModel = findServerModel(appModel, payload);\n  const prePlayPageModel = findPrePlayPageModel(appModel);\n  const metadataItem = prePlayPageModel.get('metadataItem');\n\n  if (!metadataItem || metadataItem.server !== serverModel) {\n    return;\n  }\n\n  const context = payload.activity.Context;\n\n  if (!context || context.key !== metadataItem.get('key')) {\n    return;\n  }\n\n  if (context.exists == null && context.accessible == null) {\n    return;\n  }\n\n  const isFileUnavailable = !context.exists || !context.accessible;\n  prePlayPageModel.set('isFileUnavailable', isFileUnavailable);\n\n  if (isFileUnavailable) {\n    // `fetchPrePlayMetadataItemHelper` flips `isPreFetched` to `true` when the\n    // request completes. If the file is unavailable the decision will fail\n    // so we need to flip `isPreFetched` back to `false` so that we can check\n    // if the file exists again if we retry.\n    // Deferred to avoid race condition with metadataItem.fetch promise.\n    window.setTimeout(() => {\n      metadataItem.set('isPreFetched', false);\n    }, 0);\n  }\n}\n\nexport const prePlayPageActionHandlers = createActionHandler({\n  [INIT_PRE_PLAY_PAGE](appModel: any, payload: any) {\n    const prePlayPageModel = findPrePlayPageModel(appModel);\n    const server = findServerModel(appModel, payload);\n    const provider = findProviderModel(appModel, payload);\n    const { providerEntityID, metadataKey } = payload;\n\n    if (\n      providerEntityID === prePlayPageModel.get('providerEntityID') &&\n      metadataKey === prePlayPageModel.get('metadataKey')\n    ) {\n      return;\n    }\n\n    const metadataItem = new MetadataModel(\n      { key: metadataKey },\n      { server, provider }\n    );\n\n    const hubKey = path.join([\n      metadataKey.replace(/(\\/library)?\\/metadata/, '/hubs/metadata'),\n      'related',\n    ]);\n\n    const includeExternalMedia = hasUserFeature(\n      appModel,\n      features.ADD_TO_LIBRARY\n    );\n\n    const relatedHubs = new HubCollection([], {\n      server,\n      provider,\n      metadataItem,\n      hubKey,\n      includeExternalMedia,\n      // Indicate to PMS that we expect augmented content for the item\n      includeExternalMetadata: true,\n      asyncAugmentMetadata: true,\n    });\n\n    prePlayPageModel.restoreDefaults({\n      providerEntityID,\n      metadataKey,\n      metadataItem,\n      // Try to maintain the same sibling list so navigating between siblings\n      // doesn't need to constantly re-fetch them.\n      siblingKey: prePlayPageModel.get('siblingKey'),\n      siblingList: prePlayPageModel.get('siblingList'),\n      relatedHubs,\n    });\n  },\n\n  [INIT_PRE_PLAY_DESCENDANT_LIST](appModel: any, payload: any) {\n    const prePlayPageModel = findPrePlayPageModel(appModel);\n    const server = findServerModel(appModel, payload);\n    const provider = findProviderModel(appModel, payload);\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n    const { providerEntityID, descendantKey } = payload;\n\n    if (!descendantKey) {\n      prePlayPageModel.set({\n        descendantKey,\n        descendantList: undefined,\n      });\n      return;\n    }\n\n    if (\n      providerEntityID === prePlayPageModel.get('providerEntityID') &&\n      descendantKey === prePlayPageModel.get('descendantKey')\n    ) {\n      return;\n    }\n\n    const includeExternalMedia = hasUserFeature(\n      appModel,\n      features.ADD_TO_LIBRARY\n    );\n\n    // We need to pass includeRelated=1 when fetching tracks in order to support\n    // the Plex Mix action, which depends on a related directory within each\n    // track item.\n    const includeRelated =\n      metadataItemModel.get('type') === 'album' ||\n      (metadataItemModel.get('type') === 'artist' &&\n        metadataItemModel.get('skipChildren'));\n\n    const descendantList = new MetadataListModel(\n      { containerKey: descendantKey },\n      {\n        server,\n        provider,\n        excludeAllLeaves: true,\n        includeExternalMedia,\n        includeRelated,\n      }\n    );\n\n    prePlayPageModel.set({\n      descendantKey,\n      descendantList,\n    });\n  },\n\n  [INIT_PRE_PLAY_SIBLING_LIST](appModel: any, payload: any) {\n    const prePlayPageModel = findPrePlayPageModel(appModel);\n    const server = findServerModel(appModel, payload);\n    const provider = findProviderModel(appModel, payload);\n    const { providerEntityID, siblingKey } = payload;\n\n    if (!siblingKey) {\n      prePlayPageModel.set({\n        siblingKey,\n        siblingList: undefined,\n      });\n      return;\n    }\n\n    if (\n      providerEntityID === prePlayPageModel.get('providerEntityID') &&\n      siblingKey === prePlayPageModel.get('siblingKey')\n    ) {\n      return;\n    }\n\n    const includeExternalMedia = hasUserFeature(\n      appModel,\n      features.ADD_TO_LIBRARY\n    );\n\n    const siblingList = new MetadataListModel(\n      { containerKey: siblingKey },\n      {\n        server,\n        provider,\n        excludeAllLeaves: true,\n        includeExternalMedia,\n      }\n    );\n\n    prePlayPageModel.set({\n      siblingKey,\n      siblingList,\n    });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [INIT_PRE_PLAY_AUGMENTED_HUBS](appModel: any, payload: any, dispatch: any) {\n    const prePlayPageModel = findPrePlayPageModel(appModel);\n    const metadataItem = prePlayPageModel.get('metadataItem');\n    const augmentationKey = metadataItem.get('augmentationKey');\n\n    const musicAugmentationTypes = [metadataTypes.ARTIST, metadataTypes.ALBUM];\n    const metadataAugmentationTypes = [\n      metadataTypes.MOVIE,\n      metadataTypes.SHOW,\n      metadataTypes.SEASON,\n      metadataTypes.EPISODE,\n    ];\n    const type = metadataItem.get('type');\n\n    // Only allow users with the tunefind feature to get movie/TV augmentation\n    const allowAugmentation =\n      musicAugmentationTypes.includes(type) ||\n      metadataAugmentationTypes.includes(type);\n\n    if (!allowAugmentation || !augmentationKey) {\n      prePlayPageModel.set({\n        isAugmentedHubsPending: false,\n        isAugmentedHubsPopulated: true,\n      });\n      return;\n    }\n\n    const augmentedHubs = new HubCollection([], {\n      server: metadataItem.server,\n      provider: metadataItem.provider,\n      hubKey: metadataItem.get('augmentationKey'),\n      excludeFields: '', // We want to show the summary\n      wait: 1,\n    });\n\n    prePlayPageModel.set({\n      augmentedHubs,\n    });\n\n    dispatch(fetchPrePlayAugmentedHubs());\n  },\n\n  [PRE_FETCH_PRE_PLAY_METADATA_ITEM](appModel: any, payload: any) {\n    const metadataItemModel = findMetadataItemModel(appModel, payload);\n\n    fetchPrePlayMetadataItemHelper(metadataItemModel, { forceFetch: true });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [FETCH_PRE_PLAY_METADATA_ITEM](appModel: any, payload: any, dispatch: any) {\n    const prePlayPageModel = findPrePlayPageModel(appModel);\n    const metadataItemModel = prePlayPageModel.get('metadataItem');\n\n    const previousPending = prePlayPageModel.get('isMetadataItemPending');\n    prePlayPageModel.set('isMetadataItemPending', true);\n\n    fetchPrePlayMetadataItemHelper(metadataItemModel, { forceFetch: true })\n      .done(() => {\n        prePlayPageModel.set({\n          isMetadataItemPending: false,\n          isMetadataItemPopulated: true,\n          metadataItemError: null,\n        });\n\n        dispatch(initPrePlayAugmentedHubs());\n      })\n      // @ts-expect-error ts-migrate(6133) FIXME: 'instance' is declared but its value is never read... Remove this comment to see the full error message\n      .fail((instance: any, xhr: any) => {\n        if (xhr.aborting) {\n          prePlayPageModel.set('isMetadataItemPending', previousPending);\n          return;\n        }\n\n        prePlayPageModel.set({\n          isMetadataItemPending: false,\n          metadataItemError: xhrErrorFilter(xhr),\n        });\n      });\n  },\n\n  [FETCH_PRE_PLAY_RELATED_HUBS]: createFetchHandler({\n    key: 'relatedHubs',\n    getModel: findPrePlayPageModel,\n  }),\n\n  [FETCH_PRE_PLAY_AUGMENTED_HUBS]: createFetchHandler({\n    key: 'augmentedHubs',\n    getModel: findPrePlayPageModel,\n  }),\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [MAKE_PRE_PLAY_VIDEO_DECISION](appModel: any, payload: any, dispatch: any) {\n    const prePlayPageModel = findPrePlayPageModel(appModel);\n    const experienceSettingsModel = appModel\n      .get('user')\n      .get('experienceSettings');\n    const metadataItemModel = prePlayPageModel.get('metadataItem');\n\n    const decisionOptions = resolve('getDecisionOptions')(metadataItemModel);\n\n    const quality = videoPlayerQualities.getCurrentQuality(\n      metadataItemModel,\n      experienceSettingsModel,\n      (updatedSettings: any) =>\n        dispatch(saveExperienceSettings(updatedSettings))\n    );\n\n    const mediaDecision = mediaDecisionEngine.getMediaDecision({\n      item: metadataItemModel,\n      transcodeServer: metadataItemModel.server,\n      quality,\n      ...decisionOptions,\n    });\n\n    prePlayPageModel.set('decisionMediaItem', mediaDecision.media);\n  },\n\n  [UPDATE_ACTIVITY](appModel: any, payload: any) {\n    if (payload.activity.type === activityTypes.LIBRARY_REFRESH_ITEMS) {\n      setFileUnavailable(appModel, payload);\n    }\n  },\n\n  [FINISH_ACTIVITY](appModel: any, payload: any) {\n    if (payload.activity.type === activityTypes.LIBRARY_REFRESH_ITEMS) {\n      setFileUnavailable(appModel, payload);\n    }\n  },\n\n  [REPOPULATE_METADATA_ITEM](appModel: any, payload: any, dispatch: any) {\n    if (isMetadataForPage(appModel, payload)) {\n      repopulatePageChildren(appModel, payload, dispatch);\n    }\n  },\n\n  [REPOPULATE_PAGE](appModel: any, payload: any, dispatch: any) {\n    const prePlayPageModel = findPrePlayPageModel(appModel);\n    const metadataItemModel = prePlayPageModel.get('metadataItem');\n\n    if (isMetadataForPage(appModel, payload)) {\n      // Pass the `skipRefresh` param so on-the-fly media analysis does not\n      // happen for items while a scan is in progress. This helps to avoid\n      // overwhelming low-powered servers.\n\n      metadataItemModel.fetch({\n        data: { skipRefresh: 1 },\n        usePopulatedParams: true,\n      });\n\n      repopulatePageChildren(appModel, payload, dispatch);\n    }\n  },\n\n  [REPOPULATE_PRE_PLAY_POPULAR_TRACKS](\n    appModel: any,\n    payload: any,\n    dispatch: any\n  ) {\n    const prePlayPageModel = findPrePlayPageModel(appModel);\n    const metadataItemModel = prePlayPageModel.get('metadataItem');\n    const albumModel = tryFindMetadataItemModel(appModel, {\n      metadataItemEntityID: payload.albumMetadataItemEntityID,\n    });\n\n    if (\n      metadataItemModel &&\n      albumModel &&\n      metadataItemModel.get('key') === albumModel.get('parentKey')\n    ) {\n      dispatch(\n        repopulateMetadataItem({\n          serverEntityID: payload.serverEntityID,\n          metadataItemEntityID: metadataItemModel.entityID(),\n        })\n      );\n    }\n  },\n});\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst timelineEvents = {\n  CREATED: 0,\n  PROGRESS: 1,\n  MATCHING: 2,\n  DOWNLOADING_METADATA: 3,\n  LOADING_METADATA: 4,\n  PROCESSED: 5,\n  DELETED: 9,\n};\n\nexport default timelineEvents;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport { METADATA_XML_ELEMENT_NAMES } from './replaceMetadataXMLElementNames';\n\nconst metadataChildrenTypes = _.reduce(\n  METADATA_XML_ELEMENT_NAMES,\n  (acc, elementName) => {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    acc[elementName] = 'Metadata';\n    return acc;\n  },\n  {}\n);\n\nfunction splitChildren(json: any) {\n  if (!json || !json._children) {\n    return json;\n  }\n\n  // Legacy JSON from the server will use a single `_children` array while our\n  // models expect a separate array for each collection.\n\n  const parent = _.clone(json);\n  const children = parent._children;\n\n  if (Array.isArray(children)) {\n    children.forEach((child) => {\n      const elementType = child._elementType;\n      child._elementType = null;\n      child.elementName = elementType;\n\n      if (elementType) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        const key = metadataChildrenTypes[elementType] || elementType;\n        const existing = parent[key];\n        const splitChild = splitChildren(child);\n\n        if (existing) {\n          if (Array.isArray(existing)) {\n            existing.push(splitChild);\n          } else {\n            parent[key] = [existing, splitChild];\n          }\n        } else {\n          parent[key] = splitChild;\n        }\n      }\n    });\n\n    parent._children = null;\n  }\n\n  return parent;\n}\n\nexport default splitChildren;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport * as adapters from 'app/js/adapters/adapters';\nimport BackgroundProcessingQueueCollection from 'app/js/models/library/convert/BackgroundProcessingQueueCollection';\nimport VersionGeneratorModel from 'app/js/models/library/convert/VersionGeneratorModel';\nimport ServerUpdateModel from 'app/js/models/server/ServerUpdateModel';\nimport {\n  removeMetadataItem,\n  repopulateMetadataItem,\n  updateMetadataItemRefreshingState,\n} from 'app/js/stores/actions/metadata/metadataActions';\nimport {\n  discoverMediaGrabberDevice,\n  fetchLibraries,\n  fetchProviders,\n  finishActivity,\n  startActivity,\n  testServer,\n  updateActivity,\n  updateSetting,\n} from 'app/js/stores/actions/serverActions';\nimport { repopulatePrePlayPopularTracks } from 'app/js/stores/actions/ui/prePlayPageActions';\nimport { repopulatePage } from 'app/js/stores/actions/ui/uiActions';\nimport * as providerIdentifiers from 'app/js/utils/constants/providerIdentifiers';\nimport * as serverUpdateStates from 'app/js/utils/constants/serverUpdateStates';\nimport timelineEvents from 'app/js/utils/constants/timelineEvents';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport splitChildren from 'app/js/utils/parser/splitChildren';\nimport playerUtil from 'app/js/utils/playerUtil';\nimport BaseMediaServerEventConnection from 'app/js/utils/pubsub/BaseMediaServerEventConnection';\nimport * as messageTypes from 'app/js/utils/pubsub/messageTypes';\nimport toStableServerModelJSON from 'app/js/utils/server/toStableServerModelJSON';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport escapeRegExp from 'app/js/utils/string/escapeRegExp';\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\nimport serverActivitiesSlice from 'app/js/v4/core/serverActivities/serverActivitiesSlice';\nimport serverNowPlayingSessionsSlice from 'app/js/v4/core/serverNowPlayingSessions/serverNowPlayingSessionsSlice';\nimport serversSlice from 'app/js/v4/core/servers/serversSlice';\n\nconst activityEventActions = {\n  started: startActivity,\n  updated: updateActivity,\n  ended: finishActivity,\n};\n\nconst v4ActivityEventActions = {\n  started: serverActivitiesSlice.actions.activityStarted,\n  updated: serverActivitiesSlice.actions.activityUpdated,\n  ended: serverActivitiesSlice.actions.activityFinished,\n};\n\nconst MESSAGE_TYPES = [\n  messageTypes.ACCOUNT,\n  messageTypes.ACTIVITY,\n  messageTypes.BACKGROUND_GENERATOR_STATE,\n  messageTypes.BACKGROUND_PROCESSING_QUEUE,\n  messageTypes.GRABBER_DEVICE,\n  messageTypes.PLAYING,\n  messageTypes.PREFERENCE,\n  messageTypes.PROGRESS,\n  messageTypes.PROVIDER_CHANGE,\n  messageTypes.PROVIDER_CONTENT_CHANGE,\n  messageTypes.PROVIDER_SUBSCRIPTION_CHANGE,\n  messageTypes.REACHABILITY,\n  messageTypes.STATUS,\n  messageTypes.TIMELINE,\n  messageTypes.TRANSCODE_END,\n  messageTypes.TRANSCODE_START,\n  messageTypes.TRANSCODE_UPDATE,\n  messageTypes.UPDATE_STATE_CHANGE,\n  messageTypes.VERSION_STATE,\n];\n\nconst REPOPULATE_THROTTLE_DELAY = 5000;\n\nfunction updateLiveTVMetadata(serverEntityID: any) {\n  const appStore = adapters.resolve('appStore');\n\n  if (\n    providerIdentifiers.matches(window.location.hash, providerIdentifiers.EPG)\n  ) {\n    appStore.dispatch(repopulatePage({ serverEntityID }));\n  }\n}\n\nfunction getMetadataKeyBase(metadataTypeString: string): string {\n  switch (metadataTypeString) {\n    case metadataTypes.PLAYLIST:\n      return '/playlists';\n    case metadataTypes.COLLECTION:\n      return '/library/collections';\n    default:\n      return '/library/metadata';\n  }\n}\n\nconst MediaServerEventConnection = BaseMediaServerEventConnection.extend({\n  //\n  // Init\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'options' is declared but its value is never read.\n  initialize(options: any) {\n    // eslint-disable-next-line prefer-rest-params\n    BaseMediaServerEventConnection.prototype.initialize.apply(this, arguments);\n\n    this.throttledRepopulates = {};\n  },\n\n  //\n  // Control\n\n  repopulateNow(id: any, fn: any) {\n    this.throttledRepopulates[id] = {\n      timestamp: Date.now(),\n    };\n    fn();\n  },\n\n  repopulateWithThrottle(id: any, fn: any, delay: any) {\n    const details = this.throttledRepopulates[id];\n\n    if (details) {\n      if (details.hasTimeout) {\n        // If a timeout is already pending, do nothing and wait for the timeout.\n      } else {\n        // Otherwise, set a timeout to fire when the delay is finished.\n        const elapsedTime = Date.now() - details.timestamp;\n\n        if (elapsedTime < delay) {\n          window.setTimeout(() => {\n            this.repopulateNow(id, fn);\n          }, delay - elapsedTime);\n\n          this.throttledRepopulates[id] = {\n            hasTimeout: true,\n          };\n        } else {\n          this.repopulateNow(id, fn);\n        }\n      }\n    } else {\n      this.repopulateNow(id, fn);\n    }\n  },\n\n  //\n  // Messages\n\n  getMessageTypes() {\n    return MESSAGE_TYPES;\n  },\n\n  [messageTypes.PREFERENCE](message: any) {\n    // Tweak the object a bit and dispatch it as an event.\n    message.key = message.id;\n    message.server = this.server;\n\n    this.server.trigger('socket:setting', message);\n\n    const dispatch = adapters.resolve('appStore').dispatch;\n    dispatch(\n      updateSetting({\n        serverEntityID: this.server.entityID(),\n        setting: message,\n      })\n    );\n  },\n\n  [messageTypes.TIMELINE](message: any) {\n    // Suppress EPG-related timeline notifications. We may want to hook live\n    // updating into them eventually, but we don't want the visual toast.\n\n    if (\n      providerIdentifiers.matches(message.identifier, providerIdentifiers.EPG)\n    ) {\n      return;\n    }\n\n    const {\n      state,\n      sectionID,\n      rootItemID,\n      parentItemID,\n      itemID,\n      metadataState,\n      mediaState,\n      type,\n    } = message;\n\n    const dispatch = adapters.resolve('appStore').dispatch;\n    const serverEntityID = this.server.entityID();\n\n    const metadataType = metadataTypes.getMetadataType(type);\n    const metadataTypeString = metadataType?.typeString;\n\n    const metadataKey = `${getMetadataKeyBase(metadataTypeString)}/${itemID}`;\n\n    const metadataItemEntityID = createEntityID(\n      entityTypes.METADATA_ITEM,\n      metadataKey,\n      serverEntityID\n    );\n\n    dispatch(\n      updateMetadataItemRefreshingState({\n        serverEntityID,\n        metadataItemEntityID,\n        metadataState,\n        mediaState,\n      })\n    );\n\n    if (state === timelineEvents.PROCESSED) {\n      dispatch(\n        repopulateMetadataItem({\n          serverEntityID,\n          metadataItemEntityID,\n        })\n      );\n\n      // An artist's popular tracks are derived from its albums. When a metadata\n      // refresh on an album occurs, try repopulating the artist so popular\n      // tracks are updated.\n\n      if (metadataTypeString === metadataTypes.ALBUM) {\n        dispatch(\n          repopulatePrePlayPopularTracks({\n            serverEntityID,\n            albumMetadataItemEntityID: metadataItemEntityID,\n          })\n        );\n      }\n    }\n\n    if (state === timelineEvents.DELETED) {\n      dispatch(\n        removeMetadataItem({\n          serverEntityID,\n          metadataItemEntityID,\n        })\n      );\n    }\n\n    // If an item was created or deleted, we'll need to refresh lists as well,\n    // which means repopulating pages like the library page or pre-plays if a\n    // parent or grandparent is provided. Throttle these actions so we aren't\n    // constantly repopulating during a scan.\n\n    if (state === timelineEvents.CREATED || state === timelineEvents.DELETED) {\n      if (sectionID > 0) {\n        this.repopulateWithThrottle(\n          'section-' + sectionID,\n          () => {\n            dispatch(\n              repopulatePage({\n                serverEntityID,\n                containerKeyPattern: new RegExp(\n                  '^' + escapeRegExp(`/library/sections/${sectionID}`) + '\\\\b'\n                ),\n              })\n            );\n          },\n          REPOPULATE_THROTTLE_DELAY\n        );\n      }\n\n      if (rootItemID > 0) {\n        this.repopulateWithThrottle(\n          'metadata-' + rootItemID,\n          () => {\n            const rootMetadataKey = `/library/metadata/${rootItemID}`;\n            const rootMetadataItemEntityID = createEntityID(\n              entityTypes.METADATA_ITEM,\n              rootMetadataKey,\n              serverEntityID\n            );\n\n            dispatch(\n              repopulatePage({\n                serverEntityID,\n                metadataItemEntityID: rootMetadataItemEntityID,\n                rootMetadataKey,\n              })\n            );\n          },\n          REPOPULATE_THROTTLE_DELAY\n        );\n      }\n\n      if (parentItemID > 0) {\n        this.repopulateWithThrottle(\n          'metadata-' + parentItemID,\n          () => {\n            const parentMetadataKey = `/library/metadata/${parentItemID}`;\n            const parentMetadataItemEntityID = createEntityID(\n              entityTypes.METADATA_ITEM,\n              parentMetadataKey,\n              serverEntityID\n            );\n\n            dispatch(\n              repopulatePage({\n                serverEntityID,\n                metadataItemEntityID: parentMetadataItemEntityID,\n                parentMetadataKey,\n              })\n            );\n          },\n          REPOPULATE_THROTTLE_DELAY\n        );\n      }\n\n      // Playlists don't have an associated ID, so they need an explicit\n      // repopulate to keep up to date as items are created or deleted.\n\n      if (metadataTypeString === metadataTypes.PLAYLIST) {\n        dispatch(\n          repopulatePage({\n            serverEntityID,\n            containerKeyPattern: new RegExp('^/playlists'),\n          })\n        );\n      }\n    }\n\n    message.server = this.server;\n\n    this.server.trigger('socket:timeline', message);\n    dispatcher.trigger('timeline', message);\n  },\n\n  [messageTypes.STATUS](message: any) {\n    this.server.trigger('socket:status', message);\n\n    // If this is a notification about a library update, the\n    // refreshing flag may have changed so re-fetch the server\n    // sections so views can update accordingly.\n    if (message.notificationName === 'LIBRARY_UPDATE') {\n      const dispatch = adapters.resolve('appStore').dispatch;\n      const serverEntityID = this.server.entityID();\n\n      if (serverEntityID) {\n        dispatch(\n          serversSlice.actions.libraryScanUpdated({\n            server: toStableServerModelJSON(this.server),\n          })\n        );\n\n        dispatch(testServer({ serverEntityID }));\n        dispatch(fetchLibraries({ serverEntityID }));\n        dispatch(repopulatePage({ serverEntityID }));\n      }\n    }\n  },\n\n  [messageTypes.PROGRESS](message: any) {\n    this.server.trigger('socket:status', message);\n  },\n\n  [messageTypes.PLAYING](message: any) {\n    if (!message.sessionKey || !this.server.get('isFullOwnedServer')) {\n      return;\n    }\n\n    const dispatch = adapters.resolve('appStore').dispatch;\n\n    if (message.state === playerUtil.states.STOPPED) {\n      dispatch(\n        serverNowPlayingSessionsSlice.actions.sessionStopped({\n          server: toStableServerModelJSON(this.server),\n          sessionKey: message.sessionKey,\n        })\n      );\n\n      dispatch(repopulatePage({ serverEntityID: this.server.entityID() }));\n    } else {\n      dispatch(\n        serverNowPlayingSessionsSlice.actions.sessionChanged({\n          server: toStableServerModelJSON(this.server),\n          message,\n        })\n      );\n    }\n  },\n\n  [messageTypes.BACKGROUND_GENERATOR_STATE](message: any) {\n    const options = { server: this.server, onlyIfCached: true };\n\n    const generator = new VersionGeneratorModel(\n      {\n        id: message.generatorID,\n      },\n      options\n    );\n\n    if (!_.isEmpty(generator)) {\n      generator.fetch();\n    }\n  },\n\n  [messageTypes.VERSION_STATE](message: any) {\n    const options = { server: this.server, onlyIfCached: true };\n\n    const generator = new VersionGeneratorModel(\n      {\n        id: message.generatorID,\n      },\n      options\n    );\n\n    if (!_.isEmpty(generator)) {\n      const metadataItems = generator.get('children').getCollection();\n      const metadataItem = metadataItems.get(message.metadataItemID);\n\n      if (metadataItem) {\n        metadataItem.set({\n          processingState: message.state,\n          processingStateContext: message.stateContext,\n        });\n      }\n    }\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'message' is declared but its value is never read.\n  [messageTypes.BACKGROUND_PROCESSING_QUEUE](message: any) {\n    const playQueues = new BackgroundProcessingQueueCollection([], {\n      server: this.server,\n      allowInCache: true,\n      onlyIfCached: true,\n    });\n\n    if (!_.isEmpty(playQueues)) {\n      const playQueue = playQueues.first();\n\n      if (playQueue) {\n        playQueue.fetch();\n      }\n    }\n  },\n\n  [messageTypes.TRANSCODE_START](message: any) {\n    const dispatch = adapters.resolve('appStore').dispatch;\n\n    if (this.server.get('isShared')) {\n      return;\n    }\n\n    if (message.context === 'static') {\n      const transcodeJobs = this.server\n        .get(__PLATFORM__)\n        .get('backgroundTranscodeJobs');\n      transcodeJobs.fetch();\n    } else {\n      dispatch(\n        serverNowPlayingSessionsSlice.actions.fetchRequested({\n          server: toStableServerModelJSON(this.server),\n        })\n      );\n    }\n  },\n\n  [messageTypes.TRANSCODE_UPDATE](message: any) {\n    if (this.server.get('isShared')) {\n      return;\n    }\n\n    if (message.context === 'static') {\n      const transcodeJobs = this.server\n        .get(__PLATFORM__)\n        .get('backgroundTranscodeJobs');\n      const transcodeJob = transcodeJobs.get(message.key);\n\n      if (transcodeJob) {\n        transcodeJob.set(transcodeJob.parse(message));\n      } else {\n        transcodeJobs.fetch();\n      }\n    }\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'message' is declared but its value is never read.\n  [messageTypes.TRANSCODE_END](message: any) {\n    if (this.server.get('isShared')) {\n      return;\n    }\n\n    // Both start and end will re-fetch transcode jobs.\n    // eslint-disable-next-line prefer-rest-params, prefer-spread\n    this['transcodeSession.start'].apply(this, arguments);\n  },\n\n  [messageTypes.UPDATE_STATE_CHANGE](message: any) {\n    const update = this.server.get(__PLATFORM__).get('update');\n    const attrs = _.pick(\n      message,\n      Object.keys(ServerUpdateModel.prototype.syncedAttrs)\n    );\n    _.defaults(attrs, _.result(update, 'defaults'));\n\n    // If the user tries to explicitly download updates, it will revert to\n    // an available state before continuing to the downloading state.\n    if (\n      update.get('state') === serverUpdateStates.DOWNLOADING &&\n      attrs.state === serverUpdateStates.AVAILABLE\n    ) {\n      attrs.state = serverUpdateStates.DOWNLOADING;\n    }\n\n    update.set({ ...attrs, isChecking: false });\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'message' is declared but its value is never read.\n  [messageTypes.REACHABILITY](message: any) {\n    const cloudAccount = this.server.get(__PLATFORM__).get('cloudAccount');\n    cloudAccount.fetch();\n  },\n\n  [messageTypes.ACCOUNT](message: any) {\n    this.server.set('myPlexSubscription', message.hasPlexPass);\n\n    // Fetch the user's resources again so the server's connections are\n    // updated. This can help casting if the server only has a loopback\n    // address and signing the server in provides a private address.\n\n    const appModel = adapters.resolve('appModel');\n    const user = appModel.get('user');\n\n    if (user.get('isSignedIn')) {\n      dispatcher.trigger('discover:servers');\n    }\n  },\n\n  [messageTypes.ACTIVITY](message: any) {\n    const parsedMessage = splitChildren(message);\n    const appStore = adapters.resolve('appStore');\n    const serverEntityID = this.server.entityID();\n\n    // Old messages didn't have Activity, so we need to check that Activity is\n    // present otherwise we massage the old format into the new format.\n    const activity = parsedMessage.Activity || parsedMessage;\n\n    // Ensure Context and Activity are always on the activity so action handlers\n    // don't need to do their own check before using them.\n    activity.Context = activity.Context || {};\n    activity.Response = activity.Response || {};\n\n    if (serverEntityID) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      const action = activityEventActions[parsedMessage.event];\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      const v4Action = v4ActivityEventActions[parsedMessage.event];\n\n      if (action) {\n        appStore.dispatch(action({ serverEntityID, activity }));\n      }\n\n      if (v4Action) {\n        appStore.dispatch(\n          v4Action({ server: toStableServerModelJSON(this.server), activity })\n        );\n      }\n    }\n  },\n\n  [messageTypes.GRABBER_DEVICE](message: any) {\n    const appStore = adapters.resolve('appStore');\n    const serverEntityID = this.server.entityID();\n\n    if (serverEntityID && message.event === 'appeared') {\n      appStore.dispatch(\n        discoverMediaGrabberDevice({\n          serverEntityID: serverEntityID,\n          device: message.Device,\n        })\n      );\n    }\n  },\n\n  [messageTypes.PROVIDER_CONTENT_CHANGE]() {\n    updateLiveTVMetadata(this.server.entityID());\n  },\n\n  [messageTypes.PROVIDER_SUBSCRIPTION_CHANGE]() {\n    updateLiveTVMetadata(this.server.entityID());\n  },\n\n  [messageTypes.PROVIDER_CHANGE]() {\n    const appStore = adapters.resolve('appStore');\n    appStore.dispatch(\n      fetchProviders({ serverEntityID: this.server.entityID() })\n    );\n  },\n});\n\nexport default MediaServerEventConnection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport dispatcher from 'app/js/utils/dispatcher';\nimport assert from 'app/js/utils/log/assert';\n\nconst BaseAppModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'BaseAppModel',\n  isStateTreeRoot: true,\n  //\n  // Init\n  constructor: function () {\n    // Entities can be created before the model is initialized as relations are\n    // instantiated. Store pending entities and add them to the entities\n    // collection after the model is initialized.\n    this._pendingEntities = [];\n    this.listenTo(dispatcher, 'change:entity', this.onEntityChange);\n    // eslint-disable-next-line prefer-rest-params\n    AbstractModel.prototype.constructor.apply(this, arguments);\n  },\n  initialize() {\n    this._pendingEntities.forEach(this._addEntity.bind(this));\n  },\n  //\n  // Control\n  _addEntity({ type, id, model }: any) {\n    const entities = this.get('entities');\n    if (__DEV__ && !entities) {\n      assert(\n        false,\n        \"Use `createEntitiesModelClass` to create an `entities` session relation in a platform's app model\"\n      );\n    }\n    const entitiesCollection = entities.get(type);\n    if (__DEV__ && !entitiesCollection) {\n      assert(\n        false,\n        `\\`createEntitiesModelClass\\` for ${this.name} is missing \\`${type}\\` relation`\n      );\n    }\n    entitiesCollection.add({ id, model }, { merge: true });\n  },\n  //\n  // Listeners\n  onEntityChange(entity: any) {\n    if (this.has('entities')) {\n      this._addEntity(entity);\n    } else {\n      this._pendingEntities.push(entity);\n    }\n  },\n});\nif (__DEV__) {\n  (window as any)._entity = (entityID: any) =>\n    (window as any)._appState.entities[entityID.match(/^\\w+/)[0]][entityID];\n  BaseAppModel.prototype.toState = function () {\n    // eslint-disable-next-line prefer-rest-params\n    const state = AbstractModel.prototype.toState.apply(this, arguments);\n    (window as any)._appState = state;\n    (window as any)._appModel = this;\n    return state;\n  };\n}\nexport default BaseAppModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport getUnixTime from 'date-fns/getUnixTime';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport ConnectionCollection from './ConnectionCollection';\n\nconst ResourceModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ResourceModel',\n  context: ['server'],\n\n  idAttribute: 'clientIdentifier',\n  urlRoot: '/api/v2/resources',\n\n  syncedAttrs: {\n    clientIdentifier: attrTypes.string,\n    name: attrTypes.string,\n    sourceTitle: attrTypes.string,\n    accessToken: attrTypes.string,\n    product: attrTypes.string,\n    productVersion: attrTypes.string,\n    platform: attrTypes.string,\n    platformVersion: attrTypes.string,\n    device: attrTypes.string,\n    provides: attrTypes.list,\n    owned: attrTypes.boolean,\n    home: attrTypes.boolean,\n    synced: attrTypes.boolean,\n    presence: attrTypes.boolean,\n    publicAddressMatches: attrTypes.boolean,\n    httpsRequired: attrTypes.boolean,\n    createdAt: attrTypes.integer,\n    lastSeenAt: attrTypes.integer,\n    ownerId: attrTypes.integer,\n  },\n\n  syncedRelations: {\n    connections: {\n      relationClass: ConnectionCollection,\n    },\n  },\n\n  //\n  // Control\n\n  augmentResponse(response: any) {\n    // The old `api/resources` endpoint returned timestamps as a unix\n    // timestamp. The new `api/v2/resources` endpoint returns a datetime string\n    // of the form: \"YYYY-MM-DDThh:mm:ssZ\".\n    // For backwards compatibility convert datetime strings to unix timestamps.\n\n    if (typeof response.createdAt === 'string') {\n      response.createdAt = getUnixTime(response.createdAt);\n    }\n\n    if (typeof response.lastSeenAt === 'string') {\n      response.lastSeenAt = getUnixTime(response.lastSeenAt);\n    }\n\n    // The resource models from /security/resources used in\n    // requestTransientResource are still XML and have a Device\n    const device = response.Device;\n    if (device) {\n      device.connections = device.Connection;\n      delete device.Connection;\n      return device;\n    }\n\n    return response;\n  },\n});\n\nexport default ResourceModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport config from 'app/js/models/config';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport path from 'app/js/utils/url/path';\nimport ResourceModel from './ResourceModel';\n\nconst ResourceCollection = AbstractCollection.extend({\n  //\n  // Properties\n  name: 'ResourceCollection',\n  model: ResourceModel,\n  context: ['server'],\n  responseType: responseTypes.json,\n  url() {\n    const params = {};\n    // Some platforms don't support https connections to media servers. Only\n    // include secure plex.direct https connections if supported.\n    if (config.allowHttpsMediaServerConnections) {\n      (params as any).includeHttps = 1;\n    }\n    // Some platforms don't support relay connections to media servers. Only\n    // include relay connections if supported.\n    if (config.allowMediaServerRelayConnections) {\n      (params as any).includeRelay = 1;\n    }\n    if (config.allowIPv6ServerConnections) {\n      (params as any).includeIPv6 = 1;\n    }\n    return path.join('/api/v2/resources', params);\n  },\n});\nexport default ResourceCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport commands from 'app/js/commands/commands';\nimport addFlexModel from 'app/js/models/addFlexModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport ServerModel from 'app/js/models/server/ServerModel';\nimport { getMyPlexUrl } from 'app/js/utils/getRuntimeUrl';\nimport log from 'app/js/utils/log/log';\nimport whenFirstSucceed from 'app/js/utils/promise/whenFirstSucceed';\nimport path from 'app/js/utils/url/path';\nimport ConnectionCollection from './ConnectionCollection';\nimport ConnectionModel from './ConnectionModel';\nimport ResourceCollection from './ResourceCollection';\n\nconst { connectionTestResults, promiseStates } = ServerModel;\n\nconst CloudServerModel = ServerModel.extend({\n  //\n  // Properties\n\n  name: 'CloudServerModel',\n  connectionTestUrl: getMyPlexUrl('/monitoring/health'),\n\n  sessionAttrs: {\n    connectionTestResult: attrTypes.oneOf(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 4.\n      connectionTestResults.PENDING,\n      connectionTestResults.CONNECTED,\n      connectionTestResults.UNAVAILABLE,\n      connectionTestResults.UNAUTHORIZED\n    ).isRequired,\n\n    promiseState: attrTypes.oneOf(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 3.\n      promiseStates.PENDING,\n      promiseStates.RESOLVED,\n      promiseStates.REJECTED\n    ).isRequired,\n\n    isShared: attrTypes.boolean.isRequired,\n    isBundled: attrTypes.boolean.isRequired,\n    isCloud: attrTypes.boolean.isRequired,\n    isMerged: attrTypes.boolean.isRequired,\n    isDownForMaintenance: attrTypes.boolean.isRequired,\n    isResourcesPending: attrTypes.boolean.isRequired,\n    isResourcesPopulated: attrTypes.boolean.isRequired,\n    hasFailedResources: attrTypes.boolean.isRequired,\n\n    accessToken: attrTypes.string,\n\n    baseUrl: attrTypes.string.isRequired,\n    plexPassUrl: attrTypes.string.isRequired,\n    appsUrl: attrTypes.string.isRequired,\n\n    hasEventConnection: attrTypes.boolean,\n  },\n\n  sessionRelations: {\n    activeConnection: {\n      relationClass: ConnectionModel,\n      deferred: true,\n    },\n\n    connections: {\n      relationClass: ConnectionCollection,\n      options() {\n        return { server: this };\n      },\n    },\n\n    resources: {\n      relationClass: ResourceCollection,\n      options() {\n        return { server: this };\n      },\n    },\n  },\n\n  defaults() {\n    const baseUrl = getMyPlexUrl();\n\n    return {\n      connectionTestResult: connectionTestResults.PENDING,\n      promiseState: promiseStates.PENDING,\n\n      isShared: false,\n      isBundled: false,\n      isCloud: true,\n      isMerged: false,\n      isDownForMaintenance: false,\n      isResourcesPending: false,\n      isResourcesPopulated: false,\n      hasFailedResources: false,\n      friendlyName: 'plex.tv',\n\n      baseUrl: baseUrl,\n      plexPassUrl: path.join([baseUrl, '/subscription/about']),\n      appsUrl: path.join([baseUrl, '/downloads']),\n      hasEventConnection: false,\n    };\n  },\n\n  //\n  // Control\n\n  testAllConnections() {\n    // Override so the populate promise is not reset by `ServerModel`. A cloud\n    // server's populate promise is determined by whether the user is\n    // authenticated.\n    const connections = this.get('connections');\n\n    log(\n      '[Connections] Testing all %s connection(s) for %s',\n      connections.length,\n      this.get('debugName')\n    );\n\n    const promises = connections.map((connection: any) =>\n      this.testConnection(connection)\n    );\n\n    // We want the promise to resolve when any of the connection promises\n    // resolve and only reject when all of the returned promises reject.\n    return whenFirstSucceed(promises);\n  },\n\n  testConnection(connection: any) {\n    // Override so a different url can be passed for testing and so the populate\n    // promise is not reset by `ServerModel`. A cloud server's populate promise\n    // is determined by whether the user is authenticated.\n\n    const options = {\n      server: this,\n      connection: connection,\n      url: this.connectionTestUrl,\n    };\n\n    const promise = commands\n      .execute('testServerConnection', options)\n      .done(this.onConnectionTestSuccess.bind(this))\n      .fail(this.onConnectionTestError.bind(this));\n\n    return promise;\n  },\n\n  abortConnectionTest(connection: any) {\n    const options = {\n      server: this,\n      connection: connection,\n      url: this.connectionTestUrl,\n    };\n\n    commands.execute('abortServerConnectionTest', options);\n  },\n\n  deauthenticate() {\n    // The connection test result should not change when the server is\n    // deauthenticated, but `ServerModel` assumes the server is unavailable or\n    // unauthorized when it is rejected.\n\n    this.get('resources').clear();\n\n    this._reject({\n      connectionTestResult: this.get('connectionTestResult'),\n      accessToken: null,\n    });\n  },\n\n  //\n  // Listeners\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'connection' is declared but its value is never re... Remove this comment to see the full error message\n  onConnectionTestSuccess(connection: any) {\n    // Do not resolve the populate promise until the server is authenticated.\n    // This ensures that the cloud server can be populated and it will not\n    // resolve until the user is signed in.\n\n    const bestConnection = this.get('connections').getBestConnection();\n\n    log.info(\n      '[Connections] Active connection to %s is %s',\n      this.get('debugName'),\n      bestConnection.id\n    );\n\n    // Capture change events to ensure that a change event for\n    // `connectionTestResult` is not triggered before the derived attributes\n    // reflect the new state of the server.\n\n    this.startCapturingChangeEvents();\n\n    this.set({\n      isDownForMaintenance: false,\n      connectionTestResult: connectionTestResults.CONNECTED,\n      activeConnection: bestConnection,\n    });\n\n    this.releaseCapturedChangeEvents();\n  },\n\n  onConnectionTestError(connection: any, xhr: any) {\n    if (connection.get('isAborted')) {\n      return;\n    }\n\n    if (this.get('connections').hasOnlyFailedConnections()) {\n      this._reject({\n        isDownForMaintenance: xhr.status === 503,\n      });\n    }\n  },\n});\n\naddFlexModel(CloudServerModel, function () {\n  return {\n    relationClass: resolve('CloudServerFlexModel'),\n    options: {\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      server: this,\n    },\n  };\n});\n\nexport default CloudServerModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\n\nfunction whenFirstSucceed(promises: any) {\n  // If no promises passed, there would be no first succeeded one\n  if (!promises.length) {\n    return $.Deferred().reject().promise();\n  }\n\n  const result = $.Deferred();\n\n  let promisesPending = promises.length;\n\n  _.each(promises, function (promise) {\n    promise\n      .done(function () {\n        promisesPending--;\n        // First success resolves the result immediately\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        // eslint-disable-next-line prefer-rest-params\n        result.resolveWith(this, arguments);\n      })\n      .fail(function () {\n        promisesPending--;\n        // If every promise failed, reject the result\n        // If some of them succeeded before, reject() would be a noop.\n        if (promisesPending === 0) {\n          result.reject();\n        }\n      });\n  });\n\n  return result.promise();\n}\n\nexport default whenFirstSucceed;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport controlledPopulateMixin from 'app/js/models/mixins/controlledPopulateMixin';\nimport log from 'app/js/utils/log/log';\nimport ServerModel from './ServerModel';\n\n// @ts-expect-error ts-migrate(7006) FIXME: Parameter 'servers' implicitly has an 'any' type.\nfunction listServerNames(servers) {\n  if (!servers.length) {\n    return '(none)';\n  }\n\n  const names = _.map(servers, (server) => server.get('debugName'));\n  return names.join(', ');\n}\n\nconst ServerCollection = AbstractCollection.extend({\n  mixins: [controlledPopulateMixin],\n\n  //\n  // Properties\n\n  name: 'ServerCollection',\n  model: ServerModel,\n\n  //\n  // Init\n\n  initialize() {\n    this._resetPopulate();\n  },\n\n  //\n  // Control\n\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'server' implicitly has an 'any' type.\n  comparator(server) {\n    // 1. Owned servers by friendlyName\n    // 2. Shared servers by sourceTitle then friendlyName\n    // 3. plex.tv Cloud Server\n\n    const isShared = server.get('isShared');\n    const friendlyName = server.get('friendlyName') || '';\n    const sourceTitle = server.get('sourceTitle') || '';\n    const sortName = isShared ? sourceTitle + friendlyName : friendlyName;\n\n    // `selectServerProviders` and others rely on the collection server order.\n    // We generally always want the cloud server listed last when it is used for\n    // display purposes, so force a high number here for the comparator and\n    // short circuit the name\n    if (server.get('isCloud')) {\n      return '9';\n    }\n\n    return (isShared ? '1' : '0') + sortName.toLowerCase();\n  },\n\n  shouldWaitForInitialServers() {\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'server' implicitly has an 'any' type.\n    const pendingInitialServers = this.filter((server) => {\n      // Wait for unidentified servers until we possibly resolve their identity.\n      // Also wait for servers that provide additional server resources.\n\n      const isInitialServer = !server.id || !!server.get('resources');\n      return isInitialServer && server.isPopulating();\n    });\n\n    if (pendingInitialServers.length) {\n      log(\n        '[Servers] Waiting for initial servers =',\n        listServerNames(pendingInitialServers)\n      );\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  shouldWaitForResources() {\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'acc' implicitly has an 'any' type.\n    const pendingResourceServers = this.reduce((acc, server) => {\n      // Wait if an initial cloud server has resolved and its resources have not\n      // been resolved yet.\n\n      const isResolved = server.get('isResolved');\n      const resources = server.get('resources');\n      const hasPendingResources = resources && resources.isPopulating();\n\n      if (isResolved && hasPendingResources) {\n        acc.push(server);\n      }\n\n      return acc;\n    }, []);\n\n    if (pendingResourceServers.length) {\n      log(\n        '[Servers] Waiting for additional resources from',\n        listServerNames(pendingResourceServers)\n      );\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  shouldWaitForPendingServers() {\n    // Only reject the servers promise after all servers are done being tested\n    // and we know that there will be no connected servers. If a server is\n    // already connected, we know we can resolve immediately.\n\n    if (this.findWhere({ isConnected: true })) {\n      return false;\n    }\n\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'server' implicitly has an 'any' type.\n    const pendingServers = this.filter((server) => server.isPopulating());\n\n    if (pendingServers.length) {\n      log(\n        '[Servers] Waiting for pending servers =',\n        listServerNames(pendingServers)\n      );\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  waitForServers() {\n    this._resetPopulate();\n  },\n\n  foundAllServers() {\n    // After any additional resources have been fetched, resolve the populate\n    // promise if at least one server has connected.\n\n    const connectedServers = this.where({ isConnected: true });\n    const connectedList = listServerNames(connectedServers);\n\n    log('[Servers] Found all servers =', connectedList);\n\n    if (connectedServers.length) {\n      this._resolvePopulate();\n    } else {\n      this._rejectPopulate();\n    }\n  },\n\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  populateAnyServer(servers = this.models) {\n    // If any connected server is required, but not a specific server, populate\n    // using whichever server first becomes connected. Allow a set of servers to\n    // be passed in to iterate through, but default to the entire collection.\n\n    const deferred = $.Deferred();\n    const relevantServers = servers.slice(0);\n\n    // If we already have a connected server, resolve immediately.\n    const server = _.find(relevantServers, (currentServer) => {\n      // The cloud server (plex.tv) must use `isResolved` in order to ensure the\n      // user is authenticated, but media servers can shortcut at `isConnected`,\n      // which saves time if connections are being re-tested.\n\n      return currentServer.get('isCloud')\n        ? currentServer.get('isResolved')\n        : currentServer.get('isConnected');\n    });\n\n    if (server) {\n      log(\n        '[Servers] Populate any server chose %s where servers = %s',\n        server.get('debugName'),\n        listServerNames(relevantServers)\n      );\n      return deferred.resolve(server).promise();\n    }\n\n    // If all servers are unauthenticated, reject immediately.\n    if (this.hasOnlyRejectedServers(relevantServers)) {\n      return deferred.reject().promise();\n    }\n\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'removedServer' implicitly has an 'any' ... Remove this comment to see the full error message\n    function onServerRemove(removedServer) {\n      // We are listening to events from the entire collection, but\n      // `populateAnyServer` may have been called with a subset of servers.\n      const removedIndex = relevantServers.indexOf(removedServer);\n\n      if (removedIndex > -1) {\n        // If a server is removed from the collection, we should no longer\n        // consider it a relevant server.\n        relevantServers.splice(removedIndex, 1);\n\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        if (this.hasOnlyRejectedServers(relevantServers)) {\n          deferred.reject();\n        }\n      }\n    }\n\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'changedServer' implicitly has an 'any' ... Remove this comment to see the full error message\n    function onServerResolvedChange(changedServer, isResolved) {\n      // We are listening to events from the entire collection, but\n      // `populateAnyServer` may have been called with a subset of servers.\n      const isRelevantServer = _.contains(relevantServers, changedServer);\n\n      if (isRelevantServer && isResolved) {\n        deferred.resolve(changedServer);\n      }\n    }\n\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'changedServer' implicitly has an 'any' ... Remove this comment to see the full error message\n    function onServerRejectedChange(changedServer, isRejected) {\n      // We are listening to events from the entire collection, but\n      // `populateAnyServer` may have been called with a subset of servers.\n      const isRelevantServer = _.contains(relevantServers, changedServer);\n\n      if (\n        isRelevantServer &&\n        isRejected &&\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.hasOnlyRejectedServers(relevantServers)\n      ) {\n        deferred.reject();\n      }\n    }\n\n    // Wait for a connectionTestResult change, which will notify if a server\n    // authenticates or fails.\n    this.on(\n      {\n        remove: onServerRemove,\n        'change:isResolved': onServerResolvedChange,\n        'change:isRejected': onServerRejectedChange,\n      },\n      this\n    );\n\n    deferred.always(() => {\n      this.off('change:isResolved', onServerResolvedChange, this);\n      this.off('change:isRejected', onServerRejectedChange, this);\n    });\n\n    return deferred.promise();\n  },\n\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'options' implicitly has an 'any' type.\n  populateServer(options) {\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'server' implicitly has an 'any' type.\n    return this.findServer(options, true).then((server) => {\n      // If a media server is connected, resolve immediately and deal with a\n      // newly failed server later in the pipeline. Otherwise wait for the\n      // server to populate. The cloud server (plex.tv) must be resolved since\n      // `isConnected` does not mean the user is authenticated.\n\n      if (server.get('isConnected') && !server.get('isCloud')) {\n        return $.Deferred().resolve(server);\n      }\n\n      return server.populate();\n    });\n  },\n\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'options' implicitly has an 'any' type.\n  findServer(options, requiresPopulate) {\n    const isString = _.isString(options);\n    // Allow `findServer(id)` to be mapped to the correct options.\n    const findOptions = isString ? { machineIdentifier: options } : options;\n    const deferred = $.Deferred();\n\n    if (isString) {\n      // Short circuit the async activity below when the `findServer` is\n      // provided a scalar `options` argument matching the machineIdentifier of\n      // a resolved server. Resolve the returned promise after a timeout so the\n      // promise from this method always resolves async.\n      const server = this.get(findOptions.machineIdentifier);\n\n      if (server && server.get('isResolved')) {\n        window.setTimeout(deferred.resolve.bind(deferred, server), 0);\n        return deferred.promise();\n      }\n    }\n\n    const findByID = _.has(findOptions, 'machineIdentifier');\n    const changeEvents = _.map(_.keys(findOptions), (key) => 'change:' + key);\n    const listenEvents = 'add ' + changeEvents.join(' ');\n\n    // @ts-expect-error ts-migrate(7034) FIXME: Variable 'activeFilterPromise' implicitly has type... Remove this comment to see the full error message\n    let activeFilterPromise;\n\n    function onServersChange() {\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      const filterPromise = this.filterServers(findOptions, requiresPopulate);\n\n      if (filterPromise) {\n        // Only let this promise resolve or reject the returned promise if it\n        // was the most recently created.\n        activeFilterPromise = filterPromise;\n\n        // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'server' implicitly has an 'any' type.\n        filterPromise.done((server) => {\n          // @ts-expect-error ts-migrate(7005) FIXME: Variable 'activeFilterPromise' implicitly has an '... Remove this comment to see the full error message\n          if (activeFilterPromise === filterPromise) {\n            deferred.resolve(server);\n          }\n        });\n\n        filterPromise.fail(() => {\n          // @ts-expect-error ts-migrate(7005) FIXME: Variable 'activeFilterPromise' implicitly has an '... Remove this comment to see the full error message\n          if (activeFilterPromise === filterPromise) {\n            // If not finding a specific identifier, we should not reject until\n            // we know that all servers are known since another server that\n            // matches the filter may be added.\n            // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n            if (findByID || !this.isPopulating()) {\n              deferred.reject();\n            } else {\n              // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n              this.populate().always(onServersChange.bind(this));\n            }\n          }\n        });\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      } else if (!this.isPopulating()) {\n        deferred.reject();\n      }\n    }\n\n    // Kick off a change manually once so we try an initial filter of servers.\n    onServersChange.call(this);\n\n    // Wait for a server to change or be added to the collection that matches\n    // the criteria.\n    this.on(listenEvents, onServersChange, this);\n\n    this.populate().always(() => {\n      // If all initial servers have been discovered and we still haven't\n      // yielded a promise, we never saw the server we were looking for.\n      // @ts-expect-error ts-migrate(7005) FIXME: Variable 'activeFilterPromise' implicitly has an '... Remove this comment to see the full error message\n      if (!activeFilterPromise) {\n        deferred.reject();\n      }\n    });\n\n    deferred.always(() => {\n      this.off(listenEvents, onServersChange, this);\n    });\n\n    return deferred.promise();\n  },\n\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'options' implicitly has an 'any' type.\n  filterServers(options, requiresPopulate) {\n    const servers = this.where(options);\n\n    if (servers.length) {\n      if (requiresPopulate) {\n        return this.populateAnyServer(servers);\n      } else {\n        return $.Deferred().resolve(servers[0]).promise();\n      }\n    }\n  },\n\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  hasOnlyRejectedServers(servers = this.models) {\n    // Allow a set of servers to be passed in to iterate through, but default to\n    // the entire collection.\n    return _.every(servers, (server) => server.get('isRejected'));\n  },\n\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  hasLoopbackServer(servers = this.models) {\n    return !!_.find(servers, (server) => {\n      const activeConnection = server.get('activeConnection');\n\n      return !!activeConnection && activeConnection.get('isLoopback');\n    });\n  },\n});\n\nexport default ServerCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport attrTypes from 'app/js/models/attrTypes';\nimport ServerModel from 'app/js/models/server/ServerModel';\nimport * as connectionTestStates from 'app/js/utils/constants/server/connectionTestStates';\nimport { CLOUD_SERVER_ID } from 'app/js/utils/constants/serverIDs';\n\nconst { isCloud, ...otherSessionAttrs } = ServerModel.prototype.sessionAttrs;\n\nconst TransientServerModel = ServerModel.extend({\n  //\n  // Properties\n\n  name: 'TransientServerModel',\n\n  cache: null,\n  persistInCache: false,\n\n  sessionAttrs: {\n    ...otherSessionAttrs,\n    isTransient: attrTypes.boolean,\n    originalMachineIdentifier: attrTypes.string,\n  },\n\n  derivedAttrs: {\n    ...ServerModel.prototype.derivedAttrs,\n    isCloud() {\n      return this.get('originalMachineIdentifier') === CLOUD_SERVER_ID;\n    },\n  },\n\n  defaults() {\n    // eslint-disable-next-line prefer-rest-params\n    const defaults = ServerModel.prototype.defaults.apply(this, arguments);\n\n    return {\n      ...defaults,\n      friendlyName: 'Transient Server',\n      isTransient: true,\n    };\n  },\n\n  updateCacheKey() {\n    // Override since transient servers are not cached.\n  },\n\n  // Control\n\n  testConnection(connection: any) {\n    if (this.get('originalMachineIdentifier') === CLOUD_SERVER_ID) {\n      // Treat the transient plex.tv connection as automatically-successful.\n      // The providers populate request will act as the real health check.\n      connection.set({ testState: connectionTestStates.CONNECTED });\n      this.onConnectionTestSuccess(connection);\n    } else {\n      // eslint-disable-next-line prefer-rest-params\n      return ServerModel.prototype.testConnection.apply(this, arguments);\n    }\n  },\n});\n\nexport default TransientServerModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ProviderIntegrationModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ProviderIntegrationModel',\n  context: ['server', 'provider'],\n  rootPropertyName: 'Integration',\n\n  syncedAttrs: {\n    id: attrTypes.string.isRequired,\n    status: attrTypes.string.isRequired,\n  },\n});\n\nexport default ProviderIntegrationModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport ProviderIntegrationModel from './ProviderIntegrationModel';\n\nconst ProviderIntegrationCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ProviderIntegrationCollection',\n  context: ['server', 'provider'],\n  url: '/integrations',\n  responseType: responseTypes.json,\n\n  model: ProviderIntegrationModel,\n});\n\nexport default ProviderIntegrationCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport ProviderIntegrationCollection from 'app/js/models/provider/ProviderIntegrationCollection';\n\nconst ProviderIntegrationsModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ProviderIntegrationsModel',\n\n  sessionAttrs: {\n    isIntegrationsOnboarding: attrTypes.boolean.isRequired,\n    isIntegrationsPending: attrTypes.boolean.isRequired,\n    isIntegrationsPopulated: attrTypes.boolean.isRequired,\n    integrationsError: attrTypes.object,\n  },\n\n  sessionRelations: {\n    integrations: {\n      relationClass: ProviderIntegrationCollection,\n      deferred: true,\n    },\n  },\n\n  defaults: {\n    isIntegrationsOnboarding: false,\n    isIntegrationsPending: true,\n    isIntegrationsPopulated: false,\n  },\n});\n\nexport default ProviderIntegrationsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport MetadataCollection from 'app/js/models/metadata/MetadataCollection';\nimport MetadataModel from 'app/js/models/metadata/MetadataModel';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport MediaGrabOperationModel from 'app/js/models/subscription/MediaGrabOperationModel';\nimport replaceMetadataXMLElementNames from 'app/js/utils/parser/replaceMetadataXMLElementNames';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport { LIVE_TV_SESSION } from 'app/js/utils/state/entityTypes';\n\nconst LiveTVSessionModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'LiveTVSessionModel',\n  context: ['server', 'provider'],\n\n  entityType: LIVE_TV_SESSION,\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    // When creating a new live TV session, the model will not have a key, so\n    // fallback to the model's cid so the state tree is more consistent.\n\n    return createEntityID(\n      this.entityType,\n      state.key || this.cid,\n      this.server.entityID()\n    );\n  },\n\n  idAttribute: 'key',\n  rootPropertyName: 'MediaSubscription',\n\n  url() {\n    return `/media/subscriptions/${this.get('key')}`;\n  },\n\n  sessionAttrs: {\n    dvrID: attrTypes.integer,\n    channelIdentifier: attrTypes.string,\n    channelCallSign: attrTypes.string,\n    channelTitle: attrTypes.string,\n    activityUUID: attrTypes.string,\n    currentPosition: attrTypes.integer,\n    nextPosition: attrTypes.integer,\n    lastSeekPosition: attrTypes.integer,\n    startedAt: attrTypes.integer,\n    captureBuffer: attrTypes.object,\n  },\n\n  syncedAttrs: {\n    key: attrTypes.string,\n    type: attrTypes.integer,\n    title: attrTypes.string,\n  },\n\n  syncedRelations: {\n    grabOperation: {\n      relationClass: MediaGrabOperationModel,\n      rootPropertyName: 'MediaGrabOperation',\n      deferred: true,\n    },\n    timeline: {\n      relationClass: MetadataCollection,\n      rootPropertyName: 'Timeline',\n      deferred: true,\n    },\n  },\n\n  sessionRelations: {\n    airingMetadataItem: {\n      relationClass: MetadataModel,\n      deferred: true,\n    },\n\n    upNextMetadataItem: {\n      relationClass: MetadataModel,\n      deferred: true,\n    },\n  },\n\n  defaults: {\n    nextPosition: null,\n    lastSeekPosition: null,\n  },\n\n  //\n  // Control\n\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'responseText' implicitly has an 'any' t... Remove this comment to see the full error message\n  augmentResponseText(responseText, responseType) {\n    return responseType === responseTypes.xml\n      ? // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n        replaceMetadataXMLElementNames(responseText)\n      : responseText;\n  },\n\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'response' implicitly has an 'any' type.\n  augmentResponse(response) {\n    const mediaSubscription = response[this.rootPropertyName] || response;\n    const timeline = mediaSubscription.Timeline;\n\n    if (timeline) {\n      mediaSubscription.Timeline = timeline.Metadata;\n    }\n\n    return response;\n  },\n});\n\nexport default LiveTVSessionModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport HubCollection from 'app/js/models/metadata/HubCollection';\nimport LiveTVSessionModel from 'app/js/models/player/LiveTVSessionModel';\nimport { ALL } from 'app/js/utils/constants/metrics/metricsPlayers';\nimport {\n  CLOSED as LOCAL_TO_REMOTE_CLOSED,\n  CONFIRMED as LOCAL_TO_REMOTE_CONFIRMED,\n  OPEN as LOCAL_TO_REMOTE_OPEN,\n} from 'app/js/utils/constants/player/confirmLocalToRemoteStates';\nimport { FULL, MINI } from 'app/js/utils/constants/player/playerOpenStates';\nimport random from 'app/js/utils/string/random';\n\nconst DEFAULT_PLAYBACK_SESSION_ID = __TEST__\n  ? 'BAKED_RANDOM_PLAYBACK_SESSION_ID'\n  : random();\nconst PlayerModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'PlayerModel',\n  sessionAttrs: {\n    serverEntityID: attrTypes.string,\n    providerEntityID: attrTypes.string,\n    playbackSessionID: attrTypes.string,\n    syncplaySessionRoomID: attrTypes.string,\n    isOpen: attrTypes.boolean,\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 2.\n    previousOpenState: attrTypes.oneOf(FULL, MINI),\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 2.\n    openState: attrTypes.oneOf(FULL, MINI),\n    isPlayQueueVisible: attrTypes.boolean,\n    isLyricsVisible: attrTypes.boolean,\n    isPostPlayVisible: attrTypes.boolean,\n    isSettingsVisible: attrTypes.boolean,\n    isChaptersVisible: attrTypes.boolean,\n    isSubtitlesOffsetSettingsVisible: attrTypes.boolean,\n    isWatchTogetherLobbyVisible: attrTypes.boolean,\n    isWatchTogetherParticipantsVisible: attrTypes.boolean,\n    confirmPlayerUpsellPayload: attrTypes.object,\n    confirmPlaybackPayload: attrTypes.object,\n    confirmOffsetPayload: attrTypes.object,\n    confirmRemoteToLocal: attrTypes.boolean,\n    confirmLocalToRemote: attrTypes.oneOf(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 3.\n      LOCAL_TO_REMOTE_CLOSED,\n      LOCAL_TO_REMOTE_CONFIRMED,\n      LOCAL_TO_REMOTE_OPEN\n    ).isRequired,\n    decisions: attrTypes.object.isRequired,\n    currentDecision: attrTypes.object,\n    startMetadataItemEntityID: attrTypes.string,\n    startOffsetMilliseconds: attrTypes.integer,\n    startMediaIndex: attrTypes.integer,\n    positionSeconds: attrTypes.integer,\n    nextPositionSeconds: attrTypes.integer,\n    lastSeekPositionSeconds: attrTypes.integer,\n    durationSeconds: attrTypes.integer,\n    seekStartSeconds: attrTypes.integer,\n    seekEndSeconds: attrTypes.integer,\n    bandwidthTimeline: attrTypes.object,\n    lastInteractedAt: attrTypes.integer,\n    itemPlaybackTime: attrTypes.integer,\n    sessionPlaybackTime: attrTypes.integer,\n    playbackSpeed: attrTypes.float,\n    isPlayQueueLoading: attrTypes.boolean.isRequired,\n    isLiveTVTuning: attrTypes.boolean.isRequired,\n    isMediaLoading: attrTypes.boolean.isRequired,\n    isPostPlayLoading: attrTypes.boolean.isRequired,\n    isPaused: attrTypes.boolean.isRequired,\n    isBuffering: attrTypes.boolean.isRequired,\n    repeatAll: attrTypes.boolean.isRequired,\n    repeatOne: attrTypes.boolean.isRequired,\n    mediaIndex: attrTypes.integer,\n    partIndex: attrTypes.integer,\n    qualityIndex: attrTypes.integer,\n    availableQualities: attrTypes.array.isRequired,\n    controllable: attrTypes.object,\n    metricsPage: attrTypes.string,\n    metricsContextTuple: attrTypes.array,\n    metricsSetting: attrTypes.string,\n    metricsAutoPlay: attrTypes.boolean,\n    // @ts-expect-error ts-migrate(2556) FIXME: Expected 0 arguments, but got 1 or more.\n    metricsPlayer: attrTypes.oneOf(...ALL),\n    hasError: attrTypes.boolean.isRequired,\n    errorMessage: attrTypes.string,\n    errorCode: attrTypes.string,\n    errorCategory: attrTypes.string,\n    playbackStartTime: attrTypes.integer,\n    hasConflicts: attrTypes.boolean.isRequired,\n    isConflictCancelling: attrTypes.boolean,\n    cancelConflictError: attrTypes.object,\n    confirmLiveTVPlayback: attrTypes.boolean.isRequired,\n    adState: attrTypes.string,\n    adPositionSeconds: attrTypes.integer,\n    adDurationSeconds: attrTypes.integer,\n    // Display index, total, and time offset  aren't updated during remote\n    // playback. Time offset can float or integer.\n    adDisplayIndex: attrTypes.integer,\n    adDisplayTotal: attrTypes.integer,\n    adTimeOffsetSeconds: attrTypes.oneOfType(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 2.\n      attrTypes.integer,\n      attrTypes.float\n    ),\n    advertisingNoticePayload: attrTypes.object,\n    // This is a bufferedRangeShape[].\n    bufferedRanges: attrTypes.array,\n    canPlayThrough: attrTypes.boolean,\n    // Supported only for video these properties are used to position media\n    // overlays above the video frame portion of the video element.\n    mediaWidth: attrTypes.integer,\n    mediaHeight: attrTypes.integer,\n  },\n  derivedAttrs: {\n    isWatchTogether() {\n      return !!(this as any).get('syncplaySessionRoomID');\n    },\n  },\n  sessionRelations: {\n    playQueue: {\n      relationClass: AbstractModel,\n      deferred: true,\n    },\n    relatedHubs: {\n      relationClass: HubCollection,\n      deferred: true,\n    },\n    liveTVSession: {\n      relationClass: LiveTVSessionModel,\n      deferred: true,\n    },\n  },\n  defaults() {\n    return {\n      playbackSessionID: DEFAULT_PLAYBACK_SESSION_ID,\n      playbackSpeed: 1,\n      isOpen: false,\n      isPlayQueueVisible: false,\n      isLyricsVisible: false,\n      isPostPlayVisible: false,\n      isSettingsVisible: false,\n      isChaptersVisible: false,\n      isSubtitlesOffsetSettingsVisible: false,\n      isWatchTogetherLobbyVisible: false,\n      isWatchTogetherParticipantsVisible: false,\n      confirmPlaybackPayload: null,\n      confirmOffsetPayload: null,\n      confirmRemoteToLocal: false,\n      confirmLocalToRemote: LOCAL_TO_REMOTE_CLOSED,\n      decisions: {},\n      startMetadataItemEntityID: null,\n      startOffsetMilliseconds: null,\n      startMediaIndex: null,\n      positionSeconds: 0,\n      nextPositionSeconds: null,\n      lastSeekPositionSeconds: null,\n      durationSeconds: 0,\n      seekStartSeconds: 0,\n      seekEndSeconds: 0,\n      itemPlaybackTime: 0,\n      sessionPlaybackTime: 0,\n      isPlayQueueLoading: false,\n      isLiveTVTuning: false,\n      isMediaLoading: false,\n      isPostPlayLoading: false,\n      isPaused: false,\n      isBuffering: false,\n      repeatAll: false,\n      repeatOne: false,\n      availableQualities: [],\n      metricsAutoPlay: false,\n      hasError: false,\n      errorMessage: null,\n      errorCode: null,\n      errorCategory: null,\n      playbackStartTime: null,\n      hasConflicts: false,\n      isConflictCancelling: false,\n      cancelConflictError: null,\n      confirmLiveTVPlayback: false,\n      adState: null,\n      adPositionSeconds: null,\n      adDurationSeconds: null,\n      adDisplayIndex: null,\n      adDisplayTotal: null,\n      adTimeOffsetSeconds: null,\n      advertisingNoticePayload: null,\n      bufferedRanges: [],\n      canPlayThrough: false,\n      mediaWidth: null,\n      mediaHeight: null,\n    };\n  },\n});\nexport default PlayerModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const CLOSED = 1;\nexport const OPEN = 2;\nexport const CONFIRMED = 3;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const HTML = 'html';\nexport const MPV = 'mpv';\nexport const SAMSUNG_AVPLAY = 'samsung_avplay';\nexport const WEBMAF_VIDEO_PLAYER = 'webmaf_video_player';\n\nexport const ALL = [HTML, MPV, SAMSUNG_AVPLAY, WEBMAF_VIDEO_PLAYER];\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ProviderSettingsPageModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ProviderSettingsPageModel',\n  context: ['server', 'provider'],\n\n  sessionAttrs: {\n    isUpdatePending: attrTypes.boolean,\n    updateError: attrTypes.object,\n  },\n\n  defaults: {\n    isUpdatePending: false,\n    updateError: null,\n  },\n});\n\nexport default ProviderSettingsPageModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ServerLogPageModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ServerLogPageModel',\n\n  sessionAttrs: {\n    logLines: attrTypes.array.isRequired,\n    unfilteredLogLinesCount: attrTypes.integer.isRequired,\n    filter: attrTypes.string.isRequired,\n    logLevels: attrTypes.array.isRequired,\n    highlightedLineIndex: attrTypes.integer,\n    timeFilterStart: attrTypes.string.isRequired,\n    timeFilterEnd: attrTypes.string.isRequired,\n    isTimeFilterStartValid: attrTypes.boolean.isRequired,\n    isTimeFilterEndValid: attrTypes.boolean.isRequired,\n    showTimeFilter: attrTypes.boolean.isRequired,\n    showRawText: attrTypes.boolean.isRequired,\n  },\n\n  defaults() {\n    return {\n      logLines: [],\n      unfilteredLogLinesCount: 0,\n      filter: '',\n      logLevels: [],\n      timeFilterStart: '',\n      timeFilterEnd: '',\n      isTimeFilterStartValid: true,\n      isTimeFilterEndValid: true,\n      showRawText: false,\n      showTimeFilter: false,\n    };\n  },\n});\n\nexport default ServerLogPageModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst AuthCodeExchangeModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'AuthCodeExchangeModel',\n\n  sessionAttrs: {\n    code: attrTypes.string,\n    pinID: attrTypes.integer,\n    pinIDInitial: attrTypes.integer,\n    pinTimeout: attrTypes.integer,\n    authToken: attrTypes.string,\n    isBusy: attrTypes.boolean.isRequired,\n    // Normal errors are passed along to the auth app\n    errorMessage: attrTypes.string,\n    // Fatal errors are displayed in the desktop app, game over\n    fatalErrorMessage: attrTypes.string,\n  },\n\n  defaults: {\n    code: null,\n    pinID: null,\n    pinIDInitial: null,\n    pinTimeout: null,\n    authToken: null,\n    isBusy: false,\n    errorMessage: null,\n    fatalErrorMessage: null,\n  },\n});\n\nexport default AuthCodeExchangeModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport ProviderModel from 'app/js/models/provider/ProviderModel';\nimport ServerModel from 'app/js/models/server/ServerModel';\n\nconst BackgroundModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'BackgroundModel',\n\n  sessionAttrs: {\n    imageUrl: attrTypes.string,\n    themeMusicUrl: attrTypes.string,\n    allowBlur: attrTypes.boolean,\n    isBackgroundPending: attrTypes.boolean,\n  },\n\n  sessionRelations: {\n    server: {\n      relationClass: ServerModel,\n      deferred: true,\n    },\n    provider: {\n      relationClass: ProviderModel,\n      deferred: true,\n    },\n  },\n\n  defaults: {\n    allowBlur: true,\n    isBackgroundPending: false,\n  },\n});\n\nexport default BackgroundModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport DVRCollection from 'app/js/models/provider/livetv/dvr/DVRCollection';\n\nconst DVRSettingsUIModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'DVRSettingsUIModel',\n\n  sessionAttrs: {\n    isDvrsPending: attrTypes.boolean,\n    isDvrsPopulated: attrTypes.boolean,\n    dvrsError: attrTypes.object,\n    isUIPopulated: attrTypes.boolean,\n  },\n\n  sessionRelations: {\n    dvrs: {\n      relationClass: DVRCollection,\n      deferred: true,\n    },\n  },\n\n  defaults: {\n    isDvrsPending: false,\n    isDvrsPopulated: false,\n    dvrsError: null,\n    isUIPopulated: false,\n  },\n});\n\nexport default DVRSettingsUIModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport HubCollection from 'app/js/models/metadata/HubCollection';\n\nconst DiscoverPageModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'DiscoverPageModel',\n\n  sessionAttrs: {\n    providerEntityID: attrTypes.string,\n    hubKey: attrTypes.string,\n\n    isHubsPending: attrTypes.boolean.isRequired,\n    isHubsPopulated: attrTypes.boolean.isRequired,\n    hubsError: attrTypes.object,\n    hubsTitle: attrTypes.string,\n\n    isPromotedHubsPending: attrTypes.boolean.isRequired,\n    isPromotedHubsPopulated: attrTypes.boolean.isRequired,\n    promotedHubsError: attrTypes.object,\n\n    // Known cloud providers at time of populating promotedHubs\n    knownPromotedHubCloudProviderIDs: attrTypes.array.isRequired,\n  },\n\n  sessionRelations: {\n    hubs: {\n      relationClass: HubCollection,\n      deferred: true,\n    },\n\n    promotedHubs: {\n      relationClass: HubCollection,\n      deferred: true,\n    },\n  },\n\n  defaults() {\n    return {\n      isHubsPending: true,\n      isHubsPopulated: false,\n      hubsError: null,\n      hubsTitle: null,\n\n      isPromotedHubsPending: true,\n      isPromotedHubsPopulated: false,\n      promotedHubsError: null,\n\n      knownPromotedHubCloudProviderIDs: [],\n    };\n  },\n});\n\nexport default DiscoverPageModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport ProviderIntegrationsModel from 'app/js/models/provider/ProviderIntegrationsModel';\nimport PlayerModel from 'app/js/models/ui/PlayerModel';\nimport ProviderSettingsPageModel from 'app/js/models/ui/ProviderSettingsPageModel';\nimport ServerLogPageModel from 'app/js/views/v3/components/pages/help/ServerLogPageModel';\nimport AuthCodeExchangeModel from './AuthCodeExchangeModel';\nimport BackgroundModel from './BackgroundModel';\nimport DVRSettingsUIModel from './DVRSettingsUIModel';\nimport DiscoverPageModel from './DiscoverPageModel';\n\nconst DesktopUIModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'DesktopUIModel',\n\n  sessionRelations: {\n    background: {\n      relationClass: BackgroundModel,\n    },\n\n    authCodeExchange: {\n      relationClass: AuthCodeExchangeModel,\n    },\n\n    discoverPage: {\n      relationClass: DiscoverPageModel,\n    },\n\n    dvrSettingsUI: {\n      relationClass: DVRSettingsUIModel,\n    },\n\n    photoPlayer: {\n      relationClass: PlayerModel,\n    },\n\n    audioVideoPlayer: {\n      relationClass: PlayerModel,\n    },\n\n    romPlayer: {\n      relationClass: PlayerModel,\n    },\n\n    providerSettingsPage: {\n      relationClass: ProviderSettingsPageModel,\n    },\n\n    serverLogPage: {\n      relationClass: ServerLogPageModel,\n    },\n\n    providerIntegrations: {\n      relationClass: ProviderIntegrationsModel,\n    },\n  },\n});\n\nexport default DesktopUIModel;\n","import AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport * as responseTypes from 'app/js/models/responseTypes';\n\nconst AdConsentModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'AdConsentModel',\n\n  context: ['server'],\n\n  url: '/api/v2/user/consent',\n\n  responseType: responseTypes.json,\n\n  syncedAttrs: {\n    language: attrTypes.string,\n    remindAt: attrTypes.integer,\n    updatedAt: attrTypes.integer,\n    vendorListVersion: attrTypes.integer,\n    // Currently unused, to avoid unneeded memory pressure avoid turning it into\n    // a collection for now.\n    vendors: attrTypes.array,\n  },\n});\n\nexport default AdConsentModel;\n","import AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport * as responseTypes from 'app/js/models/responseTypes';\n\nconst GeoIPModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'GeoIPModel',\n\n  context: ['server'],\n\n  url: '/api/v2/geoip',\n\n  responseType: responseTypes.json,\n\n  syncedAttrs: {\n    european_union_member: attrTypes.boolean,\n  },\n});\n\nexport default GeoIPModel;\n","import { PayloadAction } from '@reduxjs/toolkit';\nimport { Server } from 'app/js/v4/core/servers/serversTypes';\nimport { PlainError } from 'app/js/v4/utils/data/api';\nimport { AsyncState } from 'app/js/v4/utils/data/asyncStateMarkers';\n\nexport enum MailingListState {\n  Empty = '',\n  Unsubscribed = 'unsubscribed',\n  Active = 'active',\n  Error = 'error',\n  Removed = 'removed',\n}\n\ntype Platforms = 'desktop' | 'qt';\n\ntype PlatformType = {\n  [field in Platforms]: UserFlex;\n};\n\nexport interface User extends PlatformType {\n  authToken: string;\n  anonymous: boolean;\n  country?: string;\n  email: string;\n  confirmed?: boolean;\n  emailOnlyAuth?: boolean;\n  features: UserFeature[];\n  guest?: boolean;\n  hasAllEntitlements?: boolean;\n  hasPassword?: boolean;\n  twoFactorEnabled?: boolean;\n  home?: boolean;\n  homeSize?: number;\n  id: number;\n  locale?: string;\n  mailingListActive?: boolean;\n  mailingListStatus?: MailingListState;\n  maxHomeSize?: number;\n  pin?: string;\n  queueEmail?: string;\n  queueUid?: string;\n  restricted?: boolean;\n  services: UserService[];\n  subscriptionDescription?: string;\n  thumb: string;\n  title?: string;\n  username: string;\n  friendlyName?: string;\n  uuid: string;\n  isAllFriendsPopulated: boolean;\n  isAllFriendsPending: boolean;\n  allFriends: string[];\n  allFriendsError?: boolean;\n  hasPlexPass: boolean;\n\n  // Session Attrs\n  isSignedIn: boolean;\n  hasAttemptedSignIn: boolean;\n  isFullUser: boolean;\n  hasInvalidToken: boolean;\n\n  providers: string[];\n  isProvidersPending: boolean;\n  isProvidersPopulated: boolean;\n  providersError: object | null;\n}\n\nexport interface UserState extends AsyncState {\n  details: UserDetails;\n}\n\nexport interface UserInvite {\n  createdAt: number;\n  email: string;\n  friend: boolean;\n  friendlyName: string;\n  home: boolean;\n  id: string;\n  isAccepting: boolean;\n  isRemoving: boolean;\n  server: boolean;\n  thumb: string;\n  username: string;\n  invitedEmail: string;\n}\n\nexport interface UserFlex {\n  isHomeDetailsPending: boolean;\n  isHomeUsersPending: boolean;\n  isInvitesPending: boolean;\n  isSentInvitesPending: boolean;\n  isHomeDetailsPopulated: boolean;\n  isHomeUsersPopulated: boolean;\n  isInvitesPopulated: boolean;\n  isSentInvitesPopulated: boolean;\n  invites: UserInvite[];\n  homeUsers: string[];\n  sentInvites: UserInvite[];\n}\n\nexport interface StableUser {\n  services: {\n    [key: string]: UserService;\n  };\n  features: {\n    [key: string]: boolean;\n  };\n}\n\nexport interface UserService {\n  id: string;\n  subscriptionType?: string;\n}\n\nexport enum UserSubscriptionState {\n  Active = 'active',\n  Canceled = 'canceled',\n  Ended = 'ended',\n  Inactive = 'inactive',\n  PendingCancellation = 'pending_cancellation',\n}\n\nexport enum UserSubscriptionType {\n  Arcade = 'arcade',\n  PlexPass = 'plexpass',\n  Tidal = 'tidal',\n}\n\n// This is a subset of available `subscription` and `pastSubscription`\n// attributes.\n// See: https://docs.plex.tv/docs/api/plex-tv-v2#users-get-user-data-get\nexport interface UserSubscription {\n  state: UserSubscriptionState;\n  type: UserSubscriptionType;\n}\n\nexport interface UserFeature {\n  uuid: string;\n}\n\nexport interface SidebarSettings {\n  hasCompletedSetup: boolean;\n  pinnedSources: PinnedSourceSetting[];\n}\n\nexport interface PinnedSourceSetting {\n  machineIdentifier: string;\n  providerIdentifier: string;\n  directoryID: string;\n  isHidden: boolean;\n}\n\nexport interface UserUpdatableDetails {\n  friendlyName: string;\n}\n\nexport interface UserDetails extends UserUpdatableDetails {\n  email: string;\n  username: string;\n  thumb: string;\n  anonymous: boolean;\n  isFullUser: boolean;\n}\n\nexport interface UserUpdateDetailsRequest extends UserUpdatableDetails {\n  avatar: string;\n}\n\nexport interface UserUpdateDetailsSuccess {\n  friendlyName: string;\n  thumb: string;\n}\n\nexport type FetchUserDetailsRequestAction = PayloadAction<{\n  server: Server;\n}>;\n\nexport type FetchUserDetailsRequestSucceeded = PayloadAction<{\n  details: UserDetails;\n}>;\n\nexport type UpdateUserDetailsRequestAction = PayloadAction<{\n  server: Server;\n  update: UserUpdateDetailsRequest;\n}>;\n\nexport type UpdateUserDetailsRequestSucceeded = PayloadAction<{\n  details: UserUpdateDetailsSuccess;\n}>;\n\nexport type UserDetailsRequestFailed = PayloadAction<{\n  error: PlainError;\n}>;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport attrTypes from 'app/js/models/attrTypes';\nimport {\n  CONTENT_RATING,\n  EXCLUDE_CONTENT_RATING,\n  EXCLUDE_LABEL,\n  LABEL,\n} from 'app/js/utils/constants/filterOptionTagTypes';\n\nfunction createBoolRestrictionAttrType(attrKey: any) {\n  return {\n    type: attrTypes.boolean,\n    save() {\n      return (this as any).has(attrKey);\n    },\n  };\n}\nfunction createFilterAttrType(attrKey: any) {\n  return {\n    type: attrTypes.queryString,\n    separators: ['|', '&'],\n    orFields: [CONTENT_RATING, LABEL],\n    andFields: [EXCLUDE_CONTENT_RATING, EXCLUDE_LABEL],\n    save() {\n      return (this as any).has(attrKey);\n    },\n  };\n}\nconst sharingSettingsAttrs = {\n  allowTuners: {\n    type: attrTypes.integer,\n    save() {\n      return (this as any).has('allowTuners');\n    },\n  },\n  allowSync: createBoolRestrictionAttrType('allowSync'),\n  allowChannels: createBoolRestrictionAttrType('allowChannels'),\n  filterMovies: createFilterAttrType('filterMovies'),\n  filterTelevision: createFilterAttrType('filterTelevision'),\n  filterMusic: createFilterAttrType('filterMusic'),\n  filterPhotos: createFilterAttrType('filterPhotos'),\n};\nexport default sharingSettingsAttrs;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const CONTENT_RATING = 'contentRating';\nexport const EXCLUDE_CONTENT_RATING = 'contentRating!';\nexport const LABEL = 'label';\nexport const EXCLUDE_LABEL = 'label!';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst ServerShareLibraryModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ServerShareLibraryModel',\n\n  syncedAttrs: {\n    id: attrTypes.integer,\n    key: attrTypes.string,\n    title: attrTypes.string,\n    type: attrTypes.string,\n  },\n});\n\nexport default ServerShareLibraryModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ServerShareLibraryModel from './ServerShareLibraryModel';\n\nconst ServerShareLibraryCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ServerShareLibraryCollection',\n\n  context: ['server'],\n\n  model: ServerShareLibraryModel,\n});\n\nexport default ServerShareLibraryCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport sharingSettingsAttrs from 'app/js/utils/types/sharingSettingsAttrs';\n\nconst ServerShareSharingSettingsModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ServerShareSharingSettingsModel',\n\n  syncedAttrs: sharingSettingsAttrs,\n});\n\nexport default ServerShareSharingSettingsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport preserveMergeStrategy from 'app/js/models/preserveMergeStrategy';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport ServerShareLibraryCollection from './ServerShareLibraryCollection';\nimport ServerShareSharingSettingsModel from './ServerShareSharingSettingsModel';\n\nconst ServerShareModel2 = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ServerShareModel2',\n  context: ['server'],\n\n  mergeStrategy: preserveMergeStrategy,\n\n  responseType: responseTypes.json,\n\n  urlRoot: 'api/v2/shared_servers',\n\n  syncedAttrs: {\n    id: attrTypes.integer,\n    serverId: attrTypes.integer,\n    machineIdentifier: attrTypes.string,\n    name: attrTypes.string,\n    owned: attrTypes.boolean,\n    admin: attrTypes.boolean,\n    pending: attrTypes.boolean,\n    accepted: attrTypes.boolean,\n    ownerId: attrTypes.integer,\n    inviteToken: attrTypes.string,\n    invitedEmail: attrTypes.string,\n    invitedAt: attrTypes.string,\n    acceptedAt: attrTypes.string,\n    lastSeenAt: attrTypes.string,\n    deletedAt: attrTypes.string,\n    leftAt: attrTypes.string,\n    numLibraries: attrTypes.integer,\n    allLibraries: attrTypes.boolean,\n  },\n\n  syncedRelations: {\n    libraries: {\n      relationClass: ServerShareLibraryCollection,\n    },\n\n    sharingSettings: {\n      relationClass: ServerShareSharingSettingsModel,\n    },\n  },\n});\n\nexport default ServerShareModel2;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport ServerShareModel2 from './ServerShareModel2';\n\nconst ServerShareCollection2 = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ServerShareCollection2',\n\n  context: ['server'],\n\n  model: ServerShareModel2,\n});\n\nexport default ServerShareCollection2;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport sharingSettingsAttrs from 'app/js/utils/types/sharingSettingsAttrs';\nimport ServerShareCollection2 from './ServerShareCollection2';\n\nconst FriendModel2 = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'FriendModel2',\n\n  context: ['server'],\n\n  rootPropertyName: 'User',\n\n  entityType: entityTypes.FRIEND,\n\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    return createEntityID(this.entityType, state.id);\n  },\n\n  urlRoot() {\n    return this.get('home') ? '/api/users' : '/api/friends';\n  },\n\n  sessionAttrs: {\n    user: attrTypes.string,\n    isRemoving: attrTypes.boolean,\n  },\n\n  syncedAttrs: {\n    id: attrTypes.integer,\n    home: attrTypes.boolean,\n    protected: attrTypes.boolean,\n    restricted: attrTypes.boolean,\n    title: attrTypes.string,\n    username: attrTypes.string,\n    email: attrTypes.string,\n    thumb: attrTypes.string,\n    recommendationsPlaylistId: attrTypes.string,\n    ...sharingSettingsAttrs,\n  },\n\n  syncedRelations: {\n    serverShares: {\n      relationClass: ServerShareCollection2,\n      rootPropertyName: 'Server',\n    },\n  },\n\n  defaults: {\n    isRemoving: false,\n  },\n});\n\nexport default FriendModel2;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport FriendModel2 from './FriendModel2';\n\nconst FriendCollection2 = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'FriendCollection2',\n\n  context: ['server'],\n\n  model: FriendModel2,\n\n  url: '/api/users',\n});\n\nexport default FriendCollection2;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport * as responseTypes from 'app/js/models/responseTypes';\n\nconst HomeDetailsModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'HomeDetailsModel',\n\n  context: ['server'],\n\n  url: '/api/v2/home',\n\n  responseType: responseTypes.json,\n\n  sessionAttrs: {\n    isTogglingGuestUser: attrTypes.boolean,\n  },\n\n  syncedAttrs: {\n    id: attrTypes.integer,\n    guestUserID: attrTypes.integer,\n    guestEnabled: attrTypes.boolean,\n    subscription: attrTypes.boolean,\n    name: attrTypes.string,\n  },\n\n  defaults: {\n    isTogglingGuestUser: false,\n  },\n});\n\nexport default HomeDetailsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst UserProfileModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'UserProfileModel',\n  context: ['server'],\n  url: '/api/v2/user/profile',\n\n  syncedAttrs: {\n    autoSelectAudio: attrTypes.boolean,\n    autoSelectSubtitle: attrTypes.integer,\n    defaultAudioLanguage: attrTypes.string,\n    defaultSubtitleLanguage: attrTypes.string,\n    defaultSubtitleAccessibility: attrTypes.integer,\n    defaultSubtitleForced: attrTypes.integer,\n  },\n});\n\nexport default UserProfileModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport UserSettingModel from './UserSettingModel';\n\nconst UserSettingCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'UserSettingCollection',\n\n  context: ['server'],\n\n  model: UserSettingModel,\n});\n\nexport default UserSettingCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { resolve } from 'app/js/adapters/adapters';\nimport storageAdapter from 'app/js/adapters/storageAdapter';\nimport commands from 'app/js/commands/commands';\nimport Backbone from 'app/js/initializers/extensions/BackboneExtension';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport addFlexModel from 'app/js/models/addFlexModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport config from 'app/js/models/config';\nimport controlledPopulateMixin from 'app/js/models/mixins/controlledPopulateMixin';\nimport ProviderCollection from 'app/js/models/provider/ProviderCollection';\nimport userStorageModel from 'app/js/models/storage/userStorageModel';\nimport AdConsentModel from 'app/js/models/user/AdConsentModel';\nimport GeoIPModel from 'app/js/models/user/GeoIPModel';\nimport UserFeatureCollection from 'app/js/models/user/UserFeatureCollection';\nimport * as subscriptionStates from 'app/js/utils/constants/user/subscriptionStates';\nimport * as subscriptionTypes from 'app/js/utils/constants/user/subscriptionTypes';\nimport getUserRequestParams from 'app/js/utils/getUserRequestParams';\nimport log from 'app/js/utils/log/log';\nimport getUrlWithCampaignParams from 'app/js/utils/metrics/getUrlWithCampaignParams';\nimport parseJSON from 'app/js/utils/parser/parseJSON';\nimport alwaysResolve from 'app/js/utils/promise/alwaysResolve';\nimport whenEach from 'app/js/utils/promise/whenEach';\nimport path from 'app/js/utils/url/path';\nimport getUserAPIPromise from 'app/js/utils/user/getUserAPIPromise';\nimport { MailingListState } from 'app/js/v4/core/user/userTypes';\nimport jssha256 from 'app/js/libs/jssha256-0.1';\nimport FriendCollection2 from './FriendCollection2';\nimport HomeDetailsModel from './HomeDetailsModel';\nimport HomeUserCollection from './HomeUserCollection';\nimport UserEntitlementCollection from './UserEntitlementCollection';\nimport UserProfileModel from './UserProfileModel';\nimport UserRoleCollection from './UserRoleCollection';\nimport UserServiceCollection from './UserServiceCollection';\nimport UserSettingCollection from './UserSettingCollection';\nimport UserSubscriptionCollection from './UserSubscriptionCollection';\nimport { userExperienceSettingsID } from './userExperienceModelAttrs';\n\nconst UserModel = AbstractModel.extend({\n  mixins: [controlledPopulateMixin],\n  //\n  // Properties\n  name: 'UserModel',\n  context: ['server'],\n  url() {\n    return path.join('/api/v2/user', getUserRequestParams(this));\n  },\n  sessionAttrs: {\n    isRemote: attrTypes.boolean,\n    isSignedIn: attrTypes.boolean.isRequired,\n    hasAttemptedSignIn: attrTypes.boolean.isRequired,\n    hasInvalidToken: attrTypes.boolean.isRequired,\n    hasInvalidAnonymousUserToken: attrTypes.boolean.isRequired,\n    lastPrimaryServerID: attrTypes.string,\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n    homeUsers: attrTypes.instanceOf(HomeUserCollection).isRequired,\n    isFeaturesPending: attrTypes.boolean.isRequired,\n    isFeaturesPopulated: attrTypes.boolean.isRequired,\n    featuresError: attrTypes.object,\n    isAllFriendsPending: attrTypes.boolean.isRequired,\n    isAllFriendsPopulated: attrTypes.boolean.isRequired,\n    allFriendsError: attrTypes.object,\n    isProvidersPending: attrTypes.boolean.isRequired,\n    isProvidersPopulated: attrTypes.boolean.isRequired,\n    providersError: attrTypes.object,\n  },\n  syncedAttrs: {\n    id: attrTypes.integer,\n    uuid: attrTypes.string,\n    authToken: attrTypes.string,\n    anonymous: attrTypes.boolean,\n    username: attrTypes.string,\n    friendlyName: attrTypes.string,\n    email: attrTypes.string,\n    confirmed: attrTypes.boolean,\n    emailOnlyAuth: attrTypes.boolean,\n    title: attrTypes.string,\n    subscriptionDescription: attrTypes.string,\n    locale: attrTypes.string,\n    country: attrTypes.string,\n    thumb: attrTypes.string,\n    pin: attrTypes.string,\n    home: attrTypes.boolean,\n    restricted: attrTypes.boolean,\n    guest: attrTypes.boolean,\n    homeSize: attrTypes.integer,\n    maxHomeSize: attrTypes.integer,\n    queueUid: attrTypes.string,\n    queueEmail: attrTypes.string,\n    hasAllEntitlements: attrTypes.boolean,\n    mailingListActive: attrTypes.boolean,\n    experimentalFeatures: attrTypes.boolean,\n    hasPassword: attrTypes.boolean,\n    twoFactorEnabled: attrTypes.boolean,\n    mailingListStatus: attrTypes.oneOf(\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 5.\n      MailingListState.Empty,\n      MailingListState.Unsubscribed,\n      MailingListState.Active,\n      MailingListState.Error,\n      MailingListState.Removed\n    ),\n    adsConsent: attrTypes.boolean,\n    adsConsentSetAt: attrTypes.integer,\n    adsConsentReminderAt: attrTypes.integer,\n  },\n  sessionRelations: {\n    features: {\n      relationClass: UserFeatureCollection,\n    },\n    allFriends: {\n      relationClass: FriendCollection2,\n    },\n    providers: {\n      relationClass: ProviderCollection,\n    },\n    homeDetails: {\n      relationClass: HomeDetailsModel,\n    },\n  },\n  syncedRelations: {\n    subscriptions: {\n      relationClass: UserSubscriptionCollection,\n    },\n    pastSubscriptions: {\n      relationClass: UserSubscriptionCollection,\n    },\n    roles: {\n      relationClass: UserRoleCollection,\n    },\n    entitlements: {\n      relationClass: UserEntitlementCollection,\n    },\n    settings: {\n      relationClass: UserSettingCollection,\n    },\n    consent: {\n      relationClass: AdConsentModel,\n    },\n    geo: {\n      relationClass: GeoIPModel,\n    },\n    experienceSettings() {\n      return {\n        relationClass: resolve('UserExperienceSettingsModel'),\n      };\n    },\n    services: {\n      relationClass: UserServiceCollection,\n    },\n    profile: {\n      relationClass: UserProfileModel,\n    },\n  },\n  derivedAttrs: {\n    isFullUser() {\n      return (\n        !!(this as any).get('username') || !!(this as any).get('anonymous')\n      );\n    },\n    isEmployee() {\n      return !!(this as any).get('roles').get('employee');\n    },\n    isNinja() {\n      return (\n        (this as any).get('isEmployee') ||\n        !!(this as any).get('roles').get('ninja')\n      );\n    },\n    hasPlexSubscription() {\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'subscription' implicitly has an 'any' t... Remove this comment to see the full error message\n      return (this as any).get('subscriptions').some((subscription) => {\n        const state = subscription.get('state');\n        return (\n          state === subscriptionStates.ACTIVE ||\n          state === subscriptionStates.PENDING_CANCELLATION\n        );\n      });\n    },\n    hasPlexPass() {\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'subscription' implicitly has an 'any' t... Remove this comment to see the full error message\n      return (this as any).get('subscriptions').some((subscription) => {\n        const type = subscription.get('type');\n        const state = subscription.get('state');\n        return (\n          type === subscriptionTypes.PLEX_PASS &&\n          (state === subscriptionStates.ACTIVE ||\n            state === subscriptionStates.PENDING_CANCELLATION)\n        );\n      });\n    },\n    canGoPremium() {\n      const hasHomeMembers = (this as any).get('homeSize') > 1;\n      const homeDetails = (this as any).get('homeDetails');\n      // Avoid falsey values until `homeDetails` has been populated.\n      const homeOwnerDoesNotHaveSubscription =\n        homeDetails.get('subscription') === false;\n      // Users in someone else's home already receive many Plex subscription\n      // benefits from the home admin if the home admin has a Plex\n      // subscription, and are unlikely to have their own servers. Managed\n      // users cannot have a Plex subscription.\n      return (\n        (this as any).get('signedIn') &&\n        !(this as any).get('anonymous') &&\n        !(this as any).get('restricted') &&\n        !(this as any).get('hasPlexSubscription') &&\n        (!hasHomeMembers || homeOwnerDoesNotHaveSubscription)\n      );\n    },\n    signedIn() {\n      // DEPRECATED\n      return (this as any).get('isSignedIn');\n    },\n  },\n  defaults() {\n    const defaultOptions = {\n      server: this.server,\n      parent: this,\n    };\n    return {\n      id: 0,\n      isRemote: false,\n      isSignedIn: false,\n      hasAttemptedSignIn: false,\n      hasInvalidToken: false,\n      hasInvalidAnonymousUserToken: false,\n      hasPassword: true,\n      homeUsers: new HomeUserCollection([], defaultOptions),\n      twoFactorEnabled: false,\n      isFeaturesPending: true,\n      isFeaturesPopulated: false,\n      featuresError: null,\n      isAllFriendsPending: true,\n      isAllFriendsPopulated: false,\n      allFriendsError: null,\n      isProvidersPending: true,\n      isProvidersPopulated: false,\n      providersError: null,\n    };\n  },\n  //\n  // Init\n  // @ts-expect-error ts-migrate(6133) FIXME: 'attributes' is declared but its value is never re... Remove this comment to see the full error message\n  initialize(attributes, options) {\n    this._resetPopulate();\n    this.onHomeUsersChange(this, this.get('homeUsers'));\n    this.on('change:homeUsers', this.onHomeUsersChange, this);\n    this.listenTo(this.server, {\n      'change:isConnected': this.onServerConnectedChange,\n      'change:isUnavailable': this.onServerUnavailableChange,\n    });\n  },\n  uninitialize() {\n    this.off('change:homeUsers', this.onHomeUsersChange, this);\n    this.stopListening();\n  },\n  //\n  // Control\n  fetch() {\n    // Users have a controlled populate promise. A fetch override allows this to\n    // bypass the `populateMixin`.\n    // eslint-disable-next-line prefer-rest-params\n    return Backbone.Model.prototype.fetch.apply(this, arguments);\n  },\n  augmentResponse(response = {}) {\n    const {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'roles' does not exist on type '{}'.\n      roles,\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'entitlements' does not exist on type '{}... Remove this comment to see the full error message\n      entitlements,\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'settings' does not exist on type '{}'.\n      settings,\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'providers' does not exist on type '{}'.\n      providers,\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'subscriptions' does not exist on type '{... Remove this comment to see the full error message\n      subscriptions,\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'pastSubscriptions' does not exist on typ... Remove this comment to see the full error message\n      pastSubscriptions,\n      ...remainingResponse\n    } = response;\n    // Lift the experience setting up into its own relation. This allows it to\n    // easily have its own model, defaults, and is easier to access.\n    let augmentedSettings =\n      settings && settings.setting ? settings.setting : [];\n    augmentedSettings = Array.isArray(augmentedSettings)\n      ? augmentedSettings\n      : [augmentedSettings];\n    const experienceSettingsModel = this.get('experienceSettings');\n    let hasExperienceSettingsInResponse = false;\n    const splitSettings = augmentedSettings.reduce(\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'acc' implicitly has an 'any' type.\n      (acc, setting) => {\n        if (setting.id === userExperienceSettingsID) {\n          hasExperienceSettingsInResponse = true;\n          acc.experienceSettings = {\n            ...parseJSON(setting.value),\n            updatedAt: setting.updatedAt,\n          };\n        } else {\n          acc.settings.push(setting);\n        }\n        return acc;\n      },\n      {\n        settings: [],\n        experienceSettings: {},\n      }\n    );\n    if (!hasExperienceSettingsInResponse && experienceSettingsModel) {\n      // When the response does not have experienceSettings, the existing\n      // experienceSettings would essentially be overwritten by the defaults.\n      // This would cause issues if the model already had experienceSettings\n      // (eg: current model might have experienceSettings that were restored\n      // from storage).  So here we augment the response to contain\n      // experienceSettings.\n      splitSettings.experienceSettings = experienceSettingsModel.toJSON({\n        syncedOnly: true,\n      });\n    }\n    // Handle the old and new properties for Ads Consent until, plex.tv's\n    // change is deployed.\n    // See: https://github.com/plexinc/my-plex/pull/4938\n    if ((remainingResponse as any).gdprConsent) {\n      (remainingResponse as any).adsConsent = (\n        remainingResponse as any\n      ).gdprConsent;\n    }\n    if ((remainingResponse as any).gdprSetAt) {\n      (remainingResponse as any).adsConsentSetAt = (\n        remainingResponse as any\n      ).gdprSetAt;\n    }\n    if ((remainingResponse as any).gdprReminderAt) {\n      (remainingResponse as any).adsConsentReminderAt = (\n        remainingResponse as any\n      ).gdprReminderAt;\n    }\n    return {\n      ...remainingResponse,\n      ...splitSettings,\n      roles: roles && roles.role,\n      hasAllEntitlements: entitlements && entitlements.all,\n      entitlements: entitlements && entitlements.entitlement,\n      services: providers && providers.provider,\n      subscriptions: subscriptions && subscriptions.subscription,\n      pastSubscriptions:\n        pastSubscriptions && pastSubscriptions.pastSubscription,\n    };\n  },\n  _getTokenPromise() {\n    const pinIDInitial = resolve('appModel')\n      .get('ui')\n      ?.get('authCodeExchange')\n      ?.get('pinIDInitial');\n    const knownUserTokenPromise = config.allowSSO\n      ? this._getSSOThenStorageTokenPromise()\n      : this._getStorageTokenPromise();\n    // When a pinIDInitial is present, it means we will be attempting to\n    // authenticate using that pin. Creating an anonymous user makes no sense\n    // in that case, even if authentication via pin fails.\n    return knownUserTokenPromise.then(null, () =>\n      this.get('hasInvalidAnonymousUserToken') || !!pinIDInitial || __BUNDLED__\n        ? this._getSkipAnonymousTokenPromise()\n        : this._getAnonymousTokenPromise()\n    );\n  },\n  _getSSOThenStorageTokenPromise() {\n    // eslint-disable foo\n    const storageTokenPromise = this._getStorageTokenPromise();\n    const ssoTokenPromise = this._getSSOTokenPromise();\n    const onSSOTokenMissing = () => {\n      if (this.get('anonymous')) {\n        log('[User] SSO status is not available, try stored anonymous token');\n        return storageTokenPromise;\n      }\n      // If the user is signed-out at plex.tv and a storage token is present,\n      // report credentials as expired.\n      log('[User] SSO status is signed-out');\n      return storageTokenPromise.then(() =>\n        alwaysResolve(this.signOutDueToInvalidToken())\n      );\n    };\n    // If the user is signed-in at plex.tv, and a storage token is present,\n    // check whether the SSO and storage tokens match.\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'ssoToken' implicitly has an 'any' type.\n    const onSSOTokenPresent = (ssoToken) => {\n      return storageTokenPromise.then(\n        // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'storageToken' implicitly has an 'any' t... Remove this comment to see the full error message\n        (storageToken) => {\n          if (ssoToken === storageToken) {\n            log(\n              '[User] SSO status is signed-in, storage token matches SSO token'\n            );\n            // Resolve with the SSO token if the tokens match\n            return ssoToken;\n          } else {\n            log(\n              `[User] SSO status is signed-in, storage accessToken=${storageToken} and SSO accessToken=${ssoToken} differ`\n            );\n            // Clear the storage token and user, then refresh to use the SSO\n            // token and sign the user in\n            return commands.execute('resetUser').then(() => {\n              window.location.reload();\n            });\n          }\n        },\n        () => {\n          log('[User] SSO status is signed-in, storage token is not present');\n          return $.Deferred<string>().resolve(ssoToken).promise();\n        }\n      );\n    };\n    // If the ssoTokenPromise fails, plex.tv is down; fall back to storage token\n    const onSSOTokenFailure = () => {\n      log('[User] SSO status is not available');\n      return storageTokenPromise;\n    };\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'ssoToken' implicitly has an 'any' type.\n    const onSSOTokenSuccess = (ssoToken) => {\n      // If the ssoTokenPromise succeeded, plex.tv is up; the user may be\n      // signed-in, or signed-out.\n      if (ssoToken) {\n        return onSSOTokenPresent(ssoToken);\n      } else {\n        return onSSOTokenMissing();\n      }\n    };\n    return ssoTokenPromise.then(onSSOTokenSuccess, onSSOTokenFailure);\n  },\n  _getStorageTokenPromise() {\n    return storageAdapter.get('myPlexAccessToken');\n  },\n  _getSSOTokenPromise() {\n    const xhrPromise = getUserAPIPromise(\n      this.server.getXHROptions('/api/v2/users/signin', {\n        method: 'POST',\n        xhrFields: { withCredentials: true },\n        data: { skipAuthentication: true },\n        dataType: 'json',\n      })\n    );\n    return xhrPromise.then(\n      (json) => json.authToken,\n      (xhr) =>\n        xhr && xhr.status === 400\n          ? $.Deferred().resolve(null).promise()\n          : $.Deferred().reject().promise()\n    );\n  },\n  _getSkipAnonymousTokenPromise() {\n    log('[User] Not attempting to create an anonymous token.');\n    return $.Deferred().reject().promise();\n  },\n  _getAnonymousTokenPromise() {\n    const url = getUrlWithCampaignParams(\n      '/api/v2/users/anonymous',\n      resolve('metrics').toJSON().context\n    );\n    const xhrPromise = getUserAPIPromise(\n      this.server.getXHROptions(url, {\n        method: 'POST',\n        dataType: 'json',\n      })\n    );\n    return xhrPromise.then(({ authToken }) => {\n      log('[User] Anonymous token promise succeeded, accessToken=' + authToken);\n      return authToken;\n    });\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'myPlexAccessToken' implicitly has an 'a... Remove this comment to see the full error message\n  _getManualUserPromise(myPlexAccessToken) {\n    // Do not fetch the user directly since this model has a controlled\n    // promise. Add the access token manually since the user's server does not\n    // have an access token until the user is signed in.\n    return $.ajax(\n      this.server.getXHROptions(_.result(this, 'url'), {\n        headers: { 'X-Plex-Token': myPlexAccessToken },\n      })\n    );\n  },\n  signInUnsupervised() {\n    if (this._isSigningIn) {\n      return;\n    }\n    this._isSigningIn = true;\n    const tokenPromise = this._getTokenPromise();\n    // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'myPlexAccessToken' implicitly has an 'a... Remove this comment to see the full error message\n    tokenPromise.done((myPlexAccessToken) => {\n      // Use the `accessToken=` prefix and concatenation so redaction prevents\n      // display of a user's token in public builds.\n      log('[User] Token promise succeeded, accessToken=' + myPlexAccessToken);\n      const userPromise = myPlexAccessToken\n        ? this._getManualUserPromise(myPlexAccessToken)\n        : $.Deferred().reject().promise();\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'response' implicitly has an 'any' type.\n      userPromise.done((response) => {\n        log('[User] userPromise succeeded');\n        const homeDetails = this.get('homeDetails');\n        const homeDetailsPromise = homeDetails.fetch({\n          headers: { 'X-Plex-Token': myPlexAccessToken },\n        });\n        homeDetailsPromise.always(() => {\n          // If the user is part of a home and they have not enabled automatic\n          // login or they are a disabled guest user, we should prompt to select\n          // a user and enter a PIN if necessary before unlocking the app.\n          const parsedAttrs = this.parse(response);\n          this.signIn(parsedAttrs);\n          this._isSigningIn = false;\n        });\n      });\n      // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'xhr' implicitly has an 'any' type.\n      userPromise.fail((xhr) => {\n        log('[User] userPromise failed');\n        if (xhr && xhr.aborting) {\n          this.set({ hasAttemptedSignIn: true });\n          this._isSigningIn = false;\n          return;\n        }\n        // Sign the user out, if the user has an invalid token clear the access\n        // token. If the user has a valid token ensure features, settings and\n        // experience settings are kept.\n        // See: https://github.com/plexinc/plex-web-client/issues/8592\n        if (xhr && (xhr.status === 401 || xhr.status === 422)) {\n          if (this.get('anonymous')) {\n            log(\n              '[User] userPromise failed for anonymous user due to invalid token.'\n            );\n            this.signOutAnonymousUser();\n          } else {\n            log('[User] userPromise failed due to invalid token.');\n            this.signOutDueToInvalidToken();\n          }\n        } else {\n          this.signOut({\n            hasAttemptedSignIn: true,\n            hasInvalidToken: false,\n            features: this.get('features'),\n            allFriends: this.get('allFriends'),\n            settings: this.get('settings'),\n            experienceSettings: this.get('experienceSettings'),\n          });\n        }\n        this.server.testAllConnections();\n        this._isSigningIn = false;\n      });\n    });\n    tokenPromise.fail(() => {\n      log('[User] tokenPromise failed');\n      // Do not reset the signed out user's features and settings to their\n      // default values.  All other state should be reset to default values.\n      this.signOut({\n        hasAttemptedSignIn: true,\n        hasInvalidAnonymousUserToken: this.get('hasInvalidAnonymousUserToken'),\n        features: this.get('features'),\n        allFriends: this.get('allFriends'),\n        settings: this.get('settings'),\n        experienceSettings: this.get('experienceSettings'),\n      });\n      this._isSigningIn = false;\n    });\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'response' implicitly has an 'any' type.\n  signIn(response, attrs = {}, options = {}) {\n    const parsedAttrs = _.isString(response) ? this.parse(response) : response;\n    const authToken = parsedAttrs.authToken;\n    const userAttrs = {\n      hasAttemptedSignIn: true,\n      isSignedIn: true,\n      ...parsedAttrs,\n      ...attrs,\n    };\n    this._resolve(userAttrs, options);\n    return storageAdapter.set('myPlexAccessToken', authToken);\n  },\n  signOut(attrs = {}) {\n    // `isSignedIn` will be reset by the `restoreDefaults` call in `_reject`.\n    this._reject(attrs);\n    return $.Deferred().resolve().promise();\n  },\n  signOutAnonymousUser() {\n    return whenEach([\n      this.signOut({\n        hasAttemptedSignIn: true,\n        hasInvalidAnonymousUserToken: true,\n      }),\n      this.clearAccessToken(),\n    ]);\n  },\n  signOutDueToInvalidToken() {\n    // Use whenEach to ensure that each of these promises runs to completion\n    // before the parent resolves\n    return whenEach([\n      this.signOut({ hasAttemptedSignIn: true, hasInvalidToken: true }),\n      this.clearAccessToken(),\n    ]);\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'userID' implicitly has an 'any' type.\n  activateStoredUser(userID) {\n    userStorageModel.set('activeUserID', userID);\n  },\n  clearAccessToken() {\n    if ((window as any).PLEXWEB && (window as any).PLEXWEB.myPlexAccessToken) {\n      delete (window as any).PLEXWEB.myPlexAccessToken;\n    }\n    // Only remove the access token from storage. We should hang on to settings\n    // that live there.\n    let promise = storageAdapter.remove('myPlexAccessToken');\n    // Protect the other tokens in storage and remove any persisted servers for\n    // the user and their connections.\n    promise = promise.then(() => {\n      return userStorageModel.clearActiveUser();\n    });\n    return promise;\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'pin' implicitly has an 'any' type.\n  hashPIN(pin, token = this.get('authToken')) {\n    return jssha256.SHA256_hash(pin + token);\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'entitlement' implicitly has an 'any' ty... Remove this comment to see the full error message\n  hasEntitlement(entitlement) {\n    const hasAllEntitlements = this.get('hasAllEntitlements');\n    const entitlements = this.get('entitlements');\n    return !!(hasAllEntitlements || entitlements.get(entitlement));\n  },\n  hasHome() {\n    // This cannot be a derived attribute until homeUsers is a relation.\n    return !!this.get('pin') || this.get('homeUsers').length > 1;\n  },\n  isFullUser() {\n    // DEPRECATED\n    return this.get('isFullUser');\n  },\n  isEmployee() {\n    // DEPRECATED\n    return this.get('isEmployee');\n  },\n  isNinja() {\n    // DEPRECATED\n    return this.get('isNinja');\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'attrs' implicitly has an 'any' type.\n  _resolve(attrs, options = {}) {\n    // Capture all change events so the attributes are set when any promise\n    // callbacks are invoked while delaying the triggering of change events\n    // until the promise's state is resolved. This ensures all callbacks and\n    // event listeners get the complete representation of the resolved user.\n    this.startCapturingChangeEvents();\n    this.activateStoredUser(attrs.id);\n    this.set(attrs);\n    this._resolvePopulate();\n    this.server.authenticate(attrs.authToken);\n    if ((options as any).silent) {\n      this.discardCapturedChangeEvents();\n    } else {\n      this.releaseCapturedChangeEvents();\n    }\n  },\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'attrs' implicitly has an 'any' type.\n  _reject(attrs, options = {}) {\n    // Capture all change events so the attributes are set when any promise\n    // callbacks are invoked while delaying the triggering of change events\n    // until the promise's state is rejected. This ensures all callbacks and\n    // event listeners get the complete representation of the rejected user.\n    this.startCapturingChangeEvents();\n    // FIXME: Check how restoring features / settings to defaults after sign out\n    // affects anonymous users.\n    this.restoreDefaults(attrs);\n    this._rejectPopulate();\n    this.server.deauthenticate();\n    if ((options as any).silent) {\n      this.discardCapturedChangeEvents();\n    } else {\n      this.releaseCapturedChangeEvents();\n    }\n  },\n  //\n  // Listeners\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'user' implicitly has an 'any' type.\n  onHomeUsersChange(user, homeUsers) {\n    const previousHomeUsers = user.previous('homeUsers');\n    if (previousHomeUsers) {\n      this.stopListening(previousHomeUsers);\n    }\n    this.listenTo(\n      this.get('homeUsers'),\n      'reset add remove',\n      this.onHomeUsersUpdate\n    );\n  },\n  onHomeUsersUpdate() {\n    this.set('homeSize', this.get('homeUsers').length);\n    // When the status of the user's home changes we should fetch the details\n    // again to ensure we don't hold on to stale data when switching users.\n    this.get('homeDetails').fetch();\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'server' is declared but its value is never read.\n  onServerConnectedChange(server, isConnected) {\n    // If the connection to plex.tv succeeds, attempt to sign the user in with\n    // a token from storage, or obtain a token via SSO, or request an\n    // anonymous user token from plex.tv.\n    if (isConnected) {\n      this.signInUnsupervised();\n    }\n  },\n  // @ts-expect-error ts-migrate(6133) FIXME: 'server' is declared but its value is never read.\n  onServerUnavailableChange(server, isUnavailable) {\n    // If the connection to plex.tv fails, sign the user out automatically.\n    if (isUnavailable) {\n      this.signOut({\n        features: this.get('features'),\n        allFriends: this.get('allFriends'),\n        settings: this.get('settings'),\n        experienceSettings: this.get('experienceSettings'),\n      });\n    }\n  },\n});\naddFlexModel(UserModel, function () {\n  return {\n    relationClass: resolve('UserFlexModel'),\n  };\n});\nexport default UserModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport addSearchParams from 'app/js/utils/url/addSearchParams';\n\nexport default function getUrlWithCampaignParams(baseUrl: any, context: any) {\n  if (!context || !context.campaign) {\n    return baseUrl;\n  }\n\n  const campaignParams = Object.keys(context.campaign).reduce((acc, key) => {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    acc[`utm_${key}`] = context.campaign[key];\n    return acc;\n  }, {});\n\n  return addSearchParams(baseUrl, campaignParams);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport parseQueryString from 'app/js/utils/parser/parseQueryString';\nimport stringifyQueryString from 'app/js/utils/parser/stringifyQueryString';\nimport splitUrlSearchHashPathAndParams from 'app/js/utils/url/splitUrlSearchHashPathAndParams';\n\nfunction addSearchParams(url: any, params: any) {\n  const { base, searchParams, hashPath, hashParams } =\n    splitUrlSearchHashPathAndParams(url);\n  // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n  const parsedParams = parseQueryString(searchParams);\n\n  const stringifiedParams = stringifyQueryString({\n    ...parsedParams,\n    ...params,\n  });\n\n  const hashParts = (hashPath || hashParams ? '#' : '') + hashPath + hashParams;\n\n  return `${base}?${stringifiedParams}${hashParts}`;\n}\n\nexport default addSearchParams;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport PropTypes from 'prop-types';\nimport attrTypes from 'app/js/models/attrTypes';\n\nexport const UNKNOWN = 1;\nexport const AVAILABLE = 2;\nexport const MISSING = 3;\nexport const MISMATCHED = 4;\n\nconst availabilities = [UNKNOWN, AVAILABLE, MISSING, MISMATCHED];\n\nexport const shape = PropTypes.oneOf(availabilities);\n// @ts-expect-error ts-migrate(2556) FIXME: Expected 0 arguments, but got 1 or more.\nexport const attrType = attrTypes.oneOf(...availabilities);\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst EntityModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'EntityModel',\n\n  sessionAttrs: {\n    id: attrTypes.string.isRequired,\n  },\n\n  sessionRelations: {\n    model: {\n      relationClass: AbstractModel,\n      deferred: true,\n    },\n  },\n\n  //\n  // Control\n\n  toState() {\n    // Avoid `getState` since we don't want the entity's id to be substituted in\n    // this part of the state tree.\n\n    const model = this.get('model');\n\n    const state = {\n      entityID: this.id,\n      ...model.state,\n    };\n\n    Object.defineProperty(state, 'possibleEntityContainers', {\n      value: model.state.possibleEntityContainers,\n      enumerable: false,\n    });\n\n    return state;\n  },\n\n  shouldUpdateRelationState: function () {\n    // The next and previous state for entities will usually be the same since\n    // `getState` returns the entity's id. Always update state on state change\n    // since we want to include the model's actual state here.\n\n    return true;\n  },\n});\n\nexport default EntityModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport EntityModel from './EntityModel';\n\nconst EntityCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'EntityCollection',\n  model: EntityModel,\n\n  //\n  // Control\n\n  toState() {\n    // This collection's state uses an object instead of an array since order is\n    // not important and lookups are O(1).\n\n    const state = this.reduce(this.reduceState, {\n      possibleEntityContainers: [],\n    });\n\n    Object.defineProperty(state, 'possibleEntityContainers', {\n      enumerable: false,\n    });\n\n    return state;\n  },\n\n  reduceState(acc: any, entity: any) {\n    // Keep track of these ids to speed up garbage collection of entities.\n    acc.possibleEntityContainers.push(entity.id);\n    acc[entity.id] = entity.getState();\n    return acc;\n  },\n});\n\nexport default EntityCollection;\n","import { createSlice } from '@reduxjs/toolkit';\nimport serversSlice from 'app/js/v4/core/servers/serversSlice';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\nimport {\n  ServerDevicesFetchFailedAction,\n  ServerDevicesFetchRequestedAction,\n  ServerDevicesFetchSucceededAction,\n  ServerDevicesPerServerState,\n  ServerDevicesState,\n} from './serverDevicesTypes';\n\nconst initialState: ServerDevicesState = {};\n\nconst initialPerServerState: ServerDevicesPerServerState = {\n  devices: [],\n  isPending: false,\n  isPopulated: false,\n  error: null,\n};\n\nconst serverDevicesSlice = createSlice({\n  name: 'serverDevices',\n  initialState,\n\n  reducers: {\n    populateRequested(_state, _action: ServerDevicesFetchRequestedAction) {\n      // Handled by saga, no state change.\n    },\n\n    fetchRequested(state, { payload }: ServerDevicesFetchRequestedAction) {\n      const serverState = state[payload.server.machineIdentifier];\n\n      markPending(serverState);\n    },\n\n    fetchSucceeded(state, { payload }: ServerDevicesFetchSucceededAction) {\n      const serverState = state[payload.server.machineIdentifier];\n\n      markPopulated(serverState);\n      serverState.devices = payload.data;\n    },\n\n    fetchFailed(state, { payload }: ServerDevicesFetchFailedAction) {\n      const serverState = state[payload.server.machineIdentifier];\n\n      markFailed(serverState, payload.error);\n    },\n  },\n\n  extraReducers: (builder) => {\n    builder.addCase(serversSlice.actions.connected, (state, { payload }) => {\n      const { server } = payload;\n\n      if (!state[server.machineIdentifier]) {\n        state[server.machineIdentifier] = { ...initialPerServerState };\n      }\n    });\n  },\n});\n\nexport default serverDevicesSlice;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport {\n  markFailed,\n  markPending,\n  markPopulated,\n} from 'app/js/v4/utils/data/asyncStateMarkers';\nimport {\n  FetchUserDetailsRequestAction,\n  FetchUserDetailsRequestSucceeded,\n  UpdateUserDetailsRequestAction,\n  UpdateUserDetailsRequestSucceeded,\n  UserDetailsRequestFailed,\n  UserState,\n} from './userTypes';\n\nconst initialState: UserState = {\n  isPopulated: false,\n  isPending: false,\n  error: null,\n  details: {\n    thumb: '',\n    friendlyName: '',\n    email: '',\n    username: '',\n    anonymous: true,\n    isFullUser: false,\n  },\n};\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n\n  reducers: {\n    fetchUserDetails(state, _action: FetchUserDetailsRequestAction) {\n      markPending(state);\n    },\n\n    fetchUserDetailsSucceeded(\n      state,\n      { payload }: FetchUserDetailsRequestSucceeded\n    ) {\n      markPopulated(state);\n      state.details = payload.details;\n    },\n\n    fetchUserDetailsFailed(state, { payload }: UserDetailsRequestFailed) {\n      markFailed(state, payload.error);\n    },\n\n    updateUserDetails(state, _action: UpdateUserDetailsRequestAction) {\n      markPending(state);\n    },\n\n    updateUserDetailsSucceeded(\n      state,\n      { payload }: UpdateUserDetailsRequestSucceeded\n    ) {\n      markPopulated(state);\n      state.details = {\n        ...state.details,\n        ...payload.details,\n      };\n    },\n\n    updateUserDetailsFailed(state, { payload }: UserDetailsRequestFailed) {\n      markFailed(state, payload.error);\n    },\n\n    clearError(state, _action: PayloadAction) {\n      state.error = null;\n    },\n\n    languageChanged() {\n      // Handled by other slices for now, no state change.\n    },\n  },\n});\n\nexport default userSlice;\n","import { combineReducers } from '@reduxjs/toolkit';\nimport serverAccountsSlice from 'app/js/v4/core/serverAccounts/serverAccountsSlice';\nimport serverActivitiesSlice from 'app/js/v4/core/serverActivities/serverActivitiesSlice';\nimport serverDevicesSlice from 'app/js/v4/core/serverDevices/serverDevicesSlice';\nimport serverNowPlayingSessionsSlice from 'app/js/v4/core/serverNowPlayingSessions/serverNowPlayingSessionsSlice';\nimport serversSlice from 'app/js/v4/core/servers/serversSlice';\nimport userSlice from 'app/js/v4/core/user/userSlice';\n\nconst coreReducer = combineReducers({\n  user: userSlice.reducer,\n  serverAccounts: serverAccountsSlice.reducer,\n  serverActivities: serverActivitiesSlice.reducer,\n  serverDevices: serverDevicesSlice.reducer,\n  serverNowPlayingSessions: serverNowPlayingSessionsSlice.reducer,\n  servers: serversSlice.reducer,\n});\n\nexport default coreReducer;\n","import { combineReducers } from '@reduxjs/toolkit';\nimport dashboardBandwidthSlice from './dashboardBandwidthSlice';\nimport dashboardPlayHistorySlice from './dashboardPlayHistorySlice';\nimport dashboardResourcesSlice from './dashboardResourcesSlice';\nimport dashboardTopPlayedSlice from './dashboardTopPlayedSlice';\nimport dashboardTopUsersSlice from './dashboardTopUsersSlice';\n\nconst dashboardReducer = combineReducers({\n  bandwidth: dashboardBandwidthSlice.reducer,\n  playHistory: dashboardPlayHistorySlice.reducer,\n  resources: dashboardResourcesSlice.reducer,\n  topPlayed: dashboardTopPlayedSlice.reducer,\n  topUsers: dashboardTopUsersSlice.reducer,\n});\n\nexport default dashboardReducer;\n","import { combineReducers } from '@reduxjs/toolkit';\nimport dvrSetupSlice from './dvrSetupSlice';\nimport epgSettingsSlice from './epgSettingsSlice';\n\nconst dvrManagementReducer = combineReducers({\n  dvrSetup: dvrSetupSlice.reducer,\n  epgSettings: epgSettingsSlice.reducer,\n});\n\nexport default dvrManagementReducer;\n","import { combineReducers } from '@reduxjs/toolkit';\nimport dashboardReducer from 'app/js/v4/features/dashboard/dashboardReducer';\nimport dvrManagementReducer from 'app/js/v4/features/dvrManagement/dvrManagementReducer';\nimport libraryManagementSlice from 'app/js/v4/features/libraryManagement/libraryManagementSlice';\nimport liveTVSlice from 'app/js/v4/features/livetv/liveTVSlice';\n\nconst featuresReducer = combineReducers({\n  dashboard: dashboardReducer,\n  dvrManagement: dvrManagementReducer,\n  libraryManagement: libraryManagementSlice.reducer,\n  livetv: liveTVSlice.reducer,\n});\n\nexport default featuresReducer;\n","import { combineReducers, createAction, Reducer } from '@reduxjs/toolkit';\nimport coreReducer from 'app/js/v4/core/coreReducer';\nimport featuresReducer from 'app/js/v4/features/featuresReducer';\n\nconst v4Reducer = combineReducers({\n  core: coreReducer,\n  features: featuresReducer,\n});\n\nexport const resetV4 = createAction('v4/reset');\n\nconst rootReducer: Reducer<ReturnType<typeof v4Reducer>> = (state, action) => {\n  if (action.type === resetV4.type) {\n    state = undefined;\n  }\n\n  return v4Reducer(state, action);\n};\n\nexport default rootReducer;\n","import { SagaIterator, Task } from 'redux-saga';\nimport {\n  ActionPattern,\n  fork,\n  ForkEffect,\n  join,\n  takeEvery,\n} from 'redux-saga/effects';\nimport { PayloadAction } from '@reduxjs/toolkit';\n\ntype TasksRecord = Record<string, Task>;\n\nexport default function takeLeadingPerID<\n  Action extends PayloadAction<object>,\n  Fn extends (action: Action, ...workerArgs: any[]) => SagaIterator\n>(\n  pattern: ActionPattern<Action>,\n  worker: Fn,\n  idSelector: (action: Action) => keyof TasksRecord,\n  ...args: any[]\n): ForkEffect {\n  return fork(function* () {\n    const tasks: TasksRecord = {};\n\n    yield takeEvery<Action>(pattern, function* (action) {\n      const id = idSelector(action);\n\n      if (!tasks[id]?.isRunning()) {\n        tasks[id] = yield fork(\n          worker as (action: Action, ...workerArgs: any[]) => any,\n          action,\n          ...args\n        );\n\n        yield join(tasks[id]);\n\n        if (tasks[id] && !tasks[id].isRunning()) {\n          delete tasks[id];\n        }\n      }\n    });\n  });\n}\n","import { SagaIterator } from 'redux-saga';\nimport { all, call, fork, put, select } from 'redux-saga/effects';\nimport createServerAccountsSelector from 'app/js/v4/core/serverAccounts/selectors/createServerAccountsSelector';\nimport api from 'app/js/v4/utils/data/api';\nimport takeLeadingPerID from 'app/js/v4/utils/data/saga/takeLeadingPerID';\nimport serverAccountsSlice from './serverAccountsSlice';\nimport {\n  ServerAccount,\n  ServerAccountsFetchRequestedAction,\n  ServerAccountsPerServerState,\n} from './serverAccountsTypes';\n\n//\n// Workers\n\nexport function* populateServerAccounts({\n  payload,\n}: ServerAccountsFetchRequestedAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const serverAccounts: ServerAccountsPerServerState = yield select(\n      createServerAccountsSelector(server.machineIdentifier)\n    );\n\n    if (!serverAccounts.isPopulated) {\n      yield put(serverAccountsSlice.actions.fetchRequested(payload));\n    }\n  } catch (error) {\n    yield put(\n      serverAccountsSlice.actions.fetchFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchServerAccounts({\n  payload,\n}: ServerAccountsFetchRequestedAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const response = yield call(api.get, '/accounts', {\n      server,\n    });\n\n    // The API currently returns unknown accounts with no name. Filter these\n    // out from the response\n    // See: https://github.com/plexinc/plex-media-server/issues/9637\n\n    const list: ServerAccount[] = response.data.MediaContainer?.Account ?? [];\n\n    yield put(\n      serverAccountsSlice.actions.fetchSucceeded({\n        server,\n        data: list.filter((account) => account.name),\n      })\n    );\n  } catch (error) {\n    yield put(\n      serverAccountsSlice.actions.fetchFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\n//\n// Watchers\n\nfunction* watchPopulateRequested(): SagaIterator {\n  yield takeLeadingPerID(\n    serverAccountsSlice.actions.populateRequested,\n    populateServerAccounts,\n    ({ payload }) => payload.server.machineIdentifier\n  );\n}\n\nfunction* watchFetchRequested(): SagaIterator {\n  yield takeLeadingPerID(\n    serverAccountsSlice.actions.fetchRequested,\n    fetchServerAccounts,\n    ({ payload }) => payload.server.machineIdentifier\n  );\n}\n\nexport default function* serverAccountsSaga(): SagaIterator {\n  yield all([fork(watchPopulateRequested), fork(watchFetchRequested)]);\n}\n","import { createSelector, Selector } from 'reselect';\nimport selectCore from 'app/js/v4/core/selectCore';\nimport { ServerDevicesPerServerState } from 'app/js/v4/core/serverDevices/serverDevicesTypes';\nimport { LegacyRootState } from 'app/js/v4/root/rootTypes';\nimport memoize from 'app/js/v4/utils/memoize';\n\n// This selector may be created frequently in components and saga workers,\n// but there is a limited number of possible selectors based on the arguments.\n// Rather than independently memoize in each component or saga, add a layer of\n// memoization on top of reselect here.\n\nfunction createServerDevicesSelector(\n  machineIdentifier: string\n): Selector<LegacyRootState, ServerDevicesPerServerState> {\n  return createSelector(\n    selectCore,\n    (core) => core.serverDevices[machineIdentifier]\n  );\n}\n\nexport default memoize(createServerDevicesSelector);\n","import { SagaIterator } from 'redux-saga';\nimport { all, call, fork, put, select } from 'redux-saga/effects';\nimport createServerDevicesSelector from 'app/js/v4/core/serverDevices/selectors/createServerDevicesSelector';\nimport api from 'app/js/v4/utils/data/api';\nimport takeLeadingPerID from 'app/js/v4/utils/data/saga/takeLeadingPerID';\nimport serverDevicesSlice from './serverDevicesSlice';\nimport {\n  ServerDevicesFetchRequestedAction,\n  ServerDevicesPerServerState,\n} from './serverDevicesTypes';\n\n//\n// Workers\n\nexport function* populateServerDevices({\n  payload,\n}: ServerDevicesFetchRequestedAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const serverDevices: ServerDevicesPerServerState = yield select(\n      createServerDevicesSelector(server.machineIdentifier)\n    );\n\n    if (!serverDevices.isPopulated) {\n      yield put(serverDevicesSlice.actions.fetchRequested(payload));\n    }\n  } catch (error) {\n    yield put(\n      serverDevicesSlice.actions.fetchFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchServerDevices({\n  payload,\n}: ServerDevicesFetchRequestedAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const response = yield call(api.get, '/devices', {\n      server,\n    });\n\n    yield put(\n      serverDevicesSlice.actions.fetchSucceeded({\n        server,\n        data: response.data.MediaContainer?.Device ?? [],\n      })\n    );\n  } catch (error) {\n    yield put(\n      serverDevicesSlice.actions.fetchFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\n//\n// Watchers\n\nexport function* watchPopulateRequested(): SagaIterator {\n  yield takeLeadingPerID(\n    serverDevicesSlice.actions.populateRequested,\n    populateServerDevices,\n    ({ payload }) => payload.server.machineIdentifier\n  );\n}\n\nexport function* watchFetchRequested(): SagaIterator {\n  yield takeLeadingPerID(\n    serverDevicesSlice.actions.fetchRequested,\n    fetchServerDevices,\n    ({ payload }) => payload.server.machineIdentifier\n  );\n}\n\nexport default function* serverDevicesSaga(): SagaIterator {\n  yield all([fork(watchPopulateRequested), fork(watchFetchRequested)]);\n}\n","import log from 'app/js/utils/log/log';\n\ntype TypeNormalizerFunction<NormalizedType> = <Input>(\n  input: { [K in keyof Input]: Input[K] | NormalizedType },\n  propertyName: keyof Input,\n  targetPropertyName?: keyof Input\n) => void;\n\nfunction createPropertyTypeNormalizer<NormalizedType>(\n  normalizeAsType: (input: unknown, propertyName: string) => NormalizedType\n): TypeNormalizerFunction<NormalizedType> {\n  return (input, propertyName, targetPropertyName) => {\n    const normalizedValue = normalizeAsType(\n      input[propertyName],\n      propertyName as string\n    );\n\n    if (targetPropertyName) {\n      input[targetPropertyName] = normalizedValue;\n      delete input[propertyName];\n    } else {\n      input[propertyName] = normalizedValue;\n    }\n  };\n}\n\nexport const normalizeAsNumber = createPropertyTypeNormalizer(\n  (value: unknown, propertyName: string): number | undefined => {\n    const valueType = typeof value;\n\n    if (valueType === 'string' || valueType === 'number') {\n      return Number(value);\n    } else if (valueType !== 'undefined') {\n      log.warn(\n        `normalizeAsNumber: returning undefined for type: ${valueType}, property: ${propertyName}`\n      );\n    }\n\n    return undefined;\n  }\n);\n\nexport const normalizeAsBoolean = createPropertyTypeNormalizer(\n  (value: unknown, propertyName: string): boolean | undefined => {\n    const valueType = typeof value;\n\n    if (valueType === 'boolean' || valueType === 'number') {\n      return Boolean(value);\n    } else if (valueType === 'string') {\n      return value === '1';\n    } else if (valueType !== 'undefined') {\n      log.warn(\n        `normalizeAsBoolean: returning undefined for type: ${valueType}, property: ${propertyName}`\n      );\n    }\n\n    return undefined;\n  }\n);\n\nexport const normalizeAsString = createPropertyTypeNormalizer(\n  (value: unknown, propertyName: string): string | undefined => {\n    const valueType = typeof value;\n\n    if (value != null) {\n      return String(value);\n    } else if (valueType !== 'undefined') {\n      log.warn(\n        `normalizeAsNumber: returning undefined for type: ${valueType}, property: ${propertyName}`\n      );\n    }\n\n    return undefined;\n  }\n);\n\nexport function move<I>(\n  input: { [K in keyof I]?: I | I[K] },\n  target: { [K in keyof I]?: I | I[K] },\n  propertyName: keyof I\n): void {\n  if (input.hasOwnProperty(propertyName)) {\n    target[propertyName] = input[propertyName];\n    delete input[propertyName];\n  }\n}\n\nexport function copy<I>(\n  input: { [K in keyof I]?: I | I[K] },\n  target: { [K in keyof I]?: I | I[K] },\n  propertyName: keyof I\n): void {\n  if (input.hasOwnProperty(propertyName)) {\n    target[propertyName] = input[propertyName];\n  }\n}\n","import cloneDeep from 'lodash/cloneDeep';\nimport {\n  ServerNowPlayingSession,\n  ServerNowPlayingSessionResponse,\n} from 'app/js/v4/core/serverNowPlayingSessions/serverNowPlayingSessionsTypes';\nimport {\n  normalizeAsBoolean,\n  normalizeAsNumber,\n} from 'app/js/v4/utils/data/normalizers/normalizeUtils';\nimport { NormalizerOptions } from 'app/js/v4/utils/data/normalizers/normalizersTypes';\n\nexport default function normalizeServerNowPlayingSessionsResponse(\n  options: NormalizerOptions\n): ServerNowPlayingSession[] {\n  const { data } = options;\n  const nowPlayingSessionsResponse: ServerNowPlayingSessionResponse[] =\n    data.MediaContainer?.Metadata ?? [];\n\n  return nowPlayingSessionsResponse.map((nowPlayingSessionResponse) => {\n    const nowPlayingSession = cloneDeep(nowPlayingSessionResponse);\n\n    // See: https://github.com/plexinc/plex-media-server/issues/11161\n    normalizeAsNumber(nowPlayingSession, 'viewOffset');\n    normalizeAsNumber(nowPlayingSession, 'duration');\n\n    nowPlayingSession.Media?.forEach((mediaItem) => {\n      mediaItem.Part?.forEach((part) => {\n        part.Stream?.forEach((stream) => {\n          normalizeAsBoolean(stream, 'selected');\n          normalizeAsNumber(stream, 'streamType');\n        });\n      });\n    });\n\n    return nowPlayingSession as ServerNowPlayingSession;\n  });\n}\n","import { SagaIterator } from 'redux-saga';\nimport { all, call, fork, put, select, takeEvery } from 'redux-saga/effects';\nimport createServerNowPlayingSessionsSelector from 'app/js/v4/core/serverNowPlayingSessions/selectors/createServerNowPlayingSessionsSelector';\nimport {\n  ServerNowPlayingSessionsChangedAction,\n  ServerNowPlayingSessionsFetchRequestedAction,\n  ServerNowPlayingSessionsPerServerState,\n  ServerNowPlayingSessionsStopRequestedAction,\n} from 'app/js/v4/core/serverNowPlayingSessions/serverNowPlayingSessionsTypes';\nimport normalizeServerNowPlayingSessionsResponse from 'app/js/v4/core/serverNowPlayingSessions/utils/normalizeServerNowPlayingSessionsResponse';\nimport api from 'app/js/v4/utils/data/api';\nimport takeLeadingPerID from 'app/js/v4/utils/data/saga/takeLeadingPerID';\nimport serverNowPlayingSessionsSlice from './serverNowPlayingSessionsSlice';\n\n//\n// Workers\n\nexport function* fetchSessions({\n  payload,\n}: ServerNowPlayingSessionsFetchRequestedAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const response = yield call(api.get, '/status/sessions', {\n      server,\n    });\n\n    yield put(\n      serverNowPlayingSessionsSlice.actions.fetchSucceeded({\n        server,\n        data: normalizeServerNowPlayingSessionsResponse(response),\n      })\n    );\n  } catch (error) {\n    yield put(\n      serverNowPlayingSessionsSlice.actions.fetchFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* maybeFetchForChangedSession({\n  payload,\n}: ServerNowPlayingSessionsChangedAction): SagaIterator {\n  const { server, message } = payload;\n\n  try {\n    const serverNowPlayingSessions: ServerNowPlayingSessionsPerServerState =\n      yield select(\n        createServerNowPlayingSessionsSelector(server.machineIdentifier)\n      );\n\n    const existingSession =\n      serverNowPlayingSessions.sessionsByKey[message.sessionKey];\n\n    if (existingSession && existingSession.key === message.key) {\n      // An existing item is changing, so let the slice handle the update.\n    } else {\n      // This is a new session or a new item is playing, so fetch sessions again.\n      yield put(\n        serverNowPlayingSessionsSlice.actions.fetchRequested({ server })\n      );\n    }\n  } catch (error) {\n    yield put(\n      serverNowPlayingSessionsSlice.actions.stopFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* stopSession({\n  payload,\n}: ServerNowPlayingSessionsStopRequestedAction): SagaIterator {\n  const { server, session, reason } = payload;\n\n  try {\n    yield call(api.get, '/status/sessions/terminate', {\n      server,\n      params: {\n        sessionId: session.Session.id,\n        reason,\n      },\n    });\n  } catch (error) {\n    yield put(\n      serverNowPlayingSessionsSlice.actions.stopFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\n//\n// Watchers\n\nfunction* watchFetchRequested(): SagaIterator {\n  yield takeLeadingPerID(\n    serverNowPlayingSessionsSlice.actions.fetchRequested,\n    fetchSessions,\n    ({ payload }) => payload.server.machineIdentifier\n  );\n}\n\nfunction* watchSessionChanged(): SagaIterator {\n  yield takeLeadingPerID(\n    serverNowPlayingSessionsSlice.actions.sessionChanged,\n    maybeFetchForChangedSession,\n    ({ payload }) => payload.server.machineIdentifier\n  );\n}\n\nfunction* watchStopRequested(): SagaIterator {\n  yield takeEvery(\n    serverNowPlayingSessionsSlice.actions.stopRequested,\n    stopSession\n  );\n}\n\nexport default function* serverNowPlayingSessionsSaga(): SagaIterator {\n  yield all([\n    fork(watchFetchRequested),\n    fork(watchSessionChanged),\n    fork(watchStopRequested),\n  ]);\n}\n","import { Action } from 'redux';\nimport { call, CallEffect } from 'redux-saga/effects';\nimport { resolve } from 'app/js/adapters/adapters';\n\nfunction dispatchLegacyAction<LegacyAction extends Action>(\n  action: LegacyAction\n): void {\n  resolve('appStore').dispatch(action);\n}\n\n/**\n * Creates a call effect that calls the legacy appStore dispatch method with a\n * legacy action\n *\n * #### Notes\n *\n * Use this effect carefully, as state does not update immediately in the legacy\n * store. You should not use this effect expecting to see state changes\n * immediately after dispatching to the legacy store\n *\n * @param action A legacy action that dispatches a type expected on the legacy\n * action handlers\n */\nfunction putLegacyActionDangerously<LegacyAction extends Action>(\n  action: LegacyAction\n): CallEffect<void> {\n  return call(dispatchLegacyAction, action);\n}\n\nexport default putLegacyActionDangerously;\n","import { SagaIterator } from 'redux-saga';\nimport { all, call, fork, put, takeLatest } from 'redux-saga/effects';\nimport { fetchUser } from 'app/js/stores/actions/userActions';\nimport base64ImageStringToBlob from 'app/js/utils/images/base64ImageStringToBlob';\nimport { Server } from 'app/js/v4/core/servers/serversTypes';\nimport userSlice from 'app/js/v4/core/user/userSlice';\nimport {\n  FetchUserDetailsRequestAction,\n  UpdateUserDetailsRequestAction,\n  User,\n} from 'app/js/v4/core/user/userTypes';\nimport { unescapeItem } from 'app/js/v4/core/utils/unescapeResponse';\nimport api, { APIResponse } from 'app/js/v4/utils/data/api';\nimport putLegacyActionDangerously from 'app/js/v4/utils/data/saga/putLegacyActionDangerously';\n\nexport function* fetchUserDetails({\n  payload,\n}: FetchUserDetailsRequestAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const data = yield call(fetchLatestUserDetails, server);\n\n    yield put(\n      userSlice.actions.fetchUserDetailsSucceeded({\n        details: {\n          thumb: data.thumb || '',\n          friendlyName: data.friendlyName || '',\n          email: data.email,\n          username: data.username,\n          anonymous: data.anonymous,\n          isFullUser: !!data.username || !!data.anonymous,\n        },\n      })\n    );\n  } catch (error) {\n    yield put(\n      userSlice.actions.fetchUserDetailsFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* updateUserDetails({\n  payload,\n}: UpdateUserDetailsRequestAction): SagaIterator {\n  const { server, update } = payload;\n\n  const bodyFormData = new FormData();\n  if (update.avatar) {\n    // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'Blob | null' is not assignable t... Remove this comment to see the full error message\n    bodyFormData.append('avatar', base64ImageStringToBlob(update.avatar));\n  }\n\n  const params = Object.entries(update).filter(([key]) => key !== 'avatar');\n\n  try {\n    yield call(\n      api.put,\n      `/api/v2/user?${new URLSearchParams(params)}`,\n      {\n        server,\n        headers: {\n          accept: 'application/json',\n        },\n      },\n      bodyFormData\n    );\n\n    const data = yield call(fetchLatestUserDetails, server);\n\n    yield all([\n      putLegacyActionDangerously(fetchUser()),\n      put(\n        userSlice.actions.updateUserDetailsSucceeded({\n          details: {\n            friendlyName: data.friendlyName || '',\n            thumb: data.thumb || '',\n          },\n        })\n      ),\n    ]);\n  } catch (error) {\n    yield put(\n      userSlice.actions.updateUserDetailsFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\n//\n// Helper Workers\n\nfunction* fetchLatestUserDetails(server: Server): SagaIterator<User> {\n  const { data }: APIResponse<User> = yield call(api.get, '/api/v2/user', {\n    server,\n    headers: {\n      accept: 'application/json',\n    },\n  });\n\n  return unescapeItem<User>(data);\n}\n\n//\n// Watchers\n\nfunction* watchFetchUserDetails(): SagaIterator {\n  yield takeLatest(userSlice.actions.fetchUserDetails, fetchUserDetails);\n}\n\nfunction* watchUpdateUserDetails(): SagaIterator {\n  yield takeLatest(userSlice.actions.updateUserDetails, updateUserDetails);\n}\n\nexport default function* userSaga(): SagaIterator {\n  yield all([fork(watchUpdateUserDetails), fork(watchFetchUserDetails)]);\n}\n","import { unescape } from 'lodash';\n\ninterface UnescapableItem {\n  friendlyName?: string;\n  title?: string;\n}\n\nexport function unescapeItem<T extends UnescapableItem>(item: T): T {\n  return {\n    ...item,\n    friendlyName: item.friendlyName && unescape(item.friendlyName),\n    title: item.title && unescape(item.title),\n  };\n}\n\nexport function unescapeArray<T extends UnescapableItem>(array: T[]): T[] {\n  return array.map((item) => unescapeItem(item));\n}\n","import { SagaIterator } from 'redux-saga';\nimport { all, fork } from 'redux-saga/effects';\nimport serverAccountsSaga from 'app/js/v4/core/serverAccounts/serverAccountsSaga';\nimport serverDevicesSaga from 'app/js/v4/core/serverDevices/serverDevicesSaga';\nimport serverNowPlayingSessionsSaga from 'app/js/v4/core/serverNowPlayingSessions/serverNowPlayingSessionsSaga';\nimport userSaga from 'app/js/v4/core/user/userSaga';\n\nexport default function* coreSaga(): SagaIterator {\n  yield all([\n    fork(userSaga),\n    fork(serverAccountsSaga),\n    fork(serverDevicesSaga),\n    fork(serverNowPlayingSessionsSaga),\n  ]);\n}\n","import { SagaIterator } from 'redux-saga';\nimport {\n  all,\n  call,\n  cancel,\n  fork,\n  put,\n  take,\n  takeLatest,\n  takeLeading,\n} from 'redux-saga/effects';\nimport * as metadataTypes from 'app/js/utils/types/metadataTypes';\nimport { MetadataType } from 'app/js/v4/core/metadata/metadataTypes';\nimport getServerUTCTime from 'app/js/v4/features/dashboard/utils/getServerUTCTime';\nimport api from 'app/js/v4/utils/data/api';\nimport { getTimePeriodTimespan, TimePeriod } from 'app/js/v4/utils/timePeriods';\nimport dashboardBandwidthSlice from './dashboardBandwidthSlice';\nimport { BandwidthFetchRequestedAction } from './dashboardBandwidthTypes';\nimport dashboardPlayHistorySlice from './dashboardPlayHistorySlice';\nimport { PlayHistoryFetchRequestedAction } from './dashboardPlayHistoryTypes';\nimport dashboardResourcesSlice from './dashboardResourcesSlice';\nimport { ResourcesFetchRequestedAction } from './dashboardResourcesTypes';\nimport dashboardTopPlayedSlice from './dashboardTopPlayedSlice';\nimport { TopPlayedFetchRequestedAction } from './dashboardTopPlayedTypes';\nimport dashboardTopUsersSlice from './dashboardTopUsersSlice';\nimport { TopUsersFetchRequestedAction } from './dashboardTopUsersTypes';\n\n//\n// Workers\n\nexport function* fetchBandwidth({\n  payload,\n}: BandwidthFetchRequestedAction): SagaIterator {\n  try {\n    const requestTimestampMilliseconds = Date.now();\n\n    const response = yield call(api.get, '/statistics/bandwidth', {\n      server: payload.server,\n      params: {\n        timespan: payload.timespan,\n        'at>': payload.after,\n      },\n    });\n    const container = response.data.MediaContainer;\n    const date = response.headers.Date;\n\n    // Only PMS 1.15.1 allows us to access the `Date` response header. If we\n    // do not have access then fall back to our timestamp.\n    const responseTimestampMilliseconds = date\n      ? getServerUTCTime(date)\n      : requestTimestampMilliseconds;\n\n    yield put(\n      dashboardBandwidthSlice.actions.bandwidthFetchSucceeded({\n        data: container?.StatisticsBandwidth ?? [],\n        requestTimestampMilliseconds,\n        responseTimestampMilliseconds,\n      })\n    );\n  } catch (error) {\n    yield put(\n      dashboardBandwidthSlice.actions.bandwidthFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchResources({\n  payload,\n}: ResourcesFetchRequestedAction): SagaIterator {\n  try {\n    const requestTimestampMilliseconds = Date.now();\n\n    const response = yield call(api.get, '/statistics/resources', {\n      server: payload.server,\n      params: {\n        timespan: getTimePeriodTimespan(TimePeriod.RealTime),\n      },\n    });\n    const container = response.data.MediaContainer;\n\n    yield put(\n      dashboardResourcesSlice.actions.resourcesFetchSucceeded({\n        data: container?.StatisticsResources ?? [],\n        requestTimestampMilliseconds,\n      })\n    );\n  } catch (error) {\n    yield put(\n      dashboardResourcesSlice.actions.resourcesFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchTopUsers({\n  payload,\n}: TopUsersFetchRequestedAction): SagaIterator {\n  try {\n    const response = yield call(fetchMediaStatistics, payload);\n    const container = response.data.MediaContainer;\n\n    yield put(\n      dashboardTopUsersSlice.actions.topUsersFetchSucceeded({\n        data: {\n          statistics: container?.StatisticsMedia ?? [],\n          accounts: container?.Account ?? [],\n        },\n      })\n    );\n  } catch (error) {\n    yield put(\n      dashboardTopUsersSlice.actions.topUsersFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchPlayHistory({\n  payload,\n}: PlayHistoryFetchRequestedAction): SagaIterator {\n  try {\n    const response = yield call(fetchMediaStatistics, payload);\n    const container = response.data.MediaContainer;\n\n    yield put(\n      dashboardPlayHistorySlice.actions.playHistoryFetchSucceeded({\n        data: {\n          statistics: container?.StatisticsMedia ?? [],\n          accounts: container?.Account ?? [],\n        },\n      })\n    );\n  } catch (error) {\n    yield put(\n      dashboardPlayHistorySlice.actions.playHistoryFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchTopPlayed({\n  payload,\n}: TopPlayedFetchRequestedAction): SagaIterator {\n  try {\n    const [moviesResponse, tvResponse, musicResponse, gameResponse] = yield all(\n      [\n        call(fetchLibraryTopPlayed, payload, MetadataType.Movie),\n        call(fetchLibraryTopPlayed, payload, MetadataType.Show),\n        call(fetchLibraryTopPlayed, payload, MetadataType.Artist),\n        call(fetchLibraryTopPlayed, payload, MetadataType.Game),\n      ]\n    );\n\n    yield put(\n      dashboardTopPlayedSlice.actions.topPlayedFetchSucceeded({\n        data: {\n          moviesStatistics: moviesResponse.data.MediaContainer?.Metadata ?? [],\n          tvStatistics: tvResponse.data.MediaContainer?.Metadata ?? [],\n          musicStatistics: musicResponse.data.MediaContainer?.Metadata ?? [],\n          gameStatistics: gameResponse.data.MediaContainer?.Metadata ?? [],\n        },\n      })\n    );\n  } catch (error) {\n    yield put(\n      dashboardTopPlayedSlice.actions.topPlayedFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\n//\n// Helper Workers\n\nfunction* fetchMediaStatistics(\n  payload:\n    | PlayHistoryFetchRequestedAction['payload']\n    | TopUsersFetchRequestedAction['payload']\n): SagaIterator {\n  return yield call(api.get, '/statistics/media', {\n    server: payload.server,\n    params: {\n      timespan: payload.timespan,\n      'at>': payload.after,\n    },\n  });\n}\n\nfunction* fetchLibraryTopPlayed(\n  payload: TopPlayedFetchRequestedAction['payload'],\n  metadataType: MetadataType\n): SagaIterator {\n  return yield call(api.get, '/library/all/top', {\n    server: payload.server,\n    params: {\n      accountID: payload.accountID,\n      type: metadataTypes.getMetadataType(metadataType).id,\n      'viewedAt>': payload.viewedAt,\n      limit: payload.limit,\n    },\n  });\n}\n\n//\n// Watchers\n\nfunction* watchBandwidthFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLatest(\n      dashboardBandwidthSlice.actions.bandwidthFetchRequested,\n      fetchBandwidth\n    );\n\n    yield take([\n      dashboardBandwidthSlice.actions.reset,\n      dashboardBandwidthSlice.actions.bandwidthAbortRequested,\n    ]);\n    yield cancel(task);\n  }\n}\n\nfunction* watchResourcesFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLatest(\n      dashboardResourcesSlice.actions.resourcesFetchRequested,\n      fetchResources\n    );\n\n    yield take(dashboardResourcesSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nfunction* watchTopUsersFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      dashboardTopUsersSlice.actions.topUsersFetchRequested,\n      fetchTopUsers\n    );\n\n    yield take(dashboardTopUsersSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nfunction* watchPlayHistoryFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      dashboardPlayHistorySlice.actions.playHistoryFetchRequested,\n      fetchPlayHistory\n    );\n\n    yield take(dashboardPlayHistorySlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nfunction* watchTopPlayedFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      dashboardTopPlayedSlice.actions.topPlayedFetchRequested,\n      fetchTopPlayed\n    );\n\n    yield take(dashboardTopPlayedSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport default function* dashboardSaga(): SagaIterator {\n  yield all([\n    fork(watchBandwidthFetchRequested),\n    fork(watchResourcesFetchRequested),\n    fork(watchTopUsersFetchRequested),\n    fork(watchPlayHistoryFetchRequested),\n    fork(watchTopPlayedFetchRequested),\n  ]);\n}\n","export default function getUTCDate(date: Date = new Date()): Date {\n  // date-fns methods always return a localized date, so we create a new Date\n  // object where we add the timezone offset from the provided date.\n  // See: https://github.com/date-fns/date-fns/issues/376\n  // See: https://github.com/date-fns/date-fns/issues/376#issuecomment-454163253\n  return new Date(date.getTime() + date.getTimezoneOffset() * 60 * 1000);\n}\n","import parse from 'date-fns/parse';\nimport getUTCDate from 'app/js/utils/dateTime/getUTCDate';\n\n// Example dateString: 'Sun, 10 Feb 2019 21:32:05 GMT'.\nconst dateFormat = \"EEE, dd MMM yyyy HH:mm:ss 'GMT'\";\n\nexport default function getServerUTCTime(dateString: string): number {\n  const parsedDate = parse(dateString, dateFormat, new Date());\n\n  const parsedUTCDate = getUTCDate(parsedDate);\n\n  return parsedUTCDate.getTime();\n}\n","import { ChannelMapping } from 'app/js/v4/features/dvrManagement/dvrManagementTypes';\nimport { normalizeAsBoolean } from 'app/js/v4/utils/data/normalizers/normalizeUtils';\n\nexport default function normalizeChannelMappingResponse(\n  channelMappings: ChannelMapping[] | undefined\n): ChannelMapping[] {\n  const channelMappingResponse = channelMappings ?? [];\n\n  return channelMappingResponse.map((channelMapping) => {\n    // `ChannelMapping` elements returned by the server don't always have an\n    // `enabled` attribute. Use the attribute when it is available, otherwise\n    // determine it by checking for the presence of `lineupIdentifier`.\n    if (channelMapping.enabled) {\n      normalizeAsBoolean(channelMapping, 'enabled');\n\n      return channelMapping;\n    }\n\n    return {\n      ...channelMapping,\n      enabled: !!channelMapping.lineupIdentifier,\n    };\n  });\n}\n","export const ObjectKeys = Object.keys as <T>(\n  o: T\n) => Extract<keyof T, string>[];\n\nexport const ObjectValues = Object.values as <T, K extends keyof T>(\n  o: T\n) => T[K][];\n\nexport const ObjectEntries = Object.entries as <T, K extends keyof T>(\n  o: T\n) => [K, T[K]][];\n","export interface DeviceSettings {\n  volume: number;\n}\n\nexport enum MediaSettingType {\n  Int = 'int',\n  Text = 'text',\n  Bool = 'bool',\n  Enum = 'enum',\n  Double = 'double',\n}\n\nexport interface MediaSettingResponse {\n  id: string;\n  advanced?: string;\n  default?: boolean | number | string;\n  hidden?: string;\n  group: string;\n  label: string;\n  summary: string;\n  type: MediaSettingType;\n  value?: boolean | number | string;\n  min?: number;\n  max?: number;\n  step?: number;\n  enumValues?: string;\n}\n\nexport interface MediaSetting extends Omit<MediaSettingResponse, 'enumValues'> {\n  enumValues?: {\n    label: string;\n    value?: boolean | number | string;\n  }[];\n}\n","import cloneDeep from 'lodash/cloneDeep';\nimport {\n  MediaGrabberDevice,\n  MediaGrabberDeviceResponse,\n  MediaGrabberDeviceSourceType,\n} from 'app/js/v4/features/dvrManagement/dvrManagementTypes';\nimport normalizeChannelMappingResponse from 'app/js/v4/features/dvrManagement/utils/normalizeChannelMappingResponse';\nimport { MediaContainerResponse } from 'app/js/v4/types/MediaContainerResponse';\nimport { ObjectValues } from 'app/js/v4/utils/TSObject';\nimport assert from 'app/js/v4/utils/assert';\nimport {\n  normalizeAsNumber,\n  normalizeAsString,\n} from 'app/js/v4/utils/data/normalizers/normalizeUtils';\nimport { NormalizerOptions } from 'app/js/v4/utils/data/normalizers/normalizersTypes';\n\nexport interface NormalizeMediaGrabberDeviceResponseOptions\n  extends NormalizerOptions {\n  data: MediaContainerResponse;\n}\nexport function normalizeDevice(\n  deviceResponse: MediaGrabberDeviceResponse\n): MediaGrabberDevice {\n  const device = cloneDeep(deviceResponse) as unknown as MediaGrabberDevice;\n\n  normalizeAsString(device, 'key');\n  normalizeAsString(device, 'source');\n  normalizeAsNumber(device, 'tuners');\n  device.sources = deviceResponse.sources\n    ?.split(',')\n    ?.map<MediaGrabberDeviceSourceType>((source) => {\n      const sourceType = ObjectValues(MediaGrabberDeviceSourceType).find(\n        (deviceSource) => deviceSource === source\n      );\n\n      assert(sourceType, `Unknown Media Grabber Device Source Type ${source}`);\n\n      return sourceType;\n    });\n  device.ChannelMapping = normalizeChannelMappingResponse(\n    device.ChannelMapping\n  );\n\n  return device;\n}\n\nexport default function normalizeDevicesResponse({\n  data,\n}: NormalizeMediaGrabberDeviceResponseOptions): MediaGrabberDevice[] {\n  const devicesResponse = data.Device ?? [];\n\n  return devicesResponse.map(normalizeDevice);\n}\n","import cloneDeep from 'lodash/cloneDeep';\nimport {\n  DVR,\n  MediaGrabberDevice,\n} from 'app/js/v4/features/dvrManagement/dvrManagementTypes';\nimport { MediaContainerResponse } from 'app/js/v4/types/MediaContainerResponse';\nimport { normalizeAsString } from 'app/js/v4/utils/data/normalizers/normalizeUtils';\nimport { NormalizerOptions } from 'app/js/v4/utils/data/normalizers/normalizersTypes';\nimport { normalizeDevice } from './normalizeDevicesResponse';\n\nexport interface NormalizeDVRResponseOptions extends NormalizerOptions {\n  data: MediaContainerResponse;\n}\n\nexport default function normalizeDVRResponse({\n  data,\n}: NormalizeDVRResponseOptions): DVR | undefined {\n  // PMS returns this as an array but users can only ever setup a single DVR.\n  const dvrResponse = data.Dvr?.[0];\n\n  // We request DVRs when loading the Live TV settings page. We can get back an\n  // empty `MediaContainer` (i.e. before the user sets up their first tuner).\n  if (!dvrResponse) {\n    return;\n  }\n\n  const dvr = cloneDeep(dvrResponse) as unknown as DVR;\n\n  normalizeAsString(dvr, 'key');\n  dvr.Device = dvrResponse?.Device?.map<MediaGrabberDevice>(normalizeDevice);\n\n  return dvr;\n}\n","import parser2 from 'app/js/utils/parser2';\nimport {\n  MediaSetting,\n  MediaSettingType,\n} from 'app/js/v4/core/settings/settingsTypes';\nimport { MediaContainerResponse } from 'app/js/v4/types/MediaContainerResponse';\nimport { normalizeAsBoolean } from 'app/js/v4/utils/data/normalizers/normalizeUtils';\nimport { NormalizerOptions } from 'app/js/v4/utils/data/normalizers/normalizersTypes';\n\nconst SEPARATOR = '|';\n\nexport interface NormalizeMediaSettingsResponseOptions\n  extends NormalizerOptions {\n  data: MediaContainerResponse;\n}\n\nfunction parseValueType(\n  type: MediaSettingType,\n  value: MediaSetting['value']\n): MediaSetting['value'] {\n  switch (type) {\n    case MediaSettingType.Int:\n    case MediaSettingType.Enum:\n      return parser2.parseInteger(value);\n    case MediaSettingType.Bool:\n      return parser2.parseBoolean(value);\n    case MediaSettingType.Double:\n      return parser2.parseFloat(value);\n    default:\n      return value;\n  }\n}\n\nexport default function normalizeMediaSettingsResponse({\n  data,\n}: NormalizeMediaSettingsResponseOptions): MediaSetting[] {\n  const mediaSettingsResponse = data.Setting ?? [];\n\n  return mediaSettingsResponse.map((mediaSettingResponse) => {\n    const { enumValues, ...settingAttrs } = mediaSettingResponse;\n    const mediaSetting = settingAttrs as MediaSetting;\n\n    if (mediaSetting.default) {\n      mediaSetting.default = parseValueType(\n        mediaSetting.type,\n        mediaSetting.default\n      );\n    }\n    mediaSetting.value = parseValueType(mediaSetting.type, mediaSetting.value);\n\n    normalizeAsBoolean(mediaSetting, 'advanced');\n    normalizeAsBoolean(mediaSetting, 'hidden');\n\n    if (enumValues) {\n      mediaSetting.enumValues = enumValues\n        .split(SEPARATOR)\n        .map((valueStr: any) => {\n          const [value, label = value] = valueStr.split(':');\n          return {\n            label: decodeURIComponent(label),\n            value: parseValueType(mediaSetting.type, value),\n          };\n        });\n    }\n\n    return mediaSetting;\n  });\n}\n","import { SagaIterator } from 'redux-saga';\nimport {\n  all,\n  call,\n  cancel,\n  fork,\n  put,\n  race,\n  select,\n  take,\n  takeLeading,\n} from 'redux-saga/effects';\nimport { fetchDVRs } from 'app/js/stores/actions/ui/dvrSettingsUIActions';\nimport { showAlert } from 'app/js/stores/actions/ui/uiActions';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\nimport { Server } from 'app/js/v4/core/servers/serversTypes';\nimport createDeviceChannelsSelector from 'app/js/v4/features/dvrManagement/selectors/createDeviceChannelsSelector';\nimport selectDVRSetup from 'app/js/v4/features/dvrManagement/selectors/selectDVRSetup';\nimport selectEPGSettings from 'app/js/v4/features/dvrManagement/selectors/selectEPGSettings';\nimport selectSetupSelectedLineups from 'app/js/v4/features/dvrManagement/selectors/selectSetupSelectedLineups';\nimport normalizeDVRResponse from 'app/js/v4/features/dvrManagement/utils/normalizeDVRResponse';\nimport normalizeDevicesResponse from 'app/js/v4/features/dvrManagement/utils/normalizeDevicesResponse';\nimport normalizeMediaSettingsResponse from 'app/js/v4/features/dvrManagement/utils/normalizeMediaSettingsResponse';\nimport { APIMediaContainerResponse } from 'app/js/v4/types/MediaContainerResponse';\nimport api from 'app/js/v4/utils/data/api';\nimport putLegacyActionDangerously from 'app/js/v4/utils/data/saga/putLegacyActionDangerously';\nimport takeLeadingPerID from 'app/js/v4/utils/data/saga/takeLeadingPerID';\nimport {\n  AddDVRDeviceRequestedAction,\n  ChannelMappingFormData,\n  DeviceAddRequestedAction,\n  DeviceChannelMappingsSaveRequestedAction,\n  DeviceChannelsCancelScanRequestedAction,\n  DeviceChannelsFetchRequestedAction,\n  DeviceChannelsScanRequestedAction,\n  DeviceChannelsState,\n  DeviceEnableRequestedAction,\n  DevicesDiscoverRequestedAction,\n  DevicesFetchRequestedAction,\n  DVRDeleteRequestedAction,\n  DVRFetchRequestedAction,\n  DVRLineup,\n  DVRSaveRequestedAction,\n  EPGLineup,\n  RemoveDVRDeviceRequestedAction,\n  SelectedDVRState,\n} from './dvrManagementTypes';\nimport dvrSetupSlice from './dvrSetupSlice';\n\n//\n// Workers\n\nexport function* discoverDevices({\n  payload,\n}: DevicesDiscoverRequestedAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const response: APIMediaContainerResponse = yield call(\n      api.post,\n      '/media/grabbers/devices/discover',\n      {\n        server,\n        timeout: 0,\n      }\n    );\n\n    yield put(\n      dvrSetupSlice.actions.devicesDiscoverSucceeded({\n        server,\n        data: normalizeDevicesResponse({\n          server,\n          data: response.data?.MediaContainer,\n        }),\n      })\n    );\n  } catch (error) {\n    yield put(\n      dvrSetupSlice.actions.setupErrorMessageAdded({\n        message: t('There was a problem discovering devices'),\n      })\n    );\n\n    yield put(\n      dvrSetupSlice.actions.devicesDiscoverFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchDevices({\n  payload,\n}: DevicesFetchRequestedAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const response: APIMediaContainerResponse = yield call(\n      api.get,\n      '/media/grabbers/devices',\n      {\n        server,\n      }\n    );\n\n    yield put(\n      dvrSetupSlice.actions.devicesFetchSucceeded({\n        server,\n        data: normalizeDevicesResponse({\n          server,\n          data: response.data?.MediaContainer,\n        }),\n      })\n    );\n  } catch (error) {\n    yield put(\n      dvrSetupSlice.actions.devicesFetchFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchDeviceChannels({\n  payload,\n}: DeviceChannelsFetchRequestedAction): SagaIterator {\n  const { server, deviceKey } = payload;\n\n  try {\n    const response: APIMediaContainerResponse = yield call(\n      api.get,\n      path.join(['/media/grabbers/devices', deviceKey, 'channels']),\n      {\n        server,\n      }\n    );\n\n    yield put(\n      dvrSetupSlice.actions.deviceChannelsFetchSucceeded({\n        server,\n        deviceKey,\n        data: response.data.MediaContainer?.DeviceChannel ?? [],\n      })\n    );\n  } catch (error) {\n    yield put(\n      dvrSetupSlice.actions.setupErrorMessageAdded({\n        message: t('There was a problem getting the channels for your device'),\n      })\n    );\n\n    yield put(\n      dvrSetupSlice.actions.deviceChannelsFetchFailed({\n        deviceKey,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* scanDeviceChannels({\n  payload,\n}: DeviceChannelsScanRequestedAction): SagaIterator {\n  const { server, deviceKey, source, prefs, network, country } = payload;\n\n  try {\n    const response: APIMediaContainerResponse = yield call(\n      api.post,\n      path.join(['/media/grabbers/devices', deviceKey, 'scan']),\n      {\n        server,\n        params: {\n          source,\n          prefs,\n          network,\n          country,\n        },\n      }\n    );\n\n    if (response.headers['x-plex-activity']) {\n      yield put(dvrSetupSlice.actions.scanPrefsAndNetworksReset());\n    } else {\n      const settings = normalizeMediaSettingsResponse({\n        server,\n        data: response.data?.MediaContainer,\n      });\n\n      if (settings?.length) {\n        yield put(\n          dvrSetupSlice.actions.scanPrefsAdded({\n            settings,\n          })\n        );\n      }\n    }\n  } catch (_error) {\n    const error = api.toPlainErrorObject(_error);\n\n    yield put(\n      dvrSetupSlice.actions.setupErrorMessageAdded({\n        message: error?.message ?? t('There was a problem scanning channels'),\n      })\n    );\n\n    yield put(dvrSetupSlice.actions.deviceChannelsScanFailed());\n  }\n}\n\nexport function* cancelScanDeviceChannels({\n  payload,\n}: DeviceChannelsCancelScanRequestedAction): SagaIterator {\n  const { server, deviceKey } = payload;\n\n  try {\n    yield call(\n      api.del,\n      path.join(['/media/grabbers/devices', deviceKey, 'scan']),\n      {\n        server,\n      }\n    );\n  } catch (_error) {\n    yield put(\n      dvrSetupSlice.actions.setupErrorMessageAdded({\n        message: t('There was a problem canceling the current channel scan'),\n      })\n    );\n\n    yield put(dvrSetupSlice.actions.deviceChannelsCancelScanFailed());\n  }\n}\nexport function* saveChannelMappings({\n  payload,\n}: DeviceChannelMappingsSaveRequestedAction): SagaIterator {\n  const { server, deviceKey, mappings } = payload;\n\n  try {\n    const deviceChannels: DeviceChannelsState = yield select(\n      createDeviceChannelsSelector(deviceKey)\n    );\n\n    const enabledChannels: string[] = [];\n    const channelMap: Record<string, string> = {};\n\n    Object.values(mappings).forEach(\n      ({ key, channelKey, lineupIdentifier, enabled }) => {\n        const deviceChannel = deviceChannels.channels.find(\n          (channel) => channel.identifier === key\n        );\n        const drm = deviceChannel?.drm;\n\n        if (enabled && channelKey && lineupIdentifier && !drm) {\n          enabledChannels.push(key);\n          channelMap[`channelMappingByKey[${key}]`] = channelKey;\n          channelMap[`channelMapping[${key}]`] = lineupIdentifier;\n        }\n      }\n    );\n\n    yield call(\n      api.put,\n      path.join(['/media/grabbers/devices', deviceKey, 'channelmap']),\n      {\n        server,\n        params: {\n          channelsEnabled: enabledChannels.toString(),\n          ...channelMap,\n        },\n      }\n    );\n\n    yield put(dvrSetupSlice.actions.deviceChannelMappingsSaveSucceeded());\n  } catch (error) {\n    yield put(\n      dvrSetupSlice.actions.deviceChannelMappingsSaveFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* enableDevice({\n  payload,\n}: DeviceEnableRequestedAction): SagaIterator {\n  const { server, deviceKey, enabled, title } = payload;\n\n  try {\n    yield call(api.put, path.join(['/media/grabbers/devices', deviceKey]), {\n      server,\n      params: {\n        title,\n        enabled: enabled ? 1 : 0,\n      },\n    });\n\n    yield put(\n      dvrSetupSlice.actions.deviceEnableSucceeded({\n        deviceKey,\n        enabled,\n      })\n    );\n  } catch {\n    yield put(dvrSetupSlice.actions.deviceEnableFailed());\n  }\n}\n\nexport function* addDevice({\n  payload,\n}: DeviceAddRequestedAction): SagaIterator {\n  const { server, uri } = payload;\n\n  let setupErrorMessage = t('There was a problem adding the device: {1}', uri);\n\n  try {\n    // When we support more than HDHR devices the user will need to pick the\n    // device type instead of hardcoding 'tv.plex.grabbers.hdhomerun'\n    const response: APIMediaContainerResponse = yield call(\n      api.post,\n      '/media/grabbers/tv.plex.grabbers.hdhomerun/devices',\n      {\n        server,\n        params: {\n          uri,\n        },\n      }\n    );\n\n    const devices = normalizeDevicesResponse({\n      server,\n      data: response.data?.MediaContainer,\n    });\n\n    if (devices.length === 0) {\n      setupErrorMessage = t('No device found at {1}', uri);\n\n      throw new Error();\n    } else {\n      yield put(\n        dvrSetupSlice.actions.deviceAddSucceeded({\n          server,\n          data: devices[0],\n        })\n      );\n    }\n  } catch (error) {\n    yield put(\n      dvrSetupSlice.actions.setupErrorMessageAdded({\n        message: setupErrorMessage,\n      })\n    );\n\n    yield put(\n      dvrSetupSlice.actions.deviceAddFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchDVR({ payload }: DVRFetchRequestedAction): SagaIterator {\n  const { server, dvrID } = payload;\n\n  try {\n    const requestPath = dvrID\n      ? path.join(['/livetv/dvrs', dvrID])\n      : '/livetv/dvrs';\n\n    const response: APIMediaContainerResponse = yield call(\n      api.get,\n      requestPath,\n      {\n        server,\n      }\n    );\n\n    yield put(\n      dvrSetupSlice.actions.dvrFetchSucceeded({\n        dvr: normalizeDVRResponse({\n          server,\n          data: response.data?.MediaContainer,\n        }),\n      })\n    );\n  } catch (error) {\n    yield put(\n      dvrSetupSlice.actions.dvrFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* saveDVR({ payload }: DVRSaveRequestedAction): SagaIterator {\n  const { server, device, channelMappings } = payload;\n\n  const lineups: EPGLineup[] = yield select(selectSetupSelectedLineups);\n\n  try {\n    const { success, failure } = yield call(\n      enableDeviceAndSaveChannelMappings,\n      server,\n      device.key,\n      channelMappings,\n      lineups\n    );\n\n    if (failure) {\n      throw new Error();\n    }\n\n    if (success) {\n      const { selectedCountry, selectedLanguage } = yield select(\n        selectEPGSettings\n      );\n\n      const response: APIMediaContainerResponse = yield call(\n        api.post,\n        '/livetv/dvrs',\n        {\n          server,\n          params: {\n            device: device.uuid,\n            lineup: lineups?.map((lineup) => lineup.uuid),\n            language: selectedLanguage?.code,\n            country: selectedCountry?.code,\n          },\n        }\n      );\n\n      yield put(\n        dvrSetupSlice.actions.dvrSaveSucceeded({\n          activityUUID: response.headers['x-plex-activity'],\n          dvr: normalizeDVRResponse({\n            server,\n            data: response.data?.MediaContainer,\n          }),\n        })\n      );\n\n      // Refresh list of devices to avoid showing the one that was just added as\n      // available in the following setup step.\n      yield put(dvrSetupSlice.actions.devicesFetchRequested({ server }));\n\n      // TODO: Remove this hack once DVR settings are moved to v4.\n      yield putLegacyActionDangerously(\n        fetchDVRs({ serverEntityID: server.entityID })\n      );\n    }\n  } catch (error) {\n    yield put(\n      dvrSetupSlice.actions.setupErrorMessageAdded({\n        message: t('There was a problem saving your DVR. Please try again.'),\n      })\n    );\n\n    yield put(\n      dvrSetupSlice.actions.dvrSaveFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* deleteDVR({\n  payload,\n}: DVRDeleteRequestedAction): SagaIterator {\n  const { server, dvrID } = payload;\n\n  try {\n    yield call(api.del, path.join(['/livetv/dvrs', dvrID]), {\n      server,\n      timeout: 0,\n    });\n\n    yield put(dvrSetupSlice.actions.dvrDeleteSucceeded());\n  } catch (error) {\n    yield putLegacyActionDangerously(\n      showAlert(t('There was a problem removing your DVR'))\n    );\n  }\n}\n\nexport function* addDVRDevice({\n  payload,\n}: AddDVRDeviceRequestedAction): SagaIterator {\n  const { server, dvrID, deviceKey, channelMappings } = payload;\n\n  const lineups: EPGLineup[] = yield select(selectSetupSelectedLineups);\n\n  try {\n    const { success, failure } = yield call(\n      enableDeviceAndSaveChannelMappings,\n      server,\n      deviceKey,\n      channelMappings,\n      lineups\n    );\n\n    if (failure) {\n      throw new Error();\n    }\n\n    if (success) {\n      yield call(addLineupsToDVR, server, dvrID, lineups);\n\n      const response: APIMediaContainerResponse = yield call(\n        api.put,\n        path.join(['/livetv/dvrs', dvrID, 'devices', deviceKey]),\n        {\n          server,\n        }\n      );\n\n      yield put(\n        dvrSetupSlice.actions.addDVRDeviceSucceeded({\n          activityUUID: response.headers['x-plex-activity'],\n          dvr: normalizeDVRResponse({\n            server,\n            data: response.data?.MediaContainer,\n          }),\n        })\n      );\n\n      // Refresh list of devices to avoid showing the one that was just added as\n      // available in the following setup step.\n      yield put(dvrSetupSlice.actions.devicesFetchRequested({ server }));\n\n      // TODO: Remove this hack once DVR settings are moved to v4.\n      yield putLegacyActionDangerously(\n        fetchDVRs({ serverEntityID: server.entityID })\n      );\n    }\n  } catch (error) {\n    yield put(\n      dvrSetupSlice.actions.setupErrorMessageAdded({\n        message: t(\n          'There was a problem adding a new device to your DVR. Please try again.'\n        ),\n      })\n    );\n\n    yield put(\n      dvrSetupSlice.actions.addDVRDeviceFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* removeDVRDevice({\n  payload,\n}: RemoveDVRDeviceRequestedAction): SagaIterator {\n  const { server, dvrID, deviceKey } = payload;\n\n  try {\n    yield call(\n      api.del,\n      path.join(['/livetv/dvrs', dvrID, 'devices', deviceKey]),\n      {\n        server,\n      }\n    );\n\n    yield put(dvrSetupSlice.actions.removeDVRDeviceSucceeded({ deviceKey }));\n  } catch (error) {\n    yield putLegacyActionDangerously(\n      showAlert(t('There was a problem removing a DVR device'))\n    );\n    yield put(dvrSetupSlice.actions.removeDVRDeviceFailed());\n  }\n}\n\n//\n// Helper Workers\n\nfunction* addLineupsToDVR(\n  server: Server,\n  dvrID: string,\n  lineups: EPGLineup[]\n): SagaIterator {\n  const { selectedDVR }: { selectedDVR: SelectedDVRState } = yield select(\n    selectDVRSetup\n  );\n\n  // Attempting to add a lineup that's already been added to a DVR will result\n  // in a request that hangs indefinitely. To avoid this we filter the list of\n  // lineups against those already added to the DVR.\n  let lineupsToAdd = lineups;\n  if (selectedDVR.dvr?.Lineup) {\n    lineupsToAdd = lineupsToAdd.filter(\n      (lineup) =>\n        !selectedDVR.dvr?.Lineup?.find(\n          (dvrLineup: DVRLineup) => dvrLineup.id === lineup.uuid\n        )\n    );\n  }\n\n  yield all(\n    lineupsToAdd.map((lineup) =>\n      call(api.put, path.join(['/livetv/dvrs', dvrID, 'lineups']), {\n        server,\n        params: {\n          lineup: lineup.uuid,\n        },\n      })\n    )\n  );\n}\n\nfunction* enableDeviceAndSaveChannelMappings(\n  server: Server,\n  deviceKey: string,\n  mappings: ChannelMappingFormData[],\n  lineups?: EPGLineup[]\n): SagaIterator {\n  yield put(\n    dvrSetupSlice.actions.deviceChannelMappingsSaveRequested({\n      server,\n      deviceKey,\n      mappings,\n    })\n  );\n\n  yield put(\n    dvrSetupSlice.actions.deviceEnableRequested({\n      server,\n      deviceKey,\n      enabled: true,\n      title: lineups?.[0]?.title,\n    })\n  );\n\n  // If any of the above dispatched actions fails, `failure` will by truthy. If\n  // both actions succeed, `success` will be truthy.  Workers that use this\n  // helper rely on these values to either continue their logic or throw an\n  // error.\n  return yield race({\n    success: all([\n      take(dvrSetupSlice.actions.deviceChannelMappingsSaveSucceeded),\n      take(dvrSetupSlice.actions.deviceEnableSucceeded),\n    ]),\n\n    failure: race([\n      take(dvrSetupSlice.actions.deviceChannelMappingsSaveFailed),\n      take(dvrSetupSlice.actions.deviceEnableFailed),\n    ]),\n  });\n}\n\n//\n// Watchers\n\nexport function* watchDevicesDiscoverRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      dvrSetupSlice.actions.devicesDiscoverRequested,\n      discoverDevices\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchDevicesFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      dvrSetupSlice.actions.devicesFetchRequested,\n      fetchDevices\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchDeviceChannelsFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeadingPerID(\n      dvrSetupSlice.actions.deviceChannelsFetchRequested,\n      fetchDeviceChannels,\n      ({ payload }) => payload.deviceKey\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchDeviceChannelsScanRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeadingPerID(\n      dvrSetupSlice.actions.deviceChannelsScanRequested,\n      scanDeviceChannels,\n      ({ payload }) => payload.deviceKey\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchDeviceChannelsCancelScanRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeadingPerID(\n      dvrSetupSlice.actions.deviceChannelsCancelScanRequested,\n      cancelScanDeviceChannels,\n      ({ payload }) => payload.deviceKey\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchChannelMappingsSaved(): SagaIterator {\n  while (true) {\n    const task = yield takeLeadingPerID(\n      dvrSetupSlice.actions.deviceChannelMappingsSaveRequested,\n      saveChannelMappings,\n      ({ payload }) => payload.deviceKey\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchDeviceEnableRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeadingPerID(\n      dvrSetupSlice.actions.deviceEnableRequested,\n      enableDevice,\n      ({ payload }) => payload.deviceKey\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchDVRFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      dvrSetupSlice.actions.dvrFetchRequested,\n      fetchDVR\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchDeviceAddRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      dvrSetupSlice.actions.deviceAddRequested,\n      addDevice\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchDVRSaveRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      dvrSetupSlice.actions.dvrSaveRequested,\n      saveDVR\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchDVRDeleteRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      dvrSetupSlice.actions.dvrDeleteRequested,\n      deleteDVR\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchAddDVRDeviceRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      dvrSetupSlice.actions.addDVRDeviceRequested,\n      addDVRDevice\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchRemoveDVRDeviceRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      dvrSetupSlice.actions.removeDVRDeviceRequested,\n      removeDVRDevice\n    );\n\n    yield take(dvrSetupSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport default function* dvrSetupSaga(): SagaIterator {\n  yield all([\n    fork(watchDevicesDiscoverRequested),\n    fork(watchDevicesFetchRequested),\n    fork(watchDeviceChannelsFetchRequested),\n    fork(watchDeviceChannelsScanRequested),\n    fork(watchDeviceChannelsCancelScanRequested),\n    fork(watchChannelMappingsSaved),\n    fork(watchDeviceEnableRequested),\n    fork(watchDeviceAddRequested),\n    fork(watchDVRFetchRequested),\n    fork(watchDVRSaveRequested),\n    fork(watchDVRDeleteRequested),\n    fork(watchAddDVRDeviceRequested),\n    fork(watchRemoveDVRDeviceRequested),\n  ]);\n}\n","import { SagaIterator } from 'redux-saga';\nimport {\n  all,\n  call,\n  cancel,\n  fork,\n  put,\n  select,\n  take,\n  takeLeading,\n} from 'redux-saga/effects';\nimport t from 'app/js/utils/t';\nimport path from 'app/js/utils/url/path';\nimport { Server } from 'app/js/v4/core/servers/serversTypes';\nimport {\n  BestEPGLineupSearchRequestedAction,\n  ChannelMappingsFetchRequestedAction,\n  EPGCountriesFetchRequestedAction,\n  EPGCountryFlavor,\n  EPGCountryRegionsFetchRequestedAction,\n  EPGLanguagesFetchRequestedAction,\n  EPGLineupGroupFetchRequestedAction,\n  EPGSettingsState,\n  SelectedDVRLineupChannelsFetchRequestedAction,\n  SelectedDVRState,\n  SelectedEPGLineupGroupAddRequestedAction,\n} from 'app/js/v4/features/dvrManagement/dvrManagementTypes';\nimport dvrSetupSlice from 'app/js/v4/features/dvrManagement/dvrSetupSlice';\nimport epgSettingsSlice from 'app/js/v4/features/dvrManagement/epgSettingsSlice';\nimport selectDVRSetup from 'app/js/v4/features/dvrManagement/selectors/selectDVRSetup';\nimport selectEPGSettings from 'app/js/v4/features/dvrManagement/selectors/selectEPGSettings';\nimport normalizeChannelMappingResponse from 'app/js/v4/features/dvrManagement/utils/normalizeChannelMappingResponse';\nimport normalizeLineupChannelsResponse from 'app/js/v4/features/dvrManagement/utils/normalizeLineupChannelsResponse';\nimport { APIMediaContainerResponse } from 'app/js/v4/types/MediaContainerResponse';\nimport api, { APIResponse } from 'app/js/v4/utils/data/api';\n\ninterface EPGLineupGroupUrlParams {\n  postalCode?: string;\n}\n\n//\n// Workers\n\nexport function* fetchChannelMappings({\n  payload,\n}: ChannelMappingsFetchRequestedAction): SagaIterator {\n  const { server, device, lineups } = payload;\n  const lineupUUIDs = lineups.map((lineup) => lineup.uuid);\n\n  try {\n    const lineupChannels = yield call(fetchLineupChannels, server, lineupUUIDs);\n\n    const response: APIMediaContainerResponse = yield call(\n      api.get,\n      '/livetv/epg/channelmap',\n      {\n        server,\n        params: {\n          device: device.uuid,\n          lineup: lineupUUIDs,\n        },\n      }\n    );\n\n    const channelMappings = normalizeChannelMappingResponse(\n      response.data.MediaContainer.ChannelMapping\n    );\n\n    yield put(\n      epgSettingsSlice.actions.channelMappingsFetchSucceeded({\n        channelMappings,\n        lineupChannels,\n      })\n    );\n  } catch (error) {\n    yield put(\n      epgSettingsSlice.actions.channelMappingsFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n\n    let errorMessage = t(\n      'There was a problem fetching channel mappings. Please try again later.'\n    );\n\n    if (error.response?.data?.MediaContainer?.message) {\n      errorMessage = error.response.data.MediaContainer.message;\n    }\n\n    yield put(\n      dvrSetupSlice.actions.setupErrorMessageAdded({\n        message: errorMessage,\n      })\n    );\n  }\n}\n\nexport function* searchBestEPGLineup({\n  payload,\n}: BestEPGLineupSearchRequestedAction): SagaIterator {\n  const { server, device, lineupGroup } = payload;\n\n  try {\n    yield put(dvrSetupSlice.actions.setupErrorMessageRemoved());\n\n    const response: APIResponse = yield call(\n      api.get,\n      path.join('/livetv/epg/lineup', {\n        device: device.uuid,\n        lineupGroup: lineupGroup.uuid,\n      }),\n      { server }\n    );\n\n    yield put(\n      epgSettingsSlice.actions.bestEPGLineupSearchSucceeded({\n        lineupGroup,\n        data: response.headers['x-plex-activity'],\n      })\n    );\n  } catch (error) {\n    yield put(\n      dvrSetupSlice.actions.setupErrorMessageAdded({\n        message: t('There was a problem mapping channels'),\n      })\n    );\n  }\n}\n\nexport function* fetchEPGCountries({\n  payload,\n}: EPGCountriesFetchRequestedAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const response: APIMediaContainerResponse = yield call(\n      api.get,\n      '/livetv/epg/countries',\n      {\n        server,\n      }\n    );\n\n    yield put(\n      epgSettingsSlice.actions.epgCountriesFetchSucceeded({\n        server,\n        data: response.data.MediaContainer?.Country ?? [],\n      })\n    );\n  } catch (error) {\n    yield put(\n      epgSettingsSlice.actions.epgCountriesFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchEPGCountryRegions({\n  payload,\n}: EPGCountryRegionsFetchRequestedAction): SagaIterator {\n  const { server, country } = payload;\n\n  try {\n    const response: APIMediaContainerResponse = yield call(\n      api.get,\n      path.join(['/livetv/epg/countries', country.key, 'regions']),\n      {\n        server,\n      }\n    );\n\n    yield put(\n      epgSettingsSlice.actions.epgCountryRegionsFetchSucceeded({\n        data: response.data.MediaContainer?.Region ?? [],\n      })\n    );\n  } catch (error) {\n    yield put(\n      epgSettingsSlice.actions.epgCountryRegionsFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchEPGLanguages({\n  payload,\n}: EPGLanguagesFetchRequestedAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const response: APIMediaContainerResponse = yield call(\n      api.get,\n      '/livetv/epg/languages',\n      {\n        server,\n      }\n    );\n\n    yield put(\n      epgSettingsSlice.actions.epgLanguagesFetchSucceeded({\n        data: response.data.MediaContainer?.Language ?? [],\n      })\n    );\n  } catch (error) {\n    yield put(\n      epgSettingsSlice.actions.epgLanguagesFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchEPGLineupGroup({\n  payload,\n}: EPGLineupGroupFetchRequestedAction): SagaIterator {\n  const { server, country, region, postalCode } = payload;\n\n  const urlSegments = ['/livetv/epg/countries', country.key];\n  const urlParams: EPGLineupGroupUrlParams = {};\n\n  if (country.flavor === EPGCountryFlavor.Regions && region) {\n    urlSegments.push(region.key);\n  } else {\n    urlParams.postalCode = postalCode;\n  }\n\n  const url = path.join(urlSegments, urlParams);\n\n  try {\n    const response: APIMediaContainerResponse = yield call(api.get, url, {\n      server,\n    });\n\n    const { MediaContainer } = response.data;\n\n    yield put(\n      epgSettingsSlice.actions.epgLineupGroupFetchSucceeded({\n        data: {\n          uuid: MediaContainer?.uuid ?? '',\n          epgLineups: MediaContainer?.Lineup ?? [],\n        },\n      })\n    );\n  } catch (error) {\n    yield put(\n      epgSettingsSlice.actions.epgLineupGroupFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* addSelectedEPGLineupGroup({\n  payload,\n}: SelectedEPGLineupGroupAddRequestedAction): SagaIterator {\n  const epgSettings: EPGSettingsState = yield select(selectEPGSettings);\n\n  if (\n    epgSettings.selectedLineupGroups.find(\n      (epgLineupGroup) => epgLineupGroup.uuid === payload.lineupGroup.uuid\n    )\n  ) {\n    yield put(\n      dvrSetupSlice.actions.setupErrorMessageAdded({\n        message: t(\n          'It looks like you have already set up a lineup for this location.'\n        ),\n      })\n    );\n  } else {\n    yield put(\n      epgSettingsSlice.actions.selectedEPGLineupGroupAddSucceeded({\n        lineupGroup: payload.lineupGroup,\n      })\n    );\n  }\n}\n\nexport function* fetchSelectedDVRLineupChannels({\n  payload,\n}: SelectedDVRLineupChannelsFetchRequestedAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const { selectedDVR }: { selectedDVR: SelectedDVRState } = yield select(\n      selectDVRSetup\n    );\n\n    if (!selectedDVR?.dvr?.Lineup) {\n      throw new Error('No available DVR lineups to fetch');\n    }\n\n    const lineupUUIDs = selectedDVR.dvr.Lineup.map((lineup) => lineup.id);\n    const lineupChannels = yield call(fetchLineupChannels, server, lineupUUIDs);\n\n    yield put(\n      epgSettingsSlice.actions.selectedDVRLineupChannelsFetchSucceeded({\n        lineupChannels,\n      })\n    );\n  } catch (error) {\n    yield put(\n      epgSettingsSlice.actions.selectedDVRLineupChannelsFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\n//\n// Helper Workers\n\nexport function* fetchLineupChannels(\n  server: Server,\n  lineups: string[]\n): SagaIterator {\n  const response: APIMediaContainerResponse = yield call(\n    api.get,\n    '/livetv/epg/lineupchannels',\n    {\n      server,\n      params: {\n        lineup: lineups,\n      },\n    }\n  );\n\n  return normalizeLineupChannelsResponse({\n    server,\n    data: response.data.MediaContainer,\n  });\n}\n\n//\n// Watchers\n\nexport function* watchChannelMappingsFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      epgSettingsSlice.actions.channelMappingsFetchRequested,\n      fetchChannelMappings\n    );\n\n    yield take(epgSettingsSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchBestEPGLineupSearchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      epgSettingsSlice.actions.bestEPGLineupSearchRequested,\n      searchBestEPGLineup\n    );\n\n    yield take(epgSettingsSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchEPGCountriesFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      epgSettingsSlice.actions.epgCountriesFetchRequested,\n      fetchEPGCountries\n    );\n\n    yield take(epgSettingsSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchEPGCountryRegionsFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      epgSettingsSlice.actions.epgCountryRegionsFetchRequested,\n      fetchEPGCountryRegions\n    );\n\n    yield take(epgSettingsSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchEPGLanguagesFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      epgSettingsSlice.actions.epgLanguagesFetchRequested,\n      fetchEPGLanguages\n    );\n\n    yield take(epgSettingsSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchEPGLineupGroupFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      epgSettingsSlice.actions.epgLineupGroupFetchRequested,\n      fetchEPGLineupGroup\n    );\n\n    yield take(epgSettingsSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchSelectedEPGLineupGroupAddRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      epgSettingsSlice.actions.selectedEPGLineupGroupAddRequested,\n      addSelectedEPGLineupGroup\n    );\n\n    yield take(epgSettingsSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport function* watchSelectedDVRLineupChannelsFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      epgSettingsSlice.actions.selectedDVRLineupChannelsFetchRequested,\n      fetchSelectedDVRLineupChannels\n    );\n\n    yield take(epgSettingsSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport default function* epgSettingsSaga(): SagaIterator {\n  yield all([\n    fork(watchChannelMappingsFetchRequested),\n    fork(watchBestEPGLineupSearchRequested),\n    fork(watchEPGCountriesFetchRequested),\n    fork(watchEPGCountryRegionsFetchRequested),\n    fork(watchEPGLanguagesFetchRequested),\n    fork(watchEPGLineupGroupFetchRequested),\n    fork(watchSelectedEPGLineupGroupAddRequested),\n    fork(watchSelectedDVRLineupChannelsFetchRequested),\n  ]);\n}\n","import { EPGLineup } from 'app/js/v4/features/dvrManagement/dvrManagementTypes';\nimport { MediaContainerResponse } from 'app/js/v4/types/MediaContainerResponse';\nimport { NormalizerOptions } from 'app/js/v4/utils/data/normalizers/normalizersTypes';\n\nexport interface NormalizeLineupChannelsResponseOptions\n  extends NormalizerOptions {\n  data: MediaContainerResponse;\n}\n\nexport default function normalizeLineupChannelsResponse({\n  data,\n}: NormalizeLineupChannelsResponseOptions): EPGLineup[] {\n  const response: EPGLineup[] = data.Lineup ?? [];\n\n  response.forEach((lineup) => {\n    lineup.Channel = lineup.Channel?.map((channel) => ({\n      ...channel,\n      lineupUUID: lineup.uuid,\n    }));\n  });\n\n  return response;\n}\n","import { SagaIterator } from 'redux-saga';\nimport { all, fork } from 'redux-saga/effects';\nimport dvrSetupSaga from './dvrSetupSaga';\nimport epgSettingsSaga from './epgSettingsSaga';\n\nexport default function* dvrManagementSaga(): SagaIterator {\n  yield all([fork(dvrSetupSaga), fork(epgSettingsSaga)]);\n}\n","import { SagaIterator } from 'redux-saga';\nimport {\n  all,\n  call,\n  fork,\n  put,\n  takeEvery,\n  takeLatest,\n} from 'redux-saga/effects';\nimport getIdentifiersFromSource from 'app/js/utils/metadata/getIdentifiersFromSource';\nimport stringifyBoolean from 'app/js/utils/parser/stringifyBoolean';\nimport path from 'app/js/utils/url/path';\nimport { Server } from 'app/js/v4/core/servers/serversTypes';\nimport libraryManagementSlice from 'app/js/v4/features/libraryManagement/libraryManagementSlice';\nimport {\n  HubOptions,\n  HubPromotions,\n  HubsFetchRequestedAction,\n  PromoteRequestedAction,\n  PublishedFetchRequestedAction,\n  PublishedUpdateRequestedAction,\n  RemoveRequestedAction,\n  ReorderRequestedAction,\n  ResetRequestedAction,\n  SettingsFetchRequestedAction,\n  SettingsUpdateRequestedAction,\n} from 'app/js/v4/features/libraryManagement/libraryManagementTypes';\nimport getHubManagementKey from 'app/js/v4/features/libraryManagement/utils/getHubManagementKey';\nimport api, { APIResponse } from 'app/js/v4/utils/data/api';\n\nconst MERGE_RECENTLY_ADDED = 'MergedRecentlyAdded';\n\n//\n// Workers\n\nexport function* fetchSettings({\n  payload,\n}: SettingsFetchRequestedAction): SagaIterator {\n  const { server } = payload;\n\n  try {\n    const response: APIResponse<{\n      MediaContainer: {\n        Setting?: { value: boolean }[];\n      };\n    }> = yield call(api.get, ':/prefs/get', {\n      server,\n      params: {\n        id: MERGE_RECENTLY_ADDED,\n      },\n    });\n\n    const isMergeRecentlyAddedEnabled =\n      response.data.MediaContainer.Setting?.[0]?.value;\n\n    yield put(\n      libraryManagementSlice.actions.settingsFetchSucceeded({\n        server,\n        isMergeRecentlyAddedEnabled,\n      })\n    );\n  } catch (error) {\n    yield put(\n      libraryManagementSlice.actions.settingsFetchFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* updateSettings({\n  payload,\n}: SettingsUpdateRequestedAction): SagaIterator {\n  const { server, isMergeRecentlyAddedEnabled } = payload;\n\n  try {\n    yield call(api.put, ':/prefs', {\n      server,\n      params: {\n        [MERGE_RECENTLY_ADDED]: isMergeRecentlyAddedEnabled,\n      },\n    });\n\n    yield put(\n      libraryManagementSlice.actions.settingsUpdateSucceeded({\n        server,\n        isMergeRecentlyAddedEnabled,\n      })\n    );\n\n    yield put(libraryManagementSlice.actions.resetHubs());\n  } catch (error) {\n    yield put(\n      libraryManagementSlice.actions.settingsUpdateFailed({\n        server,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* fetchHubs({\n  payload,\n}: HubsFetchRequestedAction): SagaIterator {\n  const { server, sourceURI } = payload;\n\n  try {\n    const options = yield call(fetchLatestHubs, server, sourceURI);\n\n    yield put(\n      libraryManagementSlice.actions.hubsFetchSucceeded({\n        sourceURI,\n        options,\n      })\n    );\n  } catch (error) {\n    yield put(\n      libraryManagementSlice.actions.hubsFetchFailed({\n        sourceURI,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* reorderHubs({\n  payload,\n}: ReorderRequestedAction): SagaIterator {\n  const { server, sourceURI, options, fromIndex, toIndex } = payload;\n\n  try {\n    // Request the appropriate change from PMS based on most recent state\n    const identifier = options[toIndex].identifier;\n    const afterIdentifier = options.find(\n      (_value, index) => index === toIndex - 1\n    )?.identifier;\n\n    const { key } = getIdentifiersFromSource(sourceURI);\n\n    yield call(api.put, path.join([key, identifier, 'move']), {\n      server,\n      params: { after: afterIdentifier },\n    });\n\n    yield put(\n      libraryManagementSlice.actions.reorderSucceeded({\n        sourceURI,\n      })\n    );\n\n    yield put(libraryManagementSlice.actions.resetHubs());\n  } catch (error) {\n    // Revert the options array\n    const oldOptions = Array.from(options);\n    const [removed] = oldOptions.splice(toIndex, 1);\n    oldOptions.splice(fromIndex, 0, removed);\n\n    yield put(\n      libraryManagementSlice.actions.reorderFailed({\n        sourceURI,\n        options: oldOptions,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* removeHub({ payload }: RemoveRequestedAction): SagaIterator {\n  const { server, sourceURI, options, removed, index } = payload;\n\n  try {\n    const identifier = removed.identifier;\n    const { key } = getIdentifiersFromSource(sourceURI);\n\n    yield call(api.del, path.join([key, identifier]), {\n      server,\n    });\n\n    yield put(\n      libraryManagementSlice.actions.removeSucceeded({\n        sourceURI,\n      })\n    );\n\n    yield put(libraryManagementSlice.actions.resetHubs());\n  } catch (error) {\n    // Revert the options array\n    const oldOptions = Array.from(options);\n    oldOptions.splice(index, 0, removed);\n\n    yield put(\n      libraryManagementSlice.actions.removeFailed({\n        sourceURI,\n        options: oldOptions,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* resetHubs({ payload }: ResetRequestedAction): SagaIterator {\n  const { server, sourceURI } = payload;\n\n  try {\n    const { key } = getIdentifiersFromSource(sourceURI);\n\n    yield call(api.del, key, {\n      server,\n    });\n\n    const options = yield call(fetchLatestHubs, server, sourceURI);\n\n    yield put(\n      libraryManagementSlice.actions.resetSucceeded({\n        sourceURI,\n        options,\n      })\n    );\n\n    yield put(libraryManagementSlice.actions.resetHubs());\n  } catch (error) {\n    yield put(\n      libraryManagementSlice.actions.resetFailed({\n        sourceURI,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* promoteHub({ payload }: PromoteRequestedAction): SagaIterator {\n  const { server, sourceURI, options, promoted } = payload;\n\n  try {\n    const newOptions = {\n      ...options,\n      ...promoted,\n    };\n\n    yield put(\n      libraryManagementSlice.actions.promoteChanged({\n        sourceURI,\n        options: newOptions,\n      })\n    );\n\n    const { key } = getIdentifiersFromSource(sourceURI);\n\n    yield call(api.put, path.join([key, newOptions.identifier]), {\n      server,\n      params: {\n        promotedToRecommended: stringifyBoolean(\n          newOptions.promotedToRecommended\n        ),\n        promotedToOwnHome: stringifyBoolean(newOptions.promotedToOwnHome),\n        promotedToSharedHome: stringifyBoolean(newOptions.promotedToSharedHome),\n      },\n    });\n\n    yield put(libraryManagementSlice.actions.resetHubs());\n  } catch (error) {\n    yield put(\n      libraryManagementSlice.actions.promoteChanged({\n        sourceURI,\n        options,\n      })\n    );\n  }\n}\n\nexport function* fetchPublishedItem({\n  payload,\n}: PublishedFetchRequestedAction): SagaIterator {\n  const { server, sourceURI, contentDirectoryID } = payload;\n\n  try {\n    const { ratingKey } = getIdentifiersFromSource(sourceURI);\n\n    const hubsResponse: APIResponse<{\n      MediaContainer: {\n        Hub?: HubPromotions[];\n      };\n    }> = yield call(api.get, getHubManagementKey(contentDirectoryID), {\n      server,\n      params: {\n        metadataItemId: ratingKey,\n      },\n    });\n\n    yield put(\n      libraryManagementSlice.actions.publishedFetchSucceeded({\n        sourceURI,\n        hub: hubsResponse.data.MediaContainer.Hub?.[0],\n      })\n    );\n  } catch (error) {\n    yield put(\n      libraryManagementSlice.actions.publishedFetchFailed({\n        sourceURI,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\nexport function* updatePublishedItem({\n  payload,\n}: PublishedUpdateRequestedAction): SagaIterator {\n  const { server, sourceURI, contentDirectoryID, hub } = payload;\n\n  try {\n    const { ratingKey } = getIdentifiersFromSource(sourceURI);\n\n    const hubsResponse: APIResponse<{\n      MediaContainer: {\n        Hub: HubPromotions[];\n      };\n    }> = yield call(api.post, getHubManagementKey(contentDirectoryID), {\n      server,\n      params: {\n        metadataItemId: ratingKey,\n        promotedToRecommended: stringifyBoolean(hub.promotedToRecommended),\n        promotedToOwnHome: stringifyBoolean(hub.promotedToOwnHome),\n        promotedToSharedHome: stringifyBoolean(hub.promotedToSharedHome),\n      },\n    });\n\n    yield put(\n      libraryManagementSlice.actions.publishedUpdateSucceeded({\n        sourceURI,\n        hub: hubsResponse.data.MediaContainer.Hub?.[0],\n      })\n    );\n\n    yield put(libraryManagementSlice.actions.resetHubs());\n  } catch (error) {\n    yield put(\n      libraryManagementSlice.actions.publishedUpdateFailed({\n        sourceURI,\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\n//\n// Helper Workers\n\nfunction* fetchLatestHubs(server: Server, sourceURI: string): SagaIterator {\n  const { key } = getIdentifiersFromSource(sourceURI);\n\n  const hubsResponse: APIResponse<{\n    MediaContainer: {\n      Hub: HubOptions[];\n    };\n  }> = yield call(api.get, key, {\n    server,\n  });\n\n  return hubsResponse.data.MediaContainer.Hub;\n}\n\n//\n// Watchers\n\nfunction* watchSettingsFetchRequested(): SagaIterator {\n  yield takeLatest(\n    libraryManagementSlice.actions.settingsFetchRequested,\n    fetchSettings\n  );\n}\n\nfunction* watchSettingsUpdateRequested(): SagaIterator {\n  yield takeLatest(\n    libraryManagementSlice.actions.settingsUpdateRequested,\n    updateSettings\n  );\n}\n\nfunction* watchHubsFetchRequested(): SagaIterator {\n  yield takeLatest(\n    libraryManagementSlice.actions.hubsFetchRequested,\n    fetchHubs\n  );\n}\n\nfunction* watchReorderRequested(): SagaIterator {\n  yield takeEvery(libraryManagementSlice.actions.reorderRequested, reorderHubs);\n}\n\nfunction* watchRemoveRequested(): SagaIterator {\n  yield takeEvery(libraryManagementSlice.actions.removeRequested, removeHub);\n}\n\nfunction* watchResetRequested(): SagaIterator {\n  yield takeLatest(libraryManagementSlice.actions.resetRequested, resetHubs);\n}\n\nfunction* watchPromoteRequested(): SagaIterator {\n  yield takeEvery(libraryManagementSlice.actions.promoteRequested, promoteHub);\n}\n\nfunction* watchPublishedFetchRequested(): SagaIterator {\n  yield takeLatest(\n    libraryManagementSlice.actions.publishedFetchRequested,\n    fetchPublishedItem\n  );\n}\n\nfunction* watchPublishedUpdateRequested(): SagaIterator {\n  yield takeEvery(\n    libraryManagementSlice.actions.publishedUpdateRequested,\n    updatePublishedItem\n  );\n}\n\nexport default function* libraryManagementSaga(): SagaIterator {\n  yield all([\n    fork(watchSettingsFetchRequested),\n    fork(watchSettingsUpdateRequested),\n    fork(watchHubsFetchRequested),\n    fork(watchReorderRequested),\n    fork(watchRemoveRequested),\n    fork(watchResetRequested),\n    fork(watchPromoteRequested),\n    fork(watchPublishedFetchRequested),\n    fork(watchPublishedUpdateRequested),\n  ]);\n}\n","import createSourceFromIdentifiers from 'app/js/utils/metadata/createSourceFromIdentifiers';\nimport {\n  GuideChannel,\n  GuideChannelResponse,\n} from 'app/js/v4/features/livetv/liveTVTypes';\nimport { NormalizerOptions } from 'app/js/v4/utils/data/normalizers/normalizersTypes';\n\ninterface NormalizeGuideChannelsResponseOptions extends NormalizerOptions {\n  data: GuideChannelResponse[] | undefined;\n}\n\nexport default function normalizeChannelsResponse({\n  server,\n  provider,\n  data,\n}: NormalizeGuideChannelsResponseOptions): GuideChannel[] {\n  const source = createSourceFromIdentifiers({\n    serverIdentifier: server.machineIdentifier,\n    providerIdentifier: provider?.identifier,\n  });\n\n  const guideChannels = data || <GuideChannelResponse[]>[];\n\n  return guideChannels.map((channel) => ({\n    source,\n    ...channel,\n  }));\n}\n","import { SagaIterator } from 'redux-saga';\nimport {\n  all,\n  call,\n  cancel,\n  fork,\n  put,\n  take,\n  takeLeading,\n} from 'redux-saga/effects';\nimport path from 'app/js/utils/url/path';\nimport liveTVSlice from 'app/js/v4/features/livetv/liveTVSlice';\nimport {\n  APIGuideChannelMediaContainerResponse,\n  GuideChannelsFetchRequestedAction,\n} from 'app/js/v4/features/livetv/liveTVTypes';\nimport normalizeChannelsResponse from 'app/js/v4/features/livetv/utils/normalizeChannelsResponse';\nimport api from 'app/js/v4/utils/data/api';\n\n//\n// Workers\n\nexport function* fetchGuideChannels({\n  payload,\n}: GuideChannelsFetchRequestedAction): SagaIterator {\n  const { server, provider } = payload;\n\n  try {\n    const url = server.isCloud\n      ? '/lineups/plex/channels'\n      : path.join([provider.identifier, '/lineups/dvr/channels']);\n\n    const response: APIGuideChannelMediaContainerResponse = yield call(\n      api.get,\n      url,\n      {\n        server,\n        provider,\n        providerVersionOverride: '3.3',\n      }\n    );\n\n    yield put(\n      liveTVSlice.actions.guideChannelsFetchSucceeded({\n        data: normalizeChannelsResponse({\n          server,\n          provider,\n          data: response.data?.MediaContainer.Channel,\n        }),\n      })\n    );\n  } catch (error) {\n    yield put(\n      liveTVSlice.actions.guideChannelsFetchFailed({\n        error: api.toPlainErrorObject(error),\n      })\n    );\n  }\n}\n\n//\n// Watchers\n\nexport function* watchGuideChannelsFetchRequested(): SagaIterator {\n  while (true) {\n    const task = yield takeLeading(\n      liveTVSlice.actions.guideChannelsFetchRequested,\n      fetchGuideChannels\n    );\n\n    yield take(liveTVSlice.actions.reset);\n    yield cancel(task);\n  }\n}\n\nexport default function* liveTVSaga(): SagaIterator {\n  yield all([fork(watchGuideChannelsFetchRequested)]);\n}\n","import { SagaIterator } from 'redux-saga';\nimport { all, fork } from 'redux-saga/effects';\nimport dashboardSaga from 'app/js/v4/features/dashboard/dashboardSaga';\nimport dvrManagementSaga from 'app/js/v4/features/dvrManagement/dvrManagementSaga';\nimport libraryManagementSaga from 'app/js/v4/features/libraryManagement/libraryManagementSaga';\nimport liveTVSaga from 'app/js/v4/features/livetv/liveTVSaga';\n\nexport default function* featuresSaga(): SagaIterator {\n  yield all([\n    fork(dashboardSaga),\n    fork(dvrManagementSaga),\n    fork(libraryManagementSaga),\n    fork(liveTVSaga),\n  ]);\n}\n","import createSagaMiddleware from 'redux-saga';\nimport { configureStore } from '@reduxjs/toolkit';\nimport rootReducer from './rootReducer';\nimport rootSaga from './rootSaga';\n\nconst sagaMiddleware = createSagaMiddleware();\n\nconst store = configureStore({\n  reducer: rootReducer,\n  middleware: [sagaMiddleware],\n});\n\nsagaMiddleware.run(rootSaga);\n\nexport default store;\n","import { SagaIterator } from 'redux-saga';\nimport { all, fork } from 'redux-saga/effects';\nimport coreSaga from 'app/js/v4/core/coreSaga';\nimport featuresSaga from 'app/js/v4/features/featuresSaga';\n\nexport default function* rootSaga(): SagaIterator {\n  yield all([fork(coreSaga), fork(featuresSaga)]);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport store from 'app/js/v4/root/store';\n\nconst StoreModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'StoreModel',\n\n  initialize() {\n    this._currentState = store.getState();\n    store.subscribe(() => {\n      const nextState = store.getState();\n      this.trigger('statechange', this, nextState, this._currentState);\n      this._currentState = nextState;\n    });\n  },\n\n  getState() {\n    return store.getState();\n  },\n\n  toJSON() {\n    return store.getState();\n  },\n\n  dispatch(action: any) {\n    store.dispatch(action);\n  },\n});\n\nexport default StoreModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport BaseAppModel from 'app/js/models/BaseAppModel';\nimport DesktopSettingsModel from 'app/js/models/DesktopSettingsModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport CloudServerModel from 'app/js/models/server/CloudServerModel';\nimport ServerCollection from 'app/js/models/server/ServerCollection';\nimport ServerModel from 'app/js/models/server/ServerModel';\nimport TransientServerModel from 'app/js/models/server/TransientServerModel';\nimport DeviceSettingsModel from 'app/js/models/settings/DeviceSettingsModel';\nimport DesktopUIModel from 'app/js/models/ui/DesktopUIModel';\nimport UserModel from 'app/js/models/user/UserModel';\nimport * as castApiAvailabilities from 'app/js/utils/constants/player/companion/castApiAvailabilities';\nimport { CLOUD_SERVER_ID } from 'app/js/utils/constants/serverIDs';\nimport createEntitiesModelClass from 'app/js/utils/state/createEntitiesModelClass';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport StoreModel from './StoreModel';\n\nconst DesktopAppModel = BaseAppModel.extend({\n  //\n  // Properties\n\n  name: 'DesktopAppModel',\n\n  sessionAttrs: {\n    clientID: attrTypes.string,\n    anonymousClientID: attrTypes.string,\n    authorized: attrTypes.boolean.isRequired,\n    skipSignIn: attrTypes.boolean.isRequired,\n    isWaitingForServers: attrTypes.boolean.isRequired,\n    isWaitingForPrimaryServer: attrTypes.boolean.isRequired,\n    // Pages in our past\n    history: attrTypes.array.isRequired,\n    isFullscreen: attrTypes.boolean.isRequired,\n    isUpdateAvailable: attrTypes.boolean.isRequired,\n    castApiAvailability: castApiAvailabilities.attrType.isRequired,\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n    settings: attrTypes.instanceOf(DesktopSettingsModel),\n  },\n\n  sessionRelations: {\n    entities: {\n      relationClass: createEntitiesModelClass(entityTypes),\n    },\n\n    servers: {\n      relationClass: ServerCollection,\n    },\n\n    cloudServer: {\n      relationClass: CloudServerModel,\n      deferred: true,\n    },\n\n    primaryServer: {\n      relationClass: ServerModel,\n      deferred: true,\n    },\n\n    companionServer: {\n      relationClass: ServerModel,\n      deferred: true,\n    },\n\n    transientServer: {\n      relationClass: TransientServerModel,\n      deferred: true,\n    },\n\n    user: {\n      relationClass: UserModel,\n      deferred: true,\n    },\n\n    remotePlayer: {\n      // The `remotePlayer` can be a `CastPlayerModel` or `PlexPlayerModel`.\n      relationClass: AbstractModel,\n      deferred: true,\n    },\n\n    deviceSettings: {\n      relationClass: DeviceSettingsModel,\n    },\n\n    ui: {\n      relationClass: DesktopUIModel,\n    },\n\n    v4: {\n      relationClass: StoreModel,\n    },\n  },\n\n  defaults() {\n    // Specify the machineIdentifier explicitly so the model is cached properly.\n    const cloudServer = new CloudServerModel(\n      { machineIdentifier: CLOUD_SERVER_ID },\n      { parent: this }\n    );\n\n    return {\n      authorized: false,\n      skipSignIn: false,\n      isWaitingForServers: false,\n      isWaitingForPrimaryServer: false,\n      isUpdateAvailable: false,\n      history: [],\n      cloudServer: cloudServer,\n      user: new UserModel({}, { server: cloudServer, parent: this }),\n      isFullscreen: false,\n      castApiAvailability: castApiAvailabilities.UNKNOWN,\n      settings: new DesktopSettingsModel(),\n    };\n  },\n\n  //\n  // Control\n\n  dispatch(action: any) {\n    this.get('v4').dispatch(action);\n  },\n});\n\nexport default DesktopAppModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport EntityCollection from 'app/js/models/EntityCollection';\n\nexport default function createEntitiesModelClass(entityTypes: any) {\n  const sessionRelations = {};\n\n  for (const key in entityTypes) {\n    const entityType = entityTypes[key];\n\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    sessionRelations[entityType] = {\n      relationClass: EntityCollection,\n    };\n  }\n\n  return AbstractModel.extend({ name: 'EntitiesModel', sessionRelations });\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport attrTypes from 'app/js/models/attrTypes';\nimport AbstractStorageModel from 'app/js/models/storage/AbstractStorageModel';\n\nconst SessionStatsModel = AbstractStorageModel.extend({\n  //\n  // Properties\n\n  name: 'SessionStatsModel',\n\n  storageKey: 'sessionstats',\n\n  syncedAttrs: {\n    heartbeatTime: attrTypes.integer,\n    lastPlayingHeartbeatTime: attrTypes.integer,\n    playbackCount: attrTypes.integer,\n    playbackTime: attrTypes.integer,\n    sessionId: attrTypes.string,\n    anonymousSessionId: attrTypes.string,\n    startTime: attrTypes.integer,\n    lastInteractionTime: attrTypes.integer,\n  },\n\n  defaults: {\n    playbackCount: 0,\n    playbackTime: 0,\n  },\n});\n\nexport default SessionStatsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst OauthProviderUsageModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'OauthProviderUsageModel',\n\n  syncedAttrs: {\n    federatedAuth: attrTypes.boolean,\n    other: attrTypes.boolean,\n  },\n});\n\nexport default OauthProviderUsageModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport OauthProviderUsageModel from './OauthProviderUsageModel';\n\nconst OauthProviderModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'OauthProviderModel',\n\n  rootPropertyName: 'provider',\n\n  sessionAttrs: {\n    isUnlinking: attrTypes.boolean.isRequired,\n    unlinkError: attrTypes.object,\n  },\n\n  syncedAttrs: {\n    authName: attrTypes.string,\n    image: attrTypes.string,\n    label: attrTypes.string.isRequired,\n    linked: attrTypes.boolean.isRequired,\n    nickname: attrTypes.string,\n    url: attrTypes.string.isRequired,\n  },\n\n  syncedRelations: {\n    usage: {\n      relationClass: OauthProviderUsageModel,\n    },\n  },\n\n  defaults: {\n    isUnlinking: false,\n  },\n});\n\nexport default OauthProviderModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport OauthProviderModel from './OauthProviderModel';\n\nconst OauthProviderCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'OauthProviderCollection',\n\n  model: OauthProviderModel,\n\n  context: ['server'],\n\n  url: '/api/v2/authentications/providers',\n\n  responseType: responseTypes.json,\n});\n\nexport default OauthProviderCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport OauthProviderCollection from './OauthProviderCollection';\n\nconst CloudServerFlexModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'CloudServerFlexModel',\n  context: ['server'],\n\n  sessionAttrs: {\n    isOauthProvidersPending: attrTypes.boolean,\n    isOauthProvidersPopulated: attrTypes.boolean,\n    oauthProvidersError: attrTypes.object,\n  },\n\n  sessionRelations: {\n    oauthProviders: {\n      relationClass: OauthProviderCollection,\n    },\n  },\n\n  defaults: {\n    isOauthProvidersPending: false,\n    isOauthProvidersPopulated: false,\n    oauthProvidersError: null,\n  },\n});\n\nexport default CloudServerFlexModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\n\nconst BackgroundTranscodeJobModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'BackgroundTranscodeJobModel',\n  context: ['server'],\n\n  entityType: entityTypes.BACKGROUND_TRANSCODE_JOBS,\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    return createEntityID(this.entityType, state.key, this.server.entityID());\n  },\n\n  idAttribute: 'key',\n  rootPropertyName: 'TranscodeJob',\n\n  syncedAttrs: {\n    queueItemID: attrTypes.integer,\n    generatorID: attrTypes.integer,\n    targetTagID: attrTypes.integer,\n    syncItemId: attrTypes.integer,\n    syncItemTitle: attrTypes.string,\n    key: attrTypes.string,\n    type: attrTypes.string,\n    progress: attrTypes.float,\n    speed: attrTypes.float,\n    remaining: attrTypes.integer,\n    size: attrTypes.integer,\n    ratingKey: attrTypes.string,\n    title: attrTypes.string,\n    thumb: attrTypes.string,\n  },\n});\n\nexport default BackgroundTranscodeJobModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport BackgroundTranscodeJobModel from 'app/js/models/library/convert/BackgroundTranscodeJobModel';\n\nconst BackgroundTranscodeJobCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'BackgroundTranscodeJobCollection',\n  model: BackgroundTranscodeJobModel,\n  context: ['server'],\n  url: '/status/sessions/background',\n});\n\nexport default BackgroundTranscodeJobCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst PlexPlayerModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'PlexPlayerModel',\n  context: ['server', 'baseURL'],\n  rootPropertyName: 'Server',\n  sessionAttrs: {\n    volume: attrTypes.integer,\n  },\n  syncedAttrs: {\n    machineIdentifier: attrTypes.string,\n    name: attrTypes.string,\n    title: attrTypes.string,\n    address: attrTypes.string,\n    port: attrTypes.string,\n    deviceClass: attrTypes.string,\n    version: attrTypes.string,\n    product: attrTypes.string,\n    protocol: attrTypes.string,\n    protocolVersion: attrTypes.string,\n    protocolCapabilities: attrTypes.list,\n  },\n  derivedAttrs: {\n    friendlyName() {\n      return (\n        (this as any).get('title') ||\n        (this as any).get('name') ||\n        (this as any).get('product')\n      );\n    },\n    playerIdentifier() {\n      return `${(this as any).baseURL}:${(this as any).get(\n        'machineIdentifier'\n      )}`;\n    },\n  },\n  defaults: {\n    volume: 100,\n  },\n});\nexport default PlexPlayerModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport PlexPlayerModel from './PlexPlayerModel';\n\nconst PlexPlayerCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'PlexPlayerCollection',\n  context: ['server'],\n\n  model: PlexPlayerModel,\n  url: '/clients',\n\n  augmentResponse(response: any) {\n    const appModel = resolve('appModel');\n    const clientID = appModel.get('clientID');\n    const size = parseInt(response.size, 10);\n\n    if (size === 1 && response.Server.machineIdentifier === clientID) {\n      delete response.Server;\n      response.size = '0';\n    } else if (size > 1) {\n      response.Server = response.Server.filter(\n        (client: any) => client.machineIdentifier !== clientID\n      );\n      response.size = response.Server.length.toString();\n    }\n\n    return response;\n  },\n});\n\nexport default PlexPlayerCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\n\nconst ActivityModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ActivityModel',\n  context: ['server'],\n\n  idAttribute: 'uuid',\n  rootPropertyName: 'Activity',\n\n  responseType() {\n    return getSupportedResponseType(this.server);\n  },\n\n  sessionAttrs: {\n    synthetic: attrTypes.boolean,\n  },\n\n  syncedAttrs: {\n    uuid: attrTypes.string,\n    userID: attrTypes.integer,\n    title: attrTypes.string,\n    subtitle: attrTypes.string,\n    progress: attrTypes.integer,\n    event: attrTypes.string,\n    cancellable: attrTypes.boolean,\n    type: attrTypes.string,\n    Context: attrTypes.object,\n    Response: attrTypes.object,\n  },\n\n  defaults() {\n    return {\n      Context: {},\n      Response: {},\n    };\n  },\n});\n\nexport default ActivityModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport ActivityModel from './ActivityModel';\n\nconst ActivityCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'ActivityCollection',\n  context: ['server'],\n\n  model: ActivityModel,\n  url: '/activities',\n\n  responseType() {\n    return getSupportedResponseType(this.server);\n  },\n});\n\nexport default ActivityCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst NeighborhoodDeviceModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'NeighborhoodDeviceModel',\n  context: ['server'],\n\n  idAttribute: 'uuid',\n  rootPropertyName: 'Device',\n\n  syncedAttrs: {\n    uuid: attrTypes.string.isRequired,\n    address: attrTypes.string.isRequired,\n    title: attrTypes.string,\n    manufacturer: attrTypes.string,\n    model: attrTypes.string,\n    modelNumber: attrTypes.string,\n    serialNumber: attrTypes.string,\n  },\n});\n\nexport default NeighborhoodDeviceModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport NeighborhoodDeviceModel from 'app/js/models/server/NeighborhoodDeviceModel';\n\nconst NeighborhoodDeviceCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'NeighborhoodDeviceCollection',\n  context: ['server'],\n\n  model: NeighborhoodDeviceModel,\n\n  url: 'neighborhood/devices',\n});\n\nexport default NeighborhoodDeviceCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport BaseCollection from 'app/js/models/BaseCollection';\n\nconst PaginatedCollection = BaseCollection.extend({\n  //\n  // Properties\n\n  pageSize: 10,\n\n  //\n  // Control\n\n  pages: function () {\n    return Math.max(Math.ceil(this.length / this.pageSize), 1);\n  },\n\n  page: function (i: any, options: any) {\n    options || (options = {});\n\n    let offset = 0;\n    let start;\n\n    if (options.reverse) {\n      start = this.length - i * this.pageSize;\n    } else {\n      start = i * this.pageSize - this.pageSize;\n    }\n\n    if (start < 0) {\n      offset = start;\n      start = 0;\n    }\n\n    return this.models.slice(start, start + this.pageSize + offset);\n  },\n});\n\nexport default PaginatedCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport BaseModel from 'app/js/models/BaseModel';\n\nlet nextID = 0;\n\nconst ServerAlertModel = BaseModel.extend({\n  //\n  // Properties\n\n  idAttribute: 'id',\n\n  //\n  // Control\n\n  parse: function (response: any) {\n    const json = response;\n\n    json.time = new Date();\n    json.id = 'evt' + nextID++;\n\n    if (json._type === 'preference') {\n      json.value = String(json.value);\n    }\n\n    return json;\n  },\n});\n\nexport default ServerAlertModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport PaginatedCollection from 'app/js/models/PaginatedCollection';\nimport ServerAlertModel from 'app/js/models/server/ServerAlertModel';\n\nconst ServerAlertCollection = PaginatedCollection.extend({\n  //\n  // Properties\n\n  model: ServerAlertModel,\n  url: '/servers',\n  pageSize: 20,\n  limit: 1000,\n\n  //\n  // Init\n\n  initialize: function () {\n    this.startTime = new Date();\n\n    this.listenTo(this.server, 'socket:setting', this.onSettingChange);\n    this.listenTo(this.server, 'socket:timeline', this.onTimeline);\n    this.listenTo(this.server, 'socket:status', this.onStatus);\n    this.listenTo(this.server, 'socket:playing', this.onPlaying);\n    this.listenTo(this.server, 'socket:websocket', this.onWebSocket);\n  },\n\n  //\n  // Control\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'response' is declared but its value is never read... Remove this comment to see the full error message\n  add: function (response: any) {\n    // Don't let the size of the collection exceed the limit.\n    if (this.length + 1 > this.limit) {\n      this.remove(this.at(0));\n    }\n\n    // eslint-disable-next-line prefer-rest-params\n    PaginatedCollection.prototype.add.apply(this, arguments);\n  },\n\n  //\n  // Listeners\n\n  onSettingChange: function (event: any) {\n    if (event.label) {\n      this.add(_.extend({ _type: 'setting' }, event), { parse: true });\n    }\n  },\n\n  onTimeline: function (event: any) {\n    // Do not add the progress timeline events to the collection. They are\n    // unimportant and can overwhelm the notifications list.\n    if (event.state === 1 || event.sectionID < 0) {\n      return;\n    }\n\n    this.add(_.extend({ _type: 'timeline' }, event), { parse: true });\n  },\n\n  onStatus: function (event: any) {\n    // Do not add the 'Scanning' messages to the collection. They are\n    // unimportant and can overwhelm the notifications list.\n    if (event._elementType === 'ProgressNotification') {\n      return;\n    }\n\n    this.add(_.extend({ _type: 'status' }, event), { parse: true });\n  },\n\n  onPlaying: function (event: any) {\n    this.add(_.extend({ _type: 'playing' }, event), { parse: true });\n  },\n\n  onWebSocket: function (event: any) {\n    this.add(_.extend({ _type: 'websocket' }, event), { parse: true });\n  },\n});\n\nexport default ServerAlertCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport getSupportedResponseType from 'app/js/utils/getSupportedResponseType';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\n\nconst TranscodeJobModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'TranscodeJobModel',\n  context: ['server'],\n\n  entityType: entityTypes.TRANSCODE_JOBS,\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    return createEntityID(\n      this.entityType,\n      state.syncItemId,\n      this.server.entityID()\n    );\n  },\n\n  idAttribute: 'syncItemId',\n  rootPropertyName: 'TranscodeJob',\n\n  syncedAttrs: {\n    syncItemId: attrTypes.integer,\n    syncItemTitle: attrTypes.string,\n    key: attrTypes.string,\n    type: attrTypes.string,\n    progress: attrTypes.float,\n    speed: attrTypes.float,\n    remaining: attrTypes.string,\n    size: attrTypes.string,\n    title: attrTypes.string,\n    thumb: attrTypes.string,\n  },\n\n  responseType() {\n    return getSupportedResponseType(this.server);\n  },\n});\n\nexport default TranscodeJobModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport TranscodeJobModel from 'app/js/models/server/TranscodeJobModel';\nimport CollectionCache from 'app/js/utils/cache/CollectionCache';\n\nconst TranscodeJobCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'TranscodeJobCollection',\n  context: ['server'],\n\n  model: TranscodeJobModel,\n  cache: new CollectionCache(),\n\n  url: '/sync/transcodeQueue',\n});\n\nexport default TranscodeJobCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport BackgroundTranscodeJobCollection from 'app/js/models/library/convert/BackgroundTranscodeJobCollection';\nimport SectionCollection from 'app/js/models/library/section/SectionCollection';\nimport PlexPlayerCollection from 'app/js/models/player/PlexPlayerCollection';\nimport ActivityCollection from 'app/js/models/server/ActivityCollection';\nimport NeighborhoodDeviceCollection from 'app/js/models/server/NeighborhoodDeviceCollection';\nimport ServerAlertCollection from 'app/js/models/server/ServerAlertCollection';\nimport ServerCloudAccountModel from 'app/js/models/server/ServerCloudAccountModel';\nimport ServerSettingCollection from 'app/js/models/server/ServerSettingCollection';\nimport ServerUpdateModel from 'app/js/models/server/ServerUpdateModel';\nimport TranscodeJobCollection from 'app/js/models/server/TranscodeJobCollection';\n\nconst ServerFlexModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'ServerFlexModel',\n  context: ['server'],\n\n  sessionAttrs: {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n    alerts: attrTypes.instanceOf(ServerAlertCollection).isRequired,\n\n    hasiTunes: attrTypes.boolean,\n    isHasiTunesPopulated: attrTypes.boolean,\n\n    isSettingsPending: attrTypes.boolean,\n    isSettingsPopulated: attrTypes.boolean,\n    settingsError: attrTypes.object,\n\n    isLibrariesPending: attrTypes.boolean.isRequired,\n    isLibrariesPopulated: attrTypes.boolean.isRequired,\n    librariesError: attrTypes.object,\n\n    cleanBundlesError: attrTypes.string,\n    optimizeDatabaseError: attrTypes.string,\n  },\n\n  sessionRelations: {\n    settings: {\n      relationClass: ServerSettingCollection,\n      rootPropertyName: 'Setting',\n    },\n\n    cloudAccount: {\n      relationClass: ServerCloudAccountModel,\n    },\n\n    libraries: {\n      relationClass: SectionCollection,\n    },\n\n    activities: {\n      relationClass: ActivityCollection,\n    },\n\n    transcodeJobs: {\n      relationClass: TranscodeJobCollection,\n    },\n\n    backgroundTranscodeJobs: {\n      relationClass: BackgroundTranscodeJobCollection,\n    },\n\n    players: {\n      relationClass: PlexPlayerCollection,\n    },\n\n    neighborhoodDevices: {\n      relationClass: NeighborhoodDeviceCollection,\n    },\n\n    update: {\n      relationClass: ServerUpdateModel,\n    },\n  },\n\n  defaults() {\n    return {\n      alerts: new ServerAlertCollection([], { server: this.server }),\n\n      hasiTunes: false,\n      isHasiTunesPopulated: false,\n\n      isSettingsPending: true,\n      isSettingsPopulated: false,\n      settingsError: null,\n\n      isLibrariesPending: true,\n      isLibrariesPopulated: false,\n      librariesError: null,\n\n      cleanBundlesError: null,\n      optimizeDatabaseError: null,\n    };\n  },\n});\n\nexport default ServerFlexModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport attrTypes from 'app/js/models/attrTypes';\nimport AbstractStorageModel from 'app/js/models/storage/AbstractStorageModel';\nimport UserExperienceSettingsModel from 'app/js/models/user/UserExperienceSettingsModel';\n\nconst StoredUserExperienceSettingsModel = AbstractStorageModel.extend({\n  //\n  // Properties\n\n  name: 'StoredUserExperienceSettingsModel',\n\n  syncedAttrs: {\n    ...UserExperienceSettingsModel.prototype.syncedAttrs,\n    isDirty: attrTypes.boolean,\n  },\n\n  syncedRelations: {\n    ...UserExperienceSettingsModel.prototype.syncedRelations,\n  },\n});\n\nexport default StoredUserExperienceSettingsModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport PlexPlayerModel from './PlexPlayerModel';\n\nconst CloudPlayerCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'CloudPlayerCollection',\n  context: ['server', 'baseURL'],\n\n  model: PlexPlayerModel,\n\n  augmentResponse(response: any) {\n    if (!response.Server) {\n      response.Server = response.Player;\n      delete response.Player;\n    }\n\n    return response;\n  },\n});\n\nexport default CloudPlayerCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport CloudPlayerCollection from 'app/js/models/player/CloudPlayerCollection';\nimport { UNTESTED } from 'app/js/utils/constants/player/companion/cloudCompanionLinkStates';\n\nconst CloudCompanionModel = AbstractModel.extend({\n  //\n  // Properties\n  name: 'CloudCompanionModel',\n  context: ['server'],\n  idAttribute: 'identifier',\n  rootPropertyName: 'Companion',\n  syncedAttrs: {\n    identifier: attrTypes.string,\n    title: attrTypes.string,\n    baseURL: attrTypes.string,\n    linkURL: attrTypes.string,\n    provides: attrTypes.list,\n  },\n  sessionAttrs: {\n    linkState: attrTypes.string,\n  },\n  sessionRelations: {\n    cloudPlayers: {\n      relationClass: CloudPlayerCollection,\n      options() {\n        return {\n          url: `${(this as any).get('baseURL')}/resources`,\n          baseURL: (this as any).get('baseURL'),\n        };\n      },\n    },\n  },\n  defaults: {\n    linkState: UNTESTED,\n  },\n});\nexport default CloudCompanionModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const LINKED = 'linked';\nexport const ABLE = 'able';\nexport const UNABLE = 'unable';\nexport const UNTESTED = 'untested';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { resolve } from 'app/js/adapters/adapters';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport path from 'app/js/utils/url/path';\nimport CloudCompanionModel from './CloudCompanionModel';\n\nconst CloudCompanionCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'CloudCompanionCollection',\n  context: ['server'],\n\n  model: CloudCompanionModel,\n  url: '/api/v2/companions',\n  responseType: responseTypes.json,\n\n  augmentResponse(response: any) {\n    const companions = response;\n    const appModel = resolve('appModel');\n    const deviceSettings = appModel && appModel.get('deviceSettings');\n    const url = deviceSettings.get('sonosCustomBaseURL');\n\n    if (url && companions && companions.length) {\n      const sonos = companions.find(\n        ({ identifier }: any) => identifier === 'tv.plex.sonos'\n      );\n\n      if (sonos) {\n        companions.push({\n          identifier: 'tv.plex.sonos-custom',\n          title: 'Sonos (Custom)',\n          baseURL: url,\n          linkURL: path.join([url, 'link']),\n          provides: sonos.provides,\n          token: sonos.token,\n        });\n      }\n    }\n\n    return response;\n  },\n});\n\nexport default CloudCompanionCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst DeviceModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'DeviceModel',\n  context: ['server'],\n\n  rootPropertyName: 'Device',\n\n  url() {\n    return '/devices/' + this.id + '.xml';\n  },\n\n  syncedAttrs: {\n    id: attrTypes.string,\n    clientIdentifier: attrTypes.string,\n    name: attrTypes.string,\n    product: attrTypes.string,\n    productVersion: attrTypes.string,\n    platform: attrTypes.string,\n    platformVersion: attrTypes.string,\n    device: attrTypes.string,\n    model: attrTypes.string,\n    provides: attrTypes.list,\n    screenResolution: attrTypes.string,\n    screenDensity: attrTypes.string,\n    lastSeenAt: attrTypes.integer,\n  },\n\n  //\n  // Control\n\n  supports(feature: any) {\n    return this.get('provides').indexOf(feature) !== -1;\n  },\n});\n\nexport default DeviceModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport DeviceModel from './DeviceModel';\n\nconst DeviceCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'DeviceCollection',\n  context: ['server'],\n\n  model: DeviceModel,\n  url: '/devices.xml',\n\n  //\n  // Control\n\n  filterByProducts(products: any) {\n    const devices = this.filter((device: any) => {\n      return _.contains(products, device.get('product'));\n    });\n\n    return this.clone(devices);\n  },\n\n  filterByPlatforms(platforms: any) {\n    const devices = this.filter((device: any) => {\n      return _.contains(platforms, device.get('platform'));\n    });\n\n    return this.clone(devices);\n  },\n\n  products() {\n    const products = this.map((device: any) => {\n      return device.get('product');\n    });\n\n    return _.uniq(products);\n  },\n});\n\nexport default DeviceCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport createEntityID from 'app/js/utils/state/createEntityID';\nimport * as entityTypes from 'app/js/utils/state/entityTypes';\nimport sharingSettingsAttrs from 'app/js/utils/types/sharingSettingsAttrs';\nimport path from 'app/js/utils/url/path';\n\nconst HomeUserModel2 = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'HomeUserModel',\n\n  context: ['server'],\n\n  rootPropertyName: 'User',\n\n  entityType: entityTypes.HOME_USER,\n\n  // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n  entityID(state = this.state) {\n    return createEntityID(this.entityType, state.id);\n  },\n\n  urlRoot() {\n    // The v2 API does not yet support inviting full users to a Home.\n    // See: https://github.com/plexinc/my-plex/issues/5262\n    return this.get('restricted') ? '/api/v2/home/users' : '/api/home/users';\n  },\n\n  saveUrl() {\n    let url = _.result(this, 'url');\n\n    if (this.get('restricted')) {\n      url = path.join([url, '/restricted']);\n    }\n\n    return url;\n  },\n\n  pinUrl() {\n    const baseUrl = this.get('restricted')\n      ? '/api/v2/home/users/restricted'\n      : '/api/home/users';\n\n    return path.join([baseUrl, this.get('id')]);\n  },\n\n  sessionAttrs: {\n    isRemoving: attrTypes.boolean,\n  },\n\n  syncedAttrs: {\n    id: attrTypes.integer,\n    uuid: attrTypes.string,\n    admin: attrTypes.boolean,\n    protected: attrTypes.boolean,\n    restricted: attrTypes.boolean,\n    restrictionProfile: attrTypes.string,\n    guest: attrTypes.boolean,\n    title: attrTypes.string,\n    username: attrTypes.string,\n    email: attrTypes.string,\n    thumb: attrTypes.string,\n    ...sharingSettingsAttrs,\n  },\n\n  defaults: {\n    isRemoving: false,\n  },\n\n  // @ts-expect-error ts-migrate(7006) FIXME: Parameter 'data' implicitly has an 'any' type.\n  getSaveParams(data) {\n    // eslint-disable-next-line prefer-rest-params\n    const params = AbstractModel.prototype.getSaveParams.apply(this, arguments);\n\n    if (!data || Object.keys(data).length === 0) {\n      if (this.get('restrictionProfile')) {\n        params.restrictionProfile = this.get('restrictionProfile');\n      }\n\n      // Sharing restriction related attributes need to be bundled up together\n      // under a `sharingSettings` parameter.\n      params.sharingSettings = {};\n\n      Object.keys(sharingSettingsAttrs).forEach((attr) => {\n        if (params.hasOwnProperty(attr)) {\n          params.sharingSettings[attr] = params[attr];\n          delete params[attr];\n        }\n      });\n\n      if (this.get('restricted')) {\n        params.friendlyName = this.get('username');\n      } else if (this.isNew()) {\n        params.invitedEmail = this.get('username');\n      }\n    }\n\n    return params;\n  },\n});\n\nexport default HomeUserModel2;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport HomeUserModel2 from './HomeUserModel2';\n\nconst HomeUserCollection2 = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'HomeUserCollection2',\n\n  context: ['server'],\n\n  model: HomeUserModel2,\n  url: '/api/home/users',\n\n  //\n  // Control\n\n  parse(response: any) {\n    return this.convert(response, 'User');\n  },\n});\n\nexport default HomeUserCollection2;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport _ from 'underscore';\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport parseInteger from 'app/js/utils/parser/parseInteger';\nimport path from 'app/js/utils/url/path';\n\nconst InviteModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'InviteModel',\n\n  context: ['server'],\n  rootPropertyName: 'Invite',\n\n  sessionAttrs: {\n    isAccepting: attrTypes.boolean,\n    isRemoving: attrTypes.boolean,\n  },\n\n  syncedAttrs: {\n    id: {\n      type: attrTypes.string,\n      save: true,\n    },\n    friend: attrTypes.boolean,\n    home: attrTypes.boolean,\n    server: attrTypes.boolean,\n    friendlyName: attrTypes.string,\n    username: attrTypes.string,\n    email: attrTypes.string,\n    thumb: attrTypes.string,\n    createdAt: attrTypes.integer,\n    Server: attrTypes.array,\n  },\n\n  urlRoot: '/api/invites/requests',\n\n  url() {\n    let url;\n\n    if (this.isNew()) {\n      url = _.result(this, 'urlRoot');\n    } else {\n      const params = this.pick('friend', 'server', 'home');\n\n      // Convert the boolean values to 1s and 0s.\n      _.each(_.keys(params), function (key) {\n        params[key] = params[key] ? '1' : '0';\n      });\n\n      url = this.collection\n        ? _.result(this.collection, 'url')\n        : _.result(this, 'urlRoot');\n      url = url.replace(/([^/])$/, '$1/') + encodeURIComponent(this.get('id'));\n      url = path.join(url, params);\n    }\n\n    return url;\n  },\n\n  augmentResponse(response: any) {\n    if (!response.Server) {\n      return response;\n    }\n\n    const servers = Array.isArray(response.Server)\n      ? response.Server\n      : [response.Server];\n\n    servers.forEach((server: any) => {\n      server.numLibraries = parseInteger(server.numLibraries);\n    });\n\n    return response;\n  },\n\n  defaults: {\n    isAccepting: false,\n    isRemoving: false,\n  },\n});\n\nexport default InviteModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport Obscura from 'app/js/libs/backbone/backbone.obscura-0.1.7';\nimport InviteModel from './InviteModel';\n\nconst InviteCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'InviteCollection',\n\n  context: ['server', 'subset'],\n\n  model: InviteModel,\n\n  url() {\n    return '/api/invites/' + this.subset;\n  },\n\n  //\n  // Init\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'models' is declared but its value is never read.\n  initialize(models: any, options: any) {\n    options || (options = {});\n\n    this.subset = options.subset || 'requests';\n  },\n\n  //\n  // Control\n\n  filterByHome() {\n    const proxy = new Obscura(this);\n    proxy.filterBy((invite: any) => invite.get('home'));\n\n    return proxy;\n  },\n\n  filterByFriends() {\n    const proxy = new Obscura(this);\n    proxy.filterBy((invite: any) => !invite.get('home'));\n\n    return proxy;\n  },\n});\n\nexport default InviteCollection;\n","import _ from 'underscore';\nimport BaseModel from 'app/js/models/BaseModel';\nimport parser from 'app/js/utils/parser';\n\nconst SocialNetworkModel = BaseModel.extend({\n  //\n  // Properties\n\n  idAttribute: 'key',\n\n  whitelistedAttrs: ['key', 'title', 'linked', 'maxLength'],\n\n  //\n  // Control\n\n  convert: function (xml: any) {\n    const json = _.isObject(xml) ? xml : parser.parseXML(xml);\n\n    parser.parseBoolean(json, ['linked', 'maxLength']);\n\n    return json;\n  },\n\n  parse: function (response: any) {\n    let json = this.convert(response);\n\n    json = _.pick(json, this.whitelistedAttrs);\n\n    return json;\n  },\n});\n\nexport default SocialNetworkModel;\n","import BaseCollection from 'app/js/models/BaseCollection';\nimport SocialNetworkModel from './SocialNetworkModel';\n\nconst SocialNetworkCollection = BaseCollection.extend({\n  //\n  // Properties\n\n  model: SocialNetworkModel,\n  url: '/pms/social/networks',\n\n  //\n  // Control\n\n  parse: function (response: any) {\n    return this.convert(response, 'Directory');\n  },\n});\n\nexport default SocialNetworkCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst SubscriptionPlanModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'SubscriptionPlanModel',\n  context: ['server'],\n\n  rootPropertyName: 'plan',\n\n  syncedAttrs: {\n    id: attrTypes.string,\n    name: attrTypes.string,\n    price: attrTypes.float,\n    formattedPrice: attrTypes.string,\n    currency: attrTypes.string,\n  },\n});\n\nexport default SubscriptionPlanModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport SubscriptionPlanModel from './SubscriptionPlanModel';\n\nconst SubscriptionPlanCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'SubscriptionPlanCollection',\n  context: ['server'],\n\n  model: SubscriptionPlanModel,\n  url: '/api/subscriptions/plans',\n});\n\nexport default SubscriptionPlanCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\n\nconst WebhookModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'WebhookModel',\n\n  syncedAttrs: {\n    url: attrTypes.string,\n  },\n\n  defaults: {\n    url: '',\n  },\n});\n\nexport default WebhookModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractCollection from 'app/js/models/AbstractCollection';\nimport * as responseTypes from 'app/js/models/responseTypes';\nimport WebhookModel from './WebhookModel';\n\nconst WebhookCollection = AbstractCollection.extend({\n  //\n  // Properties\n\n  name: 'WebhookCollection',\n\n  context: ['server'],\n\n  model: WebhookModel,\n\n  url: '/api/v2/user/webhooks',\n\n  responseType: responseTypes.json,\n});\n\nexport default WebhookCollection;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport attrTypes from 'app/js/models/attrTypes';\nimport CloudCompanionCollection from 'app/js/models/player/CloudCompanionCollection';\nimport DeviceCollection from './DeviceCollection';\nimport HomeDetailsModel from './HomeDetailsModel';\nimport HomeUserCollection2 from './HomeUserCollection2';\nimport InviteCollection from './InviteCollection';\nimport SocialNetworkCollection from './SocialNetworkCollection';\nimport SubscriptionPlanCollection from './SubscriptionPlanCollection';\nimport WebhookCollection from './WebhookCollection';\n\nconst UserFlexModel = AbstractModel.extend({\n  //\n  // Properties\n\n  name: 'UserFlexModel',\n  context: ['server'],\n\n  sessionAttrs: {\n    isHomeUsersPending: attrTypes.boolean.isRequired,\n    isHomeUsersPopulated: attrTypes.boolean.isRequired,\n    homeUsersError: attrTypes.object,\n\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n    socialNetworks: attrTypes.instanceOf(SocialNetworkCollection).isRequired,\n\n    isPlansPending: attrTypes.boolean.isRequired,\n    isPlansPopulated: attrTypes.boolean.isRequired,\n    plansError: attrTypes.object,\n\n    isUpdatingUser: attrTypes.boolean.isRequired,\n    updateUserError: attrTypes.object,\n\n    isHomeDetailsPending: attrTypes.boolean,\n    isHomeDetailsPopulated: attrTypes.boolean,\n    homeDetailsError: attrTypes.object,\n\n    isInvitesPending: attrTypes.boolean,\n    isInvitesPopulated: attrTypes.boolean,\n    invitesError: attrTypes.object,\n\n    isSentInvitesPending: attrTypes.boolean,\n    isSentInvitesPopulated: attrTypes.boolean,\n    sentInvitesError: attrTypes.object,\n\n    isWebhooksPending: attrTypes.boolean,\n    isWebhooksPopulated: attrTypes.boolean,\n    webhooksError: attrTypes.object,\n    isUpdatingWebhooks: attrTypes.boolean,\n    isRemovingWebhooks: attrTypes.boolean,\n    updateWebhooksError: attrTypes.object,\n  },\n\n  sessionRelations: {\n    homeUsers: {\n      relationClass: HomeUserCollection2,\n    },\n\n    devices: {\n      relationClass: DeviceCollection,\n    },\n\n    cloudCompanions: {\n      relationClass: CloudCompanionCollection,\n    },\n\n    homeDetails: {\n      relationClass: HomeDetailsModel,\n    },\n\n    invites: {\n      relationClass: InviteCollection,\n    },\n\n    sentInvites: {\n      relationClass: InviteCollection,\n      options: {\n        subset: 'requested',\n      },\n    },\n\n    plans: {\n      relationClass: SubscriptionPlanCollection,\n    },\n\n    webhooks: {\n      relationClass: WebhookCollection,\n    },\n  },\n\n  defaults() {\n    const collectionOptions = {\n      server: this.server,\n      parent: this,\n    };\n\n    return {\n      isHomeUsersPending: false,\n      isHomeUsersPopulated: false,\n      homeUsersError: null,\n\n      socialNetworks: new SocialNetworkCollection([], collectionOptions),\n\n      isPlansPending: true,\n      isPlansPopulated: false,\n      plansError: null,\n\n      isUpdatingUser: false,\n      updateUserError: null,\n\n      isHomeDetailsPending: false,\n      isHomeDetailsPopulated: false,\n      homeDetailsError: null,\n\n      isInvitesPending: false,\n      isInvitesPopulated: false,\n      invitesError: null,\n\n      isSentInvitesPending: false,\n      isSentInvitesPopulated: false,\n      sentInvitesError: null,\n\n      isWebhooksPending: false,\n      isWebhooksPopulated: false,\n      webhooksError: null,\n      isUpdatingWebhooks: false,\n      isRemovingWebhooks: false,\n      updateWebhooksError: null,\n    };\n  },\n});\n\nexport default UserFlexModel;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport ProviderIntegrationCollection from 'app/js/models/provider/ProviderIntegrationCollection';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createFetchHandler from 'app/js/stores/actions/helpers/createFetchHandler';\nimport createLocastAccountHelper from 'app/js/stores/actions/provider/createLocastAccount';\nimport {\n  findProviderModel,\n  findServerModel,\n} from 'app/js/utils/state/modelFinders';\nimport { scheduleImmediateUpdate } from 'app/js/utils/state/stateUpdateScheduler';\n\n//\n// Action Types\n\nexport const INIT_PROVIDER_INTEGRATIONS =\n  'provider/providerIntegrations/initProviderIntegrations';\nexport const FETCH_PROVIDER_INTEGRATIONS =\n  'provider/providerIntegrations/fetchProviderIntegrations';\nexport const POLL_PROVIDER_INTEGRATIONS =\n  'provider/providerIntegrations/pollProviderIntegrations';\nexport const INTEGRATIONS_ONBOARDING_COMPLETE =\n  'provider/providerIntegrations/integrationsOnboardingComplete';\nexport const CREATE_LOCAST_ACCOUNT =\n  'provider/providerIntegrations/createLocastAccount';\n\n//\n// Action Creators\n\nexport const initProviderIntegrations = createActionCreator(\n  INIT_PROVIDER_INTEGRATIONS\n);\nexport const fetchProviderIntegrations = createActionCreator(\n  FETCH_PROVIDER_INTEGRATIONS\n);\nexport const pollProviderIntegrations = createActionCreator(\n  POLL_PROVIDER_INTEGRATIONS\n);\nexport const integrationsOnboardingComplete = createActionCreator(\n  INTEGRATIONS_ONBOARDING_COMPLETE\n);\nexport const createLocastAccount = createActionCreator(CREATE_LOCAST_ACCOUNT);\n\n//\n// Helpers\n\nfunction findProviderIntegrationsModel(appModel: any) {\n  return appModel.get('ui').get('providerIntegrations');\n}\n\n//\n// Action Handlers\n\nexport const providerIntegrationsActionHandlers = {\n  [INIT_PROVIDER_INTEGRATIONS](appModel: any, payload: any, dispatch: any) {\n    findProviderIntegrationsModel(appModel).set({\n      isIntegrationsOnboarding: false,\n      isIntegrationsPending: false,\n      isIntegrationsPopulated: false,\n      integrationsError: null,\n      integrations: new ProviderIntegrationCollection([], {\n        server: findServerModel(appModel, payload),\n        provider: findProviderModel(appModel, payload),\n      }),\n    });\n\n    dispatch(fetchProviderIntegrations());\n  },\n\n  [FETCH_PROVIDER_INTEGRATIONS]: createFetchHandler({\n    key: 'integrations',\n    getModel: findProviderIntegrationsModel,\n  }),\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [POLL_PROVIDER_INTEGRATIONS](appModel: any, payload: any, dispatch: any) {\n    findProviderIntegrationsModel(appModel).set(\n      'isIntegrationsOnboarding',\n      true\n    );\n    window.setTimeout(() => {\n      scheduleImmediateUpdate(() => {\n        dispatch(fetchProviderIntegrations());\n      });\n    }, 3000);\n  },\n\n  [INTEGRATIONS_ONBOARDING_COMPLETE](appModel: any) {\n    findProviderIntegrationsModel(appModel).set(\n      'isIntegrationsOnboarding',\n      false\n    );\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [CREATE_LOCAST_ACCOUNT](appModel: any, payload: any, dispatch: any) {\n    findProviderIntegrationsModel(appModel).set(\n      'isIntegrationsOnboarding',\n      true\n    );\n\n    createLocastAccountHelper().then(() => {\n      dispatch(pollProviderIntegrations());\n    });\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\n\nfunction createLocastAccount() {\n  const deferred = $.Deferred();\n  window.setTimeout(() => {\n    deferred.resolve();\n  }, 3000);\n\n  return deferred;\n}\n\nexport default createLocastAccount;\n","/* eslint-plugin-disable @typescript-eslint */\n\nexport const BOOL = 'bool';\nexport const DOUBLE = 'double';\nexport const GROUP = 'group';\nexport const INT = 'int';\nexport const LINEUP = 'lineup';\nexport const LOCATION = 'location';\nexport const SELECT = 'select';\nexport const TEXT = 'text';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport ProviderEPGChannelCollection from 'app/js/models/provider/ProviderEPGChannelCollection';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createFetchHandler from 'app/js/stores/actions/helpers/createFetchHandler';\nimport createPopulateHandler from 'app/js/stores/actions/helpers/createPopulateHandler';\nimport providerFeatureTypes from 'app/js/utils/constants/providerFeatureTypes';\nimport * as providerSettingIDs from 'app/js/utils/constants/providerSettingIDs';\nimport * as providerSettingTypes from 'app/js/utils/constants/providerSettingTypes';\nimport { findProviderModel } from 'app/js/utils/state/modelFinders';\nimport { scheduleImmediateUpdate } from 'app/js/utils/state/stateUpdateScheduler';\nimport path from 'app/js/utils/url/path';\nimport xhrErrorFilter from 'app/js/utils/xhr/xhrErrorFilter';\n\n//\n// Action Types\n\nexport const FETCH_PROVIDER_SETTINGS =\n  'provider/providerSettings/fetchProviderSettings';\nexport const FETCH_PROVIDER_SETTING_SELECT_OPTIONS =\n  'provider/providerSettings/fetchProviderSettingSelectOptions';\nexport const CLEAR_PROVIDER_SETTING_FETCH_ERROR =\n  'provider/provderSettings/clearProviderSettingFetchError';\nexport const FETCH_PROVIDER_SETTING_LOCATION_OPTIONS =\n  'provider/providerSettings/fetchProviderSettingLocationOptions';\nexport const POPULATE_PROVIDER_SETTING_LOCATION_OPTIONS =\n  'provider/providerSettings/populateProviderSettingLocationOptions';\nexport const FETCH_PROVIDER_SETTING_LINEUP_CHANNELS =\n  'provider/providerSettings/fetchProviderSettingLineupChannels';\nexport const POPULATE_PROVIDER_SETTING_LINEUP_CHANNELS =\n  'provider/providerSettings/populateProviderSettingLineupChannels';\nexport const FETCH_PROVIDER_SETTING_RECENT_CHANNELS_IN_GRID =\n  'provider/providerSettings/fetchProviderSettingRecentChannelsInGrid';\nexport const POPULATE_PROVIDER_SETTING_RECENT_CHANNELS_IN_GRID =\n  'provider/providerSettings/populateProviderSettingRecentChannelsInGrid';\nexport const UPDATE_PROVIDER_SETTING =\n  'provider/providerSettings/updateProviderSetting';\nexport const CLEAR_PROVIDER_SETTING_UPDATE_ERROR =\n  'provider/providerSettings/clearProviderSettingUpdateError';\nexport const POPULATE_PROVIDER_SETTING_OPTIONS =\n  'provider/providerSettings/populateProviderSettingOptions';\n\n//\n// Action Creators\n\nexport const fetchProviderSettings = createActionCreator(\n  FETCH_PROVIDER_SETTINGS\n);\nexport const fetchProviderSettingSelectOptions = createActionCreator(\n  FETCH_PROVIDER_SETTING_SELECT_OPTIONS\n);\nexport const clearProviderSettingFetchError = createActionCreator(\n  CLEAR_PROVIDER_SETTING_FETCH_ERROR\n);\nexport const fetchProviderSettingLocationOptions = createActionCreator(\n  FETCH_PROVIDER_SETTING_LOCATION_OPTIONS\n);\nexport const populateProviderSettingLocationOptions = createActionCreator(\n  POPULATE_PROVIDER_SETTING_LOCATION_OPTIONS\n);\nexport const fetchProviderSettingLineupChannels = createActionCreator(\n  FETCH_PROVIDER_SETTING_LINEUP_CHANNELS\n);\nexport const populateProviderSettingLineupChannels = createActionCreator(\n  POPULATE_PROVIDER_SETTING_LINEUP_CHANNELS\n);\nexport const fetchProviderSettingRecentChannelsInGrid = createActionCreator(\n  FETCH_PROVIDER_SETTING_RECENT_CHANNELS_IN_GRID\n);\nexport const populateProviderSettingRecentChannelsInGrid = createActionCreator(\n  POPULATE_PROVIDER_SETTING_RECENT_CHANNELS_IN_GRID\n);\nexport const updateProviderSetting = createActionCreator(\n  UPDATE_PROVIDER_SETTING\n);\nexport const clearProviderSettingUpdateError = createActionCreator(\n  CLEAR_PROVIDER_SETTING_UPDATE_ERROR\n);\nexport const populateProviderSettingOptions = createActionCreator(\n  POPULATE_PROVIDER_SETTING_OPTIONS\n);\n\n//\n// Helpers\n\nfunction findSettingsFeatureModel(appModel: any, payload: any) {\n  return findProviderModel(appModel, payload)\n    .get('features')\n    .get(providerFeatureTypes.SETTINGS);\n}\n\nfunction findProviderSettingByID(appModel: any, payload: any) {\n  return findSettingsFeatureModel(appModel, payload)\n    .get('settings')\n    .get(payload.settingID);\n}\n\nfunction updateSettingModel(settingModel: any, values: any) {\n  switch (settingModel.get('type')) {\n    case providerSettingTypes.LINEUP: {\n      const oldLineup = settingModel.get('lineup');\n      const newLineup = new ProviderEPGChannelCollection(\n        values.map((channel: any) => {\n          const channelModel = oldLineup.findWhere({ id: channel.id });\n\n          channelModel.set({ hidden: channel.hidden });\n\n          return channelModel;\n        })\n      );\n\n      settingModel.set('lineup', newLineup);\n      break;\n    }\n\n    case providerSettingTypes.LOCATION: {\n      const country = settingModel.get('locations').get(values.country);\n\n      settingModel.set({\n        country: values.country,\n        countryLabel: country.get('title'),\n        postalCode: values.postalCode,\n      });\n      break;\n    }\n\n    case providerSettingTypes.SELECT:\n      _.each(values, (value, key) => {\n        settingModel.get('options').get(key).set({ selected: value });\n      });\n      settingModel.set(\n        'selectedCount',\n        _.values(values).filter((value) => value).length\n      );\n      break;\n\n    default:\n      settingModel.set('value', values[settingModel.id]);\n  }\n}\n\nfunction getUpdatePromise(settingModel: any, values: any, providerModel: any) {\n  // @ts-expect-error ts-migrate(6133) FIXME: 'key' is declared but its value is never read.\n  const parsedValues = _.mapObject(values, (value, key) => {\n    if (value === true) {\n      return '1';\n    } else if (value === false) {\n      return '0';\n    }\n\n    return value;\n  });\n\n  const url = path.join(_.result(settingModel, 'url'), { prefs: parsedValues });\n  const xhrOptions = providerModel.getXHROptions(url, { type: 'PUT' });\n\n  return $.ajax(xhrOptions).then(() => {\n    updateSettingModel(settingModel, values);\n  });\n}\n\n//\n// Action Handlers\n\nexport const providerSettingsActionHandlers = {\n  [FETCH_PROVIDER_SETTINGS]: createFetchHandler({\n    key: 'settings',\n    getModel: findSettingsFeatureModel,\n  }),\n\n  [FETCH_PROVIDER_SETTING_SELECT_OPTIONS]: createFetchHandler({\n    key: 'options',\n    getModel: findProviderSettingByID,\n  }),\n\n  [FETCH_PROVIDER_SETTING_LOCATION_OPTIONS]: createFetchHandler({\n    key: 'locations',\n    getModel: findProviderSettingByID,\n  }),\n\n  [POPULATE_PROVIDER_SETTING_LOCATION_OPTIONS]: createPopulateHandler({\n    key: 'locations',\n    fetchActionCreator: fetchProviderSettingLocationOptions,\n    getModel: findProviderSettingByID,\n  }),\n\n  [FETCH_PROVIDER_SETTING_LINEUP_CHANNELS]: createFetchHandler({\n    key: 'lineup',\n    getModel: findProviderSettingByID,\n  }),\n\n  [POPULATE_PROVIDER_SETTING_LINEUP_CHANNELS]: createPopulateHandler({\n    key: 'lineup',\n    fetchActionCreator: fetchProviderSettingLineupChannels,\n    getModel: findProviderSettingByID,\n  }),\n\n  [FETCH_PROVIDER_SETTING_RECENT_CHANNELS_IN_GRID]: createFetchHandler({\n    key: 'recentChannelsInGrid',\n    getModel: findProviderSettingByID,\n  }),\n\n  [POPULATE_PROVIDER_SETTING_RECENT_CHANNELS_IN_GRID]: createPopulateHandler({\n    key: 'recentChannelsInGrid',\n    fetchActionCreator: fetchProviderSettingRecentChannelsInGrid,\n    getModel: findProviderSettingByID,\n  }),\n\n  [UPDATE_PROVIDER_SETTING](appModel: any, payload: any) {\n    const { settingID, values } = payload;\n\n    const providerModel = findProviderModel(appModel, payload);\n    const settingsFeature = providerModel\n      .get('features')\n      .get(providerFeatureTypes.SETTINGS);\n    const providerSettingsPage = appModel.get('ui').get('providerSettingsPage');\n    const settingModel = settingsFeature.get('settings').get(settingID);\n\n    providerSettingsPage.set({\n      isUpdatePending: true,\n      updateError: null,\n    });\n\n    const updatePromises = [];\n    if (settingModel.get('type') === providerSettingTypes.GROUP) {\n      settingModel.get('settings').forEach((groupedSetting: any) => {\n        const groupedSettingValues = {\n          [groupedSetting.id]: values[groupedSetting.id],\n        };\n\n        updatePromises.push(\n          getUpdatePromise(groupedSetting, groupedSettingValues, providerModel)\n        );\n      });\n    } else if (settingModel.get('type') === providerSettingTypes.LINEUP) {\n      const url = _.result(settingModel, 'url');\n      const xhrOptions = providerModel.getXHROptions(url, {\n        type: 'PUT',\n        contentType: 'application/json',\n        data: JSON.stringify(values),\n      });\n      const promise = $.ajax(xhrOptions).then(() => {\n        updateSettingModel(settingModel, values);\n      });\n\n      updatePromises.push(promise);\n    } else if (settingModel.get('type') === providerSettingTypes.INT) {\n      Object.keys(values).forEach((key) => {\n        values[key] = parseInt(values[key], 10);\n      });\n\n      updatePromises.push(\n        getUpdatePromise(settingModel, values, providerModel)\n      );\n    } else {\n      updatePromises.push(\n        getUpdatePromise(settingModel, values, providerModel)\n      );\n    }\n\n    $.when(...updatePromises).then(\n      () => {\n        providerSettingsPage.set({\n          isUpdatePending: false,\n          updateError: null,\n        });\n      },\n      (xhr) => {\n        providerSettingsPage.set({\n          isUpdatePending: false,\n          updateError: xhrErrorFilter(xhr),\n        });\n      }\n    );\n  },\n\n  // @ts-expect-error ts-migrate(6133) FIXME: 'payload' is declared but its value is never read.\n  [CLEAR_PROVIDER_SETTING_UPDATE_ERROR](appModel: any, payload: any) {\n    const providerSettingsPage = appModel.get('ui').get('providerSettingsPage');\n\n    providerSettingsPage.set('updateError', null);\n  },\n\n  [CLEAR_PROVIDER_SETTING_FETCH_ERROR](appModel: any, payload: any) {\n    const setting = findProviderSettingByID(appModel, payload);\n\n    setting.set({\n      optionsError: null,\n      locationsError: null,\n    });\n  },\n\n  [POPULATE_PROVIDER_SETTING_OPTIONS](\n    appModel: any,\n    payload: any,\n    dispatch: any\n  ) {\n    const setting = findProviderSettingByID(appModel, payload);\n    const settingType = setting.get('type');\n\n    if (settingType === providerSettingTypes.SELECT) {\n      scheduleImmediateUpdate(() => {\n        dispatch(fetchProviderSettingSelectOptions(payload));\n      });\n    } else if (settingType === providerSettingTypes.LOCATION) {\n      dispatch(populateProviderSettingLocationOptions(payload));\n    } else if (settingType === providerSettingTypes.LINEUP) {\n      const settingID = setting.get('id');\n\n      if (settingID === providerSettingIDs.LINEUP) {\n        dispatch(populateProviderSettingLineupChannels(payload));\n      } else if (settingID === providerSettingIDs.RECENT_CHANNELS_IN_GRID) {\n        dispatch(populateProviderSettingRecentChannelsInGrid(payload));\n      }\n    }\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { discoverServers } from 'app/js/stores/actions/appActions';\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createFetchHandler from 'app/js/stores/actions/helpers/createFetchHandler';\nimport minDuration from 'app/js/utils/promise/minDuration';\n\n//\n// Action Types\n\nexport const FETCH_OAUTH_PROVIDERS = 'oauth/fetchOauthProviders';\nexport const UNLINK_OAUTH_PROVIDER = 'oauth/unlinkOauthProvider';\n\n//\n// Action Creators\n\nexport const fetchOauthProviders = createActionCreator(FETCH_OAUTH_PROVIDERS);\nexport const unlinkOauthProvider = createActionCreator(UNLINK_OAUTH_PROVIDER);\n\n//\n// Action Handlers\n\nexport const oauthActionHandlers = {\n  [FETCH_OAUTH_PROVIDERS]: createFetchHandler({\n    key: 'oauthProviders',\n    getModel: (appModel: any) => appModel.get('cloudServer').get(__PLATFORM__),\n  }),\n\n  [UNLINK_OAUTH_PROVIDER](appModel: any, payload: any, dispatch: any) {\n    const cloudServer = appModel.get('cloudServer');\n    const model = cloudServer\n      .get(__PLATFORM__)\n      .get('oauthProviders')\n      .findWhere(payload);\n\n    model.set('isUnlinking', true);\n\n    // Ensure we have the plex.tv access token.\n    const promise = cloudServer\n      .populate()\n      .then(() =>\n        $.ajax(cloudServer.getXHROptions(payload.url, { type: 'DELETE' }))\n      );\n\n    minDuration(promise, 1000)\n      .done(() => {\n        model.set('unlinkError', null);\n      })\n      .fail((error) => {\n        model.set('unlinkError', error);\n      })\n      .always(() => {\n        dispatch(discoverServers());\n        dispatch(fetchOauthProviders());\n        model.set('isUnlinking', false);\n      });\n  },\n};\n","/* eslint-plugin-disable @typescript-eslint */\n\n//\n// Metadata List Page\n\nexport const INIT_METADATA_LIST_PAGE = 'INIT_METADATA_LIST_PAGE';\n\n//\n// Timeline Page\n\nexport const INIT_TIMELINE_PAGE = 'INIT_TIMELINE_PAGE';\nexport const CLOSE_TIMELINE_PAGE = 'CLOSE_TIMELINE_PAGE';\nexport const FETCH_TIMELINE_DETAILS = 'FETCH_TIMELINE_DETAILS';\nexport const POPULATE_TIMELINE_DETAILS = 'POPULATE_TIMELINE_DETAILS';\n\n//\n// Live TV EPG Settings\n\nexport const RESET_EPG_SETTINGS = 'RESET_EPG_SETTINGS';\nexport const FETCH_EPG_COUNTRIES = 'FETCH_EPG_COUNTRIES';\nexport const FETCH_EPG_LANGUAGES = 'FETCH_EPG_LANGUAGES';\nexport const SELECT_EPG_COUNTRY = 'SELECT_EPG_COUNTRY';\nexport const SELECT_EPG_LANGUAGE = 'SELECT_EPG_LANGUAGE';\nexport const SELECT_EPG_REGION = 'SELECT_EPG_REGION';\nexport const SET_EPG_POSTAL_CODE = 'SET_EPG_POSTAL_CODE';\nexport const FETCH_EPG_LINEUPS = 'FETCH_EPG_LINEUPS';\n\n//\n// Background\n\nexport const CHANGE_BACKGROUND = 'CHANGE_BACKGROUND';\nexport const CHANGE_THEME_MUSIC = 'CHANGE_THEME_MUSIC';\nexport const RESET_BACKGROUND = 'RESET_BACKGROUND';\n\n//\n// Playlist Page\n\nexport const INIT_PLAYLIST_PAGE = 'INIT_PLAYLIST_PAGE';\nexport const INIT_PLAYLIST_ITEM_LIST = 'INIT_PLAYLIST_ITEM_LIST';\nexport const RESET_PLAYLIST_ITEM_LIST = 'RESET_PLAYLIST_ITEM_LIST';\nexport const FETCH_PLAYLIST = 'FETCH_PLAYLIST';\nexport const POPULATE_PLAYLIST_ITEM_RANGE = 'POPULATE_PLAYLIST_ITEM_RANGE';\nexport const REPOPULATE_PLAYLIST_ITEMS = 'REPOPULATE_PLAYLIST_ITEMS';\nexport const SELECT_PLAYLIST_ITEM = 'SELECT_PLAYLIST_ITEM';\nexport const DESELECT_PLAYLIST_ITEM = 'DESELECT_PLAYLIST_ITEM';\nexport const MOVE_PLAYLIST_ITEM = 'MOVE_PLAYLIST_ITEM';\nexport const REMOVE_PLAYLIST_ITEM = 'REMOVE_PLAYLIST_ITEM';\nexport const REMOVE_SELECTED_ITEMS = 'REMOVE_SELECTED_ITEMS';\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport createActionCreator from 'app/js/stores/actions/createActionCreator';\nimport createActionHandler from 'app/js/stores/actions/createActionHandler';\nimport {\n  findProviderModel,\n  findServerModel,\n} from 'app/js/utils/state/modelFinders';\nimport * as types from '../actionTypes';\n\n//\n// Action Creators\n\nexport const changeBackground = createActionCreator(types.CHANGE_BACKGROUND);\nexport const changeThemeMusic = createActionCreator(types.CHANGE_THEME_MUSIC);\nexport const resetBackground = createActionCreator(types.RESET_BACKGROUND);\n\n//\n// Action Handlers\n\nfunction findBackgroundModel(appModel: any) {\n  return appModel.get('ui').get('background');\n}\n\nexport const backgroundActionHandlers = createActionHandler({\n  [types.CHANGE_BACKGROUND](appModel: any, payload: any = {}) {\n    const { imageUrl, allowBlur = true } = payload;\n    const backgroundModel = findBackgroundModel(appModel);\n\n    backgroundModel.set({\n      server: findServerModel(appModel, payload),\n      provider: findProviderModel(appModel, payload),\n      imageUrl,\n      allowBlur,\n      isBackgroundPending: false,\n    });\n  },\n\n  [types.CHANGE_THEME_MUSIC](appModel: any, payload: any) {\n    const { theme } = payload;\n\n    const backgroundModel = findBackgroundModel(appModel);\n    const serverModel = findServerModel(appModel, payload);\n\n    const themeMusicUrl =\n      serverModel && theme\n        ? serverModel.resolveUrl(theme, { appendHeaders: true })\n        : undefined;\n\n    backgroundModel.set('themeMusicUrl', themeMusicUrl);\n  },\n\n  [types.RESET_BACKGROUND](appModel: any, payload: any) {\n    const backgroundModel = findBackgroundModel(appModel);\n\n    backgroundModel.restoreDefaults({\n      isBackgroundPending: payload.isBackgroundPending,\n    });\n  },\n});\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport { providerIntegrationsActionHandlers } from 'app/js/stores/actions/provider/providerIntegrationsActions';\nimport { providerSettingsActionHandlers } from 'app/js/stores/actions/provider/providerSettingsActions';\nimport { serverUpdateActionHandlers } from 'app/js/stores/actions/serverUpdateActions';\nimport serverLogPageActions from 'app/js/stores/actions/ui/serverLogPageActions';\nimport { appActionHandlers } from './appActions';\nimport { oauthActionHandlers } from './oauthActions';\nimport { providerActionHandlers } from './provider/providerActions';\nimport { claimServerActionHandlers } from './server/claimServerActions';\nimport { serverActionHandlers } from './serverActions';\nimport { backgroundActionHandlers } from './ui/backgroundActions';\nimport { dvrSettingsUIActionHandlers } from './ui/dvrSettingsUIActions';\nimport { dvrSetupActionHandlers } from './ui/dvrSetupActions';\nimport { uiActionHandlers } from './ui/uiActions';\nimport { authCodeExchangeActionHandlers } from './user/authCodeExchangeActions';\nimport { signInLaunchActionHandlers } from './user/signInLaunchActions';\nimport { userActionHandlers } from './userActions';\n\nconst actionHandlers = [\n  signInLaunchActionHandlers,\n  claimServerActionHandlers,\n  authCodeExchangeActionHandlers,\n  appActionHandlers,\n  userActionHandlers,\n  serverActionHandlers,\n  serverUpdateActionHandlers,\n  oauthActionHandlers,\n  providerActionHandlers,\n  providerIntegrationsActionHandlers,\n  providerSettingsActionHandlers,\n\n  // UI\n  uiActionHandlers,\n  backgroundActionHandlers,\n  serverLogPageActions,\n\n  // DVR & Live TV\n  dvrSettingsUIActionHandlers,\n  dvrSetupActionHandlers,\n];\n\nexport default actionHandlers;\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport MediaServerCompanionProxy from 'app/js/adapters/MediaServerCompanionProxy';\nimport { registerAll } from 'app/js/adapters/adapters';\nimport createCompanionVote from 'app/js/adapters/createCompanionVote';\nimport desktopAdapters from 'app/js/adapters/desktopAdapters';\nimport baseDesktopAdaptersInitializer from 'app/js/initializers/baseDesktopAdaptersInitializer';\nimport DesktopAppModel from 'app/js/models/DesktopAppModel';\nimport SessionStatsModel from 'app/js/models/SessionStatsModel';\nimport CloudServerFlexModel from 'app/js/models/server/CloudServerFlexModel';\nimport ServerFlexModel from 'app/js/models/server/ServerFlexModel';\nimport StoredUserExperienceSettingsModel from 'app/js/models/storage/StoredUserExperienceSettingsModel';\nimport UserExperienceSettingsModel from 'app/js/models/user/UserExperienceSettingsModel';\nimport UserFlexModel from 'app/js/models/user/UserFlexModel';\nimport createAppStore from 'app/js/stores/createAppStore';\n\nexport default function desktopAdaptersInitializer() {\n  //\n  // Flex Models\n\n  registerAll({\n    CloudServerFlexModel,\n    ServerFlexModel,\n    UserFlexModel,\n  });\n\n  //\n  // User Settings\n\n  registerAll({\n    UserExperienceSettingsModel,\n    StoredUserExperienceSettingsModel,\n  });\n\n  //\n  // App Model\n\n  const appModel = new DesktopAppModel();\n  const appStore = createAppStore(appModel);\n\n  registerAll({\n    appModel,\n    appStore,\n  });\n\n  //\n  // Platform implementations\n\n  registerAll({\n    companionProxy: new MediaServerCompanionProxy(),\n    companionVote: createCompanionVote(),\n    sessionStats: new SessionStatsModel(),\n  });\n\n  return baseDesktopAdaptersInitializer().then(desktopAdapters.registerAll);\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport actionHandlers from './actions/actionHandlers';\nimport createStore from './createStore';\n\nexport default function createAppStore(appModel: any) {\n  const appStore = createStore(actionHandlers, appModel);\n\n  if (module.hot) {\n    module.hot.accept('./actions/actionHandlers', () => {\n      appStore.replaceActionHandlers(\n        require('./actions/actionHandlers').default\n      );\n    });\n  }\n\n  return appStore;\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\n/* eslint no-console: 0  */\n\nimport AbstractModel from 'app/js/models/AbstractModel';\nimport assert from 'app/js/utils/log/assert';\nimport isPlainObject from 'app/js/utils/object/isPlainObject';\n\n/**\n * Creates a store that is backed by an `AbstractModel`.\n *\n * The only way to change state in the model is to call `dispatch()` on the\n * store. Subscribers can listen to state changes in the model. There should\n * only be a single store in your app.\n *\n * @param {Array} actionHandlers An array of functions that can be used to mutate\n * state in the model.\n *\n * @param {AbstractModel} [model] The backing model that stores all app state.\n *\n * @returns {Store} A store that lets you read state, dispatch actions and\n * subscribe to changes.\n */\nexport default function createStore(actionHandlers: any, model: any) {\n  __DEV__ &&\n    assert(\n      model instanceof AbstractModel,\n      \"A store's model must extend `AbstractModel`\"\n    );\n\n  let currentListeners: any = [];\n  let nextListeners = currentListeners;\n  let currentActionHandlers: any;\n\n  replaceActionHandlers(actionHandlers);\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return model.getState();\n  }\n\n  /**\n   * Adds a change listener. It will be called any time some part of the state\n   * tree has changed. You may then call `getState()` to read the current state\n   * tree inside the callback.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   *\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener: any) {\n    __DEV__ &&\n      assert(\n        typeof listener === 'function',\n        'Expected listener to be a function'\n      );\n\n    let isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      const index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change through\n   * the store.\n   *\n   * An action handler that matches the action type will be invoked and passed\n   * the backing model, the action's payload, and the dispatch function. The\n   * action handler can mutate state anywhere in the model and `statechange`\n   * events will bubble up to the store and subscribers will be notified. The\n   * dispatch function passed to the action handler can be used to dispatch\n   * additional actions.\n   *\n   * @param {Object} action A plain object representing what changed. It is a\n   * good idea to keep actions serializable. An action must have a `type`\n   * property. It is a good idea to use string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   */\n  function dispatch(action: any) {\n    const { payload, type } = action;\n\n    const handlerOrHandlers = type && currentActionHandlers[type];\n\n    __DEV__ && assert(isPlainObject(action), 'Actions must be plain objects');\n    __DEV__ &&\n      assert(\n        action.type != null,\n        'Actions must have a \"type\" property. Have you misspelled a constant?'\n      );\n\n    if (__DEV__) {\n      const getDevOption = require('app/js/utils/dev/getDevOption').default;\n\n      if (getDevOption('stateLogs')) {\n        console.groupCollapsed(`Dispatched \"${type}\"`);\n        console.log('%c PAYLOAD:', 'font-weight: bold', payload);\n        console.log(\n          '%c HANDLERS:',\n          'font-weight: bold',\n          Array.isArray(handlerOrHandlers) ? handlerOrHandlers.length : 1\n        );\n        console.groupCollapsed('Dispatched from:');\n        console.trace();\n        console.groupEnd();\n        console.groupEnd();\n      }\n    }\n\n    if (Array.isArray(handlerOrHandlers)) {\n      for (let i = 0, len = handlerOrHandlers.length; i < len; i++) {\n        handlerOrHandlers[i](model, payload, dispatch);\n      }\n    } else if (handlerOrHandlers) {\n      handlerOrHandlers(model, payload, dispatch);\n    } else {\n      model.dispatch(action);\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the action handlers currently registered to the store. You might\n   * need this if you implement a hot reloading mechanism.\n   *\n   * @param {Function} nextActionHandlers The action handlers for the store to\n   * use instead.\n   *\n   * @returns {void}\n   */\n  function replaceActionHandlers(nextActionHandlers: any) {\n    __DEV__ &&\n      assert(\n        Array.isArray(nextActionHandlers),\n        'Action handlers must be contained within an array'\n      );\n\n    currentActionHandlers = groupActionHandlersByType(nextActionHandlers);\n  }\n\n  /**\n   * Transforms a map of callbacks by action type into a single coalesced map of\n   * callbacks by type.\n   *\n   * @param  {Object[]} An array of action handler maps by action type.\n   *\n   * @return {Object} The coalesced map of all action handlers by type.\n   */\n  function groupActionHandlersByType(allActionHandlers: any) {\n    const handlersByType = {};\n\n    for (let i = 0, len = allActionHandlers.length; i < len; i++) {\n      const handlers = allActionHandlers[i];\n\n      for (const type in handlers) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        const handlerOrHandlers = handlersByType[type];\n        const handler = handlers[type];\n\n        if (handlerOrHandlers) {\n          if (Array.isArray(handlerOrHandlers)) {\n            handlerOrHandlers.push(handler);\n          } else {\n            // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n            handlersByType[type] = [handlerOrHandlers, handler];\n          }\n        } else {\n          // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          handlersByType[type] = handler;\n        }\n      }\n    }\n\n    return handlersByType;\n  }\n\n  /**\n   * Listen for state changes in the model and update subscribers.\n   *\n   * @returns {void}\n   */\n  function onStoreModelStateChange() {\n    const listeners = (currentListeners = nextListeners);\n\n    for (let i = 0, len = listeners.length; i < len; i++) {\n      listeners[i]();\n    }\n  }\n\n  model.on('statechange', onStoreModelStateChange);\n\n  return {\n    dispatch,\n    subscribe,\n    getState,\n    replaceActionHandlers,\n  };\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport $ from 'jquery';\nimport { registerAll, resolve } from 'app/js/adapters/adapters';\nimport createPlexMetricsReporter from 'app/js/adapters/analytics/createPlexMetricsReporter';\nimport createSettingFinder from 'app/js/adapters/createSettingFinder';\nimport metricsInterface from 'app/js/adapters/interfaces/metricsInterface';\nimport metricsReporterInterface from 'app/js/adapters/interfaces/metricsReporterInterface';\nimport testServerConnection from 'app/js/adapters/testServerConnection';\nimport CompanionServerManager from 'app/js/managers/CompanionServerManager';\nimport DesktopServerConnectionManager from 'app/js/managers/DesktopServerConnectionManager';\nimport MetricsManager from 'app/js/managers/MetricsManager';\nimport PrimaryServerManager from 'app/js/managers/PrimaryServerManager';\nimport ProviderManager from 'app/js/managers/ProviderManager';\nimport ServerConnectionTestManager from 'app/js/managers/ServerConnectionTestManager';\nimport ServerManager from 'app/js/managers/ServerManager';\nimport ServerUpdateManager from 'app/js/managers/ServerUpdateManager';\nimport SourceManager from 'app/js/managers/SourceManager';\nimport LogCollection from 'app/js/models/debug/LogCollection';\nimport isPlaybackActive from 'app/js/stores/actions/helpers/isPlaybackActive';\nimport selectDeviceSettingsVolume from 'app/js/stores/selectors/settings/selectDeviceSettingsVolume';\nimport selectRemoteQuality from 'app/js/stores/selectors/settings/selectRemoteQuality';\nimport selectRestorePlayQueue from 'app/js/stores/selectors/settings/selectRestorePlayQueue';\nimport selectSubtitleSettings from 'app/js/stores/selectors/settings/selectSubtitleSettings';\nimport handleLocalCompanionCommand from 'app/js/utils/player/handleLocalCompanionCommand';\nimport MediaServerEventConnection from 'app/js/utils/pubsub/MediaServerEventConnection';\n\nexport default function baseDesktopAdaptersInitializer() {\n  const appModel = resolve('appModel');\n\n  //\n  // Platform specific settings implementations\n\n  registerAll({\n    settingFinder: createSettingFinder(appModel),\n    selectRemoteQuality,\n    selectRestorePlayQueue,\n    selectSubtitleSettings,\n    selectLocalVolume: selectDeviceSettingsVolume,\n  });\n\n  //\n  // Utils\n\n  registerAll({\n    metricsReporter: [createPlexMetricsReporter(), metricsReporterInterface],\n    logs: new LogCollection([], { parent: appModel }),\n    testServerConnection,\n  });\n\n  //\n  // Platform implementations\n\n  registerAll({\n    companionServerManager: new CompanionServerManager({ appModel }),\n    localCompanionCommandHandler: handleLocalCompanionCommand,\n    mediaServerEventConnection: MediaServerEventConnection,\n    metrics: [new MetricsManager({ isPlaybackActive }), metricsInterface],\n    primaryServerManager: new PrimaryServerManager({ appModel }),\n    providerManager: new ProviderManager({ appModel }),\n    serverConnectionManager: new DesktopServerConnectionManager({ appModel }),\n    serverConnectionTestManager: new ServerConnectionTestManager({ appModel }),\n    serverManager: new ServerManager({ appModel }),\n    serverUpdateManager: new ServerUpdateManager({ appModel }),\n    sourceManager: new SourceManager({ appModel }),\n  });\n\n  return $.Deferred().resolve().promise();\n}\n","/* eslint-plugin-disable @typescript-eslint */\n\nimport appInitializer from './initializers/appInitializer';\nimport './initializers/configs/desktopPartials';\nimport desktopAdaptersInitializer from './initializers/desktopAdaptersInitializer';\nimport Marionette from './initializers/extensions/MarionetteExtension';\n\nconst app = new Marionette.Application();\n\napp.addInitializer(() => desktopAdaptersInitializer().then(appInitializer));\n\nexport default app;\n","import '@plex/react-chroma-reset/reset.css';\nimport { className as darkThemeClassName } from '@plex/react-chroma-theme-dark';\nimport 'app/js/utils/polyfills';\nimport 'app/main.less';\n\ndocument.body.className = darkThemeClassName;\n","import app from './js/app';\nimport './js/main';\n\napp.start();\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst animations = {\n  // Durations\n  defaultSpeed: '0.2s',\n  slowSpeed: '0.6s',\n  fastSpeed: '0.1s',\n\n  // Easing\n  motionEasing: 'cubic-bezier(0.6, 0.4, 0.2, 1.4)',\n\n  // Components\n  modalSpeed: '0.2s',\n  menuSpeed: '0.15s',\n  tooltipSpeed: '0.15s',\n};\n\nexport default animations;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst primaryColor = '#cc7b19';\nconst selectedColor = '#e5a00d';\nconst blackDarkTranslucent = 'rgba(0, 0, 0, 0.15)';\nconst blackDarkerTranslucent = 'rgba(0, 0, 0, 0.3)';\n\nconst colors = {\n  // Core palette\n  defaultColor: '#fff',\n  quietColor: '#a8a8a8',\n  inverseColor: '#222',\n  primaryColor: primaryColor,\n  primaryAlternateColor: '#e5a00d',\n  selectedColor: selectedColor,\n  successColor: '#6b5',\n  dangerColor: '#f53',\n  warningColor: '#f0ad4e',\n  focusColor: '#88AAFF',\n\n  // App Shell\n  appBackgroundColor: '#444f56',\n\n  // Backgrounds\n  darkOpaqueBackgroundColor: '#1f2326',\n  blackDarkTranslucentBackgroundColor: blackDarkTranslucent,\n  blackDarkerTranslucentBackgroundColor: blackDarkerTranslucent,\n  lightTranslucentBackgroundColor: 'rgba(255, 255, 255, 0.15)',\n\n  // Badge\n  badgeBackgroundColor: blackDarkTranslucent,\n  defaultBadgeColor: 'rgba(255, 255, 255, 0.7)',\n\n  // Links\n  defaultLinkColor: 'rgba(255, 255, 255, 0.7)',\n  defaultLinkHoverColor: '#fff',\n  defaultLinkDisabledLinkColor: 'rgba(255, 255, 255, 0.3)',\n  selectedLinkColor: selectedColor,\n  selectedLinkHoverColor: 'lighten(' + selectedColor + ', 0.2)',\n\n  // Buttons\n  defaultBackgroundColor: 'rgba(255, 255, 255, 0.25)',\n  defaultHoverBackgroundColor: 'rgba(255, 255, 255, 0.3)',\n  defaultActiveBackgroundColor: 'rgba(255, 255, 255, 0.2)',\n  defaultDisabledBackgroundColor: 'rgba(255, 255, 255, 0.15)',\n  primaryButtonColor: '#1f2326',\n  primaryBackgroundColor: '#e5a00d',\n  primaryHoverBackgroundColor: 'lighten(#e5a00d, 0.2)',\n  primaryActiveBackgroundColor: 'darken(#e5a00d, 0.2)',\n  primaryDisabledColor: 'rgba(0, 0, 0, 0.4)',\n  primaryDisabledBackgroundColor: 'darken(#e5a00d, 0.5)',\n  quietBackgroundColor: 'rgba(255, 255, 255, 0.08)',\n  quietHoverBackgroundColor: 'rgba(255, 255, 255, 0.1)',\n  quietActiveBackgroundColor: 'rgba(255, 255, 255, 0.06)',\n  successBackgroundColor: '#3d7832',\n  successHoverBackgroundColor: 'lighten(#3d7832, 0.1)',\n  successActiveBackgroundColor: 'darken(#3d7832, 0.1)',\n  successDisabledBackgroundColor: 'darken(#3d7832, 0.3)',\n  dangerBackgroundColor: '#b32',\n  dangerHoverBackgroundColor: 'lighten(#b32, 0.1)',\n  dangerActiveBackgroundColor: 'darken(#b32, 0.1)',\n  dangerDisabledBackgroundColor: 'darken(#b32, 0.3)',\n  darkBackgroundColor: blackDarkerTranslucent,\n  darkHoverBackgroundColor: 'rgba(255, 255, 255, 0.3)',\n  darkActiveBackgroundColor: 'rgba(255, 255, 255, 0.2)',\n  darkDisabledBackgroundColor: 'rgba(255, 255, 255, 0.15)',\n\n  headerColor: 'rgba(255, 255, 255, 0.3)',\n  dimColor: 'rgba(255, 255, 255, 0.45)',\n  secondaryContentColor: 'rgba(255, 255, 255, 0.75)',\n\n  shadowColor: 'rgba(0, 0, 0, 0.35)',\n  dividerColor: blackDarkerTranslucent,\n\n  // Scrollbar\n  scrollbarBackgroundColor: 'rgba(255, 255, 255, 0.2)',\n  scrollbarHoverBackgroundColor: 'rgba(255, 255, 255, 0.3)',\n  scrollbarInactiveBackgroundColor: 'rgba(255, 255, 255, 0.05)',\n\n  // Form\n  errorBackgroundColor: 'rgba(255, 85, 51, 0.3)',\n  inputBackgroundColor: 'rgba(255, 255, 255, 0.25)',\n  inputFocusBackgroundColor: '#eee',\n  inputColor: '#eee',\n  inputFocusColor: '#555',\n  inputPlaceholderColor: '#afb0b1',\n  inputDisabledOpacity: '0.5',\n  formSectionBackgroundColor: blackDarkerTranslucent,\n  formSectionHoverBackgroundColor: blackDarkTranslucent,\n\n  // Modal\n  modalBackdropBackgroundColor: 'rgba(102, 102, 102, 0.6)',\n  modalBackgroundColor: '#2d2d2d',\n  modalBodyBackgroundColor: blackDarkTranslucent,\n\n  // Menu\n  menuBackgroundColor: '#191a1c',\n  menuDisabledBackgroundColor: '#2d2d2d',\n  menuItemHoverBackgroundColor: 'rgba(255, 255, 255, 0.08)',\n  menuItemActiveBackgroundColor: 'rgba(255, 255, 255, 0.15)',\n  menuSeparatorBackgroundColor: 'rgba(200, 200, 200, 0.15)',\n\n  // Tooltip\n  tooltipBackgroundColor: '#191a1c',\n\n  // Header\n  pageHeaderBackgroundColor: 'rgba(0, 0, 0, 0.7)',\n  pageHeaderLinkColor: '#999',\n  pageHeaderLinkHoverColor: '#eee',\n  pageHeaderColor: 'rgba(255, 255, 255, 0.75)',\n\n  // Search\n  searchInputBackgroundColor: 'rgba(255, 255, 255, 0.25)',\n  searchFocusBackgroundColor: '#eee',\n  searchInputColor: '#eee',\n  searchInputFocusColor: '#555',\n  searchImagePlaceholderBackgroundColor: 'rgba(255, 255, 255, 0.1)',\n  searchHoverResultBackgroundColor: 'rgba(255, 255, 255, 0.05)',\n  searchSelectedResultBackgroundColor: 'rgba(255, 255, 255, 0.08)',\n  searchResultTitleColor: 'rgba(255, 255, 255, 0.75)',\n  searchResultTitleSelectedColor: 'rgba(255, 255, 255, 1)',\n  searchResultSecondaryTitleColor: 'rgba(255, 255, 255, 0.3)',\n\n  // Sidebar\n  sidebarBackgroundColor: blackDarkTranslucent,\n  sidebarMenuButtonBackgroundColor: blackDarkerTranslucent,\n  sidebarMenuButtonHoverBackgroundColor: 'rgba(0, 0, 0, 0.45)',\n  sidebarMenuButtonActiveBackgroundColor: 'rgba(0, 0, 0, 0.75)',\n\n  // Lists\n  stripeListAlternateBackgroundColor: 'rgba(255, 255, 255, 0.02)',\n  stripeListHoverBackgroundColor: 'rgba(255, 255, 255, 0.06)',\n  stripeListSelectedBackgroundColor: blackDarkTranslucent,\n\n  // Live TV Settings\n  liveTVSettingsAddDeviceButtonBackground: 'rgba(0, 0, 0, 0.2)',\n  liveTVSettingsBackground: 'rgba(0, 0, 0, 0.3)',\n};\n\nexport default colors;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst dimensions = {\n  // Input and Button Sizes\n  smallSize: '26px',\n  mediumSize: '30px',\n  largeSize: '36px',\n\n  // Gaps\n  gapSmall: '15px',\n  gapMedium: '30px',\n  gapLarge: '60px',\n\n  // Navigation Header\n  navigationHeaderHeight: '60px',\n  navigationUserMenuImageSize: '34px',\n\n  // Page\n  pageHeaderHeight: '60px',\n  breadcrumbMargin: '25px',\n\n  // Menu\n  menuSmallWidth: '120px',\n  menuMediumWidth: '180px',\n  menuLargeWidth: '220px',\n  menuPadding: '8px',\n  menuItemTopPadding: '4px',\n  menuItemSidePadding: '20px',\n\n  // Toolbar\n  toolbarButtonWidth: '50px',\n\n  // Poster\n  posterTitlePadding: '10px',\n  posterTitleHeight: '20px',\n\n  // Search\n  searchHubTitleHeight: '18px',\n  searchResultWidth: '346px',\n  searchResultHeight: '50px',\n  searchResultActionsButtonWidth: '40px',\n  universalSearchResultHeight: '68px',\n\n  // Sidebar\n  sidebarWidth: '240px',\n  sidebarRightGutterWidth: '15px',\n  sidebarLeftGutterWidth: '25px',\n\n  // Metadata Table\n  tableCellPadding: '20px',\n  tableHeaderHeight: '40px',\n  tableRowHeight: '40px',\n  tableTitleHeight: '60px',\n\n  // Input\n  inputMaxWidth: '360px',\n  inputBorderRadius: '4px',\n\n  // Autosuggest\n  autosuggestSuggestionRadius: '4px',\n\n  // Disclosure Arrow\n  smallArrowWidth: '6px',\n  mediumArrowWidth: '8px',\n  largeArrowWidth: '10px',\n\n  // Tooltip\n  tooltipArrowSize: '6px',\n  tooltipMarginTop: '-6px',\n\n  // Break Points\n  breakpointMobileNarrow: '320px',\n  breakpointExtraSmall: '480px',\n  breakpointSmall: '768px',\n  breakpointMedium: '992px',\n  breakpointLarge: '1200px',\n\n  // Modal\n  modalBodyPadding: '30px',\n\n  // Avatars\n  avatarFormEditSize: 180,\n  avatarFormSectionSize: 80,\n};\n\nexport default dimensions;\n","/* eslint-plugin-disable @typescript-eslint */\n\nconst easings = {\n  motionEasing: [0.6, 0.4, 0.2, 1.4],\n};\n\nexport default easings;\n","/*\n *  jssha256 version 0.1  -  Copyright 2006 B. Poettering\n *\n *  This program is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU General Public License as\n *  published by the Free Software Foundation; either version 2 of the\n *  License, or (at your option) any later version.\n *\n *  This program is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  General Public License for more details.\n *\n *  You should have received a copy of the GNU General Public License\n *  along with this program; if not, write to the Free Software\n *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA\n *  02111-1307 USA\n */\n\n/*\n * http://point-at-infinity.org/jssha256/\n *\n * This is a JavaScript implementation of the SHA256 secure hash function\n * and the HMAC-SHA256 message authentication code (MAC).\n *\n * The routines' well-functioning has been verified with the test vectors\n * given in FIPS-180-2, Appendix B and IETF RFC 4231. The HMAC algorithm\n * conforms to IETF RFC 2104.\n *\n * The following code example computes the hash value of the string \"abc\".\n *\n *    SHA256_init();\n *    SHA256_write(\"abc\");\n *    digest = SHA256_finalize();\n *    digest_hex = array_to_hex_string(digest);\n *\n * Get the same result by calling the shortcut function SHA256_hash:\n *\n *    digest_hex = SHA256_hash(\"abc\");\n *\n * In the following example the calculation of the HMAC of the string \"abc\"\n * using the key \"secret key\" is shown:\n *\n *    HMAC_SHA256_init(\"secret key\");\n *    HMAC_SHA256_write(\"abc\");\n *    mac = HMAC_SHA256_finalize();\n *    mac_hex = array_to_hex_string(mac);\n *\n * Again, the same can be done more conveniently:\n *\n *    mac_hex = HMAC_SHA256_MAC(\"secret key\", \"abc\");\n *\n * Note that the internal state of the hash function is held in global\n * variables. Therefore one hash value calculation has to be completed\n * before the next is begun. The same applies the the HMAC routines.\n *\n * Report bugs to: jssha256 AT point-at-infinity.org\n *\n */\n\n/******************************************************************************/\n\n/* Two all purpose helper functions follow */\n\n/* string_to_array: convert a string to a character (byte) array */\n\nfunction string_to_array(str) {\n  var len = str.length;\n  var res = new Array(len);\n  for(var i = 0; i < len; i++){\n    res[i] = str.charCodeAt(i);\n  }\n  return res;\n}\n\n/* array_to_hex_string: convert a byte array to a hexadecimal string */\nfunction array_to_hex_string(ary) {\n  var res = \"\";\n  for(var i = 0; i < ary.length; i++)\n    res += SHA256_hexchars[ary[i] >> 4] + SHA256_hexchars[ary[i] & 0x0f];\n  return res;\n}\nfunction array_to_string(ary) {\n  var res = \"\";\n  for(var i = 0; i < ary.length; i++)\n    res += String.fromCharCode(ary[i]);\n  return res;\n}\n\n/******************************************************************************/\n\n/* The following are the SHA256 routines */\n\n/*\n   SHA256_init: initialize the internal state of the hash function. Call this\n   function before calling the SHA256_write function.\n*/\n\nfunction SHA256_init() {\n  SHA256_H = new Array(0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a,\n    0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19);\n  SHA256_buf = new Array();\n  SHA256_len = 0;\n}\n\n/*\n   SHA256_write: add a message fragment to the hash function's internal state.\n   'msg' may be given as string or as byte array and may have arbitrary length.\n\n*/\n\nfunction SHA256_write(msg) {\n  if (typeof(msg) == \"string\")\n    SHA256_buf = SHA256_buf.concat(string_to_array(msg));\n  else\n    SHA256_buf = SHA256_buf.concat(msg);\n  for(var i = 0; i + 64 <= SHA256_buf.length; i += 64)\n    SHA256_Hash_Byte_Block(SHA256_H, SHA256_buf.slice(i, i + 64));\n  SHA256_buf = SHA256_buf.slice(i);\n  SHA256_len += msg.length;\n}\n\n/*\n   SHA256_finalize: finalize the hash value calculation. Call this function\n   after the last call to SHA256_write. An array of 32 bytes (= 256 bits)\n   is returned.\n*/\n\nfunction SHA256_finalize() {\n  SHA256_buf[SHA256_buf.length] = 0x80;\n\n  if (SHA256_buf.length > 64 - 8) {\n    for(var i = SHA256_buf.length; i < 64; i++)\n      SHA256_buf[i] = 0;\n    SHA256_Hash_Byte_Block(SHA256_H, SHA256_buf);\n    SHA256_buf.length = 0;\n  }\n\n  for(var i = SHA256_buf.length; i < 64 - 5; i++)\n    SHA256_buf[i] = 0;\n  SHA256_buf[59] = (SHA256_len >>> 29) & 0xff;\n  SHA256_buf[60] = (SHA256_len >>> 21) & 0xff;\n  SHA256_buf[61] = (SHA256_len >>> 13) & 0xff;\n  SHA256_buf[62] = (SHA256_len >>> 5) & 0xff;\n  SHA256_buf[63] = (SHA256_len << 3) & 0xff;\n  SHA256_Hash_Byte_Block(SHA256_H, SHA256_buf);\n\n  var res = new Array(32);\n  for(var i = 0; i < 8; i++) {\n    res[4 * i + 0] = SHA256_H[i] >>> 24;\n    res[4 * i + 1] = (SHA256_H[i] >> 16) & 0xff;\n    res[4 * i + 2] = (SHA256_H[i] >> 8) & 0xff;\n    res[4 * i + 3] = SHA256_H[i] & 0xff;\n  }\n\n  SHA256_H = null;\n  SHA256_buf = null;\n  SHA256_len = null;\n  return res;\n}\n\n/*\n   SHA256_hash: calculate the hash value of the string or byte array 'msg'\n   and return it as hexadecimal string. This shortcut function may be more\n   convenient than calling SHA256_init, SHA256_write, SHA256_finalize\n   and array_to_hex_string explicitly.\n*/\n\nfunction SHA256_hash(msg) {\n  var res;\n  SHA256_init();\n  SHA256_write(msg);\n  res = SHA256_finalize();\n  return array_to_hex_string(res);\n}\n\n/******************************************************************************/\n\n/* The following are the HMAC-SHA256 routines */\n\n/*\n   HMAC_SHA256_init: initialize the MAC's internal state. The MAC key 'key'\n   may be given as string or as byte array and may have arbitrary length.\n*/\n\nfunction HMAC_SHA256_init(key) {\n  if (typeof(key) == \"string\")\n    HMAC_SHA256_key = string_to_array(key);\n  else\n    HMAC_SHA256_key = new Array().concat(key);\n\n  if (HMAC_SHA256_key.length > 64) {\n    SHA256_init();\n    SHA256_write(HMAC_SHA256_key);\n    HMAC_SHA256_key = SHA256_finalize();\n  }\n\n  for(var i = HMAC_SHA256_key.length; i < 64; i++)\n    HMAC_SHA256_key[i] = 0;\n  for(var i = 0; i < 64; i++)\n    HMAC_SHA256_key[i] ^=  0x36;\n  SHA256_init();\n  SHA256_write(HMAC_SHA256_key);\n}\n\n/*\n   HMAC_SHA256_write: process a message fragment. 'msg' may be given as\n   string or as byte array and may have arbitrary length.\n*/\n\nfunction HMAC_SHA256_write(msg) {\n  SHA256_write(msg);\n}\n\n/*\n   HMAC_SHA256_finalize: finalize the HMAC calculation. An array of 32 bytes\n   (= 256 bits) is returned.\n*/\n\nfunction HMAC_SHA256_finalize() {\n  var md = SHA256_finalize();\n  for(var i = 0; i < 64; i++)\n    HMAC_SHA256_key[i] ^= 0x36 ^ 0x5c;\n  SHA256_init();\n  SHA256_write(HMAC_SHA256_key);\n  SHA256_write(md);\n  for(var i = 0; i < 64; i++)\n    HMAC_SHA256_key[i] = 0;\n  HMAC_SHA256_key = null;\n  return SHA256_finalize();\n}\n\n/*\n   HMAC_SHA256_MAC: calculate the HMAC value of message 'msg' under key 'key'\n   (both may be of type string or byte array); return the MAC as hexadecimal\n   string. This shortcut function may be more convenient than calling\n   HMAC_SHA256_init, HMAC_SHA256_write, HMAC_SHA256_finalize and\n   array_to_hex_string explicitly.\n*/\n\nfunction HMAC_SHA256_MAC(key, msg) {\n  var res;\n  HMAC_SHA256_init(key);\n  HMAC_SHA256_write(msg);\n  res = HMAC_SHA256_finalize()\n  return array_to_hex_string(res);\n}\n\n/******************************************************************************/\n\n/* The following lookup tables and functions are for internal use only! */\n\nvar SHA256_hexchars = new Array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9',\n  'a', 'b', 'c', 'd', 'e', 'f');\n\nvar SHA256_K = new Array(\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1,\n  0x923f82a4, 0xab1c5ed5, 0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n  0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174, 0xe49b69c1, 0xefbe4786,\n  0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147,\n  0x06ca6351, 0x14292967, 0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n  0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85, 0xa2bfe8a1, 0xa81a664b,\n  0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a,\n  0x5b9cca4f, 0x682e6ff3, 0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n  0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n);\n\nfunction SHA256_sigma0(x) {\n  return ((x >>> 7) | (x << 25)) ^ ((x >>> 18) | (x << 14)) ^ (x >>> 3);\n}\n\nfunction SHA256_sigma1(x) {\n  return ((x >>> 17) | (x << 15)) ^ ((x >>> 19) | (x << 13)) ^ (x >>> 10);\n}\n\nfunction SHA256_Sigma0(x) {\n  return ((x >>> 2) | (x << 30)) ^ ((x >>> 13) | (x << 19)) ^\n    ((x >>> 22) | (x << 10));\n}\n\nfunction SHA256_Sigma1(x) {\n  return ((x >>> 6) | (x << 26)) ^ ((x >>> 11) | (x << 21)) ^\n    ((x >>> 25) | (x << 7));\n}\n\nfunction SHA256_Ch(x, y, z) {\n  return z ^ (x & (y ^ z));\n}\n\nfunction SHA256_Maj(x, y, z) {\n  return (x & y) ^ (z & (x ^ y));\n}\n\nfunction SHA256_Hash_Word_Block(H, W) {\n  for(var i = 16; i < 64; i++)\n    W[i] = (SHA256_sigma1(W[i - 2]) +  W[i - 7] +\n      SHA256_sigma0(W[i - 15]) + W[i - 16]) & 0xffffffff;\n  var state = new Array().concat(H);\n  for(var i = 0; i < 64; i++) {\n    var T1 = state[7] + SHA256_Sigma1(state[4]) +\n      SHA256_Ch(state[4], state[5], state[6]) + SHA256_K[i] + W[i];\n    var T2 = SHA256_Sigma0(state[0]) + SHA256_Maj(state[0], state[1], state[2]);\n    state.pop();\n    state.unshift((T1 + T2) & 0xffffffff);\n    state[4] = (state[4] + T1) & 0xffffffff;\n  }\n  for(var i = 0; i < 8; i++)\n    H[i] = (H[i] + state[i]) & 0xffffffff;\n}\n\nfunction SHA256_Hash_Byte_Block(H, w) {\n  var W = new Array(16);\n  for(var i = 0; i < 16; i++)\n    W[i] = w[4 * i + 0] << 24 | w[4 * i + 1] << 16 |\n      w[4 * i + 2] << 8 | w[4 * i + 3];\n  SHA256_Hash_Word_Block(H, W);\n}\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = {\n  SHA256_hash,\n  HMAC_SHA256_init,\n  HMAC_SHA256_write,\n  HMAC_SHA256_finalize\n};\n","var Handlebars = require(\"../../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<ul class=\\\"js-file-list-items list browse-directory-list\\\"></ul> <div class=\\\"js-file-list-truncated-message css-file-list-truncated-message\\\"></div> \";\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<button type=\\\"button\\\" class=\\\"close-btn btn-link\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <span class=\\\"message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, self=this, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  \n  return \"circle-ok\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"circle-exclamation-mark\";\n  }\n\n  buffer += \"<button class=\\\"close-btn btn-link\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <i class=\\\"alert-icon glyphicon \";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.type), \"success\", {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"></i> <h4>\";\n  stack1 = ((stack1 = (depth0 && depth0.message)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</h4> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<button type=\\\"button\\\" class=\\\"close-btn btn-link\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <span class=\\\"message\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"A new TV tuner ({tunerMake} {tunerModel}) has been found! Plex DVR is the easiest way to record your favorite shows!\", {hash:{\n    'tunerModel': ((depth0 && depth0.model)),\n    'tunerMake': ((depth0 && depth0.make))\n  },data:data}))\n    + \"</span> <a class=\\\"setup-link link\\\" href=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.dvrSettingsRoute)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Learn more\", {hash:{},data:data}))\n    + \"</a> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"setup-agent-section\\\"> <div class=\\\"setup-agent-title\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"{1} Settings\", (depth0 && depth0.escapedAgentName), {hash:{},data:data}))\n    + \"</div> <p class=\\\"setup-agent-disclaimer\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Note: These settings will take effect for all libraries using the {1} agent.\", (depth0 && depth0.escapedAgentName), {hash:{},data:data}))\n    + \"</p> <div class=\\\"setup-agent-settings\\\"> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.settings), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> </div> \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/partial.ts\")).call(depth0, \"setting\", {hash:{\n    'idSuffix': (\"_c\")\n  },data:data}))\n    + \" \";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.settings), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<form class=\\\"edit-section-type-form settings-container\\\"> <p>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"There was an error adding this library.\", {hash:{},data:data}))\n    + \"</p> <p>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Please visit the {1}forums{2} and provide your logs, as described {3}here{4}.\", \"<a href=\\\"https://forums.plex.tv\\\" target=\\\"_blank\\\">\", \"</a>\", \"<a href=\\\"http://support.plex.tv/hc/en-us/articles/200250417-Log-File-Locations/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps\\\" target=\\\"_blank\\\">\", \"</a>\", {hash:{},data:data}))\n    + \"</p> </form> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<a class=\\\"striped-list-item\\\" href=\\\"#\\\" data-key=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.filePath)),stack1 == null || stack1 === false ? stack1 : stack1.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> <i class=\\\"glyphicon file\\\"></i> \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.filePath)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" </a> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, self=this, functionType=\"function\", escapeExpression=this.escapeExpression;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"left-arrow\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1;\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.filePath)),stack1 == null || stack1 === false ? stack1 : stack1.home), {hash:{},inverse:self.program(6, program6, data),fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\nfunction program4(depth0,data) {\n  \n  \n  return \"home\";\n  }\n\nfunction program6(depth0,data) {\n  \n  var stack1;\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.filePath)),stack1 == null || stack1 === false ? stack1 : stack1.network), {hash:{},inverse:self.program(9, program9, data),fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\nfunction program7(depth0,data) {\n  \n  \n  return \"globe\";\n  }\n\nfunction program9(depth0,data) {\n  \n  var stack1;\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isRoot), {hash:{},inverse:self.program(12, program12, data),fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\nfunction program10(depth0,data) {\n  \n  \n  return \"hdd\";\n  }\n\nfunction program12(depth0,data) {\n  \n  \n  return \"folder-open\";\n  }\n\n  buffer += \"<a class=\\\"striped-list-item\\\" href=\\\"#\\\" data-key=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.filePath)),stack1 == null || stack1 === false ? stack1 : stack1.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.filePath)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" aria-label=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.filePath)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> <i class=\\\"folder-icon glyphicon \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.filePath)),stack1 == null || stack1 === false ? stack1 : stack1.isBackShortcut), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"></i>&nbsp;\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.filePath)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" <div class=\\\"loading loading-sm loading-inline hidden\\\"></div> </a> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<span class=\\\"section-path\\\">\"\n    + escapeExpression(((stack1 = (depth0 && depth0.path)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</span>\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \"<span class=\\\"section-count\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"and {count} more\", {hash:{\n    'count': ((depth0 && depth0.more))\n  },data:data}))\n    + \"</span>\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"card card-section\\\"> <div class=\\\"card-actions\\\"> <button class=\\\"edit-section-btn card-action-btn\\\"><i class=\\\"glyphicon pencil\\\"></i></button> <button class=\\\"delete-section-btn card-action-btn btn-danger\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> </div> <i class=\\\"section-icon glyphicon \"\n    + escapeExpression(((stack1 = (depth0 && depth0.icon)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"></i> <span class=\\\"section-title\\\"></span> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.path), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.more), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"modal-dialog\\\"> <div class=\\\"modal-content\\\"> <form name=\\\"add-folder-form\\\"> <div class=\\\"modal-header\\\"> <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <h4 class=\\\"modal-title\\\"><i class=\\\"modal-icon glyphicon folder-plus\\\"></i> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Add Folder\", {hash:{},data:data}))\n    + \"</h4> </div> <div class=\\\"modal-body modal-body-scroll dark-scrollbar\\\"> <div class=\\\"row\\\"> <div class=\\\"col-md-12\\\"> <input type=\\\"text\\\" name=\\\"path\\\" class=\\\"form-control\\\" value=\\\"\\\"> </div> </div> <div class=\\\"row directory-container-row\\\"> <div class=\\\"home-directory-container col-md-5\\\"></div> <div class=\\\"col-md-7\\\"> <div class=\\\"path-container\\\"></div> <div class=\\\"file-container\\\"></div> </div> </div> </div> <div class=\\\"modal-footer\\\"> <button type=\\\"button\\\" class=\\\"cancel-btn btn btn-default\\\" data-dismiss=\\\"modal\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Cancel\", {hash:{},data:data}))\n    + \"</button> <button type=\\\"submit\\\" class=\\\"add-btn btn btn-primary\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Add\", {hash:{},data:data}))\n    + \"</button> </div> </form> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <button type=\\\"button\\\" class=\\\"cancel-btn btn btn-lg btn-default\\\" data-dismiss=\\\"modal\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, (depth0 && depth0.cancelLabel), {hash:{},data:data}))\n    + \"</button> \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"btn-danger\";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"btn-primary\";\n  }\n\n  buffer += \"<div class=\\\"modal-dialog\\\"> <div class=\\\"modal-content\\\"> <div class=\\\"modal-header\\\"> <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <h4 class=\\\"modal-title\\\"><i class=\\\"modal-icon glyphicon circle-exclamation-mark\\\"></i> \"\n    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</h4> </div> <div class=\\\"modal-body\\\"> <p class=\\\"confirm-message\\\">\"\n    + escapeExpression(((stack1 = (depth0 && depth0.message)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</p> <p class=\\\"double-confirm-message text-warning\\\">\"\n    + escapeExpression(((stack1 = (depth0 && depth0.warningMessage)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</p> </div> <div class=\\\"modal-footer\\\"> \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.hideCancel), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <button type=\\\"button\\\" class=\\\"confirm-btn btn btn-lg \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasDanger), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-loading\\\"> <div class=\\\"loading loading-sm\\\"></div> <span class=\\\"btn-label\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, (depth0 && depth0.confirmLabel), {hash:{},data:data}))\n    + \"</span> </button> </div> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <li class=\\\"striped-list-item select-list-item download-list-item\\\"> <a class=\\\"media\\\" data-value=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.index)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" href=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.downloadUrl)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" target=\\\"\"\n    + escapeExpression(((stack1 = (depth1 && depth1.defaultLinkTarget)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_neq.ts\")).call(depth0, (depth1 && depth1.defaultLinkTarget), \"_blank\", {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.title), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.videoResolution), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.bitrate), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </a> </li> \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"download=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.downloadName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" <span class=\\\"title-separator\\\"></span> \";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/metadata/formatResolution.ts\")).call(depth0, (depth0 && depth0.videoResolution), {hash:{},data:data}));\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.bitrate), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  return buffer;\n  }\nfunction program7(depth0,data) {\n  \n  \n  return \",\";\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/metadata/formatVideoBitrate.ts\")).call(depth0, (depth0 && depth0.bitrate), {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"modal-dialog\\\"> <div class=\\\"modal-content\\\"> <div class=\\\"modal-header\\\"> <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <h4 class=\\\"modal-title\\\"><i class=\\\"modal-icon glyphicon download-alt\\\"></i> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Download a Version\", {hash:{},data:data}))\n    + \"</h4> </div> <div class=\\\"modal-body modal-body-scroll dark-scrollbar\\\"> <ul class=\\\"list select-list download-list\\\"> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mediaItems), {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </ul> </div> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <i class=\\\"modal-icon glyphicon plus\\\"></i> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Add {1} Library\", \"<span class=\\\"section-type-title\\\"></span>\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <i class=\\\"modal-icon glyphicon pencil\\\"></i> \"\n    + escapeExpression(((stack1 = (depth0 && depth0.paneTitle)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" \";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \" <div class=\\\"modal-body-pane pane-region dark-scrollbar\\\"> <div class=\\\"loading loading-inline\\\"></div> </div> \";\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"modal-nav-pane dark-scrollbar\\\"> <ul class=\\\"list modal-nav-list\\\"> <li> <a class=\\\"btn-gray change-pane-btn type-btn\";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.selectedPane), \"type\", {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-pane=\\\"type\\\" href=\\\"#\\\"> <i class=\\\"modal-nav-icon glyphicon align-center\\\"></i> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.add), {hash:{},inverse:self.program(12, program12, data),fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </a> </li> <li> <a class=\\\"btn-gray change-pane-btn folders-btn\";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.selectedPane), \"folders\", {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.add), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.showFolders), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-pane=\\\"folders\\\" href=\\\"#\\\"> <i class=\\\"modal-nav-icon glyphicon folder-open\\\"></i> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Add folders\", {hash:{},data:data}))\n    + \" </a> </li> <li> <a class=\\\"btn-gray change-pane-btn options-btn\";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.selectedPane), \"options\", {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.add), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" hidden\\\" data-pane=\\\"options\\\" href=\\\"#\\\"> <i class=\\\"modal-nav-icon glyphicon magic\\\"></i> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Options\", {hash:{},data:data}))\n    + \" </a> </li> <li> <a class=\\\"btn-gray change-pane-btn advanced-btn\";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.selectedPane), \"advanced\", {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.add), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-pane=\\\"advanced\\\" href=\\\"#\\\"> <i class=\\\"modal-nav-icon glyphicon cogwheel\\\"></i> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Advanced\", {hash:{},data:data}))\n    + \" </a> </li> </ul> </div> <div class=\\\"modal-body-pane pane-region dark-scrollbar\\\"> </div> \";\n  return buffer;\n  }\nfunction program8(depth0,data) {\n  \n  \n  return \" selected\";\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Select type\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program12(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"General\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  \n  return \"disabled\";\n  }\n\nfunction program16(depth0,data) {\n  \n  \n  return \"hidden\";\n  }\n\nfunction program18(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Add Library\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program20(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Save Changes\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"modal-dialog\\\"> <div class=\\\"modal-content\\\"> <div class=\\\"modal-header\\\"> <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <h4 class=\\\"modal-title\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.add), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </h4> </div> <div class=\\\"modal-body modal-body-scroll modal-body-with-panes\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isLoading), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> <div class=\\\"modal-footer\\\"> <span class=\\\"form-message\\\"></span> <button type=\\\"button\\\" class=\\\"cancel-btn btn btn-default\\\" data-dismiss=\\\"modal\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Cancel\", {hash:{},data:data}))\n    + \"</button> <button type=\\\"button\\\" class=\\\"save-btn btn btn-primary btn-loading \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.add), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"> <div class=\\\"loading loading-sm\\\"></div> <span class=\\\"btn-label\\\"> <span class=\\\"save-btn-label-next\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Next\", {hash:{},data:data}))\n    + \"</span> <span class=\\\"save-btn-label-save\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.add), {hash:{},inverse:self.program(20, program20, data),fn:self.program(18, program18, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </span> </span> </button> </div> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Internet Required\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Plex Pass Required\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"This server cannot reach the Internet. Please verify connectivity and try again.\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"This library requires your server be signed in to a Plex Pass account.\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <button type=\\\"button\\\" class=\\\"confirm-btn btn btn-lg btn-primary\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"OK\", {hash:{},data:data}))\n    + \"</button> \";\n  return buffer;\n  }\n\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <a class=\\\"confirm-btn btn btn-lg btn-primary\\\" href=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.serverSettingsRoute)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isSignedIn), {hash:{},inverse:self.program(14, program14, data),fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </a> \";\n  return buffer;\n  }\nfunction program12(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Settings\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Sign In\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"modal-dialog\\\"> <div class=\\\"modal-content\\\"> <div class=\\\"modal-header\\\"> <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <h4 class=\\\"modal-title\\\"> <i class=\\\"modal-icon glyphicon circle-exclamation-mark\\\"></i> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasPlexSubscription), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </h4> </div> <div class=\\\"modal-body\\\"> <p class=\\\"confirm-message\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasPlexSubscription), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </p> </div> <div class=\\\"modal-footer\\\"> <button type=\\\"button\\\" class=\\\"cancel-btn btn btn-lg btn-default\\\" data-dismiss=\\\"modal\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Ignore\", {hash:{},data:data}))\n    + \"</button> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasPlexSubscription), {hash:{},inverse:self.program(11, program11, data),fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"hide-streams-column\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"files\\\"> <h4>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Files\", {hash:{},data:data}))\n    + \"</h4> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.media), {hash:{},inverse:self.noop,fn:self.programWithDepth(4, program4, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> \";\n  return buffer;\n  }\nfunction program4(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <ul class=\\\"media-info-file-list well\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth1 && depth1.showDeleteFile), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.Part), {hash:{},inverse:self.noop,fn:self.programWithDepth(10, program10, data, depth1),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </ul> \";\n  return buffer;\n  }\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <a href=\\\"#\\\" data-media-item=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.index)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"delete-btn text-danger pull-right\\\"> <i class=\\\"glyphicon bin\\\"></i> \";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, ((stack1 = (depth0 && depth0.Part)),stack1 == null || stack1 === false ? stack1 : stack1.length), \"1\", {hash:{},inverse:self.program(8, program8, data),fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </a> \";\n  return buffer;\n  }\nfunction program6(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Delete File\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Delete Files\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program10(depth0,data,depth2) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <li> \";\n  stack1 = helpers['if'].call(depth0, (depth2 && depth2.showFilepath), {hash:{},inverse:self.program(13, program13, data),fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.accessible), {hash:{},inverse:self.noop,fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </li> \";\n  return buffer;\n  }\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(((stack1 = (depth0 && depth0.file)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" \";\n  return buffer;\n  }\n\nfunction program13(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/url/getLastSegment.ts\")).call(depth0, (depth0 && depth0.file), {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program15(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.exists), {hash:{},inverse:self.program(18, program18, data),fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  return buffer;\n  }\nfunction program16(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <span class=\\\"label label-danger\\\" data-toggle=\\\"tooltip\\\" title=\\\"\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Please check the permissions for this file.\", {hash:{},data:data}))\n    + \"\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Inaccessible\", {hash:{},data:data}))\n    + \"</span> \";\n  return buffer;\n  }\n\nfunction program18(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <span class=\\\"label label-danger\\\" data-toggle=\\\"tooltip\\\" title=\\\"\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Please check that this file exists and the necessary drive is mounted.\", {hash:{},data:data}))\n    + \"\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Unavailable\", {hash:{},data:data}))\n    + \"</span> \";\n  return buffer;\n  }\n\nfunction program20(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"media\\\"> <div class=\\\"props\\\"> <h4>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Media\", {hash:{},data:data}))\n    + \"</h4> <ul> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.properties), {hash:{},inverse:self.noop,fn:self.program(21, program21, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </ul> </div> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.Part), {hash:{},inverse:self.noop,fn:self.programWithDepth(23, program23, data, depth1),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> \";\n  return buffer;\n  }\nfunction program21(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <li> <span class=\\\"detail-label\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, (depth0 && depth0.name), {hash:{},data:data}))\n    + \"</span> <span class=\\\"detail\\\">\"\n    + escapeExpression(((stack1 = (depth0 && depth0.value)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</span> </li> \";\n  return buffer;\n  }\n\nfunction program23(depth0,data,depth2) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"part\\\"> <div class=\\\"props\\\"> <h4>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Part\", {hash:{},data:data}))\n    + \"</h4> <ul> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.properties), {hash:{},inverse:self.noop,fn:self.program(21, program21, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </ul> </div> <div class=\\\"streams\\\"> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.Stream), {hash:{},inverse:self.noop,fn:self.program(24, program24, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth2 && depth2.loading), {hash:{},inverse:self.noop,fn:self.program(33, program33, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> </div> \";\n  return buffer;\n  }\nfunction program24(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"props\\\"> \";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.streamType), \"1\", {hash:{},inverse:self.program(27, program27, data),fn:self.program(25, program25, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <ul> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.properties), {hash:{},inverse:self.noop,fn:self.program(21, program21, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </ul> </div> \";\n  return buffer;\n  }\nfunction program25(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <h4>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Video\", {hash:{},data:data}))\n    + \"</h4> \";\n  return buffer;\n  }\n\nfunction program27(depth0,data) {\n  \n  var stack1;\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.streamType), \"2\", {hash:{},inverse:self.program(30, program30, data),fn:self.program(28, program28, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\nfunction program28(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <h4>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Audio\", {hash:{},data:data}))\n    + \"</h4> \";\n  return buffer;\n  }\n\nfunction program30(depth0,data) {\n  \n  var stack1;\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.streamType), \"3\", {hash:{},inverse:self.noop,fn:self.program(31, program31, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\nfunction program31(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <h4>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Subtitles\", {hash:{},data:data}))\n    + \"</h4> \";\n  return buffer;\n  }\n\nfunction program33(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <div class=\\\"props\\\"> <h4>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Loading\", {hash:{},data:data}))\n    + \"...</h4> </div> \";\n  return buffer;\n  }\n\nfunction program35(depth0,data,depth1) {\n  \n  var stack1;\n  stack1 = helpers['if'].call(depth0, (depth1 && depth1.showFilepath), {hash:{},inverse:self.noop,fn:self.program(36, program36, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\nfunction program36(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"modal-footer\\\"> <div class=\\\"pull-left\\\"> <a href=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.url)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" target=\\\"_blank\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"View XML\", {hash:{},data:data}))\n    + \"</a> </div> </div> \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"modal-dialog\\\"> <div class=\\\"modal-content\\\"> <div class=\\\"modal-header\\\"> <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <h4 class=\\\"modal-title\\\"><i class=\\\"modal-icon glyphicon circle-info\\\"></i> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Media Info\", {hash:{},data:data}))\n    + \"</h4> </div> <div class=\\\"modal-body modal-body-scroll dark-scrollbar\\\"> <div class=\\\"position-ref \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.hasStreams), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasFiles), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.media), {hash:{},inverse:self.noop,fn:self.programWithDepth(20, program20, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> </div> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.key), {hash:{},inverse:self.noop,fn:self.programWithDepth(35, program35, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, self=this, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <p class=\\\"text-muted\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Everything you need to experience the best of Plex. Your subscription gives you premium features and exclusive access to new ones.\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <p class=\\\"text-muted\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"The server \\\"{1}\\\" has not been claimed. This server must be claimed by an account with a Plex Pass subscription.\", (depth0 && depth0.escapedFriendlyName), {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"modal-dialog\\\"> <div class=\\\"modal-content\\\"> <div class=\\\"modal-header\\\"> <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <h4 class=\\\"modal-title\\\"> <i class=\\\"modal-icon glyphicon circle-arrow-right\\\"></i> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Go Premium\", {hash:{},data:data}))\n    + \" </h4> </div> <div class=\\\"modal-body\\\"> <p class=\\\"text-center\\\"><i class=\\\"plex-image plex-pass\\\"></i></p> <h4 class=\\\"text-center\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"This feature requires a Plex Pass subscription.\", {hash:{},data:data}))\n    + \"</h4> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isClaimed), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <p class=\\\"text-center\\\"> <a class=\\\"btn btn-sm btn-primary\\\" href=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.plexPassUrl)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" target=\\\"_blank\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Learn More\", {hash:{},data:data}))\n    + \"</a> </p> </div> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"modal-dialog\\\"> <div class=\\\"modal-content\\\"> <div class=\\\"modal-header\\\"> <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <h4 class=\\\"modal-title\\\"> <i class=\\\"modal-icon glyphicon circle-exclamation-mark\\\"></i> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Limited Connection\", {hash:{},data:data}))\n    + \" - \"\n    + escapeExpression(((stack1 = (depth0 && depth0.serverName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" </h4> </div> <div class=\\\"modal-body\\\"> <p> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"You are not connected directly to {1} so streaming quality may be limited. You may be able to connect directly to this server by changing your home network settings. {2}Learn more{3}\", (depth0 && depth0.escapedServerName), \"<a href=\\\"https://help.plex.tv/relay\\\" target=\\\"_blank\\\" class=\\\"learn-more\\\">\", \"</a>\", {hash:{},data:data}))\n    + \" </p> </div> <div class=\\\"modal-footer\\\"> <button type=\\\"button\\\" class=\\\"confirm-btn btn btn-lg btn-primary\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"OK\", {hash:{},data:data}))\n    + \"</button> </div> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <li class=\\\"striped-list-item select-list-item\\\"> <a class=\\\"media\\\" data-value=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.index)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" href=\\\"#\\\"> \";\n  stack1 = __default(require(\"../../js/utils/handlebars/string/truncateFilename.ts\")).call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.Part)),stack1 == null || stack1 === false ? stack1 : stack1[0])),stack1 == null || stack1 === false ? stack1 : stack1.file), 35, {hash:{},data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </a> </li> \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"modal-dialog\\\"> <div class=\\\"modal-content\\\"> <div class=\\\"modal-header\\\"> <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <h4 class=\\\"modal-title\\\"><i class=\\\"modal-icon glyphicon file\\\"></i> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Select a File\", {hash:{},data:data}))\n    + \"</h4> </div> <div class=\\\"modal-body modal-body-scroll dark-scrollbar\\\"> <ul class=\\\"list select-list\\\"> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.medias), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </ul> </div> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(((stack1 = (depth0 && depth0.status)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"There was a problem preparing for optimization.\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"convert-message-container row\\\"> <div class=\\\"col-sm-3 text-center\\\"> <p class=\\\"convert-error-icon\\\"><i class=\\\"glyphicon circle-exclamation-mark\\\"></i></p> </div> <div class=\\\"col-sm-8\\\"> <h4> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.status), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </h4> <h4><a class=\\\"try-again-link\\\" href=\\\"#\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Try again\", {hash:{},data:data}))\n    + \"</a></h4> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"disabled\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"selected\";\n  }\n\nfunction program5(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <option value=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = __default(require(\"../../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth1 && depth1.selectedLocationID), (depth0 && depth0.id), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/string/truncateMiddle.ts\")).call(depth0, (depth0 && depth0.path), 50, 20, {hash:{},data:data}))\n    + \"</option> \";\n  return buffer;\n  }\n\n  buffer += \"<label class=\\\"control-label\\\" for=\\\"convert-storage-location\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Version storage location\", {hash:{},data:data}))\n    + \"</label> <select id=\\\"convert-storage-location\\\" class=\\\"storage-location-select\\\" name=\\\"storageLocation\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.disableLocation), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> <option value=\\\"-1\\\" \";\n  stack1 = __default(require(\"../../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.selectedLocationID), -1, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"In folders with original items\", {hash:{},data:data}))\n    + \"</option> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.locations), {hash:{},inverse:self.noop,fn:self.programWithDepth(5, program5, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </select> <p class=\\\"help-block\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"A \\\"Plex Versions\\\" folder will be created in your chosen location.\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"hidden\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"checked\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.policy)),stack1 == null || stack1 === false ? stack1 : stack1.value)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"A large number of sync items may be time-consuming to convert and transfer to your device. If you have trouble, try reducing the number of items.\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"A large number of items may be time-consuming to convert. If you have trouble, try reducing the number of items.\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"form-group \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.showUnwatched), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"> <label class=\\\"control-label\\\"> <input type=\\\"checkbox\\\" id=\\\"convert-policy-unwatched\\\" name=\\\"policyUnwatched\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.policy)),stack1 == null || stack1 === false ? stack1 : stack1.unwatched), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Unwatched only\", {hash:{},data:data}))\n    + \" </label> </div> <div class=\\\"form-group \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.isDirectory), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"> <label class=\\\"control-label\\\"> <input type=\\\"checkbox\\\" id=\\\"convert-policy-scope\\\" name=\\\"policyScope\\\" value=\\\"count\\\" \";\n  stack1 = __default(require(\"../../../js/utils/handlebars/if_eq.ts\")).call(depth0, ((stack1 = (depth0 && depth0.policy)),stack1 == null || stack1 === false ? stack1 : stack1.scope), \"count\", {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Limit to\", {hash:{},data:data}))\n    + \" <input type=\\\"number\\\" id=\\\"convert-policy-value\\\" name=\\\"policyValue\\\" class=\\\"policy-value-control form-control\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.policy)),stack1 == null || stack1 === false ? stack1 : stack1.value), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"items\", {hash:{},data:data}))\n    + \" </label> <p class=\\\"convert-warning help-block \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.showLimitWarning), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"> <i class=\\\"convert-warning-icon glyphicon circle-exclamation-mark\\\"></i> <span class=\\\"convert-warning-text\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isSync), {hash:{},inverse:self.program(9, program9, data),fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </span> </p> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"disabled\";\n  }\n\nfunction program3(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <option value=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = __default(require(\"../../../js/utils/handlebars/if_eq.ts\")).call(depth0, ((stack1 = (depth1 && depth1.item)),stack1 == null || stack1 === false ? stack1 : stack1.targetTagID), (depth0 && depth0.id), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \"\n    + escapeExpression(((stack1 = (depth0 && depth0.tag)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.mediaSettings)),stack1 == null || stack1 === false ? stack1 : stack1.videoResolution), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </option> \";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  \n  return \"selected\";\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" - \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/metadata/formatVideoQuality.ts\")).call(depth0, (depth0 && depth0.mediaSettings), {hash:{},data:data}));\n  return buffer;\n  }\n\nfunction program8(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <option value=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = __default(require(\"../../../js/utils/handlebars/if_eq.ts\")).call(depth0, ((stack1 = (depth1 && depth1.selectedProfile)),stack1 == null || stack1 === false ? stack1 : stack1.title), (depth0 && depth0.title), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \"\n    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" </option> \";\n  return buffer;\n  }\n\nfunction program10(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <option value=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.index)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = __default(require(\"../../../js/utils/handlebars/if_eq.ts\")).call(depth0, ((stack1 = (depth1 && depth1.selectedCustomQuality)),stack1 == null || stack1 === false ? stack1 : stack1.index), (depth0 && depth0.index), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/metadata/formatVideoQuality.ts\")).call(depth0, depth0, {hash:{},data:data}))\n    + \" </option> \";\n  return buffer;\n  }\n\n  buffer += \"<select class=\\\"convert-target-select\\\" name=\\\"target\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.disableTarget), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.targets), {hash:{},inverse:self.noop,fn:self.programWithDepth(3, program3, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <option value=\\\"-1\\\" \";\n  stack1 = helpers.unless.call(depth0, ((stack1 = (depth0 && depth0.item)),stack1 == null || stack1 === false ? stack1 : stack1.targetTagID), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Custom\", {hash:{},data:data}))\n    + \"</option> </select> <div class=\\\"convert-custom-target-container\\\"> <input type=\\\"text\\\" class=\\\"convert-target-title form-control\\\" name=\\\"targetTitle\\\" class=\\\"form-control\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.item)),stack1 == null || stack1 === false ? stack1 : stack1.target)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" placeholder=\\\"\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Quality Name\", {hash:{},data:data}))\n    + \"\\\"> <select class=\\\"convert-target-profile-select\\\" name=\\\"targetProfile\\\"> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.profiles), {hash:{},inverse:self.noop,fn:self.programWithDepth(8, program8, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </select> <select class=\\\"convert-target-quality-select\\\" name=\\\"targetQuality\\\"> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.availableCustomQualities), {hash:{},inverse:self.noop,fn:self.programWithDepth(10, program10, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </select> </div> <p class=\\\"help-block\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Plex will convert your media to this quality. Each version will be stored in a separate file.\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, self=this, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  \n  return \"hidden\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Optimize\", {hash:{},data:data}));\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Save\", {hash:{},data:data}));\n  }\n\n  buffer += \"<form id=\\\"convert-form\\\" class=\\\"settings-container\\\"> <div class=\\\"modal-body\\\"> <div class=\\\"form-group \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.showRemuxOnlyWarning), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"> <p class=\\\"convert-warning help-block\\\"> <i class=\\\"convert-warning-icon glyphicon circle-exclamation-mark\\\"></i> <span class=\\\"convert-warning-text\\\"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Video optimization may take a long time to complete on this server. You'll be able to use Plex normally while you wait.\", {hash:{},data:data}))\n    + \" </span> </p> </div> <div class=\\\"form-group\\\"> <label class=\\\"control-label\\\" for=\\\"convert-title\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Title\", {hash:{},data:data}))\n    + \"</label> <input type=\\\"text\\\" id=\\\"convert-title\\\" name=\\\"title\\\" class=\\\"form-control\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.conversionItem)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" placeholder=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.conversionItem)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> </div> <div class=\\\"policy-region\\\"></div> <div class=\\\"targets-region\\\"></div> <div class=\\\"location-region\\\"></div> </div> <div class=\\\"modal-footer\\\"> <button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Cancel\", {hash:{},data:data}))\n    + \"</button> <button type=\\\"submit\\\" class=\\\"submit-btn btn btn-primary btn-loading\\\"> <div class=\\\"loading loading-sm\\\"></div> <span class=\\\"btn-label\\\">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isNew), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span> </button> </div> </form> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"loading loading-inline\\\"></div> \";\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"modal-dialog\\\"> <div class=\\\"modal-content\\\"> <div class=\\\"modal-header\\\"> <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\"><i class=\\\"glyphicon remove-2\\\"></i></button> <h4 class=\\\"modal-title\\\"><i class=\\\"modal-icon glyphicon restart\\\"></i> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Optimize\", {hash:{},data:data}))\n    + \"</h4> </div> <div class=\\\"modal-body-region\\\"></div> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"convert-message-container row\\\"> <div class=\\\"col-sm-3 text-center\\\"> <p class=\\\"convert-success-icon\\\"><i class=\\\"glyphicon ok-2\\\"></i></p> </div> <div class=\\\"col-sm-8\\\"> <h4>\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"This media is being converted.\", {hash:{},data:data}))\n    + \"</h4> <h4>\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Watch the status of the conversion {1}here{2}.\", \"<a class=\\\"status-link\\\" href=\\\"#\\\">\", \"</a>\", {hash:{},data:data}))\n    + \"</h4> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"modal-dialog\\\"> <div class=\\\"modal-alert\\\"></div> <div class=\\\"modal-content\\\"></div> </div> \";\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, self=this, functionType=\"function\", escapeExpression=this.escapeExpression;\n\nfunction program1(depth0,data) {\n  \n  \n  return \" <div class=\\\"user-select-container\\\"> \";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \" <a class=\\\"user-select-container\\\" href=\\\"#\\\"> \";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \" </div> \";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \" </a> \";\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.disabled), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <div class=\\\"user-select-top\\\"> <div class=\\\"user-poster img-circle\\\"> <span class=\\\"add-icon\\\">\";\n  stack1 = ((stack1 = (depth0 && depth0.iconAdd)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span> </div> </div> <div class=\\\"caption\\\"> <div class=\\\"username\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Add User\", {hash:{},data:data}))\n    + \"</div> </div> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.disabled), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \" <a class=\\\"back-btn btn-gray\\\" href=\\\"#\\\"><i class=\\\"glyphicon chevron-left\\\"></i></a> \";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <i class=\\\"modal-icon glyphicon pencil\\\"></i> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Edit PIN\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1;\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isEditConfirmation), {hash:{},inverse:self.program(8, program8, data),fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\nfunction program6(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Confirm Current PIN\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var stack1;\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isOpeningAddManagedUser), {hash:{},inverse:self.program(11, program11, data),fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\nfunction program9(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Enter Admin PIN\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program11(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Enter PIN\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program13(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <p class=\\\"help-block\\\"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"You do not currently have a PIN. This will allow any users in this home to switch to your account.\", {hash:{},data:data}))\n    + \" </p> \";\n  return buffer;\n  }\n\nfunction program15(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"modal-footer\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasCurrentPIN), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isEditWarning), {hash:{},inverse:self.program(20, program20, data),fn:self.program(18, program18, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <button type=\\\"submit\\\" class=\\\"save-btn btn-link\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Save\", {hash:{},data:data}))\n    + \"</button> </div> \";\n  return buffer;\n  }\nfunction program16(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <button type=\\\"button\\\" class=\\\"remove-btn btn-gray pull-left\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Remove\", {hash:{},data:data}))\n    + \"</button> \";\n  return buffer;\n  }\n\nfunction program18(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <button type=\\\"button\\\" class=\\\"skip-btn btn-gray\\\" data-dismiss=\\\"modal\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Skip\", {hash:{},data:data}))\n    + \"</button> \";\n  return buffer;\n  }\n\nfunction program20(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <button type=\\\"button\\\" class=\\\"cancel-btn btn-gray\\\" data-dismiss=\\\"modal\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Cancel\", {hash:{},data:data}))\n    + \"</button> \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"modal-header\\\"> <div class=\\\"home-user-dropdown-container pull-right\\\"></div> <h4 class=\\\"modal-title\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.showBackButton), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isEditing), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <span class=\\\"loading loading-sm hidden\\\"></span> </h4> </div> <form id=\\\"pin-form\\\"> <div class=\\\"modal-body\\\"> <ul class=\\\"tile-list user-select-list disabled\\\"></ul> <input type=\\\"number\\\" pattern=\\\"[0-9]*\\\" class=\\\"pin-input\\\"> <a class=\\\"pin-forgot-link btn-gray hidden\\\" href=\\\"https://www.plex.tv/pin-reset/\\\" target=\\\"_blank\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Forgot?\", {hash:{},data:data}))\n    + \"</a> <div class=\\\"pin-digit-container\\\" aria-hidden=\\\"true\\\"> <div class=\\\"pin-digit\\\"></div> <div class=\\\"pin-digit\\\"></div> <div class=\\\"pin-digit\\\"></div> <div class=\\\"pin-digit\\\"></div> </div> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isEditWarning), {hash:{},inverse:self.noop,fn:self.program(13, program13, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isEditing), {hash:{},inverse:self.noop,fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </form> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \" <div class=\\\"user-select-container\\\"> \";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \" <a class=\\\"user-select-container\\\" href=\\\"#\\\"> \";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \" </div> \";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \" </a> \";\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.disabled), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <div class=\\\"user-select-top\\\"> <div class=\\\"user-poster img-circle\\\"></div> <i class=\\\"protected-icon user-icon glyphicon lock\\\"></i> <i class=\\\"admin-icon user-icon glyphicon crown\\\"></i> </div> <div class=\\\"caption\\\"> <div class=\\\"username\\\"></div> <div class=\\\"managed-title\\\"></div> <div class=\\\"managed-title-community\\\"></div> </div> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.disabled), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"modal-header\\\"> <h4 class=\\\"modal-title\\\"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Select User\", {hash:{},data:data}))\n    + \" <span class=\\\"loading loading-sm\\\"></span> </h4> </div> <div class=\\\"modal-body\\\"></div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"data-scope-to-attr=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.scopeToAttr)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-scope-to-param=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.scopeToParam)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"form-group\\\" data-attr=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> <label for=\\\"text-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"control-label\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, (depth0 && depth0.label), {hash:{},data:data}))\n    + \"<span class=\\\"control-error\\\"></span></label> <div class=\\\"input-group selectize-group\\\"> <input type=\\\"text\\\" id=\\\"text-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"form-control text-field\\\" name=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" placeholder=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.placeholder)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-rating-key=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.ratingKey)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-title=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.scopeToAttr), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <h4 class=\\\"server-connect-error-header\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Problem Connecting to Plex\", {hash:{},data:data}))\n    + \"</h4> <p class=\\\"text-muted\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Plex was unable to authenticate your server. Please sign your server out and try again.\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.mappingError), \"myplexgone\", {hash:{},inverse:self.program(6, program6, data),fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <h4 class=\\\"server-connect-error-header\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Problem Connecting to Plex\", {hash:{},data:data}))\n    + \"</h4> <p class=\\\"text-muted\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Your server was unable to reach Plex. Please ensure that the computer or device running your server can access the internet.\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <h4 class=\\\"server-connect-error-header\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Signed in to Plex\", {hash:{},data:data}))\n    + \"</h4> <p class=\\\"text-muted\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"You have successfully signed your server in to Plex, but we were unable to reach it from outside your network.\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <p class=\\\"text-muted\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"If you skip this step you will not be able to share or stream media outside your home. If you change your mind later, you can adjust this in Settings.\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  }\n\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.mappingError), \"badauth\", {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_neq.ts\")).call(depth0, (depth0 && depth0.context), \"settings\", {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <p class=\\\"text-muted\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"If you would like to enable this now, you will need to configure your router or firewall to allow Plex to contact your server. Please refer to our {1}Connecting a Server{2} article for more information.\", \"<a href=\\\"http://support.plex.tv/hc/en-us/articles/200484543-Connecting-a-Server/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps\\\" target=\\\"_blank\\\">\", \"</a>\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"locked\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"disabled\";\n  }\n\n  buffer += \"<div class=\\\"form-group\\\"> <label for=\\\"lockable-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, (depth0 && depth0.label), {hash:{},data:data}))\n    + \"</label> <div class=\\\"input-group\\\"> <a href=\\\"#\\\" data-field=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"input-group-addon edit-lock-addon \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.locked), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.disabled), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon lock\\\"></i></a> <input type=\\\"number\\\" id=\\\"lockable-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"form-control lockable-field\\\" name=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.value)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" placeholder=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.placeholder)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.disabled), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \" locked\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"data-query=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.query)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"form-group\\\"> <label for=\\\"lockable-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, (depth0 && depth0.label), {hash:{},data:data}))\n    + \"</label> <div class=\\\"input-group selectize-group\\\"> <a href=\\\"#\\\" data-field=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"input-group-addon edit-lock-addon\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.locked), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"><i class=\\\"glyphicon lock\\\"></i></a> <input type=\\\"text\\\" id=\\\"lockable-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"form-control lockable-field tag-input-hidden\\\" data-name=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-attr=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.attribute)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-only-delete=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.onlyDelete)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.query), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \" locked\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <textarea class=\\\"form-control lockable-field\\\" id=\\\"lockable-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" name=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.rows), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" placeholder=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.placeholder)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\"\n    + escapeExpression(((stack1 = (depth0 && depth0.value)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</textarea> \";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" rows=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.rows)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <input type=\\\"text\\\" id=\\\"lockable-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"form-control lockable-field\\\" name=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.value)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" placeholder=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.placeholder)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.scopeToAttr), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.ratingKey), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \";\n  return buffer;\n  }\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"data-scope-to-attr=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.scopeToAttr)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-scope-to-param=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.scopeToParam)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"data-rating-key=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.ratingKey)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"form-group selectize-group\\\" data-attr=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> <label for=\\\"lockable-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, (depth0 && depth0.label), {hash:{},data:data}))\n    + \"</label> <div class=\\\"input-group\\\"> <a href=\\\"#\\\" data-field=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"input-group-addon edit-lock-addon\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.locked), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon lock\\\"></i></a> \";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.type), \"textarea\", {hash:{},inverse:self.program(6, program6, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"advanced-setting\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <label class=\\\"control-label\\\" for=\\\"input_\"\n    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + escapeExpression(((stack1 = (depth0 && depth0.idSuffix)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> <input type=\\\"checkbox\\\" id=\\\"input_\"\n    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + escapeExpression(((stack1 = (depth0 && depth0.idSuffix)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" name=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"1\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.value), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \"\n    + escapeExpression(((stack1 = (depth0 && depth0.label)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" </label> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.summary), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  \n  return \"checked\";\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <p class=\\\"help-block\\\">\"\n    + escapeExpression(((stack1 = (depth0 && depth0.summary)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</p> \";\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <label class=\\\"control-label\\\" for=\\\"input_\"\n    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + escapeExpression(((stack1 = (depth0 && depth0.idSuffix)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\"\n    + escapeExpression(((stack1 = (depth0 && depth0.label)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</label> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.enumValues), {hash:{},inverse:self.program(13, program13, data),fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.summary), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  return buffer;\n  }\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <select id=\\\"input_\"\n    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + escapeExpression(((stack1 = (depth0 && depth0.idSuffix)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" name=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.enumValues), {hash:{},inverse:self.noop,fn:self.programWithDepth(10, program10, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </select> \";\n  return buffer;\n  }\nfunction program10(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <option value=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.value)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.value), (depth1 && depth1.value), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression(((stack1 = (depth0 && depth0.label)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</option> \";\n  return buffer;\n  }\nfunction program11(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\nfunction program13(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <input type=\\\"\";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.option), \"hidden\", {hash:{},inverse:self.program(16, program16, data),fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" id=\\\"input_\"\n    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + escapeExpression(((stack1 = (depth0 && depth0.idSuffix)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"form-control\\\" name=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.value)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.placeholder), {hash:{},inverse:self.noop,fn:self.program(18, program18, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \";\n  return buffer;\n  }\nfunction program14(depth0,data) {\n  \n  \n  return \"password\";\n  }\n\nfunction program16(depth0,data) {\n  \n  \n  return \"text\";\n  }\n\nfunction program18(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"placeholder=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.placeholder)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"form-group \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.advanced), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"> \";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.type), \"bool\", {hash:{},inverse:self.program(8, program8, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <textarea class=\\\"form-control text-field\\\" id=\\\"text-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" name=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.rows), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" placeholder=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.placeholder)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\"\n    + escapeExpression(((stack1 = (depth0 && depth0.value)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</textarea> \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" rows=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.rows)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <input type=\\\"text\\\" id=\\\"text-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"form-control text-field\\\" name=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.value)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" placeholder=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.placeholder)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.excludeParam), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \";\n  return buffer;\n  }\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"data-exclude-param=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.excludeParam)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-exclude-value=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.excludeValue)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"form-group\\\"> <label for=\\\"text-\"\n    + escapeExpression(((stack1 = (depth0 && depth0.name)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, (depth0 && depth0.label), {hash:{},data:data}))\n    + \"</label> \";\n  stack1 = __default(require(\"../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.type), \"textarea\", {hash:{},inverse:self.program(4, program4, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<form class=\\\"edit-section-advanced-form settings-container\\\"> <div class=\\\"language-group\\\"> <input type=\\\"hidden\\\" name=\\\"language\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.section)),stack1 == null || stack1 === false ? stack1 : stack1.language)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> </div> <div class=\\\"row\\\"> <div class=\\\"col-md-12\\\"> <div class=\\\"form-group scanner-group hidden\\\"> <label for=\\\"edit-section-scanner\\\" class=\\\"control-label\\\"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Scanner\", {hash:{},data:data}))\n    + \" <span class=\\\"control-error\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"A scanner is required.\", {hash:{},data:data}))\n    + \"</span> </label> <select id=\\\"edit-section-scanner\\\" name=\\\"scanner\\\"></select> </div> </div> </div> <div class=\\\"row\\\"> <div class=\\\"col-md-12\\\"> <div class=\\\"form-group agent-group hidden\\\"> <label for=\\\"edit-section-agent\\\" class=\\\"control-label\\\"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Agent\", {hash:{},data:data}))\n    + \" <span class=\\\"control-error\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"An agent is required.\", {hash:{},data:data}))\n    + \"</span> </label> <select id=\\\"edit-section-agent\\\" name=\\\"agent\\\"></select> </div> </div> </div> <div class=\\\"row\\\"> <div class=\\\"col-md-12 section-agent-settings-region\\\"></div> </div> <div class=\\\"row\\\"> <div class=\\\"col-md-12 section-settings-region\\\"></div> </div> </form> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, self=this, escapeExpression=this.escapeExpression, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  \n  return \"hidden\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"download-media-container\\\"> <label> <input id=\\\"arcade-download-media\\\" type=\\\"checkbox\\\" name=\\\"downloadMedia\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.section)),stack1 == null || stack1 === false ? stack1 : stack1.downloadMedia), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isDisabled), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Include dozens of classic games from Atari like Asteroids, Centipede, Missile Command and more!\", {hash:{},data:data}))\n    + \" </label> </div> \";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  \n  return \"checked\";\n  }\n\nfunction program6(depth0,data) {\n  \n  \n  return \"disabled\";\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <i class=\\\"glyphicon folder-plus\\\"></i> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Browse for games folder\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <i class=\\\"glyphicon folder-plus\\\"></i> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Browse for media folder\", {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\nfunction program12(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <p class=\\\"help-block\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Help us out by following {1}our guide{2} to naming and organizing your games.\", \"<a href=\\\"https://support.plex.tv/articles/naming-and-organizing-game-files-and-cores/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps\\\" target=\\\"_blank\\\">\", \"</a>\", {hash:{},data:data}))\n    + \"</p> <p class=\\\"help-block\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Looking for more information? Check out our {1}Plex Arcade support articles{2}.\", \"<a href=\\\"https://support.plex.tv/articles/categories/features/arcade/\\\" target=\\\"_blank\\\">\", \"</a>\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <p class=\\\"help-block\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Help us out by following {1}our guide{2} to naming and organizing your media.\", \"<a href=\\\"https://support.plex.tv/articles/naming-and-organizing-your-movie-media-files/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps\\\" target=\\\"_blank\\\">\", \"</a>\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  }\n\n  buffer += \"<form class=\\\"edit-section-folders-form settings-container\\\"> <div id=\\\"arcade-upsell\\\" class=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hideArcadeUpsell), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"> <p>\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Introducing retro gaming in Plex, brought to you by Plex Labs!\", {hash:{},data:data}))\n    + \"</p> <p class=\\\"help-block\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"With a Plex Arcade subscription, you can play and stream many of your favorite retro games on Google Chrome, Microsoft Edge, Android, iOS or Apple TV devices! Try it for free for 7 days!\", {hash:{},data:data}))\n    + \"</p> <p class=\\\"button-container\\\"> <a type=\\\"button\\\" href=\"\n    + escapeExpression(((stack1 = (depth0 && depth0.subscribeURL)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" target=\\\"_blank\\\" class=\\\"subscribe-btn btn btn-primary\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Subscribe Now\", {hash:{},data:data}))\n    + \"</a> </p> </div> <p id=\\\"arcade-required\\\" class=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hideArcadeRequired), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Sorry, a {1}Plex Arcade subscription{2} is required to create a new Games library.\", \"<a href=\\\"https://www.plex.tv/subscription\\\" target=\\\"_blank\\\">\", \"</a>\", {hash:{},data:data}))\n    + \"</p> <p id=\\\"arcade-greeting\\\" class=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hideArcadeGreeting), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Thanks! You've got an active {1}Plex Arcade subscription{2}.\", \"<a href=\\\"https://www.plex.tv/subscription\\\" target=\\\"_blank\\\">\", \"</a>\", {hash:{},data:data}))\n    + \"</p> <p id=\\\"parsec-required\\\" class=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hideParsecRequired), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Playing games requires that you {1}create a Parsec account{2}, respond to their email confirmation, and then {3}link your Parsec account{4}.\", \"<a href=\\\"https://parsec.app\\\" target=\\\"_blank\\\">\", \"</a>\", \"<a href=\\\"https://plex.tv/users/other-services\\\" target=\\\"_blank\\\">\", \"</a>\", {hash:{},data:data}))\n    + \"</p> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isNewGamesSection), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <p>\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Add folders to your library\", {hash:{},data:data}))\n    + \"</p> <div class=\\\"form-group Location-group\\\"> <div class=\\\"paths-region\\\"></div> <p class=\\\"button-container\\\"> <button type=\\\"button\\\" class=\\\"add-folder-btn btn btn-icon-label btn-default\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isDisabled), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isGamesSection), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.isGamesSection), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </button> </p> <p class=\\\"control-error\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"At least one folder is required.\", {hash:{},data:data}))\n    + \"</p> </div> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isGamesSection), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.isGamesSection), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </form> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"col-md-12\\\"> <div class=\\\"form-group path-group\\\"> <input type=\\\"text\\\" name=\\\"path\\\" class=\\\"form-control\\\" value=\\\"\";\n  if (helper = helpers.path) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.path); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"> <div class=\\\"path-actions\\\"> <a href=\\\"#\\\" class=\\\"remove-path-btn btn-link btn-gray\\\"><i class=\\\"glyphicon remove-2\\\"></i></a> </div> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <p class=\\\"help-block\\\"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Note: An active Plex Pass is required for this service. Don't have a Plex Pass? {1}Subscribe here{2}\", \"<a href=\\\"{3}\\\" target=\\\"_blank\\\">\", \"</a>\", (depth0 && depth0.plexPassUrl), {hash:{},data:data}))\n    + \" </p> \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"<div class=\\\"vendor-logo vendor-logo-lyricfind\\\"></div>\";\n  }\n\n  buffer += \"<div class=\\\"choose-library use-premium-library\\\" data-agent=\\\"com.plexapp.agents.plexmusic\\\" data-scanner=\\\"Plex Premium Music Scanner\\\"> <div class=\\\"row\\\"> <div class=\\\"col-xs-12\\\"> <div class=\\\"row use-library-header\\\"> <div class=\\\"col-xs-12\\\"> <input type=\\\"radio\\\"> <span class=\\\"header-text\\\"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Create a premium Plex music library!\", {hash:{},data:data}))\n    + \" </span> </div> </div> <div class=\\\"row use-premium-library-body\\\"> <div class=\\\"col-xs-8\\\"> <ul> <li>\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Access to the best artwork, artist bios, album reviews, and more\", {hash:{},data:data}))\n    + \"</li> <li>\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Smart mixes based on track or mood\", {hash:{},data:data}))\n    + \"</li> <li>\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Improved music recognition and matching\", {hash:{},data:data}))\n    + \"</li> </ul> \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.hasPremiumMusic), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> <div class=\\\"col-xs-4 vendor-logos\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasLyrics), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <div class=\\\"vendor-logo vendor-logo-gracenote\\\"></div> <div class=\\\"vendor-logo vendor-logo-plex-pass\\\"></div> </div> </div> </div> </div> </div> <div class=\\\"choose-library use-basic-library\\\"> <div class=\\\"row use-library-header\\\"> <div class=\\\"col-xs-12\\\"> <input type=\\\"radio\\\"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Create a basic music library\", {hash:{},data:data}))\n    + \" </div> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/partial.ts\")).call(depth0, \"setting\", {hash:{\n    'idSuffix': (\"_c\")\n  },data:data}))\n    + \" \";\n  stack1 = helpers['if'].call(depth0, (depth1 && depth1.edit), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \";\n  stack1 = __default(require(\"../../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth0 && depth0.id), \"enableBIFGeneration\", {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  return buffer;\n  }\nfunction program3(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <div class=\\\"form-group\\\"> <button type=\\\"button\\\" class=\\\"delete-thumbnails-btn btn btn-sm btn-danger\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Delete Preview Thumbnails\", {hash:{},data:data}))\n    + \"</button> </div> \";\n  return buffer;\n  }\n\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.settings), {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  return buffer;\n  });","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, self=this, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  \n  return \"section-type-chosen\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"is-type-unsupported\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <p class=\\\"prompt\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Select your library type\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <label>\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Library type\", {hash:{},data:data}))\n    + \"</label> \";\n  return buffer;\n  }\n\nfunction program9(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <a class=\\\"wizard-block section-type \";\n  stack1 = helpers['if'].call(depth0, (depth1 && depth1.canChangeType), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = __default(require(\"../../../js/utils/handlebars/if_eq.ts\")).call(depth0, (depth1 && depth1.currentSectionKey), (depth0 && depth0.key), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-key=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" href=\\\"#\\\"> <div class=\\\"wizard-block-icon\\\">\";\n  stack1 = ((stack1 = (depth0 && depth0.typeIcon)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div> \"\n    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" </a> \";\n  return buffer;\n  }\nfunction program10(depth0,data) {\n  \n  \n  return \"selectable\";\n  }\n\nfunction program12(depth0,data) {\n  \n  \n  return \"selected\";\n  }\n\nfunction program14(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <div class=\\\"row\\\"> <div class=\\\"col-xs-12\\\"> <p class=\\\"prompt\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Name your library and choose language.\", {hash:{},data:data}))\n    + \"</p> </div> </div> \";\n  return buffer;\n  }\n\nfunction program16(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Last updated {1}\", (depth0 && depth0.escapedUpdatedAt), {hash:{},data:data}))\n    + \" \";\n  return buffer;\n  }\n\n  buffer += \"<form class=\\\"edit-section-type-form settings-container \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.section)),stack1 == null || stack1 === false ? stack1 : stack1.type), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.isInitialTypeSupported), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.add), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <div class=\\\"wizard-blocks-group form-group type-group\\\"> \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.sectionTypes), {hash:{},inverse:self.noop,fn:self.programWithDepth(9, program9, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <label class=\\\"control-label\\\"> <span class=\\\"control-error\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"You must select a media type.\", {hash:{},data:data}))\n    + \"</span> </label> </div> <div class=\\\"visible-once-section-type-chosen\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasType), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <div class=\\\"row section-type-unsupported\\\"> <div class=\\\"col-md-7\\\"> <label>\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Sorry, this library type is unsupported by this server.\", {hash:{},data:data}))\n    + \"</label> </div> </div> <div class=\\\"row section-type-supported\\\"> <div class=\\\"col-md-7\\\"> <div class=\\\"form-group title-group\\\"> <div> <label for=\\\"edit-section-title\\\" class=\\\"control-label\\\"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Name\", {hash:{},data:data}))\n    + \" <span class=\\\"control-error\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"A library name is required.\", {hash:{},data:data}))\n    + \"</span> </label> </div> <input type=\\\"text\\\" id=\\\"edit-section-title\\\" name=\\\"title\\\" class=\\\"form-control\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.section)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> </div> </div> <div class=\\\"col-md-5\\\"> <div class=\\\"form-group language-group\\\"> <div> <label for=\\\"edit-section-language\\\" class=\\\"control-label\\\"> \"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"Language\", {hash:{},data:data}))\n    + \" <span class=\\\"control-error\\\">\"\n    + escapeExpression(__default(require(\"../../../js/utils/handlebars/t.ts\")).call(depth0, \"A language is required.\", {hash:{},data:data}))\n    + \"</span> </label> </div> <select id=\\\"edit-section-language\\\" name=\\\"language\\\"></select> </div> </div> </div> <div class=\\\"row section-type-supported\\\"> <div class=\\\"col-md-12\\\"> <span class=\\\"text-muted\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.updatedAt), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </span> </div> </div> </div> </form> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"setup-basic-form-group form-group\\\"> <p class=\\\"text-muted\\\"> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Give your server a friendly name to help identify it in Plex apps and on your network.\", {hash:{},data:data}))\n    + \" </p> <input type=\\\"text\\\" id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.friendlyNameSetting)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"form-control\\\" value=\\\"\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.friendlyNameSetting)),stack1 == null || stack1 === false ? stack1 : stack1.value), {hash:{},inverse:self.program(4, program4, data),fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" placeholder=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.server)),stack1 == null || stack1 === false ? stack1 : stack1.friendlyName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> </div> \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var stack1;\n  return escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.friendlyNameSetting)),stack1 == null || stack1 === false ? stack1 : stack1.value)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  }\n\nfunction program4(depth0,data) {\n  \n  var stack1;\n  return escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.server)),stack1 == null || stack1 === false ? stack1 : stack1.friendlyName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"setup-basic-form-group form-group\\\"> <div class=\\\"publish-checkbox checkbox\\\"> <label for=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.publishSetting)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> <input type=\\\"checkbox\\\" id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.publishSetting)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" checked> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Allow me to access my media outside my home\", {hash:{},data:data}))\n    + \" </label> </div> <p class=\\\"text-muted\\\"> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Plex will attempt to automatically configure your network to allow Plex apps outside your home to access Plex Media Server on this computer. Remember this computer will need to be turned on to access your media.\", {hash:{},data:data}))\n    + \" </p> </div> \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"row\\\"> <div class=\\\"col-sm-6 col-sm-offset-3\\\"> <form id=\\\"setup-basic-form\\\" class=\\\"settings-container\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.friendlyNameSetting), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.publishSetting), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <div class=\\\"setup-footer\\\"> <button type=\\\"submit\\\" class=\\\"submit-btn btn btn-primary btn-loading btn-lg\\\"> <div class=\\\"loading loading-sm\\\"></div> <span class=\\\"btn-label\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Next\", {hash:{},data:data}))\n    + \"</span> </button> <button class=\\\"next-btn hidden\\\" data-subset=\\\"setupLibrary\\\"></button> </div> </form> </div> </div> <div class=\\\"modal-container\\\"></div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" <div class=\\\"checkbox\\\"> <label for=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.collectUsageDataSetting)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> <input type=\\\"checkbox\\\" id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.collectUsageDataSetting)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" name=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.collectUsageDataSetting)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"1\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.collectUsageDataSetting)),stack1 == null || stack1 === false ? stack1 : stack1.value), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Send anonymous usage data to Plex\", {hash:{},data:data}))\n    + \" </label> </div> <p class=\\\"setup-complete-help text-muted\\\"> \"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Help us improve everyone's Plex experience by sending anonymous usage data.\", {hash:{},data:data}))\n    + \" </p> \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"checked\";\n  }\n\n  buffer += \"<div class=\\\"row\\\"> <div class=\\\"col-sm-6 col-sm-offset-3\\\"> <div class=\\\"setup-apps-container\\\"> <img class=\\\"setup-apps-image\\\" src=\\\"\"\n    + escapeExpression(((stack1 = (depth0 && depth0.devicesImg)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"> <a href=\\\"https://plex.tv/downloads\\\" target=\\\"_blank\\\" class=\\\"btn btn-default btn-lg\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Get Plex Apps\", {hash:{},data:data}))\n    + \"</a> </div> <p class=\\\"text-muted\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"All set! Your Plex Media Server is working hard to find your media and make it beautiful. Grab the Plex app for all your favorite devices to get the most out of Plex and start streaming everywhere!\", {hash:{},data:data}))\n    + \"</p> <form id=\\\"setup-complete-form\\\" class=\\\"settings-container\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.collectUsageDataSetting), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" <div class=\\\"setup-footer setup-done-footer\\\"> <button class=\\\"next-btn btn btn-default btn-lg\\\" data-subset=\\\"setupLibrary\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Back\", {hash:{},data:data}))\n    + \"</button> <button type=\\\"submit\\\" class=\\\"submit-btn btn btn-primary btn-loading btn-lg active\\\"> <div class=\\\"loading loading-sm\\\"></div> <span class=\\\"btn-label\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Done\", {hash:{},data:data}))\n    + \"</span> </button> <button class=\\\"done-btn btn btn-primary btn-lg hidden\\\"></button> </div> </form> </div> </div> <div class=\\\"modal-container\\\"></div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <h1>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Setup is not allowed for shared servers.\", {hash:{},data:data}))\n    + \"</h1> \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \" <h1>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"A problem has been detected with a core component of Plex Media Server.\", {hash:{},data:data}))\n    + \"</h1> <h2 class=\\\"text-muted\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Please visit the {1}forums{2} and provide your logs, as described {3}here{4}.\", \"<a href=\\\"https://forums.plex.tv\\\" target=\\\"_blank\\\">\", \"</a>\", \"<a href=\\\"http://support.plex.tv/hc/en-us/articles/200250417-Log-File-Locations/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps\\\" target=\\\"_blank\\\">\", \"</a>\", {hash:{},data:data}))\n    + \"</h2> \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"row row-padded\\\"> <div class=\\\"col-md-8 col-md-offset-2\\\"> \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.shared), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<h2 class=\\\"setup-intro-header\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"How Plex Works\", {hash:{},data:data}))\n    + \"</h2> <h4>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Plex Media Server runs on the computer where you keep your media\", {hash:{},data:data}))\n    + \"</h4> <img class=\\\"setup-intro-img setup-intro-computer-img\\\" src=\"\n    + escapeExpression(((stack1 = (depth0 && depth0.computerImg)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"> <h4>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Plex scans your media, automatically organizes it, and makes it beautiful\", {hash:{},data:data}))\n    + \"</h4> <img class=\\\"setup-intro-img setup-intro-media-img\\\" src=\"\n    + escapeExpression(((stack1 = (depth0 && depth0.mediaImg)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"> <h4>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Play your media on any screen with your favorite Plex app\", {hash:{},data:data}))\n    + \"</h4> <img class=\\\"setup-intro-img setup-intro-play-img\\\" src=\"\n    + escapeExpression(((stack1 = (depth0 && depth0.playImg)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"> <p> <button class=\\\"next-btn btn btn-primary btn-lg\\\" data-subset=\\\"setupLoading\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Got it!\", {hash:{},data:data}))\n    + \"</button> </p> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"row\\\"> <div class=\\\"col-sm-6 col-sm-offset-3\\\"> <h4>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Organize Your Media\", {hash:{},data:data}))\n    + \"</h4> <p class=\\\"text-muted\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Plex organizes your media into libraries. You can add as many libraries as you want, and you can have multiple libraries with the same type.\", {hash:{},data:data}))\n    + \"</p> <p class=\\\"setup-add-section-container\\\"> <button class=\\\"add-section-btn btn btn-default\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Add Library\", {hash:{},data:data}))\n    + \"</button> </p> <div class=\\\"setup-section-list-container\\\"></div> <div class=\\\"setup-footer\\\"> <button class=\\\"next-btn btn btn-default btn-lg\\\" data-subset=\\\"setupBasic\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Back\", {hash:{},data:data}))\n    + \"</button> <button class=\\\"next-btn btn btn-primary btn-lg\\\" data-subset=\\\"setupComplete\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Next\", {hash:{},data:data}))\n    + \"</button> </div> </div> </div> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"loading loading-inline\\\"></div> <p class=\\\"loading-title\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Please wait a moment while Plex starts.\", {hash:{},data:data}))\n    + \"</p> \";\n  return buffer;\n  });","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"setup-header row hidden\\\"> <div class=\\\"col-sm-6 col-sm-offset-3\\\"> <div class=\\\"sign-in-logo text-center\\\"> <i class=\\\"plex-image plex-logo\\\"></i> </div> <h2>\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Server Setup\", {hash:{},data:data}))\n    + \"</h2> <div class=\\\"setup-progress\\\"> <div class=\\\"basic-segment setup-progress-segment\\\"> <a class=\\\"segment-btn btn-gray\\\" data-subset=\\\"setupBasic\\\" href=\\\"#\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Name\", {hash:{},data:data}))\n    + \"</a> </div> <div class=\\\"library-segment setup-progress-segment\\\"> <a class=\\\"segment-btn btn-gray\\\" data-subset=\\\"setupLibrary\\\" href=\\\"#\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Media Library\", {hash:{},data:data}))\n    + \"</a> </div> <div class=\\\"complete-segment setup-progress-segment\\\"> <a class=\\\"segment-btn btn-gray\\\" data-subset=\\\"setupComplete\\\" href=\\\"#\\\">\"\n    + escapeExpression(__default(require(\"../../js/utils/handlebars/t.ts\")).call(depth0, \"Finish\", {hash:{},data:data}))\n    + \"</a> </div> </div> </div> </div> <div class=\\\"setup-container\\\"></div> \";\n  return buffer;\n  });","// extracted by mini-css-extract-plugin\nexport default {\"plexIcon\":\"y8bwX\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalFooter\":\"dNFZf\",\"button\":\"UI5wX r2dcz x5jRQ\",\"splitButton\":\"oA0q0 UI5wX r2dcz x5jRQ\"};","\n    import PropTypes from 'prop-types';\n    import React from 'react';\n    import styles from 'app/js/views/v3/components/core/base/PlexIcon.css';\n\n    function IconAlert(props) {\n      const label = props['aria-label'];\n      const className = props.className;\n      const style = props.style;\n\n      const svgProps = {\"viewBox\":\"0 0 560 560\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"strokeMiterlimit\":\"1.414\",\"strokeLinejoin\":\"round\",\"id\":\"plex-icon-alert-560\"};\n\n      svgProps['aria-hidden'] = !label;\n      svgProps.style = style;\n      svgProps.className = styles.plexIcon + (className ? ' ' + className : '');\n\n      const children = [React.createElement.apply(React, ['path', {\"d\":\"m280 0l-280 520 560 0-280-520m0 400c22.077 0 40 17.923 40 40 0 22.077-17.923 40-40 40-22.077 0-40-17.923-40-40 0-22.077 17.923-40 40-40m-30-40l0-220 60 0 0 220-60 0\"}].concat([]))];\n\n      if (label) {\n        children.unshift(React.createElement('title', null, label));\n      }\n\n      // Arrays require a key, but a fixed number of elements don't.\n      // Spread the elements since it'll be a fixed number anyways\n      return React.createElement.apply(React, ['svg', svgProps].concat(children));\n    };\n\n    IconAlert.propTypes = {\n      'aria-label': PropTypes.string,\n      className: PropTypes.string,\n      style: PropTypes.object\n    };\n\n    export default IconAlert;\n  ","\n    import PropTypes from 'prop-types';\n    import React from 'react';\n    import styles from 'app/js/views/v3/components/core/base/PlexIcon.css';\n\n    function IconRemove(props) {\n      const label = props['aria-label'];\n      const className = props.className;\n      const style = props.style;\n\n      const svgProps = {\"viewBox\":\"0 0 560 560\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"strokeMiterlimit\":\"1.414\",\"strokeLinejoin\":\"round\",\"id\":\"plex-icon-remove-560\"};\n\n      svgProps['aria-hidden'] = !label;\n      svgProps.style = style;\n      svgProps.className = styles.plexIcon + (className ? ' ' + className : '');\n\n      const children = [React.createElement.apply(React, ['path', {\"d\":\"m120 70l-50 50 160 160-160 160 50 50 160-160 160 160 50-50-160-160 160-160-50-50-160 160-160-160\"}].concat([]))];\n\n      if (label) {\n        children.unshift(React.createElement('title', null, label));\n      }\n\n      // Arrays require a key, but a fixed number of elements don't.\n      // Spread the elements since it'll be a fixed number anyways\n      return React.createElement.apply(React, ['svg', svgProps].concat(children));\n    };\n\n    IconRemove.propTypes = {\n      'aria-label': PropTypes.string,\n      className: PropTypes.string,\n      style: PropTypes.object\n    };\n\n    export default IconRemove;\n  ","__webpack_require__.O(0, [179], () => {\n\t[357,559,952,99,292].map(__webpack_require__.E);\n}, 5);"],"names":["root","self","g","global","_","$","exports","Backbone","previousBackbone","slice","Array","prototype","VERSION","noConflict","this","emulateHTTP","emulateJSON","addUnderscoreMethods","Class","methods","attribute","each","length","method","value","iteratee","context","cb","defaultVal","args","call","arguments","unshift","apply","addMethod","instance","isFunction","isObject","_isModel","modelMatcher","isString","model","get","attrs","matcher","matches","attributes","Events","eventSplitter","eventsApi","events","name","callback","opts","names","i","keys","test","split","on","internalOn","obj","listening","_events","onApi","ctx","_listeners","id","listenTo","_listenId","uniqueId","listeningTo","_listeningTo","thisId","objId","count","options","handlers","push","off","offApi","listeners","stopListening","ids","isEmpty","remaining","j","handler","_callback","size","once","onceMap","bind","listenToOnce","map","offer","trigger","Math","max","triggerApi","objEvents","allEvents","all","triggerEvents","concat","ev","l","a1","a2","a3","unbind","extend","Model","cid","cidPrefix","collection","parse","defaults","result","set","changed","initialize","validationError","idAttribute","toJSON","clone","sync","attr","escape","has","key","val","_validate","unset","silent","changes","changing","_changing","_previousAttributes","current","prev","isEqual","_pending","clear","hasChanged","changedAttributes","diff","old","previous","previousAttributes","fetch","success","resp","serverAttrs","wrapError","save","wait","validate","isNew","patch","xhr","destroy","defer","url","base","urlError","replace","encodeURIComponent","constructor","isValid","error","values","pairs","invert","pick","omit","chain","Collection","models","comparator","_reset","reset","setOptions","add","remove","merge","addOptions","splice","array","insert","at","min","tail","singular","isArray","removed","_removeModels","toAdd","toRemove","modelMap","sort","sortable","sortAttr","existing","_prepareModel","_addReference","orderChanged","some","index","_removeReference","previousModels","pop","shift","modelId","_byId","where","first","findWhere","Error","sortBy","pluck","invoke","create","callbackOpts","indexOf","_onModelEvent","event","prevId","forEach","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","any","include","includes","contains","toArray","head","take","initial","rest","drop","last","without","difference","shuffle","lastIndexOf","sample","partition","groupBy","countBy","indexBy","View","viewOptions","_ensureElement","delegateEventSplitter","tagName","selector","$el","render","_removeElement","setElement","element","undelegateEvents","_setElement","delegateEvents","el","match","delegate","eventName","listener","undelegate","_createElement","document","createElement","className","_setAttributes","type","methodMap","params","dataType","data","contentType","JSON","stringify","_method","beforeSend","setRequestHeader","processData","textStatus","errorThrown","ajax","Router","routes","_bindRoutes","optionalParam","namedParam","splatParam","escapeRegExp","route","isRegExp","_routeToRegExp","router","history","fragment","_extractParameters","execute","navigate","optional","RegExp","exec","param","decodeURIComponent","History","checkUrl","window","location","routeStripper","rootStripper","pathStripper","started","interval","atRoot","pathname","getSearch","matchRoot","decodeFragment","decodeURI","href","getHash","getPath","path","charAt","getFragment","_usePushState","_wantsHashChange","start","hashChange","_hasHashChange","documentMode","_useHashChange","_wantsPushState","pushState","_hasPushState","iframe","src","style","display","tabIndex","body","iWindow","insertBefore","firstChild","contentWindow","open","close","hash","addEventListener","attachEvent","_checkUrlInterval","setInterval","loadUrl","stop","removeEventListener","detachEvent","removeChild","clearInterval","e","decodedFragment","title","assign","_updateHash","protoProps","staticProps","child","parent","Surrogate","__super__","factory","underscore","backbone","module","ChildViewContainer","Container","views","_views","_indexByModel","_indexByCustom","_updateLength","view","customIndex","viewCid","findByModel","findByModelCid","modelCid","findByCid","findByCustom","findByIndex","Marionette","throwError","message","getOption","target","optionName","undefined","normalizeMethods","normalizedHash","fn","triggerMethod","splitter","getEventName","prefix","toUpperCase","MonitorDOMRefresh","documentElement","triggerDOMRefresh","_isShown","_isRendered","isInDOM","handleShow","handleRender","bindFromStrings","entity","evt","methodNames","methodName","bindToFunction","unbindFromStrings","unbindToFunction","iterateEvents","bindings","functionCallback","stringCallback","bindEntityEvents","unbindEntityEvents","Callbacks","_deferred","Deferred","_callbacks","contextOverride","done","run","resolve","callbacks","Controller","Region","buildRegion","regionConfig","defaultRegionType","RegionType","regionIsString","regionSelectorIsString","regionTypeIsUndefined","isUndefined","regionType","regionIsType","region","parentEl","getEl","show","ensureEl","isViewClosed","isClosed","isDifferentView","currentView","empty","append","attachView","RegionManager","_regions","addRegions","regionDefinitions","regions","definition","addRegion","hasSelector","_store","removeRegion","_remove","removeRegions","closeRegions","_setLength","TemplateCache","templateId","templateCaches","cachedTemplate","load","compiledTemplate","template","loadTemplate","compileTemplate","html","rawTemplate","Renderer","bindAll","normalizeUIKeys","onShowCalled","getTemplate","mixinTemplateHelpers","templateHelpers","_this","v","pattern","r","configureTriggers","triggers","hasOptions","prevent","preventDefault","stopPropagation","shouldPrevent","shouldStop","_delegateDOMEvents","combinedEvents","unbindUIElements","bindUIElements","ui","_uiBindings","ItemView","serializeData","items","CollectionView","itemViewEventPrefix","_initChildViewStorage","_initialEvents","initRenderBuffer","elBuffer","createDocumentFragment","_bufferedChildren","startBuffering","isBuffering","endBuffering","appendBuffer","_triggerShowBufferedChildren","addChildView","removeItemView","item","closeEmptyView","getItemView","addItemView","children","triggerBeforeRender","triggerRendered","_renderChildren","closeChildren","showEmptyView","showCollection","EmptyView","getEmptyView","_showingEmptyView","itemView","itemViewOptions","buildItemView","addChildViewEventForwarding","renderItemView","rootEvent","itemEvents","getItemEvents","appendHtml","ItemViewType","removeChildView","checkEmpty","collectionView","buffer","appendChild","CompositeView","isRendered","resetItemViewContainer","renderModel","compositeView","getItemViewContainer","containerView","$itemViewContainer","container","itemViewContainer","Layout","_firstRender","_initializeRegions","_reInitializeRegions","regionManager","_buildRegions","that","_initRegionManager","AppRouter","appRoutes","controller","_getController","processAppRoutes","appRoute","_addAppRoute","routeNames","reverse","Application","_initCallbacks","vent","Wreqr","EventAggregator","commands","Commands","reqres","RequestResponse","submodules","request","addInitializer","initializer","_regionManager","getRegion","moduleNames","moduleDefinition","ModuleClass","Module","getClass","moduleName","app","_setupInitializersAndFinalizers","startWithParent","_initializerCallbacks","addFinalizer","_finalizerCallbacks","_isInitialized","mod","addDefinition","customArgs","_runModuleDefinition","flatten","moduleDefinitions","parentModule","_getModule","_addModuleDefinition","def","moduleClass","define","startWithParentIsConfigured","_requireDep","_require","cache","modules","FilteredCollection","SortedCollection","PaginatedCollection","proxyCollection","proxyEvents","Obscura","superset","_superset","_filtered","_sorted","_paginated","filteredEvents","sortedEvents","paginatedEvents","getFilteredLength","removeTransforms","resetFilters","removeSort","removePagination","blacklistedMethods","eventWhiteList","from","updateLength","functions","isChangeEvent","createFilter","invalidateCache","_filterResultCache","invalidateCacheForFilter","filterName","hasOwnProperty","addFilter","filterObj","_filters","removeFilter","execFilterOnModel","execFilter","filtered","_collection","onReset","onSort","hasComparator","onAddChange","filteredIndex","onModelAttributeChange","onAll","onModelRemove","Filtered","defaultFilterName","filterBy","refilter","arg","getFilters","hasFilter","createFilterObject","filterFunction","filterFunctions","convertKeyFunctionToFunction","convertKeyValueToFunction","createFilterFromObject","getPageLimits","getPage","getPerPage","updatePagination","pages","updateNumPages","_totalPages","perPage","totalPages","floor","numPagesChanged","numPages","setPage","recalculatePagination","arrayA","arrayB","maxLength","onAddRemove","end","Paginated","_page","setPerPage","_perPage","getNumPages","page","upperLimit","hasNextPage","hasPrevPage","nextPage","movePage","prevPage","firstPage","lastPage","delta","reverseSortedIndex","lookupIterator","modelInsertIndex","_comparator","_reverse","sortedIndex","onAdd","onRemove","onChange","newOrder","Sorted","setSort","direction","reverseSort","iterator","identity","low","high","mid","eventNames","CommandStorage","Handlers","_wreqrHandlers","setHandlers","setHandler","config","hasHandler","getHandler","removeHandler","removeAllHandlers","_commands","getCommands","commandName","command","instances","addCommand","clearCommands","storageType","_initializeStorage","_executeCommands","storage","StorageType","EA","Button","$element","DEFAULTS","loadingText","setState","state","d","is","resetText","setTimeout","addClass","removeClass","removeAttr","toggle","$parent","closest","prop","hasClass","toggleClass","button","option","$this","Constructor","$btn","Modal","$backdrop","isShown","remote","backdrop","keyboard","_relatedTarget","Event","relatedTarget","isDefaultPrevented","proxy","hide","transition","support","appendTo","offsetWidth","enforceFocus","one","focus","emulateTransitionEnd","hideModal","which","removeBackdrop","backdropMouseDownTarget","animate","doAnimate","currentTarget","modal","$target","Tooltip","enabled","timeout","hoverState","init","animation","placement","delay","getOptions","eventIn","eventOut","enter","leave","_options","fixTitle","getDefaults","getDelegateOptions","clearTimeout","hasContent","$tip","tip","setContent","autoToken","autoPlace","detach","css","top","left","insertAfter","pos","getPosition","actualWidth","actualHeight","offsetHeight","orgPlacement","docScroll","scrollTop","parentWidth","innerWidth","outerWidth","parentHeight","innerHeight","outerHeight","parentLeft","offset","height","right","calculatedOffset","getCalculatedOffset","applyPlacement","width","marginTop","parseInt","marginLeft","isNaN","replaceArrow","dimension","position","arrow","getTitle","complete","$e","getBoundingClientRect","o","$arrow","parentNode","enable","disable","toggleEnabled","removeData","tooltip","duration","called","transEndEventNames","transitionEnd","UNSUPPORTED_ENVIRONMENT","SUPPORTS_SCROLL_BEHAVIOR","__assign","Object","t","s","n","p","__read","m","Symbol","ar","next","getScrollingElement","scrollingElement","STYLE_ATTRIBUTE_PROPERTY_REGEXP","STYLE_ATTRIBUTE_PROPERTY_NAME","appendScrollBehaviorToStyleAttribute","behavior","addition","attributeValue","getAttribute","existingValueForProperty","parseScrollBehaviorFromStyleAttribute","replacementProperty","setAttribute","endsWith","styleAttributeValue","getScrollBehavior","inputTarget","scrollBehaviorPropertyValue","computedStyleValue","getComputedStyle","getPropertyValue","ease","k","cos","PI","NOOP","WeakMap","ELEMENT_ORIGINAL_SCROLL","Element","scroll","WINDOW_ORIGINAL_SCROLL","ELEMENT_ORIGINAL_SCROLL_BY","scrollBy","WINDOW_ORIGINAL_SCROLL_BY","ELEMENT_ORIGINAL_SCROLL_TO","scrollTo","WINDOW_ORIGINAL_SCROLL_TO","elementPrototypeScrollFallback","x","y","__adjustingScrollPosition","scrollLeft","elementPrototypeScrollToFallback","elementPrototypeScrollByFallback","getOriginalScrollMethodForKind","kind","ensureNumeric","parseFloat","isScrollToOptions","handleScrollMethod","optionsOrX","startTime","startX","startY","endX","endY","scroller","timeLapsed","distanceX","distanceY","speed","abs","scrollSnapFix","cachedScrollSnapValue","cachedScrollBehaviorStyleAttributeValue","secondaryScroller","secondaryScrollerCachedScrollSnapValue","secondaryScrollerCachedScrollBehaviorStyleAttributeValue","existingResult","release","scrollSnapType","cachedComputedScrollSnapValue","secondaryScrollerCachedComputedScrollSnapValue","hasReleased","eventTarget","resetHandler","disableScrollSnap","requestAnimationFrame","timestamp","percentage","positionX","positionY","smoothScroll","performance","now","Date","scrollX_1","scrollX","pageXOffset_1","pageXOffset","scrollY_1","scrollY","pageYOffset_1","pageYOffset","getSmoothScrollOptions","onScrollWithOptions","TypeError","normalizeScrollCoordinates","getScrollToOptionsWithValidation","getParent","currentElement","nodeType","ShadowRoot","host","Node","canOverflow","overflow","isScrollable","clientHeight","scrollHeight","clientWidth","scrollWidth","overflowY","overflowX","findNearestAncestorsWithScrollBehavior","getLocationOrigin","locationLike","origin","port","protocol","hostname","ID_WITH_LEADING_DIGIT_REGEXP","ELEMENT_ORIGINAL_SCROLL_INTO_VIEW","scrollIntoView","alignNearest","scrollingEdgeStart","scrollingEdgeEnd","scrollingSize","scrollingBorderStart","scrollingBorderEnd","elementEdgeStart","elementEdgeEnd","elementSize","computeScrollIntoView","block","inline","viewportWidth","visualViewport","viewportHeight","viewportX","viewportY","_a","targetHeight","targetWidth","targetTop","targetRight","targetBottom","bottom","targetLeft","targetBlock","targetInline","_b","frameStyle","borderLeft","borderLeftWidth","borderTop","borderTopWidth","borderRight","borderRightWidth","borderBottom","borderBottomWidth","blockScroll","inlineScroll","scrollbarWidth","scrollbarHeight","ELEMENT_ORIGINAL_SCROLL_TOP_SET_DESCRIPTOR","getOwnPropertyDescriptor","ELEMENT_ORIGINAL_SCROLL_LEFT_SET_DESCRIPTOR","SUPPORTS_ELEMENT_PROTOTYPE_SCROLL_METHODS","normalizedOptions","ancestorWithScroll","ancestorWithScrollBehavior","top_1","HTMLElement","defineProperty","isTrusted","HTMLAnchorElement","search","parent_1","findNearestRoot","elementMatch","getElementById","querySelector","mixins","interface","props","_proxy","getInstance","hasInstance","ignorePrevious","_previousInstance","_instance","register","deferred","promise","awaiting","implementation","adapterInterface","fnName","proxyAdapter","adapters","pair","hasRegistered","allowFlash","allowHttpsMediaServerConnections","allowIPv6ServerConnections","allowMediaServerRelayConnections","allowMultipleWebSocketConnections","shouldCreateFlexModels","shouldCreateStateTree","shouldRequestHTMLFromCloudProvider","allowCloudPubSub","allowLoopbackDiscovery","allowSSO","bufferingDetectionLimit","allowSyncSettings","allowSync","allowDirectDownload","allowSyncDownload","_map","bindToModel","binding","bindingsModel","modelListeners","modelAttribute","modelListener","renderBinding","_bindingListeners","unbindFromModel","$selector","formatter","isHtml","autohide","hiddenClass","hideToggle","manual","getHeaders","headers","responseType","accept","Accept","originalSync","xhrOptionsModel","server","getXHROptions","provider","getXHROptionsModel","xhrUrl","dataString","useExtendedTimeout","xhrOptions","response","BaseClass","range","createTextRange","moveToElementText","getSelection","selection","createRange","selectNodeContents","removeAllRanges","addRange","MarionetteViewProto","MarionetteCollectionViewProto","MarionetteRegionProto","MarionetteRegion","MarionetteLayoutProto","BaseView","wrapAfterRender","listenViewEvents","stopListeningViewEvents","viewEvents","_viewEventsListeners","_viewInstance","log","bindAllWhenRendered","assert","fnNames","whenRendered","boundFn","onlyAfterRender","_getImmediateChildren","_getNestedViews","memo","BaseCollectionView","rebase","_parentView","BaseCompositeView","BaseRegion","prepend","_updateParentView","_triggerAttached","attachedViews","attachedView","BaseLayout","regionsWithParentView","compact","appModel","onPrimaryServerChange","supportsRetry","primaryServer","servers","isValidServer","supportsLongPolling","allowMultipleConnections","allowAppendingHeaders","ServerEventConnection","connections","_serverRetryManager","ServerRetryManager","retryServerConnections","logFormat","onServerResolvedChange","onServerRejectedChange","onServerRemove","onServersReset","stopAll","disconnectAll","previouslyConnected","connect","then","connection","appendHeaders","onOpen","onClose","socket","pollUrl","disconnect","tryConnectServer","isResolved","isRejected","mergedServer","previousServers","maximumDelay","_serversBeingRetried","attempt","_scheduleRetry","retry","serverCID","populatePromise","isPopulating","_fetch","rid","failedPopulatePromise","resolveWith","fail","rejectWith","currentState","enterState","previousState","stateDefinition","states","previousStateDefinition","onExit","onEnter","to","enterNextState","nextState","initialState","instanceOptions","_context","cacheKey","getContext","contextName","setContext","pageStart","pageSize","populated","resetPopulatePromise","skipCache","_initState","getItemCacheKey","cachedInstance","uninitialize","onlyIfCached","store","toState","updateState","onCollectionChange","onStateChange","hasContext","getState","previousRawState","reduceState","acc","shouldUpdateModelState","syncUrl","pageParams","convert","augmentResponseText","MediaContainer","augmentResponse","rootPropertyName","cloneOptions","persistInCache","cloneDeep","clonedModels","abortPendingPopulate","getSaveParams","shallowChangeRegEx","getContextName","member","populateMixin","responseTypes","hasInitialRelations","deferredInitialize","getContextNames","findOption","_initModel","entityID","entities","entityType","mergeStrategy","isMergingAttributes","_getRelations","syncedRelations","updateEntity","_initRelations","_initDerived","_relationListeners","allRelations","sessionRelations","relationDefinition","relationKey","_initRelation","relationListener","RelationClass","_resolveRelationDefinition","relationClass","relationInstance","previousInstance","isValidInstance","_forwardRelationEvents","derivedAttrs","_setDerived","onEvent","boundDerivedAttrs","possibleDerivedAttrs","nextAttrs","hasDerived","_relationDefinition","relation","getScopedKey","_computedEntityID","dispatcher","possibleEntityContainers","enumerable","shouldUpdateRelationState","syncedAttrs","whitelisted","isExcludedAttr","excluded","isSessionRelation","isSyncedRelation","isSyncedOnlyViolation","syncedOnly","json","excludeRelation","relationJSON","excludeDefaults","relationModel","toRelationJSON","copy","copyModel","restoreDefaults","overrideAttrs","_value","isCollectionMerge","_mergeAttributes","hasAttr","attrName","hasSessionAttr","sessionAttrs","hasSyncedAttr","hasRelation","relationName","hasSessionRelation","hasSyncedRelation","definitions","errorMessage","_validateTypes","hasResponseOnSave","parseResponseText","parseResponse","typeOptions","typeName","relationOptions","saveOptions","originalSuccess","successOptions","syncOptions","saveAttrs","_getSaveAttrs","attrKey","collectionModel","stringifyOptions","startCapturingChangeEvents","releaseCapturedChangeEvents","originalSet","changeEvents","silentOptions","changedValue","changedKey","_derivedListeners","derivedListener","derivedKey","derivedValue","discardCapturedChangeEvents","changeEvent","spyOnGet","originalGet","dispatch","action","_nextAttributes","relations","relatedData","isCollection","parser2","relationAttrs","unchangedEvents","stateUpdateScheduler","onRelationEvent","_addDerivedListener","resolvedDefinition","shouldSave","errorMessages","attrTypes","typeValidator","join","attributeName","BaseCollection","section","channel","device","allowInCache","cached","xml","elements","subclass","BaseModel","preserveCachedAttributes","whitelistedAttrs","force","ModelClass","coreTypes","isAny","createAttrType","validator","isRequired","boolean","integer","Number","isInteger","float","string","object","list","encodedString","queryString","instanceOf","classes","klass","oneOf","possibleValues","oneOfType","types","custom","getAttrTypeFor","len","attrType","initialConfigState","testPrivateConnectionsWhenPublicAddressDoesNotMatch","allowMixedContent","allowBaseImagePreloading","allowBaseImageBlobs","heartbeatInterval","allowManualServers","allowMobileServers","allowMultiTrackAudio","maximumConcurrentConnectionTests","requiresSignIn","requiresPlexPass","myPlexAccessToken","shouldCreateNewSessionWhenSeekingLiveTV","shouldPreferInsecureLocalConnections","allowLiveTVPlayback","seekDebounceMilliseconds","allowAdsOverMedia","PLEXWEB","freeze","AbstractModel","network","AbstractCollection","isBackShortcut","includeFiles","home","truncatedFilesCount","paths","files","File","MetadataCollection","uriPath","includeRelated","urlRoot","saveUrl","Playlist","parser","isPlaylist","findItem","playlistItemID","moveItem","itemID","afterItemID","after","xhrDeferred","afterItem","spliceAt","removeItem","toString","addContent","segments","smart","playQueueID","uri","contentUtil","isLibraryItem","isPlexMusicItem","VersionGeneratorModel","proxyTypes","changedModel","active","startOffset","endOffset","text","spans","line","preserveMergeStrategy","format","follow","lyricsError","streamType","selected","codec","minLines","timed","lines","exclusiveBoolAttr","internal","entityTypes","PLAY_QUEUE_ITEM","createEntityID","playQueueItemID","ModelCache","isPlayQueueItem","isLocal","queueIndex","ratingKey","subtype","advertisement","allowSkipAfter","librarySectionID","hasPremiumLyrics","displayPostplay","syncItemId","generatorID","generatorType","clientIdentifier","metadataItem","MetadataModel","lyricsStreams","vast","postPlay","HubCollection","playQueueAttributes","Ad","mediaItem","Media","part","Part","streams","Stream","lyricsType","streamTypes","stream","selectedItem","mediaType","owned","hasUserAdditions","playQueueVersion","metadataElementNames","onMessageChange","_ajax","pendingChanges","parseItems","Metadata","selectedIndex","playQueueSelectedItemID","firstIndex","playQueueSelectedItemOffset","identifier","mediaTagPrefix","mediaTagVersion","totalSize","playQueueTotalCount","availableRange","getUpNextRange","startIndex","endIndex","lastAddedItemID","lastAddedItem","lastAddedIndex","getCurrentItem","selectedItemId","videoQuality","videoResolution","maxVideoBitrate","audioBoost","subtitleSize","musicBitrate","photoQuality","photoResolution","processingState","processingStateContext","paginatedListModelMixin","collectionName","generator","getPaginatedUrl","currentPageStart","currentPageSize","populatedRange","viewGroup","metadataItems","parseOptions","startPopulatedRangeMonitor","responseText","replaceMetadataXMLElementNames","scope","unwatched","failureCode","failure","itemsCount","itemsCompleteCount","itemsSuccessfulCount","itemsFailedCount","itemsDisabledCount","playlistID","composite","targetTagID","locationID","Location","Device","status","policy","mediaSettings","defaultCounts","warningCounts","Item","MediaSettings","isDirectory","policyValue","policyScope","advanced","filterType","FilterOptionCollection","includeAdvanced","field","fastKey","standalone","getUrlParams","urlParams","filters","Directory","query","filterOption","toLowerCase","filterOperators","unviewedLeafCount","MetadataListModel","subsetID","folderKey","getParams","replaceSpecialFilterOperators","getFilterParams","typeID","getMetadataTypeID","getSort","supports","timelineState","subset","SortModel","operator","getSupportedResponseType","secondary","secondaries","linearFilter","typeString","plural","whitelistedPrimaryKeySubsets","primaries","LIBRARY","isSection","isCollectionsPopulated","currentFilters","currentFolderKey","settings","ServerSettingCollection","uuid","thumb","art","createdAt","updatedAt","allowAdvancedFilters","refreshing","agent","scanner","language","importFromiTunes","enableAutoPhotoTags","downloadMedia","currentFirstCharacter","currentType","currentSort","FilterCollection","SortCollection","currentSubset","updateMediaTypes","sectionTypes","sectionType","titles","currentFilter","agents","scanners","defaultAgents","defaultAgent","currentAgent","defaultScanners","defaultScanner","currentScanner","relatedTypes","directions","ASCENDING","DESCENDING","descKey","isDefault","defaultDirection","activeDirection","firstCharacterKey","default","responseContext","HubModel","hubKey","excludeFields","excludeElements","hubCount","includeEmpty","libraryHubsOnly","includeFeaturedTags","includeLibraryPlaylists","includeMeta","includeGames","includeStations","includeExternalMedia","includeExternalMetadata","includeRecentChannels","asyncAugmentMetadata","excludes","toUpperCaseFirstLetter","fetchOptions","onlyTransient","Hub","Meta","hub","CONTENT_HUBS","String","more","hubIdentifier","source","summary","icon","attribution","random","browse","upNext","promoted","autoAdvanceDelayMs","metadataList","onPopulatedRangeChange","containerKey","listModel","splitByType","byType","operators","subType","sorts","fields","DisplayFields","fieldTypes","METADATA_LIST","entityKey","paginatedUrl","excludeAllLeaves","includeCollections","isMetadataList","containerTitle","isPending","isPopulated","isDirectoryList","isMetaPopulated","banner","theme","meta","firstItem","getCollection","firstItemType","firstItemSubtype","isFirstItemLibraryItem","isChannelsList","_totalSizeAdjustment","onContainerKeyChange","includeDirectories","directoryItems","allowAllLeaves","isAllLeaves","title1","progress","throttled","videoDecision","audioDecision","videoCodec","audioCodec","audioChannels","transcodeHwDecoding","transcodeHwEncoding","timeStamp","minOffsetAvailable","maxOffsetAvailable","tag","startTimeOffset","endTimeOffset","venue","city","country","unreliableAttributes","guid","librarySectionTitle","librarySectionUUID","librarySectionKey","Context","file","tagline","attributionLogo","backgroundColor","getStreamCount","mediaItems","streamCount","mediaItemsLength","parts","partsLength","getLiveTVMediaItems","mapToObject","getLiveTVMediaItemID","isFullTag","tryConvertToString","METADATA_ITEM","sourceServerEntityID","serverIdentifier","getIdentifiersFromSource","SERVER","previousValue","nextValue","providerProtocols","isMediaLiveTVOrigin","previousMediaItems","nextMediaItems","mergedMediaItemsByID","previousMediaItem","nextMediaItem","Overlay","prevStreamCount","nextStreamCount","mergeLiveTVMedia","previousStreamCount","mergeMetadataMedia","mergeMediaAttribute","isArrayAttribute","firstPreviousTag","firstNextTag","isFirstPreviousTagFull","isFirstNextTagFull","mergeTagAttribute","isRelation","extractChildrenKey","isInUniversalWatchlist","isInUniversalWatchlistFetched","isPreFetched","isStreamChangeInProgress","isStreamDeleteInProgress","metadataState","mediaState","isSettingsUpdating","settingsUpdateError","dvrChannel","viewCountIncrementedByPlayQueueItemID","downloadSubscriptionID","isDownloaded","elementName","parentRatingKey","grandparentRatingKey","childrenKey","parentKey","grandparentKey","primaryExtraKey","augmentationKey","primaryGuid","sourceURI","remoteMedia","titleSort","originalTitle","parentTitle","grandparentTitle","year","minYear","maxYear","studio","contentRating","originallyAvailableAt","parentThumb","grandparentThumb","parentArt","grandparentArt","hero","parentTheme","grandparentTheme","chapterSource","ratingImage","audienceRating","audienceRatingImage","directory","rating","userRating","playbackSpeed","parentIndex","absoluteIndex","preview","viewOffset","viewCount","childCount","leafCount","viewedLeafCount","ratingCount","mediaCount","mediaCountOptimized","extraType","lastViewedAt","lastRatedAt","addedAt","deletedAt","Geolocation","playlistType","specialPlaylistType","radio","readOnly","content","durationInSeconds","skipChildren","skipParent","skipDetails","subscriptionID","saved","picked","grandparentSubscriptionID","subscriptionType","grandparentSubscriptionType","Channel","onAir","watchlistedAt","publicPagesURL","Director","Producer","Writer","Studio","Genre","Mood","Country","Label","Role","Tag","Autotag","Marker","indirect","Origin","requiresConsent","Platform","Publisher","chapters","preferences","MediaSettingCollection","onDeck","relatedOptions","popularLeaves","extras","concerts","stations","transcodeSession","providerIdentifier","PROVIDER","metadataTypes","premium","playlistTypes","downloadKey","download","resolveUrl","appendToken","_populatedParams","usePopulatedParams","metadata","callSign","related","Related","OnDeck","Stations","Preferences","convertMediaItems","convertRole","convertMarkers","createSourceFromIdentifiers","RelatedHubs","Setting","overlay","exists","accessible","addNoneSubtitlesStreams","roleItems","role","markerItems","marker","subtitleType","isLiveTVMediaItem","getSelectedVideo","subtitles","sub","selectedSubtitles","none","mediaIndex","locations","getFilepath","providerIdentifiers","metadataKey","agentIdentifiers","_populateDeferred","_resetPopulate","augment","fixResult","allowEmpty","a","b","targetRange","getCollectionName","updatePopulatedRange","getCollectionChangeEvents","decrementTotalSize","isStartDifferent","isSizeDifferent","reloadThreshold","populateRange","fetchRange","minSize","previousStart","previousSize","Infinity","ProviderModel","user","mappedFeatures","userHasUniversalWatchlist","features","augmentProviderCollection","providerFeatureTypes","directories","pivots","pivotTypes","augmentWithSyntheticHomeProvider","hidden","reverseKey","requires","libraryKey","scannedAt","isSettingsPending","isSettingsPopulated","settingsError","scrobbleKey","unscrobbleKey","flavor","automaticLibraryFolders","public","storageTotal","ProviderSettingCollection","actions","actionsFeature","feature","Action","providerActionIDs","getRecommendedPivot","metricsContexts","getLibraryPivot","createLibraryPivotKey","isContent","getCollectionPivot","collectionType","getPlaylistRoute","playlistMetadataType","sectionID","getPlaylistsPivot","hasLiveTVProtocol","protocolsString","hasFeature","featureType","isTypeMatch","isLibraryTypeMatch","getHeadersForProviderIdentifier","getProviderTextFormat","serverEntityID","createProviderEntityID","parentID","baseURL","sourceTitle","protocols","subscriptions","epgSource","ProviderFeatureCollection","normalizeProviderDataIdentifier","pathToResolve","serverOptions","baseUrl","isAbsoluteUrl","MediaProvider","Feature","isLibraryProvider","playlistsIndex","directoryKey","synthesizeDirectoryID","Pivot","getSyntheticPivots","pivot","isVODProvider","playlistDirectory","code","postalCodeFormat","ProviderEPGChannelModel","providerSettingIDs","valueParsers","int","bool","double","isOptionsPending","isOptionsPopulated","optionsError","isLocationsPending","isLocationsPopulated","locationsError","isLineupPending","isLineupPopulated","lineupError","countryLabel","label","multiselect","postalCode","required","selectedCount","step","enumValues","lineup","ProviderEPGChannelCollection","recentChannelsInGrid","valueParser","isChannelsPending","isChannelsPopulated","channelsError","selectedSource","isSaving","saveError","lastSeenAt","make","modelNumber","sources","tuners","unsupported","prefs","MediaGrabberDeviceModel","devices","createResponseType","languages","isPrimary","hasPrefs","order","CollectionCache","primaryAgentID","mediaTypeID","relatedAgentID","hasExclusiveAgent","exclusiveAgents","allowHttps","availableConnections","connectionComparator","activeConnection","isBetter","relay","knownSubnet","address","subnet","requiredBoolean","currentTest","abort","testState","connectionTestStates","isBundled","isFallback","scheme","ip","clonedAttrs","onSourcesChange","delimiter","substring","getIpAddressFromPlexDirectAddress","sourceID","remoteAccessState","REMOTE_ACCESS_STATE_CONNECTING","REMOTE_ACCESS_STATE_DISCONNECTING","REMOTE_ACCESS_STATE_UNREACHABLE","REMOTE_ACCESS_STATE_OK","REMOTE_ACCESS_STATE_UNKNOWN","username","mappingState","MAPPING_STATE_UNKNOWN","MAPPING_STATE_WAITING","MAPPING_STATE_MAPPED","mappingError","signInState","SIGN_IN_STATE_OK","publicAddress","publicPort","privateAddress","privatePort","subscriptionActive","subscriptionState","signedIn","MyPlex","isUnreachable","isOk","PLAYLIST_ITEM","playlist","isPlaylistList","playlists","pseudo","PENDING","CONNECTED","UNAVAILABLE","UNAUTHORIZED","promiseStates","RESOLVED","REJECTED","serverClasses","SECONDARY","legacyOwnerFeatures","ServerModel","controlledPopulateMixin","machineIdentifier","createServerEntityID","connectionTestTimeout","connectionTestResult","connectionTestResults","promiseState","sections","SectionCollection","isShared","isCloud","isMerged","isEmbedded","isInstallingServerUpdate","superToken","accessToken","publicAddressMatches","httpsRequired","presence","ownerId","hasEventConnection","serverClass","onlyXML","isProvidersPending","isProvidersPopulated","providersError","ConnectionModel","ConnectionCollection","providers","ProviderCollection","friendlyName","startState","version","platform","platformVersion","backgroundProcessing","multiuser","transcoderLyrics","myPlex","myPlexMappingState","myPlexSigninState","MY_PLEX_SIGN_IN_STATE_OK","MY_PLEX_SIGN_IN_STATE_NONE","myPlexSubscription","myPlexUsername","transcoderPhoto","transcoderAudio","transcoderVideo","transcoderVideoRemuxOnly","transcoderSubtitles","transcoderActiveVideoSessions","allowMediaDeletion","allowChannelAccess","diagnostics","companionProxy","updater","isDesktop","photoAutoTag","itemClusters","countryCode","ownerFeatures","mediaProviders","maxUploadBitrate","maxUploadBitrateReason","maxUploadBitrateReasonMessage","streamingBrainABRVersion","livetv","audiobook","games","hasOnlyLoopbackConnection","shortVersion","isHttps","isVersionOrNewer","isClaimed","onMachineIdentifierChange","onConnectionRemove","onConnectionsReset","useRelativeUrl","getLoopbackPort","token","allowHeadersInUrl","allowBlacklistedMethodHeaders","dimensions","dimensionsAdapter","connectionAttrs","existingConnection","hasSource","isDirect","isTested","testConnection","isUntested","isAborted","isRelayed","onConnectionTestSuccess","onConnectionTestError","abortConnectionTest","_identityPromise","debugName","cachedServer","cachedServerDebugName","addConnection","featureFlag","minVersion","serverFeatures","serverVersion","regression","isVersionOrNewerThanIntroduced","introduced","isVersionOrNewerThanResolved","resolved","hasLoopbackServer","isPrivate","_resolve","_reject","resolvedAttrs","_resolvePopulate","hasOnlyFailedConnections","isUnauthorized","rejectedAttrs","_rejectPopulate","bestConnection","getBestConnection","testAllConnections","updateCacheKey","_checkActiveConnection","isPrivateConnection","hasLoopbackConnection","isLoopback","hasOtherLoopbackServer","getLoopbackAttributes","populateIdentity","always","hasFailedEveryDirectConnection","testOnlyUntestedRelayConnections","addFlexModel","parseValueType","settingsTypes","group","valueStr","setting","playlistArtEditing","gridPagination","playlistPosterEditing","v4DVRSetup","gracenoteAttribution","firstCharacterKeySortDirection","pivotIDs","freeLiveTVDVRSettings","augmentedHubsInRelatedHubs","simpleRelatedKey","transientTokenProxy","mediaProvidersServerRoot","streamDisplayTitles","bundledWebAppNewSettingsRoutes","softSubtitlesWithDirectPlay","truePlaylistsPath","optimizeDatabaseActivity","asyncCheckFiles","decisionEndpoint","defaultSections","replaceTranscodeTarget","quickSearch","claimServer","searchSpecificType","linkedYearMetadata","streamReady","syncOriginalQuality","allPartsStreamSelection","sharedChannels","shortenTranscodeURL","editSimilarArtists","neuterRedirect","audioAsVideo","compositeDelete","batchEdit","premiumMusic","transientToken","softSubtitles","sharedSyncStatus","reachability","photoPlayQueues","publicNowPlaying","labels","playItemsBatchAdd","imageFilters","hubFilterSigns","cancelAllUpdates","playQueues","sectionSettings","hubFilters","streamingMKV","chunkedHTTP","sharedSync","dash","specificMediaDeletion","sharedSettings","syncNotifications","universalMusicTranscoder","universalTranscoder","artworkUpload","firstRunPref","cleanBundles","advancedFilters","splitApart","_getStorageAdapter","serialized","_serialize","_getStorageKey","_logError","storageKey","additionalRelations","_copy","fromModel","toModel","isCapturingChangeEvents","_copyAttributes","_copyRelations","included","fromRelation","toRelation","StoredModel","StoredServerModel","UserSettingModel","isDirty","authToken","anonymous","email","pin","restricted","guest","hasAllEntitlements","lastPrimaryServerID","UserSubscriptionCollection","roles","UserRoleCollection","entitlements","UserEntitlementCollection","services","UserServiceCollection","UserFeatureCollection","experienceSettings","AbstractStorageModel","activeUserID","users","debouncedSaveTimeout","storedUsers","activeUser","getActiveUser","clearSensitiveAttributes","mediaGrabOperation","beginsAt","startOffsetSeconds","mediaSubscriptionID","channelTitle","linkedKey","rolling","isLibraryMetadataItemPending","isLibraryMetadataItemPopulated","libraryMetadataItemError","conflicts","libraryMetadataItem","endsAt","jsonRoot","Conflicts","MediaGrabOperation","responseMetadata","responseMedia","responseMediaIndex","metadataItemEntityID","mediaItemIDs","responseMediaItem","findIndex","mediaItemID","INT","TEXT","BOOL","DOUBLE","ENUM","User","invitedEmail","responseUpdatedAt","isResponseNewerVersion","subscriptionTypes","subscriptionStates","mode","HomeHubProviderModel","FORWARDED_PROVIDER_ATTRS","HomeHubServerModel","FORWARDED_SERVER_ATTRS","FORWARDED_HUB_ATTRS","directoryID","isHidden","hiddenAt","hasCustomizations","hasSeededPreferredServerContent","hasSeededProviderPromotedContent","preferredServerID","settingsKey","hubs","sourceType","directoryIcon","serverFriendlyName","serverSourceTitle","providerSourceTitle","detail","isFullOwnedServer","hasCompletedSetup","pinnedSources","sidebarPreferredSourcesSavedEnteredPath","autoHomeHubsEnabled","shouldSaveLastSourcePivots","lastSourcePivots","savedPivotParams","disabledUniversalSearchIdentifiers","autoPinnedProviders","dismissedUpsellModals","homeSettings","sidebarSettings","startTypeIndex","startEntityIndex","currentTypeIndex","currentEntityIndex","searchForEntityID","isPlainObject","searchInObject","arr","searchInArray","incrementIndex","limit","isFullscreen","CHANGE_COMPANION_SERVER","payload","serverModel","REMOVE_COMPANION_SERVER","GARBAGE_COLLECT_ENTITIES","garbage","processingBudget","budget","allEntities","allEntityTypes","numTypes","startingEntities","entityIDs","numIDs","nextTypeIndex","nextEntityIndex","garbageCollectEntities","collectedIDs","NAVIGATE_FORWARD","NAVIGATE_HOME","NAVIGATE_SEARCH","SAVE_LAST_SOURCE_PIVOT","sourceKey","createKey","pivotKey","CLEAR_LAST_SOURCE_PIVOTS","SAVE_PIVOT_PARAMS","pivotParamsKey","SAVE_DEVICE_SETTINGS","DISCOVER_SERVERS","DISMISS_UNCLAIMED_SERVER","dismissedUnclaimedServers","saveDeviceSettings","SET_PRIMARY_SERVER","findServer","isWaitingForPrimaryServer","RESET_PRIMARY_SERVER","CHANGE_PRIMARY_SERVER","NAVIGATE","descriptor","prependHashBang","resolveDescriptor","NAVIGATE_PRE_PLAY","providerModel","getPrePlayRoute","REDIRECT_TO_ROUTE","navigateToRoute","REDIRECT_TO_URL","TOGGLE_FULLSCREEN","UPDATE_AVAILABLE","isUpdateAvailable","SELECT_AUDIO_DEVICE","UPDATE_AUDIO_DEVICES","POPULATE_CLOUD_SERVER","populate","UPDATE_NAVIGATION_HISTORY","navHistory","NAVIGATE_BACK","newNavHistory","actionCreator","actionHandlers","getModel","onResolved","onRejected","keyTitle","pendingKey","populatedKey","errorKey","previousPending","aborting","xhrErrorFilter","createControlledFetchHandler","instance_","fetchActionCreator","providerEntityID","itemServerModel","itemProviderModel","itemServer","itemProvider","legacyMetadataItem","metadataItemState","sourceServerIdentifier","sourceProviderIdentifier","metadataItemModel","includeParams","includePreferences","includeExtras","includeOnDeck","includePopularLeaves","Concert","includeConcerts","Chapter","includeChapters","htmlProviders","libraryID","libraryType","cancel","allowMetrics","metricsProperties","trackClick","cloudServer","strong","jsonResponse","responseJSON","xmlResponse","errors","getMessage","ErrorContexts","Subscription","SendRecoveryCode","getServerErrorMessage","getLibraryIDFromContentDirectory","contentDirectoryModel","substr","findContentDirectoryModel","contentFeatureModel","findAttrs","contentDirectory","getContentDirectoryKey","contentFeatureKey","refreshProviders","FETCH_CLOUD_PROVIDERS","POPULATE_CLOUD_PROVIDERS","fetchCloudProviders","FETCH_PROVIDER","POPULATE_PROVIDER","fetchProvider","CLEAR_ADD_TO_CATALOG_ERROR","ADD_TO_CATALOG","addToCatalogModalModel","actionKey","isUpdating","fileURL","blobXHR","XMLHttpRequest","onload","formData","FormData","URL","revokeObjectURL","send","channelURL","showModel","SCAN_LIBRARY_FILES","metricsPage","EDIT_LIBRARY","libraries","libraryModel","EMPTY_LIBRARY_TRASH","ANALYZE_LIBRARY","DELETE_LIBRARY","async","UPGRADE_LIBRARY","refreshMetadata","activity","setPrimaryServer","resources","retriesLeft","times","timer","maxDuration","promiseGeneratingFn","tryAgain","retryTimes","pollForResource","isMediaProvidersRoot","ensurePrimaryServer","cloudAccount","claimServerHandler","authCodeExchangeModel","getAuthCodeExchangeModel","isBusy","metrics","trackEvent","metricsEvents","interaction","CLAIM_SERVER","SIGN_IN_THEN_CLAIM_SERVER","userModel","signIn","getAuthXHRErrors","getSignInErrorMessage","SIGN_OUT_SERVER","cloudAccountModel","CREATE_PIN","pinPromise","createPIN","pinID","fatalErrorMessage","AlertBarView","dvrSettingsRoute","getServerSettingsRoute","appStore","deviceID","disableDevice","ConfirmModal","onRender","trackView","metricsActions","serverName","escapedServerName","trackAction","updateSettingModel","settingModel","TEST_SERVER","TEST_SERVERS","START_ACTIVITY","serverFlexModel","synthetic","finishSyntheticActivity","activityType","UPDATE_ACTIVITY","FINISH_ACTIVITY","START_SYNTHETIC_ACTIVITY","startActivity","FINISH_SYNTHETIC_ACTIVITY","activities","syntheticActivity","EVENT_CONNECTION_OPEN","EVENT_CONNECTION_CLOSE","FETCH_PROVIDERS","createFetchHandler","POPULATE_PROVIDERS","createPopulateHandler","fetchProviders","FETCH_LIBRARIES","POPULATE_LIBRARIES","fetchLibraries","REDISPATCH_LEGACY_SERVER_ACTION","getLegacyActionModels","legacyType","legacyAction","legacyPayload","FETCH_SETTINGS","POPULATE_SETTINGS","fetchSettings","UPDATE_SETTING","SAVE_SETTING","CONFIRM_RELAY_CONNECTION","reminders","getReminderID","ReminderType","reminder","iso8601","getTime","relayConfirmationModal","ADD_HTTP_FALLBACK_CONNECTION","allowHttpFallbackSetting","capabilities","hasAllowedAllFallback","httpFallbackOptions","hasAllowedSameNetworkFallback","canServerAllowHttpFallback","httpConnection","ADD_LIBRARY","EditSectionModal","redirect","START_LIBRARIES_REFRESH","library","refreshLibrary","ALLOW_HTTP_FALLBACK","allowHttpFallback","testServer","OPTIMIZE_DATABASE","useActivity","startSyntheticActivity","activityTypes","optimizeDatabaseError","hideAlerts","CLEAN_BUNDLES","cleanBundlesError","EMPTY_TRASH","promises","alertTypes","DELETE_SERVER","cloudServerModel","resource","DISCOVER_MEDIA_GRABBER_DEVICE","dvrSettingsUIModel","mediaGrabberDeviceDiscoveredAlertBarView","POPULATE_HAS_ITUNES","hasiTunes","isHasiTunesPopulated","updaterCheckRequest","isChecking","update","getUpdaterApplyRequest","install","dismissServerUpdateVersion","dismissedServerUpdateVersions","FETCH_SERVER_UPDATE_STATUS","CHECK_FOR_SERVER_UPDATE","DISMISS_SERVER_UPDATE","skip","fetchServerUpdateStatus","DOWNLOAD_SERVER_UPDATE","INSTALL_SERVER_UPDATE","confirmModal","confirmLabel","cancelLabel","findDVRSettingsUIModel","sendReloadGuideRequest","dvrID","FETCH_DVRS","INIT_DVR_SETTINGS_UI","currentDVRs","isUIPopulated","dvrs","hasOwnerFeature","fetchDVRs","CLEAR_DVR_SETTINGS_UI","RELOAD_GUIDE","CANCEL_RELOAD_GUIDE","findDVRSetupModel","findDVR","findDVRs","getDevice","dvrSetupModel","dvrDevice","SAVE_DVR_SETTINGS","dvr","dvrPrefs","pref","CLEAR_DVR_SETTINGS_SAVE_ERROR","devicePrefs","SAVE_DEVICE_TITLE","CLEAR_DEVICE_SETTINGS_SAVE_ERROR","SET_DVR_DEVICE_ENABLED","findIndexByTime","formattedTime","date","time","currentIndex","minIndex","maxIndex","lineA","lineB","lineTimeA","lineTimeB","dateString","addLogLineHelper","logLine","logLines","serverLogPageModel","filterLogLine","timeFilterStart","timeFilterEnd","logLevels","getServerLogPage","createFilterRegExps","str","timeFilterStartIndex","timeFilterEndIndex","level","logLineDate","startDate","endDate","parseServerLogTimestamp","isAfter","isBefore","regexps","regexp","thread","updateLogLines","unfilteredLogLines","_unfilteredLogLines","filterLogLines","unfilteredLogLinesCount","isTimeFilterStartValid","isTimeFilterEndValid","TEXT_LOG_LINE_TO_LOG_LINE_REGEX","LOG_LEVEL_NAMES_TO_LEVELS","ERROR","WARN","INFO","DEBUG","VERBOSE","textLogLineToLogLine","textLogLine","trim","createActionHandler","ADD_LOG_LINE","isFiltered","originalFilteredLength","CHANGE_TEXT_FILTER","CHANGE_TIME_FILTER","showTimeFilter","CLEAR_FILTER","RESET_LOG_LEVELS","TOGGLE_LOG_LEVEL","nextLogLevels","logLevel","CLEAR_LOG","highlightedLineIndex","showRawText","LOAD_LOG_FILE","TOGGLE_TIME_FILTER","TOGGLE_RAW","HIGHLIGHT_LINE","alert","SHOW_ALERT","createAndSetPIN","expiresIn","pinTimeout","stopPolling","RESET_AUTH_CODE_EXCHANGE","READ_STORED_PIN","authTokenPromise","shouldCreatePIN","PRELOAD_PIN","BEGIN_POLLING","expectedPIN","schedulePoll","_poll","STOP_POLLING","SKIP_SIGN_IN","skipSignIn","webhooks","urls","arrayFormat","minDuration","addDays","INTERVALS","timesReminded","isConnected","restrictionProfileTypes","defaultUsername","pixelRatio","getPixelRatio","round","poster","disabled","posterImage","backgroundImage","background","blur","opacity","placeholderClass","restrictionProfile","hasHomeLibraryAccessLabels","userHasFeature","managedLabel","onClick","digitContainer","input","digits","loading","removeBtn","saveBtn","pinForgotLink","userList","isForced","isEditing","isEditWarning","showBackButton","openAddManagedUser","focusDelay","isEditConfirmation","isOpeningAddManagedUser","hasCurrentPIN","focusInput","getPIN","editPIN","isDisabled","savePIN","removePIN","isManagedUser","defaultSaveParams","currentPin","removePin","finalParams","pinUrl","hashPIN","hasHome","confirmUser","homeUser","allowGuestLock","renderPIN","showPin","character","browser","onKeyDown","keyCode","onInput","lastCharacter","onKeyUp","onFocus","onBlur","onInputsAnimationEnd","onBackClick","onRemoveClick","onSubmit","onSaveKeyDown","onPINClick","IconAdd","svgProps","propTypes","iconAdd","renderComponentToString","BaseList","showAddUser","adminModel","homeUsers","onUserPopulated","onError","showList","admin","onUserSelect","selectUser","switchPromise","switchUser","onHomeUsersPopulated","userStorageModel","protected","HomeUserCollection","BaseModal","transparent","panes","alertBar","showPane","paneType","currentPane","pane","PaneConstructor","onChangePane","onResolve","onReject","showAlertBar","alerts","onHide","requestSettingSync","canShareSyncSettings","getUpdatedAtForSetting","settingID","matchedSetting","getUserModel","getSidebarSettings","FETCH_USER_FEATURES","POPULATE_USER_FEATURES","fetchUserFeatures","SAVE_SUBTITLE_COLOR","saveExperienceSettings","SAVE_SUBTITLE_POSITION","SAVE_SUBTITLE_SIZE","SAVE_AUTO_PLAY","CHANGE_PREFERRED_SERVER","getHomeSettings","saveHomeSettings","FETCH_ALL_FRIENDS","POPULATE_ALL_FRIENDS","fetchAllFriends","FETCH_HOME_USERS","POPULATE_HOME_USERS","fetchHomeUsers","FETCH_PLANS","POPULATE_PLANS","fetchPlans","CLEAR_UPDATE_USER_ERROR","UPDATE_USER","userFlexModel","avatar","isUpdatingUser","updateUserError","avatarBlob","base64ImageStringToBlob","updateAvatar","userUrl","experimentalFeatures","opt_in","setAttrs","errorsArray","FETCH_WEBHOOKS","ADD_WEBHOOK","REPLACE_WEBHOOK","oldUrl","newUrl","webhook","isUpdatingWebhooks","updateWebhooksError","CLEAR_UPDATE_WEBHOOK_ERROR","REMOVE_WEBHOOK","isRemovingWebhooks","webhookURL","START_FIRST_RUN_EXPERIENCE","END_FIRST_RUN_EXPERIENCE","preferredServerEntityID","properties","metricsPages","serverType","getMetricsServerType","getMetricsServerStatus","firstRun","preferredServerInteraction","FETCH_HOME_DETAILS","homeDetails","isHomeDetailsPending","isHomeDetailsPopulated","homeDetailsError","REMOVE_HOME_USER","legacyHomeUsers","friends","isSignedInUser","friend","currentFriend","legacyHomeDetails","isRemoving","REMOVE_FRIEND","isHomeUser","serverShare","TOGGLE_GUEST_USER","homeSize","isEnabling","guestEnabled","isCreatingHome","isTogglingGuestUser","fallbackErrorMessage","getErrorMessageFromXHR","EDIT_HOME_USER_PIN","FETCH_INVITES","FETCH_SENT_INVITES","ACCEPT_INVITE","invites","invite","inviteID","signedInHomeUser","hasPIN","userSelectModal","alwaysResolve","showPINWarning","fetchSentInvites","REJECT_INVITE","CANCEL_INVITE","sentInvites","sentInvite","SHOW_NEW_HOME_WARNINGS","SETUP_SOURCES","sourcesForStorage","getSourceForStorage","getMetricsServerTypeForSource","PIN_SOURCES","UNPIN_SOURCES","sourcesToRemove","REORDER_PINNED_SOURCES","reorderedPinnedSources","sourceKeys","UPDATE_PINNED_SOURCES","pinnedSourceAttrs","pinnedSource","DISMISS_UPSELL_MODAL","dismissedModal","syncSettings","SYNC_SETTINGS","settingIDs","SAVE_EXPERIENCE_SETTINGS","syncExperienceSettings","SYNC_EXPERIENCE_SETTINGS","experienceSettingsModel","settingsJSON","updates","RESTORE_DEFAULT_EXPERIENCE_SETTINGS","showAdvancedSettings","RESTORE_DEFAULT_CUSTOMIZATION_SETTINGS","SET_TWO_FACTOR_ENABLED","twoFactorEnabled","SET_REMINDER","remindAfter","getIncrementalReminder","toISOString","REMOVE_REMINDER","RESET_REMINDERS","FETCH_USER","_payload","_dispatch","metricsIdentifier","finalFeature","newFeature","acc2","appState","createStableProvider","v4","core","serverNowPlayingSessions","sessions","sessionKeys","serverEntities","embeddedServer","createDeepEqualSelector","selectServers","isPrimaryEligible","isOutOfDate","transientServer","serverEntityIDs","embeddedServerEntityID","transientServerEntityID","isUnavailable","isFullServer","createStableServer","deviceSettings","selectManageableServerEntityIDs","selectAllServerEntities","selectAllProviderEntities","providerEntities","upgradeableTuples","contentFeature","findProviderContentFeature","tuple","upgrade","getDirectoryUpgrade","hasPlexMusicUpgrade","hasPlexMovieUpgrade","hasPlexSeriesUpgrade","hasAvailableUpgrade","authCodeExchange","createUserAttributeSelector","userFeatures","mixin","mapKey","mapValue","maxCycles","maxSize","isListening","_cache","cycles","cycle","startListening","clearWhere","clearAll","clearCycles","_cacheCycle","setItemCycle","_cacheKey","removeCycle","matchingItems","imageParamsRegex","_infoMemo","info","getImageInfo","image","blobUrl","cachedItem","images","sizes","scale","sizeParts","removeImageInfo","getBlobUrl","getPlaceholder","viewport","devicePixelRatio","NEVER","SAME_NETWORK","ALWAYS","NORMAL","LOCAL","CLOUD","ACTIVE","INACTIVE","CANCELED","PENDING_CANCELLATION","ENDED","ARCADE","PLEX_PASS","getBatchLibraryMetadataURI","getSectionURI","getMetadataListURI","getPlaylistURI","getLibraryMetadataURI","parseLibraryUri","lastSegment","libraryMatch","sectionKey","startsWith","filterParams","filterString","entries","sectionUrl","unwatchedLeaves","_resolveURI","sectionInfo","_getSectionInfo","sectionUUID","excludeSeedItem","getBatchLibraryMetadataTitle","getSectionTitle","getMetadataListTitle","getLibraryMetadataTitle","getSeasonEpisodeIndex","seasonIndex","episodeIndex","noLeadingZero","separator","encodedParts","getSectionForItem","precedent","divisors","years","months","days","DAY","hours","HOUR","minutes","seconds","milliseconds","sign","nextMilliseconds","unit","divisor","quotient","sec","hr","basicVersion","vizioVersion","webkitVersion","konvergoPlatformVersion","Browser","userAgent","navigator","browsers","webkit","regex","versionRegex","msie","versionMatchIndex","presto","gecko","platforms","tv","predicate","mobile","WM_devSettings","Windows","deviceFamilyVersion","System","Profile","AnalyticsInfo","versionInfo","deviceFamilyVersionHex","versions","substringIndex","subVersionHex","decimalValue","v1","ambiguous","VIZIO","isSmartCastDevice","iMTK_JSP","isSDK3","isSDK4","contexts","runTests","getVersion","platformID","platformModifierKey","tests","passed","ua","matchIndex","hasCanvas","canvas","isHostedHttps","hasConsole","console","hasWebSocket","WebSocket","hasEventSource","EventSource","hasReplaceState","replaceState","hasFileUpload","FileList","FileReader","hasMediaSource","MediaSource","WebKitMediaSource","hasObjectUrl","createObjectURL","hasBlob","Blob","hasFullscreen","requestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","hasWebGL","gl","WebGLRenderingContext","hasTouchScreen","hasPageVisibility","hasWebKitPageVisibility","webkitHidden","hasPassiveEventListeners","supportsPassive","hasWebSpeech","speechSynthesis","hasGamepads","getGamepads","hasMediaSession","hasLocalStorage","localStorageAvailable","localStorage","setItem","messageProperty","runtimeUrlParam","URLSearchParams","sanitizeUrl","urlPath","myPlexUrl","wwwPlexUrl","trailingSlash","absolute","isJSONSupported","inverse","formatResolution","stripOptions","formatVideoBitrate","formatVideoQuality","Handlebars","partial","partials","SafeString","truncateFilename","truncateMiddle","tEscape","getLastSegment","base64String","typeInfo","base64Image","mimeType","decodedImage","atob","blobArray","charCodeAt","byteArray","Uint8Array","minVersionParts","versionParts","minVersionDot","versionDot","aa","af","ab","ak","sq","am","an","hy","as","av","ae","ay","az","ba","bm","eu","be","bn","bh","bi","bs","br","bg","my","ca","ch","ce","cu","cv","kw","co","cr","dv","dz","en","eo","et","ee","fo","fj","fy","ff","ka","gd","ga","gv","gn","gu","ht","ha","hz","hi","ho","ig","io","ii","iu","ie","ia","ik","jv","kl","kn","ks","kr","kk","km","ki","rw","ky","kv","kg","kj","ku","lo","la","lv","li","ln","lt","lb","lu","lg","mk","mh","ml","mi","mr","ms","mg","mt","mo","mn","na","nv","nr","nd","ng","ne","nn","nb","ny","oc","oj","or","om","os","pa","pi","ps","qu","rm","ro","rn","sg","sa","sr","si","sk","sl","se","sm","sn","sd","so","st","sc","ss","su","sw","ty","ta","tt","te","tg","tl","th","bo","ti","tn","ts","tk","tw","ug","uk","ur","uz","ve","vi","vo","cy","wa","wo","xh","yi","yo","za","zu","pb","fr","de","sv","no","da","fi","nl","it","es","pl","hu","tr","zh","ru","he","ja","pt","ko","cs","fa","languageCodeA","localeCompare","languageCodeB","languageCodes","languageCode","NON_LANGUAGE_CODES","languageCodeComparator","channelIdentifier","condition","isDev","messageType","groupEndType","redactions","auth_token","Authorization","password","redact","isErrorLike","formatters","defaultMessage","LEVEL_LOG","serialize","LEVEL_NONE","LEVEL_ERROR","LEVEL_WARN","LEVEL_INFO","LEVEL_DEBUG","LEVEL_GROUP","LEVEL_GROUP_END","redacts","setLevel","debug","warn","groupCollapsed","groupEnd","replacer","_jsonReplacer","toUTCString","maxStackLength","_getMaxStackLength","stack","stacktrace","num","seasonNumber","episodeNumber","useLongName","toDate","monthNumber","getMonth","dayNumber","getDate","shortYear","cachedSection","media","selectedStreams","suffixes","bytes","toFixed","pow","resolution","scanType","kbps","mbps","formatBitrateAsMegabits","formatBitrateAsKilobits","quality","bitrate","units","formattedUnits","description","matchProviderAndMetadataKey","identifiers","isProvider","isServer","cleanPathname","pathnameMatches","hasNoProvider","serverProviderIdentifier","reportingHost","isSupportedByName","getReportingHost","startPeriod","mark","endPeriod","startMark","measure","isSupported","marks","getEntriesByName","endMark","clearMarks","measures","eventMixin","retain","hasListener","eventListeners","fnToString","Function","objStringValue","proto","getPrototypeOf","parseIterator","parseXML","replaceXMLElementNames","elementNames","replacement","joinedNames","openRegex","closeRegex","parseEncodedString","parseInteger","parseBoolean","parseArray","parseQueryString","queryStringParts","defaultValue","snippet","separators","separatorsRegex","xmlParser","attributePrefix","emptyNodeForm","ignoreRoot","xml2js","metadataDirectoryTypes","output","METADATA_XML_ELEMENT_NAMES","metadataType","closedRegex","orFields","andFields","keyA","keyB","getOrderedKeys","parseType","getByType","_parseTypeMap","stringifyType","_stringifyTypeMap","typeMap","stringifyBoolean","parseString","parseList","stringifyList","stringifyQueryString","parseJSON","ORIGINAL","CONVERT_AUTOMATICALLY","qualities","getQualityByIndex","qualityIndex","getQualityCount","getQualityAttribute","metadataItemOrModel","isExtra","isLocalMetadataItem","getSyncQualityAttribute","getCurrentQuality","onSettingsQualityIndexDoesNotExist","qualityAttribute","getAvailableQualities","lowestQualityIndex","highestQualityIndex","availableQualities","getResolutionFromSize","getResolutionFromHeight","getHeightFromResolution","getNearestIndex","resolutionByHeight","resolutionByWidth","videoPlayerQualities","abstractPlayerQualities","transcodeServer","canTranscode","canRemuxOnly","mediaResolution","getMaximumResolution","qualityOptions","getResolution","getBestAvailableQuality","preferredQuality","getNearestIndexToBitrate","targetBitrate","getMinimumQuality","indexA","indexB","MAX_VALUE","getMaximumQuality","maxResolution","isExplicitQuality","mapInverted","invertedKeys","slideshowStateByState","playing","paused","stopped","buffering","VIDEO","MUSIC","PHOTO","ROM","STOPPED","PAUSED","PLAYING","BUFFERING","slideshowStates","castStates","mediaStates","LOADING","READY","typeByElement","elementByType","typeByStream","streamByType","statebyCastState","castStateByState","castState","getSlideshowStateByState","standard","square","widescreen","movie","season","episode","artist","album","track","photo","photoalbum","clip","playlistFolder","channelDirectory","folder","ratios","portrait","landscape","getRatioByType","getPosterWidthUsingRatio","ratio","getPosterHeightUsingRatio","getPosterWidth","getPosterHeight","browser_","notify","isCanceled","finalize","startTimeout","keyParts","rawProviderIdentifier","socketConnectionUri","onopen","onclose","onerror","onmessage","onMessage","serverUpdateStates","INSTALLING","opened","closed","isLegacyJSON","_elementType","notification","_children","NotificationContainer","messages","acceptedMessageTypes","messageTypes","TimelineEntry","StatusNotification","ProgressNotification","PlaySessionStateNotification","BackgroundGeneratorStateNotification","VersionStateNotification","BackgroundProcessingQueueEventNotification","TranscodeSession","AutoUpdateNotification","ReachabilityNotification","AccountUpdateNotification","ActivityNotification","MediaGrabberDeviceNotification","MediaProviderNotification","MediaProviderContentNotification","LogSentNotification","MediaProviderSubscriptionNotification","ClientDecisionRequestEventNotification","getBaseMessages","getMessageTypes","extra","renderToStaticMarkup","Component","isServerEligible","sourceDirectory","scopeID","tryFindEntity","findServerModel","metadataListEntityID","friendEntityID","homeUserEntityID","updateQueue","branchTimeoutID","rootTimeoutID","updateRootState","isImmediateUpdate","isProcessing","processingDelay","clearBranchTimeout","clearRootTimeout","startRootStateUpdate","currentUpdateRootState","startProcessingUpdates","isStateTreeRoot","targetLength","unclampedLength","frontLen","backLen","directoryKeyParts","secondPart","lastPart","translation","valuesTemplate","getTranslatedCopy","shortTitle","lookups","getAll","sourceTypeObject","isLiveTVProvider","isDVRSourceType","sourceTypes","isDiscoverSourceType","hasNoneAgent","allTypes","mediaTypes","NONE","AUDIO","MOVIE","SHOW","SEASON","EPISODE","ARTIST","ALBUM","TRACK","CLIP","PHOTO_ALBUM","PLAYLIST","COLLECTION","GAME","AUTHOR","AUDIOBOOK","getLeafType","getRootType","rootType","getRelatedTypes","childType","getChildType","nextRelatedTypes","MOVIES","rootTypeString","defaultLanguage","mutual","TV","exclusiveScanners","PHOTOS","VIDEOS","GAMES","UNKNOWN","DVR","DISCOVER","ipv4Regex","ipv6ValidityRegex","ipv6ParsingRegex","parseV4Address","octets","parseV6Address","firstHalfMatches","secondHalfMatches","secondHalfParts","parsed","octet","isLoopbackV4Address","isLoopbackV6Address","isPrivateV4Address","isPrivateV6Address","isValidV4Address","PATH_PARAMS_HASH_REGEX","PATH_PARAMS_REGEX","stringifyParams","parseParams","parseUri","isAbsolute","segmentedPath","parseUrl","isFile","segment","recognizeHash","traversal","sanitizeSegment","segmentParams","stringifiedParams","newParams","leadingSlash","preHash","searchParams","hashPath","hashParams","reminderType","statusText","readyState","requests","byId","$document","onAjaxSend","onAjaxComplete","skipCorsWithRedirect","hasInvalidToken","server_","MetadataType","MetadataNumericType","MetadataSubtype","ExtraType","MediaType","AdTypes","GuidSource","StreamType","StreamIDParam","OverlayGravity","OverlaySize","OverlayStartTimeOffsetType","TagNumericType","serverAccounts","initialPerServerState","accounts","reducers","_state","_action","serverState","extraReducers","builder","addCase","ServerActivityType","reportServer","sessionsByKey","stopSessionError","session","sessionKey","existingSession","Player","manageableServers","primaryServerEntityID","manageableServerEntityIDs","ServerPlatform","ConnectionTestResult","isTransient","isOpen","setIsOpenState","useState","useCallback","onToggle","useMemo","Missing","createContext","metricsContextTuple","Empty","useContext","MetricsContext","row","col","Placeholder","metricsPageFromProps","metricsContextParam","nameFromProps","rowFromProps","column","columnFromProps","useMetricsContext","metricsContextValue","rowStr","columnStr","parseMetricsContextString","metricsValue","Provider","contentClassName","titleClassName","iconSrc","descriptionClassName","footerClassName","footer","scrollerProps","Scroller","refs","ref","forwardedRef","scrollDirection","ScrollDirection","Vertical","autoScroll","targetScrollTop","targetScrollLeft","onScrollPositionChange","useRef","onScroll","useEffect","Size","aria-label","statistics","requestTimestampMilliseconds","responseTimestampMilliseconds","isUnsupported","moviesStatistics","tvStatistics","musicStatistics","gameStatistics","EPGCountryFlavor","MediaGrabberDeviceStatus","MediaGrabberDeviceState","MediaGrabberDeviceSourceType","EPGLineupType","channels","initialSelectedDVRState","initialDevicesState","mediaGrabberDevices","epgDownloadActivityID","selectedDevice","selectedDVR","channelsByDeviceKey","scanPrefs","scanNetworks","hasScannedChannels","isSavingDVR","isDeletingDVR","isAddingDevice","isDiscoveringDevices","isSavingChannelMappings","isCancellingChannelScan","isCancellingReloadGuide","channelMappingsSaveError","setupErrorMessage","channelScanActivityReducer","networks","Response","Network","isFinished","existingDevice","mediaGrabberDevice","deviceChannels","deviceKey","initialDeviceChannelsState","activityUUID","mappings","initialLineupChannelsState","channelsByLineupUUID","initialLineupGroupsState","epgLineupGroups","channelMappings","initialChannelMappingsState","lineupChannels","countries","epgCountries","epgLanguages","epgCountryRegions","lineupGroups","selectedCountry","selectedLanguage","selectedRegion","selectedLineupGroups","lineupGroup","isChannelMappingsFetched","channelMappingAttributes","mapping","epgLineups","epgLineupGroup","isSelectedLineupPending","lineupGroupUUID","selectedLineup","epgLineup","selectedLineupUUID","isSelectedLineupPopulated","cleanPath","cleanXMLTVPath","syntheticLineup","lineupType","syntheticLineupGroup","regionKey","dvrSetupSlice","serverActivitiesSlice","dvrSetup","dvrManagement","epgSettings","hubsChangeRequested","hubsChangeSucceeded","hubsChangeFailed","publishedItems","isMergeRecentlyAddedEnabled","isResetting","hubOptions","promotedToRecommended","promotedToOwnHome","promotedToSharedHome","publishedItem","contentDirectoryID","HALF_HOUR_IN_SECONDS","guideChannels","channelsGrid","visibleColumns","columnTimes","columnWidth","airedProgress","getColumnTimes","roundedStartTime","overflowWidth","channelWidth","channelTitleWidth","nextStartTime","earliestAiringTime","hashType","isLegacyRootState","routeKey","queryParams","firstRoute","settingsSection","settingsGroup","logs","serverAwait","serverSetup","serverUpdate","serverSettings","serverSettingsPMS","login","logout","signUp","msg","Map","timePeriod","TimePeriod","RealTime","TwelveHours","Day","Week","Month","NinetyDays","Year","AllTime","useLongFormat","Timespan","backend","component","unmountReact","mountReact","ALERT_TYPES","onCloseClick","extensions","hls","http","logParams","serializeParams","xPlex","imagePath","fallbackCandidate","fallbackServer","useFallbackServer","serverHasRemoteConnection","fallbackHasPrivateConnection","music","hasMDE","partIndex","audioBitrate","audioSamples","extension","video","fastSeek","directPlay","directStream","audioBoostLevels","game","placeholderSrc","backgroundSize","ImageCache","placeholder","ignoreAttributeChanges","exposeUrl","resetOnError","emptyImage","explicitEmpty","getUrl","setup","setDimensions","setFilters","setModel","transcode","filterOptions","hasFilters","getTranscodeUrl","showImage","isPlaceholderRendered","showPlaceholder","onLoad","clearImage","showBackgroundImage","loadBlob","loadImage","cachedBlobUrl","cachedPlaceholder","onreadystatechange","blob","img","Image","onabort","sorted","sortedAppendHtml","reversed","reversedAppendHtml","childNodes","$container","$children","eq","before","measureList","listItem","itemWidth","itemHeight","itemMarginRight","itemMarginBottom","getViewForModel","viewId","reorder","els","_index","onCollectionRendered","visibleModalsCount","closeableModalsStack","animationDelay","rerender","paneDef","onModalClose","doubleConfirmMessage","confirmBtn","whitelistedOptions","onConfirm","requireDoubleConfirm","hasConfirmedOnce","doubleConfirmLabel","validatePane","filterValidPanes","paneName","dependentPane","accumulateDependentPanes","dependentPanes","updateSidebarBtns","changePaneBtns","getReachablePanes","selectedPane","panesModel","lastView","paneRegion","onPaneHide","PaneViewConstructor","paneConstructorArg","_paneOnModalCloseCallbacks","onPaneShow","allDependentPanes","deps","validPanes","isAnyInvalid","reachablePanes","addedPanes","onChangePaneClick","escapedAgentName","onInputChange","agentIdentifier","filterExclusiveAgent","isCurrentFoundInExclusives","isAgentFoundInExclusives","scannerName","filterExclusiveScanner","isScannerFoundInExclusives","sectionTypeID","hasExclusiveScanner","formGroup","edit","showValidationResult","invalidAttrs","createMenuOptions","selectedValue","getSectionType","currentSectionType","setSectionType","populateAgents","AgentCollection","populateScanners","populateAgentsProxy","agentsProxy","populateScannersProxy","scannersProxy","populateSectionSettings","populateSectionAgentSettings","agentSettings","onEditSectionSettingInputChange","sectionAgent","sectionScanner","thumbnailsCheckbox","agentGroup","scannerGroup","sectionSettingsRegion","agentSettingsRegion","populateCollections","renderSectionSettings","renderSectionAgentSettings","onAgentsPopulate","onScannersPopulate","renderSectionAgent","renderSectionScanner","updateSectionAgent","selectedAgent","selectedScanner","agentLanguages","currentLanguage","onEditSectionAgentChange","onEditSectionScannerChange","onThumbnailsDeleteClick","unsuitableSubscriptionTypes","onRemovePathClick","filePath","link","spinner","isRoot","unselect","selectedFilePath","collectionEvents","startLoadingItem","unselectItem","stopLoadingItem","parentFilePath","onDirectoryClick","rootList","childrenList","childrenFileList","rootPathList","FilePathListModel","childrenPathList","loadRootPaths","homePaths","homePath","loadChildrenPaths","xhrTracker","rootListView","childrenListView","childrenFileListView","onRootPathChange","onChildrenPathChange","onSubmitForm","fieldNames","pathsRegion","addFolderBtn","addFolderPopulating","addFolderError","arcadeDownloadMediaInput","arcadeGreeting","arcadeRequired","arcadeUpsell","parsecRequired","change","onUserChange","renderSectionLocation","isGamesSection","isNewGamesSection","hasActiveSubscription","findActiveSubscription","hasPastSubscription","findPastSubscription","hasParsecUserService","service","userServices","userService","hasRequiredUserService","showArcadeGreeting","showArcadeRequired","showArcadeUpsell","showParsecRequired","hideArcadeGreeting","hideArcadeRequired","hideArcadeUpsell","hideParsecRequired","subscribeURL","subscription","onAddFolderClick","addFolderModal","onAddFolder","folderPath","onFolderChange","onDownloadMediaChange","plexPassUrl","escapedFriendlyName","chooseLibrary","modelEvents","hasPremiumMusic","updateSelectedOffering","hasLyrics","not","onChooseLibraryClick","onSectionAgentChange","onSectionScannerChange","shorthand","getUnixTime","addSeconds","fromUnixTime","isFuture","isShorthand","tokens","unitOfTime","relativeTime","formatTimeFromNow","typeKey","IconMovie","IconMusic","IconCamera","IconTv","IconVideo","IconGames","IconBook","isTypeSupportedByServer","sectionTitle","sectionLanguage","sectionLanguageGroup","isDefaultSection","hasGamesFeatureFlags","hasAudiobooksFeatureFlag","typeIcon","currentSectionKey","canChangeType","hasType","isInitialTypeSupported","escapedUpdatedAt","setAgentAndScanner","renderSectionLanguage","defaultServerLanguage","updateSectionLanguage","updateSectionTypesWizardBlocks","updateSectionTitle","uiVal","currentVal","onSectionTypeClick","onEditSectionTitleChange","onEditSectionLanguageChange","onSectionTypeChange","previousSectionKey","previousSectionType","previousTitle","onSectionTitleChange","onSectionLanguageChange","nextPane","showFolders","folders","sidebar","optionsBtn","headerSectionType","isLoading","tempModel","SectionModel","seedAttrs","paneTitle","updateMessage","updateSaveBtn","isSelectedPaneValid","isEveryPaneValid","isModelPopulated","isNextBtn","showOptions","isEnabled","showAdvanced","isPremiumMusicCandidate","canSelectPremiumMusic","updateSectionTitleDestabilized","triggerReflow","sectionPromise","saveModel","LibraryFailureModal","routeParams","getSourceRoute","settingsParams","getSectionSettingsParams","locationPath","getResponseHeader","hiddenValue","hiddenInt","libraryProvider","getSourceTypeForDirectory","getSourceKey","providerMetricsIdentifier","isUnclaimedServer","isProviderReady","saveAgentSettings","saveSettings","resolvedPromise","agentSettingsChanges","getSettingsChanges","agentSetting","settingsChanges","onSaveClick","onGeneralFormSubmit","isSignedIn","hasPlexSubscription","serverSettingsRoute","onTryAgainClick","disableLocation","selectedLocationID","onLocationChange","policyUnwatchedInput","policyScopeInput","policyValueInput","policyWarning","leafMediaType","setPolicyDefaultsFor","isSync","showLimitWarning","shouldShowPolicyWarning","showUnwatched","updatePolicyValue","showWarning","onPolicyUnwatchedChange","onPolicyScopeChange","onPolicyValueChange","targetTitleInput","targets","profiles","profile","selectedProfile","availableCustomQualities","nearestIndex","selectedCustomQuality","disableTarget","updateDeviceProfile","updateMediaSettings","onTargetChange","onTitleKeyDown","selectionStart","onTitleChange","onProfileChange","onQualityChange","submitBtn","policyRegion","targetsRegion","locationRegion","itemForUri","sectionForItem","conversionItem","showRemuxOnlyWarning","onStatusClick","stateMachineMixin","bodyRegion","collectionOptions","BackgroundProcessingListCollection","listenForStateRequests","shouldPopulateItem","form","onStateMachineComplete","MarionetteComponent","_view","_el","UserPage","isWaitingForServers","isAnyServerAuthenticated","isWaitingForCloudServer","isCloudServerUnauthorized","isCloudServerConnected","isCloudServerUnavailable","isCloudServerDownForMaintenance","hasAttemptedSignIn","isUserFeaturesPopulated","isUserFeaturesError","onPopulateUserFeatures","hasWaitedForUserFeatures","setHasWaitedForUserFeatures","isUserReady","isReadyToRequestFeatures","isUserFeaturesReady","shouldRedirectToLogin","timerID","useEffectOnce","DownForMaintenancePage","UnreachablePage","EmptyPageContent","Spinner","defaultProps","isAccountRequired","selectIsWaitingForDownloads","downloads","isSubscriptionsPopulated","subscriptionsError","selectHasDownloads","selectIsAnyServerAuthenticated","mapStateToProps","selectCloudServer","isWaitingForDownloads","hasDownloads","isDownForMaintenance","isFeaturesPopulated","featuresError","mapDispatchToProps","containerClassName","backgroundClassName","textClassName","lineWidth","strokeColor","colors","trackColor","progressText","easing","showProgressText","showIndeterminate","smoothProgressDuration","finalProgress","finalProgressText","center","radius","circumference","sizeInPixels","backgroundSizeInPixels","strokeDashoffset","lineHeight","xmlns","cx","fill","strokeWidth","stroke","strokeDasharray","loadingLabel","RootComponent","childrenPropName","rootChildrenPropName","tags","componentIndex","componentCount","unpaired","componentProps","tagRegExp","nextSegments","segmentIndex","preComponentSegment","componentChildren","postComponentSegment","isSelected","kinds","PopperPortal","super","_open","_close","_ref","_popper","nextProps","prevProps","targetElement","getElementsByName","Portal","onCloseTimeout","_closeTimeoutID","shouldPreventPortalClose","onInteractionEvent","allowInteractionEventBubbling","prevState","closeTimeoutMilliseconds","onMouseDown","onMouseUp","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","_scrollerRef","hasTopChanged","_currentScrollTop","hasLeftChanged","_currentScrollLeft","_setScrollPosition","_animationFrameID","onScrollTimeout","isScrolling","onScrollTopUpdate","_updateScrollPosition","onScrollToUpdate","onScrollTopComplete","_scrollTopTween","onScrollToComplete","onScrollLeftUpdate","onScrollLeftComplete","_scrollLeftTween","_scrollTo","shouldPureComponentUpdate","_scrollTimeoutID","isScrollingTimeout","_clearTimeouts","_cancelScrollTo","scrollerRef","restoreScroll","smoothScrollDuration","_scrollToPosition","scrollTopRequest","onUpdate","onComplete","scrollLeftRequest","cancelAnimationFrame","compactScroller","enableChildrenProps","otherProps","func","lastIndex","mapValidComponents","scrollDirections","labelClassName","color","spinnerClassName","spinnerStyle","borderTopColor","borderLeftColor","Link","DisclosureArrowButton","arrowClassName","arrowSize","aria-haspopup","DisclosureArrow","activeElement","dataset","uid","emptyElementUID","lastActiveElementUID","canUseDOM","getActiveElementUID","_isTouch","_preventFocus","_shouldPreventFocus","touches","_activate","_isActive","_press","_preventOnClick","onMouseLeave","isActive","_isFocused","_uid","_focus","getUniqueElementID","isFocused","focusOnEnabled","shouldFocus","previousShouldFocus","allowFocusOnPress","onPress","linkProps","spinnerSize","spinnerColor","isSpinning","TranscodeImageConnector","createAvatarUrl","BackgroundImage","backgroundPosition","backgroundRepeat","selectTranscoderDetails","appState_","createShallowEqualSelector","createUnstableServerSelector","transcodeKey","isAbsoluteTranscodeKey","isPublicTranscoder","imageTranscoderFeature","cleanup","PreloadImage","emptySrc","ImageComponent","preloadOnMount","preloadedSrc","setPreloadedSrc","setError","hasSatisfiedMountCondition","sizeMemo","widthMemo","sortedImageSizes","imageSizes","getWidthForSize","imageSize","upscale","allowPixelRatioSize","allowImageBlobs","supportsSize","transcodeUrl","pxRatio","getSizeForWidth","ceil","bracketedWidth","aspectRatio","getDimensionsParams","queryIndex","urlWithParams","appendTranscodeParams","cachedPlaceholderUrl","setSrc","isErrorRef","cancelable","makeCancelable","nextBlobUrl","TranscodeImage","selectStableServer","selectStableProvider","transcoderDetails","imageUrl","pathParts","createImageTranscodeUrlSelector","MENU_SPEED_SECONDS","cssDurationToSeconds","animations","MENU_SPEED_MILLISECONDS","MENU_PADDING","opacityTransition","transformTransition","easings","containerVariants","preEnter","exit","menuPopperModifiers","altAxis","getMaxHeight","maxHeight","Menu","onResize","onWindowDownPress","_isElementContainedOrTarget","_willMenuClose","onWindowUpPress","onMenuClose","keyCodes","focusManager","_menuID","_enable","wasEnabled","isAutoCloseDisabled","_disable","containerElement","isContainer","isTarget","portalClassName","onMouseEnter","onMenuCloseComplete","modifiers","variants","data-testid","MetricsClickTracker","contextTypes","MetricsPageTracker","isDelegated","prevChildren","prevIsDelegated","prevMetricsProperties","childContextTypes","modalSpeedSeconds","modalSpeedMilliseconds","scaleTransition","backdropTransition","backdropVariants","containerTransition","modalContainerVariants","onBackdropBeginPress","_isBackdropPressed","_isBackdropTarget","onBackdropEndPress","preventCloseOnBackdropPress","_openModal","_closeModal","_autoFocusTimeoutID","_findEventTarget","modalElement","changedTouches","touch","elementFromPoint","clientX","clientY","backdropClassName","innerClassName","isScroller","iconComponent","Icon","ModalFooter","tooltipSpeedSeconds","tooltipSpeedMilliseconds","tooltipTransition","tooltipBeforeY","attachment","tooltipAttachments","tooltipBeforeX","tooltipExitY","tooltipExitX","tooltipContainerVariants","popperOptions","TargetComponent","hideOnDisabled","hideOnPress","showOnFocus","showOnHover","tooltipAttachment","tooltipClassName","tooltipFocusedClassName","tooltipOptions","setIsOpen","isFocusedRef","isHoveredRef","uniqueElementID","useUniqueElementID","targetID","tooltipTarget","finalClassName","ErrorPage","isMetricsDelegated","PageScroller","PageConnector","hasError","_positionKey","scrollPositionKey","_restoreScrollDelay","restoreScrollDelay","_restoreScroll","_restoreScrollTimeoutID","_restoreScrollPosition","_storeScrollPosition","scrollPosition","selectDeviceSettings","InlinePrimaryServerPageConnector","_populate","dispatchSetPrimaryServer","dispatchDismissUnclaimedServer","selectIsAnonymousUser","isAnonymousUser","isPlexAccountRequired","onSignInPress","onClaimPress","onDismissPress","EmptyPageDescription","activeConnectionUri","shouldUseNewSettingsRoutes","productName","minServerVersion","ServerPageConnector","hideUnclaimedPage","selectEmbeddedServer","isEmbeddedServer","hasServer","showSpinner","isUnclaimed","hasHttpsConnections","EmptyPage","InstallingServerUpdatePageConnector","ServerUnavailableErrorPageConnector","ServerUpdateRequiredPageConnector","ServerUnauthorizedErrorPage","ServerUnclaimedPageConnector","NotFoundErrorPage","onTryAgainPress","TagInjector","SpinnerButton","InsecureFallbackChoicePage","bundledConnection","bundledConnectionUri","shouldShowInsecureAppMessage","insecureFallbackHelpers","shouldAllowInsecureFallback","useDisclosure","shouldShowDownloadButton","AllowHttpFallbackModalConnector","AllowHttpFallbackModal","onAllowFallbackConfirm","isSubmitting","onAllowHttpFallback","ModalContent","ModalHeader","ModalBody","ModalFooterButtonBar","iconClassName","dispatchRedirectToUrl","RedirectToConnector","compactDeep","transform","mapValues","omitBy","getMetricsContextForAuth","metricsJSON","otherContext","providerID","userAuthToken","clientID","selectUserLanguage","splitUrlSearchHashPathAndParams","forwardUrl","twop","lang","guestToken","shouldClientPoll","parsedParams","skipSignInUrl","replaceUrlHash","serviceAuthUrl","subscribeUrl","infoUrl","plans","isPlansPending","isPlansPopulated","plansError","plan","continue","formattedPrice","PlexPassModalContentConnector","userFlexState","subscribeParams","utm_source","utm_medium","utm_campaign","utm_content","PlexPassModal","isVisible","visibility","isTabbable","nodeName","isFocusable","tabbable","getElementsByTagName","tabbableElement","previousActiveElement","scopedElement","tryFocus","doesParentContainActiveElement","parentElement","resetFocus","findTabbableDescendants","nextIndex","shiftKey","elem","hasUsedEffect","effect","confirmCallback","isFallbackPossible","isFallbackSuccessLikely","canCreateFallbackConnections","hasFallbackConnections","pageStorage","getPageKey","getKey","nonce","CONTINUE_WATCHING","PRE_PLAY","QUICK_SEARCH","PLAYER","PLAY_QUEUE","LIVE_TV_TIMELINE","LIVE_TV_GRID","NOW_PLAYING","DOWNLOADS","SHARED","WATCH_TOGETHER","WATCH_TOGETHER_LOBBY","baseRoute","encodedMachineIdentifier","encodedProviderID","serverPath","getProviderBaseRoute","encodedKey","playlistRoutes","pathSuffix","getProviderRouteFromIdentifiers","getProviderRoute","RECORDING_SCHEDULE","GUIDE","TIMELINE","SHARED_ITEMS","HOME_RECOMMENDED","HOME_WATCHLIST","objA","objB","keysA","keysB","hasOwn","shallowEqual_","areEqual","nextContext","v4AccentLight","v4AltLight","v4AltMedium","v4BaseDark","v4BaseMediumLight","v4AltMediumDark","v4AltMediumLight","v4BaseLight","v4BaseMedium","v4DefaultColor","v4DividerColor","primaryButtonColor","selectBackground","dragPreviewBackgroundColor","dragPreviewOpacity","dragPreviewLowOpacity","dropLocationColor","sliderTrackBackgroundColor","sliderThumbBackgroundColor","sliderThumbHoverBackgroundColor","rowOddBackgroundColor","rowEvenBackgroundColor","avatarLoadingBackgroundColor","avatarBackgroundColor","detailsShadowColor","playerBackgroundColor","playerTopControlsBackgroundColor","playerBottomControlsBackgroundColor","playerPrimaryButtonBackgroundColor","miniPlayerBackgroundColor","playerSecondaryOverlayColor","playerPosterActionColor","playerPanelColor","playerDisabledLinkColor","playerShadowColor","seekBarTrackColor","seekBarTrackColorHover","seekBarFillColor","seekBarBufferColor","seekBarThumbnailShadowColor","seekBarTooltipBackgroundColor","seekBarTooltipShadowColor","thumbnailBackgroundColor","adSeekBarFillColor","equalizerBarColor","htmlMediaElementBackgroundColor","toastBackgroundColor","posterBackgroundColor","posterHoverBackgroundColor","posterSelectedBackgroundColor","posterBlendedSelectedBackgroundColor","posterPlaceholderIconColor","posterCenterCircleBackgroundColor","posterBadgeShadowColor","posterProgressTrackBackgroundColor","posterVersionBadgeColor","posterSmartBadgeColor","posterFavoriteBadgeColor","v4CardBackgroundColor","v4CardShimmerBackgroundColor","v4CardShadowColor","v4CardHoverBackgroundColor","v4CardHoverBorderColor","recordColor","recordHoverColor","recordBackgroundColor","recordActiveBackgroundColor","dayOfWeekBackgroundColor","dayOfWeekColor","todayBackgroundColor","todayColor","calendarEventSuccessBackgroundColor","calendarEventSuccessAlternateBackgroundColor","calendarEventSuccessHoverBackgroundColor","calendarEventErrorBackgroundColor","calendarEventErrorAlternateBackgroundColor","calendarEventErrorHoverBackgroundColor","recordingIconColor","playColor","channelGridTimelineLabelColor","channelGridSelectedItemDetailsBackgroundColor","channelGridBorderColor","channelGridHoverColor","channelGridBackgroundColor","channelGridOnAirBackgroundColor","channelGridFinishedAiringBackgroundColor","channelGridProgressColor","channelGridMissingItemBackgroundColor","channelGridChannelThumbBackgroundColor","channelGridRecentChannelThumbBackgroundColor","channelGridChannelIdentifierBackroundColor","channelGridNewBadgeColor","filterBuilderInputBackgroundColor","altFilterBuilderInputBackgroundColor","dvrBackgroundColor","prePlayUnavailableButtonBackgroundColor","prePlayPartialButtonBackgroundColor","searchInputBackgroundColor","preferredServerButtonBackgroundColor","sortableHomeHubsContainerBackgroundColor","sortableHomeHubsRowBackgroundColor","chartTranslucentOpacity","serverDashboardTileRowBackgroundPrimaryColor","serverDashboardTileRowBackgroundSecondaryColor","serverDashboardTileRowBackgroundTertiaryColor","serverDashboardTileRowBackgroundQuaternaryColor","sessionStopBackgroundColor","sessionStopIconColor","sourceSidebarSelectedColor","liveTVSettingsTuner1Color","liveTVSettingsTuner2Color","liveTVSettingsTuner3Color","liveTVSettingsTuner4Color","liveTVSettingsTuner5Color","alertDuration","transitionDuration","mouseenter","mouseleave","transitionIn","startTransition","visible","transitionOutTimeout","transitionOut","openAlerts","showAlert","modals","showModal","$body","ErrorPageContent","PageErrorBoundary","errorInfo","componentStack","UnexpectedErrorPageContent","UltraBlur","bottomLeft","bottomRight","topLeft","topRight","isExpired","setIsExpired","selectServer","acceptedEULASetting","desktop","intervalID","timeoutID","UserPageConnector","SIGN_IN_WITH_AUTH_TOKEN","onSignInSuccess","storageAdapter","reload","SignInLaunchPagePoll","onSwitchToSkipSignInPress","isSkipSignInVisible","onStillTherePress","onSkipSignInPress","showTimedOut","showButton","isFirstRunRoute","dispatchPreloadPIN","dispatchBeginPolling","dispatchStopPolling","dispatchSkipSignIn","SignInLaunchPagePollConnector","ServiceAuthUrlConnector","selectAuthCodeExchange","dispatchReadStoredPIN","SignInLaunchPageRedirectConnector","dispatchResetAuthCodeExchange","dispatchSignInWithAuthToken","signInWithAuthToken","SignInLaunchPageConnector","isPollClient","authCodeExchangeProps","AbstractReactView","FullPage","modalContainer","connectCheckbox","publishServerCheckbox","nextBtn","PublishServerOnPlexOnlineKey","FirstRun","PlexOnlineToken","isPlexPassModalOpen","friendlyNameSetting","publishSetting","upsellOrigins","onPlexPassModalClose","submit","click","saveChanges","claim","onBeforeRender","checked","doneBtn","collectUsageDataSetting","devicesImg","collectUsageData","settingsPromise","sectionPromises","computerImg","mediaImg","playImg","icons","pathCount","serverID","onEditClick","onDeleteClick","serverSections","isFirstVisitToSubset","onAddSectionClick","metricsLabels","setupIntro","setupError","setupBasic","setupLibrary","setupComplete","coreAgents","maxAttempts","header","attempts","_visitedSubsets","onSkipSignInChange","renderSubset","cloudServerPromise","agentsPromise","onAgentsSuccess","onAgentsFail","isIntroStep","isSignInStep","isLoadingStep","setupSignIn","setupLoading","getSubsetView","metricsLabel","previousSubset","isFirstRun","coreAgent","AcceptedEULA","onUpdatesComplete","onNavClick","onDoneClick","createServerFlexSelector","serverFlex","hasAcceptedEULA","isAcceptedEULASaving","onPopulateSettings","onAcceptEULA","onSkipSignIn","AcceptEULAPageConnector","CONTENT_CLASS_NAMES","routeMatch","exact","unknownServer","unknownProvider","SetupPageConnector","selectUserFeaturesByUUID","userFeaturesByUUID","sentences","data-autofocus","errorModalState","useModalState","TooltipTrigger","onSignUpPress","isRestricted","isFullUser","appsURL","appsUrl","onSignOutPress","shouldShowSignIn","shouldShowSignOut","MenuSeparator","MenuItem","createChainedCallback","NavBarAccountButton","onButtonPress","isMenuOpen","_buttonID","userThumb","UP","AvatarImg","selectEntities","allServerEntities","ownedConnectedServers","serverUpdateDismissedVersion","serverUpdateVersion","AVAILABLE","DOWNLOADED","DOWNLOADING","NOTIFY","getAvailableUpdateVersion","selectAvailableLibraryUpgrades","availableUpgrades","subtitle","isPostProcessing","CircularProgressBar","StatusButton","indicator","createServerNowPlayingSessionsCountSelector","backgroundTranscodeJobs","_appState","targetServerEntityID","sessionsCount","hasAvailableLibraryUpgrade","showLibraryUpgradeAvailable","showUpdateAvailable","onUpgradeLibrariesPress","IconUpCircledFilled","menuOptions","ownedServerEntityIDs","showHighlighted","showUpdateIcon","IconActivityCircledFilled","IconActivity","IconComponent","ariaLabel","iconProps","finalAriaLabel","initialActivityCounts","backgroundTranscodeJobsCount","activitiesCount","reduceActivityCounts","counts","sessionCount","selectOwnedServerActivityCounts","ownedServers","selectEmbeddedServerActivityCounts","selectActivityCounts","ownedServerActivityCounts","embeddedServerActivityCounts","selectServerRefreshingLibrariesCount","libraryEntities","libraryEntityIDs","libraryEntityID","selectHasAvailableServerUpdate","activitiesCounts","libraryRefreshingCount","hasAvailableServerUpdate","hasOwnedServers","showActivityButton","hasSessions","hasConversions","hasActivities","hasLibraryRefreshing","activityButtonCount","isLibraryUpgradeAvailable","buttonID","setIsMenuOpen","onActivityPress","NavBarPlexPassButton","_event","shouldBypassModal","experiments","hasManualHistoryNavigation","isIOS","selectIsFullscreen","selectHasConnectedSidebarSource","UnsafeNavBarConnector","hasConnectedSidebarSource","shouldRender","shouldBypassPlexPassUpsellModal","hasHistory","canGoPremium","canNavigateHistory","canEnterFullscreen","canExitFullscreen","onBackPress","onEnterFullscreen","onExitFullscreen","userLanguage","Row","align","grow","verticalAlign","IconHome","IconPlexLogo","IconBack","IconMinimize","IconMaximize","NavBarActivityButtonConnector","NavBarConnector","available","isCloudServerAvailable","isCloudServerResolved","isCloudServerRejected","previousIsCloudServerAvailable","usePrevious","isAvailableKnown","isPreviousAvailableUnknown","SignOutPage","isSigningOut","onSignOut","InfoViewPage","LogsViewPage","ServerUpdateViewPage","ServerSettingsViewPage","useGarbageCollectEntities","listen","newLocation","useNavigationHistory","serverDashboardRoute","Suspense","fallback","ServerSetupViewPage","ServerAwaitPage","SignOutPageConnector","PUT","DELETE","allowedHeaders","contentTypeRegex","plexHeaderRegex","urlWithQueryRegex","plexHeaders","hasPlexHeaders","searchMatch","plexParams","nonPlexParams","encodedPlexHeaders","simpleCORSFilter","parsedQuery","parsedAlerts","isValidClientID","generateClientID","loadClientID","currentClientID","loadSkipSignInFlag","lastModified","eTag","subscriptionPath","requestType","pollRequest","onSocketOpen","onSocketClose","onSocketError","onSocketMessage","poll","cancelPing","schedulePing","_pingTimeoutID","onPingTimeout","ttl","POLL_TIMEOUT","onPollSuccess","onPollError","handleResponse","jqXHR","queueConnectionTest","populateServer","item_","confirmPromise","skipNavigate","deletePromises","skipRedirect","skipConfirmation","isMultiple","isRemote","typeLabel","modalOptions","hasDanger","showConfirmation","medias","mediaModal","mediaPromise","selectMediaItem","proxyType","deleteSectionThumbnails","isAlbum","updateLibrary","sectionIDs","currentSection","searchUrl","searchOptions","searchPromise","SearchResult","matchUrl","matchOptions","matchPromise","artworkAttributes","artworkRatingKey","artworkType","originalRating","passive","streamID","allParts","getStreams","getParentFromCache","navigateToSection","directoriesModel","directoryModel","getSourceDirectoryFromProviderModel","navigateToDetails","siblingsListModel","grandparent","parentsListModel","disablePromise","deletePromise","xhrPromise","updateUrl","updateDeferred","uninstall","pollInterval","waitingOnPublish","waitingOnUnpublish","verifyAccount","connectOptions","previousToken","tokenXhrOptions","claimUrl","claimXhrOptions","signInServer","destroyServer","getCachedServer","signOutServer","fakeRouter","clearAccessToken","signOut","isUserSignedIn","isDifferentUser","isRemoteUser","shouldSwitchUser","authPromise","activateStoredUser","storedUser","copyToModel","includeSubscriptions","includeProviders","includeSettings","includeSharedSettings","overrides","uuID","getUserRequestParams","xhrFields","withCredentials","rejectedPromise","onCloudServerCommand","Command","signal","supportsTimeline","commandID","queryKey","queryOffset","queryMediaIndex","queryContainerKey","queryPlayqueueid","queryType","volume","queryVolume","repeat","queryRepeat","autoPlay","queryAutoPlay","querySubtitleSize","audioStreamID","queryAudioStreamID","subtitleStreamID","querySubtitleStreamID","queryToken","queryMachineIdentifier","queryProtocol","queryAddress","queryPort","queryText","queryField","registeredClientID","currentCompanionState","isCompanionEnabled","vote","getVote","isLeader","validatePlayerRegistration","registerPlayer","updateCompanionState","companionState","subscribe","unsubscribe","unregisterPlayer","addCompanionChangeListener","LEADER_STATUS_CHANGED","deepLinkPromise","getDeepLink","_catchStorageError","getItem","accessFn","getStorage","api","storageString","userSpecificAttrs","StoredUserExperienceSettingsModel","allAttrs","migrationAttrs","existingExperienceSettings","migratedSettings","castAppIDs","PRODUCTION","QA","NINJA","CUSTOM","debugAdKinds","VAST","debugLevels","DISABLED","ENABLED","chromecastAppID","chromecastCustomAppID","sonosCustomBaseURL","debugAdKind","debugLevel","debugVideoQualityOverlay","rejectDirectConnections","restorePlayQueue","shouldSyncSettings","hasDismissedServerDownloadMessage","movedAttrs","deviceSettingsStorageKey","migratedDeviceSettings","originalDeviceSettings","updatedDeviceSettings","patternsByGlobalIdentifier","patternMatches","patterns","subtitleColors","WHITE","YELLOW","BLACK","CYAN","BLUE","GREEN","MAGENTA","RED","GREY","ALL","subtitlePositions","TOP","MIDDLE","BOTTOM","subtitlesBurnLevels","AUTO","AVOID","hyphenatedRegExp","searchLanguages","codeFromMatch","closestLanguage","TABLE","UserExperienceSettingsModel","userExperienceModelAttrs","isRemoteSchemaVersionNewer","schemaVersion","playThemeMusic","companion","timeFormat","dismissedWhatsNewFeatures","autoAdjustQuality","remoteSmallVideoAtOriginalQuality","useHomeStreamingRecommendedSettings","localQuality","remoteQuality","subtitleColor","subtitlePosition","subtitlesBurnLevel","extrasPrefixCount","audioForceMultiChannel","forceTranscodeProtocolHLS","calendarViewType","columnAdjustment","columnWidthMultiplier","dashboardNowPlayingShowDetails","hasDismissedDVRUpsell","hasDismissedServerDashboardUpsell","hasDismissedHubPromotionWarning","isSidebarCollapsed","libraryTableColumns","listStyles","prePlayListStyles","directoryListStyles","directoryTableColumns","savedDirectoryListKeys","relayReminders","showPrePlayArtwork","musicDownloadQuality","videoDownloadQuality","recentSearches","searchAllServers","libraryRoutes","hasDismissedNewsSunsetBanner","hasDismissedCustomHomeSunset","getDefaultLanguage","localQualityDefault","metadataContext","migrateUserExperienceSettings","breakSourceKey","migrateStoredKeys","storedKeys","newKey","migrateSourceKey","currentValue","migrateHiddenAt","schemaVersionMigrations","1","versionBumpOnlyMigration","2","userExperienceSettings","3","4","relayReminder","5","6","migrations","nextAudioBoost","defaultAudioBoost","homeHubIdentifier","globalIdentifier","toHomeHubIdentifier","hub_","migration","preferInsecureConnections","viewedUnclaimedServers","settingsStorageKey","existingSettings","PLEX_TEST_TOKEN","testStorageModule","basicVolatileStorage","determineStorageModule","migrateLocalStorageUserExperienceSettings","dimensionKeys","pinIDInitial","paramName","regExp","full","getAllowedHeaders","forbiddenUsername","forbiddenDeviceName","providerVersion","providerVersionOverride","axiosConfig","finalUrl","nextConfig","cancelToken","paramsSerializer","omitProviderForbiddenHeadersFilter","nextHeaders","nextParams","makeRequest","post","put","del","isAxiosError","filteredError","createAPI","localizerAdapter","onInteract","mediaElement","elementsByType","createMediaElement","onReady","removeAttribute","releaseMediaElement","play","catch","serverEventManager","ServerEventManager","MediaServerEventConnectionRetryManager","UTM_REGEX","getCampaignParams","deviceIdentifier","campaign","product","screenResolution","destroyed","_suspended","hasSupport","onLog","onEnabled","onDisabled","onDestroyed","onSuspended","onResumed","_suspend","onLogMessage","onLogGroup","onLogGroupCollapsed","onLogGroupEnd","_resume","LOG_METHODS","initServers","getCloudServerConnection","initCloudServer","storedServers","storedServer","logInitServer","initStoredServers","serverFromConfig","configServer","shared","initConfigServer","bundledServer","initBundledServer","loopbackServer","initLoopbackServer","clearServers","connectionModel","ESSENTIAL_PLEX_TV_COOKIES","debouncedChangeTimeout","onHasInvalidTokenChange","onIsSignedInChange","onNotifyAccountChange","onIsSignedInChangeHandleToken","copyFromModel","handleInvalidToken","_updateUser","onIsSignedInChangeHandleSyncSettings","onIsSignedInChangeHandlePopulateUser","cookie","userSettings","dirtySettingIDs","userSetting","populateOptions","flexUserModel","renderToDOM","DndProvider","App","finalOptions","allowUrls","dsn","environment","ignoreErrors","integrations","sampleRate","finalTags","errorTrackerInitializer","reportersInitializer","commandsInitializer","desktopStorageInitializer","appModelInitializer","ajaxInitializer","desktopSettingsInitializer","userInitializer","languageInitializer","cloudServerEventInitializer","mediaServerEventInitializer","sourceInitializer","serverInitializer","mediaElementInitializer","companionInitializer","metricsInitializer","modalInitializer","alertInitializer","js2xml","resolveAllAndClear","deferreds","rejectAllAndClear","_debounceUnregisterPlayer","_unregisterPlayer","_debouncePickProxyServer","_pickProxyServer","_deepLinkDeferred","_playerRegistrationDeferreds","_playerUnregistrationDeferreds","_pollRetryDelay","timeline","proxyServer","timelineInflight","_pendingTimeline","pendingTimeline","publish","activeProxyServer","_clearPollRequestStatusCheck","_registerServer","proxiedBy","_isPollRequestPending","_checkPollRequestStatusLater","_clearRepollLater","deviceClass","protocolVersion","protocolCapabilities","_pollRequestStatusCheckTimeout","_checkPollRequestStatus","_pollRetryTimeout","_repoll","queryProviderIdentifier","queryShuffle","querySubtitleColor","querySubtitlePosition","subtitleOffset","querySubtitleOffset","stillWaitingForCommand","deferredAction","_sendResponse","controllerResponse","deviceName","_processCommand","_repollLater","localStorageGetItem","localStorageSetItem","localStorageRemoveItem","EMPTY_LEADER_INFO","electionDuration","maxLeaderAge","minLeaderRefreshDuration","getLeaderInfo","leaderID","LEADER_STORAGE_KEY","electionTimeout","wasLeader","isNowLeader","up","scheduleElection","_fn","down","tokenMemo","formatInterpolationValue","interpolateIteration","interpolate","tokenMatch","interpolateTokens","translate","isEscaped","loadingPromise","loadingLanguage","getLanguages","getTranslation","translations","languagesNow","basePath","onLoadSuccess","onLoadError","WAIT_DURATION","eventSource","waitDuration","awaitEvents","onAppModelRegistered","serverModels","awaitReady","Boolean","_model","_repopulateProviders","windowSize","screenSize","screen","appModel_","sessionStorage","persistentWebStorage","queue","_next","_canNext","ajaxOptions","_getAjaxOptions","onAjaxAlways","sendBeacon","findDeviceSettingsModel","findUserExperienceSettingsModel","settingModelFinders","rejectSecureConnectionTest","immediatelyRejectConnectionTest","deviceSettingsModel","rejectSecureLocalConnectionTest","rejectMixedContentTest","rejectDirectConnectionsSetting","timeStart","includeLegacyEndpoint","rootURL","isApplicable","isPrivateCriteriaMet","xhrOption","makeXHRFail","allXHRDeferred","whenDeferred","reason","latency","trackConnectionTest","xhrs","xhrStatus","isRequestUnauthorized","providerXHR","rootXHR","xhrErrorStatus","rejectConnectionTest","resolveConnectionTest","providerResponse","rootResponse","existingMachineIdentifier","sendConnectionTest","rejectDirectConnectionTest","isEligibleForCompanion","isServerSupported","isLocallyOwned","_throttlePickCompanionServer","_pickCompanionServer","companionServer","browserConnectionChangeDelay","$window","onBrowserConnectionChange","onTestAllServers","onTestServer","onServerAdd","onServerConnectionError","onServerConnectionAdd","onServerConnectionRemove","onServerConnectionsReset","onServerConnectionConnectedChange","onServerConnectionSourcesChange","onServerAccessTokenChange","onServerConnectedChange","onServerUnavailableChange","onServerPublicAddressMatchesChange","onSettingsSave","storedConnections","onLine","browserConnectionChangeTimeout","testOnlyUntestedConnections","abortAllConnectionTests","stopFailedServerRetries","previousServerID","signInUnsupervised","_removeConnection","previousConnections","isRelay","isEligibleConnection","storedConnection","startFailedServerRetries","propertyWhitelist","durationMilliseconds","durationSeconds","nearest","newValue","roundToNearest","privacySettings","_pendingPrivacyRequest","_pendingEvents","debouncedFetchPrivacySettings","fetchPrivacySettings","isPlaybackActive","userId","setUser","setPrivacySettings","trackPendingEvents","sendMMPEvent","rawPrivacySettings","metric","setBaseUrl","sessionStats","elapsedTime","measureName","getPerformanceMeasureName","contextTuple","sessionIdentifier","anonymousSessionIdentifier","lastInteractionTime","lastPlayingHeartbeatTime","flushSession","onCloudServerChange","onUserIDChange","stopSession","startSession","heartbeatTime","sessionId","anonymousSessionId","playbackCount","playbackTime","sessionLength","roundMetricsDuration","_appsflyerIntervalID","_appsflyerTimeoutID","onPrimaryServerEligibleChange","onPrimaryServerOutOfDateChange","onWaitingForServersChange","onPrimaryServerIsRelayedChange","onServersUpdate","_setPrimaryServer","_primaryServerPromise","metricsContext","primaryServerPromise","_waitForPrimaryServer","isWaitingForVersion","previousPrimaryServer","willPrimaryServerChange","populateCloudProviders","onProviderAdd","populateCloudProvider","getMatchingTestComparator","queued","executing","maximumConcurrent","throttledStartProcessing","_startProcessing","leading","_queuedOrExecuting","_sortQueue","_abortCurrentTest","_removeQueuedOrExecuting","serverA","serverB","connectionA","connectionB","manualConnectionA","_isManualConnection","manualConnectionB","matchingLocationA","_isMatchingLocation","matchingLocationB","_process","connectionTest","testServerConnection","connection_","connectionTestUrl","executingIndex","queuedIndex","toStableServerObject","storedServerAttrs","onServerPromiseStateChange","onServersUpdateReset","onResourceAdd","onResourceRemove","onResourcesUpdate","onResourcesReset","onResourcesPresenceChange","onResourceConnectionsUpdate","onConnectedChange","onSettingsPopulatedChange","onStoredServerAttributeChange","onDiscoverServers","_setAuthorized","_checkFoundAllServers","shouldWaitForInitialServers","shouldWaitForResources","shouldWaitForPendingServers","_waitForServers","_foundAllServers","waitForServers","foundAllServers","isResourcesPending","hasFailedResources","_fetchResources","isResourcesPopulated","resources_","_convertResourceToServer","isPMS","isAlwaysPMS","updateServerConnectionsFromResource","createServerFromResource","removeSource","hasConnectedMediaServer","hasResolvedCloudServer","attrValue","_removeResource","_pruneStaleSources","previousResources","stableServer","toStableServerModelJSON","serversSlice","serverNowPlayingSessionsSlice","onServerIsConnectedChange","onIsInstallingServerUpdateChange","sourceServer","sourceProvider","onCloudProviderAdd","onCloudProviderIsPendingChange","onCloudProvidersIsPendingChange","onServerIsProvidersPendingChange","onServerAttrChanged","onCloudReadyChange","sourceModel","pinnedSourcesToBeHidden","pinnedSourceModel","_shouldRemoveHiddenSource","_debouncedSaveExperienceSettings","_getPinnedSources","_hidePinnedSources","providersModel","serverMachineIdentifier","_hideSourcesWithNoProvider","findProviderContentFeatureDirectory","updatedPinnedSource","getSource","shallowEqual","userExperienceSettingsModel","providerKey","autoPinnedSources","_updateStoredPinnedSources","_autoPinSources","_processSources","_processCloudProviderChange","_hideCloudSourcesWithNoProvider","_processServerChange","_hideServerSourcesWithNoProvider","_hideSourcesWithNoServer","primary","tokenRegEx","emailRegEx","ipRegEx","passwordRegEx","scrubUrl","debugModel","onRoute","toJSONString","reconfigure","scrubResponse","responseLength","playerModel","uiModel","audioVideoPlayer","photoPlayer","romPlayer","audioVideoPlayerState","getTimelineState","photoPlayerState","selectUserExperienceSettings","createResponse","_code","_status","responseCode","inputActivity","notice","noticeInputActivity","canInstall","downloadURL","added","fixed","Release","otherAttrs","defaultLinkTarget","downloadUrl","getDownloadUrl","downloadName","LEVEL_FACTOR","h264","hevc","levelNumber","factor","isFinite","propertyName","currChar","upperChar","hiddenProperties","formatBytes","formatPlayerTime","bitrateMode","formatBoolean","optimizedForStreaming","has64bitOffsets","cabac","postURL","codecID","frameRate","dialogNorm","samplingRate","sanitizeProperties","exempt","sanitized","mapStreams","mapMedia","uPart","stickyProps","checkFiles","updateMedia","includeAllConcerts","includeBandwidths","includeChildren","includeFields","includeGeolocation","includeLoudnessRamps","includeMarkers","includeRelatedCount","includeReviews","hasFiles","hasStreams","showDeleteFile","showFilepath","isNinja","onMediaChange","mediaSectionOffset","maxTop","unadjustedTop","offsetTop","played","forceFetch","forceSyncCheckFiles","asyncRefreshAnalysis","asyncRefreshLocalMediaAgent","fetchMetadataItemModel","innerPromise","resolveOrigin","sourceAttr","providerContext","originMetadataItemModel","resolveIndirect","indirectMedia","NextMedia","getMediaDecision","augmentProfile","analyzeMedia","mediaToAnalyze","canPlay","canDirectPlay","decisions","getBestDecision","isVideo","playerUtil","generic","allowedAC3Containers","allowAC3AllContainers","allowedEAC3Containers","allowEAC3AllContainers","allowedDCAContainers","allowDCAAllContainers","allowedTrueHDContainers","allowTrueHDAllContainers","containerProfile","mergeGenericOptions","mergeMaxQualityOptions","addAudioCodec","primaryStreamProfile","primaryStreamCodecs","codecs","codecProfile","codecName","videoCodecOptions","mergeCodecOptions","secondaryStreamProfile","audio","audioCodecOptions","secondaryStreamCodecs","genericByType","profileByType","ensureCodecs","codecOptions","isCodecProfile","optionValue","getMaxQualityOption","primaryStreamName","maxName","maxOptionsValue","maxProfileValue","getPrimaryStreamProperty","maxValue","getMediaTitle","directPlayDecision","failedCheck","decision","finalProfile","preferredDirectPlayProtocol","canDirectPlayFailedCheck","canDisplayHDR","canDisplayDolbyVision","transcoderOptions","videoStream","directStreamDecision","canDirectStreamVideo","canDirectStreamVideoFailedCheck","audioStream","getSelectedAudio","canDirectStreamAudio","canDirectStreamAudioFailedCheck","getSelectedSubtitles","analyzeSubtitles","getEffectiveQuality","getDecisionLogs","directPlayProfile","forceDirectPlay","allowDirectPlay","canDirectPlayVideo","profileValue","skipCanPlayTypeTest","canPlayType","selectedStream","analyzeStream","validateProfileProperty","hasNativeHLS","hasFlash","hasDASH","elementType","streamProfile","directStreamAudio","codecValue","boundParam","isLowerBound","isUpperBound","burnLevel","isVodLike","isCloudLiveTvWithSubtitles","useSidecarSrtSubtitles","useSoftSubtitles","isBitmapSubtitles","allowDirectStreamVideoWithSoftSubtitles","validateParts","validateTranscoder","missingParts","missing","missingPart","isMusic","notPowerfulEnoughMessage","tryIncreasingQualityMessage","relayLimitationMessage","canTranscodeVideo","originalDecisionOptions","directStreamProfile","effectiveQuality","transcoderQualityOptions","videoBitrate","maxAudioBitrate","details","bestDecision","sortDecisions","preferHigherBitrate","preferMoreAudioChannels","preferDirectStreamAudio","preferHigherResolution","preferDirectStreamVideo","preferDirectPlayMatchingPreferredProtocol","preferDirectPlay","preferHigherResolutionIfCapable","preferCloudIfRemote","preferDirectPlayOrDirectStreamIfUHD","preferPlayable","isCloudProxy","findPrePlayPageModel","isMetadataForPage","containerKeyPattern","repopulatePageChildren","fetchPrePlayRelatedHubs","setFileUnavailable","prePlayPageModel","isFileUnavailable","INIT_PRE_PLAY_PAGE","hasUserFeature","relatedHubs","siblingKey","siblingList","INIT_PRE_PLAY_DESCENDANT_LIST","descendantKey","descendantList","INIT_PRE_PLAY_SIBLING_LIST","INIT_PRE_PLAY_AUGMENTED_HUBS","musicAugmentationTypes","metadataAugmentationTypes","isAugmentedHubsPending","isAugmentedHubsPopulated","augmentedHubs","fetchPrePlayAugmentedHubs","PRE_FETCH_PRE_PLAY_METADATA_ITEM","fetchPrePlayMetadataItem","FETCH_PRE_PLAY_METADATA_ITEM","isMetadataItemPending","isMetadataItemPopulated","metadataItemError","initPrePlayAugmentedHubs","FETCH_PRE_PLAY_RELATED_HUBS","FETCH_PRE_PLAY_AUGMENTED_HUBS","MAKE_PRE_PLAY_VIDEO_DECISION","decisionOptions","updatedSettings","mediaDecision","REPOPULATE_METADATA_ITEM","skipRefresh","REPOPULATE_PRE_PLAY_POPULAR_TRACKS","albumModel","albumMetadataItemEntityID","repopulateMetadataItem","metadataChildrenTypes","splitChildren","splitChild","activityEventActions","updated","ended","v4ActivityEventActions","MESSAGE_TYPES","REPOPULATE_THROTTLE_DELAY","updateLiveTVMetadata","BaseMediaServerEventConnection","throttledRepopulates","hasTimeout","repopulateNow","rootItemID","parentItemID","metadataTypeString","getMetadataKeyBase","updateMetadataItemRefreshingState","repopulatePrePlayPopularTracks","removeMetadataItem","repopulateWithThrottle","rootMetadataKey","rootMetadataItemEntityID","parentMetadataKey","parentMetadataItemEntityID","notificationName","metadataItemID","stateContext","BackgroundProcessingQueueCollection","playQueue","transcodeJobs","transcodeJob","hasPlexPass","parsedMessage","Activity","v4Action","_pendingEntities","onEntityChange","_addEntity","productVersion","provides","synced","Connection","includeHttps","includeRelay","includeIPv6","CloudServerModel","promisesPending","listServerNames","sortName","pendingInitialServers","pendingResourceServers","hasPendingResources","pendingServers","connectedServers","connectedList","relevantServers","currentServer","hasOnlyRejectedServers","changedServer","removedServer","removedIndex","requiresPopulate","findOptions","findByID","listenEvents","activeFilterPromise","filterPromise","filterServers","onServersChange","populateAnyServer","otherSessionAttrs","originalMachineIdentifier","isIntegrationsOnboarding","isIntegrationsPending","isIntegrationsPopulated","integrationsError","LIVE_TV_SESSION","channelCallSign","currentPosition","nextPosition","lastSeekPosition","startedAt","captureBuffer","grabOperation","MediaGrabOperationModel","airingMetadataItem","upNextMetadataItem","mediaSubscription","Timeline","DEFAULT_PLAYBACK_SESSION_ID","playbackSessionID","syncplaySessionRoomID","previousOpenState","FULL","MINI","openState","isPlayQueueVisible","isLyricsVisible","isPostPlayVisible","isSettingsVisible","isChaptersVisible","isSubtitlesOffsetSettingsVisible","isWatchTogetherLobbyVisible","isWatchTogetherParticipantsVisible","confirmPlayerUpsellPayload","confirmPlaybackPayload","confirmOffsetPayload","confirmRemoteToLocal","confirmLocalToRemote","currentDecision","startMetadataItemEntityID","startOffsetMilliseconds","startMediaIndex","positionSeconds","nextPositionSeconds","lastSeekPositionSeconds","seekStartSeconds","seekEndSeconds","bandwidthTimeline","lastInteractedAt","itemPlaybackTime","sessionPlaybackTime","isPlayQueueLoading","isLiveTVTuning","isMediaLoading","isPostPlayLoading","isPaused","repeatAll","repeatOne","controllable","metricsSetting","metricsAutoPlay","metricsPlayer","errorCode","errorCategory","playbackStartTime","hasConflicts","isConflictCancelling","cancelConflictError","confirmLiveTVPlayback","adState","adPositionSeconds","adDurationSeconds","adDisplayIndex","adDisplayTotal","adTimeOffsetSeconds","advertisingNoticePayload","bufferedRanges","canPlayThrough","mediaWidth","mediaHeight","liveTVSession","isUpdatePending","updateError","themeMusicUrl","allowBlur","isBackgroundPending","isDvrsPending","isDvrsPopulated","dvrsError","DVRCollection","isHubsPending","isHubsPopulated","hubsError","hubsTitle","isPromotedHubsPending","isPromotedHubsPopulated","promotedHubsError","knownPromotedHubCloudProviderIDs","promotedHubs","discoverPage","dvrSettingsUI","providerSettingsPage","serverLogPage","providerIntegrations","remindAt","vendorListVersion","vendors","european_union_member","MailingListState","UserSubscriptionState","UserSubscriptionType","createBoolRestrictionAttrType","createFilterAttrType","allowTuners","allowChannels","filterMovies","filterTelevision","filterMusic","filterPhotos","serverId","pending","accepted","inviteToken","invitedAt","acceptedAt","leftAt","numLibraries","allLibraries","sharingSettings","FRIEND","recommendationsPlaylistId","serverShares","guestUserID","autoSelectAudio","autoSelectSubtitle","defaultAudioLanguage","defaultSubtitleLanguage","defaultSubtitleAccessibility","defaultSubtitleForced","UserModel","hasInvalidAnonymousUserToken","isFeaturesPending","isAllFriendsPending","isAllFriendsPopulated","allFriendsError","confirmed","emailOnlyAuth","subscriptionDescription","locale","maxHomeSize","queueUid","queueEmail","mailingListActive","hasPassword","mailingListStatus","Unsubscribed","Active","Removed","adsConsent","adsConsentSetAt","adsConsentReminderAt","allFriends","pastSubscriptions","consent","geo","hasHomeMembers","homeOwnerDoesNotHaveSubscription","defaultOptions","onHomeUsersChange","remainingResponse","augmentedSettings","hasExperienceSettingsInResponse","splitSettings","gdprConsent","gdprSetAt","gdprReminderAt","entitlement","pastSubscription","_getSSOThenStorageTokenPromise","_getStorageTokenPromise","_getSkipAnonymousTokenPromise","storageTokenPromise","ssoTokenPromise","_getSSOTokenPromise","onSSOTokenMissing","signOutDueToInvalidToken","ssoToken","storageToken","onSSOTokenPresent","skipAuthentication","getUrlWithCampaignParams","_isSigningIn","tokenPromise","_getTokenPromise","userPromise","_getManualUserPromise","parsedAttrs","signOutAnonymousUser","userAttrs","userID","authenticate","deauthenticate","previousHomeUsers","onHomeUsersUpdate","availabilities","serverAccountsSlice","serverActivities","serverDevices","bandwidth","dashboardBandwidthSlice","playHistory","dashboardPlayHistorySlice","dashboardResourcesSlice","topPlayed","dashboardTopPlayedSlice","topUsers","dashboardTopUsersSlice","epgSettingsSlice","dashboard","libraryManagement","libraryManagementSlice","liveTVSlice","v4Reducer","tasks","idSelector","isRunning","worker","createServerAccountsSelector","Account","account","watchPopulateRequested","takeLeadingPerID","populateServerAccounts","watchFetchRequested","fetchServerAccounts","selectCore","populateServerDevices","fetchServerDevices","createPropertyTypeNormalizer","normalizeAsType","targetPropertyName","normalizedValue","valueType","nowPlayingSessionResponse","nowPlayingSession","normalizeAsNumber","normalizeAsBoolean","normalizeServerNowPlayingSessionsResponse","createServerNowPlayingSessionsSelector","Session","fetchSessions","watchSessionChanged","maybeFetchForChangedSession","watchStopRequested","dispatchLegacyAction","fetchLatestUserDetails","bodyFormData","unescape","watchFetchUserDetails","fetchUserDetails","watchUpdateUserDetails","updateUserDetails","userSaga","serverAccountsSaga","serverDevicesSaga","serverNowPlayingSessionsSaga","timespan","getTimezoneOffset","getUTCDate","StatisticsBandwidth","StatisticsResources","fetchMediaStatistics","StatisticsMedia","moviesResponse","tvResponse","musicResponse","gameResponse","fetchLibraryTopPlayed","accountID","viewedAt","watchBandwidthFetchRequested","task","fetchBandwidth","watchResourcesFetchRequested","fetchResources","watchTopUsersFetchRequested","fetchTopUsers","watchPlayHistoryFetchRequested","fetchPlayHistory","watchTopPlayedFetchRequested","fetchTopPlayed","channelMapping","lineupIdentifier","deviceResponse","normalizeAsString","ObjectValues","deviceSource","ChannelMapping","normalizeChannelMappingResponse","normalizeDevice","dvrResponse","Dvr","MediaSettingType","Int","Enum","Bool","Double","normalizeDevicesResponse","DeviceChannel","mediaSettingResponse","mediaSetting","normalizeMediaSettingsResponse","_error","createDeviceChannelsSelector","enabledChannels","channelMap","channelKey","deviceChannel","drm","channelsEnabled","requestPath","normalizeDVRResponse","lineups","selectSetupSelectedLineups","enableDeviceAndSaveChannelMappings","selectEPGSettings","addLineupsToDVR","selectDVRSetup","lineupsToAdd","Lineup","dvrLineup","discoverDevices","fetchDevices","fetchDeviceChannels","scanDeviceChannels","cancelScanDeviceChannels","saveChannelMappings","enableDevice","fetchDVR","addDevice","saveDVR","deleteDVR","addDVRDevice","removeDVRDevice","watchDevicesDiscoverRequested","watchDevicesFetchRequested","watchDeviceChannelsFetchRequested","watchDeviceChannelsScanRequested","watchDeviceChannelsCancelScanRequested","watchChannelMappingsSaved","watchDeviceEnableRequested","watchDeviceAddRequested","watchDVRFetchRequested","watchDVRSaveRequested","watchDVRDeleteRequested","watchAddDVRDeviceRequested","watchRemoveDVRDeviceRequested","lineupUUIDs","fetchLineupChannels","Language","urlSegments","lineupUUID","normalizeLineupChannelsResponse","fetchChannelMappings","searchBestEPGLineup","fetchEPGCountries","fetchEPGCountryRegions","fetchEPGLanguages","fetchEPGLineupGroup","addSelectedEPGLineupGroup","fetchSelectedDVRLineupChannels","watchChannelMappingsFetchRequested","watchBestEPGLineupSearchRequested","watchEPGCountriesFetchRequested","watchEPGCountryRegionsFetchRequested","watchEPGLanguagesFetchRequested","watchEPGLineupGroupFetchRequested","watchSelectedEPGLineupGroupAddRequested","watchSelectedDVRLineupChannelsFetchRequested","dvrSetupSaga","epgSettingsSaga","MERGE_RECENTLY_ADDED","fetchLatestHubs","fromIndex","toIndex","afterIdentifier","oldOptions","newOptions","hubsResponse","getHubManagementKey","metadataItemId","watchSettingsFetchRequested","watchSettingsUpdateRequested","updateSettings","watchHubsFetchRequested","fetchHubs","watchReorderRequested","reorderHubs","watchRemoveRequested","removeHub","watchResetRequested","resetHubs","watchPromoteRequested","promoteHub","watchPublishedFetchRequested","fetchPublishedItem","watchPublishedUpdateRequested","updatePublishedItem","normalizeChannelsResponse","fetchGuideChannels","watchGuideChannelsFetchRequested","dashboardSaga","dvrManagementSaga","libraryManagementSaga","liveTVSaga","sagaMiddleware","reducer","resetV4","middleware","coreSaga","featuresSaga","_currentState","anonymousClientID","authorized","castApiAvailability","createEntitiesModelClass","remotePlayer","federatedAuth","other","isUnlinking","unlinkError","authName","linked","nickname","usage","isOauthProvidersPending","isOauthProvidersPopulated","oauthProvidersError","oauthProviders","BACKGROUND_TRANSCODE_JOBS","queueItemID","syncItemTitle","Server","client","cancellable","manufacturer","serialNumber","nextID","_type","onSettingChange","onTimeline","onStatus","onPlaying","onWebSocket","TRANSCODE_JOBS","isLibrariesPending","isLibrariesPopulated","librariesError","ServerCloudAccountModel","players","neighborhoodDevices","linkURL","linkState","cloudPlayers","companions","sonos","screenDensity","products","HOME_USER","isAccepting","price","currency","isHomeUsersPending","isHomeUsersPopulated","homeUsersError","socialNetworks","isInvitesPending","isInvitesPopulated","invitesError","isSentInvitesPending","isSentInvitesPopulated","sentInvitesError","isWebhooksPending","isWebhooksPopulated","webhooksError","cloudCompanions","findProviderIntegrationsModel","INIT_PROVIDER_INTEGRATIONS","fetchProviderIntegrations","FETCH_PROVIDER_INTEGRATIONS","POLL_PROVIDER_INTEGRATIONS","INTEGRATIONS_ONBOARDING_COMPLETE","CREATE_LOCAST_ACCOUNT","pollProviderIntegrations","findSettingsFeatureModel","findProviderSettingByID","oldLineup","newLineup","channelModel","getUpdatePromise","parsedValues","FETCH_PROVIDER_SETTINGS","FETCH_PROVIDER_SETTING_SELECT_OPTIONS","FETCH_PROVIDER_SETTING_LOCATION_OPTIONS","POPULATE_PROVIDER_SETTING_LOCATION_OPTIONS","fetchProviderSettingLocationOptions","FETCH_PROVIDER_SETTING_LINEUP_CHANNELS","POPULATE_PROVIDER_SETTING_LINEUP_CHANNELS","fetchProviderSettingLineupChannels","FETCH_PROVIDER_SETTING_RECENT_CHANNELS_IN_GRID","POPULATE_PROVIDER_SETTING_RECENT_CHANNELS_IN_GRID","fetchProviderSettingRecentChannelsInGrid","UPDATE_PROVIDER_SETTING","settingsFeature","updatePromises","groupedSetting","groupedSettingValues","CLEAR_PROVIDER_SETTING_UPDATE_ERROR","CLEAR_PROVIDER_SETTING_FETCH_ERROR","POPULATE_PROVIDER_SETTING_OPTIONS","settingType","fetchProviderSettingSelectOptions","populateProviderSettingLocationOptions","populateProviderSettingLineupChannels","populateProviderSettingRecentChannelsInGrid","FETCH_OAUTH_PROVIDERS","UNLINK_OAUTH_PROVIDER","fetchOauthProviders","findBackgroundModel","backgroundModel","signInLaunchActionHandlers","oauthActionHandlers","providerIntegrationsActionHandlers","providerSettingsActionHandlers","backgroundActionHandlers","serverLogPageActions","CloudServerFlexModel","ServerFlexModel","UserFlexModel","currentActionHandlers","currentListeners","nextListeners","nextActionHandlers","allActionHandlers","handlersByType","handlerOrHandlers","groupActionHandlersByType","replaceActionHandlers","isSubscribed","ensureCanMutateNextListeners","createStore","createAppStore","companionVote","settingFinder","createSettingFinder","selectRemoteQuality","selectRestorePlayQueue","selectSubtitleSettings","selectLocalVolume","metricsReporter","createPlexMetricsReporter","companionServerManager","localCompanionCommandHandler","handleLocalCompanionCommand","mediaServerEventConnection","primaryServerManager","providerManager","serverConnectionManager","serverConnectionTestManager","serverManager","serverUpdateManager","sourceManager","baseDesktopAdaptersInitializer","desktopAdaptersInitializer","appInitializer","defaultSpeed","slowSpeed","fastSpeed","motionEasing","modalSpeed","menuSpeed","tooltipSpeed","selectedColor","blackDarkTranslucent","blackDarkerTranslucent","defaultColor","quietColor","inverseColor","primaryColor","primaryAlternateColor","successColor","dangerColor","warningColor","focusColor","appBackgroundColor","darkOpaqueBackgroundColor","blackDarkTranslucentBackgroundColor","blackDarkerTranslucentBackgroundColor","lightTranslucentBackgroundColor","badgeBackgroundColor","defaultBadgeColor","defaultLinkColor","defaultLinkHoverColor","defaultLinkDisabledLinkColor","selectedLinkColor","selectedLinkHoverColor","defaultBackgroundColor","defaultHoverBackgroundColor","defaultActiveBackgroundColor","defaultDisabledBackgroundColor","primaryBackgroundColor","primaryHoverBackgroundColor","primaryActiveBackgroundColor","primaryDisabledColor","primaryDisabledBackgroundColor","quietBackgroundColor","quietHoverBackgroundColor","quietActiveBackgroundColor","successBackgroundColor","successHoverBackgroundColor","successActiveBackgroundColor","successDisabledBackgroundColor","dangerBackgroundColor","dangerHoverBackgroundColor","dangerActiveBackgroundColor","dangerDisabledBackgroundColor","darkBackgroundColor","darkHoverBackgroundColor","darkActiveBackgroundColor","darkDisabledBackgroundColor","headerColor","dimColor","secondaryContentColor","shadowColor","dividerColor","scrollbarBackgroundColor","scrollbarHoverBackgroundColor","scrollbarInactiveBackgroundColor","errorBackgroundColor","inputBackgroundColor","inputFocusBackgroundColor","inputColor","inputFocusColor","inputPlaceholderColor","inputDisabledOpacity","formSectionBackgroundColor","formSectionHoverBackgroundColor","modalBackdropBackgroundColor","modalBackgroundColor","modalBodyBackgroundColor","menuBackgroundColor","menuDisabledBackgroundColor","menuItemHoverBackgroundColor","menuItemActiveBackgroundColor","menuSeparatorBackgroundColor","tooltipBackgroundColor","pageHeaderBackgroundColor","pageHeaderLinkColor","pageHeaderLinkHoverColor","pageHeaderColor","searchFocusBackgroundColor","searchInputColor","searchInputFocusColor","searchImagePlaceholderBackgroundColor","searchHoverResultBackgroundColor","searchSelectedResultBackgroundColor","searchResultTitleColor","searchResultTitleSelectedColor","searchResultSecondaryTitleColor","sidebarBackgroundColor","sidebarMenuButtonBackgroundColor","sidebarMenuButtonHoverBackgroundColor","sidebarMenuButtonActiveBackgroundColor","stripeListAlternateBackgroundColor","stripeListHoverBackgroundColor","stripeListSelectedBackgroundColor","liveTVSettingsAddDeviceButtonBackground","liveTVSettingsBackground","smallSize","mediumSize","largeSize","gapSmall","gapMedium","gapLarge","navigationHeaderHeight","navigationUserMenuImageSize","pageHeaderHeight","breadcrumbMargin","menuSmallWidth","menuMediumWidth","menuLargeWidth","menuPadding","menuItemTopPadding","menuItemSidePadding","toolbarButtonWidth","posterTitlePadding","posterTitleHeight","searchHubTitleHeight","searchResultWidth","searchResultHeight","searchResultActionsButtonWidth","universalSearchResultHeight","sidebarWidth","sidebarRightGutterWidth","sidebarLeftGutterWidth","tableCellPadding","tableHeaderHeight","tableRowHeight","tableTitleHeight","inputMaxWidth","inputBorderRadius","autosuggestSuggestionRadius","smallArrowWidth","mediumArrowWidth","largeArrowWidth","tooltipArrowSize","tooltipMarginTop","breakpointMobileNarrow","breakpointExtraSmall","breakpointSmall","breakpointMedium","breakpointLarge","modalBodyPadding","avatarFormEditSize","avatarFormSectionSize","string_to_array","res","SHA256_init","SHA256_H","SHA256_buf","SHA256_len","SHA256_write","SHA256_Hash_Byte_Block","SHA256_finalize","SHA256_hexchars","SHA256_K","SHA256_sigma0","SHA256_Sigma0","SHA256_Sigma1","SHA256_Ch","z","SHA256_Maj","H","w","W","T1","T2","SHA256_Hash_Word_Block","SHA256_hash","ary","array_to_hex_string","HMAC_SHA256_init","HMAC_SHA256_key","HMAC_SHA256_write","HMAC_SHA256_finalize","md","depth0","helpers","compilerInfo","helper","escapeExpression","stack1","__esModule","program","__default","program2","noop","functionType","program4","program6","program9","program7","program12","program10","warningMessage","unless","hideCancel","programWithDepth","depth1","program8","program14","program16","program5","depth2","program13","program11","program15","program18","program21","program23","program24","program33","program27","program25","program30","program28","program31","program36","program3","program1","program20","scopeToAttr","scopeToParam","locked","onlyDelete","rows","idSuffix","excludeParam","excludeValue","IconAlert","IconRemove","__webpack_require__","O","E"],"sourceRoot":""}