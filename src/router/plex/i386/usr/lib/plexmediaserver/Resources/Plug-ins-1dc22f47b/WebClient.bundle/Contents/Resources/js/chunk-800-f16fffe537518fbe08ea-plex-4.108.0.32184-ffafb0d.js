(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[800,1313,8923,465,8763],{61313:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(67294),i=r(12208);const s=(0,n.forwardRef)((function({align:e="none","aria-label":t,color:r="inherit",size:s="inherit",testID:o},l){return n.createElement("svg",{ref:l,"aria-hidden":!t,"aria-label":t,className:(0,i.J)({align:e,color:r,size:s}),"data-testid":o,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M9 6H12V42H9V6Z",fill:"currentColor"}),n.createElement("path",{clipRule:"evenodd",d:"M27 6H21C20.2044 6 19.4413 6.31607 18.8787 6.87868C18.3161 7.44129 18 8.20435 18 9V39C18 39.7957 18.3161 40.5587 18.8787 41.1213C19.4413 41.6839 20.2044 42 21 42H27C27.7956 42 28.5587 41.6839 29.1213 41.1213C29.6839 40.5587 30 39.7957 30 39V9C30 8.20435 29.6839 7.44129 29.1213 6.87868C28.5587 6.31607 27.7956 6 27 6ZM27 9V39H21V9H27Z",fill:"currentColor",fillRule:"evenodd"}),n.createElement("path",{d:"M39 6H36V42H39V6Z",fill:"currentColor"}))}))},98923:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(67294),i=r(12208);const s=(0,n.forwardRef)((function({align:e="none","aria-label":t,color:r="inherit",size:s="inherit",testID:o},l){return n.createElement("svg",{ref:l,"aria-hidden":!t,"aria-label":t,className:(0,i.J)({align:e,color:r,size:s}),"data-testid":o,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M40.5 22.5H7.5V25.5H40.5V22.5Z",fill:"currentColor"}))}))},50465:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(67294),i=r(12208);const s=(0,n.forwardRef)((function({align:e="none","aria-label":t,color:r="inherit",size:s="inherit",testID:o},l){return n.createElement("svg",{ref:l,"aria-hidden":!t,"aria-label":t,className:(0,i.J)({align:e,color:r,size:s}),"data-testid":o,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M24 4.5C24.8284 4.5 25.5 5.17157 25.5 6V37.3787L29.4393 33.4393C30.0251 32.8536 30.9749 32.8536 31.5607 33.4393C32.1464 34.0251 32.1464 34.9749 31.5607 35.5607L25.0607 42.0607C24.4749 42.6464 23.5251 42.6464 22.9393 42.0607L16.4393 35.5607C15.8536 34.9749 15.8536 34.0251 16.4393 33.4393C17.0251 32.8536 17.9749 32.8536 18.5607 33.4393L22.5 37.3787V6C22.5 5.17157 23.1716 4.5 24 4.5Z",fill:"currentColor",fillRule:"evenodd"}))}))},18763:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(67294),i=r(12208);const s=(0,n.forwardRef)((function({align:e="none","aria-label":t,color:r="inherit",size:s="inherit",testID:o},l){return n.createElement("svg",{ref:l,"aria-hidden":!t,"aria-label":t,className:(0,i.J)({align:e,color:r,size:s}),"data-testid":o,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M24 42.5C24.8284 42.5 25.5 41.8284 25.5 41V9.62132L29.4393 13.5607C30.0251 14.1464 30.9749 14.1464 31.5607 13.5607C32.1464 12.9749 32.1464 12.0251 31.5607 11.4393L25.0607 4.93934C24.4749 4.35355 23.5251 4.35355 22.9393 4.93934L16.4393 11.4393C15.8536 12.0251 15.8536 12.9749 16.4393 13.5607C17.0251 14.1464 17.9749 14.1464 18.5607 13.5607L22.5 9.62132V41C22.5 41.8284 23.1716 42.5 24 42.5Z",fill:"currentColor",fillRule:"evenodd"}))}))},97552:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>xs});var n=r(67294),i=r(69605),s=r(26636),o=r(74309),l=r(2200),a=r(28216),c=r(81079),u=r(47486),d=r(86953),m=r(27082),p=r(84936),y=r(45399),h=r(41538),f=r(87803),v=r(31235),g=r(24546),E=r(56077),P=r(76714),b=r(18778),w=r(23201),I=r(31764),Z=r(15397),O=r(4134),S=r(29039),D=r(35154),A=r(77927),C=r(88050),T=r(93474),x=r(63098),M=r(26021),L=r(72071),j=r(45593),R=r(94184),k=r.n(R),H=r(7400),N=r(94372),z=r(9119),K=r(75534),F=r(21914),U=r(46905),q=r(64780),G=r(12038),V=r(7796);const W="PivotTabDropdown-isSelected-UQdIdh",B={placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[parseInt(V.Z.pageHeaderTabButtonLeftRightMargin,10)]}}]};function _({pivots:e,selectedPivot:t,onPivotPress:r}){var i;const[s,o,l]=(0,v.c9)(),a=(0,K.Z)(),c=(0,U.Z)();return n.createElement("div",{className:"PivotTabDropdown-container-KCsIVr","data-testid":"tabDropDown",id:a},n.createElement(x.Z,{className:k()("PivotTabDropdown-button-ktD72U TabButton-button-KPkGEB Button-button-Eu0WcX Link-link-vSsQW1",!!t&&W),isSelected:!!t,onPress:c.onToggle},n.createElement("div",{className:"PivotTabDropdown-buttonContents-dK9CFT"},n.createElement("div",{className:"PivotTabDropdown-title-wqZjjy"},null!=(i=null==t?void 0:t.title)?i:e[0].title),n.createElement(H.Z,{className:k()("PivotTabDropdown-disclosureArrow-z_MOta DisclosureArrow-disclosureArrow-NTDkGd",!!t&&W),direction:c.isOpen?F.UP:F.WV}))),n.createElement(N.Z,{isOpen:c.isOpen,options:B,target:a,onMenuClose:c.onClose},e.map(((e,i)=>{const a=(0,q.Z)(s,o,l,e);return a?n.createElement(G.Z,{key:i,isSelected:e===t,to:a,value:e.key,onPress:(0,z.Z)(r,c.onClose)},e.title):null}))))}var Q=r(62250),$=r(59398);function J({pivots:e,selectedPivot:t}){const[r,i,s]=(0,v.c9)(),[o,{width:l}]=(0,M.Z)(),[c,{width:u}]=(0,M.Z)(),d=(0,a.v9)(j.Z),[m,p]=(0,n.useState)(u),y=u||m,h=(0,n.useMemo)((()=>(0,Q.Z)(e,d)),[e,d]),f=h.length<2,g=h.length>1&&y>l,E=(0,L.Z)({identifier:i.metricsIdentifier,origin:T.zQ}),P=(0,$.Z)((0,n.useCallback)((()=>{E({action:C.oG})}),[E]));return(0,n.useEffect)((()=>{u&&p(u)}),[u]),f?null:n.createElement("div",{ref:o,className:"PivotTabsPageHeaderCenter-pageHeaderCenter-HE9JcN PageHeaderCenter-pageHeaderCenter-mMF86x"},g?n.createElement(_,{pivots:h,selectedPivot:t,onPivotPress:P}):n.createElement("div",{ref:c},h.map(((e,o)=>{const l=(0,q.Z)(r,i,s,e);return l?n.createElement(x.Z,{key:o,isSelected:e===t,to:l,onPress:P},e.title):null}))))}var X=r(88346),Y=r(38825),ee=r(79440),te=r(31247),re=r(67586),ne=r(36656),ie=r(26606),se=r(42934);var oe=Object.defineProperty,le=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,me=(e,t,r)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function pe({sourceURI:e,selectedPivot:t}){var r;const i=(0,a.I0)(),[,,o]=(0,v.c9)(),{meta:l,metadataListSourceURI:c,hubsList:{sourceURI:u}}=(0,a.v9)(te.Z),d=null!=(r=null==l?void 0:l.Pivot)?r:null==o?void 0:o.pivots,p=(0,a.v9)((0,A.Z)("directoryListStyles")),y=(0,n.useMemo)((()=>(0,Y.Z)(e)),[e]),h=(0,a.v9)(y),f=(0,n.useMemo)((()=>(0,ee.Z)(e)),[e]),g=(0,a.v9)(f),E=(0,n.useCallback)((t=>{if(!e)return;const r=(n=((e,t)=>{for(var r in t||(t={}))ue.call(t,r)&&me(e,r,t[r]);if(ce)for(var r of ce(t))de.call(t,r)&&me(e,r,t[r]);return e})({},p),le(n,ae({[e]:t})));var n;(0,m.c9)((()=>{i((0,O.LN)({directoryListStyles:r}))}))}),[i,p,e]);return(0,n.useEffect)((()=>{t&&!(null==d?void 0:d.find((e=>e.key===t.key)))&&i(X.Z.actions.resetMeta())}),[i,d,t]),n.createElement(se.Z,{className:"DirectoryPageHeader-pageHeader-FgozlU PrimaryPageHeader-pageHeader-SBemrw PageHeader-pageHeader-e2k66t"},n.createElement(ne.Z,null,n.createElement(D.Z,{hubsListSourceURI:t&&t.type!==s.F6.Hub?void 0:u,metadataListSourceURI:t&&t.type!==s.F6.List?void 0:c})),d&&t?n.createElement(J,{pivots:d,selectedPivot:t}):null,n.createElement(ie.Z,null,n.createElement(S.Z,{listStyles:g,selectedListStyle:t&&!(0,re.Z)(t)&&(P=t.key,P!==s.GG.SharedItems&&P!==s.GG.DiscoverFriends&&P!==s.GG.DiscoverProfile&&P!==s.GG.DiscoverActivity)?h:void 0,onListStyleSelect:E})));var P}var ye=r(8389),he=r(24453),fe=r(53162),ve=r(71594),ge=r(5562),Ee=r(89186),Pe=r(24418),be=r(28582),we=r(41542),Ie=r(87212),Ze=r(96940),Oe=r(91859),Se=r(49005),De=r(54778),Ae=r(52735),Ce=r(58836),Te=r(42074),xe=r(29298),Me=r(4704);var Le=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable;function ke(e){var t=e,{item:r}=t,i=((e,t)=>{var r={};for(var n in e)je.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Le)for(var n of Le(e))t.indexOf(n)<0&&Re.call(e,n)&&(r[n]=e[n]);return r})(t,["item"]);const s=(0,De.Z)(i),o=(0,a.v9)(Oe.Z),{remove:l}=(0,Ae.Z)(),c=(0,Me.Z)(null==r?void 0:r.friendStatus),u=(0,n.useRef)(),[d,m]=(0,n.useState)(!1),{onAddFriendPress:p,isAdding:y}=(0,Te.Z)(r);(0,n.useEffect)((()=>{r&&void 0!==c&&c!==r.friendStatus&&(m(!0),u.current=window.setTimeout((()=>{l(r.id),u.current=void 0}),3e3))}),[r,c,l]),(0,n.useEffect)((()=>()=>{r&&u.current&&(window.clearTimeout(u.current),l(r.id))}),[r,null==r?void 0:r.id,l]);const h=(0,xe.Z)("userProfile",{id:r.id});return n.createElement("div",{className:d?"FriendSuggestionHubItem-disabled-hq60Kk":void 0,style:s.style},n.createElement(fe.Kq,{height:"100%"},n.createElement(Ze.Wf,{posterStyle:"landscape",width:i.cellWidth},n.createElement(fe.Kq,{gap:"m",height:i.cellHeight,orientation:"horizontal",padding:"m",verticalAlign:"center"},n.createElement(Ze.Wf,{posterStyle:"circle",width:88},n.createElement(Se.Z,{server:o,size:88,url:r.avatar}),n.createElement(Ze.JB,{href:h,posterStyle:"circle"})),n.createElement(fe.Kq,{gap:"m",height:"100%",verticalAlign:"space-between"},n.createElement(fe.Kq,{gap:"xxs"},n.createElement(fe.Kq,null,n.createElement(ve.x,{color:"default",level:"body-1",numberOfLines:1},n.createElement(Ie.rU,{href:h},r.displayName||r.username)),r.displayName?n.createElement(ve.x,{color:"muted",level:"body-3",numberOfLines:1},r.username):null),n.createElement(Ce.Z,{mutualFriends:r.mutualFriends})),n.createElement(fe.Kq,{gap:"s",orientation:"horizontal",verticalAlign:"center"},n.createElement(we.zx,{isWaiting:y,size:"xs",onPress:p},(0,ge.Z)("Add Friend"))))))))}var He=r(80656);function Ne(){return(0,He.Z)({columnWidth:320,rowHeight:127,innerHorizontalPadding:16,outerPaddingRight:16,outerPaddingBottom:16})}var ze=r(82387);const Ke="Hub-header-e9sVK9 VirtualHubScroller-hubHeader-vSW06t",Fe="Hub-hub-LVoiQu";var Ue=Object.defineProperty,qe=Object.defineProperties,Ge=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,_e=(e,t,r)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Qe=Ne(),$e="friendSuggestionsHub";function Je(){const{data:e,isSuccess:t}=(0,ze.Bq)(),r=(0,n.useMemo)((()=>e=>{const{item:t}=e;return t?n.createElement(ke,(r=((e,t)=>{for(var r in t||(t={}))We.call(t,r)&&_e(e,r,t[r]);if(Ve)for(var r of Ve(t))Be.call(t,r)&&_e(e,r,t[r]);return e})({},e),i={key:`friendSuggestion-${t.id}`,item:t},qe(r,Ge(i)))):n.createElement(n.Fragment,null);var r,i}),[]);return t?n.createElement(be.Z,{cellComponentFactory:r,className:Fe,hub:{sourceURI:$e,title:(0,ge.Z)("Friend Suggestions")},hubHeaderClassName:Ke,hubTitleComponent:Pe.Z,items:e.suggestedUsers,layout:Qe,scrollerKey:$e,totalSize:e.suggestedUsers.length}):null}var Xe=r(48918),Ye=r(29690),et=r(39822),tt=r(65233),rt=r(55886),nt=r(12671),it=r(4570),st=r(4823);function ot(){const e=(0,a.v9)(Oe.Z),{friends:t,isPopulated:r}=(0,st.Z)(et.Z,Ye.Z.actions.fetchCommunityFriends),{data:i}=(0,a.v9)(ze.hi.endpoints.friendRequests.select((0,nt.Z)(it.ay.Received))),{data:s}=(0,a.v9)(ze.hi.endpoints.friendRequests.select((0,nt.Z)(it.ay.Sent)));if(!(null==i?void 0:i.friendRequests)||!(null==s?void 0:s.friendRequests)||!r)return null;const o=i.friendRequests.count||0,l=s.friendRequests.count||0;return o>0||l>0||t.length>0?null:n.createElement(fe.Kq,{paddingTop:"xxl"},n.createElement(Ze.Wf,{posterStyle:"landscape",width:"100%"},n.createElement(fe.Kq,{gap:"m",orientation:"horizontal",padding:"xs",verticalAlign:"center",wrap:!0},n.createElement(tt.Z,{durationMilliseconds:0,height:150,src:Xe,width:150}),n.createElement(fe.Kq,{align:"left",gap:"s",verticalAlign:"center"},n.createElement(fe.Kq,{gap:"xxs",verticalAlign:"center"},n.createElement(ve.x,{color:"inherit",level:"dep-heading-5"},(0,ge.Z)("Plex is better with friends.")),n.createElement(ve.x,{color:"muted"},(0,ge.Z)("Invite friends and family to Plex. Discover what theyâ€˜re watching, their ratings and watchlist items."))),n.createElement(rt.Z,{friends:t,server:e},n.createElement(we.zx,{size:"s"},(0,ge.Z)("Invite")))))))}var lt=r(79801),at=r(42902),ct=r(61429),ut=r(85359),dt=Object.getOwnPropertySymbols,mt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable;function yt(e){var t=e,{type:r}=t,i=((e,t)=>{var r={};for(var n in e)mt.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&dt)for(var n of dt(e))t.indexOf(n)<0&&pt.call(e,n)&&(r[n]=e[n]);return r})(t,["type"]);const{item:s}=i,o=(0,De.Z)(i),l=(0,a.v9)(Oe.Z),{isAccepting:c,isRejecting:u,isRemoving:d,onAcceptPress:m,onRemovePress:p}=(0,ut.Z)(s,r);if(!s)return null;const y=(0,xe.Z)("userProfile",{id:s.user.id});return n.createElement("div",{style:o.style},n.createElement(fe.Kq,{height:"100%"},n.createElement(Ze.Wf,{posterStyle:"landscape",width:i.cellWidth},n.createElement(fe.Kq,{gap:"m",height:i.cellHeight,orientation:"horizontal",padding:"m",verticalAlign:"center"},n.createElement(Ze.Wf,{posterStyle:"circle",width:88},n.createElement(Se.Z,{server:l,size:88,url:s.user.avatar}),n.createElement(Ze.JB,{href:y,posterStyle:"circle"})),n.createElement(fe.Kq,{gap:"m"},n.createElement(fe.Kq,{gap:"xxs"},n.createElement(fe.Kq,null,n.createElement(ve.x,{color:"default",level:"body-1",numberOfLines:1},n.createElement(Ie.rU,{href:y},s.user.displayName||s.user.username)),s.user.displayName?n.createElement(ve.x,{color:"muted",level:"body-3",numberOfLines:1},s.user.username):null),r===it.ay.Sent?n.createElement(ve.x,{color:"muted",level:"body-3"},(0,ct.Z)((0,at.Z)(new Date(s.createdAt)),{limit:"past",includeAgoSuffix:!0,shorthand:!1,roundDays:"floor"})):null,r===it.ay.Received?n.createElement(Ce.Z,{mutualFriends:s.user.mutualFriends}):null),n.createElement(fe.Kq,{gap:"s",orientation:"horizontal",verticalAlign:"center"},r===it.ay.Received?n.createElement(we.zx,{color:"accent",isDisabled:u,isWaiting:c,size:"xs",onPress:m},(0,ge.Z)("Confirm")):null,n.createElement(we.zx,{isDisabled:c,isWaiting:u||d,size:"xs",onPress:p},r===it.ay.Sent?(0,ge.Z)("Delete"):(0,ge.Z)("Decline"))))))))}var ht=r(65667),ft=Object.defineProperty,vt=Object.defineProperties,gt=Object.getOwnPropertyDescriptors,Et=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,wt=(e,t,r)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const It=Ne(),Zt="receivedFriendRequestsHub";function Ot(){const e=(0,a.I0)(),{requests:t,totalSize:r,count:i,isPopulated:s,hasNextPage:o,getNextPage:l,refreshTag:c}=(0,ht.Z)(it.ay.Received),u=(0,a.v9)(lt.Z);(0,n.useEffect)((()=>{u&&(c(u),e(Ye.Z.actions.clearReceivedFriendRequests()))}),[e,c,u]);const d=(0,n.useCallback)((()=>n.createElement(ve.x,{color:"primary",level:"heading-2"},s?(0,ge.Z)("Friend Requests ({count})",{count:i}):(0,ge.Z)("Friend Requests"))),[s,i]),m=(0,n.useMemo)((()=>e=>{return e.item?n.createElement(yt,(t=((e,t)=>{for(var r in t||(t={}))Pt.call(t,r)&&wt(e,r,t[r]);if(Et)for(var r of Et(t))bt.call(t,r)&&wt(e,r,t[r]);return e})({},e),r={key:`receivedRequest-${e.item.user.id}`,type:it.ay.Received},vt(t,gt(r)))):n.createElement(n.Fragment,null);var t,r}),[]);return 0===i?null:n.createElement(be.Z,{cellComponentFactory:m,className:Fe,hub:{sourceURI:Zt},hubHeaderClassName:Ke,hubTitleComponent:d,items:null!=t?t:[],layout:It,scrollerKey:Zt,totalSize:r+Number(o),onPageRequest:l})}var St=r(60749),Dt=Object.defineProperty,At=Object.defineProperties,Ct=Object.getOwnPropertyDescriptors,Tt=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable,Lt=(e,t,r)=>t in e?Dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const jt=Ne(),Rt="sentFriendRequestsHub";function kt(){const e=(0,a.I0)(),{requests:t,totalSize:r,count:i,isPopulated:s,hasNextPage:o,getNextPage:l,refreshTag:c}=(0,ht.Z)(it.ay.Sent),u=(0,a.v9)(St.Z);(0,n.useEffect)((()=>{u&&(c(u),e(Ye.Z.actions.clearSentFriendRequests()))}),[e,c,u]);const d=(0,n.useCallback)((()=>n.createElement(ve.x,{color:"primary",level:"heading-2"},s?(0,ge.Z)("Requests Sent ({count})",{count:i}):(0,ge.Z)("Requests Sent"))),[s,i]),m=(0,n.useMemo)((()=>e=>{return e.item?n.createElement(yt,(t=((e,t)=>{for(var r in t||(t={}))xt.call(t,r)&&Lt(e,r,t[r]);if(Tt)for(var r of Tt(t))Mt.call(t,r)&&Lt(e,r,t[r]);return e})({},e),r={key:`sentRequest-${e.item.user.id}`,type:it.ay.Sent},At(t,Ct(r)))):n.createElement(n.Fragment,null);var t,r}),[]);return 0===i?null:n.createElement(be.Z,{cellComponentFactory:m,className:Fe,hub:{sourceURI:Rt},hubHeaderClassName:Ke,hubTitleComponent:d,items:null!=t?t:[],layout:jt,scrollerKey:Rt,totalSize:r+Number(o),onPageRequest:l})}var Ht=r(18798),Nt=r(66011),zt=r(9683),Kt=r(56435),Ft=r(13186),Ut=r(49111),qt=r(57051),Gt=r(5513),Vt=r(19427),Wt=r(25824),Bt=r(49666),_t=r(14146),Qt=r(8980),$t=r(81195),Jt=r(48433);function Xt({user:e}){const{isAcceptFriendVisible:t,isAddFriendVisible:r,isCancelFriendVisible:i,isAdding:s,isAccepting:o,isRemoving:l,onAcceptFriendPress:a,onAddFriendPress:c,onCancelFriendPress:u}=(0,Te.Z)(e);return r?n.createElement(we.zx,{isWaiting:s,size:"xs",onPress:c},(0,ge.Z)("Add Friend")):i?n.createElement(we.zx,{isWaiting:l,size:"xs",onPress:u},(0,ge.Z)("Invited")):t?n.createElement(we.zx,{isWaiting:o,size:"xs",onPress:a},(0,ge.Z)("Confirm")):n.createElement(we.hU,{icon:"friend-added",isDisabled:!0,size:"xs"},(0,ge.Z)("Friends"))}var Yt=Object.defineProperty,er=Object.getOwnPropertySymbols,tr=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable,nr=(e,t,r)=>t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ir(e){var t=e,{item:r,highlightedIndex:i,getItemProps:s}=t,o=((e,t)=>{var r={};for(var n in e)tr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&er)for(var n of er(e))t.indexOf(n)<0&&rr.call(e,n)&&(r[n]=e[n]);return r})(t,["item","highlightedIndex","getItemProps"]);const l=(0,De.Z)(o),c=(0,a.v9)(Oe.Z);if(!r)return null;const u=s({style:l.style,index:o.cellIndex,item:r}),d=(0,xe.Z)("userProfile",{id:r.id}),m=i===o.cellIndex;return n.createElement("div",((e,t)=>{for(var r in t||(t={}))tr.call(t,r)&&nr(e,r,t[r]);if(er)for(var r of er(t))rr.call(t,r)&&nr(e,r,t[r]);return e})({},u),n.createElement(Jt.Z,{className:"UserSearchRowItem-row-h3Wd9P",isHovered:m},n.createElement(fe.Kq,{align:"space-between",height:"100%",orientation:"horizontal",paddingX:"m",verticalAlign:"center",width:"100%"},n.createElement(fe.Kq,{gap:"m",orientation:"horizontal",verticalAlign:"center",width:"100%"},n.createElement(Ze.Wf,{posterStyle:"circle",width:48},n.createElement(Se.Z,{server:c,size:48,url:r.avatar}),n.createElement(Ze.JB,{href:d,posterStyle:"circle"})),n.createElement(fe.Kq,{align:"space-between",orientation:"horizontal",verticalAlign:"center",width:"100%"},n.createElement(fe.Kq,{verticalAlign:"center"},n.createElement(fe.Kq,{verticalAlign:"center"},n.createElement(ve.x,{color:"primary",level:"body-2",numberOfLines:1},n.createElement(Ie.rU,{href:d},r.displayName||r.username)),r.displayName?n.createElement(ve.x,{color:"muted",level:"body-3",numberOfLines:1},r.username):null),n.createElement(Ce.Z,{color:"default",mutualFriends:r.mutualFriends})),m?n.createElement(Xt,{user:r}):null)))))}var sr=Object.defineProperty,or=Object.defineProperties,lr=Object.getOwnPropertyDescriptors,ar=Object.getOwnPropertySymbols,cr=Object.prototype.hasOwnProperty,ur=Object.prototype.propertyIsEnumerable,dr=(e,t,r)=>t in e?sr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const mr=(0,_t.Z)({rowHeight:parseInt(Bt.Z.searchResultHeight,10),overscan:1});function pr({users:e,errorMessage:t,query:r,highlightedIndex:i,getItemProps:s}){const o=(0,n.useMemo)((()=>e=>{return e.item?n.createElement(ir,(t=((e,t)=>{for(var r in t||(t={}))cr.call(t,r)&&dr(e,r,t[r]);if(ar)for(var r of ar(t))ur.call(t,r)&&dr(e,r,t[r]);return e})({},e),or(t,lr({getItemProps:s,highlightedIndex:i})))):n.createElement(n.Fragment,null);var t}),[s,i]);return n.createElement("div",{className:"UserSearchResults-list-Q5zcAg"},0===e.length||t?n.createElement(fe.Kq,{padding:"s"},n.createElement($t.Z,{query:r})):n.createElement(Qt.Z,{cellComponentFactory:o,className:"UserSearchResults-scroller-lUJmgj VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko UserSearchResults-list-Q5zcAg",items:e,keyPropName:"id",layout:mr,scrollerKey:r,totalSize:e.length}))}var yr=r(77437),hr=r(68869),fr=r(34608),vr=r(97327);var gr=Object.defineProperty,Er=Object.defineProperties,Pr=Object.getOwnPropertyDescriptors,br=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,Zr=(e,t,r)=>t in e?gr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Or=(e,t)=>{for(var r in t||(t={}))wr.call(t,r)&&Zr(e,r,t[r]);if(br)for(var r of br(t))Ir.call(t,r)&&Zr(e,r,t[r]);return e},Sr=(e,t)=>Er(e,Pr(t));function Dr(){const e=(0,a.I0)(),{anchorRef:t,maxHeight:r,width:i,onInteractOutside:s}=(0,Wt.Z)({heightOffset:400}),{users:o,isFetching:l,isUninitialized:c,error:u,search:d,reset:m}=function(){const[e,t]=(0,n.useState)(""),{addToast:r}=(0,hr.pm)(),i=(0,a.I0)(),[s,o]=(0,n.useState)(),{data:l,isFetching:c,isUninitialized:u,error:d}=(0,vr.X4)({query:e,limit:50},{skip:!e}),m=(0,n.useCallback)((()=>{t(""),o(void 0)}),[]),p=(0,n.useCallback)((e=>{t(e)}),[]);return(0,n.useEffect)((()=>{e||i(vr.hi.util.invalidateTags([fr.U.UserSearch]))}),[i,e]),(0,n.useEffect)((()=>{o(null==l?void 0:l.searchUsers)}),[null==l?void 0:l.searchUsers]),(0,n.useEffect)((()=>{(null==d?void 0:d.message)&&r({color:"alert",description:d.message,type:"foreground",testID:"error"})}),[r,null==d?void 0:d.message]),{users:s,isFetching:c,isUninitialized:u,error:d,search:p,reset:m}}(),{isOpen:p,highlightedIndex:y,inputValue:h,getComboboxProps:f,getMenuProps:v,getInputProps:g,setInputValue:E,getItemProps:P,openMenu:b,closeMenu:w}=(0,zt.Kb)({items:o||[],circularNavigation:!1,onSelectedItemChange:({selectedItem:t})=>{if(!t)return;const r=(0,xe.Z)("userProfile",{id:t.id});e((0,Gt.c4)({pathname:r}))},stateReducer:(0,n.useCallback)(((e,{changes:t,type:r})=>{switch(r){case zt.Kb.stateChangeTypes.ItemClick:case zt.Kb.stateChangeTypes.InputKeyDownEnter:case zt.Kb.stateChangeTypes.FunctionSelectItem:return Sr(Or({},t),{inputValue:e.inputValue,isOpen:e.isOpen});case zt.Kb.stateChangeTypes.InputBlur:return Sr(Or({},t),{inputValue:e.inputValue,selectedItem:null})}return t}),[]),itemToString:e=>e?e.displayName||e.username:""}),I=(0,yr.Z)(h,Vt.x),Z=(0,n.useCallback)((e=>{e?b():w()}),[w,b]),O=(0,n.useCallback)((()=>{E(""),w()}),[E,w]);(0,n.useEffect)((()=>{I&&d(I)}),[I,d]),(0,n.useEffect)((()=>{h?h===I&&d(h):(O(),m())}),[I,h,O,m,d]);const S=(0,n.useCallback)((()=>{!p&&h&&b()}),[h,p,b]);return n.createElement("div",Or({},f({className:"UserSearchInput-comboBox-NVOicb"})),n.createElement(Kt.J2,{isOpen:p,onOpenChange:Z},n.createElement(Kt.tW,null,n.createElement(Ut.M,{ref:t,inputProps:g({placeholder:(0,ge.Z)("Search for people, places and interests"),onFocus:S}),onClearPress:O})),n.createElement("div",Or({},v()),n.createElement(Kt.yk,{arrow:!1,autoFocus:!1,maxHeight:r,portalled:!1,width:i,onInteractOutside:s},n.createElement(Ft.T,null,l||p&&h&&c?n.createElement(fe.Kq,{align:"center",orientation:"horizontal",padding:"s",width:"100%"},n.createElement(qt.$,{size:"s"})):null,!o||l&&!o.length?null:n.createElement(pr,{errorMessage:null==u?void 0:u.message,getItemProps:P,highlightedIndex:y,query:I,users:o}))))))}function Ar(){return n.createElement(g.Z,null,n.createElement(Ee.Z,{className:"PeoplePage-content-qQuwaG PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko"},n.createElement(fe.Kq,{gap:"l",paddingTop:"l"},n.createElement(fe.Kq,{align:"center",gap:"l"},n.createElement(ve.x,{level:"heading-1"},(0,ge.Z)("Search for Friends using Plex")),n.createElement(Dr,null)),n.createElement(Ot,null),n.createElement(Je,null),n.createElement(Ht.Z,{hideNotificationBadge:!0,useGetFriends:Nt.Z}),n.createElement(kt,null),n.createElement(ot,null))))}var Cr=r(38716),Tr=r(67651),xr=r(99434),Mr=r(22222),Lr=r(68672),jr=r(92129),Rr=r(77909),kr=r(74253),Hr=r(59468),Nr=r(7420),zr=r(89028),Kr=r(53181),Fr=r(52354),Ur=r(90653),qr=r(89197),Gr=r(58801),Vr=r(95815),Wr=r(78958),Br=r(48285),_r=r(10241),Qr=r(56990),$r=r(90066),Jr=r(22699),Xr=r(71273),Yr=Object.defineProperty,en=Object.getOwnPropertySymbols,tn=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable,nn=(e,t,r)=>t in e?Yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const sn=function(e){const t=e,{serverEntityID:r,providerEntityID:i,pivot:s,sourceDirectory:o,directoryKey:l,showSecondHeader:a,children:c}=t,u=((e,t)=>{var r={};for(var n in e)tn.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&en)for(var n of en(e))t.indexOf(n)<0&&rn.call(e,n)&&(r[n]=e[n]);return r})(t,["serverEntityID","providerEntityID","pivot","sourceDirectory","directoryKey","showSecondHeader","children"]);return n.createElement(Jr.Z,((e,t)=>{for(var r in t||(t={}))tn.call(t,r)&&nn(e,r,t[r]);if(en)for(var r of en(t))rn.call(t,r)&&nn(e,r,t[r]);return e})({className:Xr.Z.page},u),n.createElement(se.Z,null,n.createElement(Qr.Z,{providerEntityID:i,serverEntityID:r,sourceDirectory:o}),s?n.createElement(_r.Z,{directoryKey:l,providerEntityID:i,serverEntityID:r,sourceDirectory:o}):null,n.createElement(Br.Z,null)),a?n.createElement(Wr.Z,null):null,n.createElement($r.Z,null,c))};var on=r(82598),ln=r(14838),an=r(13469),cn=r.n(an),un=r(63233);function dn({items:e,gap:t=0,existingItems:r=[]}){const n=cn().sortBy(r,"position"),i=cn().sortBy(e,"position");let s=-1/0;return i.forEach((e=>{const i=cn().sortedIndex(r,e,"position"),o=r[i-1],l=r[i],a=e.position>s+t,c=!o||e.position>o.position+t,u=!l||e.position<l.position-t;a&&c&&u&&(n.push(e),s=e.position)})),cn().sortBy(n,"position")}const mn="minor",pn="major",yn={container:"TickMarks-container-frZO0i",ticks:"TickMarks-ticks-qo5YPE",tick:"TickMarks-tick-A3yNkp",minor:"TickMarks-minor-ChSTCs TickMarks-tick-A3yNkp",major:"TickMarks-major-4a9f2K TickMarks-tick-A3yNkp",label:"TickMarks-label-PYLVQK"};function hn(e){const{ticks:t,pixelProportion:r,majorTickGap:n,minorTickGap:i}=e,s=cn().where(t,{type:pn}),o=cn().where(t,{type:mn}),l=dn({items:s,gap:r*n});return dn({items:o,existingItems:l,gap:r*i})}class fn extends n.Component{constructor(e,t){super(e,t),this.state={ticks:hn(e)}}UNSAFE_componentWillReceiveProps(e){const{ticks:t,pixelProportion:r,majorTickGap:n,minorTickGap:i}=e,s=this.props.ticks!==t,o=this.props.pixelProportion!==r,l=this.props.majorTickGap!==n,a=this.props.minorTickGap!==i;(s||o||l||a)&&this.setState({ticks:hn(e)})}render(){return n.createElement("div",{className:yn.container},n.createElement("div",{className:yn.ticks},this.state.ticks.map((({type:e,position:t,label:r})=>n.createElement("div",{key:t,className:yn[e],style:{top:100*t+"%"}},r&&"major"===e?n.createElement("div",{className:yn.label},r):null)))))}}fn.defaultProps={majorTickGap:20,minorTickGap:5};const vn=fn;var gn=r(50091),En=r(50362),Pn=r(69881),bn=r(27911),wn=r(29414),In=r(55175),Zn=r(98313),On=r(24935),Sn=r(14570),Dn=r(79808),An=r(62050),Cn=r(3414),Tn=r(66567),xn=r(11956);const Mn=function(e){const t=(0,xn.Z)(e);return n.createElement("div",{style:t.style},e.children)};class Ln extends n.Component{constructor(e,t){super(e,t),this.onSelectPress=()=>{const{isSelected:e,items:t,onSelectItems:r,onDeselectItems:n}=this.props;e?n(t):r(t)},this.state={layout:this._createLayout(e),cellRenderer:this._createCellRenderer(e)}}UNSAFE_componentWillReceiveProps(e){const t=e.aspectRatios!==this.props.aspectRatios,r=e.columns!==this.props.columns,n=e.viewportWidth!==this.props.viewportWidth,i=e.viewportHeight!==this.props.viewportHeight,s=e.serverEntityID!==this.props.serverEntityID,o=e.providerEntityID!==this.props.providerEntityID,l=e.metadataListEntityID!==this.props.metadataListEntityID,a=t||r||i||n,c=s||o||l;if(a||c){const t={};a&&(t.layout=this._createLayout(e)),c&&(t.cellRenderer=this._createCellRenderer(e)),this.setState(t)}}_createLayout(e){const t=(0,Cn.Z)({aspectRatios:e.aspectRatios,columns:e.columns});return(0,An.Z)({columns:e.columns,rows:t,maximumHeight:e.cellHeight-(e.footerHeight+e.headerHeight)})}_createCellRenderer(e){const{serverEntityID:t,providerEntityID:r,metadataListEntityID:n,containerKey:i,listType:s}=e;return(0,Tn.Z)({serverEntityID:t,providerEntityID:r,metadataListEntityID:n,containerKey:i,listType:s},Dn.Z)}render(){const{cellIndex:e,cellX:t,cellY:r,cellWidth:i,cellHeight:s,isVirtual:o,title:l,items:a,size:c,viewportHeight:u,scrollTop:d,isSelected:m,hasSelection:p}=this.props,{layout:y,cellRenderer:h}=this.state;return n.createElement(Mn,{cellHeight:s,cellIndex:e,cellWidth:i,cellX:t,cellY:r,isVirtual:o},n.createElement("div",{className:k()(p&&"MetadataMomentCell-hasSelection-pp54EB","MetadataMomentCell-header-oKQGsr")},n.createElement("div",{className:"MetadataMomentCell-actions-L_WAU3"},n.createElement(Sn.Z,{className:"MetadataMomentCell-selectButton-sHo8jO SelectButton-selectButton-_goGWp",isSelected:m,title:l,onPress:this.onSelectPress})),n.createElement("div",{className:"MetadataMomentCell-title-spuo5n"},l)),n.createElement(On.Z,{cellRenderer:h,items:a,keyPropName:"metadataItemEntityID",layout:y,scrollTop:d-r,size:c,viewportHeight:u,viewportWidth:i}))}}Ln.defaultProps={headerHeight:0,footerHeight:0};const jn=Ln;function Rn(){return(0,Mr.P1)(((e,{start:t})=>t),((e,{end:t})=>t),(0,gn.Z)(),((e,t,r)=>{const{populatedRange:n,metadataItems:i}=r;return e<n.start||t>n.end?cn().times(t-e,(()=>null)):i.slice(e-n.start,t-n.start)}))}function kn(){return(0,Mr.P1)(Rn(),En.Z,((e,t)=>e.map((e=>t[e]))))}const Hn=(0,a.$j)((function(){return(0,Mr.P1)((0,gn.Z)(),Rn(),(0,Mr.P1)(((e,{avgAR:t})=>t),kn(),((e,t)=>t.map((t=>t?(0,bn.Z)(t,e):e)))),(0,Mr.P1)(kn(),In.Z,((e,t)=>e.every((e=>e&&(0,Zn.Z)(t,e.ratingKey))))),Kr.Z,((e,t,r,n,i)=>({containerKey:e.containerKey,listType:"photo",aspectRatios:r,items:t,isSelected:n,hasSelection:i.activeSelectionItems.length>0})))}),(function(e,t){return{onSelectItems(t){e((0,wn.Kn)({type:Pn.PHOTO,ids:t}))},onDeselectItems(t){e((0,wn.XX)({ids:t}))}}}))(jn);var Nn=r(89053),zn=r(37368),Kn=Object.defineProperty,Fn=Object.getOwnPropertySymbols,Un=Object.prototype.hasOwnProperty,qn=Object.prototype.propertyIsEnumerable,Gn=(e,t,r)=>t in e?Kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Vn=Object.defineProperty,Wn=Object.getOwnPropertySymbols,Bn=Object.prototype.hasOwnProperty,_n=Object.prototype.propertyIsEnumerable,Qn=(e,t,r)=>t in e?Vn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class $n extends n.Component{constructor(e,t){super(e,t),this.state={layout:this._createLayout(e)}}UNSAFE_componentWillReceiveProps(e){const t=e.items!==this.props.items,r=e.columns!==this.props.columns;(t||r)&&this.setState({layout:this._createLayout(e)})}_createLayout(e){return function(e){const t=e,{columns:r=1,areas:n=[],innerPaddingTop:i=0,innerPaddingBottom:s=0}=t,o=((e,t)=>{var r={};for(var n in e)Un.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Fn)for(var n of Fn(e))t.indexOf(n)<0&&qn.call(e,n)&&(r[n]=e[n]);return r})(t,["columns","areas","innerPaddingTop","innerPaddingBottom"]);return(0,zn.Z)(((e,t)=>{for(var r in t||(t={}))Un.call(t,r)&&Gn(e,r,t[r]);if(Fn)for(var r of Fn(t))qn.call(t,r)&&Gn(e,r,t[r]);return e})({getCellHeights:function(e){return n.map((t=>function(e,t){return Math.max(1,Math.round(e/r))*t+(i+s)}(t,e/r)))}},o))}({columns:e.columns,areas:e.items.map((e=>e.area)),innerPaddingTop:e.headerHeight,innerPaddingBottom:e.footerHeight,outerPaddingTop:e.listPadding,outerPaddingRight:e.listPadding-e.listGutter,outerPaddingBottom:e.listPadding,outerPaddingLeft:e.listPadding})}render(){const{serverEntityID:e,providerEntityID:t,metadataListEntityID:r,columns:i,headerHeight:s,footerHeight:o,cellComponent:l}=this.props;return n.createElement(Nn.Z,((e,t)=>{for(var r in t||(t={}))Bn.call(t,r)&&Qn(e,r,t[r]);if(Wn)for(var r of Wn(t))_n.call(t,r)&&Qn(e,r,t[r]);return e})({cellRenderer:(0,Tn.Z)({serverEntityID:e,providerEntityID:t,metadataListEntityID:r,columns:i,headerHeight:s,footerHeight:o},l),layout:this.state.layout},this.props))}}const Jn=$n;var Xn=Object.defineProperty,Yn=Object.getOwnPropertySymbols,ei=Object.prototype.hasOwnProperty,ti=Object.prototype.propertyIsEnumerable,ri=(e,t,r)=>t in e?Xn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ni={dispatchPopulateMetadataListRange:wn.vp,dispatchDeselectAllMetadataListItems:wn.m8,dispatchResetMetadataList:wn.wZ};class ii extends n.Component{constructor(){super(...arguments),this.onPageRequest=({startIndex:e,endIndex:t})=>{const{metadataListEntityID:r,disableReloadThreshold:n,items:i,dispatchPopulateMetadataListRange:s}=this.props;s({metadataListEntityID:r,disableReloadThreshold:n,startIndex:i[e].start,endIndex:i[t].end-1,pages:1})}}componentWillUnmount(){const{metadataListEntityID:e}=this.props;this.props.dispatchDeselectAllMetadataListItems({metadataListEntityID:e}),this.props.dispatchResetMetadataList({metadataListEntityID:e})}render(){const e=this.props,{dispatchPopulateMetadataListRange:t,dispatchDeselectAllMetadataListItems:r,dispatchResetMetadataList:i}=e,s=((e,t)=>{var r={};for(var n in e)ei.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Yn)for(var n of Yn(e))t.indexOf(n)<0&&ti.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchPopulateMetadataListRange","dispatchDeselectAllMetadataListItems","dispatchResetMetadataList"]);return n.createElement(Jn,((e,t)=>{for(var r in t||(t={}))ei.call(t,r)&&ri(e,r,t[r]);if(Yn)for(var r of Yn(t))ti.call(t,r)&&ri(e,r,t[r]);return e})({onPageRequest:this.onPageRequest},s))}}const si=(0,a.$j)((function(){return(0,Mr.P1)(Kr.Z,(e=>({disableReloadThreshold:!!e.activeSelectionType})))}),ni)(ii);var oi=r(31212);const li=Math.max(0,parseInt(V.Z.timelineGutter,10)-40);class ai extends n.Component{constructor(e,t){super(e,t),this.onListUpdate=e=>{const t=e.landmarks,r=e.listStyle&&e.listStyle.height;if(t!==this._landmarks){this._landmarks=t;const e=function(e,t){const r={},n={};return e.reduce(((e,{index:i,position:s})=>{const o=(0,oi.Z)(1e3*t[i],"yyyy MM"),l=o.slice(0,4);return r[l]?n[o]||(n[o]=!0,e.push({position:s,type:mn})):(r[l]=!0,n[o]=!0,e.push({position:s,type:pn,label:l})),e}),[])}(t,cn().pluck(this.props.moments,"startsAt"));this.setState({ticks:e,listHeight:r})}},this.state={ticks:null,listHeight:null}}render(){const{serverEntityID:e,providerEntityID:t,metadataListEntityID:r,moments:i,columns:s,height:o,onMomentScrollIndexChange:l}=this.props,{ticks:a,listHeight:c}=this.state,u=1/o,d=c&&c>o;return i.length?n.createElement("div",{className:"TimelinePageContent-container-mvQDHr"},n.createElement(si,{cellComponent:Hn,className:"TimelinePageContent-stack-vNqxhP PageContent-pageContent-rk0p0C",columns:s,footerHeight:59,hasNestedList:!0,items:i,keyPropName:"id",listGutter:li,listPadding:55,metadataListEntityID:r,providerEntityID:t,scrollPositionStorageKey:"TimelinePageContent",scrollerClassName:"TimelinePageContent-scroller-Kg90e8",serverEntityID:e,size:i.length,onListScrollIndexChange:l,onListUpdate:this.onListUpdate}),n.createElement("div",{className:"TimelinePageContent-adornment-QvGJVk"},a&&d?n.createElement(vn,{pixelProportion:u,ticks:a}):null)):n.createElement($r.Z,null,n.createElement(on.Z,{iconComponent:un.Z.photo,title:(0,ge.Z)("There are no events in this library")}))}}const ci=ai;var ui=r(48022),di=r(91569),mi=r(868),pi=r(28277),yi=r(97175),hi=r(79932),fi=r(70488),vi=r(57358),gi=r(87691),Ei=r(11133),Pi=r(2078);const bi={showPlayAll:Ii,showShuffle:function({server:e,provider:t,stableUser:r,metadataList:n}){return Ii({server:e,provider:t,stableUser:r,metadataList:n})&&!!t.features.playqueue},showQueue:function({server:e,provider:t,stableUser:r,metadataList:n}){return Ii({server:e,provider:t,stableUser:r,metadataList:n})},showAddToPlaylist:function({server:e,provider:t,stableUser:r,metadataList:n}){return!(!e.isFullServer||!n.isFirstItemLibraryItem)},showOptimize:function({server:e,provider:t,stableUser:r,metadataList:n}){return!!(e.isFullOwnedServer&&e.transcoderVideo&&n.isFirstItemLibraryItem)}},wi={mixed:[],movie:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],show:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],season:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],episode:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],artist:["showPlayAll","showShuffle","showQueue","showAddToPlaylist"],album:["showPlayAll","showShuffle","showQueue","showAddToPlaylist"],track:["showPlayAll","showShuffle","showQueue","showAddToPlaylist"],photoalbum:["showPlayAll","showShuffle","showAddToPlaylist"],photo:["showPlayAll","showShuffle","showAddToPlaylist"],clip:["showPlayAll","showShuffle","showAddToPlaylist","showOptimize"],genre:[]};function Ii({server:e,provider:t,stableUser:r,metadataList:n}){return(0,Pi.Z)(e,t,r.features,n)}var Zi=r(27154),Oi=r(32846),Si=r(53851),Di=r(24464),Ai=r(38044);class Ci extends n.Component{constructor(e,t){super(e,t),this.onAddToPlaylistPress=()=>{this.setState({isAddToPlaylistModalOpen:!0})},this.onAddToPlaylistClose=()=>{this.setState({isAddToPlaylistModalOpen:!1}),this.props.onMenuClose()},this.state={isAddToPlaylistModalOpen:!1}}createOnPress(e){return()=>{e(),this.props.onMenuClose()}}render(){const e=this.props,{isAddToPlaylistModalOpen:t}=this.state;return n.createElement("div",null,e.showPlayAll?n.createElement(Di.Z,{onPress:this.createOnPress(e.onPlayAllPress)},(0,ge.Z)("Play All")):null,e.showShuffle?n.createElement(Di.Z,{onPress:this.createOnPress(e.onShufflePress)},(0,ge.Z)("Shuffle")):null,e.showQueue?n.createElement(Di.Z,{onPress:this.createOnPress(e.onPlayNextPress)},(0,ge.Z)("Play Next")):null,e.showQueue?n.createElement(Di.Z,{onPress:this.createOnPress(e.onAddToQueuePress)},(0,ge.Z)("Add to Queue")):null,e.showAddToPlaylist?n.createElement(Di.Z,{onPress:this.createOnPress(this.onAddToPlaylistPress)},(0,ge.Z)("Add to Playlist...")):null,e.showOptimize?n.createElement(Di.Z,{onPress:this.createOnPress(e.onOptimizePress)},(0,ge.Z)("Optimize...")):null,e.showAddToPlaylist?n.createElement(Ai.Z,{isOpen:t,metadataListEntityID:e.metadataListEntityID,providerEntityID:e.providerEntityID,serverEntityID:e.serverEntityID,onModalClose:this.onAddToPlaylistClose}):null)}}const Ti=Ci;var xi=Object.defineProperty,Mi=Object.getOwnPropertySymbols,Li=Object.prototype.hasOwnProperty,ji=Object.prototype.propertyIsEnumerable,Ri=(e,t,r)=>t in e?xi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ki=function(e){const t=e,{target:r,isOpen:i}=t,s=((e,t)=>{var r={};for(var n in e)Li.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Mi)for(var n of Mi(e))t.indexOf(n)<0&&ji.call(e,n)&&(r[n]=e[n]);return r})(t,["target","isOpen"]);return n.createElement(N.Z,{isOpen:e.isOpen,target:e.target,onMenuClose:e.onMenuClose},n.createElement(Ti,((e,t)=>{for(var r in t||(t={}))Li.call(t,r)&&Ri(e,r,t[r]);if(Mi)for(var r of Mi(t))ji.call(t,r)&&Ri(e,r,t[r]);return e})({},s)))};var Hi=r(52542),Ni=r(13014),zi=r(66952),Ki=r(70007),Fi=r(97499),Ui=r(12856),qi=Object.defineProperty,Gi=Object.defineProperties,Vi=Object.getOwnPropertyDescriptors,Wi=Object.getOwnPropertySymbols,Bi=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable,Qi=(e,t,r)=>t in e?qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class $i extends n.Component{constructor(e,t){super(e,t),this.onPlayShortcut=()=>{this.props.showPlayAll&&this.props.onPlayAllPress()},this.onAddToPlaylistPress=()=>{this.setState({isAddToPlaylistModalOpen:!0,isSmartPlaylist:!1})},this.onAddToSmartPlaylistPress=()=>{this.setState({isAddToPlaylistModalOpen:!0,isSmartPlaylist:!0})},this.onAddToPlaylistClose=()=>{this.setState({isAddToPlaylistModalOpen:!1})},this.onActionsPress=e=>{this.setState({isActionsMenuOpen:!this.state.isActionsMenuOpen})},this.onActionsMenuClose=()=>{this.setState({isActionsMenuOpen:!1})},this.state={isActionsMenuOpen:!1,isAddToPlaylistModalOpen:!1,isSmartPlaylist:!1},this._moreButtonID=(0,Si.Z)()}componentDidMount(){Oi.Z.on("shortcut:playSelected",this.onPlayShortcut)}componentWillUnmount(){Oi.Z.off("shortcut:playSelected",this.onPlayShortcut)}render(){const{className:e,serverEntityID:t,providerEntityID:r,metadataListEntityID:i,customFilterRoute:s,showPlayAll:o,showPlayAllOverflow:l,showShuffle:a,showShuffleOverflow:c,showAddToPlaylist:u,showAddToPlaylistOverflow:d,showAddToSmartPlaylist:m,showOverflow:p,onPlayAllPress:y,onShufflePress:h}=this.props,{isActionsMenuOpen:f,isAddToPlaylistModalOpen:v,isSmartPlaylist:g}=this.state;return n.createElement("div",{className:e},o?n.createElement(Fi.Z,{playLabel:(0,ge.Z)("Play All"),onPress:y}):null,a?n.createElement(Ui.Z,{onPress:h}):null,u?n.createElement(zi.Z,{customFilterRoute:s,metadataListEntityID:i,providerEntityID:r,serverEntityID:t,showAddToSmartPlaylist:m,onAddToPlaylistPress:this.onAddToPlaylistPress,onAddToSmartPlaylistPress:this.onAddToSmartPlaylistPress}):null,p?n.createElement(Ki.Z,{iconComponent:Ni.Z,id:this._moreButtonID,isMenuOpen:f,label:(0,ge.Z)("More..."),onPress:this.onActionsPress}):null,n.createElement(ki,(E=((e,t)=>{for(var r in t||(t={}))Bi.call(t,r)&&Qi(e,r,t[r]);if(Wi)for(var r of Wi(t))_i.call(t,r)&&Qi(e,r,t[r]);return e})({},this.props),P={isOpen:f,showAddToPlaylist:d,showPlayAll:l,showShuffle:c,target:this._moreButtonID,onMenuClose:this.onActionsMenuClose},Gi(E,Vi(P)))),u?n.createElement(Ai.Z,{isOpen:v,metadataListEntityID:i,providerEntityID:r,serverEntityID:t,smart:g,onModalClose:this.onAddToPlaylistClose}):null);var E,P}}const Ji=(0,Hi.ZP)($i,["showPlayAll","showShuffle","showAddToPlaylist"],["showOptimize","showQueue"]);var Xi=Object.defineProperty,Yi=Object.defineProperties,es=Object.getOwnPropertyDescriptors,ts=Object.getOwnPropertySymbols,rs=Object.prototype.hasOwnProperty,ns=Object.prototype.propertyIsEnumerable,is=(e,t,r)=>t in e?Xi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ss=(e,t)=>{for(var r in t||(t={}))rs.call(t,r)&&is(e,r,t[r]);if(ts)for(var r of ts(t))ns.call(t,r)&&is(e,r,t[r]);return e},os=(e,t)=>Yi(e,es(t));const ls=(0,gi.Z)((function(){return(0,Mr.P1)(((e,{listType:t})=>t),kr.Z,fi.Z,vi.Z,(0,gn.Z)(),((e,t,r,n,i)=>function({server:e,provider:t,stableUser:r,metadataList:n,listType:i}){const s=i||n.firstItemType||"mixed",o=wi[s];return o?o.reduce(((i,o)=>{const l=bi[o];return(0,Ei.Z)(cn().isFunction(l),`getMetadataListActionProps: Invalid action, ${o}, for ${s}`),i[o]=!!(e&&t&&n)&&l({server:e,provider:t,stableUser:r,metadataList:n}),i}),{}):{}}({server:t,provider:r,stableUser:n,metadataList:i,listType:e})))}),(function(e,t){const r={serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataListEntityID:t.metadataListEntityID,listType:t.listType,metricsPage:t.metricsPage,metricsProperties:{context:t.metricsContext||u.LIST}};return{onPlayAllPress(){e(hi.wA(r))},onShufflePress(){e(hi.Em(r))},onPlayNextPress(){e(hi.tP(os(ss({},r),{options:{playAll:!0,next:!0}})))},onAddToQueuePress(){e(hi.tP(os(ss({},r),{options:{playAll:!0,next:!1}})))},onOptimizePress(){e(wn.$5(r))}}}),Zi.Z)(Ji);var as=r(37274);const cs=(0,a.$j)((function(){return(0,Mr.P1)((0,gn.Z)(),(e=>({totalSize:e.totalSize,listType:ui.pV,listStyle:as.MOSAIC,allListStyles:[as.MOSAIC]})))}))((function(e){const{serverEntityID:t,providerEntityID:r,metadataListEntityID:i,sourceDirectory:s,title:o,totalSize:l,listType:a,listStyle:c,allListStyles:u}=e;return n.createElement(n.Fragment,null,n.createElement(se.Z,null,n.createElement(Qr.Z,{providerEntityID:r,serverEntityID:t,sourceDirectory:s}),n.createElement(_r.Z,{directoryKey:qr.tk.TIMELINE,providerEntityID:r,serverEntityID:t,sourceDirectory:s}),n.createElement(Br.Z,null,n.createElement(yi.Z,{allListStyles:u,selectedListStyle:c}))),n.createElement(Wr.Z,null,n.createElement(ne.Z,null,n.createElement(mi.Z,null,o),n.createElement(di.Z,null,l)),n.createElement(pi.Z,null,n.createElement(ls,{listType:a,metadataListEntityID:i,providerEntityID:r,serverEntityID:t}))))}));var us=r(59560);var ds=Object.defineProperty,ms=Object.defineProperties,ps=Object.getOwnPropertyDescriptors,ys=Object.getOwnPropertySymbols,hs=Object.prototype.hasOwnProperty,fs=Object.prototype.propertyIsEnumerable,vs=(e,t,r)=>t in e?ds(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gs=(e,t)=>{for(var r in t||(t={}))hs.call(t,r)&&vs(e,r,t[r]);if(ys)for(var r of ys(t))fs.call(t,r)&&vs(e,r,t[r]);return e};class Es extends n.Component{constructor(e,t){super(e,t),this.onMeasure=({width:e,height:t})=>{this.setState({isMeasured:!0,width:e,height:t})},this.onMomentScrollIndexChange=e=>{this.setState({currentMomentTitle:this.props.moments[e].title})},this.state={isMeasured:!1,currentMomentTitle:"",width:0,height:0}}componentWillUnmount(){this.props.onCloseTimelinePage()}render(){const{serverEntityID:e,providerEntityID:t,providerMetricsIdentifier:r,metadataListEntityID:s,sourceDirectory:o,pivot:l,isMomentListPending:a,isMomentListPopulated:c,moments:u,activeSelectionType:d,columnAdjustment:m}=this.props,{isMeasured:p,width:y,height:h,currentMomentTitle:f}=this.state,v=200-100*m,g=12+m,E=Math.min(Math.ceil(y/v),g);if(c)return n.createElement(Vr.Z,{metricsPage:i.WJ,metricsProperties:{identifier:r,mode:"timeline",type:"photo",style:as.MOSAIC},scrollDirection:Ur.Hn},d?n.createElement(us.Z,{providerEntityID:t,serverEntityID:e}):n.createElement(cs,{metadataListEntityID:s,providerEntityID:t,serverEntityID:e,sourceDirectory:o,title:f}),n.createElement(Fr.Z,{className:"TimelinePage-measured-KwtybV",ignorePosition:!0,onMeasure:this.onMeasure},p?n.createElement(ci,{columns:E,height:h,metadataListEntityID:s,moments:u,providerEntityID:t,serverEntityID:e,onMomentScrollIndexChange:this.onMomentScrollIndexChange}):null));const P={serverEntityID:e,providerEntityID:t,sourceDirectory:o,pivot:l,directoryKey:qr.tk.TIMELINE,scrollDirection:Ur.Hn};if(a)return n.createElement(sn,(b=gs({},P),ms(b,ps({showSecondHeader:!0}))),n.createElement(on.Z,null,n.createElement(Gr.Z,null)));var b;const w={title:(0,ge.Z)("There was an error loading the timeline for this library")};return n.createElement(sn,gs({},P),n.createElement(ln.Z,gs({},w)))}}const Ps=Es,bs=(0,Mr.P1)((e=>e.ui.timelinePage.momentList),(e=>{if(!e)return[];let t=0;return e.moments.map((e=>{const r=t;t+=e.size;const{id:n,title:i,size:s,avgAR:o,startsAt:l}=e,a=e.size*(e.avgAR||1);return{start:r,end:t,area:a,id:n,title:i,size:s,avgAR:o,startsAt:l}}))})),ws=(0,Nr.Z)(Ps,(function(e){const t=e.ui.timelinePage;return{serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,momentKey:t.momentKey}}),(function(e,t){e(zr.h8({serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,libraryKey:t.libraryKey,momentKey:t.momentKey})),e(zr.Ql())})),Is=(0,a.$j)((function(){return(0,Mr.P1)(((e,{libraryKey:t})=>t),(e=>e.ui.timelinePage),bs,kr.Z,(0,Rr.Z)(),(0,Lr.Z)(),(0,Mr.P1)(((e,{directoryKey:t})=>t),(0,Lr.Z)(),((e,t)=>(0,jr.Z)(t,e))),Kr.Z,Hr.Z,((e,t,r,n,i,s,o,l,a)=>{const{containerKey:c,isMomentListPending:u,isMomentListPopulated:d}=t;return{metadataListEntityID:t.metadataList,providerMetricsIdentifier:i.metricsIdentifier,sourceDirectory:s,pivot:o,moments:r,isMomentListPending:u,isMomentListPopulated:d,containerKey:c,momentKey:p.Z.join(e,"cluster?clusterZoomLevel=1"),activeSelectionType:l.activeSelectionType,disableReloadThreshold:!!l.activeSelectionType,columnAdjustment:a.columnAdjustment,serverVersion:n.version}}))}),(function(e){return{onCloseTimelinePage(){e(zr.qd({}))}}}))(ws);function Zs({pivotType:e,directorySourceURI:t,directoryKey:r,selectedPivot:o}){const[d,m,g]=(0,v.c9)(),E=(0,a.v9)(c.Z);if(function(e,t){return e===y.sy&&t}(null==o?void 0:o.requires,E))return n.createElement(Z.Z,null);switch(e){case s.F6.Hub:return n.createElement(l.ZP,{name:null==o?void 0:o.context},n.createElement(w.Z,{sourceURI:t}));case s.F6.List:return n.createElement(l.ZP,{name:null==o?void 0:o.context},n.createElement(I.Z,{directoryKey:r,directorySourceURI:t,selectedPivot:o}));case s.F6.View:switch(null==o?void 0:o.key){case s.GG.SharedItems:return n.createElement(l.ZP,{name:null==o?void 0:o.context},n.createElement(I.Z,{directoryKey:r,directorySourceURI:t,listStyle:h.n.SharedItems,selectedPivot:o}));case s.GG.Timeline:{const e=(0,f.Z)(m,s.zW.Content);return n.createElement(Is,{directoryKey:s.GG.Timeline,libraryKey:p.Z.join([null==e?void 0:e.key,null==g?void 0:g.id,"cluster"],{clusterZoomLevel:1}),providerEntityID:m.entityID,serverEntityID:d.entityID,sourceDirectoryID:null==g?void 0:g.id})}case s.GG.DiscoverProfile:return n.createElement(l.ZP,{metricsContextParam:u.SELF,metricsPage:i.ih},n.createElement(Tr.Z,{showHeader:!1}));case s.GG.DiscoverFriends:return n.createElement(l.ZP,{metricsContextParam:u.FRIEND,metricsPage:i.ih},n.createElement(Cr.Z,{showHeader:!1}));case s.GG.DiscoverActivity:return n.createElement(l.ZP,{metricsContextParam:u.DISCOVER,metricsPage:i.dY},n.createElement(b.Z,null));case s.GG.DiscoverPeople:return n.createElement(Ar,null)}}return n.createElement(xr.Z,null)}const Os=[s.GG.Guide,s.GG.RecordingSchedule,s.GG.Timeline];function Ss({className:e,directoryKey:t,pageType:r,machineIdentifier:i,providerIdentifier:o,contentDirectoryID:l,pivotID:c}){const u=(0,a.I0)(),p=(0,ye.Z)({machineIdentifier:i,providerIdentifier:o,contentDirectoryID:l,pageType:r,pivotID:c,directoryKey:t}),y=p?p.type:null!=r?r:s.F6.List,h=(0,he.Z)(p),f=function(e,t){return(null==e?void 0:e.key)===s.GG.SharedItems?null!=t?t:(0,he.Z)(e):t}(p,t),b=null!=h?h:t,w=b?(0,d.Z)({serverIdentifier:i,providerIdentifier:o,key:b}):void 0;return(0,n.useEffect)((()=>()=>{(0,m.c9)((()=>{u(X.Z.actions.resetMeta())}))}),[u]),w?n.createElement(v.ZP,{contentDirectoryID:l,machineIdentifier:i,providerIdentifier:o},n.createElement(g.Z,{className:e,scrollDirection:P.I.None},p&&y===s.F6.View&&Os.includes(p.key)?null:n.createElement(pe,{selectedPivot:p,sourceURI:w}),n.createElement(Zs,{directoryKey:f,directorySourceURI:w,pivotType:y,selectedPivot:p}))):n.createElement(g.Z,{className:e},n.createElement(E.Z,null))}var Ds=r(1346),As=r(20272),Cs=r(75989),Ts=r(31446);function xs(){const e=(0,o.Z)(),t=e.key?(0,Cs.Z)(e.key):void 0,{machineIdentifier:r,providerIdentifier:a}=(0,Ds.Z)(),c=e.pageType?(0,Cs.Z)(e.pageType):void 0,u=(0,As.su)(s.F6).find((e=>e===c));return n.createElement(l.ZP,{metricsContextParam:(0,Cs.Z)(e.context),metricsPage:i.Hx},n.createElement(Ts.Z,{machineIdentifier:r,providerIdentifier:a},t||(0,Cs.Z)(e.source)?n.createElement(Ss,{contentDirectoryID:(0,Cs.Z)(e.source),directoryKey:t,machineIdentifier:r,pageType:u,pivotID:(0,Cs.Z)(e.pivot),providerIdentifier:a}):n.createElement(xr.Z,null)))}},69590:e=>{var t="undefined"!=typeof Element,r="function"==typeof Map,n="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function s(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var l,a,c,u;if(Array.isArray(e)){if((l=e.length)!=o.length)return!1;for(a=l;0!=a--;)if(!s(e[a],o[a]))return!1;return!0}if(r&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(u=e.entries();!(a=u.next()).done;)if(!o.has(a.value[0]))return!1;for(u=e.entries();!(a=u.next()).done;)if(!s(a.value[1],o.get(a.value[0])))return!1;return!0}if(n&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(u=e.entries();!(a=u.next()).done;)if(!o.has(a.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((l=e.length)!=o.length)return!1;for(a=l;0!=a--;)if(e[a]!==o[a])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((l=(c=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(a=l;0!=a--;)if(!Object.prototype.hasOwnProperty.call(o,c[a]))return!1;if(t&&e instanceof Element)return!1;for(a=l;0!=a--;)if(("_owner"!==c[a]&&"__v"!==c[a]&&"__o"!==c[a]||!e.$$typeof)&&!s(e[c[a]],o[c[a]]))return!1;return!0}return e!=e&&o!=o}e.exports=function(e,t){try{return s(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},61935:(e,t,r)=>{"use strict";r.d(t,{D:()=>u});var n=r(67294),i=r(73433),s=r(69590),o=r.n(s),l=function(e){return e.reduce((function(e,t){var r=t[0],n=t[1];return e[r]=n,e}),{})},a="undefined"!=typeof window&&window.document&&window.document.createElement?n.useLayoutEffect:n.useEffect,c=[],u=function(e,t,r){void 0===r&&(r={});var s=n.useRef(null),u={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||c},d=n.useState({styles:{popper:{position:u.strategy,left:"0",top:"0"}},attributes:{}}),m=d[0],p=d[1],y=n.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,r=Object.keys(t.elements);p({styles:l(r.map((function(e){return[e,t.styles[e]||{}]}))),attributes:l(r.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),h=n.useMemo((function(){var e={onFirstUpdate:u.onFirstUpdate,placement:u.placement,strategy:u.strategy,modifiers:[].concat(u.modifiers,[y,{name:"applyStyles",enabled:!1}])};return o()(s.current,e)?s.current||e:(s.current=e,e)}),[u.onFirstUpdate,u.placement,u.strategy,u.modifiers,y]),f=n.useRef();return a((function(){f.current&&f.current.setOptions(h)}),[h]),a((function(){if(null!=e&&null!=t){var n=(r.createPopper||i.fi)(e,t,h);return f.current=n,function(){n.destroy(),f.current=null}}}),[e,t,r.createPopper]),{state:f.current?f.current.state:null,styles:m.styles,attributes:m.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}}}}]);