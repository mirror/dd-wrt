"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[317],{1292:(e,t,r)=>{function n(e,t){return e&&t?`${t} (${e})`:t||e}r.d(t,{Z:()=>n})},82947:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(5562);const s=function(e){const t=e.activeConnection;let r,s=!1;return e.isConnected&&t?r=e.isOutOfDate?(0,n.Z)("Needs Update"):t.relay?(0,n.Z)("Indirect"):t.isPrivate?(0,n.Z)("Nearby"):(0,n.Z)("Remote"):e.isRelayed?r=(0,n.Z)("Indirect"):e.isUnavailable?r=(0,n.Z)("Unavailable"):e.isUnauthorized?r=(0,n.Z)("Unauthorized"):(s=!0,r=(0,n.Z)("Connecting")),{isConnecting:s,status:r}}},7317:(e,t,r)=>{r.r(t),r.d(t,{default:()=>mt});var n=r(67294),s=r(68321),i=r(52339),o=r(28216),a=r(22222),c=r(96516),l=r(61254);const p=(0,c.Z)((0,a.P1)(l.Z,(e=>e.reduce(((e,t)=>{const{entityID:r,machineIdentifier:n}=t;return r&&n&&e.push({entityID:r,machineIdentifier:n}),e}),[]))),(e=>e));function u(e){return e.user.experienceSettings.homeSettings.preferredServerID}var d=r(72668),m=r(43666),f=r(27082),h=r(79344),S=r(58801),v=r(78766),P=r(12319),y=r(98727),b=r(6194),E=r(74816),I=r(2375),x=r(4524),g=r(72194),N=r(59468);const O=(0,g.Z)(N.Z,(({homeSettings:e})=>e)),C=(0,a.P1)(O,(e=>e.servers),x.Z,((e,t,r)=>{const{preferredServerID:n}=e;if(n)for(let e=0,s=t.length;e<s;e++){const s=r[t[e]];if(s.machineIdentifier===n)return s}}));var Z=r(52725),j=r(17524),w=r(46202),B=r(3386),k=r(5562),R=r(37084),F=r(65162),D=r(9119),T=r(43478),U=Object.defineProperty,A=Object.defineProperties,_=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,W=(e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))M.call(t,r)&&W(e,r,t[r]);if(H)for(var r of H(t))z.call(t,r)&&W(e,r,t[r]);return e},$=(e,t)=>A(e,_(t));class K extends n.Component{constructor(e,t){super(e,t),this.onChange=e=>{const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),n=X({},t);r.forEach((t=>{const r=n[t];n[t]=$(X({},r),{value:e})})),this.store.dispatch(R.Nw.replaceState(n))},this.onFormStoreChange=()=>{const{names:e}=this.props;if(!e.length)return;const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),[n]=r,s=t[n].value,i=function(e,t,r){return e.every((e=>{const n=r[e];return!n||n.value===t}))}(r,s,t);this.setState({value:i?s:null})},this.store=this.context.formStore,this.state={value:!0}}UNSAFE_componentWillMount(){this.unsubscribe=this.store.subscribe(this.onFormStoreChange)}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}render(){const e=this.props,{names:t,onChange:r}=e,s=((e,t)=>{var r={};for(var n in e)M.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&H)for(var n of H(e))t.indexOf(n)<0&&z.call(e,n)&&(r[n]=e[n]);return r})(e,["names","onChange"]);return t.length?n.createElement(F.Z,$(X({},s),{value:this.state.value,onChange:(0,D.Z)(this.onChange,r)})):null}}K.contextTypes={formStore:T.Z};const V=K;function q(e){const{className:t,titleBarClassName:r,titleTextClassName:s,scrollerClassName:i,title:o,rightTitle:a,children:c}=e;return n.createElement("div",{className:t},n.createElement("div",{className:r},n.createElement("span",{className:s},o),a),n.createElement(h.Z,{className:i},c))}q.defaultProps={className:"FirstRunExperienceActionsContainer-container-ny0mbu",titleBarClassName:"FirstRunExperienceActionsContainer-titleBar-VHybrq",titleTextClassName:"FirstRunExperienceActionsContainer-titleText-jyPdKj",scrollerClassName:"FirstRunExperienceActionsContainer-scroller-y2WlYD Scroller-vertical-nKq0Q8"};const G=q;var Q=r(39670),Y=r(91008),J=r(85479),L=r(60528);const ee="FirstRunExperienceStep-stepButton-yDEnXT";var te=Object.defineProperty,re=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,ie=(e,t,r)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oe=(e,t)=>{for(var r in t||(t={}))ne.call(t,r)&&ie(e,r,t[r]);if(re)for(var r of re(t))se.call(t,r)&&ie(e,r,t[r]);return e},ae=(e,t)=>{var r={};for(var n in e)ne.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&re)for(var n of re(e))t.indexOf(n)<0&&se.call(e,n)&&(r[n]=e[n]);return r};function ce(e){const{step:t,isActive:r,onPress:s}=e,i=(0,n.useCallback)((()=>{s(t)}),[s,t]);return n.createElement(J.Z,{className:r?"FirstRunExperienceStep-activeStepIcon-SxIbcv FirstRunExperienceStep-stepIcon-Nw5HXA":"FirstRunExperienceStep-stepIcon-Nw5HXA",onPress:i},t)}function le(e){const t=e,{className:r,actionsClassName:s,stepContainerClassName:i,steps:o,step:a,stepHeadingText:c,stepBodyText:l,stepButtonBackText:p,stepButtonNextText:u,children:d,component:m,onButtonBackPress:f,onButtonNextPress:h,onStepPress:S}=t,v=ae(t,["className","actionsClassName","stepContainerClassName","steps","step","stepHeadingText","stepBodyText","stepButtonBackText","stepButtonNextText","children","component","onButtonBackPress","onButtonNextPress","onStepPress"]),P=Q.Z.prop("X-Plex-Product");return n.createElement(m,oe({className:r},v),n.createElement("div",{className:s},d),n.createElement("div",{className:i},n.createElement("div",{className:"FirstRunExperienceStep-stepText-NTZbsm"},(0,k.Z)("{productName} Setup",{productName:P}),Array.from(Array(o),((e,t)=>t+1)).map((e=>n.createElement(ce,{key:e,isActive:a===e,step:e,onPress:S})))),n.createElement("h3",{className:"FirstRunExperienceStep-stepHeading-J6noxn"},c),n.createElement("p",{className:"FirstRunExperienceStep-stepBody-gJiLmC"},l),p?n.createElement(Y.Z,{className:ee,onPress:f},p):null,n.createElement(Y.Z,{className:ee,kind:L._8,type:"submit",onPress:h},u)))}le.defaultProps={className:"FirstRunExperienceStep-container-CS60ox",actionsClassName:"FirstRunExperienceStep-actions-gY3hXF",stepContainerClassName:"FirstRunExperienceStep-stepContainer-wQawUg",component:function(e){var t=e,{children:r}=t,s=ae(t,["children"]);return n.createElement("div",oe({},s),r)},steps:2,step:1};const pe=le;var ue=r(51221),de=r(75748);var me=Object.defineProperty,fe=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,ve=(e,t,r)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Pe=(0,ue.Z)((function(e){const t=e,{source:r,name:s}=t,i=((e,t)=>{var r={};for(var n in e)he.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&fe)for(var n of fe(e))t.indexOf(n)<0&&Se.call(e,n)&&(r[n]=e[n]);return r})(t,["source","name"]);return n.createElement("label",{className:"SelectSourceItemInput-sourceItem-ZECmgr",htmlFor:s},n.createElement("span",{className:"SelectSourceItemInput-sourceTitle-lbHYK9"},n.createElement("span",{className:"SelectSourceItemInput-sourceIconContainer-hvrz7k"},n.createElement(de.Z,{source:r})),r.title),n.createElement(F.Z,((e,t)=>{for(var r in t||(t={}))he.call(t,r)&&ve(e,r,t[r]);if(fe)for(var r of fe(t))Se.call(t,r)&&ve(e,r,t[r]);return e})({inputClassName:"SelectSourceItemInput-input-luiKcA CheckInput-input-dUDRsF",name:s},i)))})),ye=function(e){const{isPending:t,steps:r,sources:s,onSubmit:i,onButtonBackPress:o,onStepPress:a}=e;return t?n.createElement(S.Z,null):n.createElement(pe,{component:R.ZP,step:2,stepBodyText:(0,k.Z)("Choose what you’d like to have in your sidebar navigation menu. (You’ll always have easy access to everything, so you can make changes and further customize your menu later.)"),stepButtonBackText:r>1?(0,k.Z)("Go Back"):void 0,stepButtonNextText:(0,k.Z)("Finish Setup"),stepHeadingText:(0,k.Z)("Customize your Media"),steps:r,onButtonBackPress:o,onStepPress:a,onSubmit:i},n.createElement(G,{rightTitle:s.length?n.createElement(V,{inputClassName:"SelectNavigationStep-input-HAIipV CheckInput-input-dUDRsF",name:"allSources",names:s.map((e=>e.key))}):null,title:(0,k.Z)("Pinned Sources")},s.map((e=>n.createElement(Pe,{key:e.key,initialValue:!0,name:e.key,source:e})))))};var be=Object.defineProperty,Ee=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,xe=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,Oe=(e,t,r)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ce=(0,a.P1)(C,y.Z,((e,t)=>(e?e.providers:[]).map((e=>t[e])))),Ze=(0,a.P1)(E.Z,(e=>e.filter((e=>!/.*(staging|dev)$/.test(e.identifier)))));function je(e,t,r){return t.reduce(((t,n)=>{const s=(0,B.Z)(n),i=(0,w.Z)({sourceServer:e,sourceProvider:n,directories:s&&s.directories,hasHybridGuide:r});return t.push(...i),t}),[])}const we={dispatchSetupSources:m.E8};class Be extends n.Component{constructor(){super(...arguments),this.onSubmit=e=>{const t=this.props.sources.filter((({key:t})=>e[t]));this.props.dispatchSetupSources({sources:t})}}componentDidUpdate(){this.props.hasCompletedSetup&&this.props.onEndFirstRunExperience(),this.props.isPending||0!==this.props.sources.length||this.props.dispatchSetupSources({sources:[]})}render(){const e=this.props,{isPending:t,sources:r,onEndFirstRunExperience:s,dispatchSetupSources:i}=e,o=((e,t)=>{var r={};for(var n in e)ge.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&xe)for(var n of xe(e))t.indexOf(n)<0&&Ne.call(e,n)&&(r[n]=e[n]);return r})(e,["isPending","sources","onEndFirstRunExperience","dispatchSetupSources"]);return n.createElement(ye,(a=((e,t)=>{for(var r in t||(t={}))ge.call(t,r)&&Oe(e,r,t[r]);if(xe)for(var r of xe(t))Ne.call(t,r)&&Oe(e,r,t[r]);return e})({isPending:t||0===r.length,sources:r},o),c={onSubmit:this.onSubmit},Ee(a,Ie(c))));var a,c}}const ke=(0,o.$j)((function(){return(0,a.P1)(C,Ce,I.Z,Ze,N.Z,b.Z,((e,t,r,n,s,i)=>{const o=je(e,t,i),a=je(r,n,i),{sidebarSettings:{hasCompletedSetup:c}}=s,{watchlistSources:l,otherCloudSources:p}=a.reduce(((e,t)=>(t.providerIdentifier===j.Xp&&t.directoryID===Z.nc?e.watchlistSources.push(t):e.otherCloudSources.push(t),e)),{watchlistSources:[],otherCloudSources:[]});return{isPending:!(!e||e.connectionTestResult!==P._r.PENDING),sources:[...l,...o,...p],hasCompletedSetup:c}}))}),we)(Be);var Re=r(45697),Fe=r.n(Re),De=r(50602),Te=r(74995),Ue=r(94184),Ae=r.n(Ue),_e=r(30492),He=r(1292),Me=r(82947),ze=r(41324),We=r(60483);var Xe=Object.defineProperty,$e=Object.defineProperties,Ke=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,qe=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,Qe=(e,t,r)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ye=(0,o.$j)((function(){return(0,De.Z)((0,Te.Z)(),["activeConnection","friendlyName","sourceTitle","isConnected","isOutOfDate","isRelayed","isSecure","isShared","isUnavailable"])}),(function(e,t){return{onPress(){t.onPress({entityID:t.serverEntityID,machineIdentifier:t.machineIdentifier})}}}))((function(e){const{isSelected:t,isUnavailable:r,onPress:s}=e,i=(0,He.Z)((0,_e.Z)(e),(0,Me.Z)(e).status);return n.createElement(J.Z,{className:Ae()("SelectPreferredServerItem-serverButton-VmKM_j",t&&"SelectPreferredServerItem-isSelected-aZkc14",r&&"SelectPreferredServerItem-isUnavailable-govWpw"),onPress:s},n.createElement("span",{className:"SelectPreferredServerItem-titles-AsWJhf"},n.createElement("span",{className:"SelectPreferredServerItem-title-IPFLVg"},(0,ze.Z)(e)),n.createElement("span",{className:"SelectPreferredServerItem-details-QN4Qet"},i)),t?n.createElement(We.Z,{"aria-label":(0,k.Z)("Selected"),className:"SelectPreferredServerItem-serverMenuIcon-mbWPsv"}):null)}));var Je;Ye.propTypes=(Je=((e,t)=>{for(var r in t||(t={}))qe.call(t,r)&&Qe(e,r,t[r]);if(Ve)for(var r of Ve(t))Ge.call(t,r)&&Qe(e,r,t[r]);return e})({},Ye.propTypes),$e(Je,Ke({machineIdentifier:Fe().string.isRequired,serverEntityID:Fe().string.isRequired})));const Le=Ye,et=function(e){const{preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s,onButtonNextPress:i,onStepPress:o}=e;return n.createElement(pe,{step:1,stepBodyText:(0,k.Z)("It looks like you have access to more than one Plex Media Server. Choose your preferred server, and we’ll use it to build your home screen."),stepButtonNextText:(0,k.Z)("Continue"),stepHeadingText:(0,k.Z)("Choose your Preferred Server"),onButtonNextPress:i,onStepPress:o},n.createElement(G,{title:(0,k.Z)("Plex Media Servers")},r.map((e=>n.createElement(Le,{key:e.entityID,isSelected:t&&t.machineIdentifier===e.machineIdentifier,machineIdentifier:e.machineIdentifier,serverEntityID:e.entityID,onPress:s})))))};var tt=Object.defineProperty,rt=Object.defineProperties,nt=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,at=(e,t,r)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ct(e,t){return!e&&t.length>0}class lt extends n.Component{constructor(e,t){super(e,t),this.onNextStepPress=()=>{this.setState((e=>({step:Math.max(2,e.step+1)})))},this.onBackStepPress=()=>{this.setState((e=>({step:Math.min(1,e.step-1)})))},this.onStepPress=e=>{this.setState({step:e})},this.onEndFirstRunExperience=()=>{const{preferredServerIdentifiers:e,onEndFirstRunExperience:t}=this.props;t(e?{preferredServerEntityID:e.entityID,preferredServerInteraction:e.machineIdentifier!==this.state.initialDefaultPreferredServerIdentifier}:{})},this.state={step:1}}componentDidMount(){(0,f.c9)((()=>{this.props.onResetCustomization()})),this._maybeCallOnSavePreferredServer(((e,t)=>rt(e,nt({preferredServerIdentifiers:null})))(((e,t)=>{for(var r in t||(t={}))it.call(t,r)&&at(e,r,t[r]);if(st)for(var r of st(t))ot.call(t,r)&&at(e,r,t[r]);return e})({},this.props)))}componentDidUpdate(){this._maybeCallOnSavePreferredServer(this.props)}_maybeCallOnSavePreferredServer(e){const{isPending:t,preferredServerIdentifiers:r,serverIdentifiers:n,onSavePreferredServer:s}=e;if(t)return;const i=function(e,t){return e?e.machineIdentifier:t.length>0?t[0].machineIdentifier:void 0}(r,n);!this.state.initialDefaultPreferredServerIdentifier&&i&&this.setState({initialDefaultPreferredServerIdentifier:i}),ct(r,n)&&s({machineIdentifier:i})}render(){const{isPending:e,preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s}=this.props,{step:i}=this.state,o=r.length<2;return e||ct(t,r)?n.createElement(v.Z,null,n.createElement(S.Z,null)):n.createElement(h.Z,{className:"FirstRunExperiencePage-container-dTL3Ek"},1!==i||o?n.createElement(ke,{steps:o?0:2,onButtonBackPress:this.onBackStepPress,onEndFirstRunExperience:this.onEndFirstRunExperience,onStepPress:this.onStepPress}):n.createElement(et,{preferredServerIdentifiers:t,serverIdentifiers:r,onButtonNextPress:this.onNextStepPress,onSavePreferredServer:s,onStepPress:this.onStepPress}))}}const pt=lt,ut={onSavePreferredServer:m.p7,onEndFirstRunExperience:m.G_,onResetCustomization:m.Dy},dt=(0,o.$j)((function(){return(0,a.P1)(d.Z,u,p,((e,t,r)=>({isPending:!e,preferredServerIdentifiers:t?r.find((e=>e.machineIdentifier===t)):void 0,serverIdentifiers:r})))}),ut)(pt);function mt(){return n.createElement("div",{className:s.u},n.createElement(i.Z,null,n.createElement(dt,null)))}}}]);