"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[519],{14699:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(22222),o=r(90934);function a(){return(0,n.P1)(((e,{mediaSubscriptionEntityID:t})=>t),o.Z,((e,t)=>t[e]))}},5519:(e,t,r)=>{r.r(t),r.d(t,{default:()=>te});var n=r(28216),o=r(22222),a=r(99051),l=r(67294),i=r(69605),c=r(46013),s=r(38506),d=r(64293),p=r(50362),u=r(14699),m=r(58368),b=r(5562),f=r(91008),y=r(37084),O=r(73363),S=r(27275),v=r(26759),g=r(2675),w=r(30464),P=r(60528),M=r(58300),E=r(6174),Z=r(13202),j=Object.defineProperty,h=Object.defineProperties,C=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,K=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const x=function(e){const t=e,{errorMessage:r,isMediaSubscriptionSaving:n,prefGroups:o,className:a,onModalClose:i,onSubmit:c}=t,s=((e,t)=>{var r={};for(var n in e)k.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&D)for(var n of D(e))t.indexOf(n)<0&&I.call(e,n)&&(r[n]=e[n]);return r})(t,["errorMessage","isMediaSubscriptionSaving","prefGroups","className","onModalClose","onSubmit"]),d=(0,w.Z)(n)&&!n;return(0,l.useEffect)((()=>{d&&!r&&i()}),[r,d,i]),l.createElement(y.ZP,{className:a,onSubmit:c},l.createElement(g.Z,null,(0,b.Z)("Download Options")),r?l.createElement(E.Z,{errorMessage:r}):null,l.createElement(O.Z,null,l.createElement("div",{key:"advanced"},l.createElement(Z.Z,(p=((e,t)=>{for(var r in t||(t={}))k.call(t,r)&&K(e,r,t[r]);if(D)for(var r of D(t))I.call(t,r)&&K(e,r,t[r]);return e})({},s),u={prefs:o.advanced},h(p,C(u)))))),l.createElement(S.Z,null,l.createElement(v.Z,null,l.createElement(f.Z,{kind:P.TP,onPress:i},(0,b.Z)("Cancel")),l.createElement(M.Z,{isSpinning:n,kind:P._8,type:"submit"},(0,b.Z)("Save")))));var p,u};var A=Object.defineProperty,_=Object.defineProperties,N=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,L=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{var r={};for(var n in e)G.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&T)for(var n of T(e))t.indexOf(n)<0&&B.call(e,n)&&(r[n]=e[n]);return r};const F=new Set(["autoDeletionItemPolicyUnwatchedLibrary","autoDeletionItemPolicyWatchedLibrary"]),J={dispatchSyncDownloadModalChangeTemplateMode:a.Jl,dispatchSyncDownloadSaveSubscription:a.Y1},Q=(0,n.$j)((function(){return(0,o.P1)(((e,{modal:t})=>t),(0,u.Z)(),(0,o.P1)((e=>e.downloads.states),((e,{modal:t})=>t),((e,t)=>{const{sourceAttr:r,ratingKey:n}=t;return e.some((e=>e.ratingKey===n&&e.sourceAttr===r&&"saving"===e.state))})),p.Z,((e,t,r,n)=>{const{hint:o}=t,a=t.target&&n[t.target.metadata],l=(0,m.Z)(t.prefs,F);return{errorMessage:e.error,hint:o,isMediaSubscriptionSaving:r,prefGroups:l,target:a}}))}),J)((function(e){const t=e,{dispatchSyncDownloadModalChangeTemplateMode:r,dispatchSyncDownloadSaveSubscription:n,modal:o}=t,a=$(t,["dispatchSyncDownloadModalChangeTemplateMode","dispatchSyncDownloadSaveSubscription","modal"]),{ratingKey:i,sourceAttr:c}=o,s=(0,l.useCallback)((e=>{const t=e,{mode:r}=t,o=$(t,["mode"]);n({prefs:o,ratingKey:i,sourceAttr:c})}),[i,c,n]);return l.createElement(x,(d=((e,t)=>{for(var r in t||(t={}))G.call(t,r)&&L(e,r,t[r]);if(T)for(var r of T(t))B.call(t,r)&&L(e,r,t[r]);return e})({},a),_(d,N({onSubmit:s}))));var d})),U=function(e){const{isOpen:t,modal:r,onSyncDownloadModalClose:n}=e,{error:o,mediaSubscription:a,ratingKey:p,sourceAttr:u}=r,m=(0,l.useCallback)((()=>{n({ratingKey:p,sourceAttr:u})}),[p,u,n]);return l.createElement(c.Z,{isOpen:t,metricsPage:i.B8,onModalClose:m},o&&!a?l.createElement(d.Z,{message:o,onModalClose:m}):l.createElement(s.Z,{onModalClose:m},l.createElement(Q,{className:"SyncDownloadModal-formContent-iDFo2i ModalContent-modalContent-_BsQSK",mediaSubscriptionEntityID:a,modal:r,onModalClose:m})))};var W=Object.defineProperty,Y=Object.defineProperties,q=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,V=(e,t,r)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const X=(0,o.P1)((function(e){return e.ui.syncDownloadModals}),(e=>({modal:e.find((e=>e.isOpen))}))),ee={onSyncDownloadModalClose:a.yr},te=(0,n.$j)(X,ee)((function(e){return e.modal?l.createElement(U,(t=((e,t)=>{for(var r in t||(t={}))H.call(t,r)&&V(e,r,t[r]);if(z)for(var r of z(t))R.call(t,r)&&V(e,r,t[r]);return e})({},e),Y(t,q({isOpen:!0})))):null;var t}))}}]);