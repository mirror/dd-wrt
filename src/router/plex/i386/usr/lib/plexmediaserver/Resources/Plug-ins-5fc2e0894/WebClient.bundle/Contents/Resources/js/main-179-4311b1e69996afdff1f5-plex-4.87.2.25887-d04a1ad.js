/*! For license information please see main-179-4311b1e69996afdff1f5-plex-4.87.2.25887-d04a1ad.js.LICENSE.txt */
(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[179],{76486:(e,t,r)=>{"use strict";e.exports=r.p+"static/b38a559594ac52d049ba.png"},80974:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ic3Ryb2tlLW1pdGVybGltaXQ6MS40MTQyMTtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQiPgogPGNpcmNsZSBpZD0iMCIgY3g9IjUwIiBjeT0iNTAiIHI9IjUwIiBzdHlsZT0iZmlsbDp1cmwoIzMpIi8+CiA8Y2lyY2xlIGlkPSIxIiBjeD0iNTAiIGN5PSI1MCIgcj0iNDciIHN0eWxlPSJmaWxsOnVybCgjNCkiLz4KIDxwYXRoIGlkPSIyIiBkPSJtMzIuOSAxOC44bDE4LjE2MSAwIDIwLjAzOSAzMS4yNS0yMC4wMzkgMzEuMjUtMTguMTYxIDAgMjAuMDM5LTMxLjI1LTIwLjAzOS0zMS4yNSIgc3R5bGU9ImZpbGw6dXJsKCM1KSIvPgogPGRlZnM+CiAgPGxpbmVhckdyYWRpZW50IGlkPSIzIiB4MT0iMTAwIiB4Mj0iMCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZjliZTAzIi8+CiAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I2NjN2IxOSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPGxpbmVhckdyYWRpZW50IGlkPSI0IiB4MT0iOTciIHgyPSIzIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiMyODI4MjgiLz4KICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMWYxZjFmIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmFkaWFsR3JhZGllbnQgaWQ9IjUiIGN4PSI2NyIgY3k9IjQ5LjkiIHI9IjU3LjgxMjMiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4bGluazpocmVmPSIjMyIvPgogPC9kZWZzPgo8L3N2Zz4K"},48918:(e,t,r)=>{"use strict";e.exports=r.p+"static/eeeaf2f8d7ce1c646d6d.png"},9390:(e,t,r)=>{var n,i,s;s="object"==typeof self&&self.self==self&&self||"object"==typeof r.g&&r.g.global==r.g&&r.g,n=[r(13469),r(19755),t],void 0===(i=function(e,t,r){s.Backbone=function(e,t,r,n){var i=e.Backbone,s=Array.prototype.slice;t.VERSION="1.2.3",t.$=n,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=function(e,t,n){r.each(t,(function(t,i){r[i]&&(e.prototype[i]=function(e,t,n){switch(e){case 1:return function(){return r[t](this[n])};case 2:return function(e){return r[t](this[n],e)};case 3:return function(e,i){return r[t](this[n],o(e,this),i)};case 4:return function(e,i,s){return r[t](this[n],o(e,this),i,s)};default:return function(){var e=s.call(arguments);return e.unshift(this[n]),r[t].apply(r,e)}}}(t,i,n))}))},o=function(e,t){return r.isFunction(e)?e:r.isObject(e)&&!t._isModel(e)?l(e):r.isString(e)?function(t){return t.get(e)}:e},l=function(e){var t=r.matches(e);return function(e){return t(e.attributes)}},c=t.Events={},d=/\s+/,u=function(e,t,n,i,s){var a,o=0;if(n&&"object"==typeof n){void 0!==i&&"context"in s&&void 0===s.context&&(s.context=i);for(a=r.keys(n);o<a.length;o++)t=u(e,t,a[o],n[a[o]],s)}else if(n&&d.test(n))for(a=n.split(d);o<a.length;o++)t=e(t,a[o],i,s);else t=e(t,n,i,s);return t};c.on=function(e,t,r){return p(this,e,t,r)};var p=function(e,t,r,n,i){return e._events=u(m,e._events||{},t,r,{context:n,ctx:e,listening:i}),i&&((e._listeners||(e._listeners={}))[i.id]=i),e};c.listenTo=function(e,t,n){if(!e)return this;var i=e._listenId||(e._listenId=r.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),a=s[i];if(!a){var o=this._listenId||(this._listenId=r.uniqueId("l"));a=s[i]={obj:e,objId:i,id:o,listeningTo:s,count:0}}return p(e,t,n,this,a),this};var m=function(e,t,r,n){if(r){var i=e[t]||(e[t]=[]),s=n.context,a=n.ctx,o=n.listening;o&&o.count++,i.push({callback:r,context:s,ctx:s||a,listening:o})}return e};c.off=function(e,t,r){return this._events?(this._events=u(h,this._events,e,t,{context:r,listeners:this._listeners}),this):this},c.stopListening=function(e,t,n){var i=this._listeningTo;if(!i)return this;for(var s=e?[e._listenId]:r.keys(i),a=0;a<s.length;a++){var o=i[s[a]];if(!o)break;o.obj.off(t,n,this)}return r.isEmpty(i)&&(this._listeningTo=void 0),this};var h=function(e,t,n,i){if(e){var s,a=0,o=i.context,l=i.listeners;if(t||n||o){for(var c=t?[t]:r.keys(e);a<c.length;a++){var d=e[t=c[a]];if(!d)break;for(var u=[],p=0;p<d.length;p++){var m=d[p];n&&n!==m.callback&&n!==m.callback._callback||o&&o!==m.context?u.push(m):(s=m.listening)&&0==--s.count&&(delete l[s.id],delete s.listeningTo[s.objId])}u.length?e[t]=u:delete e[t]}return r.size(e)?e:void 0}for(var h=r.keys(l);a<h.length;a++)delete l[(s=l[h[a]]).id],delete s.listeningTo[s.objId]}};c.once=function(e,t,n){var i=u(g,{},e,t,r.bind(this.off,this));return this.on(i,void 0,n)},c.listenToOnce=function(e,t,n){var i=u(g,{},t,n,r.bind(this.stopListening,this,e));return this.listenTo(e,i)};var g=function(e,t,n,i){if(n){var s=e[t]=r.once((function(){i(t,s),n.apply(this,arguments)}));s._callback=n}return e};c.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),r=Array(t),n=0;n<t;n++)r[n]=arguments[n+1];return u(y,this._events,e,void 0,r),this};var y=function(e,t,r,n){if(e){var i=e[t],s=e.all;i&&s&&(s=s.slice()),i&&v(i,n),s&&v(s,[t].concat(n))}return e},v=function(e,t){var r,n=-1,i=e.length,s=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s,a);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s,a,o);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t);return}};c.bind=c.on,c.unbind=c.off,r.extend(t,c);var f=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=r.defaults({},n,r.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};r.extend(f.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return r.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return r.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!r.iteratee(e,this)(this.attributes)},set:function(e,t,n){if(null==e)return this;var i;if("object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;var s=n.unset,a=n.silent,o=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=r.clone(this.attributes),this.changed={});var c=this.attributes,d=this.changed,u=this._previousAttributes;for(var p in i)t=i[p],r.isEqual(c[p],t)||o.push(p),r.isEqual(u[p],t)?delete d[p]:d[p]=t,s?delete c[p]:c[p]=t;if(this.id=this.get(this.idAttribute),!a){o.length&&(this._pending=n);for(var m=0;m<o.length;m++)this.trigger("change:"+o[m],this,c[o[m]],n)}if(l)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,r.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,r.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!r.isEmpty(this.changed):r.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&r.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,n={};for(var i in e){var s=e[i];r.isEqual(t[i],s)||(n[i]=s)}return!!r.size(n)&&n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(e){e=r.extend({parse:!0},e);var t=this,n=e.success;return e.success=function(r){var i=e.parse?t.parse(r,e):r;if(!t.set(i,e))return!1;n&&n.call(e.context,t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var i;null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t;var s=(n=r.extend({validate:!0,parse:!0},n)).wait;if(i&&!s){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;var a=this,o=n.success,l=this.attributes;n.success=function(e){a.attributes=l;var t=n.parse?a.parse(e,n):e;if(s&&(t=r.extend({},i,t)),t&&!a.set(t,n))return!1;o&&o.call(n.context,a,e,n),a.trigger("sync",a,e,n)},j(this,n),i&&s&&(this.attributes=r.extend({},l,i));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=i);var d=this.sync(c,this,n);return this.attributes=l,d},destroy:function(e){e=e?r.clone(e):{};var t=this,n=e.success,i=e.wait,s=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(r){i&&s(),n&&n.call(e.context,t,r,e),t.isNew()||t.trigger("sync",t,r,e)};var a=!1;return this.isNew()?r.defer(e.success):(j(this,e),a=this.sync("delete",this,e)),i||s(),a},url:function(){var e=r.result(this,"urlRoot")||r.result(this.collection,"url")||L();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},r.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=r.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,r.extend(t,{validationError:n})),!1)}}),a(f,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var b=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,r.extend({silent:!0},t))},Z={add:!0,remove:!0,merge:!0},S={add:!0,remove:!1},P=function(e,t,r){r=Math.min(Math.max(r,0),e.length);for(var n=Array(e.length-r),i=t.length,s=0;s<n.length;s++)n[s]=e[s+r];for(s=0;s<i;s++)e[s+r]=t[s];for(s=0;s<n.length;s++)e[s+i+r]=n[s]};r.extend(b.prototype,c,{model:f,initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,r.extend({merge:!1},t,S))},remove:function(e,t){t=r.extend({},t);var n=!r.isArray(e);e=n?[e]:r.clone(e);var i=this._removeModels(e,t);return!t.silent&&i&&this.trigger("update",this,t),n?i[0]:i},set:function(e,t){if(null!=e){(t=r.defaults({},t,Z)).parse&&!this._isModel(e)&&(e=this.parse(e,t));var n=!r.isArray(e);e=n?e?[e]:[]:e.slice();var i=t.at;null!=i&&(i=+i),i<0&&(i+=this.length+1);for(var s,a=[],o=[],l=[],c={},d=t.add,u=t.merge,p=t.remove,m=!1,h=this.comparator&&null==i&&!1!==t.sort,g=r.isString(this.comparator)?this.comparator:null,y=0;y<e.length;y++){s=e[y];var v=this.get(s);if(v){if(u&&s!==v){var f=this._isModel(s)?s.attributes:s;t.parse&&(f=v.parse(f,t)),v.set(f,t),h&&!m&&(m=v.hasChanged(g))}c[v.cid]||(c[v.cid]=!0,a.push(v)),e[y]=v}else d&&(s=e[y]=this._prepareModel(s,t))&&(o.push(s),this._addReference(s,t),c[s.cid]=!0,a.push(s))}if(p){for(y=0;y<this.length;y++)c[(s=this.models[y]).cid]||l.push(s);l.length&&this._removeModels(l,t)}var b=!1,S=!h&&d&&p;if(a.length&&S?(b=this.length!=a.length||r.some(this.models,(function(e,t){return e!==a[t]})),this.models.length=0,P(this.models,a,0),this.length=this.models.length):o.length&&(h&&(m=!0),P(this.models,o,null==i?this.length:i),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(y=0;y<o.length;y++)null!=i&&(t.index=i+y),(s=o[y]).trigger("add",s,this,t);(m||b)&&this.trigger("sort",this,t),(o.length||l.length)&&this.trigger("update",this,t)}return n?e[0]:e}},reset:function(e,t){t=t?r.clone(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,r.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,r.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,r.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return s.apply(this.models,arguments)},get:function(e){if(null!=e){var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]}},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var n=t.length;return r.isFunction(t)&&(t=r.bind(t,this)),1===n||r.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return r.invoke(this.models,"get",e)},fetch:function(e){var t=(e=r.extend({parse:!0},e)).success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t.call(e.context,n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){var n=(t=t?r.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;n||this.add(e,t);var i=this,s=t.success;return t.success=function(e,t,r){n&&i.add(e,r),s&&s.call(r.context,e,t,r)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?r.clone(t):{}).collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeModels:function(e,t){for(var r=[],n=0;n<e.length;n++){var i=this.get(e[n]);if(i){var s=this.indexOf(i);this.models.splice(s,1),this.length--,t.silent||(t.index=s,i.trigger("remove",i,this,t)),r.push(i),this._removeReference(i,t)}}return!!r.length&&r},_isModel:function(e){return e instanceof f},_addReference:function(e,t){this._byId[e.cid]=e;var r=this.modelId(e.attributes);null!=r&&(this._byId[r]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var r=this.modelId(e.attributes);null!=r&&delete this._byId[r],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,n){if("add"!==e&&"remove"!==e||r===this){if("destroy"===e&&this.remove(t,n),"change"===e){var i=this.modelId(t.previousAttributes()),s=this.modelId(t.attributes);i!==s&&(null!=i&&delete this._byId[i],null!=s&&(this._byId[s]=t))}this.trigger.apply(this,arguments)}}}),a(b,{forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3},"models");var I=t.View=function(e){this.cid=r.uniqueId("view"),r.extend(this,r.pick(e,w)),this._ensureElement(),this.initialize.apply(this,arguments)},E=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];r.extend(I.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=r.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(r.isFunction(n)||(n=this[n]),n){var i=t.match(E);this.delegate(i[1],i[2],r.bind(n,this))}}return this},delegate:function(e,t,r){return this.$el.on(e+".delegateEvents"+this.cid,t,r),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,r){return this.$el.off(e+".delegateEvents"+this.cid,t,r),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var e=r.extend({},r.result(this,"attributes"));this.id&&(e.id=r.result(this,"id")),this.className&&(e.class=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,n,i){var s=C[e];r.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:s,dataType:"json"};if(i.url||(a.url=r.result(n,"url")||L()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){a.type="POST",i.emulateJSON&&(a.data._method=s);var o=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",s),o)return o.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1);var l=i.error;i.error=function(e,t,r){i.textStatus=t,i.errorThrown=r,l&&l.call(i.context,e,t,r)};var c=i.xhr=t.ajax(r.extend(a,i));return n.trigger("request",n,c,i),c};var C={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var M=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},D=/\((.*?)\)/g,O=/(\(\?)?:\w+/g,T=/\*\w+/g,x=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(M.prototype,c,{initialize:function(){},route:function(e,n,i){r.isRegExp(e)||(e=this._routeToRegExp(e)),r.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var s=this;return t.history.route(e,(function(r){var a=s._extractParameters(e,r);!1!==s.execute(i,a,n)&&(s.trigger.apply(s,["route:"+n].concat(a)),s.trigger("route",n,a),t.history.trigger("route",s,n,a))})),this},execute:function(e,t,r){e&&e.apply(this,t)},navigate:function(e,r){return t.history.navigate(e,r),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var e,t=r.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(x,"\\$&").replace(D,"(?:$1)?").replace(O,(function(e,t){return t?e:"([^/?]+)"})).replace(T,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return r.map(n,(function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null}))}});var A=t.History=function(){this.handlers=[],this.checkUrl=r.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},k=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,R=/#.*$/;A.started=!1,r.extend(A.prototype,c,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(k,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");if(A.started=!0,this.options=r.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(N,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,i=n.insertBefore(this.iframe,n.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var s=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),r.some(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0})))},navigate:function(e,t){if(!A.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var r=this.root;""!==e&&"?"!==e.charAt(0)||(r=r.slice(0,-1)||"/");var n=r+e;e=e.replace(R,"");var i=this.decodeFragment(e);if(this.fragment!==i){if(this.fragment=i,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;t.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,r){if(r){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new A;f.extend=b.extend=M.extend=I.extend=A.extend=function(e,t){var n,i=this;n=e&&r.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},r.extend(n,i,t);var s=function(){this.constructor=n};return s.prototype=i.prototype,n.prototype=new s,e&&r.extend(n.prototype,e),n.__super__=i.prototype,n};var L=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var r=t.error;t.error=function(n){r&&r.call(t.context,e,n,t),e.trigger("error",e,n,t)}};return t}(s,r,e,t)}.apply(t,n))||(e.exports=i)},38767:function(e,t,r){var n,i,s,a;n=r(13469),i=r(9390),e.exports=(s=n,(a=i).ChildViewContainer=function(e,t){var r=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};return t.extend(r.prototype,{add:function(e,t){var r=e.cid;return this._views[r]=e,e.model&&(this._indexByModel[e.model.cid]=r),t&&(this._indexByCustom[t]=r),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var r=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,(function(e,t){if(e===r)return delete this._indexByCustom[t],!0}),this),delete this._views[r],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,r){t.each(this._views,(function(n){t.isFunction(n[e])&&n[e].apply(n,r||[])}))},_updateLength:function(){this.length=t.size(this._views)}}),t.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],(function(e){r.prototype[e]=function(){var r=[t.values(this._views)].concat(t.toArray(arguments));return t[e].apply(t,r)}})),r}(0,s),a.ChildViewContainer)},37434:function(e,t,r){var n,i,s;i=r(13469),s=r(9390),r(96790),r(38767),e.exports=(function(e,t,r){"use strict";var n={};t.Marionette=n,n.$=t.$;var i=Array.prototype.slice;function s(e,t){var r=new Error(e);throw r.name=t||"Error",r}n.extend=t.Model.extend,n.getOption=function(e,t){if(e&&t)return e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]},n.normalizeMethods=function(e){var t,n={};return r.each(e,(function(e,i){t=e,r.isFunction(t)||(t=this[t]),t&&(n[i]=t)}),this),n},n.triggerMethod=function(){var e=/(^|:)(\w)/gi;function t(e,t,r){return r.toUpperCase()}return function(n){var i=this["on"+n.replace(e,t)];if(r.isFunction(this.trigger)&&this.trigger.apply(this,arguments),r.isFunction(i))return i.apply(this,r.tail(arguments))}}(),n.MonitorDOMRefresh=function(e){function t(t){t._isShown&&t._isRendered&&function(t){return e.contains(t.el)}(t)&&r.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}return function(e){e.listenTo(e,"show",(function(){!function(e){e._isShown=!0,t(e)}(e)})),e.listenTo(e,"render",(function(){!function(e){e._isRendered=!0,t(e)}(e)}))}}(document.documentElement),function(e){function t(e,t,n,i){var a=i.split(/\s+/);r.each(a,(function(r){var i=e[r];i||s("Method '"+r+"' was configured as an event handler, but does not exist."),e.listenTo(t,n,i)}))}function n(e,t,r,n){e.listenTo(t,r,n)}function i(e,t,n,i){var s=i.split(/\s+/);r.each(s,(function(r){var i=e[r];e.stopListening(t,n,i)}))}function a(e,t,r,n){e.stopListening(t,r,n)}function o(e,t,n,i,s){t&&n&&(r.isFunction(n)&&(n=n.call(e)),r.each(n,(function(n,a){r.isFunction(n)?i(e,t,a,n):s(e,t,a,n)})))}e.bindEntityEvents=function(e,r,i){o(e,r,i,n,t)},e.unbindEntityEvents=function(e,t,r){o(e,t,r,a,i)}}(n),n.Callbacks=function(){this._deferred=n.$.Deferred(),this._callbacks=[]},r.extend(n.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done((function(r,n){t&&(r=t),e.call(r,n)}))},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=n.$.Deferred(),this._callbacks=[],r.each(e,(function(e){this.add(e.cb,e.ctx)}),this)}}),n.Controller=function(e){this.triggerMethod=n.triggerMethod,this.options=e||{},r.isFunction(this.initialize)&&this.initialize(this.options)},n.Controller.extend=n.extend,r.extend(n.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),n.Region=function(e){if(this.options=e||{},this.el=n.getOption(this,"el"),this.el||s("An 'el' must be specified for a region.","NoElError"),this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}},r.extend(n.Region,{buildRegion:function(e,t){var n,i,a=r.isString(e),o=r.isString(e.selector),l=r.isUndefined(e.regionType),c=r.isFunction(e);c||a||o||s("Region must be specified as a Region type, a selector string or an object with selector property"),a&&(n=e),e.selector&&(n=e.selector,delete e.selector),c&&(i=e),!c&&l&&(i=t),e.regionType&&(i=e.regionType,delete e.regionType),(a||c)&&(e={}),e.el=n;var d=new i(e);return e.parentEl&&(d.getEl=function(t){var n=e.parentEl;return r.isFunction(n)&&(n=n()),n.find(t)}),d}}),r.extend(n.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||r.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,n.triggerMethod.call(this,"show",e),n.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return n.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),n.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),n.Region.extend=n.extend,n.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var n={};return r.each(e,(function(e,i){r.isString(e)&&(e={selector:e}),e.selector&&(e=r.defaults({},e,t));var s=this.addRegion(i,e);n[i]=s}),this),n},addRegion:function(t,n){var i,s=r.isObject(n),a=r.isString(n),o=!!n.selector;return i=a||s&&o||r.isFunction(n)?e.Region.buildRegion(n,e.Region):n,this._store(t,i),this.triggerMethod("region:add",t,i),i},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){r.each(this._regions,(function(e,t){this._remove(t,e)}),this)},closeRegions:function(){r.each(this._regions,(function(e,t){e.close()}),this)},close:function(){this.removeRegions(),e.Controller.prototype.close.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=r.size(this._regions)}});return r.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],(function(e){t.prototype[e]=function(){var t=[r.values(this._regions)].concat(r.toArray(arguments));return r[e].apply(r,t)}})),t}(n),n.TemplateCache=function(e){this.templateId=e},r.extend(n.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new n.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=i.call(arguments),r=t.length;if(r>0)for(e=0;e<r;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),r.extend(n.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=n.$(e).html();return t&&0!==t.length||s("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return r.template(e)}}),n.Renderer={render:function(e,t){return e||s("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError"),("function"==typeof e?e:n.TemplateCache.get(e))(t)}},n.View=t.View.extend({constructor:function(e){r.bindAll(this,"render"),this.options=r.extend({},r.result(this,"options"),r.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(r.result(this,"events")),t.View.prototype.constructor.apply(this,arguments),n.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:n.triggerMethod,normalizeMethods:n.normalizeMethods,getTemplate:function(){return n.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=n.getOption(this,"templateHelpers");return r.isFunction(t)&&(t=t.call(this)),r.extend(e,t)},normalizeUIKeys:function(e){var t=this;if(void 0!==e)return r.each(r.keys(e),(function(n){var i=/@ui.[a-zA-Z_$0-9]*/g;n.match(i)&&(e[n.replace(i,(function(e){return r.result(t,"ui")[e.slice(4)]}))]=e[n],delete e[n])})),e},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(r.result(this,"triggers"));return r.each(t,(function(t,n){var i=r.isObject(t),s=i?t.event:t;e[n]=function(e){if(e){var r=e.preventDefault,n=e.stopPropagation,a=i?t.preventDefault:r,o=i?t.stopPropagation:n;a&&r&&r.apply(e),o&&n&&n.apply(e)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,l)}}),this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),n.bindEntityEvents(this,this.model,n.getOption(this,"modelEvents")),n.bindEntityEvents(this,this.collection,n.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,r.isFunction(e)&&(e=e.call(this));var n={},i=this.configureTriggers();r.extend(n,e,i),t.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),n.unbindEntityEvents(this,this.model,n.getOption(this,"modelEvents")),n.unbindEntityEvents(this,this.collection,n.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){this.isClosed||!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=r.result(this,"_uiBindings");this.ui={},r.each(r.keys(e),(function(t){var r=e[t];this.ui[t]=this.$(r)}),this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(r.each(this.ui,(function(e,t){delete this.ui[t]}),this),this.ui=this._uiBindings,delete this._uiBindings)}}),n.ItemView=n.View.extend({constructor:function(){n.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),r=n.Renderer.render(t,e);return this.$el.html(r),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),n.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),n.CollectionView=n.View.extend({itemViewEventPrefix:"itemview",constructor:function(e){this._initChildViewStorage(),n.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(r.each(this._bufferedChildren,(function(e){n.triggerMethod.call(e,"show")})),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(e,t,r){this.closeEmptyView();var n=this.getItemView(e),i=this.collection.indexOf(e);this.addItemView(e,n,i)},onShowCalled:function(){this.children.each((function(e){n.triggerMethod.call(e,"show")}))},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var e;this.collection.each((function(t,r){e=this.getItemView(t),this.addItemView(t,e,r)}),this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var r=new t.Model;this.addItemView(r,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return n.getOption(this,"emptyView")},getItemView:function(e){var t=n.getOption(this,"itemView");return t||s("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(e,t,i){var s=n.getOption(this,"itemViewOptions");r.isFunction(s)&&(s=s.call(this,e,i));var a=this.buildItemView(e,t,s);return this.addChildViewEventForwarding(a),this.triggerMethod("before:item:added",a),this.children.add(a),this.renderItemView(a,i),this._isShown&&!this.isBuffering&&n.triggerMethod.call(a,"show"),this.triggerMethod("after:item:added",a),a},addChildViewEventForwarding:function(e){var t=n.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",(function(){var s=i.call(arguments),a=s[0],o=this.normalizeMethods(this.getItemEvents());s[0]=t+":"+a,s.splice(1,0,e),void 0!==o&&r.isFunction(o[a])&&o[a].apply(this,s),n.triggerMethod.apply(this,s)}),this)},getItemEvents:function(){return r.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,n){return new t(r.extend({model:e},n))},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty:function(e){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t,r){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),n.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each((function(e){this.removeChildView(e)}),this),this.checkEmpty()}}),n.CompositeView=n.CollectionView.extend({constructor:function(){n.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",(function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))}))},getItemView:function(e){var t=n.getOption(this,"itemView")||this.constructor;return t||s("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),n.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return n.Renderer.render(t,e)},appendBuffer:function(e,t){this.getItemViewContainer(e).append(t)},appendHtml:function(e,t,r){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):this.getItemViewContainer(e).append(t.el)},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,i=n.getOption(e,"itemViewContainer");if(i){var a=r.isFunction(i)?i.call(this):i;(t=e.$(a)).length<=0&&s("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),n.Layout=n.ItemView.extend({regionType:n.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),n.ItemView.prototype.constructor.call(this,e)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),n.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),n.ItemView.prototype.close.apply(this,arguments))},addRegion:function(e,t){var r={};return r[e]=t,this._buildRegions(r)[e]},addRegions:function(e){return this.regions=r.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,r={regionType:n.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,r)},_initializeRegions:function(e){var t;this._initRegionManager(),t=r.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each((function(e){e.reset()}))},_initRegionManager:function(){this.regionManager=new n.RegionManager,this.listenTo(this.regionManager,"region:add",(function(e,t){this[e]=t,this.trigger("region:add",e,t)})),this.listenTo(this.regionManager,"region:remove",(function(e,t){delete this[e],this.trigger("region:remove",e,t)}))}}),n.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,arguments),this.options=e||{};var r=n.getOption(this,"appRoutes"),i=this._getController();this.processAppRoutes(i,r)},appRoute:function(e,t){var r=this._getController();this._addAppRoute(r,e,t)},processAppRoutes:function(e,t){if(t){var n=r.keys(t).reverse();r.each(n,(function(r){this._addAppRoute(e,r,t[r])}),this)}},_getController:function(){return n.getOption(this,"controller")},_addAppRoute:function(e,t,n){var i=e[n];i||s("Method '"+n+"' was not found on the controller"),this.route(t,n,r.bind(i,e))}}),n.Application=function(e){this._initRegionManager(),this._initCallbacks=new n.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},r.extend(this,e),this.triggerMethod=n.triggerMethod},r.extend(n.Application.prototype,t.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var r=n.Module.getClass(t),s=i.call(arguments);return s.unshift(this),r.create.apply(r,s)},_initRegionManager:function(){this._regionManager=new n.RegionManager,this.listenTo(this._regionManager,"region:add",(function(e,t){this[e]=t})),this.listenTo(this._regionManager,"region:remove",(function(e,t){delete this[e]}))}}),n.Application.extend=n.extend,n.Module=function(e,t,i){this.moduleName=e,this.options=r.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=n.triggerMethod,r.isFunction(this.initialize)&&this.initialize(this.options,e,t)},n.Module.extend=n.extend,r.extend(n.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(r.each(this.submodules,(function(t){t.startWithParent&&t.start(e)})),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,n.triggerMethod.call(this,"before:stop"),r.each(this.submodules,(function(e){e.stop()})),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),n.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var s=r.flatten([this,this.app,t,n,n.$,r,i]);e.apply(this,s)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new n.Callbacks,this._finalizerCallbacks=new n.Callbacks}}),r.extend(n.Module,{create:function(e,t,n){var s=e,a=i.call(arguments);a.splice(0,3);var o=(t=t.split(".")).length,l=[];return l[o-1]=n,r.each(t,(function(t,r){var i=s;s=this._getModule(i,t,e,n),this._addModuleDefinition(i,s,l[r],a)}),this),s},_getModule:function(e,t,n,i,s){var a=r.extend({},i),o=this.getClass(i),l=e[t];return l||(l=new o(t,n,a),e[t]=l,e.submodules[t]=l),l},getClass:function(e){var t=n.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,i,s){var a,o;!r.isFunction(i)||i.prototype instanceof n.Module?r.isObject(i)?(a=i.define,o=!!r.isUndefined(i.startWithParent)||i.startWithParent):o=!0:(a=i,o=!0),a&&t.addDefinition(a,s),t.startWithParent=t.startWithParent&&o,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer((function(e){t.startWithParent&&t.start(e)})))}})}(0,n=s,i),n.Marionette)},12152:function(e,t,r){e.exports=function(e,t){function r(r){return{underscore:e,"./backbone-1.2.3+19b88d2+57e89d8":t}[r]}return function(e){function t(e){var r=t.cache[e];if(!r){var n={};r=t.cache[e]={id:e,exports:n},t.modules[e].call(n,r,n)}return r.exports}return t.cache=[],t.modules=[function(e,n){var i=r("underscore"),s=r("./backbone-1.2.3+19b88d2+57e89d8"),a=t(2),o=t(5),l=t(4),c=t(1),d=t(7);function u(e,t){this._superset=e,this._filtered=new a(e,t),this._sorted=new o(this._filtered,t),this._paginated=new l(this._sorted,t),c(this._paginated,this),d.call(this,this._filtered,m),d.call(this,this._sorted,h),d.call(this,this._paginated,g),this.initialize(t)}var p={superset:function(){return this._superset},getFilteredLength:function(){return this._filtered.length},removeTransforms:function(){return this._filtered.resetFilters(),this._sorted.removeSort(),this._paginated.removePagination(),this},destroy:function(){this.stopListening(),this._filtered.destroy(),this._sorted.destroy(),this._paginated.destroy(),this.length=0,this.trigger("obscura:destroy")}},m=["filtered:add","filtered:remove","filtered:reset"],h=["sorted:add","sorted:remove"],g=["paginated:change:perPage","paginated:change:page","paginated:change:numPages"];i.each(["filterBy","removeFilter","resetFilters","refilter","hasFilter","getFilters"],(function(e){p[e]=function(){var t=a.prototype[e].apply(this._filtered,arguments);return t===this._filtered?this:t}})),i.each(["setPerPage","setPage","getPerPage","getNumPages","getPage","hasNextPage","hasPrevPage","nextPage","prevPage","movePage","removePagination","firstPage","lastPage"],(function(e){p[e]=function(){var t=l.prototype[e].apply(this._paginated,arguments);return t===this._paginated?this:t}})),i.each(["setSort","reverseSort","removeSort"],(function(e){p[e]=function(){var t=o.prototype[e].apply(this._sorted,arguments);return t===this._sorted?this:t}})),i.each(["add","create","remove","set","reset","sort","parse","sync","fetch","push","pop","shift","unshift"],(function(e){p[e]=function(){throw new Error("Backbone.Obscura: Unsupported method: "+e+"called on read-only proxy")}})),i.extend(u.prototype,p,s.Events),(u=s.Collection.extend(u.prototype)).FilteredCollection=a,u.SortedCollection=o,u.PaginatedCollection=l,e.exports=u},function(e,t){var n=r("underscore"),i=r("./backbone-1.2.3+19b88d2+57e89d8"),s=["_onModelEvent","_prepareModel","_removeReference","_reset","add","initialize","sync","remove","reset","set","push","pop","unshift","shift","sort","parse","fetch","create","model","off","on","listenTo","listenToOnce","bind","trigger","once","stopListening"],a=["add","remove","reset","sort","destroy","sync","request","error"];e.exports=function(e,t){function r(){t.length=e.length}var o={};return n.each(n.functions(i.Collection.prototype),(function(t){n.contains(s,t)||(o[t]=function(){return e[t].apply(e,arguments)})})),n.extend(t,i.Events,o),t.listenTo(e,"all",r),t.listenTo(e,"all",(function(r){var i=n.toArray(arguments),s="change"===r||"change:"===r.slice(0,7);"reset"===r&&(t.models=e.models),n.contains(a,r)?(n.contains(["add","remove","destroy"],r)?i[2]=t:n.contains(["reset","sort"],r)&&(i[1]=t),t.trigger.apply(this,i)):s&&t.contains(i[1])&&t.trigger.apply(this,i)})),t.models=e.models,r(),t}},function(e,n){var i=r("underscore"),s=r("./backbone-1.2.3+19b88d2+57e89d8"),a=t(1),o=t(3);function l(){this._filterResultCache={}}function c(e){for(var t in this._filterResultCache)this._filterResultCache.hasOwnProperty(t)&&delete this._filterResultCache[t][e]}function d(e,t){this._filters[e]&&c.call(this,e),this._filters[e]=t,this.trigger("filtered:add",e)}function u(e){delete this._filters[e],c.call(this,e),this.trigger("filtered:remove",e)}function p(e){this._filterResultCache[e.cid]||(this._filterResultCache[e.cid]={});var t=this._filterResultCache[e.cid];for(var r in this._filters)if(this._filters.hasOwnProperty(r)&&(t.hasOwnProperty(r)||(t[r]=this._filters[r].fn(e)),!t[r]))return!1;return!0}function m(e){e||(e={});var t=[];this._superset&&(t=this._superset.filter(i.bind(p,this))),e.reset?this._collection.reset(t):this._collection.set(t),this.length=this._collection.length}function h(){m.call(this,{reset:!0})}function g(){var e=!(!this._superset||!this._superset.comparator);m.call(this,{reset:e})}function y(e){if(this._filterResultCache[e.cid]={},p.call(this,e)){if(!this._collection.get(e.cid)){for(var t=null,r=this.superset().indexOf(e)-1;r>=0;r-=1)if(this.contains(this.superset().at(r))){t=this.indexOf(this.superset().at(r))+1;break}t=t||0,this._collection.add(e,{at:t})}}else this._collection.get(e.cid)&&this._collection.remove(e);this.length=this._collection.length}function v(e){this._filterResultCache[e.cid]={},p.call(this,e)||this._collection.get(e.cid)&&this._collection.remove(e)}function f(e,t,r){"change:"===e.slice(0,7)&&v.call(this,arguments[1])}function b(e){this.contains(e)&&this._collection.remove(e),this.length=this._collection.length}function Z(e){this._superset=e,this._collection=new s.Collection(e.toArray()),a(this._collection,this),this.resetFilters(),this.listenTo(this._superset,"reset",h),this.listenTo(this._superset,"sort",g),this.listenTo(this._superset,"add change",y),this.listenTo(this._superset,"remove",b),this.listenTo(this._superset,"all",f)}var S={defaultFilterName:"__default",filterBy:function(e,t){return t||(t=e,e=this.defaultFilterName),d.call(this,e,o(t)),m.call(this),this},removeFilter:function(e){return e||(e=this.defaultFilterName),u.call(this,e),m.call(this),this},resetFilters:function(){return this._filters={},l.call(this),this.trigger("filtered:reset"),m.call(this),this},superset:function(){return this._superset},refilter:function(e){return"object"==typeof e&&e.cid?y.call(this,e):(l.call(this),m.call(this)),this},getFilters:function(){return i.keys(this._filters)},hasFilter:function(e){return i.contains(this.getFilters(),e)},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("filtered:destroy")}};i.extend(Z.prototype,S,s.Events),e.exports=Z},function(e,t){var n=r("underscore");function i(e,t){return n.isArray(t)||(t=null),{fn:e,keys:t}}e.exports=function(e,t){return n.isFunction(e)?i(e,t):n.isObject(e)?function(e){var t=n.keys(e),r=n.map(t,(function(t){var r=e[t];return n.isFunction(r)?function(e,t){return function(r){return t(r.get(e))}}(t,r):function(e,t){return function(r){return r.get(e)===t}}(t,r)}));return i((function(e){for(var t=0;t<r.length;t++)if(!r[t](e))return!1;return!0}),t)}(e):void 0}},function(e,n){var i=r("underscore"),s=r("./backbone-1.2.3+19b88d2+57e89d8"),a=t(1);function o(){var e=this.getPage()*this.getPerPage();return[e,e+this.getPerPage()]}function l(){var e=o.call(this);this._collection.reset(this.superset().slice(e[0],e[1]))}function c(){this._totalPages;var e=this.superset().length,t=this.getPerPage(),r=e%t==0?e/t:Math.floor(e/t)+1,n=this._totalPages!==r;if(this._totalPages=r,n&&this.trigger("paginated:change:numPages",{numPages:r}),this.getPage()>=r)return this.setPage(r-1),!0}function d(){c.call(this)||l.call(this)}function u(e,t){for(var r=i.max([e.length,t.length]),n=0,s=0;n<r;n+=1,s+=1)if(e[n]!==t[s])if(t[n-1]===e[n])s-=1;else{if(t[n+1]!==e[n])return e[n];s+=1}}function p(e,t,r){if(!c.call(this)){var n=o.call(this),i=n[0],s=n[1],a=u(this.superset().slice(i,s),this._collection.toArray()),l=u(this._collection.toArray(),this.superset().slice(i,s));l&&this._collection.remove(l),a&&this._collection.add(a,{at:this.superset().indexOf(a)-i})}}function m(e,t){this._superset=e,this._collection=new s.Collection(e.toArray()),this._page=0,this.setPerPage(t&&t.perPage?t.perPage:null),a(this._collection,this),this.listenTo(this._superset,"add remove",p),this.listenTo(this._superset,"reset sort",d)}var h={removePagination:function(){return this.setPerPage(null),this},setPerPage:function(e){return this._perPage=e,d.call(this),this.setPage(0),this.trigger("paginated:change:perPage",{perPage:e,numPages:this.getNumPages()}),this},setPage:function(e){var t=this.getNumPages()-1;return e=(e=(e=e>0?e:0)<t?e:t)<0?0:e,this._page=e,l.call(this),this.trigger("paginated:change:page",{page:e}),this},getPerPage:function(){return this._perPage||this.superset().length||1},getNumPages:function(){return this._totalPages},getPage:function(){return this._page},hasNextPage:function(){return this.getPage()<this.getNumPages()-1},hasPrevPage:function(){return this.getPage()>0},nextPage:function(){return this.movePage(1),this},prevPage:function(){return this.movePage(-1),this},firstPage:function(){this.setPage(0)},lastPage:function(){this.setPage(this.getNumPages()-1)},movePage:function(e){return this.setPage(this.getPage()+e),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this._page=0,this._totalPages=0,this.length=0,this.trigger("paginated:destroy")}};i.extend(m.prototype,h,s.Events),e.exports=m},function(e,n){var i=r("underscore"),s=r("./backbone-1.2.3+19b88d2+57e89d8"),a=t(1),o=t(6);function l(e){return i.isFunction(e)?e:function(t){return t.get(e)}}function c(e){return this._comparator?this._reverse?o(this._collection.toArray(),e,l(this._comparator)):i.sortedIndex(this._collection.toArray(),e,l(this._comparator)):this._superset.indexOf(e)}function d(e){var t=c.call(this,e);this._collection.add(e,{at:t})}function u(e){this.contains(e)&&this._collection.remove(e)}function p(e){this.contains(e)&&this._collection.indexOf(e)!==c.call(this,e)&&(this._collection.remove(e),d.call(this,e))}function m(){if(this._comparator){var e=this._superset.sortBy(this._comparator);this._collection.reset(this._reverse?e.reverse():e)}else this._collection.reset(this._superset.toArray())}function h(e){this._superset=e,this._reverse=!1,this._comparator=null,this._collection=new s.Collection(e.toArray()),a(this._collection,this),this.listenTo(this._superset,"add",d),this.listenTo(this._superset,"remove",u),this.listenTo(this._superset,"change",p),this.listenTo(this._superset,"reset",m)}var g={setSort:function(e,t){return this._reverse="desc"===t,this._comparator=e,m.call(this),e?this.trigger("sorted:add"):this.trigger("sorted:remove"),this},reverseSort:function(){return this._reverse=!this._reverse,m.call(this),this},removeSort:function(){return this.setSort(),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("sorted:destroy")}};i.extend(h.prototype,g,s.Events),e.exports=h},function(e,t){var n=r("underscore");e.exports=function(e,t,r,i){for(var s=(r=null==r?n.identity:function(e){return n.isFunction(e)?e:function(t){return t[e]}}(r)).call(i,t),a=0,o=e.length;a<o;){var l=a+o>>>1;r.call(i,e[l])<s?o=l:a=l+1}return a}},function(e,t){var n=r("underscore");e.exports=function(e,t){n.each(t,(function(t){this.listenTo(e,t,(function(){var e=n.toArray(arguments);e.unshift(t),this.trigger.apply(this,e)}))}),this)}}],t(0)}()}(r(13469),r(9390))},96790:function(e,t,r){var n,i;n=r(13469),i=r(9390),e.exports=function(e,t){"use strict";return t.Wreqr=function(e,t,r){var n,i={};return i.Handlers=function(e,t){var r=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return r.extend=e.Model.extend,t.extend(r.prototype,e.Events,{setHandlers:function(e){t.each(e,(function(e,r){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(r,e,n)}),this)},setHandler:function(e,t,r){var n={callback:t,context:r};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,r)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),r}(e,r),i.CommandStorage=(n=function(e){this.options=e,this._commands={},r.isFunction(this.initialize)&&this.initialize(e)},r.extend(n.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){this.getCommands(e).instances.push(t)},clearCommands:function(e){this.getCommands(e).instances=[]}}),n),i.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var r=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,r)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,n){var i=this.storage.getCommands(e);r.each(i.instances,(function(e){t.apply(n,e)})),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,n=e.storageType||this.storageType;t=r.isFunction(n)?new n:n,this.storage=t}})}(i),i.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);if(this.hasHandler(e))return this.getHandler(e).apply(this,t)}})}(i),i.EventAggregator=function(e,t){var r=function(){};return r.extend=e.Model.extend,t.extend(r.prototype,e.Events),r}(e,r),i}(t,t.Marionette,e),t.Wreqr}(n,i)},21356:(e,t,r)=>{!function(e){"use strict";var t=function(r,n){this.$element=e(r),this.options=e.extend({},t.DEFAULTS,n)};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(e){var t="disabled",r=this.$element,n=r.is("input")?"val":"html",i=r.data();e+="Text",i.resetText||r.data("resetText",r[n]()),r[n](i[e]||this.options[e]),setTimeout((function(){"loadingText"==e?r.addClass(t).attr(t,t):r.removeClass(t).removeAttr(t)}),0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons"]');e.length&&"radio"===this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change").prop("type")&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=function(r){return this.each((function(){var n=e(this),i=n.data("bs.button"),s="object"==typeof r&&r;i||n.data("bs.button",i=new t(this,s)),"toggle"==r?i.toggle():r&&i.setState(r)}))},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",(function(t){var r=e(t.target);r.hasClass("btn")||(r=r.closest(".btn")),r.button("toggle"),t.preventDefault()}))}(r(19755))},56150:(e,t,r)=>{!function(e){"use strict";var t=function(t,r){this.options=r,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var r=this,n=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop((function(){var n=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(document.body),r.$element.show(),n&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});n?r.$element.find(".modal-dialog").one(e.support.transition.end,(function(){r.$element.focus().trigger(i)})).emulateTransitionEnd(300):r.$element.focus().trigger(i)})))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy((function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()}),this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy((function(e){27==e.which&&this.hide()}),this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop((function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")}))},t.prototype.removeBackdrop=function(){delete this.backdropMouseDownTarget,this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&r;if(this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$element.on("mousedown.dismiss.modal",e.proxy((function(e){this.backdropMouseDownTarget=e.target}),this)),this.$element.on("mouseup.dismiss.modal",e.proxy((function(e){e.target===this.backdropMouseDownTarget&&(delete this.backdropMouseDownTarget,e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)))}),this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var r=e.fn.modal;e.fn.modal=function(r,n){return this.each((function(){var i=e(this),s=i.data("bs.modal"),a=e.extend({},t.DEFAULTS,i.data(),"object"==typeof r&&r);s||i.data("bs.modal",s=new t(this,a)),"string"==typeof r?s[r](n):a.show&&s.show(n)}))},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(t){var r=e(this),n=r.attr("href"),i=e(r.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},i.data(),r.data());t.preventDefault(),i.modal(s,this).one("hide",(function(){r.is(":visible")&&r.focus()}))})),e(document).on("show.bs.modal",".modal",(function(){e(document.body).addClass("modal-open")})).on("hidden.bs.modal",".modal",(function(){e(document.body).removeClass("modal-open")}))}(r(19755))},76823:(e,t,r)=>{!function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,r,n){this.enabled=!0,this.type=t,this.$element=e(r),this.options=this.getOptions(n);for(var i=this.options.trigger.split(" "),s=i.length;s--;){var a=i[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var o="hover"==a?"mouseenter":"focus",l="hover"==a?"mouseleave":"blur";this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return(t=e.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},r=this.getDefaults();return this._options&&e.each(this._options,(function(e,n){r[e]!=n&&(t[e]=n)})),t},t.prototype.enter=function(t){var r=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(r.timeout),r.hoverState="in",!r.options.delay||!r.options.delay.show)return r.show();r.timeout=setTimeout((function(){"in"==r.hoverState&&r.show()}),r.options.delay.show)},t.prototype.leave=function(t){var r=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(r.timeout),r.hoverState="out",!r.options.delay||!r.options.delay.hide)return r.hide();r.timeout=setTimeout((function(){"out"==r.hoverState&&r.hide()}),r.options.delay.hide)},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var r=this.tip();this.setContent(),this.options.animation&&r.addClass("fade");var n="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,s=i.test(n);s&&(n=n.replace(i,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(n),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var a=this.getPosition(),o=r[0].offsetWidth,l=r[0].offsetHeight;if(s){var c=this.$element.parent(),d=n,u=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:c.outerWidth(),m="body"==this.options.container?window.innerHeight:c.outerHeight(),h="body"==this.options.container?0:c.offset().left;n="bottom"==n&&a.top+a.height+l-u>m?"top":"top"==n&&a.top-u-l<0?"bottom":"right"==n&&a.right+o>p?"left":"left"==n&&a.left-o<h?"right":n,r.removeClass(d).addClass(n)}var g=this.getCalculatedOffset(n,a,o,l);this.applyPlacement(g,n),this.$element.trigger("shown.bs."+this.type)}},t.prototype.applyPlacement=function(e,t){var r,n=this.tip(),i=n[0].offsetWidth,s=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),o=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(o)&&(o=0),e.top=e.top+a,e.left=e.left+o,n.offset(e).addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;if("top"==t&&c!=s&&(r=!0,e.top=e.top+s-c),/bottom|top/.test(t)){var d=0;e.left<0&&(d=-2*e.left,e.left=0,n.offset(e),l=n[0].offsetWidth,c=n[0].offsetHeight),this.replaceArrow(d-i+l,l,"left")}else this.replaceArrow(c-s,c,"top");r&&n.offset(e)},t.prototype.replaceArrow=function(e,t,r){this.arrow().css(r,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){var t=this,r=this.tip(),n=e.Event("hide.bs."+this.type);function i(){"in"!=t.hoverState&&r.detach()}if(this.$element.trigger(n),!n.isDefaultPrevented())return r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r.one(e.support.transition.end,i).emulateTransitionEnd(150):i(),this.$element.trigger("hidden.bs."+this.type),this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,r,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-r/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-r/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-r}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var r=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;r.tip().hasClass("in")?r.leave(r):r.enter(r)},t.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var r=e.fn.tooltip;e.fn.tooltip=function(r){return this.each((function(){var n=e(this),i=n.data("bs.tooltip"),s="object"==typeof r&&r;i||n.data("bs.tooltip",i=new t(this,s)),"string"==typeof r&&i[r]()}))},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(r(19755))},91477:(e,t,r)=>{!function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var r=!1,n=this;return e(this).one(e.support.transition.end,(function(){r=!0})),setTimeout((function(){r||e(n).trigger(e.support.transition.end)}),t),this},e((function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var r in t)if(void 0!==e.style[r])return{end:t[r]}}()}))}(r(19755))},69213:()=>{!function(){"use strict";var e="undefined"==typeof window,t=!e&&"scrollBehavior"in document.documentElement.style,r=function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function n(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a}function i(){return null!=document.scrollingElement?document.scrollingElement:document.documentElement}var s=new RegExp("scroll-behavior:\\s*([^;]*)");function a(e,t){var r="scroll-behavior:"+t,n=e.getAttribute("style");if(null!=n&&""!==n){var i=o(e);if(null!=i){var s="scroll-behavior:"+i;n=(n=n.replace(s+";","")).replace(s,"")}e.setAttribute("style",n.endsWith(";")?""+n+r:";"+n+r)}else e.setAttribute("style",r)}function o(e){var t=e.getAttribute("style");if(null!=t&&t.includes("scroll-behavior")){var r=t.match(s);if(null!=r){var i=n(r,2)[1];if(null!=i&&""!==i)return i}}}function l(e,t){if(null!=t&&"smooth"===t.behavior)return"smooth";var r,n="style"in e?e:i();if("style"in n){var s=n.style.scrollBehavior;null!=s&&""!==s&&(r=s)}if(null==r){var a=n.getAttribute("scroll-behavior");null!=a&&""!==a&&(r=a)}if(null==r&&(r=o(n)),null==r){var l=getComputedStyle(n).getPropertyValue("scrollBehavior");null!=l&&""!==l&&(r=l)}return r}function c(e){return.5*(1-Math.cos(Math.PI*e))}var d={reset:function(){}},u="undefined"==typeof WeakMap?void 0:new WeakMap;var p=e?void 0:Element.prototype.scroll,m=e?void 0:window.scroll,h=e?void 0:Element.prototype.scrollBy,g=e?void 0:window.scrollBy,y=e?void 0:Element.prototype.scrollTo,v=e?void 0:window.scrollTo;function f(e,t){this.__adjustingScrollPosition=!0,this.scrollLeft=e,this.scrollTop=t,delete this.__adjustingScrollPosition}function b(e,t){return f.call(this,e,t)}function Z(e,t){this.__adjustingScrollPosition=!0,this.scrollLeft+=e,this.scrollTop+=t,delete this.__adjustingScrollPosition}function S(e,t){switch(e){case"scroll":return t instanceof Element?null!=p?p:f:m;case"scrollBy":return t instanceof Element?null!=h?h:Z:g;case"scrollTo":return t instanceof Element?null!=y?y:b:v}}function P(e){return null==e?0:"number"==typeof e?e:"string"==typeof e?parseFloat(e):0}function I(e){return null!=e&&"object"==typeof e}function E(e,n,s,p){!function(e,r,n){var s=l(r,e);null==s||"auto"===s?S(n,r).call(r,e.left,e.top):function(e){var r=e.startTime,n=e.startX,s=e.startY,l=e.endX,p=e.endY,m=e.method,h=e.scroller,g=0,y=l-n,v=p-s,f=Math.max(Math.abs(y/1e3*15e3),Math.abs(v/1e3*15e3)),b=function(e){if(t||null==u)return d;var r,n,s,l,c,p=i(),m=u.get(e);if(null!=m)r=m.cachedScrollSnapValue,n=m.cachedScrollBehaviorStyleAttributeValue,s=m.secondaryScroller,l=m.secondaryScrollerCachedScrollSnapValue,c=m.secondaryScrollerCachedScrollBehaviorStyleAttributeValue,m.release();else{r=""===e.style.scrollSnapType?null:e.style.scrollSnapType,n=o(e),s=e===p&&p!==document.body?document.body:void 0,l=null==s?void 0:""===s.style.scrollSnapType?null:s.style.scrollSnapType,c=null==s?void 0:o(s);var h=getComputedStyle(e).getPropertyValue("scroll-snap-type"),g=null==s?void 0:getComputedStyle(s).getPropertyValue("scroll-snap-type");if("none"===h&&"none"===g)return d}e.style.scrollSnapType="none",void 0!==s&&(s.style.scrollSnapType="none"),void 0!==n&&a(e,n),void 0!==s&&void 0!==c&&a(s,c);var y=!1,v=e===p?window:e;function f(){v.removeEventListener("scroll",b),null!=u&&u.delete(e),y=!0}function b(){e.style.scrollSnapType=r,null!=s&&void 0!==l&&(s.style.scrollSnapType=l),void 0!==n&&a(e,n),void 0!==s&&void 0!==c&&a(s,c),f()}return u.set(e,{release:f,cachedScrollSnapValue:r,cachedScrollBehaviorStyleAttributeValue:n,secondaryScroller:s,secondaryScrollerCachedScrollSnapValue:l,secondaryScrollerCachedScrollBehaviorStyleAttributeValue:c}),{reset:function(){setTimeout((function(){y||v.addEventListener("scroll",b)}))}}}(h);requestAnimationFrame((function e(t){g+=t-r;var i=Math.max(0,Math.min(1,0===f?0:g/f)),a=Math.floor(n+y*c(i)),o=Math.floor(s+v*c(i));m(a,o),a!==l||o!==p?requestAnimationFrame(e):null!=b&&(b.reset(),b=void 0)}))}(function(e,t,r,n){var s="performance"in window?performance.now():Date.now();if(e instanceof Element)return{startTime:s,startX:a=e.scrollLeft,startY:o=e.scrollTop,endX:Math.floor("scrollBy"===n?a+t:t),endY:Math.floor("scrollBy"===n?o+r:r),method:S("scrollTo",e).bind(e),scroller:e};var a,o,l=window.scrollX,c=window.pageXOffset,d=window.scrollY,u=window.pageYOffset;return{startTime:s,startX:a=null==l||0===l?c:l,startY:o=null==d||0===d?u:d,endX:Math.floor("scrollBy"===n?a+t:t),endY:Math.floor("scrollBy"===n?o+r:r),method:S("scrollTo",window).bind(window),scroller:i()}}(r,e.left,e.top,n))}(function(e,t){if(void 0===t&&!I(e))throw new TypeError("Failed to execute 'scroll' on 'Element': parameter 1 ('options') is not an object.");return I(e)?r(r({},w(e.left,e.top)),{behavior:null==e.behavior?"auto":e.behavior}):r(r({},w(e,t)),{behavior:"auto"})}(s,p),e,n)}function w(e,t){return{left:P(e),top:P(t)}}function C(e){return"nodeType"in e&&1===e.nodeType?e.parentNode:"ShadowRoot"in window&&e instanceof window.ShadowRoot?e.host:e===document?window:e instanceof Node?e.parentNode:null}function M(e){return"visible"!==e&&"clip"!==e}function D(e){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var t=getComputedStyle(e,null);return M(t.overflowY)||M(t.overflowX)}return!1}function O(e){for(var t=e,r=i();null!=t;){var n=l(t);if(null!=n&&(t===r||D(t)))return[t,n];t=C(t)}for(t=e;null!=t;){if(t===r||D(t))return[t,"auto"];t=C(t)}return[r,"auto"]}function T(e){if(void 0===e&&(e=location),"origin"in e&&null!=e.origin)return e.origin;var t=null!=e.port&&e.port.length>0?":"+e.port:"";return("http:"===e.protocol&&":80"===t||"https:"===e.protocol&&":443"===t)&&(t=""),e.protocol+"//"+e.hostname+t}var x=/^#\d/;var A=e?void 0:Element.prototype.scrollIntoView;function k(e,t,r,n,i,s,a,o){return s<e&&a>t||s>e&&a<t?0:s<=e&&o<=r||a>=t&&o>=r?s-e-n:a>t&&o<r||s<e&&o>r?a-t+i:0}function N(e,t,r){var n=r.block,s=r.inline,a=i(),o=null!=window.visualViewport?visualViewport.width:innerWidth,l=null!=window.visualViewport?visualViewport.height:innerHeight,c=null!=window.scrollX?window.scrollX:window.pageXOffset,d=null!=window.scrollY?window.scrollY:window.pageYOffset,u=e.getBoundingClientRect(),p=u.height,m=u.width,h=u.top,g=u.right,y=u.bottom,v=u.left,f="start"===n||"nearest"===n?h:"end"===n?y:h+p/2,b="center"===s?v+m/2:"end"===s?g:v,Z=t.getBoundingClientRect(),S=Z.height,P=Z.width,I=Z.top,E=Z.right,w=Z.bottom,C=Z.left,M=getComputedStyle(t),D=parseInt(M.borderLeftWidth,10),O=parseInt(M.borderTopWidth,10),T=parseInt(M.borderRightWidth,10),x=parseInt(M.borderBottomWidth,10),A=0,N=0,R="offsetWidth"in t?t.offsetWidth-t.clientWidth-D-T:0,L="offsetHeight"in t?t.offsetHeight-t.clientHeight-O-x:0;if(a===t)A="start"===n?f:"end"===n?f-l:"nearest"===n?k(d,d+l,l,O,x,d+f,d+f+p,p):f-l/2,N="start"===s?b:"center"===s?b-o/2:"end"===s?b-o:k(c,c+o,o,D,T,c+b,c+b+m,m),A=Math.max(0,A+d),N=Math.max(0,N+c);else{A="start"===n?f-I-O:"end"===n?f-w+x+L:"nearest"===n?k(I,w,S,O,x+L,f,f+p,p):f-(I+S/2)+L/2,N="start"===s?b-C-D:"center"===s?b-(C+P/2)+R/2:"end"===s?b-E+T+R:k(C,E,P,D,T+R,b,b+m,m);var j=t.scrollLeft,V=t.scrollTop;A=Math.max(0,Math.min(V+A,t.scrollHeight-S+L)),N=Math.max(0,Math.min(j+N,t.scrollWidth-P+R))}return{top:A,left:N}}var R=e?void 0:Object.getOwnPropertyDescriptor(Element.prototype,"scrollTop").set,L=e?void 0:Object.getOwnPropertyDescriptor(Element.prototype,"scrollLeft").set,j=!e&&"scroll"in Element.prototype&&"scrollTo"in Element.prototype&&"scrollBy"in Element.prototype&&"scrollIntoView"in Element.prototype;e||t&&j||(Element.prototype.scroll=function(e,t){E(this,"scroll",e,t)},Element.prototype.scrollBy=function(e,t){E(this,"scrollBy",e,t)},Element.prototype.scrollTo=function(e,t){E(this,"scrollTo",e,t)},Element.prototype.scrollIntoView=function(e){var t=null==e||!0===e?{block:"start",inline:"nearest"}:!1===e?{block:"end",inline:"nearest"}:e,i=n(O(this),2),s=i[0],a=i[1],o=null!=t.behavior?t.behavior:a;if("smooth"===o)s.scrollTo(r({behavior:o},N(this,s,t)));else if(null!=A)A.call(this,t);else{var l=N(this,s,t),c=l.top,d=l.left;S("scrollTo",this).call(this,d,c)}},null!=HTMLElement.prototype.scrollIntoView&&HTMLElement.prototype.scrollIntoView!==Element.prototype.scrollIntoView&&(HTMLElement.prototype.scrollIntoView=Element.prototype.scrollIntoView),Object.defineProperty(Element.prototype,"scrollLeft",{set:function(e){return this.__adjustingScrollPosition?L.call(this,e):(E(this,"scrollTo",e,this.scrollTop),e)}}),Object.defineProperty(Element.prototype,"scrollTop",{set:function(e){return this.__adjustingScrollPosition?R.call(this,e):(E(this,"scrollTo",this.scrollLeft,e),e)}}),window.scroll=function(e,t){E(this,"scroll",e,t)},window.scrollBy=function(e,t){E(this,"scrollBy",e,t)},window.scrollTo=function(e,t){E(this,"scrollTo",e,t)},window.addEventListener("click",(function(e){if(e.isTrusted&&e.target instanceof HTMLAnchorElement){var t=e.target,r=t.pathname,i=t.search,s=t.hash;if(T(e.target)===T(location)&&r===location.pathname&&i===location.search&&null!=s&&!(s.length<1)){var a=function(e){for(var t=e;null!=t;){if("ShadowRoot"in window&&t instanceof window.ShadowRoot)return t;var r=C(t);if(r===t)return document;t=r}return document}(e.target),o=null;try{o=null!=s.match(x)?a.getElementById(s.slice(1)):a.querySelector(s)}catch(e){}if(null!=o){var l=n(O(o),2)[1];"smooth"===l&&(e.preventDefault(),o.scrollIntoView({behavior:l}))}}}})))}()},62568:function(e,t,r){var n,i,s,a,o,l,c,d,u,p=r(19755);"function"==typeof(i=function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(!(e=n(String(e||"").toLowerCase()))||!e.length)return[];var t,r,s,o,l=[],c=e.split(/ +/);for(t=0,r=c.length;t<r;t++){if(s=i(c[t]),this.settings.diacritics)for(o in a)a.hasOwnProperty(o)&&(s=s.replace(new RegExp(o,"g"),a[o]));l.push({string:c[t],regex:new RegExp(s,"i")})}return l},e.prototype.iterator=function(e,t){(s(e)?Array.prototype.forEach||function(e){for(var t=0,r=this.length;t<r;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)}).apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var r,n,i;e=this.prepareSearch(e,t),n=e.tokens,r=e.options.fields,i=n.length;var s,a=function(e,t){var r,n;return e?-1===(n=(e=String(e||"")).search(t.regex))?0:(r=t.string.length/e.length,0===n&&(r+=.5),r):0},o=(s=r.length)?1===s?function(e,t){return a(t[r[0]],e)}:function(e,t){for(var n=0,i=0;n<s;n++)i+=a(t[r[n]],e);return i/s}:function(){return 0};return i?1===i?function(e){return o(n[0],e)}:"and"===e.options.conjunction?function(e){for(var t,r=0,s=0;r<i;r++){if((t=o(n[r],e))<=0)return 0;s+=t}return s/i}:function(e){for(var t=0,r=0;t<i;t++)r+=o(n[t],e);return r/i}:function(){return 0}},e.prototype.getSortFunction=function(e,r){var n,i,s,a,o,l,c,d,u,p,m;if(m=!(e=(s=this).prepareSearch(e,r)).query&&r.sort_empty||r.sort,u=function(e,t){return"$score"===e?t.score:s.items[t.id][e]},o=[],m)for(n=0,i=m.length;n<i;n++)(e.query||"$score"!==m[n].field)&&o.push(m[n]);if(e.query){for(p=!0,n=0,i=o.length;n<i;n++)if("$score"===o[n].field){p=!1;break}p&&o.unshift({field:"$score",direction:"desc"})}else for(n=0,i=o.length;n<i;n++)if("$score"===o[n].field){o.splice(n,1);break}for(d=[],n=0,i=o.length;n<i;n++)d.push("desc"===o[n].direction?-1:1);return(l=o.length)?1===l?(a=o[0].field,c=d[0],function(e,r){return c*t(u(a,e),u(a,r))}):function(e,r){var n,i,s;for(n=0;n<l;n++)if(s=o[n].field,i=d[n]*t(u(s,e),u(s,r)))return i;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;var n=(t=r({},t)).fields,i=t.sort,a=t.sort_empty;return n&&!s(n)&&(t.fields=[n]),i&&!s(i)&&(t.sort=[i]),a&&!s(a)&&(t.sort_empty=[a]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var r,n,i,s,a=this;return n=this.prepareSearch(e,t),t=n.options,e=n.query,s=t.score||a.getScoreFunction(n),e.length?a.iterator(a.items,(function(e,i){r=s(e),(!1===t.filter||r>0)&&n.items.push({score:r,id:i})})):a.iterator(a.items,(function(e,t){n.items.push({score:1,id:t})})),(i=a.getSortFunction(n,t))&&n.items.sort(i),n.total=n.items.length,"number"==typeof t.limit&&(n.items=n.items.slice(0,t.limit)),n};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=o(String(e||"")))>(t=o(String(t||"")))?1:t>e?-1:0},r=function(e,t){var r,n,i,s;for(r=1,n=arguments.length;r<n;r++)if(s=arguments[r])for(i in s)s.hasOwnProperty(i)&&(e[i]=s[i]);return e},n=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},i=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},s=Array.isArray||p&&p.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a={a:"[a]",c:"[c]",d:"[d]",e:"[e]",i:"[i]",l:"[l]",n:"[n]",o:"[o]",r:"[r]",s:"[s]",t:"[t]",u:"[u]",y:"[y]",z:"[z]"},o=function(){var e,t,r,n,i="",s={};for(r in a)if(a.hasOwnProperty(r))for(i+=n=a[r].substring(2,a[r].length-1),e=0,t=n.length;e<t;e++)s[n.charAt(e)]=r;var o=new RegExp("["+i+"]","g");return function(e){return e.replace(o,(function(e){return s[e]})).toLowerCase()}}();return e})?(n=i.call((s={id:"sifter",exports:{},loaded:!1}).exports,r,s.exports,s),s.loaded=!0,void 0===n&&(n=s.exports)):n=i,"function"==typeof(o=function(){var e={mixin:function(e){e.plugins={},e.prototype.initializePlugins=function(e){var r,n,i,s=this,a=[];if(s.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(r=0,n=e.length;r<n;r++)"string"==typeof e[r]?a.push(e[r]):(s.plugins.settings[e[r].name]=e[r].options,a.push(e[r].name));else if(e)for(i in e)e.hasOwnProperty(i)&&(s.plugins.settings[i]=e[i],a.push(i));for(;a.length;)s.require(a.shift())},e.prototype.loadPlugin=function(t){var r=this,n=r.plugins,i=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=i.fn.apply(r,[r.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(e){var t=this,r=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(r.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return r.loaded[e]},e.define=function(t,r){e.plugins[t]={name:t,fn:r}}}},t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e})?(a=o.call((l={id:"microplugin",exports:{},loaded:!1}).exports,r,l.exports,l),l.loaded=!0,void 0===a&&(a=l.exports)):a=o,d=[r(19755),n,a],void 0===(u="function"==typeof(c=function(e,t,r){"use strict";var n=function(e,t){if("string"!=typeof t||t.length){var r="string"==typeof t?new RegExp(t,"i"):t,n=function(e){var t=0;if(3===e.nodeType){var i=e.data.search(r);if(i>=0&&e.data.length>0){var s=e.data.match(r),a=document.createElement("span");a.className="highlight";var o=e.splitText(i),l=(o.splitText(s[0].length),o.cloneNode(!0));a.appendChild(l),o.parentNode.replaceChild(a,o),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=n(e.childNodes[c]);return t};return e.each((function(){n(this)}))}},i=function(){};i.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var r=arguments.length;return 0===r?delete this._events:1===r?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=0)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},i.mixin=function(e){for(var t=["on","off","trigger"],r=0;r<t.length;r++)e.prototype[t[r]]=i.prototype[t[r]]};var s=/Mac/.test(navigator.userAgent),a=s?91:17,o=s?18:17,l=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,c=function(e){return void 0!==e},d=function(e){return null==e?null:"boolean"==typeof e?e?"1":"0":e+""},u=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},p=function(e){return(e+"").replace(/\$/g,"$$$$")},m=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},h=function(e,t,r){var n,i=e.trigger,s={};for(n in e.trigger=function(){var r=arguments[0];if(-1===t.indexOf(r))return i.apply(e,arguments);s[r]=arguments},r.apply(e,[]),e.trigger=i,s)s.hasOwnProperty(n)&&i.apply(e,s[n])},g=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var r=document.selection.createRange(),n=document.selection.createRange().text.length;r.moveStart("character",-e.value.length),t.start=r.text.length-n,t.length=n}return t},y=function(t){var r=null,n=function(n,i){var s,a,o,l,c,d,u,p;i=i||{},(n=n||window.event||{}).metaKey||n.altKey||(i.force||!1!==t.data("grow"))&&(s=t.val(),n.type&&"keydown"===n.type.toLowerCase()&&(o=(a=n.keyCode)>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||32===a,46===a||8===a?(p=g(t[0])).length?s=s.substring(0,p.start)+s.substring(p.start+p.length):8===a&&p.start?s=s.substring(0,p.start-1)+s.substring(p.start+1):46===a&&void 0!==p.start&&(s=s.substring(0,p.start)+s.substring(p.start+1)):o&&(d=n.shiftKey,u=String.fromCharCode(n.keyCode),s+=u=d?u.toUpperCase():u.toLowerCase())),l=t.attr("placeholder"),!s&&l&&(s=l),(c=function(t,r){if(!t)return 0;var n=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");!function(e,t,r){var n,i,s={};if(r)for(n=0,i=r.length;n<i;n++)s[r[n]]=e.css(r[n]);else s=e.css();t.css(s)}(r,n,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var i=n.width();return n.remove(),i}(s,t)+4)!==r&&(r=c,t.width(c),t.triggerHandler("resize")))};t.on("keydown keyup update blur",n),n()},v=function(r,n){var i,s,a,o,l=this;(o=r[0]).selectize=l;var c,d,u,p=window.getComputedStyle&&window.getComputedStyle(o,null);if(a=(a=p?p.getPropertyValue("direction"):o.currentStyle&&o.currentStyle.direction)||r.parents("[dir]:first").attr("dir")||"",e.extend(l,{order:0,settings:n,$input:r,tabIndex:r.attr("tabindex")||"",tagType:"select"===o.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(a),eventNS:".selectize"+ ++v.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:r.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?l.onSearchChange:(c=l.onSearchChange,d=n.loadThrottle,function(){var e=this,t=arguments;window.clearTimeout(u),u=window.setTimeout((function(){c.apply(e,t)}),d)})}),l.sifter=new t(this.options,{diacritics:n.diacritics}),l.settings.options){for(i=0,s=l.settings.options.length;i<s;i++)l.registerOption(l.settings.options[i]);delete l.settings.options}if(l.settings.optgroups){for(i=0,s=l.settings.optgroups.length;i<s;i++)l.registerOptionGroup(l.settings.optgroups[i]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return i.mixin(v),r.mixin(v),e.extend(v.prototype,{setup:function(){var t,r,n,i,c,d,u,p,m,h,g,v,f,b=this,Z=b.settings,S=b.eventNS,P=e(window),I=e(document),E=b.$input;if(u=b.settings.mode,p=E.attr("class")||"",t=e("<div>").addClass(Z.wrapperClass).addClass(p).addClass(u),r=e("<div>").addClass(Z.inputClass).addClass("items").appendTo(t),n=e('<input type="text" autocomplete="off" />').appendTo(r).attr("tabindex",E.is(":disabled")?"-1":b.tabIndex),d=e(Z.dropdownParent||t),i=e("<div>").addClass(Z.dropdownClass).addClass(u).hide().appendTo(d),c=e("<div>").addClass(Z.dropdownContentClass).appendTo(i),b.settings.copyClassesToDropdown&&i.addClass(p),t.css({width:E[0].style.width}),b.plugins.names.length&&(m="plugin-"+b.plugins.names.join(" plugin-"),t.addClass(m),i.addClass(m)),(null===Z.maxItems||Z.maxItems>1)&&1===b.tagType&&E.attr("multiple","multiple"),b.settings.placeholder&&n.attr("placeholder",Z.placeholder),!b.settings.splitOn&&b.settings.delimiter){var w=b.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");b.settings.splitOn=new RegExp("\\s*"+w+"+\\s*")}E.attr("autocorrect")&&n.attr("autocorrect",E.attr("autocorrect")),E.attr("autocapitalize")&&n.attr("autocapitalize",E.attr("autocapitalize")),b.$wrapper=t,b.$control=r,b.$control_input=n,b.$dropdown=i,b.$dropdown_content=c,i.on("mouseenter","[data-selectable]",(function(){return b.onOptionHover.apply(b,arguments)})),i.on("mousedown click","[data-selectable]",(function(){return b.onOptionSelect.apply(b,arguments)})),g="mousedown",v="*:not(input)",f=function(){return b.onItemSelect.apply(b,arguments)},(h=r).on(g,v,(function(e){for(var t=e.target;t&&t.parentNode!==h[0];)t=t.parentNode;return e.currentTarget=t,f.apply(this,[e])})),b.settings.manualInputWidth||y(n),r.on({mousedown:function(){return b.onMouseDown.apply(b,arguments)},click:function(){return b.onClick.apply(b,arguments)}}),n.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return b.onKeyDown.apply(b,arguments)},keyup:function(){return b.onKeyUp.apply(b,arguments)},keypress:function(){return b.onKeyPress.apply(b,arguments)},resize:function(){b.positionDropdown.apply(b,[])},blur:function(){return b.onBlur.apply(b,arguments)},focus:function(){return b.ignoreBlur=!1,b.onFocus.apply(b,arguments)},paste:function(){return b.onPaste.apply(b,arguments)}}),E.parents().last().find('label[for="'+E.attr("id")+'"]').on("click",(function(){b.onClick.apply(b,arguments)})),I.on("keydown"+S,(function(e){b.isCmdDown=e[s?"metaKey":"ctrlKey"],b.isCtrlDown=e[s?"altKey":"ctrlKey"],b.isShiftDown=e.shiftKey})),I.on("keyup"+S,(function(e){e.keyCode===o&&(b.isCtrlDown=!1),16===e.keyCode&&(b.isShiftDown=!1),e.keyCode===a&&(b.isCmdDown=!1)})),I.on("mousedown"+S,(function(e){if(b.isFocused){if(e.target===b.$dropdown[0]||e.target.parentNode===b.$dropdown[0])return!1;b.$control.has(e.target).length||e.target===b.$control[0]||b.blur(e.target)}})),P.on(["scroll"+S,"resize"+S].join(" "),(function(){b.isOpen&&b.positionDropdown.apply(b,arguments)})),P.on("mousemove"+S,(function(){b.ignoreHover=!1})),this.revertSettings={$children:E.children().detach(),tabindex:E.attr("tabindex")},E.attr("tabindex",-1).hide().after(b.$wrapper),e.isArray(Z.items)&&(b.setValue(Z.items),delete Z.items),l&&E.on("invalid"+S,(function(e){e.preventDefault(),b.isInvalid=!0,b.refreshState()})),b.updateOriginalInput(),b.refreshItems(),b.refreshState(),b.updatePlaceholder(),b.isSetup=!0,E.is(":disabled")&&b.disable(),b.on("change",this.onChange),E.data("selectize",b),E.addClass("selectized"),b.trigger("initialize"),!0===Z.preload&&b.onSearchChange("")},setupTemplates:function(){var t=this,r=t.settings.labelField,n=t.settings.optgroupLabelField,i={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[r])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[r])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},i,t.settings.render)},setupCallbacks:function(){var e,t,r={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in r)r.hasOwnProperty(e)&&(t=this.settings[r[e]])&&this.on(e,t)},onClick:function(e){this.isFocused||(this.focus(),e.preventDefault())},onMouseDown:function(t){var r=this,n=t.isDefaultPrevented();if(e(t.target),r.isFocused){if(t.target!==r.$control_input[0])return"single"===r.settings.mode&&t.target!==r.$control[0]?r.isOpen?r.close():r.open():n||r.setActiveItem(null),!1}else n||window.setTimeout((function(){r.focus()}),0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var r=this;r.isFull()||r.isInputHidden||r.isLocked?t.preventDefault():r.settings.splitOn&&setTimeout((function(){for(var t=e.trim(r.$control_input.val()||"").split(r.settings.splitOn),n=0,i=t.length;n<i;n++)r.createItem(t[n])}),0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){e.target,this.$control_input[0];var t=this;if(t.isLocked)9!==e.keyCode&&e.preventDefault();else{switch(e.keyCode){case 65:if(t.isCmdDown)return void t.selectAll();break;case 27:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var r=t.getAdjacentOption(t.$activeOption,1);r.length&&t.setActiveOption(r,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,-1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case 13:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case 37:return void t.advanceSelection(-1,e);case 39:return void t.advanceSelection(1,e);case 9:return void(t.settings.selectOnTab&&t.isOpen&&t.$activeOption?(t.onOptionSelect({currentTarget:t.$activeOption}),t.settings.allowCreateEmpty&&1===t.settings.maxItems||t.isFull()||e.preventDefault()):t.settings.create&&t.createItem()&&e.preventDefault());case 8:return void t.deleteSelection(e,!0);case 46:return void t.deleteSelection(e)}!t.isFull()&&!t.isInputHidden||(s?e.metaKey:e.ctrlKey)||e.preventDefault()}},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var r=t.$control_input.val()||"";t.lastValue!==r&&(t.lastValue=r,t.onSearchChange(r),t.refreshOptions(),t.trigger("type",r))},onSearchChange:function(e){var t=this,r=t.settings.load;r&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load((function(n){r.apply(t,[e,n])}))))},onFocus:function(e){var t=this,r=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),r||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var r=this;if(r.isFocused&&(r.isFocused=!1,!r.ignoreFocus))return r.ignoreBlur||document.activeElement!==r.$dropdown_content[0]?void setTimeout((function(){var e=function(){r.close(),r.setTextboxValue(""),r.setActiveItem(null),r.setActiveOption(null),r.setCaret(r.items.length),r.refreshState(),(t||document.body).focus(),r.ignoreFocus=!1,r.trigger("blur")};r.ignoreFocus=!0,r.settings.selectOnBlur&&r.$activeOption&&1===r.$activeOption.not(".create").length?(r.addItem(r.$activeOption.not(".create").data("value")),e()):r.settings.create&&r.settings.createOnBlur?r.createItem(null,!1,e):e()})):(r.ignoreBlur=!0,void r.onFocus(e))},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var r,n,i=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),(n=e(t.currentTarget)).hasClass("create")?i.createItem(null,(function(){i.settings.closeAfterSelect&&i.close()})):void 0!==(r=n.attr("data-value"))&&(i.lastQuery=null,i.setTextboxValue(""),i.addItem(r),i.settings.closeAfterSelect?i.close():!i.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&i.setActiveOption(i.getOption(r)))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,r=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||r.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){h(this,t?[]:["change"],(function(){this.clear(t),this.addItems(e,t)}))},setActiveItem:function(t,r){var n,i,s,a,o,l,c,d,u=this;if("single"!==u.settings.mode){if(!(t=e(t)).length)return e(u.$activeItems).removeClass("active"),u.$activeItems=[],void(u.isFocused&&u.showInput());if("mousedown"===(n=r&&r.type.toLowerCase())&&u.isShiftDown&&u.$activeItems.length){for(d=u.$control.children(".active:last"),(a=Array.prototype.indexOf.apply(u.$control[0].childNodes,[d[0]]))>(o=Array.prototype.indexOf.apply(u.$control[0].childNodes,[t[0]]))&&(c=a,a=o,o=c),i=a;i<=o;i++)l=u.$control[0].childNodes[i],-1===u.$activeItems.indexOf(l)&&(e(l).addClass("active"),u.$activeItems.push(l));r.preventDefault()}else"mousedown"===n&&u.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(s=u.$activeItems.indexOf(t[0]),u.$activeItems.splice(s,1),t.removeClass("active")):u.$activeItems.push(t.addClass("active")[0]):(e(u.$activeItems).removeClass("active"),u.$activeItems=[t.addClass("active")[0]]);u.hideInput(),this.isFocused||u.focus()}},setActiveOption:function(t,r,n){var i,s,a,o,l,d=this;d.$activeOption&&d.$activeOption.removeClass("active"),d.$activeOption=null,(t=e(t)).length&&(d.$activeOption=t.addClass("active"),!r&&c(r)||(i=d.$dropdown_content.height(),s=d.$activeOption.outerHeight(!0),r=d.$dropdown_content.scrollTop()||0,o=a=d.$activeOption.offset().top-d.$dropdown_content.offset().top+r,l=a-i+s,a+s>i+r?d.$dropdown_content.stop().animate({scrollTop:l},n?d.settings.scrollDuration:0):a<r&&d.$dropdown_content.stop().animate({scrollTop:o},n?d.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0}),this.settings.manualInputWidth||this.$control_input.css({position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1}),this.settings.manualInputWidth||this.$control_input.css({position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout((function(){e.ignoreFocus=!1,e.onFocus()}),0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var r,n,i,s=this,a=s.settings,o=this.getSearchOptions();if(a.score&&"function"!=typeof(i=s.settings.score.apply(this,[t])))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==s.lastQuery?(s.lastQuery=t,n=s.sifter.search(t,e.extend(o,{score:i})),s.currentResults=n):n=e.extend(!0,{},s.currentResults),a.hideSelected)for(r=n.items.length-1;r>=0;r--)-1!==s.items.indexOf(d(n.items[r].id))&&n.items.splice(r,1);return n},refreshOptions:function(t){var r,i,s,a,o,l,c,u,p,m,h,g,y,v,f,b;void 0===t&&(t=!0);var Z=this,S=e.trim(Z.$control_input.val()),P=Z.search(S),I=Z.$dropdown_content,E=Z.$activeOption&&d(Z.$activeOption.attr("data-value"));for(a=P.items.length,"number"==typeof Z.settings.maxOptions&&(a=Math.min(a,Z.settings.maxOptions)),o={},l=[],r=0;r<a;r++)for(c=Z.options[P.items[r].id],u=Z.render("option",c),p=c[Z.settings.optgroupField]||"",i=0,s=(m=e.isArray(p)?p:[p])&&m.length;i<s;i++)p=m[i],Z.optgroups.hasOwnProperty(p)||(p=""),o.hasOwnProperty(p)||(o[p]=[],l.push(p)),o[p].push(u);for(this.settings.lockOptgroupOrder&&l.sort((function(e,t){return(Z.optgroups[e].$order||0)-(Z.optgroups[t].$order||0)})),h=[],r=0,a=l.length;r<a;r++)p=l[r],Z.optgroups.hasOwnProperty(p)&&o[p].length?(g=Z.render("optgroup_header",Z.optgroups[p])||"",g+=o[p].join(""),h.push(Z.render("optgroup",e.extend({},Z.optgroups[p],{html:g})))):h.push(o[p].join(""));if(I.html(h.join("")),Z.settings.highlight&&P.query.length&&P.tokens.length)for(r=0,a=P.tokens.length;r<a;r++)n(I,P.tokens[r].regex);if(!Z.settings.hideSelected)for(r=0,a=Z.items.length;r<a;r++)Z.getOption(Z.items[r]).addClass("selected");(y=Z.canCreate(S))&&(I.prepend(Z.render("option_create",{input:S})),b=e(I[0].childNodes[0])),Z.hasOptions=P.items.length>0||y,Z.hasOptions?(P.items.length>0?((f=E&&Z.getOption(E))&&f.length?v=f:"single"===Z.settings.mode&&Z.items.length&&(v=Z.getOption(Z.items[0])),v&&v.length||(v=b&&!Z.settings.addPrecedence?Z.getAdjacentOption(b,1):I.find("[data-selectable]:first"))):v=b,Z.setActiveOption(v),t&&!Z.isOpen&&Z.open()):(Z.setActiveOption(null),t&&Z.isOpen&&Z.close())},addOption:function(t){var r,n,i,s=this;if(e.isArray(t))for(r=0,n=t.length;r<n;r++)s.addOption(t[r]);else(i=s.registerOption(t))&&(s.userOptions[i]=!0,s.lastQuery=null,s.trigger("option_add",i,t))},registerOption:function(e){var t=d(e[this.settings.valueField]);return!(!t||this.options.hasOwnProperty(t))&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=d(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,r){var n,i,s,a,o,l,c,u=this;if(t=d(t),s=d(r[u.settings.valueField]),null!==t&&u.options.hasOwnProperty(t)){if("string"!=typeof s)throw new Error("Value must be set in option data");c=u.options[t].$order,s!==t&&(delete u.options[t],-1!==(a=u.items.indexOf(t))&&u.items.splice(a,1,s)),r.$order=r.$order||c,u.options[s]=r,o=u.renderCache.item,l=u.renderCache.option,o&&(delete o[t],delete o[s]),l&&(delete l[t],delete l[s]),-1!==u.items.indexOf(s)&&(n=u.getItem(t),i=e(u.render("item",r)),n.hasClass("active")&&i.addClass("active"),n.replaceWith(i)),u.lastQuery=null,u.isOpen&&u.refreshOptions(!1)}},removeOption:function(e,t){var r=this;e=d(e);var n=r.renderCache.item,i=r.renderCache.option;n&&delete n[e],i&&delete i[e],delete r.userOptions[e],delete r.options[e],r.lastQuery=null,r.trigger("option_remove",e),r.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,r){var n=this.$dropdown.find("[data-selectable]"),i=n.index(t)+r;return i>=0&&i<n.length?n.eq(i):e()},getElementWithValue:function(t,r){if(null!=(t=d(t)))for(var n=0,i=r.length;n<i;n++)if(r[n].getAttribute("data-value")===t)return e(r[n]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,r){for(var n=e.isArray(t)?t:[t],i=0,s=n.length;i<s;i++)this.isPending=i<s-1,this.addItem(n[i],r)},addItem:function(t,r){h(this,r?[]:["change"],(function(){var n,i,s,a,o,l=this,c=l.settings.mode;t=d(t),-1===l.items.indexOf(t)?l.options.hasOwnProperty(t)&&("single"===c&&l.clear(r),"multi"===c&&l.isFull()||(n=e(l.render("item",l.options[t])),o=l.isFull(),l.items.splice(l.caretPos,0,t),l.insertAtCaret(n),(!l.isPending||!o&&l.isFull())&&l.refreshState(),l.isSetup&&(s=l.$dropdown_content.find("[data-selectable]"),l.isPending||(i=l.getOption(t),a=l.getAdjacentOption(i,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==c),a&&l.setActiveOption(l.getOption(a))),!s.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",t,n),l.updateOriginalInput({silent:r})))):"single"===c&&l.close()}))},removeItem:function(e,t){var r,n,i,s=this;r="object"==typeof e?e:s.getItem(e),e=d(r.attr("data-value")),-1!==(n=s.items.indexOf(e))&&(r.remove(),r.hasClass("active")&&(i=s.$activeItems.indexOf(r[0]),s.$activeItems.splice(i,1)),s.items.splice(n,1),s.lastQuery=null,!s.settings.persist&&s.userOptions.hasOwnProperty(e)&&s.removeOption(e,t),n<s.caretPos&&s.setCaret(s.caretPos-1),s.refreshState(),s.updatePlaceholder(),s.updateOriginalInput({silent:t}),s.positionDropdown(),s.trigger("item_remove",e,r))},createItem:function(t,r){var n=this,i=n.caretPos;t=t||e.trim(n.$control_input.val()||"");var s=arguments[arguments.length-1];if("function"!=typeof s&&(s=function(){}),"boolean"!=typeof r&&(r=!0),!n.canCreate(t))return s(),!1;n.lock();var a="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},o=m((function(e){if(n.unlock(),!e||"object"!=typeof e)return s();var t=d(e[n.settings.valueField]);if("string"!=typeof t)return s();n.setTextboxValue(""),n.addOption(e),n.setCaret(i),n.addItem(t),n.refreshOptions(r&&"single"!==n.settings.mode),s(e)})),l=a.apply(this,[t,o]);return void 0!==l&&o(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e=this;e.isRequired&&(e.items.length&&(e.isInvalid=!1),e.$control_input.prop("required",undefined)),e.refreshClasses()},refreshClasses:function(){var t=this,r=t.isFull(),n=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",n).toggleClass("full",r).toggleClass("not-full",!r).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!r&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,r,n,i,s=this;if(e=e||{},1===s.tagType){for(n=[],t=0,r=s.items.length;t<r;t++)i=s.options[s.items[t]][s.settings.labelField]||"",n.push('<option value="'+u(s.items[t])+'" selected="selected">'+u(i)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),s.$input.html(n.join(""))}else s.$input.val(s.getValue()),s.$input.attr("value",s.$input.val());s.isSetup&&(e.silent||s.trigger("change",s.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||e.settings.hideDropdown||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var r=Math.min(this.caretPos,this.items.length);0===r?this.$control.prepend(t):e(this.$control[0].childNodes[r]).before(t),this.setCaret(r+1)},deleteSelection:function(t,r){var n,i,s,a,o,l,c,d,u,p=this;if(s=r||void 0===r&&t&&8===t.keyCode?-1:1,a=g(p.$control_input[0]),p.$activeOption&&!p.settings.hideSelected&&(c=p.getAdjacentOption(p.$activeOption,-1).attr("data-value")),o=[],p.$activeItems.length){for(u=p.$control.children(".active:"+(s>0?"last":"first")),l=p.$control.children(":not(input)").index(u),s>0&&l++,n=0,i=p.$activeItems.length;n<i;n++)o.push(e(p.$activeItems[n]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(p.isFocused||"single"===p.settings.mode)&&p.items.length&&(s<0&&0===a.start&&0===a.length?o.push(p.items[p.caretPos-1]):s>0&&a.start===p.$control_input.val().length&&o.push(p.items[p.caretPos]));if(!o.length||"function"==typeof p.settings.onDelete&&!1===p.settings.onDelete.apply(p,[o]))return!1;for(void 0!==l&&p.setCaret(l);o.length;)p.removeItem(o.pop());return p.showInput(),p.positionDropdown(),p.refreshOptions(!0),c&&(d=p.getOption(c)).length&&p.setActiveOption(d),!0},advanceSelection:function(e,t){var r,n,i,s,a,o=this;0!==e&&(o.rtl&&(e*=-1),r=e>0?"last":"first",n=g(o.$control_input[0]),o.isFocused&&!o.isInputHidden?(s=o.$control_input.val().length,(e<0?0===n.start&&0===n.length:n.start===s)&&!s&&o.advanceCaret(e,t)):(a=o.$control.children(".active:"+r)).length&&(i=o.$control.children(":not(input)").index(a),o.setActiveItem(null),o.setCaret(e>0?i+1:i)))},advanceCaret:function(e,t){var r,n,i=this;0!==e&&(r=e>0?"next":"prev",i.isShiftDown?(n=i.$control_input[r]()).length&&(i.hideInput(),i.setActiveItem(n),t&&t.preventDefault()):i.setCaret(i.caretPos+e))},setCaret:function(t){var r,n,i,s,a=this;if(t="single"===a.settings.mode?a.items.length:Math.max(0,Math.min(a.items.length,t)),!a.isPending)for(r=0,n=(i=a.$control.children(":not(input)")).length;r<n;r++)s=e(i[r]).detach(),r<t?a.$control_input.before(s):a.$control.append(s);a.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,r=t.eventNS,n=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(r),e(document).off(r),e(document.body).off(r),delete t.$input[0].selectize},render:function(e,t){var r,n,i="",s=!1,a=this,o=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return"option"!==e&&"item"!==e||(s=!!(r=d(t[a.settings.valueField]))),s&&(c(a.renderCache[e])||(a.renderCache[e]={}),a.renderCache[e].hasOwnProperty(r))?a.renderCache[e][r]:(i=a.settings.render[e].apply(this,[t,u]),"option"!==e&&"option_create"!==e||(i=i.replace(o,"<$1 data-selectable")),"optgroup"===e&&(n=t[a.settings.optgroupValueField]||"",i=i.replace(o,'<$1 data-group="'+p(u(n))+'"')),"option"!==e&&"item"!==e||(i=i.replace(o,'<$1 data-value="'+p(u(r||""))+'"')),s&&(a.renderCache[e][r]=i),i)},clearCache:function(e){void 0===e?this.renderCache={}:delete this.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var r=t.settings.createFilter;return(e.length||t.settings.allowCreateEmpty)&&("function"!=typeof r||r.apply(t,[e]))&&("string"!=typeof r||new RegExp(r).test(e))&&(!(r instanceof RegExp)||r.test(e))}}),v.count=0,v.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,selectOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,allowCreateEmpty:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",manualInputWidth:!1,dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var r=e.fn.selectize.defaults,n=e.extend({},r,t),i=n.dataAttr,s=n.labelField,a=n.valueField,o=n.optgroupField,l=n.optgroupLabelField,c=n.optgroupValueField;return this.each((function(){if(!this.selectize){var u=e(this),p=this.tagName.toLowerCase(),m=u.attr("placeholder")||u.attr("data-placeholder");m||n.allowEmptyOption||(m=u.children('option[value=""]').text());var h={placeholder:m,options:[],optgroups:[],items:[]};"select"===p?function(t,r){var u,p,m,h,g=r.options,y={},v=function(e){var t=i&&e.attr(i);return"string"==typeof t&&t.length?JSON.parse(t):null},f=function(t,i){t=e(t);var l=d(t.attr("value"));if(l||n.allowEmptyOption)if(y.hasOwnProperty(l)){if(i){var c=y[l][o];c?e.isArray(c)?c.push(i):y[l][o]=[c,i]:y[l][o]=i}}else{var u=v(t)||{};u[s]=u[s]||t.text(),u[a]=u[a]||l,u[o]=u[o]||i,y[l]=u,g.push(u),t.is(":selected")&&r.items.push(l)}},b=function(t){var n,i,s,a,o;for((s=(t=e(t)).attr("label"))&&((a=v(t)||{})[l]=s,a[c]=s,r.optgroups.push(a)),n=0,i=(o=e("option",t)).length;n<i;n++)f(o[n],s)};for(r.maxItems=t.attr("multiple")?null:1,u=0,p=(h=t.children()).length;u<p;u++)"optgroup"===(m=h[u].tagName.toLowerCase())?b(h[u]):"option"===m&&f(h[u])}(u,h):function(t,r){var o,l,c,d,u=t.attr(i);if(u)for(r.options=JSON.parse(u),o=0,l=r.options.length;o<l;o++)r.items.push(r.options[o][a]);else{var p=e.trim(t.val()||"");if(!n.allowEmptyOption&&!p.length)return;for(o=0,l=(c=p.split(n.delimiter)).length;o<l;o++)(d={})[s]=c[o],d[a]=c[o],r.options.push(d);r.items=c}}(u,h),new v(u,e.extend(!0,{},r,h,t))}}))},e.fn.selectize.defaults=v.defaults,e.fn.selectize.support={validity:l},v.define("remove_button",(function(t){if("single"!==this.settings.mode){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var r,n=this,i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+u(t.title)+'">'+t.label+"</a>",s=function(e,t){var r=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,r)+t+e.substring(r)};this.setup=(r=n.setup,function(){if(t.append){var a=n.settings.render.item;n.settings.render.item=function(e){return s(a.apply(this,arguments),i)}}r.apply(this,arguments),this.$control.on("click","."+t.className,(function(t){if(t.preventDefault(),!n.isLocked){var r=e(t.currentTarget).parent();n.setActiveItem(r),n.deleteSelection()&&n.setCaret(n.items.length)}}))})}})),v.define("restore_on_backspace",(function(e){var t;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=(t=this.onKeyDown,function(r){var n,i;return 8===r.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1)>=0&&n<this.items.length?(i=this.options[this.items[n]],this.deleteSelection(r,!0)&&(this.setTextboxValue(e.text.apply(this,[i])),this.refreshOptions(!0)),void r.preventDefault()):t.apply(this,arguments)})})),v.define("restore_on_focus",(function(e){e.text=e.text||function(e){return e[this.settings.labelField]};var t=this.onFocus;this.onFocus=function(r){var n=this.caretPos-1;if(n>=0&&n<this.items.length){var i=this.options[this.items[n]],s=e.text.call(this,i);this.removeItem(i[this.settings.valueField]),this.setTextboxValue(s),this.refreshOptions(!0)}return t.apply(this,arguments)}})),v})?c.apply(t,d):c)||(e.exports=u)},83579:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTQ4IiBoZWlnaHQ9IjM2MCIgdmlld0JveD0iMCAwIDU0OCAzNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZT5Hcm91cDwvdGl0bGU+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0xOTYgMTczdjEzSDgxdi0xNCIvPjxtYXNrIGlkPSJqIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTE1IiBoZWlnaHQ9IjE0IiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjxwYXRoIGQ9Ik02LjUyMiAxNzNDMi45MiAxNzMgMCAxNzAuNjMxIDAgMTY3LjcxVjUuMjlDMCAyLjM3IDIuOTIgMCA2LjUyMiAwaDI2Mi45NTZDMjczLjA4IDAgMjc2IDIuMzY5IDI3NiA1LjI5djE2Mi40MmMwIDIuOTIxLTIuOTIgNS4yOS02LjUyMiA1LjI5SDYuNTIyeiIgaWQ9ImIiLz48bWFzayBpZD0iayIgeD0iMCIgeT0iMCIgd2lkdGg9IjI3NiIgaGVpZ2h0PSIxNzMiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2IiLz48L21hc2s+PHBhdGggaWQ9ImMiIGQ9Ik0xMyAxNjAuMTg1aDI0OS45MVYxM0gxM3oiLz48bWFzayBpZD0ibCIgeD0iMCIgeT0iMCIgd2lkdGg9IjI0OS45MTEiIGhlaWdodD0iMTQ3LjE4NSIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYyIvPjwvbWFzaz48cmVjdCBpZD0iZCIgd2lkdGg9IjE5MiIgaGVpZ2h0PSIxNDAiIHJ4PSI2Ii8+PG1hc2sgaWQ9Im0iIHg9IjAiIHk9IjAiIHdpZHRoPSIxOTIiIGhlaWdodD0iMTQwIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNkIi8+PC9tYXNrPjxwYXRoIGlkPSJlIiBkPSJNMjAgMTFoMTUydjExOEgyMHoiLz48bWFzayBpZD0ibiIgeD0iMCIgeT0iMCIgd2lkdGg9IjE1MiIgaGVpZ2h0PSIxMTgiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2UiLz48L21hc2s+PGNpcmNsZSBpZD0iZiIgY3g9IjEyIiBjeT0iNzAiIHI9IjYiLz48bWFzayBpZD0ibyIgeD0iMCIgeT0iMCIgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNmIi8+PC9tYXNrPjxwYXRoIGlkPSJnIiBkPSJNMCAxOGg3MnY4NEgweiIvPjxtYXNrIGlkPSJwIiB4PSIwIiB5PSIwIiB3aWR0aD0iNzIiIGhlaWdodD0iODQiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2ciLz48L21hc2s+PGNpcmNsZSBpZD0iaCIgY3g9IjM2IiBjeT0iMTA5IiByPSI1Ii8+PG1hc2sgaWQ9InEiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjaCIvPjwvbWFzaz48cmVjdCBpZD0iaSIgd2lkdGg9IjcyIiBoZWlnaHQ9IjEyMCIgcng9IjguNCIvPjxtYXNrIGlkPSJyIiB4PSIwIiB5PSIwIiB3aWR0aD0iNzIiIGhlaWdodD0iMTIwIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNpIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI3MiA4NykiPjx1c2Ugc3Ryb2tlPSIjQkJCIiBtYXNrPSJ1cmwoI2opIiBzdHJva2Utd2lkdGg9IjYiIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSBzdHJva2U9IiNCQkIiIG1hc2s9InVybCgjaykiIHN0cm9rZS13aWR0aD0iNiIgeGxpbms6aHJlZj0iI2IiLz48dXNlIHN0cm9rZT0iI0JCQiIgbWFzaz0idXJsKCNsKSIgc3Ryb2tlLXdpZHRoPSI0IiB4bGluazpocmVmPSIjYyIvPjxwYXRoIGZpbGw9IiNGOEFEMTgiIGQ9Ik0xMzcuMDQyIDEyMC43NUgxMTdsMjIuMTktMzQuMzc1TDExNyA1MmgyMC4wNDJsMjIuMTkgMzQuMzc1eiIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDIyMCkiPjx1c2Ugc3Ryb2tlPSIjQkJCIiBtYXNrPSJ1cmwoI20pIiBzdHJva2Utd2lkdGg9IjYiIHhsaW5rOmhyZWY9IiNkIi8+PHVzZSBzdHJva2U9IiNCQkIiIG1hc2s9InVybCgjbikiIHN0cm9rZS13aWR0aD0iNCIgeGxpbms6aHJlZj0iI2UiLz48dXNlIHN0cm9rZT0iI0JCQiIgbWFzaz0idXJsKCNvKSIgc3Ryb2tlLXdpZHRoPSI0IiB4bGluazpocmVmPSIjZiIvPjxjaXJjbGUgZmlsbD0iI0JCQiIgY3g9IjE4MCIgY3k9IjcwIiByPSIyIi8+PHBhdGggZmlsbD0iI0Y4QUQxOCIgZD0iTTk0LjU4IDEwMkg3NmwyMC42NDUtMzAuOTY4TDc2IDM4aDE4LjU4bDIwLjY0NiAzMy4wMzJ6Ii8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYwKSI+PHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjEyMCIgcng9IjguNCIvPjx1c2Ugc3Ryb2tlPSIjQkJCIiBtYXNrPSJ1cmwoI3ApIiBzdHJva2Utd2lkdGg9IjQiIHhsaW5rOmhyZWY9IiNnIi8+PHVzZSBzdHJva2U9IiNCQkIiIG1hc2s9InVybCgjcSkiIHN0cm9rZS13aWR0aD0iNCIgeGxpbms6aHJlZj0iI2giLz48cmVjdCBmaWxsPSIjQkJCIiB4PSIzMSIgeT0iMTAiIHdpZHRoPSIxMC44IiBoZWlnaHQ9IjIuNCIgcng9IjEuMiIvPjx1c2Ugc3Ryb2tlPSIjQkJCIiBtYXNrPSJ1cmwoI3IpIiBzdHJva2Utd2lkdGg9IjYiIHhsaW5rOmhyZWY9IiNpIi8+PHBhdGggZD0iTTM1LjAzMiA3OUgyNGwxMi4yNTgtMTguMzg3TDI0IDQxaDExLjAzMkw0Ny4yOSA2MC42MTN6IiBmaWxsPSIjRjhBRDE4Ii8+PC9nPjwvZz48L3N2Zz4="},87414:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODEwIiBoZWlnaHQ9IjIzMCIgdmlld0JveD0iMCAwIDgxMCAyMzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZT5QTVMg4oaSIENvbXB1dGVyPC90aXRsZT48ZGVmcz48cGF0aCBkPSJNMTU5LjU5NSAyMDcuNDc3Yy0uNDk0LTIuNDctMi42NS05LjczMi0zLjM0Ny0yMS40NDRIOTkuMzZjLS42OTggMTEuNzEyLTIuODUzIDE4Ljk3NC0zLjM0NiAyMS40NDQtLjk3NiA0Ljg4LTQuNzkgOC44MjktMTIuMDQgMTEuMDU5LTUuOTEyIDEuODE5LTUuMTU4IDEwLjY5MyAxLjY3NCAxMC42OTNoODQuMzE0YzYuODMxIDAgNy41ODctOC44NzMgMS42NzMtMTAuNjkzLTcuMjUtMi4yMy0xMS4wNjQtNi4xNzgtMTIuMDQtMTEuMDU5eiIgaWQ9ImEiLz48bWFzayBpZD0iZCIgeD0iMCIgeT0iMCIgd2lkdGg9Ijk1LjYzMyIgaGVpZ2h0PSI0My4xOTYiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTI1NiAxNDcuNXYzMS41NjRjMCA1LjUyNy00LjQ3IDEwLjAwOC05Ljk5NiAxMC4wMDhIOS45OTZjLTUuNTIgMC05Ljk5Ni00LjQ3Ni05Ljk5Ni0xMC4wMDhWMTAuMDAzQzAgNC40OCA0LjQ3IDAgOS45OTYgMGgyMzYuMDA4QzI1MS41MjQgMCAyNTYgNC40ODUgMjU2IDEwLjAwM1YxNDcuNXoiIGlkPSJiIi8+PG1hc2sgaWQ9ImUiIHg9IjAiIHk9IjAiIHdpZHRoPSIyNTYiIGhlaWdodD0iMTg5LjA3MiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYiIvPjwvbWFzaz48Y2lyY2xlIGlkPSJjIiBjeD0iMTEwIiBjeT0iMTEwIiByPSIxMTAiLz48bWFzayBpZD0iZiIgeD0iMCIgeT0iMCIgd2lkdGg9IjIyMCIgaGVpZ2h0PSIyMjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2MiLz48L21hc2s+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTUzKSIgc3Ryb2tlPSIjQkJCIj48dXNlIG1hc2s9InVybCgjZCkiIHN0cm9rZS13aWR0aD0iNiIgeGxpbms6aHJlZj0iI2EiLz48dXNlIG1hc2s9InVybCgjZSkiIHN0cm9rZS13aWR0aD0iNiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBkPSJNMS41IDE0Ny41aDI1My4xOTgiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDUpIj48dXNlIHN0cm9rZT0iI0Y4QUQxOCIgbWFzaz0idXJsKCNmKSIgc3Ryb2tlLXdpZHRoPSI4IiBmaWxsPSIjMUYxRjFGIiB4bGluazpocmVmPSIjYyIvPjxwYXRoIGZpbGw9IiNGOEFEMTgiIGQ9Ik0xMTIuMTM0IDE3OS42NjdINzIuMTFsNDQuMzEtNjkuMDU2LTQ0LjMxLTY5LjA1NWg0MC4wMjNsNDQuMzEgNjkuMDU1eiIvPjwvZz48ZyBmaWxsPSIjQkJCIj48cGF0aCBkPSJNNTA0LjUgMTE1bC0xNCAxMy41di0yN3pNNDc5IDExOGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bS0xNiAwYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptLTE2IDBhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0tMTYgMGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bS0xNiAwYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptLTE2IDBhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0tMTYgMGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bS0xNiAwYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptLTE2IDBhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0tMTYgMGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bS0xNiAwYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptLTE2IDBhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0tMTYgMGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bS0xNiAwYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnoiLz48L2c+PC9nPjwvc3ZnPg=="},13353:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzE1IiBoZWlnaHQ9IjE0OSIgdmlld0JveD0iMCAwIDcxNSAxNDkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZT5NRURJQSBJQ09OUzwvdGl0bGU+PGRlZnM+PHBhdGggZD0iTTU3Ljg5NyAwSDEwLjAwOEM0LjQ4MiAwIDAgNC40ODEgMCAxMC4wMDh2NS41MDVMNTcuODk3IDB6bTU2Ljc3NiAwaDMuODljNS41MjcgMCAxMC4wMDggNC40ODIgMTAuMDA4IDEwLjAwOHY0MS44NkwxMTQuNjczIDB6bTEzLjg5OCAxMTQuMTY4djQuMzk1YzAgNS41MjctNC40ODEgMTAuMDA4LTEwLjAwOCAxMC4wMDhINzQuODE4bDUzLjc1My0xNC40MDN6TTE2LjAyIDEyOC41NzFoLTYuMDFDNC40OCAxMjguNTcxIDAgMTI0LjA5IDAgMTE4LjU2M1Y2OC43ODlsMTYuMDE5IDU5Ljc4MnoiIGlkPSJhIi8+PG1hc2sgaWQ9ImoiIHg9Ii0yIiB5PSItMiIgd2lkdGg9IjEzMi41NzEiIGhlaWdodD0iMTMyLjU3MSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTS0yLTJoMTMyLjU3MXYxMzIuNTcxSC0yeiIvPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHJlY3QgaWQ9ImIiIHdpZHRoPSIxMjguNTcxIiBoZWlnaHQ9IjEyOC41NzEiIHJ4PSIxMCIvPjxtYXNrIGlkPSJrIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTI4LjU3MSIgaGVpZ2h0PSIxMjguNTcxIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjxwYXRoIGQ9Ik0zOS43ODIgMjYuNTkyVjgzLjk5Yy0zLjI3OS0xLjAzNC03LjIzNC0xLjE2LTExLjI2Ny0uMTAzLTguNzY3IDIuMjk3LTE0LjQ4OCA5LjI2LTEyLjc3IDE1LjUzNSAxLjcxOCA2LjI3NiAxMC4yMjYgOS41MDUgMTguOTk1IDcuMTk3IDguMTAxLTIuMTE2IDE0LjcxLTguMjE3IDE0LjE1LTE0LjA3NmwuMDQxLTQxLjcxOCA0MC4zODYtNS4zODV2MzMuMTY1Yy0zLjI4LTEuMDM0LTcuMjM1LTEuMTYtMTEuMjY4LS4xMDItOC43NjYgMi4yOTYtMTQuNDg4IDkuMjU5LTEyLjc3IDE1LjUzNXMxMC4yMjYgOS41MDQgMTguOTk1IDcuMTk2YzguMTAxLTIuMTE2IDE0LjcxMS04LjIxNyAxNC4xNTEtMTQuMDc1IDAtMTQuNzk1LjA0LTY1Ljk1LjA0LTY1Ljk1bC01OC42ODMgNS4zODR6IiBpZD0iYyIvPjxtYXNrIGlkPSJsIiB4PSIwIiB5PSIwIiB3aWR0aD0iODMuMDI1IiBoZWlnaHQ9Ijg2LjE1NiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYyIvPjwvbWFzaz48cGF0aCBkPSJNNjYuMTEzIDkuNTk1bC00MC43MDUtMy41NmE4Ljg0NSA4Ljg0NSAwIDAgMC05LjU4NiA4LjA0bC0uMzkgNC40NTcgNTAuNjgtOC45Mzd6bTU1LjczNCA0Ljg3N2w1LjQ3NS40NzljNC44NjguNDI1IDguNDcgNC43MTcgOC4wNDQgOS41ODNsLTMuODk1IDQ0LjUxOC05LjYyNC01NC41OHptNC4yMDEgMTE2LjU2bC0uNDcgNS4zODNhOC44NDUgOC44NDUgMCAwIDEtOS41ODYgOC4wNGwtNDQuMTYtMy44NjMgNTQuMjE2LTkuNTZ6bS0xMDQuNTkgNS4xNTNsLTcuMzgtLjY0NWMtNC44NjgtLjQyNi04LjQ3LTQuNzE4LTguMDQ0LTkuNTg0bDQuNTE3LTUxLjYyNSAxMC45MDYgNjEuODU0eiIgaWQ9ImQiLz48bWFzayBpZD0ibSIgeD0iLTIiIHk9Ii0yIiB3aWR0aD0iMTMzLjQiIGhlaWdodD0iMTQyLjQ5Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNCA0aDEzMy40djE0Mi40OUg0eiIvPjx1c2UgeGxpbms6aHJlZj0iI2QiLz48L21hc2s+PHBhdGggZD0iTS42MDcgOS4wMTVBOC44NDUgOC44NDUgMCAwIDEgOS40NTUuMTY5SDExMS43NmM0Ljg4NyAwIDguODQ4IDMuOTYxIDguODQ4IDguODQ2djExMi4zMDhhOC44NDUgOC44NDUgMCAwIDEtOC44NDggOC44NDZIOS40NTVjLTQuODg2IDAtOC44NDgtMy45NjItOC44NDgtOC44NDZWOS4wMTV6IiBpZD0iZSIvPjxtYXNrIGlkPSJuIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEzMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjZSIvPjwvbWFzaz48cGF0aCBpZD0iZiIgZD0iTTE0LjYzNiAxNC4xOTdoOTAuNjQ3djgyLjAxNEgxNC42MzZ6Ii8+PG1hc2sgaWQ9Im8iIHg9IjAiIHk9IjAiIHdpZHRoPSI5MC42NDciIGhlaWdodD0iODIuMDE0IiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNmIi8+PC9tYXNrPjxwYXRoIGlkPSJnIiBkPSJNMTQuNjM2IDY1Ljk5NmwzMC4yMTYtMjMuNzQxIDIzLjc0IDI2Ljk3OCAxNC4wMy0xMC43OTEgMjIuNjYxIDIwLjUwNHYxNy4yNjZIMTQuNjM2eiIvPjxtYXNrIGlkPSJwIiB4PSIwIiB5PSIwIiB3aWR0aD0iOTAuNjQ3IiBoZWlnaHQ9IjUzLjk1NyIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjZyIvPjwvbWFzaz48cGF0aCBkPSJNNjMuOTcyIDguNjgxTDIyLjEyIDUuMDE5YTUgNSAwIDAgMC01LjQyIDQuNTM5bC0uNjYzIDcuNTc1IDQ3LjkzNS04LjQ1MnptNDcuODg1IDQuMTlsMTAuODcyLjk1YTUuMDA0IDUuMDA0IDAgMCAxIDQuNTQ5IDUuNDExbC00Ljc0MiA1NC4yLTEwLjY3OS02MC41NjJ6bTUuMzkxIDEyMC45OThsLS42NTEgNy40NDdhNSA1IDAgMCAxLTUuNDIgNC41MzlsLTQxLjM3NC0zLjYyIDQ3LjQ0NS04LjM2NnptLTk2LjA0MiA0LjExNGwtMTAuNjM4LS45M2E1LjAwNCA1LjAwNCAwIDAgMS00LjU0OS01LjQxMWw0LjY2Ni01My4zMjcgMTAuNTIgNTkuNjY4eiIgaWQ9ImgiLz48bWFzayBpZD0icSIgeD0iLTIiIHk9Ii0yIiB3aWR0aD0iMTI1LjI5NyIgaGVpZ2h0PSIxNDQuODc0Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNCAzaDEyNS4yOTd2MTQ0Ljg3NEg0eiIvPjx1c2UgeGxpbms6aHJlZj0iI2giLz48L21hc2s+PHBhdGggZD0iTTExIDEzLjk5NEE1IDUgMCAwIDEgMTYuMDAzIDloMTAwLjk5NEE1LjAwNCA1LjAwNCAwIDAgMSAxMjIgMTMuOTk0djEyMi41NWE1LjAwMSA1LjAwMSAwIDAgMS01IDQuOTkzSDE2Yy0yLjc2MSAwLTUtMi4yNDQtNS00Ljk5M1YxMy45OTR6IiBpZD0iaSIvPjxtYXNrIGlkPSJyIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTExIiBoZWlnaHQ9IjEzMi41MzciIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2kiLz48L21hc2s+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgc3Ryb2tlPSIjRDhGRjk1IiBzdHJva2Utd2lkdGg9IjQiPjx1c2UgbWFzaz0idXJsKCNqKSIgeGxpbms6aHJlZj0iI2EiIHRyYW5zZm9ybT0icm90YXRlKDUgMjQxLjM5NiA2NjczLjYwNykiLz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgtMTAgNDEwLjE1IC0zMjI4LjA3KSI+PHVzZSBtYXNrPSJ1cmwoI2spIiB4bGluazpocmVmPSIjYiIvPjx1c2UgbWFzaz0idXJsKCNsKSIgeGxpbms6aHJlZj0iI2MiLz48L2c+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI3OSAtMSkiIHN0cm9rZT0iI0ZGQTBERSIgc3Ryb2tlLXdpZHRoPSI0Ij48dXNlIG1hc2s9InVybCgjbSkiIHhsaW5rOmhyZWY9IiNkIi8+PGcgdHJhbnNmb3JtPSJyb3RhdGUoLTEwIDEyMi42NSA3LjEzNSkiPjx1c2UgbWFzaz0idXJsKCNuKSIgeGxpbms6aHJlZj0iI2UiLz48dXNlIG1hc2s9InVybCgjbykiIHhsaW5rOmhyZWY9IiNmIi8+PHVzZSBtYXNrPSJ1cmwoI3ApIiB4bGluazpocmVmPSIjZyIvPjwvZz48L2c+PGcgc3Ryb2tlPSIjQTRFMkZGIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMSAtMSkiPjx1c2UgbWFzaz0idXJsKCNxKSIgc3Ryb2tlLXdpZHRoPSI0IiB4bGluazpocmVmPSIjaCIvPjx1c2UgbWFzaz0idXJsKCNyKSIgc3Ryb2tlLXdpZHRoPSI0IiB0cmFuc2Zvcm09InJvdGF0ZSgtMTAgNjYuNSA3NS4yNjkpIiB4bGluazpocmVmPSIjaSIvPjxwYXRoIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExLjgyMyAzMS4wNTNsOS43OS0xLjcyNyAxLjcyNSA5Ljc5LTkuNzg5IDEuNzI2ek0xNS45OTQgNTQuNzFsOS43OS0xLjcyNSAxLjcyNiA5Ljc4OS05Ljc5IDEuNzI2ek0yMC4xNjYgNzguMzY4bDkuNzktMS43MjcgMS43MjUgOS43OS05Ljc4OSAxLjcyNXpNMjQuMzM3IDEwMi4wMjZsOS43OS0xLjcyNiAxLjcyNiA5Ljc4OS05Ljc5IDEuNzI2ek0yOC41MSAxMjUuNjgybDkuNzg4LTEuNzI2IDEuNzI2IDkuNzktOS43ODkgMS43MjV6TTkzLjQgMTYuNjY5bDkuNzktMS43MjYgMS43MjUgOS43ODktOS43ODggMS43MjZ6TTk3LjU3MyA0MC4zMjZsOS43ODktMS43MjYgMS43MjYgOS43OS05Ljc5IDEuNzI1ek0xMDEuNzQzIDYzLjk4NGw5Ljc5LTEuNzI2IDEuNzI2IDkuNzg4LTkuNzkgMS43Mjd6TTEwNS45MTQgODcuNjRsOS43OS0xLjcyNSAxLjcyNSA5Ljc4OS05Ljc4OSAxLjcyNnpNMTEwLjA4NiAxMTEuMjk5bDkuNzktMS43MjcgMS43MjYgOS43OS05Ljc5IDEuNzI2ek0zMS43MTYgMzIuNjU5bDUyLjIxLTkuMjA2IDcuMTkxIDQwLjc4OC01Mi4yMSA5LjIwNnpNNDEuNDk3IDg4LjEzMmw1Mi4yMS05LjIwNiA3LjE5MSA0MC43ODgtNTIuMjEgOS4yMDZ6Ii8+PC9nPjwvZz48L3N2Zz4="},49730:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTQ1IiBoZWlnaHQ9IjM2MCIgdmlld0JveD0iMCAwIDk0NSAzNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZT5QTEFZIE1FRElBIElDT05TPC90aXRsZT48ZGVmcz48cGF0aCBpZD0iYSIgZD0iTTE5NiAxNzJ2MTRIODF2LTE0Ii8+PG1hc2sgaWQ9Im0iIHg9IjAiIHk9IjAiIHdpZHRoPSIxMTUiIGhlaWdodD0iMTQiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTYuNTIyIDE3M0MyLjkyIDE3MyAwIDE3MC42MzEgMCAxNjcuNzFWNS4yOUMwIDIuMzcgMi45MiAwIDYuNTIyIDBoMjYyLjk1NkMyNzMuMDggMCAyNzYgMi4zNjkgMjc2IDUuMjl2MTYyLjQyYzAgMi45MjEtMi45MiA1LjI5LTYuNTIyIDUuMjlINi41MjJ6IiBpZD0iYiIvPjxtYXNrIGlkPSJuIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjc2IiBoZWlnaHQ9IjE3MyIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYiIvPjwvbWFzaz48cGF0aCBpZD0iYyIgZD0iTTEzIDE2MC4xODVoMjQ5LjkxVjEzSDEzeiIvPjxtYXNrIGlkPSJvIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjQ5LjkxMSIgaGVpZ2h0PSIxNDcuMTg1IiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNjIi8+PC9tYXNrPjxyZWN0IGlkPSJkIiB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE0MCIgcng9IjYiLz48bWFzayBpZD0icCIgeD0iMCIgeT0iMCIgd2lkdGg9IjE5MiIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2QiLz48L21hc2s+PHBhdGggaWQ9ImUiIGQ9Ik0yMCAxMWgxNTJ2MTE4SDIweiIvPjxtYXNrIGlkPSJxIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTUyIiBoZWlnaHQ9IjExOCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjZSIvPjwvbWFzaz48Y2lyY2xlIGlkPSJmIiBjeD0iMTIiIGN5PSI3MCIgcj0iNiIvPjxtYXNrIGlkPSJyIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2YiLz48L21hc2s+PHBhdGggaWQ9ImciIGQ9Ik0wIDE4aDcydjg0SDB6Ii8+PG1hc2sgaWQ9InMiIHg9IjAiIHk9IjAiIHdpZHRoPSI3MiIgaGVpZ2h0PSI4NCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjZyIvPjwvbWFzaz48Y2lyY2xlIGlkPSJoIiBjeD0iMzYiIGN5PSIxMDkiIHI9IjUiLz48bWFzayBpZD0idCIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNoIi8+PC9tYXNrPjxyZWN0IGlkPSJpIiB3aWR0aD0iNzIiIGhlaWdodD0iMTIwIiByeD0iOC40Ii8+PG1hc2sgaWQ9InUiIHg9IjAiIHk9IjAiIHdpZHRoPSI3MiIgaGVpZ2h0PSIxMjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2kiLz48L21hc2s+PHBhdGggZD0iTTE1OS41OTUgMjA3LjQ3N2MtLjQ5NC0yLjQ3LTIuNjUtOS43MzItMy4zNDctMjEuNDQ0SDk5LjM2Yy0uNjk4IDExLjcxMi0yLjg1MyAxOC45NzQtMy4zNDYgMjEuNDQ0LS45NzYgNC44OC00Ljc5IDguODI5LTEyLjA0IDExLjA1OS01LjkxMiAxLjgxOS01LjE1OCAxMC42OTMgMS42NzQgMTAuNjkzaDg0LjMxNGM2LjgzMSAwIDcuNTg3LTguODczIDEuNjczLTEwLjY5My03LjI1LTIuMjMtMTEuMDY0LTYuMTc4LTEyLjA0LTExLjA1OXoiIGlkPSJqIi8+PG1hc2sgaWQ9InYiIHg9IjAiIHk9IjAiIHdpZHRoPSI5NS42MzMiIGhlaWdodD0iNDMuMTk2IiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNqIi8+PC9tYXNrPjxwYXRoIGQ9Ik0yNTYgMTQ3LjV2MzEuNTY0YzAgNS41MjctNC40NyAxMC4wMDgtOS45OTYgMTAuMDA4SDkuOTk2Yy01LjUyIDAtOS45OTYtNC40NzYtOS45OTYtMTAuMDA4VjEwLjAwM0MwIDQuNDggNC40NyAwIDkuOTk2IDBoMjM2LjAwOEMyNTEuNTI0IDAgMjU2IDQuNDg1IDI1NiAxMC4wMDNWMTQ3LjV6IiBpZD0iayIvPjxtYXNrIGlkPSJ3IiB4PSIwIiB5PSIwIiB3aWR0aD0iMjU2IiBoZWlnaHQ9IjE4OS4wNzIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2siLz48L21hc2s+PGNpcmNsZSBpZD0ibCIgY3g9IjU1IiBjeT0iNTUiIHI9IjU1Ii8+PG1hc2sgaWQ9IngiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMTAiIGhlaWdodD0iMTEwIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNsIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY2OSA4NykiPjx1c2Ugc3Ryb2tlPSIjQkJCIiBtYXNrPSJ1cmwoI20pIiBzdHJva2Utd2lkdGg9IjYiIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSBzdHJva2U9IiNCQkIiIG1hc2s9InVybCgjbikiIHN0cm9rZS13aWR0aD0iNiIgeGxpbms6aHJlZj0iI2IiLz48dXNlIHN0cm9rZT0iI0JCQiIgbWFzaz0idXJsKCNvKSIgc3Ryb2tlLXdpZHRoPSI0IiB4bGluazpocmVmPSIjYyIvPjxwYXRoIGZpbGw9IiNGOEFEMTgiIGQ9Ik0xMzcuMDQyIDEyMC43NUgxMTdsMjIuMTktMzQuMzc1TDExNyA1MmgyMC4wNDJsMjIuMTkgMzQuMzc1eiIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzOTcgMjIwKSI+PHVzZSBzdHJva2U9IiNCQkIiIG1hc2s9InVybCgjcCkiIHN0cm9rZS13aWR0aD0iNiIgeGxpbms6aHJlZj0iI2QiLz48dXNlIHN0cm9rZT0iI0JCQiIgbWFzaz0idXJsKCNxKSIgc3Ryb2tlLXdpZHRoPSI0IiB4bGluazpocmVmPSIjZSIvPjx1c2Ugc3Ryb2tlPSIjQkJCIiBtYXNrPSJ1cmwoI3IpIiBzdHJva2Utd2lkdGg9IjQiIHhsaW5rOmhyZWY9IiNmIi8+PGNpcmNsZSBmaWxsPSIjQkJCIiBjeD0iMTgwIiBjeT0iNzAiIHI9IjIiLz48cGF0aCBmaWxsPSIjRjhBRDE4IiBkPSJNOTQuNTggMTAySDc2bDIwLjY0NS0zMC45NjhMNzYgMzhoMTguNThsMjAuNjQ2IDMzLjAzMnoiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDU3KSI+PHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjEyMCIgcng9IjguNCIvPjx1c2Ugc3Ryb2tlPSIjQkJCIiBtYXNrPSJ1cmwoI3MpIiBzdHJva2Utd2lkdGg9IjQiIHhsaW5rOmhyZWY9IiNnIi8+PHVzZSBzdHJva2U9IiNCQkIiIG1hc2s9InVybCgjdCkiIHN0cm9rZS13aWR0aD0iNCIgeGxpbms6aHJlZj0iI2giLz48cmVjdCBmaWxsPSIjQkJCIiB4PSIzMSIgeT0iMTAiIHdpZHRoPSIxMC44IiBoZWlnaHQ9IjIuNCIgcng9IjEuMiIvPjx1c2Ugc3Ryb2tlPSIjQkJCIiBtYXNrPSJ1cmwoI3UpIiBzdHJva2Utd2lkdGg9IjYiIHhsaW5rOmhyZWY9IiNpIi8+PHBhdGggZD0iTTM1LjAzMiA3OUgyNGwxMi4yNTgtMTguMzg3TDI0IDQxaDExLjAzMkw0Ny4yOSA2MC42MTN6IiBmaWxsPSIjRjhBRDE4Ii8+PC9nPjxnIHN0cm9rZT0iI0JCQiIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0zMzAuNTk4IDE4My4yNTRDMzQxLjM1NSAxNzIuNDEgMzQ4IDE1Ny40ODEgMzQ4IDE0MWMwLTE2LjcyMy02Ljg0MS0zMS44NDgtMTcuODc4LTQyLjcyOCIvPjxwYXRoIGQ9Ik0zMTkuOTg4IDE3Mi42NUMzMjguMDMzIDE2NC41MiAzMzMgMTUzLjM0IDMzMyAxNDFjMC0xMi41MjMtNS4xMTUtMjMuODUxLTEzLjM3LTMyLjAxTTMwOS41MDIgMTYxLjkyQTI5LjkwMiAyOS45MDIgMCAwIDAgMzE4IDE0MWMwLTguMzc2LTMuNDMzLTE1Ljk1MS04Ljk2OS0yMS4zOTQiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCA2NSkiPjx1c2Ugc3Ryb2tlPSIjQkJCIiBtYXNrPSJ1cmwoI3YpIiBzdHJva2Utd2lkdGg9IjYiIHhsaW5rOmhyZWY9IiNqIi8+PHVzZSBzdHJva2U9IiNCQkIiIG1hc2s9InVybCgjdykiIHN0cm9rZS13aWR0aD0iNiIgeGxpbms6aHJlZj0iI2siLz48cGF0aCBkPSJNMS41IDE0Ny41aDI1My4xOTgiIHN0cm9rZT0iI0JCQiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzMgMjEpIj48dXNlIHN0cm9rZT0iI0Y4QUQxOCIgbWFzaz0idXJsKCN4KSIgc3Ryb2tlLXdpZHRoPSI2IiBmaWxsPSIjMUYxRjFGIiB4bGluazpocmVmPSIjbCIvPjxwYXRoIGZpbGw9IiNGOEFEMTgiIGQ9Ik01Ni4zODIgODkuMzc1SDM2LjMzOUw1OC41MyA1NSAzNi4zNCAyMC42MjVoMjAuMDQzTDc4LjU3MiA1NXoiLz48L2c+PC9nPjwvZz48L3N2Zz4="},97125:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTEyLjcwOCAxNC42NjdhNS4zNCA1LjM0IDAgMCAxLTUuMzMzLTUuMzMzIDUuMzM5IDUuMzM5IDAgMCAxIDUuMzMzLTUuMzMzIDUuMzM5IDUuMzM5IDAgMCAxIDUuMzMzIDUuMzMzIDUuMzM5IDUuMzM5IDAgMCAxLTUuMzMzIDUuMzMzem0wLTkuMzM0Yy0yLjIwNSAwLTQgMS43OTUtNCA0czEuNzk1IDQgNCA0IDQtMS43OTUgNC00LTEuNzk1LTQtNC00ek0yMC4wNDEgMTZjLjM3IDAgLjY2Ny4yOTkuNjY3LjY2NyAwIDQuNzM3LTEuNjk1IDguNDkyLTQuNjY3IDEwLjM3N3Y4LjI4OWEuNjY3LjY2NyAwIDAgMS0uNjY3LjY2N2gtNS4zMzNhLjY2Ny42NjcgMCAwIDEtLjY2Ny0uNjY3di04LjI4OWMtMi45NzItMS44ODQtNC42NjctNS42MzgtNC42NjctMTAuMzc3IDAtLjM2OC4yOTktLjY2Ny42NjctLjY2N2gxNC42Njd6bS03LjI4IDEuMzMzaC0uMTA4bC0uNTg5IDcuMDgxLjY0My42NDMuNjQzLS42NDMtLjU4OS03LjA4MXptMi4yODQgOC43NTRsLS4wMDEtLjAwMWMyLjYxMi0xLjQ4NSA0LjE2Ni00LjY1NCA0LjMxNy04Ljc1M2gtNS4yNjRsLjYwOCA3LjI3OWEuNjY4LjY2OCAwIDAgMS0uMTkzLjUyN2wtMS4zMzMgMS4zMzNhLjY2OS42NjkgMCAwIDEtLjQ3Mi4xOTUuNjU0LjY1NCAwIDAgMS0uNDY5LS4xOTZsLTEuMzMzLTEuMzMzYS42Ny42NyAwIDAgMS0uMTkzLS41MjdsLjYwNy03LjI3N0g2LjA1NWMuMTUxIDQuMSAxLjcwNSA3LjI2OCA0LjMxNiA4Ljc1My4yMDguMTE5LjMzNy4zNC4zMzcuNTh2OGg0di04YzAtLjI0LjEyOS0uNDYxLjMzNy0uNTh6TTM1LjMzMyA1LjMzM2MuMzY4IDAgLjY2Ny4yOTkuNjY3LjY2N3YxOC42NjdhLjY2Ny42NjcgMCAwIDEtLjY2Ny42NjdIMjIuNjY2YS42NjcuNjY3IDAgMCAxIDAtMS4zMzRoMTJWNi42NjdIMjEuMzMzYS42NjcuNjY3IDAgMCAxIDAtMS4zMzRoMTR6TTIzLjAxNyAyMC41NDF2LS4wMDJhLjY2Ni42NjYgMCAwIDEtLjM5Mi0uODU2bDIuNS02LjcxN2EuNjcuNjcgMCAwIDEgLjM4NS0uMzkyLjY4LjY4IDAgMCAxIC41NDguMDMxbDMuMzg5IDEuNzcyIDEuNzUyLTUuMjU3YS42NjYuNjY2IDAgMSAxIDEuMjY0LjQyM2wtMiA2YS42Ny42NyAwIDAgMS0uMzgzLjQwOC42NzQuNjc0IDAgMCAxLS41NTctLjAyOGwtMy40MTMtMS43ODUtMi4yMzYgNi4wMTFhLjY2OS42NjkgMCAwIDEtLjg1Ny4zOTJ6IiBmaWxsPSIjQ0M3QjE5IiBmaWxsLXJ1bGU9Im5vbnplcm8iLz4KPC9zdmc+Cg=="},7568:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIj4KICA8ZyBmaWxsPSIjQ0M3QjE5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzIDQpIj4KICAgIDxwYXRoIGQ9Ik0yNSwxNiBDMjAuNTg4LDE2IDE3LDE5LjU4OCAxNywyNCBDMTcsMjguNDEyIDIwLjU4OCwzMiAyNSwzMiBDMjkuNDEyLDMyIDMzLDI4LjQxMiAzMywyNCBDMzMsMTkuNTg4IDI5LjQxMiwxNiAyNSwxNiBaIE0yNSwzMC42NjcgQzIxLjMyNCwzMC42NjcgMTguMzMzLDI3LjY3NiAxOC4zMzMsMjQgQzE4LjMzMywyMC4zMjQgMjEuMzI0LDE3LjMzMyAyNSwxNy4zMzMgQzI4LjY3NiwxNy4zMzMgMzEuNjY3LDIwLjMyNCAzMS42NjcsMjQgQzMxLjY2NywyNy42NzYgMjguNjc2LDMwLjY2NyAyNSwzMC42NjcgWiIvPgogICAgPHBhdGggZD0iTTI1LDIwIEMyMi43OTUsMjAgMjEsMjEuNzk1IDIxLDI0IEMyMSwyNi4yMDUgMjIuNzk1LDI4IDI1LDI4IEMyNy4yMDUsMjggMjksMjYuMjA1IDI5LDI0IEMyOSwyMS43OTUgMjcuMjA1LDIwIDI1LDIwIFogTTI1LDI2LjY2NyBDMjMuNTI5LDI2LjY2NyAyMi4zMzMsMjUuNDcxIDIyLjMzMywyNCBDMjIuMzMzLDIyLjUyOSAyMy41MjksMjEuMzMzIDI1LDIxLjMzMyBDMjYuNDcxLDIxLjMzMyAyNy42NjcsMjIuNTI5IDI3LjY2NywyNCBDMjcuNjY3LDI1LjQ3MSAyNi40NzEsMjYuNjY3IDI1LDI2LjY2NyBaIi8+CiAgICA8cGF0aCBkPSJNMzIuMzMzIDkuMzMzTDEuNjY2IDkuMzMzQzEuMjk4IDkuMzMzLjk5OSA5LjYzMi45OTkgMTBMLjk5OSAyNi44MDFDLjk5OSAyOC4xOTcgMi4xNTggMjkuMzMzIDMuNTgzIDI5LjMzM0wxNC4zMzIgMjkuMzMzIDE0LjMzMiAyOCAzLjU4MyAyOEMyLjg5MiAyOCAyLjMzMiAyNy40NjMgMi4zMzIgMjYuODAxTDIuMzMyIDEwLjY2NiAzMS42NjUgMTAuNjY2IDMxLjY2NSAxNS45OTMgMzIuOTk4IDE1Ljk5MyAzMi45OTggMTBDMzIuOTk4IDkuNjMyIDMyLjY5OSA5LjMzMyAzMi4zMzEgOS4zMzNMMzIuMzMzIDkuMzMzek0zMSAwTDMgMEMxLjg5NyAwIDEgLjg5NyAxIDIuMDAxTDEgNy4zMzNDMSA3LjcwMSAxLjI5OSA4IDEuNjY3IDhMMzIuMzM0IDhDMzIuNzAyIDggMzMuMDAxIDcuNzAxIDMzLjAwMSA3LjMzM0wzMy4wMDEgMi4wMDFDMzMuMDAxLjg5NyAzMi4xMDQgNC40NDA4OTIxZS0xNiAzMS4wMDEgNC40NDA4OTIxZS0xNkwzMSAwek0zMS42MiAxLjc3MkwyNi43MjUgNi42NjcgMjMuMjc3IDYuNjY3IDI4LjYxIDEuMzM0IDMwLjk5OSAxLjMzNEMzMS4yODYgMS4zMzQgMzEuNTI2IDEuNTE4IDMxLjYxOSAxLjc3M0wzMS42MiAxLjc3MnpNMTIuNjExIDEuMzMzTDE2LjA1OSAxLjMzMyAxMC43MjYgNi42NjYgNy4yNzggNi42NjYgMTIuNjExIDEuMzMzek01LjM5MiA2LjY2N0wyLjYxMSA2LjY2NyA3Ljk0NCAxLjMzNCAxMC43MjUgMS4zMzQgNS4zOTIgNi42Njd6TTE3Ljk0NCAxLjMzM0wyMS4zOTIgMS4zMzMgMTYuMDU5IDYuNjY2IDEyLjYxMSA2LjY2NiAxNy45NDQgMS4zMzN6TTIzLjI3NyAxLjMzM0wyNi43MjUgMS4zMzMgMjEuMzkyIDYuNjY2IDE3Ljk0NCA2LjY2NiAyMy4yNzcgMS4zMzN6TTMgMS4zMzNMNi4wNTkgMS4zMzMgMi4zMzQgNS4wNTggMi4zMzQgMi4wMDFDMi4zMzQgMS42MzMgMi42MzMgMS4zMzMgMy4wMDEgMS4zMzNMMyAxLjMzM3pNMjguNjExIDYuNjY3TDMxLjY2NyAzLjYxMSAzMS42NjcgNi42NjcgMjguNjExIDYuNjY3eiIvPgogIDwvZz4KPC9zdmc+Cg=="},21696:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIj4KICA8ZyBmaWxsPSIjQ0M3QjE5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCA0KSI+CiAgICA8cGF0aCBkPSJNMTUuOTUxLDE2LjQ0NCBDMTUuODUsMTYuMTkzIDE1LjYwOCwxNi4wMjkgMTUuMzM5LDE2LjAyOCBMMTIuNjY3LDE2LjAwNSBMMTIuNjY3LDEwIEMxMi42NjcsOS42MzIgMTIuMzY4LDkuMzMzIDEyLDkuMzMzIEw4LDkuMzMzIEM3LjYzMiw5LjMzMyA3LjMzMyw5LjYzMiA3LjMzMywxMCBMNy4zMzMsMTYgTDQuNjEsMTYgQzQuMzQxLDE2IDQuMDk3LDE2LjE2MyAzLjk5NCwxNi40MTIgQzMuODksMTYuNjYxIDMuOTQ3LDE2Ljk0OCA0LjEzOCwxNy4xMzkgTDkuNDcxLDIyLjQ3MiBDOS42MDIsMjIuNjAxIDkuNzcyLDIyLjY2NyA5Ljk0MywyMi42NjcgQzEwLjExMSwyMi42NjcgMTAuMjgsMjIuNjAzIDEwLjQxMSwyMi40NzUgTDE1LjgsMTcuMTcgQzE1Ljk5MiwxNi45ODEgMTYuMDUyLDE2LjY5NSAxNS45NDksMTYuNDQ1IEwxNS45NTEsMTYuNDQ0IFogTTkuOTQ4LDIxLjA2MSBMNi4yMiwxNy4zMzMgTDgsMTcuMzMzIEM4LjM2OCwxNy4zMzMgOC42NjcsMTcuMDM0IDguNjY3LDE2LjY2NiBMOC42NjcsMTAuNjY2IEwxMS4zMzQsMTAuNjY2IEwxMS4zMzQsMTYuNjY2IEMxMS4zMzQsMTcuMDMxIDExLjYyOSwxNy4zMyAxMS45OTUsMTcuMzMzIEwxMy43MTksMTcuMzQ4IEw5Ljk0OCwyMS4wNjEgWiIvPgogICAgPHBhdGggZD0iTTE2LDcuODg4NjA5MDVlLTMxIEw0LDcuODg4NjA5MDVlLTMxIEMyLjE2Myw3Ljg4ODYwOTA1ZS0zMSAwLjY2NywxLjQ5NSAwLjY2NywzLjMzMyBMMC42NjcsMjguNjY2IEMwLjY2NywzMC41MDUgMi4xNjMsMzEuOTk5IDQsMzEuOTk5IEwxNiwzMS45OTkgQzE3LjgzNywzMS45OTkgMTkuMzMzLDMwLjUwNCAxOS4zMzMsMjguNjY2IEwxOS4zMzMsMy4zMzMgQzE5LjMzMywxLjQ5NCAxNy44MzcsLTEuNzc2MzU2ODRlLTE1IDE2LDcuODg4NjA5MDVlLTMxIFogTTIsNi42NjcgTDE4LDYuNjY3IEwxOCwyNS4zMzQgTDIsMjUuMzM0IEwyLDYuNjY3IFogTTQsMS4zMzMgTDE2LDEuMzMzIEMxNy4xMDMsMS4zMzMgMTgsMi4yMyAxOCwzLjMzMyBMMTgsNS4zMzMgTDIsNS4zMzMgTDIsMy4zMzMgQzIsMi4yMyAyLjg5NywxLjMzMyA0LDEuMzMzIFogTTE2LDMwLjY2NyBMNCwzMC42NjcgQzIuODk3LDMwLjY2NyAyLDI5Ljc3IDIsMjguNjY3IEwyLDI2LjY2NyBMMTgsMjYuNjY3IEwxOCwyOC42NjcgQzE4LDI5Ljc3IDE3LjEwMywzMC42NjcgMTYsMzAuNjY3IFoiLz4KICAgIDxwYXRoIGQ9Ik02LjY2NyA0TDEzLjMzNCA0QzEzLjcwMiA0IDE0LjAwMSAzLjcwMSAxNC4wMDEgMy4zMzMgMTQuMDAxIDIuOTY1IDEzLjcwMiAyLjY2NiAxMy4zMzQgMi42NjZMNi42NjcgMi42NjZDNi4yOTkgMi42NjYgNiAyLjk2NSA2IDMuMzMzIDYgMy43MDEgNi4yOTkgNCA2LjY2NyA0ek0xMS4zMzMgMjguNjY3QzExLjMzMyAyOS40MDMgMTAuNzM2IDMwIDEwIDMwIDkuMjY0IDMwIDguNjY3IDI5LjQwMyA4LjY2NyAyOC42NjcgOC42NjcgMjcuOTMxIDkuMjY0IDI3LjMzNCAxMCAyNy4zMzQgMTAuNzM2IDI3LjMzNCAxMS4zMzMgMjcuOTMxIDExLjMzMyAyOC42Njd6Ii8+CiAgPC9nPgo8L3N2Zz4K"},52919:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIj4KICA8ZyBmaWxsPSIjQ0M3QjE5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0IDQpIj4KICAgIDxwYXRoIGQ9Ik0xMi41MzIgMTUuMjcyQzExLjIzMiAxNi41NzIgMTEuMjMyIDE4LjY4OCAxMi41MzIgMTkuOTg3IDEzLjE2MyAyMC42MTYgMTMuOTk5IDIwLjk2MiAxNC44ODkgMjAuOTYyIDE1Ljc3OSAyMC45NjIgMTYuNjE2IDIwLjYxNSAxNy4yNDYgMTkuOTg3IDE4LjU0NiAxOC42ODcgMTguNTQ2IDE2LjU3MSAxNy4yNDYgMTUuMjcyIDE1Ljk4NSAxNC4wMTUgMTMuNzkzIDE0LjAxNSAxMi41MzEgMTUuMjcyTDEyLjUzMiAxNS4yNzJ6TTE2LjMwNCAxOS4wNDRDMTUuNTQ5IDE5Ljc5OSAxNC4yMzEgMTkuNzk5IDEzLjQ3NiAxOS4wNDQgMTIuNjk2IDE4LjI2NCAxMi42OTYgMTYuOTk1IDEzLjQ3NiAxNi4yMTUgMTMuODUzIDE1LjgzOCAxNC4zNTYgMTUuNjMxIDE0Ljg5MSAxNS42MzEgMTUuNDI2IDE1LjYzMSAxNS45MjcgMTUuODM4IDE2LjMwNiAxNi4yMTUgMTcuMDgzIDE2Ljk5NSAxNy4wODMgMTguMjY0IDE2LjMwNSAxOS4wNDRMMTYuMzA0IDE5LjA0NHpNNS45MzIgMjIuODE1QzUuNjcyIDIyLjU1NSA1LjI0OSAyMi41NTUgNC45ODkgMjIuODE1IDQuNzI5IDIzLjA3NSA0LjcyOSAyMy40OTggNC45ODkgMjMuNzU4TDguNzYgMjcuNTI5QzguODkxIDI3LjY2IDkuMDYxIDI3LjcyNCA5LjIzMiAyNy43MjQgOS40MDMgMjcuNzI0IDkuNTczIDI3LjY1OSA5LjcwNCAyNy41MjkgOS45NjQgMjcuMjY5IDkuOTY0IDI2Ljg0NiA5LjcwNCAyNi41ODZMNS45MzIgMjIuODE1eiIvPgogICAgPHBhdGggZD0iTTMxLjQ2MSw1LjMzMyBMMzIuMzIyLDQuNDcyIEMzMi41ODIsNC4yMTIgMzIuNTgyLDMuNzg5IDMyLjMyMiwzLjUyOSBMMjguOTg5LDAuMTk2IEMyOC43MjksLTAuMDY0IDI4LjMwNiwtMC4wNjQgMjguMDQ2LDAuMTk2IEwyNy4xODUsMS4wNTcgTDI2LjMyNCwwLjE5NiBDMjYuMDY0LC0wLjA2NCAyNS42NDEsLTAuMDY0IDI1LjM4MSwwLjE5NiBDMjUuMTIxLDAuNDU2IDI1LjEyMSwwLjg3OSAyNS4zODEsMS4xMzkgTDI2LjI0MiwyIEwyNS4xODUsMy4wNTcgTDI0LjMyNCwyLjE5NiBDMjQuMDY0LDEuOTM2IDIzLjY0MSwxLjkzNiAyMy4zODEsMi4xOTYgQzIzLjEyMSwyLjQ1NiAyMy4xMjEsMi44NzkgMjMuMzgxLDMuMTM5IEwyNC4yNDIsNCBMMjIuNzE0LDUuNTI4IEMyMi40NTQsNS43ODggMjIuNDU0LDYuMjExIDIyLjcxNCw2LjQ3MSBMMjIuOTA5LDYuNjY3IEwxOC40MjgsMTEuMTQ4IEMxNy4zMDQsMTAuNDc1IDE2LjA4OCwxMC4xMjEgMTQuODgsMTAuMTIxIEMxMi4xMDUsMTAuMTIxIDkuOTAzLDExLjkxMiA5LjMwNywxNC41NTQgQzUuNjk0LDE0LjAxIDIuODAyLDE1LjQ5MyAxLjU3NiwxOC40NDkgQzAuMjUzLDIxLjY0MiAxLjI0NywyNS42NjkgNC4wNDgsMjguNDcgQzUuOTg1LDMwLjQwNyA4LjU0LDMxLjUxOCAxMS4wNTcsMzEuNTE4IEMxMy4zMjUsMzEuNTE4IDE1LjM1NCwzMC42MTcgMTYuNjI1LDI5LjA0NiBDMTcuNSwyNy45NjMgMTguNDAyLDI2LjA5NSAxNy45NjIsMjMuMjA5IEMxOS43MTgsMjIuODA4IDIxLjE1NSwyMS42NjggMjEuODgzLDIwLjA2NCBDMjIuNzIsMTguMjE5IDIyLjUyMywxNi4wMjMgMjEuMzcsMTQuMDkyIEwyNS44NTEsOS42MTEgTDI2LjA0Niw5LjgwNiBDMjYuMzA2LDEwLjA2NiAyNi43MjksMTAuMDY2IDI2Ljk4OSw5LjgwNiBMMjguNTE3LDguMjc4IEwyOS4zNzgsOS4xMzkgQzI5LjUxLDkuMjY4IDI5LjY4MSw5LjMzNCAyOS44NTEsOS4zMzQgQzMwLjAyMSw5LjMzNCAzMC4xOTIsOS4yNjkgMzAuMzIzLDkuMTM5IEMzMC41ODMsOC44NzkgMzAuNTgzLDguNDU2IDMwLjMyMyw4LjE5NiBMMjkuNDYsNy4zMzMgTDMwLjUxNyw2LjI3NiBMMzEuMzc4LDcuMTM3IEMzMS41MDksNy4yNjggMzEuNjc5LDcuMzMzIDMxLjg1LDcuMzMzIEMzMi4wMjEsNy4zMzMgMzIuMTkxLDcuMjY4IDMyLjMyMiw3LjEzOCBDMzIuNTgyLDYuODc4IDMyLjU4Miw2LjQ1NSAzMi4zMjIsNi4xOTUgTDMxLjQ1OSw1LjMzMiBMMzEuNDYxLDUuMzMzIFogTTI2LjUxOSw4LjM5MSBMMjYuMzI0LDguMTk2IEMyNi4wNjQsNy45MzYgMjUuNjQxLDcuOTM2IDI1LjM4MSw4LjE5NiBMMjAuMDQ4LDEzLjUyOSBDMTkuODIsMTMuNzU3IDE5Ljc4OCwxNC4xMTYgMTkuOTcyLDE0LjM4MSBDMjEuMTE5LDE2LjAyOSAyMS4zOCwxNy45NDkgMjAuNjY5LDE5LjUxNCBDMjAuMDMzLDIwLjkxNyAxOC43MzYsMjEuODIzIDE3LjExLDIyLjAwNSBDMTYuOTIzLDIyLjAyNiAxNi43NTMsMjIuMTI1IDE2LjY0MywyMi4yNzggQzE2LjUzMiwyMi40MyAxNi40OTIsMjIuNjIzIDE2LjUzMiwyMi44MDYgQzE3LjAwMSwyNC45OTQgMTYuNjczLDI2Ljg2MiAxNS41ODcsMjguMjA5IEMxNC41NzEsMjkuNDY2IDEyLjkyLDMwLjE4NiAxMS4wNTYsMzAuMTg2IEM4Ljg4OSwzMC4xODYgNi42NzcsMjkuMjE3IDQuOTg5LDI3LjUyOSBDMi41NjUsMjUuMTA1IDEuNjg4LDIxLjY2MiAyLjgwNiwxOC45NjEgQzMuNjQ1LDE2LjkzNiA1LjQ4MiwxNS43NzYgNy44NDYsMTUuNzc2IEM4LjQzNSwxNS43NzYgOS4wNjMsMTUuODQ3IDkuNzEsMTUuOTg1IEM5Ljg5NCwxNi4wMiAxMC4wODcsMTUuOTg1IDEwLjIzOSwxNS44NzMgQzEwLjM5MSwxNS43NjQgMTAuNDkxLDE1LjU5NCAxMC41MTIsMTUuNDA2IEMxMC43NzEsMTMuMDgxIDEyLjU2NSwxMS40NTUgMTQuODc3LDExLjQ1NSBDMTUuOTgyLDExLjQ1NSAxNy4xMDgsMTEuODMyIDE4LjEzNCwxMi41NDYgQzE4LjM5OCwxMi43MzEgMTguNzU3LDEyLjY5OCAxOC45ODYsMTIuNDcgTDI0LjMxOSw3LjEzNyBDMjQuNTc5LDYuODc3IDI0LjU3OSw2LjQ1NCAyNC4zMTksNi4xOTQgTDI0LjEyNCw1Ljk5OSBMMjguNTE1LDEuNjA4IEwzMC45MDYsMy45OTkgTDI2LjUxNSw4LjM5IEwyNi41MTksOC4zOTEgWiIvPgogIDwvZz4KPC9zdmc+Cg=="},31481:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTM1LjMzMyAyNi42NjdoLS42NjdWMjZhNC42NzIgNC42NzIgMCAwIDAtNC42NjctNC42NjdBNC42NzIgNC42NzIgMCAwIDAgMjUuMzMyIDI2di42NjdoLS42NjdhLjY2Ny42NjcgMCAwIDAtLjY2Ny42Njd2OGMwIC4zNjguMjk5LjY2Ny42NjcuNjY3aDEwLjY2N2EuNjY3LjY2NyAwIDAgMCAuNjY3LS42Njd2LThhLjY2Ny42NjcgMCAwIDAtLjY2Ny0uNjY3aC4wMDF6TTI2LjY2NyAyNkEzLjMzOCAzLjMzOCAwIDAgMSAzMCAyMi42NjcgMy4zMzggMy4zMzggMCAwIDEgMzMuMzMzIDI2di42NjdoLTYuNjY3VjI2aC4wMDF6bTggOC42NjdoLTkuMzMzVjI4aDkuMzMzdjYuNjY3ek0zMCAyOS4zMzNoLjAwMmMuNzM0IDAgMS4zMzMuNTk4IDEuMzMzIDEuMzMzIDAgLjQ4Ny0uMjc2Ljg5Ni0uNjY3IDEuMTI4di44NzJhLjY2Ny42NjcgMCAwIDEtMS4zMzQgMHYtLjg3MmMtLjM5MS0uMjMyLS42NjctLjY0MS0uNjY3LTEuMTI4IDAtLjczNC41OTgtMS4zMzMgMS4zMzMtMS4zMzN6bS01LjM0OS0xNi42NjZoLjAwMmMwIDMuMDI4LTEuMzIxIDUuNjkzLTMuMzE3IDcuMjQ0djMuNDIzaC0xLjMzM3YtMi42MDlhNi4zMjMgNi4zMjMgMCAwIDEtMi42ODMuNjA5IDYuMzE3IDYuMzE3IDAgMCAxLTIuNjUxLS41OTV2Mi41OTVhLjY2OS42NjkgMCAwIDEtLjQ0My42MjhsLTYuNjggMi4zODVhMy4zNCAzLjM0IDAgMCAwLTIuMjExIDMuMTM5djIuNTE1aDE1LjMzM3YxLjMzM2gtMTZhLjY2Ny42NjcgMCAwIDEtLjY2Ny0uNjY3di0zLjE4MWE0LjY3NiA0LjY3NiAwIDAgMSAzLjA5Ni00LjM5NWw2LjIzNy0yLjIyOHYtMi45MzFjLTIuMDEzLTEuNTQ2LTMuMzQ5LTQuMjIyLTMuMzQ5LTcuMjY1QzkuOTg1IDcuODg4IDEzLjI3NCA0IDE3LjMxOCA0YzQuMDQ0IDAgNy4zMzMgMy44ODggNy4zMzMgOC42Njd6bS03LjMzNC03LjMzNGwtLjAwMS4wMDFjLTIuODM1IDAtNS4yMSAyLjQxNi01LjgzNSA1LjY1MWE0LjY4IDQuNjggMCAwIDAgMS44MzUuMzQ5YzEuNzQ1IDAgMy44MTUtMS4wMzUgNC40MjgtMi4yMTVhLjY2NS42NjUgMCAwIDEgLjU3OS0uMzU5LjYyNS42MjUgMCAwIDEgLjU5Mi4zMzZjMS4xMzkgMS45OTIgMi4zMzggMi42MjQgNC4yNzUgMi4yNDlsLjAyNC0uMDAxYy0uNTEyLTMuNDE0LTIuOTU4LTYuMDExLTUuODk3LTYuMDExem0tNiA3LjMzNGMwIDQuMDQ0IDIuNjkyIDcuMzMzIDYgNy4zMzNzNi0zLjI4OSA2LTcuMzMyYTYuNTA0IDYuNTA0IDAgMCAxLTEuMTEzLjExM2MtMS41OTIgMC0yLjg0NC0uNzAyLTMuOTA3LTIuMTgxLTEuMTM5IDEuMTk2LTMuMTQ3IDIuMDY3LTQuOTggMi4wNjctLjcxNCAwLTEuMzYtLjExLTEuOTg3LS4zMjEtLjAwNC4xMDgtLjAxMy4yMTMtLjAxMy4zMjF6IiBmaWxsPSIjQ0M3QjE5IiBmaWxsLXJ1bGU9Im5vbnplcm8iLz4KPC9zdmc+Cg=="},26782:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTkuNDk3IDcuNDM4YS42ODguNjg4IDAgMSAxLTEuMzc1IDAgLjY4OC42ODggMCAwIDEgMS4zNzUgMHptMi43NSAwYS42ODguNjg4IDAgMSAxLTEuMzc1IDAgLjY4OC42ODggMCAwIDEgMS4zNzUgMHptMi43NSAwYS42ODguNjg4IDAgMSAxLTEuMzc1IDAgLjY4OC42ODggMCAwIDEgMS4zNzUgMHptMi4wNjMgMTguNTZ2LS4wMDFhLjY4OC42ODggMCAxIDEgMCAxLjM3NUg3LjQzOEEzLjQ0IDMuNDQgMCAwIDEgNCAyMy45MzZ2LTE2LjVBMy40NCAzLjQ0IDAgMCAxIDcuNDM3IDRoMjEuOTk4YTMuNDQgMy40NCAwIDAgMSAzLjQzNyAzLjQzN3YxMWEuNjg4LjY4OCAwIDEgMS0xLjM3NiAwdi03LjU2Mkg1LjM3NHYxMy4wNjJjMCAxLjEzNy45MjQgMi4wNjIgMi4wNjIgMi4wNjJoOS42MjR6TTcuNDM1IDUuMzc3YTIuMDY0IDIuMDY0IDAgMCAwLTIuMDYzIDIuMDYyVjkuNWgyNi4xMjNWNy40MzhhMi4wNjQgMi4wNjQgMCAwIDAtMi4wNjItMi4wNjJINy40MzV6TTM2LjY1NCAzMC4xNWwuMDAyLS4wMDJhLjY4NS42ODUgMCAwIDEgLjI1Mi45MzhsLTIuMDYyIDMuNTcyYS42NzcuNjc3IDAgMCAxLS40MTcuMzIuNzAxLjcwMSAwIDAgMS0uNTIzLS4wN2wtMS4wOTItLjYzMmMtLjQxLjMtLjg1Mi41NTQtMS4zMTcuNzZ2MS4yNzRjMCAuMzgtLjMwOC42ODctLjY4OC42ODdoLTQuMTI0YS42ODguNjg4IDAgMCAxLS42ODgtLjY4N3YtMS4yNjhhNy4zMTEgNy4zMTEgMCAwIDEtMS4zMzctLjc2MmwtMS4xMDguNjM1YS42OS42OSAwIDAgMS0uOTM3LS4yNTJsLTIuMDYzLTMuNTcyYS42ODguNjg4IDAgMCAxIC4yNTItLjk0bDEuMDk0LS42MzRhNi4zMjggNi4zMjggMCAwIDEgLjAwMS0xLjUzNWwtMS4wOTQtLjYzMmEuNjg3LjY4NyAwIDAgMS0uMjUtLjk0bDIuMDYzLTMuNTcyYS42OS42OSAwIDAgMSAuOTM3LS4yNTJsMS4xMDUuNjM1Yy40MTgtLjMuODY2LS41NTUgMS4zMzYtLjc2MnYtMS4yNzRjMC0uMzguMzA4LS42ODcuNjg4LS42ODdoNC4xMjRjLjM4IDAgLjY4OC4zMDguNjg4LjY4N3YxLjI3NGMuNDY0LjIwNi45MDUuNDYgMS4zMTYuNzU5bDEuMDg5LS42MzJhLjY3OS42NzkgMCAwIDEgLjUyMy0uMDcuNjkuNjkgMCAwIDEgLjQxNy4zMmwyLjA2MyAzLjU3MmMuMTkuMzMuMDc3Ljc1LS4yNTIuOTRsLTEuMDk2LjYzNGMuMDU5LjUxLjA2IDEuMDI0IDAgMS41MzRsMS4wOTguNjM0em0tMi42NTYgMy4yMjZsMS4zNzMtMi4zNzktLjkwNy0uNTI0YS42ODcuNjg3IDAgMCAxLS4zMzEtLjcyYy4wNjItLjMzNi4wOTQtLjY3My4wOTQtMS4wMDNhNS41IDUuNSAwIDAgMC0uMDk1LTEuMDAyLjY4NS42ODUgMCAwIDEgLjMzLS43MjFsLjkwNy0uNTI0LTEuMzc0LTIuMzgtLjg5NS41MjFhLjY5LjY5IDAgMCAxLS43OTItLjA3MyA1Ljg0NyA1Ljg0NyAwIDAgMC0xLjc0LTEuMDA0LjY4Ny42ODcgMCAwIDEtLjQ0Ni0uNjQ0di0xLjA0OGgtMi43NXYxLjA0OGEuNjk2LjY5NiAwIDAgMS0uNDQ3LjY0OGMtLjY2Ni4yNDctMS4yOS42MDMtMS43NTYgMS4wMDNhLjY4Ny42ODcgMCAwIDEtLjc4OS4wNzRsLS45MTItLjUyNS0xLjM3NyAyLjM4My45MDQuNTI0Yy4yNS4xNDYuMzgzLjQzMy4zMzEuNzE5YTUuNDUyIDUuNDUyIDAgMCAwLS4wOTggMS4wMDJjMCAuMzM2LjAzMy42NzIuMDk2IDEuMDAyYS42ODcuNjg3IDAgMCAxLS4zMzMuNzJsLS45MDQuNTIzIDEuMzc2IDIuMzgzLjkxNi0uNTI1YS42ODYuNjg2IDAgMCAxIC43ODkuMDc1Yy40NjYuNCAxLjA5Ljc1NSAxLjc1NCAxLjAwMy4yNy4xLjQ0OS4zNTcuNDQ4LjY0NHYxLjA0OGgyLjc1di0xLjA0OGMwLS4yODcuMTgtLjU0NC40NS0uNjQ0YTUuNzQ0IDUuNzQ0IDAgMCAwIDEuNzM3LTEuMDA0LjY5LjY5IDAgMCAxIC43OTItLjA3M2wuODk5LjUyem0tNS4yNzItOC4wNjRhMy40NCAzLjQ0IDAgMCAxIDMuNDM3IDMuNDM3IDMuNDQgMy40NCAwIDAgMS0zLjQzNyAzLjQzNyAzLjQ0IDMuNDQgMCAwIDEtMy40MzctMy40MzcgMy40NCAzLjQ0IDAgMCAxIDMuNDM3LTMuNDM3em0wIDUuNWEyLjA2NCAyLjA2NCAwIDAgMCAyLjA2My0yLjA2MyAyLjA2NCAyLjA2NCAwIDAgMC0yLjA2My0yLjA2MiAyLjA2NCAyLjA2NCAwIDAgMC0yLjA2MiAyLjA2MmMwIDEuMTM3LjkyNSAyLjA2MiAyLjA2MiAyLjA2MnoiIGZpbGw9IiNDQzdCMTkiIGZpbGwtcnVsZT0ibm9uemVybyIvPgo8L3N2Zz4K"},22379:(e,t,r)=>{"use strict";e.exports=r.p+"static/e300dd1e6cbb24720c9a.png"},11117:(e,t,r)=>{"use strict";e.exports=r.p+"static/b2a505686615df46b1e2.png"},35141:(e,t,r)=>{"use strict";e.exports=r.p+"static/6d14d4c501ce046849c3.png"},43498:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(94818),l=r(55438);const c=o.Z.extend({mixins:l.Z,initialize(e={}){e.interface&&(this.interface=e.interface),e.props&&(this.props=e.props),a().each(this.interface,(e=>{this[e]=a().bind(this._proxy,this,e)}))},_proxy(e,...t){return this.getInstance()[e](...t)},register(e,t={}){this.hasInstance()&&!t.ignorePrevious&&(this._previousInstance=this.getInstance()),this._instance=e,t.silent||this.trigger("change:instance",e)},registerOnce(e){if(!this.hasInstance()){const t=e();this.register(t.instance||t,t.options||void 0)}},restorePrevious(){this._previousInstance&&this.register(this._previousInstance)},registered(){const e=i().Deferred();return this.hasInstance()?e.resolve(this.getInstance()):this.listenToOnce(this,"change:instance",e.resolve),e.promise()},getInstance(){if(this.hasInstance())return this._instance;throw new Error("Nothing has been registered to this adapter.")},hasInstance(){return null!=this._instance},prop(e){if(a().contains(this.props,e))return this.getInstance()[e];throw new Error("The "+e+" property has not been defined for this adapter")}})},45191:(e,t,r)=>{"use strict";r.d(t,{Cq:()=>l,X_:()=>c,s4:()=>d,DB:()=>u});var n=r(19755),i=r.n(n);r(13469),r(32903);const s={},a={};function o(e,t,r){s[e]=function(e,t){if(!t)return e;const r={};return t.forEach((t=>{r[t]=(...r)=>e[t](...r)})),r}(t,r);const n=a[e];n&&(delete a[e],n.resolve(s[e]))}function l(e){for(const t in e){const r=e[t];let n,i;Array.isArray(r)?(n=r[0],i=r[1]):n=r,o(t,n,i)}}function c(e){return d(e)?i().Deferred().resolve(s[e]).promise():(a[e]||(a[e]=i().Deferred()),a[e].promise())}function d(e){return s.hasOwnProperty(e)}function u(e){return s[e]}},65935:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=new(r(43498).Z)({props:["X-Plex-Client-Identifier","X-Plex-Device","X-Plex-Device-Name","X-Plex-Device-Screen-Resolution","X-Plex-Device-Vendor","X-Plex-Model","X-Plex-Platform","X-Plex-Platform-Version","X-Plex-Product","X-Plex-Version"]})},17414:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=new(r(43498).Z)({interface:["getLanguages","load","t","tEscape"]})},47041:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=new(r(43498).Z)({props:["capabilities","video","music","photo"]})},3578:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=new(r(43498).Z)({interface:["get","set","remove","clear"]})},41444:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(13469),i=r.n(n),s=r(32903),a=r(86832);const o={_map:{},register(e,t){(0,s.Z)(i().isFunction(t),`The "${e}" command must be a function`),this._map[e]=t},registerAll(e){i().each(e,((e,t)=>{"__esModule"!==t&&this.register(t,e)}))},hasRegistered(e){return this._map.hasOwnProperty(e)},reset(){this._map={}},execute(e,...t){const r=this._map[e];if((0,s.Z)(r,`The "${e}" command has not been registered`),r)return(0,a.Z)("[Commands] Executing",e),r(...t)}}},37474:(e,t,r)=>{"use strict";r.d(t,{EH:()=>y,ZP:()=>b});var n=r(13469),i=r.n(n),s=r(9390),a=r.n(s);const o={bindToModel:function(){this.bindings&&i().each(i().keys(this.bindings),(function(e){const t=this.bindings[e];let r;if(r=t.model?this[t.model]:this[this.bindingsModel]||this.model,!r)return;const n=t.modelListeners||[t.modelAttribute];i().each(n,(function(n){const s={obj:r,name:"change:"+n,callback:i().bind(this.renderBinding,this,e,t,r)};this._bindingListeners||(this._bindingListeners=[]),this._bindingListeners.push(s),this.listenTo(s.obj,s.name,s.callback)}),this),this.renderBinding(e,t,r)}),this)},unbindFromModel:function(){this.bindings&&(i().each(this._bindingListeners,(function(e){this.stopListening(e.obj,e.name,e.callback)}),this),this._bindingListeners=null)},renderBinding:function(e,t,r){const n=this.$(e),s=t.formatter,a=!!t.isHtml,o=t.autohide,l=t.hiddenClass||"hidden";let c=r.get(t.modelAttribute);if(s&&(c=s.call(this,c,n)),o){const e=i().isFunction(o)?o.call(this,c):c;n.toggleClass(l,!e)}t.manual||(!a&&i().isString(c)&&(c=i().escape(c)),n.html(c))}};var l=r(94818),c=(r(2739),r(20683)),d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function g(e){const t={},r=i().result(e,"responseType");return r&&r.accept&&(t.Accept=r.accept),t}const y=3e4,v=a().noConflict(),f=v.sync;v.sync=function(e,t,r){var n=r,{url:s,data:a,headers:o}=n,l=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(n,["url","data","headers"]);const d=function(e,t){return t.server?t.server:e.getXHROptions?e:e.provider?e.provider:e.server?e.server:e}(t,l),v=s||i().result(t,"syncUrl")||i().result(t,"url"),b=i().isObject(a)?c.Z.stringifyParams(a):a,Z=!!b&&b.indexOf("checkFiles=1")>-1;let S=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({data:b,dataType:"text",processData:!1,headers:i().extend(g(t),o),timeout:Z?6e4:y},l);return i().isFunction(d.getXHROptions)?S=d.getXHROptions(v,S):S.url=v,f(e,t,S)},v.wrapError=function(e,t){const r=t.error;t.error=function(n){r&&r(e,n,t),e.trigger("error",e,n,t)}},i().extend(v.View.prototype,o),[v.Model,v.Collection,v.Router,v.View,v.History].forEach((e=>{e.extend=l.Z.extend}));const b=v},26051:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(13469),i=r.n(n),s=r(37474),a=r(37434),o=r.n(a),l=r(19755),c=r.n(l);c().fn.isDisabled=function(){return this.hasClass("disabled")||this.hasClass("active")||this.hasClass("hidden")},c().fn.selectText=function(){const e=this[0];let t;if(document.body.createTextRange)t=document.body.createTextRange(),t.moveToElementText(e),t.select();else if(window.getSelection){const r=window.getSelection();t=document.createRange(),t.selectNodeContents(e),r.removeAllRanges(),r.addRange(t)}},c().fn.triggerReflow=function(){const e=this[0];return e&&e.offsetHeight,this};var d=r(32903),u=r(86832);o().isNodeAttached=function(e){return s.ZP.$.contains(document.documentElement,e)};const p=i().clone(o().View.prototype),m=i().clone(o().CollectionView.prototype),h=i().clone(o().Region.prototype),g=i().clone(o().Region),y=i().clone(o().Layout.prototype),v={constructor:function(){this.wrapAfterRender(),p.constructor.apply(this,arguments),this.listenViewEvents()},listenViewEvents:function(){this.stopListeningViewEvents();const e=i().result(this,"viewEvents");e&&(this._viewEventsListeners=i().mapObject(e,(e=>i().isString(e)?this[e]:e)),this.listenTo(this,this._viewEventsListeners))},stopListeningViewEvents:function(){this._viewEventsListeners&&(this.stopListening(this,this._viewEventsListeners),delete this._viewEventsListeners)},_setElement:function(){p._setElement.apply(this,arguments),this.el&&(this.el._viewInstance?this.el._viewInstance!==this&&u.Z.warn('Multiple views registered for a single element with class="%s"',this.el.className):this.el._viewInstance=this)},_removeElement:function(){this.el&&delete this.el._viewInstance,p._removeElement.apply(this,arguments)},bindAllWhenRendered:function(){(0,d.Z)(arguments.length>0,"`bindAllWhenRendered` requires at least one function");const e=Array.isArray(arguments[0])?arguments[0]:arguments;i().each(e,(function(e){try{this[e]=this.whenRendered(this[e])}catch(t){(0,d.Z)(!1,"`bindAllWhenRendered` is unable to wrap "+JSON.stringify(e))}}),this)},whenRendered:function(e){return(0,d.Z)(i().isFunction(e),"`whenRendered` must be called with a single function"),i().bind((function(){if(this.isClosed)return;const t=i().toArray(arguments),r=i().bind((function(){this.isRendered&&!this.isClosed&&e.apply(this,t)}),this);this.isRendered?i().defer(r):this.listenToOnce(this,"render",(function(){i().defer(r)}))}),this)},wrapAfterRender:function(){void 0!==this.onlyAfterRender&&((0,d.Z)(Array.isArray(this.onlyAfterRender),"`onlyAfterRender` must be an array"),this.bindAllWhenRendered.apply(this,this.onlyAfterRender))},bindUIElements:function(){p.bindUIElements.apply(this,arguments),this.bindToModel(),this.isRendered=!0},unbindUIElements:function(){p.unbindUIElements.apply(this,arguments),this.unbindFromModel()},_getImmediateChildren:function(){return[]},_getNestedViews:function(){const e=this._getImmediateChildren();return e.length?i().reduce(e,(function(e,t){return t._getNestedViews?e.concat(t._getNestedViews()):e}),e):e}},f={constructor:function(){m.constructor.apply(this,arguments)},triggerRendered:function(){return this.isRendered=!0,m.triggerRendered.apply(this,arguments)},rebase:function(e){return this.stopListening(this.collection),this.collection=e,this._initialEvents(),i().isFunction(this._renderChildren)?this._renderChildren():this.render(),this},buildItemView:function(){const e=m.buildItemView.apply(this,arguments);return e._parentView=this,e},_getImmediateChildren:function(){return i().values(this.children._views)}},b={constructor:function(){m.constructor.apply(this,arguments)}},Z={append:function(e,t,r){const n=e.isClosed||i().isUndefined(e.$el),s=e!==this.currentView;return s&&this.close(),e.render(),(s||n)&&(t||(t=this.getEl(this.el)),r?t.prepend(e.el):t.append(e.el)),this.attachView(e),o().triggerMethod.call(this,"show",e),o().triggerMethod.call(e,"show"),this._updateParentView(e),this._triggerAttached(e,t),this},prepend:function(e,t){return this.append(e,t,!0)},show:function(e){h.show.apply(this,arguments),this._updateParentView(e),this._triggerAttached(e,this.$el)},_triggerAttached:function(e,t){if(!o().isNodeAttached(t.get(0)))return;const r=i().union([e],i().result(e,"_getNestedViews")||[]);i().each(r,(function(e){e.triggerMethod&&e.triggerMethod("attached",this)}),this)},_updateParentView:function(e){e&&(e._parentView=this._parentView)}},S={buildRegion:function(e,t){const r=g.buildRegion.apply(this,arguments);return r._parentView=e._parentView,r}},P={_buildRegions:function(e){const t=i().mapObject(e,(e=>i().isString(e)?{_parentView:this,selector:e}:i().defaults(e,{_parentView:this})));return y._buildRegions.call(this,t)},_getImmediateChildren:function(){return i().chain(this.regionManager._regions).values().pluck("currentView").compact().value()}};i().extend(o().View.prototype,v),i().extend(o().ItemView.prototype,v),i().extend(o().CollectionView.prototype,v,f),i().extend(o().CompositeView.prototype,v,b),i().extend(o().Region.prototype,Z),i().extend(o().Region,S),i().extend(o().Layout.prototype,P),o().extend=s.ZP.Model.extend,o().Controller.extend=o().extend,o().Region.extend=o().extend,o().Application.extend=o().extend,o().Module.extend=o().extend,o().View.extend=o().extend,o().ItemView.extend=o().extend,o().CollectionView.extend=o().extend,o().CompositeView.extend=o().extend,o().Layout.extend=o().extend;const I=o()},84915:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(19755),i=r.n(n),s=r(37474),a=r(36675);const o={isPopulating(){return!!this.populatePromise&&"pending"===this.populatePromise.state()},isPopulated(){return!!this.populatePromise&&"resolved"===this.populatePromise.state()},populate(){return this.populatePromise?this.populatePromise:this.fetch.apply(this,arguments)},fetch(){const e=i().Deferred();let t;if(this.isPopulating())return this.populatePromise;t=this._fetch?this._fetch.apply(this,arguments):this instanceof s.ZP.Collection?s.ZP.Collection.prototype.fetch.apply(this,arguments):s.ZP.Model.prototype.fetch.apply(this,arguments);const r=e.promise();return r.rid=t.rid,this.populatePromise=r,this.failedPopulatePromise=null,t.done((r=>{this.populatePromise=i().Deferred().resolveWith(this,[this]).promise(),e.resolveWith(this,[this,r,t])})),t.fail((t=>{this.populatePromise=null,this.failedPopulatePromise=r,e.rejectWith(this,[this,t])})),r},abortPendingPopulate(){return this.isPopulating()&&a.Z.abort(this.populatePromise.rid),this.populatePromise},resetPopulatePromise(e){return this.isPopulating()||(this.populatePromise=e,this.failedPopulatePromise=null),this.populatePromise}}},32975:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(37474),l=r(84915),c=r(8238),d=r(71273),u=(r(32903),r(33606),r(87442)),p=r(20683);const m=o.ZP.Collection.extend({mixins:[l.Z],responseType:d.Ls,instanceOptions:["url","path","pageStart","pageSize","persistInCache","skipCache"],_context:["parent"],cache:null,cacheKey:function(){return a().result(this,"url")},constructor:function(e,t){t||(t={}),a().each(this.getContext(),(function(e){const r=t[e];void 0!==r&&this.setContext(e,r)}),this);const r=a().result(this,"instanceOptions");if(a().each(r,(function(e){a().has(t,e)&&(this[e]=t[e])}),this),null==this.pageStart&&null==this.pageSize||(this.pageStart||(this.pageStart=0),this.pageSize||(this.pageSize=0)),t.populated&&this.resetPopulatePromise(i().Deferred().resolve().promise()),!this.cache||this.skipCache)return o.ZP.Collection.prototype.constructor.apply(this,arguments),void this._initState();this.initialize.apply(this,arguments);const n=this.cache.getItemCacheKey(this),s=this.cache.get(n);return this.uninitialize(),s||(t.onlyIfCached?{}:(o.ZP.Collection.prototype.constructor.apply(this,arguments),this._initState(),void this.cache.store(this,n)))},uninitialize:function(){this.stopListening()},_initState:function(){c.Z.shouldCreateStateTree&&(this.state=this.toState(),this.updateState=this.updateState.bind(this),this.on("reset update sort",this.onCollectionChange,this),this.on("statechange",this.onStateChange,this))},hasContext:function(e){return this.getContext().includes(e)},getContext:function(){if(!this.context)return this._context;const e=a().result(this,"context");return this._context.concat(e)},setContext:function(e,t){-1!==this.getContext().indexOf(e)&&this[e]!==t&&(this[e]=t,this.each((function(r){r.setContext(e,t)})))},getState:function(){return this.state},updateState:function(){const e=this.state,t=this.getState();this.state=this.toState();const r=this.getState();return this.trigger("statechange",this,r,t),{name:this.name,previousState:e,nextState:r}},toState:function(){return this.name,this.reduce(this.reduceState,[])},reduceState:function(e,t){const r=t.getState();return r&&e.push(r),e},shouldUpdateModelState:function(e,t,r){return t!==r},sync:function(){return this.cache&&this.cache.store(this),o.ZP.sync.apply(this,arguments)},syncUrl:function(){let e="";if(this.url&&(e=a().result(this,"url")),this.path&&(e=p.Z.join([e,a().result(this,"path")])),null!=this.pageStart||null!=this.pageSize){const t={"X-Plex-Container-Start":this.pageStart||0,"X-Plex-Container-Size":this.pageSize||0};e=p.Z.join(e,t)}return e},parse:function(e,t){return this.name,this.convert(e)},convert:function(e){let t=e;const r=a().result(this,"responseType");if(a().isString(t)&&(a().isFunction(this.augmentResponseText)&&(t=this.augmentResponseText(t,r)),t=r.parse(t),r===d.AV&&t.MediaContainer&&(t=t.MediaContainer)),a().isFunction(this.augmentResponse)&&(t=this.augmentResponse(t,r)),Array.isArray(t))return t;const n=this.model.prototype.rootPropertyName;if(!n)return t;let i=t[n];return i?(Array.isArray(i)||(i=[i]),i):[]},clone:function(e){e||(e=this.models);const t=a().result(this,"instanceOptions"),r=a().extend(a().pick(this,t),a().pick(this,this.getContext()),{skipCache:!0,persistInCache:!1});return new this.constructor(e,r)||null},cloneDeep:function(e){e||(e=this.models);const t=a().map(e,(function(e){return e.clone()}));return this.clone(t)},clear:function(e){e=a().extend({silent:!0},e),this.abortPendingPopulate(),this.resetPopulatePromise(null),this.reset([],e)},getSaveParams:function(){return this.map((function(e){return e.getSaveParams()}))},onCollectionChange:function(){u.GF(this.updateState,this)},onStateChange:function(e,t,r){e!==this&&this.shouldUpdateModelState(e,t,r)&&u.GF(this.updateState,this)}})},13220:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(45191),l=r(37474),c=r(84915),d=r(18655),u=r(8238),p=r(71273),m=r(8523);const h=function(e,t){return e?a().reduce(t,((t,r,n)=>(a().isEqual(e[n],r)||(t[n]=r),t)),{}):t};var g=r(32903),y=r(86832),v=(r(33606),r(3615)),f=r(87442),b=r(20683);const Z=/^change:([\w]+)$/,S=e=>Array.isArray(e)?e[0]:e,P=l.ZP.Model.extend({mixins:[c.Z],name:"AbstractModel",responseType:p.Ls,hasInitialRelations:!1,_context:["parent","skipCache"],cache:null,cacheKey:function(e){return e[this.idAttribute]},constructor:function(e,t){let r;if(e||(e={}),t||(t={}),this.initialize!==l.ZP.Model.prototype.initialize&&(r=this.initialize,this.initialize=function(){}),this.getContextNames().forEach((e=>{const r=this.findOption(t,e);void 0!==r&&(this[e]=r)})),!this.cache||this.findOption(t,"skipCache"))return l.ZP.Model.prototype.constructor.apply(this,arguments),this._initModel(t),void(r&&(r.apply(this,arguments),this.initialize=r));const n=this.findOption(t,"onlyIfCached"),i=this.cache.getItemCacheKey(this,e);let s=this.cache.get(i);if(!s&&this.entityID&&(0,o.s4)("appModel")){const t=(0,o.DB)("appModel");if(t.has("entities")){const r=t.get("entities").get(this.entityType),n=this.entityID(e),i=r.get(n);i&&(s=i.get("model"))}}return s?(this.uninitialize(),n||(this.mergeStrategy&&(s.isMergingAttributes=!0),t.parse?e=s.parse(e):a().extend(e,s._getRelations(this.syncedRelations,e)),s.set(e),s.isMergingAttributes=!1),this.getContextNames().forEach((e=>{s.setContext(e,this[e]||s[e])})),t.collection&&(s.collection=t.collection),s.updateEntity(),s):n?{}:(l.ZP.Model.prototype.constructor.apply(this,arguments),this._initModel(t),r&&(r.apply(this,arguments),this.initialize=r),void this.cache.store(this,i))},uninitialize:function(){this.stopListening()},_initModel:function(e){u.Z.shouldCreateStateTree&&this.entityID&&(this.state=this.toState()),this._initRelations(e),this._initDerived(e),this._initState()},_initRelations:function(e){this._relationListeners={};const t=a().extend({},this.sessionRelations,this.syncedRelations);a().each(t,(function(e,t){this._initRelation(e,t);const r=a().bind(this._initRelation,this,e,t);this.on("change:"+t,r)}),this),this.hasInitialRelations=!0,this.set(this._getRelations(this.sessionRelations,this.attributes)),e.parse||this.set(this._getRelations(this.syncedRelations,this.attributes))},_initRelation:function(e,t){const r=this._resolveRelationDefinition(e).relationClass,n=this.get(t),i=this.previous(t),s=n&&n instanceof r;i&&i instanceof r&&a().has(this._relationListeners,t)&&(i.off("all",this._relationListeners[t]),this._relationListeners[t]=null),s&&this._forwardRelationEvents(n,t)},_initDerived:function(){a().each(this.derivedAttrs,this._setDerived,this)},_initState:function(){u.Z.shouldCreateStateTree&&(this.state=this.toState(),this.updateState=this.updateState.bind(this),this.updateEntity(),this.on("all",this.onEvent,this))},findOption:function(e,t){return e[t]||e.collection&&e.collection[t]},getContextNames:function(){return this.getContext().map(S)},getContext:function(){if(!this.context)return this._context;const e=a().result(this,"context");return this._context.concat(e)},setContext:function(e,t){if(!this.hasContext(e)||this[e]===t)return;const r=this.getContext().find((t=>S(t)===e)),n=Array.isArray(r)&&r[1]&&r[1].boundDerivedAttrs,i=n?[e,...n]:[e];let s;if(this[e]=t,i.forEach((e=>{this.hasDerived(e)&&(s=s||{},s[e]=this.derivedAttrs[e].call(this))})),s&&this.set(s),"parent"===e)return;const o=a().extend({},this.sessionRelations,this.syncedRelations);a().each(o,(function(r,n){const i=this.get(n);i&&i.setContext(e,t)}),this)},getScopedKey:function(e){return null!=e&&a().isFunction(this.cacheKey)?this.cacheKey(this.attributes)+"!"+e:e},getState:function(){return this._computedEntityID||this.state},updateState:function(){const e=this.state,t=this.getState();this.state=this.toState();const r=this.getState();return r!==t&&this.updateEntity(),this.trigger("statechange",this,r,t),{name:this.name,previousState:e,nextState:r}},updateEntity:function(){this._computedEntityID&&!this.skipCache&&((0,g.Z)(this.entityType,this.name+" requires an `entityType`"),m.Z.trigger("change:entity",{type:this.entityType,id:this._computedEntityID,model:this}))},toState:function(){this.name;const e=Object.keys(this.attributes),t=a().reduce(e,this.reduceState,{possibleEntityContainers:[]},this);return Object.defineProperty(t,"possibleEntityContainers",{enumerable:!1}),this.entityID&&(this._computedEntityID=this.entityID(t)),t},reduceState:function(e,t){const r=this.attributes[t];return r&&r.getState?(e.possibleEntityContainers.push(t),e[t]=r.getState(),e):(r&&r.initialize||(e[t]=r),e)},shouldUpdateRelationState:function(e,t,r){return t!==r},toJSON:function(e={}){this.name;const t=this.syncedAttrs,r=this.sessionRelations,n=this.syncedRelations,s=this.attributes,o={};for(const i in s){const l=e.excluded&&e.excluded.includes(i),c=r&&a().has(r,i),d=n&&a().has(n,i),u=e.syncedOnly&&(!t||!a().has(t,i));l||c||d||u||(o[i]=s[i])}let c=i().extend(!0,{},o);function d(t,r){const n=this.get(r),i=e.excluded&&e.excluded.includes(r);if(n&&!i){let t;t=e.excludeDefaults?n instanceof l.ZP.Collection?n.map((function(t){return h(a().result(t,"defaults"),t.toJSON(e))})):h(a().result(n,"defaults"),n.toJSON(e)):n.toJSON(e),c[r]=t}}return e.excludeDefaults&&(c=h(a().result(this,"defaults"),c)),e.syncedOnly||a().each(r,d,this),a().each(n,d,this),c},clone:function(){const e=a().extend(a().pick(this,this.getContextNames()),{skipCache:!0});return new this.constructor(this.toJSON(),e)||null},copy:function(e){(0,g.Z)(e instanceof this.constructor,"Only a model of the same type may be copied");const t=e.toJSON();return a().extend(t,this._getRelations(this.sessionRelations,t,{parse:!0}),this._getRelations(this.syncedRelations,t,{parse:!0})),this.set(t)},restoreDefaults:function(e){const t={};return a().each(this.attributes,(function(e,r){this.derivedAttrs&&a().has(this.derivedAttrs,r)||(t[r]=void 0)}),this),a().extend(t,this._getRelations(this.sessionRelations,{},{reset:!0}),this._getRelations(this.syncedRelations,{},{reset:!0}),a().result(this,"defaults"),e),this.set(t)},set:function(e,t,r){let n,i;return a().isObject(e)?(n=e,r=t):(n={})[e]=t,r||(r={}),!this.isMergingAttributes&&r.merge&&this.mergeStrategy&&(i=!0,this.isMergingAttributes=!0),this.isMergingAttributes&&(n=this._mergeAttributes(n)),l.ZP.Model.prototype.set.call(this,n,r),i&&(this.isMergingAttributes=!1),this},hasAttr:function(e){const t=this.sessionAttrs&&a().has(this.sessionAttrs,e),r=this.syncedAttrs&&a().has(this.syncedAttrs,e);return!(!t&&!r)},hasRelation:function(e){const t=this.sessionRelations&&a().has(this.sessionRelations,e),r=this.syncedRelations&&a().has(this.syncedRelations,e);return!(!t&&!r)},hasDerived:function(e){return!(!this.derivedAttrs||!a().has(this.derivedAttrs,e))},hasContext:function(e){return this.getContextNames().includes(e)},validate:function(e,t){const r=a().extend({},this.sessionAttrs,this.syncedAttrs,this.sessionRelations,this.syncedRelations),n=this._validateTypes(e,r);return n&&(0,g.Z)(!1,n),n},parse:function(e,t){return t&&t.save&&!this.hasResponseOnSave?this.attributes:(this.name,this.convert(e,t))},parseResponse(e){let t=e;const r=a().result(this,"responseType");let n;return a().isString(t)&&(n=!0,a().isFunction(this.augmentResponseText)&&(t=this.augmentResponseText(t,r)),t=r.parse(t)),t=null!=t?t:{},r===p.AV&&t.MediaContainer&&(t=t.MediaContainer),a().isFunction(this.augmentResponse)&&(t=this.augmentResponse(t,r)),n&&this.rootPropertyName&&a().has(t,this.rootPropertyName)&&(t=t[this.rootPropertyName]),Array.isArray(t)&&(t=t[0]),t},convert:function(e,t){const r=this.parseResponse(e),n={};let i;a().each(this.sessionAttrs,(function(e,t){a().has(r,t)&&(n[t]=r[t])})),a().each(this.syncedAttrs,(function(e,t){if(a().has(r,t)){let i,s=e;s.typeName||(s=e.type,i=a().omit(e,"type")),n[t]=null==r[t]?r[t]:s.parse(r[t],i)}else this.has(t)&&(i||(i=a().result(this,"defaults")),n[t]=i&&a().has(i,t)?i[t]:void 0)}),this);const s=a().extend({},t,{parse:!0});return a().extend(n,this._getRelations(this.syncedRelations,r,s)),n},save:function(e,t,r){let n;null==e||"object"==typeof e?(n=e,r=t):(n={})[e]=t;const s=a().extend({save:!0},r),o=a().extend(this.getSaveParams(n),s.data);if(a().isEmpty(o))return s.success&&s.success(this),i().Deferred().resolve(this);s.data=o;const c=s.success;return s.success=function(e,t,r){e.cache&&e.cache.store(e),c&&c(e,t,r)},l.ZP.Model.prototype.save.call(this,n,s)},sync:function(e,t,r){const n=r?a().clone(r):{};if("create"===e||"update"===e){const e=n.data,t=n.url||a().result(this,"saveUrl")||a().result(this,"syncUrl")||a().result(this,"url");n.url=b.Z.join(t,e),n.data=""}return l.ZP.Model.prototype.sync.call(this,e,t,n)},getSaveParams:function(e){const t=this._getSaveAttrs(e);return a().reduce(t,(function(e,t,r){const n=t.definition;let i=t.value,s=r;if(!n)return e[s]=i,e;const o=n.relationClass;if(o){const e=o.prototype.model;let t;n.rootPropertyName?t=n.rootPropertyName:i&&i.rootPropertyName?t=i.rootPropertyName:e&&e.prototype&&(t=e.prototype.rootPropertyName),i&&(i=i.getSaveParams()),t&&(s=t)}else{let e,t;a().has(n,"type")?(e=n.type,t=a().omit(n,"type")):e=n,i=e.stringify(i,t)}return e[s]=i,e}),{},this)},startCapturingChangeEvents:function(){if(this.releaseCapturedChangeEvents)return void(0,g.Z)(!1,this.name+" is already capturing events");const e=this.set,t=[],r=a().clone(this.attributes);this.set=function(r,n,i){const s=a().extend({},i,{silent:!0});let o;return"object"==typeof r?(o=r,i=n):(o={})[r]=n,a().each(o,(function(r,n){this.get(n)!==r&&(t.push({key:n,value:r}),e.call(this,n,r,s))}),this),a().each(this._derivedListeners,(function(r){const n=r.key,i=this.derivedAttrs[n].call(this);this.get(n)!==i&&(t.push({key:n,value:i}),e.call(this,n,i,s))}),this),this},this.releaseCapturedChangeEvents=function(){this.set=e,this.releaseCapturedChangeEvents=null,this.discardCapturedChangeEvents=null,this._previousAttributes=r,this._changing=!0,a().each(t,(function(e){this.trigger("change:"+e.key,this,e.value)}),this),this._changing=!1,a().isEmpty(t)||this.trigger("change",this,{})},this.discardCapturedChangeEvents=function(){this.set=e,this.releaseCapturedChangeEvents=null,this.discardCapturedChangeEvents=null,t.length=0}},spyOnGet:function(e){const t=[],r=this.get;return this.get=function(e){return t.push("change:"+e),this.hasRelation(e)&&t.push("change:"+e+".change"),r.apply(this,arguments)},e.call(this),this.get=r,t},dispatch:function(e){},_mergeAttributes:function(e){const t=this.mergeStrategy;return t?a().reduce(e,(function(e,r,n,i){return e[n]=t(n,this.get(n),r),e}),{},this):e},_resolveRelationDefinition:function(e){return a().isFunction(e)?e.call(this):e},_getRelations:function(e,t,r){t||(t={}),r||(r={});const n={};return a().each(e,(function(e,i){const s=this._resolveRelationDefinition(e),o=s.relationClass;(0,g.Z)(o,this.name+" requires a `relationClass` for the "+i+" relation");let c=i;r.parse&&!a().has(t,i)&&a().has(s,"rootPropertyName")&&(c=s.rootPropertyName);let d=t[c];if(d instanceof o)return void(n[i]=d);if(!d&&s.deferred)return void(n[i]=void 0);let u=r.reset?null:this.get(i),p=u instanceof o;const m=o.prototype instanceof l.ZP.Collection;if(m?d=v.Z.parseArray(d):d||(d={}),p&&!m&&(r.parse&&(d=u.parse(d)),p=u.id===d[u.idAttribute||"id"]),p){u.isMergingAttributes=this.isMergingAttributes;let e=s.setOptions;a().isFunction(e)&&(e=e.call(this,r)),m?u.set(d,a().extend({parse:r.parse,remove:!this.isMergingAttributes},e)):u.set(d,a().extend({merge:!0},e)),u.isMergingAttributes=!1}else{const e={parse:r.parse};if(this.getContextNames().forEach((t=>{e[t]=this[t]})),!m){let e=s.attrs;a().isFunction(e)&&(e=e.call(this,t)),d=a().extend({},d,e)}let n=s.options;a().isFunction(n)&&(n=n.call(this,t)),a().extend(e,{parent:this},n),u=new o(d,e)}n[i]=u}),this),n},_forwardRelationEvents:function(e,t){const r=["sync","request","invalid","error","add","remove"];function n(){const n=arguments[0];if("change"===n)return;if("statechange"===n)return void(this.shouldUpdateRelationState.apply(this,a().rest(arguments,1))&&f.GF(this.updateState,this));const i=a().toArray(arguments);i[0]="change:"+t+"."+n,this.trigger.apply(this,i),a().contains(r,n)||(this.trigger("change:"+t+".change",this,e),this.trigger("change",this))}e.on("all",n,this),this._relationListeners[t]=n},_setDerived:function(e,t){let r;const n=this.spyOnGet((function(){const n=this.set;this.set=function(){(0,g.Z)(!1,this.name+" blocked `set` in the "+t+" attribute. Derived attributes are read-only.")},r=e.call(this),this.set=n}));this.set(t,r),a().each(n,(function(r){this._addDerivedListener(t,r,e)}),this)},_addDerivedListener:function(e,t,r){this._derivedListeners||(this._derivedListeners=[]);const n={key:e,name:t,callback:a().bind(this._setDerived,this,r,e)};a().findWhere(this._derivedListeners,{key:e,name:n.name})||(this._derivedListeners.push(n),this.on(n.name,n.callback))},_getSaveAttrs:function(e){let t;if(e)t=a().reduce(e,(function(e,t,r){return e[r]={definition:this.syncedAttrs[r],value:t},e}),{},this);else{const e=a().extend({},this.syncedAttrs,this.syncedRelations);t=a().reduce(e,(function(e,t,r){const n=this._resolveRelationDefinition(t);let i=n.save;return a().isFunction(i)&&(i=i.call(this)),i&&(e[r]={definition:n,value:this.get(r)}),e}),{},this)}return t},_validateTypes:function(e,t){const r=Object.keys(e),n=a().reduce(r,(function(r,n){if(this.hasDerived(n))return r;if(!a().has(t,n))return r.push(this.name+" received an unknown attribute: "+n+". All attributes must be defined in `sessionAttrs`, `syncedAttrs`, `sessionRelations`, or `syncedRelations`."),r;const i=e[n],s=this._resolveRelationDefinition(t[n]),o=s.relationClass;let c;c=o?this.hasInitialRelations?d.Z.instanceOf(o):o.prototype instanceof l.ZP.Collection?d.Z.oneOfType(d.Z.array,d.Z.object):d.Z.object:s.type?s.type:s;const u=c.validate;return u?u(i)||r.push(n+" of type "+c.typeName+" has an invalid value: "+JSON.stringify(i)):r.push(n+" has an unknown type. Specify the type in the attribute definition or use attrTypes.any as a wildcard type."),r}),[],this);if(n.length>0)return n.join("\n")},onEvent:function(e,t,r){if(!t)return void y.Z.warn("Unable to handle",e);const n=e.match(Z);if(!n)return;const i=n[1];t.get(i)!==this.state[i]&&(r&&r.updateEntity&&r.updateEntity(),f.GF(this.updateState,this))}})},87947:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(37474),l=r(84915),c=r(98065),d=r(10644),u=r(20683);const p=o.ZP.Collection.extend({mixins:[l.Z],cache:new c.Z,constructor:function(e,t){if(t||(t={}),this.server=t.server,this.section=t.section,this.channel=t.channel,this.device=t.device,this.parent=t.parent,this.allowInCache=t.allowInCache,this.persistInCache=t.persistInCache,this.skipCache=t.skipCache,t.url&&(this.url=t.url),t.path&&(this.path=t.path),null==t.pageStart&&null==t.pageSize||(this.pageStart=t.pageStart||0,this.pageSize=t.pageSize||0),t.populated&&this.resetPopulatePromise(i().Deferred().resolve().promise()),!t.allowInCache&&!t.persistInCache)return void o.ZP.Collection.prototype.constructor.apply(this,arguments);this.initialize.apply(this,arguments);const r=this.cache.getItemCacheKey(this);let n=this.cache.get(r);if(this.uninitialize(),t.onlyIfCached&&(n||(n={})),n)return n;o.ZP.Collection.prototype.constructor.apply(this,arguments),this.cache.store(this,r)},uninitialize:function(){this.stopListening()},sync:function(){return(this.allowInCache||this.persistInCache)&&this.cache.store(this),o.ZP.sync.apply(this,arguments)},syncUrl:function(){let e="";if(this.url&&(e=a().result(this,"url")),this.path&&(e=u.Z.join([e,a().result(this,"path")])),null!=this.pageStart||null!=this.pageSize){const t=this.pageStart||0,r=this.pageSize||0,n={};n["X-Plex-Container-Start"]=t,n["X-Plex-Container-Size"]=r,e=u.Z.join(e,n)}return e},convert:function(e,t){const r=a().isObject(e)?e:d.Z.parseXML(e);if(!t)return r;let n=r[t];return n?(Array.isArray(n)||(n=[n]),n):[]},clone:function(e){const t={server:this.server,section:this.section,parent:this.parent,url:this.url};return e||(e=this.models),new this.constructor(e,t)},cloneDeep:function(e){return e||(e=this.map((function(e){return e.clone()}))),this.clone(e)},clear:function(e){e=a().extend({silent:!0},e),this.abortPendingPopulate(),this.resetPopulatePromise(null),this.reset([],e)}});p.extend=function(){const e=o.ZP.Collection.extend.apply(this,arguments);return e.prototype.cache=new c.Z,e};const m=p},54122:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(37474),l=r(84915),c=r(33184),d=r(32903),u=r(10644),p=r(20683);const m=o.ZP.Model.extend({mixins:[l.Z],cache:new c.Z,constructor:function(e,t){e||(e={}),t||(t={}),this.server=this.findOption(t,"server"),this.section=this.findOption(t,"section"),this.channel=this.findOption(t,"channel"),this.device=this.findOption(t,"device"),this.parent=this.findOption(t,"parent");const r=this.findOption(t,"skipCache");if(r)return void o.ZP.Model.prototype.constructor.apply(this,arguments);const n=this.cache.getItemCacheKey(this,e),i=this.cache.get(n);if(i)return t.parse&&(e=i.parse(e)),this.preserveCachedAttributes&&this.preserveCachedAttributes(t.url)?a().each(e,(function(e,t){a().isUndefined(i.get(t))&&!a().isUndefined(e)&&i.set(t,e)})):i.set(e),i.server=this.server||i.server,i.section=this.section||i.section,i.channel=this.channel||i.channel,i.device=this.device||i.device,i.parent=this.parent||i.parent,t.collection&&(i.collection=t.collection),i;const s=this.findOption(t,"onlyIfCached");if(s)return{};o.ZP.Model.prototype.constructor.apply(this,arguments),this.cache.store(this,n)},findOption:function(e,t){return e[t]||e.collection&&e.collection[t]},clone:function(){const e={server:this.server,section:this.section,channel:this.channel,parent:this.parent,skipCache:!0};return new this.constructor(this.attributes,e)||null},convert:function(e){return a().isObject(e)?e:u.Z.parseXML(e)},parse:function(e,t){let r=this.convert(e);return this.whitelistedAttrs&&(r=a().pick(r,this.whitelistedAttrs)),r},save:function(e,t,r){let n,s;const l=this.attributes;null==e||"object"==typeof e?(n=e,r=t):(n={})[e]=t,r=a().extend({validate:!0},r);const c=this.getSaveParams(n,r);if(a().extend(c,r.data),n&&!r.wait){if(!this.set(n,r))return!1}else if(!this._validate(n,r))return!1;if(n&&r.wait&&(this.attributes=a().extend({},l,n)),a().isEmpty(c)&&!r.force)return r.success&&r.success(this),i().Deferred().resolve(this);void 0===r.parse&&(r.parse=!0);const d=this,u=r.success;r.success=function(e){if(d.attributes=l,e){let t=d.parse(e,r);if(r.wait&&(t=a().extend(n||{},t)),a().isObject(t)&&!d.set(t,r))return!1;d.cache.store(d)}u&&u(d,e,r),d.trigger("sync",d,e,r)},o.ZP.wrapError(this,r),s=this.isNew()?"create":r.patch?"patch":"update","patch"===s&&(r.attrs=n);const m=a().result(this,"saveUrl")||a().result(this,"url");a().isEmpty(c)||(r.url=p.Z.join(m,c)),r.data="";const h=this.sync(s,this,r);return n&&r.wait&&(this.attributes=l),h},getSaveParams:function(e,t){return this.isNew()?e||this.toJSON():this.changedAttributes(e)||{}},getScopedKey:function(e){return null!=e&&a().isFunction(this.cacheKey)?this.cacheKey(this.attributes)+"!"+e:e},restoreDefaults:function(e){const t=a().result(this,"defaults");if(!t)return this.clear(e);const r=this.attributes;let n;for(n in r)n in t||this.unset(n,e);return this.set(t,e),this},startCapturingChangeEvents:function(){if(this.releaseCapturedChangeEvents)return void(0,d.Z)(!1,"This model is already capturing events");const e=this.set;let t={};this.set=function(r,n,i){let s;"object"==typeof r?(s=r,i=n):(s={})[r]=n;const o=a().extend({},i,{silent:!0}),l=e.call(this,s,o);return a().extend(t,this.changed),l},this.releaseCapturedChangeEvents=function(){a().each(t,(function(e,t){this.trigger("change:"+t,this,e)}),this),a().isEmpty(t)||this.trigger("change",this,{}),t={},this.set=e,this.releaseCapturedChangeEvents=null}}});m.extend=function(){const e=o.ZP.Model.extend.apply(this,arguments);return e.prototype.cache=new c.Z,e};const h=m},90573:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(8238),i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e,t){var r;return n.Z.shouldCreateFlexModels&&(e.prototype.sessionRelations=(r=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({},e.prototype.sessionRelations),s(r,a({desktop:t})))),e}},96830:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=[]},18655:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(13469),i=r.n(n),s=r(3615),a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m=["boolean","integer","float","string","object","array"];function h(e){return!0}function g(e){return i().isObject(e)&&!Array.isArray(e)}function y(e,t){t||(t={});const r=i().defaults(t,{typeName:e,parse:i().bind(s.Z.parseType,s.Z,e),stringify:i().bind(s.Z.stringifyType,s.Z,e)});var n,a,m;return r.validate=t.validate?(n=t.validate,function(e){return null==e||n(e)}):h,r.isRequired=(a=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({},r),m={validate:e=>null!=e&&r.validate(e),typeName:`${r.typeName}<required>`},o(a,l(m))),r}const v={any:y("any"),boolean:y("boolean",{validate:i().isBoolean}),integer:y("integer",{validate:Number.isInteger}),float:y("float",{validate:i().isNumber}),string:y("string",{validate:i().isString}),object:y("object",{validate:g}),array:y("array",{validate:Array.isArray}),list:y("list",{validate:Array.isArray}),encodedString:y("encodedString",{validate:i().isString}),queryString:y("queryString",{validate:g}),instanceOf:function(){const e=i().toArray(arguments);return y("instanceOf",{validate:function(t){return i().some(e,(function(e){return t instanceof e}))}})},oneOf:function(){const e=i().toArray(arguments);return y("oneOf",{validate:function(t){return i().contains(e,t)}})},oneOfType:function(){const e=i().toArray(arguments);return y("oneOfType",{validate:function(t){return i().some(e,(function(e){return e.validate(t)}))}})},custom:function(e){return y("custom",{validate:e})},getAttrTypeFor:function(e){if(null==e)return v.any;for(let t=0,r=m.length;t<r;t++){const r=v[m[t]];if(r.validate(e))return r}return v.any}},f=v},8238:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(5583),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e};const d=r(84010).Z,u=c(c({allowFlash:!1,testPrivateConnectionsWhenPublicAddressDoesNotMatch:!0,allowHttpsMediaServerConnections:!1,allowMediaServerRelayConnections:!1,allowLoopbackDiscovery:!1,allowIPv6ServerConnections:!1,allowSSO:!1,allowMixedContent:!1,allowBaseImagePreloading:!0,allowBaseImageBlobs:!0,heartbeatInterval:1e4,allowManualServers:!1,allowMobileServers:!1,allowMultiTrackAudio:!1,maximumConcurrentConnectionTests:5,shouldCreateFlexModels:!1,shouldCreateStateTree:!1,requiresSignIn:!0,requiresPlexPass:!1,myPlexAccessToken:null,primaryServer:null,shouldCreateNewSessionWhenSeekingLiveTV:!1,shouldPreferInsecureLocalConnections:!1,shouldRequestHTMLFromCloudProvider:!1,allowLiveTVPlayback:!0,seekDebounceMilliseconds:null,allowSyncSettings:!1,allowAdsOverMedia:!0,drmType:n.NONE},d),window.PLEXWEB),p=Object.freeze(u)},37233:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(32975),i=r(44073);const s=n.Z.extend({name:"PlayQueueItemCollection",context:["server","provider","identifier","mediaTagPrefix","mediaTagVersion"],model:i.Z})},44073:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(13469),i=r.n(n),s=r(13220),a=r(18655),o=r(53998),l=r(22094);const c={exclusiveBoolAttr(e){this.listenTo(this,"change:"+e,((t,r)=>{r&&this.each((n=>{n.set(e,n===t&&r)}))}))}};var d=r(32975),u=r(78449),p=r(71273),m=r(20683);const h=s.Z.extend({name:"LyricsSpanModel",context:["server","section"],sessionAttrs:{active:a.Z.boolean},syncedAttrs:{startOffset:a.Z.integer,endOffset:a.Z.integer,text:a.Z.string},defaults:{startOffset:-1,endOffset:-1},isPositionWithin(e){const t=this.get("startOffset"),r=this.get("endOffset");return-1!==t&&(e>=t&&(e<=r||-1===r))}}),g=d.Z.extend({name:"LyricsSpanCollection",context:["server","section"],model:h}),y=s.Z.extend({name:"LyricsLineModel",context:["server","section"],syncedAttrs:{startOffset:a.Z.integer,endOffset:a.Z.integer},syncedRelations:{spans:{relationClass:g,rootPropertyName:"Span"}},defaults:{startOffset:-1,endOffset:-1}}),v=d.Z.extend({name:"LyricsLineCollection",context:["server","section"],model:y,eachSpan(e){this.each((t=>{t.get("spans").each(e)}))}}),f=s.Z.extend({name:"LyricsStreamModel",context:["server","provider","section"],responseType(){var e;return(null==(e=this.server)?void 0:e.get("isCloud"))?p.AV:p.Ls},rootPropertyName:"Lyrics",mergeStrategy:u.Z,url(){var e;return(null==(e=this.server)?void 0:e.get("isCloud"))?this.get("key"):m.Z.join(this.get("key"),{format:"xml"})},sessionAttrs:{follow:a.Z.boolean,lyricsError:a.Z.object},syncedAttrs:{id:a.Z.string,key:a.Z.string,streamType:a.Z.integer,index:a.Z.integer,title:a.Z.string,selected:a.Z.boolean,codec:a.Z.string,provider:a.Z.string,format:a.Z.string,minLines:a.Z.integer,timed:a.Z.boolean},syncedRelations:{lines:{relationClass:v,rootPropertyName:"Line"}},defaults:{follow:!0,selected:!1,lyricsError:null}}),b=d.Z.extend({mixins:[c],name:"LyricsStreamCollection",context:["server","provider","section"],model:f,initialize(){this.exclusiveBoolAttr("selected")}});var Z=r(33184),S=r(3615),P=r(82650),I=r(35387),E=r(14427);const w=s.Z.extend({name:"PlayQueueItemModel",context:["server","provider"],syncedAttrs:{internal:a.Z.boolean,url:a.Z.string}}),C=s.Z.extend({name:"PlayQueueItemModel",context:["server","provider","identifier","mediaTagPrefix","mediaTagVersion"],entityType:I.PI,entityID(e=this.state){return(0,P.Z)(this.entityType,e.playQueueItemID,this.server.entityID())},idAttribute:"playQueueItemID",cache:new Z.Z,cacheKey(e){return this.server&&this.server.getScopedKey(e.playQueueItemID)},sessionAttrs:{isPlayQueueItem:a.Z.boolean,isLocal:a.Z.boolean},syncedAttrs:{playQueueItemID:a.Z.string,queueIndex:a.Z.integer,key:a.Z.string,ratingKey:a.Z.string,type:a.Z.string,subtype:a.Z.string,advertisement:a.Z.boolean,allowSkipAfter:a.Z.integer,librarySectionID:a.Z.string,hasPremiumLyrics:a.Z.boolean,displayPostplay:a.Z.boolean,syncItemId:a.Z.integer,generatorID:a.Z.integer,generatorType:a.Z.integer,clientIdentifier:a.Z.string,target:a.Z.string},syncedRelations:{metadataItem:{relationClass:l.Z,deferred:!0},lyricsStreams:{relationClass:b,deferred:!0},vast:{relationClass:w,deferred:!0}},sessionRelations:{postPlay:{relationClass:o.Z,options(){return{url:`hubs/metadata/${this.get("metadataItem").id}/postplay`}}}},defaults:{isPlayQueueItem:!0,isLocal:!1},augmentResponse(e){const t=i().pick(e,Object.keys(this.syncedAttrs));e.Ad&&(Array.isArray(e.Ad)&&(e.Ad=e.Ad[0]),t.vast=e.Ad),t.metadataItem=e;const r=i().first(S.Z.parseArray(e.Media));if(r){const e=i().first(S.Z.parseArray(r.Part));if(e){const r=S.Z.parseArray(e.Stream);if(r){const e=E.Z.get("lyrics");t.lyricsStreams=i().filter(r,(t=>S.Z.parseInteger(t.streamType)===e.id))}}}return t}})},51196:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(13220),i=r(18655),s=r(37233),a=r(71273),o=r(62682),l=r(49688);const c=n.Z.extend({name:"PlayQueueModel",context:["server","provider","identifier","mediaTagPrefix","mediaTagVersion"],responseContext:["identifier","mediaTagPrefix","mediaTagVersion"],responseType(){return(0,o.Z)(this.server)},idAttribute:"playQueueID",hasResponseOnSave:!0,urlRoot(){return this.get("key")},sessionAttrs:{key:i.Z.string,type:i.Z.string,repeat:i.Z.boolean,own:i.Z.boolean,isUpdatePending:i.Z.boolean,isUniversal:i.Z.boolean},syncedAttrs:{allowShuffle:i.Z.boolean,playQueueID:i.Z.string,playQueueSelectedItemOffset:i.Z.integer,playQueueSelectedItemID:i.Z.string,playQueueSelectedMetadataItemID:i.Z.string,playQueueLastAddedItemID:i.Z.string,playQueueShuffled:i.Z.boolean,playQueueSourceURI:i.Z.string,playQueueTotalCount:i.Z.integer,playQueueVersion:i.Z.integer},syncedRelations:{playQueueItems:{relationClass:s.Z,rootPropertyName:"Metadata"}},derivedAttrs:{canShuffle(){const e=-1!==(this.get("playQueueSourceURI")||"").indexOf("library://x/station");return!this.get("playQueueLastAddedItemID")&&this.get("allowShuffle")&&!e},currentIndex(){const e=this.get("playQueueItems"),t=this.get("playQueueSelectedItemID"),r=e.get(t);return e.indexOf(r)},length(){const e=this.get("playQueueTotalCount")||0,t=this.get("playQueueItems")||[];return Math.max(e,t.length)}},defaults:{repeat:!1,own:!0,isUpdatePending:!1,isUniversal:!1,allowShuffle:!0},augmentResponseText:(e,t)=>t===a.Ls?(0,l.Z)(e):e,augmentResponse(e,t){return this.responseContext.forEach((t=>{const r=e[t];void 0!==r&&this.setContext(t,r)})),e}})},72127:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(13469),i=r.n(n),s=r(32975),a=r(20683),o=r(73306);const l=s.Z.extend({name:"FilterCollection",context:["server","section","includeAdvanced"],model:o.Z,comparator:"filterType",includeAdvanced:!0,url(){const e=i().result(this.section,"url"),t=this.section.get("currentType"),r={includeAdvanced:this.includeAdvanced?1:0};return t&&(r.type=t.id),a.Z.join([e,"/filters"],r)},findUnwatchedFilter(){return this.get("unwatched")||this.get("unwatchedLeaves")}})},73306:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(13220),i=r(18655),s=r(60934);const a=n.Z.extend({name:"FilterModel",context:["server","section","type","standalone"],idAttribute:"filter",rootPropertyName:"Directory",defaults:{advanced:!1},syncedAttrs:{filter:i.Z.string,filterType:i.Z.string,type:i.Z.string,key:i.Z.string,title:i.Z.string,advanced:i.Z.boolean},syncedRelations:{options:{relationClass:s.Z}}})},60934:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(13469),i=r.n(n),s=r(32975),a=r(20683),o=r(13220),l=r(18655);const c=o.Z.extend({name:"FilterOptionModel",context:["server","section","type","standalone"],idAttribute:"key",rootPropertyName:"Directory",syncedAttrs:{key:l.Z.encodedString,type:l.Z.string,field:l.Z.string,value:l.Z.string,title:l.Z.string},augmentResponse:e=>(e.fastKey?(e.value=e.key,e.key=e.fastKey,e.field=e.type,delete e.type,delete e.fastKey):e.fastKey||e.value||(e.value=e.key),e)}),d=s.Z.extend({name:"FilterOptionCollection",context:["server","provider","section","type","standalone","includeExternalMedia"],model:c,url(){let e;this.type?e={type:this.type}:this.standalone||(e=this.getUrlParams());const t=i().result(this.section,"url");return a.Z.join([t,this.parent.id],e)},getUrlParams(){const e={},t=[],r=this.section.get("currentType"),n=this.section.get("currentFilters");return r&&(e.type=r.id),i().each(n,(t=>{t.key!==this.parent.id&&t.values.length&&(e[t.key]=t.values.join(","))})),i().each(e,((e,r)=>{"unviewedLeafCount"===r?t.push(`${r}>=${e}`):t.push(`${r}=${e}`)})),t.join("&")},augmentResponse:e=>(e.Directory&&!Array.isArray(e.Directory)&&(e.Directory=[e.Directory]),e.Directory=i().filter(e.Directory,(e=>e.title)),e),search(e){const t=this.filter((t=>t.get("title").toLowerCase().indexOf(e.toLowerCase())>-1));return this.clone(t)}})},89883:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(13220),i=r(18655),s=r(62682),a=r(73788),o=r(20683),l=r(32975);const c=n.Z.extend({name:"LibraryDirectoryModel",context:["server"],idAttribute:"key",rootPropertyName:"Directory",syncedAttrs:{key:i.Z.string,title:i.Z.string}}),d=l.Z.extend({name:"LibraryDirectoryCollection",context:["server"],model:c});var u=r(68131),p=r(28481);const m=n.Z.extend({name:"LibraryDetailsModel",context:["server","provider","includeAdvanced"],responseType(){return(0,s.Z)(this.server)},url(){const e={includeDetails:1};return this.includeAdvanced&&(e.includeAdvanced=1),o.Z.join(this.get("key"),e)},sessionAttrs:{key:i.Z.string.isRequired},syncedAttrs:{librarySectionID:i.Z.string},syncedRelations:{directories:{relationClass:d,rootPropertyName:"Directory"},types:{relationClass:p.Z,rootPropertyName:"Type"},fieldTypes:{relationClass:u.Z,rootPropertyName:"FieldType"}},augmentResponse(e){if(e.Directory&&e.Directory.length&&e.Directory.some((({key:e})=>"folder"===e))&&e.Type&&e.Type.length&&e.Type.every((({type:e})=>"folder"!==e))){const t=e.librarySectionID;e.Type.push({key:`/library/sections/${t}/folder`,type:"folder",title:(0,a.Z)("Folders")})}return e}})},68131:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(32975),i=r(13220),s=r(18655);const a=i.Z.extend({name:"OperatorModel",context:["server"],idAttribute:"key",rootPropertyName:"Operator",syncedAttrs:{key:s.Z.string,title:s.Z.string}}),o=n.Z.extend({name:"OperatorCollection",context:["server"],model:a}),l=i.Z.extend({name:"MetadataFieldTypeModel",context:["server"],idAttribute:"type",rootPropertyName:"FieldType",syncedAttrs:{type:s.Z.string.isRequired},syncedRelations:{operators:{relationClass:o,rootPropertyName:"Operator"}}}),c=n.Z.extend({name:"MetadataTypeCollection",context:["server"],model:l})},28481:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(32975),i=r(13220),s=r(18655);const a=i.Z.extend({name:"FieldModel",context:["server"],idAttribute:"key",rootPropertyName:"Field",syncedAttrs:{key:s.Z.string,title:s.Z.string,type:s.Z.string,subType:s.Z.string}}),o=n.Z.extend({name:"FieldCollection",context:["server"],model:a});var l=r(72127),c=r(20297);const d=i.Z.extend({name:"MetadataTypeModel",context:["server"],idAttribute:"key",rootPropertyName:"Type",syncedAttrs:{type:s.Z.string,subtype:s.Z.string,key:s.Z.string,title:s.Z.string,context:s.Z.string},syncedRelations:{filters:{relationClass:l.Z,rootPropertyName:"Filter"},sorts:{relationClass:c.Z,rootPropertyName:"Sort"},fields:{relationClass:o,rootPropertyName:"Field"}}}),u=n.Z.extend({name:"MetadataTypeCollection",context:["server"],model:d})},90926:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(32975),i=r(62682),s=r(96799);const a=n.Z.extend({name:"SectionCollection",context:["server"],model:s.Z,url:"/library/sections",responseType(){return(0,i.Z)(this.server)}})},96799:(e,t,r)=>{"use strict";r.d(t,{Z:()=>L});var n=r(13469),i=r.n(n),s=r(13220),a=r(18655),o=r(20917),l=r(85209),c=r(20683),d=r(60526);const u={unviewedLeafCount:">="},p=d.Z.extend({name:"SectionMetadataListModel",context:["server","section","identifier","mediaTagPrefix","mediaTagVersion","allowSync"],url(){let e,t,r=[];const n=this.section.get("currentFolderKey");if(n)r.push(n);else if(r.push(i().result(this.section,"url")),e=this.section.get("currentSubset").id,this.section.get("allowAdvancedFilters"))"recentlyAdded"!==e&&"newest"!==e||(e="all"),r.push(e),t=this.getParams();else{const t=this.section.get("currentFilters");t.length?r=[t[0].values[0]]:r.push(e)}let s=c.Z.join(r,t);return s=this.replaceSpecialFilterOperators(s),this.set("containerKey",s),this.server.get("isFullServer")?this.getPaginatedUrl(s):s},getParams(){const e=this.getFilterParams(),t=this.getMetadataTypeID(),r=this.getSort();return t&&t!==(0,l.getMetadataType)("photo").id&&(e.type=t),r&&(e.sort=r),this.section.get("refreshing")&&this.server.supports("timelineState")&&(e.timelineState=1),e},getFilterParams(){const e=this.section.get("currentFilters"),t={};return i().each(e,(e=>{e.values.length&&(t[e.key]=e.values.map(decodeURIComponent).join(","))})),t},getMetadataTypeID(){const e=this.section.get("currentSubset").id;let t=this.section.get("currentType").id||(0,l.getMetadataType)(this.section.get("type")).id;return/^(onDeck|recentlyAdded|recentlyViewed|newest)$/.test(e)?t===(0,l.getMetadataType)("show").id||t===(0,l.getMetadataType)("season").id?t=(0,l.getMetadataType)("episode").id:t!==(0,l.getMetadataType)("artist").id&&t!==(0,l.getMetadataType)("track").id||(t=(0,l.getMetadataType)("album").id):/^recentlyViewedShows$/.test(e)&&(t=(0,l.getMetadataType)("show").id),t},getSort(){const e=this.section.get("currentSort"),t=this.section.get("currentSubset").id;return"recentlyAdded"===t?"addedAt:desc":"newest"===t?"originallyAvailableAt:desc":e?(e.get("direction")||e.get("defaultDirection"))===o.Z.directions.DESCENDING?e.get("descKey"):e.get("key"):void 0},replaceSpecialFilterOperators:e=>(i().each(u,((t,r)=>{e=e.replace(r+"=",r+t)})),e)});var m=r(53611),h=r(33184),g=r(82650),y=r(35387),v=r(43523),f=r(73788);const b=(0,r(84140).Z)(["key"],[{key:"all",title:()=>(0,f.Z)("All")},{key:"unwatched",title:()=>(0,f.Z)("Unplayed")},{key:"newest",title:()=>(0,f.Z)("Recently Released")},{key:"recentlyAdded",title:()=>(0,f.Z)("Recently Added")},{key:"recentlyViewed",title:()=>(0,f.Z)("Recently Viewed")},{key:"recentlyViewedShows",title:()=>(0,f.Z)("Recently Viewed Shows")},{key:"onDeck",title:()=>(0,f.Z)("On Deck")},{key:"folder",title:()=>(0,f.Z)("By Folder")}]);var Z=r(72127),S=r(32975),P=r(62682);const I=s.Z.extend({name:"FirstCharacterModel",context:["server","provider","section"],idAttribute:"key",rootPropertyName:"Directory",syncedAttrs:{key:a.Z.string,title:a.Z.string,size:a.Z.integer},urlRoot(){return`/library/sections/${this.section.id}/firstCharacter`}}),E=S.Z.extend({name:"FirstCharacterCollection",context:["server","provider","section"],model:I,responseType(){return(0,P.Z)(this.server)},url(){const e=i().result(this.section,"url")+"/firstCharacter",t=this.getUrlParams();return t?e+"?"+t:e},getUrlParams(){const e={},t=[],r=this.section.get("currentType");r&&(e.type=r.id);const n=this.section.get("currentFilters");return i().each(n,(t=>{t.values.length&&(e[t.key]=t.values.join(","))})),i().each(e,((r,n)=>{"unviewedLeafCount"===n?t.push(`${n}>=${e[n]}`):t.push(`${n}=${e[n]}`)})),t.join("&")}});var w=r(60934);const C=s.Z.extend({name:"LinearFilterModel",context:["server","section"],idAttribute:"key",rootPropertyName:"Directory",syncedAttrs:{secondary:a.Z.boolean,key:a.Z.string,title:a.Z.string},syncedRelations:{options:{relationClass:w.Z}},defaults:{secondary:!1}}),M=S.Z.extend({name:"LinearFilterCollection",context:["server","section"],model:C,url(){return i().result(this.section,"url")},filterBySecondary(){const e=this.filter((e=>e.get("secondary")));return this.clone(e)}}),D=s.Z.extend({name:"LocationModel",context:["server","section"],rootPropertyName:"Location",syncedAttrs:{id:a.Z.integer,path:{type:a.Z.string,save:!0}}}),O=S.Z.extend({name:"LocationCollection",context:["server","section"],model:D}),T=s.Z.extend({name:"MediaTypeModel",context:["server","section"],sessionAttrs:{id:a.Z.integer,typeString:a.Z.string,title:a.Z.string,plural:a.Z.string,mediaType:a.Z.string,child:a.Z.string,parent:a.Z.string,selected:a.Z.boolean},defaults:{selected:!1}}),x=S.Z.extend({name:"MediaTypeCollection",context:["server","section"],model:T}),A=["all","recentlyAdded","recentlyViewed","recentlyViewedShows","onDeck","newest","folder"],k=s.Z.extend({name:"SectionSubsetModel",context:["server","section"],idAttribute:"key",rootPropertyName:"Directory",sessionAttrs:{selected:a.Z.boolean},syncedAttrs:{key:a.Z.string,title:a.Z.string,secondary:a.Z.boolean},derivedAttrs:{primary(){return!this.get("secondary")&&i().contains(A,this.get("key"))}},defaults:{selected:!1},augmentResponse:e=>("all"===e.key&&(e.title=(0,f.Z)("All")),e)},{whitelistedPrimaryKeySubsets:A}),N=S.Z.extend({name:"SectionSubsetCollection",context:["server","section"],model:k,url(){return i().result(this.section,"url")},filterPrimaries(){const e=this.filter((e=>e.get("primary")));return this.clone(e)}});var R=r(20297);const L=s.Z.extend({name:"SectionModel",context:["server"],entityType:y.Y3,entityID(e=this.state){return(0,g.Z)(this.entityType,e.key,this.server.entityID())},idAttribute:"key",rootPropertyName:"Directory",cache:new h.Z,persistInCache:!0,cacheKey(e){return this.server&&this.server.getScopedKey(e.key)},url(){return this.isNew()?i().result(this,"urlRoot")||i().result(this.collection,"url"):i().isNaN(parseInt(this.id,10))?this.id:"/library/sections/"+this.id},sessionAttrs:{isSection:a.Z.boolean,isCollectionsPopulated:a.Z.boolean,currentFilters:a.Z.array,currentFolderKey:a.Z.string,settings:a.Z.instanceOf(m.Z)},syncedAttrs:{key:a.Z.oneOfType(a.Z.string,a.Z.integer),uuid:a.Z.string,thumb:a.Z.string,art:a.Z.string,createdAt:a.Z.integer,updatedAt:a.Z.integer,allowAdvancedFilters:a.Z.boolean,allowSync:a.Z.boolean,refreshing:a.Z.boolean,name:{type:a.Z.string,save:!0},title:{type:a.Z.string,save:!0},type:{type:a.Z.string,save:!0},agent:{type:a.Z.string,save:!0},scanner:{type:a.Z.string,save:!0},language:{type:a.Z.string,save:!0},importFromiTunes:{type:a.Z.boolean,save:!0},enableAutoPhotoTags:{type:a.Z.boolean,save:!0}},derivedAttrs:{serverEntityID(){return this.state?this.server.entityID():""}},syncedRelations:{locations(){return{relationClass:O,rootPropertyName:"Location",options:{section:this},save:!0}}},sessionRelations:{items(){return{relationClass:p,options:{section:this}}},currentSubset(){return{relationClass:k,options:{section:this}}},currentFirstCharacter:()=>({relationClass:I,deferred:!0}),currentType:()=>({relationClass:T,deferred:!0}),currentSort:()=>({relationClass:o.Z,deferred:!0}),types(){return{relationClass:x,options:{section:this}}},subsets(){return{relationClass:N,options:{section:this}}},filters(){return{relationClass:this.get("allowAdvancedFilters")?Z.Z:M,options:{section:this}}},sorts(){return{relationClass:R.Z,options:{section:this}}},firstCharacters(){return{relationClass:E,options:{section:this}}}},defaults(){return{isSection:!0,isCollectionsPopulated:!1,currentType:null,currentFilters:[],currentSort:null,currentFirstCharacter:null,currentFolderKey:null,currentSubset:b.get("all"),settings:new m.Z([],{server:this.server,url:()=>c.Z.join(["/library/sections/",this.get("key"),"/prefs"])})}},initialize(e){this.updateMediaTypes(this,e.type),this.set({currentType:this.get("types").findWhere({typeString:e.type})}),this.on("change:type",this.updateMediaTypes,this)},uninitialize(){this.off("change:type",this.updateMediaTypes,this),this.stopListening()},augmentResponse:e=>(e.allowAdvancedFilters=!!e.filters,delete e.filters,e),getSectionType(){const e=this.get("type");return v.ZP.get(e)},getSaveParams(e){const t=s.Z.prototype.getSaveParams.apply(this,arguments);if("type"in t){const e=v.ZP.get(t.type);e&&(t.type=e.typeString)}return"title"in t&&(t.name=t.title,delete t.title),i().isObject(t.type)&&(t.type=t.type.typeString),"Location"in t&&(t.location=i().pluck(t.Location,"path"),delete t.Location),t},getSyncTitle(e){const t=this.get("title"),r=[],n=this.get("currentSubset"),s=this.get("currentFilters");return e?(i().each(e,(e=>{r.push(e.get("title"))})),t+": "+r.join(", ")):"all"!==n.id?t+": "+n.get("title"):s.length?(i().each(s,(function(e){r.push(e.titles.join(", "))})),t+": "+r.join(",")):t},setAgentAndScanner(e,t,r){const n=e.defaultAgents.find((e=>t.find((t=>t.get("identifier")===e)))),i=e.defaultScanners.find((e=>r.find((t=>t.get("name")===e))));this.set({agent:n,scanner:i})},updateMediaTypes(e,t){const r=(0,l.getRelatedTypes)(t);this.get("types").reset(r)}})},20297:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(13469),i=r.n(n),s=r(32975),a=r(20683),o=r(20917);const l=s.Z.extend({name:"SortCollection",context:["server","section","typeID"],model:o.Z,url(){const e=i().result(this.section,"url"),t=this.typeID||this.section.get("currentType").id,r=t?{type:t}:{};return a.Z.join([e,"/sorts"],r)}})},20917:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(13220),i=r(18655);const s={ASCENDING:"asc",DESCENDING:"desc"},a=n.Z.extend({name:"SortModel",context:["server","section"],idAttribute:"key",rootPropertyName:"Directory",sessionAttrs:{selected:i.Z.boolean,direction:i.Z.string},syncedAttrs:{key:i.Z.string,descKey:i.Z.string,title:i.Z.string,isDefault:i.Z.boolean,active:i.Z.boolean,defaultDirection:i.Z.string,activeDirection:i.Z.string,firstCharacterKey:i.Z.string},defaults:{selected:!1},augmentResponse:e=>(e.defaultDirection||(e.defaultDirection=e.default||s.ASCENDING),e.isDefault=!!e.default,e.direction||(e.direction=e.defaultDirection),e),reverseSortDirection(){let e=this.get("direction")||this.get("defaultDirection");e=e&&e!==s.ASCENDING?s.ASCENDING:s.DESCENDING,this.set("direction",e)}},{directions:s})},53998:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(13469),i=r.n(n),s=r(32975),a=r(71273),o=r(8523),l=r(62682),c=r(49688),d=r(64591),u=r(33494),p=r(20683),m=r(64135);const h=s.Z.extend({name:"HubCollection",context:["server","provider","section","identifier","hubKey","hubCount","count","includeEmpty","libraryHubsOnly","includeFeaturedTags","includeLibraryPlaylists","includeMeta","includeStations","includeExternalMedia","includeExternalMetadata","includeRecentChannels","asyncAugmentMetadata","excludes","excludeFields","excludeElements","allowSync","maxLength","wait"],responseContext:["identifier","allowSync"],model:m.Z,responseType(){return(0,l.Z)(this.server)},url(){let e="/hubs";this.hubKey?e=this.hubKey:this.section&&(e="/hubs/sections/"+encodeURIComponent(this.section.id));const t={};return""!==this.excludeFields&&(t.excludeFields=this.excludeFields||"summary"),this.excludeElements&&(t.excludeElements=this.excludeElements),this.count&&(t.count=this.count+1),this.hubCount&&(t.hubCount=this.hubCount),this.includeEmpty&&(t.includeEmpty=1),this.libraryHubsOnly&&(t.libraryHubsOnly=1),this.includeFeaturedTags&&(t.includeFeaturedTags=1),this.includeLibraryPlaylists&&(t.includeLibraryPlaylists=1),this.includeMeta&&(t.includeMeta=1),this.includeStations&&(t.includeStations=1),this.includeExternalMedia&&(t.includeExternalMedia=1),this.includeExternalMetadata&&(t.includeExternalMetadata=1),this.includeRecentChannels&&(t.includeRecentChannels=1),this.asyncAugmentMetadata&&(t.asyncAugmentMetadata=1),this.wait&&(t.wait=1),this.excludes&&this.excludes.length&&this.excludes.forEach((e=>{t["exclude"+(0,d.Z)(e)]=1})),p.Z.join(e,t)},initialize:function(){this.section&&this.listenTo(o.Z,"clear:sections:hubs",this.clear)},fetch(e={}){const t=i().clone(e);return e.onlyTransient&&this.populatePromise&&(t.remove=!1,t.url=p.Z.join(i().result(this,"url"),{onlyTransient:1})),s.Z.prototype.fetch.call(this,t)},augmentResponseText:(e,t)=>t===a.Ls?(0,c.Z)(e):e,augmentResponse(e){const t=this.model.prototype.rootPropertyName;if(e&&t){Array.isArray(e)?e={[t]:e}:e[t]&&!Array.isArray(e[t])&&(e={[t]:[e[t]]});const r=e[t];e.Meta&&r.forEach((t=>{t.Meta||(t.Meta=e.Meta)}));let n=r&&r.length;if(n){if(!this.includeEmpty)for(;n&&n--;){const e=r[n];u.vT.includes(e.style)&&e.size<=0&&r.splice(n,1)}this.maxLength&&r.splice(this.maxLength),e.size>r.length&&(e.size=String(r.length)),this.count&&r.forEach((e=>{e.more&&e.size>this.count&&(e.Metadata.splice(this.count,e.size-this.count),e.size=this.count)}))}}return this.responseContext.forEach((t=>{const r=e[t];void 0!==r&&this.setContext(t,r)})),e}})},64135:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(13220),i=r(18655),s=r(71273),a=r(62682),o=r(49688),l=r(3615),c=r(82650),d=r(35387),u=r(60526);const p=n.Z.extend({name:"HubModel",context:["server","provider","section","identifier","allowSync","includeExternalMedia"],entityType:d.km,entityID(e=this.state){return(0,c.Z)(this.entityType,e.key||e.hubKey||e.hubIdentifier,this.provider.entityID())},idAttribute:"hubIdentifier",rootPropertyName:"Hub",responseType(){return(0,a.Z)(this.server)},url(){return this.get("key")||this.get("hubKey")},syncedAttrs:{key:i.Z.string,hubKey:i.Z.string,hubIdentifier:i.Z.string,source:i.Z.string,title:i.Z.string,summary:i.Z.string,icon:i.Z.string,thumb:i.Z.string,attribution:i.Z.string,type:i.Z.string,subtype:i.Z.string,style:i.Z.string,size:i.Z.integer,totalSize:i.Z.integer,more:i.Z.boolean,random:i.Z.boolean,browse:i.Z.boolean,upNext:i.Z.boolean,context:i.Z.string,promoted:i.Z.boolean,autoAdvanceDelayMs:i.Z.integer,Meta:i.Z.object},syncedRelations:{metadataList:{relationClass:u.Z,deferred:!0}},initialize(){this.listenTo(this.get("metadataList"),"change:populatedRange",this.onPopulatedRangeChange)},augmentResponseText:(e,t)=>t===s.Ls?(0,o.Z)(e):e,augmentResponse(e){const t=null==e.totalSize?void 0:l.Z.parseInteger(e.totalSize),r=l.Z.parseInteger(e.size)||0,n=e.key||e.hubKey;return e.metadataList={containerKey:n,Metadata:e.Metadata,size:r,totalSize:t},e},onPopulatedRangeChange(e,t){const r=t.size,n=e.get("totalSize"),i={size:r};null!=n&&(i.more=n>r),this.set(i)}})},21580:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(32975),i=r(71273),s=r(62682),a=r(49688),o=r(22094);const l=n.Z.extend({name:"MetadataCollection",context:["server","provider","section","playlist","identifier","mediaTagPrefix","mediaTagVersion","allowSync","containerKey","includeExternalMedia"],model:o.Z,responseType(){return(0,s.Z)(this.server)},url(){return this.containerKey},augmentResponseText:(e,t)=>t===i.Ls?(0,a.Z)(e):e,splitByType:function(){const e={};return this.each((t=>{const r=t.get("type");e.hasOwnProperty(r)?e[r].push(t):e[r]=[t]})),e}})},60526:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(13469),i=r.n(n),s=r(13220),a=r(18655),o=r(65372),l=r(71273),c=r(62682),d=r(49688),u=r(3615),p=r(82650),m=r(35387),h=r(20683),g=r(68131),y=r(28481);const v=s.Z.extend({name:"MetaModel",context:["server","provider"],syncedAttrs:{DisplayFields:a.Z.array},syncedRelations:{types:{relationClass:y.Z,rootPropertyName:"Type"},fieldTypes:{relationClass:g.Z,rootPropertyName:"FieldType"}}});var f=r(21580);const b=s.Z.extend({mixins:[o.Z],name:"MetadataListModel",context:["server","provider","section","metadataItem","identifier","mediaTagPrefix","mediaTagVersion","allowSync","excludeFields","excludeElements","excludeAllLeaves","includeRelated","includeCollections","includeExternalMedia","includeAdvanced","includeMeta"],responseContext:["identifier","mediaTagPrefix","mediaTagVersion","allowSync"],entityType:m.$4,entityID(e=this.state){return(0,p.Z)(this.entityType,e.entityKey||e.containerKey||e.key||this.cid,(this.provider||this.server).entityID())},idAttribute:"containerKey",collectionName:"metadataItems",responseType(){return(0,c.Z)(this.server)},url(){const e=this.getPaginatedUrl(this.get("containerKey")||this.get("key")),t={excludeElements:this.excludeElements?this.excludeElements:void 0,excludeFields:this.excludeFields?this.excludeFields:void 0,excludeAllLeaves:this.excludeAllLeaves?1:void 0,includeRelated:this.includeRelated?1:void 0,includeCollections:this.includeCollections?1:void 0,includeExternalMedia:this.includeExternalMedia?1:void 0,includeAdvanced:this.includeAdvanced?1:void 0,includeMeta:this.includeMeta?1:void 0};return e?h.Z.join(e,t):e},sessionAttrs:{isMetadataList:a.Z.boolean,entityKey:a.Z.string,containerKey:a.Z.string,containerTitle:a.Z.string,currentPageStart:a.Z.integer,currentPageSize:a.Z.integer,populatedRange:a.Z.object,isPending:a.Z.boolean,isPopulated:a.Z.boolean,error:a.Z.object},syncedAttrs:{isDirectoryList:a.Z.boolean,isMetaPopulated:a.Z.boolean,key:a.Z.string,librarySectionID:a.Z.string,totalSize:a.Z.integer,viewGroup:a.Z.string,title:a.Z.string,thumb:a.Z.string,art:a.Z.string,banner:a.Z.string,theme:a.Z.string,allowSync:a.Z.boolean},syncedRelations:{metadataItems:{relationClass:f.Z,rootPropertyName:"Metadata",options:e=>({containerKey:e.containerKey||e.key}),setOptions:e=>({remove:e.remove,at:e.at})},meta:{relationClass:v,rootPropertyName:"Meta",deferred:!0}},derivedAttrs:{firstItemType(){const e=this.getCollection().first();return e?e.get("type"):this.attributes.firstItemType},firstItemSubtype(){const e=this.getCollection().first();return e?e.get("subtype"):this.attributes.firstItemSubtype},isFirstItemLibraryItem(){const e=this.getCollection().first();return e?e.get("isLibraryItem"):this.attributes.isFirstItemLibraryItem},isChannelsList(){const e=this.getCollection().first();return e?e.get("dvrChannel"):this.attributes.isChannelsList}},defaults:()=>({isMetadataList:!0,isDirectoryList:!1,populatedRange:{start:0,end:0,size:0},isPending:!0,isPopulated:!1,isMetaPopulated:!1,error:null}),initialize(e){this._totalSizeAdjustment=0,this.startPopulatedRangeMonitor(),this.on("change:key change:containerKey",this.onContainerKeyChange,this)},uninitialize(){this.off("change:key change:containerKey",this.onContainerKeyChange,this),this.stopListening()},augmentResponseText(e,t){const r=this.get("containerKey")||this.get("key"),n=/\/folder(\?|$)/.test(r);return t===l.Ls?(0,d.Z)(e,{includeDirectories:n}):e},augmentResponse(e,t){this.responseContext.forEach((t=>{const r=e[t];void 0!==r&&this.setContext(t,r)}));const r=u.Z.parseArray(e.Metadata),n=u.Z.parseArray(e.Directory),s=u.Z.parseInteger(e.totalSize);return this.allowAllLeaves||(e.Metadata=i().reject(r,(function(e){const t=/\/allLeaves$/.test(e.key);return t&&(this._totalSizeAdjustment-=1),t}),this)),!r.length&&e.Directory&&(e.Metadata=n,e.isDirectoryList=!0),this.includeMeta&&(e.isMetaPopulated=!0),s&&this._totalSizeAdjustment&&(e.totalSize=s-this._totalSizeAdjustment),!e.title&&e.title1&&(e.title=e.title1),e},onContainerKeyChange(e,t){const r=this.get("metadataItems"),n=this.syncedRelations.metadataItems.options(this.attributes);i().each(n,((e,t)=>{r.setContext(t,e)}))}})},22094:(e,t,r)=>{"use strict";r.d(t,{Z:()=>X});var n=r(13469),i=r.n(n),s=r(13220),a=r(18655),o=r(71273);const l=s.Z.extend({name:"TranscodeSessionModel",context:["server"],url(){return"/transcode/sessions/"+this.id},syncedAttrs:{key:a.Z.string,progress:a.Z.float,throttled:a.Z.boolean,speed:a.Z.float,duration:a.Z.integer,videoDecision:a.Z.string,audioDecision:a.Z.string,protocol:a.Z.string,container:a.Z.string,videoCodec:a.Z.string,audioCodec:a.Z.string,audioChannels:a.Z.integer,width:a.Z.string,height:a.Z.string,transcodeHwDecoding:a.Z.string,transcodeHwEncoding:a.Z.string,timeStamp:a.Z.integer,minOffsetAvailable:a.Z.integer,maxOffsetAvailable:a.Z.integer}});var c=r(30428),d=r(33184),u=r(79167),p=r(64155),m=r(62682),h=r(58790),g=r(35076),y=r(8089),v=r(74226),f=r(10644),b=r(49688),Z=r(3615),S=r(82650),P=r(35387),I=r(73788),E=r(85209),w=r(57674),C=r(14427),M=r(20683),D=r(32975);const O=s.Z.extend({name:"ChapterModel",context:["server","section"],syncedAttrs:{id:a.Z.integer,tag:a.Z.string,index:a.Z.integer,startTimeOffset:a.Z.integer,endTimeOffset:a.Z.integer,thumb:a.Z.string}}),T=D.Z.extend({name:"ChapterCollection",context:["server","section"],model:O,modelId:e=>`${e.id}_${e.index}`}),x=s.Z.extend({name:"ConcertModel",context:["server","section"],syncedAttrs:{id:a.Z.integer,at:a.Z.integer,tag:a.Z.string,venue:a.Z.string,city:a.Z.string,country:a.Z.string,url:a.Z.string}}),A=D.Z.extend({name:"ConcertCollection",context:["server","section"],model:x});var k=r(78449),N=r(23954),R=r(93927),L=r(71951),j=Object.defineProperty,V=Object.defineProperties,U=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,z=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,H=(e,t)=>{for(var r in t||(t={}))B.call(t,r)&&z(e,r,t[r]);if(F)for(var r of F(t))_.call(t,r)&&z(e,r,t[r]);return e},W=(e,t)=>V(e,U(t));const G={guid:!0,librarySectionID:!0,librarySectionTitle:!0,librarySectionUUID:!0,librarySectionKey:!0,source:!0,Context:!0,file:!0,summary:!0,tagline:!0,action:!0,attributionLogo:!0,backgroundColor:!0};function Q(e){let t=0;if(!e)return t;for(let r=0,n=e.length;r<n;r++){const n=e[r].Part;if(n)for(let e=0,r=n.length;e<r;e++){const r=n[e].Stream;r&&(t+=r.length)}}return t}function $(e=[]){return(0,N.Z)(e,L.Z,(e=>e))}function K(e){return(e.hasOwnProperty("ratingKey")||e.hasOwnProperty("id"))&&e.hasOwnProperty("tag")}function q(e,t){t.forEach((t=>{null!=(null==e?void 0:e[t])&&"string"!=typeof e[t]&&(e[t]=e[t].toString())}))}const Y=s.Z.extend({name:"MetadataModel",context:[["server",{boundDerivedAttrs:["serverEntityID"]}],["provider",{boundDerivedAttrs:["providerEntityID"]}],"section","playlist","identifier","mediaTagPrefix","mediaTagVersion","allowSync","containerKey","relatedOptions","includeExternalMedia"],responseContext:["identifier","mediaTagPrefix","mediaTagVersion","allowSync"],entityType:P.TY,entityID(e=this.state){let t;if(e.source){const{serverIdentifier:r}=(0,y.Z)(e.source);r!==this.server.get("machineIdentifier")&&(t=(0,S.Z)(P.cN,r))}return(0,S.Z)(this.entityType,e.key||this.cid,t,this.server.entityID())},idAttribute:"ratingKey",rootPropertyName:"Metadata",cache:new d.Z,mergeStrategy:function(e,t,r){return"Media"===e?function(e,t,r){return r&&!t?r:((n=r||t)&&n.some((e=>e.protocol===R.K))||function(e){return e&&e.some((e=>"livetv"===e.origin))}(r||t)?function(e,t){var r,n,i,s,a,o,l,c;if(!t)return null;const d=$(e),u=$(t),p=H(H({},d),u);for(const e in d){const t=d[e],m=u[e];t&&m&&t.Overlay.length&&!m.Overlay.length&&(p[e]=W(H({},p[e]),{Overlay:t.Overlay}));const h=null!=(s=null==(i=null==(n=null==(r=null==t?void 0:t.Part)?void 0:r[0])?void 0:n.Stream)?void 0:i.length)?s:0,g=null!=(c=null==(l=null==(o=null==(a=null==m?void 0:m.Part)?void 0:a[0])?void 0:o.Stream)?void 0:l.length)?c:0;t&&m&&h>g&&(p[e]=W(H({},p[e]),{Part:t.Part}))}return Object.keys(p).map((e=>p[e]))}(t,r):function(e,t){const r=Q(t),n=Q(e);return r||!n?t:e}(t,r))||(0,k.Z)(e,t,r);var n}(e,t,r):function(e){const t=X.prototype.syncedAttrs[e];return!(!t||t!==a.Z.array)}(e)?function(e,t,r){if(!r)return t;if(!t)return r;if(r.length>t.length)return r;if(!r.length||r.length<t.length)return t;const n=t&&t[0],i=r&&r[0];if(!n&&i)return r;if(!i&&n)return t;const s=K(n),a=K(i);return s&&!a?t:r}(0,t,r):function(e){return!!X.prototype.syncedRelations[e]}(e)||G[e]?(0,k.Z)(e,t,r):r},responseType(){const e=this.get("key");return e&&e.indexOf("/system/services/url/lookup")>-1?o.Ls:(0,m.Z)(this.server)},url(){const e={};return this.includeExternalMedia&&(e.includeExternalMedia=1),M.Z.join(this.get("key"),e)},urlRoot(){return this.get("key")},saveUrl(){return this.get("isPlaylist")&&!this.server.supports("truePlaylistsPath")?`/library/metadata/${this.get("ratingKey")}`:i().result(this,"url")},cacheKey(e){const t=this.extractChildrenKey(e.key);return e.source&&(t.key=e.source+t.key),this.server&&this.server.getScopedKey(t.key)},sessionAttrs:{isInUniversalWatchlist:a.Z.boolean.isRequired,isInUniversalWatchlistFetched:a.Z.boolean.isRequired,isPreFetched:a.Z.boolean,isStreamChangeInProgress:a.Z.boolean,isStreamDeleteInProgress:a.Z.boolean,metadataState:a.Z.string,mediaState:a.Z.string,isSettingsUpdating:a.Z.boolean,settingsUpdateError:a.Z.object,dvrChannel:a.Z.object,viewCountIncrementedByPlayQueueItemID:a.Z.string,downloadSubscriptionID:a.Z.string,isDownloaded:a.Z.boolean},syncedAttrs:{elementName:a.Z.string,ratingKey:a.Z.string,parentRatingKey:a.Z.string,grandparentRatingKey:a.Z.string,key:a.Z.string,childrenKey:a.Z.string,Context:a.Z.object,parentKey:a.Z.string,grandparentKey:a.Z.string,primaryExtraKey:a.Z.string,augmentationKey:a.Z.string,guid:a.Z.string,primaryGuid:a.Z.string,source:a.Z.string,sourceURI:a.Z.string,attribution:a.Z.string,attributionLogo:a.Z.string,action:a.Z.string,backgroundColor:a.Z.string,remoteMedia:a.Z.boolean,librarySectionID:a.Z.string,librarySectionTitle:a.Z.string,librarySectionUUID:a.Z.string,librarySectionKey:a.Z.string,type:a.Z.string,subtype:a.Z.string,title:a.Z.string,titleSort:a.Z.string,originalTitle:a.Z.string,parentTitle:a.Z.string,grandparentTitle:a.Z.string,year:a.Z.string,minYear:a.Z.string,maxYear:a.Z.string,tagline:a.Z.string,summary:a.Z.string,studio:a.Z.string,contentRating:a.Z.string,originallyAvailableAt:a.Z.string,thumb:a.Z.string,parentThumb:a.Z.string,grandparentThumb:a.Z.string,banner:a.Z.string,art:a.Z.string,parentArt:a.Z.string,grandparentArt:a.Z.string,hero:a.Z.string,theme:a.Z.string,parentTheme:a.Z.string,grandparentTheme:a.Z.string,chapterSource:a.Z.string,ratingImage:a.Z.string,audienceRating:a.Z.float,audienceRatingImage:a.Z.string,directory:a.Z.boolean,rating:a.Z.float,userRating:a.Z.float,playbackSpeed:a.Z.float,index:a.Z.integer,parentIndex:a.Z.integer,absoluteIndex:a.Z.integer,duration:a.Z.integer,preview:a.Z.boolean,viewOffset:a.Z.integer,viewCount:a.Z.integer,childCount:a.Z.integer,leafCount:a.Z.integer,viewedLeafCount:a.Z.integer,ratingCount:a.Z.integer,mediaCount:a.Z.integer,mediaCountOptimized:a.Z.integer,extraType:a.Z.integer,lastViewedAt:a.Z.integer,lastRatedAt:a.Z.integer,addedAt:a.Z.integer,updatedAt:a.Z.integer,deletedAt:a.Z.integer,Geolocation:a.Z.object,playlistID:a.Z.integer,playlistType:a.Z.string,specialPlaylistType:a.Z.string,radio:a.Z.boolean,smart:a.Z.boolean,readOnly:a.Z.boolean,icon:a.Z.string,composite:a.Z.string,content:a.Z.string,durationInSeconds:a.Z.integer,skipChildren:a.Z.boolean,skipParent:a.Z.boolean,skipDetails:a.Z.boolean,subscriptionID:a.Z.string,saved:a.Z.boolean,picked:a.Z.boolean,grandparentSubscriptionID:a.Z.string,subscriptionType:a.Z.string,grandparentSubscriptionType:a.Z.string,Channel:a.Z.array,onAir:a.Z.boolean,watchlistedAt:a.Z.integer,publicPagesURL:a.Z.string,Media:a.Z.array,Collection:a.Z.array,Director:a.Z.array,Producer:a.Z.array,Writer:a.Z.array,Studio:a.Z.array,Genre:a.Z.array,Mood:a.Z.array,Country:a.Z.array,Label:a.Z.array,Role:a.Z.array,Location:a.Z.array,Tag:a.Z.array,Autotag:a.Z.array,Marker:a.Z.array,indirect:a.Z.boolean,Origin:a.Z.object,requiresConsent:a.Z.boolean},syncedRelations:{chapters:{relationClass:T,rootPropertyName:"Chapter",deferred:!0},preferences:{relationClass:c.Z,rootPropertyName:"Preferences",deferred:!0},onDeck:()=>({relationClass:Y,rootPropertyName:"OnDeck",deferred:!0}),related(){const e={skipCache:!0};return this.relatedOptions&&i().extend(e,this.relatedOptions),{relationClass:r(53998).Z,rootPropertyName:"RelatedHubs",deferred:!0,options:e}},popularLeaves:()=>({relationClass:r(60526).Z,rootPropertyName:"PopularLeaves",deferred:!0}),extras:()=>({relationClass:r(60526).Z,rootPropertyName:"Extras",deferred:!0,attrs:e=>({containerKey:M.Z.join([e.key,"extras"])})}),concerts:{relationClass:A,rootPropertyName:"Concert",deferred:!0},stations:()=>({relationClass:r(21580).Z,rootPropertyName:"Stations",deferred:!0}),transcodeSession:{relationClass:l,rootPropertyName:"TranscodeSession",deferred:!0}},derivedAttrs:{identifier(){return this.identifier},serverEntityID(){if(!this.state)return null;const e=this.get("source");if(e){const{serverIdentifier:t}=(0,y.Z)(e);return(0,S.Z)(P.cN,t)}return this.server?this.server.entityID():null},providerEntityID(){if(!this.state)return null;const e=this.get("source");if(e){const{providerIdentifier:t}=(0,y.Z)(e);return(0,S.Z)(P.MC,t,this.get("serverEntityID"))}return this.provider?this.provider.entityID():null},mediaTagPrefix(){return this.mediaTagPrefix},mediaTagVersion(){return this.mediaTagVersion},allowSync(){return this.allowSync},containerKey(){return this.containerKey},isLibraryItem(){return this.isLibraryItem(this.get("identifier"),this.get("key"))},isPlaylist(){return this.get("type")===E.PLAYLIST&&!this.get("radio")},isFolder(){return/\/folder\?parent=/.test(this.get("key"))},isExtra(){return!!this.get("extraType")},isPremium(){const e=this.get("Media")||[];return i().any(e,(e=>e.premium))},hasRadioStation(){const e=this.get("stations");return!!e&&!!e.findWhere({playlistType:w.j0})},hasArtistTVStation(){const e=this.get("stations");return!!e&&!!e.findWhere({playlistType:w.pX})},unviewedLeafCount(){const e=this.get("leafCount"),t=this.get("viewedLeafCount");if(e)return e-t},downloadUrl(){const e=this.get("Media");if(e&&1===e.length){const t=i().first(i().first(e).Part),r=t&&t.key;if(r)return()=>{const e=M.Z.join(r,{download:1});return this.server.resolveUrl(e,{appendToken:!0})}}}},defaults:{isInUniversalWatchlist:!1,isInUniversalWatchlistFetched:!1,isStreamChangeInProgress:!1,isStreamDeleteInProgress:!1,isSettingsUpdating:!1,isDownloaded:!1,settingsUpdateError:null,rating:0,onAir:!1,skipDetails:!1,Media:[],Collection:[],Director:[],Producer:[],Writer:[],Studio:[],Genre:[],Mood:[],Country:[],Label:[],Channel:[],Role:[],Location:[],Autotag:[],Tag:[],requiresConsent:!1},fetch(e={}){return e.data&&(this._populatedParams=i().extend({},this._populatedParams,e.data)),e.usePopulatedParams&&(e.data=this._populatedParams),s.Z.prototype.fetch.call(this,e)},augmentResponseText:(e,t)=>t===o.Ls?(0,b.Z)(e):e,augmentResponse(e,t){var r;let n=e[this.rootPropertyName];n&&(Array.isArray(n)&&(n=n[0]),["attribution","augmentationKey","librarySectionID","librarySectionTitle","librarySectionUUID"].forEach((t=>{n[t]||(n[t]=e[t])})),e.type===E.CHANNEL&&(n.dvrChannel={identifier:e.identifier||e.id,thumb:e.thumb,title:e.title,callSign:e.callSign})),this.responseContext.forEach((t=>{const r=e[t]||n&&n[t];void 0!==r&&this.setContext(t,r)}));const s=n||e,a=s.Related,o=s.OnDeck,l=s.Stations,c=s.Preferences,d=this.extractChildrenKey(s.key);if(d.childrenKey&&(s.childrenKey=d.childrenKey,s.key=d.key),s.Media=this.convertMediaItems(s.Media),s.Role=this.convertRole(s.Role),s.Marker=this.convertMarkers(s.Marker),!s.source&&this.server){const e=(0,g.Z)({providerIdentifier:null==(r=this.provider)?void 0:r.get("identifier"),serverIdentifier:this.server.get("machineIdentifier")});s.source=e,s.sourceURI=`${e}${s.key}`}return a&&(s.RelatedHubs=i().compact([].concat(a.Hub,a.Directory))),o&&(s.OnDeck=o.Metadata),l&&(s.Stations=l.Metadata),c&&(s.Preferences=c.Setting),s.type===E.PHOTO&&s.childrenKey&&(s.type=E.PHOTO_ALBUM),s},extractChildrenKey(e){const t=/(.*)\/(children|items)$/.exec(e);let r;return t&&(r=e,e=t[1]),{childrenKey:r,key:e}},convertMediaItems(e){const t=Z.Z.parseArray(e);return i().each(t,(e=>{q(e,["id"]),f.Z.parseBoolean(e,["indirect","optimizedForStreaming","onAir","premium","premiere","selected"]),f.Z.parseInteger(e,["duration","width","height","bitrate","audioChannels","proxyType","beginsAt","endsAt","beginOffset","startOffsetSeconds","endOffsetSeconds"]),null==e.id&&null==e.uuid&&(e.uuid=`${e.container}-${e.protocol}-${e.audioCodec}`),f.Z.parseArray(e,"Overlay"),f.Z.parseArray(e,"Part"),i().each(e.Overlay,(e=>{null!=e.duration&&(e.duration=parseInt(e.duration,10)),e.startTimeOffset=parseInt(e.startTimeOffset,10)})),i().each(e.Part,(e=>{q(e,["id"]),null!=e.exists&&(e.exists=Z.Z.parseBoolean(e.exists)),null!=e.accessible&&(e.accessible=Z.Z.parseBoolean(e.accessible)),f.Z.parseInteger(e,["duration","size"]),f.Z.parseBoolean(e,"optimizedForStreaming"),f.Z.parseEncodedString(e,"file"),f.Z.parseArray(e,"Stream"),i().each(e.Stream,(e=>{q(e,["id"]),f.Z.parseBoolean(e,["anamorphic","selected","default","forced","timed","cabac","hasScalingMatrix","headerStripping"]),f.Z.parseInteger(e,["index","streamType","duration","width","height","bitrate","bitDepth","level","refFrames","samplingRate","channels","minLines","offset"]),f.Z.parseFloat(e,"frameRate")}))}))})),this.addNoneSubtitlesStreams(t)},convertRole(e){const t=Z.Z.parseArray(e);return i().each(t,(e=>{f.Z.parseBoolean(e,["directory"])})),t},convertMarkers(e){const t=Z.Z.parseArray(e);return i().each(t,(e=>{f.Z.parseInteger(e,["endTimeOffset","startTimeOffset"])})),t},addNoneSubtitlesStreams(e){const t=C.Z.get("subtitles");return e.forEach((e=>{const r=e.Part,n="livetv"===e.origin;r&&r.forEach((r=>{if(!r.Stream)return;if(!n&&!(0,h.Z)(e))return;const i=r.Stream.filter((e=>e.streamType===t.id));if(i.find((e=>e.id===p.H)))return;const s=i.find((e=>e.selected)),a={id:p.H,streamType:t.id,language:(0,I.Z)("None")};s||(a.selected=!0),r.Stream.unshift(a)}))})),e},getDownloadUrl(e=0){const t=this.get("Media")[e];if(t){const e=i().first(t.Part),r=e&&e.key;if(r){const e=M.Z.join(r,{download:1});return this.server.resolveUrl(e,{appendToken:!0})}}},getFilepath(e=0){const t=this.get("Media")[e];if(t){const e=i().first(t.Part);if(e)return e.file}},getLocation(){const e=this.get("Location");return e.length?i().first(e).path:this.getFilepath()},getMediaKey(){const e=i().first(this.get("Media"));if(e){const t=i().first(e.Part);if(t)return t.key}return this.get("key")},isLibraryItem(e,t){return!(this.provider&&!this.provider.get("isLibraryProvider"))&&(n=t,(r=e)?v.wB(r,v.Y3):/^(\/sync\/[\w\d-/]*)?\/library\//.test(n));var r,n},isPlexMusicItem(){const e=this.section;return e&&e.get("agent")===u.zR}}),X=Y},34317:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(13220),i=r(18655),s=r(65372),a=r(71273),o=r(49688),l=r(20683),c=r(32975),d=r(22094),u=r(82650),p=r(35387);const m=n.Z.extend({name:"PlaylistItemModel",context:["server","provider","playlist"],entityType:p.gO,entityID(e=this.state){return(0,u.Z)(this.entityType,e.playlistItemID||e.key,this.server.entityID())},idAttribute:"playlistItemID",syncedAttrs:{playlistItemID:i.Z.string,key:i.Z.string,type:i.Z.string},syncedRelations:{metadataItem:{relationClass:d.Z,deferred:!0}},augmentResponse:e=>({playlistItemID:e.playlistItemID,key:e.key,type:e.type,metadataItem:e})}),h=c.Z.extend({name:"PlaylistItemCollection",context:["server","provider","playlist"],model:m}),g=n.Z.extend({mixins:[s.Z],name:"PlaylistItemListModel",context:["server","provider","playlist","includeExternalMedia"],idAttribute:"key",collectionName:"metadataItems",url(){let e=this.getPaginatedUrl(this.get("containerKey"));return this.includeExternalMedia&&(e=l.Z.join(e,{includeExternalMedia:1})),e},sessionAttrs:{containerKey:i.Z.string,currentPageStart:i.Z.integer,currentPageSize:i.Z.integer,populatedRange:i.Z.object},syncedAttrs:{totalSize:i.Z.integer},syncedRelations:{metadataItems:{relationClass:h,rootPropertyName:"Metadata",setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()},augmentResponseText:(e,t)=>t===a.Ls?(0,o.Z)(e):e})},65100:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(32975),i=(r(32903),r(20683)),s=r(13220),a=r(18655);const o=s.Z.extend({name:"SubtitleModel",rootPropertyName:"Stream",syncedAttrs:{id:a.Z.integer,key:a.Z.string,streamType:a.Z.integer,codec:a.Z.string,index:a.Z.integer,language:a.Z.string,languageCode:a.Z.string,score:a.Z.float,providerTitle:a.Z.string,title:a.Z.string,displayTitle:a.Z.string,reason:a.Z.string,hearingImpaired:a.Z.boolean,perfectMatch:a.Z.boolean,downloaded:a.Z.boolean}}),l=n.Z.extend({name:"SubtitlesCollection",context:["server","key","language","title","mediaItemID","minimumScore","hearingImpaired","forced"],model:o,url(){const e={language:this.language};return this.title&&(e.title=this.title),this.mediaItemID&&(e.mediaItemID=this.mediaItemID),this.minimumScore&&(e.minimumScore=this.minimumScore),null!=this.hearingImpaired&&(e.hearingImpaired=this.hearingImpaired),null!=this.forced&&(e.forced=this.forced),i.Z.join([this.key,"/subtitles"],e)}})},62954:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(19755),i=r.n(n),s=r(32903);const a={fetch(){return(0,s.Z)(!1,"A model or collection with a controlled populate promise cannot be fetched directly"),this.populatePromise},isPopulating(){return!!this.populatePromise&&"pending"===this.populatePromise.state()},_resetPopulate(){return this.isPopulating()||(this._populateDeferred=i().Deferred(),this.populatePromise=this._populateDeferred.promise()),this.populatePromise},_resolvePopulate(){return"resolved"===this.populatePromise.state()||("rejected"===this.populatePromise.state()&&this._resetPopulate(),this._populateDeferred.resolveWith(this,[this])),this.populatePromise},_rejectPopulate(){return"rejected"===this.populatePromise.state()||("resolved"===this.populatePromise.state()&&this._resetPopulate(),this._populateDeferred.rejectWith(this,[this])),this.populatePromise}}},65372:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(10559),l=r(20683);const c={getCollectionName(){return this.collectionName||"items"},getCollection(){return this.get(this.getCollectionName())},getTotalSize(){return this.get("totalSize")||this.get("populatedRange").size},getPaginatedUrl(e){const t=this.get("currentPageStart"),r=this.get("currentPageSize");if(null!=t||null!=r){const n={"X-Plex-Container-Start":t||0,"X-Plex-Container-Size":r||0};return l.Z.join(e,n)}return e},getCollectionChangeEvents(){const e=this.getCollectionName();return[`change:${e}.update`,`change:${e}.reset`].join(" ")},startPopulatedRangeMonitor(){const e=this.getCollectionName();this.updatePopulatedRange(),this.on(this.getCollectionChangeEvents(),this.updatePopulatedRange,this),this.on(`change:${e}.destroy`,this.decrementTotalSize,this)},stopPopulatedRangeMonitor(){const e=this.getCollectionName();this.off(this.getCollectionChangeEvents(),this.updatePopulatedRange,this),this.off(`change:${e}.destroy`,this.decrementTotalSize,this)},fetchRange(e){const t=a().extend({},e,{remove:!1});return e.prepend&&(t.at=0),this.set({currentPageStart:e.start,currentPageSize:e.size}),this.fetch(t).promise()},populateRange(e){const t=this.getCollection(),r=this.get("populatedRange");let n=o.Z.difference(e,r)[0];if(!n)return i().Deferred().resolve().promise();if(n=o.Z.degap(n,r),this.isPopulating()){const e=this.get("currentPageStart")!==n.start,t=this.get("currentPageSize")!==n.size;if(!e&&!t)return this.populatePromise;this.abortPendingPopulate()}if(e.reloadThreshold&&n.size>e.reloadThreshold)return t.reset(),this.populateRange(a().omit(e,"reloadThreshold"));const s=a().extend({},e,n,{prepend:n.start<r.start});return this.fetchRange(s)},repopulateRange(e=0){const t=this.get("populatedRange").end;return this.set({currentPageStart:0,currentPageSize:Math.max(t,e)}),this.abortPendingPopulate(),this.fetch()},updatePopulatedRange(){const e=this.get("currentPageStart"),t=this.get("populatedRange").start,r=this.get("populatedRange").size,n=this.getCollection().length;let i;i=n?r?Math.min(t,null==e?1/0:e):e||t:0,this.set("populatedRange",{start:i,end:i+n,size:n})},decrementTotalSize(){const e=this.get("totalSize");e>0&&this.set("totalSize",e-1)}}},95994:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(13220),i=r(18655),s=r(21580),a=r(22094),o=r(71273),l=r(25413),c=r(49688),d=r(82650),u=r(35387);const p=n.Z.extend({name:"LiveTVSessionModel",context:["server","provider"],entityType:u.RP,entityID(e=this.state){return(0,d.Z)(this.entityType,e.key||this.cid,this.server.entityID())},idAttribute:"key",rootPropertyName:"MediaSubscription",url(){return`/media/subscriptions/${this.get("key")}`},sessionAttrs:{dvrID:i.Z.integer,channelIdentifier:i.Z.string,channelCallSign:i.Z.string,channelTitle:i.Z.string,activityUUID:i.Z.string,currentPosition:i.Z.integer,nextPosition:i.Z.integer,lastSeekPosition:i.Z.integer,startedAt:i.Z.integer,captureBuffer:i.Z.object},syncedAttrs:{key:i.Z.string,type:i.Z.integer,title:i.Z.string},syncedRelations:{grabOperation:{relationClass:l.Z,rootPropertyName:"MediaGrabOperation",deferred:!0},timeline:{relationClass:s.Z,rootPropertyName:"Timeline",deferred:!0}},sessionRelations:{airingMetadataItem:{relationClass:a.Z,deferred:!0},upNextMetadataItem:{relationClass:a.Z,deferred:!0}},defaults:{nextPosition:null,lastSeekPosition:null},augmentResponseText:(e,t)=>t===o.Ls?(0,c.Z)(e):e,augmentResponse(e){const t=e[this.rootPropertyName]||e,r=t.Timeline;return r&&(t.Timeline=r.Metadata),e}})},78449:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(13469),i=r.n(n);function s(e,t,r){return void 0===r||i().isObject(t)?t:r}},28388:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(19755),i=r.n(n),s=r(32975),a=r(70777),o=r(62682),l=r(97025),c=r(5518),d=r(69022),u=r(35758),p=r(5318),m=r(86418),h=r(74226),g=r(73788),y=r(71667);const v=s.Z.extend({name:"ProviderCollection",context:["server"],model:c.Z,url:"/media/providers",responseType(){return(0,o.Z)(this.server)},fetch(){var e;const t=this.server,r=this.parent,n=null==(e=null==r?void 0:r.get("features"))?void 0:e.map((e=>e.get("uuid"))),o=null==n?void 0:n.includes(a.ie);let v;return v=t.get("mediaProviders")||t.get("isCloud")?s.Z.prototype.fetch.apply(this,arguments):i().Deferred().resolve(this,"").promise(),v.then((e=>{(0,l.Z)(e,t)})),t.get("isCloud")&&o&&v.then((e=>{!function(e,t){e.get(h._)||e.add(new c.Z({isPending:!1,isPopulated:!0,identifier:h._,title:"Home Provider",features:[{type:m.Z.CONTENT,directories:[{id:p.u,title:(0,g.Z)("Home"),pivots:[{id:d.M1,key:y.tk.HOME_RECOMMENDED,type:u.t3,title:(0,g.Z)("Recommended")},{id:d.$c,context:"content.watchlist",key:y.tk.HOME_WATCHLIST,type:u.t3,title:(0,g.Z)("Watchlist")}]}]}]},{server:t}))}(e,t)})),v}})},93563:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(32975),i=r(89933),s=r(86418),a=r(70308);const o=n.Z.extend({name:"ProviderEPGChannelCollection",context:["server","provider"],model:i.Z,url(){return this.provider.get("features").get(s.Z.SETTINGS).get("settings").get(a.Pt).get("key")}})},89933:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(13220),i=r(18655);const s=n.Z.extend({name:"ProviderEPGChannelModel",context:["provider"],rootPropertyName:"Channel",syncedAttrs:{id:i.Z.string,thumb:i.Z.string,title:i.Z.string,hidden:i.Z.boolean}})},9148:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(32975),i=r(39169),s=r(86418),a=r(70777),o=r(13220),l=r(18655);const c=o.Z.extend({name:"ProviderActionModel",context:["server","provider"],syncedAttrs:{id:l.Z.string,key:l.Z.string,reverseKey:l.Z.string,requires:l.Z.string}}),d=n.Z.extend({name:"ProviderActionCollection",context:["server","provider"],model:c}),u=o.Z.extend({name:"ProviderGridChannelFilterModel",context:["server","provider"],idAttribute:"key",syncedAttrs:{key:l.Z.string,genreRatingKey:l.Z.string,title:l.Z.string}}),p=n.Z.extend({name:"ProviderGridChannelFilterCollection",context:["server","provider"],model:u});var m=r(23197),h=r(35758);const g=o.Z.extend({name:"PivotModel",idAttribute:"key",syncedAttrs:{key:l.Z.string.isRequired,type:l.Z.oneOf(h.km,h.IY,h.t3).isRequired,id:l.Z.string,title:l.Z.string.isRequired,context:l.Z.string.isRequired,requires:l.Z.string,libraryKey:l.Z.string}}),y=n.Z.extend({name:"PivotCollection",model:g}),v=o.Z.extend({name:"ProviderDirectoryModel",context:["server","provider"],syncedAttrs:{id:l.Z.string,key:l.Z.string,hubKey:l.Z.string,title:l.Z.string,icon:l.Z.string,type:l.Z.string,subtype:l.Z.string,agent:l.Z.string,refreshing:l.Z.boolean,updatedAt:l.Z.integer,scannedAt:l.Z.integer,context:l.Z.string},syncedRelations:{pivots:{relationClass:y,rootPropertyName:"Pivot",deferred:!0}}}),f=n.Z.extend({name:"ProviderDirectoryCollection",context:["server","provider"],model:v,modelId:e=>e.key||e.hubKey}),b=o.Z.extend({name:"ProviderFeatureModel",context:["server","provider"],sessionAttrs:{isSettingsPending:l.Z.boolean,isSettingsPopulated:l.Z.boolean,settingsError:l.Z.object},syncedAttrs:{id:l.Z.string,key:l.Z.string,reverseKey:l.Z.string,scrobbleKey:l.Z.string,unscrobbleKey:l.Z.string,type:l.Z.string,flavor:l.Z.string,requires:l.Z.string,automaticLibraryFolders:l.Z.boolean,public:l.Z.boolean,storageTotal:l.Z.integer},syncedRelations:{directories:{relationClass:f,rootPropertyName:"Directory",deferred:!0},settings:{relationClass:m.Z,rootPropertyName:"Setting",deferred:!0},actions:{relationClass:d,rootPropertyName:"Action",deferred:!0,setOptions:{remove:!1}},gridChannelFilters:{relationClass:p,rootPropertyName:"GridChannelFilter",deferred:!0},promotedGridChannelFilters:{relationClass:p,rootPropertyName:"PromotedGridChannelFilter",deferred:!0}},defaults:{isSettingsPending:!0,isSettingsPopulated:!1}}),Z=n.Z.extend({name:"ProviderFeatureCollection",context:["server","provider"],model:b,modelId:e=>e.type===s.Z.ACTION?e.id:e.type,augmentResponse(e){let t=e.find((e=>e.type===s.Z.ACTIONS));return null==t||Array.isArray(t.Action)||(t.Action=t.Action?[t.Action]:[]),null==t&&(t={Action:[],type:s.Z.ACTIONS},e.push(t)),e.forEach((e=>{if(e.type===s.Z.TIMELINE&&(null!=e.scrobbleKey||null!=e.unscrobbleKey)){const{scrobbleKey:r,unscrobbleKey:n}=e;t.Action.push({id:i.lq,key:r,reverseKey:n}),delete e.scrobbleKey,delete e.unscrobbleKey}if(e.type===s.Z.RATE){const{key:r}=e;t.Action.push({id:i.zw,key:r}),delete e.key}if(e.type===s.Z.ACTION&&(null!=e.key||null!=e.reverseKey)){const{key:r,reverseKey:n}=e;t.Action.push({id:e.id,key:r,reverseKey:n}),delete e.key,delete e.reverseKey}e.type===s.Z.ACTIONS&&e.Action.forEach((e=>{e.id!==i.JL&&e.id!==i.LE||(e.requires=a.sy)})),e.type===s.Z.SETTINGS&&(e.requires=a.sy)})),e}})},5518:(e,t,r)=>{"use strict";r.d(t,{q:()=>Y,Z:()=>X});var n=r(19755),i=r.n(n),s=r(45191),a=r(13220),o=r(18655),l=r(78449),c=r(71273),d=r(26829),u=r(86418),p=r(74226),m=r(72147),h=r(70777),g=r(95979),y=r(87999),v=r(35758),f=r(93927),b=r(63621),Z=r(73788),S=r(85209),P=r(57674),I=r(20683),E=r(71667);function w(e){return{key:e.hubKey,type:v.km,title:(0,Z.Z)("Recommended"),context:y.DISCOVER_PIVOT}}function C(e,t){return{key:(0,b.Z)(e.id,t),libraryKey:e.key,type:v.IY,title:(0,Z.Z)("Library"),context:y.LIBRARY_PIVOT,isContent:!0}}function M(e){const t=S.getMetadataType(S.COLLECTION);return{key:I.Z.join([e.key,"all"],{type:t.id}),type:v.IY,title:(0,Z.Z)("Collections"),context:y.COLLECTIONS_PIVOT}}function D(e,t){const r=e.key.match(/\/library\/sections\/(\w+)/)[1],n=S.getMetadataType(S.PLAYLIST);return I.Z.join("/playlists/all",{type:n.id,playlistType:t,sectionID:r})}function O(e,t){return{key:D(e,t),type:v.IY,title:(0,Z.Z)("Playlists"),context:y.PLAYLISTS_PIVOT}}function T(e){return e&&-1!==e.split(",").indexOf(f.K)}function x(e,t){return e&&e.some((e=>e.type===t))}function A(e,t,r){return r.type===e&&(null==t&&null==r.subtype||null!=t&&r.subtype===t)}function k(e,t){return/\/library\/sections\/(\w+)/.test(t.key)&&A(e,null,t)}var N=r(56431),R=r(82650),L=r(35387),j=r(61689),V=r(57799),U=r(9148),F=Object.defineProperty,B=Object.defineProperties,_=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,G=(e,t,r)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Q=(e,t)=>{for(var r in t||(t={}))H.call(t,r)&&G(e,r,t[r]);if(z)for(var r of z(t))W.call(t,r)&&G(e,r,t[r]);return e},$=(e,t)=>B(e,_(t));function K(e){const t=(0,s.DB)("appModel").get("drmType");return $(Q({},(0,g.Z)(t)),{"X-Plex-Text-Format":(0,d.Z)(e),"X-Plex-Provider-Version":"5.1"})}const q=L.MC;function Y({identifier:e,serverEntityID:t}){return(0,R.Z)(q,e,t)}const X=a.Z.extend({name:"ProviderModel",context:["server"],entityType:q,entityID(e=this.state){return Y({identifier:e.identifier,serverEntityID:this.server.entityID()})},idAttribute:"identifier",rootPropertyName:"MediaProvider",responseType:c.AV,url(){return this.get("baseURL")},mergeStrategy:(e,t,r)=>"protocols"===e&&r&&r.length>0?r:(0,l.Z)(e,t,r),syncedAttrs:{id:o.Z.integer,parentID:o.Z.integer,identifier:o.Z.string,providerIdentifier:o.Z.string,baseURL:o.Z.string,title:o.Z.string,sourceTitle:o.Z.string,types:o.Z.list,protocols:o.Z.list,subscriptions:o.Z.boolean,icon:o.Z.string,epgSource:o.Z.string,source:o.Z.string},sessionAttrs:{isPending:o.Z.boolean,isPopulated:o.Z.boolean,error:o.Z.object},syncedRelations:{features:{relationClass:U.Z,rootPropertyName:"Feature",options(){return{provider:this}},setOptions:{remove:!1}}},derivedAttrs:{isLibraryProvider(){return p.wB((0,N.Z)(this.get("identifier"),this.get("providerIdentifier")),p.Y3)},metricsIdentifier(){const e=this.get("providerIdentifier")||this.get("identifier");return p.wB(e,p.Ll)?e.split(":")[0]:e}},populate(){return this.get("isPopulated")?i().Deferred().resolve(this).promise():a.Z.prototype.populate.apply(this,arguments)},resolveUrl(e,t){const r=Q({},t);return this.url()&&(r.baseUrl=this.url()),this.server.resolveUrl(e,r)},getXHROptions(e,t={}){const r=(0,V.Z)(e)?e:I.Z.join([this.get("baseURL"),e]),n=this.get("providerIdentifier")||this.get("identifier"),i=this.server.getXHROptions(r,$(Q({},t),{headers:Q(Q({},K(n)),t.headers)}));return this.server.get("isCloud")&&(delete i.headers["X-Plex-Username"],delete i.headers["X-Plex-Device-Name"]),i},defaults:()=>({protocols:[],isPending:!0,isPopulated:!1,error:null}),augmentResponse(e){if(e.MediaProvider&&(e=e.MediaProvider),!e.Feature)return e;const t=p.wB(e.identifier,p.Y3);return e.Feature.forEach((r=>{if(r.type===u.Z.SETTINGS&&(r.Setting=[]),!r.Directory||r.type!==u.Z.CONTENT)return;let n;if(!r.key&&t&&(r.key="/library/sections"),r.Directory.forEach(((t,r)=>{var i;const s=t.key||t.hubKey;!t.id&&s&&(t.id=(0,j.Z)(s)),t.type===S.PLAYLIST&&(n=r),t.Pivot||(t.Pivot=function(e,t,r){return e.hubKey||"/playlists"===e.key?k(S.ARTIST,e)?[w(e),C(e,S.ARTIST),O(e,P.j0)]:k(S.MOVIE,e)?[w(e),C(e,S.MOVIE),M(e),O(e,P.pX)]:k(S.SHOW,e)?[w(e),C(e,S.SHOW),M(e),O(e,P.pX)]:k(S.PHOTO,e)?[w(e),{key:E.tk.TIMELINE,type:v.t3,title:(0,Z.Z)("Timeline"),context:y.TIMELINE_PIVOT},C(e,S.PHOTO),O(e,P.pV)]:T(t)&&x(r,u.Z.SUBSCRIBE)?[{key:e.hubKey,type:v.km,title:(0,Z.Z)("Recommended"),context:y.DVR_DISCOVER_PIVOT},{key:E.tk.GUIDE,type:v.t3,title:(0,Z.Z)("Guide"),context:y.DVR_GUIDE_PIVOT},{key:E.tk.RECORDING_SCHEDULE,type:v.t3,title:(0,Z.Z)("DVR Schedule"),context:y.DVR_SCHEDULE_PIVOT}]:T(t)||x(r,u.Z.GRID)?[{key:e.hubKey,type:v.km,title:(0,Z.Z)("Recommended"),context:y.DVR_DISCOVER_PIVOT},{key:E.tk.GUIDE,type:v.t3,title:(0,Z.Z)("Guide"),context:y.DVR_GUIDE_PIVOT}]:A(S.PLAYLIST,null,e)?[{key:I.Z.join(e.key,{playlistType:P.j0}),type:v.IY,title:(0,Z.Z)("Music"),context:y.PLAYLISTS_PIVOT},{key:I.Z.join(e.key,{playlistType:P.pX}),type:v.IY,title:(0,Z.Z)("Video"),context:y.PLAYLISTS_PIVOT},{key:I.Z.join(e.key,{playlistType:P.pV}),type:v.IY,title:(0,Z.Z)("Photo"),context:y.PLAYLISTS_PIVOT}]:[]:[]}(t,e.protocols,e.Feature)),Array.isArray(t.Pivot)||(t.Pivot=[t.Pivot]),t.Pivot.forEach((e=>{e.id&&e.id.match(/\.(saved|watchlist|playlists)$/)&&(e.requires=h.sy)}));const a=p.wB(e.identifier,p.uk),o=this.parent,l=null==(i=null==o?void 0:o.get("features"))?void 0:i.map((e=>e.get("uuid"))),c=null==l?void 0:l.includes(h.ie);a&&c&&(t.Pivot=t.Pivot.filter((e=>!e.id.match(/\.watchlist$/))))})),n&&n<r.Directory.length-1){const e=r.Directory[n];r.Directory.splice(n,1),r.Directory.push(e)}})),t&&!e.Feature.find((e=>e.type===u.Z.CONTINUE_WATCHING))&&e.Feature.push({type:u.Z.CONTINUE_WATCHING,key:m.O}),e}})},23197:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(32975),i=r(13220),s=r(18655);const a=i.Z.extend({name:"ProviderCountryModel",context:["server","provider"],idAttribute:"code",rootPropertyName:"Country",syncedAttrs:{code:s.Z.string,title:s.Z.string,postalCodeFormat:s.Z.string,flavor:s.Z.string}});var o=r(86418);const l=n.Z.extend({name:"ProviderCountryCollection",context:["server","provider"],url(){return`${this.provider.get("features").findWhere({type:o.Z.LOCATION}).get("key")}/countries`},model:a});var c=r(93563),d=r(89933),u=r(70308);const p=n.Z.extend({name:"ProviderEPGChannelCollection",context:["server","provider"],model:d.Z,url(){return this.provider.get("features").get(o.Z.SETTINGS).get("settings").get(u.x8).get("key")}}),m=i.Z.extend({name:"ProviderSettingOptionsModel",context:["server","provider"],idAttribute:"key",rootPropertyName:"Directory",syncedAttrs:{key:s.Z.string,title:s.Z.string,type:s.Z.string,selected:s.Z.boolean}}),h=n.Z.extend({name:"ProviderSettingOptionsCollection",context:["server","provider"],model:m});var g=r(3615);const y={int:g.Z.parseInteger,bool:g.Z.parseBoolean,double:g.Z.parseFloat},v=i.Z.extend({name:"ProviderSettingModel",context:["server","provider"],rootPropertyName:"Setting",url(){return this.get("key")},sessionAttrs:{isOptionsPending:s.Z.boolean,isOptionsPopulated:s.Z.boolean,optionsError:s.Z.object,isLocationsPending:s.Z.boolean,isLocationsPopulated:s.Z.boolean,locationsError:s.Z.object,isLineupPending:s.Z.boolean,isLineupPopulated:s.Z.boolean,lineupError:s.Z.object},syncedAttrs:{country:s.Z.string,countryLabel:s.Z.string,hidden:s.Z.boolean,id:s.Z.string,key:s.Z.string,label:s.Z.string,multiselect:s.Z.boolean,postalCode:s.Z.string,required:s.Z.boolean,selectedCount:s.Z.integer,summary:s.Z.string,type:s.Z.string,value:s.Z.oneOfType(s.Z.string,s.Z.boolean,s.Z.float),min:s.Z.float,max:s.Z.float,step:s.Z.float,enumValues:s.Z.string,default:s.Z.string},sessionRelations:{locations:{relationClass:l},lineup:{relationClass:c.Z},recentChannelsInGrid:{relationClass:p}},syncedRelations:{settings:()=>({relationClass:r(23197).Z,rootPropertyName:"Setting",deferred:!0}),options:{relationClass:h,options:e=>({url:e.key})}},defaults:{isOptionsPending:!0,isOptionsPopulated:!1,optionsError:null,isLocationsPending:!0,isLocationsPopulated:!1,locationsError:null,isLineupPending:!0,isLineupPopulated:!1,lineupError:null},augmentResponse(e){const t=y[e.type];return t&&(e.value=t(e.value)),e}}),f=n.Z.extend({name:"ProviderSettingCollection",context:["server","provider"],url:"/settings",model:v})},71273:(e,t,r)=>{"use strict";r.d(t,{Ls:()=>o,AV:()=>l,fL:()=>c});var n=r(13469),i=r.n(n),s=r(3615);function a(e,t){return t||(t={}),i().defaults(t,{typeName:e,parse:i().bind(s.Z.parseType,s.Z,e)})}const o=a("xml",{accept:"application/xml"}),l=a("json",{accept:"application/json"}),c=a("text")},5780:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(45191),i=r(41444),s=r(90573),a=r(18655),o=r(86022),l=r(22169),c=r(86832),d=r(19755),u=r.n(d),p=r(13469),m=r.n(p);var h=r(20683),g=r(40976),y=r(90095),v=r(32975),f=r(8238),b=r(71273),Z=r(46779);const S=v.Z.extend({name:"ResourceCollection",model:Z.Z,context:["server"],responseType:b.AV,url(){const e={};return f.Z.allowHttpsMediaServerConnections&&(e.includeHttps=1),f.Z.allowMediaServerRelayConnections&&(e.includeRelay=1),f.Z.allowIPv6ServerConnections&&(e.includeIPv6=1),h.Z.join("/api/v2/resources",e)}}),{connectionTestResults:P,promiseStates:I}=o.ZP,E=o.ZP.extend({name:"CloudServerModel",connectionTestUrl:(0,l.Y)("/monitoring/health"),sessionAttrs:{connectionTestResult:a.Z.oneOf(P.PENDING,P.CONNECTED,P.UNAVAILABLE,P.UNAUTHORIZED).isRequired,promiseState:a.Z.oneOf(I.PENDING,I.RESOLVED,I.REJECTED).isRequired,isShared:a.Z.boolean.isRequired,isBundled:a.Z.boolean.isRequired,isCloud:a.Z.boolean.isRequired,isMerged:a.Z.boolean.isRequired,isDownForMaintenance:a.Z.boolean.isRequired,isResourcesPending:a.Z.boolean.isRequired,isResourcesPopulated:a.Z.boolean.isRequired,hasFailedResources:a.Z.boolean.isRequired,accessToken:a.Z.string,baseUrl:a.Z.string.isRequired,plexPassUrl:a.Z.string.isRequired,appsUrl:a.Z.string.isRequired,hasEventConnection:a.Z.boolean},sessionRelations:{activeConnection:{relationClass:y.Z,deferred:!0},connections:{relationClass:g.Z,options(){return{server:this}}},resources:{relationClass:S,options(){return{server:this}}}},defaults(){const e=(0,l.Y)();return{connectionTestResult:P.PENDING,promiseState:I.PENDING,isShared:!1,isBundled:!1,isCloud:!0,isMerged:!1,isDownForMaintenance:!1,isResourcesPending:!1,isResourcesPopulated:!1,hasFailedResources:!1,friendlyName:"plex.tv",baseUrl:e,plexPassUrl:h.Z.join([e,"/subscription/about"]),appsUrl:h.Z.join([e,"/downloads"]),hasEventConnection:!1}},testAllConnections(){const e=this.get("connections");(0,c.Z)("[Connections] Testing all %s connection(s) for %s",e.length,this.get("debugName"));return function(e){if(!e.length)return u().Deferred().reject().promise();const t=u().Deferred();let r=e.length;return m().each(e,(function(e){e.done((function(){r--,t.resolveWith(this,arguments)})).fail((function(){r--,0===r&&t.reject()}))})),t.promise()}(e.map((e=>this.testConnection(e))))},testConnection(e){const t={server:this,connection:e,url:this.connectionTestUrl};return i.Z.execute("testServerConnection",t).done(this.onConnectionTestSuccess.bind(this)).fail(this.onConnectionTestError.bind(this))},abortConnectionTest(e){const t={server:this,connection:e,url:this.connectionTestUrl};i.Z.execute("abortServerConnectionTest",t)},deauthenticate(){this.get("resources").clear(),this._reject({connectionTestResult:this.get("connectionTestResult"),accessToken:null})},onConnectionTestSuccess(e){const t=this.get("connections").getBestConnection();c.Z.info("[Connections] Active connection to %s is %s",this.get("debugName"),t.id),this.startCapturingChangeEvents(),this.set({isDownForMaintenance:!1,connectionTestResult:P.CONNECTED,activeConnection:t}),this.releaseCapturedChangeEvents()},onConnectionTestError(e,t){e.get("isAborted")||this.get("connections").hasOnlyFailedConnections()&&this._reject({isDownForMaintenance:503===t.status})}});(0,s.Z)(E,(function(){return{relationClass:(0,n.DB)("CloudServerFlexModel"),options:{server:this}}}));const w=E},40976:(e,t,r)=>{"use strict";r.d(t,{y:()=>c,Z:()=>d});var n=r(13469),i=r.n(n),s=r(32975),a=r(8238),o=r(88993),l=r(90095);const c=(e,t)=>!e.get("relay")&&t.get("relay")?e:!t.get("relay")&&e.get("relay")||!e.get("isLoopback")&&t.get("isLoopback")?t:!t.get("isLoopback")&&e.get("isLoopback")?e:!e.get("isPrivate")&&t.get("isPrivate")?t:!t.get("isPrivate")&&e.get("isPrivate")?e:!e.get("isHttps")&&t.get("isHttps")?t:(!t.get("isHttps")&&e.get("isHttps"),e),d=s.Z.extend({name:"ConnectionCollection",context:["server"],model:l.Z,getBestConnection(){const e=a.Z.allowHttpsMediaServerConnections,t=!this.server||this.server.get("isCloud")||e,r=this.filter((e=>e.get("isConnected")&&(t||!e.get("isHttps"))));if(r.length)return i().reduce(r,c)},hasBetterConnectionCandidates(){const e=this.server&&this.server.get("activeConnection");return this.some((t=>{const r=t.get("isUntested")||t.get("isPending"),n=!e||t!==e&&c(t,e)===t;return r&&n}))},hasOnlyFailedConnections(){return this.every((e=>e.get("isFailed")))},hasFailedEveryDirectConnection(){return this.where({relay:!1}).every((e=>e.get("isFailed")))},hasMultiplePrivateV4Subnets(){let e;return this.some((t=>{const r=t.get("address");if(t.get("isPrivate")&&o.q1(r)){const t=o.iX(r);return e||(e=t),e!==t}}))}})},90095:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(13469),i=r.n(n),s=r(13220),a=r(18655),o=r(32779),l=r(32903),c=r(88993),d=r(20683),u=r(32975);const p=s.Z.extend({name:"ConnectionSourceModel",context:["server"],sessionAttrs:{id:a.Z.string}}),m=u.Z.extend({name:"ConnectionSourceCollection",context:["server"],model:p}),h=a.Z.boolean.isRequired,g=s.Z.extend({name:"ConnectionModel",context:["server"],idAttribute:"uri",sessionAttrs:{currentTest:a.Z.custom((e=>Array.isArray(e)&&e.every((e=>i().isFunction(e.abort))))),testState:a.Z.oneOf(o.uf,o.hA,o.nm,o.WY,o.nZ,o.c9).isRequired,isBundled:h,isFallback:h},sessionRelations:{sources:{relationClass:m}},syncedAttrs:{uri:a.Z.string,scheme:a.Z.string,address:a.Z.string,port:a.Z.string,relay:a.Z.boolean},derivedAttrs:{isUntested(){return this.get("testState")===o.uf},isPending(){return this.get("testState")===o.hA},isConnected(){return this.get("testState")===o.nm},isUnauthorized(){return this.get("testState")===o.WY},isUnavailable(){return this.get("testState")===o.nZ},isFailed(){return this.get("isUnauthorized")||this.get("isUnavailable")},isAborted(){return this.get("testState")===o.c9},isLoopback(){const e=this.get("address");return"localhost"===e||c.lv(e)},isPrivate(){return this.get("isLoopback")||c.KF(this.get("address"))},isHttps(){return"https"===this.get("scheme")},isSecure(){return this.get("isLoopback")||this.get("isHttps")},isPlexDirect(){return/\.plex\.direct:/.test(this.get("uri"))}},defaults:{testState:o.uf,isBundled:!1,isFallback:!1,relay:!1},url(){return this.get("uri")},constructor:function(e,t){const r=i().clone(e);i().isObject(e)&&!e.uri&&((0,l.Z)(e.scheme&&e.address,`A server connection requires either a uri or a scheme and address. ${e.scheme}://${e.address}`),r.uri=`${e.scheme}://${e.address}`,e.port&&(r.uri+=":"+e.port)),s.Z.prototype.constructor.call(this,r,t)},initialize(){this.listenTo(this.get("sources"),"remove reset",this.onSourcesChange)},augmentResponse(e){const t=e.protocol;return t?i().extend({},e,{scheme:t}):e},getAddressFromUri(){return d.Z.parseUrl(this.get("uri")).hostname},getIpAddressFromPlexDirectAddress(){return function(e){if(/\.plex\.direct$/.test(e)){const t=e.indexOf(".");t>0&&(e=(e=e.substring(0,t)).replace(/-/g,"."))}return e}(this.get("address"))},getLoopbackAttributes(){return{scheme:"http",address:"127.0.0.1",port:this.get("port")}},hasSource(e){return this.get("sources").some((t=>e&&t.get("id")===e))},onSourcesChange(){this.get("sources").length||this.trigger("destroy",this,this.collection)}})},46779:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(42902),i=r(13220),s=r(18655),a=r(40976);const o=i.Z.extend({name:"ResourceModel",context:["server"],idAttribute:"clientIdentifier",urlRoot:"/api/v2/resources",syncedAttrs:{clientIdentifier:s.Z.string,name:s.Z.string,sourceTitle:s.Z.string,accessToken:s.Z.string,product:s.Z.string,productVersion:s.Z.string,platform:s.Z.string,platformVersion:s.Z.string,device:s.Z.string,provides:s.Z.list,owned:s.Z.boolean,home:s.Z.boolean,synced:s.Z.boolean,presence:s.Z.boolean,publicAddressMatches:s.Z.boolean,httpsRequired:s.Z.boolean,createdAt:s.Z.integer,lastSeenAt:s.Z.integer,ownerId:s.Z.integer},syncedRelations:{connections:{relationClass:a.Z}},augmentResponse(e){"string"==typeof e.createdAt&&(e.createdAt=(0,n.Z)(e.createdAt)),"string"==typeof e.lastSeenAt&&(e.lastSeenAt=(0,n.Z)(e.lastSeenAt));const t=e.Device;return t?(t.connections=t.Connection,delete t.Connection,t):e}})},180:(e,t,r)=>{"use strict";r.d(t,{GI:()=>l,xD:()=>c,Gu:()=>d,OM:()=>u,Q2:()=>p,uy:()=>m,uX:()=>h,HP:()=>g,ZP:()=>y});var n=r(13220),i=r(18655),s=r(71273),a=r(86832);const o="ok",l="unknown",c="waiting",d="mapped",u="ok",p="connecting",m="disconnecting",h="unreachable",g="",y=n.Z.extend({context:["server"],url:"/myplex/account",responseType:s.AV,sessionAttrs:{remoteAccessState:i.Z.oneOf(p,m,h,u,g)},syncedAttrs:{username:i.Z.string,mappingState:i.Z.oneOf(l,c,"failed",d),mappingError:i.Z.oneOf("badauth","unreachable","myplexgone","publisherror","doublenat","jumboframes",""),signInState:i.Z.oneOf("none","unknown","invalid",o),publicAddress:i.Z.string,publicPort:i.Z.integer,privateAddress:i.Z.string,privatePort:i.Z.integer,subscriptionActive:i.Z.boolean,subscriptionState:i.Z.string},derivedAttrs:{signedIn(){return this.get("signInState")===o},isWaiting(){const e=this.get("remoteAccessState");return e===p||e===m}},defaults:{signedIn:!1,mappingState:null,mappingError:null,signInState:null,publicAddress:null,publicPort:null,privateAddress:null,privatePort:null},isNew(){return!this.get("signedIn")},augmentResponse(e){let t=e.MyPlex;t||(a.Z.warn(`[Account] Failed to get reachable information for account - received ${JSON.stringify(e)}`),t={});const r=t.signInState===o;r||(t.username=null);const n=!r||t.mappingError,i=!n&&t.mappingState===d;return n?t.remoteAccessState=h:i&&(t.remoteAccessState=u),t}})},86022:(e,t,r)=>{"use strict";r.d(t,{Ar:()=>ee,Hq:()=>J,_r:()=>K,Po:()=>re,ZP:()=>ie});var n=r(13469),i=r.n(n),s=r(45191),a=r(65935),o=r(41444),l=r(37474),c=r(13220),d=r(90573),u=r(18655),p=r(8238),m=r(54122),h=r(20297),g=r(65372),y=r(62682),v=r(20683),f=r(32975),b=r(19755),Z=r.n(b),S=r(97968),P=r(34317);const I=c.Z.extend({name:"PlaylistModel",context:["server","containerKey"],idAttribute:"ratingKey",rootPropertyName:"Playlist",urlRoot:"/playlists",saveUrl(){return this.server.supports("truePlaylistsPath")?i().result(this,"url"):`/library/metadata/${this.id}`},sessionAttrs:{isPlaylist:u.Z.boolean,isLibraryItem:u.Z.boolean},syncedAttrs:{ratingKey:u.Z.string,key:u.Z.string,guid:u.Z.string,type:u.Z.string,playlistType:u.Z.string,title:u.Z.string,titleSort:u.Z.string,composite:u.Z.string,summary:u.Z.string,smart:u.Z.boolean,allowSync:u.Z.boolean,duration:u.Z.integer,durationInSeconds:u.Z.integer,leafCount:u.Z.integer,addedAt:u.Z.integer,updatedAt:u.Z.integer},sessionRelations:{children:{relationClass:P.Z,attrs(e){const t={};return"audio"===e.playlistType&&(t.includeRelated=1),{containerKey:v.Z.join(["/playlists",e.ratingKey,"items"],t)}},options(){return{playlist:this}}}},defaults:{isPlaylist:!0,isLibraryItem:!0},findItem(e){return this.get("children").getCollection().findWhere({playlistItemID:e})},moveItem(e,t){if(void 0===e)return;const r=t?{after:t}:{},n=v.Z.join([i().result(this,"url"),"/items/",e,"/move"],r),s=i().extend(this.server.getXHROptions(n),{type:"PUT"}),a=Z().ajax(s),o=this.get("children").getCollection(),l=this.findItem(e);o.remove(l);const c=this.findItem(t),d=c?o.indexOf(c)+1:0;return o.add(l,{at:d}),a},removeItem(e){if(void 0===e)return;const t=v.Z.join([i().result(this,"url"),"/items/",e]),r=i().extend(this.server.getXHROptions(t),{type:"DELETE"}),n=Z().ajax(r);n.then((e=>{this.set(this.parse(e))}));const s=this.get("children").getCollection(),a=this.findItem(e);return s.remove(a),s.trigger("destroy",a,s),n},addContent(e,t){const r=this.isNew()?"POST":"PUT",n=[i().result(this,"url")],s={};this.isNew()?(s.type=this.get("playlistType"),s.title=this.get("title"),s.smart=this.get("smart")?1:0):n.push("/items"),e.get("playQueueID")?s.playQueueID=e.get("playQueueID"):s.uri=S.Z.uri(e,t);const a=v.Z.join(n,s),o=i().extend(e.server.getXHROptions(a),{type:r}),l=Z().ajax(o);return l.then((e=>{this.set(this.parse(e))})),l.promise()},isLibraryItem:(e,t)=>!0,isPlexMusicItem:()=>!1}),E=f.Z.extend({name:"PlaylistCollection",context:["server","containerKey"],model:I,url(){return this.containerKey}}),w=c.Z.extend({mixins:[g.Z],name:"PlaylistListModel",context:["server","section"],idAttribute:"key",collectionName:"playlists",responseType(){return(0,y.Z)(this.server)},url(){return this.getPaginatedUrl(i().result(this,"containerKey"))},containerKey(){const e=this.section.get("currentType"),t=this.section.get("currentSort"),r={type:15};return r.sort=t?t.id+":"+(t.get("direction")||"asc"):"titleSort:asc",e&&(r.playlistType=e),this.section.get("onlyDumb")&&(r.smart=0),v.Z.join("/playlists/all",r)},sessionAttrs:{isPlaylistList:u.Z.boolean,currentPageStart:u.Z.integer,currentPageSize:u.Z.integer,populatedRange:u.Z.object},syncedAttrs:{totalSize:u.Z.integer},syncedRelations:{playlists:{relationClass:E,rootPropertyName:"Playlist",options(e){return{containerKey:i().result(this,"containerKey")}},setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({isPlaylistList:!0,populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()},augmentResponse:e=>(e.Metadata&&(e.Playlist=e.Metadata,delete e.Metadata),e)}),C=m.Z.extend({name:"PlaylistsSectionModel",defaults(){return{pseudo:!0,currentType:0,sorts:new h.Z([],{section:this,server:this.server}),items:new w({},{section:this,server:this.server})}},url:()=>"/playlists"});var M=r(90926),D=r(62954),O=r(78449),T=r(28388),x=r(80011),A=r(33184),k=r(94450),N=r(32903),R=r(86832),L=r(82650),j=r(35387),V=r(69664),U=r(57799),F=r(40976),B=r(90095),_=r(54562),z=Object.defineProperty,H=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,Q=(e,t,r)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{for(var r in t||(t={}))W.call(t,r)&&Q(e,r,t[r]);if(H)for(var r of H(t))G.call(t,r)&&Q(e,r,t[r]);return e};const K={PENDING:"pending",CONNECTED:"connected",UNAVAILABLE:"unavailable",UNAUTHORIZED:"unauthorized"},q={PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"},Y={SECONDARY:"secondary"},X=["camera_upload","content_filter","home","lyrics","music_videos","pass","premium_music_metadata","sync","trailers"],J="ok",ee="none",te=j.cN;function re({machineIdentifier:e}){return(0,L.Z)(te,e)}const ne=c.Z.extend({mixins:[D.Z],name:"ServerModel",entityType:te,entityID(e=this.state){return re({machineIdentifier:e.machineIdentifier||this.cid})},idAttribute:"machineIdentifier",connectionTestTimeout:1e4,responseType(){return(0,y.Z)(this)},mergeStrategy:O.Z,cache:new A.Z,persistInCache:!0,sessionAttrs:{connectionTestResult:u.Z.oneOf(K.PENDING,K.CONNECTED,K.UNAVAILABLE,K.UNAUTHORIZED).isRequired,promiseState:u.Z.oneOf(q.PENDING,q.RESOLVED,q.REJECTED).isRequired,sections:u.Z.instanceOf(M.Z).isRequired,playlists:u.Z.instanceOf(C).isRequired,isShared:u.Z.boolean.isRequired,isBundled:u.Z.boolean.isRequired,isCloud:u.Z.boolean.isRequired,isMerged:u.Z.boolean.isRequired,isEmbedded:u.Z.boolean.isRequired,isInstallingServerUpdate:u.Z.boolean.isRequired,superToken:u.Z.string,accessToken:u.Z.string,sourceTitle:u.Z.string,publicAddressMatches:u.Z.boolean,httpsRequired:u.Z.boolean,presence:u.Z.boolean,home:u.Z.boolean,createdAt:u.Z.integer,lastSeenAt:u.Z.integer,ownerId:u.Z.integer,hasEventConnection:u.Z.boolean,serverClass:u.Z.oneOf(Y.SECONDARY),onlyXML:u.Z.boolean,isProvidersPending:u.Z.boolean.isRequired,isProvidersPopulated:u.Z.boolean.isRequired,providersError:u.Z.object},sessionRelations:{activeConnection:{relationClass:B.Z,deferred:!0},connections:{relationClass:F.Z,options(){return{server:this}}}},syncedRelations:{providers:{relationClass:T.Z,rootPropertyName:"MediaProvider",options(){return{server:this}}}},syncedAttrs:{machineIdentifier:u.Z.string,friendlyName:u.Z.string,startState:u.Z.string,version:u.Z.string,platform:u.Z.string,platformVersion:u.Z.string,sync:u.Z.boolean,backgroundProcessing:u.Z.boolean,multiuser:u.Z.boolean,transcoderLyrics:u.Z.boolean,myPlex:u.Z.boolean,myPlexMappingState:u.Z.string,myPlexSigninState:u.Z.oneOf(J,ee,"invalid"),myPlexSubscription:u.Z.boolean,myPlexUsername:u.Z.string,transcoderPhoto:u.Z.boolean,transcoderAudio:u.Z.boolean,transcoderVideo:u.Z.boolean,transcoderVideoRemuxOnly:u.Z.boolean,transcoderSubtitles:u.Z.boolean,transcoderActiveVideoSessions:u.Z.integer,allowMediaDeletion:u.Z.boolean,allowChannelAccess:u.Z.boolean,allowSync:u.Z.boolean,diagnostics:u.Z.list,updater:u.Z.boolean,isDesktop:u.Z.boolean,photoAutoTag:u.Z.boolean,itemClusters:u.Z.boolean,updatedAt:u.Z.integer,countryCode:u.Z.string,ownerFeatures:u.Z.list,mediaProviders:u.Z.integer,maxUploadBitrate:u.Z.integer,maxUploadBitrateReason:u.Z.string,maxUploadBitrateReasonMessage:u.Z.string,streamingBrainABRVersion:u.Z.integer,livetv:u.Z.integer,audiobook:u.Z.boolean},derivedAttrs:{debugName(){const e=this.get("machineIdentifier"),t=this.get("connections"),r=1===t.length&&t.at(0).get("isLoopback");let n=this.get("friendlyName");return!n&&this.get("isBundled")?n="[Bundled]":!n&&r&&(n="[Loopback]"),n||(e?`[${e}]`:"[Anonymous]")},shortVersion(){return(0,V.Z)(this.get("version"))},isConnected(){return this.get("connectionTestResult")===K.CONNECTED},isUnavailable(){return this.get("connectionTestResult")===K.UNAVAILABLE},isUnauthorized(){return this.get("connectionTestResult")===K.UNAUTHORIZED},isPending(){return this.get("promiseState")===q.PENDING},isPrivateConnection(){const e=this.get("activeConnection");return!(!e||!e.get("isPrivate"))},isResolved(){return this.get("promiseState")===q.RESOLVED},isRejected(){return this.get("promiseState")===q.REJECTED},isRelayed(){const e=this.get("activeConnection");return!(!e||!e.get("relay"))},isSecure(){const e=this.get("activeConnection");return!(!e||!e.get("isSecure"))},hasHttpsConnections(){return!!this.get("connections").findWhere({isHttps:!0})},hasFallbackConnections(){return!!this.get("connections").findWhere({isFallback:!0})},isMobileServer(){return this.get("serverClass")===Y.SECONDARY},isFullServer(){return!this.get("isCloud")&&!this.get("isMobileServer")&&!this.get("isEmbedded")},isFullOwnedServer(){return this.get("isFullServer")&&!this.get("isShared")},isPrimaryEligible(){return!(!p.Z.allowMobileServers&&this.get("isMobileServer")||!this.get("machineIdentifier")||this.get("isUnauthorized")||this.get("isCloud")||this.get("isEmbedded"))},isOutOfDate(){return!this.get("isMobileServer")&&!this.isVersionOrNewer("1.18.3")},isClaimed:function(){return this.get("isConnected")?this.get("myPlexSigninState")===J:void 0},hasManualConnection(){return this.get("connections").some((e=>e.get("sources").some((e=>/^manual/.test(e.id)))))},hasAdaptiveBitrate(){return this.get("streamingBrainABRVersion")>=3},shared(){return this.get("isShared")},bundled(){return this.get("isBundled")},cloud(){return this.get("isCloud")},merged(){return this.get("isMerged")},connected(){return this.get("connectionTestResult")===K.PENDING?null:this.get("isConnected")},available(){return this.get("connectionTestResult")===K.PENDING?null:!this.get("isUnavailable")},authorized(){return this.get("connectionTestResult")===K.PENDING?null:this.get("isResolved")},relayed(){return this.get("isRelayed")}},defaults(){return{connectionTestResult:K.PENDING,promiseState:q.PENDING,sections:new M.Z([],{server:this}),playlists:new C({},{server:this}),isShared:!1,isBundled:!1,isCloud:!1,isMerged:!1,isEmbedded:!1,isInstallingServerUpdate:!1,hasEventConnection:!1,sync:!1,backgroundProcessing:!1,allowChannelAccess:!1,updater:!0,ownerFeatures:[],audiobook:!1,isProvidersPending:!0,isProvidersPopulated:!1,providersError:null}},url(e=this.get("activeConnection")){(0,N.Z)(e,"An active or manual connection is required for a server url");let t=i().result(e,"url");return/\/$/.test(t)||(t+="/"),t},initialize(){this._reset(),this.on("change:machineIdentifier",this.onMachineIdentifierChange,this),this.listenTo(this.get("connections"),{remove:this.onConnectionRemove,reset:this.onConnectionsReset})},uninitialize(){this.off("change:machineIdentifier",this.onMachineIdentifierChange,this),this.stopListening()},updateEntity(){if(!this.get("isMerged"))return c.Z.prototype.updateEntity.apply(this,arguments)},fetch(){return l.ZP.Model.prototype.fetch.apply(this,arguments)},resolveUrl(e,t={}){if((0,U.Z)(e))return e;let r;r=t.useRelativeUrl?this.get("isMobileServer")?`http://127.0.0.1:${this.getLoopbackPort()}/`:"":t.baseUrl||this.url(t.connection);const n=this.get("accessToken"),s=i().extend({},t.params);return t.appendHeaders&&i().defaults(s,this.getHeaders()),t.appendToken&&n&&(s["X-Plex-Token"]=n),v.Z.join([r,e],s)},getXHROptions(e,t={}){var r=t,{headers:n,baseUrl:s}=r,a=((e,t)=>{var r={};for(var n in e)W.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&H)for(var n of H(e))t.indexOf(n)<0&&G.call(e,n)&&(r[n]=e[n]);return r})(r,["headers","baseUrl"]);return $({url:this.resolveUrl(e,{baseUrl:s}),dataType:"text",headers:i().extend(this.getHeaders(),n),allowHeadersInUrl:!0,allowBlacklistedMethodHeaders:this.supports("allowBlacklistedMethodHeaders")},a)},getHeaders(){const e=a.Z.getInstance(),t=i().clone(e),r=this.get("accessToken");r&&(t["X-Plex-Token"]=r);const n=(0,s.DB)("settingFinder").find("language");return n&&(t["X-Plex-Language"]=n,t["Accept-Language"]=n),t},addConnection(e){e.sources||(e.sources=[{id:"internal"}]);const t=this.get("connections"),r=new B.Z(e),n=t.get(r.id);return n?(n.get("sources").set(e.sources,{remove:!1}),n):t.add(e)},hasSource(e){return this.get("connections").some((t=>t.hasSource(e)))},removeSource(e){const t=this.get("connections");let r=t.length-1;for(;r>=0;)t.at(r).get("sources").remove(e),r--},testAllConnections(){const e=this.get("connections");return(0,R.Z)("[Connections] Testing all %s connection(s) for %s",e.length,this.get("debugName")),this._reset(),e.each((e=>{const t=!e.get("relay"),r=!e.get("isUntested");(t||r)&&this.testConnection(e)})),this.populatePromise},testOnlyUntestedConnections(){return this.get("connections").each((e=>{const t=!e.get("relay"),r=e.get("isUntested"),n=e.get("isAborted");t&&(r||n)&&this.testConnection(e)})),this.populatePromise},testOnlyUntestedRelayConnections(){return this.get("connections").each((e=>{const t=e.get("relay"),r=e.get("isUntested");t&&r&&this.testConnection(e)})),this.populatePromise},testConnection(e,t={}){return t.server=this,t.connection=e,this.get("promiseState")===q.REJECTED&&this._reset(),o.Z.execute("testServerConnection",t).done(this.onConnectionTestSuccess.bind(this)).fail(this.onConnectionTestError.bind(this))},abortAllConnectionTests(){const e=this.get("connections");(0,R.Z)("[Connections] Aborting all pending connection tests for",this.get("debugName")),e.each((e=>{this.abortConnectionTest(e)}))},abortConnectionTest(e){const t={server:this,connection:e};o.Z.execute("abortServerConnectionTest",t)},populateIdentity(e){if(this._identityPromise)return this._identityPromise;const t=o.Z.execute("populateServerIdentity",{server:this,connection:e});return t.done((e=>{this.set("machineIdentifier",e)})),this._identityPromise=t,t},updateCacheKey(){const e=this.get("debugName"),t=this.cacheKey(this.attributes),r=this.cache.get(t);if(r){const n=r.get("debugName");R.Z.warn("[Identity] %s and %s (cached) collide",e,n),r.get("isConnected")||!this.get("isConnected")?((0,R.Z)("[Identity] Merging %s into %s (cached)",e,n),r.merge(this)):((0,R.Z)("[Identity] Merging %s (cached) into %s",n,e),this.merge(r),this.cache.store(this,t))}else this.cache.store(this,t)},merge(e){e.set("isMerged",!0),e.get("isBundled")&&this.set("isBundled",!0),e.get("connections").each((e=>{this.addConnection(e.toJSON())})),this.collection&&(this.collection.remove(e.cid,{silent:!0}),this.collection._byId[this.id]=this,this.collection.trigger("remove",e,this.collection),this.collection.trigger("update",this.collection)),this.cache.remove(e),p.Z.shouldCreateStateTree&&this.updateEntity()},hasOwnerFeature(e){if(this.supports("ownerFeatures")){const t=this.get("ownerFeatures");return!!(t&&t.indexOf(e)>-1)}return!!this.get("myPlexSubscription")&&X.indexOf(e)>-1},supports(e){const t=this.get(e);if(i().isBoolean(t))return t;const r=_.Z[e];return null!=r&&this.isVersionOrNewer(r)},isVersionOrNewer(e){const t=this.get("shortVersion");return!e||!t||(0,k.Z)(t,e)},hasRegression(e){if(!e)return!1;const t=this.isVersionOrNewer(e.introduced),r=e.resolved&&this.isVersionOrNewer(e.resolved);return t&&!r},hasOtherLoopbackServer(){return!!this.collection&&this.collection.hasLoopbackServer()},getLoopbackPort(){const e=this.get("connections").findWhere({isPrivate:!0});return e?e.get("port"):"32400"},authenticate(e){this._resolve({accessToken:e})},deauthenticate(){this._reject({accessToken:null})},_reset(){this.startCapturingChangeEvents(),this.set("promiseState",q.PENDING),this._resetPopulate(),this.releaseCapturedChangeEvents()},_resolve(e){const t=i().extend({connectionTestResult:K.CONNECTED,promiseState:q.RESOLVED},e);this.startCapturingChangeEvents(),this.set(t),p.Z.shouldCreateStateTree&&this.updateState(),this._resolvePopulate(),this.releaseCapturedChangeEvents()},_reject(e){const t=this.get("connections");t.hasOnlyFailedConnections()&&R.Z.warn("[Connections] All connections to %s failed",this.get("debugName"));const r=t.findWhere({isUnauthorized:!0})?K.UNAUTHORIZED:K.UNAVAILABLE,n=i().extend({connectionTestResult:r,promiseState:q.REJECTED},e);this.startCapturingChangeEvents(),this.set(n),this._rejectPopulate(),this.releaseCapturedChangeEvents()},_checkActiveConnection(){const e=this.get("activeConnection"),t=this.get("connections");if(e&&!t.contains(e)){const e=t.getBestConnection();e?this.set({activeConnection:e}):this.testAllConnections()}},onMachineIdentifierChange(e,t){this.collection?this.listenToOnce(this.collection,"change:machineIdentifier",(function(){this.updateCacheKey()})):this.updateCacheKey()},onConnectionRemove(e,t){t.length?this._checkActiveConnection():(this.trigger("change:connections.remove",e,t),this.trigger("change:connections.change",this,t),this.trigger("destroy",this,this.collection))},onConnectionsReset(e,t){e.length?this._checkActiveConnection():(this.trigger("change:connections.reset",e,t),this.trigger("change:connections.change",this,e),this.trigger("destroy",this,this.collection))},onConnectionTestSuccess(e,t){const r=this.get("connections").getBestConnection();if(r!==this.get("activeConnection")&&R.Z.info("[Connections] Active connection to %s is %s",this.get("debugName"),r.id),this._resolve($({activeConnection:r},t)),p.Z.allowLoopbackDiscovery){const e=this.get("connections"),t=this.get("activeConnection"),r=t.get("isPrivate"),n=!!e.findWhere({isLoopback:!0});!r||n||this.hasOtherLoopbackServer()||((0,R.Z)("[Connections] Adding possible loopback connection for",this.get("debugName")),this.addConnection(t.getLoopbackAttributes()))}},onConnectionTestError(e,t){if(e.get("isAborted"))return;const r=this.get("connections");!e.get("isHttps")||e.get("isUnauthorized")||e.get("relay")||(0,s.DB)("appStore").dispatch((0,x.zg)({serverEntityID:this.entityID(),address:e.get("address"),port:e.get("port")})),!this.id&&e.get("isUnauthorized")&&this.populateIdentity(e),r.hasOnlyFailedConnections()?this.id||!this._identityPromise?this._reject():this._identityPromise.always((()=>{r.hasOnlyFailedConnections()&&this._reject()})):r.hasFailedEveryDirectConnection()&&this.testOnlyUntestedRelayConnections()}},{connectionTestResults:K,promiseStates:q,serverClasses:Y});(0,d.Z)(ne,(function(){return{relationClass:(0,s.DB)("ServerFlexModel"),options:{server:this}}}));const ie=ne},76569:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(32975),i=r(13220),s=r(18655);const a=i.Z.extend({name:"SectionOverviewModel",context:["server"],rootPropertyName:"Section",syncedAttrs:{id:s.Z.integer,key:s.Z.string,type:s.Z.string,title:s.Z.string}}),o=n.Z.extend({name:"SectionOverviewCollection",context:["server"],model:a}),l=i.Z.extend({name:"ServerOverviewModel",context:["server"],idAttribute:"machineIdentifier",rootPropertyName:"Server",urlRoot:"/api/servers",syncedAttrs:{machineIdentifier:s.Z.string,name:s.Z.string,address:s.Z.string,port:s.Z.string,version:s.Z.string,createdAt:s.Z.integer,updatedAt:s.Z.integer},syncedRelations:{sections:{relationClass:o,rootPropertyName:"Section"}}}),c=n.Z.extend({name:"ServerOverviewCollection",context:["server"],model:l})},53611:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(32975),i=r(13220),s=r(18655),a=r(3615);const o="bool",l="enum";function c(e,t){switch(e){case"int":case l:return a.Z.parseInteger(t);case o:return a.Z.parseBoolean(t);default:return t}}const d=i.Z.extend({idAttribute:"id",url:"/:/prefs",context:["server"],sessionAttrs:{isSaving:s.Z.boolean},syncedAttrs:{id:s.Z.string,label:s.Z.string,default:s.Z.oneOfType(s.Z.integer,s.Z.string,s.Z.boolean,s.Z.array),summary:s.Z.string,value:{type:s.Z.oneOfType(s.Z.integer,s.Z.string,s.Z.boolean,s.Z.array),save:!0},type:s.Z.oneOf("int","text",o,l,"double"),group:s.Z.string,advanced:s.Z.boolean,option:s.Z.string,hidden:s.Z.boolean,enumValues:s.Z.array,values:s.Z.string},defaults:{isSaving:!1,type:"string",summary:"",label:"",group:""},augmentResponse(e){if(e.value=c(e.type,e.value),e.advanced=c(o,e.advanced),e.hidden=c(o,e.hidden),e.enumValues&&!Array.isArray(e.enumValues)&&(e.enumValues=e.enumValues.split("|").map((t=>{const[r,n=r]=t.split(":");return{label:n,value:c(e.type,r)}}))),e.type===l&&e.values&&!Array.isArray(e.values)){let t=0;e.enumValues=e.values.split("|").map((e=>({label:e,value:t++})))}return e},getSaveParams(e){const t=i.Z.prototype.getSaveParams.apply(this,arguments);return e&&!e.hasOwnProperty("value")?(Object.keys(t).forEach((t=>delete e[t])),t):{[this.get("id")]:t.value}}}),u=n.Z.extend({name:"ServerSettingCollection",context:["server"],url:"/:/prefs",model:d,augmentResponse:e=>e.Setting?(Array.isArray(e.Setting)?e.Setting:[e.Setting]).filter((e=>e.id)):[]})},54562:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={multipleEditions:"1.28.1",playlistArtEditing:"1.24.5",gridPagination:"1.24.4",playlistPosterEditing:"1.23.5",v4DVRSetup:"1.22.2",gracenoteAttribution:"1.21.1",firstCharacterKeySortDirection:"1.20.4",pivotIDs:"1.20.4",freeLiveTVDVRSettings:"1.20.2",augmentedHubsInRelatedHubs:"1.19.5",simpleRelatedKey:"1.19.2",transientTokenProxy:"1.15.4",mediaProvidersServerRoot:"1.13.10",streamDisplayTitles:"1.13.8",bundledWebAppNewSettingsRoutes:"1.13.8",softSubtitlesWithDirectPlay:"1.13.4",truePlaylistsPath:"1.9.3",optimizeDatabaseActivity:"1.4.2",asyncCheckFiles:"1.4.0",json:"1.8.0",allowBlacklistedMethodHeaders:"1.2.1",decisionEndpoint:"1.0.3",defaultSections:"0.9.17.3",ownerFeatures:"0.9.17.0",replaceTranscodeTarget:"0.9.17.0",relay:"0.9.15.0",claimServer:"0.9.14.2",searchSpecificType:"0.9.14.2",linkedYearMetadata:"0.9.14.0",streamReady:"0.9.14.0",syncOriginalQuality:"0.9.14.0",allPartsStreamSelection:"0.9.12.5",sharedChannels:"0.9.12.5",shortenTranscodeURL:"0.9.12.5",editSimilarArtists:"0.9.12.2",neuterRedirect:"0.9.12.0",audioAsVideo:"0.9.12.0",compositeDelete:"0.9.12.0",batchEdit:"0.9.12.0",premiumMusic:"0.9.12.0",transientToken:"0.9.12.0",softSubtitles:"0.9.12.0",sharedSyncStatus:"0.9.11.14",reachability:"0.9.11.14",photoPlayQueues:"0.9.11.12",publicNowPlaying:"0.9.11.3",labels:"0.9.11.2",updater:"0.9.11.1",playItemsBatchAdd:"0.9.9.16",playlists:"0.9.9.13",imageFilters:"0.9.9.13",hubFilterSigns:"0.9.9.12",cancelAllUpdates:"0.9.9.10",playQueues:"0.9.9.6",sectionSettings:"0.9.9.6",hubFilters:"0.9.9.2",streamingMKV:"0.9.9.16",chunkedHTTP:"0.9.9.3",sharedSync:"0.9.9.3",dash:"0.9.8.6",specificMediaDeletion:"0.9.7.23",sharedSettings:"0.9.7.23",syncNotifications:"0.9.7.23",universalMusicTranscoder:"0.9.8.3",universalTranscoder:"0.9.7.17",sync:"0.9.7.10",artworkUpload:"0.9.7.9",firstRunPref:"0.9.7.3",timelineState:"0.9.7.2",cleanBundles:"0.9.7.0",advancedFilters:"0.9.7.0",search:"0.9.7.0",merge:"0.9.7.0",splitApart:"0.9.7.0"}},82633:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(13469),i=r.n(n),s=r(3578),a=r(13220),o=r(71273),l=r(32903);const c=a.Z.extend({name:"AbstractStorageModel",responseType:o.AV,save(e,t,r={}){const n=this.attributes;let s;if(null==e||i().isObject(e)?(s=e,r=t):(s={})[e]=t,r=i().extend({validate:!0},r),s&&!r.wait){if(!this.set(s,r))return!1}else if(!this._validate(s,r))return!1;s&&r.wait&&(this.attributes=i().extend({},n,s));const a=this._getStorageAdapter().getInstance().excludeDefaults,o=this.toJSON({syncedOnly:!0,excludeDefaults:!1!==a}),l=this._serialize(o),c=this._getStorageAdapter().set(this._getStorageKey(),l);return c.done((()=>{this.attributes=n,this.trigger("sync",this,n,r)})),c.fail((e=>{this.trigger("error",this,e,r)})),s&&r.wait&&(this.attributes=n),c},destroy(e={}){e.wait||this.trigger("destroy",this,this.collection,e);const t=this._getStorageAdapter().remove(this._getStorageKey());return t.done((t=>{e.wait&&this.trigger("destroy",this,this.collection,e),this.trigger("sync",this,t,e)})),t.fail((t=>{this.trigger("error",this,t,e)})),t},sync(){this._logError("does not support syncing to a server")},_getStorageAdapter:()=>s.Z,_getStorageKey(){const e=i().result(this,"storageKey");if(!e)throw new Error(`${this.name} requires a \`storageKey\` property`);return e},_fetch(e={}){const t=this._getStorageAdapter().get(this._getStorageKey());return t.done((t=>{t&&this.set(this.parse(t)),this.trigger("sync",this,t,e)})),t.fail((t=>{this.trigger("error",this,t,e)})),t},_serialize(e){let t="";try{t=JSON.stringify(e)}catch(e){this._logError("serialization error: "+e.message)}return t},_warnUnsupportedOptions(e){e.parse&&this._logError("does not support the `parse` option. The response from storage is always parsed."),e.success&&this._logError("does not support a `success` callback. Use the returned promise."),e.error&&this._logError("does not support an `error` callback. Use the returned promise.")},_logError(e){let t;try{t=this._getStorageKey()}catch(e){t="no storageKey"}(0,l.Z)(!1,`${this.name} (${t}) ${e}`)}})},52094:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(77349),i=r(33947),s=r(83894),a=r(42227),o=r(42902),l=r(69119),c=r(7069),d=r(13469),u=r.n(d),p=r(13220),m=r(18655),h=r(71273),g=r(49253),y=r(49688);const v=p.Z.extend({name:"CalendarModel",context:["server"],url:"/media/subscriptions/scheduled",sessionAttrs:{visibleDays:m.Z.integer,time:m.Z.integer},syncedRelations:{scheduled:{relationClass:g.Z,rootPropertyName:"MediaGrabOperation"}},derivedAttrs:{startTime(){const e=this.get("visibleDays"),t=(0,a.Z)(this.get("time"));let r=(0,l.Z)(t);return e>1&&(r=(0,c.Z)(r,1)),(0,o.Z)(r)},endTime(){const e=this.get("visibleDays"),t=(0,a.Z)(this.get("time"));let r=(0,s.Z)(t);return e>1&&(r=(0,n.Z)(r,e-2)),(0,o.Z)(r)},daysOfWeek(){const e=(0,a.Z)(this.get("startTime")),t=(0,a.Z)(this.get("endTime")),r=(0,i.Z)(t,e);return u().times(Math.min(r+1,7),(t=>(0,o.Z)((0,n.Z)(e,t))))},days(){const e=(0,a.Z)(this.get("startTime")),t=(0,a.Z)(this.get("endTime")),r=(0,i.Z)(t,e);return u().times(r+1,(t=>(0,o.Z)((0,n.Z)(e,t))))},firstEvent(){return this.get("scheduled").first()},lastEvent(){return this.get("scheduled").last()},hasPastEvents(){const e=this.get("firstEvent");return!!e&&e.get("beginsAt")<this.get("startTime")},hasFutureEvents(){const e=this.get("lastEvent");return!!e&&e.get("beginsAt")>this.get("endTime")}},defaults:()=>({visibleDays:7,time:(0,o.Z)(Date.now())}),augmentResponseText:(e,t)=>t===h.Ls?(0,y.Z)(e):e})},49253:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(32975),i=r(25413);const s=n.Z.extend({name:"MediaGrabOperationCollection",context:["server","provider"],model:i.Z,comparator(e){const t=e.get("mediaItem");if(t)return t.beginsAt-(t.startOffsetSeconds||0)}})},25413:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(45191),i=r(13220),s=r(18655),a=r(8238),o=r(22094),l=r(71951),c=r(3615),d=r(82650),u=r(35387),p=r(89107);const m=i.Z.extend({name:"MediaGrabOperationModel",context:["server","provider"],idAttribute:"key",rootPropertyName:"MediaGrabOperation",url(){return this.get("key")},syncedAttrs:{mediaSubscriptionID:s.Z.string,provider:s.Z.string,identifier:s.Z.string,mediaIndex:s.Z.integer,channelTitle:s.Z.string,status:s.Z.string,error:s.Z.string,linkedKey:s.Z.string,key:s.Z.string,rolling:s.Z.boolean},sessionAttrs:{isLibraryMetadataItemPending:s.Z.boolean,isLibraryMetadataItemPopulated:s.Z.boolean,libraryMetadataItemError:s.Z.object},syncedRelations:{metadataItem:{relationClass:o.Z,rootPropertyName:"Metadata"},conflicts:()=>({relationClass:r(49253).Z,deferred:!0})},sessionRelations:{libraryMetadataItem:{relationClass:o.Z,deferred:!0}},derivedAttrs:{mediaItem(){const e=this.get("mediaIndex");return(this.get("metadataItem").get("Media")||[])[e]},beginsAt(){const e=this.get("mediaItem");return e&&e.beginsAt},endsAt(){const e=this.get("mediaItem");return e&&e.endsAt}},defaults:{rolling:!1,isLibraryMetadataItemPending:!0,isLibraryMetadataItemPopulated:!1,libraryMetadataItemError:null},augmentResponse(e){let t=e;if(t[this.rootPropertyName]&&(t=t[this.rootPropertyName]),t.Conflicts&&(t.conflicts=t.Conflicts.MediaGrabOperation,delete t.Conflicts),!a.Z.shouldCreateStateTree)return t;const r=t.Metadata,i=c.Z.parseArray(r.Media),s=c.Z.parseInteger(t.mediaIndex),o=(0,d.Z)(u.TY,r.key,this.server.entityID()),m=(0,n.DB)("appModel"),h=(0,p.l)(m,u.TY,o);if(h){const e=h.get("Media").map(l.Z),r=i.map(l.Z)[s],n=e.findIndex((e=>r===e));t.mediaIndex=-1!==n?n:s+e.length}return t}})},30428:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(32975),i=r(60567);const s=n.Z.extend({name:"MediaSettingCollection",context:["server","provider"],model:i.Z,getSaveParams(){return this.reduce(((e,t)=>(e[t.id]=t.get("value"),e)),{})}})},60567:(e,t,r)=>{"use strict";r.d(t,{E:()=>a,Z:()=>l});var n=r(13220),i=r(18655),s=r(3615);const a={INT:"int",TEXT:"text",BOOL:"bool",DOUBLE:"double"};function o(e,t){switch(e){case a.INT:case a.ENUM:return s.Z.parseInteger(t);case a.BOOL:return s.Z.parseBoolean(t);case a.DOUBLE:return s.Z.parseFloat(t);default:return t}}const l=n.Z.extend({name:"MediaSettingModel",context:["server","provider"],idAttribute:"id",rootPropertyName:"Setting",syncedAttrs:{id:i.Z.string,advanced:i.Z.boolean,default:i.Z.oneOfType(i.Z.integer,i.Z.string,i.Z.boolean),hidden:i.Z.boolean,group:i.Z.string,label:i.Z.string,summary:i.Z.string,type:i.Z.oneOf(a.INT,a.TEXT,a.BOOL,a.ENUM,a.DOUBLE),value:i.Z.oneOfType(i.Z.integer,i.Z.float,i.Z.string,i.Z.boolean),min:i.Z.float,max:i.Z.float,step:i.Z.float,enumValues:i.Z.array},augmentResponse:e=>(e.default=o(e.type,e.default),e.value=o(e.type,e.value),e.enumValues&&(e.enumValues=e.enumValues.split("|").map((t=>{const[r,n=r]=t.split(":");return{label:decodeURIComponent(n),value:o(e.type,r)}}))),e),parseAndSetValue(e){this.set("value",o(this.get("type"),e))}})},10415:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(32975),i=r(71273),s=r(84301),a=r(49688),o=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e,t,r){if(Array.isArray(e))return e.map((e=>h(e,t,r)));if((0,s.Z)(e))for(const n in e){const i=e[n];let s;t[n]?(s=r,delete e[n]):s=n,e[s]=h(i,t,r)}return e}const g=function(e,t){let r=t&&t.includeDirectories?["Directory",...a.l]:a.l;return r=r.reduce(((e,t)=>{return r=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({},e),l(r,c({[t]:t}));var r}),{}),h(e,r,"Metadata")};var y=r(20683),v=r(90298);const f=n.Z.extend({name:"MediaSubscriptionCollection",context:["server"],instanceOptions:[...n.Z.prototype.instanceOptions,"includeDirectories","includeGrabs","includePreferences","includeStorage","includeTarget"],model:v.Z,url(){const e={};return this.includeGrabs&&(e.includeGrabs=1),this.includePreferences&&(e.includePreferences=1),this.includeStorage&&(e.includeStorage=1),this.includeTarget&&(e.includeTarget=1),y.Z.join("/media/subscriptions",e)},augmentResponseText(e,t){return t===i.Ls?(0,a.Z)(e,{includeDirectories:!!this.includeDirectories}):e},augmentResponse(e,t){return t===i.AV?g(e,{includeDirectories:!!this.includeDirectories}):e}})},90298:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(13220),i=r(18655),s=r(21580),a=r(78449),o=r(71273),l=r(49688),c=r(82650),d=r(35387),u=r(49253),p=r(30428);const m=n.Z.extend({name:"MediaSubscriptionHintModel",context:["server","provider"],syncedAttrs:{guid:i.Z.string,grandparentGuid:i.Z.string,title:i.Z.string,type:i.Z.string,subtype:i.Z.string,grandparentTitle:i.Z.string,index:i.Z.integer,parentIndex:i.Z.integer,year:i.Z.string,grandparentYear:i.Z.integer,originallyAvailableAt:i.Z.string,thumb:i.Z.string,parentThumb:i.Z.string,grandparentThumb:i.Z.string,ratingKey:i.Z.string,source:i.Z.string,parentTitle:i.Z.string,parentYear:i.Z.string}});var h=r(22094);const g=n.Z.extend({name:"MediaSubscriptionTargetModel",context:["server","provider"],syncedRelations:{metadata:{relationClass:h.Z,rootPropertyName:"Metadata",deferred:!0}}});var y=Object.defineProperty,v=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const S=n.Z.extend({name:"MediaSubscriptionModel",context:["server","provider"],entityType:d.PK,entityID(e=this.state){return(0,c.Z)(this.entityType,e.key||this.cid,this.server.entityID())},idAttribute:"key",rootPropertyName:"MediaSubscription",urlRoot:"/media/subscriptions",mergeStrategy:a.Z,syncedAttrs:{key:i.Z.string,type:i.Z.integer,provider:i.Z.string,targetLibrarySectionID:{type:i.Z.string,save:!0},targetSectionLocationID:{type:i.Z.string,save:!0},title:i.Z.string,selected:i.Z.boolean,parameters:i.Z.string,createdAt:i.Z.integer,storageTotal:i.Z.integer},syncedRelations:{hint:{relationClass:m,rootPropertyName:"Metadata",deferred:!0},target:{relationClass:g,rootPropertyName:"Target",deferred:!0},grabOperations:{relationClass:u.Z,rootPropertyName:"MediaGrabOperation",deferred:!0},prefs:{relationClass:p.Z,rootPropertyName:"Setting",deferred:!0,save:!0},timeline:{relationClass:s.Z,rootPropertyName:"Timeline",deferred:!0}},augmentResponseText:(e,t)=>t===o.Ls?(0,l.Z)(e):e,augmentResponse(e){const t=e[this.rootPropertyName]||e,r=t.Timeline;return r&&(t.Timeline=r.Metadata),e},getSaveParams(){const e=n.Z.prototype.getSaveParams.apply(this,arguments),{Setting:t}=e;return((e,t)=>{for(var r in t||(t={}))f.call(t,r)&&Z(e,r,t[r]);if(v)for(var r of v(t))b.call(t,r)&&Z(e,r,t[r]);return e})({prefs:t},((e,t)=>{var r={};for(var n in e)f.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&v)for(var n of v(e))t.indexOf(n)<0&&b.call(e,n)&&(r[n]=e[n]);return r})(e,["Setting"]))}})},39665:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(32975),i=r(71273),s=r(49688),a=r(90298);const o=n.Z.extend({name:"MediaSubscriptionTemplateCollection",context:["server","provider"],url:"/media/subscriptions/template",model:a.Z,augmentResponseText:(e,t)=>t===i.Ls?(0,s.Z)(e):e,augmentResponse:e=>e.SubscriptionTemplate})},94308:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(32975),i=r(71273),s=r(13220),a=r(18655);const o=s.Z.extend({name:"AdvertisingVendorModel",rootPropertyName:"vendors",sessionAttrs:{id:a.Z.integer,name:a.Z.string,policyUrl:a.Z.string,shortName:a.Z.string}}),l=n.Z.extend({name:"AdvertisingVendorCollection",context:["server"],model:o,url:"/api/v2/ads/vendors",responseType:i.AV})},94080:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(32975),i=r(71273),s=r(22169),a=r(13220),o=r(18655);const l=a.Z.extend({name:"UserFeatureModel",idAttribute:"uuid",syncedAttrs:{uuid:o.Z.string.isRequired,id:o.Z.string}}),c=n.Z.extend({name:"UserFeatureCollection",context:["server"],model:l,url:(0,s.Y)("/api/v2/features"),responseType:i.AV})},46291:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(13220),i=r(18655),s=r(22094),a=r(32975);const o=n.Z.extend({name:"SyncplaySessionUserModel",idAttribute:"deviceIdentifier",sessionAttrs:{adDisplayIndex:i.Z.integer,adDisplayTotal:i.Z.integer,deviceIdentifier:i.Z.string.isRequired,deviceName:i.Z.string.isRequired,id:i.Z.integer.isRequired,isAdPlaying:i.Z.boolean,isPresent:i.Z.boolean,isReady:i.Z.boolean,isWatching:i.Z.boolean,positionSeconds:i.Z.oneOfType(i.Z.integer,i.Z.float),thumb:i.Z.string,title:i.Z.string},defaults:{deviceIdentifier:null,deviceName:null,id:null,isAdPlaying:!1,isReady:!1,isWatching:!1,positionSeconds:0}}),l=a.Z.extend({name:"SyncplaySessionUserCollection",model:o}),c=n.Z.extend({name:"SyncplaySessionModel",idAttribute:"roomID",sessionAttrs:{notifications:i.Z.array,roomID:i.Z.string},sessionRelations:{metadataItem:{relationClass:s.Z,deferred:!0},users:{relationClass:l}},defaults:{notifications:[]}})},10033:(e,t,r)=>{"use strict";r.d(t,{v4:()=>D,Oq:()=>M,D8:()=>U,dC:()=>T,RK:()=>x,Nx:()=>A,On:()=>k,eS:()=>N,$v:()=>L,rP:()=>R,kO:()=>O,gC:()=>C,M8:()=>j,i:()=>V,x:()=>F,f9:()=>w,CC:()=>J,a7:()=>H,h9:()=>z,Us:()=>X,$e:()=>G,c4:()=>Q,n:()=>$,yB:()=>K,yy:()=>W,I2:()=>_,T5:()=>q,zt:()=>Y,qO:()=>B});var n=r(15451),i=r(84503),s=r(86832),a=r(84301);let o,l,c=0,d=0;function u(e,t){return(0,a.Z)(e)?function(e,t){const r=e.possibleEntityContainers,n=r?r.length:0;for(let i=0;i<n;i++)if(u(e[r[i]],t))return!0;return!1}(e,t):Array.isArray(e)?function(e,t){for(let r=0,n=e.length;r<n;r++)if(u(e[r],t))return!0;return!1}(e,t):e===t}function p(e,t){return e+1>=t?0:e+1}var m=r(76389),h=r(87442),g=r(6742),y=Object.defineProperty,v=Object.defineProperties,f=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))Z.call(t,r)&&P(e,r,t[r]);if(b)for(var r of b(t))S.call(t,r)&&P(e,r,t[r]);return e},E=(e,t)=>v(e,f(t));const w="app/setPrimaryServer",C="app/resetPrimaryServer",M="app/changePrimaryServer",D="app/changeCompanionServer",O="app/removeCompanionServer",T="app/garbageCollectEntities",x="app/navigate",A="app/navigateBack",k="app/navigateForward",N="app/navigateHome",R="app/navigateSearch",L="app/navigatePrePlay",j="app/saveDeviceSettings",V="app/saveLastSourcePivot",U="app/clearLastSourcePivots",F="app/savePivotParams",B=(0,n.Z)(w),_=(0,n.Z)(C),z=(0,n.Z)(M),H=(0,n.Z)(D),W=(0,n.Z)(O),G=(0,n.Z)(T),Q=(0,n.Z)(x),$=(0,n.Z)(A),K=((0,n.Z)(k),(0,n.Z)(N),(0,n.Z)(R),(0,n.Z)(L)),q=(0,n.Z)(j),Y=(0,n.Z)(V),X=(0,n.Z)(U),J=((0,n.Z)(F),{[T](e,t){(0,h.c9)();const r=function(e,t={}){const r=null!=t.budget?t.budget:16.666666666666668,n=window.performance.now(),i=e.entities,s=Object.keys(i),a=s.length,m={};r===1/0&&(c=0,d=0);const h=i[s[c]];for(o=c,l=Math.max(Math.min(d,Object.keys(h).length-1),0);c<a;){const t=s[c],h=i[t],g=Object.keys(h),y=g.length,v=p(c,a);for(;d<y;){const i=g[d],s=p(d,y);if(u(e,i)||(m[t]||(m[t]=[]),m[t].push(i)),v===o&&s===l)return c=v,d=s,m;if(window.performance.now()-n>=r)return c=v,d=s,m;d++}if(c=v,d=0,c===o&&d===l)return m}return m}(e.getState(),t),n=e.get("entities");for(const e in r){const t=r[e];n.get(e).remove(t)}t&&t.budget===1/0&&Object.keys(r).length&&(0,h.c9)()},[V](e,t,r){const n=(0,m.SW)(e,t),s=(0,m.js)(e,t),a=e.get("user").get("experienceSettings"),o=a.get("lastSourcePivots");if(!a.get("shouldSaveLastSourcePivots"))return;const l=(0,g.Z)(n.get("machineIdentifier"),s.get("identifier"),t.directoryID);r((0,i.LN)({lastSourcePivots:E(I({},o),{[l]:t.pivotKey})}))},[U](e,t,r){r((0,i.LN)({lastSourcePivots:{}}))},[F](e,t,r){const n=(0,m.SW)(e,t),s=(0,m.js)(e,t),a=e.get("user").get("experienceSettings").get("savedPivotParams"),o=(0,g.Z)(n.get("machineIdentifier"),s.get("identifier"),t.directoryID,t.pivotKey);r((0,i.LN)({savedPivotParams:E(I({},a),{[o]:t.params})}))},[M](e,t){},[C](e,t){},[w](e,t){},[D](e,t){const r=(0,m.$w)(e,t);r?e.set("companionServer",r):s.Z.warn("[Companion] Could not find %s to use as companion server",t.serverEntityID)},[O](e){e.unset("companionServer")},[x](){},[A](){},[k](){},[N](){},[R](){},[L](){},[j](){}})},15451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e,t){return function(...r){const n="function"==typeof t?t(...r):r[0];return{type:e,payload:n}}}},2380:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n}),r(32903),r(84301);const n=function(e){return e}},6730:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(19755),i=r.n(n),s=r(86832);const a=2500;function o(e){const{eventSource:t,events:r,predicate:n=(()=>!0),waitDuration:o=a}=e,l=i().Deferred(),c=()=>{n(t)&&(u=window.clearTimeout(u),t.off(d),l.resolve(t))},d=r.reduce(((e,t)=>(e[t]=c,e)),{});let u=window.setTimeout((()=>{s.Z.warn('Model "%s" events %o did not pass the predicate within %dms',t.name,r,o),t.off("add",d),l.reject(t)}),o);return t.on(d),l.promise()}},52917:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(19755),i=r.n(n),s=r(6730);function a(e){return e.get("isPopulated")?i().Deferred().resolve(e).promise():(0,s.Z)({eventSource:e,events:["change:error","change:isPopulated"]})}},81775:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(19755),i=r.n(n),s=(r(32903),r(64591)),a=r(73703),o=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e){const{key:t,getModel:r}=e;return function(e){const{key:t,getModel:r,onResolved:n,onRejected:i}=e,o=(0,s.Z)(t),l=`is${o}Pending`,c=`is${o}Populated`,d=t?`${t}Error`:"error";return(t,s={},o)=>{const u=r(t,s),p=(u.sessionAttrs,u.get(l));u.set(l,!0),e.fetch(t,s,o).then((()=>{u.set({[l]:!1,[c]:!0,[d]:null}),n&&n(u,t,s,o)}),(e=>{const r=e.aborting?{[l]:p}:{[l]:!1,[d]:(0,a.Z)(e)};u.set(r),i&&i(u,t,s,o)}))}}((n=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({},e),l(n,c({fetch(e,n){const s=r(e,n),a=t?s.get(t):s;return a?a.fetch(n.options).then(null,((e,t)=>i().Deferred().reject(t).promise())):i().Deferred().reject({status:0}).promise()}}))));var n}},48209:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i}),r(32903);var n=r(64591);function i(e){const{key:t,fetchActionCreator:r,getModel:i}=e,s=`is${(0,n.Z)(t)}Populated`;return(e,t,n)=>{i(e,t).get(s)||n(r(t))}}},64253:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s}),r(32903);var n=r(64591),i=r(73703);function s(e){const{key:t,getModel:r}=e,s=(0,n.Z)(t),a=`is${s}Pending`,o=`is${s}Populated`,l=t?`${t}Error`:"error";return(e,n)=>{const{startIndex:s,endIndex:c,pages:d=3,reloadThreshold:u=6,disableReloadThreshold:p}=n,m=c-s+1,h=r(e,n),g=t?h.get(t):h;h.sessionAttrs;const y=g.get("populatedRange");let v=s,f=c;if(s<y.start?v=Math.max(0,s-m*d):f=s+m*d,v>=y.start&&f<=y.end)return;const b=h.get(a);h.set(a,!0),g.populateRange({start:v,end:f,reloadThreshold:p?null:m*u}).done((()=>{h.set({[a]:!1,[o]:!0,[l]:null})})).fail(((e,t)=>{t.aborting?h.set(a,b):h.set({[a]:!1,[l]:(0,i.Z)(t)})}))}}},72538:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s}),r(32903);var n=r(64591),i=r(73703);function s(e){const{key:t,getModel:r}=e,s=(0,n.Z)(t),a=`is${s}Pending`,o=`is${s}Populated`,l=t?`${t}Error`:"error";return(e,n={})=>{const{count:s}=n,c=r(e,n),d=t?c.get(t):c;c.sessionAttrs;const u=c.get(a);c.set(a,!0),d.repopulateRange(s).done((()=>{c.set({[a]:!1,[o]:!0,[l]:null})})).fail(((e,t)=>{t.aborting?c.set(a,u):c.set({[a]:!1,[l]:(0,i.Z)(t)})}))}}},6678:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(45191),i=r(76569),s=r(69272),a=r(76389);function o(e){const t=(0,n.DB)("appModel"),r=t.get("user"),o=new i.Z(e.map((e=>({machineIdentifier:(0,a.SW)(t,{serverEntityID:e}).get("machineIdentifier")}))),{server:r.server});return(0,s.Z)(o.map((e=>e.fetch()))).then((()=>{const e=o.filter((e=>!e.isPopulated()));return o.remove(e),o}))}},44442:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(19755),i=r.n(n),s=r(45191),a=r(75404),o=r(85209),l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function g(e,t={}){const{allowMetrics:r,metricsProperties:n={}}=t,l=e.server,g=`/library/metadata/${e.get("ratingKey")}/analyze`,y=l.getXHROptions(g,{type:"PUT"}),v=e.get("mediaState"),f="analyzing",b=(0,o.isDirectoryType)(e.get("type"));b||e.set("mediaState",f);const Z=i().ajax(y).fail((t=>{b||e.get("mediaState")!==f||e.set("mediaState",v)}));var S,P;return r&&(0,s.DB)("metrics").trackClick((S=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},n),P={action:a._R,type:e.get("type")},c(S,d(P)))),Z.promise()}},26829:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(8238),i=r(74174);const s=function(e){return n.Z.shouldRequestHTMLFromCloudProvider,i.rS}},17329:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(19755),i=r.n(n),s=r(45191),a=r(75404),o=r(39169),l=r(86418),c=r(20683),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function v(e,t,r){const{rating:n,allowMetrics:d,metricsProperties:v={}}=r,f=e.get("features").get(l.Z.ACTIONS).get("actions").get(o.zw);if(!f)return i().Deferred().reject().promise();const b={key:t.get("ratingKey"),identifier:t.get("identifier"),rating:n},Z=c.Z.join(f.get("key"),b),S=e.getXHROptions(Z,{type:"PUT"}),P=t.get("userRating"),I=-1===n?void 0:n;t.set("userRating",I);const E=i().ajax(S).fail((e=>{t.get("userRating")===I&&t.set("userRating",P)}));var w,C;return d&&(0,s.DB)("metrics").trackClick((w=((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e})({},v),C={action:a.zw,type:t.get("type"),rating:n},u(w,p(C)))),E.promise()}},71701:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(19755),i=r.n(n),s=r(45191),a=r(35664),o=r(75404),l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function g(e,t={}){const{allowMetrics:r,metricsProperties:n={}}=t,l=e.server,g=`/library/metadata/${e.get("ratingKey")}/refresh`,y=l.getXHROptions(g,{type:"PUT"}),v=e.get("metadataState"),f=a.em;e.set("metadataState",f);const b=i().ajax(y).fail((t=>{e.get("metadataState")===f&&e.set("metadataState",v)}));var Z,S;return r&&(0,s.DB)("metrics").trackClick((Z=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},n),S={action:o.RG,type:e.get("type")},c(Z,d(S)))),b.promise()}},86423:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(19755),i=r.n(n),s=r(39169),a=r(86418),o=r(74226),l=(r(32903),r(82650)),c=r(35387),d=r(76389),u=r(85209),p=r(20683),m=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Z=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&b(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&b(e,r,t[r]);return e},S=(e,t)=>h(e,g(t));function P(e,t={}){const{played:r,providerEntityID:n,serverEntityID:l,metadataItemEntityID:c}=t,u=(0,d.js)(e,t);if(null==u){const e="Could not find providerModel with provided `providerEntityID`";return i().Deferred().reject({errorMessage:e}).promise()}if(null==(0,d.SW)(e,t)){const e="Could not find serverModel with provided `serverEntityID`";return i().Deferred().reject({errorMessage:e}).promise()}const m=(0,d.tz)(e,{metadataItemEntityID:c});if(null==m){const e="Could not find metadataModel with provided `metadataItemEntityID`";return i().Deferred().reject({errorMessage:e}).promise()}const h=u.get("features").get(a.Z.ACTIONS).get("actions").get(s.lq),g=r?h.get("key"):h.get("reverseKey"),y={identifier:m.get("identifier")||o.Y3,key:m.get("ratingKey")},v=p.Z.join(g,y),f=i().ajax(u.getXHROptions(v));return f.then((()=>{const t={providerEntityID:n,serverEntityID:l,metadataItemEntityID:m.entityID()};E(e,t,r),I(e,t,r)})),f}function I(e,t,r){const n=(0,d.tz)(e,t);if(n)if((0,u.isDirectoryType)(n.get("type"))){n.set({viewedLeafCount:r?n.get("leafCount"):0});const i=(0,l.Z)(c.$4,n.get("childrenKey"),t.providerEntityID||t.serverEntityID),s=(0,d.Ij)(e,{metadataListEntityID:i});s&&s.get("metadataItems").forEach((n=>{const i=S(Z({},t),{metadataItemEntityID:n.entityID()});I(e,i,r)}))}else n.set({viewOffset:0,viewCount:r?1:0})}function E(e,t,r,n){const i=(0,d.tz)(e,t);if(!i)return;const s=(0,u.getMetadataType)(i.get("type")),a=(0,l.Z)(c.TY,i.get("parentKey"),t.serverEntityID),o=(0,d.tz)(e,{metadataItemEntityID:a});let p;if(o&&(p=(0,u.getMetadataType)(o.get("type"))),p&&p.typeString===s.parent){let s;const l=(0,u.isDirectoryType)(i.get("type"));r?s=l?i.get("unviewedLeafCount"):1:(s=l?i.get("viewedLeafCount"):1,s*=-1);const c=null!=n?n:s;o.set({viewedLeafCount:o.get("viewedLeafCount")+c}),E(e,S(Z({},t),{metadataItemEntityID:a}),r,c)}}},79830:(e,t,r)=>{"use strict";r.d(t,{Z:()=>L});var n=r(19755),i=r.n(n),s=r(60526),a=r(22094),o=r(97968),l=r(32903),c=r(26894),d=r(85209),u=r(20683),p=r(21580),m=r(44073),h=Object.defineProperty,g=Object.defineProperties,y=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;let S=0;const P=function(e){S+=1;const t=S.toString(),r=(n=((e,t)=>{for(var r in t||(t={}))f.call(t,r)&&Z(e,r,t[r]);if(v)for(var r of v(t))b.call(t,r)&&Z(e,r,t[r]);return e})({},e.attributes),g(n,y({playQueueItemID:t})));var n;const i=new m.Z(r,{server:e.server,provider:e.provider,parent:e.parent,parse:!0});return i.set("isLocal",!0),i};var I=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function T(e,t,r={}){const n=t.get("type"),s=d.getMetadataType(n),a=d.getLeafType(n);if(!s)return i().Deferred().reject().promise();if(s.id===a.id){const s=e.get("playQueueItems"),a=t.get("containerKey");if(a&&!s.length&&!r.skipSiblings&&(n===d.TRACK||n===d.EPISODE||n===d.PHOTO)){const e=new p.Z([],{server:t.server,provider:t.provider});return e.fetch({url:a}).then((()=>{const t=e.models.map(P);return i().Deferred().resolve(t).promise()}))}return i().Deferred().resolve([P(t)]).promise()}if(d.getChildType(n).id===a.id){const e=u.Z.join([t.get("key"),"children"]),r=new p.Z([],{server:t.server,provider:t.provider});return r.fetch({url:e}).then((()=>{const e=r.models.map(P);return i().Deferred().resolve(e).promise()}))}return i().Deferred().reject().promise()}function x(e,t,r){const n=t.map((t=>T(e,t,r)));return i().when(...n).then(((...t)=>{const n=[].concat(...t);return e.get("playQueueItems").add(n,r),A(e)}))}function A(e,t){const r=e.get("playQueueItems");if(e.get("playQueueSelectedItemID")||!r.length)return i().Deferred().resolve(e).promise();if(t){const n=r.findWhere({metadataItem:t}),i=n?n.id:r.at(0).id;e.set("playQueueSelectedItemID",i)}else{const t=e.get("playQueueSelectedItemOffset"),n=r.at(t);e.set("playQueueSelectedItemID",n.id)}return i().Deferred().resolve(e).promise()}var k=r(20777);function N(e,t,r){const{path:n,model:i,attr:s="key"}=r;if((0,l.Z)(n||i,"A path or a model is required to build a source URI"),t.get("isUniversal")){const t=i&&i.get("source")||(0,c.Z)(e.server.get("machineIdentifier"),e.get("identifier")),r=n||i.get(s);return u.Z.join([t,r])}return n||o.Z.uri(i)}function R(e){return{type:e.playQueueModel.get("type"),shuffle:e.shuffle?1:void 0,next:e.next?1:void 0,extrasPrefixCount:e.extrasPrefixCount}}function L(e){const{playQueueModel:t}=e;if(t.get("isLocal"))return function(e){const{next:t,playQueueModel:r,metadataItemModel:n,metadataItemModels:s,metadataListModel:a,skipSiblings:o=!1}=e,l={at:t?r.get("playQueueSelectedItemOffset")+1:void 0};if(n)return T(r,n,{skipSiblings:o}).then((e=>(r.get("playQueueItems").add(e,l),A(r,n))));if(s&&s.length)return x(r,s,l);if(a){const e=a.get("metadataItems").models;return x(r,e,(c=((e,t)=>{for(var r in t||(t={}))M.call(t,r)&&O(e,r,t[r]);if(C)for(var r of C(t))D.call(t,r)&&O(e,r,t[r]);return e})({},l),E(c,w({skipSiblings:!0}))))}var c;return i().Deferred().reject().promise()}(e).then((()=>(0,k.ZP)(t)));const r=t.isNew()?"POST":"PUT";return function(e){return e.metadataItemModel?function(e){const{playQueueModel:t,providerModel:r,playlistModel:n,metadataItemModel:o,containerKey:l,shuffle:c,playAll:p}=e,m=t.get("isUniversal"),h=o.get("type"),g=h===d.SHOW,y=h===d.SEASON,v=h===d.EPISODE,f=h===d.PHOTO,b=h===d.CLIP,Z=h===d.TRACK,S=!!n||o.get("isPlaylist"),P=o.get("isExtra"),I=!!o.get("radio"),E=R(e);if((g||y||v)&&(E.continuous=1),(g||y)&&!p&&!c){const e=!o.get("parentKey"),n=g||e?o:new a.Z({key:o.get("parentKey")},{server:o.server,provider:o.provider});return n.fetch({merge:!0,data:{includeOnDeck:"1"}}).then((()=>{const e=n.get("onDeck"),i=e&&g,a=e&&y&&e.get("parentRatingKey")===o.get("ratingKey");if(i||a)return E.uri=N(r,t,{model:e}),E;if(y){const e=new s.Z({containerKey:o.get("childrenKey")},{server:o.server,provider:o.provider,skipCache:!0});return e.fetch().then((()=>{const n=e.get("metadataItems"),i=n.findWhere((e=>!e.get("viewCount")));return E.uri=N(r,t,{model:i||n.first()}),E}))}return E.uri=N(r,t,{model:o}),E}))}return S?n?(m&&(E.uri=N(r,t,{model:n})),E.playlistID=n.get("ratingKey"),E.key=o.get("key")):(m&&(E.uri=N(r,t,{model:o})),E.playlistID=o.get("ratingKey")):(Z||f||b&&!P)&&l&&!E.continuous?(E.uri=N(r,t,{path:m?l:`library:///directory/${encodeURIComponent(l)}`}),E.key=o.get("key")):E.uri=N(r,t,I&&m?{path:u.Z.join(o.get("key"),{includeSharedContent:1})}:{model:o}),i().Deferred().resolve(E).promise()}(e):e.metadataItemKey?function(e){const{providerModel:t,playQueueModel:r,metadataItemKey:n}=e,s=r.get("isUniversal"),a=R(e);return a.uri=N(t,r,{path:s?n:`library:///item/${encodeURIComponent(n)}`}),i().Deferred().resolve(a).promise()}(e):e.metadataItemModels&&e.metadataItemModels.length?function(e){const t=R(e);return t.uri=o.Z.uri(null,{items:e.metadataItemModels}),i().Deferred().resolve(t).promise()}(e):e.metadataListModel?function(e){const{providerModel:t,playQueueModel:r,metadataListModel:n}=e,s=R(e);return s.uri=N(t,r,{model:n,attr:"containerKey"}),i().Deferred().resolve(s).promise()}(e):i().Deferred().reject().promise()}(e).then((e=>(0,k.ZP)(t,{params:e,type:r}).then(null,(()=>i().Deferred().reject().promise()))))}},90446:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(19755),i=r.n(n),s=r(13220),a=r(18655),o=r(37233);const l=s.Z.extend({name:"LocalPlayQueueModel",context:["server","provider"],url(){const e=this.get("playQueueItems"),t=this.get("playQueueSelectedItemID"),r=e.get(t);if(r)return r.get("metadataItem").get("key")},sessionAttrs:{key:a.Z.string,playQueueID:a.Z.string,isLocal:a.Z.boolean,type:a.Z.string,repeat:a.Z.boolean,own:a.Z.boolean,isUpdatePending:a.Z.boolean,playQueueShuffled:a.Z.boolean,playQueueSelectedItemID:a.Z.string},sessionRelations:{playQueueItems:{relationClass:o.Z}},derivedAttrs:{playQueueTotalCount(){return this.get("playQueueItems").length},length(){return this.get("playQueueItems").length},playQueueSelectedItemOffset(){const e=this.get("playQueueItems"),t=this.get("playQueueSelectedItemID");if(!t)return 0;const r=e.get(t);return e.indexOf(r)},currentIndex(){return this.get("playQueueSelectedItemOffset")},canShuffle:()=>!1},defaults:{isLocal:!0,repeat:!1,own:!0,isUpdatePending:!1,playQueueShuffled:!1,playQueueSelectedItemOffset:0},fetch:function(){return i().Deferred().resolve(this).promise()}});var c=r(51196),d=(r(52501),r(86418)),u=r(89083);function p(e){const{providerModel:t,playQueueID:r,playQueueType:n,playQueueRepeat:i,playQueueOwn:s=!0}=e,a=t&&t.get("features"),o=a&&a.get(d.Z.PLAY_QUEUE),p=!!o&&o.get("flavor")===u.D7;return o?new c.Z({playQueueID:r,key:o.get("key"),type:n,repeat:i,own:s,isUniversal:p},{server:t.server,provider:t}):new l({playQueueID:r,type:n},{server:t.server,provider:t})}r(32903)},49244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(19755),i=r.n(n),s=r(45191),a=r(62682),o=r(86832),l=r(85209),c=r(22094),d=r(35076),u=r(8089);function p(e,t={}){let r=t.forceFetch||!e.get("isPreFetched")?function(e,t={}){const{itemProvider:r}=t,n={includeConcerts:1,includeExtras:1,includeOnDeck:1,includePopularLeaves:1,includePreferences:1,includeChapters:1,includeStations:1,includeMarkers:1,includeExternalMedia:1,asyncAugmentMetadata:1};e.get("type")===l.TRACK&&(n.includeRelated=1),!t.forceSyncCheckFiles&&e.server.supports("asyncCheckFiles")?(n.asyncCheckFiles=1,n.asyncRefreshAnalysis=1,n.asyncRefreshLocalMediaAgent=1):n.checkFiles=1;const i=r||e.provider,s=(0,a.Z)(i.server),o=i.resolveUrl(e.url(),{appendHeaders:!0}),c=i.getXHROptions(o,{dataType:s.typeName,data:n,merge:!0});return e.fetch(c).done((()=>{e.set("isPreFetched",!0)}))}(e,t):i().Deferred().resolve().promise();return r=r.then((()=>{const t=e.get("Media");if(e.get("indirect")&&(!t||!t.length)){const t=function(e,t){const r=function(e){return e.get("Origin")||{key:e.get("key"),source:(0,d.Z)({serverIdentifier:e.server.get("machineIdentifier"),providerIdentifier:e.provider.get("identifier")})}}(t),n=i().Deferred(),{source:s,key:o}=r,{providerIdentifier:l,serverIdentifier:p}=(0,u.Z)(s),m=e.get("servers").get(p),h=m&&m.get("isCloud")?e.get("user"):m,g=h&&h.get("providers").get(l);let y;if(m?m.get("isConnected")?g?g.get("isPopulated")||(y="Provider is not populated"):y="Unknown provider":y="Server is not connected":y="Unknown server",y)n.reject(new Error(y));else{const e=new c.Z({key:o},{server:m,provider:g,channel:t.channel,includeExternalMedia:t.includeExternalMedia,skipCache:!0}),r=(0,a.Z)(g.server),l=g.resolveUrl(e.url(),{appendHeaders:!0}),d=g.getXHROptions(l,{dataType:r.typeName,data:{resolveIndirect:1}});e.fetch(d).then((t=>{const r=e.get("Media"),a=r?r.map((e=>i().extend(!0,{source:s},e))):[];n.resolve(a)}),(()=>{n.reject(new Error("Unable to fetch Origin metadata"))}))}return n.promise()}((0,s.DB)("appModel"),e).then((t=>{e.set({Media:t})}));return t.then(null,(e=>{o.Z.error("[Metadata] %s",e.message)})),t}})),r}},85477:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(78151);function i(e){const t=e.get("playQueue");if(!t)return;const r=t.get("currentIndex");return(0,n.bG)(e,r)}},90174:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(54834),i=r(85209),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p({metadataItemModel:e,listType:t}){const r=e.get("playlistType");if(r)return r;const s=e.get("subtype"),a=e.get("type");return a===i.AUTHOR||a===i.AUDIOBOOK||a===i.CHAPTER?n.j0:a===i.COLLECTION?m(null,s):t===i.COLLECTION?m(null,a):m(t,a)}function m(e,t){let r;return e&&(r=i.getLeafType(e)),r||(r=i.getLeafType(t)),r&&r.mediaType}function h(e){const{type:t,metadataType:r,metadataItemModel:n,metadataItemModels:s,metadataListModel:h}=e;return t||(r?m(r):n?p(e):s&&s.length?p((g=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({},e),y={metadataItemModel:s[0]},a(g,o(y)))):h?function({metadataListModel:e,listType:t}){return e.get("firstItemType")===i.COLLECTION?m(t,e.get("firstItemSubtype")):m(t,e.get("firstItemType"))}(e):void 0);var g,y}},35311:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ne});var n={};r.r(n),r.d(n,{changeAutoPlay:()=>w,changePlaybackSpeed:()=>C,changeQualityIndex:()=>b,changeStream:()=>Z,changeSubtitleColor:()=>S,changeSubtitleOffset:()=>E,changeSubtitlePosition:()=>P,changeSubtitleSize:()=>I,changeVolume:()=>f,endPlayback:()=>u,mirrorDetails:()=>T,pause:()=>y,play:()=>g,playItem:()=>h,playNextItem:()=>p,playPreviousItem:()=>m,refreshRemotePlayQueue:()=>D,refreshRemoteStreams:()=>O,seek:()=>v,setRepeat:()=>M,startPlayback:()=>d});var i={};r.r(i),r.d(i,{changeAutoPlay:()=>q,changePlaybackSpeed:()=>Y,changeQualityIndex:()=>H,changeStream:()=>W,changeSubtitleColor:()=>G,changeSubtitleOffset:()=>K,changeSubtitlePosition:()=>Q,changeSubtitleSize:()=>$,changeVolume:()=>z,endPlayback:()=>L,mirrorDetails:()=>te,pause:()=>B,play:()=>F,playItem:()=>U,playNextItem:()=>j,playPreviousItem:()=>V,refreshRemotePlayQueue:()=>J,refreshRemoteStreams:()=>ee,seek:()=>_,setRepeat:()=>X,startPlayback:()=>R});var s=r(23169),a=r(45191),o=r(60276),l=r(47336),c=r(56594);function d(e){s.startPlayback(e);const t=(0,a.DB)("remoteCastPlayerManager");e.get("playQueue").set("own",!1),t.startPlayback(e),e.set({startMetadataItemEntityID:null,startOffsetMilliseconds:null,startMediaIndex:null})}function u(e){s.endPlayback(e),(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.N7})}function p(e){(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.zb})}function m(e){(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.Fz})}function h(e,t){s.playItem(e,t);const r=(0,a.DB)("remoteCastPlayerManager"),n=e.get("playQueue"),i=n.get("playQueueItems"),l=n.get("playQueueSelectedItemID"),c=i.get(l).get("metadataItem");r.sendMessage({type:o.cb,playQueueItemID:l,key:c.get("key")})}function g(e){s.play(e),(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.NH})}function y(e){s.pause(e),(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.E7})}function v(e,t){s.seek(e,t),(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.tG,currentTime:t})}function f(e,t,r){(0,a.DB)("remoteCastPlayerManager").setVolume(t)}function b(e,t){s.changeQualityIndex(e,t);const r=c.Z.getQualityByIndex(t);(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.EJ,bitrate:r.bitrate})}function Z(e,t,r){(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.f4,stream:{type:t,id:r}})}function S(e,t,r){s.changeSubtitleColor(e,t,r),(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.om,subtitleColor:t})}function P(e,t,r){s.changeSubtitlePosition(e,t,r),(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.WP,subtitlePosition:t})}function I(e,t,r){s.changeSubtitleSize(e,t,r),(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.I2,subtitleSize:t})}function E(e,t,r){(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.rx,subtitleOffset:t})}function w(e,t,r){s.changeAutoPlay(e,t,r),(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.hl,autoPlay:t})}function C(e,t){}function M(e,t){e.set({repeatAll:t.repeatAll,repeatOne:t.repeatOne}),(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.zG,repeat:(0,l.Z)(t)})}function D(e){(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.bp})}function O(e){(0,a.DB)("remoteCastPlayerManager").sendMessage({type:o.fK})}function T(e){(0,a.DB)("remoteCastPlayerManager").mirrorDetails(e)}var x=r(80278),A=r(68702),k=r(14427);function N(e){const t=e.get("playQueue");return(0,x.ED)(t.get("type"))}function R(e){s.startPlayback(e);const t=(0,a.DB)("remotePlexPlayerManager");e.get("playQueue").set("own",!1),t.startPlayback(e)}function L(e){const t=(0,a.DB)("remotePlexPlayerManager"),r={};e.get("playQueue")&&(r.type=N(e)),s.endPlayback(e),t.sendCommand("/player/playback/stop",r)}function j(e){const t=(0,a.DB)("remotePlexPlayerManager"),r=N(e);t.sendCommand("/player/playback/skipNext",{type:r})}function V(e){const t=(0,a.DB)("remotePlexPlayerManager"),r=N(e);t.sendCommand("/player/playback/skipPrevious",{type:r})}function U(e,t){s.playItem(e,t);const r=(0,a.DB)("remotePlexPlayerManager"),n=N(e),i=e.get("playQueue"),o=i.get("playQueueItems"),l=i.get("playQueueSelectedItemID"),c=o.get(l).get("metadataItem");r.sendCommand("/player/playback/skipTo",{type:n,key:c.get("key")})}function F(e){s.play(e);const t=(0,a.DB)("remotePlexPlayerManager"),r=N(e);t.sendCommand("/player/playback/play",{type:r})}function B(e){s.pause(e);const t=(0,a.DB)("remotePlexPlayerManager"),r=N(e);t.sendCommand("/player/playback/pause",{type:r})}function _(e,t){s.seek(e,t);const r=(0,a.DB)("remotePlexPlayerManager"),n=N(e);r.seek({type:n,offset:1e3*t})}function z(e,t,r){const n=(0,a.DB)("remotePlexPlayerManager"),i=N(e);n.changeVolume({type:i,volume:t})}function H(e,t){}function W(e,t,r){const n=(0,a.DB)("remotePlexPlayerManager"),i=N(e),s=k.Z.get(t).key;n.sendCommand("/player/playback/setStreams",{type:i,[s]:r})}function G(e,t,r){const n=(0,a.DB)("remotePlexPlayerManager"),i=N(e);n.sendCommand("/player/playback/setParameters",{type:i,subtitleColor:t}),s.changeSubtitleColor(e,t,r)}function Q(e,t,r){const n=(0,a.DB)("remotePlexPlayerManager"),i=N(e);n.sendCommand("/player/playback/setParameters",{type:i,subtitlePosition:t}),s.changeSubtitlePosition(e,t,r)}function $(e,t,r){const n=(0,a.DB)("remotePlexPlayerManager"),i=N(e);n.sendCommand("/player/playback/setParameters",{type:i,subtitleSize:t}),s.changeSubtitleSize(e,t,r)}function K(e,t,r){const n=(0,a.DB)("remotePlexPlayerManager"),i=N(e);n.sendCommand("/player/playback/setParameters",{type:i,subtitleOffset:t})}function q(e,t,r){const n=(0,a.DB)("remotePlexPlayerManager"),i=N(e);n.sendCommand("/player/playback/setParameters",{type:i,autoPlay:t?1:0}),s.changeAutoPlay(e,t,r)}function Y(e,t){}function X(e,t){s.setRepeat(e,t);const r=(0,a.DB)("remotePlexPlayerManager"),n=N(e),i=e.get("repeatAll"),o=e.get("repeatOne");let l=A.Hn;i&&(l=o?A.ry:A.QN),r.sendCommand("/player/playback/setParameters",{type:n,repeat:l})}function J(e){const t=(0,a.DB)("remotePlexPlayerManager"),r=N(e),n=e.get("playQueue").get("playQueueID");t.sendCommand("/player/playback/refreshPlayQueue",{type:r,playQueueID:n})}function ee(e){const t=(0,a.DB)("remotePlexPlayerManager"),r=N(e);t.sendCommand("/player/playback/refreshStreams",{type:r})}function te(e){(0,a.DB)("remotePlexPlayerManager").mirrorDetails(e)}var re=r(29150);function ne(e){const t=e.get("remotePlayer");return t?t.get("protocol")===re.l?n:i:s}},9647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(90174),i=r(86418),s=r(89083),a=r(85209),o=r(63295),l=r(70777),c=r(76389),d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function g(e,t){const r=t.options?((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},t.options):{},d=c.js(e,t),g=c.SW(e,t),y=t.itemProviderEntityID&&c.lp(e,{providerEntityID:t.itemProviderEntityID})||d,v=t.itemServerEntityID&&c.$w(e,{serverEntityID:t.itemServerEntityID})||g,f=function({providerModel:e,serverModel:t,itemServerModel:r,itemProviderModel:n,options:o={}}){const{containerKey:l,listType:c}=o;if(e.get("identifier")===n.get("identifier")&&t.get("machineIdentifier")===r.get("machineIdentifier"))return!0;if(c===a.TRACK&&l)return!1;const d=e.get("features").get(i.Z.PLAY_QUEUE),u=!!d&&d.get("flavor")===s.D7&&!t.get("isCloud"),p=r.get("isShared");return!u||p}({providerModel:d,serverModel:g,itemServerModel:v,itemProviderModel:y,options:t.options});return r.serverModel=f?v:g,r.providerModel=f?y:d,(0,o.Z)(e,l.Ao)&&(r.includeExternalMedia=1),t.metadataItemEntityID&&(r.metadataItemModel=c.$R(e,t)),t.playlistMetadataItemEntityID&&(r.playlistModel=c.$R(e,{metadataItemEntityID:t.playlistMetadataItemEntityID})),t.metadataItemEntityIDs&&(r.metadataItemModels=t.metadataItemEntityIDs.map((t=>c.$R(e,{metadataItemEntityID:t})))),t.metadataListEntityID&&(r.metadataListModel=c.lK(e,t)),t.listType&&(r.type=(0,n.Z)({metadataType:t.listType})),r}},4017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(89083),i=r(97968),s=r(86832),a=r(8089),o=r(26894),l=r(20683);var c=r(90174),d=r(86418),u=r(85209);function p(e){const{providerModel:t,itemProviderModel:r,metadataItemModel:p,metadataListModel:m,multiSelectModel:h,playQueueModel:g,smart:y,readOnly:v,recent:f}=e,b=h&&h.get("activeSelectionItems").pluck("model"),Z=g?g.get("type"):(0,c.Z)({metadataItemModel:p,metadataListModel:m,metadataItemModels:b}),S=t&&t.get("features"),P=S&&S.get(d.Z.PLAYLIST),I=P&&P.get("key"),E={type:(0,u.getMetadataType)(u.PLAYLIST).id,playlistType:Z,smart:y?1:0,readOnly:v?1:0};f&&(E.sort="updatedAt:desc");const w={playlistType:Z,containerKey:I&&l.Z.join(I,E)};return g||(w.uri=function(e){const{providerFeatureType:t,providerModel:r,itemProviderModel:c,metadataItemModel:d,metadataListModel:u,metadataItemModels:p}=e,m=r.get("features"),h=m&&m.get(t);if(h&&h.get("flavor")===n.D7){const e=(null==d?void 0:d.get("source"))?(0,a.Z)(d.get("source")).providerIdentifier:void 0,t=e&&e!==c.get("identifier")?d.get("source"):(0,o.Z)(c.server.get("machineIdentifier"),c.get("identifier")),r=d&&d.get("key")||u&&u.get("containerKey")||function(e){if(!e)return;const[t]=e;return e.some((e=>e.get("source")!==t.get("source")))?void s.Z.warn("[Playlists] universal playlists can not contain items from multiple sources"):"/library/metadata/"+e.map((e=>e.get("ratingKey"))).join(",")}(p);return l.Z.join([t,r])}return i.Z.uri(d||u||p,{items:p})}({providerFeatureType:d.Z.PLAYLIST,providerModel:t,itemProviderModel:r,metadataItemModel:p,metadataListModel:m,metadataItemModels:b})),w}},49202:(e,t,r)=>{"use strict";function n(e,t){return null==e.get("startMetadataItemEntityID")&&null!=e.get("startOffsetMilliseconds")||e.get("startMetadataItemEntityID")===t.entityID()?e.get("startOffsetMilliseconds"):t.get("viewOffset")||0}r.d(t,{Z:()=>n})},43837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(19274);function i(e){return e.get("isOpen")?e.get("hasError")?n.pn:e.get("isPaused")?n.rf:e.get("isBuffering")?n.l9:n.Z$:n.il}},81445:(e,t,r)=>{"use strict";r.d(t,{c2:()=>y,PD:()=>v,Qt:()=>f,j7:()=>b,dY:()=>Z,rt:()=>S,$h:()=>P,O7:()=>I});var n=r(8238),i=r(35311),s=r(24559),a=r(42375),o=r(78151),l=r(87442);function c(e){const t=e.get("captureBuffer");return t&&t.startedAt}function d(e){return e.get("currentPosition")}function u(e){const t=e.get("liveTVSession");return e.get("liveTVSession")?d(t):0}function p(e){const t=e.get("liveTVSession"),r=t.get("captureBuffer");if(r){const{startedAt:e,seekStartSeconds:t,seekEndSeconds:n}=r;return{seekStartSeconds:e+t,seekEndSeconds:e+n}}const n=t.get("startedAt");return{seekStartSeconds:n+e.get("seekStartSeconds"),seekEndSeconds:n+e.get("seekEndSeconds")}}function m(e){const t=d(e);if(!t)return;const r=e.get("timeline");for(let e=0;e<r.length;e++){const n=[...r.at(e).get("Media")].sort(((e,t)=>e.endsAt-t.endsAt));for(let e=0;e<n.length;e++){const r=n[e],{beginsAt:i,endsAt:s}=r;if(i<=t&&s>t)return r}}}function h(e,t){const r=u(e),n=p(e).seekEndSeconds;return r?Math.min(n,r+t):void 0}function g(e,t){const r=u(e),n=p(e).seekStartSeconds;return r?Math.max(n,r-t):void 0}function y(e){return g(e,a.jV)}function v(e){return h(e,a.Jj)}function f(e){return g(e,a.qB)}function b(e){return h(e,a._V)}function Z(e){const t=e.get("liveTVSession");if(!e.get("liveTVSession"))return;const r=p(e).seekEndSeconds,n=m(t);return n?Math.min(r,n.endsAt):void 0}function S(e){const t=e.get("liveTVSession");if(!e.get("liveTVSession"))return;const r=p(e).seekStartSeconds,n=d(t),i=m(t);if(!i)return;if(n-i.beginsAt>a.Nf)return Math.max(r,i.beginsAt);const s=function(e){const t=d(e);if(!t)return;const r=e.get("timeline");for(let e=r.length-1;e>=0;e--){const n=[...r.at(e).get("Media")].sort(((e,t)=>e.endsAt-t.endsAt));for(let e=n.length-1;e>=0;e--){const r=n[e];if(r.endsAt<=t)return r}}}(t);return s?Math.max(r,s.beginsAt):void 0}function P(e,t){1===arguments.length&&(t=e.get("currentPosition"));const r=c(e)||e.get("startedAt");return t-r}function I(e,t,r,a){if(null==r)return;const c=(0,i.Z)(e),d=(0,o.F_)(e,t),u=d.get("liveTVSession"),p=u.get("startedAt");(0,l.c9)((()=>{if(u.set({currentPosition:r,lastSeekPosition:r}),function(e,t){const r=e.get("currentDecision");if(!r||r.isDirectPlay)return!1;const i=e.get("liveTVSession"),s=i.get("startedAt");if(!i.get("captureBuffer"))return!1;if(n.Z.shouldCreateNewSessionWhenSeekingLiveTV)return!0;const a=s+e.get("seekStartSeconds"),o=s+e.get("seekEndSeconds");return!(t>=a&&t<=o)}(d,r))u.set({startedAt:r}),a((0,s.Mf)({playerType:t,decisionOptions:{offset:1e3*P(u)}}));else{const e=Math.max(r-p,0);c.seek(d,e)}}))}},23169:(e,t,r)=>{"use strict";r.r(t),r.d(t,{changeAutoPlay:()=>j,changePlaybackSpeed:()=>V,changeQualityIndex:()=>x,changeStream:()=>A,changeSubtitleColor:()=>k,changeSubtitleOffset:()=>L,changeSubtitlePosition:()=>N,changeSubtitleSize:()=>R,changeVolume:()=>T,endPlayback:()=>I,mirrorDetails:()=>_,pause:()=>D,play:()=>M,playItem:()=>C,playNextItem:()=>E,playPreviousItem:()=>w,refreshRemotePlayQueue:()=>F,refreshRemoteStreams:()=>B,seek:()=>O,setRepeat:()=>U,startPlayback:()=>P});var n=r(45191),i=r(10033),s=r(19755),a=r.n(s),o=r(97318),l=r(87442),c=r(66117),d=r(84503),u=r(52501),p=r(70777),m=r(66336),h=r(76389),g=r(78151),y=r(96281),v=r(49202);let f=null;function b(e,t,r={}){const i=e.get("playQueue"),s=i.get("currentIndex"),d=i.get("playQueueSelectedItemOffset"),{isApplicationInitiated:f=!1,isRestoringPlayQueue:b=!1}=r,Z=(0,g.bG)(e,t);if(!Z)return;const S=Z.get("metadataItem"),P={isMediaLoading:!0,isBuffering:!1,isLyricsVisible:!1,positionSeconds:Math.floor((0,v.Z)(e,S)/1e3),durationSeconds:Math.floor((S.get("duration")||0)/1e3),lastSeekPositionSeconds:null,metricsAutoPlay:f,hasError:!1,errorMessage:null,errorCode:null,errorCategory:null,qualityIndex:null,adState:null,adPositionSeconds:null,adDurationSeconds:null,adDisplayIndex:null,adDisplayTotal:null,adTimeOffsetSeconds:null,bufferedRanges:[],canPlayThrough:!1,mediaWidth:null,mediaHeight:null,confirmPlayerUpsellPayload:null};b||e.get("isWatchTogether")||i.get("type")===u.pV||(P.isPaused=!1),e.set(P),i.set({playQueueSelectedItemID:Z.id,playQueueSelectedItemOffset:d+(t-s)});const I=(0,n.DB)("appModel");(0,c.Z)(I)[p.ie]&&S&&S.get("extraType")===y.ZP.get(y.R6).id&&function(e,t){if(!e||!t)return a().Deferred().reject().promise();const r=(0,o.Z)(t.get("primaryGuid"));if(!r)return a().Deferred().reject().promise();const n=`/library/metadata/${r}/userState`,i=e.getXHROptions(n,{type:"GET",dataType:"json"});t.set({isInUniversalWatchlistFetched:!1}),a().ajax(i).promise().done((e=>{(0,l.c9)((()=>{var r,n;t.set({isInUniversalWatchlist:!!(null==(n=null==(r=null==e?void 0:e.MediaContainer)?void 0:r.UserState)?void 0:n.watchlistedAt),isInUniversalWatchlistFetched:!0})}))}))}((0,h.q3)(I),S),(0,m.Z)()}function Z(e,t){const r=e.get("playQueue"),n=r.get("length"),i=r.get("currentIndex")+t;return r.get("repeat")?(i+n)%n:Math.min(Math.max(0,i),n-1)}function S(e,t){f&&(f=window.clearTimeout(f)),e.set({lastSeekPositionSeconds:t,nextPositionSeconds:null})}function P(e,t,r){const n=e.get("playQueue");b(e,n.get("currentIndex"),{isRestoringPlayQueue:t,isApplicationInitiated:r})}function I(e){e.restoreDefaults({metricsContextTuple:e.get("metricsContextTuple")})}function E(e,t){b(e,Z(e,1),{isApplicationInitiated:t})}function w(e){b(e,Z(e,-1))}function C(e,t){b(e,t)}function M(e,t=!1){e.set({isPaused:!1}),(0,m.Z)()}function D(e,t=!1){e.set({isPaused:!0}),(0,m.Z)()}function O(e,t,r){r?function(e,t,r){e.set({nextPositionSeconds:t}),f&&window.clearTimeout(f),f=window.setTimeout((()=>{e.get("isOpen")&&(S(e,t),f=null)}),r)}(e,t,r):S(e,t),(0,m.Z)()}function T(e,t,r){r((0,i.T5)({volume:t}))}function x(e,t){e.set("qualityIndex",t)}function A(e,t,r){}function k(e,t,r){r((0,d.fB)({subtitleColor:t}))}function N(e,t,r){r((0,d.Dv)({subtitlePosition:t}))}function R(e,t,r){r((0,d.dB)({subtitleSize:t}))}function L(e,t,r){}function j(e,t,r){r((0,d.R4)({autoPlay:t}))}function V(e,t){e.set("playbackSpeed",t)}function U(e,t){const r=e.get("playQueue");e.set({repeatAll:t.repeatAll,repeatOne:t.repeatOne}),r.set("repeat",t.repeatAll)}function F(e){}function B(e){}function _(e){}},20777:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>v});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(3927),l=r(49688),c=r(20683),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function v(e,t={}){return e.get("isLocal")?function(e){return i().Deferred().resolve(e).promise()}(e):function(e,t={}){const{urlPath:r="",params:n={},type:s="GET"}=t,d=c.Z.join([a().result(e,"url"),r]),v=c.Z.join(d,(f=((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e})({},n),b={repeat:e.get("repeat")?1:0,own:e.get("own")?1:0,includeChapters:1,includeMarkers:1,includeGeolocation:1,includeExternalMedia:1},u(f,p(b))));var f,b;const Z=e.provider,S=a().result(e,"responseType"),P=Z.getXHROptions(v,{type:s,headers:{Accept:S.accept}}),I=e.get("playQueueSelectedItemID");return e.set("isUpdatePending",!0),i().ajax(P).promise().then(((t,n,s)=>{var a;const c=null!=(a=s.getResponseHeader("content-type"))?a:"";t=/json/.test(c)?JSON.parse(t):(0,o.Z)((0,l.Z)(t,null)),e.get("own")&&"shuffle"!==r&&"unshuffle"!==r&&I&&(I!==e.get("playQueueSelectedItemID")||I!==e.convert(t).playQueueSelectedItemID)||e.set(e.parse(t));const d=e.get("playQueueItems"),u=e.get("currentIndex");return u>=0&&u<d.length?i().Deferred().resolve(e).promise():i().Deferred().reject("ERROR_PLAY_QUEUE_INDEX_INVALID").promise()}),(()=>i().Deferred().reject("ERROR_PLAY_QUEUE_COULD_NOT_POPULATE").promise())).always((()=>{e.set("isUpdatePending",!1)}))}(e,t)}},66791:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(19755),i=r.n(n),s=r(86418),a=r(20683);function o(e){const{providerModel:t,type:r,title:n,smart:o=0,playlistID:l,playQueueID:c,uri:d,includeExternalMedia:u}=e,p={uri:d,playQueueID:c};u&&(p.includeExternalMedia=1),l||(p.title=n,p.smart=o?1:0,p.type=r);const m=t.get("features"),h=m&&m.get(s.Z.PLAYLIST),g=h&&h.get("key"),y=a.Z.join([g,l&&`${l}/items`],p),v=l?"PUT":"POST",f=t.getXHROptions(y,{type:v});return i().ajax(f)}},48108:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(11574),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e,t,r){const i=e.get("previousOpenState");let c=e.get("openState");return i&&!t?c=i:i&&t&&(c=void 0),((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e})({previousOpenState:c,openState:i&&t?i:n.K},r)}},2132:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(85477),i=r(74226);function s(e){const t=(0,n.Z)(e).get("metadataItem");return i.wB(t.provider.get("identifier"),i.vP)}},33486:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(86832);function i(e,t){const r=e.get("playQueue");return(...i)=>{if(e.get("isOpen")&&r&&r===e.get("playQueue"))return t(...i);n.Z.warn("[Player] Player was closed or a new playback session was started; ignoring callback")}}},53156:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(20683);function l(e,t){const r=e.server,n=a().result(e,"url"),s=r.getXHROptions(o.Z.join([n,"move"],{after:t}),{type:"PUT"});return i().ajax(s).promise()}},67672:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(19755),i=r.n(n),s=r(69272);function a(e,t){const r=e.get("serverShares");return r?(0,s.Z)(r.map((e=>e.fetch({merge:!0,scope:t})))):i().Deferred().resolve().promise()}},66117:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(41856);function i(e){const t=e.get("user").get("features");return t?(0,n.Z)(t.getState()):[]}},3838:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(3615);const i=function(e){const t=e&&e.responseJSON,r=!t&&e&&e.responseText&&n.Z.parseXML(e.responseText),i=t&&t.errors||r&&r.error;return i?Array.isArray(i)?i:[i]:[]}},9841:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(13469),i=r.n(n),s=r(85511),a=r(73788);function o(e,t){const r=e&&e[0];return r?i().isObject(r)?(0,s.Z)(r,t):r:(0,a.Z)("There was a problem signing in to Plex.")}},63295:(e,t,r)=>{"use strict";function n(e,t){return!!e.get("user").get("features").findWhere({uuid:t})}r.d(t,{Z:()=>n})},25523:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(19755),i=r.n(n);function s(e){const{user:t,friend:r,serverShare:n,librarySectionIDs:s,isNewFriend:a,isCreatingManagedUser:o,isNewServerShare:l}=e,c={machineIdentifier:n.get("machineIdentifier"),librarySectionIds:s};a&&(c.settings=r.getSaveParams()),l&&(a&&!o?c.invitedEmail=r.get("username"):c.invitedId=r.id);const d=n.url(),u=t.server.getXHROptions(d,{type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(c)});return i().ajax(u).promise()}},34575:(e,t,r)=>{"use strict";r.d(t,{wS:()=>B,Vf:()=>_,Y3:()=>j,se:()=>L,$T:()=>R,er:()=>H,Ft:()=>z,vG:()=>U,IK:()=>V,Fl:()=>F,Zo:()=>Y,tI:()=>X,ky:()=>ee,W6:()=>Q,dk:()=>G,Bs:()=>W,WN:()=>J,Fj:()=>K,C_:()=>$,ZA:()=>q});var n=r(19755),i=r.n(n),s=r(15451),a=r(45191),o=r(93301),l=r(75404),c=(r(32903),r(14427)),d=r(20683),u=r(36675),p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&f(e,r,t[r]);return e},Z=(e,t)=>m(e,h(t));function S(e,t){const{mediaIndex:r,streamTypeString:n,streamID:s,allParts:p,allowMetrics:m,metricsProperties:h={},updateLocalOnly:g=!1}=t,y=c.Z.get(n),v=e.provider,f=e.get("Media");let S,P;for(let e=0,t=f.length;e<t;e++){if(r>=0&&r!==e)continue;const t=f[e],n=t.Part;for(let e=0,r=n.length;e<r;e++){const r=n[e],i=r.Stream;for(let e=0,n=i.length;e<n;e++){const n=i[e];if(n.streamType===y.id&&n.id===s){S=t,P=r;break}}if(P)break}if(P)break}if(!P)return i().Deferred().reject().promise();const I={[y.key]:s};p&&(I.allParts=1);const E=function(e,t,r,n,i){const s=b({},r);s.Stream=r.Stream.map((e=>e.streamType!==n.id?e:e.id!==i||e.selected?e.id!==i&&e.selected?Z(b({},e),{selected:!1}):e:Z(b({},e),{selected:!0})));const a=Z(b({},t),{Part:(0,o.Z)(t.Part,r,s)});return(0,o.Z)(e,t,a)}(f,S,P,y,s);if(e.set({Media:E,isStreamChangeInProgress:!g}),g)return i().Deferred().resolve().promise();const w=P.key.match(new RegExp(`^(.*/parts/${P.id})/`)),C=d.Z.join(w?w[1]:["/library/parts",P.id],I),M=v.getXHROptions(C,{type:"PUT",scope:`selectMetadataItemStream--${P.id}`});u.Z.abortAll(M.scope);const D=i().ajax(M).done((()=>{e.set("isStreamChangeInProgress",!1),e.fetch({usePopulatedParams:!0})})).fail((t=>{if(t.aborting)return;const r={isStreamChangeInProgress:!1};e.get("Media")===E&&(r.Media=f),e.set(r)}));return m&&(0,a.DB)("metrics").trackClick(Z(b({},h),{action:l.xs,type:e.get("type"),context:n})),D.promise()}var P=r(43508),I=r(87999),E=r(62291),w=r(86418),C=r(74226),M=r(3927),D=r(82650),O=r(35387),T=r(76389),x=r(87442),A=r(73788),k=r(85209),N=r(43523);const R="metadata/selectMetadataItemStream",L="metadata/repopulateMetadataItem",j="metadata/removeMetadataItem",V="metadata/toggleMetadataItemSave",U="metadata/toggleMetadataItemPlexPick",F="metadata/toggleMetadataItemWatchlist",B="metadata/addMetadataItemToLibrary",_="metadata/deleteMetadataItemStream",z="metadata/setMetadataItemStreamOffset",H="metadata/setMetadataItemIsInUniversalWatchlist",W=(0,s.Z)(R),G=(0,s.Z)(L),Q=(0,s.Z)(j),$=(0,s.Z)(V),K=(0,s.Z)(U),q=(0,s.Z)(F),Y=(0,s.Z)(B),X=(0,s.Z)(_),J=((0,s.Z)(z),(0,s.Z)(H)),ee={[L](e,t){const r=(0,T.tz)(e,t);r&&r.fetch({data:{skipRefresh:1},usePopulatedParams:!0})},[j](e,t){const r=(0,T.tz)(e,t);r&&r.trigger("destroy",r,r.collection)},[R](e,t,r){const{mediaIndex:n,streamTypeString:i,streamID:s,allParts:a,metricsPage:o,updateLocalOnly:l}=t;S((0,T.$R)(e,t),{mediaIndex:n,streamTypeString:i,streamID:s,allParts:a,allowMetrics:!!o,metricsProperties:{page:o},updateLocalOnly:l}).fail((e=>{e&&e.aborting||r((0,P.wp)((0,A.Z)("There was a problem selecting this stream.")))}))},[V](e,t,r){const n=(0,T.$R)(e,t),s=(0,T.js)(e,{providerEntityID:n.get("providerEntityID")}),a=s.get("identifier"),o=C.wB(a,C.xF);let l=n.get("ratingKey");const c=n.get("grandparentRatingKey");let u;if(c&&!o){l=c;const r=n.get("grandparentKey");if(r){const n=(0,D.Z)(O.TY,r,t.serverEntityID);u=(0,T.tz)(e,{metadataItemEntityID:n})}}const p=n.get("saved"),m=!p;n.set("saved",m),u&&u.set("saved",m);const h=s.get("features").get(w.Z.ACTIONS).get("actions").get("save"),g=m?h.get("key"):h.get("reverseKey"),y=d.Z.join(g,{ratingKey:l}),v=s.getXHROptions(y,{type:"PUT"});i().ajax(v).then((()=>{r((0,P.jR)({serverEntityID:t.serverEntityID}))}),(()=>{n.set("saved",p),u&&u.set("saved",p)}))},[U](e,t,r){const n=(0,T.$R)(e,t),s=(0,T.js)(e,{providerEntityID:n.get("providerEntityID")}),a=n.get("ratingKey"),o=n.get("picked"),l=!o;n.set("picked",l);const c=s.get("features").get(w.Z.ACTIONS).get("actions").get("pick"),u=l?c.get("key"):c.get("reverseKey"),p=d.Z.join(u,{ratingKey:a}),m=s.getXHROptions(p,{type:"PUT"});i().ajax(m).then((()=>{r(G({metadataItemEntityID:t.metadataItemEntityID}))}),(e=>{const t=(0,M.Z)(e.responseText);r((0,P.wp)(t.message)),n.set("picked",o)}))},[F](e,t,r){const n=(0,T.$R)(e,t),s=(0,T.js)(e,{providerEntityID:n.get("providerEntityID")}),a=n.get("ratingKey"),o=n.get("watchlistedAt"),l=o?void 0:Date.now();n.set("watchlistedAt",l);const c=s.get("features").get(w.Z.ACTIONS).get("actions").get("addToWatchlist"),u=l?c.get("key"):c.get("reverseKey"),p=d.Z.join(u,{ratingKey:a}),m=s.getXHROptions(p,{type:"PUT"});i().ajax(m).then((()=>{t.metricsPage===E.Hx&&t.metricsProperties.context.includes(I.LIBRARY)?r((0,P.jR)({serverEntityID:t.serverEntityID})):r(G({metadataItemEntityID:t.metadataItemEntityID}))}),(e=>{const t=(0,M.Z)(e.responseText);r((0,P.wp)(t.message)),n.set("watchlistedAt",o)}))},[B](e,t,r){const n=(0,T.$R)(e,t),s=(0,T.SW)(e,t),a=(0,T.js)(e,{providerEntityID:n.get("providerEntityID")}),o=t.sectionKey.match(/\/library\/sections\/(\w+)/)[1],l={providers:`provider://${a.get("identifier")}`,prefs:{oneShot:1,remoteMedia:1},params:{libraryType:N.ZP.get(N.xF).typeID},targetLibrarySectionID:o,hints:{guid:n.get("guid"),ratingKey:n.get("ratingKey"),title:n.get("title"),parentTitle:n.get("parentTitle")},type:(0,k.getMetadataType)(n.get("type")).id},c=s.getXHROptions(d.Z.join("/media/subscriptions",l),{type:"POST"});i().ajax(c)},[_](e,t,r){const{streamKey:n,metadataItemEntityID:s}=t,a=(0,T.$R)(e,t);(0,x.c9)((()=>{a.set("isStreamDeleteInProgress",!0)}));const o=a.server.getXHROptions(n,{type:"DELETE"});i().ajax(o).then((()=>{a.set("isStreamDeleteInProgress",!1),r(G({metadataItemEntityID:s}))}),(e=>{a.set("isStreamDeleteInProgress",!1),r((0,P.wp)((0,A.Z)("There was a problem deleting this stream.")))}))},[z](e,t,r){const{mediaIndex:n,streamTypeString:i,streamID:s,allParts:a,metricsPage:o,updateLocalOnly:l}=t;S((0,T.$R)(e,t),{mediaIndex:n,streamTypeString:i,streamID:s,allParts:a,allowMetrics:!!o,metricsProperties:{page:o},updateLocalOnly:l}).fail((e=>{e&&e.aborting||r((0,P.wp)((0,A.Z)("There was a problem selecting this stream.")))}))},[H](e,t){(0,T.$R)(e,t).set("isInUniversalWatchlist",!0)}}},56925:(e,t,r)=>{"use strict";r.d(t,{_g:()=>y,o8:()=>v,yf:()=>f,NE:()=>b,cg:()=>Z,Zu:()=>S,dB:()=>P,RG:()=>I,wQ:()=>E});var n=r(15451),i=r(81775),s=r(48209),a=r(76389),o=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e},g=(e,t)=>l(e,c(t));const y="provider/fetchCloudProviders",v="provider/populateCloudProviders",f="providers/fetchProvider",b="providers/populateProvider",Z=(0,n.Z)(y),S=(0,n.Z)(v),P=(0,n.Z)(f,(e=>{const{options:t={}}=e;return g(h({},e),{options:g(h({},t),{allowHeadersInUrl:!1})})})),I=(0,n.Z)(b),E={[y]:(0,i.Z)({key:"providers",getModel:a.VX}),[v]:(0,s.Z)({key:"providers",fetchActionCreator:Z,getModel:a.VX}),[f]:(0,i.Z)({getModel:a.js}),[b]:(0,s.Z)({getModel:a.js,fetchActionCreator:P})}},39166:(e,t,r)=>{"use strict";r.d(t,{VH:()=>T,N2:()=>A,qf:()=>U,ou:()=>F,WI:()=>B,ff:()=>G});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(93563),l=r(15451),c=r(81775),d=r(48209),u=r(86418),p=r(70308),m=r(99415),h=r(76389),g=r(87442),y=r(20683),v=r(73703);const f="provider/providerSettings/fetchProviderSettings",b="provider/providerSettings/fetchProviderSettingSelectOptions",Z="provider/provderSettings/clearProviderSettingFetchError",S="provider/providerSettings/fetchProviderSettingLocationOptions",P="provider/providerSettings/populateProviderSettingLocationOptions",I="provider/providerSettings/fetchProviderSettingLineupChannels",E="provider/providerSettings/populateProviderSettingLineupChannels",w="provider/providerSettings/fetchProviderSettingRecentChannelsInGrid",C="provider/providerSettings/populateProviderSettingRecentChannelsInGrid",M="provider/providerSettings/updateProviderSetting",D="provider/providerSettings/clearProviderSettingUpdateError",O="provider/providerSettings/populateProviderSettingOptions",T=(0,l.Z)(f),x=(0,l.Z)(b),A=(0,l.Z)(Z),k=(0,l.Z)(S),N=(0,l.Z)(P),R=(0,l.Z)(I),L=(0,l.Z)(E),j=(0,l.Z)(w),V=(0,l.Z)(C),U=(0,l.Z)(M),F=(0,l.Z)(D),B=(0,l.Z)(O);function _(e,t){return(0,h.js)(e,t).get("features").get(u.Z.SETTINGS)}function z(e,t){return _(e,t).get("settings").get(t.settingID)}function H(e,t){switch(e.get("type")){case m.Pt:{const r=e.get("lineup"),n=new o.Z(t.map((e=>{const t=r.findWhere({id:e.id});return t.set({hidden:e.hidden}),t})));e.set("lineup",n);break}case m.Ct:{const r=e.get("locations").get(t.country);e.set({country:t.country,countryLabel:r.get("title"),postalCode:t.postalCode});break}case m.XD:a().each(t,((t,r)=>{e.get("options").get(r).set({selected:t})})),e.set("selectedCount",a().values(t).filter((e=>e)).length);break;default:e.set("value",t[e.id])}}function W(e,t,r){const n=a().mapObject(t,((e,t)=>!0===e?"1":!1===e?"0":e)),s=y.Z.join(a().result(e,"url"),{prefs:n}),o=r.getXHROptions(s,{type:"PUT"});return i().ajax(o).then((()=>{H(e,t)}))}const G={[f]:(0,c.Z)({key:"settings",getModel:_}),[b]:(0,c.Z)({key:"options",getModel:z}),[S]:(0,c.Z)({key:"locations",getModel:z}),[P]:(0,d.Z)({key:"locations",fetchActionCreator:k,getModel:z}),[I]:(0,c.Z)({key:"lineup",getModel:z}),[E]:(0,d.Z)({key:"lineup",fetchActionCreator:R,getModel:z}),[w]:(0,c.Z)({key:"recentChannelsInGrid",getModel:z}),[C]:(0,d.Z)({key:"recentChannelsInGrid",fetchActionCreator:j,getModel:z}),[M](e,t){const{settingID:r,values:n}=t,s=(0,h.js)(e,t),o=s.get("features").get(u.Z.SETTINGS),l=e.get("ui").get("providerSettingsPage"),c=o.get("settings").get(r);l.set({isUpdatePending:!0,updateError:null});const d=[];if(c.get("type")===m.oG)c.get("settings").forEach((e=>{const t={[e.id]:n[e.id]};d.push(W(e,t,s))}));else if(c.get("type")===m.Pt){const e=a().result(c,"url"),t=s.getXHROptions(e,{type:"PUT",contentType:"application/json",data:JSON.stringify(n)}),r=i().ajax(t).then((()=>{H(c,n)}));d.push(r)}else c.get("type")===m.bB?(Object.keys(n).forEach((e=>{n[e]=parseInt(n[e],10)})),d.push(W(c,n,s))):d.push(W(c,n,s));i().when(...d).then((()=>{l.set({isUpdatePending:!1,updateError:null})}),(e=>{l.set({isUpdatePending:!1,updateError:(0,v.Z)(e)})}))},[D](e,t){e.get("ui").get("providerSettingsPage").set("updateError",null)},[Z](e,t){z(e,t).set({optionsError:null,locationsError:null})},[O](e,t,r){const n=z(e,t),i=n.get("type");if(i===m.XD)(0,g.c9)((()=>{r(x(t))}));else if(i===m.Ct)r(N(t));else if(i===m.Pt){const e=n.get("id");e===p.Pt?r(L(t)):e===p.x8&&r(V(t))}}}},80011:(e,t,r)=>{"use strict";r.d(t,{Vr:()=>u,$Q:()=>p,R:()=>m,ay:()=>h,h9:()=>g,WV:()=>y,Cs:()=>v,mK:()=>f,Wq:()=>b,rW:()=>Z,db:()=>S,RD:()=>P,l2:()=>I,kM:()=>E,$M:()=>w,Vk:()=>C,J3:()=>M,zg:()=>D,TV:()=>O,UU:()=>T,uq:()=>x,ET:()=>A,n7:()=>k,f4:()=>N,LW:()=>R,lm:()=>L,tU:()=>j,Iy:()=>V});var n=r(13469),i=r.n(n),s=r(15451),a=r(81775),o=r(48209),l=r(8523),c=r(76389),d=r(87442);const u="server/testServer",p="server/testServers",m="server/confirmRelayConnection",h="server/addHttpFallbackConnection",g="server/startActivity",y="server/updateActivity",v="server/finishActivity",f="server/startSyntheticActivity",b="server/finishSyntheticActivity",Z="server/eventConnectionOpen",S="server/eventConnectionClose",P="server/fetchProviders",I="server/populateProviders",E="server/fetchLibraries",w="server/populateLibraries",C=(0,s.Z)(u),M=((0,s.Z)(p),(0,s.Z)(m)),D=(0,s.Z)(h),O=(0,s.Z)(g),T=(0,s.Z)(y),x=(0,s.Z)(v),A=(0,s.Z)(f),k=(0,s.Z)(b),N=(0,s.Z)(Z),R=(0,s.Z)(S),L=(0,s.Z)(P),j=((0,s.Z)(I),(0,s.Z)(E)),V=((0,s.Z)(w),{[m](e,t){},[h](e,t){},[g](e,t,r){const n=(0,c.Y7)(e,t);if(!n)return;const i=t.activity;n.get("activities").add([i],{parse:!0}),i.synthetic||r(k({serverEntityID:t.serverEntityID,activityType:i.type}))},[y](e,t){const r=(0,c.Y7)(e,t);r&&r.get("activities").add([t.activity],{parse:!0,merge:!0})},[v](e,t){const r=(0,c.Y7)(e,t);r&&r.get("activities").remove(t.activity.uuid)},[f](e,t,r){(0,d.c9)((()=>{const e={type:t.activityType,synthetic:!0,uuid:`${t.activityType}-${Date.now()}`};t.title&&(e.title=t.title),t.Context&&(e.Context=t.Context),r(O({serverEntityID:t.serverEntityID,activity:e}))}))},[b](e,t){const r=(0,c.Y7)(e,t);if(!r)return;const n=r.get("activities"),{activityType:s,Context:a,title:o}=t,l=n.findWhere((e=>e.get("type")===s&&!0===e.get("synthetic")&&(!o||e.get("title")===o)&&(!a||i().isEqual(e.get("Context"),a))));l&&n.remove(l)},[Z](e,t){const r=(0,c.SW)(e,t),n=(0,c.Y7)(e,t);if(!r||!n)return;const i=n.get("activities");r.set("hasEventConnection",!0),i.fetch()},[S](e,t){const r=(0,c.SW)(e,t);r&&r.set("hasEventConnection",!1)},[P]:(0,a.Z)({key:"providers",getModel:c.SW}),[I]:(0,o.Z)({key:"providers",fetchActionCreator:L,getModel:c.SW}),[E]:(0,a.Z)({key:"libraries",getModel:c.Y7}),[w]:(0,o.Z)({key:"libraries",fetchActionCreator:j,getModel:c.Y7}),[u](e,t){const r=(0,c.SW)(e,t);l.Z.trigger("test:server",r)},[p](){l.Z.trigger("test:servers")}})},13776:(e,t,r)=>{"use strict";r.d(t,{u0:()=>h,rg:()=>g,uM:()=>y,b4:()=>f});var n=r(60526),i=r(15451),s=r(2380),a=r(4017),o=r(66791),l=r(63295),c=r(70777),d=r(76389);const u="ui/initAddToPlaylistMenu",p="ui/clearAddToPlaylistMenu",m="ui/addToExistingPlaylist",h=(0,i.Z)(u),g=(0,i.Z)(p),y=(0,i.Z)(m);function v(e){return e.get("ui").get("addToPlaylistMenu")}const f=(0,s.Z)({[u](e,t){const r=v(e),i=(0,d.tz)(e,t),s=(0,d.Ij)(e,t),o=e.get("ui").get("multiSelect"),l=(0,d.SW)(e,t),c=(0,d.js)(e,t),u=i?(0,d.js)(e,{providerEntityID:i.get("providerEntityID")}):c,{containerKey:p,uri:m}=(0,a.Z)({providerModel:c,itemProviderModel:u,metadataItemModel:i,metadataListModel:s,multiSelectModel:o,recent:!0}),h=new n.Z({containerKey:p},{server:l,provider:c});r.set({recentPlaylists:h,uri:m})},[p](e){v(e).restoreDefaults()},[m](e,t){const r=v(e),n=(0,d.js)(e,t),i=r.get("uri"),{playlistID:s}=t,a={playlistID:s,providerModel:n,uri:i};(0,l.Z)(e,c.Ao)&&(a.includeExternalMedia=!0),(0,o.Z)(a)}})},35449:(e,t,r)=>{"use strict";r.d(t,{wr:()=>y,qq:()=>v,_D:()=>f,Ss:()=>b,A_:()=>Z});var n=r(19755),i=r.n(n),s=r(45191),a=r(94308),o=r(15451),l=r(62291),c=r(76389),d=r(87442),u=r(73703);const p="ui/advertisingNoticeModal/fetchVendors",m="ui/advertisingNoticeModal/setAdConsent",h="ui/advertisingNoticeModal/resetAdConsent",g="ui/advertisingNoticeModal/trackAdConsentAction",y=(0,o.Z)(p),v=(0,o.Z)(m),f=(0,o.Z)(h),b=(0,o.Z)(g),Z={[p](e){const t=e.get("user"),r=e.get("ui").get("advertisingNoticeModal");r.get("vendors")||r.set("vendors",new a.Z([],{server:t.server})),r.set({isVendorsPending:!0,isVendorsPopulated:!1,vendorsError:null}),r.get("vendors").fetch().then((()=>{r.set({isVendorsPending:!1,isVendorsPopulated:!0})}),(e=>{r.set({isVendorsPending:!1,isVendorsPopulated:!1,vendorsError:(0,u.Z)(e)})}))},[m](e,t){const r=e.get("user"),n=e.get("ui").get("advertisingNoticeModal");(0,d.c9)((()=>{n.set({isSaving:!0})}));const s=n.get("vendors");i().ajax(r.server.getXHROptions("/api/v2/user/consent",{type:"PUT",dataType:"json",data:JSON.stringify({language:t.language,vendors:s.map((e=>({id:e.get("id"),consent:t.consent})))}),headers:{"Content-Type":"application/json",Accept:"application/json"}})).then((()=>r.get("consent").fetch()),(()=>{const e=Math.round(Date.now()/1e3);r.get("consent").set({remindAt:e+86400,updatedAt:e})})).always((()=>{n.set({isSaving:!1,isSaved:!0})}))},[h](e){e.get("ui").get("advertisingNoticeModal").restoreDefaults()},[g](e,{advertisingNoticePayload:t,action:r}){const n=t?c.js(e,t):void 0,i={page:l.LT,action:r,identifier:null==n?void 0:n.get("identifier")};if(null==t?void 0:t.metadataItemEntityID){const r=c.$R(e,t);i.type=r.get("type")}(0,s.DB)("metrics").trackClick(i)}}},49217:(e,t,r)=>{"use strict";r.d(t,{x3:()=>C,h5:()=>M,it:()=>D,cg:()=>O,BJ:()=>T,zr:()=>k});var n=r(60526),i=r(15451),s=r(2380),a=r(4017),o=r(66791),l=r(63295),c=r(70777),d=r(97968),u=r(76389),p=r(78151),m=r(87442),h=r(73703),g=Object.defineProperty,y=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Z=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&b(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&b(e,r,t[r]);return e};const S="ui/modal/initAddToPlaylistModal",P="ui/modal/clearAddToPlaylistModal",I="ui/modal/selectDestination",E="ui/modal/createPlaylist",w="ui/modal/addToPlaylist",C=(0,i.Z)(S),M=(0,i.Z)(P),D=(0,i.Z)(I),O=(0,i.Z)(E),T=(0,i.Z)(w);function x(e){return e.get("ui").get("addToPlaylistModal")}function A(e,t){(0,m.c9)((()=>{e.set({isUpdating:!0,error:null})})),(0,o.Z)(t).then((()=>{e.set({isUpdating:!1})}),(t=>{e.set({isUpdating:!1,error:(0,h.Z)(t)})}))}const k=(0,s.Z)({[S](e,t,r){const n=x(e);let i,s,a,o,l="";if(t.metadataItemEntityID)i=(0,u.$R)(e,t),l=d.Z.title(i);else if(t.metadataListEntityID)s=(0,u.lK)(e,t),l=d.Z.title(s);else if(t.playQueueID)o=(0,p.RZ)(e,t.playQueueID);else{a=e.get("ui").get("multiSelect");const t=a.get("activeSelectionItems").pluck("model");l=d.Z.title(t,{items:t})}n.set({title:l,smart:t.smart,metadataItem:i,metadataList:s,multiSelect:a,playQueue:o}),r(D(t))},[P](e){x(e).restoreDefaults()},[I](e,t){const r=x(e),i=(0,u.SW)(e,t),s=(0,u.js)(e,t),o=r.get("metadataItem"),l=r.get("metadataList"),c=r.get("multiSelect"),d=r.get("playQueue"),p=r.get("smart"),m=o?(0,u.js)(e,{providerEntityID:o.get("providerEntityID")}):s,{containerKey:h,playlistType:g,uri:y}=(0,a.Z)({providerModel:s,itemProviderModel:m,metadataItemModel:o,metadataListModel:l,multiSelectModel:c,playQueueModel:d}),v=new n.Z({containerKey:h},{server:i,provider:s});r.set({server:i,provider:s,type:g,smart:p,containerKey:h,uri:y,playlists:v})},[E](e,t){const r=x(e),n=r.get("provider"),i=r.get("playQueue"),{formData:s}=t;let a=r.pick("type","title","uri","smart");a=Z(Z({},a),s),a.providerModel=n,i&&(a.playQueueID=i.get("playQueueID")),(0,l.Z)(e,c.Ao)&&(a.includeExternalMedia=!0),A(r,a)},[w](e,{playlistID:t}){const r=x(e),n=r.get("provider"),i=r.get("playQueue"),s={playlistID:t,providerModel:n,uri:r.get("uri")};i&&(s.playQueueID=i.get("playQueueID")),(0,l.Z)(e,c.Ao)&&(s.includeExternalMedia=!0),A(r,s)}})},5450:(e,t,r)=>{"use strict";r.d(t,{K5:()=>k,K7:()=>T,NJ:()=>L,XK:()=>R,np:()=>O,yd:()=>V,kB:()=>N,eU:()=>A});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(90298),l=r(39665),c=r(15451),d=r(2380),u=r(81775),p=r(76389),m=r(53156),h=r(57471),g=r(73788);function y(e,t){let r;return r=401===e.status?(0,g.Z)("You do not have permission to perform this action."):(0,h.Z)(e,t),r}var v=r(87442),f=r(85209),b=r(20683);const Z="ui/modal/initMediaSubscriptionModal",S="ui/modal/clearMediaSubscriptionModal",P="ui/modal/fetchMediaSubscription",I="ui/modal/saveMediaSubscription",E="ui/modal/changeMediaSubscriptionTemplateMode",w="ui/modal/clearMediaSubscriptionModalError",C="ui/modal/moveMediaSubscriptionModal",M="ui/modal/deleteMediaSubscriptionModal",D="ui/modal/deleteMediaGrabOperationsModal",O=(0,c.Z)(Z),T=(0,c.Z)(S),x=(0,c.Z)(P),A=(0,c.Z)(I),k=(0,c.Z)(E),N=((0,c.Z)(w),(0,c.Z)(C)),R=(0,c.Z)(M),L=(0,c.Z)(D);function j(e){return e.get("ui").get("mediaSubscriptionModal")}const V=(0,d.Z)({[Z](e,t,r){const n=j(e);n.set("isMediaSubscriptionPending",!0);const s={};if(t.showConflicts&&(s.options={data:{includeGrabs:1}}),t.mediaSubscriptionEntityID)return n.set({mediaSubscription:(0,p.xS)(e,t)}),void r(x(s));const a=(0,p.SW)(e,t),c=(0,p.$R)(e,t),d=c.get("grandparentSubscriptionID")||c.get("subscriptionID");if(d)return n.set({mediaSubscription:new o.Z({key:d},{server:a})}),void r(x(s));const u=b.Z.join("/media/subscriptions/template",{guid:c.get("guid")}),m=a.getXHROptions(u);i().ajax(m).then((e=>{const t={parse:!0,server:a},r=new l.Z(e,t),i=r.findWhere({selected:!0});n.set({isMediaSubscriptionPending:!1,isMediaSubscriptionPopulated:!0,mediaSubscriptionError:null,templates:r,mediaSubscription:i})}),(e=>{const t=y(e,(0,g.Z)("There was an unexpected error"));n.set({isMediaSubscriptionPending:!1,mediaSubscriptionError:t})}))},[S](e){j(e).restoreDefaults()},[P]:(0,u.Z)({key:"mediaSubscription",getModel:j}),[I](e,t){const r=j(e),n=(0,p.SW)(e,t),s=r.get("mediaSubscription"),{targetLibrarySectionID:o,targetSectionLocationID:l=null,prefs:c}=t;(0,v.c9)((()=>{r.set({isMediaSubscriptionSaving:!0,mediaSubscriptionSaveError:null})}));const d=s.get("key"),u=s.getSaveParams(),m=i().extend(!0,{},u,{includeGrabs:1,targetLibrarySectionID:o,targetSectionLocationID:l,prefs:c});let h=b.Z.join(a().result(s,"url"),m);if(!d){const e=(0,f.getMetadataType)(s.get("hint").get("type"));h=h+"&"+s.get("parameters")+"&type="+e.id}const Z=n.getXHROptions(h,{type:d?"PUT":"POST"});i().ajax(Z).then((n=>{if(s.set(s.parse(n)),r.set({isMediaSubscriptionSaving:!1}),t.metadataItemEntityID){const r=(0,p.$R)(e,t);if(r){const e=s.get("hint").get("type"),t=(0,f.isParentType)(e),n=t?"grandparentSubscriptionID":"subscriptionID",i=t?"grandparentSubscriptionType":"subscriptionType";r.set({[n]:s.id,[i]:e})}}}),(e=>{const t=y(e,(0,g.Z)("There was a problem saving your changes. Please try again."));r.set({isMediaSubscriptionSaving:!1,mediaSubscriptionSaveError:t})}))},[E](e,t){const r=j(e),n=r.get("templates"),{modeIndex:i}=t;r.set("mediaSubscription",n.at(i))},[w](e,t){j(e).set({mediaSubscriptionSaveError:null,mediaSubscriptionError:null,mediaSubscriptionMoveError:null,mediaSubscriptionDeleteError:null})},[C](e,t){const r=j(e),n=r.get("mediaSubscription");(0,v.c9)((()=>{r.set({isMediaSubscriptionMoving:!0,mediaSubscriptionMoveError:null})})),(0,m.Z)(n).then((()=>{r.set({isMediaSubscriptionMoving:!1})}),(e=>{const t=y(e,(0,g.Z)("There was a problem saving your changes. Please try again."));r.set({isMediaSubscriptionMoving:!1,mediaSubscriptionMoveError:t})}))},[M](e,t,r){const n=j(e),i=n.get("mediaSubscription"),{metadataItemEntityID:s}=t;(0,v.c9)((()=>{n.set({isMediaSubscriptionDeleting:!0,mediaSubscriptionDeleteError:null})})),function(e,{appModel:t,metadataItemEntityID:r}={}){const n=e.get("key");let i=e.destroy({wait:!0});return r&&(i=i.then((()=>{if(r){const e=(0,p.$R)(t,{metadataItemEntityID:r});e.get("subscriptionID")===n?(e.unset("subscriptionID"),e.unset("subscriptionType")):e.get("grandparentSubscriptionID")===n&&(e.unset("grandparentSubscriptionID"),e.unset("grandparentSubscriptionType"))}}))),i}(i,{appModel:e,metadataItemEntityID:s}).then((()=>{n.set({isMediaSubscriptionDeleting:!1})}),(e=>{const t=y(e,(0,g.Z)("There was a problem with canceling this subscription. Please try again."));n.set({isMediaSubscriptionDeleting:!1,mediaSubscriptionDeleteError:t})}))},[D](e,t){const r=j(e),n=r.get("mediaSubscription");var s;(0,v.c9)((()=>{r.set({isMediaSubscriptionDeleting:!0,mediaSubscriptionDeleteError:null})})),(s=n.get("grabOperations"),i().when(...s.map((e=>e.destroy({wait:!0})))).then((()=>{}))).then((()=>{r.set({isMediaSubscriptionDeleting:!1})}),(e=>{const t=y(e,(0,g.Z)("There was a problem with modifying this subscription. Please try again."));r.set({isMediaSubscriptionDeleting:!1,mediaSubscriptionDeleteError:t})}))}})},51146:(e,t,r)=>{"use strict";r.d(t,{Zh:()=>te,pg:()=>ce,T:()=>le,lO:()=>ee,oW:()=>J,Wm:()=>he,o1:()=>ne,oA:()=>ie,O7:()=>oe,QJ:()=>se,wW:()=>ae,lS:()=>X,NO:()=>re,X9:()=>de});var n=r(19755),i=r.n(n),s=r(45191),a=r(95994),o=r(15451),l=r(90174),c=r(9647),d=r(81445),u=r(37474),p=r(57471),m=r(73788);function h(e,t,r,n){const s=e.server.get("isCloud"),a=encodeURIComponent(r),o=s?`/channels/${a}/tune`:`/livetv/dvrs/${t}/channels/${a}/tune`,l={method:"POST",headers:{"X-Plex-Session-Identifier":n.playbackSessionID},timeout:u.EH};return i().ajax(s?e.provider.getXHROptions(o,l):e.server.getXHROptions(o,l)).then(((n,a,o)=>{e.set(e.parse(n));const l=e.get("grabOperation");if(!l){const e=(0,p.Z)(o,(0,m.Z)("Could not tune channel"));return i().Deferred().reject({errorMessage:e}).promise()}const c=l.get("metadataItem"),d=c.get("Media")[l.get("mediaIndex")],u=l.get("conflicts"),h=o.getResponseHeader("X-Plex-Activity"),g=l.get("beginsAt"),y=c.get("transcodeSession"),v={dvrID:t,channelIdentifier:r,channelCallSign:d.channelCallSign,channelTitle:d.channelTitle,activityUUID:h,currentPosition:g,startedAt:g};let f=!1;if(y){const t=y.get("timeStamp"),r=y.get("minOffsetAvailable"),n=y.get("maxOffsetAvailable");if(t&&null!=r&&null!=n){v.captureBuffer={startedAt:t,seekStartSeconds:r,seekEndSeconds:n};const i=t+r,s=e.get("timeline").toJSON().reduce(((e,t)=>e||t.Media.find((e=>e.onAir))),null).beginsAt,a=Math.max(i,s);Date.now()/1e3-a>60&&(f=!0)}}if(e.set(v),s)return i().Deferred().resolve(e).promise();if(u&&u.length)return i().Deferred().reject({hasConflicts:!0,liveTVSession:e}).promise();if(!h)return i().Deferred().reject({errorMessage:(0,m.Z)("Could not tune channel (No activity)")}).promise();const b=d&&d.Part;return b&&b.length?(c.set("isPreFetched",!0),f?i().Deferred().reject({confirmPlayback:f,liveTVSession:e}).promise():i().Deferred().resolve(e).promise()):i().Deferred().reject({errorMessage:(0,m.Z)("Could not tune channel (No parts)")}).promise()}),((e,t)=>"abort"===t?i().Deferred().reject({errorMessage:(0,m.Z)("Could not tune channel (Timed out)")}).promise():i().Deferred().reject({errorMessage:(0,m.Z)("Could not tune channel")}).promise()))}var g=r(66117),y=r(80011),v=r(57200),f=r(17197),b=r(11574),Z=r(36505),S=r(91569),P=r(52202),I=r(56431),E=r(1124),w=r(76389),C=r(78151),M=r(87442),D=r(73703),O=r(27649),T=Object.defineProperty,x=Object.defineProperties,A=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,L=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const j="ui/player/liveTVPlayer/startLiveTVPlayback",V="ui/player/liveTVPlayer/endLiveTVPlayback",U="ui/player/liveTVPlayer/confirmLiveTVPlayback",F="ui/player/liveTVPlayer/cancelConfirmLiveTVPlayback",B="ui/player/liveTVPlayer/updatePlayerLiveTVMetadata",_="ui/player/liveTVPlayer/playNextItem",z="ui/player/liveTVPlayer/playPreviousItem",H="ui/player/liveTVPlayer/skipBack",W="ui/player/liveTVPlayer/skipForward",G="ui/player/liveTVPlayer/stepBack",Q="ui/player/liveTVPlayer/stepForward",$="ui/player/liveTVPlayer/seek",K="ui/player/liveTVPlayer/clearPlayerConflicts",q="ui/player/liveTVPlayer/cancelMediaGrabber",Y="ui/player/liveTVPlayer/updateSessionMetadataItems",X=(0,o.Z)(j),J=(0,o.Z)(V),ee=(0,o.Z)(U),te=(0,o.Z)(F),re=(0,o.Z)(B),ne=(0,o.Z)(_),ie=(0,o.Z)(z),se=(0,o.Z)(H),ae=(0,o.Z)(W),oe=((0,o.Z)(G),(0,o.Z)(Q),(0,o.Z)($)),le=(0,o.Z)(K),ce=(0,o.Z)(q),de=(0,o.Z)(Y);function ue(e,t){const r=Math.floor(Date.now()/1e3);return e.get("Media").find((e=>{const n=e.beginsAt<=r&&r<=e.endsAt,i=!t||e.channelIdentifier===t;return n&&i}))}function pe(e){const t=ue(e);return t?t.channelIdentifier:void 0}function me(e,t){const r=(0,C.F_)(e,t).get("liveTVSession");r&&r.set("lastSeekPosition",r.get("currentPosition"))}const he={[j](e,t,r){const{serverEntityID:n,providerEntityID:i}=t,o=Date.now(),d=(0,c.Z)(e,t),u=(0,l.Z)(d),p=Z.f_(u),y=(0,C.F_)(e,p),v=w.SW(e,t),D=w.js(e,{providerEntityID:i}),T=D.get("parentID"),j=d.metadataItemModel,V=(0,I.Z)(D.get("identifier"),D.get("providerIdentifier"));let U=null;if(j?U=ue(j,d.identifier):d.identifier&&(U={channelIdentifier:d.identifier,beginsAt:Math.floor(Date.now()/1e3)}),!U)return void(0,M.c9)((()=>{y.restoreDefaults({hasError:!0,errorMessage:(0,m.Z)("Unable to tune channel (Not on air)")})}));const F=e.get("remotePlayer");if(F&&!(0,E.Z)({protocol:F.get("protocol"),protocolCapabilities:F.get("protocolCapabilities"),providerIdentifier:V,userFeaturesByUUID:(0,g.Z)(e)}))return void(0,M.c9)((()=>{y.set({hasError:!0,errorMessage:(0,m.Z)("Live TV is not currently supported when connected to a remote player.")})}));(0,M.c9)((()=>{y.restoreDefaults({serverEntityID:n,providerEntityID:i,isOpen:!0,openState:b.K,isPlayQueueLoading:!0,isMediaLoading:!0,playbackStartTime:o})}));const B=new a.Z({},{server:v,provider:D}),_=U.channelIdentifier;h(B,T,_,{playbackSessionID:y.get("playbackSessionID")}).done((()=>{y.set("liveTVSession",B);const e=B.get("grabOperation").get("metadataItem");var n,i;r((0,O.wA)((n=((e,t)=>{for(var r in t||(t={}))N.call(t,r)&&L(e,r,t[r]);if(k)for(var r of k(t))R.call(t,r)&&L(e,r,t[r]);return e})({},t),i={liveTVSessionEntityID:B.entityID(),metadataItemEntityID:e.entityID(),playbackStartTime:o,options:{offset:void 0}},x(n,A(i))))),r(de({liveTVSessionEntityID:B.entityID()}))})).fail((e=>{const{confirmPlayback:t,hasConflicts:r,errorMessage:a}=e;if(t)y.restoreDefaults({serverEntityID:n,providerEntityID:i,liveTVSession:B,confirmLiveTVPlayback:t});else if(r)y.restoreDefaults({serverEntityID:n,providerEntityID:i,liveTVSession:B,hasConflicts:r});else{const e=v.getState();(0,s.DB)("metrics").trackEvent({event:f.NY,interaction:!0,properties:{serverType:(0,P.Z)(e),connectionType:(0,S.Z)(e.activeConnection),error:"tuneFailed",identifier:_}}),y.restoreDefaults({hasError:!0,errorMessage:a})}}))},[V](e,t,r){const{playerType:n,showError:i}=t,s=(0,C.F_)(e,n);i?s.restoreDefaults({hasError:!0,errorMessage:(0,m.Z)("This live TV session has ended due to a recording conflict")}):r((0,O.Mh)({playerType:n}))},[U](e,t,r){const{playerType:n,serverEntityID:i,providerEntityID:s,offset:a}=t,o=(0,C.F_)(e,n).get("liveTVSession"),l=o.get("captureBuffer"),c=o.get("grabOperation").get("metadataItem");if(null!=a){const e=l.startedAt+Math.floor(a/1e3);o.set({currentPosition:e,lastSeekPosition:e})}r((0,O.wA)({serverEntityID:i,providerEntityID:s,liveTVSessionEntityID:o.entityID(),metadataItemEntityID:c.entityID(),startOffsetMilliseconds:a}))},[F](e,{playerType:t}){const r=(0,C.F_)(e,t);(0,M.c9)((()=>{r.restoreDefaults()}))},[B](e,t){const{serverEntityID:r,playerType:n}=t,i=(0,C.F_)(e,n),s=i.get("liveTVSession"),a=i.get("hasConflicts");if(!s||i.get("serverEntityID")!==r||a)return;const o=s.get("dvrID"),l=s.get("channelIdentifier");h(s,o,l,{playbackSessionID:i.get("playbackSessionID")})},[_](e,{playerType:t},r){const n=(0,C.F_)(e,t),i=d.dY(n);d.O7(e,t,i,r)},[z](e,{playerType:t},r){const n=(0,C.F_)(e,t),i=d.rt(n);d.O7(e,t,i,r)},[H](e,{playerType:t},r){const n=(0,C.F_)(e,t),i=d.c2(n);d.O7(e,t,i,r)},[W](e,{playerType:t},r){const n=(0,C.F_)(e,t),i=d.PD(n);d.O7(e,t,i,r)},[G](e,{playerType:t},r){const n=(0,C.F_)(e,t),i=d.Qt(n);d.O7(e,t,i,r)},[Q](e,{playerType:t},r){const n=(0,C.F_)(e,t),i=d.j7(n);d.O7(e,t,i,r)},[$](e,t,r){const{playerType:n,seekPosition:i}=t;d.O7(e,n,i,r)},[K](e,{playerType:t}){const r=(0,C.F_)(e,t);(0,M.c9)((()=>{r.set({hasConflicts:!1})}))},[q](e,t,r){const{playerType:n,grabOperationKey:s}=t,a=(0,C.F_)(e,n),o=a.get("serverEntityID"),l=w.SW(e,{serverEntityID:o}),c=a.get("liveTVSession").get("grabOperation").get("metadataItem"),d=!a.get("isOpen");if(d&&!pe(c))return void a.restoreDefaults({hasError:!0,errorMessage:(0,m.Z)("Unable to cancel conflict, please try again.")});(0,M.c9)((()=>{a.set({isConflictCancelling:!0})}));const u=l.getXHROptions(s,{type:"DELETE"});i().ajax(u).done((e=>{if(a.set({hasConflicts:!1,isConflictCancelling:!1,cancelConflictError:null}),d){const e=a.get("providerEntityID");if(!pe(c))return void a.restoreDefaults({hasError:!0,errorMessage:(0,m.Z)("Unable to tune channel after canceling a conflict, please try again.")});r(X({serverEntityID:o,providerEntityID:e,metadataItemEntityID:c.entityID(),playerType:n}))}})).fail((e=>{a.set({isConflictCancelling:!1,cancelConflictError:(0,D.Z)(e)})}))},[y.WV](e,t){const{serverEntityID:r,activity:n}=t,i=(0,C.F_)(e,Z.Se),s=i.get("liveTVSession");if(s&&i.get("serverEntityID")===r&&s.get("activityUUID")===n.uuid&&n.Context){const e=!!n.Context.conflicts,t=i.get("hasConflicts");if(e&&!t){const e=s.get("dvrID"),t=s.get("channelIdentifier");h(s,e,t,{playbackSessionID:i.get("playbackSessionID")}).fail((({hasConflicts:e})=>{e&&i.set({hasConflicts:!0})}))}else!e&&t&&i.set({hasConflicts:!1})}},[y.Cs](e,t,r){const{serverEntityID:n,activity:i}=t,s=(0,C.F_)(e,Z.Se),a=s.get("liveTVSession");if(a&&s.get("serverEntityID")===n&&a.get("activityUUID")===i.uuid){let e=(0,m.Z)("This live TV session has ended");i.Response&&i.Response.errorText?e=i.Response.errorText:s.get("hasConflicts")&&(e=(0,m.Z)("This live TV session has ended due to a recording conflict")),s.restoreDefaults({hasError:!0,errorMessage:e})}},[v.VR](e,{playerType:t}){me(e,t)},[v.RB](e,{playerType:t}){me(e,t)},[v.BB](e,{playerType:t,positionSeconds:r}){const n=(0,C.F_)(e,t),i=n.get("liveTVSession");if(!i)return;const s=n.get("serverEntityID");if(w.SW(e,{serverEntityID:s}).get("isCloud"))(0,M.c9)((()=>{const e=n.get("playbackStartTime"),t=n.get("sessionPlaybackTime");i.set({currentPosition:Math.floor((e+t)/1e3)})}));else{const e=i.get("startedAt"),t=i.get("lastSeekPosition"),n=e+r;n>t&&(0,M.c9)((()=>{i.set({currentPosition:n,lastSeekPosition:null})}))}},[Y](e,t){const{liveTVSessionEntityID:r,newAiringMetadataItem:n,newUpNextMetadataItem:i}=t,s=w._s(e,{liveTVSessionEntityID:r}),a=s.get("channelIdentifier"),o=s.get("currentPosition"),l=s.get("airingMetadataItem");if(l&&ue(l))return;let c,d;if(n||i)c=n,d=i;else{const t=function(e){return e.get("ui").get("channelGridPage")}(e).get("metadataList"),r=null==t?void 0:t.get("metadataItems");if(!(null==r?void 0:r.length))return;for(let e=0;e<r.length;e++){const t=r.at(e),n=t.get("Media");for(let e=0;e<n.length;e++){const r=n[e];r.channelIdentifier===a&&r.beginsAt<=o&&r.endsAt>o&&(c=t),!d&&r.channelIdentifier===a&&r.beginsAt>o&&(d=t)}}}s.set({airingMetadataItem:c,upNextMetadataItem:d})}}},98984:(e,t,r)=>{"use strict";r.d(t,{GY:()=>c,BG:()=>d});var n=r(53998),i=r(15451),s=r(2380),a=r(78151),o=r(20683);const l="ui/player/photoPlayer/fetchRelatedPhotos",c=(0,i.Z)(l),d=(0,s.Z)({[l](e){const t=(0,a.F_)(e,"photo"),r=t.get("playQueue").get("currentIndex"),i=(0,a.bG)(t,r).get("metadataItem"),s=i.get("key"),l=o.Z.join([s.replace("/library/","/hubs/"),"related"]),c=new n.Z([],{server:i.server,provider:i.provider,metadataItem:i,hubKey:l,hubCount:8});t.set({relatedHubs:c}),i.get("isLibraryItem")&&c.fetch()}})},59542:(e,t,r)=>{"use strict";r.d(t,{jB:()=>v,Qi:()=>f,_7:()=>b,Q2:()=>Z,U8:()=>S,$D:()=>P,zG:()=>I,Xq:()=>E,hl:()=>w,x8:()=>C,QS:()=>M,A0:()=>D,Er:()=>O,x7:()=>T,xJ:()=>x,dU:()=>A,q$:()=>k,Ux:()=>N,Zp:()=>R,o1:()=>L,oA:()=>j,gP:()=>V,Yj:()=>U,ZD:()=>B,Sp:()=>_,HI:()=>z,D5:()=>H,Ie:()=>W,KA:()=>G,FX:()=>Q,yg:()=>$,Ai:()=>K,NN:()=>q,n5:()=>Y,dP:()=>X,Yb:()=>J});var n=r(15451),i=r(35311),s=r(20777),a=r(48108),o=r(2132),l=r(33486),c=r(42375),d=r(74226),u=r(86832),p=r(76389),m=r(78151),h=r(87442),g=r(20683),y=r(27649);const v="ui/player/playQueue/playNextItem",f="ui/player/playQueue/playPreviousItem",b="ui/player/playQueue/playItemByIndex",Z="ui/player/playQueue/playItemByKey",S="ui/player/playQueue/playItemByID",P="ui/player/playQueue/toggleShuffle",I="ui/player/playQueue/setRepeat",E="ui/player/playQueue/toggleRepeat",w="ui/player/playQueue/setAutoPlay",C="ui/player/playQueue/showPostPlay",M="ui/player/playQueue/togglePlayerPlayQueueState",D="ui/player/playQueue/togglePlayerLyricsState",O="ui/player/playQueue/fetchPlayQueueItemLyrics",T="ui/player/playQueue/movePlayQueueItem",x="ui/player/playQueue/removePlayQueueItem",A="ui/player/playQueue/fetchPlayQueue",k="ui/player/playQueue/savePlayQueueState",N="ui/player/playQueue/removePlayQueueState",R="ui/player/playQueue/restorePlayQueue",L=(0,n.Z)(v),j=(0,n.Z)(f),V=(0,n.Z)(b),U=((0,n.Z)(Z),(0,n.Z)(S),(0,n.Z)(P)),F=(0,n.Z)(I),B=(0,n.Z)(E),_=(0,n.Z)(w),z=(0,n.Z)(C),H=(0,n.Z)(M),W=(0,n.Z)(D),G=(0,n.Z)(O),Q=(0,n.Z)(T),$=(0,n.Z)(x),K=(0,n.Z)(A),q=(0,n.Z)(k),Y=(0,n.Z)(N),X=(0,n.Z)(R),J={[v](e,{playerType:t,isApplicationInitiated:r}){const n=(0,m.F_)(e,t),s=(0,i.Z)(e);(0,o.Z)(n)||(0,h.c9)((()=>{n.get("isPostPlayVisible")&&n.set({isPostPlayVisible:!1}),s.playNextItem(n,r)}))},[f](e,{playerType:t}){const r=(0,m.F_)(e,t),n=(0,i.Z)(e);(0,o.Z)(r)||(0,h.c9)((()=>{r.set({isPostPlayVisible:!1}),r.get("positionSeconds")>c.Nf?(n.seek(r,0),n.play(r)):n.playPreviousItem(r)}))},[b](e,{playerType:t,index:r}){const n=(0,m.F_)(e,t),s=(0,i.Z)(e);(0,h.c9)((()=>{s.playItem(n,r)}))},[Z](e,{playerType:t,key:r},n){const i=(0,m.F_)(e,t).get("playQueue").get("playQueueItems"),s=i.find((e=>r===e.get("metadataItem").get("key")));if(s){const e=i.indexOf(s);n(V({playerType:t,index:e}))}else u.Z.warn(`[Player] Unable to play unknown key "${r}"`)},[S](e,{playerType:t,playQueueItemID:r},n){const i=(0,m.F_)(e,t).get("playQueue").get("playQueueItems"),s=i.get(r);if(s){const e=i.indexOf(s);n(V({playerType:t,index:e}))}else u.Z.warn(`[Player] Unable to play unknown PlayQueueItemID "${r}"`)},[P](e,t,r){const{playerType:n}=t,a=(0,m.F_)(e,n),o=a.get("playQueue");(0,h.c9)((()=>{const t=!o.get("playQueueShuffled");o.set("playQueueShuffled",t);const c=t?"shuffle":"unshuffle";(0,s.ZP)(o,{urlPath:c,type:"PUT"}).done((0,l.Z)(a,(()=>{const t=(0,i.Z)(e);r(q({playerType:n})),t.refreshRemotePlayQueue(a)}))).fail((0,l.Z)(a,(()=>{o.set("playQueueShuffled",!t)})))}))},[I](e,{playerType:t,repeatAll:r,repeatOne:n},a){const o=(0,m.F_)(e,t),c=o.get("playQueue"),d=(0,i.Z)(e);(0,h.c9)((()=>{d.setRepeat(o,{repeatAll:r||n,repeatOne:n}),(0,s.ZP)(c).done((0,l.Z)(o,(()=>{a(q({playerType:t}))}))).fail((0,l.Z)(o,(()=>{c.set({repeatAll:!1,repeatOne:!1}),c.set("repeat",!1)})))}))},[E](e,{playerType:t},r){const n=(0,m.F_)(e,t),i=n.get("repeatAll"),s=n.get("repeatOne");r(F({playerType:t,repeatAll:!i||!s,repeatOne:i&&!s}))},[w](e,{playerType:t,autoPlay:r},n){const s=(0,m.F_)(e,t);(0,i.Z)(e).changeAutoPlay(s,r,n)},[C](e,{playerType:t},r){const n=(0,m.F_)(e,t),s=(0,i.Z)(e),a=n.get("playQueue"),o=(0,m.bG)(n,a.get("currentIndex")),c=o.get("postPlay"),u=a.provider.id,p=()=>{n.set({isSettingsVisible:!1,isChaptersVisible:!1,isPostPlayLoading:!1,isPostPlayVisible:!0}),s.pause(n,!0)};n.set({isPostPlayLoading:!0}),d.wB(u,d.Y3)||o.get("displayPostplay")?c.fetch().then((0,l.Z)(n,(()=>{const e=c.findWhere({upNext:!0});e&&c.remove(e),p()})),(0,l.Z)(n,p)):window.setTimeout((0,l.Z)(n,p),0)},[M](e,{playerType:t}){const r=(0,m.F_)(e,t),n=r.get("isPlayQueueVisible");(0,h.c9)((()=>{r.set((0,a.Z)(r,n,{isSettingsVisible:!1,isChaptersVisible:!1,isPlayQueueVisible:!n,isLyricsVisible:!1,isSubtitlesOffsetSettingsVisible:!1}))}))},[D](e,{playerType:t}){const r=(0,m.F_)(e,t),n=r.get("isLyricsVisible");(0,h.c9)((()=>{r.set((0,a.Z)(r,n,{isSettingsVisible:!1,isChaptersVisible:!1,isPlayQueueVisible:!1,isLyricsVisible:!n,isSubtitlesOffsetSettingsVisible:!1}))}))},[O](e,t,r){const{streamID:n}=t,i=(0,p.xl)(e,t),s=i.get("metadataItem"),a=(0,p.lp)(e,{providerEntityID:s.get("providerEntityID")});if(!a)return;const o=i.get("lyricsStreams").get(n);o.set("lyricsError",null),o.fetch({merge:!0,server:a}).fail((e=>{o.set("lyricsError",e)}))},[T](e,t,r){const{playerType:n,playQueueItemEntityID:a,moveIndex:o}=t,c=(0,m.F_)(e,n),d=c.get("playQueue"),u=(0,p.xl)(e,{playQueueItemEntityID:a}),y=d.get("playQueueItems"),v=y.indexOf(u);if(v===o||v===o-1)return;const f=o>v?o-1:o,b=o>0?y.at(o-1).id:void 0,Z=g.Z.join(["items",u.id,"move"]),S={after:b};(0,h.c9)((()=>{y.remove(u),y.add(u,{at:f}),(0,s.ZP)(d,{urlPath:Z,params:S,type:"PUT"}).done((0,l.Z)(c,(()=>{const t=(0,i.Z)(e);r(q({playerType:n})),t.refreshRemotePlayQueue(c)}))).fail((0,l.Z)(c,(()=>{y.indexOf(u)===f&&(y.remove(u),y.add(u,{at:v}))})))}))},[x](e,{playerType:t,playQueueItemEntityID:r},n){const a=(0,m.F_)(e,t),o=a.get("playQueue"),c=o.get("playQueueItems"),d=(0,p.xl)(e,{playQueueItemEntityID:r}),u=c.indexOf(d),y=g.Z.join(["items",d.id]);(0,h.c9)((()=>{c.remove(d),(0,s.ZP)(o,{urlPath:y,type:"DELETE"}).done((0,l.Z)(a,(()=>{const r=(0,i.Z)(e);n(q({playerType:t})),r.refreshRemotePlayQueue(a)}))).fail((0,l.Z)(a,(()=>{c.add(d,{at:u})})))}))},[A](e,{playerType:t}){const r=(0,m.F_)(e,t).get("playQueue");(0,s.ZP)(r)},[k](e,{playerType:t}){},[N](e){},[R](e,t,r){const{serverEntityID:n,providerEntityID:i,playQueueType:s,playQueueOffset:a,playQueueRepeat:o,playQueueID:l,next:c}=t,d={serverEntityID:n,providerEntityID:i,startOffsetMilliseconds:1e3*a,options:{type:s,playQueueRepeat:o,playQueueID:l,next:c}};r((0,y.tP)(d))}}},90915:(e,t,r)=>{"use strict";r.d(t,{jn:()=>v,wo:()=>f,Rp:()=>b});var n=r(15451),i=r(11574),s=r(78151),a=r(87442),o=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e},g=(e,t)=>l(e,c(t));const y="ui/player/playerControls/togglePlayerOpenState",v=((0,n.Z)(y),(0,n.Z)(y,(e=>g(h({},e),{openState:i.K})))),f=(0,n.Z)(y,(e=>g(h({},e),{openState:i.y}))),b={[y](e,{playerType:t,openState:r}){const n=(0,s.F_)(e,t);(0,a.c9)((()=>{n.set({previousOpenState:void 0,openState:r,isSettingsVisible:!1,isChaptersVisible:!1,isPlayQueueVisible:!1,isLyricsVisible:!1})}))}}},24559:(e,t,r)=>{"use strict";r.d(t,{bY:()=>Me,kG:()=>De,wy:()=>Ae,Td:()=>Oe,Mf:()=>Te});var n=r(19755),i=r.n(n),s=r(45191),a=r(15451),o=r(49244),l=r(8238),c=r(8089),d=r(5518),u=r(86022);function p(e){let t;if(e.get("indirect")){const r=e.get("Origin");t=r&&r.source}else if(e.get("remoteMedia")){const r=e.get("Media");t=r[0]&&r[0].source}else e.get("source")&&(t=e.get("source"));return t||null}function m(e){const t=p(e);let r,n;if(t){const{serverIdentifier:e,providerIdentifier:i}=(0,c.Z)(t);n=(0,u.Po)({machineIdentifier:e}),r=(0,d.q)({identifier:i,serverEntityID:n})}else n=e.get("serverEntityID"),r=e.get("providerEntityID");return{serverEntityID:n,providerEntityID:r}}var h=r(46779);function g(e,t){if(!e.supports("transientTokenProxy"))return i().Deferred().reject().promise();const r=e.resolveUrl("/security/resources");let n=i().ajax(e.getXHROptions(r,{data:{source:t}})).promise();return n=n.then((t=>new h.Z(t,{parse:!0,server:e}))),n}var y=r(5780),v=r(47276),f=r(11057);var b=r(22493),Z=r(76389);function S(e){return e.get("isConnected")||e.testOnlyUntestedConnections()}function P(e,t){return(0,c.Z)(t).isServer?function(e,t){return g(e,t).then((e=>(0,b.Z)(e,!0).testAllConnections()))}(e,t):function(e,t){return g(e,t).then((e=>{const t=function(e){const t=new y.Z({accessToken:e.get("accessToken"),machineIdentifier:v.X});t.addConnection((0,f.Z)());const r=e.get("connections").first();return new d.Z({identifier:e.get("clientIdentifier"),title:e.get("name"),baseURL:r.get("uri")},{server:t})}(e);return t.server.testAllConnections().then((()=>t.populate({merge:!0})))}))}(e,t)}var I=r(85477),E=r(87999),w=r(35199),C=r(70777),M=r(36457),D=r(60279),O=r(78151),T=r(13734);const x=[(e,t,r)=>{const n=e.get("user").get("experienceSettings").get("reminders").get((0,T.Z)(w.Z.Upsell,M.TONE_MAPPING));if(n&&!(0,D.Z)(n.get("remindAfter")))return null;const i=(0,O.F_)(e,t).get("playQueue").get("playQueueItems").get(r.playQueueItemID).get("metadataItem"),s=m(i),a=(0,Z.SW)(e,s),o=i.get("Media")[r.mediaIndex],l=null==o?void 0:o.Part[r.partIndex];if(!a||!l)return null;const c=a.hasOwnerFeature(C.EQ),d=a.hasOwnerFeature(C.EZ);return!a.get("isFullOwnedServer")||!c||d||!function(e){return Array.isArray(e.Stream)&&e.Stream.some((e=>"smpte2084"===e.colorTrc))}(l)||r.canDisplayHDR||r.isDirectPlay||r.canDirectStreamVideo?null:{type:M.TONE_MAPPING,metricsContext:E.HDR_CONVERSION}}];var A=r(49202),k=r(13469),N=r.n(k),R=r(56594),L=r(79400);var j=r(33486);function V(e){return e>=2e3}function U(e){return V(e.transcodeDecisionCode)?e.transcodeDecisionText:V(e.generalDecisionCode)?e.generalDecisionText:V(e.mdeDecisionCode)?e.mdeDecisionText:e.errorMessage}r(32903);var F=r(54562),B=r(74226),_=r(32511),z=r(62018),H=r(59178),W=r(95979),G=r(86832),Q=r(88773),$=r(65160),K=r(80850);var q=r(33881),Y=r(3615),X=r(6545),J=r(73788),ee=r(54834),te=r(20683),re=Object.defineProperty,ne=Object.defineProperties,ie=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,le=(e,t,r)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ce=(e,t)=>{for(var r in t||(t={}))ae.call(t,r)&&le(e,r,t[r]);if(se)for(var r of se(t))oe.call(t,r)&&le(e,r,t[r]);return e};function de(e){return"dash"===e||"hls"===e}function ue(e,t){return t.itemProvider||e.provider||t.itemServer||e.server}const pe={getPlayerDecision:function(e){return this.resolvePlayerDecision(e).then(null,(t=>{return t.canDirectPlay&&1001===t.generalDecisionCode?(G.Z.warn("[PDE] Forcing transcode;",t.mdeDecisionText),this.resolvePlayerDecision((r=ce({},e),ne(r,ie({allowDirectPlay:!1}))))):t;var r}))},resolvePlayerDecision:function(e){N().defaults(e,{offset:0,minVersionForDASH:F.Z.dash,minVersionForStreamingMKV:F.Z.streamingMKV,transcoderOptions:{}});const t={playbackSessionID:e.playbackSessionID||(0,X.Z)(),transcodeSessionID:e.transcodeSessionID||(0,X.Z)(),offset:e.offset};let r=this.populateMedia(t,e);return r=r.then(N().bind((function(){return this.resolveMedia(t,e)}),this)),r=r.then((function(){return i().when(t.url)})),r=r.then((function(e){return t.url=e,t})),r},populateMedia:function(e,t){const r=i().Deferred(),n=N().bind(r.resolve,r,e);return t.requireAnalysis&&function(e){const t=e?N().first(e.get("Media")):null;return!(!t||t.container)}(t.item)?t.item.fetch({scope:"player"}).always(n):N().defer(n),r.promise()},resolveMedia:function(e,t){const r=N().extend({transcodeServer:this.resolveTranscodeServer(t)},t),n=q.Z.getMediaDecision(r);if(r.originalQualityDecisionOptions){const e=q.Z.getMediaDecision(ce(ce({},r),r.originalQualityDecisionOptions));n.canPlayOriginalQuality=e.canDirectPlay||e.canDirectStreamVideo}else n.canPlayOriginalQuality=n.canDirectPlay||n.canDirectStreamVideo;const s=n.media,a=i().Deferred();return N().extend(e,n),s?e.canPlay?"webkit"===s.protocol?(G.Z.warn("[PDE] Webkit videos are not supported"),e.redirect=!0,a.reject(e).promise()):"embed"===s.protocol?(G.Z.warn("[PDE] An embed is required"),e.embed=!0,e.part=N().first(s.Part),a.reject(e).promise()):this.resolvePart(e,t):(G.Z.warn("[PDE] Unable to play item;",e.errorMessage),a.reject(e).promise()):this.resolveUrls(e,t)},resolveTranscodeServer:function(e){const t=e.itemServer||e.item.server,r=e.fallbackServer,n=e.itemProvider||e.item.provider;if(t===r||!r||!r.get("isConnected"))return t;let i;e.type===L.Z.types.VIDEO?i="transcoderVideo":e.type===L.Z.types.MUSIC&&(i="transcoderAudio");const s=!n||B.wB(n.get("identifier"),B.Y3);return i&&!t.get(i)&&r.get(i)&&s?r:t},resolvePart:function(e,t){return t.part?e.part=t.part:t.offset?1===e.media.Part.length?e.part=e.media.Part[0]:(e.part=(0,Q.Z)(e.media,t.offset),e.offset=(0,$.Z)(e.media,e.part,t.offset)):e.part=N().first(e.media.Part),e.part.drm&&(e.drm=e.part.drm,e.certificate=e.part.certificate,(0,G.Z)("[PDE] DRM content decryption module:",e.drm),(0,G.Z)("[PDE] DRM certificate:",e.certificate)),this.resolveUrls(e,t)},resolveUrls:function(e,t){const r=i().Deferred();return this.validateDrmType(e,t)&&this.validatePlayerType(e,t)?(this.validateSidecarSrtSubtitles(e,t)?e.subtitlesUrl=this.resolveSubtitlesUrl(e,t):e.useSidecarSrtSubtitles=!1,this.validateSoftSubtitles(e,t)?e.subtitlesUrl=this.resolveSubtitlesUrl(e,t):e.useSoftSubtitles&&(e.useSoftSubtitles=!1),(0,G.Z)("[PDE] Player decision:",{playerType:e.playerType,protocol:e.protocol,canDirectPlay:e.canDirectPlay}),e.canDirectPlay?e.url=this.resolveDirectPlayUrl(e,t):e.url=this.resolveTranscoderUrl(e,t),e.drm&&(e.license=this.resolveLicenseUrl(e,t)),this.resolveDecision(e,t)):r.reject(e).promise()},validateDrmType:function(e,t){const r=s.DB("appModel").get("drmType"),n={music:ee.j0,video:ee.pX},i=!!e.drm,a=r===(0,z.Z)(e.drm)||r===(0,z.Z)(e.drm,n[t.type]);return i&&!a&&(e.errorCode=(0,H.ZP)(),e.errorMessage=(0,J.Z)("Streaming this media is unsupported.")),!i||a},validatePlayerType:function(e,t){return e.media&&t.type&&t.type!==L.Z.types.PHOTO?e.canDirectPlay?("hls"===e.media.protocol?(e.protocol="hls",e.playerType=t.hasNativeHLS?"html":"flash"):"dash"===e.media.protocol?(e.protocol="dash",e.playerType="html"):(e.protocol="http",e.playerType="flv"===e.media.container?"flash":"html"),!0):this.validatePlayerTranscodeProtocol(e,t):(e.protocol="http",e.playerType="html",!0)},validatePlayerTranscodeProtocol:function(e,t){const r=e.transcodeServer,n=t.transcodeProtocol;let i,s=!0,a=!0,o=!0;if(n&&(s="dash"===n,a="http"===n,o="hls"===n),o&&t.hasNativeHLS)return e.protocol="hls",e.playerType="html",!0;if(a&&t.hasStreamingMKV){if(r.isVersionOrNewer(t.minVersionForStreamingMKV))return e.protocol="http",e.playerType="html",!0;i=t.minVersionForStreamingMKV}if(s&&t.hasDASH){if(r.isVersionOrNewer(t.minVersionForDASH))return e.protocol="dash",e.playerType="html",!0;i=t.minVersionForDASH}return t.type===L.Z.types.MUSIC?(e.protocol="http",e.playerType="html",!0):o&&t.hasFlash?(e.protocol="hls",e.playerType="flash",!0):(e.errorMessage=i?(0,J.Z)("Please update Plex Media Server. This feature requires {1} or later.",i):(0,J.Z)("Streaming this media is unsupported."),!1)},validateSidecarSrtSubtitles:function(e,t){return e.useSidecarSrtSubtitles&&!e.canDirectPlay?(G.Z.warn("[PDE] Sidecar SRT is only supported when media is direct play."),!1):e.useSidecarSrtSubtitles},validateSoftSubtitles:function(e,t){return e.useSoftSubtitles&&"html"!==e.playerType?(G.Z.warn("[PDE] Only the HTML player supports soft subtitles"),!1):!e.useSoftSubtitles||e.canDirectPlay||t.allowDirectStreamVideoWithSoftSubtitles?e.useSoftSubtitles:(G.Z.warn("[PDE] Unable to use soft subtitles without direct play"),!1)},resolveDirectPlayUrl:function(e,t){const r=t.item,n=e.part,i={"X-Plex-Session-Identifier":e.playbackSessionID};e.drm&&Object.assign(i,(0,W.Z)(e.drm));const s=n?n.key:r.get("key"),a={appendHeaders:!0,params:i};return ue(r,t).resolveUrl(s,a)},resolveTranscoderUrl:function(e,t,r){const n=t.item,i=e.media,s=e.part;let a=t.transcoderOptions;N().isFunction(a)&&(a=a(e)),a=N().extend({},e.transcoderQualityOptions,a,{"X-Plex-Session-Identifier":e.playbackSessionID,session:e.transcodeSessionID,protocol:e.protocol,directPlay:e.canDirectPlay?1:0,offlineTranscode:t.offlineTranscode,context:t.context,offset:e.offset?e.offset/1e3:e.offset});const o=t.subtitlesBurnLevel;t.type!==L.Z.types.VIDEO||e.transcodeServer.get("isCloud")||(o===_.Z.NEVER?a.subtitles=e.canDirectPlay?"none":"auto":e.useSoftSubtitles?(a.subtitles=e.canDirectPlay?"sidecar":"auto",o===_.Z.AVOID&&(a.advancedSubtitles="text")):a.subtitles="burn");let l=t.profileExtra;N().isFunction(l)&&(l=l(e)),a["X-Plex-Client-Profile-Extra"]=l;const c=n.get("Media")[0],d=!!c&&"livetv"===c.origin;("hls"===a.protocol&&!t.useOffsetHLS&&!d||"dash"===a.protocol&&!d)&&((0,G.Z)("[PDE] DASH and HLS should seek forward by default, offset=0"),delete a.offset),"hls"===a.protocol&&t.useOffsetHLS&&(e.useOffsetHLS=!0,a.offset&&((0,G.Z)("[PDE] HLS started with an offset, copyts=0"),a.copyts=0)),de(a.protocol)&&d&&(a.copyts=0),"http"===a.protocol&&(a.copyts=d?0:1),"http"!==a.protocol||e.canDirectPlay||(a["X-Plex-Chunked"]=1),t.allowIncompleteSegments&&(a["X-Plex-Incomplete-Segments"]=1),N().each(N().keys(a),(function(e){null==a[e]&&delete a[e]}));const u=t.type,p=t.transcoder,m=e.transcodeServer;if(u===L.Z.types.VIDEO)return p.video(m,n,i,s,a,r);if(u===L.Z.types.MUSIC)return p.music(m,n,a,r);if(u===L.Z.types.PHOTO){a.fallbackServer=t.fallbackServer;const e="photo"===n.get("type")?n.getMediaKey():n.get("thumb");return p.image(m,e,a)}},resolveSubtitlesUrl:function(e,t){if(e.useSidecarSrtSubtitles){const r=t.itemProvider||t.item.provider,n=(0,K.Z)(e.media);return r.resolveUrl(n.key,{appendHeaders:!0,appendToken:!0,params:{format:"srt"}})}const r=this.resolveTranscoderUrl(e,t),n=te.Z.parseUrl(r).params,i=e.canDirectPlay?"/subtitles/:/transcode/universal/start":"/video/:/transcode/universal/subtitles";return e.transcodeServer.resolveUrl(i,{params:n})},resolveLicenseUrl:function(e,t){const r=t.item,n={appendHeaders:!0,params:(0,W.Z)(e.drm)},i=ue(r,t);return(0,G.Z)("[PDE] Resolving DRM license",e.part.license),i.resolveUrl(e.part.license,n)},resolveDecision:function(e,t){const r=e.transcodeServer,n=i().Deferred(),s=r.get("isCloud")||!r.supports("decisionEndpoint"),a=t.type===L.Z.types.PHOTO;if(s||a)return(0,G.Z)("[PDE] Unnecessary for server to resolve decision"),n.resolve(e).promise();const o=N().clone(e);this.validatePlayerTranscodeProtocol(o,t);const l=this.resolveTranscoderUrl(o,t,"decision"),c=i().ajax(r.getXHROptions(l,{timeout:2e3}));return null!=e.offset&&!e.canDirectPlay&&de(e.protocol)&&e.media&&"livetv"===e.media.origin&&(e.offset=0),c.done((function(t){const r=Y.Z.parseXML(t);r.generalDecisionCode&&(e.generalDecisionCode=Y.Z.parseInteger(r.generalDecisionCode),e.generalDecisionText=r.generalDecisionText),r.mdeDecisionCode&&(e.mdeDecisionCode=Y.Z.parseInteger(r.mdeDecisionCode),e.mdeDecisionText=r.mdeDecisionText),r.transcodeDecisionCode&&(e.transcodeDecisionCode=Y.Z.parseInteger(r.transcodeDecisionCode),e.transcodeDecisionText=r.transcodeDecisionText),e.abr=Y.Z.parseBoolean(r.abr),e.decisionXML=t,U(e)?n.reject(e):n.resolve(e)})),c.fail((function(){G.Z.warn("[PDE] Player decision failed; the transcode server may be a slow or outdated"),n.resolve(e)})),n.promise()}};var me=r(87442),he=Object.defineProperty,ge=Object.defineProperties,ye=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Ze=(e,t,r)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Se=(e,t)=>{for(var r in t||(t={}))fe.call(t,r)&&Ze(e,r,t[r]);if(ve)for(var r of ve(t))be.call(t,r)&&Ze(e,r,t[r]);return e},Pe=(e,t)=>ge(e,ye(t));const Ie="ui/player/playerDecision/makeDecision",Ee="ui/player/playerDecision/makeNextDecision",we="ui/player/playerDecision/removeDecision",Ce="ui/player/playerDecision/retryDecision",Me=(0,a.Z)(Ie),De=(0,a.Z)(Ee),Oe=(0,a.Z)(we),Te=(0,a.Z)(Ce);function xe(e,t,r){const n=(0,O.F_)(e,t),i=(0,I.Z)(n),s=i.get("metadataItem");if(i.get("playQueueItemID")!==r.playQueueItemID)return;const a={currentDecision:r,availableQualities:r.availableQualities,qualityIndex:r.qualityIndex,mediaIndex:r.mediaIndex,partIndex:r.partIndex,positionSeconds:r.positionSeconds,durationSeconds:r.durationSeconds};null!=n.get("startMetadataItemEntityID")&&n.get("startMetadataItemEntityID")!==s.entityID()||(a.startMetadataItemEntityID=null,a.startOffsetMilliseconds=null,a.startMediaIndex=null);const o=function(e,t,r){if(e.get("user").get("experienceSettings").get("reminders"))for(const n of x){const i=n(e,t,r);if(i)return i}return null}(e,t,r);a.confirmPlayerUpsellPayload=o,a.isPaused=!!o||n.get("isPaused"),n.set(a)}const Ae={[Ie](e,t){const{playerType:r,playQueueItemEntityID:n,mediaIndex:a,partIndex:d,qualityIndex:u,transcodeSessionID:h,options:g={}}=t,y=(0,O.F_)(e,r),v=Z.xl(e,{playQueueItemEntityID:n});if(v.get("type")===ee.pV)return;const f=y.get("decisions")[n];if(f)return void xe(e,r,f);let b,I;const E=v.get("metadataItem");let w,C=function(e,t,r){const n=r.get("metadataItem"),s=Z.SW(e,{serverEntityID:t.get("serverEntityID")}),a=m(n),o={serverEntityID:n.get("serverEntityID"),providerEntityID:n.get("providerEntityID")},d=n.get("source"),u=p(n),h=Z.SW(e,o),g=u&&Z.SW(e,a),y=l.Z.allowTransientProxy&&s.get("isFullOwnedServer")&&s.supports("transientTokenProxy");if(!y&&(d&&!h||u&&!g))return i().Deferred().reject().promise();const v=[];return h?v.push(S(h)):y&&d&&v.push(P(s,d)),d!==u&&(g?v.push(S(g)):y&&u&&v.push(P(s,u))),i().when(...v).then((()=>function(e,t){const r=e.get("user"),n=t&&(0,c.Z)(t);return r.get("providers")&&n&&!n.isServer?r.get("providers").populate().then((e=>{const t=e.findWhere({identifier:n.providerIdentifier});return t&&t.populate()})):i().Deferred().resolve().promise()}(e,u))).then((()=>({serverModel:Z.SW(e,o),providerModel:Z.js(e,o),mediaServerModel:Z.SW(e,a),mediaProviderModel:Z.js(e,a)})))}(e,y,v).then((e=>y.get("liveTVSession")?i().Deferred().resolve().promise():(b=e.mediaServerModel,I=e.mediaProviderModel,(0,o.Z)(E,{forceSyncCheckFiles:!0,itemProvider:e.providerModel}))));C=C.then((()=>{const t=null==a?function(e,t){return null==e.get("startMetadataItemEntityID")&&null!=e.get("startMediaIndex")||e.get("startMetadataItemEntityID")===t.entityID()?e.get("startMediaIndex"):null}(y,E):a,r=E.get("Media")[t],n=r&&r.Part[d],i=(0,s.DB)("getDecisionOptions")(E,u,r);return w=Se(Se({transcodeSessionID:h,playbackSessionID:y.get("playbackSessionID"),item:E,offset:(0,A.Z)(y,E),fallbackServer:e.get("primaryServer"),media:r,part:n,itemProvider:I,itemServer:b},i),g),g.offset,pe.getPlayerDecision(w)})),C.done((0,j.Z)(y,(t=>{const i=function(e,t){const{type:r,item:n,availableQualities:i,qualityIndex:s}=e,{transcodeServer:a,media:o,part:l}=t,c=n.get("Media"),d=o.Part,u=function(e,t){return N().findIndex(e,(e=>null!=e.id?e.id===t.id:null==e.uuid||e.uuid===t.uuid))}(c,o),p=function(e,t){return N().findIndex(e,(e=>null!=e.id?e.id===t.id:null==e.key||e.key===t.key))}(d,l);let m=[],h=R.Z.ORIGINAL;r===L.Z.types.VIDEO&&(m=i,h=s),t.abr&&(h=R.Z.CONVERT_AUTOMATICALLY);const g={availableQualities:m,qualityIndex:h,mediaIndex:u,partIndex:p,partCount:d.length,url:t.url,subtitlesUrl:t.subtitlesUrl,protocol:t.protocol,isDirectPlay:t.canDirectPlay,useSoftSubtitles:t.useSoftSubtitles,useSidecarSrtSubtitles:t.useSidecarSrtSubtitles,canDirectStreamVideo:t.canDirectStreamVideo,canDirectStreamAudio:t.canDirectStreamAudio,canPlayOriginalQuality:t.canPlayOriginalQuality,positionSeconds:Math.floor(t.offset/1e3),durationSeconds:Math.floor((l.duration||0)/1e3),playbackSessionID:t.playbackSessionID,canDisplayHDR:t.canDisplayHDR,canDisplayDolbyVision:t.canDisplayDolbyVision};return t.canDirectPlay||(g.transcodeSessionID=t.transcodeSessionID),t.drm&&(g.drm=t.drm,g.license=t.license,g.certificate=t.certificate),g.transcodeServerEntityID=a&&a.entityID(),g}(w,t),s=Pe(Se({},i),{playQueueItemID:v.get("playQueueItemID")}),a=y.get("decisions");y.set("decisions",Pe(Se({},a),{[n]:s})),xe(e,r,s)}))).fail((0,j.Z)(y,(e=>{let t;b&&I?E.get("isPreFetched")?(E.set({isPreFetched:!1}),t=U(e)):t=(0,J.Z)("Content is unavailable"):t=(0,J.Z)("Source is unavailable"),function(e,t,r,n){const i=e.get("playQueue"),s=i.get("playQueueItems").at(i.get("currentIndex"));t.id===s.id&&e.set({isMediaLoading:!1,hasError:!0,errorCode:n,errorMessage:r})}(y,v,t,e.errorCode)})))},[Ee](e,{playerType:t},r){const n=(0,O.F_)(e,t),i=n.get("playQueue"),s=i.get("playQueueItems"),a=i.get("currentIndex");let o=n.get("repeatOne")?a:a+1;if(n.get("repeatAll")&&o>s.length-1&&(o=0),o!==a&&o<s.length){const e=s.at(o).entityID();r(Me({playerType:t,playQueueItemEntityID:e}))}},[we](e,{playerType:t,playQueueItemEntityID:r}){const n=(0,O.F_)(e,t);(0,me.c9)((()=>{const e=n.get("decisions"),t=n.get("currentDecision"),i={decisions:Pe(Se({},e),{[r]:null})};e[r]===t&&(i.currentDecision=null),n.set(i)}))},[Ce](e,t,r){const{playerType:n,decisionOptions:i}=t,s=(0,O.F_)(e,n),a=s.get("playQueue"),o=a.get("playQueueItems"),l=s.get("currentDecision"),c=a.get("currentIndex"),d=o.at(c).entityID();l&&r(Oe({playerType:n,playQueueItemEntityID:d})),r(Me(l?{playerType:n,playQueueItemEntityID:d,mediaIndex:l.mediaIndex,partIndex:l.partIndex,qualityIndex:s.get("qualityIndex"),options:Se({offset:1e3*s.get("positionSeconds")},i)}:{playerType:n,playQueueItemEntityID:d,qualityIndex:s.get("qualityIndex")}))}}},27649:(e,t,r)=>{"use strict";r.d(t,{Rt:()=>H,Bw:()=>K,qG:()=>$,l5:()=>z,tf:()=>_,Si:()=>W,yt:()=>G,e4:()=>B,EJ:()=>j,$y:()=>V,xd:()=>U,bj:()=>F,N9:()=>Q,xT:()=>re,lm:()=>ce,Mh:()=>ae,gv:()=>me,tP:()=>te,kP:()=>ee,d7:()=>ne,Kq:()=>ie,Ld:()=>oe,wA:()=>q,EF:()=>Y,QR:()=>X,Gh:()=>J,Em:()=>le,Yd:()=>se});var n=r(19755),i=r.n(n),s=r(45191),a=r(15451),o=r(79830),l=r(90446),c=r(90174),d=r(35311),u=r(9647),p=r(23169),m=r(20777),h=r(33486),g=r(75404),y=r(11574),v=r(36505),f=r(74226),b=r(86832),Z=r(85209);var S=r(76389),P=r(78151),I=r(87442),E=r(73788),w=r(20683),C=r(59542),M=Object.defineProperty,D=Object.defineProperties,O=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&k(e,r,t[r]);if(T)for(var r of T(t))A.call(t,r)&&k(e,r,t[r]);return e},R=(e,t)=>D(e,O(t)),L=(e,t)=>{var r={};for(var n in e)x.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&T)for(var n of T(e))t.indexOf(n)<0&&A.call(e,n)&&(r[n]=e[n]);return r};const j="ui/player/playerLifecycle/startPlayback",V="ui/player/playerLifecycle/startPrimaryExtraPlayback",U="ui/player/playerLifecycle/startRadioPlayback",F="ui/player/playerLifecycle/startRelatedMixPlayback",B="ui/player/playerLifecycle/startExistingPlayQueuePlayback",_="ui/player/playerLifecycle/queueRelatedMixPlayback",z="ui/player/playerLifecycle/queuePlayback",H="ui/player/playerControls/clearPlayerConfirmPlaybackPayload",W="ui/player/playerControls/resetAndClosePlayer",G="ui/player/playerControls/setMetricsPlayer",Q="ui/player/playerLifecycle/updateCurrentAd",$="ui/player/playerLifecycle/endPlayback",K="ui/player/playerLifecycle/dismissPlayerUpsell",q=(0,a.Z)(j),Y=(0,a.Z)(V),X=(0,a.Z)(U),J=(0,a.Z)(F),ee=((0,a.Z)(B),(0,a.Z)(_)),te=(0,a.Z)(z),re=(0,a.Z)(H),ne=(0,a.Z)(W),ie=(0,a.Z)(G),se=(0,a.Z)(Q),ae=(0,a.Z)($),oe=(0,a.Z)(j,((e={})=>{var t=e,{options:r={}}=t,n=L(t,["options"]);return R(N({},n),{metricsAction:g.Rn,options:R(N({},r),{playAll:!0})})})),le=(0,a.Z)(j,((e={})=>{var t=e,{options:r={}}=t,n=L(t,["options"]);return R(N({},n),{metricsAction:g.cO,options:R(N({},r),{shuffle:!0})})})),ce=(0,a.Z)(K);let de;function ue(e){return e.get("related").findWhere({browse:!1}).get("metadataList")}function pe(e,t,r){return(...n)=>{if(t.get("isOpen")&&e===de)return r(...n);b.Z.warn("[Player] Player was closed or a new playback session was started; ignoring playback request")}}const me={[j](e,t,r){const{metadataItemEntityID:n,liveTVSessionEntityID:i,syncplaySessionRoomID:a,confirmPlayback:p,confirmOffset:m,confirmAdvertisingNotice:h,startOffsetMilliseconds:b=null,startMediaIndex:w=null,openState:C=y.K,isPaused:M=!1,isWatchTogetherLobbyVisible:D=!1,extrasPrefixCount:O,playbackStartTime:T=Date.now(),metricsPage:x,metricsProperties:A={}}=t,k=(0,u.Z)(e,t),L=(0,c.Z)(k),j=v.f_(L),V=(0,P.F_)(e,j),U=V.get("playQueue"),F=k.metadataItemModel,B=(0,s.DB)("appModel").get("user"),_=k.serverModel?k.serverModel.entityID():t.serverEntityID,z=k.providerModel?k.providerModel.entityID():t.providerEntityID;if(U&&F&&U.get("playQueueSelectedMetadataItemID")===F.get("ratingKey"))return;if(!p&&U&&U.get("playQueueVersion")>1)return void V.set("confirmPlaybackPayload",t);const H={serverEntityID:_,providerEntityID:z,syncplaySessionRoomID:a,isOpen:!0,openState:C,isPlayQueueLoading:!0,isMediaLoading:!0,isPaused:M,isWatchTogetherLobbyVisible:D,startOffsetMilliseconds:b,startMediaIndex:w,playbackStartTime:T,metricsPage:x,metricsSetting:A.setting,metricsContextTuple:A.contextTuple};if(i&&(H.liveTVSession=S._s(e,{liveTVSessionEntityID:i})),F&&function(e){const t=e.get("type"),r="channelDirectory"===t||(0,Z.isDirectoryType)(t)||e.get("isFolder");return void 0===e.length&&!r}(F)&&(H.startMetadataItemEntityID=n),!h&&F&&F.get("requiresConsent")&&B.get("isFullUser")&&(!B.get("consent").get("updatedAt")||B.get("consent").get("remindAt")<Date.now()/1e3)?H.advertisingNoticePayload=t:!m&&F&&F.get("viewOffset")&&(H.confirmOffsetPayload=t),(0,I.c9)((()=>{V.restoreDefaults(H)})),H.advertisingNoticePayload||H.confirmOffsetPayload)return;const W=!(b||!F||F.get("type")!==Z.MOVIE),G=f.wB(k.providerModel.get("identifier"),f.vP),Q=(0,o.Z)(R(N({},k),{skipSiblings:G,extrasPrefixCount:W?O:void 0,playQueueModel:(0,l.Z)(R(N({},k),{playQueueType:L}))}));de=Q,Q.done(pe(Q,V,(t=>{V.set({isPlayQueueLoading:!1,playQueue:t}),(0,d.Z)(e).startPlayback(V)}))).fail(pe(Q,V,(()=>{V.restoreDefaults({hasError:!0,errorMessage:(0,E.Z)("An error occurred loading items to play.")})}))),t.skipClickMetrics||(0,s.DB)("metrics").trackClick(N({page:t.metricsPage,action:t.metricsAction||g.NH,type:L},A))},[V](e,t,r){const n=t.options||{},i=S.$R(e,t);r(q(R(N({},t),{metadataItemEntityID:null,metricsAction:g.$W,options:R(N({},n),{metadataItemKey:i.get("primaryExtraKey"),type:"video"})})))},[F](e,t,r){const n=t.options||{},i=S.$R(e,t),s=ue(i);r(q({serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataItemEntityID:t.metadataItemEntityID,metricsAction:g.b8,skipClickMetrics:t.skipClickMetrics,options:R(N({},n),{type:(0,c.Z)({metadataItemModel:i}),containerKey:s.get("containerKey")})}))},[U](e,t,r){const{playlistType:n}=t,i=S.$R(e,t).get("stations");if(!i.length)return;const s=i.findWhere({playlistType:n});r(q({metricsAction:g.b8,serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataItemEntityID:s.entityID(),skipClickMetrics:t.skipClickMetrics,options:{type:(0,c.Z)({metadataItemModel:s})}}))},[B](e,t){const{serverEntityID:r,providerEntityID:n,playQueueType:i,playQueueID:s,startOffsetMilliseconds:a=null,startMediaIndex:o=null,playbackStartTime:c=Date.now()}=t,d=v.f_(i),u=S.js(e,t),h=(0,P.F_)(e,d),g=(0,l.Z)({providerModel:u,playQueueID:s,playQueueType:i}),f={serverEntityID:r,providerEntityID:n,isOpen:!0,openState:y.K,isPlayQueueLoading:!0,isMediaLoading:!0,startOffsetMilliseconds:a,startMediaIndex:o,playbackStartTime:c};return h.set(f),(0,m.ZP)(g).done((()=>{h.set({playQueue:g,isPlayQueueLoading:!1}),p.startPlayback(h)})).fail((()=>{h.restoreDefaults({hasError:!0,errorMessage:(0,E.Z)("An error occurred loading items to play.")})}))},[_](e,t,r){const n=S.$R(e,t),i=ue(n);r(te({serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataItemEntityID:t.metadataItemEntityID,metricsPage:t.metricsPage,metricsAction:g.AV,listType:(0,c.Z)({metadataItemModel:n}),options:{next:!0,containerKey:w.Z.join(i.get("containerKey"),{excludeSeedItem:1})}}))},[z](e,t,r){const{startOffsetMilliseconds:n=null,openState:i=y.K}=t,a=(0,u.Z)(e,t),p=(0,c.Z)(a),f=v.f_(p),b=(0,P.F_)(e,f),Z=!!a.playQueueID,w=a.serverModel?a.serverModel.entityID():t.serverEntityID,M=a.providerModel?a.providerModel.entityID():t.providerEntityID;let D=b.get("playQueue"),O=!1;if(D&&b.get("providerEntityID")){const t=S.js(e,{providerEntityID:b.get("providerEntityID")}),r=b.get("providerEntityID")===M,n=D.get("isUniversal"),i=t.server.get("isFullOwnedServer");O=r||n&&i}if(O)(0,o.Z)(R(N({},a),{playQueueModel:D})).done((0,h.Z)(b,(()=>{(0,d.Z)(e).refreshRemotePlayQueue(b)}))).fail((0,h.Z)(b,(()=>{b.set({hasError:!0,errorMessage:(0,E.Z)("An error occurred loading items into the play queue.")})})));else{(0,I.c9)((()=>{b.restoreDefaults({serverEntityID:w,providerEntityID:M,isOpen:!0,openState:i,isPlayQueueLoading:!0,isMediaLoading:!0,isPaused:!a.next,repeatAll:!!a.playQueueRepeat,startOffsetMilliseconds:n,playbackStartTime:a.playbackStartTime?a.playbackStartTime:Date.now()})})),D=(0,l.Z)(R(N({},a),{playQueueType:p}));const t=Z?(0,m.ZP)(D):(0,o.Z)(R(N({},a),{next:!1,playQueueModel:D}));de=t,t.done(pe(t,b,(t=>{b.set({isPlayQueueLoading:!1,playQueue:t}),(0,d.Z)(e).startPlayback(b,Z)}))).fail(pe(t,b,(()=>{r((0,C.n5)()),Z?b.restoreDefaults():b.restoreDefaults({hasError:!0,errorMessage:(0,E.Z)("An error occurred loading items to play.")})})))}const T=a.next?g.pe:g.PR,x=t.metricsProperties||{};t.skipClickMetrics||(0,s.DB)("metrics").trackClick(N({page:t.metricsPage,action:t.metricsAction||T,type:p},x))},[H](e,{playerType:t,openState:r}){const n=(0,P.F_)(e,t);(0,I.c9)((()=>{n.set("confirmPlaybackPayload",null)}))},[W](e,{playerType:t,openState:r}){const n=(0,P.F_)(e,t);(0,I.c9)((()=>{n.restoreDefaults()}))},[G](e,{playerType:t,metricsPlayer:r}){const n=(0,P.F_)(e,t);(0,I.c9)((()=>{n.set({metricsPlayer:r})}))},[Q](e,{adDisplayIndex:t,adDisplayTotal:r,adDurationSeconds:n,adPositionSeconds:i,adState:s,adTimeOffsetSeconds:a,playerType:o}){(0,P.F_)(e,o).set({adDisplayIndex:t,adDisplayTotal:r,adDurationSeconds:n,adPositionSeconds:i,adState:s,adTimeOffsetSeconds:a})},[$](e,{playerType:t,isForced:r},n){const s=(0,P.F_)(e,t),a=s.get("liveTVSession"),o=s.get("serverEntityID"),l=S.SW(e,{serverEntityID:o}),c=(0,d.Z)(e);if((0,I.c9)((()=>{r||n((0,C.n5)()),c.endPlayback(s)})),a&&!l.get("isCloud")){const e=w.Z.join(["/media/subscriptions",a.id]);i().ajax(a.server.getXHROptions(e,{method:"DELETE"}))}},[K](e,{playerType:t}){(0,P.F_)(e,t).set({confirmPlayerUpsellPayload:null})}}},57200:(e,t,r)=>{"use strict";r.d(t,{VR:()=>Ae,RB:()=>Re,tG:()=>Ie,ft:()=>we,Sq:()=>Ce,zV:()=>Me,nB:()=>De,R1:()=>Pe,BB:()=>ge,ec:()=>ft,wv:()=>pt,mj:()=>mt,EZ:()=>ht,Kb:()=>vt,Wj:()=>gt,YA:()=>yt,v6:()=>ot,iu:()=>Je,wO:()=>Pt,hY:()=>St,ek:()=>Mt,O7:()=>rt,$E:()=>Qe,Pn:()=>bt,ZI:()=>Zt,QJ:()=>nt,wW:()=>it,Hn:()=>st,oX:()=>at,fp:()=>et,ID:()=>tt,Y5:()=>ct,z5:()=>lt,PR:()=>dt,$m:()=>ut,qo:()=>It,mh:()=>wt,bb:()=>Et,n9:()=>Ye,qr:()=>$e,IE:()=>Xe,lj:()=>Ke,uZ:()=>qe});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(8238),l=r(15451),c=r(93301),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e},f=(e,t)=>u(e,p(t)),b=r(85477);function Z(e){const t=(0,b.Z)(e),r=e.get("currentDecision");if(t&&r)return r.playQueueItemID===t.get("playQueueItemID")?r:void 0}var S=r(35311),P=r(42375),I=r(43837),E=r(20683);const w=function(e,t){const r=E.Z.parseUrl(e),{origin:n,pathname:i,params:s}=r;return s.offset=t,E.Z.join([n,i],s)};var C=r(32903),M=r(86832),D=r(20777),O=r(45191),T=r(71273),x=r(19274),A=r(86418),k=r(74226),N=r(77021),R=r(28802),L=r(40085),j=r(3927),V=r(91085),U=Object.defineProperty,F=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,z=(e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function H(e){return{startedAt:(0,L.Z)(e.timeStamp),seekStartSeconds:(0,L.Z)(e.minOffsetAvailable),seekEndSeconds:(0,L.Z)(e.maxOffsetAvailable)}}var W=r(48108),G=r(2132),Q=r(33486),$=r(34575),K=r(43508),q=r(99508);var Y=r(76389),X=r(78151),J=r(87442),ee=r(73788),te=r(14427),re=r(36675),ne=r(59542),ie=Object.defineProperty,se=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ue=(e,t)=>{for(var r in t||(t={}))le.call(t,r)&&de(e,r,t[r]);if(oe)for(var r of oe(t))ce.call(t,r)&&de(e,r,t[r]);return e},pe=(e,t)=>se(e,ae(t));const me="ui/player/playerMedia/sendTimeline",he="ui/player/playerMedia/updatePlayerDuration",ge="ui/player/playerMedia/updatePlayerPosition",ye="ui/player/playerMedia/updatePlayerSeekRange",ve="ui/player/playerMedia/updatePlayerBuffering",fe="ui/player/playerMedia/updatePlayerLoading",be="ui/player/playerMedia/updatePlayerError",Ze="ui/player/playerMedia/clearPlayerError",Se="ui/player/playerMedia/tickPlayer",Pe="ui/player/playerMedia/togglePlayPause",Ie="ui/player/playerMedia/seek",Ee="ui/player/playerMedia/transcodeSeek",we="ui/player/playerMedia/skipBack",Ce="ui/player/playerMedia/skipForward",Me="ui/player/playerMedia/stepBack",De="ui/player/playerMedia/stepForward",Oe="ui/player/playerMedia/changeVolume",Te="ui/player/playerSettings/togglePlayerSettingsState",xe="ui/player/playerSettings/togglePlayerChaptersState",Ae="ui/player/playerSettings/changeQualityIndex",ke="ui/player/playerSettings/togglePlayerSubtitlesOffsetState",Ne="ui/player/playerSettings/togglePlayerWatchTogetherParticipantsState",Re="ui/player/playerSettings/changeStream",Le="ui/player/playerSettings/changeSubtitleColor",je="ui/player/playerSettings/changeSubtitlePosition",Ve="ui/player/playerSettings/changeSubtitleSize",Ue="ui/player/playerSettings/changeSubtitleOffset",Fe="ui/player/playerMedia/changePlaybackSpeed",Be="ui/player/playerMedia/setItemPlaybackTime",_e="ui/player/playerMedia/setSessionPlaybackTime",ze="ui/player/playerMedia/refreshStreams",He="ui/player/playerMedia/updateBufferedRanges",We="ui/player/playerMedia/updateMediaDimensions",Ge="ui/player/playerMedia/updateCanPlayThrough",Qe=(0,l.Z)(me),$e=(0,l.Z)(he),Ke=(0,l.Z)(ge),qe=(0,l.Z)(ye),Ye=(0,l.Z)(ve),Xe=((0,l.Z)(fe),(0,l.Z)(be)),Je=(0,l.Z)(Ze),et=(0,l.Z)(Se),tt=(0,l.Z)(Pe),rt=(0,l.Z)(Ie),nt=((0,l.Z)(Ee),(0,l.Z)(we)),it=(0,l.Z)(Ce),st=(0,l.Z)(Me),at=(0,l.Z)(De),ot=(0,l.Z)(Oe),lt=(0,l.Z)(Te),ct=(0,l.Z)(xe),dt=(0,l.Z)(ke),ut=(0,l.Z)(Ne),pt=(0,l.Z)(Ae),mt=(0,l.Z)(Re),ht=(0,l.Z)(Le),gt=(0,l.Z)(je),yt=(0,l.Z)(Ve),vt=(0,l.Z)(Ue),ft=(0,l.Z)(Fe),bt=(0,l.Z)(Be),Zt=(0,l.Z)(_e),St=((0,l.Z)(ze),(0,l.Z)(Pe,(e=>pe(ue({},e),{shouldPlay:!0})))),Pt=(0,l.Z)(Pe,(e=>pe(ue({},e),{shouldPause:!0}))),It=((0,l.Z)(Oe,(e=>pe(ue({},e),{delta:5}))),(0,l.Z)(Oe,(e=>pe(ue({},e),{delta:-5}))),(0,l.Z)(He)),Et=(0,l.Z)(We),wt=(0,l.Z)(Ge);function Ct(e,t,r){return Math.max(0,Math.min(t-P.uS,e+r))}const Mt={[me](e,t,r){var n;const{playerType:s,serverEntityID:o,providerEntityID:l,mediaItemID:c,shouldRefreshPlayQueue:d,options:u={}}=t,p=(0,X.F_)(e,s),m=Y.SW(e,{serverEntityID:o}),h=Y.js(e,{providerEntityID:l}),g=Y.xl(e,t),y=Y.$R(e,t);if(!y&&k.wB(h.get("identifier"),[k.Ll,k.vP]))return;const v=g.get("isLocal")?void 0:g.get("playQueueItemID"),f=null==(n=Y.VZ(e,t))?void 0:n.get("grabOperation").get("metadataItem");(function(e,t,r){const{playQueueItemID:n,mediaItemID:s,mediaIndex:o,partIndex:l,partCount:c,state:d,continuing:u,playbackTime:p,positionSeconds:m,durationSeconds:h,metricsContextTuple:g,ratingKey:y,key:v,addCampaignParams:f}=r,b=e.get("features").get(A.Z.TIMELINE);if(!b)return i().Deferred().reject().promise();const Z=((e,t)=>{for(var r in t||(t={}))B.call(t,r)&&z(e,r,t[r]);if(F)for(var r of F(t))_.call(t,r)&&z(e,r,t[r]);return e})({ratingKey:y||t.get("ratingKey"),key:v||t.get("key"),playbackTime:p,playQueueItemID:n,state:d,hasMDE:1},g?(0,V.IF)(g):void 0);if(d===x.il&&u&&(Z.continuing=1),k.wB(e.get("identifier"),[k.Ll,k.vP])&&s&&(Z.airingID=s),null!=h){const e=1e3*m,r=1e3*h;if(c>1){const r=t.get("Media")[o],n=r.Part[l];Z.time=(0,N.Z)(r,n,e),Z.duration=r.duration}else Z.time=e,Z.duration=r;Z.duration=Math.max(Z.time,Z.duration)}if(f){const e=(0,O.DB)("metrics").toJSON().context.campaign;e&&Object.keys(e).forEach((t=>{Z[`utm_${t}`]=e[t]}))}(0,M.Z)("[Player] Timeline, %s",Z);const S=E.Z.join(b.get("key"),Z),P=t.provider.getXHROptions(S,{headers:{accept:`${T.AV.accept},${T.Ls.accept}`,"X-Plex-Session-Identifier":r.playbackSessionID}});return i().ajax(P).promise().then(((e,r,n)=>{var i;const s=null!=(i=n.getResponseHeader("content-type"))?i:"";let o=/json/.test(s)?JSON.parse(e):(0,j.Z)(e);return o.MediaContainer&&(o=o.MediaContainer),o.terminationCode&&(o.terminationCode=(0,L.Z)(o.terminationCode)),o.generalDecisionCode&&(o.generalDecisionCode=(0,L.Z)(o.generalDecisionCode)),o.mdeDecisionCode&&(o.mdeDecisionCode=(0,L.Z)(o.mdeDecisionCode)),o.transcodeDecisionCode&&(o.transcodeDecisionCode=(0,L.Z)(o.transcodeDecisionCode)),o.Bandwidths&&o.TranscodeSession&&(o.bandwidthTimeline={bandwidths:(0,R.Z)(o.Bandwidths.Bandwidth),transcodeSessionID:a().last((Array.isArray(o.TranscodeSession)?o.TranscodeSession[0]:o.TranscodeSession).key.split("/"))}),o.CaptureBuffer&&o.CaptureBuffer.TranscodeSession&&(o.captureBuffer=H(o.CaptureBuffer.TranscodeSession)),o.TranscodeSession&&(o.transcodeSession=H(o.TranscodeSession)),Z.time>6e4&&("progress"===o.playbackState?t.set("viewOffset",Z.time):"complete"===o.playbackState&&t.set({viewOffset:0,viewCount:1})),o}))})(h,y,ue({state:(0,I.Z)(p),playbackSessionID:p.get("playbackSessionID"),playQueueItemID:v,mediaItemID:c,metricsContextTuple:p.get("metricsContextTuple"),key:null==f?void 0:f.get("key"),ratingKey:null==f?void 0:f.get("ratingKey"),addCampaignParams:null==m?void 0:m.get("isCloud")},u)).done((0,Q.Z)(p,(e=>{r((0,ne.NN)({playerType:s}));const{bandwidthTimeline:t,captureBuffer:n,transcodeSession:i}=e;p.set("bandwidthTimeline",t);const a=p.get("liveTVSession");i?(r(qe({playerType:s,seekStartSeconds:i.seekStartSeconds,seekEndSeconds:i.seekEndSeconds})),a&&i.startedAt&&a.set({startedAt:i.startedAt,captureBuffer:n})):n&&(r(qe({playerType:s,seekStartSeconds:n.seekStartSeconds,seekEndSeconds:n.seekEndSeconds})),a&&n.startedAt&&a.set({startedAt:n.startedAt}));const o=p.get("playQueue");d&&o.get("playQueueSelectedItemID")===g.get("playQueueItemID")&&(0,D.ZP)(o).done((0,Q.Z)(p,(()=>{r((0,ne.NN)({playerType:s}))}))),e.terminationCode&&(r((0,ne.n5)()),p.restoreDefaults({hasError:!0,errorMessage:e.terminationText}))})))},[he](e,{playerType:t,durationMilliseconds:r}){const n=(0,X.F_)(e,t),i=(0,b.Z)(n).get("metadataItem"),s=Z(n);if(!s)return;const a=i.get("Media")[s.mediaIndex],o=(0,q.Z)(a),l=!!o&&"vbr"===o.bitrateMode,c=r>0&&!l?r:a.duration;n.set({isMediaLoading:!1,durationSeconds:Math.floor((c||0)/1e3)})},[ge](e,{playerType:t,positionSeconds:r}){const n=(0,X.F_)(e,t);(0,J.c9)((()=>{const e={positionSeconds:r},t=n.get("lastSeekPositionSeconds");null!==t&&r>t&&(e.lastSeekPositionSeconds=null),n.set(e)}))},[ye](e,{playerType:t,seekStartSeconds:r,seekEndSeconds:n}){(0,X.F_)(e,t).set({seekStartSeconds:r,seekEndSeconds:n})},[ve](e,{playerType:t,isBuffering:r}){(0,X.F_)(e,t).set({isBuffering:r})},[fe](e,{playerType:t,isMediaLoading:r}){(0,X.F_)(e,t).set({isMediaLoading:r})},[be](e,t){(0,X.F_)(e,t.playerType).set({isMediaLoading:!1,hasError:!0,errorMessage:t.errorMessage,errorCode:t.errorCode,errorCategory:t.errorCategory})},[Ze](e,{playerType:t}){const r=(0,X.F_)(e,t);(0,J.c9)((()=>{r.set({hasError:!1,errorMessage:null,errorCode:null,errorCategory:null})}))},[Se](e,t,r){const{metadataItemEntityID:n,liveTVSessionEntityID:s,mediaItemID:a,playerType:o,secondsElapsed:l}=t,c=(0,X.F_)(e,o),d=c.get("playQueue"),u=Z(c);if(!u)return;const p=c.get("isPaused"),m=l%30==0;if(l%10==0){const e=d.get("playQueueSelectedItemID"),t=d.get("playQueueItems").get(e);r(Qe({playerType:o,providerEntityID:c.get("providerEntityID"),playQueueItemEntityID:t.entityID(),metadataItemEntityID:n,liveTVSessionEntityID:s,mediaItemID:a,options:{playbackTime:c.get("itemPlaybackTime"),positionSeconds:c.get("positionSeconds"),durationSeconds:c.get("durationSeconds"),mediaIndex:u.mediaIndex,partIndex:u.partIndex,partCount:u.partCount}}))}if(m&&p&&u.transcodeSessionID){const t=u.transcodeServerEntityID;!function(e,t){(0,C.Z)(t,"A transcoder ping requires a session identifier"),(0,M.Z)("[Player] Transcoder Ping, %s",t);const r=`/video/:/transcode/universal/ping?session=${t}`;i().ajax(e.getXHROptions(r)).promise()}(Y.SW(e,{serverEntityID:t}),u.transcodeSessionID)}},[Pe](e,{playerType:t,shouldPlay:r,shouldPause:n,isApplicationInitiated:i},s){const a=(0,X.F_)(e,t),o=a.get("isPaused"),l=(0,S.Z)(e),c="play",d="pause";let u;i||o||!(0,G.Z)(a)?a.get("isPostPlayVisible")?(0,J.c9)((()=>{a.set({isPostPlayVisible:!1}),l.playNextItem(a,!0)})):(u=r?c:n?d:o?c:d,o&&u===d||!o&&u===c||(0,J.c9)((()=>{l[u](a,i)}))):s((0,K.wp)((0,ee.Z)("Pausing is not enabled on this channel")))},[Ie](e,{playerType:t,positionSeconds:r}){const n=(0,X.F_)(e,t),i=(0,S.Z)(e);(0,G.Z)(n)||(0,J.c9)((()=>{i.seek(n,r)}))},[Ee](e,{playerType:t,positionSeconds:r}){const n=(0,X.F_)(e,t),i=Z(n);if(!i)return;const s=(0,b.Z)(n).entityID(),a=n.get("liveTVSession");let o=r;if(a){const e=a.get("captureBuffer"),t=a.get("startedAt");o+=t-e.startedAt,a.set({startedAt:t+r})}const l=pe(ue({},i),{url:w(i.url,o)});n.set({currentDecision:l,decisions:pe(ue({},n.get("decisions")),{[s]:l})})},[we](e,{playerType:t,allowDebounce:r=!0}){const n=(0,X.F_)(e,t);if((0,G.Z)(n))return;const i=(0,S.Z)(e),s=r?o.Z.seekDebounceMilliseconds:null,a=Ct(n.get("nextPositionSeconds")||n.get("positionSeconds"),n.get("durationSeconds"),-P.jV);(0,J.c9)((()=>{i.seek(n,a,s)}))},[Ce](e,{playerType:t,allowDebounce:r=!0}){const n=(0,X.F_)(e,t);if((0,G.Z)(n))return;const i=(0,S.Z)(e),s=n.get("positionSeconds"),a=n.get("nextPositionSeconds"),l=n.get("durationSeconds"),c=r?o.Z.seekDebounceMilliseconds:null;if(l-s>P.uS){const e=Ct(a||s,l,P.Jj);(0,J.c9)((()=>{i.seek(n,e,c)}))}},[Me](e,{playerType:t}){const r=(0,X.F_)(e,t),n=(0,b.Z)(r).get("metadataItem");if((0,G.Z)(r))return;const i=(0,S.Z)(e),s=n.get("chapters"),a=r.get("positionSeconds"),o=r.get("nextPositionSeconds"),l=r.get("durationSeconds");let c;c=s&&s.length?function(e,t){if(e&&e.length){for(let r=e.length-1;r>=0;r--){const n=e.at(r),i=Math.ceil(n.get("startTimeOffset")/1e3);if(i<t-P.Nf)return i}return 0}}(s,o||a):Ct(o||a,l,-P.qB),(0,J.c9)((()=>{i.seek(r,c)}))},[De](e,{playerType:t}){const r=(0,X.F_)(e,t),n=(0,b.Z)(r).get("metadataItem");if((0,G.Z)(r))return;const i=(0,S.Z)(e),s=n.get("chapters"),a=r.get("positionSeconds"),o=r.get("nextPositionSeconds"),l=r.get("durationSeconds");let c;s&&s.length?c=function(e,t){if(e&&e.length)for(let r=0;r<e.length;r++){const n=e.at(r),i=Math.ceil(n.get("startTimeOffset")/1e3);if(i>t)return i}}(s,a):l-(o||a)>P.uS&&(c=Ct(o||a,l,P._V)),null!=c&&(0,J.c9)((()=>{i.seek(r,c)}))},[Oe](e,{playerType:t,volume:r,delta:n},i){const s=function(e){const t=e.get("remotePlayer");return t?t.get("volume"):(0,O.DB)("settingFinder").find("volume")}(e);let a=n?s+n:r;if(a=Math.max(0,Math.min(100,a)),a===s)return;const o=(0,X.F_)(e,t),l=(0,S.Z)(e);(0,J.c9)((()=>{l.changeVolume(o,a,i)}))},[Te](e,{playerType:t}){const r=(0,X.F_)(e,t),n=r.get("isSettingsVisible");(0,J.c9)((()=>{r.set((0,W.Z)(r,n,{isSettingsVisible:!n,isChaptersVisible:!1,isPlayQueueVisible:!1,isLyricsVisible:!1,isSubtitlesOffsetSettingsVisible:!1,isWatchTogetherParticipantsVisible:!1}))}))},[xe](e,{playerType:t}){const r=(0,X.F_)(e,t),n=r.get("isChaptersVisible");(0,J.c9)((()=>{r.set((0,W.Z)(r,n,{isSettingsVisible:!1,isChaptersVisible:!n,isPlayQueueVisible:!1,isLyricsVisible:!1,isSubtitlesOffsetSettingsVisible:!1,isWatchTogetherParticipantsVisible:!1}))}))},[ke](e,{playerType:t}){const r=(0,X.F_)(e,t),n=r.get("isSubtitlesOffsetSettingsVisible");(0,J.c9)((()=>{r.set((0,W.Z)(r,n,{isSettingsVisible:!1,isChaptersVisible:!1,isPlayQueueVisible:!1,isLyricsVisible:!1,isSubtitlesOffsetSettingsVisible:!n,isWatchTogetherParticipantsVisible:!1}))}))},[Ne](e,{playerType:t}){const r=(0,X.F_)(e,t),n=r.get("isWatchTogetherParticipantsVisible");(0,J.c9)((()=>{r.set((0,W.Z)(r,n,{isSettingsVisible:!1,isChaptersVisible:!1,isPlayQueueVisible:!1,isLyricsVisible:!1,isWatchTogetherParticipantsVisible:!n}))}))},[Ae](e,{playerType:t,qualityIndex:r}){const n=(0,X.F_)(e,t);(0,S.Z)(e).changeQualityIndex(n,r)},[Re](e,t,r){const{playerType:n,streamTypeString:i,streamID:s}=t,a=e.get("remotePlayer"),o=(0,X.F_)(e,n),l=(0,b.Z)(o).get("metadataItem"),c=(0,S.Z)(e);r((0,$.Bs)({metadataItemEntityID:l.entityID(),mediaIndex:o.get("mediaIndex"),streamTypeString:i,streamID:s,updateLocalOnly:!!a,allParts:o.get("partIndex")>0})),c.changeStream(o,i,s)},[Le](e,{playerType:t,subtitleColor:r},n){const i=(0,X.F_)(e,t);(0,S.Z)(e).changeSubtitleColor(i,r,n)},[je](e,{playerType:t,subtitlePosition:r},n){const i=(0,X.F_)(e,t);(0,S.Z)(e).changeSubtitlePosition(i,r,n)},[Ve](e,{playerType:t,subtitleSize:r},n){const i=(0,X.F_)(e,t);(0,S.Z)(e).changeSubtitleSize(i,r,n)},[Ue](e,t,r){const{playerType:n,subtitleOffset:s,localUpdateOnly:a}=t,o=(0,S.Z)(e),l=(0,X.F_)(e,n),d=l.get("mediaIndex")||0,u=l.get("partIndex")||0,p=(0,b.Z)(l).get("metadataItem"),m=p.get("Media"),h=m[d],g=h.Part[u],y=te.Z.get("subtitles").id,Z=g.Stream.find((e=>e.streamType===y&&e.selected)),P=function(e,t,r,n,i){const s=f(v({},n),{offset:i}),a=(0,c.Z)(r.Stream,n,s),o=f(v({},r),{Stream:a}),l=f(v({},t),{Part:(0,c.Z)(t.Part,r,o)});return(0,c.Z)(e,t,l)}(m,h,g,Z,s);if(p.set({Media:P}),a)return;const I={offset:s};let w=Z.key;k.wB(p.provider.get("identifier"),k.uk)&&(w=`/library/parts/${g.id}`,I.subtitleStreamID=Z.id);const C=E.Z.join(w,I),M=p.provider.getXHROptions(C,{type:"PUT",scope:"setMetadataItemStreamOffset--"+Z.id});re.Z.abortAll(M.scope),i().ajax(M).fail((e=>{e.aborting||p.get("Media")===P&&p.set({Media:m})})),o.changeSubtitleOffset(l,s,r)},[Fe](e,{playerType:t,playbackSpeed:r}){const n=(0,X.F_)(e,t),i=(0,S.Z)(e),s=Math.round(10*r)/10;i.changePlaybackSpeed(n,s)},[Be](e,{playerType:t,playbackTime:r},n){(0,X.F_)(e,t).set("itemPlaybackTime",r)},[_e](e,{playerType:t,playbackTime:r},n){(0,X.F_)(e,t).set("sessionPlaybackTime",r)},[ze](e,{playerType:t}){const r=(0,X.F_)(e,t);(0,b.Z)(r).get("metadataItem").fetch({data:{skipRefresh:1},usePopulatedParams:!0})},[He](e,{playerType:t,bufferedRanges:r}){const n=(0,X.F_)(e,t),i=r.map((e=>({startSeconds:Math.ceil(e.startSeconds),endSeconds:Math.floor(e.endSeconds)}))).sort(((e,t)=>e.startSeconds-t.startSeconds)).reduce(((e,t)=>{var r,n;const i=e.length-1;return t.startSeconds<(null==(r=e[i])?void 0:r.startSeconds)||t.startSeconds<(null==(n=e[i])?void 0:n.endSeconds)?(e[i].startSeconds=Math.min(e[i].startSeconds,t.startSeconds),e[i].endSeconds=Math.max(e[i].endSeconds,t.endSeconds)):e.push(t),e}),[]);a().isEqual(n.get("bufferedRanges"),i)||n.set({bufferedRanges:i})},[We](e,{playerType:t,width:r,height:n}){(0,X.F_)(e,t).set({mediaWidth:r,mediaHeight:n})},[Ge](e,{playerType:t,canPlayThrough:r}){const n=(0,X.F_)(e,t);n.get("canPlayThrough")!==r&&n.set({canPlayThrough:r})}}},7574:(e,t,r)=>{"use strict";r.r(t),r.d(t,{INIT_RECORDING_SCHEDULE_PAGE:()=>S,CLEAR_RECORDING_SCHEDULE_PAGE:()=>P,FETCH_MEDIA_SUBSCRIPTIONS:()=>I,MOVE_MEDIA_SUBSCRIPTION:()=>E,SET_VISIBLE_DAYS:()=>w,GO_TO_TODAY:()=>C,GO_TO_PREVIOUS_RANGE:()=>M,GO_TO_NEXT_RANGE:()=>D,FETCH_CALENDAR:()=>O,PLAY_RECORDING:()=>T,CLEAR_MOVE_ERROR:()=>x,initRecordingSchedulePage:()=>A,clearRecordingSchedulePage:()=>k,fetchMediaSubscriptions:()=>N,moveMediaSubscription:()=>R,setVisibleDays:()=>L,goToToday:()=>j,goToPreviousRange:()=>V,goToNextRange:()=>U,fetchCalendar:()=>F,playRecording:()=>B,clearMoveError:()=>_,recordingSchedulePageActionHandlers:()=>G});var n=r(77349),i=r(42227),s=r(42902),a=r(7069),o=r(22094),l=r(52094),c=r(10415),d=r(15451),u=r(2380),p=r(81775),m=r(53156),h=r(80011),g=r(27649),y=r(62291),v=r(12559),f=r(76389),b=r(87442),Z=r(73788);const S="ui/recordingSchedulePage/initRecordingSchedulePage",P="ui/recordingSchedulePage/clearRecordingSchedulePage",I="ui/recordingSchedulePage/fetchMediaSubscriptions",E="ui/recordingSchedulePage/moveMediaSubscription",w="ui/recordingSchedulePage/setVisibleDays",C="ui/recordingSchedulePage/goToToday",M="ui/recordingSchedulePage/goToPreviousRange",D="ui/recordingSchedulePage/goToNextRange",O="ui/recordingSchedulePage/fetchCalendar",T="ui/recordingSchedulePage/playRecording",x="ui/recordingSchedulePage/clearMoveError",A=(0,d.Z)(S),k=(0,d.Z)(P),N=(0,d.Z)(I),R=(0,d.Z)(E),L=(0,d.Z)(w),j=(0,d.Z)(C),V=(0,d.Z)(M),U=(0,d.Z)(D),F=(0,d.Z)(O),B=(0,d.Z)(T),_=(0,d.Z)(x);function z(e){return e.get("ui").get("recordingSchedulePage")}function H(e){return z(e).get("calendar")}function W(e,t,r){const n=z(e),i=(0,f.SW)(e,t);if(n.get("isPagePopulated")){const e=n.get("calendar"),t=n.get("mediaSubscriptions");e&&e.server===i&&r(F()),t&&t.server===i&&r(N())}}const G=(0,u.Z)({[S](e,t){const r=z(e),n=r.get("mediaSubscriptions"),i=r.get("calendar"),s=(0,f.SW)(e,t),a={isPagePopulated:!0,isCalendarPending:!1,isCalendarPopulated:!1,calendarError:null};n&&n.server===s||(a.mediaSubscriptions=new c.Z([],{server:s})),i&&i.server===s?i.restoreDefaults():a.calendar=new l.Z({},{server:s}),r.set(a)},[P](e){z(e).set("isPagePopulated",!1)},[I]:(0,p.Z)({key:"mediaSubscriptions",getModel:z}),[E](e,t){const r=z(e),n=r.get("mediaSubscriptions"),i=(0,f.xS)(e,t),s=i&&n.indexOf(i),{moveIndex:a}=t;if((0,b.c9)((()=>{r.set({mediaSubscriptionMoveError:null})})),s===a||s===a-1)return;const o=a>s?a-1:a;n.remove(i),n.add(i,{at:o});const l=o>0?n.at(o-1).id:void 0;(0,m.Z)(i,l).fail((e=>{n.remove(i),n.add(i,{at:s});const t=401===e.status?(0,Z.Z)("You do not have permission to perform this action."):(0,Z.Z)("There was a problem saving your changes. Please try again.");r.set({mediaSubscriptionMoveError:t})}))},[x](e,t){z(e).set({mediaSubscriptionMoveError:null})},[w](e,t,r){H(e).set("visibleDays",t.visibleDays)},[C](e,t,r){H(e).set("time",(0,s.Z)(new Date))},[M](e,t,r){const n=H(e),o=n.get("visibleDays"),l=(0,i.Z)(n.get("time"));n.set("time",(0,s.Z)((0,a.Z)(l,o)))},[D](e,t,r){const a=H(e),o=a.get("visibleDays"),l=(0,i.Z)(a.get("time"));a.set("time",(0,s.Z)((0,n.Z)(l,o)))},[O]:(0,p.Z)({key:"calendar",getModel:z}),[T](e,t,r){const{serverEntityID:n,providerEntityID:i,linkedKey:s,metricsContext:a}=t,l=(0,f.SW)(e,t),c=new o.Z({key:s},{server:l});c.populate().done((()=>{r((0,g.wA)({serverEntityID:n,providerEntityID:i,metadataItemEntityID:c.entityID(),metricsPage:y.WT,metricsContext:a}))}))},[h.Cs](e,t,r){const n=t.activity;n.type===v.l1&&W(e,t,r),n.type===v.sC&&"error"===n.Response.status&&W(e,t,r)}})},9466:(e,t,r)=>{"use strict";r.d(t,{kS:()=>Z,ao:()=>S,LL:()=>P,N3:()=>M});var n=r(19755),i=r.n(n),s=r(65100),a=r(15451),o=r(2380),l=r(35311),c=r(34575),d=r(80011),u=r(57471),p=r(12559),m=r(76389),h=r(73788),g=r(20683);const y="ui/subtitlesModal/resetMetadataItemSubtitles",v="ui/subtitlesModal/fetchMetadataItemSubtitles",f="ui/subtitlesModal/downloadMetadataItemSubtitle",b="ui/subtitlesModal/clearSubtitlesDownloadError",Z=(0,a.Z)(y),S=(0,a.Z)(v),P=(0,a.Z)(f);(0,a.Z)(b);let I=null;function E(e){return e.get("ui").get("subtitlesModal")}function w(e,t){I&&(I=window.clearTimeout(I));const r=t.get("metadataItemEntityID"),n=(0,m.$R)(e,{metadataItemEntityID:r}),i=n.server,s=t.get("subtitlesDownloadStartTime"),a=t.get("isSubtitlesDownloaded"),o=t.get("subtitlesDownloadError"),l=t.get("subtitlesDownloadKey");a||o||(s&&Date.now()-s>3e4?t.set({subtitlesDownloadActivityID:null,subtitlesDownloadKey:null,subtitlesDownloadStartTime:null,isSubtitlesDownloaded:!1,subtitlesDownloadError:(0,h.Z)("Failed to download subtitles in time")}):I=window.setTimeout((()=>{n.fetch({data:{skipRefresh:1},usePopulatedParams:!0}).then((()=>{if(n.get("Media").some((e=>e.Part.some((e=>e.Stream.some((e=>e.key===l)))))))return t.set({subtitlesDownloadActivityID:null,subtitlesDownloadKey:null,subtitlesDownloadStartTime:null,isSubtitlesDownloaded:!0,subtitlesDownloadError:null}),void C(e);i.get("hasEventConnection")||w(e,t)}),(()=>{w(e,t)}))}),2e3))}function C(e){const t=e.get("ui").get("audioVideoPlayer");t.get("isOpen")&&(0,l.Z)(e).refreshRemoteStreams(t)}const M=(0,o.Z)({[y](e){const t=E(e),r=t.get("subtitles");I&&(I=window.clearTimeout(I)),r.abortPendingPopulate(),r.resetPopulatePromise(null),t.restoreDefaults()},[v](e,t,r){const n=E(e),i=function(e){return e.get("user").get("profile")}(e),a=(0,m.$R)(e,t),o=a.server.entityID(),l=n.get("subtitles");l&&(l.abortPendingPopulate(),l.resetPopulatePromise(null));const c=new s.Z([],{key:a.get("key"),server:a.server,provider:a.provider,language:t.language,title:t.title,mediaItemID:t.mediaItemID,minimumScore:t.minimumScore,hearingImpaired:i.get("defaultSubtitleAccessibility"),forced:i.get("defaultSubtitleForced")});n.set({subtitles:c,serverEntityID:o,metadataItemEntityID:t.metadataItemEntityID,isSubtitlesPending:!0,isSubtitlesPopulated:!1,subtitlesError:null}),c.fetch().then((e=>{n.set({isSubtitlesPending:!1,isSubtitlesPopulated:!0})}),((e,t)=>{t.aborting?n.set("isSubtitlesPending",!1):n.set({isSubtitlesPending:!1,subtitlesError:(0,u.Z)(t,(0,h.Z)("Unable to load subtitles"))})}))},[f](e,t,r){const n=E(e),s=(0,m.$R)(e,t),a=s.server,o={key:t.key,codec:t.codec,language:t.language,hearingImpaired:t.hearingImpaired?1:0,forced:t.forced?1:0,providerTitle:t.providerTitle,mediaItemID:t.mediaItemID,transient:t.transient},l=g.Z.join([s.get("key"),"/subtitles"],o),c=a.getXHROptions(l,{type:"PUT"});n.set({subtitlesDownloadKey:t.key,subtitlesDownloadStartTime:Date.now(),isSubtitlesDownloaded:!1,subtitlesDownloadError:null}),i().ajax(c).then(((t,r,i)=>{const s=i.getResponseHeader("X-Plex-Activity");n.set("subtitlesDownloadActivityID",s),a.get("hasEventConnection")||w(e,n)}),(e=>{n.set({subtitlesDownloadKey:null,subtitlesDownloadError:(0,u.Z)(e,(0,h.Z)("Unable to download subtitles"))})}))},[b](e){E(e).set("subtitlesDownloadError",null)},[d.db](e,t){const{serverEntityID:r}=t,n=E(e);r===n.get("serverEntityID")&&w(e,n)},[d.Cs](e,t,r){const{activity:n}=t;if(n.type!==p.iJ)return;const i=E(e);if(n.uuid!==i.get("subtitlesDownloadActivityID"))return;const s=i.get("serverEntityID"),a=i.get("metadataItemEntityID"),o={subtitlesDownloadActivityID:null,subtitlesDownloadKey:null,subtitlesDownloadStartTime:null},l=null!=n.Response.error;l?(o.isSubtitlesDownloaded=!1,o.subtitlesDownloadError=n.Response.status):o.isSubtitlesDownloaded=!0,i.set(o),l||(C(e),r((0,c.dk)({serverEntityID:s,metadataItemEntityID:a})))}})},43508:(e,t,r)=>{"use strict";r.d(t,{_z:()=>s,Rw:()=>a,jR:()=>o,wp:()=>l,J0:()=>c});var n=r(15451),i=r(44301);const s="ui/repopulatePage",a="ui/showAlert",o=(0,n.Z)(s),l=(0,n.Z)(a,(e=>"string"==typeof e?{type:i.p,message:e}:e)),c={[a](e,t){}}},84503:(e,t,r)=>{"use strict";r.d(t,{k_:()=>l,gk:()=>c,FC:()=>d,pL:()=>u,xZ:()=>p,tB:()=>m,Dz:()=>h,PF:()=>g,xh:()=>y,$Q:()=>f,LN:()=>b,fB:()=>Z,Dv:()=>S,dB:()=>P,R4:()=>I,Kq:()=>E});var n=r(15451),i=r(81775),s=r(48209),a=r(86832),o=r(76389);const l="user/lockUser",c="user/fetchUserFeatures",d="user/populateUserFeatures",u="user/saveExperienceSettings",p="user/saveSubtitleColor",m="user/saveSubtitlePosition",h="user/saveSubtitleSize",g="user/saveAutoPlay",y=(0,n.Z)(l),v=(0,n.Z)(c),f=(0,n.Z)(d),b=(0,n.Z)(u),Z=(0,n.Z)(p),S=(0,n.Z)(m),P=(0,n.Z)(h),I=(0,n.Z)(g),E={[l](e,t){a.Z.error("LOCK_USER must be handled by each project")},[c]:(0,i.Z)({key:"features",getModel:o.VX}),[d]:(0,s.Z)({key:"features",fetchActionCreator:v,getModel:o.VX}),[u](e,t){a.Z.error("SAVE_EXPERIENCE_SETTINGS must be handled by each project")},[p](e,t,r){r(b(t))},[m](e,t,r){r(b(t))},[h](e,t,r){r(b(t))},[g](e,t,r){r(b(t))}}},99735:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(17939);function i(e,t){return(0,n.Z)(e,(e=>t.reduce(((t,r)=>(e&&r in e&&(t[r]=e[r]),t)),{})))}},17939:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(13469),s=r.n(i);const a=(0,n.wN)(n.PW,s().isEqual)},60094:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(22222),i=r(13469),s=r.n(i),a=r(87242),o=r(53461),l=r(87880),c=r(86418),d=r(57799),u=r(20683);const p={},m={};function h(e,t){const{serverEntityID:r,providerEntityID:i}=t,u=`${r}:${i}`;return m[u]||(m[u]=(0,a.Z)((0,n.P1)((0,l.Z)(),(0,o.Z)(),((e,t)=>{const r=e&&e.activeConnection&&e.activeConnection.uri;if(!r)return p;let n,i="/photo/:/transcode",a=!1,o=!1;if(t){const e=s().findWhere(t.features,{type:c.Z.IMAGE_TRANSCODER});e&&(i=e.key,a=(0,d.Z)(i),o=e.public)}return n=a?t&&t.baseURL?t.baseURL:r:"",{accessToken:e.accessToken,baseUrl:n,isAbsoluteTranscodeKey:a,isPublicTranscoder:o,transcodeKey:i,uri:r}})),(e=>e))),m[u](e,t)}function g(e){const t=e&&e.urlParams;return(0,n.P1)(((e,{url:t})=>t),h,((e,r)=>{if(!e||r===p)return;const{accessToken:n,baseUrl:i,isAbsoluteTranscodeKey:s,isPublicTranscoder:a,transcodeKey:o,uri:l}=r;let c;if((0,d.Z)(e))c=e;else{const r={"X-Plex-Token":n};t&&Object.assign(r,t),c=u.Z.join([i,e],r)}const m=s?o:[l,o];return u.Z.join(m,{url:c,"X-Plex-Token":a?void 0:n})}))}},87242:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(35846);const s=(0,n.wN)(n.PW,i.Z)},91141:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(87880),s=r(30549);function a(){return(0,n.P1)(s.Z,(0,n.P1)((0,i.Z)(),(e=>e?e.desktop.libraries:void 0)),((e,t)=>t?t.map((t=>e[t])):[]))}},30549:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(53623);const s=(0,n.P1)(i.Z,(e=>e.libraries))},75165:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(22222),i=r(13469),s=r.n(i),a=r(86555),o=r(88339),l=r(12559);const c=function(){return(0,n.P1)((0,o.Z)(),(0,a.Z)(),((e,t)=>s().find(e,(e=>e.type===l.sC&&e.Context.itemKey&&e.Context.itemKey===t.key))))}},57467:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(77121),s=r(65775);function a(){return(0,n.P1)((0,i.Z)(),(0,s.Z)(),((e,t)=>{if(e&&(null==t?void 0:t.currentPosition))return e.Media.find((e=>e.beginsAt<=t.currentPosition&&e.endsAt>t.currentPosition))}))}},77121:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(65775),s=r(97797);function a(){return(0,n.P1)((0,i.Z)(),s.Z,((e,t)=>{if(e)return t[e.airingMetadataItem]}))}},65775:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(51408),s=r(71168);function a(){return(0,n.P1)(s.Z,(0,i.Z)("liveTVSession"),((e,t)=>e[t]))}},3881:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(22222),i=r(13469),s=r.n(i),a=r(53461),o=r(88339),l=r(12559);const c=function(){return(0,n.P1)((0,a.Z)(),(0,o.Z)(),((e,t)=>e?s().find(t,(t=>t.type===l.JW&&t.Context.identifier===e.identifier)):null))}},71168:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(53623);const s=(0,n.P1)(i.Z,(e=>e.liveTVSessions))},86555:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(97797);function s(){return(0,n.P1)(((e,{metadataItemEntityID:t})=>t),i.Z,((e,t)=>t[e]))}},80737:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(60048);function s(){return(0,n.P1)(((e,{metadataListEntityID:t})=>t),i.Z,((e,t)=>t[e]))}},28629:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(22222),i=r(86555),s=r(73701),a=r(62934),o=r(35076);function l(){return(0,n.P1)((0,i.Z)(),s.Z,a.Z,((e,t,r)=>e&&e.source||(0,o.Z)({providerIdentifier:t.identifier,serverIdentifier:r.machineIdentifier})))}},53534:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(22222),i=r(13469),s=r.n(i),a=r(72066),o=r(57609),l=r(3615),c=r(86555);const d={s:"seconds",m:"minutes",h:"hours",d:"days",w:"weeks",M:"months",y:"years"};function u(e){if("now"===e)return{};const t=e.match(/([-+]?\d+)([smhdwMy])/);if(t){const[,e,r]=t;if(e&&r)return{[d[r]]:parseInt(e,10)}}else{const t=parseInt(e,10);if(s().isNumber(t))return t}return{}}function p(e,t){return!(!s().isObject(t)||!(0,a.Z)(e,t))||e>=t}function m(e,t){return!(!s().isObject(t)||!(0,o.Z)(e,t))||e<=t}function h(){return(0,n.P1)(((e,{containerKey:t})=>t),(0,c.Z)(),((e,t)=>{if(!t||!t.Media)return;const r=function(e){if(!e)return;const[,t]=e.split("?");return t?l.Z.parseQueryString(t):void 0}(e),n=s().sortBy(t.Media,"endsAt"),i=Date.now()/1e3;for(let e=0,t=n.length;e<t;e++){const t=n[e];if(r){const e=r["beginsAt>"],n=r["beginsAt<"],i=r["endsAt>"],s=r["endsAt<"];if(e){const r=u(e);if(m(t.beginsAt,r))continue}if(n){const e=u(n);if(p(t.beginsAt,e))continue}if(i){const e=u(i);if(m(t.endsAt,e))continue}if(s){const e=u(s);if(p(t.endsAt,e))continue}}if(t.endsAt>i)return t}return s().first(n)}))}},97797:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(53623);const s=(0,n.P1)(i.Z,(e=>e.metadataItems))},60048:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(53623);const s=(0,n.P1)(i.Z,(e=>e.metadataLists))},17051:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(97797),s=r(53088);const a=function(e=0){return(0,n.P1)((0,s.Z)(e),i.Z,((e,t)=>{if(e&&e.metadataItem)return t[e.metadataItem]}))}},53088:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(20074),s=r(49510);const a=function(e=0){return(0,n.P1)((0,i.Z)(),s.Z,((t,r)=>{const n=t?t.playQueueItems:[];if(n.length){const i=t.currentIndex;let s=i+e;t.repeat&&(s=function(e,t,r){return(e+t%r+r)%r}(i,e,t.length));const a=n[s];return a&&r[a]}}))}},20074:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(51408);const i=function(){return(0,n.Z)("playQueue")}},51408:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(4632);function s(e){return(0,n.P1)((0,i.Z)(),(t=>t?t[e]:void 0))}},33588:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(13469),s=r.n(i),a=r(87242);const o=function(e,t){return(0,a.Z)((0,n.P1)((e=>e.ui),((e,{playerType:t})=>t),((r,n=t)=>{const i=n+"Player";return r[i]?s().pick(r[i],e):{}})),(e=>e))}},4632:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(22222);function i(){return(0,n.P1)((e=>e.ui),((e,{playerType:t})=>t),((e,t)=>e[t+"Player"]))}},49510:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(53623);const s=(0,n.P1)(i.Z,(e=>e.playQueueItems))},35877:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(95018);const s=(0,n.P1)(i.Z,(e=>!!e))},95018:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return e.remotePlayer}},15997:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(53461),s=r(78741);function a(){return(0,n.P1)((0,i.Z)(),(e=>{const t=(0,s.Z)(e);return t?t.directories:[]}))}},53461:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(46898);function s(){return(0,n.P1)(((e,{providerEntityID:t})=>t),i.Z,((e,t)=>t[e]))}},46898:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(53623);const s=(0,n.P1)(i.Z,(e=>e.providers))},78110:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(46898),s=r(41863),a=r(74226);const o=(0,n.P1)((0,s.Z)("providers"),i.Z,((e,t)=>!!e&&e.some((e=>a.wB(t[e].identifier,a.vP)&&a.yv(t[e].identifier)))))},18622:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(73701);function i(e,{metadataItemEntityID:t}){const r=e.entities.metadataItems[t],i=r&&r.providerEntityID;if(i)return(0,n.Z)(e,{providerEntityID:i})}},38375:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(77353),s=r(74226);const a=(0,n.P1)(i.Z,(e=>e.find((e=>e.identifier===s.IS))))},48521:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(46898),s=r(21604),a=r(41863);const o=(0,n.P1)(s.Z,i.Z,(0,a.Z)("providers"),((e,t,r)=>e.reduce(((e,n)=>{const i=(n.isCloud?r:n.providers).map((e=>({server:n,provider:t[e]}))),s=i.length?i:[{server:n}];return e.push(...s),e}),[])))},73701:(e,t,r)=>{"use strict";r.d(t,{R:()=>a,Z:()=>l});var n=r(22222),i=r(17939),s=r(86418);function a(e){return e?{entityID:e.entityID,id:e.id,parentID:e.parentID,identifier:e.identifier,metricsIdentifier:e.metricsIdentifier,isLibraryProvider:e.isLibraryProvider,isPopulated:!!e.isPopulated,epgSource:e.epgSource,title:e.title,sourceTitle:e.sourceTitle,protocols:e.protocols.reduce(((e,t)=>(e[t]=!0,e)),{}),features:e.features.reduce(((e,t)=>{let r=t;if(t.type===s.Z.ACTIONS){let e={type:s.Z.ACTIONS};e=t.actions.reduce(((e,t)=>(e[t.id]=t,e)),e),r=e}return e[t.type]=r,e}),{})}:null}const o={};function l(e,{providerEntityID:t}){let r=o[t];return r||(r=(0,i.Z)((0,n.P1)(((e,t)=>e.entities.providers[t]),a),(e=>e)),o[t]=r),r(e,t)}},77353:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(46898),s=r(41863);const a=(0,n.P1)((0,s.Z)("providers"),i.Z,((e,t)=>e?e.map((e=>t[e])):[]))},53623:(e,t,r)=>{"use strict";function n(e){return e.entities}r.d(t,{Z:()=>n})},88339:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(87880);const s=function(){return(0,n.P1)((0,i.Z)(),(e=>{if(e)return e.desktop.activities}))}},22688:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>l,tk:()=>c,k8:()=>d,Ol:()=>u});var n=r(22222),i=r(13469),s=r.n(i),a=r(12559),o=r(88339);function l(e){return(0,n.P1)((0,o.Z)(),(t=>s().find(t,{type:e})))}function c(){return l(a.nJ)}function d(){return l(a.zL)}function u(){return l(a.y0)}},88170:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(87880);function s(){return(0,n.P1)((0,i.Z)(),(e=>e&&e.desktop))}},87880:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(9922);function s(){return(0,n.P1)(((e,{serverEntityID:t})=>t),i.Z,((e,t)=>t[e]))}},9922:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(53623);const s=(0,n.P1)(i.Z,(e=>e.servers))},74278:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(9922);const s=(0,n.P1)(i.Z,(e=>e.cloudServer),((e,t)=>e[t]))},28641:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(17939),s=r(21604);const a=(0,i.Z)(s.Z,(e=>e.filter((e=>e.isPrimaryEligible)))),o=(0,n.P1)(a,(e=>e.reduce(((e,t)=>(t.isShared||t.isOutOfDate||e.push(t.entityID),e)),[])))},54877:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(18622),s=r(11244);const a=(0,n.P1)(s.Z,i.Z,((e,t)=>({itemServerEntityID:e&&e.entityID,itemProviderEntityID:t&&t.entityID})))},11244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(62934);function i(e,{metadataItemEntityID:t}){const r=e.entities.metadataItems[t],i=r&&r.serverEntityID;if(i)return(0,n.Z)(e,{serverEntityID:i})}},15830:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(28663);const s=(0,n.P1)(i.Z,(e=>e.map((e=>e.entityID))))},28663:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(87242),s=r(21604);const a=(0,i.Z)((0,n.P1)(s.Z,(e=>e.filter((e=>e.isFullOwnedServer&&e.isConnected)))),(e=>e))},51070:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(87242),s=r(21604);const a=(0,i.Z)((0,n.P1)(s.Z,(e=>e.filter((e=>(e.isFullOwnedServer||e.isShared)&&e.isConnected)))),(e=>e))},97075:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(21604);const s=(0,n.P1)(i.Z,(e=>e.filter((e=>e.isFullServer&&!!e.friendlyName))))},21604:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(9922);const s=(0,n.P1)(i.Z,(e=>e.servers),(e=>e.embeddedServer),((e,t,r)=>{const n=t?t.map((t=>e[t])):[];return r&&e[r]&&n.push(e[r]),n}))},25209:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(87242),s=r(21604);const a=(0,i.Z)((0,n.P1)(s.Z,(e=>e.reduce(((e,t)=>(t.isFullOwnedServer&&t.isClaimed&&t.friendlyName&&e.push(t.entityID),e)),[]))),(e=>e))},62934:(e,t,r)=>{"use strict";r.d(t,{h:()=>s,Z:()=>o});var n=r(22222),i=r(87242);function s(e){return e?{entityID:e.entityID,machineIdentifier:e.machineIdentifier,version:e.version,friendlyName:e.friendlyName,sourceTitle:e.sourceTitle,allowSync:e.allowSync,allowMediaDeletion:e.allowMediaDeletion,backgroundProcessing:e.backgroundProcessing,transcoderVideo:e.transcoderVideo,isConnected:e.isConnected,isUnavailable:e.isUnavailable,isFullServer:e.isFullServer,isFullOwnedServer:e.isFullOwnedServer,isOutOfDate:e.isOutOfDate,isCloud:e.isCloud,isShared:e.isShared,livetv:e.livetv,ownerId:e.ownerId,ownerFeatures:e.ownerFeatures}:null}const a={};function o(e,{serverEntityID:t}){let r=a[t];return r||(r=(0,i.Z)((0,n.P1)(((e,t)=>e.entities.servers[t]),s),(e=>e)),a[t]=r),r(e,t)}},31288:(e,t,r)=>{"use strict";function n(e){return e.deviceSettings}r.d(t,{Z:()=>n})},93805:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(45191);function i(e){const t=e.remotePlayer;return t?t.volume:(0,n.DB)("selectLocalVolume")(e)}},89186:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(53623);const s=(0,n.P1)(i.Z,(e=>e.mediaSubscriptions))},92656:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(77353),s=r(74278),a=r(41863);const o=(0,n.P1)(s.Z,(0,a.Z)("isProvidersPopulated"),(0,a.Z)("providersError"),i.Z,((e,t,r,n)=>{if(e.isRejected)return!0;const i=(t||!!r)&&n.every((e=>e.isPopulated||!!e.error));return e.isResourcesPopulated&&i}))},80183:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(71741);function s(){return(0,n.P1)(i.Z,((e,t)=>t.friendEntityID),((e,t)=>e[t]))}},28243:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(12174);const s=function(e){return(0,n.P1)(i.Z,(t=>Object.values(t).find((t=>t.id===e))))}},41863:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(77072);const s={};function a(e){if(s[e])return s[e];const t=(0,n.P1)(i.Z,(t=>t[e]));return s[e]=t,t}},15579:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(13076);const s={},a=function(e){const t=s[e]||(0,n.P1)(i.Z,(t=>!!t[e]));return s[e]=t,t}},71741:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(53623);const s=(0,n.P1)(i.Z,(e=>e.friends))},12174:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(53623);const s=(0,n.P1)(i.Z,(e=>e.homeUsers))},71681:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(235);const s=(0,n.P1)(i.Z,(e=>e.savedPivotParams))},54729:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return e.ui.authCodeExchange}},25483:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(77072);const s=(0,n.P1)(i.Z,(e=>e.allFriends))},23681:(e,t,r)=>{"use strict";function n(e){return!!e.user.anonymous}r.d(t,{Z:()=>n})},44346:(e,t,r)=>{"use strict";function n(e){return!e.user.isFullUser}r.d(t,{Z:()=>n})},26759:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(41863),s=r(77072),a=r(23954);const o=(0,n.P1)(s.Z,(0,i.Z)("features"),(0,i.Z)("services"),(function({anonymous:e,isFullUser:t},r=[],n=[]){return{anonymous:e,isFullUser:t,features:(0,a.Z)(r,(e=>e.uuid),(()=>!0)),services:(0,a.Z)(n,(e=>e.id),(e=>e))}}))},77072:(e,t,r)=>{"use strict";function n(e){return e.user}r.d(t,{Z:()=>n})},235:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(77072);const s=(0,n.P1)(i.Z,(e=>e.experienceSettings))},13076:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(41856),s=r(41863);const a=(0,n.P1)((0,s.Z)("features"),(e=>(0,i.Z)(e||[])))},76613:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(77072);const s=(0,n.P1)(i.Z,(e=>e.desktop))},21366:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(235);const s=(0,n.P1)(i.Z,(({language:e})=>e))},95240:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(235);const s=(0,n.P1)(i.Z,(e=>e.sidebarSettings)),a=(0,n.P1)(s,(e=>e.pinnedSources))},72735:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(53623);const s=(0,n.P1)(i.Z,(e=>e.watchTogetherRooms||{}))},94818:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(13469),i=r.n(n);function s(){i().isFunction(this.initialize)&&this.initialize.apply(this,arguments)}s.extend=function(e,t){const r=this;let n;n=e&&i().has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)||null},i().extend(n,r,t);const s=function(){this.constructor=n};if(s.prototype=r.prototype,n.prototype=new s,e&&e.hasOwnProperty("mixins")){let t=e.mixins;delete e.mixins,Array.isArray(t)||(t=[t]),i().each(t,(function(e){i().extend(n.prototype,e)}))}return e&&i().extend(n.prototype,e),n.__super__=r.prototype,n};const a=s},23954:(e,t,r)=>{"use strict";function n(e,t,r){return e.reduce(((n,i,s)=>(n[t(i,s,e)]=r(i,s,e),n)),{})}r.d(t,{Z:()=>n})},37198:(e,t,r)=>{"use strict";function n(e,t,r){let n=e.slice(0);if(r<0||r>n.length)return n;const i=n[t];return n=function(e,t){const r=e.slice(0);return t<0||t>=r.length||r.splice(t,1),r}(n,t),n.splice(r,0,i),n}r.d(t,{Z:()=>n})},93301:(e,t,r)=>{"use strict";function n(e,t,r){const n=e.indexOf(t);if(n<0)return e;const i=e.slice(0);return i[n]=r,i}r.d(t,{Z:()=>n})},64665:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(13469),i=r.n(n),s=r(94818),a=r(8523),o=r(86832),l=r(55438);const c=s.Z.extend({mixins:l.Z,maxCycles:3,maxSize:50,isListening:!1,initialize:function(){this._cache={},this.size=0,this.cycles=[],this.cycle()},startListening:function(){this.isListening||(this.isListening=!0,this.listenTo(a.Z,{"cycle:cache":this.cycle,"clearWhere:cache":this.clearWhere,"clearAll:cache":this.clearAll,"clearCycles:cache":this.clearCycles}))},get:function(e){const t=this._cache[e];return t&&t._cacheCycle&&this.setItemCycle(t,e,i().first(this.cycles)),t},store:function(e,t){t||(t=this.getItemCacheKey(e)),this.remove(e),t&&(this.startListening(),e._cacheKey=t,this._cache[t]=e,this.size++,e.persistInCache||this.setItemCycle(e,t,i().first(this.cycles)))},getItemCacheKey:function(e){return i().result(e,"cacheKey")},setItemCycle:function(e,t,r){const n=e._cacheCycle;n&&n.hasOwnProperty(t)&&delete n[t],e._cacheCycle=r,r[t]=e},cycle:function(){this.size>this.maxSize&&(o.Z.warn("Cache overflow, size: "+this.size),i().each(this.cycles.slice(1),this.removeCycle,this)),this.cycles.unshift({}),this.cycles.length>Math.max(this.maxCycles,1)&&this.removeCycle(i().last(this.cycles))},remove:function(e){if(!e||!e._cacheKey)return;const t=e._cacheKey;this._cache.hasOwnProperty(t)&&(delete this._cache[t],this.size--),e._cacheCycle&&(e._cacheCycle.hasOwnProperty(t)&&delete e._cacheCycle[t],delete e._cacheCycle),delete e._cacheKey},removeCycle:function(e){i().each(i().values(e),this.remove,this);const t=i().indexOf(this.cycles,e);this.cycles.splice(t,1)},clearWhere:function(e){const t=i().where(i().values(this._cache),e);i().each(t,this.remove,this)},clearAll:function(){i().each(i().values(this._cache),this.remove,this),this.cycles.length=0,this.cycle(),this.stopListening(),this.isListening=!1},clearCycles:function(){const e=this.cycles;for(;e.length;)this.removeCycle(e[e.length-1]);this.cycle()}})},98065:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(13469),i=r.n(n),s=r(64665);const a=s.Z.extend({maxCycles:3,maxSize:20,get:function(e){const t=s.Z.prototype.get.apply(this,arguments);return t&&t.every((function(e){return!(!e.cache||!e.cache.isListening||(e.cache.store(e),0))})),t},getItemCacheKey:function(e){let t=i().result(e,"url");return e.server&&(t=e.server.getScopedKey(t)),e.provider&&(t=e.provider.getScopedKey(t)),t}})},17680:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(13469),i=r.n(n),s=r(20573),a=r(64665);const o=a.Z.extend({maxCycles:3,maxSize:50,imageParamsRegex:/&?(size|scale|width|height)=([^&]+)/g,initialize:function(){a.Z.prototype.initialize.apply(this,arguments),this._infoMemo={}},store:function(e,t){if(t||(t=this.getItemCacheKey(e)),!t)return;const r=e.url,n=this.getImageInfo(r),s={url:r,blobUrl:e.blobUrl,size:n.size};let a=this.get(t);if(a){if(!a.images.hasOwnProperty(r)){const e=a.sizes;a.images[r]=s;const t=i().sortedIndex(e,s,"size");e.splice(t,0,s)}}else a={images:{},sizes:[s]},a.images[r]=s,this.startListening(),a._cacheKey=t,this._cache[t]=a,this.size++,e.persistInCache||this.setItemCycle(a,t,i().first(this.cycles))},getItemCacheKey:function(e){return this.getImageInfo(e.url).key},getImageInfo:function(e){if(this._infoMemo.hasOwnProperty(e))return this._infoMemo[e];const t={width:"0",scale:"1"},r=e.replace(this.imageParamsRegex,(function(e,r,n){return t[r]=n,""})),n=t.size&&t.size.split("-"),i={key:r,size:(n&&2===n.length?n[1]:parseInt(t.width,10))*parseInt(t.scale,10)};return this._infoMemo[e]=i,i},removeImageInfo:function(e){this._infoMemo.hasOwnProperty(e)&&delete this._infoMemo[e]},getBlobUrl:function(e){const t=this.getImageInfo(e),r=this.get(t.key);if(r){const t=r.images[e];if(t)return t.blobUrl}},getPlaceholder:function(e){const t=this.getImageInfo(e),r=this.get(t.key);if(r){if(r.images[e])return;return i().last(r.sizes).blobUrl}},remove:function(e,t){a.Z.prototype.remove.apply(this,arguments),i().each(e.sizes,(function(e){this.removeImageInfo(e.url),s.Z.hasObjectUrl&&window.URL.revokeObjectURL(e.blobUrl)}),this)}})},33184:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(13469),i=r.n(n);const s=r(64665).Z.extend({maxCycles:5,maxSize:100,getItemCacheKey:function(e,t){if(i().isFunction(e.cacheKey))return t||(t=e.toJSON()),e.cacheKey(t)}})},79167:(e,t,r)=>{"use strict";r.d(t,{HN:()=>n,E4:()=>i,$Z:()=>s,Hn:()=>a,zR:()=>o,Ut:()=>l,WX:()=>c,iW:()=>d,Zb:()=>u,A2:()=>p,NV:()=>m});const n="com.plexapp.agents.imdb",i="com.plexapp.agents.lastfm",s="com.plexapp.agents.lyricfind",a="com.plexapp.agents.none",o="com.plexapp.agents.plexmusic",l="tv.plex.agents.music",c="tv.plex.agents.movie",d="tv.plex.agents.none",u="tv.plex.agents.series",p="com.plexapp.agents.themoviedb",m="com.plexapp.agents.thetvdb"},44301:(e,t,r)=>{"use strict";r.d(t,{p:()=>n,M:()=>i});const n="error",i="success"},97599:(e,t,r)=>{"use strict";r.d(t,{sQ:()=>n,Bs:()=>i});const n="com.tidal",i="com.watchtogether"},36009:(e,t,r)=>{"use strict";r.d(t,{Yq:()=>n,KH:()=>i,o5:()=>s});const n=100,i=100,s=700},28531:(e,t,r)=>{"use strict";r.d(t,{mV:()=>n,bB:()=>i,_N:()=>s,jv:()=>a,S7:()=>o,YC:()=>l,av:()=>d,cW:()=>u,hJ:()=>p,pQ:()=>m,yl:()=>h,uY:()=>g,T4:()=>y,nJ:()=>v,Zs:()=>f});const n="https://app.plex.tv",i="https://forums.plex.tv",s="https://www.plex.tv/media-server-downloads",a=`${s}/#plex-app`,o="https://status.plex.tv",l="https://www.plex.tv/tidal",c="?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps",d="https://support.plex.tv"+c,u="https://support.plex.tv/articles/225877427-supported-dvr-tuners-and-antennas/"+c,p="https://support.plex.tv/articles/community-supported-tuners/"+c,m="https://support.plex.tv/articles/206225077-how-to-use-secure-server-connections/"+c,h="https://support.plex.tv/articles/204985278-account-audio-subtitle-language-settings/"+c,g="https://support.plex.tv/hc/en-us/articles/115002267687-Webhooks/"+c,y="https://support.plex.tv/articles/204232573-restricting-the-shares/",v="https://support.plex.tv/articles/200241558-agents/",f="/users/other-services"},15865:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n={NONE:0,VAST:1};n.settings=[{value:n.NONE,title:"None"},{value:n.VAST,title:"Add ?debug=1 to ad requests"}];const i=n},59081:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n={DISABLED:0,ENABLED:1,VERBOSE:2};n.settings=[{value:n.DISABLED,title:"Disabled"},{value:n.ENABLED,title:"Enabled"},{value:n.VERBOSE,title:"Verbose"}];const i=n},50668:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5583),i=r(46101);const s={[n.FAIRPLAY]:i.FAIRPLAY,[n.FAIRPLAY_AUDIO]:i.FAIRPLAY,[n.FAIRPLAY_VIDEO]:i.FAIRPLAY,[n.PLAYREADY]:i.PLAYREADY,[n.PLAYREADY_AUDIO]:i.PLAYREADY,[n.PLAYREADY_VIDEO]:i.PLAYREADY,[n.WIDEVINE]:i.WIDEVINE,[n.WIDEVINE_AUDIO]:i.WIDEVINE,[n.WIDEVINE_VIDEO]:i.WIDEVINE}},5583:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FAIRPLAY:()=>s,FAIRPLAY_AUDIO:()=>a,FAIRPLAY_VIDEO:()=>o,PLAYREADY:()=>l,PLAYREADY_AUDIO:()=>c,PLAYREADY_VIDEO:()=>d,WIDEVINE:()=>u,WIDEVINE_AUDIO:()=>p,WIDEVINE_VIDEO:()=>m,NONE:()=>h});var n=r(62018),i=r(54834);const s=(0,n.Z)("fairplay"),a=(0,n.Z)("fairplay",i.j0),o=(0,n.Z)("fairplay",i.pX),l=(0,n.Z)("playready"),c=(0,n.Z)("playready",i.j0),d=(0,n.Z)("playready",i.pX),u=(0,n.Z)("widevine"),p=(0,n.Z)("widevine",i.j0),m=(0,n.Z)("widevine",i.pX),h=(0,n.Z)("none")},46101:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FAIRPLAY:()=>n,PLAYREADY:()=>i,WIDEVINE:()=>s});const n="com.apple.fps.1_0",i="com.microsoft.playready",s="com.widevine.alpha"},81042:(e,t,r)=>{"use strict";r.d(t,{ZO:()=>n,Jm:()=>i,GP:()=>s,Bi:()=>a});const n="contentRating",i="contentRating!",s="label",a="label!"},9711:(e,t,r)=>{"use strict";function n(){return window.viewport&&window.viewport.pixelRatio||window.devicePixelRatio||1}r.d(t,{Z:()=>n})},69284:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n={NEVER:"never",SAME_NETWORK:"samenetwork",ALWAYS:"always"};n.settings=[{value:n.NEVER,title:"Never"},{value:n.SAME_NETWORK,title:"On same network as server"},{value:n.ALWAYS,title:"Always"}];const i=n},14269:(e,t,r)=>{"use strict";r.d(t,{EU:()=>n,yy:()=>i,it:()=>s,bS:()=>a,Rr:()=>o,Ko:()=>l,ES:()=>c,oP:()=>d});const n="small-60",i="small-120",s="medium-240",a="medium-360",o="large-480",l="large-720",c="large-1280",d="large-1920"},45062:(e,t,r)=>{"use strict";r.d(t,{ZH:()=>n,Mf:()=>i,K5:()=>s,JU:()=>a,jx:()=>o,hY:()=>l,LH:()=>c,JH:()=>d,Ge:()=>u,nO:()=>p,u5:()=>m});const n=8,i=9,s=13,a=16,o=17,l=27,c=38,d=40,u=91,p=93,m=224},26180:(e,t,r)=>{"use strict";r.d(t,{ly:()=>n,pn:()=>i,jN:()=>s});const n="complete",i="error",s="postprocessing"},57307:(e,t,r)=>{"use strict";r.d(t,{nA:()=>n,Hc:()=>i,SU:()=>s,Bs:()=>a});const n="playlist://image.favorite",i="playlist://image.radio",s="folder",a="watchtogether"},35664:(e,t,r)=>{"use strict";r.d(t,{em:()=>n,gO:()=>i,a7:()=>s,br:()=>a});const n="queued",i="matching",s="processing",a="loading"},75404:(e,t,r)=>{"use strict";r.d(t,{ql:()=>n,GP:()=>i,AM:()=>s,ae:()=>a,XD:()=>o,n1:()=>l,yq:()=>c,ly:()=>d,NH:()=>u,cO:()=>p,Rn:()=>m,DV:()=>h,$W:()=>g,b8:()=>y,Fx:()=>v,AV:()=>f,pe:()=>b,PR:()=>Z,uf:()=>S,DK:()=>P,Bn:()=>I,cp:()=>E,dm:()=>w,xc:()=>C,qe:()=>M,h3:()=>D,RG:()=>O,_R:()=>T,P9:()=>x,Zy:()=>A,t7:()=>k,RF:()=>N,FH:()=>R,a2:()=>L,Dp:()=>j,yY:()=>V,$M:()=>U,zw:()=>F,xs:()=>B,Ao:()=>_,$J:()=>z,Go:()=>H,JL:()=>W,hi:()=>G,UP:()=>Q,nJ:()=>$,zL:()=>K,yZ:()=>q,FR:()=>Y,wl:()=>X,i0:()=>J,fV:()=>ee,uz:()=>te,Yf:()=>re,JM:()=>ne,b1:()=>ie,T5:()=>se,t6:()=>ae,wC:()=>oe,wP:()=>le,oG:()=>ce,mX:()=>de,pg:()=>ue,ic:()=>pe,kD:()=>me,J9:()=>he,Tr:()=>ge,VL:()=>ye,lJ:()=>ve,cG:()=>fe,OY:()=>be,rm:()=>Ze,DZ:()=>Se,gr:()=>Pe,eJ:()=>Ie,Nu:()=>Ee,gP:()=>we,h_:()=>Ce});const n="claim",i="dismiss",s="skip",a="confirm",o="select",l="cancel",c="learn",d="complete",u="play",p="shuffle",m="playAll",h="playVersion",g="playPrimaryExtra",y="playRelatedMix",v="playArtistTV",f="queueRelatedMix",b="playNext",Z="addToQueue",S="addToPlaylist",P="addToCollection",I="removeFromPlaylist",E="removeFromCollection",w="edit",C="editFilters",M="markAsWatched",D="markAsUnwatched",O="refresh",T="analyze",x="fixMatch",A="unmatch",k="merge",N="splitApart",R="optimize",L="downloadFile",j="share",V="delete",U="getInfo",F="rate",B="selectStream",_="addToLibrary",z="addToSaved",H="removeFromSaved",W="addToWatchlist",G="removeFromWatchlist",Q="removeFromContinueWatching",$="optimizeDatabase",K="cleanBundles",q="emptyTrash",Y="deleteServer",X="addLibrary",J="updateLibrary",ee="cancelLibraryUpdate",te="forceRefreshLibrary",re="editLibrary",ne="analyzeLibrary",ie="deleteLibrary",se="pinToNav",ae="unpinFromNav",oe="reorderNav",le="selectSource",ce="selectTab",de="optOutMetrics",ue="remoteAccess",pe="selectPreferredServer",me="subscribe",he="upsellTidal",ge="upsellStreamingServices",ye="agree",ve="disagree",fe="switchUser",be="username",Ze="username",Se="setAvatar",Pe="addFriend",Ie="accepted",Ee="declined",we="learnMore",Ce="setViewStateSyncOptIn"},87999:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PICKER:()=>n,FALLBACK:()=>i,STARTUP:()=>s,SERVER:()=>a,LIBRARY:()=>o,LIST:()=>l,SELECTION:()=>c,SETTINGS:()=>d,SETUP_WIZARD:()=>u,SERVER_DOWNLOAD:()=>p,AGENDA:()=>m,CALENDAR:()=>h,NAV_BAR:()=>g,COMPANION:()=>y,DVR_SETUP:()=>v,USERS_AND_SHARING:()=>f,DISCOVER_PIVOT:()=>b,LIBRARY_PIVOT:()=>Z,PLAYLISTS_PIVOT:()=>S,COLLECTIONS_PIVOT:()=>P,TIMELINE_PIVOT:()=>I,DVR_DISCOVER_PIVOT:()=>E,DVR_GUIDE_PIVOT:()=>w,DVR_SCHEDULE_PIVOT:()=>C,WATCHLIST:()=>M,HDR_CONVERSION:()=>D,SELF:()=>O,FRIEND:()=>T});const n="picker",i="fallback",s="startup",a="server",o="library",l="list",c="selection",d="settings",u="setupWizard",p="serverDownload",m="agenda",h="calendar",g="navBar",y="companion",v="dvrSetup",f="usersAndSharing",b="content.discover",Z="content.library",S="content.playlists",P="content.collections",I="content.timeline",E="content.dvr.discover",w="content.dvr.guide",C="content.dvr.schedule",M="content.watchlist",D="hdr-conversion",O="self",T="friend"},17197:(e,t,r)=>{"use strict";r.d(t,{Yg:()=>n,Jk:()=>i,Ip:()=>s,lZ:()=>a,dV:()=>o,EE:()=>l,Tk:()=>c,zP:()=>d,$R:()=>u,CM:()=>p,o$:()=>m,PS:()=>h,fB:()=>g,Jw:()=>y,NY:()=>v,C7:()=>f,gS:()=>b,cn:()=>Z,hx:()=>S,Iw:()=>P,l8:()=>I});const n="client:claimServer",i="client:claimServerFailure",s="client:click",a="client:deeplink",o="client:mmp:start",l="client:relayTested",c="client:search",d="client:searchResultSelect",u="client:shutdown",p="client:signout",m="client:start",h="client:switchuser",g="client:view",y="client:upsell",v="playback:failure",f="playback:itemend",b="playback:itemrestart",Z="playback:itemstart",S="playback:sessionend",P="watchtogether:created",I="watchtogether:joined"},24348:(e,t,r)=>{"use strict";r.d(t,{zQ:()=>n,J3:()=>i,tr:()=>s,L6:()=>a,ih:()=>o});const n="tabChange",i="sync",s="moreSidebar",a="settings",o="userProfile"},62291:(e,t,r)=>{"use strict";r.d(t,{Sd:()=>n,Hx:()=>i,Y3:()=>s,sD:()=>a,ls:()=>o,fP:()=>l,$4:()=>c,r$:()=>d,yV:()=>u,G5:()=>p,H4:()=>m,dp:()=>h,YB:()=>g,yl:()=>y,w6:()=>v,Q_:()=>f,Ak:()=>b,Wv:()=>Z,m9:()=>S,Vr:()=>P,YX:()=>I,mw:()=>E,jy:()=>w,jx:()=>C,Bc:()=>M,WJ:()=>D,lz:()=>O,uf:()=>T,Vg:()=>x,Gc:()=>A,ih:()=>k,tj:()=>N,eH:()=>R,gr:()=>L,I7:()=>j,pU:()=>V,de:()=>U,Dp:()=>F,L6:()=>B,Eu:()=>_,Rs:()=>z,mU:()=>H,VP:()=>W,TD:()=>G,od:()=>Q,_e:()=>$,WT:()=>K,X$:()=>q,qT:()=>Y,go:()=>X,B8:()=>J,lP:()=>ee,Md:()=>te,$e:()=>re,tl:()=>ne,jB:()=>ie,cZ:()=>se,RN:()=>ae,xC:()=>oe,cJ:()=>le,yW:()=>ce,Y0:()=>de,iw:()=>ue,yF:()=>pe,_g:()=>me,O6:()=>he,s0:()=>ge,Yp:()=>ye,Pi:()=>ve,Ke:()=>fe,Bx:()=>be,LT:()=>Ze,ce:()=>Se,ZZ:()=>Pe,o_:()=>Ie,cU:()=>Ee,LO:()=>we,DV:()=>Ce,Vk:()=>Me,hw:()=>De,Rh:()=>Oe,zj:()=>Te,BE:()=>xe,c9:()=>Ae,PX:()=>ke,jm:()=>Ne});const n="home",i="source",s="library",a="preplay",o="playlists",l="searchResults",c="metadataList",d="player",u="account",p="plexpass",m="signIn",h="signOut",g="setupWizard",y="unclaimedServer",v="metadataSettings",f="status",b="devices",Z="subtitles",S="subtitlesUpload",P="stopServerSession",I="stopServerSessionError",E="playHistory",w="sidebar",C="whatsNew",M="releaseNotes",D="photoTimeline",O="unknown",T="addToPlaylist",x="watchTogetherInvite",A="watchTogetherItemError",k="userProfile",N="editProfile",R="friends",L="addFriend",j="usersSharing",V="homeUsers",U="shareUsers",F="share",B="settings",_="sharing",z="settingsSidebar",H="preferredServer",W="preferredSources",G="dvrSettings",Q="dvrSetup",$="dvrGuide",K="dvrSchedule",q="dvrPriority",Y="dvrDeviceSettings",X="dvrAiringDetails",J="manageSubscription",ee="confirmMarkAsWatched",te="confirmMarkAsUnwatched",re="confirmDelete",ne="confirmOptimizeDatabase",ie="confirmCleanBundles",se="confirmEmptyTrash",ae="confirmDeleteServer",oe="confirmUpgradeLibrary",le="confirmAnalyzeLibrary",ce="confirmForceRefreshLibrary",de="confirmEmptyTrashLibrary",ue="confirmDeleteLibrary",pe="confirmRemoveWebhook",me="confirmUnlinkOauthProvider",he="confirmRemoveDVR",ge="confirmClosePlayer",ye="confirmDeleteSubtitleStream",ve="confirmCancelDownload",fe="confirmRemoveDownload",be="confirmAddToHome",Ze="adConsent",Se="confirmUpsell",Pe="confirmUpdateApp",Ie="confirmPlayback",Ee="confirmRemoteToLocalPlayback",we="confirmLocalToRemotePlayback",Ce="playVersion",Me="resumePlayback",De="playerError",Oe="liveTVPlayerConflict",Te="liveTVJoinSession",xe="castApiMissing",Ae="adConsent",ke="settings",Ne="viewStateSyncPrompt"},70919:(e,t,r)=>{"use strict";r.d(t,{k9:()=>n,QN:()=>i});const n="html",i=[n,"mpv","samsung_avplay","webmaf_video_player"]},8483:(e,t,r)=>{"use strict";r.d(t,{Y:()=>n});const n="autoplay"},40127:(e,t,r)=>{"use strict";r.r(t),r.d(t,{INCLUDE_DISCOVER_SOURCE:()=>n,INCLUDE_METADATA_IN_SEARCH:()=>i,INCLUDE_AVAILABILITIES:()=>s,INCLUDE_SOCIAL_PROOF:()=>a});const n="includeDiscoverSource",i="includeMetadataInSearch",s="includeAvailabilities",a="includeSocialProof"},69022:(e,t,r)=>{"use strict";r.d(t,{kW:()=>n,Ig:()=>i,xW:()=>s,M1:()=>a,$c:()=>o,I9:()=>l,s4:()=>c});const n="shared.items",i="vod.channels",s="vod.watchlist",a="home.recommended",o="home.watchlist",l="discover.activity",c="discover.recommended"},35758:(e,t,r)=>{"use strict";r.d(t,{km:()=>n,IY:()=>i,t3:()=>s});const n="hub",i="list",s="view"},21971:(e,t,r)=>{"use strict";r.d(t,{lz:()=>a,Rl:()=>o,Ke:()=>l,VW:()=>c,QV:()=>u});var n=r(45697),i=r.n(n),s=r(18655);const a=1,o=2,l=3,c=4,d=[a,o,l,c],u=(i().oneOf(d),s.Z.oneOf(...d))},60276:(e,t,r)=>{"use strict";r.d(t,{NH:()=>n,E7:()=>i,tG:()=>s,N7:()=>a,Fz:()=>o,zb:()=>l,cb:()=>c,HE:()=>d,bp:()=>u,fK:()=>p,zG:()=>m,f4:()=>h,EJ:()=>g,om:()=>y,WP:()=>v,I2:()=>f,rx:()=>b,hl:()=>Z});const n="PLAY",i="PAUSE",s="SEEK",a="STOP",o="PREVIOUS",l="NEXT",c="SKIPTO",d="SHOWDETAILS",u="REFRESHPLAYQUEUE",p="REFRESHSTREAMS",m="SETREPEAT",h="SETSTREAM",g="SETQUALITY",y="SETSUBTITLECOLOR",v="SETSUBTITLEPOSITION",f="SETSUBTITLESIZE",b="SETSUBTITLEOFFSET",Z="SETAUTOPLAY"},55810:(e,t,r)=>{"use strict";r.d(t,{PT:()=>n,th:()=>i,Ey:()=>s,uf:()=>a});const n="linked",i="able",s="unable",a="untested"},80278:(e,t,r)=>{"use strict";r.d(t,{ED:()=>s,d2:()=>a});var n=r(52501);const i={[n.pX]:"video",[n.j0]:"music",[n.pV]:"photo"};function s(e){return i[e]}function a(e){for(const t in i)if(e===i[t])return t}},29150:(e,t,r)=>{"use strict";r.d(t,{l:()=>n,D:()=>i});const n="cast",i="plex"},68702:(e,t,r)=>{"use strict";r.d(t,{Hn:()=>i,ry:()=>s,QN:()=>a});var n=r(45697);const i=0,s=1,a=2;r.n(n)().oneOf([i,s,a])},64336:(e,t,r)=>{"use strict";r.d(t,{m$:()=>n,o1:()=>i,YN:()=>s});const n=1,i=2,s=3},60354:(e,t,r)=>{"use strict";r.d(t,{aV:()=>i,IM:()=>s,Hn:()=>a});var n=r(45697);const i="bottom-left",s="top-left",a="none";r.n(n)().oneOf([i,s,a])},52501:(e,t,r)=>{"use strict";r.d(t,{j0:()=>n,pX:()=>i,pV:()=>s});const n="audio",i="video",s="photo"},42375:(e,t,r)=>{"use strict";r.d(t,{Nf:()=>n,jV:()=>i,Jj:()=>s,uS:()=>a,qB:()=>o,_V:()=>l});const n=5,i=10,s=30,a=5,o=600,l=600},11574:(e,t,r)=>{"use strict";r.d(t,{K:()=>n,y:()=>i});const n="full",i="mini"},36505:(e,t,r)=>{"use strict";r.d(t,{Se:()=>i,pV:()=>s,f_:()=>o});var n=r(52501);const i="audioVideo",s="photo",a={[n.j0]:i,[n.pX]:i,[n.pV]:s};function o(e){return a[e]}},64155:(e,t,r)=>{"use strict";r.d(t,{H:()=>n});const n="0"},19274:(e,t,r)=>{"use strict";r.d(t,{il:()=>n,Z$:()=>i,rf:()=>s,l9:()=>a,pn:()=>o});const n="stopped",i="playing",s="paused",a="buffering",o="error"},39169:(e,t,r)=>{"use strict";r.d(t,{lq:()=>n,LE:()=>i,JL:()=>s,zw:()=>a});const n="scrobble",i="save",s="addToWatchlist",a="rate"},5318:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});const n="home"},86418:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=(e=>(e.ACTION="action",e.ACTIONS="actions",e.CONTENT="content",e.CONTINUE_WATCHING="continuewatching",e.GRID="grid",e.IMAGE_TRANSCODER="imagetranscoder",e.INTEGRATIONS="integrations",e.LINEUPS="lineups",e.LOCATION="location",e.MANAGE="manage",e.MATCH="match",e.METADATA="metadata",e.PLAY_QUEUE="playqueue",e.PLAYLIST="playlist",e.PROMOTED="promoted",e.RATE="rate",e.SEARCH="search",e.SETTINGS="settings",e.SUBSCRIBE="subscribe",e.TIMELINE="timeline",e.UNIVERSAL="universal",e))(n||{});const i=n},89083:(e,t,r)=>{"use strict";r.d(t,{HN:()=>n,_N:()=>i,D7:()=>s});const n="download",i="record",s="universal"},74226:(e,t,r)=>{"use strict";r.d(t,{vP:()=>n,Ll:()=>i,zY:()=>s,Y3:()=>a,IS:()=>o,xF:()=>l,uk:()=>c,Xp:()=>d,_:()=>u,QN:()=>p,wB:()=>m,yv:()=>h});const n="tv.plex.provider.epg",i="tv.plex.providers.epg",s="tv.plex.providers.epg.xmltv",a="com.plexapp.plugins.library",o="tv.plex.provider.metadata",l="tv.plex.provider.music",c="tv.plex.provider.vod",d="tv.plex.provider.discover",u="synthetic.provider.home",p=[n,i,s,a,"com.plexapp.plugins.library.sync",o,l,c,d,u];function m(e,t){return!!e&&(Array.isArray(t)||(t=[t]),t.some((t=>-1!==e.indexOf(t))))}function h(e){return!e.endsWith("dev")&&!e.endsWith("staging")}},93927:(e,t,r)=>{"use strict";r.d(t,{K:()=>n});const n="livetv"},70308:(e,t,r)=>{"use strict";r.d(t,{Jz:()=>n,Pt:()=>i,x8:()=>s,xy:()=>a});const n="playbackSpeed",i="lineup",s="recentChannelsInGrid",a="numRecentChannelsInGrid"},99415:(e,t,r)=>{"use strict";r.d(t,{Vi:()=>n,tf:()=>i,oG:()=>s,bB:()=>a,Pt:()=>o,Ct:()=>l,XD:()=>c});const n="bool",i="double",s="group",a="int",o="lineup",l="location",c="select"},58090:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={NORMAL:0,LOCAL:42,CLOUD:43}},15851:(e,t,r)=>{"use strict";r.d(t,{Cc:()=>s,Pq:()=>a,oL:()=>l,ZH:()=>c});var n=r(73788),i=r(84140);const s="little_kid",a="unrestricted",o=(0,i.Z)(["identifier"],[{identifier:s,title:()=>(0,n.Z)("Younger Kid"),defaultUsername:()=>(0,n.Z)("Kids")},{identifier:"older_kid",title:()=>(0,n.Z)("Older Kid"),defaultUsername:()=>(0,n.Z)("Kids")},{identifier:"teen",title:()=>(0,n.Z)("Teen"),defaultUsername:()=>(0,n.Z)("Kids")},{identifier:a,title:()=>(0,n.Z)("None"),defaultUsername:()=>""}]),l=o.get,c=o.getAll},58809:(e,t,r)=>{"use strict";r.d(t,{uN:()=>n,wz:()=>i,c3:()=>s,Lx:()=>a,QQ:()=>o,OQ:()=>l,RZ:()=>c,N6:()=>d,VA:()=>u,S5:()=>p});const n="Plex Audiobook",i="Plex Movie Scanner",s="Plex Music",a="Plex Movie",o="Plex TV Series",l="Plex Music Scanner",c="Plex Photo Scanner",d="Plex Premium Music Scanner",u="Plex Series Scanner",p="Plex Video Files Scanner"},72147:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,O:()=>i});const n="/hubs",i="/hubs?identifier=home.continue,home.ondeck"},32779:(e,t,r)=>{"use strict";r.d(t,{uf:()=>n,hA:()=>i,nm:()=>s,WY:()=>a,nZ:()=>o,c9:()=>l});const n="untested",i="pending",s="connected",a="unauthorized",o="unavailable",l="aborted"},47276:(e,t,r)=>{"use strict";r.d(t,{X:()=>n});const n="myPlex"},92527:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AVAILABLE:()=>n,DONE:()=>i,DOWNLOADED:()=>s,DOWNLOADING:()=>a,ERROR:()=>o,INSTALLING:()=>l,NONE:()=>c,NOTIFY:()=>d});const n="available",i="done",s="downloaded",a="downloading",o="error",l="installing",c="none",d="notify"},82057:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n={WHITE:"#ffffff",YELLOW:"#ffee00",BLACK:"#000000",CYAN:"#00ffff",BLUE:"#0000ff",GREEN:"#00ff00",MAGENTA:"#ee00ee",RED:"#ff0000",GREY:"#808080"};n.settings=[{value:n.WHITE,title:"White"},{value:n.YELLOW,title:"Yellow"},{value:n.BLACK,title:"Black"},{value:n.CYAN,title:"Cyan"},{value:n.BLUE,title:"Blue"},{value:n.GREEN,title:"Green"},{value:n.MAGENTA,title:"Magenta"},{value:n.RED,title:"Red"},{value:n.GREY,title:"Grey"}],n.ALL=[n.WHITE,n.YELLOW,n.BLACK,n.CYAN,n.BLUE,n.GREEN,n.MAGENTA,n.RED,n.GREY];const i=n},36870:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"};n.settings=[{value:n.TOP,title:"Top"},{value:n.MIDDLE,title:"Middle"},{value:n.BOTTOM,title:"Bottom"}],n.ALL=[n.TOP,n.MIDDLE,n.BOTTOM];const i=n},27768:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n={TINY:50,SMALL:75,NORMAL:100,LARGE:125,HUGE:200};n.settings=[{value:n.TINY,title:"Tiny"},{value:n.SMALL,title:"Small"},{value:n.NORMAL,title:"Normal"},{value:n.LARGE,title:"Large"},{value:n.HUGE,title:"Huge"}],n.ALL=[n.TINY,n.SMALL,n.NORMAL,n.LARGE,n.HUGE];const i=n},32511:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n={AUTO:"auto",AVOID:"avoid",ALWAYS:"always",NEVER:"never"};n.settings=[{value:n.AUTO,title:"Automatic"},{value:n.AVOID,title:"Only image formats"},{value:n.ALWAYS,title:"Always"}];const i=n},12153:(e,t,r)=>{"use strict";r.d(t,{OR:()=>n,In:()=>i,E7:()=>s,gk:()=>a,tG:()=>o});const n="join",i="leave",s="pause",a="resume",o="seek"},74174:(e,t,r)=>{"use strict";r.d(t,{k9:()=>n,rS:()=>i});const n="html",i="plain"},35199:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=(e=>(e.Relay="relay",e.Upsell="upsell",e.LibraryUpgrade="libraryUpgrade",e))(n||{});const i=n},16921:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(73788);const i={NONE:0,TV_ONLY:1,TV_AND_DVR:2};i.options={[i.NONE]:()=>(0,n.Z)("No Live TV and DVR access"),[i.TV_ONLY]:()=>(0,n.Z)("Allow Live TV only"),[i.TV_AND_DVR]:()=>(0,n.Z)("Allow Live TV and DVR access")},i.values=Object.keys(i.options).map((e=>({[e]:i.options[e]})));const s=i},70777:(e,t,r)=>{"use strict";r.d(t,{d6:()=>n,Ks:()=>i,JO:()=>s,XA:()=>a,EM:()=>o,m9:()=>l,km:()=>c,Ah:()=>d,Ao:()=>u,OV:()=>p,wz:()=>m,eT:()=>h,TA:()=>g,Xh:()=>y,ie:()=>v,Vy:()=>f,UX:()=>b,Ed:()=>Z,iU:()=>S,jq:()=>P,LD:()=>I,CG:()=>E,vm:()=>w,Z5:()=>C,_t:()=>M,q1:()=>D,sy:()=>O,Oo:()=>T,Bs:()=>x,cU:()=>A,EZ:()=>k,EQ:()=>N,lY:()=>R,TE:()=>L,KH:()=>j,DI:()=>V,_U:()=>U,Ix:()=>F,_W:()=>B,je:()=>_,vi:()=>z,Ll:()=>H,hq:()=>W,kj:()=>G,jm:()=>Q,BF:()=>$,Qo:()=>K});const n="32cc8bf5-b425-4582-a52d-71b4f1cf436b",i="de789b83-9c5e-4472-bccf-791c69e67500",s="64ed42f8-259d-4957-8530-0fff2d846cd0",a="6f82ca43-6117-4e55-ae0e-5ea3b3e99a96",o="bb50c92f-b412-44fe-8d8a-b1684f212a44",l="b612f571-83c3-431a-88eb-3f05ce08da4a",c="222020fb-1504-492d-af33-a0b80a49558a",d="4bdcac7b-f25b-43b3-93d8-2bbcb9605fd7",u="644c4466-05fa-45e0-a478-c594cf81778f",p="75e95ee5-b482-4b02-aeff-a9faf13ead64",m="f3235e61-c0eb-4718-ac0a-7d6eb3d8ff75",h="4742780c-af9d-4b44-bf5b-7b27e3369aa8",g="cce9af5d-7b44-4119-a6b1-108fd0db725c",y="e4f02866-841f-4ceb-a30c-0a0e68fb874d",v="d9528436-ee7c-42e3-ab7b-814f85ef74b4",f="d715fd2e-b295-492b-bdd7-a048e014608b",b="f0f40559-a43a-4b8f-85ef-bdb1de1a912a",Z="5c1951bf-ccf1-4821-8ee7-e50f51218ae7",S="3bfd3ccf-8c63-4dbb-8f87-9b21b402c82b",P="43725019-9122-4a6d-bc50-bca06a411b7a",I="d8810b38-ec9b-494c-8555-3df6e365dfbd",E="43938a71-1295-46e9-918f-b6c4b0302011",w="65685ff8-4375-4e4c-a806-ec1f0b4a8b7f",C="6ab6677b-ad9b-444f-9ca1-b8027d05b3e1",M="b83c8dc9-5a01-4b7a-a7c9-5870c8a6e21b",D="02da2909-ddfd-46be-9e42-65008a79fc05",O="nonAnonymousAccount",T="6aaaf4fc-c55f-4042-92c8-b35f7886d249",x="65faa2d0-f57e-4c63-a6b6-f1baa48951b1",A="20824f5c-6dd9-4655-9970-e7701a73c02a",k="fd6683b9-1426-4b00-840f-cd5fb0904a6a",N="9a67bff2-cb80-4bf9-81c6-9ad2f4c78afd",R="13056a62-9bd2-47cf-aba9-bab00095fd08",L="3c376154-d47e-4bbf-9428-2ea2592fd20a",j="f3a99481-9671-4274-a0d3-4c06a72ef746",V="ec64b6f6-e804-4ef3-b114-9d5c63e1a941",U="cec2152f-321a-4c24-8c6d-c2b35a624389",F="85410409-ebe4-47f8-9814-034ff05c47d7",B="3ae06d3a-a76b-435e-8cef-2d2008610ba2",_="fc3e8322-5e6e-4f4a-9d71-728c6d5656bd",z="a852775a-2b74-4624-aaa3-3d624471a537",H="90138784-37a0-4a6b-87f6-1146d6c628e6",W="6272ad55-9fc0-43c6-8e1a-3f0df7a3630e",G="a0a78867-6b26-446f-9c3f-df4edf831259",Q="ccef9d3a-537a-43d9-8161-4c7113c6e2bb",$="dbdc0575-9fc7-4706-9e2d-fca98d10ad71",K="5dc82bc9-6038-4c21-b752-bc3454773eda"},19814:(e,t,r)=>{"use strict";r.d(t,{vx:()=>n,Np:()=>i,wN:()=>s});const n="opt_in",i="opt_out",s="opt_out_managed"},851:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});const n="tidal"},106:(e,t,r)=>{"use strict";r.d(t,{iN:()=>n,j5:()=>i,ZP:()=>s});const n="active",i="pending_cancellation",s=[n,"inactive","canceled",i,"lapsed","ended"]},39341:(e,t,r)=>{"use strict";r.d(t,{G5:()=>n,ZP:()=>i});const n="plexpass",i=["arcade",n,"tidal"]},36457:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TONE_MAPPING:()=>n});const n="toneMapping"},97968:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(13469),i=r.n(n),s=r(37474),a=r(64135),o=r(3510),l=r(24765),c=r(21860),d=r(85209),u=r(20683),p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;const g={uri:function(e,t){const r=t&&t.items;if(r&&r.length){if(r.length>1)return this.getBatchLibraryMetadataURI(r,t);e||(e=i().first(r))}if(e instanceof s.ZP.Model){if(e.get("isSection"))return this.getSectionURI(e,t);if(e.get("isMetadataList"))return this.getMetadataListURI(e,t);if(e.get("isPlaylist"))return this.getPlaylistURI(e,t)}return this.getLibraryMetadataURI(e,t)},parseLibraryUri:function(e){const t=u.Z.getLastSegment(e),r=decodeURIComponent(t).match(/(\/library\/sections\/\w+)\/all(?:\?(.*))?/),[,n,i=""]=r,s={};for(const e of i.split("&")){const[t,r]=e.split("=");t.startsWith("include")||(s[t]=r)}const a=s,{type:o,sourceType:l,sort:c,limit:d}=a,g=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(a,["type","sourceType","sort","limit"]);return{sectionKey:n,type:o,sourceType:l,sort:c,limit:d,filterString:Object.entries(g).map((([e,t])=>`${e}=${t}`)).join("&")}},getSectionURI:function(e,t){const r=i().result(e,"url"),n=e.get("currentSubset"),s=e.get("currentFolderKey"),a=e.get("currentType");let o;if("folder"===n.id)o=s||u.Z.join([r,"all"]);else{const t=e.get("items"),i=t.getParams();i.type&&delete i.type,i.timelineState&&delete i.timelineState,i.unwatchedLeaves&&(i[(0,d.getLeafType)(e.get("type")).typeString+".unwatched"]=1,delete i.unwatchedLeaves),a&&(i.sourceType=a.id),o=u.Z.join([r,n.id],i),o=t.replaceSpecialFilterOperators(o)}return this._resolveURI({prefix:"library",parts:[e.get("uuid"),"directory",o]})},getBatchLibraryMetadataURI:function(e,t){const r=this._getSectionInfo(i().first(e)),n="/library/metadata/"+i().map(e,(function(e){return e.get("ratingKey")})).join(",");return this._resolveURI({prefix:"library",parts:[r.sectionUUID,"directory",n]})},getLibraryMetadataURI:function(e,t){t||(t={});const r=this._getSectionInfo(e);let n,s=i().result(e,"url");return t.excludeSeedItem&&(s=u.Z.join(s,{excludeSeedItem:1})),n=e.models||e.collectionName||e instanceof a.Z?"directory":e.get("radio")?"station":"item",this._resolveURI({prefix:"library",parts:[r.sectionUUID,n,s]})},getMetadataListURI:function(e,t){t||(t={});const r=this._getSectionInfo(e);return this._resolveURI({prefix:"library",parts:[r.sectionUUID,"directory",u.Z.join(e.get("containerKey"),{sourceType:t.sourceType})]})},getPlaylistURI:function(e,t){return this._resolveURI({prefix:"playlist",parts:["",e.get("guid")]})},title:function(e,t){const r=t&&t.items;if(r&&r.length){if(r.length>1)return this.getBatchLibraryMetadataTitle(r,t);e=i().first(r)}return e.get("isSection")?this.getSectionTitle(e,t):e.get("isMetadataList")?this.getMetadataListTitle(e,t):this.getLibraryMetadataTitle(e,t)},getSectionTitle:function(e){const t=e.get("title"),r=e.get("currentSubset"),n=e.get("currentFilters");return"all"!==r.id?t+": "+r.get("title"):n.length?t+": "+i().flatten(i().map(n,(function(e){return e.titles}))).join(", "):t},getMetadataListTitle:function(e){return e.get("containerTitle")||e.get("title")},getBatchLibraryMetadataTitle:function(e){const t=i().map(e,(function(e){return e.get("title")}));return(0,c.Z)(t)},getLibraryMetadataTitle:function(e){const t=e.get("grandparentTitle")||e.get("parentTitle");let r=e.get("title");return t&&(r=t+" - "+r),"episode"===e.get("type")&&(r+=" ("+(0,o.Z)({seasonIndex:e.get("parentIndex"),episodeIndex:e.get("index"),date:e.get("originallyAvailableAt"),noLeadingZero:!0,separator:" "})+")"),r},_resolveURI:function(e){const t=e.parts,r=i().map(t,(function(e){return e?encodeURIComponent(e):""}));return e.prefix+"://"+r.join("/")},_getSectionInfo:function(e){let t=e.get("librarySectionUUID"),r=e.get("librarySectionID");if(!t||!r){const n=(0,l.Z)(e);i().isEmpty(n)||(t=n.get("uuid"),r=n.id)}return{sectionUUID:t,sectionID:r}}}},34993:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(77349),i=r(78343),s=r(58545),a=r(91523),o=r(61973),l=r(63500),c=r(21593),d=r(42227),u=r(42902);const p={days:n.Z,hours:i.Z,minutes:s.Z,months:a.Z,seconds:o.Z,weeks:l.Z,years:c.Z};function m(e,t={}){let r=(0,d.Z)(e);for(const e in t)r=p[e](r,t[e]);return(0,u.Z)(r)}},55275:(e,t,r)=>{"use strict";r.d(t,{DF:()=>n,_G:()=>i,ZP:()=>c});const n=30,i=365,s=36e5,a=24*s,o=["years","months","days","hours","minutes","seconds","milliseconds"],l={years:a*i,months:a*n,days:a,hours:s,minutes:6e4,seconds:1e3,milliseconds:1};function c(e){const t=e<0?-1:1,r={};let n=e*t,i=-1;for(;++i<o.length;){const e=o[i],s=l[e],a=Math.floor(n/s);r[e]=a&&a*t,n%=s}return r}},16983:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(42227),i=r(55855),s=r(73788),a=r(9362),o=r(10829),l=r(66565),c=r(71831),d=r(74372),u=r(98804),p=r(4498),m=r(16950);function h(e,t,{timeFormat:r="h:mma"}={}){if(null==e)return"";const h=(0,l.Z)(e,r);let g;return g=(0,m.Z)(e)?(0,s.Z)("Yesterday"):(0,d.Z)(e)?(0,p.Z)(e)?(0,s.Z)("Tonight"):(0,s.Z)("Today"):(0,u.Z)(e)?(0,s.Z)("Tomorrow"):(0,c.Z)(e)?(0,a.Z)(e):(0,s.Z)("{dayOfWeekAbbreviated}, {monthAbbreviated} {dayNumber}",{dayOfWeekAbbreviated:(0,a.Z)(e,{abbreviate:!0}),monthAbbreviated:(0,o.Z)(e,{abbreviate:!0}),dayNumber:(0,i.Z)((0,n.Z)(e))}),t?(0,s.Z)("{1} at {2} on {3}",g,h,t):(0,s.Z)("{1} at {2}",g,h)}},52901:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(42227),i=r(55855),s=r(39159),a=r(73788),o=r(9362),l=r(10829),c=r(66565),d=r(71831),u=r(74372),p=r(98804),m=r(4498),h=r(16950);function g(e,t,{timeFormat:r="h:mma"}={}){if(null==e)return"";const g=(0,n.Z)(e);if((0,h.Z)(e))return(0,a.Z)("Yesterday");0===(0,s.Z)(g)&&(r=r.replace("h:mm","h"));const y=(0,c.Z)(e,r);let v;return v=(0,u.Z)(e)?(0,m.Z)(e)?(0,a.Z)("Tonight"):(0,a.Z)("Today"):(0,p.Z)(e)?(0,a.Z)("Tomorrow"):(0,d.Z)(e)?(0,o.Z)(e):(0,a.Z)("{monthAbbreviated} {dayNumber}",{monthAbbreviated:(0,l.Z)(e,{abbreviate:!0}),dayNumber:(0,i.Z)((0,n.Z)(e))}),t?(0,a.Z)("{1} at {2} on {3}",v,y,t):(0,a.Z)("{1} at {2}",v,y)}},33593:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(64381);const i=function(e,t="MMMM d, yyyy"){return e?(0,n.Z)(e,t):""}},9362:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(42227),i=r(20466),s=(r(32903),r(73788));const a=function(e,{abbreviate:t=!1}={}){if(null==e)return"";const r=(0,i.Z)((0,n.Z)(e));return t?function(e){return[(0,s.Z)("Sun"),(0,s.Z)("Mon"),(0,s.Z)("Tue"),(0,s.Z)("Wed"),(0,s.Z)("Thu"),(0,s.Z)("Fri"),(0,s.Z)("Sat")][e]}(r):function(e){return[(0,s.Z)("Sunday"),(0,s.Z)("Monday"),(0,s.Z)("Tuesday"),(0,s.Z)("Wednesday"),(0,s.Z)("Thursday"),(0,s.Z)("Friday"),(0,s.Z)("Saturday")][e]}(r)}},39041:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(13469),i=r.n(n),s=r(55275),a=r(73788);const o=[[54e5,function(e){if(null==e)return"";const t=(0,s.ZP)(e),r=24*t.days*60,n=60*t.hours,i=t.minutes+n+r,o=t.seconds;return i?(0,a.Z)("{1} min",i):o>0?(0,a.Z)("{1} sec",o):""}],[864e5,r(6890).Z],[6048e5,function(e){if(null==e)return"";const t=(0,s.ZP)(e),r=t.days,n=t.hours,i=1!==r;return r&&n?i?(0,a.Z)("{1} days {2} hr",r,n):(0,a.Z)("{1} day {2} hr",r,n):r?i?(0,a.Z)("{1} days",r):(0,a.Z)("{1} day",r):(0,a.Z)("{1} hr",n)}],[1/0,function(e){if(null==e)return"";const t=(0,s.ZP)(e),r=t.years*s._G+t.months*s.DF+t.days;return 1!==r?(0,a.Z)("{1} days",r):(0,a.Z)("{1} day",r)}]],l=function(e){if(!e)return"";const t=i().find(o,(([t])=>e<=t));return t&&t[1](e)}},57538:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(73788),i=r(39041);const s=function(e){if(null==e)return"";const t=(0,i.Z)(1e3*e);return t?(0,n.Z)("{1} left",t):""}},6890:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(55275),i=r(73788);const s=function(e){if(null==e)return"";const t=(0,n.ZP)(e),r=t.hours+24*t.days,s=t.minutes,a=t.seconds;return r&&s?(0,i.Z)("{1} hr {2} min",r,s):r?(0,i.Z)("{1} hr",r):s?(0,i.Z)("{1} min",s):a>0?(0,i.Z)("{1} sec",a):""}},10829:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(42227),i=r(78966),s=(r(32903),r(73788));const a=function(e,{abbreviate:t=!1}={}){if(!e)return"";const r=(0,i.Z)((0,n.Z)(e));return t?function(e){return[(0,s.Z)("Jan"),(0,s.Z)("Feb"),(0,s.Z)("Mar"),(0,s.Z)("Apr"),(0,s.Z)("May"),(0,s.Z)("Jun"),(0,s.Z)("Jul"),(0,s.Z)("Aug"),(0,s.Z)("Sep"),(0,s.Z)("Oct"),(0,s.Z)("Nov"),(0,s.Z)("Dec")][e]}(r):function(e){return[(0,s.Z)("January"),(0,s.Z)("February"),(0,s.Z)("March"),(0,s.Z)("April"),(0,s.Z)("May"),(0,s.Z)("June"),(0,s.Z)("July"),(0,s.Z)("August"),(0,s.Z)("September"),(0,s.Z)("October"),(0,s.Z)("November"),(0,s.Z)("December")][e]}(r)}},66281:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(13469),i=r.n(n),s=r(55275);const a=function(e){if(e<=0||!i().isNumber(e))return"0:00";const t=(0,s.ZP)(e),r=t.seconds,n=t.minutes,a=t.hours+24*t.days;let o="";return o=r<10?":0"+r:":"+r,o=n<10&&a>0?"0"+n+o:n+o,a>0&&(o=a+":"+o),o}},41319:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(64381);const i=function(e,t="HH:mm:ss"){return e?(0,n.Z)(e,t):""}},35172:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(61973),i=r(42227),s=r(42902),a=r(73788);const o=function(e,t){return function(e,{limit:t}={},r=!1){if(!e)return"";const o=new Date;e=Math.round(e),"past"===t?e=Math.min(e,(0,s.Z)(o)):"future"===t&&(e=Math.max(e,(0,s.Z)((0,n.Z)(o,1))));const l=(0,i.Z)(e).getTime()-o.getTime();let c;return c="future"===t||"past"!==t&&l>0,function({milliseconds:e,isShorthand:t,isFuture:r}){let n=Math.abs(e)/1e3;n&&(n=n<1?1:Math.round(n));const i=Math.round(n/60),s=Math.round(i/60),o=Math.round(s/24),l=Math.round(o/30),c=Math.round(o/365),d={seconds:n,minutes:i,hours:s,days:o,months:l,years:c},u={unitOfTime:n<=44&&(t?(0,a.Z)("{seconds}s",d):(0,a.Z)("a few seconds",d))||n<45&&(t?(0,a.Z)("{seconds}s",d):(0,a.Z)("{seconds} seconds",d))||i<=1&&(t?(0,a.Z)("{minutes}m",d):(0,a.Z)("a minute",d))||i<45&&(t?(0,a.Z)("{minutes}m",d):(0,a.Z)("{minutes} minutes",d))||s<=1&&(t?(0,a.Z)("{hours}h",d):(0,a.Z)("an hour",d))||s<22&&(t?(0,a.Z)("{hours}h",d):(0,a.Z)("{hours} hours",d))||o<=1&&(t?(0,a.Z)("{days}d",d):(0,a.Z)("a day",d))||o<26&&(t?(0,a.Z)("{days}d",d):(0,a.Z)("{days} days",d))||l<=1&&(t?(0,a.Z)("{months}mo",d):(0,a.Z)("a month",d))||l<11&&(t?(0,a.Z)("{months}mo",d):(0,a.Z)("{months} months",d))||c<=1&&(t?(0,a.Z)("{years}y",d):(0,a.Z)("a year",d))||(t?(0,a.Z)("{years}y",d):(0,a.Z)("{years} years",d))};return r?(0,a.Z)("in {unitOfTime}",u):(0,a.Z)("{unitOfTime} ago",u)}({milliseconds:l,isShorthand:r,isFuture:c})}(e,{limit:"past"},t)}},94685:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(64381),i=r(42227),s=r(39159);const a=function(e,t,r={}){const{includeMinuteZero:a=!0,timeFormat:o="h:mma",separator:l="-"}=r,c=(0,i.Z)(e),d=(0,i.Z)(t),u=(0,n.Z)(c,"a")===(0,n.Z)(d,"a"),p=(0,s.Z)(c),m=(0,s.Z)(d);let h=o,g=o;return a||0!==p||(h=h.replace("h:mm","h")),u&&(h=h.replace("a","")),a||0!==m||(g=g.replace("h:mm","h")),`${(0,n.Z)(c,h)}${l}${(0,n.Z)(d,g)}`}},66565:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(64381),i=r(42227);const s=function(e,t="MMMM d, yyyy"){return e?(0,n.Z)((0,i.Z)(e),t):""}},62248:(e,t,r)=>{"use strict";function n(e=new Date){return new Date(e.getTime()+60*e.getTimezoneOffset()*1e3)}r.d(t,{Z:()=>n})},72066:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(42902),i=r(34993);function s(e,t={}){return null!=e&&(0,i.Z)((0,n.Z)(new Date),t)<=e}},60279:(e,t,r)=>{"use strict";function n(e){return!!e&&"string"==typeof e&&Date.now()>=new Date(e).getTime()}r.d(t,{Z:()=>n})},57609:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(42902),i=r(34993);function s(e,t={}){return null!=e&&(0,i.Z)((0,n.Z)(new Date),t)>=e}},21411:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(42902);function i(e,t){if(null==e||null==t)return!1;const r=(0,n.Z)(new Date);return r>=e&&r<=t}},71831:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(42227),i=r(38797);function s(e){if(null==e)return!1;const t=(0,n.Z)(e);return(0,i.Z)(Date.now(),t)}},74372:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(42227),i=r(3151);function s(e){if(null==e)return!1;const t=(0,n.Z)(e);return(0,i.Z)(new Date,t)}},98804:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(77349),i=r(42227),s=r(3151);function a(e){if(null==e)return!1;const t=(0,i.Z)(e);return(0,s.Z)(t,(0,n.Z)(new Date,1))}},4498:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(42227),i=r(85817),s=r(74372);function a(e){return!(null==e||!(0,s.Z)(e))&&(0,i.Z)((0,n.Z)(e))>16}},16950:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(42227),i=r(3151),s=r(7069);function a(e){if(null==e)return!1;const t=(0,n.Z)(e);return(0,i.Z)((0,s.Z)(new Date,1),t)}},14796:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(6360);const i=/version\/(\d+(\.\d+)?)/i,s=/\/([^\s]+)\s+\(Vizio/,a=/(?:applewebkit|safari)\/(\d+(\.\d+)?)/i,o=function(e){const t=/\(.* ([^)]+)\)$/.exec(e);return t&&t[1]||void 0};function l(e){let t="",r="";e?(t=e.userAgent,r=e.platform):n.Z&&null!=window.navigator&&(t=window.navigator.userAgent,r=window.navigator.platform),this.platformVersion="0",this.detect({userAgent:t,platform:r})}l.prototype={constructor:l,browsers:[{id:"konvergo",name:"Plex Media Player",webkit:!0,regex:/plexmediaplayer/i,versionRegex:/plexmediaplayer (\d+\.\d+\.\d+)/i},{id:"wiiu",name:"Wii U",regex:/wiiu/i,versionRegex:a,webkit:!0},{id:"ps3",name:"Unknown Browser",webkit:!0,regex:/\(PLAYSTATION 3 \d\./},{id:"ps4",name:"Unknown Browser",webkit:!0,regex:/\(PlayStation 4 \d\./},{id:"ps3",name:"PlayStation 3",webkit:!0,regex:/\(PlayStation 3\)/,versionRegex:a},{id:"ps4",name:"PlayStation 4",webkit:!0,regex:/\(PlayStation 4\)/,versionRegex:a},{id:"edge",name:"Microsoft Edge",regex:/edge?|(windows phone.+chrome)/i,versionRegex:/edge?\/(\d+(\.\d+)?)/i},{id:"ie",name:"Internet Explorer",msie:!0,regex:/(msie|trident|iemobile)/i,versionRegex:/(msie |rv:)(\d+(\.\d+)?)/i,versionMatchIndex:2},{id:"opera",name:"Opera",presto:!0,regex:/opera/i,versionRegex:i},{id:"opera",name:"Opera",webkit:!0,regex:/OPR\//,versionRegex:/OPR\/\s?(\d+(\.\d+)?)/},{id:"vivaldi",name:"Vivaldi",webkit:!0,regex:/vivaldi/i,versionRegex:/Vivaldi\/\s?(\d+(\.\d+)?)/},{id:"chrome",name:"Chrome",webkit:!0,regex:/(chrome|crios|gfiber|netbox)/i,versionRegex:/(?:chrome|crios|gfibertv)[/-](\d+(\.\d+)?)/i},{id:"firefox",name:"Firefox",gecko:!0,regex:/firefox/i,versionRegex:/firefox[ /](\d+(\.\d+)?)/i},{id:"safari",name:"Safari",webkit:!0,regex:/macintosh.+safari/i,versionRegex:i},{id:"safari",name:"Safari",webkit:!0,regex:/applewebkit/i,versionRegex:a}],platforms:[{id:"metrological",name:"Metrological",tv:!0,regex:/WPE([-\w]+)?$/,version:function(e=""){const t=/WPE(?:-(\w*))?$/.exec(e);if(t&&t[1])return t[1]}},{id:"netgem",name:"Netgem",tv:!0,regex:/^Netbox/,version:function(e=""){return e.split("/")[1]||e}},{id:"netcast",name:"NetCast",tv:!0,predicate:function(e){return/netcast/i.test(e)&&!/web[o0]s/i.test(e)}},{id:"webos",name:"webOS",tv:!0,predicate:function(e){return/web[o0]s/i.test(e)&&/smarttv/i.test(e)}},{id:"blackberry",name:"Blackberry",mobile:!0,regex:/BlackBerry|RIM|BB10/,version:function(e){const t=(/PlayBook/.test(e)?/Tablet OS (\d+\.\d+)/:i).exec(e);return t&&t[1]}},{id:"ps3",name:"PlayStation 3",tv:!0,regex:/P(lay)?S(tation )?3/i,version:function(e){return window.WM_devSettings?window.WM_devSettings.version:void 0}},{id:"ps4",name:"PlayStation 4",tv:!0,regex:/P(lay)?S(tation )?4/i,version:function(e){return window.WM_devSettings?window.WM_devSettings.version:void 0}},{id:"wiiu",name:"Wii U",tv:!0,regex:/Nintendo WiiU/},{id:"tizen",name:"Tizen",tv:!0,predicate:function(e){return!!this.version(e)},version:function(e){const t=/Tizen (\d+(\.\d+)*)/i.exec(e);return t&&t[1]||void 0}},{id:"winvergo",name:"Windows",tv:!0,predicate:function(e){return n.Z&&!!window.Windows},version:function(e){try{const e=window.Windows.System.Profile.AnalyticsInfo.versionInfo.deviceFamilyVersion,t=("0000000000000000"+parseInt(e,10).toString(16)).slice(-16),r=[];let n=0;for(;n<t.length;){const e=t.substring(n,n+4),i=parseInt(e,16);r.push(i),n+=4}return r.join(".")}catch(e){}}},{id:"viera",name:"Viera",tv:!0,predicate:function(e){return!!this.version(e)},version:function(e){const t=/Viera\/(\d+(\.\d+)*)/i.exec(e);return t&&t[1]||void 0}},{id:"sta",name:"Smart TV Alliance",tv:!0,version:function(e){let t,r;if(/SmartTvA/.test(e))r=/SmartTvA\/(\d+\.\d+)/.exec(e),t=r&&r[1]||t;else{const r=[/nettv\/4/i],n=[/nettv/i],i=function(t){return t.test(e)};[/Linux i686.+Chromium\/18/,/nettv\/4.2/i,/toshiba-dtv/i,/viera/i].some(i)?t="2.0":r.some(i)?t="1.0":n.some(i)&&(t="0")}return t},predicate:function(e){return void 0!==this.version(e)}},{id:"tivo",name:"TiVo",tv:!0,regex:/TiVo/,version:function(e){const t=/TCD[^,]+/.exec(e);return t&&t[0]||void 0}},{id:"viziosmartcast",name:"Vizio SmartCast",tv:!0,predicate:function(e){return n.Z&&window.VIZIO&&window.VIZIO.isSmartCastDevice},version:function(e){}},{id:"viziomtk",name:"Vizio MTK",tv:!0,predicate:function(e){return/opera/i.test(e)&&"undefined"!=typeof iMTK_JSP}},{id:"viziosigma",name:"Vizio Sigma",tv:!0,predicate:function(e){return/opera/i.test(e)&&/vizio/i.test(e)},version:function(e){const t=s.exec(e);return t&&t[1]||void 0}},{id:"viziomtk",name:"Vizio MTK",tv:!0,predicate:function(e){return s.test(e)&&"undefined"!=typeof iMTK_JSP},version:function(e){const t=s.exec(e);return t&&t[1]||void 0}},{id:"viziosigma",name:"Vizio Sigma",tv:!0,regex:s,version:function(e){const t=s.exec(e);return t&&t[1]||void 0}},{id:"operatvstore",name:"Opera TV Store",tv:!0,predicate:function(e){const t=/Opera TV Store/.test(e),r=/TV Store/.test(e)&&/OMI\//.test(e);return t||r}},{id:"operatv",name:"Opera TV",tv:!0,regex:/opera\/\d+\.\d+ \(linux (mips|arm)/i},{id:"ios",name:"iOS",mobile:!0,regex:/(iphone|ipad|ipod)/i,version:function(e){const t=/OS (\d+_\d+)/.exec(e);return t&&t[1]?t[1].replace("_","."):void 0}},{id:"windowsphone",name:"Windows Phone",mobile:!0,regex:/windows phone/i,version:function(e){const t=/windows phone[ os]*(\d+\.\d+);/i.exec(e);return t&&t[1]}},{id:"android",name:"Android",mobile:!0,regex:/android/i,version:function(e){const t=/Android (\d+\.\d+)/.exec(e);return t&&t[1]}},{id:"webos",name:"webOS",mobile:!0,predicate:function(e){return/hpwOS/.test(e)||/web[o0]s/i.test(e)&&!/smarttv/i.test(e)},version:function(e){const t=/(?:hpw|web)OS\/(\d+\.\d+)/.exec(e);return t&&t[1]}},{id:"openelec-rpi2",name:"Embedded (Raspberry Pi)",tv:!0,regex:/plexmediaplayer.*openelec-rpi2/i,version:o},{id:"openelec",name:"Embedded",tv:!0,regex:/plexmediaplayer.*openelec/i,version:o},{id:"linuxkonvergo",name:"Linux",tv:!0,regex:/plexmediaplayer.*linux/i,version:o},{id:"osxkonvergo",name:"OSX",tv:!0,regex:/plexmediaplayer.*mac/i,version:o},{id:"windowskonvergo",name:"Windows",tv:!0,regex:/plexmediaplayer.*win/i,version:o},{id:"linux",name:"Linux",regex:/linux/i},{id:"osx",name:"OSX",regex:/Macintosh/,version:function(e){const t=/OS X (\d+)[_.]?(\d+)?/.exec(e);if(t)return t[2]?t[1]+"."+t[2]:t[1]}},{id:"windows",name:"Windows",regex:/Windows/,version:function(e){const t=/Windows [^\d;)]*(\d+\.\d+)/.exec(e);if(t)return{"6.0":"Vista / Server 2008",6.1:"7 / Server 2008 R2",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"}[t[1]]}},{id:"chromeos",name:"Chrome OS",regex:/CrOS/,version:function(e){const t=/CrOS [\S]* (\d+)[_.]?(\d+)?/.exec(e);if(t)return t[2]?t[1]+"."+t[2]:t[1]}}],detect:function(e){const t=this.runTests(this.browsers,e),r=this.runTests(this.platforms,e);let n;t?(this.id=t.id,this.name=t.name,this.version=this.getVersion(e.userAgent,t.versionRegex,t.versionMatchIndex||1),this.webkit=!!t.webkit,this.gecko=!!t.gecko,this.msie=!!t.msie,this.presto=!!t.presto):(this.id="unknown",this.name="Unknown Browser",this.version="0",this.webkit=!1,this.gecko=!1,this.msie=!1,this.presto=!1),r?(n="function"==typeof r.version?r.version(e.userAgent):r.version,this.platform=r.name,this.platformID=r.id,this.platformVersion=n||this.platformVersion,this.mobile=!!r.mobile,this.tv=!!r.tv):(this.platformID="unknown",this.platform="Unknown Platform",this.mobile=!1,this.tv=!1),this.tv||(this.platformModifierKey="osx"===this.platformID||"ios"===this.platformID?"command":"ctrl")},runTests:function(e,t){let r,n,i,s=0;for(;!0!==n&&(i=e[s++]);)r=t[i.context||"userAgent"],i.regex?n=i.regex.test(r):i.predicate&&(n=i.predicate(r));return i},getVersion:function(e,t,r){const n=e.match(t);return n&&n.length>r&&n[r]||"0"},toJSON:function(){const e={};for(const t in this)this[t]&&"browsers"!==t&&"platforms"!==t&&(e[t]=this[t]);return e}};const c=new l},6360:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)},20573:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(14796),i=r(6360);const s=function(){if(!i.Z)return!1;const e=document.createElement("canvas");return!!(e&&e.getContext&&e.getContext("2d"))}(),a={isHostedHttps:i.Z&&"https:"===window.location.protocol,hasConsole:!!(window.console&&window.console.log&&window.console.log.call),hasWebSocket:i.Z&&!!window.WebSocket,hasEventSource:i.Z&&!!window.EventSource,hasReplaceState:i.Z&&!(!window.history||!window.history.replaceState),hasFileUpload:i.Z&&!!(window.File&&window.FileList&&window.FileReader),hasMediaSource:i.Z&&!(!window.MediaSource&&!window.WebKitMediaSource),hasObjectUrl:!n.Z.presto&&i.Z&&!(!window.URL||"function"!=typeof window.URL.createObjectURL||"function"!=typeof window.URL.revokeObjectURL),hasBlob:function(){try{return!!new window.Blob}catch(e){return!1}}(),hasFullscreen:function(){if(!i.Z)return!1;const e=document.createElement("div");return!!(e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen)}(),hasCanvas:s,hasWebGL:function(){if(!s)return!1;const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return!!t&&t instanceof window.WebGLRenderingContext}(),hasTouchScreen:i.Z&&!!("ontouchstart"in window),hasPageVisibility:i.Z&&(!0===document.hidden||!1===document.hidden),hasWebKitPageVisibility:i.Z&&(!0===document.webkitHidden||!1===document.webkitHidden),hasPassiveEventListeners:function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){return e=!0,!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),hasWebSpeech:i.Z&&!!window.speechSynthesis,hasServiceWorker:i.Z&&!(!window.navigator||!window.navigator.serviceWorker),hasMediaSession:i.Z&&"mediaSession"in window.navigator,hasLocalStorage:(()=>{if(!i.Z)return!1;let e=!1;try{window.localStorage.setItem("testKey","test"),window.localStorage.removeItem("testKey"),e=!0}catch(e){}return e})()}},8523:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(94818),i=r(55438);const s=new(n.Z.extend({mixins:i.Z}))},62018:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e,t){return t?`${e}:${t}`:e}},59178:(e,t,r)=>{"use strict";r.d(t,{Pe:()=>s,L7:()=>a,ZP:()=>o});var n=r(20573),i=r(88993);const s="D100",a="D200";function o(){return n.Z.isHostedHttps||i.lv(window.location.hostname)?a:n.Z.isHostedHttps?"D300":s}},95979:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(5583);r(32903);const i=function(e){return{"X-Plex-Drm":e||n.NONE}}},68622:(e,t,r)=>{"use strict";r.d(t,{gU:()=>n,ZP:()=>i});const n="=",i=[n,"!=","==","!==",">=","<=",">>=","<<=",">>=-","<<=-"]},23636:(e,t,r)=>{"use strict";r.d(t,{Y:()=>n,OR:()=>i});const n="&",i=","},1550:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(13469),i=r.n(n),s=(r(32903),r(68622)),a=r(23636);let o,l;function c(e,t){if(i().isEmpty(e))return;if(e===o)return l;const r=e.map((({key:e,value:r,operator:n=s.gU})=>{let i;i=t?Array.isArray(r)?r.join(a.OR):r:Array.isArray(r)?r.map(encodeURIComponent).join(a.OR):encodeURIComponent(r);const o=n.lastIndexOf(s.gU),l=n.substr(0,o),c=n.substr(o+1,n.lastIndexOf(s.gU));return encodeURIComponent(e)+encodeURIComponent(l)+s.gU+encodeURIComponent(c)+i}),[]);return o=e,l=r.join(a.Y),l}},57471:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(3615);function i(e,t,r="message"){if(!e)return t;const i=n.Z.parseXML(e.responseText);return i&&i[r]?i[r]:t}},22169:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a,LL:()=>o,tZ:()=>l,d0:()=>c});var n=r(57799),i=r(20683);function s(e){const t=new URLSearchParams(window.location.search).get(e);return t?function(e){return/^https:\/\/(?:(\w|-)+\.)*plex\.tv(?:\/|$)/i.test(e)?e:void 0}(t):void 0}function a(e){const t=s("myPlexUrl")||"https://plex.tv";return e?i.Z.join([t,e]):t}function o(e){const t=s("wwwPlexUrl")||"https://www.plex.tv";return e?i.Z.join([t,e]):t}function l(e){const t=s("authAppUrl")||"https://app.plex.tv/auth",r={myPlexUrl:s("myPlexUrl"),wwwPlexUrl:s("wwwPlexUrl")};let a=i.Z.join(t,r,{trailingSlash:!0});return e&&!(0,n.Z)(a)&&(a=i.Z.join([window.location.origin,a])),a}function c(){return s("graphQLProvider")||"https://graph.provider.plex.tv/api"}},85511:(e,t,r)=>{"use strict";r.d(t,{U:()=>i,Z:()=>a});var n=r(73788),i=(e=>(e.Subscription="subscription",e.SendRecoveryCode="sendRecoveryCode",e))(i||{});function s(e,t){switch(t){case"subscription":switch(e){case"1003":return(0,n.Z)("Subscriptions have been temporarily disabled: too many failed attempts. Please try again later.")}break;case"sendRecoveryCode":switch(e){case"1001":return(0,n.Z)("User could not be authenticated.");case"1003":return(0,n.Z)("A temporary recovery code has already been sent recently. Please try again later.");case"1028":return(0,n.Z)("Invalid recovery code")}}switch(e){case"1001":return(0,n.Z)("The username or password is incorrect");case"1003":return(0,n.Z)("Sign in has been temporarily disabled: too many failed attempts. Please try again later.");case"1004":return(0,n.Z)("Authentication failed. Please try again later.");case"1010-login":return(0,n.Z)("Login is required");case"1010-password":return(0,n.Z)("Password is required");case"1010-email":return(0,n.Z)("Email is required");case"1011-username":return(0,n.Z)("Username has already been taken");case"1011-email":return(0,n.Z)("Email has already been taken");case"1028":return(0,n.Z)("Invalid verification code");case"1029":return(0,n.Z)("Please enter the verification code");case"1030":return(0,n.Z)("This account only allows signing in with an email address");case"1031":return(0,n.Z)("The username or password is incorrect. Repeated attempts may temporarily disable sign in.");case"1032-password":return(0,n.Z)("Password must be at least 8 characters");case"1033-password":return(0,n.Z)("Password is too weak");case"1034-password":return(0,n.Z)("Password must be different from username or email address");case"1035-email":return(0,n.Z)("Email is not a valid email address");case"1036-username":return(0,n.Z)("Username must not be an email address");case"1037-username":return(0,n.Z)("Username contains invalid characters");case"1038-pin":return(0,n.Z)("Pin must be 4 digits");case"1039-passwordConfirmation":return(0,n.Z)("Confirm Password must match Password");case"1040":case"1044":return(0,n.Z)("Invalid Password")}}function a(e,t){if(!e)return;const r=String(e.code);return s(`${e.code}-${e.field}`,t)||s(r,t)||e.message||(0,n.Z)("An unknown error occurred")}},97946:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(40127),i=r(74226),s=r(47276),a=r(19814),o=r(19211),l=r(39582),c=r(88604);function d(e){const{sourceServer:t,sourceProvider:r,directories:d,optOuts:u,isManagedUser:p,hasHybridGuide:m=!1}=e;if(!d)return[];const h=null==u?void 0:u.find((e=>e.key===n.INCLUDE_DISCOVER_SOURCE)),g=h&&(p?h.value!==a.vx:h.value===a.Np);return d.reduce(((e,n)=>{const a=(0,l.Z)(r,n);return g&&i.wB(r.identifier,i.Xp)||i.wB(r.identifier,i._)?e:a&&(n.hubKey&&!m||t.machineIdentifier===s.X&&i.yv(r.identifier)||a.key!==c.Hs)&&(t.machineIdentifier===s.X||a.key!==c.Hs||n.hubKey)?e.concat((0,o.Z)({sourceType:a.key,sourceServer:t,sourceProvider:r,sourceDirectory:n})):e}),[])}},62682:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(71273);function i(e){return function(e){return!!e&&(!!e.get("isCloud")||e.supports("json")&&!e.get("onlyXML")&&!e.get("isMobileServer"))}(e)?n.AV:n.Ls}},54798:e=>{e.exports=function(e,t,r){return e===t?r.fn(this):r.inverse(this)}},60773:e=>{e.exports=function(e,t,r){return e!==t?r.fn(this):r.inverse(this)}},27420:(e,t,r)=>{const n=r(45924).Z,i=r(83515);e.exports=i(n)},30538:(e,t,r)=>{const n=r(38264).Z,i=r(83515);e.exports=i(n)},51777:(e,t,r)=>{const n=r(84521).Z,i=r(83515);e.exports=i(n)},91196:(e,t,r)=>{const n=r(13469),i=r(40202);e.exports=function(e,t){const r=i.partials[e],s=n.extend({},t.hash.context||this,t.hash);return new i.SafeString(r(s))}},57351:(e,t,r)=>{const n=r(81855).Z,i=r(83515);e.exports=i(n)},86421:(e,t,r)=>{const n=r(7798).Z,i=r(83515);e.exports=i(n)},83515:(e,t,r)=>{const n=r(13469);e.exports=function(e){return function(){return e.apply(this,n.initial(arguments))}}},66623:(e,t,r)=>{const n=r(13469),i=r(73788).U,s=r(40202);e.exports=function(){const e=n.initial(arguments),t=n.last(arguments).hash;return n.isObject(t)&&!n.isEmpty(t)&&e.splice(1,0,t),new s.SafeString(i.apply(i,e))}},66611:(e,t,r)=>{const n=r(20683).Z.getLastSegment,i=r(83515);e.exports=i(n)},6029:(e,t,r)=>{"use strict";function n(e){if(!e)return null;const[t,r]=e.split(","),n=t.substr(5),i=window.atob(r),s=[];for(let e=0;e<i.length;e++)s.push(i.charCodeAt(e));const a=new Uint8Array(s);return new window.Blob([a],{type:n})}r.d(t,{Z:()=>n})},94450:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(32903);function i(e,t){(0,n.Z)(null!=e,"No `version` supplied to `isVersionOrNewer`."),(0,n.Z)(null!=t,"No `minVersion` supplied to `isVersionOrNewer`. Have you misspelled a constant?");const r=t.split("."),i=e.split(".");for(let e=0,t=r.length;e<t;e++)if(e<i.length){const t=parseInt(r[e],10),n=parseInt(i[e],10);if(t<n)return!0;if(t>n)return!1}return!0}},94118:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(64556);const i=/(^[^-]+)-/;function s(e){for(let t=0,r=(e=e||[]).length;t<r;t++){const r=e[t];if("xx"===r||"xn"===r)continue;if(n.ZP[r])return r;const a=r.match(i),o=a&&s([a[1]]);if(o)return o}}},33193:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(64556);function i(e){return n.ZP[e]||""}},64556:(e,t,r)=>{"use strict";r.d(t,{wq:()=>i,WX:()=>s,MP:()=>a,ZP:()=>o});const n={aa:"Afaraf",af:"Afrikaans",ab:"Abkhazian",ak:"Akan",sq:"Shqip",am:"Amharic",ar:"",an:"Aragons",hy:"",as:"Assamese",av:" ",ae:"avesta",ay:"aymar aru",az:"azrbaycan dili",ba:" ",bm:"bamanankan",eu:"euskara",be:"",bn:"Bengali",bh:"",bi:"Bislama",bs:"bosanski jezik",br:"brezhoneg",bg:" ",my:"Burmese",ca:"Catal",ch:"Chamoru",ce:" ",cu:" ",cv:" ",kw:"Kernewek",co:"corsu",cr:"",dv:"Divehi",dz:"",en:"English","en-GB":"English (UK)",eo:"Esperanto",et:"eesti",ee:"Eegbe",fo:"froyskt",fj:"vosa Vakaviti",fy:"Frysk",ff:"Fulfulde",ka:"",gd:"Gidhlig",ga:"Gaeilge",gl:"Galego",gv:"Gaelg",gn:"Avae&apos;",gu:"",ht:"Kreyl ayisyen",ha:"",hz:"Otjiherero",hi:"",ho:"Hiri Motu",hr:"hrvatski",ig:"Ass Igbo",is:"slenska",io:"Ido",ii:" Nuosuhxop",iu:"",ie:"Interlingue",ia:"Interlingua",id:"Bahasa Indonesia",ik:"Iupiaq",jv:"basa Jawa",kl:"kalaallisut",kn:"",ks:"",kr:"Kanuri",kk:" ",km:"Khmer",ki:"Gky",rw:"Ikinyarwanda",ky:" ",kv:" ",kg:"KiKongo",kj:"Kuanyama",ku:"Kurd",lo:"Lao",la:"latine",lv:"latvieu valoda",li:"Limburgs",ln:"Lingla",lt:"lietuvi kalba",lb:"Ltzebuergesch",lu:"Luba-Katanga",lg:"Luganda",mk:" ",mh:"Kajin Maje",ml:"Malayalam",mi:"te reo Mori",mr:"",ms:"bahasa Melayu",mg:"Malagasy fiteny",mt:"Malti",mo:"Moldavian",mn:"",na:"Ekakair Naoero",nv:"Din bizaad",nr:"isiNdebele (North)",nd:"isiNdebele (South)",ng:"Owambo",ne:"",nn:"Norsk nynorsk",nb:"Norsk bokml",ny:"chiChea",oc:"Occitan",oj:"",or:"Oriya",om:"Afaan Oromoo",os:" ",pa:"",pi:"",ps:"",qu:"Runa Simi",rm:"rumantsch grischun",ro:"romn",rn:"kiRundi",sg:"yng t sng",sa:"",sr:" ",si:"Sinhala",sk:"slovenina",sl:"Slovenina",se:"Davvismegiella",sm:"gagana fa&apos;a Samoa",sn:"chiShona",sd:"",so:"Soomaaliga",st:"Sesotho",sc:"sardu",ss:"SiSwati",su:"Basa Sunda",sw:"Kiswahili",ty:"Reo Tahiti",ta:"",tt:"",te:"Telugu",tg:"",tl:"Wikang Tagalog",th:"",bo:"",ti:"Tigrinya",to:"faka Tonga",tn:"Setswana",ts:"Xitsonga",tk:"Trkmen",tw:"Twi",ug:"Uyurq",uk:"",ur:"",uz:"O&apos;zbek",ve:"Tshivena",vi:"Ting Vit",vo:"Volapk",cy:"Cymraeg",wa:"Walon",wo:"Wollof",xh:"isiXhosa",yi:"",yo:"Yorb",za:"Sa cue",zu:"isiZulu",pb:"Portugus (Brasil)",fr:"Franais","fr-CA":"Franais Canadien",de:"Deutsch",sv:"Svenska",no:"Norsk",da:"Dansk",fi:"Suomeksi",nl:"Nederlands",it:"Italiano",es:"Espaol","es-419":"Espaol (Latinoamrica)",pl:"Polski",hu:"Magyar",el:"",tr:"Trke",zh:"","zh-TW":"",ru:" ",he:"",ja:"",pt:"Portugus","pt-BR":"Portugus Brasileiro",ko:"",cs:"etina",fa:"",xx:"Unknown",xn:"None"};function i(e,t){return n[e].localeCompare(n[t])}const s=["xx","xn"],a=function(){const e=Object.keys(n).filter((e=>-1===s.indexOf(e)));return e.sort(i),e.concat(s)}(),o=n},71951:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return`${e.beginsAt}-${e.channelIdentifier}-${e.endsAt}`}},32903:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(86832);const i=function(e,t="`assert` requires an error message argument",r=!1){if(e)return!0;if(n.Z.error(t),r)throw new Error(t);return!1}},86832:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(8523);const i="log:message",s="log:groupEnd",a={accessToken:1,address:1,auth_token:1,authToken:1,Authorization:1,clientIdentifier:1,email:1,host:1,myPlexAccessToken:1,password:1,uri:1,"X-Plex-Token":1},o=new RegExp("("+Object.keys(a).join("|")+")(\\s?=\\s?)(['\"]?)[^'\"\n]+(['\"]?)","g"),l=/%[sdifo]/g,c=/(error|exception)\]$/i,d={"%s":e=>e,"%d":e=>Number.parseInt(e,10),"%f":e=>Number.parseFloat(e),"%o":e=>e},u=(e,t,r)=>function(){let i;const s=arguments.length;let a;if(t=void 0===t?p.LEVEL_LOG:t,!(p.level<t)){if(0===s&&r)a=r;else if(1===s)a=p.serialize(arguments[0]);else if(s>1){const e=Array(s);let t=-1;for(;++t<s;)e[t]=p.serialize(arguments[t]);e[0]=e[0].replace(l,((t,r)=>{let n=t;return e.length>1&&(n=d[t](e[1]),e.splice(1,1)),n})),a=e.join(" ")}return!a||i&&!i.test(a)||n.Z.trigger(e,{type:e,level:t,message:a}),a}},p=u(i);p.LEVEL_NONE=-1,p.LEVEL_ERROR=0,p.LEVEL_WARN=1,p.LEVEL_INFO=2,p.LEVEL_DEBUG=3,p.LEVEL_LOG=4,p.LEVEL_GROUP=p.LEVEL_INFO,p.LEVEL_GROUP_END=p.LEVEL_INFO,p.level=p.LEVEL_LOG,p.redacts=!0,p.setLevel=e=>{p.level=Math.max(p.LEVEL_NONE,Math.min(e,p.LEVEL_LOG))},p.debug=u(i,p.LEVEL_DEBUG),p.info=u(i,p.LEVEL_INFO),p.warn=u(i,p.LEVEL_WARN),p.error=u(i,p.LEVEL_ERROR),p.group=u("log:group",p.LEVEL_GROUP,"Group"),p.groupCollapsed=u("log:groupCollapsed",p.LEVEL_GROUP,"Group"),p.groupEnd=()=>{p.level<p.LEVEL_GROUP_END||n.Z.trigger(s,{type:s,level:p.LEVEL_GROUP_END})},p.serialize=e=>{let t;switch(t=void 0===e?"[object Undefined]":null===e?"[object Null]":Object.prototype.toString.call(e),t){case"[object String]":return p.redacts?e.replace(o,"$1$2$3REDACTED$4"):e;case"[object Object]":case"[object Array]":try{const t=p.redacts?p._jsonReplacer:null;return JSON.stringify(e,t,2)}catch(e){return"Unable to serialize value"}case"[object Boolean]":case"[object Number]":case"[object Function]":case"[object RegExp]":return e.toString();case"[object Date]":return e.toUTCString();case"[object Undefined]":return"undefined";case"[object Null]":return"null";default:if(c.test(t)){const r=p._getMaxStackLength();let n=e.stacktrace||e.stack;return n&&n.length>r&&(n=n.substr(0,r-3)+"..."),p.serialize({type:t,stack:n,name:e.name,message:e.message})}return e.toString()}},p._jsonReplacer=(e,t)=>a[e]?"REDACTED":"[object String]"===Object.prototype.toString.call(t)?p.serialize(t):t,p._getMaxStackLength=()=>1e3;const m=p},74945:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e,t,r){return Math.max(Math.min(e,r),t)}},77021:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e,t,r){let n=r;if(e.Part.length>1)for(let r=0,i=e.Part.length;r<i;r++){const i=e.Part[r];if(!i.duration)break;if(t.key===i.key)break;n+=i.duration}return n}},39061:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(64381),i=r(55855),s=r(78966),a=r(19013),o=r(35523),l=r(73788);const c=function(e){let t=e.episodeIndex;if(t>0||0===t)return e.noLeadingZero||(t=(0,o.Z)(t)),e.useLongName?(0,l.Z)("Episode {episodeNumber}",{episodeNumber:t}):(0,l.Z)("E{episodeNumber}",{episodeNumber:t});if(e.date&&e.dateFormat)return(0,n.Z)((0,a.Z)(e.date),e.dateFormat);if(e.date){const t=(0,a.Z)(e.date);return(0,l.Z)("{monthNumber}/{dayNumber}/{shortYear}",{monthNumber:(0,s.Z)(t)+1,dayNumber:(0,i.Z)(t),shortYear:(0,n.Z)(t,"yy")})}return""}},88773:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(13469),i=r.n(n);const s=function(e,t){let r;if(e.Part.length>1){let n=0;for(let i=0,s=e.Part.length;i<s&&(r=e.Part[i],r.duration)&&(n+=r.duration,!(n>t));i++);}else r=i().first(e.Part);return r}},85926:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e,t){return e>t?50:e<=0||t<=0?0:parseFloat((e/t*100).toFixed(2))}},65160:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e,t,r){let n=r;if(e.Part.length>1)for(let r=0,i=e.Part.length;r<i;r++){const i=e.Part[r];if(!i.duration)break;if(t.key===i.key)break;n-=i.duration}return n}},37048:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(13469),i=r.n(n);const s=function(e,t){if(!e.indexes)return;const r=e.indexes.split(",");return r.length?i().indexOf(r,t)>-1?t:r[0]:void 0}},3510:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(64381),i=r(55855),s=r(78966),a=r(19013),o=r(35523),l=r(73788);const c=function(e){let t=e.seasonIndex,r=e.episodeIndex;if((r>0||0===r)&&t<1e3){e.noLeadingZero||(t=(0,o.Z)(t),r=(0,o.Z)(r));const n=e.separator;return e.useLongName?`${(0,l.Z)("Season {seasonNumber}",{seasonNumber:t})}${n||" "}${(0,l.Z)("Episode {episodeNumber}",{episodeNumber:r})}`:`${(0,l.Z)("S{seasonNumber}",{seasonNumber:t})}${n||""}${(0,l.Z)("E{episodeNumber}",{episodeNumber:r})}`}if(e.date){const t=(0,a.Z)(e.date);return(0,l.Z)("{monthNumber}/{dayNumber}/{shortYear}",{monthNumber:(0,s.Z)(t)+1,dayNumber:(0,i.Z)(t),shortYear:(0,n.Z)(t,"yy")})}return""}},40645:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(35523),i=r(73788);const s=function(e){let t=e.seasonIndex;return null==t?"":t>1e3?t:(e.noLeadingZero||(t=(0,n.Z)(t)),e.useLongName?(0,i.Z)("Season {seasonNumber}",{seasonNumber:t}):(0,i.Z)("S{seasonNumber}",{seasonNumber:t}))}},24765:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(13469),i=r.n(n),s=r(96799);function a(e,t={}){const{onlyIfCached:r=!0}=t;if(!e)return;if(e.section)return e.section;if(e.get("isSection"))return e;const n=e.get("librarySectionID");if(n){const t=new s.Z({key:n},{server:e.server,onlyIfCached:r});return i().isEmpty(t)?void 0:t}return e.parent?a(e.parent,t):void 0}},99508:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(13469),i=r.n(n),s=r(14427),a=r(16374);const o=function(e){const t=s.Z.get("audio").id,r=(0,a.Z)(e,{streamType:t,selected:!0});return i().first(r)}},80850:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(64155),i=r(14427),s=r(16374);const a=function(e){return(0,s.Z)(e,{streamType:i.Z.get("subtitles").id}).filter((e=>e.selected&&e.id!==n.H))[0]}},58790:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(13469),i=r.n(n),s=r(14427),a=r(16374);const o=function(e){const t=s.Z.get("video").id,r=(0,a.Z)(e,{streamType:t});return i().first(r)}},16374:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(13469),i=r.n(n);const s=function(e,t){const r=[];if(e){const n=i().first(e.Part);n&&n.Stream&&r.push.apply(r,i().where(n.Stream,t))}return r}},82866:(e,t,r)=>{"use strict";function n(e){return/^(idx|pgs|vobsub)$/i.test(e)}r.d(t,{Z:()=>n})},33881:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(58090),l=r(32511),c=(r(32903),r(86832));var d=r(99508),u=r(80850),p=r(58790),m=r(16374),h=r(82866),g=r(56594),y=r(79400),v=r(73788),f=r(14427);const b={getMediaDecision:function(e){const t=this.augmentProfile(e);if(c.Z.info("[MDE] Augmented profile:",t),e.media)return this.analyzeMedia(e.media,t,e);const r=e.item.get("Media");if(!r.length)return{transcodeServer:e.transcodeServer,canPlay:!0,canDirectPlay:!0};if(1===r.length)return this.analyzeMedia(a().first(r),t,e);const n=a().map(r,(function(r){return this.analyzeMedia(r,t,e)}),this);return this.getBestDecision(n)},augmentProfile:function(e){const t=e.profile;if(!t)throw new Error("MDE: No player profile provided for "+e.type);const r=e.type===y.Z.types.VIDEO,n=i().extend(!0,{},t.directPlay),s=i().extend(!0,{},t.directStream),o=n.generic;o&&delete n.generic;let l=e.allowedAC3Containers;const c="*"===l;!c&&l&&(l=Array.isArray(l)?l:[l]);let d=e.allowedEAC3Containers;const u="*"===d;!u&&d&&(d=Array.isArray(d)?d:[d]);let p=e.allowedDCAContainers;const m="*"===p;!m&&p&&(p=Array.isArray(p)?p:[p]);let h=e.allowedTrueHDContainers;const g="*"===h;return!g&&h&&(h=Array.isArray(h)?h:[h]),a().each(n,(function(t,n){this.mergeGenericOptions(t,o),this.mergeMaxQualityOptions(t,e),(c||l&&a().contains(l,n))&&this.addAudioCodec("ac3",t,e),(u||d&&a().contains(d,n))&&this.addAudioCodec("eac3",t,e),(m||p&&a().contains(p,n))&&this.addAudioCodec("dca",t,e),(g||h&&a().contains(h,n))&&this.addAudioCodec("truehd",t,e);const i=t[y.Z.getStreamByType(e.type)];if(i){const t=i.codecs;a().each(t,(function(t,r){this.mergeMaxQualityOptions(t,e,!0),e.videoCodecOptions&&e.videoCodecOptions[r]&&this.mergeCodecOptions(t,e.videoCodecOptions[r])}),this)}const s=r&&t.audio;if(s&&e.audioCodecOptions){const t=s.codecs;a().each(t,(function(t,r){e.audioCodecOptions[r]&&this.mergeCodecOptions(t,e.audioCodecOptions[r])}),this)}}),this),this.mergeMaxQualityOptions(s,e),r&&(e.videoCodecOptions&&s.video&&a().each(s.video.codecs,(function(t,r){e.videoCodecOptions[r]&&this.mergeCodecOptions(t,e.videoCodecOptions[r])}),this),e.audioCodecOptions&&s.audio&&a().each(s.audio.codecs,(function(t,r){e.audioCodecOptions[r]&&this.mergeCodecOptions(t,e.audioCodecOptions[r])}),this)),{directPlay:n,directStream:s}},mergeGenericOptions:function(e,t){t&&(a().defaults(e,a().omit(t,"video","audio")),a().each(["audio","video"],(function(r){const n=t[r];let i=e[r];n&&(i||(i={},e[r]=i),a().defaults(i,a().omit(n,"codecs")),n.codecs&&a().each(n.codecs,(function(e,t){a().defaults(this.ensureCodecs(t,i),e)}),this))}),this))},mergeCodecOptions:function(e,t){a().each(t,(function(t,r){e[r]=t}),this)},ensureCodecs:function(e,t){return t.codecs||(t.codecs={}),t.codecs[e]||(t.codecs[e]={}),t.codecs[e]},mergeMaxQualityOptions:function(e,t,r){a().each([{option:"bitrate",setting:"maxBitrate"},{option:"videoResolution",setting:"maxVideoResolution"}],(function(n){if("videoResolution"===n.option&&t.type!==y.Z.types.VIDEO)return;const i=this.getMaxQualityOption(e,n.option,t);if(null==i)return;const s=n.setting,a=y.Z.getStreamByType(t.type);e.hasOwnProperty(s)?e[s]=i:e.hasOwnProperty(a)?e[a][s]=i:r||(e[a]={},e[a][s]=i)}),this)},getMaxQualityOption:function(e,t,r){const n=r.quality||{},i="max"+t.charAt(0).toUpperCase()+t.slice(1);let s=n[t];const a=this.getPrimaryStreamProperty(e,i,r);if("videoResolution"===t&&s&&(s=g.Z.getResolutionFromSize(s)),"bitrate"===t){const e=r.item.server.get("maxUploadBitrate");e&&(!s||e<s)&&(s=e)}if(s||a){let e;return e=s&&a?Math.min(s,a):s||a,e}},addAudioCodec:function(e,t,r){t.audio||(t.audio={}),this.ensureCodecs(e,t.audio)},analyzeMedia:function(e,t,r){c.Z.info("[MDE] Starting analysis of",this.getMediaTitle(e)),(0,c.Z)("[MDE] Analyzing direct play");const n=this.canDirectPlay(e,t.directPlay,r);n.result||(0,c.Z)("[MDE] Cannot direct play:",n.failedCheck);const i={finalProfile:t,transcodeServer:r.transcodeServer,preferredDirectPlayProtocol:r.preferredDirectPlayProtocol,item:r.item,media:e,canDirectPlay:n.result,canDirectPlayFailedCheck:n.failedCheck,canDisplayHDR:!!r.canDisplayHDR,canDisplayDolbyVision:!!r.canDisplayDolbyVision};let s=r.transcoderOptions||{};if(a().isFunction(s)&&(s=s(i)),r.type===y.Z.types.VIDEO){(0,c.Z)("[MDE] Analyzing video direct stream");const n=(0,p.Z)(e);if(n){const e=this.canDirectStreamVideo(n,t.directStream.video,r,s);i.canDirectStreamVideo=e.result,i.canDirectStreamVideoFailedCheck=e.failedCheck}}if(r.type!==y.Z.types.PHOTO){(0,c.Z)("[MDE] Analyzing audio direct stream");const n=(0,d.Z)(e);if(n){const e=this.canDirectStreamAudio(n,t.directStream.audio,r,s);i.canDirectStreamAudio=e.result,i.canDirectStreamAudioFailedCheck=e.failedCheck}}const o=(0,u.Z)(i.media);return o&&((0,c.Z)("[MDE] Analyzing subtitles"),a().extend(i,this.analyzeSubtitles(o,r))),(0,c.Z)("[MDE] Analyzing playability"),a().extend(i,this.canPlay(i,r)),a().extend(i,this.getEffectiveQuality(e,t.directStream,r)),(0,c.Z)("[MDE] Finished analysis of:",this.getMediaTitle(e),this.getDecisionLogs(i)),i},canDirectPlay:function(e,t,r){if(r.forceDirectPlay)return(0,c.Z)("[MDE] Direct play forced"),{result:!0};if(!1===r.allowDirectPlay&&!r.transcodeServer.get("isCloud"))return c.Z.warn("[MDE] Direct play failed; option is disabled"),{result:!1,failedCheck:"allowDirectPlay"};if(r.type===y.Z.types.VIDEO&&!this.canDirectPlayVideo(e,r))return{result:!1,failedCheck:"canDirectPlayVideo"};const n=t[e.container];if(!n)return c.Z.warn("[MDE] Direct play failed; unsupported container:",e.container),{result:!1,failedCheck:"containerProfile"};const i=a().keys(n);if(i&&i.length){for(let t=0,s=i.length;t<s;t++){const s=i[t],o=n[s];if("mimeType"===s){if(!r.skipCanPlayTypeTest&&!this.canPlayType(y.Z.getElementByType(r.type),o))return c.Z.warn("[MDE] Direct play failed; canPlayType test, %s: %s",s,o),{result:!1,failedCheck:"canPlayType"}}else if("video"===s||"audio"===s){const t=f.Z.get(s),n=(0,m.Z)(e,{streamType:t.id}),i="video"===s?(0,p.Z)(e):(0,d.Z)(e);if(!i){c.Z.warn("[MDE] No stream selected; will not be able to analyze stream codecs");continue}if("audio"===s&&i!==n[0]&&!r.allowMultiTrackAudio)return c.Z.warn("[MDE] Direct play failed; multi-track audio is required"),{result:!1,failedCheck:"allowMultiTrackAudio"};const a=this.analyzeStream(i,o,r);if(!a.result)return{result:!1,failedCheck:a.failedCheck}}else if("photo"===s){const t=this.analyzeStream(a().first(e.Part),o,r);if(!t.result)return{result:!1,failedCheck:t.failedCheck}}else if(!this.validateProfileProperty(s,o,e))return{result:!1,failedCheck:`validateProfileProperty:${s}`}}return{result:!0}}return{result:!0}},canDirectPlayVideo:function(e,t){return t.allowDirectPlay||t.transcodeServer.get("isCloud")?"hls"!==e.protocol||t.hasNativeHLS?"flv"!==e.container||t.hasFlash?!("dash"===e.protocol&&!t.hasDASH&&(c.Z.warn("[MDE] Direct play failed; cannot play DASH"),1)):(c.Z.warn("[MDE] Direct play failed; cannot play FLV"),!1):(c.Z.warn("[MDE] Direct play failed; cannot play HLS"),!1):(c.Z.warn("[MDE] Direct play failed; option is disabled"),!1)},canPlayType:function(e,t){if(e===y.Z.elements.PHOTO)return!0;const r=document.createElement(e);return!(!r.canPlayType||!r.canPlayType(t).replace(/^no$/,""))},canDirectStreamVideo:function(e,t,r,n){return n.directStream||r.transcodeServer.get("isCloud")?this.analyzeStream(e,t,r):(c.Z.warn("[MDE] Direct stream video failed; option is disabled"),{result:!1,failedCheck:"options:directStream"})},canDirectStreamAudio:function(e,t,r,n){return n.directStreamAudio||r.transcodeServer.get("isCloud")?this.analyzeStream(e,t,r):(c.Z.warn("[MDE] Direct stream audio failed; option is disabled"),{result:!1,failedCheck:"options:directStreamAudio"})},analyzeStream:function(e,t,r){const n=t&&t.codecs&&t.codecs[e.codec];for(const i in t){const s=t[i];if("codecs"===i){const t=s[e.codec];if(!t)return{result:!1,failedCheck:`noCodecInProfile:${e.codec}`};const n=this.analyzeStream(e,t,r);if(!n.result)return{result:!1,failedCheck:n.failedCheck}}else if(!(n&&i in n||this.validateProfileProperty(i,s,e)))return{result:!1,failedCheck:`validateProfileProperty:${i}`}}return{result:!0}},validateProfileProperty:function(e,t,r){const n=e.match(/^(min|max)(\w)(\w*)/);let i;if(n){const s="min"===n[1],a="max"===n[1];if(i=r[e=n[2].toLowerCase()+n[3]],null==i&&c.Z.warn("[MDE] Unable to validate %s; re-analyze the media if possible",e),null!=i&&"videoResolution"===e&&(i=g.Z.getHeightFromResolution(i),t=g.Z.getHeightFromResolution(t)),null!=i){if(s&&i<t)return c.Z.warn("[MDE] Invalid profile property; %s: %s < %s",e,i,t),!1;if(a&&i>t)return c.Z.warn("[MDE] Invalid profile property; %s: %s > %s",e,i,t),!1}}else if(i=r[e],null==i&&c.Z.warn("[MDE] Unable to validate %s; re-analyze the media if possible",e),i!==t&&!a().contains(t,i))return c.Z.warn("[MDE] Invalid profile property; %s: %s !== %s",e,i,t),!1;return!0},analyzeSubtitles:function(e,t){const r=t.subtitlesBurnLevel||l.Z.ALWAYS,n=e.codec,i=!!e.key&&void 0===n&&t.transcodeServer.get("isCloud"),s=t.transcodeServer.get("isCloud")&&("vtt"===n||"eia_608"===n);return(0,c.Z)("[MDE] Subtitle codec:",n),(0,c.Z)("[MDE] Burn level:",r),i?((0,c.Z)("[MDE] Using sidecar subtitles %s",e.key),{useSidecarSrtSubtitles:!0}):s?{canDirectPlay:!0}:r===l.Z.NEVER?{useSoftSubtitles:!1}:r===l.Z.ALWAYS?(c.Z.warn("[MDE] Direct play failed; asked to always burn subtitles"),{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles:burnLevelAlways",canDirectStreamVideo:!1}):t.transcodeServer.supports("softSubtitles")?(0,h.Z)(n)?(c.Z.warn("[MDE] Soft subtitles failed; bitmap subtitles"),{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles",canDirectStreamVideo:!1}):/^(ass|ssa)$/i.test(n)&&r===l.Z.AUTO?(c.Z.warn("[MDE] Soft subtitles failed; ASS subtitles"),{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles",canDirectStreamVideo:!1}):/^eia_608$/i.test(n)?(c.Z.warn("[MDE] Soft subtitles failed; Closed captioning"),{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles",canDirectStreamVideo:!1}):t.transcodeServer.supports("softSubtitlesWithDirectPlay")?t.allowDirectStreamVideoWithSoftSubtitles?{useSoftSubtitles:!0}:{useSoftSubtitles:!0,canDirectStreamVideo:!1}:(c.Z.warn("[MDE] Direct play failed; %s subtitles",n),t.allowDirectStreamVideoWithSoftSubtitles?{useSoftSubtitles:!0,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles"}:{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles",canDirectStreamVideo:!1}):(c.Z.warn("[MDE] Direct play failed; server support requires burn subtitles"),c.Z.warn("[MDE] Soft subtitles failed; server version"),{useSoftSubtitles:!1,canDirectPlay:!1,canDirectPlayFailedCheck:"subtitles:softSubtitlesUnsupported",canDirectStreamVideo:!1})},canPlay:function(e,t){const r=this.validateParts(e,t)||this.validateTranscoder(e,t);return r?{canPlay:!1,errorMessage:r}:{canPlay:!0}},validateParts:function(e,t){const r=function(e){const t=[];return Array.isArray(e)||(e=[e]),a().each(e,(e=>{const r=e.Part;r&&a().each(r,(e=>{!1!==e.exists&&!1!==e.accessible||t.push(e)}))})),t}(e.media);if(!r.length)return;c.Z.warn("[MDE] Unable to play; missing parts");const n=a().first(r);return 1===Number(n.exists)?(0,v.Z)("Please check the permissions for this file."):(0,v.Z)("Please check that the file exists and the necessary drive is mounted.")},validateTranscoder:function(e,t){if(e.canDirectPlay)return;const r=t.type,n=r===y.Z.types.MUSIC,i=r===y.Z.types.VIDEO,s=t.transcodeServer,o=s.get("transcoderAudio"),l=s.get("transcoderVideo");let d;if(n||"track"===t.item.get("type")){if(d=(0,v.Z)("This server is not powerful enough to convert audio."),i&&!l)return c.Z.warn("[MDE] Unable to play; server unable to transcode music using video transcoder"),d;if(n&&!o)return c.Z.warn("[MDE] Unable to play; server unable to transcode music using audio transcoder"),d}else if(i){const r=(0,v.Z)("This server is not powerful enough to convert video. You may be able to enable playback by increasing your quality setting."),n=(0,v.Z)("This server is not powerful enough to convert video. Playback qualities are limited because an indirect connection is being used."),i=e.canDirectStreamVideo||!s.get("transcoderVideoRemuxOnly");if(d=(0,v.Z)("This server is not powerful enough to convert video."),!l||!i){if(c.Z.warn("[MDE] Unable to play; server unable to transcode video"),t.quality){if(t.quality.index===g.Z.ORIGINAL)return d;const e=a().clone(t);return e.quality=a().extend({index:g.Z.ORIGINAL},a().pick(t.quality,"attribute")),this.getMediaDecision(e).canDirectPlay?r:"relay"===s.get("maxUploadBitrateReason")?n:d}return r}}},getEffectiveQuality:function(e,t,r){const n=r.quality,i={},s={};if(e.bitrate||c.Z.warn("[MDE] Unable to determine effective quality; re-analyze the media if possible"),r.type===y.Z.types.VIDEO){i.bitrate=e.bitrate,i.videoResolution=g.Z.getHeightFromResolution(e.videoResolution);const a=this.getPrimaryStreamProperty(t,"maxBitrate",r);if(a){const t=(0,p.Z)(e),r=t?t.bitrate:e.bitrate;i.bitrate=Math.min(r,a),s.maxVideoBitrate=a}if(n&&n.videoResolution){const e=g.Z.getResolutionFromSize(n.videoResolution),t=g.Z.getHeightFromResolution(e);i.videoResolution=Math.min(i.videoResolution,t)}}else if(r.type===y.Z.types.MUSIC){i.bitrate=e.bitrate;const n=this.getPrimaryStreamProperty(t,"maxBitrate",r);n&&(i.bitrate=Math.min(e.bitrate,n),s.musicBitrate=n)}return i.transcoderQualityOptions=s,i},getPrimaryStreamProperty:function(e,t,r){const n=e[y.Z.getStreamByType(r.type)];let i=e[t];return null==i&&n&&(i=n[t]),i},getMediaTitle:function(e){let t=e.title||e.videoResolution||e.bitrate||e.container;const r=a().compact([e.container,e.videoCodec,e.audioCodec]),n=(0,p.Z)(e);return n&&r.push(n.level,n.profile),r.length&&(t+=" ("+r.join(", ")+")"),t},getDecisionLogs:function(e){const t={canPlay:e.canPlay,canDirectPlay:e.canDirectPlay},r=e.canDirectStreamVideo;null!=r&&(t.canDirectStreamVideo=r);const n=e.canDirectStreamAudio;null!=n&&(t.canDirectStreamAudio=n);const i=e.useSoftSubtitles;null!=i&&(t.useSoftSubtitles=i);const s=e.bitrate;null==s||a().isNaN(s)||(t.bitrate=s);const o=e.videoResolution;return null==o||a().isNaN(o)||(t.videoResolution=o),t},getBestDecision:function(e){const t=a().last(this.sortDecisions(e));return(0,c.Z)("[MDE] Selected %s to play:",this.getMediaTitle(t.media),this.getDecisionLogs(t)),t},sortDecisions:function(e){return a().chain(e).reverse().sortBy(this.preferHigherBitrate,this).sortBy(this.preferMoreAudioChannels,this).sortBy(this.preferDirectStreamAudio,this).sortBy(this.preferHigherResolution,this).sortBy(this.preferDirectStreamVideo,this).sortBy(this.preferDirectPlayMatchingPreferredProtocol,this).sortBy(this.preferDirectPlay,this).sortBy(this.preferHigherResolutionIfCapable,this).sortBy(this.preferCloudIfRemote,this).sortBy(this.preferDirectPlayOrDirectStreamIfUHD,this).sortBy(this.preferPlayable,this).value()},preferPlayable:function(e){return void 0===e.canPlay?null:e.canPlay},preferDirectPlayOrDirectStreamIfUHD:function(e){const t=e.media.height;if(void 0===t)return null;const r=g.Z.getResolutionFromHeight(t);return!/^\d+k$/i.test(r)||e.canDirectPlay||e.canDirectStreamVideo},preferCloudIfRemote:function(e){const t=e.media.proxyType===o.Z.CLOUD;return e.transcodeServer.get("isPrivateConnection")?!t:t},preferHigherResolutionIfCapable:function(e){const t=e.transcodeServer,r=t.get("transcoderVideo"),n=t.get("transcoderVideoRemuxOnly");return r&&!n&&(e.canDirectPlay||e.canDirectStreamVideo)?this.preferHigherResolution(e):null},preferDirectPlay:function(e){return void 0===e.canDirectPlay?null:e.canDirectPlay},preferDirectPlayMatchingPreferredProtocol:function(e){return e.canDirectPlay&&e.media.protocol&&e.preferredDirectPlayProtocol?e.media.protocol===e.preferredDirectPlayProtocol:null},preferDirectStreamVideo:function(e){return void 0===e.canDirectStreamVideo?null:e.canDirectStreamVideo},preferHigherResolution:function(e){return void 0===e.videoResolution?null:e.videoResolution},preferDirectStreamAudio:function(e){return void 0===e.canDirectStreamAudio?null:e.canDirectStreamAudio},preferMoreAudioChannels:function(e){const t=e.media.audioChannels;return void 0===t?null:t},preferHigherBitrate:function(e){return void 0===e.bitrate?null:e.bitrate}}},54094:(e,t,r)=>{"use strict";r.d(t,{Vq:()=>s,u$:()=>a}),r(32903);var n=r(86832);const i={};function s(e,t){const r=t&&!0,s=i[e];return r&&s&&s.length?((0,n.Z)("[MediaElement] Found existing media element to use. type: %s",e),s.shift()):((0,n.Z)("[MediaElement] Creating new media element. type: %s",e),document.createElement(e))}function a(e){const t=e.nodeName.toLowerCase();(0,n.Z)("[MediaElement] Releasing media element to pool. type: %s",t),i[t]||(i[t]=[]),i[t].push(e)}},37258:(e,t,r)=>{"use strict";function n(e){const t={};return(...r)=>{const n=JSON.stringify(r);if(t.hasOwnProperty(n))return t[n];{const i=e(...r);return t[n]=i,i}}}r.d(t,{Z:()=>n})},35076:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(74226),i=r(47276);function s(e){const{providerIdentifier:t=n.Y3,serverIdentifier:r,key:s}=e;let a=r!==i.X?`server://${r}/${t}`:`provider://${t}`;return s&&(a=`${a}${s}`),a}},51851:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(31461);function i(e){return(0,n.Z)(e)}},31461:(e,t,r)=>{"use strict";function n(e){return e>0?`${e} kbps`:""}r.d(t,{Z:()=>n})},41229:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n=["B","KB","MB","GB","TB"],i=function(e,t=2){if(0===e)return`${(0).toFixed(t)} ${n[0]}`;const r=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return`${(e/Math.pow(1024,r)).toFixed(t)} ${n[r]}`}},86023:(e,t,r)=>{"use strict";function n(e){if(!e)return"";const t=e.indexOf("/");return-1!==t?e.substr(t+1):e}r.d(t,{Z:()=>n})},45924:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e,t){return e?/^\d+$/.test(e)?e+((null==t?void 0:t.length)?t[0]:"p"):e.toUpperCase():""}},38264:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(31461);const i=function(e){return e>=100?function(e){if(!(e>0))return"";let t=e/1e3;return t=t>=.1?Number(t.toFixed(1)):t,t+" Mbps"}(e):(0,n.Z)(e)}},84521:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(56594),i=r(73788),s=r(45924),a=r(38264);const o=function(e){if(e.index===n.Z.CONVERT_AUTOMATICALLY)return(0,i.Z)("Convert Automatically");if(e.index===n.Z.ORIGINAL)return(0,i.Z)("Original");const t=e.bitrate||e.maxVideoBitrate,r=e.videoResolution;if(!t&&!r)return(0,i.Z)("Unknown");const o=[];if(t&&o.push((0,a.Z)(t)),r&&(!t||t>=1e3)){const e=n.Z.getResolutionFromSize(r);o.push((0,s.Z)(e))}const l=o.join(", ");return e.description?l+" "+e.description:l}},8089:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(74226),i=r(47276),s=r(20683);const a=/\/([^/]+)([^$]+)?/,o={};function l(e){if(o[e])return o[e];const{protocol:t,host:r,pathname:l,search:c}=s.Z.parseUri(e),d="provider:"===t,u="server:"===t;if(!d&&!u)throw new Error("Source identifier is lacking provider or server scheme");const p=l.replace(/\/$/,"")||void 0,m=(null==p?void 0:p.match(a))||[],h=p&&"media"===m[1],g=h?n.Y3:m[1],y=d||h?p:m[2],v=y?y.slice(y.lastIndexOf("/")+1):void 0;return o[e]={isServer:u,serverIdentifier:d?i.X:r,providerIdentifier:d?r:g||n.Y3,key:y?`${y}${c}`:"",ratingKey:v||""},o[e]}},97318:(e,t,r)=>{"use strict";function n(e){const t=null==e?void 0:e.startsWith("plex:/");if(!e||!t)return;const r=e.split("/");return r[r.length-1]}r.d(t,{Z:()=>n})},86304:(e,t,r)=>{"use strict";function n(e,t){const r=t?8*Math.round(t/8):0,n=e?8*Math.round(e/8*(9/16)):0;return Math.max(r,n)}r.d(t,{Z:()=>n})},72351:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(6400),i=r(32714),s=r(82772),a=r(6909),o=r(30311),l=r(8946),c=r(5002),d=r(56315);const u={movie:n.l,show:i.W,season:i.W,episode:i.W,artist:s.a,album:a.H,track:a.H,photo:o.L,photoalbum:o.L,clip:l.O,station:c.F,audiobook:d.Z}},2595:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(74226),i=r(8089);function s(e){const{providerIdentifier:t}=(0,i.Z)(e);return n.wB(t,[n.Ll,n.vP])}},52108:(e,t,r)=>{"use strict";r.d(t,{LX:()=>n,jt:()=>i,ZP:()=>s});const n=-1,i=10,s=function(e){return e.userRating===i}},91569:(e,t,r)=>{"use strict";function n(e){if(e)return e.relay?"relayed":e.isLoopback?"localhost":e.isPrivate?"local":"remote"}r.d(t,{Z:()=>n})},52202:(e,t,r)=>{"use strict";function n(e){return e.isCloud?"online":e.isShared?"shared":"owned"}r.d(t,{Z:()=>n})},33606:(e,t,r)=>{"use strict";r.d(t,{yf:()=>o,ZP:()=>l}),r(86832);var n=r(8238);let i;function s(){if(void 0===i){const e=window.location.search.match(new RegExp("performanceReportingHost=([^&=]+)"));i=(e&&e[1]?decodeURIComponent(e[1]):n.Z.performanceReportingHost)||null}return i}var a=r(17197);const o=`${a.o$}-start`,l=function(e=s){const t={};function r(r){return r&&!t[r]&&(t[r]=/^(client|playback):/.test(r)||!!e()),!!r&&t[r]}const n={startPeriod:e=>n.mark(`${e}-start`),endPeriod:(e,t)=>n.measure(e,t||`${e}-start`),mark(e){let t=null;if(r(e)){window.performance.mark(e);const r=window.performance.getEntriesByName(e);t=r[r.length-1]}return t},measure(e,t,n){if(r(e))try{window.performance.measure(e,t,n),t!==o&&window.performance.clearMarks(t);const r=window.performance.getEntriesByName(e);return r[r.length-1]}catch(e){}},measureStartupDuration(e){const t=`${a.o$}-${e}`;if(window.performance.getEntriesByName(t).length)return;const r=n.measure(t,o);return r?r.duration-this.getMeasureDurationTotal(a.PS):void 0},getMeasureDurationTotal:e=>window.performance.getEntriesByName(e).reduce(((e,t)=>e+t.duration),0)};return n}()},48721:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(82075);function i(e){if(null==e)return;const t=Math.round(e/1e3);let r;return r=t>=3600?300:60,(0,n.Z)(t,r)}},66336:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(45191),i=r(86832);const s=function(){const e=Date.now(),t=(0,n.DB)("sessionStats");i.Z.debug("[Metrics] Updating session last interaction time"),t.save("lastInteractionTime",e)}},55438:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(13469),i=r.n(n);r(2739);const s=/\s+/,a=function(e,t,r,n){if(!r)return!0;if("object"==typeof r){for(const i in r)e[t].apply(e,[i,r[i]].concat(n));return!1}if(s.test(r)){const i=r.split(s);for(let r=0,s=i.length;r<s;r++)e[t].apply(e,[i[r]].concat(n));return!1}return!0},o=function(e,t){let r,n=-1;const i=e.length,s=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s,a);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,s,a,o);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t)}},l={on:function(e,t,r){return a(this,"on",e,[t,r])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:r,ctx:r||this}),this):this},once:function(e,t,r){if(!a(this,"once",e,[t,r])||!t)return this;const n=this,s=i().once((function(){n.off(e,s),t.apply(this,arguments)}));return s._callback=t,this.on(e,s,r)},off:function(e,t,r){let n,s,o,l,c,d,u;if(!this._events||!a(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;const p=e?[e]:i().keys(this._events);for(l=0,c=p.length;l<c;l++)if(e=p[l],o=this._events[e],o){if(this._events[e]=n=[],t||r)for(d=0,u=o.length;d<u;d++)s=o[d],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&n.push(s);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;const t=[].slice.call(arguments,1);if(!a(this,"trigger",e,t))return this;const r=this._events[e],n=this._events.all;return r&&o(r,t),n&&o(n,arguments),this},stopListening:function(e,t,r){let n=this._listeningTo;if(!n)return this;const s=!t&&!r;r||"object"!=typeof t||(r=this),e&&((n={})[e._listenId]=e);for(const a in n)(e=n[a]).off(t,r,this),(s||i().isEmpty(e._events))&&delete this._listeningTo[a];return this},hasListener:function(e){const t=this._events&&this._events[e];return Array.isArray(t)&&t.length>0}};i().each({listenTo:"on",listenToOnce:"once"},(function(e,t){l[t]=function(t,r,n){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=i().uniqueId("l"))]=t,n||"object"!=typeof r||(n=this),t[e](r,n,this),this}})),l.bind=l.on,l.unbind=l.off;const c=l},2739:(e,t,r)=>{"use strict";r(32903)},35523:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(13469),i=r.n(n);const s=function(e){return e=parseInt(e,10),i().isNaN(e)?"":(e<10?"0":"")+e}},82075:(e,t,r)=>{"use strict";function n(e,t){let r=e/t;return r=Math.round(r),r*=t,r}r.d(t,{Z:()=>n})},84301:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const n=e=>Function.prototype.toString.call(e),i=n(Object);function s(e){if(!e||"object"!=typeof e)return!1;const t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;const r=t.constructor;return"function"==typeof r&&r instanceof r&&n(r)===i}},10644:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(13469),i=r.n(n),s=r(86832);function a(e,t){Array.isArray(t)?i().each(t,e):e(t)}const o={parseXML:r(3927).Z,replaceXMLElementNames:function(e,t,r){Array.isArray(t)||(t=[t]);const n=t.join("|"),i=new RegExp("<("+n+")","g"),s=new RegExp("</("+n+")>","g");return(e=e.replace(i,"<"+r+' elementName="$1"')).replace(s,"</"+r+">")},parseEncodedString:function(e,t){e&&a((function(t){if(e.hasOwnProperty(t)){const r=e[t];if(null==r)e[t]="";else try{e[t]=decodeURIComponent(r)}catch(e){}}}),t)},parseInteger:function(e,t){e&&a((function(t){if(e.hasOwnProperty(t)){const r=e[t];e[t]=null==r||""===r?0:parseInt(r,10)}}),t)},parseFloat:function(e,t){e&&a((function(t){if(e.hasOwnProperty(t)){const r=e[t];e[t]=null===r||""===r?0:parseFloat(r)}}),t)},parseBoolean:function(e,t){e&&a((function(t){if(e.hasOwnProperty(t)){const r=e[t];e[t]=1===Number(r)||"true"===r}}),t)},parseArray:function(e,t){e&&a((function(t){if(e.hasOwnProperty(t)){const r=e[t];Array.isArray(r)||(e[t]=[r])}else e[t]=[]}),t)},parseQueryString:function(e,t,r){e&&(r||(r="&"),a((function(t){if(!e.hasOwnProperty(t))return;let n=e[t];var a;i().isObject(n)||(i().isString(n)?(n=n.trim().replace(/^(\?|#)/,""),e[t]=n?(a=n.split(r),i().reduce(a,(function(e,t){const r=t.split("=");let n=r[0],i=r[1];try{n=decodeURIComponent(n),i=void 0===i?null:decodeURIComponent(i),e.hasOwnProperty(n)?Array.isArray(e[n])?e[n].push(i):e[n]=[e[n],i]:e[n]=i}catch(e){s.Z.warn("Unable to decode query string at "+n)}return e}),{})):{}):e[t]={})}),t))}}},28802:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return e?Array.isArray(e)?e:[e]:[]}},39527:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return 1===Number(e)||"true"===e}},40085:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return null==e||""===e?0:parseInt(e,10)}},78154:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(86832),i=r(54021);const s=function(e,t={}){try{return JSON.parse(e)}catch(r){const s=(0,i.Z)(e)?e.substring(0,50):"no response";return n.Z.warn(`[Parser] Unable to parse JSON: ${r.message} (${s})`),t}}},1618:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(86832),i=r(84301),s=r(54021);const a=function(e,t){if(t||(t={}),(0,i.Z)(e))return e;if(!(0,s.Z)(e))return{};if(!(e=e.trim().replace(/^(\?|#)/,"")))return{};const r=t.separators&&t.separators.join("")||t.separator||"&",a=new RegExp(`[${r}]+`);return e.split(a).reduce(((e,t)=>{let[r,i]=t.split("=");try{r=decodeURIComponent(r),i=void 0===i?null:decodeURIComponent(i),e.hasOwnProperty(r)?Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i}catch(e){n.Z.warn(`[Parser] Unable to decode query string at ${r}`)}return e}),{})}},97212:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return null==e?"":String(e)}},3927:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(27098),i=r.n(n),s=r(86832);let a;const o=function(e){const t={};let r;if(!e)return s.Z.warn("[Parser] Empty XML source"),t;a=a||new(i())({attributePrefix:"",emptyNodeForm:{},ignoreRoot:!0});try{r=e&&a.xml2js(e)}catch(e){s.Z.warn("[Parser] Unable to parse XML: "+e.message)}return r||t}},49688:(e,t,r)=>{"use strict";r.d(t,{l:()=>s,Z:()=>a});var n=r(85209);let i;const s=["Video","Track","Photo","Playlist"],a=function(e,t){const r=t&&t.includeDirectories,a=function(e,t,r){Array.isArray(t)||(t=[t]);const n=t.join("|"),i=new RegExp(`<(${n})`,"g"),s=new RegExp(`</(${n})>`,"g");return e.replace(i,`<${r} elementName="$1"`).replace(s,`</${r}>`)}(e,r?["Directory",...s]:s,"Metadata");return r?a:function(e){i||(i=(0,n.getAllMetadataTypes)().map((e=>e.typeString)).join("|"));const t=new RegExp(`<Directory([^>]*?)type="(${i})"([\\s\\S]*?)</Directory>`,"gm"),r=new RegExp(`<Directory([^>]*?)type="(${i})"([\\s\\S]*?)/>`,"gm");return e.replace(t,'<Metadata$1type="$2" elementName="Directory"$3</Metadata>').replace(r,'<Metadata$1type="$2" elementName="Directory"$3/>')}(a)}},68366:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return e?"1":"0"}},96630:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e={},t={}){return function(e,t){const r=Object.keys(e);return t.orFields&&t.andFields&&r.sort(((e,r)=>t.orFields.includes(e)&&t.andFields.includes(r)?-1:t.andFields.includes(e)&&t.orFields.includes(r)?1:0)),r}(e,t).reduce(((r,n,i)=>{let s=t.separator||"&";return 0===i?s="":t.orFields&&t.orFields.includes(n)?s="|":t.andFields&&t.andFields.includes(n)&&(s="&"),r+`${s}${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`}),"")}},3615:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(13469),i=r.n(n),s=r(28802),a=r(39527),o=r(86832);var l=r(40085),c=r(78154);var d=r(1618),u=r(97212),p=r(3927),m=r(68366);var h=r(96630);const g={parseType:function(e,t,r){const n=this.getByType("parse",e,this._parseTypeMap);return n?n(t,r):t},stringifyType:function(e,t,r){if(i().isString(t))return t;if(null==t)return"";const n=this.getByType("stringify",e,this._stringifyTypeMap);return n?n(t,r):t},getByType:function(e,t,r){if(r&&i().has(r,t))return r[t];const n=e+(t.charAt(0).toUpperCase()+t.slice(1));return i().has(this,n)?(r[t]=this[n],this[n]):void 0},parseBoolean:a.Z,stringifyBoolean:m.Z,parseInteger:l.Z,parseFloat:function(e){return null==e||""===e?0:window.parseFloat(e)},parseString:u.Z,parseEncodedString:function(e){if(null==e)return"";try{return decodeURIComponent(e)}catch(t){return o.Z.warn("[Parser] Unable to parse encoded string"),e}},parseArray:s.Z,parseList:function(e){return e?Array.isArray(e)?e:e.split(","):[]},stringifyList:function(e){return e.join(",")},parseQueryString:d.Z,stringifyQueryString:h.Z,parseJSON:c.Z,parseXML:p.Z,reset:function(){this._parseTypeMap={json:this.parseJSON,xml:this.parseXML},this._stringifyTypeMap={}}};g.reset();const y=g},91763:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(13469),i=r.n(n),s=r(86832),a=r(19529);const o={ORIGINAL:-1,CONVERT_AUTOMATICALLY:-2,qualities:{},getQualityByIndex:function(e){if(e===this.CONVERT_AUTOMATICALLY)return{index:this.CONVERT_AUTOMATICALLY};if(e<0)return{index:this.ORIGINAL};const t={index:e};return i().each(this.qualities,(function(r,n){t[n]=i().result(this.qualities,n)[e]}),this),t},getQualityCount:function(){const e=i().first(i().keys(this.qualities));return i().result(this.qualities,e).length},getQualityAttribute:function(e){const t=(0,a.Z)(e,e.server.get("isPrivateConnection"));return"video"!==this.type?this.type+"!"+t:t},getSyncQualityAttribute:function(){return"syncQuality!"+this.type},getCurrentQuality:function(e,t,r){const n=this.getQualityAttribute(e);let a=t.get(n);return a>=this.getQualityCount()&&(s.Z.warn("Quality index "+a+" is out of bounds"),a=i().result(t,"defaults")[n],r({[n]:a})),i().extend(this.getQualityByIndex(a),{attribute:n})},getAvailableQualities:function(e){e||(e={});const t=e.lowestQualityIndex;let r=e.highestQualityIndex;const n=e.comparator,i=[];r===this.ORIGINAL&&(r=void 0);for(let e=0,s=this.getQualityCount();e<s;e++)if(!(t&&e<t)){if(r&&e>r)return i;if(n&&n.call(this,e))return i;i.push(this.getQualityByIndex(e))}return i},getResolutionFromSize:function(e){const t=e.split("x"),r=parseInt(t[1],10);return this.getResolutionFromHeight(r)},getResolutionFromHeight:function(e){return e>2560?"8k":e>1100?"4k":e>720?"1080":e>576?"720":e>480?"576":e>360?"480":"sd"},getHeightFromResolution:function(e){switch(e){case"8k":return 5120;case"4k":return 2560;case"1080":return 1080;case"720":return 720;case"576":return 576;case"480":return 480;case"sd":default:return 360}},getNearestIndex:function(e,t){if(!t)return this.ORIGINAL;let r=e.indexOf(t);if(r<0){r=0;for(let n=0,i=e.length;n<i&&!(e[n]>t);n++)r=n}return r}}},47336:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(68702);const i=function(e){return e.repeatOne?n.ry:e.repeatAll?n.QN:n.Hn}},19529:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(48488);function i(e,t){return(0,n.Z)(e,t)?"localQuality":"remoteQuality"}},48488:(e,t,r)=>{"use strict";function n(e,t){const r=e.toJSON?e.toJSON():e,{isExtra:n,guid:i}=r;return!(n&&!/^file:\/\//.test(i))&&t}r.d(t,{Z:()=>n})},56594:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(13469),i=r.n(n),s=r(86304),a=r(91763);const o=i().extend({},a.Z,{type:"video",qualities:{bitrate:[64,96,208,320,720,1500,2e3,3e3,4e3,8e3,1e4,12e3,2e4],videoResolution:["220x128","220x128","284x160","420x240","576x320","720x480","1280x720","1280x720","1280x720","1920x1080","1920x1080","1920x1080","1920x1080"],videoQuality:[10,20,30,30,40,60,60,75,100,60,75,90,100]},getAvailableQualitiesFor(e,t,r){if(!e||!t)return[];if(Array.isArray(e)||(e=[e]),0===e.length)return[];const n=t.get("transcoderVideo"),a=t.get("transcoderVideoRemuxOnly"),o=this.getMaximumResolution(e);if(!n||a||!o)return[];const l=t.get("maxUploadBitrate"),c=i().extend({},r,{comparator:function(e){if(l&&this.qualities.bitrate[e]>l)return!0;const t=this.qualities.videoResolution[e].split("x");return(0,s.Z)(t[0],t[1])>o}});return this.getAvailableQualities(c)},getBestAvailableQuality:function(e,t){return 0===t.length?o.ORIGINAL:t.find((t=>t.index===e.index))?e.index:i().last(t).index},getNearestIndexToBitrate:function(e){return this.getNearestIndex(this.qualities.bitrate,e)},getMinimumQuality:function(e,t){return(e===o.ORIGINAL?Number.MAX_VALUE:e)<(t===o.ORIGINAL?Number.MAX_VALUE:t)?e:t},getMaximumQuality:function(e,t){return this.getMinimumQuality(e,t)===e?t:e},getMaximumResolution:function(e){return e.reduce((function(e,t){if(!t.width&&!t.height)return e;const r=(0,s.Z)(t.width,t.height);return null===e||r>e?r:e}),null)},isExplicitQuality:function(e){return e!==o.ORIGINAL&&e!==o.CONVERT_AUTOMATICALLY}}),l=o},79400:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(13469),i=r.n(n),s=r(94818);function a(e,t){const r=i().invert(e);return i().reduce(e,((e,n)=>(e[n]=t[r[n]],e)),{})}const o={playing:"playing",paused:"paused",stopped:"paused",error:"paused",buffering:"playing"},l=new(s.Z.extend({types:{VIDEO:"video",MUSIC:"music",PHOTO:"photo"},elements:{VIDEO:"video",MUSIC:"audio",PHOTO:"photo"},streams:{VIDEO:"video",MUSIC:"audio",PHOTO:"photo"},states:{STOPPED:"stopped",PAUSED:"paused",PLAYING:"playing",BUFFERING:"buffering",ERROR:"error"},slideshowStates:{PLAYING:"playing",PAUSED:"paused"},castStates:{ERROR:"IDLE",STOPPED:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING",BUFFERING:"BUFFERING"},mediaStates:{LOADING:"LOADING",BUFFERING:"BUFFERING",READY:"READY",ERROR:"ERROR"},initialize(){this.typeByElement=a(this.elements,this.types),this.elementByType=a(this.types,this.elements),this.typeByStream=a(this.streams,this.types),this.streamByType=a(this.types,this.streams),this.statebyCastState=a(this.castStates,this.states),this.castStateByState=a(this.states,this.castStates)},getTypeByElement(e){return this.typeByElement[e]},getElementByType(e){return this.elementByType[e]},getTypeByStream(e){return this.typeByStream[e]},getStreamByType(e){return this.streamByType[e]},getStateByCastState(e){return this.statebyCastState[e]},getCastStateByState(e){return this.castStateByState[e]},getSlideshowStateByState:e=>o[e]}))},58837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});const n="placeholder-standard",i="placeholder-square",s="placeholder-widescreen",a={movie:n,show:n,season:n,episode:s,artist:i,album:i,track:i,photo:i,photoalbum:i,clip:s,playlist:i,playlistFolder:i,channel:i,channelDirectory:i,folder:"placeholder-folder",friend:"placeholder-friend",device:i,poster:n,art:s,banner:s,collection:n}},79708:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={sizes:{movie:"portrait",show:"portrait",season:"portrait",episode:"landscape",artist:"square",album:"square",track:"square",photo:"square",photoalbum:"square",clip:"landscape",playlist:"square",playlistFolder:"square",channel:"square",channelDirectory:"square",folder:"portrait",friend:"square",poster:"portrait",art:"landscape",banner:"banner",collection:"portrait"},ratios:{portrait:1/1.5,square:1,landscape:16/9,banner:5.2},getRatioByType:function(e){return this.ratios[this.sizes[e]]},getPosterWidthUsingRatio:function(e,t){return Math.round(this.ratios[e]*t)},getPosterHeightUsingRatio:function(e,t){return Math.round(this.ratios[e]&t)},getPosterWidth:function(e,t){return Math.round(t*this.getRatioByType(e))},getPosterHeight:function(e,t){return Math.round(t/this.getRatioByType(e))}}},52084:(e,t,r)=>{"use strict";r.d(t,{gn:()=>i,P_:()=>s.Z,G6:()=>a.Z}),r(33053),r(82777);var n=r(14796);function i(e=n.Z){return"ios"===e.platformID}var s=r(9358),a=r(70593)},33053:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(14796);function i(e=n.Z){return"chrome"===e.id}},82777:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(14796);function i(e=n.Z){return"edge"===e.id}},9358:(e,t,r)=>{"use strict";function n(){return!1}r.d(t,{Z:()=>n})},70593:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(14796);function i(e=n.Z){return"safari"===e.id}},37243:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(9358);function i(){return!(0,n.Z)()}},25755:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(19755),i=r.n(n);function s(e){const t=i().Deferred();return"object"==typeof e&&"then"in e?e.then(t.resolve,t.resolve):t.resolve(e),t.promise()}},9524:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(19755),i=r.n(n);const s=function(e){const t=i().Deferred();return e.then(t.resolve,t.reject,t.notify),{promise:t.promise(),cancel:function(){t.reject({isCanceled:!0})}}}},49178:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(19755),i=r.n(n);const s=function(e,t){const r=i().Deferred(),n=(new Date).getTime()+t;let s;function a(){const e=(new Date).getTime(),t=Math.max(n-e,0);window.setTimeout(s,t)}return e.then(((...e)=>{s=()=>r.resolve(...e)}),((...e)=>{s=()=>r.reject(...e)})),e.then(a,a),r.promise()}},69272:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(19755),i=r.n(n),s=r(25755);const a=function(e){return i().when(...e.map(s.Z))}},97025:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(39169),i=r(86418),s=r(74226),a=r(73788),o=r(9148);const l=r(5518).Z.extend({name:"LegacyLibraryProviderModel",defaults(){const e=this.server,t=e.get("isFullServer"),r=e.get("isFullOwnedServer"),l=[{type:i.Z.CONTENT,key:"/library/sections"},{type:i.Z.MATCH,key:"/library/matches"},{type:i.Z.METADATA,key:"/library/metadata"}];return t&&l.push({type:i.Z.SEARCH,key:"/hubs/search"},{type:i.Z.PLAY_QUEUE,key:"/playQueues"},{type:i.Z.PLAYLIST,key:"/playlists"},{type:i.Z.TIMELINE,key:"/:/timeline"},{type:i.Z.ACTIONS,actions:[{id:n.lq,key:"/:/scrobble",reverseKey:"/:/unscrobble"},{id:n.zw,key:"/:/rate"}]}),r&&l.push({type:i.Z.MANAGE}),{identifier:s.Y3,title:(0,a.Z)("Library"),types:["video","audio","photo"],protocols:r?["stream","download"]:["stream"],features:new o.Z(l,{parse:!0,server:e})}}});function c(e,t){!t.get("isCloud")&&e.forEach((e=>{e.set({isPending:!1,isPopulated:!0})})),t.get("isCloud")||e.get(s.Y3)||e.add(new l({isPending:!1,isPopulated:!0},{server:t}))}},63621:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(85209),i=r(20683);function s(e,t){const r=["/library/sections",e,"all"];return t===n.PHOTO?i.Z.join(r):i.Z.join(r,{type:n.getMetadataType(t).id})}},26894:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(47276);function i(e,t){return e===n.X?`provider://${t}`:`server://${e}/${t}`}},56431:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(74226);const i=function(e,t){const r=t||e;return n.wB(r,n.Ll)?n.Ll:r}},1124:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(29150),i=r(74226),s=r(70777);const a=function({protocol:e,protocolCapabilities:t=[],providerIdentifier:r,userFeaturesByUUID:a,isWatchTogether:o=!1}){if(e!==n.l&&e!==n.D)return!1;if(o)return!1;const l=i.wB(r,i.Y3),c=i.wB(r,[i.Ll,i.vP]),d=i.wB(r,i.xF),u=i.wB(r,i.IS),p=i.wB(r,[i.uk]),m=e===n.l||a[s.JO],h=e===n.l||t.includes("provider-playback");return!!(l||c&&m||d&&h||u&&h||p&&h)}},24048:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(71371),l=r(45191),c=r(90095),d=r(80011),u=r(94818),p=r(92527),m=r(86832),h=r(55438),g=r(95069);const y=u.Z.extend({mixins:h.Z,url(){const e=this.server.get("activeConnection");if(!e)return;const t=e.id.replace(/^http/,"ws");return this.server.resolveUrl("/:/websockets/notifications",{connection:new c.Z({uri:t}),appendToken:!0,appendHeaders:this.appendHeaders})},initialize(e){a().bindAll(this,"onOpen","onClose","onError","onMessage","getMessageTypes"),this.server=e.server,this.appendHeaders=e.appendHeaders||!1},open(){this.socket&&this.close(),this._deferred=i().Deferred();const e=a().result(this,"url");return e?(this.socket=new window.WebSocket(e),this.socket.onopen=this.onOpen,this.socket.onclose=this.onClose,this.socket.onerror=this.onError,this.socket.onmessage=this.onMessage,this._deferred.promise()):this._deferred.reject().promise()},close(){this.socket&&(this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close(),this.socket=null,this._deferred&&"pending"===this._deferred.state()&&this._deferred.reject())},testConnection(){if(!this.server.get("connected"))return;const e=this.server.get("desktop").get("update");e&&e.get("state")===p.INSTALLING&&this.server.set("connected",null),this.server.trigger("error:connection",this.server)},onOpen(e){const t=l.DB("appStore"),r=this.server.entityID();r&&t.dispatch((0,d.f4)({serverEntityID:r,event:e})),this.server.trigger("socket:websocket",{opened:!0}),this.trigger("open",this.server,e),this._deferred.resolve(this.server,e)},onClose(e){this.close();const t=l.DB("appStore"),r=this.server.entityID();r&&t.dispatch((0,d.LW)({serverEntityID:r,event:e})),this.server.trigger("socket:websocket",{closed:!0}),this.trigger("close",this.server,e),this._deferred.reject(this.server,e),this.testConnection()},onError(e){this.close(),this.server.trigger("socket:websocket",{error:!0}),this.trigger("error",this.server,e),this._deferred.reject(this.server,e),this.testConnection()},onMessage(e){let t;try{t=JSON.parse(e.data)}catch(t){return void m.Z.warn("[Connections] Error formatting message:\n%s",e.data)}const r=!!t._elementType,n=r?a().first(t._children):t.NotificationContainer;if(n){const e=this[r?t.type:n.type];let i;i=r?Array.isArray(n)?n:[n]:function(e,t){return(-1===t.indexOf(e.type)?[]:function(e){switch(e.type){case g.eS:return e.Setting;case g.jN:return e.TimelineEntry;case g.Q_:return e.StatusNotification;case g.ad:return e.ProgressNotification;case g.Z$:return e.PlaySessionStateNotification;case g.cc:return e.BackgroundGeneratorStateNotification;case g.RN:return e.VersionStateNotification;case g.ax:return e.BackgroundProcessingQueueEventNotification;case g.a8:case g.VL:case g.Mu:return e.TranscodeSession;case g.TD:return e.AutoUpdateNotification;case g.lY:return e.ReachabilityNotification;case g.yV:return e.AccountUpdateNotification;case g.gk:return e.ActivityNotification;case g.u0:return e.MediaGrabberDeviceNotification;case g.cK:return e.MediaProviderNotification;case g.sU:return e.MediaProviderContentNotification;case g.sY:return e.LogSentNotification;case g.wL:return e.MediaProviderSubscriptionNotification;case g.iW:return e.ClientDecisionRequestEventNotification}}(e))||[]}(n,this.getMessageTypes()),i.forEach((t=>{try{this.trigger("message",t)}catch(e){m.Z.error("[Connections] Error when triggering",t,e),o.Tb(e,{extra:{message:t}})}if(a().isFunction(e))try{e.call(this,t)}catch(e){m.Z.error("[Connections] Error when handling",t,e),o.Tb(e,{extra:{message:t}})}}))}}})},95069:(e,t,r)=>{"use strict";r.d(t,{yV:()=>n,gk:()=>i,cc:()=>s,ax:()=>a,u0:()=>o,sY:()=>l,Z$:()=>c,eS:()=>d,ad:()=>u,cK:()=>p,sU:()=>m,wL:()=>h,lY:()=>g,Q_:()=>y,jN:()=>v,Mu:()=>f,a8:()=>b,VL:()=>Z,TD:()=>S,RN:()=>P,iW:()=>I,Ej:()=>E,EI:()=>w,Sz:()=>C});const n="account",i="activity",s="backgroundGeneratorState",a="backgroundProcessingQueue",o="grabber.device",l="log",c="playing",d="preference",u="progress",p="provider.change",m="provider.content.change",h="provider.subscription.change",g="reachability",y="status",v="timeline",f="transcodeSession.end",b="transcodeSession.start",Z="transcodeSession.update",S="update.statechange",P="versionState",I="clientDecision",E="notifyAccountChange",w="notifyWatchTogetherExpire",C="notifyWatchTogetherInvite"},10559:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(13469),i=r.n(n);function s(e){const t=i().clone(e);return void 0!==t.last?(t.end=t.last+1,t.size=t.end-t.start):void 0!==t.size?(t.end=t.start+t.size,t.last=t.end-1):void 0!==t.end&&(t.last=t.end-1,t.size=t.end-t.start),t}function a(e,t){return i().filter(i().map(e,s),(function(e){return t?e.size>=0:e.size>0}))}const o={augment:s,difference:function(e,t,r){return e=s(e),t=s(t),a([{start:e.start,last:Math.min(e.last,t.start-1)},{start:Math.max(e.start,t.end),last:e.last}],r)},union:function(e,t,r){if(e=s(e),t=s(t),e.start>t.start){const r=e;e=t,t=r}const n=[e];return t.start<=e.end?n[0].last=Math.max(t.last,e.last):n.push(t),a(n,r)},degap:function(e,t){let r=s(e);return(t=s(t)).size?(r.start>t.end&&(r={start:t.end,end:r.end}),r.end<t.start&&(r={start:r.start,end:t.start}),s(r)):r},each:function(e,t,r){e=s(e);let n=Math.min(e.start,e.end);const i=Math.max(e.start,e.end);for(;n<=i;n++)t.call(r,n)},roundByPage:function(e,t){return e=s(e),s({start:Math.floor(e.start/t)*t,end:Math.ceil(e.end/t)*t})}}},56346:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(97762),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e,t={}){return(0,i.renderToStaticMarkup)(n.createElement(e,((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({},t)))}},12559:(e,t,r)=>{"use strict";r.d(t,{Ts:()=>n,zL:()=>i,sC:()=>s,t6:()=>a,y0:()=>o,QX:()=>l,Ij:()=>c,Gh:()=>d,k9:()=>u,TS:()=>p,ZJ:()=>m,K5:()=>h,ST:()=>g,AA:()=>y,_V:()=>v,nJ:()=>f,RG:()=>b,JW:()=>Z,l1:()=>S,EW:()=>P,iJ:()=>I});const n="general.db.backup",i="general.bundle.clean",s="grabber.grab",a="grabber.assimilate",o="library.delete",l="library.update.section",c="library.refresh.items",d="library.update.item.metadata",u="media.download",p="media.generate.bif",m="media.generate.chapter.thumbs",h="media.generate.intros",g="media.generate.loudness",y="media.generate.music.analysis",v="media.offline.transcode",f="general.db.optimize",b="provider.device.channelscan",Z="provider.epg.load",S="provider.subscriptions.process",P="provider.subscription.refresh",I="subtitle.download"},22493:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(45191),i=r(86022),s=r(74813);function a(e,t=!1){const r=t||"Plex Media Server"===e.get("product"),a=new i.ZP({machineIdentifier:e.id,friendlyName:e.get("name"),version:r?e.get("productVersion"):void 0,isShared:!e.get("owned"),accessToken:e.get("accessToken"),sourceTitle:e.get("sourceTitle"),publicAddressMatches:e.get("publicAddressMatches"),httpsRequired:e.get("httpsRequired"),platform:e.get("platform"),platformVersion:e.get("platformVersion"),presence:e.get("presence"),home:e.get("home"),serverClass:r?void 0:i.ZP.serverClasses.SECONDARY,createdAt:e.get("createdAt"),lastSeenAt:e.get("lastSeenAt"),ownerId:e.get("ownerId")},{parent:n.DB("appModel")});return(0,s.Z)(a,e),a}},11057:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(22169);function i(){const[,e,t]=(0,n.Y)().match(/^([^:]+):\/\/(.*)$/)||[];return{scheme:e,address:t}}},72221:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(54562),i=r(94450);function s(e){return!!e.get("shortVersion")&&(0,i.Z)(e.get("shortVersion"),n.Z.mediaProvidersServerRoot)}},74813:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(13469),i=r.n(n);function s(e,t){t.get("connections").each((r=>{const n=[{id:t.server.id}],s=i().extend(r.toJSON(),{sources:n});e.addConnection(s)}))}},19211:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(68939),i=r(73788),s=r(88604);function a(e){const{sourceType:t,sourceServer:r,sourceProvider:a,sourceDirectory:o}=e,l={key:(0,n.Z)(t,r.machineIdentifier,a.identifier,o.id),sourceType:t,serverEntityID:r.entityID,machineIdentifier:r.machineIdentifier,providerEntityID:a.entityID,providerIdentifier:a.identifier,providerMetricsIdentifier:a.metricsIdentifier,directoryID:o.id,directoryIcon:o.icon,title:o.title,serverFriendlyName:r.friendlyName,serverSourceTitle:r.sourceTitle,providerSourceTitle:a.sourceTitle,isBeta:t===s.Xp,isLocal:r.isConnected&&r.activeConnection&&r.activeConnection.isPrivate,isUnavailable:r.isUnavailable,isOutOfDate:r.isOutOfDate,isUnclaimedServer:r.isConnected&&!r.isClaimed&&!r.isCloud,isFullOwnedServer:r.isFullOwnedServer,isProviderReady:a.isPopulated||null!=a.error||r.isUnavailable||r.isUnauthorized};return r.isCloud?l.isCloud=!0:t===s.Hs&&(l.title=(0,i.Z)("Live TV & DVR")),l}},3637:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){const{key:t,sourceType:r,machineIdentifier:n,providerIdentifier:i,directoryID:s,directoryIcon:a,title:o,serverFriendlyName:l,serverSourceTitle:c,providerSourceTitle:d,isCloud:u,isFullOwnedServer:p}=e;return{key:t,sourceType:r,machineIdentifier:n,providerIdentifier:i,directoryID:s,directoryIcon:a,title:o,serverFriendlyName:l,serverSourceTitle:c,providerSourceTitle:d,isCloud:u,isFullOwnedServer:p}}},68939:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(6742);function i(e,t,r,i){return(0,n.Z)("source",e,t,r,i)}},82650:(e,t,r)=>{"use strict";function n(e,t,...r){if(!t)return;const n=[];n.push(e);for(let e=0,t=r.length;e<t;e++){const t=r[e];t&&n.push(t)}return n.push(t),n.join("--")}r.d(t,{Z:()=>n})},35387:(e,t,r)=>{"use strict";r.d(t,{cN:()=>n,MC:()=>i,Y3:()=>s,km:()=>a,xR:()=>o,YI:()=>l,vO:()=>c,Tl:()=>d,$4:()=>u,TY:()=>p,PK:()=>m,RP:()=>h,PI:()=>g,gO:()=>y,PC:()=>v,r8:()=>f});const n="servers",i="providers",s="libraries",a="hubs",o="users",l="resources",c="friends",d="homeUsers",u="metadataLists",p="metadataItems",m="mediaSubscriptions",h="liveTVSessions",g="playQueueItems",y="playlistItems",v="transcodeJobs",f="watchTogetherRooms"},89107:(e,t,r)=>{"use strict";r.d(t,{l:()=>i,Z:()=>s});var n=r(86832);function i(e,t,r){const n=e.get("entities").get(t);if(n){const e=n.get(r);if(e)return e.get("model")}}function s(e,t,r){const s=i(e,t,r);return s||n.Z.warn('An entity does not exist with the type "%s" and id "%s"',t,r),s}},76389:(e,t,r)=>{"use strict";r.d(t,{VX:()=>l,bg:()=>c,SW:()=>d,$w:()=>u,Y7:()=>p,js:()=>m,lp:()=>h,lK:()=>g,Ij:()=>y,$R:()=>v,tz:()=>f,xS:()=>b,_s:()=>Z,VZ:()=>S,xl:()=>P,Tp:()=>I,KC:()=>E,bT:()=>w,q3:()=>C});var n=r(74226),i=r(47276),s=r(82650),a=r(35387),o=r(89107);function l(e){return e.get("user")}function c(e){return e.get("user").get("desktop")}function d(e,{serverEntityID:t}){return(0,o.Z)(e,a.cN,t)}function u(e,{serverEntityID:t}){return(0,o.l)(e,a.cN,t)}function p(e,t){const r=d(e,t);return r&&r.get("desktop")}function m(e,{providerEntityID:t}){return(0,o.Z)(e,a.MC,t)}function h(e,{providerEntityID:t}){return(0,o.l)(e,a.MC,t)}function g(e,{metadataListEntityID:t}){return(0,o.Z)(e,a.$4,t)}function y(e,{metadataListEntityID:t}){return(0,o.l)(e,a.$4,t)}function v(e,{metadataItemEntityID:t}){return(0,o.Z)(e,a.TY,t)}function f(e,{metadataItemEntityID:t}){return(0,o.l)(e,a.TY,t)}function b(e,{mediaSubscriptionEntityID:t}){return(0,o.Z)(e,a.PK,t)}function Z(e,{liveTVSessionEntityID:t}){return(0,o.Z)(e,a.RP,t)}function S(e,{liveTVSessionEntityID:t}){return(0,o.l)(e,a.RP,t)}function P(e,{playQueueItemEntityID:t}){return(0,o.Z)(e,a.PI,t)}function I(e,{playlistItemEntityID:t}){return(0,o.Z)(e,a.gO,t)}function E(e,{friendEntityID:t}){return(0,o.Z)(e,a.vO,t)}function w(e,{watchTogetherRoomEntityID:t}){return(0,o.Z)(e,a.r8,t)}function C(e){const t=(0,s.Z)(a.cN,i.X),r=(0,s.Z)(a.MC,n.IS,t);return(0,o.Z)(e,a.MC,r)}},78151:(e,t,r)=>{"use strict";function n(e,t){return e.get("ui").get(`${t}Player`)}function i(e,t){const r=e.get("ui").get("audioVideoPlayer").get("playQueue"),n=e.get("ui").get("photoPlayer").get("playQueue");return r&&r.get("playQueueID")===t?r:n&&n.get("playQueueID")===t?n:void 0}function s(e,t){const r=e.get("playQueue");if(!r)return;const n=r.get("playQueueItems");return t<0||t>=n.length?void 0:n.at(t)}r.d(t,{F_:()=>n,RZ:()=>i,bG:()=>s})},87442:(e,t,r)=>{"use strict";r.d(t,{c9:()=>y,GF:()=>v});var n=r(32903),i=r(86832);const s=[];let a,o,l,c=!1,d=!1,u=1e3/60;function p(){a&&(a=window.clearTimeout(a))}function m(){o&&(o=window.clearTimeout(o))}function h(){const e=l;l=null,m(),e&&e()}function g(){p(),m();const e=window.performance.now();let t;for(d=!0;s.length&&(!t||t-e<16.666666666666668);)s.pop()(),t=window.performance.now();d=!1,s.length?(i.Z.warn("[State] Unable to process all updates within budget; %s update(s) remaining",s.length),a=window.setTimeout(g,u)):l&&(o=window.setTimeout(h,u))}function y(e){for(p(),m(),d=!0,c=!0;s.length;)s.pop()();if(e)try{e()}catch(e){(0,n.Z)(!1,e.name+": "+e.message)}l&&h(),d=!1,c=!1}function v(e,t){if(t.isStateTreeRoot)return l=e,void(d||o||(o=window.setTimeout(h,u)));c?e():(m(),s[0]!==e&&s.unshift(e),d||a||(a=window.setTimeout(g,u)))}},21168:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return e?e.toUpperCase():""}},64591:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}},56036:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}},53359:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(3615),i=r(73788);const s=function(e){return e&&n.Z.parseBoolean(e)?(0,i.Z)("Yes"):(0,i.Z)("No")}},21860:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(73788);const i=function(e){if(!e||!e.length)return;const t=e.length;return 1===t?e[0]:2===t?(0,n.Z)("{1} and {2}",e[0],e[1]):3===t?(0,n.Z)("{1}, {2}, and {3}",e[0],e[1],e[2]):(0,n.Z)("{1}, {2}, and {3} others",e[0],e[1],e.length-2)}},54021:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return"[object String]"===window.toString.call(e)}},6545:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(74945);function i(e=24){const t=(0,n.Z)(e,0,1024);let r="";for(;r.length<t;)r+=Math.random().toString(36).substring(2,t-r.length+2);return r}},69664:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(13469),i=r.n(n);const s=function(e){const t=/(\d+\.){2,3}\d+/.exec(e);return i().first(t)||e}},81855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(20683),i=r(7798);const s=function(e,t){return(0,i.Z)(n.Z.getLastSegment(e||""),t)}},7798:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e,t,r){if(!e)return"";if(e.length>t){const n=t-3-(r=r||Math.floor((t-3)/2));return e.substr(0,r)+"..."+e.substr(e.length-n)}return e}},61689:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(74226);function i(e){const t=e.split("/");if(""===t.shift()){const e=t[0],r=t[t.length-1];let i;return n.wB(e,n.Ll)?i=e:r&&(i=r),i}return e}},73788:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i,U:()=>s});var n=r(17414);function i(e,t,...r){return n.Z.t(e,t,...r)}function s(e,t,...r){return n.Z.tEscape(e,t,...r)}},82217:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(13469),i=r.n(n),s=r(36009),a=r(86832);const o=function(e,t){return t?e.get("Media").findIndex((e=>e.id===t)):0},l=function(e,t){const r=e.Part;return i().indexOf(r,i().findWhere(r,{key:t}))};var c=r(20683);const d={extensions:{dash:".mpd",hls:".m3u8",http:""},logParams:function(e,t,r){(0,a.Z)("[Transcoder] %s (%s) options:",e,t,r)},serializeParams:function(e,t){let r,n={},s={};const a=/^X-Plex/;return i().each(e,(function(e,t){a.test(t)?s[t]=e:n[t]=e})),n=c.Z.stringifyParams(n),s=c.Z.stringifyParams(s),r=n&&s?n+"&"+s:n||s,r},image:function(e,t,r){if(!t)return"";const n=r.fallbackServer;let s,a=!1;if(n&&n.get("isConnected")&&(s=n.get("isFullServer")?n:null),s)if(e.get("cloud"))a=!0;else if(!e.get("isFullServer")){const t=!e.get("activeConnection").get("isPrivate"),r=s.get("activeConnection").get("isPrivate");a=t||r}const o=a?s:e,l=o.id===e.id,c={url:e.resolveUrl(t,{useRelativeUrl:l,appendToken:!0}),width:r.width&&Math.round(parseFloat(r.width)),height:r.height&&Math.round(parseFloat(r.height))};r.minSize&&(c.minSize=1),r.format&&(c.format=r.format),r.quality&&(c.quality=r.quality),r.filters&&i().each(r.filters,(function(e,t){void 0!==e&&(c[t]=e)}));const d="/photo/:/transcode?"+this.serializeParams(c,o);return o.resolveUrl(d,{appendToken:!0})},music:function(e,t,r,n){n||(n="start");const s=i().first(t.get("Media"));if(!s)return;const a=i().first(s.Part);if(!a)return;let o,l;e.supports("universalMusicTranscoder")?(o=i().extend({hasMDE:1,path:e.resolveUrl(t.get("key"),{useRelativeUrl:!0}),mediaIndex:0,partIndex:0},r),l="/music/:/transcode/universal/"+n):(o={identifier:t.get("identifier"),url:e.resolveUrl(a.key,{useRelativeUrl:!0}),format:"mp3",audioCodec:"libmp3lame",audioBitrate:320,audioSamples:44100},l="/music/:/transcode/generic.mp3"),this.logParams("Music",n,o),o=i().extend(o,e.getHeaders());const c=this.extensions[o.protocol];return"start"===n&&c&&(l+=c),e.resolveUrl(l+"?"+this.serializeParams(o,e))},video:function(e,t,r,n,a,c){a||(a={}),c||(c="start");const d=e.entityID()===t.get("serverEntityID"),u=e.get("activeConnection").get("isPrivate");let p=i().extend({hasMDE:1,path:e.resolveUrl(t.get("key"),{useRelativeUrl:d,appendToken:!d}),mediaIndex:o(t,r.id),partIndex:l(r,n.key),protocol:"hls",fastSeek:1,directPlay:0,directStream:1,subtitleSize:100,audioBoost:s.KH,location:u?"lan":"wan"},a);this.logParams("Video",c,p),p=i().extend(p,e.getHeaders());const m=this.extensions[p.protocol];let h="/video/:/transcode/universal/"+c;return"start"===c&&m&&(h+=m),e.resolveUrl(h+"?"+this.serializeParams(p,e))}}},84140:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(13469),i=r.n(n),s=r(86832);function a(e){const t=i().clone(e);return t.hasOwnProperty("title")?(t.title=i().result(t,"title"),t.hasOwnProperty("shortTitle")&&(t.shortTitle=i().result(t,"shortTitle")),t.hasOwnProperty("plural")&&(t.plural=i().result(t,"plural")),t):t}function o(e,t){const r={};return e.forEach((e=>{r[e]=t.reduceRight(((t,r)=>{const n=r[e];return null!=n&&(t[n]=r),t}),{})})),{contains:function(e){for(const t in r)if(r[t][e])return!0;return!1},get:function(e){for(const t in r){const n=r[t][e];if(n)return a(n)}s.Z.warn(`No type was found for ${e}`)},getAll:function(){return t.map(a)}}}},96281:(e,t,r)=>{"use strict";r.d(t,{R6:()=>s,ZP:()=>a});var n=r(73788),i=r(84140);const s="trailer",a=(0,i.Z)(["id","typeString"],[{id:1,typeString:s,title:()=>(0,n.Z)("Trailer")},{id:2,typeString:"deletedScene",title:()=>(0,n.Z)("Deleted Scene")},{id:3,typeString:"interview",title:()=>(0,n.Z)("Interview")},{id:4,typeString:"musicVideo",title:()=>(0,n.Z)("Music Video")},{id:5,typeString:"behindTheScenes",title:()=>(0,n.Z)("Behind the Scenes")},{id:6,typeString:"scene",title:()=>(0,n.Z)("Scene")},{id:7,typeString:"liveMusicVideo",title:()=>(0,n.Z)("Live Music Video")},{id:8,typeString:"lyricMusicVideo",title:()=>(0,n.Z)("Lyric Music Video")},{id:9,typeString:"concert",title:()=>(0,n.Z)("Concert")},{id:10,typeString:"featurette",title:()=>(0,n.Z)("Featurette")},{id:11,typeString:"short",title:()=>(0,n.Z)("Short")},{id:12,typeString:"other",title:()=>(0,n.Z)("Other")}])},39582:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(88604),i=r(79167),s=r(74226),a=r(93927);const o=function(e,t,r){const{key:o,types:l={}}=e,c=Array.isArray(t.protocols)?t.protocols.includes(a.K):t.protocols[a.K],d=o===n.Hs,u=o===n.Xp;if(c)return d;if(s.wB(t.identifier,s.Xp))return u;if(d||u)return!1;const p=r.agent===i.Hn;if(o===n.FM&&!p||o===n.MB&&p)return!1;const{type:m,subtype:h}=l;return o===n.FM&&r.type===m||r.type===m&&(null==h&&null==r.subtype||null!=h&&r.subtype===h)};function l(e,t){if(!e||!t||"hubs"===t.id)return;const r=(0,n.vK)();for(let n=0,i=r.length;n<i;n++){const i=r[n];if(o(i,e,t))return i}return r.find((e=>e.key===n.lz))}},33494:(e,t,r)=>{"use strict";r.d(t,{VJ:()=>n,vT:()=>i});const n="spotlight",i=["shelf","grid","list","banner","hero"]},54834:(e,t,r)=>{"use strict";r.d(t,{Hn:()=>i,pX:()=>s,j0:()=>a,pV:()=>o});var n=r(84140);const i="none",s="video",a="audio",o="photo",l=(0,n.Z)(["id","typeString"],[{id:0,typeString:i},{id:1,typeString:s},{id:2,typeString:a},{id:3,typeString:o}]);l.get,l.getAll},26316:(e,t,r)=>{"use strict";r.d(t,{n:()=>n,v:()=>i});const n="musicVideo",i="clip"},85209:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MOVIE:()=>a,SHOW:()=>o,SEASON:()=>l,EPISODE:()=>c,ARTIST:()=>d,ALBUM:()=>u,TRACK:()=>p,CLIP:()=>m,TRAILER:()=>h,COMIC:()=>g,PERSON:()=>y,PHOTO:()=>v,PHOTO_ALBUM:()=>f,AUDIO:()=>b,VIDEO:()=>Z,PLAYLIST:()=>S,PLAYLIST_FOLDER:()=>P,STATION:()=>I,COLLECTION:()=>E,MIXED:()=>w,FOLDER:()=>C,CHANNEL:()=>M,AUTHOR:()=>D,AUDIOBOOK:()=>O,CHAPTER:()=>T,containsMetadataType:()=>A,getMetadataType:()=>k,getAllMetadataTypes:()=>N,getChildType:()=>R,getLeafType:()=>L,getParentType:()=>j,getRootType:()=>V,getRelatedTypes:()=>U,isParentType:()=>F,isDirectoryType:()=>B});var n=r(73788),i=r(84140),s=r(54834);const a="movie",o="show",l="season",c="episode",d="artist",u="album",p="track",m="clip",h="trailer",g="comic",y="person",v="photo",f="photoalbum",b="audio",Z="video",S="playlist",P="playlistFolder",I="station",E="collection",w="mixed",C="folder",M="channel",D="author",O="audiobook",T="chapter",x=(0,i.Z)(["id","typeString"],[{id:1,typeString:a,title:()=>(0,n.Z)("Movie"),plural:()=>(0,n.Z)("Movies"),mediaType:s.pX},{id:2,typeString:o,title:()=>(0,n.Z)("Show"),plural:()=>(0,n.Z)("Shows"),mediaType:s.Hn,child:l},{id:3,typeString:l,title:()=>(0,n.Z)("Season"),plural:()=>(0,n.Z)("Seasons"),mediaType:s.Hn,parent:o,child:c},{id:4,typeString:c,title:()=>(0,n.Z)("Episode"),plural:()=>(0,n.Z)("Episodes"),mediaType:s.pX,parent:l},{id:5,typeString:h,title:()=>(0,n.Z)("Trailer"),plural:()=>(0,n.Z)("Trailers"),mediaType:s.pX},{id:6,typeString:g,title:()=>(0,n.Z)("Comic"),plural:()=>(0,n.Z)("Comics"),mediaType:s.pV},{id:7,typeString:y,title:()=>(0,n.Z)("Person"),plural:()=>(0,n.Z)("People"),mediaType:s.Hn},{id:8,typeString:d,title:()=>(0,n.Z)("Artist"),plural:()=>(0,n.Z)("Artists"),mediaType:s.Hn,child:u},{id:9,typeString:u,title:()=>(0,n.Z)("Album"),plural:()=>(0,n.Z)("Albums"),mediaType:s.Hn,parent:d,child:p},{id:10,typeString:p,title:()=>(0,n.Z)("Track"),plural:()=>(0,n.Z)("Tracks"),mediaType:s.j0,parent:u},{id:11,typeString:"picture",title:()=>(0,n.Z)("Picture"),plural:()=>(0,n.Z)("Pictures"),mediaType:s.pV},{id:12,typeString:m,title:()=>(0,n.Z)("Clip"),plural:()=>(0,n.Z)("Clips"),mediaType:s.pX},{id:13,typeString:v,title:()=>(0,n.Z)("Photo"),plural:()=>(0,n.Z)("Photos"),mediaType:s.pV,parent:f},{id:14,typeString:f,title:()=>(0,n.Z)("Photo Album"),plural:()=>(0,n.Z)("Photo Albums"),mediaType:s.Hn,child:v},{id:15,typeString:S,title:()=>(0,n.Z)("Playlist"),plural:()=>(0,n.Z)("Playlists"),mediaType:s.Hn,parent:f},{id:16,typeString:P,title:()=>(0,n.Z)("Playlist"),plural:()=>(0,n.Z)("Playlists"),mediaType:s.Hn,child:S},{id:18,typeString:E,title:()=>(0,n.Z)("Collection"),plural:()=>(0,n.Z)("Collections"),mediaType:s.Hn},{id:20,typeString:D,title:()=>"Author",plural:()=>"Authors",mediaType:s.Hn},{id:21,typeString:O,title:()=>"Audiobook",plural:()=>"Audiobooks",mediaType:s.j0},{id:22,typeString:T,title:()=>"Chapter",plural:()=>"Chapters",mediaType:s.j0,parent:O}]),A=x.contains,k=x.get,N=x.getAll;function R(e){const t=x.get(e);if(t&&t.child)return x.get(t.child)}function L(e){const t=x.get(e);if(t){const e=t.child;return null==e?t:L(e)}}function j(e){const t=x.get(e);if(t)return x.get(t.parent)}function V(e){const t=x.get(e);if(t){const e=t.parent;return null==e?t:V(e)}}function U(e,t){if(!t){const t=V(e);return t?U(t.id,[]):[]}const r=x.get(e),n=R(e),i=[...t,r];return n?U(n.id,i):i}function F(e){return!!R(e)}function B(e){const t=x.get(e);return!!t&&t.mediaType===s.Hn}},57674:(e,t,r)=>{"use strict";r.d(t,{j0:()=>n,pX:()=>i,pV:()=>s});const n="audio",i="video",s="photo"},43523:(e,t,r)=>{"use strict";r.d(t,{MB:()=>l,TV:()=>c,xF:()=>d,n1:()=>u,FM:()=>p,S7:()=>m,ZP:()=>h});var n=r(79167),i=r(58809),s=r(73788),a=r(84140),o=r(85209);const l="movies",c="tv",d="music",u="photos",p="videos",m="author",h=(0,a.Z)(["key","typeID","typeString","rootTypeString"],[{key:l,typeID:"1",typeString:o.MOVIE,rootTypeString:o.MOVIE,title:()=>(0,s.Z)("Movies"),shortTitle:()=>(0,s.Z)("Movies"),defaultLanguage:"en",defaultAgents:[n.WX,n.HN],defaultScanners:[i.Lx,i.wz],mutual:{agent:n.WX,scanner:i.Lx}},{key:c,typeID:"2",typeString:o.SHOW,rootTypeString:o.SHOW,title:()=>(0,s.Z)("TV Shows"),shortTitle:()=>(0,s.Z)("Shows"),defaultLanguage:"en",defaultAgents:[n.Zb,n.NV],defaultScanners:[i.QQ,i.VA],mutual:{agent:n.Zb,scanner:i.QQ}},{key:d,typeID:"8",typeString:o.ARTIST,rootTypeString:o.ARTIST,title:()=>(0,s.Z)("Music"),shortTitle:()=>(0,s.Z)("Music"),defaultLanguage:"en",defaultAgents:[n.Ut,n.E4],defaultScanners:[i.c3,i.OQ],exclusiveAgents:[n.zR],exclusiveScanners:[i.N6],mutual:{agent:n.Ut,scanner:i.c3}},{key:u,typeID:"13",typeString:o.PHOTO,rootTypeString:o.PHOTO_ALBUM,title:()=>(0,s.Z)("Photos"),shortTitle:()=>(0,s.Z)("Photos"),defaultLanguage:"en",defaultAgents:[n.Hn],defaultScanners:[i.RZ],mutual:{}},{key:p,typeID:"1",typeString:o.MOVIE,rootTypeString:o.CLIP,title:()=>(0,s.Z)("Other Videos"),shortTitle:()=>(0,s.Z)("Videos"),defaultLanguage:"xn",defaultAgents:[n.Hn],defaultScanners:[i.S5],mutual:{}},{key:m,typeID:"20",typeString:o.AUTHOR,rootTypeString:o.AUTHOR,title:()=>"Audiobooks",shortTitle:()=>"Audiobooks",defaultLanguage:"en",defaultAgents:[n.iW],defaultScanners:[i.uN],mutual:{}}])},24220:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(18655),i=r(81042);function s(e){return{type:n.Z.boolean,save(){return this.has(e)}}}function a(e){return{type:n.Z.queryString,separators:["|","&"],orFields:[i.ZO,i.GP],andFields:[i.Jm,i.Bi],save(){return this.has(e)}}}const o={allowTuners:{type:n.Z.integer,save(){return this.has("allowTuners")}},allowSync:s("allowSync"),allowChannels:s("allowChannels"),filterMovies:a("filterMovies"),filterTelevision:a("filterTelevision"),filterMusic:a("filterMusic"),filterPhotos:a("filterPhotos")}},88604:(e,t,r)=>{"use strict";r.d(t,{lz:()=>o,Xp:()=>l,Hs:()=>c,MB:()=>d,xF:()=>u,n1:()=>p,ls:()=>m,TV:()=>h,FM:()=>g,Ap:()=>y,s6:()=>v,vK:()=>b});var n=r(73788),i=r(84140),s=r(26316),a=r(85209);const o="unknown",l="discover",c="dvr",d="movies",u="music",p="photos",m="playlists",h="tv",g="videos",y="shared",v="audiobook",f=(0,i.Z)(["key"],[{key:o,title:()=>(0,n.Z)("Unknown"),types:{}},{key:m,types:{type:a.PLAYLIST}},{key:d,types:{type:a.MOVIE}},{key:h,types:{type:a.SHOW}},{key:u,types:{type:a.ARTIST}},{key:p,types:{type:a.PHOTO}},{key:g,types:{type:a.MOVIE,subtype:s.v}},{key:"episode",types:{type:a.EPISODE}},{key:c,title:()=>(0,n.Z)("Live TV & DVR")},{key:y,types:{type:a.MIXED}},{key:l},{key:v,types:{type:a.AUTHOR}}]),b=(f.get,f.getAll)},14427:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(73788);const i=(0,r(84140).Z)(["id","typeString"],[{id:1,typeString:"video",key:"videoStreamID",title:()=>(0,n.Z)("Video")},{id:2,typeString:"audio",key:"audioStreamID",title:()=>(0,n.Z)("Audio")},{id:3,typeString:"subtitles",key:"subtitleStreamID",title:()=>(0,n.Z)("Subtitles")},{id:4,typeString:"lyrics",key:"lyricStreamID",title:()=>(0,n.Z)("Lyrics")}])},51026:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(73788);const i=(0,r(84140).Z)(["id","typeString"],[{id:0,typeString:"tag",title:()=>(0,n.Z)("Tag")},{id:1,typeString:"genre",title:()=>(0,n.Z)("Genre")},{id:2,typeString:"collection",title:()=>(0,n.Z)("Collection")},{id:3,typeString:"bookmark",title:()=>(0,n.Z)("Bookmark")},{id:4,typeString:"director",title:()=>(0,n.Z)("Director"),isPerson:!0},{id:5,typeString:"writer",title:()=>(0,n.Z)("Writer"),isPerson:!0},{id:6,typeString:"actor",title:()=>(0,n.Z)("Actor"),isPerson:!0},{id:7,typeString:"producer",title:()=>(0,n.Z)("Producer"),isPerson:!0},{id:8,typeString:"country",title:()=>(0,n.Z)("Country")},{id:9,typeString:"chapter",title:()=>(0,n.Z)("Chapter")},{id:10,typeString:"review",title:()=>(0,n.Z)("Review")},{id:11,typeString:"label",title:()=>(0,n.Z)("Label")},{id:42,typeString:"versionBackgroundProcessingTarget",title:()=>(0,n.Z)("Version Background Processing Target")},{id:200,typeString:"make",title:()=>(0,n.Z)("Make")},{id:201,typeString:"model",title:()=>(0,n.Z)("Model")},{id:202,typeString:"aperture",title:()=>(0,n.Z)("Aperture")},{id:203,typeString:"exposure",title:()=>(0,n.Z)("Exposure")},{id:204,typeString:"iso",title:()=>(0,n.Z)("ISO")},{id:205,typeString:"lens",title:()=>(0,n.Z)("Lens")},{id:206,typeString:"device",title:()=>(0,n.Z)("Device")},{id:207,typeString:"autotag",title:()=>(0,n.Z)("Autotag")},{id:400,typeString:"place",title:()=>(0,n.Z)("Place")},{id:300,typeString:"mood",title:()=>(0,n.Z)("Mood")},{id:301,typeString:"bpm",title:()=>(0,n.Z)("BPM")},{id:302,typeString:"composer",title:()=>(0,n.Z)("Composer")},{id:303,typeString:"featuring",title:()=>(0,n.Z)("Featuring")},{id:304,typeString:"trackArtist",title:()=>(0,n.Z)("Track Artist")},{id:305,typeString:"similarArtist",title:()=>(0,n.Z)("Similar Artist")},{id:306,typeString:"concert",title:()=>(0,n.Z)("Concert")}])},88993:(e,t,r)=>{"use strict";r.d(t,{q1:()=>l,At:()=>c,lv:()=>d,KF:()=>u,iX:()=>p});const n=/^([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/,i=/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/i,s=/[a-f0-9]{1,4}/gi;function a(e){const t=n.exec(e);if(null==t)return;const[,...r]=t;return{octets:r.map((e=>parseInt(e,10)))}}function o(e){if(!i.test(e))return;const t=e.split("::"),r=t[0].match(s),n={parts:[]};if(null!=r){if(r.length>8)return;n.parts=r.map((e=>parseInt(e,16)))}if(t.length>1){const e=t[1].match(s),r=(null==e?void 0:e.map((e=>parseInt(e,16))))||[],i=8-n.parts.length-r.length;if(i<0||8===i)return;Array.from({length:i}).forEach((()=>{n.parts.push(0)})),n.parts.push(...r)}return n}function l(e){const t=a(e);return!!(null==t?void 0:t.octets.every((e=>e>=0&&e<=255)))}function c(e){return l(e)||function(e){const t=o(e);return!!(null==t?void 0:t.parts.every((e=>e>=0&&e<=65535)))}(e)}function d(e){return"localhost"===e||function(e){const t=a(e);return!(!t||127!==t.octets[0]&&!t.octets.every((e=>0===e)))}(e)||function(e){const t=o(e);return!!t&&(t.parts.slice(0,7).every((e=>0===e))&&1===t.parts[t.parts.length-1])}(e)}function u(e){return function(e){const t=a(e);if(t){if(10===t.octets[0])return!0;if(172===t.octets[0]&&t.octets[1]>=16&&t.octets[1]<=31)return!0;if(192===t.octets[0]&&168===t.octets[1])return!0}return!1}(e)||function(e){const t=o(e);return!!(t&&t.parts[0]>=64512&&t.parts[0]<=65023)}(e)}function p(e){return e&&l(e)?e.split(".").slice(0,-1).join("."):""}},57799:(e,t,r)=>{"use strict";function n(e){return/^\w+:\/\//.test(e)}r.d(t,{Z:()=>n})},20683:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(80129),i=r.n(n),s=r(54998),a=r.n(s),o=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e};const m=/^([^?#]*)(?:\?([^#]*))?(#.*)?/,h=/([^?]*)\??(.*)()/;function g(e,t){return i().stringify(e,p({arrayFormat:"repeat"},t))}function y(e,t){return i().parse(e,t)}function v(e,t){const r=a().parse(e),n=r.protocol?`${r.protocol}:`:"",i=r.port?String(r.port):"",s=r.hostname?i&&`${r.hostname}:${i}`||r.hostname:"",o=r.hostname||"",l=r.fragment?`#${r.fragment}`:"",c=e,d=n&&s?`${n}//${s}`:"",u=r.path||"",p=r.query?`?${r.query}`:"",m=r.query?y(r.query,t):{};return{isAbsolute:/^[\w:]*\/\//.test(e),hash:l,host:s,hostname:o,href:c,origin:d,params:m,pathname:u,port:i,protocol:n,search:p}}const f={getLastSegment:function(e){if(e){const t=/[^/\\]+$/.exec(e);return(null==t?void 0:t[0])||e}return""},stringifyParams:g,parseParams:y,parseUrl:function(e){const t=p({},v(e)),r=/file/.test(t.protocol);return t.protocol||(t.protocol=window.location.protocol),r||(t.host||(t.host=window.location.host),t.hostname||(t.hostname=window.location.hostname),t.port||(t.port=window.location.port)),t.origin||(t.origin=r?`${t.protocol}//`:`${t.protocol}//${t.host}`),t},parseUri:v,join:function(e,t,r){var n;"string"==typeof e&&(e=[e]),e=e.filter((e=>e));const i=(null==r?void 0:r.recognizeHash)?m:h,s=e.reduce(((e,t)=>{const r=function(e){return String(e).replace(/^\/|\/$/g,"")}(t).match(i);if(!r)return e;const[,n,s,a]=r;return n&&(e.path=e.path?e.path+"/"+n:n),s&&(e.params=e.params?e.params+"&"+s:s),a&&(e.hash=a),e}),{path:"",params:"",hash:""});let a;if(null==r?void 0:r.parseParams)a=g(Object.assign(y(s.params),"string"==typeof t?y(t):t));else if((s.params||t)&&(s.params&&(a=s.params),t)){const e="string"==typeof t?t:g(t,null==r?void 0:r.stringifyOptions);e&&(a=a?`${a}&${e}`:e)}const o=e.length&&"/"===(null==(n=e[0])?void 0:n.charAt(0))?"/":"",l=s.path;return o+l+((null==r?void 0:r.trailingSlash)&&l.length&&"/"!==l[l.length-1]?"/":"")+(a?"?"+a:"")+s.hash}}},25353:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(56036);const i=function(e,t){const r=new RegExp(`(\\?|&)(${(0,n.Z)(t)}=[^\\?&]+(?:[\\?&]?))`,"g");return e.replace(r,((e,t)=>t)).replace(/(\?|&)$/,"")}},63329:(e,t,r)=>{"use strict";function n(e,t){let[,r]=e.match(/(^[^#]+)?/);return r=r||"",`${r}${t}`}r.d(t,{Z:()=>n})},54264:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){const[,t,r=""]=e.match(/(^[^#]+)(?:#(.*$))?/),[,n,i=""]=t.match(/(^[^?]+)(\?.*$)?/),[,s,a=""]=r.match(/(^[^?]*)(\?.*$)?/);return{base:n,searchParams:i,hashPath:s,hashParams:a}}},44999:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(45191),i=r(8238);function s(e){return!e.get("experienceSettings").get("isRemoteSchemaVersionNewer")&&i.Z.allowSyncSettings&&(0,n.DB)("settingFinder").find("shouldSyncSettings")}},13734:(e,t,r)=>{"use strict";function n(e,t){return`${e}::${t}`}r.d(t,{Z:()=>n})},41856:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(23954);const i=function(e){return(0,n.Z)(e,(e=>e.uuid),(()=>!0))}},89896:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var n=r(70777);const i=["free"];function s(e,t){const r=t&&t.requires;if(!r)return!0;if(r===n.sy)return!e.anonymous;const s=e.services[r];return!!s&&!i.includes(s.subscriptionType)}},63252:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(){return window!==window.top}},73703:(e,t,r)=>{"use strict";function n(e){return{status:e.status,statusText:e.statusText,readyState:e.readyState,responseText:e.responseText}}r.d(t,{Z:()=>n})},36675:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(45191),l=r(94818),c=r(86832),d=r(20683);const u=new(l.Z.extend({initialize(){a().bindAll(this,"onAjaxSend","onAjaxComplete"),this.requests=[],this.byId={}},startListening(){const e=i()(document);e.on("ajaxSend",this.onAjaxSend),e.on("ajaxComplete",this.onAjaxComplete)},stopListening(){const e=i()(document);e.off("ajaxSend",this.onAjaxSend),e.off("ajaxComplete",this.onAjaxComplete)},abortAll(e){for(let t=this.requests.length-1;t>-1;t--){const r=this.requests[t];null!=e&&e!==r.settings.scope||this.abort(r)}},abort(e){const t=a().isString(e)?this.byId[e]:e;t&&(t.xhr.aborting=!0,t.xhr.abort(),this.remove(t))},store(e,t){const r=a().uniqueId("r");e.rid=r;const n={xhr:e,settings:t};return this.requests.push(n),this.byId[r]=n,n},remove(e){const t=a().indexOf(this.requests,e);t>-1&&this.requests.splice(t,1),this.byId.hasOwnProperty(e.xhr.rid)&&delete this.byId[e.xhr.rid]},onAjaxSend(e,t,r){if(r.skipCorsWithRedirect)return;const n=this.store(t,r);t.always((()=>{t.aborting||this.remove(n)}))},onAjaxComplete(e,t,r){const n=401===t.status;if(t.aborting||!n)return;const i=d.Z.parseUrl(r.url);if(n&&("/log"===i.pathname||"/"===i.pathname||"/media/providers"===i.pathname))return;const s=(0,o.DB)("appModel").get("servers"),l=s?s.find((e=>{const t=e.get("activeConnection"),n=t&&t.get("isConnected"),i=a().result(t,"url");return!!n&&r.url.substring(0,i.length)===i})):null;l&&((0,c.Z)('[Connections] Active connection to "%s" lost authorization',l.get("debugName")),l.trigger("error:connection",l))}}))},30622:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(45191),l=r(26051),c=r(8238),d=r(17680),u=r(9711),p=r(20573),m=r(82217);const h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",g=l.Z.ItemView.extend({tagName:"img",background:!1,backgroundSize:"",cache:new d.Z,initialize:function(e){e||(e={}),a().bindAll(this,"onLoad","onError","loadImage"),this.url=e.url,this.server=e.server,this.placeholder=e.placeholder,this.placeholderClass=e.placeholderClass,this.modelAttribute=e.modelAttribute,this.ignoreAttributeChanges=e.ignoreAttributeChanges,this.exposeUrl=e.exposeUrl,this.resetOnError=e.resetOnError,this.emptyImage=e.explicitEmpty?"url("+h+")":"",e.background&&(this.background=e.background),e.backgroundSize&&(this.backgroundSize=e.backgroundSize),e.format&&(this.format=e.format),e.quality&&(this.quality=e.quality),a().isFunction(e.getUrl)&&(this.getUrl=e.getUrl),this.allowBaseImageBlobs=c.Z.allowBaseImageBlobs,this.allowBaseImagePreloading=c.Z.allowBaseImagePreloading,this.setup(e)},setup:function(e){this.setDimensions(e),this.setFilters(e.filters),this.setModel(e.model,e)},setDimensions:function(e){e.width&&e.height&&(this.transcode=!0,this.width=e.width,this.height=e.height)},setFilters:function(e){this.filters=e||void 0},hasFilters:function(){return void 0!==this.filters},setModel:function(e,t){t||(t={}),this.stopListening(),this.src=null,this.model=e,e&&(this.server||(this.server=e.server),t.url||this.modelAttribute&&(this.url=this.getUrl(e.get(this.modelAttribute)),this.ignoreAttributeChanges||this.listenTo(e,"change:"+this.modelAttribute,this.onChange)))},setElement:function(e){l.Z.ItemView.prototype.setElement.apply(this,arguments),this.render({force:!0})},getUrl:function(e){return e},getTranscodeUrl:function(e){if(!this.server||!this.transcode)return e;const t=o.DB("appModel"),r=(0,u.Z)();return m.Z.image(this.server,e,{fallbackServer:t.get("primaryServer"),width:this.width*r,height:this.height*r,minSize:this.minSize,filters:this.filters,format:this.format,quality:this.quality})},render:function(e){return e||(e={}),this.url||this.placeholder||this.placeholderClass?this.src?(e.force&&this.showImage(this.src),this):(this.isPlaceholderRendered&&this.url||this.showPlaceholder(),this.url&&this.load(this.url,this.transcode).then(this.onLoad,this.onError,this.onLoad),this):this},showPlaceholder:function(){if(this.isPlaceholderRendered=!0,this.$el.removeClass("loaded"),this.placeholderClass)return this.$el.addClass(this.placeholderClass),void this.$el.css("background-image",this.emptyImage);this.placeholder?this.showImage(this.placeholder):this.clearImage()},clearImage:function(){this.background?this.$el.css("background-image",this.emptyImage):this.showImage(h)},showImage:function(e){this.background?this.showBackgroundImage(e):this.$el.attr("src",e).removeAttr("width").removeAttr("height")},showBackgroundImage:function(e){this.$el.css("background-image","url("+e+")")},load:function(e){if(!e)return i().Deferred().reject().promise();if(e=this.getTranscodeUrl(e),this.exposeUrl&&this.$el.attr("data-image-url",e),this.allowBaseImageBlobs&&p.Z.hasBlob&&p.Z.hasObjectUrl){let t=this.loadBlob(e);return t=t.then(this.loadImage,null,this.loadImage),t}return this.allowBaseImagePreloading?this.loadImage(e):i().Deferred().resolve(e).promise()},loadBlob:function(e){const t=i().Deferred();this.cancel();const r=this.cache.getBlobUrl(e);if(r)return t.resolve(r),t.promise();{const r=this.cache.getPlaceholder(e);r&&t.notify(r,!0)}const n=new window.XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",this.xhr=n,n.onreadystatechange=a().bind((function(){if(4===n.readyState)if(n.onreadystatechange=null,this.xhr=null,200===n.status){const r=new window.Blob([n.response],{type:"image/jpeg"}),i=window.URL.createObjectURL(r);this.cache.store({url:e,blobUrl:i}),t.resolve(i)}else t.reject()}),this),n.send(),t.promise()},loadImage:function(e,t){const r=i().Deferred(),n=new window.Image;return n.onload=function(){n.onload=n.onabort=n.onerror=null,t?r.notify(e,n.width,n.height):r.resolve(e,n.width,n.height)},n.onabort=n.onerror=function(){n.onload=n.onabort=n.onerror=null,r.reject()},n.src=e,r.promise()},cancel:function(){this.xhr&&(this.xhr.onreadystatechange=null,this.xhr.abort(),this.xhr=null)},onLoad:function(e,t,r){if(this.backgroundSize){const e=t&&t>this.width||r&&r>this.height?this.backgroundSize:"auto";this.$el[0].style.backgroundSize=e}this.src=e,this.placeholderClass&&this.$el.removeClass(this.placeholderClass),this.$el.addClass("loaded"),this.showImage(e),this.trigger("load",e,t,r)},onError:function(){this.resetOnError&&this.showPlaceholder(),this.trigger("error")},onClose:function(){this.cancel()},onChange:function(e,t){if(t=this.getUrl(t),this.url===t)return this;this.url=t,this.src=null,this.render()}})},75365:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(58837),i=r(79708),s=r(30622);const a=s.Z.extend({background:!0,setup(e){this.minSize=!0,this.type=e.type,this.modelAttribute=e.modelAttribute||"thumb",!1!==e.placeholder&&(this.model&&this.model.get("isFolder")?this.placeholderClass=n.Z.folder:e.placeholderClass||(this.placeholderClass=n.Z[this.type])),s.Z.prototype.setup.apply(this,arguments)},setDimensions(e){e.width?e.height=i.Z.getPosterHeight(this.type,e.width):e.height&&(e.width=i.Z.getPosterWidth(this.type,e.height)),s.Z.prototype.setDimensions.call(this,e)},setModel(e,t){s.Z.prototype.setModel.apply(this,arguments),this.model&&this.model.get("isFolder")&&(this.placeholderClass=n.Z.folder)}})},74378:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(67294),i=r(41779),s=r(30727),a=r(97599);const o={[a.sQ]:i.Z,[a.Bs]:s.Z},l=function(e){const t=o[e.attribution];return t?n.createElement("div",{className:e.className},n.createElement(t,null)):null}},98116:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(94184),i=r.n(n),s=r(47354),a=r(67294),o=r(28309);class l extends a.Component{render(){const{className:e,containerClassName:t,backgroundClassName:r,textClassName:n,size:o,lineWidth:l,strokeColor:c,trackColor:d,progress:u,progressText:p=`${Math.round(u)}%`,easing:m,showProgressText:h,showIndeterminate:g}=this.props,y=this.props.smoothProgressDuration/1e3,v=g?50:u,f=g?null:p,b=o/2,Z=b-l,S=Math.PI*(2*Z),P=o+"px",I=o-3*l+"px",E=(100-v)/100*S;return a.createElement("div",{className:t,style:{width:P,height:P,lineHeight:P}},a.createElement("svg",{className:i()(e,g&&"CircularProgressBar-indeterminate-SEGr5v spin-spin-H8VRGl"),height:o,version:"1.1",width:o,xmlns:"http://www.w3.org/2000/svg"},d?a.createElement("circle",{cx:b,cy:b,fill:"transparent",r:Z,style:{strokeWidth:l,stroke:d}}):null,a.createElement(s.ww.circle,{animate:{strokeDashoffset:E},cx:b,cy:b,fill:"transparent",initial:!0,r:Z,strokeDasharray:S,strokeDashoffset:E,style:{strokeWidth:l,stroke:c},transition:{duration:y,ease:m}})),a.createElement("div",{className:r,style:{width:I,height:I}}),h&&f?a.createElement("div",{className:n},f):null)}}l.defaultProps={className:"CircularProgressBar-circularProgressBar-dVkuio",containerClassName:"CircularProgressBar-circularProgressBarContainer-LRZ8zn",backgroundClassName:"CircularProgressBar-circularProgressBarBackground-Bw4kwM",textClassName:"CircularProgressBar-circularProgressBarText-ZQsWiX",size:60,lineWidth:5,strokeColor:o.Z.primaryColor,showProgressText:!0,smoothProgressDuration:1e3,easing:"easeOut"};const c=l},75463:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(67294),i=r(73935),s=r(70919),a=r(32903),o=r(86832),l=r(54094),c=r(70593),d=r(73788),u=r(54834),p=r(75691),m=r(45697),h=r.n(m);function g({onPositionUpdate:e,onTick:t}){const r=(0,n.useRef)(Date.now());return(0,n.useEffect)((()=>{let t;return e&&(t=window.setInterval(e,40)),()=>{t&&window.clearInterval(t)}}),[e]),(0,n.useEffect)((()=>{let e;return t&&(e=window.setInterval((()=>{const e=Math.floor((Date.now()-r.current)/1e3);t(e)}),1e3)),()=>{e&&window.clearInterval(e)}}),[t]),null}g.propTypes={onPositionUpdate:h().func,onTick:h().func};const y=g;class v extends n.Component{constructor(e,t){super(e,t),this._nativeSeek=e=>{this._mediaEl.currentTime=e},this.onStarted=()=>{const{positionSeconds:e,onDurationMillisecondsChange:t}=this.props;this.state.isStarted||(e&&(this.props.onResumeSeek||this.props.onSeek||this._nativeSeek)(e),this.setState({isStarted:!0},(()=>{if(t){const e=this._mediaEl.duration;t(Number.isFinite(e)?Math.floor(1e3*e):0)}})))},this.onDataLoad=()=>{this._canNativelySelectAudioTrack()&&this._selectAudioTrack(),this._canNativelySelectTextTrack()&&(this._selectTextTrack(),this._mediaEl.textTracks.addEventListener("addtrack",this.onAddTrack)),(0,c.Z)()||this.onStarted()},this.onCanPlay=()=>{(0,c.Z)()&&this.onStarted()},this.onCanPlayThrough=()=>{this.props.onCanPlayThrough&&this.props.onCanPlayThrough(!0)},this.onPositionUpdate=()=>{if(!this._mediaEl)return;const e=Math.floor(1e3*this._mediaEl.currentTime);if(e!==this._lastPositionMilliseconds)this._lastPositionMilliseconds=e,this._lastPositionChangeTime=Date.now(),this._isBuffering&&(this._isBuffering=!1,this.props.onBufferingChange&&this.props.onBufferingChange(!1));else if(!this._isBuffering&&!this.props.paused){const e=Date.now()-this._lastPositionChangeTime;e>this.props.bufferingDetectionLimit&&(o.Z.warn(`[Player] Buffering detected, last position change was ${e}ms ago`),this._isBuffering=!0,this.props.onBufferingChange&&this.props.onBufferingChange(!0))}this.props.onPositionMillisecondsChange(e)},this.onProgress=()=>{if(this.props.onBufferChange){const{buffered:e}=this._mediaEl,t=[];for(let r=0;r<e.length;r++)t.push({startSeconds:e.start(r),endSeconds:e.end(r)});this.props.onBufferChange(t)}},this.onEnded=()=>{this.props.onEnd&&this.props.onEnd()},this.onError=e=>{const{code:t}=e.target.error,r=function(e){switch(e){case 1:return(0,d.Z)("Abort");case 2:return(0,d.Z)("Network");case 3:return(0,d.Z)("Decode");case 4:return(0,d.Z)("Not Supported")}}(t),n=`${t} (${r||"Unknown"})`;2===t?o.Z.warn(`[Player] An HTML media error occurred: ${n}; the player will attempt to recover`):(o.Z.warn(`[Player] A critical HTML media error occurred: ${n}; the player cannot recover`),this.props.onError&&this.props.onError({code:`h${t}`,category:r}))},this.onSeek=e=>{const t=this._mediaEl.ended;this._nativeSeek(e),this.props.onSeek&&this.props.onSeek(e),!this.props.paused&&t&&this._play()},this.onPause=()=>{this._mediaEl.ended||this.props.onPause&&this.props.onPause()},this.onPlay=()=>{this.props.onPlay&&this.props.onPlay()},this.onResize=()=>{const{videoWidth:e,videoHeight:t}=this._mediaEl;this.props.onIntrinsicDimensions&&this.props.onIntrinsicDimensions({width:e,height:t})},this.onAddTrack=()=>{this._selectTextTrack()},this.state={isStarted:!1},this._mediaListeners={loadeddata:this.onDataLoad,canplay:this.onCanPlay,canplaythrough:this.onCanPlayThrough,progress:this.onProgress,ended:this.onEnded,error:this.onError,pause:this.onPause,play:this.onPlay,resize:this.onResize},this._lastPositionMilliseconds=null,this._lastPositionChangeTime=0,this._isBuffering=!1,this._isUnmounting=!1}componentDidMount(){this._mediaEl=(0,l.Vq)(this.props.mediaType,this.props.allowRecycleElement);const e=this._mediaEl;e.className="HTMLMedia-mediaElement-u17S9P",e.volume=Math.max(0,Math.min(this.props.volume/100,1)),e.crossOrigin="anonymous",Object.keys(this._mediaListeners).forEach((t=>{e.addEventListener(t,this._mediaListeners[t])})),this._node=i.findDOMNode(this),this._node.appendChild(e),this.props.onElementChange?this.props.onElementChange(e):e.src=this.props.src,this.props.isReadyToPlay&&!this.props.paused&&this.props.src&&this._play(),this._mediaEl.playbackRate=this.props.playbackSpeed,this.props.onMetricsPlayerChange(s.k9)}componentDidUpdate(e,t){(0,a.Z)(this.props.src===e.src,"Use a new `key` when changing `src`");const{lastSeekPositionSeconds:r,paused:n,volume:i,playbackSpeed:s,isReadyToPlay:o,audioStream:l,subtitleStream:c,subtitleSize:d,hasBurnedSubtitles:u,isStreamChangeInProgress:p,onStreamChange:m}=this.props,h=this._mediaEl,g=null!=r&&r!==e.lastSeekPositionSeconds,y=(!!e.audioStream&&e.audioStream.id)!==(!!l&&l.id),v=(!!e.subtitleStream&&e.subtitleStream.id)!==(!!c&&c.id),f=e.isStreamChangeInProgress&&!p,b=e.subtitleSize!==d;g&&this.onSeek(r),n===e.paused||h.ended||(n?this._pause():this._play()),i!==e.volume&&(h.volume=Math.max(0,Math.min(i/100,1))),s!==e.playbackSpeed&&(h.playbackRate=s),!o||e.isReadyToPlay||n||this._play(),this._canNativelySelectTextTrack()&&v&&!p&&this._selectTextTrack(),m&&(y&&!p||v&&!p||f||b&&u)&&m()}componentWillUnmount(){this._isUnmounting=!0,this._node.removeChild(this._mediaEl),this._mediaEl.src="",this._mediaEl.removeAttribute("src"),this._mediaEl.className="",Object.keys(this._mediaListeners).forEach((e=>{this._mediaEl.removeEventListener(e,this._mediaListeners[e])})),this._mediaEl.textTracks.removeEventListener("addtrack",this.onAddTrack),this.props.allowRecycleElement&&(0,l.u$)(this._mediaEl)}_play(){const e=this._mediaEl.play();e&&e.then&&e.then(null,(e=>{this._isUnmounting||(("AbortError"===e.name||"NotAllowedError"===e.name)&&this.props.onPause&&this.props.onPause(),o.Z.warn(e.name+": "+e.message))}))}_pause(){this._mediaEl.pause()}_canNativelySelectAudioTrack(){const{audioStreams:e,isDecisionDirectPlay:t}=this.props;return!!(e&&e.length&&t&&this._mediaEl.audioTracks)}_canNativelySelectTextTrack(){const{subtitlesStreams:e,isDecisionDirectPlay:t}=this.props;return!!(e&&e.length&&t&&this._mediaEl.textTracks.length>0)}_selectAudioTrack(){const{audioStreams:e,audioStream:t}=this.props,r=this._mediaEl.audioTracks;if(r){const n=(null==r?void 0:r.length)>1?null==e?void 0:e.findIndex((e=>e.id===t.id)):0;for(let e=0;e<r.length;e++)r[e].enabled=e===n}}_selectTextTrack(){var e;const{subtitleStream:t}=this.props,r=this._mediaEl.textTracks;if(r&&t){let n;for(let i=0;i<r.length;i++){const s=r[i];if(s.mode="disabled",!n){const r="captions"===s.kind&&"eia_608"===t.codec,i="subtitles"===s.kind&&"vtt"===t.codec,a=s.language===t.id||s.label.toLowerCase()===(null==(e=t.language)?void 0:e.toLowerCase());(r||i)&&a&&(n=!0,s.mode="showing")}}}}render(){const{height:e,width:t,placement:r,edgeGutterX:i,edgeGutterY:s,isStackedAbove:a,onTick:o}=this.props,l=(0,p.Z)(e,t,r,i,s,a);return n.createElement("div",{style:l},this.state.isStarted?n.createElement(y,{onPositionUpdate:this.onPositionUpdate,onTick:o}):null)}}v.defaultProps={mediaType:u.pX,positionSeconds:0,volume:100,playbackSpeed:1,allowRecycleElement:!1,isReadyToPlay:!0};const f=v},29012:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=(r(32903),r(56036)),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e},u=(e,t)=>{var r={};for(var n in e)o.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r};const p=function(e){const{className:t,component:r="span",childrenPropName:s="children",tags:a,message:o}=e;let l=[o],c=a.length-1,p=0;for(;c>=0;){const e=a[c],{open:t,close:r,unpaired:s,children:o,component:m,childrenPropName:h}=e,g=u(e,["open","close","unpaired","children","component","childrenPropName"]),y=t?new RegExp("(^.*)"+(0,i.Z)(`{${t}}`)+"(.*)"+(0,i.Z)(`{${r}}`)+"(.*$)"):new RegExp("(^.*)"+(0,i.Z)(`{${s}}`)+"()(.*$)"),v=[];for(let e=l.length-1;e>=0;e--){const t=l[e];if("string"!=typeof t)v.unshift(t);else{const e=t.match(y);if(e){const[,t,r,i]=e;m?v.unshift(t,n.createElement(m,d(d({key:p},g),{[h||"children"]:r})),i):v.unshift(t,o,i),p+=1}else v.unshift(t)}}v.length===l.length?c-=1:l=v}return n.createElement(r,d({className:t},{[s]:l}))}},34513:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(94184),i=r.n(n),s=r(67294),a=r(25555);const o={badge:"Badge-badge-GPVVZ0",isHidden:"Badge-isHidden-Tg5glg",default:"Badge-default-gy4ofL",primary:"Badge-primary-BGLMun",success:"Badge-success-WIQZUy",danger:"Badge-danger-cpNGtc"};function l({className:e,children:t,kind:r}){return s.createElement("span",{className:i()(e,o.badge,o[r],!t&&o.isHidden),"data-testid":"badgeElement"},t)}l.defaultProps={kind:a.TP};const c=l},84419:(e,t,r)=>{"use strict";r.d(t,{U:()=>i,Z:()=>a});var n=r(67294);const i="";function s({className:e,separator:t}){return n.createElement("span",{className:e},t)}s.defaultProps={className:"DashSeparator-separator-_3fMys",separator:i};const a=s},87264:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(94184),i=r.n(n),s=r(67294),a=r(8059),o=r(25555),l=r(69281);const c={disclosureArrow:"DisclosureArrow-disclosureArrow-NTDkGd",default:"DisclosureArrow-default-IjziOV",primary:"DisclosureArrow-primary-by640G",success:"DisclosureArrow-success-Gfb_9Z",danger:"DisclosureArrow-danger-g5QDmf",small:"DisclosureArrow-small-j34aAu",up:"DisclosureArrow-up-rO9WLr",right:"DisclosureArrow-right-k2eKlT",medium:"DisclosureArrow-medium-fXE_g9",large:"DisclosureArrow-large-kYbdMt",down:"DisclosureArrow-down-eIFuNm DisclosureArrow-up-rO9WLr",left:"DisclosureArrow-left-hT7G49 DisclosureArrow-right-k2eKlT",isSelected:"DisclosureArrow-isSelected-GKTZnd"};function d({className:e,kind:t,size:r,direction:n,isSelected:a}){return s.createElement("span",{className:i()(e,c[n],c[t],c[r],a&&c.isSelected)})}d.defaultProps={className:c.disclosureArrow,direction:a.WV,kind:o.TP,size:l.M2,isSelected:!1};const u=d},62704:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=(r(32903),r(20533));const s="Measure-scrollContainer-8hW9vB";class a extends n.Component{constructor(e,t){super(e,t),this._requestFrame=()=>{this._clearTimeout(),this._cancelFrame(),this._frameRequestID=window.requestAnimationFrame(this._measure)},this._requestTimeout=()=>{this._clearTimeout(),this._cancelFrame(),this._measureTimeoutID=window.setTimeout(this._requestFrame,this.props.resizeTimeout)},this._measure=()=>{const{ignoreWidth:e,ignoreHeight:t,ignorePosition:r,ignoreTransforms:n}=this.props,{isMeasured:i,width:s,scrollWidth:a,height:o,scrollHeight:l,x:c,y:d}=this.state,u=this._container;if(!u)return;const p=u.getBoundingClientRect(),m=n?u.offsetWidth:p.width,h=n?u.offsetHeight:p.height,g=!0!==i,y=!r&&(p.left!==c||p.top!==d),v=!e&&(m!==s||u.scrollWidth!==a),f=!t&&(h!==o||u.scrollHeight!==l);if(this._reset(),g||y||v||f){const n=window.getComputedStyle(u),i={isMeasured:!0};if(r||(i.x=y?p.left:c,i.y=y?p.top:d),!e){const e=parseInt(n.paddingRight,10)||0,t=parseInt(n.paddingLeft,10)||0;i.width=v?m-t-e:s,i.scrollWidth=v?u.scrollWidth:a}if(!t){const e=parseInt(n.paddingTop,10)||0,t=parseInt(n.paddingBottom,10)||0;i.height=f?h-e-t:o,i.scrollHeight=f?u.scrollHeight:l}this.setState(i),this.props.onMeasure&&this.props.onMeasure(i)}},this._setContainerRef=e=>{this._container=e;const{onContainerRef:t}=this.props;t&&t(e)},this._setExpandContainerRef=e=>{this._expandContainer=e},this._setShrinkContainerRef=e=>{this._shrinkContainer=e},this.onScroll=e=>{this._requestTimeout()};const{ignoreWidth:r,ignoreHeight:n,ignorePosition:i}=e;this.state={isMeasured:!1,width:r?void 0:0,scrollWidth:r?void 0:0,height:n?void 0:0,scrollHeight:n?void 0:0,x:i?void 0:0,y:i?void 0:0}}componentDidMount(){this._requestFrame()}shouldComponentUpdate(e,t){return(0,i.Z)(this,e,t)}componentWillUnmount(){this._cancelFrame(),this._clearTimeout()}_cancelFrame(){this._frameRequestID&&(this._frameRequestID=window.cancelAnimationFrame(this._frameRequestID))}_clearTimeout(){this._measureTimeoutID&&(this._measureTimeoutID=window.clearTimeout(this._measureTimeoutID))}_reset(){const e=this._expandContainer,t=this._shrinkContainer;e.scrollTop=1e5,e.scrollLeft=1e5,t.scrollTop=1e5,t.scrollLeft=1e5}render(){const{id:e,className:t,children:r,style:i,onKeyDown:a,onMeasure:o}=this.props,l="function"!=typeof r;return n.createElement("div",{ref:this._setContainerRef,className:t,id:e,style:i,onKeyDown:a},l?r:r(this.state),n.createElement("div",{ref:this._setExpandContainerRef,className:s,onScroll:this.onScroll},n.createElement("div",{className:"Measure-expandContent-asSKSW"})),n.createElement("div",{ref:this._setShrinkContainerRef,className:s,onScroll:this.onScroll},n.createElement("div",{className:"Measure-shrinkContent-phwzLN Measure-expandContent-asSKSW"})))}}a.defaultProps={className:"Measure-container-_70qZ9",ignoreWidth:!1,ignoreHeight:!1,ignorePosition:!1,ignoreTransforms:!1,resizeTimeout:100};const o=a},73538:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(67294),i=r(73935),s=r(73433),a=(r(32903),r(27598)),o=r(20533),l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e},y=(e,t)=>c(e,d(t));class v extends n.Component{constructor(e,t){super(e,t),this.onOpen=()=>{var e,t;this._open(),null==(t=(e=this.props).onOpen)||t.call(e)},this.onClose=()=>{var e,t;this._close(),null==(t=(e=this.props).onClose)||t.call(e)},this._ref=e.forwardedRef||n.createRef(),this._popper=null}shouldComponentUpdate(e,t){return(0,o.Z)(this,e,t)}componentDidUpdate(e){this._popper&&this._popper.update()}componentWillUnmount(){this._close()}_open(){const{target:e,options:t}=this.props,r=document.getElementById(e)||document.getElementsByName(e)[0];this._popper=(0,s.fi)(r,i.findDOMNode(this._ref.current),t),this._popper.update()}_close(){this._popper&&(this._popper.destroy(),this._popper=null)}render(){return n.createElement(a.Z,y(g({},this.props),{ref:this._ref,onClose:this.onClose,onOpen:this.onOpen}))}}v.defaultProps={options:{placement:"bottom-start"}};const f=n.forwardRef(((e,t)=>n.createElement(v,y(g({},e),{forwardedRef:t}))))},27598:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(73935),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class p extends n.Component{constructor(e,t){super(e,t),this.onCloseTimeout=()=>{this._closeTimeoutID=null,this.setState({shouldPreventPortalClose:!1},(()=>{this.props.onClose&&this.props.onClose()}))},this.onInteractionEvent=e=>{this.props.allowInteractionEventBubbling||e.stopPropagation()},this.state={isOpen:e.isOpen,shouldPreventPortalClose:!1}}static getDerivedStateFromProps(e,t){return e.isOpen===t.isOpen?null:{isOpen:e.isOpen,shouldPreventPortalClose:e.closeTimeoutMilliseconds&&!e.isOpen&&t.isOpen}}componentDidMount(){this.props.onOpen&&this.props.isOpen&&this.props.onOpen()}componentDidUpdate(e,t){!this.state.shouldPreventPortalClose&&t.shouldPreventPortalClose&&(this._closeTimeoutID=window.clearTimeout(this._closeTimeoutID)),this.state.shouldPreventPortalClose&&!t.shouldPreventPortalClose&&(this._closeTimeoutID=window.setTimeout(this.onCloseTimeout,this.props.closeTimeoutMilliseconds)),this.props.onOpen&&this.props.isOpen&&!e.isOpen&&this.props.onOpen()}componentWillUnmount(){this._closeTimeoutID&&window.clearTimeout(this._closeTimeoutID)}render(){const{className:e,style:t,children:r,forwardedRef:s}=this.props,{isOpen:a,shouldPreventPortalClose:o}=this.state;return a||o?i.createPortal(n.createElement("div",{ref:s,className:e,style:t,onBlur:this.onInteractionEvent,onClick:this.onInteractionEvent,onFocus:this.onInteractionEvent,onMouseDown:this.onInteractionEvent,onMouseUp:this.onInteractionEvent,onTouchCancel:this.onInteractionEvent,onTouchEnd:this.onInteractionEvent,onTouchMove:this.onInteractionEvent,onTouchStart:this.onInteractionEvent},r),document.body):null}}p.defaultProps={isOpen:!0,closeTimeoutMilliseconds:0,allowInteractionEventBubbling:!1};const m=n.forwardRef(((e,t)=>{return n.createElement(p,(r=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({},e),a(r,o({forwardedRef:t}))));var r}))},8067:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(94184),i=r.n(n),s=r(47354),a=r(67294),o=r(75944),l=r(37920),c=r(20533);const d={scroller:"Scroller-scroller-aaw2tP",none:"Scroller-none-TvJZmQ",vertical:"Scroller-vertical-nKq0Q8",auto:"Scroller-auto-JAbmLE",horizontal:"Scroller-horizontal-ynfs5r",omni:"Scroller-omni-WuKSJ8",compactScroller:"Scroller-compactScroller-NfSwWT"};var u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(h)for(var r of h(t))y.call(t,r)&&v(e,r,t[r]);return e};class b extends a.Component{constructor(e,t){super(e,t),this.onScroll=e=>{if(e.target!==this._scrollerRef.current)return;const t=e.target.scrollTop,r=e.target.scrollLeft,n=t!==this._currentScrollTop,i=r!==this._currentScrollLeft;(n||i)&&this._setScrollPosition({scrollTop:t,scrollLeft:r}),this.props.onScroll&&this.props.onScroll(e)},this.onScrollPositionChange=()=>{this._animationFrameID=null,this.props.onScrollPositionChange({scrollTop:this._currentScrollTop,scrollLeft:this._currentScrollLeft})},this.onScrollTimeout=()=>{this.setState({isScrolling:!1})},this.onScrollTopUpdate=e=>{this._updateScrollPosition({scrollTop:e}),this.props.onScrollToUpdate&&this.props.onScrollToUpdate({scrollTop:e})},this.onScrollTopComplete=()=>{this._scrollTopTween=null,this.props.onScrollToComplete&&this.props.onScrollToComplete()},this.onScrollLeftUpdate=e=>{this._updateScrollPosition({scrollLeft:e}),this.props.onScrollToUpdate&&this.props.onScrollToUpdate({scrollLeft:e})},this.onScrollLeftComplete=()=>{this._scrollLeftTween=null,this.props.onScrollToComplete&&this.props.onScrollToComplete()},this.state={isScrolling:!1},this._scrollerRef=e.forwardedRef||a.createRef(),this._currentScrollTop=0,this._currentScrollLeft=0}componentDidMount(){this._scrollTo(this.props)}UNSAFE_componentWillReceiveProps(e){e.scrollTop===this.props.scrollTop&&e.scrollLeft===this.props.scrollLeft||this.setState({isScrolling:!0})}shouldComponentUpdate(e,t){return(0,c.Z)(this,e,t)}componentDidUpdate(e){this.state.isScrolling&&(this._scrollTimeoutID&&window.clearTimeout(this._scrollTimeoutID),this._scrollTimeoutID=window.setTimeout(this.onScrollTimeout,this.props.isScrollingTimeout)),this._scrollTo(this.props)}componentWillUnmount(){this._clearTimeouts(),this._cancelScrollTo()}_setScrollPosition({scrollTop:e,scrollLeft:t}){this._clearTimeouts(),this._currentScrollTop=e,this._currentScrollLeft=t,this._animationFrameID=window.requestAnimationFrame(this.onScrollPositionChange)}_updateScrollPosition({scrollTop:e,scrollLeft:t}){const r=this._scrollerRef.current;null!=e&&(r.scrollTop=e),null!=t&&(r.scrollLeft=t)}_scrollTo({scrollTop:e,scrollLeft:t}){if(null==e&&null==t)return;const r=null!=e&&e!==this._currentScrollTop,n=null!=t&&t!==this._currentScrollLeft;if(!r&&!n)return;if(!this.props.smoothScroll&&!this.props.restoreScroll)return this._currentScrollTop=e,this._currentScrollLeft=t,void this._updateScrollPosition({scrollTop:e,scrollLeft:t});const i=this.props.smoothScrollDuration/1e3;this._scrollToPosition={};const a=this._scrollerRef.current;if(this._cancelScrollTo(),r){const t=Math.min(e,a.scrollHeight-a.clientHeight);this._scrollToPosition.scrollTop=a.scrollTop,this._scrollTopTween=(0,s.jt)(a.scrollTop,t,{type:"tween",duration:i,onUpdate:this.onScrollTopUpdate,onComplete:this.onScrollTopComplete})}if(n){const e=Math.min(t,a.scrollWidth-a.clientWidth);this._scrollToPosition.scrollLeft=a.scrollLeft,this._scrollLeftTween=(0,s.jt)(a.scrollLeft,e,{type:"tween",duration:i,onUpdate:this.onScrollLeftUpdate,onComplete:this.onScrollLeftComplete})}}_cancelScrollTo(){this._scrollTopTween&&(this._scrollTopTween.stop(),this._scrollTopTween=null),this._scrollLeftTween&&(this._scrollLeftTween.stop(),this._scrollLeftTween=null)}_clearTimeouts(){this._animationFrameID&&window.cancelAnimationFrame(this._animationFrameID),this._scrollTimeoutID&&window.clearTimeout(this._scrollTimeoutID)}render(){const e=this.props,{className:t,children:r,scrollDirection:n,autoScroll:s,compactScroller:l,enableChildrenProps:c,onScroll:u,onScrollPositionChange:p,forwardedRef:m,smoothScroll:v,restoreScroll:b,smoothScrollDuration:Z,scrollTop:S,scrollLeft:P,isScrollingTimeout:I,onScrollToUpdate:E,onScrollToComplete:w}=e,C=((e,t)=>{var r={};for(var n in e)g.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r})(e,["className","children","scrollDirection","autoScroll","compactScroller","enableChildrenProps","onScroll","onScrollPositionChange","forwardedRef","smoothScroll","restoreScroll","smoothScrollDuration","scrollTop","scrollLeft","isScrollingTimeout","onScrollToUpdate","onScrollToComplete"]);return a.createElement("div",f({ref:this._scrollerRef,className:i()(t,d.scroller,d[n],s&&d.auto,l&&d.compactScroller),onScroll:p?this.onScroll:u},C),c?(0,o.Z)(r,(e=>a.cloneElement(e,{isScrolling:this.state.isScrolling,scrollTop:this._currentScrollTop,scrollLeft:this._currentScrollLeft}))):r)}}b.defaultProps={scrollDirection:l.yZ,autoScroll:!1,smoothScroll:!0,restoreScroll:!1,smoothScrollDuration:400,enableChildrenProps:!1,isScrollingTimeout:100};const Z=a.forwardRef(((e,t)=>{return a.createElement(b,(r=f({},e),p(r,m({forwardedRef:t}))));var r}))},86192:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(94184),i=r.n(n),s=r(67294),a=r(69281),o=r(28309);const l={spinner:"Spinner-spinner-XTaskc spin-spin-H8VRGl",spinnerContainer:"Spinner-spinnerContainer-gUBLGs",spinnerLabel:"Spinner-spinnerLabel-ZUuHTc",small:"Spinner-small-VFWYsA Spinner-spinner-XTaskc spin-spin-H8VRGl",medium:"Spinner-medium-CSDGzv Spinner-spinner-XTaskc spin-spin-H8VRGl",large:"Spinner-large-UOvJz_ Spinner-spinner-XTaskc spin-spin-H8VRGl"};function c({className:e,containerClassName:t,labelClassName:r,size:n,color:a,label:o,loadingLabel:c}){const d=i()(e,l[n]),u={borderTopColor:a,borderLeftColor:a};return o?s.createElement("div",{className:i()(t,l.spinnerContainer)},s.createElement("div",{className:d,style:u}),s.createElement("div",{className:i()(r,l.spinnerLabel)},o)):s.createElement("div",{"aria-label":c,className:d,style:u})}c.defaultProps={size:a.M2,color:o.Z.primaryColor};const d=c},18222:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(94184),i=r.n(n),s=r(67294),a=r(25555),o=r(69281),l=r(85448);const c={button:"Button-button-TxWeuE Link-link-SxPFpG",default:"Button-default-sxqP0M",primary:"Button-primary-XgQxrm",success:"Button-success-MuPA2f",danger:"Button-danger-cwEm4r",dark:"Button-dark-jHDZPL",small:"Button-small-FKukQD",medium:"Button-medium-xQMNwg",large:"Button-large-mFYLSo"};var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const g=function(e){var t=e,{className:r,children:n,kind:d=a.TP,size:g=o.M2}=t,y=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children","kind","size"]);return s.createElement(l.Z,((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({className:i()(r,c.button,d&&c[d],g&&c[g])},y),n)}},61677:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(94184),i=r.n(n),s=r(67294),a=r(87264),o=r(85448),l=r(8059),c=r(69281);const d={disclosureArrowButton:"DisclosureArrowButton-disclosureArrowButton-x_5Y9W Link-link-SxPFpG",isSelected:"DisclosureArrowButton-isSelected-NHMC06",small:"DisclosureArrowButton-small-Euj0BD",medium:"DisclosureArrowButton-medium-OfMgTz",large:"DisclosureArrowButton-large-D50Coh",disclosureArrow:"DisclosureArrowButton-disclosureArrow-iPIByG DisclosureArrow-disclosureArrow-NTDkGd",down:"DisclosureArrowButton-down-s8HHHA",left:"DisclosureArrowButton-left-nnfwdR",up:"DisclosureArrowButton-up-BRGGbL",right:"DisclosureArrowButton-right-QQ1qwV"};var u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class y extends s.Component{render(){const e=this.props,{className:t,arrowClassName:r,children:n,direction:l,kind:u,size:y,isSelected:v}=e,f=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(e,["className","arrowClassName","children","direction","kind","size","isSelected"]),b=y||c.M2;return s.createElement(o.Z,((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e})({"aria-haspopup":!0,className:i()(t,d[b],v&&d.isSelected),isSelected:v,kind:u,size:y},f),n,s.createElement(a.Z,{className:i()(r,d[l],d[b]),direction:l,isSelected:v,kind:u,size:b}))}}y.defaultProps={className:d.disclosureArrowButton,arrowClassName:d.disclosureArrow,direction:l.WV,isSelected:!0};const v=y},84520:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(94184),i=r.n(n),s=r(67294),a=(r(32903),r(85448));var o=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){const t=e,{className:r,iconComponent:n,iconClassName:o,activeClassName:p,disabledClassName:m,isDisabled:h,isActive:g,label:y,labelClassName:v,title:f,ariaLabel:b,children:Z}=t,S=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["className","iconComponent","iconClassName","activeClassName","disabledClassName","isDisabled","isActive","label","labelClassName","title","ariaLabel","children"]),P=b||f;return s.createElement(a.Z,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({"aria-label":P,className:i()(r,h&&m,g&&p),isDisabled:h,title:f},S),s.createElement(n,{className:o}),y?s.createElement("span",{className:v},y):null,Z)}p.defaultProps={className:"IconButton-button-s4bVCh",activeClassName:"IconButton-isActive-SPVM7e",disabledClassName:"IconButton-isDisabled-M81hz3",labelClassName:"IconButton-label-WmQydD",isDisabled:!1};const m=p},85448:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(94184),i=r.n(n),s=r(67294),a=r(6360);r(32903);const o=null;function l(){const e=document.activeElement;return e&&e.dataset&&e.dataset.uid||o}var c=r(28201),d=r(50774),u=r(25555),p=r(20533);const m={link:"Link-link-SxPFpG",default:"Link-default-BXtKLo",primary:"Link-primary-aARVlT",success:"Link-success-xrq8fB",danger:"Link-danger-OnrZ_o",dark:"Link-dark-oZbYO4",small:"Link-small-J8cWdn",medium:"Link-medium-wZWWPc",large:"Link-large-nDat0L",isSelected:"Link-isSelected-x0P_By"};var h=Object.defineProperty,g=Object.defineProperties,y=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&Z(e,r,t[r]);if(v)for(var r of v(t))b.call(t,r)&&Z(e,r,t[r]);return e};let P=o;a.Z&&window.addEventListener("blur",(()=>{P=l()}));class I extends s.Component{constructor(e,t){super(e,t),this.onTouchStart=e=>{this._isTouch=!0,this._preventFocus=this._shouldPreventFocus(),1===e.touches.length&&this._activate(!0),this.props.onTouchStart&&this.props.onTouchStart(e)},this.onTouchMove=e=>{this._activate(!1),this.props.onTouchMove&&this.props.onTouchMove(e)},this.onTouchEnd=e=>{const{to:t,target:r,isDisabled:n,onTouchEnd:i}=this.props;this._isActive&&!n&&(!t||r&&"_self"!==r||(e.preventDefault(),window.location.href=t),this._press(e)),this._activate(!1),i&&i(e)},this.onTouchCancel=e=>{this._isTouch=!1,this._activate(!1),this.props.onTouchCancel&&this.props.onTouchCancel(e)},this.onMouseDown=e=>{this._isTouch||(this._preventFocus=this._shouldPreventFocus(),0===e.button&&this._activate(!0),this.props.onMouseDown&&this.props.onMouseDown(e))},this.onMouseUp=e=>{if(this._isTouch)return;const{isDisabled:t,onMouseUp:r}=this.props;this._isActive&&!t&&(this._press(e),this._preventOnClick=!0),this._activate(!1),r&&r(e)},this.onMouseLeave=e=>{this._isTouch||(this._isActive&&this.setState({isActive:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e))},this.onClick=e=>{this._preventFocus=!1;const{isDisabled:t}=this.props;this._preventOnClick||this._isTouch||this._isActive||!this._isFocused||t||this._press(e),this._preventOnClick=!1,this._isTouch=!1},this.onFocus=e=>{this._preventFocus?this._preventFocus=!1:this._uid!==P?(this._focus(!0),this.props.onFocus&&this.props.onFocus(e)):P=o},this.onBlur=e=>{this._focus(!1),this.props.onBlur&&this.props.onBlur(e)},this._preventFocus=!1,this._preventOnClick=!1,this._isTouch=!1,this._isActive=!1,this._isFocused=!1,this._uid=(0,c.Z)(),this.state={isActive:!1,isFocused:!1},this._ref=s.createRef()}componentDidMount(){!this.props.isDisabled&&this.props.focusOnEnabled&&this._ref.current.focus()}shouldComponentUpdate(e,t){return(0,p.Z)(this,e,t)}componentDidUpdate(e){const t=this.props.focusOnEnabled&&!this.props.isDisabled,r=e.focusOnEnabled&&!e.isDisabled;t&&!r&&this._ref.current.focus()}_activate(e){this._isActive=e,this.setState({isActive:e})}_focus(e){this._isFocused=e,this.setState({isFocused:e})}_shouldPreventFocus(){return!this.props.allowFocusOnPress&&!(l()===this._uid)}_press(e){const{onPress:t}=this.props;t&&t(e)}render(){const e=this.props,{className:t,to:r,kind:n,size:a,isSelected:o,isDisabled:l,component:c,allowFocusOnPress:u,role:p,focusOnEnabled:h,onPress:Z}=e,P=((e,t)=>{var r={};for(var n in e)f.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&v)for(var n of v(e))t.indexOf(n)<0&&b.call(e,n)&&(r[n]=e[n]);return r})(e,["className","to","kind","size","isSelected","isDisabled","component","allowFocusOnPress","role","focusOnEnabled","onPress"]),{isActive:I,isFocused:E}=this.state,w={"data-uid":this._uid};let C=c;return r&&(C="a",w.href=r),w.role=p||(r?"link":"button"),w.className=i()(t,m.link,m[n],a&&m[a],o&&m.isSelected,I&&d.lW,E&&d.GZ,l&&d.Pv),"button"!==C&&"input"!==C||(w.type=P.type||"button",w.disabled=l),C?s.createElement(C,(M=S(S({},P),w),D={ref:this._ref,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchCancel,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,onClick:this.onClick,onFocus:this.onFocus,onBlur:this.onBlur},g(M,y(D)))):null;var M,D}}I.defaultProps={component:"button",kind:u.TP,isSelected:!1,isDisabled:!1,allowFocusOnPress:!1};const E=I},23414:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(94184),i=r.n(n),s=r(67294),a=r(86192),o=r(69281),l=r(28309),c=r(18222);var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function g(e){var t=e,{children:r,className:n,loadingLabel:o,spinnerSize:l,spinnerColor:d,isDisabled:g,isSpinning:y}=t,v=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["children","className","loadingLabel","spinnerSize","spinnerColor","isDisabled","isSpinning"]);return s.createElement(c.Z,((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({className:i()(n,"SpinnerButton-button-tcanHL Button-button-TxWeuE Link-link-SxPFpG",y&&"SpinnerButton-isSpinning-rH02Lt"),isDisabled:g||y},v),s.createElement("span",{className:"SpinnerButton-spinnerContainer-Eqb4MX"},s.createElement(a.Z,{className:"SpinnerButton-spinner-ox41on Spinner-spinner-XTaskc spin-spin-H8VRGl",color:d,loadingLabel:o,size:l})),s.createElement("span",{className:"SpinnerButton-label-QlP0_n"},r))}g.defaultProps={isDisabled:!1,isSpinning:!1,spinnerSize:o.HC,spinnerColor:l.Z.defaultColor};const y=g},5103:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(85448),s=r(86979),a=r(31722);const o={toolbarButton:"ToolbarButton-toolbarButton-PCjB_g",bottomLeft:"ToolbarButton-bottomLeft-V3a71x Tooltip-bottomLeft-ZA9QOY Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipLeftAlignArrow-SYYsix",bottomCenter:"ToolbarButton-bottomCenter-PX024r Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu",bottomRight:"ToolbarButton-bottomRight-FvoCX0 Tooltip-bottomRight-wLkq3G Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipRightAlignArrow-jFr4_J",hasFocus:"ToolbarButton-hasFocus-A6zj9p"};var l=Object.defineProperty,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class m extends n.Component{render(){const e=this.props,{children:t,tooltip:r,className:a,hasLabel:l,tooltipAttachment:m,hideOnPress:h,onPress:g}=e,y=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(e,["children","tooltip","className","hasLabel","tooltipAttachment","hideOnPress","onPress"]),v=o[m],f=`${v} ${o.hasFocus}`;return n.createElement(s.Z,((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({"aria-label":r,className:a,component:i.Z,hideOnPress:h,tooltip:r,tooltipClassName:v,tooltipFocusedClassName:f,onPress:g},y),t)}}m.defaultProps={className:o.toolbarButton,tooltipAttachment:a.eO};const h=m},70852:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(94184),i=r.n(n),s=r(67294),a=r(69281);const o={input:"CheckInput-input-dUDRsF",label:"CheckInput-label-E9ov4s",small:"CheckInput-small-ku4ETN",large:"CheckInput-large-Wgq5_7",isDisabled:"CheckInput-isDisabled-QjZK5o",hasError:"CheckInput-hasError-RIB5DS"};var l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class g extends s.Component{constructor(e,t){super(e,t),this.setRef=e=>{this._checkbox=e},this.onChange=e=>{const t=e.target.checked?this.props.checkedValue:this.props.uncheckedValue;this.props.value!==t&&this.props.onChange(t)},this._checkbox=null}componentDidMount(){this.setIndeterminate()}componentDidUpdate(){this.setIndeterminate()}setIndeterminate(){if(!this._checkbox)return;const{value:e,uncheckedValue:t,checkedValue:r}=this.props;this._checkbox.indeterminate=e!==t&&e!==r}render(){const e=this.props,{className:t,inputClassName:r,errorClassName:n,disabledClassName:a,isDisabled:l,size:g,checkboxText:y,name:v,initialValue:f,value:b,checkedValue:Z,uncheckedValue:S,showErrors:P,hasError:I,errors:E,validations:w}=e,C=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(e,["className","inputClassName","errorClassName","disabledClassName","isDisabled","size","checkboxText","name","initialValue","value","checkedValue","uncheckedValue","showErrors","hasError","errors","validations"]);return s.createElement("label",{className:i()(t,o[g],l&&a,I&&n),htmlFor:v},s.createElement("input",(M=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},C),D={ref:this.setRef,checked:b===Z,className:r,disabled:l,id:v,type:"checkbox",onChange:this.onChange},c(M,d(D)))),y);var M,D}}g.defaultProps={className:o.label,inputClassName:o.input,errorClassName:o.hasError,disabledClassName:o.isDisabled,isDisabled:!1,size:a.ln,uncheckedValue:!1,checkedValue:!0,value:!1,hasError:!1};const y=g},55097:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(67294),i=r(70852),s=r(85482),a=r(2768),o=r(37754),l=r(58851),c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e){var t=e,{formGroupClassName:r,labelText:l,checkboxText:c,helpText:h,showErrors:g,errors:y}=t,v=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["formGroupClassName","labelText","checkboxText","helpText","showErrors","errors"]);const[f]=y;return n.createElement(s.Z,{className:r},l?n.createElement(o.Z,null,l):null,n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({checkboxText:n.createElement("span",null,c,g&&f?`  ${f}`:null),hasError:g},v)),h?n.createElement(a.Z,null,h):null)}h.defaultProps={showErrors:!1,errors:[]};const g=(0,l.Z)(h)},70668:(e,t,r)=>{"use strict";r.d(t,{Nw:()=>P,ZP:()=>w});var n=r(67294),i=r(40111),s=r(13469),a=r.n(s),o=r(15451),l=r(60952),c=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e},v=(e,t)=>d(e,u(t));const f="CHANGE",b="REPLACE_STATE",Z="RESET",S="SHOW_ERRORS",P={change:(0,o.Z)(f),replaceState:(0,o.Z)(b),reset:(0,o.Z)(Z),showErrors:(0,o.Z)(S)};function I(e={},{type:t,payload:r}){switch(t){case f:{const{name:t,change:n}=r;if(null==n){const r=y({},e);return delete r[t],r}return v(y({},e),{[t]:n})}case b:return r;case Z:return{};case S:return a().mapObject(e,(e=>v(y({},e),{showErrors:0!==e.errors.length})));default:return e}}class E extends n.Component{constructor(e,t){super(e,t),this.onFormStoreChange=()=>{const e=this.store.getState();e!==this.prevState&&(this.prevState=e,this.props.onChange(e))},this.onSubmit=e=>{e.preventDefault(),e.nativeEvent.preventDefault();const t=this.store.getState();if(a().some(t,((e,t)=>0!==e.errors.length)))this.actions.showErrors();else{const e=a().mapObject(t,((e,t)=>e.value));this.props.onSubmit(e,t)}},this.store=(0,i.MT)(I),this.prevState=this.store.getState(),this.actions=(0,i.DE)(P,this.store.dispatch)}getChildContext(){return{formStore:this.store}}UNSAFE_componentWillMount(){this.unsubscribe=this.store.subscribe(this.onFormStoreChange)}UNSAFE_componentWillReceiveProps(e){e.formState&&this.store.getState()!==e.formState&&this.actions.replaceState(e.formState)}componentWillUnmount(){this.unsubscribe&&(this.unsubscribe(),this.store.replaceReducer((e=>e)))}render(){const e=this.props,{children:t,formState:r,onChange:i}=e,s=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(e,["children","formState","onChange"]);return n.createElement("form",v(y({},s),{onSubmit:this.onSubmit}),t)}}E.childContextTypes={formStore:l.Z},E.defaultProps={onSubmit(){},onChange(){}};const w=E},85482:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e){var t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e})({},i),r)}c.defaultProps={className:"FormGroup-group-J_LPqU"};const d=c},2768:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){var t,r=e,{children:i,className:u}=r,p=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(r,["children","className"]);return n.createElement("p",(t=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({},p),s(t,a({className:u}))),i)}u.defaultProps={className:"FormHelp-help-yud9Zf"};const p=u},37754:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(94184),i=r.n(n),s=r(67294);var a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){var t,r,n=e,{children:a,className:m,errorClassName:h,name:g,hasError:y}=n,v=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(n,["children","className","errorClassName","name","hasError"]);return s.createElement("label",(t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({},v),r={className:i()(m,y&&h),htmlFor:g},o(t,l(r))),a)}m.defaultProps={className:"FormLabel-label-KQvmHO",errorClassName:"FormLabel-hasError-lgXkns"};const h=m},95162:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(37754);const s=function(e){const{className:t,name:r,labelText:s,showErrors:a,errors:o}=e,[l]=o;return n.createElement(i.Z,{className:t,hasError:a,name:r},s,a&&l?`  ${l}`:null)}},7614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(94184),i=r.n(n),s=r(67294),a=r(13469),o=r.n(a),l=r(69281);const c={input:"SelectInput-input-EWuFb5 input-input-XAtklw",small:"SelectInput-small-vV09Zl input-small-eTaFF8",select:"SelectInput-select-hEuTJi",large:"SelectInput-large-ByAaf3 input-large-KIQwL0",isDisabled:"SelectInput-isDisabled-ekhnwS",hasError:"SelectInput-hasError-tqVhlY"};var d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class v extends s.Component{constructor(){super(...arguments),this.onChange=e=>{this.props.onChange(e.target.value)}}render(){const e=this.props,{className:t,errorClassName:r,disabledClassName:n,isDisabled:a,size:l,name:d,initialValue:v,value:f,values:b,hasError:Z,errors:S,validations:P}=e,I=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(e,["className","errorClassName","disabledClassName","isDisabled","size","name","initialValue","value","values","hasError","errors","validations"]);return s.createElement("div",{className:i()(t,c[l],a&&n,Z&&r)},s.createElement("select",(E=((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e})({},I),w={className:c.select,disabled:a,id:d,name:d,value:f,onChange:this.onChange},u(E,p(w))),b.map(((e,t)=>{if(o().isString(e))return s.createElement("option",{key:t,value:e},e);const[r]=o().keys(e);return s.createElement("option",{key:t,value:r},o().result(e,r))}))));var E,w}}v.defaultProps={className:c.input,errorClassName:c.hasError,disabledClassName:c.isDisabled,isDisabled:!1,size:l.ln,hasError:!1};const f=v},7971:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(85482),s=r(2768),a=r(95162),o=r(7614),l=r(58851),c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const h=(0,l.Z)((function(e){var t=e,{formGroupClassName:r,formLabelClassName:l,name:c,labelText:h,helpText:g,showErrors:y,errors:v}=t,f=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["formGroupClassName","formLabelClassName","name","labelText","helpText","showErrors","errors"]);return n.createElement(i.Z,{className:r},n.createElement(a.Z,{className:l,errors:v,labelText:h,name:c,showErrors:y}),n.createElement(o.Z,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({hasError:y,name:c},f)),g?n.createElement(s.Z,null,g):null)}))},16013:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(94184),i=r.n(n),s=r(67294),a=r(69281);const o={input:"TextInput-input-NqTdW3 input-input-XAtklw",small:"TextInput-small-efNCXZ input-small-eTaFF8",large:"TextInput-large-I75O3g input-large-KIQwL0",isDisabled:"TextInput-isDisabled-PzBOCB input-isDisabled-NZu29w",hasError:"TextInput-hasError-o5OcFz input-hasError-GqupwL"};var l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class g extends s.Component{constructor(){super(...arguments),this.onChange=e=>{this.props.onChange(e.target.value)},this.onFocus=()=>{this._select()},this.onRef=e=>{this.inputElement=e}}componentDidMount(){this.props.focusOnMount&&(this.inputElement.focus(),this._select())}_select(){if(this.inputElement&&this.props.selectTextOnFocus){const e=this.inputElement.value,t=e?e.length:0;this.inputElement.selectionStart=0,this.inputElement.selectionEnd=t}}render(){const e=this.props,{className:t,errorClassName:r,disabledClassName:n,isDisabled:a,initialValue:l,value:g,size:y,type:v,name:f,placeholder:b,hasError:Z,errors:S,validations:P,focusOnMount:I,selectTextOnFocus:E}=e,w=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(e,["className","errorClassName","disabledClassName","isDisabled","initialValue","value","size","type","name","placeholder","hasError","errors","validations","focusOnMount","selectTextOnFocus"]);return s.createElement("input",(C=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},w),M={ref:I?this.onRef:null,className:i()(t,o[y],a&&n,Z&&r),disabled:a,id:f,name:f,placeholder:b,type:v,value:g,onChange:this.onChange,onFocus:this.onFocus},c(C,d(M))));var C,M}}g.defaultProps={className:o.input,errorClassName:o.hasError,disabledClassName:o.isDisabled,isDisabled:!1,size:a.ln,type:"text",hasError:!1,focusOnMount:!1,selectTextOnFocus:!1};const y=g},89850:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(67294),i=r(99),s=r(56422),a=r(54320),o=r(85482),l=r(2768),c=r(95162),d=r(16013),u=r(58851),p=Object.defineProperty,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function v(e){var t,r=e,{formGroupClassName:u,formLabelClassName:p,inputClassName:v,name:f,labelText:b,helpText:Z,showErrors:S,errors:P,children:I,helpWidth:E}=r,w=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(r,["formGroupClassName","formLabelClassName","inputClassName","name","labelText","helpText","showErrors","errors","children","helpWidth"]);return n.createElement(o.Z,{className:u},I,n.createElement(c.Z,{className:p,errors:P,labelText:b,name:f,showErrors:S}),n.createElement(d.Z,((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e})({className:v,hasError:S,name:f},w)),Z?n.createElement(i.k,{alignItems:a.xM.Center,justifyContent:a.xM.SpaceBetween,width:E,wrap:"wrap"},n.createElement(l.Z,null,Z),w.maxLength?n.createElement(s.x,{color:a.Il.Muted,level:s.N.Body3},`${null==(t=w.value)?void 0:t.length}/${w.maxLength}`):null):null)}v.defaultProps={errors:[]};const f=(0,u.Z)(v)},58851:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(67294),i=r(40111),s=r(13469),a=r.n(s),o=(r(32903),r(84301)),l=r(14580),c=r(72186),d=r(60952),u=r(35846),p=r(20533),m=r(70668),h=Object.defineProperty,g=Object.defineProperties,y=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&Z(e,r,t[r]);if(v)for(var r of v(t))b.call(t,r)&&Z(e,r,t[r]);return e},P=(e,t)=>g(e,y(t));function I(e){var t;const r=`FormInput(${(0,c.Z)(e)})`;return(t=class extends n.Component{constructor(e,t){super(e,t),this.onFormStoreChange=()=>{const{name:e}=this.props,t=this.store.getState(),r=t[e];r||this.initializeInputState(this.props),(0,u.Z)(t,this.previousFormState)||(this.previousFormState=t,this.handleStateChange(this.props)),this.state!==r&&null!=r&&this.setState(r)},this.onChange=e=>{const{transformValue:t}=this.props;this.handleStateChange(this.props,t?t(e):e)},this.onBlur=()=>{if(this.hasBlurred)return;this.hasBlurred=!0;const e=this.store.getState(),{name:t}=this.props,r=e[t],n=this.calculateErrors(r.value,e,this.props);this.actions.change({name:t,change:P(S({},r),{errors:n,showErrors:0!==n.length})})},this.store=t.formStore,this.actions=(0,i.DE)(m.Nw,this.store.dispatch),this.state=null,this.hasBlurred=!1}UNSAFE_componentWillMount(){this.previousFormState=this.store.getState(),this.unsubscribe=this.store.subscribe(this.onFormStoreChange),this.initializeInputState(this.props)}UNSAFE_componentWillReceiveProps(e){(0,o.Z)(e.initialValue)&&(0,o.Z)(this.props.initialValue)?(0,u.Z)(e.initialValue,this.props.initialValue)||this.handleStateChange(e,e.initialValue):a().isEqual(e.initialValue,this.props.initialValue)||this.handleStateChange(e,e.initialValue)}shouldComponentUpdate(e,t){return(0,p.Z)(this,e,t)}componentWillUnmount(){const{name:e}=this.props;this.unsubscribe&&this.unsubscribe(),this.actions.change({name:e,change:null})}initializeInputState(e){const{name:t,initialValue:r}=e,n=this.store.getState();n[t]={errors:this.calculateErrors(r,n,e),showErrors:!1,value:r},this.actions.replaceState(n)}handleStateChange(e,t){const r=this.store.getState(),{name:n}=e,i=r[n],s=Array.isArray(t)||null!=t?t:i.value,o=this.calculateErrors(s,r,e);a().isEqual(i.value,s)&&a().isEqual(i.errors,o)||this.actions.change({name:n,change:{errors:o,showErrors:this.hasBlurred&&0!==o.length,value:s}})}calculateErrors(e,t,r){const{validations:n}=r;return n.map((r=>r(e,t))).filter((e=>null!=e))}render(){const t=this.props,{validations:r,errors:i,transformValue:s,onChange:a}=t,o=((e,t)=>{var r={};for(var n in e)f.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&v)for(var n of v(e))t.indexOf(n)<0&&b.call(e,n)&&(r[n]=e[n]);return r})(t,["validations","errors","transformValue","onChange"]);if(!this.state)return null;const c=i.length>0,{value:d,errors:u,showErrors:p}=this.state;return n.createElement(e,P(S({},o),{errors:c?i:u,showErrors:!!c||p,value:d,onBlur:this.onBlur,onChange:(0,l.Z)(this.onChange,a)}))}}).displayName=r,t.contextTypes={formStore:d.Z},t.defaultProps={validations:[],errors:[]},t.WrappedComponent=e,t}},42313:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(34513),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){return n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({},e))}d.defaultProps={className:"PageHeaderBadge-badge-Odac7M"};const u=d},17282:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(61677),s=r(85448),a=r(8059);var o=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class p extends n.Component{render(){const e=this.props,{linkClassName:t,buttonClassName:r,children:o,to:p,hasMenu:m,isMenuOpen:h,isSelected:g,isDisabled:y}=e,v=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(e,["linkClassName","buttonClassName","children","to","hasMenu","isMenuOpen","isSelected","isDisabled"]);return m||p?m?n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({className:r,"data-testid":"typeDropdownButton",direction:h?a.UP:a.WV,isDisabled:y,isSelected:g},v),o):n.createElement(s.Z,{className:t,isDisabled:y,to:p},o):n.createElement("span",{className:t},o)}}p.defaultProps={linkClassName:"PageHeaderBreadcrumbButton-link-Ka3Nfp",buttonClassName:"PageHeaderBreadcrumbButton-button-HPqLEx DisclosureArrowButton-disclosureArrowButton-x_5Y9W Link-link-SxPFpG",hasMenu:!1,isMenuOpen:!1,isSelected:!1,isDisabled:!1};const m=p},54768:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PageHeaderLeft-pageHeaderLeft-GB_cUK"};const s=i},90792:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PageHeaderRight-pageHeaderRight-j9Yjqh"};const s=i},11113:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(37188),s=r(99539),a=r(85209);const o=function({className:e,type:t}){return(0,a.isDirectoryType)(t)?n.createElement(i.Z,{className:e}):n.createElement(s.Z,{className:e})}},37055:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e};function d(e){const{className:t,style:r,src:i,width:s,height:a,backgroundSize:o,backgroundPosition:l,backgroundRepeat:d}=e;return n.createElement("div",{className:t,style:c({width:s,height:a,backgroundImage:`url(${i})`,backgroundSize:o,backgroundPosition:l,backgroundRepeat:d},r)})}d.defaultProps={backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"};const u=d},95283:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),i=r(62208),s=r(87036),a=r(37055),o=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e};function g(e,t,r){const{className:n,style:i,styleProps:s,durationMilliseconds:a,useCrossFade:o}=r,l=document.createElement("div");l.className=n,Object.assign(l.style,h(h({position:"absolute",backgroundImage:`url(${e})`,width:"100%",height:"100%"},s),i)),t.appendChild(l),o&&"function"==typeof l.animate&&l.animate([{opacity:0},{opacity:1}],a)}function y(e){const{className:t,style:r,containerClassName:i,containerStyle:s,src:a,width:o,height:l,backgroundSize:c,backgroundPosition:d,backgroundRepeat:u,animateOnMount:p,disableCrossFade:m,durationMilliseconds:y}=e,v=(0,n.useRef)(null),f=(0,n.useRef)(!0),b=h({position:"relative",width:o,height:l},s);return(0,n.useLayoutEffect)((()=>{const e=f.current;f.current=!1;const n={className:t,style:r,styleProps:{backgroundSize:c,backgroundPosition:d,backgroundRepeat:u},durationMilliseconds:y,useCrossFade:!e||p};let i,s;return m&&(n.useCrossFade=!1),e?g(a,v.current,n):i=window.requestAnimationFrame((()=>{i=null,g(a,v.current,n),s=window.setTimeout((()=>{for(;v.current.childNodes.length>1;)(e=v.current).removeChild(e.childNodes[0]);var e}),2*y)})),()=>{i&&window.cancelAnimationFrame(i),s&&window.clearTimeout(s)}}),[t,r,a,c,d,u]),n.createElement("div",{ref:v,className:i,style:b})}y.defaultProps=l(h({},a.Z.defaultProps),c({animateOnMount:!0,disableCrossFade:!1,durationMilliseconds:(0,i.Z)(s.Z.slowSpeed)}));const v=y},35240:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(37055),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){e&&(e.onload=e.onabort=e.onerror=void 0)}function m(e){const t=e,{src:r,emptySrc:i,component:s,preloadOnMount:m,onLoad:h,onError:g}=t,y=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["src","emptySrc","component","preloadOnMount","onLoad","onError"]),[v,f]=(0,n.useState)(m?null:r),[b,Z]=(0,n.useState)(null),S=(0,n.useRef)(m);return(0,n.useEffect)((()=>{if(!S.current)return void(S.current=!0);if(!r)return;let e=new window.Image;return e.onload=()=>{e=p(e),f(r),Z(null)},e.onabort=e.onerror=()=>{e=p(e),f(null),Z(new Error(`Unable to load ${r}`))},e.src=r,()=>{e=p(e)}}),[r]),(0,n.useEffect)((()=>{!r&&v&&f(null)}),[v,r]),(0,n.useEffect)((()=>{v&&h&&h(v)}),[v,h]),(0,n.useEffect)((()=>{b&&g&&g(b)}),[b,g]),n.createElement(s,(P=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({},y),a(P,o({src:v||i}))));var P}m.defaultProps={emptySrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",component:i.Z,preloadOnMount:!0};const h=m},67364:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>w});var n=r(19755),i=r.n(n),s=r(67294),a=r(17680),o=r(9711),l=r(14269),c=(r(32903),r(9524)),d=r(20683),u=r(35240),p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const b=new a.Z,Z={},S={},P=[l.EU,l.yy,l.it,l.bS,l.Rr,l.Ko,l.ES,l.oP].sort(((e,t)=>I(e)-I(t)));function I(e){if(S.hasOwnProperty(e))return S[e];const t=e.split("-")[1];return S[e]=t,t}function E(e){const t=e,{url:r,minSize:n,format:a,quality:l,upscale:p,filters:S,allowPixelRatioSize:E,allowImageBlobs:w,supportsSize:C,onError:M}=t,D=((e,t)=>{var r={};for(var n in e)y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&g)for(var n of g(e))t.indexOf(n)<0&&v.call(e,n)&&(r[n]=e[n]);return r})(t,["url","minSize","format","quality","upscale","filters","allowPixelRatioSize","allowImageBlobs","supportsSize","onError"]),O=function(e,t){if(!e)return;const r=Object.assign(function(e){const t=e.allowPixelRatioSize?(0,o.Z)():1,r=e.size||function(e){if(Z.hasOwnProperty(e))return Z[e];const t=P.find((t=>I(t)>=e))||P[P.length-1];return Z[e]=t,t}(e.width);if(e.supportsSize)return{size:r,scale:Math.ceil(t)};{const n=I(r),i=e.height/e.width;return{width:Math.ceil(n*t),height:Math.ceil(i*n*t),minSize:e.minSize?1:void 0,upscale:e.upscale?1:void 0}}}(t),t.filters);t.format&&(r.format=t.format),t.quality&&(r.quality=t.quality);const n=e.indexOf("?");let i=e;return n>-1?(i=d.Z.join(e.substring(0,n),r),i+=-1===i.indexOf("?")?"?":"&",i+=e.substring(n+1)):i=d.Z.join(i,r),i}(r,e);let T,x;O&&w&&(T=b.getBlobUrl(O),T||(x=b.getPlaceholder(O)));const[A,k]=(0,s.useState)(T||x||(w?null:O)),N=(0,s.useRef)(!1);return(0,s.useEffect)((()=>{if(N.current&&(N.current=!1,null==A))return void(M&&M());let e;return T?A!==T&&k(T):O&&w?(e=function(e){const t=i().Deferred(),r={cancelable:(0,c.Z)(t.promise()),xhr:null},n=new window.XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",r.xhr=n,n.onreadystatechange=()=>{if(4===n.readyState)if(n.onreadystatechange=null,200===n.status){const r=new window.Blob([n.response],{type:"image/jpeg"}),i=window.URL.createObjectURL(r);b.store({url:e,blobUrl:i}),t.resolve(i)}else t.reject()},n.send(),r}(O),e.cancelable.promise.then((t=>{e=null,k(t)}),(({isCanceled:t}={})=>{t||(e=null,null===A?M&&M():(N.current=!0,k(null)))}))):k(O&&!w?O:null),()=>{e&&(e.cancelable.cancel(),e.xhr&&(e.xhr.onreadystatechange=null,e.xhr.abort()))}}),[A,O,T,w,M]),s.createElement(u.Z,(R=((e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&f(e,r,t[r]);return e})({},D),m(R,h({src:A,onError:M}))));var R}E.defaultProps={minSize:!0,upscale:!0,allowPixelRatioSize:!0,allowImageBlobs:!0};const w=(0,s.memo)(E)},14782:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(94184),i=r.n(n),s=r(67294),a=r(13469),o=r.n(a),l=r(50774),c=r(35846),d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};class y extends s.Component{constructor(e,t){super(e,t),this.state=this._getListState(e),this._keyPool=function(e=""){const t=[],r={},n={};let i=0;function s(){let r;return t.length?r=t.shift():(r=e+i,i++),r}function a(e){delete r[e]}return{getKeys(e,i,l,c=0,d){o().each(r,((r,s)=>{const a=r.item;if(null===a)t.push(s);else{const r=o().isString(a)?a:a[d],u=l.indexOf(a)+c;(u<e||u>i)&&(t.push(s),delete n[r])}}));for(let t=e;t<=i;t++){const e=l[t-c]||null,i=e&&(o().isString(e)?e:e[d]);let a=e&&n[i];a||(a=s(),e&&(n[i]=a)),r[a]={index:t,item:e}}return t.forEach(a),t.length=0,o().extend({},r)}}}("cell"),this._shouldRequestPage=!1}UNSAFE_componentWillMount(){this.props.onListUpdate&&this.props.onListUpdate(this.state)}componentDidMount(){this._checkForPageRequest()}UNSAFE_componentWillReceiveProps(e){const t=this._getListState(e);(0,c.Z)(this.state,t)||this.setState(t)}shouldComponentUpdate(e,t){const r=this.props,n=this.state;return e.items!==r.items||e.size!==r.size||e.viewportWidth!==r.viewportWidth||e.viewportHeight!==r.viewportHeight||e.listTop!==r.listTop||e.listLeft!==r.listLeft||e.isScrolling!==r.isScrolling||e.skipRenderCells!==r.skipRenderCells||e.layout!==r.layout||e.cellRenderer!==r.cellRenderer||t.visibleStartIndex!==n.visibleStartIndex||t.visibleEndIndex!==n.visibleEndIndex||t.partiallyVisibleStartIndex!==n.partiallyVisibleStartIndex||t.partiallyVisibleEndIndex!==n.partiallyVisibleEndIndex||t.renderStartIndex!==n.renderStartIndex||t.renderEndIndex!==n.renderEndIndex||t.moveIndex!==n.moveIndex}UNSAFE_componentWillUpdate(e,t){this.props.onListUpdate&&t!==this.state&&this.props.onListUpdate(t)}componentDidUpdate(){this._checkForPageRequest()}_getListState(e){const t=this._getListStyle(e),r=e.layout.getLandmarks&&e.layout.getLandmarks(),n=e.layout.getRangesForPosition(e.scrollTop,e.scrollLeft,e.size);return{listStyle:t,landmarks:r,visibleStartIndex:n.visibleStartIndex,visibleEndIndex:n.visibleEndIndex,partiallyVisibleStartIndex:n.partiallyVisibleStartIndex,partiallyVisibleEndIndex:n.partiallyVisibleEndIndex,renderStartIndex:n.renderStartIndex,renderEndIndex:n.renderEndIndex,moveIndex:e.moveIndex}}_getListStyle(e){const{size:t,layout:r,viewportWidth:n,viewportHeight:i,listTop:s,listLeft:a}=e,o={viewportWidth:n,viewportHeight:i,listTop:s,listLeft:a};return r.getListStyle(o,t)}_checkForPageRequest(){const e=this.state;this._shouldRequestPage&&(this._shouldRequestPage=!1,this.props.onPageRequest({startIndex:e.renderStartIndex,endIndex:e.renderEndIndex}))}renderCells(){const{keyPropName:e,items:t,itemsOffset:r,size:n,layout:i,hasNestedList:s,viewportWidth:a,viewportHeight:l,scrollLeft:c,scrollTop:d,cellRenderer:u,isScrolling:p,onPageRequest:m}=this.props,{moveIndex:h,renderStartIndex:y,renderEndIndex:v,partiallyVisibleStartIndex:f,partiallyVisibleEndIndex:b}=this.state;if(!n)return[];let Z=n>t.length&&v===t.length-1;const S=this._keyPool.getKeys(y,v,t,r,e),P=[];return o().each(S,((r,m)=>{const y=r.index,v=r.item,S=y>=f&&y<=b,I=i.getPositionForIndex(y,n,t);(null===v||s)&&(Z=!0);let E={key:m,keyPropName:e,isVirtual:!0,isVisible:S,isScrolling:p,moveIndex:h,viewportWidth:a,viewportHeight:l,cellIndex:y,cellX:I.cellX,cellY:I.cellY,cellWidth:I.cellWidth,cellHeight:I.cellHeight};s&&(E.scrollLeft=c,E.scrollTop=d),o().isString(v)?E[e]=v:E=g(g({},v),E),P.push(u(E))})),this._shouldRequestPage=!!m&&Z&&!p,P}render(){const e=this._getListStyle(this.props),{className:t,isScrolling:r,skipRenderCells:n,children:a}=this.props;return s.createElement("div",{className:i()(t,r&&l.be),style:e},n?null:this.renderCells(),a)}}y.defaultProps={keyPropName:"entityID",items:[],itemsOffset:0,hasNestedList:!1,listTop:0,listLeft:0,isScrolling:!1,skipRenderCells:!1};const v=y},53635:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(67294),i=r(62704),s=r(8067),a=r(14782),o=r(79864),l=r(37920),c=r(20533),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e};function f(e,t){if(t.shouldCenterCell){const r=(t.viewportDimension-t.cellDimension)/2,n=Math.round(e-r);return Math.max(n,0)}return e-(t.offset||0)}class b extends n.Component{constructor(e,t){super(e,t),this.onScrollPositionChange=({scrollTop:e,scrollLeft:t})=>{this.setState({scrollTop:e,scrollLeft:t})},this.onListUpdate=e=>{const{visibleStartIndex:t}=e,{scrollIndex:r,onListScrollIndexChange:n,onListUpdate:i}=this.props;this._currentScrollIndex=t,this.state.isRestoringScrollPosition&&this.setState({isRestoringScrollPosition:!1}),n&&r!==t&&n(t),i&&i(e)},this.onMeasure=e=>{const t=Math.round(e.width),r=Math.round(e.height),{onMeasure:n}=this.props;this.setState({isMeasured:!0,width:t,height:r}),n&&n(e)},this.state={isRestoringScrollPosition:!1,isMeasured:!1,width:null,height:null,scrollTop:0,scrollLeft:0},this._currentScrollIndex=0,e.scrollPositionStorageKey&&(this._scrollPositionKey=`${o.Z.getPageKey()}!scrollPosition!${e.scrollPositionStorageKey}`)}UNSAFE_componentWillMount(){this.props.scrollIndex||this._restoreScrollPosition()}shouldComponentUpdate(e,t){return(0,c.Z)(this,e,t)}componentDidUpdate(e,t){const{scrollIndex:r,scrollDirection:n,shouldCenterScrollIndex:i,layout:s}=this.props,{scrollLeft:a,scrollTop:o,width:c,height:d,isMeasured:u}=this.state;if(null==r||r===this._currentScrollIndex&&!i)return;const p=u&&!t.isMeasured&&r>0,m=u&&r!==e.scrollIndex,h=i!==e.shouldCenterScrollIndex;if(p||m||h){const e=function(e,t,{shouldCenterCell:r,outerPaddingLeft:n,outerPaddingTop:i,scrollerWidth:s,scrollerHeight:a}){return{scrollLeft:e===l._y?f(t.cellX,{shouldCenterCell:r,offset:n,viewportDimension:s,cellDimension:t.cellWidth}):0,scrollTop:e===l.yZ?f(t.cellY,{shouldCenterCell:r,offset:i,viewportDimension:a,cellDimension:t.cellHeight}):0}}(n,s.getPositionForIndex(Math.max(r,0)),{shouldCenterCell:i,outerPaddingLeft:s.options.outerPaddingLeft,outerPaddingTop:s.options.outerPaddingTop,scrollerWidth:c,scrollerHeight:d}),t=e.scrollLeft!==a||e.scrollTop!==o;this.setState({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,isRestoringScrollPosition:p&&t})}}componentWillUnmount(){this._scrollPositionKey&&o.Z.set(this._scrollPositionKey,{scrollTop:this.state.scrollTop,scrollLeft:this.state.scrollLeft})}_restoreScrollPosition(){if(this._scrollPositionKey){const e=o.Z.get(this._scrollPositionKey);e&&this.setState(v({isRestoringScrollPosition:!0},e))}}render(){const e=this.props,{className:t,children:r,scrollerClassName:o,virtualListClassName:l,ignoreWidth:c,ignoreHeight:d,resizeTimeout:u,scrollDirection:p,scrollIndex:y,scrollPositionStorageKey:f,smoothScroll:b,scrollerStyle:Z,forwardedRef:S,onListUpdate:P,onMeasure:I,onScroll:E}=e,w=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(e,["className","children","scrollerClassName","virtualListClassName","ignoreWidth","ignoreHeight","resizeTimeout","scrollDirection","scrollIndex","scrollPositionStorageKey","smoothScroll","scrollerStyle","forwardedRef","onListUpdate","onMeasure","onScroll"]),{isMeasured:C,isRestoringScrollPosition:M,width:D,height:O,scrollTop:T,scrollLeft:x}=this.state;return n.createElement(i.Z,{className:t,ignoreHeight:d,ignorePosition:!0,ignoreWidth:c,resizeTimeout:u,onMeasure:this.onMeasure},C?n.createElement(s.Z,{ref:S,className:o,enableChildrenProps:!0,scrollDirection:p,scrollLeft:x,scrollTop:T,smoothScroll:!1!==b&&!M,style:Z,onScroll:E,onScrollPositionChange:this.onScrollPositionChange},n.createElement(a.Z,v({className:l,skipRenderCells:M,viewportHeight:O,viewportWidth:D,onListUpdate:this.onListUpdate},w)),r):null)}}b.defaultProps={scrollDirection:l.yZ,scrollerClassName:"VirtualListScroller-scroller-eDZkq_",shouldCenterScrollIndex:!1};const Z=n.forwardRef(((e,t)=>{return n.createElement(b,(r=v({},e),u(r,p({forwardedRef:t}))));var r}))},10125:(e,t,r)=>{"use strict";r.d(t,{Z:()=>U});var n=r(94184),i=r.n(n),s=r(47354),a=r(67294),o=r(45062),l=r(73538),c=r(8067),d=r(62474),u=r(8724),p=r(28201),m=r(37920),h=r(69281),g=r(20533),y=r(87036),v=r(65838),f=r(73190);const b={menuPortal:"Menu-menuPortal-EGqW0f",menuScroller:"Menu-menuScroller-XtY7Ni Scroller-vertical-nKq0Q8",menu:"Menu-menu-OCzudL",isDisabled:"Menu-isDisabled-Enos2t",small:"Menu-small-neDrBw",medium:"Menu-medium-O3rEAq",large:"Menu-large-Qo_IVL"};var Z=Object.defineProperty,S=Object.defineProperties,P=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))E.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))w.call(t,r)&&C(e,r,t[r]);return e},D=(e,t)=>S(e,P(t));const O=(0,d.Z)(y.Z.menuSpeed),T=1e3*O,x=parseInt(v.Z.menuPadding,10),A={ease:"easeOut",duration:O},k={ease:f.Z.motionEasing,duration:O},N={opacity:A,y:k,scale:k},R={preEnter:{opacity:0,y:-10,scale:.95,transition:N},enter:{opacity:1,y:0,scale:1,transition:N},exit:{opacity:0,y:10,scale:.95,transition:N}},L=[{name:"preventOverflow",enabled:!0,options:{altAxis:!0}}];function j(e){return Math.min(window.innerHeight-2*x,e.maxHeight)}class V extends a.Component{constructor(e,t){super(e,t),this.onResize=e=>{this.setState({maxHeight:j(this.props)})},this.onWindowDownPress=e=>{this._isElementContainedOrTarget(e.target)||(this._willMenuClose=!0)},this.onWindowUpPress=e=>{this._willMenuClose&&!this._isElementContainedOrTarget(e.target)&&this.props.onMenuClose(),this._willMenuClose=!1},this.onKeyDown=e=>{const t=e.keyCode;t===o.Mf?u.QE(e):t===o.hY&&(e.preventDefault(),e.stopPropagation(),this.props.onMenuClose(),u.sM())},this.state={maxHeight:j(e)},this._willMenuClose=!1,this._menuID=(0,p.Z)()}componentDidMount(){this.props.isOpen&&this._enable(),window.addEventListener("resize",this.onResize)}shouldComponentUpdate(e,t){return(0,g.Z)(this,e,t)}componentDidUpdate(e,t){const r=e.isOpen&&!e.isAutoCloseDisabled,n=this.props.isOpen&&!this.props.isAutoCloseDisabled;!r&&n?this._enable():r&&!n&&this._disable()}componentWillUnmount(){this.props.isOpen&&!this.props.isAutoCloseDisabled&&this._disable(),window.removeEventListener("resize",this.onResize)}_enable(){u.LJ(document.getElementById(this._menuID)),document.addEventListener("mousedown",this.onWindowDownPress),document.addEventListener("touchstart",this.onWindowDownPress),document.addEventListener("mouseup",this.onWindowUpPress),document.addEventListener("touchend",this.onWindowUpPress),document.addEventListener("keydown",this.onKeyDown)}_disable(){document.removeEventListener("mousedown",this.onWindowDownPress),document.removeEventListener("touchstart",this.onWindowDownPress),document.removeEventListener("mouseup",this.onWindowUpPress),document.removeEventListener("touchend",this.onWindowUpPress),document.removeEventListener("keydown",this.onKeyDown)}_isElementContainedOrTarget(e){const{target:t}=this.props,r=document.getElementById(this._menuID),n=r&&r.contains(e),i=!n&&document.getElementById(t),s=i&&i.contains(e);return n||s}render(){var e;const{children:t,className:r,portalClassName:n,target:o,options:d,isOpen:u,isDisabled:p,scrollerProps:m,size:h,onMouseEnter:g,onMouseLeave:y,onMenuCloseComplete:v}=this.props,{maxHeight:f}=this.state;return a.createElement(l.Z,{className:n,closeTimeoutMilliseconds:T,isOpen:u,options:D(M({placement:"bottom-start"},d),{modifiers:[...L,...null!=(e=null==d?void 0:d.modifiers)?e:[]]}),target:o,onClose:v},a.createElement(s.M_,null,u?a.createElement(s.ww.div,{key:"container",animate:"enter",className:i()(r,b[h],p&&b.isDisabled),exit:"exit",id:this._menuID,initial:"preEnter",variants:R,onMouseEnter:g,onMouseLeave:y},a.createElement(c.Z,D(M({},m),{style:{maxHeight:f}}),t)):null))}}V.defaultProps={className:b.menu,portalClassName:b.menuPortal,size:h.M2,maxHeight:600,isDisabled:!1,scrollerProps:{className:b.menuScroller,scrollDirection:m.yZ,autoScroll:!0}};const U=V},3367:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i(e){const{className:t,children:r}=e;return n.createElement("div",{className:t},r)}i.defaultProps={className:"MenuHeader-menuHeader-CXps09"};const s=i},98476:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(94184),i=r.n(n),s=r(67294),a=r(85448),o=r(25555);const l={menuItem:"MenuItem-menuItem-C_KBbX",isDisabled:"MenuItem-isDisabled-rZRlPi",isHidden:"MenuItem-isHidden-y3qYbX",default:"MenuItem-default-NAJl2g",primary:"MenuItem-primary-M2Oijx",success:"MenuItem-success-YXOqgB",danger:"MenuItem-danger-bTKX6b"};var c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e){const t=e,{className:r,children:n,kind:o,isDisabled:c,isHidden:h}=t,g=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children","kind","isDisabled","isHidden"]);return s.createElement(a.Z,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({className:i()(r,l.menuItem,l[o],c&&l.isDisabled,h&&l.isHidden),"data-testid":"dropdownItem",role:"menuitem"},g),n)}h.defaultProps={kind:o.TP,isDisabled:!1};const g=h},31889:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);const i=function(){return n.createElement("div",{className:"MenuSeparator-separator-ljlcCS"})}},2209:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(45697),s=r.n(i),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,i=e.style,s={viewBox:"0 0 473 540",xmlns:"http://www.w3.org/2000/svg",id:"plex-icon-triangle-right"};s["aria-hidden"]=!t,s.style=i,s.className=a.Z.plexIcon+(r?" "+r:"");const o=[n.createElement.apply(n,["path",{d:"M473 270L0 540V0l473 270z"}].concat([]))];return t&&o.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(o))}o.propTypes={"aria-label":s().string,className:s().string,style:s().object};const l=o;var c=r(10125),d=r(98476),u=r(28201);const p={placement:"right-start"};class m extends n.Component{constructor(e,t){super(e,t),this._openMenu=(e=!1)=>{this.wasDismissed=!1,this._updateMenu(e,!0)},this._closeMenu=(e=!1)=>{this.wasDismissed=e,this._updateMenu(e,!1)},this.onMouseEnter=()=>{this._openMenu()},this.onMouseEnterMenu=()=>{this.wasDismissed||this._openMenu()},this.onMouseLeave=()=>{this.wasDismissed||this._closeMenu()},this.onMenuClose=()=>{this._closeMenu(!0),this.props.onMenuClose()},this.onPress=()=>{this._openMenu(!0)},this.target=(0,u.Z)(),this.state={isOpen:!1},this.wasDismissed=!1}componentWillUnmount(){window.clearTimeout(this._menuTimer)}_updateMenu(e,t){window.clearTimeout(this._menuTimer),this._menuTimer=window.setTimeout((()=>{this.setState({isOpen:t})}),e?0:100)}render(){const{label:e,children:t,isDisabled:r}=this.props,{isOpen:i}=this.state;return n.createElement(n.Fragment,null,n.createElement(d.Z,{className:"NestedMenuItem-item-s6Int5",id:this.target,isDisabled:r,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onPress:this.onPress},e,n.createElement(l,{className:"NestedMenuItem-icon-VQvMcY"})),n.createElement(c.Z,{className:"NestedMenuItem-menu-mc0wP3 Menu-menu-OCzudL",isOpen:i,options:p,target:this.target,onMenuClose:this.onMenuClose,onMouseEnter:this.onMouseEnterMenu,onMouseLeave:this.onMouseLeave},t))}}const h=m},24642:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(45697),i=r.n(n),s=r(67294),a=r(45191),o=r(14580),l=r(20533),c=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class y extends s.Component{constructor(){super(...arguments),this.onPress=e=>{const t=this.props,{children:r}=t,n=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]),{metricsPage:i}=this.context;var s;(0,a.DB)("metrics").trackClick((s=((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e})({},n),d(s,u({page:i}))))}}shouldComponentUpdate(e,t){return(0,l.Z)(this,e,t)}render(){const e=s.Children.only(this.props.children);return s.cloneElement(e,{onPress:(0,o.Z)(this.onPress,e.props.onPress)})}}y.propTypes={children:i().element.isRequired,action:i().string.isRequired},y.contextTypes={metricsPage:i().string.isRequired};const v=y},15598:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(45697),i=r.n(n),s=r(67294),a=r(45191),o=(r(32903),r(35846)),l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r};class p extends s.Component{constructor(e,t){super(e,t),this.page=e.page}getChildContext(){return{metricsPage:this.page}}componentDidMount(){const e=this.props,{children:t,isDelegated:r}=e,n=u(e,["children","isDelegated"]);r||window.requestAnimationFrame((()=>{(0,a.DB)("metrics").trackView(n)}))}UNSAFE_componentWillReceiveProps(e){}componentDidUpdate(e){const t=e,{children:r,isDelegated:n}=t,i=u(t,["children","isDelegated"]),s=this.props,{children:l,isDelegated:c}=s,d=u(s,["children","isDelegated"]),p=n!==c||!(0,o.Z)(i,d);!c&&p&&(0,a.DB)("metrics").trackView(d)}render(){return this.props.children?s.Children.only(this.props.children):null}}p.childContextTypes={metricsPage:i().string.isRequired};const m=p},63135:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(8067),s=r(37920);var a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){var t=e,{children:r,className:a,innerClassName:u,scrollDirection:p}=t,m=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(t,["children","className","innerClassName","scrollDirection"]);const h=p!==s.Hn;return a||(a=h?"ModalBody-modalScroller-QY24jf ModalBody-modalBody-Me4Hwy":"ModalBody-modalBody-Me4Hwy"),n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({autoScroll:!0,className:a,scrollDirection:p},m),h?n.createElement("div",{className:u},r):r)}u.defaultProps={innerClassName:"ModalBody-innerModalBody-T6u3sU"};const p=u},74249:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(83661),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){var t=e,{className:r,children:i}=t,s=((e,t)=>{var r={};for(var n in e)o.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({className:r},s),i)}d.defaultProps={className:i.Z.modalFooter};const u=d},45181:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e){var t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e})({},i),r)}c.defaultProps={className:"ModalFooterButtonBar-buttonBar-Ywyfnd"};const d=c},17516:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294);var i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const c=function(e){var t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e})({className:"ModalHeader-modalHeader-nb9ueN"},i),r)}},10023:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i(e){const{className:t,children:r}=e;return n.createElement("div",{className:t},r)}i.defaultProps={className:"FullPage-container-BafTyc"};const s=i},14093:(e,t,r)=>{"use strict";r.d(t,{Ho:()=>l,Mf:()=>c,pN:()=>d,ZP:()=>u});var n=r(67294),i=r(78386),s=r(54320),a=r(73788),o=r(98116);const l=-1,c=-1,d=-1;function u({className:e,displayIndex:t,displayTotal:r,isAdCountdownTimerEnabled:l,secondsRemaining:c,secondsTotal:d,secondsUntilAd:u}){const p=t>0&&r>0,m=u>0&&u<=5;return p&&!l?n.createElement("div",{className:e},1===r?(0,a.Z)("Ad"):(0,a.Z)("Ad {index} of {total}",{index:t,total:r})):p&&l?c&&d?n.createElement("div",{className:e},n.createElement(i.X,{gap:s.$u.XS},(0,a.Z)("Ad"),n.createElement(o.Z,{easing:"linear",lineWidth:3,progress:Math.round(c/d*100),showProgressText:!1,size:24,strokeColor:"rgba(255, 255, 255, 1)",trackColor:"rgba(255, 255, 255, 0.2)"}),(0,a.Z)("{seconds}s",{seconds:c}))):null:m?n.createElement("div",{className:e},(0,a.Z)("Ad in {seconds}",{seconds:Math.round(u)})):null}},86979:(e,t,r)=>{"use strict";r.d(t,{Z:()=>B});var n=r(67294),i=r(83782),s=r(47354),a=r(73538),o=r(62474),l=r(31722),c=r(87036),d=r(73190);const u={tooltipPortal:"Tooltip-tooltipPortal-nDnX3n",tooltip:"Tooltip-tooltip-VFBXza",tooltipArrow:"Tooltip-tooltipArrow-rrJjO7",tooltipBottomArrow:"Tooltip-tooltipBottomArrow-BppiF5",tooltipTopArrow:"Tooltip-tooltipTopArrow-zHVo6b",tooltipRightArrow:"Tooltip-tooltipRightArrow-xXsf00",tooltipLeftArrow:"Tooltip-tooltipLeftArrow-IFLPOe",tooltipCenterAlignArrow:"Tooltip-tooltipCenterAlignArrow-Y8ToMu",tooltipLeftAlignArrow:"Tooltip-tooltipLeftAlignArrow-SYYsix",tooltipRightAlignArrow:"Tooltip-tooltipRightAlignArrow-jFr4_J",tooltipMiddleAlignArrow:"Tooltip-tooltipMiddleAlignArrow-sM2i0m",topLeft:"Tooltip-topLeft-qrTwnx Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipBottomArrow-BppiF5 Tooltip-tooltipLeftAlignArrow-SYYsix",topCenter:"Tooltip-topCenter-Z9lZYf Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipBottomArrow-BppiF5 Tooltip-tooltipCenterAlignArrow-Y8ToMu",topRight:"Tooltip-topRight-veYwi4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipBottomArrow-BppiF5 Tooltip-tooltipRightAlignArrow-jFr4_J",bottomLeft:"Tooltip-bottomLeft-ZA9QOY Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipLeftAlignArrow-SYYsix",bottomCenter:"Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu",bottomRight:"Tooltip-bottomRight-wLkq3G Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipRightAlignArrow-jFr4_J",middleLeft:"Tooltip-middleLeft-VRPPlf Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipRightArrow-xXsf00 Tooltip-tooltipMiddleAlignArrow-sM2i0m",middleRight:"Tooltip-middleRight-lV0V4L Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipLeftArrow-IFLPOe Tooltip-tooltipMiddleAlignArrow-sM2i0m"};var p=Object.defineProperty,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const v=(0,o.Z)(c.Z.tooltipSpeed),f=1e3*v,b={opacity:{ease:"easeOut",duration:v},y:{ease:d.Z.motionEasing,duration:v},x:{ease:d.Z.motionEasing,duration:v},scale:{ease:d.Z.motionEasing,duration:v}};function Z(e){switch(e){case l.IM:case l.jO:case l.ee:return 5;case l.aV:case l.eO:case l.OI:return-5;case l.Gf:case l.ab:default:return 0}}function S(e){switch(e){case l.IM:case l.jO:case l.ee:return 0;case l.aV:case l.eO:case l.OI:return 0;case l.Gf:return 5;case l.ab:return-5;default:return 0}}function P(e){switch(e){case l.IM:case l.jO:case l.ee:return-5;case l.aV:case l.eO:case l.OI:return 5;case l.Gf:case l.ab:default:return 0}}function I(e){switch(e){case l.IM:case l.jO:case l.ee:return 0;case l.aV:case l.eO:case l.OI:return 0;case l.Gf:return-5;case l.ab:return 5;default:return 0}}const E={before:e=>({opacity:0,y:Z(e),x:S(e),scale:.95,transition:b}),enter:{opacity:1,y:0,x:.001,scale:1,transition:b},exit:e=>({opacity:0,y:P(e),x:I(e),scale:.95,transition:b})},w={[l.IM]:{placement:"top-start"},[l.jO]:{placement:"top"},[l.ee]:{placement:"top-end"},[l.aV]:{placement:"bottom-start"},[l.eO]:{placement:"bottom"},[l.OI]:{placement:"bottom-end"},[l.Gf]:{placement:"left"},[l.ab]:{placement:"right"}};function C(e){const t=e,{children:r,className:i,target:o,attachment:l,options:c,isOpen:d,onMenuClose:p}=t,v=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(t,["children","className","target","attachment","options","isOpen","onMenuClose"]);return n.createElement(a.Z,{className:u.tooltipPortal,closeTimeoutMilliseconds:f,isOpen:d,options:c||w[l],target:o},n.createElement(s.M_,null,d?n.createElement(s.ww.div,((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e})({key:"container",animate:"enter",className:i||u[l],custom:l,exit:"exit",initial:"before",variants:E},v),r):null))}C.defaultProps={attachment:l.eO};const M=C;var D=Object.defineProperty,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const k=function(e){const t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)T.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&O)for(var n of O(e))t.indexOf(n)<0&&x.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))T.call(t,r)&&A(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&A(e,r,t[r]);return e})({},i),r)};var N=Object.defineProperty,R=Object.defineProperties,L=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function B(e){const t=e,{component:r=k,hideOnDisabled:s=!0,hideOnPress:a=!0,showOnFocus:o=!0,showOnHover:l=!0,tooltip:c,tooltipAttachment:d,tooltipClassName:u,tooltipFocusedClassName:p,tooltipOptions:m}=t,h=((e,t)=>{var r={};for(var n in e)V.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&j)for(var n of j(e))t.indexOf(n)<0&&U.call(e,n)&&(r[n]=e[n]);return r})(t,["component","hideOnDisabled","hideOnPress","showOnFocus","showOnHover","tooltip","tooltipAttachment","tooltipClassName","tooltipFocusedClassName","tooltipOptions"]),[g,y]=(0,n.useState)(!1),v=(0,n.useRef)(!1),f=(0,n.useRef)(!1),b=(0,i.Z)(),Z=e.tooltipTarget||e.id||b,S=(0,n.useCallback)(((...t)=>{var r;l&&(f.current=!0,y(!0)),null==(r=e.onMouseEnter)||r.call(e,...t)}),[e,l]),P=(0,n.useCallback)(((...t)=>{var r;l&&(f.current=!1,y(v.current)),null==(r=e.onMouseLeave)||r.call(e,...t)}),[e,l]),I=(0,n.useCallback)(((...t)=>{var r;o&&(v.current=!0,y(!0)),null==(r=e.onFocus)||r.call(e,...t)}),[e,o]),E=(0,n.useCallback)(((...t)=>{var r;e.showOnFocus&&(v.current=!1,y(f.current)),null==(r=e.onBlur)||r.call(e,...t)}),[e]),w=(0,n.useCallback)(((...t)=>{var r;a&&(v.current=!1,f.current=!1,y(!1)),null==(r=e.onPress)||r.call(e,...t)}),[a,e]),C=v.current&&p?p:u;return(0,n.useEffect)((()=>{g&&s&&e.isDisabled&&(v.current=!1,f.current=!1,y(!1))}),[s,g,e.isDisabled]),n.createElement(n.Fragment,null,n.createElement(r,(D=((e,t)=>{for(var r in t||(t={}))V.call(t,r)&&F(e,r,t[r]);if(j)for(var r of j(t))U.call(t,r)&&F(e,r,t[r]);return e})({id:Z},h),R(D,L({onBlur:E,onFocus:I,onMouseEnter:S,onMouseLeave:P,onPress:w})))),c?n.createElement(M,{attachment:d,className:C,isOpen:g,options:m,target:Z},c):null);var D}},60795:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Y});var n=r(67294),i=r(78386),s=r(54320),a=r(73788),o=r(57363),l=r(11750),c=r(90384),d=r(61875),u=r(88855),p=r(65943),m=r(98853),h=r(67815),g=r(89776),y=r(38688),v=r(56422),f=Object.defineProperty,b=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e},C=(e,t)=>b(e,Z(t)),M=(e,t)=>{var r={};for(var n in e)P.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&S)for(var n of S(e))t.indexOf(n)<0&&I.call(e,n)&&(r[n]=e[n]);return r};function D(e){return`${Math.round(10*e)}%`}function O(e){var t=e,{value:r}=t,i=M(t,["value"]);return n.createElement(N,C(w({},i),{icon:o.H,value:D(r)}))}function T(e){var t=e,{value:r}=t,i=M(t,["value"]);return n.createElement(N,C(w({},i),{icon:l.c,value:r.toFixed(1)}))}function x(e){var t=e,{value:r}=t,i=M(t,["value"]);return n.createElement(N,C(w({},i),{icon:c.l,value:D(r)}))}function A(e){var t=e,{value:r}=t,i=M(t,["value"]);return n.createElement(N,C(w({},i),{icon:g.s,value:D(r)}))}function k(e){var t=e,{value:r}=t,i=M(t,["value"]);return n.createElement(N,C(w({},i),{icon:y.Z,value:D(r)}))}function N({icon:e,description:t,value:r,testID:a}){return n.createElement("div",{"data-testid":a,title:`${t} ${r}`},n.createElement(i.X,{align:s.xM.Center,gap:s.$u.XXS,verticalAlign:s.xM.Center},n.createElement(e,{"aria-label":t,size:s.$u.L}),n.createElement(v.x,null,r)))}var R=Object.defineProperty,L=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,U=(e,t,r)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&U(e,r,t[r]);if(L)for(var r of L(t))V.call(t,r)&&U(e,r,t[r]);return e};const B=/^igdb:\/\//,_=/^imdb:\/\//,z=/^rottentomatoes:\/\//,H=/^thetvdb:\/\//,W=/^themoviedb:\/\//,G={certified:function(e){var t=e,{value:r}=t,i=M(t,["value"]);return n.createElement(N,C(w({},i),{icon:p.h,value:D(r)}))},ripe:function(e){var t=e,{value:r}=t,i=M(t,["value"]);return n.createElement(N,C(w({},i),{icon:m.i,value:D(r)}))},rotten:function(e){var t=e,{value:r}=t,i=M(t,["value"]);return n.createElement(N,C(w({},i),{icon:h.Z,value:D(r)}))},spilled:function(e){var t=e,{value:r}=t,i=M(t,["value"]);return n.createElement(N,C(w({},i),{icon:u.P,value:D(r)}))},upright:function(e){var t=e,{value:r}=t,i=M(t,["value"]);return n.createElement(N,C(w({},i),{icon:d.X,value:D(r)}))}};function Q({rating:e,ratingImage:t,audienceRating:r,audienceRatingImage:a}){const o=null==t?void 0:t.substr(t.lastIndexOf(".")+1),l=r&&a&&a.substr(a.lastIndexOf(".")+1),c=o&&G[o],d=l&&G[l];return n.createElement(i.X,{gap:s.$u.S},c?n.createElement(c,{description:"Rotten Tomatoes Critic Rating",value:e}):null,d?n.createElement(d,{description:"Rotten Tomatoes Audience Rating",value:r}):null)}function $(e,t){const{rating:r,ratingImage:n,audienceRating:i,audienceRatingImage:s}=e;return!!r&&!!n&&t.test(n)||!!i&&!!s&&t.test(s)}function K(e,t){const{audienceRating:r,audienceRatingImage:n}=e;return!!r&&!!n&&t.test(n)}function q(e){const{rating:t,audienceRating:r}=e;if(r&&K(e,B))return n.createElement(O,{description:(0,a.Z)("IGDB Rating"),value:r});if($(e,_)){const e=r||t;return e?n.createElement(T,{description:(0,a.Z)("IMDb Rating"),value:e}):null}if(r&&K(e,H))return n.createElement(k,{description:(0,a.Z)("TheTVDB Rating"),value:r});if($(e,W)){const e=r||t;return e?n.createElement(A,{description:(0,a.Z)("TMDB Rating"),value:e}):null}return $(e,z)?n.createElement(Q,F({},e)):t?n.createElement(x,{description:(0,a.Z)("Rating"),value:t}):null}const Y=function(e){return n.createElement(i.X,{align:s.xM.Left},n.createElement(q,F({},e)))}},36475:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(45697),i=r.n(n),s=r(67294),a=r(28216),o=r(72186),l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};function y(...e){const t=(0,a.$j)(...e);return e=>{const r=t(e);function n(e,{metricsPage:t,metricsContext:n}){const i=e,{metricsContext:a}=i,o=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(i,["metricsContext"]);return s.createElement(r,g({metricsContext:a||n,metricsPage:t},o))}var a,l;return n.displayName=`ConnectWithMetrics(${(0,o.Z)(e)})`,n.contextTypes={metricsPage:i().string,metricsContext:i().string},n.propTypes=(a=g({},r.propTypes),l={metricsContext:i().string},c(a,d(l))),n}}},14580:(e,t,r)=>{"use strict";function n(...e){return function(...t){for(let r=0,n=e.length;r<n;r++){const n=e[r];"function"==typeof n&&n(...t)}}}r.d(t,{Z:()=>n})},6742:(e,t,r)=>{"use strict";function n(...e){return e.filter((e=>!!e)).join("--")}r.d(t,{Z:()=>n})},62208:(e,t,r)=>{"use strict";function n(e){const t=parseFloat(e,10);let r=e.match(/m?s/);switch(r&&(r=r[0]),r){case"s":return 1e3*t;case"ms":return t}return 0}r.d(t,{Z:()=>n})},62474:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(62208);function i(e){return(0,n.Z)(e)/1e3}},8724:(e,t,r)=>{"use strict";r.d(t,{sM:()=>y,pc:()=>g,QE:()=>h,LJ:()=>m});var n=r(13469),i=r.n(n),s=r(32903),a=r(39527);function o(e){if(e===document)return!0;if(!e)return!1;if(!e.parentNode)return!1;if(e.style){const t=e.style;if("none"===t.display||"hidden"===t.visibility)return!1}if(window.getComputedStyle){const t=window.getComputedStyle(e);if("none"===t.getPropertyValue("display")||"hidden"===t.getPropertyValue("visibility"))return!1}return o(e.parentNode)}function l(e){let t=e.tabIndex;return null===t&&(t=void 0),!isNaN(t)&&t>=0&&function(e){if(!o(e))return!1;const t=e.nodeName.toLowerCase();return/input|select|textarea|button|object/.test(t)?!e.disabled:"a"!==t||e.href}(e)}function c(e){if(!e)return[];const t=[].slice.call(e.getElementsByTagName("*"),0).filter((e=>l(e)));return i().sortBy(t,(e=>0===e.tabIndex?1/0:e.tabIndex))}let d,u;function p(e){try{e.focus()}catch(e){}}function m(e){d=document.activeElement,u=e,function(e){const t=document.activeElement,r=t&&e&&e.contains(t);t&&!r&&t.blur()}(e)}function h(e){(0,s.Z)(u,"Call `startScopedFocus(element)` before `scopeTabEvent`");const t=c(u);if(!t.length)return;e.preventDefault();const r=document.activeElement,n=r?t.indexOf(r):-1,i=t.length-1;let a;-1===n?a=e.shiftKey?i:0:(a=e.shiftKey?n-1:n+1,a<0?a=i:a>i&&(a=0)),p(t[a])}function g(){(0,s.Z)(u,"Call `startScopedFocus(element)` before `scopeAutoFocus`");const e=c(u),t=i().find(e,(e=>(0,a.Z)(e.getAttribute("data-autofocus"))));t&&p(t)}function y(){d&&(p(d),d=null)}},72186:(e,t,r)=>{"use strict";function n(e){return e.displayName||e.name||"Component"}r.d(t,{Z:()=>n})},75691:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(60354);const i=(0,r(37258).Z)((function(e=-1,t=-1,r=n.IM,i=0,s=0,a){let o;if(r===n.Hn)o={display:"none"};else{switch(o={position:"absolute",width:-1===t?"100%":`${t}px`,height:-1===e?"100%":`${e}px`},r){case n.aV:o.bottom=s||0,o.left=i||0;break;case n.IM:o.top=s||0,o.left=i||0}a&&(o.zIndex=1)}return o}))},9709:(e,t,r)=>{"use strict";function n(e){const{friendlyName:t,isShared:r}=e;return r?t:void 0}r.d(t,{Z:()=>n})},77713:(e,t,r)=>{"use strict";function n(e){const{friendlyName:t,sourceTitle:r,isShared:n}=e;return n?r:t}r.d(t,{Z:()=>n})},28201:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let n=0;const i=function(){return"id-"+n++}},15770:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i(e,t=!0){const r=(0,n.useRef)(!1);(0,n.useEffect)((()=>{if(t&&!r.current)return r.current=!0,e()}),[t,e,r])}},4820:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i(){const[e,t]=(0,n.useState)(!1),r=(0,n.useCallback)((()=>{t(!0)}),[]),i=(0,n.useCallback)((()=>{t(!1)}),[]);return[e,{onMouseEnter:r,onMouseLeave:i,onFocus:r,onBlur:i}]}},23245:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i(e){const t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}},83782:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(28201);const s=function(){const[e]=(0,n.useState)(i.Z);return e}},47435:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(23245),s=r(87036),a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u({isVirtual:e,isVisible:t,isScrolling:r}){return e&&!t||r}function p(e){const{cellIndex:t,cellX:r,cellY:a,cellWidth:p,cellHeight:m,style:h,keyPropName:g,moveDurationMilliseconds:y=400,isVirtual:v}=e,f=e[g],b=(0,i.Z)(f),Z=(0,i.Z)(t),S=!(null==b||null==Z||f!==b||e.cellIndex===Z),P=(0,n.useReducer)((e=>e+1),0)[1],I=(0,n.useRef)(S),E=I.current||S,w=(0,n.useMemo)((()=>function({cellX:e,cellY:t,cellWidth:r,cellHeight:n,style:i,isMoving:a,moveDurationMilliseconds:u,isVirtual:p}){return((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})(p?{position:"absolute",width:r,height:n,transform:`translate3d(${e}px, ${t}px, 0)`,zIndex:a?1:0,transition:a?`transform ${s.Z.defaultSpeed}`:"none",transitionDuration:a?`${u}ms`:0}:{position:"relative"},i)}({cellX:r,cellY:a,cellWidth:p,cellHeight:m,style:h,moveDurationMilliseconds:y,isMoving:E,isVirtual:v})),[r,a,p,m,h,y,E,v]),C=(0,n.useRef)(u(e)?null:f);let M;return u(e)?(M=C.current!==f,M&&(C.current=null)):(M=!1,C.current=f),(0,n.useEffect)((()=>{let e;return E&&(I.current=!0,e=window.setTimeout((()=>{I.current=!1,P({})}),2*y)),()=>{e&&window.clearTimeout(e)}}),[y,E,P]),{style:w,isPlaceholder:M}}},94470:(e,t,r)=>{"use strict";r.d(t,{Bz:()=>i,CG:()=>s,G6:()=>a,ti:()=>o,LN:()=>l,Bj:()=>c,Zb:()=>d,BG:()=>u,Rb:()=>p,v4:()=>m,r:()=>h,_G:()=>g,gm:()=>y,dn:()=>v});var n=r(73788);function i(e){return e?void 0:(0,n.Z)("Username is required")}function s(e){return e?void 0:(0,n.Z)("Email address is required")}function a(e){return e?void 0:(0,n.Z)("Password is required")}function o(e){return e?void 0:(0,n.Z)("Password confirmation is required")}function l(e){return e?void 0:(0,n.Z)("Current password is required")}function c(e){return e&&e.length<8?(0,n.Z)("Password must be at least 8 characters"):e&&e.length>128?(0,n.Z)("Password must be no longer than 128 characters"):void 0}function d(e,t){return e!==t.password.value?(0,n.Z)("Passwords must match"):void 0}function u(e){return e?void 0:(0,n.Z)("Verification code is required")}function p(e){return e?void 0:(0,n.Z)("URL is required")}const m=e=>{if(e.length>50)return(0,n.Z)("Full name is too long")},h=140,g=e=>{if(e.length>h)return(0,n.Z)("Bio is too long")},y=e=>{if(e.length>100)return(0,n.Z)("URL too long")},v=e=>{if(e.length>50)return(0,n.Z)("Location too long")}},62896:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(45191);function i(e){const t=(0,n.DB)("appModel").get("embeddedServer");return!!e&&!!t&&e.machineIdentifier===t.get("machineIdentifier")}},56792:(e,t,r)=>{"use strict";function n(e,t){return Math.max(Math.min(e,t-1),0)}r.d(t,{Z:()=>n})},69772:(e,t,r)=>{"use strict";r.d(t,{yZ:()=>i,_y:()=>s,ZP:()=>a}),r(32903);var n=r(56792);const i="vertical",s="horizontal";function a(e={}){const{direction:t=i,rows:r,columns:a,overscan:o=0,innerHorizontalPadding:l=0,innerVerticalPadding:c=0,outerPaddingTop:d=0,outerPaddingRight:u=0,outerPaddingBottom:p=0,outerPaddingLeft:m=0,getCellWidth:h,getCellHeight:g}=e;let y,v,f,b,Z,S,P,I,E,w;function C(e){return t===i?Math.floor(e/S):e%Z}function M(e){return t===i?e%S:Math.floor(e/Z)}function D(e,r){const n=C(e);return t===i?n*S:n}function O(e,r){const n=M(e);return t===i?n:n*Z}return{options:e,getListStyle:function(e,n){const o=[d,u,p,m,n];for(const t in e)o.push(e[t]);const C=o.join(":");if(C===I)return E;y=e.listTop,v=e.listLeft;let M=(e.viewportWidth||0)-u-m,D=(e.viewportHeight||0)-d-p;t===i?M-=v:D-=y,M=Math.max(0,M),D=Math.max(0,D),f=h({innerViewportWidth:M,innerViewportHeight:D,innerHorizontalPadding:l,innerVerticalPadding:c}),b=g({cellWidth:f,innerViewportWidth:M,innerViewportHeight:D,innerHorizontalPadding:l,innerVerticalPadding:c}),Z=Math.max(0,r||Math.floor((D+c)/(b+c))),S=Math.max(0,a||Math.floor((M+l)/(f+l))),P=S*Z;let O=0,T=0;return t===i&&S?(O=S*(f+l)-l,T=Math.ceil(n/S)*(b+c)-c):t===s&&Z&&(O=Math.ceil(n/Z)*(f+l)-l,T=Z*(b+c)-c),w={},I=C,E={width:O+u+m,height:T+d+p},E},getRelativeIndex:function(e,r,a,o){const l=t===a;if(l&&(t===i&&1===S||t===s&&1===Z))return(0,n.Z)(e+r,o);let c,d,u;a===i&&(c=l?S*r:r,d=O(e),u=function(e,r){if(t===i){const t=r-1,n=M(e),i=(C(t)+1)*S-(S-n);let s;return s=i<r?i:t-r%S-(S-1-n),s}{const t=O(e);return(0,n.Z)(t+(Z-1),r)}}(e,o)),a===s&&(c=l?Z*r:r,d=D(e),u=function(e,r){if(t===i){const t=D(e);return(0,n.Z)(t+(S-1),r)}{const t=r-1,n=C(e),i=(M(t)+1)*Z-(Z-n);let s;return s=i<r?i:t-r%Z-(Z-1-n),s}}(e,o));const p=e+c;return d||u?Math.max(Math.min(p,u),d):e},getCoordinateDistance:function(e,t){const r=C(e),n=C(t),i=M(e),s=M(t);return Math.sqrt(Math.pow(n-r,2)+Math.pow(s-i,2))},getPositionForIndex:function(e){const t=e;if(w[t])return w[t];const r=M(e),n=C(e),i={column:r,row:n,cellX:r*(f+l)+v+m,cellY:n*(b+c)+y+d,cellWidth:f,cellHeight:b};return w[t]=i,i},getRangesForPosition:function(e,r,s){const a=t===i?S:Z,d=t===i?(e-y)/(b+c):(r-v)/(f+l),u=P+2*a+o*a*2,p=Math.ceil(d)*a,m=p+P-1,h=Math.floor(d)*a,g=p+P+a-1;let I=h-a*o;const E=(0,n.Z)(I,s)+u-1;return E>=s&&(I=s-u),{visibleStartIndex:(0,n.Z)(p,s),visibleEndIndex:(0,n.Z)(m,s),partiallyVisibleStartIndex:(0,n.Z)(h,s),partiallyVisibleEndIndex:(0,n.Z)(g,s),renderStartIndex:(0,n.Z)(I,s),renderEndIndex:(0,n.Z)(E,s)}}}}},81346:(e,t,r)=>{"use strict";function n(e){const{cellWidth:t,aspectRatio:r,titleHeight:n=0}=e;return Math.floor(t/r+n)}r.d(t,{Z:()=>n})},14090:(e,t,r)=>{"use strict";function n(e,t){const{innerViewportWidth:r,innerHorizontalPadding:n=0}=t;return Math.floor((r+n)/e)-n}function i(e){const{innerViewportWidth:t,innerHorizontalPadding:r=0,preferredCellWidth:i,minCellWidth:s,minColumns:a=1,maxColumns:o=1/0,columnAdjustment:l=0}=e;let c=Math.round((t+r)/(i+r));c+=l,c=Math.max(Math.min(c,o),a);let d=n(c,e);return d<s&&(d=c===a?s:n(c-1,e)),d}r.d(t,{Z:()=>i})},75944:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i(e,t,r){let i=0;return n.Children.map(e,(e=>{if(n.isValidElement(e)){const n=i;return i++,t.call(r,e,n)}return e}))}},20956:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(17633);function i(e){return e===n.wl||e===n.Bs}},61661:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n}),r(32903);const n=function(e,t){return`${e}:${t}`}},50774:(e,t,r)=>{"use strict";r.d(t,{be:()=>n,lW:()=>i,GZ:()=>s,Pv:()=>a,fN:()=>o,DT:()=>l,QZ:()=>c});const n="isScrolling",i="isActive",s="isFocused",a="isDisabled",o="isDragging",l="isDraggingBefore",c="isDraggingAfter"},79864:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let n={};const i={getPageKey:()=>window.location.hash,getKey:e=>`${i.getPageKey()}!${e}`,get:e=>n[e],set(e,t){n[e]=t},remove(e){delete n[e]},clear(){n={}}},s=i},8059:(e,t,r)=>{"use strict";r.d(t,{UP:()=>n,pX:()=>i,WV:()=>s});const n="up",i="right",s="down"},25555:(e,t,r)=>{"use strict";r.d(t,{TP:()=>n,_8:()=>i,T:()=>s,Py:()=>a});const n="default",i="primary",s="danger",a="dark"},17633:(e,t,r)=>{"use strict";r.d(t,{Y3:()=>i,wl:()=>s,sD:()=>a,zg:()=>o,r$:()=>l,F5:()=>c,UC:()=>d,lD:()=>u,g$:()=>p,Uz:()=>m,jF:()=>h,Ap:()=>g,Bs:()=>y,IN:()=>v});var n=r(45697);const i="library",s="continueWatching",a="prePlay",o="playlist",l="player",c="playQueue",d="liveTVTimeline",u="liveTVGrid",p="recommended",m="nowPlaying",h="downloads",g="shared",y="watchTogether",v="watchTogetherLobby";r.n(n)().oneOf(["discover",i,"directoryList","metadataList","timeline",s,a,"postPlayPrevious","postPlayNext",o,l,c,d,u,p,m,h,g,y,v])},59258:(e,t,r)=>{"use strict";r.d(t,{xx:()=>n.SEASON,uG:()=>n.EPISODE,c5:()=>n.ALBUM,IK:()=>n.TRACK,vu:()=>n.CLIP,pV:()=>n.PHOTO,V4:()=>i,t1:()=>s,nW:()=>a});var n=r(85209);const i="extra",s="mixed",a="musicVideo"},37920:(e,t,r)=>{"use strict";r.d(t,{Hn:()=>n,yZ:()=>i,_y:()=>s});const n="none",i="vertical",s="horizontal"},60952:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(45697),i=r.n(n);const s=i().shape({subscribe:i().func.isRequired,dispatch:i().func.isRequired,getState:i().func.isRequired})},69281:(e,t,r)=>{"use strict";r.d(t,{HC:()=>n,M2:()=>i,ln:()=>s});const n="small",i="medium",s="large"},31722:(e,t,r)=>{"use strict";r.d(t,{IM:()=>n,jO:()=>i,ee:()=>s,aV:()=>a,eO:()=>o,OI:()=>l,Gf:()=>c,ab:()=>d});const n="topLeft",i="topCenter",s="topRight",a="bottomLeft",o="bottomCenter",l="bottomRight",c="middleLeft",d="middleRight"},78741:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(86418);function i(e){if(e&&e.features)return e.features.find((e=>e.type===n.Z.CONTENT))}},61495:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(78741);function i(e,t){const r=(0,n.Z)(e);return r&&r.directories?r.directories.find((e=>e.id===t)):null}},54501:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(78741);function i(e,t){return e.reduce(((e,r)=>{const i=(0,n.Z)(r);return(i?i.directories:[]).filter((e=>e.type&&t.includes(e.type))).map((e=>[r.entityID,e])).forEach((t=>{e.push(t)})),e}),[])}},83395:(e,t,r)=>{"use strict";function n(e,t){if(e&&t)for(let r=0,n=e.length;r<n;r++){const n=e[r],{id:i}=n;if(i===t)return n}}r.d(t,{Z:()=>n})},19485:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(1320);function i(e,t,r,i){return(0,n.Z)(e.isCloud,e.machineIdentifier,t.identifier,r,i)}},1320:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(74226),i=r(20683);function s(e,t,r,s={},a){if(r===n._)return s.pivot?i.Z.join("#!",{pivot:s.pivot}):"#!";const o=["#!","media"];return e||o.push(encodeURIComponent(t)),o.push(encodeURIComponent(r),a),i.Z.join(o,s)}},93055:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(8089),i=r(1320);function s(e,t){const{isServer:r,serverIdentifier:s,providerIdentifier:a}=(0,n.Z)(e);return(0,i.Z)(!r,s,a,t)}},26263:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(62896),i=r(19485),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e,t,r,s={},d){if(!(0,n.Z)(e))return r?(0,i.Z)(e,t,((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({source:r.id},s),d):(0,i.Z)(e,t,s,d)}},71667:(e,t,r)=>{"use strict";r.d(t,{tk:()=>p,ZP:()=>h});var n=r(20683),i=r(78741),s=r(26263),a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e};const p={RECORDING_SCHEDULE:"view://dvr/recording-schedule",GUIDE:"view://dvr/guide",TIMELINE:"view://photo/timeline",SHARED_ITEMS:"view://shared-items",HOME_RECOMMENDED:"view://home/recommended",HOME_WATCHLIST:"view://home/watchlist"},m={[p.RECORDING_SCHEDULE]:{getRouteParams:()=>({pivot:p.RECORDING_SCHEDULE})},[p.GUIDE]:{getRouteParams:()=>({pivot:p.GUIDE})},[p.TIMELINE]:{getRouteParams:(e,t)=>({pivot:p.TIMELINE,key:n.Z.join([e.key,t.id,"cluster"],{clusterZoomLevel:1})})},[p.SHARED_ITEMS]:{getRouteParams:(e,t)=>({key:t.pivots[0].key})}};function h(e,t,r,n,a={}){if(!function(e){return!!m[e]}(e))return;const o=m[e],l=(0,i.Z)(r);return(0,s.Z)(t,r,n,o.getRouteParams?u(u({},a),o.getRouteParams(l,n)):a)}},35846:(e,t,r)=>{"use strict";function n(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;const i=Object.prototype.hasOwnProperty;for(let n=0;n<r.length;n++)if(!i.call(t,r[n])||e[r[n]]!==t[r[n]])return!1;return!0}r.d(t,{Z:()=>n})},20533:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(35846);function i(e,t,r,i,s){const a=s||n.Z;let o=a(e.props,t);return o&&(o=a(e.state,r),o&&i&&(o=a(e.context,i))),!o}},87036:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={defaultSpeed:"0.2s",slowSpeed:"0.6s",fastSpeed:"0.1s",motionEasing:"cubic-bezier(0.6, 0.4, 0.2, 1.4)",modalSpeed:"0.2s",menuSpeed:"0.15s",tooltipSpeed:"0.15s"}},28309:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});const n="#e5a00d",i="rgba(0, 0, 0, 0.15)",s="rgba(0, 0, 0, 0.3)",a={defaultColor:"#fff",quietColor:"#a8a8a8",inverseColor:"#222",primaryColor:"#cc7b19",primaryAlternateColor:"#e5a00d",selectedColor:n,successColor:"#6b5",dangerColor:"#f53",warningColor:"#f0ad4e",focusColor:"#88AAFF",appBackgroundColor:"#444f56",darkOpaqueBackgroundColor:"#1f2326",blackDarkTranslucentBackgroundColor:i,blackDarkerTranslucentBackgroundColor:s,lightTranslucentBackgroundColor:"rgba(255, 255, 255, 0.15)",badgeBackgroundColor:i,defaultBadgeColor:"rgba(255, 255, 255, 0.7)",defaultLinkColor:"rgba(255, 255, 255, 0.7)",defaultLinkHoverColor:"#fff",defaultLinkDisabledLinkColor:"rgba(255, 255, 255, 0.3)",selectedLinkColor:n,selectedLinkHoverColor:"lighten(#e5a00d, 0.2)",defaultBackgroundColor:"rgba(255, 255, 255, 0.25)",defaultHoverBackgroundColor:"rgba(255, 255, 255, 0.3)",defaultActiveBackgroundColor:"rgba(255, 255, 255, 0.2)",defaultDisabledBackgroundColor:"rgba(255, 255, 255, 0.15)",primaryButtonColor:"#1f2326",primaryBackgroundColor:"#e5a00d",primaryHoverBackgroundColor:"lighten(#e5a00d, 0.2)",primaryActiveBackgroundColor:"darken(#e5a00d, 0.2)",primaryDisabledColor:"rgba(0, 0, 0, 0.4)",primaryDisabledBackgroundColor:"darken(#e5a00d, 0.5)",quietBackgroundColor:"rgba(255, 255, 255, 0.08)",quietHoverBackgroundColor:"rgba(255, 255, 255, 0.1)",quietActiveBackgroundColor:"rgba(255, 255, 255, 0.06)",successBackgroundColor:"#3d7832",successHoverBackgroundColor:"lighten(#3d7832, 0.1)",successActiveBackgroundColor:"darken(#3d7832, 0.1)",successDisabledBackgroundColor:"darken(#3d7832, 0.3)",dangerBackgroundColor:"#b32",dangerHoverBackgroundColor:"lighten(#b32, 0.1)",dangerActiveBackgroundColor:"darken(#b32, 0.1)",dangerDisabledBackgroundColor:"darken(#b32, 0.3)",darkBackgroundColor:s,darkHoverBackgroundColor:"rgba(255, 255, 255, 0.3)",darkActiveBackgroundColor:"rgba(255, 255, 255, 0.2)",darkDisabledBackgroundColor:"rgba(255, 255, 255, 0.15)",headerColor:"rgba(255, 255, 255, 0.3)",dimColor:"rgba(255, 255, 255, 0.45)",secondaryContentColor:"rgba(255, 255, 255, 0.75)",shadowColor:"rgba(0, 0, 0, 0.35)",dividerColor:s,scrollbarBackgroundColor:"rgba(255, 255, 255, 0.2)",scrollbarHoverBackgroundColor:"rgba(255, 255, 255, 0.3)",scrollbarInactiveBackgroundColor:"rgba(255, 255, 255, 0.05)",errorBackgroundColor:"rgba(255, 85, 51, 0.3)",inputBackgroundColor:"rgba(255, 255, 255, 0.25)",inputFocusBackgroundColor:"#eee",inputColor:"#eee",inputFocusColor:"#555",inputPlaceholderColor:"#afb0b1",inputDisabledOpacity:"0.5",formSectionBackgroundColor:s,formSectionHoverBackgroundColor:i,modalBackdropBackgroundColor:"rgba(102, 102, 102, 0.6)",modalBackgroundColor:"#2d2d2d",modalBodyBackgroundColor:i,menuBackgroundColor:"#191a1c",menuDisabledBackgroundColor:"#2d2d2d",menuItemHoverBackgroundColor:"rgba(255, 255, 255, 0.08)",menuItemActiveBackgroundColor:"rgba(255, 255, 255, 0.15)",menuSeparatorBackgroundColor:"rgba(200, 200, 200, 0.15)",tooltipBackgroundColor:"#191a1c",pageHeaderBackgroundColor:"rgba(0, 0, 0, 0.7)",pageHeaderLinkColor:"#999",pageHeaderLinkHoverColor:"#eee",pageHeaderColor:"rgba(255, 255, 255, 0.75)",sidebarBackgroundColor:i,sidebarMenuButtonBackgroundColor:s,sidebarMenuButtonHoverBackgroundColor:"rgba(0, 0, 0, 0.45)",sidebarMenuButtonActiveBackgroundColor:"rgba(0, 0, 0, 0.75)",stripeListAlternateBackgroundColor:"rgba(255, 255, 255, 0.02)",stripeListHoverBackgroundColor:"rgba(255, 255, 255, 0.06)",stripeListSelectedBackgroundColor:i,liveTVSettingsAddDeviceButtonBackground:"rgba(0, 0, 0, 0.2)",liveTVSettingsBackground:"rgba(0, 0, 0, 0.3)"}},65838:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={smallSize:"26px",mediumSize:"30px",largeSize:"36px",gapSmall:"15px",gapMedium:"30px",gapLarge:"60px",navigationHeaderHeight:"60px",navigationUserMenuImageSize:"34px",pageHeaderHeight:"60px",breadcrumbMargin:"25px",menuSmallWidth:"120px",menuMediumWidth:"180px",menuLargeWidth:"220px",menuPadding:"8px",menuItemTopPadding:"4px",menuItemSidePadding:"20px",toolbarButtonWidth:"50px",posterTitlePadding:"10px",posterTitleHeight:"20px",searchResultActionsButtonWidth:"40px",universalSearchResultHeight:"68px",sidebarWidth:"240px",sidebarRightGutterWidth:"15px",sidebarLeftGutterWidth:"25px",tableCellPadding:"20px",tableHeaderHeight:"40px",tableRowHeight:"40px",tableTitleHeight:"60px",inputMaxWidth:"360px",inputBorderRadius:"4px",autosuggestSuggestionRadius:"4px",smallArrowWidth:"6px",mediumArrowWidth:"8px",largeArrowWidth:"10px",tooltipArrowSize:"6px",tooltipMarginTop:"-6px",breakpointMobileNarrow:"320px",breakpointExtraSmall:"480px",breakpointSmall:"768px",breakpointMedium:"992px",breakpointLarge:"1200px",modalBodyPadding:"30px",avatarFormEditSize:180,avatarFormSectionSize:80,thumbSize:"40px"}},73190:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={motionEasing:[.6,.4,.2,1.4]}},52711:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(55438),i=r(79711);const s=i.Z.extend({mixins:[n.Z],initialize({appModel:e}){i.Z.prototype.initialize.apply(this,arguments),this.appModel=e,this.listenTo(this.appModel,"change:primaryServer",this.onPrimaryServerChange)},supportsRetry:e=>!0,onPrimaryServerChange(e,t){t&&!t.get("hasEventConnection")&&(this.stop(t),this.start(t))}})},82479:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(13469),i=r.n(n),s=r(94818),a=r(20573),o=r(86832),l=r(55438);const c=s.Z.extend({mixins:[l.Z],initialize(e){this.name=e.name||"ServerEventManager",this.appModel=e.appModel,this.servers=e.servers||this.appModel.get("servers"),this.isValidServer=e.isValidServer,this.supportsLongPolling=e.supportsLongPolling,this.allowMultipleConnections=e.allowMultipleConnections,this.allowAppendingHeaders=e.allowAppendingHeaders,this.ServerEventConnection=e.ServerEventConnection,this.connections={},this._serverRetryManager=new e.ServerRetryManager({appModel:this.appModel,callback:this.retryServerConnections.bind(this),logFormat:"[Connections] Retrying server events connection for %s in %s seconds"})},start(){this.allowMultipleConnections?this.listenTo(this.servers,{"change:isResolved":this.onServerResolvedChange,"change:isRejected":this.onServerRejectedChange,remove:this.onServerRemove,reset:this.onServersReset}):this.listenTo(this.appModel,"change:primaryServer",this.onPrimaryServerChange)},stop(){this.stopListening(),this._serverRetryManager.stopAll(),this.disconnectAll(),this.connections={}},tryConnectServer(e){const t=this.connections[e.id];this.isValidServer(e)&&!t&&(a.Z.hasWebSocket||this.supportsLongPolling?this.connect({server:e}).then(null,(()=>{this._serverRetryManager.start(e)})):e.trigger("socket:websocket",{error:!0}))},connect(e){const t=e.server;let r=this.connections[t.id];r||(r=new this.ServerEventConnection({server:t,appendHeaders:this.allowAppendingHeaders}),this.connections[t.id]=r,this.listenTo(r,{open:this.onOpen,close:this.onClose,error:this.onClose}));const n=r.open(),i=r.socket?r.socket.url:r.pollUrl;return(0,o.Z)(`[${this.name}] Opening server event connection to ${t.get("debugName")} at ${i}`),n},disconnectAll(){i().each(this.connections,(e=>{this.disconnect({connection:e})}))},disconnect(e){let t=e.connection;if(t||(t=this.connections[e.server.id]),t){const e=t.socket?t.socket.url:t.pollUrl,r=t.server;(0,o.Z)(`[${this.name}] Closing server event connection to ${r.get("debugName")} at ${e}`),this.stopListening(t),this._serverRetryManager.stop(t.server),t.close(),delete this.connections[t.server.id]}},retryServerConnections:function(e){this.isValidServer(e)&&e.get("isResolved")&&this.connect({server:e})},onPrimaryServerChange(e,t){this.disconnectAll(),t&&this.tryConnectServer(t)},onServerResolvedChange(e,t){t&&this.tryConnectServer(e)},onServerRejectedChange(e,t){t&&this.disconnect({server:e})},onServerRemove(e){const t=this.connections[e.id];if(t&&(this.disconnect({connection:t}),e.get("isMerged")&&t)){const t=this.servers.get(e.id);this.connect({server:t})}},onServersReset(e,t){const r=t.previousModels;i().each(r,(t=>{e.contains(t)||this.disconnect({server:t})}))},onOpen(e){const t=this.connections[e.id],r=t.socket?t.socket.url:t.pollUrl;o.Z.info(`[${this.name}] Opened server event connection to ${e.get("debugName")} at ${r}`),this._serverRetryManager.stop(e)},onClose(e){o.Z.warn(`[${this.name}] Unexpectedly closed server event connection to ${e.get("debugName")}`),this._serverRetryManager.start(e)}})},79711:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(13469),i=r.n(n),s=r(94818),a=r(86832);const o=s.Z.extend({maximumDelay:30,initialize({callback:e,logFormat:t}){this._serversBeingRetried={},this.callback=e,this.logFormat=t},start(e){this._serversBeingRetried[e.cid]||this.supportsRetry(e)&&(this._serversBeingRetried[e.cid]={server:e,attempt:1},this._scheduleRetry(e))},stop(e){const t=this._serversBeingRetried[e.cid];t&&(window.clearTimeout(t.timeout),delete this._serversBeingRetried[e.cid])},stopAll(){i().each(this._serversBeingRetried,((e,t)=>{window.clearTimeout(e.timeout),delete this._serversBeingRetried[t]}))},supportsRetry:e=>!0,_scheduleRetry(e){const t=this._serversBeingRetried[e.cid],r=2*Math.min(this.maximumDelay/2,t.attempt);(0,a.Z)(this.logFormat,e.get("debugName"),r),t.timeout=window.setTimeout((()=>{this.callback(e),t.attempt++,this._scheduleRetry(e)}),1e3*r)}})},19395:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(13469),i=r.n(n);function s(e,t){const r=t.constructor.prototype.validate;return r?r(e):[]}function a(e){const t=this.panes[e],r=c.call(this,t);return 0===s.call(this,r,t).length}function o(e,t){let r=this.panes[t].dependentPanes;return"function"==typeof r&&(r=r.call(this)),e.concat(r||[])}function l(){const e=this.$(".change-pane-btn");e.addClass("disabled").removeClass("selected"),i().each(this.getReachablePanes(),(function(t){e.filter("."+t+"-btn").removeClass("disabled")}),this),e.filter("."+this.selectedPane+"-btn").addClass("selected")}function c(e){return this[e.model]||this[this.panesModel]||this.model}const d={showPane:function(e){if(e===this.selectedPane)return;const t=this.paneRegion.currentView;t&&(this.stopListening(t,"valid",l),this.stopListening(t,"invalid",l),this.$el.removeClass("pane-"+this.selectedPane),this.onPaneHide&&this.onPaneHide(this.selectedPane,t)),this.selectedPane=e;const r=this.panes[e],n=r.constructor,s=this.paneConstructorArg?this.paneConstructorArg():{},a=new n(i().extend(s,{model:c.call(this,r)}));if(a.onModalClose){this._paneOnModalCloseCallbacks||this.listenToOnce(this,"close",(function(){i().each(this._paneOnModalCloseCallbacks,(function(e){e[1].call(e[0])}),this),this._paneOnModalCloseCallbacks=null}));const e=this._paneOnModalCloseCallbacks||[];e.push([a,a.onModalClose]),this._paneOnModalCloseCallbacks=i().uniq(e,(function(e){return e[1]}))}this.listenTo(a,"valid",l),this.listenTo(a,"invalid",l),l.call(this),this.onPaneShow&&this.onPaneShow(e,a),this.$el.addClass("pane-"+e),this.paneRegion.show(a),l.call(this)},getReachablePanes:function(){const e=i().reduce(this.panes,(function(e,t){let r=t.dependentPanes;return"function"==typeof r&&(r=r.call(this)),i().union(e,r||[])}),[],this);let t,r,n=i().filter(i().keys(this.panes),(function(t){return!i().contains(e,t)})),s=n;for(;s.length;)t=i().filter(s,a,this),r=r||t.length!==s.length,s=i().reduce(t,o,[],this),n=n.concat(s);return n.isAnyInvalid=r,n},onChangePaneClick:function(e){e.preventDefault();const t=this.$(e.currentTarget);t.isDisabled()||this.showPane(t.data("pane"))}}},47970:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(13469),i=r.n(n);const s={currentState:null,enterState:function(e){if(e===this.currentState)return;const t=this.currentState,r=this.states[e];if(!r)throw new Error("The state machine is unable to enter undefined state: "+e);if(t){const e=this.states[t];if(i().isFunction(e.onExit)&&!1===e.onExit.call(this))return}this.currentState=e,i().isFunction(r.onEnter)&&!1===r.onEnter.apply(this,i().rest(arguments))?this.currentState=t:this.triggerMethod("stateMachineChange",{from:t,to:e})},enterNextState:function(){let e;if(this.currentState)e=this.states[this.currentState].nextState;else{if(!this.initialState)throw new Error("An initial state must be defined for the state machine");e=this.initialState}e?this.enterState(e):this.triggerMethod("stateMachineComplete")}}},36375:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(13220),i=r(18655),s=r(71273),a=r(20683),o=r(32975);const l=n.Z.extend({name:"FileModel",idAttribute:"key",rootPropertyName:"File",syncedAttrs:{key:i.Z.string,title:i.Z.string,path:i.Z.string,network:i.Z.boolean}}),c=o.Z.extend({name:"FileCollection",model:l}),d=n.Z.extend({name:"FilePathModel",context:["server","includeFiles"],idAttribute:"key",rootPropertyName:"Path",sessionAttrs:{isBackShortcut:i.Z.boolean},sessionRelations:{children:function(){const e={};return this.includeFiles&&(e.includeFiles=1),{relationClass:r(36375).Z,options:{url:a.Z.join([this.id],e)}}}},syncedAttrs:{key:i.Z.string,title:i.Z.string,path:i.Z.string,home:i.Z.boolean,network:i.Z.boolean}}),u=o.Z.extend({name:"FilePathCollection",context:["server","includeFiles"],model:d,url(){const e={};return this.includeFiles&&(e.includeFiles=1),a.Z.join(["/services/browse"],e)}}),p=n.Z.extend({name:"FilePathListModel",responseType:s.AV,context:["server","includeFiles","url"],url(){const e={};return this.includeFiles&&(e.includeFiles=1),a.Z.join(["/services/browse"],e)},sessionAttrs:{truncatedFilesCount:i.Z.integer},syncedRelations:{paths:{relationClass:u,rootPropertyName:"Path"},files:{relationClass:c,rootPropertyName:"File"}},augmentResponse:e=>(e.File&&(e.truncatedFilesCount=Math.max(0,e.File.length-500),e.File=e.File.slice(0,500)),e)})},70825:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(32975),i=r(13220),s=r(18655);const a=i.Z.extend({name:"MatchResultModel",context:["server"],idAttribute:"guid",rootPropertyName:"SearchResult",syncedAttrs:{id:s.Z.integer,guid:s.Z.string,name:s.Z.string,parentGUID:s.Z.string,parentName:s.Z.string,type:s.Z.string,index:s.Z.integer,score:s.Z.integer,thumb:s.Z.string,year:s.Z.integer,matched:s.Z.boolean,disambiguation:s.Z.string,area:s.Z.string,beginArea:s.Z.string,lifespanBegin:s.Z.string,lifespanEnd:s.Z.string,summary:s.Z.string},syncedRelations:{children:function(){return{relationClass:r(70825).Z,rootPropertyName:"SearchResult"}}},derivedAttrs:{normalizedScore:function(){const e=this.get("score");if(null!=e)return Math.min(Math.max(e,0),100)}}}),o=n.Z.extend({name:"MatchResultCollection",context:["server"],model:a,url:function(){return"/library/metadata/"+this.parent.id+"/matches"}})},8539:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(87947),i=r(58090),s=r(19755),a=r.n(s),o=r(13469),l=r.n(o),c=r(54122),d=r(21580),u=r(97968),p=r(10644),m=r(20683);const h=c.Z.extend({idAttribute:"ratingKey",whitelistedAttrs:["guid","addedAt","composite","duration","key","leafCount","playlistType","ratingKey","smart","summary","title","type","allowSync"],defaults:function(){return{children:new d.Z([],{server:this.server,parent:this,url:function(){const e="/playlists/"+this.parent.id+"/items";let t;return"audio"===this.parent.get("playlistType")&&(t={includeRelated:1}),m.Z.join(e,t)}})}},urlRoot:"/playlists",saveUrl:function(){return"/library/metadata/"+this.id},cacheKey:function(e){if(e.key)return this.server&&this.server.getScopedKey(e.key)},initialize:function(){this.listenToOnce(this.get("children"),"add",(function(e){this.set("art",e.get("art"))}))},parse:function(e){let t=this.convert(e);return t.Playlist&&(t=t.Playlist),p.Z.parseInteger(t,["duration","leafCount","addedAt"]),p.Z.parseBoolean(t,["smart","allowSync"]),t.isPlaylist=!0,t},findItem:function(e){return this.get("children").findWhere({playlistItemID:e})},moveItem:function(e,t){const r=t?{after:t}:{},n=m.Z.join([l().result(this,"url"),"/items/",e,"/move"],r),i=l().extend(this.server.getXHROptions(n),{type:"PUT"}),s=a().ajax(i),o=this.get("children"),c=this.findItem(e);o.remove(c);const d=this.findItem(t),u=d?o.indexOf(d)+1:0;return o.add(c,{at:u}),s},removeItem:function(e){e=e.toString();const t=m.Z.join([l().result(this,"url"),"/items/",e]),r=l().extend(this.server.getXHROptions(t),{type:"DELETE"}),n=a().ajax(r);n.then(l().bind((function(e){this.set(this.parse(e))}),this));const i=this.get("children"),s=this.findItem(e);return i.remove(s),n},addContent:function(e,t){const r=this.isNew()?"POST":"PUT",n=[l().result(this,"url")],i={};this.isNew()?(i.type=this.get("playlistType"),i.title=this.get("title"),i.smart=this.get("smart")?1:0):n.push("/items"),e.get("playQueueID")?i.playQueueID=e.get("playQueueID"):i.uri=u.Z.uri(e,t);const s=m.Z.join(n,i),o=l().extend(e.server.getXHROptions(s),{type:r}),c=a().ajax(o);return c.then(l().bind((function(e){this.set(this.parse(e))}),this)),c.promise()},isLibraryItem:function(){return!0},isPlexMusicItem:function(){return!1}});var g=r(32975),y=r(69407);const v=g.Z.extend({name:"VersionGeneratorCollection",context:["server"],model:y.Z,url(){return m.Z.join(["playlists",this.parent.id,"items"],{type:i.Z.LOCAL})}}),f=h.extend({defaults:function(){return{children:new v([],{server:this.server,parent:this})}},findItem:function(e){return this.get("children").get(e)},addContent:function(e){const t=[l().result(this,"url"),"items",e.id],r=m.Z.join(t,e.getSaveParams()),n=l().extend(e.server.getXHROptions(r),{type:"PUT"}),i=a().ajax(n);return i.then(l().bind((function(e){this.set(this.parse(e))}),this)),i.promise()}}),b=n.Z.extend({model:f,url:"/playlists?type="+i.Z.LOCAL,parse:function(e){return this.convert(e,"Playlist")}})},40174:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(87947),i=r(58090),s=r(19755),a=r.n(s),o=r(13469),l=r.n(o),c=r(54122),d=r(37233),u=r(8523),p=r(10644),m=r(20683);const h=c.Z.extend({idAttribute:"playQueueID",whitelistedAttrs:["playQueueID","playQueueSelectedItemID","playQueueSelectedItemOffset","playQueueSelectedMetadataItemID","playQueueLastAddedItemID","playQueueShuffled","playQueueSourceURI","playQueueTotalCount","playQueueVersion","message"],defaults:{selectedItem:null,mediaType:null,owned:!0,hasUserAdditions:!1,playQueueVersion:0},metadataElementNames:["Directory","Video","Track","Photo","Hub"],url:function(){return"/playQueues/"+this.id},initialize:function(){this.listenTo(this,"change:message",this.onMessageChange)},_fetch:function(){const e=l().result(this,"url");return this._ajax("GET",e)},convert:function(e){const t=l().isObject(e)?e:p.Z.parseXML(e);return p.Z.parseBoolean(t,"playQueueShuffled"),p.Z.parseInteger(t,["playQueueSelectedItemOffset","playQueueTotalCount","playQueueVersion"]),p.Z.parseArray(t,"Metadata"),t},parse:function(e){l().isString(e)&&(e=p.Z.replaceXMLElementNames(e,this.metadataElementNames,"Metadata"));const t=this.convert(e);t.id&&(t.playQueueID=t.id);const r=l().pick(t,this.whitelistedAttrs);return this.set(r,{silent:!0}),this.pendingChanges=this.changed,this.parseItems(t),r},parseItems:function(e){let t=this.get("collection");const r=e.Metadata,n=!!r.length,i=l().pluck(r,"playQueueItemID").indexOf(e.playQueueSelectedItemID),s=e.playQueueSelectedItemOffset-i;l().each(r,(function(t,r){t.queueIndex=s+r,e.identifier&&(t.identifier=e.identifier),e.mediaTagPrefix&&(t.mediaTagPrefix=e.mediaTagPrefix),e.mediaTagVersion&&(t.mediaTagVersion=e.mediaTagVersion)})),t?t.set(r,{parse:n}):(t=new d.Z(r,{server:this.server,parent:this,parse:n}),this.set("collection",t)),t.totalSize=e.playQueueTotalCount,t.availableRange={start:s,end:s+t.length}},moveItem:function(e,t){if(e===this.get("playQueueSelectedItemID"))return a().Deferred().resolve().promise();this.set("hasUserAdditions",!0);const r={after:t||-1},n=m.Z.join([l().result(this,"url"),"/items/",e,"/move"],r);return this._ajax("PUT",n)},getUpNextRange:function(){const e=this.get("collection"),t=e.get(this.get("playQueueSelectedItemID")),r=e.indexOf(t),n=Math.max(r,0);let i=n;const s=this.get("playQueueLastAddedItemID");if(null!=s){const t=e.get(s),r=e.indexOf(t);r>n&&(i=r)}return{start:n,end:i}},getCurrentItem:function(){const e=this.get("playQueueSelectedItemID");return this.get("collection").findWhere({playQueueItemID:e})||null},_ajax:function(e,t){const r=l().extend(this.server.getXHROptions(t),{type:e}),n=a().ajax(r);return n.done(l().bind((function(e){this.set(this.parse(e)),l().isEmpty(this.pendingChanges)||(l().each(this.pendingChanges,(function(e,t){this.trigger("change:"+t,this,e)}),this),this.trigger("change",this),this.pendingChanges=null),this.set("selectedItem",this.getCurrentItem())}),this)),n.promise()},onMessageChange:function(e,t){t&&u.Z.trigger("show:alert",{type:"error",message:t})}}),g=n.Z.extend({model:h,url:"/playQueues?type="+i.Z.LOCAL,parse:function(e){return this.convert(e,"PlayQueue")}})},69407:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(13220),i=r(18655),s=r(33184),a=r(54834);const o=n.Z.extend({name:"VersionGeneratorMediaSettingsModel",context:["server"],syncedAttrs:{videoQuality:{type:i.Z.integer,save:!0},videoResolution:{type:i.Z.string,save:!0},maxVideoBitrate:{type:i.Z.integer,save:!0},audioBoost:{type:i.Z.integer,save:!0},subtitleSize:{type:i.Z.integer,save:!0},musicBitrate:{type:i.Z.integer,save:!0},photoQuality:{type:i.Z.integer,save:!0},photoResolution:{type:i.Z.string,save:!0}}});var l=r(13469),c=r.n(l),d=r(65372),u=r(71273),p=r(49688),m=r(20683),h=r(32975),g=r(22094);const y=n.Z.extend({name:"VersionGeneratorMetadataModel",context:["server","generator"],idAttribute:"ratingKey",syncedAttrs:c().extend({},g.Z.prototype.syncedAttrs,{processingState:i.Z.string,processingStateContext:i.Z.string})}),v=h.Z.extend({name:"VersionGeneratorMetadataCollection",context:["server","generator"],model:y}),f=n.Z.extend({mixins:[d.Z],name:"VersionGeneratorMetadataListModel",context:["server","generator"],collectionName:"metadataItems",url(){const e=m.Z.join([c().result(this.generator,"url"),"items"]);return this.getPaginatedUrl(e)},sessionAttrs:{currentPageStart:i.Z.integer,currentPageSize:i.Z.integer,populatedRange:i.Z.object},syncedAttrs:{totalSize:i.Z.integer,identifier:i.Z.string,mediaTagPrefix:i.Z.string,mediaTagVersion:i.Z.string,viewGroup:i.Z.string,title:i.Z.string},syncedRelations:{metadataItems:{relationClass:v,rootPropertyName:"Metadata",setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()},augmentResponseText:(e,t)=>t===u.Ls?(0,p.Z)(e):e}),b=n.Z.extend({name:"VersionGeneratorPolicyModel",context:["server"],syncedAttrs:{scope:{type:i.Z.string,save:!0},value:{type:i.Z.integer,save:!0},unwatched:{type:i.Z.boolean,save:!0}},defaults:{unwatched:!1}}),Z=n.Z.extend({name:"VersionGeneratorStatusModel",context:["server"],syncedAttrs:{state:i.Z.string,failureCode:i.Z.string,failure:i.Z.string,itemsCount:i.Z.integer,itemsCompleteCount:i.Z.integer,itemsSuccessfulCount:i.Z.integer,itemsFailedCount:i.Z.integer,itemsDisabledCount:i.Z.integer,totalSize:i.Z.integer}}),S=n.Z.extend({name:"VersionGeneratorModel",context:["server","section","playlistID"],rootPropertyName:"Item",cache:new s.Z,cacheKey(e){return this.server&&this.server.getScopedKey(e.id)},urlRoot(){return`/playlists/${this.playlistID||this.parent.id}/items`},syncedAttrs:{id:i.Z.integer,clientIdentifier:i.Z.string,contentType:i.Z.string,composite:i.Z.string,type:{type:i.Z.integer,save:!0},title:{type:i.Z.string,save:!0},target:{type:i.Z.string,save:!0},targetTagID:{type:i.Z.integer,save:!0},locationID:{type:i.Z.integer,save:!0},Location:{type:i.Z.object,save:!0},Device:{type:i.Z.object,save:!0}},sessionRelations:{children:{relationClass:f,options(){return{generator:this}}}},syncedRelations:{status:{relationClass:Z,rootPropertyName:"Status"},policy:{relationClass:b,rootPropertyName:"Policy",save:!0},mediaSettings:{relationClass:o,rootPropertyName:"MediaSettings",save:!0}},derivedAttrs:{isDirectory(){const e=this.get("Location");if(e.uri)return/(playlist:\/\/|library:\/\/([\w-]*)\/directory\/)/.test(e.uri)}},defaults:()=>({type:42,locationID:-1,Location:{},Device:{}}),defaultCounts:{[a.pX]:5,[a.j0]:50,[a.pV]:50},warningCounts:{[a.pX]:10,[a.j0]:100,[a.pV]:100},getSaveParams(e,t){const r=n.Z.prototype.getSaveParams.apply(this,arguments);return r.targetTagID&&(delete r.MediaSettings,delete r.Device),{Item:r}},setPolicyDefaultsFor(e){const t=this.get("policy"),r=this.get("isDirectory");return t.has("scope")||t.set("scope",r?"count":"all"),!t.has("value")&&r&&t.set("value",this.defaultCounts[e]),this},shouldShowPolicyWarning(e,t){const r=this.get("policy").get("scope");return"count"===r?t>this.warningCounts[e]:"all"===r&&this.get("isDirectory")}})},37722:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(13469),i=r.n(n),s=r(32975),a=r(71273),o=r(49688),l=r(85209),c=r(20683),d=r(13220),u=r(18655);const p=d.Z.extend({name:"MetadataAutocompleteResultModel",context:["server","section","multiMetadataItem","query"],idAttribute:"ratingKey",rootPropertyName:"Metadata",syncedAttrs:{elementName:u.Z.string,ratingKey:u.Z.string,parentRatingKey:u.Z.string,grandparentRatingKey:u.Z.string,type:u.Z.string,title:u.Z.string,parentTitle:u.Z.string,grandparentTitle:u.Z.string,tag:u.Z.string,tagType:u.Z.integer}});function m(e,t,r){const n=/!$/.test(r),i=/\.id$/.test(r);if(n||i)return e[r]=t,e;const s=r.match(/^(.+)\.(.+)/);return s&&(e.type=(0,l.getMetadataType)(s[1]).id,r=s[2]),e[r+".query"]=t,e}const h=s.Z.extend({name:"MetadataAutocompleteResultCollection",context:["server","section","multiMetadataItem","query"],model:p,url(){let e={type:(0,l.getMetadataType)(this.multiMetadataItem.get("type")).id,limit:10};return e=i().reduce(this.query,m,e),c.Z.join([this.multiMetadataItem.sectionUrl(),"autocomplete"],e)},augmentResponseText:(e,t)=>t===a.Ls?(0,o.Z)(e):e})},47480:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(13469),i=r.n(n),s=r(13220),a=r(18655),o=r(32975);const l=s.Z.extend({name:"TagModel",context:["server","section"],idAttribute:"tag",syncedAttrs:{id:a.Z.integer,key:a.Z.string,tag:{type:a.Z.string,save:!0},tagType:a.Z.integer,librarySectionID:a.Z.string,librarySectionKey:a.Z.string,librarySectionType:a.Z.integer,librarySectionTitle:a.Z.string,filter:a.Z.string,role:a.Z.string,thumb:a.Z.string,count:a.Z.integer,directory:a.Z.boolean,type:a.Z.string,context:a.Z.string}}),c=o.Z.extend({name:"TagCollection",context:["server","section"],model:l});var d=r(30428),u=r(97968),p=r(85209),m=r(20683);const h=s.Z.extend({name:"LockedFieldModel",context:["server","section"],idAttribute:"name",syncedAttrs:{name:{type:a.Z.string,save:!0},locked:{type:a.Z.boolean,save:!0}}}),g=o.Z.extend({name:"LockedFieldCollection",context:["server","section"],model:h}),y={Autotag:"autotags",Collection:"collections",Composer:"composers",Conductor:"conductors",Country:"countries",Director:"directors",Genre:"genres",Label:"labels",Mood:"moods",Producer:"producers",Role:"roles",Similar:"similar",Style:"styles",Tag:"tags",Writer:"writers"},v={album:{title:"title",parentRatingKey:"artist.id",parentTitle:"artist.title"},track:{parentRatingKey:"album.id",parentTitle:"album.title",grandparentRatingKey:"artist.id",grandparentTitle:"artist.title"}},f=s.Z.extend({name:"MultiMetadataModel",context:["server","section"],rootPropertyName:"Common",isNew:()=>!1,url(){return m.Z.join([this.sectionUrl(),"common"],this.getUrlParams())},saveUrl(){return m.Z.join([this.sectionUrl(),"all"],this.getUrlParams())},sectionUrl(){return i().result(this.section,"url")},sessionAttrs:{metadataItems:a.Z.array.isRequired,editableTags:a.Z.array,originalSaveParams:a.Z.object,poster:a.Z.string,banner:a.Z.string,art:a.Z.string},syncedAttrs:{mixedFields:a.Z.list.isRequired,key:{type:a.Z.string,save:!0},ratingKey:{type:a.Z.string,save:!0},parentRatingKey:{type:a.Z.string,save:!0},grandparentRatingKey:{type:a.Z.string,save:!0},title:{type:a.Z.string,save:!0},titleSort:{type:a.Z.string,save:!0},originalTitle:{type:a.Z.string,save:!0},parentTitle:{type:a.Z.string,save:!0},grandparentTitle:{type:a.Z.string,save:!0},year:{type:a.Z.string,save:!0},tagline:{type:a.Z.string,save:!0},summary:{type:a.Z.string,save:!0},studio:{type:a.Z.string,save:!0},contentRating:{type:a.Z.string,save:!0},originallyAvailableAt:{type:a.Z.string,save:!0},rating:{type:a.Z.float,save:!0},userRating:{type:a.Z.float,save:!0},index:{type:a.Z.integer,save:!0},parentIndex:{type:a.Z.integer,save:!0},editionTitle:{type:a.Z.string,save:!0}},sessionRelations:{preferences:{relationClass:d.Z}},syncedRelations:Object.keys(y).reduce(((e,t)=>(e[y[t]]={relationClass:c,rootPropertyName:t,save:!0},e)),{lockedFields:{relationClass:g,rootPropertyName:"Field",save:!0}}),derivedAttrs:{type(){const e=this.getSingleMetadataItem();if(e)return e.get("type")},aggregateTitle(){if(this.get("metadataItems").length)return u.Z.title(null,{items:this.get("metadataItems")})},isSingleMetadataItem(){return 1===this.get("metadataItems").length}},defaults:()=>({metadataItems:[],mixedFields:[]}),initialize(e,t){this.set("metadataItems",i().clone(t.metadataItems))},getSingleMetadataItem(){return i().first(this.get("metadataItems"))},getUrlParams(){const e=(0,p.getMetadataType)(this.get("type")),t=i().map(this.get("metadataItems"),(e=>e.get("ratingKey")));return{type:e.id,id:t.join(","),includeExternalMedia:1}},getSaveParams(){const e=s.Z.prototype.getSaveParams.apply(this,arguments),t=this.get("originalSaveParams");if(!t)return e;const r={};if(i().each(e,((e,n)=>{const s=t[n];i().isEqual(e,s)||i().extend(r,this.getSaveParam(n,e,s))})),r.isReparenting){delete r.isReparenting;const e=v[this.get("type")];i().each(e,((e,t)=>{const n=e+".value",s=this.getQueryAttrSibling(e)+".value",a=i().has(r,n),o=i().has(r,s);if(a&&o&&n!==s&&delete r[s],!a&&!o){const e=this.get(t);e&&(r[n]=e)}}))}return r},getSaveParam(e,t,r){if("Field"===e)return this.getFieldSaveParams(e,t,r);if(y.hasOwnProperty(e))return this.getTagSaveParams(e,t,r);const n=v[this.get("type")];if(n&&i().has(n,e)){const r=n[e];return t?{isReparenting:!0,[r+".value"]:t}:void 0}return{[e+".value"]:t}},getFieldSaveParams:(e,t,r)=>t.reduce(((e,t)=>(e[t.name+".locked"]=t.locked,e)),{}),getTagSaveParams(e,t,r){const n=i().map(t,(e=>e.tag)),s=i().map(r,(e=>e.tag)),a=i().without(s,...n),o=e.toLowerCase(),l={};return n.forEach(((e,t)=>{l[o+"["+t+"].tag.tag"]=e})),a.length&&(l[o+"[].tag.tag-"]=i().map(a,encodeURIComponent).join(",")),l},getQueryAttr(e){const t=this.get("type"),r=v[t];return r&&r[e]||e},getQueryAttrSibling(e){const t=this.getQueryAttr(e).match(/(^.*\.)(.*$)/);return t?t[1]+("id"===t[2]?"title":"id"):e}})},26773:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(32975),i=r(13220),s=r(18655);const a=i.Z.extend({name:"AvailableProviderModel",context:["server"],rootPropertyName:"MediaProvider",syncedAttrs:{identifier:s.Z.string,title:s.Z.string}}),o=n.Z.extend({name:"AvailableProvidersCollection",context:["server"],model:a,url:"/media/providers?ignore_opt_outs=true"})},56112:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>a});var n=r(13220),i=r(18655),s=r(30428);const a=n.Z.extend({name:"MediaGrabberDeviceModel",context:["server"],rootPropertyName:"Device",idAttribute:"key",sessionAttrs:{isChannelsPending:i.Z.boolean,isChannelsPopulated:i.Z.boolean,channelsError:i.Z.object,selectedSource:i.Z.string,isSaving:i.Z.boolean,saveError:i.Z.object},syncedAttrs:{key:i.Z.integer,uuid:i.Z.string,parentID:i.Z.integer,uri:i.Z.string,protocol:i.Z.string,status:i.Z.string,state:i.Z.string,lastSeenAt:i.Z.integer,make:i.Z.string,model:i.Z.string,modelNumber:i.Z.string,source:i.Z.integer,sources:i.Z.list,title:i.Z.string,tuners:i.Z.integer,thumb:i.Z.string,unsupported:i.Z.boolean},syncedRelations:{prefs:{relationClass:s.Z,rootPropertyName:"Setting",deferred:!0,save:!0}},defaults:{isChannelsPending:!1,isChannelsPopulated:!1,channelsError:null,isSaving:!1,saveError:null,unsupported:!1}})},78044:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(32975),i=r(13220),s=r(18655),a=r(30428),o=r(56112);const l=n.Z.extend({name:"MediaGrabberDeviceCollection",context:["server"],model:o.ZP,url:"/media/grabbers/devices"}),c=i.Z.extend({name:"DVRModel",context:["server"],rootPropertyName:"Dvr",idAttribute:"key",syncedAttrs:{key:s.Z.integer},sessionAttrs:{isSaving:s.Z.boolean,saveError:s.Z.object},syncedRelations:{devices:{relationClass:l,rootPropertyName:"Device"},prefs:{relationClass:a.Z,rootPropertyName:"Setting",deferred:!0,save:!0}},defaults:{isSaving:!1,saveError:null}}),d=n.Z.extend({name:"DVRCollection",context:["server"],model:c,url:"/livetv/dvrs"})},97577:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(13469),i=r.n(n),s=r(32975),a=r(98065),o=r(13220),l=r(18655),c=r(71273);const d=o.Z.extend({name:"AgentAttributionModel",context:["server"],responseType:c.fL,syncedAttrs:{content:l.Z.string},url:function(){return"/system/agents/attribution?identifier="+this.parent.id},augmentResponse:function(e){return{content:e}}});var u=r(33193);const p=o.Z.extend({name:"LanguageModel",context:["server"],idAttribute:"code",rootPropertyName:"Language",syncedAttrs:{code:l.Z.string,title:l.Z.string,default:l.Z.boolean},derivedAttrs:{name:function(){return this.get("title")||(0,u.Z)(this.get("code"))}}}),m=s.Z.extend({name:"LanguageCollection",context:["server"],model:p,comparator:"name"}),h=o.Z.extend({name:"AgentModel",context:["server"],idAttribute:"identifier",rootPropertyName:"Agent",sessionAttrs:{isPrimary:l.Z.boolean,selected:l.Z.boolean},sessionRelations:{attribution:{relationClass:d}},syncedAttrs:{identifier:l.Z.string,name:l.Z.string,enabled:l.Z.boolean,hasPrefs:l.Z.boolean,order:l.Z.string},syncedRelations:{languages:{relationClass:m,rootPropertyName:"Language"}}}),g=s.Z.extend({name:"AgentCollection",context:["server","mediaTypeID","primaryAgentID","relatedAgentID"],model:h,cache:new a.Z,cacheKey:function(){var e;const t=i().result(this,"url");return null==(e=this.server)?void 0:e.getScopedKey(t)},url:function(){const e="/system/agents";return this.primaryAgentID?e+"/contributors?mediaType="+this.mediaTypeID+"&primaryAgent="+this.primaryAgentID:this.relatedAgentID?e+"/"+this.relatedAgentID+"/config/"+this.mediaTypeID:this.mediaTypeID?e+"?mediaType="+this.mediaTypeID:e},hasExclusiveAgent:function(e){return!!i().intersection(this.pluck("identifier"),e).length}})},70704:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(13469),i=r.n(n),s=r(12152),a=r.n(s);const o=a().extend({constructor:function(e,t,r,n){this.exclusiveAgents=t,this.agentIdentifier=r,a().call(this,e,n),this.filterBy(i().bind(this.filterExclusiveAgent,this))},filterExclusiveAgent:function(e){const t=e.get("identifier"),r=this.exclusiveAgents;if(!r)return!0;const n=this.agentIdentifier,i=-1!==r.indexOf(n),s=-1!==r.indexOf(t);return i?t===n:!s}})},96571:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(13469),i=r.n(n),s=r(13220);const a=s.Z.extend({additionalRelations:[],copyFromModel(e,t){this._copy(e,this,t)},copyToModel(e,t){this._copy(this,e,t)},_copy(e,t,r={}){const n=!!t.releaseCapturedChangeEvents;n||t.startCapturingChangeEvents(),this._copyAttributes(e,t,r),this._copyRelations(e,t,r),n||t.releaseCapturedChangeEvents()},_copyAttributes(e,t,r){const n={};i().each(this.syncedAttrs,((t,i)=>{r.included&&!r.included.includes(i)||(n[i]=e.get(i))})),t.set(n)},_copyRelations(e,t,r){i().each(this.syncedRelations,((n,i)=>{if(r.included&&!r.included.includes(i))return;if(this.additionalRelations.includes(i))return;const a=e.get(i),o=t.get(i);if(a&&o){const e=a.toJSON();o instanceof s.Z?o.set(o.parse(e)):o.set(e,{parse:!0})}}))}})},9939:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(18655),i=r(32975),s=r(13220);const a=s.Z.extend({name:"StoredConnectionSourceModel",syncedAttrs:{id:n.Z.string}}),o=i.Z.extend({name:"StoredConnectionSourceCollection",model:a}),l=s.Z.extend({name:"StoredConnectionModel",idAttribute:"uri",syncedAttrs:{uri:n.Z.string,scheme:n.Z.string,address:n.Z.string,port:n.Z.string,relay:n.Z.boolean},syncedRelations:{sources:{relationClass:o}}}),c=i.Z.extend({name:"StoredConnectionCollection",model:l});var d=r(96571),u=r(9148),p=r(5518),m=Object.defineProperty,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const f=s.Z.extend({name:"StoredProviderModel",idAttribute:"identifier",syncedAttrs:((e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(h)for(var r of h(t))y.call(t,r)&&v(e,r,t[r]);return e})({},p.Z.prototype.syncedAttrs),syncedRelations:{features:{relationClass:u.Z}}}),b=i.Z.extend({name:"StoredProviderCollection",model:f}),Z=d.Z.extend({name:"StoredServerModel",idAttribute:"machineIdentifier",additionalRelations:["connections"],syncedAttrs:{machineIdentifier:n.Z.string,friendlyName:n.Z.string,accessToken:n.Z.string,sourceTitle:n.Z.string,home:n.Z.boolean,serverClass:n.Z.string,platform:n.Z.string,isShared:n.Z.boolean,version:n.Z.string,publicAddressMatches:n.Z.boolean,ownerId:n.Z.integer,mediaProviders:n.Z.integer},syncedRelations:{providers:{relationClass:b},connections:{relationClass:c}}})},29223:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var n=r(18655),i=r(82633),s=(r(32903),r(32975)),a=r(45191),o=r(94080),l=r(2674),c=r(88689),d=r(82058),u=r(48607),p=r(96571),m=r(9939);const h=s.Z.extend({name:"StoredServerCollection",model:m.Z});var g,y,v=r(13220),f=r(45663),b=Object.defineProperty,Z=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const C=v.Z.extend({name:"StoredUserSettingModel",syncedAttrs:(g=((e,t)=>{for(var r in t||(t={}))I.call(t,r)&&w(e,r,t[r]);if(P)for(var r of P(t))E.call(t,r)&&w(e,r,t[r]);return e})({},f.Z.prototype.syncedAttrs),y={isDirty:n.Z.boolean},Z(g,S(y)))}),M=s.Z.extend({name:"StoredUserSettingCollection",model:C}),D=p.Z.extend({name:"StoredUserModel",additionalRelations:["servers"],syncedAttrs:{id:n.Z.integer,authToken:n.Z.string,anonymous:n.Z.boolean,username:n.Z.string,email:n.Z.string,title:n.Z.string,thumb:n.Z.string,pin:n.Z.string,home:n.Z.boolean,restricted:n.Z.boolean,guest:n.Z.boolean,hasAllEntitlements:n.Z.boolean,lastPrimaryServerID:n.Z.string},syncedRelations:{subscriptions:{relationClass:u.Z},roles:{relationClass:c.Z},entitlements:{relationClass:l.Z},services:{relationClass:d.Z},features:{relationClass:o.Z},settings:{relationClass:M},experienceSettings:()=>({relationClass:(0,a.DB)("StoredUserExperienceSettingsModel")}),servers:{relationClass:h}},clearSensitiveAttributes(){this.unset("authToken"),this.unset("pin"),this.get("servers").reset()}}),O=s.Z.extend({name:"StoredUserCollection",model:D}),T=new(i.Z.extend({name:"UserStorageModel",storageKey:"users",sessionAttrs:{activeUserID:n.Z.integer},syncedRelations:{users:{relationClass:O}},initialize(){this.debouncedSaveTimeout=null},debouncedSave(){this.debouncedSaveTimeout&&window.clearTimeout(this.debouncedSaveTimeout),this.debouncedSaveTimeout=window.setTimeout((()=>this.save()),1e3)},flushDebouncedSave(){this.debouncedSaveTimeout&&(window.clearTimeout(this.debouncedSaveTimeout),this.save())},getActiveUser(){const e=this.get("users"),t=this.get("activeUserID");if(null!=t)return e.get(t)},clearActiveUser(){const e=this.getActiveUser();return e&&e.clearSensitiveAttributes(),this.unset("activeUserID"),this.save()},getActiveServers(){const e=this.getActiveUser();if(e)return e.get("servers")}}))},8218:(e,t,r)=>{"use strict";r.d(t,{p:()=>o,Z:()=>l});var n=r(13220),i=r(18655),s=r(76569),a=r(15851);const o={WARNING:"warning",USER:"user",LIBRARIES:"libraries",RESTRICTIONS:"restrictions",SUMMARY:"summary"},l=n.Z.extend({name:"ShareModalModel",context:["server"],sessionAttrs:{steps:i.Z.array,step:i.Z.string,metadataItemEntityID:i.Z.string,friendEntityID:i.Z.string,username:i.Z.string,restrictionProfileIdentifier:i.Z.string,isNewFriend:i.Z.boolean,isAddingHomeUser:i.Z.boolean,isCreatingManagedUser:i.Z.boolean,selectedAllLibrariesMachineIdentifiers:i.Z.array,selectedLibrarySectionIDs:i.Z.array,filterOptionsTags:i.Z.object,isUsernameValidating:i.Z.boolean,isUsernameValidated:i.Z.boolean,isServerOverviewsPopulating:i.Z.boolean,isServerOverviewsPopulated:i.Z.boolean,isServerSharesPopulating:i.Z.boolean,isServerSharesPopulated:i.Z.boolean,serverSharesError:i.Z.string,isFilterOptionsTagsPopulating:i.Z.boolean,isFilterOptionsTagsPopulated:i.Z.boolean,isSharingPending:i.Z.boolean,isSharingCompleted:i.Z.boolean,sharingError:i.Z.string,inviteToken:i.Z.string,inviteTokenError:i.Z.string},sessionRelations:{serverOverviews:{relationClass:s.Z,deferred:!0}},defaults:()=>({steps:[],step:null,metadataItemEntityID:null,friendEntityID:null,username:"",restrictionProfileIdentifier:a.Cc,isNewFriend:!1,isAddingHomeUser:!1,isCreatingManagedUser:!1,selectedAllLibrariesMachineIdentifiers:null,selectedLibrarySectionIDs:null,filterOptionsTags:{},isUsernameValidating:!1,isUsernameValidated:!1,isServerOverviewsPopulating:!1,isServerOverviewsPopulated:!1,isServerSharesPopulating:!1,isServerSharesPopulated:!1,serverSharesError:null,isFilterOptionsTagsPopulating:!1,isFilterOptionsTagsPopulated:!1,isSharingPending:!1,isSharingCompleted:!1,sharingError:null,inviteToken:null,inviteTokenError:null})})},43613:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(13220),i=r(18655),s=r(82650),a=r(35387),o=r(24220),l=r(32975),c=r(78851);const d=l.Z.extend({name:"ServerShareCollection2",context:["server"],model:c.Z});var u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const y=n.Z.extend({name:"FriendModel2",context:["server"],rootPropertyName:"User",entityType:a.vO,entityID(e=this.state){return(0,s.Z)(this.entityType,e.id)},urlRoot(){return this.get("home")?"/api/users":"/api/friends"},sessionAttrs:{user:i.Z.string,isRemoving:i.Z.boolean},syncedAttrs:((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e})({id:i.Z.integer,home:i.Z.boolean,protected:i.Z.boolean,restricted:i.Z.boolean,title:i.Z.string,username:i.Z.string,email:i.Z.string,thumb:i.Z.string,recommendationsPlaylistId:i.Z.string},o.Z),syncedRelations:{serverShares:{relationClass:d,rootPropertyName:"Server"}},defaults:{isRemoving:!1}})},31544:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(87947),i=r(13469),s=r.n(i),a=r(54122),o=r(10644);const l=a.Z.extend({urlRoot:"/api/home/users",whitelistedAttrs:["id","uuid","admin","protected","restricted","restrictionProfile","guest","title","username","email","thumb"],convert(e){let t=s().isObject(e)?e:o.Z.parseXML(e);return t.User&&(t=t.User),o.Z.parseInteger(t,"id"),o.Z.parseBoolean(t,["admin","protected","restricted","guest"]),t},parse(e){let t=this.convert(e);return t=s().pick(t,this.whitelistedAttrs),t},getSaveParams(e,t){if(s().isEmpty(e)){const e={};return this.get("restricted")?e.title=this.get("title"):this.isNew()&&(e.invitedEmail=this.get("username")),e}return a.Z.prototype.getSaveParams.apply(this,arguments)}}),c=n.Z.extend({model:l,url:"/api/home/users",parse(e){return this.convert(e,"User")}})},76057:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(13469),i=r.n(n),s=r(13220),a=r(18655),o=r(82650),l=r(35387),c=r(24220),d=r(20683),u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const y=s.Z.extend({name:"HomeUserModel",context:["server"],rootPropertyName:"User",entityType:l.Tl,entityID(e=this.state){return(0,o.Z)(this.entityType,e.id)},urlRoot(){return this.get("restricted")?"/api/v2/home/users":"/api/home/users"},saveUrl(){let e=i().result(this,"url");return this.get("restricted")&&(e=d.Z.join([e,"/restricted"])),e},pinUrl(){const e=this.get("restricted")?"/api/v2/home/users/restricted":"/api/home/users";return d.Z.join([e,this.get("id")])},sessionAttrs:{isRemoving:a.Z.boolean},syncedAttrs:((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e})({id:a.Z.integer,uuid:a.Z.string,admin:a.Z.boolean,protected:a.Z.boolean,restricted:a.Z.boolean,restrictionProfile:a.Z.string,guest:a.Z.boolean,title:a.Z.string,username:a.Z.string,email:a.Z.string,thumb:a.Z.string},c.Z),defaults:{isRemoving:!1},getSaveParams(e){const t=s.Z.prototype.getSaveParams.apply(this,arguments);return e&&0!==Object.keys(e).length||(this.get("restrictionProfile")&&(t.restrictionProfile=this.get("restrictionProfile")),t.sharingSettings={},Object.keys(c.Z).forEach((e=>{t.hasOwnProperty(e)&&(t.sharingSettings[e]=t[e],delete t[e])})),this.get("restricted")?t.friendlyName=this.get("username"):this.isNew()&&(t.invitedEmail=this.get("username"))),t}})},78851:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(13220),i=r(18655),s=r(78449),a=r(71273),o=r(32975);const l=n.Z.extend({name:"ServerShareLibraryModel",syncedAttrs:{id:i.Z.integer,key:i.Z.string,title:i.Z.string,type:i.Z.string}}),c=o.Z.extend({name:"ServerShareLibraryCollection",context:["server"],model:l});var d=r(24220);const u=n.Z.extend({name:"ServerShareSharingSettingsModel",syncedAttrs:d.Z}),p=n.Z.extend({name:"ServerShareModel2",context:["server"],mergeStrategy:s.Z,responseType:a.AV,urlRoot:"api/v2/shared_servers",syncedAttrs:{id:i.Z.integer,serverId:i.Z.integer,machineIdentifier:i.Z.string,name:i.Z.string,owned:i.Z.boolean,admin:i.Z.boolean,pending:i.Z.boolean,accepted:i.Z.boolean,ownerId:i.Z.integer,inviteToken:i.Z.string,invitedEmail:i.Z.string,invitedAt:i.Z.string,acceptedAt:i.Z.string,lastSeenAt:i.Z.string,deletedAt:i.Z.string,leftAt:i.Z.string,numLibraries:i.Z.integer,allLibraries:i.Z.boolean},syncedRelations:{libraries:{relationClass:c},sharingSettings:{relationClass:u}}})},2674:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(32975),i=r(13220),s=r(18655);const a=i.Z.extend({name:"UserEntitlementModel",syncedAttrs:{id:s.Z.string}}),o=n.Z.extend({name:"UserEntitlementCollection",model:a})},88689:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(32975),i=r(13220),s=r(18655);const a=i.Z.extend({name:"UserRoleModel",syncedAttrs:{id:s.Z.string}}),o=n.Z.extend({name:"UserRoleCollection",model:a})},82058:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(32975),i=r(13220),s=r(18655);const a=i.Z.extend({name:"UserServiceModel",syncedAttrs:{id:s.Z.string,subscriptionType:s.Z.string}}),o=n.Z.extend({name:"UserServiceCollection",model:a})},45663:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(13220),i=r(18655),s=r(39527),a=r(40085),o=r(78154);const l={bool:s.Z,json:o.Z},c=n.Z.extend({name:"UserSettingModel",context:["server"],sessionAttrs:{isDirty:i.Z.boolean},syncedAttrs:{id:i.Z.string,type:i.Z.string,value:i.Z.oneOfType(i.Z.boolean,i.Z.object),hidden:i.Z.boolean,updatedAt:i.Z.integer},defaults:{isDirty:!1},augmentResponse(e){const t=this.get("isDirty"),r=this.get("updatedAt"),n=(0,a.Z)(e.updatedAt),i=r&&n&&r<n;if(t&&r===n||r&&n&&r>n)return this.toJSON();t&&i&&(e.isDirty=!1);const s=l[e.type];return s&&(e.value=s(e.value)),e}})},48607:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(32975),i=r(13220),s=r(18655),a=r(106),o=r(39341);const l=i.Z.extend({name:"UserSubscriptionModel",syncedAttrs:{type:s.Z.oneOf(...o.ZP).isRequired,state:s.Z.oneOf(...a.ZP).isRequired,mode:s.Z.string.isRequired}}),c=n.Z.extend({name:"UserSubscriptionCollection",model:l})},55850:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O,U:()=>D});var n=r(18655),i=r(13220),s=r(32975),a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e};const h={hubIdentifier:n.Z.string,hubKey:n.Z.string,key:n.Z.string,style:n.Z.string,subtype:n.Z.string,title:n.Z.string,type:n.Z.string},g={friendlyName:n.Z.string,machineIdentifier:n.Z.string.isRequired,sourceTitle:n.Z.string},y={identifier:n.Z.string,providerIdentifier:n.Z.string,title:n.Z.string},v=i.Z.extend({name:"HomeHubProviderModel",syncedAttrs:m({},y)}),f=i.Z.extend({name:"HomeHubServerModel",syncedAttrs:m({},g)});var b,Z;const S=i.Z.extend({name:"HomeHubModel",syncedAttrs:(b=m({},h),Z={id:n.Z.string.isRequired,directoryID:n.Z.string.isRequired,directoryKey:n.Z.string.isRequired,isHidden:n.Z.boolean.isRequired,hiddenAt:n.Z.integer},o(b,l(Z))),syncedRelations:{provider:{relationClass:v},server:{relationClass:f}},defaults:{isHidden:!1}}),P=s.Z.extend({name:"HomeHubCollection",model:S});var I=r(6545);const E=i.Z.extend({name:"HomeSettingsModel",syncedAttrs:{hasCustomizations:n.Z.boolean.isRequired,hasSeededPreferredServerContent:n.Z.boolean.isRequired,hasSeededProviderPromotedContent:n.Z.boolean.isRequired,preferredServerID:n.Z.string,settingsKey:n.Z.string.isRequired,version:n.Z.integer.isRequired},syncedRelations:{hubs:{relationClass:P}},defaults:()=>({hasCustomizations:!1,hasSeededPreferredServerContent:!1,hasSeededProviderPromotedContent:!1,settingsKey:(0,I.Z)(),version:1})}),w=i.Z.extend({name:"SidebarSourceModel",idAttribute:"key",syncedAttrs:{key:n.Z.string.isRequired,sourceType:n.Z.string.isRequired,machineIdentifier:n.Z.string.isRequired,providerIdentifier:n.Z.string.isRequired,directoryID:n.Z.string,directoryIcon:n.Z.string,title:n.Z.string.isRequired,serverFriendlyName:n.Z.string.isRequired,serverSourceTitle:n.Z.string,providerSourceTitle:n.Z.string,detail:n.Z.string,isCloud:n.Z.boolean,isFullOwnedServer:n.Z.boolean,isHidden:n.Z.boolean.isRequired,hiddenAt:n.Z.integer},defaults:{isHidden:!1}}),C=s.Z.extend({name:"SidebarSourceCollection",model:w}),M=i.Z.extend({name:"SidebarSettingsModel",syncedAttrs:{hasCompletedSetup:n.Z.boolean.isRequired},syncedRelations:{pinnedSources:{relationClass:C}},defaults:()=>({hasCompletedSetup:!1})}),D="experience",O={sessionAttrs:{sidebarPreferredSourcesSavedEnteredPath:n.Z.string,isDirty:n.Z.boolean.isRequired,isSaving:n.Z.boolean.isRequired,saveError:n.Z.object},syncedAttrs:{updatedAt:n.Z.integer,autoHomeHubsEnabled:n.Z.boolean,shouldSaveLastSourcePivots:n.Z.boolean.isRequired,lastSourcePivots:n.Z.object.isRequired,savedPivotParams:n.Z.object.isRequired,disabledUniversalSearchIdentifiers:n.Z.object.isRequired,autoPinnedProviders:n.Z.array.isRequired,dismissedUpsellModals:n.Z.array,disabledEpgSources:n.Z.array},syncedRelations:{homeSettings:{relationClass:E},sidebarSettings:{relationClass:M}},defaults:{autoHomeHubsEnabled:null,sidebarPreferredSourcesSavedEnteredPath:null,isDirty:!1,isSaving:!1,saveError:null,shouldSaveLastSourcePivots:!0,lastSourcePivots:{},savedPivotParams:{},disabledUniversalSearchIdentifiers:{},autoPinnedProviders:[],dismissedUpsellModals:[],disabledEpgSources:[]}}},8543:(e,t,r)=>{"use strict";r.d(t,{Mv:()=>n,TA:()=>i,cW:()=>s,PG:()=>a,Op:()=>o,tL:()=>l,k4:()=>c,KG:()=>d,Yx:()=>u,zx:()=>p,PL:()=>m,yc:()=>h,pQ:()=>g,N2:()=>y,Dn:()=>v,gS:()=>f,fu:()=>b,GN:()=>Z});const n="INIT_TIMELINE_PAGE",i="CLOSE_TIMELINE_PAGE",s="FETCH_TIMELINE_DETAILS",a="POPULATE_TIMELINE_DETAILS",o="CHANGE_BACKGROUND",l="CHANGE_THEME_MUSIC",c="RESET_BACKGROUND",d="INIT_PLAYLIST_PAGE",u="INIT_PLAYLIST_ITEM_LIST",p="RESET_PLAYLIST_ITEM_LIST",m="FETCH_PLAYLIST",h="POPULATE_PLAYLIST_ITEM_RANGE",g="REPOPULATE_PLAYLIST_ITEMS",y="SELECT_PLAYLIST_ITEM",v="DESELECT_PLAYLIST_ITEM",f="MOVE_PLAYLIST_ITEM",b="REMOVE_PLAYLIST_ITEM",Z="REMOVE_SELECTED_ITEMS"},58024:(e,t,r)=>{"use strict";r.d(t,{CC:()=>X,bc:()=>_,EK:()=>z,rM:()=>q,Qg:()=>Y,_K:()=>Q,im:()=>H,nL:()=>W,s7:()=>B,mb:()=>G,l4:()=>K,xM:()=>$});var n=r(13469),i=r.n(n),s=r(10033),a=r(15451),o=r(8523),l=r(86832),c=r(76389),d=r(20683),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function f(e,t){return e.save((r=((e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(h)for(var r of h(t))y.call(t,r)&&v(e,r,t[r]);return e})({},t),n={isSaving:!0,saveError:null},p(r,m(n)))).then((()=>{e.set({isSaving:!1})}),(t=>{const r=t&&t.message||"";e.set({isSaving:!1,saveError:{message:r}})}));var r,n}var b=r(68173),Z=r(8718),S=r(30547),P=Object.defineProperty,I=Object.defineProperties,E=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,D=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&D(e,r,t[r]);if(w)for(var r of w(t))M.call(t,r)&&D(e,r,t[r]);return e};const T="app/restoreDefaultDeviceSettings",x="app/discoverServers",A="app/dismissUnclaimedServer",k="app/redirectToRoute",N="app/redirectToUrl",R="app/toggleFullscreen",L="app/selectAudioDevice",j="app/updateAudioDevices",V="app/populateCloudServer",U="app/updateNavigationHistory",F="app/updateAvailable",B=(0,a.Z)(T),_=(0,a.Z)(x),z=(0,a.Z)(A),H=(0,a.Z)(k),W=(0,a.Z)(N),G=(0,a.Z)(L),Q=((0,a.Z)(j),(0,a.Z)(V)),$=(0,a.Z)(U),K=(0,a.Z)(F),q=(0,a.Z)(R,(e=>({isFullscreen:!0}))),Y=(0,a.Z)(R,(e=>({isFullscreen:!1}))),X={[s.v4]:s.CC[s.v4],[s.kO]:s.CC[s.kO],[s.dC]:s.CC[s.dC],[s.On]:s.CC[s.On],[s.eS]:s.CC[s.eS],[s.rP]:s.CC[s.rP],[s.i]:s.CC[s.i],[s.D8]:s.CC[s.D8],[s.x]:s.CC[s.x],[s.M8](e,t){f(e.get("deviceSettings"),t)},[T](e){const t=e.get("deviceSettings");!function(e,{isUserRestricted:t}){const r={shouldSyncSettings:e.get("shouldSyncSettings")};t&&(r.autoLogin=e.get("autoLogin")),e.restoreDefaults(r)}(t,{isUserRestricted:e.get("user").get("restricted")}),f(t,{})},[x](e){o.Z.trigger("discover:servers")},[A](e,t,r){const{machineIdentifier:n}=t,i=e.get("deviceSettings").get("dismissedUnclaimedServers");var a,o;i[n]||r((0,s.T5)({dismissedUnclaimedServers:(a=O({},i),o={[n]:!0},I(a,E(o)))}))},[s.f9](e,t){const{machineIdentifier:r}=t;e.get("servers").findServer(r).then((t=>{e.set({primaryServer:t,isWaitingForPrimaryServer:!1})}),(()=>{l.Z.warn("Unable to set primary server to:",r)}))},[s.gC](e){e.set({primaryServer:null,isWaitingForPrimaryServer:!0})},[s.Oq](e,t){const{machineIdentifier:r}=t;e.get("servers").findServer(r).done((t=>{!t.get("isOutOfDate")&&t.get("isPrimaryEligible")&&e.get("primaryServer")!==t&&e.set({primaryServer:t,isWaitingForPrimaryServer:!1})}))},[s.RK](e,t,r){const n=function(e,t=!0){let r="";return e&&("string"==typeof e.pathname?r=e.query?d.Z.join(e.pathname,e.query):e.pathname:"string"==typeof e&&(r=e)),r&&t&&0!==r.indexOf("#!")&&(r="#!"+r),r}(t);t.replace?window.location.replace(n):window.location.href=n},[s.$v](e,t,r){const{key:n,replace:i}=t,a=(0,c.SW)(e,t),o=(0,c.js)(e,t),l=(0,S.Z)(a.toJSON(),o.toJSON(),n);l&&r((0,s.c4)({pathname:l,replace:i}))},[k](e,{route:t,params:r,replace:n}){i().defer((()=>{(0,Z.Z)(t,r,n)}))},[N](e,{url:t,replace:r}){r?window.location.replace(t):window.location.href=t},[R](e,{isFullscreen:t}){e.get("isFullscreen")!==t&&e.set("isFullscreen",t)},[F](e,{isUpdateAvailable:t}){e.get("isUpdateAvailable")!==t&&e.set("isUpdateAvailable",t)},[L](){},[j](){},[V](e){e.get("cloudServer").populate()},[U](e,t){const{location:r}=t,n=e.get("history");n.length&&n[n.length-1].pathname===r.pathname&&n[n.length-1].search===r.search||e.set("history",[...n,{pathname:r.pathname,search:r.search}])},[s.Nx](e,{replace:t}={}){const r=e.get("history");if(r.length<2)e.set("history",[]),(0,Z.Z)("home",{},t);else{const n=r.slice(0,r.length-1);e.set("history",n);const i=n[n.length-1];t?b.Z.replace(i):b.Z.push(i)}}}},32527:(e,t,r)=>{"use strict";r.d(t,{FX:()=>s,A$:()=>a,L7:()=>o,OS:()=>l,GX:()=>c});var n=r(15451),i=r(2380);const s=(0,n.Z)("downloads/cancelDownloadActivity"),a=(0,n.Z)("downloads/createDownloadSubscription"),o=((0,n.Z)("downloads/deleteDownloadState"),(0,n.Z)("downloads/deleteDownloadSubscription")),l=((0,n.Z)("downloads/fetchDownloadSubscriptions"),(0,n.Z)("downloads/populateDownloadSubscriptions"),(0,n.Z)("downloads/processDownloadSubscriptions"),(0,n.Z)("downloads/retryDownloadSubscription")),c=((0,n.Z)("downloads/saveDownloadSubscription"),(0,n.Z)("downloads/syncDownloadViewstate"),(0,n.Z)("downloads/updateDownloadState"),(0,n.Z)("downloads/refreshDownloads"));(0,n.Z)("downloads/getDownloadDecision"),(0,i.Z)({})},70894:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(50361),i=r.n(n),s=r(22094),a=r(8089),o=r(76389),l=Object.defineProperty,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e};function h(e,t){const r=(0,o.SW)(e,{serverEntityID:t.server.entityID}),n=(0,o.js)(e,{providerEntityID:t.provider.entityID});let l,c;if(t.itemServer&&(l=(0,o.SW)(e,{serverEntityID:t.itemServer.entityID})),t.itemProvider&&(c=(0,o.js)(e,{providerEntityID:t.itemProvider.entityID})),!t.metadataItem)return{serverModel:r,providerModel:n,itemServerModel:l,itemProviderModel:c};const d=i()(m(m({},t.metadataItem),t.metadataItemState));if(d.source){const{serverIdentifier:e,providerIdentifier:r}=(0,a.Z)(d.source);e===t.server.machineIdentifier&&r===t.provider.identifier&&delete d.source}const u=new s.Z(d,{server:r,provider:n,identifier:t.provider.identifier,parse:!0});null==u._populatedParams&&(u._populatedParams={});const p={includeExternalMedia:1};return d.preferences&&(p.includePreferences=1),d.extras&&(p.includeExtras=1),d.stations&&(p.includeStations=1),d.onDeck&&(p.includeOnDeck=1),d.popularLeaves&&(p.includePopularLeaves=1),d.Concert&&(p.includeConcerts=1),d.Chapter&&(p.includeChapters=1),Object.assign(u._populatedParams,p),{serverModel:r,providerModel:n,itemServerModel:l,itemProviderModel:c,metadataItemModel:u}}},16203:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(19755),i=r.n(n),s=r(45191),a=r(75404),o=r(20683),l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function g(e,t){const{libraryID:r,libraryType:n,cancel:l,force:g,allowMetrics:y,metricsProperties:v={}}=t,f=g?{force:1}:void 0,b=o.Z.join(["/library/sections",r,"refresh"],f),Z=e.getXHROptions(b,{type:l?"DELETE":"GET"});if(y){let e;e=l?a.fV:g?a.uz:a.i0,(0,s.DB)("metrics").trackClick((S=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},v),c(S,d({action:e,type:"all"===r?"all":n}))))}var S;return i().ajax(Z).promise()}},36639:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(19755),i=r.n(n),s=r(73306),a=r(81042),o=r(69272),l=r(85209);function c(e,t){const r=e.title.toUpperCase(),n=t.title.toUpperCase();return r<n?-1:r>n?1:0}function d(e,t){const r=Array.isArray(e)?e:[e],n=i().Deferred(),d={[a.ZO]:[],[a.GP]:[]},u={[l.MOVIE]:{[a.ZO]:[],[a.GP]:[]},[l.SHOW]:{[a.ZO]:[],[a.GP]:[]},[l.ARTIST]:{[a.ZO]:[],[a.GP]:[]}},p=r.reduce(((e,t)=>(t.get("isConnected")&&e.push(t.get("sections")),e)),[]),m=p.map((e=>e.populate({scope:t})));return(0,o.Z)(m).done((()=>{p.forEach((e=>{e.forEach((e=>{const t=e.get("type");u[t]&&[a.ZO,a.GP].forEach((t=>{const r=new s.Z({filter:t},{server:e.server,section:e}).get("options");d[t].push(r)}))}))})),(0,o.Z)([...d[a.ZO].map((e=>e.fetch({scope:t}))),...d[a.GP].map((e=>e.fetch({scope:t})))]).done((()=>{d[a.ZO].forEach((e=>{const t=e.section.get("type");e.toJSON().forEach((e=>{u[t][a.ZO].find((t=>t.value===e.value))||u[t][a.ZO].push(e)}))})),d[a.GP].forEach((e=>{const t=e.section.get("type");e.toJSON().forEach((e=>{u[t][a.GP].find((t=>t.value===e.value))||u[t][a.GP].push(e)}))})),Object.keys(u).forEach((e=>{const t=u[e];t[a.ZO].sort(c),t[a.GP].sort(c)})),n.resolve(u)}))})),n.promise()}},19280:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return e.get("ui").get("authCodeExchange")}},46160:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(81042);function i(e,t,r,i){const s={};return e&&e.length&&(s[n.ZO]=e.join(",")),t&&t.length&&(s[n.Jm]=t.join(",")),r&&r.length&&(s[n.GP]=r.join(",")),i&&i.length&&(s[n.Bi]=i.join(",")),s}function s(e){const{allowSync:t,allowTuners:r,moviesContentRatings:n,moviesExcludeContentRatings:s,moviesLabels:a,moviesExcludeLabels:o,televisionContentRatings:l,televisionExcludeContentRatings:c,televisionLabels:d,televisionExcludeLabels:u,musicLabels:p,musicExcludeLabels:m}=e,h={};return null!=t&&(h.allowSync=t),null!=r&&(h.allowTuners=Number(r)),null==n&&null==s&&null==a&&null==o||(h.filterMovies=i(n,s,a,o)),null==l&&null==c&&null==d&&null==u||(h.filterTelevision=i(l,c,d,u)),null==p&&null==m||(h.filterMusic=i(null,null,p,m)),h}},6633:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(19755),i=r.n(n);const s=function(e){const t=e.get("cloudServer");return i().ajax(t.getXHROptions("/api/v2/pins",{method:"POST",dataType:"json",data:{strong:!0}})).then((e=>e))}},5746:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(19755),i=r.n(n),s=r(45191),a=r(6029);function o(e,t){const r=(0,s.DB)("appModel").get("cloudServer"),n=(0,a.Z)(e),o=new window.FormData;o.append("avatar",n),t&&o.append("userId",t);const l=r.getXHROptions("/api/v2/user",{type:"PUT",processData:!1,contentType:!1,data:o});return i().ajax(l)}},93888:(e,t,r)=>{"use strict";r.d(t,{FN:()=>Ct,rQ:()=>Vt,kg:()=>Xt,Rw:()=>Ut,W$:()=>Ft,p4:()=>Bt,Cf:()=>_t,Mk:()=>Jt,Tk:()=>zt,Nv:()=>Ht,x3:()=>rr,s4:()=>tr,ky:()=>or,hi:()=>sr,x:()=>Wt,hO:()=>Gt,vr:()=>jt,_8:()=>Qt,ET:()=>$t,Nw:()=>er,qs:()=>Kt,Nm:()=>nr,Pi:()=>ir,oZ:()=>qt,KF:()=>Yt});var n=r(19755),i=r.n(n),s=r(45191),a=r(41444),o=r(15451),l=r(44442),c=r(17329),d=r(71701),u=r(20683),p=r(73703);var m=r(86423),h=r(34575),g=r(43508),y=r(75404),v=r(8523),f=r(52108),b=r(73788),Z=r(70894),S=r(42575),P=r(97853),I=r(8718),E=r(13469),w=r.n(E),C=r(86230),M=r(64935),D=r.n(M);const O=C.Z.extend({name:"downloadVersionModal",template:D(),serializeData:function(){const e=this.model;return{defaultLinkTarget:"_self",mediaItems:w().map(this.model.get("Media"),(function(t,r){const n=w().clone(t);n.downloadUrl=e.getDownloadUrl(r);const i=e.getFilepath(r);return i&&(n.downloadName=u.Z.getLastSegment(i)),n}))}},onClick:function(){}});var T=r(44518),x=r(54562),A=r(94450),k=r(19395),N=r(47480),R=r(99468),L=r(30997),j=r(58852),V=r(51245),U=r.n(V);const F=j.Z.extend({template:U(),serializeData(){return this.model.get("preferences").toJSON()},flushChanges(){const e=this.ui.form.serializeArray(),t=this.model.get("preferences");e.forEach((e=>{const r=t.get(e.name),n=r.clone();n.parseAndSetValue(e.value),n.get("value")!==r.get("value")&&t.add(n,{merge:!0})}))}});var B=r(99479),_=r(70564),z=r.n(_);const H={playlist:["general","poster","art","advanced"]},W=B.Z.extend({mixins:[k.Z],name:"editPlaylistModal",className:"edit-metadata-modal modal modal-lg fade",template:z(),panes:{general:{constructor:L.Z},advanced:{constructor:F},poster:{constructor:R.Z,model:"multiMetadataModel"},art:{constructor:R.Z,model:"multiMetadataModel"}},panesModel:"tempModel",events:w().extend({"click .change-pane-btn":"onChangePaneClick","click .save-btn":"onFormSubmit","submit .edit-metadata-form":"onFormSubmit"},B.Z.prototype.events),ui:{saveBtn:".save-btn",message:".form-message",navPane:".modal-nav-pane",loadingIndicator:".modal-body-pane .loading-inline"},regions:{paneRegion:".pane-region"},onlyAfterRender:["saveChanges","showPane","showNav"],initialize:function(e){B.Z.prototype.initialize.apply(this,arguments);const t=e.model;this.model=t,this.multiMetadataModel=new N.Z({},{server:this.model.server,metadataItems:[t]});let r=t.fetch({usePopulatedParams:!0,data:{includePreferences:"1"}});r=r.done(w().bind((function(){this.tempModel=t.clone(),this.render(),this.showNav(),this.showPane(e.selectedPane||"general"),this.listenTo(v.Z,"shortcut:save",this.saveChanges)}),this)),r.fail(w().bind((function(){this.ui.message.text((0,b.Z)("There was an error editing this item")),this.ui.loadingIndicator.addClass("hidden")}),this))},serializeData:function(){let e=H[this.model.get("type")]||H.movie;e=e.filter((e=>{const t="art"===e,r="poster"===e,n=this.model.server.get("shortVersion"),{playlistArtEditing:i,playlistPosterEditing:s}=x.Z;return!t&&!r||t&&(0,A.Z)(n,i)||r&&(0,A.Z)(n,s)})),this.model.has("preferences")||(e=w().difference(e,["advanced"]));const t=w().reduce(e,(function(e,t){return e[t]=!0,e}),{}),r=w().escape((0,b.Z)("Edit {1}",this.model.get("title")));return{item:this.model.toJSON(),panes:t,selectedPane:this.selectedPane,paneTitle:r}},paneConstructorArg:function(){return{type:this.selectedPane}},showNav:function(){this.ui.navPane.removeClass("hidden")},saveChanges:function(){const e=this.ui.saveBtn,t=this.ui.message;if(e.isDisabled())return;t.text(""),this.paneRegion.currentView.flushChanges();const r=this.model.changedAttributes(this.tempModel.attributes);r&&(delete r.art,delete r.composite,delete r.thumb,delete r.updatedAt);const n=w().reduce(r,((e,t,r)=>(this.model.syncedAttrs[r]&&(e[r]=t),e)),{});e.addClass("active");const s=[];w().isEmpty(n)||s.push(this.model.save(n)),s.push(this.savePreferences()),["art","poster"].forEach((e=>{const t=this.multiMetadataModel.get(e);t&&s.push(a.Z.execute("changeArtwork",{item:this.model,artworkType:e,artworkRatingKey:t}))}));const o=i().when.apply(i(),s);o.done(w().bind((function(){this.hide()}),this)),o.fail((function(){t.text((0,b.Z)("Your changes could not be saved."))})),o.always((function(){e.removeClass("active")}))},savePreferences:function(){const e=this.tempModel.get("preferences");if(!e||!e.length)return i().Deferred().resolve().promise();const t=this.model,r=u.Z.join(["/library/metadata",t.get("ratingKey"),"prefs"],e.getSaveParams()),n=this.model.server.getXHROptions(r,{type:"PUT"}),s=i().ajax(n);return s.done((function(){const r=t.get("preferences");e.forEach((function(e){r.get(e.id).set("value",e.get("value"))}))})),s},onPaneShow:function(e,t){this.listenTo(t,"focusSubmit",(function(){this.ui.saveBtn.focus()}))},onPaneHide:function(e,t){t.flushChanges(),this.stopListening(t)},onFormSubmit:function(e){e.preventDefault(),this.saveChanges()}});var G=r(26051),Q=r(23450),$=r.n(Q);const K=G.Z.ItemView.extend({id:"auto-match-dropdown",tagName:"span",className:"automatch-dropdown",template:$(),collectionEvents:{reset:"render"},events:{"click .auto-match-agent":"onClick"},serializeData:function(){return{agents:this.collection.toJSON()}},onClick:function(e){e.preventDefault();const t=i()(e.currentTarget).data("id"),r=this.model.agents.get(t);a.Z.execute("autoMatch",{item:this.model,agent:r})}});var q=r(79167),Y=r(58809),X=r(24765),J=r(85209),ee=r(97577),te=r(70704),re=r(75979),ne=r.n(re),ie=r(19114),se=r.n(ie);const ae=new Set([q.WX,q.Ut,q.Zb]);function oe(e){return w().map(e,(function(e){return'<option value="'+e.value+'"'+(e.selected?" selected":"")+">"+e.label+"</option>"})).join("\n")}function le(e,t){return e.map((function(e){return{label:e.get("name"),value:e.get("identifier"),selected:t===e.get("identifier")}}))}function ce(e,t){return e?e.get("languages").map((function(e){return{label:e.get("name"),value:e.id,selected:e.id===t}})):[]}const de=G.Z.ItemView.extend({template(e){const{item:t,scannerIdentifier:r}=e;return t.type===J.ALBUM&&r===Y.c3?ne()(e):se()(e)},ui:{agentSelect:"#match-search-agent",languageSelect:"#match-search-language"},events:{"change #match-search-agent":"onAgentSelectChange"},onlyAfterRender:["updateAgents","updateLanguages"],initialize:function(){const e=(0,X.Z)(this.model).get("agent"),t=this.setupAgents(e);t.then(w().bind(this.updateAgents,this,e)),t.then(w().bind(this.updateLanguages,this,e))},serializeData:function(){const e=(0,X.Z)(this.model),t=e.get("agent"),r=this.model.agentsProxy.findWhere({identifier:t});return{item:this.model.toJSON(),agents:le(this.model.agentsProxy,t),scannerIdentifier:e.get("scanner"),languages:ce(r)}},setupAgents:function(e){if(this.model.agentsPromise)return this.model.agentsPromise;const t=(0,X.Z)(this.model),r=t.getSectionType(),n=new ee.Z([],{server:this.model.server,mediaTypeID:r.typeID}),i=n.populate({reset:!0,cancelable:!0});return i.then((()=>{const i=function(e,t){if(!e)return[];const r=ae.has(t);return e.filter((e=>{const t=ae.has(e.get("identifier"));return r?t:!t}))}(n,t.get("agent"));this.model.agents=n.clone(i);const s=r.exclusiveAgents;this.model.agentsProxy=new te.Z(this.model.agents,s,e)})),this.model.agentsPromise=i,this.model.agentsPromise},updateAgents:function(e){this.ui.agentSelect.html(oe(le(this.model.agentsProxy,e)))},updateLanguages:function(e){const t=this.model.agentsProxy.findWhere({identifier:e});if(!e)return void this.ui.languageSelect.empty();const r=(0,X.Z)(this.model).get("language");this.ui.languageSelect.html(oe(ce(t,r)))},onAgentSelectChange:function(e){this.updateLanguages(e.currentTarget.value)},onModalClose:function(){this.model.agents=null,this.model.agentsProxy=null,this.model.agentsPromise=null}});var ue=r(70825),pe=r(97283),me=r(17488),he=r.n(me);const ge=G.Z.ItemView.extend({template:he()}),ye={collectionEvents:{"update reset sort":"onTracksUpdate"},markDiscNumbers:function(){if(!this.collection.server.supports("premiumMusic"))return;const e=this.collection.reduce((function(e,t,r){const n=t.get("parentIndex");return n!==e.lastDiscNumber&&(e.markers[r]=n,e.lastDiscNumber=n,e.count+=1),e}),{markers:{},lastDiscNumber:null,count:0});return this.discMarkers=e.markers,e.count},onRender:function(){1!==this.markDiscNumbers()&&w().each(this.discMarkers,w().bind((function(e,t){this.$("li:eq("+t+") .disc-number").removeClass("hidden")}),this))},onTracksUpdate:function(){this.render()}};var ve=r(92571),fe=r.n(ve),be=Object.defineProperty,Ze=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,we=(e,t,r)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ce=G.Z.ItemView.extend({tagName:"li",template:fe(),className:"striped-list-item",serializeData(){const e=this.model.toJSON();return t=((e,t)=>{for(var r in t||(t={}))Ie.call(t,r)&&we(e,r,t[r]);if(Pe)for(var r of Pe(t))Ee.call(t,r)&&we(e,r,t[r]);return e})({},e),r={escapedParentIndex:w().escape(e.parentIndex)},Ze(t,Se(r));var t,r}}),Me=pe.Z.extend({mixins:[ye],tagName:"ul",itemView:Ce,className:"list"}),De=/\d{4}/,Oe=function({disambiguation:e="",lifespanBegin:t="",lifespanEnd:r="",area:n="",beginArea:i=""}){const s=t.match(De),a=r.match(De),o=[i,n,a?`${s}-${a}`:s].filter(Boolean);return e?[e,o.length?`(${o.join(", ")})`:null].filter(Boolean).join(" "):o.join(", ")};var Te=r(24938),xe=r.n(Te);const Ae=G.Z.Layout.extend({tagName:"li",className:"striped-list-item match-result-list-item row",template:xe(),ui:{matchExtendedInfo:".match-extended-info"},regions:{childrenRegion:".children-region"},events:{"click .match-result":"onClick"},initialize:function(e){this.item=e.item},onRender:function(){!this.model.get("summary")||this.model.get("type")!==J.MOVIE&&this.model.get("type")!==J.SHOW||this.ui.matchExtendedInfo.removeClass("hidden");const e=this.model.get("children");if(!e)return;const t=e.first();t&&t.get("type")===J.TRACK&&(this.ui.matchExtendedInfo.removeClass("hidden"),this.childrenRegion.show(new Me({collection:e})))},onClick:function(e){e.preventDefault(),a.Z.execute("match",{item:this.item,guid:this.model.id,name:this.model.get("name"),year:this.model.get("year"),children:this.model.get("children")})},serializeData(){const e=this.model.toJSON();return{year:e.year,parentName:e.parentName,name:e.name,disambiguationInfo:Oe(e),thumb:e.thumb,normalizedScore:e.normalizedScore,escapedNormalizedScore:w().escape(e.normalizedScore),summary:e.summary}}}),ke=pe.Z.extend({tagName:"ul",className:"list match-result-list",itemView:Ae,emptyView:ge});var Ne=r(66849),Re=r.n(Ne);const Le=G.Z.Layout.extend({template:Re(),regions:{resultRegion:".result-region"},onlyAfterRender:["updateResults"],initialize:function(){this.setupResults();const e=(0,X.Z)(this.model),t={manual:1},r={reset:!0,timeout:0,data:t};/com\.plexapp\.agents\.none:\/\//.test(this.model.get("guid"))&&w().extend(r,{data:w().extend(t,{agent:e.get("agent"),language:e.get("language")}),processData:!0}),this.model.results.populate(r).then(w().bind(this.updateResults,this))},setupResults:function(){if(this.model.results)return;const e=this.model.results||new ue.Z([],{server:this.model.server,parent:this.model});this.model.results=e},updateResults:function(){this.resultRegion.show(new ke({collection:this.model.results,itemViewOptions:{item:this.model}}))},onModalClose:function(){this.model.results=null}});var je=r(29509),Ve=r.n(je);const Ue=B.Z.extend({mixins:[k.Z],name:"fixIncorrectMatch",className:"fix-incorrect-match-modal modal modal-lg fade",template:Ve(),panes:{form:{constructor:de},results:{constructor:Le}},ui:{searchBtn:".search-btn"},regions:{paneRegion:".pane-region",autoMatchDropdownRegion:".auto-match-dropdown-region"},events:w().extend({"click .auto-match-agent":"hide","click .match-result":"hide","click .search-options-btn":"onSearchOptionsClick","click .cancel-btn":"onCancelClick","click .search-btn":"onSearchClick","submit #fix-incorrect-match-form":"onSearchSubmit"},B.Z.prototype.events),onlyAfterRender:["showPane","updateSearchBtn","showAutoMatchPicker"],initialize:function(){B.Z.prototype.initialize.apply(this,arguments),de.prototype.setupAgents.apply(this).then((()=>{this.showAutoMatchPicker()})),Le.prototype.setupResults.apply(this),this.showPane("results")},serializeData:function(){return{location:this.model.getLocation(),showNavigation:!this.model.isPlexMusicItem()}},updateSearchBtn:function(e){this.ui.searchBtn.toggleClass("disabled","form"!==e)},showAutoMatchPicker:function(){this.autoMatchDropdownRegion.show(new K({model:this.model,collection:this.model.agentsProxy}))},fetchResults:function(e){const t=w().reduce(e.serializeArray(),(function(e,t){return e[t.name]=t.value,e}),{manual:1});this.model.results.fetch({reset:!0,data:t,processData:!0,timeout:0})},bindings:{".modal-title-text":{modelAttribute:"guid",formatter:function(e){return/com\.plexapp\.agents\.none:\/\//.test(e)?(0,b.Z)("Match"):(0,b.Z)("Fix Match")}}},onRender:function(){B.Z.prototype.onRender.apply(this,arguments)},onPaneShow:function(e){this.updateSearchBtn(e)},onSearchOptionsClick:function(e){e.preventDefault(),this.showPane("form")},onCancelClick:function(e){e.preventDefault(),"results"!==this.selectedPane?this.showPane("results"):this.hide()},onSearchClick:function(e){e.preventDefault();const t=i()(e.currentTarget);if(t.isDisabled())return;const r=t.closest("form");this.fetchResults(r),this.showPane("results")},onSearchSubmit:function(e){e.preventDefault();const t=i()(e.currentTarget);t.find("search-btn").isDisabled()||(this.fetchResults(t),this.showPane("results"))}});var Fe=r(16812),Be=r(64155),_e=r(66281),ze=r(41229),He=r(45924);const We={h264:10,hevc:30},Ge=function(e,t){if(null==e||Number.isNaN(e))return"";const r=parseInt(e,10),n=We[t||"h264"];return Number.isFinite(r)&&Number.isFinite(n)?(r/n).toFixed(1):String(e)};var Qe=r(21168),$e=r(53359);const Ke=function(e){let t="";for(let r=0,n=e.length;r<n;r++){const n=e.charAt(r),i=n.toUpperCase();t+=0===r?i:n===i?" "+i:n}return t};var qe=r(72854),Ye=r.n(qe);const Xe=["id","key","index","videoCodec","audioCodec","audioChannels","default","selected","languageCode","accessible","exists","provider","lines","minLines","follow","requiredBandwidths","deepAnalysisVersion","deepAnalysisDate","Overlay"],Je={size:ze.Z,duration:_e.Z,codec:Qe.Z,format:Qe.Z,container:Qe.Z,videoResolution:He.Z,bitrateMode:Qe.Z,accessible:$e.Z,exists:$e.Z,optimizedForStreaming:$e.Z,timed:$e.Z,file:u.Z.getLastSegment},et={optimizedForStreaming:"Web Optimized",has64bitOffsets:"Has 64bit Offsets",cabac:"CABAC",postURL:"URL",codecID:"Codec ID"},tt={frameRate:" fps",dialogNorm:" dB",bitrate:" kbps",samplingRate:" Hz"},rt=function(e,t){const r={properties:[]};for(const n in e){if(n===t||-1!==w().indexOf(Xe,n))continue;let i=et[n],s=e[n];"level"===n&&(s=Ge(s,e.codec)),Je[n]&&(s=Je[n](s)),s&&(tt[n]&&(s+=tt[n]),i||(i=Ke(n)),r.properties.push({name:i,value:s}))}return t&&e&&(r[t]=e[t]),r};function nt(e){const t=w().reject(e,(function(e){return e.id===Be.H})),r=w().sortBy(t,"streamType");return w().map(r,(function(e){return rt(e,"streamType")}))}function it(e){return w().map(e.get("Media"),(function(e){return w().extend(rt(e,"Part"),{Part:w().map(e.Part,(function(e){return w().extend(rt(e,"Stream"),{file:e.file,exists:!1!==e.exists,accessible:!1!==e.accessible,Stream:nt(e.Stream)})}))})}))}const st=B.Z.extend({name:"mediaInfoModal",className:"media-info-modal modal modal-lg fade",template:Ye(),ui:{scroller:".modal-body-scroll",files:".files > ul",stickyProps:".media > .props, .part > .props"},events:w().extend({"click .delete-btn":"onDeleteClick"},B.Z.prototype.events),modelEvents:{"change:Media":"onMediaChange"},initialize:function(e){B.Z.prototype.initialize.apply(this,arguments),this.bindAllWhenRendered("onMediaChange","onScroll"),this.loading=!1,this.media=it(this.model),this.loading=!0,this.model.fetch({usePopulatedParams:!0,data:{checkFiles:1,asyncCheckFiles:0}}).always(this.whenRendered((function(){this.model.changed.hasOwnProperty("Media")||this.updateMedia()})))},serializeData:function(){let e=this.model.get("key");const t=s.DB("appModel").get("user"),r=this.model.server;return this.model.get("isLibraryItem")&&(e=u.Z.join(e,{checkFiles:1,includeAllConcerts:1,includeBandwidths:1,includeChapters:1,includeChildren:1,includeConcerts:1,includeExtras:1,includeFields:1,includeGeolocation:1,includeLoudnessRamps:1,includeMarkers:1,includeOnDeck:1,includePopularLeaves:1,includePreferences:1,includeRelated:1,includeRelatedCount:1,includeReviews:1,includeStations:1})),{key:e,url:this.model.server.resolveUrl(e,{appendToken:!0}),media:this.media,hasFiles:this.hasFiles(),hasStreams:this.hasStreams()||this.loading,showDeleteFile:r.get("isFullOwnedServer")&&r.get("allowMediaDeletion")&&r.supports("specificMediaDeletion"),showFilepath:!r.get("shared")||t.isNinja(),loading:this.loading}},updateMedia:function(){this.loading=!1,this.rerender=!0,this.ui.scroller.off("scroll",this.onScroll),this.media=it(this.model),this.render()},hasFiles:function(){return!!w().chain(this.media).pluck("Part").flatten().pluck("file").compact().size().value()},hasStreams:function(){return!!w().chain(this.media).pluck("Part").flatten().pluck("Stream").flatten().size().value()},onRender:function(){B.Z.prototype.onRender.apply(this,arguments),this.ui.scroller.on("scroll",this.onScroll),this.$el.tooltip({selector:".files .label",placement:"bottom"})},onClose:function(){this.ui.scroller.off("scroll",this.onScroll)},onMediaChange:function(){this.isHidden||(this.model.get("Media").length?this.updateMedia():this.hide())},onDeleteClick:function(e){e.preventDefault(),a.Z.execute("deleteMediaItem",{item:this.model,index:i()(e.currentTarget).data("media-item")})},onScroll:function(){const e=this.ui.scroller.scrollTop();let t=this.ui.scroller.offset().top;this.ui.files.length&&(t+=parseInt(this.ui.files.css("margin-bottom"),10)),t<0?window.setTimeout(this.onScroll,500):this.ui.stickyProps.each((function(){const r=i()(this),n=r.parent().height()-r.height(),s=e-this.parentNode.offsetTop,a=Math.min(Math.max(s,0),n);a&&a===s?(r.addClass("sticky"),r.css("top",t)):(r.removeClass("sticky"),r.css("top",a))}))}});var at=r(95117),ot=Object.defineProperty,lt=Object.defineProperties,ct=Object.getOwnPropertyDescriptors,dt=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,mt=(e,t,r)=>t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ht=(e,t)=>{for(var r in t||(t={}))ut.call(t,r)&&mt(e,r,t[r]);if(dt)for(var r of dt(t))pt.call(t,r)&&mt(e,r,t[r]);return e},gt=(e,t)=>lt(e,ct(t));const yt="metadata/redispatchLegacyMetadataAction",vt="metadata/analyzeMetadataItem",ft="metadata/deleteMetadataItem",bt="metadata/deleteMetadataItemVersion",Zt="metadata/downloadMetadataItemVersion",St="metadata/editMetadataItem",Pt="metadata/fixMetadataItemMatch",It="metadata/getMetadataItemInfo",Et="metadata/updateMetadataItemPlayedStatus",wt="metadata/optimizeMetadataItem",Ct="metadata/rateMetadataItem",Mt="metadata/refreshMetadataItem",Dt="metadata/splitMetadataItemApart",Ot="metadata/unmatchMetadataItem",Tt="metadata/changeMetadataItemField",xt="metadata/updateMetadataItemRefreshingState",At="metadata/UPDATE_METADATA_SETTINGS",kt="CLEAR_METADATA_SETTINGS_ERROR",Nt="metadata/updateDownloadAvailability",Rt="metadata/updateDownloadSubscriptionIDs",Lt="metadata/modifySmartPlaylist",jt=(0,o.Z)(yt),Vt=(0,o.Z)(vt),Ut=(0,o.Z)(ft),Ft=(0,o.Z)(bt),Bt=(0,o.Z)(Zt),_t=(0,o.Z)(St),zt=(0,o.Z)(Pt),Ht=(0,o.Z)(It),Wt=((0,o.Z)(Et),(0,o.Z)(wt)),Gt=(0,o.Z)(Ct),Qt=(0,o.Z)(Mt),$t=(0,o.Z)(Dt),Kt=(0,o.Z)(Ot),qt=((0,o.Z)(Tt),(0,o.Z)(xt)),Yt=(0,o.Z)(At),Xt=(0,o.Z)(kt),Jt=(0,o.Z)(Ct,(e=>gt(ht({},e),{rating:f.jt}))),er=(0,o.Z)(Ct,(e=>gt(ht({},e),{rating:f.LX}))),tr=(0,o.Z)(Et,(e=>gt(ht({},e),{played:!1}))),rr=(0,o.Z)(Et,(e=>gt(ht({},e),{played:!0}))),nr=((0,o.Z)("metadata/setDownloadSubscriptionID"),(0,o.Z)("metadata/unsetDownloadSubscriptionID"),(0,o.Z)(Nt)),ir=((0,o.Z)("metadata/updateDownloadAvailabilityFromDeletedTimeline"),(0,o.Z)(Rt)),sr=(0,o.Z)(Lt);function ar(e,t,r,n={}){r&&(0,s.DB)("metrics").trackClick(ht({page:r,action:e,type:t.get("type")},n))}const or={[h.$T]:h.ky[h.$T],[h.se]:h.ky[h.se],[h.Y3]:h.ky[h.Y3],[h.IK]:h.ky[h.IK],[h.vG]:h.ky[h.vG],[h.Fl]:h.ky[h.Fl],[h.wS]:h.ky[h.wS],[h.Vf]:h.ky[h.Vf],[h.Ft]:h.ky[h.Ft],[h.er]:h.ky[h.er],[yt](e,t,r){const{serverModel:n,providerModel:i,itemServerModel:s,itemProviderModel:a,metadataItemModel:o}=(0,Z.Z)(e,t),l=t.legacyAction.type,c=t.legacyAction.payload,d=(null==c?void 0:c.metricsProperties)||{};r({type:l,payload:gt(ht({},c),{serverEntityID:n.entityID(),providerEntityID:i.entityID(),itemServerEntityID:s?s.entityID():null,itemProviderEntityID:a?a.entityID():null,metadataItemEntityID:o.entityID(),metricsPage:t.metricsPage,metricsProperties:ht(ht({},d),t.metricsProperties),skipClickMetrics:!0})})},[vt](e,t,r){const n=(0,S.$R)(e,t),i=t.metricsPage,s={allowMetrics:!!i,metricsProperties:{page:i}};(0,l.Z)(n,s).fail((e=>{r((0,g.wp)((0,b.Z)("There was a problem analyzing this item.")))}))},[Zt](e,t){const r=(0,S.$R)(e,t),n=new O({model:r});v.Z.trigger("show:modal",n)},[ft](e,t){const r=(0,S.$R)(e,t),n=t.options||{},i=r.get("isPlaylist")?"deletePlaylist":"deleteItems";a.Z.execute(i,ht({item:r},n)),ar(y.yY,r,t.metricsPage)},[bt](e,t){const r=(0,S.$R)(e,t);a.Z.execute("deleteVersions",{item:r}),ar(y.yY,r,t.metricsPage)},[St](e,t){const r=(0,S.$R)(e,t),n=r.get("isPlaylist")?new W({model:r}):new T.Z({model:r});v.Z.trigger("show:modal",n),ar(y.dm,r,t.metricsPage)},[Pt](e,t){const r=(0,S.$R)(e,t);r.server.get("sections").fetch().then((()=>{const e=new Ue({model:r});v.Z.trigger("show:modal",e),ar(y.P9,r,t.metricsPage)}))},[It](e,t){const r=(0,S.$R)(e,t),n=new st({model:r});v.Z.trigger("show:modal",n),ar(y.$M,r,t.metricsPage)},[Et](e,t,r){const n=(0,S.$R)(e,t);(0,m.Z)(e,t).then((()=>{r((0,g.jR)({serverEntityID:t.serverEntityID}))}),(()=>{const e=t.played?(0,b.Z)("There was an unexpected error marking an item played."):(0,b.Z)("There was an unexpected error marking an item unplayed.");r((0,g.wp)(e))})),ar(t.played?y.qe:y.h3,n,t.metricsPage)},[wt](e,t){const r=(0,S.$R)(e,t),n=new at.Z({item:r});v.Z.trigger("show:modal",n),ar(y.FH,r,t.metricsPage)},[Ct](e,t,r){const{rating:n,metricsPage:i}=t,s=(0,S.js)(e,t),a=(0,S.$R)(e,t),o={rating:n,allowMetrics:!!i,metricsProperties:{page:i}};(0,c.Z)(s,a,o).fail((e=>{r((0,g.wp)((0,b.Z)("There was a problem rating this item.")))}))},[Mt](e,t,r){const n=(0,S.$R)(e,t),i=t.metricsPage,s={allowMetrics:!!i,metricsProperties:{page:i}};(0,d.Z)(n,s).fail((e=>{503===e.status?v.Z.trigger("show:modal",new Fe.Z({model:n.server})):r((0,g.wp)((0,b.Z)("There was a problem refreshing this item.")))}))},[Dt](e,t,r){const n=(0,S.$R)(e,t);a.Z.execute("splitApart",{item:n,skipNavigate:!0}).done((()=>{r((0,g.jR)({serverEntityID:t.serverEntityID}))})),ar(y.RF,n,t.metricsPage)},[Ot](e,t){const r=(0,S.$R)(e,t);a.Z.execute("unmatch",{item:r}),ar(y.Zy,r,t.metricsPage)},[Tt](e,t,r){const{providerEntityID:n,metadataItemEntityID:s,name:a,value:o,save:l}=t,c=(0,S.$R)(e,{metadataItemEntityID:s});if(!l)return void c.set({[a]:o});const d=(0,S.js)(e,{providerEntityID:n}),p=u.Z.join(c.get("key"),{[a]:o,[`${a}.locked`]:1}),m=d.getXHROptions(p,{type:"PUT"});i().ajax(m).fail((e=>{r((0,g.wp)((0,b.Z)("There was a problem editing this item.")))})),ar(y.dm,c,t.metricsPage)},[xt](e,t){const r=(0,S.tz)(e,t);r&&r.set({metadataState:t.metadataState,mediaState:t.mediaState})},[At](e,t,r){const n=(0,S.js)(e,t),s=(0,S.$R)(e,t),{data:a}=t;(function(e,t,r){const n=t.get("key"),s=u.Z.join([n,"prefs"],r),a=e.getXHROptions(s,{type:"PUT"});t.set({isSettingsUpdating:!0,settingsUpdateError:null});const o=i().ajax(a);return o.then((()=>{t.set("isSettingsUpdating",!1)}),(e=>{t.set({isSettingsUpdating:!1,settingsUpdateError:(0,p.Z)(e)})})),o})(n,s,a).then((()=>{r((0,h.dk)({serverEntityID:t.serverEntityID,metadataItemEntityID:t.metadataItemEntityID}))}))},[kt](e,t,r){(0,S.$R)(e,t).set("settingsUpdateError",null)},[Nt](){},[Rt](){},[Lt](e,t){const r=(0,S.SW)(e,t),n=(0,S.js)(e,t),i=(0,S.$R)(e,t);i.fetch().done((()=>{const e=(0,P.Z)(r.toJSON(),n.toJSON(),i.toJSON());(0,I.Z)(...e)}))}}},27724:(e,t,r)=>{"use strict";r.d(t,{C8:()=>j,CF:()=>V,vp:()=>U,u6:()=>F,$5:()=>B,wr:()=>_,g8:()=>z,Kn:()=>H,XX:()=>W,m8:()=>G,wZ:()=>Q,rr:()=>$,q9:()=>K});var n=r(45191),i=r(60526),s=r(15451),a=r(81775),o=r(48209),l=r(64253),c=r(72538),d=r(75404),u=r(87999),p=r(8523),m=r(76389),h=r(89843),g=r(42575),y=r(95117),v=Object.defineProperty,f=Object.defineProperties,b=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(Z)for(var r of Z(t))P.call(t,r)&&I(e,r,t[r]);return e};const w="metadata/metadataList/fetchMetadataList",C="metadata/metadataList/populateMetadataList",M="metadata/metadataList/populateMetadataListRange",D="metadata/metadataList/repopulateMetadataListRange",O="metadata/metadataList/optimizeMetadataList",T="metadata/metadataList/selectMetadataListItem",x="metadata/metadataList/deselectMetadataListItem",A="metadata/metadataList/selectMetadataListItems",k="metadata/metadataList/deselectMetadataListItems",N="metadata/metadataList/deselectAllMetadataListItems",R="metadata/metadataList/resetMetadataList",L="metadata/metadataList/redispatchLegacyMetadataListAction",j=(0,s.Z)(w),V=(0,s.Z)(C),U=(0,s.Z)(M),F=(0,s.Z)(D),B=(0,s.Z)(O),_=(0,s.Z)(T),z=(0,s.Z)(x),H=(0,s.Z)(A),W=(0,s.Z)(k),G=(0,s.Z)(N),Q=(0,s.Z)(R),$=(0,s.Z)(L),K={[w]:(0,a.Z)({getModel:g.lK}),[C]:(0,o.Z)({fetchActionCreator:j,getModel:g.lK}),[M]:(0,l.Z)({getModel:g.lK}),[D]:(0,c.Z)({getModel:g.lK}),[O](e,t){const r=(0,g.lK)(e,t),i=new y.Z({item:r});p.Z.trigger("show:modal",i),function(e,t,r={}){(0,n.DB)("metrics").trackClick(E({page:t,action:e,context:u.LIST},r))}(d.FH,t.metricsPage,t.metricsProperties)},[T](e,t,r){const{id:n,type:i,isRangeSelect:s}=t,a=(0,g.lK)(e,t),o=(0,g.$R)(e,{metadataItemEntityID:n}),l=a.getCollection();o&&r((0,h.Gh)({type:i,model:o,collection:l,isRangeSelect:s}))},[x](e,t,r){const n=(0,g.$R)(e,{metadataItemEntityID:t.id});n&&r((0,h.Ib)([n.id]))},[A](e,t,r){const{ids:n,type:i}=t,s=n.reduce(((t,r)=>{const n=(0,g.tz)(e,{metadataItemEntityID:r});return n&&t.push({id:n&&n.id,type:i,model:n}),t}),[]);r((0,h.GZ)(s))},[k](e,t,r){const n=t.ids.reduce(((t,r)=>{const n=(0,g.tz)(e,{metadataItemEntityID:r});return n&&t.push({id:n&&n.id}),t}),[]);r((0,h.Ib)(n))},[N](e,t,r){const n=(0,g.lK)(e,t).getCollection();r((0,h.Nd)(n))},[R](e,t){const r=(0,g.lK)(e,t),n=r.get("entityKey");r.abortPendingPopulate(),r.resetPopulatePromise(null),r.restoreDefaults({entityKey:n,meta:n?r.get("meta"):void 0,containerKey:r.get("containerKey"),containerTitle:r.get("containerTitle")})},[L](e,t,r){const n=(0,m.SW)(e,{serverEntityID:t.server.entityID}),s=(0,m.js)(e,{providerEntityID:t.provider.entityID}),a=new i.Z({containerKey:t.containerKey},{server:n,provider:s,includeCollections:!0,includeExternalMedia:!0}),o=t.legacyAction.type,l=t.legacyAction.payload,c=(null==l?void 0:l.metricsProperties)||{};var d,u;r({type:o,payload:(d=E({},l),u={serverEntityID:n.entityID(),providerEntityID:s.entityID(),metadataListEntityID:a.entityID(),metricsPage:t.metricsPage,metricsProperties:E(E({},c),t.metricsProperties),skipClickMetrics:!0},f(d,b(u)))})}}},89843:(e,t,r)=>{"use strict";r.d(t,{aM:()=>X,Gh:()=>J,GZ:()=>ee,mD:()=>te,Ib:()=>re,Nd:()=>ne,Pe:()=>ae,UY:()=>oe,aU:()=>le,fR:()=>ce,H3:()=>de,mP:()=>ue,ZP:()=>pe,PP:()=>me,hM:()=>he,u9:()=>ge,Bf:()=>ye,de:()=>ve,$z:()=>fe,$e:()=>be,tv:()=>Pe});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(41444),l=r(15451),c=r(44442),d=r(17329),u=r(71701),p=r(86423),m=r(27649),h=r(43508),g=r(8523),y=r(52108),v=r(10559),f=r(76389),b=r(73788),Z=r(70894),S=r(44518),P=r(95117),I=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))M.call(t,r)&&O(e,r,t[r]);if(C)for(var r of C(t))D.call(t,r)&&O(e,r,t[r]);return e},x=(e,t)=>E(e,w(t)),A=(e,t)=>{var r={};for(var n in e)M.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&C)for(var n of C(e))t.indexOf(n)<0&&D.call(e,n)&&(r[n]=e[n]);return r};const k="multiSelect/redispatchLegacyMuliselectAction",N="multiSelect/selectItem",R="multiSelect/selectModels",L="multiSelect/deselectAllItems",j="multiSelect/deselectModels",V="multiSelect/deselectCollection",U="multiSelect/selectRange",F="multiSelect/deselectRange",B="multiSelect/playSelectedItems",_="multiSelect/queueSelectedItems",z="multiSelect/favoriteSelectedItems",H="multiSelect/unfavoriteSelectedItems",W="multiSelect/updateSelectedItemsPlayedStatus",G="multiSelect/editSelectedItems",Q="multiSelect/refreshSelectedItems",$="multiSelect/analyzeSelectedItems",K="multiSelect/optimizeMetadataItems",q="multiSelect/mergeSelectedItems",Y="multiSelect/deleteSelectedItems",X=(0,l.Z)(k),J=(0,l.Z)(N),ee=(0,l.Z)(R),te=(0,l.Z)(L),re=(0,l.Z)(j),ne=(0,l.Z)(V),ie=(0,l.Z)(U),se=(0,l.Z)(F),ae=(0,l.Z)(B),oe=(0,l.Z)(z),le=(0,l.Z)(H),ce=((0,l.Z)(W),(0,l.Z)(G)),de=(0,l.Z)(Q),ue=(0,l.Z)($),pe=(0,l.Z)(K),me=(0,l.Z)(q),he=(0,l.Z)(Y),ge=(0,l.Z)(B,(e=>{var t=e,{options:r={}}=t,n=A(t,["options"]);return x(T({},n),{options:x(T({},r),{shuffle:!0})})})),ye=(0,l.Z)(W,(e=>x(T({},e),{played:!0}))),ve=(0,l.Z)(W,(e=>x(T({},e),{played:!1}))),fe=(0,l.Z)(_,(e=>{var t=e,{options:r={}}=t,n=A(t,["options"]);return x(T({},n),{options:x(T({},r),{next:!1})})})),be=(0,l.Z)(_,(e=>{var t=e,{options:r={}}=t,n=A(t,["options"]);return x(T({},n),{options:x(T({},r),{next:!0})})}));function Ze(e){return e.get("ui").get("multiSelect").get("activeSelectionItems").map((e=>e.get("model").entityID()))}function Se(e){return e.map((e=>e.entityID()))}const Pe={[k](e,t,r){const n=t.items.map((t=>{const{metadataItemModel:r}=(0,Z.Z)(e,t);return r})),i=t.legacyAction.type,s=t.legacyAction.payload;r({type:i,payload:x(T({},s),{items:n})})},[N](e,t,r){const{type:n,model:i,collection:s,isRangeSelect:a=!1}=t,o=e.get("ui").get("multiSelect"),l=o.get("activeSelectionType"),c=o.get("activeSelectionRange");if(l&&l!==n)return;if(o.listenToCollection(s),!a||!c||c.collection!==s)return o.set("activeSelectionRange",{collection:s,startModel:i}),void r(ee([{id:i.id,type:n,model:i}]));const d=c.startModel,u=c.endModel,p=s.indexOf(d),m=s.indexOf(i);if(u){const e=s.indexOf(u);r(se({collection:s,range:{start:p,end:e}}))}o.set("activeSelectionRange",{collection:s,startModel:d,endModel:i}),r(ie({type:n,collection:s,range:{start:p,end:m}}))},[R](e,t){e.get("ui").get("multiSelect").get("activeSelectionItems").add(t)},[L](e){e.get("ui").get("multiSelect").get("activeSelectionItems").reset()},[j](e,t){e.get("ui").get("multiSelect").get("activeSelectionItems").remove(t)},[V](e,t,r){const n=e.get("ui").get("multiSelect"),i=n.get("activeSelectionItems"),s=[];n.stopListening(t),t.each((e=>{i.get(e.id)&&s.push(e.id)})),s.length&&r(re(s))},[U](e,t,r){const{type:n,collection:i,range:s}=t,a=e.get("ui").get("multiSelect").get("activeSelectionItems"),o=[];v.Z.each(s,(e=>{const t=i.at(e);t&&!a.get(t.id)&&o.push({id:t.id,type:n,model:t})})),o.length&&r(ee(o))},[F](e,t,r){const{collection:n,range:i}=t,s=e.get("ui").get("multiSelect").get("activeSelectionItems"),a=[];v.Z.each(i,(e=>{const t=n.at(e);t&&s.get(t.id)&&a.push(t.id)})),a.length&&r(re(a))},[B](e,t,r){const n=t.items?Se(t.items):Ze(e);r((0,m.wA)(x(T({},t),{metadataItemEntityIDs:n})))},[_](e,t,r){const n=t.items?Se(t.items):Ze(e);r((0,m.tP)(x(T({},t),{metadataItemEntityIDs:n})))},[z](e,t,r){const n=(0,f.js)(e,t),s=e.get("ui").get("multiSelect").get("activeSelectionItems").pluck("model");let a=i().Deferred().resolve().promise();s.forEach((e=>{a=a.then((()=>(0,d.Z)(n,e,{rating:y.jt})))})),a.fail((()=>{r((0,h.wp)((0,b.Z)("There was an unexpected error favoriting an item.")))}))},[H](e,t,r){const n=(0,f.js)(e,t),s=e.get("ui").get("multiSelect").get("activeSelectionItems").pluck("model");let a=i().Deferred().resolve().promise();s.forEach((e=>{a=a.then((()=>(0,d.Z)(n,e,{rating:y.LX})))})),a.fail((()=>{r((0,h.wp)((0,b.Z)("There was an unexpected error unfavoriting an item.")))}))},[W](e,t,r){const n=e.get("ui").get("multiSelect").get("activeSelectionItems").pluck("model");let s=i().Deferred().resolve().promise();n.forEach((r=>{s=s.then((()=>(0,p.Z)(e,x(T({},t),{metadataItemEntityID:r.entityID()}))))})),s.fail((()=>{const e=t.played?(0,b.Z)("There was an unexpected error marking an item played."):(0,b.Z)("There was an unexpected error marking an item unplayed.");r((0,h.wp)(e))})),s.always((()=>{const e={};n.forEach((t=>{const n=t.server.entityID();e[n]||(e[n]=!0,r((0,h.jR)({serverEntityID:n})))}))}))},[G](e,t){var r;const n=e.get("ui").get("multiSelect"),i=null!=(r=t.items)?r:n.get("activeSelectionItems").pluck("model"),s=new S.Z({items:i});g.Z.trigger("show:modal",s)},[Q](e,t,r){var n;const s=e.get("ui").get("multiSelect"),a=null!=(n=t.items)?n:s.get("activeSelectionItems").pluck("model");let o=i().Deferred().resolve().promise();a.forEach((e=>{o=o.then((()=>(0,u.Z)(e)))})),o.fail((()=>{r((0,h.wp)((0,b.Z)("There was an unexpected error refreshing an item.")))}))},[$](e,t,r){var n;const s=e.get("ui").get("multiSelect"),a=null!=(n=t.items)?n:s.get("activeSelectionItems").pluck("model");let o=i().Deferred().resolve().promise();a.forEach((e=>{o=o.then((()=>(0,c.Z)(e)))})),o.fail((()=>{r((0,h.wp)((0,b.Z)("There was an unexpected error analyzing an item.")))}))},[K](e,t){var r;const n=e.get("ui").get("multiSelect"),i=null!=(r=t.items)?r:n.get("activeSelectionItems").pluck("model"),s=new P.Z({item:a().first(i),items:i});g.Z.trigger("show:modal",s)},[q](e,t){var r;const n=e.get("ui").get("multiSelect"),i=null!=(r=t.items)?r:n.get("activeSelectionItems").pluck("model"),[s,...a]=i;o.Z.execute("merge",{item:s,items:a})},[Y](e,t,r){var n;const i=e.get("ui").get("multiSelect"),s=null!=(n=t.items)?n:i.get("activeSelectionItems").pluck("model"),a=t.options||{};o.Z.execute("deleteItems",x(T({},a),{items:s,skipConfirmation:!0}))}}},36991:(e,t,r)=>{"use strict";r.d(t,{Pi:()=>u,BE:()=>p,GK:()=>m});var n=r(19755),i=r.n(n),s=r(15451),a=r(81775),o=r(49178),l=r(58024);const c="oauth/fetchOauthProviders",d="oauth/unlinkOauthProvider",u=(0,s.Z)(c),p=(0,s.Z)(d),m={[c]:(0,a.Z)({key:"oauthProviders",getModel:e=>e.get("cloudServer").get("desktop")}),[d](e,t,r){const n=e.get("cloudServer"),s=n.get("desktop").get("oauthProviders").findWhere(t);s.set("isUnlinking",!0);const a=n.populate().then((()=>i().ajax(n.getXHROptions(t.url,{type:"DELETE"}))));(0,o.Z)(a,1e3).done((()=>{s.set("unlinkError",null)})).fail((e=>{s.set("unlinkError",e)})).always((()=>{r((0,l.bc)()),r(u()),s.set("isUnlinking",!1)}))}}},14853:(e,t,r)=>{"use strict";r.d(t,{t9:()=>B,Oj:()=>_,nP:()=>z,mp:()=>H,CM:()=>W,e0:()=>G,ay:()=>Q,K$:()=>$,wQ:()=>J});var n=r(19755),i=r.n(n),s=r(45191),a=r(15451),o=r(56925),l=r(80011),c=r(43508),d=r(79167),u=r(44301),p=r(75404),m=r(87999),h=r(62291),g=r(86418),y=r(58809),v=r(8523),f=r(12559),b=r(76389),Z=r(73788),S=r(85209),P=r(20683),I=r(16203),E=r(10379),w=r(24314),C=Object.defineProperty,M=Object.defineProperties,D=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))T.call(t,r)&&A(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&A(e,r,t[r]);return e},N=(e,t)=>M(e,D(t));const R="provider/scanLibraryFiles",L="provider/editLibrary",j="provider/analyzeLibrary",V="provider/emptyLibraryTrash",U="provider/deleteLibrary",F="provider/upgradeLibrary",B=(0,a.Z)(R),_=(0,a.Z)(L),z=(0,a.Z)(V),H=(0,a.Z)(j),W=(0,a.Z)(U),G=(0,a.Z)(F),Q=(0,a.Z)(R,(e=>N(k({},e),{force:!0}))),$=(0,a.Z)(R,(e=>N(k({},e),{cancel:!0})));function K(e){const t=e.get("key");return e.get("id")||t.substr(t.lastIndexOf("/")+1)}function q(e,t){const r=(0,b.js)(e,t).get("features").get(g.Z.CONTENT),n={};return t.contentDirectory.key&&(n.key=t.contentDirectory.key),t.contentDirectory.hubKey&&(n.hubKey=t.contentDirectory.hubKey),r.get("directories").findWhere(n)}function Y(e,t){const r=e.get("features").get(g.Z.CONTENT).get("key");let n;return n=r?P.Z.join([r,t.get("id")]):t.get("key"),n}function X(e,t){e(l.lm({serverEntityID:t})),e(l.tU({serverEntityID:t})),e((0,c.jR)({serverEntityID:t}))}const J={[o._g]:o.wQ[o._g],[o.o8]:o.wQ[o.o8],[o.yf]:o.wQ[o.yf],[o.NE]:o.wQ[o.NE],[R](e,t,r){const{cancel:n,force:i,metricsPage:s}=t,a=(0,b.SW)(e,t),o=q(e,t),d={libraryID:K(o),libraryType:o.get("type"),cancel:n,force:i,allowMetrics:!!s,metricsProperties:{page:s}};o.set("refreshing",!n),(0,I.Z)(a,d).fail((e=>{let t;t=n?(0,Z.Z)("There was an unexpected error canceling the scan."):i?503===e.status?(0,Z.Z)("An internet connection is required to refresh library metadata. Please check this server's connection and try again."):(0,Z.Z)("There was an unexpected error refreshing library metadata."):503===e.status?(0,Z.Z)("An internet connection is required to scan library files. Please check this server's connection and try again."):(0,Z.Z)("There was an unexpected error scanning library files."),r((0,c.wp)(t))})).always((e=>{r(l.Vk({serverEntityID:t.serverEntityID}))}))},[L](e,t){const r=(0,b.SW)(e,t),n=r.get("desktop").get("libraries"),i=q(e,t);n.fetch().then((()=>{const e=K(i),a=n.get(e);v.Z.trigger("show:modal",new w.Z({server:r,model:a})),(0,s.DB)("metrics").trackClick({page:t.metricsPage,action:p.Yf,type:a.get("type"),context:m.LIBRARY})}))},[V](e,t,r){const n=(0,b.SW)(e,t),a=(0,b.js)(e,t),o=q(e,t),l=Y(a,o),d=P.Z.join([l,"emptyTrash"]),h=n.getXHROptions(d,{type:"PUT"});i().ajax(h).done((()=>{r((0,c.wp)({type:u.M,message:(0,Z.Z)("The trash was emptied.")}))})).fail((e=>{r((0,c.wp)((0,Z.Z)("There was a problem emptying the trash.")))})),(0,s.DB)("metrics").trackClick({page:t.metricsPage,action:p.yZ,type:o.get("type"),context:m.LIBRARY})},[j](e,t,r){const n=(0,b.SW)(e,t),a=(0,b.js)(e,t),o=q(e,t),l=Y(a,o),d=P.Z.join([l,"analyze"]),u=n.getXHROptions(d,{type:"PUT"});i().ajax(u).fail((e=>{r((0,c.wp)((0,Z.Z)("There was a problem analyzing the library.")))})),(0,s.DB)("metrics").trackClick({page:t.metricsPage,action:p.JM,type:o.get("type"),context:m.LIBRARY})},[U](e,t,r){const n=(0,b.SW)(e,t),a=(0,b.js)(e,t),o=q(e,t),l=Y(a,o),d=P.Z.join(l,{async:1}),u=n.getXHROptions(d,{type:"DELETE"});a.get("features").get(g.Z.CONTENT).get("directories").remove(o),i().ajax(u).fail((()=>{X(r,t.serverEntityID),r((0,c.wp)((0,Z.Z)("There was a problem deleting the library.")))})),(0,s.DB)("metrics").trackClick({page:t.metricsPage,action:p.b1,type:o.get("type"),context:m.LIBRARY})},[F](e,t,r){const n=(0,b.SW)(e,t),s=(0,b.js)(e,t),a=q(e,t),o=a.get("type");let l;l=o===S.MOVIE?{agent:d.WX,scanner:y.Lx}:o===S.ARTIST?{agent:d.Ut,scanner:y.c3}:{agent:d.Zb,scanner:y.QQ};const u=Y(s,a),p=P.Z.join(u,l),m=n.getXHROptions(p,{type:"PUT"}),g=i().ajax(m).then((()=>{X(r,t.serverEntityID)}),(()=>{r((0,c.wp)((0,Z.Z)("There was a problem upgrading the library.")))}));t.options.refreshMetadata&&g.then((()=>{r(E.iE({serverEntityID:t.serverEntityID,cancel:!1,force:!0,metricsPage:h.xC}))}))},[l.Cs](e,t,r){t.activity.type===f.y0&&X(r,t.serverEntityID)}}},29320:(e,t,r)=>{"use strict";r.d(t,{SP:()=>D,r8:()=>k,HM:()=>x,Fi:()=>O,rg:()=>T});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(45191),l=r(10033),c=r(15451),d=r(3838),u=r(9841),p=r(87999),m=r(17197),h=r(8523),g=r(76389),y=r(73788),v=r(86022),f=r(3615);var b=r(72221),Z=r(20683);const S=function(e,t,r,n){const s=e.get("user"),a=e.get("cloudServer");return s.get("anonymous")?i().Deferred().reject().promise():i().ajax(a.getXHROptions("/api/claim/token",{headers:{"X-Plex-Token":r}})).promise().then((e=>f.Z.parseXML(e).token)).then((e=>i().ajax(t.getXHROptions(Z.Z.join("/myplex/claim",{token:e}),{type:"POST"})))).then((()=>function(e,t){const r=e.get("cloudServer").get("resources"),n={clientIdentifier:t.get("machineIdentifier")};return function(e,t={}){let r=Math.floor(Math.max(t.times||0,0));const n=Math.floor(Math.max(t.delay||0,0));t.cancel&&t.cancel.always((()=>{r=-1}));const s=i().Deferred();let a;return t.maxDuration&&(a=window.setTimeout((()=>{s.reject("maxDuration")}),t.maxDuration)),function t(){r<0||e().done((function(){a&&window.clearTimeout(a),s.resolve(...arguments)})).fail((function(){r-=1,r<0?(a&&window.clearTimeout(a),s.reject(...arguments)):"pending"===s.state()&&window.setTimeout(t,n)}))}(),s.promise()}((()=>r.fetch().then((()=>r.findWhere(n)?i().Deferred().resolve().promise():i().Deferred().reject().promise()))),{times:30,delay:1e3})}(e,t))).then((()=>{let e;return(0,b.Z)(t)&&(e=t.getXHROptions("/media/providers")),t.fetch(e)})).then((()=>function(e,t,r){const n=i().Deferred();return e.get("primaryServer")===t?n.resolve():(e.once("change:primaryServer",n.resolve),r()),function(e,t){const r=i().Deferred(),n=window.setTimeout((()=>{r.reject()}),t);return e.then(r.resolve,r.reject).always((()=>{window.clearTimeout(n)})),r.promise()}(n.promise(),2e3)}(e,t,n))).then((()=>{const e=s.get("email"),r=t.get("desktop").get("cloudAccount");t.set({myPlexSigninState:v.Hq,myPlexUsername:e}),r.set({signedIn:!0,username:e})}))};var P=r(19280);var I=r(6633);const E="server/claim/claimServer",w="server/claim/signInThenClaimServer",C="server/claim/signOutServer",M="server/claim/createPIN",D=(0,c.Z)(E),O=(0,c.Z)(w),T=(0,c.Z)(C),x=(0,c.Z)(M);function A(e,t,r){const{authToken:n}=t,i=(0,g.SW)(e,t),s=(0,P.Z)(e);s.set({errorMessage:null,isBusy:!0});const a=(0,o.DB)("metrics");return S(e,i,n,(()=>{r((0,l.h9)({machineIdentifier:i.id,metricsProperties:{context:p.SETTINGS}}))})).done((()=>{a.trackEvent({event:m.Yg,interaction:!0})})).fail((()=>{a.trackEvent({event:m.Jk,interaction:!1}),s.set({errorMessage:(0,y.Z)("There was a problem claiming this server."),isBusy:!1})}))}const k={[E](e,t,r){A(e,t,r).then((()=>{(0,P.Z)(e).set({errorMessage:null,isBusy:!1})}))},[w](e,t,r){(function(e,t){const r=e.get("user"),{authToken:n}=t;return i().ajax(r.server.getXHROptions(a().result(r,"url"),{headers:{"X-Plex-Token":n}})).then((e=>r.signIn(e,{})))})(e,t).then((()=>A(e,t,r))).then((()=>{(0,P.Z)(e).set({errorMessage:null,isBusy:!1})})).fail((t=>{const r=(0,d.Z)(t);h.Z.trigger("show:alert",{message:(0,u.Z)(r)}),(0,P.Z)(e).set({errorMessage:(0,y.Z)("There was a problem claiming this server."),isBusy:!1})}))},[C](e,t,r){const n=(0,g.SW)(e,t).get("desktop").get("cloudAccount"),i=(0,P.Z)(e);var s;i.set({errorMessage:null,isBusy:!0}),(s=n,s.destroy({timeout:0}).promise().done((()=>{s.server.set({accessToken:void 0,myPlexSigninState:v.Ar,myPlexSubscription:!1}),s.restoreDefaults()}))).done((()=>{i.set({errorMessage:null,isBusy:!1})})).fail((()=>{i.set({errorMessage:(0,y.Z)("There was a problem signing the server out."),isBusy:!1})}))},[M](e,t,r){const n=(0,I.Z)(e),i=(0,P.Z)(e);n.then((e=>{i.set({pinID:e.id,code:e.code,isBusy:!0})})),n.fail((()=>{i.set({fatalErrorMessage:(0,y.Z)("An error occurred"),isBusy:!1})}))}}},10379:(e,t,r)=>{"use strict";r.d(t,{Wy:()=>Se,JZ:()=>Ie,zl:()=>Te,ll:()=>we,Af:()=>Me,Hz:()=>De,uo:()=>Ce,Q6:()=>Ee,st:()=>Oe,R_:()=>fe,gj:()=>ye,o1:()=>Ze,Iy:()=>ke,iE:()=>Pe,m7:()=>be});var n=r(19755),i=r.n(n),s=r(45191),a=r(86022),o=r(15451),l=r(81775),c=r(48209),d=r(80011),u=r(43508),p=r(84503),m=r(44301),h=r(75404),g=r(87999),y=r(35199),v=r(60279),f=r(8523),b=r(12559),Z=r(86832),S=r(8238),P=r(69284),I=r(20573);var E=r(87442),w=r(73788),C=r(20683),M=r(13734),D=r(56112),O=r(58024),T=r(70894),x=r(16203),A=r(77054),k=r(42575),N=r(13469),R=r.n(N),L=r(22384),j=r(1661),V=r(1582),U=r(36411),F=r.n(U);const B=j.Z.extend({className:"alert-bar notify",template:F(),events:R().extend({"click .setup-link":"onSetupClick"},j.Z.prototype.events),serializeData(){return{model:this.model.get("model"),make:this.model.get("make"),dvrSettingsRoute:(0,V.Z)(this.options.machineIdentifier,"manage","dvr")}},disableDevice(){const e=(0,s.DB)("appStore"),t=this.options.serverEntityID;t&&e.dispatch((0,L._w)({serverEntityID:t,deviceID:this.model.id,enabled:!1}))},onSetupClick(){this.hide(),this.disableDevice()},onCloseClick(e){j.Z.prototype.onCloseClick.apply(this,arguments),this.disableDevice()}});var _=r(24314),z=r(19963),H=r(78924),W=r.n(H);const G=z.Z.extend({template:W(),events:R().extend({"click .learn-more":"onLearnMoreClick"},z.Z.prototype.events),onRender:function(){z.Z.prototype.onRender.apply(this,arguments),(0,s.DB)("metrics").trackView({page:"relayNotification",mode:"modal",action:h.GP},{interaction:!1})},onHide(){z.Z.prototype.onHide.apply(this,arguments),(0,s.DB)("metrics").trackClick({page:"relayNotification",mode:"modal",action:h.GP})},onLearnMoreClick(){(0,s.DB)("metrics").trackClick({page:"relayNotification",mode:"modal",action:h.yq})},serializeData(){return{serverName:this.options.serverName,escapedServerName:R().escape(this.options.serverName)}}});var Q=Object.defineProperty,$=Object.defineProperties,K=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,J=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ee=(e,t)=>{for(var r in t||(t={}))Y.call(t,r)&&J(e,r,t[r]);if(q)for(var r of q(t))X.call(t,r)&&J(e,r,t[r]);return e},te=(e,t)=>$(e,K(t));const re="server/redispatchLegacyServerAction",ne="server/fetchSettings",ie="server/populateSettings",se="server/updateSetting",ae="server/saveSetting",oe="server/addLibrary",le="server/startLibrariesRefresh",ce="server/allowHttpFallback",de="server/optimizeDatabase",ue="server/cleanBundles",pe="server/emptyTrash",me="server/deleteServer",he="server/discoverMediaGrabberDevice",ge="server/populateHasiTunes",ye=(0,o.Z)(re),ve=(0,o.Z)(ne),fe=(0,o.Z)(ie),be=(0,o.Z)(se),Ze=(0,o.Z)(ae),Se=(0,o.Z)(oe),Pe=(0,o.Z)(le),Ie=(0,o.Z)(ce),Ee=(0,o.Z)(de),we=(0,o.Z)(ue),Ce=(0,o.Z)(pe),Me=(0,o.Z)(me),De=(0,o.Z)(he),Oe=(0,o.Z)(ge),Te=(0,o.Z)(le,(e=>te(ee({},e),{cancel:!0})));function xe(e,t){(0,s.DB)("metrics").trackClick({page:t,action:e,context:g.SERVER})}function Ae(e,t){const r=(0,k.SW)(e,t),n=(0,k.Y7)(e,t).get("settings").get(t.setting.id);if(n){const e=n.parse(t.setting);n.set("value",e.value),"FriendlyName"===e.id&&e.value?r.set("friendlyName",e.value):"allowMediaDeletion"===e.id&&r.set("allowMediaDeletion",e.value)}}const ke={[d.Vr]:d.Iy[d.Vr],[d.$Q]:d.Iy[d.$Q],[d.h9]:d.Iy[d.h9],[d.WV]:d.Iy[d.WV],[d.Cs]:d.Iy[d.Cs],[d.mK]:d.Iy[d.mK],[d.Wq]:d.Iy[d.Wq],[d.rW]:d.Iy[d.rW],[d.db]:d.Iy[d.db],[d.RD]:d.Iy[d.RD],[d.l2]:d.Iy[d.l2],[d.kM]:d.Iy[d.kM],[d.$M]:d.Iy[d.$M],[re](e,t,r){const{serverModel:n,providerModel:i}=(0,T.Z)(e,t),s=t.legacyAction.type,a=t.legacyAction.payload;r({type:s,payload:te(ee({},a),{serverEntityID:n.entityID(),providerEntityID:i.entityID()})})},[ne]:(0,l.Z)({key:"settings",getModel:k.Y7}),[ie]:(0,c.Z)({key:"settings",fetchActionCreator:ve,getModel:k.Y7}),[se](e,t){Ae(e,t)},[ae](e,t){const r=(0,k.Y7)(e,t).get("settings").get(t.setting.id);(0,E.c9)((()=>r.set({isSaving:!0}))),Ae(e,t),r.save().then((()=>r.set({isSaving:!1})),(()=>r.set({isSaving:!1})))},[d.R](e,{machineIdentifier:t,serverName:r},n){const i=e.get("user").get("experienceSettings").get("reminders"),s=(0,M.Z)(y.Z.Relay,t),a=i.get(s);if(a&&!(0,v.Z)(a.get("remindAfter")))return;const o=new G({serverName:r});f.Z.trigger("show:modal",o),n((0,A.JY)({id:s}))},[d.ay](e,t){const r=(0,k.SW)(e,t),n=e.get("user").get("experienceSettings").get("allowHttpFallback");!function(e,t,r,n){if(function(e,t){if(!e.get("isFullServer"))return!1;if(I.Z.isHostedHttps&&!S.Z.allowMixedContent)return!1;const r=t===P.Z.ALWAYS,n=t===P.Z.SAME_NETWORK;return!!(r||n&&e.get("publicAddressMatches"))}(e,n)){const n=e.addConnection({scheme:"http",address:t,port:r,isFallback:!0});(0,Z.Z)("[Connections] Added insecure fallback connection for %s at %s",e.get("debugName"),n.id)}else Z.Z.warn("[Connections] Prevented fallback to insecure connection for",e.get("debugName"))}(r,t.address,t.port,n)},[oe](e,t){const r=(0,k.SW)(e,t),{options:n={}}=t,i=new _.Z(ee({server:r,redirect:!1!==t.redirect},n));f.Z.trigger("show:modal",i),xe(h.wl,t.metricsPage)},[le](e,t,r){const{cancel:n,force:i,metricsPage:s}=t,a=(0,k.SW)(e,t),o={serverModel:a,libraryID:"all",cancel:n,force:i,allowMetrics:!!s,metricsProperties:{page:s}};t.cancel&&(0,k.Y7)(e,t).get("libraries").each((e=>e.set("refreshing",!1))),(0,x.Z)(a,o).fail((()=>{const e=t.cancel?(0,w.Z)("There was a problem canceling the update."):(0,w.Z)("There was a problem updating libraries.");r((0,u.wp)(e))})).always((()=>{r((0,d.tU)({serverEntityID:t.serverEntityID}))}))},[ce](e,t,r){r((0,p.LN)({allowHttpFallback:t.allowHttpFallback})),r((0,d.Vk)({serverEntityID:t.serverEntityID}))},[de](e,t,r){const n=(0,k.SW)(e,t),s=(0,k.Y7)(e,t),a=n.supports("optimizeDatabaseActivity"),o=C.Z.join("/library/optimize",a?{async:1}:{}),l=n.getXHROptions(o,{type:"PUT"});r((0,d.ET)({serverEntityID:t.serverEntityID,activityType:b.nJ})),s.set({optimizeDatabaseError:null}),i().ajax(l).done((()=>{a||r((0,d.n7)({serverEntityID:t.serverEntityID,activityType:b.nJ}))})).fail((()=>{s.set({optimizeDatabaseError:(0,w.Z)("There was a problem optimizing the database.")}),r((0,d.n7)({serverEntityID:t.serverEntityID,activityType:b.nJ})),t.hideAlerts||r((0,u.wp)((0,w.Z)("There was a problem optimizing the database.")))})),xe(h.nJ,t.metricsPage)},[ue](e,t,r){const n=(0,k.SW)(e,t),s=(0,k.Y7)(e,t),a=C.Z.join("/library/clean/bundles",{async:1}),o=n.getXHROptions(a,{type:"PUT"});r((0,d.ET)({serverEntityID:t.serverEntityID,activityType:b.zL})),s.set({cleanBundlesError:null}),i().ajax(o).fail((()=>{s.set({cleanBundlesError:(0,w.Z)("There was a problem removing unused bundles.")}),r((0,d.n7)({serverEntityID:t.serverEntityID,activityType:b.zL})),t.hideAlerts||r((0,u.wp)((0,w.Z)("There was a problem removing unused bundles.")))})),xe(h.zL,t.metricsPage)},[pe](e,t,r){const n=(0,k.SW)(e,t),s=(0,k.Y7)(e,t).get("libraries");(t.libraryID?i().Deferred().resolve([t.libraryID]).promise():s.populate().then((()=>s.map((({id:e})=>e))))).then((e=>{const t=e.map((e=>i().ajax(n.getXHROptions(`/library/sections/${e}/emptyTrash`,{type:"PUT"}))));return i().when(...t)})).then((()=>{r((0,u.wp)({type:m.M,message:(0,w.Z)("The trash was emptied.")}))}),(e=>{r((0,u.wp)((0,w.Z)("There was a problem emptying the trash.")))})),xe(h.yZ,t.metricsPage)},[me](e,t,r){const n=(0,k.SW)(e,t),s=e.get("cloudServer");if(!n)return;if(s.get("isResolved")){const e=s.getXHROptions(`/api/servers/${n.id}`,{type:"DELETE"});i().ajax(e)}const o=s.get("resources").get(n.id);o&&o.trigger("destroy",o,o.collection),n.get("isFullOwnedServer")&&n.get("isConnected")?n.get("desktop").get("cloudAccount").destroy().done((()=>{n.set({myPlexSigninState:a.Ar,myPlexSubscription:!1})})).always((()=>{r((0,d.Vk)({serverEntityID:t.serverEntityID})),n.populate().fail((function(){n.trigger("destroy",n,n.collection),r((0,O.im)({route:"home"}))}))})):(n.trigger("destroy",n,n.collection),r((0,O.im)({route:"home"}))),xe(h.FR,t.metricsPage)},[he](e,t){const r=(0,k.SW)(e,t),n=e.get("ui").get("dvrSettingsUI"),i=t.device;if(n.get("isUIPopulated"))return;const s=new B({model:new D.ZP(i,{parse:!0}),serverEntityID:t.serverEntityID,machineIdentifier:r.get("machineIdentifier")});f.Z.trigger("show:bar","alertbar",s)},[ge](e,t){const r=(0,k.SW)(e,t),n=(0,k.Y7)(e,t);if(!n.get("isHasiTunesPopulated")){const e=C.Z.join("/music/iTunes"),t=r.getXHROptions(e);i().ajax(t).done((()=>{n.set({hasiTunes:!0,isHasiTunesPopulated:!0})})).fail((()=>{n.set({hasiTunes:!1,isHasiTunesPopulated:!0})}))}}}},83329:(e,t,r)=>{"use strict";r.d(t,{Tz:()=>T,xf:()=>x,xx:()=>A,Or:()=>k,wR:()=>N,KH:()=>R});var n=r(19755),i=r.n(n),s=r(10033),a=r(15451),o=r(92527),l=r(8523),c=r(76389),d=r(73788),u=r(20683),p=r(19963),m=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Z=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&b(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&b(e,r,t[r]);return e};const S="serverUpdate/fetchServerUpdateStatus",P="serverUpdate/checkForServerUpdate",I="serverUpdate/dismissServerUpdate",E="serverUpdate/downloadServerUpdate",w="serverUpdate/installServerUpdate";function C(e,t){const{download:r,initialState:n,isChecking:s=!0}=t,a={download:r?"1":"0"},l=u.Z.join("/updater/check",a),c=e.getXHROptions(l,{type:"PUT"}),d=e.get("desktop").get("update"),p={isChecking:s};null!=n&&(p.state=n),d.set(p),i().ajax(c).then(null,(()=>{d.set({isChecking:!1,state:o.ERROR})}))}function M(e,t){const r=u.Z.join(["/updater/apply"],t),n=e.getXHROptions(r,{type:"PUT"});return i().ajax(n)}function D(e){const t=e.get("desktop").get("update");M(e).then((()=>{t.set("state",o.INSTALLING),e.set("isInstallingServerUpdate",!0)}),(()=>{t.set("state",o.ERROR),e.set("isInstallingServerUpdate",!1)}))}function O(e,t,r,n){const i=e.get("deviceSettings").get("dismissedServerUpdateVersions");var a,o;t((0,s.T5)({dismissedServerUpdateVersions:(a=Z({},i),o={[r.get("machineIdentifier")]:n},h(a,g(o)))}))}const T=(0,a.Z)(S),x=(0,a.Z)(P),A=(0,a.Z)(I),k=(0,a.Z)(E),N=(0,a.Z)(w),R={[S](e,t){const r=(0,c.SW)(e,t),n=(0,c.Y7)(e,t).get("update");r.get("isFullOwnedServer")&&r.get("updater")&&!r.get("isOutOfDate")&&!n.get("isChecking")&&(n.set({isChecking:!0}),n.fetch().then((()=>{const e=n.get("state"),t=e===o.DONE||e===o.ERROR||e===o.NONE;C(r,{isChecking:t})}),(()=>{n.set({isChecking:!1})})))},[P](e,t){const{download:r,initialState:n}=t;C((0,c.SW)(e,t),{download:r,initialState:n})},[I](e,t,r){const n=(0,c.SW)(e,t);(0,c.Y7)(e,t).get("update").get("canInstall")?M(n,{skip:1}).then((()=>{r(T(t))}),(()=>{O(e,r,n,t.version)})):O(e,r,n,t.version)},[E](e,t){C((0,c.SW)(e,t),{download:!0,initialState:o.DOWNLOADING})},[w](e,t){const r=(0,c.SW)(e,t);if(r.get("activeConnection").get("isLoopback"))D(r);else{const e=new p.Z({title:(0,d.Z)("Remote Installation"),confirmLabel:(0,d.Z)("Continue"),cancelLabel:(0,d.Z)("Cancel"),message:(0,d.Z)("The installer may display dialogs that require input. Make sure you have desktop access to the computer running Plex Media Server before continuing.")});l.Z.trigger("show:modal",e),e.promise.then((()=>D(r)))}}}},96039:(e,t,r)=>{"use strict";r.d(t,{ib:()=>V,j3:()=>U,o6:()=>F,Gu:()=>_,xg:()=>z,os:()=>H,eA:()=>W,FV:()=>Q,fv:()=>te});var n=r(13469),i=r.n(n),s=r(45191),a=r(65935),o=r(46291),l=r(15451),c=r(85477),d=r(27649),u=r(57200),p=r(52501),m=r(11574),h=r(36505),g=r(12153),y=r(86832),v=r(78151),f=r(80106),b=r(42575),Z=Object.defineProperty,S=Object.defineProperties,P=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))E.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))w.call(t,r)&&C(e,r,t[r]);return e},D=(e,t)=>S(e,P(t));const O="syncplaySessionActions/joinSession",T="syncplaySessionActions/leaveSession",x="syncplaySessionActions/setSessionError",A="syncplaySessionActions/toggleSessionLobby",k="syncplaySessionActions/syncUser",N="syncplaySessionActions/syncLobby",R="syncplaySessionActions/syncPlaystate",L="syncplaySessionActions/addNotification",j="syncplaySessionActions/removeNotification",V=(0,l.Z)(O),U=(0,l.Z)(T),F=(0,l.Z)(x),B=((0,l.Z)(A),(0,l.Z)(A,(e=>D(M({},e),{shouldShow:!0})))),_=(0,l.Z)(A,(e=>D(M({},e),{shouldHide:!0}))),z=(0,l.Z)(k),H=(0,l.Z)(N),W=(0,l.Z)(R),G=(0,l.Z)(L),Q=(0,l.Z)(j),$=h.Se,K="WATCH_TOGETHER";function q(e){return X(e).get("rooms")}function Y(e){return X(e).get("session")}function X(e){return e.get("ui").get("watchTogether")}function J(e){return(null==e?void 0:e.deviceIdentifier)===a.Z.prop("X-Plex-Client-Identifier")}function ee(e){const t=(0,v.F_)(e,$);return t.get("syncplaySessionRoomID")&&!!(0,c.Z)(t)}const te={[O](e,t,r){const n=(0,b.bT)(e,t),i=n.get("id");X(e).set("session",new o.Z({metadataItem:n.get("metadataItem"),roomID:i})),r((0,f.Uw)()),(0,s.DB)("syncplaySessionManager").join({roomID:i,roomSourceUri:n.get("sourceUri"),roomSyncplayHost:n.get("syncplayHost"),roomSyncplayPort:n.get("syncplayPort")})},[T](e,t,r){const n=Y(e);if(n){const t=X(e);(0,y.Z)("[Watch Together] Leaving session for room:",n.get("roomID")),(0,s.DB)("syncplaySessionManager").leave(),t.unset("session"),t.unset("sessionError")}},[x](e,t,r){const n=(0,v.F_)(e,$),{sessionError:i}=t;n.get("syncplaySessionRoomID")?n.set({hasError:!0,errorMessage:i}):X(e).set({sessionError:i})},[A](e,t,r){const n=(0,v.F_)(e,$),i={initiator:K,playerType:$},{shouldHide:a,shouldShow:o}=t;let l;if(o&&(n.set({isWatchTogetherLobbyVisible:!0,isWatchTogetherParticipantsVisible:!1}),n.get("isPaused")||(l=(0,u.wO)(i))),a){const e=null!==n.get("adState");e&&(0,s.DB)("syncplaySessionManager").update({isAdPlaying:e,adDisplayIndex:n.get("adDisplayIndex"),adDisplayTotal:n.get("adDisplayTotal")}),n.get("isPaused")&&(l=(0,u.hY)(i)),n.set({isWatchTogetherLobbyVisible:!1})}(o||a)&&(0,y.Z)("[Watch Together] Session lobby is visible?",n.get("isWatchTogetherLobbyVisible")),l&&ee(e)&&((0,y.Z)("[Watch Together] Dispatching after lobby visibility:",l),r(l))},[k](e,t,r){var n,i,s,a;const{event:o}=t;if(!o.user)return;const{ad:l,isPresent:c,isReady:d,positionSeconds:u,isPaused:p,user:m}=o,{deviceIdentifier:h,deviceName:v,id:b}=m,Z=Y(e),S=Z.get("users"),P=[],I={},E=S.get(h)||S.add({deviceIdentifier:h,deviceName:v,id:b});if(!E.get("title")){const t=null==(n=q(e).get(Z.get("roomID")))?void 0:n.get("users"),r=null==t?void 0:t.get(b);r?(I.title=r.get("title"),I.thumb=r.get("thumb")):X(e).get("isRoomsPending")||(y.Z.debug(`[Watch Together] Syncplay user is unknown ${m.id} (${m.deviceName})`),P.push((0,f.Uw)()))}void 0!==c&&c!==E.get("isPresent")&&(I.isPresent=c,P.push(G({type:c?g.OR:g.In,user:m}))),!1===c&&E.get("isAdPlaying")?(I.adDisplayIndex=null,I.adDisplayTotal=null,I.isAdPlaying=!1):void 0!==l&&(I.adDisplayIndex=null!=(i=null==l?void 0:l.displayIndex)?i:null,I.adDisplayTotal=null!=(s=null==l?void 0:l.displayTotal)?s:null,I.isAdPlaying=null!=(a=null==l?void 0:l.isPlaying)&&a),void 0!==d&&(I.isReady=d),void 0!==p&&(I.isWatching=!p),void 0!==u&&(I.positionSeconds=u),y.Z.debug(`[Watch Together] Updating user ${m.id} (${m.deviceName}):`,I),E.set(I),P.forEach((e=>{y.Z.debug("[Watch Together](%s) Dispatching:",k,e),r(e)}))},[R](e,t,r){const{roomID:n,event:i}=t,s=Y(e);if(J(i.user))return;const a={user:i.user},o=function(e,t){const r=(0,v.F_)(e,$),{event:n}=t,{isPaused:i,positionSeconds:s,user:a}=n,o=null!=s,l=Y(e).get("users").get(null==a?void 0:a.deviceIdentifier),c={nextPlaybackSpeed:r.get("playbackSpeed"),shouldChangePlaybackSpeed:!1,shouldPause:!1,shouldResume:!1,shouldSeek:!1,shouldStartPlayback:!1};if(!r.get("syncplaySessionRoomID")&&o)return c.shouldStartPlayback=!0,c;if(null!=r.get("adState")||(null==l?void 0:l.get("isAdPlaying")))return c;if(!ee(e))return c;if(c.shouldPause=!0===i&&!r.get("isPaused"),c.shouldResume=!1===i&&r.get("isPaused"),c.shouldSeek=n.shouldSeek,o&&(c.nextPlaybackSpeed=1,!c.shouldSeek)){const e=r.get("positionSeconds")-s;y.Z.debug("[Watch Together] Local position diff:",`${e}s`),c.shouldSeek=e>=4||e<=-1.75,!c.shouldSeek&&e>1.5&&(c.nextPlaybackSpeed=.95)}return c.shouldChangePlaybackSpeed=c.nextPlaybackSpeed!==r.get("playbackSpeed"),c}(e,t),l=[];if(o.shouldStartPlayback){const e=s.get("metadataItem"),t=Math.round(1e3*i.positionSeconds);(0,y.Z)(`[Watch Together] Start playback at ${t}s`),l.push((0,d.wA)({serverEntityID:e.get("serverEntityID"),providerEntityID:e.get("providerEntityID"),syncplaySessionRoomID:n,playerType:$,isPaused:!0,isWatchTogetherLobbyVisible:!0,openState:m.K,startOffsetMilliseconds:t,options:{metadataItemKey:e.get("key"),type:p.pX}}))}o.shouldChangePlaybackSpeed&&l.push((0,u.ec)({playerType:$,playbackSpeed:o.nextPlaybackSpeed})),o.shouldSeek&&(l.push((0,u.O7)({initiator:K,playerType:$,positionSeconds:Math.round(i.positionSeconds)})),i.shouldSeek&&l.push(G(D(M({},a),{type:g.tG})))),o.shouldPause&&l.push((0,u.wO)({initiator:K,playerType:$}),G(D(M({},a),{type:g.E7}))),o.shouldResume&&l.push((0,u.hY)({initiator:K,playerType:$}),G(D(M({},a),{type:g.gk}))),l.forEach((e=>{y.Z.debug("[Watch Together](%s) Dispatching:",R,e),r(e)}))},[N](e,t,r){const n=function(e,t){const{event:r}=t,{user:n,isPaused:i}=r,s=(0,v.F_)(e,$),a=Y(e),o=q(e).get(a.get("roomID")),l=a.get("users"),c=l.get(null==n?void 0:n.deviceIdentifier),d={shouldHide:!1,shouldShow:!1};if(!c)return d;const u=!o||o.get("users").every((e=>l.findWhere({id:e.get("id")}))),p=l.length>0&&l.every((e=>e.get("isReady"))),m=!!l.find((e=>J(e)&&e.get("isReady"))),h=!J(n)&&(null==c?void 0:c.get("isAdPlaying")),g=!!s.get("adState"),y=s.get("isWatchTogetherLobbyVisible");return h&&!g?d.shouldShow=!0:h&&g||u&&p?d.shouldHide=!0:g||h||!1!==i||!m||(d.shouldHide=!0),d.shouldHide=y&&d.shouldHide,d.shouldShow=!y&&d.shouldShow,d}(e,t);n.shouldHide&&r(_(t)),n.shouldShow&&r(B(t))},[L](e,t,r){const n=(0,v.F_)(e,$),s=Y(e),{type:a,user:o}=t;if(J(o))return void y.Z.debug("[Watch Together] Ignoring notification from local user:",t);if(n.get("isWatchTogetherLobbyVisible"))return void y.Z.debug("[Watch Together] Ignoring notification while lobby visible:",t);const l={timestamp:Date.now(),type:a,uid:i().uniqueId(),userID:o.id};(0,y.Z)(`[Watch Together] Notification "${a}" from:`,o);const c=s.get("notifications").concat(l).slice(-5);s.set({notifications:c})},[j](e,t,r){const n=Y(e),i=n.get("notifications").filter((e=>e.uid!==t.uid));n.set({notifications:i})},[d.N9](e,t,r){const n=(0,v.F_)(e,$);if(n.get("syncplaySessionRoomID")&&!n.get("isWatchTogetherLobbyVisible")){const{adState:e,adDisplayIndex:n,adDisplayTotal:i}=t;(0,s.DB)("syncplaySessionManager").update({isAdPlaying:null!=e,adDisplayIndex:n,adDisplayTotal:i}),null==e&&r(B())}},[d.qG](e,t,r){r(U())},[d.Si](e,t,r){r(U())},[u.tG](e,t){(0,v.F_)(e,$).get("syncplaySessionRoomID")&&t.initiator!==K&&(0,s.DB)("syncplaySessionManager").update({hasPendingSeek:!0})},[u.R1](e,t){const r=(0,v.F_)(e,$);r.get("syncplaySessionRoomID")&&t.initiator!==K&&!r.get("adState")&&(0,s.DB)("syncplaySessionManager").update({hasPendingPlayPause:!0})}};Object.assign(te,{[u.ft]:te[u.tG],[u.Sq]:te[u.tG],[u.zV]:te[u.tG],[u.nB]:te[u.tG]})},3977:(e,t,r)=>{"use strict";r.d(t,{Lj:()=>o,Lq:()=>l,zJ:()=>d});var n=r(15451),i=r(85511);const s="ui/accountSettingsPage/updateUserProfile",a="ui/accountSettingsPage/clearUpdateUserProfileError",o=(0,n.Z)(s),l=(0,n.Z)(a);function c(e){return e.get("ui").get("accountSettingsPage")}const d={[s](e,t){const r=function(e){return e.get("user").get("profile")}(e),n=c(e);n.set({isUpdatingUserProfile:!0,updateUserProfileError:null}),r.save(t,{type:"PUT",wait:!0}).done((()=>{r.set(t),n.set({isUpdatingUserProfile:!1,updateUserProfileError:null})})).fail((e=>{n.set({isUpdatingUserProfile:!1,updateUserProfileError:(0,i.Z)(e)})}))},[a]:e=>{c(e).set("updateUserProfileError",null)}}},39263:(e,t,r)=>{"use strict";r.d(t,{ZZ:()=>o,ZX:()=>l,HF:()=>c,r4:()=>u});var n=r(15451),i=r(2380),s=r(76389),a=r(8543);const o=(0,n.Z)(a.Op),l=(0,n.Z)(a.tL),c=(0,n.Z)(a.k4);function d(e){return e.get("ui").get("background")}const u=(0,i.Z)({[a.Op](e,t={}){const{imageUrl:r,allowBlur:n=!0}=t;d(e).set({server:(0,s.SW)(e,t),provider:(0,s.js)(e,t),imageUrl:r,allowBlur:n,isBackgroundPending:!1})},[a.tL](e,t){const{theme:r}=t,n=d(e),i=(0,s.SW)(e,t),a=i&&r?i.resolveUrl(r,{appendHeaders:!0}):void 0;n.set("themeMusicUrl",a)},[a.k4](e,t){d(e).restoreDefaults({isBackgroundPending:t.isBackgroundPending})}})},39977:(e,t,r)=>{"use strict";r.d(t,{Sn:()=>y,_S:()=>v,oP:()=>f,fh:()=>b,Pv:()=>Z,N$:()=>I});var n=r(19755),i=r.n(n),s=r(15451),a=r(2380),o=r(81775),l=r(20683),c=r(78044),d=r(42575);const u="ui/dvrSettings/initDVRSettingsUI",p="ui/dvrSettings/clearDVRSettingsUI",m="ui/dvrSettings/fetchDVRs",h="ui/dvrSettings/reloadGuide",g="ui/dvrSettings/cancelReloadGuide",y=(0,s.Z)(u),v=(0,s.Z)(p),f=(0,s.Z)(m),b=(0,s.Z)(h),Z=(0,s.Z)(g);function S(e){return e.get("ui").get("dvrSettingsUI")}function P(e,t,r){const n=(0,d.SW)(e,t),s=l.Z.join(["/livetv/dvrs",t.dvrID,"reloadGuide"]),a=n.getXHROptions(s,{method:r});i().ajax(a)}const I=(0,a.Z)({[m]:(0,o.Z)({key:"dvrs",getModel:S}),[u](e,t,r){const n=S(e),i=n.get("dvr"),s=(0,d.SW)(e,t),a=s.get("machineIdentifier"),o={isUIPopulated:!0};i&&i.server.get("machineIdentifier")===a||(o.dvrs=new c.Z([],{server:s})),n.set(o),(s.hasOwnerFeature("dvr")||s.hasOwnerFeature("livetv"))&&r(f(t))},[p](e){S(e).set("isUIPopulated",!1)},[h](e,t,r){P(e,t,"POST")},[g](e,t,r){P(e,t,"DELETE")}})},22384:(e,t,r)=>{"use strict";r.d(t,{q9:()=>y,JA:()=>v,T5:()=>f,Ao:()=>b,ds:()=>Z,_w:()=>S,on:()=>w});var n=r(19755),i=r.n(n),s=r(15451),a=r(2380),o=r(20683),l=r(73703),c=r(42575);const d="SAVE_DVR_SETTINGS",u="CLEAR_DVR_SETTINGS_SAVE_ERROR",p="SAVE_DEVICE_SETTINGS",m="SAVE_DEVICE_TITLE",h="CLEAR_DEVICE_SETTINGS_SAVE_ERROR",g="SET_DVR_DEVICE_ENABLED",y=(0,s.Z)(d),v=(0,s.Z)(u),f=(0,s.Z)(p),b=(0,s.Z)(m),Z=(0,s.Z)(h),S=(0,s.Z)(g);function P(e){return e.get("ui").get("dvrSettingsUI").get("dvrSetup")}function I(e,t){return function(e){return e.get("ui").get("dvrSettingsUI").get("dvrs")}(e).get(t.dvrID)}function E(e,t){const r=P(e),n=t.deviceID;if(t.dvrID&&n){const r=I(e,t).get("devices").get(n);if(r)return r}if(n){const e=r.get("devices").get(n);if(e)return e}return r.get("selectedDevice")}const w=(0,a.Z)({[d](e,t){const r=(0,c.SW)(e,t),n=I(e,t),s=t.prefs,a=o.Z.join(["/livetv/dvrs",t.dvrID,"prefs"],s);n.set("isSaving",!0);const d=r.getXHROptions(a,{type:"PUT"}),u=i().ajax(d);u.done((()=>{const e=n.get("prefs");Object.keys(s).forEach((t=>{e.get(t).set("value",s[t])})),n.set({isSaving:!1,saveError:null})})),u.fail((e=>{n.set({isSaving:!1,saveError:(0,l.Z)(e)})}))},[u](e,t){I(e,t).set("saveError",null)},[p](e,t){const r=(0,c.SW)(e,t),n=E(e,t),s=t.prefs,a=o.Z.join(["/media/grabbers/devices",t.deviceID,"prefs"],s);n.set("isSaving",!0);const d=r.getXHROptions(a,{type:"PUT"}),u=i().ajax(d);u.done((()=>{const e=n.get("prefs");Object.keys(s).forEach((t=>{e.get(t).set("value",s[t])})),n.set({isSaving:!1,saveError:null})})),u.fail((e=>{n.set({isSaving:!1,saveError:(0,l.Z)(e)})}))},[m](e,t){const{title:r}=t,n=(0,c.SW)(e,t),s=E(e,t),a=o.Z.join(["/media/grabbers/devices",t.deviceID],{title:r,enabled:1}),l=n.getXHROptions(a,{type:"PUT"});i().ajax(l).then((()=>{s.set("title",r)}))},[h](e,t){E(e,t).set("saveError",null)},[g](e,t){const r=(0,c.SW)(e,t),n=t.enabled,s=o.Z.join(["/media/grabbers/devices",t.deviceID],{enabled:n?1:0}),a=r.getXHROptions(s,{type:"PUT"});i().ajax(a).promise().done((()=>{if(P(e)){const r=E(e,t);r&&r.set("status",n?"enabled":"disabled")}}))}})},17949:(e,t,r)=>{"use strict";r.d(t,{Jl:()=>s,yr:()=>a,nY:()=>o,Y1:()=>l,W7:()=>c});var n=r(15451),i=r(2380);const s=(0,n.Z)("ui/modal/syncDownloadModalChangeTemplateMode"),a=(0,n.Z)("ui/modal/syncDownloadModalClose"),o=(0,n.Z)("ui/modal/syncDownloadModalOpen"),l=(0,n.Z)("ui/modal/syncDownloadModalSaveSubscription"),c=(0,i.Z)({})},80:(e,t,r)=>{"use strict";r.d(t,{Sv:()=>D,Bl:()=>x,cv:()=>A,FY:()=>R});var n=r(19755),i=r.n(n),s=r(45191),a=r(15451),o=r(81775),l=r(56925),c=r(20683),d=r(73703),u=r(26773),p=r(77054),m=r(30399),h=r(36182),g=Object.defineProperty,y=Object.defineProperties,v=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&S(e,r,t[r]);if(f)for(var r of f(t))Z.call(t,r)&&S(e,r,t[r]);return e};const I="ui/onlineMediaSourcePage/initOnlineMediaSourcesPage",E="ui/onlineMediaSourcePage/fetchAvailableProviders",w="ui/onlineMediaSourcePage/fetchOptOutStatuses",C="ui/onlineMediaSourcePage/updateOptOutStatuses",M="ui/onlineMediaSourcePage/clearOnlineMediaSourcesUpdateError",D=(0,a.Z)(I),O=(0,a.Z)(E),T=(0,a.Z)(w),x=(0,a.Z)(C),A=(0,a.Z)(M);function k(e){return e.get("ui").get("onlineMediaSourcesPage")}function N(e,t={},r={}){const n=e.get("cloudServer"),i=e.get("user").get("uuid"),s=c.Z.join(["/api/v2/user",i,"settings/opt_outs"],t);return n.getXHROptions(s,P({dataType:"json"},r))}const R={[I](e,t,r){const n=k(e),i=e.get("cloudServer");n.restoreDefaults({availableProviders:new u.Z([],{server:i})}),r(O()),r(T())},[E]:(0,o.Z)({key:"availableProviders",getModel:k}),[w](e,t){const r=k(e);r.set({isOptOutStatusesPending:!0,optOutStatusesError:null});const n=N(e);i().ajax(n).then((e=>{r.set({optOutStatuses:e,isOptOutStatusesPending:!1,optOutStatusesError:null})}),(e=>{r.set({isOptOutStatusesPending:!1,optOutStatusesError:(0,d.Z)(e)})}))},[C](e,t,r){const n=k(e);n.set({isUpdatePending:!0,updateError:null});const a=Object.keys(t.optOutStatuses)[0],o=t.optOutStatuses[a],c=N(e,{key:a,value:o},{type:"POST"});i().ajax(c).then((()=>{const e=n.get("optOutStatuses");var t,i;n.set({optOutStatuses:(t=P({},e),i={[a]:o},y(t,v(i))),isUpdatePending:!1,updateError:null}),(0,s.DB)("serviceWorker").sendMessage({type:h.VQ}).finally((()=>{r((0,l.cg)()),r((0,p.L_)()),r(m.Z.actions.fetchOptOuts())}))}),(e=>{n.set({isUpdatePending:!1,updateError:(0,d.Z)(e)})}))},[M](e,t){k(e).set("updateError",null)}}},34359:(e,t,r)=>{"use strict";r.d(t,{mr:()=>b,Yb:()=>Z});var n=r(10033),i=r(15451),s=r(35311),a=r(59542),o=r(74226),l=r(76389),c=r(78151),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e};const f="ui/player/playQueue/toggleAutoPlay",b=(0,i.Z)(f),Z={[a.jB]:a.Yb[a.jB],[a.Qi]:a.Yb[a.Qi],[a._7]:a.Yb[a._7],[a.Q2]:a.Yb[a.Q2],[a.U8]:a.Yb[a.U8],[a.$D]:a.Yb[a.$D],[a.zG]:a.Yb[a.zG],[a.Xq]:a.Yb[a.Xq],[a.hl]:a.Yb[a.hl],[a.x8]:a.Yb[a.x8],[a.QS]:a.Yb[a.QS],[a.A0]:a.Yb[a.A0],[a.Er]:a.Yb[a.Er],[a.x7]:a.Yb[a.x7],[a.xJ]:a.Yb[a.xJ],[a.dU]:a.Yb[a.dU],[a.Zp]:a.Yb[a.Zp],[a.q$](e,{playerType:t},r){const i=e.get("user").id,s=(0,c.F_)(e,t),a=s.get("playQueue"),d=e.get("deviceSettings"),m=s.get("providerEntityID"),h=(0,l.js)(e,{providerEntityID:m}),g={providerEntityID:m,serverEntityID:s.get("serverEntityID"),playQueueOffset:s.get("positionSeconds"),playQueueType:a.get("type"),playQueueRepeat:a.get("repeat"),playQueueID:a.get("playQueueID")};if(o.wB(h.get("identifier"),[o.uk]))return;if(s.get("isWatchTogether"))return;const y=d.get("restorePlayQueue");var f,b;r((0,n.T5)({restorePlayQueue:(f=v({},y),b={[i]:g},u(f,p(b)))}))},[a.Ux](e,t,r){const i=e.get("user").id,s=e.get("deviceSettings").get("restorePlayQueue"),a=v({},s);delete a[i],r((0,n.T5)({restorePlayQueue:a}))},[f](e,{playerType:t},r){const n=e.get("user").get("experienceSettings").get("autoPlay"),i=(0,c.F_)(e,t);(0,s.Z)(e).changeAutoPlay(i,!n,r)}}},78e3:(e,t,r)=>{"use strict";r.d(t,{Vu:()=>E,vi:()=>C,HO:()=>M,NH:()=>w});var n=r(45191),i=r(13220),s=r(18655),a=r(29150),o=r(56036);const l={amp:"&",apos:"'","#x27":"'","#x2F":"/","#39":"'","#47":"/",lt:"<",gt:">",nbsp:" ",quot:'"'};function c(e){let t=e;return Object.keys(l).forEach((e=>{t=t.replace(new RegExp((0,o.Z)(`&${e};`),"g"),l[e])})),t}var d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const v=i.Z.extend({sessionAttrs:{protocol:s.Z.string.isRequired,protocolCapabilities:s.Z.array.isRequired},syncedAttrs:{friendlyName:s.Z.string.isRequired,capabilities:s.Z.array,volume:s.Z.integer.isRequired},defaults:{protocol:a.l,protocolCapabilities:["timeline","playback","mirror","playqueues","provider-playback"],volume:100},augmentResponse(e){return t=((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e})({},e),r={friendlyName:c(e.friendlyName)},u(t,p(r));var t,r}});var f=r(15451),b=r(64336),Z=r(73788);const S="ui/player/remoteCastPlayer/changeCastApiAvailability",P="ui/player/remoteCastPlayer/requestCastSession",I="ui/player/remoteCastPlayer/changeRemoteCastPlayer",E=(0,f.Z)(S),w=(0,f.Z)(P),C=(0,f.Z)(I),M={[S](e,t){e.set({castApiAvailability:t})},[P](e){(0,n.DB)("remoteCastPlayerManager").requestSession()},[I](e,t){const r=e.get("ui"),n=r.get("audioVideoPlayer"),i=r.get("photoPlayer");if(n.get("isOpen")){const e=n.get("isWatchTogether")?{hasError:!0,errorMessage:(0,Z.Z)("Watch Together is not currently supported when connected to a remote player.")}:{confirmLocalToRemote:b.o1,isPaused:!0};n.set(e)}i.get("isOpen")&&i.set({confirmLocalToRemote:b.o1,isPaused:!0}),e.set("remotePlayer",new v(t,{parse:!0}))}}},37334:(e,t,r)=>{"use strict";r.d(t,{OA:()=>Oe,A1:()=>ge,Vu:()=>Pe,Te:()=>Te,$B:()=>xe,jP:()=>De,Jo:()=>we,L0:()=>Ce,yU:()=>Ee,u7:()=>Ne,Qt:()=>Me,XI:()=>Ie,Jb:()=>Se,I3:()=>fe,RN:()=>ye,dS:()=>ve,IY:()=>be,Ep:()=>Ze});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(45191),l=r(47041),c=r(95994),d=r(15451),u=r(90446),p=r(20683),m=Object.defineProperty,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var f=r(35311),b=r(60526),Z=r(79830),S=r(20777),P=r(66117),I=r(34575),E=r(59542),w=r(27649),C=r(55810),M=r(29150),D=r(64336),O=r(52501),T=r(11574),x=r(36505),A=r(64155),k=r(74226),N=r(47276),R=r(86832),L=r(56594),j=r(56431),V=r(1124),U=r(76389),F=r(78151),B=r(87442),_=r(73788),z=r(54834),H=r(85209),W=r(14427),G=r(42575),Q=Object.defineProperty,$=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const X="ui/player/remotePlayer/changeRemotePlayer",J="ui/player/remotePlayer/syncRemotePlayerCurrentItem",ee="ui/player/remotePlayer/syncRemotePlayerState",te="ui/player/remotePlayer/syncRemotePlayQueueState",re="ui/player/remotePlayer/syncRemoteQuality",ne="ui/player/remotePlayer/syncRemoteStreams",ie="ui/player/remotePlayer/syncRemoteExperienceSettings",se="ui/player/remotePlayer/changeRemotePlayerVolume",ae="ui/player/remotePlayer/showRemotePlayerError",oe="ui/player/remotePlayer/mirrorDetails",le="ui/player/remotePlayer/discoverRemotePlayers",ce="ui/player/remotePlayer/idleRemotePlayer",de="ui/player/remotePlayer/removeRemotePlayer",ue="ui/player/remotePlayer/confirmRemoteToLocal",pe="ui/player/remotePlyaer/cancelLocalToRemote",me="ui/player/remotePlayer/closeLocalToRemote",he="ui/player/remotePlayer/confirmLocalToRemote",ge=(0,d.Z)(X),ye=(0,d.Z)(J),ve=(0,d.Z)(ee),fe=(0,d.Z)(te),be=(0,d.Z)(re),Ze=(0,d.Z)(ne),Se=(0,d.Z)(ie),Pe=(0,d.Z)(se),Ie=(0,d.Z)(ae),Ee=(0,d.Z)(oe),we=(0,d.Z)(le),Ce=(0,d.Z)(ce),Me=(0,d.Z)(de),De=(0,d.Z)(ue),Oe=(0,d.Z)(pe),Te=(0,d.Z)(me),xe=(0,d.Z)(he);function Ae(e,t){const r=(0,x.f_)(t);return e.get("ui").get(r+"Player")}function ke(e,t,r){return e.get("servers").populateServer(t).then((t=>(t.get("isCloud")?e.get("user").get("providers"):t.get("providers")).populate().then((e=>e)))).then((e=>{const t=e.get(r)||e.get(k.Y3);return t?t.populate().then((e=>e)):i().Deferred().reject().promise()}))}const Ne={[X](e,t){const r=(0,G.cX)(e,{playerIdentifier:t});e.set("remotePlayer",r)},[J](e,{playQueueType:t,options:r},n){const{machineIdentifier:s,providerIdentifier:a,containerKey:o,key:l,mediaIndex:c,bitrate:d,playQueueItemID:m,shouldRefreshPlayQueue:f,initialState:P}=r;if(!o||!l)return;const I=Ae(e,t);if(!I)return;const E=s||N.X,w=e.get("servers").populateServer(E),C=ke(e,s,a),M=C.then((e=>function({providerModel:e,currentPlayQueueModel:t,containerKey:r,playQueueOptions:n}){const i=function(e){let t;if(e){const r=p.Z.parseUrl(e),n=/^\/playQueues\/([^/?]+)/.exec(r.pathname||r.href);t=n?n[1]:void 0}return t}(r)||r;return t&&t.get("playQueueID")===i?t:(0,u.Z)(((e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(h)for(var r of h(t))y.call(t,r)&&v(e,r,t[r]);return e})({providerModel:e,playQueueID:i},n))}({providerModel:e,currentPlayQueueModel:I.get("playQueue"),containerKey:o,playQueueOptions:{playQueueType:t,playQueueOwn:!1}})));i().when(w,C,M).then(((t,r,s)=>{if(I.get("playQueue")===s){if(!I.get("isPlayQueueLoading")&&!s.get("isUpdatePending")&&f){const e=s.get("playQueueItems"),t=null!=m?e.get(m):e.find((e=>l===e.get("metadataItem").get("key")));if(I.set({isLyricsVisible:!1}),t){const r=s.get("playQueueSelectedItemID"),n=e.get(r),i=s.get("playQueueSelectedItemOffset"),a=e.indexOf(n),o=e.indexOf(t),l=t.get("metadataItem"),c=t.get("playQueueItemID");(0,R.Z)(`[Cast] The current metadata item on the remote player changed to ${l.get("title")}`),(0,S.ZP)(s).done((()=>{s.set({playQueueSelectedItemID:c,playQueueSelectedItemOffset:i+(o-a)})}))}else(0,S.ZP)(s)}}else!function(e,t){const{appModel:r,serverModel:n,providerModel:s,playerModel:a,playQueueModel:o,openState:l,mediaIndex:c,bitrate:d,initialState:u}=e;if(a.get("isPlayQueueLoading"))return;const p=o.get("type");a.restoreDefaults({serverEntityID:n.entityID(),providerEntityID:s.entityID(),isOpen:!0,openState:l||p===O.j0?T.y:T.K,isPlayQueueLoading:!0,playQueue:o,liveTVSession:a.get("liveTVSession"),playbackStartTime:Date.now()}),function({serverModel:e,providerModel:t,playQueueModel:r}){if(!r.get("isLocal"))return(0,S.ZP)(r);const n={server:e,provider:t},s=new b.Z({containerKey:r.get("playQueueID")},n);return s.fetch().then((()=>s.get("metadataItems").length?(0,Z.Z)({providerModel:t,metadataListModel:s,playQueueModel:r}).then(null,(()=>i().Deferred().reject("ERROR_COMPANION_PLAY_QUEUE_COULD_NOT_ADD_TO").promise())):i().Deferred().reject("ERROR_COMPANION_PLAY_QUEUE_EMPTY").promise()),(()=>i().Deferred().reject("ERROR_COMPANION_PLAY_QUEUE_COULD_NOT_POPULATE").promise()))}({serverModel:n,providerModel:s,playQueueModel:o}).done((()=>{a.set(((e,t)=>{for(var r in t||(t={}))K.call(t,r)&&Y(e,r,t[r]);if($)for(var r of $(t))q.call(t,r)&&Y(e,r,t[r]);return e})({isPlayQueueLoading:!1},u)),t(be({playQueueType:p,mediaIndex:c,bitrate:d}))})).fail((()=>{const e=r.get("remotePlayer");if(e){const t=e.get("friendlyName");a.restoreDefaults({hasError:!0,errorMessage:(0,_.Z)('An error occurred loading the media being played on "{playerName}".',{playerName:t})})}}))}({appModel:e,serverModel:t,providerModel:r,playerModel:I,playQueueModel:s,openState:I.get("isOpen")?null:T.y,mediaIndex:c,bitrate:d,initialState:P},n)})).fail((()=>{const t=e.get("remotePlayer");if(t){const e=t.get("friendlyName");I.restoreDefaults({hasError:!0,errorMessage:(0,_.Z)('"{playerName}" is playing media from an unknown source.',{playerName:e})})}}))},[ee](e,t){const{playQueueType:r,playerState:n,providerIdentifier:s,machineIdentifier:a,liveTVSessionSubscriptionKey:o,liveTVSessionStartedAt:l,liveTVSessionSeekRangeStartedAt:d,liveTVSessionSeekStartSeconds:u,liveTVSessionSeekEndSeconds:p,liveTVSessionCurrentPosition:m,liveTVSessionChannelIdentifier:h}=t,g=Ae(e,r);if(!g||!g.get("isOpen"))return;const y=(0,U.SW)(e,{serverEntityID:g.get("serverEntityID")});ke(e,a,s).then((e=>function(e,t,r,n,s,a,o,l,d,u){if(!n)return r.set({liveTVSession:null}),i().Deferred().resolve().promise();const p=r.get("liveTVSession"),m={key:n,currentPosition:d,startedAt:s,channelIdentifier:u,captureBuffer:{startedAt:a,seekStartSeconds:o,seekEndSeconds:l},nextPosition:null,lastSeekPosition:null};return p&&p.get("key")===n||r.set({liveTVSession:new c.Z(m,{provider:t,server:t.server})}),e.get("isCloud")?(null==p||p.set(m),i().Deferred().resolve().promise()):r.get("liveTVSession").populate().then((e=>(e.set(m),e)))}(y,e,g,o,l,d,u,p,m,h))),(0,B.c9)((()=>{g.set(n)}))},[te](e,t){const{playQueueType:r,playQueueVersion:n,repeatAll:i,repeatOne:s}=t,a=Ae(e,r);if(!a||!a.get("isOpen"))return;const o=a.get("playQueue");if(a.set({repeatAll:i,repeatOne:s}),o){const e=o.get("playQueueVersion");o.set("repeat",i),!o.get("isUpdatePending")&&e<n&&o.fetch()}},[re](e,{playQueueType:t,mediaIndex:r=0,bitrate:n}){const i=Ae(e,t);if(!i||!i.get("isOpen")||i.get("isPlayQueueLoading"))return;const s=i.get("playQueue"),a=s.get("playQueueItems").get(s.get("playQueueSelectedItemID"));if(!a)return;const o=a.get("metadataItem"),c=(0,H.getMetadataType)(a.get("type"));if(!c||c.mediaType!==z.pX)return;const d=o.get("Media")[r],u=l.Z.prop("video"),p=L.Z.getAvailableQualitiesFor(d,o.server,{lowestQualityIndex:u.lowestQualityIndex}),m=e.get("user").get("experienceSettings");let h=null==n?m.defaults().localQuality:L.Z.getNearestIndexToBitrate(n);if(L.Z.isExplicitQuality(h)){const e=p[0],t=p[p.length-1];e&&h<e.index?h=e.index:t&&h>t.index&&(h=L.Z.ORIGINAL)}i.set({qualityIndex:h,availableQualities:p})},[ne](e,t,r){const{playQueueType:n,key:i,mediaIndex:s=0,partIndex:o=0,audioStreamID:l,subtitleStreamID:c}=t,d=Ae(e,n);if(!d||!d.get("isOpen")||d.get("isPlayQueueLoading"))return;const u=d.get("playQueue"),p=u.get("playQueueItems").get(u.get("playQueueSelectedItemID")).get("metadataItem"),m=p.get("Media")[s],h=m&&m.Part[o];if(i!==p.get("key"))return;if(!h)return;const g=a().findWhere(h.Stream,{streamType:W.Z.get("audio").id,selected:!0}),y=a().findWhere(h.Stream,{streamType:W.Z.get("subtitles").id,selected:!0}),v=null==l?void 0:l.toString(),f=(null==c?void 0:c.toString())||A.H;null!=l&&g&&g.id!==v&&r((0,I.Bs)({metadataItemEntityID:p.entityID(),mediaIndex:s,streamTypeString:"audio",streamID:v,updateLocalOnly:!0})),y&&y.id!==f&&r((0,I.Bs)({metadataItemEntityID:p.entityID(),mediaIndex:s,streamTypeString:"subtitles",streamID:f,updateLocalOnly:!0}))},[ie](e,t){e.get("user").get("experienceSettings").set(t)},[se](e,t){e.get("remotePlayer").set("volume",t)},[ae](e,{playQueueType:t,errorMessage:r}){const n=Ae(e,t);n&&n.restoreDefaults({hasError:!0,errorMessage:r})},[oe](e,t){const r=(0,f.Z)(e),n=(0,U.js)(e,t),i=(0,U.$R)(e,t),s=e.get("remotePlayer"),a=s.get("protocol"),o=s.get("protocolCapabilities");(0,V.Z)({protocol:a,protocolCapabilities:o,providerIdentifier:(0,j.Z)(n.get("identifier"),n.get("providerIdentifier")),userFeaturesByUUID:(0,P.Z)(e)})&&r.mirrorDetails(i)},[le](e){const t=e.get("companionServer");t&&(t.get("desktop").get("players").fetch(),t.get("desktop").get("neighborhoodDevices").fetch()),e.get("user").get("desktop").get("cloudCompanions").forEach((e=>{e.get("cloudPlayers").fetch().then((()=>e.set({linkState:C.PT})),((t,{status:r})=>e.set({linkState:402===r?C.Ey:C.th})))}))},[ce](e,{playQueueType:t},r){const n=Ae(e,t);r((0,E.n5)()),n.restoreDefaults()},[de](e){const t=e.get("remotePlayer");if(!t)return;const r=e.get("ui"),n=r.get("audioVideoPlayer"),i=r.get("photoPlayer");n.get("isOpen")&&n.set({confirmRemoteToLocal:!0,controllable:null}),i.get("isOpen")&&i.set({confirmRemoteToLocal:!0,controllable:null});const s=t.get("protocol");s===M.l?(0,o.DB)("remoteCastPlayerManager").endSession():s===M.D&&(0,o.DB)("remotePlexPlayerManager").endSession(),e.unset("remotePlayer")},[ue](e,{playerType:t}){const r=e.get("ui").get(t+"Player"),n=r.get("playQueue"),i=n.get("playQueueItems"),s=n.get("playQueueSelectedItemID"),a=i.get(s).get("metadataItem");n.set("own",!0),(0,S.ZP)(n),r.set({confirmRemoteToLocal:!1,startMetadataItemEntityID:a.entityID(),startOffsetMilliseconds:1e3*r.get("positionSeconds")})},[pe](e,{playerType:t},r){(0,F.F_)(e,t).set("confirmLocalToRemote",D.m$),r((0,w.Mh)({playerType:t}))},[me](e,{playerType:t}){(0,F.F_)(e,t).set("confirmLocalToRemote",D.m$)},[he](e,{playerType:t}){const r=(0,F.F_)(e,t);(0,f.Z)(e).startPlayback(r),r.set("confirmLocalToRemote",D.YN)}}},78394:(e,t,r)=>{"use strict";r.d(t,{tL:()=>s,VL:()=>a,iq:()=>o,_Y:()=>l,d6:()=>c,Bh:()=>d,GL:()=>u,oF:()=>p,YQ:()=>m,Mj:()=>h,hr:()=>g});var n=r(15451),i=r(8543);const s=(0,n.Z)(i.KG),a=(0,n.Z)(i.Yx),o=(0,n.Z)(i.zx),l=(0,n.Z)(i.PL),c=(0,n.Z)(i.yc),d=(0,n.Z)(i.pQ),u=(0,n.Z)(i.N2),p=(0,n.Z)(i.Dn),m=(0,n.Z)(i.gS),h=(0,n.Z)(i.fu),g=(0,n.Z)(i.GN)},44006:(e,t,r)=>{"use strict";r.d(t,{P2:()=>F,wL:()=>B,tt:()=>_,t4:()=>H,$g:()=>W,Ez:()=>G,M:()=>$,x9:()=>K,GJ:()=>ee});var n=r(45191),i=r(53998),s=r(60526),a=r(22094),o=r(15451),l=r(2380),c=r(81775),d=r(49244),u=r(63295),p=r(34575),m=r(80011),h=r(43508),g=r(84503),y=r(70777),v=r(33881),f=r(56594),b=r(12559),Z=r(85209),S=r(20683),P=r(73703),I=r(27724),E=r(42575),w=Object.defineProperty,C=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const T="INIT_PRE_PLAY_PAGE",x="INIT_PRE_PLAY_DESCENDANT_LIST",A="INIT_PRE_PLAY_SIBLING_LIST",k="INIT_PRE_PLAY_AUGMENTED_HUBS",N="PRE_FETCH_PRE_PLAY_METADATA_ITEM",R="FETCH_PRE_PLAY_METADATA_ITEM",L="FETCH_PRE_PLAY_RELATED_HUBS",j="FETCH_PRE_PLAY_AUGMENTED_HUBS",V="MAKE_PRE_PLAY_VIDEO_DECISION",U="REPOPULATE_PRE_PLAY_POPULAR_TRACKS",F=(0,o.Z)(T),B=(0,o.Z)(x),_=(0,o.Z)(A),z=(0,o.Z)(k),H=(0,o.Z)(N),W=(0,o.Z)(R),G=(0,o.Z)(L),Q=(0,o.Z)(j),$=(0,o.Z)(V),K=(0,o.Z)(U);function q(e){return e.get("ui").get("prePlayPage")}function Y(e,t){const{metadataItemEntityID:r,containerKeyPattern:n}=t;if(n)return!1;const i=(0,E.SW)(e,t),s=q(e).get("metadataItem");return!(!s||s.server!==i||r&&s.entityID()!==r)}function X(e,t,r){const n=q(e),i=n.get("siblingList"),s=n.get("descendantList"),a=n.get("relatedHubs");i&&r((0,I.u6)({metadataListEntityID:i.entityID()})),s&&(n.get("metadataItem").get("type")===Z.ALBUM?r((0,I.C8)({metadataListEntityID:s.entityID()})):r((0,I.u6)({metadataListEntityID:s.entityID()}))),a&&r(G())}function J(e,t){const r=(0,E.SW)(e,t),n=q(e),i=n.get("metadataItem");if(!i||i.server!==r)return;const s=t.activity.Context;if(!s||s.key!==i.get("key"))return;if(null==s.exists&&null==s.accessible)return;const a=!s.exists||!s.accessible;n.set("isFileUnavailable",a),a&&window.setTimeout((()=>{i.set("isPreFetched",!1)}),0)}const ee=(0,l.Z)({[T](e,t){const r=q(e),n=(0,E.SW)(e,t),s=(0,E.js)(e,t),{providerEntityID:o,metadataKey:l}=t;if(o===r.get("providerEntityID")&&l===r.get("metadataKey"))return;const c=new a.Z({key:l},{server:n,provider:s}),d=S.Z.join([l.replace(/(\/library)?\/metadata/,"/hubs/metadata"),"related"]),p=(0,u.Z)(e,y.Ao),m=new i.Z([],{server:n,provider:s,metadataItem:c,hubKey:d,includeExternalMedia:p,includeExternalMetadata:!0,asyncAugmentMetadata:!0});r.restoreDefaults({providerEntityID:o,metadataKey:l,metadataItem:c,siblingKey:r.get("siblingKey"),siblingList:r.get("siblingList"),relatedHubs:m})},[x](e,t){const r=q(e),n=(0,E.SW)(e,t),i=(0,E.js)(e,t),a=(0,E.$R)(e,t),{providerEntityID:o,descendantKey:l}=t;if(!l)return void r.set({descendantKey:l,descendantList:void 0});if(o===r.get("providerEntityID")&&l===r.get("descendantKey"))return;const c=(0,u.Z)(e,y.Ao),d="album"===a.get("type")||"artist"===a.get("type")&&a.get("skipChildren"),p=new s.Z({containerKey:l},{server:n,provider:i,excludeAllLeaves:!0,includeExternalMedia:c,includeRelated:d});r.set({descendantKey:l,descendantList:p})},[A](e,t){const r=q(e),n=(0,E.SW)(e,t),i=(0,E.js)(e,t),{providerEntityID:a,siblingKey:o}=t;if(!o)return void r.set({siblingKey:o,siblingList:void 0});if(a===r.get("providerEntityID")&&o===r.get("siblingKey"))return;const l=(0,u.Z)(e,y.Ao),c=new s.Z({containerKey:o},{server:n,provider:i,excludeAllLeaves:!0,includeExternalMedia:l});r.set({siblingKey:o,siblingList:c})},[k](e,t,r){const n=q(e),s=n.get("metadataItem"),a=s.get("augmentationKey"),o=[Z.ARTIST,Z.ALBUM],l=[Z.MOVIE,Z.SHOW,Z.SEASON,Z.EPISODE],c=s.get("type");if(!o.includes(c)&&!l.includes(c)||!a)return void n.set({isAugmentedHubsPending:!1,isAugmentedHubsPopulated:!0});const d=new i.Z([],{server:s.server,provider:s.provider,hubKey:s.get("augmentationKey"),excludeFields:"",wait:1});n.set({augmentedHubs:d}),r(Q())},[N](e,t){const r=(0,E.$R)(e,t);(0,d.Z)(r,{forceFetch:!0})},[R](e,t,r){const n=q(e),i=n.get("metadataItem"),s=n.get("isMetadataItemPending");n.set("isMetadataItemPending",!0),(0,d.Z)(i,{forceFetch:!0}).done((()=>{n.set({isMetadataItemPending:!1,isMetadataItemPopulated:!0,metadataItemError:null}),r(z())})).fail(((e,t)=>{t.aborting?n.set("isMetadataItemPending",s):n.set({isMetadataItemPending:!1,metadataItemError:(0,P.Z)(t)})}))},[L]:(0,c.Z)({key:"relatedHubs",getModel:q}),[j]:(0,c.Z)({key:"augmentedHubs",getModel:q}),[V](e,t,r){const i=q(e),s=e.get("user").get("experienceSettings"),a=i.get("metadataItem"),o=(0,n.DB)("getDecisionOptions")(a),l=f.Z.getCurrentQuality(a,s,(e=>r((0,g.LN)(e)))),c=v.Z.getMediaDecision(((e,t)=>{for(var r in t||(t={}))M.call(t,r)&&O(e,r,t[r]);if(C)for(var r of C(t))D.call(t,r)&&O(e,r,t[r]);return e})({item:a,transcodeServer:a.server,quality:l},o));i.set("decisionMediaItem",c.media)},[m.WV](e,t){t.activity.type===b.Ij&&J(e,t)},[m.Cs](e,t){t.activity.type===b.Ij&&J(e,t)},[p.se](e,t,r){Y(e,t)&&X(e,0,r)},[h._z](e,t,r){const n=q(e),i=n.get("metadataItem");if(Y(e,t))i.fetch({data:{skipRefresh:1},usePopulatedParams:!0}),X(e,0,r);else{const s=(0,E.SW)(e,t),a=n.get("siblingList"),o=t.parentMetadataKey;i&&i.server===s&&a&&o&&i.get("parentKey")===o&&r((0,I.u6)({metadataListEntityID:a.entityID()}))}},[U](e,t,r){const n=q(e).get("metadataItem"),i=(0,E.tz)(e,{metadataItemEntityID:t.albumMetadataItemEntityID});n&&i&&n.get("key")===i.get("parentKey")&&r((0,p.dk)({serverEntityID:t.serverEntityID,metadataItemEntityID:n.entityID()}))}})},51315:(e,t,r)=>{"use strict";r.d(t,{a$:()=>k,zc:()=>T,yT:()=>x,Dg:()=>A,V7:()=>L,ZP:()=>K,KC:()=>F,qz:()=>j,J6:()=>N,v_:()=>R,$:()=>U,QF:()=>V});var n=r(42699),i=r(313),s=r(15451),a=r(2380),o=r(56036),l=r(12274);function c(e,t,r){if(!t)return null;const n=new Date(t);if(!(0,l.Z)(n))return-1;const i=n.getTime();let s,a=0,o=e.length-1;for(;a<=o;){s=Math.floor((a+o)/2);const t=e[s],n=e[s+1],l=new Date(t.time).getTime();if(!n)return i>l?s:s+1;if(i===l)return r<s?s:s+1;const c=new Date(n.time).getTime();if(i>l&&i<c)return s+1;i>l?a=s+1:i<l&&(o=s-1)}return Math.max(0,s)}var d=r(56514);function u(e){return(0,d.Z)(e,"MMM dd, yyyy HH:mm:ss.SSS",new Date)}var p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const b="ui/serverLogPageActions/changeTextFilter",Z="ui/serverLogPageActions/changeTimeFilter",S="ui/serverLogPageActions/clearFilter",P="ui/serverLogPageActions/addLogLine",I="ui/serverLogPageActions/resetLogLevels",E="ui/serverLogPageActions/toggleLogLevel",w="ui/serverLogPageActions/clearLog",C="ui/serverLogPageActions/loadLogfile",M="ui/serverLogPageActions/toggleTimeFilter",D="ui/serverLogPageActions/toggleRaw",O="ui/serverLogPageActions/highlightLine",T=(0,s.Z)(b),x=(0,s.Z)(Z),A=(0,s.Z)(S),k=(0,s.Z)(P),N=(0,s.Z)(I),R=(0,s.Z)(E),L=(0,s.Z)(w),j=(0,s.Z)(C),V=(0,s.Z)(M),U=(0,s.Z)(D),F=(0,s.Z)(O);function B(e,t,r){return t.all||(t.all=[]),e.index=t.all.length,H(e,{filter:r.get("filter"),timeFilterStart:r.get("timeFilterStart"),timeFilterEnd:r.get("timeFilterEnd"),logLevels:r.get("logLevels")})?t.filtered&&t.filtered.push(e):t.filtered||(t.filtered=t.all.slice(0)),t.all.push(e),t}function _(e){return e.get("ui").get("serverLogPage")}function z(e){return e.split(/\s+/).map((e=>new RegExp((0,o.Z)(e),"i")))}function H(e,t){const{filter:r,timeFilterStart:s,timeFilterStartIndex:a,timeFilterEnd:o,timeFilterEndIndex:l,logLevels:c}=t;if(c.length&&-1===c.indexOf(e.level))return!1;if(s||null!=a||o||null!=l){let t,r,c;if(null!=a&&null!=l||(t=u(e.time),null==a&&(r=s&&u(s)),null==l&&(c=o&&u(o))),null!=a&&a>e.index||null!=l&&l<e.index||r&&(0,n.Z)(r,t)||c&&(0,i.Z)(c,t))return!1}return!r||(t.regexps||z(r)).every((t=>t.test(e.message)||t.test(e.thread)))}function W(e){const t=e.get("filter"),r=e.get("timeFilterStart"),n=e.get("timeFilterEnd"),i=e.get("logLevels"),s=e._unfilteredLogLines,a=c(s,r,-1/0),o=c(s,n,1/0),l=function(e,t){const r=z(t.filter);return e.filter((e=>{return H(e,(n=((e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&f(e,r,t[r]);return e})({},t),m(n,h({regexps:r}))));var n}))}(s,{logLevels:i,filter:t,timeFilterStart:r,timeFilterStartIndex:-1===a?null:a,timeFilterEndIndex:-1===o?null:o,timeFilterEnd:n});e.set({logLines:l,unfilteredLogLinesCount:s.length,isTimeFilterStartValid:-1!==a,isTimeFilterEndValid:-1!==o})}const G=/^([^[]+)\[([^\]]+)]\s+([^\s]+)\s+-\s+(.*)/,Q={ERROR:0,WARN:1,INFO:2,DEBUG:3,VERBOSE:4};function $(e){if(!e)return null;const t=e.match(G),[,r,n,i,s]=t;return{time:r.trim(),thread:n.trim(),level:Q[i],message:s.trim()}}const K=(0,a.Z)({[P](e,t){const{message:r}=t,n=_(e);n._unfilteredLogLines||(n._unfilteredLogLines=[]);const i=n.get("logLines").length!==n._unfilteredLogLines.length,s=i?n.get("logLines"):null,a=i?s.length:null,o=B(r,{all:n._unfilteredLogLines.slice(0),filtered:s},n);o.filtered&&o.filtered.length!==a&&(o.filtered=o.filtered.slice(0)),n._unfilteredLogLines=o.all,n.set({unfilteredLogLinesCount:o.all.length,logLines:o.filtered||o.all})},[b](e,t){const r=_(e),{filter:n}=t;r.set({filter:n}),W(r)},[Z](e,t){const r=_(e),{timeFilterStart:n,timeFilterEnd:i}=t;r.set({showTimeFilter:!(!n&&!i),timeFilterStart:n,timeFilterEnd:i}),W(r)},[S](e){const t=_(e);t.set({filter:"",timeFilterStart:"",timeFilterEnd:"",logLevels:[]}),W(t)},[I](e){const t=_(e);t.set({logLevels:[]}),W(t)},[E](e,t){const r=_(e),n=r.get("logLevels"),i=n.slice(0),s=n.indexOf(t.logLevel);-1===s?i.push(t.logLevel):i.splice(s,1),r.set({logLevels:i}),W(r)},[w](e){const t=_(e);t.set({logLines:[],unfilteredLogLinesCount:0,highlightedLineIndex:null,showRawText:!1}),t._unfilteredLogLines=[]},[C](e,t){const{result:r}=t,n=_(e);let i={all:[]};n.set({logLines:[],unfilteredLogLinesCount:0});try{r.split(/\n+/).map($).forEach((e=>{e&&(i=B(e,i,n))})),n._unfilteredLogLines=i.all,n.set({unfilteredLogLinesCount:i.all.length,logLines:i.filtered||i.all})}catch(e){}},[M](e){const t=_(e),r=t.get("showTimeFilter");t.set({timeFilterStart:"",timeFilterEnd:"",showTimeFilter:!r}),W(t)},[D](e){const t=_(e);t.set("showRawText",!t.get("showRawText"))},[O](e,t){_(e).set("highlightedLineIndex",t.index)}})},88298:(e,t,r)=>{"use strict";r.d(t,{Ag:()=>q,K3:()=>Y,Es:()=>X,wV:()=>J,rV:()=>ee,b6:()=>te,av:()=>re,ly:()=>ne,vX:()=>ie,jD:()=>se,L1:()=>ae,K_:()=>le,TR:()=>me,$i:()=>he,lo:()=>ge});var n=r(19755),i=r.n(n),s=r(15451),a=r(2380),o=r(6678),l=r(67672),c=r(25523),d=r(15851),u=r(57471),p=r(35076),m=r(3615),h=r(87442),g=r(73788),y=r(20683),v=r(36675),f=r(84419),b=r(8218),Z=r(43613),S=r(76057),P=r(78851),I=r(36639),E=r(46160),w=r(77054),C=r(42575),M=r(2696),D=Object.defineProperty,O=Object.defineProperties,T=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,R=(e,t)=>{for(var r in t||(t={}))A.call(t,r)&&N(e,r,t[r]);if(x)for(var r of x(t))k.call(t,r)&&N(e,r,t[r]);return e};const L="shareModal",j="ui/shareModal/initShareModal",V="ui/shareModal/resetShareModal",U="ui/shareModal/sharePreviousStep",F="ui/shareModal/shareNextStep",B="ui/shareModal/validateUsername",_="ui/shareModal/setUsername",z="ui/shareModal/setUser",H="ui/shareModal/fetchServerOverviews",W="ui/shareModal/fetchServerShares",G="ui/shareModal/setLibraryShares",Q="ui/shareModal/fetchFilterOptionsTags",$="ui/shareModal/saveItemShare",K="ui/shareModal/saveLibraryShares",q=(0,s.Z)(j),Y=(0,s.Z)(V),X=(0,s.Z)(U),J=(0,s.Z)(F),ee=(0,s.Z)(B),te=(0,s.Z)(_),re=(0,s.Z)(z),ne=(0,s.Z)(H),ie=(0,s.Z)(W),se=(0,s.Z)(G),ae=(0,s.Z)(Q),oe=(0,s.Z)($),le=(0,s.Z)(K);function ce(e){return e.get("ui").get("shareModal")}function de(e,t){const r=e.get("servers"),{metadataItemEntityID:n,isNewFriend:i=!0,isAddingHomeUser:s,isCreatingManagedUser:a}=t,o=[];s&&o.push(b.p.WARNING),o.push(b.p.USER);const l=!!n,c=r.some((e=>e.get("isFullOwnedServer")&&e.get("isClaimed")&&e.get("friendlyName")));return!l&&c&&o.push(b.p.LIBRARIES),l||!i&&!s||o.push(b.p.RESTRICTIONS),i&&!a&&o.push(b.p.SUMMARY),o}function ue(e,t){return e.findIndex((e=>e===t))}function pe(e,t){return e[ue(e,t)-1]}function me(e,t){return e[ue(e,t)+1]}function he(e,t){const r=me(e,t);return!(!r||r===b.p.SUMMARY)}const ge=(0,a.Z)({[j](e,t){const r=ce(e),n=de(e,t);r.set({steps:n,step:n[0]})},[V](e,t={}){const r=ce(e);v.Z.abortAll(L),r.restoreDefaults(t)},[U](e,t,r){const n=ce(e),i=n.get("steps"),s=n.get("step"),a={steps:i,step:pe(i,s),username:n.get("username"),restrictionProfileIdentifier:n.get("restrictionProfileIdentifier"),isUsernameValidated:!n.get("isCreatingManagedUser")};s===b.p.RESTRICTIONS&&(a.friendEntityID=n.get("friendEntityID"),a.isNewFriend=n.get("isNewFriend"),a.isAddingHomeUser=n.get("isAddingHomeUser"),a.isCreatingManagedUser=n.get("isCreatingManagedUser"),a.selectedAllLibrariesMachineIdentifiers=n.get("selectedAllLibrariesMachineIdentifiers"),a.selectedLibrarySectionIDs=n.get("selectedLibrarySectionIDs")),r(Y(a))},[F](e){const t=ce(e),r=me(t.get("steps"),t.get("step"));r&&t.set({step:r})},[B](e,t={}){const r=ce(e),n=e.get("cloudServer"),{username:s=""}=t;if(""===s.trim())return void r.set({isUsernameValidating:!1,isUsernameValidated:!1});(0,h.c9)((()=>{r.set({isUsernameValidating:!0,isUsernameValidated:!1})}));const a=y.Z.join("/api/users/validate",{invited_email:s}),o=n.getXHROptions(a,{type:"POST",scope:L});i().ajax(o).done((()=>{r.set({isUsernameValidating:!1,isUsernameValidated:!0})})).fail((()=>{r.set({isUsernameValidating:!1})}))},[_](e,t={},r){const n=ce(e),{metadataItemEntityID:i,username:s,restrictionProfileIdentifier:a,isAddingHomeUser:o,isCreatingManagedUser:l}=t,c=e.get("user").get("allFriends");let d=c.findWhere({username:s});d||(d=c.findWhere({email:s}));const u=!!d&&!l,p=u?d.entityID():null,m=de(e,{metadataItemEntityID:i,isNewFriend:!u,isAddingHomeUser:o,isCreatingManagedUser:l});n.set({steps:m,metadataItemEntityID:i,friendEntityID:p,username:u?d.get("title"):s,restrictionProfileIdentifier:a,isNewFriend:!u,isAddingHomeUser:o,isCreatingManagedUser:l}),r(he(m,b.p.USER)?J():i?oe():le())},[z](e,t={},r){const n=ce(e),i=(0,C.KC)(e,t),{metadataItemEntityID:s,isAddingHomeUser:a}=t,o=i.entityID(),l=de(e,{metadataItemEntityID:s,isNewFriend:!1,isAddingHomeUser:a,isCreatingManagedUser:!1});n.set({steps:l,metadataItemEntityID:s,friendEntityID:o,username:i.get("title"),isNewFriend:!1,isAddingHomeUser:a}),r(s?oe():J())},[H](e,t={}){const r=ce(e),{serverEntityIDs:n}=t;(0,h.c9)((()=>{r.set({isServerOverviewsPopulating:!0,isServerOverviewsPopulated:!1})})),(0,o.Z)(n).then((e=>{r.set({isServerOverviewsPopulating:!1,isServerOverviewsPopulated:!0,serverOverviews:e})}))},[W](e,t={}){const r=ce(e),n=(0,C.KC)(e,t);v.Z.abortAll(L),n?((0,h.c9)((()=>{r.set({isServerSharesPopulating:!0,isServerSharesPopulated:!1,serverSharesError:null})})),(0,l.Z)(n,L).done((()=>{r.set({isServerSharesPopulating:!1,isServerSharesPopulated:!0})})).fail((()=>{r.set({isServerSharesPopulating:!1,serverSharesError:(0,g.Z)("Failed to load shares.")})}))):r.set("isServerSharesPopulated",!0)},[G](e,t={},r){const n=ce(e);n.set(t),r(he(n.get("steps"),b.p.LIBRARIES)?J():le())},[Q](e,t={}){const r=ce(e),{serverEntityIDs:n}=t,i=n.map((t=>(0,C.SW)(e,{serverEntityID:t})));v.Z.abortAll(L),(0,h.c9)((()=>{r.set({isFilterOptionsTagsPopulating:!0,isFilterOptionsTagsPopulated:!1})})),(0,I.Z)(i,L).done((e=>{r.set({isFilterOptionsTagsPopulating:!1,isFilterOptionsTagsPopulated:!0,filterOptionsTags:e})}))},[$](e,t,r){const n=ce(e),s=n.get("metadataItemEntityID"),a=n.get("friendEntityID"),o=n.get("username"),l=n.get("isNewFriend"),c=e.get("cloudServer");(0,h.c9)((()=>{n.set({isSharingPending:!0,isSharingCompleted:!1,sharingError:null,inviteTokenError:null})}));const d=(0,C.$R)(e,{metadataItemEntityID:s}),u=(0,p.Z)({serverIdentifier:d.server.get("machineIdentifier"),key:d.get("key")}),m=(0,M.Z)({type:d.get("type"),title:d.get("title"),parentTitle:d.get("parentTitle"),grandparentTitle:d.get("grandparentTitle"),index:d.get("index"),parentIndex:d.get("parentIndex"),originallyAvailableAt:d.get("originallyAvailableAt")},f.U),y={items:[{uri:u,type:d.get("type"),title:m}]};if(a){const t=(0,C.KC)(e,{friendEntityID:a});y.invitedId=t.id}else y.invitedEmail=o;const v=c.getXHROptions("/api/v2/shared_items",{type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(y),scope:L});i().ajax(v).then((t=>{l?function(e,t){const r=`/api/v2/shared_sources/${t}`,n=e.get("cloudServer").getXHROptions(r,{type:"GET",dataType:"json",scope:L});return i().ajax(n).then((e=>e.inviteToken),(e=>{const t=e&&e.status?e.responseJSON.errors:null,r=t?t[0].message:(0,g.Z)("Unknown error");return(0,g.Z)("Failed to get invite link: {errorMessage}",{errorMessage:r})}))}(e,t[0].sharedSourceId).done((e=>{n.set({inviteToken:e,isSharingPending:!1,isSharingCompleted:!0})})).fail((e=>{n.set({inviteTokenError:e,isSharingPending:!1,isSharingCompleted:!0})})).always((()=>{r(J())})):n.set({isSharingPending:!1,isSharingCompleted:!0})}),(e=>{const t=e&&e.status?e.responseJSON.errors:null,r=t?t[0].message:null;n.set({isSharingPending:!1,sharingError:r||(0,g.Z)("Failed to share item")})}))},[K](e,t={},r){const{addToHome:n,restrictions:s={}}=t,a=ce(e),o=a.get("friendEntityID"),l=a.get("username"),p=a.get("restrictionProfileIdentifier"),y=a.get("isNewFriend"),v=a.get("isAddingHomeUser"),f=a.get("isCreatingManagedUser"),b=a.get("serverOverviews"),I=a.get("selectedAllLibrariesMachineIdentifiers")||[],M=a.get("selectedLibrarySectionIDs")||[],D=e.get("user");(0,h.c9)((()=>{a.set({isSharingPending:!0,isSharingCompleted:!1,sharingError:null})}));const x=[],A=o?(0,C.KC)(e,{friendEntityID:o}):new Z.Z({username:l},{server:D.server}),k=(0,E.Z)(s);y&&A.set(k);const N=A.get("serverShares").where({owned:!0}),L=function(e=[]){return e.reduce(((e,t)=>(t.get("sections").forEach((r=>{e[r.get("id")]=t.get("machineIdentifier")})),e)),{})}(b),j=N.map((e=>e.get("machineIdentifier"))),V=Array.from(new Set(M.map((e=>L[e])))),U=Array.from(new Set([...j,...V,...I])),F=v||n&&!A.get("home")||f;let B;if(F){const e=(_=R({},k),O(_,T({username:l,restricted:f})));p&&p!==d.Pq&&(e.restrictionProfile=p),B=new S.Z(e,{server:D.server}).save(),f&&(B=B.then((e=>{A.set("id",parseInt(m.Z.parseXML(e).id,10))})))}else{const e=0===U.length;B=y&&e?A.save(R({user:l},k)):i().Deferred().resolve().promise()}var _;B.done((()=>{U.forEach((e=>{const t=b.get(e);if(!t)return;const r=N.find((t=>t.get("machineIdentifier")===e)),n=I.indexOf(e)>-1,i=!r,s=!n&&!V.find((t=>t===e)),a=function(e,t){const r=e.get("sections");return t.filter((e=>r.get(e)))}(t,M),o=n?[]:a;if(i){const t=new P.Z({machineIdentifier:e}),r=(0,c.Z)({user:D,friend:A,serverShare:t,librarySectionIDs:o,isNewFriend:y,isCreatingManagedUser:f,isNewServerShare:!0});x.push(r)}else if(s)x.push(r.destroy({wait:!0}));else{const e=(0,c.Z)({user:D,friend:A,serverShare:r,librarySectionIDs:o,isNewFriend:y,isCreatingManagedUser:f,isNewServerShare:!1});x.push(e)}})),i().when(...x).done(((...e)=>{const t={isSharingPending:!1,isSharingCompleted:!0};if(U.length>0&&y&&!f){const r=(x.length>1?e[e.length-1]:e)[0];t.inviteToken=r.inviteToken}a.set(t),f&&D.set("home",!0),r(J())})).fail(((...e)=>{let t;for(const r of e){const e=(0,u.Z)(r,null,"status");if(e){t=e;break}}t||(t=f?(0,g.Z)("Failed to create home user."):y?(0,g.Z)("Failed to send invite."):(0,g.Z)("Failed to update server shares.")),a.set({isSharingPending:!1,sharingError:t})})).always((()=>{r((0,w.Tp)()),r((0,w.bc)()),F&&(D.get("homeUsers").fetch(),r((0,w.RY)()),r((0,w.Tz)()))}))})).fail((e=>{const t=(0,u.Z)(e,null,"status")||(0,g.Z)("Failed to create home user.");a.set({isSharingPending:!1,sharingError:t})}))}})},75396:(e,t,r)=>{"use strict";r.d(t,{GO:()=>y,mt:()=>v,lW:()=>b});var n=r(19755),i=r.n(n),s=r(15451),a=r(2380),o=r(35311),l=r(57471),c=r(76389),d=r(87442),u=r(73788),p=r(20683);const m=["aqt","ass","idx","jss","psb","rt","smi","srt","ssa","sub","txt","utf","utf-8","utf8","vtt"],h="ui/subtitlesUploadModal/resetUploadSubtitles",g="ui/subtitlesUploadModal/uploadSubtitles",y=(0,s.Z)(h),v=(0,s.Z)(g);function f(e){return e.get("ui").get("subtitlesUploadModal")}const b=(0,a.Z)({[h](e){f(e).restoreDefaults()},[g](e,t,r){const{file:n}=t,s=(0,c.$R)(e,t),a=f(e),h=n.name,g=function(e){const t=e.lastIndexOf(".");return t>=0?e.substring(t+1):null}(h);if(!m.includes(g))return void a.set({error:(0,u.Z)("Unsupported subtitle file format")});if(n.size>1048576)return void a.set({error:(0,u.Z)("Subtitle file exceeds 1MB size limit")});(0,d.c9)((()=>{a.set({isUploading:!0,isUploaded:!1,error:null})}));const y=new window.FileReader;y.onload=t=>{if(t.target.error)return void a.set({isUploading:!1,isUploaded:!1,error:(0,u.Z)("Unable to upload subtitle file")});const r=t.target.result,n=p.Z.join([s.get("key"),"subtitles"],{title:h,format:g}),c=s.server.getXHROptions(n,{method:"POST",processData:!1,contentType:!1,data:r});i().ajax(c).then((()=>{a.set({isUploading:!1,isUploaded:!0,error:null});const t=e.get("ui").get("audioVideoPlayer");s.fetch({data:{skipRefresh:1},usePopulatedParams:!0}),t.get("isOpen")&&(0,o.Z)(e).refreshRemoteStreams(t)}),(e=>{a.set({isUploading:!1,isUploaded:!1,error:(0,l.Z)(e,(0,u.Z)("Unable to upload subtitle file"))})}))},y.readAsText(n)}})},69752:(e,t,r)=>{"use strict";r.d(t,{h8:()=>s,qd:()=>a,de:()=>o,Ql:()=>l});var n=r(15451),i=r(8543);const s=(0,n.Z)(i.Mv),a=(0,n.Z)(i.TA),o=(0,n.Z)(i.cW),l=(0,n.Z)(i.PG)},86457:(e,t,r)=>{"use strict";r.d(t,{OY:()=>K,L1:()=>q,VH:()=>Y,l8:()=>X,lu:()=>J,yL:()=>ee,gh:()=>te,Yy:()=>re,ly:()=>ne,vX:()=>ie,K_:()=>se,bw:()=>ae,hl:()=>oe,yr:()=>le,zg:()=>ce,Ye:()=>pe});var n=r(19755),i=r.n(n),s=r(22094),a=r(15451),o=r(2380),l=r(6678),c=r(67672),d=r(25523),u=r(43508),p=r(15851),m=r(57471),h=r(8089),g=r(87442),y=r(73788),v=r(20683),f=r(36675),b=r(76057),Z=r(78851),S=r(36639),P=r(46160),I=r(5746),E=r(77054),w=r(42575),C=Object.defineProperty,M=Object.defineProperties,D=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const k="userSharingSettingsPage",N="ui/userSharingSettingsPage/resetUserSharingSettingsPage",R="ui/userSharingSettingsPage/fetchFilterOptionsTags",L="ui/userSharingSettingsPage/setFriendRestrictions",j="ui/userSharingSettingsPage/updateManagedUserProfile",V="ui/userSharingSettingsPage/dismissFriendError",U="ui/userSharingSettingsPage/fetchSharedSources",F="ui/userSharingSettingsPage/populateSharedItem",B="ui/userSharingSettingsPage/deleteSharedItem",_="ui/userSharingSettingsPage/fetchServerOverviews",z="ui/userSharingSettingsPage/fetchServerShares",H="ui/userSharingSettingsPage/saveLibraryShares",W="ui/userSharingSettingsPage/dismissSharingError",G="ui/userSharingSettingsPage/removeServerShare",Q="ui/userSharingSettingsPage/dismissRemoveServerShareError",$="ui/userSharingSettingsPage/addToHome",K=(0,a.Z)(N),q=(0,a.Z)(R),Y=(0,a.Z)(L),X=(0,a.Z)(j),J=(0,a.Z)(V),ee=(0,a.Z)(U),te=(0,a.Z)(F),re=(0,a.Z)(B),ne=(0,a.Z)(_),ie=(0,a.Z)(z),se=(0,a.Z)(H),ae=(0,a.Z)(W),oe=(0,a.Z)(G),le=(0,a.Z)(Q),ce=(0,a.Z)($);function de(e){return e.get("ui").get("userSharingSettingsPage")}function ue(e,t,r){return e.map((e=>{if(e.origin!==t)return e;const n=e.sharedItems.filter((e=>e.id!==r));return i=((e,t)=>{for(var r in t||(t={}))T.call(t,r)&&A(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&A(e,r,t[r]);return e})({},e),M(i,D({sharedItems:n}));var i}))}const pe=(0,o.Z)({[N](e){const t=de(e);f.Z.abortAll(k),t.restoreDefaults()},[R](e,t={}){const r=de(e),{serverEntityIDs:n}=t,i=n.map((t=>(0,w.SW)(e,{serverEntityID:t})));f.Z.abortAll(k),(0,g.c9)((()=>{r.set({isFilterOptionsTagsPopulating:!0,isFilterOptionsTagsPopulated:!1})})),(0,S.Z)(i,k).done((e=>{r.set({filterOptionsTags:e,isFilterOptionsTagsPopulating:!1,isFilterOptionsTagsPopulated:!0})}))},[L](e,t,r){const n=de(e),s=e.get("cloudServer"),{friendEntityID:a,restrictions:o}=t,{restrictionProfileIdentifier:l}=o,c=(0,w.KC)(e,{friendEntityID:a}),d=(0,w.bg)(e);let u;if((0,g.c9)((()=>{n.set({isUpdatingFriend:!0,updateFriendError:null})})),l){const e={userId:c.id};l!==p.Pq&&(e.restrictionProfile=l);const t=s.getXHROptions("/api/v2/home/users/restricted/profile",{type:"POST",contentType:"application/json",data:JSON.stringify(e),scope:k});u=i().ajax(t).then((()=>{const e=d.get("homeUsers").find((e=>e.id===c.id)),t=l===p.Pq?"":l;return c.fetch().then((()=>{e.set("restrictionProfile",t)}))}))}else{const e=(0,P.Z)(o);u=c.save(e)}u.then((()=>{n.set({isUpdatingFriend:!1})}),(()=>{n.set({isUpdatingFriend:!1,updateFriendError:(0,y.Z)("Failed to update")})}))},[j](e,t,r){const n=de(e),s=e.get("cloudServer"),a=e.get("user").get("homeUsers"),{friendEntityID:o,username:l,avatar:c}=t,d=(0,w.KC)(e,{friendEntityID:o});let u;if((0,g.c9)((()=>{n.set({isUpdatingFriend:!0,updateFriendError:null})})),l){if(l.trim()===d.get("title"))return void n.set({isUpdatingFriend:!1});if(a.findWhere({title:l.trim()}))return void n.set({isUpdatingFriend:!1,updateFriendError:(0,y.Z)("A Home user already exists with this name")});const e={friendlyName:l.trim()},t=s.getXHROptions(`/api/v2/home/users/restricted/${d.id}`,{type:"POST",contentType:"application/json",data:JSON.stringify(e),scope:k});u=i().ajax(t)}else c&&(u=(0,I.Z)(c,d.id));u.then((()=>{n.set({isUpdatingFriend:!1}),a.fetch(),r((0,E.RY)()),r((0,E.Tp)())}),(()=>{n.set({isUpdatingFriend:!1,updateFriendError:(0,y.Z)("Failed to update")})}))},[V](e,t,r){de(e).set({updateFriendError:null})},[U](e,t,r){const n=de(e),s=e.get("cloudServer");(0,g.c9)((()=>{n.set({isSharedSourcesPopulating:!0,isSharedSourcesPopulated:!1,sharedSourcesError:null})}));const a=v.Z.join("/api/v2/shared_sources/owned",{invitedId:t.userID,includeItems:!0}),o=v.Z.join("/api/v2/shared_sources/received",{ownerId:t.userID,includeItems:!0}),l=s.getXHROptions(a,{type:"GET",dataType:"json",scope:k}),c=s.getXHROptions(o,{type:"GET",dataType:"json",scope:k});i().when(i().ajax(l),i().ajax(c)).then(((e,t)=>{n.set({ownedSharedSources:e[0],receivedSharedSources:t[0],isSharedSourcesPopulating:!1,isSharedSourcesPopulated:!0})}),(()=>{n.set({isSharedSourcesPopulating:!1,sharedSourcesError:(0,y.Z)("Failed to fetch shared items.")})}))},[F](e,t,r){const{serverIdentifier:n,providerIdentifier:i,key:a}=(0,h.Z)(t.uri),o=e.get("servers").get(n),l=o&&o.get("providers").get(i);l&&l.get("isPopulated")&&new s.Z({key:a},{server:o,provider:l}).populate()},[B](e,t,r){const n=de(e),s=e.get("cloudServer"),{id:a,origin:o,isOwnedItem:l}=t;n.set("deleteSharedItemID",a);const c=s.getXHROptions(`/api/v2/shared_items/${a}`,{method:"DELETE",dataType:"json",scope:k});i().ajax(c).then((()=>{const e={deleteSharedItemID:null};if(l){const t=ue(n.get("ownedSharedSources"),o,a);e.ownedSharedSources=t}else{const t=ue(n.get("receivedSharedSources"),o,a);e.receivedSharedSources=t}n.set(e)}),(()=>{r((0,u.wp)({type:"error",message:(0,y.Z)("There was a problem removing this shared item.")})),n.set("deleteSharedItemID",null)}))},[_](e,t={}){const r=de(e),{serverEntityIDs:n}=t;(0,g.c9)((()=>{r.set({isServerOverviewsPopulating:!0,isServerOverviewsPopulated:!1})})),(0,l.Z)(n).then((e=>{r.set({isServerOverviewsPopulating:!1,isServerOverviewsPopulated:!0,serverOverviews:e})}))},[z](e,t={}){const r=de(e),n=(0,w.KC)(e,t);f.Z.abortAll(k),(0,g.c9)((()=>{r.set({isServerSharesPopulating:!0,isServerSharesPopulated:!1,serverSharesError:null})})),(0,c.Z)(n,k).done((()=>{r.set({isServerSharesPopulating:!1,isServerSharesPopulated:!0})})).fail((()=>{r.set({isServerSharesPopulating:!1,serverSharesError:(0,y.Z)("Failed to load shares.")})}))},[H](e,t={},r){const n=de(e),i=e.get("user");(0,g.c9)((()=>{n.set({isSharingPending:!0,isSharingCompleted:!1,sharingError:null})}));const{friendEntityID:s,machineIdentifier:a,selectedLibrarySectionIDs:o,isAllLibrariesSelected:l}=t,u=(0,w.KC)(e,{friendEntityID:s}),p=u.get("serverShares"),h=p.findWhere({machineIdentifier:a}),v=!h,f=!l&&0===o.length,b=l?[]:o;let S;if(v){const e=new Z.Z({machineIdentifier:a});S=(0,d.Z)({user:i,friend:u,serverShare:e,librarySectionIDs:b,isNewFriend:!1,isNewServerShare:!0})}else S=f?h.destroy({wait:!0}):(0,d.Z)({user:i,friend:u,serverShare:h,librarySectionIDs:b,isNewFriend:!1,isNewServerShare:!1});S.done((e=>{v&&p.add(new Z.Z(e,{server:i.server,parse:!0})),n.set({isSharingPending:!1,isSharingCompleted:!0})})).fail((e=>{n.set({isSharingPending:!1,sharingError:(0,m.Z)(e,null,"status")||(0,y.Z)("Failed to update server shares.")})})).always((()=>{(0,c.Z)(u,k)}))},[W](e,t,r){de(e).set({sharingError:null})},[G](e,t,r){const n=de(e);(0,g.c9)((()=>{n.set({isRemoveServerSharePending:!0,isRemoveServerShareCompleted:!1,removeServerShareError:null})}));const{friendEntityID:i,machineIdentifier:s}=t,a=(0,w.KC)(e,{friendEntityID:i});a.get("serverShares").findWhere({machineIdentifier:s}).destroy({wait:!0}).done((()=>{n.set({isRemoveServerSharePending:!1,isRemoveServerShareCompleted:!0})})).fail((e=>{n.set({isRemoveServerSharePending:!1,removeServerShareError:(0,m.Z)(e,null,"status")||(0,y.Z)("Failed to remove server share.")})})).always((()=>{(0,c.Z)(a,k)}))},[Q](e,t,r){de(e).set({removeServerShareError:null})},[$](e,t,r){const n=de(e),i=e.get("user"),s=(0,w.KC)(e,t);(0,g.c9)((()=>{n.set({isUpdatingFriend:!0,updateFriendError:null})})),new b.Z({username:s.get("username")},{server:i.server}).save().done((()=>{n.set({isUpdatingFriend:!1}),r((0,E.RY)()),r((0,E.bc)()),r((0,E.Tz)())})).fail((e=>{n.set({isUpdatingFriend:!1,updateFriendError:(0,m.Z)(e,(0,y.Z)("Failed to add to Plex Home"),"status")})}))}})},92413:(e,t,r)=>{"use strict";r.d(t,{gK:()=>E,W$:()=>Z,fJ:()=>f,Ty:()=>v,tD:()=>b,WW:()=>P,FN:()=>S});var n=r(19755),i=r.n(n),s=r(15451),a=r(87442),o=r(73788),l=r(19280);const c=function(e,t){const r=e.get("cloudServer");return i().ajax(r.getXHROptions(`/api/v2/pins/${t}`,{dataType:"json"})).promise().then((e=>e))};var d=r(6633);const u="user/authCodeExchange/readStoredPIN",p="user/authCodeExchange/preloadPIN",m="user/authCodeExchange/resetAuthCodeExchange",h="user/authCodeExchange/beginPolling",g="user/authCodeExchange/stopPolling",y="user/authCodeExchange/skipSignIn",v=(0,s.Z)(u),f=(0,s.Z)(p),b=(0,s.Z)(m),Z=(0,s.Z)(h),S=(0,s.Z)(g),P=(0,s.Z)(y);function I(e,t){const r=(0,l.Z)(e);return r.set({isBusy:!0}),(0,d.Z)(e).then((({id:e,code:n,expiresIn:i})=>{const s=window.setTimeout((()=>{t(S())}),1e3*i);r.set({code:n,pinID:e,pinTimeout:s,isBusy:!1})})).fail((()=>{r.set({fatalErrorMessage:(0,o.Z)("An error occurred"),isBusy:!1})}))}const E={[m](e,t,r){const n=(0,l.Z)(e);(0,a.c9)((()=>{n.set({code:null,pinID:null,authToken:null,errorMessage:null})}))},[u](e,t,r){const n=(0,l.Z)(e),s=n.get("pinIDInitial"),a=(s?i().Deferred().resolve(s).promise():i().Deferred().reject().promise()).then((()=>c(e,s).fail((()=>{n.set({errorMessage:(0,o.Z)("There was an error signing in")})})))).then((({authToken:e})=>e?i().Deferred().resolve(e).promise():(n.set({errorMessage:(0,o.Z)("There was an error signing in")}),i().Deferred().reject().promise()))).then((e=>{n.set({authToken:e})}));t.shouldCreatePIN&&a.fail((()=>I(e,r)))},[p](e,t,r){(0,l.Z)(e).set({isBusy:!0,code:null,pinID:null}),I(e,r)},[h]:function(e,t,r){const{pinID:n}=t,i=(0,l.Z)(e);function s(){const t=i.get("pinID");n===t&&c(e,n).then((({authToken:e})=>{e?i.set({authToken:e}):a()})).fail((e=>{i.set({code:null,pinID:null,isBusy:!1,fatalErrorMessage:e&&404===e.status?null:(0,o.Z)("An error occurred")})}))}function a(){window.setTimeout(s,2e3)}a()},[g](e,t,r){const n=(0,l.Z)(e),i=n.get("pinTimeout");i&&window.clearTimeout(i),n.set({pinID:null,pinTimeout:null,code:null})},[y](e,t,r){e.set({skipSignIn:!0})}}},60239:(e,t,r)=>{"use strict";r.d(t,{I3:()=>h,vG:()=>g});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(3578),l=r(41444),c=r(15451),d=r(3838),u=r(9841),p=r(8523);const m="user/signIn/signInWithAuthToken",h=(0,c.Z)(m),g={[m](e,t,r){const{authToken:n,onSignInSuccess:s}=t,c=e.get("user");c.get("isSignedIn")&&c.get("authToken")!==n?l.Z.execute("resetUser").then((()=>o.Z.set("myPlexAccessToken",n))).then((()=>window.location.reload())):function(e,{authToken:t,onSignInSuccess:r}){const n=e.get("cloudServer"),s=e.get("user");i().ajax(n.getXHROptions(a().result(s,"url"),{headers:{"X-Plex-Token":t}})).then((e=>s.signIn(e))).then((()=>{r&&r()})).fail((e=>{const t=(0,d.Z)(e);p.Z.trigger("show:alert",{message:(0,u.Z)(t)})}))}(e,{authToken:n,onSignInSuccess:s})}}},77054:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>vt,U_:()=>it,Bt:()=>bt,p7:()=>Ke,Mi:()=>rt,K2:()=>at,Nt:()=>ht,G_:()=>ct,Tp:()=>qe,Dl:()=>dt,RY:()=>Ye,xP:()=>gt,L_:()=>Nt,ZQ:()=>et,bc:()=>yt,BT:()=>kt,HL:()=>nt,Gs:()=>Pt,W1:()=>St,Bl:()=>Je,Dg:()=>Xe,jT:()=>ft,tJ:()=>pt,EN:()=>ut,dL:()=>ot,fK:()=>wt,EL:()=>st,Y2:()=>At,Dy:()=>Ot,zi:()=>Dt,JY:()=>xt,ay:()=>Tt,E8:()=>Et,Tz:()=>Zt,mo:()=>lt,Xe:()=>Mt,Z$:()=>Ct,yA:()=>mt,Dm:()=>It,Nq:()=>tt,Kq:()=>Ut});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(45191),l=r(8238),c=r(10033),d=r(15451),u=r(81775),p=r(48209),m=r(84503),h=r(6545),g=r(43508),y=r(75404),v=r(17197),f=r(62291),b=r(74226),Z=r(77349);const S=[7,30,60,90];function P(e=0){return(0,Z.Z)(Date.now(),S[e]||180)}var I=r(8523),E=r(57471),w=r(86832);function C(e){return e.isCloud?"online":e.isFullOwnedServer?"owned":"shared"}function M(e){return e.isConnected?"online":"offline"}var D=r(52202);var O=r(3615),T=r(25755),x=r(3637),A=r(76389),k=r(87442),N=r(73788),R=r(20683),L=r(44999),j=r(55850),V=r(5746),U=r(80129),F=r.n(U),B=r(49178);const _=function(e,t){const r=e.server.getXHROptions(a().result(e,"url"),{method:"POST",dataType:"json",data:F().stringify({urls:t},{arrayFormat:"brackets"})||"urls="});return(0,B.Z)(i().ajax(r),400).then((t=>{e.reset(t)}),(e=>i().Deferred().reject(e.status&&e.responseJSON.errors||[]).promise()))};var z=r(42575),H=r(90696),W=r(8718),G=r(96913),Q=Object.defineProperty,$=Object.defineProperties,K=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,J=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ee=(e,t)=>{for(var r in t||(t={}))Y.call(t,r)&&J(e,r,t[r]);if(q)for(var r of q(t))X.call(t,r)&&J(e,r,t[r]);return e},te=(e,t)=>$(e,K(t));const re="user/changePreferredServer",ne="user/fetchAllFriends",ie="user/populateAllFriends",se="user/fetchHomeUsers",ae="user/populateHomeUsers",oe="user/fetchPlans",le="user/populatePlans",ce="user/updateUser",de="user/clearUpdateUserError",ue="user/fetchWebhooks",pe="user/addWebhook",me="user/replaceWebhook",he="user/clearUpdateWebhookError",ge="user/removeWebhook",ye="user/startFirstRunExperience",ve="user/endFirstRunExperience",fe="user/fetchHomeDetails",be="user/removeHomeUser",Ze="user/removeFriend",Se="user/toggleGuestUser",Pe="user/editHomeUserPIN",Ie="user/fetchInvites",Ee="user/fetchSentInvites",we="user/acceptInvite",Ce="user/rejectInvite",Me="user/cancelInvite",De="user/showNewHomeWarnings",Oe="user/pinSources",Te="user/pinDiscoverSources",xe="user/unpinSources",Ae="user/setupSources",ke="user/reorderPinnedSources",Ne="user/updatePinnedSources",Re="user/dismissUpsellModal",Le="user/dismissWhatsNewFeature",je="user/saveSetting",Ve="user/syncSettings",Ue="user/syncExperienceSettings",Fe="user/restoreDefaultExperienceSettings",Be="user/restoreCustomizationSettings",_e="user/setTwoFactorEnabled",ze="user/setReminder",He="user/removeReminder",We="user/resetReminders",Ge="user/fetch",Qe="user/fetchOptOuts",$e="user/populateOptOuts",Ke=(0,d.Z)(re),qe=(0,d.Z)(ne),Ye=(0,d.Z)(se),Xe=(0,d.Z)(ae),Je=(0,d.Z)(ie),et=(0,d.Z)(oe),tt=((0,d.Z)(le),(0,d.Z)(ce)),rt=(0,d.Z)(de),nt=(0,d.Z)(ue),it=(0,d.Z)(pe),st=(0,d.Z)(me),at=(0,d.Z)(he),ot=(0,d.Z)(ge),lt=(0,d.Z)(ye),ct=(0,d.Z)(ve),dt=(0,d.Z)(fe),ut=(0,d.Z)(be),pt=(0,d.Z)(Ze),mt=(0,d.Z)(Se),ht=(0,d.Z)(Pe),gt=(0,d.Z)(Ie),yt=(0,d.Z)(Ee),vt=(0,d.Z)(we),ft=(0,d.Z)(Ce),bt=(0,d.Z)(Me),Zt=(0,d.Z)(De),St=(0,d.Z)(Oe),Pt=(0,d.Z)(Te),It=(0,d.Z)(xe),Et=(0,d.Z)(Ae),wt=(0,d.Z)(ke),Ct=((0,d.Z)(Ne),(0,d.Z)(Re),(0,d.Z)(Le),(0,d.Z)(je),(0,d.Z)(Ve)),Mt=(0,d.Z)(Ue),Dt=(0,d.Z)(Fe),Ot=(0,d.Z)(Be),Tt=(0,d.Z)(_e),xt=(0,d.Z)(ze),At=((0,d.Z)(He),(0,d.Z)(We)),kt=(0,d.Z)(Ge),Nt=(0,d.Z)(Qe);function Rt(e,t){if(!e.get("isSignedIn")||!l.Z.allowSyncSettings)return i().Deferred().resolve().promise();const r=Array.isArray(t)?t:[t],n=R.Z.join("/api/v2/user/settings",{sharedSettings:(0,L.Z)(e)?1:0}),s=e.server.getXHROptions(n,{type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({value:JSON.stringify(r)})});return i().ajax(s).promise()}function Lt(e,t){if(!e)return null;const r=e.find((e=>e.id===t));return r&&r.updatedAt}function jt(e){return e.get("user")}function Vt(e){return e.get("user").get("experienceSettings").get("sidebarSettings")}(0,d.Z)($e);const Ut={[m.gk]:m.Kq[m.gk],[m.FC]:m.Kq[m.FC],[m.xZ]:m.Kq[m.xZ],[m.tB]:m.Kq[m.tB],[m.Dz]:m.Kq[m.Dz],[m.PF]:m.Kq[m.PF],[m.k_](e){(0,k.c9)((()=>{e.get("user").set("lockState",H.Ik.Locked)}))},[re](e,t,r){const{machineIdentifier:n}=t;(function(e){return e.get("user").get("experienceSettings").get("homeSettings")})(e).set("preferredServerID",n),function(e,t){const r=e.get("user").get("experienceSettings").get("homeSettings");r.set("settingsKey",(0,h.Z)()),t((0,m.LN)({homeSettings:r}))}(e,r)},[ne]:(0,u.Z)({key:"allFriends",getModel:jt}),[ie]:(0,p.Z)({key:"allFriends",fetchActionCreator:qe,getModel:jt}),[se]:(0,u.Z)({key:"homeUsers",getModel:A.bg}),[ae]:(0,u.Z)({key:"homeUsers",fetchActionCreator:Ye,getModel:A.bg}),[oe]:(0,u.Z)({key:"plans",getModel:A.bg}),[le]:(0,p.Z)({key:"plans",fetchActionCreator:et,getModel:A.bg}),[de](e){(0,A.bg)(e).set("updateUserError",null)},[ce](e,t,r){const n=(0,A.bg)(e),s=e.get("user"),o=t,{avatar:l}=o,c=((e,t)=>{var r={};for(var n in e)Y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&q)for(var n of q(e))t.indexOf(n)<0&&X.call(e,n)&&(r[n]=e[n]);return r})(o,["avatar"]);let d;if(n.set({isUpdatingUser:!0,updateUserError:null}),l)d=(0,V.Z)(l);else{const e=new window.FormData;a().each(c,((t,r)=>{e.append(r,t)}));const t=a().result(s,"url"),r=null!=c.experimentalFeatures?R.Z.join([t,"settings","experimental_features"],{opt_in:c.experimentalFeatures}):t,n=s.server.getXHROptions(r,{type:"PUT",processData:!1,contentType:!1,data:null!=c.experimentalFeatures?void 0:e});d=i().ajax(n)}d.done((e=>{!t.avatar&&s.get("hasPassword")||s.fetch();const r=a().reduce(t,((e,t,r)=>(s.hasAttr(r)&&(e[r]=t),e)),{});s.set(r),n.set({isUpdatingUser:!1,updateUserError:null})})).fail((e=>{const t=O.Z.parseXML(e.responseText),r=Array.isArray(t)&&t||(Array.isArray(t.error)?t.error:[t.error]),i=a().mapObject(a().groupBy(r,(e=>e&&e.field?e.field:"request")),((e,t)=>a().flatten(e)));n.set({isUpdatingUser:!1,updateUserError:i})}))},[ue]:(0,u.Z)({key:"webhooks",getModel:A.bg}),[pe](e){const t=(0,A.bg)(e);t.get("webhooks").add({}),t.set("updateWebhooksError",null)},[me](e,{oldUrl:t,newUrl:r}){const n=(0,A.bg)(e),i=n.get("webhooks");if(i.findWhere({url:t})){const e=i.map((e=>{const n=e.get("url");return n===t?r:n}));n.set({isUpdatingWebhooks:!0,updateWebhooksError:null}),_(i,e).always((()=>{n.set("isUpdatingWebhooks",!1)})).fail((e=>{n.set("updateWebhooksError",e[0])}))}},[he](e){(0,A.bg)(e).set("updateWebhooksError",null)},[ge](e,t){const r=(0,A.bg)(e),n=r.get("webhooks");if(!t){const e=n.filter((e=>e.get("url")!==t));return void n.reset(e)}r.set({isRemovingWebhooks:!0,updateWebhooksError:null});const i=n.map((e=>e.get("url"))).filter((e=>e!==t));_(n,i).always((()=>{r.set("isRemovingWebhooks",!1)})).fail((e=>{r.set("updateWebhooksError",e[0])}))},[ye](e,t={},r){window.setTimeout((()=>{r((0,c.c4)({replace:!0,pathname:"/client-setup"}))}),0)},[ve](e,t){const{preferredServerEntityID:r}=t;if(r){!function(e,t=!0){(0,o.DB)("metrics").trackEvent({event:v.Ip,interaction:t,properties:{page:f.mU,action:y.ic,serverType:(0,D.Z)(e),status:M(e),firstRun:!0}})}((0,A.SW)(e,{serverEntityID:r}).toJSON(),t.preferredServerInteraction)}window.setTimeout((()=>{(0,W.Z)("home",{},!0)}),0)},[fe](e){const t=(0,A.bg)(e),r=t.get("homeDetails");t.set("isHomeDetailsPending",!0),r.fetch().then((()=>{t.set({isHomeDetailsPending:!1,isHomeDetailsPopulated:!0,homeDetailsError:null})}),((e,r)=>{const n={isHomeDetailsPending:!1};404===r.status?(n.isHomeDetailsPopulated=!0,n.homeDetailsError=null):(n.isHomeDetailsPopulated=!1,n.homeDetailsError=r),t.set(n)}))},[be](e,t,r){const n=e.get("user"),s=(0,A.bg)(e),a=s.get("homeUsers"),o=n.get("homeUsers"),l=n.get("allFriends"),c=(0,z.dH)(e,t),d=n.id===c.id;(0,k.c9)((()=>{c.set("isRemoving",!0)}));const u=c.server.getXHROptions(c.url(),{type:"DELETE"});i().ajax(u).then((()=>{const e=l.get(c.id);e?(c.get("restricted")?l.remove(e):e.set("home",!1),a.remove(c)):(a.reset([c]),c.set("admin",!0),l.each((e=>{e.set("home",!1)})));const t=!!n.get("pin")||a.length>1;if(n.set("home",t),!t){const e=s.get("homeDetails"),t=n.get("homeDetails");e.restoreDefaults(),t.restoreDefaults()}o.fetch(),c.set("isRemoving",!1)}),(()=>{r((0,g.wp)({type:"error",message:d?(0,N.Z)("There was a problem leaving this home."):(0,N.Z)("There was a problem removing this user.")})),c.set({isRemoving:!1})}))},[Ze](e,t,r){const n=e.get("user"),s=(0,A.bg)(e),a=s.get("homeUsers"),o=n.get("allFriends"),l=n.get("homeUsers"),c=(0,z.KC)(e,t);(0,k.c9)((()=>{c.set("isRemoving",!0)}));const d=R.Z.join(["/api/v2/friends",c.id]),u=c.server.getXHROptions(d,{type:"DELETE"});i().ajax(u).then((()=>{const e=c.get("home");s.get("invites").fetch(),s.get("sentInvites").fetch(),e&&(a.fetch(),l.fetch()),c.get("serverShares").some((e=>!e.owned))&&I.Z.trigger("discover:servers"),c.set({isRemoving:!1}),o.remove(c)}),(()=>{r((0,g.wp)({type:"error",message:(0,N.Z)("There was a problem removing this friend.")})),c.set({isRemoving:!1})}))},[Se](e,t,r){const n=e.get("user"),s=(0,A.bg)(e),a=n.get("homeSize"),o=s.get("homeDetails"),l=s.get("homeUsers"),c=n.get("allFriends"),d=n.get("homeDetails"),u=n.get("homeUsers"),p=!o.get("guestEnabled");o.set("isTogglingGuestUser",!0);const m=R.Z.join("/api/home",{guestEnabled:p?1:0}),h=p&&1===a,y=n.server.getXHROptions(m,{type:h?"POST":"PUT"});i().ajax(y).then((()=>{l.fetch(),c.fetch(),u.fetch(),p||2!==a?(d.set("guestEnabled",p),o.set({guestEnabled:p,isTogglingGuestUser:!1}),h&&n.set("home",!0)):(d.clear(),o.clear(),n.set("home",!1))}),(e=>{const t=p?(0,N.Z)("Unable to enable guest account"):(0,N.Z)("Unable to disable guest account"),n=(0,E.Z)(e,t,"status");r((0,g.wp)({type:"error",message:n})),o.set("isTogglingGuestUser",!1)}))},[Pe](e,t){const r=(0,z.dH)(e,t),n=new G.Z({model:r,isEditing:!0});I.Z.trigger("show:modal",n),n.promise.then((e=>{r.set("protected",!!e)}))},[Ie]:(0,u.Z)({key:"invites",getModel:A.bg}),[Ee]:(0,u.Z)({key:"sentInvites",getModel:A.bg}),[we](e,t,r){const n=e.get("user"),s=(0,A.bg)(e),a=s.get("invites"),o=a.get(t.inviteID),l=s.get("homeUsers").get(n.id),c=n.get("homeUsers");o.set("isAccepting",!0);const d=l.get("protected");(o.get("home")&&!d?function(e){const t=new G.Z({model:e,isEditing:!0,isEditWarning:!0});return I.Z.trigger("show:modal",t),(0,T.Z)(t.promise)}(l):i().Deferred().resolve().promise()).then((()=>o.save(null,{force:!0}))).then((()=>{a.remove(o),c.fetch(),r(Ye()),r(qe()),r(yt()),o.get("server")&&I.Z.trigger("discover:servers")}),(e=>{o.set("isAccepting",!1),r((0,g.wp)({type:"error",message:(0,N.Z)("There was a problem accepting this invite.")}))}))},[Ce](e,t,r){const n=(0,A.bg)(e).get("invites"),s=n.get(t.inviteID);s.set("isRemoving",!0);const a=s.server.getXHROptions(s.url(),{type:"DELETE"});i().ajax(a).then((()=>{n.remove(s),s.get("server")&&r(qe())}),(()=>{s.set("isRemoving",!1),r((0,g.wp)({type:"error",message:(0,N.Z)("There was a problem rejecting this invite.")}))}))},[Me](e,t,r){const n=(0,A.bg)(e).get("sentInvites"),s=n.get(t.inviteID);s.set("isRemoving",!0);const a=s.server.getXHROptions(s.url(),{type:"DELETE"});i().ajax(a).then((()=>{n.remove(s),s.get("server")&&r(qe())}),(()=>{s.set("isRemoving",!1),r((0,g.wp)({type:"error",message:(0,N.Z)("There was a problem canceling this invite.")}))}))},[De](e,t,r){const n=e.get("user"),i=(0,A.bg)(e).get("homeUsers"),s=i.get(n.id);if(s.get("protected")||i.length>1)return;const a=new G.Z({model:s,isEditing:!0,isEditWarning:!0});I.Z.trigger("show:modal",a)},[Ae](e,t,r){const n=Vt(e),i=n.get("pinnedSources"),{sources:s=[]}=t;n.get("hasCompletedSetup")||n.set("hasCompletedSetup",!0);const a=s.map(x.Z);i.reset(a),r((0,m.LN)({sidebarSettings:n})),a.forEach((e=>{(0,o.DB)("metrics").trackEvent({event:v.Ip,interaction:!0,identifier:e.providerIdentifier,properties:{page:f.VP,action:y.T5,type:e.sourceType,serverType:C(e),firstRun:!0}})}))},[Oe](e,t,r){const n=Vt(e),i=n.get("pinnedSources"),{sources:s=[],interaction:a=!0}=t,l=s.map(x.Z);i.add(l),r((0,m.LN)({sidebarSettings:n})),l.forEach((e=>{(0,o.DB)("metrics").trackEvent({event:v.Ip,interaction:a,identifier:e.providerIdentifier,properties:{page:f.jy,action:y.T5,type:e.sourceType,serverType:C(e),firstRun:!1}})}))},[Te](e,t,r){const n=Vt(e),i=n.get("pinnedSources"),{sources:s=[]}=t,a=s.map(x.Z),{vodIndex:l,cloudEPGIndex:c,lastCloudSourceIndex:d}=i.reduce(((e,t,r)=>t.get("isCloud")?(r>e.lastCloudSourceIndex&&(e.lastCloudSourceIndex=r),b.wB(t.get("providerIdentifier"),b.uk)&&(e.vodIndex=r),b.wB(t.get("providerIdentifier"),b.vP)&&(e.cloudEPGIndex=r),e):e),{vodIndex:-1,cloudEPGIndex:-1,lastCloudSourceIndex:-1}),u=Math.max(l,c),p=u>-1?u:Math.max(d,i.length-1);i.add(a,{at:p+1}),r((0,m.LN)({sidebarSettings:n})),a.forEach((e=>{(0,o.DB)("metrics").trackEvent({event:v.Ip,interaction:!0,identifier:e.providerIdentifier,properties:{page:f.jx,action:y.T5,type:e.sourceType,serverType:C(e)}})}))},[xe](e,t,r){const n=Vt(e),i=n.get("pinnedSources"),{sources:s=[]}=t,a=s.map((e=>i.get(e.key)));i.remove(a),r((0,m.LN)({sidebarSettings:n})),s.forEach((e=>{(0,o.DB)("metrics").trackEvent({event:v.Ip,interaction:!0,identifier:e.providerIdentifier,properties:{page:f.jy,action:y.t6,type:e.sourceType,serverType:C(e),firstRun:!1}})}))},[ke](e,t,r){const n=Vt(e),i=n.get("pinnedSources"),s=t.sourceKeys.map((e=>i.get(e)));i.reset(s),r((0,m.LN)({sidebarSettings:n})),(0,o.DB)("metrics").trackEvent({event:v.Ip,interaction:!0,properties:{page:f.jy,action:y.wC}})},[Ne](e,t,r){const{sourceKeys:n,pinnedSourceAttrs:i}=t,s=Vt(e),a=s.get("pinnedSources");n.forEach((e=>{const t=a.get(e);t&&t.set(i)})),r((0,m.LN)({sidebarSettings:s}))},[Re](e,t,r){const n=e.get("user").get("experienceSettings").get("dismissedUpsellModals"),{dismissedModal:i}=t;n.includes(i)||r((0,m.LN)({dismissedUpsellModals:[...n,i]}))},[Le](e,t,r){const n=e.get("user").get("experienceSettings").get("dismissedWhatsNewFeatures"),{dismissedFeature:i}=t;n[i]||r((0,m.LN)({dismissedWhatsNewFeatures:te(ee({},n),{[i]:!0})}))},[je](e,t,r){e.get("user").get("settings").get(t.id).set({value:t.value,isDirty:!0}),r(Ct([t.id]))},[Ve](e,t){const r=e.get("user"),n=r.get("settings");Rt(r,t.map((e=>n.get(e).toJSON({syncedOnly:!0})))).then((e=>{t.forEach((t=>{const r=n.get(t),i=Lt(e,t);i&&r.set({updatedAt:i,isDirty:!1})}))}))},[m.pL](e,t,r){e.get("user").get("experienceSettings").set(te(ee({},t),{isDirty:!0})),r(Mt())},[Ue](e){const t=e.get("user"),r=t.get("experienceSettings"),n=r.toJSON({excluded:["updatedAt"],syncedOnly:!0,excludeDefaults:!0});r.set({isSaving:!0,saveError:null}),Rt(t,{id:j.U,type:"json",value:JSON.stringify(n),hidden:!0}).then((e=>{const t=Lt(e,j.U),n={isSaving:!1};t&&(n.updatedAt=t,n.isDirty=!1),r.set(n)}),(()=>{r.set({isSaving:!1,saveError:{message:(0,N.Z)("An error occurred while syncing settings")}})}))},[Fe](e,t,r){const n=e.get("user").get("experienceSettings"),i={showAdvancedSettings:n.get("showAdvancedSettings"),isDirty:!0};n.restoreDefaults(i),r(Mt())},[Be](e,t,r){const n=e.get("user").get("experienceSettings");n.set("autoHomeHubsEnabled",!0),n.get("homeSettings").restoreDefaults(),n.get("sidebarSettings").restoreDefaults(),r(Mt())},[_e](e,{twoFactorEnabled:t},r){e.get("user").set({twoFactorEnabled:t})},[ze](e,t,r){const n=e.get("user").get("experienceSettings"),{id:i,data:s,remindAfter:a}=t,o=n.get("reminders"),l=o.get(i),c=l?l.get("times")+1:0;o.add({data:s,id:i,times:c,remindAfter:(a||P(c)).toISOString()},{merge:!0}),r((0,m.LN)())},[He](e,t,r){e.get("user").get("experienceSettings").get("reminders").remove(t.id),r((0,m.LN)())},[We](e,t,r){const n=e.get("user").get("experienceSettings").get("reminders");(0,w.Z)(`[User] Removing ${n.length} reminders`),n.clear(),r((0,m.LN)())},[Ge](e,t,r){e.get("user").fetch()},[Qe]:(0,u.Z)({key:"optOuts",getModel:jt}),[$e]:(0,p.Z)({key:"optOuts",fetchActionCreator:Nt,getModel:jt})}},80106:(e,t,r)=>{"use strict";r.d(t,{dB:()=>x,GX:()=>R,pS:()=>A,TN:()=>N,KU:()=>k,Yl:()=>j,Z7:()=>T,Uw:()=>L,VV:()=>U});var n=r(45191),i=r(22094),s=r(15451),a=r(19755),o=r.n(a),l=r(6730),c=r(52917);var d=r(49244),u=r(17197),p=r(74226),m=r(86832),h=r(35076),g=r(8089),y=r(73788),v=r(35387),f=r(96039),b=r(42575),Z=r(23608),S=r(2696);const P="watchTogetherRooms/tryUpdateRooms",I="watchTogetherRooms/createRoom",E="watchTogetherRooms/inviteUsers",w="watchTogetherRooms/resetCreateRoom",C="watchTogetherRooms/populateMetadataItem",M="watchTogetherRooms/deleteRoom",D="watchTogetherRooms/roomsUpdated",O="watchTogetherRooms/updateRooms",T=((0,s.Z)("watchTogetherRooms/initialize"),(0,s.Z)(P)),x=(0,s.Z)(I),A=(0,s.Z)(E),k=(0,s.Z)(w),N=(0,s.Z)(C),R=(0,s.Z)(M),L=(0,s.Z)(O),j=(0,s.Z)(D);function V(e){return e.get("ui").get("watchTogether")}const U={[P](e,t,r){const i=(0,n.DB)("watchTogetherRoomsManager").getRoomsClient();!1===(null==i?void 0:i.isOpen)&&r(L())},[O](e,t,r){const i=(0,n.DB)("watchTogetherRoomsManager").getRoomsClient(),s=V(e);s.set({isRoomsPending:!0,isRoomsPopulated:!1}),i.rooms().then((e=>{r(j({rooms:e}))}),(e=>{m.Z.warn("[Watch Together] Unable to fetch rooms:",e),s.set({roomsError:(0,y.Z)("Unable to retrieve Watch Together rooms."),isRoomsPending:!1,isRoomsPopulated:!1})}))},[D](e,t,r){const n=V(e),i=n.get("rooms");i.set(t.rooms,{parse:!0}),n.set({isRoomsPending:!1,isRoomsPopulated:!0});const s=n.get("session");if(s){const e=i.get(s.get("roomID"));if(e){const t=e.get("users");s.get("users").forEach((e=>{const r=t.get(e.get("id"));!r||e.get("thumb")&&e.get("title")||e.set({thumb:e.get("thumb")||r.get("thumb"),title:e.get("title")||r.get("title")})}))}}},[I](e,t,r){const i=V(e),s=(0,b.$R)(e,t),a=s.get("sourceURI"),o=(0,S.Z)(s.toJSON()),{userIDs:l}=t,c=(0,n.DB)("watchTogetherRoomsManager").getRoomsClient();i.set({isInvitePending:!0,isInviteCompleted:!1,inviteError:null}),c.createRoom(a,o,l).then((e=>{(0,n.DB)("metrics").trackEvent({event:u.Iw,interaction:!0,properties:{itemCount:l.length+1,playbackSessionId:e}});const t=i.get("rooms").get(e);i.set({isInvitePending:!1,isInviteCompleted:!0}),t.set({isMetadataItemPending:!1,isMetadataItemPopulated:!0,metadataItem:s}),i.get("session")||r((0,f.ib)({watchTogetherRoomEntityID:t.entityID()}))})).catch((e=>{m.Z.warn("[Watch Together] An error occurred while creating a room:",e),i.set({isInvitePending:!1,inviteError:(0,y.Z)("Unable to send invite. Please try again.")})}))},[E](e,t){const r=V(e),i=(0,b.bT)(e,t),s=(0,n.DB)("watchTogetherRoomsManager").getRoomsClient();r.set({isInvitePending:!0,isInviteCompleted:!1,inviteError:null}),s.inviteUsers(i.get("id"),t.userIDs).then((()=>{r.set({isInvitePending:!1,isInviteCompleted:!0})})).catch((e=>{m.Z.warn("[Watch Together] An error occurred while inviting users:",e),r.set({isInvitePending:!1,inviteError:(0,y.Z)("Unable to send invite. Please try again.")})}))},[w](e){V(e).set({isInvitePending:!1,isInviteCompleted:!1,inviteError:null})},[C](e,t){const r=(0,b.bT)(e,t);if(r.get("isMetadataItemPopulated"))return;const n=r.get("sourceUri"),{key:s,serverIdentifier:a,providerIdentifier:u}=(0,g.Z)(n),m=(0,h.Z)({providerIdentifier:u,serverIdentifier:a}),f=function(e,t){const{key:r,providerIdentifier:n,serverIdentifier:i}=(0,g.Z)(t),s=e.get("entities").get(v.TY).findWhere((e=>{const t=null==e?void 0:e.get("model");return t&&t.server&&t.provider&&t.server.get("machineIdentifier")===i&&t.provider.get("identifier")===n&&t.get("key")===r}));return null==s?void 0:s.get("model")}(e,n);let S;if(r.set({isMetadataItemPending:!0,metadataItemError:null}),f)S=Promise.resolve(f);else{const t=e.get("servers").findWhere({machineIdentifier:a}),r=(null==t?void 0:t.get("isCloud"))?(0,b.VX)(e):t;S=r?(0,Z.Z)((P=r.get("providers"),I={identifier:u},function(e,t){return e.findWhere(t)?o().Deferred().resolve(e).promise():(0,l.Z)({eventSource:e,events:["add"],predicate:()=>!!e.findWhere(t)})}(P,I).then((e=>(0,c.Z)(e.findWhere(I))),(()=>o().Deferred().reject().promise())))).then((e=>{const r=new i.Z({key:s,source:m},{server:t,provider:e});return(0,Z.Z)((0,d.Z)(r)).then((()=>r))})):Promise.reject(new Error("Cannot populate from unknown server"))}var P,I;S.then((e=>{const t=!e.get("key")&&p.wB(u,[p.uk])?{isMetadataItemPending:!1,isMetadataItemPopulated:!1,metadataItemError:(0,y.Z)("This item is not available in your region.")}:{isMetadataItemPending:!1,isMetadataItemPopulated:!0,metadataItem:e};r.set(t)}),(e=>{const t=null==e?void 0:e.server,n=(null==t?void 0:t.get("isConnected"))||(null==t?void 0:t.get("isUnauthorized"))?(0,y.Z)("You dont have access to this item. Ask the owner to share it with you."):(0,y.Z)("The server is unreachable.");r.set({isMetadataItemPending:!1,isMetadataItemPopulated:!1,metadataItemError:n})}))},[M](e,t){const r=(0,b.bT)(e,t);(0,n.DB)("watchTogetherRoomsManager").getRoomsClient().deleteRoom(r.get("id")).catch((e=>{m.Z.warn("[Watch Together] An error occurred while deleting a room:",e)}))}}},31327:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(22222),i=r(86555),s=r(18622),a=r(11244),o=r(26759),l=r(25511);function c(){return(0,n.P1)((0,i.Z)(),a.Z,s.Z,o.Z,((e,t,r,n)=>(0,l.ZP)({server:t,provider:r,stableUser:n,metadataItem:e})))}},26724:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(22222),i=r(86555),s=r(18622),a=r(11244),o=r(85209),l=r(1550),c=r(20683),d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};let y,v;var f=r(30547);function b(){return(0,n.P1)(((e,{containerKey:t})=>t),((e,{containerTitle:t})=>t),((e,{metricsContext:t})=>t),(0,i.Z)(),a.Z,s.Z,(0,n.P1)((0,i.Z)(),(e=>{if(e&&!e.skipDetails&&!e.isExtra&&!e.radio&&e.type!==o.PHOTO&&e.type!==o.CLIP)return e.type===o.TRACK?e.skipParent?e.grandparentKey:e.parentKey:e.key})),((e,t,r,n={},i,s,a)=>{if(n.isFolder){const i=e.match(/(.*?)\/folder/)[1],s={key:`${i}/all`,typeKey:`${i}/folder`,folderKey:a,folderTitle:n.title,parentFolderKey:e,parentFolderTitle:t};return r&&(s.context=r),function(e,t=window.location.hash){const r=function(e){if(y===e)return v;const t=e.split("?"),r=t.length>1?t[1]:void 0,n=r?c.Z.parseParams(r):{};return y=e,v={url:t[0],params:n},v}(t),n={type:void 0,typeKey:e.typeKey,filters:(0,l.Z)(e.filters),limit:e.limit,filterLabel:e.filterLabel,customFilter:e.customFilter?1:void 0,sort:e.sort,folderKey:e.folderKey,folderTitle:e.folderTitle,parentFolderKey:e.parentFolderKey,parentFolderTitle:e.parentFolderTitle,save:1};return n.customFilter||(n.playlistID=void 0,n.playlistTitle=void 0),c.Z.join(r.url,g(g({},r.params),n))}(s)}const d={};return r&&(d.context=r),n.type===o.PHOTO_ALBUM&&(d.legacy=1),(0,f.Z)(i,s,a,d,n.playlistType)}))}},28590:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(86555),s=r(67554),a=r(24793);function o(){return(0,n.P1)((0,i.Z)(),s.Z,((e,t)=>!!e&&(0,a.Z)(t,e.ratingKey)))}},59566:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(86555),s=r(85209),a=r(59258);function o(){return(0,n.P1)(((e,{listType:t})=>t),(0,i.Z)(),((e,t={})=>{const r=t.type;if(r){if(r===s.PLAYLIST)return s.PLAYLIST;if(r===s.COLLECTION)return s.COLLECTION;if(e===a.pV)return s.PHOTO;{const e=s.getLeafType(r);return e&&e.mediaType}}}))}},67554:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(22222),i=r(13469),s=r.n(i),a=r(14308);let o;const l=(0,n.P1)(a.Z,(e=>{const t=s().pluck(e.activeSelectionItems,"id");return o&&s().isEqual(o,t)?o:(o=t,t)}))},14308:(e,t,r)=>{"use strict";function n(e){return e.ui.multiSelect}r.d(t,{Z:()=>n})},57634:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(97593);const s=(0,n.P1)(i.Z,(e=>e?e.desktop.activities:[]));function a(e){return(0,n.P1)(s,(t=>t.filter((t=>t.type===e))))}},86622:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(9984);function s(){return(0,n.P1)(((e,{serverEntityID:t})=>t),i.Z,((e,t)=>!(!e||e!==t)))}},98530:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(87880);function s(){return(0,n.P1)((0,i.Z)(),(e=>e.v4.root.core.serverNowPlayingSessions),((e,t)=>{var r;if(!e)return 0;const n=t[e.machineIdentifier],i=null==n?void 0:n.sessionKeys;return null!=(r=null==i?void 0:i.length)?r:0}))}},9984:(e,t,r)=>{"use strict";function n(e){return e.embeddedServer}r.d(t,{Z:()=>n})},97593:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(17939),s=r(9922),a=r(9984);const o=(0,i.Z)((0,n.P1)(a.Z,s.Z,((e,t)=>t[e])),(e=>e))},60590:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(31288);const s=(0,n.P1)(i.Z,(e=>e.dismissedUnclaimedServers))},45731:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(235);const s=(0,n.P1)(i.Z,(e=>e.timeFormat))},56997:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(17939),i=r(46898),s=r(9922),a=r(28641),o=r(85209),l=r(54501),c=r(96548);const d=(0,n.Z)(a.Z,s.Z,i.Z,((e,t,r)=>e.reduce(((e,n)=>{const i=t[n],s=i.providers.map((e=>r[e])),a=(0,l.Z)(s,[o.MOVIE,o.SHOW,o.ARTIST]).map((([e,t])=>{const r=(0,c.Z)(i,t);return[e,t,r.hasPlexMusicUpgrade||r.hasPlexMovieUpgrade||r.hasPlexSeriesUpgrade]})).filter((([,,e])=>e));return a.length>0&&a.forEach((([t,r])=>{e.push([i.machineIdentifier,n,t,r])})),e}),[])))},16828:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});const n="auto"},3294:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n={PRODUCTION:"9AC194DC",QA:"4289C4E0",NINJA:"EB90125F",CUSTOM:"custom"};n.settings=[{value:n.PRODUCTION,title:"Production"},{value:n.QA,title:"QA"},{value:n.NINJA,title:"Ninja"},{value:n.CUSTOM,title:"Custom"}];const i=n},28882:(e,t,r)=>{"use strict";r.d(t,{I:()=>n,n:()=>i});const n="machineIdentifier",i="sectionID"},79279:(e,t,r)=>{"use strict";r.d(t,{yV:()=>n,vz:()=>i,Yz:()=>s,od:()=>a,ap:()=>o,uh:()=>l,pp:()=>c,ID:()=>d,xq:()=>u,XA:()=>p,nc:()=>m});const n="account",i="download-button",s="downloads-page",a="dvr-setup",o="lyrics",l="nav-bar",c="server-setup",d="sonos",u="users-and-sharing",p="webhooks",m="watchlist"},13272:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(8238),i=r(70777),s=r(85209);function a(e,t,r,a){if(!(e&&t&&r&&a))return!1;const{type:o,hasInvalidKey:l,deletedAt:c,isFolder:d,isMetadataList:u,firstItemType:p,dvrChannel:m,onAir:h}=a;if(!u&&(l||c||d))return!1;if(!(m||u||t.protocols.stream||h))return!1;if(u&&!p)return!1;const g=!!r[i.Ks];if(t.protocols.livetv&&(e.livetv<4||!g))return!1;if(t.protocols.livetv&&!n.Z.allowLiveTVPlayback)return!1;if(t.features.playqueue)return!0;const y=u?p:o,v=(0,s.getLeafType)(y),f=(0,s.getChildType)(y);return y===v.typeString||f.id===v.id}},80995:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(73788),i=r(16828);function s(e){var t;const{name:r,description:s}=(null==(t=e.toJSON)?void 0:t.call(e))||e;return r===i.B?(0,n.Z)("Auto select device"):s}},96548:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(79167),i=r(70777),s=r(85209);function a(e,t){var r;const a=e.isConnected&&e.isFullOwnedServer&&(null==(r=e.ownerFeatures)?void 0:r.includes(i.wz));return{hasPlexMusicUpgrade:!(!a||!t||t.type!==s.ARTIST||t.agent!==n.zR&&t.agent!==n.E4),hasPlexMovieUpgrade:!(!a||!t||t.type!==s.MOVIE||t.agent!==n.A2&&t.agent!==n.HN),hasPlexSeriesUpgrade:!(!a||!t||t.type!==s.SHOW||t.agent!==n.A2&&t.agent!==n.NV)}}},65427:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(9358),i=r(63252);const s=function(){return(0,n.Z)()||(0,i.Z)()}},42575:(e,t,r)=>{"use strict";r.d(t,{KC:()=>s.KC,$R:()=>s.$R,lK:()=>s.lK,Tp:()=>s.Tp,js:()=>s.js,Y7:()=>s.Y7,SW:()=>s.SW,bg:()=>s.bg,VX:()=>s.VX,bT:()=>s.bT,tz:()=>s.tz,lp:()=>s.lp,$w:()=>s.$w,dH:()=>a,cX:()=>o});var n=r(89107),i=r(35387),s=r(76389);function a(e,{homeUserEntityID:t}){return(0,n.Z)(e,i.Tl,t)}function o(e,{playerIdentifier:t}){const r=e.get("user").get("desktop").get("cloudCompanions");for(const e of r.models){const r=e.get("cloudPlayers").findWhere({playerIdentifier:t});if(r)return r}return e.get("companionServer").get("desktop").get("players").findWhere({playerIdentifier:t})}},41821:(e,t,r)=>{"use strict";r.d(t,{u:()=>aB,Z:()=>cB});var n={};r.r(n),r.d(n,{CENTER:()=>eE,EAST:()=>$I,NORTH:()=>GI,NORTHEAST:()=>QI,NORTHWEST:()=>JI,SOUTH:()=>qI,SOUTHEAST:()=>KI,SOUTHWEST:()=>YI,WEST:()=>XI});var i=r(67294),s=r(28216),a=r(5977),o=r(22222),l=r(8238),c=r(74278),d=r(87999),u=r(62291),p=r(69022),m=r(36505),h=r(20573),g=r(39527),y=r(20683),v=r(95522),f=r(45186),b=r(72310),Z=r(91085),S=r(42218),P=r(37418),I=r(50439),E=r(62286);const w=(0,o.P1)(f.Z,(e=>e.lockState));var C=r(90696),M=r(5318),D=r(23245),O=r(44811),T=r(80105),x=r(91308),A=r(18890),k=r(61737),N=r(8718),R=r(23574),L=r(78891),j=r(22626);function V(){const{id:e}=(0,a.UO)(),{machineIdentifier:t,providerIdentifier:r}=(0,k.Z)(),{data:{activityByID:n}={},isFetching:s,refetch:o}=(0,j.sX)({id:e}),l=(0,D.Z)(n),c=(0,i.useCallback)((()=>{o()}),[o]);return(0,i.useEffect)((()=>{l&&!n&&(0,N.Z)("activity")}),[n,l]),s?i.createElement(I.Z,null,i.createElement(E.Z,null)):i.createElement(O.ZP,{contentDirectoryID:M.u,machineIdentifier:t,providerIdentifier:r},i.createElement(S.Z,null,i.createElement(R.Z,{className:"DiscoverActivityCard-header-GbJZ2F PageHeader-pageHeader-e2k66t"},i.createElement(L.Z,null,i.createElement(T.Z,null))),i.createElement("div",{className:"DiscoverActivityCard-card-r3Fp2s"},n?i.createElement(x.Z,{item:n,removeActivity:c},(0,A.Z)(n)):null)))}var U=r(78386),F=r(64188),B=r(54320),_=r(10033),z=r(35076),H=r(97318),W=r(87442),G=r(84419),Q=r(39263),$=r(42864),K=r(71124),q=r(90113),Y=r(27604),X=r(29608),J=r(66012),ee=r(87457),te=r(99318),re=r(17007),ne=r(74310),ie=r(65714),se=r(4148),ae=r(53072),oe=r(34219),le=r(17342),ce=r(59790),de=r(7065),ue=r(20894),pe=r(16568),me=r(12852),he=r(5466),ge=r(61218),ye=r(71688),ve=r(94105),fe=r(98551);function be({machineIdentifier:e,providerIdentifier:t,metadataKey:r}){const n=(0,s.I0)(),a=(0,s.v9)((0,ae.Z)(e)),o=(0,s.v9)((0,ie.Z)(e,t)),l=(0,s.v9)((0,oe.Z)("showPrePlayArtwork")),{metadata:{metadataItem:c,error:d,isPopulated:u,isStale:p}}=(0,s.v9)(fe.Z),m=(0,z.Z)({key:r,serverIdentifier:e,providerIdentifier:t}),h=(0,J.Z)(m),g=(0,ee.Z)(null==c?void 0:c.sourceURI),y=c?(0,re.ZP)(c.type,c.subtype):re.s4,v=c?(0,se.Z)(o,c):void 0,f=c&&r===c.key&&u&&!d;(0,i.useEffect)((()=>(h.isDeleted?n((0,_.n)({replace:!0})):n(ve.Z.actions.metadataItemFetchRequested({server:a,provider:o,metadataKey:r})),()=>{(0,W.c9)((()=>{n(ve.Z.actions.reset())}))})),[r,h.isDeleted]),(0,i.useEffect)((()=>{(p||h.isStale)&&n(ve.Z.actions.metadataItemRepopulateRequested({server:a,provider:o}))}),[p,h.isStale]),(0,i.useEffect)((()=>{if(!c)return;const e=c.thumb||c.parentThumb||c.grandparentThumb,t=c.grandparentArt||c.parentArt||c.art,r=l?t||e:e||t;n((0,Q.ZZ)({serverEntityID:a.entityID,providerEntityID:o.entityID,imageUrl:r,allowBlur:!l||!t}))}),[n,c,o.entityID,a.entityID,l]);const b=(0,i.useMemo)((()=>e=>c?i.createElement(me.Z,null,i.createElement(pe.Z,null,i.createElement(e,{allowLink:!0,metadataItem:c})),i.createElement(ue.Z,{metadataItem:c})):null),[c]),Z=(0,i.useMemo)((()=>e=>c?i.createElement(ge.Z,null,i.createElement(pe.Z,null,i.createElement(e,{allowLink:!0,metadataItem:c}))):null),[c]),P=(0,i.useMemo)((()=>c?i.createElement(ye.Z,null,i.createElement(he.Z,{metadataItem:c})):null),[c]),w=(0,i.useMemo)((()=>{switch(null==c?void 0:c.type){case te.pG.Episode:return i.createElement(i.Fragment,null,b(q.Z),Z(X.Z),i.createElement(ge.Z,null,i.createElement(pe.Z,null,i.createElement(Y.Z,{metadataItem:c}),i.createElement(G.Z,{separator:""}),i.createElement(K.Z,{allowLink:!1,metadataItem:c}))),i.createElement(ce.Z,{metadataItem:c,promotedActions:["isPlayVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]}));case te.pG.Season:return i.createElement(i.Fragment,null,b(X.Z),Z(K.Z),P,i.createElement(ce.Z,{metadataItem:c,promotedActions:["isPlayVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]}));case te.pG.Show:return i.createElement(i.Fragment,null,b(K.Z),P,i.createElement(ce.Z,{metadataItem:c,promotedActions:["isPlayVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isPlayTrailerVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]}));default:return c?i.createElement(i.Fragment,null,b(K.Z),P,i.createElement(ce.Z,{metadataItem:c,promotedActions:["isPlayVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isPlayTrailerVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]})):null}}),[b,Z,c,P]),C=(0,i.useMemo)((()=>(0,H.Z)(null==c?void 0:c.guid)),[null==c?void 0:c.guid]);return f?i.createElement(O.ZP,{contentDirectoryID:null==v?void 0:v.id,machineIdentifier:e,providerIdentifier:t},i.createElement(S.Z,null,i.createElement(ne.ZP,{containerProvider:o,containerServer:a,containerSourceURI:c.sourceURI,containerSubtype:c.subtype,containerType:c.type},i.createElement(de.Z,null),i.createElement("div",{className:"PrePlayActivityPage-details-Mch2W6"},i.createElement(U.X,{gap:B.$u.M},i.createElement($.Z,{aspectRatio:y,className:"PrePlayActivityPage-poster-v853XA",isPlayButtonCard:!0,isPlayedStatusHidden:!0,isProgressBarHidden:!0,isSelectHidden:!0,metadataItem:c,metadataItemState:h,metadataTimelineState:g,width:y===re.oz?270:80}),i.createElement(F.K,null,w))),i.createElement(le.Z,{id:C,serverURL:m})))):i.createElement(I.Z,null,i.createElement(E.Z,null))}var Ze=r(45191),Se=r(73788),Pe=r(58024),Ie=r(77502),Ee=r(36155),we=r(56887),Ce=r(27649);class Me extends i.Component{constructor(e,t){super(e,t),this.fadeOut=()=>{const{currentThemeMusicUrl:e}=this.state;e&&this.props.volume>0?(this.fadeOutStartMilliseconds||(this.fadeOutStartMilliseconds=Date.now()),this.setState(this.updateFrameState)):this.reset()},this.updateFrameState=e=>{const t=e.relativeVolume;let r=-t*(Date.now()-this.fadeOutStartMilliseconds)/2e3+t;return r=Math.max(0,r),r&&(this.fadeOutTimeoutID=window.setTimeout(this.fadeOut,100)),{volume:r}},this.onDurationMillisecondsChange=e=>{this._currentDurationMilliseconds=e},this.onPositionMillisecondsChange=e=>{const t=Math.floor(e/1e3),r=this.state.shouldStopOnEnd?0:2e3;this.state.positionSeconds!==t&&this.setState({positionSeconds:t}),this._currentDurationMilliseconds-e<=r&&!this.fadeOutTimeoutID&&this.endThemeMusic()},this.onEnd=()=>{this.reset()},this.onMetricsPlayerChange=()=>{},this.state=this.getInitialStateFromProps(e)}UNSAFE_componentWillReceiveProps(e){const{volume:t,themeMusicUrl:r}=this.props,{volume:n,themeMusicUrl:i}=e;if(t!==n){const e={relativeVolume:this.getRelativeVolume(n)};this.fadeOutTimeoutID||(e.volume=e.relativeVolume),this.setState(e)}r!==i&&(i?this.reset(i):this.fadeOutTimeoutID||this.endThemeMusic())}componentWillUnmount(){this.reset()}getRelativeVolume(e){return.5*e}getInitialStateFromProps({currentThemeMusicUrl:e,volume:t}){const r=this.getRelativeVolume(t);return{currentThemeMusicUrl:e,relativeVolume:r,volume:r,positionSeconds:0,shouldStopOnEnd:l.Z.shouldStopThemeMusicOnNavigate}}reset(e){this.fadeOutTimeoutID=window.clearTimeout(this.fadeOutTimeoutID),this.fadeOutStartMilliseconds=null,this.setState(this.getInitialStateFromProps({currentThemeMusicUrl:e,volume:this.props.volume}))}endThemeMusic(){if(this.state.shouldStopOnEnd){const{dispatchEndPlayback:e,playerType:t}=this.props;e({playerType:t}),this.reset()}else this.fadeOut()}render(){const{currentThemeMusicUrl:e,positionSeconds:t,volume:r}=this.state;if(!e)return null;const{component:n,playerType:s}=this.props;return i.createElement(n,{key:e,allowRecycleElement:!0,isBackgroundMedia:!0,isThemeMusic:!0,mediaType:"audio",playerType:s,positionSeconds:t,src:e,volume:r,onDurationMillisecondsChange:this.onDurationMillisecondsChange,onEnd:this.onEnd,onMetricsPlayerChange:this.onMetricsPlayerChange,onPositionMillisecondsChange:this.onPositionMillisecondsChange})}}const De=Me;var Oe=Object.defineProperty,Te=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,ke=(e,t,r)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ne={dispatchEndPlayback:Ce.Mh};class Re extends i.Component{shouldComponentUpdate(e){const{volume:t,themeMusicUrl:r,isPlayerOpen:n}=this.props;return e.volume!==t||e.themeMusicUrl!==r||e.isPlayerOpen!==n||!e.isBackgroundPending}render(){const e=this.props,{isBackgroundPending:t,isPlayerOpen:r}=e,n=((e,t)=>{var r={};for(var n in e)xe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Te)for(var n of Te(e))t.indexOf(n)<0&&Ae.call(e,n)&&(r[n]=e[n]);return r})(e,["isBackgroundPending","isPlayerOpen"]);return r?null:i.createElement(De,((e,t)=>{for(var r in t||(t={}))xe.call(t,r)&&ke(e,r,t[r]);if(Te)for(var r of Te(t))Ae.call(t,r)&&ke(e,r,t[r]);return e})({},n))}}Re.defaultProps={playerType:m.Se};const Le=(0,s.$j)((function(){return(0,o.P1)((0,Ze.DB)("selectLocalVolume"),(e=>e.ui.background),(e=>e.ui.audioVideoPlayer.isOpen),((e,t,r)=>({volume:e,isBackgroundPending:t.isBackgroundPending,themeMusicUrl:t.themeMusicUrl,component:(0,Ze.DB)("mediaComponent").getComponent({protocol:"http",isDirectPlay:!0}),isPlayerOpen:r})))}),Ne)(Re);var je=r(81272),Ve=r(76486),Ue=r(70777),Fe=r(95283),Be=(e=>(e[e.None=0]="None",e[e.OnlyBrightColors=1]="OnlyBrightColors",e[e.OnlyDarkColors=2]="OnlyDarkColors",e[e.OnlyDistinctColors=4]="OnlyDistinctColors",e[e.OrderByBrightness=8]="OrderByBrightness",e[e.OrderByDarkness=16]="OrderByDarkness",e[e.AvoidWhite=32]="AvoidWhite",e[e.AvoidBlack=64]="AvoidBlack",e))(Be||{});const _e=30;function ze(e,t,r){return e+t*_e+r*_e*_e}const He=[[0,0,0],[0,0,1],[0,0,-1],[0,1,0],[0,1,1],[0,1,-1],[0,-1,0],[0,-1,1],[0,-1,-1],[1,0,0],[1,0,1],[1,0,-1],[1,1,0],[1,1,1],[1,1,-1],[1,-1,0],[1,-1,1],[1,-1,-1],[-1,0,0],[-1,0,1],[-1,0,-1],[-1,1,0],[-1,1,1],[-1,1,-1],[-1,-1,0],[-1,-1,1],[-1,-1,-1]];class We{extractQuadrantColorsFromImage(e,t,r,n){const i=[],{width:s,height:a}=e,o=Math.floor(s*n),l=Math.floor(a*n);return e.region={minX:0,minY:0,maxX:o,maxY:l},this._extractColorsFromRegion(i,e,t,r),e.region={minX:s-o,minY:0,maxX:s,maxY:l},this._extractColorsFromRegion(i,e,t,r),e.region={minX:s-o,minY:a-l,maxX:s,maxY:a},this._extractColorsFromRegion(i,e,t,r),e.region={minX:0,minY:a-l,maxX:o,maxY:a},this._extractColorsFromRegion(i,e,t,r),i}_extractColorsFromRegion(e,t,r,n){let i=this._extractColorsFromImage(t,r,n);i.length||r===Be.None||(i=this._extractColorsFromImage(t,Be.None,n));for(let t=0;t<n;t++)i.length&&e.push(t<i.length?i[t]:i[0])}_extractColorsFromImage(e,t,r){let n=this._extractAndFilterMaximaFromImage(e,t);return n=this._performAdaptiveDistinctFilteringForMaxima(n,r),this._colorsFromMaxima(n)}_colorsFromMaxima(e){return e.map((e=>({red:e.red,green:e.green,blue:e.blue})))}_filterMaxima(e,t,r){const n=[];for(let i=0;i<e.length;i++){const s=e[i],a=s.red-t.red,o=s.green-t.green,l=s.blue-t.blue;Math.sqrt(a*a+o*o+l*l)>=r&&n.push(s)}return n}_extractAndFilterMaximaFromImage(e,t){let r=this._findAndSortMaximaInImage(e,t);return t&Be.AvoidBlack&&(r=this._filterMaxima(r,{red:0,green:0,blue:0},.25)),t&Be.AvoidWhite&&(r=this._filterMaxima(r,{red:1,green:1,blue:1},.25)),r}_performAdaptiveDistinctFilteringForMaxima(e,t){let r=e;if(r.length>t){let e=r,n=.1;for(let i=0;i<10&&(e=this._filterDistinctMaxima(r,n),!(e.length<=t));i++)r=e,n+=.05;r=r.slice(0,t)}return r}_filterDistinctMaxima(e,t){const r=[];for(let n=0;n<e.length;n++){const i=e[n];let s=!0;for(let r=0;r<n;r++){const n=e[r],a=i.red-n.red,o=i.green-n.green,l=i.blue-n.blue;if(Math.sqrt(a*a+o*o+l*l)<t){s=!1;break}}s&&r.push(i)}return r}_findAndSortMaximaInImage(e,t){let r=this._findLocalMaximaInImage(e,t);return t&Be.OnlyDistinctColors&&(r=this._filterDistinctMaxima(r,.1)),t&Be.OrderByBrightness?this._orderByBrightness(r):t&Be.OrderByDarkness&&this._orderByDarkness(r),r}_orderByBrightness(e){e.sort(((e,t)=>t.brightness-e.brightness))}_orderByDarkness(e){e.sort(((e,t)=>e.brightness-t.brightness))}_clearCells(){this._cells||(this._cells=new Array(27e3));for(let e=0;e<27e3;e++)this._cells[e]={hitCount:0,redAcc:0,greenAcc:0,blueAcc:0}}_findLocalMaximaInImage(e,t){this._clearCells();const r=e.data;if(!(null==r?void 0:r.length)||!this._cells)return[];let n=0,i=e.width,s=0,a=e.height;e.region&&(n=e.region.minX,i=e.region.maxX,s=e.region.minY,a=e.region.maxY);for(let o=s;o<a;o++)for(let s=n;s<i;s++){const n=o*e.width+s,i=r[4*n+0]/255,a=r[4*n+1]/255,l=r[4*n+2]/255,c=.2126*i+.7152*a+.0722*l;if(t&Be.OnlyBrightColors&&c>.6)continue;if(t&Be.OnlyDarkColors&&c<.4)continue;const d=ze(Math.floor(29*i),Math.floor(29*a),Math.floor(29*l));this._cells[d].hitCount++,this._cells[d].redAcc+=i,this._cells[d].greenAcc+=a,this._cells[d].blueAcc+=l}let o=!1;const l=[];for(let e=0;e<_e;e++)for(let t=0;t<_e;t++)for(let r=0;r<_e;r++){const n=this._cells[ze(e,t,r)].hitCount;if(0===n)continue;o=!0;for(let i=0;i<27;i++){const s=e+He[i][0],a=t+He[i][1],l=r+He[i][2];if(s>=0&&a>=0&&l>=0&&s<_e&&a<_e&&l<_e&&this._cells[ze(s,a,l)].hitCount>n){o=!1;break}}if(!o)continue;const i=ze(e,t,r),s=this._cells[i],{hitCount:a,redAcc:c,greenAcc:d,blueAcc:u}=s,p=c/a,m=d/a,h=u/a;l.push({cellIndex:i,hitCount:a,red:p,green:m,blue:h,brightness:.2126*p+.7152*m+.0722*h})}return l.sort(((e,t)=>t.hitCount-e.hitCount)),l}}class Ge{constructor(e){this._rgb=e}get red(){return this._rgb.red}get green(){return this._rgb.green}get blue(){return this._rgb.blue}get hsl(){return this._hsl||this._updateHSLfromRGB(),this._hsl||[0,0,0]}getLightness(){var e;return this._hsl||this._updateHSLfromRGB(),(null==(e=this._hsl)?void 0:e[2])||0}getSaturation(){const e=this.red,t=this.green,r=this.blue,n=Math.max(e,t,r),i=Math.min(e,t,r);let s=0;return n>0&&(s=(n-i)/n*100),s}getLuminance(){const e=100*this.red,t=100*this.green,r=100*this.blue;return Math.max(e,t,r)}darken(e){this._hsl||this._updateHSLfromRGB(),this._hsl&&(this._hsl[2]*=1-e,this._updateRGBfromHSL())}toHexString(){return`#${Math.round(255*this.red).toString(16).padStart(2,"0")}${Math.round(255*this.green).toString(16).padStart(2,"0")}${Math.round(255*this.blue).toString(16).padStart(2,"0")}`}_updateHSLfromRGB(){const e=this.red,t=this.green,r=this.blue,n=Math.max(e,t,r),i=Math.min(e,t,r),s=n+i,a=s/2;let o=0,l=0;if(n===i)o=0,l=0;else{const c=n-i;l=c/(a>.5?2-s:s),e>=n?(o=(t-r)/c,t<r&&(o+=6)):o=t>=n?2+(r-e)/c:4+(e-t)/c,o/=6}this._hsl=[360*o,100*l,100*a]}_updateRGBfromHSL(){if(!this._hsl)return;const e=[0,0,0],t=this._hsl[0]/360,r=this._hsl[1]/100,n=this._hsl[2]/100;if(r<=0)e[0]=n,e[1]=n,e[2]=n;else if(n<=0)e[0]=0,e[1]=0,e[2]=0;else{const i=n<.5?n*(1+r):n+r-n*r,s=2*n-i,a=[t+1/3,t,t-1/3];for(let t=0;t<3;t++)a[t]<0?a[t]+=1:a[t]>1&&(a[t]-=1),a[t]<1/6?e[t]=s+6*(i-s)*a[t]:a[t]<.5?e[t]=i:a[t]<2/3?e[t]=s+(i-s)*(2/3-a[t])*6:e[t]=s}this._rgb.red=e[0],this._rgb.green=e[1],this._rgb.blue=e[2]}}class Qe{constructor(){this._colorCube=new We}extractColors(e){const t=this._colorCube.extractQuadrantColorsFromImage(e,Be.AvoidBlack|Be.AvoidWhite,5,.4);if(!t.length)return[];const r=this._fillColorPalette(t),n=r.slice(0,5),i=r.slice(5,10),s=r.slice(10,15),a=r.slice(15,20),o=[this._dropBoringColorsInStages(n)[0],this._dropBoringColorsInStages(i)[0],this._dropBoringColorsInStages(s)[0],this._dropBoringColorsInStages(a)[0]];this._percentageDifferent(o[0],o[1])<15&&o[1].darken(.7),this._percentageDifferent(o[2],o[3])<15&&o[3].darken(.7);for(let e=0;e<o.length;e++)o[e].getLightness()>50&&o[e].darken(.1);return o.map((e=>({rgb:[Math.round(255*e.red),Math.round(255*e.green),Math.round(255*e.blue)],hsl:e.hsl,webColor:e.toHexString()})))}_fillColorPalette(e){const t=e.map((e=>new Ge(e)));if(t.length<20){const e=221/255,r={red:e,green:e,blue:e};for(let e=t.length;e<=20;e++)t.push(new Ge(r))}return t}_dropBoringColorsInStages(e){let t=this._dropBoringColors([e[0]],25,100,25,100);if(t.length||(t=this._dropBoringColors([e[1]],15,100,25,100)),t.length||(t=this._dropBoringColors([e[0]],2,40,30,95)),t.length||(t=this._dropBoringColors([e[1]],2,40,60,95)),!t.length){const r=e.slice(1);t=this._dropBoringColors(r,30,100,25,100),t.length||(t=this._dropBoringColors(r,15,100,25,100))}return t.length||(t=this._dropBoringColors(e,5,90,5,90)),t.length||(t=[e[0]]),t}_dropBoringColors(e,t,r,n,i){return e.filter((e=>this._colorInRange(e,t,r,n,i)))}_colorInRange(e,t,r,n,i){const s=e.getSaturation(),a=e.getLuminance();return s>=t&&s<=r&&a>=n&&a<=i&&!(s+a>190)}_percentageDifferent(e,t){return(Math.abs(e.red-t.red)+Math.abs(e.green-t.green)+Math.abs(e.blue-t.blue))/3*100}}const $e=["#3a3a3a","#4c4c4c","#3f3f3f","#2f2f2f"];var Ke=r(84105),qe=r(15058),Ye=r(59900),Xe=Object.defineProperty,Je=Object.defineProperties,et=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,it=(e,t,r)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,st=(e,t)=>{for(var r in t||(t={}))rt.call(t,r)&&it(e,r,t[r]);if(tt)for(var r of tt(t))nt.call(t,r)&&it(e,r,t[r]);return e},at=(e,t)=>Je(e,et(t));const ot=640,lt={position:"absolute",width:"100%",height:"100%"},ct=at(st({},lt),{background:`url(${Ve})`,zIndex:2}),dt=at(st({},lt),{opacity:0}),ut={opacity:10,background:"343a3f"},pt=at(st({},ut),{opacity:25,format:"png"}),mt=function({serverEntityID:e,providerEntityID:t,url:r,allowBlur:n}){const a=(0,s.v9)((0,qe.Z)(Ue._U)),o=n&&a,[l,{width:c,height:d}]=(0,Ke.Z)(),{width:u,height:p,filters:m}=(0,i.useMemo)((()=>{if(c&&d){if(o)return{width:240,height:d/c*240};if(n){const e=c/d,t=e>1?ot:ot*e,r=e>1?ot/e:ot,n=Math.max(c/t,d/r),i=Math.round(100/n);return{width:t,height:r,filters:at(st({},pt),{blur:i})}}return{width:Math.min(c,1920),height:Math.min(d,1080),filters:ut}}return{width:0,height:0}}),[n,o,d,c]),{colors:h,onImageUrlAvailable:g}=function(e){const[t,r]=(0,i.useState)($e),n=(0,i.useRef)(new Image);(0,i.useEffect)((()=>{e||r($e),n.current.src=""}),[e]);const s=(0,i.useCallback)((()=>{var e,t,i,s;const a=document.createElement("canvas");a.width=n.current.width,a.height=n.current.height;const o=a.getContext("2d");if(!o)return;o.drawImage(n.current,0,0);const l=(u=o.getImageData(0,0,a.width,a.height).data,p=a.width,m=a.height,(new Qe).extractColors({data:u,width:p,height:m})).slice(0,4),c=((null==(e=l[0])?void 0:e.hsl[2])+(null==(t=l[1])?void 0:t.hsl[2]))/2,d=((null==(i=l[2])?void 0:i.hsl[2])+(null==(s=l[3])?void 0:s.hsl[2]))/2;var u,p,m;l.length<4||c<=15&&d<=15?r($e):r(l.map((({webColor:e})=>e)))}),[]);return{colors:t,onImageUrlAvailable:(0,i.useCallback)((e=>{n.current.onload=s,n.current.src=e}),[s])}}(o?r:void 0);return i.createElement("div",{ref:l,style:lt},o||!r?i.createElement("div",{style:{height:d,width:c}},i.createElement(je.j,{bottomLeft:h[3],bottomRight:h[2],topLeft:h[0],topRight:h[1]})):null,o&&u&&p?i.createElement(Ye.Z,{key:"colorExtraction",allowPixelRatioSize:!1,component:Fe.Z,containerStyle:dt,height:p,providerEntityID:t,serverEntityID:e,url:r,width:u,onLoad:g}):null,!o&&u&&p?i.createElement(Ye.Z,{allowPixelRatioSize:!1,component:Fe.Z,containerStyle:lt,filters:m,height:p,providerEntityID:t,serverEntityID:e,upscale:n,url:r,width:u}):null,o?null:i.createElement("div",{style:ct}))},ht=(0,o.P1)((e=>e.ui.background),(e=>({serverEntityID:e.server,providerEntityID:e.provider,url:e.imageUrl,allowBlur:e.allowBlur,isBackgroundPending:e.isBackgroundPending})));class gt extends i.Component{shouldComponentUpdate(e){return!e.isBackgroundPending}render(){const{serverEntityID:e,providerEntityID:t,url:r,allowBlur:n}=this.props;return i.createElement(mt,{allowBlur:n,providerEntityID:t,serverEntityID:e,url:r})}}const yt=(0,s.$j)((e=>ht))(gt);var vt=r(6459);function ft(){return function(){const e=(0,s.I0)(),t=(0,a.TH)(),r=!!(0,a.$B)({path:vt.Z.prePlay,exact:!0});(0,i.useEffect)((()=>{e((0,Q.HF)({isBackgroundPending:r}))}),[t,r,e])}(),i.createElement("div",{className:"FullPageBackground-backgroundContainer-mKhZ21"},i.createElement(yt,null),i.createElement(Le,null))}var bt=r(84503),Zt=r(38375),St=r(235),Pt=r(12472),It=r(92060),Et=r(67372),wt=r(11897);function Ct(){const e=(0,s.I0)(),t=(0,s.v9)(c.Z),r=(0,s.v9)(Zt.Z),{platforms:n,isPending:a,isPopulated:o,error:l}=(0,s.v9)(It.Z),{services:d,isPopulated:u,isPending:p,error:m}=(0,s.v9)(Et.Z),{hasCompletedStreamingServicesOnboarding:h,sidebarSettings:{hasCompletedSetup:g}}=(0,s.v9)(St.Z),y=g&&!h&&u&&!(null==d?void 0:d.length)&&o&&!!(null==n?void 0:n.length);(0,i.useEffect)((()=>{!t.isConnected||!(null==r?void 0:r.isPopulated)||p||u||m||e(wt.ZP.actions.preferredServicesFetchRequested())}),[e,t,p,u,m,null==r?void 0:r.isPopulated,null==d?void 0:d.length]),(0,i.useEffect)((()=>{!t.isConnected||!(null==r?void 0:r.isPopulated)||a||o||l||e(wt.ZP.actions.availabilityPlatformsFetchRequested())}),[l,t.isConnected,e,a,o,null==r?void 0:r.isPopulated]),(0,i.useEffect)((()=>{(o&&!n.length||u&&(null==d?void 0:d.length))&&(0,W.c9)((()=>{e((0,bt.LN)({hasCompletedStreamingServicesOnboarding:!0}))}))}),[e,o,u,n.length,null==d?void 0:d.length]);const v=(0,i.useCallback)((()=>{(0,W.c9)((()=>{e((0,bt.LN)({hasCompletedStreamingServicesOnboarding:!0}))}))}),[e]);return i.createElement(Pt.Z,{isOpen:y,onClose:v})}var Mt=r(74226),Dt=r(47276),Ot=r(12587),Tt=r(12316),xt=r(72324),At=r(80974),kt=r(86022),Nt=r(46898),Rt=r(78110),Lt=r(21604),jt=r(77072),Vt=r(95240),Ut=r(19211);function Ft(e,t,r){const{isCloud:n,isFullOwnedServer:i,serverFriendlyName:s,serverSourceTitle:a,providerSourceTitle:o}=e,{ownedSources:l,sharedSources:c}=t,d=Object.keys(l).length,u=Object.keys(c).length;if(n)return d>0||u>0?o:void 0;if(i)return d>1?s:void 0;const p=c[a];return(p?p.length:0)>1?r?s:`${a}  ${s}`:d>0||u>1?a:void 0}var Bt=Object.defineProperty,_t=Object.defineProperties,zt=Object.getOwnPropertyDescriptors,Ht=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,Gt=Object.prototype.propertyIsEnumerable,Qt=(e,t,r)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $t=r(39582),Kt=r(88604),qt=r(61495),Yt=Object.defineProperty,Xt=Object.defineProperties,Jt=Object.getOwnPropertyDescriptors,er=Object.getOwnPropertySymbols,tr=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable,nr=(e,t,r)=>t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ir(){return(0,o.P1)(Vt.Z,jt.Z,Lt.Z,c.Z,Nt.Z,Rt.Z,(e=>!e.user.isFullUser),((e,t,r,n,i,s,a)=>{const o=[];return e.forEach((e=>{if(e.isHidden)return;const a=function(e,t){return e.find((e=>e.machineIdentifier===t))}(r,e.machineIdentifier),l=function(e,t,r,n){if(!e)return null;const i=(e.isCloud?r:e.providers).find((e=>{const r=t[e];return r&&r.identifier===n}));return t[i]}(a,i,t.providers,e.providerIdentifier),c=(0,qt.Z)(l,e.directoryID),d=(0,$t.Z)(l,c);if(d)(!a.isCloud||!Mt.yv(e.providerIdentifier))&&d.key===Kt.Hs&&s||o.push((0,Ut.Z)({sourceType:d.key,sourceServer:a,sourceProvider:l,sourceDirectory:c}));else{const r=function(e,t,r,n){return e?e.isCloud?e.connectionTestResult!==kt._r.UNAVAILABLE&&!n.isProvidersPopulated&&!n.providersError||t&&!t.isPopulated&&!t.error:e.connectionTestResult===kt._r.PENDING:r.isResourcesPending}(a,l,n,t);o.push((u=((e,t)=>{for(var r in t||(t={}))tr.call(t,r)&&nr(e,r,t[r]);if(er)for(var r of er(t))rr.call(t,r)&&nr(e,r,t[r]);return e})({},e),p={serverEntityID:a&&a.entityID,providerEntityID:l&&l.entityID,isUnavailable:!r,isProviderReady:l?l.isPopulated||null!=l.error:!r},Xt(u,Jt(p))))}var u,p})),function(e,t){const r=function(e){return e.reduce(((e,t)=>{const{isFullOwnedServer:r,serverSourceTitle:n,machineIdentifier:i}=t;if(!r&&n){null==e.sharedSources[n]&&(e.sharedSources[n]=[]);const t=e.sharedSources[n];t.includes(i)||t.push(i)}return i&&r&&(null==e.ownedSources[i]&&(e.ownedSources[i]=0),e.ownedSources[i]++),e}),{sharedSources:{},ownedSources:{}})}(e);return e.map((e=>{return n=((e,t)=>{for(var r in t||(t={}))Wt.call(t,r)&&Qt(e,r,t[r]);if(Ht)for(var r of Ht(t))Gt.call(t,r)&&Qt(e,r,t[r]);return e})({},e),i={titleDetail:Ft(e,r,t)},_t(n,zt(i));var n,i}))}(o,a)}))}var sr=r(44346),ar=r(28531),or=r(80106),lr=r(4681),cr=r(74861),dr=(e=>(e.Auto="auto",e.Custom="custom",e))(dr||{}),ur=r(42149),pr=r(91306),mr=r(83700),hr=r(93545);const gr=(0,o.P1)(f.Z,(e=>e.services));var yr=r(78610),vr=r(23642),fr=r(29591),br=r(59405),Zr=r(78389),Sr=r(29462),Pr=r(11050),Ir=r(80983),Er=r(61606),wr=r(35975),Cr=r(89115),Mr=r(36522);const Dr=(0,o.P1)(Mr.Z,(e=>e.metadataLists));var Or=r(5518),Tr=r(72147),xr=r(93644),Ar=r(78557);const kr=(0,o.P1)((0,oe.Z)("sidebarSettings"),(e=>e)),Nr=(0,o.P1)(kr,(e=>e.pinnedSources)),Rr=(0,o.P1)(Nr,(e=>e.filter((e=>!e.isHidden))));var Lr=r(78113);const jr={type:Ot.zW.ContinueWatching,key:Tr.O},Vr=(0,o.P1)(Lr.Z,(e=>e.map((({server:e,provider:t})=>{var r,n;return{machineIdentifier:e.machineIdentifier,providerIdentifier:t.identifier,directoryID:(null==(n=null==(r=(0,xr.Z)(t,Ot.zW.Content))?void 0:r.directories)?void 0:n[0].id)||"home",isHidden:!1}})))),Ur=(0,o.P1)(Rr,Vr,Ar.Z,Nt.Z,(0,qe.Z)(Ue.eT),Rt.Z,((e,t,r,n,i,s)=>{const a=[],o=[],l={},c={},d=e.reduce(((e,r)=>{const n=Mt.wB(r.providerIdentifier,Mt.vP),i=Mt.wB(r.providerIdentifier,Mt.Ll);return s&&(n||i)?n&&Mt.yv(r.providerIdentifier)?e.concat(t):e:e.concat(r)}),[]);for(let e=0;e<d.length;e++){const{machineIdentifier:t,providerIdentifier:r,directoryID:n}=d[e],i=(0,z.Z)({serverIdentifier:t,providerIdentifier:r});c[i]||(c[i]=[]),c[i].push(n)}for(let e=0;e<d.length;e++){const{machineIdentifier:t,providerIdentifier:s,directoryID:u}=d[e],p=(0,z.Z)({serverIdentifier:t,providerIdentifier:s}),m=r.find((e=>e.machineIdentifier===t)),h=m?(0,Or.q)({identifier:s,serverEntityID:m.entityID}):void 0,g=h?n[h]:void 0,y=`${p}/continueWatching`,v=`${p}/${u}/promoted`;let f=g?(0,xr.Z)(g,Ot.zW.ContinueWatching):void 0;!i&&Mt.wB(null==g?void 0:g.identifier,Mt.Y3)&&(f=jr);const b=g?(0,xr.Z)(g,Ot.zW.Promoted):void 0;(null==g?void 0:g.isPopulated)&&!f||l[p]||(l[p]=!0,a.push({key:y,source:p,contentDirectoryID:c[p],server:m,provider:g,feature:f})),(null==g?void 0:g.isPopulated)&&!b||o.push({key:v,source:p,contentDirectoryID:[u],pinnedContentDirectoryID:c[p],server:m,provider:g,feature:b})}return a.concat(o)})),Fr=(0,o.P1)(Ur,(e=>e.filter((e=>{var t;return null!=e.server&&null!=e.provider&&(null==(t=e.feature)?void 0:t.type)===Ot.zW.ContinueWatching}))));var Br=r(18585);const _r=(0,o.P1)(Br.Z,(e=>e.home)),zr=(0,o.P1)(_r,(e=>e.hubsListsByKey)),Hr=(0,o.P1)(Fr,zr,Dr,Cr.Z,((e,t,r,n)=>{const i={};for(let s=0,a=e.length;s<a;s++){const a=e[s],o=t[a.key];if(!(null==o?void 0:o.isPopulated))continue;const l=o.hubs.find((({hubIdentifier:e})=>e!==wr.F.OnDeck));if(!l)continue;const c=r[l.sourceURI],d=c.items.map((({sourceURI:e})=>n[e]));i[a.source]={hubsSource:a,hub:l,metadataList:c,metadataListItemState:d}}return i})),Wr=(0,o.P1)(Hr,(e=>{const t=Object.values(e).reduce(((e,{metadataList:t,metadataListItemState:r})=>e.concat(t.items.reduce(((e,t,n)=>{const i=r[n];return i&&e.push({metadataItem:t,metadataItemState:i}),e}),[]))),[]);return t.sort(((e,t)=>{var r,n,i,s;const a=e.metadataItem,o=t.metadataItem,l=e.metadataItemState,c=t.metadataItemState,d=null!=(n=null!=(r=null==a?void 0:a.includedAt)?r:null==l?void 0:l.lastViewedAt)?n:0;return(null!=(s=null!=(i=null==o?void 0:o.includedAt)?i:null==c?void 0:c.lastViewedAt)?s:0)-d})),t.map((({metadataItem:t})=>{const{hubsSource:r,hub:n}=e[t.source];return{listItemKey:t.sourceURI,hub:n,hubsSource:r,metadataItem:t}}))})),Gr=(0,o.P1)(Hr,(e=>Object.values(e).filter((e=>{const{hub:t}=e;return t.isStale}))));var Qr=Object.defineProperty,$r=Object.defineProperties,Kr=Object.getOwnPropertyDescriptors,qr=Object.getOwnPropertySymbols,Yr=Object.prototype.hasOwnProperty,Xr=Object.prototype.propertyIsEnumerable,Jr=(e,t,r)=>t in e?Qr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function en(){return i.createElement(Pr.Z,null,(0,Se.Z)("Continue Watching"))}const tn=(0,i.memo)((function({metricsRow:e=0}){const t=(0,s.I0)(),r=(0,s.v9)(Wr),n=(0,s.v9)(Gr),a=(0,i.useMemo)((()=>(0,yr.Z)(r)),[r]),o=(0,i.useMemo)((()=>[{imageType:vr.IY.CoverPoster,type:Zr.U.Mixed}]),[]),l=(0,s.v9)(Er.Z),c=(0,i.useMemo)((()=>r.reduce(((e,t)=>{var r,n,i;return Math.max(e,null!=(i=null==(n=null==(r=t.hub.Meta)?void 0:r.DisplayFields)?void 0:n.reduce(((e,{fields:t})=>Math.max(e,t.length)),0))?i:0)}),0)),[r]),d=(0,i.useMemo)((()=>(0,Sr.Z)({listType:Zr.U.Mixed,listStyle:Zr.n.List,columnWidth:l,titleCount:c})),[l,c]);(0,i.useEffect)((()=>{n.forEach((({hub:e,hubsSource:r})=>{t(br.Z.actions.throttledRepopulateRequested({server:r.server,provider:r.provider,sourceURI:e.sourceURI}))}))}),[t,n]);const u=(0,i.useMemo)((()=>t=>{var r,n,s;if(!t.item)return i.createElement(i.Fragment,null);const{metadataItem:a,hub:l,hubsSource:c}=t.item;return i.createElement(Z.ZP,{key:t.key,column:t.cellIndex,name:l.context,row:e},i.createElement(O.ZP,{machineIdentifier:null==(r=c.server)?void 0:r.machineIdentifier,providerIdentifier:null==(n=c.provider)?void 0:n.identifier},i.createElement(ne.ZP,{containerKey:l.key,containerMeta:{DisplayFields:null==(s=l.Meta)?void 0:s.DisplayFields,DisplayImage:o},containerProvider:c.provider,containerServer:c.server,containerSourceURI:l.sourceURI,containerType:Zr.U.Mixed,listStyle:Zr.n.Hero},i.createElement(fr.Z,(d=((e,t)=>{for(var r in t||(t={}))Yr.call(t,r)&&Jr(e,r,t[r]);if(qr)for(var r of qr(t))Xr.call(t,r)&&Jr(e,r,t[r]);return e})({},t),$r(d,Kr({item:a})))))));var d}),[o,e]);return i.createElement(Ir.Z,{cellComponentFactory:u,hub:a,hubTitleComponent:en,items:r,keyPropName:"listItemKey",layout:d,totalSize:r.length})}));var rn=r(3395),nn=r(72188),sn=r(33434),an=Object.defineProperty,on=Object.defineProperties,ln=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertySymbols,dn=Object.prototype.hasOwnProperty,un=Object.prototype.propertyIsEnumerable,pn=(e,t,r)=>t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const mn=(0,sn.Z)((e=>(0,o.P1)(zr,(0,qe.Z)(Ue.eT),((t,r)=>{const n=t[e];return i=((e,t)=>{for(var r in t||(t={}))dn.call(t,r)&&pn(e,r,t[r]);if(cn)for(var r of cn(t))un.call(t,r)&&pn(e,r,t[r]);return e})({},n),s={hubs:r?n.hubs.filter((e=>e.hubIdentifier!==wr.F.VodContinueWatching&&e.hubIdentifier!==wr.F.MergedContinueWatching&&e.hubIdentifier!==wr.F.ContinueWatching)):n.hubs},on(i,ln(s));var i,s}))));var hn=r(87242),gn=Object.defineProperty,yn=Object.defineProperties,vn=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertySymbols,bn=Object.prototype.hasOwnProperty,Zn=Object.prototype.propertyIsEnumerable,Sn=(e,t,r)=>t in e?gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pn=(e,t)=>{for(var r in t||(t={}))bn.call(t,r)&&Sn(e,r,t[r]);if(fn)for(var r of fn(t))Zn.call(t,r)&&Sn(e,r,t[r]);return e},In=(e,t)=>yn(e,vn(t));const En={key:"",contentDirectoryID:[],isPending:!1,isSourceReady:!1,isSourceMissing:!1,isSourceUnavailable:!1,isSourceError:!1,isListPending:!1,isListPopulated:!1,isListEmpty:!1,isListError:!1},wn=(0,o.P1)((e=>e.isWaitingForServers),(e=>e.user.isProvidersPopulated),(e=>e.user.providersError),_r,Ur,((e,t,r,n,i)=>i.map((({key:i,server:s,provider:a})=>{if(!s)return In(Pn({},En),{key:i,isPending:e,isSourceMissing:!0});const o=In(Pn({},En),{key:i});if(o.isSourceUnavailable=s.isUnavailable,o.isSourceError=s.isUnauthorized||!!(null==a?void 0:a.error),a){o.isSourceReady=s.isConnected&&a.isPopulated;const e=n.hubsListsByKey[i];e?(o.contentDirectoryID=Array.from(e.contentDirectoryID),e.pinnedContentDirectoryID&&(o.pinnedContentDirectoryID=Array.from(e.pinnedContentDirectoryID)),o.isPending=o.isSourceReady&&!e.isPopulated&&!e.error,o.isListPending=e.isPending,o.isListPopulated=e.isPopulated,o.isListError=!!e.error,o.isListEmpty=e.isPopulated&&(!e.hubs.length||e.hubs.every((e=>!e.initialSize&&!e.more)))):o.isPending=!o.isSourceUnavailable&&!o.isSourceError}else o.isSourceMissing=!0,s.isConnected?o.isPending=!!s.isCloud&&!t&&!r:o.isPending=!s.isUnavailable&&!s.isUnauthorized;return o})))),Cn=(0,o.P1)(wn,(e=>{const t=[];let r=0;for(;e[r];){const n=e[r];if(n.isPending)break;n.isListPopulated&&!n.isListEmpty&&t.push(n.key),r++}return t})),Mn=(0,hn.Z)(Cn,(e=>e)),Dn=[wr.F.ContinueWatching,wr.F.VodContinueWatching,wr.F.MergedContinueWatching],On=(0,sn.Z)((function(e,t){return(0,o.P1)(zr,Mn,(0,qe.Z)(Ue.eT),((r,n,i)=>{const s=n.indexOf(e);return n.slice(0,-1===s?n.length:s).reduce(((e,t)=>r[t].hubs.reduce(((e,{initialSize:t,more:r,hubIdentifier:n})=>i&&Dn.includes(n)?e:e+(t||r?1:0)),e)),t)}))}));var Tn=r(93055),xn=r(51662),An=r(62376);const kn=(0,o.P1)(Ur,(e=>{const t={},r=e.reduce(((e,{server:r})=>{if(!r||t[r.machineIdentifier])return e;const{machineIdentifier:n,sourceTitle:i,isFullOwnedServer:s}=r;return t[n]=!0,s?e.numOwnedServers++:i&&(e.numSharedServers++,e.byOwner[i]?e.byOwner[i]++:e.byOwner[i]=1),e}),{numSharedServers:0,numOwnedServers:0,byOwner:{}});return e.reduce(((e,{source:t,server:n,provider:i})=>{if(!n)return e;const{friendlyName:s,sourceTitle:a,isCloud:o,isFullOwnedServer:l}=n;return o&&i?i.sourceTitle&&(r.numOwnedServers||r.numSharedServers)?e[t]=`${i.title} (${i.sourceTitle})`:e[t]=i.title:a&&(r.numOwnedServers||r.numSharedServers>1)?1===r.byOwner[a]?e[t]=a:e[t]=`${a} (${s})`:l&&r.numOwnedServers>1&&(e[t]=s),e}),{})})),Nn=(0,hn.Z)(kn,(e=>e)),Rn=(0,sn.Z)((e=>(0,o.P1)(Nn,(t=>t[e]))));function Ln({children:e,hub:t}){const{metricsContextTuple:r}=(0,Z.Zn)(),n=(0,s.v9)(Rn(t.source)),a=(0,Tn.Z)(t.source,{key:t.key,title:t.title,pageType:Ot.F6.List,context:(0,Z.VJ)(r)});return i.createElement(xn.Z,{hub:t},i.createElement(An.Z,{to:a},e),n?i.createElement("span",{className:"HomeHubTitle-sourceTitle-zWUczK"},i.createElement(G.Z,null),n):null)}const jn=(0,i.memo)((function({hubsSource:e,metricsRowOffset:t}){var r,n;const a=(0,s.v9)(mn(e.key)),o=(0,s.v9)(On(e.key,t));return e.server&&e.provider?i.createElement(O.ZP,{key:e.key,machineIdentifier:null==(r=e.server)?void 0:r.machineIdentifier,providerIdentifier:null==(n=e.provider)?void 0:n.identifier},i.createElement(nn.Z,{hubComponent:rn.Z,hubTitleComponent:Ln,hubs:a.hubs,metricsRowOffset:o})):null}));var Vn=r(17282),Un=r(54768),Fn=r(90792),Bn=r(71302),_n=r(36103),zn=r(71899),Hn=r(90106),Wn=r(96436);function Gn({selectedPivot:e}){const t=(0,s.v9)(Wn.Z),r=(0,s.v9)((0,_n.Z)(Dt.X,Mt._,M.u)),n=null==r?void 0:r.pivots;return t?i.createElement(Hn.Z,null):i.createElement(R.Z,null,i.createElement(Un.Z,null,i.createElement(Vn.Z,null,(0,Se.Z)("Home"))),n&&e?i.createElement(O.ZP,{contentDirectoryID:M.u,machineIdentifier:Dt.X,providerIdentifier:Mt._},i.createElement(zn.Z,{pivots:n,selectedPivot:e})):null,i.createElement(Fn.Z,null,i.createElement(Bn.Z,{listStyles:[Zr.n.Grid],selectedListStyle:Zr.n.Grid})))}var Qn=r(96039),$n=r(55319),Kn=r(72735);const qn=e=>e.ui.watchTogether,Yn=(0,o.P1)(Kn.Z,qn,((e,t)=>t.rooms.map((t=>e[t]))));var Xn=r(8089),Jn=r(21860),ei=r(61505),ti=r(88063),ri=r(16975),ni=r(97797);var ii=r(30727),si=r(10125),ai=r(98476),oi=r(83782),li=r(64341),ci=r(9171),di=r(5747),ui=r(4538),pi=r(33296),mi=r(68805),hi=r(28247),gi=r(94788);const yi=(0,o.P1)(qn,(e=>!!e.session));var vi=r(75203),fi=r(86655),bi=r(87221),Zi=r(34721);function Si({isOpen:e,title:t,errorMessage:r,metricsPage:n,onModalClose:s}){return i.createElement(Z.ZP,{metricsPage:n},i.createElement(vi.Z,{isOpen:e,size:hr.Z.Small,onModalClose:s},i.createElement(bi.Z,{onModalClose:s},i.createElement(Zi.Z,{className:"WatchTogetherRoomErrorModal-modalHeader-QO4JxS ModalHeader-modalHeader-nb9ueN"},t),i.createElement(fi.Z,null,r))))}function Pi({className:e="WatchTogetherHubItemPosterCard-card-vcbHYk PosterCard-card-BRB1k_",watchTogetherRoom:t,metadataItem:r,width:n,height:a,aspectRatio:o}){const[l,c]=(0,O.c9)(),d=(0,s.I0)(),p=(0,$n.Z)(),m=(0,s.v9)(yi),[h,g]=(0,hi.Z)(),{isOpen:y,onClose:v,onToggle:f}=(0,$n.Z)(),b=(0,oi.Z)(),{entityID:Z,title:S,metadataItemError:P}=t,I=y||h,E=(0,ci.Z)({server:l,provider:c,width:n,height:a,url:r?(0,li.Z)(r,{aspectRatio:o}):void 0}),w=(0,i.useCallback)((()=>{P?p.onOpen():d(Qn.ib({watchTogetherRoomEntityID:Z}))}),[d,Z,P,p]),C=(0,i.useCallback)((()=>{w(),v()}),[w,v]),M=(0,i.useCallback)((()=>{d(or.GX({watchTogetherRoomEntityID:Z})),v()}),[d,Z,v]),D=(0,i.useCallback)((()=>{p.onClose()}),[p]);return i.createElement(ui.Z,{ref:g,className:e,style:{width:n,height:a}},r?i.createElement(gi.Z,{className:"WatchTogetherHubItemPosterCard-image-YfpwDn",height:a,src:E,width:n}):i.createElement(pi.Z,{className:"WatchTogetherHubItemPosterCard-iconContainer-vfahiZ PosterCardIcon-container-ZQcJrO",height:a,width:n},i.createElement(ii.Z,null)),i.createElement(mi.Z,{"aria-label":S,className:"WatchTogetherHubItemPosterCard-link-L73ErH PosterCardLink-link-LozvMm Link-link-vSsQW1",hoverClassName:"WatchTogetherHubItemPosterCard-hoveredLink-GoVdZm PosterCardLink-hoveredLink-H5OMFC PosterCardLink-link-LozvMm Link-link-vSsQW1",isHovered:h||y,onPress:w}),i.createElement(di.Z,{className:I?"WatchTogetherHubItemPosterCard-moreButton-_FWBLX MetadataPosterCardActions-moreButton-kNJ7sJ MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1":"WatchTogetherHubItemPosterCard-hiddenMoreButton-Ic41FB WatchTogetherHubItemPosterCard-moreButton-_FWBLX MetadataPosterCardActions-moreButton-kNJ7sJ MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1 MetadataPosterCardActions-isHidden-TxYAU9",id:b,isPending:!1,onPress:f}),i.createElement(si.Z,{isOpen:y,target:b,onMenuClose:v},i.createElement(ai.Z,{"aria-label":(0,Se.Z)("Join"),isDisabled:m||p.isOpen,onPress:C},(0,Se.Z)("Join")),i.createElement(ai.Z,{"aria-label":(0,Se.Z)("Remove"),isDisabled:p.isOpen,onPress:M},(0,Se.Z)("Remove"))),i.createElement(Si,{errorMessage:P,isOpen:p.isOpen,metricsPage:u.Gc,title:(0,Se.Z)("Cannot access this item"),onModalClose:D}))}const Ii="WatchTogetherHubItem-card-oKXZjM WatchTogetherHubItemPosterCard-card-vcbHYk PosterCard-card-BRB1k_",Ei="WatchTogetherHubItem-secondaryTitle-OPeK7j WatchTogetherHubItem-title-OHsVIc MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu MetadataPosterCardTitle-isSecondary-gGuBpd";var wi=Object.getOwnPropertySymbols,Ci=Object.prototype.hasOwnProperty,Mi=Object.prototype.propertyIsEnumerable;const Di=re.oz;function Oi(e){var t=e,{item:r}=t,n=((e,t)=>{var r={};for(var n in e)Ci.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&wi)for(var n of wi(e))t.indexOf(n)<0&&Mi.call(e,n)&&(r[n]=e[n]);return r})(t,["item"]);const a=(0,s.I0)(),l=(0,ri.Z)(n),c=(0,s.v9)((m=null==r?void 0:r.metadataItem,(0,o.P1)(ni.Z,(e=>m?e[m]:void 0)))),d=(0,i.useMemo)((()=>(0,ti.Z)({width:n.cellWidth,aspectRatio:Di})),[n.cellWidth]),u=(0,i.useMemo)((()=>r?(0,Jn.Z)(r.users.map((e=>e.title))):""),[r]),p=(0,i.useMemo)((()=>(null==c?void 0:c.source)?(0,Xn.Z)(c.source):null),[null==c?void 0:c.source]);var m;return(0,i.useEffect)((()=>{!r||r.isMetadataItemPopulated||r.metadataItemError||a((0,or.TN)({watchTogetherRoomEntityID:r.entityID}))}),[a,r]),!r||(null==r?void 0:r.isMetadataItemPending)?i.createElement("div",{ref:l.cellRef,style:l.style},i.createElement(ei.Z,{className:Ii,index:n.cellIndex,style:d})):(null==r?void 0:r.isMetadataItemPopulated)&&c&&p?i.createElement(O.ZP,{machineIdentifier:p.serverIdentifier,providerIdentifier:p.providerIdentifier},i.createElement("div",{ref:l.cellRef,style:l.style},i.createElement(Pi,{aspectRatio:Di,className:Ii,height:d.height,metadataItem:c,watchTogetherRoom:r,width:d.width}),i.createElement("div",{className:"WatchTogetherHubItem-title-OHsVIc MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu",title:r.title},r.title),i.createElement("div",{className:Ei,title:u},u))):i.createElement("div",{style:l.style},i.createElement(Pi,{aspectRatio:Di,className:Ii,height:d.height,watchTogetherRoom:r,width:d.width}),i.createElement("div",{className:"WatchTogetherHubItem-splitTitleContainer-vNlYlo"},i.createElement("span",{className:"WatchTogetherHubItem-splitLineTitle-KvuClY WatchTogetherHubItem-title-OHsVIc MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu",title:r.title},r.title),i.createElement("span",{className:"WatchTogetherHubItem-splitLineSecondaryTitle-UcnzvS WatchTogetherHubItem-secondaryTitle-OPeK7j WatchTogetherHubItem-title-OHsVIc MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu MetadataPosterCardTitle-isSecondary-gGuBpd WatchTogetherHubItem-splitLineTitle-KvuClY WatchTogetherHubItem-title-OHsVIc MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu",title:(0,Se.Z)("No Access")},(0,Se.Z)("No Access"))),i.createElement("div",{className:Ei,title:u},u))}function Ti(){return i.createElement(xn.Z,{hub:{attribution:wr.S.WatchTogether}},(0,Se.Z)("Watch Together"))}var xi=Object.defineProperty,Ai=Object.getOwnPropertySymbols,ki=Object.prototype.hasOwnProperty,Ni=Object.prototype.propertyIsEnumerable,Ri=(e,t,r)=>t in e?xi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Li=(e,t)=>{for(var r in t||(t={}))ki.call(t,r)&&Ri(e,r,t[r]);if(Ai)for(var r of Ai(t))Ni.call(t,r)&&Ri(e,r,t[r]);return e};const ji={source:"watchTogether",sourceURI:"watch-together"};function Vi({hubLayoutOptions:e,className:t,hubHeaderClassName:r}){const n=(0,s.I0)(),a=(0,s.v9)(qn),o=(0,s.v9)(Yn),l=(0,s.v9)(Er.Z),c=(0,$n.Z)(),{sessionError:d}=a,p=(0,i.useMemo)((()=>(0,Sr.Z)(Li({listType:Zr.U.Mixed,listStyle:Zr.n.Hero,columnWidth:l,titleCount:2},e))),[l,e]),m=(0,i.useCallback)((()=>{n(Qn.j3())}),[n]);(0,i.useEffect)((()=>{d?c.onOpen():c.isOpen&&c.onClose()}),[c,d]);const h=(0,i.useCallback)((e=>i.createElement(Oi,Li({},e))),[]);return i.createElement(i.Fragment,null,i.createElement(Ir.Z,{cellComponentFactory:h,className:t,hub:ji,hubHeaderClassName:r,hubTitleComponent:Ti,items:o,keyPropName:"id",layout:p,totalSize:o.length}),i.createElement(Si,{errorMessage:d,isOpen:c.isOpen,metricsPage:u.Gc,title:(0,Se.Z)("Watch Together session error"),onModalClose:m}))}var Ui=r(11364);const Fi=(0,o.P1)((0,qe.Z)(Ue.eT),Wr,((e,t)=>e&&!!t.length));var Bi=r(39485);const _i=(0,o.P1)(Ar.Z,Bi.Z,((e,t)=>e.some((e=>!e.isCloud&&!e.isUnauthorized))||t.some((e=>e.features.find((e=>e.type===Ot.zW.Content)))))),zi=(0,o.P1)(Yn,(e=>!!e.length)),Hi=(0,o.P1)(_r,(e=>e.lastFetchedAt));var Wi=r(9423);const Gi=(0,o.P1)(Ur,wn,(0,oe.Z)("sidebarSettings"),(e=>e.ui.watchTogether.isRoomsPending),(e=>e.ui.watchTogether.rooms.length>0),(0,qe.Z)(Ue.eT),((e,t,r,n,i,s)=>function(e,t,r,n=!1,i=!1,s=!1){var a;if((0,Wi.Z)(e.length===t.length,"hubsSources and hubsStates have differing length"),!r.hasCompletedSetup)return{isPending:!0};let o=0;const l=t.length;if(s)for(let r=0;r<l;r++){const n=t[r];if((null==(a=e[r].feature)?void 0:a.type)!==Ot.zW.ContinueWatching){o=r;break}if(!(n.isListPopulated||n.isListEmpty||n.isListError||n.isSourceUnavailable))return{isPending:!0}}for(let e=o;e<l;e++){const r=t[e];if(r.isListPopulated&&!r.isListEmpty)return{isPopulated:!0};if(r.isPending)return{isPending:!0}}return n?{isPending:!0}:i?{isPopulated:!0}:t.length?t.every((e=>e.isListEmpty))?{isEmpty:!0}:t.some((e=>e.isSourceUnavailable))?{isUnavailable:!0}:{isError:!0}:{hasNoPinnedSources:!0}}(e,t,r,n,i,s)));function Qi(e){return!!e&&e<=Date.now()-864e5}const $i=(0,o.P1)(ir(),(e=>e.reduce(((e,t)=>(!0===t.isCloud?e.cloudSources++:e.pmsSources++,e)),{cloudSources:0,pmsSources:0})));function Ki({selectedPivot:e}){const t=(0,s.I0)(),r=(0,s.v9)(Ur),n=(0,s.v9)(wn),a=(0,s.v9)($i),o=(0,s.v9)(Mn),l=(0,s.v9)(Hi),c=(0,s.v9)(sr.Z),d=(0,s.v9)(gr),u=(0,s.v9)(_i),p=(0,s.v9)(zi),m=(0,s.v9)(Fi);let h=0;p&&h++,m&&h++;const{isPending:g,isPopulated:y,isUnavailable:v,isError:f,isEmpty:b,hasNoPinnedSources:Z}=(0,s.v9)(Gi);return(0,cr.Z)({mode:dr.Auto,pinnedPMSSources:a.pmsSources,pinnedProviderSources:a.cloudSources},!g),(0,i.useEffect)((()=>{Qi(l)&&t(Ui.Z.actions.reset())}),[t,l]),(0,i.useEffect)((()=>{t(Ui.Z.actions.populateAllRequested({hubsSources:r,hubsStates:n,userServices:d}))}),[t,r,n,d]),(0,i.useEffect)((()=>()=>{t(Ui.Z.actions.markStaleRequested())}),[t]),(0,i.useEffect)((()=>{const e=()=>{"visible"===document.visibilityState&&Qi(l)&&t(Ui.Z.actions.reset())};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[t,l]),(0,i.useEffect)((()=>{t((0,or.Z7)())}),[t]),i.createElement(i.Fragment,null,i.createElement(Gn,{selectedPivot:e}),g?i.createElement(I.Z,null,i.createElement(E.Z,null)):null,y?i.createElement(ur.Z,{className:"HomePageRecommendedContent-homePageRecommendedContentScroller-XOtnfK PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko"},p?i.createElement(Vi,null):null,m?i.createElement(tn,{metricsRow:p?1:0}):null,r.map((e=>o.includes(e.key)?i.createElement(jn,{key:e.key,hubsSource:e,metricsRowOffset:h}):null))):null,v?i.createElement(pr.Z,{description:(0,Se.Z)("Check your network connection and verify that any media servers are online."),title:(0,Se.Z)("No content available")}):null,f?i.createElement(pr.Z,{description:(0,Se.Z)("There was an error loading your home screen. Please try again in a few minutes."),title:(0,Se.Z)("Something went wrong")}):null,b&&!c?i.createElement(I.Z,{description:(0,Se.Z)("There's no content to display based on your currently pinned sources. You can always pin additional sources to your sidebar."),iconSrc:String(At),title:(0,Se.Z)("Your home screen is currently empty")}):null,b&&c?i.createElement(I.Z,{description:(0,Se.Z)("Kindly ask the Plex Home admin to share content with you."),iconSrc:String(At),title:(0,Se.Z)("No content available")}):null,Z&&u?i.createElement(I.Z,{description:(0,Se.Z)("Your home screen is based on sources pinned to your sidebar. Choose a source from the More menu and pin it to see its content here."),iconSrc:String(At),title:(0,Se.Z)("Your home screen is empty")}):null,!Z||u||c?null:i.createElement(I.Z,{description:(0,Se.Z)("Organize, beautify, stream, and share your personal collection of movies, TV, music, and photos anywhere, on all your devices. To get started, download our free Plex Media Server software on the device where you store your media."),iconSrc:String(At),title:(0,Se.Z)("Add your media to Plex")},i.createElement(lr.Z,{kind:mr.Z.Primary,size:hr.Z.Large,target:"_self",to:ar._N},(0,Se.Z)("Get Plex Media Server"))),Z&&!u&&c?i.createElement(I.Z,{description:(0,Se.Z)("Kindly ask the Plex Home admin to share content with you."),iconSrc:String(At),title:(0,Se.Z)("No content available")}):null)}var qi=r(97212),Yi=r(80476);const Xi="/library/sections/watchlist/all";function Ji({selectedPivot:e}){const t=(0,b.Z)(),r=t.key?(0,qi.Z)(t.key):Xi,n=(0,z.Z)({serverIdentifier:Dt.X,providerIdentifier:Mt.IS,key:Xi});return i.createElement(Z.ZP,{name:d.WATCHLIST},i.createElement(O.ZP,{machineIdentifier:Dt.X,providerIdentifier:Mt.IS},i.createElement(Gn,{selectedPivot:e}),i.createElement(Yi.Z,{directoryKey:r,directorySourceURI:n,selectedPivot:e})))}var es=r(79115);function ts(){const e=(0,b.Z)(),t=(0,es.Z)(e.pivot),r=(0,xt.Z)({machineIdentifier:Dt.X,providerIdentifier:Mt._,contentDirectoryID:M.u,pageType:void 0,pivotID:t,ignoreShouldSaveLastSourcePivotsSetting:!0});return i.createElement(S.Z,{scrollDirection:Tt.I.None},r&&r.key!==Ot.GG.HomeRecommended?null:i.createElement(Ki,{selectedPivot:r}),(null==r?void 0:r.key)===Ot.GG.HomeWatchlist?i.createElement(Ji,{selectedPivot:r}):null)}function rs({children:e}){return i.createElement("div",{className:"PlayerContainer-container-DtCwJl"},e)}var ns=r(83073),is=r(37703),ss=r(75404),as=r(55097),os=r(89850),ls=r(94470),cs=r(181),ds=r(65127),us=r(83836),ps=r(20896),ms=r(783),hs=r(78535),gs=r(48964),ys=r(48685),vs=r(30924),fs=r(53843),bs=r(57053),Zs=r(51387);const Ss=new RegExp("({.*})[^}]*$","g");var Ps=r(3021),Is=r(31281),Es=r(1608),ws=r(62365),Cs=r(85796),Ms=r(35419);const Ds="EditProfile-input-dFFj1F";var Os=Object.defineProperty,Ts=Object.defineProperties,xs=Object.getOwnPropertyDescriptors,As=Object.getOwnPropertySymbols,ks=Object.prototype.hasOwnProperty,Ns=Object.prototype.propertyIsEnumerable,Rs=(e,t,r)=>t in e?Os(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ls=(e,t)=>{for(var r in t||(t={}))ks.call(t,r)&&Rs(e,r,t[r]);if(As)for(var r of As(t))Ns.call(t,r)&&Rs(e,r,t[r]);return e};const js=180;function Vs(){const e=(0,s.I0)(),t=(0,ps.Z)(),r=(0,s.v9)(cs.Z),n=(0,is.b)(),a=(0,s.v9)((0,qe.Z)(Ue.hq)),{error:o,isPending:l,isPopulated:c,isUpdating:d,details:{uuid:u,email:p,thumb:m,friendlyName:h,username:g,plexPass:y}}=(0,s.v9)(ms.Z),{privacy:v,isPopulated:f}=(0,bs.Z)(),[b,{isLoading:Z}]=(0,Ms.pV)(),{details:P,isPopulated:w}=(0,fs.Z)(u),[C,{isLoading:M,data:D,error:O,reset:T}]=(0,Ms.LF)(),[x,A]=(0,i.useState)(),[k,L]=(0,i.useState)(),j=(0,s.v9)((0,oe.Z)("dismissProfileGetStartedCard")),[V,U]=(0,i.useState)({isPhotoOpen:!1,isFullNameOpen:!1,isLocationOpen:!1,isBioOpen:!1,isLinkOpen:!1,isBadgesOpen:!1}),[F,_]=(0,i.useState)();(0,cr.Z)(),(0,i.useEffect)((()=>{v&&L({createdAt:v.createdAt===Ms._B.Friends,plexPass:v.plexPass===Ms._B.Friends})}),[v]),(0,i.useEffect)((()=>{j||e((0,bt.LN)({dismissProfileGetStartedCard:!0}))}),[j,e]),(0,i.useEffect)((()=>{A({bio:null==P?void 0:P.bio,location:null==P?void 0:P.location,url:null==P?void 0:P.url})}),[null==P?void 0:P.bio,null==P?void 0:P.location,null==P?void 0:P.url]),(0,i.useEffect)((()=>{D&&A({bio:D.updateUserProfile.bio,location:D.updateUserProfile.location,url:D.updateUserProfile.url})}),[D]),(0,i.useEffect)((()=>{o&&_((0,gs.Z)(o)),(null==O?void 0:O.message)&&_(function(e){var t;const r=e.match(Ss),n=r&&r.length>0?JSON.parse(r[0]):void 0;return null!=(t=null==n?void 0:n.response.errors[0].message)?t:""}(O.message))}),[O,D,o]),(0,i.useEffect)((()=>{l||c||F||e(hs.Z.actions.fetchUserDetails({server:r}))}),[e,l,c,r,F]),(0,i.useEffect)((()=>{d||M||Z||O||o||U({isPhotoOpen:!1,isFullNameOpen:!1,isBioOpen:!1,isLinkOpen:!1,isLocationOpen:!1,isBadgesOpen:!1})}),[d,O,M,o,Z]);const z=(0,i.useCallback)((()=>{_(""),T(),e(hs.Z.actions.clearError())}),[e,T]),H=(0,i.useCallback)((t=>{e(hs.Z.actions.updateUserDetails({server:r,update:t}))}),[e,r]),W=(0,i.useCallback)((e=>{t({action:ss.DZ}),H(e)}),[H,t]),G=(0,i.useCallback)((e=>{var r,n;t({action:ss.rm}),H((r=Ls({},e),n={friendlyName:e.friendlyName.trim()},Ts(r,xs(n))))}),[H,t]),Q=(0,i.useCallback)((({plexPassBadge:e,joinedPlexBadge:t})=>{const r=e?Ms._B.Friends:Ms._B.Private,n=t?Ms._B.Friends:Ms._B.Private;b({input:{createdAt:n,plexPass:r}}),L({createdAt:t,plexPass:e})}),[b]),$=(0,i.useCallback)((e=>{C({input:{location:e.location}})}),[C]),K=(0,i.useCallback)((e=>{C({input:{bio:e.bio}})}),[C]),q=(0,i.useCallback)((e=>{C({input:{url:e.url}})}),[C]),Y=(0,i.useCallback)((()=>{t({action:ss.OY}),(0,N.Z)("account")}),[t]),X=(0,i.useMemo)((()=>e=>()=>{F&&z(),U((t=>function(e,t){return e[t]=!e[t],Object.keys(e).map((r=>{r!==t&&(e[r]=!1)})),Ls({},e)}(t,e)))}),[F,z]);if(!c||!w||!f||!x&&P)return i.createElement(I.Z,null,i.createElement(E.Z,null));if(!x)return i.createElement(ws.Z,null);const{location:J,bio:ee,url:te}=x,re=y?(0,Se.Z)("Display badges for Plex Pass and Plex joined date"):(0,Se.Z)("Display badge for Plex joined date");return i.createElement(S.Z,null,i.createElement(R.Z,null,i.createElement(ys.Z,{editing:!0,subtitle:{title:h||g},title:{href:(0,Is.Z)("profile"),title:(0,Se.Z)("My Profile")}})),i.createElement(vs.Z,null,i.createElement(Cs.Z,{className:Ds,closedNode:i.createElement(us.Z,{server:r,size:150,url:m}),errorMessage:F,isOpen:V.isPhotoOpen,isUpdating:d,title:(0,Se.Z)("Profile Image"),onSubmit:W,onTogglePress:X("isPhotoOpen")},i.createElement(ds.Z,null,(0,Se.Z)("Profile Image")),i.createElement(Es.Z,{height:js,initialValue:(0,Zs.Z)(m,js),name:"avatar",serverEntityID:r.entityID,url:(0,Zs.Z)(m,js),width:js})),i.createElement(Cs.Z,{className:Ds,closedNode:g===p?(0,Se.Z)("Not set"):g,editLabel:(0,Se.Z)("Go to Account Settings"),title:(0,Se.Z)("Username"),onTogglePress:Y}),i.createElement(Cs.Z,{className:Ds,closedNode:h||(0,Se.Z)("Not set"),errorMessage:F,isOpen:V.isFullNameOpen,isUpdating:d,title:(0,Se.Z)("Full Name"),onSubmit:G,onTogglePress:X("isFullNameOpen")},i.createElement(os.Z,{autoComplete:"off",errors:void 0,helpText:(0,Se.Z)("Help people identify your account by using the name that youre best known by: either your full name or nickname."),initialValue:h||"",labelText:(0,Se.Z)("Full name"),name:"friendlyName",validations:[ls.v4]})),a?i.createElement(i.Fragment,null,i.createElement(Cs.Z,{className:Ds,closedNode:(0,Se.Z)("Manage who can see your activity"),editLabel:(0,Se.Z)("Edit"),title:(0,Se.Z)("Privacy Settings"),onTogglePress:n.onOpen}),i.createElement(Cs.Z,{className:Ds,closedNode:(null==k?void 0:k.createdAt)||(null==k?void 0:k.plexPass)?(0,Se.Z)("Displaying - {badges}",{badges:[(null==k?void 0:k.createdAt)?(0,Se.Z)("Joined Date"):void 0,y&&(null==k?void 0:k.plexPass)?(0,Se.Z)("Plex Pass"):void 0].filter(Boolean).join(", ")}):re,errorMessage:F,isOpen:V.isBadgesOpen,isUpdating:Z,title:(0,Se.Z)("Badges"),onSubmit:Q,onTogglePress:X("isBadgesOpen")},i.createElement(as.Z,{checkboxText:(0,Se.Z)("Display the date you joined Plex"),formGroupClassName:"EditProfile-createdAtBadge-Z5o6WK",initialValue:!!(null==k?void 0:k.createdAt),labelText:(0,Se.Z)("Badges"),name:"joinedPlexBadge"}),y?i.createElement(as.Z,{checkboxText:(0,Se.Z)("Display a Plex Pass badge"),initialValue:!!(null==k?void 0:k.plexPass),name:"plexPassBadge"}):null),i.createElement(Cs.Z,{className:Ds,closedNode:J||(0,Se.Z)("Add your location"),errorMessage:F,isOpen:V.isLocationOpen,isUpdating:M,title:(0,Se.Z)("Location"),onSubmit:$,onTogglePress:X("isLocationOpen")},i.createElement(os.Z,{autoComplete:"off",errors:void 0,helpText:(0,Se.Z)("Let people know where youre from by adding your location to your profile."),initialValue:null!=J?J:"",labelText:(0,Se.Z)("Location"),name:"location",placeholder:(0,Se.Z)("Add your location"),validations:[ls.dn]})),i.createElement(Cs.Z,{className:Ds,closedNode:ee||(0,Se.Z)("Add a description about yourself"),errorMessage:F,isOpen:V.isBioOpen,isUpdating:M,title:(0,Se.Z)("Bio"),onSubmit:K,onTogglePress:X("isBioOpen")},i.createElement(os.Z,{autoComplete:"off",errors:void 0,helpText:(0,Se.Z)("Let people know a little about yourself, your favorite movies, genres and TV Shows!"),helpWidth:"85%",initialValue:null!=ee?ee:"",inputClassName:"EditProfile-bio-bfx3oP TextInput-input-NqTdW3 input-input-XAtklw",labelText:(0,Se.Z)("Bio"),maxLength:ls.r,name:"bio",placeholder:(0,Se.Z)("Add a description about yourself"),validations:[ls._G]})),i.createElement(Cs.Z,{className:Ds,closedNode:te?i.createElement(ns.r,{color:B.Il.Accent,href:te,target:"_blank"},te):(0,Se.Z)("Add website"),errorMessage:F,isOpen:V.isLinkOpen,isUpdating:M,title:(0,Se.Z)("Link"),onSubmit:q,onTogglePress:X("isLinkOpen")},i.createElement(os.Z,{autoComplete:"off",errors:void 0,helpText:(0,Se.Z)("Provide a link on your profile for a personal website or social media profile."),initialValue:null!=te?te:"",labelText:(0,Se.Z)("Link"),name:"url",placeholder:(0,Se.Z)("Add website"),validations:[ls.gm]}))):null,i.createElement(Ps.Z,{buttonLabel:(0,Se.Z)("Save"),isOpen:n.isOpen,onClose:n.onClose})))}var Us=r(1802),Fs=r(71478),Bs=r(86550),_s=r(59059),zs=r(99),Hs=r(37903),Ws=r(56422),Gs=r(86755),Qs=r(28243),$s=r(77054),Ks=r(68606),qs=r(16870),Ys=r(54335),Xs=r(61884),Js=r(85314),ea=r(36663),ta=r(47240),ra=r(73071),na=r(26537);function ia(){const e=(0,s.I0)(),t=(0,s.v9)(cs.Z),{id:r}=(0,a.UO)(),{allFriends:{isPopulated:n,isPending:o,error:l}}=(0,s.v9)(na.Z);(0,i.useEffect)((()=>{!r||n||o||l||e(ta.Z.actions.fetchAllFriends({server:t}))}),[e,l,r,o,n,t]);const c=(0,s.v9)((0,ra.Z)(parseInt(r,10)));return r?{friend:c,isPopulated:n,isParamsPopulated:!0}:{isParamsPopulated:!1,isPopulated:!0}}var sa=r(53295),aa=r(46034),oa=r(82818),la=r(7256),ca=r(52463);function da({children:e,friend:t,isHomeUser:r,isOpen:n,onClose:a}){const o=(0,s.I0)(),l=(0,s.v9)(cs.Z),c=(0,s.v9)(ca.Z),{isRemoving:d,error:u}=(0,s.v9)(na.Z),p=(0,i.useCallback)((()=>{o(ta.Z.actions.removeFriend({server:l,id:t.id,isHomeUser:r}))}),[o,t,r,l]);(0,i.useEffect)((()=>{!n&&u&&o(ta.Z.actions.clearError())}),[o,u,n]);const m=(null==u?void 0:u.message)||t.home&&!c&&(0,Se.Z)("Only a home admin can remove accounts.");return i.createElement(oa.u_,{isOpen:n,onClose:a},i.createElement(oa.iq,null,e),i.createElement(oa.hz,{dismissLabel:(0,Se.Z)("Close Modal"),header:(0,Se.Z)("Remove Friend"),size:B.$u.S,testID:"removeFriendModal",onClose:a},i.createElement(oa.fe,null,i.createElement(F.K,{gap:B.$u.XS},i.createElement(Ws.x,null,(0,Se.Z)("Are you sure you want to unfriend {friendName}?",{friendName:t.title})),r?i.createElement(Ws.x,null,(0,Se.Z)("This will also remove {friendName} from your Plex Home.",{friendName:t.title})):null,m?i.createElement("div",{className:"RemoveFriendModal-alert-YCZSeb"},i.createElement(Ws.x,{level:Ws.N.Body1},m)):null)),i.createElement(oa.mz,null,i.createElement(oa.w2,null,i.createElement(Us.zx,{onPress:a},(0,Se.Z)("Cancel")),d?i.createElement(la.$,null):i.createElement(Us.zx,{color:B.Il.Alert,isDisabled:!!m,onPress:p},(0,Se.Z)("Remove Friend"))))))}const ua=({userID:e,home:t})=>{const r=(0,is.b)();return i.createElement(Hs.v2,{isOpen:r.isOpen,onOpenChange:r.onOpenChange},i.createElement(Hs.bF,null,i.createElement(Us.hU,{"aria-label":(0,Se.Z)("More actions"),color:"transparent",icon:Fs.n,size:B.$u.XS,testID:"moreActionsButton",type:"button"})),i.createElement(Hs.Dv,{testID:"friendProfileMenu",width:192},i.createElement(Hs.GY,{href:(0,Is.Z)(t?"plexHomeSharing":"manageLibraryAccessSharing",{id:e}),testID:"grantLibraryAccessAction"},(0,Se.Z)("Manage Library Access"))))};function pa(){var e,t;const{id:r}=(0,a.UO)(),n=(0,s.I0)(),o=(0,a.k6)(),l=(0,s.v9)(cs.Z),{isPopulated:c,friend:d}=ia(),{details:u,isPopulated:p,isPending:m,error:h}=(0,fs.Z)(null==d?void 0:d.uuid),g=!!(0,s.v9)((0,Qs.Z)(parseInt(r,10))),y=(0,s.v9)((0,qe.Z)(Ue.hq)),[v,f]=(0,i.useState)(!1);(0,cr.Z)(),(0,i.useEffect)((()=>{n((0,$s.RY)())}),[n,l]);const b=(0,i.useCallback)((()=>f(!0)),[]),Z=(0,i.useCallback)((()=>f(!1)),[]);return(0,i.useEffect)((()=>{d||!v||h||o.goBack()}),[h,d,o,v,f]),!c||!p&&m||!d&&v?i.createElement(I.Z,null,i.createElement(E.Z,null)):u&&d&&!h?i.createElement(S.Z,null,i.createElement(R.Z,null,i.createElement(ys.Z,{menu:i.createElement(ua,{home:d.home,userID:r}),subtitle:{title:u.displayName||u.username},title:{href:(0,Is.Z)("friends"),title:(0,Se.Z)("Friends")}})),i.createElement(vs.Z,null,i.createElement(F.K,{gap:B.$u.L},i.createElement(Ks.P,null,i.createElement(zs.k,{alignItems:B.xM.Center,gap:B.$u.M,width:"100%",wrap:"wrap"},i.createElement(us.Z,{server:l,size:150,url:null!=(e=u.avatar)?e:""}),i.createElement(F.K,{gap:B.$u.S,grow:!0,testID:"profileDetail"},i.createElement(qs.Z,{details:u}),i.createElement(zs.k,{gap:B.$u.S,testID:"friendProfileButtons",wrap:"wrap"},i.createElement(da,{friend:d,isHomeUser:g,isOpen:v,onClose:Z},i.createElement(Gs.u,{tooltip:i.createElement(Ws.x,{color:B.Il.Muted,level:Ws.N.Body3},(0,Se.Z)("Unfriend {username}",{username:d.username}))},i.createElement(Us.hU,{icon:Bs.T,onPress:b},(0,Se.Z)("Friends")))),(null==(t=d.sharedServers)?void 0:t.length)>0||(0,sa.D)(d.sharedSources)?i.createElement(Us.I_,{href:(0,Is.Z)(d.home?"plexHomeSharing":"manageLibraryAccessSharing",{id:r}),icon:_s.G},(0,Se.Z)("Library Access")):null)),(null==u?void 0:u.watchStats)&&y?i.createElement(Ys.Z,{stats:u.watchStats}):null)),i.createElement(F.K,null,y?i.createElement(i.Fragment,null,i.createElement(Js.Z,{friendID:d.id,uuid:d.uuid}),i.createElement(ea.Z,{friendID:d.id,uuid:d.uuid}),i.createElement(Xs.Z,{friendID:d.id,uuid:d.uuid})):null)))):i.createElement(aa.Z,{description:(0,Se.Z)("Please try again"),title:(0,Se.Z)("An error occurred while loading this profile.")},i.createElement(ns.r,{href:(0,Is.Z)("profile")},(0,Se.Z)("Go Back")))}var ma=r(16018);function ha({page:e}){const t=(0,s.I0)(),r=(0,s.v9)(cs.Z),{details:n,isPopulated:a,isPending:o}=(0,s.v9)(ms.Z),{isParamsPopulated:l,isPopulated:c,friend:d}=ia();return(0,i.useEffect)((()=>{a||o||t(hs.Z.actions.fetchUserDetails({server:r}))}),[t,o,a,r]),l&&!d&&c?i.createElement(ma.Z,null):i.createElement(S.Z,null,c&&a?i.createElement(e,{isFriend:!!d,subject:null!=d?d:n}):i.createElement(I.Z,null,i.createElement(E.Z,null)))}var ga=r(27050),ya=r(16748),va=r(64154),fa=r(84384);function ba({icon:e,href:t,title:r,subtitle:n,buttonText:s,buttonLabel:a}){return i.createElement("div",{className:"ProfileHubPageZeroState-zeroState-svLTUp"},i.createElement(F.K,{align:B.xM.Center,gap:B.$u.XL},i.createElement(fa.Z,{icon:e,iconSize:B.$u.XXL,size:132}),i.createElement(F.K,{align:B.xM.Center,gap:B.$u.S},i.createElement(Ws.x,{level:Ws.N.Heading4},r),i.createElement("div",{className:"ProfileHubPageZeroState-subtitle-VexwSL"},i.createElement(Ws.x,{level:Ws.N.Body1},n))),i.createElement(F.K,{align:B.xM.Center,gap:B.$u.S},i.createElement(Us.ZP,{color:B.Il.Accent,href:t},s),a?i.createElement("div",{className:"ProfileHubPageZeroState-buttonLabel-L4XTxn"},i.createElement(Ws.x,{color:B.Il.Muted},a)):null)))}var Za=r(24995),Sa=r(50963);const Pa="ProfileWatchlist-scroller-D_jHzv VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko";var Ia=Object.defineProperty,Ea=Object.defineProperties,wa=Object.getOwnPropertyDescriptors,Ca=Object.getOwnPropertySymbols,Ma=Object.prototype.hasOwnProperty,Da=Object.prototype.propertyIsEnumerable,Oa=(e,t,r)=>t in e?Ia(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Ta({subject:e,isFriend:t}){const r=(0,s.v9)(Er.Z),{data:n,isLoading:a,fetchMore:o,totalSize:l,remove:c}=(0,Sa.Z)(e.uuid),d=(0,i.useMemo)((()=>(0,ya.Z)({listType:Zr.U.Mixed,columnWidth:r,overscan:1,innerHorizontalPadding:32})),[r]),u=(0,i.useMemo)((()=>e=>{return e.item?i.createElement(Za.Z,(r=((e,t)=>{for(var r in t||(t={}))Ma.call(t,r)&&Oa(e,r,t[r]);if(Ca)for(var r of Ca(t))Da.call(t,r)&&Oa(e,r,t[r]);return e})({},e),Ea(r,wa({removeActivity:t?void 0:c})))):i.createElement(i.Fragment,null);var r}),[t,c]),p=t?(0,Is.Z)("friendProfile",{id:e.id.toString()}):(0,Is.Z)("profile");return i.createElement(i.Fragment,null,i.createElement(R.Z,null,e?i.createElement(ys.Z,{subtitle:{title:(0,Se.Z)("Ratings")},title:{title:t?e.friendlyName||e.username:(0,Se.Z)("My Profile"),href:p}}):null,i.createElement(Fn.Z,null,i.createElement(Bn.Z,{listStyles:[Zr.n.Grid],selectedListStyle:Zr.n.Grid}))),a?i.createElement(I.Z,null,i.createElement(E.Z,null)):null,a||!n||n.length?null:i.createElement(ba,{buttonText:(0,Se.Z)("Add a Rating Now"),href:(0,Is.Z)("profileWatchHistory"),icon:ga.G,subtitle:(0,Se.Z)("Good, bad, or ugly  let your friends know how you feel about what youre watching."),title:(0,Se.Z)("Seen it? Loved it? Rate it!")}),!a&&(null==n?void 0:n.length)?i.createElement(va.Z,{cellComponentFactory:u,className:Pa,items:null!=n?n:[],keyPropName:"id",layout:d,minPageCount:1,totalSize:l,onPageRequest:o}):null)}var xa=r(6400),Aa=r(9278),ka=r(65790),Na=r(94184),Ra=r.n(Na),La=r(42902),ja=r(35172),Va=r(90525),Ua=r(70448),Fa=r(35124),Ba=r(79634),_a=r(53782),za=r(93768),Ha=r(72449),Wa=r(94442),Ga=r(99981);var Qa=Object.defineProperty,$a=Object.defineProperties,Ka=Object.getOwnPropertyDescriptors,qa=Object.getOwnPropertySymbols,Ya=Object.prototype.hasOwnProperty,Xa=Object.prototype.propertyIsEnumerable,Ja=(e,t,r)=>t in e?Qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function eo(e){var t,r,n,s,a,o,l=e,{item:c,canHideActivity:d,remove:u}=l,p=((e,t)=>{var r={};for(var n in e)Ya.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&qa)for(var n of qa(e))t.indexOf(n)<0&&Xa.call(e,n)&&(r[n]=e[n]);return r})(l,["item","canHideActivity","remove"]);const m=(0,ri.Z)(p),[h,g]=(0,O.c9)(),y=(0,is.b)(),v=(0,J.Z)(null==(t=null==c?void 0:c.metadataItem)?void 0:t.sourceURI),[f,b]=(0,Ms.G8)(),{hoverRef:Z,isHovered:S,actionsMenuButtonID:P,isActionsMenuOpen:I,isActionsVisible:E,isActionsMenuClosing:w,onActionsMenuClose:C,onActionsMenuCloseComplete:M,onActionsMenuToggle:D}=(0,Fa.Z)({server:h,provider:g,metadataItem:null!=(r=null==c?void 0:c.metadataItem)?r:_a.Z,metadataItemState:v}),T=(0,i.useCallback)((()=>{y.onOpen()}),[y]),x=(0,i.useCallback)((()=>{(null==c?void 0:c.id)&&f({input:{id:c.id}})}),[c,f]),A=(0,i.useCallback)((()=>{(null==c?void 0:c.id)&&(null==u||u(c.id))}),[null==c?void 0:c.id,u]),k=(0,i.useMemo)((()=>({removeActivity:{callback:T,title:(0,Se.Z)("Hide From Watch History")}})),[T]),N=(0,i.useMemo)((()=>{var e;return null==(e=null==c?void 0:c.metadataItem.Image)?void 0:e.reduce(((e,t)=>{return r=((e,t)=>{for(var r in t||(t={}))Ya.call(t,r)&&Ja(e,r,t[r]);if(qa)for(var r of qa(t))Xa.call(t,r)&&Ja(e,r,t[r]);return e})({},e),n={[t.type]:t},$a(r,Ka(n));var r,n}),{})}),[null==c?void 0:c.metadataItem.Image]),R=(null==c?void 0:c.metadataItem.type)?(0,Ba.ZP)(null==c?void 0:c.metadataItem.type,c.metadataItem.subtype,{displayFieldNames:c.metadataItem.displayFields}):[];return c&&(null==c?void 0:c.metadataItem)?i.createElement(Wa.ZP,{key:p.key,activity:c.activity,metadataActions:d?k:void 0},i.createElement(Ha.Z,{ref:Z,className:"ProfileWatchHistoryItem-row-Ukl65Q ListRow-row-oh5MTV",isHovered:S,style:m.style},i.createElement(U.X,{align:B.xM.SpaceBetween,verticalAlign:B.xM.Center,width:"100%"},i.createElement(U.X,{gap:B.$u.M,verticalAlign:B.xM.Center},i.createElement(za.P,{height:40,posterStyle:B.mJ.Landscape,server:h,url:null!=(s=null==(n=null==N?void 0:N[vr.IY.CoverArt])?void 0:n.url)?s:"",width:72}),i.createElement(F.K,null,R.map(((e,t)=>{if(null==e)return null;const r=(0,Ba.uM)(e);return i.createElement(Va.Z,{key:t,component:r.component,isDoubleLine:!1,isSecondary:t>0,metadataItem:c.metadataItem})})))),E?i.createElement(di.Z,{className:Ra()(!S&&w&&"ProfileWatchHistoryItem-hidden-Ylsq5_"),id:P,isPending:v.isPending,tabIndex:-1,onPress:D}):null,S||I||w||v.isPending||!(null==(a=c.activity)?void 0:a.viewedAt)?null:i.createElement(Ws.x,{color:B.Il.Muted,level:Ws.N.Body2},(0,ja.Z)((0,La.Z)(null==(o=c.activity)?void 0:o.viewedAt),!1))),i.createElement(Ua.Z,{actionsOverride:{isPlayVisible:!1,isEditVisible:!1},isOpen:I,metadataItem:c.metadataItem,target:P,onMenuClose:C,onMenuCloseComplete:M}),i.createElement(Ga.Z,{body:(0,Se.Z)("This item will no longer appear in your Watch History unless you watch it again."),error:b.error,isRemoving:b.isLoading,modalState:y,title:(0,Se.Z)("Hide from Watch History"),onRemoveActivity:x,onSuccess:A}))):null}var to=r(48102);var ro=Object.defineProperty,no=Object.defineProperties,io=Object.getOwnPropertyDescriptors,so=Object.getOwnPropertySymbols,ao=Object.prototype.hasOwnProperty,oo=Object.prototype.propertyIsEnumerable,lo=(e,t,r)=>t in e?ro(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function co({subject:e,isFriend:t}){const r=(0,s.v9)(cs.Z),n=(0,s.v9)(Aa.Z),{data:a,isLoading:o,fetchMore:l,remove:c,totalSize:d}=(0,to.Z)(e.uuid),{details:u,isPopulated:p}=(0,fs.Z)(e.uuid),m=t?(0,Is.Z)("friendProfile",{id:e.id.toString()}):(0,Is.Z)("profile"),h=(0,i.useMemo)((()=>(0,ka.Z)({overscan:1,rowHeight:68})),[]),g=(0,i.useMemo)((()=>e=>{var s,a;return e.item?i.createElement(O.ZP,{key:e.key,machineIdentifier:null==r?void 0:r.machineIdentifier,providerIdentifier:null!=(s=null==n?void 0:n.identifier)?s:""},i.createElement(eo,(a=((e,t)=>{for(var r in t||(t={}))ao.call(t,r)&&lo(e,r,t[r]);if(so)for(var r of so(t))oo.call(t,r)&&lo(e,r,t[r]);return e})({},e),no(a,io({canHideActivity:!t,remove:t?void 0:c}))))):i.createElement(i.Fragment,null)}),[t,null==n?void 0:n.identifier,c,null==r?void 0:r.machineIdentifier]);return i.createElement(i.Fragment,null,i.createElement(R.Z,null,e?i.createElement(ys.Z,{subtitle:{title:(0,Se.Z)("Watch History")},title:{title:t?e.friendlyName||e.username:(0,Se.Z)("My Profile"),href:m}}):null),o||!p?i.createElement(I.Z,null,i.createElement(E.Z,null)):null,!o&&p&&a&&!a.length?i.createElement(ba,{buttonLabel:(0,Se.Z)("Search for your favorite movie and rate it or mark it as watched."),buttonText:(0,Se.Z)("Find something to watch"),href:(0,Is.Z)("search"),icon:xa.l,subtitle:(0,Se.Z)("Plex has thousands of movies and shows to stream for free."),title:(0,Se.Z)("Go ahead, stream free")}):null,!o&&p&&(null==a?void 0:a.length)?i.createElement("div",{className:"ProfileWatchHistory-content-BJwzCt"},i.createElement(va.Z,{cellComponentFactory:g,className:"ProfileWatchHistory-scroller-aEEKMF VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko",items:null!=a?a:[],keyPropName:"id",layout:h,minPageCount:1,totalSize:d,onPageRequest:l}),(null==u?void 0:u.watchStats)?i.createElement("div",{className:"ProfileWatchHistory-stats-tMalrO"},i.createElement(Ys.Z,{stats:u.watchStats})):null):null)}var uo=r(19806),po=r(45164),mo=Object.defineProperty,ho=Object.getOwnPropertySymbols,go=Object.prototype.hasOwnProperty,yo=Object.prototype.propertyIsEnumerable,vo=(e,t,r)=>t in e?mo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function fo({subject:e,isFriend:t}){const r=(0,s.v9)(Er.Z),{data:n,isLoading:a,fetchMore:o,totalSize:l}=(0,po.Z)(e.uuid,t),c=(0,i.useMemo)((()=>(0,ya.Z)({listType:Zr.U.Mixed,columnWidth:r,overscan:1,innerHorizontalPadding:32})),[r]),d=(0,i.useMemo)((()=>e=>e.item?i.createElement(Za.Z,((e,t)=>{for(var r in t||(t={}))go.call(t,r)&&vo(e,r,t[r]);if(ho)for(var r of ho(t))yo.call(t,r)&&vo(e,r,t[r]);return e})({},e)):i.createElement(i.Fragment,null)),[]),u=t?(0,Is.Z)("friendProfile",{id:e.id.toString()}):(0,Is.Z)("profile");return i.createElement(i.Fragment,null,i.createElement(R.Z,null,e?i.createElement(ys.Z,{subtitle:{title:(0,Se.Z)("Watchlist")},title:{title:t?e.friendlyName||e.username:(0,Se.Z)("My Profile"),href:u}}):null,i.createElement(Fn.Z,null,i.createElement(Bn.Z,{listStyles:[Zr.n.Grid],selectedListStyle:Zr.n.Grid}))),a?i.createElement(I.Z,null,i.createElement(E.Z,null)):null,a||!n||n.length?null:i.createElement(ba,{buttonText:(0,Se.Z)("Discover Something New"),href:(0,Is.Z)("discoverHome",{},{pivot:p.s4}),icon:uo.B,subtitle:(0,Se.Z)("Keep track of what you want to watch next from any streaming service, all in one place."),title:(0,Se.Z)("Save anything to your Watchlist")}),!a&&(null==n?void 0:n.length)?i.createElement(va.Z,{cellComponentFactory:d,className:Pa,items:null!=n?n:[],keyPropName:"id",layout:c,minPageCount:1,totalSize:l,onPageRequest:o}):null)}var bo=r(92205),Zo=r(35184),So=r(90597),Po=r(81452),Io=r(92450),Eo=r(77353),wo=r(97946),Co=r(78741),Mo=r(41863);const Do=(0,o.P1)(c.Z,(e=>e.isResourcesPopulated)),Oo=(0,o.P1)(c.Z,(e=>e.hasFailedResources)),To=(0,o.P1)(Do,Oo,(0,Mo.Z)("isProvidersPopulated"),(0,Mo.Z)("providersError"),((e,t,r,n)=>t||!!n||e&&r));var xo=r(48521);const Ao=(0,o.P1)(xo.Z,To,((e,t)=>{const r=e.some((e=>!(!e.provider||!e.provider.isPopulated)&&!!(0,Co.Z)(e.provider)));return t&&!r}));var ko=r(97075);const No=(0,o.P1)(ko.Z,(e=>e.length>0));var Ro=r(92656),Lo=r(23681),jo=r(86832),Vo=r(15598),Uo=r(60590),Fo=r(31288);const Bo=(0,o.P1)(Fo.Z,(e=>e.hasDismissedServerDownloadMessage)),_o=(0,o.P1)(Lt.Z,(e=>e.some((e=>e.connections.some((e=>e.isLoopback))&&e.connectionTestResult===kt._r.PENDING))));var zo=r(51070);const Ho=(0,o.P1)(c.Z,_o,zo.Z,sr.Z,No,((e,t,r,n,i)=>e.isResourcesPopulated&&!t&&!r.length&&!n&&!i));var Wo=r(85448),Go=r(86979),Qo=r(31722),$o=r(18222),Ko=r(63135),qo=r(74249),Yo=r(83661),Xo=r(17516),Jo=r(25555),el=r(69281),tl=r(55949),rl=r(88140);const nl=function(e){const{isOpen:t,errorMessage:r,onModalClose:n}=e,s=[r||(0,Se.Z)("There was an unexpected error."),(0,Se.Z)("Please visit our forums if you continue to experience problems.")];return i.createElement(tl.Z,{isOpen:t,metricsPage:u.Sd,size:el.HC,onModalClose:n},i.createElement(rl.Z,{onModalClose:n},i.createElement(Xo.Z,null,(0,Se.Z)("There was an unexpected error")),i.createElement(Ko.Z,null,s.join(" "),i.createElement("br",null),i.createElement(Wo.Z,{kind:Jo._8,target:"_self",to:ar.bB,onPress:n},(0,Se.Z)("Go to Forums"))),i.createElement(qo.Z,null,i.createElement($o.Z,{className:Yo.Z.button,"data-autofocus":!0,kind:Jo._8,onPress:n},(0,Se.Z)("Okay")))))},il=function(e){const{children:t,isSidebarCollapsed:r}=e;return i.createElement(i.Fragment,null,r?i.createElement("div",{className:"EmptySourceSidebar-sidebarUnderlay-Fpi4rC SourceSidebar-sidebarUnderlay-Npir7j"}):null,i.createElement("div",{className:r?"EmptySourceSidebar-collapsedSidebar-KENtE6 SourceSidebar-collapsedSidebar-heX4mD SourceSidebar-sidebar-yw2lNo":"EmptySourceSidebar-openSidebar-kELdTG SourceSidebar-openSidebar-I364_Z SourceSidebar-sidebar-yw2lNo"},t))};var sl=r(4027),al=r(26397);const ol=function(){const e=(0,sl.Z)(),t=(0,Se.Z)("An unexpected error is impacting the sidebar");return i.createElement(il,{isSidebarCollapsed:!0},i.createElement(Go.Z,{"aria-label":t,component:Wo.Z,tooltip:t,tooltipAttachment:Qo.ab,onPress:e.onOpen},i.createElement(al.Z,{className:"ErrorSourceSidebar-icon-fodTnh"})),i.createElement(nl,{errorMessage:`${t}.`,isOpen:e.isOpen,onModalClose:e.onClose}))};var ll=r(47354),cl=r(62474),dl=r(42985),ul=r(58477),pl=r(27553),ml=r(50232),hl=r(37198),gl=r(49434),yl=r(59119);const vl={button:"SourceSidebarLink-button-rWG8gD SidebarLink-sidebarLink-ns5vmb Link-default-BXtKLo",isDim:"SourceSidebarLink-isDim-MhqsPv",title:"SourceSidebarLink-title-C2NvGy SidebarLink-title-OWiZjJ",iconContainer:"SourceSidebarLink-iconContainer-xQGX4C",isDisabled:"SourceSidebarLink-isDisabled-wpis2k SourceSidebarLink-isDim-MhqsPv",isSelected:"SourceSidebarLink-isSelected-rPGiHo",sourceLink:"SourceSidebarLink-sourceLink-hLtTJn",titles:"SourceSidebarLink-titles-vXEyId",detail:"SourceSidebarLink-detail-C3uCVj",small:"SourceSidebarLink-small-lIEoIa",medium:"SourceSidebarLink-medium-Y3siEA",betaBadgeContainer:"SourceSidebarLink-betaBadgeContainer-Pa_KKm"};var fl=Object.defineProperty,bl=Object.defineProperties,Zl=Object.getOwnPropertyDescriptors,Sl=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,Il=Object.prototype.propertyIsEnumerable,El=(e,t,r)=>t in e?fl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function wl(e){const{"data-testid":t,className:r,size:n,style:s,linkClassName:a,titleClassName:o,isActiveClassName:l,isSelectedClassName:c,icon:d,title:u,detail:p,to:m,role:h,isActive:g,isDim:y,isDisabled:v,isSelected:f,showBetaBadge:b,children:Z,onNavigate:S,onMouseEnter:P,onMouseLeave:I,onFocus:E,onBlur:w}=e;let C,M;return m?(C=Wo.Z,M={isDisabled:v,to:m,role:h,"data-testid":t,onPress:S}):(C="div",M={}),i.createElement("div",{className:Ra()(r,vl[n],g&&l,y&&vl.isDim,v&&vl.isDisabled,f&&c),"data-testid":"sidebarSource",style:s,onBlur:w,onFocus:E,onMouseEnter:P,onMouseLeave:I},i.createElement(C,(D=((e,t)=>{for(var r in t||(t={}))Pl.call(t,r)&&El(e,r,t[r]);if(Sl)for(var r of Sl(t))Il.call(t,r)&&El(e,r,t[r]);return e})({className:a},M),bl(D,Zl({title:p?`${u}, ${p}`:u}))),i.createElement("div",{className:vl.iconContainer},d),i.createElement("div",{className:vl.titles},i.createElement("div",{className:o},u),p?i.createElement("div",{className:vl.detail},p):null),b?i.createElement("div",{className:vl.betaBadgeContainer},i.createElement(yl.C,{color:B.Il.Muted},(0,Se.Z)("Beta"))):null),Z);var D}wl.defaultProps={className:vl.button,size:el.M2,linkClassName:vl.sourceLink,titleClassName:vl.title,isActiveClassName:vl.isActive,isSelectedClassName:vl.isSelected};const Cl=wl;var Ml=Object.defineProperty,Dl=Object.getOwnPropertySymbols,Ol=Object.prototype.hasOwnProperty,Tl=Object.prototype.propertyIsEnumerable,xl=(e,t,r)=>t in e?Ml(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Al=function(e){const t=e,{icon:r,connectDragSource:n}=t,s=((e,t)=>{var r={};for(var n in e)Ol.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Dl)for(var n of Dl(e))t.indexOf(n)<0&&Tl.call(e,n)&&(r[n]=e[n]);return r})(t,["icon","connectDragSource"]),a=i.createElement(Cl,((e,t)=>{for(var r in t||(t={}))Ol.call(t,r)&&xl(e,r,t[r]);if(Dl)for(var r of Dl(t))Tl.call(t,r)&&xl(e,r,t[r]);return e})({icon:r||i.createElement(gl.t,null)},s));return n?n(i.createElement("div",{className:"ReorderSourceSidebarItem-dragSource-rea4x0"},a)):a};var kl=r(62704),Nl=r(27598),Rl=r(993),Ll=r(31489),jl=r(54139),Vl=r(22310),Ul=r(24107);const Fl=parseInt(Ul.Z.sourceSidebarItemHeight,10);class Bl extends i.Component{render(){const{item:e,style:t}=this.props;if(!e||!t)return null;const{sourceTitle:r,sourceDetail:n}=e;return i.createElement(Ll.Z,null,i.createElement(Al,{detail:n,style:t,title:r}))}}const _l=(0,Rl.r)((function(e,t){const r=e.getItem(),n={item:r,style:null},i=e.getInitialSourceClientOffset(),s=e.getSourceClientOffset();if(e.getItemType()===jl.KP&&i&&s){let e=s.y;e-r.listTop<=0?e=r.listTop:e+Fl>=r.listBottom&&(e=r.listBottom-Fl),n.style=(0,Vl.Z)({x:i.x,y:e},r.listWidth)}return n}))(Bl);var zl=r(93712),Hl=r(90625),Wl=r(46408),Gl=r(73935),Ql=r(50774);const $l={beginDrag(e,t,r){const{sourceTitle:n,sourceTitleDetail:i,listIndex:s,isRemoved:a,listHeight:o,listWidth:l,listTop:c,listRight:d,listBottom:u,listLeft:p}=e;return{dragIndex:s,sourceTitle:n,sourceTitleDetail:i,isRemoved:a,listHeight:o,listWidth:l,listTop:c,listRight:d,listBottom:u,listLeft:p}},endDrag(e,t,r){e.onItemDragEnd({didDrop:t.didDrop()})}},Kl={hover(e,t,r){const n=t.getClientOffset(),i=(0,Gl.findDOMNode)(r).getBoundingClientRect(),s=(i.bottom-i.top)/2,a=n.y-i.top,o=t.getItem().dragIndex,l=e.listIndex;let c;c=l===o?l:a>s?l+1:l,e.onItemDragMove({dragIndex:o,dropIndex:c})}};class ql extends i.Component{componentDidMount(){this.props.connectDragPreview((0,Wl.r)())}render(){const{sourceTitle:e,sourceTitleDetail:t,isOver:r,isDragging:n,isDraggingBefore:s,isDraggingAfter:a,connectDropTarget:o,connectDragSource:l}=this.props;return i.createElement("div",{ref:o,className:Ra()("SourceListItemDragSource-container-m_4j23",r&&"SourceListItemDragSource-isOver-Zwfenf",n&&Ql.fN,r&&s&&Ql.DT,r&&a&&Ql.QZ)},i.createElement(Al,{connectDragSource:l,detail:t,title:e}))}}const Yl=(0,zl.G)(jl.KP,Kl,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))((0,Hl.E)(jl.KP,$l,(function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(ql));var Xl=Object.defineProperty,Jl=Object.defineProperties,ec=Object.getOwnPropertyDescriptors,tc=Object.getOwnPropertySymbols,rc=Object.prototype.hasOwnProperty,nc=Object.prototype.propertyIsEnumerable,ic=(e,t,r)=>t in e?Xl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sc=(e,t)=>{for(var r in t||(t={}))rc.call(t,r)&&ic(e,r,t[r]);if(tc)for(var r of tc(t))nc.call(t,r)&&ic(e,r,t[r]);return e},ac=(e,t)=>Jl(e,ec(t));const oc={dragIndex:-1,dropIndex:-1,hasValidDropTarget:!1};class lc extends i.Component{constructor(e,t){super(e,t),this.onItemDragMove=e=>{const{dragIndex:t,dropIndex:r}=e,{dragIndex:n,dropIndex:i}=this.state;let s=r!==i?r:i;const a=t!==n?t:n;if((s===a||s>a&&s-a==1)&&(s=-1),a!==n||s!==i){const e={dragIndex:a,dropIndex:s,hasValidDropTarget:-1!==s};this.setState(e)}},this.onItemDragEnd=e=>{const{dragIndex:t,dropIndex:r}=this.state;let n;e.didDrop&&-1!==r&&(n=()=>{this.props.onReorderSource({fromIndex:t,toIndex:r>t?r-1:r})}),this.setState(oc,n)},this.onMeasure=e=>{const{height:t,width:r,x:n,y:i}=e;this.setState({listHeight:t,listWidth:r,listTop:i,listRight:n+r,listBottom:i+t,listLeft:n})},this.state=ac(sc({},oc),{listHeight:0,listWidth:0,listTop:0,listRight:0,listBottom:0,listLeft:0})}render(){const{className:e,sources:t}=this.props,{dropIndex:r,hasValidDropTarget:n}=this.state;return i.createElement(kl.Z,{className:e,ignoreTransforms:!0,onMeasure:this.onMeasure},t.map(((e,t)=>{const s=n&&r===t,a=n&&r===t+1;return i.createElement(Yl,ac(sc({},this.state),{key:e.key,hasValidDropTarget:n,isDraggingAfter:a,isDraggingBefore:s,listIndex:t,sourceTitle:e.title,sourceTitleDetail:e.titleDetail,onItemDragEnd:this.onItemDragEnd,onItemDragMove:this.onItemDragMove}))})),i.createElement(Nl.Z,null,i.createElement(_l,null)))}}lc.defaultProps={className:"SortableSources-container-Ie2iGN Measure-container-_70qZ9"};const cc=lc;var dc=Object.defineProperty,uc=Object.getOwnPropertySymbols,pc=Object.prototype.hasOwnProperty,mc=Object.prototype.propertyIsEnumerable,hc=(e,t,r)=>t in e?dc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function gc(e){return i.createElement("div",((e,t)=>{for(var r in t||(t={}))pc.call(t,r)&&hc(e,r,t[r]);if(uc)for(var r of uc(t))mc.call(t,r)&&hc(e,r,t[r]);return e})({},e))}gc.defaultProps={className:"SourceSidebarHeader-header-EoXy2_"};const yc=gc;var vc=r(8067),fc=Object.defineProperty,bc=Object.getOwnPropertySymbols,Zc=Object.prototype.hasOwnProperty,Sc=Object.prototype.propertyIsEnumerable,Pc=(e,t,r)=>t in e?fc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Ic(e){const{className:t}=e;return i.createElement(vc.Z,((e,t)=>{for(var r in t||(t={}))Zc.call(t,r)&&Pc(e,r,t[r]);if(bc)for(var r of bc(t))Sc.call(t,r)&&Pc(e,r,t[r]);return e})({autoScroll:!0,className:t},e))}Ic.defaultProps={className:"SourceSidebarScroller-scroller-kZMnGn Scroller-scroller-aaw2tP"};const Ec=Ic;class wc extends i.Component{constructor(){super(...arguments),this.onReorderSource=({fromIndex:e,toIndex:t})=>{if(e===t)return;const{sources:r,hiddenSidebarSourceKeys:n,onReorderPinnedSources:i}=this.props,s=r.map((e=>e.key));i({sourceKeys:(0,hl.Z)(s,e,t).concat(n)})}}render(){const{sources:e,hasDownloadsSource:t,onCloseReorderPinSources:r}=this.props;return i.createElement(i.Fragment,null,i.createElement(yc,null,i.createElement("div",{className:"SourceSidebarReorderContent-titleContainer-xlRyl1"},i.createElement("div",{className:"SourceSidebarReorderContent-title-Zc2QBQ"},(0,Se.Z)("Reorder")),i.createElement(Wo.Z,{"aria-label":(0,Se.Z)("Done"),className:"SourceSidebarReorderContent-close-Gd4JXk",onPress:r},i.createElement(ul.k,null)))),i.createElement(Ec,null,i.createElement("div",{className:"SourceSidebarReorderContent-expandedSidebarContent-GSs74t SourceSidebarContent-expandedSidebarContent-e8X1Bo"},i.createElement(Al,{icon:i.createElement(pl.A,null),isDisabled:!0,title:(0,Se.Z)("Home")}),t?i.createElement(Al,{icon:i.createElement(ml.D,null),isDisabled:!0,title:(0,Se.Z)("Downloads")}):null,i.createElement(cc,{sources:e,onReorderSource:this.onReorderSource}))))}}const Cc=wc,Mc=(0,o.P1)(Vt.Z,(e=>({hiddenSidebarSourceKeys:e.reduce(((e,t)=>(t.isHidden&&e.push(t.key),e)),[])}))),Dc={onReorderPinnedSources:$s.fK},Oc=(0,s.$j)(Mc,Dc)(Cc);var Tc=r(54647);const xc=(0,o.P1)(Lt.Z,(e=>e.filter((e=>!e.isCloud&&!e.isEmbedded&&!!e.friendlyName))));var Ac=r(35758),kc=r(9709),Nc=r(77713),Rc=r(26263),Lc=r(87880),jc=r(71741),Vc=r(25483),Uc=r(49081);const Fc=parseInt(Ul.Z.sourceSidebarServerHeaderIconSize,10),Bc=function(e){const{serverEntityID:t,thumb:r}=e;return i.createElement(Uc.Z,{height:Fc,serverEntityID:t,url:r,width:Fc})},_c=(0,s.$j)((function(){return(0,o.P1)((0,Lc.Z)(),(0,o.P1)((0,Lc.Z)(),Vc.Z,jc.Z,((e,t,r)=>{const n=t.find((t=>r[t].id===e.ownerId));return n?r[n].thumb:null})),jt.Z,((e,t,r)=>({thumb:e.isShared?t:r.thumb})))}))(Bc);var zc=r(4820),Hc=r(94218),Wc=r(12903);function Gc({isUnavailable:e,isOutOfDate:t,isUnclaimed:r}){return e?(0,Se.Z)("Unavailable"):t?(0,Se.Z)("Needs update"):r?(0,Se.Z)("Unclaimed"):void 0}function Qc(e){const{isRemote:t,isUnclaimed:r,isUnavailable:n,isOutOfDate:s}=e,a=n||r||s;return a||t?i.createElement("div",{className:"SourceSidebarBadgedIcon-badge-YnA33X"},a?i.createElement(Hc.Y,{"aria-label":Gc(e)}):i.createElement(Wc.V,{"aria-label":(0,Se.Z)("Remote server")})):null}function $c(e){const{icon:t,showBadgedIcon:r,isPending:n,isRemote:s,isUnavailable:a,isOutOfDate:o,isUnclaimed:l}=e;return r?n?i.createElement(dl.Z,{className:"SourceSidebarBadgedIcon-spinner-KXPdzb"}):i.createElement("div",{className:"SourceSidebarBadgedIcon-container-Mlq6jq"},t,i.createElement(Qc,{isOutOfDate:o,isRemote:s,isUnavailable:a,isUnclaimed:l})):t}$c.defaultProps={showBadgedIcon:!0};const Kc=$c;var qc=r(36475),Yc=r(10379),Xc=r(29228),Jc=r(84520),ed=r(36526);const td="SourceSidebarServerHeaderActionsButtons-button-PNpBdW IconButton-button-s4bVCh",rd=(0,qc.Z)(null,(function(e,t){const r={serverEntityID:t.serverEntityID,metricsPage:t.metricsPage};return{onAddLibraryPress(){e(Yc.Wy(r))}}}))((function(e){const{className:t,isHovered:r,overflowMenuButtonID:n,isOverflowMenuOpen:s,onAddLibraryPress:a,onOverflowMenuToggle:o}=e,l=h.Z.hasTouchScreen||r||s;return i.createElement("div",{className:l?t:"SourceSidebarServerHeaderActionsButtons-hidden-QubPQZ"},i.createElement(Jc.Z,{className:td,"data-testid":"sidebarLibrariesAddButton",iconComponent:Xc.Z,title:(0,Se.Z)("Add Library"),onPress:a}),i.createElement(Jc.Z,{"aria-haspopup":"true",className:td,"data-testid":"sidebarLibrariesMoreButton",iconComponent:ed.Z,id:n,title:(0,Se.Z)("More Actions"),onPress:o}))}));var nd=r(39874);var id=Object.defineProperty,sd=Object.defineProperties,ad=Object.getOwnPropertyDescriptors,od=Object.getOwnPropertySymbols,ld=Object.prototype.hasOwnProperty,cd=Object.prototype.propertyIsEnumerable,dd=(e,t,r)=>t in e?id(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ud=(e,t)=>{for(var r in t||(t={}))ld.call(t,r)&&dd(e,r,t[r]);if(od)for(var r of od(t))cd.call(t,r)&&dd(e,r,t[r]);return e};const pd=function(e){const t=e,{serverEntityID:r,machineIdentifier:n,hasServerActions:s,iconNode:a,isPending:o,isRemote:l,isUnavailable:c,isOutOfDate:d,isUnclaimed:u,onToggleLockedPress:p}=t,m=((e,t)=>{var r={};for(var n in e)ld.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&od)for(var n of od(e))t.indexOf(n)<0&&cd.call(e,n)&&(r[n]=e[n]);return r})(t,["serverEntityID","machineIdentifier","hasServerActions","iconNode","isPending","isRemote","isUnavailable","isOutOfDate","isUnclaimed","onToggleLockedPress"]),h=(0,oi.Z)(),[g,y]=(0,i.useState)(!1),[v,f]=(0,zc.Z)(),b=(0,i.useCallback)((()=>{y(!g)}),[g]),Z=(0,i.useCallback)((()=>{y(!1)}),[]);return(0,i.useEffect)((()=>{p&&p(g)}),[g,p]),i.createElement(i.Fragment,null,i.createElement(Cl,(S=ud(ud({},m),f),sd(S,ad({icon:i.createElement(Kc,{icon:i.createElement("div",{className:"SourceSidebarServerHeader-iconContainer-P2XElS SourceSidebarItem-iconImg-fzfjD5"},a),isOutOfDate:d,isPending:o,isRemote:l,isUnavailable:c,isUnclaimed:u}),isActive:g,isSelectedClassName:"SourceSidebarServerHeader-isSelected-nt4TtJ SourceSidebarLink-isSelected-rPGiHo",role:"navigation",titleClassName:"SourceSidebarServerHeader-title-YAQuKs SourceSidebarLink-title-C2NvGy SidebarLink-title-OWiZjJ"}))),s?i.createElement(rd,{className:"SourceSidebarServerHeader-actionContainer-PUOXvi",isHovered:v,isOverflowMenuOpen:g,overflowMenuButtonID:h,serverEntityID:r,onOverflowMenuToggle:b}):null),s?i.createElement(nd.Z,{isOverflowMenuOpen:g,machineIdentifier:n,overflowMenuButtonID:h,serverEntityID:r,onOverflowMenuClose:Z,onOverflowMenuToggle:b}):null);var S};var md=r(56036);function hd(e){const t=window.location.hash,r=new RegExp("^"+(0,md.Z)(e)+"\\b");return!(!t||!e)&&r.test(t)}const gd=(0,s.$j)((function(){return(0,o.P1)((e=>e.cloudServer),jt.Z,((e,t)=>({cloudServerEntityID:e,thumb:t.thumb})))}))((function(e){const{cloudServerEntityID:t,thumb:r}=e,n="#!/get-plex-media-server";return i.createElement(pd,{iconNode:i.createElement(Bc,{serverEntityID:t,thumb:r}),isSelected:hd(n),title:(0,Se.Z)("Your Media"),to:n})}));function yd(e){return e.user.optOuts}var vd=r(23954);const fd=(0,o.P1)(Vt.Z,(e=>(0,vd.Z)(e,(e=>e.key),(e=>e))));var bd=r(24348),Zd=r(83693),Sd=r(17197),Pd=r(1320),Id=r(77483),Ed=r(44541);var wd=Object.defineProperty,Cd=Object.defineProperties,Md=Object.getOwnPropertyDescriptors,Dd=Object.getOwnPropertySymbols,Od=Object.prototype.hasOwnProperty,Td=Object.prototype.propertyIsEnumerable,xd=(e,t,r)=>t in e?wd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ad={placement:"bottom-start",modifiers:[{name:"offset",options:{offset:({reference:e})=>[0,-.2*e.height]}}]};function kd(e){const{serverEntityID:t,providerEntityID:r,source:n,dismissedUnclaimedServers:o,size:l,showDetail:c,showIcons:d,metricsOrigin:p,isReorderable:m,onToggleLockedPress:h,onReorderPinSources:g}=e,{machineIdentifier:y,providerIdentifier:v}=(0,k.Z)(),f=(0,b.Z)(),Z=(0,es.Z)(f.source),S=(0,oi.Z)(),[P,I]=(0,i.useState)(!1),[E,w]=(0,zc.Z)(),C=(0,s.v9)(Rt.Z),M=!!(0,a.$B)({path:vt.Z.hybridGuide,exact:!0}),D=(0,i.useCallback)((()=>{I(!P)}),[P]),O=(0,i.useCallback)((()=>{I(!1)}),[]);(0,i.useEffect)((()=>{h&&h(P)}),[P,h]);const T=(0,i.useCallback)((()=>{(0,Ze.DB)("metrics").trackEvent({event:Sd.Ip,interaction:!0,properties:{page:u.jy,identifier:n.providerMetricsIdentifier,action:ss.wP,origin:p}})}),[n,p]),x=n.sourceType===Kt.lz,A=P||E,N=n.isPinned&&!A,R=!1===n.isLocal&&!1===n.isCloud&&!1===n.isUnavailable,L=i.createElement(Id.Z,{providerIdentifier:n.providerIdentifier,sourceType:n.sourceType});let j=null,V=!1,U=!1,F=c?n.titleDetail:void 0;return n.sourceType===Kt.Hs?(j=(0,Is.Z)("hybridGuide"),F=C?void 0:F,V=C&&M):x||(j=(0,Pd.Z)(n.isCloud,n.machineIdentifier,n.providerIdentifier,{source:n.directoryID}),V=y===n.machineIdentifier&&v===n.providerIdentifier&&Z===n.directoryID,U=n.isUnavailable||x),i.createElement(i.Fragment,null,i.createElement(Cl,(B=((e,t)=>{for(var r in t||(t={}))Od.call(t,r)&&xd(e,r,t[r]);if(Dd)for(var r of Dd(t))Td.call(t,r)&&xd(e,r,t[r]);return e})({},w),_={className:"SourceSidebarItem-button-Zng372 SourceSidebarLink-button-rWG8gD SidebarLink-sidebarLink-ns5vmb Link-default-BXtKLo",detail:F,icon:i.createElement(Kc,{icon:L,isOutOfDate:n.isOutOfDate,isRemote:R,isUnavailable:U,isUnclaimed:n.isUnclaimedServer&&o&&!o[n.machineIdentifier],showBadgedIcon:d}),isActive:P,isActiveClassName:"SourceSidebarItem-isActive-W5MDaX undefined",isDim:U||n.isOutOfDate,isSelected:V,isSelectedClassName:"SourceSidebarItem-isSelected-YtSvbM SourceSidebarLink-isSelected-rPGiHo",showBetaBadge:n.isBeta,size:c?l:el.HC,title:n.title,to:j,onNavigate:T},Cd(B,Md(_))),i.createElement("span",{className:"SourceSidebarItem-actionContainer-K0PtxH"},N?i.createElement("div",{className:"SourceSidebarItem-pinnedIcon-kWOuPv"},i.createElement(Zd.Y,null)):null,i.createElement(Jc.Z,{className:A?"SourceSidebarItem-overflowButton-twBadH":"SourceSidebarItem-hiddenOverflowButton-OuaYQX","data-testid":"sidebarSourceOverflow",iconComponent:ed.Z,id:S,title:(0,Se.Z)("Actions"),onPress:D}))),i.createElement(Ed.Z,{isOverflowMenuOpen:P,isReorderable:m,menuOptions:Ad,providerEntityID:r,serverEntityID:t,source:n,target:S,onOverflowMenuClose:O,onReorderPinSources:g}));var B,_}kd.defaultProps={showDetail:!0,showIcons:!0};const Nd=kd;var Rd=Object.defineProperty,Ld=Object.defineProperties,jd=Object.getOwnPropertyDescriptors,Vd=Object.getOwnPropertySymbols,Ud=Object.prototype.hasOwnProperty,Fd=Object.prototype.propertyIsEnumerable,Bd=(e,t,r)=>t in e?Rd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const _d=(0,s.$j)((function(){return(0,o.P1)((0,o.P1)(((e,{providerEntityIDs:t})=>t),Nt.Z,((e,t)=>e.map((e=>t[e])))),(0,Lc.Z)(),sr.Z,yd,fd,Rt.Z,((e,t,r,n,i,s)=>{const a=e.reduce(((e,a)=>{const o=(0,Co.Z)(a);return(0,wo.Z)({sourceServer:t,sourceProvider:a,directories:o&&o.directories,optOuts:n,isManagedUser:r,hasHybridGuide:s}).forEach((t=>{var r,n;e.push((r=((e,t)=>{for(var r in t||(t={}))Ud.call(t,r)&&Bd(e,r,t[r]);if(Vd)for(var r of Vd(t))Fd.call(t,r)&&Bd(e,r,t[r]);return e})({},t),n={isPinned:!!i[t.key]},Ld(r,jd(n))))})),e}),[]);return a.sort(((e,t)=>e.title.localeCompare(t.title))),{sources:a}}))}),(function(e,t){return{}}))((function(e){const{sources:t,onToggleLockedPress:r}=e;return i.createElement(i.Fragment,null,t.map((e=>i.createElement(Nd,{key:e.key,metricsOrigin:bd.tr,providerEntityID:e.providerEntityID,serverEntityID:e.serverEntityID,showDetail:!1,showIcons:!1,source:e,onToggleLockedPress:r}))))}));var zd=r(26900),Hd=r(71078);const Wd="SourcesToggleButton-icon-bQY20U";var Gd=Object.defineProperty,Qd=Object.getOwnPropertySymbols,$d=Object.prototype.hasOwnProperty,Kd=Object.prototype.propertyIsEnumerable,qd=(e,t,r)=>t in e?Gd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Yd(e){const t=e,{showTitle:r,showUnclaimed:n,isAllSources:s}=t,a=((e,t)=>{var r={};for(var n in e)$d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Qd)for(var n of Qd(e))t.indexOf(n)<0&&Kd.call(e,n)&&(r[n]=e[n]);return r})(t,["showTitle","showUnclaimed","isAllSources"]);return i.createElement(Wo.Z,((e,t)=>{for(var r in t||(t={}))$d.call(t,r)&&qd(e,r,t[r]);if(Qd)for(var r of Qd(t))Kd.call(t,r)&&qd(e,r,t[r]);return e})({className:"SourcesToggleButton-link-B_77gm","data-testid":"sidebarMore"},a),s?i.createElement(U.X,{align:B.xM.Center,gap:B.$u.XXS,verticalAlign:B.xM.Center},i.createElement("div",{className:Wd},i.createElement(Hd.e,null)),r?(0,Se.Z)("Pinned"):null):i.createElement(U.X,{align:B.xM.Center,gap:B.$u.XXS,verticalAlign:B.xM.Center},r&&n?i.createElement(Hc.Y,{"aria-label":(0,Se.Z)("Unclaimed")}):null,r?(0,Se.Z)("More"):null,i.createElement("div",{className:Wd},i.createElement(zd.V,null))))}Yd.defaultProps={showTitle:!0};const Xd=Yd,Jd=(0,o.P1)(jt.Z,(e=>({providers:e.providers,isPending:e.isProvidersPending,isPopulated:e.isProvidersPopulated,providersError:e.providersError}))),eu=(0,s.$j)((function(){return(0,o.P1)(xc,Jd,(e=>e.cloudServer),Uo.Z,((e,t,r,n)=>({servers:e,cloudProviders:t,cloudServerEntityID:r,dismissedUnclaimedServers:n})))}),(function(e,t){return{}}))((function(e){const{isExpanded:t,servers:r,cloudProviders:n,cloudServerEntityID:s,dismissedUnclaimedServers:o,showServerDownloadMessage:l,onToggleAllSourcesPress:c,onToggleLockedPress:d}=e,{machineIdentifier:u,providerIdentifier:p}=(0,k.Z)(),m=(0,b.Z)(),h=(0,a.$B)({path:vt.Z.prePlay,exact:!0});return i.createElement(i.Fragment,null,i.createElement(yc,null,i.createElement(Xd,{isAllSources:!0,showTitle:t,onPress:c})),i.createElement(Ec,null,i.createElement("div",{className:"AllSourcesSidebarContent-container-Wz3vfX"},r.map((e=>{const t=u===e.machineIdentifier&&p===Mt.Y3&&!m.source&&!h;return i.createElement("div",{key:e.machineIdentifier,className:"AllSourcesSidebarContent-serverContainer-tKVBtr"},i.createElement(pd,{detail:(0,kc.Z)(e),hasServerActions:e.isFullOwnedServer&&e.isConnected&&!e.isOutOfDate,iconNode:i.createElement(_c,{serverEntityID:e.entityID}),isOutOfDate:e.isOutOfDate,isPending:e.isPending,isRemote:!e.isPrivateConnection&&!e.isUnavailable,isSelected:t,isUnavailable:e.isUnavailable,isUnclaimed:e.isConnected&&!e.isClaimed&&!o[e.machineIdentifier],machineIdentifier:e.machineIdentifier,serverEntityID:e.entityID,title:(0,Nc.Z)(e),to:(0,Rc.Z)(e,{identifier:Mt.Y3},null,{key:Tr.D,pageType:Ac.km}),onToggleLockedPress:d}),i.createElement(_d,{providerEntityIDs:e.providers,serverEntityID:e.entityID,onToggleLockedPress:d}))})),n.providers.length?i.createElement(i.Fragment,null,i.createElement(pd,{iconNode:i.createElement("img",{className:"AllSourcesSidebarContent-iconImg-DBtzjj",src:At}),isPending:n.isPending,isUnavailable:n.providersError,title:(0,Se.Z)("Plex")}),i.createElement(_d,{providerEntityIDs:n.providers,serverEntityID:s,onToggleLockedPress:d})):null,l?i.createElement("div",{className:"AllSourcesSidebarContent-extrasContainer-SdOwow"},i.createElement(gd,null)):null)))}));var tu=r(20533);const ru=(0,o.P1)(xc,Uo.Z,((e,t)=>({showUnclaimed:e.some((e=>e.isConnected&&!e.isClaimed&&!t[e.machineIdentifier]))}))),nu=(0,s.$j)(ru,(function(e,t){return{}}))(Xd);var iu=r(60974);const su="#!/get-plex-media-server",au=function(e){const{size:t}=e;return i.createElement(Cl,{icon:i.createElement(iu.S,null),isSelected:hd(su),size:t,title:(0,Se.Z)("Your Media"),to:su})};var ou=r(71681),lu=r(97593),cu=r(38316);const du=(0,s.$j)((function(){return(0,o.P1)(ou.Z,lu.Z,((e,t)=>({route:(0,cu.Z)(e.downloads),isUnavailable:!t||t.isUnavailable})))}),(function(e,t){return{}}))((function(e){const{size:t,route:r,isUnavailable:n}=e,s=!!(0,a.$B)({path:vt.Z.downloads,exact:!0});return i.createElement(Cl,{icon:i.createElement(Kc,{icon:i.createElement(ml.D,null),isUnavailable:n}),isDim:n,isSelected:s,size:t,title:(0,Se.Z)("Downloads"),to:r})})),uu=function(e){const{size:t}=e,r=(0,a.$B)({path:vt.Z.home,exact:!0});return i.createElement(Cl,{"data-testid":"sidebarHome",icon:i.createElement(pl.A,null),isSelected:!!r,linkClassName:"HomeSourceLink-sourceLink-aaNRiO SourceSidebarLink-sourceLink-hLtTJn",size:t,title:(0,Se.Z)("Home"),to:"#"})};class pu extends i.Component{shouldComponentUpdate(e,t){return(0,tu.Z)(this,e,t)}render(){const{sources:e,hasSourceDetail:t,hasDownloadsSource:r,dismissedUnclaimedServers:n,isExpanded:s,hasNoProviders:a,isMoreMenuRequired:o,showServerDownloadMessage:l,onToggleAllSourcesPress:c,onToggleLockedPress:d,onReorderPinSources:u}=this.props,p=t?void 0:el.HC;return i.createElement(Ec,null,i.createElement("div",{className:s?"SourceSidebarContent-expandedSidebarContent-e8X1Bo":void 0},i.createElement(uu,{size:p}),e.length?e.map((e=>i.createElement(Nd,{key:e.key,dismissedUnclaimedServers:n,isReorderable:!0,providerEntityID:e.providerEntityID,serverEntityID:e.serverEntityID,size:p,source:e,onReorderPinSources:u,onToggleLockedPress:d}))):i.createElement("div",{className:"SourceSidebarContent-zeroState-Ux8ErY"},(0,Se.Z)("Your favorite sources will appear here. Any source in the MORE menu below can be saved here for quick access.")),l?i.createElement(au,{size:p}):null,r?i.createElement(du,{size:p}):null,s&&o&&!a?i.createElement(nu,{isAllSources:!1,onPress:c}):null))}}const mu=pu,hu="SourceSidebar-pane-mmshLu",gu=(0,cl.Z)(Tc.Z.defaultSpeed),yu={opacity:{duration:gu},x:{duration:gu,ease:"easeInOut"}},vu={appear:e=>({opacity:0,scale:1,x:"left"===e?"100%":"-100%",transition:yu}),enter:{opacity:1,scale:1,x:"0%",transition:yu},exit:e=>({opacity:0,scale:1,x:"left"===e?"100%":"-100%",transition:yu})};function fu(e,t){return t?e?"SourceSidebar-expandedSidebar-B0cYmO SourceSidebar-sidebar-yw2lNo":"SourceSidebar-collapsedSidebar-heX4mD SourceSidebar-sidebar-yw2lNo":"SourceSidebar-openSidebar-I364_Z SourceSidebar-sidebar-yw2lNo"}class bu extends i.Component{constructor(e,t){super(e,t),this.onMouseEnter=()=>{this.props.isSidebarCollapsed&&(this.resetExpandTimeout(),this.setState({isMouseOver:!0}))},this.onMouseLeave=()=>{this.clearSetExpandedTimeout(),this.setState((e=>({isExpanded:!!e.isLocked&&e.isExpanded,isMouseOver:!1})))},this.onMouseMove=()=>{this.props.isSidebarCollapsed&&!this.state.isLocked&&this.resetExpandTimeout()},this.onToggleAllSourcesPress=()=>{this.setState({isSidebarAllSources:!this.state.isSidebarAllSources})},this.onToggleLockedPress=e=>{this.setState((t=>{const r=null!=e?e:!t.isLocked;return{isLocked:r,isExpanded:!(!t.isMouseOver&&!r)&&t.isExpanded}}))},this.onReorderPinSources=()=>{this.setState({isReordering:!0,isLocked:!0})},this.onCloseReorderPinSources=()=>{this.setState({isReordering:!1,isLocked:!1})},this.state={isMouseOver:!1,isLocked:!1,isExpanded:!1,isSidebarCollapsed:e.isSidebarCollapsed,isReordering:!1,isSidebarAllSources:!1}}static getDerivedStateFromProps(e,t){return t.isSidebarCollapsed!==e.isSidebarCollapsed?{isSidebarCollapsed:e.isSidebarCollapsed}:null}componentWillUnmount(){this.clearSetExpandedTimeout()}clearSetExpandedTimeout(){this._setExpandedTimeoutID&&(window.clearTimeout(this._setExpandedTimeoutID),this._setExpandedTimeoutID=null)}resetExpandTimeout(){this.clearSetExpandedTimeout(),this._setExpandedTimeoutID=window.setTimeout((()=>this.setState({isExpanded:!0})),250)}render(){const{sources:e,hasSourceDetail:t,hasDownloadsSource:r,hasDismissedServerDownloadMessage:n,shouldShowServerDownloadMessage:s,dismissedUnclaimedServers:a,isPending:o,hasNoProviders:l,isMoreMenuRequired:c,isSidebarCollapsed:d}=this.props,{isExpanded:u,isReordering:p,isSidebarAllSources:m}=this.state,h=!d||u||p;return o?i.createElement(il,{isSidebarCollapsed:d},i.createElement(dl.Z,null)):i.createElement(i.Fragment,null,d?i.createElement("div",{className:"SourceSidebar-sidebarUnderlay-Npir7j"}):null,i.createElement("div",{className:fu(u||p,d),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove},p?i.createElement("div",{className:hu},i.createElement(Oc,{hasDownloadsSource:r,sources:e,onCloseReorderPinSources:this.onCloseReorderPinSources})):i.createElement(ll.M_,{initial:!1},i.createElement(ll.ww.div,{key:m?"right":"left",animate:"enter",className:hu,custom:m?"right":"left",exit:"exit",initial:"appear",variants:vu},m?i.createElement(eu,{isExpanded:h,showServerDownloadMessage:s,onToggleAllSourcesPress:this.onToggleAllSourcesPress,onToggleLockedPress:this.onToggleLockedPress}):i.createElement(mu,{dismissedUnclaimedServers:a,hasDownloadsSource:r,hasNoProviders:l,hasSourceDetail:t,isExpanded:h,isMoreMenuRequired:c,showServerDownloadMessage:s&&!n,sources:e,onReorderPinSources:this.onReorderPinSources,onToggleAllSourcesPress:this.onToggleAllSourcesPress,onToggleLockedPress:this.onToggleLockedPress})))))}}const Zu=bu;var Su=Object.defineProperty,Pu=Object.defineProperties,Iu=Object.getOwnPropertyDescriptors,Eu=Object.getOwnPropertySymbols,wu=Object.prototype.hasOwnProperty,Cu=Object.prototype.propertyIsEnumerable,Mu=(e,t,r)=>t in e?Su(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Du={dispatchSetupSources:$s.E8,dispatchStartFirstRunExperience:$s.mo},Ou=(0,s.$j)((function(){return(0,o.P1)(Lo.Z,Ro.Z,No,(0,o.P1)(c.Z,Eo.Z,((e,t)=>t.reduce(((t,r)=>{const n=(0,Co.Z)(r),i=(0,wo.Z)({sourceServer:e,sourceProvider:r,directories:n&&n.directories});return t.push(...i),t}),[]))),ir(),Uo.Z,Bo,Ho,St.Z,Ao,(0,o.P1)(xo.Z,ir(),To,((e,t,r)=>{if(!r)return!1;for(let r=0;r<e.length;r++){const{server:n,provider:i}=e[r];if(!n.isCloud&&n.friendlyName&&!n.isUnauthorized&&!n.isPending)return!0;if(n.isEmbedded)continue;if(!i)continue;const s=(0,Co.Z)(i);if(!s)continue;const{directories:a}=s;if(!t.find((e=>a.find((t=>t.id===e.directoryID))&&e.providerIdentifier===i.identifier)))return!0}return!1})),((e,t,r,n,i,s,a,o,c,d,u)=>{const{isSidebarCollapsed:p,sidebarSettings:{hasCompletedSetup:m}}=c;return{isAnonymousUser:e,hasInitialSources:t,hasPreferredEligibleServers:r,dismissedUnclaimedServers:s,defaultSources:n,sources:i,hasSourceDetail:i.some((e=>!!e.titleDetail)),hasDownloadsSource:l.Z.allowSyncDownload,hasDismissedServerDownloadMessage:a,shouldShowServerDownloadMessage:o,hasCompletedSetup:m,isSidebarCollapsed:p,hasNoProviders:d,isMoreMenuRequired:u}}))}),Du)((function(e){const t=e,{isAnonymousUser:r,hasPreferredEligibleServers:n,hasInitialSources:s,hasCompletedSetup:a,defaultSources:o,dispatchStartFirstRunExperience:l,dispatchSetupSources:c}=t,d=((e,t)=>{var r={};for(var n in e)wu.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Eu)for(var n of Eu(e))t.indexOf(n)<0&&Cu.call(e,n)&&(r[n]=e[n]);return r})(t,["isAnonymousUser","hasPreferredEligibleServers","hasInitialSources","hasCompletedSetup","defaultSources","dispatchStartFirstRunExperience","dispatchSetupSources"]),[p,m]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{r||!n||a||p?s&&!a&&c({sources:o}):(m(!0),l())}),[l,c,r,n,a,s,o,p,m]),i.createElement(Vo.Z,{isDelegated:!0,page:u.jy},i.createElement(Zu,(h=((e,t)=>{for(var r in t||(t={}))wu.call(t,r)&&Mu(e,r,t[r]);if(Eu)for(var r of Eu(t))Cu.call(t,r)&&Mu(e,r,t[r]);return e})({},d),Pu(h,Iu({isPending:!a})))));var h}));class Tu extends i.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e){jo.Z.error(e)}render(){return this.state.hasError?i.createElement(ol,null):i.createElement(Ou,null)}}const xu=Tu;function Au(){var e;const{machineIdentifier:t}=(0,a.UO)(),[r,n]=(0,i.useState)(!1),o=(0,s.I0)(),l=(0,i.useMemo)((()=>(0,So.Z)(t)),[t]),c=(0,s.v9)(l),d=null==(e=c.desktop)?void 0:e.settings.find((e=>"AcceptedEULA"===e.id));return(0,i.useEffect)((()=>{const e=window.setInterval((()=>{o((0,Pe.bc)())}),2e3);return()=>{window.clearInterval(e)}}),[o]),(0,i.useEffect)((()=>{d&&c.isFullOwnedServer&&c.isConnected&&c.isClaimed&&(d.value?(0,N.Z)("media",{machineIdentifier:c.machineIdentifier,providerIdentifier:Mt.Y3},{key:Tr.D,pageType:Ot.F6.Hub}):(0,N.Z)("serverSetup",{machineIdentifier:c.machineIdentifier}))}),[d,c.isClaimed,c.isConnected,c.isFullOwnedServer,c.machineIdentifier]),(0,i.useEffect)((()=>{const e=window.setTimeout((()=>{n(!0)}),3e5);return()=>{window.clearTimeout(e)}}),[]),i.createElement(Io.Z,null,i.createElement(Po.Z,null,i.createElement(xu,null),r?i.createElement(pr.Z,null,(0,Se.Z)("Something went wrong. Make sure the server is available and try again.")):i.createElement(I.Z,{description:(0,Se.Z)("Initializing Plex Media Server")},i.createElement(E.Z,null))))}var ku=r(82650),Nu=r(35387),Ru=r(6742),Lu=r(19755),ju=r.n(Lu),Vu=r(13469),Uu=r.n(Vu),Fu=r(41444),Bu=r(26051),_u=r(79167),zu=r(76389),Hu=r(97577);var Wu=r(10023),Gu=r(2579),Qu=r(54729),$u=r(92413),Ku=r(60239),qu=r(65427),Yu=r(14280),Xu=r(68474),Ju=r(64638);const ep=function(){return i.createElement("div",{className:"PlexHeaderImage-plexImageContainer-CYUorb"},i.createElement("div",{className:"PlexHeaderImage-plexImage-P1bVmG"}))};var tp=r(23414);var rp=Object.defineProperty,np=Object.getOwnPropertySymbols,ip=Object.prototype.hasOwnProperty,sp=Object.prototype.propertyIsEnumerable,ap=(e,t,r)=>t in e?rp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function op(e){const t=e,{component:r}=t,n=((e,t)=>{var r={};for(var n in e)ip.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&np)for(var n of np(e))t.indexOf(n)<0&&sp.call(e,n)&&(r[n]=e[n]);return r})(t,["component"]);return i.createElement(r,((e,t)=>{for(var r in t||(t={}))ip.call(t,r)&&ap(e,r,t[r]);if(np)for(var r of np(t))sp.call(t,r)&&ap(e,r,t[r]);return e})({className:"SignInFormSection-section-gdej2Z"},n))}op.defaultProps={component:"div"};const lp=op,cp="SkipSignInMessage-item-qgyBgn",dp=function(e){return i.createElement(lp,null,i.createElement("div",{className:"SkipSignInMessage-header-mIp8T7"},(0,Se.Z)("You must be signed in for Plex to work properly. If you are not signed in")),i.createElement("ul",{className:"SkipSignInMessage-list-Yahrrf"},i.createElement("li",{className:cp},(0,Se.Z)("Any connections between your media server and players WILL NOT BE SECURE")),i.createElement("li",{className:cp},(0,Se.Z)("You may experience degraded streaming performance")),i.createElement("li",{className:cp},(0,Se.Z)("It will be more difficult, and sometimes impossible, to find your server and discover players")),i.createElement("li",{className:cp},(0,Se.Z)("You will not be able to access your media server from outside your home")),i.createElement("li",{className:cp},(0,Se.Z)("You will not be able to access content and many features provided by Plex"))))};var up=r(68173);class pp extends i.Component{constructor(e,t){super(e,t),this.onSwitchToSkipSignInPress=()=>{this.setState({isSkipSignInVisible:!0})},this.onStillTherePress=()=>{this.setState({isSkipSignInVisible:!1}),this.props.onStillTherePress()},this.onSignInPress=()=>{this.setState({isSkipSignInVisible:!1}),this.props.onSignInPress()},this.state={isSkipSignInVisible:!1}}render(){const{to:e,code:t,signUp:r,isBusy:n,onSkipSignInPress:s}=this.props,o=!(n||t),l=!o,c=this.state.isSkipSignInVisible,d=(0,a.LX)(up.Z.location.pathname,{path:vt.Z.serverSetup});return i.createElement(vc.Z,{autoScroll:!0,className:"SignInLaunchPagePoll-page-EgO9ex"},d&&!c?i.createElement(Wo.Z,{className:"SignInLaunchPagePoll-switchToSkipSignInLink-tZtlV9",kind:Jo._8,onPress:this.onSwitchToSkipSignInPress},(0,Se.Z)("What's this?")):null,i.createElement(ep,null),i.createElement("div",{className:"SignInLaunchPagePoll-container-GbUpky"},c?i.createElement(dp,null):null,i.createElement("div",{className:"SignInLaunchPagePoll-section-sAmgqd"},l?i.createElement(tp.Z,{className:"SignInLaunchPagePoll-button-mlNjmR SpinnerButton-button-tcanHL Button-button-TxWeuE Link-link-SxPFpG Button-large-mFYLSo",isSpinning:!t,kind:Jo._8,size:el.ln,target:"_blank",to:e,type:"submit",onPress:this.onSignInPress},r?(0,Se.Z)("Sign up"):(0,Se.Z)("Sign in")):null,o?i.createElement(Wo.Z,{kind:Jo._8,onPress:this.onStillTherePress},(0,Se.Z)("Are you still there?")):null)),c?i.createElement(Wo.Z,{className:"SignInLaunchPagePoll-addendumLink-nRxdyh",kind:Jo._8,onPress:s},(0,Se.Z)("Skip and accept limited functionality")):null)}}const mp=pp;var hp=Object.defineProperty,gp=Object.getOwnPropertySymbols,yp=Object.prototype.hasOwnProperty,vp=Object.prototype.propertyIsEnumerable,fp=(e,t,r)=>t in e?hp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const bp={dispatchPreloadPIN:$u.fJ,dispatchBeginPolling:$u.W$,dispatchStopPolling:$u.FN,dispatchSkipSignIn:$u.WW};class Zp extends i.Component{constructor(){super(...arguments),this.onSignInPress=()=>{this.props.dispatchBeginPolling({pinID:this.props.pinID})},this.onStillTherePress=()=>{this.props.dispatchPreloadPIN()},this.onSkipSignInPress=()=>{this.props.dispatchSkipSignIn()}}componentDidMount(){this.props.dispatchPreloadPIN()}componentWillUnmount(){this.props.dispatchStopPolling()}render(){const e=this.props,{dispatchPreloadPIN:t,dispatchBeginPolling:r,dispatchStopPolling:n,dispatchSkipSignIn:s}=e,a=((e,t)=>{var r={};for(var n in e)yp.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&gp)for(var n of gp(e))t.indexOf(n)<0&&vp.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchPreloadPIN","dispatchBeginPolling","dispatchStopPolling","dispatchSkipSignIn"]);return i.createElement(Ju.Z,((e,t)=>{for(var r in t||(t={}))yp.call(t,r)&&fp(e,r,t[r]);if(gp)for(var r of gp(t))vp.call(t,r)&&fp(e,r,t[r]);return e})({component:mp,onSignInPress:this.onSignInPress,onSkipSignInPress:this.onSkipSignInPress,onStillTherePress:this.onStillTherePress},a))}}const Sp=(0,s.$j)(Qu.Z,bp)(Zp);var Pp=r(63776),Ip=Object.defineProperty,Ep=Object.getOwnPropertySymbols,wp=Object.prototype.hasOwnProperty,Cp=Object.prototype.propertyIsEnumerable,Mp=(e,t,r)=>t in e?Ip(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Dp={dispatchReadStoredPIN:$u.Ty};class Op extends i.Component{componentDidMount(){this.props.dispatchReadStoredPIN({shouldCreatePIN:!0})}render(){const e=this.props,{pinID:t,dispatchReadStoredPIN:r}=e,n=((e,t)=>{var r={};for(var n in e)wp.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ep)for(var n of Ep(e))t.indexOf(n)<0&&Cp.call(e,n)&&(r[n]=e[n]);return r})(e,["pinID","dispatchReadStoredPIN"]);return t?i.createElement(Ju.Z,((e,t)=>{for(var r in t||(t={}))wp.call(t,r)&&Mp(e,r,t[r]);if(Ep)for(var r of Ep(t))Cp.call(t,r)&&Mp(e,r,t[r]);return e})({component:Xu.Z,pinID:t,replace:!0},n)):i.createElement(Pp.Z,null,i.createElement(dl.Z,null))}}const Tp=(0,s.$j)(Qu.Z,Dp)(Op);var xp=Object.defineProperty,Ap=Object.getOwnPropertySymbols,kp=Object.prototype.hasOwnProperty,Np=Object.prototype.propertyIsEnumerable,Rp=(e,t,r)=>t in e?xp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Lp=(e,t)=>{for(var r in t||(t={}))kp.call(t,r)&&Rp(e,r,t[r]);if(Ap)for(var r of Ap(t))Np.call(t,r)&&Rp(e,r,t[r]);return e};const jp={dispatchResetAuthCodeExchange:$u.tD,dispatchSignInWithAuthToken:Ku.I3};class Vp extends i.Component{componentDidMount(){this.props.dispatchResetAuthCodeExchange()}componentDidUpdate(e){this.props.authToken!==e.authToken&&this.props.authToken&&this.props.dispatchSignInWithAuthToken({authToken:this.props.authToken,onSignInSuccess:this.props.signUp?()=>(0,N.Z)("home"):null})}render(){const e=this.props,{providerID:t,errorMessage:r,fatalErrorMessage:n,signUp:s,isPollClient:a,dispatchResetAuthCodeExchange:o,dispatchSignInWithAuthToken:l}=e,c=((e,t)=>{var r={};for(var n in e)kp.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ap)for(var n of Ap(e))t.indexOf(n)<0&&Np.call(e,n)&&(r[n]=e[n]);return r})(e,["providerID","errorMessage","fatalErrorMessage","signUp","isPollClient","dispatchResetAuthCodeExchange","dispatchSignInWithAuthToken"]);return n?i.createElement(Yu.Z,null):t?i.createElement(Ju.Z,Lp({component:Xu.Z,providerID:t,replace:!0,signUp:s},c)):a?i.createElement(Sp,Lp({signUp:s},c)):i.createElement(Tp,{signUp:s})}}const Up=(0,s.$j)((function(){return(0,o.P1)(Qu.Z,(e=>Lp({isPollClient:(0,qu.Z)()},e)))}),jp)(Vp),Fp=Gu.Z.extend({component:e=>i.createElement(Wu.Z,null,i.createElement(Up,{signUp:e.signUp}))});var Bp=r(8523),_p=r(25755),zp=r(79279),Hp=r(27254),Wp=r(65510),Gp=r.n(Wp);const Qp=Bu.Z.ItemView.extend({className:"setup-basic-container",template:Gp(),ui:{modalContainer:".modal-container",connectCheckbox:"#connect",publishServerCheckbox:"#PublishServerOnPlexOnlineKey",submitBtn:".submit-btn",nextBtn:".next-btn"},collectionEvents:{reset:"render"},events:{"change input[id]":"onInputChange","submit #setup-basic-form":"onSubmit","change #PublishServerOnPlexOnlineKey":"onPublishSettingChange"},initialize:function(){Uu().bindAll(this,"onPlexPassModalClose"),this.collection=this.model.get("desktop").get("settings"),this.collection.populate({reset:!0}),this.model.isVersionOrNewer("0.9.15.5")?this.changes={PublishServerOnPlexOnlineKey:1}:this.changes={FirstRun:0,PublishServerOnPlexOnlineKey:1};const e=this.model.get("superToken");e&&(this.changes.PlexOnlineToken=e);const t=(0,Ze.DB)("appModel").get("user").get("hasPlexSubscription");this.isPlexPassModalOpen=!this.model.get("isDesktop")&&!t},serializeData:function(){const e=this.model.toJSON(),t=this.collection.get("FriendlyName"),r=this.collection.get("PublishServerOnPlexOnlineKey");return{server:e,friendlyNameSetting:t?t.toJSON():null,publishSetting:r?r.toJSON():null}},mountReact:function(){Gl.render(i.createElement(s.zt,{store:(0,Ze.DB)("appStore")},i.createElement(Hp.Z,{isOpen:this.isPlexPassModalOpen,metricsProperties:{context:d.SETUP_WIZARD,firstRun:!0},origin:zp.pp,onModalClose:this.onPlexPassModalClose})),this.ui.modalContainer[0])},unmountReact:function(){this.isRendered&&Gl.unmountComponentAtNode(this.ui.modalContainer[0])},submit:function(){const e=this.ui.submitBtn;if(e.hasClass("active"))return;e.addClass("active"),(0,Ze.DB)("metrics").trackClick({action:ss.pg,page:u.YB,pane:"name",firstRun:!0,value:this.ui.publishServerCheckbox.is(":checked")});let t=this.save();t=t.done((()=>{this.ui.nextBtn.click()})),t.always((function(){e.removeClass("active")}))},save(){return this.saveChanges().then((()=>this.claimServer()))},saveChanges(){return(Uu().isEmpty(this.changes)?ju().Deferred().resolve().promise():this.collection.first().save(this.changes)).then(null,(()=>{Bp.Z.trigger("show:alert",{type:"error",message:(0,Se.Z)("There was a problem saving these settings.")})}))},claimServer(){const e=(0,Ze.DB)("appModel"),t=e.get("cloudServer");return!this.model.supports("claimServer")||this.model.get("isClaimed")||this.model.get("superToken")||e.get("user").get("anonymous")?ju().Deferred().resolve().promise():(0,_p.Z)(t.populate().then((()=>Fu.Z.execute("signInServer",{claim:!0,cloudAccount:this.model.get("desktop").get("cloudAccount")}).then(null,(()=>{Bp.Z.trigger("show:alert",{type:"error",message:(0,Se.Z)("There was a problem claiming this server.")})})))))},onBeforeRender:function(){this.unmountReact()},onRender:function(){this.mountReact()},onClose:function(){this.unmountReact()},onInputChange:function(e){const t=e.currentTarget;let r=t.value;"checkbox"===t.type&&(r=t.checked?1:0),this.changes[t.id]=r},onSubmit:function(e){e.preventDefault(),this.submit()},onPlexPassModalClose:function(){this.isPlexPassModalOpen=!1,this.mountReact()}});var $p=r(69272),Kp=r(83579),qp=r(49399),Yp=r.n(qp);const Xp=Bu.Z.ItemView.extend({className:"setup-complete-container",template:Yp(),ui:{modalContainer:".modal-container",submitBtn:".submit-btn",doneBtn:".done-btn"},collectionEvents:{reset:"render"},events:{"change input[id]":"onInputChange","submit #setup-complete-form":"onSubmit"},initialize:function(){this.collection=this.model.get("desktop").get("settings"),this.collection.populate({reset:!0}),this.changes={};const e=Ze.DB("appModel").get("user");e.get("isSignedIn")?e.fetch().done(this.whenRendered((()=>{this.ui.submitBtn.removeClass("active")}))):this.once("attached",(()=>{this.ui.submitBtn.removeClass("active")}))},serializeData:function(){const e=this.collection.get("collectUsageData");return{devicesImg:Kp,collectUsageDataSetting:e?e.toJSON():null}},submit:function(){const e=this.ui.submitBtn;e.hasClass("active")||(e.addClass("active"),this.save().always(this.whenRendered((function(){this.ui.doneBtn.click(),e.removeClass("active")}))))},save:function(){this.saved=!0,Uu().has(this.changes,"collectUsageData")&&!this.changes.collectUsageData&&Ze.DB("metrics").trackClick({action:ss.mX,page:u.YB,pane:"complete",firstRun:!0});const e=this.collection.first().save(this.changes),t=this.model.get("sections").filter((e=>e.isNew())).map((e=>e.save())),r=ju().when(e,(0,$p.Z)(t));return r.fail((()=>{Bp.Z.trigger("show:alert",{type:"error",message:(0,Se.Z)("There was a problem saving these settings.")})})),r},onClose:function(){this.saved||this.save()},onInputChange:function(e){const t=e.currentTarget;let r=t.value;"checkbox"===t.type&&(r=t.checked?1:0),this.changes[t.id]=r},onSubmit:function(e){e.preventDefault(),this.submit()}});var Jp=r(93819),em=r.n(Jp);const tm=Bu.Z.ItemView.extend({className:"setup-error-container",template:em()});var rm=r(87414),nm=r(13353),im=r(49730),sm=r(10292),am=r.n(sm);const om=Bu.Z.ItemView.extend({className:"setup-intro-container",template:am(),serializeData:()=>({computerImg:rm,mediaImg:nm,playImg:im})});var lm=r(90926),cm=r(97283),dm=r(24314),um=r(36824),pm=r.n(um);const mm={artist:"music",movie:"film",photo:"picture",show:"display"},hm=Bu.Z.ItemView.extend({tagName:"li",className:"card-tile-list-single-item",template:pm(),events:{"click .edit-section-btn":"onEditClick","click .delete-section-btn":"onDeleteClick"},serializeData:function(){var e;const t=this.model.server,r=this.model.toJSON(),n=null==(e=r.locations)?void 0:e[0],i=r.locations?r.locations.length:0;return{section:r,serverID:t.id,icon:mm[r.type],path:n.path,more:i-1}},bindings:{".section-title":{modelAttribute:"title"}},onEditClick:function(e){e.preventDefault();const t=this.model,r=new dm.Z({model:t,server:t.server,isDefaultSection:t.isNew()});t.isNew()&&r.promise.always((()=>{t.trigger("destroy",t,t.collection)})),Bp.Z.trigger("show:modal",r)},onDeleteClick:function(e){e.preventDefault();const t=this.model;t.isNew()?t.trigger("destroy",t,t.collection):Fu.Z.execute("deleteSection",{section:t})}}),gm=cm.Z.extend({tagName:"ul",className:"list card-tile-list",itemView:hm});var ym=r(53361),vm=r.n(ym);const fm=Bu.Z.Layout.extend({className:"setup-library-container",template:vm(),regions:{list:".setup-section-list-container"},events:{"click .add-section-btn":"onAddSectionClick"},metricsValue:function(){return this.collection.size()},initialize:function(e){const t=this.model,r=t.get("sections"),n=new lm.Z([],{server:t,url:"/services/defaultLibraries"});this.collection=r,this.model.supports("defaultSections")&&e.isFirstVisitToSubset&&ju().when(n.populate(),r.populate()).done((()=>{r.length||n.forEach((e=>{e.collection=r,r.add(e)}))}))},onRender:function(){this.list.show(new gm({collection:this.collection}))},onAddSectionClick:function(e){e.preventDefault(),Bp.Z.trigger("show:modal",new dm.Z({server:this.model}))}});var bm=r(72487),Zm=r.n(bm);const Sm=Bu.Z.ItemView.extend({className:"setup-loading-container",template:Zm()});var Pm=r(27659),Im=r.n(Pm);const Em={setupIntro:"intro",setupError:"error",setupBasic:"name",setupLibrary:"library",setupComplete:"complete"},wm=[_u.HN,_u.NV,_u.E4],Cm=Bu.Z.Layout.extend({className:"container",template:Im(),maxAttempts:120,ui:{header:".setup-header"},regions:{container:".setup-container"},events:{"click .segment-btn":"onNavClick","click .next-btn":"onNavClick","click .done-btn":"onDoneClick"},onlyAfterRender:["onAgentsSuccess","onAgentsFail","onUpdatesComplete"],initialize:function(e){Uu().bindAll(this,"start","onAgentsSuccess","onAgentsFail","onUpdatesComplete","onSkipSignInChange"),this.subset=e.subset||"setupIntro",this.attempts=0,this._visitedSubsets={},jo.Z.info("Starting the setup wizard");const t=(0,Ze.DB)("appModel");this.model=(0,zu.SW)(t,e),this.listenTo(t,"change:skipSignIn",this.onSkipSignInChange)},serializeData:function(){return{subset:this.subset}},renderSubset:function(){if(this.model.get("shared"))return void this.navigate("setupError");const e=(0,Ze.DB)("appModel"),t=e.get("user").server,r=t.populate();r.done(this.whenRendered((()=>{this.navigate("setupIntro")}))),r.fail((()=>{e.get("primaryServer").get("desktop").get("settings").fetch().then((e=>!0===e.get("AcceptedEULA").get("value")?ju().Deferred().resolve():ju().Deferred().reject())).then(this.whenRendered((()=>{this.navigate("setupIntro")}))).fail(this.whenRendered((()=>{const r=e.get("skipSignIn"),n=t.get("isUnavailable");this.navigate(r||n?"setupIntro":"setupSignIn")})))}))},start:function(){if(this.attempts>=this.maxAttempts)return jo.Z.error("Failed to start the setup wizard after "+this.attempts+" attempts"),void this.navigate("setupError");this.attempts++;const e=this.model.get("startState");if(e)(0,jo.Z)("Waiting for server to start ("+e+")"),this.model.fetch().done(Uu().delay(this.start,500));else{const e=new Hu.Z([],{server:this.model}).fetch({timeout:0});e.done(this.onAgentsSuccess),e.fail(this.onAgentsFail)}},navigate:function(e){const t="setupIntro"===e,r="setupSignIn"===e,n="setupLoading"===e,i=function(e){return{setupSignIn:Fp,setupIntro:om,setupLoading:Sm,setupError:tm,setupBasic:Qp,setupLibrary:fm,setupComplete:Xp}[e]}(e),s=Em[e];this.previousSubset=this.subset,this.subset=e,s&&(0,Ze.DB)("metrics").trackView({page:u.YB,pane:s,firstRun:!0});const a=!this._visitedSubsets[e];this._visitedSubsets[e]=!0;const o=new i({model:this.model,isFirstRun:!0,isFirstVisitToSubset:a});this.container.show(o),this.ui.header.toggleClass("hidden",t||r),this.$el.addClass(e),this.previousSubset!==e&&this.$el.removeClass(this.previousSubset),n&&this.start()},onRender:function(){this.renderSubset()},onAgentsSuccess:function(e){(0,jo.Z)("Looking for a core agent");const t=wm.find((t=>e.get(t)));t?((0,jo.Z)(t+" found"),this.model.get("desktop").get("settings").populate().then((e=>e.get("AcceptedEULA").save({AcceptedEULA:!0}))),Fu.Z.execute("updateChannel",{server:this.model,silent:!0}).always(this.onUpdatesComplete)):(jo.Z.error("No core agents found"),this.navigate("setupError"))},onAgentsFail:function(){jo.Z.warn("Unable to request agents"),Uu().delay(this.start,500)},onUpdatesComplete:function(){this.navigate("setupBasic")},onNavClick:function(e){e.preventDefault();const t=ju()(e.currentTarget),r=t.data("subset");t.hasClass("segment-btn")&&"setupBasic"===this.subset&&this.container.currentView?(e.preventDefault(),this.container.currentView.submit()):this.navigate(r)},onDoneClick:function(e){e.preventDefault(),(0,Ze.DB)("metrics").trackClick({page:u.YB,action:ss.ly,firstRun:!0}),(0,N.Z)("home")},onSkipSignInChange(){this.renderSubset()}});var Mm=r(47532),Dm=r(42674),Om=r(88170),Tm=r(15770);const xm=(0,s.$j)((function(){return(0,o.P1)((0,Om.Z)(),(e=>{const t=e.settings.find((e=>"AcceptedEULA"===e.id));return{isSettingsPopulated:e.isSettingsPopulated,settingsError:e.settingsError,hasAcceptedEULA:!(!t||!t.value),isAcceptedEULASaving:!(!t||!t.isSaving)}}))}),(function(e,t){const{serverEntityID:r,forwardUrl:n}=t;return{onPopulateSettings(){e((0,Yc.R_)({serverEntityID:r}))},onAcceptEULA(){e((0,Yc.o1)({serverEntityID:r,setting:{id:"AcceptedEULA",value:!0}}))},onSkipSignIn(){(0,Ze.DB)("metrics").trackClick({page:u.H4,action:ss.AM,firstRun:!0}),e((0,Pe.nL)({url:n}))}}}))((function(e){const{isSettingsPopulated:t,settingsError:r,hasAcceptedEULA:n,isAcceptedEULASaving:s,onPopulateSettings:a,onAcceptEULA:o,onSkipSignIn:l}=e;return(0,Tm.Z)((()=>{a()})),(0,Tm.Z)((()=>{o()}),t&&!n),(0,Tm.Z)((()=>{l()}),n&&!s),r?i.createElement(ws.Z,{description:(0,Se.Z)("The server you're trying to access doesn't seem to exist."),title:(0,Se.Z)("Media server not found")}):i.createElement(Pp.Z,null,i.createElement(dl.Z,null))})),Am=(0,s.$j)((function(){return(0,o.P1)(((e,{serverEntityID:t})=>t),(e=>e.primaryServer),(e=>e.isWaitingForPrimaryServer),c.Z,((e,t,r)=>({serverEntityID:e||t,isWaitingForPrimaryServer:r})))}))((function(e){const{serverEntityID:t,isWaitingForPrimaryServer:r}=e,n=(0,b.Z)(),s=(0,es.Z)(n.forwardUrl);return t?i.createElement(Dm.Z,{hideUnclaimedPage:!0,serverEntityID:t},s?i.createElement(xm,{forwardUrl:s,serverEntityID:t}):i.createElement(Mm.Z,{key:(0,Ru.Z)("SetupPage",t),className:aB,view:Cm,viewOptions:{serverEntityID:t,subset:"setupBasic"}})):r?i.createElement(Pp.Z,null,i.createElement(dl.Z,null)):i.createElement(ws.Z,{description:(0,Se.Z)("The server you're trying to access doesn't seem to exist."),title:(0,Se.Z)("Media server not found")})}));function km(){const e=(0,k.Z)(),t=(0,ku.Z)(Nu.cN,e.machineIdentifier);return i.createElement(Io.Z,null,i.createElement(Po.Z,null,i.createElement(Am,{serverEntityID:t})))}var Nm=r(33606),Rm=r(96913);function Lm(){return(0,i.useEffect)((()=>(Nm.ZP.startPeriod(Sd.PS),()=>{Nm.ZP.endPeriod(Sd.PS)})),[]),i.createElement(Mm.Z,{key:"UserSelectModal",className:"UserSelectModal-darkModalBackdrop-hbxDAc",view:Rm.Z,viewOptions:{isForced:!0,backdrop:!1}})}var jm=r(95385);const Vm=(0,o.P1)(ms.Z,(e=>e.showViewStateSyncPrompt));var Um=r(52746),Fm=r(70376),Bm=r(48321),_m=r(8292),zm=r(33180),Hm=Object.getOwnPropertySymbols,Wm=Object.prototype.hasOwnProperty,Gm=Object.prototype.propertyIsEnumerable;function Qm(){const e=(0,s.I0)(),{metricsPage:t,metricsContextTuple:r}=(0,Z.Zn)(),{machineIdentifier:n,providerIdentifier:a}=(0,k.Z)(),o=(0,s.v9)((0,ae.Z)(n)),l=(0,s.v9)((0,ie.Z)(n,a)),c=(0,b.Z)();return(0,i.useEffect)((()=>{const n=c,{key:i,channel:s,source:a}=n,d=((e,t)=>{var r={};for(var n in e)Wm.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Hm)for(var n of Hm(e))t.indexOf(n)<0&&Gm.call(e,n)&&(r[n]=e[n]);return r})(n,["key","channel","source"]);e((0,zm.D7)({server:o,provider:l,metadataKey:i?(0,es.Z)(i):void 0,channel:s?(0,es.Z)(s):void 0,prePlayRouteParams:d,metricsPage:t,metricsContextTuple:r}))}),[c,e,t,l,o,r]),i.createElement(Pp.Z,null,i.createElement(dl.Z,null))}function $m(){const{machineIdentifier:e,providerIdentifier:t}=(0,k.Z)(),r=(0,b.Z)();return i.createElement(Io.Z,null,i.createElement(Po.Z,null,i.createElement(_m.Z,{machineIdentifier:e,providerIdentifier:t},i.createElement(Z.ZP,{metricsContextParam:(0,es.Z)(r.context),metricsPage:u.sD},i.createElement(Qm,null)))))}var Km=r(19124),qm=r(88479),Ym=r(96114),Xm=r(1259),Jm=r(91824),eh=r(99485);function th({steps:e,activeIndex:t,setActiveIndex:r}){const n=(0,i.useMemo)((()=>Array.from(new Array(e.length))),[e]);return i.createElement(U.X,{gap:B.$u.S},n.map(((e,n)=>i.createElement(rh,{key:n,index:n,isActive:n===t,setActiveIndex:r}))))}function rh({index:e,setActiveIndex:t,isActive:r}){const n=(0,i.useCallback)((()=>{t(e)}),[e,t]);return i.createElement(Xm.e,{"aria-label":(0,Se.Z)("Go to step {1}",e+1),className:Ra()("WhatsNewInfoStepsModal-dot-QWwLPL",r&&"WhatsNewInfoStepsModal-activeDot-Z6Carm"),onPress:n})}function nh({steps:e,isDismissable:t,isOpen:r,onClose:n}){const[s,a]=(0,i.useState)(0),o=(0,i.useCallback)((()=>{const t=s+1;t>=e.length?n():a(t)}),[s,n,e.length]),l=(0,i.useMemo)((()=>e[s]),[s,e]);if(!l)return null;const{backgroundClassName:c,backgroundColor:d,backgroundSrc:u,screenClassName:p,screenSrc:m,showProgressDots:h=!0,title:g,copy:y}=l;return i.createElement(Jm.Z,{backgroundClassName:c,backgroundColor:d,backgroundSrc:u,isDismissable:t,isOpen:r,screenClassName:p,screenSrc:m,onClose:n},i.createElement(F.K,{align:B.xM.Center,gap:B.$u.XL,grow:!0,width:"100%"},i.createElement("div",{className:"WhatsNewInfoStepsModal-textInnerContainer-Mv8Eyl"},i.createElement(F.K,{align:B.xM.Center,gap:B.$u.XL,width:"100%"},i.createElement(Ws.x,{align:B.xM.Center,component:"h1",level:Ws.N.Heading2},g),i.createElement(F.K,{gap:B.$u.L},y))),i.createElement(F.K,{align:B.xM.Center,gap:B.$u.XL,width:"100%"},h?i.createElement(th,{activeIndex:s,setActiveIndex:a,steps:e}):null,i.createElement(eh.Z,{onPress:o},(0,Se.Z)("Continue")))))}var ih=Object.defineProperty,sh=Object.getOwnPropertySymbols,ah=Object.prototype.hasOwnProperty,oh=Object.prototype.propertyIsEnumerable,lh=(e,t,r)=>t in e?ih(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ch({icon:e,title:t,description:r}){return i.createElement("li",null,i.createElement(F.K,{gap:B.$u.XL},i.createElement(U.X,{gap:B.$u.M,verticalAlign:B.xM.Center},i.createElement(e,{color:B.Il.Accent,size:B.$u.XXL}),i.createElement(F.K,null,t?i.createElement(Ws.x,{component:"h2",level:Ws.N.Heading5},t):null,i.createElement(Ws.x,{color:t?B.Il.Muted:B.Il.Default,level:Ws.N.Body1},r)))))}function dh({items:e}){return i.createElement("ul",{className:"WhatsNewList-container-AAhiWv"},i.createElement(F.K,{gap:B.$u.XL},e.map(((e,t)=>i.createElement(ch,((e,t)=>{for(var r in t||(t={}))ah.call(t,r)&&lh(e,r,t[r]);if(sh)for(var r of sh(t))oh.call(t,r)&&lh(e,r,t[r]);return e})({key:t},e))))))}var uh=r(22379),ph=r(11117),mh=r(35141);const hh="CommunityWhatsNewModal-screen-TvIiK0 WhatsNewModal-screenWrapper-taR1DI";function gh(){return i.createElement(dh,{items:[{icon:Km.f,description:(0,Se.Z)("Keep track of movies and shows youve watched and more.")},{icon:qm.y,description:(0,Se.Z)("See what your friends are watching, rating, and saving to their watchlist.")},{icon:Ym.T,description:(0,Se.Z)("Control which of your activities your friends can see on Plex.")}]})}function yh(){const e=(0,s.I0)(),t=(0,is.b)(),r=(0,is.b)(),n=(0,s.v9)(cs.Z),[a,{isSuccess:o}]=(0,Ms.lU)(),l=(0,s.v9)((0,qe.Z)(Ue.Qo)),{sidebarSettings:{hasCompletedSetup:c}}=(0,s.v9)(St.Z),{isPending:d,isPopulated:u,error:p,details:{uuid:m}}=(0,s.v9)(ms.Z),{details:h,isPopulated:g}=(0,fs.Z)(m),y=l&&c&&g&&!(null==h?void 0:h.hasSeenOnboarding),v=(0,i.useCallback)((()=>{a({input:{hasSeenOnboarding:!0}})}),[a]);return(0,i.useEffect)((()=>{d||u||p||e(hs.Z.actions.fetchUserDetails({server:n}))}),[n,e,d,u,p]),(0,i.useEffect)((()=>{y&&t.onOpen()}),[y,t]),(0,i.useEffect)((()=>{o&&(t.onClose(),r.onClose())}),[o,r,t]),g&&(null==h?void 0:h.hasSeenOnboarding)?null:i.createElement(i.Fragment,null,i.createElement(nh,{isOpen:t.isOpen,steps:[{screenSrc:uh,screenClassName:hh,title:(0,Se.Z)("Welcome to Discover Together"),copy:i.createElement(gh,null),showProgressDots:!1},{screenSrc:ph,screenClassName:hh,backgroundClassName:"CommunityWhatsNewModal-backgroundContainer2-QayyYu UpsellModal-backgroundContainer-RikWr2",title:(0,Se.Z)("Personality goes a long way"),copy:i.createElement(Ws.x,{align:B.xM.Center,level:Ws.N.Body1},(0,Se.Z)("Your profile is at the heart of your Plex experience: what youve watched, rated, & saved to your watchlist."))},{screenSrc:mh,screenClassName:"CommunityWhatsNewModal-screen3-OTUNZw WhatsNewModal-screenWrapper-taR1DI",backgroundClassName:"CommunityWhatsNewModal-backgroundContainer3-pH_B9X UpsellModal-backgroundContainer-RikWr2",title:(0,Se.Z)("Let your friends be your guide"),copy:i.createElement(Ws.x,{align:B.xM.Center,level:Ws.N.Body1},(0,Se.Z)("Throughout Plex, youll now see what your friends are streaming, liking, & excited to watch next."))}],onClose:r.onOpen}),i.createElement(Ps.Z,{buttonLabel:(0,Se.Z)("Finish"),isOnboarding:!0,isOpen:r.isOpen,onClose:v}))}function vh(){return i.createElement("div",{className:"PageHeaderPlaceholder-container-dQ5VUs"})}var fh=r(15579),bh=r(76613);const Zh=(0,o.P1)(bh.Z,(e=>e.announcements)),Sh=(0,o.P1)(Zh,(e=>e.filter((e=>!e.read))));var Ph=r(52084);const Ih=(0,o.P1)(bh.Z,(e=>e.invites)),Eh=function(){const e=(0,sl.Z)(),t=(0,Se.Z)("An unexpected error is impacting the navigation bar");return i.createElement("div",{className:"ErrorNavBar-container-_0iluT NavBar-container-F87RQ_"},i.createElement(Go.Z,{"aria-label":t,component:Wo.Z,tooltip:t,tooltipAttachment:Qo.eO,onPress:e.onOpen},i.createElement(al.Z,{className:"ErrorNavBar-icon-lgE3DV"})),i.createElement(nl,{errorMessage:`${t}.`,isOpen:e.isOpen,onModalClose:e.onClose}))};var wh=r(14302),Ch=r(97013),Mh=r(85985),Dh=r(11376),Oh=r(51544),Th=r(51033),xh=r(21366),Ah=r(85750),kh=r(56201),Nh=r(39008),Rh=(e=>(e.AccountSettingsButton="accountSettingsNavBarBtn",e.AvatarButton="avatarNavBarBtn",e))(Rh||{});const Lh={feature:Ue.Ll,popovers:[{id:"accountSettingsNavBarBtn",title:()=>(0,Se.Z)("Manage your Plex Home and Library Access in Account Settings")},{id:"avatarNavBarBtn",title:()=>(0,Se.Z)("Click to view your new Plex Profile")}]};var jh=r(56142),Vh=r(88280),Uh=r(52673),Fh=r(26377);var Bh=Object.defineProperty,_h=Object.defineProperties,zh=Object.getOwnPropertyDescriptors,Hh=Object.getOwnPropertySymbols,Wh=Object.prototype.hasOwnProperty,Gh=Object.prototype.propertyIsEnumerable,Qh=(e,t,r)=>t in e?Bh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$h=(e,t)=>{for(var r in t||(t={}))Wh.call(t,r)&&Qh(e,r,t[r]);if(Hh)for(var r of Hh(t))Gh.call(t,r)&&Qh(e,r,t[r]);return e};const Kh={top:0,left:0,width:0,bottom:0,height:0,right:0,x:0,y:0,toJSON:()=>{}},qh="portal-whats-new",Yh=({title:e,id:t})=>{var r,n;const[s,a]=(0,i.useState)(Kh),o=(0,i.useRef)(null),[l,c]=(0,i.useState)(!1),d=(0,i.useCallback)((()=>{const e=document.getElementById(t);e&&a(e.getBoundingClientRect())}),[t]);(0,Uh.I)({target:document.getElementById(qh),callback:d}),(0,i.useLayoutEffect)((()=>{d(),o.current&&c(!0)}),[d]);const u=null==(r=o.current)?void 0:r.clientWidth,p=null==(n=o.current)?void 0:n.clientHeight;return i.createElement("div",{ref:o,className:"WhatsNewPlayer-popover-nYo4Ei",style:{visibility:l?"visible":"hidden",top:p?s.top+(s.height/2-p/2):0,left:u?s.left-u:0}},i.createElement("div",{className:"WhatsNewPlayer-arrow-ipr9sz"},i.createElement(Vh.n,{size:B.$u.XL})),i.createElement(Ws.x,{level:Ws.N.Body1,testID:`popover-${t}`},e))};function Xh({config:{feature:e,popovers:t}}){const r=(0,s.I0)(),[n,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(document.body.clientWidth),c=(0,Bm.Z)(n),d=(0,s.v9)((0,qe.Z)(e)),u=(0,s.v9)((0,oe.Z)("dismissedWhatsNewFeatures"));(0,i.useEffect)((()=>{c||d&&!(null==u?void 0:u[e])&&a(!0)}),[e,c,d,u]);const p=(0,i.useCallback)((()=>{var t,n;a(!1),r((0,bt.LN)({dismissedWhatsNewFeatures:(t=$h({},u),n={[e]:!0},_h(t,zh(n)))}))}),[r,e,u]),m=(0,i.useCallback)((()=>{l(document.body.clientWidth)}),[]);return(0,i.useEffect)((()=>(window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m),p()})),[m,p]),n?i.createElement(Fh.Z,{className:"WhatsNewPlayer-portal-pkmdol"},i.createElement("div",{className:"WhatsNewPlayer-portalContainer-Ctleu2",id:qh,style:{width:o},onClick:p},t.map((e=>i.createElement(Yh,{key:`popover-${e.id}`,id:e.id,title:e.title()}))))):null}var Jh=r(60148);function eg(){const e=(0,s.I0)(),t=(0,s.v9)(Um.Z),{details:{friendlyName:r,thumb:n,username:a,anonymous:o,isFullUser:l},isPending:d,isPopulated:u,error:p}=(0,s.v9)(ms.Z),{invites:m}=(0,s.v9)(kh.Z),h=(0,s.v9)(Nh.Z),{appsUrl:g}=(0,s.v9)(c.Z),y=(0,s.v9)(cs.Z),v=(0,s.v9)(Sh),f=(0,is.b)(),[b,Z]=(0,i.useState)(""),[S,P]=(0,i.useState)(!1),[I,E]=(0,i.useState)(!1),w=(0,i.useRef)(null);(0,i.useEffect)((()=>{Z(g||ar._N),P(y.isConnected)}),[g,y]),(0,i.useEffect)((()=>{const e=()=>{f.isOpen&&E(!0)},t=w.current;return null==t||t.addEventListener("transitionend",e),()=>null==t?void 0:t.removeEventListener("transitionend",e)}),[f.isOpen]),(0,i.useEffect)((()=>{S&&t&&(e((0,$s.RY)()),e(ta.Z.actions.fetchReceivedInvites({server:y})),e((0,$s.xP)()),d||u||p||e(hs.Z.actions.fetchUserDetails({server:y})))}),[e,p,S,d,u,t,y]);const C=(0,i.useCallback)((()=>{const e=(0,Ze.DB)("keyboardShortcuts");Bp.Z.trigger("show:modal",new Jh.Z({shortcuts:e.shortcuts}))}),[]),M=(0,i.useCallback)((()=>{(0,Ze.DB)("metrics").trackClick({action:ss.cG}),e((0,bt.xh)())}),[e]),D=S&&(!t||o),O=t&&l&&!o,T=m.length+h.length,x=T+v.length,A=r||a,k=a!==A?a:null;return i.createElement(Hs.v2,{isOpen:f.isOpen,onOpenChange:f.onOpenChange},i.createElement(Hs.bF,null,i.createElement(Ah.l,{ref:w,"aria-label":(0,Se.Z)("Account Menu"),isOpen:f.isOpen,testID:"navbarAccountMenuTrigger",type:"button"},i.createElement("div",{className:"NavBarAccountMenu-disclosure-wxY3xU"},i.createElement(us.Z,{server:y,size:30,url:n}),x>0?i.createElement("div",{className:"NavBarAccountMenu-navbarAvatarBadge-aUFsOp"},i.createElement(jh.Z,{size:x})):null))),i.createElement(Hs.Dv,{testID:"menu",width:248},l&&I?i.createElement(Xh,{config:Lh}):null,o?null:i.createElement("div",{className:"NavBarAccountMenu-profile-hkAkkF"},i.createElement(Hs.GY,{href:(0,Is.Z)("profile"),isDisabled:!l},i.createElement("div",{className:"NavBarAccountMenu-profileContainer-xO2bsU"},i.createElement(F.K,{align:B.xM.Center,gap:B.$u.XXS},i.createElement("div",{className:"NavBarAccountMenu-avatarWrapper-MmAZIR"},i.createElement(us.Z,{server:y,size:80,url:n}),i.createElement("div",{className:"NavBarAccountMenu-avatarPopover-bmkoNz",id:Rh.AvatarButton}),T>0?i.createElement("div",{className:"NavBarAccountMenu-profileAvatarBadge-AS8Pv6"},i.createElement(jh.Z,{size:T})):null),i.createElement(F.K,{align:B.xM.Center,width:"90%"},i.createElement(Ws.x,{color:B.Il.Default,level:Ws.N.Body1,numberOfLines:1},A),k?i.createElement(Ws.x,{color:B.Il.Muted,level:Ws.N.Body2,numberOfLines:1},k):null))))),i.createElement(Hs.GY,{color:B.Il.Primary,href:(0,Is.Z)("account"),id:Rh.AccountSettingsButton},(0,Se.Z)("Account Settings")),t&&l&&!o?i.createElement(Hs.GY,{color:B.Il.Primary,href:"#!/announcements"},i.createElement(U.X,{align:B.xM.SpaceBetween,verticalAlign:B.xM.Center},(0,Se.Z)("Announcements"),v.length>0?i.createElement(jh.Z,{size:v.length}):null)):null,S?i.createElement(Hs.GY,{color:B.Il.Primary,href:b},(0,Se.Z)("Get Plex Apps")):null,S?i.createElement(Hs.GY,{color:B.Il.Primary,href:ar.av},(0,Se.Z)("Help")):null,i.createElement(Hs.j2,{onPress:C},(0,Se.Z)("Keyboard Shortcuts")),i.createElement(Hs.Cl,null),o?null:i.createElement(Hs.j2,{color:B.Il.Primary,onPress:M},(0,Se.Z)("Switch User")),D?i.createElement(Hs.GY,{color:B.Il.Primary,href:(0,Is.Z)("login")},(0,Se.Z)("Sign In")):null,O?i.createElement(Hs.GY,{color:B.Il.Primary,href:(0,Is.Z)("logout")},(0,Se.Z)("Sign Out")):null))}var tg=r(71755),rg=r(1242),ng=r(70850),ig=r(39166),sg=r(51146),ag=r(3615),og=r(54834),lg=r(93888),cg=r(92934),dg=r(96493),ug=r(45071),pg=r(35204),mg=Object.defineProperty,hg=Object.defineProperties,gg=Object.getOwnPropertyDescriptors,yg=Object.getOwnPropertySymbols,vg=Object.prototype.hasOwnProperty,fg=Object.prototype.propertyIsEnumerable,bg=(e,t,r)=>t in e?mg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Zg=(0,o.P1)((0,oe.Z)("recentSearches"),(e=>e.map((e=>{return t=((e,t)=>{for(var r in t||(t={}))vg.call(t,r)&&bg(e,r,t[r]);if(yg)for(var r of yg(t))fg.call(t,r)&&bg(e,r,t[r]);return e})({},e),r={searchType:pg.Bk.RecentSearch},hg(t,gg(r));var t,r}))));var Sg=r(38002),Pg=r(71115),Ig=r(16914),Eg=r(15488),wg=r(48529),Cg=r(68647),Mg=r(30946),Dg=r(23441),Og=r(34908),Tg=r(40870),xg=r(53472),Ag=r(98708),kg=r(16708),Ng=r(74723);const Rg=function(e,t){const{serverIdentifier:r,providerIdentifier:n}=(0,Xn.Z)(t.sourceURI),i=e.find((([e])=>e.machineIdentifier===r));if(!i)throw new Error("Could not find server in serverProviders");const[s,a]=i,o=a.find((e=>e.identifier===n));if(!o)throw new Error("Could not find provider in serverProviders");return[s,o]};var Lg=r(61683),jg=r(77826);const Vg=[pg.Sc.Movies,pg.Sc.TV,pg.Sc.Music,pg.Sc.LiveTV,pg.Sc.People,pg.Sc.Photos,pg.Sc.OtherVideos];function Ug(e){switch(e){case pg.mr.TopResults:return pg.ZA.TopResults;case pg.mr.LiveTV:return pg.ZA.LiveTV;case pg.mr.MoviesTV:return pg.ZA.MoviesTV;case pg.mr.Music:return pg.ZA.Music;case pg.mr.OtherVideos:return pg.ZA.OtherVideos;case pg.mr.People:return pg.ZA.People;case pg.mr.Photos:return pg.ZA.Photos;default:return}}var Fg=r(3287),Bg=r(95699),_g=r(41295),zg=r(68807);function Hg(){const e=(0,a.TH)();return!!(0,a.LX)(e.pathname,vt.Z.search)}var Wg=r(79533),Gg=r(98720),Qg=r(27663),$g=r(91083);function Kg({isHighlighted:e,index:t,result:r}){const n=(0,s.I0)(),a=(0,s.v9)(Zg),o=(0,i.useCallback)((()=>{n((0,bt.LN)({recentSearches:a.filter(((e,r)=>r!==t))}))}),[n,a,t]);return i.createElement("div",{className:Ra()("RecentSearchResult-recentSearchContainer-YIGyj4 UniversalSearchResult-searchResultContainer-27em_k",e&&"RecentSearchResult-recentSearchContainerHighlighted-hCfB_K UniversalSearchResult-searchResultContainerHighlighted-EpqNHs UniversalSearchResult-searchResultContainer-27em_k")},i.createElement(U.X,{align:B.xM.SpaceBetween,gap:B.$u.XS,verticalAlign:B.xM.Center,width:"100%"},i.createElement(zs.k,{alignItems:B.xM.Center,gap:B.$u.M},i.createElement($g.j,null),i.createElement(F.K,null,i.createElement(Ws.x,{level:Ws.N.Body2,numberOfLines:1},r.query),i.createElement(Ws.x,{color:B.Il.Muted,level:Ws.N.Body2,numberOfLines:1},(0,Se.Z)("In {pivot}",{pivot:(0,Fg.Z)(r.pivot)})))),i.createElement(Us.hU,{"aria-label":(0,Se.Z)("Delete Recent Search"),color:"transparent",icon:ul.k,size:B.$u.XS,onPress:o})))}var qg=r(21961),Yg=r(63503);const Xg="UniversalSearchResult-searchResultContainer-27em_k",Jg="UniversalSearchResult-searchResultContainerHighlighted-EpqNHs UniversalSearchResult-searchResultContainer-27em_k",ey="UniversalSearchResult-searchResultInfo-hI6PS4";function ty({mergedResult:e,onResultSelect:t}){const[r]=(0,O.c9)(),n=e&&e.items.length>1?"+"+(e.items.length-1):null,s=(0,i.useCallback)((()=>{document.dispatchEvent(new Event("mousedown",{bubbles:!0})),document.dispatchEvent(new Event("mouseup",{bubbles:!0})),e&&(null==t||t(e))}),[e,t]);return r.isCloud?null:i.createElement(U.X,{gap:B.$u.XS,verticalAlign:B.xM.Center},i.createElement(Ws.x,{color:B.Il.Muted,level:Ws.N.Body2,numberOfLines:1},(0,Yg.Z)(r)),n?i.createElement("div",{style:{flexShrink:0}},i.createElement(Us.zx,{size:B.$u.XS,title:(0,Se.Z)("Choose Source Menu"),onPress:s},n)):null)}function ry({result:e,mergedResult:t,isHighlighted:r,onResultSelect:n}){const[s,a]=(0,O.c9)(),{item:o}=e,l=(0,J.Z)(null==o?void 0:o.sourceURI),{hoverRef:c,actionsMenuButtonID:d,isActionsPending:u,isActionsVisible:p,isActionsMenuOpen:m,onActionsMenuClose:h,onActionsMenuCloseComplete:g,onActionsMenuToggle:y}=(0,Fa.Z)({server:s,provider:a,metadataItem:o,metadataItemState:l}),v=(0,i.useCallback)((e=>{null==e||e.stopPropagation(),y()}),[y]);return i.createElement(ne.ZP,{containerKey:o.childrenKey,containerProvider:a,containerServer:s,containerSourceURI:o.sourceURI,containerSubtype:o.subtype,containerType:o.type},i.createElement("div",{ref:c,className:Ra()(Xg,(r||m)&&Jg)},i.createElement("div",{className:ey},i.createElement(qg.Z,{result:e},i.createElement(ty,{mergedResult:t,result:e,onResultSelect:n}))),i.createElement(di.Z,{className:Ra()("UniversalSearchResult-actionsButton-_cPTLE Link-link-vSsQW1",p&&(r||m)&&"UniversalSearchResult-actionsButtonVisible-dHZ2SK UniversalSearchResult-actionsButton-_cPTLE Link-link-vSsQW1"),"data-testid":"metadataRowMoreButton",id:d,isPending:u,onPress:v}),i.createElement(Ua.Z,{actionsOverride:{isAnalyzeVisible:!1,isDeleteVisible:!1,isDeleteVersionVisible:!1,isDownloadFileVisible:!1,isEditVisible:!1,isFixMatchVisible:!1,isMatchVisible:!1,isOptimizeVisible:!1,isPlayMusicVideoVisible:!1,isPlayTrailerVisible:!1,isRefreshVisible:!1,isSplitApartVisible:!1,isUnmatchVisible:!1},isOpen:m,metadataItem:o,target:d,onMenuClose:h,onMenuCloseComplete:g})))}function ny({result:e,mergedResult:t,isHighlighted:r,onResultSelect:n}){return i.createElement("div",{className:Ra()(Xg,r&&Jg)},i.createElement("div",{className:ey},i.createElement(qg.Z,{mergedResult:t,result:e},i.createElement(ty,{mergedResult:t,result:e,onResultSelect:n}))))}function iy({result:e,mergedResult:t,isHighlighted:r,onResultSelect:n}){return(0,_g.jc)(e)?i.createElement(ry,{isHighlighted:r,mergedResult:t,result:e,onResultSelect:n}):i.createElement(ny,{isHighlighted:r,mergedResult:t,result:e,onResultSelect:n})}function sy({result:e,mergedResult:t,isHighlighted:r,onResultSelect:n}){const{serverIdentifier:s,providerIdentifier:a}=(0,Xn.Z)(e.source);return i.createElement(O.ZP,{machineIdentifier:s,providerIdentifier:a},i.createElement(iy,{isHighlighted:r,mergedResult:t,result:e,onResultSelect:n}))}var ay=r(73279);function oy({group:e}){return i.createElement("div",{className:"UniversalSearchResultGroupHeading-container-I3AF_z"},i.createElement(U.X,{align:B.xM.SpaceBetween,verticalAlign:B.xM.Center},i.createElement(Ws.x,{component:"h3",level:Ws.N.Heading6},e.title),i.createElement(ay.Z,{group:e})))}const ly="SearchPopover-searchHeading-CZJlCc",cy="SearchPopover-listItem-AhI2dA";var dy=Object.defineProperty,uy=Object.defineProperties,py=Object.getOwnPropertyDescriptors,my=Object.getOwnPropertySymbols,hy=Object.prototype.hasOwnProperty,gy=Object.prototype.propertyIsEnumerable,yy=(e,t,r)=>t in e?dy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vy=(e,t)=>{for(var r in t||(t={}))hy.call(t,r)&&yy(e,r,t[r]);if(my)for(var r of my(t))gy.call(t,r)&&yy(e,r,t[r]);return e},fy=(e,t)=>uy(e,py(t));function by({title:e,isHighlighted:t}){return i.createElement("div",{className:Ra()("SearchPopover-button-N0vmWE",t&&"SearchPopover-highlighted-tYM7Gq SearchPopover-button-N0vmWE")},i.createElement(Ws.x,{level:Ws.N.Body2,numberOfLines:1},e))}const Zy=(0,i.forwardRef)((function(e,t){var r=e,{children:n,currentIndex:s,currentSearchPivot:a,getItemProps:o,query:l,isOpen:c,isLoading:d,items:u,onOpenChange:p,onResultSelect:m,recentSearches:h,searchResultGroupExpandedStatus:g,searchResultGroupShowMoreItems:y,searchResultGroups:v}=r,f=((e,t)=>{var r={};for(var n in e)hy.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&my)for(var n of my(e))t.indexOf(n)<0&&gy.call(e,n)&&(r[n]=e[n]);return r})(r,["children","currentIndex","currentSearchPivot","getItemProps","query","isOpen","isLoading","items","onOpenChange","onResultSelect","recentSearches","searchResultGroupExpandedStatus","searchResultGroupShowMoreItems","searchResultGroups"]);const b=(0,i.useRef)(null),[Z,S]=(0,Gg.l)(b),[,P]=(0,Qg.z)(),[I,E]=(0,i.useState)({top:0,left:0}),w=Hg(),C=P&&S?Math.max(200,P-S-50):void 0,M=(0,i.useCallback)((e=>{var t;(b.current===e.target||(null==(t=b.current)?void 0:t.contains(e.target)))&&e.preventDefault()}),[]);(0,i.useEffect)((()=>{let e;function t(){b.current&&E(function(e){const t={top:0,left:0};let r=e.offsetParent;for(;r;)t.top+=r.offsetTop,t.left+=r.offsetLeft,r=r.offsetParent;return t}(b.current))}function r(){e&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(t)}return t(),window.addEventListener("resize",r),()=>{e&&window.cancelAnimationFrame(e),window.removeEventListener("resize",r)}}),[]);const D=(0,i.useMemo)((()=>{const e=[];let t=0;return v.forEach((({results:r},n)=>{var i;const s=r.length>6&&!(null==(i=g[n])?void 0:i.isExpanded);e[n]=t,t+=s?7:r.length})),e}),[v,g]);return i.createElement(Wg.J2,{isOpen:c,onOpenChange:p},i.createElement(Wg.tW,{ref:b},n),i.createElement("div",vy({ref:t,style:{position:"absolute",top:-1*I.top,left:-1*I.left}},f),i.createElement(Wg.yk,{arrow:!1,autoFocus:!1,maxHeight:C,portalled:!1,width:Z,onInteractOutside:M},!l&&(null==h?void 0:h.length)?i.createElement(rg.T,null,i.createElement("div",{className:ly},i.createElement(Ws.x,{color:B.Il.Muted,level:Ws.N.Label1},(0,Se.Z)("Recent Searches"))),null==h?void 0:h.map(((e,t)=>{const r=o({className:cy,index:t,item:e});return i.createElement("div",fy(vy({},r),{key:`${e.query}${t}`}),i.createElement(Kg,{index:t,isHighlighted:s===t,result:e}))}))):null,!w&&d&&l?i.createElement("div",{className:"SearchPopover-loadingContainer-LixoNC"},i.createElement(la.$,null)):null,!l||d||w||(null==u?void 0:u.length)?null:i.createElement("div",{className:ly},i.createElement(Ws.x,{color:B.Il.Default,level:Ws.N.Body2},(0,Se.Z)('No results were found for the search term "{query}"',{query:l}))),l&&!d&&!w&&u.length?i.createElement(rg.T,null,i.createElement("div",{className:ly},i.createElement(Ws.x,{color:B.Il.Muted,level:Ws.N.Label1},function(e){switch(e){case pg.mr.TopResults:return(0,Se.Z)("Top Results");default:return(0,Fg.Z)(e)}}(a))),i.createElement("div",vy({},o({className:cy,index:0,item:u[0]})),i.createElement(by,{isHighlighted:0===s,title:(0,Se.Z)("View all results")})),v.map(((e,t)=>{var r,n;const a=e.results.length>6&&!(null==(r=g[t])?void 0:r.isExpanded),l=D[t]+6+1,c=a?o({className:cy,index:l,item:y[t]}):null,d=a?null==(n=e.results)?void 0:n.slice(0,6):e.results;return(null==d?void 0:d.length)?i.createElement(i.Fragment,{key:t},i.createElement(oy,{group:e}),null==d?void 0:d.map(((e,r)=>{const n=D[t]+r+1,a=o({className:cy,index:n,item:e});if("items"in e){const[t]=e.items;return i.createElement("div",fy(vy({},a),{key:t.sourceURI}),i.createElement(sy,{isHighlighted:s===n,mergedResult:e,result:t,onResultSelect:m}))}return"sourceURI"in e?i.createElement("div",fy(vy({},a),{key:e.sourceURI}),i.createElement(sy,{isHighlighted:s===n,result:e})):(jo.Z.warn("Unhandled search result was not rendered: %s",e),null)})),a?i.createElement("div",vy({},c),i.createElement(by,{isHighlighted:l===s,title:(0,Se.Z)("Show More")})):null):null}))):null)))})),Sy=(0,i.memo)(Zy);var Py=Object.defineProperty,Iy=Object.defineProperties,Ey=Object.getOwnPropertyDescriptors,wy=Object.getOwnPropertySymbols,Cy=Object.prototype.hasOwnProperty,My=Object.prototype.propertyIsEnumerable,Dy=(e,t,r)=>t in e?Py(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Oy=(e,t)=>{for(var r in t||(t={}))Cy.call(t,r)&&Dy(e,r,t[r]);if(wy)for(var r of wy(t))My.call(t,r)&&Dy(e,r,t[r]);return e},Ty=(e,t)=>Iy(e,Ey(t));function xy(e){return new Array(e.length).fill({isExpanded:!1})}function Ay(){var e;const t=Hg(),r=(0,i.useRef)(null),n=(0,s.I0)(),a=(0,Sg.Z)(),o=ag.Z.parseString(a.query),l=(0,is.b)(),c=(0,is.b)(),[d,u]=(0,i.useState)(pg.mr.TopResults),[p,m]=(0,i.useState)(0),[h,g]=(0,i.useState)(!1),[v,b]=(0,i.useState)(null),[Z,S]=(0,i.useState)(),{serverIdentifier:P,providerIdentifier:I}=(0,i.useMemo)((()=>(0,kg.Z)(v)||{serverIdentifier:"",providerIdentifier:""}),[v]),E=(0,s.v9)((0,ae.Z)(P)),w=(0,s.v9)((0,ie.Z)(P,I)),C=(0,i.useRef)(null),M=(0,i.useRef)(null),D=(0,i.useRef)(null),O=(0,s.v9)(Tg.Z),{isPending:T,isPopulated:x,isSavingIncludeMetadataInSearch:A}=(0,s.v9)(xg.Z),k=(0,s.v9)((0,Dg.Z)()),N=(0,s.v9)((0,Mg.Z)()),R=(0,s.v9)(Og.Z),L=(0,s.v9)(Aa.Z),j=L?(0,xr.Z)(L,Ot.zW.Settings):void 0,V=(0,Ig.Z)(Eg.p.IncludeMetadataInSearch)?null==(e=null==j?void 0:j.settings)?void 0:e.find((({id:e})=>e===Ot.Fk.IncludeMetadataInSearch)):void 0,U=(0,s.v9)(Zg),F=(0,i.useMemo)((()=>O.filter((([e])=>!R[e.machineIdentifier]))),[R,O]),B=(0,i.useMemo)((()=>O.some((([e])=>!e.isCloud))),[O]),z=(0,i.useMemo)((()=>B||!!V),[V,B]),H=(0,s.v9)(f.Z),G=(0,s.v9)(ug.Z),Q=(0,i.useMemo)((()=>{const e=new Set;return function({userFeatures:e,userServices:t,userProviderIdentifiers:r,serverProviders:n}){const i=(0,Lg.Z)({userFeatures:e,userServices:t,userProviderIdentifiers:r}),s=(0,jg.Z)(n),a=new Set([...i,...s]);return Array.from(a).sort(((e,t)=>{const r=Vg.indexOf(e),n=Vg.indexOf(t),i=-1===r?1/0:r,s=-1===n?1/0:n;return-1===r&&-1===n?e.localeCompare(t):i-s}))}({userFeatures:H.features,userServices:H.services,userProviderIdentifiers:G,serverProviders:F}).forEach((t=>{e.add(function(e){switch(e){case pg.Sc.LiveTV:return pg.mr.LiveTV;case pg.Sc.Movies:case pg.Sc.TV:return pg.mr.MoviesTV;case pg.Sc.Music:return pg.mr.Music;case pg.Sc.OtherVideos:return pg.mr.OtherVideos;case pg.Sc.People:return pg.mr.People;case pg.Sc.Photos:return pg.mr.Photos}}(t))})),Array.from(e)}),[F,H,G]),$=(0,i.useMemo)((()=>(0,Ng.Z)(k,N)),[N,k]),K=(0,i.useMemo)((()=>$.map(((e,t)=>({groupIndex:t,searchType:pg.Bk.ShowMore})))),[$]),[q,Y]=(0,i.useState)(xy($)),X=(0,i.useCallback)(((e,t)=>{Y((r=>{const n=[...r];return n[e]=Ty(Oy({},n[e]),{isExpanded:t}),n}))}),[]),J=(0,i.useMemo)((()=>{if(!T&&!x)return U;const e=[{searchType:pg.Bk.OpenSearchResultsPage}];return $.reduce(((e,t,r)=>{var n;const{results:i}=t,s=i.map(((e,n)=>Ty(Oy({},e),{context:`search:hub.${t.id}`,row:r,column:n+1})));return s.length<=6||(null==(n=q[r])?void 0:n.isExpanded)?e.concat(s):e.concat(s.slice(0,6),[K[r]])}),e)}),[T,x,U,q,K,$]),{getInputProps:ee,getComboboxProps:te,getItemProps:re,getMenuProps:ne,isOpen:se,reset:oe,openMenu:le,closeMenu:ce,inputValue:de,selectItem:ue,setInputValue:pe}=(0,tg.Kb)({items:J,highlightedIndex:p,defaultHighlightedIndex:p,initialInputValue:o,itemToString:e=>!e||(0,_g.AA)(e)||(0,_g.vO)(e)?"":(0,_g.Em)(e)?e.title:(0,_g.Fl)(e)?e.query:(0,_g.g$)(e)?e.item.tag:e.item.title,onHighlightedIndexChange:({type:e,highlightedIndex:t})=>{-1===t&&e!==tg.Kb.stateChangeTypes.MenuMouseLeave&&e!==tg.Kb.stateChangeTypes.FunctionReset||m(null!=t?t:0)},onSelectedItemChange:(0,i.useCallback)((({type:e,selectedItem:t,highlightedIndex:r,inputValue:i})=>{if(!t)return;if((0,_g.vO)(t))return void n((0,_.c4)({pathname:y.Z.join(vt.Z.search,{query:i})}));if((0,_g.Fl)(t))return m(0),void u(t.pivot);if((0,_g.AA)(t))return m(null!=r?r:0),void X(t.groupIndex,!0);const{context:s,row:a,column:o}=t;if(s&&void 0!==a&&void 0!==o&&S([s,a,o]),(0,_g.Em)(t))if(1===t.items.length)b(t.items[0]);else{const[r,n]=function(e,t){let r=0,n=0;for(let i=0;i<t.items.length;i++){const s=t.items[i],[a]=Rg(e,s);a.isFullOwnedServer?r++:n++}return[r,n]}(F,t);r>=2||!r&&n>=2?b(t):1===r&&n>=1&&(e===tg.Kb.stateChangeTypes.InputKeyDownEnter?b(t):b(t.items[0]))}else b(t)}),[n,F,X]),stateReducer:(0,i.useCallback)(((e,{changes:t,type:r})=>{switch(r){case tg.Kb.stateChangeTypes.ItemClick:case tg.Kb.stateChangeTypes.InputKeyDownEnter:case tg.Kb.stateChangeTypes.FunctionSelectItem:return(0,_g.AA)(t.selectedItem)?Ty(Oy({},t),{inputValue:e.inputValue,isOpen:e.isOpen}):(0,_g.Fl)(t.selectedItem)?Ty(Oy({},t),{isOpen:e.isOpen}):Ty(Oy({},t),{inputValue:e.inputValue});case tg.Kb.stateChangeTypes.InputBlur:return Ty(Oy({},t),{inputValue:e.inputValue,selectedItem:null})}return t}),[])}),me=(0,zg.Z)(de,d),he=(0,is.b)(),ge=(0,i.useMemo)((()=>Ty(Oy({},he),{onOpen(){he.onOpen(),ce()},onClose(){b(null),ue(null),pe(de),le(),he.onClose()}})),[he,ce,de,le,ue,pe]),ye=(0,i.useCallback)((()=>{oe(),b(null),u(pg.mr.TopResults),m(0),n(Ag.Z.actions.reset())}),[n,oe]),ve=(0,i.useCallback)((()=>{de||se||c.isOpen||l.isOpen||ye()}),[de,se,ye,l.isOpen,c.isOpen]),fe=(0,i.useCallback)((()=>{D.current=null,se||!de&&!(null==U?void 0:U.length)||le()}),[de,se,le,null==U?void 0:U.length]),be=(0,i.useCallback)((e=>{"Home"!==e.key&&"End"!==e.key||(e.nativeEvent.preventDownshiftDefault=!0)}),[]),Pe=(0,i.useCallback)((()=>{ye(),(null==U?void 0:U.length)&&le()}),[ye,le,null==U?void 0:U.length]),Ie=(0,i.useCallback)((e=>{e?le():ce()}),[ce,le]),Ee=(0,i.useCallback)((e=>{n(Ag.Z.actions.includeMetadataInSearchSaveRequested({includeMetadataInSearch:e}))}),[n]),we=(0,i.useCallback)((e=>t=>{(0,W.c9)((()=>{n((0,bt.LN)({disabledUniversalSearchIdentifiers:Ty(Oy({},R),{[e]:!t})})),n(Ag.Z.actions.clearResults())})),de&&g(!0)}),[R,n,de]),Me=(0,i.useCallback)((e=>()=>{d!==e&&(u(e),n(Ag.Z.actions.clearResults()),de&&g(!0)),D.current=M.current}),[d,n,de]),De=(0,i.useCallback)((e=>{b(e),null==e&&(ue(null),pe(de))}),[ue,pe,de]);(0,i.useEffect)((()=>{L&&j&&!1===j.isSettingsPopulated&&void 0===j.settingsError&&n((0,ig.VH)({providerEntityID:L.entityID}))}),[n,L,j]),(0,i.useEffect)((()=>{const e=()=>{var e;null==(e=M.current)||e.focus()};return Bp.Z.on("shortcut:search",e),()=>{Bp.Z.off("shortcut:search",e)}}),[]),(0,i.useEffect)((()=>{n(Ag.Z.actions.clearResults()),de&&g(!0)}),[null==V?void 0:V.value]),(0,i.useEffect)((()=>{g(!!(null==de?void 0:de.length)),(null==de?void 0:de.length)||n(Ag.Z.actions.reset()),t&&n((0,_.c4)({pathname:y.Z.join(vt.Z.search,{query:de}),replace:!0}))}),[n,de]),(0,i.useEffect)((()=>{(null==de?void 0:de.length)||(null==U?void 0:U.length)||ce()}),[ce,null==de?void 0:de.length,null==U?void 0:U.length]),(0,i.useEffect)((()=>{!ge.isOpen&&v&&(0,_g.Em)(v)&&ge.onOpen()}),[ge,v,De]),(0,i.useEffect)((()=>{var e;if(!v||!E.machineIdentifier||!w.identifier||(0,_g.Em)(v)||(0,_g.Fl)(v)||(0,_g.AA)(v)||(0,_g.vO)(v))return;let t;const r=(0,Bg.Z)(v,E,w);if(r)n((0,_.c4)({pathname:r}));else if((0,_g.jc)(v)){const{item:e}=v;if(t=(0,Pg.Z)(e),(0,dg.Z)(e)){const t=(0,cg.Z)(e);n((0,Yc.gj)({server:E,provider:w,legacyAction:(0,sg.lS)({options:{type:og.pX,identifier:t.channelIdentifier}})}))}else n((0,lg.vr)({server:E,provider:w,metadataItem:e,legacyAction:(0,dg.Z)(e)?(0,sg.lS)():Ce.wA()}))}else(0,_g.s_)(v)&&n((0,Yc.gj)({server:E,provider:w,legacyAction:(0,sg.lS)({options:{type:og.pX,identifier:v.item.id}})}));E.machineIdentifier===Dt.X&&(0,Ze.DB)("metrics").trackEvent({event:Sd.zP,pane:Ug(d),interaction:!0,properties:{value:de,contextTuple:Z,metadataItem:t}});const i=[{query:de.trim(),pivot:d},...U.filter((({query:e,pivot:t})=>e.toLowerCase()!==de.trim().toLowerCase()||t!==d))].slice(0,4);n((0,bt.LN)({recentSearches:i})),b(null),null==(e=M.current)||e.blur()}),[n,v,E,w,ye,ge.isOpen]),(0,i.useEffect)((()=>{r.current&&(n(Ag.Z.actions.markCancelled()),window.clearTimeout(r.current)),h&&(null==de?void 0:de.length)&&(n(Ag.Z.actions.markPending()),r.current=window.setTimeout((()=>{me(),(0,Ze.DB)("metrics").trackEvent({event:Sd.Tk,interaction:!0,properties:{value:de}}),Y(xy($)),g(!1),t&&n((0,_.c4)({pathname:y.Z.join(vt.Z.search,{query:de}),replace:!0}))}),500))}),[h,de]),(0,i.useEffect)((()=>{t&&o&&pe(o)}),[o,t,pe]),(0,i.useEffect)((()=>{se||m(0)}),[se]);const Oe=z?{isSettingsSelected:c.isOpen,onSettingsMenuTriggerPress:c.onToggle,settingsMenuItems:i.createElement(rg.T,null,B?i.createElement(i.Fragment,null,i.createElement(Hs.FD,null,(0,Se.Z)("Media Libraries")),O.map((([e])=>{if(!e.isCloud)return i.createElement(Hs.CG,{key:e.machineIdentifier,isChecked:!R[e.machineIdentifier],shouldCloseOnPress:!1,onCheckedChanged:we(e.machineIdentifier)},i.createElement(Cg.Z,{server:e}))}))):null,V&&!(null==V?void 0:V.hidden)?i.createElement(i.Fragment,null,i.createElement(Hs.FD,null,V.summary),i.createElement(Hs.CG,{key:V.key,isChecked:V.value,isDisabled:A,shouldCloseOnPress:!1,onCheckedChanged:Ee},V.label)):null),settingsMenuLabel:(0,Se.Z)("Search Servers"),settingsMenuState:c}:{},Te=t?!de&&se:se,xe=de&&T&&!x&&1===J.length;return i.createElement("div",Oy({className:"UniversalSearch-searchInputContainer-o5PuCs"},te()),i.createElement(Sy,Oy({currentIndex:p,currentSearchPivot:d,getItemProps:re,isLoading:xe,isOpen:Te,items:J,query:de,recentSearches:U,searchResultGroupExpandedStatus:q,searchResultGroupShowMoreItems:K,searchResultGroups:$,onOpenChange:Ie,onResultSelect:De},ne()),i.createElement(ng.M,Oy({ref:C,focusOnScopeMenuCloseRef:D,inputProps:ee({ref:M,onBlur:ve,onFocus:fe,onKeyDown:be}),scopeMenuItems:i.createElement(i.Fragment,null,i.createElement(Hs.CG,{isChecked:d===pg.mr.TopResults,onCheckedChanged:Me(pg.mr.TopResults)},(0,Se.Z)("All Media Types")),Q.map((e=>i.createElement(Hs.CG,{key:e,isChecked:d===e,onCheckedChanged:Me(e)},(0,Fg.Z)(e))))),scopeMenuLabel:(0,Se.Z)("Search Media Types"),scopeMenuState:l,scopeMenuTriggerTitle:(0,Fg.Z)(d),onClearPress:Pe,onScopeMenuTriggerPress:l.onToggle},Oe))),v&&(0,_g.Em)(v)?i.createElement(wg.Z,{modalState:ge,result:v,onResultSelect:De}):null)}var ky=r(95018),Ny=r(78e3),Ry=r(37334),Ly=r(13076),jy=r(21971),Vy=r(29150),Uy=r(1124),Fy=r(51408);function By(){return(0,o.P1)(Nt.Z,(0,Fy.Z)("providerEntityID"),((e,t)=>e[t]))}var _y=r(56431);const zy=function(){return(0,o.P1)(By(),(e=>(0,_y.Z)(e.identifier,e.providerIdentifier)))},Hy=function(e){return e.castApiAvailability},Wy=function(){return(e,t)=>t.playerType?(0,o.P1)(Hy,zy(),Ly.Z,((e,t,r)=>(0,Uy.Z)({protocol:Vy.l,providerIdentifier:t,userFeaturesByUUID:r})?e:jy.lz))(e,t):Hy(e)},Gy=(0,o.P1)(bh.Z,(({cloudCompanions:e})=>e)),Qy=(0,o.P1)(Gy,(e=>e.reduce(((e,{cloudPlayers:t})=>e.concat(t)),[])));var $y=r(9922);const Ky=(0,o.P1)((e=>e.companionServer),$y.Z,((e,t)=>t[e])),qy=(0,o.P1)(Ky,(e=>e?e.desktop.players:[])),Yy=(0,o.P1)(qy,Qy,((e,t)=>e.concat(t))),Xy=function(){return(e,t)=>t.playerType?(0,o.P1)(zy(),Ly.Z,Yy,((e,t,r)=>r.filter((({protocol:r,protocolCapabilities:n})=>(0,Uy.Z)({protocol:r,protocolCapabilities:n,providerIdentifier:e,userFeaturesByUUID:t})))))(e,t):Yy(e,t)};var Jy=r(55810);const ev=(0,o.P1)(Gy,c.Z,((e,t)=>e.filter((({identifier:e})=>e.includes("sonos"))).map((e=>{const r=y.Z.join(e.linkURL,{"X-Plex-Token":t.accessToken,next:window.location.href});return{title:e?e.title:"Sonos",state:e?e.linkState:Jy.uf,url:r}})))),tv=(0,o.P1)(Ky,(e=>e?e.desktop.neighborhoodDevices:[])),rv=(0,o.P1)(tv,(e=>!!e.find((({uuid:e})=>e.includes("RINCON")))));r(3294);var nv=r(29879),iv=r(40056),sv=r(28201),av=r(9314),ov=r(31889),lv=r(29012);const cv=function(e){const{isOpen:t,onClose:r}=e;return i.createElement(tl.Z,{isOpen:t,metricsPage:u.BE,size:el.HC,onModalClose:r},i.createElement(rl.Z,{onModalClose:r},i.createElement(Xo.Z,null,(0,Se.Z)("Chromecast unavailable")),i.createElement(Ko.Z,null,i.createElement(lv.Z,{message:(0,Se.Z)("Casting to Chromecast requires a secure connection to the Plex Web app. Please visit {openLink}https://app.plex.tv{closeLink} and try again."),tags:[{open:"openLink",close:"closeLink",component:Wo.Z,to:`https://app.plex.tv/desktop${window.location.hash}`,kind:Jo._8}]}))))};class dv extends i.Component{constructor(){super(...arguments),this.onPress=e=>{this.props.onPlayerSelect(this.props.playerIdentifier),this.props.onPress(e)}}render(){return i.createElement(ai.Z,{onPress:this.onPress},this.props.children)}}const uv=dv,pv="RemotePlayerMenuItems-menuItemSubtitle-FzNTQf";class mv extends i.Component{constructor(e,t){super(e,t),this.onCastPress=e=>{this.props.onCastPress(e),this.props.onMenuClose(e)},this.onCastMissingPress=e=>{this.setState({isCastMissingModalOpen:!0})},this.onCastMissingModalClose=()=>{this.setState({isCastMissingModalOpen:!1},(()=>{this.props.onMenuClose()}))},this.onSonosUpsellPress=()=>{this.setState({isPlexPassModalOpen:!0})},this.onPlexPassModalClose=()=>{this.setState({isPlexPassModalOpen:!1})},this.onDisconnectPress=e=>{this.props.onDisconnectPress(e),this.props.onMenuClose(e)},this.state={isCastMissingModalOpen:!1,isPlexPassModalOpen:!1}}render(){const{castApiAvailability:e,castAppTitle:t,sonosLinks:r,isRemotePlayer:n,remotePlayerName:s,remotePlayerProduct:a,players:o,onMenuClose:l,onPlayerSelect:c}=this.props,{isCastMissingModalOpen:d,isPlexPassModalOpen:u}=this.state,p=r.filter((({state:e})=>e===Jy.th)),m=!n&&e===jy.Rl,h=!n&&e===jy.Ke,g=!n&&p.length,y=!n&&r.length&&r.every((({state:e})=>e===Jy.Ey)),v=m||h||g||y,f=!n&&!!o.length,b=!(n||m||h||f);return i.createElement("div",null,n?[i.createElement("div",{key:"name",className:"RemotePlayerMenuItems-remotePlayerName-SW5gpd"},s),i.createElement("div",{key:"product",className:"RemotePlayerMenuItems-remoteProduct-i4L053"},a),i.createElement(ai.Z,{key:"disconnect",onPress:this.onDisconnectPress},i.createElement(av.Z,{"aria-label":(0,Se.Z)("Disconnect"),className:"RemotePlayerMenuItems-disconnectIcon-Bvxg8M"}),(0,Se.Z)("Disconnect"))]:null,m?i.createElement(ai.Z,{key:"cast",onPress:this.onCastPress},t?(0,Se.Z)("Cast ({title})...",{title:t}):(0,Se.Z)("Cast...")):null,h?i.createElement(i.Fragment,null,i.createElement(cv,{isOpen:d,onClose:this.onCastMissingModalClose}),i.createElement(ai.Z,{key:"cast",onPress:this.onCastMissingPress},(0,Se.Z)("Cast..."))):null,null,g?p.map((e=>i.createElement(ai.Z,{key:e.url,to:e.url},i.createElement("div",null,e.title,"..."),i.createElement("div",{className:pv},(0,Se.Z)("Link your Sonos account"))))):null,y?i.createElement(ai.Z,{key:"sonosUpsell",onPress:this.onSonosUpsellPress},i.createElement("div",null,"Sonos..."),i.createElement("div",{className:pv},(0,Se.Z)("Upgrade to a Plex Pass"))):null,v&&f?i.createElement(ov.Z,{key:"separator"}):null,f?o.map((({playerIdentifier:e,friendlyName:t,product:r})=>i.createElement(uv,{key:e,playerIdentifier:e,onPlayerSelect:c,onPress:l},i.createElement("div",null,t),i.createElement("div",{className:"RemotePlayerMenuItems-remotePlayerProduct-KMhver"},r)))):null,b?i.createElement("div",{className:"RemotePlayerMenuItems-emptyMessage-hzy_5u"},(0,Se.Z)("No players found")):null,i.createElement(Hp.Z,{isOpen:u,origin:zp.ID,onModalClose:this.onPlexPassModalClose}))}}const hv=mv;class gv extends i.Component{constructor(e,t){super(e,t),this.onPress=()=>{this.setState(((e,t)=>({isMenuOpen:!e.isMenuOpen})),(()=>{this.props.onMenuChange&&this.props.onMenuChange(this.state.isMenuOpen)}))},this.onMenuClose=()=>{this.setState({isMenuOpen:!1},(()=>{this.props.onMenuChange&&this.props.onMenuChange(!1)}))},this.state={isMenuOpen:!1},this._menuButtonID=(0,sv.Z)()}componentDidUpdate(e,t){this.state.isMenuOpen&&!t.isMenuOpen&&this.props.onDiscoverPlayers()}render(){const{className:e,iconComponent:t,isRemotePlayer:r,castApiAvailability:n,castAppTitle:s,sonosLinks:a,hasCompanionServer:o,remotePlayerName:l,remotePlayerProduct:c,players:d,onPlayerSelect:u,onCastPress:p,onDisconnectPress:m}=this.props,h=n===jy.Rl;return i.createElement(i.Fragment,null,i.createElement(t,{ariaLabel:(0,Se.Z)("Select Player"),className:e,iconComponent:r?nv.B:iv.R,id:this._menuButtonID,isDisabled:!h&&!o,isSelected:r,title:this.state.isMenuOpen?null:(0,Se.Z)("Select Player"),onPress:this.onPress}),i.createElement(si.Z,{isOpen:this.state.isMenuOpen,size:el.ln,target:this._menuButtonID,onMenuClose:this.onMenuClose},i.createElement(hv,{castApiAvailability:n,castAppTitle:s,isRemotePlayer:r,players:d,remotePlayerName:l,remotePlayerProduct:c,sonosLinks:a,onCastPress:p,onDisconnectPress:m,onMenuClose:this.onMenuClose,onPlayerSelect:u})))}}gv.defaultProps={iconComponent:Jc.Z};const yv=gv,vv=()=>{},fv=(0,s.$j)((function(){return(0,o.P1)(Wy(),ky.Z,Xy(),ev,rv,(e=>e.companionServer),vv,((e,t,r,n,i,s,a)=>({castApiAvailability:e,castAppTitle:a,sonosLinks:i?n:[],hasCompanionServer:!!s,isRemotePlayer:!!t,remotePlayerName:t&&t.friendlyName,remotePlayerProduct:t&&t.product,players:r})))}),(function(e){return{onDiscoverPlayers(t){e(Ry.Jo())},onPlayerSelect(e){(0,Ze.DB)("remotePlexPlayerManager").requestSession(e)},onCastPress(t){e(Ny.NH())},onDisconnectPress(t){e(Ry.Qt())}}}))(yv);var bv=Object.defineProperty,Zv=Object.defineProperties,Sv=Object.getOwnPropertyDescriptors,Pv=Object.getOwnPropertySymbols,Iv=Object.prototype.hasOwnProperty,Ev=Object.prototype.propertyIsEnumerable,wv=(e,t,r)=>t in e?bv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Cv(e){const t=e,{children:r,className:n}=t,s=((e,t)=>{var r={};for(var n in e)Iv.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Pv)for(var n of Pv(e))t.indexOf(n)<0&&Ev.call(e,n)&&(r[n]=e[n]);return r})(t,["children","className"]);return i.createElement(Wo.Z,(a=((e,t)=>{for(var r in t||(t={}))Iv.call(t,r)&&wv(e,r,t[r]);if(Pv)for(var r of Pv(t))Ev.call(t,r)&&wv(e,r,t[r]);return e})({},s),Zv(a,Sv({className:n}))),r);var a}Cv.defaultProps={className:"NavBarButton-button-cMcOo3 Link-link-SxPFpG"};const Mv=Cv,Dv=function(){const e=(0,a.k6)(),t=(0,i.useCallback)((()=>{e.push(vt.Z.login)}),[e]);return i.createElement(Mv,{className:"NavBarSignInButton-signInButton-hpVhuj NavBarButton-button-cMcOo3 Link-link-SxPFpG","data-testid":"signInButton",onPress:t},(0,Se.Z)("Sign In"))},Ov=function(){const e=(0,a.k6)(),t=(0,i.useCallback)((()=>{e.push(vt.Z.signUp)}),[e]);return i.createElement(Mv,{"data-testid":"signUpButton",onPress:t},(0,Se.Z)("Sign Up"))};var Tv=r(34513),xv=r(61677),Av=r(8059);var kv=Object.defineProperty,Nv=Object.getOwnPropertySymbols,Rv=Object.prototype.hasOwnProperty,Lv=Object.prototype.propertyIsEnumerable,jv=(e,t,r)=>t in e?kv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Vv(e){const t=e,{children:r,badgeClassName:n,badgeLabel:s,badgeKind:a}=t,o=((e,t)=>{var r={};for(var n in e)Rv.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Nv)for(var n of Nv(e))t.indexOf(n)<0&&Lv.call(e,n)&&(r[n]=e[n]);return r})(t,["children","badgeClassName","badgeLabel","badgeKind"]);return i.createElement(ai.Z,((e,t)=>{for(var r in t||(t={}))Rv.call(t,r)&&jv(e,r,t[r]);if(Nv)for(var r of Nv(t))Lv.call(t,r)&&jv(e,r,t[r]);return e})({},o),r,i.createElement(Tv.Z,{className:n,kind:a},s))}Vv.defaultProps={className:"BadgeMenuItem-badgeMenuItem-iq77od MenuItem-menuItem-C_KBbX",badgeClassName:"BadgeMenuItem-badge-xmSXT6 Badge-badge-GPVVZ0",badgeKind:Jo._8};const Uv=Vv;var Fv=r(3367),Bv=r(14580);const _v=(0,s.$j)((function(){return(0,o.P1)(jt.Z,c.Z,Sh,Ih,(0,fh.Z)(Ue.je),(0,fh.Z)(Ue.vi),((e,t,r,n,i)=>({username:e.title,isSignedIn:e.signedIn,isRestricted:e.isRestricted,isCloudServerConnected:t.isConnected,isAnonymousUser:!!e.anonymous,isFullUser:e.isFullUser,announcementsCount:r.length,friendInvitesCount:n.length,appsURL:t?t.appsUrl:"https://plex.tv/downloads",hasHomeLibraryAccessLabels:i})))}),(function(e,t){return{onSwitchUserPress(t){window.setTimeout((()=>{e((0,bt.xh)())}))},onUsersAndSharingPress(e){e.preventDefault(),(0,N.Z)("usersSharing")},onSignInPress(e){e.preventDefault(),(0,N.Z)("login")},onSignOutPress(e){e.preventDefault(),(0,N.Z)("logout")},onKeyboardShortcutPress(e){e.preventDefault();const t=(0,Ze.DB)("keyboardShortcuts");Bp.Z.trigger("show:modal",new Jh.Z({shortcuts:t.shortcuts}))}}}))((function(e){const{isOpen:t,target:r,options:n,username:s,isSignedIn:a,isAnonymousUser:o,isFullUser:l,announcementsCount:c,friendInvitesCount:d,appsURL:u,isCloudServerConnected:p,onUsersAndSharingPress:m,onSwitchUserPress:h,onSignInPress:g,onSignOutPress:y,onKeyboardShortcutPress:v,onMenuClose:f,hasHomeLibraryAccessLabels:b}=e,Z=p&&(!a||o),S=a&&l&&!o;return i.createElement(si.Z,{isOpen:t,options:n,size:b?el.ln:el.M2,target:r,onMenuClose:f},s?i.createElement(Fv.Z,null,s):null,a?i.createElement(ai.Z,{to:"#!/settings/account",onPress:f},(0,Se.Z)("Account")):null,a&&!o?i.createElement(Uv,{badgeLabel:d>0?d:null,onPress:(0,Bv.Z)(f,m)},b?(0,Se.Z)("Home & Library Access"):(0,Se.Z)("Users & Sharing")):null,a?i.createElement(ov.Z,null):null,a&&l&&!o?i.createElement(Uv,{badgeLabel:c>0?c:null,to:"#!/announcements",onPress:f},(0,Se.Z)("Announcements")):null,p?i.createElement(ai.Z,{target:"_self",to:u,onPress:f},(0,Se.Z)("Get Plex Apps")):null,p?i.createElement(ai.Z,{target:"_self",to:ar.av,onPress:f},(0,Se.Z)("Help")):null,i.createElement(ai.Z,{onPress:(0,Bv.Z)(f,v)},(0,Se.Z)("Keyboard Shortcuts")),i.createElement(ov.Z,null),o?null:i.createElement(ai.Z,{onPress:(0,Bv.Z)(f,h)},(0,Se.Z)("Switch User...")),Z?i.createElement(ai.Z,{onPress:(0,Bv.Z)(f,g)},(0,Se.Z)("Sign In")):null,S?i.createElement(ai.Z,{onPress:(0,Bv.Z)(f,y)},(0,Se.Z)("Sign Out")):null)}));class zv extends i.Component{constructor(e,t){super(e,t),this.onButtonPress=e=>{this.setState({isMenuOpen:!this.state.isMenuOpen})},this.onMenuClose=e=>{this.setState({isMenuOpen:!1})},this.state={isMenuOpen:!1},this._buttonID=(0,sv.Z)()}render(){const{className:e,tooltipClassName:t,tooltipFocusedClassName:r,serverEntityID:n,userThumb:s,badgeCount:a}=this.props;return i.createElement(i.Fragment,null,i.createElement(Go.Z,{className:e,component:xv.Z,direction:this.state.isMenuOpen?Av.UP:Av.WV,id:this._buttonID,isSelected:!1,tooltip:this.state.isMenuOpen?void 0:(0,Se.Z)("Account"),tooltipClassName:t,tooltipFocusedClassName:r,onPress:this.onButtonPress},i.createElement("div",{className:"NavBarAccountButton-avatarContainer-gpBud4"},i.createElement("div",{className:Ra()("NavBarAccountButton-overlay-CqKJ0d",this.state.isMenuOpen&&"NavBarAccountButton-isMenuOpen-zzvFWJ")}),i.createElement(Uc.Z,{height:30,serverEntityID:n,url:s,width:30})),i.createElement(Tv.Z,{className:"NavBarAccountButton-badge-rqbu9y Badge-badge-GPVVZ0",kind:Jo._8},a>0?a:null)),i.createElement(_v,{isOpen:this.state.isMenuOpen,target:this._buttonID,onMenuClose:this.onMenuClose}))}}zv.defaultProps={className:"NavBarAccountButton-button-YCH0Nf DisclosureArrowButton-disclosureArrowButton-x_5Y9W Link-link-SxPFpG",tooltipClassName:"NavBarAccountButton-tooltip-WSimWu Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu",tooltipFocusedClassName:"NavBarAccountButton-tooltipTriggerHasFocus-Fzbtxf NavBarAccountButton-tooltip-WSimWu Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu"};const Hv=zv;var Wv=r(30549),Gv=r(15830),Qv=r(28663),$v=r(92527),Kv=r(69664);function qv(e,t,r){const n=function(e){const t=e.desktop&&e.desktop.update;if(t&&(t.state===$v.AVAILABLE||t.state===$v.DOWNLOADED||t.state===$v.DOWNLOADING||t.state===$v.NOTIFY))return(0,Kv.Z)(t.version)}(e);return!!(e.isConnected&&e.isFullOwnedServer&&n&&n!==r&&n!==t[e.machineIdentifier])}var Yv=r(9984);const Xv=(0,o.P1)(Fo.Z,(e=>e.dismissedServerUpdateVersions)),Jv=(0,o.P1)(Fo.Z,(e=>e.serverUpdateDismissedVersion));var ef=r(12559);const tf={[ef.RG]:!0,[ef.JW]:!0,[ef.sC]:!0,[ef.t6]:!0,[ef.zL]:!0,[ef.Ts]:!0,[ef.nJ]:!0,[ef.y0]:!0,[ef.QX]:!0,[ef.Gh]:!0,[ef.k9]:!0,[ef.TS]:!0,[ef.ZJ]:!0,[ef.K5]:!0,[ef.AA]:!0,[ef.ST]:!0,[ef._V]:!0,[ef.iJ]:!0};var rf=r(56997);const nf=(0,o.P1)(rf.Z,(e=>e.length>0));var sf=r(98530),af=r(98963),of=r(26180),lf=r(98116);const cf=function(e){const{title:t,subtitle:r,progress:n,isPostProcessing:s}=e;return i.createElement("div",{className:"ActivityMenuStatusItem-splitButton-Sa1oyX MenuItem-menuItem-C_KBbX"},i.createElement("span",{className:"ActivityMenuStatusItem-activityTitleContainer-vryK9I"},i.createElement("span",{className:"ActivityMenuStatusItem-activityTitle-HuU0VV",title:t},t,r?":":null),r?i.createElement("span",{className:"ActivityMenuStatusItem-activitySubtitle-t3Hz4s",title:r},r):null),i.createElement("span",null,null==n||s?i.createElement(dl.Z,{size:el.HC}):i.createElement(lf.Z,{lineWidth:2,progress:n,showProgressText:!1,size:18})))},df="NavBarActivityMenuStatusItem-alertIndicator-FcBD_Y",uf="NavBarActivityMenuStatusItem-primaryLabel-HsZp5z";function pf(e){const{labelClassName:t,label:r,indicator:n}=e;return i.createElement(ai.Z,{className:"NavBarActivityMenuStatusItem-splitButton-PrLqV7 ActivityMenuStatusItem-splitButton-Sa1oyX MenuItem-menuItem-C_KBbX",to:null==e?void 0:e.to,onPress:null==e?void 0:e.onPress},i.createElement("span",{className:t},r),n?i.createElement("span",{className:"NavBarActivityMenuStatusItem-statusButtonIndicator-GUycVY"},n):null)}const mf=(0,s.$j)((function(){return(0,o.P1)((0,Lc.Z)(),(0,sf.Z)(),(0,o.P1)((0,Om.Z)(),(e=>e.backgroundTranscodeJobs?e.backgroundTranscodeJobs:[])),(0,o.P1)((0,Om.Z)(),(e=>e.activities?e.activities:[])),(0,o.P1)(((e,{serverEntityID:t})=>t),rf.Z,((e,t)=>t.some((([,t])=>e===t)))),Xv,Jv,Nt.Z,((e,t,r,n,i,s,a,o)=>({friendlyName:e.friendlyName,machineIdentifier:e.machineIdentifier,providerEntityID:e.providers.map((e=>o[e])).find((e=>e.identifier===Mt.Y3)).entityID,sessionsCount:t,backgroundTranscodeJobs:r,activities:n,showLibraryUpgradeAvailable:i,showUpdateAvailable:qv(e,s,a)})))}))((function(e){const{friendlyName:t,machineIdentifier:r,sessionsCount:n,backgroundTranscodeJobs:s,activities:a,showUpdateAvailable:o,onMenuClose:l}=e,c=encodeURIComponent(r),d=(0,i.useCallback)((()=>{(0,N.L)(r),l()}),[r,l]);return i.createElement("div",{className:"NavBarActivityMenuStatusItem-statusContainer-pbKIoK"},i.createElement("div",{className:"NavBarActivityMenuStatusItem-statusTitle-I84MTr"},t),i.createElement(pf,{indicator:n?`${n}`:null,label:(0,Se.Z)("Dashboard"),to:`#!/settings/server/${c}/status/server-dashboard`,onPress:l}),s.length?i.createElement(pf,{indicator:`${s.length}`,label:(0,Se.Z)("Conversions"),to:`#!/settings/server/${c}/status/conversion`,onPress:l}):null,a.length?a.map((e=>{const{uuid:t,type:r,title:n,subtitle:s,progress:a,Context:o={}}=e;return tf[r]?i.createElement(cf,{key:t,isPostProcessing:o.status===of.jN,progress:a,subtitle:s,title:n}):null})):null,o?i.createElement(pf,{indicator:i.createElement("div",{className:df},i.createElement(af.D,null)),label:(0,Se.Z)("Server Update Available"),labelClassName:uf,to:`#!/server/${c}/update`,onPress:l}):null,e.showLibraryUpgradeAvailable?i.createElement(pf,{indicator:i.createElement("div",{className:df},i.createElement(af.D,null)),label:(0,Se.Z)("Upgrade Libraries"),labelClassName:uf,onPress:d}):null)})),hf=(0,s.$j)((function(){return(0,o.P1)((0,Om.Z)(),(e=>({activities:e&&e.activities?e.activities.filter((e=>tf[e.type])):[]})))}))((function(e){const{activities:t,onMenuClose:r}=e;return t.length?i.createElement("div",{className:"NavBarEmbeddedServerActivityMenuStatusItem-statusContainer-hGI00g NavBarActivityMenuStatusItem-statusContainer-pbKIoK"},i.createElement("div",{className:"NavBarEmbeddedServerActivityMenuStatusItem-statusTitle-NzWm_R NavBarActivityMenuStatusItem-statusTitle-I84MTr"},i.createElement(Wo.Z,{to:(0,cu.Z)(),onPress:r},(0,Se.Z)("Downloads"))),t.map((e=>{const{uuid:t,title:r,subtitle:n,progress:s,Context:a={}}=e;return i.createElement(cf,{key:t,isPostProcessing:a.status===of.jN,progress:s,subtitle:n,title:r})}))):null})),gf={placement:"bottom-end"},yf=function(e){const{isOpen:t,target:r,embeddedServerEntityID:n,ownedServerEntityIDs:s,onMenuClose:a}=e;return i.createElement(si.Z,{className:"NavBarActivityMenu-menu-JX_RWZ Menu-menu-OCzudL",isOpen:t,options:gf,target:r,onMenuClose:a},s.map((e=>i.createElement(mf,{key:e,serverEntityID:e,onMenuClose:a}))),n?i.createElement(hf,{key:n,serverEntityID:n,onMenuClose:a}):null)};var vf=r(31300),ff=r(60489),bf=r(51017);const Zf=function({className:e,showSpinner:t,showHighlighted:r,showUpdateIcon:n}){return i.createElement("span",{className:Ra()(e,"NavBarActivityIcon-iconContainer-DT1Qee")},t?i.createElement(dl.Z,{className:"NavBarActivityIcon-activityIndicator-BiZoUL Spinner-spinner-XTaskc spin-spin-H8VRGl",color:bf.Z.primaryAlternateColor}):null,r?i.createElement(vf.C,null):null,!r&&n?i.createElement(af.D,null):null,r||n?null:i.createElement(ff.z,null))};r(32903);var Sf=Object.defineProperty,Pf=Object.getOwnPropertySymbols,If=Object.prototype.hasOwnProperty,Ef=Object.prototype.propertyIsEnumerable,wf=(e,t,r)=>t in e?Sf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Cf=(e,t)=>{for(var r in t||(t={}))If.call(t,r)&&wf(e,r,t[r]);if(Pf)for(var r of Pf(t))Ef.call(t,r)&&wf(e,r,t[r]);return e};function Mf(e){const t=e,{className:r,tooltipClassName:n,tooltipFocusedClassName:s,labelClassName:a,iconComponent:o,title:l,ariaLabel:c,label:d,iconProps:u}=t,p=((e,t)=>{var r={};for(var n in e)If.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Pf)for(var n of Pf(e))t.indexOf(n)<0&&Ef.call(e,n)&&(r[n]=e[n]);return r})(t,["className","tooltipClassName","tooltipFocusedClassName","labelClassName","iconComponent","title","ariaLabel","label","iconProps"]),m=l||c;return i.createElement(Go.Z,Cf({"aria-label":m,className:r,component:Wo.Z,tooltip:l,tooltipClassName:n,tooltipFocusedClassName:s},p),i.createElement(o,Cf({},u)),d?i.createElement("span",{className:a},d):null)}Mf.defaultProps={className:"NavBarIconButton-button-qoDYmq IconButton-button-s4bVCh",tooltipClassName:"NavBarIconButton-tooltip-THFpUV Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu",tooltipFocusedClassName:"NavBarIconButton-tooltipTriggerHasFocus-W8oKLr NavBarIconButton-tooltip-THFpUV Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu"};const Df=Mf;var Of=Object.defineProperty,Tf=Object.getOwnPropertySymbols,xf=Object.prototype.hasOwnProperty,Af=Object.prototype.propertyIsEnumerable,kf=(e,t,r)=>t in e?Of(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Nf={sessionsCount:0,backgroundTranscodeJobsCount:0,activitiesCount:0};function Rf(e,t){return e.reduce(((e,r)=>{const{backgroundTranscodeJobs:n=[],activities:i=[]}=r.desktop,s=t[r.machineIdentifier],a=null==s?void 0:s.sessionKeys.length,o=n.length,l=i.filter((e=>!!tf[e.type])).length;return a>0&&(e.sessionsCount+=a),o>0&&(e.backgroundTranscodeJobsCount+=o),l>0&&(e.activitiesCount+=l),e}),((e,t)=>{for(var r in t||(t={}))xf.call(t,r)&&kf(e,r,t[r]);if(Tf)for(var r of Tf(t))Af.call(t,r)&&kf(e,r,t[r]);return e})({},Nf))}const Lf=(0,o.P1)(Qv.Z,(e=>e.v4.root.core.serverNowPlayingSessions),((e,t)=>Rf(e,t))),jf=(0,o.P1)(lu.Z,(e=>e.v4.root.core.serverNowPlayingSessions),((e,t)=>e?Rf([e],t):Nf)),Vf=(0,o.P1)(Lf,jf,((e,t)=>({activitiesCount:e.activitiesCount+t.activitiesCount,backgroundTranscodeJobsCount:e.backgroundTranscodeJobsCount+t.backgroundTranscodeJobsCount,sessionsCount:e.sessionsCount+t.sessionsCount}))),Uf=(0,o.P1)(Qv.Z,Wv.Z,((e,t)=>e.reduce(((e,r)=>{const{libraries:n}=r.desktop;return e+n.filter((e=>{const r=t[e];return!!r&&r.refreshing})).length}),0))),Ff=(0,o.P1)(Qv.Z,Xv,Jv,((e,t,r)=>e.some((e=>qv(e,t,r))))),Bf=(0,s.$j)((function(){return(0,o.P1)(((e,{isDisabled:t})=>!!t),Yv.Z,Gv.Z,Vf,Uf,Ff,((e,t,r,n,i,s)=>{const a=r.length>0;let o=a;return t&&(o=!0,e=e||!a&&n.sessionsCount+n.backgroundTranscodeJobsCount+n.activitiesCount===0),{isDisabled:e,embeddedServerEntityID:t,ownedServerEntityIDs:r,showActivityButton:o,hasSessions:n.sessionsCount>0,hasConversions:n.backgroundTranscodeJobsCount>0,hasActivities:n.activitiesCount>0,hasAvailableServerUpdate:s,hasLibraryRefreshing:i>0,activityButtonCount:n.sessionsCount+n.backgroundTranscodeJobsCount}}))}))((function(e){const{activityButtonCount:t,embeddedServerEntityID:r,hasActivities:n,hasAvailableServerUpdate:a,hasConversions:o,hasLibraryRefreshing:l,hasSessions:c,isDisabled:d,ownedServerEntityIDs:u}=e,p=(0,s.v9)(nf),m=(0,oi.Z)(),[h,g]=(0,i.useState)(!1),y=(0,i.useCallback)((()=>{g(!h)}),[h]),v=(0,i.useCallback)((()=>{g(!1)}),[]),f=n||l,b=c||o,Z=!b&&!t&&(a||p);return(0,i.useEffect)((()=>{d&&h&&v()}),[d,h,v]),i.createElement(i.Fragment,null,i.createElement(Df,{ariaLabel:(0,Se.Z)("Activity"),className:Ra()("NavBarActivityButton-button-j0UuoH NavBarIconButton-button-qoDYmq IconButton-button-s4bVCh",(b||Z)&&"NavBarActivityButton-isHighlighted-FM7WTS"),iconComponent:Zf,iconProps:{className:"NavBarActivityButton-activityIcon-ULKHVM NavBarActivityIcon-iconContainer-DT1Qee",showSpinner:f,showHighlighted:b,showUpdateIcon:Z},id:m,isDisabled:d,label:t?String(t):void 0,labelClassName:"NavBarActivityButton-label-WHdP8x",title:h?void 0:(0,Se.Z)("Activity"),onPress:y}),i.createElement(yf,{embeddedServerEntityID:r,isOpen:h,ownedServerEntityIDs:u,target:m,onMenuClose:v}))}));var _f=r(22169);class zf extends i.Component{constructor(e,t){super(e,t),this.onButtonPress=e=>{const{shouldBypassModal:t}=this.props;(0,Ze.DB)("metrics").trackEvent({event:Sd.Jw,interaction:!0,context:{experiments:{"upsell-experiment":t?"direct":"in-app"}}}),t||this.setState({isPlexPassModalOpen:!0})},this.onModalClose=e=>{this.setState({isPlexPassModalOpen:!1})},this.state={isPlexPassModalOpen:!1}}render(){const{shouldBypassModal:e}=this.props,t=y.Z.join((0,_f.LL)("/plex-pass/purchase"),{utm_source:"app.plex.tv",utm_medium:"app",utm_campaign:"PP_in-app-upsell_01",utm_content:zp.uh});return i.createElement(i.Fragment,null,i.createElement(Mv,{target:"_blank",to:e?t:void 0,onPress:this.onButtonPress},(0,Se.Z)("Go Premium")),i.createElement(Hp.Z,{isOpen:this.state.isPlexPassModalOpen,metricsProperties:{context:d.NAV_BAR},origin:zp.uh,onModalClose:this.onModalClose}))}}const Hf=zf,Wf={container:"NavBar-container-F87RQ_",side:"NavBar-side-AiqnET",plexLogo:"NavBar-plexLogo-ZUj3sZ NavBarIconButton-button-qoDYmq IconButton-button-s4bVCh",buttonSeparator:"NavBar-buttonSeparator-racpPW",accountButton:"NavBar-accountButton-lAsNLc NavBarAccountButton-button-YCH0Nf DisclosureArrowButton-disclosureArrowButton-x_5Y9W Link-link-SxPFpG",left:"NavBar-left-ONk5Fn NavBar-side-AiqnET",right:"NavBar-right-PQX3AG NavBar-side-AiqnET"},Gf=(0,Ph.gn)()||(0,Ph.P_)(),Qf=(0,o.P1)((e=>e.isFullscreen),(e=>e)),$f=(0,o.P1)(St.Z,(e=>e.isSidebarCollapsed)),Kf=(0,o.P1)((e=>e.downloads&&e.downloads.subscriptions),(e=>!!e&&e.length>0)),qf=(0,o.P1)(xc,(e=>e.some((e=>e.isConnected)))),Yf=(0,s.$j)((function(){return(0,o.P1)((e=>e.history),jt.Z,Sh,Ih,Qf,$f,(0,o.P1)(jt.Z,c.Z,Kf,qf,((e,t,r,n)=>!(e.isLocked||!t)&&(t.isResolved||r||n))),(0,fh.Z)(Ue.Oo),((e,t,r,n,i,s,a,o)=>{const l=(0,ku.Z)(Nu.cN,Dt.X),c=(0,Ph.P_)()&&(0,Ze.DB)("fullscreenManager").hasFullscreen;return{serverEntityID:l,hasHistory:e.length>1,userThumb:t.thumb,badgeCount:r.length+n.length,isFullscreen:i,isSidebarCollapsed:s,isAnonymousUser:!!t.anonymous,canGoPremium:t.canGoPremium,shouldBypassPlexPassUpsellModal:o,canEnterFullscreen:c&&!i,canExitFullscreen:c&&i,canNavigateHistory:Gf,shouldRender:a}}))}),(function(e,t){return{onBackPress(t){e((0,_.n)())},onEnterFullscreen(e){(0,Ze.DB)("fullscreenManager").enter()},onExitFullscreen(e){(0,Ze.DB)("fullscreenManager").exit()},onToggleCollapsedSidebar(t){(0,W.c9)((()=>{e((0,bt.LN)({isSidebarCollapsed:t}))}))}}}))((function(e){const{serverEntityID:t,hasHistory:r,userThumb:n,badgeCount:o,canEnterFullscreen:l,canExitFullscreen:c,isAnonymousUser:d,canGoPremium:u,shouldBypassPlexPassUpsellModal:p,canNavigateHistory:m,isSidebarCollapsed:h,shouldRender:g,onBackPress:y,onEnterFullscreen:v,onExitFullscreen:f,onToggleCollapsedSidebar:b}=e,Z=(0,s.v9)(xh.Z),S=(0,s.v9)((0,qe.Z)(Ue.vi)),P=(0,i.useCallback)((()=>{b(!h)}),[h,b]),I=!!(0,a.$B)({path:[vt.Z.account,vt.Z.accountPlexTv,vt.Z.announcements,vt.Z.devices,vt.Z.info,vt.Z.login,vt.Z.logout,vt.Z.logs,vt.Z.onlineMediaSources,vt.Z.serverSettings,vt.Z.signUp,vt.Z.streamingServices,vt.Z.userSharingSettings,vt.Z.usersSharing,vt.Z.plexHome,vt.Z.plexHomeSharing,vt.Z.manageLibraryAccess,vt.Z.manageLibraryAccessSharing,vt.Z.watchlistRSS,vt.Z.webSettings,vt.Z.webhooks],exact:!0});if(!g)return null;const E=(0,Ru.Z)("NavBar",Z);return i.createElement("div",{key:E,className:Wf.container},i.createElement(U.X,{align:B.xM.Center,grow:!0,height:"100%",verticalAlign:B.xM.Center},I?i.createElement(Df,{className:Wf.firstButton,iconComponent:pl.A,title:(0,Se.Z)("Home"),to:"#"}):i.createElement(Df,{className:Wf.firstButton,iconComponent:wh.d,title:h?(0,Se.Z)("Expand"):(0,Se.Z)("Collapse"),onPress:P}),i.createElement(Wo.Z,{className:Wf.plexLogo,to:"#"},i.createElement(Ch.D,null)),m?i.createElement(Df,{iconComponent:Mh.v,isDisabled:!r,title:(0,Se.Z)("Back"),onPress:y}):null,i.createElement(Ay,null)),i.createElement("div",{className:Wf.right},u?i.createElement(Hf,{shouldBypassModal:p}):null,d?i.createElement(i.Fragment,null,i.createElement(Dv,null),i.createElement(Ov,null)):null,u||d?i.createElement("div",{className:Wf.buttonSeparator}):null,c?i.createElement(Df,{iconComponent:Dh.Y,title:(0,Se.Z)("Exit Full Screen"),onPress:f}):null,l?i.createElement(Df,{iconComponent:Oh.N,title:(0,Se.Z)("Enter Full Screen"),onPress:v}):null,l||c?i.createElement("div",{className:Wf.buttonSeparator}):null,i.createElement(Bf,null),i.createElement(Df,{iconComponent:Th.i,title:(0,Se.Z)("Settings"),to:"#!/settings/web/general"}),i.createElement(fv,{iconComponent:Df}),S?i.createElement(eg,null):i.createElement(Hv,{badgeCount:o,className:Wf.accountButton,hasCommunityFeatures:S,serverEntityID:t,userThumb:d?null:n})))}));class Xf extends i.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e){jo.Z.error(e)}render(){return this.state.hasError?i.createElement(Eh,null):i.createElement(Yf,null)}}const Jf=Xf;var eb=r(11088);const tb=function(){const e=(0,b.Z)(),t=(0,es.Z)(e.redirectUrl),r=(0,s.I0)(),n=(0,s.v9)(Lo.Z),{available:o,isResolved:l,isRejected:d}=(0,s.v9)(c.Z),u=(0,D.Z)(o),p=!0===o||!1===o,m=!0!==u&&!1!==u;return(0,Tm.Z)((()=>{r((0,Pe._K)())})),(0,i.useEffect)((()=>{m&&p&&r((0,Pe._K)())}),[r,p,m]),l?n?i.createElement(Up,null):i.createElement(a.l_,{to:t||vt.Z.home[0]}):d&&p?o?i.createElement(Up,null):i.createElement(eb.Z,null):i.createElement(I.Z,null,i.createElement(E.Z,null))};var rb=r(15867);const nb=(0,o.P1)(Bo,(e=>({hasDismissedServerDownloadMessage:e}))),ib={dispatchSaveDeviceSettings:_.T5},sb=(0,s.$j)(nb,ib)((function(e){const{hasDismissedServerDownloadMessage:t,dispatchSaveDeviceSettings:r}=e,n=(0,i.useCallback)((()=>{r({hasDismissedServerDownloadMessage:!0})}),[r]);return i.createElement(Pp.Z,{description:(0,Se.Z)("Organize, beautify, stream, and share your personal collection of movies, TV, music, and photos anywhere, on all your devices. To get started, download our free Plex Media Server software on the device where you store your media."),iconSrc:At,title:(0,Se.Z)("Add your media to Plex")},i.createElement($o.Z,{kind:Jo._8,size:el.ln,target:"_self",to:ar._N},(0,Se.Z)("Get Plex Media Server")),t?null:i.createElement(rb.Z,null,i.createElement(Wo.Z,{kind:Jo._8,size:el.HC,to:"#",onPress:n},(0,Se.Z)("Don't show this in my Pinned Sources sidebar"))))}));var ab=r(97257),ob=r(30471),lb=r(58176);class cb extends i.Component{static getDerivedStateFromProps(e,t){return e.isSignedIn&&!t.isSigningOut?{isSigningOut:!0}:null}constructor(e,t){super(e,t),this.state={isSigningOut:!1}}componentDidMount(){this.state.isSigningOut&&this.props.onSignOut()}componentDidUpdate(e,t){this.state.isSigningOut&&!t.isSigningOut&&this.props.onSignOut()}render(){return i.createElement(ab.Z,{metricsPage:u.dp},i.createElement(ob.Z,null,i.createElement(lb.Z,null,i.createElement(dl.Z,null))))}}const db=cb,ub=(0,o.P1)(jt.Z,(({isSignedIn:e})=>({isSignedIn:e}))),pb=(0,s.$j)(ub,(function(e){return{onSignOut(){Fu.Z.execute("signOut").then((()=>{e((0,Pe.im)({route:"login",replace:!0}))}))}}}))(db);var mb=r(45697),hb=r.n(mb),gb=r(57200),yb=r(53088);const vb=function(){return(0,o.P1)((0,Fy.Z)("currentDecision"),(0,yb.Z)(),((e,t)=>e&&e.playQueueItemID===t.playQueueItemID?e:void 0))};var fb=r(17939);const bb="commercial",Zb="intro";var Sb=r(17051);var Pb=r(15865);const Ib=(0,o.P1)(Fo.Z,(e=>e.debugAdKind));var Eb=r(57467);function wb(e=0){return(0,o.P1)((0,yb.Z)(e),ni.Z,((e,t)=>{if(e)return t[e.metadataItem]}))}const Cb=(0,o.P1)(By(),(e=>!(!e||!Mt.wB((0,_y.Z)(e.identifier,e.providerIdentifier),[Mt.vP,Mt.Ll]))));function Mb(){return(0,o.P1)(Cb,wb(),(0,Eb.Z)(),vb(),((e,t,r,n)=>{let i;return e?i=r:n&&(i=t.Media[n.mediaIndex]),i||null}))}var Db=r(4632),Ob=r(93927),Tb=r(85209),xb=r(72186),Ab=r(40111),kb=r(15451);const Nb=(0,i.createContext)(),Rb="UPDATE_POSITION_MILLISECONDS",Lb="RESET_POSITION_MILLISECONDS",jb=(0,kb.Z)(Rb),Vb=(0,kb.Z)(Lb);function Ub(e,{type:t,payload:r}){switch(t){case Rb:return r;case Lb:return 0;default:return e}}var Fb=Object.defineProperty,Bb=Object.defineProperties,_b=Object.getOwnPropertyDescriptors,zb=Object.getOwnPropertySymbols,Hb=Object.prototype.hasOwnProperty,Wb=Object.prototype.propertyIsEnumerable,Gb=(e,t,r)=>t in e?Fb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Qb=function(e){var t;const r={dispatchUpdatePositionMilliseconds:jb,dispatchResetPositionMilliseconds:Vb};return(0,s.$j)(null,r,null,{context:Nb})(((t=class extends i.Component{constructor(){super(...arguments),this.onPositionMillisecondsChange=e=>{this.props.dispatchUpdatePositionMilliseconds(e)}}shouldComponentUpdate(e,t){return(0,tu.Z)(this,e,t)}componentWillUnmount(){this.props.dispatchResetPositionMilliseconds()}render(){const t=this.props,{dispatchUpdatePositionMilliseconds:r,dispatchResetPositionMilliseconds:n}=t,s=((e,t)=>{var r={};for(var n in e)Hb.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&zb)for(var n of zb(e))t.indexOf(n)<0&&Wb.call(e,n)&&(r[n]=e[n]);return r})(t,["dispatchUpdatePositionMilliseconds","dispatchResetPositionMilliseconds"]);return i.createElement(e,(a=((e,t)=>{for(var r in t||(t={}))Hb.call(t,r)&&Gb(e,r,t[r]);if(zb)for(var r of zb(t))Wb.call(t,r)&&Gb(e,r,t[r]);return e})({},s),o={onPositionMillisecondsChange:this.onPositionMillisecondsChange},Bb(a,_b(o))));var a,o}}).displayName=`PositionMillisecondsMonitor(${(0,xb.Z)(e)})`,t.WrappedComponent=e,t.propTypes={dispatchUpdatePositionMilliseconds:hb().func.isRequired,dispatchResetPositionMilliseconds:hb().func.isRequired},t))};function $b(){return(0,o.P1)(ky.Z,(0,Fy.Z)("playbackSpeed"),(0,Sb.Z)(),((e,t,r)=>e?1:t||r&&r.playbackSpeed||1))}var Kb=r(93805),qb=r(11574),Yb=r(54562);var Xb=r(59542),Jb=r(24559),eZ=r(65775);var tZ=r(14427);const rZ=function(){return(0,o.P1)((0,Fy.Z)("mediaIndex"),(0,yb.Z)(),ni.Z,((e=0,t,r)=>{if(!t||!t.metadataItem)return;const{Media:n}=r[t.metadataItem];return n[e]}))},nZ=function(){return(0,o.P1)((0,Fy.Z)("partIndex"),rZ(),((e=0,t)=>{if(t)return t.Part[e]}))},iZ=function(){return(0,o.P1)(nZ(),(e=>{if(!e)return{videoStreams:[],selectedVideoStream:null,audioStreams:[],selectedAudioStream:null,subtitlesStreams:[],selectedSubtitlesStream:null};const t=tZ.Z.get("video").id,r=tZ.Z.get("audio").id,n=tZ.Z.get("subtitles").id,i=e.Stream.filter((e=>e.streamType===t)),s=e.Stream.filter((e=>e.streamType===r)),a=e.Stream.filter((e=>e.streamType===n)),o=i[0],l=s.find((e=>e.selected)),c=a.find((e=>e.selected));return{videoStreams:i,selectedVideoStream:o,audioStreams:s,selectedAudioStream:l,subtitlesStreams:a,selectedSubtitlesStream:c}}))};var sZ=r(77121);function aZ(){return(0,o.P1)(Cb,wb(),(0,sZ.Z)(),((e,t,r)=>e?r:t))}var oZ=r(56594);const lZ=function(){return(0,o.P1)((0,Fy.Z)("serverEntityID"),vb(),$y.Z,((e,t,r)=>r[(null==t?void 0:t.transcodeServerEntityID)||e]))};var cZ=r(64336),dZ=r(64155),uZ=r(19274),pZ=r(94450),mZ=r(26316),hZ=r(60354);var gZ=Object.defineProperty,yZ=Object.defineProperties,vZ=Object.getOwnPropertyDescriptors,fZ=Object.getOwnPropertySymbols,bZ=Object.prototype.hasOwnProperty,ZZ=Object.prototype.propertyIsEnumerable,SZ=(e,t,r)=>t in e?gZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class PZ extends i.Component{constructor(e,t){super(e,t),this._mediaComponent=(0,Ze.DB)("mediaComponent")}render(){const e=this.props,{isDecisionPending:t,isDecisionDirectPlay:r,isDecisionDirectStreamAudio:n,isDecisionDirectStreamVideo:s,isLibraryProvider:a,hasStreamProtocol:o,isPaused:l,isAdVisible:c,decisionUrl:d,decisionProtocol:u,decisionError:p,decisionDrm:m,decisionCertificate:h,decisionLicense:g,media:y,mediaType:v,mediaSubtype:f,placement:b,shouldCoverWhenDecisionPending:Z}=e,S=((e,t)=>{var r={};for(var n in e)bZ.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&fZ)for(var n of fZ(e))t.indexOf(n)<0&&ZZ.call(e,n)&&(r[n]=e[n]);return r})(e,["isDecisionPending","isDecisionDirectPlay","isDecisionDirectStreamAudio","isDecisionDirectStreamVideo","isLibraryProvider","hasStreamProtocol","isPaused","isAdVisible","decisionUrl","decisionProtocol","decisionError","decisionDrm","decisionCertificate","decisionLicense","media","mediaType","mediaSubtype","placement","shouldCoverWhenDecisionPending"]);if(t)return Z?i.createElement("div",{className:"PlayerMedia-isDecisionPending-r621tc"}):null;const P=this._mediaComponent.getComponent({drm:m,protocol:u,isDirectPlay:r,isDirectStreamAudio:n,isDirectStreamVideo:s,isLibraryProvider:a,hasStreamProtocol:o,media:y}),I=v===og.j0?hZ.Hn:b;return i.createElement(i.Suspense,{fallback:null},i.createElement(P,(E=((e,t)=>{for(var r in t||(t={}))bZ.call(t,r)&&SZ(e,r,t[r]);if(fZ)for(var r of fZ(t))ZZ.call(t,r)&&SZ(e,r,t[r]);return e})({},S),yZ(E,vZ({key:d,certificate:h,drm:m,isDecisionDirectPlay:r,isDecisionDirectStreamAudio:n,isDecisionDirectStreamVideo:s,license:g,media:y,mediaSubtype:f,mediaType:v,paused:l||c,placement:I,src:d})))));var E}}const IZ=PZ;var EZ=Object.defineProperty,wZ=Object.defineProperties,CZ=Object.getOwnPropertyDescriptors,MZ=Object.getOwnPropertySymbols,DZ=Object.prototype.hasOwnProperty,OZ=Object.prototype.propertyIsEnumerable,TZ=(e,t,r)=>t in e?EZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xZ=(e,t)=>{for(var r in t||(t={}))DZ.call(t,r)&&TZ(e,r,t[r]);if(MZ)for(var r of MZ(t))OZ.call(t,r)&&TZ(e,r,t[r]);return e};function AZ(e){const{playerType:t,mediaType:r,mediaSubtype:n,durationSeconds:i,minSecondsForPostPlay:s}=e;return r===og.pX&&n!==mZ.n&&t===m.Se&&i>=s||e.displayPostplay}const kZ={dispatchMakeDecision:Jb.bY,dispatchMakeNextDecision:Jb.kG,dispatchRemoveDecision:Jb.Td,dispatchRetryDecision:Jb.Mf,dispatchUpdatePlayerDuration:gb.qr,dispatchUpdatePlayerPosition:gb.lj,dispatchUpdatePlayerSeekRange:gb.uZ,dispatchUpdatePlayerBuffering:gb.n9,dispatchPause:gb.wO,dispatchPlay:gb.hY,dispatchUpdatePlayerError:gb.IE,dispatchSendTimeline:gb.$E,dispatchTickPlayer:gb.fp,dispatchShowPostPlay:Xb.HI,dispatchPlayNextItem:Xb.o1,dispatchEndPlayback:Ce.Mh,dispatchSetMetricsPlayer:Ce.Kq,dispatchUpdateMediaDimensions:gb.bb,dispatchUpdateCanPlayThrough:gb.mh,dispatchUpdateSessionMetadataItems:sg.X9};class NZ extends i.Component{constructor(e,t){super(e,t),this.onDurationMillisecondsChange=e=>{this.props.dispatchUpdatePlayerDuration({playerType:this.props.playerType,durationMilliseconds:e})},this.onPositionMillisecondsChange=e=>{const{playerType:t,isLiveTV:r,liveTVSessionEntityID:n,dispatchUpdateSessionMetadataItems:i,dispatchUpdatePlayerPosition:s,onPositionMillisecondsChange:a}=this.props,o=Math.floor(e/1e3);a&&a(e),o!==this.props.positionSeconds&&(s({playerType:t,positionSeconds:o}),r&&i({liveTVSessionEntityID:n}))},this.onTick=e=>{const{metadataItemEntityID:t,liveTVSessionEntityID:r,mediaItemID:n,playerType:i,dispatchTickPlayer:s}=this.props;t&&s({metadataItemEntityID:t,liveTVSessionEntityID:r,mediaItemID:n,playerType:i,secondsElapsed:e})},this.onBufferingChange=e=>{this.props.dispatchUpdatePlayerBuffering({playerType:this.props.playerType,isBuffering:e})},this.onPause=()=>{this.props.isAdVisible||this.props.dispatchPause({playerType:this.props.playerType,isApplicationInitiated:!0})},this.onPlay=()=>{this.props.isAdVisible||this.props.dispatchPlay({playerType:this.props.playerType,isApplicationInitiated:!0})},this.onStreamChange=()=>{const{playerType:e,playQueueItemEntityID:t,positionSeconds:r,liveTVPositionSeconds:n,qualityIndex:i,decisionMediaIndex:s,decisionPartIndex:a,dispatchMakeDecision:o,dispatchRemoveDecision:l}=this.props;l({playerType:e,playQueueItemEntityID:t}),o({playerType:e,playQueueItemEntityID:t,mediaIndex:s,partIndex:a,qualityIndex:i,options:{offset:null!=n?1e3*n:1e3*r}})},this.onMetricsPlayerChange=e=>{const{playerType:t,dispatchSetMetricsPlayer:r}=this.props;r({playerType:t,metricsPlayer:e})},this.onError=(e={})=>{const{code:t,category:r,message:n}=e,{playerType:i,isDecisionDirectPlay:s,isDecisionDirectStreamVideo:a,isDecisionDirectStreamAudio:o,canTranscodeServerTranscode:l,dispatchUpdatePlayerError:c}=this.props;s&&l?(jo.Z.warn("[Player] Direct Play failed, but server can transcode. Attempting to fallback to either Direct Stream or transcode..."),this._itemRestarting(this.props,{allowDirectPlay:!1})):a&&l?(jo.Z.warn("[Player] Direct Stream failed, but server can transcode. Attempting to fallback to video transcode..."),this._itemRestarting(this.props,{allowDirectPlay:!1,transcoderOptions:{directStream:0}})):o&&l?(jo.Z.warn("[Player] Video transcode failed. Attempting to fallback to video and audio transcode..."),this._itemRestarting(this.props,{allowDirectPlay:!1,transcoderOptions:{directStream:0,directStreamAudio:0}})):(this.onPause(),c({playerType:i,errorCode:t,errorCategory:r,errorMessage:n}))},this.onEnd=()=>{const{playerType:e,playQueueItemEntityID:t,qualityIndex:r,repeatOne:n,repeatAll:i,isLastPlayQueueItem:s,totalCount:a,decisionMediaIndex:o,decisionPartIndex:l,decisionPartCount:c,dispatchMakeDecision:d,dispatchRemoveDecision:u,dispatchShowPostPlay:p,dispatchPlayNextItem:m,dispatchEndPlayback:h}=this.props,g=n||i&&1===a;l+1<c?(u({playerType:e,playQueueItemEntityID:t}),d({playerType:e,playQueueItemEntityID:t,qualityIndex:r,mediaIndex:o,partIndex:l+1,options:{offset:0}})):g?(u({playerType:e,playQueueItemEntityID:t}),d({playerType:e,playQueueItemEntityID:t,qualityIndex:r,mediaIndex:o,partIndex:0,options:{offset:0}})):!s||i?AZ(this.props)?p({playerType:e}):m({playerType:e,isApplicationInitiated:!0}):h({playerType:e})},this.onIntrinsicDimensions=({width:e,height:t})=>{const{playerType:r,dispatchUpdateMediaDimensions:n}=this.props;(0,jo.Z)(`[Player] Media resized: ${e}x${t} (${e/t})`),n({playerType:r,width:e,height:t})},this.onCanPlayThrough=e=>{const{playerType:t,dispatchUpdateCanPlayThrough:r}=this.props;r({playerType:t,canPlayThrough:e})},this._hasRefreshedPlayQueue=!1,this._shouldStopOnUnmount=!1}componentDidMount(){this._itemStarting(this.props),this.props.mediaType===og.pV&&this._itemProgressing(this.props)}componentDidUpdate(e){const{playQueueItemEntityID:t,mediaItemID:r,playerType:n,mediaType:i,isDecisionPending:s,isPaused:a,isBuffering:o,hasError:l,positionSeconds:c,durationSeconds:d,preFetchSeconds:u,qualityIndex:p,dispatchMakeNextDecision:m,liveTVPositionSeconds:h,isLiveTV:g}=this.props,y=e.mediaItemID,v=g?!(!r||!y||r===y):t!==e.playQueueItemEntityID,f=s!==e.isDecisionPending,b=p!==e.qualityIndex,Z=a!==e.isPaused,S=o!==e.isBuffering,P=l!==e.hasError,I=d!==e.durationSeconds;if(!b||v||f){if(v)return this._hasRefreshedPlayQueue=!1,this._hasPreFetched=!1,this._itemStopping(e,{removeDecision:!g}),this._itemStarting(this.props),void(i===og.pV&&(this._itemProgressing(this.props,{shouldRefreshPlayQueue:!0}),this._hasRefreshedPlayQueue=!0));!this._hasPreFetched&&d>0&&d-c<u&&!AZ(this.props)&&(this._hasPreFetched=!0,m({playerType:n})),!f&&(!this._hasRefreshedPlayQueue||Z||S||P||I)&&(this._itemProgressing(this.props,{shouldRefreshPlayQueue:!this._hasRefreshedPlayQueue}),this._hasRefreshedPlayQueue=!0)}else{const e=null!=h?1e3*h:1e3*c;this._itemRestarting(this.props,{offset:e})}}componentWillUnmount(){!this.props.shouldSuppressStopOnUnmount&&this._shouldStopOnUnmount&&this._itemStopping(this.props,{continuing:!1}),this.props.onPositionMillisecondsChange&&this.props.onPositionMillisecondsChange(0)}_itemStarting(e){const{mediaType:t,playerType:r,playQueueItemEntityID:n,qualityIndex:i}=e;t!==og.pV&&e.dispatchMakeDecision({playerType:r,playQueueItemEntityID:n,qualityIndex:i})}_itemRestarting(e,t={}){const{mediaType:r,playerType:n}=e;r!==og.pV&&e.dispatchRetryDecision({playerType:n,decisionOptions:t})}_itemProgressing(e,{shouldRefreshPlayQueue:t=!1}={}){const{playerType:r,mediaType:n,serverEntityID:i,providerEntityID:s,playQueueItemEntityID:a,metadataItemEntityID:o,mediaItemID:l,playbackTime:c,positionSeconds:d,durationSeconds:u,isPaused:p,decisionMediaIndex:m,decisionPartIndex:h,decisionPartCount:g,dispatchSendTimeline:y,liveTVSessionEntityID:v}=e,f=n===og.pV,b=p&&!f?uZ.rf:uZ.Z$;y({playerType:r,serverEntityID:i,providerEntityID:s,playQueueItemEntityID:a,metadataItemEntityID:o,liveTVSessionEntityID:v,mediaItemID:l,shouldRefreshPlayQueue:t,options:f?{state:b}:{playbackSessionID:e.playbackSessionID,playbackTime:c,positionSeconds:d,durationSeconds:u,mediaIndex:m,partIndex:h,partCount:g}}),this._shouldStopOnUnmount=!0}_itemStopping(e,{continuing:t=!0,removeDecision:r=!0}={}){e.dispatchSendTimeline({playerType:e.playerType,providerEntityID:e.providerEntityID,playQueueItemEntityID:e.playQueueItemEntityID,metadataItemEntityID:e.metadataItemEntityID,liveTVSessionEntityID:e.liveTVSessionEntityID,mediaItemID:e.mediaItemID,options:{state:uZ.il,continuing:t,playbackSessionID:e.playbackSessionID,playbackTime:e.playbackTime,positionSeconds:e.positionSeconds,durationSeconds:e.durationSeconds,mediaIndex:e.decisionMediaIndex,partIndex:e.decisionPartIndex,partCount:e.decisionPartCount}}),r&&e.mediaType!==og.pV&&e.dispatchRemoveDecision({playerType:e.playerType,playQueueItemEntityID:e.playQueueItemEntityID}),this._shouldStopOnUnmount=!1}render(){const e=this.props,{preFetchSeconds:t,minSecondsForPostPlay:r,repeatOne:n,repeatAll:s,totalCount:a,isLastPlayQueueItem:o,isAdVisible:c,shouldSuppressStopOnUnmount:d,canTranscodeServerTranscode:u,qualityIndex:p,decisionMediaIndex:m,decisionPartIndex:h,decisionPartCount:g,dispatchMakeDecision:y,dispatchRemoveDecision:v,dispatchUpdatePlayerDuration:f,dispatchUpdatePlayerPosition:b,dispatchUpdatePlayerSeekRange:Z,dispatchUpdatePlayerBuffering:S,dispatchPause:P,dispatchUpdatePlayerError:I,dispatchTickPlayer:E,dispatchShowPostPlay:w,dispatchPlayNextItem:C,dispatchEndPlayback:M,dispatchSetMetricsPlayer:D,dispatchUpdateMediaDimensions:O,dispatchUpdateCanPlayThrough:T}=e,x=((e,t)=>{var r={};for(var n in e)DZ.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&MZ)for(var n of MZ(e))t.indexOf(n)<0&&OZ.call(e,n)&&(r[n]=e[n]);return r})(e,["preFetchSeconds","minSecondsForPostPlay","repeatOne","repeatAll","totalCount","isLastPlayQueueItem","isAdVisible","shouldSuppressStopOnUnmount","canTranscodeServerTranscode","qualityIndex","decisionMediaIndex","decisionPartIndex","decisionPartCount","dispatchMakeDecision","dispatchRemoveDecision","dispatchUpdatePlayerDuration","dispatchUpdatePlayerPosition","dispatchUpdatePlayerSeekRange","dispatchUpdatePlayerBuffering","dispatchPause","dispatchUpdatePlayerError","dispatchTickPlayer","dispatchShowPostPlay","dispatchPlayNextItem","dispatchEndPlayback","dispatchSetMetricsPlayer","dispatchUpdateMediaDimensions","dispatchUpdateCanPlayThrough"]);return c&&!l.Z.allowAdsOverMedia?null:i.createElement(IZ,(A=xZ({},x),k={isAdVisible:c,onBufferingChange:this.onBufferingChange,onCanPlayThrough:this.onCanPlayThrough,onDurationMillisecondsChange:this.onDurationMillisecondsChange,onEnd:this.onEnd,onError:this.onError,onIntrinsicDimensions:this.onIntrinsicDimensions,onMetricsPlayerChange:this.onMetricsPlayerChange,onPause:this.onPause,onPlay:this.onPlay,onPositionMillisecondsChange:this.onPositionMillisecondsChange,onStreamChange:this.onStreamChange,onTick:this.onTick},wZ(A,CZ(k))));var A,k}}NZ.defaultProps={preFetchSeconds:10,minSecondsForPostPlay:300,shouldSuppressStopOnUnmount:!1};const RZ=(0,s.$j)((function(){return(0,o.P1)(function(e=0){return(0,o.P1)((0,yb.Z)(e),ni.Z,Nt.Z,((e,t,r)=>{if(!e||!e.metadataItem)return;const n=t[e.metadataItem];return n&&r[n.providerEntityID]}))}(),(0,Db.Z)(),vb(),lZ(),(0,yb.Z)(),(0,yb.Z)(1),aZ(),Mb(),iZ(),(0,eZ.Z)(),(0,o.P1)((0,Ze.DB)("selectRemoteQuality"),(e=>{let t=oZ.Z.getQualityByIndex(e).bitrate;return null==t&&(t=2e5),1e3*t})),((e,t,r,n,i,s,a,o,c,d,u)=>{const p=t.playQueue,m=p.playQueueSelectedItemOffset,h=i.entityID,g=!s||m+1===p.length,y={serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,mediaItemID:null==o?void 0:o.id,metadataItemEntityID:null==a?void 0:a.entityID,playQueueItemEntityID:h,liveTVSessionEntityID:null==d?void 0:d.entityID,isDecisionPending:!r,isPaused:t.isPaused,isBuffering:t.isBuffering,hasError:t.hasError,repeatOne:t.repeatOne,repeatAll:t.repeatAll,totalCount:p.length,isLastPlayQueueItem:g,displayPostplay:i.displayPostPlay,playbackTime:t.itemPlaybackTime,positionSeconds:t.positionSeconds,durationSeconds:t.durationSeconds,playbackSessionID:t.playbackSessionID,lastSeekPositionSeconds:t.lastSeekPositionSeconds,videoStreams:c.videoStreams,videoStream:c.selectedVideoStream,audioStreams:c.audioStreams,audioStream:c.selectedAudioStream,subtitlesStreams:c.subtitlesStreams,subtitleStream:c.selectedSubtitlesStream,isStreamChangeInProgress:null==a?void 0:a.isStreamChangeInProgress,bufferingDetectionLimit:l.Z.bufferingDetectionLimit};if(d){const e=t.confirmLocalToRemote===cZ.YN;Object.assign(y,function(e){if(!e)return{};const t=e.captureBuffer,r={liveTVSessionSubscriptionKey:e.key,liveTVSessionChannelIdentifier:e.channelIdentifier,liveTVSessionCurrentPosition:e.currentPosition,liveTVSessionStartedAt:e.startedAt};if(t){const n=t.startedAt,i=e.startedAt,s=n||i;Object.assign(r,{liveTVPositionSeconds:e.currentPosition-s,liveTVSessionSeekRangeStartedAt:t.startedAt,liveTVSessionSeekStartSeconds:t.seekStartSeconds,liveTVSessionSeekEndSeconds:t.seekEndSeconds})}return r}(d),{shouldSuppressStopOnUnmount:e,isLiveTV:!0})}return r&&(y.decisionMediaIndex=r.mediaIndex,y.decisionPartIndex=r.partIndex,y.decisionPartCount=r.partCount,y.decisionUrl=r.url,y.decisionProtocol=r.protocol,y.decisionError=r.error,y.isCloud=n.isCloud,y.isDecisionDirectPlay=r.isDirectPlay,y.isDecisionDirectStreamVideo=r.canDirectStreamVideo,y.isDecisionDirectStreamAudio=r.canDirectStreamAudio,y.canTranscodeServerTranscode=!n.isCloud&&(0,pZ.Z)(n.version,Yb.Z.decisionEndpoint),r.playbackSessionID&&(y.playbackSessionID=r.playbackSessionID),y.hasBurnedSubtitles=c.selectedSubtitlesStream&&c.selectedSubtitlesStream.id!==dZ.H&&!r.subtitlesUrl,y.decisionDrm=r.drm,y.decisionLicense=r.license,y.decisionCertificate=r.certificate),!y.isDecisionDirectPlay||"dash"!==y.decisionProtocol&&"hls"!==y.decisionProtocol||(y.bufferingGoal=10,y.defaultBandwidthEstimate=u),e&&(y.isLibraryProvider=e.isLibraryProvider,y.hasStreamProtocol=e.protocols.includes("stream")),y}))}),kZ,(function(e,t,r){const n=t;return xZ(xZ(xZ({},r),e),n)}))(NZ),LZ=(0,s.$j)((function(){return(0,o.P1)((0,Fy.Z)("qualityIndex"),St.Z,Kb.Z,$b(),(0,o.P1)(((e,{mediaType:t})=>t),(0,Fy.Z)("openState"),((e,t)=>e===og.pX&&t===qb.K)),((e,t,r,n,i)=>({qualityIndex:e,subtitleSize:t.subtitleSize,volume:r,playbackSpeed:n,shouldCoverWhenDecisionPending:i})))}))(RZ);var jZ=Object.defineProperty,VZ=Object.defineProperties,UZ=Object.getOwnPropertyDescriptors,FZ=Object.getOwnPropertySymbols,BZ=Object.prototype.hasOwnProperty,_Z=Object.prototype.propertyIsEnumerable,zZ=(e,t,r)=>t in e?jZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const HZ=Qb((function(e){return i.createElement(LZ,(t=((e,t)=>{for(var r in t||(t={}))BZ.call(t,r)&&zZ(e,r,t[r]);if(FZ)for(var r of FZ(t))_Z.call(t,r)&&zZ(e,r,t[r]);return e})({},e),VZ(t,UZ({allowRecycleElement:!0,type:"audio"}))));var t}));function WZ(){return(0,o.P1)((0,eZ.Z)(),(e=>e&&e.currentPosition))}var GZ=r(33588);function QZ(){return(0,o.P1)($y.Z,(0,Fy.Z)("serverEntityID"),((e,t)=>e[t]))}var $Z=r(70919),KZ=r(77021);const qZ="direct",YZ="copy",XZ="transcode";var JZ=r(91569),eS=r(52202),tS=r(82075),rS=r(48721),nS=Object.defineProperty,iS=Object.defineProperties,sS=Object.getOwnPropertyDescriptors,aS=Object.getOwnPropertySymbols,oS=Object.prototype.hasOwnProperty,lS=Object.prototype.propertyIsEnumerable,cS=(e,t,r)=>t in e?nS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dS=(e,t)=>{for(var r in t||(t={}))oS.call(t,r)&&cS(e,r,t[r]);if(aS)for(var r of aS(t))lS.call(t,r)&&cS(e,r,t[r]);return e},uS=(e,t)=>iS(e,sS(t));const pS="unknown",mS={dispatchSetPlayerItemPlaybackTime:gb.Pn,dispatchSetPlayerSessionPlaybackTime:gb.ZI};class hS extends i.Component{constructor(e,t){super(e,t),this.onTickTimeout=()=>{this.flushPlaybackTimes(),this.setTickTimeout(this.props)},this.itemID=null,this.itemDecision=null,this.itemMetricsProperties=null,this.itemPlaybackTimestamp=null,this.itemPlaybackMilliseconds=0,this.sessionPlaybackMilliseconds=0,this.sessionPlaybackCount=0,this.sessionAdPlaybackStartTime=0,this.hasError=!1,this.hasEnded=!1,this.hasStopped=!1,this._tickTimeout=null}componentDidMount(){this.update()}componentDidUpdate(e){this.update(e)}componentWillUnmount(){this.hasStopped=!0,this.trackItemEnd(),this.trackSessionEnd(),this.clearTickTimeout()}clearTickTimeout(){this._tickTimeout&&(this._tickTimeout=window.clearTimeout(this._tickTimeout))}setTickTimeout(e){e.isPlaying&&(this.clearTickTimeout(),this.itemPlaybackTimestamp=Date.now(),this._tickTimeout=window.setTimeout(this.onTickTimeout,1e3))}update(e={}){const{itemID:t,decision:r,isRemotePlayer:n,isAdVisible:i,isPlaying:s,hasError:a,metricsType:o,metricsPlayer:l}=this.props,{isPlaying:c}=e;if(s&&!c?this.setTickTimeout(this.props):!s&&c&&this.clearTickTimeout(),n)return void(e.isRemotePlayer||(this.trackItemEnd(),this.trackSessionEnd()));!this.hasError&&a&&(this.hasError=!0,this.trackFailure()),this.itemID&&(this.itemID===t?this.updateCurrentItem():this.trackItemEnd());const d=!this.itemID&&!this.hasError&&t&&l&&(r||o===Tb.PHOTO);d&&i&&!s&&!this.sessionAdPlaybackStartTime&&(this.sessionAdPlaybackStartTime=Date.now()),d&&s&&this.trackItemStart()}updateCurrentItem(){const{decision:e,isPlaying:t,hasEnded:r}=this.props;if(t?(this.itemPlaybackTimestamp||(this.itemPlaybackTimestamp=Date.now()),this.hasEnded=r):this.flushPlaybackTimes(),this.itemDecision&&e&&this.itemDecision!==e){let t;if(this.itemDecision.qualityIndex!==e.qualityIndex?t="quality":this.itemDecision.partIndex===e.partIndex&&(t="streams"),t){const e=this.itemMetricsProperties.offset;this.trackItemRestart(t),this.itemMetricsProperties.offset=e}}}getItemMetricsProperties(){const e={serverType:this.props.metricsServerType,connectionType:this.props.metricsConnectionType,type:this.props.metricsType,identifier:this.props.metricsIdentifier,page:this.props.metricsPage,contextTuple:this.props.metricsContextTuple,setting:this.props.metricsSetting,auto:this.props.metricsAutoPlay,protocol:this.props.metricsProtocol,offset:this.props.metricsOffset,container:this.props.metricsContainer,duration:this.props.metricsDuration,bitrate:this.props.metricsBitrate,origin:this.props.metricsOrigin,audioCodec:this.props.metricsAudioCodec,audioDecision:this.props.metricsAudioDecision,videoCodec:this.props.metricsVideoCodec,videoDecision:this.props.metricsVideoDecision,subtitleFormat:this.props.metricsSubtitleFormat,subtitleDecision:this.props.metricsSubtitleDecision,player:this.props.metricsPlayer,mode:this.props.metricsMode};return this.props.isLiveTV&&this.props.isCloudServer&&(e.guid=this.props.metricsGUID,e.group=this.props.metricsGroup,e.title=this.props.metricsTitle,e.publishedAt=this.props.metricsPublishedAt,e.containedId=this.props.metricsContainerID),e}flushPlaybackTimes(){if(!this.itemPlaybackTimestamp)return;const e=Date.now()-this.itemPlaybackTimestamp;this.itemPlaybackTimestamp=null,this.itemPlaybackMilliseconds+=e,this.sessionPlaybackMilliseconds+=e,this.setPlayerItemPlaybackTime(),this.setPlayerSessionPlaybackTime(),(0,Ze.DB)("metrics").addPlaybackTime(e)}trackItemStart(){this.itemID=this.props.itemID,this.itemDecision=this.props.decision,this.itemMetricsProperties=this.getItemMetricsProperties(),this.itemPlaybackTimestamp=Date.now(),this.itemPlaybackMilliseconds=0,this.sessionPlaybackCount+=1,this.hasEnded=this.props.hasEnded,this.hasError=this.props.hasError;const e=this.props.playbackStartTime,t=dS({},this.itemMetricsProperties);if(e>0&&1===this.sessionPlaybackCount){const r=this.sessionAdPlaybackStartTime||Date.now();t.latency=r-e}this.props.syncplaySessionRoomID&&(t.format="watch-together",t.playbackSessionId=this.props.syncplaySessionRoomID),(0,Ze.DB)("metrics").trackEvent({event:Sd.cn,interaction:!0,properties:t}),(0,Ze.DB)("metrics").incrementPlaybackCount(),this.setTickTimeout(this.props)}trackItemRestart(e){this.itemDecision=this.props.decision,this.itemMetricsProperties=this.getItemMetricsProperties(),(0,Ze.DB)("metrics").trackEvent({event:Sd.gS,interaction:!0,properties:uS(dS({},this.itemMetricsProperties),{reason:e})})}trackItemEnd(){if(!this.itemID)return;let e;this.flushPlaybackTimes(),this.clearTickTimeout(),e=this.props.isRemotePlayer?"cast":this.hasError?"failed":this.hasEnded?"completed":this.hasStopped?"stopped":"skipped";const t=uS(dS({},this.itemMetricsProperties),{playbackTime:(0,rS.Z)(this.itemPlaybackMilliseconds),status:e});this.props.syncplaySessionRoomID&&(t.format="watch-together",t.playbackSessionId=this.props.syncplaySessionRoomID),(0,Ze.DB)("metrics").trackEvent({event:Sd.C7,interaction:!0,properties:t}),this.itemID=null,this.itemDecision=null,this.itemMetricsProperties=null,this.itemPlaybackTimestamp=null,this.itemPlaybackMilliseconds=0,this.hasError=!1,this.hasEnded=!1}trackSessionEnd(){this.sessionPlaybackCount&&(this.flushPlaybackTimes(),(0,Ze.DB)("metrics").trackEvent({event:Sd.hx,interaction:!0,properties:{serverType:this.props.metricsServerType,connectionType:this.props.metricsConnectionType,type:this.props.metricsType,playbackCount:this.sessionPlaybackCount,playbackTime:(0,rS.Z)(this.sessionPlaybackMilliseconds)}}),this.sessionPlaybackMilliseconds=0,this.sessionPlaybackCount=0,this.sessionAdPlaybackStartTime=0)}trackFailure(){(0,Ze.DB)("metrics").trackEvent({event:Sd.NY,interaction:!0,properties:{serverType:this.props.metricsServerType,connectionType:this.props.metricsConnectionType,container:this.props.metricsContainer,type:this.props.metricsType,error:this.props.errorCode,mode:this.props.metricsMode}})}setPlayerItemPlaybackTime(){this.props.dispatchSetPlayerItemPlaybackTime({playbackTime:this.itemPlaybackMilliseconds,playerType:this.props.playerType})}setPlayerSessionPlaybackTime(){this.props.dispatchSetPlayerSessionPlaybackTime({playbackTime:this.sessionPlaybackMilliseconds,playerType:this.props.playerType})}render(){return null}}hS.defaultProps={metricsPage:u.r$};const gS=(0,s.$j)((function(){return(0,o.P1)(Cb,By(),QZ(),aZ(),Mb(),vb(),(0,yb.Z)(),(0,o.P1)(((e,{isAdVisible:t})=>t),(0,GZ.Z)(["confirmRemoteToLocal","isPostPlayVisible","isMediaLoading","isBuffering","isPaused","hasError"]),aZ(),vb(),((e,t,r,n)=>!(!r||r.type!==Tb.PHOTO)||!(!n||e||t.confirmRemoteToLocal||t.isPostPlayVisible||t.isMediaLoading||t.isBuffering||t.isPaused||t.hasError))),(0,o.P1)(WZ(),(0,Fy.Z)("positionSeconds"),aZ(),Mb(),vb(),((e,t,r,n,i)=>{if(e){if(!n)return!1;const{beginsAt:t,endsAt:r}=n;return e>r-.9*(r-t)}if(r&&r.type===Tb.PHOTO)return!0;if(i){const e=n&&n.Part[i.partIndex];if(n&&n.duration&&e)return(0,KZ.Z)(n,e,1e3*t)>.9*n.duration}return!1})),(0,Fy.Z)("syncplaySessionRoomID"),(0,Fy.Z)("hasError"),(0,Fy.Z)("errorCode"),(0,Fy.Z)("metricsPage"),(0,Fy.Z)("metricsContextTuple"),(0,Fy.Z)("metricsAutoPlay"),(0,Fy.Z)("metricsPlayer"),(0,Fy.Z)("metricsSetting"),(0,Fy.Z)("playbackStartTime"),((e,t,r,n,i,s,a,o,l,c,d,u,p,m,h,g,y,v)=>{const f={decision:s,isPlaying:o,isLiveTV:e,hasEnded:l,hasError:d,errorCode:u,metricsPage:p,metricsContextTuple:m,metricsAutoPlay:h,metricsPlayer:g,metricsSetting:y,playbackStartTime:v,syncplaySessionRoomID:c};if(r&&(f.isCloudServer=r.isCloud,f.metricsServerType=(0,eS.Z)(r),f.metricsConnectionType=(0,JZ.Z)(r.activeConnection)),n&&(f.metricsType=n.type,f.metricsIdentifier=n.identifier,e&&i&&(f.metricsGUID=n.ratingKey,f.metricsTitle=n.type===Tb.EPISODE?n.grandparentTitle:n.title,f.metricsPublishedAt=i.beginsAt,f.metricsContainerID=i.channelIdentifier,f.metricsGroup=i.channelShortTitle),n.type===Tb.PHOTO&&(f.metricsPlayer=$Z.k9,n.Media.length&&(f.metricsContainer=n.Media[0].container))),f.itemID=e?null==i?void 0:i.id:null==a?void 0:a.playQueueItemID,t&&!f.metricsIdentifier&&(f.metricsIdentifier=t.identifier),s){const e=function(e){const t={};return e.isDirectPlay?(t.videoDecision=qZ,t.audioDecision=qZ,t.subtitleDecision=qZ):(t.videoDecision=e.canDirectStreamVideo?YZ:XZ,t.audioDecision=e.canDirectStreamAudio?YZ:XZ,t.subtitleDecision=e.useSoftSubtitles?YZ:XZ),t}(s),t=i&&i.Part[s.partIndex];let r;n&&(r=Tb.getMetadataType(n.type).mediaType);const a=tZ.Z.get("video").id,o=t&&Uu().findWhere(t.Stream,{streamType:a}),l=tZ.Z.get("audio").id,c=t&&Uu().findWhere(t.Stream,{streamType:l,selected:!0}),d=tZ.Z.get("subtitles").id,u=t&&Uu().findWhere(t.Stream,{streamType:d,selected:!0});f.metricsProtocol=s.protocol,f.metricsOffset=s.positionSeconds,s.drm&&(f.metricsMode=s.drm),i&&(f.metricsContainer=i.container,f.metricsDuration=(0,rS.Z)(i.duration||n.duration),f.metricsBitrate=function(e){if(null==e)return;let t;return t=e>=10240?512:e>=1024?256:e>=512?128:e>=256?64:32,(0,tS.Z)(e,t)}(i.bitrate),f.metricsOrigin=i.origin),r===og.pX&&(f.metricsVideoCodec=o&&o.codec||pS,f.metricsVideoDecision=e.videoDecision,u&&u.id!==dZ.H&&(f.metricsSubtitleFormat=u&&u.codec||pS,f.metricsSubtitleDecision=e.subtitleDecision)),r!==og.pX&&r!==og.j0||(f.metricsAudioCodec=c&&c.codec||pS,f.metricsAudioDecision=e.audioDecision)}return f}))}),mS)(hS);class yS extends i.Component{constructor(e,t){super(e,t),this._screenSaverManager=(0,Ze.s4)("screenSaverManager")?(0,Ze.DB)("screenSaverManager"):null}componentDidMount(){this._toggleScreenSaver(this.props.isEnabled)}componentDidUpdate(e){e.isEnabled!==this.props.isEnabled&&this._toggleScreenSaver(this.props.isEnabled)}componentWillUnmount(){this._toggleScreenSaver(!0)}_toggleScreenSaver(e){this._screenSaverManager&&this._screenSaverManager.toggle(e)}render(){return null}}const vS=(0,s.$j)((function(){return(0,o.P1)((0,GZ.Z)(["isOpen","isPaused","openState"]),(({isOpen:e,isPaused:t,openState:r})=>{const n=r===qb.K;return{isEnabled:!e||!n||t}}))}))(yS);class fS extends i.Component{constructor(){super(...arguments),this.onResize=e=>{this.timeoutID=window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(this.onResizeTimeout,this.props.resizeDelay)},this.onResizeTimeout=()=>{this.props.onScreenSizeChange({width:window.innerWidth,height:window.innerHeight})}}componentDidMount(){window.addEventListener("resize",this.onResize),this.onResizeTimeout()}componentWillUnmount(){window.removeEventListener("resize",this.onResize),this.timeoutID=window.clearTimeout(this.timeoutID)}render(){return null}}fS.propTypes={resizeDelay:hb().number,onScreenSizeChange:hb().func.isRequired},fS.defaultProps={resizeDelay:100};const bS=fS;var ZS=r(992);function SS(){return(0,o.P1)(WZ(),(0,o.P1)((0,eZ.Z)(),ni.Z,((e,t)=>e&&(e.timeline||e.grabOperation)?e.timeline?e.timeline.map((e=>t[e])):[t[e.grabOperation.metadataItem]]:[])),((e,t)=>{if(null!=e)for(let r=0;r<t.length;r++){const n=t[r];for(let t=0;t<n.Media.length;t++){const r=n.Media[t],{beginsAt:i,endsAt:s}=r;if(i<=e&&s>e)return n}}}))}var PS=r(6890),IS=r(21500),ES=r(50984);function wS(e,t){const r=Math.max(e,t),n=Date.now()-1e3*r;return(0,PS.Z)(n)}class CS extends i.Component{constructor(e,t){super(e,t),this.updateTimeAgo=()=>{const{captureBufferStartedAt:e,mediaItemBeginsAt:t}=this.props,r=6e4-1e3*(new Date).getSeconds(),n=wS(e,t);n!==this.state.timeAgo&&this.setState({timeAgo:n}),this._updateTimeAgoTimeout=window.setTimeout(this.updateTimeAgo,r)},this.onConfirm=e=>{const{serverEntityID:t,providerEntityID:r,onConfirm:n}=this.props;n({serverEntityID:t,providerEntityID:r,offset:e})},this._updateTimeAgoTimeout=null,this.state={timeAgo:wS(e.captureBufferStartedAt,e.mediaItemBeginsAt)}}componentDidMount(){this.props.mediaItemBeginsAt||this.onConfirm(),this.updateTimeAgo()}componentWillUnmount(){this._updateTimeAgoTimeout&&window.clearTimeout(this._updateTimeAgoTimeout)}render(){const{isOpen:e,captureBufferStartedAt:t,mediaItemBeginsAt:r,onModalClose:n}=this.props,{timeAgo:s}=this.state;return t?i.createElement(IS.Z,{isOpen:e,metricsPage:u.zj,title:(0,Se.Z)("Join Session in Progress"),onCancel:n,onItemSelect:this.onConfirm},i.createElement(ES.Z,{value:1e3*Math.max(r-t,0)},(0,Se.Z)("Watch from start (started {timeAgo} ago)",{timeAgo:s})),i.createElement(ES.Z,{value:null},(0,Se.Z)("Watch Live"))):null}}const MS=CS;var DS=Object.defineProperty,OS=Object.defineProperties,TS=Object.getOwnPropertyDescriptors,xS=Object.getOwnPropertySymbols,AS=Object.prototype.hasOwnProperty,kS=Object.prototype.propertyIsEnumerable,NS=(e,t,r)=>t in e?DS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const RS=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),(0,eZ.Z)(),(0,o.P1)(WZ(),SS(),(0,eZ.Z)(),((e,t,r)=>{if(null!=e&&t&&r)return t.Media.find((t=>{const{beginsAt:n,endsAt:i,channelIdentifier:s}=t;return n<=e&&i>e&&r.channelIdentifier===s}))})),((e,t,r)=>{const{serverEntityID:n,providerEntityID:i}=e,s={serverEntityID:n,providerEntityID:i};if(t&&t.captureBuffer){const e=t.captureBuffer.startedAt;s.captureBufferStartedAt=e}return r?s.mediaItemBeginsAt=r.beginsAt:t&&t.grabOperation&&(s.mediaItemBeginsAt=t.grabOperation.mediaItem.beginsAt),s}))}),(function(e,{playerType:t}){return{onConfirm(r){var n;e((0,sg.lO)((n=((e,t)=>{for(var r in t||(t={}))AS.call(t,r)&&NS(e,r,t[r]);if(xS)for(var r of xS(t))kS.call(t,r)&&NS(e,r,t[r]);return e})({},r),OS(n,TS({playerType:t})))))},onModalClose(){e((0,sg.Zh)({playerType:t}))}}}))(MS),LS=(0,o.P1)(ky.Z,(e=>e?e.friendlyName:null)),jS=function(e){const{isOpen:t,playerName:r,onConfirm:n,onCancel:s}=e;return i.createElement(we.Z,{cancelLabel:(0,Se.Z)("No"),confirmLabel:(0,Se.Z)("Yes"),isOpen:t,message:(0,Se.Z)("Would you like to continue playback on {playerName}?",{playerName:r}),metricsPage:u.LO,title:(0,Se.Z)("Continue Playback"),onCancel:s,onConfirm:n})};var VS=Object.defineProperty,US=Object.defineProperties,FS=Object.getOwnPropertyDescriptors,BS=Object.getOwnPropertySymbols,_S=Object.prototype.hasOwnProperty,zS=Object.prototype.propertyIsEnumerable,HS=(e,t,r)=>t in e?VS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const WS={dispatchCancelLocalToRemote:Ry.OA,dispatchConfirmLocalToRemote:Ry.$B,dispatchCloseLocalToRemote:Ry.Te},GS=(0,s.$j)((function(){return(0,o.P1)(LS,(0,Fy.Z)("confirmLocalToRemote"),((e,t)=>({playerName:e,confirmLocalToRemote:t})))}),WS)((function(e){const t=e,{playerType:r,confirmLocalToRemote:n,dispatchCancelLocalToRemote:s,dispatchCloseLocalToRemote:a,dispatchConfirmLocalToRemote:o}=t,l=((e,t)=>{var r={};for(var n in e)_S.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&BS)for(var n of BS(e))t.indexOf(n)<0&&zS.call(e,n)&&(r[n]=e[n]);return r})(t,["playerType","confirmLocalToRemote","dispatchCancelLocalToRemote","dispatchCloseLocalToRemote","dispatchConfirmLocalToRemote"]);(0,i.useEffect)((()=>{n===cZ.YN&&a({playerType:r})}),[n,r,a]);const c=(0,i.useCallback)((()=>{s({playerType:r})}),[r,s]),d=(0,i.useCallback)((()=>{o({playerType:r})}),[r,o]);return i.createElement(jS,(u=((e,t)=>{for(var r in t||(t={}))_S.call(t,r)&&HS(e,r,t[r]);if(BS)for(var r of BS(t))zS.call(t,r)&&HS(e,r,t[r]);return e})({},l),US(u,FS({onCancel:c,onConfirm:d}))));var u}));var QS=r(57538),$S=r(66281);var KS=Object.defineProperty,qS=Object.defineProperties,YS=Object.getOwnPropertyDescriptors,XS=Object.getOwnPropertySymbols,JS=Object.prototype.hasOwnProperty,eP=Object.prototype.propertyIsEnumerable,tP=(e,t,r)=>t in e?KS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const rP=(0,s.$j)((function(){return(0,o.P1)(((e,{confirmOffsetPayload:t})=>t),ni.Z,((e,t)=>{let r;return e&&(r=t[e.metadataItemEntityID]),r?{viewOffset:r.viewOffset,duration:r.duration}:{}}))}),(function(e,{playerType:t,confirmOffsetPayload:r}){return{onConfirm(t){var n;e(Ce.wA((n=((e,t)=>{for(var r in t||(t={}))JS.call(t,r)&&tP(e,r,t[r]);if(XS)for(var r of XS(t))eP.call(t,r)&&tP(e,r,t[r]);return e})({},r),qS(n,YS({confirmPlayback:!0,confirmOffset:!0,startOffsetMilliseconds:t})))))},onCancel(){e(Ce.d7({playerType:t}))}}}))((function(e){const{isOpen:t,viewOffset:r,duration:n,onConfirm:s,onCancel:a}=e,o=(n-r)/1e3,l=o>0;return i.createElement(IS.Z,{isOpen:t,metricsPage:u.Vk,title:(0,Se.Z)("Resume Playback"),onCancel:a,onItemSelect:s},i.createElement(ES.Z,{autoFocus:!0,value:r},i.createElement(i.Fragment,null,(0,Se.Z)("Resume from {time}",{time:(0,$S.Z)(r)}),l?i.createElement(G.Z,null):null,l?(0,QS.Z)(o):null)),i.createElement(ES.Z,{value:0},(0,Se.Z)("Start from the beginning")))}));var nP=Object.defineProperty,iP=Object.defineProperties,sP=Object.getOwnPropertyDescriptors,aP=Object.getOwnPropertySymbols,oP=Object.prototype.hasOwnProperty,lP=Object.prototype.propertyIsEnumerable,cP=(e,t,r)=>t in e?nP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const dP=(0,s.$j)(null,(function(e,{playerType:t,confirmPlaybackPayload:r}){return{onConfirm(){var t;e(Ce.wA((t=((e,t)=>{for(var r in t||(t={}))oP.call(t,r)&&cP(e,r,t[r]);if(aP)for(var r of aP(t))lP.call(t,r)&&cP(e,r,t[r]);return e})({},r),iP(t,sP({confirmPlayback:!0})))))},onCancel(){e(Ce.xT({playerType:t}))}}}))((function(e){const{isOpen:t,onConfirm:r,onCancel:n}=e;return i.createElement(we.Z,{confirmLabel:(0,Se.Z)("Play"),isOpen:t,message:(0,Se.Z)("This will clear changes made to the queue and play the selection instead."),metricsPage:u.o_,title:(0,Se.Z)("Play Now"),onCancel:n,onConfirm:r})}));var uP=r(35199),pP=r(13734),mP=r(36457);const hP=hb().shape({metricsContext:hb().oneOf(Object.values(d)).isRequired,type:hb().oneOf(Object.values(mP)).isRequired});var gP=r(24642),yP=r(45181);function vP(e){const{isOpen:t,metricsPage:r,onDismiss:n,upsellPayload:s,subscribeUrl:a,onSubscribe:o}=e,l=(0,i.useCallback)((()=>{n(),o&&o()}),[n,o]);return i.createElement(tl.Z,{isOpen:t,metricsPage:r,size:el.HC,onModalClose:n},i.createElement(rl.Z,{onModalClose:n},s.type===mP.TONE_MAPPING?i.createElement(Xo.Z,null,(0,Se.Z)("HDR Conversion")):null,s.type===mP.TONE_MAPPING?i.createElement(Ko.Z,null,i.createElement("p",null,(0,Se.Z)("This video needs to be converted for playback and contains High Dynamic Range (HDR) content. Colors will appear distorted on this device.")),i.createElement("p",null,(0,Se.Z)('With a Plex Pass, you can preview the new "HDR tone mapping" feature to correct colors during conversion!'))):null,i.createElement(qo.Z,null,i.createElement(yP.Z,null,i.createElement(gP.Z,{action:ss.GP,context:s.metricsContext},i.createElement($o.Z,{onPress:n},(0,Se.Z)("OK"))),i.createElement(gP.Z,{action:ss.kD,context:s.metricsContext},i.createElement($o.Z,{"data-autofocus":!0,kind:Jo._8,target:"_blank",to:a,onPress:l},(0,Se.Z)("Get a Plex Pass")))))))}vP.defaultProps={metricsPage:u.ce,subscribeUrl:(0,_f.LL)("/plex-pass")};const fP=vP;var bP=Object.defineProperty,ZP=Object.defineProperties,SP=Object.getOwnPropertyDescriptors,PP=Object.getOwnPropertySymbols,IP=Object.prototype.hasOwnProperty,EP=Object.prototype.propertyIsEnumerable,wP=(e,t,r)=>t in e?bP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const CP=(0,s.$j)(null,(function(e,t){const{upsellPayload:r,onDismiss:n}=t;return{onDismiss(){const i=(0,pP.Z)(uP.Z.Upsell,r.type);e((0,$s.JY)({id:i})),n&&n(t)}}}))(fP);CP.propTypes=ZP(((e,t)=>{for(var r in t||(t={}))IP.call(t,r)&&wP(e,r,t[r]);if(PP)for(var r of PP(t))EP.call(t,r)&&wP(e,r,t[r]);return e})({},CP.propTypes),SP({upsellPayload:hP.isRequired,onDismiss:hb().func}));const MP=CP;var DP=Object.defineProperty,OP=Object.defineProperties,TP=Object.getOwnPropertyDescriptors,xP=Object.getOwnPropertySymbols,AP=Object.prototype.hasOwnProperty,kP=Object.prototype.propertyIsEnumerable,NP=(e,t,r)=>t in e?DP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const RP=(0,s.$j)(null,(function(e,t){const{playerType:r}=t;return{onDismiss(){e((0,Ce.lm)({playerType:r}))}}}))(MP);RP.propTypes=((e,t)=>OP(e,TP(t)))(((e,t)=>{for(var r in t||(t={}))AP.call(t,r)&&NP(e,r,t[r]);if(xP)for(var r of xP(t))kP.call(t,r)&&NP(e,r,t[r]);return e})({},RP.propTypes),{playerType:hb().oneOf([m.Se,m.pV]).isRequired});const LP=RP,jP=(0,s.$j)(null,(function(e,{playerType:t}){return{onConfirm(){e((0,Ry.jP)({playerType:t}))},onCancel(){e((0,Ce.Mh)({playerType:t}))}}}))((function(e){const{isOpen:t,onConfirm:r,onCancel:n}=e;return i.createElement(we.Z,{cancelLabel:(0,Se.Z)("No"),confirmLabel:(0,Se.Z)("Yes"),isOpen:t,message:(0,Se.Z)("Would you like to continue playback here?"),metricsPage:u.cU,title:(0,Se.Z)("Continue Playback"),onCancel:n,onConfirm:r})}));var VP=r(55275);function UP(e){const t=Math.floor(Date.now()/1e3);return e.reduce(((e,{mediaItem:r})=>{const{beginsAt:n,startOffsetSeconds:i=0}=r,s=n-i;return s>t&&(!e||s<e)?s:e}),0)}function FP(e){return Math.max(0,e-Math.floor(Date.now()/1e3))}class BP extends i.Component{constructor(e,t){super(e,t),this._tick=()=>{this.setState({endSeconds:FP(this.state.endsAt)}),this._setTickTimeout()},this._tickTimeout=null;const r=UP(e.conflicts);this.state={endsAt:r,endSeconds:FP(r)}}componentDidMount(){this._setTickTimeout()}componentDidUpdate(e,t){const{conflicts:r,onModalClose:n}=this.props;e.conflicts!==r&&this._updateEndSeconds(),t.endSeconds>0&&0===this.state.endSeconds&&n({showError:!0})}componentWillUnmount(){this._tickTimeout&&window.clearTimeout(this._tickTimeout)}_setTickTimeout(){this.state.endSeconds&&(this._tickTimeout=window.setTimeout(this._tick,1e3))}_updateEndSeconds(){const e=UP(this.props.conflicts);this.setState({endsAt:e,endSeconds:FP(e)})}render(){const{endSeconds:e}=this.state,t=function(e){if(null==e)return"";const t=(0,VP.ZP)(e),r=24*t.days*60,n=60*t.hours,i=t.minutes+n+r,s=t.seconds;return i&&s?(0,Se.Z)("{1} min {2} sec",i,s):i?(0,Se.Z)("{1} min",i):s>0?(0,Se.Z)("{1} sec",s):""}(1e3*e);return i.createElement("span",null,(0,Se.Z)("This live TV session will end in: {formattedMinutesSeconds}",{formattedMinutesSeconds:t}))}}const _P=BP;var zP=r(17330),HP=r(27901),WP=r(86555);function GP(e,t,r,n){const i=e===Tb.EPISODE?r:t;return n?(0,Se.Z)("Stop watching {openSpan}{title}{closeSpan} and continue",{title:i}):(0,Se.Z)("Stop recording {openSpan}{title}{closeSpan} and continue",{title:i})}const QP=(0,s.$j)((function(){return(0,o.P1)((0,WP.Z)(),(e=>({type:e.type,title:e.title,grandparentTitle:e.grandparentTitle,thumb:e.thumb,grandparentThumb:e.grandparentThumb})))}),(function(e,t){const{playerType:r,grabOperationKey:n}=t;return{onCancelConflictPress(){e((0,sg.pg)({playerType:r,grabOperationKey:n}))}}}))((function(e){const{serverEntityID:t,type:r,title:n,grandparentTitle:s,thumb:a,grandparentThumb:o,isRolling:l,onCancelConflictPress:c}=e;return i.createElement(Wo.Z,{className:"PlayerConflictItemRow-conflict-y1cRSc",onPress:c},i.createElement(Ye.Z,{className:"PlayerConflictItemRow-thumbnail-etABr9",component:Fe.Z,height:80,serverEntityID:t,url:a||o,width:53}),i.createElement("div",{className:"PlayerConflictItemRow-title-WqTy1A"},i.createElement(lv.Z,{message:GP(r,n,s,l),tags:[{open:"openSpan",close:"closeSpan",component:"span",className:"PlayerConflictItemRow-titleHighlight-UHO3hi"}]})))})),$P=function(e){const{serverEntityID:t,hasSubscribeFeature:r,isPlayerOpen:n,playerType:s,isConflictCancelling:a,conflicts:o,error:l,onModalClose:c}=e,d=function(e,t){return e?t?(0,Se.Z)("A recording is scheduled to start in a few minutes and all tuners are currently in use. Please select from one of the actions below. Selecting OK or taking no action will end this live viewing session once the recording starts."):(0,Se.Z)("All tuners are in use. Please ask the server owner to free up a tuner to continue watching Live TV."):t?(0,Se.Z)("Please select from one of the actions below."):(0,Se.Z)("All tuners are in use. Please ask the server owner to free up a tuner to watch Live TV.")}(n,r);return i.createElement(rl.Z,{onModalClose:c},i.createElement(Xo.Z,{className:"PlayerConflictModalContent-modalHeader-tlkQ8U ModalHeader-modalHeader-nb9ueN"},(0,Se.Z)("All Tuners are Currently in Use")),l?i.createElement(HP.Z,{kind:Jo.T,message:(0,Se.Z)("There was an error trying to cancel the selected item, please try again")}):null,i.createElement(Ko.Z,{innerClassName:"PlayerConflictModalContent-innerModalBody-I1PZRN ModalBody-innerModalBody-T6u3sU"},i.createElement("div",{className:"PlayerConflictModalContent-message-VcxuAn"},d),r?i.createElement("div",{className:"PlayerConflictModalContent-conflicts-tFH9Aw"},o.map((e=>i.createElement(QP,{key:e.key,grabOperationKey:e.key,isPlayerOpen:n,isRolling:e.rolling,metadataItemEntityID:e.metadataItem,playerType:s,serverEntityID:t})))):null),i.createElement(qo.Z,null,i.createElement("div",{className:"PlayerConflictModalContent-footerMessage-hqGCE7"},n?i.createElement(_P,{conflicts:o,onModalClose:c}):null),i.createElement(yP.Z,null,i.createElement(zP.Z,{isSpinning:a,kind:Jo._8,onPress:c},n||!r?(0,Se.Z)("OK"):(0,Se.Z)("Cancel")))))},KP=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),By(),(0,eZ.Z)(),((e,t,r)=>{const n={serverEntityID:e.serverEntityID,hasSubscribeFeature:!!t.features.find((({type:e})=>"subscribe"===e)),error:e.cancelConflictError,isConflictCancelling:e.isConflictCancelling};return r&&(n.conflicts=r.grabOperation.conflicts),n}))}),(function(e,t){const{isPlayerOpen:r,playerType:n}=t;return{onModalClose({showError:t=!1}={}){e(r?(0,sg.oW)({playerType:n,showError:t}):(0,sg.T)({playerType:n}))}}}))((function(e){const{isOpen:t,isPlayerOpen:r,playerType:n,serverEntityID:s,hasSubscribeFeature:a,conflicts:o,isConflictCancelling:l,onModalClose:c}=e;return i.createElement(tl.Z,{isOpen:t,metricsPage:u.Rh,size:el.HC,onModalClose:c},i.createElement($P,{conflicts:o,hasSubscribeFeature:a,isConflictCancelling:l,isPlayerOpen:r,playerType:n,serverEntityID:s,onModalClose:c}))}));var qP=r(59178);var YP=Object.defineProperty,XP=Object.getOwnPropertySymbols,JP=Object.prototype.hasOwnProperty,eI=Object.prototype.propertyIsEnumerable,tI=(e,t,r)=>t in e?YP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function rI(e){const{errorCode:t,errorMessage:r,title:n}=e;return t===qP.Pe?i.createElement(lv.Z,{message:(0,Se.Z)("This browser can not play DRM-protected content over an insecure connection. Please try {openLink}https://app.plex.tv{closeLink} instead."),tags:[{open:"openLink",close:"closeLink",component:Wo.Z,kind:Jo._8,to:ar.mV}]}):t===qP.L7?(0,Se.Z)("An error occurred trying to play this item. Please enable DRM support in your browser then try again."):r||(n?(0,Se.Z)('An error occurred trying to play "{title}".',{title:n}):(0,Se.Z)("An error occurred trying to play this item."))}const nI=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),wb(),nZ(),vb(),((e,{mediaType:t})=>t),((e,{isRemotePlayer:t})=>t),((e,t,r,n,i,s)=>{const{playQueue:a,repeatAll:o,errorCode:l,errorCategory:c,isWatchTogether:d}=e,u=r&&r.entityID,p=a&&a.currentIndex,m=function(e,t,r,n){if(!e||!t)return r;const i=t&&t.Media[e.mediaIndex],s=i&&i.source?i.source:t.source;if(!s)return r;const a=(0,Xn.Z)(s);return Mt.wB(a.providerIdentifier,Mt.xF)&&"h4"===n?(0,Se.Z)("An error occurred trying to play this item. Please make sure content from TIDAL is not already playing on another device."):r}(n,t,e.errorMessage,l),h={playQueueItemEntityID:u,showSkipButton:!!a&&(p<a.playQueueItems.length-1||o),showRetryButton:!!a&&i!==og.pV&&!s&&!d,errorMessage:m,errorCode:l,errorCategory:c};return t&&(h.title=t.title),h}))}),(function(e,t){const r={playerType:t.playerType};return{onModalClose(){e((0,Ce.Mh)(r))},onSkipPress(t){e((0,Xb.o1)(r))},onRetryPress(t){e((0,gb.iu)(r)),e((0,Jb.Mf)(r))}}}))((function(e){const{isOpen:t,showSkipButton:r,showRetryButton:n,errorCode:s,errorCategory:a,onSkipPress:o,onRetryPress:l,onModalClose:c}=e;return i.createElement(tl.Z,{isOpen:t,metricsPage:u.hw,size:el.HC,onModalClose:c},i.createElement(rl.Z,{onModalClose:c},i.createElement(Xo.Z,{className:"PlayerErrorModal-modalHeader-_vIr3h ModalHeader-modalHeader-nb9ueN"},(0,Se.Z)("Playback Error")),i.createElement(Ko.Z,null,i.createElement(rI,((e,t)=>{for(var r in t||(t={}))JP.call(t,r)&&tI(e,r,t[r]);if(XP)for(var r of XP(t))eI.call(t,r)&&tI(e,r,t[r]);return e})({},e)),null!=s?i.createElement("p",{className:"PlayerErrorModal-errorCode-b6NbJN"},(0,Se.Z)("Error code: {errorCode}",{errorCode:s}),a?` (${a})`:null):null),r||n?i.createElement(qo.Z,null,i.createElement(yP.Z,null,r?i.createElement($o.Z,{onPress:o},(0,Se.Z)("Skip")):null,n?i.createElement($o.Z,{kind:Jo._8,onPress:l},(0,Se.Z)("Retry")):null)):null))}));var iI=r(60094),sI=r(57635);function aI(e,t){return{src:y.Z.join(e,{width:t,height:t,minSize:1}),sizes:`${t}x${t}`,type:"image/jpeg"}}function oI({metadataItem:e,player:t,transcodeURL:r}){return(0,i.useEffect)((()=>{const n=e&&Mt.wB((0,Xn.Z)(e.source).providerIdentifier,[Mt.Ll,Mt.vP]),i=!!e&&!n;window.navigator.mediaSession.playbackState=i?function(e){return(null==e?void 0:e.isPaused)||(null==e?void 0:e.isBuffering)?(null==e?void 0:e.isPaused)?"paused":"none":"playing"}(t):"none",window.navigator.mediaSession.metadata=i?new window.MediaMetadata({title:e.title,artist:e.originalTitle||e.grandparentTitle,album:e.parentTitle,artwork:r?[aI(r,96),aI(r,128),aI(r,192),aI(r,256),aI(r,512)]:void 0}):null}),[e,t,r]),(0,i.useEffect)((()=>()=>{window.navigator.mediaSession.metadata=null,window.navigator.mediaSession.playbackState="none"}),[]),null}const lI=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),wb(),((e,t)=>({metadataItem:t,player:e,url:t?(0,sI.G)(t.type,t):void 0,serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID})))}))((0,s.$j)((()=>(0,o.P1)((0,iI.Z)(),(e=>({transcodeURL:e})))))((({metadataItem:e,player:t,transcodeURL:r,url:n,serverEntityID:s,providerEntityID:a})=>i.createElement(oI,{metadataItem:e,player:t,providerEntityID:a,serverEntityID:s,transcodeURL:r,url:n}))));const cI={dispatchPlayPreviousItem:Xb.oA,dispatchStepBack:gb.Hn,dispatchSkipBack:gb.QJ,dispatchTogglePlayPause:gb.ID,dispatchPlay:gb.hY,dispatchPause:gb.wO,dispatchSkipForward:gb.wW,dispatchStepForward:gb.oX,dispatchPlayNextItem:Xb.o1,dispatchChangeVolume:gb.v6,dispatchEndPlayback:Ce.Mh};class dI extends i.Component{constructor(e,t){super(e,t),this.onPreviousShortcut=()=>{this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayPreviousItem({playerType:this.props.playerType})},this.onStepBackShortcut=()=>{const e={playerType:this.props.playerType};this.props.isCurrentMediaTypeSeekable?this.props.dispatchStepBack(e):this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayPreviousItem(e)},this.onSkipBackShortcut=()=>{const e={playerType:this.props.playerType};this.props.isCurrentMediaTypeSeekable?this.props.dispatchSkipBack(e):this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayPreviousItem(e)},this.onPlayPauseShortcut=()=>{this.props.isCurrentMediaTypePausable&&this.props.dispatchTogglePlayPause({playerType:this.props.playerType})},this.onPlayShortcut=()=>{this.props.isCurrentMediaTypePausable&&this.props.dispatchPlay({playerType:this.props.playerType})},this.onPauseShortcut=()=>{this.props.isCurrentMediaTypePausable&&this.props.dispatchPause({playerType:this.props.playerType})},this.onSkipForwardShortcut=()=>{const e={playerType:this.props.playerType};this.props.isCurrentMediaTypeSeekable?this.props.dispatchSkipForward(e):this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayNextItem(e)},this.onStepForwardShortcut=()=>{const e={playerType:this.props.playerType};this.props.isCurrentMediaTypeSeekable?this.props.dispatchStepForward(e):this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayNextItem(e)},this.onNextShortcut=()=>{this.props.isCurrentMediaTypeSkippable&&this.props.dispatchPlayNextItem({playerType:this.props.playerType})},this.onVolumeChange=e=>{this.props.dispatchChangeVolume({volume:e,playerType:this.props.playerType})},this.onVolumeIncrease=()=>{this.onVolumeChange(Math.min(this.props.volume+10,100))},this.onVolumeDecrease=()=>{this.onVolumeChange(Math.max(this.props.volume-10,0))},this.onCloseShortcut=()=>{this.setState({isCloseConfirmModalOpen:!0})},this.onCloseConfirmPress=e=>{this.props.dispatchEndPlayback({playerType:this.props.playerType})},this.onCloseCancelPress=e=>{this.setState({isCloseConfirmModalOpen:!1})},this.onToggleFullscreenShortcut=()=>{this.props.onToggleFullscreenShortcut()},this.state={isCloseConfirmModalOpen:!1}}componentDidMount(){this.props.allowShortcuts&&this._startListening()}componentDidUpdate(e){const{allowShortcuts:t}=this.props;t&&!e.allowShortcuts?this._startListening():!t&&e.allowShortcuts&&this._stopListening()}componentWillUnmount(){this.props.allowShortcuts&&this._stopListening()}_startListening(){const{isCurrentMediaTypePausable:e,isCurrentMediaTypeSkippable:t}=this.props;h.Z.hasMediaSession&&(window.navigator.mediaSession.setActionHandler("play",e?this.onPlayShortcut:null),window.navigator.mediaSession.setActionHandler("pause",e?this.onPauseShortcut:null),window.navigator.mediaSession.setActionHandler("previoustrack",t?this.onPreviousShortcut:null),window.navigator.mediaSession.setActionHandler("nexttrack",t?this.onNextShortcut:null),window.navigator.mediaSession.setActionHandler("stop",this.onCloseShortcut)),Bp.Z.on({"shortcut:skipPrevious":this.onPreviousShortcut,"shortcut:stepBackward":this.onStepBackShortcut,"shortcut:seekBackward":this.onSkipBackShortcut,"shortcut:playPause":this.onPlayPauseShortcut,"shortcut:play":this.onPlayShortcut,"shortcut:pause":this.onPauseShortcut,"shortcut:seekForward":this.onSkipForwardShortcut,"shortcut:stepForward":this.onStepForwardShortcut,"shortcut:skipNext":this.onNextShortcut,"shortcut:increaseVolume":this.onVolumeIncrease,"shortcut:decreaseVolume":this.onVolumeDecrease,"shortcut:toggleFullScreen":this.onToggleFullscreenShortcut,"shortcut:stop":this.onCloseShortcut})}_stopListening(){h.Z.hasMediaSession&&(window.navigator.mediaSession.setActionHandler("play",null),window.navigator.mediaSession.setActionHandler("pause",null),window.navigator.mediaSession.setActionHandler("previoustrack",null),window.navigator.mediaSession.setActionHandler("nexttrack",null),window.navigator.mediaSession.setActionHandler("stop",null)),Bp.Z.off({"shortcut:skipPrevious":this.onPreviousShortcut,"shortcut:stepBackward":this.onStepBackShortcut,"shortcut:seekBackward":this.onSkipBackShortcut,"shortcut:playPause":this.onPlayPauseShortcut,"shortcut:play":this.onPlayShortcut,"shortcut:pause":this.onPauseShortcut,"shortcut:seekForward":this.onSkipForwardShortcut,"shortcut:stepForward":this.onStepForwardShortcut,"shortcut:skipNext":this.onNextShortcut,"shortcut:increaseVolume":this.onVolumeIncrease,"shortcut:decreaseVolume":this.onVolumeDecrease,"shortcut:toggleFullScreen":this.onToggleFullscreenShortcut,"shortcut:stop":this.onCloseShortcut})}render(){return i.createElement(we.Z,{isOpen:this.state.isCloseConfirmModalOpen,message:(0,Se.Z)("Closing the player will stop playback. Any changes to the queue will be lost."),metricsPage:u.s0,title:(0,Se.Z)("Stop Playback"),onCancel:this.onCloseCancelPress,onConfirm:this.onCloseConfirmPress})}}const uI=(0,s.$j)((function(){return(0,o.P1)((0,o.P1)((e=>e.ui.audioVideoPlayer.openState),(e=>e.ui.photoPlayer.openState),((e,{playerType:t})=>t),((e,t,r)=>function(e){const{playerType:t,audioVideoOpenState:r,photoOpenState:n}=e,i=t===m.Se&&!!r,s=t===m.pV&&!!n;let a=0,o=0;return r===qb.y?a+=1:r===qb.K&&(a+=2),n===qb.y?o+=1:n===qb.K&&(o+=2),i&&a>=o||s&&o>a}({audioVideoOpenState:e,photoOpenState:t,playerType:r}))),wb(),(0,o.P1)((0,yb.Z)(),(e=>{let t;if(e){const r=(0,Tb.getMetadataType)(e.type);t=r&&r.mediaType}return t})),((e,{isAdVisible:t})=>t),Kb.Z,((e,t,r,n,i)=>{const s=t&&Mt.wB((0,Xn.Z)(t.source).providerIdentifier,[Mt.Ll,Mt.vP]),a=t&&(0,Xn.Z)(t.source).serverIdentifier===Dt.X,o=s&&a;return{allowShortcuts:e,isCurrentMediaTypePausable:!o,isCurrentMediaTypeSkippable:!n&&!s,isCurrentMediaTypeSeekable:!(n||o||r!==og.j0&&r!==og.pX),volume:i}}))}),cI)(dI);var pI=r(3510);class mI extends i.Component{constructor(e,t){super(e,t),this.title=document.title}componentDidMount(){this._updateWindowTitle()}componentDidUpdate(){this._updateWindowTitle()}componentWillUnmount(){document.title=this.title}_updateWindowTitle(){const{type:e,title:t,originalTitle:r,grandparentTitle:n,index:i,parentIndex:s,originallyAvailableAt:a,isPaused:o}=this.props;if(!t||!e)return;let l;if(e===Tb.EPISODE)l=`${n} - ${(0,pI.Z)({seasonIndex:s,episodeIndex:i,date:a,noLeadingZero:!0,separator:"  "})}`;else if(e===Tb.TRACK){const e=r||n;l=e?`${e} - ${t}`:t}else l=t;o||(l=` ${l}`),document.title=l}render(){return null}}const hI=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),wb(),((e,t)=>t?{type:t.type,title:t.title,originalTitle:t.originalTitle,grandparentTitle:t.grandparentTitle,index:t.index,parentIndex:t.parentIndex,originallyAvailableAt:t.originallyAvailableAt,isPaused:e.isPaused}:{}))}))(mI);var gI=Object.defineProperty,yI=Object.defineProperties,vI=Object.getOwnPropertyDescriptors,fI=Object.getOwnPropertySymbols,bI=Object.prototype.hasOwnProperty,ZI=Object.prototype.propertyIsEnumerable,SI=(e,t,r)=>t in e?gI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function PI(e){const t=e,{component:r}=t,n=((e,t)=>{var r={};for(var n in e)bI.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&fI)for(var n of fI(e))t.indexOf(n)<0&&ZI.call(e,n)&&(r[n]=e[n]);return r})(t,["component"]);return i.createElement(i.Suspense,{fallback:null},i.createElement(r,((e,t)=>yI(e,vI({allowRecycleElement:!0,type:"video"})))(((e,t)=>{for(var r in t||(t={}))bI.call(t,r)&&SI(e,r,t[r]);if(fI)for(var r of fI(t))ZI.call(t,r)&&SI(e,r,t[r]);return e})({},n))))}PI.defaultProps={component:LZ};const II=PI,EI=Qb(PI);function wI(e){const t=document.getElementById("plex").classList,r="show-video-player";e?t.add(r):t.remove(r)}var CI=Object.defineProperty,MI=Object.defineProperties,DI=Object.getOwnPropertyDescriptors,OI=Object.getOwnPropertySymbols,TI=Object.prototype.hasOwnProperty,xI=Object.prototype.propertyIsEnumerable,AI=(e,t,r)=>t in e?CI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kI=(e,t)=>{for(var r in t||(t={}))TI.call(t,r)&&AI(e,r,t[r]);if(OI)for(var r of OI(t))xI.call(t,r)&&AI(e,r,t[r]);return e},NI=(e,t)=>MI(e,DI(t));const RI=parseInt(Ul.Z.playerControlsPosterHeight,10),LI=parseInt(Ul.Z.playerControlsLandscapePosterWidth,10),jI=parseInt(Ul.Z.playerControlsNarrowBreakpoint,10),VI=parseInt(Ul.Z.playerControlsPosterLeftGutter,10),UI=parseInt(Ul.Z.playerControlsPosterBottomGutter,10),FI=parseInt(Ul.Z.playerControlsNarrowPosterBottomGutter,10);class BI extends i.Component{constructor(e,t){super(e,t),this.updateAdState=()=>{var e;const{ad:t}=this.state,{isOpen:r,onUpdateCurrentAd:n}=this.props;n&&n(t&&r?{adDisplayIndex:t.displayIndex,adDisplayTotal:t.displayTotal,adDurationSeconds:t.duration,adPositionSeconds:Math.floor(this.state.adPositionMilliseconds/1e3),adState:uZ.Z$,adTimeOffsetSeconds:null!=(e=null==t?void 0:t.timeOffset)?e:null}:{adDisplayIndex:null,adDisplayTotal:null,adDurationSeconds:null,adPositionSeconds:null,adState:null,adTimeOffsetSeconds:null})},this.onAdPositionMillisecondsChange=e=>{this.setState({adPositionMilliseconds:e})},this.onAdChange=e=>{this.setState({ad:e,adPositionMilliseconds:0,hasRequestedAds:!0})},this.onScreenSizeChange=({width:e})=>{const t=e<=jI;t!==this.state.isNarrowLayout&&this.setState({isNarrowLayout:t})},this.onSeekBarInteractionStart=()=>{this.setState({isSeeking:!0})},this.onSeekBarInteractionEnd=()=>{this.setState({isSeeking:!1})},this.onUpdateBufferedRanges=e=>{const{onUpdateBufferedRanges:t}=this.props;t&&t(e)},this.state={ad:null,adPositionMilliseconds:0,isNarrowLayout:!1,seekEndMilliseconds:0,seekStartMilliseconds:0},this.positionMillisecondsStore=(0,Ab.MT)(Ub,0)}static getDerivedStateFromProps(e,t){const r={vastUrl:e.vastUrl,isRemotePlayer:e.isRemotePlayer};return t.vastUrl===r.vastUrl&&t.isRemotePlayer===r.isRemotePlayer||(r.hasRequestedAds=!1,r.ad=null,r.adPositionMilliseconds=0),r}componentDidMount(){wI(this.props.showBackgroundVideoPlayer)}componentDidUpdate(e,t){e.showBackgroundVideoPlayer!==this.props.showBackgroundVideoPlayer&&wI(this.props.showBackgroundVideoPlayer),(e.isOpen&&!this.props.isOpen||t.ad!==this.state.ad||t.ad===this.state.ad&&t.adPositionMilliseconds!==this.state.adPositionMilliseconds&&Math.floor(this.state.adPositionMilliseconds/1e3)!==this.props.adPositionSeconds)&&this.updateAdState()}componentWillUnmount(){wI(!1)}render(){var e,t;const{adState:r,adPositionSeconds:n,adDurationSeconds:a,playerType:o,isOpen:l,isMiniPlayer:c,isRemotePlayer:d,isPlayQueueLoading:p,isPostPlayVisible:m,isFullscreen:g,isVideo:y,hasError:v,hasConflicts:f,confirmLiveTVPlayback:b,showBackgroundVideoPlayer:Z,currentMediaType:S,currentMediaSubtype:P,confirmPlaybackPayload:I,confirmOffsetPayload:E,advertisingNoticePayload:w,confirmRemoteToLocal:C,confirmLocalToRemote:M,confirmPlayerUpsellPayload:D,vastUrl:T,mediaComponent:x,mediaHeight:A,mediaPlacement:k,mediaWidth:N,playerComponent:R,bufferedRanges:L,machineIdentifier:j,providerIdentifier:V,onToggleFullscreen:U}=this.props,{ad:F,adPositionMilliseconds:B,hasRequestedAds:_,seekStartMilliseconds:z,seekEndMilliseconds:H,isNarrowLayout:W,isSeeking:G}=this.state;if(!l)return v?i.createElement(nI,{isOpen:!0,isRemotePlayer:d,mediaType:S,playerType:o}):f?i.createElement(KP,{isOpen:!0,isPlayerOpen:l,playerType:o}):b?i.createElement(RS,{isOpen:!0,isPlayerOpen:l,playerType:o}):null;const Q=y&&c?{edgeGutterX:VI,edgeGutterY:W?FI:UI,height:RI,placement:hZ.aV,width:LI}:{height:A,placement:k,width:N},$=r===uZ.Z$,K=!!T&&!_,q=null!=(t=null==(e=L[L.length-1])?void 0:e.endSeconds)?t:0;return i.createElement(O.ZP,{machineIdentifier:j,providerIdentifier:V},i.createElement(s.zt,{context:Nb,store:this.positionMillisecondsStore},i.createElement(Vo.Z,{page:u.r$},i.createElement("div",{className:Ra()(c?"Player-miniPlayerContainer-mixkS9":"Player-fullPlayerContainer-wBDz23",!Z&&!c&&"Player-fullPlayerContainerBackground-tILqnC")},I?i.createElement(dP,{confirmPlaybackPayload:I,isOpen:!0,playerType:o}):null,D?i.createElement(LP,{isOpen:!0,playerType:o,upsellPayload:D}):null,w?i.createElement(ZS.Z,{advertisingNoticePayload:w,isOpen:!0,playerType:o}):null,E?i.createElement(rP,{confirmOffsetPayload:E,isOpen:!0,playerType:o}):null,C?i.createElement(jP,{isOpen:!0,playerType:o}):null,M!==cZ.m$?i.createElement(GS,{isOpen:!0,playerType:o}):null,v?i.createElement(nI,{isOpen:!0,isRemotePlayer:d,mediaType:S,playerType:o}):null,f?i.createElement(KP,{isOpen:!0,isPlayerOpen:l,playerType:o}):null,K||m||p||d&&M===cZ.m$||C?null:i.createElement(x,NI(kI({},Q),{isAdVisible:$,isNarrowLayout:W,isStackedAbove:c,mediaSubtype:P,mediaType:S,playerType:o,onBufferChange:this.onUpdateBufferedRanges})),!T||d||C||v?null:i.createElement(II,NI(kI({},Q),{ad:F,component:(0,Ze.DB)("adPlayerComponent").getComponent(),isFullscreen:g,isIdle:!!G,isMiniPlayer:c,isNarrowLayout:W,isStackedAbove:c,playerType:o,positionSeconds:Math.round(B/1e3),statusOverlayClassName:"Player-adPlayerDisplayIndexContainer-aXzbe8",url:T,onAdChange:this.onAdChange,onPositionMillisecondsChange:this.onAdPositionMillisecondsChange})),i.createElement(R,NI(kI(kI({},this.props),Q),{ad:F,adDurationMilliseconds:1e3*a,adPositionMilliseconds:d?1e3*n:B,bufferEndMilliseconds:1e3*q,bufferStartMilliseconds:0,isAdVisible:$,isNarrowLayout:W,seekEndMilliseconds:H,seekStartMilliseconds:z,onSeekBarInteractionEnd:this.onSeekBarInteractionEnd,onSeekBarInteractionStart:this.onSeekBarInteractionStart})),i.createElement(uI,{isAdVisible:$,playerType:o,onToggleFullscreenShortcut:U}),h.Z.hasMediaSession?i.createElement(lI,{playerType:o}):null,i.createElement(hI,{playerType:o}),i.createElement(gS,{isAdVisible:$,isRemotePlayer:d,playerType:o}),i.createElement(vS,{playerType:o}),i.createElement(bS,{onScreenSizeChange:this.onScreenSizeChange})))))}}BI.defaultProps={bufferedRanges:[],confirmLiveTVPlayback:!1,isMusic:!1,isPhoto:!1,isVideo:!1,isLiveTV:!1};const _I=BI;var zI=r(45062);function HI(e){return e?`${e.type}:${e.startTimeOffset}:${e.endTimeOffset}`:void 0}var WI=r(9358);const GI="north",QI="northeast",$I="east",KI="southeast",qI="south",YI="southwest",XI="west",JI="northwest",eE="center";var tE=r(67364);const rE=(0,s.$j)((function(){return(0,o.P1)((0,iI.Z)(),(e=>({url:e})))}))(tE.ZP),nE=Math.max(256,144),iE={maxWidth:256/1920*100+"vw",maxHeight:144/1080*100+"vh"},sE={maxWidth:"10vw",maxHeight:"10vh"},aE={maxWidth:128/1920*100+"vw",maxHeight:72/1080*100+"vh"},oE=({className:e,src:t,style:r})=>i.createElement("img",{className:e,src:t,style:r}),lE=({className:e,providerEntityID:t,overlay:r,serverEntityID:n})=>{const[s,a]=(0,i.useState)();let o;switch(r.size){case"large":o=iE;break;case"medium":o=sE;break;case"small":default:o=aE}const l=(0,i.useCallback)((()=>{a(new Error("Unable to load overlay"))}),[]);return(0,i.useEffect)((()=>{a(void 0)}),[r]),s?null:i.createElement(rE,{className:e,component:oE,format:"png",height:nE,providerEntityID:t,serverEntityID:n,style:o,url:r.key,width:nE,onError:l})},cE={outerContainer:"MediaOverlays-outerContainer-UKEbAn",innerContainer:"MediaOverlays-innerContainer-ROiPjc",horizontal:"MediaOverlays-horizontal-bRV8S8",vertical:"MediaOverlays-vertical-EHUQz1",overlay:"MediaOverlays-overlay-wqRggw",northwest:"MediaOverlays-northwest-zAGZ9N MediaOverlays-horizontal-bRV8S8",north:"MediaOverlays-north-qRQuKL MediaOverlays-horizontal-bRV8S8",northeast:"MediaOverlays-northeast-Ry3jQP MediaOverlays-horizontal-bRV8S8",east:"MediaOverlays-east-rZp1RY MediaOverlays-vertical-EHUQz1",southeast:"MediaOverlays-southeast-T27LmT MediaOverlays-horizontal-bRV8S8",south:"MediaOverlays-south-CFbnrI MediaOverlays-horizontal-bRV8S8",southwest:"MediaOverlays-southwest-uIzp7J MediaOverlays-horizontal-bRV8S8",west:"MediaOverlays-west-VR13xa MediaOverlays-vertical-EHUQz1",center:"MediaOverlays-center-A0OoIj MediaOverlays-horizontal-bRV8S8"};var dE=Object.defineProperty,uE=Object.defineProperties,pE=Object.getOwnPropertyDescriptors,mE=Object.getOwnPropertySymbols,hE=Object.prototype.hasOwnProperty,gE=Object.prototype.propertyIsEnumerable,yE=(e,t,r)=>t in e?dE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const vE=(0,s.$j)((function(){return(0,o.P1)(rZ(),(0,Eb.Z)(),(0,eZ.Z)(),(0,GZ.Z)(["mediaHeight","mediaWidth","itemPlaybackTime","positionSeconds","providerEntityID","serverEntityID"]),((e,t,r,n)=>((e,t)=>uE(e,pE(t)))(((e,t)=>{for(var r in t||(t={}))hE.call(t,r)&&yE(e,r,t[r]);if(mE)for(var r of mE(t))gE.call(t,r)&&yE(e,r,t[r]);return e})({},n),{liveTVMediaItem:t,liveTVSession:r,playQueueMediaItem:e})))}))((({itemPlaybackTime:e,liveTVMediaItem:t,liveTVSession:r,mediaHeight:s,mediaWidth:a,playQueueMediaItem:o,positionSeconds:l,providerEntityID:c,serverEntityID:d})=>{const[u,p]=function(){const[e,t]=(0,i.useState)([window.innerWidth,window.innerHeight]);return(0,i.useEffect)((()=>{function e(){t([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),e}(),m=(0,i.useMemo)((()=>{const n=Math.floor(e/1e3);let i,s=-1;return r&&t?(i=t,s=r.currentPosition-t.beginsAt):o&&(i=o,s=l),(null==i?void 0:i.Overlay)?function(e,t){const{secondsSinceMediaItemAiringBegan:r,secondsSinceMediaItemPlaybackBegan:n}=t;return e.reduce(((e,t)=>{const i=t.startTimeOffset/1e3,s=i+(null==t.duration?Number.POSITIVE_INFINITY:t.duration/1e3);let a=!1;return"absolute"===t.startTimeOffsetType?a=n>=i&&n<s:"relative"===t.startTimeOffsetType&&(a=r>=i&&r<s),a&&(e.has(t.gravity)?e.get(t.gravity).push(t):e.set(t.gravity,[t])),e}),new Map)}(i.Overlay,{secondsSinceMediaItemAiringBegan:s,secondsSinceMediaItemPlaybackBegan:n}):void 0}),[e,r,t,o,l]);if(!(null==m?void 0:m.size)||!s||!a)return null;const h=Math.min(u/a,p/s);return i.createElement("div",{className:cE.outerContainer},i.createElement("div",{className:cE.innerContainer,style:{width:a*h/u*100+"vw",height:s*h/p*100+"vh"}},Object.values(n).map((e=>{var t;const r=null==(t=null==m?void 0:m.get(e))?void 0:t.map(((e,t)=>i.createElement(lE,{key:t,className:cE.overlay,overlay:e,providerEntityID:c,serverEntityID:d})));return r?i.createElement("div",{key:e,className:cE[e]},r):null}))))}));var fE=r(43508),bE=r(32511),ZE=Object.defineProperty,SE=Object.getOwnPropertySymbols,PE=Object.prototype.hasOwnProperty,IE=Object.prototype.propertyIsEnumerable,EE=(e,t,r)=>t in e?ZE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const wE=function(e){const t=(0,o.P1)((e=>e),(e=>({positionMilliseconds:e})));function r(t){const r=t,{positionSeconds:n,positionMilliseconds:s}=r,a=((e,t)=>{var r={};for(var n in e)PE.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&SE)for(var n of SE(e))t.indexOf(n)<0&&IE.call(e,n)&&(r[n]=e[n]);return r})(r,["positionSeconds","positionMilliseconds"]);let o=s;return null!=n&&Math.abs(n-Math.floor(s/1e3))>1&&(o=1e3*n),i.createElement(e,((e,t)=>{for(var r in t||(t={}))PE.call(t,r)&&EE(e,r,t[r]);if(SE)for(var r of SE(t))IE.call(t,r)&&EE(e,r,t[r]);return e})({positionMilliseconds:o,positionSeconds:n},a))}return r.displayName=`WithPositionMilliseconds(${(0,xb.Z)(e)})`,r.WrappedComponent=e,r.propTypes={positionSeconds:hb().number,positionMilliseconds:hb().number.isRequired},(0,s.$j)(t,null,null,{context:Nb})(r)};var CE=r(28450),ME=r.n(CE),DE=r(82057),OE=r(36870),TE=r(27768);class xE extends i.Component{constructor(e,t){super(e,t),this._loadSubtitles=()=>{this._loadTimeoutID&&(this._loadTimeoutID=window.clearTimeout(this._loadTimeoutID)),this._connectionTimeoutID&&(this._connectionTimeoutID=window.clearTimeout(this._connectionTimeoutID)),this._formatTimeoutID&&(this._formatTimeoutID=window.clearTimeout(this._formatTimeoutID));const{subtitlesUrl:e,positionMilliseconds:t,decisionUseSidecarSrtSubtitles:r}=this.props;this._positionAtTimeOfRequest=t,(0,jo.Z)("[Subtitles] loading subtitles. position: %s url: %s",this._positionAtTimeOfRequest,e),this._abortStream(),this._xhr=new window.XMLHttpRequest;const n=new(ME().parser.XhrStream)(this._xhr),i=r?new(ME().parser.SrtStreamParser)(n).ass:new(ME().parser.StreamParser)(n).minimalASS;this._openSubtitlesConnection(),i.then(this.onSubtitlesLoad,this.onSubtitlesFail)},this._getPosition=()=>{const{positionMilliseconds:e,offset:t}=this.props,r=(e+t)/1e3;if(r%1e3){const e=this._clock.currentTime;if(Math.floor(e)===r)return e}return r},this.onMeasure=({width:e,height:t})=>{this.setState({width:e,height:t})},this.onSubtitlesLoad=e=>{if(!this._isMounted)return!1;(0,jo.Z)("[Subtitles] Starting to render subtitles"),this._destroySubtitles(),this._clock=new(ME().renderers.AutoClock)(this._getPosition,1e3),this._renderer=new(ME().renderers.WebRenderer)(e,this._clock,document.getElementById(this._rendererID),this.props.rendererOptions),this._setSubtitleSize(),this._rerenderSubtitles(),this._setClockState(),this._formatTimeoutID=window.setTimeout((()=>{this._setSubtitleColor(),this._setSubtitlePosition(),this._rerenderSubtitles()}),0)},this.onSubtitlesConnectionTimeout=()=>{(0,jo.Z)("[Subtitles] Connection inactivity timeout, reopening."),this._openSubtitlesConnection()},this.onSubtitlesFail=()=>{if(!this._isMounted)return!1;const e=this._xhr.readyState,t=this._xhr.status;this._errorCount++,jo.Z.warn("[Subtitles] Request failed. statusCode:%s state:%s errorCount:%s %s",t,e,this._errorCount,this._xhr.errorString||""),this._errorCount>this.props.consecutiveErrorsTolerance?this.props.onSubtitlesError():this._loadTimeoutID=window.setTimeout(this._loadSubtitles,this.props.retryTimeout)},ME().debugMode=!1,this.state={width:0,height:0},this._rendererID=(0,sv.Z)(),this._loadTimeoutID=null,this._connectionTimeoutID=null,this._errorCount=0,this._positionAtTimeOfRequest=null,this._isMounted=!1}componentDidMount(){this._isMounted=!0,this.props.subtitlesUrl&&this._loadSubtitles()}componentDidUpdate(e,t){const{isOpen:r,isBuffering:n,isPaused:i,hasError:s,heightOffset:a,rendererOptions:o,offset:l,color:c,position:d,size:u,sizeMultiplier:p,subtitlesUrl:m}=this.props,{width:h,height:g}=this.state;if(this._shouldResetStream(e)||o!==e.rendererOptions||m!==e.subtitlesUrl)return void this._loadSubtitles();const y=c!==e.color,v=d!==e.position,f=u!==e.size||p!==e.sizeMultiplier;y&&this._setSubtitleColor(),v&&this._setSubtitlePosition(),f&&this._setSubtitleSize(),(y||v||f||h!==t.width||g!==t.height||a!==e.heightOffset)&&this._rerenderSubtitles(),r===e.isOpen&&n===e.isBuffering&&i===e.isPaused&&s===e.hasError||this._setClockState(),l!==e.offset&&this._setPosition()}componentWillUnmount(){(0,jo.Z)("[Subtitles] Closing"),this._loadTimeoutID&&(this._loadTimeoutID=window.clearTimeout(this._loadTimeoutID)),this._connectionTimeoutID&&(this._connectionTimeoutID=window.clearTimeout(this._connectionTimeoutID)),this._formatTimeoutID&&(this._formatTimeoutID=window.clearTimeout(this._formatTimeoutID)),this._isMounted=!1,this._destroySubtitles(),this._abortStream()}_openSubtitlesConnection(){const{subtitlesUrl:e,isDirectPlay:t,positionSeconds:r,connectionTimeout:n}=this.props;this._abortStream(),this._xhr.onreadystatechange=e=>{4===e.currentTarget.readyState&&(e.currentTarget.status>=200&&e.currentTarget.status<300?this._errorCount=0:this.onSubtitlesFail())},n&&(this._xhr.onprogress=e=>{(0,jo.Z)("[Subtitles] Received data, restarting connection timer."),window.clearTimeout(this._connectionTimeoutID),this._connectionTimeoutID=window.setTimeout(this.onSubtitlesConnectionTimeout,n)});let i=e;if(t){const t=y.Z.parseUrl(e);t.params.offset=r,i=y.Z.join([t.origin,t.pathname],t.params)}this._xhr.open("GET",i,!0),this._xhr.send()}_destroySubtitles(){this._loadTimeoutID&&(this._loadTimeout=window.clearTimeout(this._loadTimeoutID)),this._clock&&(this._clock.disable(),this._clock=null),this._renderer&&(this._renderer.disable(),this._renderer=null);const e=document.getElementById(this._rendererID);for(;e.hasChildNodes();)e.removeChild(e.lastChild)}_abortStream(){this._xhr&&((0,jo.Z)("[Subtitles] Aborting existing xhr."),this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.abort())}_setSubtitleColor(){const{color:e}=this.props;if(!this._renderer)return;const t=function(e){const t=/^#?([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i.exec(e);return t?{red:parseInt(t[1],16),green:parseInt(t[2],16),blue:parseInt(t[3],16)}:null}(e),r=this._renderer.ass.styles.get("Default");t?r?((0,jo.Z)("[Subtitles] Setting subtitle color to %s",e),r._primaryColor=new(ME().parts.Color)(t.red,t.green,t.blue,1),r._outlineColor=e===DE.Z.BLACK?new(ME().parts.Color)(255,255,255,1):new(ME().parts.Color)(0,0,0,1)):jo.Z.warn("[Subtitles] Unable to set subtitle color, no default style"):jo.Z.warn("[Subtitles] Unable to set subtitle color, invalid color")}_setSubtitlePosition(){const{position:e}=this.props;if(!this._renderer)return;const t=this._renderer.ass.styles.get("Default");let r=2;e===OE.Z.MIDDLE?r=5:e===OE.Z.TOP&&(r=8),t?((0,jo.Z)("[Subtitles] Setting subtitle position to %s",e),t._alignment=r):jo.Z.warn("[Subtitles] Unable to set subtitle position, no default style")}_setSubtitleSize(){const{size:e,sizeMultiplier:t}=this.props;if(!this._renderer)return;const r=this._renderer.ass.properties,n=e*t/100;let i,s;this.state.originalResolutionX&&this.state.originalResolutionY?(i=this.state.originalResolutionX,s=this.state.originalResolutionY):(i=r.resolutionX,s=r.resolutionY,this.setState({originalResolutionX:i,originalResolutionY:s})),r.resolutionX=i/n,r.resolutionY=s/n}_rerenderSubtitles(){if(this._renderer){const{width:e,height:t}=this.state;(0,jo.Z)("[Subtitles] Re-rendering subtitles"),this._renderer.resize(e,t-this.props.heightOffset)}}_setPosition(){const e=this._clock;if(!e||!e._manualClock)return;const{positionMilliseconds:t,offset:r}=this.props;e._manualClock._currentTime=(t+r)/1e3}_setClockState(){const e=this._clock;if(!e)return;const{isOpen:t,isBuffering:r,isPaused:n,hasError:i}=this.props;return r||n?((0,jo.Z)("[Subtitles] Clock State: paused"),void e.pause()):!t||i?((0,jo.Z)("[Subtitles] Clock State: disabled"),void e.disable()):n?void 0:((0,jo.Z)("[Subtitles] Clock State: playing"),void e.play())}_shouldResetStream(e){const{isOpen:t,isMediaLoading:r,isBuffering:n,isPaused:i,hasError:s,positionMilliseconds:a,lastSeekPositionSeconds:o,decisionUseSidecarSrtSubtitles:l}=this.props;if(l)return!1;const c=this._positionAtTimeOfRequest,d=a-e.positionMilliseconds,u=d>0&&t&&!r&&!n&&!i&&!s;if(null!=o&&o!==e.lastSeekPositionSeconds)return this._resetAfterSeekStarted=!0,this._resetLater=!1,!1;if(this._resetAfterSeekStarted){const e=1e3*o<a;return!(!u||!e||(this._resetAfterSeekStarted=!1,0))}return u&&this._resetLater?(this._resetLater=!1,!0):(!this._xhr||d>1e4||a<c)&&(this._resetLater=!u,u)}render(){return i.createElement(kl.Z,{className:"Subtitles-measure-fffGGG",onMeasure:this.onMeasure},i.createElement("div",{className:"Subtitles-renderer-f7uT59",id:this._rendererID,role:"alert"}))}}xE.defaultProps={offset:0,color:DE.Z.WHITE,position:OE.Z.BOTTOM,size:TE.Z.NORMAL,sizeMultiplier:1,heightOffset:0,consecutiveErrorsTolerance:3,connectionTimeout:null,retryTimeout:3e3,rendererOptions:{enableSvg:!1,preciseOutlines:!1}};const AE=xE;var kE=Object.defineProperty,NE=Object.defineProperties,RE=Object.getOwnPropertyDescriptors,LE=Object.getOwnPropertySymbols,jE=Object.prototype.hasOwnProperty,VE=Object.prototype.propertyIsEnumerable,UE=(e,t,r)=>t in e?kE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,FE=(e,t)=>{for(var r in t||(t={}))jE.call(t,r)&&UE(e,r,t[r]);if(LE)for(var r of LE(t))VE.call(t,r)&&UE(e,r,t[r]);return e},BE=(e,t)=>NE(e,RE(t));const _E={dispatchMakeDecision:Jb.bY,dispatchRemoveDecision:Jb.Td,dispatchShowAlert:fE.wp};class zE extends i.Component{constructor(e,t){super(e,t),this.onSubtitlesError=()=>{const{playQueueItemEntityID:e,playerType:t,positionMilliseconds:r,qualityIndex:n,decisionMediaIndex:i,decisionPartIndex:s,decisionUseSidecarSrtSubtitles:a,dispatchMakeDecision:o,dispatchRemoveDecision:l}=this.props;a?this.setState({hasSidecarSrtFailed:!0}):(l({playerType:t,playQueueItemEntityID:e}),o({playerType:t,playQueueItemEntityID:e,qualityIndex:n,mediaIndex:i,partIndex:s,options:{offset:r,subtitlesBurnLevel:bE.Z.ALWAYS}}))},this.state={hasSidecarSrtFailed:!1}}componentDidUpdate(e,t){const{hasSidecarSrtFailed:r}=this.state;r&&r!==t.hasSidecarSrtFailed&&(jo.Z.error("[Subtitles] Unrecoverable error processing",this.props.subtitlesUrl),this.props.dispatchShowAlert({type:"error",message:(0,Se.Z)("There was an unexpected subtitles error")}))}render(){const e=this.props,{subtitlesUrl:t,dispatchMakeDecision:r,dispatchRemoveDecision:n}=e,s=((e,t)=>{var r={};for(var n in e)jE.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&LE)for(var n of LE(e))t.indexOf(n)<0&&VE.call(e,n)&&(r[n]=e[n]);return r})(e,["subtitlesUrl","dispatchMakeDecision","dispatchRemoveDecision"]);return!t||this.state.hasSidecarSrtFailed?null:i.createElement(AE,BE(FE({subtitlesUrl:t},s),{onSubtitlesError:this.onSubtitlesError}))}}const HE=wE(zE),WE=(0,s.$j)((function(){return(0,o.P1)((0,GZ.Z)(["isOpen","isMediaLoading","isBuffering","isPaused","hasError","qualityIndex","positionSeconds","lastSeekPositionSeconds"]),vb(),(0,yb.Z)(),iZ(),(0,Ze.DB)("selectSubtitleSettings"),((e,t,r,n,i)=>{const s=r.entityID,a=BE(FE(FE({},e),i),{playQueueItemEntityID:s});return t&&(a.decisionMediaIndex=t.mediaIndex,a.decisionPartIndex=t.partIndex,a.decisionUseSidecarSrtSubtitles=t.useSidecarSrtSubtitles,a.subtitlesUrl=t.subtitlesUrl,a.isDirectPlay=t.isDirectPlay),n.selectedSubtitlesStream&&(a.offset=n.selectedSubtitlesStream.offset),a}))}),_E)(HE);var GE=r(87036),QE=Object.defineProperty,$E=Object.defineProperties,KE=Object.getOwnPropertyDescriptors,qE=Object.getOwnPropertySymbols,YE=Object.prototype.hasOwnProperty,XE=Object.prototype.propertyIsEnumerable,JE=(e,t,r)=>t in e?QE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ew(e){"Enter"===e.key&&e.nativeEvent.stopImmediatePropagation()}const tw=(0,cl.Z)(GE.Z.defaultSpeed),rw={enter:{opacity:1,duration:tw},exit:{opacity:0,duration:tw}},nw=function(e){var t=e,{isHidden:r,isHiddenPolite:n,marker:s,positionSeconds:a,onSeekPress:o}=t,l=((e,t)=>{var r={};for(var n in e)YE.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&qE)for(var n of qE(e))t.indexOf(n)<0&&XE.call(e,n)&&(r[n]=e[n]);return r})(t,["isHidden","isHiddenPolite","marker","positionSeconds","onSeekPress"]);const c=HI(s),[d,u]=(0,i.useState)(0),{isOpen:p,onOpen:m,onClose:h}=(0,$n.Z)(),g=(0,i.useRef)(),y=(0,i.useCallback)((e=>{s&&(ew(e),u(a),o(Math.round(s.endTimeOffset/1e3)))}),[s,o,a]);return(0,i.useEffect)((()=>{const e=1e3*a,t=!s,i=e<(null==s?void 0:s.startTimeOffset),o=e>=(null==s?void 0:s.endTimeOffset),l=d>0,c=(null==s?void 0:s.endTimeOffset)-e<500,u=n&&g.current&&a>=g.current;r||t||i||o||u||l&&c?h():n&&!g.current?g.current=a+10:t||i||o||m()}),[s,r,n,d,a,m,h]),(0,i.useEffect)((()=>()=>{g.current=0,u(0)}),[c]),i.createElement(ll.M_,null,p&&c?i.createElement(ll.ww.div,{key:c,animate:"enter",exit:"exit",initial:"exit",variants:rw},i.createElement($o.Z,((e,t)=>$E(e,KE(t)))(((e,t)=>{for(var r in t||(t={}))YE.call(t,r)&&JE(e,r,t[r]);if(qE)for(var r of qE(t))XE.call(t,r)&&JE(e,r,t[r]);return e})({},l),{autoFocus:"autofocus",onKeyDown:ew,onKeyUp:ew,onPress:y,onTouchEnd:ew,onTouchStart:ew}),function(e){switch(e.type){case bb:return(0,Se.Z)("Skip Ads");case Zb:return(0,Se.Z)("Skip Intro");case"outro":return(0,Se.Z)("Skip Outro");case"recaps":return(0,Se.Z)("Skip Recaps")}}(s))):null)};var iw=Object.defineProperty,sw=Object.defineProperties,aw=Object.getOwnPropertyDescriptors,ow=Object.getOwnPropertySymbols,lw=Object.prototype.hasOwnProperty,cw=Object.prototype.propertyIsEnumerable,dw=(e,t,r)=>t in e?iw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const uw=(0,s.$j)((function(){return(0,o.zB)({positionSeconds:(0,Fy.Z)("positionSeconds")})}),(function(e,{playerType:t}){return{onSeekPress(r){e(gb.O7({playerType:t,positionSeconds:r}))}}}))((function(e){var t=e,{playerType:r,marker:n,isHidden:s}=t,a=((e,t)=>{var r={};for(var n in e)lw.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ow)for(var n of ow(e))t.indexOf(n)<0&&cw.call(e,n)&&(r[n]=e[n]);return r})(t,["playerType","marker","isHidden"]);return i.createElement(nw,((e,t)=>sw(e,aw(t)))(((e,t)=>{for(var r in t||(t={}))lw.call(t,r)&&dw(e,r,t[r]);if(ow)for(var r of ow(t))cw.call(t,r)&&dw(e,r,t[r]);return e})({},a),{isHidden:s,marker:n}))}));var pw=r(33494),mw=r(53635),hw=r(37920),gw=r(74378),yw=r(50194);function vw(e){const{title:t,attribution:r,route:n,sourceTitle:s}=e;return i.createElement(yw.Z,{className:"MetadataHubCellHeader-title-DZp8lw HubCellTitle-hubCellTitle-vtmWL9"},r?i.createElement(gw.Z,{attribution:r,className:"MetadataHubCellHeader-attribution-xYcGBg"}):null,n?i.createElement(Wo.Z,{to:n},t):t,s?i.createElement(G.Z,{className:"MetadataHubCellHeader-titleSeparator-PicVTv DashSeparator-separator-_3fMys"}):null,s?i.createElement("span",{className:"MetadataHubCellHeader-sourceTitle-J2ISh2"},s):null)}var fw=r(69760);const bw="HubCell-hubScrollButton-bSxOcb";class Zw extends i.Component{constructor(e,t){super(e,t),this.onListUpdate=e=>{const{visibleStartIndex:t,visibleEndIndex:r,renderEndIndex:n,listStyle:i}=e,{onListReady:s}=this.props,a=this._isReady?void 0:s;this._isReady=!0,this._visibleStartIndex=t,this._visibleEndIndex=r,this._pageSize=this._visibleEndIndex-this._visibleStartIndex;const o=t>0,l=n>r;this.setState({showActions:o||l,enablePrevious:o,enableNext:l,listHeight:i.height},a)},this.onListScrollIndexChange=e=>{this._setScrollIndex(e)},this.onPreviousPress=()=>{this._setScrollIndex(this._visibleStartIndex-this._pageSize-1)},this.onNextPress=()=>{this._setScrollIndex(this._visibleEndIndex+1)},this.state={showActions:!1,enablePrevious:!1,enableNext:!1,listHeight:"auto",scrollIndex:this.props.scrollIndex||0},this._isReady=!1,this._listRef=i.createRef()}static getDerivedStateFromProps(e,t){return null!=e.scrollIndex&&e.scrollIndex!==t.scrollIndex?{scrollIndex:e.scrollIndex}:null}componentDidMount(){this.props.more&&!this.props.totalSize&&this.props.onPageRequest({startIndex:0,endIndex:this.props.size||1}),this.props.more||this.props.size||this.props.totalSize||(this._isReady=!0,this.props.onListReady&&this.props.onListReady())}shouldComponentUpdate(e,t){return(0,tu.Z)(this,e,t)}componentDidUpdate(e){this._isReady||!e.isPending||this.props.isPending||(this._isReady=!0,this.props.onListReady&&this.props.onListReady())}_setScrollIndex(e){this.props.onListScrollIndexChange&&this.props.onListScrollIndexChange(e),null==this.props.scrollIndex&&this.setState({scrollIndex:e})}render(){const{className:e,hubIdentifier:t,title:r,style:n,sourceTitle:s,attribution:a,route:o,scrollDirection:l,size:c,more:d,random:u,totalSize:p,keyPropName:m,itemsOffset:h,items:g,layout:y,cellRenderer:v,resizeTimeout:f,onPageRequest:b}=this.props,{showActions:Z,enablePrevious:S,enableNext:P,listHeight:I}=this.state;if(!c&&!p)return null;const E=u?c:p||(d?c+1:c),w={visibility:"auto"===I?"hidden":"visible"},C={height:I,overflow:"hidden"},M=n!==pw.VJ;return i.createElement("div",{className:e,"data-testid":"hub--"+t,style:w},M?i.createElement(fw.Z,{className:"HubCell-hubCellHeader-IRMxnP HubCellHeader-hubCellHeader-QcXKFB"},i.createElement(vw,{attribution:a,route:o,sourceTitle:s,title:r}),Z?i.createElement("div",{className:"HubCell-hubActions-vNaGig"},i.createElement(Jc.Z,{className:bw,"data-testid":"hubPreviousButton",iconComponent:Hd.e,isDisabled:!S,title:(0,Se.Z)("Previous Page"),onPress:this.onPreviousPress}),i.createElement(Jc.Z,{className:bw,"data-testid":"hubNextButton",iconComponent:zd.V,isDisabled:!P,title:(0,Se.Z)("Next Page"),onPress:this.onNextPress})):null):null,i.createElement("div",{style:C},i.createElement(mw.Z,{ref:this._listRef,cellRenderer:v,ignoreHeight:!0,items:g,itemsOffset:h,keyPropName:m,layout:y,resizeTimeout:f,scrollDirection:l,scrollIndex:this.state.scrollIndex,scrollerClassName:"HubCell-hubScroller-BP5BGe VirtualListScroller-scroller-eDZkq_",shouldCenterScrollIndex:this.props.shouldCenterScrollIndex,size:Math.min(1e4,E),onListScrollIndexChange:this.onListScrollIndexChange,onListUpdate:this.onListUpdate,onPageRequest:b})))}}Zw.defaultProps={className:"HubCell-hubCell-bbBxQT",shouldCenterScrollIndex:!1,scrollDirection:hw._y};const Sw=Zw,Pw=parseInt(Ul.Z.playerControlsHeight,10);class Iw extends i.Component{constructor(){super(...arguments),this.onMeasure=e=>{this.props.onDimensionsChange&&this.props.onDimensionsChange(e)}}render(){const{className:e,bottom:t,children:r}=this.props;return i.createElement(kl.Z,{className:e,ignorePosition:!0,ignoreWidth:!0,style:{bottom:t},onMeasure:this.onMeasure},r)}}Iw.defaultProps={className:"AudioVideoStripeContainer-container-Pz3oFW",bottom:Pw};const Ew=Iw;var ww=r(47435),Cw=r(69772),Mw=r(81346),Dw=r(14090),Ow=r(17633),Tw=r(99027),xw=Object.defineProperty,Aw=Object.defineProperties,kw=Object.getOwnPropertyDescriptors,Nw=Object.getOwnPropertySymbols,Rw=Object.prototype.hasOwnProperty,Lw=Object.prototype.propertyIsEnumerable,jw=(e,t,r)=>t in e?xw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Vw=(e,t)=>{for(var r in t||(t={}))Rw.call(t,r)&&jw(e,r,t[r]);if(Nw)for(var r of Nw(t))Lw.call(t,r)&&jw(e,r,t[r]);return e},Uw=(e,t)=>Aw(e,kw(t));const Fw=(0,Tw.n3)(Tb.MOVIE,Ow.r$),Bw=2*(parseInt(Ul.Z.posterTitleHeight,10)+parseInt(Ul.Z.posterTitlePadding,10));function _w(e){return e-Bw}const zw=(0,i.memo)((function(e){const{serverEntityID:t,index:r,thumb:n,tag:s,isActive:a,startTimeOffset:o,cellWidth:l,cellHeight:c,onSeekTo:d}=e,u=(0,ww.Z)(e),p=(0,i.useCallback)((()=>{const e=Math.round(o/1e3);d(e)}),[o,d]),m=r;return i.createElement("div",{style:u.style},i.createElement(Wo.Z,{className:Ra()("VideoChapterCell-thumbWrapper-N0G90v",a&&"VideoChapterCell-isActive-mPEd2f"),onPress:p},i.createElement(Ye.Z,{key:m,backgroundSize:"contain",component:Fe.Z,height:_w(c),serverEntityID:t,url:n,width:l})),i.createElement("div",{className:"VideoChapterCell-titleContainer-mFa0s0"},i.createElement("div",{className:"VideoChapterCell-title-Lzujh2"},function(e,t){return t||(0,Se.Z)("Chapter {index}",{index:e})}(r,s)),i.createElement("div",{className:"VideoChapterCell-secondaryTitle-qUtvKy"},(0,$S.Z)(o))))}));var Hw=r(94329);var Ww=Object.defineProperty,Gw=Object.defineProperties,Qw=Object.getOwnPropertyDescriptors,$w=Object.getOwnPropertySymbols,Kw=Object.prototype.hasOwnProperty,qw=Object.prototype.propertyIsEnumerable,Yw=(e,t,r)=>t in e?Ww(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Xw=(0,Cw.ZP)({direction:Cw._y,rows:1,overscan:0,innerHorizontalPadding:30,outerPaddingTop:10,outerPaddingLeft:5,outerPaddingRight:5,getCellWidth:e=>(0,Dw.Z)(Uw(Vw({},e),{minCellWidth:135,preferredCellWidth:180,minColumns:2,maxColumns:11,aspectRatio:Fw})),getCellHeight:e=>(0,Mw.Z)(Uw(Vw({},e),{aspectRatio:Fw,titleHeight:Bw}))});class Jw extends i.Component{constructor(e,t){super(e,t),this.onHubCellScrollIndexChange=e=>{this.setState({scrollIndex:e,scrollIndexIsActiveChapter:!1})},this.state={scrollIndex:this.props.activeChapterIndex,scrollIndexIsActiveChapter:!0,activeChapterIndex:this.props.activeChapterIndex}}static getDerivedStateFromProps(e,t){return t.activeChapterIndex!==e.activeChapterIndex?{scrollIndex:e.activeChapterIndex,scrollIndexIsActiveChapter:!0,activeChapterIndex:e.activeChapterIndex}:null}render(){const{serverEntityID:e,bottom:t,activeChapterIndex:r,chapters:n,onSeekTo:s}=this.props;return i.createElement(Ew,{bottom:t,className:"VideoChapters-container-F7xaPX AudioVideoStripeContainer-container-Pz3oFW"},i.createElement(Sw,{cellRenderer:(0,Hw.Z)({serverEntityID:e,onSeekTo:s},zw),hubIdentifier:"chapters",items:n.map(((e,t)=>((e,t)=>Gw(e,Qw(t)))(((e,t)=>{for(var r in t||(t={}))Kw.call(t,r)&&Yw(e,r,t[r]);if($w)for(var r of $w(t))qw.call(t,r)&&Yw(e,r,t[r]);return e})({},e),{isActive:t===r}))),keyPropName:"index",layout:Xw,scrollIndex:this.state.scrollIndex,shouldCenterScrollIndex:this.state.scrollIndexIsActiveChapter,size:n.length,title:(0,Se.Z)("Chapter selection"),onListScrollIndexChange:this.onHubCellScrollIndexChange}))}}const eC=Jw,tC=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),(0,Sb.Z)(),(0,o.P1)((0,Fy.Z)("positionSeconds"),wb(),((e,t)=>t&&t.chapters?t.chapters.findIndex((t=>Math.floor(t.startTimeOffset/1e3)<=e&&Math.floor(t.endTimeOffset/1e3)>e)):-1)),((e,t,r)=>({serverEntityID:e.serverEntityID,chapters:t.chapters,activeChapterIndex:r})))}),(function(e,{playerType:t}){return{onSeekTo(r){e(gb.O7({playerType:t,positionSeconds:r}))}}}))(eC);var rC=r(90915),nC=r(20074);var iC=r(62994);var sC=Object.defineProperty,aC=Object.defineProperties,oC=Object.getOwnPropertyDescriptors,lC=Object.getOwnPropertySymbols,cC=Object.prototype.hasOwnProperty,dC=Object.prototype.propertyIsEnumerable,uC=(e,t,r)=>t in e?sC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function pC(e){const t=e,{className:r,isPrimary:n}=t,s=((e,t)=>{var r={};for(var n in e)cC.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&lC)for(var n of lC(e))t.indexOf(n)<0&&dC.call(e,n)&&(r[n]=e[n]);return r})(t,["className","isPrimary"]);return i.createElement(Jc.Z,((e,t)=>aC(e,oC(t)))(((e,t)=>{for(var r in t||(t={}))cC.call(t,r)&&uC(e,r,t[r]);if(lC)for(var r of lC(t))dC.call(t,r)&&uC(e,r,t[r]);return e})({},s),{className:Ra()(r,n&&"PlayerIconButton-isPrimary-VXE1Uo")}))}pC.defaultProps={className:"PlayerIconButton-playerButton-zDmEsI IconButton-button-s4bVCh"};const mC=pC,hC=(0,o.P1)(ky.Z,(e=>e?e.product:null)),gC=(0,o.P1)(LS,hC,(0,o.P1)(Yy,Hy,zy(),(0,Fy.Z)("isWatchTogether"),(0,o.P1)((0,nC.Z)(),(e=>null==e?void 0:e.type)),Ly.Z,((e,t,r,n,i,s)=>{const a=t===jy.Rl&&(0,Uy.Z)({protocol:Vy.l,providerIdentifier:r,userFeaturesByUUID:s,isWatchTogether:n,playQueueType:i}),o=e.some((({protocol:e,protocolCapabilities:t})=>(0,Uy.Z)({protocol:e,protocolCapabilities:t,providerIdentifier:r,userFeaturesByUUID:s,isWatchTogether:n,playQueueType:i})));return a||o})),((e,t,r)=>({remotePlayerName:e,remotePlayerProduct:t,showRemotePlayer:r}))),yC=(0,s.$j)(gC,(function(e,t){const r={playerType:t.playerType};return{onCollapsePress(t){e((0,rC.wo)(r))}}}))((function(e){const{playerType:t,showRemotePlayer:r,hasFullscreen:n,isFullscreen:s,remotePlayerName:o,remotePlayerProduct:l,onCollapsePress:c,onCastMenuChange:d,onEnterFullscreenPress:u,onExitFullscreenPress:p}=e,m=(0,a.TH)(),h=(0,Bm.Z)(m);return(0,i.useEffect)((()=>{h&&m!==h&&!(0,a.LX)(h.pathname,{path:vt.Z.watchNow,exact:!0})&&c()}),[m,h,c]),i.createElement("div",{className:"FullPlayerTopControls-topControls-Fp11QH"},i.createElement("div",null,i.createElement(mC,{"data-testid":"minimizePlayerButton",iconComponent:iC.C,title:(0,Se.Z)("Minimize Player"),onPress:c}),o?i.createElement("span",{className:"FullPlayerTopControls-remotePlayerName-R4f2zN"},(0,Se.Z)("Casting to {playerName}",{playerName:o})):null,o&&l?i.createElement("span",{className:"FullPlayerTopControls-remotePlayerProduct-bHCcxi"},"(",l,")"):null),i.createElement(U.X,{gap:B.$u.S,verticalAlign:B.xM.Center},r?i.createElement(fv,{iconComponent:mC,playerType:t,onMenuChange:d}):null,n&&s?i.createElement(mC,{"data-testid":"windowedButton",iconComponent:Dh.Y,title:(0,Se.Z)("Exit Fullscreen"),onPress:p}):null,n&&!s?i.createElement(mC,{"data-testid":"fullscreenButton",iconComponent:Oh.N,title:(0,Se.Z)("Enter Fullscreen"),onPress:u}):null))}));var vC=r(9913);const fC="PlayPauseOverlay-hiddenCursor-GpErBJ";class bC extends i.Component{constructor(e,t){super(e,t),this.onPress=e=>{this._cancelPlayPause(),this.setState((({isPaused:e})=>({isPaused:!e}))),this._playPauseTimeoutID=window.setTimeout((()=>{this._playPauseTimeoutID=null,this.props.isPaused!==this.state.isPaused&&this.props.onTogglePlayPress(e)}),175)},this.onDoubleClick=e=>{this.props.onToggleFullscreen()},this.state={isPaused:e.isPaused},this._playPauseTimeoutID=null}UNSAFE_componentWillReceiveProps(e){e.isPaused===this.state.isPaused||this._playPauseTimeoutID||this.setState({isPaused:e.isPaused})}componentWillUnmount(){this._cancelPlayPause()}_cancelPlayPause(){this._playPauseTimeoutID&&(window.clearTimeout(this._playPauseTimeoutID),this._playPauseTimeoutID=null)}render(){const{className:e,isCursorHidden:t,isTogglePlayPressDisabled:r}=this.props,{isPaused:n}=this.state;return r?i.createElement("div",{className:Ra()(e,t&&fC,"PlayPauseOverlay-overlay-lF71cy"),onClick:this.onPress,onDoubleClick:this.onDoubleClick}):i.createElement(vC.Z,{"aria-label":n?(0,Se.Z)("Play"):(0,Se.Z)("Pause"),circleClassName:n?"PlayPauseOverlay-playCircle-AOIb5b PlayButton-playCircle-fK1f_v":"PlayPauseOverlay-pauseCircle-Pep_xS PlayPauseOverlay-playCircle-AOIb5b PlayButton-playCircle-fK1f_v",className:Ra()(e,t&&fC,n?"PlayPauseOverlay-playButton-BsvHlv PlayPauseOverlay-overlay-lF71cy PlayButton-playButton-vS1WII":"PlayPauseOverlay-pauseButton-T1XRgA PlayPauseOverlay-playButton-BsvHlv PlayPauseOverlay-overlay-lF71cy PlayButton-playButton-vS1WII"),onDoubleClick:this.onDoubleClick,onPress:this.onPress})}}bC.defaultProps={isCursorHidden:!1,isTogglePlayPressDisabled:!1};const ZC=bC,SC=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),By(),((e,t)=>{const r=Mt.wB(t.identifier,Mt.vP);return{isPaused:e.isPaused,isTogglePlayPressDisabled:r&&!e.isPaused}}))}),(function(e,t){const r={playerType:t.playerType};return{onTogglePlayPress(t){e((0,gb.ID)(r))}}}))(ZC);var PC=r(86418),IC=r(70308);const EC=(0,o.P1)(Fo.Z,(e=>e.audioDevices||[])),wC=(0,o.P1)(EC,(e=>e.filter((e=>e.present)))),CC=(0,o.P1)(EC,Fo.Z,((e,t)=>e.find((e=>e.name===t["player.audioDevice"]))));var MC=r(80995),DC=r(90425),OC=r(84332),TC=Object.defineProperty,xC=Object.getOwnPropertySymbols,AC=Object.prototype.hasOwnProperty,kC=Object.prototype.propertyIsEnumerable,NC=(e,t,r)=>t in e?TC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class RC extends i.Component{constructor(e,t){super(e,t),this.onToggleMenuPress=e=>{this.setState({isMenuOpen:!this.state.isMenuOpen})},this.onMenuClose=e=>{this.setState({isMenuOpen:!1})},this.onSelectPress=e=>t=>{this.props.onChange(e),this.onMenuClose()},this.state={isMenuOpen:!1},this._menuInputButtonID=(0,sv.Z)()}getSelectedValue(e,t){const r=Uu().find(e,(e=>{if(Uu().isString(e))return e===t;const[r]=Uu().keys(e);return r===t}));if(Uu().isString(r))return r;const[n]=Uu().keys(r);return null==r?void 0:r[n]}render(){const e=this.props,{name:t,size:r,kind:n,value:s,values:a,overrideSelectedValue:o}=e,l=((e,t)=>{var r={};for(var n in e)AC.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&xC)for(var n of xC(e))t.indexOf(n)<0&&kC.call(e,n)&&(r[n]=e[n]);return r})(e,["name","size","kind","value","values","overrideSelectedValue"]),c=this.getSelectedValue(a,s);return null==c?null:i.createElement(xv.Z,{direction:this.state.isMenuOpen?Av.UP:Av.WV,id:this._menuInputButtonID,kind:n,size:r,onPress:this.onToggleMenuPress},o||c,i.createElement(si.Z,((e,t)=>{for(var r in t||(t={}))AC.call(t,r)&&NC(e,r,t[r]);if(xC)for(var r of xC(t))kC.call(t,r)&&NC(e,r,t[r]);return e})({isOpen:this.state.isMenuOpen,target:this._menuInputButtonID,onMenuClose:this.onMenuClose},l),a.map((e=>{if(Uu().isString(e))return i.createElement(OC.Z,{key:e,isSelected:e===s,onPress:this.onSelectPress(e)},e);const[t]=Uu().keys(e);return i.createElement(OC.Z,{key:t,isSelected:t===s,onPress:this.onSelectPress(t)},e[t])}))))}}const LC=RC,jC=function(e){const{bottom:t,children:r,title:n=(0,Se.Z)("Playback Settings"),onDimensionsChange:s}=e;return i.createElement(Ew,{bottom:t,className:"AudioVideoPlaybackSettings-container-BiWMYV AudioVideoStripeContainer-container-Pz3oFW",onDimensionsChange:s},i.createElement("div",{className:"AudioVideoPlaybackSettings-title-UOBMcN"},n),i.createElement("div",{className:"AudioVideoPlaybackSettings-menusContainer-Xi40Bt","data-testid":"playbackSettingsContainer"},r))};function VC({className:e,label:t,children:r,isDisabled:n}){return i.createElement("div",{className:Ra()(e,n&&"AudioVideoSettingsRow-isDisabled-icmrw6")},i.createElement("div",{className:"AudioVideoSettingsRow-label-KyxW_F AudioVideoSettingsRow-cell-Vk7CGy"},t),i.createElement("div",{className:"AudioVideoSettingsRow-cell-Vk7CGy"},r))}VC.defaultProps={className:"AudioVideoSettingsRow-row-thlbfp"};const UC=VC;var FC=r(32667);class BC extends i.Component{constructor(e,t){super(e,t),this.onPlaybackSpeedChange=({positionValue:e})=>{this.setState({playbackSpeed:e},(()=>{this.props.onPlaybackSpeedChange(e)}))},this.state={playbackSpeed:e.playbackSpeed}}UNSAFE_componentWillReceiveProps(e){e.playbackSpeed!==this.props.playbackSpeed&&this.setState({playbackSpeed:e.playbackSpeed})}render(){const{audioDevices:e,bottom:t,canSetPlaybackSpeed:r,playbackSpeed:n,playbackSpeedSetting:s,selectedAudioDevice:a,onAudioDeviceChange:o,onDimensionsChange:l}=this.props;return i.createElement(jC,{bottom:t,onDimensionsChange:l},r?i.createElement(UC,{label:(0,Se.Z)("Playback Speed")},i.createElement(DC.Z,{className:"AudioSettings-slider-sGEpW3 Slider-slider-YdLxcK",max:s.max,min:s.min,stepSize:s.step,value:this.state.playbackSpeed,onChange:this.onPlaybackSpeedChange}),(0,FC.H)(n)):null,(null==e?void 0:e.length)>1?i.createElement(UC,{label:(0,Se.Z)("Audio Device")},i.createElement(LC,{name:"audioDevice",size:el.M2,value:a.name,values:e.map((e=>({[e.name]:(0,MC.Z)(e)}))),onChange:o})):null)}}BC.defaultProps={playbackSpeedSetting:{min:.5,max:2,step:.1}};const _C=BC,zC=(0,qc.Z)((function(){return(0,o.P1)((0,Fy.Z)("controllable"),$b(),(0,o.P1)(By(),(e=>{if(!e)return;const t=Uu().findWhere(e.features,{type:PC.Z.SETTINGS});return t&&Uu().findWhere(t.settings,{id:IC.Jz})||void 0})),wC,CC,((e,t,r,n,i)=>({audioDevices:n,selectedAudioDevice:i,canSetPlaybackSpeed:!e||!!e.playbackSpeed,playbackSpeed:t,playbackSpeedSetting:r})))}),(function(e,t){const{playerType:r}=t;return{onAudioDeviceChange(t){e((0,Pe.mb)({deviceName:t}))},onPlaybackSpeedChange(t){e(gb.ec({playerType:r,playbackSpeed:t}))}}}))(_C);function HC(e){return i.createElement("div",{className:e.className},e.children)}HC.defaultProps={className:"BottomBar-bottomBar-hnsKzI"};const WC=HC;function GC(e){return i.createElement("div",{className:e.className},e.children)}GC.defaultProps={className:"ControlsContainer-controlsContainer-txiwBZ"};const QC=GC;var $C=r(42375),KC=Object.defineProperty,qC=Object.defineProperties,YC=Object.getOwnPropertyDescriptors,XC=Object.getOwnPropertySymbols,JC=Object.prototype.hasOwnProperty,eM=Object.prototype.propertyIsEnumerable,tM=(e,t,r)=>t in e?KC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rM=(e,t)=>{for(var r in t||(t={}))JC.call(t,r)&&tM(e,r,t[r]);if(XC)for(var r of XC(t))eM.call(t,r)&&tM(e,r,t[r]);return e},nM=(e,t)=>qC(e,YC(t));class iM extends i.Component{constructor(e,t){super(e,t),this.onVolumeChange=e=>{const{volume:t}=this.state,r=Math.round(Math.min(100,Math.max(0,t+e)));t!==r&&this.setState({volume:r},(()=>{this.props.onVolumeChange(this.state.volume)}))},this.onVolumeIconPress=()=>{const e=this.state.volume>0;e&&(this._lastVolume=this.state.volume),this.setState({volume:e?0:this._lastVolume||100},(()=>{this.props.onVolumeChange(this.state.volume)}))},this.state={volume:e.volume}}UNSAFE_componentWillReceiveProps({volume:e}){e!==this.state.volume&&this.setState({volume:e})}render(){const{component:e}=this.props;return i.createElement(e,nM(rM(rM({},this.props),this.state),{onVolumeChange:this.onVolumeChange,onVolumeIconPress:this.onVolumeIconPress}))}}const sM=(0,s.$j)((function(){return(0,o.P1)(((e,{isWatchTogether:t})=>t),(0,Db.Z)(),(0,yb.Z)(),Kb.Z,((e,t,r,n)=>{const i=t.controllable,s=t.playQueue,a=s.currentIndex;let o,l,c;return i?(l=!i.skipNext,o=!i.skipPrevious,c=!i.shuffle):(l=!t.repeatAll&&a>=t.playQueue.playQueueItems.length-1,o=!t.repeatAll&&a<=0&&t.positionSeconds<=$C.Nf,c=!s.canShuffle),{metadataItemEntityID:r.metadataItem,providerEntityID:t.providerEntityID,serverEntityID:t.serverEntityID,volume:n,activateChaptersButton:t.isChaptersVisible,activateLyricsButton:t.isLyricsVisible,activateQueueButton:t.isPlayQueueVisible,activateRepeatButton:t.repeatAll,activateRepeatOneButton:t.repeatOne,activateSettingsButton:t.isSettingsVisible,activateWatchTogetherParticipantsButton:t.isWatchTogetherParticipantsVisible,activateShuffleButton:s.playQueueShuffled,disableNextButton:l,disablePauseButton:!!i&&!i.playPause,disablePlayButton:!!i&&!i.playPause,disablePreviousButton:o,disableRepeatButton:!!i&&!i.repeat,disableRepeatOneButton:!!i&&!i.repeat,disableShuffleButton:c,disableSkipBackButton:!!i&&!i.seekTo,disableSkipForwardButton:!!i&&!i.seekTo,showCloseButton:!0,showNextButton:!e,showPauseButton:!t.isPaused,showPlayButton:t.isPaused,showPreviousButton:!e,showRepeatButton:!t.repeatOne&&!e,showRepeatOneButton:t.repeatOne&&!e,showVolume:!i||i.volume}}))}),(function(e,{playerType:t}){const r={playerType:t};return{onEditPress(t){e(lg.Cf(t))},onFavoritePress(t){e(lg.Mk(t))},onUnfavoritePress(t){e(lg.Nw(t))},onRepeatPress(){e(Xb.ZD(r))},onRepeatOnePress(){e(Xb.ZD(r))},onPreviousPress(){e(Xb.oA(r))},onNextPress(){e(Xb.o1(r))},onShufflePress(){e(Xb.Yj(r))},onQueuePress(){e(Xb.D5(r))},onLyricsPress(){e(Xb.Ie(r))},onSkipBackPress(){e(gb.QJ(r))},onPlayPress(){e(gb.hY(r))},onPausePress(){e(gb.wO(r))},onSkipForwardPress(){e(gb.wW(r))},onSettingsPress(){e(gb.z5(r))},onWatchTogetherParticipantsPress(){e(gb.$m(r))},onChaptersPress(){e(gb.Y5(r))},onVolumeChange(t){e(gb.v6(nM(rM({},r),{volume:t})))},onClosePress(){e(Ce.Mh(r))}}}),(function(e,t,r){const{metadataItemEntityID:n,providerEntityID:i}=e;return nM(rM(rM(rM({},r),e),t),{onEditPress(){t.onPausePress(),t.onEditPress({metadataItemEntityID:n})},onFavoritePress(){t.onFavoritePress({metadataItemEntityID:n,providerEntityID:i})},onUnfavoritePress(){t.onUnfavoritePress({metadataItemEntityID:n,providerEntityID:i})}})}))(iM);function aM(e){const{className:t,children:r}=e;return i.createElement("div",{className:t},r)}aM.defaultProps={className:"AudioVideoInfoBar-container-pMB8ou"};const oM=aM,lM=function(e){const{className:t}=e;return i.createElement(oM,{className:t},i.createElement("div",{className:"AdInfoBar-message-MipuJf"},(0,Se.Z)("Video will play after this advertisement")))};var cM=r(96281),dM=r(70700),uM=r(45590),pM=r(2775),mM=r(76841),hM=r(85170),gM=r(5347),yM=r(76774),vM=r(76761),fM=r(86942),bM=r(48101),ZM=r(26115),SM=r(61438),PM=r(27469),IM=r(36641),EM=r(61414),wM=r(76045),CM=r(57049),MM=r(97078),DM=r(87663),OM=r(94038),TM=r(56572),xM=r(37787);class AM extends i.Component{constructor(e,t){super(e,t),this.onTogglePress=()=>{this.setState((e=>({isToggled:!e.isToggled})))},this.state={isToggled:!1}}render(){const{className:e,durationSeconds:t,positionSeconds:r}=this.props,n=1e3*r,s=1e3*t,a=s-n;return i.createElement(Wo.Z,{className:e,"data-testid":"mediaDuration",onPress:this.onTogglePress},this.state.isToggled?`-${(0,$S.Z)(a)}`:(0,$S.Z)(n)," / ",(0,$S.Z)(s))}}AM.defaultProps={className:"DurationRemaining-container-kNC4qp"};const kM=AM;var NM=r(97599);function RM(e){const{isTidal:t,isPreview:r,isLossless:n}=e,s=!t||!r&&!n;return i.createElement("div",{className:Ra()(e.className,s&&"MediaInfo-hidden-N07ayS")},i.createElement("span",{className:"MediaInfo-info-EtfOCX"},r?(0,Se.Z)("TIDAL Preview"):"HI-FI"))}RM.defaultProps={className:"MediaInfo-infoContainer-atbj39"};const LM=RM,jM=(0,s.$j)((function(){return(0,o.P1)(vb(),(0,WP.Z)(),((e,t)=>{if(!t)return{isTidal:!1,isPreview:!1,isLossless:!1};const r=t.Media[e?e.mediaIndex:0],n=!!r&&"flac"===r.audioCodec;return{isTidal:t.attribution===NM.sQ,isPreview:!!t.preview,isLossless:n}}))}))(LM);var VM=r(22499);function UM(e){const{className:t,playerType:r,serverEntityID:n,providerEntityID:s,metadataItemEntityID:a,type:o,subtype:l,positionSeconds:c,context:d,showStarRating:u,hasUserRating:p,isUnknownAiring:m,showDuration:h,durationSeconds:g}=e;if(m)return i.createElement("div",{className:t},(0,Se.Z)("Unknown Airing"));if(!a||!o)return null;const y=(0,VM.Z)(o,d,{subtype:l,providerEntityID:s});return i.createElement("div",{className:Ra()(t,u&&p&&"PlayerControlsMetadata-hasUserRating-DpOEAa")},y.map(((e,t)=>i.createElement(TM.Z,{key:t,component:e,isSecondary:t>0,metadataItemEntityID:a,playerType:r,positionSeconds:c,providerEntityID:s,serverEntityID:n}))),h&&g&&null!=c?i.createElement(kM,{className:"PlayerControlsMetadata-durationContainer-Vee1CO DurationRemaining-container-kNC4qp","data-testid":"mediaDuration",durationSeconds:g,positionSeconds:c}):null,i.createElement(jM,{className:"PlayerControlsMetadata-mediaInfoContainer-VGTEUw MediaInfo-infoContainer-atbj39",metadataItemEntityID:a,playerType:r}),u?i.createElement(xM.Z,{className:"PlayerControlsMetadata-ratingContainer-jI3BZZ",metadataItemEntityID:a,providerEntityID:s,serverEntityID:n}):null)}UM.defaultProps={className:"PlayerControlsMetadata-container-aTRKIG"};const FM=UM;var BM=Object.defineProperty,_M=Object.defineProperties,zM=Object.getOwnPropertyDescriptors,HM=Object.getOwnPropertySymbols,WM=Object.prototype.hasOwnProperty,GM=Object.prototype.propertyIsEnumerable,QM=(e,t,r)=>t in e?BM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const $M=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),(0,WP.Z)(),((e,t={})=>({serverEntityID:t.serverEntityID||e.serverEntityID,providerEntityID:t.providerEntityID||e.providerEntityID,type:t.type,subtype:t.subtype,context:Ow.r$,hasUserRating:null!=t.userRating})))}))(FM);$M.propTypes=((e,t)=>_M(e,zM(t)))(((e,t)=>{for(var r in t||(t={}))WM.call(t,r)&&QM(e,r,t[r]);if(HM)for(var r of HM(t))GM.call(t,r)&&QM(e,r,t[r]);return e})({},$M.propTypes),{metadataItemEntityID:hb().string,playerType:hb().string.isRequired});const KM=$M;var qM=Object.defineProperty,YM=Object.defineProperties,XM=Object.getOwnPropertyDescriptors,JM=Object.getOwnPropertySymbols,eD=Object.prototype.hasOwnProperty,tD=Object.prototype.propertyIsEnumerable,rD=(e,t,r)=>t in e?qM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const nD=(0,s.$j)((function(){return(0,o.P1)((0,sZ.Z)(),(e=>({metadataItemEntityID:e&&e.entityID,isUnknownAiring:!e})))}))(KM);nD.propTypes=((e,t)=>YM(e,XM(t)))(((e,t)=>{for(var r in t||(t={}))eD.call(t,r)&&rD(e,r,t[r]);if(JM)for(var r of JM(t))tD.call(t,r)&&rD(e,r,t[r]);return e})({},nD.propTypes),{playerType:hb().string.isRequired});const iD=nD;var sD=r(61740),aD=r(75165),oD=r(88538),lD=r(22992),cD=r(76651);const dD=parseInt(Ul.Z.playerIconButtonSize,10),uD=(0,s.$j)((function(){return(0,o.P1)((0,aD.Z)(),(e=>({isRecording:!!e,recordingProgress:e&&e.progress})))}))((function(e){const{isRecording:t,recordingProgress:r,onPress:n}=e;return i.createElement("div",{className:"LiveTVRecordButton-recordButton-kCfW0A"},i.createElement(mC,{"data-testid":"recordButton",iconComponent:t?oD.I:lD.X,title:(0,Se.Z)("Record"),onPress:n}),t?i.createElement(cD.Z,{backgroundClassName:"LiveTVRecordButton-recordingProgressBackground-t1imWc CircularProgressBar-circularProgressBarBackground-BcC4L1 CircularProgressBar-circularProgressBarBackground-Bw4kwM",containerClassName:"LiveTVRecordButton-recordingProgressBarContainer-PUe0Mp CircularProgressBar-absoluteCenterCircularProgressBarContainer-Fv3RhV",lineWidth:2,progress:r,showProgressText:!1,size:dD}):null)}));class pD extends i.Component{constructor(e,t){super(e,t),this.onRecordPress=e=>{this.setState({isSubscribeModalOpen:!0})},this.onSubscribeModalClose=()=>{this.setState({isSubscribeModalOpen:!1})},this.state={isSubscribeModalOpen:!1}}render(){const{serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,type:n}=this.props;return r&&n?i.createElement("div",{className:"LiveTVRecord-recordButtonContainer-QBdsKK"},i.createElement(uD,{metadataItemEntityID:r,serverEntityID:e,type:n,onPress:this.onRecordPress}),i.createElement(sD.Z,{isOpen:this.state.isSubscribeModalOpen,metadataItemEntityID:r,providerEntityID:t,serverEntityID:e,subscriptionType:n,onModalClose:this.onSubscribeModalClose})):null}}const mD=pD,hD=(0,s.$j)((function(){return(0,o.P1)(SS(),((e={})=>{const{entityID:t,type:r}=e;return{metadataItemEntityID:t,type:r}}))}))(mD);var gD=r(32894),yD=r(98463);function vD(e){const{className:t,cardClassName:r,serverEntityID:n,providerEntityID:s,metadataItemEntityID:a,metadataKey:o,type:l,disableExpandButton:c,imageWidth:d,imageHeight:u,imageUrl:p,isMusic:m,onExpandPress:h}=e,g=m?"music":o;return i.createElement("div",{className:t,style:{width:d}},i.createElement("div",{className:"MiniPlayerPoster-cardContainer-mj9sr4"},i.createElement(mC,{className:"MiniPlayerPoster-expandButton-FhcQi0 PlayerIconButton-playerButton-zDmEsI IconButton-button-s4bVCh","data-testid":"expandPlayerButton",iconComponent:gD.y,isDisabled:c,title:(0,Se.Z)("Expand Player"),onPress:h}),i.createElement(yD.Z,{cardClassName:r,imageHeight:u,imageUrl:p,imageWidth:d,metadataItemEntityID:a,metadataKey:g,providerEntityID:s,serverEntityID:n,showLinkOnly:!0,showOverlay:!1,type:l})))}vD.defaultProps={className:"MiniPlayerPoster-miniPlayerPoster-E1ScB7",cardClassName:"MiniPlayerPoster-card-y4FtsU MetadataPosterCard-card-NZOemZ"};const fD=vD,bD=parseInt(Ul.Z.playerControlsPosterHeight,10),ZD=(0,s.$j)((function(){return(0,o.P1)(wb(),(e=>{const t=Ow.r$,r=(0,sI.Z)(null,bD,e.type,e,t);return{serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,metadataItemEntityID:e.entityID,type:e.type,metadataKey:e.key,imageWidth:r.width,imageHeight:r.height,imageUrl:r.url}}))}),(function(e,{playerType:t}){const r={playerType:t};return{onExpandPress(t){e(rC.jn(r))}}}))(fD);var SD=r(34575),PD=r(26759),ID=r(87001),ED=r(25004);function wD({onPress:e}){return i.createElement("div",{className:"PlayerAddToWatchlistButton-buttonContainer-yg0lzl"},i.createElement(Us.zx,{size:B.$u.S,onPress:e},(0,Se.Z)("Add to Watchlist")))}const CD={dispatchToggleWatchlistRequested:ED.Z.actions.toggleWatchlistRequested,dispatchSetMetadataItemIsInUniversalWatchlist:SD.WN},MD=(0,s.$j)((function(){return(0,o.zB)({server:c.Z,provider:Zt.Z,metadataItem:wb(),stableUser:PD.Z})}),CD)((function({server:e,provider:t,metadataItem:r,stableUser:n,dispatchToggleWatchlistRequested:s,dispatchSetMetadataItemIsInUniversalWatchlist:a}){const o=(0,i.useCallback)((()=>{const i=(0,ID.Z)(r);if(!i)return;const o=(0,z.Z)({serverIdentifier:e.machineIdentifier,providerIdentifier:t.identifier,key:`/library/metadata/${i}`});(0,Ze.DB)("metrics").trackClick({page:u.r$,action:ss.JL}),s({server:e,provider:t,stableUser:n,sourceURI:o,ratingKey:i,added:!0,showToastOnAdded:!0}),a({metadataItemEntityID:r.entityID})}),[a,s,r,t,e,n]);return i.createElement(wD,{onPress:o})}));var DD=r(31327),OD=r(22111),TD=r(40759),xD=Object.defineProperty,AD=Object.defineProperties,kD=Object.getOwnPropertyDescriptors,ND=Object.getOwnPropertySymbols,RD=Object.prototype.hasOwnProperty,LD=Object.prototype.propertyIsEnumerable,jD=(e,t,r)=>t in e?xD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,VD=(e,t)=>{for(var r in t||(t={}))RD.call(t,r)&&jD(e,r,t[r]);if(ND)for(var r of ND(t))LD.call(t,r)&&jD(e,r,t[r]);return e};const UD={showDelete:!1,showDeleteVersion:!1,showEdit:!1,showFixMatch:!1,showMarkUnplayed:!1,showMarkPlayed:!1,showMatch:!1,showOptimize:!1,showPlay:!1,showPlayAll:!1,showPlayMusicVideo:!1,showPlayPlexMix:!1,showPlayTrailer:!1,showPlayVersion:!1,showWatchTogether:!1,showQueue:!1,showRefresh:!1,showSelect:!1,showShuffle:!1,showSplitApart:!1,showSyncDownload:!1,showUnmatch:!1};class FD extends i.Component{constructor(e,t){super(e,t),this.onPress=()=>{this.setState(((e,t)=>({isMenuOpen:!e.isMenuOpen})),(()=>{this.props.onMenuChange&&this.props.onMenuChange(this.state.isMenuOpen)}))},this.onMenuClose=()=>{this.setState({isMenuOpen:!1},(()=>{this.props.onMenuChange&&this.props.onMenuChange(!1)}))},this.state={isMenuOpen:!1},this._menuButtonID=(0,sv.Z)()}render(){const{serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,metadataActionProps:n,isDisabled:s}=this.props,a=VD(VD({},n),UD);return Uu().values(a).some((e=>e))?i.createElement("span",null,i.createElement(mC,{"data-testid":"moreButton",iconComponent:OD.S,id:this._menuButtonID,isDisabled:s,title:(0,Se.Z)("More Actions"),onPress:this.onPress}),i.createElement(TD.Z,((e,t)=>AD(e,kD(t)))(VD({isOpen:this.state.isMenuOpen,metadataItemEntityID:r,providerEntityID:t,serverEntityID:e,target:this._menuButtonID},UD),{onMenuClose:this.onMenuClose}))):null}}const BD=FD,_D=(0,s.$j)((function(){return(0,o.P1)((0,DD.Z)(),(e=>({metadataActionProps:e})))}))(BD);var zD=r(37216),HD=r(51386),WD=r(85183),GD=r(70526);const QD=250,$D=.5;function KD(e={}){const{callback:t,axisLockDuration:r=QD,sensitivity:n=$D,maxAbsDelta:i=Number.MAX_SAFE_INTEGER}=e;let s,a;return e=>{e.preventDefault(),(void 0===a||e.timeStamp-a>=r)&&(s=Math.abs(e.deltaX)>Math.abs(e.deltaY)?"deltaX":"deltaY",a=e.timeStamp);const o=e[s]*n;if(!o)return;let l=Math.max(0,Math.min(i,Math.abs(o)));l*=o>0?1:-1,l=(e.nativeEvent||e).webkitDirectionInvertedFromDevice?l:-l,t(l)}}const qD=parseInt(Ul.Z.playerVolumeSliderHeight,10);class YD extends i.Component{constructor(e,t){super(e,t),this.onWheelDelta=e=>{this.props.onVolumeChange(e)},this.onWheel=KD({callback:this.onWheelDelta,maxAbsDelta:qD/10})}render(){const{className:e,volume:t,onPress:r}=this.props;let n=zD.i;return t&&t>60?n=HD.$:t&&t>40?n=WD.c:t&&t>0&&(n=GD.g),i.createElement("span",{onWheel:this.onWheel},i.createElement(mC,{className:e,"data-testid":"volumeButton",iconComponent:n,title:0===t?(0,Se.Z)("Unmute Volume"):(0,Se.Z)("Mute Volume"),onPress:r}))}}const XD=YD;var JD=Object.defineProperty,eO=Object.defineProperties,tO=Object.getOwnPropertyDescriptors,rO=Object.getOwnPropertySymbols,nO=Object.prototype.hasOwnProperty,iO=Object.prototype.propertyIsEnumerable,sO=(e,t,r)=>t in e?JD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function aO(e){return i.createElement(DC.Z,((e,t)=>eO(e,tO({isVertical:!0})))(((e,t)=>{for(var r in t||(t={}))nO.call(t,r)&&sO(e,r,t[r]);if(rO)for(var r of rO(t))iO.call(t,r)&&sO(e,r,t[r]);return e})({},e)))}aO.defaultProps={className:"VerticalSlider-slider-kmawbw Slider-slider-YdLxcK",fillClassName:"VerticalSlider-fill-GREURn Slider-fill-Rq3kSU",thumbClassName:"VerticalSlider-thumb-VpJ1nM Slider-thumb-YPvtji Link-link-SxPFpG",thumbTrackClassName:"VerticalSlider-thumbTrack-IFijMm Slider-thumbTrack-INScRp",trackClassName:"VerticalSlider-track-AuobAj Slider-track-i7q9Yd"};const oO=aO,lO=parseInt(Ul.Z.playerVolumeSliderHeight,10);class cO extends i.Component{constructor(e,t){super(e,t),this.onWheelDelta=e=>{this.onChange({positionDelta:e})},this.onChange=({positionDelta:e})=>{this.props.onVolumeChange(e)},this.onWheel=KD({callback:this.onWheelDelta,maxAbsDelta:lO/10})}render(){const{className:e,volume:t}=this.props;return i.createElement(oO,{autoHideThumb:!0,className:e,fillClassName:"VolumeSlider-fill-m0PeVk VerticalSlider-fill-GREURn Slider-fill-Rq3kSU",showFill:!0,stepSize:1,trackClassName:"VolumeSlider-track-P387GN VerticalSlider-track-AuobAj Slider-track-i7q9Yd",value:t,onChange:this.onChange,onWheel:this.onWheel})}}cO.defaultProps={className:"VolumeSlider-slider-va1Tu2 VerticalSlider-slider-kmawbw Slider-slider-YdLxcK"};const dO=cO;var uO=r(66565),pO=r(33593),mO=r(99184);var hO=Object.defineProperty,gO=Object.defineProperties,yO=Object.getOwnPropertyDescriptors,vO=Object.getOwnPropertySymbols,fO=Object.prototype.hasOwnProperty,bO=Object.prototype.propertyIsEnumerable,ZO=(e,t,r)=>t in e?hO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const SO=(0,s.$j)((function(){return(0,o.P1)((0,nC.Z)(),(0,WP.Z)(),((e,t)=>{const{title:r,summary:n,originallyAvailableAt:i,addedAt:s}=t;return{title:r,summary:n,index:e.playQueueSelectedItemOffset,size:e.length,dateTaken:i||(0,uO.Z)(s,"yyyy-MM-dd")}}))}))((function(e){const{title:t,summary:r,dateTaken:n,index:s,size:a}=e;let o="";n&&(o+=(0,pO.Z)(n)),r&&(o+=o?` ${G.U} ${r}`:` ${r}`);const l=!(!t||!t.length),c=!!o.length,d=!!a;return i.createElement("div",{className:"PhotoMetadataControls-container-EtqMz_ PlayerControlsMetadata-container-aTRKIG"},l?i.createElement(TM.Z,{component:mO.Z,title:t}):null,c?i.createElement(TM.Z,{component:mO.Z,isSecondary:l,title:o}):null,d?i.createElement(TM.Z,{component:mO.Z,isSecondary:l||c,title:(0,Se.Z)("{currentIndex} of {size}",{currentIndex:s+1,size:a})}):null)}));SO.propTypes=((e,t)=>gO(e,yO(t)))(((e,t)=>{for(var r in t||(t={}))fO.call(t,r)&&ZO(e,r,t[r]);if(vO)for(var r of vO(t))bO.call(t,r)&&ZO(e,r,t[r]);return e})({},SO.propTypes),{metadataItemEntityID:hb().string.isRequired,playerType:hb().string.isRequired});const PO=SO;function IO(e){const{className:t,durationSeconds:r,hasLiveTVProtocol:n,isMiniPlayer:s,isMusic:a,isVideo:o,metadataItemEntityID:l,playerType:c,positionSeconds:d,providerEntityID:u,serverEntityID:p,volume:h,activateChaptersButton:g,activateLyricsButton:y,activatePhotoInformationButton:v,activatePhotoStripButton:f,activateQueueButton:b,activateRepeatButton:Z,activateRepeatOneButton:S,activateSettingsButton:P,activateWatchTogetherParticipantsButton:I,activateShuffleButton:E,disableCloseButton:w,disableLyricsButton:C,disableMenuButton:M,disableNextButton:D,disablePauseButton:O,disablePlayButton:T,disablePreviousButton:x,disableQueueButton:A,disableRepeatButton:k,disableRepeatOneButton:N,disableSettingsButton:R,disableShuffleButton:L,disableSkipBackButton:j,disableSkipForwardButton:V,showChaptersButton:U,showCloseButton:F,showDuration:B,showEditButton:_,showFavoriteButton:z,showLyricsButton:H,showMenuButton:W,showNextButton:G,showPauseButton:Q,showPhotoInformationButton:$,showPhotoStripButton:K,showPlayButton:q,showPreviousButton:Y,showQueueButton:X,showRecordButton:J,showRepeatButton:ee,showRepeatOneButton:te,showSettingsButton:re,showWatchTogetherParticipantsButton:ne,showShuffleButton:ie,showSkipBackButton:se,showSkipForwardButton:ae,showUnfavoriteButton:oe,showAddToWatchlistButton:le,showVolume:ce,onChaptersPress:de,onClosePress:ue,onControlsMenuChange:pe,onEditPress:me,onFavoritePress:he,onLyricsPress:ge,onNextPress:ye,onPausePress:ve,onPhotoInformationPress:fe,onPhotoStripPress:be,onPlayPress:Ze,onPreviousPress:Pe,onQueuePress:Ie,onRepeatOnePress:Ee,onRepeatPress:we,onSettingsPress:Ce,onWatchTogetherParticipantsPress:Me,onShufflePress:De,onSkipBackPress:Oe,onSkipForwardPress:Te,onUnfavoritePress:xe,onVolumeChange:Ae,onVolumeIconPress:ke}=e;let Ne;Ne=c===m.pV?PO:n?iD:KM;const Re=ce&&null!=h,Le=n?null:"PlayerControls-balanceLeft-jE50ih",je=o?"PlayerControls-hasLandscapePoster-UYY7sn":"PlayerControls-hasSquarePoster-lzn163";return i.createElement(i.Fragment,null,i.createElement("div",{className:Ra()(t,s&&je),"data-testid":"playerControlsContainer"},i.createElement("div",{className:"PlayerControls-buttonGroupLeft-M_U9AP PlayerControls-buttonGroup-L3xlI0"},s?i.createElement(ZD,{isMusic:a,isVideo:o,playerType:c}):null,i.createElement(Ne,{durationSeconds:r,metadataItemEntityID:l,playerType:c,positionSeconds:d,showDuration:B,showStarRating:a})),i.createElement("div",{className:Ra()("PlayerControls-buttonGroupCenter-LDbSmK PlayerControls-buttonGroup-L3xlI0",Le)},J?i.createElement(hD,{"data-testid":"recordButton",playerType:c,positionSeconds:d,providerEntityID:u,serverEntityID:p}):null,Y?i.createElement(mC,{"data-testid":"previousButton",iconComponent:dM.q,isDisabled:x,title:(0,Se.Z)("Previous"),onPress:Pe}):null,se?i.createElement(mC,{"data-testid":"skipBackButton",iconComponent:uM.z,isDisabled:j,title:(0,Se.Z)("Skip Back 10 Seconds"),onPress:Oe}):null,q?i.createElement(mC,{"data-testid":"resumeButton",iconComponent:pM.J,isDisabled:T,isPrimary:!0,title:(0,Se.Z)("Play"),onPress:Ze}):null,Q?i.createElement(mC,{"data-testid":"pauseButton",iconComponent:mM.k,isDisabled:O,isPrimary:!0,title:(0,Se.Z)("Pause"),onPress:ve}):null,ae?i.createElement(mC,{"data-testid":"skipForwardButton",iconComponent:hM.o,isDisabled:V,title:(0,Se.Z)("Skip Forward 30 Seconds"),onPress:Te}):null,G?i.createElement(mC,{"data-testid":"nextButton",iconComponent:gM.r,isDisabled:D,title:(0,Se.Z)("Next"),onPress:ye}):null,F?i.createElement(mC,{"data-testid":"closeButton",iconComponent:yM.z,isDisabled:w,title:(0,Se.Z)("Close Player"),onPress:ue}):null),i.createElement("div",{className:"PlayerControls-buttonGroupRight-Bs12vn PlayerControls-buttonGroup-L3xlI0"},le?i.createElement(MD,{playerType:c}):null,W?i.createElement(_D,{"data-testid":"moreButton",isDisabled:M,metadataItemEntityID:l,providerEntityID:u,serverEntityID:p,onMenuChange:pe}):null,ee?i.createElement(mC,{"data-testid":"repeatButton",iconComponent:vM.U,isActive:Z,isDisabled:k,title:(0,Se.Z)("Repeat"),onPress:we}):null,te?i.createElement(mC,{"data-testid":"repeatOneButton",iconComponent:fM.y,isActive:S,isDisabled:N,title:(0,Se.Z)("Repeat One"),onPress:Ee}):null,ie?i.createElement(mC,{"data-testid":"shuffleButton",iconComponent:bM.z,isActive:E,isDisabled:L,title:(0,Se.Z)("Shuffle"),onPress:De}):null,_?i.createElement(mC,{"data-testid":"playerEditButton",iconComponent:ZM.a,title:(0,Se.Z)("Edit"),onPress:me}):null,z?i.createElement(mC,{"data-testid":"playerFavoriteButton",iconComponent:SM.A,title:(0,Se.Z)("Add to Favorites"),onPress:he}):null,oe?i.createElement(mC,{"data-testid":"playerUnfavoriteButton",iconComponent:PM.g,title:(0,Se.Z)("Remove from Favorites"),onPress:xe}):null,$?i.createElement(mC,{"data-testid":"playerPhotoInfoButton",iconComponent:IM.x,isActive:v,title:(0,Se.Z)("Information"),onPress:fe}):null,K?i.createElement(mC,{"data-testid":"playerPhotoStripButton",iconComponent:EM.i,isActive:f,title:(0,Se.Z)("Show Photo Strip"),onPress:be}):null,H?i.createElement(mC,{"data-testid":"lyricsButton",iconComponent:wM.r,isDisabled:C,isSelected:y,title:(0,Se.Z)("Lyrics"),onPress:ge}):null,re?i.createElement(mC,{"data-testid":"videoSettingsButton",iconComponent:CM.J,isActive:P,isDisabled:R,title:(0,Se.Z)("Settings"),onPress:Ce}):null,U?i.createElement(mC,{"data-testid":"chaptersButton",iconComponent:MM.W,isActive:g,title:(0,Se.Z)("Chapters"),onPress:de}):null,X?i.createElement(mC,{"data-testid":"playQueueButton",iconComponent:DM.S,isActive:b,isDisabled:A,title:(0,Se.Z)("Play Queue"),onPress:Ie}):null,ne?i.createElement(mC,{"data-testid":"watchTogetherParticipantsButton",iconComponent:OM.V,isActive:I,title:(0,Se.Z)("Participants"),onPress:Me}):null,Re?i.createElement(XD,{className:"PlayerControls-volumeButton-C1_VCw PlayerIconButton-playerButton-zDmEsI IconButton-button-s4bVCh","data-testid":"volumeButton",volume:h,onPress:ke,onVolumeChange:Ae}):null)),Re?i.createElement(dO,{className:"PlayerControls-volumeSlider-MG9lg2 VolumeSlider-slider-va1Tu2 VerticalSlider-slider-kmawbw Slider-slider-YdLxcK",volume:h,onVolumeChange:Ae}):null)}IO.defaultProps={className:"PlayerControls-controls-PXkgmR",isMusic:!1,isVideo:!1,isPhoto:!1};const EO=IO,wO=(0,s.$j)((function(){return(0,o.P1)(((e,{isVideo:t})=>t),((e,{isMusic:t})=>t),((e,{isAdVisible:t})=>t),((e,{isWatchTogether:t})=>t),((e,{disableNextButton:t})=>t),((e,{disablePreviousButton:t})=>t),(0,Db.Z)(),(0,yb.Z)(),(0,Sb.Z)(),By(),(0,fh.Z)(Ue.ie),((e,t,r,n,i,s,a,o,l,c,d)=>{const{isPostPlayVisible:u,positionSeconds:p,durationSeconds:m,controllable:h}=a,g=m-p,y=l&&l.chapters&&l.chapters.length>0,v=!r&&e&&!u,f=!!h&&!h.playbackSpeed&&t,b=!(!(d&&l.primaryGuid&&l.extraType===cM.ZP.get(cM.R6).id&&l.isInUniversalWatchlistFetched)||l.isInUniversalWatchlist);return{positionSeconds:p,durationSeconds:m,hasLiveTVProtocol:c.protocols.includes("livetv"),disableLyricsButton:!(o.lyricsStreams&&o.lyricsStreams.length||o.hasPremiumLyrics),disableNextButton:r||i,disablePreviousButton:r||s,disableQueueButton:r,disableSettingsButton:f,disableSkipForwardButton:g<=$C.uS,showChaptersButton:e&&!u&&y,showDuration:!u,showLyricsButton:t,showMenuButton:!u,showQueueButton:!n,showSettingsButton:!u,showWatchTogetherParticipantsButton:n,showShuffleButton:!n,showSkipBackButton:v,showSkipForwardButton:v,showAddToWatchlistButton:b}}))}))(EO);var CO=r(82777),MO=r(37048),DO=r(58790);const OO={visibleContainer:"SeekBarThumbnail-visibleContainer-y7xW5Z",hiddenContainer:"SeekBarThumbnail-hiddenContainer-xCB6T6 SeekBarThumbnail-visibleContainer-y7xW5Z",thumbnail:"SeekBarThumbnail-thumbnail-CGCPey",tooltip:"SeekBarThumbnail-tooltip-U02Ful",small:"SeekBarThumbnail-small-q3WQaf",large:"SeekBarThumbnail-large-O3zsmf"},TO=parseInt(Ul.Z.seekBarTooltipSmallWidth,10),xO=parseInt(Ul.Z.seekBarTooltipLargeWidth,10),AO={containerWidth:99,containerHeight:99};class kO extends i.Component{render(){const{tooltipClassName:e,serverEntityID:t,providerEntityID:r,size:n,position:s,hoverValue:a,mediaItems:o,mediaIndex:l,partIndex:c,formatValue:d,isVisible:u}=this.props;null!=a&&(this._formattedTime=d(a));const p=o&&o[l],m=function(e,t){if(!e||null==t)return;const r=(0,MO.Z)(e);return null!=r?`/library/parts/${e.id}/indexes/${r}/${Math.floor(t)}`:void 0}(p&&p.Part[c],a);m&&(this._imageUrl=m);const{containerWidth:h,containerHeight:g}=function(e){const t=(0,DO.Z)(e);if(null==t||null==t.width||null==t.height)return AO;const{width:r,height:n}=t;let i=99,s=99;return r>n?i=Math.round(i*(r/n)):s=Math.round(s*(n/r)),{containerWidth:i,containerHeight:s}}(p),y=function(e,t,r){let n=e.x-t/2;return n<0?n=0:n+t>window.innerWidth&&(n=window.innerWidth-t),{left:n,top:e.y-r-10,height:r}}(s,h,g),v=function(e,t,r){const n=r===el.ln?xO:TO;let i=t/2-n/2;const s=e.x-t/2;if(s<0){const t=4,r=e.x-n/2;i=Math.max(r,t)}else if(s+t>window.innerWidth){const r=t-n-4,s=t-(window.innerWidth-e.x)-n/2;i=Math.min(s,r)}return{left:i}}(s,h,n);return i.createElement("div",{className:u?OO.visibleContainer:OO.hiddenContainer,style:y},this._imageUrl?i.createElement(Ye.Z,{className:OO.thumbnail,height:g,providerEntityID:r,serverEntityID:t,url:this._imageUrl,width:h}):null,i.createElement("div",{className:Ra()(e,OO[n]),style:v},this._formattedTime))}}kO.defaultProps={tooltipClassName:OO.tooltip,size:el.HC,formatValue:$S.Z};const NO=kO,RO=(0,s.$j)((function(){return(0,o.P1)((0,WP.Z)(),(({Media:e}={})=>e&&e.length?{mediaItems:e}:{}))}))(NO),LO="SeekBar-noFillTransition-aS9G8b";var jO=Object.defineProperty,VO=Object.defineProperties,UO=Object.getOwnPropertyDescriptors,FO=Object.getOwnPropertySymbols,BO=Object.prototype.hasOwnProperty,_O=Object.prototype.propertyIsEnumerable,zO=(e,t,r)=>t in e?jO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class HO extends i.Component{constructor(e,t){super(e,t),this.onChange=({positionValue:e})=>{this.props.onSeek&&this.props.onSeek({playerType:this.props.playerType,positionSeconds:Math.floor(e/1e3)})},this.onMove=({positionValue:e,position:t})=>{this.setState({hoverValue:e,portalPosition:t})},this.onMouseLeave=()=>{this.setState({hoverValue:null})},this.state={hoverValue:null,portalPosition:{x:0,y:0}}}render(){const e=this.props,{className:t,trackClassName:r,bufferClassName:n,fillClassName:s,canSeek:a,positionMilliseconds:o,offsetMilliseconds:l,durationMilliseconds:c,bufferStartMilliseconds:d,bufferEndMilliseconds:u,showBuffer:p,noFillTransition:m,isDisabled:h,onSeekEnd:g,onSeekStart:y}=e,v=((e,t)=>{var r={};for(var n in e)BO.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&FO)for(var n of FO(e))t.indexOf(n)<0&&_O.call(e,n)&&(r[n]=e[n]);return r})(e,["className","trackClassName","bufferClassName","fillClassName","canSeek","positionMilliseconds","offsetMilliseconds","durationMilliseconds","bufferStartMilliseconds","bufferEndMilliseconds","showBuffer","noFillTransition","isDisabled","onSeekEnd","onSeekStart"]);if(!a)return null;const{hoverValue:f,portalPosition:b}=this.state;return i.createElement("div",{onMouseLeave:this.onMouseLeave},i.createElement(DC.Z,{autoHideThumb:!0,className:t,fillClassName:Ra()(s,m&&LO),isDisabled:h,max:c,min:l,secondaryFillClassName:Ra()(n,m&&LO),secondaryMax:u,secondaryMin:d,showFill:!0,showSecondaryFill:p,trackClassName:r,value:o,onChange:this.onChange,onDragComplete:g,onDragStart:y,onMove:h?null:this.onMove}),i.createElement(Nl.Z,null,i.createElement(RO,((e,t)=>VO(e,UO(t)))(((e,t)=>{for(var r in t||(t={}))BO.call(t,r)&&zO(e,r,t[r]);if(FO)for(var r of FO(t))_O.call(t,r)&&zO(e,r,t[r]);return e})({},v),{hoverValue:f,isVisible:null!=f,position:b}))))}}HO.defaultProps={className:"SeekBar-seekBar-ULqsSu Slider-slider-YdLxcK",trackClassName:"SeekBar-seekBarTrack-nI_0Xu Slider-track-i7q9Yd",fillClassName:"SeekBar-seekBarFill-TestC_ Slider-fill-Rq3kSU",bufferClassName:"SeekBar-seekBarBuffer-pao2Od Slider-secondaryFill-BduU3_ Slider-fill-Rq3kSU",canSeek:!0,showBuffer:!1,noFillTransition:(0,CO.Z)()||(0,WI.Z)(),isDisabled:!1};const WO=HO,GO={onSeek:gb.O7},QO=wE(WO),$O=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),(0,yb.Z)(),((e,t)=>{const{serverEntityID:r,providerEntityID:n,positionSeconds:i,durationSeconds:s,mediaIndex:a,partIndex:o,controllable:l}=e,c={serverEntityID:r,providerEntityID:n,metadataItemEntityID:t.metadataItem,canSeek:!!s,positionSeconds:i,durationMilliseconds:1e3*s,mediaIndex:a,partIndex:o};return l&&!l.seekTo&&(c.canSeek=!1),c}))}),GO)(QO);var KO=Object.defineProperty,qO=Object.getOwnPropertySymbols,YO=Object.prototype.hasOwnProperty,XO=Object.prototype.propertyIsEnumerable,JO=(e,t,r)=>t in e?KO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const eT=function(e){const{durationMilliseconds:t}=e;return null!=t?i.createElement(WO,((e,t)=>{for(var r in t||(t={}))YO.call(t,r)&&JO(e,r,t[r]);if(qO)for(var r of qO(t))XO.call(t,r)&&JO(e,r,t[r]);return e})({fillClassName:"AdSeekBar-seekBarFill-jPOv83 SeekBar-seekBarFill-TestC_ Slider-fill-Rq3kSU",isDisabled:!0},e)):null};function tT(){return(0,o.P1)((0,Fy.Z)("seekStartSeconds"),(0,Fy.Z)("seekEndSeconds"),(0,eZ.Z)(),((e=0,t=0,r)=>{const n=r&&r.captureBuffer;let i=0;return r&&n?(i=n.startedAt,e=n.seekStartSeconds,t=n.seekEndSeconds):r&&(i=r.startedAt),{seekRangeStartedAtSeconds:i,seekStartSeconds:e,seekEndSeconds:t}}))}var rT=r(35877),nT=r(45731),iT=Object.defineProperty,sT=Object.defineProperties,aT=Object.getOwnPropertyDescriptors,oT=Object.getOwnPropertySymbols,lT=Object.prototype.hasOwnProperty,cT=Object.prototype.propertyIsEnumerable,dT=(e,t,r)=>t in e?iT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uT=(e,t)=>{for(var r in t||(t={}))lT.call(t,r)&&dT(e,r,t[r]);if(oT)for(var r of oT(t))cT.call(t,r)&&dT(e,r,t[r]);return e},pT=(e,t)=>sT(e,aT(t));class mT extends i.Component{constructor(){super(...arguments),this.formatPlayerTime=e=>{const t=this.props.timeFormat;return(0,uO.Z)(e/1e3,t)},this.onSeek=({positionSeconds:e})=>{const{seekRangeStartedAtSeconds:t,seekStartSeconds:r,seekEndSeconds:n}=this.props,i=t+r,s=t+n;e<i?e=i:e>s&&(e=s),this.props.onSeek({playerType:this.props.playerType,seekPosition:e})}}render(){const e=this.props,{isCloud:t,canSeek:r,currentPosition:n,positionMilliseconds:s,beginsAt:a,endsAt:o,durationSeconds:l,streamStartedAt:c,timeFormat:d,seekRangeStartedAtSeconds:u,seekStartSeconds:p,seekEndSeconds:m}=e,h=((e,t)=>{var r={};for(var n in e)lT.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&oT)for(var n of oT(e))t.indexOf(n)<0&&cT.call(e,n)&&(r[n]=e[n]);return r})(e,["isCloud","canSeek","currentPosition","positionMilliseconds","beginsAt","endsAt","durationSeconds","streamStartedAt","timeFormat","seekRangeStartedAtSeconds","seekStartSeconds","seekEndSeconds"]);if(!r&&!t)return i.createElement(WO,pT(uT({},h),{canSeek:!0,durationMilliseconds:2,formatValue:this.formatCurrentTime,isDisabled:!0,offsetMilliseconds:0,positionMilliseconds:1,showBuffer:!1,size:el.ln,onSeek:this.onSeek}));const g=1e3*(u?u+p:n),y=1e3*(u?u+m:n),v=1e3*a,f=1e3*(o-1),b=t?v:Math.max(v,g),Z=t?f:Math.min(f,y),S=function(e){const{isCloud:t,isRemotePlayer:r,currentPosition:n,positionMilliseconds:i,streamStartedAt:s,lastSeekPosition:a}=e;return a||r||t?1e3*n:1e3*s+i}(this.props);return i.createElement(WO,pT(uT({},h),{bufferEndMilliseconds:Math.max(Z,0),bufferStartMilliseconds:b,canSeek:r||t,durationMilliseconds:f,formatValue:this.formatPlayerTime,isDisabled:!r||t,offsetMilliseconds:v,positionMilliseconds:S,showBuffer:!t,size:el.ln,onSeek:this.onSeek}))}}mT.defaultProps={beginsAt:0,endsAt:0,streamStartedAt:0,seekRangeStartedAtSeconds:0};const hT=wE(mT),gT=(0,o.P1)(nT.Z,(e=>e.replace(":mm",":mm:ss"))),yT={onSeek:sg.O7},vT=(0,s.$j)((function(){return(0,o.P1)(gT,rT.Z,(0,sZ.Z)(),(0,Eb.Z)(),(0,eZ.Z)(),tT(),(0,Db.Z)(),QZ(),((e,t,r={},n={},i,s,a,o)=>{const{beginsAt:l,endsAt:c}=n,{serverEntityID:d,controllable:u,playbackStartTime:p}=a,{isCloud:m}=o,h=c-l,g={serverEntityID:d,metadataItemEntityID:r.entityID,isCloud:m,isRemotePlayer:t,canSeek:!(!h||!i),beginsAt:l,endsAt:c,playbackStartTime:p,durationSeconds:h,timeFormat:e,positionSeconds:a.positionSeconds};return!m&&s&&Object.assign(g,s),u&&!u.seekTo&&(g.canSeek=!1),i&&(g.streamStartedAt=i.startedAt,g.currentPosition=i.currentPosition,g.lastSeekPosition=i.lastSeekPosition),g}))}),yT)(hT);var fT=Object.defineProperty,bT=Object.defineProperties,ZT=Object.getOwnPropertyDescriptors,ST=Object.getOwnPropertySymbols,PT=Object.prototype.hasOwnProperty,IT=Object.prototype.propertyIsEnumerable,ET=(e,t,r)=>t in e?fT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wT=(e,t)=>{for(var r in t||(t={}))PT.call(t,r)&&ET(e,r,t[r]);if(ST)for(var r of ST(t))IT.call(t,r)&&ET(e,r,t[r]);return e},CT=(e,t)=>bT(e,ZT(t));const MT=(0,s.$j)((function(){return(0,o.P1)(By(),(e=>({hasLiveTVProtocol:e.protocols.includes("livetv")})))}))((function(e){const t=e,{isAdVisible:r,hasLiveTVProtocol:n,adPositionMilliseconds:s,adDurationMilliseconds:a}=t,o=((e,t)=>{var r={};for(var n in e)PT.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ST)for(var n of ST(e))t.indexOf(n)<0&&IT.call(e,n)&&(r[n]=e[n]);return r})(t,["isAdVisible","hasLiveTVProtocol","adPositionMilliseconds","adDurationMilliseconds"]);return r?i.createElement(eT,CT(wT({},o),{durationMilliseconds:a,positionMilliseconds:s,showBuffer:!1})):n?i.createElement(vT,wT({},o)):i.createElement($O,CT(wT({},o),{showBuffer:!0}))}));var DT=r(73701);const OT=(0,s.$j)((function(){return(0,o.P1)(DT.Z,WZ(),tT(),(0,Fy.Z)("isPaused"),((e,t,r,n)=>{const i=Mt.wB(e.identifier,Mt.vP),{disablePreviousButton:s,disableSkipForwardButton:a,disableNextButton:o}=function(e,t){const{seekRangeStartedAtSeconds:r,seekStartSeconds:n,seekEndSeconds:i}=t,s=e-r;return{disablePreviousButton:s<=$C.Nf||s-n<=$C.Nf,disableSkipForwardButton:i-s<=15,disableNextButton:i-s<=15}}(t,r);return{showRecordButton:!!e.features.subscribe,showRepeatButton:!1,showSettingsButton:!0,showPauseButton:!n&&!i,showPreviousButton:!i,showSkipBackButton:!i,showSkipForwardButton:!i,showNextButton:!i,disablePreviousButton:s,disableSkipForwardButton:a,disableNextButton:o}}))}),(function(e,{playerType:t}){const r={playerType:t};return{onPreviousPress(t){e(sg.oA(r))},onSkipBackPress(t){e(sg.QJ(r))},onSkipForwardPress(t){e(sg.wW(r))},onNextPress(t){e(sg.o1(r))}}}))(EO);var TT=r(5509);const xT=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),(0,eZ.Z)(),((e,t)=>({positionSeconds:e.positionSeconds,channelIdentifier:t.channelIdentifier})))}))((function(e){const{channelIdentifier:t}=e,r=(0,s.v9)(TT.Z),n=(0,i.useMemo)((()=>r.find((e=>e.id===t))),[r,t]);return i.createElement(U.X,{gap:B.$u.XXS,verticalAlign:B.xM.Center},n?n.title||n.callSign||(0,Se.Z)("Unknown"):null)}));var AT=r(62248),kT=r(70894),NT=r(59658),RT=r(71168);const LT=(0,sn.Z)((function(e){return(0,o.P1)(RT.Z,(0,Ie.Z)(e,"liveTVSession"),((e,t)=>e[null!=t?t:""]))}));var jT=r(74236),VT=r(52183),UT=r(94852);function FT(){var e,t,r,n;const a=(0,i.useMemo)((()=>(0,Ze.DB)("appModel")),[]),[o,l]=(0,i.useState)(!0),c=(0,s.I0)(),[d,u]=(0,O.c9)(),p=(0,s.v9)(LT(Ee.G.AudioVideo)),{channelIdentifier:m,currentPosition:h}=p,g=(0,s.v9)(TT.Z),y=(0,i.useMemo)((()=>g.find((e=>e.id===m))),[g,m]),v=(0,s.v9)((0,VT.Z)(null==y?void 0:y.gridKey)),{isPending:f,isPopulated:b}=(0,s.v9)((0,UT.Z)(null==y?void 0:y.gridKey)),Z=(0,i.useRef)(),S=(0,i.useRef)(),P=(0,s.v9)((0,NT.Z)(null==(t=null==(e=null==Z?void 0:Z.current)?void 0:e.metadataItem)?void 0:t.sourceURI)),I=(0,s.v9)((0,NT.Z)(null==(n=null==(r=null==S?void 0:S.current)?void 0:r.metadataItem)?void 0:n.sourceURI)),E=(0,i.useMemo)((()=>{if(Z.current&&P)return(0,kT.Z)(a,{server:d,provider:u,metadataItem:Z.current.metadataItem,metadataItemState:P}).metadataItemModel}),[a,Z,P,u,d]),w=(0,i.useMemo)((()=>{if(S.current&&I)return(0,kT.Z)(a,{server:d,provider:u,metadataItem:S.current.metadataItem,metadataItemState:I}).metadataItemModel}),[a,S,I,u,d]);return(0,i.useEffect)((()=>{!o&&Z.current&&Z.current.endsAt<=h&&l(!0)}),[Z,h,o]),(0,i.useEffect)((()=>{o&&!f&&b&&(Z.current=v.find((e=>e.beginsAt<=h&&e.endsAt>h)),S.current=v.find((e=>e.beginsAt>h)),l(!Z.current||!S.current))}),[f,b,o,l]),(0,i.useEffect)((()=>{c(sg.X9({liveTVSessionEntityID:p.entityID,newAiringMetadataItem:E,newUpNextMetadataItem:w}))}),[E,c,p.entityID,w,u,d]),(0,i.useEffect)((()=>{!g.length||g.length&&!y?c(jT.ZP.actions.guideChannelsFetchRequested({sourceKeys:[{server:d,provider:u}]})):!(null==y?void 0:y.gridKey)||f||b?(null==y?void 0:y.gridKey)&&!S.current&&Z.current&&!f&&b&&c(jT.ZP.actions.channelAiringsFetchRequested({server:d,provider:u,channelGridKey:y.gridKey,date:(0,AT.Z)(new Date(1e3*Z.current.endsAt)).toString()})):c(jT.ZP.actions.channelAiringsFetchRequested({server:d,provider:u,channelGridKey:y.gridKey,date:(0,AT.Z)(new Date).toString()}))}),[c,g,d,u,v,y,f,b,S,Z]),!S.current||S.current.isSynthetic?i.createElement(i.Fragment,null,(0,Se.Z)("Unknown airing")):S.current.metadataItem.type===te.pG.Episode?i.createElement(q.Z,{metadataItem:S.current.metadataItem}):i.createElement(K.Z,{metadataItem:S.current.metadataItem})}const BT=(0,s.$j)((function(){return(0,o.P1)((e=>e.ui.channelGridPage.metadataList),(0,Db.Z)(),((e,t)=>({metadataListEntityID:e,serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID})))}))((function(e){const{playerType:t,metadataListEntityID:r,serverEntityID:n,providerEntityID:s}=e;return i.createElement("div",{className:"LiveTVUpNext-container-H44BOv"},i.createElement("span",{className:"LiveTVUpNext-icon-f6oRwp"},i.createElement(DM.S,null)),i.createElement(lv.Z,{message:(0,Se.Z)("{openSpan}Up Next:{closeSpan} {openTitle}{closeTitle}"),tags:[{open:"openSpan",close:"closeSpan",component:"span",className:"LiveTVUpNext-upNext-_v_JNL"},{open:"openTitle",close:"closeTitle",component:FT,playerType:t,metadataListEntityID:r,serverEntityID:n,providerEntityID:s}]}))})),_T=function(e){const{playerType:t}=e;return i.createElement(oM,null,i.createElement(xT,{playerType:t}),i.createElement(BT,{playerType:t}))},zT=(0,o.P1)(qn,(e=>e.session));var HT=r(39041),WT=r(90558);function GT(e){const t=e["aria-label"],r=e.className,n=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-player-play-560"};s["aria-hidden"]=!t,s.style=n,s.className=WT.Z.plexIcon+(r?" "+r:"");const a=[i.createElement.apply(i,["path",{d:"M168 476V84l336 196z"}].concat([]))];return t&&a.unshift(i.createElement("title",null,t)),i.createElement.apply(i,["svg",s].concat(a))}GT.propTypes={"aria-label":hb().string,className:hb().string,style:hb().object};const QT=GT;var $T=Object.defineProperty,KT=Object.getOwnPropertySymbols,qT=Object.prototype.hasOwnProperty,YT=Object.prototype.propertyIsEnumerable,XT=(e,t,r)=>t in e?$T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function JT(e){const t=e,{className:r,iconComponent:n,title:s}=t,a=((e,t)=>{var r={};for(var n in e)qT.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&KT)for(var n of KT(e))t.indexOf(n)<0&&YT.call(e,n)&&(r[n]=e[n]);return r})(t,["className","iconComponent","title"]);return i.createElement($o.Z,((e,t)=>{for(var r in t||(t={}))qT.call(t,r)&&XT(e,r,t[r]);if(KT)for(var r of KT(t))YT.call(t,r)&&XT(e,r,t[r]);return e})({"aria-label":s,className:r},a),n?i.createElement(n,{className:"WatchTogetherLobbyControlButton-icon-l81zh5"}):null,s)}JT.defaultProps={className:"WatchTogetherLobbyControlButton-button-GXUJJn Button-button-TxWeuE Link-link-SxPFpG"};const ex=JT,tx="WatchTogetherLobbyControls-button-_Uk0Ny WatchTogetherLobbyControlButton-button-GXUJJn Button-button-TxWeuE Link-link-SxPFpG";function rx(e){const{className:t,elapsedSeconds:r,hasLiveTVProtocol:n,isAnyAdPlaying:s,isAnyWatching:a,isMiniPlayer:o,metadataItemEntityID:l,playerType:c,onPlay:d,onCancel:u}=e,p=(0,i.useCallback)((()=>{u({playerType:c})}),[u,c]),m=n?iD:KM;let h,g;return h=s?(0,Se.Z)("Other viewers are watching ads. Playback will resume automatically when they're done."):a?(0,Se.Z)("Session started {duration} ago.",{duration:(0,HT.Z)(1e3*r)}):(0,Se.Z)("Playback will start automatically when everyone is ready."),g=s?(0,Se.Z)("Please Wait"):r>0?(0,Se.Z)("Resume"):(0,Se.Z)("Start"),i.createElement("div",{className:Ra()(t,o&&"WatchTogetherLobbyControls-hasLandscapePoster-edxok5 PlayerControls-hasLandscapePoster-UYY7sn"),"data-testid":"watchTogetherLobbyControlsContainer"},i.createElement("div",{className:"WatchTogetherLobbyControls-buttonGroupLeft-deoE7U PlayerControls-buttonGroupLeft-M_U9AP PlayerControls-buttonGroup-L3xlI0"},o?i.createElement(ZD,{isMusic:!1,isVideo:!0,playerType:c}):null,i.createElement(m,{metadataItemEntityID:l,playerType:c,positionSeconds:r,showDuration:!1})),i.createElement("div",{className:Ra()("WatchTogetherLobbyControls-buttonGroupCenter-fPAThf PlayerControls-buttonGroupCenter-LDbSmK PlayerControls-buttonGroup-L3xlI0",!n&&"WatchTogetherLobbyControls-balanceLeft-Wg5Y0c PlayerControls-balanceLeft-jE50ih")},i.createElement(ex,{className:tx,iconComponent:QT,isDisabled:s,kind:Jo._8,title:g,onPress:d}),i.createElement(ex,{className:tx,title:(0,Se.Z)("Cancel"),onPress:p})),i.createElement("div",{className:"WatchTogetherLobbyControls-buttonGroupRight-x9l0T5 PlayerControls-buttonGroupRight-Bs12vn PlayerControls-buttonGroup-L3xlI0"},h))}rx.defaultProps={className:"WatchTogetherLobbyControls-controls-qkNZup PlayerControls-controls-PXkgmR"};const nx=rx,ix={onPlay:Qn.Gu,onCancel:Ce.Mh},sx=(0,s.$j)((function(){return(0,o.P1)(zT,(e=>{const{users:t}=e,r=t.filter((e=>e.isWatching));return{elapsedSeconds:r.reduce(((e,t)=>e+t.positionSeconds),0)/r.length||0,isAnyAdPlaying:t.some((e=>e.isAdPlaying)),isAnyWatching:r.length>0}}))}),ix)(nx);function ax(e){const{playerType:t,isAdVisible:r,isMiniPlayer:n,hasLiveTVProtocol:s,isWatchTogetherLobbyVisible:a}=e;return a?null:r?i.createElement(lM,null):n?null:s?i.createElement(_T,{playerType:t}):null}function ox(e){const{playerType:t,isPostPlayVisible:r,isWatchTogetherLobbyVisible:n,isVideo:s,isMusic:a,isAdVisible:o,isMiniPlayer:l,isWatchTogether:c,hasLiveTVProtocol:d,seekStartMilliseconds:u,seekEndMilliseconds:p,bufferStartMilliseconds:m,bufferEndMilliseconds:h,adPositionMilliseconds:g,adDurationMilliseconds:y,onControlsMenuChange:v,onSeekBarInteractionStart:f,onSeekBarInteractionEnd:b}=e;let Z;return Z=n?sx:d?OT:wO,i.createElement(WC,null,ax(e),i.createElement(QC,null,r||n?null:i.createElement(MT,{adDurationMilliseconds:y,adPositionMilliseconds:g,bufferEndMilliseconds:h,bufferStartMilliseconds:m,isAdVisible:o,playerType:t,seekEndMilliseconds:p,seekStartMilliseconds:u,onSeekEnd:b,onSeekStart:f}),i.createElement(sM,{component:Z,hasLiveTVProtocol:d,isAdVisible:o,isMiniPlayer:l,isMusic:a,isVideo:s,isWatchTogether:c,isWatchTogetherLobbyVisible:n,playerType:t,onControlsMenuChange:v})))}ax.propTypes=ox.propTypes,ox.defaultProps={isMiniPlayer:!1};const lx=ox,cx=parseInt(Ul.Z.pagePadding,10),dx=2*cx,ux=cx/2;function px(e,t,r,n,i){let s,a;if(e<t){const t=e-dx-r;s=Math.min(500,t),a=(0,Tw.Cr)(s,n,i)}else{const e=t-(dx+90+r);a=Math.min(500,e),s=(0,Tw.dz)(a,n,i)}return{width:s,height:a}}function mx(e){const{className:t,serverEntityID:r,providerEntityID:n,metadataItemEntityID:s,type:a,subtype:o,context:l,imageUrl:c,bottom:d}=e,u=(0,VM.Z)(a,l,{providerEntityID:n,subtype:o});return i.createElement(kl.Z,{className:"AudioVideoFullMusic-measure-FEuSDT"},(({isMeasured:e,width:o,height:p})=>{if(!e)return null;const m=d?d+ux:0,h=px(o,p,0,a,l);let g;if(m){const e=px(o,p,m,a,l);g=e.height>0?e.height/h.height:1,g=Math.max(g,.4)}else g=1;return i.createElement("div",{className:t,style:{transform:`translate(-50%, -50%) scale(${g})`}},i.createElement(yD.Z,{cardClassName:"AudioVideoFullMusic-card-fQQHI0 MetadataPosterCard-card-NZOemZ",imageHeight:h.height,imageUrl:c,imageWidth:h.width,metadataItemEntityID:s,metadataKey:"music",providerEntityID:n,serverEntityID:r,showLinkOnly:!0,type:a}),i.createElement("div",{className:"AudioVideoFullMusic-titlesContainer-SZZ7aA"},u.map(((e,t)=>i.createElement(TM.Z,{key:t,className:t>0?"AudioVideoFullMusic-secondaryTitle-Tkm0IV AudioVideoFullMusic-title-eOsn4e MetadataPosterTitle-title-bvCBDN":"AudioVideoFullMusic-primaryTitle-zQ4iaF AudioVideoFullMusic-title-eOsn4e MetadataPosterTitle-title-bvCBDN",component:e,metadataItemEntityID:s,providerEntityID:n,serverEntityID:r})))))}))}mx.defaultProps={className:"AudioVideoFullMusic-content-FmEa4l"};const hx=mx,gx=(0,s.$j)((function(){return(0,o.P1)(wb(),(e=>({serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,metadataItemEntityID:e.entityID,context:Ow.r$,type:e.type,imageUrl:e.parentThumb||e.grandparentThumb})))}))(hx),yx=function(e){const{serverEntityID:t,providerEntityID:r,imageUrl:n,allowBlur:s}=e;return i.createElement("div",{className:"FullPlayerBackground-backgroundContainer-nZwql5"},i.createElement(mt,{allowBlur:s,providerEntityID:r,serverEntityID:t,url:n}))},vx=(0,s.$j)((function(){return(0,o.P1)(((e,{isMusic:t})=>t),(0,Db.Z)(),(0,yb.Z)(),ni.Z,((e,t,r={},n)=>{const i=n[t.startMetadataItemEntityID||r.metadataItem];let s;return i&&(s=e?i.parentThumb||i.grandparentThumb:i.grandparentArt||i.art),{serverEntityID:t.serverEntityID,imageUrl:s}}))}))(yx);var fx=r(26352),bx=r(69477),Zx=r(91564),Sx=r(18598),Px=r(89409),Ix=r(52255),Ex=r(55240);function wx(e){const{children:t,className:r}=e;return i.createElement("div",{className:r,"data-testid":"preplay-secondTitle"},t)}wx.defaultProps={className:"PrePlaySecondaryTitle-secondaryTitle-Mncbw7 PrePlayPrimaryTitle-primaryTitle-iRxqZb"};const Cx=wx;function Mx({className:e,children:t}){return i.createElement("div",{className:e,"data-testid":"preplay-thirdTitle"},t)}Mx.defaultProps={className:"PrePlayTertiaryTitle-tertiaryTitle-YG4Kha"};const Dx=Mx;var Ox=r(74084);function Tx(e){const t=e["aria-label"],r=e.className,n=e.style,s={strokeLinejoin:"round",strokeMiterlimit:"1.414",viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",id:"plex-icon-marketing-lyrics-560"};s["aria-hidden"]=!t,s.style=n,s.className=WT.Z.plexIcon+(r?" "+r:"");const a=[i.createElement.apply(i,["path",{d:"m152.241 116.673c5.933-65.31 60.918-116.673 127.75-116.673 66.833 0 121.818 51.363 127.75 116.673h12.268c6.44 0 11.672 5.233 11.672 11.672 0 6.441-5.232 11.673-11.672 11.673h-12.25c-3.675 40.285-26.023 75.197-58.293 96.058l-19.827 231.997c-1.908 21.892-17.5 39.06-37.958 43.82v36.452c0 6.44-5.232 11.673-11.672 11.673s-11.673-5.233-11.673-11.673v-36.592c-20.51-4.97-36.102-22.26-38.01-44.24l-19.792-231.437c-32.305-20.86-54.653-55.756-58.293-96.058h-12.25c-6.44 0-11.672-5.233-11.672-11.673 0-6.439 5.232-11.672 11.672-11.672zm154.14 349.387 18.62-217.665c-14.052 5.25-29.172 8.278-45.01 8.278-15.837 0-30.957-3.045-45.01-8.312l18.568 217.139c1.242 13.982 12.722 24.5 26.74 24.5 13.685 0 24.902-10.29 26.092-23.94zm-38.045-151.059c0-6.441 5.233-11.673 11.673-11.673s11.672 5.233 11.672 11.673v46.672c0 6.439-5.232 11.673-11.672 11.673s-11.673-5.234-11.673-11.673zm11.655-81.674c53.918 0 97.93-40.966 103.81-93.326h-207.62c5.88 52.36 49.893 93.326 103.81 93.326zm103.81-116.672c-5.88-52.36-49.892-93.328-103.81-93.328-53.917 0-97.93 40.969-103.81 93.328z"}].concat([]))];return t&&a.unshift(i.createElement("title",null,t)),i.createElement.apply(i,["svg",s].concat(a))}Tx.propTypes={"aria-label":hb().string,className:hb().string,style:hb().object};const xx=Tx;var Ax=r(98031),kx=r(10078);function Nx(e){const t=e["aria-label"],r=e.className,n=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-player-lyrics-timed-560"};s["aria-hidden"]=!t,s.style=n,s.className=WT.Z.plexIcon+(r?" "+r:"");const a=[i.createElement.apply(i,["path",{d:"M364 84h-56v29.989a194.698 194.698 0 0 1 27.951 6.126 194.755 194.755 0 0 1 24.136 8.966 195.787 195.787 0 0 1 27.995 15.427 197.227 197.227 0 0 1 48.25 45.312A196.461 196.461 0 0 1 454 217.748a194.576 194.576 0 0 1 18.374 52.568A196.97 196.97 0 0 1 476 308c0 8.956-.604 17.911-1.818 26.785a194.966 194.966 0 0 1-6.297 29.166 194.724 194.724 0 0 1-10.968 28.456 196.15 196.15 0 0 1-17.784 29.982 197.385 197.385 0 0 1-51.543 49.428 195.734 195.734 0 0 1-31.878 17.002 194.692 194.692 0 0 1-38.028 11.555 196.89 196.89 0 0 1-37.05 3.625 197.07 197.07 0 0 1-37.117-3.394 194.66 194.66 0 0 1-38.126-11.327 195.651 195.651 0 0 1-31.993-16.815 197.378 197.378 0 0 1-51.839-49.12 196.2 196.2 0 0 1-17.96-29.865 194.83 194.83 0 0 1-11.136-28.372 194.809 194.809 0 0 1-6.473-29.101A197.463 197.463 0 0 1 84 308c0-12.028 1.091-24.054 3.283-35.881a194.544 194.544 0 0 1 17.634-52.258 196.423 196.423 0 0 1 17.69-28.628 197.522 197.522 0 0 1 22.193-25.085 197.243 197.243 0 0 1 26.136-20.985 195.922 195.922 0 0 1 28.434-15.838A194.565 194.565 0 0 1 252 113.989V84h-56V56h168v28zm-83.499 70.001h-1.002c-2.814.013-5.626.093-8.435.253-5.511.315-11.005.924-16.45 1.827a152.77 152.77 0 0 0-37.505 11.318 153.954 153.954 0 0 0-22.375 12.375 155.41 155.41 0 0 0-37.024 34.668 154.38 154.38 0 0 0-13.799 21.452 152.504 152.504 0 0 0-14.78 41.055A154.8 154.8 0 0 0 126 308c0 7.212.496 14.425 1.497 21.568a152.888 152.888 0 0 0 4.872 22.397 152.714 152.714 0 0 0 8.601 22.316 154.23 154.23 0 0 0 14.247 23.934 155.398 155.398 0 0 0 18.231 20.92 155.18 155.18 0 0 0 23.616 18.615 153.646 153.646 0 0 0 23.909 12.522 152.648 152.648 0 0 0 29.855 8.97A154.944 154.944 0 0 0 280 462c9.782 0 19.564-.915 29.172-2.758a152.648 152.648 0 0 0 29.855-8.97 153.71 153.71 0 0 0 25.464-13.533 155.34 155.34 0 0 0 40.02-38.15 154.175 154.175 0 0 0 14.519-24.308 152.67 152.67 0 0 0 8.601-22.316 152.86 152.86 0 0 0 4.872-22.397A155.47 155.47 0 0 0 434 308c0-10.421-1.039-20.841-3.131-31.052a152.544 152.544 0 0 0-14.78-41.055 154.43 154.43 0 0 0-14.366-22.185 155.298 155.298 0 0 0-37.231-34.447 153.835 153.835 0 0 0-21.601-11.862 152.77 152.77 0 0 0-37.505-11.318 154.437 154.437 0 0 0-16.45-1.827c-2.809-.16-5.621-.24-8.435-.253zM252 336V185.167c8.998-2.085 18.374-3.167 28-3.167 34.771 0 66.271 14.115 89.078 36.922L252 336z"}].concat([]))];return t&&a.unshift(i.createElement("title",null,t)),i.createElement.apply(i,["svg",s].concat(a))}Nx.propTypes={"aria-label":hb().string,className:hb().string,style:hb().object};const Rx=Nx,Lx="AudioVideoLyrics-measure-wdru1E",jx="AudioVideoLyrics-rightInfo-hV_K_C",Vx="AudioVideoLyrics-innerContent-WkAJkP";class Ux extends i.Component{constructor(e,t){super(e,t),this.setLineRef=e=>{this.lineRef=e,this.scrollToLine()},this.onContentMeasure=({width:e})=>{this.setState({isMeasured:!0,pageWidth:e})},this.onScrollerMeasure=({height:e})=>{e&&this.setState({isScrollerMeasured:!0,scrollerHeight:e},(()=>{this.scrollToLine()}))},this.onScrollPositionChange=({scrollTop:e})=>{this.setState({scrollTop:e})},this.state={isMeasured:!1,isScrollerMeasured:!1,pageWidth:0,scrollerHeight:0,scrollTop:0}}UNSAFE_componentWillReceiveProps(e){this.props.lines!==e.lines&&this.setState({scrollTop:0})}scrollToLine(){if(!this.lineRef)return;const{scrollerHeight:e,scrollTop:t}=this.state,{height:r}=this.lineRef.getBoundingClientRect(),n=this.lineRef.offsetTop;(n+r>t+e||n<t)&&this.setState({scrollTop:n})}render(){const{serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,type:n,context:s,columnAdjustment:a,imageUrl:o,positionSeconds:l,lines:c,selectedIndex:d,lyricsStreamsCount:u,hasTimedLyrics:p,isTimedLyricsActive:m,hasLyricsError:h,hasLyricsFeature:g,isLyricFindProvider:y,onPreviousPress:v,onNextPress:f,onTimedLyricsPress:b}=this.props,{isMeasured:Z,isScrollerMeasured:S,pageWidth:P,scrollTop:I}=this.state,E=(0,Ox.Z)(P,a),w=(0,Tw.Cr)(E,n,s);return g?i.createElement(kl.Z,{className:Lx,onMeasure:this.onContentMeasure},Z?i.createElement("div",{className:"AudioVideoLyrics-container-vyNHiP"},i.createElement("div",null,i.createElement(yD.Z,{cardClassName:"AudioVideoLyrics-card-jNSb1q MetadataPosterCard-card-NZOemZ",imageHeight:w,imageUrl:o,imageWidth:E,metadataItemEntityID:r,metadataKey:"music",providerEntityID:t,serverEntityID:e,showLinkOnly:!0,type:n})),i.createElement("div",{className:"AudioVideoLyrics-content-dWhDDD"},i.createElement("div",{className:"AudioVideoLyrics-titlesContainer-pzRRGf"},i.createElement(Ix.Z,null,i.createElement(Zx.Z,{metadataItemEntityID:r,providerEntityID:t,serverEntityID:e})),i.createElement(Cx,null,i.createElement(Px.Z,null,i.createElement(Sx.Z,{metadataItemEntityID:r,providerEntityID:t,serverEntityID:e}))),i.createElement(Dx,null,i.createElement(Px.Z,null,y?(0,Se.Z)("Powered by {provider}",{provider:"LyricFind"}):null),i.createElement(Ex.Z,null,i.createElement("span",{className:jx},i.createElement(Jc.Z,{className:Ra()("AudioVideoLyrics-timedLyricsButton-d8RbGL IconButton-button-s4bVCh",m&&"AudioVideoLyrics-isTimedLyricsActive-lE8FqR"),"data-testid":"toggleTimedLyrics",iconComponent:Rx,isDisabled:!p,title:(0,Se.Z)("Timed Lyrics"),onPress:b})),i.createElement("span",{className:jx},(0,Se.Z)("{selectedIndex} of {lyricsStreamsCount}",{selectedIndex:d+1,lyricsStreamsCount:u})),i.createElement("span",{className:jx},i.createElement(Jc.Z,{"data-testid":"previousLyricsPage",iconComponent:kx.Z,isDisabled:0===d,title:(0,Se.Z)("Previous"),onPress:v})),i.createElement("span",{className:jx},i.createElement(Jc.Z,{"data-testid":"nextLyricsPage",iconComponent:Ax.Z,isDisabled:d===u-1,title:(0,Se.Z)("Next"),onPress:f}))))),h?i.createElement("div",{className:Vx},i.createElement(aa.Z,{title:(0,Se.Z)("There was an error loading the lyrics")})):null,h?null:i.createElement("div",{className:Vx},i.createElement(kl.Z,{className:Lx,onMeasure:this.onScrollerMeasure},S?i.createElement(vc.Z,{className:"AudioVideoLyrics-scroller-OlRs7f Scroller-vertical-nKq0Q8",scrollTop:I,onScrollPositionChange:this.onScrollPositionChange},c.length?c.map((({spans:e,startOffset:t,endOffset:r},n)=>{const s=Math.round(t/1e3),a=Math.round(r/1e3),o=m&&l>=s&&-1!==t&&(l<a||-1===r);return i.createElement("div",{key:n,ref:o?this.setLineRef:null,className:Ra()("AudioVideoLyrics-line-BbPBPC",o&&"AudioVideoLyrics-isLineSelected-lyozox")},e.map((({text:e},t)=>i.createElement("span",{key:t},e))),i.createElement(Rx,{className:"AudioVideoLyrics-lineTimedIcon-WXd6DQ"}))})):i.createElement(dl.Z,{className:"AudioVideoLyrics-spinner-c5_HkU Spinner-spinner-XTaskc spin-spin-H8VRGl"})):null)))):null):i.createElement("div",{className:"AudioVideoLyrics-upsellContainer-nsWjx9"},i.createElement(fx.Z,{iconComponent:xx,text:(0,Se.Z)("Still think Elton is saying Hold me closer, Tony Danza? With a Plex Pass, enjoy timed lyrics (when available) to your favorite songs for the ultimate sing-along with the right words!"),title:(0,Se.Z)("Song Lyrics")}),i.createElement(bx.Z,{modalMetricsProperties:{context:"lyrics"},origin:zp.ap,serverEntityID:e}))}}const Fx=Ux;var Bx=Object.defineProperty,_x=Object.getOwnPropertySymbols,zx=Object.prototype.hasOwnProperty,Hx=Object.prototype.propertyIsEnumerable,Wx=(e,t,r)=>t in e?Bx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Gx(e){return!(!e||!e.timed)}const Qx={dispatchFetchPlayQueue:Xb.Ai,dispatchFetchPlayQueueItemLyrics:Xb.KA};class $x extends i.Component{constructor(e,t){super(e,t),this.onPreviousPress=()=>{this.setState((e=>({selectedLyricsStreamIndex:Math.max(0,e.selectedLyricsStreamIndex-1)})))},this.onNextPress=()=>{this.setState(((e,t)=>({selectedLyricsStreamIndex:Math.min(t.lyricsStreams.length-1,e.selectedLyricsStreamIndex+1)})))},this.onTimedLyricsPress=()=>{this.setState((e=>({isTimedLyricsActive:!e.isTimedLyricsActive})))},this.state=this.getDefaultState(e)}componentDidMount(){this._populate(),this.props.hasPremiumLyrics&&this.props.hasLyricsFeature&&this.props.dispatchFetchPlayQueue({playerType:this.props.playerType})}UNSAFE_componentWillReceiveProps(e){this.props.lyricsStreams!==e.lyricsStreams&&this.setState(this.getDefaultState(e,this.state.selectedLyricsStreamIndex))}UNSAFE_componentWillUpdate(e,t){if(this.state.selectedLyricsStreamIndex!==t.selectedLyricsStreamIndex){const r=e.lyricsStreams[t.selectedLyricsStreamIndex];this.setState({isTimedLyricsActive:Gx(r)})}}componentDidUpdate(e,t){const r=this.props.lyricsStreams[this.state.selectedLyricsStreamIndex];this.props.hasLyricsFeature!==e.hasLyricsFeature&&this.props.dispatchFetchPlayQueue({playerType:this.props.playerType}),!r||r.lyricsError||this.state.selectedLyricsStreamIndex===t.selectedLyricsStreamIndex&&this.props.lyricsStreams===e.lyricsStreams||this._populate()}getDefaultState(e,t=0){const r=e.lyricsStreams.length>0?t:null;return{isTimedLyricsActive:Gx(e.lyricsStreams[r]),selectedLyricsStreamIndex:r}}_populate(){const{playerType:e,playQueueItemEntityID:t,lyricsStreams:r}=this.props,{selectedLyricsStreamIndex:n}=this.state;if(null==n)return;const i=r[n];i&&!i.lines.length&&this.props.dispatchFetchPlayQueueItemLyrics({playerType:e,playQueueItemEntityID:t,streamID:i.id})}render(){const e=this.props,{dispatchFetchPlayQueue:t,dispatchFetchPlayQueueItemLyrics:r,lyricsStreams:n}=e,s=((e,t)=>{var r={};for(var n in e)zx.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&_x)for(var n of _x(e))t.indexOf(n)<0&&Hx.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchFetchPlayQueue","dispatchFetchPlayQueueItemLyrics","lyricsStreams"]),{isTimedLyricsActive:a,selectedLyricsStreamIndex:o}=this.state,l=n[o];return i.createElement(Fx,((e,t)=>{for(var r in t||(t={}))zx.call(t,r)&&Wx(e,r,t[r]);if(_x)for(var r of _x(t))Hx.call(t,r)&&Wx(e,r,t[r]);return e})({hasLyricsError:!!l&&!!l.lyricsError,hasTimedLyrics:Gx(l),isLyricFindProvider:!!l&&l.provider===_u.$Z,isTimedLyricsActive:a,lines:null!=l?l.lines:[],lyricsStreamsCount:n.length,selectedIndex:o,onNextPress:this.onNextPress,onPreviousPress:this.onPreviousPress,onTimedLyricsPress:this.onTimedLyricsPress},s))}}const Kx=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),QZ(),wb(),(0,yb.Z)(),St.Z,((e,t,r,n,i)=>{const s=Ow.r$;return{serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,metadataItemEntityID:r.entityID,playQueueItemEntityID:n.entityID,positionSeconds:e.positionSeconds,context:s,type:r.type,imageUrl:r.parentThumb||r.grandparentThumb,lyricsStreams:n.lyricsStreams,columnAdjustment:i.columnAdjustment,hasLyricsFeature:!!n.lyricsStreams.length||t.ownerFeatures&&t.ownerFeatures.indexOf("lyrics")>-1,hasPremiumLyrics:n.hasPremiumLyrics}}))}),Qx)($x);var qx=r(57728),Yx=r(53942);const Xx=[.2,.4,.6,.8];function Jx(e,t,r,n){if(r+1<n){const n=r-t-e;if(n<Xx.length)return Xx[n]}return 1}var eA=r(49510);function tA(){return(0,o.P1)(((e,{playQueueItemEntityID:t})=>t),eA.Z,((e,t)=>t[e]))}var rA=r(67699),nA=r(51861),iA=r(55550),sA=r(27305),aA=r(25432),oA=r(88638),lA=r(40621);function cA(e){const{className:t,playButtonClassName:r,playCircleClassName:n,serverEntityID:s,providerEntityID:a,imageWidth:o,imageHeight:l,imageUrl:c,title:d,isLiveTVItem:u,recordLink:p,onRecordPress:m,onPlayPress:h}=e;return i.createElement(oA.Z,{className:t,component:lA.Z,height:l,providerEntityID:a,serverEntityID:s,url:c,width:o},u?i.createElement(aA.Z,{circleClassName:"MetadataPosterButtonCard-recordCircle-nH4nXf RecordIcon-recordCircle-nPg1p4 PlayButton-playCircle-fK1f_v",className:"MetadataPosterButtonCard-recordButton-E5e5v8 RecordIcon-recordIconContainer-iZKuO3","data-testid":"metadataPosterRecordButton",tabIndex:"-1",title:d,to:p,onPress:m}):i.createElement(vC.Z,{circleClassName:n,className:r,"data-testid":"metadataPosterPlayButton",tabIndex:"-1",title:d,onPress:h}))}cA.defaultProps={className:"MetadataPosterButtonCard-card-TT2yq7",playButtonClassName:"MetadataPosterButtonCard-playButton-FeLknx PlayButton-playButton-vS1WII",playCircleClassName:"MetadataPosterButtonCard-playCircle-Avpul9 PlayButton-playCircle-fK1f_v",isLiveTVItem:!1};const dA=cA;function uA(e){const{className:t,titlesContainerClassName:r,sourceTextClassName:n,durationContainerClassName:s,serverEntityID:a,providerEntityID:o,metadataItemEntityID:l,type:c,subtype:d,metadataKey:u,title:p,duration:m,isPreview:h,context:g,imageWidth:y,imageHeight:v,imageUrl:f,onPlayPress:b}=e,Z=(0,VM.Z)(c,g,{providerEntityID:o,subtype:d});let S="";return m&&(S=h?(0,Se.Z)("Preview"):c===Tb.TRACK?(0,$S.Z)(m):(0,HT.Z)(m)),i.createElement("div",{className:t},i.createElement("div",{className:"AudioVideoPlayerPlayQueueMetadata-cardContainer-YaEwYK"},i.createElement(dA,{className:"AudioVideoPlayerPlayQueueMetadata-card-eFDGn2 MetadataPosterButtonCard-card-TT2yq7",imageHeight:v,imageUrl:f,imageWidth:y,metadataItemEntityID:l,metadataKey:u,providerEntityID:o,serverEntityID:a,title:(0,Se.Z)("Play {title}",{title:p}),type:c,onPlayPress:b})),i.createElement("div",{className:r,"data-testid":"playQueueTitleContainer"},Z.map(((e,t)=>i.createElement(TM.Z,{key:t,component:e,isSecondary:t>0,metadataItemEntityID:l,providerEntityID:o,serverEntityID:a})))),i.createElement(sA.Z,{metadataItemEntityID:l,serverEntityID:a,textClassName:n}),S?i.createElement("div",{className:s},S):null)}uA.defaultProps={className:"AudioVideoPlayerPlayQueueMetadata-container-a813zv",titlesContainerClassName:"AudioVideoPlayerPlayQueueMetadata-titlesContainer-ndQha4",sourceTextClassName:"AudioVideoPlayerPlayQueueMetadata-sourceText-FWZTXl",durationContainerClassName:"AudioVideoPlayerPlayQueueMetadata-durationContainer-dDrbIT"};const pA=uA;var mA=Object.defineProperty,hA=Object.defineProperties,gA=Object.getOwnPropertyDescriptors,yA=Object.getOwnPropertySymbols,vA=Object.prototype.hasOwnProperty,fA=Object.prototype.propertyIsEnumerable,bA=(e,t,r)=>t in e?mA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ZA=(e,t)=>{for(var r in t||(t={}))vA.call(t,r)&&bA(e,r,t[r]);if(yA)for(var r of yA(t))fA.call(t,r)&&bA(e,r,t[r]);return e};const SA=(0,s.$j)((function(){return(0,o.P1)((0,WP.Z)(),(e=>{const t=Ow.F5,r=(0,Tw.n3)(e.type,t)===Tw.oz?64:36,n=(0,sI.Z)(r,null,e.type,e,t);return{serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,type:e.type,subtype:e.subtype,metadataKey:e.key,duration:e.duration,title:e.title,isPreview:!!e.preview,context:t,imageWidth:n.width,imageHeight:n.height,imageUrl:n.url}}))}),(function(e,t){const r={playerType:t.playerType};return{onPlayPress(){e((0,Xb.gP)(((e,t)=>hA(e,gA(t)))(ZA({},r),{index:t.sortIndex}))),t.mediaType===og.pX&&e((0,Xb.D5)(r))}}}))((function(e){const t=e,{mediaType:r}=t,n=((e,t)=>{var r={};for(var n in e)vA.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&yA)for(var n of yA(e))t.indexOf(n)<0&&fA.call(e,n)&&(r[n]=e[n]);return r})(t,["mediaType"]);return i.createElement(pA,ZA({},n))})),PA={.2:"AudioVideoPlayQueueItem-opacity20Percent-xYgIOe",.4:"AudioVideoPlayQueueItem-opacity40Percent-rtxnPq",.6:"AudioVideoPlayQueueItem-opacity60Percent-UEBrQ9",.8:"AudioVideoPlayQueueItem-opacity80Percent-dwpDH0"};function IA(e){const{metadataItemEntityID:t,playerType:r,mediaType:n,sortIndex:s,opacity:a,isCurrentItem:o,isPlayerPaused:l,isItemDragging:c,connectDragSource:d,onRemovePress:u}=e;return i.createElement("div",{className:Ra()("AudioVideoPlayQueueItem-container-eFsnAY",c&&"AudioVideoPlayQueueItem-isItemDragging-NgdCJR",o&&"AudioVideoPlayQueueItem-isCurrentItem-d_wel0",null!=a&&PA[a]),"data-testid":"playQueueItem"},i.createElement("div",{className:"AudioVideoPlayQueueItem-leftContainer-KKhwv9"},o?i.createElement(rA.Z,{isPaused:l}):null,o?null:d(i.createElement("div",{className:"AudioVideoPlayQueueItem-moveControls-YPFEj8","data-testid":"playQueueReorder"},i.createElement(iA.Z,null)))),i.createElement(SA,{className:"AudioVideoPlayQueueItem-metadataContainer-VJuyN1 AudioVideoPlayerPlayQueueMetadata-container-a813zv",durationContainerClassName:"AudioVideoPlayQueueItem-metadataDurationContainer-z89eyc AudioVideoPlayerPlayQueueMetadata-durationContainer-dDrbIT",mediaType:n,metadataItemEntityID:t,playerType:r,sortIndex:s,sourceTextClassName:"AudioVideoPlayQueueItem-sourceText-jLDssz SourceBadge-text-k0_hzv"}),o?null:i.createElement("div",{className:"AudioVideoPlayQueueItem-removeControls-e9A2CD"},i.createElement(Jc.Z,{className:"AudioVideoPlayQueueItem-removeButton-W30qxb IconButton-button-s4bVCh","data-testid":"playQueueRemove",iconComponent:nA.Z,kind:Jo.T,title:(0,Se.Z)("Remove"),onPress:u})))}IA.defaultProps={opacity:1,isCurrentItem:!1,isPlayerPaused:!1,isItemDragging:!1,connectDragSource:e=>e};const EA=IA,wA=(0,s.$j)((function(){return(0,o.P1)(tA(),(e=>{const t=(0,Tb.getMetadataType)(e.type),r=t&&t.mediaType;return{metadataItemEntityID:e.metadataItem,mediaType:r}}))}),(function(e,t){return{onRemovePress(r){e((0,Xb.yg)({playerType:t.playerType,playQueueItemEntityID:t.playQueueItemEntityID}))}}}))(EA),CA=parseInt(Ul.Z.playQueueSidePadding,10);class MA extends i.Component{shouldComponentUpdate(e,t){return(0,tu.Z)(this,e,t)}render(){const{playerType:e,item:t,itemType:r,currentOffset:n}=this.props;if(!n||r!==jl.PI)return null;const{x:s,y:a}=n,o=`translate3d(${s}px, ${a}px, 0)`,l={position:"absolute",WebkitTransform:o,msTransform:o,transform:o,width:window.innerWidth-2*CA+"px"};return i.createElement(Ll.Z,null,i.createElement("div",{className:"AudioVideoPlayQueueDragPreview-dragPreview-WFloJC",style:l},i.createElement(wA,{isItemDragging:!0,playQueueItemEntityID:t.playQueueItemEntityID,playerType:e})))}}const DA=(0,Rl.r)((function(e){return{item:e.getItem(),itemType:e.getItemType(),currentOffset:e.getSourceClientOffset()}}))(MA);var OA=Object.defineProperty,TA=Object.getOwnPropertySymbols,xA=Object.prototype.hasOwnProperty,AA=Object.prototype.propertyIsEnumerable,kA=(e,t,r)=>t in e?OA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const NA={beginDrag:({playQueueItemEntityID:e})=>({playQueueItemEntityID:e}),endDrag(e,t,r){e.onPlayQueueItemDragEnd(t.getItem(),t.didDrop())}},RA={hover(e,t,r){const n=(0,Gl.findDOMNode)(r).getBoundingClientRect(),i=(n.bottom-n.top)/2,s=t.getClientOffset().y-n.top,a=e.sortIndex,o=s>i?a+1:a;e.onPlayQueueItemDragMove(o)}};class LA extends i.Component{componentDidMount(){this.props.connectDragPreview((0,Wl.r)())}shouldComponentUpdate(e,t){return(0,tu.Z)(this,e,t)}render(){const e=this.props,{isDragging:t,isDraggingBefore:r,isDraggingAfter:n,isOver:s,connectDropTarget:a,connectDragSource:o}=e,l=((e,t)=>{var r={};for(var n in e)xA.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&TA)for(var n of TA(e))t.indexOf(n)<0&&AA.call(e,n)&&(r[n]=e[n]);return r})(e,["isDragging","isDraggingBefore","isDraggingAfter","isOver","connectDropTarget","connectDragSource"]);return a(i.createElement("div",{className:Ra()("AudioVideoPlayQueueItemDragSource-container-QBGSTl",t&&Ql.fN,r&&s&&Ql.DT,n&&s&&Ql.QZ)},i.createElement(wA,((e,t)=>{for(var r in t||(t={}))xA.call(t,r)&&kA(e,r,t[r]);if(TA)for(var r of TA(t))AA.call(t,r)&&kA(e,r,t[r]);return e})({connectDragSource:o},l))))}}const jA=(0,zl.G)(jl.PI,RA,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))((0,Hl.E)(jl.PI,NA,(function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(LA)),VA=function(e){const{title:t}=e;return i.createElement("div",{className:"AudioVideoFullPlayerContentHeading-heading-ctpALe"},t)},UA=function(e){const{children:t}=e;return i.createElement("div",{className:"AudioVideoFullPlayerContentHeadingContainer-headingContainer-kf2foD"},t,i.createElement("div",{className:"AudioVideoFullPlayerContentHeadingContainer-divider-UdGkrP"}))};class FA extends i.Component{constructor(e,t){super(e,t),this.onAddToPlaylistPress=()=>{this.setState({isAddToPlaylistModalOpen:!0})},this.onAddToPlaylistClose=()=>{this.setState({isAddToPlaylistModalOpen:!1})},this.state={isAddToPlaylistModalOpen:!1}}render(){const{serverEntityID:e,providerEntityID:t,playQueueID:r,playQueueItemEntityIDs:n,playQueueSelectedItemOffset:s,playQueueLength:a,playerType:o,currentIndex:l,moveIndex:c,scrollTop:d,isPlayerPaused:u,showAddToPlaylist:p,onPlayQueueItemDragMove:m,onPlayQueueItemDragEnd:h}=this.props,{isAddToPlaylistModalOpen:g}=this.state,y=s-l,v=y+n.length-1;return i.createElement("div",{className:"AudioVideoPlayQueue-container-EEXkSe"},i.createElement(UA,null,i.createElement(VA,{title:(0,Se.Z)("Play Queue")}),i.createElement("div",{className:"AudioVideoPlayQueue-topContainer-LUFN0l"},i.createElement("div",{className:"AudioVideoPlayQueue-topLeft-lNQ5jF"},i.createElement("span",{className:"AudioVideoPlayQueue-count-QTkd3b"},1===a?(0,Se.Z)("{itemCount} item",{itemCount:a}):(0,Se.Z)("{itemCount} items",{itemCount:a}))),i.createElement("div",{className:"AudioVideoPlayQueue-topRight-Jgi_Vk"},p?i.createElement(Go.Z,{"aria-label":(0,Se.Z)("Add to Playlist"),className:"AudioVideoPlayQueue-tooltipButton-_iSUzZ",component:Wo.Z,"data-testid":"queueAddPlaylist",tooltip:(0,Se.Z)("Add to Playlist"),onPress:this.onAddToPlaylistPress},i.createElement(qx.K,null)):null))),i.createElement(vc.Z,{autoScroll:!0,className:"AudioVideoPlayQueue-content-qs6dmY Scroller-vertical-nKq0Q8",scrollTop:d,smoothScroll:!1},n.map(((e,t)=>{const r=null!=c,n=l===t,s=r&&c===t,d=r&&c===t+1;return i.createElement(jA,{key:e,isCurrentItem:n,isDraggingAfter:d,isDraggingBefore:s,isPlayerPaused:u,opacity:Jx(t,y,v,a),playQueueItemEntityID:e,playerType:o,sortIndex:t,onPlayQueueItemDragEnd:h,onPlayQueueItemDragMove:m})}))),i.createElement(DA,{playerType:o}),p?i.createElement(Yx.Z,{isOpen:g,playQueueID:r,providerEntityID:t,serverEntityID:e,onModalClose:this.onAddToPlaylistClose}):null)}}const BA=FA;var _A=Object.defineProperty,zA=Object.defineProperties,HA=Object.getOwnPropertyDescriptors,WA=Object.getOwnPropertySymbols,GA=Object.prototype.hasOwnProperty,QA=Object.prototype.propertyIsEnumerable,$A=(e,t,r)=>t in e?_A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,KA=(e,t)=>{for(var r in t||(t={}))GA.call(t,r)&&$A(e,r,t[r]);if(WA)for(var r of WA(t))QA.call(t,r)&&$A(e,r,t[r]);return e};const qA=parseInt(Ul.Z.playQueueItemHeight,10),YA=(0,o.P1)((e=>e.ui.audioVideoPlayer),QZ(),By(),((e,t,r)=>{const n=e.playQueue,i=Mt.wB(r.identifier,Mt.Y3),s=!n.isLocal&&i;return{serverEntityID:t.entityID,providerEntityID:r.entityID,playQueueID:n.playQueueID,isQueueRepeated:n.repeat,isQueueShuffled:n.playQueueShuffled,isPlayerPaused:e.isPaused,isUpdatePending:n.isUpdatePending,playQueueItemEntityIDs:n.playQueueItems,playQueueSelectedItemOffset:n.playQueueSelectedItemOffset,playQueueLength:n.length,currentIndex:n.currentIndex,showAddToPlaylist:s}})),XA={dispatchMovePlayQueueItem:Xb.FX};class JA extends i.Component{constructor(e,t){super(e,t),this.onPlayQueueItemDragMove=e=>{e!==this.state.moveIndex&&this.setState({moveIndex:e})},this.onPlayQueueItemDragEnd=(e,t)=>{const{playerType:r}=this.props,{moveIndex:n}=this.state;t&&null!=n&&(0,W.c9)((()=>{this.props.dispatchMovePlayQueueItem(((e,t)=>zA(e,HA(t)))(KA({playerType:r},e),{moveIndex:n}))})),this.setState({moveIndex:null})},this.onScrollPositionChange=({scrollTop:e})=>{this.setState({scrollTop:e})},this.shouldUpdateScrollTop=!1,this.state={moveIndex:null,scrollTop:qA*e.currentIndex}}UNSAFE_componentWillReceiveProps(e){this.props.isQueueRepeated===e.isQueueRepeated&&this.props.isQueueShuffled===e.isQueueShuffled||(this.shouldUpdateScrollTop=!0),this.shouldUpdateScrollTop&&this.props.currentIndex!==e.currentIndex&&this.setState({scrollTop:qA*e.currentIndex}),this.props.isUpdatePending&&!e.isUpdatePending&&(this.shouldUpdateScrollTop=!1)}render(){const e=this.props,{dispatchMovePlayQueueItem:t}=e,r=((e,t)=>{var r={};for(var n in e)GA.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&WA)for(var n of WA(e))t.indexOf(n)<0&&QA.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchMovePlayQueueItem"]),{moveIndex:n,scrollTop:s}=this.state;return i.createElement(BA,KA({moveIndex:n,scrollTop:s,onPlayQueueItemDragEnd:this.onPlayQueueItemDragEnd,onPlayQueueItemDragMove:this.onPlayQueueItemDragMove,onScrollPositionChange:this.onScrollPositionChange},r))}}const ek=(0,s.$j)(YA,XA)(JA);var tk=r(53623);const rk=(0,o.P1)(tk.Z,(e=>e.hubs));function nk(){return(0,o.P1)(((e,{hubEntityID:t})=>t),rk,((e,t)=>t[e]))}var ik=r(99735),sk=r(53461);var ak=r(61661),ok=r(59258);const lk=hb().shape({key:hb().string,hubKey:hb().string,title:hb().string,icon:hb().string,type:hb().string,subtype:hb().string,agent:hb().string,updatedAt:hb().number,scannedAt:hb().number,context:hb().string});var ck=r(19485),dk=r(26265),uk=Object.defineProperty,pk=Object.defineProperties,mk=Object.getOwnPropertyDescriptors,hk=Object.getOwnPropertySymbols,gk=Object.prototype.hasOwnProperty,yk=Object.prototype.propertyIsEnumerable,vk=(e,t,r)=>t in e?uk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fk=(e,t)=>{for(var r in t||(t={}))gk.call(t,r)&&vk(e,r,t[r]);if(hk)for(var r of hk(t))yk.call(t,r)&&vk(e,r,t[r]);return e},bk=(e,t)=>pk(e,mk(t));const Zk={};function Sk(e,t,r=0,n=0){const i=e+t+r+n;if(Zk.hasOwnProperty(i))return Zk[i];const s=(0,Tw.n3)(e,t),{titleHeight:a,minCellWidth:o,preferredCellWidth:l,minColumns:c,maxColumns:d}=(0,dk.Z)({type:e,aspectRatio:s,titleCount:n,context:t}),u=(0,Cw.ZP)({direction:Cw._y,rows:1,overscan:0,innerHorizontalPadding:30,innerVerticalPadding:30,outerPaddingTop:10,outerPaddingRight:5,outerPaddingBottom:5,outerPaddingLeft:5,getCellWidth:e=>(0,Dw.Z)(bk(fk({},e),{preferredCellWidth:l,minCellWidth:o,minColumns:c,maxColumns:d,columnAdjustment:r})),getCellHeight:e=>(0,Mw.Z)(bk(fk({},e),{aspectRatio:s,titleHeight:a}))});return u.cellOptions={preferredCellWidth:l,minCellWidth:o,minColumns:c,maxColumns:d,columnAdjustment:r,aspectRatio:s,titleHeight:a},Zk[i]=u,u}var Pk=r(64520),Ik=Object.defineProperty,Ek=Object.defineProperties,wk=Object.getOwnPropertyDescriptors,Ck=Object.getOwnPropertySymbols,Mk=Object.prototype.hasOwnProperty,Dk=Object.prototype.propertyIsEnumerable,Ok=(e,t,r)=>t in e?Ik(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Tk=function(e){const t=e,{metadataListEntityID:r,metadataItemEntityIDs:n,metricsContext:s,containerKey:a,listType:o,listSubtype:l,listContext:c,columnAdjustment:d,populatedRange:u,displayFieldDefinitions:p,displayFields:m}=t,h=((e,t)=>{var r={};for(var n in e)Mk.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ck)for(var n of Ck(e))t.indexOf(n)<0&&Dk.call(e,n)&&(r[n]=e[n]);return r})(t,["metadataListEntityID","metadataItemEntityIDs","metricsContext","containerKey","listType","listSubtype","listContext","columnAdjustment","populatedRange","displayFieldDefinitions","displayFields"]),{serverEntityID:g,providerEntityID:y,hubIdentifier:v}=h,f=(0,VM.Z)(o,c,{providerEntityID:y,subtype:l,isExternal:v.indexOf("external")>-1,displayFields:m}),b=Sk(o,c,d,f.length);return i.createElement(Sw,((e,t)=>Ek(e,wk(t)))(((e,t)=>{for(var r in t||(t={}))Mk.call(t,r)&&Ok(e,r,t[r]);if(Ck)for(var r of Ck(t))Dk.call(t,r)&&Ok(e,r,t[r]);return e})({},h),{cellRenderer:(0,Hw.Z)({serverEntityID:g,providerEntityID:y,metadataListEntityID:r,containerKey:a,listType:o,listSubtype:l,listContext:c,titleComponents:f,displayFieldDefinitions:p,displayFields:m,isCondensed:!0,metricsContext:s},Pk.Z),containerKey:a,items:n,itemsOffset:u.start,keyPropName:"metadataItemEntityID",layout:b}))};var xk=r(90684),Ak=Object.defineProperty,kk=Object.defineProperties,Nk=Object.getOwnPropertyDescriptors,Rk=Object.getOwnPropertySymbols,Lk=Object.prototype.hasOwnProperty,jk=Object.prototype.propertyIsEnumerable,Vk=(e,t,r)=>t in e?Ak(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Uk=(0,qc.Z)((function(){return(0,o.P1)(((e,{listContext:t})=>t),((e,{allowSourceTitle:t})=>t),((e,{metricsPage:t})=>t),(0,Lc.Z)(),(0,sk.Z)(),nk(),(0,o.P1)((0,ik.Z)((0,sk.Z)(),["identifier","title","sourceTitle"]),(0,ik.Z)((0,Lc.Z)(),["friendlyName","sourceTitle"]),((e,t)=>function(e={},t={}){const{identifier:r,title:n,sourceTitle:i}=e,{friendlyName:s,sourceTitle:a}=t;let o;return Mt.wB(r,Mt.Y3)?o=a||s:n&&(o=i?`${n}  ${i}`:n),o}(e,t))),((e,t,r,n,i,s,a)=>{var o;const l=s.hubIdentifier.indexOf("music.video")>-1?ok.nW:s.type,c=e||function(e,t=Ow.Y3){switch(e){case"home.continue":return Ow.wl;case"home.recommended":return Ow.g$;case"home.watchTogether":return Ow.Bs;default:return t}}(s.hubIdentifier),d=(0,ak.Z)(r,s.context||s.hubIdentifier);let u;if(s.key&&c!==Ow.wl){const e={key:s.key,title:s.title,pageType:Ac.IY,context:d};u=s.source?(0,Tn.Z)(s.source,e):(0,ck.Z)(n,i,e)}const p={component:Tk,metadataListEntityID:s.metadataList,metricsContext:d,hubIdentifier:s.hubIdentifier,title:s.title,sourceTitle:t?a:null,attribution:s.attribution,route:u,style:s.style,size:s.size,more:s.more,random:s.random,autoAdvanceDelayMs:s.autoAdvanceDelayMs,displayFieldDefinitions:null==(o=s.Meta)?void 0:o.DisplayFields,containerKey:s.key,listType:l,listSubtype:s.subtype,listContext:c};if(s.source){const{serverEntityID:e,providerEntityID:t}=function(e){if(!e)return;let t,r;const n=e.match(/^server:\/\/(.*)\/(.*)/);if(n)t=n[1],r=n[2];else{const n=e.match(/^provider:\/\/(.*)/);if(!n)return;t=Dt.X,r=n[1]}const i=(0,ku.Z)(Nu.cN,t);return{serverEntityID:i,providerEntityID:(0,ku.Z)(Nu.MC,r,i)}}(s.source);p.serverEntityID=e,p.providerEntityID=t}return p}))}))(xk.Z);Uk.propTypes=((e,t)=>kk(e,Nk(t)))(((e,t)=>{for(var r in t||(t={}))Lk.call(t,r)&&Vk(e,r,t[r]);if(Rk)for(var r of Rk(t))jk.call(t,r)&&Vk(e,r,t[r]);return e})({},Uk.propTypes),{providerEntityID:hb().string.isRequired,serverEntityID:hb().string.isRequired,hubEntityID:hb().string.isRequired,sourceDirectory:lk,allowSourceTitle:hb().bool});const Fk=Uk,Bk={opacity:0,pointerEvents:"none"},_k={opacity:1,pointerEvents:"auto"};class zk extends i.Component{constructor(e,t){super(e,t),this.onListReady=()=>{++this._readyCount===this._initialCount&&this.setState({isReady:!0})},this.state={isReady:!1},this._readyCount=0}UNSAFE_componentWillMount(){this._initialCount=this.props.hubEntityIDs.length}UNSAFE_componentWillReceiveProps(e){const t=e.hubEntityIDs.length,r=this.props.hubEntityIDs.length;this.state.isReady||t===r||(this._initialCount=t,this._readyCount===t&&this.setState({isReady:!0}))}shouldComponentUpdate(e,t){return(0,tu.Z)(this,e,t)}render(){const{allowHomeHubIndicator:e,allowPersistentHomeHubStatus:t,allowToggleHomeHub:r,allowSourceTitle:n,className:s,serverEntityID:a,providerEntityID:o,directoryKey:l,hubEntityIDs:c,sourceDirectory:d,columnAdjustment:u,listContext:p}=this.props,{isReady:m}=this.state;return i.createElement("div",{className:s,style:m?_k:Bk},c.map((s=>i.createElement(Fk,{key:s,allowHomeHubIndicator:e,allowPersistentHomeHubStatus:t,allowSourceTitle:n,allowToggleHomeHub:r,columnAdjustment:u,directoryKey:l,hubEntityID:s,listContext:p,providerEntityID:o,serverEntityID:a,sourceDirectory:d,onListReady:this.onListReady}))))}}const Hk=zk;var Wk=r(75255),Gk=r(82486),Qk=r(10862);const $k=function(e){const{title:t,summary:r}=e;return i.createElement(i.Fragment,null,i.createElement(Wk.Z,null,i.createElement(Ix.Z,null,i.createElement(Px.Z,null,t))),i.createElement(Gk.Z,null),i.createElement(Wk.Z,null,i.createElement(Qk.Z,null,r)))};var Kk=r(91023),qk=r(57557),Yk=r(27387);var Xk=Object.defineProperty,Jk=Object.getOwnPropertySymbols,eN=Object.prototype.hasOwnProperty,tN=Object.prototype.propertyIsEnumerable,rN=(e,t,r)=>t in e?Xk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function nN(e){return i.createElement("div",{className:"PrePlayAttributionLogo-attributionLogo-ZJc7rR"},i.createElement(Yk.Z,((e,t)=>{for(var r in t||(t={}))eN.call(t,r)&&rN(e,r,t[r]);if(Jk)for(var r of Jk(t))tN.call(t,r)&&rN(e,r,t[r]);return e})({},e)))}var iN=r(15997),sN=r(83395);function aN(){return(0,o.P1)((0,iN.Z)(),(0,WP.Z)(),((e,t)=>{if(t)return(0,sN.Z)(e,t.librarySectionID)}))}var oN=r(62934);function lN(e){const{className:t,linkClassName:r,server:n,provider:s,sourceDirectory:a,fallbackFilterKey:o,type:l,tags:c,limit:d}=e;if(!c||!c.length)return null;const u=l&&(0,Tb.getMetadataType)(l);return i.createElement("span",{className:t},c.map(((e,t)=>{if(t>=d)return;let l;if(e.directory&&e.key&&a)l=(0,Rc.Z)(n,s,a,{key:e.key,title:e.tag});else if((e.filter||e.id)&&a){const t={filters:e.filter,filterLabel:e.tag};!t.filter&&o&&e.id&&(t.filters=`${o}=${e.id}`),u&&(t.type=u.id),e.context&&(t.context=e.context),l=function(e,t,r,n={},i){if(r){const e=r.pivots.find((({key:e})=>e.includes(r.key)));n.key=t.identifier===Mt.Y3?e.key:r.key}return(0,Rc.Z)(e,t,r,n,i)}(n,s,a,t)}return i.createElement("span",{key:t},i.createElement(Wo.Z,{className:r,isDisabled:!l,to:l},e.tag),t+1<d&&t+1<c.length?", ":null)})))}lN.defaultProps={linkClassName:"PrePlayTagList-tagsListLink-STf9ew Link-link-SxPFpG",limit:1/0};const cN=lN;var dN=r(95352),uN=r(20946);function pN(e){const{children:t,server:r,provider:n,sourceDirectory:s,type:a,Director:o,Writer:l,Studio:c,studio:d,isLibraryProvider:u}=e;return t||o.length||l.length||d||c.length?i.createElement(dN.Z,null,t,o.length?i.createElement(uN.Z,{label:(0,Se.Z)("Directed by")},i.createElement(cN,{fallbackFilterKey:"director",provider:n,server:r,sourceDirectory:s,tags:o,type:a})):null,l.length?i.createElement(uN.Z,{label:(0,Se.Z)("Written by")},i.createElement(cN,{fallbackFilterKey:"writer",provider:n,server:r,sourceDirectory:s,tags:l,type:a})):null,c.length?i.createElement(uN.Z,{label:(0,Se.Z)("Studio")},i.createElement(cN,{fallbackFilterKey:"studio",provider:n,server:r,sourceDirectory:s,tags:c,type:a})):null,d&&!c.length?i.createElement(uN.Z,{label:(0,Se.Z)("Studio")},i.createElement(cN,{provider:n,server:r,sourceDirectory:s,tags:[{filter:u?`studio=${encodeURIComponent(encodeURIComponent(d))}`:null,tag:d}],type:a})):null):null}pN.defaultProps={Director:[],Writer:[]};const mN=pN,hN=(0,s.$j)((function(){return(0,o.P1)(oN.Z,DT.Z,aN(),(0,WP.Z)(),((e,t,r,n={})=>({server:e,provider:t,isLibraryProvider:Mt.wB(t.identifier,Mt.Y3),sourceDirectory:r,Director:n.Director,Writer:n.Writer,Studio:n.Studio,studio:n.studio})))}))(mN);function gN(e,t,r){return!!(e.ownerFeatures&&e.ownerFeatures.indexOf(Ue.EM)>-1&&t&&t.isLibraryItem&&!t.isExtra&&function(e){return!e||e.protocol===Vy.l||parseInt(e.protocolVersion,10)>=3}(r))}var yN=r(44006);function vN(e,t,r){return!!(e.ownerFeatures&&e.ownerFeatures.indexOf(Ue.m9)>-1&&t&&t.isLibraryItem&&!t.isExtra&&function(e){return!e||e.protocol===Vy.l||parseInt(e.protocolVersion,10)>=3}(r))}var fN=r(99508),bN=r(80850),ZN=r(16374),SN=r(85167);class PN extends i.Component{constructor(){super(...arguments),this.onPress=e=>{this.props.onStreamSelect(this.props.stream.id),this.props.onMenuClose()}}render(){const{className:e,children:t,stream:r}=this.props;return i.createElement(OC.Z,{className:e,isSelected:!!r.selected,onPress:this.onPress},t)}}const IN=PN,EN=function(e){const{target:t,isOpen:r,serverEntityID:n,audioStreams:s,onMenuClose:a,onStreamSelect:o}=e;return i.createElement(si.Z,{isOpen:r,size:el.ln,target:t,onMenuClose:a},s.map((e=>i.createElement(IN,{key:e.id,stream:e,onMenuClose:a,onStreamSelect:o},i.createElement(SN.Z,{serverEntityID:n,stream:e,type:"audio"}),e.title?i.createElement("span",{className:"AudioStreamMenu-extendedTitle-nR1Kdl"},e.title):null))))};var wN=r(18153),CN=r(21298);class MN extends i.Component{constructor(e,t){super(e,t),this.onDeletePress=()=>{this.setState({isConfirmDeleteModalOpen:!0})},this.onDeleteConfirm=()=>{const{subtitlesStream:e,onStreamDelete:t}=this.props;this.setState({isConfirmDeleteModalOpen:!1}),t(e.key),this.props.onMenuClose()},this.onDeleteCancel=()=>{this.setState({isConfirmDeleteModalOpen:!1})},this.state={isConfirmDeleteModalOpen:!1}}render(){const{serverEntityID:e,subtitlesStream:t,isStreamDeleteInProgress:r,hasExternalSubtitlesStreams:n,canShowDeleteSubtitlesAction:s,onMenuClose:a,onStreamSelect:o}=this.props,l=!!t.key&&s;return i.createElement("div",{className:"SubtitlesStreamMenuItem-stream-qxOC_K"},i.createElement(IN,{className:n?"SubtitlesStreamMenuItem-menuItemContainer-zPREKN SelectedMenuItem-menuItemContainer-PNDPtO":void 0,stream:t,onMenuClose:a,onStreamSelect:o},i.createElement(SN.Z,{serverEntityID:e,stream:t,type:"subtitles"}),t.title?i.createElement("span",{className:"SubtitlesStreamMenuItem-extendedTitle-Ug5ZYY"},t.title):null),l?i.createElement(i.Fragment,null,i.createElement("div",{className:"SubtitlesStreamMenuItem-deleteContainer-bHro2M"},i.createElement(Jc.Z,{ariaLabel:(0,Se.Z)("Delete Subtitle"),className:"SubtitlesStreamMenuItem-deleteButton-k95vLC IconButton-button-s4bVCh",iconComponent:nA.Z,onPress:this.onDeletePress})),i.createElement(we.Z,{confirmLabel:(0,Se.Z)("Delete"),isConfirmButtonSpinning:r,isOpen:this.state.isConfirmDeleteModalOpen,kind:Jo.T,message:(0,Se.Z)("Are you sure you want to delete this subtitle file?"),metricsPage:u.Yp,title:(0,Se.Z)("Delete Subtitle File"),onCancel:this.onDeleteCancel,onConfirm:this.onDeleteConfirm})):null)}}const DN=MN;class ON extends i.Component{constructor(e,t){super(e,t),this.onMoreSubtitlesPress=()=>{this.setState({isSubtitlesModalOpen:!0})},this.onSubtitlesModalClose=()=>{this.setState({isSubtitlesModalOpen:!1})},this.onUploadSubtitlesPress=()=>{this.setState({isSubtitlesUploadModalOpen:!0})},this.onSubtitlesUploadModalClose=()=>{this.setState({isSubtitlesUploadModalOpen:!1})},this.state={isSubtitlesModalOpen:!1,isSubtitlesUploadModalOpen:!1}}render(){const{target:e,isOpen:t,serverEntityID:r,metadataItemEntityID:n,subtitlesStreams:s,isStreamDeleteInProgress:a,canShowDeleteSubtitlesAction:o,canShowMoreSubtitlesAction:l,canShowUploadSubtitlesAction:c,onMenuClose:d,onStreamSelect:u,onStreamDelete:p}=this.props,{isSubtitlesModalOpen:m,isSubtitlesUploadModalOpen:h}=this.state,g=s.some((e=>!!e.key));return i.createElement(i.Fragment,null,i.createElement(si.Z,{isOpen:t,size:el.ln,target:e,onMenuClose:d},s.map((e=>i.createElement(DN,{key:e.id,canShowDeleteSubtitlesAction:o,hasExternalSubtitlesStreams:g,isStreamDeleteInProgress:a,serverEntityID:r,subtitlesStream:e,onMenuClose:d,onStreamDelete:p,onStreamSelect:u}))),l?i.createElement(ai.Z,{onPress:this.onMoreSubtitlesPress},(0,Se.Z)("Search...")):null,c?i.createElement(ai.Z,{onPress:this.onUploadSubtitlesPress},(0,Se.Z)("Upload...")):null),i.createElement(wN.Z,{isOpen:m,metadataItemEntityID:n,onModalClose:this.onSubtitlesModalClose}),i.createElement(CN.Z,{isOpen:h,metadataItemEntityID:n,onModalClose:this.onSubtitlesUploadModalClose}))}}const TN=ON,xN="PrePlayDetailsStreamsGroup-loadingMessage-_goxEi";class AN extends i.Component{constructor(e,t){super(e,t),this.onAudioStreamMenuButtonPress=e=>{this.setState({isAudioStreamMenuOpen:!this.state.isAudioStreamMenuOpen})},this.onAudioStreamMenuClose=()=>{this.setState({isAudioStreamMenuOpen:!1})},this.onSubtitlesStreamMenuButtonPress=e=>{this.setState({isSubtitlesStreamMenuOpen:!this.state.isSubtitlesStreamMenuOpen})},this.onSubtitlesStreamMenuClose=()=>{this.setState({isSubtitlesStreamMenuOpen:!1})},this.state={isAudioStreamMenuOpen:!1,isSubtitlesStreamMenuOpen:!1},this._audioStreamMenuButtonID=(0,sv.Z)(),this._subtitlesStreamMenuButtonID=(0,sv.Z)()}render(){const{serverEntityID:e,metadataItemEntityID:t,mediaItem:r,isStreamDeleteInProgress:n,canShowDeleteSubtitlesAction:s,canShowMoreSubtitlesAction:a,canShowUploadSubtitlesAction:o,onAudioStreamSelect:l,onSubtitlesStreamSelect:c,onSubtitlesStreamDelete:d}=this.props,{isAudioStreamMenuOpen:u,isSubtitlesStreamMenuOpen:p}=this.state;if(!r)return i.createElement(dN.Z,null,i.createElement(uN.Z,{label:(0,Se.Z)("Video")},i.createElement("span",{className:xN},(0,Se.Z)("Loading..."))),i.createElement(uN.Z,{label:(0,Se.Z)("Audio")},i.createElement("span",{className:xN},(0,Se.Z)("Loading..."))),i.createElement(uN.Z,{label:(0,Se.Z)("Subtitles")},i.createElement("span",{className:xN},(0,Se.Z)("Loading..."))));const m=tZ.Z.get("audio").id,h=(0,ZN.Z)(r,{streamType:m}),g=(0,fN.Z)(r),y=tZ.Z.get("subtitles").id,v=(0,ZN.Z)(r,{streamType:y}),f=(0,bN.Z)(r),b=a||v.length>1,Z=i.createElement(SN.Z,{serverEntityID:e,stream:g,type:"audio"}),S=i.createElement(SN.Z,{serverEntityID:e,stream:f,type:"subtitles"});return i.createElement(dN.Z,null,i.createElement(uN.Z,{label:(0,Se.Z)("Video")},i.createElement(SN.Z,{mediaItem:r,serverEntityID:e,type:"video"})),i.createElement(uN.Z,{label:(0,Se.Z)("Audio")},h.length>1?i.createElement(xv.Z,{direction:u?Av.UP:Av.WV,id:this._audioStreamMenuButtonID,onPress:this.onAudioStreamMenuButtonPress},Z):Z),i.createElement(uN.Z,{label:(0,Se.Z)("Subtitles")},b?i.createElement(xv.Z,{direction:p?Av.UP:Av.WV,id:this._subtitlesStreamMenuButtonID,onPress:this.onSubtitlesStreamMenuButtonPress},S):S),i.createElement(EN,{audioStreams:h,isOpen:u,serverEntityID:e,target:this._audioStreamMenuButtonID,onMenuClose:this.onAudioStreamMenuClose,onStreamSelect:l}),i.createElement(TN,{canShowDeleteSubtitlesAction:s,canShowMoreSubtitlesAction:a,canShowUploadSubtitlesAction:o,isOpen:p,isStreamDeleteInProgress:n,metadataItemEntityID:t,serverEntityID:e,subtitlesStreams:v,target:this._subtitlesStreamMenuButtonID,onMenuClose:this.onSubtitlesStreamMenuClose,onStreamDelete:d,onStreamSelect:c}))}}const kN=AN;var NN=Object.defineProperty,RN=Object.defineProperties,LN=Object.getOwnPropertyDescriptors,jN=Object.getOwnPropertySymbols,VN=Object.prototype.hasOwnProperty,UN=Object.prototype.propertyIsEnumerable,FN=(e,t,r)=>t in e?NN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const BN={dispatchMakePrePlayVideoDecision:yN.M,dispatchDeleteMetadataItemStream:SD.tI,dispatchSelectMetadataItemStream:SD.Bs};class _N extends i.Component{constructor(){super(...arguments),this.onAudioStreamSelect=e=>{this.props.dispatchSelectMetadataItemStream({metadataItemEntityID:this.props.metadataItemEntityID,streamTypeString:"audio",streamID:e,allParts:!0,metricsPage:this.props.metricsPage})},this.onSubtitlesStreamSelect=e=>{this.props.dispatchSelectMetadataItemStream({metadataItemEntityID:this.props.metadataItemEntityID,streamTypeString:"subtitles",streamID:e,allParts:!0,metricsPage:this.props.metricsPage})},this.onSubtitlesStreamDelete=e=>{this.props.dispatchDeleteMetadataItemStream({metadataItemEntityID:this.props.metadataItemEntityID,streamKey:e,metricsPage:this.props.metricsPage})}}componentDidMount(){this.props.dispatchMakePrePlayVideoDecision()}componentDidUpdate(e){e.mediaItems!==this.props.mediaItems&&e.dispatchMakePrePlayVideoDecision()}render(){const e=this.props,{metricsPage:t,dispatchMakePrePlayVideoDecision:r,dispatchSelectMetadataItemStream:n}=e,s=((e,t)=>{var r={};for(var n in e)VN.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&jN)for(var n of jN(e))t.indexOf(n)<0&&UN.call(e,n)&&(r[n]=e[n]);return r})(e,["metricsPage","dispatchMakePrePlayVideoDecision","dispatchSelectMetadataItemStream"]);return i.createElement(kN,((e,t)=>RN(e,LN(t)))(((e,t)=>{for(var r in t||(t={}))VN.call(t,r)&&FN(e,r,t[r]);if(jN)for(var r of jN(t))UN.call(t,r)&&FN(e,r,t[r]);return e})({},s),{onAudioStreamSelect:this.onAudioStreamSelect,onSubtitlesStreamDelete:this.onSubtitlesStreamDelete,onSubtitlesStreamSelect:this.onSubtitlesStreamSelect}))}}const zN=(0,qc.Z)((function(){return(0,o.P1)((e=>e.ui.prePlayPage.decisionMediaItem),oN.Z,(0,WP.Z)(),(0,o.P1)((0,Lc.Z)(),(0,WP.Z)(),((e,t)=>gN(e,t))),(0,o.P1)((0,Lc.Z)(),(0,WP.Z)(),((e,t)=>vN(e,t))),((e,t,r,n,i)=>({mediaItem:e,mediaItems:r.Media,isStreamDeleteInProgress:r.isStreamDeleteInProgress,canShowDeleteSubtitlesAction:t.isFullOwnedServer,canShowMoreSubtitlesAction:n,canShowUploadSubtitlesAction:i})))}),BN)(_N);var HN=r(32646),WN=r(62466);const GN=function({className:e,duration:t,viewOffset:r}){let n;if(t&&r){const e=(t-r)/1e3;e>0&&(n=(0,QS.Z)(e))}return i.createElement("span",{className:e},n)};function QN({className:e,separator:t}){return i.createElement("span",{className:e},t)}QN.defaultProps={className:"PrePlayDashSeparator-separator-qqfE7b",separator:""};const $N=QN;var KN=r(86023);const qN=function(e){const{contentRating:t}=e;return t?i.createElement(Tv.Z,{className:"PrePlayContentRating-badge-A0NOzC Badge-badge-GPVVZ0"},(0,KN.Z)(t)):null};var YN=Object.defineProperty,XN=Object.getOwnPropertySymbols,JN=Object.prototype.hasOwnProperty,eR=Object.prototype.propertyIsEnumerable,tR=(e,t,r)=>t in e?YN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function rR(e){return i.createElement($o.Z,((e,t)=>{for(var r in t||(t={}))JN.call(t,r)&&tR(e,r,t[r]);if(XN)for(var r of XN(t))eR.call(t,r)&&tR(e,r,t[r]);return e})({},e))}rR.defaultProps={className:"PrePlayStatusButton-statusButton-btNdt7 Button-default-sxqP0M",size:el.HC};const nR=rR,iR="PrePlayRecordingStatusButton-partialButton-v28BxI PrePlayStatusButton-statusButton-btNdt7 Button-default-sxqP0M",sR=function(e){const{mediaGrabError:t,mediaGrabPartialRecordingReason:r,onPress:n}=e;return t?i.createElement(nR,{className:"PrePlayRecordingStatusButton-failedButton-wWzlVk PrePlayStatusButton-statusButton-btNdt7 Button-default-sxqP0M",title:t,onPress:n},(0,Se.Z)("Failed Recording")):r?i.createElement(Go.Z,{"aria-label":r,className:iR,component:nR,tooltip:r,onPress:n},(0,Se.Z)("Partial Recording")):i.createElement(nR,{className:iR,onPress:n},(0,Se.Z)("Partial Recording"))};function aR({className:e,children:t}){return i.createElement("span",{className:e},t)}aR.defaultProps={className:"PrePlayTertiaryTitleSpacer-tertiaryTitleSpacer-YwzbVu"};const oR=aR;function lR({className:e,onPress:t}){return i.createElement(nR,{className:e,onPress:t},(0,Se.Z)("Unavailable"))}lR.defaultProps={className:"PrePlayUnavailableButton-unavailableButton-x8LI6X PrePlayStatusButton-statusButton-btNdt7 Button-default-sxqP0M"};const cR=lR;var dR=Object.defineProperty,uR=Object.getOwnPropertySymbols,pR=Object.prototype.hasOwnProperty,mR=Object.prototype.propertyIsEnumerable,hR=(e,t,r)=>t in e?dR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const gR=(0,s.$j)((function(){return(0,o.P1)((0,WP.Z)(),(0,o.P1)((0,WP.Z)(),((e={})=>{const t={isPartialMediaGrab:!1,mediaGrabError:null},r=e.Media;if(!r||!r.length)return t;for(let e=0;e<r.length;e++){const n=r[e],{mediaGrabPartialRecording:i,mediaGrabError:s,mediaGrabPartialRecordingReason:a}=n;i&&(t.isPartialMediaGrab=!0),s&&(t.mediaGrabError=n.mediaGrabError),a&&(t.mediaGrabPartialRecordingReason=a)}return t})),(0,o.P1)((e=>e.ui.prePlayPage),(0,WP.Z)(),((e,t={})=>{if(e.isFileUnavailable)return!0;const r=t.Media;if(!r||!r.length)return!1;for(let e=0,t=r.length;e<t;e++){const t=r[e].Part;if(t&&t.length)for(let e=0,r=t.length;e<r;e++){const r=t[e];if(!1===r.exists||!1===r.accessible)return!0}}return!1})),((e={},t,r)=>((e,t)=>{for(var r in t||(t={}))pR.call(t,r)&&hR(e,r,t[r]);if(uR)for(var r of uR(t))mR.call(t,r)&&hR(e,r,t[r]);return e})({duration:e.duration,contentRating:e.contentRating,saved:e.saved,viewCount:e.viewCount,viewOffset:e.viewOffset,type:e.type,subtype:e.subtype,isFileUnavailable:r},t)))}),(function(e,t){return{onGetInfoPress(r){e((0,lg.Nv)({metadataItemEntityID:t.metadataItemEntityID}))}}}))((function(e){const{duration:t,saved:r,contentRating:n,viewCount:s,viewOffset:a,isFileUnavailable:o,isPartialMediaGrab:l,mediaGrabError:c,mediaGrabPartialRecordingReason:d,onGetInfoPress:u}=e,p=!s&&!a,m=!!a&&a<t,h=!!t||p||m,g=p&&(null==r||null!=r&&r);return i.createElement(Px.Z,null,h?i.createElement(oR,null,i.createElement(WN.Z,{duration:t}),p||m?i.createElement(i.Fragment,null,t&&(g||m)?i.createElement($N,null):null,g?(0,Se.Z)("Unplayed"):null,m?i.createElement(GN,{duration:t,viewOffset:a}):null):null):null,i.createElement(qN,{contentRating:n}),o?i.createElement(cR,{onPress:u}):null,!o&&(l||c||d)?i.createElement(sR,{mediaGrabError:c,mediaGrabPartialRecordingReason:d,onPress:u}):null)}));var yR=r(19013),vR=r(10829);const fR=(0,s.$j)((function(){return(0,o.P1)((0,WP.Z)(),((e={})=>({originallyAvailableAt:e.originallyAvailableAt})))}))((function({originallyAvailableAt:e}){return i.createElement(Ex.Z,null,e?(0,Se.Z)("{monthName} {day}, {year}",{monthName:(0,vR.Z)((0,La.Z)((0,yR.Z)(e))),day:(0,pO.Z)(e,"d"),year:(0,pO.Z)(e,"yyyy")}):null)}));function bR(e){const{serverEntityID:t,providerEntityID:r,metadataItemEntityID:n,type:s,attributionLogo:a,summary:o,showStreams:l}=e;return i.createElement(i.Fragment,null,i.createElement(Wk.Z,null,i.createElement(Ix.Z,null,i.createElement(Px.Z,null,i.createElement(Kk.Z,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t})),i.createElement(Ex.Z,null,i.createElement(nN,{attributionLogo:a}))),i.createElement(Cx,null,i.createElement(Px.Z,null,i.createElement(qk.Z,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t})),i.createElement(HN.Z,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t})),i.createElement(Dx,null,i.createElement(gR,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}),i.createElement(fR,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}))),i.createElement(Gk.Z,null),i.createElement(Wk.Z,null,i.createElement(hN,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t,type:s}),l?i.createElement(zN,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}):null,i.createElement(Qk.Z,null,o)))}bR.defaultProps={showStreams:!0};const ZR=bR,SR=function(e){const{server:t,provider:r,sourceDirectory:n,type:s,Genre:a}=e;return i.createElement(cN,{fallbackFilterKey:"genre",limit:2,provider:r,server:t,sourceDirectory:n,tags:a,type:s})},PR=(0,s.$j)((function(){return(0,o.P1)(oN.Z,DT.Z,aN(),(0,WP.Z)(),((e,t,r,n={})=>({server:e,provider:t,sourceDirectory:r,Genre:n.Genre})))}))((function(e){const{server:t,provider:r,sourceDirectory:n,Genre:s}=e,a=!(!s||!s.length);return i.createElement(Ex.Z,null,a?i.createElement(SR,{Genre:s,provider:r,server:t,sourceDirectory:n}):null)}));function IR(e){const t=e["aria-label"],r=e.className,n=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-watchlist-badge-560"};s["aria-hidden"]=!t,s.style=n,s.className=WT.Z.plexIcon+(r?" "+r:"");const a=[i.createElement.apply(i,["path",{d:"M73 88.729C73 72.31 86.37 59 102.918 59h356.164C475.606 59 489 72.025 489 88.729v427.508c0 16.419-10.6 21.534-23.456 11.598L304.456 403.32c-12.954-10.014-34.057-9.937-46.912 0L96.456 527.835C83.502 537.849 73 532.94 73 516.237V88.729z"}].concat([]))];return t&&a.unshift(i.createElement("title",null,t)),i.createElement.apply(i,["svg",s].concat(a))}IR.propTypes={"aria-label":hb().string,className:hb().string,style:hb().object};const ER=IR,wR=function(e){const{watchlistedAt:t}=e;return t?i.createElement(Tv.Z,{className:"PrePlayInWatchlist-badge-MvPUwG Badge-badge-GPVVZ0"},i.createElement(ER,{className:"PrePlayInWatchlist-icon-JLoFoX"})," ",(0,Se.Z)("In your Watchlist")):null};function CR(e){const{serverEntityID:t,providerEntityID:r,metadataItemEntityID:n,title:s,year:a,summary:o,watchlistedAt:l,attributionLogo:c,showGenres:d,showStreams:u}=e;return i.createElement(i.Fragment,null,i.createElement(Wk.Z,null,i.createElement(Ix.Z,null,i.createElement(Px.Z,null,s),i.createElement(Ex.Z,null,i.createElement(nN,{attributionLogo:c}),i.createElement(wR,{watchlistedAt:l}))),i.createElement(Cx,null,i.createElement(Px.Z,null,a),i.createElement(HN.Z,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t})),i.createElement(Dx,null,i.createElement(gR,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}),d?i.createElement(PR,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}):null)),i.createElement(Gk.Z,null),i.createElement(Wk.Z,null,i.createElement(hN,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}),u?i.createElement(zN,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t}):null,i.createElement(Qk.Z,null,o)))}CR.defaultProps={showGenres:!0,showStreams:!0};const MR=CR;var DR=Object.defineProperty,OR=Object.getOwnPropertySymbols,TR=Object.prototype.hasOwnProperty,xR=Object.prototype.propertyIsEnumerable,AR=(e,t,r)=>t in e?DR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const kR=(0,s.$j)((function(){return(0,o.P1)((0,WP.Z)(),((e={})=>({type:e.type,title:e.title,year:e.year,summary:e.summary,attributionLogo:e.attributionLogo})))}))((function(e){const t=function(e){switch(e){case Tb.EPISODE:return ZR;case Tb.MOVIE:return MR;case Tb.CLIP:return $k}return $k}(e.type);return i.createElement(t,((e,t)=>{for(var r in t||(t={}))TR.call(t,r)&&AR(e,r,t[r]);if(OR)for(var r of OR(t))xR.call(t,r)&&AR(e,r,t[r]);return e})({},e))}));var NR=r(34359),RR=r(70852);const LR=parseInt(Ul.Z.postPlayPosterWidth,10),jR=parseInt(Ul.Z.postPlayTitleHeight,10)+parseInt(Ul.Z.postPlayAutoPlayHeight,10);class VR extends i.Component{constructor(e,t){super(e,t),this.onContentMeasure=({height:e})=>{const t=Math.min((0,Tw.Cr)(LR,this.props.type,Ow.sD),e-jR),r=(0,Tw.dz)(t,this.props.type,Ow.sD);this.setState({isMeasured:!0,width:r,height:t})},this.onCountdown=()=>{const e=this.state.secondsLeft-1;e<=0?this.props.onPlay():this.setState({secondsLeft:e})},this.state={isMeasured:!1,width:0,height:0,secondsLeft:10}}componentDidMount(){this.props.autoPlayEnabled&&(this._tickIntervalID=window.setInterval(this.onCountdown,1e3))}UNSAFE_componentWillReceiveProps(e){this.props.autoPlayEnabled&&!e.autoPlayEnabled&&(window.clearInterval(this._tickIntervalID),this.setState({secondsLeft:10})),!this.props.autoPlayEnabled&&e.autoPlayEnabled&&(this._tickIntervalID=window.setInterval(this.onCountdown,1e3))}componentWillUnmount(){window.clearInterval(this._tickIntervalID)}render(){const{serverEntityID:e,providerEntityID:t,type:r,posterUrl:n,autoPlayEnabled:s,onToggleAutoPlay:a,onPlay:o}=this.props,{isMeasured:l,width:c,height:d,secondsLeft:u}=this.state,p=(10-u)/9*100;return i.createElement(kl.Z,{className:"AudioVideoUpNext-container-v2AA00",onMeasure:this.onContentMeasure},i.createElement("div",{className:"AudioVideoUpNext-title-MjhGym"},(0,Se.Z)("Playing Next")),l?i.createElement("div",{className:"AudioVideoUpNext-poster-25d1RI",style:{width:c,height:d}},i.createElement(lA.Z,{height:d,providerEntityID:t,serverEntityID:e,type:r,url:n,width:c}),s?i.createElement("div",{className:"AudioVideoUpNext-progress-Nz7PoB"},i.createElement(cD.Z,{easing:"linear",lineWidth:3,progress:p,showProgressText:!1,size:c/4}),i.createElement("span",{className:"AudioVideoUpNext-timeLeft-UIkIaF"},u)):null,i.createElement(vC.Z,{"aria-label":(0,Se.Z)("Play Next"),circleClassName:"AudioVideoUpNext-playCircle-MX3Ftl PlayButton-playCircle-fK1f_v",className:"AudioVideoUpNext-playButton-Q8zgTo PlayButton-playButton-vS1WII",onPress:o})):null,i.createElement(RR.Z,{checkboxText:s?(0,Se.Z)("Auto Play On"):(0,Se.Z)("Auto Play Off"),className:s?"AudioVideoUpNext-autoPlayOn-FMTHL1 AudioVideoUpNext-autoPlay-gIaWNg":"AudioVideoUpNext-autoPlayOff-dme5Le AudioVideoUpNext-autoPlay-gIaWNg",name:"autoPlayCheck",value:s,onChange:a}))}}const UR=VR,FR=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),(0,WP.Z)(),St.Z,((e,t={},r)=>({type:t.type,posterUrl:t.thumb,autoPlayEnabled:r.autoPlay})))}),(function(e,{playerType:t}){return{onToggleAutoPlay(){e((0,NR.mr)({playerType:t}))},onPlay(){e((0,gb.hY)({playerType:t}))}}}))(UR),BR=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),(0,yb.Z)(),(0,yb.Z)(1),((e,t,r)=>r?{serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,metadataItemEntityID:r.metadataItem,hubEntityIDs:t.postPlay}:{}))}))((function(e){const{serverEntityID:t,providerEntityID:r,metadataItemEntityID:n,hubEntityIDs:s,playerType:a}=e;return i.createElement("div",{className:"AudioVideoPostPlay-container-yOHe11"},i.createElement("div",{className:"AudioVideoPostPlay-poster-hlr_lP"},i.createElement(FR,{metadataItemEntityID:n,playerType:a,providerEntityID:r,serverEntityID:t})),i.createElement(vc.Z,{autoScroll:!0,className:"AudioVideoPostPlay-details-axmbOT",smoothScroll:!1},i.createElement(kR,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t,showStreams:!1}),i.createElement(Wk.Z,null,s&&s.length>0?i.createElement(Hk,{columnAdjustment:1,hubEntityIDs:s,providerEntityID:r,serverEntityID:t}):null)))})),_R=(0,cl.Z)(GE.Z.defaultSpeed),zR={enter:{opacity:1,duration:_R},exit:{opacity:0,duration:_R,delay:4e3}};function HR(e){const{className:t,isToastVisible:r,isControlsVisible:n,metadataItemEntityID:s,playerType:a}=e;return n?null:i.createElement(ll.M_,null,r?i.createElement(ll.ww.div,{key:"toast",animate:"enter",className:t,exit:"exit",initial:"exit",variants:zR},i.createElement(KM,{className:"AudioVideoToast-metadataContainer-Zg4teh",metadataItemEntityID:s,playerType:a})):null)}HR.defaultProps={className:"AudioVideoToast-toast-LpKcMe"};const WR=HR,GR=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),(0,yb.Z)(),((e,{isControlsVisible:t})=>t),((e,t,r)=>{if(!t)return{isToastVisible:!1};const{positionSeconds:n,durationSeconds:i}=e,s=i-n,a=t.type===Tb.CLIP&&t.subtype===mZ.n;return{isToastVisible:!r&&a&&(1===n||5===s),metadataItemEntityID:t.metadataItem}}))}),(function(e,t){return{}}))(WR),QR="SubtitlesOffsetSettings-button-iez08b Button-button-TxWeuE Link-link-SxPFpG";class $R extends i.Component{constructor(){super(...arguments),this.onDecreasePress=()=>{const{offset:e,dispatchChangeSubtitleOffset:t}=this.props;t(e-50)},this.onIncreasePress=()=>{const{offset:e,dispatchChangeSubtitleOffset:t}=this.props;t(e+50)},this.onResetPress=()=>{const{dispatchChangeSubtitleOffset:e}=this.props;e(0)}}render(){const{offset:e,bottom:t,dispatchCloseSubtitlesOffset:r,onDimensionsChange:n}=this.props;return i.createElement(Ew,{bottom:t,className:"SubtitlesOffsetSettings-container-SYt9nV AudioVideoStripeContainer-container-Pz3oFW",onDimensionsChange:n},i.createElement(Wo.Z,{className:"SubtitlesOffsetSettings-closeButton-l1bRd4 Link-link-SxPFpG",onPress:r},i.createElement(nA.Z,null)),i.createElement("div",{className:"SubtitlesOffsetSettings-title-gUQSzk"},(0,Se.Z)("Subtitle Offset: {offset}",{offset:`${e} ms`})),i.createElement("div",{className:"SubtitlesOffsetSettings-buttonContainer-uF9iON"},i.createElement($o.Z,{className:QR,kind:Jo._8,size:el.HC,onPress:this.onDecreasePress},"-",50," ms"),i.createElement($o.Z,{className:QR,kind:Jo._8,size:el.HC,onPress:this.onIncreasePress},"+",50," ms"),i.createElement($o.Z,{className:QR,kind:Jo._8,size:el.HC,onPress:this.onResetPress},(0,Se.Z)("Reset"))))}}$R.defaultProps={offset:0};const KR=$R,qR=(0,s.$j)((function(){return(0,o.P1)(iZ(),(e=>e.selectedSubtitlesStream))}),(function(e,t){return{dispatchChangeSubtitleOffset(r){e((0,gb.Kb)({playerType:t.playerType,subtitleOffset:r}))},dispatchCloseSubtitlesOffset(){e((0,gb.PR)({playerType:t.playerType}))}}}))(KR);var YR=r(37243);var XR=r(38264),JR=r(86304);function eL(e){return e>2560?"8K":e>1100?"4K":e>576?"HD":""}function tL(e,t){return e<=576||e>1100||!t||t<=2e3?"":t<=3e3?(0,Se.Z)("Medium"):t<=4e3?(0,Se.Z)("High"):t<=8e3||t<=1e4?"":t<=12e3?(0,Se.Z)("Medium"):(0,Se.Z)("High")}var rL=r(91763);function nL(e){const{availableQualities:t,transcodeServer:r,currentDecision:n,currentBandwidth:i,mediaItem:s,canPlayAdaptiveBitrate:a}=e;if(!s)return[];const o=[],{maxUploadBitrate:l}=r,{bitrate:c}=s,d=!l||c&&l>c,u=n&&n.canPlayOriginalQuality;return d&&u&&o.push(function(e){const t=aL(sL(e.width,e.height,e.bitrate));return{index:rL.Z.ORIGINAL,explicitQuality:!1,conversionDescriptionSummary:cL([(0,Se.Z)("Original"),lL(t)]),conversionDescription:(0,Se.Z)("Play Original Quality"),conversionDescriptionExtra:t}}(s)),a&&o.push(function(e,t){const r={index:rL.Z.CONVERT_AUTOMATICALLY,explicitQuality:!1,conversionDescription:(0,Se.Z)("Convert Automatically")};if(e&&e.qualityIndex===rL.Z.CONVERT_AUTOMATICALLY&&t){const e=aL({bitrate:(0,XR.Z)(t.bandwidth),resolution:t.resolution});r.conversionDescriptionSummary=(0,Se.Z)("Auto (Now: {bitrateWithResolution})",{bitrateWithResolution:e}),r.conversionDescriptionExtra=(0,Se.Z)("Now: {bitrateWithResolution}",{bitrateWithResolution:e})}else r.conversionDescriptionSummary=(0,Se.Z)("Convert Automatically");return r}(n,i)),d&&!u&&o.push(function(e){const t=sL(e.width,e.height,e.bitrate),r=oL(t),n=r?(0,Se.Z)("Convert to"):(0,Se.Z)("Convert");return{index:rL.Z.ORIGINAL,explicitQuality:!1,conversionDescriptionSummary:(0,Se.Z)("Convert (Maximum)"),conversionDescription:cL([n,r,lL((0,Se.Z)("Maximum"))]),conversionDescriptionExtra:t.bitrate}}(s)),o.push(...t.map(iL).reverse()),o}function iL(e){const t=e.videoResolution.split("x"),r=sL(t[0],t[1],e.bitrate),n=aL(r),i=oL(r);return{index:e.index,explicitQuality:!0,conversionDescriptionSummary:cL([(0,Se.Z)("Convert"),lL(n)]),conversionDescription:cL([(0,Se.Z)("Convert to"),i]),conversionDescriptionExtra:r.bitrate}}function sL(e,t,r){const n=function(e,t,r){if(!e&&!t)return{resolution:"",description:"",descriptionExtra:""};const n=(0,JR.Z)(e,t);return{resolution:n+"p",description:eL(n),descriptionExtra:tL(n,r)}}(e,t,r);return{bitrate:(0,XR.Z)(r),resolution:n.resolution,resolutionDescription:n.description,resolutionDescriptionExtra:lL(n.descriptionExtra)}}function aL(e){const t=cL([e.resolution,e.resolutionDescription]);return e.bitrate?cL([e.bitrate,t],", "):t}function oL(e){return cL([e.resolution,e.resolutionDescription,e.resolutionDescriptionExtra])}function lL(e){return e&&0!==e.length?"("+e+")":""}function cL(e,t=" "){return e.filter((e=>e)).join(t)}var dL=r(82866);class uL extends i.Component{constructor(){super(...arguments),this.onPress=e=>{this.props.onQualitySelect(this.props.conversionQualityIndex)}}render(){const{conversionQualityIndex:e,conversionQuality:t,isSelected:r,isHidden:n}=this.props;return i.createElement(OC.Z,{key:e,isHidden:n,isSelected:r,onPress:this.onPress},t.conversionDescription,t.conversionDescriptionExtra?i.createElement("span",{className:"AudioVideoQualityMenuItem-itemExtraDetail-ZNLbav","data-testid":"playbackBitrateQuality"},t.conversionDescriptionExtra):null)}}const pL=uL,mL="toggleShowAll",hL={placement:"top-start"};class gL extends i.Component{constructor(e,t){super(e,t),this.onToggleMenuPress=e=>{this.setState({isMenuOpen:!this.state.isMenuOpen})},this.onMenuClose=e=>{this.setState({isMenuOpen:!1})},this.onQualitySelect=e=>{e!==mL?(this.setState({isMenuOpen:!1}),this.props.onQualityChange(e)):this.setState({showAll:!0,qualities:this._getQualityMenuValues(this.props.availableQualities,this.props.qualityIndex,!0)})};const r=!this._canToggleShowAll(e.availableQualities);this.state={isMenuOpen:!1,showAll:r,qualities:this._getQualityMenuValues(e.availableQualities,e.qualityIndex,r)},this._menuInputButtonID=(0,sv.Z)()}UNSAFE_componentWillReceiveProps(e){const t=e.qualityIndex!==this.props.qualityIndex,r=e.availableQualities!==this.props.availableQualities;if(t||r){let t=this.state.showAll;!r||t||this._canToggleShowAll(e.availableQualities)||(t=!0),this.setState({showAll:t,qualities:this._getQualityMenuValues(e.availableQualities,e.qualityIndex,t)})}}_canToggleShowAll(e){const t=e.some((e=>!0===e.explicitQuality)),r=!!Uu().findWhere(e,{index:oZ.Z.CONVERT_AUTOMATICALLY});return t&&r}_getQualityMenuValues(e,t,r){const n=e.filter((e=>r||!e.explicitQuality||e.index===t));return n.push({index:mL,conversionDescription:(0,Se.Z)("Show all")}),n}render(){const e=this.props.qualityIndex,t=this.state.qualities,r=t.find((t=>t.index===e));return i.createElement(xv.Z,{"data-testid":"videoQuality",direction:this.state.isMenuOpen?Av.UP:Av.WV,id:this._menuInputButtonID,size:el.M2,onPress:this.onToggleMenuPress},r.conversionDescriptionSummary,i.createElement(si.Z,{className:"AudioVideoQualityMenuInput-menu-U7W64o Menu-menu-OCzudL",isOpen:this.state.isMenuOpen,options:hL,target:this._menuInputButtonID,onMenuClose:this.onMenuClose},t.map((t=>i.createElement(pL,{key:t.index,conversionQuality:t,conversionQualityIndex:t.index,isHidden:this.state.showAll&&t.index===mL,isSelected:t.index===e,onQualitySelect:this.onQualitySelect})))))}}const yL=gL;var vL=r(88339);const fL=(0,s.$j)((function(){return(0,o.zB)({signalStrength:(0,o.P1)((0,eZ.Z)(),(0,vL.Z)(),((e,t)=>{if(!e)return;const r=t.find((t=>t.uuid===e.activityUUID));return r?r.Context&&r.Context.signalStrength:void 0}))})}))((function(e){const{signalStrength:t}=e;return null==t?null:i.createElement(UC,{label:(0,Se.Z)("Antenna Signal Strength")},t,"%")}));var bL=r(73111);const ZL=function(e){const{offset:t,isDisabled:r,onPress:n}=e;return i.createElement(Wo.Z,{isDisabled:r,isSelected:!r,onPress:n},t||0," ms ",i.createElement(bL.Z,{className:"SubtitlesOffsetSettingsValue-icon-ukJr6Q"}))},SL="VideoSettings-extendedTitle-DhNr6a",PL="more",IL="upload";class EL extends i.Component{constructor(e,t){super(e,t),this.onSubtitleStreamChange=e=>{e===PL?this.onMoreSubtitlesPress():e===IL?this.onUploadSubtitlesPress():this.props.onSubtitleStreamChange(e)},this.onMoreSubtitlesPress=()=>{this.setState({isSubtitlesModalOpen:!0})},this.onSubtitlesModalClose=()=>{this.setState({isSubtitlesModalOpen:!1})},this.onUploadSubtitlesPress=()=>{this.setState({isSubtitlesUploadModalOpen:!0})},this.onSubtitlesUploadModalClose=()=>{this.setState({isSubtitlesUploadModalOpen:!1})},this.state={isSubtitlesModalOpen:!1,isSubtitlesUploadModalOpen:!1}}render(){const{bottom:e,serverEntityID:t,metadataItemEntityID:r,playerType:n,availableQualities:s,audioDevices:a,audioStreams:o,selectedAudioStream:l,selectedAudioDevice:c,subtitlesStreams:d,selectedSubtitlesStream:u,selectedSubtitlesColor:p,selectedSubtitlesPosition:m,selectedSubtitlesSize:h,autoPlay:g,qualityIndex:y,canSetVideoQuality:v,canSetAudioStream:f,canSetSubtitleStream:b,canSetSubtitleColor:Z,canSetSubtitlePosition:S,canSetSubtitleSize:P,canSetSubtitleOffset:I,canSetAutoPlay:E,canShowMoreSubtitlesAction:w,canShowUploadSubtitlesAction:C,canShowLiveTVSignalStrength:M,onQualityChange:D,onAudioDeviceChange:O,onAudioStreamChange:T,onSubtitleColorChange:x,onSubtitlePositionChange:A,onSubtitleSizeChange:k,onAutoPlayChange:N,onSubtitleOffsetPress:R}=this.props,{isSubtitlesModalOpen:L,isSubtitlesUploadModalOpen:j}=this.state,V=b&&(w||C||d.length>1),U=V&&Z,F=V&&S,B=V&&P,_=V&&I,z=v&&!!s.length&&null!=y&&s.findIndex((e=>e.index===y))>-1,H=!!u&&u.id!==dZ.H&&!(0,dL.Z)(u.codec),W=B&&H,G=U&&H,Q=F&&H,$=_&&H&&!!u&&!!u.key;let K;return V&&(K=d.map((e=>{const r=i.createElement(i.Fragment,null,i.createElement(SN.Z,{serverEntityID:t,stream:e,type:"subtitles"}),e.title?i.createElement("span",{className:SL},e.title):null);return{[e.id]:r}})),w&&K.push({[PL]:(0,Se.Z)("Search...")}),C&&K.push({[IL]:(0,Se.Z)("Upload...")})),i.createElement(i.Fragment,null,i.createElement(jC,{bottom:e},z?i.createElement(UC,{label:(0,Se.Z)("Quality")},i.createElement(yL,{availableQualities:s,qualityIndex:y,onQualityChange:D})):null,i.createElement(UC,{label:(0,Se.Z)("Audio Stream")},f&&o.length>1?i.createElement(LC,{name:"audioStream",overrideSelectedValue:i.createElement(SN.Z,{serverEntityID:t,stream:l,type:"audio"}),size:el.M2,value:`${l.id}`,values:o.map((e=>{const r=i.createElement(i.Fragment,null,i.createElement(SN.Z,{serverEntityID:t,stream:e,type:"audio"}),e.title?i.createElement("span",{className:SL},e.title):null);return{[e.id]:r}})),onChange:T}):i.createElement(SN.Z,{serverEntityID:t,stream:l,type:"audio"})),a&&a.length>1?i.createElement(UC,{label:(0,Se.Z)("Audio Device")},i.createElement(LC,{name:"audioDevice",size:el.M2,value:c.name,values:a.map((e=>({[e.name]:(0,MC.Z)(e)}))),onChange:O})):null,i.createElement(UC,{label:(0,Se.Z)("Subtitles")},V?i.createElement(LC,{name:"subtitleStream",overrideSelectedValue:i.createElement(SN.Z,{serverEntityID:t,stream:u,type:"subtitles"}),size:el.M2,value:`${u.id}`,values:K,onChange:this.onSubtitleStreamChange}):i.createElement(SN.Z,{serverEntityID:t,stream:u,type:"subtitles"})),U?i.createElement(UC,{isDisabled:!G,label:(0,Se.Z)("Subtitle Color")},i.createElement(LC,{name:"subtitleColor",size:el.M2,value:p,values:DE.Z.settings.map((e=>({[e.value]:e.title}))),onChange:x})):null,F?i.createElement(UC,{isDisabled:!Q,label:(0,Se.Z)("Subtitle Position")},i.createElement(LC,{name:"subtitlePosition",size:el.M2,value:m,values:OE.Z.settings.map((e=>({[e.value]:e.title}))),onChange:A})):null,B?i.createElement(UC,{isDisabled:!W,label:(0,Se.Z)("Subtitle Size")},i.createElement(LC,{name:"subtitleSize",size:el.M2,value:h.toString(),values:TE.Z.settings.map((e=>({[e.value]:e.title}))),onChange:k})):null,_?i.createElement(UC,{isDisabled:!$,label:(0,Se.Z)("Subtitles Offset")},i.createElement(ZL,{isDisabled:!$,offset:u.offset,onPress:R})):null,E?i.createElement(UC,{label:(0,Se.Z)("Auto Play")},i.createElement(RR.Z,{name:"autoPlay",size:el.HC,value:g,onChange:N})):null,M?i.createElement(fL,{playerType:n,serverEntityID:t}):null),i.createElement(wN.Z,{isOpen:L,metadataItemEntityID:r,onModalClose:this.onSubtitlesModalClose}),i.createElement(CN.Z,{isOpen:j,metadataItemEntityID:r,onModalClose:this.onSubtitlesUploadModalClose}))}}const wL=EL;var CL=Object.defineProperty,ML=Object.defineProperties,DL=Object.getOwnPropertyDescriptors,OL=Object.getOwnPropertySymbols,TL=Object.prototype.hasOwnProperty,xL=Object.prototype.propertyIsEnumerable,AL=(e,t,r)=>t in e?CL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const kL={dispatchChangeQualityIndex:gb.wv,dispatchChangeStream:gb.mj,dispatchChangeSubtitleColor:gb.EZ,dispatchChangeSubtitlePosition:gb.Wj,dispatchChangeSubtitleSize:gb.YA,dispatchSelectAudioDevice:Pe.mb,dispatchSetAutoPlay:Xb.Sp,dispatchTogglePlayerSubtitlesOffsetState:gb.PR};class NL extends i.Component{constructor(){super(...arguments),this.onQualityChange=e=>{const{playerType:t,dispatchChangeQualityIndex:r}=this.props;r({playerType:t,qualityIndex:parseInt(e,10)})},this.onAudioStreamChange=e=>{const{playerType:t,dispatchChangeStream:r}=this.props;r({playerType:t,streamTypeString:"audio",streamID:e})},this.onAudioDeviceChange=e=>{const{dispatchSelectAudioDevice:t}=this.props;t({deviceName:e})},this.onSubtitleStreamChange=e=>{const{playerType:t,dispatchChangeStream:r}=this.props;r({playerType:t,streamTypeString:"subtitles",streamID:e})},this.onSubtitleColorChange=e=>{const{playerType:t,dispatchChangeSubtitleColor:r}=this.props;r({playerType:t,subtitleColor:e})},this.onSubtitlePositionChange=e=>{const{playerType:t,dispatchChangeSubtitlePosition:r}=this.props;r({playerType:t,subtitlePosition:e})},this.onSubtitleSizeChange=e=>{const{playerType:t,dispatchChangeSubtitleSize:r}=this.props;r({playerType:t,subtitleSize:parseInt(e,10)})},this.onAutoPlayChange=e=>{const{playerType:t,dispatchSetAutoPlay:r}=this.props;r({playerType:t,autoPlay:e})},this.onSubtitleOffsetPress=()=>{const{playerType:e,dispatchTogglePlayerSubtitlesOffsetState:t}=this.props;t({playerType:e})}}render(){const e=this.props,{dispatchChangeQualityIndex:t,dispatchChangeStream:r,dispatchChangeSubtitleSize:n,dispatchSetAutoPlay:s}=e,a=((e,t)=>{var r={};for(var n in e)TL.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&OL)for(var n of OL(e))t.indexOf(n)<0&&xL.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchChangeQualityIndex","dispatchChangeStream","dispatchChangeSubtitleSize","dispatchSetAutoPlay"]);return i.createElement(wL,((e,t)=>ML(e,DL(t)))(((e,t)=>{for(var r in t||(t={}))TL.call(t,r)&&AL(e,r,t[r]);if(OL)for(var r of OL(t))xL.call(t,r)&&AL(e,r,t[r]);return e})({},a),{onAudioDeviceChange:this.onAudioDeviceChange,onAudioStreamChange:this.onAudioStreamChange,onAutoPlayChange:this.onAutoPlayChange,onQualityChange:this.onQualityChange,onSubtitleColorChange:this.onSubtitleColorChange,onSubtitleOffsetPress:this.onSubtitleOffsetPress,onSubtitlePositionChange:this.onSubtitlePositionChange,onSubtitleSizeChange:this.onSubtitleSizeChange,onSubtitleStreamChange:this.onSubtitleStreamChange}))}}const RL=(0,s.$j)((function(){return(0,o.P1)(((e,{isWatchTogether:t})=>t),(0,Fy.Z)("controllable"),(0,o.P1)((0,o.zB)({availableQualities:(0,Fy.Z)("availableQualities"),transcodeServer:lZ(),currentDecision:vb(),currentBandwidth:(0,o.P1)((0,GZ.Z)(["bandwidthTimeline","positionSeconds"]),vb(),((e,t)=>{const r=e.bandwidthTimeline;if(!(t&&r&&r.bandwidths&&r.transcodeSessionID&&r.transcodeSessionID===t.transcodeSessionID))return null;const n=1e3*e.positionSeconds,i=r.bandwidths.filter((e=>parseInt(e.time,10)<=n));return 0===i.length?null:Uu().max(i,(e=>parseInt(e.time,10)))})),mediaItem:rZ(),canPlayAdaptiveBitrate:(0,o.P1)(rT.Z,lZ(),(0,eZ.Z)(),((e,t,r)=>(0,YR.Z)()&&t.hasAdaptiveBitrate&&!e&&!r))}),nL),iZ(),lZ(),(0,Fy.Z)("qualityIndex"),(0,Fy.Z)("serverEntityID"),By(),QZ(),wb(),(0,o.P1)(ky.Z,QZ(),wb(),((e,t,r)=>gN(t,r,e))),(0,o.P1)(ky.Z,QZ(),wb(),((e,t,r)=>vN(t,r,e))),vb(),St.Z,wC,CC,((e,t,r,n,i,s,a,o,l,c,d,u,p,m,h,g)=>{const y=o.protocols.includes(Ob.K),v=!y&&(!(!p||!p.subtitlesUrl)||(0,WI.Z)()),f=n.selectedSubtitlesStream;return{serverEntityID:a,metadataItemEntityID:c?c.entityID:null,availableQualities:r,audioDevices:h,audioStreams:n.audioStreams,selectedAudioStream:n.selectedAudioStream,selectedAudioDevice:g,subtitlesStreams:n.subtitlesStreams,selectedSubtitlesStream:f,selectedSubtitlesColor:m.subtitleColor,selectedSubtitlesPosition:m.subtitlePosition,selectedSubtitlesSize:m.subtitleSize,autoPlay:m.autoPlay,canSetVideoQuality:t?!!t.quality:!!i.transcoderVideo&&!i.transcoderVideoRemuxOnly,canSetAudioStream:!t||!!t.audioStream,canSetSubtitleStream:!t||!!t.subtitleStream,canSetSubtitleColor:t?!!t.subtitleColor:v,canSetSubtitlePosition:t?!!t.subtitlePosition:v,canSetSubtitleSize:t?!!t.subtitleSize:!y&&!(!f||!f.id),canSetSubtitleOffset:t?!!t.subtitleOffset:v,canSetAutoPlay:t?!!t.autoPlay:!y&&!e,canShowMoreSubtitlesAction:d,canShowUploadSubtitlesAction:u,canShowLiveTVSignalStrength:y&&!l.isCloud,qualityIndex:s}}))}),kL)(NL),LL=parseInt(Ul.Z.watchTogetherLobbyPosterWidth,10),jL=parseInt(Ul.Z.watchTogetherLobbyTitleHeight,10);function VL(){return{isMeasured:!1,width:0,height:0}}const UL=(0,s.$j)((function(){return(0,o.P1)((0,WP.Z)(),((e={})=>({type:e.type,subtype:e.subtype,posterUrl:e.thumb})))}))((function(e){const{serverEntityID:t,providerEntityID:r,type:n,posterUrl:s}=e,[a,o]=(0,i.useState)(null),[l,c]=(0,i.useState)(VL);return(0,i.useEffect)((()=>{let e=null;if(l.isMeasured){const t=Math.min((0,Tw.Cr)(LL,n,Ow.IN),l.height-jL);e={height:t,width:(0,Tw.dz)(t,n,Ow.IN)}}o(e)}),[l,n]),i.createElement(kl.Z,{className:"WatchTogetherLobbyMetadataPoster-container-QFTaCB",onMeasure:c},i.createElement("div",{className:"WatchTogetherLobbyMetadataPoster-title-ARdGfh"},(0,Se.Z)("Watch Together")),null!=a?i.createElement("div",{style:a},i.createElement(lA.Z,{height:a.height,providerEntityID:r,serverEntityID:t,type:n,url:s,width:a.width})):null)})),FL=function({adDisplayIndex:e,adDisplayTotal:t,className:r,isAdPlaying:n,isPresent:s,isReady:a,isWatching:o}){let l;return l=n?t>1?(0,Se.Z)("Playing ad {index} of {total}",{index:e,total:t}):(0,Se.Z)("Playing ad"):o?(0,Se.Z)("Watching"):a?(0,Se.Z)("Ready"):s?(0,Se.Z)("Buffering..."):(0,Se.Z)("Invited"),i.createElement("div",{className:r,title:l},l)},BL=function({className:e,title:t}){return i.createElement("div",{className:e,title:t},t)};var _L=r(225);const zL=(0,i.memo)((function(e){const{serverEntityID:t,watchTogetherRoomEntityID:r,cellWidth:n}=e,s=(0,ww.Z)(e),a=(0,sl.Z)();return i.createElement(Wo.Z,{className:"WatchTogetherInviteParticipantCell-container-E1fJnt",style:s.style,onPress:a.onOpen},i.createElement("span",{className:"WatchTogetherInviteParticipantCell-posterCardContainer-u302g3 WatchTogetherParticipantCell-posterCardContainer-YfhetL WatchTogetherParticipantCell-card-xDhcs0 TagPosterCard-card-TwavE3 MetadataPosterCardFace-poster-MwJE1t TagPosterCard-isPerson-Xz0HH4",style:{width:n,height:n}},i.createElement(Xc.Z,{className:"WatchTogetherInviteParticipantCell-icon-jCcLem"})),i.createElement("div",{className:"WatchTogetherInviteParticipantCell-titleContainer-urHa9v WatchTogetherParticipantCell-titleContainer-4jUYA1"},i.createElement(TM.Z,{component:BL,isSecondary:!1,title:(0,Se.Z)("Invite...")})),i.createElement(_L.Z,{isOpen:a.isOpen,serverEntityID:t,watchTogetherRoomEntityID:r,onModalClose:a.onClose}))}));var HL=r(51026),WL=r(43523),GL=r(9083),QL=r(15080),$L=r(20289);const KL=function(e){const{serverEntityID:t,providerEntityID:r,isOffscreen:n,tagType:s,librarySectionType:a,title:o,url:l,width:c,height:d,transitionProps:u,onLoad:p,onError:m}=e;if(n)return null;if(l)return i.createElement(QL.Z,{backgroundPosition:"center center",height:d,providerEntityID:r,serverEntityID:t,transitionProps:u,url:l,width:c,onError:m,onLoad:p});const h=HL.Z.get(s);if(h&&h.isPerson)return i.createElement(GL.Z,{height:d,name:o,width:c});const g=WL.ZP.get(a),y=function(e){switch(e){case"artist":return"track";default:return e}}(g&&g.typeString);return i.createElement($L.Z,{height:d,type:y,width:c})};var qL=Object.defineProperty,YL=Object.getOwnPropertySymbols,XL=Object.prototype.hasOwnProperty,JL=Object.prototype.propertyIsEnumerable,ej=(e,t,r)=>t in e?qL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function tj(e){const t=e,{className:r,imageWidth:n,imageHeight:s,imageUrl:a,tag:o,tagType:l}=t,c=((e,t)=>{var r={};for(var n in e)XL.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&YL)for(var n of YL(e))t.indexOf(n)<0&&JL.call(e,n)&&(r[n]=e[n]);return r})(t,["className","imageWidth","imageHeight","imageUrl","tag","tagType"]),d=HL.Z.get(l),u=!!d&&d.isPerson;return i.createElement(oA.Z,((e,t)=>{for(var r in t||(t={}))XL.call(t,r)&&ej(e,r,t[r]);if(YL)for(var r of YL(t))JL.call(t,r)&&ej(e,r,t[r]);return e})({key:o,className:Ra()(r,u&&"TagPosterCard-isPerson-Xz0HH4"),component:KL,height:s,tagType:l,url:a,width:n},c))}tj.defaultProps={className:"TagPosterCard-card-TwavE3 MetadataPosterCardFace-poster-MwJE1t"};const rj=tj,nj=(0,i.memo)((function(e){const{serverEntityID:t,providerEntityID:r,titleComponents:n,listType:s,cellWidth:a,thumb:o,title:l,adDisplayIndex:c,adDisplayTotal:d,isAdPlaying:u,isWatching:p,isPresent:m,isReady:h}=e,g=(0,ww.Z)(e);return i.createElement("div",{style:g.style},i.createElement("span",{className:"WatchTogetherParticipantCell-posterCardContainer-YfhetL"},i.createElement(rj,{className:"WatchTogetherParticipantCell-card-xDhcs0 TagPosterCard-card-TwavE3 MetadataPosterCardFace-poster-MwJE1t TagPosterCard-isPerson-Xz0HH4",imageHeight:a,imageUrl:o,imageWidth:a,providerEntityID:r,serverEntityID:t,tagType:s})),i.createElement("div",{className:"WatchTogetherParticipantCell-titleContainer-4jUYA1"},n.map(((e,t)=>i.createElement(TM.Z,{key:t,adDisplayIndex:c,adDisplayTotal:d,component:e,isAdPlaying:u,isPresent:m,isReady:h,isSecondary:t>0,isWatching:p,title:l})))))}));var ij=Object.defineProperty,sj=Object.getOwnPropertySymbols,aj=Object.prototype.hasOwnProperty,oj=Object.prototype.propertyIsEnumerable,lj=(e,t,r)=>t in e?ij(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cj=(e,t)=>{for(var r in t||(t={}))aj.call(t,r)&&lj(e,r,t[r]);if(sj)for(var r of sj(t))oj.call(t,r)&&lj(e,r,t[r]);return e};const dj={isInviteUser:!0};function uj(e){const{className:t,serverEntityID:r,providerEntityID:n,watchTogetherRoomEntityID:s,users:a,shouldShowInviteUsers:o,listContext:l}=e,c=function(e){switch(e){case Ow.IN:return[BL,FL];default:return[]}}(Ow.IN),d="participant",u=o?[...a,dj]:a;return i.createElement(Sw,{cellRenderer:(p={serverEntityID:r,providerEntityID:n,watchTogetherRoomEntityID:s,titleComponents:c,listType:d},e=>{const t=e.isInviteUser?zL:nj;return i.createElement(t,cj(cj({},p),e))}),className:t,columnAdjustment:1,hubIdentifier:"watchTogetherParticipants",items:u,keyPropName:"userKey",layout:Sk(d,l,1,c.length),listContext:l,listType:d,size:u.length,title:(0,Se.Z)("Participants")});var p}uj.defaultProps={className:"WatchTogetherParticipantsHubCell-hubCell-lOTxEJ HubCell-hubCell-bbBxQT"};const pj=uj;var mj=Object.defineProperty,hj=Object.defineProperties,gj=Object.getOwnPropertyDescriptors,yj=Object.getOwnPropertySymbols,vj=Object.prototype.hasOwnProperty,fj=Object.prototype.propertyIsEnumerable,bj=(e,t,r)=>t in e?mj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zj=(e,t)=>{for(var r in t||(t={}))vj.call(t,r)&&bj(e,r,t[r]);if(yj)for(var r of yj(t))fj.call(t,r)&&bj(e,r,t[r]);return e},Sj=(e,t)=>hj(e,gj(t));function Pj(e,t){var r,n;const i=(null==(r=e.title)?void 0:r.toLowerCase())||"",s=(null==(n=t.title)?void 0:n.toLowerCase())||"";return i&&!s?-1:!i&&s||i>s?1:i<s?-1:0}const Ij=(0,o.P1)(qn,Yn,((e,t)=>t.find((t=>{var r;return t.id===(null==(r=e.session)?void 0:r.roomID)})))),Ej=(0,s.$j)((function(){return(0,o.P1)((0,Fy.Z)("providerEntityID"),(0,Fy.Z)("serverEntityID"),(0,o.P1)(zT,Ij,((e,t)=>{const r=t?t.users.filter((t=>!e.users.find((e=>e.id===t.id)))):[],n=e.users.map((t=>{const r=e.users.filter((e=>e.id===t.id)).length>1,n=t.title||(0,Se.Z)("Unknown");return Sj(Zj({},t),{title:r||!t.title?`${n} (${t.deviceName})`:n})}));return r.concat(n).sort(Pj).map((e=>Sj(Zj({},e),{userKey:e.deviceIdentifier||e.id})))})),Ij,((e,t,r,n)=>({providerEntityID:e,serverEntityID:t,shouldShowInviteUsers:!!n,watchTogetherRoomEntityID:null==n?void 0:n.entityID,users:r})))}))(pj),wj=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),(0,yb.Z)(),((e,t)=>({serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,metadataItemEntityID:t.metadataItem})))}))((function(e){const{serverEntityID:t,providerEntityID:r,metadataItemEntityID:n,playerType:s}=e;return i.createElement("div",{className:"WatchTogetherLobby-container-yp7zps"},i.createElement("div",{className:"WatchTogetherLobby-row-wfluDR"},i.createElement("div",{className:"WatchTogetherLobby-poster-ZUhRdx"},i.createElement(UL,{metadataItemEntityID:n,playerType:s,providerEntityID:r,serverEntityID:t})),i.createElement(vc.Z,{autoScroll:!0,className:"WatchTogetherLobby-details-nBtgK3",smoothScroll:!1},i.createElement(kR,{metadataItemEntityID:n,providerEntityID:r,serverEntityID:t,showStreams:!1}))),i.createElement(Ej,{className:"WatchTogetherLobby-hubCell-dQyTQl WatchTogetherParticipantsHubCell-hubCell-lOTxEJ HubCell-hubCell-bbBxQT",listContext:Ow.IN,playerType:s}))})),Cj=function(e){const{bottom:t,playerType:r,onDimensionsChange:n}=e;return i.createElement(Ew,{bottom:t,className:"WatchTogetherPlayerParticipants-container-JgvsFx AudioVideoStripeContainer-container-Pz3oFW",onDimensionsChange:n},i.createElement(Ej,{listContext:Ow.r$,playerType:r}))};var Mj=r(12153);const Dj=function(e){const{serverEntityID:t,providerEntityID:r,notification:n,user:s,onRemoveToast:a}=e;return(0,i.useEffect)((()=>{const e=n.timestamp+3e3-Date.now(),t=()=>{a({uid:n.uid})};let r;return e>0?r=window.setTimeout(t,e):t(),()=>{r&&(r=window.clearTimeout(r))}}),[a,n]),i.createElement(i.Fragment,null,i.createElement("div",{className:"WatchTogetherRoomEventToastContent-posterCardContainer-rHAvx7"},i.createElement(rj,{className:"WatchTogetherRoomEventToastContent-card-c2u79g TagPosterCard-card-TwavE3 MetadataPosterCardFace-poster-MwJE1t TagPosterCard-isPerson-Xz0HH4",imageHeight:30,imageUrl:s.thumb,imageWidth:30,providerEntityID:r,serverEntityID:t,tagType:"participant"})),function(e,t){const r=t.title||(0,Se.Z)("Unknown");let n;switch(e){case Mj.OR:n=(0,Se.Z)("{openSpan}{username}{closeSpan} joined",{username:r});break;case Mj.In:n=(0,Se.Z)("{openSpan}{username}{closeSpan} left",{username:r});break;case Mj.E7:n=(0,Se.Z)("{openSpan}{username}{closeSpan} paused",{username:r});break;case Mj.gk:n=(0,Se.Z)("{openSpan}{username}{closeSpan} resumed",{username:r});break;case Mj.tG:n=(0,Se.Z)("{openSpan}{username}{closeSpan} seeked",{username:r})}return n?i.createElement(lv.Z,{message:n,tags:[{open:"openSpan",close:"closeSpan",component:"span",className:"WatchTogetherRoomEventToastContent-username-Qhlk8X"}]}):void 0}(n.type,s))},Oj=(0,cl.Z)(GE.Z.slowSpeed),Tj={enter:{opacity:1,duration:Oj},exit:{opacity:0,duration:Oj}};function xj(e){const{className:t,serverEntityID:r,providerEntityID:n,notifications:s,users:a,isControlsVisible:o,onRemoveToast:l}=e;return o?null:i.createElement("div",{className:"WatchTogetherRoomEventToasts-container-uDQgiD"},i.createElement(ll.M_,null,s.map((e=>i.createElement(ll.ww.div,{key:e.uid,animate:"enter",className:t,exit:"exit",initial:"exit",variants:Tj},i.createElement(Dj,{notification:e,providerEntityID:n,serverEntityID:r,user:a.find((t=>t.id===e.userID)),onRemoveToast:l}))))))}xj.defaultProps={className:"WatchTogetherRoomEventToasts-toast-cj1Kq5"};const Aj=xj,kj={onRemoveToast:Qn.FV},Nj=(0,s.$j)((function(){return(0,o.P1)(zT,(0,Fy.Z)("serverEntityID"),(0,Fy.Z)("providerEntityID"),((e,t,r)=>({notifications:e.notifications,providerEntityID:r,serverEntityID:t,users:e.users})))}),kj)(Aj),Rj="AudioVideoFullPlayer-overlayButton-D2xSex Button-button-TxWeuE Link-link-SxPFpG",Lj=parseInt(Ul.Z.playerControlsHeight,10),jj=parseInt(Ul.Z.playerControlsNarrowHeight,10),Vj=parseInt(Ul.Z.playerInfoBarHeight,10),Uj=parseInt(Ul.Z.playerOverlayActionEdgeGutter,10);function Fj(e,t){return e.isRemotePlayer||e.isMusic||e.isSettingsVisible||e.isChaptersVisible||e.isSubtitlesOffsetSettingsVisible||e.isWatchTogetherParticipantsVisible||e.isPlayQueueVisible||e.isPostPlayVisible||e.isWatchTogetherLobbyVisible||t.isControlsMenuOpen||t.isCastMenuOpen||t.disableInteractionTimer}function Bj({bottom:e,children:t}){return i.createElement("div",{className:"AudioVideoFullPlayer-content-Jl7XEK",style:{bottom:e}},t)}class _j extends i.Component{constructor(e,t){super(e,t),this.onInteraction=e=>{const{keyCode:t}=e;t!==zI.LH&&t!==zI.JH&&(Fj(this.props,this.state)||(this.state.hideControls&&this.setState({hideControls:!1}),this._interactionTimeoutID&&window.clearTimeout(this._interactionTimeoutID),this._interactionTimeoutID=window.setTimeout(this.onInteractionTimeout,2e3)))},this.onInteractionTimeout=()=>{this.setState((({hideControlsCount:e})=>({hideControls:!0,hideControlsCount:e+1}))),this._interactionTimeoutID&&(window.clearTimeout(this._interactionTimeoutID),this._interactionTimeoutID=null)},this.onMouseLeave=e=>{this.setState({disableInteractionTimer:!1},(()=>{Fj(this.props,this.state)||this.onInteractionTimeout()}))},this.onControlsMouseEnter=e=>{this.setState({disableInteractionTimer:!0})},this.onControlsMouseLeave=e=>{this.setState({disableInteractionTimer:!1})},this.onControlsMenuChange=e=>{this.setState({isControlsMenuOpen:e})},this.onCastMenuChange=e=>{this.setState({isCastMenuOpen:e})},this.onAudioSettingsDimensionsChange=({scrollHeight:e})=>{this.setState({audioSettingsHeight:e})},this.state={hideControls:!1,hideControlsCount:0,isControlsMenuOpen:!1,isCastMenuOpen:!1,disableInteractionTimer:!1}}componentDidMount(){document.addEventListener("keyup",this.onInteraction),document.addEventListener("mousemove",this.onInteraction),document.addEventListener("mousedown",this.onInteraction),document.addEventListener("touchstart",this.onInteraction),document.addEventListener("touchend",this.onInteraction),document.addEventListener("mouseleave",this.onMouseLeave),this._bodyCursorStyleAtMount=document.body.style.cursor,Fj(this.props,this.state)||this._startInteractionTimer()}UNSAFE_componentWillReceiveProps(e){Fj(e,this.state)&&this.state.hideControls&&this.setState({hideControls:!1}),HI(e.marker)!==HI(this.props.marker)&&this.setState({hideControlsCount:0}),this.props.isFullscreen!==e.isFullscreen&&this.state.disableInteractionTimer&&this.setState({disableInteractionTimer:!1})}componentDidUpdate(e,t){Fj(e,t)&&!Fj(this.props,this.state)&&this._startInteractionTimer(),!Fj(e,t)&&Fj(this.props,this.state)&&this._stopInteractionTimer(),this.state.hideControls!==t.hideControls&&(document.body.style.cursor=this.state.hideControls?"none":this._bodyCursorStyleAtMount)}componentWillUnmount(){document.removeEventListener("keyup",this.onInteraction),document.removeEventListener("mousemove",this.onInteraction),document.removeEventListener("mousedown",this.onInteraction),document.removeEventListener("touchstart",this.onInteraction),document.removeEventListener("touchend",this.onInteraction),document.removeEventListener("mouseleave",this.onMouseLeave),document.body.style.cursor=this._bodyCursorStyleAtMount,this._interactionTimeoutID&&window.clearTimeout(this._interactionTimeoutID)}_startInteractionTimer(){this._stopInteractionTimer(),this._interactionTimeoutID=window.setTimeout(this.onInteractionTimeout,2e3)}_stopInteractionTimer(){this._interactionTimeoutID&&window.clearTimeout(this._interactionTimeoutID)}render(){const{playerType:e,hasFullscreen:t,isRemotePlayer:r,isPlayQueueLoading:n,isMediaLoading:s,isPostPlayLoading:a,isBuffering:o,isFullscreen:l,isSettingsVisible:c,isChaptersVisible:d,isSubtitlesOffsetSettingsVisible:u,isWatchTogetherParticipantsVisible:p,isPlayQueueVisible:m,isLyricsVisible:h,isPostPlayVisible:g,isWatchTogetherLobbyVisible:y,isAdVisible:v,isVideo:f,isMusic:b,isNarrowLayout:Z,hasLiveTVProtocol:S,hasMediaOverlays:P,isWatchTogether:I,seekStartMilliseconds:E,seekEndMilliseconds:w,bufferStartMilliseconds:C,bufferEndMilliseconds:M,adPositionMilliseconds:D,adDurationMilliseconds:O,ad:T,marker:x,onEnterFullscreenPress:A,onExitFullscreenPress:k,onToggleFullscreen:N,onSeekBarInteractionStart:R,onSeekBarInteractionEnd:L}=this.props,{hideControls:j,hideControlsCount:V,audioSettingsHeight:U}=this.state,F=(n||a||f&&!v&&(s||o))&&!g&&!y,B=!n&&c&&!d&&!m,_=B&&b,z=B&&f,H=!n&&!c&&d&&!m,W=!n&&m&&!c&&!d,G=f&&!n&&!a&&!m&&!g&&!y,Q=!(0,WI.Z)()&&G&&!v&&!s,$=y||(!v||m)&&(r||b||s||m||a||g),K=Z?jj:Lj,q=y||!S&&!v?K:K+Vj,Y=j?null:`translateY(${-q}px)`,X=!(!T||!T.click),J=!(!T||!T.clicksThrough),ee={bottom:`${q+Uj}px`,right:`${Uj}px`};return i.createElement(i.Fragment,null,P&&G&&!v?i.createElement(vE,{playerType:e}):null,$?i.createElement(vx,{allowBlur:b||m||g||y,isMusic:b,isVideo:f,playerType:e}):null,!m&&F?i.createElement("div",{className:"AudioVideoFullPlayer-spinnerContainer-qhmt1c"},i.createElement(dl.Z,{size:el.ln})):null,Q?i.createElement(WE,{heightOffset:j?0:q,playerType:e}):null,!G||v&&J?null:i.createElement(SC,{isCursorHidden:j,playerType:e,onToggleFullscreen:N}),v&&X&&!y?i.createElement($o.Z,{className:Rj,size:el.ln,style:ee,onPress:T.click},(0,Se.Z)("Learn more")):null,G&&!v?i.createElement(uw,{className:Rj,isHidden:j&&V>1,isHiddenPolite:j,marker:x,playerType:e,size:el.ln,style:ee}):null,n?null:i.createElement("div",{className:Ra()("AudioVideoFullPlayer-topBar-Cv6J6C AudioVideoFullPlayer-bar-ka0DgM",j&&"AudioVideoFullPlayer-topBarHidden-Ep8XXa",f&&"AudioVideoFullPlayer-videoTopBar-SPrEoI",m&&"AudioVideoFullPlayer-playQueueTopBar-iHXpjH"),onMouseEnter:this.onControlsMouseEnter,onMouseLeave:this.onControlsMouseLeave},i.createElement(yC,{hasFullscreen:t,isFullscreen:l,playerType:e,onCastMenuChange:this.onCastMenuChange,onEnterFullscreenPress:A,onExitFullscreenPress:k})),n||m||h||!b?null:i.createElement(Bj,{bottom:q},i.createElement(gx,{bottom:_?U:null,playerType:e})),!n&&!m&&h&&b?i.createElement(Bj,{bottom:q},i.createElement(Kx,{playerType:e})):null,_?i.createElement(zC,{bottom:q,playerType:e,onDimensionsChange:this.onAudioSettingsDimensionsChange}):null,z?i.createElement(RL,{bottom:q,isWatchTogether:I,playerType:e}):null,u?i.createElement(qR,{bottom:q,playerType:e}):null,p?i.createElement(Cj,{bottom:q,playerType:e}):null,H?i.createElement(tC,{bottom:q,playerType:e}):null,W?i.createElement(Bj,{bottom:q},i.createElement(ek,{isMusic:b,isVideo:f,playerType:e})):null,n||!g||m?null:i.createElement(Bj,{bottom:q},i.createElement(BR,{playerType:e})),!n&&y?i.createElement(Bj,{bottom:q},i.createElement(wj,{playerType:e})):null,i.createElement(GR,{isControlsVisible:!j,playerType:e}),I&&!y?i.createElement(Nj,{isControlsVisible:!j,playerType:e}):null,n?null:i.createElement("div",{className:Ra()("AudioVideoFullPlayer-bottomBar-h224iE AudioVideoFullPlayer-bar-ka0DgM",j&&"AudioVideoFullPlayer-bottomBarHidden-cXfDeS"),style:{bottom:-q,height:q,transform:Y},onMouseEnter:this.onControlsMouseEnter,onMouseLeave:this.onControlsMouseLeave},i.createElement(lx,{adDurationMilliseconds:O,adPositionMilliseconds:D,bufferEndMilliseconds:M,bufferStartMilliseconds:C,hasLiveTVProtocol:S,isAdVisible:v,isMusic:b,isPostPlayVisible:g,isVideo:f,isWatchTogether:I,isWatchTogetherLobbyVisible:y,playerType:e,seekEndMilliseconds:w,seekStartMilliseconds:E,onControlsMenuChange:this.onControlsMenuChange,onSeekBarInteractionEnd:L,onSeekBarInteractionStart:R})))}}const zj=_j,Hj=function(e){const{className:t,children:r,isPlayQueueLoading:n}=e;return i.createElement("div",{className:Ra()(t,n&&"MiniPlayerContainer-playQueueIsLoading-CFoqg6")},n?i.createElement(dl.Z,null):r)};var Wj=Object.defineProperty,Gj=Object.getOwnPropertySymbols,Qj=Object.prototype.hasOwnProperty,$j=Object.prototype.propertyIsEnumerable,Kj=(e,t,r)=>t in e?Wj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const qj=function(e){return i.createElement(Hj,{isPlayQueueLoading:e.isPlayQueueLoading},i.createElement(lx,((e,t)=>{for(var r in t||(t={}))Qj.call(t,r)&&Kj(e,r,t[r]);if(Gj)for(var r of Gj(t))$j.call(t,r)&&Kj(e,r,t[r]);return e})({},e)))};var Yj=Object.defineProperty,Xj=Object.defineProperties,Jj=Object.getOwnPropertyDescriptors,eV=Object.getOwnPropertySymbols,tV=Object.prototype.hasOwnProperty,rV=Object.prototype.propertyIsEnumerable,nV=(e,t,r)=>t in e?Yj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var iV=Object.defineProperty,sV=Object.defineProperties,aV=Object.getOwnPropertyDescriptors,oV=Object.getOwnPropertySymbols,lV=Object.prototype.hasOwnProperty,cV=Object.prototype.propertyIsEnumerable,dV=(e,t,r)=>t in e?iV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uV=(e,t)=>{for(var r in t||(t={}))lV.call(t,r)&&dV(e,r,t[r]);if(oV)for(var r of oV(t))cV.call(t,r)&&dV(e,r,t[r]);return e},pV=(e,t)=>sV(e,aV(t));const mV=(0,s.$j)((function(){return(0,o.P1)(((e,{isMiniPlayer:t})=>t),(0,Db.Z)(),vb(),(0,yb.Z)(),By(),(0,o.P1)((0,fb.Z)((0,o.P1)((0,o.P1)((0,Sb.Z)(),(e=>{var t;return null!=(t=null==e?void 0:e.Marker)?t:[]})),(0,fh.Z)(Ue.Z5),(0,fh.Z)(Ue._t),(0,fh.Z)(Ue.ie),((e,t,r,n)=>e.filter((e=>t&&e.type===bb||r&&e.type===Zb||n&&"addToWatchlist"===e.type)))),(e=>e)),(0,Fy.Z)("positionSeconds"),((e,t)=>{const r=1e3*t;return e.find((e=>e.startTimeOffset<=r&&e.endTimeOffset>r))})),(0,o.P1)((0,Sb.Z)(),Nt.Z,$y.Z,((e,t,r)=>{let n,i;if(e){const s=r[e.serverEntityID],a=t[e.providerEntityID];n=null==s?void 0:s.machineIdentifier,i=null==a?void 0:a.identifier}return{machineIdentifier:n,providerIdentifier:i}})),Mb(),(0,o.P1)(jt.Z,Ib,(0,yb.Z)(),((e,t,r)=>{const n=null==r?void 0:r.vast;if(n)return n.internal?y.Z.join(n.url,{"X-Plex-Token":e.authToken,debug:t===Pb.Z.VAST?1:void 0}):n.url})),((e,t,r,n,i,s,a,o,l)=>{var c;let d;if(n){const e=(0,Tb.getMetadataType)(n.type);d=e&&e.mediaType}const u=d===og.j0,p=d===og.pX,{machineIdentifier:m,providerIdentifier:h}=a;return{marker:s,isMusic:u,isVideo:p,isPlayQueueLoading:t.isPlayQueueLoading,isMediaLoading:t.isMediaLoading,isPostPlayLoading:t.isPostPlayLoading,isBuffering:t.isBuffering,isWatchTogether:t.isWatchTogether,isSettingsVisible:t.isSettingsVisible,isChaptersVisible:t.isChaptersVisible,isSubtitlesOffsetSettingsVisible:t.isSubtitlesOffsetSettingsVisible,isWatchTogetherParticipantsVisible:t.isWatchTogetherParticipantsVisible,isPlayQueueVisible:t.isPlayQueueVisible,isLyricsVisible:t.isLyricsVisible,isPostPlayVisible:t.isPostPlayVisible,isWatchTogetherLobbyVisible:t.isWatchTogetherLobbyVisible,hasError:t.hasError,hasConflicts:t.hasConflicts,hasMediaOverlays:!!(null==(c=null==o?void 0:o.Overlay)?void 0:c.length),confirmLiveTVPlayback:t.confirmLiveTVPlayback,hasLiveTVProtocol:!!i&&i.protocols.includes(Ob.K),showBackgroundVideoPlayer:!(!l&&!r||e),currentMediaType:d,confirmPlaybackPayload:t.confirmPlaybackPayload,confirmOffsetPayload:t.confirmOffsetPayload,advertisingNoticePayload:t.advertisingNoticePayload,confirmRemoteToLocal:t.confirmRemoteToLocal,confirmLocalToRemote:t.confirmLocalToRemote,adState:t.adState,adPositionSeconds:t.adPositionSeconds,adDurationSeconds:t.adDurationSeconds,adDisplayIndex:t.adDisplayIndex,adDisplayTotal:t.adDisplayTotal,vastUrl:l,bufferedRanges:t.bufferedRanges,machineIdentifier:m,providerIdentifier:h}}))}),(function(e,t){const{playerType:r}=t;return{onUpdateBufferedRanges(t){e(gb.qo({playerType:r,bufferedRanges:t}))},onUpdateCurrentAd(t){e(Ce.Yd(pV(uV({},t),{playerType:r})))}}}))((function(e){return i.createElement(_I,((e,t)=>Xj(e,Jj(t)))(((e,t)=>{for(var r in t||(t={}))tV.call(t,r)&&nV(e,r,t[r]);if(eV)for(var r of eV(t))rV.call(t,r)&&nV(e,r,t[r]);return e})({},e),{mediaComponent:e.isMusic?HZ:EI,playerComponent:e.isMiniPlayer?qj:zj,playerType:m.Se}))}));mV.propTypes=pV(uV({},mV.propTypes),{isMiniPlayer:hb().bool,playerType:hb().string.isRequired});const hV=mV;var gV=Object.defineProperty,yV=Object.defineProperties,vV=Object.getOwnPropertyDescriptors,fV=Object.getOwnPropertySymbols,bV=Object.prototype.hasOwnProperty,ZV=Object.prototype.propertyIsEnumerable,SV=(e,t,r)=>t in e?gV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const PV={dispatchRestorePlayQueue:Xb.dP,dispatchEndPlayback:Ce.Mh,dispatchUpdatePlayerError:gb.IE};class IV extends i.Component{constructor(){super(...arguments),this.onEnterFullscreen=()=>{(0,Ze.DB)("fullscreenManager").enter()},this.onExitFullscreen=()=>{(0,Ze.DB)("fullscreenManager").exit()},this.onToggleFullscreen=()=>{this.props.isFullscreen?this.onExitFullscreen():this.onEnterFullscreen()}}componentDidMount(){this._restorePlayQueue(),this.props.isServerlessPlayer&&this.props.dispatchEndPlayback({playerType:this.props.playerType})}componentWillUnmount(){this.props.isOpen&&this.props.dispatchEndPlayback({playerType:this.props.playerType,isForced:!0})}componentDidUpdate(e){const{dispatchEndPlayback:t,isFullscreen:r,isMiniPlayer:n,isOpen:i,isServerlessPlayer:s,playerType:a}=this.props;this._restorePlayQueue(),s&&!e.isServerlessPlayer&&t({playerType:a});const o=(0,Ze.DB)("fullscreenManager"),l=!i&&e.isOpen,c=n&&!e.isMiniPlayer;r&&(l||c)&&o.shouldExitOnPlayerClose&&this.onExitFullscreen()}componentDidCatch(e,t){jo.Z.error(e),this.props.dispatchEndPlayback({playerType:this.props.playerType}),this.props.dispatchUpdatePlayerError({playerType:this.props.playerType,errorMessage:(0,Se.Z)("There was an unexpected error during playback. Please visit our forums if you continue to experience problems.")})}_restorePlayQueue(){const{playerType:e,isOpen:t,restorePlayQueuePayload:r,dispatchRestorePlayQueue:n}=this.props;(0,a.LX)(up.Z.location.pathname,{path:vt.Z.watchNow,exact:!0})||t||!r||e===(0,m.f_)(r.playQueueType)&&n(r)}render(){const e=this.props,{component:t,isServerlessPlayer:r,restorePlayQueuePayload:n,dispatchRestorePlayQueue:s,dispatchEndPlayback:a,dispatchUpdatePlayerError:o}=e,l=((e,t)=>{var r={};for(var n in e)bV.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&fV)for(var n of fV(e))t.indexOf(n)<0&&ZV.call(e,n)&&(r[n]=e[n]);return r})(e,["component","isServerlessPlayer","restorePlayQueuePayload","dispatchRestorePlayQueue","dispatchEndPlayback","dispatchUpdatePlayerError"]);return r?null:i.createElement(t,((e,t)=>yV(e,vV(t)))(((e,t)=>{for(var r in t||(t={}))bV.call(t,r)&&SV(e,r,t[r]);if(fV)for(var r of fV(t))ZV.call(t,r)&&SV(e,r,t[r]);return e})({},l),{onEnterFullscreenPress:this.onEnterFullscreen,onExitFullscreenPress:this.onExitFullscreen,onToggleFullscreen:this.onToggleFullscreen}))}}const EV=(0,s.$j)((function(){return(0,o.P1)(rT.Z,(e=>e.isFullscreen),(0,Db.Z)(),QZ(),By(),(0,o.P1)((e=>e.user.id),(0,Ze.DB)("selectRestorePlayQueue"),Nt.Z,$y.Z,((e,t,r,n)=>{let i;t&&t[e]&&(i=t[e]);const s=i&&r[i.providerEntityID],a=i&&n[i.serverEntityID];if(i&&i.playQueueID&&a&&a.isConnected&&s&&s.isPopulated)return i})),((e,t,r,n,i,s)=>{const{confirmPlayerUpsellPayload:a,isOpen:o,openState:l}=r;return{confirmPlayerUpsellPayload:a,isOpen:o,isServerlessPlayer:o&&(!n||!i),isMiniPlayer:l===qb.y,isRemotePlayer:e,isFullscreen:t,hasFullscreen:(0,Ze.DB)("fullscreenManager").hasFullscreen,restorePlayQueuePayload:s}}))}),PV)(IV);var wV=r(18622),CV=r(11244),MV=r(25511),DV=Object.defineProperty,OV=Object.defineProperties,TV=Object.getOwnPropertyDescriptors,xV=Object.getOwnPropertySymbols,AV=Object.prototype.hasOwnProperty,kV=Object.prototype.propertyIsEnumerable,NV=(e,t,r)=>t in e?DV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function RV(e){return(0,o.P1)((0,WP.Z)(),CV.Z,wV.Z,PD.Z,((t,r,n,i)=>e({server:r,provider:n,stableUser:i,metadataItem:t})))}const LV=(0,s.$j)((function(){return(0,o.P1)((0,yb.Z)(),RV(MV.J5),RV(MV.y7),RV(MV.QF),((e,{isVideo:t})=>t),((e,t,r,n,i)=>e?{playQueueItemEntityID:e.entityID,showEditButton:t,showFavoriteButton:r,showMenuButton:!0,showShuffleButton:!0,showUnfavoriteButton:n,showVolume:i}:{}))}))(EO);LV.propTypes=((e,t)=>OV(e,TV(t)))(((e,t)=>{for(var r in t||(t={}))AV.call(t,r)&&NV(e,r,t[r]);if(xV)for(var r of xV(t))kV.call(t,r)&&NV(e,r,t[r]);return e})({},LV.propTypes),{providerEntityID:hb().string.isRequired,metadataItemEntityID:hb().string.isRequired,serverEntityID:hb().string.isRequired,playerType:hb().string.isRequired});const jV=LV;var VV=Object.defineProperty,UV=Object.getOwnPropertySymbols,FV=Object.prototype.hasOwnProperty,BV=Object.prototype.propertyIsEnumerable,_V=(e,t,r)=>t in e?VV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const zV=function(e){const t=e,{playerType:r,bufferStartMilliseconds:n,bufferEndMilliseconds:s,positionMilliseconds:a}=t,o=((e,t)=>{var r={};for(var n in e)FV.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&UV)for(var n of UV(e))t.indexOf(n)<0&&BV.call(e,n)&&(r[n]=e[n]);return r})(t,["playerType","bufferStartMilliseconds","bufferEndMilliseconds","positionMilliseconds"]);return i.createElement(WC,null,i.createElement(QC,null,i.createElement($O,{bufferEndMilliseconds:s,bufferStartMilliseconds:n,playerType:r,positionMilliseconds:a,showBuffer:!0}),i.createElement(sM,((e,t)=>{for(var r in t||(t={}))FV.call(t,r)&&_V(e,r,t[r]);if(UV)for(var r of UV(t))BV.call(t,r)&&_V(e,r,t[r]);return e})({component:jV,playerType:r},o))))},HV=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),(0,yb.Z)(),ni.Z,((e,t={},r)=>{const n=t.metadataItem,{serverEntityID:i,providerEntityID:s,type:a,Media:[o]}=r[n],l=a===Tb.CLIP,c=o&&o.Part&&o.Part[0],d=c&&c.key;return{serverEntityID:i,providerEntityID:s,imageUrl:l?null:d,allowBlur:!0}}))}))(yx),WV=function(e){const{items:t,currentItem:r,size:n,firstIndex:s,renderSlide:a,width:o,height:l}=e;if(!t||!t.length)return null;const c=t.indexOf(r),d=Uu().range(Math.max(0,c-1),Math.min(n,c+1+1));return i.createElement("div",{className:"Carousel-magazine-Ic9QJT"},d.map((e=>{const r=c===e,n=e+s,d=t[e],u={position:"absolute",width:o,height:l,transform:`translate3d(${(e-c)*o}px, 0, 0)`};return i.createElement("div",{key:n,className:r?"Carousel-currentSlide-jOOrQK Carousel-slide-YK9hE2":"Carousel-slide-YK9hE2",style:u},d?a(d):null)})))};var GV=r(9711);const QV={width:"100%",height:"100%"};class $V extends i.Component{constructor(){super(),this.onLoad=()=>{this.setState({loading:!1})},this.onError=()=>{this.setState({error:!0})},this.state={loading:!0,error:!1}}render(){const{serverEntityID:e,providerEntityID:t,url:r,maxWidth:n,maxHeight:s}=this.props,{width:a,height:o}=function(e,t,r=2073600){const n=e*t,i=r/Math.pow((0,GV.Z)(),2),s=Math.sqrt(Math.max(n/i,1));return{width:Math.round(e/s),height:Math.round(t/s)}}(n,s),{loading:l,error:c}=this.state;return i.createElement("div",{className:"SlideImg-slideContainer-g5yxFU"},i.createElement("div",{className:"SlideImg-statusContainer-NqqQfD fadeIn-fadeIn-TL5Fh3"},l&&!c?i.createElement(dl.Z,null):null,c?i.createElement("div",null,(0,Se.Z)("Unable to load photo")):null),i.createElement(Ye.Z,{key:r,backgroundSize:"contain",component:Fe.Z,containerStyle:QV,height:o,providerEntityID:t,serverEntityID:e,url:r,width:a,onError:this.onError,onLoad:this.onLoad}))}}const KV=$V;var qV=Object.defineProperty,YV=Object.getOwnPropertySymbols,XV=Object.prototype.hasOwnProperty,JV=Object.prototype.propertyIsEnumerable,eU=(e,t,r)=>t in e?qV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const tU=(0,s.$j)((function(){return(0,o.P1)((0,WP.Z)(),(0,o.P1)((0,WP.Z)(),(e=>{if(!e||!e.Media)return{};const{type:t,thumb:r,Media:[n]}=e,i="clip"===t,s=n&&n.Part&&n.Part[0],a=s&&s.key;return i||!a?r:a})),((e,t)=>{if(!t||!Object.keys(t).length)return{isLoading:!0};const{serverEntityID:r,providerEntityID:n}=e;return{serverEntityID:r,providerEntityID:n,isLoading:!1,url:t}}))}))((function(e){return e.isLoading?i.createElement(dl.Z,null):i.createElement(KV,((e,t)=>{for(var r in t||(t={}))XV.call(t,r)&&eU(e,r,t[r]);if(YV)for(var r of YV(t))JV.call(t,r)&&eU(e,r,t[r]);return e})({},e))}));var rU=Object.defineProperty,nU=Object.getOwnPropertySymbols,iU=Object.prototype.hasOwnProperty,sU=Object.prototype.propertyIsEnumerable,aU=(e,t,r)=>t in e?rU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const oU=(0,s.$j)((function(){return(0,o.P1)(tA(),(e=>({playQueueItem:e})))}))((function(e){const{playQueueItem:t}=e;return t&&t.type===Tb.PHOTO?i.createElement(tU,((e,t)=>{for(var r in t||(t={}))iU.call(t,r)&&aU(e,r,t[r]);if(nU)for(var r of nU(t))sU.call(t,r)&&aU(e,r,t[r]);return e})({metadataItemEntityID:t.metadataItem},e)):null}));class lU extends i.Component{constructor(){super(...arguments),this.renderSlide=e=>{const{playQueueItemEntityID:t,width:r,height:n}=this.props,s=t===e;return i.createElement(oU,{isCurrent:s,maxHeight:n,maxWidth:r,playQueueItemEntityID:e})}}render(){const{playQueueItemEntityIDs:e,playQueueItemEntityID:t,size:r,firstIndex:n,errorMessage:s,width:a,height:o}=this.props;return i.createElement("div",{className:"PhotoCarousel-carousel-_qAadT"},s?i.createElement("div",{className:"PhotoCarousel-message-f87_Cx"},i.createElement("span",null,s)):null,a&&o&&e&&!s?i.createElement(WV,{currentItem:t,firstIndex:n,height:o,items:e,renderSlide:this.renderSlide,size:r,width:a}):null)}}const cU=lU;function dU(e){const{hideOverlays:t,canSkipPrevious:r,canSkipNext:n,hasFullscreen:s,isFullscreen:a,isPhoto:o,onPlayNextItem:l,onPlayPreviousItem:c,onCastMenuChange:d,onEnterFullscreenPress:u,onExitFullscreenPress:p,onToggleFullscreen:h}=e;return i.createElement("div",{className:t?"PhotoFullPlayerOverlays-hideOverlays-oLryF1":void 0},o?null:i.createElement(SC,{className:"PhotoFullPlayerOverlays-playButton-VNnVhr",isFullscreen:a,playerType:m.pV,onEnterFullscreenPress:u,onExitFullscreenPress:p,onToggleFullscreen:h}),i.createElement("div",{className:"PhotoFullPlayerOverlays-topBar-XUszO4"},i.createElement(yC,{hasFullscreen:s,isFullscreen:a,playerType:m.pV,onCastMenuChange:d,onEnterFullscreenPress:u,onExitFullscreenPress:p})),i.createElement(Jc.Z,{className:"PhotoFullPlayerOverlays-leftButton-MBKgf6 PhotoFullPlayerOverlays-button-UhgcHY",iconComponent:Hd.e,isDisabled:!r,title:(0,Se.Z)("Previous Photo"),onPress:c}),i.createElement(Jc.Z,{className:"PhotoFullPlayerOverlays-rightButton-eOMXj_ PhotoFullPlayerOverlays-button-UhgcHY",iconComponent:zd.V,isDisabled:!n,title:(0,Se.Z)("Next Photo"),onPress:l}))}dU.defaultProps={hideOverlays:!1};const uU=dU;var pU=r(98984),mU=r(30311),hU=r(41229);function gU(e){const t=e["aria-label"],r=e.className,n=e.style,s={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",id:"plex-icon-tag-auto-560"};s["aria-hidden"]=!t,s.style=n,s.className=WT.Z.plexIcon+(r?" "+r:"");const a=[i.createElement.apply(i,["path",{d:"m287.75.983c-28.03 2.775-53.66 11.968-70.36 28.646-.014.014-201.52 201.63-201.52 201.63-19.19 19.2-19.18 50.3-.007 69.48l145.92 145.99c14.328 14.336 35.21 17.958 52.735 11.06l-170.85-170.94c-20.817-20.828.024-41.68.024-41.68 27.762-27.819 244.06-244.19 244.06-244.19",transform:"translate(1 50)"}].concat([])),i.createElement.apply(i,["path",{d:"m559.45 149.47l-.27-83.68c.237-16.899-5.994-33.8-18.799-46.612-12.806-12.813-29.697-19.05-46.48-18.7l-81.41-.293c-38.15-1.625-75.78 7.347-97.84 29.371-.014.014-201.52 201.63-201.52 201.63-19.19 19.2-19.18 50.3-.007 69.48l145.92 145.99c19.233 19.243 50.27 19.18 69.45-.007l201.48-201.59c21.605-21.658 30.65-58.23 29.482-95.6m-63.51-117.95c8.434-.788 17.14 2.048 23.599 8.509 6.438 6.441 9.275 15.12 8.511 23.534l-.136 109.96c-.777 20.799-8.03 39.93-22.269 54.18-.707.707-1.426 1.398-2.157 2.071-.424.482-.866.954-1.326 1.414l-187.55 187.65c-11.515 11.522-30.19 11.519-41.627.074l-132.12-132.19c-11.475-11.481-11.506-30.06.074-41.649l187.55-187.65c.458-.459.928-.899 1.408-1.321.674-.733 1.366-1.455 2.075-2.164 15.795-15.803 37.594-23 61.13-22.19l102.84-.222",transform:"translate(1 50)"}].concat([])),i.createElement.apply(i,["path",{d:"m435.92 172.81c-27.13 0-49.12-22-49.12-49.15 0-27.14 21.993-49.15 49.12-49.15 27.13 0 49.12 22 49.12 49.15 0 27.14-21.993 49.15-49.12 49.15",transform:"translate(1 50)"}].concat([]))];return t&&a.unshift(i.createElement("title",null,t)),i.createElement.apply(i,["svg",s].concat(a))}gU.propTypes={"aria-label":hb().string,className:hb().string,style:hb().object};const yU=gU,vU=function(e){return i.createElement(Ye.Z,{component:Fe.Z,height:110,providerEntityID:e.providerEntityID,serverEntityID:e.serverEntityID,url:e.url,width:110})},fU=function(e){const{serverEntityID:t,providerEntityID:r,summary:n,totalSize:s,url:a,icon:o,onPress:l}=e;return i.createElement("div",{className:"PhotoHub-hub-YAsslv","data-testid":"relatedPhotoItem"},i.createElement(Wo.Z,{onPress:l},i.createElement("div",{className:"PhotoHub-container-LbDG6e"},i.createElement("div",{className:"PhotoHub-overlay-kxXaE7"},i.createElement("div",{className:"PhotoHub-title-olhRWE","data-testid":"relatedPhotoName"},n),i.createElement("div",{className:"PhotoHub-count-u8lDLY","data-testid":"relatedPhotoCount"},o?i.createElement(Ye.Z,{className:"PhotoHub-icon-m_1Lxr",height:14,providerEntityID:r,serverEntityID:t,url:o,width:14}):i.createElement(yU,null),i.createElement("span",null," ",s))),i.createElement("div",{className:"PhotoHub-body-vgYnGt"},i.createElement(vU,{serverEntityID:t,url:a})))))};var bU=Object.defineProperty,ZU=Object.getOwnPropertySymbols,SU=Object.prototype.hasOwnProperty,PU=Object.prototype.propertyIsEnumerable,IU=(e,t,r)=>t in e?bU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class EU extends i.Component{constructor(){super(...arguments),this.onPress=()=>{window.location.href=this.props.hubLink,this.props.endPlayback({playerType:m.pV})}}render(){return i.createElement(fU,((e,t)=>{for(var r in t||(t={}))SU.call(t,r)&&IU(e,r,t[r]);if(ZU)for(var r of ZU(t))PU.call(t,r)&&IU(e,r,t[r]);return e})({onPress:this.onPress},this.props))}}const wU=(0,s.$j)((function(){return(0,o.P1)(((e,{librarySectionKey:t})=>t),(0,Lc.Z)(),(0,sk.Z)(),(0,iN.Z)(),nk(),((e,t,r,n,i)=>({hubLink:(0,ck.Z)(t,r,{key:i.key,title:i.title}),summary:i.summary,totalSize:i.totalSize,url:i.thumb,icon:i.icon})))}),{endPlayback:Ce.Mh})(EU),CU=function(e){const{serverEntityID:t,providerEntityID:r,librarySectionKey:n,hubEntityIDs:s}=e;return s&&s.length?i.createElement("div",{className:"PhotoHubList-container-EZmHhJ","data-testid":"relatedPhotosContainer"},i.createElement("div",{className:"PhotoHubList-title-RKkP0c"},(0,Se.Z)("Related Photos")),i.createElement("div",{className:"PhotoHubList-list-bJ_QV1"},s.map((e=>i.createElement(wU,{key:e,hubEntityID:e,librarySectionKey:n,providerEntityID:r,serverEntityID:t}))))):i.createElement("div",null)};var MU=r(35240);var DU=Object.defineProperty,OU=Object.defineProperties,TU=Object.getOwnPropertyDescriptors,xU=Object.getOwnPropertySymbols,AU=Object.prototype.hasOwnProperty,kU=Object.prototype.propertyIsEnumerable,NU=(e,t,r)=>t in e?DU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,RU=(e,t)=>{for(var r in t||(t={}))AU.call(t,r)&&NU(e,r,t[r]);if(xU)for(var r of xU(t))kU.call(t,r)&&NU(e,r,t[r]);return e},LU=(e,t)=>OU(e,TU(t));const jU=function(e){const{className:t,latitude:r,longitude:n}=e,[s,a]=(0,i.useState)(!0),[o,l]=(0,i.useState)(!1),c=(0,i.useCallback)((()=>a(!1)),[]),d=(0,i.useCallback)((()=>l(!0)),[]),u=`https://www.google.com/maps/search/?api=1&query=${r},${n}`,p={key:"59a999cb8f28fb0a54eb",center:`${r},${n}`,markers:`size:small|color:orange|{${r},${n}`},m=(0,GV.Z)();return i.createElement("div",{className:t},i.createElement(kl.Z,{className:"PhotoMap-map-LcSABQ"},(({width:e,height:t})=>i.createElement(i.Fragment,null,i.createElement("div",{className:"PhotoMap-underlay-btSXwh"},s?i.createElement(dl.Z,null):null,o?i.createElement("span",{className:"PhotoMap-error-cG_5oa"},(0,Se.Z)("Unable to load map.")):null),i.createElement(Wo.Z,{"aria-label":(0,Se.Z)("Open map in new window"),target:"_blank",to:u},i.createElement(MU.Z,{component:Fe.Z,height:t,src:y.Z.join("https://maps.locationiq.com/v2/staticmap",LU(RU({},p),{size:`${e*m}x${t*m}`})),width:e,onError:d,onLoad:c}))))))},VU="PhotoInformation-line-moBlxi",UU=function(e){const{className:t,serverEntityID:r,providerEntityID:n,librarySectionKey:s,hubEntityIDs:a,type:o,model:l,width:c,height:d,container:u,iso:p,aperture:m,exposure:h,size:g,hasGeolocation:y,latitude:v,longitude:f}=e;return i.createElement("div",{className:Ra()(t,"PhotoInformation-photoInformation-iCA1Es")},i.createElement(vc.Z,{autoScroll:!0,className:"PhotoInformation-scroller-d6Q6yT Scroller-vertical-nKq0Q8"},i.createElement("div",{className:"PhotoInformation-exif-FuZeM_"},i.createElement("div",{className:VU},l?i.createElement("div",null,l):i.createElement("div",null,"clip"===o?(0,Se.Z)("Video"):(0,Se.Z)("Photo")),i.createElement(mU.L,null)),i.createElement("div",{className:VU},c&&d?i.createElement("div",null,c,"  ",d):null,g?i.createElement("div",null,(0,hU.Z)(g)):null,u?i.createElement("div",{className:"PhotoInformation-format-QNA0kt"},u):null),p?i.createElement("div",{className:VU},i.createElement("div",null,(0,Se.Z)("ISO")," ",p),i.createElement("div",null,m),i.createElement("div",null,h)):null),i.createElement(CU,{hubEntityIDs:a,librarySectionKey:s,providerEntityID:n,serverEntityID:r})),y?i.createElement(jU,{className:"PhotoInformation-map-qjiT91",latitude:v,longitude:f}):null)};var FU=Object.defineProperty,BU=Object.getOwnPropertySymbols,_U=Object.prototype.hasOwnProperty,zU=Object.prototype.propertyIsEnumerable,HU=(e,t,r)=>t in e?FU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const WU={dispatchFetchRelatedPhotos:pU.GY};class GU extends i.Component{componentDidMount(){this.props.dispatchFetchRelatedPhotos()}componentDidUpdate(e){e.metadataItemEntityID!==this.props.metadataItemEntityID&&this.props.dispatchFetchRelatedPhotos()}render(){const e=this.props,{dispatchFetchRelatedPhotos:t}=e,r=((e,t)=>{var r={};for(var n in e)_U.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&BU)for(var n of BU(e))t.indexOf(n)<0&&zU.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchFetchRelatedPhotos"]);return i.createElement(UU,((e,t)=>{for(var r in t||(t={}))_U.call(t,r)&&HU(e,r,t[r]);if(BU)for(var r of BU(t))zU.call(t,r)&&HU(e,r,t[r]);return e})({},r))}}const QU=(0,s.$j)((function(){return(0,o.P1)((0,Db.Z)(),wb(),((e,t)=>{const{Media:r=[],Geolocation:n={},type:i}=t,s=n.Coordinates,a={serverEntityID:e.serverEntityID,providerEntityID:e.providerEntityID,librarySectionKey:t.librarySectionKey,metadataItemEntityID:t.entityID,hubEntityIDs:e.relatedHubs||[],type:i,hasGeolocation:!!s};if(s&&(a.latitude=parseFloat(s.latitude),a.longitude=parseFloat(s.longitude)),r.length){const e=r[0],t=e.Part;a.size=t&&t[0].size,a.aperture=e.aperture,a.exposure=e.exposure,a.iso=e.iso,a.model=e.model,a.width=e.width,a.height=e.height,a.container=e.container}return a}))}),WU)(GU),$U={width:"100%",height:"100%",top:0,position:"absolute",zIndex:0};class KU extends i.Component{constructor(){super(...arguments),this.onPlayPress=()=>{this.props.onPlayPress&&this.props.onPlayPress(this.props.index)}}render(){const{className:e,serverEntityID:t,providerEntityID:r,url:n,dimension:s,onPlayPress:a}=this.props;return n?i.createElement(Wo.Z,{className:e,isDisabled:!a,onPress:this.onPlayPress},i.createElement(Ye.Z,{component:Fe.Z,height:s,providerEntityID:r,serverEntityID:t,style:$U,url:n,width:s})):null}}const qU=KU,YU=(0,s.$j)((function(){return(0,o.P1)((0,o.P1)((0,WP.Z)(),(e=>{if(!e)return{};const{serverEntityID:t,providerEntityID:r,entityID:n,type:i,thumb:s}=e;return{serverEntityID:t,providerEntityID:r,entityID:n,url:s,isVideo:"clip"===i}})),(({serverEntityID:e,providerEntityID:t,url:r})=>({serverEntityID:e,providerEntityID:t,url:r})))}))(qU),XU=(0,s.$j)((function(){return(0,o.P1)(tA(),(e=>({metadataItemEntityID:e.metadataItem})))}))(YU);class JU extends i.Component{constructor(e,t){super(e,t),this.onMeasure=({width:e,height:t})=>{this.setState({isMeasured:!0,width:e,height:t})},this.state={isMeasured:!1,width:null,height:null}}render(){const{className:e,playQueueItemEntityIDs:t,playQueueItemEntityID:r,firstIndex:n,size:s,onPhotoPress:a}=this.props,{isMeasured:o,width:l,height:c}=this.state,d=t.indexOf(r)+n;let u=[],p=[],m=0;if(o){m=Math.ceil(c);const e=Math.ceil(l/m),t=function({index:e,length:t,renderableWindow:r=t,cellPadding:n=0,cellWidth:i,width:s}){const a=t*i+(t-1)*n;let o=e*(i+n)-(s/2-i/2);a>s&&(o=Math.min(Math.max(o,0),a-s));const l=[],c=Math.max(0,e-r),d=Math.min(t-1,e+r);for(let e=c;e<=d;e++)l[e]=e*(i+n)-o;return{renderStartIndex:c,renderEndIndex:d,positions:l}}({index:d,renderableWindow:e,length:s,cellPadding:2,cellWidth:m,width:l});p=Uu().range(t.renderStartIndex,t.renderEndIndex+1),u=t.positions}return i.createElement("div",{className:Ra()(e,"PhotoStrip-strip-Od2AKS"),"data-testid":"photoStripContainer"},i.createElement(kl.Z,{className:"PhotoStrip-thumbs-YENVnw",onMeasure:this.onMeasure},o?p.map((e=>{const r=u[e],s=d===e,o=t[e-n],l={position:"absolute",width:m,height:m,transform:`translate3d(${r}px, 0, 0)`};return i.createElement("div",{key:e,className:"PhotoStrip-cell-pVHa1M",style:l},i.createElement("div",{className:Ra()("PhotoStrip-thumbContainer-l5DhFb",s&&"PhotoStrip-isSelected-SO2S1Z"),"data-testid":"photoStripItem"},o?i.createElement(XU,{className:"PhotoStrip-thumb-dgjmv2",dimension:m-4,index:e-n,playQueueItemEntityID:o,onPlayPress:a}):null))})):null))}}const eF=JU,tF=parseInt(Ul.Z.playerControlsHeight,10),rF=parseInt(Ul.Z.playerControlsNarrowHeight,10);class nF extends i.Component{constructor(e,t){super(e,t),this.onPhotoStripTogglePress=e=>{this.setState({isPhotoStripOpen:!this.state.isPhotoStripOpen})},this.onPhotoInformationTogglePress=e=>{this.setState({isInformationOpen:!this.state.isInformationOpen})},this.onInteraction=e=>{this.setState({hadRecentInteraction:!0}),this._startInteractionTimer()},this.onInteractionTimeout=()=>{this.setState({hadRecentInteraction:!1}),this._stopInteractionTimer()},this.onContentMeasure=e=>{this.props.onPlaybackDimensionsChange(e)},this.onControlsMenuChange=e=>{this.setState({isControlsMenuOpen:e})},this.onCastMenuChange=e=>{this.setState({isCastMenuOpen:e})},this.onControlsMouseEnter=e=>{this.setState({disableInteractionTimer:!0})},this.onControlsMouseLeave=e=>{this.setState({disableInteractionTimer:!1})},this.state={disableInteractionTimer:!1,isPhotoStripOpen:!1,isInformationOpen:!1,isControlsMenuOpen:!1,isCastMenuOpen:!1,hadRecentInteraction:!1}}componentDidMount(){this._startInteractionTimer()}componentDidUpdate(e,t){const{disableInteractionTimer:r}=this.state,{disableInteractionTimer:n}=t,i=!n&&r;n&&!r?this._startInteractionTimer():i&&this._stopInteractionTimer()}componentWillUnmount(){this._stopInteractionTimer()}_startInteractionTimer(){this.state.disableInteractionTimer||(this._stopInteractionTimer(),this._interactionTimeoutID=window.setTimeout(this.onInteractionTimeout,2e3))}_stopInteractionTimer(){this._interactionTimeoutID&&window.clearTimeout(this._interactionTimeoutID)}render(){const{isPhotoStripOpen:e,isInformationOpen:t,hadRecentInteraction:r}=this.state,{playQueueItemEntityIDs:n,playQueueItemEntityID:s,isPlayQueueLoading:a,isVideo:o,isPhoto:l,size:c,firstIndex:d,width:u,height:p,canSkipPrevious:m,canSkipNext:h,errorMessage:g,positionMilliseconds:y,bufferStartMilliseconds:v,bufferEndMilliseconds:f,hasFullscreen:b,isFullscreen:Z,isMediaLoading:S,isBuffering:P,isNarrowLayout:I,playerType:E,onExitFullscreenPress:w,onEnterFullscreenPress:C,onToggleFullscreen:M,onPlayNextItem:D,onPlayPreviousItem:O,onPlayItem:T}=this.props,{isControlsMenuOpen:x,isCastMenuOpen:A}=this.state,k=e||t,N=!(k||r||x||A),R=!r&&!A,L=k,j=!l&&(S||P),V=I?rF:tF,U=N?null:`translateY(${-V}px)`;return i.createElement("div",{className:Ra()("PhotoFullPlayer-fullPlayer-fcxlis",N&&"PhotoFullPlayer-hideControls-AsiFhi",L&&"PhotoFullPlayer-dockControls-ACNCHJ"),"data-testid":"photoPlayerContainer",onMouseDown:this.onInteraction,onMouseMove:this.onInteraction,onTouchEnd:this.onInteraction,onTouchStart:this.onInteraction},l?i.createElement(HV,{playQueueItemEntityID:s,playerType:E}):null,i.createElement("div",{className:"PhotoFullPlayer-player-AHMvpD"},i.createElement("div",{className:"PhotoFullPlayer-main-qXaGZ5"},i.createElement(kl.Z,{className:"PhotoFullPlayer-content-ZR2Qpi",onMeasure:this.onContentMeasure},j?i.createElement("div",{className:"PhotoFullPlayer-spinner-M5sZ6y"},i.createElement(dl.Z,{size:el.ln})):null,i.createElement(cU,{errorMessage:g,firstIndex:d,height:p,playQueueItemEntityID:s,playQueueItemEntityIDs:n,size:c,width:u}),a?null:i.createElement(uU,{canSkipNext:h,canSkipPrevious:m,hasFullscreen:b,hideOverlays:R,isFullscreen:Z,isPhoto:l,onCastMenuChange:this.onCastMenuChange,onEnterFullscreenPress:C,onExitFullscreenPress:w,onPlayNextItem:D,onPlayPreviousItem:O,onToggleFullscreen:M})),e?i.createElement(eF,{className:"PhotoFullPlayer-mainFooter-oPipVN",firstIndex:d,playQueueItemEntityID:s,playQueueItemEntityIDs:n,size:c,onPhotoPress:T}):null),t?i.createElement(QU,{className:"PhotoFullPlayer-aside-WlQHKx",playerType:E}):null),a?null:i.createElement("div",{className:"PhotoFullPlayer-bottomBar-DABJzn PhotoFullPlayer-bar-YN4PKF",style:{bottom:-V,height:V,transform:U,transform:U,transform:U},onMouseEnter:this.onControlsMouseEnter,onMouseLeave:this.onControlsMouseLeave},i.createElement(zV,{activatePhotoInformationButton:t,activatePhotoStripButton:e,bufferEndMilliseconds:f,bufferStartMilliseconds:v,isPhoto:l,isVideo:o,playerType:E,positionMilliseconds:y,showPhotoInformationButton:!0,showPhotoStripButton:!0,onControlsMenuChange:this.onControlsMenuChange,onPhotoInformationPress:this.onPhotoInformationTogglePress,onPhotoStripPress:this.onPhotoStripTogglePress})))}}const iF=nF;var sF=Object.defineProperty,aF=Object.getOwnPropertySymbols,oF=Object.prototype.hasOwnProperty,lF=Object.prototype.propertyIsEnumerable,cF=(e,t,r)=>t in e?sF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const dF=function(e){return i.createElement(Hj,{isPlayQueueLoading:e.isPlayQueueLoading},i.createElement(zV,((e,t)=>{for(var r in t||(t={}))oF.call(t,r)&&cF(e,r,t[r]);if(aF)for(var r of aF(t))lF.call(t,r)&&cF(e,r,t[r]);return e})({},e)))};var uF=Object.defineProperty,pF=Object.defineProperties,mF=Object.getOwnPropertyDescriptors,hF=Object.getOwnPropertySymbols,gF=Object.prototype.hasOwnProperty,yF=Object.prototype.propertyIsEnumerable,vF=(e,t,r)=>t in e?uF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function fF(e){return!!e.playQueueItemEntityID&&!e.isPaused&&!e.isRemotePlayer&&e.isPhoto}class bF extends i.Component{constructor(e,t){super(e,t),this.onSlideShowAdvance=()=>{this.props.onPlayNextItem({autoPlay:!0})},this.onPlaybackDimensionsChange=({width:e,height:t})=>{this.setState({mediaWidth:e,mediaHeight:t})},this.state={mediaHeight:0,mediaWidth:0}}componentDidMount(){fF(this.props)&&this._startSlideshow()}componentDidUpdate(e){const t=fF(e),r=fF(this.props),n=r!==t,i=this.props.playQueueItemEntityID!==e.playQueueItemEntityID;(n||i)&&(r?e.isPaused?this.props.onPlayNextItem({autoPlay:!0}):this._startSlideshow():this._stopSlideshow())}componentWillUnmount(){this._stopSlideshow(),this._playerTimer=window.clearTimeout(this._playerTimer)}_startSlideshow(){this._stopSlideshow(),this._slideshowTimer=window.setTimeout(this.onSlideShowAdvance,5e3)}_stopSlideshow(){this._slideshowTimer&&(this._slideshowTimer=window.clearTimeout(this._slideshowTimer))}render(){const{isMiniPlayer:e,isRemotePlayer:t}=this.props,{mediaWidth:r,mediaHeight:n}=this.state;return i.createElement(_I,((e,t)=>pF(e,mF(t)))(((e,t)=>{for(var r in t||(t={}))gF.call(t,r)&&vF(e,r,t[r]);if(hF)for(var r of hF(t))yF.call(t,r)&&vF(e,r,t[r]);return e})({},this.props),{hasConflicts:!1,isPostPlayVisible:!1,isRemotePlayer:t,mediaComponent:EI,mediaHeight:n,mediaWidth:r,playerComponent:e?dF:iF,playerType:m.pV,onPlaybackDimensionsChange:this.onPlaybackDimensionsChange}))}}const ZF=bF;var SF=Object.defineProperty,PF=Object.defineProperties,IF=Object.getOwnPropertyDescriptors,EF=Object.getOwnPropertySymbols,wF=Object.prototype.hasOwnProperty,CF=Object.prototype.propertyIsEnumerable,MF=(e,t,r)=>t in e?SF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const DF=(0,s.$j)((function(){return(0,o.P1)(((e,{isMiniPlayer:t})=>t),(0,Db.Z)(),vb(),(0,yb.Z)(),((e,t,r,n)=>{const i={serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,confirmPlaybackPayload:t.confirmPlaybackPayload,confirmOffsetPayload:t.confirmOffsetPayload,confirmRemoteToLocal:t.confirmRemoteToLocal,confirmLocalToRemote:t.confirmLocalToRemote,isPlayQueueLoading:t.isPlayQueueLoading,isMediaLoading:t.isMediaLoading,isPaused:t.isPaused,isBuffering:t.isBuffering,hasError:t.hasError,errorMessage:t.errorMessage,showBackgroundVideoPlayer:!!r&&!e},s=t.playQueue;if(s&&n){const e=s.currentIndex;i.playQueueItemEntityIDs=s.playQueueItems,i.playQueueItemEntityID=n.entityID,i.canSkipPrevious=e>0,i.canSkipNext=e<s.playQueueItems.length-1,i.size=s.length,i.firstIndex=s.playQueueSelectedItemOffset-e,i.currentMediaType=(0,Tb.getMetadataType)(n.type).mediaType,i.currentMediaSubtype=n.subtype}return i.isVideo=i.currentMediaType===og.pX,i.isPhoto=i.currentMediaType===og.pV,i}))}),(function(e,t){const{playerType:r}=t;return{onPlayPreviousItem(){e(Xb.oA({playerType:r}))},onPlayNextItem(t={}){e(Xb.o1({playerType:r,autoPlay:t.autoPlay}))},onPlayItem(t){e(Xb.gP({playerType:r,index:t}))},onTogglePlayPause(){e(gb.ID({playerType:r}))}}}))(ZF);DF.propTypes=((e,t)=>PF(e,IF(t)))(((e,t)=>{for(var r in t||(t={}))wF.call(t,r)&&MF(e,r,t[r]);if(EF)for(var r of EF(t))CF.call(t,r)&&MF(e,r,t[r]);return e})({},DF.propTypes),{playerType:hb().string.isRequired});const OF=DF;var TF=r(70668),xF=r(493),AF=r(34154),kF=r(82155),NF=r(60279);const RF=new Date(864e13),LF="LibraryUpgradeReminder-note-C6v0U3";function jF(e){const t=(0,s.I0)(),{isOpen:r,onClose:n,onOpen:a}=(0,sl.Z)(),{onDismiss:o}=e,l=(0,i.useCallback)((()=>{n(),o()}),[o,n]),c=(0,s.v9)(rf.Z),d=(0,i.useCallback)((e=>{l(),(0,kF.R)(t,c,e)}),[c,t,l]);return(0,i.useEffect)((()=>{a()}),[a]),i.createElement(tl.Z,{isOpen:r,metricsPage:u.xC,onModalClose:l},i.createElement(TF.ZP,{onSubmit:d},i.createElement(rl.Z,{onModalClose:l},i.createElement(Xo.Z,null,(0,Se.Z)("Turbocharge Your Metadata")),i.createElement(Ko.Z,null,i.createElement("div",{className:"LibraryUpgradeReminder-banner-mfmZC9"}),i.createElement(lv.Z,{className:"LibraryUpgradeReminder-strong-_D9EH4",component:"div",message:(0,Se.Z)("Upgrade your Movie and TV libraries to {openLink}the new improved metadata agents today{closeLink}!"),tags:[{open:"openLink",close:"closeLink",component:Wo.Z,kind:Jo._8,target:"_blank",to:ar.nJ}]}),i.createElement("ul",null,i.createElement("li",null,(0,Se.Z)("Much faster, more accurate matching")),i.createElement("li",null,(0,Se.Z)("The best blend of artwork, summaries, ratings, and more from all your favorite sources")),i.createElement("li",null,(0,Se.Z)("Automatic collections from The Movie Database")),i.createElement("li",null,(0,Se.Z)("More control over TV season titles, episode ordering, and extras"))),i.createElement("div",{className:LF},(0,Se.Z)("You can review servers and libraries available for upgrade in server settings. The agent these libraries use will eventually stop receiving updates and you shouldnt encounter any problems upgrading the libraries.")),i.createElement("div",{className:LF},(0,Se.Z)('Note: Existing items in your libraries will not be affected until they are refreshed. You can refresh them individually or upgrade all existing items with "Refresh All Metadata".'))),i.createElement(xF.Z,null,i.createElement(as.Z,{checkboxText:(0,Se.Z)("Refresh all metadata"),formGroupClassName:"LibraryUpgradeReminder-checkInputGroup-qRoU1B",initialValue:!0,name:"refreshMetadata",size:el.HC}),i.createElement(AF.Z,null,i.createElement($o.Z,{onPress:l},(0,Se.Z)("Not now")),i.createElement($o.Z,{kind:Jo._8,type:"submit"},(0,Se.Z)("Upgrade Libraries")))))))}function VF(){const e=(0,s.v9)(rf.Z),{isExpired:t,onDismiss:r}=function(e,{key:t,remindAfter:r}){const n=(0,s.I0)(),a=(0,s.v9)((0,oe.Z)("reminders")),o=(0,pP.Z)(e,t),l=a.find((e=>e.id===o)),c=(0,i.useCallback)((()=>{n((0,$s.JY)({id:o,remindAfter:r}))}),[n,o,r]);return{isExpired:!l||(0,NF.Z)(l.remindAfter),onDismiss:c}}(uP.Z.LibraryUpgrade,{key:"",remindAfter:RF});return e.length&&t?i.createElement(jF,{onDismiss:r}):i.createElement(i.Fragment,null)}var UF=Object.defineProperty,FF=Object.getOwnPropertySymbols,BF=Object.prototype.hasOwnProperty,_F=Object.prototype.propertyIsEnumerable,zF=(e,t,r)=>t in e?UF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const HF=i.lazy((()=>r.e(602).then(r.bind(r,83602)))),WF=i.lazy((()=>Promise.all([r.e(81),r.e(272),r.e(328)]).then(r.bind(r,85447)))),GF=i.lazy((()=>r.e(147).then(r.bind(r,63147)))),QF=i.lazy((()=>r.e(558).then(r.bind(r,92558)))),$F=i.lazy((()=>r.e(970).then(r.bind(r,73970)))),KF=i.lazy((()=>Promise.all([r.e(394),r.e(272),r.e(469)]).then(r.bind(r,94364)))),qF=i.lazy((()=>r.e(830).then(r.bind(r,12830)))),YF=i.lazy((()=>r.e(732).then(r.bind(r,18732)))),XF=i.lazy((()=>Promise.all([r.e(81),r.e(17),r.e(158)]).then(r.bind(r,84377)))),JF=i.lazy((()=>Promise.all([r.e(81),r.e(17),r.e(570)]).then(r.bind(r,80209)))),eB=i.lazy((()=>r.e(756).then(r.bind(r,69756)))),tB=i.lazy((()=>r.e(824).then(r.bind(r,83824)))),rB=i.lazy((()=>r.e(426).then(r.bind(r,38426)))),nB=i.lazy((()=>r.e(975).then(r.bind(r,61975)))),iB=i.lazy((()=>Promise.all([r.e(394),r.e(242),r.e(691)]).then(r.bind(r,76691)))),sB=i.lazy((()=>r.e(230).then(r.bind(r,37230)))),aB="scroll-container dark-scrollbar",oB=(0,o.P1)(f.Z,(e=>e.hasAttemptedSignIn)),lB=(0,o.P1)(c.Z,(e=>e.isUnavailable));function cB(){!function(){const e=(0,s.I0)(),t=(0,a.TH)();(0,i.useEffect)((()=>{e((0,_.$e)())}),[t,e])}(),function(){const e=(0,s.I0)(),t=(0,a.k6)();(0,i.useEffect)((()=>(e((0,Pe.xM)({location:{pathname:t.location.pathname,search:t.location.search}})),t.listen((t=>{e((0,Pe.xM)({location:{pathname:t.pathname,search:t.search}}))})))),[e,t])}(),function(){const{authToken:e}=(0,s.v9)(f.Z);(0,i.useEffect)((()=>{v.S.setHeader("x-plex-token",e)}),[e])}();const e=(0,s.v9)(lB),t=(0,s.v9)(oB),r=(0,s.v9)(w)===C.Ik.Locked,n=(t||e)&&!r,o=function(e){var t,r;const n=(0,s.I0)(),a=(0,is.b)(),o=(0,s.v9)(Vm),l=(0,Bm.Z)(!!o),c=(0,s.v9)((0,qe.Z)(Ue.hq)),d=(0,s.v9)(cs.Z),u=(0,s.v9)(Um.Z),p=(0,Fm.Z)(),m=(0,i.useRef)(!c),{viewStateSync:{isPopulated:h,isPending:g,consent:y,error:v}}=(0,s.v9)(ms.Z);return(0,i.useEffect)((()=>{!g&&!h&&!v&&d.isConnected&&e&&u&&n(hs.Z.actions.fetchViewStateSync({server:d}))}),[d,n,v,g,h,u,e]),(0,i.useEffect)((()=>{o&&!l&&a.onOpen()}),[a,l,o]),(0,i.useEffect)((()=>{l&&!a.isOpen&&n(hs.Z.actions.showViewStateSyncPrompt({viewStateSyncConfig:void 0}))}),[n,a.isOpen,l]),(0,i.useEffect)((()=>{h&&null===y&&p&&m.current&&(a.onOpen(),m.current=!1)}),[p,h,a,y]),(0,i.useEffect)((()=>{l&&!o&&a.onClose()}),[a,l,o]),{modalState:a,origin:null!=(t=null==o?void 0:o.origin)?t:"",page:null!=(r=null==o?void 0:o.page)?r:C.ZJ.Default}}(n),c=(0,b.Z)(),M=(0,g.Z)(c.legacy),{context:D}=(0,a.UO)();return i.createElement(i.Fragment,null,r?null:i.createElement(ft,null),n?i.createElement(jm.Z,((e,t)=>{for(var r in t||(t={}))BF.call(t,r)&&zF(e,r,t[r]);if(FF)for(var r of FF(t))_F.call(t,r)&&zF(e,r,t[r]);return e})({},o)):null,i.createElement(P.Z,null,i.createElement(i.Suspense,{fallback:i.createElement(Io.Z,null,i.createElement(I.Z,null,i.createElement(E.Z,null)))},i.createElement(a.rs,null,i.createElement(a.AW,{component:QF,exact:!0,path:vt.Z.firstRunExperience}),i.createElement(a.AW,{component:km,exact:!0,path:vt.Z.serverSetup}),i.createElement(a.AW,{component:$m,exact:!0,path:vt.Z.watchNow}),i.createElement(a.AW,null,i.createElement("div",null,i.createElement(Jf,null)),i.createElement("div",{className:aB},i.createElement(P.Z,null,i.createElement(i.Suspense,{fallback:i.createElement(Io.Z,null,i.createElement(I.Z,null,i.createElement(E.Z,null)))},i.createElement(a.rs,null,i.createElement(a.AW,{component:Au,exact:!0,path:vt.Z.serverAwait}),i.createElement(a.AW,{exact:!0,path:vt.Z.logout},i.createElement(Io.Z,null,i.createElement(pb,null))),i.createElement(a.AW,{exact:!0,path:vt.Z.login},i.createElement(Io.Z,null,i.createElement(tb,null))),i.createElement(a.AW,{exact:!0,path:vt.Z.signUp},i.createElement(Io.Z,null,i.createElement(Up,{signUp:!0}))),i.createElement(a.AW,{component:HF,exact:!0,path:vt.Z.announcements}),i.createElement(a.AW,{component:$F,exact:!0,path:vt.Z.info}),i.createElement(a.AW,{component:qF,exact:!0,path:vt.Z.logs}),i.createElement(a.AW,{component:iB,path:vt.V}),i.createElement(a.AW,null,i.createElement(Io.Z,null,i.createElement(Po.Z,null,i.createElement(VF,null),i.createElement(xu,null),i.createElement(P.Z,null,i.createElement(i.Suspense,{fallback:i.createElement(S.Z,null,i.createElement(vh,null),i.createElement(I.Z,null,i.createElement(E.Z,null)))},i.createElement(a.rs,null,l.Z.allowSyncDownload?i.createElement(a.AW,{component:GF,exact:!0,path:vt.Z.downloads}):null,i.createElement(a.AW,{exact:!0,path:vt.Z.home},i.createElement(Z.ZP,{metricsContextParam:D,metricsPage:u.Sd},i.createElement(ts,null))),i.createElement(a.AW,{component:KF,exact:!0,path:vt.Z.hybridGuide}),i.createElement(a.AW,{component:WF,exact:!0,path:vt.Z.media}),i.createElement(a.AW,{component:YF,exact:!0,path:vt.Z.playHistory}),i.createElement(a.AW,{component:XF,exact:!0,path:vt.Z.playlist}),i.createElement(a.AW,{component:M?JF:eB,exact:!0,path:vt.Z.prePlay}),i.createElement(a.AW,{component:tB,exact:!0,path:vt.Z.providerSettings}),i.createElement(a.AW,{component:rB,exact:!0,path:vt.Z.search}),i.createElement(a.AW,{component:sb,exact:!0,path:vt.Z.serverDownloadMessage}),i.createElement(a.AW,{component:nB,exact:!0,path:vt.Z.serverUpdate}),i.createElement(a.l_,{exact:!0,path:vt.Z.activity,to:y.Z.join((0,a.Gn)(vt.Z.discoverHome),{pivot:p.I9})}),i.createElement(a.l_,{exact:!0,path:vt.Z.watchlist,to:`?pivot=${p.$c}`}),i.createElement(a.AW,{exact:!0,path:vt.Z.profile},i.createElement(Z.ZP,{metricsContextParam:d.SELF,metricsPage:u.ih},i.createElement(Zo.Z,null))),i.createElement(a.AW,{exact:!0,path:vt.Z.editProfile},i.createElement(Z.ZP,{metricsPage:u.tj},i.createElement(Vs,null))),i.createElement(a.AW,{exact:!0,path:vt.Z.friendProfile},i.createElement(Z.ZP,{metricsContextParam:d.FRIEND,metricsPage:u.ih},i.createElement(pa,null))),i.createElement(a.AW,{exact:!0,path:vt.Z.friends},i.createElement(Z.ZP,{metricsPage:u.eH},i.createElement(bo.Z,null))),i.createElement(a.AW,{exact:!0,path:vt.Z.prePlayActivityFeed},i.createElement(eB,{page:be})),i.createElement(a.AW,{exact:!0,path:vt.Z.activityCard},i.createElement(V,null)),i.createElement(a.AW,{exact:!0,path:vt.Z.profileWatchlist},i.createElement(ha,{page:fo})),i.createElement(a.AW,{exact:!0,path:vt.Z.profileRatings},i.createElement(ha,{page:Ta})),i.createElement(a.AW,{exact:!0,path:vt.Z.profileWatchHistory},i.createElement(ha,{page:co})),i.createElement(a.AW,{component:ma.Z})))))),(h.Z.hasServiceWorker,null),n?i.createElement(i.Fragment,null,i.createElement(yh,null),i.createElement(Ct,null)):null))))))))),r?i.createElement(Lm,null):null,n?i.createElement(i.Fragment,null,i.createElement(rs,null,i.createElement(EV,{component:hV,playerType:m.Se})),i.createElement(rs,null,i.createElement(EV,{component:OF,playerType:m.pV}))):null,l.Z.allowSyncDownload?i.createElement(i.Suspense,{fallback:null},i.createElement(sB,null)):null)}},43046:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});const n=250},47240:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(85229),i=r(32601);const s=(0,n.oM)({name:"friends",initialState:{allFriends:{friends:[],error:null,isPending:!1,isPopulated:!1},sentInvites:{invites:[],error:null,isPending:!1,isPopulated:!1},receivedInvites:{invites:[],error:null,isPending:!1,isPopulated:!1},isRemoving:!1,isAdding:!1,isValidating:!1,isSendingHomeUserInvite:!1,isValid:!1,error:null},reducers:{fetchAllFriends(e,t){(0,i.er)(e.allFriends)},fetchAllFriendsSucceeded(e,{payload:t}){(0,i.vv)(e.allFriends),e.allFriends.friends=t.friends},fetchAllFriendsFailed(e,{payload:t}){(0,i.VQ)(e.allFriends,t.error)},fetchSentInvites(e,t){(0,i.er)(e.sentInvites)},fetchSentInvitesSucceeded(e,{payload:t}){(0,i.vv)(e.sentInvites),e.sentInvites.invites=t.invites},fetchSentInvitesFailed(e,{payload:t}){(0,i.VQ)(e.sentInvites,t.error)},fetchReceivedInvites(e,t){(0,i.er)(e.receivedInvites)},fetchReceivedInvitesSucceeded(e,{payload:t}){(0,i.vv)(e.receivedInvites),e.receivedInvites.invites=t.invites},fetchReceivedInvitesFailed(e,{payload:t}){(0,i.VQ)(e.receivedInvites,t.error)},rejectFriendInvite(e,t){e.isRemoving=!0,e.error=null},rejectFriendInviteSucceeded(e,{payload:t}){e.sentInvites.invites=t.sentInvites,e.receivedInvites.invites=t.receivedInvites,e.isRemoving=!1},rejectFriendInviteFailed(e,{payload:t}){e.isRemoving=!1,e.error=t.error},removeFriend(e,t){e.isRemoving=!0,e.error=null},removeFriendSucceeded(e,{payload:t}){e.isRemoving=!1,e.allFriends.friends=t.friends},removeFriendFailed(e,{payload:t}){e.isRemoving=!1,e.error=t.error},acceptFriendInvite(e,t){e.isAdding=!0,e.error=null},acceptFriendInviteSucceeded(e,{payload:t}){e.allFriends.friends=t.friends,e.receivedInvites.invites=t.receivedInvites,e.isAdding=!1},acceptFriendInviteFailed(e,{payload:t}){e.isAdding=!1,e.error=t.error},sendFriendInvite(e,t){e.isAdding=!0,e.error=null},sendFriendInviteSucceeded(e,{payload:t}){e.sentInvites.invites=t.sentInvites,e.isAdding=!1},sendFriendInviteFailed(e,{payload:t}){e.error=t.error,e.isAdding=!1},validateUsername(e,t){e.isValidating=!0,e.error=null},validateUsernameSucceeded(e,t){e.isValidating=!1,e.isValid=!0},validateUsernameFailed(e,{payload:t}){e.isValidating=!1,e.isValid=!1,e.error=t.error},clearError(e,t){e.error=null},sendHomeUserInvite(e,t){e.isSendingHomeUserInvite=!0},sendHomeUserInviteSucceeded(e,t){e.isSendingHomeUserInvite=!1},sendHomeUserInviteFailed(e,{payload:t}){e.isSendingHomeUserInvite=!1,e.error=t.error}}})},73071:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(26537);const s=function(e){return(0,n.P1)(i.Z,(t=>t.allFriends.friends.find((t=>t.id===e))))}},26537:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(36522);const s=(0,n.P1)(i.Z,(e=>e.friends))},56201:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(22222),i=r(26537),s=r(39008),a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m=(0,n.P1)(i.Z,s.Z,(({receivedInvites:e},t)=>{return r=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({},e),n={invites:e.invites.filter((e=>!t.find((t=>e.username===t.username))))},o(r,l(n));var r,n}))},3788:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(22222),i=r(26537),s=r(1208),a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m=(0,n.P1)(i.Z,s.Z,(({sentInvites:e},t)=>{return r=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({},e),n={invites:e.invites.filter((e=>!t.find((t=>e.username===t.username))))},o(r,l(n));var r,n}))},3395:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ue});var n=r(67294),i=r(28216),s=r(74226),a=r(29591),o=r(84419),l=r(28766),c=r(61505),d=r(71124),u=r(74232),p=r(93140),m=r(29608),h=r(66012),g=r(87457),y=r(17007),v=r(88063),f=r(74310),b=r(16975),Z=r(42864);const S="MetadataWidePosterListItem-container-wLrKqv",P="MetadataWidePosterListItem-titlesContainer-IwpdVP";var I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;function C(e){var t=e,{item:r}=t,i=((e,t)=>{var r={};for(var n in e)E.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&I)for(var n of I(e))t.indexOf(n)<0&&w.call(e,n)&&(r[n]=e[n]);return r})(t,["item"]);const{containerType:s,containerSubtype:a,listStyle:C}=(0,f.U)(),M=(0,h.Z)(null==r?void 0:r.sourceURI),D=(0,g.Z)(null==r?void 0:r.sourceURI),O=(0,b.Z)(i),T=(0,n.useMemo)((()=>(0,y.ZP)(s,a,{listStyle:C})),[a,s,C]),x=(0,n.useMemo)((()=>(0,v.Z)({height:i.cellHeight,aspectRatio:T})),[T,i.cellHeight]);return r?n.createElement(l.Z,{metadataItem:r,metadataItemState:M},n.createElement("div",{className:S,style:O.style},n.createElement(Z.Z,{aspectRatio:T,className:"MetadataWidePosterListItem-card-s6Wl1l PosterCard-card-BRB1k_",height:x.height,metadataItem:r,metadataItemState:M,metadataTimelineState:D,width:x.width}),n.createElement("div",{className:P},n.createElement(d.Z,{className:"MetadataWidePosterListItem-doubleTitle-uY1YP6 MetadataWidePosterListItem-title-i8xTCr",metadataItem:r}),n.createElement("div",{className:"MetadataWidePosterListItem-subtitle-iu5GJm MetadataWidePosterListItem-title-i8xTCr"},n.createElement(m.Z,{metadataItem:r}),r.leafCount?n.createElement(n.Fragment,null,n.createElement(o.Z,{separator:""}),n.createElement(p.Z,{metadataItem:r})):null,r.duration?n.createElement(n.Fragment,null,n.createElement(o.Z,{separator:""}),n.createElement(u.Z,{metadataItem:r})):null)))):n.createElement("div",{className:S,style:O.style},n.createElement(c.Z,{className:"MetadataWidePosterListItem-placeholderCard-OyuhTQ MetadataPosterCardPlaceholder-placeholder-i9YsQa PosterCard-card-BRB1k_",index:i.cellIndex,style:x}),n.createElement("div",{className:P},n.createElement("div",{className:"MetadataWidePosterListItem-placeholderTitle-Poyjp5"}),n.createElement("div",{className:"MetadataWidePosterListItem-placeholderSubtitle-lnmzlj MetadataWidePosterListItem-placeholderTitle-Poyjp5"})))}var M=r(78389),D=r(29462),O=r(77129),T=r(24107),x=Object.defineProperty,A=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const L=parseInt(T.Z.v4PagePadding,10),j=parseInt(T.Z.v4CardShadowSize,10),V=parseInt(T.Z.gapMedium,10);var U=r(80983),F=r(91085),B=r(61606),_=Object.defineProperty,z=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,G=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Q=(e,t)=>{for(var r in t||(t={}))H.call(t,r)&&G(e,r,t[r]);if(z)for(var r of z(t))W.call(t,r)&&G(e,r,t[r]);return e};function $({hub:e,hubTitleComponent:t,items:r,totalSize:s,onPageRequest:o}){const{type:l,subtype:c,style:d=M.n.Shelf}=e,u=(0,i.v9)(B.Z),{containerMeta:p}=(0,f.U)(),m=(0,n.useMemo)((()=>d===M.n.WideShelf?function(e){var t=e,{type:r,subtype:n,columnWidth:i}=t,s=((e,t)=>{var r={};for(var n in e)k.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&A)for(var n of A(e))t.indexOf(n)<0&&N.call(e,n)&&(r[n]=e[n]);return r})(t,["type","subtype","columnWidth"]);const a=(0,y.ZP)(r,n,{listStyle:M.n.WideShelf});return(0,O.Z)(((e,t)=>{for(var r in t||(t={}))k.call(t,r)&&R(e,r,t[r]);if(A)for(var r of A(t))N.call(t,r)&&R(e,r,t[r]);return e})({columnWidth:3*i+V,rowHeight:Math.floor(i/a),aspectRatio:a,innerHorizontalPadding:V,outerPaddingTop:j,outerPaddingRight:L,outerPaddingBottom:j,outerPaddingLeft:L},s))}({type:l,subtype:c,columnWidth:u}):(0,D.Z)({listType:l,subtype:c,listStyle:d,columnWidth:u,displayFields:null==p?void 0:p.DisplayFields,displayImages:null==p?void 0:p.DisplayImage})),[d,l,c,u,null==p?void 0:p.DisplayFields,null==p?void 0:p.DisplayImage]),h=(0,n.useMemo)((()=>e=>n.createElement(F.ZP,{key:e.key,column:e.cellIndex},d===M.n.WideShelf?n.createElement(C,Q({},e)):n.createElement(a.Z,Q({},e)))),[d]);return n.createElement(U.Z,{cellComponentFactory:h,hub:e,hubTitleComponent:t,items:r,keyPropName:"listItemKey",layout:m,totalSize:s,onPageRequest:o})}var K=r(74945);var q=r(10820),Y=r(28247),X=r(84105),J=r(12316),ee=r(20222);const te=function(e,t){const r=e.match(/^#([0-9|a-f]{2})([0-9|a-f]{2})([0-9|a-f]{2})$/i);if(!r)throw new Error("invalid hex color pattern");const[,n,i,s]=r;return`rgba(${parseInt(n,16)}, ${parseInt(i,16)}, ${parseInt(s,16)}, ${t})`};var re=r(14269),ne=r(2358),ie=r(44811),se=r(9171),ae=r(62376),oe=r(27387);function le({isSelected:e,metadataItem:t}){const[r,i]=(0,ie.c9)(),s=(0,ne.Z)(t,"key"),a=te(t.backgroundColor,0),o=te(t.backgroundColor,1),[l,c]=(0,Y.Z)(),d=(0,n.useMemo)((()=>({backgroundColor:o})),[o]),u=(0,n.useMemo)((()=>({backgroundImage:`linear-gradient(to left, ${a}, ${o} 400px)`})),[a,o]),p=(0,se.Z)({server:r,provider:i,size:re.Ko,url:t.art});return n.createElement("div",{ref:c,className:l?"SpotlightHubCard-hoveredCard-EK_8uC SpotlightHubCard-card-nT0JEA":"SpotlightHubCard-card-nT0JEA",style:d},n.createElement("div",{className:"SpotlightHubCard-colorGradient-_CrMXo",style:u}),n.createElement("img",{className:"SpotlightHubCard-image-AcBtsb",src:p}),n.createElement("div",{className:"SpotlightHubCard-copyOverlay-Skh1dQ"},n.createElement("div",{className:"SpotlightHubCard-title-jaxMDr"},t.title),n.createElement("div",{className:"SpotlightHubCard-summary-g4KmLh"},t.summary),n.createElement("div",{className:"SpotlightHubCard-action-QDPxM0"},t.action)),n.createElement("div",{className:"SpotlightHubCard-attributionLogo-mtweRx"},n.createElement(oe.Z,{attributionLogo:t.attributionLogo})),n.createElement(ae.Z,{className:"SpotlightHubCard-link-S0Oi9B",tabIndex:e?void 0:-1,title:t.title,to:s}))}var ce=r(4681);function de({index:e,selectedIndex:t,metadataItem:r,onPress:i}){const s=(0,n.useCallback)((()=>{i(e)}),[e,i]);return n.createElement(ce.Z,{className:"SpotlightHubDot-dotButton-q3IRu0 Button-button-Eu0WcX Link-link-vSsQW1",title:r.title,onPress:s},n.createElement("span",{className:e===t?"SpotlightHubDot-dotIsSelected-We_bDM SpotlightHubDot-dot-yMkjuT":"SpotlightHubDot-dot-yMkjuT"}))}function ue(e,t){return t*(e||0)}function pe({hub:e,items:t}){const[r,{width:i}]=(0,X.Z)(),s=(0,n.useCallback)((e=>{u(ue(i,e))}),[i]),[a,o]=(0,n.useState)(0),l=(0,n.useCallback)((({scrollLeft:e})=>{o(e)}),[]),c=function(e,t,r){return e?(0,K.Z)(Math.floor((r-e/2)/e)+1,0,t-1):0}(i,t.length,a),[d,u]=(0,n.useState)(),[p,m,h]=(0,q.Z)(),[g,y]=(0,Y.Z)(),[v,f]=(0,n.useState)(0);return(0,n.useEffect)((()=>{f(Date.now())}),[a]),(0,n.useEffect)((()=>{if(a===d)return void u(void 0);const r=Date.now()-v,n=p||g||!e.autoAdvanceDelayMs?null:window.setTimeout((()=>{var e,r;u(ue(i,(e=c+1,r=t.length,e-r*Math.floor(e/r))))}),r>e.autoAdvanceDelayMs?500:e.autoAdvanceDelayMs-r),s=window.setTimeout((()=>{const e=ue(i,c);e!==a&&u(e)}),1e3);return()=>{n&&window.clearTimeout(n),s&&window.clearTimeout(s)}}),[i,e.autoAdvanceDelayMs,p,g,t.length,v,c,a,d]),0===t.length?null:n.createElement("div",{ref:(0,ee.Z)(r,y),className:"SpotlightHubScroller-hub-eHU2wc VirtualHubScroller-hub-EpgwMo",onBlur:h,onFocus:m},n.createElement(J.Z,{className:void 0===d?"SpotlightHubScroller-hubScroller-zNleOl VirtualHubScroller-hubScroller-gv2_Qy VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko":"SpotlightHubScroller-hubScrollerControlledScroll-xv1kix SpotlightHubScroller-hubScroller-zNleOl VirtualHubScroller-hubScroller-gv2_Qy VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko",scrollDirection:J.I.Horizontal,smoothScroll:!0,targetScrollLeft:d,onScrollPositionChange:l},t.map(((e,t)=>n.createElement("div",{key:t,className:"SpotlightHubScroller-cell-QwzhEE"},n.createElement(F.ZP,{column:t},n.createElement(le,{isSelected:t===c,metadataItem:e})))))),t.length>1?n.createElement("div",{className:"SpotlightHubScroller-dots-ZdgAoP"},t.map(((e,t)=>n.createElement(de,{key:t,index:t,metadataItem:e,selectedIndex:c,onPress:s})))):null)}var me=r(1802),he=r(64188),ge=r(56422),ye=r(54320),ve=r(37703),fe=r(75404),be=r(73788),Ze=r(20896),Se=r(57668),Pe=r(12472),Ie=r(92060),Ee=r(67372),we=r(11897);function Ce(){const e=(0,i.I0)(),[,t]=(0,ie.c9)(),r=(0,Ze.Z)({pane:"streamingServicesBanner"}),a=(0,ve.b)(),{services:o,isPopulated:l,isPending:c,error:d}=(0,i.v9)(Ee.Z),{platforms:u,isPending:p,isPopulated:m,error:h}=(0,i.v9)(Ie.Z),g=(0,Se.Z)();(0,n.useEffect)((()=>{!g||c||l||d||e(we.ZP.actions.preferredServicesFetchRequested())}),[e,g,c,l,d]),(0,n.useEffect)((()=>{!g||p||m||h||e(we.ZP.actions.availabilityPlatformsFetchRequested())}),[h,e,g,p,m]);const y=(0,n.useCallback)((()=>{r({action:fe.Tr}),a.onOpen()}),[a,r]);return g&&!(null==o?void 0:o.length)&&(null==u?void 0:u.length)&&s.wB(t.identifier,s.Xp)?n.createElement("div",{className:"StreamingServicesUpsellHub-container-rhMuZF"},n.createElement(he.K,{align:ye.xM.Center,gap:ye.$u.M},n.createElement(ge.x,{component:"h2",level:ge.N.Heading4},(0,be.Z)("Find What To Watch, Anywhere!")),n.createElement("div",{className:"StreamingServicesUpsellHub-text-Ympb98"},n.createElement(ge.x,null,(0,be.Z)("With Plex, youre just one click away from streaming virtually any movie or TV show, no matter where it lives. Just tell us your favorite streaming services and well take care of the rest."))),n.createElement(Pe.Z,{isOpen:a.isOpen,onClose:a.onClose},n.createElement(me.zx,{size:ye.$u.L,onPress:y},(0,be.Z)("Select My Streaming Services"))))):null}var Me=r(28531);function De(){const[,e]=(0,ie.c9)(),t=(0,Ze.Z)({pane:"tidalBanner"}),r=(0,n.useCallback)((()=>{t({action:fe.J9})}),[t]);return s.wB(e.identifier,s.xF)?n.createElement("div",{className:"TidalUpsellHub-container-ZOahCq"},n.createElement("div",{className:"TidalUpsellHub-text-QS3GEG"},n.createElement("div",{"aria-label":"Tidal",className:"TidalUpsellHub-logo-dusTRa"}),n.createElement("div",{className:"TidalUpsellHub-body-MGXQQi"},(0,be.Z)("Preview 60 million streaming tracks, thousands of music videos and more.")," ",n.createElement(ae.Z,{className:"TidalUpsellHub-link-vPNE3g Link-link-vSsQW1",rel:"noopener noreferrer",target:"_blank",to:Me.YC,onPress:r},(0,be.Z)("Get started at plex.tv"))))):null}var Oe=r(59405),Te=r(27736),xe=r(71448),Ae=Object.defineProperty,ke=Object.defineProperties,Ne=Object.getOwnPropertyDescriptors,Re=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,Ve=(e,t,r)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Ue({hub:e,hubTitleComponent:t}){const{sourceURI:r,key:a,type:o,subtype:l,random:c,Meta:d,style:u=M.n.Shelf,isStale:p}=e,m=(0,i.I0)(),[h,g]=(0,ie.c9)(),y=(0,n.useMemo)((()=>(0,Te.Z)(r)),[r]),v=(0,i.v9)(y);(0,n.useEffect)((()=>{p&&!c&&m(Oe.Z.actions.throttledRepopulateRequested({server:h,provider:g,sourceURI:r}))}),[m,p,g,c,h,r]);const b=(0,n.useCallback)((e=>{var t;m(Oe.Z.actions.fetchRangeRequested((t=((e,t)=>{for(var r in t||(t={}))Le.call(t,r)&&Ve(e,r,t[r]);if(Re)for(var r of Re(t))je.call(t,r)&&Ve(e,r,t[r]);return e})({},e),ke(t,Ne({server:h,provider:g,sourceURI:r})))))}),[m,g,h,r]),Z=function(e,t){if(e===M.n.Upsell)switch(t){case s.xF:return De;case s.Xp:return Ce}return e===M.n.Spotlight?pe:$}(u,g.identifier);return n.createElement(f.ZP,{containerKey:a,containerMeta:d,containerProvider:g,containerServer:h,containerSourceURI:v.sourceURI,containerSubtype:l,containerType:o,listStyle:u},n.createElement(xe.ZP,{items:v.items},n.createElement(Z,{hub:e,hubTitleComponent:t,items:v.items,totalSize:v.totalSize,onPageRequest:b})))}},51662:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(41779),s=r(30727),a=r(35975);const o={[a.S.Tidal]:i.Z,[a.S.WatchTogether]:s.Z};function l({className:e,attribution:t}){const r=o[t];return r?n.createElement(r,{className:e}):null}var c=r(11050);function d({children:e,hub:t}){return n.createElement(c.Z,null,t.attribution?n.createElement(l,{attribution:t.attribution,className:"MetadataHubTitle-attribution-nL5prW"}):null,e)}},35975:(e,t,r)=>{"use strict";r.d(t,{F:()=>n,S:()=>i});var n=(e=>(e.ContinueWatching="home.continue",e.VodContinueWatching="movies.continueWatching",e.MergedContinueWatching="continueWatching",e.OnDeck="home.ondeck",e.Watchlist="home.watchlist",e.StreamingServicesUpsell="streamingServicesUpsell",e))(n||{}),i=(e=>(e.Plex="com.plex",e.Tidal="com.tidal",e.WatchTogether="com.watchtogether",e))(i||{})},78610:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(78389);function i(e,t=n.U.Mixed){return{type:t,more:!1,initialSize:e.length,isStale:!1,key:"",hubIdentifier:"",source:"",sourceURI:"",title:""}}},23642:(e,t,r)=>{"use strict";r.d(t,{H_:()=>n,Sr:()=>i,Pi:()=>s,fS:()=>a,PD:()=>o,IY:()=>l});var n=(e=>(e.String="string",e.Integer="integer",e.Boolean="boolean",e))(n||{}),i=(e=>(e.Ascending="asc",e.Descending="desc",e))(i||{}),s=(e=>(e.Year="year",e.Decade="decade",e.Duration="duration",e.Rating="rating",e.HDR="hdr",e.FleSize="fileSize",e.Bitrate="bitrate",e))(s||{}),a=(e=>(e.Tag="tag",e.String="string",e.Integer="integer",e.Boolean="boolean",e.Date="date",e.SubtitleLanguage="subtitleLanguage",e.AudioLanguage="audioLanguage",e.Resolution="resolution",e))(a||{}),o=(e=>(e.AddedAt="addedAt",e.AddedAtGrandparentTitle="addedAtGrandparentTitle",e.AirsAt="airsAt",e.AttributionLogo="attributionLogo",e.ChildCount="childCount",e.ContentRating="contentRating",e.Duration="duration",e.EpisodeIdentifier="episodeIdentifier",e.EpisodeTitleAndIdentifier="episodeTitleAndIdentifier",e.GrandparentTitle="grandparentTitle",e.LastRatedAt="lastRatedAt",e.LastViewedAt="lastViewedAt",e.LeafCount="leafCount",e.MediaBitrate="mediaBitrate",e.OriginallyAvailableAt="originallyAvailableAt",e.OriginalTitle="originalTitle",e.ParentTitle="parentTitle",e.Rating="rating",e.SourceTitle="sourceTitle",e.Title="title",e.TitleAttributed="titleAttributed",e.UnviewedLeafCount="unviewedLeafCount",e.UserRating="userRating",e.ActivityRating="activityRating",e.VideoResolution="videoResolution",e.ViewCount="viewCount",e.ViewOffset="viewOffset",e.Year="year",e))(o||{}),l=(e=>(e.Attribution="attribution",e.Avatar="avatar",e.Background="background",e.Banner="banner",e.Clear="clear",e.CoverArt="coverArt",e.CoverPoster="coverPoster",e.CoverSquare="coverSquare",e.Snapshot="snapshot",e))(l||{})},28766:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),i=r(28216),s=r(8089),a=r(74310),o=r(59405),l=r(44811);function c({children:e,metadataItem:t,metadataItemState:r}){const c=(0,i.I0)(),{containerServer:d,containerProvider:u,containerSourceURI:p}=(0,a.U)(),m=(0,n.useMemo)((()=>t.source?(0,s.Z)(t.source):null),[t.source]),h=!!m&&(m.serverIdentifier!==d.machineIdentifier||m.providerIdentifier!==u.identifier);return(0,n.useEffect)((()=>{(r.isStale||r.isDeleted)&&p&&c(o.Z.actions.throttledRepopulateRequested({server:d,provider:u,sourceURI:p}))}),[u,d,p,c,r.isDeleted,r.isStale]),m&&h?n.createElement(l.ZP,{machineIdentifier:m.serverIdentifier,providerIdentifier:m.providerIdentifier},e):n.createElement(n.Fragment,null,e)}},33010:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(67294),i=r(28216),s=r(51146),a=r(27649),o=r(75404),l=r(54834),c=r(66012),d=r(10234),u=r(99318),p=r(92934),m=r(5348),h=r(96493),g=r(74310),y=r(44811),v=r(16879),f=r(91085),b=r(89536),Z=Object.defineProperty,S=Object.defineProperties,P=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function M(e){var t,r=e,{metadataItem:Z}=r,M=((e,t)=>{var r={};for(var n in e)E.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&I)for(var n of I(e))t.indexOf(n)<0&&w.call(e,n)&&(r[n]=e[n]);return r})(r,["metadataItem"]);const[D,O]=(0,y.c9)(),{containerServer:T,containerProvider:x,containerKey:A,containerType:k}=(0,g.U)(),{metricsPage:N,metricsContextTuple:R}=(0,f.Zn)(),L=(0,c.Z)(Z.sourceURI),j=(0,c.Z)(null==(t=Z.onDeck)?void 0:t.sourceURI),V=(0,i.I0)(),U=(0,d.R)({containerServer:T,containerProvider:x,server:D,provider:O,metadataItem:Z,metadataItemState:L,metricsPage:N,metricsContextTuple:R}),F=(0,b.Z)(Z),B=(0,n.useCallback)((()=>{F({action:o.NH}),U(a.wA({options:{containerKey:A,listType:k}}))}),[A,k,U,F]),_=(0,n.useCallback)((()=>{F({action:o.NH});const e=(0,p.Z)(Z);V(s.lS({serverEntityID:D.entityID,providerEntityID:O.entityID,metricsPage:N,metricsContext:R,options:{containerKey:A,containerType:k,type:l.pX,identifier:e.channelIdentifier}}))}),[V,A,k,D,O,Z,N,R,F]),z=(0,n.useCallback)((()=>{F({action:o.cO}),U(a.Em())}),[U,F]),H=(0,n.useMemo)((()=>(0,h.Z)(Z)?_:Z.type===u.pG.Artist?z:B),[Z,_,B,z]);return n.createElement(v.Z,(W=((e,t)=>{for(var r in t||(t={}))E.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))w.call(t,r)&&C(e,r,t[r]);return e})({},M),G={"aria-label":(0,m.Z)(Z,L,j),onPress:H},S(W,P(G))));var W,G}},42864:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ue});var n=r(67294),i=r(28216),s=r(5002),a=r(56422),o=r(54320),l=r(70777),c=r(33593),d=r(85926),u=r(73788),p=r(62208),m=r(87036),h=r(35124),g=r(2358),y=r(99318),v=r(84964),f=r(17007),b=r(88063),Z=r(64341),S=r(62251),P=r(96493),I=r(56958),E=r(25973),w=r(54462),C=r(44811),M=r(9171),D=r(42902),O=r(59119),T=r(6888),x=r(35172);function A({viewedAt:e}){return n.createElement("div",{className:"ActivityPlayedBadge-badge-v6xG79"},n.createElement(O.C,{icon:T.a,title:(0,u.Z)("Played at")},(0,x.Z)((0,D.Z)(e),!1)))}var k=r(26231),N=r(88618),R=r(32740),L=r(73111);function j({className:e="SmartBadge-smartBadge-X9MglJ Badge-badge-JyhtjI"}){return n.createElement(R.Z,{className:e,iconComponent:L.Z})}var V=r(90341),U=r(4538),F=r(33296),B=r(68805),_=r(94788),z=r(15058),H=r(94442),W=r(45213),G=r(9423),Q=r(94184),$=r.n(Q),K=r(26759),q=r(75404),Y=r(93888),X=r(33010),J=r(70448),ee=r(14096),te=r(11294),re=r(5747),ne=r(62376),ie=r(4386),se=r(89536),ae=r(71130),oe=r(37059),le=r(55550);const ce="MetadataPosterCardActions-isHidden-TxYAU9";function de({playCircleClassName:e="MetadataPosterCardActions-playCircle-rOnuVA PlayButton-playCircle-fK1f_v MetadataPosterCardCircle-cardCircle-gBHNQG",metadataItem:t,metadataItemState:r,isHovered:s,actionsMenuButtonID:a,isActionsPending:o,isActionsVisible:l,isActionsMenuOpen:c,isActionsMenuClosing:d,isSelectHidden:p,isSelected:m,isInSelectionRange:h,isSelectionActive:g,isPlayButtonCard:y,isSortable:f,onActionsMenuClose:b,onActionsMenuCloseComplete:Z,onActionsMenuToggle:S,onSelectPress:P}){const[I,E]=(0,C.c9)(),w=(0,i.v9)(K.Z),M=(0,te.tW)({server:I,provider:E,stableUser:w,metadataItem:t,metadataItemState:r})&&(s||c&&!r.isPending),D=(0,te.J5)({server:I,provider:E,stableUser:w,metadataItem:t,metadataItemState:r}),O=(0,ee.P)({server:I,provider:E,metadataItem:t,metadataItemState:r}),T=(0,se.Z)(t),x=(0,n.useCallback)((()=>{T({action:q.dm}),O((0,Y.Cf)())}),[O,T]),A=(0,n.useCallback)((e=>{e.preventDefault()}),[]);return n.createElement(n.Fragment,null,!g&&l&&M?n.createElement(X.Z,{circleClassName:e,className:$()(y?"MetadataPosterCardActions-playCoverButton-UfPjfq PosterCardLink-hoveredLink-H5OMFC PosterCardLink-link-LozvMm Link-link-vSsQW1 MetadataPosterCardActions-playButton-tT8c2I PlayButton-playButton-vS1WII MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1":"MetadataPosterCardActions-playButton-tT8c2I PlayButton-playButton-vS1WII MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",!s&&d&&ce),metadataItem:t,tabIndex:-1}):null,(0,ae.Z)(E)&&!t.radio&&!p&&(m||h||l)?n.createElement(ie.Z,{className:$()("MetadataPosterCardActions-selectButton-ysaoZ5 SelectButton-selectButton-SvPc9f Link-link-vSsQW1 MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",!s&&d&&ce),isInSelectionRange:h,isSelected:m,tabIndex:-1,title:(0,v.Z)(t),onPress:P}):null,!g&&l&&f?n.createElement(ne.Z,{className:$()("MetadataPosterCardActions-reorderButton-AQqjiz MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",!s&&d&&ce),tabIndex:-1,title:(0,u.Z)("Reorder"),onPress:A},n.createElement(le.Z,null)):null,!g&&l&&!y&&D?n.createElement(ne.Z,{"aria-label":(0,u.Z)("Edit"),className:$()("MetadataPosterCardActions-editButton-XbdZgx MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",!s&&d&&ce),tabIndex:-1,onPress:x},n.createElement(oe.Z,null)):null,g||!l||y?null:n.createElement(re.Z,{className:$()("MetadataPosterCardActions-moreButton-kNJ7sJ MetadataPosterCardActions-button-YYlmeL Link-link-vSsQW1",!s&&d&&ce),id:a,isPending:o,tabIndex:-1,onPress:S}),n.createElement(J.Z,{actionsOverride:{isPlayVisible:!1,isEditVisible:!1},isOpen:c,metadataItem:t,target:a,onMenuClose:b,onMenuCloseComplete:Z}))}var ue=Object.defineProperty,pe=Object.defineProperties,me=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,ve=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fe=(e,t)=>{for(var r in t||(t={}))ge.call(t,r)&&ve(e,r,t[r]);if(he)for(var r of he(t))ye.call(t,r)&&ve(e,r,t[r]);return e};function be({className:e="MetadataPosterCardProgressBar-progress-GougiZ",trackClassName:t="MetadataPosterCardProgressBar-track-DUIwTi",barClassName:r="MetadataPosterCardProgressBar-bar-xA7ztj",style:i,barStyle:s,progress:a}){return n.createElement("div",{className:e,style:i},n.createElement("div",{className:t}),n.createElement("div",{className:r,style:(o=fe({},s),l={transform:`translate3d(-${100-a}%, 0, 0)`},pe(o,me(l)))}));var o,l}var Ze=r(38627),Se=r(16241),Pe=r(62286),Ie=r(56876),Ee=r(7360),we=r(22859);function Ce({children:e,className:t="MetadataPosterCardCircle-cardCircle-gBHNQG"}){return n.createElement("div",{className:t},e)}function Me({children:e}){return n.createElement("div",{className:"MetadataPosterCardScanStatus-statusContainer-hVFEIF"},e)}function De({children:e}){return n.createElement(Me,null,n.createElement("div",{className:"MetadataPosterCardScanStatus-spinnerContainer-uR562u"},n.createElement(Pe.Z,{className:"MetadataPosterCardScanStatus-spinner-Ed9WNT Spinner-spinner-Q4B7Qw spin-spin-H8VRGl"})),n.createElement(Ce,null,e))}function Oe({metadataItemState:e,metadataTimelineState:t}){return t.metadataState===Se.H.Matching?n.createElement(De,null,n.createElement(Ee.Z,{"aria-label":(0,u.Z)("Matching")})):t.metadataState===Se.H.Processing||t.metadataState===Se.H.Loading?n.createElement(De,null,n.createElement(we.Z,{"aria-label":(0,u.Z)("Downloading Metadata")})):t.mediaState?n.createElement(De,null,n.createElement(Ie.Z,{"aria-label":(0,u.Z)("Analyzing")})):e.deletedAt?n.createElement(Me,null,n.createElement(Ce,{className:"MetadataPosterCardScanStatus-trashCircle-sAIYem MetadataPosterCardCircle-cardCircle-gBHNQG"},n.createElement(Ze.I,{"aria-label":(0,u.Z)("In Trash")}))):null}const Te="MetadataPosterCard-topRightBadge-iOvizU MetadataPosterCard-badge-QUTmmc";var xe=Object.defineProperty,Ae=Object.defineProperties,ke=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,je=(e,t,r)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ve=(0,p.Z)(m.Z.slowSpeed),Ue=(0,n.memo)((function({className:e,playCircleClassName:t,metadataItem:r,metadataItemState:p,metadataTimelineState:D,width:O,height:T,aspectRatio:x,displayImageType:R,routeKey:L="key",isPlayButtonCard:Q,isPlayedStatusHidden:$,isProgressBarHidden:K,isSelectHidden:q,isSelectionActive:Y,isSelected:X,isInSelectionRange:J,isSortable:ee,onHover:te,onToggleSelect:re}){var ne;const[ie,se]=(0,C.c9)(),[ae]=(0,H.KY)(),oe=(0,i.v9)((0,z.Z)(l.q1)),{hoverRef:le,isHovered:ce,actionsMenuButtonID:ue,isActionsPending:pe,isActionsVisible:me,isActionsMenuOpen:he,isActionsMenuClosing:ge,onActionsMenuClose:ye,onActionsMenuCloseComplete:ve,onActionsMenuToggle:fe}=(0,h.Z)({server:ie,provider:se,metadataItem:r,metadataItemState:p}),Ze=(0,g.Z)(r,L),Se=Q||!Ze,Pe=null!=(ne=p.viewOffset)?ne:0,Ie=(0,n.useRef)(!1),Ee=Ie.current?m.Z.slowSpeed:"0s",we=!q&&Y,Ce=x||(0,f.ZP)(r.type,r.subtype);(0,G.Z)("number"==typeof O||"number"==typeof T,"`MetadataPosterCard` requires either a `width` or `height, or both");let Me={width:0,height:0};null!=O&&null!=T?Me={width:O,height:T}:O?Me=(0,b.Z)({width:O,aspectRatio:Ce}):T&&(Me=(0,b.Z)({height:T,aspectRatio:Ce}));const De=(0,M.Z)((xe=((e,t)=>{for(var r in t||(t={}))Re.call(t,r)&&je(e,r,t[r]);if(Ne)for(var r of Ne(t))Le.call(t,r)&&je(e,r,t[r]);return e})({},Me),Ue={server:ie,provider:se,url:(0,Z.Z)(r,{aspectRatio:Ce,displayImageType:R})},Ae(xe,ke(Ue))));var xe,Ue;const Fe=(0,n.useCallback)((()=>{null==re||re()}),[re]);(0,n.useEffect)((()=>{null==te||te(ce)}),[ce,te]),(0,n.useEffect)((()=>{const e=window.setTimeout((()=>{Ie.current=!0}),Ve);return()=>{window.clearTimeout(e)}}),[]);let Be=_.k.Cover;r.isLiveTVChannel&&(Be=_.k.Contain);const _e=r.type===y.pG.Episode&&r.isUnreleased;return n.createElement(U.Z,{ref:le,className:_e?"MetadataPosterCard-unreleasedCard-pbdJJW PosterCard-card-BRB1k_":e,style:Me},r.radio?n.createElement(F.Z,{height:Me.height,width:Me.width},n.createElement(s.F,null)):null,_e?n.createElement(a.x,{color:o.Il.Muted},r.originallyAvailableAt?(0,u.Z)("Releasing on {date}",{date:(0,c.Z)(r.originallyAvailableAt)}):(0,u.Z)("Unannounced Release Date")):n.createElement(_.Z,{className:"MetadataPosterCard-image-CA0wgl",fit:Be,height:Me.height,src:De,width:Me.width}),ce||he?null:n.createElement(Oe,{metadataItemState:p,metadataTimelineState:D}),r.userState&&Pe>0&&!K?n.createElement(be,{barClassName:"MetadataPosterCard-progressBar-JUqKYS MetadataPosterCardProgressBar-bar-xA7ztj",barStyle:{animationDuration:Ee},className:"MetadataPosterCard-progress-EXxFw9 MetadataPosterCardProgressBar-progress-GougiZ",progress:(0,d.Z)(Pe,r.duration),style:{opacity:ce||he?0:1,animationDuration:Ee}}):null,we?n.createElement(B.Z,{"aria-label":(0,v.Z)(r),className:X?"MetadataPosterCard-selectedLink-KExzo5 PosterCardLink-link-LozvMm Link-link-vSsQW1":void 0,hoverClassName:X?"MetadataPosterCard-hoveredSelectedLink-bBEzML PosterCardLink-hoveredLink-H5OMFC PosterCardLink-link-LozvMm Link-link-vSsQW1":void 0,isHovered:J||ce,onPress:Fe}):n.createElement(B.Z,{"aria-label":(0,v.Z)(r),isHovered:ce||he,to:Ze}),ce||he?null:n.createElement(W.Z,{className:"MetadataPosterCard-bottomRightBadge-Y6Ry2h MetadataPosterCard-badge-QUTmmc",isShadowVisible:!0,metadataItem:r}),n.createElement(de,{actionsMenuButtonID:ue,isActionsMenuClosing:ge,isActionsMenuOpen:he,isActionsPending:pe,isActionsVisible:me,isHovered:ce,isInSelectionRange:J,isPlayButtonCard:Se,isSelectHidden:q,isSelected:X,isSelectionActive:we,isSortable:ee,metadataItem:r,metadataItemState:p,playCircleClassName:t,onActionsMenuClose:ye,onActionsMenuCloseComplete:ve,onActionsMenuToggle:fe,onSelectPress:Fe}),r.smart&&!r.radio?n.createElement("div",{className:Te,style:{animationDuration:Ee}},n.createElement(j,null)):null,!$&&(null==ae?void 0:ae.viewedAt)?n.createElement("div",{className:Te,style:{animationDuration:Ee}},n.createElement(A,{viewedAt:null==ae?void 0:ae.viewedAt})):null,oe&&!$&&(p.watchlistedAt||(0,E.Z)(r,p))?n.createElement("div",{className:Te,style:{animationDuration:Ee}},p.watchlistedAt?n.createElement(V.Z,null):n.createElement(k.Z,null)):null,p.grandparentSubscriptionType||p.subscriptionType?n.createElement("div",{className:Te},p.grandparentSubscriptionType?n.createElement(N.Z,{subscriptionType:p.grandparentSubscriptionType}):null,!p.grandparentSubscriptionType&&p.subscriptionType?n.createElement(N.Z,{subscriptionType:p.subscriptionType}):null):null,oe||!(0,S.Z)(r,p,se)||p.viewOffset||p.viewCount?null:n.createElement("div",{className:"MetadataPosterCard-legacyUnwatchedTagMask-lMtby6"},n.createElement("div",{className:"MetadataPosterCard-legacyUnwatchedTag-xCeVKK"})),oe||(0,w.Z)(se)||(0,I.Z)(r)||(0,P.Z)(r)||r.type!==y.pG.Show&&r.type!==y.pG.Season||null!=p.saved&&!p.saved||!p.unviewedLeafCount?null:n.createElement("div",{className:"MetadataPosterCard-legacyUnwatchedEpisodesBadge-MElNvq MetadataPosterCard-legacyNumberBadge-NI8BWy MetadataPosterCard-badge-QUTmmc MetadataPosterCard-topRightBadge-iOvizU MetadataPosterCard-badge-QUTmmc"},p.unviewedLeafCount))}))},61505:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(4538);var s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e};function u({className:e="MetadataPosterCardPlaceholder-placeholder-i9YsQa PosterCard-card-BRB1k_",style:t,index:r}){return n.createElement(i.Z,{className:e,style:d({animationDelay:r%12*200+"ms"},t)})}},90525:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(94184),i=r.n(n),s=r(67294);function a({metadataItem:e,mergedResult:t,component:r,allowLink:n,isSecondary:a,isDoubleLine:o}){return s.createElement(r,{allowLink:n,className:i()(o?"MetadataPosterCardTitle-doubleLineTitle-VC1Wuk MetadataPosterCardTitle-title-ImAmGu":"MetadataPosterCardTitle-singleLineTitle-lPd1B2 MetadataPosterCardTitle-title-ImAmGu",a&&"MetadataPosterCardTitle-isSecondary-gGuBpd"),mergedResult:t,metadataItem:e,tabIndex:-1})}},29591:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(67294),i=r(28766),s=r(61505),a=r(66012),o=r(87457),l=r(99318),c=r(17007),d=r(88063),u=r(79634),p=r(74310),m=r(78389),h=r(16975),g=r(20222),y=r(28790),v=r(5209),f=r(98780),b=r(42864),Z=r(90525);var S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;const E=n.forwardRef(((e,t)=>{var r=e,{item:E,mergedResult:w,routeKey:C,isSortable:M,isPlayButtonCard:D}=r,O=((e,t)=>{var r={};for(var n in e)P.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&S)for(var n of S(e))t.indexOf(n)<0&&I.call(e,n)&&(r[n]=e[n]);return r})(r,["item","mergedResult","routeKey","isSortable","isPlayButtonCard"]);const{containerType:T,containerSubtype:x,containerMeta:A,listStyle:k}=(0,p.U)(),N=(0,a.Z)(null==E?void 0:E.sourceURI),R=(0,o.Z)(null==E?void 0:E.sourceURI),[L,j]=(0,n.useState)(!1),{isSelectionActive:V,isSelected:U,isInSelectionRange:F,onToggleSelect:B}=(0,y.Z)({isHovered:L,metadataItem:E,metadataItemState:N}),_=(0,h.Z)(O),z=(0,n.useMemo)((()=>{var e;return null!=(e=null==E?void 0:E.displayImage)?e:(0,f.Z)(T,x,null==A?void 0:A.DisplayImage)}),[null==A?void 0:A.DisplayImage,x,T,null==E?void 0:E.displayImage]),H=(0,n.useMemo)((()=>(0,c.ZP)(T,x,{listStyle:k,displayImageType:z})),[x,T,z,k]),W=(0,n.useMemo)((()=>(0,d.Z)({width:O.cellWidth,aspectRatio:H})),[H,O.cellWidth]),G=(0,n.useMemo)((()=>{if(!E)return[];const e=T===m.U.Collection||E.type!==l.pG.Collection&&T!==m.U.Mixed;return(0,u.ZP)(e?T:E.type,e?x:E.subtype,{listStyle:k,displayFieldNames:E.displayFields||(0,v.Z)(E.type,E.subtype,null==A?void 0:A.DisplayFields)})}),[null==A?void 0:A.DisplayFields,x,T,k,E]);return E?n.createElement(i.Z,{metadataItem:E,metadataItemState:N},n.createElement("div",{ref:(0,g.Z)(t,_.cellRef),"data-testid":"cellItem",style:_.style},n.createElement(b.Z,{aspectRatio:H,className:"MetadataPosterListItem-card-BfbXw7 PosterCard-card-BRB1k_",displayImageType:z,height:W.height,isInSelectionRange:F,isPlayButtonCard:D,isSelected:U,isSelectionActive:V,isSortable:M,metadataItem:E,metadataItemState:N,metadataTimelineState:R,routeKey:C,width:W.width,onHover:j,onToggleSelect:B}),G.map(((e,t)=>{if(null==e)return null;const r=(0,u.uM)(e);return n.createElement(Z.Z,{key:t,allowLink:r.allowLink,component:r.component,isDoubleLine:r.isDoubleLine,isSecondary:t>0,mergedResult:w,metadataItem:E})})))):n.createElement("div",{ref:(0,g.Z)(t,_.cellRef),style:_.style},n.createElement(s.Z,{index:O.cellIndex,style:W}))}))},11904:(e,t,r)=>{"use strict";r.d(t,{Z:()=>q});var n=r(67294),i=r(28766),s=r(66012),a=r(21602),o=r(16975),l=r(28216),c=r(26759),d=r(75404),u=r(84419),p=r(93888),m=r(42864),h=r(99493),g=r(70448),y=r(71124),v=r(34221),f=r(39717),b=r(74232);function Z({className:e,metadataItem:t}){return null==t.editionTitle?null:n.createElement("span",{className:e},`(${t.editionTitle})`)}var S=r(29608),P=r(29360),I=r(38449),E=r(99088),w=r(35124),C=r(87457),M=r(14096),D=r(99318),O=r(84964),T=r(11294),x=r(17007),A=r(88063),k=r(44811),N=r(5747),R=r(62376),L=r(72449),j=r(4316),V=r(89536),U=r(20222),F=r(28790),B=r(71130),_=r(24107),z=r(37059);const H="MetadataDetailsRow-actionsButton-ukHliJ Link-link-vSsQW1",W=parseInt(_.Z.summaryCellPadding,10),G=n.forwardRef((({metadataItem:e,metadataItemState:t,style:r,cellHeight:i,cellIndex:s,isParentDetailHidden:a},o)=>{const[_,G]=(0,k.c9)(),Q=(0,l.v9)(c.Z),$=(0,C.Z)(null==e?void 0:e.sourceURI),{hoverRef:K,actionsMenuButtonID:q,isHovered:Y,isActionsPending:X,isActionsVisible:J,isActionsMenuOpen:ee,onActionsMenuClose:te,onActionsMenuCloseComplete:re,onActionsMenuToggle:ne}=(0,w.Z)({server:_,provider:G,metadataItem:e,metadataItemState:t}),{isSelected:ie,isInSelectionRange:se,isSelectionActive:ae,onToggleSelect:oe}=(0,F.Z)({isHovered:Y,metadataItem:e,metadataItemState:t}),le=(0,n.useMemo)((()=>se?"MetadataDetailsRow-rangeListRow-jwg6Vj ListRow-row-oh5MTV":ie?"MetadataDetailsRow-selectedListRow-kLrQBu ListRow-row-oh5MTV":void 0),[se,ie]),ce=(0,M.P)({server:_,provider:G,metadataItem:e,metadataItemState:t}),de=!ae&&J,ue=(0,V.Z)(e),pe=(0,n.useCallback)((()=>{oe()}),[oe]),me=(0,n.useCallback)((()=>{ue({action:d.dm}),ce((0,p.Cf)())}),[ce,ue]),{type:he,subtype:ge,childCount:ye,duration:ve,originallyAvailableAt:fe,summary:be,editionTitle:Ze}=e,Se=(0,x.ZP)(he,ge),Pe=(0,A.Z)({height:i-2*W,aspectRatio:Se}),Ie=(0,T.r5)({server:_,provider:G,metadataItem:e,metadataItemState:t,stableUser:Q}),Ee=(0,T.J5)({server:_,provider:G,metadataItem:e,metadataItemState:t,stableUser:Q});return n.createElement(L.Z,{ref:(0,U.Z)(o,K),alternateClassName:le,className:le,isAlternate:!!(s%2),isHovered:Y,style:r},(0,B.Z)(G)?n.createElement(j.Z,{isInSelectionRange:se,isSelected:ie,isVisible:ie||se||Y,tabIndex:ae?-1:void 0,title:(0,O.Z)(e),onPress:pe}):null,ae?n.createElement(R.Z,{className:"MetadataDetailsRow-selectOverlay-SZZMi9 Link-link-vSsQW1",onPress:pe}):n.createElement(h.Z,{"aria-label":(0,O.Z)(e),keyAttribute:"key",metadataItem:e}),n.createElement("div",{className:"MetadataDetailsRow-overlay-OPOaNZ"},n.createElement("div",{className:"MetadataDetailsRow-summaryContainer-TOsGGA"},n.createElement("div",{className:"MetadataDetailsRow-posterContainer-xdVR2z"},n.createElement(m.Z,{aspectRatio:Se,height:Pe.height,isPlayButtonCard:!0,isSelectHidden:!0,metadataItem:e,metadataItemState:t,metadataTimelineState:$,width:Pe.width})),n.createElement("div",{className:"MetadataDetailsRow-titlesContainer-RzuQNg"},n.createElement("div",{className:"MetadataDetailsRow-titleContainer-fY5zIF"},n.createElement(y.Z,{allowLink:!1,className:be?"MetadataDetailsRow-singleTitle-ZIQb6u MetadataDetailsRow-title-QFytpJ":"MetadataDetailsRow-doubleTitle-tKO5ei MetadataDetailsRow-title-QFytpJ",metadataItem:e})),n.createElement("div",{className:"MetadataDetailsRow-subtitle-rx7YZP MetadataDetailsRow-titleContainer-fY5zIF MetadataDetailsRow-title-QFytpJ"},a?null:n.createElement(S.Z,{allowLink:!1,metadataItem:e}),a&&e.type===D.pG.Episode?n.createElement(n.Fragment,null,n.createElement(P.Z,{metadataItem:e}),fe?n.createElement(n.Fragment,null,n.createElement(u.Z,{separator:""}),n.createElement(v.Z,{metadataItem:e})):null):null,a&&e.type===D.pG.Album?n.createElement(E.Z,{metadataItem:e}):null,e.type===D.pG.Movie||e.type===D.pG.Show?n.createElement(E.Z,{metadataItem:e}):null,ye?n.createElement(n.Fragment,null,n.createElement(u.Z,{separator:""}),n.createElement(f.Z,{metadataItem:e})):null,ve?n.createElement(n.Fragment,null,n.createElement(u.Z,{separator:""}),n.createElement(b.Z,{metadataItem:e})):null,Ze?n.createElement(n.Fragment,null,n.createElement(u.Z,{separator:""}),n.createElement(Z,{metadataItem:e})):null,Ie&&(Y&&!ae||t.userRating)?n.createElement(I.Z,{className:"MetadataDetailsRow-userRatingContainer-L31bZk",metadataItem:e}):null),be?n.createElement("div",{className:"MetadataDetailsRow-summary-vqVmTD"},be):null),de?n.createElement("div",{className:"MetadataDetailsRow-actions-uDVoGe"},Ee?n.createElement(R.Z,{className:H,"data-testid":"metadataRowEditButton",onPress:me},n.createElement(z.Z,null)):null,n.createElement(N.Z,{className:H,"data-testid":"metadataRowMoreButton",id:q,isPending:X,onPress:ne})):null)),n.createElement(g.Z,{actionsOverride:{isPlayVisible:!1,isEditVisible:!1},isOpen:ee,metadataItem:e,target:q,onMenuClose:te,onMenuCloseComplete:re}))}));var Q=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;function q(e){var t=e,{item:r,isParentDetailHidden:l}=t,c=((e,t)=>{var r={};for(var n in e)$.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Q)for(var n of Q(e))t.indexOf(n)<0&&K.call(e,n)&&(r[n]=e[n]);return r})(t,["item","isParentDetailHidden"]);const d=(0,s.Z)(null==r?void 0:r.sourceURI),u=(0,o.Z)(c),{cellIndex:p,cellHeight:m}=c;return r?n.createElement(i.Z,{metadataItem:r,metadataItemState:d},n.createElement(G,{ref:u.cellRef,cellHeight:m,cellIndex:p,isParentDetailHidden:l,metadataItem:r,metadataItemState:d,style:u.style})):n.createElement(a.Z,{index:p,style:u.style})}},40493:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(6400),s=r(32714),a=r(82772),o=r(6909),l=r(30311),c=r(8946),d=r(50141),u=r(56315),p=r(99318);function m({type:e}){switch(e){case p.pG.Movie:return n.createElement(i.l,null);case p.pG.Show:case p.pG.Season:case p.pG.Episode:return n.createElement(s.W,null);case p.pG.Artist:return n.createElement(a.a,null);case p.pG.Album:case p.pG.Track:return n.createElement(o.H,null);case p.pG.Photo:case p.pG.PhotoAlbum:return n.createElement(l.L,null);case p.pG.Clip:return n.createElement(c.O,null);case p.pG.Playlist:return n.createElement(d.U,null);case p.pG.Author:case p.pG.Audiobook:case p.pG.Chapter:return n.createElement(u.Z,null)}!function(e){throw new Error(`"${e}" is not mapped to an icon`)}(e)}},99493:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(2358),s=r(62376);const a={underlay:"MetadataItemLinkUnderlay-underlay-ELSsB0 Link-link-vSsQW1"};var o=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t=e,{className:r=a.underlay,metadataItem:o,keyAttribute:p}=t,m=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["className","metadataItem","keyAttribute"]);const h=(0,i.Z)(o,p);return h?n.createElement(s.Z,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({className:r,to:h},m)):null}},19349:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(67294),i=r(28216),s=r(22222),a=r(46898),o=r(21604),l=r(74226),c=r(70777),d=r(73788),u=r(3367),p=r(98476),m=r(2209),h=r(78741),g=r(99318),y=r(65714),v=r(53072);const f=(0,s.P1)(o.Z,a.Z,((e,t)=>e.filter((e=>{var t;return e.isFullOwnedServer&&e.isConnected&&!e.isOutOfDate&&(null==(t=e.ownerFeatures)?void 0:t.includes(c.Ao))})).reduce(((e,r)=>{var n;const i=r.providers.map((e=>t[e])).find((e=>e.identifier===l.Y3));if(!i)return e;const s=(0,h.Z)(i),a=null!=(n=null==s?void 0:s.directories)?n:[],o={machineIdentifier:r.machineIdentifier,providerIdentifier:i.identifier,serverFriendlyName:r.friendlyName,targetLibraries:[]};return a.forEach((e=>{e.type===g.pG.Artist&&o.targetLibraries.push({libraryTitle:e.title,libraryType:e.type,librarySectionID:e.id})}),[]),o.targetLibraries.length&&e.push(o),e}),[])));function b({children:e,targetMachineIdentifier:t,targetProviderIdentifier:r,targetLibrary:s,onAddToLibrary:a}){const o=(0,i.v9)((0,v.Z)(t)),l=(0,i.v9)((0,y.Z)(t,r)),c=(0,n.useCallback)((()=>{a({targetServer:o,targetProvider:l,targetLibrarySectionID:s.librarySectionID,targetLibraryType:s.libraryType})}),[a,s,l,o]);return n.createElement(p.Z,{onPress:c},e)}function Z({onAddToLibrary:e}){const t=(0,i.v9)(f);if(!t.length)return null;if(1===t.length&&1===t[0].targetLibraries.length){const r=t[0];return n.createElement(b,{targetLibrary:r.targetLibraries[0],targetMachineIdentifier:r.machineIdentifier,targetProviderIdentifier:r.providerIdentifier,onAddToLibrary:e},(0,d.Z)("Add to {serverName}",{serverName:r.serverFriendlyName}))}return n.createElement(m.Z,{label:(0,d.Z)("Add to Library")},t.map((t=>n.createElement(n.Fragment,{key:`${t.machineIdentifier}:${t.providerIdentifier}`},n.createElement(u.Z,null,t.serverFriendlyName),t.targetLibraries.map((r=>n.createElement(b,{key:r.librarySectionID,targetLibrary:r,targetMachineIdentifier:t.machineIdentifier,targetProviderIdentifier:t.providerIdentifier,onAddToLibrary:e},(0,d.Z)("Add to {libraryName}",{libraryName:r.libraryTitle}))))))))}},70448:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Zt});var n=r(67294),i=r(28216),s=r(37703),a=r(34575),o=r(51146),l=r(27649),c=r(74278),d=r(26759),u=r(75404),p=r(70777),m=r(35076),h=r(73788),g=r(54834),y=r(57674),v=r(84419),f=r(10125),b=r(98476),Z=r(31889),S=r(2209),P=r(14580),I=r(25555),E=r(93888),w=r(10379),C=r(19349),M=r(20683),D=r(83782),O=r(44811),T=r(26377);function x({metadataItem:e,downloadIFrameName:t,onMenuClose:r,onDownloadVersionPress:i,onDownloadFilePress:s}){var a;const[o]=(0,O.c9)(),l=(0,D.Z)(),c=1===(null==(a=e.Media)?void 0:a.length)?function(e,t){var r;if(!(null==(r=t.Part)?void 0:r.length))return;const n=t.Part[0];return M.Z.join([e.uri,n.key],{download:1,"X-Plex-Token":e.accessToken})}(o,e.Media[0]):null,d=(0,n.useCallback)((()=>{c?(null==s||s(),r()):i()}),[c,s,i,r]);return n.createElement(n.Fragment,null,n.createElement(b.Z,{target:t||l,to:c,onPress:d},(0,h.Z)("Download File")),t?null:n.createElement(T.Z,null,n.createElement("iframe",{name:l,style:{display:"none"}})))}var A=r(15660),k=r(62291),N=r(74760),R=r(21500),L=r(50984);function j({isOpen:e,mediaItems:t,onSelect:r,onCancel:i}){return n.createElement(R.Z,{isOpen:e,metricsPage:k.DV,title:(0,h.Z)("Play Version"),onCancel:i,onItemSelect:r},t.map(((e,t)=>{const{title:r,info:i}=(0,N.Z)(e),s=!!r,a=!!(null==i?void 0:i.length);return n.createElement(L.Z,{key:t,value:t},s?e.title:null,s&&a?n.createElement(v.Z,null):null,a?i:null,s||a?null:(0,h.Z)("Unknown"))})))}var V=r(66012),U=r(78864),F=r(87457),B=r(14096),_=r(10234),z=r(99318),H=r(12882),W=r(54345),G=r(11294),Q=r(79841),$=r(92934),K=r(5348),q=r(96493),Y=r(25004),X=r(74310),J=r(15334),ee=r(12587),te=r(9278),re=r(73456),ne=r(55319),ie=r(91085),se=r(89536),ae=r(15058),oe=r(94442),le=r(10550),ce=r(97853),de=r(13271),ue=r(51531),pe=r(53488),me=r(37112),he=r(73688);function ge({metadataItem:e,onMenuClose:t}){const r=(0,n.useCallback)(((e,t,r)=>n.createElement(b.Z,{isDisabled:t,onPress:r},e?(0,h.Z)("Delete Download"):(0,h.Z)("Download"))),[]);return n.createElement(he.Z,{metadataItem:e,render:r,onClose:t})}var ye=r(56672),ve=r(41070),fe=r(22222),be=r(93665),Ze=Object.defineProperty,Se=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Ce=(e,t,r)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Me=(e,t)=>{for(var r in t||(t={}))Ee.call(t,r)&&Ce(e,r,t[r]);if(Ie)for(var r of Ie(t))we.call(t,r)&&Ce(e,r,t[r]);return e};const De={hub:{promotedToRecommended:!1,promotedToOwnHome:!1,promotedToSharedHome:!1},isPending:!1,isPopulated:!0,isUpdating:!1,error:null};var Oe=r(84332),Te=Object.defineProperty,xe=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,Ne=(e,t,r)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Re=(e,t)=>{for(var r in t||(t={}))Ae.call(t,r)&&Ne(e,r,t[r]);if(xe)for(var r of xe(t))ke.call(t,r)&&Ne(e,r,t[r]);return e};function Le({sourceURI:e,onMenuClose:t}){var r,s,a;const[o,,l]=(0,O.c9)(),c=(0,i.I0)(),d=(0,i.v9)(function(e){return(0,fe.P1)(be.Z,(t=>{var r;const n=t.publishedItems[e];return i=Me(Me({},De),n),s={hub:null!=(r=null==n?void 0:n.hub)?r:De.hub},Se(i,Pe(s));var i,s}))}(e)),u=(0,i.v9)((0,ae.Z)(p.je));(0,n.useEffect)((()=>{l&&c(ve.Z.actions.publishedFetchRequested({server:o,sourceURI:e,contentDirectoryID:l.id}))}),[l,c,o,e]);const m=(0,n.useCallback)((r=>{l&&(c(ve.Z.actions.publishedUpdateRequested({server:o,sourceURI:e,contentDirectoryID:l.id,hub:Re(Re({},d.hub),r)})),t())}),[l,c,t,d.hub,o,e]),g=(0,n.useCallback)((()=>{d.hub&&m({promotedToRecommended:!d.hub.promotedToRecommended})}),[d.hub,m]),y=(0,n.useCallback)((()=>{d.hub&&m({promotedToOwnHome:!d.hub.promotedToOwnHome})}),[d.hub,m]),v=(0,n.useCallback)((()=>{d.hub&&m({promotedToSharedHome:!d.hub.promotedToSharedHome})}),[d.hub,m]);return n.createElement(n.Fragment,null,n.createElement(Oe.Z,{isDisabled:d.isUpdating,isSelected:null==(r=d.hub)?void 0:r.promotedToRecommended,onPress:g},(0,h.Z)("Library")),n.createElement(Oe.Z,{isDisabled:d.isUpdating,isSelected:null==(s=d.hub)?void 0:s.promotedToOwnHome,onPress:y},(0,h.Z)("Home")),n.createElement(Oe.Z,{isDisabled:d.isUpdating,isSelected:null==(a=d.hub)?void 0:a.promotedToSharedHome,onPress:v},u?(0,h.Z)("Friends' Home"):(0,h.Z)("Shared Users' Home")))}var je=r(1802),Ve=r(84739),Ue=r(64188),Fe=r(82818),Be=r(7256),_e=r(56422),ze=r(54320),He=r(47240),We=r(73071),Ge=r(26537),Qe=r(181),$e=r(38483),Ke=r(83836),qe=r(783),Ye=r(55509),Xe=r(48321),Je=r(78073);function et({metadataServer:e,children:t,modalState:r,title:s,sourceURI:a}){var o;const l=(0,i.I0)(),c=(0,i.v9)(Qe.Z),d=(0,i.v9)((0,We.Z)(null!=(o=e.ownerId)?o:-1)),{details:u}=(0,i.v9)(qe.Z),{allFriends:{isPopulated:p}}=(0,i.v9)(Ge.Z),[m,g]=(0,n.useState)(""),y=(0,n.useRef)(null),[v,{isLoading:f,isError:b,reset:Z}]=(0,Je.at)(),S=(0,Xe.Z)(f);(0,n.useEffect)((()=>{r.isOpen||(Z(),g(""))}),[r.isOpen,Z]),(0,n.useEffect)((()=>{f||!S||b||r.onClose()}),[b,S,f,r]),(0,n.useEffect)((()=>{r.isOpen&&l(He.Z.actions.fetchAllFriends({server:c}))}),[l,r.isOpen,c]);const P=(0,n.useCallback)((e=>{g(e.target.value)}),[]),I=(0,n.useCallback)((()=>{var t;v({input:{message:m,recipients:[e.ownerId?null!=(t=null==d?void 0:d.uuid)?t:"":u.uuid],item:a,type:Ye.Cs.MetadataReport}})}),[null==d?void 0:d.uuid,a,m,e.ownerId,v,u.uuid]),E=!!e.ownerId,w=E?d:u;return n.createElement(Fe.u_,{isOpen:r.isOpen,onClose:r.onClose},n.createElement(Fe.iq,null,t),n.createElement(Fe.hz,{dismissLabel:(0,h.Z)("Close"),header:(0,h.Z)("Report Issue with {title}",{title:s}),size:ze.$u.S,onClose:r.onClose},n.createElement(Fe.fe,null,!p&&E?n.createElement(Be.$,null):n.createElement(Ue.K,{gap:ze.$u.S},n.createElement("div",{className:"ItemReportModal-avatar-kukfFo"},n.createElement(Ke.Z,{server:c,size:60,url:(null==w?void 0:w.thumb)||""}),n.createElement("div",{className:"ItemReportModal-checkmark-kMKNk5"},n.createElement(Ve.N,null))),n.createElement(_e.x,{level:_e.N.Body3,testID:"reportTo"},(0,h.Z)("To: {name}",{name:(null==w?void 0:w.friendlyName)||(null==w?void 0:w.username)})),n.createElement($e.Z,{ref:y,maxHeight:300,name:"message",placeholder:(0,h.Z)("Describe the problem"),value:m,onChange:P}),b?n.createElement("div",{className:"ItemReportModal-error-WYsz3o"},n.createElement(_e.x,{color:"inherit",level:_e.N.Body2},(0,h.Z)("An error has occurred, please try again later."))):null)),n.createElement(Fe.mz,null,n.createElement(Fe.w2,{align:ze.xM.Right},n.createElement(je.zx,{onPress:r.onClose},(0,h.Z)("Cancel")),f?n.createElement(Be.$,null):n.createElement(je.zx,{color:ze.Il.Accent,isDisabled:f||b||E&&!p,testID:"sendMessage",onPress:I},(0,h.Z)("Send"))))))}var tt=r(94673),rt=r(31281),nt=r(97380),it=r(80727),st=r(12439),at=r(61740),ot=r(225),lt=r(2696),ct=r(54237),dt=Object.defineProperty,ut=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,ht=(e,t,r)=>t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gt=(e,t)=>{for(var r in t||(t={}))pt.call(t,r)&&ht(e,r,t[r]);if(ut)for(var r of ut(t))mt.call(t,r)&&ht(e,r,t[r]);return e};const yt=["isPlayVisible","isWatchTogetherVisible","isPlayVersionVisible","isPlayAllVisible","isShuffleVisible","isQueueVisible","isPlayTrailerVisible","isPlayMusicVideoVisible","isAddToPlaylistVisible","isAddToLibraryVisible","isShareVisible"],vt=["isEditVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSettingsVisible","isRefreshVisible","isAnalyzeVisible","isFixMatchVisible","isMatchVisible","isUnmatchVisible","isSplitApartVisible","isSyncDownloadVisible","isOptimizeVisible","isDownloadFileVisible","isGrantAccessVisible","isDeleteVisible","isDeleteVersionVisible","isViewPlayHistoryVisible","isGetInfoVisible","isReportVisible"];function ft(e){const t=(0,n.useRef)(!1);return e.isOpen&&(t.current=!0),t.current}function bt({actions:e,server:t,provider:r,stableUser:s,metadataProvider:d,metadataProviderItemKey:v,metadataProviderSourceURI:f,metadataItem:M,metadataItemState:D,containerSourceURI:O,containerKey:T,containerType:A,allowRedirectOnDelete:k,playVersionModalState:N,confirmMarkPlayedModalState:R,confirmMarkUnplayedModalState:L,settingsModalState:j,addToCollectionModalState:U,addToPlaylistModalState:B,shareModalState:_,mediaSubscriptionModalState:G,watchTogetherModalState:X,shareItemModalState:te,reportItemModalState:ne,onLegacyAction:ie,onLegacyPlay:de,onMenuClose:pe}){var he;const ye=(0,i.v9)(c.Z),ve=(0,i.I0)(),fe=(0,V.Z)(null==(he=M.onDeck)?void 0:he.sourceURI),be=(0,F.Z)(M.sourceURI),[,Ze]=(0,oe.KY)(),Se=(0,i.v9)((0,ae.Z)(p.je)),Pe=!!be.metadataState,Ie=!!be.mediaState,Ee=yt.some((t=>e[t])),we=vt.some((t=>e[t])),Ce=Ee&&we,Me=(0,se.Z)(M),De=(0,n.useMemo)((()=>!!T&&/continueWatching/.test(T)),[T]),Oe=(0,ce.Z)(t,r,M),Te=Oe?(0,rt.Z)(...Oe):void 0,xe=(0,n.useCallback)((()=>{Me({action:u.NH}),de(l.wA({options:{containerKey:T,listType:A}}))}),[T,A,de,Me]),Ae=(0,n.useCallback)((()=>{Me({action:u.NH});const e=(0,$.Z)(M);ve((0,w.gj)({server:t,provider:r,legacyAction:(0,o.lS)({options:{type:g.pX,identifier:e.channelIdentifier}})})),pe()}),[ve,M,pe,r,t,Me]),ke=(0,n.useCallback)((()=>{Me({action:u.Rn}),de(l.Ld())}),[de,Me]),Ne=(0,n.useCallback)((()=>{Me({action:u.cO}),de(l.Em())}),[de,Me]),Re=(0,n.useCallback)((()=>{Me({action:u.pe}),de(l.tP({options:{playAll:!0,next:!0}}))}),[de,Me]),je=(0,n.useCallback)((()=>{Me({action:u.PR}),de(l.tP({options:{playAll:!0,next:!1}}))}),[de,Me]),Ve=(0,n.useCallback)((()=>{Me({action:u.$W}),de(l.EF())}),[de,Me]),Ue=(0,n.useCallback)((()=>{Me({action:u.b8}),de(l.QR({playlistType:y.j0}))}),[de,Me]),Fe=(0,n.useCallback)((()=>{Me({action:u.Fx}),de(l.QR({playlistType:y.pX}))}),[de,Me]),Be=(0,n.useCallback)((()=>{ie((0,a.Fj)())}),[ie]),_e=(0,n.useCallback)((({targetServer:e,targetProvider:n,targetLibrarySectionID:i,targetLibraryType:s})=>{Me({action:u.Ao}),ve(Y.Z.actions.addToLibraryRequested({targetServer:e,targetProvider:n,targetLibrarySectionID:i,targetLibraryType:s,server:t,provider:r,metadataItem:M})),pe()}),[ve,M,pe,r,t,Me]),ze=(0,n.useCallback)((e=>{Me({action:e?u.$J:u.Go});const n=M.key,i=M.ratingKey,a=(0,m.Z)({serverIdentifier:t.machineIdentifier,providerIdentifier:r.identifier,key:n});ve(Y.Z.actions.toggleSavedRequested({server:t,provider:r,stableUser:s,sourceURI:a,ratingKey:i,saved:e})),pe()}),[ve,M.key,M.ratingKey,pe,r,t,s,Me]),He=(0,n.useCallback)((()=>{ze(!0)}),[ze]),We=(0,n.useCallback)((()=>{ze(!1)}),[ze]),Ge=(0,n.useCallback)((()=>{Me({action:u.UP}),ve(Y.Z.actions.removeFromContinueWatchingRequested({server:t,provider:r,stableUser:s,sourceURI:M.sourceURI,ratingKey:M.ratingKey})),pe()}),[ve,M.ratingKey,M.sourceURI,pe,r,t,s,Me]),Qe=(0,n.useCallback)((e=>{const n=!(!(d&&f&&v)||!s.features[p.ie]&&(0,re.Z)(r,ee.rf.AddToWatchlist,s));Me({action:e?u.JL:u.hi}),ve(Y.Z.actions.toggleWatchlistRequested({server:n?ye:t,provider:n?d:r,stableUser:s,sourceURI:n?f:M.sourceURI,ratingKey:n?v:M.ratingKey,added:e})),pe()}),[d,f,v,s,r,Me,ve,ye,t,M.sourceURI,M.ratingKey,pe]),$e=(0,n.useCallback)((()=>{Qe(!0)}),[Qe]),Ke=(0,n.useCallback)((()=>{Qe(!1)}),[Qe]),qe=(0,n.useCallback)((()=>{Me({action:u.DK}),U.onOpen()}),[U,Me]),Ye=(0,n.useCallback)((()=>{Me({action:u.uf}),B.onOpen()}),[B,Me]),Xe=(0,n.useCallback)((()=>{Me({action:u.DK,mode:"shortcut"})}),[Me]),Je=(0,n.useCallback)((()=>{Me({action:u.uf,mode:"shortcut"})}),[Me]),et=(0,n.useCallback)((()=>{Me({action:A===z.pG.Collection?u.cp:u.Bn}),T&&O&&ve(me.Z.actions.removeItemRequested({server:t,provider:r,containerKey:T,sourceURI:M.sourceURI,ratingKey:M.ratingKey})),pe()}),[T,O,A,ve,M.ratingKey,M.sourceURI,pe,r,t,Me]),tt=(0,n.useCallback)((()=>{Me({action:u.dm}),ie(E.Cf())}),[ie,Me]),nt=(0,n.useCallback)((()=>{Me({action:u.xc}),Te||ve(le.Z.actions.editFiltersRequested({server:t,provider:r,key:M.key})),pe()}),[ve,Te,M.key,pe,r,t,Me]),it=(0,n.useCallback)((()=>{j.onOpen(),pe()}),[pe,j]),st=(0,n.useCallback)((()=>{Me({action:u.RG}),ve(J.Z.actions.metadataRefreshRequested({server:t,provider:r,sourceURI:M.sourceURI})),pe()}),[ve,M.sourceURI,pe,r,t,Me]),at=(0,n.useCallback)((()=>{Me({action:u._R}),ve(J.Z.actions.mediaAnalysisRequested({server:t,provider:r,sourceURI:M.sourceURI,hasChildren:!!(0,Q.Z)(M.type,M.subtype)})),pe()}),[ve,M.sourceURI,M.subtype,M.type,pe,r,t,Me]),ot=(0,n.useCallback)((()=>{Me({action:u.P9}),ie(E.Tk())}),[ie,Me]),lt=(0,n.useCallback)((()=>{Me({action:u.Zy}),ie(E.qs())}),[ie,Me]),dt=(0,n.useCallback)((()=>{Me({action:u.RF}),ie(E.ET())}),[ie,Me]),ut=(0,n.useCallback)((()=>{Me({action:u.FH}),ie(E.x())}),[ie,Me]),pt=(0,n.useCallback)((()=>{Me({action:u.a2})}),[Me]),mt=(0,n.useCallback)((()=>{Me({action:u.a2}),ie(E.p4())}),[ie,Me]),ht=(0,n.useCallback)((()=>{Me({action:u.Dp}),_.onOpen(),pe()}),[pe,_,Me]),gt=(0,n.useCallback)((()=>{Me({action:u.yY}),ie(E.Rw({options:{skipRedirect:!k}}))}),[k,ie,Me]),ft=(0,n.useCallback)((()=>{Me({action:u.yY}),ie(E.W$())}),[ie,Me]),bt=(0,n.useCallback)((()=>{Me({action:u.$M}),ie(E.Nv())}),[ie,Me]),Zt=(0,n.useCallback)((()=>{X.onOpen(),pe()}),[pe,X]),St=(0,n.useCallback)((()=>{te.onOpen(),pe()}),[pe,te]),Pt=(0,n.useCallback)((()=>{ne.onOpen(),pe()}),[pe,ne]);return n.createElement(n.Fragment,null,e.isPlayVisible?n.createElement(b.Z,{onPress:(0,q.Z)(M)?Ae:xe},(0,K.Z)(M,D,fe)):null,e.isAddToWatchlistVisible?n.createElement(b.Z,{onPress:$e},(0,h.Z)("Add to Watchlist")):null,e.isRemoveFromWatchlistVisible?n.createElement(b.Z,{onPress:Ke},(0,h.Z)("Remove from Watchlist")):null,e.isWatchTogetherVisible?n.createElement(b.Z,{onPress:Zt},(0,h.Z)("Watch Together...")):null,e.isShareVisible?n.createElement(b.Z,{onPress:St},(0,h.Z)("Share...")):null,e.isPlayVersionVisible?n.createElement(b.Z,{onPress:(0,P.Z)(N.onOpen,pe)},(0,h.Z)("Play Version...")):null,e.isPlayAllVisible?n.createElement(b.Z,{onPress:ke},(0,h.Z)("Play All")):null,e.isShuffleVisible?n.createElement(b.Z,{onPress:Ne},(0,h.Z)("Shuffle")):null,e.isPlayRadioVisible?n.createElement(b.Z,{onPress:Ue},(0,h.Z)("Play Radio")):null,e.isPlayArtistTVVisible?n.createElement(b.Z,{onPress:Fe},(0,h.Z)("Play Artist TV")):null,e.isQueueVisible?n.createElement(b.Z,{onPress:Re},(0,h.Z)("Play Next")):null,e.isQueueVisible?n.createElement(b.Z,{onPress:je},(0,h.Z)("Add to Queue")):null,e.isPlayTrailerVisible?n.createElement(b.Z,{onPress:Ve},(0,h.Z)("Play Trailer")):null,e.isPlayMusicVideoVisible?n.createElement(b.Z,{onPress:Ve},(0,h.Z)("Play Music Video")):null,e.isAddToPlaylistVisible||e.isAddToCollectionVisible?n.createElement(S.Z,{label:(0,h.Z)("Add to"),onMenuClose:pe},n.createElement(ue.Z,{contentDirectoryID:M.librarySectionID,mediaType:(0,W.Z)(M.type,M.subtype),metadataType:M.type,provider:r,server:t,sourceURI:M.sourceURI,onAddToCollectionPress:e.isAddToCollectionVisible?qe:void 0,onAddToPlaylistPress:e.isAddToPlaylistVisible?Ye:void 0,onMenuClose:pe,onSaveCollectionPress:Xe,onSavePlaylistPress:Je})):null,e.isRemoveFromCuratedListVisible?n.createElement(b.Z,{onPress:et},A===z.pG.Collection?(0,h.Z)("Remove from Collection"):(0,h.Z)("Remove from Playlist")):null,e.isAddToSavedVisible?n.createElement(b.Z,{onPress:He},(0,H.Z)(D.saved)):null,e.isRemoveFromSavedVisible?n.createElement(b.Z,{onPress:We},(0,H.Z)(D.saved)):null,e.isAddToPicksVisible?n.createElement(b.Z,{onPress:Be},D.picked?(0,h.Z)("Remove from Plex Picks"):(0,h.Z)("Add to Plex Picks")):null,e.isAddToLibraryVisible?n.createElement(C.Z,{onAddToLibrary:_e}):null,e.isPublishVisible?n.createElement(S.Z,{label:(0,h.Z)("Visible on"),onMenuClose:pe},n.createElement(Le,{sourceURI:M.sourceURI,onMenuClose:pe})):null,Ce?n.createElement(Z.Z,null):null,e.isEditVisible?n.createElement(b.Z,{onPress:tt},(0,h.Z)("Edit")):null,e.isEditFiltersVisible?n.createElement(b.Z,{to:Te,onPress:nt},(0,h.Z)("Edit Filters")):null,e.isSettingsVisible?n.createElement(b.Z,{onPress:it},(0,h.Z)("Settings")):null,e.isMarkPlayedVisible?n.createElement(b.Z,{onPress:R.onOpen},(0,h.Z)("Mark as Played")):null,e.isMarkUnplayedVisible?n.createElement(b.Z,{onPress:L.onOpen},(0,h.Z)("Mark as Unplayed")):null,De&&e.isRemoveFromContinueWatchingVisible?n.createElement(b.Z,{onPress:Ge},(0,h.Z)("Remove from Continue Watching")):null,e.isRefreshVisible?n.createElement(b.Z,{isDisabled:Pe,onPress:st},(0,h.Z)("Refresh Metadata")):null,e.isAnalyzeVisible?n.createElement(b.Z,{isDisabled:Ie,onPress:at},(0,h.Z)("Analyze")):null,e.isFixMatchVisible?n.createElement(b.Z,{onPress:ot},(0,h.Z)("Fix Match...")):null,e.isMatchVisible?n.createElement(b.Z,{onPress:ot},(0,h.Z)("Match...")):null,e.isUnmatchVisible?n.createElement(b.Z,{onPress:lt},(0,h.Z)("Unmatch")):null,e.isSplitApartVisible?n.createElement(b.Z,{onPress:dt},(0,h.Z)("Split Apart")):null,e.isSyncDownloadVisible?n.createElement(ge,{metadataItem:M,onMenuClose:pe}):null,e.isRecordVisible?n.createElement(b.Z,{onPress:G.onOpen},null==D.grandparentSubscriptionID&&null==D.subscriptionID?(0,h.Z)("Record"):(0,h.Z)("Modify Recording")):null,e.isOptimizeVisible?n.createElement(b.Z,{onPress:ut},(0,h.Z)("Optimize...")):null,e.isDownloadFileVisible?n.createElement(x,{downloadIFrameName:"downloadFileFrame",metadataItem:M,onDownloadFilePress:pt,onDownloadVersionPress:mt,onMenuClose:pe}):null,e.isGrantAccessVisible?n.createElement(b.Z,{onPress:ht},Se?(0,h.Z)("Grant Access"):(0,h.Z)("Share")):null,e.isDeleteVisible?n.createElement(b.Z,{kind:M.remoteMedia?void 0:I.T,onPress:gt},M.remoteMedia?(0,h.Z)("Remove"):(0,h.Z)("Delete")):null,e.isDeleteVersionVisible?n.createElement(b.Z,{kind:I.T,onPress:ft},(0,h.Z)("Delete Version")):null,e.isViewPlayHistoryVisible?n.createElement(b.Z,{to:(0,ct.Z)(t.machineIdentifier,M),onPress:pe},(0,h.Z)("View Play History")):null,e.isReportVisible?n.createElement(b.Z,{onPress:Pt},(0,h.Z)("Report Issue...")):null,e.isGetInfoVisible?n.createElement(b.Z,{onPress:bt},(0,h.Z)("Get Info")):null,Ze?n.createElement(n.Fragment,null,n.createElement(Z.Z,null),Ze.removeActivity?n.createElement(b.Z,{key:"removeFromWatchHistory",onPress:(0,P.Z)(pe,Ze.removeActivity.callback)},Ze.removeActivity.title):null):null)}function Zt({className:e,target:t,isOpen:r,actionsOverride:a,metadataItem:o,allowRedirectOnDelete:c,onMenuClose:p,onMenuCloseComplete:m}){var h;const g=(0,i.I0)(),[y,b]=(0,O.c9)(),Z=(0,i.v9)(te.Z),{metricsPage:S,metricsContextTuple:I}=(0,ie.Zn)(),{containerServer:E,containerProvider:w,containerSourceURI:C,containerKey:M,containerType:D,containerSubtype:T}=(0,X.U)(),x=(0,V.Z)(o.sourceURI),k=(0,s.b)(),N=ft(k),R=(0,s.b)(),L=ft(R),{metadataProviderItemKey:F,metadataProviderSourceURI:z,metadataProviderItemState:H}=(0,U.Z)({provider:b,metadataItem:o}),Q=(0,i.v9)(d.Z),$=(0,G.ZP)({server:y,provider:b,metadataProvider:Z,metadataProviderItemState:H,stableUser:Q,containerType:D,containerSubtype:T,metadataItem:o,metadataItemState:x}),K=gt(gt({},$),a),q=(0,ne.Z)(),J=ft(q),ee=(0,ne.Z)(),re=ft(ee),ae=(0,ne.Z)(),oe=ft(ae),le=(0,ne.Z)(),ce=ft(le),ue=(0,ne.Z)(),me=ft(ue),he=(0,ne.Z)(),ge=ft(he),ve=(0,ne.Z)(),fe=ft(ve),be=(0,ne.Z)(),Ze=ft(be),Se=(0,ne.Z)(),Pe=ft(Se),Ie=(0,B.P)({server:y,provider:b,metadataItem:o,metadataItemState:x}),Ee=(0,_.R)({containerServer:E,containerProvider:w,server:y,provider:b,metadataItem:o,metadataItemState:x,metricsPage:S,metricsContextTuple:I}),we=(0,se.Z)(o),Ce=(0,n.useMemo)((()=>({page:S,contextTuple:I})),[I,S]),Me=(0,n.useCallback)((e=>{Ie(e),p()}),[p,Ie]),De=(0,n.useCallback)((e=>{Ee(e),p()}),[p,Ee]),Oe=(0,n.useCallback)((e=>{var t;we({action:u.DV}),De(l.wA({confirmOffset:!0,startOffsetMilliseconds:null!=(t=x.viewOffset)?t:0,startMediaIndex:e,options:{containerKey:M,listType:D}})),q.onClose()}),[M,D,x.viewOffset,De,q,we]),Te=(0,n.useCallback)((e=>{we({action:e?u.qe:u.h3}),g(Y.Z.actions.playedStatusUpdateRequested({server:y,provider:b,stableUser:Q,sourceURI:o.sourceURI,ratingKey:o.ratingKey,guid:o.guid,played:e})),p()}),[g,o.guid,o.ratingKey,o.sourceURI,p,b,y,Q,we]),xe=(0,n.useCallback)((()=>{Te(!0),ee.onClose()}),[ee,Te]),Ae=(0,n.useCallback)((()=>{Te(!1),ae.onClose()}),[ae,Te]),ke=(0,n.useCallback)((()=>{g(Y.Z.actions.repopulateRequested({sourceURI:o.sourceURI})),we({action:u.DK,mode:"shortcut"})}),[g,we,o.sourceURI]),Ne=(0,n.useCallback)((()=>{we({action:u.uf,mode:"shortcut"})}),[we]);return n.createElement(n.Fragment,null,n.createElement(f.Z,{className:e,isOpen:r,target:t,onMenuClose:p,onMenuCloseComplete:m},n.createElement(bt,{actions:K,addToCollectionModalState:he,addToPlaylistModalState:ue,allowRedirectOnDelete:c,confirmMarkPlayedModalState:ee,confirmMarkUnplayedModalState:ae,containerKey:M,containerSourceURI:C,containerType:D,mediaSubscriptionModalState:be,metadataItem:o,metadataItemState:x,metadataProvider:Z,metadataProviderItemKey:F,metadataProviderSourceURI:z,playVersionModalState:q,provider:b,reportItemModalState:R,server:y,settingsModalState:le,shareItemModalState:k,shareModalState:ve,stableUser:Q,watchTogetherModalState:Se,onLegacyAction:Me,onLegacyPlay:De,onMenuClose:p})),J?n.createElement(j,{isOpen:q.isOpen,mediaItems:null!=(h=o.Media)?h:[],onCancel:q.onClose,onSelect:Oe}):null,re||oe?n.createElement(it.Z,{isOpen:ee.isOpen||ae.isOpen,leafCount:ee.isOpen?x.unviewedLeafCount:x.viewedLeafCount,markUnplayed:ae.isOpen,subtype:o.subtype,title:o.title,type:o.type,onCancel:ee.isOpen?ee.onClose:ae.onClose,onConfirm:ee.isOpen?xe:Ae}):null,ge&&o.librarySectionID?n.createElement(de.Z,{contentDirectoryID:o.librarySectionID,defaultTitle:o.title,isOpen:he.isOpen,metadataType:o.type,sourceURI:o.sourceURI,onModalClose:he.onClose,onSaveSuccess:ke}):null,me?n.createElement(pe.Z,{defaultDestinationSource:o.source,defaultTitle:o.title,isOpen:ue.isOpen,mediaType:(0,W.Z)(o.type,o.subtype),sourceURI:o.sourceURI,onModalClose:ue.onClose,onSaveSuccess:Ne}):null,fe?n.createElement(A.Z,{metadataItem:o,metadataItemState:x},(({serverEntityID:e,metadataItemEntityID:t})=>n.createElement(nt.Z,{isOpen:ve.isOpen,metadataItemEntityID:t,metricsProperties:Ce,serverEntityID:e,sharingReason:nt.$.SharingItem,onModalClose:ve.onClose}))):null,N&&o.guid&&K.isShareVisible?n.createElement(tt.Z,{children:null,item:o,modalState:k}):null,L&&K.isReportVisible?n.createElement(et,{children:null,metadataServer:y,modalState:R,sourceURI:o.sourceURI,title:(0,lt.Z)(o,v.U)}):null,Pe?n.createElement(A.Z,{metadataItem:o,metadataItemState:x},(({serverEntityID:e,metadataItemEntityID:t})=>n.createElement(ot.Z,{isOpen:Se.isOpen,metadataItemEntityID:t,metricsProperties:{page:S,contextTuple:I},serverEntityID:e,onModalClose:Se.onClose}))):null,ce?n.createElement(A.Z,{metadataItem:o,metadataItemState:x},(({serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,onMarkStale:i})=>n.createElement(st.Z,{isOpen:le.isOpen,metadataItemEntityID:r,metricsProperties:Ce,providerEntityID:t,serverEntityID:e,onModalClose:(0,P.Z)(i,le.onClose)}))):null,Ze?n.createElement(A.Z,{metadataItem:o,metadataItemState:x},(({serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,onMarkStale:i})=>{const s=x.grandparentSubscriptionType||x.subscriptionType||o.type;return n.createElement(at.Z,{isOpen:be.isOpen,metadataItemEntityID:r,metricsProperties:Ce,providerEntityID:t,serverEntityID:e,subscriptionType:s,onModalClose:(0,P.Z)(i,be.onClose)})})):null,K.isSyncDownloadVisible?n.createElement(ye.Z,{metadataItem:o}):null)}},15660:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(28216),s=r(15451),a=r(82650),o=r(35387),l=r(87442),c=r(14096),d=r(25004),u=r(44811);function p({metadataItem:e,metadataItemState:t,children:r}){const[p,m]=(0,u.c9)(),h=(0,i.I0)(),g=(0,c.P)({server:p,provider:m,metadataItem:e,metadataItemState:t}),y=(0,a.Z)(o.TY,e.key,p.entityID),v=(0,i.v9)((e=>e.entities[o.TY][y])),f=(0,n.useMemo)((()=>(0,s.Z)(`${y}_NO_OP`)),[y]),[b,Z]=(0,n.useState)(!1),S=(0,n.useCallback)((()=>{h(d.Z.actions.repopulateRequested({sourceURI:e.sourceURI}))}),[h,e.sourceURI]);return(0,n.useEffect)((()=>{(0,l.c9)((()=>{g(f())})),Z(!0)}),[g,f]),n.createElement(n.Fragment,null,b&&v?r({serverEntityID:p.entityID,providerEntityID:m.entityID,metadataItemEntityID:y,onMarkStale:S}):null)}},66108:(e,t,r)=>{"use strict";r.d(t,{Z:()=>le});var n=r(67294),i=r(28766),s=r(94184),a=r.n(s),o=r(28216),l=r(8238),c=r(26759),d=r(45062),u=r(73788),p=r(33010),m=r(70448),h=r(35124),g=r(37425),y=r(84964),v=r(11294),f=r(20041),b=r(44811),Z=r(62376),S=r(10820),P=r(72449),I=r(4316),E=r(12476),w=r(77502),C=r(20222),M=r(45213),D=r(28790),O=r(71130),T=r(36155),x=r(67699),A=r(24107),k=r(75404),N=r(93888),R=r(66012),L=r(14096),j=r(5747),V=r(89536),U=r(37059);function F({className:e,buttonClassName:t,buttonTabIndex:r,style:i,metadataItem:s,isActionsPending:a,isSelectionActive:l,menuButtonID:d,onMenuButtonPress:p}){const[m,h]=(0,b.c9)(),g=(0,R.Z)(s.sourceURI),f=(0,o.v9)(c.Z),S=(0,L.P)({server:m,provider:h,metadataItem:s,metadataItemState:g}),P=(0,V.Z)(s),I=(0,v.J5)({server:m,provider:h,stableUser:f,metadataItem:s,metadataItemState:g}),E=(0,n.useCallback)((()=>{P({action:k.dm}),S(N.Cf())}),[S,P]);return n.createElement("div",{className:e,style:i},!l&&I?n.createElement(Z.Z,{"aria-label":(0,u.Z)("Edit {title}",{title:(0,y.Z)(s)}),className:t,"data-testid":"metadataRowEditButton",tabIndex:r,onPress:E},n.createElement(U.Z,null)):null,l?null:n.createElement(j.Z,{className:t,"data-testid":"metadataRowMoreButton",id:d,isPending:a,tabIndex:r,onPress:p}))}const B="MetadataTableRow-isSelectionActive-EBpHVo",_="MetadataTableRow-firstTableCell-FyQuzh TableCell-tableCell-eytlAB",z="MetadataTableRow-title-CrTfGf TableCell-title-swrhIF",H="MetadataTableRow-isSecondary-wdpNW3";var W=Object.defineProperty,G=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))K.call(t,r)&&Y(e,r,t[r]);if($)for(var r of $(t))q.call(t,r)&&Y(e,r,t[r]);return e},J=(e,t)=>G(e,Q(t));const ee={width:parseInt(A.Z.actionsCellWidth,10),justifyContent:"flex-end",padding:`0 ${parseInt(A.Z.actionsCellPadding,10)}px`};function te({tableColumn:e,metadataItemState:t,isActionsVisible:r,isSelectionActive:n,isTransientColumn:i}){const{key:s,style:a}=e;return s===f.WS.key?J(X({},a),{opacity:n||!r&&null==t.userRating?0:1}):i?X(X({},a),ee):a}const re=n.forwardRef((({style:e,cellIndex:t,index:r,metadataItem:i,metadataItemState:s,tableColumns:f,hasTransientActionsCell:A=!1},k)=>{const[N,R]=(0,b.c9)(),L=(0,o.v9)(c.Z),j=(0,o.v9)((0,g.Z)(i,N)),V=(0,o.v9)((0,w.Z)(T.G.AudioVideo,"isPaused")),{hoverRef:U,actionsMenuButtonID:W,isHovered:G,isActionsPending:Q,isActionsVisible:$,isActionsMenuOpen:K,onActionsMenuClose:q,onActionsMenuCloseComplete:Y,onActionsMenuToggle:re}=(0,h.Z)({server:N,provider:R,metadataItem:i,metadataItemState:s}),{isSelected:ne,isInSelectionRange:ie,isSelectionActive:se,onToggleSelect:ae}=(0,D.Z)({isHovered:G,metadataItem:i,metadataItemState:s}),oe=(0,n.useMemo)((()=>ie?"MetadataTableRow-rangeListRow-LJzeJu ListRow-row-oh5MTV":ne?"MetadataTableRow-selectedListRow-uq1P02 ListRow-row-oh5MTV":void 0),[ie,ne]),le=(0,n.useRef)(null),ce=f[f.length-1],de=ce.component(i.type,i.subtype),ue=(0,n.useCallback)((()=>{ae()}),[ae]),pe=(0,n.useCallback)((e=>{e.which===d.K5&&i&&ae()}),[i,ae]),[me,he,ge]=(0,S.Z)(),ye=me||$,ve=ye&&(0,v.tW)({server:N,provider:R,stableUser:L,metadataItem:i,metadataItemState:s}),fe=ye&&!se;return n.createElement(P.Z,{ref:(0,C.Z)(k,U),alternateClassName:oe,className:oe,isAlternate:!!(t%2),isHovered:G||me,style:e,onBlur:ge,onFocus:he},(0,O.Z)(R)?n.createElement(I.Z,{"aria-hidden":"true",isInSelectionRange:ie,isSelected:ne,isVisible:ne||ie||me||G,tabIndex:se?-1:void 0,title:(0,y.Z)(i),onPress:ue}):null,se?n.createElement(Z.Z,{key:"focusLink",ref:le,"aria-label":(0,u.Z)("Select {title}",{title:(0,y.Z)(i)}),className:"MetadataTableRow-overlay-GxeT_O MetadataTableRow-linkCover-Q5vQbS Link-link-vSsQW1",tabIndex:0,onKeyPress:pe,onPress:se?ue:void 0}):null,n.createElement("div",{className:"MetadataTableRow-playCell-qOYq9k"},!j&&!ve||se?r:null,se||j||!ve?null:n.createElement(p.Z,{metadataItem:i,tabIndex:0}),j&&!se?n.createElement(x.Z,{isPaused:V}):null),f.map(((e,t)=>{if(t===f.length-1)return null;const{key:r,component:o}=e,l=o(i.type,i.subtype);return n.createElement(E.Z,{key:r,cellClassName:0===t?_:void 0,className:a()(z,t>0&&H,se&&B),component:l,metadataItem:i,style:te({tableColumn:e,metadataItemState:s,isActionsVisible:ye,isSelectionActive:se,isTransientColumn:!1}),tabIndex:se?"-1":void 0})})),l.Z.allowSyncDownload?n.createElement(M.Z,{className:a()("MetadataTableRow-downloadIcon-MsicKj",!A&&"MetadataTableRow-outsideIcon-tm_xqN",fe&&"MetadataTableRow-hiddenIcon-WsDai8"),metadataItem:i}):null,A&&fe?null:n.createElement(E.Z,{cellClassName:1===f.length?_:void 0,className:a()(z,f.length>1&&H,se&&B),component:de,metadataItem:i,style:te({tableColumn:ce,metadataItemState:s,isActionsVisible:ye,isSelectionActive:se,isTransientColumn:A}),tabIndex:se?"-1":void 0}),!A||fe?n.createElement(F,{key:"actionsCell",buttonClassName:"MetadataTableRow-actionsButton-EbLaXL Link-link-vSsQW1",className:"MetadataTableRow-actionsCell-XgYtO9 TableCell-tableCell-eytlAB",isActionsPending:Q,isSelectionActive:se,menuButtonID:W,metadataItem:i,style:J(X({},ee),{opacity:ye?1:0}),onMenuButtonPress:re}):null,n.createElement(m.Z,{isOpen:K,metadataItem:i,target:W,onMenuClose:q,onMenuCloseComplete:Y}))}));var ne=r(21602),ie=r(16975),se=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;const le=n.forwardRef(((e,t)=>{var r=e,{item:s,index:a,tableColumns:o,hasTransientActionsCell:l}=r,c=((e,t)=>{var r={};for(var n in e)ae.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&se)for(var n of se(e))t.indexOf(n)<0&&oe.call(e,n)&&(r[n]=e[n]);return r})(r,["item","index","tableColumns","hasTransientActionsCell"]);const d=(0,R.Z)(null==s?void 0:s.sourceURI),u=(0,ie.Z)(c),{cellIndex:p}=c;return s?n.createElement(i.Z,{metadataItem:s,metadataItemState:d},n.createElement(re,{ref:(0,C.Z)(t,u.cellRef),cellIndex:p,hasTransientActionsCell:l,index:a,metadataItem:s,metadataItemState:d,style:u.style,tableColumns:o})):n.createElement(ne.Z,{ref:(0,C.Z)(t,u.cellRef),index:p,style:u.style})}))},71124:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(73788),s=r(2358),a=r(62376);function o({className:e,tabIndex:t,allowLink:r=!0,metadataItem:o}){const l=(0,s.Z)(o,"key");let c=o.title;return o.isUnreleased&&!c&&(c=(0,i.Z)("To Be Announced")),c?r&&l?n.createElement(a.Z,{className:e,"data-testid":"metadataTitleLink",tabIndex:t,title:c,to:l},c):n.createElement("span",{className:e,title:c},c):null}},47151:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(80728);function s({className:e,metadataItem:t}){const{addedAt:r}=t;return n.createElement(i.Z,{className:e,timestamp:r})}},40385:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),i=r(28216),s=r(21866),a=r(92934),o=r(56127),l=r(34219);function c({className:e,metadataItem:t}){const r=(0,i.v9)((0,l.Z)("timeFormat")),c=(0,o.Z)(),d=(0,a.Z)(t),{beginsAt:u,endsAt:p}=null!=d?d:{},m=null!=u&&null!=p?(0,s.Z)({now:c,beginsAt:u,endsAt:p,timeFormat:r}):null;return m?n.createElement("span",{className:e,title:m},m):null}},34221:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(33593);function s({className:e,metadataItem:t}){const{originallyAvailableAt:r}=t;return r?n.createElement("span",{className:e},(0,i.Z)(r)):null}},69672:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(67294),i=r(51851),s=r(38264),a=r(99318),o=r(54345);function l({className:e,metadataItem:t}){var r;const l=(0,o.Z)(t.type,t.subtype),c=null==(r=t.Media)?void 0:r[0];return null==(null==c?void 0:c.bitrate)?null:n.createElement("span",{className:e},l===a.DD.Video?(0,s.Z)(c.bitrate):(0,i.Z)(c.bitrate))}},39717:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(73788),s=r(99318),a=r(53468);function o({className:e,metadataItem:t}){if(t.skipChildren)return n.createElement(a.Z,{className:e,metadataItem:t});const r=t.childCount;if(null==r)return null;switch(t.type){case s.pG.Show:return n.createElement("span",{className:e},1===r?(0,i.Z)("{seasonCount} season",{seasonCount:r}):(0,i.Z)("{seasonCount} seasons",{seasonCount:r}));case s.pG.Season:return n.createElement("span",{className:e},1===r?(0,i.Z)("{episodeCount} episode",{episodeCount:r}):(0,i.Z)("{episodeCount} episodes",{episodeCount:r}));case s.pG.Artist:return n.createElement("span",{className:e},1===r?(0,i.Z)("{albumCount} album",{albumCount:r}):(0,i.Z)("{albumCount} albums",{albumCount:r}));case s.pG.Album:return n.createElement("span",{className:e},1===r?(0,i.Z)("{trackCount} track",{trackCount:r}):(0,i.Z)("{trackCount} tracks",{trackCount:r}))}return n.createElement("span",{className:e},1===t.childCount?(0,i.Z)("{itemCount} item",{itemCount:r}):(0,i.Z)("{itemCount} items",{itemCount:r}))}},55707:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(86023);function s({className:e,metadataItem:t}){return null==t.contentRating?null:n.createElement("span",{className:e},(0,i.Z)(t.contentRating))}},60421:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(60795);function s({className:e,metadataItem:t}){const{rating:r,ratingImage:s,audienceRating:a,audienceRatingImage:o}=t;return r||a?n.createElement("span",{className:e},n.createElement(i.Z,{audienceRating:a,audienceRatingImage:o,rating:r,ratingImage:s})):null}},74232:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(39041);function s({className:e,metadataItem:t}){return null==t.duration?null:n.createElement("span",{className:e},(0,i.Z)(t.duration))}},90113:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(2358),s=r(62376);function a({className:e,tabIndex:t,allowLink:r=!0,metadataItem:a}){const o=(0,i.Z)(a,"grandparentKey");return a.grandparentTitle?r&&o?n.createElement(s.Z,{className:e,tabIndex:t,title:a.grandparentTitle,to:o},a.grandparentTitle):n.createElement("span",{className:e,title:a.grandparentTitle},a.grandparentTitle):null}},93140:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(73788);function s({className:e,metadataItem:t}){return null==t.leafCount?null:n.createElement("span",{className:e},1===t.leafCount?(0,i.Z)("{itemCount} item",{itemCount:t.leafCount}):(0,i.Z)("{itemCount} items",{itemCount:t.leafCount}))}},61372:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(66012),s=r(80728);function a({className:e,metadataItem:t}){const r=(0,i.Z)(t.sourceURI),{lastRatedAt:a}=r;return n.createElement(s.Z,{className:e,timestamp:a})}},86291:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(73788),s=r(66012),a=r(80728);function o({className:e,metadataItem:t}){const r=(0,s.Z)(t.sourceURI),{lastViewedAt:o}=r;return o?n.createElement(a.Z,{className:e,timestamp:o}):n.createElement("span",{className:e},(0,i.Z)("Unplayed"))}},53468:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(73788),s=r(99318);function a({className:e,metadataItem:t}){const r=t.leafCount;if(null==r)return null;switch(t.type){case s.pG.Show:return n.createElement("span",{className:e},1===r?(0,i.Z)("{episodeCount} episode",{episodeCount:r}):(0,i.Z)("{episodeCount} episodes",{episodeCount:r}));case s.pG.Artist:return n.createElement("span",{className:e},1===r?(0,i.Z)("{trackCount} track",{trackCount:r}):(0,i.Z)("{trackCount} tracks",{trackCount:r}))}return n.createElement("span",{className:e},1===r?(0,i.Z)("{itemCount} item",{itemCount:r}):(0,i.Z)("{itemCount} items",{itemCount:r}))}},27604:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(39061);function s({className:e,metadataItem:t}){const r=(0,i.Z)({useLongName:!0,episodeIndex:t.index,date:t.originallyAvailableAt,noLeadingZero:!0});return n.createElement("span",{className:e},n.createElement("span",{title:t.title},r))}},66918:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(57538),s=r(66012);function a({className:e,metadataItem:t}){const r=(0,s.Z)(t.sourceURI);if(null==t.duration||null==r.viewOffset)return null;const a=(t.duration-r.viewOffset)/1e3;return n.createElement("span",{className:e},(0,i.Z)(a))}},29608:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(2358),s=r(62376);function a({className:e,tabIndex:t,allowLink:r=!0,metadataItem:a}){const o=(0,i.Z)(a,"parentKey");return a.parentTitle?r&&o?n.createElement(s.Z,{className:e,tabIndex:t,title:a.parentTitle,to:o},a.parentTitle):n.createElement("span",{className:e,title:a.parentTitle},a.parentTitle):null}},84087:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(73788),s=r(66012);function a({className:e,metadataItem:t}){var r;const a=null!=(r=(0,s.Z)(t.sourceURI).viewCount)?r:0;return n.createElement("span",{className:e},1===a?(0,i.Z)("{playCount} play",{playCount:a}):(0,i.Z)("{playCount} plays",{playCount:a}))}},6726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(66281),s=r(73788);function a({className:e,metadataItem:t}){const{duration:r,preview:a}=t;return a?n.createElement("span",{className:e},(0,s.Z)("Preview")):null!=r?n.createElement("span",{className:e},(0,i.Z)(t.duration)):null}},98423:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(67294),i=r(28216),s=r(1802),a=r(78386),o=r(56422),l=r(54320),c=r(37703),d=r(10033),u=r(8089),p=r(73788),m=r(65714),h=r(53072),g=r(48529),y=r(16708),v=r(95699),f=r(63503);function b({mergedResult:e}){const t=(0,i.I0)(),r=(0,c.b)(),[b,Z]=(0,n.useState)(null),S=null==e?void 0:e.items[0],P=S&&(0,u.Z)(S.sourceURI),I=(0,i.v9)((0,h.Z)((null==P?void 0:P.serverIdentifier)||"")),{serverIdentifier:E,providerIdentifier:w}=(0,n.useMemo)((()=>(0,y.Z)(b)||{serverIdentifier:"",providerIdentifier:""}),[b]),C=(0,i.v9)((0,h.Z)(E)),M=(0,i.v9)((0,m.Z)(E,w)),D=(0,n.useCallback)((e=>{Z(e)}),[]);if((0,n.useEffect)((()=>{if(!b||!C.machineIdentifier||!M.identifier)return;const e=(0,v.Z)(b,C,M);e&&t((0,d.c4)({pathname:e})),r.onClose()}),[t,r,b,C,M]),!e)return null;const O=e.items.length>1?"+"+(e.items.length-1):null;return n.createElement("span",{className:"MetadataTitleSearchResultSources-container-Fpmrpt MetadataPosterCardTitle-title-ImAmGu"},n.createElement(a.X,{align:l.xM.SpaceBetween,gap:l.$u.M,verticalAlign:l.xM.Center},n.createElement(o.x,{numberOfLines:1},(0,f.Z)(I)),O?n.createElement("div",{style:{flexShrink:0}},n.createElement(s.zx,{size:l.$u.XS,title:(0,p.Z)("Choose Source Menu"),onPress:r.onOpen},O)):null),n.createElement(g.Z,{modalState:r,result:e,onResultSelect:D}))}},16690:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),i=r(39061),s=r(40645),a=r(84419),o=r(2358),l=r(62376);function c({className:e,tabIndex:t,allowLink:r=!0,metadataItem:c}){const d=(0,o.Z)(c,"key"),u=(0,o.Z)(c,"parentKey"),p=(0,s.Z)({seasonIndex:c.parentIndex,noLeadingZero:!0}),m=(0,i.Z)({episodeIndex:c.index,date:c.originallyAvailableAt,noLeadingZero:!0});return r&&d&&u?n.createElement("span",{className:e},c.index&&p?n.createElement(l.Z,{tabIndex:t,title:c.parentTitle,to:u},p):null,c.index&&p?n.createElement(a.Z,{separator:""}):null,n.createElement(l.Z,{tabIndex:t,title:c.title,to:d},m)):n.createElement("span",{className:e},c.index&&p?n.createElement("span",{title:c.parentTitle},p):null,c.index&&p?n.createElement(a.Z,{separator:""}):null,n.createElement("span",{title:c.title},m))}},29360:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(39061);function s({className:e,metadataItem:t}){const r=(0,i.Z)({useLongName:!1,episodeIndex:t.index,date:t.originallyAvailableAt,noLeadingZero:!0});return n.createElement("span",{className:e},n.createElement("span",{title:t.title},r))}},38449:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),i=r(28216),s=r(41801),a=r(28589),o=r(26759),l=r(75404),c=r(70777),d=r(73788),u=r(66012),p=r(25004),m=r(44811),h=r(89536),g=r(15058),y=r(42613);function v({className:e,metadataItem:t}){var r;const v=(0,i.I0)(),[f,b]=(0,m.c9)(),Z=(0,u.Z)(t.sourceURI),S=(0,i.v9)((0,g.Z)(c.hq)),P=(0,h.Z)(t),I=(0,i.v9)(o.Z),E=(0,n.useCallback)((e=>{const r=0===e?-1:e*(S?1:2);P({action:l.zw,value:r}),v(p.Z.actions.rateRequested({server:f,provider:b,stableUser:I,sourceURI:t.sourceURI,ratingKey:t.ratingKey,rating:r}))}),[v,S,t.ratingKey,t.sourceURI,b,f,I,P]),w=S?1:2,C=(null!=(r=Z.userRating)?r:0)/w;return n.createElement("div",{className:e},S&&Z.isPopulated?n.createElement(a.o,{"aria-label":(0,d.Z)("Rate"),value:C,onChange:E}):null,S&&!Z.isPopulated?n.createElement(s.Z,{"aria-label":(0,d.Z)("Rate"),value:C}):null,S?null:n.createElement(y.Z,{value:C,onRatingChange:Z.isPopulated?E:void 0}))}},21518:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(45924);function s({className:e,metadataItem:t}){var r;const s=null==(r=t.Media)?void 0:r[0];return null==(null==s?void 0:s.videoResolution)?null:n.createElement("span",{className:e},(0,i.Z)(s.videoResolution))}},99088:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({className:e,metadataItem:t}){return t.year?n.createElement("span",{className:e},t.year):null}},66012:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(28216),s=r(59658);function a(e){const t=(0,n.useMemo)((()=>(0,s.Z)(e)),[e]);return(0,i.v9)(t)}},35124:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(67294),i=r(28216),s=r(74278),a=r(26759),o=r(83782),l=r(78864),c=r(11294),d=r(25004),u=r(54675),p=r(74310),m=r(9278),h=r(28247),g=Object.defineProperty,y=Object.defineProperties,v=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&S(e,r,t[r]);if(f)for(var r of f(t))Z.call(t,r)&&S(e,r,t[r]);return e},I=(e,t)=>y(e,v(t));function E({server:e,provider:t,metadataItem:r,metadataItemState:g}){const y=(0,i.I0)(),[v,f]=(0,h.Z)(),[b,Z]=(0,n.useState)(!1),[S,E]=(0,n.useState)(!1),w=(0,i.v9)(a.Z),C=(0,i.v9)(s.Z),M=(0,i.v9)(m.Z),{metadataProviderItemKey:D,metadataProviderSourceURI:O,metadataProviderItemState:T}=(0,l.Z)({provider:t,metadataItem:r}),{containerType:x,containerSubtype:A}=(0,p.U)(),k=(0,c.ZP)({server:e,provider:t,stableUser:w,containerType:x,containerSubtype:A,metadataItem:r,metadataItemState:g,metadataProviderItemState:T}),N=Object.values(k).includes(!0),R=(0,n.useMemo)((()=>(0,u.Z)({server:e,metadataItemState:g})),[g,e]),L=(0,n.useMemo)((()=>(0,u.Z)({server:C,metadataItemState:T})),[C,T]),j=(0,n.useCallback)((()=>{E(!1),Z(!0),R&&y(d.Z.actions.fetchRequested({server:e,provider:t,metadataItem:r})),M&&O&&L&&y(d.Z.actions.fetchRequested({server:C,provider:M,metadataItem:I(P({},r),{key:`/library/metadata/${D}`,sourceURI:O})}))}),[C,y,r,M,D,O,t,e,R,L]),V=(0,n.useCallback)((()=>{E(!0),Z(!1)}),[]),U=(0,n.useCallback)((()=>{E(!1)}),[]),F=(0,n.useCallback)((()=>{b?V():j()}),[b,V,j]);(0,n.useEffect)((()=>{e.isCloud&&g.isStale&&y(d.Z.actions.fetchRequested({server:e,provider:t,metadataItem:r}))}),[y,r,g.isStale,t,e]),(0,n.useEffect)((()=>{M&&O&&(null==T?void 0:T.isStale)&&y(d.Z.actions.fetchRequested({server:C,provider:M,metadataItem:I(P({},r),{key:`/library/metadata/${D}`,sourceURI:O})}))}),[C,y,r,M,D,null==T?void 0:T.isStale,O]);const B=!(!b||!g.isPending&&!(null==T?void 0:T.isPending));return{hoverRef:f,isHovered:v,isActionsPending:B,isActionsVisible:(N||B)&&(v||b||S),actionsMenuButtonID:(0,o.Z)(),isActionsMenuOpen:b&&!g.isPending&&!(!g.isPopulated&&!g.error)&&!(null==T?void 0:T.isPending)&&!(T&&!T.isPopulated&&!T.error),isActionsMenuClosing:S,onActionsMenuOpen:j,onActionsMenuClose:V,onActionsMenuCloseComplete:U,onActionsMenuToggle:F}}},78864:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(28216),s=r(74278),a=r(74226),o=r(35076),l=r(97318),c=r(66012),d=r(87001),u=r(9278);function p({provider:e,metadataItem:t}){const r=(0,i.v9)(s.Z),p=(0,i.v9)(u.Z),m=(0,n.useMemo)((()=>t.primaryGuid?(0,d.Z)(t):(0,l.Z)(t.guid)),[t]),h=(0,n.useMemo)((()=>p&&m?(0,o.Z)({serverIdentifier:r.machineIdentifier,providerIdentifier:p.identifier,key:`/library/metadata/${m}`}):void 0),[r.machineIdentifier,p,m]),g=(0,c.Z)(h);return!p||!m||a.wB(e.identifier,[a.IS,a.Xp])&&t.ratingKey===m?{}:{metadataProviderItemKey:m,metadataProviderSourceURI:h,metadataProviderItemState:g}}},87457:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(28216),s=r(22222),a=r(36522);function o(e){const t=(0,n.useMemo)((()=>function(e){return(0,s.P1)(a.Z,(t=>e&&t.metadataTimelineState[e]||{}))}(e)),[e]);return(0,i.v9)(t)}},2358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(99318),i=r(89715),s=r(87001),a=r(33803),o=r(44811),l=r(11101),c=r(91085),d=r(86027),u=r(30547);const p=function(e,t){const[r,p]=(0,o.c9)(),{metricsContextTuple:m}=(0,c.Zn)();if(!e)return;const h=(0,s.Z)(e);if(e.isExtra&&h)return(0,d.Z)(r.machineIdentifier,p.identifier,{key:`/library/metadata/${h}`});const g=(0,i.Z)(e,t);return r!==l.Z&&p!==a.Z&&g?(0,u.Z)(r,p,g,{context:(0,c.VJ)(m),legacy:e.type===n.pG.PhotoAlbum?1:void 0},e.playlistType):void 0}},14096:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});var n=r(67294),i=r(28216),s=r(93888);function a({server:e,provider:t,metadataItem:r,metadataItemState:a}){const o=(0,i.I0)();return(0,n.useCallback)((n=>{o((0,s.vr)({server:e,provider:t,metadataItem:r,metadataItemState:a,legacyAction:n}))}),[o,r,a,t,e])}},10234:(e,t,r)=>{"use strict";r.d(t,{R:()=>a});var n=r(67294),i=r(28216),s=r(93888);function a({containerServer:e,containerProvider:t,server:r,provider:a,metadataItem:o,metadataItemState:l,metricsPage:c,metricsContextTuple:d}){const u=(0,i.I0)();return(0,n.useCallback)((n=>{u((0,s.vr)({server:e,provider:t,itemServer:r,itemProvider:a,metadataItem:o,metadataItemState:l,metricsPage:c,metricsProperties:{contextTuple:d},legacyAction:n}))}),[t,e,u,o,l,d,c,a,r])}},25984:(e,t,r)=>{"use strict";r.d(t,{I:()=>h,Z:()=>g});var n=r(85229),i=r(53782),s=r(32601),a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e};const h={item:m({},i.Z),error:null,isPending:!1,isPopulated:!1},g=(0,n.oM)({name:"metadataItemSlice",initialState:{},reducers:{fetchMetadataItem(e,{payload:t}){var r,n;e[t.key]||(e[t.key]=(r=m({},h),n={item:m({},i.Z)},o(r,l(n)))),(0,s.er)(e[t.key])},fetchMetadataItemSucceeded(e,{payload:t}){(0,s.vv)(e[t.key]),e[t.key].item=t.metadataItem},fetchMetadataItemFailed(e,{payload:{error:t,key:r}}){(0,s.VQ)(e[r],t)}}})},99318:(e,t,r)=>{"use strict";r.d(t,{pG:()=>n,A:()=>i,y_:()=>s,DD:()=>a,hw:()=>o,jx:()=>l,fw:()=>c,dx:()=>d,Qy:()=>u});var n=(e=>(e.Movie="movie",e.Show="show",e.Season="season",e.Episode="episode",e.Person="person",e.Artist="artist",e.Album="album",e.Track="track",e.Clip="clip",e.Photo="photo",e.PhotoAlbum="photoalbum",e.Playlist="playlist",e.Collection="collection",e.Directory="directory",e.Channel="channel",e.Hub="hub",e.List="list",e.Author="author",e.Audiobook="audiobook",e.Chapter="chapter",e))(n||{}),i=(e=>(e[e.Movie=1]="Movie",e[e.Show=2]="Show",e[e.Season=3]="Season",e[e.Episode=4]="Episode",e[e.Person=7]="Person",e[e.Artist=8]="Artist",e[e.Album=9]="Album",e[e.Track=10]="Track",e[e.Clip=12]="Clip",e[e.Photo=13]="Photo",e[e.PhotoAlbum=14]="PhotoAlbum",e[e.Playlist=15]="Playlist",e[e.Collection=18]="Collection",e[e.Author=20]="Author",e[e.Audiobook=21]="Audiobook",e[e.Chapter=22]="Chapter",e))(i||{}),s=(e=>(e.Movie="movie",e.Show="show",e.Season="season",e.Episode="episode",e.Artist="artist",e.Album="album",e.Track="track",e.Trailer="trailer",e.DeletedScene="deletedScene",e.Interview="interview",e.MusicVideo="musicVideo",e.BehindTheScenes="behindTheScenes",e.SceneOrSample="sceneOrSample",e.LiveMusicVideo="liveMusicVideo",e.LyricMusicVideo="lyricMusicVideo",e.Concert="concert",e.Featurette="featurette",e.Short="short",e.Other="other",e.Photo="photo",e.Clip="clip",e.Author="author",e.Audiobook="audiobook",e.Chapter="chapter",e))(s||{}),a=(e=>(e.Video="video",e.Audio="audio",e.Photo="photo",e))(a||{}),o=(e=>(e.Gracenote="gracenote:/",e.Imdb="imdb:/",e.Iva="iva:/",e.Plex="plex:/",e.Tmdb="tmdb:/",e.Tvdb="tvdb:/",e.RottenTomatoes="rottentomatoes:/",e.Unknown="",e))(o||{}),l=(e=>(e[e.Video=1]="Video",e[e.Audio=2]="Audio",e[e.Subtitles=3]="Subtitles",e[e.Lyrics=4]="Lyrics",e))(l||{}),c=(e=>(e.Video="videoStreamID",e.Audio="audioStreamID",e.Subtitles="subtitleStreamID",e.Lyrics="lyricStreamID",e))(c||{}),d=(e=>(e[e.Genre=1]="Genre",e[e.Collection=2]="Collection",e[e.Director=4]="Director",e[e.Writer=5]="Writer",e[e.Actor=6]="Actor",e[e.Marker=12]="Marker",e[e.PhotoAutotag=207]="PhotoAutotag",e[e.Channel=310]="Channel",e[e.Place=400]="Place",e))(d||{}),u=(e=>(e.Genre="genre",e.Collection="collection",e.Director="director",e.Writer="writer",e.Actor="actor",e.Marker="marker",e.PhotoAutotag="photoAutotag",e.Channel="channel",e.Place="place",e))(u||{})},37425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(22222),i=r(49510),s=r(82650),a=r(35387);function o(e,t){const{playQueueItems:r,currentIndex:n}=e,i=t[r[n]];return null==i?void 0:i.metadataItem}function l(e,t){return(0,n.P1)((({ui:e})=>{var t;return null==(t=e.audioVideoPlayer)?void 0:t.playQueue}),(({ui:e})=>{var t;return null==(t=e.photoPlayer)?void 0:t.playQueue}),i.Z,((r,n,i)=>{if(!e)return!1;const l=(0,s.Z)(a.TY,e.key,t.entityID);let c,d;return r&&(c=o(r,i)),n&&(d=o(n,i)),c===l||d===l}))}},51612:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(25984),s=r(36522);const a=function(e){return(0,n.P1)(s.Z,(t=>{var r;return null!=(r=t.metadataItem[e])?r:i.I}))}},12882:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(73788);function i(e){return e?(0,n.Z)("Remove from My TIDAL"):(0,n.Z)("Add to My TIDAL")}},21866:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(16983),i=r(52901),s=r(39041),a=r(57538),o=r(72066),l=r(57609),c=r(21411),d=r(73788);function u({now:e=Date.now(),beginsAt:t,endsAt:r,channel:u,showFullTime:p,timeFormat:m}){if(!t)return(0,d.Z)("No upcoming airings");if((0,c.Z)(t,r)){const t=r-e/1e3;return t<=60?(0,d.Z)("About to end"):(0,a.Z)(t)}if((0,o.Z)(t)&&(0,l.Z)(t,{minutes:60})){const r=1e3*t-e;if(r<=6e4)return u?(0,d.Z)("Starting now on {channel}",{channel:u}):(0,d.Z)("Starting now");const n=(0,s.Z)(r);return u?(0,d.Z)("Starting in {duration} on {channel}",{duration:n,channel:u}):(0,d.Z)("Starting in {duration}",{duration:n})}return(p?n.Z:i.Z)(t,u,{timeFormat:m})}},54345:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(99318);function i(e,t){switch(e){case n.pG.Movie:case n.pG.Show:case n.pG.Season:case n.pG.Episode:case n.pG.Clip:return n.DD.Video;case n.pG.Artist:case n.pG.Album:case n.pG.Author:case n.pG.Audiobook:case n.pG.Chapter:case n.pG.Track:return n.DD.Audio;case n.pG.PhotoAlbum:case n.pG.Photo:return n.DD.Photo;case n.pG.Collection:switch(t){case n.y_.Movie:case n.y_.Show:case n.y_.Season:case n.y_.Episode:return n.DD.Video;case n.y_.Artist:case n.y_.Album:case n.y_.Track:return n.DD.Audio}}!function(e){throw new Error(`"${e}" is not mapped to a media type`)}(e)}},74760:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(58790),i=r(45924),s=r(38264);const a=function(e){const t=[];if(e.bitrate&&t.push((0,s.Z)(e.bitrate)),e.videoResolution){const r=(0,n.Z)(e),s=r?r.scanType:null;t.push((0,i.Z)(e.videoResolution,s))}return{title:e.title,info:t.join(", ")}}},84964:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(3510),i=r(99318),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e};function m(e){return function(e){const{type:t,title:r,parentTitle:s,grandparentTitle:l}=e;let c;switch(t){case i.pG.Movie:return[r,e.year];case i.pG.Season:return[s,r];case i.pG.Episode:return c={episodeIndex:e.index,date:e.originallyAvailableAt,noLeadingZero:!0,useLongName:!0},[l,(0,n.Z)((d=p({},c),u={seasonIndex:e.parentIndex},a(d,o(u)))),r];case i.pG.Album:return[s,r];case i.pG.Track:return[l,r];default:return[r]}var d,u}(e).filter((e=>0===e||e)).join(", ")}},11294:(e,t,r)=>{"use strict";r.d(t,{qV:()=>j,FL:()=>B,yq:()=>L,Or:()=>q,k7:()=>J,J5:()=>$,Dd:()=>W,h$:()=>G,Jm:()=>X,tW:()=>N,r5:()=>H,gK:()=>z,wc:()=>K,Ef:()=>F,ZP:()=>te});var n=r(8238),i=r(89083),s=r(74226),a=r(70777),o=r(851),l=r(52108),c=r(85209),d=r(89896),u=r(99318),p=r(96493),m=r(12587),h=r(12451),g=r(93644),y=r(13169),v=r(8089),f=r(82877);const b=["movie","show","season","episode"];var Z=Object.defineProperty,S=Object.defineProperties,P=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))E.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))w.call(t,r)&&C(e,r,t[r]);return e},D=(e,t)=>S(e,P(t));const O={[u.pG.Movie]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToWatchlistVisible","isAnalyzeVisible","isDeleteVersionVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isFixMatchVisible","isGetInfoVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isMatchVisible","isOptimizeVisible","isPlayTrailerVisible","isPlayVersionVisible","isPlayVisible","isQueueVisible","isRateVisible","isRecordVisible","isRefreshVisible","isRemoveFromContinueWatchingVisible","isRemoveFromCuratedListVisible","isRemoveFromWatchlistVisible","isGrantAccessVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible","isWatchTogetherVisible","isShareVisible","isReportVisible"],[u.pG.Show]:["isAddToCollectionVisible","isAddToPicksVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAddToWatchlistVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isFixMatchVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isMatchVisible","isOptimizeVisible","isPlayAllVisible","isPlayTrailerVisible","isPlayVisible","isQueueVisible","isRateVisible","isRecordVisible","isRefreshVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isRemoveFromWatchlistVisible","isSettingsVisible","isGrantAccessVisible","isShuffleVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible","isShareVisible","isReportVisible"],[u.pG.Season]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isOptimizeVisible","isPlayAllVisible","isPlayVisible","isQueueVisible","isRateVisible","isRemoveFromCuratedListVisible","isGrantAccessVisible","isShuffleVisible","isSyncDownloadVisible","isViewPlayHistoryVisible","isShareVisible","isReportVisible"],[u.pG.Episode]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAnalyzeVisible","isDeleteVersionVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isGetInfoVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isOptimizeVisible","isPlayVersionVisible","isPlayVisible","isQueueVisible","isRateVisible","isRecordVisible","isRefreshVisible","isRemoveFromContinueWatchingVisible","isRemoveFromCuratedListVisible","isGrantAccessVisible","isSyncDownloadVisible","isViewPlayHistoryVisible","isWatchTogetherVisible","isShareVisible","isReportVisible"],[u.pG.Artist]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isFixMatchVisible","isMatchVisible","isPlayAllVisible","isPlayArtistTVVisible","isPlayRadioVisible","isPlayVisible","isQueueVisible","isRateVisible","isRefreshVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible"],[u.pG.Album]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPicksVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isFixMatchVisible","isMatchVisible","isPlayVisible","isQueueVisible","isRateVisible","isRefreshVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isShuffleVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible"],[u.pG.Track]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isGetInfoVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isPlayMusicVideoVisible","isPlayVisible","isQueueVisible","isRateVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isSyncDownloadVisible","isViewPlayHistoryVisible"],[u.pG.Author]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isFixMatchVisible","isMatchVisible","isPlayAllVisible","isPlayArtistTVVisible","isPlayRadioVisible","isPlayVisible","isQueueVisible","isRateVisible","isRefreshVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible"],[u.pG.Audiobook]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPicksVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isEditVisible","isFixMatchVisible","isMatchVisible","isPlayVisible","isQueueVisible","isRateVisible","isRefreshVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isShuffleVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible"],[u.pG.Chapter]:["isAddToCollectionVisible","isAddToLibraryVisible","isAddToPlaylistVisible","isAddToSavedVisible","isAnalyzeVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isGetInfoVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isPlayMusicVideoVisible","isPlayVisible","isQueueVisible","isRateVisible","isRemoveFromCuratedListVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isSyncDownloadVisible","isViewPlayHistoryVisible"],[u.pG.PhotoAlbum]:["isAddToPlaylistVisible","isAnalyzeVisible","isEditVisible","isPlayVisible","isGrantAccessVisible","isShuffleVisible"],[u.pG.Photo]:["isAddToPlaylistVisible","isAnalyzeVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isFavoriteVisible","isGetInfoVisible","isPlayVisible","isGrantAccessVisible","isUnfavoriteVisible"],[u.pG.Clip]:["isAddToPlaylistVisible","isAddToSavedVisible","isAddToWatchlistVisible","isAnalyzeVisible","isDeleteVersionVisible","isDeleteVisible","isDownloadFileVisible","isEditVisible","isFixMatchVisible","isGetInfoVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isMatchVisible","isOptimizeVisible","isPlayTrailerVisible","isPlayVersionVisible","isPlayVisible","isQueueVisible","isRateVisible","isRefreshVisible","isRemoveFromSavedVisible","isRemoveFromWatchlistVisible","isGrantAccessVisible","isSplitApartVisible","isSyncDownloadVisible","isUnmatchVisible","isViewPlayHistoryVisible","isWatchTogetherVisible"],[u.pG.Playlist]:["isAddToSavedVisible","isDeleteVisible","isEditFiltersVisible","isEditVisible","isPlayVisible","isQueueVisible","isRemoveFromSavedVisible","isGrantAccessVisible","isShuffleVisible","isSyncDownloadVisible"],[u.pG.Collection]:["isAddToPlaylistVisible","isDeleteVisible","isEditFiltersVisible","isEditVisible","isPlayVisible","isPublishVisible","isQueueVisible","isRateVisible","isShuffleVisible"]};function T(e,t){return!!(0,g.Z)(e,t)}function x(e,t,r){const n=(0,h.Z)(e,t,r);return!(!n||!(0,d.d)(r,n))}function A(e){var t;return null!=(t=null==e?void 0:e.isExtra)&&t&&function(e){const t=e.Media;return!!(null==t?void 0:t.some((e=>e.premium)))}(e)}function k(e,t){return!A(e)&&!t.isEmbedded}const N=({server:e,provider:t,stableUser:r,metadataItem:n})=>function(e,t,r,n){const{isFolder:i,Media:o}=n;if(s.wB(t.identifier,[s.Xp,s.IS])&&!(null==o?void 0:o.length))return!1;if(e.isCloud&&n.isAdult)return!1;if((0,g.Z)(t,m.zW.PlayQueue))return!i;const l=!!r.features[a.Ks];return!(!t.protocols.includes(m.rn.LiveTV)||!(e.livetv&&4===e.livetv||l)||!(null==o?void 0:o.length))}(e,t,r,n),R=({metadataItem:e})=>!!e.primaryExtraKey,L=({server:e,provider:t,stableUser:r,metadataItem:n})=>{if(!t)return!1;const i=(0,g.Z)(t,m.zW.Playlist);return!(!i||!(0,d.d)(r,i))&&k(n,e)},j=({server:e,provider:t,metadataItem:r})=>!(!T(t,m.zW.Collection)||!T(t,m.zW.Manage))&&!!r.librarySectionID&&k(r,e),V=({provider:e,stableUser:t})=>x(e,m.rf.Save,t),U=({stableUser:e,metadataItem:t,metadataItemState:r,provider:n,containerSubtype:i,metadataProvider:s})=>{const a=(o=t.guid||t.primaryGuid)&&Object.values(u.hw).find((e=>o.startsWith(e)))||u.hw.Unknown;var o;return!(!t||r.error||a!==u.hw.Plex||t.type===u.pG.Clip&&i===u.y_.Trailer)&&(s&&x(s,m.rf.AddToWatchlist,e)||x(n,m.rf.AddToWatchlist,e))},F=e=>{const t=e.metadataProviderItemState||e.metadataItemState;return!!t.watchlistedAt&&U(D(M({},e),{metadataItemState:t}))},B=({provider:e,stableUser:t,metadataItem:r})=>{if(!e)return!1;const n=r.type===u.pG.Track||r.type===u.pG.Album||r.type===u.pG.Artist,i=s.wB(e.identifier,s.xF),l=!!t.features[a.Ao],c=(0,d.d)(t,{requires:o.s});return n&&i&&l&&c};function _({provider:e,metadataItem:t,stableUser:r}){return!(!x(e,m.rf.Rate,r)||(0,c.isDirectoryType)(t.type)||t.isFolder)}const z=({provider:e,metadataItem:t})=>{const r=(0,g.Z)(e,m.zW.Subscribe);return(0,p.Z)(t)&&!!r},H=({server:e,provider:t,metadataItem:r,stableUser:n})=>x(t,m.rf.Rate,n)&&!r.isUnreleased&&!r.isFolder&&!e.isEmbedded,W=({provider:e,metadataItem:t,metadataItemState:r,stableUser:n})=>{const i=(0,h.Z)(e,m.rf.Scrobble,n);return!(!i||!i.key||e.protocols.includes(m.rn.LiveTV)||null!=r.saved&&!r.saved&&!r.viewOffset||t.isExtra||t.isUnreleased)&&((0,c.isParentType)(t.type)?void 0!==r.viewedLeafCount&&void 0!==t.leafCount&&r.viewedLeafCount<t.leafCount:!r.viewCount||!!r.viewOffset)},G=({provider:e,metadataItem:t,metadataItemState:r,stableUser:n})=>{const i=(0,h.Z)(e,m.rf.Scrobble,n);return!(!i||!i.reverseKey||e.protocols.includes(m.rn.LiveTV)||null!=r.saved&&!r.saved||t.isExtra||t.isUnreleased)&&((0,c.isParentType)(t.type)?!!r.viewedLeafCount&&r.viewedLeafCount>0:!!r.viewCount||!!r.viewOffset)},Q=({server:e,provider:t,metadataItem:r})=>{const{isExtra:n,isFolder:i,radio:s,readOnly:a}=r,o=!(e.isEmbedded||n||i||s);return r.isPlaylist?!a:T(t,m.zW.Manage)&&o},$=({server:e,provider:t,metadataItem:r})=>Q({server:e,provider:t,metadataItem:r}),K=({server:e,provider:t,metadataItem:r})=>Q({server:e,provider:t,metadataItem:r}),q=({server:e,provider:t,metadataItem:r})=>!r.indirect&&!r.remoteMedia&&Q({server:e,provider:t,metadataItem:r}),Y=({server:e,provider:t,metadataItem:r})=>!!Q({server:e,provider:t,metadataItem:r})&&!(!r.guid||/(local|none):\/\//.test(r.guid)),X=({server:e,provider:t,metadataItem:r})=>!!Q({server:e,provider:t,metadataItem:r})&&!(r.remoteMedia||!e.transcoderVideo||!e.backgroundProcessing),J=({server:e,provider:t,metadataItem:r})=>!!Q({server:e,provider:t,metadataItem:r})&&!!(r.isPlaylist||r.type===u.pG.Collection||r.remoteMedia||e.allowMediaDeletion),ee={isAddToCollectionVisible:j,isAddToLibraryVisible:B,isAddToPicksVisible:({provider:e,stableUser:t})=>x(e,m.rf.Pick,t),isAddToPlaylistVisible:L,isAddToSavedVisible:e=>V(e)&&!1===e.metadataItemState.saved,isAddToWatchlistVisible:e=>{const t=e.metadataProviderItemState||e.metadataItemState;return!t.watchlistedAt&&U(D(M({},e),{metadataItemState:t}))},isAnalyzeVisible:q,isDeleteVersionVisible:({server:e,provider:t,metadataItem:r})=>{var n;if(!Q({server:e,provider:t,metadataItem:r}))return!1;if(!e.allowMediaDeletion)return!1;const i=null==(n=r.Media)?void 0:n.filter((e=>!!e.proxyType));return!!(null==i?void 0:i.length)},isDeleteVisible:J,isDownloadFileVisible:({provider:e,metadataItem:t})=>!(!n.Z.allowDirectDownload||!e.protocols.includes(m.rn.Download)||t.isExtra||t.remoteMedia),isEditFiltersVisible:({server:e,provider:t,metadataItem:r})=>!!Q({server:e,provider:t,metadataItem:r})&&!!r.smart,isEditVisible:$,isFavoriteVisible:({provider:e,stableUser:t,metadataItem:r,metadataItemState:n})=>_({provider:e,stableUser:t,metadataItem:r})&&!(0,l.ZP)(n),isFixMatchVisible:({server:e,provider:t,metadataItem:r})=>Y({server:e,provider:t,metadataItem:r}),isGetInfoVisible:({provider:e,metadataItem:t})=>!!e&&(0,y.Z)(e)&&!t.isExtra&&!t.indirect,isMarkPlayedVisible:W,isMarkUnplayedVisible:G,isShareVisible:({metadataItem:e,stableUser:t})=>function(e,t){var r;return!!((0,f.i)(a.hq)&&t.isFullUser&&!t.anonymous&&e.guid&&(null==(r=e.guid)?void 0:r.indexOf("plex://"))>-1&&b.includes(e.type))}(e,t),isReportVisible:({metadataItem:e,stableUser:t})=>function(e,t){const r=(0,v.Z)(e.source);return(0,f.i)(a.hq)&&t.isFullUser&&!t.anonymous&&r.isServer}(e,t),isMatchVisible:({server:e,provider:t,metadataItem:r})=>!!Q({server:e,provider:t,metadataItem:r})&&!!r.guid&&!Y({server:e,provider:t,metadataItem:r}),isOptimizeVisible:X,isPlayAllVisible:({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})=>!(!N({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})||n.type!==u.pG.Artist&&(!n.onDeck||!i.viewedLeafCount)),isPlayArtistTVVisible:({metadataItem:e})=>function(e){return!!e.stations&&e.stations.some((e=>e.playlistType===u.DD.Video))}(e),isPlayMusicVideoVisible:R,isPlayRadioVisible:({metadataItem:e})=>function(e){return!!e.stations&&e.stations.some((e=>e.playlistType===u.DD.Audio))}(e),isPlayTrailerVisible:R,isPlayVersionVisible:({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})=>!!N({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})&&(0,y.Z)(t)&&!!n.Media&&n.Media.length>1,isPlayVisible:N,isPublishVisible:({server:e,provider:t})=>{var r;return!!(null==(r=e.ownerFeatures)?void 0:r.includes(a.DI))&&T(t,m.zW.Manage)},isQueueVisible:({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})=>N({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})&&T(t,m.zW.PlayQueue)&&!A(n),isRateVisible:H,isRecordVisible:z,isRefreshVisible:K,isRemoveFromContinueWatchingVisible:e=>x(e.provider,m.rf.RemoveFromContinueWatching,e.stableUser),isRemoveFromCuratedListVisible:({provider:e,containerType:t})=>!(!T(e,m.zW.Collection)||!T(e,m.zW.Manage))&&t===u.pG.Collection,isRemoveFromSavedVisible:e=>V(e)&&!0===e.metadataItemState.saved,isRemoveFromWatchlistVisible:F,isSettingsVisible:({provider:e,metadataItemState:t})=>!T(e,m.zW.Manage)&&null!=t.preferences,isGrantAccessVisible:({server:e,provider:t,metadataItem:r})=>(0,y.Z)(t)&&e.isFullOwnedServer&&!r.isExtra&&!r.remoteMedia,isShuffleVisible:({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})=>!n.radio&&N({server:e,provider:t,stableUser:r,metadataItem:n,metadataItemState:i})&&T(t,m.zW.PlayQueue),isSplitApartVisible:({server:e,provider:t,metadataItem:r})=>{var n;if(!Q({server:e,provider:t,metadataItem:r}))return!1;let i;return i=(0,c.isParentType)(r.type)?r.Location:null==(n=r.Media)?void 0:n.filter((e=>!e.proxyType)),!!i&&i.length>1},isSyncDownloadVisible:({server:e,provider:t,metadataItem:r})=>{if(!n.Z.allowSyncDownload)return!1;if(!t)return!1;if(!s.QN.includes(t.identifier))return!1;if(r.isPlaylist&&r.playlistType===u.DD.Photo)return!1;if(!r.hasOwnProperty("guid"))return!1;if(r.remoteMedia)return!1;const a=(0,g.Z)(t,m.zW.Subscribe),o=(null==a?void 0:a.flavor)===i.HN;return(0,y.Z)(t)?e.allowSync&&o:o},isUnfavoriteVisible:({provider:e,stableUser:t,metadataItem:r,metadataItemState:n})=>_({provider:e,stableUser:t,metadataItem:r})&&(0,l.ZP)(n),isUnmatchVisible:({server:e,provider:t,metadataItem:r})=>Y({server:e,provider:t,metadataItem:r}),isViewPlayHistoryVisible:({server:e,provider:t,metadataItem:r})=>(0,y.Z)(t)&&e.isFullOwnedServer&&!e.isEmbedded&&!r.isExtra,isWatchTogetherVisible:({provider:e,stableUser:t,metadataItem:r})=>{const n=!!t.features[a.Bs],i=s.wB(e.identifier,[s.Y3,s.uk]);return n&&i&&!r.isExtra}};function te({server:e,provider:t,metadataProvider:r,metadataProviderItemState:n,stableUser:i,containerType:s,containerSubtype:a,metadataItem:o,metadataItemState:l}){const c=O[o.type];return c?c.reduce(((c,d)=>{const u=ee[d];return c[d]=!!(e&&t&&o)&&u({server:e,provider:t,metadataProvider:r,metadataProviderItemState:n,stableUser:i,containerType:s,containerSubtype:a,metadataItem:o,metadataItemState:l}),c}),{}):{}}},89715:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(99318);const i=function(e,t){if("key"!==t||!(e.skipDetails||e.type===n.pG.Track||e.type===n.pG.Photo||e.subtype===n.y_.Photo||e.isExtra||e.isLiveTVChannel||e.radio))return e[t]}},90245:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(99318);function i(e){switch(e){case n.pG.Movie:return n.A.Movie;case n.pG.Show:return n.A.Show;case n.pG.Season:return n.A.Season;case n.pG.Episode:return n.A.Episode;case n.pG.Person:return n.A.Person;case n.pG.Artist:return n.A.Artist;case n.pG.Album:return n.A.Album;case n.pG.Track:return n.A.Track;case n.pG.Clip:return n.A.Clip;case n.pG.Photo:return n.A.Photo;case n.pG.PhotoAlbum:return n.A.PhotoAlbum;case n.pG.Playlist:return n.A.Playlist;case n.pG.Collection:return n.A.Collection;case n.pG.Author:return n.A.Author;case n.pG.Audiobook:return n.A.Audiobook;case n.pG.Chapter:return n.A.Chapter}!function(e){throw new Error(`"${e}" is not mapped to a numeric type`)}(e)}},17007:(e,t,r)=>{"use strict";r.d(t,{s4:()=>a,Zp:()=>o,oz:()=>l,ZP:()=>c});var n=r(23642),i=r(99318),s=r(78389);const a=1/1.5,o=1,l=16/9;function c(e,t,r){const c=null==r?void 0:r.listStyle,d=null==r?void 0:r.displayImageType;if(d)return function(e){switch(e){case n.IY.Avatar:return o;case n.IY.Background:return l;case n.IY.Banner:return 5.4;case n.IY.Clear:return o;case n.IY.CoverArt:return l;case n.IY.CoverPoster:return a;case n.IY.CoverSquare:return o;case n.IY.Snapshot:return l}!function(e){throw new Error(`"${e}" is not mapped to an aspect ratio`)}(e)}(d);if(c)switch(c){case s.n.Hero:return l;case s.n.Grid:case s.n.Shelf:switch(e){case s.U.Channels:case s.U.Author:case s.U.Audiobook:return o}switch(e){case i.pG.Episode:return a}break;case s.n.Search:switch(e){case i.pG.Clip:case i.pG.Movie:case i.pG.Episode:return a;case s.U.Channels:return o}}switch(t){case i.y_.Clip:switch(e){case i.pG.Movie:return l}}switch(e){case i.pG.Movie:case i.pG.Show:case i.pG.Season:return a;case i.pG.Episode:return l;case i.pG.Audiobook:case i.pG.Author:case i.pG.Artist:case i.pG.Album:case i.pG.Track:case i.pG.Person:case i.pG.Photo:case i.pG.PhotoAlbum:case i.pG.Playlist:return o;case i.pG.Clip:return l;case i.pG.Collection:switch(t){case i.y_.Episode:return l;case i.y_.Artist:case i.y_.Album:return o;default:return a}case s.U.Directory:return l;case s.U.Content:case s.U.Channel:case s.U.Folder:case s.U.Station:case i.pG.Hub:case i.pG.List:return o;case s.U.Mixed:return a;default:return l}}},88063:(e,t,r)=>{"use strict";function n(e){const{width:t,height:r,aspectRatio:n}=e;if(t)return{width:t,height:Math.floor(t/n)};if(r)return{width:Math.floor(r*n),height:r};throw new Error("`getMetadataPosterDimensions` requires either a `width` or `height`")}r.d(t,{Z:()=>n})},79634:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>he,uM:()=>me,$8:()=>ue});var n=r(23642),i=r(67294),s=r(41801),a=r(54320),o=r(94442);function l({className:e}){const[t]=(0,o.KY)(),r=null==t?void 0:t.rating;return r?i.createElement("span",{className:e},i.createElement(s.Z,{iconSize:a.$u.M,value:r})):null}var c=r(71124),d=r(47151),u=r(40385),p=r(73788);function m({className:e,metadataItem:t}){return null==t.childCount?null:i.createElement("span",{className:e},1===t.childCount?(0,p.Z)("1 album"):(0,p.Z)("{albumCount} albums",{albumCount:t.childCount}))}var h=r(74378),g=r(2358),y=r(62376);function v({className:e,tabIndex:t,allowLink:r=!0,metadataItem:n}){const s=(0,g.Z)(n,"key");if(!n.title)return null;const a=i.createElement(i.Fragment,null,n.attribution?i.createElement(h.Z,{attribution:n.attribution,className:"MetadataTitleAttributed-badge-qiBr8A"}):null,n.title);return r&&s?i.createElement(y.Z,{className:e,tabIndex:t,title:n.title,to:s},a):i.createElement("span",{className:e,title:n.title},a)}function f({className:e,metadataItem:t}){return t.attributionLogo?i.createElement("span",{className:e},i.createElement("img",{className:"MetadataTitleAttributionLogo-img-A4jLQd",src:t.attributionLogo})):null}var b=r(34221),Z=r(69672),S=r(39717),P=r(99318);function I({className:e,metadataItem:t}){if(null==t.childCount)return null;const r=1===t.childCount,n={itemCount:t.childCount};let s;return s=t.subtype===P.y_.Movie?r?(0,p.Z)("{itemCount} movie",n):(0,p.Z)("{itemCount} movies",n):t.subtype===P.y_.Show?r?(0,p.Z)("{itemCount} show",n):(0,p.Z)("{itemCount} shows",n):t.subtype===P.y_.Season?r?(0,p.Z)("{itemCount} season",n):(0,p.Z)("{itemCount} seasons",n):t.subtype===P.y_.Episode?r?(0,p.Z)("{itemCount} episode",n):(0,p.Z)("{itemCount} episodes",n):t.subtype===P.y_.Artist?r?(0,p.Z)("{itemCount} artist",n):(0,p.Z)("{itemCount} artists",n):t.subtype===P.y_.Album?r?(0,p.Z)("{itemCount} album",n):(0,p.Z)("{itemCount} albums",n):t.subtype===P.y_.Track?r?(0,p.Z)("{itemCount} track",n):(0,p.Z)("{itemCount} tracks",n):r?(0,p.Z)("{itemCount} item",n):(0,p.Z)("{itemCount} items",n),i.createElement("span",{className:e},s)}var E=r(55707),w=r(60421),C=r(74232);function M({className:e,metadataItem:t}){return null==t.leafCount?null:i.createElement("span",{className:e},1===t.leafCount?(0,p.Z)("{episodeCount} episode",{episodeCount:t.leafCount}):(0,p.Z)("{episodeCount} episodes",{episodeCount:t.leafCount}))}var D=r(39061);function O({className:e,tabIndex:t,metadataItem:r}){const n=(0,g.Z)(r,"key"),s=(0,D.Z)({useLongName:!0,episodeIndex:r.index,date:r.originallyAvailableAt,noLeadingZero:!0});return n?i.createElement("span",{className:e},i.createElement(y.Z,{tabIndex:t,title:r.title,to:n},s)):i.createElement("span",{className:e},i.createElement("span",{title:r.title},s))}var T=r(78386),x=r(16690);const A="MetadataTitleEpisodeTitleAndIdentifier-ellipsis-Lsorf0";function k({className:e,metadataItem:t}){return i.createElement("div",{className:e},i.createElement(T.X,{gap:a.$u.XS},i.createElement(c.Z,{className:A,metadataItem:t}),i.createElement(x.Z,{className:A,metadataItem:t})))}function N({className:e,metadataItem:t}){const{sourceTitle:r}=t;return r?i.createElement("span",{className:e,title:r},(0,p.Z)("from {sourceTitle}",{sourceTitle:r})):null}function R({className:e,metadataItem:t}){const r=function(e){switch(e){case P.y_.Trailer:return(0,p.Z)("Trailer");case P.y_.DeletedScene:return(0,p.Z)("Deleted Scene");case P.y_.Interview:return(0,p.Z)("Interview");case P.y_.MusicVideo:return(0,p.Z)("Music Video");case P.y_.BehindTheScenes:return(0,p.Z)("Behind the Scenes");case P.y_.SceneOrSample:return(0,p.Z)("Scene");case P.y_.LiveMusicVideo:return(0,p.Z)("Live Music Video");case P.y_.LyricMusicVideo:return(0,p.Z)("Lyric Music Video");case P.y_.Concert:return(0,p.Z)("Concert");case P.y_.Featurette:return(0,p.Z)("Featurette");case P.y_.Short:return(0,p.Z)("Short");case P.y_.Other:return(0,p.Z)("Other")}}(t.subtype);return r?i.createElement("span",{className:e,title:r},r):null}var L=r(90113),j=r(80728);function V({className:e,tabIndex:t,allowLink:r,metadataItem:n}){return null!=n.addedAt||n.grandparentTitle?i.createElement("span",{className:e},i.createElement(j.Z,{timestamp:n.addedAt}),null!=n.addedAt&&n.grandparentTitle?"  ":null,i.createElement(L.Z,{allowLink:r,metadataItem:n,tabIndex:t})):null}var U=r(61372),F=r(86291),B=r(53468),_=r(29608),z=r(84087),H=r(52501),W=r(93140);function G({className:e,metadataItem:t}){return t.playlistType===H.pV?i.createElement(W.Z,{className:e,metadataItem:t}):i.createElement(C.Z,{className:e,metadataItem:t})}var Q=r(98423);function $({className:e,metadataItem:t}){return t.skipChildren?i.createElement(M,{className:e,metadataItem:t}):null==t.childCount?null:i.createElement("span",{className:e},1===t.childCount?(0,p.Z)("{seasonCount} season",{seasonCount:t.childCount}):(0,p.Z)("{seasonCount} seasons",{seasonCount:t.childCount}))}var K=r(66012);function q({className:e,metadataItem:t}){const r=(0,K.Z)(t.sourceURI).unviewedLeafCount;return null==r?null:i.createElement("span",{className:e},(0,p.Z)("{unplayedCount} unplayed",{unplayedCount:r}))}var Y=r(38449),X=r(21518),J=r(39041);function ee({className:e,metadataItem:t}){const r=(0,K.Z)(t.sourceURI);return null==t.duration||null==r.viewOffset?null:i.createElement("span",{className:e},(0,p.Z)("{timeRemaining} left",{timeRemaining:(0,J.Z)(t.duration-r.viewOffset)}))}var te=r(99088);function re({className:e,displayFieldName:t}){return null}var ne=Object.defineProperty,ie=Object.defineProperties,se=Object.getOwnPropertyDescriptors,ae=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,ce=(e,t,r)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var de=r(78389);function ue(e){var t;return!!e&&null!=(t=e.isDoubleLine)&&t}function pe(e){switch(e){case n.PD.AddedAt:return d.Z;case n.PD.AddedAtGrandparentTitle:return V;case n.PD.AirsAt:return u.Z;case n.PD.AttributionLogo:return f;case n.PD.ChildCount:return S.Z;case n.PD.ContentRating:return E.Z;case n.PD.Duration:return C.Z;case n.PD.EpisodeIdentifier:return x.Z;case n.PD.GrandparentTitle:return L.Z;case n.PD.LastRatedAt:return U.Z;case n.PD.LastViewedAt:return F.Z;case n.PD.LeafCount:return B.Z;case n.PD.MediaBitrate:return Z.Z;case n.PD.VideoResolution:return X.Z;case n.PD.OriginallyAvailableAt:return b.Z;case n.PD.ParentTitle:return _.Z;case n.PD.Rating:return w.Z;case n.PD.SourceTitle:return N;case n.PD.Title:return c.Z;case n.PD.TitleAttributed:return v;case n.PD.UnviewedLeafCount:return q;case n.PD.UserRating:return Y.Z;case n.PD.ActivityRating:return l;case n.PD.ViewCount:return z.Z;case n.PD.ViewOffset:return ee;case n.PD.Year:return te.Z;case n.PD.EpisodeTitleAndIdentifier:return k;default:return function(e){return t=>{return i.createElement(re,(r=((e,t)=>{for(var r in t||(t={}))oe.call(t,r)&&ce(e,r,t[r]);if(ae)for(var r of ae(t))le.call(t,r)&&ce(e,r,t[r]);return e})({},t),ie(r,se({displayFieldName:e}))));var r}}(e)}}function me(e){return"component"in e?e:{component:e}}function he(e,t,r){const n=null==r?void 0:r.displayFieldNames;if(n)return n.map(pe);const i=null==r?void 0:r.listStyle;if(e===de.U.Mixed)return[null,null,null];switch(i){case de.n.PrePlayGrid:switch(e){case P.pG.Season:return[c.Z,M];case P.pG.Episode:return[c.Z,O];case P.pG.Album:return[v,te.Z];case P.pG.Collection:switch(t){case P.y_.Movie:return[c.Z,te.Z];case P.y_.Show:return[c.Z,$];case P.y_.Season:return[_.Z,c.Z];case P.y_.Episode:return[L.Z,c.Z,x.Z];case P.y_.Artist:return[c.Z];case P.y_.Album:return[_.Z,c.Z]}}break;case de.n.Search:switch(e){case P.pG.Movie:return[c.Z,te.Z,Q.Z];case P.pG.Show:return[c.Z,$,Q.Z];case P.pG.Season:return[_.Z,c.Z,Q.Z];case P.pG.Episode:return[L.Z,c.Z,x.Z,Q.Z];case P.pG.Artist:return[c.Z,m,Q.Z];case P.pG.Album:return[_.Z,c.Z,Q.Z];case P.pG.Track:return[L.Z,c.Z,Q.Z];case P.pG.Photo:case P.pG.PhotoAlbum:case P.pG.Clip:return[c.Z,Q.Z];case P.pG.Playlist:return[c.Z,G,Q.Z];case P.pG.Collection:return[c.Z,I,Q.Z];case P.pG.Channel:return[c.Z,Q.Z];case de.U.Channels:return[c.Z,u.Z,Q.Z];case de.U.Photo:return[c.Z,Q.Z]}}switch(t){case P.y_.Trailer:case P.y_.DeletedScene:case P.y_.Interview:case P.y_.MusicVideo:case P.y_.BehindTheScenes:case P.y_.SceneOrSample:case P.y_.LiveMusicVideo:case P.y_.LyricMusicVideo:case P.y_.Concert:case P.y_.Featurette:case P.y_.Short:case P.y_.Other:switch(e){case P.pG.Clip:return[{component:c.Z,allowLink:!1},R]}}switch(e){case P.pG.Movie:return[c.Z,te.Z];case P.pG.Show:return[c.Z,$];case P.pG.Season:return[_.Z,c.Z];case P.pG.Episode:return[L.Z,c.Z,x.Z];case P.pG.Artist:return[c.Z];case P.pG.Album:return[_.Z,c.Z];case P.pG.Track:return[L.Z,c.Z];case P.pG.Photo:return[{component:c.Z}];case P.pG.PhotoAlbum:case P.pG.Clip:return[c.Z];case P.pG.Playlist:return[c.Z,G];case P.pG.Collection:return[c.Z,I];case P.pG.Directory:case P.pG.Channel:case de.U.Content:return[];case de.U.Channels:return[c.Z,u.Z];case de.U.Photo:return[c.Z]}return[{component:c.Z,allowLink:!1}]}},60288:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(79634),i=r(78389),s=r(93084),a=r(5209);function o(e,t,r){const o=(0,s.Z)(e),l=null==r?void 0:r.displayFields;if(l){if(e===i.U.Mixed)return l.reduce(((e,t)=>Math.max(e,t.fields.length)),0);{const e=(0,a.Z)(o,t,l);if(e)return e.length}}return(0,n.ZP)(null!=o?o:e,t,{listStyle:null==r?void 0:r.listStyle}).reduce(((e,t)=>null!=t&&(0,n.$8)(t)?e+2:e+1),0)}},64341:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(99318),i=r(17007);function s(e,t={}){var r;const{aspectRatio:s,displayImageType:a}=t,{type:o,subtype:l,thumb:c,parentThumb:d,grandparentThumb:u,art:p,parentArt:m,composite:h,liveTVChannel:g}=e;if(a){const t=null==(r=e.Image)?void 0:r.find((e=>e.type===a));return null==t?void 0:t.url}if(g)return g.thumb;switch(s){case i.oz:switch(o){case n.pG.Movie:switch(l){case n.y_.Clip:return c}return p;case n.pG.Show:return p;case n.pG.Season:return p||m;default:return c}case i.s4:switch(o){case n.pG.Season:return c;case n.pG.Episode:return u;default:return c}case i.Zp:switch(o){case n.pG.Album:return c;case n.pG.Track:return c||d;case n.pG.Playlist:return c||h;default:return c}}return c}},79841:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i,f:()=>s});var n=r(99318);function i(e,t){switch(e){case n.pG.Show:return n.pG.Season;case n.pG.Season:return n.pG.Episode;case n.pG.Artist:return n.pG.Album;case n.pG.Author:return n.pG.Audiobook;case n.pG.Audiobook:return n.pG.Chapter;case n.pG.Album:return n.pG.Track;case n.pG.PhotoAlbum:return n.pG.Photo;case n.pG.Collection:switch(t){case n.y_.Movie:return n.pG.Movie;case n.y_.Show:return n.pG.Show;case n.y_.Season:return n.pG.Season;case n.y_.Episode:return n.pG.Episode;case n.y_.Artist:return n.pG.Artist;case n.y_.Album:return n.pG.Album;case n.y_.Track:return n.pG.Track;case n.y_.Author:return n.pG.Author;case n.y_.Audiobook:return n.pG.Audiobook;case n.y_.Chapter:return n.pG.Chapter}}}function s(e,t){switch(e){case n.pG.Show:case n.pG.Season:return n.pG.Episode;case n.pG.Author:case n.pG.Audiobook:return n.pG.Chapter;case n.pG.Artist:case n.pG.Album:return n.pG.Track;case n.pG.PhotoAlbum:return n.pG.Photo;case n.pG.Collection:switch(t){case n.y_.Movie:return n.pG.Movie;case n.y_.Show:case n.y_.Season:case n.y_.Episode:return n.pG.Episode;case n.y_.Artist:case n.y_.Album:case n.y_.Track:return n.pG.Track}}}},40363:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(73788),i=r(99318);const s=function(e,t,r=!1){switch(e){case i.pG.Movie:return t===i.y_.Clip?r?(0,n.Z)("Videos"):(0,n.Z)("Video"):r?(0,n.Z)("Movies"):(0,n.Z)("Movie");case i.pG.Show:return r?(0,n.Z)("Shows"):(0,n.Z)("Show");case i.pG.Season:return r?(0,n.Z)("Seasons"):(0,n.Z)("Season");case i.pG.Episode:return r?(0,n.Z)("Episodes"):(0,n.Z)("Episode");case i.pG.Artist:return r?(0,n.Z)("Artists"):(0,n.Z)("Artist");case i.pG.Album:return r?(0,n.Z)("Albums"):(0,n.Z)("Album");case i.pG.Track:return r?(0,n.Z)("Tracks"):(0,n.Z)("Track");case i.pG.Photo:return r?(0,n.Z)("Photos"):(0,n.Z)("Photo");case i.pG.PhotoAlbum:return r?(0,n.Z)("Photo Albums"):(0,n.Z)("Photo Album");case i.pG.Person:return r?(0,n.Z)("People"):(0,n.Z)("Person");case i.pG.Clip:return r?(0,n.Z)("Videos"):(0,n.Z)("Video");case i.pG.Collection:return r?(0,n.Z)("Collections"):(0,n.Z)("Collection");case i.pG.Playlist:return r?(0,n.Z)("Playlists"):(0,n.Z)("Playlist");case i.pG.Author:return r?"Authors":"Author";case i.pG.Audiobook:return r?"Audiobooks":"Audiobook";case i.pG.Chapter:return r?"Chapters":"Chapter"}!function(e){throw new Error(`"${e}" is not mapped to a title`)}(e)}},92934:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(89734),i=r.n(n),s=r(72066),a=r(57609),o=r(3615),l=(e=>(e.s="seconds",e.m="minutes",e.h="hours",e.d="days",e.w="weeks",e.M="months",e.y="years",e))(l||{});function c(e){if("now"===e)return{};const t=e.match(/([-+]?\d+)([smhdwMy])/);if(t){const[,e,r]=t;if(function(e){if(!(e in l))throw Error("Unknown unit: "+e)}(r),e&&r)return{[l[r]]:parseInt(e,10)}}else{const t=parseInt(e,10);if("number"==typeof t)return t}return{}}function d(e,t){return"object"==typeof t?(0,s.Z)(e,t):e>=t}function u(e,t){return"object"==typeof t?(0,a.Z)(e,t):e<=t}function p(e,t){const r=function(e){if(!e)return;const[,t]=e.split("?");return t?o.Z.parseQueryString(t):void 0}(t),n=i()(e.Media,"endsAt"),s=Date.now()/1e3;for(let e=0,t=n.length;e<t;e++){const t=n[e];if(r){const e=r["beginsAt>"],n=r["beginsAt<"],i=r["endsAt>"],s=r["endsAt<"];if(e&&t.beginsAt){const r=c(e);if(u(t.beginsAt,r))continue}if(n&&t.beginsAt){const e=c(n);if(d(t.beginsAt,e))continue}if(i&&t.endsAt){const e=c(i);if(u(t.endsAt,e))continue}if(s&&t.endsAt){const e=c(s);if(d(t.endsAt,e))continue}}if(t.endsAt&&t.endsAt>s)return t}return n[0]}},5348:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(73788),i=r(92934),s=r(96493);function a(e,t,r){var a;if((0,s.Z)(e)){const{beginsAt:t,endsAt:r}=null!=(a=(0,i.Z)(e))?a:{},s=Math.floor(Date.now()/1e3);return t&&r&&s>=t&&s<r?(0,n.Z)("Watch Now"):(0,n.Z)("Watch Channel")}return t.viewOffset||r.viewOffset?(0,n.Z)("Resume"):e.onDeck&&t.viewedLeafCount&&t.unviewedLeafCount?(0,n.Z)("Next Episode"):(0,n.Z)("Play")}},87001:(e,t,r)=>{"use strict";function n(e){var t,r;return null==(r=null==(t=null==e?void 0:e.primaryGuid)?void 0:t.match(/^plex:\/\/\w+\/(\w+)/))?void 0:r[1]}r.d(t,{Z:()=>n})},62251:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(99318),i=r(96493),s=r(54462);function a(e,t,r){return!(0,s.Z)(r)&&!(0,i.Z)(e)&&e.userState&&(e.type===n.pG.Movie||e.type===n.pG.Episode)&&!1!==t.saved}},96493:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(74226),i=r(8089);function s(e){const{providerIdentifier:t}=(0,i.Z)(e.source);return n.wB(t,[n.Ll,n.vP])}},56958:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(74226),i=r(8089);function s(e){const{providerIdentifier:t}=(0,i.Z)(e.source);return n.wB(t,[n.IS])}},22502:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(99318);function i(e){return!!e&&(e===n.dx.Actor||e===n.dx.Director||e===n.dx.Writer)}},25973:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(99318);function i(e,t){const{type:r}=e,{viewOffset:i,viewCount:s,viewedLeafCount:a,unviewedLeafCount:o}=t;return!(r!==n.pG.Movie&&r!==n.pG.Show&&r!==n.pG.Season&&r!==n.pG.Episode&&r!==n.pG.Track||i||!(s&&!a&&!o||a&&!o))}},20041:(e,t,r)=>{"use strict";r.d(t,{c9:()=>F,$G:()=>_,ZP:()=>$,x9:()=>G,i4:()=>U,WS:()=>W,D0:()=>j,Zv:()=>V,TN:()=>L,vy:()=>z,Dk:()=>B,ty:()=>H});var n=r(67294);function i({className:e,metadataItem:t}){return t.originalTitle?n.createElement("span",{className:e,title:t.originalTitle},t.originalTitle):null}var s=r(71124),a=r(47151),o=r(34221),l=r(69672),c=r(45697),d=r.n(c),u=r(90558);function p(e){const t=e["aria-label"],r=e.className,i=e.style,s={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-shows-560"};s["aria-hidden"]=!t,s.style=i,s.className=u.Z.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{d:"m440 520l0 40-320 0 0-40 320 0m120-40l-560 0 0-440 560 0 0 440m-60-380l-440 0 0 280 440 0 0-280"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}p.propTypes={"aria-label":d().string,className:d().string,style:d().object};const m=p;var h=r(84419);function g({className:e="DecoratorIcon-decoratorIconContainer-c11mDg",iconClassName:t="DecoratorIcon-decoratorIcon-KAKM5G",iconComponent:r}){return n.createElement("span",{className:e},n.createElement(r,{className:t}))}var y=r(99318);function v({className:e,metadataItem:t}){const{title:r,originalTitle:i}=t;return n.createElement("span",{className:e},n.createElement("span",{className:"MetadataTitleCombinedTitleTrackArtist-titleContainer-atm0r6"},n.createElement("span",{className:"MetadataTitleCombinedTitleTrackArtist-title-CCyhVx","data-testid":"trackName"},r,i?n.createElement("span",{className:"MetadataTitleCombinedTitleTrackArtist-trackArtist-QFZPaW"},r?n.createElement(h.Z,null):null,i):null),function(e){const{type:t,primaryExtraKey:r}=e;return t===y.pG.Track&&!!r}(t)?n.createElement(g,{iconComponent:m}):null))}var f=r(55707),b=r(60421),Z=r(74232),S=r(90113),P=r(61372),I=r(86291),E=r(66918),w=r(29608),C=r(84087),M=r(6726),D=r(28216),O=r(21366),T=r(73788);function x({className:e,metadataItem:t}){var r;const i=(0,D.v9)(O.Z),s=new Intl.NumberFormat(i,{compactDisplay:"short",notation:"compact"}).format(null!=(r=t.ratingCount)?r:0);return n.createElement("span",{className:e},"1"===s?(0,T.Z)("{ratingCount} rating",{ratingCount:s}):(0,T.Z)("{ratingCount} ratings",{ratingCount:s}))}var A=r(38449),k=r(21518),N=r(99088);const R={flexGrow:2,width:250},L={key:"title",ascKey:"titleSort",descKey:"titleSort:desc",component:()=>s.Z,style:R},j={key:"season",ascKey:"season.index,season.titleSort",descKey:"season.index:desc,season.titleSort",component:()=>s.Z,style:R},V={key:"seasonShow",ascKey:"show.titleSort,index",descKey:"show.titleSort:desc,index",component:()=>w.Z,style:R},U={key:"episodeShow",ascKey:"show.titleSort,season.index:nullsLast,episode.index:nullsLast,episode.originallyAvailableAt:nullsLast,episode.titleSort,episode.id",descKey:"show.titleSort:desc,season.index:nullsLast,episode.index:nullsLast,episode.originallyAvailableAt:nullsLast,episode.titleSort,episode.id",component:()=>S.Z,style:R},F={key:"albumArtist",ascKey:"artist.titleSort,album.titleSort,album.index,album.id,album.originallyAvailableAt",descKey:"artist.titleSort:desc,album.titleSort,album.index,album.id,album.originallyAvailableAt",component:()=>w.Z,style:R},B={key:"trackAlbumArtist",ascKey:"artist.titleSort,album.titleSort,album.year,track.absoluteIndex,track.index,track.titleSort,track.id",descKey:"artist.titleSort:desc,album.titleSort,album.year,track.absoluteIndex,track.index,track.titleSort,track.id",component:()=>S.Z,style:R},_={key:"combinedTitleTrackArtist",component:()=>v,style:R},z={key:"trackAlbum",ascKey:"album.titleSort",descKey:"album.titleSort:desc",component:()=>w.Z,style:R},H={key:"year",ascKey:"year",descKey:"year:desc",component:()=>N.Z,style:{width:100}},W={key:"miniUserRating",component:()=>A.Z,style:{width:100,minWidth:100,padding:0}},G={key:"duration",ascKey:"duration",descKey:"duration:desc",component:e=>{switch(e){case y.pG.Track:return M.Z;default:return Z.Z}},style:{width:125}},Q={key:"mediaBitrate",ascKey:"mediaBitrate",descKey:"mediaBitrate:desc",component:()=>l.Z,style:{width:110}},$=[{key:"addedAt",ascKey:"addedAt",descKey:"addedAt:desc",component:()=>a.Z,style:{width:175}},F,_,G,U,{key:"lastRatedAt",ascKey:"lastRatedAt",descKey:"lastRatedAt:desc",component:()=>P.Z,style:{width:175}},{key:"lastViewedAt",ascKey:"lastViewedAt",descKey:"lastViewedAt:desc",component:()=>I.Z,style:{width:175}},Q,W,j,V,L,z,B,{key:"minutesLeft",component:()=>E.Z,style:{width:150}},{key:"trackArtist",ascKey:"originalTitle",descKey:"originalTitle:desc",component:()=>i,style:R},{key:"userRating",ascKey:"userRating",descKey:"userRating:desc",component:()=>A.Z,style:{width:135,minWidth:135}},{key:"ratingCount",ascKey:"ratingCount",descKey:"ratingCount:desc",component:()=>x,style:{width:125}},{key:"viewCount",ascKey:"viewCount",descKey:"viewCount:desc",component:()=>C.Z,style:{width:100}},H,{key:"rating",ascKey:"rating",descKey:"rating:desc",component:()=>b.Z,style:{width:165}},{key:"contentRating",ascKey:"contentRating",descKey:"contentRating:desc",component:()=>f.Z,style:{width:100}},{key:"viewOffset",ascKey:"viewOffset",descKey:"viewOffset:desc",component:()=>E.Z,style:{width:150}},{key:"originallyAvailableAt",ascKey:"originallyAvailableAt",descKey:"originallyAvailableAt:desc",component:()=>o.Z,style:{width:175}},Q,{key:"mediaHeight",ascKey:"mediaHeight",descKey:"mediaHeight:desc",component:()=>k.Z,style:{width:110}}]},53782:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={isAdult:!1,isExtra:!1,isFolder:!1,isLiveTVChannel:!1,isPlaylist:!1,isUnreleased:!1,key:"",listItemKey:"",ratingKey:"",source:"",sourceURI:"",title:"",type:r(99318).pG.Movie,userState:!0,Autotag:[],Channel:[],Collection:[],Country:[],Director:[],Genre:[],Image:[],Label:[],Location:[],Media:[],Mood:[],Producer:[],Review:[],Role:[],Studio:[],Style:[],Tag:[],Writer:[]}},25004:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(85229);const i=["error","isPending","isPopulated","isStale","tempState"];var s=r(59405),a=r(32601);const o=(0,n.oM)({name:"metadataItemState",initialState:{},reducers:{metadataItemStatesNormalized(e,{payload:t}){Object.assign(e,t.metadataItemStates)},playedStatusUpdateRequested(e,{payload:t}){const{sourceURI:r,played:n}=t,i=e[r];if(i){const{viewedLeafCount:e,unviewedLeafCount:t,viewCount:r,viewOffset:s,tempState:a}=i;a.viewedLeafCount=e,a.unviewedLeafCount=t,a.viewCount=r,a.viewOffset=s,null!=t&&null!=e?(i.viewedLeafCount=n?t+e:0,i.unviewedLeafCount=n?0:t+e):(i.viewCount=n?(i.viewCount||0)+1:0,i.viewOffset=0)}},playedStatusUpdateSucceeded(e,{payload:t}){const{sourceURI:r}=t,n=e[r];if(n){const{tempState:e}=n;e.viewedLeafCount=void 0,e.unviewedLeafCount=void 0,e.viewCount=void 0,e.viewOffset=void 0,n.isStale=!0}},playedStatusUpdateFailed(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;r.viewedLeafCount=e.viewedLeafCount,e.viewedLeafCount=void 0,r.unviewedLeafCount=e.unviewedLeafCount,e.unviewedLeafCount=void 0,r.viewCount=e.viewCount,e.viewCount=void 0,r.viewOffset=e.viewOffset,e.viewOffset=void 0}},rateRequested(e,{payload:t}){const r=e[t.sourceURI];if(r){const{lastRatedAt:e,userRating:n,tempState:i}=r,s=-1===t.rating;i.lastRatedAt=e,i.userRating=n,r.lastRatedAt=s?void 0:Date.now(),r.userRating=s?void 0:t.rating}},rateSucceeded(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;e.lastRatedAt=void 0,e.userRating=void 0}},rateFailed(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;r.lastRatedAt=e.lastRatedAt,e.lastRatedAt=void 0,r.userRating=e.userRating,e.userRating=void 0}},toggleWatchlistRequested(e,{payload:t}){const r=e[t.sourceURI];if(r){const{watchlistedAt:e,tempState:n}=r;n.watchlistedAt=e,r.watchlistedAt=t.added?Date.now():void 0}},toggleWatchlistSucceeded(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;e.watchlistedAt=void 0,r.isStale=!0}},toggleWatchlistFailed(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;r.watchlistedAt=e.watchlistedAt,e.watchlistedAt=void 0}},toggleSavedRequested(e,{payload:t}){const r=e[t.sourceURI];if(r){const{saved:e,tempState:n}=r;n.saved=e,r.saved=t.saved}},toggleSavedSucceeded(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;e.saved=void 0,r.isStale=!0}},toggleSavedFailed(e,{payload:t}){const r=e[t.sourceURI];if(r){const{tempState:e}=r;r.saved=e.saved,e.saved=void 0}},streamSelectRequested(e,t){},streamSelectSucceeded(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)},streamSelectFailed(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)},streamDeleteRequested(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStreamDeletePending=!0)},streamDeleteSucceeded(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStreamDeletePending=!1,r.isStale=!0)},streamDeleteFailed(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStreamDeletePending=!1)},metadataProcessed(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)},fetchRequested(e,{payload:t}){var r;const n=null!=(r=e[t.metadataItem.sourceURI])?r:{tempState:{},isPending:!0,isPopulated:!1,error:null,isStale:!1};(0,a.er)(n),e[t.metadataItem.sourceURI]=n},fetchSucceeded(e,{payload:t}){const r=e[t.sourceURI];r&&(Object.assign(r,t.metadataItemState),Object.keys(r).forEach((e=>{i.includes(e)||t.metadataItemState.hasOwnProperty(e)||delete r[e]})),(0,a.vv)(r),r.isStale=!1)},fetchFailed(e,{payload:t}){const r=e[t.sourceURI];r&&(0,a.VQ)(r,t.error)},fetchCancelled(e,{payload:t}){const r=e[t.sourceURI];r&&(0,a.EA)(r)},repopulateRequested(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)},repopulateCanceled(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!1)},created(e,t){},deleted(e,{payload:t}){const r=e[t.sourceURI];r&&(r.deletedAt=Date.now(),r.isDeleted=!0)},preferenceChanged(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)},addToLibraryRequested(e,t){},removeFromContinueWatchingRequested(e,t){},removeFromContinueWatchingSucceeded(e,{payload:t}){const r=e[t.sourceURI];r&&(r.isStale=!0)}},extraReducers:e=>{e.addCase(s.Z.actions.added,((e,{payload:t})=>{Object.assign(e,t.metadataItemStates)})),e.addCase(s.Z.actions.fetchRangeSucceeded,((e,{payload:t})=>{Object.assign(e,t.data.metadataItemStates)})),e.addCase(s.Z.actions.fetchAllSucceeded,((e,{payload:t})=>{Object.assign(e,t.data.metadataItemStates)})),e.addCase(s.Z.actions.repopulateRangeSucceeded,((e,{payload:t})=>{Object.assign(e,t.data.metadataItemStates)}))}})},59658:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(89115);const s=function(e){return(0,n.P1)(i.Z,(t=>(e?t[e]:null)||{tempState:{},isStale:!1,isPending:!1,isPopulated:!1,error:null}))}},89115:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(36522);const s=(0,n.P1)(i.Z,(e=>e.metadataItemState))},54675:(e,t,r)=>{"use strict";function n({server:e,metadataItemState:t}){return!(!e.isCloud||!1!==(null==t?void 0:t.isPending)||null!==(null==t?void 0:t.error)||!1!==(null==t?void 0:t.isPopulated)&&!(null==t?void 0:t.isStale))}r.d(t,{Z:()=>n})},74310:(e,t,r)=>{"use strict";r.d(t,{U:()=>c,ZP:()=>d});var n=r(67294),i=r(8089),s=r(78389),a=r(33803),o=r(11101);const l=(0,n.createContext)({containerServer:o.Z,containerProvider:a.Z,containerSourceURI:"",containerKey:"",containerType:s.U.Mixed});function c(){return(0,n.useContext)(l)}function d({children:e,containerServer:t,containerProvider:r,containerSourceURI:s,containerKey:a,containerType:o,containerSubtype:c,containerMeta:d,listStyle:u}){const p=(0,n.useMemo)((()=>{let e=a;if(!e&&s){const{key:t}=(0,i.Z)(s);e=t}return{containerServer:t,containerProvider:r,containerSourceURI:s,containerKey:e,containerType:o,containerSubtype:c,containerMeta:d,listStyle:u}}),[a,r,t,s,c,o,d,u]);return n.createElement(l.Provider,{value:p},e)}},71302:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(67294),i=r(73788),s=r(87264),a=r(10125),o=r(83782),l=r(8059),c=r(28216),d=r(84503),u=r(34219),p=r(90425);function m({className:e}){const t=(0,c.I0)(),r=(0,c.v9)((0,u.Z)("columnWidthMultiplier")),[s,a]=(0,n.useState)(r),o=(0,n.useCallback)((({positionValue:e})=>{a(e)}),[]);return(0,n.useEffect)((()=>{const e=Math.round(10*s)/10;let n;return s!==r&&(n=window.setTimeout((()=>{t((0,d.LN)({columnWidthMultiplier:e}))}),100)),()=>window.clearTimeout(n)}),[r,t,s]),n.createElement(p.Z,{className:e,label:(0,i.Z)("Poster Size"),max:2,min:1,value:s,onChange:o})}var h=r(78389),g=r(62376),y=r(55319),v=r(84332),f=r(61133),b=r(66188),Z=r(95844);function S({listStyles:e,selectedListStyle:t,onListStyleSelect:r}){const c=(0,y.Z)(),d=(0,o.Z)(),u=(0,n.useCallback)((e=>{c.onClose(),null==r||r(e)}),[c,r]),p=e.length>1,S=t===h.n.Grid||t===h.n.PrePlayGrid||t===h.n.Search,P=function(e){switch(e){case h.n.Details:case h.n.SimpleDetails:return b.Z;case h.n.Table:return f.Z;default:return Z.Z}}(t);return S||p?n.createElement("div",{className:"MetadataListStylesMenu-stylesContainer-EVQ27B"},S?n.createElement(m,{className:"MetadataListStylesMenu-slider-K6skGT Slider-slider-YdLxcK"}):null,n.createElement(g.Z,{"aria-label":(0,i.Z)("Show List Styles"),className:p?"MetadataListStylesMenu-stylesButtonWithArrow-aIWTpL MetadataListStylesMenu-stylesButton-Biby3V Link-link-vSsQW1":"MetadataListStylesMenu-stylesButton-Biby3V Link-link-vSsQW1","data-testid":"toolbarView",id:d,isDisabled:!p,onPress:c.onToggle},n.createElement(P,{className:"MetadataListStylesMenu-stylesIcon-WDclrW"}),p?n.createElement(s.Z,{direction:c.isOpen?l.UP:l.WV}):null),p?n.createElement(a.Z,{isOpen:c.isOpen,target:d,onMenuClose:c.onClose},e.map((e=>{const r=function(e){switch(e){case h.n.Grid:case h.n.PrePlayGrid:return(0,i.Z)("Grid View");case h.n.Details:case h.n.SimpleDetails:return(0,i.Z)("Detail View");case h.n.Table:return(0,i.Z)("Table View");default:return}}(e);return r?n.createElement(v.Z,{key:e,isSelected:t===e,title:r,value:e,onSelect:u},r):null}))):null):n.createElement("div",{className:"MetadataListStylesMenu-empty-i9NJTz"})}},59405:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w,g:()=>P});var n=r(85229),i=r(61329),s=r(99318),a=r(78389),o=r(12587),l=r(7650),c=r(56723),d=r(82628),u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var h=Object.defineProperty,g=Object.defineProperties,y=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&Z(e,r,t[r]);if(v)for(var r of v(t))b.call(t,r)&&Z(e,r,t[r]);return e};const P=(0,i.Z)(((e,t)=>e[t.sourceURI]),(({server:e,provider:t,data:r})=>{var n,i,h,g,y;const v=null!=(n=null==r?void 0:r.MediaContainer)?n:{},{Metadata:f=[],Directory:b}=v,Z=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(v,["Metadata","Directory"]),S=t?(0,l.Z)(t,String(Z.librarySectionID)):void 0;null==(h=null==(i=null==Z?void 0:Z.Meta)?void 0:i.Type)||h.forEach((e=>{e.type===a.U.Movie&&(null==S?void 0:S.agent)===o.Py.None&&null==e.subtype&&(e.subtype=s.y_.Clip)}));const{metadataItems:P,metadataItemStates:I}=(0,d.Z)({server:e,provider:t,data:null!=b?b:f,container:Z});return{items:P,totalSize:null!=(g=null==Z?void 0:Z.totalSize)?g:0,size:null==Z?void 0:Z.size,offset:null!=(y=null==Z?void 0:Z.offset)?y:0,meta:(0,c.Z)(null==Z?void 0:Z.Meta),title:null==Z?void 0:Z.title,metadataItemStates:I}}));var I,E;const w=(0,n.oM)({name:"metadataLists",initialState:{},reducers:(I=S({},P.reducers),E={added(e,{payload:t}){t.metadataLists.forEach((t=>{e[t.sourceURI]=S(S({},P.getDefaultPaginatedState()),t)}))},throttledRepopulateRequested(e,t){}},g(I,y(E)))})},78389:(e,t,r)=>{"use strict";r.d(t,{U:()=>n,n:()=>i});var n=(e=>(e.Album="album",e.Artist="artist",e.Author="author",e.Audiobook="audiobook",e.Availability="availability",e.Channel="channel",e.Channels="channels",e.Chapter="chapter",e.Content="content",e.Clip="clip",e.Collection="collection",e.Directory="directory",e.Episode="episode",e.Extra="extra",e.Folder="folder",e.Mixed="mixed",e.Movie="movie",e.MusicVideo="musicVideo",e.Person="person",e.Photo="photo",e.PhotoAlbum="photoAlbum",e.Playlist="playlist",e.Season="season",e.Show="show",e.Station="station",e.Track="track",e))(n||{}),i=(e=>(e.Hero="hero",e.List="list",e.Shelf="shelf",e.Spotlight="spotlight",e.Upsell="upsell",e.WideShelf="wideShelf",e.Grid="grid",e.PrePlayGrid="prePlayGrid",e.Table="table",e.Details="details",e.SimpleDetails="simpleDetails",e.TrackDetails="trackDetails",e.SharedItems="sharedItems",e.Search="search",e.Folder="folder",e))(i||{})},27736:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(36522);const s=function(e){return(0,n.P1)(i.Z,(t=>t.metadataLists[e]))}},15824:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(65790),i=r(24107),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=parseInt(i.Z.summaryCellHeight,10),u=function(e){return(0,n.Z)(((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({rowHeight:d,overscan:2},e))}},16748:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(17007),i=r(60288),s=r(55755),a=r(98780),o=r(24107),l=Object.defineProperty,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m=parseInt(o.Z.v4PagePadding,10),h=parseInt(o.Z.v4CardTitleHeight,10),g=parseInt(o.Z.v4CardTitleGap,10),y=parseInt(o.Z.gapMedium,10);function v(e){var t=e,{listType:r,subtype:o,listStyle:l,displayFields:v,displayImages:f,columnWidth:b}=t,Z=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(t,["listType","subtype","listStyle","displayFields","displayImages","columnWidth"]);const S=(0,a.Z)(r,o,f),P=(0,n.ZP)(r,o,{listStyle:l,displayImageType:S}),I=Z.titleCount?Z.titleCount:(0,i.Z)(r,o,{listStyle:l,displayFields:v}),E=I?h*I+g:0,w=P===n.oz?2*b+y:b,C=Math.floor(w/P+E);return(0,s.Z)(((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({direction:s.m.Vertical,getCellWidth:()=>w,getCellHeight:()=>C,innerHorizontalPadding:y,innerVerticalPadding:y,overscan:1,outerPaddingRight:m,outerPaddingLeft:m},Z))}},29462:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(17007),i=r(60288),s=r(55809),a=r(98780),o=r(24107),l=Object.defineProperty,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m=parseInt(o.Z.v4PagePadding,10),h=parseInt(o.Z.v4CardTitleHeight,10),g=parseInt(o.Z.v4CardTitleGap,10),y=parseInt(o.Z.v4CardShadowSize,10),v=parseInt(o.Z.gapMedium,10);function f(e){var t=e,{listType:r,subtype:o,listStyle:l,displayFields:f,displayImages:b,columnWidth:Z}=t,S=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(t,["listType","subtype","listStyle","displayFields","displayImages","columnWidth"]);const P=(0,a.Z)(r,o,b),I=(0,n.ZP)(r,o,{listStyle:l,displayImageType:P}),E=S.titleCount?S.titleCount:(0,i.Z)(r,o,{listStyle:l,displayFields:f});return(0,s.Z)(((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({columnWidth:I===n.oz?2*Z+v:Z,aspectRatio:I,titleHeight:h*E+g,innerHorizontalPadding:v,outerPaddingTop:y,outerPaddingRight:m,outerPaddingBottom:y,outerPaddingLeft:m},S))}},99144:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(65790),i=r(24107),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=parseInt(i.Z.tableRowHeight,10),u=parseInt(i.Z.v4PagePadding,10),p=function(e){return(0,n.Z)(((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({rowHeight:d,outerPaddingRight:u,outerPaddingLeft:u},e))}},93084:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(99318),i=r(90144);const s=function(e){const t=(0,i.gQ)(n.pG).find((([,t])=>t===e));return t?n.pG[t[0]]:void 0}},71823:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(78389),i=r(90144);const s=function(e){const t=(0,i.gQ)(n.U).find((([,t])=>t===e));return t?n.U[t[0]]:void 0}},15334:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(85229),i=r(16241);function s(e,t){let r=e[t];return r||(r={},e[t]=r),r}const a=(0,n.oM)({name:"metadataTimelineState",initialState:{},reducers:{metadataRefreshRequested(e,{payload:t}){const r=s(e,t.sourceURI);r.metadataState||(r.metadataState=i.H.Queued)},metadataRefreshFailed(e,{payload:t}){const r=s(e,t.sourceURI);(null==r?void 0:r.mediaState)?r.metadataState=void 0:delete e[t.sourceURI]},mediaAnalysisRequested(e,{payload:t}){if(!t.hasChildren){const r=s(e,t.sourceURI);r.mediaState||(r.mediaState=i.g.Analyzing)}},mediaAnalysisFailed(e,{payload:t}){const r=s(e,t.sourceURI);(null==r?void 0:r.metadataState)?r.mediaState=void 0:delete e[t.sourceURI]},timelineStatesChanged(e,{payload:t}){const r=s(e,t.sourceURI);t.metadataState||t.mediaState?(r.metadataState=t.metadataState,r.mediaState=t.mediaState):delete e[t.sourceURI]}}})},16241:(e,t,r)=>{"use strict";r.d(t,{H:()=>n,g:()=>i});var n=(e=>(e.Queued="queued",e.Matching="matching",e.Processing="processing",e.Loading="loading",e))(n||{}),i=(e=>(e.Analyzing="analyzing",e.Thumbnailing="thumbnailing",e))(i||{})},12587:(e,t,r)=>{"use strict";r.d(t,{rn:()=>n,zW:()=>i,wd:()=>s,rf:()=>a,F6:()=>o,GG:()=>l,Py:()=>c,Fk:()=>d});var n=(e=>(e.Download="download",e.LiveTV="livetv",e.Stream="stream",e))(n||{}),i=(e=>(e.Action="action",e.Actions="actions",e.Collection="collection",e.Content="content",e.ContinueWatching="continuewatching",e.Grid="grid",e.ImageTranscoder="imagetranscoder",e.Integrations="integrations",e.Lineups="lineups",e.Location="location",e.Manage="manage",e.Match="match",e.Metadata="metadata",e.Playlist="playlist",e.PlayQueue="playqueue",e.Promoted="promoted",e.QueryParser="queryParser",e.Rate="rate",e.Search="search",e.Settings="settings",e.Subscribe="subscribe",e.Timeline="timeline",e.Universal="universal",e.UniversalSearch="universalsearch",e))(i||{}),s=(e=>(e.Download="download",e.Record="record",e.Universal="universal",e))(s||{}),a=(e=>(e.AddToWatchlist="addToWatchlist",e.Pick="pick",e.Rate="rate",e.RemoveFromContinueWatching="removeFromContinueWatching",e.Save="save",e.Scrobble="scrobble",e))(a||{}),o=(e=>(e.Hub="hub",e.List="list",e.View="view",e))(o||{}),l=(e=>(e.RecordingSchedule="view://dvr/recording-schedule",e.Guide="view://dvr/guide",e.Timeline="view://photo/timeline",e.SharedItems="view://shared-items",e.HomeRecommended="view://home/recommended",e.HomeWatchlist="view://home/watchlist",e.DiscoverFriends="view://discover/friends",e.DiscoverProfile="view://discover/profile",e.DiscoverActivity="view://discover/activity",e))(l||{}),c=(e=>(e.Freebase="com.plexapp.agents.freebase",e.IMDB="com.plexapp.agents.imdb",e.LastFM="com.plexapp.agents.lastfm",e.Lyricfind="com.plexapp.agents.lyricfind",e.None="com.plexapp.agents.none",e.PlexMovie="tv.plex.agents.movie",e.PlexMusic="tv.plex.agents.music",e.PlexPremiumMusic="com.plexapp.agents.plexmusic",e.TheMovieDB="com.plexapp.agents.themoviedb",e.TheTVDB="com.plexapp.agents.thetvdb",e))(c||{}),d=(e=>(e.IncludeMetadataInSearch="includeMetadataInSearch",e))(d||{})},85687:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(22222),i=r(12587),s=r(93644),a=r(33434),o=r(65714);const l=(0,a.Z)((function(e,t){return(0,n.P1)((0,o.Z)(e,t),(e=>{var t;const r=(0,s.Z)(e,i.zW.Content);return null!=(t=null==r?void 0:r.directories)?t:[]}))}))},36103:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(33434),s=r(85687);const a=(0,i.Z)((function(e,t,r){return(0,n.P1)((0,s.Z)(e,t),(e=>e.find((e=>r===e.id))))}))},65714:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(22222),i=r(46898),s=r(41863),a=r(33803),o=r(90597);const l=(0,r(33434).Z)((function(e,t){return(0,n.P1)(i.Z,(0,o.Z)(e),(0,s.Z)("providers"),((e,r,n)=>{const i=(!r||r.isCloud?n:r.providers).find((r=>e[r].identifier===t));return i?e[i]:a.Z}))}))},45071:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(87242),s=r(39485);const a=(0,n.P1)(s.Z,(e=>e.map((e=>e.identifier)).sort())),o=(0,i.Z)(a,(e=>e))},39485:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(46898),s=r(45186);const a=(0,n.P1)(s.Z,(e=>e.providers)),o=(0,n.P1)(a,i.Z,((e,t)=>e.map((e=>t[e]))))},85698:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(74226),s=r(39485);const a=(0,n.P1)(s.Z,(e=>e.find((e=>e.identifier===i.Xp))))},9278:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(74226),s=r(39485);const a=(0,n.P1)(s.Z,(e=>e.find((e=>e.identifier===i.IS))))},7650:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(12587),i=r(93644);function s(e,t){var r;const s=(0,i.Z)(e,n.zW.Content);if(s)return(null!=(r=null==s?void 0:s.directories)?r:[]).find((e=>!!e.id&&e.id===t))}},4148:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(99318),i=r(12587),s=r(93644);function a(e,t){var r;const a=(0,s.Z)(e,i.zW.Content);if(!a)return;const o=null!=(r=null==a?void 0:a.directories)?r:[];return o.find((e=>!!e.id&&e.id===t.librarySectionID))||(e.protocols.includes(i.rn.LiveTV)?o.find((e=>e.hubKey&&!e.key)):t.isPlaylist?o.find((e=>e.type===n.pG.Playlist)):void 0)}},12451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(74226),i=r(70777),s=r(12587);function a(e,t,r){var a;if(t===s.rf.AddToWatchlist&&e.identifier!==n.uk&&!r.features[i.ie])return;if(t===s.rf.Pick&&!r.features[i.Ah])return;if(t===s.rf.RemoveFromContinueWatching&&!r.features[i.eT])return;const o=e.features.find((e=>e.type===s.zW.Actions));return null==(a=null==o?void 0:o.actions)?void 0:a.find((e=>e.id===t))}},93644:(e,t,r)=>{"use strict";function n(e,t,r){return e.features.find((e=>e.type===t&&(!r||e.flavor===r)))}r.d(t,{Z:()=>n})},73456:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(89896),i=r(12451);function s(e,t,r){const s=(0,i.Z)(e,t,r);return!(!s||!(0,n.d)(r,s))}},89769:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(74226),i=r(56431);function s(e){return n.wB((0,i.Z)(e.identifier,e.providerIdentifier),[n.vP,n.Ll])}},13169:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(74226),i=r(56431);function s(e){return n.wB((0,i.Z)(e.identifier,e.providerIdentifier),n.Y3)}},54462:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(74226),i=r(56431);function s(e){return n.wB((0,i.Z)(e.identifier,e.providerIdentifier),n.uk)}},33803:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={entityID:"",identifier:"",metricsIdentifier:"",title:"",features:[],protocols:[],isPending:!1,isPopulated:!1,error:null}},95522:(e,t,r)=>{"use strict";r.d(t,{S:()=>l,h:()=>c});var n=r(28687),i=r(30848),s=r(79132),a=r(65935),o=r(22169);const l=new n.GraphQLClient((0,o.d0)()),c=(0,i.LC)({reducerPath:"query",baseQuery:(0,s.U)({client:l,prepareHeaders:e=>(e.set("deviceIdentifier",a.Z.prop("X-Plex-Client-Identifier")),e)}),endpoints:()=>({})})},69151:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),i=r(28216),s=r(74945),a=r(9278),o=r(79864),l=r(48321),c=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e};function v(e,t,r,c,p,m,h=24){var g;const v=(0,i.v9)(a.Z),[f,b]=(0,n.useState)(),[Z,S]=(0,n.useState)(),P=(0,n.useRef)(),I=(0,n.useRef)(),E=(0,n.useRef)(),w=(0,n.useRef)(!1),C=(0,n.useRef)(!1),[M,D]=(0,n.useState)(!1),O=(0,n.useRef)(!1),[T,{error:x,isLoading:A}]=r(),{isWaitingToRestoreItems:k,itemsCount:N,onItemsChange:R,onImmediateItemsChange:L}=function({key:e}){const t=o.Z.getKey(e),r=(0,n.useRef)(null),[i,s]=(0,n.useState)(!!o.Z.get(t)),[a,l]=(0,n.useState)(),c=(0,n.useCallback)((e=>{r.current=e}),[]),d=(0,n.useCallback)((e=>{r.current=e,l(e)}),[]);return(0,n.useEffect)((()=>(i&&l(o.Z.get(t)),()=>{const e=r.current;r.current=null,e&&o.Z.set(t,e)})),[i,t]),(0,n.useEffect)((()=>{void 0!==a&&s(!1)}),[a]),{isWaitingToRestoreItems:i,itemsCount:null!=a?a:0,onItemsChange:c,onImmediateItemsChange:d}}({key:t}),j=(0,n.useMemo)((()=>!M&&N>0&&!O.current&&(!Z||Z.length<N&&C.current)),[Z,M,N]),V=null!=(g=null==f?void 0:f.length)?g:0,U=(0,n.useMemo)((()=>!M&&!k&&!j&&(!V||V<N&&w.current)),[j,M,k,N,V]),F=(0,l.Z)(U);(0,n.useEffect)((()=>{M&&V>0&&R(V)}),[M,V,R]);const B=(0,n.useCallback)(((t,r)=>{const n=r?E:P,i=r?C:w,a=t?n.current:void 0;var o,l;T((o=y(y(y({first:(0,s.Z)((null==t?void 0:t.size)||h,2,100)},e.uuid?{uuid:e.uuid}:{}),e.metadataID?{metadataID:e.metadataID}:{}),e.serverURL?{serverURL:e.serverURL}:{}),l={after:a,skipUserState:!!e.metadataID||!!e.uuid},d(o,u(l))),r).then((({data:e})=>{if(!e||!(null==v?void 0:v.identifier))return;n.current=m(e),i.current=p(e);const s=c(e,v.identifier);a||(null==s?void 0:s.length)||(r?S([]):(D(!0),b([]),O.current=!1));const o=r?S:b;t&&0!==t.startIndex&&0!==s.length?o((e=>[...null!=e?e:[],...s])):o(s)}))}),[T,h,e.uuid,e.metadataID,e.serverURL,null==v?void 0:v.identifier,m,p,c]),_=(0,n.useCallback)((e=>{var t;!M||!w.current||I.current&&I.current===P.current||(B({size:h,startIndex:null!=(t=null==e?void 0:e.startIndex)?t:V}),I.current=P.current)}),[B,h,M,V]);(0,n.useEffect)((()=>{F&&!U&&(D(!0),S(void 0),C.current=!1,E.current=void 0,O.current=!1)}),[U,F]),(0,n.useEffect)((()=>{k||N||B({size:h,startIndex:0})}),[B,h,k,N]),(0,n.useEffect)((()=>{!U||A||!w.current&&V||B({size:h,startIndex:V})}),[B,h,U,A,N,V]),(0,n.useEffect)((()=>{var e;if(j&&!A&&(C.current||!(null==Z?void 0:Z.length))){const t=null!=(e=null==Z?void 0:Z.length)?e:0;B({size:h,startIndex:t},!0)}}),[Z,B,h,j,A]);const z=(0,n.useCallback)((()=>{P.current=void 0,O.current=!0,D(!1),b([])}),[]),H=(0,n.useCallback)((e=>{var t;const r=U?Z:f,n=null==r?void 0:r.filter((t=>t.id!==e));L(null!=(t=null==n?void 0:n.length)?t:0),S(n),z()}),[Z,U,f,L,z]),W=(0,n.useCallback)((()=>{var e;!O.current&&M&&(L(null!=(e=null==f?void 0:f.length)?e:0),S(f),z())}),[M,f,L,z]),G=(0,n.useCallback)((e=>{b(e)}),[]),Q=(null==Z?void 0:Z.length)&&!M?Z.length:V,$=k||j||!M&&!(null==Z?void 0:Z.length),K=(null==Z?void 0:Z.length)&&!M?Z:f;return{data:$?void 0:K,isLoading:$,error:!!x,isUpdated:M,placeholderSize:N||h,totalSize:(w.current||C.current)&&M?Q+1:Q,fetchMore:_,remove:H,replaceItems:G,refetch:W,isRefetching:O.current}}},36522:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(96994);const s=(0,n.P1)(i.Z,(e=>e.core))},58671:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(36522);const s=(0,r(33434).Z)((function(e){return(0,n.P1)(i.Z,(t=>t.serverAccounts[e]))}))},24307:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(85229),i=r(65978),s=r(32601),a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u={accounts:[],isPending:!1,isPopulated:!1,error:null},p=(0,n.oM)({name:"serverAccounts",initialState:{},reducers:{populateRequested(e,t){},fetchRequested(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.er)(r)},fetchSucceeded(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.vv)(r),r.accounts=t.data},fetchFailed(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.VQ)(r,t.error)}},extraReducers:e=>{e.addCase(i.Z.actions.connected,((e,{payload:t})=>{const{server:r}=t;e[r.machineIdentifier]||(e[r.machineIdentifier]=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({},u))}))}})},1245:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(28216),s=r(56844);function a(e,t){const r=(0,n.useMemo)((()=>t?(0,s.Z)(e,t):()=>{}),[t,e]);return!!(0,i.v9)(r)||!!(null==t?void 0:t.refreshing)}},88723:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(12559),s=r(42414);const a=function(e,t){return(0,n.P1)((0,s.Z)(e),(e=>e.find((e=>e.type===i.JW&&e.Context.identifier===t.identifier))))}},56844:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(12559),s=r(42414);const a=function(e,t){return(0,n.P1)((0,s.Z)(e),(e=>e.find((e=>e.type===i.QX&&e.Context.librarySectionID===t.id))))}},42414:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(90597);const s=(0,r(33434).Z)((function(e){return(0,n.P1)((0,i.Z)(e.machineIdentifier),(e=>{var t,r;return null!=(r=null==(t=null==e?void 0:e.desktop)?void 0:t.activities)?r:[]}))}))},40744:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(85229),i=r(65978);const s=(0,n.oM)({name:"serverActivities",initialState:{},reducers:{activityStarted(e,t){},activityUpdated(e,t){},activityFinished(e,t){}},extraReducers:e=>{e.addCase(i.Z.actions.connected,((e,{payload:t})=>{const{server:r}=t;e[r.machineIdentifier]||(e[r.machineIdentifier]=[])}))}})},55084:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var n=(e=>(e.BackupDatabase="general.db.backup",e.CleanBundles="general.bundle.clean",e.GrabberGrab="grabber.grab",e.GrabberAssimilate="grabber.assimilate",e.LibraryDelete="library.delete",e.LibraryUpdateSection="library.update.section",e.LibraryRefreshItems="library.refresh.items",e.MediaGenerateBIF="media.generate.bif",e.MediaGenerateChapterThumbs="media.generate.chapter.thumbs",e.MediaGenerateIntros="media.generate.intros",e.MediaGenerateLoudness="media.generate.loudness",e.OptimizeDatabase="general.db.optimize",e.ProviderDeviceChannelScan="provider.device.channelscan",e.ProviderEpgLineupScan="provider.epg.lineupscan",e.ProviderEpgLoad="provider.epg.load",e.ProviderSubscriptionsProcess="provider.subscriptions.process",e.ProviderSubscriptionRefresh="provider.subscription.refresh",e.SubtitleDownload="subtitle.download",e))(n||{})},26547:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(85229),i=r(32601),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d={isPending:!1,isPopulated:!1,error:null,isSharing:!1,inviteToken:""},u=(0,n.oM)({name:"serverDetails",initialState:{},reducers:{fetchServerDetails(e,{payload:t}){e[t.machineIdentifier]||(e[t.machineIdentifier]=((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({},d)),(0,i.er)(e[t.machineIdentifier])},fetchServerDetailsSucceeded(e,{payload:t}){(0,i.vv)(e[t.machineIdentifier]),e[t.machineIdentifier].detail=t.details},fetchServerDetailsFailed(e,{payload:t}){(0,i.VQ)(e[t.machineIdentifier],t.error)},shareLibraries(e,{payload:t}){e[t.machineIdentifier].isSharing=!0,e[t.machineIdentifier].error=null,e[t.machineIdentifier].inviteToken=""},shareLibrariesSucceeded(e,{payload:t}){e[t.machineIdentifier].isSharing=!1,e[t.machineIdentifier].inviteToken=t.inviteToken},shareLibrariesFailed(e,{payload:t}){e[t.machineIdentifier].isSharing=!1,e[t.machineIdentifier].error=t.error},updateLibraries(e,{payload:t}){e[t.machineIdentifier].isSharing=!0,e[t.machineIdentifier].error=null,e[t.machineIdentifier].inviteToken=""},updateLibrariesSucceeded(e,{payload:t}){e[t.machineIdentifier].isSharing=!1},updateLibrariesFailed(e,{payload:t}){e[t.machineIdentifier].isSharing=!1,e[t.machineIdentifier].error=t.error},deleteSharedServer(e,{payload:t}){e[t.machineIdentifier].isSharing=!0,e[t.machineIdentifier].error=null,e[t.machineIdentifier].inviteToken=""},deleteSharedServerSucceeded(e,{payload:t}){e[t.machineIdentifier].isSharing=!1},deleteSharedServerFailed(e,{payload:t}){e[t.machineIdentifier].isSharing=!1,e[t.machineIdentifier].error=t.error}}})},27044:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(36522);const s=(0,r(33434).Z)((function(e){return(0,n.P1)(i.Z,(t=>t.serverDevices[e]))}))},61595:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(85229),i=r(65978),s=r(32601),a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u={devices:[],isPending:!1,isPopulated:!1,error:null},p=(0,n.oM)({name:"serverDevices",initialState:{},reducers:{populateRequested(e,t){},fetchRequested(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.er)(r)},fetchSucceeded(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.vv)(r),r.devices=t.data},fetchFailed(e,{payload:t}){const r=e[t.server.machineIdentifier];(0,s.VQ)(r,t.error)}},extraReducers:e=>{e.addCase(i.Z.actions.connected,((e,{payload:t})=>{const{server:r}=t;e[r.machineIdentifier]||(e[r.machineIdentifier]=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({},u))}))}})},30654:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(36522);const s=(0,r(33434).Z)((function(e){return(0,n.P1)(i.Z,(t=>t.serverNowPlayingSessions[e]))}))},91364:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(85229),i=r(71371),s=r(86832),a=r(65978),o=r(32601),l=Object.defineProperty,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e,t){const{isCloud:r,isConnected:n,isEmbedded:a,isFullOwnedServer:o,isFullServer:l,isUnauthorized:c,isUnavailable:d}=t,u={extra:{isCloud:r,isConnected:n,isEmbedded:a,isFullOwnedServer:o,isFullServer:l,isUnauthorized:c,isUnavailable:d}},p=new Error(e);s.Z.error(p,u.extra),i.Tb(p,u)}const h={sessionKeys:[],sessionsByKey:{},isPending:!1,isPopulated:!1,error:null,stopSessionError:null},g=(0,n.oM)({name:"serverNowPlayingSessions",initialState:{},reducers:{fetchRequested(e,{payload:t}){const r=e[t.server.machineIdentifier];r&&(0,o.er)(r)},fetchSucceeded(e,{payload:t}){const r=e[t.server.machineIdentifier];if(!r)return;const{sessionKeys:n,sessionsByKey:i}=t.data.reduce(((e,t)=>(e.sessionKeys.push(t.sessionKey),e.sessionsByKey[t.sessionKey]=t,e)),{sessionKeys:[],sessionsByKey:{}});(0,o.vv)(r),r.sessionKeys=n,r.sessionsByKey=i},fetchFailed(e,{payload:t}){const r=e[t.server.machineIdentifier];r&&(0,o.VQ)(r,t.error)},sessionChanged(e,{payload:t}){const{server:r,message:n}=t,i=e[r.machineIdentifier];if(!i)return void m("Session changed without serverState",r);const s=i.sessionsByKey[n.sessionKey];s&&s.key===n.key&&(s.viewOffset=n.viewOffset,s.Player.state=n.state)},sessionStopped(e,{payload:t}){const{server:r,sessionKey:n}=t,i=e[r.machineIdentifier];i?i.sessionsByKey[n]&&(delete i.sessionsByKey[n],i.sessionKeys.splice(i.sessionKeys.indexOf(n),1)):m("Session stopped without serverState",r)},stopRequested(e,t){},stopFailed(e,{payload:t}){const r=e[t.server.machineIdentifier];r&&(r.stopSessionError=t.error)},stopErrorDismissed(e,{payload:t}){const r=e[t.server.machineIdentifier];r&&(r.stopSessionError=null)}},extraReducers:e=>{e.addCase(a.Z.actions.connected,((e,{payload:t})=>{const{server:r}=t;e[r.machineIdentifier]||(e[r.machineIdentifier]=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({},h))}))}})},44811:(e,t,r)=>{"use strict";r.d(t,{c9:()=>u,ZP:()=>p});var n=r(67294),i=r(28216),s=r(36103),a=r(65714),o=r(33803),l=r(53072),c=r(11101);const d=(0,n.createContext)([c.Z,o.Z,void 0]);function u(){return(0,n.useContext)(d)}function p({machineIdentifier:e,providerIdentifier:t,contentDirectoryID:r,children:o}){const c=(0,i.v9)((0,l.Z)(e)),u=(0,i.v9)((0,a.Z)(e,t)),p=(0,i.v9)((0,s.Z)(e,t,r)),m=(0,n.useMemo)((()=>[c,u,p]),[c,u,p]);return n.createElement(d.Provider,{value:m},o)}},9171:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(28216),i=r(9711),s=r(14269),a=r(20683),o=r(22222),l=r(57799),c=r(12587),d=r(65714),u=r(93644),p=r(90597),m=r(53072),h=r(33434),g=Object.defineProperty,y=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Z=(0,h.Z)((function(e,t,r,n){return r?(0,o.P1)((0,m.Z)(e),function(e){return(0,o.P1)((0,p.Z)(e),(e=>{var t;return null==(t=null==e?void 0:e.activeConnection)?void 0:t.uri}))}(e),(0,d.Z)(e,t),((e,t,i)=>{var s;let o,d,p="/photo/:/transcode",m=!1,h=!1;if(!t)return;if(i){const e=(0,u.Z)(i,c.zW.ImageTranscoder);(null==e?void 0:e.key)&&(p=e.key,m=(0,l.Z)(p),h=!!e.public)}if(o=m?null!=(s=i.baseURL)?s:t:"",(0,l.Z)(r))d=r;else{const t=((e,t)=>{for(var r in t||(t={}))v.call(t,r)&&b(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&b(e,r,t[r]);return e})({"X-Plex-Token":e.accessToken},n);d=a.Z.join([o,r],t)}const g=m?p:[t,p];return a.Z.join(g,{url:d,"X-Plex-Token":h?void 0:e.accessToken})})):()=>{}}));var S=r(9423),P=Object.defineProperty,I=Object.defineProperties,E=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,D=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const O={},T={},x=[s.EU,s.yy,s.it,s.bS,s.Rr,s.Ko,s.ES,s.oP].sort(((e,t)=>A(e)-A(t)));function A(e){if(T.hasOwnProperty(e))return T[e];const t=parseInt(e.split("-")[1],10);return T[e]=t,t}function k(e){var t,r,s=e,{server:o,provider:l,url:c}=s,d=((e,t)=>{var r={};for(var n in e)C.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&w)for(var n of w(e))t.indexOf(n)<0&&M.call(e,n)&&(r[n]=e[n]);return r})(s,["server","provider","url"]);return function(e,t){if(!e)return;const r=Object.assign(function(e){const{allowPixelRatioSize:t=!0,minSize:r=!0,upscale:n=!0}=e,s=t?(0,i.Z)():1,a="size"in e?e.size:function(e){if(O.hasOwnProperty(e))return O[e];const t=x.find((t=>A(t)>=e))||x[x.length-1];return O[e]=t,t}(e.width);if(e.supportsSize)return{size:a,scale:Math.ceil(s)};{(0,S.Z)(!("size"in e)&&null!=e.height,"Both width and height required");const t=A(a),i=e.height/e.width;return{width:Math.ceil(t*s),height:Math.ceil(i*t*s),minSize:r?1:void 0,upscale:n?1:void 0}}}(t),t.filters);t.format&&(r.format=t.format),t.quality&&(r.quality=t.quality);const n=e.indexOf("?");let s=e;return n>-1?(s=a.Z.join(e.substring(0,n),r),s+=-1===s.indexOf("?")?"?":"&",s+=e.substring(n+1)):s=a.Z.join(s,r),s}((0,n.v9)(Z(o.machineIdentifier,null==l?void 0:l.identifier,c)),(t=((e,t)=>{for(var r in t||(t={}))C.call(t,r)&&D(e,r,t[r]);if(w)for(var r of w(t))M.call(t,r)&&D(e,r,t[r]);return e})({},d),r={supportsSize:o.isCloud&&!!l},I(t,E(r))))}},53072:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(22222),i=r(17939),s=r(11101),a=r(33434),o=r(78557);const l=(0,a.Z)((function(e){return(0,i.Z)((0,n.P1)(o.Z,(t=>t.find((t=>t.machineIdentifier===e))||s.Z)),(e=>e))}))},90597:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(21604),s=r(11101);const a=(0,r(33434).Z)((function(e){return(0,n.P1)(i.Z,(t=>t.find((t=>t.machineIdentifier===e))||s.Z))}))},81017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(87242),s=r(78557);const a=(0,i.Z)((0,n.P1)(s.Z,(e=>e.filter((e=>e.isFullOwnedServer||e.isShared)))),(e=>e))},181:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(47276);const i=(0,r(53072).Z)(n.X)},78557:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(17939),s=r(21604),a=r(17614);const o=(0,i.Z)((0,n.P1)(s.Z,(e=>e.map(a.Z))),(e=>e))},65978:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(85229).oM)({name:"servers",initialState:{},reducers:{connected(e,t){},libraryScanUpdated(e,t){}}})},93725:(e,t,r)=>{"use strict";r.d(t,{j:()=>n,Y:()=>i});var n=(e=>(e.Windows="Windows",e.Android="Android",e.Linux="Linux",e.FreeBSD="FreeBSD",e.MacOSX="MacOSX",e.IOS="iOS",e))(n||{}),i=(e=>(e.Pending="pending",e.Connected="connected",e.Unavailable="unavailable",e.Unauthorized="unauthorized",e))(i||{})},17614:(e,t,r)=>{"use strict";function n(e){return{entityID:e.entityID,machineIdentifier:e.machineIdentifier,accessToken:e.accessToken,uri:e.activeConnection?e.activeConnection.uri:void 0,version:e.version,platform:e.platform,friendlyName:e.friendlyName,sourceTitle:e.sourceTitle,countryCode:e.countryCode,allowSync:e.allowSync,allowMediaDeletion:e.allowMediaDeletion,backgroundProcessing:e.backgroundProcessing,transcoderVideo:e.transcoderVideo,isCloud:e.isCloud,isEmbedded:e.isEmbedded,isFullServer:e.isFullServer,isFullOwnedServer:e.isFullOwnedServer,isOutOfDate:e.isOutOfDate,isShared:e.isShared,isUnavailable:e.isUnavailable,isUnauthorized:e.isUnauthorized,isConnected:e.isConnected,livetv:e.livetv,connectionTestResult:e.connectionTestResult,ownerId:e.ownerId,ownerFeatures:e.ownerFeatures}}r.d(t,{Z:()=>n})},11101:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={entityID:"",machineIdentifier:"",friendlyName:"Unknown",allowSync:!1,allowMediaDeletion:!1,backgroundProcessing:!1,transcoderVideo:!1,isCloud:!1,isEmbedded:!1,isFullServer:!1,isFullOwnedServer:!1,isOutOfDate:!1,isShared:!1,isUnavailable:!1,isUnauthorized:!1,isConnected:!1,connectionTestResult:r(93725).Y.Pending,ownerFeatures:[],providers:[]}},32740:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({className:e="Badge-badge-JyhtjI",style:t,iconClassName:r="Badge-icon-_hYllR",iconComponent:i}){return n.createElement("div",{className:e,style:t},n.createElement(i,{className:r}))}},26231:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(32740),s=r(14522);function a({className:e="PlayedBadge-playedBadge-c2Wgnm Badge-badge-JyhtjI"}){return n.createElement(i.Z,{className:e,iconComponent:s.Z})}},88618:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(37188),s=r(99539),a=r(99318);function o({className:e="RecordingBadge-recordingBadge-rkcwdG",subscriptionType:t}){const r=t===a.pG.Show?i.Z:s.Z;return n.createElement(r,{className:e})}},90341:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(32740),s=r(45697),a=r.n(s),o=r(90558);function l(e){const t=e["aria-label"],r=e.className,i=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",id:"plex-icon-toolbar-in-watchlist-560"};s["aria-hidden"]=!t,s.style=i,s.className=o.Z.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{clipRule:"evenodd",d:"M42 6.15892C42 4.72113 40.8409 3.59998 39.411 3.59998H8.58903C7.15701 3.59998 6 4.74565 6 6.15892V42.9571C6 44.3949 6.90879 44.8173 8.02984 43.9554L21.9702 33.2377C23.0826 32.3824 24.9088 32.3758 26.0298 33.2377L39.9702 43.9554C41.0826 44.8107 42 44.3704 42 42.9571V6.15892Z"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}l.propTypes={"aria-label":a().string,className:a().string,style:a().object};const c=l;function d({className:e="WatchlistBadge-watchlistBadge-BjiOoC Badge-badge-JyhtjI"}){return n.createElement(i.Z,{className:e,iconComponent:c})}},31326:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(94184),i=r.n(n),s=r(67294),a=r(86979),o=r(31722),l=r(4681),c=r(93545);const d={actionButton:"ActionButton-actionButton-SHA5Wv Button-button-Eu0WcX Link-link-vSsQW1",labeledActionButton:"ActionButton-labeledActionButton-cDToTF ActionButton-actionButton-SHA5Wv Button-button-Eu0WcX Link-link-vSsQW1",icon:"ActionButton-icon-K2YCyl",iconActionButton:"ActionButton-iconActionButton-qpUHPk ActionButton-actionButton-SHA5Wv Button-button-Eu0WcX Link-link-vSsQW1",tooltip:"ActionButton-tooltip-VZkqO1 Tooltip-topCenter-Z9lZYf Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipBottomArrow-BppiF5 Tooltip-tooltipCenterAlignArrow-Y8ToMu",small:"ActionButton-small-yh80Ia",medium:"ActionButton-medium-OmrxV4",large:"ActionButton-large-VPLAmU"};var u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e};function v(e){var t=e,{isLabeled:r,className:n=(r?d.labeledActionButton:d.iconActionButton),iconClassName:u=d.icon,tooltipClassName:g=d.tooltip,kind:v,size:f=c.Z.Medium,icon:b,tooltipAttachment:Z=o.jO,title:S}=t,P=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["isLabeled","className","iconClassName","tooltipClassName","kind","size","icon","tooltipAttachment","title"]);return r?s.createElement(l.Z,y({className:i()(n,d[f]),kind:v},P),b?s.createElement(s.Fragment,null,s.createElement(b,{className:u})," "):null,S):s.createElement(a.Z,y({className:i()(n,d[f]),component:l.Z,tooltip:S,tooltipAttachment:Z,tooltipClassName:g},P),b?s.createElement(b,{className:u}):null)}},90877:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({className:e="ActionButtonBar-bar-_jwC59",children:t}){return n.createElement("div",{className:e},t)}},5747:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(73788),s=r(62376),a=r(62286),o=r(93545),l=r(36526);var c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e){var t=e,{id:r,className:c,tabIndex:h,isPending:g}=t,y=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["id","className","tabIndex","isPending"]);return n.createElement(s.Z,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({"aria-haspopup":!0,"aria-label":(0,i.Z)("More Actions"),className:c,id:r,tabIndex:h},y),g?n.createElement("div",{className:"ActionsLink-spinnerContainer-w6FXch"},n.createElement(a.Z,{size:o.Z.Small})):n.createElement(l.Z,null))}},4681:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(94184),i=r.n(n),s=r(67294),a=r(83700),o=r(93545),l=r(62376);const c={button:"Button-button-Eu0WcX Link-link-vSsQW1",default:"Button-default-Gv9rfY",primary:"Button-primary-cMdkLb",success:"Button-success-pNPr_i",danger:"Button-danger-JEdFuj",small:"Button-small-wOhG_q",medium:"Button-medium-TeIU23",large:"Button-large-UojFUh"};var d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function v(e){var t,r,n=e,{className:d=c.button,kind:v=a.Z.Default,size:f=o.Z.Medium}=n,b=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(n,["className","kind","size"]);return s.createElement(l.Z,(t=((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e})({},b),r={className:i()(d,c.button,c[v],c[f])},u(t,p(r))))}},25814:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(94184),i=r.n(n),s=r(67294),a=r(87264),o=r(62376),l=r(20622),c=r(93545);const d={disclosureArrowLink:"DisclosureArrowLink-disclosureArrowLink-BTB_kg Link-link-vSsQW1",isSelected:"DisclosureArrowLink-isSelected-eCg9T3",small:"DisclosureArrowLink-small-u3pwLr",medium:"DisclosureArrowLink-medium-LUbLdY",large:"DisclosureArrowLink-large-lhfNZ4",disclosureArrow:"DisclosureArrowLink-disclosureArrow-atQpNC DisclosureArrow-disclosureArrow-NTDkGd",down:"DisclosureArrowLink-down-vIVrIa",left:"DisclosureArrowLink-left-F_lnXi",up:"DisclosureArrowLink-up-qY_ulP",right:"DisclosureArrowLink-right-TzCLgd"};var u=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function y(e){var t=e,{className:r=d.disclosureArrowLink,arrowClassName:n=d.disclosureArrow,direction:u=l.Z.Down,size:y=c.Z.Large,kind:v,children:f}=t,b=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["className","arrowClassName","direction","size","kind","children"]);return s.createElement(o.Z,((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e})({"aria-haspopup":!0,className:i()(r,d[y]),kind:v,size:y},b),f,s.createElement(a.Z,{className:i()(n,d[u],d[y]),direction:u,kind:v,size:y}))}},51764:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(94184),i=r.n(n),s=r(67294),a=r(62376);const o={iconButton:"IconButton-iconButton-ebkqws Link-link-vSsQW1",isDisabled:"IconButton-isDisabled-q14m5C",isActive:"IconButton-isActive-t7vuCA"};var l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function g(e){var t=e,{children:r,className:n=o.iconButton,activeClassName:l=o.isActive,disabledClassName:g=o.isDisabled,iconClassName:y,iconComponent:v,isDisabled:f=!1,isActive:b=!1,title:Z,ariaLabel:S}=t,P=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["children","className","activeClassName","disabledClassName","iconClassName","iconComponent","isDisabled","isActive","title","ariaLabel"]);const I=S||Z;return s.createElement(a.Z,(E=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},P),w={"aria-label":I,className:i()(n,f&&g,b&&l),isDisabled:f,title:Z},c(E,d(w))),s.createElement(v,{className:y}),r);var E,w}},62376:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(94184),i=r.n(n),s=r(67294),a=r(50774),o=r(83700);const l={link:"Link-link-vSsQW1",isHrefLink:"Link-isHrefLink-nk7Aiq",default:"Link-default-bdWb1S",primary:"Link-primary-EIacsP",success:"Link-success-aljeIE",danger:"Link-danger-rd0xpb",small:"Link-small-fpOghg",medium:"Link-medium-zmherO",large:"Link-large-XEu5GO"};var c=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e},v=(e,t)=>d(e,u(t));function f(e){var t=e,{forwardedRef:r,children:n,to:c,component:d=(c?"a":"button"),type:u=("button"===d||"input"===d?"button":void 0),role:g=(c?"link":"button"),className:f=l.link,kind:b=o.Z.Default,size:Z,isDisabled:S=!1,onPress:P,onTouchStart:I,onTouchMove:E,onTouchEnd:w,onTouchCancel:C,onMouseDown:M,onMouseUp:D,onMouseLeave:O,onClick:T,onFocus:x,onBlur:A}=t,k=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["forwardedRef","children","to","component","type","role","className","kind","size","isDisabled","onPress","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onMouseDown","onMouseUp","onMouseLeave","onClick","onFocus","onBlur"]);const[N,R]=(0,s.useState)(!1),[L,j]=(0,s.useState)(!1),V=(0,s.useRef)(!1),U=(0,s.useRef)(!1),F=(0,s.useRef)(!1),B=(0,s.useCallback)((e=>{V.current=!0,U.current=!0,1===e.touches.length&&(F.current=!0,R(!0)),null==I||I(e)}),[I]),_=(0,s.useCallback)((e=>{F.current=!1,R(!1),null==E||E(e)}),[E]),z=(0,s.useCallback)((e=>{R(!1),F.current&&(F.current=!1,null==P||P(e)),null==w||w(e)}),[P,w]),H=(0,s.useCallback)((e=>{V.current=!1,U.current=!1,F.current=!1,R(!1),null==C||C(e)}),[C]),W=(0,s.useCallback)((e=>{V.current=!0,R(!0),null==M||M(e)}),[M]),G=(0,s.useCallback)((e=>{R(!1),null==D||D(e)}),[D]),Q=(0,s.useCallback)((e=>{V.current=!1,R(!1),null==O||O(e)}),[O]),$=(0,s.useCallback)((e=>{V.current?V.current=!1:(j(!0),null==x||x(e))}),[x]),K=(0,s.useCallback)((e=>{V.current=!1,j(!1),null==A||A(e)}),[A]),q=(0,s.useCallback)((e=>{V.current=!1,R(!1),U.current?U.current=!1:(null==P||P(e),null==T||T(e))}),[P,T]),Y=(0,s.useCallback)((()=>{j(!1)}),[]);(0,s.useEffect)((()=>(L&&window.addEventListener("mousemove",Y),()=>{L&&window.removeEventListener("mousemove",Y)})),[L,Y]);const X=S?{}:{onTouchStart:B,onTouchMove:_,onTouchEnd:z,onTouchCancel:H,onMouseDown:W,onMouseUp:G,onMouseLeave:Q,onFocus:$,onBlur:K,onClick:q};return s.createElement(d,v(y(y({},k),X),{ref:r,children:n,type:u,href:c,role:g,className:i()(f,l[b],Z&&l[Z],c&&l.isHrefLink,N&&a.lW,L&&a.GZ,S&&a.Pv),disabled:S}))}const b=s.forwardRef(((e,t)=>s.createElement(f,v(y({},e),{forwardedRef:t}))))},16879:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(62376),s=r(87236);const a={playButton:"PlayButton-playButton-HS0MKv Link-link-vSsQW1",playCircle:"PlayButton-playCircle-mkZ5qi"};var o=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e){var t,r=e,{className:o=a.playButton,circleClassName:h=a.playCircle}=r,g=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(r,["className","circleClassName"]);return n.createElement(i.Z,(t=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({},g),l(t,c({className:o}))),n.createElement(s.Z,{className:h}))}},4386:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(73788),s=r(62376),a=r(14522);const o={selectButton:"SelectButton-selectButton-SvPc9f Link-link-vSsQW1",selectCircle:"SelectButton-selectCircle-Tj9knz",selectedIcon:"SelectButton-selectedIcon-KUmzEU",unselectedCircle:"SelectButton-unselectedCircle-sJ8Nx0 SelectButton-selectCircle-Tj9knz",selectedCircle:"SelectButton-selectedCircle-KhRAK2 SelectButton-selectCircle-Tj9knz",rangeCircle:"SelectButton-rangeCircle-AbePGy SelectButton-selectCircle-Tj9knz"};var l=Object.defineProperty,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){var t=e,{className:r=o.selectButton,selectedCircleClassName:l=o.selectedCircle,rangeCircleClassName:m=o.rangeCircle,selectCircleClassName:h=o.unselectedCircle,iconClassName:g=o.selectedIcon,title:y,isSelected:v,isInSelectionRange:f}=t,b=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(t,["className","selectedCircleClassName","rangeCircleClassName","selectCircleClassName","iconClassName","title","isSelected","isInSelectionRange"]);const Z=(0,n.useMemo)((()=>v?l:f?m:h),[f,v,m,h,l]);return n.createElement(s.Z,((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({"aria-label":v?(0,i.Z)("Deselect {title}",{title:y}):(0,i.Z)("Select {title}",{title:y}),className:r},b),n.createElement("div",{className:Z,"data-testid":"multipleSelectButton"},v||f?n.createElement(a.Z,{className:g}):null))}},33890:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(94184),i=r.n(n),s=r(67294),a=r(4681),o=r(62286),l=r(93545);const c={button:"SpinnerButton-button-brFEgo Button-button-Eu0WcX Link-link-vSsQW1",spinnerContainer:"SpinnerButton-spinnerContainer-elrbH2",spinner:"SpinnerButton-spinner-xCEwPQ Spinner-spinner-Q4B7Qw spin-spin-H8VRGl",label:"SpinnerButton-label-G7f8t9",isSpinning:"SpinnerButton-isSpinning-2fpfsm"};var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function g(e){var t=e,{className:r=c.button,spinnerSize:n=l.Z.Small,isDisabled:d=!1,isSpinning:g=!1,children:y}=t,v=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["className","spinnerSize","isDisabled","isSpinning","children"]);return s.createElement(a.Z,((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({className:i()(r,g&&c.isSpinning),isDisabled:d||g},v),s.createElement("span",{className:c.spinnerContainer},s.createElement(o.Z,{className:c.spinner,size:n})),s.createElement("span",{className:c.label},y))}},71473:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(94184),i=r.n(n),s=r(67294),a=r(4681),o=r(93545);var l=Object.defineProperty,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){var t=e,{isSelected:r,isSecondary:n,children:l}=t,m=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(t,["isSelected","isSecondary","children"]);return s.createElement(a.Z,((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({className:i()("TabButton-button-KPkGEB Button-button-Eu0WcX Link-link-vSsQW1",r&&"TabButton-selected-wnNjlr",n&&"TabButton-secondary-qrXAf0"),size:o.Z.Large},m),l)}},4538:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294);var i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u({forwardedRef:e,className:t="PosterCard-card-BRB1k_",style:r,children:i}){return n.createElement("div",{ref:e,className:t,style:r},i)}const p=n.forwardRef(((e,t)=>{return n.createElement(u,(r=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({},e),s(r,a({forwardedRef:t}))));var r}))},33296:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({className:e="PosterCardIcon-container-ZQcJrO",width:t,height:r,children:i}){const s=(0,n.useMemo)((()=>({width:`${t}px`,height:`${r}px`,fontSize:Math.max(14,Math.min(Math.round(t/4),42)),lineHeight:`${r}px`})),[r,t]);return n.createElement("div",{className:e,style:s},i)}},68805:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(62376);const s={link:"PosterCardLink-link-LozvMm Link-link-vSsQW1",hoveredLink:"PosterCardLink-hoveredLink-H5OMFC PosterCardLink-link-LozvMm Link-link-vSsQW1"};var a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){var t=e,{className:r=s.link,hoverClassName:a=s.hoveredLink,isHovered:u}=t,p=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(t,["className","hoverClassName","isHovered"]);return n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({className:u?a:r},p))}},80728:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(42227),i=r(67294),s=r(33593),a=r(35172);function o(e){return null!=e?(0,s.Z)((0,n.Z)(e)):""}function l({className:e,timestamp:t}){const[r,n]=(0,i.useState)((0,a.Z)(t));return(0,i.useEffect)((()=>{if(null==t)return;const e=function(e,t){const r=Math.abs(Date.now()-1e3*e),n=36e5,i=24*n;return r<n?window.setTimeout(t,6e4):r<i?window.setTimeout(t,n):window.setTimeout(t,i)}(t,(()=>{n((0,a.Z)(t))}));return()=>{window.clearTimeout(e)}}),[t]),r?i.createElement("span",{className:e,title:o(t)},r):null}},91012:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(94184),i=r.n(n),s=r(67294),a=r(93545);const o={input:"Checkbox-input-L3AVrU",small:"Checkbox-small-g9HAwD",medium:"Checkbox-medium-xMqpii",large:"Checkbox-large-iky9yh",isDisabled:"Checkbox-isDisabled-tIVZI3",hasError:"Checkbox-hasError-yF8Sjx"};var l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};function y(e){var t=e,{forwardedRef:r,className:n=o.input,errorClassName:l=o.hasError,disabledClassName:c=o.isDisabled,isDisabled:d=!1,hasError:h=!1,name:y,size:v=a.Z.Medium}=t,f=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["forwardedRef","className","errorClassName","disabledClassName","isDisabled","hasError","name","size"]);return s.createElement("input",g({ref:r,className:i()(n,o[v],d&&c,h&&l),disabled:d,id:y,name:y,type:"checkbox"},f))}const v=s.forwardRef(((e,t)=>{return s.createElement(y,(r=g({},e),c(r,d({forwardedRef:t}))));var r}))},65127:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(94184),i=r.n(n),s=r(67294);const a={label:"FormLabel-label-jjY3xI",hasError:"FormLabel-hasError-qH12mx"};var o=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t=e,{className:r=a.label,errorClassName:n=a.hasError,children:o,name:p,hasError:m}=t,h=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["className","errorClassName","children","name","hasError"]);return s.createElement("label",((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({className:i()(r,m&&n),htmlFor:p},h),o)}},87357:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(94184),i=r.n(n),s=r(67294),a=r(93545);const o={input:"Select-input-HK74_E",select:"Select-select-cgne0H",small:"Select-small-bbFmhL",medium:"Select-medium-EZuYid",large:"Select-large-onfncC",isDisabled:"Select-isDisabled-v1reUK",hasError:"Select-hasError-dh3WW1"};var l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};function y(e){var t=e,{forwardedRef:r,className:n=o.input,selectClassName:l=o.select,errorClassName:c=o.hasError,disabledClassName:d=o.isDisabled,isDisabled:h=!1,hasError:y=!1,name:v,size:f=a.Z.Medium,children:b}=t,Z=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["forwardedRef","className","selectClassName","errorClassName","disabledClassName","isDisabled","hasError","name","size","children"]);return s.createElement("span",{className:i()(n,o[f],h&&d,y&&c)},s.createElement("select",g({ref:r,className:l,disabled:h,name:v},Z),b))}const v=s.forwardRef(((e,t)=>{return s.createElement(y,(r=g({},e),c(r,d({forwardedRef:t}))));var r}))},38483:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(94184),i=r.n(n),s=r(67294),a=r(56422);function o(e){return null!==e&&"current"in e}const l={textArea:"TextArea-textArea-kgu_gw",counter:"TextArea-counter-DQAJtl",container:"TextArea-container-yZWVWF",valid:"TextArea-valid-Xh_SsJ"};var c=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e};const v=25,f=e=>{var t=e,{forwardedRef:r,className:n=l.textArea,value:c,maxHeight:d,height:u=v}=t,g=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["forwardedRef","className","value","maxHeight","height"]);const[f,b]=(0,s.useState)(!1),Z=(0,s.useCallback)((e=>{o(r)&&e.target!==r.current&&e.preventDefault()}),[r]),S=(0,s.useCallback)((()=>{o(r)&&r.current.focus()}),[r]),P=(0,s.useCallback)((()=>{const e=o(r)?r.current:void 0;e&&(!d||e.scrollHeight<d?(e.style.overflow="hidden",e.style.height="auto",e.style.height=e.scrollHeight+"px"):d&&(e.style.overflow="auto",e.scrollTop=e.scrollHeight),b(e.scrollHeight>u))}),[r,u,d]);return s.createElement("div",{className:i()(l.container,c&&l.valid),onClick:S,onMouseDown:Z},s.createElement("textarea",y({ref:r,className:n,maxLength:300,rows:1,style:{height:u},onInput:P},g)),f?s.createElement("div",{className:l.counter},s.createElement(a.x,null,`${null==c?void 0:c.toString().length} / 300`)):null)},b=s.forwardRef(((e,t)=>{return s.createElement(f,(r=y({},e),d(r,u({forwardedRef:t}))));var r}))},14139:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(94184),i=r.n(n),s=r(67294),a=r(93545);const o={input:"TextInput-input-vbygwE",small:"TextInput-small-DPQwcl",medium:"TextInput-medium-PnJxKX",large:"TextInput-large-vwRwxv",isDisabled:"TextInput-isDisabled-qHSDpU",hasError:"TextInput-hasError-aNMtIS"};var l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};function y(e){var t=e,{forwardedRef:r,className:n=o.input,errorClassName:l=o.hasError,disabledClassName:c=o.isDisabled,isDisabled:d=!1,hasFocusOnMount:h=!1,hasError:y=!1,name:v,size:f=a.Z.Medium,onFocus:b}=t,Z=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["forwardedRef","className","errorClassName","disabledClassName","isDisabled","hasFocusOnMount","hasError","name","size","onFocus"]);return s.createElement("input",g({ref:r,autoFocus:h,className:i()(n,o[f],d&&c,y&&l),disabled:d,name:v,onFocus:b},Z))}const v=s.forwardRef(((e,t)=>{return s.createElement(y,(r=g({},e),c(r,d({forwardedRef:t}))));var r}))},80105:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(67294),i=r(28216),s=r(35758),a=r(5318),o=r(74226),l=r(72147),c=r(19211),d=r(73788),u=r(39582),p=r(88604),m=r(77713),h=r(83782),g=r(26263),y=r(12587),v=r(36103),f=r(85698),b=r(93644),Z=r(44811),S=r(55319),P=r(34219),I=r(44275),E=r(31281),w=r(57097),C=r(75126),M=r(44541),D=r(39874),O=r(5447),T=r(38316),x=r(96099);function A({server:e,provider:t,contentDirectory:r,overrideTitle:a,overrideDetail:o}){const v=(0,i.v9)((0,P.Z)("allSavedPivotParams")),f=(0,h.Z)(),Z=(0,S.Z)(),A=(0,u.Z)(t,r),k=r?(0,c.Z)({sourceType:A?A.key:null,sourceServer:e,sourceProvider:t,sourceDirectory:r}):void 0,N=(null==k?void 0:k.sourceType)===p.Hs,R=a||N&&(0,d.Z)("Live TV")||function(e,t,r){return t.isEmbedded?(0,d.Z)("Downloads"):e?e.title:t.isCloud?r.title:(0,m.Z)(t)}(r,e,t),L=o||N&&(0,I.Z)(e,t)||(0,O.Z)(k,e),j=!!(0,b.Z)(t,y.zW.Manage);let V;return N?V=(0,E.Z)("hybridGuide",{machineIdentifier:e.machineIdentifier,providerIdentifier:t.identifier}):!r&&e.isCloud||(V=e.isEmbedded?(0,T.Z)(null==v?void 0:v.downloads):(0,g.Z)(e,t,r,r?void 0:{key:l.D,pageType:s.km})),n.createElement("div",{className:"CurrentSourceBreadcrumb-container-pHbzRn"},V?n.createElement(w.Z,{detail:L,route:V,title:R}):null,!r&&!j||N?null:n.createElement(n.Fragment,null,n.createElement(C.Z,{iconComponent:x.Z,id:f,isMenuOpen:Z.isOpen,label:(0,d.Z)("Actions"),onPress:Z.onToggle}),r?n.createElement(M.Z,{isOverflowMenuOpen:Z.isOpen,providerEntityID:t.entityID,serverEntityID:e.entityID,source:k,target:f,onOverflowMenuClose:Z.onClose}):n.createElement(D.Z,{isOverflowMenuOpen:Z.isOpen,machineIdentifier:e.machineIdentifier,overflowMenuButtonID:f,serverEntityID:e.entityID,onOverflowMenuClose:Z.onClose})))}function k({overrideTitle:e,overrideDetail:t}){const[r,s,l]=(0,Z.c9)(),c=(0,i.v9)(f.Z),d=(0,i.v9)((0,v.Z)(r.machineIdentifier,null==c?void 0:c.identifier,a.u));return c&&o.wB(s.identifier,o.IS)?n.createElement(A,{contentDirectory:d,provider:c,server:r}):n.createElement(A,{contentDirectory:l,overrideDetail:t,overrideTitle:e,provider:s,server:r})}},56127:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i(e=60){const t=1e3*e,[r,i]=(0,n.useState)(Date.now());return(0,n.useEffect)((()=>{const e=window.setTimeout((()=>{i(Date.now())}),t-r%t);return()=>{window.clearTimeout(e)}}),[r,t]),r}},55319:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i(){const[e,t]=(0,n.useState)(!1),r=(0,n.useCallback)((()=>t(!0)),[]),i=(0,n.useCallback)((()=>t(!1)),[]),s=(0,n.useCallback)((()=>t(!e)),[e]);return(0,n.useMemo)((()=>({isOpen:e,onOpen:r,onClose:i,onToggle:s})),[e,i,r,s])}},10820:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i(){const[e,t]=(0,n.useState)(!1),r=(0,n.useRef)(void 0),i=(0,n.useRef)(null),s=(0,n.useCallback)((e=>{window.clearTimeout(r.current),i.current=e.currentTarget,t(!0)}),[]),a=(0,n.useCallback)((()=>{r.current=window.setTimeout((()=>{i.current=null,t(!1)}))}),[]);return(0,n.useEffect)((()=>{function e(e){const r=e.currentTarget;t(r instanceof HTMLElement&&r.contains(i.current))}return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),[e,s,a]}},28247:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i(){const[e,t]=(0,n.useState)(!1),r=(0,n.useRef)(null),i=(0,n.useCallback)((()=>t(!0)),[]),s=(0,n.useCallback)((()=>t(!1)),[]);return(0,n.useEffect)((()=>{const e=r.current;return e&&(e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",s)),()=>{e&&(e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",s))}}),[i,s]),[e,r]}},72310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(5977),s=r(20683);const a=function(){const e=(0,i.TH)().search;return(0,n.useMemo)((()=>{const{params:t}=s.Z.parseUri(e);return t}),[e])}},84105:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(73460),i=r(53274),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=window.ResizeObserver||i.d,u=function(e){return(0,n.Z)(((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({polyfill:d},e))}},52673:(e,t,r)=>{"use strict";r.d(t,{I:()=>i});var n=r(67294);const i=({target:e,callback:t})=>{const r=(0,n.useMemo)((()=>new MutationObserver(((e,r)=>{null==t||t(e,r)}))),[t]);(0,n.useEffect)((()=>(e&&r.observe(e,{attributes:!0,subtree:!0}),()=>r.disconnect())),[e,r])}},38002:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(20683);const s=function(){const e=window.location.hash.replace("#!","");return(0,n.useMemo)((()=>{const{params:t}=i.Z.parseUri(e);return t}),[e])}},52194:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(53274);const s=window.ResizeObserver||i.d,a=function(e){const t=(0,n.useRef)(null),r=(0,n.useRef)(null);return(0,n.useEffect)((()=>(t.current&&(r.current=new s(e),r.current.observe(t.current)),()=>{var e;null==(e=r.current)||e.disconnect(),r.current=null})),[e]),t}},65131:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);const i=function(){return(0,n.useCallback)((e=>{const t=e.target;t&&t.select()}),[])}},17408:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(48321);const s=Symbol("NO_VALUE"),a=function(e,t,r=500){const[a,o]=(0,n.useState)(s),l=(0,i.Z)(e),c=(0,n.useRef)(0);return e===t&&l!==t&&c.current++,(0,n.useEffect)((()=>{const e=window.setTimeout((()=>{o(s)}),r);return o(t),()=>{window.clearTimeout(e)}}),[c.current,t,r]),a===s?e:a}},11050:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({className:e="HubTitle-hubTitle-aiuTfg",children:t}){return n.createElement("div",{className:e,"data-testid":"hubTitle"},t)}},72188:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(91085);function s({className:e,hubs:t,hubComponent:r,hubTitleComponent:s,metricsRowOffset:a=0}){let o=a;return n.createElement("div",{className:e},t.map(((e,t)=>n.createElement(i.ZP,{key:t,name:e.context,row:e.initialSize||e.more?o++:void 0},n.createElement(r,{hub:e,hubTitleComponent:s})))))}},80983:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(48759),s=r(71078),a=r(26900),o=r(73788),l=r(51764),c=r(11050),d=r(50406),u=r(12316),p=r(64154);const m="VirtualHubScroller-hubScrollButton-X674uJ IconButton-iconButton-ebkqws Link-link-vSsQW1";function h({className:e="VirtualHubScroller-hub-EpgwMo",hubHeaderClassName:t="VirtualHubScroller-hubHeader-vSW06t",hub:r,hubTitleComponent:h,keyPropName:g,items:y,totalSize:v,initialPageSize:f=24,layout:b,cellComponentFactory:Z,shouldCenterScrollIndex:S,onPageRequest:P}){const{title:I,initialSize:E,random:w}=r,C=(0,n.useRef)(null),[M,D]=(0,n.useState)(!1),[O,T]=(0,n.useState)(!1),[x,A]=(0,n.useState)(!1),[k,N]=(0,n.useState)(),[R,L]=function(e){const t=(0,i.YD)({triggerOnce:!0});return void 0===window.IntersectionObserver?[void 0,!0]:t}(),j=null==v||w?E:v,V=Math.min(1e4,null!=j?j:0),U=(0,n.useCallback)((()=>{D(!0)}),[]),F=(0,n.useCallback)((e=>{const{visibleStartIndex:t,visibleEndIndex:r}=e;C.current=e,T(t>0),A(V>r+1)}),[V]),B=(0,n.useCallback)((()=>{const e=C.current;if(e){const t=e.visibleEndIndex-e.visibleStartIndex;N(Math.max(e.visibleStartIndex-t-1,0))}}),[]),_=(0,n.useCallback)((()=>{const e=C.current;e&&N(e.visibleEndIndex+1)}),[]),{isPlaceholder:z,placeholderItems:H}=(0,d.Z)({hub:r,size:y.length,totalSize:v,initialPageSize:f,isVisible:L,onPageRequest:P});return(0,n.useEffect)((()=>{null!=k&&N(void 0)}),[k]),z||V?n.createElement("div",{ref:R,className:e},n.createElement("div",{className:t,style:M?void 0:{visibility:"hidden"}},h?n.createElement(h,{hub:r,items:y},I):n.createElement(c.Z,null,I),z||!O&&!x?null:n.createElement("div",{className:"VirtualHubScroller-hubActions-rWTnSS"},n.createElement(l.Z,{className:m,iconComponent:s.e,isDisabled:!O,title:(0,o.Z)("Previous Page"),onPress:B}),n.createElement(l.Z,{className:m,iconComponent:a.V,isDisabled:!x,title:(0,o.Z)("Next Page"),onPress:_}))),n.createElement("div",{style:M?void 0:{height:b.rowHeight}},n.createElement(p.Z,{autoScroll:!1,cellComponentFactory:Z,className:"VirtualHubScroller-hubScroller-gv2_Qy VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko",items:z?H:y,keyPropName:g,layout:b,scrollDirection:u.I.Horizontal,scrollerKey:r.sourceURI,shouldCenterScrollIndex:S,targetScrollIndex:k,totalSize:z?H.length:V,onListReady:U,onListUpdate:F,onPageRequest:z||!L?void 0:P}))):null}},50406:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({hub:e,size:t,totalSize:r,initialPageSize:i,isVisible:s=!0,onPageRequest:a}){const o=!(!e.placeholder||!e.more||t||null!=r),l=(0,n.useMemo)((()=>{const e=[];return e.length=i,e}),[i]);return(0,n.useEffect)((()=>{var t;!s&&o||!e.more||null!=r||null==a||a({startIndex:null!=(t=e.initialSize)?t:0,size:i})}),[e.initialSize,e.more,o,s,a,r,i]),{isPlaceholder:o,placeholderItems:l}}},55809:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(77129),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e){var t=e,{columnWidth:r,aspectRatio:i,titleHeight:c,innerHorizontalPadding:d}=t,u=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["columnWidth","aspectRatio","titleHeight","innerHorizontalPadding"]);return(0,n.Z)(((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e})({columnWidth:r,rowHeight:Math.floor(r/i+c),innerHorizontalPadding:d},u))}},84384:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(99),s=r(89995),a=r(54320);function o({icon:e,size:t=88,iconSize:r=a.$u.XL}){return n.createElement(s.W,{posterStyle:a.mJ.Circle,width:t},n.createElement(i.k,{alignItems:a.xM.Center,height:"100%",justifyContent:a.xM.Center},n.createElement(e,{size:r})))}},83836:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(54320),s=r(93768),a=r(51387);function o({server:e,url:t,size:r}){return n.createElement(s.P,{height:r,posterStyle:i.mJ.Circle,server:e,url:(0,a.Z)(t,r),width:r})}},94788:(e,t,r)=>{"use strict";r.d(t,{k:()=>o,Z:()=>l});var n=r(67294),i=r(62208),s=r(87036);const a=(0,i.Z)(s.Z.slowSpeed);var o=(e=>(e.Fill="fill",e.Contain="contain",e.Cover="cover",e.ScaleDown="scale-down",e.None="none",e))(o||{});const l=(0,n.memo)((function({className:e,src:t,alt:r,width:i,height:s,fit:o,durationMilliseconds:l=a}){const c=(0,n.useRef)(null);return(0,n.useLayoutEffect)((()=>{const e=c.current;if(!e||!t)return;const n=document.createElement("img");r&&(n.alt=r),Object.assign(n.style,{position:"absolute",width:"100%",height:"100%",objectFit:o,opacity:"0"}),e.appendChild(n),n.onload=()=>{const t=Date.now()-i,r=s||t<50,a=e.childNodes.length>1;if("function"!=typeof n.animate||r&&!a)n.style.opacity="1";else{const t=n.animate([{opacity:0},{opacity:1}],l);t.onfinish=t.oncancel=()=>{for(n.style.opacity="1";e.childNodes.length>1;)e.removeChild(e.childNodes[0])}}},n.onerror=()=>{for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])},n.src=t;const i=Date.now(),s=n.complete;return()=>{n.onload=n.onerror=null}}),[t,r,o,l]),n.createElement("div",{ref:c,className:e,style:{position:"relative",overflow:"hidden",width:i,height:s}})}))},93768:(e,t,r)=>{"use strict";r.d(t,{P:()=>o});var n=r(67294),i=r(89995),s=r(9171),a=r(94788);const o=({url:e,height:t,width:r,server:o,provider:l,posterStyle:c})=>{const d=(0,s.Z)({server:o,width:r,height:t,url:e,provider:l});return n.createElement(i.W,{posterStyle:c,width:r},n.createElement(a.Z,{className:"ImagePoster-flex-Ry0HC5",durationMilliseconds:0,height:t,src:d,width:r}))}},72449:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(94184),i=r.n(n),s=r(67294);const a=s.forwardRef((({className:e="ListRow-row-oh5MTV",alternateClassName:t="ListRow-alternateRow-VySkqw ListRow-row-oh5MTV",hoveredClassName:r="ListRow-isHovered-xjtD7Z",tabIndex:n,style:a={},isAlternate:o=!1,isHovered:l=!1,children:c,onFocus:d,onBlur:u},p)=>s.createElement("div",{ref:p,className:i()(o?t:e,l&&r),style:a,tabIndex:n,onBlur:u,onFocus:d},c)))},21602:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(72449);var s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e};const u=n.forwardRef((({className:e="ListRowPlaceholder-placeholder-g75gnX",style:t,index:r},s)=>n.createElement(i.Z,{ref:s,className:e,style:d({animationDelay:r%12*200+"ms"},t)})))},4316:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(94184),i=r.n(n),s=r(67294),a=r(4386);function o({className:e="RowSelectButton-selectButtonContainer-tTR26j",visibleClassName:t="RowSelectButton-isVisible-Xuw8OY",isSelected:r,isInSelectionRange:n,isVisible:o,title:l,tabIndex:c,onPress:d}){return s.createElement("div",{className:i()(e,o&&t)},s.createElement(a.Z,{"aria-hidden":-1===c?"true":void 0,className:"RowSelectButton-selectButton-RIxDKH SelectButton-selectButton-SvPc9f Link-link-vSsQW1",isInSelectionRange:n,isSelected:r,tabIndex:c,title:l,onPress:d}))}},98833:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(23245),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e};var u=r(65915);function p({className:e,children:t,keyPropName:r,items:s,totalSize:a,layout:o,cellComponentFactory:l,viewportWidth:c,viewportHeight:p,listTop:m=0,listLeft:h=0,scrollTop:g,scrollLeft:y,isWaitingToRestoreScrollPosition:v=!1,minPageCount:f=3,minPageSize:b=24,pageRequestDelay:Z=u.IT,onPageRequest:S,onListReady:P,onListUpdate:I}){const E=(0,n.useMemo)((()=>o.getListMeasurements({viewportWidth:c,viewportHeight:p,listTop:m,listLeft:h},a)),[c,p,o,m,h,a]),{renderStartIndex:w,renderEndIndex:C,visibleStartIndex:M,visibleEndIndex:D}=(0,n.useMemo)((()=>o.getRangesForPosition(g,y,a,E)),[o,E,y,g,a]),O=function({keyPropName:e,items:t,totalSize:r,layout:s,measurements:a,renderStartIndex:o,renderEndIndex:l,visibleStartIndex:c,visibleEndIndex:u,cellComponentFactory:p,minPageCount:m,minPageSize:h,pageRequestDelay:g,onPageRequest:y,onListUpdate:v}){const f=(0,i.Z)(o),b=(0,n.useRef)(!1);return o!==f&&(b.current=null!=f&&o<f),(0,n.useEffect)((()=>{let e;if(y&&m&&h){const n=b.current,i=l-o+1,s=Math.max(i*m,h);let a,c=!1;if(n){const e=Math.max(l-s+1,0);for(a=l;a>=e;){if(null==t[a]){c=!0;break}a--}}else{const e=Math.min(o+s-1,r-1);for(a=o;a<=e;){if(null==t[a]){c=!0;break}a++}}c&&(e=window.setTimeout((()=>{y({startIndex:a,size:s,isPrepend:n})}),g))}return()=>window.clearTimeout(e)}),[t,m,h,y,g,f,l,o,r]),(0,n.useEffect)((()=>{v&&v({renderStartIndex:o,renderEndIndex:l,visibleStartIndex:c,visibleEndIndex:u})}),[v,l,o,u,c]),(0,n.useMemo)((()=>{const r=[];for(let n=o;n<=l;n++){const i=t[n],o=n>=c&&n<=u,l=s.getPositionForIndex(n,a);r.push(p(d({key:String(i&&e?i[e]:n),isVirtual:!0,isVisible:o,cellIndex:n,item:i},l)))}return r}),[p,t,e,s,a,l,o,u,c])}({keyPropName:r,items:s,totalSize:a,layout:o,measurements:E,renderStartIndex:w,renderEndIndex:C,visibleStartIndex:M,visibleEndIndex:D,cellComponentFactory:l,minPageCount:f,minPageSize:b,pageRequestDelay:Z,onPageRequest:S,onListUpdate:I});return(0,n.useEffect)((()=>{P&&P(E)}),[E,P]),n.createElement("div",{className:e,style:{width:E.width,height:E.height,position:"relative"}},v||!E.height?null:O,t)}},88467:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(11801),s=r(26324),a=r(73788);function o({isAscending:e=!0}){const t=e?i.J:s.O;return n.createElement("div",{className:"IconTableHeaderSortDirection-sortDirectionIcon-lpcD5T"},n.createElement(t,{"aria-label":e?(0,a.Z)("Ascending"):(0,a.Z)("Descending")}))}},12476:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294);const i={tableCell:"TableCell-tableCell-eytlAB",activeTableCell:"TableCell-activeTableCell-KGqIi8 TableCell-tableCell-eytlAB",title:"TableCell-title-swrhIF"};var s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t,r=e,{className:s=i.title,cellClassName:p=i.tableCell,activeCellClassName:m=i.activeTableCell,style:h,component:g,type:y,isActiveSort:v}=r,f=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(r,["className","cellClassName","activeCellClassName","style","component","type","isActiveSort"]);return n.createElement("div",{className:v?m:p,style:h},n.createElement(g,(t=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({},f),a(t,o({className:s})))))}},83189:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294);const i={tableHeader:"TableHeader-tableHeader-DV7Uvw"};var s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t,r=e,{className:s=i.tableHeader}=r,p=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(r,["className"]);return n.createElement("div",(t=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({},p),a(t,o({className:s}))))}},5099:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294);const i={tableHeaderCell:"TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB",activeTableHeaderCell:"TableHeaderCell-activeTableHeaderCell-jjqwYB TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB"};var s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t=e,{className:r=i.tableHeaderCell,activeClassName:s=i.activeTableHeaderCell,children:p,isActive:m=!1}=t,h=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["className","activeClassName","children","isActive"]);const g=m?s:r;return n.createElement("span",(y=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({},h),a(y,o({className:g}))),p);var y}},89385:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(62376);const s={tableHeaderLink:"TableHeaderLink-tableHeaderLink-ZM1qnf Link-link-vSsQW1"};var a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){var t,r=e,{className:a=s.tableHeaderLink,children:m}=r,h=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(r,["className","children"]);return n.createElement(i.Z,(t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({},h),o(t,l({className:a}))),m)}},23525:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294);const i={tableHeaderTitle:"TableHeaderTitle-tableHeaderTitle-YBbHuP"};var s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t,r=e,{className:s=i.tableHeaderTitle,children:p}=r,m=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(r,["className","children"]);return n.createElement("span",(t=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({},m),a(t,o({className:s}))),p)}},16975:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(48321),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){const{style:t,moveDurationMilliseconds:r=200,isVirtual:s,isVisible:d,cellIndex:u,cellX:p,cellY:m,cellWidth:h,cellHeight:g}=e,y=(0,n.useRef)(null),v=(0,i.Z)(u),f=(0,i.Z)(p),b=(0,i.Z)(m),Z=null!=v&&u!==v,S=(0,n.useRef)(!0);s&&!d||(S.current=!1);const P=(0,n.useMemo)((()=>((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})(s?{willChange:"transform",position:"absolute",width:h,height:g,top:m,left:p}:{position:"relative"},t)),[p,m,h,g,t,s]);return(0,n.useLayoutEffect)((()=>{const e=y.current;if(!e||null==f||null==b||null==p||null==m)return;let t;Z&&"function"==typeof e.animate&&(e.style.zIndex="1",e.style.pointerEvents="none",t=e.animate([{transform:`translate(${f-p}px, ${b-m}px)`},{transform:"none"}],r),t.oncancel=t.onfinish=()=>{e.style.zIndex="0",e.style.pointerEvents="unset"})}),[p,m,Z,r,f,b]),{cellRef:y,style:P,isOffscreenPlaceholder:S.current}}},55755:(e,t,r)=>{"use strict";r.d(t,{m:()=>i,Z:()=>s}),r(32903);var n=r(56792),i=(e=>(e.Vertical="vertical",e.Horizontal="horizontal",e))(i||{});function s({direction:e="vertical",rows:t,columns:r,overscan:i=0,innerHorizontalPadding:s=0,innerVerticalPadding:a=0,outerPaddingTop:o=0,outerPaddingRight:l=0,outerPaddingBottom:c=0,outerPaddingLeft:d=0,getCellWidth:u,getCellHeight:p}){return{getListMeasurements(n,i){const m=n.listTop,h=n.listLeft;let g=(n.viewportWidth||0)-l-d,y=(n.viewportHeight||0)-o-c;"vertical"===e?g-=h:y-=m,g=Math.max(0,g),y=Math.max(0,y);const v=u({innerViewportWidth:g,innerViewportHeight:y,innerHorizontalPadding:s,innerVerticalPadding:a}),f=p({cellWidth:v,innerViewportWidth:g,innerViewportHeight:y,innerHorizontalPadding:s,innerVerticalPadding:a}),b=Math.max(0,t||Math.floor((y+a)/(f+a))),Z=Math.max(0,r||Math.floor((g+s)/(v+s))),S=Z*b;let P=0,I=0;return"vertical"===e&&Z?(P=Z*(v+s)-s,I=Math.ceil(i/Z)*(f+a)-a):"horizontal"===e&&b&&(P=Math.ceil(i/b)*(v+s)-s,I=b*(f+a)-a),{width:P+l+d,height:I+o+c,outerPaddingTop:o,outerPaddingRight:l,outerPaddingBottom:c,outerPaddingLeft:d,listTop:m,listLeft:h,cellWidth:v,cellHeight:f,cellsPerColumn:b,cellsPerRow:Z,cellsPerPage:S}},getPositionForIndex(t,r){const{listTop:n,listLeft:i,cellWidth:l,cellHeight:c}=r,u=function(t,r){return"vertical"===e?t%r.cellsPerRow:Math.floor(t/r.cellsPerColumn)}(t,r),p=function(t,r){return"vertical"===e?Math.floor(t/r.cellsPerRow):t%r.cellsPerColumn}(t,r);return{column:u,row:p,cellX:u*(l+s)+i+d,cellY:p*(c+a)+n+o,cellWidth:l,cellHeight:c}},getRangesForPosition(t,r,o,l){const{listTop:c,listLeft:d,cellWidth:u,cellHeight:p,cellsPerColumn:m,cellsPerRow:h,cellsPerPage:g}=l,y="vertical"===e?h:m,v="vertical"===e?(t-c)/(p+a):(r-d)/(u+s),f=g+2*y+i*y*2,b=Math.ceil(v)*y,Z=b+g-1;let S=b-y*i;const P=(0,n.Z)(S,o)+f-1;return P>=o&&(S=o-f),{visibleStartIndex:(0,n.Z)(b,o),visibleEndIndex:(0,n.Z)(Z,o),renderStartIndex:(0,n.Z)(S,o),renderEndIndex:(0,n.Z)(P,o)}}}}},77129:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(55755),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e};function d(e){var t=e,{columnWidth:r,rowHeight:i}=t,l=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["columnWidth","rowHeight"]);return c({rowHeight:i},(0,n.Z)(c({direction:n.m.Horizontal,rows:1,getCellWidth:()=>r,getCellHeight:()=>i,overscan:4},l)))}},65790:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(55755),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e){var t=e,{rowHeight:r,rowWidth:i=0}=t,c=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["rowHeight","rowWidth"]);return(0,n.Z)(((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e})({direction:n.m.Vertical,columns:1,getCellWidth:e=>Math.max(i,e.innerViewportWidth),getCellHeight:()=>r},c))}},65915:(e,t,r)=>{"use strict";r.d(t,{HE:()=>n,p8:()=>i,nM:()=>s,IT:()=>a});const n=12,i=200,s=400,a=200},91085:(e,t,r)=>{"use strict";r.d(t,{Zn:()=>c,VJ:()=>d,IF:()=>u,ZP:()=>p});var n=r(67294),i=r(62291);const s=Symbol(void 0),a=Symbol(void 0),o=[s,s,s],l=(0,n.createContext)({metricsPage:i.lz,metricsContextTuple:o});function c(){return(0,n.useContext)(l)}function d([e,t,r]){if(e!==s)return[e,t===s||t===a?"":t,r===s||r===a?"":r].join("~").replace(/~+$/,"")}function u([e,t,r]){if(e!==s)return{context:e,row:t===a||t===s?void 0:t,col:r===a||r===s?void 0:r}}function p({children:e,metricsPage:t,metricsContextParam:r,name:i,row:d=s,column:u=s}){const{metricsPage:p,metricsContextTuple:m}=c(),h=(0,n.useMemo)((()=>{const[e,n,l]=m;return r?function(e){if(!e)return o;const[t,r,n]=e.split("~");return t?[t,r?parseInt(r,10):a,n?parseInt(n,10):a]:o}(r):i?[`${p}:${i}`,d,u]:e!==s?[e,n===s?d:n,l===s?u:l]:t&&t!==p?m:void 0}),[u,m,r,p,t,i,d]),g=(0,n.useMemo)((()=>h?{metricsPage:t||p,metricsContextTuple:h}:void 0),[h,p,t]);return g?n.createElement(l.Provider,{value:g},e):e}},20896:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(45191),s=r(91085),a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e};function p(e){const{metricsPage:t,metricsContextTuple:r}=(0,s.Zn)();return(0,n.useCallback)((n=>{const s=u(u({page:t,contextTuple:r},e),n);(0,i.DB)("metrics").trackClick(s)}),[JSON.stringify(e),r,t])}},89536:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(44811),i=r(20896);function s(e){const[,t]=(0,n.c9)();return(0,i.Z)({identifier:t.metricsIdentifier,type:e.type})}},74861:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(45191),s=r(33606),a=r(91085),o=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e,t=!0){const{metricsPage:r,metricsContextTuple:o}=(0,a.Zn)();(0,n.useEffect)((()=>{var n;t?(0,i.DB)("metrics").trackView((n=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({},e),l(n,c({page:r,contextTuple:o})))):s.ZP.startPeriod(`client:view:${r}`)}),[t,o,r,JSON.stringify(e)])}},71115:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(74226),i=r(8089);const s=function(e){var t;if((null==e?void 0:e.source)&&!(0,i.Z)(e.source).isServer)return{type:e.type,id:e.guid,title:e.title,genre:null==(t=e.Genre)?void 0:t[0].tag,provider:n.IS,releaseDate:e.originallyAvailableAt,parentId:e.parentGuid,parentTitle:e.parentTitle,grandparentId:e.grandparentGuid,grandparentTitle:e.grandparentTitle}}},75203:(e,t,r)=>{"use strict";r.d(t,{Z:()=>D});var n=r(47354),i=r(67294),s=r(73935),a=r(45062),o=r(62474),l=r(8724),c=r(87036),d=r(73190),u=r(45191),p=r(75404),m=r(23245),h=r(91085),g=r(74861),y=r(26377),v=r(93545);const f={modalContainer:"Modal-modalContainer-E0ECbh",modalBackdrop:"Modal-modalBackdrop-B7kPM7",modal:"Modal-modal-SlW5fl",small:"Modal-small-QidBqi Modal-modal-SlW5fl",medium:"Modal-medium-tDj6qd Modal-modal-SlW5fl",large:"Modal-large-aLJPzk Modal-modal-SlW5fl"},b=(0,o.Z)(c.Z.modalSpeed),Z=1e3*b,S={ease:"easeOut",duration:b},P={ease:d.Z.motionEasing,duration:b},I={opacity:S},E={enter:{opacity:1,transition:I},exit:{opacity:0,transition:I}},w={scale:P,opacity:S},C={enter:{opacity:1,scale:1,transition:w},exit:{opacity:0,scale:.95,transition:w}};function M(e,t){const r=function(e){if(function(e){return e.nativeEvent instanceof MouseEvent}(e))return e.target;const t=e.changedTouches;if(1===t.length){const e=t[0];return document.elementFromPoint(e.clientX,e.clientY)}return null}(e);if(r){const e=s.findDOMNode(t);return!e||!e.contains(r)}return!1}function D({children:e,className:t,backdropClassName:r=f.modalBackdrop,containerClassName:o=f.modalContainer,size:c=v.Z.Medium,isOpen:d,shouldTrackOnClose:b=!1,preventCloseOnBackdropPress:S=!1,onModalClose:P}){const I=(0,i.useRef)(null),w=(0,i.useRef)(!1),D=(0,i.useCallback)((e=>{w.current=M(e,I.current)}),[]),O=(0,i.useCallback)((e=>{!S&&w.current&&M(e,I.current)&&P(),w.current=!1}),[P,S]),T=(0,i.useCallback)((e=>{w.current=!1}),[]),x=(0,i.useCallback)((e=>{w.current=!1}),[]),A=(0,i.useCallback)((e=>{const t=e.keyCode;t===a.Mf?l.QE(e):t===a.hY&&(e.preventDefault(),e.stopPropagation(),P(),l.sM())}),[P]),k=(0,i.useCallback)((e=>{I.current=e,e&&l.LJ(s.findDOMNode(e))}),[]);return(0,g.Z)({},d),function(e,t=!1){const{metricsPage:r}=(0,h.Zn)(),n=(0,m.Z)(e);(0,i.useEffect)((()=>{n&&!e&&t&&(0,u.DB)("metrics").trackView({page:r,action:p.GP})}),[e,n,t,r])}(d,b),(0,i.useEffect)((()=>{let e;return d&&(e=window.setTimeout(l.pc,Z),document.addEventListener("keydown",A)),()=>{e&&window.clearTimeout(e),d&&document.removeEventListener("keydown",A)}}),[d,A]),i.createElement(y.Z,{className:o,closeDelayMilliseconds:Z,isOpen:d},i.createElement(n.M_,null,d?i.createElement(n.ww.div,{key:"backdrop",animate:"enter",className:r,exit:"exit",initial:"exit",variants:E,onMouseDown:D,onMouseUp:O,onTouchCancel:x,onTouchEnd:O,onTouchMove:T,onTouchStart:D},i.createElement(n.ww.div,{key:"modal",ref:k,animate:"enter",className:t||f[c],exit:"exit",initial:"exit",variants:C},e)):void 0))}},86655:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(12316);const s={modalBody:"ModalBody-modalBody-_vZ7B0",modalScroller:"ModalBody-modalScroller-W8q7m0 ModalBody-modalBody-_vZ7B0",innerModalBody:"ModalBody-innerModalBody-P8kk_7"};var a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m=n.forwardRef(((e,t)=>{var r=e,{children:a,className:m,innerClassName:h=s.innerModalBody}=r,g=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(r,["children","className","innerClassName"]);const y=g.scrollDirection!==i.I.None;return m||(m=y?s.modalScroller:s.modalBody),n.createElement(i.Z,(v=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({ref:t},g),o(v,l({className:m}))),y?n.createElement("div",{className:h},a):a);var v}))},87221:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(62376),s=r(51861);function a({children:e,className:t="ModalContent-modalContent-EmjBoq",onModalClose:r}){return n.createElement("div",{className:t},n.createElement(i.Z,{className:"ModalContent-closeButton-GoBA4S Link-link-vSsQW1",onPress:r},n.createElement(s.Z,null)),e)}},17778:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(26397);function s({message:e}){return n.createElement("div",{className:"ModalError-container-_5URJn"},n.createElement(i.Z,{className:"ModalError-icon-nlZ6Vx"}),n.createElement("div",{className:"ModalError-message-fo2iPU"},e))}},493:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({children:e,className:t="ModalFooter-modalFooter-LfeJsh"}){return n.createElement("div",{className:t},e)}},34154:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({children:e,className:t="ModalFooterButtonBar-buttonBar-xxZyHc"}){return n.createElement("div",{className:t},e)}},34721:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({children:e,className:t="ModalHeader-modalHeader-NxmPxS"}){return n.createElement("div",{className:t},e)}},95358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({children:e,className:t="ModalSubheader-modalSubheader-HDOykp"}){return n.createElement("div",{className:t},e)}},79347:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(1802),s=r(58477),a=r(82818),o=r(1242),l=r(54320),c=r(73788);function d({children:e,backgroundClassName:t="UpsellModal-backgroundContainer-RikWr2",backgroundSrc:r,backgroundColor:d,header:u,isDismissable:p=!1,isOpen:m,onClose:h}){return n.createElement(a.u_,{isDismissable:p,isOpen:m,onClose:h},n.createElement(a.q1,{header:u},n.createElement("div",{className:"UpsellModal-modalContainer-qch6zo"},p?n.createElement("div",{className:"UpsellModal-closeButtonContainer-qehKWE"},n.createElement(i.hU,{"aria-label":(0,c.Z)("Close"),color:"transparent",icon:s.k,iconSize:l.$u.XL,insetFocus:!0,onPress:h})):null,n.createElement("div",{className:t,style:{backgroundColor:d}},r?n.createElement("img",{key:r,height:"100%",src:r,width:"100%"}):null),n.createElement(o.T,null,e))))}},42218:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(67294),i=r(12316),s=r(31760),a=r(37418);const o={pageScroller:"Page-pageScroller-b8QY9N Scroller-scroller-S6_dko"};var l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};function y(e){var t=e,{className:r=o.pageScroller,skipScrollRestore:l=!1,onScrollPositionChange:h}=t,y=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["className","skipScrollRestore","onScrollPositionChange"]);const v=(0,s.Z)({key:"Page",shouldRestoreImmediately:!0,onScrollPositionChange:h}),f=l?{onScrollPositionChange:h}:v.scrollRestoreProps;return n.createElement(a.Z,null,n.createElement(i.Z,(b=g(g({},y),f),c(b,d({className:r})))));var b}},42149:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(67294),i=r(12316),s=r(31760);const a={pageContentScroller:"PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko"};var o=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e};const g=n.forwardRef(((e,t)=>{var r=e,{className:o=a.pageContentScroller,skipScrollRestore:m=!1,onScrollPositionChange:g}=r,y=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(r,["className","skipScrollRestore","onScrollPositionChange"]);const v=(0,s.Z)({key:"PageContent",shouldRestoreImmediately:!0,onScrollPositionChange:g}),f=m?{onScrollPositionChange:g}:v.scrollRestoreProps;return n.createElement(i.Z,(b=h(h({ref:t},y),f),l(b,c({className:o}))));var b}))},37418:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(67294),i=r(71371),s=r(86832),a=r(63797);class o extends n.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(e,t){super(e,t),this.state={hasError:!1}}componentDidCatch(e,t){s.Z.error(e);const r={extra:{componentStack:t.componentStack}};i.Tb(e,r)}render(){return this.state.hasError?n.createElement(a.Z,null):n.createElement(n.Fragment,null,this.props.children)}}const l=o},50439:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(12316);const s={emptyPageContentScroller:"EmptyPageContent-emptyPageContentScroller-GSNujz PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko",content:"EmptyPageContent-content-soks97",icon:"EmptyPageContent-icon-F09nMX",imgIcon:"EmptyPageContent-imgIcon-WJ9xbo",title:"EmptyPageContent-title-ep4YLZ",description:"EmptyPageContent-description-_nthc5",footer:"EmptyPageContent-footer-mx9XBB"};var a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){var t=e,{children:r,className:a=s.emptyPageContentScroller,contentClassName:u=s.content,icon:p,titleClassName:m=s.title,iconSrc:h,title:g,descriptionClassName:y=s.description,description:v,footerClassName:f=s.footer,footer:b}=t,Z=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(t,["children","className","contentClassName","icon","titleClassName","iconSrc","title","descriptionClassName","description","footerClassName","footer"]);return n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({className:a},Z),n.createElement("div",{className:u},p?n.createElement("span",{className:s.icon},p):null,h?n.createElement("img",{className:s.imgIcon,src:h}):null,g?n.createElement("div",{className:m},g):null,v?n.createElement("div",{className:y},v):null,r),b?n.createElement("div",{className:f},b):null)}},91306:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(26397),s=r(50439),a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){return n.createElement(s.Z,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({icon:n.createElement(i.Z,null)},e))}},48579:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(73788),s=r(4681),a=r(91306);function o({className:e}){return n.createElement(a.Z,{className:e,description:(0,i.Z)("We're having trouble finding this page. It might have been deleted"),title:(0,i.Z)("Not found")},n.createElement(s.Z,{to:"#"},(0,i.Z)("Go Home")))}},63797:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(73788),s=r(91306);function a({children:e}){return n.createElement(s.Z,{description:(0,i.Z)("An unexpected error occurred."),title:(0,i.Z)("Something went wrong")},e)}},61606:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(34219);const s=(0,n.P1)((0,i.Z)("columnWidthMultiplier"),(e=>Math.floor(70*(e-1)+130)))},77502:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(33434),s=r(36155);const a=(0,i.Z)((function(e){return t=>e===s.G.Photo?t.ui.photoPlayer:t.ui.audioVideoPlayer})),o=(0,i.Z)((function(e,t){return(0,n.P1)(a(e),(e=>e[t]))}))},26377:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(73935),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p({className:e,style:t,children:r,forwardedRef:s,isOpen:a=!0,closeDelayMilliseconds:o=0,allowInteractionEventBubbling:l=!1,onOpen:c,onClose:d}){const[u,p]=(0,n.useState)(a),m=(0,n.useCallback)((e=>{l||e.stopPropagation()}),[l]);return(0,n.useEffect)((()=>{let e;return a?(p(!0),null==c||c()):e=window.setTimeout((()=>{p(!1),null==d||d()}),o),()=>{e&&window.clearTimeout(e)}}),[o,a,d,c]),u?i.createPortal(n.createElement("div",{ref:s,className:e,style:t,onBlur:m,onClick:m,onFocus:m,onMouseDown:m,onMouseUp:m,onTouchCancel:m,onTouchEnd:m,onTouchMove:m,onTouchStart:m},r),document.body):null}const m=n.forwardRef(((e,t)=>{return n.createElement(p,(r=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({},e),a(r,o({forwardedRef:t}))));var r}))},12316:(e,t,r)=>{"use strict";r.d(t,{I:()=>g,Z:()=>v});var n=r(94184),i=r.n(n),s=r(67294),a=(r(69213),r(20222));const o={scroller:"Scroller-scroller-S6_dko",none:"Scroller-none-nCSoNb",vertical:"Scroller-vertical-n45J8D",auto:"Scroller-auto-gN2JNU",horizontal:"Scroller-horizontal-KIzIP3",omni:"Scroller-omni-bAqZII"};var l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e=>(e.None="none",e.Vertical="vertical",e.Horizontal="horizontal",e.Omni="omni",e))(g||{});function y({forwardedRef:e,className:t=o.scroller,style:r,children:n,scrollDirection:l="vertical",autoScroll:c=!0,smoothScroll:d=!1,targetScrollTop:u,targetScrollLeft:p,onScrollPositionChange:m}){const h=(0,s.useRef)(null),g=(0,s.useCallback)((e=>{m&&null!=h.current&&h.current===e.target&&m({scrollTop:h.current.scrollTop,scrollLeft:h.current.scrollLeft})}),[h,m]);return(0,s.useEffect)((()=>{null==h.current||null==u&&null==p||h.current.scrollTo({top:u,left:p,behavior:d?"smooth":"auto"})}),[h,u,p,d]),s.createElement("div",{ref:(0,a.Z)(e,h),className:i()(t,o[l],c&&o.auto),style:r,onScroll:g},n)}const v=s.forwardRef(((e,t)=>{return s.createElement(y,(r=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},e),c(r,d({forwardedRef:t}))));var r}))},64154:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(67294),i=r(52194),s=r(98833),a=r(31760),o=r(12316);const l={scroller:"VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko"};var c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e};function g(e,t){if(t.shouldCenterCell){const r=(t.viewportDimension-t.cellDimension)/2,n=Math.round(e-r);return Math.max(n,0)}return e-(t.offset||0)}function y(e){var t=e,{className:r=l.scroller,scrollerKey:c="VirtualListScroller",scrollerStyle:m,virtualListClassName:y,layout:v,keyPropName:f,resizeTimeout:b,scrollDirection:Z=o.I.Vertical,targetScrollIndex:S,shouldCenterScrollIndex:P=!1,autoScroll:I=!0,smoothScroll:E=!0,renderAboveList:w,renderBelowList:C,onListReady:M}=t,D=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["className","scrollerKey","scrollerStyle","virtualListClassName","layout","keyPropName","resizeTimeout","scrollDirection","targetScrollIndex","shouldCenterScrollIndex","autoScroll","smoothScroll","renderAboveList","renderBelowList","onListReady"]);const[O,T]=(0,n.useState)({scrollTop:0,scrollLeft:0}),[x,A]=(0,n.useState)({width:0,height:0}),k=!(!x.width&&!x.height),[N,R]=(0,n.useState)(void 0),L=(0,n.useCallback)((([e])=>{A({width:e.target.clientWidth,height:e.target.clientHeight})}),[]),j=(0,i.Z)(L),V=(0,n.useMemo)((()=>{if(!N||!x||null==S)return;const e=v.getPositionForIndex(Math.max(S,0),N);return function(e,t,r){const{shouldCenterCell:n,measurements:i,listMeasurements:s}=r;return{scrollTop:e===o.I.Vertical||e===o.I.Omni?g(t.cellY,{shouldCenterCell:n,viewportDimension:i.height,offset:s.outerPaddingTop,cellDimension:t.cellHeight}):0,scrollLeft:e===o.I.Horizontal||e===o.I.Omni?g(t.cellX,{shouldCenterCell:n,viewportDimension:i.width,offset:s.outerPaddingLeft,cellDimension:t.cellWidth}):0}}(Z,e,{shouldCenterCell:P,measurements:x,listMeasurements:N})}),[v,N,x,Z,P,S]);let U,F;V&&(U=V.scrollTop,F=V.scrollLeft);const B=(0,n.useCallback)((({scrollLeft:e,scrollTop:t})=>{T({scrollTop:t,scrollLeft:e})}),[]),{isWaitingToRestoreScrollPosition:_,scrollRestoreProps:z,onScrollPositionReady:H}=(0,a.Z)({key:c,onScrollPositionChange:B}),W=(0,n.useCallback)((e=>{R(e),H(),M&&M(e)}),[M,H]);return n.createElement(o.Z,h({ref:j,autoScroll:I,className:r,scrollDirection:Z,smoothScroll:E,style:m,targetScrollLeft:F,targetScrollTop:U},z),w&&!_?w(x):null,k?n.createElement(s.Z,h({className:y,isWaitingToRestoreScrollPosition:_,keyPropName:f,layout:v,scrollLeft:O.scrollLeft,scrollTop:O.scrollTop,viewportHeight:x.height,viewportWidth:x.width,onListReady:W},D)):null,C&&!_?C(x):null)}},31760:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(79864);function s({key:e,shouldRestoreImmediately:t=!1,onScrollPositionChange:r}){const s=i.Z.getKey(`${e}!scrollPosition`),a=(0,n.useRef)(null),[o,l]=(0,n.useState)(!!i.Z.get(s)),[c,d]=(0,n.useState)(void 0),[u,p]=(0,n.useState)(void 0),m=(0,n.useCallback)((()=>{const e=i.Z.get(s);e&&(d(e.scrollTop),p(e.scrollLeft))}),[s]),h=(0,n.useCallback)((e=>{a.current=e,r&&r(e)}),[r]);return(0,n.useEffect)((()=>{const e=i.Z.get(s);return e&&(l(!0),t&&(d(e.scrollTop),p(e.scrollLeft))),()=>{const e=a.current;a.current=null,e&&(e.scrollTop||e.scrollLeft)?i.Z.set(s,e):i.Z.remove(s)}}),[t,s]),(0,n.useEffect)((()=>{(c||u)&&(l(!1),d(void 0),p(void 0))}),[u,c]),{isWaitingToRestoreScrollPosition:o,scrollRestoreProps:o?{targetScrollTop:c,targetScrollLeft:u,smoothScroll:!1,onScrollPositionChange:h}:{onScrollPositionChange:h},onScrollPositionReady:m}}},62286:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(94184),i=r.n(n),s=r(67294),a=r(73788),o=r(93545);const l={spinner:"Spinner-spinner-Q4B7Qw spin-spin-H8VRGl",tiny:"Spinner-tiny-RnnyAv",small:"Spinner-small-vM7K9W",medium:"Spinner-medium-kbQH5J",large:"Spinner-large-l5wVYN"};function c({className:e=l.spinner,size:t=o.Z.Medium}){return s.createElement("div",{"aria-label":(0,a.Z)("Loading"),className:i()(e,l[t])})}},20622:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=(e=>(e.Up="up",e.Right="right",e.Down="down",e.Left="left",e))(n||{});const i=n},83700:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=(e=>(e.Default="default",e.Primary="primary",e.Success="success",e.Danger="danger",e))(n||{});const i=n},93545:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=(e=>(e.Tiny="tiny",e.Small="small",e.Medium="medium",e.Large="large",e))(n||{});const i=n},20222:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}},34219:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(235);const s=(0,r(33434).Z)((function(e){return(0,n.P1)(i.Z,(t=>t[e]))}))},15058:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(13076);const s=(0,r(33434).Z)((function(e){return(0,n.P1)(i.Z,(t=>!!t[e]))}))},52746:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(45186);const s=(0,n.P1)(i.Z,(e=>e.isSignedIn))},39008:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(5910);const s=(0,n.P1)(i.Z,(({invites:e})=>e.filter((e=>e.home))))},1208:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(5910);const s=(0,n.P1)(i.Z,(({sentInvites:e})=>e.filter((e=>e.home))))},45186:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=e=>e.user},783:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(96994);const s=(0,n.P1)(i.Z,(e=>e.core.user))},5910:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(22222),i=r(77072),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=(0,n.P1)(i.Z,(e=>((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({},e.desktop)))},78535:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(85229),i=r(32601),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e};const u=(0,n.oM)({name:"user",initialState:{isPopulated:!1,isPending:!1,isUpdating:!1,error:null,details:{id:-1,uuid:"",thumb:"",friendlyName:"",email:"",username:"",anonymous:!0,isFullUser:!1},viewStateSync:{consent:null,error:null,isPending:!1,isPopulated:!1}},reducers:{fetchUserDetails(e,t){(0,i.er)(e)},fetchUserDetailsSucceeded(e,{payload:t}){(0,i.vv)(e),e.details=t.details},fetchUserDetailsFailed(e,{payload:t}){(0,i.VQ)(e,t.error)},fetchViewStateSync(e,t){(0,i.er)(e.viewStateSync)},fetchViewStateSucceeded(e,{payload:t}){(0,i.vv)(e.viewStateSync),e.viewStateSync.consent=t.consent},fetchViewStateSyncFailed(e,{payload:t}){(0,i.VQ)(e.viewStateSync,t.error)},updateUserDetails(e,t){e.isUpdating=!0},updateUserDetailsSucceeded(e,{payload:t}){e.isUpdating=!1,e.details=d(d({},e.details),t.details)},updateUserDetailsFailed(e,{payload:t}){(0,i.VQ)(e,t.error),e.isUpdating=!1},updateViewStateSyncConsent(e,t){e.isUpdating=!0},updateViewStateSyncSucceeded(e,{payload:t}){e.viewStateSync.consent=t.consent,e.isUpdating=!1},clearError(e,t){e.error=null},showViewStateSyncPrompt(e,{payload:t}){e.showViewStateSyncPrompt=t.viewStateSyncConfig},languageChanged(){}}})},90696:(e,t,r)=>{"use strict";r.d(t,{Ik:()=>n,dK:()=>i,ZJ:()=>s});var n=(e=>(e.Pending="pending",e.Locked="locked",e.Unlocked="unlocked",e))(n||{}),i=(e=>(e.Empty="",e.Unsubscribed="unsubscribed",e.Active="active",e.Error="error",e.Removed="removed",e))(i||{}),s=(e=>(e.Default="default",e.LearnMore="learnMore",e))(s||{})},48964:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(85511),i=r(73788);function s(e){var t,r;if(!e)return"";if(null==(r=null==(t=null==e?void 0:e.data)?void 0:t.errors)?void 0:r[0]){const t=(0,n.Z)(e.data.errors[0]);if(t)return t}return e.message?e.message:(0,i.Z)("Something went wrong. Please try again in a few minutes.")}},14685:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n=["free"];function i(e,t){if(!t)return!0;const r=e.find((e=>e.id===t));return!(!r||r.subscriptionType&&n.includes(r.subscriptionType))}},40877:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(85229),i=r(74226),s=r(25004),a=r(43017);const o=(0,n.oM)({name:"activity",initialState:{staleMetadataItems:[],staleProfileHubs:[]},reducers:{markProfileHubPopulated(e,{payload:t}){e.staleProfileHubs=e.staleProfileHubs.filter((e=>e!==t.hub))}},extraReducers:e=>{e.addCase(s.Z.actions.playedStatusUpdateSucceeded,((e,{payload:t})=>{t.guid&&!i.wB(t.provider.identifier,[i.IS])&&e.staleMetadataItems.push(t.guid),e.staleProfileHubs.push(a.z.WatchHistory),t.played&&e.staleProfileHubs.push(a.z.Watchlist)})),e.addCase(s.Z.actions.fetchSucceeded,((e,{payload:t})=>{t.guid&&i.wB(t.providerIdentifier,[i.IS])&&(e.staleMetadataItems=e.staleMetadataItems.filter((e=>e!==t.guid)))})),e.addCase(s.Z.actions.toggleWatchlistSucceeded,(e=>{e.staleProfileHubs.push(a.z.Watchlist)}))}})},54959:(e,t,r)=>{"use strict";r.d(t,{T8:()=>n,qE:()=>i,Hm:()=>s,NG:()=>a});var n=(e=>(e.Watchlist="ActivityWatchlist",e.MetadataMessage="ActivityMetadataMessage",e.MetadataReport="ActivityMetadataReport",e.Rating="ActivityRating",e.WatchHistory="ActivityWatchHistory",e))(n||{}),i=(e=>(e[e.Small=273]="Small",e[e.Medium=341]="Medium",e))(i||{}),s=(e=>(e.Poster="portrait",e.Landscape="landscape",e))(s||{});const a={portrait:{width:128,height:192},landscape:{width:220,height:124}}},91308:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(28216),s=r(37703),a=r(73788),o=r(783),l=r(94442),c=r(99981),d=r(35419);function u({item:e,children:t,removeActivity:r}){const u=(0,s.b)(),[p,m]=(0,d.G8)(),{details:{uuid:h}}=(0,i.v9)(o.Z),g=(0,n.useCallback)((()=>{(null==e?void 0:e.id)&&p({input:{id:null==e?void 0:e.id}})}),[null==e?void 0:e.id,p]),y=(0,n.useCallback)((()=>{(null==e?void 0:e.id)&&(null==r||r(e.id))}),[e.id,r]),v=(0,n.useMemo)((()=>h===(null==e?void 0:e.user.id)?{removeActivity:{callback:u.onOpen,title:(0,a.Z)("Hide Activity")}}:void 0),[u.onOpen,null==e?void 0:e.user.id,h]);return n.createElement(l.ZP,{metadataActions:v},n.createElement(c.Z,{body:(0,a.Z)("This activity will no longer appear in your Activity feed or Profile unless you repeat the activity"),error:m.error,isRemoving:m.isLoading,modalState:u,title:(0,a.Z)("Hide Activity"),onRemoveActivity:g,onSuccess:y}),t)}},94442:(e,t,r)=>{"use strict";r.d(t,{KY:()=>s,ZP:()=>a});var n=r(67294);const i=(0,n.createContext)([void 0,void 0]);function s(){return(0,n.useContext)(i)}function a({metadataActions:e,activity:t,children:r}){const s=(0,n.useMemo)((()=>[t,e]),[t,e]);return n.createElement(i.Provider,{value:s},r)}},17342:(e,t,r)=>{"use strict";r.d(t,{Z:()=>me});var n=r(67294),i=r(23245),s=r(50439),a=r(62286),o=r(99),l=r(54320),c=r(56792),d=r(42218),u=r(64154),p=r(52673),m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var y=r(16975),v=r(91308),f=Object.defineProperty,b=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e};function C(e){var t=e,{item:r,children:i,onCellHeightChange:s,removeActivity:a}=t,o=((e,t)=>{var r={};for(var n in e)P.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&S)for(var n of S(e))t.indexOf(n)<0&&I.call(e,n)&&(r[n]=e[n]);return r})(t,["item","children","onCellHeightChange","removeActivity"]);const l=(0,y.Z)(o),[c,d]=function(e){var t=e,{onCellHeightChange:r}=t,i=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(t,["onCellHeightChange"]);const s=(0,n.useRef)(null),[a,o]=(0,n.useState)(!1),l=(0,n.useCallback)((()=>{var e,t;o(!0),r(i.cellIndex,null!=(t=null==(e=s.current)?void 0:e.children[0].clientHeight)?t:i.cellHeight)}),[i.cellHeight,i.cellIndex,r]);return(0,n.useEffect)((()=>{s.current&&l()}),[l]),(0,p.I)({target:s.current,callback:l}),[s,a]}(w({onCellHeightChange:s},o));return r?n.createElement("div",{key:o.key,ref:c,style:(u=w({},l.style),f={visibility:d?"visible":"hidden"},b(u,Z(f)))},n.createElement(v.Z,{item:r,removeActivity:a},i)):null;var u,f}var M=r(21056),D=r(54959),O=r(92304),T=r(74517),x=r(18890);var A=Object.defineProperty,k=Object.defineProperties,N=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,V=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function U({activities:e,isReplacing:t,fetchMore:r,removeActivity:i}){const[s,p]=(0,n.useState)(),[m,h]=(0,n.useState)([]),g=(0,M.Z)();(0,n.useEffect)((()=>{t&&void 0===s&&p(0)}),[e,t,s]),(0,n.useEffect)((()=>{!t&&e.length>0&&void 0!==s&&p(void 0)}),[e.length,t,s]);const y=(0,n.useCallback)(((e,t)=>{h((r=>(r[e]=t,[...r])))}),[]),v=(0,n.useCallback)((t=>{t.visibleEndIndex===e.length-1&&void 0===s&&r({size:24,startIndex:e.length})}),[e.length,r,s]),f=(0,n.useMemo)((()=>function(e){const{innerPaddingBottom:t=0,getEstimatedCellHeight:r,cellHeights:n}=e;let i,s;function a(e){const t=s.findIndex((t=>t>e)),r=s.length-1;return-1===t?r:Math.min(Math.max(0,t-1),r)}return{getListMeasurements(e,a){const{viewportWidth:o,viewportHeight:l}=e,c=o;s=[],i=[];for(let e=0;e<a;e++)i[e]=(n[e]||r(e))+t;let d=0;return i.forEach((e=>{s.push(d),d+=e})),{width:c,height:i.reduce(((e,t)=>e+t),0),outerPaddingTop:0,outerPaddingRight:0,outerPaddingBottom:0,outerPaddingLeft:0,listTop:e.listTop,listLeft:e.listLeft,viewportWidth:o,viewportHeight:l}},getPositionForIndex(e,t){const{width:r}=t;return{column:1,row:e,cellX:0,cellY:(null==s?void 0:s[e])||0,cellWidth:r,cellHeight:(null==i?void 0:i[e])||0}},getRangesForPosition(e,t,r,n){const{viewportHeight:i}=n,s=e+i-1,o=a(e),l=a(e),d=a(s),u=a(s);return{visibleStartIndex:(0,c.Z)(l,r),visibleEndIndex:(0,c.Z)(d,r),renderStartIndex:(0,c.Z)(o,r),renderEndIndex:(0,c.Z)(u,r)}}}}({getEstimatedCellHeight:t=>function(e,t){let r=0,n=0;if(t)n=128;else{const{type:t}=(0,O.ZP)(e);switch(t){case D.Hm.Landscape:n=D.qE.Small;break;case D.Hm.Poster:n=D.qE.Medium}}return(0,T.Z)(e)&&(r=e.message.length/50*16+60*(t?2:1)+(e.otherRecipients.length?40:0)),Math.max(r,n)}(e[t],g),cellHeights:m,innerPaddingBottom:16})),[e,m,g]),b=(0,n.useCallback)((e=>{const{item:t}=e;return n.createElement(C,(r=((e,t)=>{for(var r in t||(t={}))L.call(t,r)&&V(e,r,t[r]);if(R)for(var r of R(t))j.call(t,r)&&V(e,r,t[r]);return e})({onCellHeightChange:y},e),k(r,N({removeActivity:i}))),(0,x.Z)(t));var r}),[y,i]);return 0===e.length?n.createElement(d.Z,null,n.createElement(o.k,{alignItems:l.xM.Center,height:"100%",justifyContent:l.xM.Center},n.createElement(a.Z,null))):n.createElement(d.Z,{className:"ActivityFeed-feed-ODFjad"},n.createElement(u.Z,{cellComponentFactory:b,className:"ActivityFeed-scroller-L0u7Bj VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko",items:e,keyPropName:"id",layout:f,scrollerKey:"activityFeed",targetScrollIndex:s,totalSize:e.length,onListUpdate:v}))}var F=r(28216),B=r(1802),_=r(19806),z=r(84739),H=r(27050),W=r(64188),G=r(78386),Q=r(56422),$=r(73788),K=r(47240),q=r(26537),Y=r(181),X=r(84384),J=r(42149),ee=r(39848);function te(e){return n.createElement("div",{className:"EmptyActivityPage-icon-ExXRCy"},n.createElement(X.Z,{icon:e.icon}))}function re(){const e=(0,F.I0)(),t=(0,F.v9)(Y.Z),{allFriends:{friends:r}}=(0,F.v9)(q.Z);return(0,n.useEffect)((()=>{e(K.Z.actions.fetchAllFriends({server:t}))}),[e,t]),n.createElement(J.Z,{className:"EmptyActivityPage-page-Fkul47"},n.createElement(W.K,{align:l.xM.Center,gap:l.$u.M},n.createElement(G.X,null,n.createElement(te,{icon:_.B}),n.createElement(te,{icon:z.N}),n.createElement(te,{icon:H.G})),n.createElement(W.K,{align:l.xM.Center,gap:l.$u.S,width:"35%"},n.createElement(Q.x,{level:Q.N.Heading3},(0,$.Z)("Welcome to your Plex Activity Feed")),n.createElement(Q.x,{level:Q.N.Body1},(0,$.Z)("Add some friends and you'll see items they watch, rate, or add to their watchlist here."))),n.createElement(ee.Z,{friends:r,server:t},n.createElement(B.zx,{color:l.Il.Accent},(0,$.Z)("Invite friends to Plex")))))}var ne=r(4681);function ie({onClick:e}){return n.createElement(ne.Z,{className:"RecentActivityNotification-popup-jnkqOe",onPress:e},n.createElement(G.X,{align:l.xM.Center,gap:l.$u.XS,height:"100%",verticalAlign:l.xM.Center,width:"100%"},n.createElement(Q.x,{level:Q.N.Body1},(0,$.Z)("New activity"))))}var se=r(69151),ae=r(13876),oe=r(22626);function le(e){var t;return null!=(t=null==e?void 0:e.activityFeed.nodes)?t:[]}const ce=e=>e.activityFeed.pageInfo.hasNextPage,de=e=>e.activityFeed.pageInfo.endCursor;var ue=r(83507),pe=r(8718);function me({id:e,serverURL:t}){const{data:r,isLoading:o,hasNewer:l,isReplacing:c,fetchMore:d,fetchNewer:u,remove:p}=function(e,t,r=24){const{isUpdated:i,data:s,isLoading:a,error:o,totalSize:l,fetchMore:c,remove:d,replaceItems:u,isRefetching:p}=(0,se.Z)({metadataID:e,serverURL:t},"activityFeed",oe.lJ,le,ce,de,r),m=(0,ae.Z)(!i,6e4),[h,g]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1),{data:f}=(0,oe.Ru)({first:r,metadataID:e,skipUserState:!!e,serverURL:t},{pollingInterval:6e4,skip:m||p});(0,n.useEffect)((()=>{var e,t;const r=le(f);r.length>0&&(null==(e=r[0])?void 0:e.id)!==(null==(t=null==s?void 0:s[0])?void 0:t.id)&&(p||g(!0))}),[s,f,p]),(0,n.useEffect)((()=>{(null==s?void 0:s.length)&&y&&v(!1)}),[y,null==s?void 0:s.length]);const b=(0,n.useCallback)((()=>{v(!0),u(le(f)),g(!1)}),[f,u]);return{data:s,isLoading:a,error:o,hasNewer:h,totalSize:l,isReplacing:y,fetchMore:c,remove:d,fetchNewer:b}}(e,t),m=(0,M.Z)(),h=!(0,ue.Z)()&&!m,g=(0,i.Z)(null==r?void 0:r.length);return(0,n.useEffect)((()=>{m&&1===g&&!(null==r?void 0:r.length)&&(0,pe.Z)("activity")}),[m,r,g]),!r||o?n.createElement(s.Z,null,n.createElement(a.Z,null)):n.createElement(n.Fragment,null,l?n.createElement(ie,{onClick:u}):null,r.length>0?n.createElement(U,{activities:r,fetchMore:d,isReplacing:c,removeActivity:p}):null,0===r.length&&!o&&h?n.createElement(re,null):null)}},27568:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(94184),i=r.n(n),s=r(67294),a=r(99),o=r(94788);const l={avatar:"AvatarGroup-avatar-xJBRfR",mask:"AvatarGroup-mask-qXdkmi",image:"AvatarGroup-image-b8LGjW"};function c({avatars:e,isHovered:t,avatarSize:r=32,limit:n=3}){return s.createElement(s.Fragment,null,e.length>0?s.createElement(a.k,{shrink:!1},e.slice(0,n).map((e=>s.createElement("div",{key:e,className:i()(l.avatar,t&&l.hovered)},t?s.createElement("div",{className:l.mask}):null,s.createElement(o.Z,{className:l.image,durationMilliseconds:0,height:r,src:e,width:r}))))):null)}},34163:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),i=r(78386),s=r(56422),a=r(54320),o=r(4820),l=r(4681),c=r(27568);var d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function v({onPress:e,avatars:t,label:r,isDisabled:d,numberOfLines:v,className:f="SocialActivityButton-socialButton-JOSYdi Link-link-vSsQW1"}){const[b,Z]=(0,o.Z)();return n.createElement(l.Z,(S=((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e})({},Z),u(S,p({className:f,isDisabled:d,onPress:e}))),n.createElement(i.X,{gap:a.$u.XS,verticalAlign:a.xM.Center},n.createElement("div",{className:"SocialActivityButton-avatars-tp5klQ"},n.createElement(c.Z,{avatars:t,isHovered:!!b})),n.createElement(s.x,{level:s.N.Body3,numberOfLines:v,testID:"activityByText"},r)));var S}},21056:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5977),i=r(6459);function s(){const e=(0,n.TH)();return!!(0,n.LX)(e.pathname,i.Z.prePlayActivityFeed)&&!(0,n.LX)(e.pathname,i.Z.activityCard)}},83507:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5977),i=r(6459);function s(){const e=(0,n.TH)();return!!(0,n.LX)(e.pathname,i.Z.activityCard)}},22626:(e,t,r)=>{"use strict";r.d(t,{MQ:()=>s,Ru:()=>d,lJ:()=>u,sX:()=>p,Yu:()=>h});var n=r(95522);const i="\n    fragment userFields on User {\n  id\n  username\n  displayName\n  avatar\n}\n    ",s="\n    fragment itemFields on MetadataItem {\n  id\n  images {\n    coverArt\n    coverPoster\n    thumbnail\n    art\n  }\n  userState @skip(if: $skipUserState) {\n    viewCount\n    viewedLeafCount\n    watchlistedAt\n  }\n  title\n  key\n  tagline\n  type\n  index\n  publicPagesURL\n  parent {\n    ...parentFields\n  }\n  grandparent {\n    ...parentFields\n  }\n  publishedAt\n  leafCount\n  year\n  childCount\n}\n    \n    fragment parentFields on MetadataItem {\n  index\n  title\n  publishedAt\n  key\n  images {\n    coverArt\n    coverPoster\n    thumbnail\n    art\n  }\n}\n    ",a=`\n    query GetActivityFeed($first: PaginationInt!, $after: String, $metadataID: ID, $skipUserState: Boolean = false, $serverURL: String) {\n  activityFeed(\n    first: $first\n    after: $after\n    metadataID: $metadataID\n    serverURL: $serverURL\n  ) {\n    nodes {\n      __typename\n      id\n      date\n      item {\n        __typename\n        ... on MetadataItem {\n          ...itemFields\n        }\n        ... on ServerMetadataItem {\n          url\n        }\n      }\n      user {\n        ...userFields\n      }\n      ... on ActivityMetadataMessage {\n        message\n        otherRecipients {\n          ...userFields\n        }\n      }\n      ... on ActivityMetadataReport {\n        message\n        otherRecipients {\n          ...userFields\n        }\n      }\n      ... on ActivityRating {\n        rating\n      }\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n    ${s}\n${i}`,o=`\n    query GetActivityByID($id: ID!, $skipUserState: Boolean = false) {\n  activityByID(id: $id) {\n    __typename\n    id\n    date\n    item {\n      __typename\n      ... on MetadataItem {\n        ...itemFields\n      }\n      ... on ServerMetadataItem {\n        url\n      }\n    }\n    user {\n      ...userFields\n    }\n    ... on ActivityMetadataMessage {\n      message\n      otherRecipients {\n        ...userFields\n      }\n    }\n    ... on ActivityMetadataReport {\n      message\n      otherRecipients {\n        ...userFields\n      }\n    }\n    ... on ActivityRating {\n      rating\n    }\n  }\n}\n    ${s}\n${i}`,l=`\n    query getActivityMentions($metadataID: ID!, $serverURL: String) {\n  activityMentions(metadataID: $metadataID, serverURL: $serverURL) {\n    recentUsers {\n      ...userFields\n    }\n    uniqueUsersCount\n  }\n}\n    ${i}`,c=n.h.injectEndpoints({endpoints:e=>({GetActivityFeed:e.query({query:e=>({document:a,variables:e})}),GetActivityByID:e.query({query:e=>({document:o,variables:e})}),getActivityMentions:e.query({query:e=>({document:l,variables:e})})})}),{useGetActivityFeedQuery:d,useLazyGetActivityFeedQuery:u,useGetActivityByIDQuery:p,useLazyGetActivityByIDQuery:m,useGetActivityMentionsQuery:h,useLazyGetActivityMentionsQuery:g}=c},47531:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(18585);const s=function(e){return(0,n.P1)(i.Z,(t=>t.activity.staleProfileHubs.includes(e)))}},18890:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ze});var n=r(67294),i=r(54959),s=r(10462),a=r(12644),o=r(99),l=r(54320),c=r(28216),d=r(74226),u=r(47276),p=r(9278),m=r(44811),h=r(61737);function g({children:e,server:t,provider:r}){const{providerIdentifier:i}=(0,h.Z)(),s=(0,c.v9)(p.Z);let a=i;return d.yv(a)&&s&&(a=null==s?void 0:s.identifier),n.createElement(m.ZP,{machineIdentifier:(null==t?void 0:t.machineIdentifier)||u.X,providerIdentifier:(null==r?void 0:r.identifier)||a},n.createElement("div",{className:"ActivityCard-card-QdH_ft"},e))}var y=r(78386),v=r(89995),f=r(23615),b=r(2358),Z=r(94788),S=r(21056);function P({imageSrc:e,imageType:t,metadataItem:r,children:s}){const a=(0,S.Z)(),o=(0,b.Z)(r,"key"),c=t===i.Hm.Landscape?l.mJ.Landscape:l.mJ.Portrait;return n.createElement("div",{className:"ActivityCardBody-body-T0Y7e8"},n.createElement(y.X,{gap:l.$u.M},a?null:n.createElement(v.W,{posterStyle:c,width:i.NG[t].width},n.createElement(Z.Z,{className:"ActivityCardBody-poster-uZDK9s",durationMilliseconds:0,height:i.NG[t].height,src:e,width:i.NG[t].width}),o?n.createElement(f.J,{href:o,posterStyle:c}):null),s))}var I=r(1802),E=r(19806),w=r(40651),C=r(86966),M=r(56422),D=r(86755),O=r(37703),T=r(74278),x=r(26759),A=r(73788),k=r(66012),N=r(99318),R=r(11294),L=r(25004),j=r(54675),V=r(82818);function U({children:e,title:t,description:r,isWaiting:i,modalState:s,onSuccess:a}){const o=(0,n.useCallback)((()=>{a()}),[a]);return n.createElement(V.u_,{isOpen:s.isOpen,onOpenChange:s.onOpenChange},n.createElement(V.iq,null,e),n.createElement(V.hz,{dismissLabel:(0,A.Z)("Close Modal"),header:t,size:l.$u.S,onClose:s.onClose},n.createElement(V.fe,null,n.createElement(M.x,{level:M.N.Body1},r)),n.createElement(V.mz,null,n.createElement(V.w2,null,n.createElement(I.zx,{onPress:s.onClose},(0,A.Z)("No")),n.createElement(I.zx,{color:l.Il.Accent,isWaiting:i,onPress:o},(0,A.Z)("Yes"))))))}var F=r(22111),B=r(37903);const _=({actions:e})=>{const t=(0,O.b)(),r=(0,n.useCallback)((()=>{var t;null==(t=e.removeActivity)||t.callback()}),[e.removeActivity]);return n.createElement(B.v2,{isOpen:t.isOpen,onOpenChange:t.onOpenChange},n.createElement(B.bF,null,n.createElement(I.hU,{"aria-label":(0,A.Z)("More actions"),color:"transparent",icon:F.S,iconSize:l.$u.L,size:l.$u.XS,testID:"moreActionsButton",type:"button"})),n.createElement(B.Dv,null,e.removeActivity?n.createElement(B.j2,{onPress:r},e.removeActivity.title):null))};var z=r(94442),H=r(22222),W=r(18585);const G=(0,H.P1)(W.Z,(e=>e.activity.staleMetadataItems));var Q=r(94673),$=r(48321);function K({metadataItem:e,isDisabled:t,isReported:r}){const i=(0,c.I0)(),d=(0,c.v9)(T.Z),u=(0,c.v9)(p.Z),m=(0,O.b)(),h=(0,O.b)(),g=(0,O.b)(),v=(0,c.v9)(x.Z),f=(0,c.v9)((q=e.guid,(0,H.P1)(G,(e=>!!q&&e.includes(q))))),b=(0,k.Z)(e.sourceURI),Z=(0,$.Z)(b.isStale),S=(0,n.useRef)(),[P,V]=(0,n.useState)(!1),[,F]=(0,z.KY)(),B=(0,n.useMemo)((()=>(0,j.Z)({server:d,metadataItemState:b})),[d,b]),W=(0,n.useMemo)((()=>u&&(0,R.h$)({server:d,metadataItem:e,metadataItemState:b,provider:u,stableUser:v})),[d,e,b,u,v]),K=(0,n.useMemo)((()=>u&&(0,R.Ef)({server:d,metadataItem:e,metadataItemState:b,provider:u,stableUser:v})),[e,b,u,d,v]);var q;(0,n.useEffect)((()=>{(B||f)&&u&&!t&&i(L.Z.actions.fetchRequested({server:d,metadataItem:e,provider:u}))}),[i,t,f,e,u,d,B]);const Y=(0,n.useCallback)((()=>{u&&(V(!0),i(L.Z.actions.toggleWatchlistRequested({server:d,provider:u,stableUser:v,sourceURI:e.sourceURI,ratingKey:e.ratingKey,added:!K})))}),[i,K,e.ratingKey,e.sourceURI,u,d,v]),X=(0,n.useCallback)((()=>{u&&(V(!0),i(L.Z.actions.playedStatusUpdateRequested({server:d,provider:u,stableUser:v,sourceURI:e.sourceURI,ratingKey:e.ratingKey,guid:e.guid,played:!W})))}),[u,i,d,v,e.sourceURI,e.ratingKey,e.guid,W]),J=(0,n.useMemo)((()=>W?(0,A.Z)("Mark as Unplayed"):(0,A.Z)("Mark as Played")),[W]),ee=(0,n.useMemo)((()=>K?(0,A.Z)("Remove from Watchlist"):(0,A.Z)("Add to Watchlist")),[K]);(0,n.useEffect)((()=>{Z&&!b.isStale&&(V(!1),m.onClose(),h.onClose())}),[m,h,b.isStale,Z]);const te=(0,n.useCallback)((()=>{b.unviewedLeafCount||b.viewedLeafCount?(S.current=W?b.viewedLeafCount:b.unviewedLeafCount,(W?h:m).onOpen()):X()}),[m,h,W,b.unviewedLeafCount,b.viewedLeafCount,X]),re=(0,A.Z)("Share with Friends"),ne=e.type!==N.pG.Episode&&e.type!==N.pG.Season;return n.createElement("div",{className:"ActivityCardFooter-footer-TxzXSG"},n.createElement(o.k,{alignItems:l.xM.Center,height:"100%",justifyContent:l.xM.SpaceBetween,wrap:"nowrap"},n.createElement(y.X,{verticalAlign:l.xM.Center},r?null:n.createElement(n.Fragment,null,ne?n.createElement(D.u,{tooltip:n.createElement(M.x,{color:l.Il.Muted,level:M.N.Body3},ee)},n.createElement(I.hU,{"aria-label":ee,color:"transparent",icon:K?a.v:E.B,iconSize:l.$u.L,isDisabled:t||P,size:l.$u.XS,onPress:Y})):null,n.createElement(D.u,{tooltip:n.createElement(M.x,{color:l.Il.Muted,level:M.N.Body3},J)},n.createElement(I.hU,{"aria-label":J,color:"transparent",icon:W?s.d:w.x,iconSize:l.$u.L,isDisabled:t||P,size:l.$u.XS,style:ne?{padding:0,marginLeft:l.$u.XXS}:{},onPress:te})))),F?n.createElement(_,{actions:F}):n.createElement(Q.Z,{item:e,modalState:g},n.createElement(D.u,{tooltip:n.createElement(M.x,{color:l.Il.Muted,level:M.N.Body3},re)},n.createElement(I.hU,{"aria-label":re,color:"transparent",icon:C.y,iconSize:l.$u.L,isDisabled:t||!d.isConnected,size:l.$u.M,onPress:g.onOpen})))),n.createElement(U,{children:null,description:(0,A.Z)('Are you sure you want to mark {count} episodes in "{title}" as played?',{count:S.current,title:e.title}),isWaiting:P,modalState:m,title:(0,A.Z)("Mark as Played"),onSuccess:X}),n.createElement(U,{children:null,description:(0,A.Z)('Are you sure you want to mark {count} episodes in "{title}" as unplayed?',{count:S.current,title:e.title}),isWaiting:P,modalState:h,title:(0,A.Z)("Mark as Unplayed"),onSuccess:X}))}var q=r(42902),Y=r(64188),X=r(83073),J=r(41319),ee=r(35172),te=r(47240),re=r(26537);var ne=r(181),ie=r(83836),se=r(783);function ae({activity:e}){const{details:t}=(0,c.v9)(se.Z),r=t.uuid===e.user.id,s=e.user.displayName||e.user.username,a=(0,n.useMemo)((()=>{switch(e.__typename){case i.T8.MetadataMessage:return r?(0,A.Z)("You shared"):(0,A.Z)("{friendName} shared",{friendName:""});case i.T8.MetadataReport:return r?(0,A.Z)("You reported"):(0,A.Z)("{friendName} reported",{friendName:""});case i.T8.Rating:return r?(0,A.Z)("You rated"):(0,A.Z)("{friendName} rated",{friendName:""});case i.T8.WatchHistory:return r?(0,A.Z)("You watched"):(0,A.Z)("{friendName} watched",{friendName:""});case i.T8.Watchlist:return r?(0,A.Z)("You watchlisted"):(0,A.Z)("{friendName} watchlisted",{friendName:""});default:return""}}),[e.__typename,r]);return n.createElement(y.X,null,r?n.createElement(n.Fragment,null):n.createElement(M.x,{numberOfLines:1},s),a?n.createElement(M.x,{shrink:!1,title:a},n.createElement("span",{className:"ActivityHeaderTitle-preserveSpaces-onOxrJ"},a)):null)}var oe=r(83507),le=r(38849),ce=r(31281);function de({href:e,title:t}){return e?n.createElement(X.r,{href:e,title:t},t):n.createElement(n.Fragment,null,t)}function ue({metadataItem:e,activity:t}){var r;const i=(0,c.I0)(),[s,a]=(0,m.c9)(),o=(0,c.v9)(ne.Z),d=(0,b.Z)(e,"key"),u=(0,b.Z)(e,"parentKey"),p=(0,b.Z)(e,"grandparentKey"),{allFriends:{isPopulated:h,isPending:g,error:Z}}=(0,c.v9)(re.Z),P=(0,c.v9)((V=t.user.id,(0,H.P1)(re.Z,(e=>e.allFriends.friends.find((e=>e.uuid===V)))))),{details:I}=(0,c.v9)(se.Z),E=(0,S.Z)(),w=(0,oe.Z)(),C=t.user.username===I.username,O=C?I:P,{grandparentTitle:T,parentTitle:x,title:k,parentIndex:R,index:L,type:j}=e;var V;(0,n.useEffect)((()=>{h||g||Z||i(te.Z.actions.fetchAllFriends({server:o}))}),[i,Z,g,h,o]);const U=(0,n.useMemo)((()=>{if(!w&&s.isConnected&&a.identifier)return`${(0,le.Z)(s.machineIdentifier,a.identifier)}/${t.id}`}),[t.id,w,a.identifier,s.isConnected,s.machineIdentifier]),F=(0,n.useMemo)((()=>{if(!s.isConnected)return(0,A.Z)("An item on {serverName}",{serverName:s.friendlyName});const e=j===N.pG.Episode,t=j===N.pG.Season;if(e&&R&&L){const e=R,t=L;return n.createElement(n.Fragment,null,n.createElement(de,{href:p,title:T})," -"," ",n.createElement(de,{href:u,title:`S${e}`})," "," ",n.createElement(de,{href:d,title:`E${t}`}))}return t&&L?n.createElement(n.Fragment,null,n.createElement(de,{href:u,title:x})," -"," ",n.createElement(de,{href:d,title:`S${L}`})):n.createElement(de,{href:d,title:k})}),[p,T,L,k,R,u,x,d,s.friendlyName,s.isConnected,j]),B=(0,n.useMemo)((()=>P||C?P?`${(0,ce.Z)("friendProfile",{id:P.id})}`:(0,ce.Z)("profile"):null),[P,C]),_=(0,J.Z)(new Date(t.date),"LLLL, dd yyyy");return n.createElement("div",{className:"ActivityCardHeader-header-Ff9Qps"},n.createElement(y.X,{align:l.xM.SpaceBetween,gap:l.$u.S,verticalAlign:E?l.xM.Center:l.xM.Top,width:"100%"},n.createElement(y.X,{gap:l.$u.S,verticalAlign:l.xM.Center},n.createElement(v.W,{posterStyle:l.mJ.Circle,width:40},n.createElement(ie.Z,{server:o,size:40,url:null!=(r=null==O?void 0:O.thumb)?r:""}),B?n.createElement(f.J,{href:B,posterStyle:l.mJ.Circle}):null),n.createElement(Y.K,null,n.createElement(M.x,{level:M.N.Heading6,numberOfLines:1},U?n.createElement(X.r,{href:U},n.createElement(ae,{activity:t})):n.createElement(ae,{activity:t})),E?null:n.createElement(M.x,{color:l.Il.Muted,level:M.N.Heading7,numberOfLines:1},F))),n.createElement(D.u,{tooltip:n.createElement(M.x,{color:l.Il.Muted,level:M.N.Body3},_)},n.createElement("span",{"aria-label":_,className:"ActivityCardHeader-date-my1vg4"},n.createElement(de,{href:U,title:(0,ee.Z)((0,q.Z)(new Date(t.date)),!1)})))))}var pe=r(74517);function me({metadataItem:e,activity:t}){const r=(0,n.useMemo)((()=>e.type===N.pG.Episode&&(!(0,pe.Z)(t)||t.message.length>0)),[t,e.type]),i=e.parentIndex?`S${e.parentIndex}  `:"",s=e.index?`E${e.index} - `:"";return n.createElement(n.Fragment,null,r?n.createElement(o.k,{alignItems:"flex-end",justifyContent:l.xM.Center},n.createElement(M.x,{color:l.Il.Muted,level:M.N.Body3},`${i}${s}${e.title}`)):null)}var he=r(53782),ge=r(36544),ye=r(11833);function ve(e){const[,t]=(0,m.c9)(),r=(0,c.v9)(p.Z);let i=t.identifier;return d.yv(i)&&r&&(i=null==r?void 0:r.identifier),(0,n.useMemo)((()=>(0,ge.O)(e.item)?he.Z:(0,ye.Z)(e.item,i)),[e.item,i])}var fe=r(92304);function be({activity:e}){const t=(0,S.Z)(),r=(0,oe.Z)(),c=t&&!r,{src:d,type:u}=(0,n.useMemo)((()=>(0,fe.ZP)(e)),[e]),p=(0,n.useMemo)((()=>{switch(e.__typename){case i.T8.WatchHistory:return s.d;case i.T8.Watchlist:return a.v;default:return null}}),[e.__typename]),m=ve(e);return(0,ge.O)(e.item)?null:n.createElement(g,null,n.createElement(ue,{activity:e,metadataItem:m}),n.createElement(P,{imageSrc:d,imageType:u,metadataItem:m},n.createElement(o.k,{alignItems:l.xM.Center,gap:l.$u.S,justifyContent:l.xM.Center,orientation:l.i5.Vertical,width:"100%"},p?n.createElement(o.k,{alignItems:l.xM.Center,height:"100%"},n.createElement(p,{size:c?l.$u.XXL:l.$u.XXXL})):null,n.createElement(me,{activity:e,metadataItem:m}))),n.createElement(K,{metadataItem:m}))}var Ze=r(10033),Se=r(94184),Pe=r.n(Se);function Ie({message:e,title:t}){const r=e||t,i=r.length<=100;return n.createElement("div",{className:Pe()("ActivityMetadataText-container-WcomEb",i&&"ActivityMetadataText-center-oaUQ8U")},n.createElement(o.k,{alignItems:l.xM.Center,grow:!0,height:i?"auto":"100%",justifyContent:l.xM.Center,orientation:l.i5.Vertical},n.createElement(M.x,{level:i?M.N.Heading4:M.N.Body1},r)))}var Ee=r(34163),we=r(55509);function Ce(e,t,r,n){var i,s,a;const o=t.displayName||t.username;return 0===r.length?e.type===we.dX.Season?(0,A.Z)("{name} shared {season} of {item} with you.",{name:o,season:e.title,item:null==(i=e.parent)?void 0:i.title}):(0,A.Z)("{name} shared {item} with you.",{name:o,item:e.title}):n?e.type===we.dX.Season?(0,A.Z)("You shared {season} of {item}.",{season:e.title,item:null==(s=e.parent)?void 0:s.title}):(0,A.Z)("You shared {item}.",{item:e.title}):e.type===we.dX.Season?(0,A.Z)("{name} shared {season} of {item}.",{name:o,season:e.title,item:null==(a=e.parent)?void 0:a.title}):(0,A.Z)("{name} shared {item}.",{name:o,item:e.title})}function Me(e){if(!e.length)return(0,A.Z)("Shared with you");const t=e[0].displayName||e[0].username;return 1===e.length?(0,A.Z)("Shared with {firstRecipient}",{firstRecipient:t}):(0,A.Z)("Shared with {firstRecipient} and {name}",{firstRecipient:t,name:e.slice(1).map((({displayName:e,username:t})=>e||t)).join(", ")})}function De(e,t){const r=e.length;if(t){const t=e[0].displayName||e[0].username;return 1===r?(0,A.Z)("Shared with {other}",{other:t}):2===r?(0,A.Z)("Shared with {firstRecipient} and {count} other",{count:r-1,firstRecipient:t}):(0,A.Z)("Shared with {firstRecipient} and {count} others",{count:r-1,firstRecipient:t})}return r?1===r?(0,A.Z)("Shared with you and 1 other"):(0,A.Z)("Shared with you and {count} others",{count:r}):(0,A.Z)("Shared with you")}function Oe({activity:e}){const t=(0,c.I0)(),[r,i]=(0,m.c9)(),s=(0,oe.Z)(),a=(0,S.Z)(),{details:{uuid:d}}=(0,c.v9)(se.Z),u=d===e.user.id,p=(0,n.useCallback)((()=>{t((0,Ze.c4)({pathname:`${(0,le.Z)(r.machineIdentifier,i.identifier)}/${e.id}`,replace:!1}))}),[e.id,t,i.identifier,r.machineIdentifier]),{src:h,type:y}=(0,n.useMemo)((()=>(0,fe.ZP)(e)),[e]),v=(0,n.useMemo)((()=>e.otherRecipients.map((e=>e.avatar)).flatMap((e=>e||[]))),[e.otherRecipients]),f=ve(e),b=!s&&!a;return n.createElement(g,null,n.createElement(ue,{activity:e,metadataItem:f}),n.createElement(P,{imageSrc:h,imageType:y,metadataItem:f},n.createElement(o.k,{gap:l.$u.XS,orientation:l.i5.Vertical,width:"100%"},n.createElement(Ie,{message:e.message,title:Ce(e.item,e.user,e.otherRecipients,u)}),n.createElement(me,{activity:e,metadataItem:f}),v.length>0?n.createElement(Ee.Z,{avatars:v,isDisabled:!b,label:b?De(e.otherRecipients,u):Me(e.otherRecipients),numberOfLines:b?1:void 0,onPress:p}):null)),n.createElement(K,{metadataItem:f}))}var Te=r(41801);function xe({activity:e}){const{src:t,type:r}=(0,n.useMemo)((()=>(0,fe.ZP)(e)),[e]),i=ve(e);return n.createElement(g,null,n.createElement(ue,{activity:e,metadataItem:i}),n.createElement(P,{imageSrc:t,imageType:r,metadataItem:i},n.createElement(o.k,{alignItems:l.xM.Center,gap:l.$u.S,justifyContent:l.xM.Center,orientation:l.i5.Vertical,width:"100%"},n.createElement(o.k,{alignItems:l.xM.Center,height:"100%",justifyContent:l.xM.Center},n.createElement(Te.Z,{iconSize:l.$u.XL,value:e.rating})),n.createElement(me,{activity:e,metadataItem:i}))),n.createElement(K,{metadataItem:i}))}var Ae=r(26400),ke=r(7256),Ne=r(8089),Re=r(23642),Le=r(25984),je=r(51612),Ve=r(64341),Ue=r(65714),Fe=r(9171),Be=r(53072);function _e({activity:e}){const t=(0,c.I0)(),[r]=(0,n.useState)((0,Ne.Z)(e.item.url)),{item:s,error:a,isPopulated:d}=(0,c.v9)((0,je.Z)(r.key)),u=(0,c.v9)((0,Be.Z)(r.serverIdentifier)),p=(0,c.v9)((0,Ue.Z)(r.serverIdentifier,r.providerIdentifier)),m=(0,Fe.Z)({width:128,height:196,server:u,provider:p,url:(0,Ve.Z)(s,{displayImageType:Re.IY.CoverPoster})});(0,n.useEffect)((()=>{r.isServer&&t(Le.Z.actions.fetchMetadataItem({server:u,key:r.key,provider:p}))}),[t,r,p,u]);const h=(0,n.useMemo)((()=>{const t=e.user.displayName||e.user.username;return s.type===N.pG.Season?(0,A.Z)("{name} reported {season} of {item} on {server}",{name:t,season:s.title,item:s.parentTitle,server:u.friendlyName}):(0,A.Z)("{name} reported {item} on {server}",{name:t,item:s.title,server:u.friendlyName})}),[e.user.displayName,e.user.username,s.parentTitle,s.title,s.type,u.friendlyName]);return n.createElement(g,{provider:p,server:u},n.createElement(ue,{activity:e,metadataItem:s}),n.createElement(P,{imageSrc:null!=m?m:"",imageType:i.Hm.Poster,metadataItem:s},d||a||!u.isConnected?null:n.createElement(o.k,{alignItems:l.xM.Center,justifyContent:l.xM.Center,width:"100%"},n.createElement(ke.$,null)),a||!u.isConnected?n.createElement(o.k,{alignItems:l.xM.Center,gap:l.$u.S,justifyContent:l.xM.Center,orientation:l.i5.Vertical,width:"100%"},e.message?n.createElement(Ie,{message:e.message,title:(0,A.Z)("{name} reported something to you.",{name:e.user.displayName||e.user.username})}):null,n.createElement(y.X,{gap:l.$u.XS,verticalAlign:l.xM.Center},n.createElement(Ae.F,{color:l.Il.Accent}),n.createElement(M.x,{color:l.Il.Muted},(0,A.Z)("There's an issue with the server")))):null,!a&&d&&u.isConnected?n.createElement(o.k,{orientation:l.i5.Vertical,width:"100%"},n.createElement(Ie,{message:e.message,title:h})):null),n.createElement(K,{isDisabled:!!a||!u.isConnected,isReported:!0,metadataItem:s}))}function ze(e){switch(null==e?void 0:e.__typename){case i.T8.MetadataMessage:return n.createElement(Oe,{activity:e});case i.T8.MetadataReport:return n.createElement(_e,{activity:e});case i.T8.Rating:return n.createElement(xe,{activity:e});case i.T8.Watchlist:case i.T8.WatchHistory:return n.createElement(be,{activity:e});default:return null}}},92304:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>a});var n=r(54959),i=r(36544),s=r(55509);function a(e){const{item:t}=e;if((0,i.O)(t))return{src:"",type:n.Hm.Poster};switch(t.type){case s.dX.Episode:return function(e){var t,r,i,s,a,o,l,c,d,u;return{src:null!=(u=(null==(t=e.images)?void 0:t.thumbnail)||(null==(i=null==(r=e.parent)?void 0:r.images)?void 0:i.art)||(null==(a=null==(s=e.parent)?void 0:s.images)?void 0:a.coverArt)||(null==(l=null==(o=e.grandparent)?void 0:o.images)?void 0:l.art)||(null==(d=null==(c=e.grandparent)?void 0:c.images)?void 0:d.coverArt))?u:"",type:n.Hm.Landscape}}(t);default:return function(e){var t,r,i,s,a;return(null==(t=e.images)?void 0:t.coverArt)?{src:e.images.coverArt,type:n.Hm.Landscape}:{src:null!=(a=null!=(s=null==(r=e.images)?void 0:r.coverPoster)?s:null==(i=e.images)?void 0:i.thumbnail)?a:"",type:n.Hm.Poster}}(t)}}},74517:(e,t,r)=>{"use strict";function n(e){return!!e&&"message"in e}r.d(t,{Z:()=>n})},36544:(e,t,r)=>{"use strict";function n(e){return!!e&&"url"in e}r.d(t,{O:()=>n})},11833:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(47276),i=r(35076),s=r(23642),a=r(99318),o=r(53782),l=r(55509),c=r(56723),d=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function v(e){var t,r,n,i,a,o,c,d,u,p,m,h,g,y,v,f,b,Z;const S=[];e.type===l.dX.Episode?S.push({alt:e.title,type:s.IY.CoverArt,url:null!=(p=(null==(t=e.images)?void 0:t.thumbnail)||(null==(n=null==(r=e.parent)?void 0:r.images)?void 0:n.art)||(null==(a=null==(i=e.parent)?void 0:i.images)?void 0:a.coverArt)||(null==(c=null==(o=e.grandparent)?void 0:o.images)?void 0:c.art)||(null==(u=null==(d=e.grandparent)?void 0:d.images)?void 0:u.coverArt))?p:""}):S.push({alt:e.title,type:s.IY.CoverArt,url:null!=(g=(null==(m=e.images)?void 0:m.art)||(null==(h=e.images)?void 0:h.coverArt))?g:""});const P=(null==(y=e.images)?void 0:y.coverPoster)||(null==(f=null==(v=e.parent)?void 0:v.images)?void 0:f.coverPoster)||(null==(Z=null==(b=e.grandparent)?void 0:b.images)?void 0:Z.coverPoster);return P&&S.push({alt:e.title,type:s.IY.CoverPoster,url:P}),S}function f(e,t){var r,s,d,f,b,Z,S,P,I,E,w,C,M,D,O,T,x,A;const k=function(e){switch(e){case l.dX.Episode:return a.pG.Episode;case l.dX.Movie:return a.pG.Movie;case l.dX.Season:return a.pG.Season;case l.dX.Show:return a.pG.Show}}(e.type);return N=((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e})({},o.Z),R={id:e.id,listItemKey:e.id,grandparentTitle:null==(r=e.grandparent)?void 0:r.title,guid:`${a.hw.Plex}/${k}/${e.id}`,index:null!=(s=e.index)?s:void 0,key:e.key,parentKey:null==(d=e.parent)?void 0:d.key,grandparentKey:null==(f=e.grandparent)?void 0:f.key,ratingKey:e.id,sourceURI:(0,i.Z)({key:e.key,serverIdentifier:n.X,providerIdentifier:t}),source:(0,i.Z)({serverIdentifier:n.X,providerIdentifier:t}),childCount:null!=(b=e.childCount)?b:void 0,year:null!=(Z=e.year)?Z:void 0,thumb:null!=(P=null==(S=e.images)?void 0:S.thumbnail)?P:"",parentThumb:null!=(E=null==(I=e.images)?void 0:I.thumbnail)?E:"",grandparentThumb:null!=(C=null==(w=e.images)?void 0:w.thumbnail)?C:"",leafCount:null!=(M=e.leafCount)?M:void 0,parentIndex:null!=(O=null==(D=e.parent)?void 0:D.index)?O:void 0,parentTitle:null==(T=e.parent)?void 0:T.title,publicPagesURL:null!=(x=e.publicPagesURL)?x:"",tagline:null!=(A=e.tagline)?A:"",title:e.title,type:k,displayFields:(0,c.P)(k),userState:!!e.userState,Image:v(e)},u(N,p(R));var N,R}},10550:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(85229),i=r(32601);const s={queryParse:{query:void 0,isPending:!1,isPopulated:!1,error:null},curatedItem:{item:void 0,isPending:!1,isPopulated:!1,error:null},filterOptions:{}},a=(0,n.oM)({name:"advancedFilters",initialState:s,reducers:{reset:()=>s,updateQuery(e,{payload:t}){e.queryParse.query&&(e.queryParse.query.Rule=t.rules)},fetchQueryRequested(e,t){(0,i.er)(e.queryParse)},fetchQuerySucceeded(e,{payload:t}){(0,i.vv)(e.queryParse),e.queryParse.query=t.query},fetchQueryFailed(e,{payload:t}){(0,i.VQ)(e.queryParse,t.error)},fetchFilterOptionsRequested(e,{payload:t}){const r=t.filter;e.filterOptions[r.key]||(e.filterOptions[r.key]={isPending:!1,isPopulated:!1,error:null,options:[]}),(0,i.er)(e.filterOptions[r.key])},fetchFilterOptionsSucceeded(e,{payload:t}){const r=t.filter;(0,i.vv)(e.filterOptions[r.key]),e.filterOptions[r.key].options=t.filterOptions},fetchFilterOptionsFailed(e,{payload:t}){const r=t.filter;(0,i.VQ)(e.filterOptions[r.key],t.error)},fetchCuratedRequested(e,t){(0,i.er)(e.curatedItem)},fetchCuratedSucceeded(e,{payload:t}){e.curatedItem.item=t.curatedItem,(0,i.vv)(e.curatedItem)},fetchCuratedFailed(e,{payload:t}){(0,i.VQ)(e.curatedItem,t.error)},editFiltersRequested(e,t){}}})},97853:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(7650);function i(e,t,r){var i;if(!r.content)return;const s=(r.isPlaylist?decodeURIComponent(r.content):r.content).match(/\/library\/sections\/(\w+)\/.*/);if(!s)return;const[a,o]=s,l=(0,n.Z)(t,o);if(!l||!l.pivots)return;const c=l.pivots.find((e=>"library"===e.id||l.key&&e.key.includes(l.key)));return c?["media",{machineIdentifier:e.machineIdentifier,providerIdentifier:t.identifier},{source:l.id,pivot:null!=(i=c.id)?i:c.key,key:a,curatedKey:r.key,advancedFilters:1}]:void 0}},13271:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(67294),i=r(42283),s=r(28216),a=r(62291),o=r(87442),l=r(73788),c=r(44811),d=r(33890),u=r(14139),p=r(65131),m=r(91085),h=r(75203),g=r(87221),y=r(17778),v=r(493),f=r(34721),b=r(95358),Z=r(83700),S=r(93545),P=r(94933),I=r(37112),E=r(49353),w=r(7221),C=r(13876),M=r(48321),D=r(26085);function O({isOpen:e,sourceURI:t,defaultTitle:r,metadataType:O,contentDirectoryID:T,isSmart:x=!1,onModalClose:A,onSaveSuccess:k}){var N,R;const L=(0,s.I0)(),[j,V]=(0,c.c9)(),U=(0,n.useMemo)((()=>(0,w.Z)(t)),[t]),F=(0,s.v9)(U),B=null!=(N=null==F?void 0:F.isSaving)&&N,_=(0,M.Z)(B),[z,H]=(0,n.useState)(""),W=(0,C.Z)(z,250),G=(0,E.Z)({server:j,provider:V,contentDirectoryID:T,metadataType:O,title:W.length?W:void 0}),{register:Q,handleSubmit:$,errors:K}=(0,i.cI)(),q="required"===(null==(R=K.title)?void 0:R.type),Y=(0,n.useCallback)((e=>{H(e.target.value)}),[]),X=$((({title:e})=>{const r={server:j,provider:V,title:e,sourceURI:t,contentDirectoryID:T,metadataType:O,isSmart:x};(0,o.c9)((()=>{L(I.Z.actions.saveRequested(r))}))})),J=(0,p.Z)();return(0,n.useEffect)((()=>{e&&_&&!B&&!(null==F?void 0:F.saveError)&&(null==k||k(),A())}),[e,B,_,A,k,null==F?void 0:F.saveError]),n.createElement(m.ZP,{metricsPage:a.uf},n.createElement(h.Z,{isOpen:e,size:S.Z.Small,onModalClose:A},n.createElement(g.Z,{onModalClose:A},n.createElement(f.Z,null,x?(0,l.Z)("Create Collection"):(0,l.Z)("Add to Collection")),x?null:n.createElement(b.Z,null,n.createElement(u.Z,{className:D.Z.filter,name:"title",placeholder:(0,l.Z)("Search Collections"),value:z,onChange:Y})),(null==F?void 0:F.saveError)?n.createElement(y.Z,{message:(0,l.Z)("Something went wrong. Make sure the server is available and try again.")}):null,x?null:n.createElement(P.Z,{errorMessage:(0,l.Z)("There was an error loading the collections. Please try again."),isSaving:B,metadataList:G,provider:V,server:j,sourceURI:t,zeroItemsMessage:W?(0,l.Z)("No collections found"):(0,l.Z)("Save your first collection")}),n.createElement(v.Z,null,n.createElement("form",{className:D.Z.form,onSubmit:X},n.createElement(u.Z,{ref:Q({required:!0}),className:D.Z.input,defaultValue:r,hasError:q,hasFocusOnMount:!0,name:"title",onFocus:J}),n.createElement(d.Z,{className:D.Z.button,isSpinning:B,kind:Z.Z.Primary,type:"submit"},(0,l.Z)("Create")))))))}},87101:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(98476);function s({item:e,onItemPress:t}){const r=(0,n.useCallback)((()=>t(e.key)),[t,e.key]);return n.createElement(i.Z,{onPress:r},e.title)}},51531:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),i=r(31889),s=r(28216),a=r(73788),o=r(3367),l=r(98476),c=r(14580),d=r(59405),u=r(87101),p=r(37112),m=r(49353);function h({sourceURI:e,contentDirectoryID:t,metadataType:r,server:i,provider:h,advancedFiltersRoute:g,onAddToCollectionPress:y,onAddToSmartCollectionPress:v,onMenuClose:f,onSavePress:b}){const Z=(0,s.I0)(),S=(0,m.Z)({server:i,provider:h,contentDirectoryID:t,metadataType:r,limit:3}),P=(0,n.useCallback)((t=>{Z(p.Z.actions.saveRequested({server:i,provider:h,key:t,sourceURI:e})),null==b||b(),f()}),[Z,f,b,h,i,e]);return(0,n.useEffect)((()=>{(null==S?void 0:S.sourceURI)&&Z(d.Z.actions.fetchRangeRequested({sourceURI:S.sourceURI,server:i,provider:h,startIndex:0,size:3}))}),[Z,null==S?void 0:S.sourceURI,i,h]),n.createElement(n.Fragment,null,n.createElement(l.Z,{onPress:(0,c.Z)(y,f)},(0,a.Z)("Add to Collection...")),v?n.createElement(l.Z,{onPress:(0,c.Z)(v,f)},(0,a.Z)("Save as Smart Collection...")):null,g?n.createElement(l.Z,{to:g,onPress:f},(0,a.Z)("Create Smart Collection")):null,(null==S?void 0:S.items.length)?n.createElement(n.Fragment,null,n.createElement(o.Z,null,(0,a.Z)("Recent")),S.items.map((e=>n.createElement(u.Z,{key:e.key,item:e,onItemPress:P})))):null)}var g=r(82088),y=r(99318);function v({sourceURI:e,contentDirectoryID:t,server:r,provider:s,mediaType:a,metadataType:o,advancedFiltersRoute:l,onAddToCollectionPress:c,onAddToPlaylistPress:d,onAddToSmartCollectionPress:u,onAddToSmartPlaylistPress:p,onMenuClose:m,onSaveCollectionPress:v,onSavePlaylistPress:f}){const b=d?n.createElement(g.Z,{advancedFiltersRoute:l,mediaType:a,provider:s,server:r,sourceURI:e,onAddToPlaylistPress:d,onAddToSmartPlaylistPress:p,onMenuClose:m,onSavePress:f}):null,Z=t&&c?n.createElement(h,{advancedFiltersRoute:l,contentDirectoryID:t,metadataType:o,provider:s,server:r,sourceURI:e,onAddToCollectionPress:c,onAddToSmartCollectionPress:u,onMenuClose:m,onSavePress:v}):null,S=function(e){return e===y.pG.Movie||e===y.pG.Show||e===y.pG.Season||e===y.pG.Episode}(o)&&!!Z||!b,P=S?Z:b,I=S?b:Z;return n.createElement(n.Fragment,null,P,I?n.createElement(i.Z,null):null,I)}},82088:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(28216),s=r(73788),a=r(3367),o=r(98476),l=r(14580),c=r(59405),d=r(87101),u=r(37112),p=r(32134);function m({sourceURI:e,mediaType:t,server:r,provider:m,advancedFiltersRoute:h,onAddToPlaylistPress:g,onAddToSmartPlaylistPress:y,onMenuClose:v,onSavePress:f}){const b=(0,i.I0)(),Z=(0,p.Z)({server:r,provider:m,mediaType:t}),S=(0,n.useCallback)((t=>{b(u.Z.actions.saveRequested({server:r,provider:m,key:t,sourceURI:e})),null==f||f(),v()}),[b,v,f,m,r,e]);return(0,n.useEffect)((()=>{(null==Z?void 0:Z.sourceURI)&&b(c.Z.actions.fetchRangeRequested({sourceURI:Z.sourceURI,server:r,provider:m,startIndex:0,size:3}))}),[b,null==Z?void 0:Z.sourceURI,r,m]),n.createElement(n.Fragment,null,n.createElement(o.Z,{onPress:(0,l.Z)(g,v)},(0,s.Z)("Add to Playlist...")),y?n.createElement(o.Z,{onPress:(0,l.Z)(y,v)},(0,s.Z)("Save as Smart Playlist...")):null,h?n.createElement(o.Z,{to:h,onPress:v},(0,s.Z)("Create Smart Playlist")):null,(null==Z?void 0:Z.items.length)?n.createElement(n.Fragment,null,n.createElement(a.Z,null,(0,s.Z)("Recent")),Z.items.slice(0,3).map((e=>n.createElement(d.Z,{key:e.key,item:e,onItemPress:S})))):null)}},53488:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ee});var n=r(67294),i=r(42283),s=r(28216),a=r(62291),o=r(8089),l=r(87442),c=r(73788),d=r(99318),u=r(65714),p=r(44811),m=r(53072),h=r(33890),g=r(14139),y=r(65131),v=r(91085),f=r(75203),b=r(87221),Z=r(17778),S=r(493),P=r(34721),I=r(95358),E=r(83700),w=r(93545),C=r(94933),M=r(87264),D=r(10125),O=r(14580),T=r(83782),x=r(8059),A=r(69281),k=r(62376),N=r(55319);function R(e,t){return e.isCloud?t.sourceTitle?`${t.title} - ${t.sourceTitle}`:t.title:e.friendlyName}var L=r(35076),j=r(84332);function V({server:e,provider:t,isSelected:r,onDestinationChange:i}){const s=(0,n.useCallback)((()=>{const r=(0,L.Z)({serverIdentifier:e.machineIdentifier,providerIdentifier:t.identifier});i(r)}),[i,t.identifier,e.machineIdentifier]);return n.createElement(j.Z,{isSelected:r,onPress:s},R(e,t))}function U({server:e,provider:t,destinations:r,isDisabled:i,onDestinationChange:s}){const a=(0,T.Z)(),o=(0,N.Z)();return n.createElement(n.Fragment,null,n.createElement(k.Z,{"aria-label":(0,c.Z)("Playlist destination"),id:a,isDisabled:i,onPress:o.onToggle},R(e,t),n.createElement(M.Z,{direction:o.isOpen?x.UP:x.WV})),n.createElement(D.Z,{isOpen:o.isOpen,size:A.ln,target:a,onMenuClose:o.onClose},r?r.map(((r,i)=>{const[a,l]=r,c=e.machineIdentifier===a.machineIdentifier&&t.identifier===l.identifier;return n.createElement(V,{key:i,isSelected:c,provider:l,server:a,onDestinationChange:(0,O.Z)(s,o.onClose)})})):null))}var F=r(37112),B=r(32134),_=r(7221),z=r(22222),H=r(12587),W=r(93644),G=r(33803),Q=r(46898),$=r(21604),K=r(41863),q=r(17614);const Y=(0,z.P1)(Q.Z,$.Z,(0,K.Z)("providers"),((e,t,r)=>{const n=[];for(const i of t){const t=i.isCloud?r:i.providers;for(const r of t)n.push([(0,q.Z)(i),e[r]])}return n}));var X=r(48321),J=r(26085);function ee({isOpen:e,sourceURI:t,defaultTitle:r,defaultDestinationSource:M,mediaType:D,isDestinationMenuHidden:O,isSmart:T=!1,onModalClose:x,onSaveSuccess:A}){var k,N;const L=(0,s.I0)(),[j,V]=(0,p.c9)(),[Q,$]=(0,n.useState)(M),{serverIdentifier:K,providerIdentifier:q}=(0,o.Z)(Q),ee=(0,n.useMemo)((()=>(0,_.Z)(t)),[t]),te=(0,s.v9)(ee),re=null!=(k=null==te?void 0:te.isSaving)&&k,ne=(0,X.Z)(re),ie=(0,s.v9)((0,m.Z)(K)),se=(0,s.v9)((0,u.Z)(K,q)),ae=(0,s.v9)((([e,t])=>(0,z.P1)(Y,(r=>r.reduce(((r,[n,i])=>((n.machineIdentifier!==e.machineIdentifier||i.identifier!==t.identifier)&&n.isFullOwnedServer&&n.isConnected&&(0,W.Z)(i,H.zW.Playlist,H.wd.Universal)&&r.push([n,i]),r)),t===G.Z?[]:[[e,t]]))))([j,V])),oe=(0,B.Z)({server:ie,provider:se,mediaType:D}),le={source:R(ie,se)},ce={[d.DD.Audio]:(0,c.Z)("Save your first music playlist for {source}",le),[d.DD.Video]:(0,c.Z)("Save your first video playlist for {source}",le),[d.DD.Photo]:(0,c.Z)("Save your first photo playlist for {source}",le)},{register:de,handleSubmit:ue,errors:pe}=(0,i.cI)(),me="required"===(null==(N=pe.title)?void 0:N.type),he=ue((({title:e})=>{const r={server:ie,provider:se,title:e,sourceURI:t,mediaType:D,isSmart:T};(0,l.c9)((()=>{L(F.Z.actions.saveRequested(r))}))})),ge=(0,y.Z)();return(0,n.useEffect)((()=>{e&&ne&&!re&&!(null==te?void 0:te.saveError)&&(null==A||A(),x())}),[e,re,ne,x,A,null==te?void 0:te.saveError]),n.createElement(v.ZP,{metricsPage:a.uf},n.createElement(f.Z,{isOpen:e,size:w.Z.Small,onModalClose:x},n.createElement(b.Z,{onModalClose:x},n.createElement(P.Z,null,T?(0,c.Z)("Create Playlist"):(0,c.Z)("Add to Playlist")),!T&&ae.length>1?n.createElement(I.Z,null,O?R(ie,se):n.createElement(U,{destinations:ae,isDisabled:re,provider:se,server:ie,onDestinationChange:$})):null,(null==te?void 0:te.saveError)?n.createElement(Z.Z,{message:ie.isCloud?(0,c.Z)("Something went wrong. Please try again in a few minutes."):(0,c.Z)("Something went wrong. Make sure the server is available and try again.")}):null,T?null:n.createElement(C.Z,{errorMessage:(0,c.Z)("There was an error loading the playlists. Please try again."),isSaving:re,metadataList:oe,provider:se,server:ie,sourceURI:t,zeroItemsMessage:ce[D]}),n.createElement(S.Z,null,n.createElement("form",{className:J.Z.form,onSubmit:he},n.createElement(g.Z,{ref:de({required:!0}),className:J.Z.input,defaultValue:r,hasError:me,hasFocusOnMount:!0,name:"title",onFocus:ge}),n.createElement(h.Z,{className:J.Z.button,isSpinning:re,kind:E.Z.Primary,type:"submit"},(0,c.Z)("Create")))))))}},94933:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n=r(67294),i=r(28216),s=r(59405),a=r(65790),o=r(64154),l=r(87442),c=r(9171),d=r(62376),u=r(28247),p=r(94788),m=r(72449),h=r(21602),g=r(16975),y=r(20222),v=r(37112);var f=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;function S(e){var t=e,{server:r,provider:s,sourceURI:a,isDisabled:o,item:S}=t,P=((e,t)=>{var r={};for(var n in e)b.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&f)for(var n of f(e))t.indexOf(n)<0&&Z.call(e,n)&&(r[n]=e[n]);return r})(t,["server","provider","sourceURI","isDisabled","item"]);const[I,E]=(0,u.Z)(),w=(0,g.Z)(P),{cellIndex:C}=P,M=(0,i.I0)(),D=(0,c.Z)({server:r,provider:s,width:40,height:40,url:(null==S?void 0:S.thumb)||(null==S?void 0:S.composite)}),O=(0,n.useCallback)((()=>{S&&(0,l.c9)((()=>{M(v.Z.actions.saveRequested({server:r,provider:s,key:S.key,sourceURI:a}))}))}),[S,M,r,s,a]);if(!S)return n.createElement(h.Z,{index:C,style:w.style});const{title:T}=S;return n.createElement(m.Z,{ref:(0,y.Z)(w.cellRef,E),isAlternate:!!(C%2),isHovered:I,style:w.style},n.createElement(d.Z,{className:"CuratedListItem-item-Lv9M5K Link-link-vSsQW1",isDisabled:o,onPress:O},n.createElement("div",{className:"CuratedListItem-imageContainer-S_bhQe"},n.createElement(p.Z,{className:"CuratedListItem-image-nCULDa",height:40,src:D,width:40})),n.createElement("div",{className:"CuratedListItem-title-qUxFQi"},T)))}const P="CuratedList-container-S2nv4v";var I=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))M.call(t,r)&&O(e,r,t[r]);if(C)for(var r of C(t))D.call(t,r)&&O(e,r,t[r]);return e};function x({server:e,provider:t,sourceURI:r,isSaving:l,metadataList:c,zeroItemsMessage:d,errorMessage:u}){var p;const m=(0,i.I0)(),h=null!=(p=null==c?void 0:c.totalSize)?p:5,g=(0,n.useCallback)((r=>{var n,i;(null==c?void 0:c.sourceURI)&&m(s.Z.actions.fetchRangeRequested((n=T({},r),i={server:e,provider:t,sourceURI:null==c?void 0:c.sourceURI},E(n,w(i)))))}),[null==c?void 0:c.sourceURI,m,e,t]);(0,n.useEffect)((()=>()=>{(null==c?void 0:c.sourceURI)&&m(s.Z.actions.reset({sourceURI:c.sourceURI}))}),[m,null==c?void 0:c.sourceURI,t,e]);const y=(0,n.useMemo)((()=>(0,a.Z)({rowHeight:60,overscan:5})),[]),v=(0,n.useCallback)((i=>n.createElement(S,T({isDisabled:l,provider:t,server:e,sourceURI:r},i))),[r,l,t,e]);return c?c.error?n.createElement("div",{className:P},u):c.isPopulated&&!c.items.length?n.createElement("div",{className:P},d):n.createElement(o.Z,{cellComponentFactory:v,className:"CuratedList-scroller-GezCVC VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko",items:c.items,keyPropName:"key",layout:y,totalSize:h,onPageRequest:g}):n.createElement("div",{className:P})}},37112:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(85229).oM)({name:"curatedLists",initialState:{},reducers:{saveRequested(e,{payload:t}){e[t.sourceURI]={isSaving:!0,saveError:null}},saveSucceeded(e,{payload:t}){const r=e[t.sourceURI];r.isSaving=!1,r.metadataItem=t.metadataItem},saveFailed(e,{payload:t}){const r=e[t.sourceURI];r.isSaving=!1,r.saveError=t.error},removeItemRequested(e,t){},moveItemRequested(e,t){}}})},49353:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(28216),s=r(35076),a=r(20683),o=r(90245),l=r(59405),c=r(27736),d=r(12587),u=r(93644);const p=function({server:e,provider:t,contentDirectoryID:r,metadataType:p,limit:m,title:h}){const g=(0,i.I0)(),y=(0,u.Z)(t,d.zW.Content),v=(null==y?void 0:y.key)?a.Z.join([y.key,r,"collections"],{subtype:(0,o.Z)(p),smart:0,sort:"updatedAt:desc",limit:m,title:h}):void 0,f=(0,s.Z)({serverIdentifier:e.machineIdentifier,providerIdentifier:t.identifier,key:v}),b=(0,n.useMemo)((()=>v?(0,c.Z)(f):()=>{}),[v,f]),Z=(0,i.v9)(b);return(0,n.useEffect)((()=>{f&&!Z&&g(l.Z.actions.added({metadataItemStates:{},metadataLists:[{sourceURI:f,items:[],offset:0}]}))}),[g,Z,f]),Z}},32134:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(28216),s=r(35076),a=r(20683),o=r(59405),l=r(27736),c=r(12587),d=r(93644);const u=function({server:e,provider:t,mediaType:r}){const u=(0,i.I0)(),p=(0,d.Z)(t,c.zW.Playlist),m=p?a.Z.join([p.key],{playlistType:r,smart:0,sort:"updatedAt:desc"}):void 0,h=(0,s.Z)({serverIdentifier:e.machineIdentifier,providerIdentifier:t.identifier,key:m}),g=(0,n.useMemo)((()=>m?(0,l.Z)(h):()=>{}),[m,h]),y=(0,i.v9)(g);return(0,n.useEffect)((()=>{h&&!y&&u(o.Z.actions.added({metadataItemStates:{},metadataLists:[{sourceURI:h,items:[],offset:0}]}))}),[u,y,h]),y}},7221:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(18585);const s=(0,n.P1)(i.Z,(e=>e.curatedLists)),a=function(e){return(0,n.P1)(s,(t=>t[e]))}},31892:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(85229),i=r(32601);const s={statistics:[],isPending:!1,isPopulated:!1,error:null,requestTimestampMilliseconds:null,responseTimestampMilliseconds:null},a=(0,n.oM)({name:"dashboardBandwidth",initialState:s,reducers:{reset:()=>s,bandwidthFetchRequested(e,t){(0,i.er)(e)},bandwidthFetchSucceeded(e,{payload:t}){(0,i.vv)(e),e.statistics=t.data,e.requestTimestampMilliseconds=t.requestTimestampMilliseconds,e.responseTimestampMilliseconds=t.responseTimestampMilliseconds},bandwidthFetchFailed(e,{payload:t}){(0,i.VQ)(e,t.error),e.requestTimestampMilliseconds=null,e.responseTimestampMilliseconds=null},bandwidthAbortRequested(){}}})},88478:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(85229),i=r(32601);const s={statistics:[],accounts:[],isPending:!1,isPopulated:!1,error:null},a=(0,n.oM)({name:"dashboardPlayHistory",initialState:s,reducers:{reset:()=>s,playHistoryFetchRequested(e,t){(0,i.er)(e)},playHistoryFetchSucceeded(e,{payload:t}){(0,i.vv)(e),e.statistics=t.data.statistics,e.accounts=t.data.accounts},playHistoryFetchFailed(e,{payload:t}){(0,i.VQ)(e,t.error)}}})},7635:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(85229),i=r(32601);const s={statistics:[],isPending:!1,isPopulated:!1,isUnsupported:!1,error:null,requestTimestampMilliseconds:null},a=(0,n.oM)({name:"dashboardResources",initialState:s,reducers:{reset:()=>s,resourcesFetchRequested(e,t){(0,i.er)(e),e.isUnsupported=!1},resourcesFetchSucceeded(e,{payload:t}){(0,i.vv)(e),e.statistics=t.data,e.requestTimestampMilliseconds=t.requestTimestampMilliseconds},resourcesFetchFailed(e,{payload:t}){(0,i.VQ)(e,t.error),e.isUnsupported=404===t.error.status}}})},43348:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(85229),i=r(32601);const s={moviesStatistics:[],tvStatistics:[],musicStatistics:[],isPending:!1,isPopulated:!1,error:null},a=(0,n.oM)({name:"dashboardTopPlayed",initialState:s,reducers:{reset:()=>s,topPlayedFetchRequested(e,t){(0,i.er)(e)},topPlayedFetchSucceeded(e,{payload:t}){(0,i.vv)(e),e.moviesStatistics=t.data.moviesStatistics,e.tvStatistics=t.data.tvStatistics,e.musicStatistics=t.data.musicStatistics},topPlayedFetchFailed(e,{payload:t}){(0,i.VQ)(e,t.error)}}})},69201:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(85229),i=r(32601);const s={statistics:[],accounts:[],isPending:!1,isPopulated:!1,error:null},a=(0,n.oM)({name:"dashboardTopUsers",initialState:s,reducers:{reset:()=>s,topUsersFetchRequested(e,t){(0,i.er)(e)},topUsersFetchSucceeded(e,{payload:t}){(0,i.vv)(e),e.statistics=t.data.statistics,e.accounts=t.data.accounts},topUsersFetchFailed(e,{payload:t}){(0,i.VQ)(e,t.error)}}})},80476:(e,t,r)=>{"use strict";r.d(t,{Z:()=>La});var n=r(67294),i=r(28216),s=r(35076),a=r(3615),o=r(52084),l=r(87442),c=r(20683),d=r(74310),u=r(59405),p=r(78389),m=r(27736),h=r(44811),g=r(84105),y=r(38002),v=r(17408),f=r(74861),b=r(50439),Z=r(48579),S=r(63797),P=r(62286),I=r(11904),E=r(15824),w=r(91085),C=r(64154),M=r(24107),D=Object.defineProperty,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const k=parseInt(M.Z.v4PagePadding,10);function N({className:e,items:t,totalSize:r,scrollerKey:i,smoothScroll:s,targetScrollIndex:a,onPageRequest:o,onListReady:l}){const c=(0,n.useMemo)((()=>(0,E.Z)({outerPaddingLeft:k})),[]),d=(0,n.useCallback)((e=>n.createElement(w.ZP,{key:e.key,row:e.row},n.createElement(I.Z,((e,t)=>{for(var r in t||(t={}))T.call(t,r)&&A(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&A(e,r,t[r]);return e})({},e)))),[]);return n.createElement(C.Z,{autoScroll:!1,cellComponentFactory:d,className:e,items:t,keyPropName:"listItemKey",layout:c,scrollerKey:i,smoothScroll:s,targetScrollIndex:a,totalSize:r,onListReady:l,onPageRequest:o})}var R=r(28766),L=r(66012),j=r(21602),V=r(16975),U=r(25231),F=r(71124),B=r(84964),_=r(17007),z=r(9423);const H=function(e){switch(e){case _.oz:return 114;case _.s4:return 64;case _.Zp:return 74}(0,z.Z)(!1,`Unknown aspectRatio ${e}`)};var W=r(88063),G=r(62376),Q=r(4538),$=r(33296),K=r(28247),q=r(72449),Y=r(863);function X({metadataItem:e,style:t,cellIndex:r}){const i=(0,Y.Z)({key:e.key}),[s,a]=(0,K.Z)(),o=(0,_.ZP)(p.U.Folder),l=(0,W.Z)({width:H(o),aspectRatio:o});return n.createElement(q.Z,{ref:a,isAlternate:!!(r%2),isHovered:s,style:t},n.createElement(G.Z,{"aria-label":(0,B.Z)(e),className:"MetadataFolderDetailsRow-underlay-aDQzWl Link-link-vSsQW1",to:i}),n.createElement("div",{className:"MetadataFolderDetailsRow-overlay-J69mWx"},n.createElement("div",{className:"MetadataFolderDetailsRow-posterContainer-ebw5Z5"},n.createElement(Q.Z,{style:l},n.createElement($.Z,{height:l.height,width:l.width},n.createElement(U.y,null)))),n.createElement("div",{className:"MetadataFolderDetailsRow-titlesContainer-QAN0LS"},n.createElement(F.Z,{allowLink:!1,className:"MetadataFolderDetailsRow-doubleTitle-SdFwBk",metadataItem:e}))))}var J=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;function re(e){var t=e,{item:r}=t,i=((e,t)=>{var r={};for(var n in e)ee.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&J)for(var n of J(e))t.indexOf(n)<0&&te.call(e,n)&&(r[n]=e[n]);return r})(t,["item"]);const s=(0,L.Z)(null==r?void 0:r.sourceURI),a=(0,V.Z)(i),{cellIndex:o}=i;return r?n.createElement(R.Z,{metadataItem:r,metadataItemState:s},n.createElement(X,{cellIndex:o,metadataItem:r,style:a.style})):n.createElement(j.Z,{index:o,style:a.style})}var ne=Object.defineProperty,ie=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,oe=(e,t,r)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,le=(e,t)=>{for(var r in t||(t={}))se.call(t,r)&&oe(e,r,t[r]);if(ie)for(var r of ie(t))ae.call(t,r)&&oe(e,r,t[r]);return e};const ce=parseInt(M.Z.v4PagePadding,10);function de({className:e,items:t,totalSize:r,scrollerKey:i,smoothScroll:s,targetScrollIndex:a,onPageRequest:o,onListReady:l}){const c=(0,n.useMemo)((()=>(0,E.Z)({outerPaddingLeft:ce})),[]),d=(0,n.useCallback)((e=>{var t;return n.createElement(w.ZP,{key:e.key,row:e.row},(null==(t=e.item)?void 0:t.isFolder)?n.createElement(re,le({},e)):n.createElement(I.Z,le({},e)))}),[]);return n.createElement(C.Z,{autoScroll:!1,cellComponentFactory:d,className:e,items:t,keyPropName:"listItemKey",layout:c,scrollerKey:i,smoothScroll:s,targetScrollIndex:a,totalSize:r,onListReady:l,onPageRequest:o})}var ue=r(26263),pe=r(61505),me=r(99318),he=r(12587),ge=r(9171),ye=r(68805),ve=r(94788),fe=r(20222);var be=Object.defineProperty,Ze=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,we=(e,t,r)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ce=(e,t)=>{for(var r in t||(t={}))Ie.call(t,r)&&we(e,r,t[r]);if(Pe)for(var r of Pe(t))Ee.call(t,r)&&we(e,r,t[r]);return e};const Me=n.forwardRef(((e,t)=>{var r=e,{item:i}=r,s=((e,t)=>{var r={};for(var n in e)Ie.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Pe)for(var n of Pe(e))t.indexOf(n)<0&&Ee.call(e,n)&&(r[n]=e[n]);return r})(r,["item"]);const{metricsContextTuple:a}=(0,w.Zn)(),[o,l,c]=(0,h.c9)(),{containerType:u,containerSubtype:p,listStyle:m}=(0,d.U)(),g=(0,L.Z)(null==i?void 0:i.sourceURI),[y,v]=(0,K.Z)(),f=(0,V.Z)(s),b=(0,n.useMemo)((()=>(0,_.ZP)(u,p,{listStyle:m})),[p,u,m]),Z=(0,n.useMemo)((()=>(0,W.Z)({width:s.cellWidth,aspectRatio:b})),[b,s.cellWidth]),S=(0,ge.Z)((P=Ce({},Z),I={server:o,provider:l,url:(null==i?void 0:i.icon)||(null==i?void 0:i.thumb)},Ze(P,Se(I))));var P,I;if(!i)return n.createElement("div",{ref:(0,fe.Z)(t,f.cellRef),style:f.style},n.createElement(pe.Z,{index:s.cellIndex,style:Z}));const E=(0,ue.Z)(o,l,c,{pageType:i.type===me.pG.Hub?he.F6.Hub:he.F6.List,key:i.key,context:(0,w.VJ)(a)});return n.createElement(R.Z,{metadataItem:i,metadataItemState:g},n.createElement("div",{ref:(0,fe.Z)(t,f.cellRef),style:f.style},n.createElement(Q.Z,{ref:v,style:Z},n.createElement(ve.Z,Ce({className:"MetadataDirectoryListItem-image-p9Cu_j",fit:i.icon?ve.k.Contain:ve.k.Cover,src:S},Z)),n.createElement(ye.Z,{"aria-label":(0,B.Z)(i),isHovered:y,to:E}),i.type===me.pG.Directory?n.createElement("div",{className:"MetadataDirectoryListItem-titleContainer-iY9pY1"},n.createElement("span",{className:"MetadataDirectoryListItem-title-IRPZhi"},i.title)):null)))}));var De=r(29591),Oe=r(16748);var Te=r(61606),xe=Object.defineProperty,Ae=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,Re=(e,t,r)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Le=(e,t)=>{for(var r in t||(t={}))ke.call(t,r)&&Re(e,r,t[r]);if(Ae)for(var r of Ae(t))Ne.call(t,r)&&Re(e,r,t[r]);return e};const je=parseInt(M.Z.v4PagePadding,10),Ve=parseInt(M.Z.v4PagePaddingAlt,10),Ue=parseInt(M.Z.jumpBarGutter,10);function Fe({className:e,listType:t,subtype:r,items:s,totalSize:a,scrollerKey:o,smoothScroll:l,targetScrollIndex:c,onPageRequest:u,onListReady:m}){const h=(0,i.v9)(Te.Z),{containerMeta:g,listStyle:y}=(0,d.U)(),v=(0,n.useMemo)((()=>(0,Oe.Z)({listType:t,subtype:r,columnWidth:h,listStyle:y,displayFields:null==g?void 0:g.DisplayFields,displayImages:null==g?void 0:g.DisplayImage,outerPaddingTop:Ve,outerPaddingBottom:Ve,outerPaddingRight:je-Ue})),[t,r,h,y,null==g?void 0:g.DisplayFields,null==g?void 0:g.DisplayImage]),f=(0,n.useCallback)((e=>n.createElement(w.ZP,{key:e.key,column:e.column,row:e.row},function(e){switch(e){case p.U.Directory:case p.U.Content:case p.U.Channel:return!0;default:return!1}}(t)?n.createElement(Me,Le({},e)):n.createElement(De.Z,Le({},e)))),[t]);return n.createElement(C.Z,{autoScroll:!1,cellComponentFactory:f,className:e,items:s,keyPropName:"listItemKey",layout:v,scrollerKey:o,smoothScroll:l,targetScrollIndex:c,totalSize:a,onListReady:m,onPageRequest:u})}var Be=r(73788),_e=r(42864),ze=r(40493),He=r(70448),We=r(2696);function Ge({className:e,metadataItem:t}){const r=(0,We.Z)(t);return r?n.createElement("span",{className:e,title:r},r):null}var Qe=r(35124),$e=r(87457),Ke=r(2358),qe=r(40363),Ye=r(5747);function Xe({metadataItem:e,metadataItemState:t,style:r,cellIndex:i}){const[s,a]=(0,h.c9)(),o=(0,$e.Z)(null==e?void 0:e.sourceURI),l=(0,Ke.Z)(e,"key"),c=(0,ue.Z)(s,a,null,{key:e.key}),{hoverRef:d,actionsMenuButtonID:u,isHovered:p,isActionsPending:m,isActionsVisible:g,isActionsMenuOpen:y,onActionsMenuClose:v,onActionsMenuCloseComplete:f,onActionsMenuToggle:b}=(0,Qe.Z)({server:s,provider:a,metadataItem:e,metadataItemState:t}),{type:Z,subtype:S}=e,P=(0,_.ZP)(Z,S),I=(0,W.Z)({width:H(P),aspectRatio:P});return n.createElement(q.Z,{ref:d,isAlternate:!!(i%2),isHovered:p,style:r},!e.directory&&l||e.directory?n.createElement(G.Z,{"aria-label":(0,B.Z)(e),className:"MetadataSharedItemRow-underlay-Tqhyu4 Link-link-vSsQW1",to:e.directory?c:l}):null,n.createElement("div",{className:"MetadataSharedItemRow-overlay-pr_MeS"},n.createElement("div",{className:"MetadataSharedItemRow-summaryContainer-ZBZI2f"},e.directory?n.createElement("div",{className:"MetadataSharedItemRow-posterContainer-EGv3A4"},n.createElement(Q.Z,{style:I},n.createElement($.Z,{height:I.height,width:I.width},n.createElement(ze.Z,{type:e.type})))):n.createElement("div",{className:"MetadataSharedItemRow-playPosterContainer-EXeRJG MetadataSharedItemRow-posterContainer-EGv3A4"},n.createElement(_e.Z,{aspectRatio:P,height:I.height,isPlayButtonCard:!0,isSelectHidden:!0,metadataItem:e,metadataItemState:t,metadataTimelineState:o,playCircleClassName:"MetadataSharedItemRow-playCircle-nS3hcH MetadataPosterCardActions-playCircle-rOnuVA PlayButton-playCircle-fK1f_v MetadataPosterCardCircle-cardCircle-gBHNQG",width:I.width})),n.createElement("div",{className:"MetadataSharedItemRow-titlesContainer-jAtkbB"},n.createElement("div",{className:"MetadataSharedItemRow-titleContainer-LulCGZ"},n.createElement(Ge,{className:"MetadataSharedItemRow-doubleTitle-wTKbOt MetadataSharedItemRow-title-v21y4N",metadataItem:e})),n.createElement("div",{className:"MetadataSharedItemRow-subtitle-Cb0Qkn MetadataSharedItemRow-titleContainer-LulCGZ MetadataSharedItemRow-title-v21y4N"},function(e){if(e.directory)switch(e.type){case me.pG.Movie:return(0,Be.Z)("Movie Library");case me.pG.Show:return(0,Be.Z)("Show Library");case me.pG.Artist:return(0,Be.Z)("Music Library");case me.pG.Photo:return(0,Be.Z)("Photo Library")}return(0,qe.Z)(e.type,e.subtype)}(e))),g&&!e.directory?n.createElement("div",{className:"MetadataSharedItemRow-actions-s5Cg3A"},n.createElement(Ye.Z,{className:"MetadataSharedItemRow-actionsButton-M0no3e Link-link-vSsQW1","data-testid":"sharedItemMoreButton",id:u,isPending:m,onPress:b})):null)),n.createElement(He.Z,{actionsOverride:{isPlayVisible:!1,isEditVisible:!1},isOpen:y,metadataItem:e,target:u,onMenuClose:v,onMenuCloseComplete:f}))}var Je=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable;function rt(e){var t=e,{item:r}=t,i=((e,t)=>{var r={};for(var n in e)et.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Je)for(var n of Je(e))t.indexOf(n)<0&&tt.call(e,n)&&(r[n]=e[n]);return r})(t,["item"]);const s=(0,L.Z)(null==r?void 0:r.sourceURI),a=(0,V.Z)(i),{cellIndex:o}=i;return r?n.createElement(R.Z,{metadataItem:r,metadataItemState:s},n.createElement(Xe,{cellIndex:o,metadataItem:r,metadataItemState:s,style:a.style})):n.createElement(j.Z,{index:o,style:a.style})}var nt=Object.defineProperty,it=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,ot=(e,t,r)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const lt=parseInt(M.Z.v4PagePadding,10);function ct({className:e,items:t,totalSize:r,scrollerKey:i,smoothScroll:s,targetScrollIndex:a,onPageRequest:o,onListReady:l}){const c=(0,n.useMemo)((()=>(0,E.Z)({outerPaddingLeft:lt})),[]),d=(0,n.useCallback)((e=>n.createElement(w.ZP,{key:e.key,row:e.row},n.createElement(rt,((e,t)=>{for(var r in t||(t={}))st.call(t,r)&&ot(e,r,t[r]);if(it)for(var r of it(t))at.call(t,r)&&ot(e,r,t[r]);return e})({},e)))),[]);return n.createElement(C.Z,{autoScroll:!1,cellComponentFactory:d,className:e,items:t,keyPropName:"listItemKey",layout:c,scrollerKey:i,smoothScroll:s,targetScrollIndex:a,totalSize:r,onListReady:l,onPageRequest:o})}var dt=r(66108),ut=r(99144),pt=r(12316),mt=r(85750),ht=r(80040),gt=r(84503),yt=r(10125),vt=r(83782),ft=r(23642),bt=r(55319),Zt=r(88467),St=r(83189),Pt=r(5099),It=r(89385),Et=r(23525),wt=r(34219),Ct=r(20041);const Mt=function(e,t){return e?e.reduce(((e,r)=>{const n=Ct.ZP.find((e=>r.key===e.ascKey&&r.descKey===e.descKey));return!n||t&&!t.includes(n.key)||e.push({sort:r,tableColumn:n}),e}),[]):[]},Dt=function(e){return e.active?e.activeDirection===ft.Sr.Ascending?e.descKey:e.key:e.defaultDirection===ft.Sr.Ascending?e.key:e.descKey};var Ot=r(84332);var Tt=Object.defineProperty,xt=Object.defineProperties,At=Object.getOwnPropertyDescriptors,kt=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable,Lt=(e,t,r)=>t in e?Tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const jt={placement:"top-start",modifiers:[{name:"offset",options:{offset:[5]}}]};function Vt({className:e="DirectoryListTableHeader-tableHeader-X1Ukmo TableHeader-tableHeader-DV7Uvw",width:t,activeTableColumnSorts:r,typeKeySourceURI:s,sorts:a}){const o=(0,i.I0)(),u=(0,vt.Z)(),p=(0,bt.Z)(),{containerKey:m}=(0,d.U)(),h=(0,n.useMemo)((()=>Mt(a)),[a]),g=(0,n.useMemo)((()=>(0,wt.Z)("directoryTableColumns")),[]),y=(0,i.v9)(g),v=(0,n.useCallback)((e=>{const t=function(e,t){const r=new Set(t.map((({tableColumn:e})=>e.key)));return r.has(e)?r.delete(e):r.add(e),Array.from(r)}(e,r);if(t.length<1)return;const n=(i=((e,t)=>{for(var r in t||(t={}))Nt.call(t,r)&&Lt(e,r,t[r]);if(kt)for(var r of kt(t))Rt.call(t,r)&&Lt(e,r,t[r]);return e})({},y),xt(i,At({[s]:t})));var i;(0,l.c9)((()=>{o((0,gt.LN)({directoryTableColumns:n}))}))}),[r,y,s,o]);return n.createElement(St.Z,{className:e,style:{width:t}},n.createElement("div",{className:"DirectoryListTableHeader-columnMenuButtonContainer-Rcrlrc"},n.createElement(mt.l,{"aria-label":(0,Be.Z)("Change Columns"),id:u,isOpen:p.isOpen,onPress:p.onToggle},n.createElement(ht.O,null))),r.map((({tableColumn:e,sort:t},r)=>n.createElement(It.Z,{key:e.key,style:e.style,to:(0,Y.Z)({key:c.Z.join(null!=m?m:"",{sort:Dt(t)},{parseParams:!0})})},n.createElement(Pt.Z,{activeClassName:0===r?"DirectoryListTableHeader-firstActiveTableHeaderCell-JngMPB DirectoryListTableHeader-firstTableHeaderCell-spztMG DirectoryListTableHeader-tableHeaderCell-sXoDne TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB DirectoryListTableHeader-activeTableHeaderCell-w4MUZL DirectoryListTableHeader-tableHeaderCell-sXoDne TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB":"DirectoryListTableHeader-activeTableHeaderCell-w4MUZL DirectoryListTableHeader-tableHeaderCell-sXoDne TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB",className:0===r?"DirectoryListTableHeader-firstTableHeaderCell-spztMG DirectoryListTableHeader-tableHeaderCell-sXoDne TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB":"DirectoryListTableHeader-tableHeaderCell-sXoDne TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB",isActive:t.active},n.createElement(Et.Z,{title:t.title},t.title),t.active?n.createElement(Zt.Z,{isAscending:t.activeDirection===ft.Sr.Ascending}):null)))),n.createElement(Pt.Z,{className:"DirectoryListTableHeader-actionsTableHeaderCell-yaC9UL DirectoryListTableHeader-tableHeaderCell-sXoDne TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB"}),n.createElement(yt.Z,{isOpen:p.isOpen,options:jt,target:u,onMenuClose:p.onClose},h.map((({sort:e,tableColumn:t})=>{const i=r.find((({tableColumn:e})=>e===t));return n.createElement(Ot.Z,{key:t.key,isSelected:!!i,value:t.key,onSelect:v},e.title)}))))}var Ut=r(22222);const Ft=function(e,t){return(0,Ut.P1)(function(e,t){return(0,Ut.P1)((0,wt.Z)("directoryTableColumns"),(r=>{if(!e)return[];const n=r[e];if(n)return n;switch(t){case p.U.Movie:return[Ct.TN.key,Ct.ty.key];case p.U.Show:return[Ct.TN.key];case p.U.Season:return[Ct.D0.key,Ct.Zv.key];case p.U.Episode:return[Ct.TN.key,Ct.i4.key];case p.U.Artist:return[Ct.TN.key];case p.U.Album:return[Ct.TN.key,Ct.c9.key,Ct.ty.key];case p.U.Track:return[Ct.TN.key,Ct.Dk.key,Ct.vy.key,Ct.x9.key]}return[Ct.TN.key]}))}(e,null==t?void 0:t.type),(e=>(null==t?void 0:t.Sort)?Mt(t.Sort,e):[]))};var Bt=Object.defineProperty,_t=Object.getOwnPropertySymbols,zt=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,Wt=(e,t,r)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Gt=parseInt(M.Z.v4PagePadding,10),Qt=parseInt(M.Z.actionsCellWidth,10),$t=parseInt(M.Z.playCellWidth,10);function Kt({className:e,activeType:t,items:r,totalSize:a,smoothScroll:o,scrollerKey:l,targetScrollIndex:c,onPageRequest:d,onListReady:u}){const[p,m]=(0,h.c9)(),g=(0,s.Z)({serverIdentifier:p.machineIdentifier,providerIdentifier:null==m?void 0:m.identifier}),y=t?`${g}${t.key}`:void 0,v=(0,n.useMemo)((()=>Ft(y,t)),[t,y]),f=(0,i.v9)(v),b=(0,n.useMemo)((()=>f.reduce(((e,{tableColumn:t})=>e+t.style.width),$t+Qt)),[f]),Z=(0,n.useMemo)((()=>(0,ut.Z)({overscan:1,outerPaddingRight:0,rowWidth:b})),[b]),S=(0,n.useCallback)((e=>(null==t?void 0:t.Sort)&&y?n.createElement(Vt,{activeTableColumnSorts:f,sorts:t.Sort,typeKeySourceURI:y,width:Math.max(Gt+b,e.width)}):null),[b,t,y,f]),P=(0,n.useCallback)((e=>n.createElement(w.ZP,{key:e.key,row:e.row},n.createElement(dt.Z,((e,t)=>{for(var r in t||(t={}))zt.call(t,r)&&Wt(e,r,t[r]);if(_t)for(var r of _t(t))Ht.call(t,r)&&Wt(e,r,t[r]);return e})({tableColumns:f.map((({tableColumn:e})=>e))},e)))),[f]);return n.createElement(C.Z,{autoScroll:!1,cellComponentFactory:P,className:e,items:r,keyPropName:"listItemKey",layout:Z,renderAboveList:S,scrollDirection:pt.I.Omni,scrollerKey:l,smoothScroll:o,targetScrollIndex:c,totalSize:a,onListReady:u,onPageRequest:d})}var qt=r(71448);function Yt({className:e,listType:t,subtype:r,activeType:i,items:s,totalSize:a,scrollerKey:o,smoothScroll:l,targetScrollIndex:c,onPageRequest:u,onListReady:m}){const{listStyle:h}=(0,d.U)(),g=function(e){switch(e){case p.n.Grid:return Fe;case p.n.Details:return N;case p.n.Table:return Kt;case p.n.SharedItems:return ct;case p.n.Folder:return de}throw new Error("Failed to  map the directory list style to a list component. Check `selectDirectoryListStyle` for list style options")}(h);return n.createElement(qt.ZP,{items:s},n.createElement(g,{activeType:i,className:e,items:s,listType:t,scrollerKey:o,smoothScroll:l,subtype:r,targetScrollIndex:c,totalSize:a,onListReady:m,onPageRequest:u}))}var Xt=r(10033),Jt=r(75404),er=r(87264),tr=r(28201),rr=r(18222);const nr={button:"SplitButton-button-TtyUe6",mainButton:"SplitButton-mainButton-isrwsp",menuButton:"SplitButton-menuButton-VOH5gW"};var ir=Object.defineProperty,sr=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable,lr=(e,t,r)=>t in e?ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cr=(e,t)=>{for(var r in t||(t={}))ar.call(t,r)&&lr(e,r,t[r]);if(sr)for(var r of sr(t))or.call(t,r)&&lr(e,r,t[r]);return e};const dr=function(e){const t=e,{className:r=nr.button,ariaLabel:i,label:s,menuSize:a,children:o,onPress:l}=t,c=((e,t)=>{var r={};for(var n in e)ar.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&sr)for(var n of sr(e))t.indexOf(n)<0&&or.call(e,n)&&(r[n]=e[n]);return r})(t,["className","ariaLabel","label","menuSize","children","onPress"]),d=i||s,[u]=(0,n.useState)((0,tr.Z)()),[p,m]=(0,n.useState)(!1),h=(0,n.useCallback)((()=>m(!p)),[p]),g=n.Children.only(o);return n.createElement("div",{className:r,id:u},n.createElement(rr.Z,cr({"aria-label":d,className:nr.mainButton,onPress:l},c),s),n.createElement(rr.Z,cr({className:nr.menuButton,onPress:h},c),n.createElement(er.Z,null)),n.createElement(yt.Z,{isOpen:p,size:a,target:u,onMenuClose:h},n.cloneElement(g,{onMenuClose:h,onMenuOpen:h})))};var ur=r(54345),pr=r(93084);function mr(e){const t=(0,pr.Z)(e.type);return t?(0,ur.Z)(t,e.subtype):void 0}var hr=r(74226),gr=r(93644),yr=r(13169);const vr={[p.U.Movie]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToQueueVisible","isOptimizeVisible","isPlayVisible","isShuffleVisible"],[p.U.Show]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToQueueVisible","isOptimizeVisible","isPlayVisible","isShuffleVisible"],[p.U.Season]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToQueueVisible","isOptimizeVisible","isPlayVisible","isShuffleVisible"],[p.U.Episode]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToQueueVisible","isOptimizeVisible","isPlayVisible","isShuffleVisible"],[p.U.Artist]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToQueueVisible","isPlayVisible","isShuffleVisible"],[p.U.Album]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToQueueVisible","isPlayVisible","isShuffleVisible"],[p.U.Track]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToQueueVisible","isPlayVisible","isShuffleVisible"],[p.U.PhotoAlbum]:["isAddToPlaylistVisible","isPlayVisible","isShuffleVisible"],[p.U.Photo]:["isAddToPlaylistVisible","isPlayVisible","isShuffleVisible"],[p.U.Author]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToQueueVisible","isPlayVisible","isShuffleVisible"],[p.U.Audiobook]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToQueueVisible","isPlayVisible","isShuffleVisible"],[p.U.Chapter]:["isAddToCollectionVisible","isAddToPlaylistVisible","isAddToQueueVisible","isPlayVisible","isShuffleVisible"]},fr=({provider:e})=>!hr.wB(e.identifier,[hr.IS])&&!!(0,gr.Z)(e,he.zW.PlayQueue),br=({provider:e})=>!!(0,gr.Z)(e,he.zW.Playlist),Zr=({provider:e,activeType:t})=>!!(0,gr.Z)(e,he.zW.Collection)&&!!(0,gr.Z)(e,he.zW.Manage)&&(null==t?void 0:t.type)!==p.U.Photo,Sr={isAddToCollectionVisible:Zr,isAddToPlaylistVisible:br,isAddToQueueVisible:fr,isPlayVisible:fr,isShuffleVisible:fr,isOptimizeVisible:({server:e,provider:t})=>(0,yr.Z)(t)&&e.isFullOwnedServer&&e.transcoderVideo};var Pr=r(65127),Ir=r(14139),Er=r(20896),wr=r(83700),Cr=r(10550),Mr=r(29228),Dr=r(98476),Or=r(14580),Tr=r(31326),xr=r(90877),Ar=r(93545),kr=(e=>(e.Or="or",e.And="and",e))(kr||{}),Nr=r(28589),Rr=r(70777),Lr=r(15058),jr=r(42613);const Vr=function({className:e="FieldRatingInput-inputContainer-pvLUkv",value:t,onChange:r}){var s;const a=(0,i.v9)((0,Lr.Z)(Rr.hq)),o=(0,n.useCallback)((e=>{r(0===e?"-1":String(e*(a?1:2)))}),[a,r]);return n.createElement("div",{className:e},a?n.createElement(Nr.o,{"aria-label":(0,Be.Z)("Rate"),value:null!=(s=parseInt(t,10))?s:0,onChange:o}):n.createElement(jr.Z,{value:""===t?-1:parseInt(t,10)/2,onRatingChange:o}))};var Ur=r(87357);const Fr={select:"FilterSelectInput-select-uFKoMy Select-select-cgne0H"};var Br=Object.defineProperty,_r=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,Hr=Object.prototype.propertyIsEnumerable,Wr=(e,t,r)=>t in e?Br(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Gr=function(e){var t=e,{selectClassName:r=Fr.select,size:i=Ar.Z.Small}=t,s=((e,t)=>{var r={};for(var n in e)zr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&_r)for(var n of _r(e))t.indexOf(n)<0&&Hr.call(e,n)&&(r[n]=e[n]);return r})(t,["selectClassName","size"]);return n.createElement(Ur.Z,((e,t)=>{for(var r in t||(t={}))zr.call(t,r)&&Wr(e,r,t[r]);if(_r)for(var r of _r(t))Hr.call(t,r)&&Wr(e,r,t[r]);return e})({selectClassName:r,size:i},s))};var Qr=r(13876);const $r={input:"FilterTextInput-input-a_vZGU TextInput-input-vbygwE"};var Kr=Object.defineProperty,qr=Object.defineProperties,Yr=Object.getOwnPropertyDescriptors,Xr=Object.getOwnPropertySymbols,Jr=Object.prototype.hasOwnProperty,en=Object.prototype.propertyIsEnumerable,tn=(e,t,r)=>t in e?Kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rn=(e,t)=>{for(var r in t||(t={}))Jr.call(t,r)&&tn(e,r,t[r]);if(Xr)for(var r of Xr(t))en.call(t,r)&&tn(e,r,t[r]);return e};function nn(e){var t=e,{className:r=$r.input,size:i=Ar.Z.Small,initialValue:s,forwardedRef:a,onChange:o,onDebouncedChange:l}=t,c=((e,t)=>{var r={};for(var n in e)Jr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Xr)for(var n of Xr(e))t.indexOf(n)<0&&en.call(e,n)&&(r[n]=e[n]);return r})(t,["className","size","initialValue","forwardedRef","onChange","onDebouncedChange"]);const[d,u]=(0,n.useState)(s),p=(0,Qr.Z)(d,250),m=(0,n.useCallback)((e=>{null==o||o(e),u(e.target.value)}),[o,u]);return(0,n.useEffect)((()=>{null==l||l(p)}),[p]),n.createElement(Ir.Z,rn({ref:a,className:r,size:i,value:d,onChange:m},c))}const sn=n.forwardRef(((e,t)=>{return n.createElement(nn,(r=rn({},e),qr(r,Yr({forwardedRef:t}))));var r})),an=/^-?(\d+)([a-z]{1,3})$/,on=function(e=""){const t=e.match(an);if(t){const[,e,r]=t;return{value:e,suffix:r}}return t},ln=function({className:e="FieldRelativeDateInput-inputContainer-pSVay7",value:t,onChange:r}){var i,s;const a=(0,n.useMemo)((()=>on(t)),[t]),o=null!=(i=null==a?void 0:a.value)?i:"0",l=null!=(s=null==a?void 0:a.suffix)?s:"s",c=(0,n.useCallback)((e=>{r(`-${e||"0"}${l}`)}),[r,l]),d=(0,n.useCallback)((e=>{r(`-${o}${e.target.value}`)}),[r,o]);return n.createElement("div",{className:e},n.createElement(sn,{className:"FieldRelativeDateInput-textInput-YS80gt FilterTextInput-input-a_vZGU TextInput-input-vbygwE",initialValue:"0"===o?"":o,min:"0",name:"dateInput",required:!0,step:"1",type:"number",onDebouncedChange:c}),n.createElement(Gr,{className:"FieldRelativeDateInput-selectInput-SfDGml Select-input-HK74_E",name:"suffixInput",value:l,onChange:d},n.createElement("option",{value:"s"},(0,Be.Z)("Seconds")),n.createElement("option",{value:"m"},(0,Be.Z)("Minutes")),n.createElement("option",{value:"h"},(0,Be.Z)("Hours")),n.createElement("option",{value:"d"},(0,Be.Z)("Days")),n.createElement("option",{value:"w"},(0,Be.Z)("Weeks")),n.createElement("option",{value:"mon"},(0,Be.Z)("Months")),n.createElement("option",{value:"y"},(0,Be.Z)("Years"))))};var cn=r(94184),dn=r.n(cn),un=r(71755),pn=r(47354),mn=r(73935),hn=r(61935),gn=r(62208),yn=r(87036),vn=r(73190),fn=r(65131),bn=r(20622);const Zn={name:"applyMaxHeight",enabled:!0,phase:"beforeWrite",requires:["maxSize"],fn({state:e,options:t}){var r;const n=null!=(r=t.offset)?r:0,{height:i}=e.modifiersData.maxSize;e.styles.popper.maxHeight=i-n+"px"}};var Sn=r(9966);const Pn={name:"maxSize",enabled:!0,phase:"main",requiresIfExists:["offset","preventOverflow","flip"],fn({state:e,name:t,options:r}){const n=(0,Sn.Z)(e,r),{x:i,y:s}=e.modifiersData.preventOverflow||{x:0,y:0},{width:a,height:o}=e.rects.popper,[l]=e.placement.split("-"),c="left"===l?"left":"right",d="top"===l?"top":"bottom";e.modifiersData[t]={width:a-n[c]-i,height:o-n[d]-s}}},In={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn({state:e}){e.styles.popper.width=`${e.rects.reference.width}px`},effect({state:e}){e.elements.popper.style.width=`${e.elements.reference.offsetWidth}px`}};var En=r(18585);const wn=(0,Ut.P1)(En.Z,(e=>e.advancedFilters)),Cn={searchInputContainer:"FilterOptionInput-searchInputContainer-_9NzP_",button:"FilterOptionInput-button-_W0z52 Link-link-vSsQW1",small:"FilterOptionInput-small-s38pCP",medium:"FilterOptionInput-medium-yAzjl5",large:"FilterOptionInput-large-YAHTkc",isDisabled:"FilterOptionInput-isDisabled-uC1BoB",hasError:"FilterOptionInput-hasError-hvyG03",menuContainer:"FilterOptionInput-menuContainer-jhrBof",menu:"FilterOptionInput-menu-z6FMuR",loadingMenu:"FilterOptionInput-loadingMenu-lTfcWf FilterOptionInput-menu-z6FMuR",scroller:"FilterOptionInput-scroller-kH_tOx Scroller-scroller-S6_dko",input:"FilterOptionInput-input-AUT_hB FilterTextInput-input-a_vZGU TextInput-input-vbygwE",list:"FilterOptionInput-list-VHWEC0",listItem:"FilterOptionInput-listItem-LSwdMk",listItemHighlighted:"FilterOptionInput-listItemHighlighted-tGuS82 FilterOptionInput-listItem-LSwdMk"};var Mn=Object.defineProperty,Dn=Object.defineProperties,On=Object.getOwnPropertyDescriptors,Tn=Object.getOwnPropertySymbols,xn=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable,kn=(e,t,r)=>t in e?Mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Nn=(e,t)=>{for(var r in t||(t={}))xn.call(t,r)&&kn(e,r,t[r]);if(Tn)for(var r of Tn(t))An.call(t,r)&&kn(e,r,t[r]);return e},Rn=(e,t)=>Dn(e,On(t));const Ln=(0,gn.Z)(yn.Z.menuSpeed)/1e3,jn={ease:"easeOut",duration:Ln},Vn={ease:vn.Z.motionEasing,duration:Ln},Un={opacity:jn,y:Vn,scale:Vn},Fn={initial:{opacity:0,y:-10,scale:.95,transition:Un},animate:{opacity:1,y:0,scale:1,transition:Un},exit:{opacity:0,y:10,scale:.95,transition:Un}},Bn=function({containerClassName:e=Cn.searchInputContainer,disabledClassName:t=Cn.isDisabled,errorClassName:r=Cn.hasError,buttonClassName:s=Cn.button,rule:a,size:o=Ar.Z.Small,filter:l,isDisabled:c,hasError:d,onChange:u}){var p,m,g;const y=(0,i.I0)(),[v,f]=(0,h.c9)(),b=null!=(p=a.valueTitle)?p:a.value,Z=(0,n.useMemo)((()=>{return e=l.key,(0,Ut.P1)(wn,(t=>t.filterOptions[e]));var e}),[l.key]),S=(0,i.v9)(Z),[I,E]=(0,n.useState)(null==S?void 0:S.options),w=null!=(m=null!=I?I:null==S?void 0:S.options)?m:[],C=(0,n.useRef)(null),M=(0,n.useRef)(null),D=(0,fn.Z)(),{styles:O,attributes:T,state:x}=(0,hn.D)(C.current,M.current,{placement:"bottom-start",modifiers:(0,n.useMemo)((()=>[{name:"offset",options:{offset:[0,5]}},In,Pn,Zn,{name:"applyMaxHeight",options:{offset:15}}]),[])}),A=(0,n.useCallback)((e=>{var t;return null!=(t=null==e?void 0:e.title)?t:""}),[]),{isOpen:k,highlightedIndex:N,getToggleButtonProps:R,getMenuProps:L,getComboboxProps:j,getInputProps:V,getItemProps:U,closeMenu:F}=(0,un.Kb)({defaultHighlightedIndex:0,items:w,itemToString:A,initialInputValue:b,onSelectedItemChange:(0,n.useCallback)((({selectedItem:e})=>{e&&u(e.value,e.title)}),[u]),onInputValueChange:(0,n.useCallback)((({inputValue:e})=>{(null==S?void 0:S.options)&&E(S.options.filter((t=>A(t).toLowerCase().includes(null==e?void 0:e.toLocaleLowerCase()))))}),[null==S?void 0:S.options,A]),stateReducer:(0,n.useCallback)(((e,{changes:t})=>{var r,n,i;return e.isOpen&&!t.isOpen&&(null==(r=t.selectedItem)?void 0:r.title)!==e.inputValue?Rn(Nn({},t),{inputValue:null!=(i=null==(n=t.selectedItem)?void 0:n.title)?i:b}):t}),[b])});return(0,n.useEffect)((()=>{(null==S?void 0:S.isPopulated)||y(Cr.Z.actions.fetchFilterOptionsRequested({server:v,provider:f,filter:l}))}),[y,l,null==S?void 0:S.isPopulated,k,f,v]),(0,n.useEffect)((()=>{var e;(null==(e=null==x?void 0:x.modifiersData.hide)?void 0:e.isReferenceHidden)&&k&&F()}),[F,k,null==(g=null==x?void 0:x.modifiersData.hide)?void 0:g.isReferenceHidden]),(0,n.useEffect)((()=>{(null==S?void 0:S.options.length)&&E(S.options)}),[null==S?void 0:S.options]),n.createElement(n.Fragment,null,n.createElement("div",Nn({},j({ref:C,className:dn()(e,c&&t,d&&r)})),n.createElement(sn,Rn(Nn({},V({className:Cn.input,onFocus:D,disabled:c})),{size:o})),n.createElement(G.Z,Rn(Nn(Nn({},R({className:dn()(s,Cn[o]),disabled:c})),T.reference),{isDisabled:c}),n.createElement(er.Z,{direction:k?bn.Z.Up:bn.Z.Down,size:o}))),mn.createPortal(n.createElement("div",Nn(Nn({},L({className:Cn.menuContainer,style:O.popper,ref:M})),T.popper),n.createElement(pn.M_,null,k?n.createElement(pn.ww.div,{key:"container",animate:Fn.animate,className:(null==S?void 0:S.isPopulated)?Cn.menu:Cn.loadingMenu,exit:Fn.exit,initial:Fn.initial},(null==S?void 0:S.isPopulated)?n.createElement(pt.Z,{className:Cn.scroller},n.createElement("ul",{className:Cn.list},w.length?w.map(((e,t)=>n.createElement("li",Nn({key:e.key},U({className:N===t?Cn.listItemHighlighted:Cn.listItem,index:t,item:e})),e.title))):n.createElement("li",{className:Cn.listItem},(0,Be.Z)("No options")))):n.createElement(P.Z,null)):null)),document.body))};var _n=r(20213);const zn=[_n.Z.DoubleEqual,_n.Z.NotDoubleEqual],Hn=[_n.Z.Equal,_n.Z.NotEqual],Wn=function({rule:e,fieldType:t,fieldSubtype:r,filter:i,onChange:s}){var a;const o=(0,n.useCallback)((e=>{s(encodeURIComponent(e),e)}),[s]);if(r===ft.Pi.Rating)return n.createElement(Vr,{value:e.value,onChange:s});if(i&&function(e,t){switch(e){case ft.fS.String:return zn.includes(t.operator);default:return Hn.includes(t.operator)}}(t,e))return n.createElement(Bn,{filter:i,rule:e,onChange:s});switch(t){case ft.fS.String:return n.createElement(sn,{initialValue:null!=(a=e.valueTitle)?a:e.value,name:"input",required:!0,type:"text",onDebouncedChange:o});case ft.fS.Integer:return n.createElement(sn,{initialValue:e.value,min:"0",name:"input",required:!0,type:"number",onDebouncedChange:o});case ft.fS.Date:return on(e.value)?n.createElement(ln,{value:e.value,onChange:s}):n.createElement(sn,{initialValue:e.value,max:"2999-12-31",name:"input",pattern:"[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])",placeholder:"YYYY-MM-DD",required:!0,type:"date",onDebouncedChange:o})}return null};function Gn(e,t,r=""){return{operator:e,title:t,defaultValue:r}}const Qn=function(e){switch(e){case ft.fS.Tag:case ft.fS.AudioLanguage:case ft.fS.SubtitleLanguage:return[Gn(_n.Z.Equal,(0,Be.Z)("is")),Gn(_n.Z.NotEqual,(0,Be.Z)("is not"))];case ft.fS.Resolution:return[Gn(_n.Z.Equal,(0,Be.Z)("is"))];case ft.fS.Boolean:return[Gn(_n.Z.Equal,(0,Be.Z)("is true")),Gn(_n.Z.NotEqual,(0,Be.Z)("is false"))];case ft.fS.Integer:return[Gn(_n.Z.Equal,(0,Be.Z)("is")),Gn(_n.Z.NotEqual,(0,Be.Z)("is not")),Gn(_n.Z.GreaterThanGreaterThanOrEqual,(0,Be.Z)("is greater than")),Gn(_n.Z.LessThanLessThanOrEqual,(0,Be.Z)("is less than"))];case ft.fS.String:return[Gn(_n.Z.Equal,(0,Be.Z)("contains")),Gn(_n.Z.NotEqual,(0,Be.Z)("does not contain")),Gn(_n.Z.DoubleEqual,(0,Be.Z)("is")),Gn(_n.Z.NotDoubleEqual,(0,Be.Z)("is not")),Gn(_n.Z.LessThanOrEqual,(0,Be.Z)("begins with")),Gn(_n.Z.GreaterThanOrEqual,(0,Be.Z)("ends with"))];case ft.fS.Date:return[Gn(_n.Z.LessThanLessThanOrEqual,(0,Be.Z)("is before")),Gn(_n.Z.GreaterThanGreaterThanOrEqual,(0,Be.Z)("is after")),Gn(_n.Z.GreaterThanGreaterThanOrEqual,(0,Be.Z)("is in the last"),"-0s"),Gn(_n.Z.LessThanLessThanOrEqual,(0,Be.Z)("is not in the last"),"-0s")]}};var $n=r(45697),Kn=r.n($n),qn=r(90558);function Yn(e){const t=e["aria-label"],r=e.className,i=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",id:"plex-icon-subtract"};s["aria-hidden"]=!t,s.style=i,s.className=qn.Z.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{clipRule:"evenodd",d:"M3.42847 27.4286V20.5714H44.5713V27.4286H3.42847Z"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}Yn.propTypes={"aria-label":Kn().string,className:Kn().string,style:Kn().object};const Xn=Yn,Jn="AdvancedFilterOption-inputContainer-h4Ng07";var ei=Object.defineProperty,ti=Object.defineProperties,ri=Object.getOwnPropertyDescriptors,ni=Object.getOwnPropertySymbols,ii=Object.prototype.hasOwnProperty,si=Object.prototype.propertyIsEnumerable,ai=(e,t,r)=>t in e?ei(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oi=(e,t)=>{for(var r in t||(t={}))ii.call(t,r)&&ai(e,r,t[r]);if(ni)for(var r of ni(t))si.call(t,r)&&ai(e,r,t[r]);return e},li=(e,t)=>ti(e,ri(t));const ci=function({className:e="AdvancedFilterOption-container-zEoAnS",rowState:t,rule:r,isRemoveDisabled:i,onChange:s,onRemoveRule:a}){const{type:o,subtype:l}=t.fieldTypesByFieldKey[r.field],c=t.filterKeysByFieldKey[r.field],d=!!on(r.value),u=(0,n.useMemo)((()=>Qn(o)),[o]),p=(0,n.useMemo)((()=>t.allTypeFilters.find((({key:e})=>e===c))),[c,t.allTypeFilters]),m=(0,n.useMemo)((()=>{if(o===ft.fS.Date){const e=u.find((e=>e.operator===r.operator&&d&&e.defaultValue));if(e)return e}return u.find((e=>e.operator===r.operator))||u[0]}),[u,r.operator,d,o]),h=(0,n.useMemo)((()=>u.indexOf(m)),[u,m]),g=(0,n.useCallback)((e=>{const n=e.target.value,i=t.allTypeFields.find((e=>e.key===n));if(!i)throw new Error(`${n} did not match to any type field`);const a=t.fieldTypesByFieldKey[i.key],[o]=Qn(a.type);s(li(oi({},r),{field:i.key,fieldTitle:i.title,operator:o.operator,value:a.type===ft.fS.Boolean?"1":"",valueTitle:void 0}))}),[s,t.allTypeFields,t.fieldTypesByFieldKey,r]),y=(0,n.useCallback)((e=>{const t=parseInt(e.target.value,10),n=u[t];o===ft.fS.Date?s(li(oi({},r),{operator:n.operator,value:n.defaultValue,valueTitle:void 0})):s(li(oi({},r),{operator:n.operator}))}),[s,u,r,o]),v=(0,n.useCallback)(((e,t)=>{s(li(oi({},r),{value:e,valueTitle:t}))}),[s,r]);return n.createElement("div",{className:e},n.createElement("div",{className:Jn},n.createElement(Gr,{name:"field",value:r.field,onChange:g},t.allTypeFields.map(((e,t)=>n.createElement("option",{key:`${e.key}-${t}`,value:e.key},e.title))))),n.createElement("div",{className:Jn},n.createElement(Gr,{name:"operator",value:String(h),onChange:y},u.map(((e,t)=>n.createElement("option",{key:t,value:t},e.title))))),o!==ft.fS.Boolean?n.createElement("div",{className:Jn},n.createElement(Wn,{fieldSubtype:l,fieldType:o,filter:p,rule:r,onChange:v})):null,n.createElement(Tr.Z,{icon:Xn,isDisabled:i,size:Ar.Z.Small,title:(0,Be.Z)("Remove Rule"),onPress:a}))};var di=Object.defineProperty,ui=Object.defineProperties,pi=Object.getOwnPropertyDescriptors,mi=Object.getOwnPropertySymbols,hi=Object.prototype.hasOwnProperty,gi=Object.prototype.propertyIsEnumerable,yi=(e,t,r)=>t in e?di(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function vi(e,t=function(e,t=[]){return{type:"composite",operator:e,Rule:t}}(kr.And)){return r=((e,t)=>{for(var r in t||(t={}))hi.call(t,r)&&yi(e,r,t[r]);if(mi)for(var r of mi(t))gi.call(t,r)&&yi(e,r,t[r]);return e})({},t),n={Rule:[...t.Rule,...e]},ui(r,pi(n));var r,n}const fi=function(e){const[t]=e.allTypeFields,[r]=Qn(t.type);return{field:t.key,fieldTitle:t.title,value:"",operator:r.operator}};var bi=r(90144),Zi=r(36526);var Si=Object.defineProperty,Pi=Object.defineProperties,Ii=Object.getOwnPropertyDescriptors,Ei=Object.getOwnPropertySymbols,wi=Object.prototype.hasOwnProperty,Ci=Object.prototype.propertyIsEnumerable,Mi=(e,t,r)=>t in e?Si(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Di=(e,t)=>{for(var r in t||(t={}))wi.call(t,r)&&Mi(e,r,t[r]);if(Ei)for(var r of Ei(t))Ci.call(t,r)&&Mi(e,r,t[r]);return e},Oi=(e,t)=>Pi(e,Ii(t));function Ti(e){const t=(0,bi.su)(kr).find((t=>t===e));if(t)return t;throw new Error(`'getOperatorValue' received an unknown value '${e}'`)}const xi=function e({className:t="AdvancedFilterGroup-container-y0pz6J",rowState:r,compositeRule:i,onRemoveGroup:s,onChange:a}){const o=(0,vt.Z)(),l=(0,bt.Z)(),c=i.Rule.length,d=(0,n.useCallback)((e=>{a(Oi(Di({},i),{operator:Ti(e.target.value)}))}),[i,a]),u=(0,n.useCallback)((e=>()=>{const t=Array.from(i.Rule),[r]=t.splice(e,1);t.length<1&&"composite"!==r.type||a(Oi(Di({},i),{Rule:t}))}),[i,a]),p=(0,n.useCallback)((()=>{const e=Array.from(i.Rule);e.unshift(fi(r)),a(Oi(Di({},i),{Rule:e}))}),[i,a,r]),m=(0,n.useCallback)((()=>{const e=Array.from(i.Rule);e.unshift(vi([fi(r)])),a(Oi(Di({},i),{Rule:e}))}),[i,a,r]),h=(0,n.useCallback)((e=>t=>{const r=Array.from(i.Rule);r.splice(e,1,t),a(Oi(Di({},i),{Rule:r}))}),[i,a]);return n.createElement("div",{className:t},n.createElement("div",{className:"AdvancedFilterGroup-inputContainer-saNbmR"},n.createElement(Gr,{name:"group",value:i.operator,onChange:d},n.createElement("option",{value:"and"},(0,Be.Z)("Match all of the following")),n.createElement("option",{value:"or"},(0,Be.Z)("Match any of the following")))),n.createElement(xr.Z,{className:"AdvancedFilterGroup-buttons-XBtMui ActionButtonBar-bar-_jwC59"},n.createElement(Tr.Z,{icon:Mr.Z,size:Ar.Z.Small,title:(0,Be.Z)("Add Rule"),onPress:p}),n.createElement(G.Z,{"aria-label":(0,Be.Z)("More Actions"),id:o,onPress:l.onToggle},n.createElement(Zi.Z,null)),n.createElement(yt.Z,{isOpen:l.isOpen,target:o,onMenuClose:l.onClose},n.createElement(Dr.Z,{onPress:(0,Or.Z)(m,l.onClose)},(0,Be.Z)("Add Rule Group")),s?n.createElement(Dr.Z,{onPress:(0,Or.Z)(s,l.onClose)},(0,Be.Z)("Remove Rule Group")):null)),n.createElement("div",{className:"AdvancedFilterGroup-rules-RFRfqs"},i.Rule.map(((t,s)=>"composite"===t.type?n.createElement(e,{key:`${t.operator}-${s}`,compositeRule:t,rowState:r,onChange:h(s),onRemoveGroup:u(s)}):n.createElement(ci,{key:`${t.field}-${c}-${s}`,isRemoveDisabled:1===i.Rule.length,rowState:r,rule:t,onChange:h(s),onRemoveRule:u(s)})))))},Ai=new RegExp(`(${["duration","mediaSize","mediaBitrate","show.writer","show.producer","show.director"].join("|")})$`),ki=function({meta:e,rules:t,onChange:r}){const i=(0,n.useMemo)((()=>{var t;return(null!=(t=e.Type)?t:[]).reduce(((e,t)=>(t.Field&&e.push(...t.Field.filter((e=>!Ai.test(e.key)))),e)),[])}),[e.Type]),s=(0,n.useMemo)((()=>{var t;return(null!=(t=e.Type)?t:[]).reduce(((e,t)=>(t.Filter&&e.push(...t.Filter),e)),[])}),[e.Type]),a=(0,n.useMemo)((()=>{var t;const r=null!=(t=e.Type)?t:[],n=r.filter((e=>e.type!==p.U.Folder)).length>1;return r.reduce(((e,t)=>(t.Filter&&t.Filter.forEach((r=>{if(r.filterType!==ft.H_.Boolean){const i=n?`${t.type}.${r.filter}`:r.filter;e[i]=r.key}})),e)),{})}),[e.Type]),o=(0,n.useMemo)((()=>i.reduce(((e,t)=>(e[t.key]={type:t.type,subtype:t.subType},e)),{})),[i]),l=(0,n.useMemo)((()=>({allTypeFilters:s,allTypeFields:i,fieldTypesByFieldKey:o,filterKeysByFieldKey:a})),[i,s,o,a]),c=(0,n.useMemo)((()=>t?"composite"!==t.type?vi([t]):t:vi([fi(l)])),[t,l]);return n.createElement(xi,{compositeRule:c,rowState:l,onChange:r})},Ni=(0,Ut.P1)(wn,(e=>e.curatedItem)),Ri=(0,Ut.P1)(wn,(e=>e.queryParse));function Li(e,t=!1){const r=[];if("composite"===e.type){const n=e.Rule;for(let e=0,t=n.length;e<t;e++){const t=n[e];(t.type||""!==t.value)&&(Li(t,!0).length&&r.push(Li(t,!0)))}const i=r.length;let s=i-1;for(;s>0;)r.splice(s,0,`${e.operator}=1`),s-=1;r.length&&(t||i>1&&e.operator===kr.Or)&&(r.unshift("push=1"),r.push("pop=1"))}else{if(""===e.value)throw new Error("Tried to encode an empty value");const t=e.operator.slice(0,-1);r.push(`${e.field}${encodeURIComponent(t)}=${e.value}`)}return r.flat(2)}function ji(e){return Li(e).join("&")}var Vi=r(13271),Ui=r(51531),Fi=r(53488),Bi=r(37112),_i=r(7221),zi=r(46074),Hi=r(96436),Wi=r(48321),Gi=r(30547);const Qi=function({className:e="DirectoryListAdvancedFilters-container-Wr05rs",directoryKey:t,totalSize:r,meta:o}){var d,u,p,m,g,v;const f=(0,i.I0)(),[b,Z,S]=(0,h.c9)(),I=(0,s.Z)({serverIdentifier:b.machineIdentifier,providerIdentifier:Z.identifier}),E=(0,n.useMemo)((()=>c.Z.parseUri(t)),[t]),w=`${I}${t}`,C=(0,i.v9)(Hi.Z),{query:M,isPopulated:D}=(0,i.v9)(Ri),O=(0,i.v9)(Ni),T=(0,n.useMemo)((()=>(0,_i.Z)(w)),[w]),x=(0,i.v9)(T),A=null!=(d=null==x?void 0:x.isSaving)&&d,k=(0,Wi.Z)(A),N=(0,zi.Z)(o),R=(0,y.Z)(),L=R.curatedKey?a.Z.parseString(R.curatedKey):void 0,j=(0,Er.Z)({identifier:Z.metricsIdentifier,mode:"list",type:null==N?void 0:N.type,itemCount:r}),[V,U]=(0,n.useState)(null!=(u=a.Z.parseString(E.params.limit))?u:""),F=(0,Qr.Z)(V,250),B=(0,bt.Z)(),_=(0,bt.Z)(),z=(0,bt.Z)(),[H,W]=(0,n.useState)(!1),G=N?(0,pr.Z)(N.type):void 0,Q=N?mr(N):void 0,$=br({server:b,provider:Z,activeType:N}),K=Zr({server:b,provider:Z,activeType:N}),q=K&&Q===me.DD.Video,X=(0,n.useCallback)((()=>{j({action:Jt.DK,mode:"shortcut"})}),[j]),J=(0,n.useCallback)((()=>{j({action:Jt.uf,mode:"shortcut"})}),[j]),ee=(0,n.useCallback)((()=>{W(!0),B.onOpen()}),[B]),te=(0,n.useCallback)((()=>{W(!1),B.onClose()}),[B]),re=(0,n.useCallback)((()=>{W(!0),_.onOpen()}),[_]),ne=(0,n.useCallback)((()=>{W(!1),_.onClose()}),[_]),ie=(0,n.useCallback)((()=>{L&&(0,l.c9)((()=>{f(Bi.Z.actions.saveRequested({server:b,provider:Z,key:L,sourceURI:w,isSmart:!0}))}))}),[L,f,Z,b,w]),se=(0,n.useCallback)((e=>{const t=e.target.value;U(t)}),[]),ae=(0,n.useCallback)((e=>{f(Cr.Z.actions.updateQuery({rules:e}))}),[f]);(0,n.useEffect)((()=>{var e;if(!(null==M?void 0:M.Rule)||"composite"===(null==(e=null==M?void 0:M.Rule)?void 0:e.type)&&M.Rule.Rule.length<1)return;const{type:r,sort:n,group:i,having:s}=E.params,a={type:r,sort:n,group:i,having:s,limit:F||void 0},o=c.Z.join(E.pathname,a),l=ji(M.Rule),d=c.Z.join(o,l,{parseParams:!1});d!==t&&f((0,Xt.c4)({pathname:(0,Y.Z)({key:d}),replace:!0}))}),[t,E.params,E.pathname,f,F,M]),(0,n.useEffect)((()=>{M||f(Cr.Z.actions.fetchQueryRequested({server:b,provider:Z,key:t.replace("/all","/query/parse")})),L&&f(Cr.Z.actions.fetchCuratedRequested({server:b,provider:Z,key:L}))}),[M,t,L,f,b]),(0,n.useEffect)((()=>()=>{f(Cr.Z.actions.reset())}),[f]),(0,n.useEffect)((()=>{var e;if((null==(e=null==x?void 0:x.metadataItem)?void 0:e.key)&&k&&!A&&!(null==x?void 0:x.saveError)){const e=x.metadataItem.type===me.pG.Playlist;f((0,Xt.c4)({pathname:(0,Gi.Z)(b,Z,x.metadataItem.key,void 0,e?Q:void 0),replace:!0}))}}),[f,A,k,Q,Z,b,null==(p=null==x?void 0:x.metadataItem)?void 0:p.key,null==(m=null==x?void 0:x.metadataItem)?void 0:m.type,null==x?void 0:x.saveError]);let oe=(0,Be.Z)("Save As..."),le=q?re:ee;return O.item&&(oe=O.item.isPlaylist?(0,Be.Z)("Update Playlist"):(0,Be.Z)("Update Collection"),le=ie),D&&M?n.createElement("form",{className:e},n.createElement(pt.Z,{autoScroll:!0,className:"DirectoryListAdvancedFilters-scroller-dxJx7G Scroller-scroller-S6_dko",scrollDirection:pt.I.Omni},O.item?n.createElement("div",{className:"DirectoryListAdvancedFilters-editHeading-KUrieG"},O.item.title):null,n.createElement(ki,{meta:o,rules:M.Rule,onChange:ae})),n.createElement("div",{className:"DirectoryListAdvancedFilters-buttonBar-j_0tp0"},n.createElement("div",null,n.createElement(Pr.Z,{className:"DirectoryListAdvancedFilters-formLabel-IGJ0qU FormLabel-label-jjY3xI",name:"labelValue"},(0,Be.Z)("Limit to")),n.createElement(Ir.Z,{className:"DirectoryListAdvancedFilters-textInput-h7yuRR TextInput-input-vbygwE",min:0,name:"labelValue",type:"number",value:V,onChange:se})),n.createElement("div",{className:"DirectoryListAdvancedFilters-buttonCluster-E3LvYL"},Q&&G&&S&&(K||$)?n.createElement(n.Fragment,null,n.createElement(dr,{isDisabled:C,kind:wr.Z.Primary,label:oe,onPress:le},n.createElement(Ui.Z,{contentDirectoryID:S.id,mediaType:Q,metadataType:G,provider:Z,server:b,sourceURI:w,onAddToCollectionPress:K?_.onOpen:void 0,onAddToPlaylistPress:$?B.onOpen:void 0,onAddToSmartCollectionPress:re,onAddToSmartPlaylistPress:ee,onMenuClose:z.onClose,onSaveCollectionPress:X,onSavePlaylistPress:J})),n.createElement(Fi.Z,{defaultDestinationSource:I,defaultTitle:null!=(g=S.title)?g:(0,Be.Z)("New Playlist"),isOpen:B.isOpen,isSmart:H,mediaType:Q,sourceURI:w,onModalClose:te,onSaveSuccess:J}),n.createElement(Vi.Z,{contentDirectoryID:S.id,defaultTitle:null!=(v=S.title)?v:(0,Be.Z)("New Collection"),isOpen:_.isOpen,isSmart:H,metadataType:G,sourceURI:w,onModalClose:ne,onSaveSuccess:X})):null))):n.createElement("div",{className:"DirectoryListAdvancedFilters-loadingContainer-skqjtB DirectoryListAdvancedFilters-container-Wr05rs"},n.createElement(P.Z,null))};var $i=r(79576);const Ki=function(e){var t;return null!=(t=null==e?void 0:e.find((e=>e.active)))?t:null==e?void 0:e[0]};var qi=Object.defineProperty,Yi=Object.defineProperties,Xi=Object.getOwnPropertyDescriptors,Ji=Object.getOwnPropertySymbols,es=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable,rs=(e,t,r)=>t in e?qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ns=parseInt(M.Z.jumpBarCharacterHeight,10),is=parseInt(M.Z.jumpBarMargin,10);function ss({className:e="DirectoryListJumpBar-character-S1KzDO Link-link-vSsQW1",scrollIndex:t,children:r,onCharacterPress:i}){const s=(0,n.useCallback)((()=>{i(t)}),[t,i]);return n.createElement(G.Z,{className:e,onPress:s},r)}function as({className:e="DirectoryListJumpBar-jumpBar-herK_R",activeType:t,viewportHeight:r,listTotalSize:s,onFirstCharacterScroll:a}){const o=Ki(null==t?void 0:t.Sort),{firstCharacters:{items:l}}=(0,i.v9)($i.Z),c=(0,n.useMemo)((()=>l?function(e,t){if(t<1||!e.length)return[];const{characters:r}=e.reduce(((e,t,r)=>{var n,i;return e.characters.push((n=((e,t)=>{for(var r in t||(t={}))es.call(t,r)&&rs(e,r,t[r]);if(Ji)for(var r of Ji(t))ts.call(t,r)&&rs(e,r,t[r]);return e})({},t),i={position:r,scrollIndex:e.scrollIndex},Yi(n,Xi(i)))),e.scrollIndex+=t.size,e}),{characters:[],scrollIndex:0}),n=[r[0],r[r.length-1]],i=Array.from(r).sort(((e,t)=>t.size-e.size));return Array.from(new Set([...n,...i])).slice(0,t).sort(((e,t)=>e.position-t.position))}(l,Math.floor((r-2*is)/ns)):[]),[l,r]),d=!!(null==o?void 0:o.firstCharacterKey),u=c.length>=5;return o&&l&&d&&u&&s>=75?n.createElement("div",{className:e},c.map((e=>n.createElement(ss,{key:e.key,scrollIndex:e.scrollIndex,onCharacterPress:a},e.title)))):null}var os=r(32395),ls=r(28531),cs=r(4681),ds=r(91306);function us(e){const t=e["aria-label"],r=e.className,i=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-tidal-logo-560"};s["aria-hidden"]=!t,s.style=i,s.className=qn.Z.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{d:"M373.331 186.32l-93.324 93.332-93.337-93.341L280.007 93l93.332 93.309L466.67 93 560 186.318l-93.33 93.341-93.339-93.339zm.01 186.669l-93.334 93.34-93.337-93.34 93.337-93.337 93.334 93.337zm-186.67-186.67l-93.338 93.34L0 186.32 93.333 93l93.337 93.318z"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}us.propTypes={"aria-label":Kn().string,className:Kn().string,style:Kn().object};const ps=us;function ms(e){var t,r;return(null==(t=null==e?void 0:e.id)?void 0:t.includes("saved"))?(0,Be.Z)("With a TIDAL subscription you can add Albums, artists, tracks and videos to My TIDAL to keep track of your favorite music."):(null==(r=null==e?void 0:e.id)?void 0:r.includes("playlists"))?(0,Be.Z)("Once you have a TIDAL subscription you can add music to My TIDAL Playlists and keep the party going."):(0,Be.Z)("Once you have a TIDAL subscription you can browse TIDAL content in Plex.")}function hs({className:e,pivot:t}){const r=(0,Er.Z)(),i=(0,n.useCallback)((()=>{r({action:Jt.J9})}),[r]);return n.createElement(ds.Z,{className:e,description:ms(t),icon:n.createElement(ps,null),title:(0,Be.Z)("TIDAL + Plex = music to your ears!")},n.createElement(cs.Z,{rel:"noopener noreferrer",target:"_blank",to:ls.YC,onPress:i},(0,Be.Z)("Learn More")))}var gs=r(42313),ys=r(27649),vs=r(31722),fs=r(27724),bs=r(6274);const Zs=function(e){return c.Z.stringifyParams(e,{encoder:(e,t,r,n)=>"value"===n&&"boolean"==typeof e?e?"1":"0":e})},Ss=function(e,t){const{strippedKey:r,filterRules:n}=(0,bs.Z)(e,t),i=n.reduce(((e,{filter:r,value:n})=>{var i;const{type:s}=t,a=null==(i=t.Field)?void 0:i.find((e=>e.key===r.filter||e.key===`${s}.${r.filter}`));return a&&(e[a.key]=n),e}),{});return c.Z.join(r,Zs(i))};var Ps=r(39296),Is=r(22162),Es=r(67944),ws=r(86607);const Cs="DirectoryListActions-tooltip-YfP_r6 Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu",Ms="DirectoryListActions-menu-oIx0KC Menu-menu-OCzudL";function Ds({className:e,activeType:t,selectedPivot:r,totalSize:a,listActions:o,directoryKey:l,advancedFilters:c}){var p,m;const g=(0,i.I0)(),[y,v,f]=(0,h.c9)(),{containerServer:b,containerProvider:Z,containerKey:S,containerSourceURI:P}=(0,d.U)(),{metricsPage:I,metricsContextTuple:E}=(0,w.Zn)(),C=(0,Er.Z)({identifier:v.metricsIdentifier,mode:"list",type:null==t?void 0:t.type,itemCount:a}),M=(0,vt.Z)(),D=(0,bt.Z)(),O=(0,vt.Z)(),T=(0,bt.Z)(),x=(0,bt.Z)(),A=(0,bt.Z)(),k=(0,s.Z)({serverIdentifier:y.machineIdentifier,providerIdentifier:v.identifier}),N=`${k}${S}`,R=t?mr(t):void 0,L=t?(0,pr.Z)(t.type):void 0,j=(0,n.useMemo)((()=>t?Ss(l,t):l),[t,l]),V=(0,n.useCallback)((e=>{g(fs.rr({server:b,provider:Z,containerKey:S,metricsPage:I,metricsProperties:{contextTuple:E},legacyAction:e}))}),[g,b,Z,S,I,E]),U=(0,n.useCallback)((()=>{C({action:Jt.NH}),V(ys.wA({options:{type:R}}))}),[C,R,V]),F=(0,n.useCallback)((()=>{V(ys.Em({options:{type:R}})),C({action:Jt.cO})}),[C,R,V]),B=(0,n.useCallback)((()=>{C({action:Jt.PR}),V(ys.tP({options:{playAll:!0,next:!1,type:R}})),D.onClose()}),[C,D,R,V]),_=(0,n.useCallback)((()=>{C({action:Jt.pe}),V(ys.tP({options:{playAll:!0,next:!0,type:R}})),D.onClose()}),[C,D,R,V]),z=(0,n.useCallback)((()=>{C({action:Jt.FH}),V(fs.$5()),D.onClose()}),[C,D,V]),H=(0,n.useCallback)((()=>{P&&g(u.Z.actions.throttledRepopulateRequested({server:b,provider:Z,sourceURI:P})),C({action:Jt.DK,mode:"shortcut"})}),[Z,b,P,g,C]),W=(0,n.useCallback)((()=>{C({action:Jt.uf,mode:"shortcut"})}),[C]);return n.createElement(xr.Z,{className:e},o.isPlayVisible?n.createElement(Tr.Z,{icon:Es.Z,title:(0,Be.Z)("Play"),tooltipAttachment:vs.eO,tooltipClassName:Cs,onPress:U}):null,o.isShuffleVisible?n.createElement(Tr.Z,{icon:ws.Z,title:(0,Be.Z)("Shuffle"),tooltipAttachment:vs.eO,tooltipClassName:Cs,onPress:F}):null,o.isAddToPlaylistVisible||o.isAddToCollectionVisible?n.createElement(Tr.Z,{icon:Ps.Z,id:O,title:(0,Be.Z)("Add to..."),tooltipAttachment:vs.eO,tooltipClassName:Cs,onPress:T.onToggle}):null,o.isAddToQueueVisible||o.isOptimizeVisible?n.createElement(Tr.Z,{icon:Is.Z,id:M,title:(0,Be.Z)("More"),tooltipAttachment:vs.eO,tooltipClassName:Cs,onPress:D.onToggle}):null,n.createElement(yt.Z,{className:Ms,isOpen:D.isOpen,target:M,onMenuClose:D.onClose},o.isAddToQueueVisible?n.createElement(Dr.Z,{onPress:_},(0,Be.Z)("Play Next")):null,o.isAddToQueueVisible?n.createElement(Dr.Z,{onPress:B},(0,Be.Z)("Add to Queue")):null,o.isOptimizeVisible?n.createElement(Dr.Z,{onPress:z},(0,Be.Z)("Optimize...")):null),(o.isAddToPlaylistVisible||o.isAddToCollectionVisible)&&R&&L?n.createElement(yt.Z,{className:Ms,isOpen:T.isOpen,target:O,onMenuClose:T.onClose},n.createElement(Ui.Z,{advancedFiltersRoute:r&&!c?(0,Y.Z)({key:j,advancedFilters:1}):void 0,contentDirectoryID:null==f?void 0:f.id,mediaType:R,metadataType:L,provider:v,server:y,sourceURI:N,onAddToCollectionPress:o.isAddToCollectionVisible?x.onOpen:void 0,onAddToPlaylistPress:A.onOpen,onMenuClose:T.onClose,onSaveCollectionPress:H,onSavePlaylistPress:W})):null,o.isAddToPlaylistVisible&&R?n.createElement(Fi.Z,{defaultDestinationSource:k,defaultTitle:null!=(p=null==f?void 0:f.title)?p:(0,Be.Z)("New Playlist"),isOpen:A.isOpen,mediaType:R,sourceURI:N,onModalClose:A.onClose,onSaveSuccess:W}):null,o.isAddToCollectionVisible&&L&&(null==f?void 0:f.id)?n.createElement(Vi.Z,{contentDirectoryID:f.id,defaultTitle:null!=(m=f.title)?m:(0,Be.Z)("New Collection"),isOpen:x.isOpen,metadataType:L,sourceURI:N,onModalClose:x.onClose,onSaveSuccess:H}):null)}var Os=r(71078),Ts=r(31889),xs=r(37920),As=r(69281),ks=r(25814),Ns=r(14522);function Rs({children:e,filter:t,isPending:r,isSelected:i,onFilterSelect:s}){const a=(0,n.useCallback)((()=>{s(t)}),[t,s]);return n.createElement(Dr.Z,{className:i?"DisclosureFilterMenuItem-isSelected-zP_Oat":void 0,onPress:a},n.createElement("span",{className:"DisclosureFilterMenuItem-menuItemContainer-EMRm02 SelectedMenuItem-menuItemContainer-PNDPtO"},n.createElement("span",{className:"DisclosureFilterMenuItem-menuLabel-_c64di SelectedMenuItem-menuLabel-nQZtur"},e),r?n.createElement(P.Z,{className:"DisclosureFilterMenuItem-spinner-NIkM5c Spinner-spinner-Q4B7Qw spin-spin-H8VRGl",size:Ar.Z.Small}):null,!r&&i?n.createElement("span",{className:"DisclosureFilterMenuItem-selectedIcon-iv3_Sg SelectedMenuItem-selectedIcon-FVHL6f"},n.createElement(Ns.Z,{"aria-label":(0,Be.Z)("Selected")})):null))}var Ls=r(37485),js=r(70318);const Vs=(0,Ut.P1)($i.Z,(e=>e.filterOptions));var Us=r(16647);const Fs=function(e,t,r){const n=[...e];for(let r=0;r<e.length;r++)e[r].filter.filterType===ft.H_.Boolean==(t.filterType===ft.H_.Boolean)&&n.splice(r,1);return(0,Us.Z)(n,{filter:t,operator:_n.Z.Equal,value:r})},Bs=function(e,t,r){return!!e.find((e=>e.filter.filter===t.filter&&(null==r||e.value===r)))},_s=function(e,t,r){return e.filter((e=>!(e.filter.filter===t.filter&&(null==r||e.value===r))))},zs=function(e,t){const r=t.reduce(((e,t)=>(e[t.filter.filter]=t.value,e)),{});return c.Z.join(e,Zs(r))};var Hs=r(87858);const Ws="DirectoryListFilterMenu-selectedMenuItem-ix56Fq SelectedMenuItem-menuItemContainer-PNDPtO";function Gs({typeKey:e,directoryKey:t,pendingFilterKey:r,filters:i,activeFilterRules:s,advancedFiltersKey:a,isAdvancedFiltersVisible:o,onClose:l,onFilterSelect:c}){const[d,u]=function(e){return e.reduce(((e,t)=>(t.filterType===ft.H_.Boolean?e[0].push(t):e[1].push(t),e)),[[],[]])}(i),p=(0,Hs.Z)(l);return n.createElement(pt.Z,{autoScroll:!0,className:"DirectoryListFilterMenu-menuScroller-MYVyYd Scroller-scroller-S6_dko"},n.createElement(Ot.Z,{key:"all",isSelected:!s.length,to:(0,Y.Z)({key:e}),onPress:p},(0,Be.Z)("All")),d.map((e=>{const r=Bs(s,e);return n.createElement(Ot.Z,{key:e.key,isSelected:r,to:(0,Y.Z)({key:zs(t,r?_s(s,e):Fs(s,e,!0))}),onPress:p},e.title)})),d.length&&u.length?n.createElement(Ts.Z,null):null,u.map((e=>n.createElement(Rs,{key:e.key,filter:e,isPending:r===e.key,isSelected:Bs(s,e),onFilterSelect:c},e.title))),o?n.createElement(n.Fragment,null,n.createElement(Ts.Z,null),n.createElement(Ot.Z,{to:(0,Y.Z)({key:a,advancedFilters:1}),onPress:p},(0,Be.Z)("Advanced Filters"))):null)}function Qs({directoryKey:e,selectedFilter:t,filterOptions:r,activeFilterRules:i,height:s,onFilterDeselect:a,onMenuClose:o}){const[l,c]=(0,n.useState)(""),d=r.find((e=>Bs(i,t,e.value))),u=(0,Hs.Z)(o),p=(0,n.useCallback)((e=>{c(e.target.value)}),[]);return n.createElement("div",{className:"DirectoryListFilterMenu-filterOptionsContainer-kDSrDz","data-testid":"secondFiltersList",style:{height:Math.max(s,356)}},n.createElement("div",{className:"DirectoryListFilterMenu-headerContainer-vKpGq3"},n.createElement("div",{className:"DirectoryListFilterMenu-header-aeGx3M","data-testid":"filterHeader"},n.createElement("div",{className:"DirectoryListFilterMenu-headerTitle-ZZOh4J"},n.createElement(G.Z,{"data-testid":"previousFilters",onPress:a},n.createElement(Os.e,{align:"baseline","aria-label":(0,Be.Z)("Back")}),n.createElement("span",{className:"DirectoryListFilterMenu-filterText-GAp8r5"},t.title))),r.length>12?n.createElement(Ir.Z,{className:"DirectoryListFilterMenu-searchInput-Oqorls TextInput-input-NqTdW3 input-input-XAtklw",name:"filterOptionQuery",placeholder:(0,Be.Z)("Filter {filterTitle}",{filterTitle:t.title}),value:l,onChange:p}):null),n.createElement(Ts.Z,null)),r.length?n.createElement(pt.Z,{autoScroll:!0,className:"DirectoryListFilterMenu-filterOptionsScroller-GAH_7y DirectoryListFilterMenu-menuScroller-MYVyYd Scroller-scroller-S6_dko"},d?n.createElement(Ot.Z,{key:d.key,className:Ws,isSelected:!0,to:(0,Y.Z)({key:zs(e,_s(i,t))}),onPress:u},d.title):null,r.map((r=>{if(r===d||!r.title.toLowerCase().includes(l.toLowerCase()))return null;const s=Bs(i,t,r.value);return n.createElement(Ot.Z,{key:r.key,className:Ws,isSelected:s,to:(0,Y.Z)({key:zs(e,Fs(i,t,r.value))}),onPress:u},r.title)}))):n.createElement("div",{className:"DirectoryListFilterMenu-emptyText-VvAuTq"},(0,Be.Z)("No options")))}function $s({className:e,directoryKey:t,selectedPivot:r,type:s}){const[a,o]=(0,h.c9)(),l=(0,i.I0)(),[c,d]=(0,n.useState)(),[u,{height:p}]=(0,g.Z)(),m=(0,vt.Z)(),{isOpen:y,onToggle:v,onClose:f}=(0,bt.Z)(),b=null==s?void 0:s.Filter,Z=(0,n.useMemo)((()=>(0,js.Z)(t)),[t]),S=(0,i.v9)(Z),P=(0,i.v9)(Vs),I=(0,n.useMemo)((()=>c?P[c]:void 0),[c,P]),E=(0,n.useMemo)((()=>null==b?void 0:b.find((e=>e.key===c))),[c,b]),w=(0,n.useMemo)((()=>({scrollDirection:xs.Hn})),[]),C=(0,n.useMemo)((()=>null==S?void 0:S.filterRules.find((({filter:e})=>e.filterType!==ft.H_.Boolean))),[null==S?void 0:S.filterRules]),M=(0,n.useMemo)((()=>C?P[C.filter.key]:void 0),[C,P]),D=(0,n.useMemo)((()=>null==S?void 0:S.filterRules.map((e=>{var t;const r=C&&C.filter.filter===e.filter.filter?null==(t=P[C.filter.key])?void 0:t.options.find((e=>e.value===(null==C?void 0:C.value))):void 0;return r&&r.field===(null==C?void 0:C.filter.filter)?r.title:e.filter.title})).join(", ")),[null==S?void 0:S.filterRules,P,C]),O=!!(0,gr.Z)(o,he.zW.QueryParser),T=(0,n.useMemo)((()=>s?Ss(t,s):t),[s,t]),x=(0,n.useCallback)((e=>{l(Ls.Z.actions.fetchFilterOptionsRequested({server:a,provider:o,filter:e}))}),[l,o,a]),A=(0,n.useCallback)((e=>{d(e.key),x(e)}),[x]),k=(0,n.useCallback)((()=>{d(void 0)}),[]),N=(0,n.useCallback)((()=>{f()}),[f]);if((0,n.useEffect)((()=>{!C||(null==M?void 0:M.isPopulated)||(null==M?void 0:M.isPending)||x(C.filter)}),[M,x,C]),!s||!b||!S)return null;const{strippedKey:R,filterRules:L}=S;return n.createElement(n.Fragment,null,n.createElement(ks.Z,{className:e,direction:y?bn.Z.Up:bn.Z.Down,id:m,onPress:v},D||(0,Be.Z)("All")),n.createElement(yt.Z,{isOpen:y,scrollerProps:w,size:As.ln,target:m,onMenuClose:N},n.createElement("div",{ref:u,className:"DirectoryListFilterMenu-measureContainer-HEql3l"},(null==I?void 0:I.isPopulated)&&E?n.createElement(Qs,{activeFilterRules:L,directoryKey:R,filterOptions:I.options,height:p,selectedFilter:E,onFilterDeselect:k,onMenuClose:N}):n.createElement(Gs,{activeFilterRules:L,advancedFiltersKey:T,directoryKey:R,filters:b,isAdvancedFiltersVisible:O&&!!r,pendingFilterKey:(null==I?void 0:I.isPending)?c:void 0,typeKey:s.key,onClose:N,onFilterSelect:A}))))}var Ks=r(89377),qs=r(89146);function Ys({className:e,directoryKey:t,sorts:r}){const i=(0,vt.Z)(),{isOpen:s,onToggle:a,onClose:o}=(0,bt.Z)(),l=Ki(r),d=(0,Hs.Z)(o);return!r||!l||r.length<2?null:n.createElement(n.Fragment,null,n.createElement(ks.Z,{className:e,direction:s?bn.Z.Up:bn.Z.Down,id:i,onPress:a},(0,Be.Z)("By {sortTitle}",{sortTitle:l.title})),n.createElement(yt.Z,{isOpen:s,target:i,onMenuClose:o},r.map((e=>n.createElement(Ot.Z,{key:e.key,iconComponent:e.activeDirection===ft.Sr.Ascending?Ks.Z:qs.Z,isSelected:e.active,to:(0,Y.Z)({key:c.Z.join(t,{sort:Dt(e)},{parseParams:!0})}),onPress:d},e.title)))))}var Xs=r(90245);function Js({className:e,activeType:t,types:r,advancedFilters:i,directoryKey:s}){const a=(0,vt.Z)(),{isOpen:o,onToggle:l,onClose:c}=(0,bt.Z)(),d=(0,Hs.Z)(c);return!r||!t||r.length<2?null:n.createElement(n.Fragment,null,n.createElement(ks.Z,{className:e,direction:o?bn.Z.Up:bn.Z.Down,id:a,onPress:l},t.title),n.createElement(yt.Z,{isOpen:o,target:a,onMenuClose:c},r.map((e=>{const r=(0,pr.Z)(e.type);return n.createElement(Ot.Z,{key:e.key,isSelected:t===e&&e.active,to:e.type===p.U.Folder?(0,Y.Z)({key:e.key,advancedFilters:void 0}):(0,Y.Z)({key:i&&r?s.replace(/type=\w+/,`type=${(0,Xs.Z)(r)}`):e.key}),onPress:d},e.title)}))))}var ea=r(98725),ta=r(5103),ra=r(65151);const na=(0,Ut.P1)(ra.Z,(e=>e?Ki(e.Sort):void 0)),ia=function({className:e="PageHeaderLeftGutter-container-OCV3jt",innerClassName:t="PageHeaderLeftGutter-innerContainer-IRyE9_",children:r}){return n.createElement("div",{className:e},n.createElement("div",{className:t},r))};function sa({advancedFilters:e}){const{containerKey:t}=(0,d.U)(),r=(0,n.useMemo)((()=>(0,js.Z)(t)),[t]),s=(0,i.v9)(r),a=(0,i.v9)(ra.Z),o=(0,i.v9)(na),l=(0,Hs.Z)();return(null==s?void 0:s.filterRules.length)||e?n.createElement(ia,{className:"DirectoryToolbarClearFiltersButton-gutter-II6uw0 PageHeaderLeftGutter-container-OCV3jt"},n.createElement(ta.Z,{className:"DirectoryToolbarClearFiltersButton-resetButton-AGZzcd ToolbarButton-toolbarButton-PCjB_g",to:(0,Y.Z)({key:a?c.Z.join(a.key,o?{sort:o.activeDirection===ft.Sr.Ascending?o.key:o.descKey}:{},{parseParams:!0}):"",advancedFilters:void 0}),tooltip:(0,Be.Z)("Clear Filter"),onPress:l},n.createElement(ea.R,null))):null}var aa=r(23574),oa=r(78891),la=r(70513);const ca="DirectoryListToolbar-disclosureArrowLink-Gy3s4r DisclosureArrowLink-disclosureArrowLink-BTB_kg Link-link-vSsQW1";function da({className:e="DirectoryListToolbar-pageHeader-DBpQaA PageHeader-pageHeader-e2k66t",directoryKey:t,meta:r,activeType:i,selectedPivot:s,advancedFilters:a,totalSize:o}){var l,c,u,m,g,y;const[v,f]=(0,h.c9)(),{listStyle:b}=(0,d.U)(),Z=(0,n.useMemo)((()=>function({server:e,provider:t,activeType:r}){const n=r?vr[r.type]:void 0;return n?n.reduce(((n,i)=>{const s=Sr[i];return n[i]=!!(e&&t&&r)&&s({server:e,provider:t,activeType:r}),n}),{}):{}}({server:v,provider:f,activeType:i})),[i,f,v]),S=(0,n.useMemo)((()=>(0,bi.su)(Z).some((e=>e))),[Z]),P=null!=(c=null==(l=null==r?void 0:r.Type)?void 0:l.length)?c:0,I=null!=(m=null==(u=null==i?void 0:i.Filter)?void 0:u.length)?m:0,E=null!=(y=null==(g=null==i?void 0:i.Sort)?void 0:g.length)?y:0;return!r||P<=1&&I<1&&E<=1?null:n.createElement(aa.Z,{className:e},n.createElement(oa.Z,null,n.createElement(sa,{advancedFilters:a}),a?n.createElement("span",{className:"DirectoryListToolbar-infoText-CVhmMp"},(0,Be.Z)("Advanced Filters")):n.createElement($s,{className:ca,directoryKey:t,selectedPivot:s,type:i}),n.createElement(Js,{activeType:i,advancedFilters:a,className:ca,directoryKey:t,types:null==r?void 0:r.Type}),b!==p.n.Table?n.createElement(Ys,{className:ca,directoryKey:t,sorts:null==i?void 0:i.Sort}):null,null!=o?n.createElement(gs.Z,null,o):null),S?n.createElement(la.Z,null,n.createElement(Ds,{activeType:i,advancedFilters:a,directoryKey:t,listActions:Z,selectedPivot:s,totalSize:o})):null)}var ua=r(86832);const pa=(0,wt.Z)("savedDirectoryListKeys");var ma=r(33434);const ha=(0,ma.Z)((function(e,t,r){return(0,Ut.P1)(pa,(n=>{const i=r?(0,s.Z)({serverIdentifier:e,providerIdentifier:t,key:r}):void 0;return i?n[i]:void 0}))}));function ga(e){return e&&c.Z.parseUri(e).pathname}var ya=Object.defineProperty,va=Object.defineProperties,fa=Object.getOwnPropertyDescriptors,ba=Object.getOwnPropertySymbols,Za=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable,Pa=(e,t,r)=>t in e?ya(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ia=(e,t)=>{for(var r in t||(t={}))Za.call(t,r)&&Pa(e,r,t[r]);if(ba)for(var r of ba(t))Sa.call(t,r)&&Pa(e,r,t[r]);return e};var Ea=r(73278),wa=r(97017);const Ca=(0,ma.Z)((function(e){return(0,Ut.P1)(na,(0,js.Z)(e),((e,t)=>t&&(null==e?void 0:e.firstCharacterKey)?c.Z.join(zs(e.firstCharacterKey,t.filterRules),{sort:e.activeDirection===ft.Sr.Ascending?e.key:e.descKey,includeCollections:1,includeExternalMedia:1},{parseParams:!0}):void 0))}));var Ma=r(90106),Da=r(39680);var Oa=Object.defineProperty,Ta=Object.defineProperties,xa=Object.getOwnPropertyDescriptors,Aa=Object.getOwnPropertySymbols,ka=Object.prototype.hasOwnProperty,Na=Object.prototype.propertyIsEnumerable,Ra=(e,t,r)=>t in e?Oa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function La({directorySourceURI:e,directoryKey:t,selectedPivot:r,listStyle:I}){var E,w,C;const M=(0,i.I0)(),[D,O,T]=(0,h.c9)(),x=(0,y.Z)(),A=a.Z.parseBoolean(x.advancedFilters),[k,{height:N}]=(0,g.Z)(),{meta:R,metadataListSourceURI:L,directorySourceURI:j,firstCharacters:V}=(0,i.v9)($i.Z),U=R?(0,zi.Z)(R):void 0,F=null!=(E=null==U?void 0:U.type)?E:p.U.Mixed,B=null==U?void 0:U.subtype,_=function({machineIdentifier:e,providerIdentifier:t,directoryKey:r,selectedPivot:n,contentDirectory:s}){const a=(0,i.v9)(ha(e,t,null==n?void 0:n.key)),o=r||(null!=a?a:null==n?void 0:n.key),l=ga(o),c=ga(null==n?void 0:n.key),d=ga(null==s?void 0:s.key),u=d?new RegExp(`^${d}(/\\w+)+`):void 0,p=l&&(null==u?void 0:u.test(l));return c&&(null==u?void 0:u.test(c))&&!p?(ua.Z.warn(`Unknown directory key ${o}, using pivot instead`),null==n?void 0:n.key):o}({machineIdentifier:D.machineIdentifier,providerIdentifier:null!=(w=O.providerIdentifier)?w:O.identifier,directoryKey:t,selectedPivot:r,contentDirectory:T}),z=(0,n.useMemo)((()=>_?c.Z.join(_,{includeCollections:1,includeExternalMedia:1}):void 0),[_]),H=(0,n.useMemo)((()=>(0,s.Z)({serverIdentifier:D.machineIdentifier,providerIdentifier:O.providerIdentifier,key:z})),[z,O.providerIdentifier,D.machineIdentifier]),W=(0,n.useMemo)((()=>(0,m.Z)(H)),[H]),G=(0,i.v9)(W),Q=(0,i.v9)(Ca(z)),[$,K]=(0,n.useState)(),q=(0,n.useMemo)((()=>(0,wa.Z)(j)),[j]),Y=(0,i.v9)(q),X=null!=I?I:Y,J=(0,i.v9)(Hi.Z),ee=null!=Q&&!(null==V?void 0:V.isPopulated)&&!(null==V?void 0:V.error)||!(null==G?void 0:G.isPopulated)&&!(null==G?void 0:G.error),te=(0,v.Z)(ee,!0,250),re=(0,n.useCallback)((e=>{var t;L&&M(u.Z.actions.fetchRangeRequested((t=((e,t)=>{for(var r in t||(t={}))ka.call(t,r)&&Ra(e,r,t[r]);if(Aa)for(var r of Aa(t))Na.call(t,r)&&Ra(e,r,t[r]);return e})({},e),Ta(t,xa({server:D,provider:O,sourceURI:L})))))}),[M,D,O,L]),ne=(0,n.useCallback)((()=>{L&&M(u.Z.actions.repopulateRangeRequested({server:D,provider:O,sourceURI:L}))}),[M,L,O,D]),ie=(0,n.useCallback)((e=>{K(e)}),[]);if((0,f.Z)({},!!(null==G?void 0:G.isPopulated)),(0,Ea.Z)(ne),function({machineIdentifier:e,providerIdentifier:t,directoryKey:r,meta:a,activeType:o,selectedPivot:l,metadataList:c,advancedFilters:d}){const u=(0,i.I0)(),m=(0,i.v9)(pa),h=(0,i.v9)(ha(e,t,null==l?void 0:l.key)),g=(null==l?void 0:l.key)?(0,s.Z)({serverIdentifier:e,providerIdentifier:t,key:null==l?void 0:l.key}):void 0;(0,n.useEffect)((()=>{var e,t;!(g&&r&&l&&l.type===he.F6.List&&h!==r)||l.key===r&&null==h||!(null==c?void 0:c.isPopulated)||(null==a?void 0:a.Pivot)||(null==o?void 0:o.type)===p.U.Folder&&(null==o?void 0:o.key)!==r||d||u((0,gt.LN)({savedDirectoryListKeys:(e=Ia({},m),t={[g]:r},va(e,fa(t)))}))}),[null==c?void 0:c.isPopulated,r,u,g,h,m,l,null==a?void 0:a.Pivot,null==o?void 0:o.type,null==o?void 0:o.key,d])}({machineIdentifier:D.machineIdentifier,providerIdentifier:null!=(C=O.providerIdentifier)?C:O.identifier,directoryKey:_,meta:R,activeType:U,selectedPivot:r,metadataList:G,advancedFilters:A}),(0,n.useEffect)((()=>{(0,l.c9)((()=>{M(Ls.Z.actions.resetMeta())}))}),[M,e]),(0,n.useEffect)((()=>(z&&(0,l.c9)((()=>{M(Ls.Z.actions.initializeListRequested({server:D,provider:O,sourceURI:H,metadataListSourceURI:L,directorySourceURI:e}))})),()=>{(0,l.c9)((()=>{L&&M(u.Z.actions.reset({sourceURI:L}))}))})),[M,z,L,e,H]),(0,n.useEffect)((()=>{Q&&null!=(null==G?void 0:G.totalSize)&&M(Ls.Z.actions.fetchFirstCharactersRequested({server:D,provider:O,key:Q}))}),[M,D,O,Q,null==G?void 0:G.totalSize]),(0,n.useEffect)((()=>{null!=$&&K(void 0)}),[$]),!_)return n.createElement(Z.Z,null);if(null==G?void 0:G.error){const{status:e}=G.error;return 404===e?n.createElement(Z.Z,null):406===e?n.createElement(hs,{pivot:r}):n.createElement(S.Z,null)}return j!==e?n.createElement(b.Z,null,n.createElement(P.Z,null)):n.createElement(d.ZP,{containerKey:z,containerMeta:R,containerProvider:O,containerServer:D,containerSourceURI:H,containerSubtype:B,containerType:F,listStyle:X},J?n.createElement(Ma.Z,null):n.createElement(da,{activeType:U,advancedFilters:A,directoryKey:_,meta:R,selectedPivot:r,totalSize:null==G?void 0:G.totalSize}),n.createElement(Da.Z,{providerEntityID:O.entityID,serverEntityID:D.entityID}),A&&R?n.createElement(Qi,{directoryKey:_,meta:R,totalSize:null==G?void 0:G.totalSize}):null,null==(null==G?void 0:G.totalSize)||te?n.createElement(b.Z,null,n.createElement(P.Z,null)):n.createElement("div",{ref:k,className:"DirectoryListPageContent-listContainer-gWP4ft"},N?n.createElement(n.Fragment,null,0===G.totalSize?n.createElement(os.Z,{directoryKey:_,selectedPivot:r}):n.createElement(Yt,{activeType:U,className:"DirectoryListPageContent-pageContentScroller-O3oHlt PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko",items:G.items,listType:F,scrollerKey:"DirectoryListPage",smoothScroll:!(0,o.G6)(),subtype:B,targetScrollIndex:$,totalSize:G.totalSize,onPageRequest:re})):null,U&&N&&null!=G.totalSize?n.createElement(as,{activeType:U,listTotalSize:G.totalSize,viewportHeight:N,onFirstCharacterScroll:ie}):null))}},32395:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(67294),i=r(28216),s=r(12644),a=r(67900),o=r(30277),l=r(69022),c=r(74226),d=r(73788),u=r(40493),p=r(78389),m=r(1245),h=r(88723),g=r(44811),y=r(4681),v=r(50439),f=r(83700),b=r(70318),Z=r(65151),S=r(863),P=r(87858),I=r(1582);function E({className:e,directoryKey:t,selectedPivot:r}){const[E,w,C]=(0,g.c9)(),M=c.wB(w.identifier,c.Ll),D=(0,n.useMemo)((()=>(0,h.Z)(E,w)),[w,E]),O=!!(0,i.v9)(D),T=(0,m.Z)(E,C),x=(0,n.useMemo)((()=>(0,b.Z)(t)),[t]),A=(0,i.v9)(Z.Z),k=(0,i.v9)(x),N=(0,P.Z)();return(null==r?void 0:r.id)===l.xW||(null==r?void 0:r.id)===l.$c?n.createElement(v.Z,{className:e,description:(0,d.Z)("You can add movies and shows to your Watchlist to catch up on later. Once you finish watching an item in the list, or mark it as watched it will automatically be removed from the list."),icon:n.createElement("div",{className:"EmptyDirectoryPageContent-watchlistIcon-mof_si"},n.createElement(s.v,null)),title:(0,d.Z)("Watchlist")}):(null==r?void 0:r.id)===l.kW?n.createElement(v.Z,{className:e,icon:n.createElement(a._,null),title:(0,d.Z)("There are no shared items of this type")}):(null==k?void 0:k.filterRules.length)?n.createElement(v.Z,{description:(0,d.Z)("Use the menu above to change the active filter"),icon:(null==C?void 0:C.type)?n.createElement(u.Z,{type:C.type}):void 0,title:(0,d.Z)("The active filter has no matches")},n.createElement(y.Z,{kind:f.Z.Primary,to:(0,S.Z)({key:k.strippedKey}),onPress:N},(0,d.Z)("Clear filter"))):M?O?n.createElement(v.Z,{className:e,description:(0,d.Z)("Hang tight while we download all the data for what's on"),icon:n.createElement(o.U,null),title:(0,d.Z)("We're now building your Guide")}):n.createElement(v.Z,{className:e,description:(0,d.Z)("Please verify your channel mappings and refresh the Guide"),icon:n.createElement(o.U,null),title:(0,d.Z)("Your Guide is empty")},n.createElement(y.Z,{kind:f.Z.Primary,to:(0,I.Z)(E.machineIdentifier,"manage","dvr")},(0,d.Z)("Go to DVR Settings"))):T?n.createElement(v.Z,{className:e,description:(0,d.Z)("Hang tight while we look for content"),icon:(null==C?void 0:C.type)?n.createElement(u.Z,{type:C.type}):void 0,title:C?(0,d.Z)('"{directoryTitle}" is currently being updated',{directoryTitle:C.title}):(0,d.Z)("This page is currently being updated")}):(null==A?void 0:A.type)===p.U.Folder?n.createElement(v.Z,{className:e,description:(0,d.Z)("There are no items in this folder"),icon:(null==C?void 0:C.type)?n.createElement(u.Z,{type:C.type}):void 0,title:(0,d.Z)("Empty Folder")}):n.createElement(v.Z,{className:e,description:E.isFullOwnedServer?(0,d.Z)("Expecting more? Visit the Manage Libraries page to add folders and scan library files."):null,icon:(null==C?void 0:C.type)?n.createElement(u.Z,{type:C.type}):void 0,title:C?(0,d.Z)('"{directoryTitle}" is empty',{directoryTitle:E.isCloud?null==r?void 0:r.title:C.title}):(0,d.Z)("This page is empty")},E.isFullOwnedServer?n.createElement(y.Z,{kind:f.Z.Primary,to:(0,I.Z)(E.machineIdentifier,"manage","libraries")},(0,d.Z)("Manage Libraries")):null)}},71899:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(67294),i=r(28216),s=r(75404),a=r(24348),o=r(44811),l=r(71473),c=r(84105),d=r(20896),u=r(45186),p=r(94184),m=r.n(p),h=r(87264),g=r(10125),y=r(14580),v=r(83782),f=r(8059),b=r(55319),Z=r(13508),S=r(84332),P=r(24107);const I={placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[parseInt(P.Z.pageHeaderTabButtonLeftRightMargin,10)]}}]};function E({pivots:e,selectedPivot:t,onPivotPress:r}){var i;const[s,a,c]=(0,o.c9)(),d=(0,v.Z)(),u=(0,b.Z)();return n.createElement("div",{className:"PivotTabDropdown-container-KCsIVr","data-testid":"tabDropDown",id:d},n.createElement(l.Z,{className:"PivotTabDropdown-button-ktD72U PageHeaderTabButton-button-aP9Avj Button-button-TxWeuE Link-link-SxPFpG",isSelected:!!t,onPress:u.onToggle},n.createElement("div",{className:"PivotTabDropdown-buttonContents-dK9CFT"},n.createElement("div",{className:"PivotTabDropdown-title-wqZjjy"},null!=(i=null==t?void 0:t.title)?i:e[0].title),n.createElement(h.Z,{className:m()("PivotTabDropdown-disclosureArrow-z_MOta DisclosureArrow-disclosureArrow-NTDkGd",!!t&&"PivotTabDropdown-isSelected-UQdIdh"),direction:u.isOpen?f.UP:f.WV}))),n.createElement(g.Z,{isOpen:u.isOpen,options:I,target:d,onMenuClose:u.onClose},e.map(((e,i)=>{const o=(0,Z.Z)(s,a,c,e);return o?n.createElement(S.Z,{key:i,isSelected:e===t,to:o,value:e.key,onPress:(0,y.Z)(r,u.onClose)},e.title):null}))))}var w=r(38713),C=r(87858);function M({pivots:e,selectedPivot:t}){const[r,p,m]=(0,o.c9)(),[h,{width:g}]=(0,c.Z)(),[y,{width:v}]=(0,c.Z)(),f=(0,i.v9)(u.Z),[b,S]=(0,n.useState)(v),P=v||b,I=(0,n.useMemo)((()=>(0,w.Z)(e,f)),[e,f]),M=I.length<2,D=I.length>1&&P>g,O=(0,d.Z)({identifier:p.metricsIdentifier,origin:a.zQ}),T=(0,C.Z)((0,n.useCallback)((()=>{O({action:s.oG})}),[O]));return(0,n.useEffect)((()=>{v&&S(v)}),[v]),M?null:n.createElement("div",{ref:h,className:"PivotTabsPageHeaderCenter-pageHeaderCenter-HE9JcN PageHeaderCenter-pageHeaderCenter-mMF86x"},D?n.createElement(E,{pivots:I,selectedPivot:t,onPivotPress:T}):n.createElement("div",{ref:y},I.map(((e,i)=>{const s=(0,Z.Z)(r,p,m,e);return s?n.createElement(l.Z,{key:i,isSelected:e===t,to:s,onPress:T},e.title):null}))))}},37485:(e,t,r)=>{"use strict";r.d(t,{Z:()=>D});var n=r(42902),i=r(7069),s=r(85229),a=r(74226),o=r(47276),l=r(35076),c=r(8089),d=r(35975),u=r(25004),p=r(59405),m=r(91364),h=r(65978),g=r(78535),y=r(83564),v=r(11897),f=r(32601),b=Object.defineProperty,Z=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const C={meta:void 0,metadataListSourceURI:void 0,filterOptions:{},firstCharacters:{isPending:!1,isPopulated:!1,error:null,items:[]},hubsList:{sourceURI:void 0,lastFetchedAt:void 0,isPending:!1,isPopulated:!1,error:null,hubs:[]}};function M(e,t){var r;const n=t.includes(a.IS)?(0,l.Z)({serverIdentifier:o.X,providerIdentifier:a.Xp}):t;(null==(r=e.hubsList.sourceURI)?void 0:r.includes(n))&&e.hubsList.hubs.forEach((e=>{e.isStale=!0}))}const D=(0,s.oM)({name:"directory",initialState:C,reducers:{reset:()=>C,resetMeta(e){e.meta=void 0},resetHubs(e){e.hubsList=C.hubsList},initializeListRequested(e,{payload:t}){e.metadataListSourceURI=t.sourceURI,e.directorySourceURI=t.directorySourceURI},markHubsStaleRequested(e){e.hubsList.isPending=!1},markHubsStale(e){e.hubsList.hubs.forEach((e=>{e.isStale=!0}))},markHubsStaleCanceled(e){},fetchHubsRequested(e,{payload:t}){e.hubsList.sourceURI=t.sourceURI,(0,f.er)(e.hubsList)},fetchHubsSucceeded(e,{payload:t}){(0,f.vv)(e.hubsList),e.hubsList.hubs=t.data.hubs,e.hubsList.lastFetchedAt=Date.now(),e.title=t.data.title,e.meta=t.data.meta},fetchHubsFailed(e,{payload:t}){(0,f.VQ)(e.hubsList,t.error)},fetchFilterOptionsRequested(e,{payload:t}){const r=t.filter;e.filterOptions[r.key]||(e.filterOptions[r.key]={isPending:!1,isPopulated:!1,error:null,options:[]}),(0,f.er)(e.filterOptions[r.key])},fetchFilterOptionsSucceeded(e,{payload:t}){const r=t.filter;(0,f.vv)(e.filterOptions[r.key]),e.filterOptions[r.key].options=t.filterOptions},fetchFilterOptionsFailed(e,{payload:t}){const r=t.filter;(0,f.VQ)(e.filterOptions[r.key],t.error)},fetchFirstCharactersRequested(e,t){(0,f.er)(e.firstCharacters)},fetchFirstCharactersSucceeded(e,{payload:t}){(0,f.vv)(e.firstCharacters),e.firstCharacters.items=t.firstCharacters},fetchFirstCharactersFailed(e,{payload:t}){(0,f.VQ)(e.firstCharacters,t.error)}},extraReducers(e){e.addCase(p.Z.actions.fetchRangeSucceeded,((e,{payload:t})=>{t.sourceURI===e.metadataListSourceURI&&(e.title=t.data.title,t.data.meta&&(e.meta=t.data.meta))})),e.addCase(p.Z.actions.reset,((e,{payload:t})=>{return t.sourceURI===e.metadataListSourceURI?(r=((e,t)=>{for(var r in t||(t={}))I.call(t,r)&&w(e,r,t[r]);if(P)for(var r of P(t))E.call(t,r)&&w(e,r,t[r]);return e})({},C),n={filterOptions:e.filterOptions,meta:e.meta},Z(r,S(n))):e;var r,n})),e.addCase(p.Z.actions.repopulateRangeSucceeded,((e,{payload:t})=>{e.hubsList.hubs.forEach((e=>{e.sourceURI===t.sourceURI&&(e.isStale=!1)}))})),e.addCase(y.Z.actions.ended,((e,{payload:t})=>{M(e,t.source)})),e.addCase(m.Z.actions.sessionStopped,((e,{payload:t})=>{M(e,(0,l.Z)({serverIdentifier:t.server.machineIdentifier}))})),e.addCase(h.Z.actions.libraryScanUpdated,((e,{payload:t})=>{M(e,(0,l.Z)({serverIdentifier:t.server.machineIdentifier}))})),e.addCase(u.Z.actions.toggleWatchlistSucceeded,(e=>{!function(e){var t;const r=(0,l.Z)({serverIdentifier:o.X,providerIdentifier:a.Xp});(null==(t=e.hubsList.sourceURI)?void 0:t.includes(r))&&e.hubsList.hubs.forEach((e=>{e.hubIdentifier===d.F.Watchlist&&(e.isStale=!0)}))}(e)})),e.addCase(v.ZP.actions.preferredServicesSaveSucceeded,(e=>{!function(e){e.hubsList.lastFetchedAt=(0,n.Z)((0,i.Z)(new Date,1))}(e)})),e.addCase(u.Z.actions.playedStatusUpdateSucceeded,((e,{payload:t})=>{M(e,(0,l.Z)({serverIdentifier:t.server.machineIdentifier,providerIdentifier:t.provider.identifier}))})),e.addCase(u.Z.actions.metadataProcessed,((e,{payload:t})=>{const{serverIdentifier:r,providerIdentifier:n}=(0,c.Z)(t.sourceURI);M(e,(0,l.Z)({serverIdentifier:r,providerIdentifier:n}))})),e.addCase(g.Z.actions.languageChanged,(e=>{e.hubsList=C.hubsList}))}})},72324:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(67294),i=r(28216),s=r(84503),a=r(6742),o=r(36103),l=r(22222),c=r(34219);const d=(0,c.Z)("lastSourcePivots"),u=(0,c.Z)("shouldSaveLastSourcePivots"),p=(0,r(33434).Z)((function(e,t,r){return(0,l.P1)(d,u,((n,i)=>{if(i)return n[(0,a.Z)(e,t,r)]}))}));var m=r(45186),h=r(29028),g=r(38713);const y=function(e=[],t){return e.find((e=>e.id?e.id===t||e.key===t:!!e.key&&e.key===t))};var v=Object.defineProperty,f=Object.defineProperties,b=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(Z)for(var r of Z(t))P.call(t,r)&&I(e,r,t[r]);return e};const w=function({machineIdentifier:e,providerIdentifier:t,contentDirectoryID:r,pageType:l,pivotID:c,ignoreShouldSaveLastSourcePivotsSetting:v}){var Z;const S=(0,i.I0)(),P=(0,i.v9)(h.Z),I=(0,i.v9)((0,o.Z)(e,t,r)),w=(0,i.v9)(u),C=(0,i.v9)(d),M=(0,i.v9)(p(e,t,r)),D=(0,i.v9)(m.Z);let O;if(l)O=null==(Z=null==P?void 0:P.Pivot)?void 0:Z.find((e=>e.active));else{const e=(0,g.Z)(null==I?void 0:I.pivots,D);O=y(e,c),!O&&M&&!v&&(null==e?void 0:e.find((e=>e.key===M)))&&(O=y(null==I?void 0:I.pivots,M)),O||(O=null==e?void 0:e[0])}const T=r?(0,a.Z)(e,t,r):void 0;return(0,n.useEffect)((()=>{var e,t;w&&!v&&T&&O&&M!==O.key&&null==l&&S((0,s.LN)({lastSourcePivots:(e=E({},C),t={[T]:O.key},f(e,b(t)))}))}),[S,v,M,C,c,l,O,w,T]),O}},73278:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(28216),s=r(74226),a=r(88723),o=r(56844),l=r(44811),c=r(48321);const d=function(e){const[t,r,d]=(0,l.c9)(),u=(0,n.useMemo)((()=>function(e,t,r){return s.wB(t.identifier,s.Y3)?r?(0,o.Z)(e,r):()=>{}:s.wB(t.identifier,s.Ll)?(0,a.Z)(e,t):()=>{}}(t,r,d)),[d,r,t]),p=!(!(0,i.v9)(u)&&!(null==d?void 0:d.refreshing)),m=(0,c.Z)(p);(0,n.useEffect)((()=>{let t;return p?t=window.setInterval((()=>{null==e||e()}),1e4):!p&&m&&(null==e||e()),()=>{window.clearInterval(t)}}),[e,p,m])}},97017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(34219),s=r(29053);const a=function(e){return(0,n.P1)((0,i.Z)("directoryListStyles"),(0,s.Z)(e),((t,r)=>{if(!e||!r.length)return;const n=t[e];return n&&r.includes(n)?n:r[0]}))}},29053:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(22222),i=r(2595),s=r(78389),a=r(29028),o=r(46074);const l=function(e){return(0,n.P1)(a.Z,(t=>{const r=t?(0,o.Z)(t):void 0;if(!r||!e)return[s.n.Grid];if((0,i.Z)(e))return[s.n.Grid];if(r.type===s.U.Folder)return[s.n.Folder];switch(r.type){case s.U.Movie:case s.U.Show:case s.U.Album:case s.U.Episode:return r.Sort?[s.n.Grid,s.n.Details,s.n.Table]:[s.n.Grid,s.n.Details];case s.U.Artist:case s.U.Season:return r.Sort?[s.n.Grid,s.n.Table]:[s.n.Grid];case s.U.Track:return[r.Sort?s.n.Table:s.n.Grid];default:return[s.n.Grid]}}))}},70318:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(6274),s=r(65151);const a=function(e){return(0,n.P1)(s.Z,(t=>e?(0,i.Z)(e,t):void 0))}},79576:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(18585);const s=(0,n.P1)(i.Z,(e=>e.directory))},29028:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(79576);const s=(0,n.P1)(i.Z,(e=>e.meta))},65151:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(46074),s=r(29028);const a=(0,n.P1)(s.Z,(e=>e?(0,i.Z)(e):void 0))},38713:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(12360);function i(e=[],t){return e.filter((e=>!(0,n.Z)(e)&&function(e,t){return!t||!!e.features.find((e=>e.uuid===t||e.id===t))}(t,e.requires)))}},16647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(23642),i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e,t){const r=[...e];if(t.filter.filterType===n.H_.Boolean){const e=r.findIndex((e=>e.filter.filter===t.filter.filter)),n=-1===e?0:e,p=(i=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({},t),u={value:"string"==typeof t.value?"1"===t.value:t.value},s(i,a(u)));-1===e?r.push(p):r.splice(n,1,p)}else r.find((e=>e.filter.filter===t.filter.filter&&e.value===t.value))||r.push(t);var i,u;return r}},6274:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(20683),i=r(20213),s=r(90144),a=r(16647);function o(e){const t=(0,s._2)(i.Z).find((t=>i.Z[t]===e));return t?i.Z[t]:void 0}const l=function(e,t){if(!(null==t?void 0:t.Filter))return{strippedKey:e,filterRules:[]};const r=t.Filter,{params:i,pathname:s}=n.Z.parseUri(e,{decoder:e=>e});let l=[];for(const e in i)if(i.hasOwnProperty(e)){let t=l;const n=i[e],s=r.find((t=>e.startsWith(t.filter)));if(!s)continue;const c=o(`${e.substr(s.filter.length)}=`);if(!c)continue;"string"==typeof n?t=(0,a.Z)(t,{filter:s,operator:c,value:n}):Array.isArray(n)&&(t=n.reduce(((e,t)=>"string"!=typeof t?e:(0,a.Z)(e,{filter:s,operator:c,value:t})),t)),l!==t&&(l=t,delete i[e])}return{strippedKey:n.Z.join(s,i,{stringifyOptions:{encode:!1}}),filterRules:l}}},46074:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){var t;return null==(t=e.Type)?void 0:t.find((e=>e.active))}},863:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(20683),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e};let d,u;function p(e,t=window.location.hash){const r=function(e){if(d===e)return u;const t=e.split("?"),r=t.length>1?t[1]:void 0,i=r?n.Z.parseParams(r):{};return d=e,u={url:t[0],params:i},u}(t);return n.Z.join(r.url,c(c({},r.params),e))}},13508:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(26263),i=r(12360);const s=function(e,t,r,s){var a;if(!r)return;if((0,i.Z)(s))return;const o=(null==(a=r.pivots)?void 0:a.includes(s))?{pivot:s.id||s.key}:{pageType:s.type,key:s.key};return(0,n.Z)(e,t,r,o)}},12360:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(12587);const i=function(e){return e.type===n.F6.View&&!Object.values(n.GG).includes(e.key)}},73688:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),i=r(28216),s=r(62291),a=r(70777),o=r(86832),l=r(73788),c=r(14580),d=r(25555),u=r(44811),p=r(55319),m=r(15058),h=r(48872),g=r(56887),y=r(27254);function v({metadataItem:e,render:t,onClose:r}){var v;const{isPending:f,canDownload:b,canDeleteDownload:Z,onDownload:S,onDeleteDownload:P}=(0,h.Z)(e),I=(0,i.v9)((0,m.Z)(a.Ed)),E=(0,i.v9)((0,m.Z)(a.iU)),w=(0,p.Z)(),C=(0,p.Z)(),[M]=(0,u.c9)(),D=Z,O=f||!Z&&!b,T=!!(null==(v=M.ownerFeatures)?void 0:v.includes(a.Ed)),x=E||I&&T,A=(0,n.useCallback)((()=>{o.Z.warn("[Downloads] Download not permitted:","Server owner is grandfathered?",T,"Is user grandfathered?",I,"User has downloads Plex Pass gating?",E)}),[T,I,E]),k=x?(0,c.Z)(S,r):(0,c.Z)(A,C.onOpen),N=Z?w.onOpen:k;return n.createElement(n.Fragment,null,n.createElement(g.Z,{isConfirmButtonSpinning:f,isOpen:w.isOpen,kind:d.T,message:(0,l.Z)("Are you sure you want to delete this download?"),metricsPage:s.Ke,title:(0,l.Z)("Delete Download"),onCancel:(0,c.Z)(w.onClose,r),onConfirm:(0,c.Z)(P,w.onClose,r)}),n.createElement(y.Z,{isOpen:C.isOpen,onModalClose:(0,c.Z)(C.onClose,r)}),t(D,O,N))}},45213:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(48872),s=r(52867);function a({className:e,metadataItem:t,isShadowVisible:r=!1}){const{progress:a,isSubscribing:o,isDownloaded:l}=(0,i.Z)(t);return n.createElement("div",{className:e},l?n.createElement(s.Z,{progress:a<100?a:null,showIndeterminate:o,showShadow:r}):null)}},56672:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(67294),i=r(42283),s=r(28216),a=r(87442),o=r(73788),l=r(4681),c=r(33890),d=r(87357),u=r(75203),p=r(86655),m=r(87221),h=r(17778),g=r(493),y=r(34154),v=r(34721),f=r(83700),b=r(76360),Z=r(22222),S=r(25330);const P=[];function I({metadataItem:e}){var t,r,I;const E=(0,s.I0)(),w=(0,s.v9)((k=e.sourceURI,(0,Z.P1)(S.Z,(e=>e.creating[k])))),C=(0,n.useCallback)((()=>{(0,a.c9)((()=>{E(b.Z.actions.subscriptionTemplateChanged({sourceURI:e.sourceURI,template:void 0}))}))}),[E,e.sourceURI]),M=null!=(r=null==(t=null==w?void 0:w.template)?void 0:t.Setting)?r:P,{defaultValues:D,preferences:O}=(0,n.useMemo)((()=>{const e={},t=M.reduce(((t,{id:r,label:n,summary:i,value:s,hidden:a,enumValues:o})=>{if(a||!o)return t;const l=o.split("|").map((e=>{const t=e.split(":");return{value:t[0],label:t[1]}}));return t.push({id:r,label:n,summary:i,options:l}),e[r]=s,t}),[]);return{defaultValues:e,preferences:t}}),[M]),{register:T,handleSubmit:x}=(0,i.cI)({defaultValues:D}),A=(0,n.useCallback)((t=>{(null==w?void 0:w.template)&&E(b.Z.actions.subscriptionCreateRequested({sourceURI:e.sourceURI,template:null==w?void 0:w.template,settings:t}))}),[E,e.sourceURI,null==w?void 0:w.template]);var k;return n.createElement(u.Z,{isOpen:!!(null==w?void 0:w.template),onModalClose:C},n.createElement("form",{onSubmit:x(A)},n.createElement(m.Z,{onModalClose:C},n.createElement(v.Z,null,(0,o.Z)("Download Options")),(null==w?void 0:w.error)?n.createElement(h.Z,{message:(0,o.Z)("Something went wrong. Make sure the item is available and try again.")}):null,n.createElement(p.Z,null,O.map((({id:e,label:t,summary:r,options:i})=>n.createElement("label",{key:e,className:"DownloadTemplateModal-preference-afkapG"},n.createElement("span",{className:"DownloadTemplateModal-label-KtLDnY"},t),n.createElement(d.Z,{ref:T,name:e},i.map(((e,t)=>n.createElement("option",{key:t,value:e.value},e.label)))),n.createElement("span",{className:"DownloadTemplateModal-description-FYlIro"},r))))),n.createElement(g.Z,null,n.createElement(y.Z,null,n.createElement(l.Z,{onPress:C},(0,o.Z)("Cancel")),n.createElement(c.Z,{isSpinning:null!=(I=null==w?void 0:w.isPending)&&I,kind:f.Z.Primary,type:"submit"},(0,o.Z)("Save")))))))}},76360:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(85229),i=r(8238),s=r(35076),a=r(8089),o=r(12559),l=r(25004),c=r(40744),d=r(51496);function u(e,{payload:t}){const{type:r,progress:n=0,Context:i}=t.activity;if(!(null==i?void 0:i.source)||r!==o.EW)return;const{source:l,ratingKey:c}=i,{serverIdentifier:u,providerIdentifier:p}=(0,a.Z)(l),m=(0,s.Z)({serverIdentifier:u,providerIdentifier:p,key:`/library/metadata/${c}`}),h=e.status.downloads[m];if(!h)return;const g=100===n;e.status.downloads[m]={id:h.id,subscription:g?d.y.Saved:d.y.Saving,sourceURI:m,type:h.type,relation:h.relation,progress:n}}const p=(0,n.oM)({name:"downloads",initialState:{status:{downloads:{},error:null},creating:{},deleting:{},providerSections:[]},reducers:{providersFetchSucceeded(e,{payload:t}){e.providerSections=t.providerSections},downloadsFetchSucceeded(e,{payload:t}){for(const r of t.items)delete e.status.downloads[r.sourceURI];for(const r of t.downloads)e.status.downloads[r.sourceURI]=r},downloadsFetchFailed(e,{payload:t}){e.status.error=t.error},subscriptionTemplatesFetchRequested(e,t){},subscriptionTemplateChanged(e,{payload:t}){t.template?e.creating[t.sourceURI]={isPending:!1,error:null,template:t.template}:delete e.creating[t.sourceURI]},subscriptionCreateRequested(e,{payload:t}){e.creating[t.sourceURI]={isPending:!0,error:null}},subscriptionCreateSucceeded(e,{payload:t}){delete e.creating[t.sourceURI],e.status.downloads[t.sourceURI]={id:t.id,sourceURI:t.sourceURI,type:t.type,subscription:d.y.Subscribing,relation:d.F.Self,progress:0}},subscriptionCreateFailed(e,{payload:t}){e.creating[t.sourceURI]={isPending:!1,error:t.error},delete e.status.downloads[t.sourceURI]},subscriptionDeleteRequested(e,{payload:t}){e.deleting[t.sourceURI]={isPending:!0,error:null}},subscriptionDeleteSucceeded(e,{payload:t}){delete e.deleting[t.sourceURI],delete e.status.downloads[t.sourceURI]},subscriptionDeleteFailed(e,{payload:t}){e.deleting[t.sourceURI]={isPending:!1,error:t.error}}},extraReducers:e=>{i.Z.allowSyncDownload&&(e.addCase(c.Z.actions.activityUpdated,u),e.addCase(c.Z.actions.activityFinished,u),e.addCase(l.Z.actions.deleted,((e,{payload:t})=>{const{mediaProviderID:r,sourceURI:n}=t,i=e.providerSections.find((({id:e})=>r===e));if(!i)return;const{serverIdentifier:o,providerIdentifier:l}=(0,a.Z)(i.source),{key:c}=(0,a.Z)(n),d=(0,s.Z)({serverIdentifier:o,providerIdentifier:l,key:c});delete e.status.downloads[d]})))}})},51496:(e,t,r)=>{"use strict";r.d(t,{y:()=>n,F:()=>i});var n=(e=>(e[e.Subscribing=0]="Subscribing",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved",e))(n||{}),i=(e=>(e[e.Self=0]="Self",e[e.Descendants=1]="Descendants",e[e.Ancestors=2]="Ancestors",e))(i||{})},48872:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(28216),s=r(99318),a=r(76360),o=r(51496),l=r(22222),c=r(25330);function d(e){const t=(0,i.I0)(),r=(0,n.useMemo)((()=>{return t=e.sourceURI,(0,l.P1)(c.Z,(e=>e.status.downloads[t]));var t}),[e.sourceURI]),d=(0,n.useMemo)((()=>{return t=e.sourceURI,(0,l.P1)(c.Z,(e=>{var r,n;const i=!!(null==(r=e.creating[t])?void 0:r.isPending),s=!!(null==(n=e.deleting[t])?void 0:n.isPending);return i||s}));var t}),[e.sourceURI]),u=(0,i.v9)(r),p=(0,i.v9)(d),m=(null==u?void 0:u.subscription)===o.y.Subscribing,h=!!u&&u.relation!==o.F.Descendants,g=!u||u.relation===o.F.Descendants,y=(null==u?void 0:u.relation)===o.F.Self;return{progress:(null==u?void 0:u.progress)||0,isPending:p,isSubscribing:m,isDownloaded:h,canDownload:g,canDeleteDownload:y,onDownload:(0,n.useCallback)((()=>{t(a.Z.actions.subscriptionTemplatesFetchRequested({sourceURI:e.sourceURI,guid:e.guid,useSelected:e.type===s.pG.Show}))}),[t,e.sourceURI,e.guid,e.type]),onDeleteDownload:(0,n.useCallback)((()=>{u&&t(a.Z.actions.subscriptionDeleteRequested({id:u.id,sourceURI:e.sourceURI}))}),[t,u,e.sourceURI])}}},25330:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(18585);const s=(0,n.P1)(i.Z,(e=>e.downloads))},81744:(e,t,r)=>{"use strict";r.d(t,{Y_:()=>n,qt:()=>i,ew:()=>s,dd:()=>a,MR:()=>o});var n=(e=>(e[e.Regions=0]="Regions",e[e.PostalCode=1]="PostalCode",e[e.SinglePostalCode=2]="SinglePostalCode",e))(n||{}),i=(e=>(e.Dead="dead",e.Alive="alive",e))(i||{}),s=(e=>(e.Disabled="disabled",e.Enabled="enabled",e))(s||{}),a=(e=>(e.Unknown="-1",e.Antenna="0",e.Cable="1",e.Satellite="2",e))(a||{}),o=(e=>(e[e.Unknown=-1]="Unknown",e[e.OverTheAir=0]="OverTheAir",e[e.Cable=1]="Cable",e[e.Satellite=2]="Satellite",e[e.IPTV=3]="IPTV",e[e.Virtual=4]="Virtual",e))(o||{})},23665:(e,t,r)=>{"use strict";r.d(t,{Yc:()=>g,ZP:()=>Z});var n=r(85229),i=r(73788),s=r(40744),a=r(55084),o=r(32601),l=r(81744),c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e};const g={channels:[],isPending:!1,isPopulated:!1,error:null},y={dvr:void 0,isPending:!1,isPopulated:!1,error:null},v={mediaGrabberDevices:[],isPending:!1,isPopulated:!1,error:null},f={devices:v,epgDownloadActivityID:void 0,selectedDevice:void 0,selectedDVR:y,channelsByDeviceKey:{},scanPrefs:[],scanNetworks:[],hasScannedChannels:!1,isSavingDVR:!1,isDeletingDVR:!1,isAddingDevice:!1,isDiscoveringDevices:!1,isSavingChannelMappings:!1,isCancellingChannelScan:!1,isCancellingReloadGuide:!1,channelMappingsSaveError:null,setupErrorMessage:null};function b(e,{payload:t}){var r;const{activity:n}=t;if(n.type!==a.Z.ProviderDeviceChannelScan)return;const i=null==(r=null==n?void 0:n.Response)?void 0:r.Network;if(i)e.hasScannedChannels=!1,e.scanNetworks=i;else{const t=100===(null==n?void 0:n.progress);e.hasScannedChannels=t,e.isCancellingChannelScan&&t&&(e.isCancellingChannelScan=!1)}}const Z=(0,n.oM)({name:"dvrSetup",initialState:f,reducers:{reset:()=>f,setupReset(e){e.devices=v,e.selectedDevice=void 0,e.hasScannedChannels=!1,e.isSavingDVR=!1,e.isAddingDevice=!1,e.isDiscoveringDevices=!1,e.isSavingChannelMappings=!1,e.channelMappingsSaveError=null,e.setupErrorMessage=null},setupErrorMessageAdded(e,{payload:t}){e.setupErrorMessage=t.message},setupErrorMessageRemoved(e,t){e.setupErrorMessage=null},devicesDiscoverRequested(e,t){e.isDiscoveringDevices=!0},devicesDiscoverSucceeded(e,{payload:t}){e.isDiscoveringDevices=!1;const{mediaGrabberDevices:r}=e.devices;for(let e=0;e<t.data.length;e++){const n=t.data[e],i=r.find((e=>n.uuid===e.uuid));i?(i.state=n.state,i.status=n.status,i.parentID=n.parentID):r.push(n)}},devicesDiscoverFailed(e,t){e.isDiscoveringDevices=!1},devicesFetchRequested({devices:e},t){(0,o.er)(e)},devicesFetchSucceeded({devices:e},{payload:t}){(0,o.vv)(e),e.mediaGrabberDevices=t.data},devicesFetchFailed({devices:e},{payload:t}){(0,o.VQ)(e,t.error)},deviceChannelsFetchRequested(e,{payload:t}){let r=e.channelsByDeviceKey[t.deviceKey];r?(r.channels=[],r.isPopulated=!1):(r=h({},g),e.channelsByDeviceKey[t.deviceKey]=r),e.setupErrorMessage=null,(0,o.er)(r)},deviceChannelsFetchSucceeded(e,{payload:t}){const r=e.channelsByDeviceKey[t.deviceKey];(0,o.vv)(r),r.channels=t.data},deviceChannelsFetchFailed(e,{payload:t}){let r=e.channelsByDeviceKey[t.deviceKey];r||(r=h({},g),e.channelsByDeviceKey[t.deviceKey]=r),(0,o.VQ)(r,t.error)},deviceChannelsScanRequested(e,t){e.hasScannedChannels=!1},deviceChannelsScanFailed(e,t){e.hasScannedChannels=!0},deviceChannelsCancelScanRequested(e,t){e.isCancellingChannelScan=!0},deviceChannelsCancelScanFailed(e,t){e.isCancellingChannelScan=!1},deviceSelected(e,{payload:t}){const r=e.devices.mediaGrabberDevices.find((e=>e.key===t.deviceKey));r&&(e.selectedDevice=r)},deviceSourceSelected({devices:e},{payload:t}){const r=e.mediaGrabberDevices.find((e=>e.key===t.deviceKey));r&&(r.source=t.source)},deviceChannelMappingsSaveRequested(e,t){e.isSavingChannelMappings=!0,e.channelMappingsSaveError=null},deviceChannelMappingsSaveSucceeded(e,t){e.isSavingChannelMappings=!1,e.channelMappingsSaveError=null},deviceChannelMappingsSaveFailed(e,{payload:t}){e.isSavingChannelMappings=!1,e.channelMappingsSaveError=t.error},deviceEnableRequested(e,t){},deviceEnableSucceeded(e,{payload:t}){const r=e.devices.mediaGrabberDevices.find((e=>e.key===t.deviceKey));r&&(r.state=t.enabled?l.ew.Enabled:l.ew.Disabled,r.title=t.title)},deviceEnableFailed(e,t){},deviceAddRequested(e,t){e.isAddingDevice=!0},deviceAddSucceeded(e,{payload:t}){e.setupErrorMessage=null,e.isAddingDevice=!1;const r=e.devices.mediaGrabberDevices.find((e=>e.key===t.data.key));r?Object.assign(r,t.data):e.devices.mediaGrabberDevices.push(t.data)},deviceAddFailed(e,t){e.isAddingDevice=!1},dvrFetchRequested(e,t){e.setupErrorMessage=null,(0,o.er)(e.selectedDVR)},dvrFetchSucceeded({selectedDVR:e,devices:t},{payload:r}){const{dvr:n}=r;(0,o.vv)(e),e.dvr=n,(null==n?void 0:n.Device)&&((0,o.vv)(t),t.mediaGrabberDevices=n.Device)},dvrFetchFailed(e,{payload:t}){(0,o.VQ)(e.selectedDVR,t.error),e.setupErrorMessage=(0,i.Z)("There was a problem fetching your DVR. Please try again later.")},dvrSaveRequested(e,t){e.setupErrorMessage=null,e.isSavingDVR=!0},dvrSaveSucceeded(e,{payload:t}){(0,o.vv)(e.selectedDVR),e.epgDownloadActivityID=t.activityUUID,e.isSavingDVR=!1,e.selectedDVR.dvr=t.dvr},dvrSaveFailed(e,{payload:t}){(0,o.VQ)(e.selectedDVR,t.error),e.isSavingDVR=!1},dvrDeleteRequested(e,t){e.isDeletingDVR=!0},dvrDeleteSucceeded(e,t){e.selectedDVR=y,e.isDeletingDVR=!1},dvrDeleteFailed(e,t){e.isDeletingDVR=!1},addDVRDeviceRequested(e,t){e.setupErrorMessage=null,e.isSavingDVR=!0},addDVRDeviceSucceeded(e,{payload:t}){(0,o.vv)(e.selectedDVR),e.epgDownloadActivityID=t.activityUUID,e.isSavingDVR=!1,e.selectedDVR.dvr=t.dvr},addDVRDeviceFailed(e,{payload:t}){(0,o.VQ)(e.selectedDVR,t.error),e.isSavingDVR=!1},removeDVRDeviceRequested(e,t){},removeDVRDeviceSucceeded(e,t){var r,n;(null==(n=null==(r=e.selectedDVR)?void 0:r.dvr)?void 0:n.Device)&&(e.selectedDVR.dvr.Device=e.selectedDVR.dvr.Device.filter((e=>e.key!==t.payload.deviceKey))),e.devices.mediaGrabberDevices=e.devices.mediaGrabberDevices.filter((e=>e.key!==t.payload.deviceKey))},removeDVRDeviceFailed(e,t){},cancelReloadGuide(e){e.isCancellingReloadGuide=!0},scanPrefsAndNetworksReset(e){e.scanPrefs=[],e.scanNetworks=[]},scanPrefsAdded(e,{payload:t}){e.scanPrefs=t.settings},scanNetworksAdded(e,{payload:t}){e.scanNetworks=t.networks}},extraReducers:e=>{e.addCase(s.Z.actions.activityStarted,b).addCase(s.Z.actions.activityUpdated,b).addCase(s.Z.actions.activityFinished,((e,t)=>{t.payload.activity.type===a.Z.ProviderEpgLoad?(e.isCancellingReloadGuide=!1,e.epgDownloadActivityID=void 0):b(e,t)}))}})},53171:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>P});var n=r(85229),i=r(74226),s=r(6545),a=r(40744),o=r(55084),l=r(32601),c=r(81744),d=r(23665),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const f={mappings:[],isPending:!1,isPopulated:!1,error:null},b={channelsByLineupUUID:{},isPending:!1,isPopulated:!1,error:null},Z={epgLineupGroups:[],isPending:!1,isPopulated:!1,error:null},S={channelMappings:f,lineupChannels:b,countries:{epgCountries:[],isPending:!1,isPopulated:!1,error:null},languages:{epgLanguages:[],isPending:!1,isPopulated:!1,error:null},regions:{epgCountryRegions:[],isPending:!1,isPopulated:!1,error:null},lineupGroups:Z,selectedCountry:void 0,selectedLanguage:void 0,selectedRegion:void 0,selectedLineupGroups:[],postalCode:""},P=(0,n.oM)({name:"epgSettings",initialState:S,reducers:{reset:()=>S,channelMappingsFetchRequested({lineupChannels:e,channelMappings:t},r){(0,l.er)(e),(0,l.er)(t)},channelMappingsFetchSucceeded({channelMappings:e,lineupChannels:t,selectedLineupGroups:r},{payload:n}){e.mappings=n.channelMappings,(0,l.vv)(e),n.lineupChannels.forEach((({uuid:e,Channel:r})=>{t.channelsByLineupUUID[e]=null!=r?r:[]})),(0,l.vv)(t),r.forEach((e=>{e.isChannelMappingsFetched=!0}))},channelMappingsFetchFailed({channelMappings:e,lineupChannels:t},{payload:r}){(0,l.VQ)(e,r.error),(0,l.VQ)(t,r.error)},channelMappingChanged({channelMappings:e},{payload:t}){const r=t,{index:n}=r,i=((e,t)=>{var r={};for(var n in e)g.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r})(r,["index"]),s=e.mappings[n];Object.assign(s,i)},epgLineupGroupFetchRequested({lineupGroups:e},t){(0,l.er)(e)},epgLineupGroupFetchSucceeded({lineupGroups:e},{payload:t}){(0,l.vv)(e),e.epgLineupGroups.push({uuid:t.data.uuid,epgLineups:t.data.epgLineups})},epgLineupGroupFetchFailed({lineupGroups:e},{payload:t}){(0,l.VQ)(e,t.error)},bestEPGLineupSearchRequested(e,t){},bestEPGLineupSearchSucceeded({selectedLineupGroups:e},{payload:t}){const r=e.find((e=>e.uuid===t.lineupGroup.uuid));r&&(r.activityUUID=t.data,r.isSelectedLineupPending=!0)},bestEPGLineupSearchFailed(e,t){},selectedLineupSelected({selectedLineupGroups:e},{payload:t}){const r=e.find((e=>e.uuid===t.lineupGroupUUID));if(r){const e=r.epgLineups.find((e=>e.uuid===t.selectedLineupUUID));r.selectedLineup=e}},selectedEPGLineupGroupAddRequested(e,t){},selectedEPGLineupGroupAddSucceeded({selectedLineupGroups:e},{payload:t}){var r;e.push((r=((e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(h)for(var r of h(t))y.call(t,r)&&v(e,r,t[r]);return e})({},t.lineupGroup),p(r,m({activityUUID:void 0,selectedLineup:void 0,isChannelMappingsFetched:!1,isSelectedLineupPending:!1,isSelectedLineupPopulated:!1}))))},selectedEPGLineupGroupRemoved(e,{payload:t}){e.selectedLineupGroups=e.selectedLineupGroups.filter((e=>e.uuid!==t.lineupGroupUUID))},xmltvSelectedEPGLineupGroupAdded({selectedLineupGroups:e},{payload:t}){const{path:r,title:n}=t,a=function(e){return/^[a-z]:\\|\\\\/i.test(e)&&(e=e.replace(/\\/g,"/")),/^(\/|[a-z]:\/)/i.test(e)&&(e=e.replace(/\/(.+?)(?=\/|$)/g,((e,t)=>`/${encodeURIComponent(t)}`))),"/"===e.charAt(0)&&(e=e.substring(1)),/^[a-z]+?:\/\//i.test(e)&&(e=encodeURIComponent(e)),e}(r),o={uuid:`lineup://${i.zY}/${a}#${encodeURIComponent(n)}`,title:n,lineupType:c.MR.Virtual},l={uuid:`xmltv-${(0,s.Z)()}`,epgLineups:[o],activityUUID:void 0,selectedLineup:o,isChannelMappingsFetched:!1,isSelectedLineupPending:!1,isSelectedLineupPopulated:!0};e.push(l)},selectedDVRLineupChannelsFetchRequested({lineupChannels:e},t){(0,l.er)(e)},selectedDVRLineupChannelsFetchSucceeded({lineupChannels:e},{payload:t}){t.lineupChannels.forEach((({uuid:t,Channel:r})=>{e.channelsByLineupUUID[t]=null!=r?r:[]})),(0,l.vv)(e)},selectedDVRLineupChannelsFetchFailed({lineupChannels:e},{payload:t}){(0,l.VQ)(e,t.error)},epgCountriesFetchRequested({countries:e},t){(0,l.er)(e)},epgCountriesFetchSucceeded({countries:e},{payload:t}){(0,l.vv)(e),e.epgCountries=t.data},epgCountriesFetchFailed({countries:e},{payload:t}){(0,l.VQ)(e,t.error)},epgCountrySelected(e,{payload:t}){const r=e.countries.epgCountries.find((e=>e.code===t.countryCode));e.selectedCountry=r,e.selectedRegion=void 0,e.postalCode=void 0},epgCountryRegionSelected(e,{payload:t}){const r=e.regions.epgCountryRegions.find((e=>e.key===t.regionKey));e.selectedRegion=r},epgCountryRegionsFetchRequested({regions:e},t){(0,l.er)(e)},epgCountryRegionsFetchSucceeded({regions:e},{payload:t}){(0,l.vv)(e),e.epgCountryRegions=t.data},epgCountryRegionsFetchFailed({regions:e},{payload:t}){(0,l.VQ)(e,t.error)},epgLanguagesFetchRequested({languages:e},t){(0,l.er)(e)},epgLanguagesFetchSucceeded({languages:e},{payload:t}){(0,l.vv)(e),e.epgLanguages=t.data},epgLanguagesFetchFailed({languages:e},{payload:t}){(0,l.VQ)(e,t.error)},epgLanguageSelected(e,{payload:t}){const r=e.languages.epgLanguages.find((e=>e.code===t.languageCode));e.selectedLanguage=r},epgPostalCodeChanged(e,{payload:t}){e.postalCode=t.postalCode}},extraReducers(e){e.addCase(d.ZP.actions.setupReset,(e=>{e.channelMappings=f,e.lineupChannels=b,e.lineupGroups=Z,e.selectedRegion=void 0,e.selectedLineupGroups=[],e.postalCode=""})).addCase(a.Z.actions.activityFinished,((e,{payload:t})=>{const{activity:r}=t;if(r.type===o.Z.ProviderEpgLineupScan){const t=e.selectedLineupGroups.find((e=>e.activityUUID===r.uuid));if(t){const e=t.epgLineups.find((e=>e.uuid===r.Response.lineup));t.activityUUID=void 0,t.selectedLineup=e,t.isSelectedLineupPending=!1,t.isSelectedLineupPopulated=!0}}}))}})},81742:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(22222),i=r(23665),s=r(26325),a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=e=>(0,n.P1)(s.Z,(t=>{var r,n;return e&&null!=(n=null==(r=t.channelsByDeviceKey)?void 0:r[e])?n:((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({},i.Yc)}))},23194:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(18585);const s=(0,n.P1)(i.Z,(e=>e.dvrManagement))},26325:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(23194);const s=(0,n.P1)(i.Z,(e=>e.dvrSetup))},50990:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(23194);const s=(0,n.P1)(i.Z,(e=>e.epgSettings))},83342:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(50990);const s=(0,n.P1)(i.Z,(({selectedLineupGroups:e})=>{if(0!==e.length)return e.reduce(((e,{selectedLineup:t})=>(t&&e.push(t),e)),[])}))},11364:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var n=r(85229),i=r(74226),s=r(47276),a=r(35076),o=r(8089),l=r(35975),c=r(25004),d=r(59405),u=r(91364),p=r(65978),m=r(78535),h=r(83564),g=r(11897),y=r(32601),v=Object.defineProperty,f=Object.defineProperties,b=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(Z)for(var r of Z(t))P.call(t,r)&&I(e,r,t[r]);return e},w=(e,t)=>f(e,b(t));const C={hubsListsByKey:{}},M={source:"",contentDirectoryID:[],hubs:[],isPending:!1,isPopulated:!1,error:null};function D(e,t){for(const r in e.hubsListsByKey){const n=e.hubsListsByKey[r];t&&n.source!==t||n.hubs.forEach((e=>{e.isStale=!0}))}}function O(e,t){for(const r in e.hubsListsByKey)e.hubsListsByKey[r].hubs.forEach((e=>{e.sourceURI===t&&(e.isStale=!1)}))}const T=(0,n.oM)({name:"home",initialState:C,reducers:{reset:()=>C,markStaleRequested(e){for(const t in e.hubsListsByKey)e.hubsListsByKey[t].isPending=!1},markStale(e){D(e)},populateAllRequested(e,{payload:t}){const r=t.hubsSources.map((e=>e.key));Object.keys(e.hubsListsByKey).forEach((t=>{r.includes(t)||delete e.hubsListsByKey[t]}))},fetchRequested(e,{payload:t}){const{hubsSource:{key:r,source:n,contentDirectoryID:i,pinnedContentDirectoryID:s}}=t;let a=e.hubsListsByKey[r];a||(a=w(E({},M),{source:n})),(0,y.er)(a),a.contentDirectoryID=[...i],s&&(a.pinnedContentDirectoryID=[...s]),e.hubsListsByKey[r]=a},fetchSucceeded(e,{payload:t}){e.lastFetchedAt||(e.lastFetchedAt=Date.now());const r=e.hubsListsByKey[t.key];(0,y.vv)(r),r.hubs=t.data},fetchFailed(e,{payload:t}){let r=e.hubsListsByKey[t.key];r||(r=w(E({},M),{source:t.source,contentDirectoryID:[...t.contentDirectoryID]}),e.hubsListsByKey[t.key]=r),(0,y.VQ)(r,t.error)}},extraReducers:e=>{e.addCase(d.Z.actions.repopulateRangeSucceeded,((e,{payload:t})=>{O(e,t.sourceURI)})),e.addCase(d.Z.actions.fetchAllSucceeded,((e,{payload:t})=>{O(e,t.sourceURI)})),e.addCase(h.Z.actions.ended,((e,{payload:t})=>{D(e,t.source)})),e.addCase(u.Z.actions.sessionStopped,((e,{payload:t})=>{D(e,(0,a.Z)({serverIdentifier:t.server.machineIdentifier}))})),e.addCase(p.Z.actions.libraryScanUpdated,((e,{payload:t})=>{D(e,(0,a.Z)({serverIdentifier:t.server.machineIdentifier}))})),e.addCase(c.Z.actions.toggleWatchlistSucceeded,(e=>{!function(e){const t=(0,a.Z)({serverIdentifier:s.X,providerIdentifier:i.Xp});for(const r in e.hubsListsByKey){const n=e.hubsListsByKey[r];t&&n.source!==t||n.hubs.forEach((e=>{e.hubIdentifier===l.F.Watchlist&&(e.isStale=!0)}))}}(e)})),e.addCase(g.ZP.actions.preferredServicesSaveSucceeded,(e=>{D(e,(0,a.Z)({serverIdentifier:s.X,providerIdentifier:i.Xp}))})),e.addCase(c.Z.actions.playedStatusUpdateSucceeded,((e,{payload:t})=>{D(e,(0,a.Z)({serverIdentifier:t.server.machineIdentifier,providerIdentifier:t.provider.identifier}))})),e.addCase(c.Z.actions.metadataProcessed,((e,{payload:t})=>{const{serverIdentifier:r,providerIdentifier:n}=(0,o.Z)(t.sourceURI);D(e,(0,a.Z)({serverIdentifier:r,providerIdentifier:n}))})),e.addCase(m.Z.actions.languageChanged,(()=>C))}})},48383:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(85229);const i={isImporting:!1,isImported:!1,importError:null},s=(0,n.oM)({name:"importPlaylists",initialState:i,reducers:{reset:()=>i,importRequested(e,t){e.isImporting=!0,e.importError=null},importSucceeded(e,t){e.isImporting=!1,e.isImported=!0},importFailed(e,{payload:t}){e.isImporting=!1,e.importError=t.error}}})},86140:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(98963),s=r(73788),a=r(98476),o=r(31889),l=r(96548),c=r(82155);function d(e){const{hasPlexMovieUpgrade:t,hasPlexSeriesUpgrade:r}=(0,l.Z)(e.server,e.sourceDirectory),{Modal:d,onOpen:u}=(0,c.B)(e.machineIdentifier,e.sourceDirectory,e.onMenuClose);return t||r?n.createElement(n.Fragment,null,n.createElement(a.Z,{onPress:u},(0,s.Z)("Upgrade Library"),n.createElement("span",{className:"LibraryUpgradeMenuItem-icon-tpBeE5"},n.createElement(i.D,null))),n.createElement(o.Z,null),n.createElement(d,null)):n.createElement(n.Fragment,null)}},41070:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(85229),i=r(32601);function s(e,t){e&&((0,i.er)(e),e.options=t)}function a(e){e&&(0,i.vv)(e)}function o(e,t,r){e&&((0,i.VQ)(e,r),e.options=t)}const l=(0,n.oM)({name:"libraryManagement",initialState:{hubs:{},publishedItems:{},settings:{}},reducers:{settingsFetchRequested(e,{payload:t}){e.settings[t.server.machineIdentifier]={isPending:!0,isPopulated:!1,isUpdating:!1,error:null}},settingsFetchSucceeded(e,{payload:t}){const r=e.settings[t.server.machineIdentifier];r&&(r.isMergeRecentlyAddedEnabled=t.isMergeRecentlyAddedEnabled,(0,i.vv)(r))},settingsFetchFailed(e,{payload:t}){const r=e.settings[t.server.machineIdentifier];r&&(0,i.VQ)(r,t.error)},settingsUpdateRequested(e,{payload:t}){const r=e.settings[t.server.machineIdentifier];r&&(r.isUpdating=!0)},settingsUpdateSucceeded(e,{payload:t}){const r=e.settings[t.server.machineIdentifier];r&&(r.isMergeRecentlyAddedEnabled=t.isMergeRecentlyAddedEnabled,r.isUpdating=!1)},settingsUpdateFailed(e,{payload:t}){const r=e.settings[t.server.machineIdentifier];r&&(r.error=t.error,r.isUpdating=!1)},resetHubs(e,t){},hubsFetchRequested(e,{payload:t}){var r;e.hubs[t.sourceURI]={options:(null==(r=e.hubs[t.sourceURI])?void 0:r.options)||[],isPending:!0,isPopulated:!1,isResetting:!1,error:null}},hubsFetchSucceeded(e,{payload:t}){const r=e.hubs[t.sourceURI];r&&((0,i.vv)(r),r.options=t.options)},hubsFetchFailed(e,{payload:t}){const r=e.hubs[t.sourceURI];r&&(0,i.VQ)(r,t.error)},reorderRequested(e,{payload:t}){s(e.hubs[t.sourceURI],t.options)},reorderSucceeded(e,{payload:t}){a(e.hubs[t.sourceURI])},reorderFailed(e,{payload:t}){o(e.hubs[t.sourceURI],t.options,t.error)},removeRequested(e,{payload:t}){s(e.hubs[t.sourceURI],t.options)},removeSucceeded(e,{payload:t}){a(e.hubs[t.sourceURI])},removeFailed(e,{payload:t}){o(e.hubs[t.sourceURI],t.options,t.error)},resetRequested(e,{payload:t}){const r=e.hubs[t.sourceURI];r&&(r.isResetting=!0)},resetSucceeded(e,{payload:t}){const r=e.hubs[t.sourceURI];r&&(r.isResetting=!1,r.options=t.options)},resetFailed(e,{payload:t}){const r=e.hubs[t.sourceURI];r&&(r.isResetting=!1)},promoteRequested(e,t){},promoteChanged(e,{payload:t}){const r=e.hubs[t.sourceURI];if(r){const e=r.options.find((e=>e.identifier===t.options.identifier));e&&(e.promotedToRecommended=t.options.promotedToRecommended,e.promotedToOwnHome=t.options.promotedToOwnHome,e.promotedToSharedHome=t.options.promotedToSharedHome)}},publishedFetchRequested(e,{payload:t}){e.publishedItems[t.sourceURI]={isPending:!0,isPopulated:!1,isUpdating:!1,error:null}},publishedFetchSucceeded(e,{payload:t}){const r=e.publishedItems[t.sourceURI];r&&(r.hub=t.hub,(0,i.vv)(r))},publishedFetchFailed(e,{payload:t}){const r=e.publishedItems[t.sourceURI];r&&(0,i.VQ)(r,t.error)},publishedUpdateRequested(e,{payload:t}){const r=e.publishedItems[t.sourceURI];r&&(r.isUpdating=!0)},publishedUpdateSucceeded(e,{payload:t}){const r=e.publishedItems[t.sourceURI];r&&(r.hub=t.hub,r.isUpdating=!1)},publishedUpdateFailed(e,{payload:t}){const r=e.publishedItems[t.sourceURI];r&&(r.error=t.error,r.isUpdating=!1)}}})},93665:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(18585);const s=(0,n.P1)(i.Z,(e=>e.libraryManagement))},77749:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(20683);function i(e){return n.Z.join(["/hubs/sections",e,"manage"])}},74236:(e,t,r)=>{"use strict";r.d(t,{ED:()=>v,ZP:()=>b});var n=r(85229),i=r(33593),s=r(32601),a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e},h=(e,t)=>o(e,l(t));const g=1800,y={guideChannels:{channels:[],isPending:!1,isPopulated:!1,error:null},favoriteChannels:{channels:[],isPending:!1,isPopulated:!1,error:null},airingsByChannelGridKey:{},channelsGrid:{startTime:0,visibleColumns:1,columnTimes:[],columnWidth:0,viewportWidth:0,viewportHeight:0,airedProgress:0}},v={airings:[],cachedDates:[],isPending:!1,isPopulated:!1,error:null};function f(e,t){const r=Math.floor(e/g)*g,n=[];for(let e=0;e<=t;e++)n.push(r+e*g);return n}const b=(0,n.oM)({name:"livetv",initialState:y,reducers:{channelsGridResetStartTime({channelsGrid:e}){const t=Math.floor(Date.now()/1e3),r=f(t,e.visibleColumns);e.startTime=t,e.columnTimes=r},channelsGridSetStartTime({channelsGrid:e},{payload:t}){const r=f(t.startTime,e.visibleColumns);e.startTime=t.startTime,e.columnTimes=r},channelsGridSetViewportSize({channelsGrid:e},{payload:t}){const{width:r=1,height:n=1,overflowWidth:i=0,channelWidth:s=1,channelTitleWidth:a=0}=t,o=Math.floor(r+i),l=Math.max(Math.floor((r-a)/s),1)+1,c=Math.floor((o-a)/l),d=f(e.startTime,l);e.visibleColumns=l,e.columnTimes=d,e.columnWidth=c,e.viewportWidth=o,e.viewportHeight=Math.floor(n)},channelsGridUpdateAiredProgress({channelsGrid:e}){const{columnTimes:t}=e,r=t[0],n=t[t.length-1]-r,i=Math.floor(Date.now()/1e3),s=Math.min(100,Math.max(0,(i-r)/n*100));e.airedProgress=s},channelsGridNavigateTimeForward({channelsGrid:e}){const t=e.columnTimes[0]+g,r=f(t,e.visibleColumns);e.startTime=t,e.columnTimes=r},channelsGridNavigateTimeBack({channelsGrid:e}){const t=e.columnTimes[0]-g,r=Math.floor(Date.now()/1e3)-10800;if(t+g>r){const r=f(t,e.visibleColumns);e.startTime=t,e.columnTimes=r}},guideChannelsClear:e=>h(m({},e),{guideChannels:y.guideChannels}),guideChannelsFetchRequested({guideChannels:e},t){(0,s.er)(e)},guideChannelsFetchSucceeded({guideChannels:e},{payload:t}){(0,s.vv)(e),e.channels=t.channels},favoriteChannelsFetchRequested({favoriteChannels:e},t){(0,s.er)(e)},favoriteChannelsFetchSucceeded({favoriteChannels:e},{payload:t}){(0,s.vv)(e),e.channels=t.channels},favoriteChannelsPopulateRequested(e,t){},favoriteChannelsPopulateRequestSucceeded({favoriteChannels:e},{payload:t}){const r=e.channels.map((e=>{var r;const n=t.channels.find((({uid:t})=>t===e.uid));return h(m({},e),{gridKey:null!=(r=null==n?void 0:n.gridKey)?r:e.gridKey})}));e.channels=r},favoriteChannelsUpdateRequested({favoriteChannels:e},{payload:t}){(0,s.er)(e),e.channels=t.updatedChannels},favoriteChannelsUpdateSucceeded({favoriteChannels:e},t){(0,s.vv)(e)},favoriteChannelsUpdateFailed({favoriteChannels:e},{payload:t}){e.channels=t.channels,(0,s.VQ)(e,t.error)},channelAiringsFetchRequested(e,{payload:t}){let r=e.airingsByChannelGridKey[t.channelGridKey];const n=(0,i.Z)(new Date(t.date),"yyyy-MM-dd");r?r.cachedDates.includes(n)||r.cachedDates.push(n):(r=h(m({},v),{cachedDates:[n]}),e.airingsByChannelGridKey[t.channelGridKey]=r),(0,s.er)(r)},channelAiringsFetchSucceeded(e,{payload:t}){const r=e.airingsByChannelGridKey[t.channelGridKey];r.airings.push(...t.airings),(0,s.vv)(r)},channelAiringsFetchFailed(e,{payload:t}){const r=e.airingsByChannelGridKey[t.channelGridKey];(0,s.VQ)(r,t.error)},channelAiringsReset(e,{payload:t}){e.airingsByChannelGridKey[t.channelGridKey]=h(m({},v),{cachedDates:[(0,i.Z)(new Date(1e3*e.channelsGrid.columnTimes[0]),"yyyy-MM-dd")]})}}})},52183:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(94852);function s(e,t){return e.beginsAt>t.beginsAt?1:e.beginsAt<t.beginsAt?-1:0}const a=function(e){return(0,n.P1)((0,i.Z)(e),(({airings:t})=>{if(!e||!t)return[];const r=t.reduce(((e,t)=>t&&t.Media?(t.Media.forEach(((r,n)=>{const{beginsAt:i,endsAt:s}=r;!e.find((e=>{const{metadataItem:r,mediaIndex:i}=e;return r&&i&&r.key===t.key&&i===n}))&&i&&s&&e.push({beginsAt:i,endsAt:s,metadataItem:t,mediaIndex:n,isSynthetic:!1})})),e):e),[]);return r.sort(s),r}))}},94852:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(74236),s=r(50713);const a=e=>(0,n.P1)(s.Z,(({airingsByChannelGridKey:t})=>{var r;return e&&null!=(r=t[e])?r:i.ED}))},81541:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(22222),i=r(17939),s=r(46898),a=r(21604),o=r(12587),l=r(39485),c=r(93644),d=r(181),u=r(17614);const p=(0,i.Z)((0,n.P1)(s.Z,a.Z,d.Z,l.Z,((e,t,r,n)=>{let i=[];for(const r of t){const t=(0,u.Z)(r),n=r.providers;for(const r of n){const n=e[r];n&&(0,c.Z)(n,o.zW.Grid)&&i.push({server:t,provider:n})}}const s=n.filter((e=>(0,c.Z)(e,o.zW.Grid)));return i=i.concat(s.map((e=>({server:r,provider:e})))),i})),(e=>e))},78113:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(35076),s=r(34219),a=r(81541);const o=(0,n.P1)(a.Z,(0,s.Z)("disabledEpgSources"),((e,t)=>e.filter((({server:e,provider:r})=>{const n=(0,i.Z)({serverIdentifier:e.machineIdentifier,providerIdentifier:r.identifier});return!t.includes(n)}))))},50713:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(18585);const s=(0,n.P1)(i.Z,(e=>e.livetv))},5509:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(50713);const s=(0,n.P1)(i.Z,(e=>{var t,r,n,i;const{guideChannels:s}=e,a=!!(null==(r=null==(t=s.channels)?void 0:t[0])?void 0:r.gridKey),o=!!(null==(i=null==(n=s.channels)?void 0:n[0])?void 0:i.vcn);return s.channels.reduce(((e,t)=>{const r=e.findIndex((({gridKey:e,id:r,vcn:n})=>a?e===t.gridKey:o?n===t.vcn:r===t.id));return-1===r?e.push(t):!e[r].isHd&&t.isHd&&(e[r]=t),e}),[])}))},44275:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(74226),i=r(73788);const s=function(e,t){return e.isCloud?n.yv(t.identifier)?(0,i.Z)("Plex Channels"):t.title||e.friendlyName:e.friendlyName}},90106:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Me});var n=r(67294),i=r(28216),s=r(26759),a=r(75404),o=r(62291),l=r(21860),c=r(73788),d=r(10125),u=r(98476),p=r(14580),m=r(83782),h=r(89843),g=r(19349),y=r(54345),v=r(25004),f=r(31326),b=r(62376),Z=r(55319),S=r(20896),P=r(83700),I=r(13271),E=r(51531),w=r(53488),C=r(71975),M=r(96436),D=r(99464),O=r(22222),T=r(17939),x=r(46898),A=r(9922),k=r(41863),N=r(8089),R=r(89115),L=r(33803),j=r(17614),V=r(11101);const U=(0,T.Z)((0,O.P1)(D.Z,R.Z,x.Z,A.Z,(e=>e.servers),(0,k.Z)("providers"),((e,t,r,n,i,s)=>{const a=(o=e).count?Object.keys(o.items).map((e=>o.items[e])):[];var o;return a.length?a.map((e=>{var a;const{serverIdentifier:o,providerIdentifier:l}=(0,N.Z)(e.source),c=i.find((e=>{const t=n[e];return!!t&&t.machineIdentifier===o})),d=c?n[c]:V.Z,u=(d.isCloud?s:d.providers).find((e=>r[e].identifier===l)),p=u?r[u]:L.Z;return{metadataItem:e,metadataItemState:null!=(a=t[e.sourceURI])?a:{tempState:{},isStale:!1,isPending:!1,isPopulated:!1,error:null},server:(0,j.Z)(d),provider:p}})):[]})),(e=>e));var F=r(99318),B=r(11294),_=r(79841),z=r(36155),H=r(13169),W=Object.defineProperty,G=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))K.call(t,r)&&Y(e,r,t[r]);if($)for(var r of $(t))q.call(t,r)&&Y(e,r,t[r]);return e},J=(e,t)=>G(e,Q(t));function ee(e){if(!e.length)return!1;const[{metadataItem:t}]=e;return e.every((({metadataItem:e})=>t.type===e.type&&t.subtype===e.subtype))}function te(e){if(!e.length)return!1;const[{server:t,provider:r}]=e;return e.every((({server:e,provider:n})=>e.machineIdentifier===t.machineIdentifier&&n.identifier===r.identifier))}function re(e,t){return e.every((({server:e,provider:r,metadataItem:n,metadataItemState:i})=>(0,B.h$)({server:e,provider:r,stableUser:t,metadataItem:n,metadataItemState:i})||(0,B.Dd)({server:e,provider:r,stableUser:t,metadataItem:n,metadataItemState:i})))}function ne(e,t){return!!e.length&&!!ee(e)&&ue(e,t,B.J5)}const ie=[F.pG.Movie,F.pG.Show,F.pG.Season,F.pG.Artist,F.pG.Album];function se(e,t){if(e.length<2)return!1;if(!ne(e,t))return!1;if(!ee(e))return!1;if(!te(e))return!1;const[{metadataItem:r}]=e;return ie.includes(r.type)}function ae(e,t){if(!e.length)return!1;if(!te(e))return!1;const[{provider:r}]=e;if(!(0,H.Z)(r))return!1;const n=e.reduce(((e,{metadataItem:t})=>{const r=function(e){const{type:t,subtype:r,playlistType:n}=e;switch(r){case F.y_.Photo:switch(t){case F.pG.Clip:return z.G.Photo}}switch((0,_.f)(t,r)||t){case F.pG.Track:return z.G.AudioVideo;case F.pG.Episode:case F.pG.Movie:case F.pG.Clip:return z.G.AudioVideo;case F.pG.Audiobook:case F.pG.Author:case F.pG.Chapter:return z.G.AudioVideo;case F.pG.Photo:return z.G.Photo;case F.pG.Playlist:if(!n)throw new Error("playlistType missing from playlist metadataItem");switch(n){case F.DD.Audio:case F.DD.Video:return z.G.AudioVideo;case F.DD.Photo:return z.G.Photo}}throw new Error(`No known player type for ${t}`)}(t);return e.includes(r)||e.push(r),e}),[]);return!(n.length>1&&n.includes(z.G.Photo))&&ce(e,t,B.tW)}function oe(e,t){if(!e.length)return!1;const[{metadataItem:r}]=e;return!!e.every((({metadataItem:e})=>r.type===e.type))&&!!function(e){if(!e.length)return!1;const[{server:t,provider:r,metadataItem:n}]=e;return e.every((({server:e,provider:i,metadataItem:s})=>e.machineIdentifier===t.machineIdentifier&&i.identifier===r.identifier&&s.librarySectionID===n.librarySectionID))}(e)&&((n=r.type)===F.pG.Movie||n===F.pG.Show||n===F.pG.Season||n===F.pG.Episode||n===F.pG.Artist||n===F.pG.Album||n===F.pG.Track)&&ue(e,t,B.qV);var n}function le(e,t){if(!e.length)return!1;const[{metadataItem:r}]=e;if(e.some((({metadataItem:e})=>e.type===F.pG.Playlist)))return!1;const n=(0,y.Z)(r.type,r.subtype);return!!e.every((({metadataItem:e})=>n===(0,y.Z)(e.type,e.subtype)))&&!!te(e)&&ue(e,t,B.yq)}function ce(e,t,r){return!!e.length&&e.every((e=>r(J(X({},e),{stableUser:t}))))}function de(e,t,r){return!!e.length&&e.some((e=>r(J(X({},e),{stableUser:t}))))}function ue(e,t,r){return!!e.length&&!!te(e)&&ce(e,t,r)}var pe=r(90144),me=r(56887),he=r(23574),ge=r(51861),ye=r(14522),ve=r(39296),fe=r(40921),be=r(42451),Ze=r(9451),Se=r(22162),Pe=r(67944);const Ie={container:"PageHeaderMultiselectActions-container-pFiM3Z PageHeader-pageHeader-e2k66t",button:"PageHeaderMultiselectActions-button-Jwb4dj ActionButton-iconActionButton-qpUHPk ActionButton-actionButton-SHA5Wv Button-button-Eu0WcX Link-link-vSsQW1",icon:"PageHeaderMultiselectActions-icon-PyC3G3",count:"PageHeaderMultiselectActions-count-f7qfvV",actions:"PageHeaderMultiselectActions-actions-WLKRxd",deselect:"PageHeaderMultiselectActions-deselect-JOslZe"};function Ee(e){return 1===e?(0,c.Z)("Are you sure you want to mark this item as unplayed?"):(0,c.Z)("Are you sure you want to mark these {selectedItemsCount} items as unplayed?",{selectedItemsCount:e})}function we(e,t){const r=1===e;return t?r?(0,c.Z)("Are you sure you want to remove this item?"):(0,c.Z)("Are you sure you want to remove these {selectedItemsCount} items?",{selectedItemsCount:e}):r?(0,c.Z)("Are you sure you want to delete this item from your filesystem?"):(0,c.Z)("Are you sure you want to delete these {selectedItemsCount} items from your filesystem?",{selectedItemsCount:e})}const Ce=["isPlayVisible","isMarkPlayedOrUnplayedVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isAddToCollectionVisible","isAddToPlaylistVisible","isEditVisible"];function Me({className:e=Ie.container}){const t=(0,i.I0)(),r=(0,i.v9)(D.Z),O=(0,i.v9)(U),T=(0,i.v9)(s.Z),x=(0,i.v9)(M.Z),A=function(e,t){return{isAddToCollectionVisible:oe(e,t),isAddToLibraryVisible:ce(e,t,B.FL),isAddToPlaylistVisible:le(e,t),isAnalyzeVisible:ce(e,t,B.Or),isDeleteVisible:ce(e,t,B.k7),isEditVisible:ne(e,t),isMarkPlayedOrUnplayedVisible:re(e,t),isMarkPlayedVisible:de(e,t,B.Dd),isMarkUnplayedVisible:de(e,t,B.h$),isMergeVisible:se(e,t),isOptimizeVisible:ce(e,t,B.Jm),isPlayVisible:ae(e,t),isRefreshVisible:ce(e,t,B.wc)}}(O,T),k=(0,n.useMemo)((()=>O.map((({metadataItem:e})=>e))),[O]),N=(0,n.useMemo)((()=>(0,l.Z)(k.map((({title:e})=>e)))),[k]),R=k[0].librarySectionID,L=function(e){const[t,...r]=e;if(1===e.length)return t.sourceURI;if(!e.every((e=>e.source===t.source)))return;const n=r.map((e=>e.ratingKey));return`${t.sourceURI},${n.join(",")}`}(k),j=(0,n.useMemo)((()=>{const e=O.map((({metadataItem:e})=>e.type));return e.filter(((t,r)=>e.indexOf(t)===r)).sort().join(",")}),[O]),V=(0,S.Z)({mode:"multiselect",type:j,itemCount:O.length}),F=r.count,_=(0,Z.Z)(),z=(0,Z.Z)(),H=(0,m.Z)(),W=(0,Z.Z)(),G=(0,m.Z)(),Q=(0,Z.Z)(),$=(0,Z.Z)(),K=(0,Z.Z)(),q=(0,n.useCallback)((()=>{t(C.Z.actions.reset())}),[t]),Y=(0,n.useCallback)((()=>{V({action:a.NH}),t(h.aM({legacyAction:h.Pe({serverEntityID:O[0].server.entityID,providerEntityID:O[0].provider.entityID}),items:O})),q()}),[t,O,q,V]),X=(0,n.useCallback)((()=>{V({action:a.cO}),t(h.aM({legacyAction:h.u9({serverEntityID:O[0].server.entityID,providerEntityID:O[0].provider.entityID}),items:O})),q()}),[t,O,q,V]),J=(0,n.useCallback)((()=>{V({action:a.pe}),t(h.aM({legacyAction:h.$e({serverEntityID:O[0].server.entityID,providerEntityID:O[0].provider.entityID}),items:O})),W.onClose(),q()}),[t,W,O,q,V]),ee=(0,n.useCallback)((()=>{V({action:a.PR}),t(h.aM({legacyAction:h.$z({serverEntityID:O[0].server.entityID,providerEntityID:O[0].provider.entityID}),items:O})),W.onClose(),q()}),[t,W,O,q,V]),te=(0,n.useCallback)((()=>{V({action:a.DK}),O.forEach((({metadataItem:e})=>{t(v.Z.actions.repopulateRequested({sourceURI:e.sourceURI}))})),q()}),[t,O,q,V]),ie=(0,n.useCallback)((()=>{V({action:a.uf}),q()}),[q,V]),ue=(0,n.useCallback)((()=>{V({action:a.dm}),t(h.aM({legacyAction:h.fR(),items:O})),q()}),[t,O,q,V]),Me=(0,n.useCallback)((()=>{V({action:a.FH}),t(h.aM({legacyAction:h.ZP(),items:O})),W.onClose(),q()}),[t,W,O,q,V]),De=(0,n.useCallback)((()=>{V({action:a.yY}),t(h.aM({legacyAction:h.hM({options:{skipRedirect:!0}}),items:O})),q()}),[t,O,q,V]),Oe=(0,n.useCallback)((()=>{V({action:a._R}),t(h.aM({legacyAction:h.mP(),items:O})),W.onClose(),q()}),[t,W,O,q,V]),Te=(0,n.useCallback)((()=>{V({action:a.t7}),t(h.aM({legacyAction:h.PP(),items:O})),W.onClose(),q()}),[t,W,O,q,V]),xe=(0,n.useCallback)((()=>{V({action:a.RG}),t(h.aM({legacyAction:h.H3(),items:O})),W.onClose(),q()}),[t,W,O,q,V]),Ae=(0,n.useCallback)((()=>{const e=A.isMarkPlayedVisible;V({action:e?a.qe:a.h3}),O.forEach((({metadataItem:r,server:n,provider:i})=>{t(v.Z.actions.playedStatusUpdateRequested({server:n,provider:i,stableUser:T,sourceURI:r.sourceURI,ratingKey:r.ratingKey,guid:r.guid,played:e}))})),q()}),[t,A.isMarkPlayedVisible,O,q,T,V]),ke=(0,n.useCallback)((({targetServer:e,targetProvider:r,targetLibrarySectionID:n,targetLibraryType:i})=>{V({action:a.Ao}),O.forEach((({metadataItem:s,server:a,provider:o})=>{t(v.Z.actions.addToLibraryRequested({targetServer:e,targetProvider:r,targetLibrarySectionID:n,targetLibraryType:i,server:a,provider:o,metadataItem:s}))})),q()}),[t,O,q,V]),Ne=(0,n.useCallback)((()=>{t(C.Z.actions.reset())}),[t]);if((0,n.useEffect)((()=>()=>{q()}),[q]),!x)return null;const Re=(0,pe.gQ)(A).every((([e,t])=>"isMarkPlayedVisible"===e||"isMarkUnplayedVisible"===e||!t)),Le=(0,pe.gQ)(A).some((([e,t])=>!Ce.includes(e)&&t)),je=O.every((({metadataItem:e})=>e.remoteMedia));return n.createElement(he.Z,{className:e},n.createElement("div",{className:Ie.count},n.createElement(ye.Z,{className:Ie.icon}),(0,c.Z)("{count} items selected",{count:F})),Re?n.createElement("div",{className:Ie.actions},(0,c.Z)("No actions available for this selection")):n.createElement("div",{className:Ie.actions},A.isPlayVisible?n.createElement(f.Z,{className:Ie.button,icon:Pe.Z,title:(0,c.Z)("Play"),onPress:Y}):null,A.isMarkPlayedOrUnplayedVisible?n.createElement(f.Z,{className:Ie.button,icon:A.isMarkPlayedVisible?be.Z:Ze.Z,title:A.isMarkPlayedVisible?(0,c.Z)("Mark as Played"):(0,c.Z)("Mark as Unplayed"),onPress:_.onOpen}):null,(A.isAddToPlaylistVisible||A.isAddToCollectionVisible)&&L?n.createElement(n.Fragment,null,n.createElement(f.Z,{icon:ve.Z,id:G,title:(0,c.Z)("Add to..."),onPress:Q.onToggle}),n.createElement(d.Z,{className:Ie.menu,isOpen:Q.isOpen,target:G,onMenuClose:Q.onClose},n.createElement(E.Z,{contentDirectoryID:R,mediaType:(0,y.Z)(k[0].type,k[0].subtype),metadataType:k[0].type,provider:O[0].provider,server:O[0].server,sourceURI:L,onAddToCollectionPress:A.isAddToCollectionVisible?$.onOpen:void 0,onAddToPlaylistPress:A.isAddToPlaylistVisible?K.onOpen:void 0,onMenuClose:Q.onClose,onSaveCollectionPress:te,onSavePlaylistPress:ie})),A.isAddToPlaylistVisible&&L?n.createElement(w.Z,{defaultDestinationSource:k[0].source,defaultTitle:N,isOpen:K.isOpen,mediaType:(0,y.Z)(k[0].type,k[0].subtype),sourceURI:L,onModalClose:K.onClose,onSaveSuccess:ie}):null,A.isAddToCollectionVisible&&L&&R?n.createElement(I.Z,{contentDirectoryID:R,defaultTitle:N,isOpen:$.isOpen,metadataType:k[0].type,sourceURI:L,onModalClose:$.onClose,onSaveSuccess:te}):null):null,A.isEditVisible?n.createElement(f.Z,{className:Ie.button,icon:fe.Z,title:(0,c.Z)("Edit"),onPress:ue}):null,Le?n.createElement(f.Z,{className:Ie.button,icon:Se.Z,id:H,title:(0,c.Z)("More"),onPress:W.onToggle}):null,n.createElement(me.Z,{isOpen:_.isOpen,message:A.isMarkPlayedVisible?(Ve=O.length,1===Ve?(0,c.Z)("Are you sure you want to mark this item as played?"):(0,c.Z)("Are you sure you want to mark these {selectedItemsCount} items as played?",{selectedItemsCount:Ve})):Ee(O.length),metricsPage:A.isMarkPlayedVisible?o.lP:o.Md,title:A.isMarkPlayedVisible?(0,c.Z)("Mark as Played"):(0,c.Z)("Mark as Unplayed"),onCancel:_.onClose,onConfirm:Ae}),n.createElement(d.Z,{isOpen:W.isOpen,target:H,onMenuClose:W.onClose},A.isPlayVisible?n.createElement(u.Z,{onPress:X},(0,c.Z)("Shuffle")):null,A.isPlayVisible?n.createElement(u.Z,{onPress:J},(0,c.Z)("Play Next")):null,A.isPlayVisible?n.createElement(u.Z,{onPress:ee},(0,c.Z)("Add to Queue")):null,A.isRefreshVisible?n.createElement(u.Z,{onPress:xe},(0,c.Z)("Refresh Metadata")):null,A.isAnalyzeVisible?n.createElement(u.Z,{onPress:Oe},(0,c.Z)("Analyze")):null,A.isOptimizeVisible?n.createElement(u.Z,{onPress:Me},(0,c.Z)("Optimize...")):null,A.isMergeVisible?n.createElement(u.Z,{onPress:Te},(0,c.Z)("Merge")):null,A.isAddToLibraryVisible?n.createElement(g.Z,{onAddToLibrary:ke}):null,A.isDeleteVisible?n.createElement(u.Z,{kind:je?P.Z.Default:P.Z.Danger,onPress:(0,p.Z)(z.onOpen,W.onClose)},je?(0,c.Z)("Remove"):(0,c.Z)("Delete")):null),n.createElement(me.Z,{isOpen:z.isOpen,message:we(F,je),metricsPage:o.$e,title:je?(0,c.Z)("Remove"):(0,c.Z)("Delete"),onCancel:z.onClose,onConfirm:De})),n.createElement("div",{className:Ie.deselect},n.createElement(b.Z,{onPress:Ne},n.createElement(ge.Z,{className:Ie.icon}),(0,c.Z)("Deselect All"))));var Ve}},28790:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(67294),i=r(28216),s=r(71975),a=r(99464),o=r(71448);function l({isHovered:e,metadataItem:t,metadataItemState:r}){const l=(0,i.I0)(),c=t?s.T.getIdentity(t):void 0,d=function(e,t,r,s,a=!1){const l=(0,i.I0)(),c=(0,i.v9)(t),d=(0,n.useMemo)((()=>!!s&&!!c.items[s]),[s,c.items]),u=!!c.count,{isSelectionRangeActive:p,isSelectionRangeComplete:m,checkItemInRange:h,onRangeStart:g,onRangeEnd:y,onRangeClear:v,onRangeSelect:f}=(0,o.r5)(),b=(0,n.useCallback)((e=>{l(r.selectItems({items:e}))}),[r,l]),Z=(0,n.useCallback)((e=>{l(r.deselectItems({items:e}))}),[r,l]),S=(0,n.useCallback)((()=>{e&&(m?f(b,Z):d?(Z([e]),v()):(b([e]),g(e)))}),[m,d,e,Z,v,f,g,b]);return(0,n.useEffect)((()=>{e&&p&&u&&a&&y(e)}),[a,p,u,e,y]),{isSelectionActive:u,isSelected:d,isInSelectionRange:p&&h(e),onToggleSelect:S}}(t,a.Z,s.Z.actions,c,e),u=null==r?void 0:r.isDeleted;return(0,n.useEffect)((()=>{t&&u&&d.isSelected&&l(s.Z.actions.deselectItems({items:[t]}))}),[t,u,d,l,d.isSelected]),d}},71975:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u,T:()=>c});var n=r(85229),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const c=function(e,t){const r={count:0,items:{}};return{getDefaultMultiselectState:()=>r,getIdentity:t,reducers:{reset(e){let t=e;return t=r,t},selectItems(e,{payload:r}){const n=e,{items:i}=r;i.forEach((e=>{const r=t(e);n.items[r]||(n.items[r]=e,n.count+=1)}))},deselectItems(e,{payload:r}){const n=e,{items:i}=r;i.forEach((e=>{const r=t(e);n.items[r]&&(delete n.items[r],n.count-=1)}))}}}}(0,(e=>e.sourceURI)),d=c.getDefaultMultiselectState(),u=(0,n.oM)({name:"metadataMultiselect",initialState:d,reducers:((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e})({},c.reducers)})},96436:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(99464);const s=(0,n.P1)(i.Z,(e=>!!e.count))},99464:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(18585);const s=(0,n.P1)(i.Z,(e=>e.metadataMultiselect))},71130:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(74226),i=r(13169);const s=function(e){return!!(0,i.Z)(e)||!!n.wB(e.identifier,n.xF)}},57668:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(16914),i=r(15488);function s(){const e=(0,n.Z)(i.p.IncludeDiscoverSource),t=(0,n.Z)(i.p.IncludeMetadataInSearch),r=(0,n.Z)(i.p.IncludeAvailabilities);return e||t||r}},16914:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(28216),s=r(44346),a=r(52746),o=r(30399),l=r(15488),c=r(9836);function d(e){const t=(0,i.I0)(),{optOuts:r,isPending:d,isPopulated:u,error:p}=(0,i.v9)(c.Z),m=(0,i.v9)(s.Z),h=(0,i.v9)(a.Z);(0,n.useEffect)((()=>{d||u||p||!h||t(o.Z.actions.fetchOptOuts())}),[t,p,d,u,h]);const g=r[e];return!g||g===l.l.OptIn||g===l.l.OptOutManaged&&!m}},30399:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(85229),i=r(32601);const s=(0,n.oM)({name:"optOuts",initialState:{isPopulated:!1,isPending:!1,error:null,optOuts:{}},reducers:{fetchOptOuts(e){(0,i.er)(e)},fetchOptOutsSucceeded(e,{payload:t}){(0,i.vv)(e),e.optOuts=t.optOuts},fetchOptOutsFailed(e,{payload:t}){(0,i.VQ)(e,t.error)},updateOptOut(e,t){},updateOptOutSucceeded(e,{payload:t}){Object.assign(e.optOuts,t.optOut)},updateOptOutFailed(e,{payload:t}){(0,i.VQ)(e,t.error)}}})},15488:(e,t,r)=>{"use strict";r.d(t,{l:()=>n,p:()=>i});var n=(e=>(e.OptIn="opt_in",e.OptOut="opt_out",e.OptOutManaged="opt_out_managed",e))(n||{}),i=(e=>(e.IncludeDiscoverSource="includeDiscoverSource",e.IncludeMetadataInSearch="includeMetadataInSearch",e.IncludeAvailabilities="includeAvailabilities",e.IncludeSocialProof="includeSocialProof",e))(i||{})},9836:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(96994);const s=(0,n.P1)(i.Z,(e=>e.features.optOuts))},51175:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p,g:()=>d});var n=r(85229);var i=r(61329),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=(0,i.Z)((e=>e),(e=>{var t,r,n;const{data:i}=e,s=i.MediaContainer;return{items:null!=(t=null==s?void 0:s.Metadata)?t:[],totalSize:null!=(r=null==s?void 0:s.totalSize)?r:0,offset:null!=(n=null==s?void 0:s.offset)?n:0}})),u=d.getDefaultPaginatedState(),p=(0,n.oM)({name:"playHistory",initialState:u,reducers:((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({},d.reducers)})},50223:(e,t,r)=>{"use strict";r.d(t,{F:()=>n});var n=(e=>(e.LibrarySectionID="librarySectionID",e.AccountID="accountID",e.MetadataItemID="metadataItemID",e.ViewedAt="viewedAt",e))(n||{})},83564:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(85229).oM)({name:"players",initialState:{},reducers:{ended(e,t){}}})},36155:(e,t,r)=>{"use strict";r.d(t,{G:()=>n});var n=(e=>(e.AudioVideo="audioVideo",e.Photo="photo",e))(n||{})},51359:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(45191),i=r(59081);function s(){const e=(0,n.DB)("appModel").get("deviceSettings").get("debugLevel");return e===i.Z.ENABLED||e===i.Z.VERBOSE}},59790:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ot});var n=r(94184),i=r.n(n),s=r(67294),a=r(28216),o=r(5977),l=r(82767),c=r(99),d=r(54320),u=r(37703),p=r(37188),m=r(99539),h=r(51146),g=r(27649),y=r(74278),v=r(26759),f=r(75404),b=r(8483),Z=r(70777),S=r(8523),P=r(35076),I=r(73788),E=r(54834),w=r(57674),C=r(25353),M=r(10125),D=r(14580),O=r(83782),T=r(93888),x=r(70448),A=r(15660),k=r(38449),N=r(66012),R=r(78864),L=r(14096),j=r(10234),V=r(99318),U=r(12882),F=r(54345),B=r(11294),_=r(92934),z=r(5348),H=r(96493),W=r(25004),G=r(54675),Q=r(74310),$=r(12587),K=r(9278),q=r(73456),Y=r(44811),X=r(31326),J=r(90877),ee=r(55319),te=r(72310),re=r(52194),ne=r(91085),ie=r(89536),se=r(83700),ae=r(21056),oe=r(82088),le=r(53488),ce=r(73688),de=r(56672),ue=r(31491),pe=r(71);function me({kind:e,metadataItem:t,isLabeled:r,isDisabled:n}){const i=(0,s.useCallback)(((i,a,o)=>s.createElement(s.Fragment,null,s.createElement(de.Z,{metadataItem:t}),s.createElement(X.Z,{"data-testid":i?"preplay-delete-download":"preplay-download",icon:i?pe.Z:ue.Z,isDisabled:n||a,isLabeled:r,kind:e,title:i?(0,I.Z)("Delete Download"):(0,I.Z)("Download"),onPress:o}))),[n,r,e,t]);return s.createElement(ce.Z,{metadataItem:t,render:i})}var he=r(96436),ge=r(16914),ye=r(15488),ve=r(1802),fe=r(78386),be=r(10033),Ze=r(97318),Se=r(783),Pe=r(34163);function Ie(e,t){const r=null==t?void 0:t.length,n=t.map((({displayName:t,username:r,id:n})=>n===e?(0,I.Z)("You"):t||r));return t&&r?r>3?(0,I.Z)("Activity by {firstMention}, {secondMention} and {mentionsLeft} others",{firstMention:n[0],secondMention:n[1],mentionsLeft:r-2}):3===r?(0,I.Z)("Activity by {firstMention}, {secondMention} and 1 other",{firstMention:n[0],secondMention:n[1]}):2===r?(0,I.Z)("Activity by {firstMention} and {secondMention}",{firstMention:n[0],secondMention:n[1]}):(0,I.Z)("Activity by {firstMention}",{firstMention:n[0]}):""}var Ee=r(94673),we=r(38849),Ce=r(22626);function Me({metadataItem:e,width:t,isDisabled:r}){const n=(0,u.b)(),[i,o]=(0,Y.c9)(),c=(0,a.I0)(),{details:p}=(0,a.v9)(Se.Z),m=(0,s.useMemo)((()=>{var t;return null!=(t=(0,Ze.Z)(e.guid))?t:""}),[e.guid]),h=(0,P.Z)({key:e.key,serverIdentifier:i.machineIdentifier,providerIdentifier:o.providerIdentifier}),{data:g,isLoading:y,error:v}=(0,Ce.Yu)({metadataID:m,serverURL:h},{skip:!m}),f=(0,s.useMemo)((()=>g?g.activityMentions.recentUsers.flatMap((e=>e.avatar||[])):[]),[g]),b=(0,s.useCallback)((()=>{c((0,be.c4)({pathname:(0,we.Z)(i.machineIdentifier,o.identifier,{key:e.key})}))}),[c,e.key,o.identifier,i.machineIdentifier]);return!e.guid||y?null:f.length&&(null==g?void 0:g.activityMentions.recentUsers.length)&&!v?s.createElement("div",{className:"MetadataSharingAction-activity-Q2pEvz",style:{width:`${t}px`||"100%"}},s.createElement(fe.X,{gap:d.$u.XXS,width:"100%"},s.createElement(Pe.Z,{avatars:f,className:"MetadataSharingAction-socialButton-PmqGRh SocialActivityButton-socialButton-JOSYdi Link-link-vSsQW1",label:Ie(p.uuid,null==g?void 0:g.activityMentions.recentUsers),numberOfLines:2,onPress:b}),s.createElement("div",{className:"MetadataSharingAction-iconShare-rw2Xe5"},s.createElement(Ee.Z,{item:e,modalState:n},s.createElement(ve.hU,{"aria-label":"Edit",icon:l.F,isDisabled:r,size:d.$u.M,testID:"shareItem",onPress:n.onOpen}))))):s.createElement("div",{className:"MetadataSharingAction-shareWithFriends-CgTDRz",style:{width:t}},s.createElement(Ee.Z,{item:e,modalState:n},s.createElement(ve.hU,{icon:l.F,isDisabled:r,size:d.$u.S,testID:"shareItem",onPress:n.onOpen},(0,I.Z)("Share with Friends"))))}var De=r(22222),Oe=r(59658),Te=r(98551);var xe=r(7659),Ae=r(80727),ke=r(61740),Ne=r(45697),Re=r.n(Ne),Le=r(90558);function je(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",id:"plex-icon-toolbar-add-560"};i["aria-hidden"]=!t,i.style=n,i.className=Le.Z.plexIcon+(r?" "+r:"");const a=[s.createElement.apply(s,["path",{clipRule:"evenodd",d:"M27.4286 27.4286V44.5714H20.5714V27.4286H3.42857V20.5714H20.5714V3.42859H27.4286V20.5714H44.5714V27.4286H27.4286Z"}].concat([]))];return t&&a.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(a))}je.propTypes={"aria-label":Re().string,className:Re().string,style:Re().object};const Ve=je;var Ue=r(39296),Fe=r(86302),Be=r(40921),_e=r(42451),ze=r(9451),He=r(22162),We=r(67944),Ge=r(30470),Qe=r(70957),$e=r(88706),Ke=r(86607);const qe="PrePlayActionBar-menu-xDrJti Menu-menu-OCzudL";var Ye=Object.defineProperty,Xe=Object.defineProperties,Je=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,nt=(e,t,r)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,it=(e,t)=>{for(var r in t||(t={}))tt.call(t,r)&&nt(e,r,t[r]);if(et)for(var r of et(t))rt.call(t,r)&&nt(e,r,t[r]);return e},st=(e,t)=>Xe(e,Je(t));function at({isPrimary:e,isDisabled:t,action:r,metadataItem:n,metadataItemState:i,metadataProviderItemState:c,onDeckMetadataItemState:d,isMediaFileUnavailable:x,metadataProviderSourceURI:k,metadataProviderItemKey:N,isActivityItemFeed:R}){const B=(0,a.I0)(),{metricsPage:G,metricsContextTuple:J}=(0,ne.Zn)(),[re,ae]=(0,Y.c9)(),{containerServer:ce,containerProvider:de}=(0,Q.U)(),ue=(0,a.v9)(v.Z),pe=(0,a.v9)(y.Z),he=(0,a.v9)(K.Z),ge=(0,L.P)({server:re,provider:ae,metadataItem:n,metadataItemState:i}),ye=(0,j.R)({containerServer:ce,containerProvider:de,server:re,provider:ae,metadataItem:n,metadataItemState:i,metricsPage:G,metricsContextTuple:J}),ve=(0,ie.Z)(n),fe=(0,o.k6)(),be=(0,o.TH)(),Ze=(0,te.Z)(),Se=e?se.Z.Primary:se.Z.Default,Pe=i.isPopulated||i.error,Ie=!c||c.isPopulated||c.error,we=(0,s.useCallback)(((e={})=>{ve(st(it({},e),{action:f.NH})),ye(g.wA({metricsProperties:e}))}),[ye,ve]),Ce=(0,s.useCallback)(((e={})=>{ve(st(it({},e),{action:f.NH}));const t=(0,_.Z)(n);B((0,h.lS)({serverEntityID:re.entityID,providerEntityID:ae.entityID,metricsPage:G,metricsContextTuple:J,metricsProperties:e,options:{type:E.pX,identifier:t.channelIdentifier}}))}),[B,re,ae,n,G,J,ve]),Me=(0,s.useCallback)(((e={})=>{ve(st(it({},e),{action:f.cO})),ye(g.Em({metricsProperties:e}))}),[ye,ve]);let De=we;(0,H.Z)(n)?De=Ce:n.type===V.pG.Artist&&(De=Me);const Oe=(0,s.useCallback)((()=>{ge(T.Nv())}),[ge]),Te=(0,s.useCallback)((()=>{De()}),[De]),Ne=(0,s.useCallback)((()=>{Me()}),[Me]),Re=(0,s.useCallback)((()=>{ve({action:f.$W}),ye(g.EF())}),[ye,ve]),Le=(0,s.useCallback)((()=>{ve({action:f.b8}),ye(g.QR({playlistType:w.j0}))}),[ye,ve]),je=(0,s.useCallback)((()=>{ve({action:f.$J}),B(W.Z.actions.toggleSavedRequested({server:re,provider:ae,stableUser:ue,sourceURI:n.grandparentKey?(0,P.Z)({serverIdentifier:re.machineIdentifier,providerIdentifier:ae.identifier,key:n.grandparentKey}):n.sourceURI,ratingKey:n.grandparentRatingKey||n.ratingKey,saved:!0}))}),[B,n.grandparentKey,n.grandparentRatingKey,n.ratingKey,n.sourceURI,ae,re,ue,ve]),He=(0,s.useCallback)((({added:e,showToastOnAdded:t=!1})=>{const r=!(!(he&&k&&N)||!ue.features[Z.ie]&&(0,q.Z)(ae,$.rf.AddToWatchlist,ue));ve({action:e?f.JL:f.hi}),B(W.Z.actions.toggleWatchlistRequested({server:r?pe:re,provider:r?he:ae,stableUser:ue,sourceURI:r?k:n.sourceURI,ratingKey:r?N:n.ratingKey,added:e,showToastOnAdded:t}))}),[pe,B,n.ratingKey,he,N,k,n.sourceURI,ae,re,ue,ve]),Ye=(0,s.useCallback)((()=>{He({added:!0})}),[He]),Xe=(0,s.useCallback)((()=>{He({added:!1})}),[He]),Je=(0,s.useCallback)((e=>{ve({action:e?f.qe:f.h3}),B(W.Z.actions.playedStatusUpdateRequested({server:re,provider:ae,stableUser:ue,sourceURI:n.sourceURI,ratingKey:n.ratingKey,guid:n.guid,played:e}))}),[ve,n,B,re,ae,ue]),et=(0,ee.Z)(),tt=(0,s.useCallback)((()=>{Je(!0),et.onClose()}),[et,Je]),rt=(0,ee.Z)(),nt=(0,s.useCallback)((()=>{Je(!1),rt.onClose()}),[rt,Je]),at=(0,u.b)(),ot=(0,ee.Z)(),lt=(0,ee.Z)(),ct=(0,ee.Z)(),dt=(0,O.Z)(),ut=(0,s.useCallback)((()=>{ve({action:f.dm}),ge(T.Cf())}),[ge,ve]),pt=(0,s.useCallback)((()=>{"isMarkPlayedVisible"===r?et.onOpen():rt.onOpen()}),[r,et,rt]);switch((0,s.useEffect)((()=>{(0,xe.Z)(Ze.wl)&&"isRemoveFromWatchlistVisible"===r&&!ue.anonymous&&fe.replace(be.pathname+(0,C.Z)(be.search,"wl"))}),[r,fe,be.pathname,be.search,Ze.wl,ue.anonymous]),(0,s.useEffect)((()=>{(0,xe.Z)(Ze.wl)&&"isAddToWatchlistVisible"===r&&Pe&&Ie&&!ue.anonymous&&(fe.replace(be.pathname+(0,C.Z)(be.search,"wl")),He({added:!0,showToastOnAdded:!0}))}),[r,fe,Pe,Ie,be.pathname,be.search,He,Ze.wl,ue.anonymous]),(0,s.useEffect)((()=>{const e=(0,xe.Z)(Ze.autoplay);e&&fe.replace(be.pathname+(0,C.Z)(be.search,"autoplay")),e&&"isPlayVisible"===r&&!x&&De({setting:b.Y})}),[r,fe,x,be.pathname,be.search,De,Ze.autoplay]),(0,s.useEffect)((()=>{if("isPlayVisible"===r)return S.Z.on("shortcut:playSelected",Te),()=>{S.Z.off("shortcut:playSelected",Te)}})),(0,s.useEffect)((()=>{if("isEditVisible"===r)return S.Z.on("shortcut:edit",ut),()=>{S.Z.off("shortcut:edit",ut)}})),(0,s.useEffect)((()=>{if("isMarkPlayedVisible"===r||"isMarkUnplayedVisible"===r)return S.Z.on("shortcut:togglePlayed",pt),()=>{S.Z.off("shortcut:togglePlayed",pt)}})),r){case"isPlayVisible":return x?s.createElement(X.Z,{isDisabled:t,isLabeled:!0,kind:se.Z.Danger,title:(0,I.Z)("Unavailable"),onPress:Oe}):s.createElement(X.Z,{"data-testid":"preplay-play",icon:We.Z,isDisabled:t,isLabeled:e,kind:Se,title:(0,z.Z)(n,i,d),onPress:Te});case"isPlayTrailerVisible":return s.createElement(X.Z,{"data-testid":"preplay-trailer",icon:Qe.Z,isDisabled:t,isLabeled:e,kind:Se,title:(0,I.Z)("Play Trailer"),onPress:Re});case"isShuffleVisible":return s.createElement(X.Z,{"data-testid":"preplay-shuffle",icon:Ke.Z,isDisabled:t,isLabeled:e,kind:Se,title:(0,I.Z)("Shuffle"),onPress:Ne});case"isPlayRadioVisible":return s.createElement(X.Z,{"data-testid":"preplay-radio",icon:Ge.Z,isDisabled:t,isLabeled:e,kind:Se,title:(0,I.Z)("Play Radio"),onPress:Le});case"isMarkPlayedVisible":case"isMarkUnplayedVisible":{const a="isMarkPlayedVisible"===r;return s.createElement(s.Fragment,null,s.createElement(X.Z,{"data-testid":"preplay-togglePlayedState",icon:a?_e.Z:ze.Z,isDisabled:t||!Pe,isLabeled:e,kind:Se,title:a?(0,I.Z)("Mark as Played"):(0,I.Z)("Mark as Unplayed"),onPress:a?et.onOpen:rt.onOpen}),s.createElement(Ae.Z,{isOpen:a?et.isOpen:rt.isOpen,leafCount:a?i.unviewedLeafCount:i.viewedLeafCount,markUnplayed:rt.isOpen,subtype:n.subtype,title:n.title,type:n.type,onCancel:a?et.onClose:rt.onClose,onConfirm:a?tt:nt}))}case"isAddToSavedVisible":return s.createElement(X.Z,{"data-testid":"preplay-addToSaved",icon:Ve,iconClassName:"PrePlayActionBar-addIcon-_LMKcZ ActionButton-icon-K2YCyl",isDisabled:t||!Pe,isLabeled:e,kind:Se,title:(0,U.Z)(i.saved),onPress:je});case"isAddToWatchlistVisible":return s.createElement(X.Z,{"data-testid":"preplay-addToWatchlist",icon:Fe.Z,isDisabled:t||!Pe||!Ie,isLabeled:e,kind:Se,title:(0,I.Z)("Add to Watchlist"),onPress:Ye});case"isRemoveFromWatchlistVisible":return s.createElement(X.Z,{"data-testid":"preplay-removeFromWatchlist",icon:$e.Z,isDisabled:t||!Pe||!Ie,isLabeled:e,kind:Se,title:(0,I.Z)("Remove from Watchlist"),onPress:Xe});case"isAddToPlaylistVisible":return s.createElement(s.Fragment,null,s.createElement(X.Z,{"data-testid":"preplay-addToPlaylist",icon:Ue.Z,id:dt,isDisabled:t,isLabeled:e,kind:Se,title:(0,I.Z)("Add to..."),onPress:ct.onToggle}),s.createElement(le.Z,{defaultDestinationSource:n.source,defaultTitle:n.title,isOpen:lt.isOpen,mediaType:(0,F.Z)(n.type,n.subtype),sourceURI:n.sourceURI,onModalClose:lt.onClose}),s.createElement(M.Z,{className:qe,isOpen:ct.isOpen,target:dt,onMenuClose:ct.onClose},s.createElement(oe.Z,{mediaType:(0,F.Z)(n.type,n.subtype),provider:ae,server:re,sourceURI:n.sourceURI,onAddToPlaylistPress:lt.onOpen,onMenuClose:ct.onClose})));case"isSyncDownloadVisible":return s.createElement(me,{isDisabled:t,isLabeled:e,kind:Se,metadataItem:n});case"isEditVisible":return s.createElement(X.Z,{"data-testid":"preplay-edit",icon:Be.Z,isDisabled:t,isLabeled:e,kind:Se,title:(0,I.Z)("Edit"),onPress:ut});case"isRecordVisible":{const r=i.grandparentSubscriptionType||i.subscriptionType||n.type;return s.createElement(s.Fragment,null,s.createElement(X.Z,{"data-testid":"preplay-record",icon:r===V.pG.Show?p.Z:m.Z,isDisabled:t,isLabeled:e,kind:se.Z.Primary,title:null==i.grandparentSubscriptionID&&null==i.subscriptionID?(0,I.Z)("Record"):(0,I.Z)("Modify"),onPress:ot.onOpen}),s.createElement(A.Z,{metadataItem:n,metadataItemState:i},(({serverEntityID:e,providerEntityID:t,metadataItemEntityID:n,onMarkStale:i})=>s.createElement(ke.Z,{isOpen:ot.isOpen,metadataItemEntityID:n,metricsProperties:{page:G,contextTuple:J},providerEntityID:t,serverEntityID:e,subscriptionType:r,onModalClose:(0,D.Z)(i,ot.onClose)}))))}case"isShareVisible":return n.guid&&R?s.createElement(s.Fragment,null,s.createElement(X.Z,{className:"PrePlayActionBar-sharingActionIconButton-fH3hxo ActionButton-iconActionButton-qpUHPk ActionButton-actionButton-SHA5Wv Button-button-Eu0WcX Link-link-vSsQW1","data-testid":"preplay-shareWithFriendsAction",icon:l.F,isDisabled:t||!Pe,isLabeled:e,kind:Se,title:(0,I.Z)("Share with Friends"),onPress:at.onToggle}),s.createElement(Ee.Z,{children:null,item:n,modalState:at})):null}return null}function ot({metadataItem:e,promotedActions:t}){var r;const n=(0,a.I0)(),o=(0,O.Z)(),[l,u]=(0,s.useState)(!1),[p,m]=(0,s.useState)(),[h,g]=(0,Y.c9)(),b=(0,a.v9)(v.Z),Z=(0,a.v9)(he.Z),E=(0,ae.Z)(),w=(0,s.useRef)(null),C=(0,a.v9)(y.Z),M=(0,a.v9)(K.Z),D=(0,s.useMemo)((()=>(0,P.Z)({key:e.key,serverIdentifier:h.machineIdentifier,providerIdentifier:g.identifier})),[e.key,g.identifier,h.machineIdentifier]),A=(0,N.Z)(D),j=(0,N.Z)(null==(r=e.onDeck)?void 0:r.sourceURI),{metadataProviderItemKey:V,metadataProviderSourceURI:U,metadataProviderItemState:F}=(0,R.Z)({provider:g,metadataItem:e}),_=(0,ge.Z)(ye.p.IncludeSocialProof),z=(0,s.useMemo)((()=>(0,G.Z)({server:h,metadataItemState:A})),[A,h]),H=(0,s.useMemo)((()=>(0,G.Z)({server:C,metadataItemState:F})),[C,F]),Q=(0,s.useMemo)((()=>{return t=e.sourceURI,(0,De.P1)((0,Oe.Z)(t),Te.Z,((e,t)=>!!e.deletedAt||t.metadata.isMediaFileUnavailable));var t}),[e.sourceURI]),$=(0,a.v9)(Q),q=(0,ie.Z)(e),ee=(0,L.P)({server:h,provider:g,metadataItem:e,metadataItemState:A}),te=(0,s.useMemo)((()=>{const t=(0,B.ZP)({server:h,provider:g,metadataProvider:M,metadataProviderItemState:F,stableUser:b,metadataItem:e,metadataItemState:A});return!_&&t.isShareVisible&&delete t.isShareVisible,t}),[_,e,A,M,F,g,h,b]),ne=function(e,t){return Object.keys(e).reduce(((r,n)=>{const i=n;return r[i]=!t.includes(i)&&e[i],r}),{})}(te,t),se=(0,s.useCallback)((()=>{u(!l)}),[l]),oe=(0,s.useCallback)((()=>{u(!1)}),[]),le=(0,s.useCallback)((()=>{q({action:f.$M}),ee(T.Nv())}),[ee,q]),ce=(0,s.useCallback)((()=>{var e;m(null==(e=w.current)?void 0:e.clientWidth)}),[]);(0,s.useEffect)((()=>{if(te.isGetInfoVisible)return S.Z.on("shortcut:info",le),()=>{S.Z.off("shortcut:info",le)}}),[te.isGetInfoVisible,le]),(0,s.useEffect)((()=>{z&&n(W.Z.actions.fetchRequested({server:h,provider:g,metadataItem:st(it({},e),{sourceURI:D})}))}),[n,e,D,g,h,z]),(0,s.useEffect)((()=>{M&&U&&H&&n(W.Z.actions.fetchRequested({server:C,provider:M,metadataItem:st(it({},e),{key:`/library/metadata/${V}`,sourceURI:U})}))}),[C,n,e,M,V,U,H]),(0,s.useEffect)((()=>{var e;m(null==(e=w.current)?void 0:e.clientWidth)}),[A]);const de=Object.keys(ne).some((e=>"isRateVisible"!==e&&"isShareVisible"!==e&&ne[e])),ue=(0,re.Z)(ce),pe=Object.keys(te).filter((e=>te[e]));if(0===pe.length)return null;const me=pe.filter((e=>"isShareVisible"!==e)).length>0;return s.createElement("div",{ref:ue,className:"PrePlayActionBar-prePlayContainer-od_bro"},me?s.createElement(J.Z,{className:i()("PrePlayActionBar-actionBarContainer-HuVIN0 ActionButtonBar-bar-_jwC59",E&&"PrePlayActionBar-activityContainer-xK1yG1")},s.createElement("div",{className:"PrePlayActionBar-inlineActions-RLSA5g"},s.createElement(c.k,{ref:w,alignItems:d.xM.Center,wrap:"wrap"},t.filter((e=>te[e])).map(((t,r)=>"isMarkUnplayedVisible"===t&&te.isMarkPlayedVisible?null:s.createElement(at,{key:t,action:t,isActivityItemFeed:E,isDisabled:Z,isMediaFileUnavailable:$,isPrimary:0===r,metadataItem:e,metadataItemState:A,metadataProviderItemKey:V,metadataProviderItemState:F,metadataProviderSourceURI:U,onDeckMetadataItemState:j}))),de?s.createElement(X.Z,{"data-testid":"preplay-more",icon:He.Z,id:o,isDisabled:Z,title:(0,I.Z)("More"),onPress:se}):null,te.isRateVisible?s.createElement(k.Z,{className:Z?"PrePlayActionBar-disabledUserRating-uVQzLy StarRating-starRating-rrWgj7":void 0,metadataItem:e}):null,s.createElement(x.Z,{actionsOverride:ne,className:qe,isOpen:l,metadataItem:e,target:o,onMenuClose:oe})))):null,te.isShareVisible&&!E?s.createElement("div",{className:"PrePlayActionBar-metadataSharingAction-A9JsPq"},s.createElement(Me,{isDisabled:Z,metadataItem:e,width:p})):null)}},7065:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ie});var n=r(67294),i=r(28216),s=r(84503),a=r(87442),o=r(73788),l=r(5103),c=r(54768),d=r(90792),u=r(71302),p=r(78389),m=r(80105),h=r(34219),g=r(21056),y=r(90106),v=r(96436),f=r(71078),b=r(26900),Z=r(78386),S=r(54320),P=r(44811),I=r(91085),E=r(84419),w=r(87264),C=r(10125),M=r(8059),D=r(69281),O=r(29360),T=r(99318),x=r(27736),A=r(98551);function k(){const{siblingListSourceURI:e}=(0,i.v9)(A.Z),t=(0,n.useMemo)((()=>e?(0,x.Z)(e):()=>{}),[e]);return(0,i.v9)(t)}var N=r(84332),R=r(94659),L=r(30547),j=r(45697),V=r.n(j),U=r(90558);function F(e){const t=e["aria-label"],r=e.className,i=e.style,s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",id:"plex-icon-toolbar-sibling-nav-560"};s["aria-hidden"]=!t,s.style=i,s.className=U.Z.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{d:"M5 39.36H43.4V43.2H5V39.36ZM5 27.84H43.4V31.68H5V27.84ZM5.00104 16.32H43.4V20.16H5.00104V16.32ZM5 4.79999H43.4V8.63999H5V4.79999Z"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}F.propTypes={"aria-label":V().string,className:V().string,style:V().object};const B=F;function _({server:e,provider:t,metadataItem:r,metricsContextTuple:i}){const s=(0,R.Z)(),a=k();if(!a)return null;const{items:o}=a,c=!r;return n.createElement(n.Fragment,null,n.createElement(l.Z,{id:s.menuButtonID,isDisabled:c,onPress:s.onMenuButtonPress},n.createElement(B,null),n.createElement(w.Z,{className:c?"PrePlayPageHeaderSiblingMenu-disabledDisclosureArrow-F8_rbm PrePlayPageHeaderSiblingMenu-disclosureArrow-i00KMP DisclosureArrow-disclosureArrow-NTDkGd":"PrePlayPageHeaderSiblingMenu-disclosureArrow-i00KMP DisclosureArrow-disclosureArrow-NTDkGd",direction:s.isMenuOpen?M.UP:M.WV})),n.createElement(C.Z,{isOpen:s.isMenuOpen,size:D.ln,target:s.menuButtonID,onMenuClose:s.onMenuClose},o.map((a=>n.createElement(N.Z,{key:a.key,isSelected:a.key===(null==r?void 0:r.key),to:(0,L.Z)(e,t,a.key,{context:(0,I.VJ)(i)},null==r?void 0:r.playlistType),onPress:s.onMenuClose},a.type===T.pG.Episode?n.createElement(n.Fragment,null,n.createElement(O.Z,{metadataItem:a}),n.createElement(E.Z,null)):null,a.title)))))}var z=r(65770);function H({metadataItem:e}){const[t,r]=(0,P.c9)(),{metricsContextTuple:i}=(0,I.Zn)(),s=k();if(!s||s.items.length<2)return null;const{items:a}=s,o=a.findIndex((t=>t.key===(null==e?void 0:e.key))),c=o<0?o:o+1,d=a[o<0?o:o-1],u=a[c],p={context:(0,I.VJ)(i)};return n.createElement(n.Fragment,null,n.createElement(z.Z,null),n.createElement(Z.X,{align:S.xM.Center,verticalAlign:S.xM.Center},n.createElement(l.Z,{"data-testid":"toolbarPrevious",isDisabled:!d,to:(0,L.Z)(t,r,null==d?void 0:d.key,p)},n.createElement(Z.X,{align:S.xM.Center,verticalAlign:S.xM.Center},n.createElement(f.e,null))),n.createElement(_,{metadataItem:e,metricsContextTuple:i,provider:r,server:t}),n.createElement(l.Z,{"data-testid":"toolbarNext",isDisabled:!u,to:(0,L.Z)(t,r,null==u?void 0:u.key,p)},n.createElement(Z.X,{align:S.xM.Center,verticalAlign:S.xM.Center},n.createElement(b.V,null)))))}var W=r(50914),G=r(4266),Q=r(90424),$=r(23574);const K=function({children:e}){return n.createElement("div",{className:"PageHeaderToolbar-container-aX0Fnj"},e)};var q=r(7080);var Y=Object.defineProperty,X=Object.defineProperties,J=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,ne=(e,t,r)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ie(){const e=(0,i.I0)(),t=(0,g.Z)(),{metadata:{metadataItem:r,isPopulated:f}}=(0,i.v9)(A.Z),b=(0,i.v9)((0,h.Z)("showPrePlayArtwork")),Z=(0,i.v9)((0,h.Z)("prePlayListStyles")),S=(0,i.v9)(G.Z),P=(0,i.v9)(W.Z),I=(0,i.v9)(Q.Z),E=(0,n.useCallback)((t=>{if(!S)return;const r=(n=((e,t)=>{for(var r in t||(t={}))te.call(t,r)&&ne(e,r,t[r]);if(ee)for(var r of ee(t))re.call(t,r)&&ne(e,r,t[r]);return e})({},Z),X(n,J({[S]:t})));var n;(0,a.c9)((()=>{e((0,s.LN)({prePlayListStyles:r}))}))}),[e,Z,S]),w=(0,i.v9)(v.Z),C=(0,n.useCallback)((()=>{e((0,s.LN)({showPrePlayArtwork:!b}))}),[e,b]);return w?n.createElement(y.Z,null):n.createElement($.Z,{className:"PrePlayPageHeader-pageHeader-cbV9fy PageHeader-pageHeader-e2k66t"},n.createElement(c.Z,null,f?n.createElement(m.Z,null):null),n.createElement(d.Z,null,(null==r?void 0:r.grandparentArt)||(null==r?void 0:r.parentArt)||(null==r?void 0:r.art)?n.createElement(n.Fragment,null,n.createElement(K,null,n.createElement(l.Z,{isSelected:b,tooltip:b?(0,o.Z)("Blur Background"):(0,o.Z)("Show Background"),onPress:C},n.createElement(q.Z,null))),t?null:n.createElement(z.Z,null)):null,t?null:n.createElement(n.Fragment,null,P&&I.length>1?n.createElement(u.Z,{listStyles:I,selectedListStyle:P,onListStyleSelect:E}):n.createElement(u.Z,{listStyles:[p.n.PrePlayGrid],selectedListStyle:p.n.PrePlayGrid}),n.createElement(H,{metadataItem:r}))))}},20894:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(74378);function s({className:e="PrePlayRightTitle-rightTitle-N77KKX",children:t}){return n.createElement("div",{className:e},t)}function a({className:e="PrePlayAttributionTitle-rightTitle-ieaBzC PrePlayRightTitle-rightTitle-N77KKX",imgClassName:t="PrePlayAttributionTitle-attributionLogo-P33W1T",metadataItem:r}){const{attribution:a,attributionLogo:o}=r;return o?n.createElement(s,{className:e},n.createElement("img",{className:t,src:o})):a?n.createElement(s,{className:e},n.createElement(i.Z,{attribution:a})):null}},16568:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({className:e="PrePlayLeftTitle-leftTitle-ewTpwH",children:t}){return n.createElement("div",{className:e},t)}},12852:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({className:e="PrePlayPrimaryTitle-primaryTitle-m91Ron",children:t}){return n.createElement("div",{className:e,"data-testid":"preplay-mainTitle"},t)}},5466:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),i=r(60421),s=r(59119),a=r(86023),o=r(73788);function l({contentRating:e}){if(!e)return null;const t=(0,a.Z)(e);return n.createElement(s.C,{title:(0,o.Z)("Rated {contentRating}",{contentRating:t})},t)}function c({metadataItem:e}){const{contentRating:t}=e;return n.createElement(n.Fragment,null,n.createElement(l,{contentRating:t}),n.createElement(i.Z,{metadataItem:e}))}},61218:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i({className:e="PrePlaySecondaryTitle-secondaryTitle-BA3QVn PrePlayPrimaryTitle-primaryTitle-m91Ron",children:t}){return n.createElement("div",{className:e,"data-testid":"preplay-secondTitle"},t)}},71688:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(78386),s=r(54320);function a({className:e="PrePlayTertiaryTitle-tertiaryTitle-RJP02Y",children:t}){return n.createElement("div",{className:e,"data-testid":"preplay-thirdTitle"},n.createElement(i.X,{gap:s.$u.M},t))}},94105:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(85229),i=r(35076),s=r(12559),a=r(99318),o=r(25004),l=r(40744),c=r(91364),d=r(83564),u=r(32601),p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const b={descendantListSourceURI:void 0,siblingListSourceURI:void 0,popularLeavesSourceURI:void 0,extrasSourceURI:void 0,metadata:{metadataItem:void 0,isMediaFileUnavailable:!1,isStale:!1,isPending:!1,isPopulated:!1,error:null},related:{hubs:[],isPending:!1,isPopulated:!1,error:null},augmented:{hubs:[],isPending:!1,isPopulated:!1,error:null}};function Z(e,t,r){var n;const{type:a,Context:o}=r;a===s.Ij&&(0,i.Z)({serverIdentifier:t.machineIdentifier,key:o.key})===(null==(n=e.metadata.metadataItem)?void 0:n.sourceURI)&&(o.exists&&o.accessible?e.metadata.isMediaFileUnavailable=!1:!1!==o.exists&&!1!==o.accessible||(e.metadata.isMediaFileUnavailable=!0))}const S=(0,n.oM)({name:"prePlay",initialState:b,reducers:{reset(e){return t=((e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&f(e,r,t[r]);return e})({},b),r={siblingListSourceURI:e.siblingListSourceURI},m(t,h(r));var t,r},metadataItemFetchRequested(e,t){(0,u.er)(e.metadata)},metadataItemFetchSucceeded(e,{payload:t}){(0,u.vv)(e.metadata),e.descendantListSourceURI=t.descendantListSourceURI,e.siblingListSourceURI=t.siblingListSourceURI,e.popularLeavesSourceURI=t.popularLeavesSourceURI,e.extrasSourceURI=t.extrasSourceURI,e.metadata.metadataItem=t.metadataItem,e.metadata.isStale=!1},metadataItemFetchFailed(e,{payload:t}){(0,u.VQ)(e.metadata,t.error)},metadataItemRepopulateRequested(e,t){(0,u.er)(e.metadata)},relatedHubsFetchRequested(e,t){(0,u.er)(e.related)},relatedHubsFetchSucceeded(e,{payload:t}){(0,u.vv)(e.related),e.related.hubs=t.hubs},relatedHubsFetchFailed(e,{payload:t}){(0,u.VQ)(e.related,t.error)},augmentedHubsFetchRequested(e,t){(0,u.er)(e.augmented)},augmentedHubsFetchSucceeded(e,{payload:t}){(0,u.vv)(e.augmented),e.augmented.hubs=t.hubs},augmentedHubsFetchFailed(e,{payload:t}){(0,u.VQ)(e.augmented,t.error)}},extraReducers:e=>{e.addCase(l.Z.actions.activityUpdated,((e,{payload:t})=>{Z(e,t.server,t.activity)})),e.addCase(l.Z.actions.activityFinished,((e,{payload:t})=>{Z(e,t.server,t.activity)})),e.addCase(d.Z.actions.ended,((e,{payload:t})=>{var r;(null==(r=e.metadata.metadataItem)?void 0:r.source)===t.source&&(e.metadata.isStale=!0)})),e.addCase(c.Z.actions.sessionStopped,((e,{payload:t})=>{var r;const n=(0,i.Z)({serverIdentifier:t.server.machineIdentifier});(null==(r=e.metadata.metadataItem)?void 0:r.source)===n&&(e.metadata.isStale=!0)})),e.addCase(o.Z.actions.playedStatusUpdateSucceeded,((e,{payload:t})=>{var r;const n=(0,i.Z)({serverIdentifier:t.server.machineIdentifier,providerIdentifier:t.provider.identifier});(null==(r=e.metadata.metadataItem)?void 0:r.source)===n&&(e.metadata.isStale=!0)})),e.addCase(o.Z.actions.created,((e,{payload:t})=>{const r=e.metadata.metadataItem,n=null==r?void 0:r.sourceURI,{parentSourceURI:i,rootSourceURI:s}=t;n&&(n===i||n===s&&(null==r?void 0:r.skipChildren))&&(e.metadata.isStale=!0)})),e.addCase(o.Z.actions.metadataProcessed,((e,{payload:t})=>{var r,n;if((null==(r=e.metadata.metadataItem)?void 0:r.type)!==a.pG.Artist)return;const i=null==(n=e.metadata.metadataItem)?void 0:n.sourceURI,{parentSourceURI:s}=t;i&&i===s&&(e.metadata.isStale=!0)})),e.addCase(o.Z.actions.deleted,((e,{payload:t})=>{var r;const n=null==(r=e.metadata.metadataItem)?void 0:r.sourceURI,{parentSourceURI:i,rootSourceURI:s}=t;!n||n!==i&&n!==s||(e.metadata.isStale=!0)})),e.addCase(o.Z.actions.repopulateCanceled,((e,t)=>{e.metadata.isStale=!1}))}})},98551:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(18585);const s=(0,n.P1)(i.Z,(e=>e.prePlay))},50914:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(22222),i=r(34219),s=r(4266),a=r(90424);const o=(0,n.P1)((0,i.Z)("prePlayListStyles"),s.Z,a.Z,((e,t,r)=>{if(!t||!r.length)return;const n=e[t];return n&&r.includes(n)?n:r[0]}))},4266:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(49146),s=r(8316);const a=(0,n.P1)(s.Z,i.Z,((e,t)=>e?`${e.source}:${e.librarySectionID}:${t}`:void 0))},90424:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(22222),i=r(99318),s=r(96493),a=r(78389),o=r(49146),l=r(8316);const c=(0,n.P1)(l.Z,o.Z,((e,t)=>{if(!e||!t)return[];if((0,s.Z)(e))return[a.n.SimpleDetails];switch(e.subtype){case i.y_.Track:return[a.n.TrackDetails]}switch(t){case a.U.Album:case a.U.Audiobook:case a.U.Episode:return[a.n.PrePlayGrid,a.n.Details];case a.U.Track:return[a.n.Table];default:return[a.n.PrePlayGrid]}}))},49146:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(22222),i=r(99318),s=r(79841),a=r(78389),o=r(71823),l=r(8316);const c=(0,n.P1)(l.Z,(e=>{if(!e)return;if(e.type===i.pG.Collection)return a.U.Collection;const t=e.skipChildren?(0,s.f)(e.type,e.subtype):(0,s.Z)(e.type,e.subtype);return(t?(0,o.Z)(t):void 0)||void 0}))},8316:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(98551);const s=(0,n.P1)(i.Z,(e=>e.metadata.metadataItem))},43549:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(20683),i=r(26263),s=r(99318),a=r(12587);const o=({tag:e,server:t,provider:r,contentDirectory:o,metadataNumericType:l,fallbackFilter:c})=>{if(!o)return;let d;if(e.type===s.pG.Directory&&e.key)d=(0,i.Z)(t,r,o,{key:e.key,pageType:a.F6.List});else if(e.filter){const[s,c]=e.filter.split("=");d=(0,i.Z)(t,r,o,{key:n.Z.join([o.key,"all"],{type:l,[s]:c}),pageType:a.F6.List})}else e.id&&c&&(d=(0,i.Z)(t,r,o,{key:n.Z.join([o.key,"all"],{type:l,[c]:e.id}),pageType:a.F6.List}));return d}},39848:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var n=r(67294),i=r(28216),s=r(1802),a=r(84739),o=r(64188),l=r(78386),c=r(82818),d=r(7256),u=r(56422),p=r(54320),m=r(37703),h=r(75404),g=r(62291),y=r(22169),v=r(73788),f=r(43046),b=r(47240),Z=r(26537),S=r(14139),P=r(83836),I=r(91085),E=r(20896),w=r(783),C=r(78535),M=r(48964),D=r(13876),O=r(48321);function T({children:e,friends:t,server:r}){const T=(0,m.b)(),x=(0,i.I0)(),{details:{username:A,email:k},isPending:N,isPopulated:R}=(0,i.v9)(w.Z),[L,j]=(0,n.useState)(""),V=(0,D.Z)(L,f.x),{isAdding:U,error:F,isValidating:B,isValid:_}=(0,i.v9)(Z.Z),z=(0,O.Z)(U),[H,W]=(0,n.useState)(!1),G=!!t.find((e=>e.username===L||e.email===L));(0,n.useEffect)((()=>{V&&(V===A||V===k?W(!0):(W(!1),x(b.Z.actions.validateUsername({identifier:V,server:r}))))}),[V,x,k,r,A]),(0,n.useEffect)((()=>{!z||U||F||H||T.onClose()}),[F,U,H,z,T]),(0,n.useEffect)((()=>{j(""),W(!1)}),[T.isOpen]);const Q=(0,E.Z)();(0,n.useEffect)((()=>{N||R||F||x(C.Z.actions.fetchUserDetails({server:r}))}),[x,F,N,R,r]);const $=(0,n.useCallback)((()=>{Q({action:h.gr}),x(b.Z.actions.sendFriendInvite({identifier:L,sharingSettings:{},server:r}))}),[x,r,L,Q]),K=(0,n.useCallback)((e=>{e.preventDefault(),$()}),[$]),q=(0,n.useCallback)((e=>{j(e.target.value)}),[]);return(0,n.useEffect)((()=>{T.isOpen&&L||x(b.Z.actions.clearError())}),[x,T.isOpen,L]),n.createElement(c.u_,{isOpen:T.isOpen,onOpenChange:T.onOpenChange},n.createElement(c.iq,null,e),n.createElement(c.hz,{dismissLabel:(0,v.Z)("Close"),header:(0,v.Z)("Add Friend"),size:p.$u.L,onClose:T.onClose},n.createElement(c.fe,null,n.createElement(I.ZP,{name:g.gr},n.createElement(o.K,{gap:p.$u.M},n.createElement(u.x,null,(0,v.Z)("Choose a user to invite. You can enter their Plex username or email. New users will be asked to accept the invitation.")),n.createElement(l.X,{gap:p.$u.S,verticalAlign:p.xM.Center},n.createElement("form",{className:"AddFriendModal-form-ziUoNi",onSubmit:K},n.createElement(S.Z,{hasError:!!F||H,hasFocusOnMount:!0,name:"friend",placeholder:(0,v.Z)("Username or email"),value:L,onChange:q})),B?n.createElement(d.$,{size:p.$u.S}):null,B||!L||!_||G||H?null:n.createElement(a.N,{color:p.Il.Confirm,size:p.$u.L})),G?n.createElement(u.x,{color:p.Il.Accent},(0,v.Z)("{username} is already a friend.",{username:L})):null,!_&&F||F||H?n.createElement(u.x,{color:p.Il.Accent},H?(0,v.Z)("You can't be friends with yourself."):(0,M.Z)(F)):null,V&&_&&!B&&!F?n.createElement(o.K,{gap:p.$u.XXS},n.createElement(u.x,{color:p.Il.Muted,level:u.N.Body1},(0,v.Z)("User")),n.createElement("div",{className:"AddFriendModal-userRow-m5W36L"},n.createElement(l.X,{gap:p.$u.S,verticalAlign:p.xM.Center},n.createElement(P.Z,{server:r,size:30,url:(0,y.Y)(`/users/${encodeURIComponent(V)}/avatar`)}),n.createElement(u.x,{level:u.N.Body2},V)))):null))),n.createElement(c.mz,null,n.createElement(c.w2,null,n.createElement(s.zx,{onPress:T.onClose},(0,v.Z)("Cancel")),U||z&&!U&&!F?n.createElement(d.$,null):n.createElement(s.zx,{color:p.Il.Accent,isDisabled:0===L.length||!!F||B||!_||G||H,onPress:$},(0,v.Z)("Add Friend"))))))}},59157:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),i=r(28216),s=r(1802),a=r(99),o=r(64188),l=r(56422),c=r(54320),d=r(48918),u=r(73788),p=r(181),m=r(94788),h=r(39848),g=r(68606),y=r(46432);function v({friends:e,className:t}){const r=(0,i.v9)(p.Z);return n.createElement("div",{className:t},n.createElement(g.P,null,n.createElement(a.k,{alignItems:c.xM.Center,gap:c.$u.L,testID:"friendZeroState",wrap:"wrap"},n.createElement(m.Z,{durationMilliseconds:0,height:150,src:d,width:150}),n.createElement(o.K,{gap:c.$u.M},n.createElement(o.K,null,n.createElement(l.x,{color:c.Il.Primary,level:l.N.Body1},(0,u.Z)("Everything is better with friends!")),n.createElement(l.x,{color:c.Il.Muted,level:l.N.Body1},(0,u.Z)("Connect with your friends and family on Plex."))),n.createElement(a.k,{gap:c.$u.S,wrap:"wrap"},n.createElement(y.Z,null),n.createElement(h.Z,{friends:e,server:r},n.createElement(s.zx,null,(0,u.Z)("Add Friends"))))))))}},60905:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(67294),i=r(47435),s=r(59059),a=r(99),o=r(83073),l=r(43743),c=r(89995),d=r(23615),u=r(1047),p=r(56422),m=r(86755),h=r(54320),g=r(73788),y=r(83836),v=r(53295),f=r(31281);const b=({friend:e,server:t,className:r,style:i,size:b,showLibraryAccessIcon:Z})=>{var S;if(!e)return n.createElement(y.Z,{server:t,size:b,url:""});const P=e.friendlyName||e.username,I=P!==e.username?e.username:void 0,E=(0,f.Z)("friendProfile",{id:e.id});return n.createElement("div",{className:r,style:i},n.createElement(l.I,{testID:"friendProfile",width:b},n.createElement(c.W,{posterStyle:h.mJ.Circle,width:b},n.createElement(y.Z,{server:t,size:b,url:e.thumb}),n.createElement(d.J,{"aria-label":e.friendlyName||e.username,href:E,posterStyle:h.mJ.Circle})),n.createElement(u.o,{posterStyle:h.mJ.Circle},n.createElement(a.k,{alignItems:h.xM.Center,gap:h.$u.XXS,justifyContent:h.xM.Center,orientation:h.i5.Horizontal,width:b},n.createElement(p.x,{color:h.Il.Default,level:p.N.Body2,numberOfLines:1},n.createElement(o.r,{href:E,insetFocus:!0},P)),Z&&((null==(S=e.sharedServers)?void 0:S.length)>0||(0,v.D)(e.sharedSources))?n.createElement(m.u,{tooltip:n.createElement(p.x,{color:h.Il.Muted,level:p.N.Body3},(0,g.Z)("Library Access"))},n.createElement("div",{className:"FriendAvatar-homeIcon-KYf6Jh"},n.createElement(s.G,null))):null),I?n.createElement(p.x,{color:h.Il.Muted,level:p.N.Body2,numberOfLines:1},I):null)))};var Z=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;function I(e){var t=e,{server:r,showLibraryAccessIcon:s}=t,a=((e,t)=>{var r={};for(var n in e)S.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Z)for(var n of Z(e))t.indexOf(n)<0&&P.call(e,n)&&(r[n]=e[n]);return r})(t,["server","showLibraryAccessIcon"]);const{item:o}=a,l=(0,i.Z)(a);return n.createElement(b,{className:"FriendListItem-container-hAYA12 Link-link-vSsQW1",friend:o,server:r,showLibraryAccessIcon:s,size:128,style:l.style})}},56142:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(56422);function s({size:e}){return n.createElement("div",{className:"NotificationBadge-badge-vdoZvC"},n.createElement(i.x,{level:i.N.Label2,testID:"notificationBadge"},e))}},48685:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),i=r(99),s=r(83073),a=r(56422),o=r(54320),l=r(73788),c=r(84419),d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};const y=({title:e,href:t})=>t?n.createElement(s.r,{color:o.Il.Default,href:t,level:a.N.Body1},e):n.createElement(a.x,{color:o.Il.Muted,level:a.N.Body1},e);function v({title:e,subtitle:t,editing:r,menu:s}){return n.createElement(i.k,{alignItems:o.xM.Center,gap:o.$u.XXS,height:25,justifyContent:o.xM.Center,wrap:"wrap"},n.createElement(y,g({},e)),t?n.createElement(n.Fragment,null,n.createElement(c.Z,{separator:""}),n.createElement(y,g({},t))):null,r?n.createElement(n.Fragment,null,n.createElement(c.Z,{separator:""}),n.createElement(a.x,{color:o.Il.Muted,level:a.N.Body1},(0,l.Z)("Edit"))):null,s)}},68606:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});var n=r(94184),i=r.n(n),s=r(67294);const a=({children:e,isWarning:t,isZeroState:r})=>s.createElement("div",{className:i()("ProfileCard-card-QfaWfX",t&&"ProfileCard-warning-a55gfs",r&&"ProfileCard-zeroState-t5hvRj")},e)},16870:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(67294),i=r(28216),s=r(34339),a=r(9225),o=r(87326),l=r(74659),c=r(78386),d=r(99),u=r(64188),p=r(83073),m=r(56422),h=r(54320),g=r(70777),y=r(73788);function v({icon:e,label:t,iconSize:r,level:i}){return n.createElement(c.X,{align:h.xM.Center,gap:h.$u.XXS},n.createElement(e,{size:r}),n.createElement(m.x,{level:i,numberOfLines:1},t))}var f=r(15058),b=r(55509);const Z={location:"ProfileDetails-location-TOOWo2",defaultField:"ProfileDetails-defaultField-PLUViB"};function S({details:e,privacy:t}){const r=(0,i.v9)((0,f.Z)(g.hq)),{displayName:S,username:P,bio:I,location:E,plexPass:w,createdAt:C,url:M}=e,D=S||P,O=S?P:"";return n.createElement(c.X,{align:h.xM.SpaceBetween,gap:h.$u.S,width:"100%"},n.createElement(d.k,{gap:h.$u.XS,orientation:h.i5.Vertical,wrap:"wrap"},n.createElement(u.K,null,n.createElement(m.x,{color:h.Il.Primary,component:"h2",level:m.N.Heading4},D),O?n.createElement(m.x,{color:h.Il.Muted,component:"span",level:m.N.Heading6},O):null),r?n.createElement(n.Fragment,null,I?n.createElement("div",{className:Z.bio},n.createElement(m.x,{color:h.Il.Muted,level:m.N.Body1},I)):null,n.createElement(d.k,{gap:h.$u.S,wrap:"wrap"},E?n.createElement("div",{className:Z.location},n.createElement(v,{icon:s.a,iconSize:h.$u.L,label:E,level:m.N.Body1})):null,!w||t&&t.plexPass!==b._B.Friends?null:n.createElement(v,{icon:a.l,iconSize:h.$u.L,label:(0,y.Z)("Plex Pass"),level:m.N.Body1}),!C||t&&t.createdAt!==b._B.Friends?null:n.createElement(v,{icon:o.j,iconSize:h.$u.L,label:(0,y.Z)("Joined {year}",{year:new Date(C).getFullYear()}),level:m.N.Body1})),M?n.createElement("div",{className:Z.defaultField},n.createElement(c.X,{gap:h.$u.XS,verticalAlign:h.xM.Center},n.createElement(l.J,null),n.createElement(m.x,{numberOfLines:1},n.createElement(p.r,{href:M,target:"_blank"},M)))):null):null))}},23290:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(67294),i=r(78386),s=r(83073),a=r(54320),o=r(11050);function l({title:e,href:t}){return n.createElement(i.X,{gap:a.$u.S,verticalAlign:a.xM.Center},n.createElement(s.r,{href:t},n.createElement(o.Z,null,e)))}},21959:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(67294),i=r(1802),s=r(22527),a=r(81052),o=r(78386),l=r(83073),c=r(86755),d=r(54320),u=r(37703),p=r(73788),m=r(11050),h=r(35419),g=r(3021),y=r(55509),v=r(48321);function f({title:e,hub:t,href:r}){const{refetch:f,privacy:b}=function(e){const{data:t,refetch:r}=(0,h.gy)({},{refetchOnMountOrArgChange:!0}),[i,s]=(0,n.useState)(null==t?void 0:t.userPrivacy[e]);return(0,n.useEffect)((()=>{s(null==t?void 0:t.userPrivacy[e])}),[null==t?void 0:t.userPrivacy,e]),{refetch:r,privacy:i}}(t),Z=(0,u.b)(),S=(0,v.Z)(Z.isOpen);(0,n.useEffect)((()=>{S&&!Z.isOpen&&f()}),[S,Z.isOpen,f]);const P=b===y._B.Friends?(0,p.Z)("Friends Only"):(0,p.Z)("Private");return n.createElement(o.X,{gap:d.$u.S,verticalAlign:d.xM.Center},n.createElement(l.r,{href:r},n.createElement(m.Z,null,e)),b?n.createElement(c.u,{tooltip:P},n.createElement(i.hU,{"aria-label":P,color:"transparent",icon:b===y._B.Friends?s.j:a.p,style:{padding:0},onPress:Z.onOpen})):null,n.createElement(g.Z,{buttonLabel:(0,p.Z)("Save"),isOpen:Z.isOpen,onClose:Z.onClose}))}},24995:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(67294),i=r(28216),s=r(37703),a=r(73788),o=r(29591),l=r(74310),c=r(78389),d=r(9278),u=r(33803),p=r(44811),m=r(181),h=r(91085),g=r(94442),y=r(99981),v=r(35419),f=Object.defineProperty,b=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function w(e){var t,r=e,{removeActivity:f,item:w,type:C=c.U.Mixed,canHideActivity:M,refetch:D}=r,O=((e,t)=>{var r={};for(var n in e)P.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&S)for(var n of S(e))t.indexOf(n)<0&&I.call(e,n)&&(r[n]=e[n]);return r})(r,["removeActivity","item","type","canHideActivity","refetch"]);const T=(0,i.v9)(m.Z),x=(0,i.v9)(d.Z),A=(0,s.b)(),[k,N]=(0,v.G8)(),R=(0,n.useCallback)((()=>{A.onOpen()}),[A]),L=(0,n.useCallback)((()=>{(null==w?void 0:w.id)&&k({input:{id:w.id}})}),[null==w?void 0:w.id,k]),j=(0,n.useCallback)((()=>{(null==w?void 0:w.id)&&(null==f||f(w.id))}),[null==w?void 0:w.id,f]),V=(0,n.useMemo)((()=>({removeActivity:{callback:R,title:(0,a.Z)("Hide From Watch History")}})),[R]);return n.createElement(g.ZP,{key:O.key,activity:null==w?void 0:w.activity,metadataActions:M?V:void 0},n.createElement(h.ZP,{column:O.cellIndex},n.createElement(p.ZP,{machineIdentifier:T.machineIdentifier,providerIdentifier:null!=(t=null==x?void 0:x.identifier)?t:""},n.createElement(l.ZP,{containerProvider:null!=x?x:u.Z,containerServer:T,containerType:C},n.createElement(o.Z,(U=((e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e})({},O),F={item:null==w?void 0:w.metadataItem},b(U,Z(F)))),n.createElement(y.Z,{body:(0,a.Z)("This item will no longer appear in your Watch History unless you watch it again."),error:N.error,isRemoving:N.isLoading,modalState:A,title:(0,a.Z)("Hide from Watch History"),onRemoveActivity:L,onSuccess:j})))));var U,F}},30924:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(42149);function s({children:e}){return n.createElement(i.Z,{className:"ProfilePageContent-content-pb4EHz PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko"},e)}},54335:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(67294),i=r(99428),s=r(95292),a=r(64188),o=r(78386),l=r(56422),c=r(54320),d=r(37703),u=r(24348),p=r(73788),m=r(90696),h=r(95385);function g({stats:e,isViewStateSyncUpsell:t}){const r=(0,d.b)();return n.createElement("div",{className:"ProfileWatchStats-container-SSpQeD"},n.createElement("div",{className:"ProfileWatchStats-stats-zxsqvl"},n.createElement(a.K,{align:c.xM.Center,gap:c.$u.XS,testID:"profileWatchStats"},n.createElement("div",{className:"ProfileWatchStats-grid-stxYc6"},n.createElement(l.x,{align:c.xM.Right,level:l.N.Heading3,numberOfLines:1},e.movieDisplay),n.createElement(l.x,{level:l.N.Heading7},(0,p.Z)("Movies")),n.createElement(l.x,{align:c.xM.Right,level:l.N.Heading3,numberOfLines:1},e.showDisplay),n.createElement(l.x,{level:l.N.Heading7,numberOfLines:1},(0,p.Z)("Shows")),n.createElement(l.x,{align:c.xM.Right,level:l.N.Heading3,numberOfLines:1},e.episodeDisplay),n.createElement(l.x,{level:l.N.Heading7},(0,p.Z)("Episodes"))),n.createElement(l.x,{align:c.xM.Center,color:c.Il.Muted,level:l.N.Body3},(0,p.Z)("Watched since joining Plex")))),t?n.createElement(n.Fragment,null,n.createElement(h.Z,{modalState:r,origin:u.ih,page:m.ZJ.LearnMore}),n.createElement("div",{className:"ProfileWatchStats-viewStateSyncUpsellCard-pDBRiA"},n.createElement(o.X,{gap:c.$u.XS,testID:"viewStateSyncUpsell",width:223},n.createElement(s.I,{color:c.Il.Accent,size:c.$u.L}),n.createElement(a.K,{gap:c.$u.XXS},n.createElement(l.x,{level:l.N.Heading7},(0,p.Z)("Sync Your Personal Media Watch State")),n.createElement(i.A,{color:c.Il.Accent,onPress:r.onOpen},(0,p.Z)("Learn More")))))):null)}},61884:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(67294),i=r(28216),s=r(73788),a=r(78610),o=r(78389),l=r(29462),c=r(80983),d=r(61606),u=r(23290),p=r(21959),m=r(24995),h=r(50963),g=r(43017),y=r(31281),v=r(68181),f=Object.defineProperty,b=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e},C=(e,t)=>b(e,Z(t));function M({uuid:e,friendID:t,onVisibilityChange:r}){const{data:f,fetchMore:b,totalSize:Z,placeholderSize:S,remove:P,error:I}=(0,h.Z)(e),E=(0,i.v9)(d.Z),M=(0,n.useMemo)((()=>{var e;return C(w({},(0,a.Z)(null!=(e=null==f?void 0:f.map((e=>e.metadataItem)))?e:[])),{sourceURI:"ratingsHub"})}),[f]),D=(0,n.useMemo)((()=>(0,l.Z)({listType:o.U.Mixed,listStyle:o.n.List,columnWidth:E,titleCount:4})),[E]),O=(0,n.useMemo)((()=>e=>n.createElement(m.Z,C(w({},e),{removeActivity:t?void 0:P}))),[t,P]),T=(0,n.useMemo)((()=>()=>t?n.createElement(u.Z,{href:(0,y.Z)("profileRatings",{id:t}),hub:g.z.Ratings,title:(0,s.Z)("Ratings")}):n.createElement(p.Z,{href:(0,y.Z)("profileRatings"),hub:g.z.Ratings,title:(0,s.Z)("My Ratings")})),[t]);return(0,n.useEffect)((()=>{f&&(null==r||r(f.length>0))}),[r,f]),t&&!f||I?null:n.createElement("div",{className:v.Z.hub},n.createElement(c.Z,{cellComponentFactory:O,className:v.Z.scroller,hub:M,hubTitleComponent:T,items:null!=f?f:[],keyPropName:"id",layout:D,totalSize:f?Z:S,onPageRequest:b}))}},99981:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(1802),s=r(82818),a=r(56422),o=r(54320),l=r(73788),c=r(48321);function d({title:e,body:t,modalState:r,isRemoving:d,error:u,onRemoveActivity:p,onSuccess:m}){const h=(0,c.Z)(d);return(0,n.useEffect)((()=>{(h&&!d||u)&&(r.onClose(),m())}),[u,d,r,m,h]),n.createElement(s.u_,{isOpen:r.isOpen,onOpenChange:r.onOpenChange},n.createElement(s.hz,{dismissLabel:(0,l.Z)("Close"),header:e,size:o.$u.S,onClose:r.onClose},n.createElement(s.fe,null,n.createElement(a.x,{level:a.N.Body1},t)),n.createElement(s.mz,null,n.createElement(s.w2,null,n.createElement(i.zx,{onPress:r.onClose},(0,l.Z)("Cancel")),n.createElement(i.zx,{color:o.Il.Accent,isWaiting:d,onPress:p},(0,l.Z)("Hide"))))))}},46432:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n=r(94184),i=r.n(n),s=r(67294),a=r(28216),o=r(1802),l=r(86550),c=r(98725),d=r(78386),u=r(64188),p=r(82818),m=r(7256),h=r(56422),g=r(54320),y=r(37703),v=r(73788),f=r(77054),b=r(47240),Z=r(26537),S=r(56201),P=r(3788),I=r(181),E=r(83836),w=r(39008),C=r(1208),M=r(31281);const D="RequestsModalButton-row-y1NGja",O=({title:e})=>s.createElement("div",{className:"RequestsModalButton-header-Sz828L"},s.createElement(h.x,{color:g.Il.Muted},e)),T=({server:e,invite:t,approveBtn:r,homeInvite:n,isPending:p})=>{const m=(0,a.I0)(),y=(0,s.useCallback)((()=>{m(b.Z.actions.rejectFriendInvite({server:e,identifier:t.username||t.invitedEmail}))}),[m,t.invitedEmail,t.username,e]),Z=(0,s.useCallback)((()=>{m(n?(0,f.Ol)({inviteID:t.id}):b.Z.actions.acceptFriendInvite({server:e,id:t.id}))}),[m,n,t.id,e]),S=t.friendlyName||t.username||t.invitedEmail,P=S!==t.username?t.username:null;return s.createElement("div",{className:i()(D,"RequestsModalButton-separator-OXhdW1")},s.createElement(d.X,{align:g.xM.SpaceBetween,verticalAlign:g.xM.Center},s.createElement(d.X,{align:g.xM.Center,gap:g.$u.S,verticalAlign:g.xM.Center},s.createElement(E.Z,{server:e,size:40,url:t.thumb}),s.createElement(u.K,null,s.createElement(h.x,{level:h.N.Body2},S),P?s.createElement(h.x,{color:g.Il.Muted,level:h.N.Body3},P):null),n&&r?s.createElement(h.x,{color:g.Il.Muted,level:h.N.Body2},`- ${(0,v.Z)("Wants you to join their home")}`):null),n?s.createElement(o.ZP,{href:(0,M.Z)("plexHome"),size:g.$u.S},(0,v.Z)("Go to Plex Home")):s.createElement(s.Fragment,null,s.createElement(d.X,{verticalAlign:g.xM.Center},r?s.createElement(o.hU,{icon:l.T,isDisabled:p,size:g.$u.S,onPress:Z},(0,v.Z)("Approve")):null,s.createElement(o.hU,{"aria-label":(0,v.Z)("Cancel request"),color:"transparent",icon:c.R,iconSize:g.$u.L,isDisabled:p,size:g.$u.XS,onPress:y})))))};function x({isAlwaysVisible:e=!1}){const t=(0,a.I0)(),r=(0,y.b)(),{isRemoving:n,isAdding:i}=(0,a.v9)(Z.Z),{invites:l}=(0,a.v9)(S.Z),{invites:c}=(0,a.v9)(P.Z),d=(0,a.v9)(w.Z),u=(0,a.v9)(C.Z),E=(0,a.v9)(I.Z);(0,s.useEffect)((()=>{t(b.Z.actions.fetchSentInvites({server:E})),t(b.Z.actions.fetchReceivedInvites({server:E})),t(b.Z.actions.fetchAllFriends({server:E}))}),[t,E,d,u]),(0,s.useEffect)((()=>{t(b.Z.actions.fetchSentInvites({server:E})),t(b.Z.actions.fetchReceivedInvites({server:E})),t((0,f.bc)()),t((0,f.xP)())}),[t,E]);const M=l.length+d.length,x=M+(c.length+u.length);return s.createElement(p.u_,{isOpen:r.isOpen,onOpenChange:r.onOpenChange},s.createElement(p.iq,null,e||x>0?s.createElement(o.zx,{color:M>0?g.Il.Accent:g.Il.Default,size:g.$u.M,testID:"requestsButton"},M>0?`${(0,v.Z)("Requests")} (${M})`:(0,v.Z)("Requests")):null),s.createElement(p.hz,{dismissLabel:(0,v.Z)("Close"),header:(0,v.Z)("Friend Requests"),size:g.$u.L,testID:"requestsModal",onClose:r.onClose},s.createElement(p.fe,{padding:!1},s.createElement(O,{title:(0,v.Z)("Awaiting Approval")+""+(l.length>0?` (${l.length})`:"")}),l.map((e=>s.createElement(T,{key:`invite-${e.id}`,approveBtn:!0,invite:e,isPending:i||n,server:E}))),d.map((e=>s.createElement(T,{key:`invite-${e.id}`,approveBtn:!0,homeInvite:!0,invite:e,isPending:i||n,server:E}))),0===l.length&&0===d.length?s.createElement("div",{className:D},s.createElement(h.x,null,(0,v.Z)("You have no requests awaiting approval."))):null,s.createElement(O,{title:(0,v.Z)("Requests Sent")}),c.map((e=>s.createElement(T,{key:`invite-${e.id}`,invite:e,isPending:n,server:E}))),u.map((e=>s.createElement(T,{key:`invite-${e.id}`,homeInvite:!0,invite:e,isPending:n,server:E}))),0===c.length&&0===u.length?s.createElement("div",{className:D},s.createElement(h.x,null,(0,v.Z)("You have no pending requests sent."))):null),s.createElement(p.mz,null,s.createElement(p.w2,null,n?s.createElement(m.$,null):s.createElement(o.zx,{onPress:r.onClose},(0,v.Z)("Close"))))))}},92205:(e,t,r)=>{"use strict";r.d(t,{Z:()=>q});var n=r(67294),i=r(28216),s=r(59119),a=r(1802),o=r(85750),l=r(70261),c=r(84739),d=r(64188),u=r(78386),p=r(99),m=r(37903),h=r(54320),g=r(37703),y=r(73788),v=r(47240),f=r(26537),b=r(181),Z=r(62376),S=r(55755),P=r(74861),I=r(42218),E=r(50439),w=r(12316),C=r(64154),M=r(62286),D=r(45186),O=r(39848),T=r(22527),x=r(56422),A=r(84384),k=r(30924);function N({friends:e,server:t}){return n.createElement(I.Z,null,n.createElement(k.Z,null,n.createElement("div",{className:"EmptyUserFriends-container-zEon2V"},n.createElement(d.K,{align:h.xM.Center,gap:h.$u.M,testID:"emptyUserFriends"},n.createElement(A.Z,{icon:T.j}),n.createElement(d.K,{align:h.xM.Center,gap:h.$u.S},n.createElement(x.x,{level:x.N.Heading3},(0,y.Z)("Everything is Better With Friends!")),n.createElement(x.x,{level:x.N.Body1},(0,y.Z)("Connect with your friends and family on Plex."))),n.createElement(O.Z,{friends:e,server:t},n.createElement(a.zx,{color:h.Il.Accent},(0,y.Z)("Invite friends to Plex")))))))}var R=r(60905),L=r(46432),j=r(13930),V=r(31281),U=r(23574),F=r(46034),B=r(48685);var _=Object.defineProperty,z=Object.defineProperties,H=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,$=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const K=(0,S.Z)({direction:S.m.Vertical,overscan:1,innerHorizontalPadding:30,innerVerticalPadding:30,outerPaddingBottom:30,getCellWidth:()=>128,getCellHeight:()=>190});function q({showHeader:e=!0}){const t=(0,i.I0)(),r=(0,i.v9)(b.Z),{username:o,friendlyName:c}=(0,i.v9)(D.Z),{allFriends:{isPopulated:m,friends:g},error:S}=(0,i.v9)(f.Z);(0,n.useEffect)((()=>{t(v.Z.actions.fetchAllFriends({server:r}))}),[t,r]);const[T,x]=(0,n.useState)(g),A=(0,n.useRef)("My Friends"),_=(0,n.useCallback)((()=>{x(g.filter((e=>e.username)))}),[g]),q=(0,n.useCallback)((()=>{x(g.filter((e=>e.username&&e.sharedServers&&e.sharedServers.length>0)))}),[g]);(0,P.Z)(),(0,n.useEffect)((()=>{"My Friends"===A.current?_():q()}),[g,q,_]);const X=(0,n.useCallback)((e=>{switch(A.current=e,e){case"My Friends":_();break;case"Library Access":q()}}),[q,_]),J=(0,n.useMemo)((()=>e=>{return n.createElement(R.Z,(t=((e,t)=>{for(var r in t||(t={}))G.call(t,r)&&$(e,r,t[r]);if(W)for(var r of W(t))Q.call(t,r)&&$(e,r,t[r]);return e})({},e),z(t,H({server:r,showLibraryAccessIcon:!0}))));var t}),[r]);return m?(S&&(F.Z,(0,y.Z)("Please try again"),(0,y.Z)("An error occurred while loading your friends."),Z.Z,(0,V.Z)("profile"),(0,y.Z)("Go Back")),T.length?n.createElement(I.Z,null,n.createElement(U.Z,{className:e?"UserFriends-header-i3vgMO PageHeader-pageHeader-e2k66t":"UserFriends-headless-dS5bD2 UserFriends-header-i3vgMO PageHeader-pageHeader-e2k66t"},n.createElement(d.K,{align:h.xM.Left,gap:h.$u.M,width:"100%"},e?n.createElement(B.Z,{subtitle:{title:c||o},title:{href:(0,V.Z)("profile"),title:(0,y.Z)("My Profile")}}):null,n.createElement(u.X,{align:h.xM.SpaceBetween,width:"100%"},n.createElement(p.k,{alignItems:"center",gap:h.$u.M,wrap:"wrap"},n.createElement(Y,{onStateChange:X}),n.createElement(s.C,{color:h.Il.Default,testID:"friendsBadge",title:(0,y.Z)("Number of Friends")},T.length.toString())),n.createElement(p.k,{gap:h.$u.S,wrap:"wrap"},n.createElement(j.Z,null),n.createElement(O.Z,{friends:T,server:r},n.createElement(a.hU,{icon:l.N,size:h.$u.S},(0,y.Z)("Add Friend"))),n.createElement(L.Z,null))))),n.createElement(k.Z,null,T.length>0?n.createElement(C.Z,{cellComponentFactory:J,items:T,layout:K,scrollDirection:w.I.Vertical,totalSize:T.length}):null)):n.createElement(N,{friends:T,server:r})):n.createElement(E.Z,null,n.createElement(M.Z,null))}const Y=({onStateChange:e})=>{const t=(0,g.b)(),[r,i]=(0,n.useState)("My Friends"),s=(0,n.useCallback)((()=>{i("My Friends"),e("My Friends"),t.onClose()}),[t,e]),a=(0,n.useCallback)((()=>{i("Library Access"),e("Library Access"),t.onClose()}),[t,e]);return n.createElement(m.v2,{isOpen:t.isOpen,onOpenChange:t.onOpenChange},n.createElement(m.bF,null,n.createElement(o.l,{"aria-label":(0,y.Z)("Select Friend Category"),id:"friendsType",isOpen:t.isOpen,testID:"friendCategoryButton",type:"button"},"My Friends"===r?(0,y.Z)("My Friends"):(0,y.Z)("Library Access"))),n.createElement(m.Dv,{testID:"friendsMenu",width:180},"My Friends"===r?n.createElement(m.oo,{color:h.Il.Accent,icon:c.N},(0,y.Z)("My Friends")):n.createElement(m.j2,{color:h.Il.Primary,onPress:s},(0,y.Z)("My Friends")),"Library Access"===r?n.createElement(m.oo,{color:h.Il.Accent,icon:c.N},(0,y.Z)("Library Access")):n.createElement(m.j2,{color:h.Il.Primary,testID:"showLibraryAccessFriends",onPress:a},(0,y.Z)("Library Access"))))}},35184:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ce});var n=r(94184),i=r.n(n),s=r(67294),a=r(28216),o=r(1802),l=r(80566),c=r(64188),d=r(99),u=r(54320),p=r(70777),m=r(73788),h=r(181),g=r(83836),y=r(74861),v=r(42218),f=r(50439),b=r(62286),Z=r(15058),S=r(783),P=r(83073),I=r(56422),E=r(47240),w=r(26537),C=r(56201),M=r(80983),D=r(77129),O=r(39008),T=r(59157),x=r(60905),A=r(56142),k=r(31281);var N=Object.defineProperty,R=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,V=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function U(){const{invites:e}=(0,a.v9)(C.Z),t=(0,a.v9)(O.Z);return s.createElement(d.k,{alignItems:u.xM.Center,gap:u.$u.XS,wrap:"wrap"},s.createElement(P.r,{href:(0,k.Z)("friends"),level:I.N.Body1},s.createElement(I.x,{level:I.N.Body1},(0,m.Z)("My Friends"))),t.length+e.length>0?s.createElement(A.Z,{size:t.length+e.length}):null)}const F=(0,D.Z)({columnWidth:128,rowHeight:220,innerHorizontalPadding:32,outerPaddingRight:32});function B(){const e=(0,a.I0)(),t=(0,a.v9)(h.Z),{allFriends:{friends:r,isPopulated:n}}=(0,a.v9)(w.Z),i=(0,a.v9)((0,Z.Z)(p.hq));(0,s.useEffect)((()=>{e(E.Z.actions.fetchAllFriends({server:t}))}),[e,t]);const o=(0,s.useMemo)((()=>e=>s.createElement(x.Z,((e,t)=>{for(var r in t||(t={}))L.call(t,r)&&V(e,r,t[r]);if(R)for(var r of R(t))j.call(t,r)&&V(e,r,t[r]);return e})({server:t},e))),[t]);return n||i?0===r.length?i?null:s.createElement(T.Z,{friends:r}):!n||n&&!r.length?null:s.createElement("div",{className:"FriendsList-list-oFatiM"},s.createElement(M.Z,{cellComponentFactory:o,className:"FriendsList-hub-XpQqkQ",hub:{sourceURI:"friendsList"},hubHeaderClassName:"FriendsList-header-SwuXBw VirtualHubScroller-hubHeader-vSW06t",hubTitleComponent:U,items:r,keyPropName:"username",layout:F,totalSize:r.length}),0===r.length?s.createElement(c.K,{gap:u.$u.S},s.createElement(U,null),s.createElement(I.x,{color:u.Il.Muted,level:I.N.Body1},(0,m.Z)("Connect with friends and family already using Plex or invite new people to join in the fun."))):null):s.createElement(f.Z,null,s.createElement(b.Z,null))}var _=r(68606),z=r(16870),H=r(19124),W=r(27050),G=r(59772),Q=r(48918),$=r(69022),K=r(11050),q=r(34219),Y=r(78386),X=r(84384),J=r(94788),ee=r(16975);var te=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;function ie(e){var t=((e,t)=>{var r={};for(var n in e)re.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&te)for(var n of te(e))t.indexOf(n)<0&&ne.call(e,n)&&(r[n]=e[n]);return r})(e,[]);const r=(0,ee.Z)(t),n=t.item;return n?s.createElement("div",{className:"GetStartedCardItem-card-vQHqC4",style:r.style},s.createElement(Y.X,{gap:u.$u.S,verticalAlign:u.xM.Center},n.icon?s.createElement("div",{className:"GetStartedCardItem-posterIcon-pp_Rx_"},s.createElement(X.Z,{icon:n.icon,iconSize:u.$u.XXL,size:95})):null,n.imageSrc?s.createElement(J.Z,{className:"GetStartedCardItem-image-BP3dkz",durationMilliseconds:0,height:95,src:n.imageSrc,width:95}):null,s.createElement(c.K,{gap:u.$u.S},s.createElement(I.x,{level:I.N.Heading5},n.title),s.createElement(I.x,{color:u.Il.Muted,level:I.N.Body1},n.subtitle),s.createElement(P.r,{color:u.Il.Accent,href:n.href},n.link)))):null}var se=Object.defineProperty,ae=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,ue=(e,t,r)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const pe=(0,D.Z)({columnWidth:608,rowHeight:144,innerHorizontalPadding:32,outerPaddingRight:32});function me(){return s.createElement(K.Z,null,(0,m.Z)("Get Started"))}function he({showRatings:e,showWatchlist:t}){const r=(0,a.v9)(h.Z),{allFriends:{friends:n,isPopulated:i}}=(0,a.v9)(w.Z),o=(0,a.v9)((0,q.Z)("dismissProfileGetStartedCard")),l=(0,s.useMemo)((()=>e=>{return s.createElement(ie,(t=((e,t)=>{for(var r in t||(t={}))ce.call(t,r)&&ue(e,r,t[r]);if(le)for(var r of le(t))de.call(t,r)&&ue(e,r,t[r]);return e})({},e),ae(t,oe({server:r}))));var t}),[r]),c=(0,s.useMemo)((()=>[o?void 0:{id:"profileGetStarted",title:(0,m.Z)("This time it IS all about you"),subtitle:(0,m.Z)("Add a profile pic, write a bio to tell people what you love, where you are and more"),link:(0,m.Z)("Edit Profile"),href:(0,k.Z)("editProfile"),icon:H.f},e?{id:"ratedGetStarted",title:(0,m.Z)("Seen it, loved it, rate it!"),subtitle:(0,m.Z)("Let your friends and family know what you loved, what was OK and what was a waste of time."),link:(0,m.Z)("Rate something new"),href:(0,k.Z)("profileWatchHistory"),icon:W.G}:void 0,t?{id:"discoverGetStarted",title:(0,m.Z)("Keep track of what's next!"),subtitle:(0,m.Z)("Add movies & TV shows from all your streaming services to your Plex watchlist"),link:(0,m.Z)("Discover something new"),href:(0,k.Z)("discoverHome",{},{pivot:$.s4}),icon:G.s}:void 0,n.length?void 0:{id:"friendsGetStarted",title:(0,m.Z)("Everything is better with friends!"),subtitle:(0,m.Z)("Connect with your friends and family on Plex. See wat theyre watching, their ratings and watch together."),link:(0,m.Z)("Add friends"),href:(0,k.Z)("friends"),imageSrc:Q}].filter(Boolean)),[o,n.length,e,t]);return i?s.createElement("div",{className:"ProfileGetStarted-container-zzWu6g"},s.createElement(M.Z,{cellComponentFactory:l,hub:{sourceURI:"getStarted"},hubHeaderClassName:"ProfileGetStarted-header-A9IG0J VirtualHubScroller-hubHeader-vSW06t",hubTitleComponent:me,items:c,keyPropName:"id",layout:pe,totalSize:c.length})):null}var ge=r(30924),ye=r(54335),ve=r(61884),fe=r(46432),be=r(85314),Ze=r(36663),Se=r(53843),Pe=r(57053),Ie=r(23574),Ee=r(46034),we=r(48685);function Ce({showHeader:e=!0}){var t;(0,y.Z)();const{details:{uuid:r},viewStateSync:{consent:n}}=(0,a.v9)(S.Z),P=(0,a.v9)(h.Z),[I,E]=(0,s.useState)(),[w,C]=(0,s.useState)(),{details:M,isPopulated:D,error:O}=(0,Se.Z)(r),{privacy:T,isPopulated:x}=(0,Pe.Z)(),A=(0,a.v9)((0,Z.Z)(p.hq));return(M||D||O)&&x?!M||O?s.createElement(Ee.Z,{description:(0,m.Z)("Please try again"),title:(0,m.Z)("An error occurred while loading your profile.")}):s.createElement(v.Z,null,e?s.createElement(Ie.Z,null,s.createElement(we.Z,{subtitle:{title:M.displayName||M.username},title:{title:(0,m.Z)("My Profile")}})):null,s.createElement(ge.Z,null,s.createElement(c.K,{gap:u.$u.L},s.createElement("div",{className:i()(!e&&"UserProfile-headless-VIHaKV")},s.createElement(_.P,null,s.createElement(d.k,{alignItems:u.xM.Center,gap:u.$u.M,width:"100%",wrap:"wrap"},s.createElement(g.Z,{server:P,size:150,url:null!=(t=M.avatar)?t:""}),s.createElement(c.K,{align:u.xM.Left,gap:u.$u.S,grow:!0,testID:"profileDetail"},s.createElement(z.Z,{details:M,privacy:T}),s.createElement(d.k,{alignItems:u.xM.Center,gap:u.$u.S,width:"100%",wrap:"wrap"},s.createElement(o.I_,{color:u.Il.Default,href:(0,k.Z)("editProfile"),icon:l.y},(0,m.Z)("Edit Profile")),A?s.createElement(fe.Z,{isAlwaysVisible:!0}):null)),M.watchStats&&A?s.createElement(ye.Z,{isViewStateSyncUpsell:!n,stats:M.watchStats}):null))),s.createElement(c.K,null,A?s.createElement(s.Fragment,null,s.createElement(be.Z,{uuid:r}),s.createElement(Ze.Z,{uuid:r,onVisibilityChange:E}),s.createElement(ve.Z,{uuid:r,onVisibilityChange:C})):null,s.createElement(B,null),A&&void 0!==w&&void 0!==I?s.createElement(he,{showRatings:!w,showWatchlist:!I}):null)))):s.createElement(f.Z,null,s.createElement(b.Z,null))}},85314:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(67294),i=r(28216),s=r(73788),a=r(78610),o=r(78389),l=r(29462),c=r(80983),d=r(61606),u=r(23290),p=r(21959),m=r(24995),h=r(48102),g=r(43017),y=r(31281),v=r(68181),f=Object.defineProperty,b=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function w({uuid:e,friendID:t}){const{data:r,fetchMore:f,totalSize:w,remove:C,error:M,placeholderSize:D}=(0,h.Z)(e),O=(0,i.v9)(d.Z),T=(0,n.useMemo)((()=>{var e;return(0,a.Z)(null!=(e=null==r?void 0:r.map((e=>e.metadataItem)))?e:[])}),[r]),x=(0,n.useMemo)((()=>(0,l.Z)({listType:o.U.Clip,listStyle:o.n.Shelf,columnWidth:O,titleCount:3})),[O]),A=(0,n.useMemo)((()=>e=>{return n.createElement(m.Z,(r=((e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e})({},e),i={canHideActivity:!t,removeActivity:C,type:o.U.Clip},b(r,Z(i))));var r,i}),[t,C]),k=(0,n.useMemo)((()=>()=>t?n.createElement(u.Z,{href:(0,y.Z)("profileWatchHistory",{id:t}),hub:g.z.WatchHistory,title:(0,s.Z)("Watch History")}):n.createElement(p.Z,{href:(0,y.Z)("profileWatchHistory"),hub:g.z.WatchHistory,title:(0,s.Z)("My Watch History")})),[t]);return t&&!r||M?null:n.createElement("div",{className:v.Z.hub},n.createElement(c.Z,{cellComponentFactory:A,className:v.Z.scroller,hub:T,hubTitleComponent:k,items:null!=r?r:[],keyPropName:"id",layout:x,totalSize:r?w:D,onPageRequest:f}))}},36663:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(67294),i=r(28216),s=r(73788),a=r(78610),o=r(78389),l=r(29462),c=r(80983),d=r(61606),u=r(23290),p=r(21959),m=r(24995),h=r(45164),g=r(43017),y=r(31281),v=r(68181),f=Object.defineProperty,b=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e};function C({uuid:e,friendID:t,onVisibilityChange:r}){const{data:f,fetchMore:S,totalSize:P,placeholderSize:I,error:E}=(0,h.Z)(e,!!t),C=(0,i.v9)(d.Z),M=(0,n.useMemo)((()=>{var e,t;return t=w({},(0,a.Z)(null!=(e=null==f?void 0:f.map((e=>e.metadataItem)))?e:[])),b(t,Z({sourceURI:"watchlistHub"}))}),[f]),D=(0,n.useMemo)((()=>(0,l.Z)({listType:o.U.Mixed,listStyle:o.n.List,columnWidth:C})),[C]),O=(0,n.useMemo)((()=>e=>n.createElement(m.Z,w({},e))),[]),T=(0,n.useMemo)((()=>()=>t?n.createElement(u.Z,{href:(0,y.Z)("profileWatchlist",{id:t}),hub:g.z.Watchlist,title:(0,s.Z)("Watchlist")}):n.createElement(p.Z,{href:(0,y.Z)("profileWatchlist"),hub:g.z.Watchlist,title:(0,s.Z)("My Watchlist")})),[t]);return(0,n.useEffect)((()=>{f&&(null==r||r(f.length>0))}),[f,r]),t&&!f||E?null:n.createElement("div",{className:v.Z.hub},n.createElement(c.Z,{cellComponentFactory:O,className:v.Z.scroller,hub:M,hubTitleComponent:T,items:null!=f?f:[],keyPropName:"id",layout:D,totalSize:f?P:I,onPageRequest:S}))}},50963:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(23642),i=r(99318),s=r(11833),a=r(45439),o=r(43017),l=r(35419),c=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e};const v=(e,t)=>e.user.ratings.nodes.map((({item:e,rating:r})=>{var a;const o=(0,s.Z)(e,t);return{metadataItem:(l=y({},o),c={displayImage:n.IY.CoverPoster,displayFields:o.type===i.pG.Episode?[n.PD.GrandparentTitle,n.PD.EpisodeTitleAndIdentifier,n.PD.ActivityRating]:[...null!=(a=o.displayFields)?a:[],n.PD.ActivityRating]},d(l,u(c))),activity:{rating:r},id:e.id};var l,c})),f=e=>e.user.ratings.pageInfo.hasNextPage,b=e=>e.user.ratings.pageInfo.endCursor;function Z(e){return(0,a.Z)(e,o.z.Ratings,l.H9,v,f,b)}},53843:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(35419);function i(e){const{data:t,isLoading:r,isSuccess:i,error:s}=(0,n.co)({uuid:null!=e?e:""},{refetchOnMountOrArgChange:!0,skip:!e});return{isPending:r,isPopulated:i,details:null==t?void 0:t.user,error:s}}},57053:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(35419);function i(){const{data:e,isLoading:t,isSuccess:r,error:i}=(0,n.gy)({},{refetchOnMountOrArgChange:!0});return{isPending:t,isPopulated:r,privacy:null==e?void 0:e.userPrivacy,error:i}}},48102:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(67294),i=r(28216),s=r(23642),a=r(40877),o=r(47531),l=r(11833),c=r(45439),d=r(43017),u=r(35419),p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&f(e,r,t[r]);return e};const Z=(e,t)=>e.user.watchHistory.nodes.map((({item:e,id:r,date:n})=>{const i=(0,l.Z)(e,t);return{metadataItem:(a=b({},i),o={displayImage:s.IY.CoverArt},m(a,h(o))),activity:{viewedAt:n},id:r};var a,o})),S=e=>e.user.watchHistory.pageInfo.hasNextPage,P=e=>e.user.watchHistory.pageInfo.endCursor;function I(e){const t=(0,i.I0)(),r=(0,i.v9)((0,o.Z)(d.z.WatchHistory)),s=(0,c.Z)(e,d.z.WatchHistory,u.lN,Z,S,P),{refetch:l}=s,p=((e,t)=>{var r={};for(var n in e)y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&g)for(var n of g(e))t.indexOf(n)<0&&v.call(e,n)&&(r[n]=e[n]);return r})(s,["refetch"]);return(0,n.useEffect)((()=>{r&&(l(),t(a.Z.actions.markProfileHubPopulated({hub:d.z.WatchHistory})))}),[t,r,l]),p}},45164:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(67294),i=r(28216),s=r(23642),a=r(40877),o=r(47531),l=r(11833),c=r(45439),d=r(43017),u=r(35419),p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&f(e,r,t[r]);return e};const Z=(e,t)=>e.user.watchlist.nodes.map((e=>{const r=(0,l.Z)(e,t);return{id:e.id,metadataItem:(n=b({},r),i={displayImage:s.IY.CoverPoster},m(n,h(i)))};var n,i})),S=e=>e.user.watchlist.pageInfo.hasNextPage,P=e=>e.user.watchlist.pageInfo.endCursor;function I(e,t){const r=(0,i.I0)(),s=(0,i.v9)((0,o.Z)(d.z.Watchlist)),l=(0,c.Z)(e,d.z.Watchlist,u.aQ,Z,S,P),{refetch:p}=l,m=((e,t)=>{var r={};for(var n in e)y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&g)for(var n of g(e))t.indexOf(n)<0&&v.call(e,n)&&(r[n]=e[n]);return r})(l,["refetch"]);return(0,n.useEffect)((()=>{s&&!t&&(p(),r(a.Z.actions.markProfileHubPopulated({hub:d.z.Watchlist})))}),[r,t,s,p]),m}},45439:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(69151);function i(e,t,r,i,s,a,o=24){return(0,n.Z)({uuid:e},t,r,i,s,a,o)}},43017:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});var n=(e=>(e.Ratings="ratings",e.Watchlist="watchlist",e.WatchHistory="watchHistory",e))(n||{})},35419:(e,t,r)=>{"use strict";r.d(t,{_B:()=>s,aQ:()=>u,H9:()=>m,co:()=>h,lN:()=>v,gy:()=>f,LF:()=>Z,G8:()=>S,pV:()=>P,lU:()=>I});var n=r(95522),i=r(22626),s=(e=>(e.Friends="FRIENDS",e.Private="PRIVATE",e.Public="PUBLIC",e))(s||{});const a=`\n    query GetWatchlistHub($uuid: ID = "", $first: PaginationInt!, $after: String, $skipUserState: Boolean = false) {\n  user(id: $uuid) {\n    watchlist(first: $first, after: $after) {\n      nodes {\n        ...itemFields\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        endCursor\n      }\n    }\n  }\n}\n    ${i.MQ}`,o=`\n    query GetRatingsHub($uuid: ID = "", $first: PaginationInt!, $after: String, $skipUserState: Boolean = false) {\n  user(id: $uuid) {\n    ratings(first: $first, after: $after) {\n      nodes {\n        item {\n          ...itemFields\n        }\n        rating\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        endCursor\n      }\n    }\n  }\n}\n    ${i.MQ}`,l=`\n    query GetWatchHistoryHub($uuid: ID = "", $first: PaginationInt!, $after: String, $skipUserState: Boolean = false) {\n  user(id: $uuid) {\n    watchHistory(first: $first, after: $after) {\n      nodes {\n        item {\n          ...itemFields\n        }\n        date\n        id\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        endCursor\n      }\n    }\n  }\n}\n    ${i.MQ}`,c=n.h.injectEndpoints({endpoints:e=>({GetWatchlistHub:e.query({query:e=>({document:a,variables:e})}),GetRatingsHub:e.query({query:e=>({document:o,variables:e})}),GetUserDetails:e.query({query:e=>({document:"\n    query GetUserDetails($uuid: ID!) {\n  user(id: $uuid) {\n    avatar\n    username\n    displayName\n    bio\n    createdAt\n    watchStats {\n      movieDisplay\n      episodeDisplay\n      showDisplay\n    }\n    hasSeenOnboarding\n    location\n    plexPass\n    url\n  }\n}\n    ",variables:e})}),GetWatchHistoryHub:e.query({query:e=>({document:l,variables:e})}),GetUserPrivacy:e.query({query:e=>({document:"\n    query GetUserPrivacy {\n  userPrivacy {\n    createdAt\n    plexPass\n    ratings\n    watchHistory\n    watchlist\n  }\n}\n    ",variables:e})}),updateUserProfile:e.mutation({query:e=>({document:"\n    mutation updateUserProfile($input: UpdateUserProfileInput!) {\n  updateUserProfile(input: $input) {\n    bio\n    location\n    url\n  }\n}\n    ",variables:e})}),removeActivity:e.mutation({query:e=>({document:"\n    mutation removeActivity($input: RemoveActivityInput!) {\n  removeActivity(input: $input)\n}\n    ",variables:e})}),updateUserPrivacy:e.mutation({query:e=>({document:"\n    mutation updateUserPrivacy($input: UpdatePrivacyInput!) {\n  updatePrivacy(input: $input)\n}\n    ",variables:e})}),updateOnboardingStatus:e.mutation({query:e=>({document:"\n    mutation updateOnboardingStatus($input: UpdateOnboardingStatusInput!) {\n  updateOnboardingStatus(input: $input) {\n    hasSeenOnboarding\n  }\n}\n    ",variables:e})})})}),{useGetWatchlistHubQuery:d,useLazyGetWatchlistHubQuery:u,useGetRatingsHubQuery:p,useLazyGetRatingsHubQuery:m,useGetUserDetailsQuery:h,useLazyGetUserDetailsQuery:g,useGetWatchHistoryHubQuery:y,useLazyGetWatchHistoryHubQuery:v,useGetUserPrivacyQuery:f,useLazyGetUserPrivacyQuery:b,useUpdateUserProfileMutation:Z,useRemoveActivityMutation:S,useUpdateUserPrivacyMutation:P,useUpdateOnboardingStatusMutation:I}=c},51387:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(20683),i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e,t){const r=n.Z.parseUrl(e).params||{};return t<80?e:n.Z.join(e,(i=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({},r),s(i,a({size:t}))));var i}},18585:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(96994);const s=(0,n.P1)(i.Z,(e=>e.features))},61644:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(67294),i=r(84739),s=r(78386),a=r(56422),o=r(54320),l=r(62376),c=r(28247),d=r(83836),u=r(72449),p=r(16975);var m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function y(e){var t=e,{server:r,selectedFriends:y,selectFriend:v,isDisabled:f}=t,b=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(t,["server","selectedFriends","selectFriend","isDisabled"]);const{item:Z,cellIndex:S}=b,P=(0,p.Z)(b),[I,E]=(0,c.Z)(),w=(0,n.useMemo)((()=>y.some((e=>(null==Z?void 0:Z.uuid)===e))),[null==Z?void 0:Z.uuid,y]),C=(0,n.useCallback)((()=>{Z&&v(Z.uuid)}),[Z,v]);if(!Z)return null;const M=Z.friendlyName||Z.username,D=Z.username!==M&&Z.username;return n.createElement(u.Z,{ref:E,isAlternate:!(S%2),isHovered:I,style:P.style},n.createElement(l.Z,{className:"FriendRowItem-item-EXN1sJ Link-link-vSsQW1",isDisabled:f,onPress:C},n.createElement(s.X,{align:o.xM.SpaceBetween,verticalAlign:o.xM.Center,width:"100%"},n.createElement(s.X,{gap:o.$u.XS,verticalAlign:o.xM.Center},n.createElement(d.Z,{server:r,size:27,url:Z.thumb}),n.createElement(a.x,{level:a.N.Body2},M),D?n.createElement(n.Fragment,null,n.createElement(a.x,{color:o.Il.Muted,level:a.N.Body2},""),n.createElement(a.x,{color:o.Il.Muted,level:a.N.Body2},D)):null),w?n.createElement("div",{className:"FriendRowItem-checked-MtITD7"},n.createElement(i.N,{size:o.$u.L})):null)))}},94673:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ge});var n=r(67294),i=r(28216),s=r(74659),a=r(84739),o=r(26400),l=r(82818),c=r(97318),d=r(73788),u=r(84419),p=r(47240),m=r(26537),h=r(25984),g=r(51612),y=r(9278),v=r(181),f=r(99),b=r(78386),Z=r(7766),S=r(54320),P=r(26377);function I({message:e,active:t,timeout:r=3e3,onClose:i}){return(0,n.useEffect)((()=>{t&&window.setTimeout((()=>{null==i||i()}),r)}),[t,i,r]),n.createElement(P.Z,{className:"Toaster-toast-xWXJ93 "+(t?"Toaster-opened-gFvnWd fadeIn-fadeIn-TL5Fh3":""),isOpen:t},n.createElement(f.k,{alignItems:S.xM.Center,justifyContent:S.xM.Center,width:"100%"},n.createElement(Z.F,{color:S.Il.Default},n.createElement(b.X,{align:S.xM.Center},e))))}var E=r(1802),w=r(56422),C=r(59157);function M({modalState:e,title:t,friends:r,publicPagesURL:i,copyLinkIcon:s,onCopyLink:a}){const o=(0,n.useCallback)((()=>a(!1)),[a]);return n.createElement(l.hz,{dismissLabel:(0,d.Z)("Close"),header:n.createElement(w.x,{numberOfLines:1},(0,d.Z)("Share With Friends - {title}",{title:t})),onClose:e.onClose},n.createElement(l.fe,null,n.createElement(f.k,{alignItems:S.xM.Center,height:"100%",justifyContent:S.xM.Center},n.createElement(C.Z,{className:"ItemSharingModalAddFriends-addFriends-y5y0qL",friends:r}))),n.createElement(l.mz,null,n.createElement(l.w2,{align:S.xM.Left},i?n.createElement(E.hU,{icon:s,testID:"copyLink",onPress:o},(0,d.Z)("Copy Link")):null),n.createElement(l.w2,{align:S.xM.Right},n.createElement(E.zx,{onPress:e.onClose},(0,d.Z)("Cancel")),n.createElement(E.zx,{color:S.Il.Accent,isDisabled:!0,onPress:e.onClose},(0,d.Z)("Send")))))}var D=r(64188),O=r(21057),T=r(70850),x=r(7256),A=r(84503),k=r(38483),N=r(65790),R=r(64154),L=r(34219),j=r(86755),V=r(62376),U=r(28247),F=r(72449),B=r(16975),_=r(27568),z=r(61644);var H=Object.defineProperty,W=Object.defineProperties,G=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Y(e){var t=e,{server:r,selectedFriends:i,isDisabled:s,selectedGroup:o,selectFriendGroup:l,selectFriend:c}=t,u=((e,t)=>{var r={};for(var n in e)$.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Q)for(var n of Q(e))t.indexOf(n)<0&&K.call(e,n)&&(r[n]=e[n]);return r})(t,["server","selectedFriends","isDisabled","selectedGroup","selectFriendGroup","selectFriend"]);const{item:p,cellIndex:m}=u,h=(0,B.Z)(u),[g,y]=(0,U.Z)(),v=(0,n.useMemo)((()=>{const e=(null==p?void 0:p.friends[0].friendlyName)||(null==p?void 0:p.friends[0].username);if(e){const t=p.friends.length-1;return 1===t?(0,d.Z)("{name} and 1 other",{name:e}):(0,d.Z)("{name} and {count} others",{name:e,count:t})}return e}),[p]),f=(0,n.useCallback)((()=>{p&&l(p.username)}),[p,l]),Z=(0,n.useMemo)((()=>({children:e})=>p&&p.friends.length>1?n.createElement(j.u,{tooltip:n.createElement(w.x,{color:S.Il.Muted,level:w.N.Body3},p.friends.map((e=>e.friendlyName||e.username)).join(", "))},e):n.createElement(n.Fragment,null,e)),[p]);return p?(null==p?void 0:p.friends)&&1===(null==p?void 0:p.friends.length)?n.createElement(z.Z,(P=((e,t)=>{for(var r in t||(t={}))$.call(t,r)&&q(e,r,t[r]);if(Q)for(var r of Q(t))K.call(t,r)&&q(e,r,t[r]);return e})({},u),I={isDisabled:!!o,item:null==p?void 0:p.friends[0],selectFriend:c,selectedFriends:i,server:r},W(P,G(I)))):n.createElement(F.Z,{ref:y,isAlternate:!(m%2),isHovered:g,style:h.style},n.createElement(Z,null,n.createElement(V.Z,{className:"FriendGroupRowItem-item-RYpK_r Link-link-vSsQW1",isDisabled:s,onPress:f},n.createElement(b.X,{align:S.xM.SpaceBetween,verticalAlign:S.xM.Center,width:"100%"},n.createElement(b.X,{gap:S.$u.XS,verticalAlign:S.xM.Center,width:"90%"},n.createElement("div",{className:"FriendGroupRowItem-avatarContainer-TPHBIz"},n.createElement(_.Z,{avatarSize:25,avatars:p.friends.slice(0,3).map((e=>e.thumb))})),n.createElement(w.x,{level:w.N.Body2,numberOfLines:1},v)),(null==o?void 0:o.username)===p.username?n.createElement("div",{className:"FriendGroupRowItem-checked-DFEYx7"},n.createElement(a.N,{size:S.$u.L})):null)))):null;var P,I}function X(e,t){return e.filter((e=>e.friendlyName&&-1!==e.friendlyName.toLowerCase().indexOf(t.toLowerCase())||-1!==e.username.toLowerCase().indexOf(t.toLowerCase())))}function J(e,t){return e.filter((e=>!t.find((t=>t.id===e.id))))}var ee=r(48321);function te(e,t){return t.timestamp-e.timestamp}var re=r(78073);var ne=Object.defineProperty,ie=Object.defineProperties,se=Object.getOwnPropertyDescriptors,ae=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,ce=(e,t,r)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,de=(e,t)=>{for(var r in t||(t={}))oe.call(t,r)&&ce(e,r,t[r]);if(ae)for(var r of ae(t))le.call(t,r)&&ce(e,r,t[r]);return e},ue=(e,t)=>ie(e,se(t));const pe=(0,N.Z)({rowHeight:40});function me({modalState:e,title:t,friends:r,publicPagesURL:s,server:a,guid:o,copyLinkIcon:c,onCopyLink:u,isPopulated:p}){const m=(0,i.I0)(),h=(0,n.useRef)(null),g=(0,n.useRef)(null),[y,v]=(0,n.useState)([]),[Z,P]=(0,n.useState)(""),[I,C]=(0,n.useState)([]),[M,N]=(0,n.useState)(""),[j,V]=(0,n.useState)([]),[U,F]=(0,n.useState)([]),[B,_]=(0,n.useState)(),[H,W]=(0,n.useState)([]),G=(0,i.v9)((0,L.Z)("messageRecipients")),[Q,{isLoading:$,isError:K,reset:q,fulfilledTimeStamp:ne}]=(0,re.at)(),ie=(0,ee.Z)($);(0,n.useEffect)((()=>{V(J(r,y))}),[r,y]),(0,n.useEffect)((()=>{F(H)}),[H]);const se=(0,n.useCallback)((()=>{N(""),P(""),C([]),V(J(r,y)),_(void 0)}),[r,y]);(0,n.useEffect)((()=>{K&&se()}),[K,se]),(0,n.useEffect)((()=>{e.isOpen||(q(),se())}),[e.isOpen,q,se]);const ae=(0,n.useCallback)((e=>{N(e.target.value),V(J(X(r,e.target.value),X(y,e.target.value))),F(function(e,t){return e.filter((e=>X(e.friends,t).length>0))}(H,e.target.value))}),[r,H,y]),oe=(0,n.useCallback)((()=>{N(""),V(J(r,y))}),[r,y]),le=(0,n.useCallback)((e=>{P(e.target.value)}),[]),ce=(0,n.useCallback)((e=>{m((0,A.LN)({messageRecipients:G.filter((t=>t.timestamp!==e))}))}),[m,G]);(0,n.useEffect)((()=>{if(!p)return;const e=[],t=G.sort(te).filter((e=>{const t=(r=e.timestamp,Math.floor((Date.now()-r)/864e5)<60);var r;return t||ce(e.timestamp),t})).map((t=>{const n=function(e,t){return t.map((t=>e.find((e=>e.uuid===t)))).filter((e=>!!e))}(r,t.ids);if(n.length!==t.ids.length){ce(t.timestamp);const e=n.map((e=>e.uuid));if(!e.length)return;const r=[{ids:e,timestamp:t.timestamp}];m((0,A.LN)({messageRecipients:[...G.filter((e=>e.timestamp!==t.timestamp)),...r]}))}if(1===n.length&&!e.some((e=>e.id===n[0].id))){const t=n[0];e.push(t)}return{friends:n,ids:t.ids,username:n.map((e=>e.username)).join()}})).filter((e=>!!e));W(t),v(e)}),[G,r,m,ce,p]),(0,n.useEffect)((()=>{if(!$&&ie&&!K){const t=[...(null==B?void 0:B.ids)||I].sort().toString(),r=G.find((e=>[...e.ids].sort().toString()===t));r?(r.timestamp=ne||0,m((0,A.LN)({messageRecipients:[...G]}))):m((0,A.LN)({messageRecipients:[...G,{ids:I||(null==B?void 0:B.ids),timestamp:ne}]})),e.onClose()}}),[m,ne,K,ie,$,e,G,I,B]);const me=(0,n.useCallback)((()=>{Q({input:{message:Z,recipients:(I.length>0?I:null==B?void 0:B.ids)||[],item:o,type:re.Cs.MetadataMessage}})}),[B,Q,Z,I,o]),he=(0,n.useCallback)((e=>{const t=I.filter((t=>t!==e));t.length===I.length&&t.push(e),C(t)}),[I]),ge=(0,n.useCallback)((e=>{(null==B?void 0:B.username)===e?_(void 0):_(H.find((t=>t.username===e)))}),[H,null==B?void 0:B.username]),ye=(0,n.useCallback)((()=>{const e=Z.trim().length>0||I.length>0;u(e)}),[Z,I,u]),ve=(0,n.useMemo)((()=>e=>{const{item:t}=e;return function(e){return!!e&&"friends"in e}(t)?n.createElement(Y,ue(de({},e),{isDisabled:I.length>0,item:t,selectFriend:he,selectFriendGroup:ge,selectedFriends:I,selectedGroup:B,server:a})):n.createElement(z.Z,ue(de({},e),{isDisabled:!!B,item:t,selectFriend:he,selectedFriends:I,server:a}))}),[he,ge,I,B,a]);return n.createElement(l.hz,{dismissLabel:(0,d.Z)("Close"),header:n.createElement(f.k,{gap:S.$u.S,orientation:S.i5.Vertical},n.createElement(w.x,{numberOfLines:1},(0,d.Z)("Share With Friends - {title}",{title:t})),n.createElement(b.X,{align:S.xM.SpaceBetween,verticalAlign:S.xM.Center},n.createElement(w.x,{color:S.Il.Muted,level:w.N.Body1},(0,d.Z)("Friends")),n.createElement(b.X,{width:287},n.createElement(T.M,{inputProps:{ref:g,onChange:ae,value:M,placeholder:(0,d.Z)("Search"),style:{padding:0}},onClearPress:oe})))),onClose:e.onClose},p?n.createElement(l.fe,{padding:!1},n.createElement("div",{className:"ItemSharingModalContent-modal-CU0RcS"},j.length>0||H.length>0?n.createElement(R.Z,{cellComponentFactory:ve,className:"ItemSharingModalContent-friendsList-sLoVg5 VirtualListScroller-scroller-QR8ROA Scroller-scroller-S6_dko",items:[...U,...j],keyPropName:"username",layout:pe,scrollDirection:O.I.Vertical,totalSize:j.length+U.length}):null)):n.createElement(l.fe,{padding:!1},n.createElement(f.k,{alignItems:S.xM.Center,height:"100%",justifyContent:S.xM.Center},n.createElement(x.$,null))),n.createElement(l.mz,null,n.createElement(D.K,{gap:S.$u.M,width:"100%"},n.createElement("div",{className:"ItemSharingModalContent-separator-rW_vlb"}),I.length>0?n.createElement(w.x,{level:w.N.Body3,testID:"recipientIds"},function(e,t){return 0===t.length||0===e.length?"":`${(0,d.Z)("To: ")}${e.map((e=>{const r=t.find((t=>t.uuid===e));return(null==r?void 0:r.friendlyName)||(null==r?void 0:r.username)})).filter((e=>!!e)).join(", ")}`}(I,r)):null,B?n.createElement(w.x,{level:w.N.Body3,testID:"recipientIds"},function(e){return e&&0!==e.length?`To: ${e.map((e=>e.friendlyName||e.username)).join(", ")}`:""}(B.friends)):null,n.createElement(D.K,{gap:S.$u.L,width:"100%"},n.createElement(k.Z,{ref:h,maxHeight:75,name:"message",placeholder:(0,d.Z)("Add a message"),value:Z,onChange:le}),K?n.createElement("div",{className:"ItemSharingModalContent-error-OTcxPW"},n.createElement(w.x,{color:"inherit",level:w.N.Body2},(0,d.Z)("An error has occurred, please try again later."))):null,n.createElement(b.X,null,n.createElement(l.w2,{align:S.xM.Left},s?n.createElement(E.hU,{icon:c,testID:"copyLink",onPress:ye},(0,d.Z)("Copy Link")):null),n.createElement(l.w2,{align:S.xM.Right},n.createElement(E.zx,{onPress:e.onClose},(0,d.Z)("Cancel")),$?n.createElement(x.$,null):n.createElement(E.zx,{color:S.Il.Accent,isDisabled:!I.length&&!B,testID:"sendMessage",onPress:me},(0,d.Z)("Send"))))))))}var he=r(2696);function ge({children:e,modalState:t,item:r}){var f;const b=(0,i.I0)(),[Z,S]=(0,n.useState)(r.publicPagesURL),[P,E]=(0,n.useState)(s.J),[w,C]=(0,n.useState)(!1),D=(0,n.useMemo)((()=>`library/metadata/${(0,c.Z)(r.guid)}`),[r.guid]),O=(0,i.v9)(v.Z),T=(0,i.v9)(y.Z),{item:{publicPagesURL:x}}=(0,i.v9)((0,g.Z)(D)),{allFriends:{friends:A,isPopulated:k}}=(0,i.v9)(m.Z);(0,n.useEffect)((()=>{!r.publicPagesURL&&T&&b(h.Z.actions.fetchMetadataItem({server:O,key:D,provider:T}))}),[b,r,r.guid,r.key,r.publicPagesURL,r.source,D,T,O]),(0,n.useEffect)((()=>{b(p.Z.actions.fetchAllFriends({server:O}))}),[b,O]),(0,n.useEffect)((()=>{t.isOpen&&E(s.J)}),[b,t.isOpen,O]),(0,n.useEffect)((()=>{x&&Z!==x&&S(x)}),[x,Z]);const N=(0,n.useCallback)(((e=!1)=>{return r=this,null,n=function*(){try{yield window.navigator.clipboard.writeText(Z||""),E(a.N),!e&&window.setTimeout((()=>t.onClose()),250),C(!0)}catch(e){E(o.F)}},new Promise(((e,t)=>{var i=e=>{try{a(n.next(e))}catch(e){t(e)}},s=e=>{try{a(n.throw(e))}catch(e){t(e)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,s);a((n=n.apply(r,null)).next())}));var r,n}),[t,Z]),R=(0,n.useCallback)((()=>{C(!1)}),[]);return n.createElement(l.u_,{isOpen:t.isOpen,onClose:t.onClose},n.createElement(l.iq,null,e),!A.length&&k?n.createElement(M,{copyLinkIcon:P,friends:A,modalState:t,publicPagesURL:Z,title:(0,he.Z)(r,u.U),onCopyLink:N}):n.createElement(me,{copyLinkIcon:P,friends:A,guid:null!=(f=r.guid)?f:"",isPopulated:k,modalState:t,publicPagesURL:Z,server:O,title:(0,he.Z)(r,u.U),onCopyLink:N}),n.createElement(I,{active:w,message:(0,d.Z)("Link copied to your clipboard"),onClose:R}))}},13930:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Le});var n=r(67294),i=r(28216),s=r(1802),a=r(54320),o=r(37703),l=r(75404),c=r(73788),d=r(77054),u=r(47240),p=r(26537),m=r(22222),h=r(36522),g=r(26547),y=r(81017),v=r(181),f=r(20896),b=r(82818),Z=r(7256);function S({children:e,modalState:t,steps:r,title:i,step:o,isValid:l,isLoading:d,isLastStepReversible:u,buttonLabel:p,onNext:m,onPrevious:h}){const g=(0,n.useRef)(null),y=o>=r.length-1;return(0,n.useEffect)((()=>{var e;null==(e=g.current)||e.scrollTo({top:0})}),[o]),n.createElement(b.u_,{isOpen:t.isOpen,onOpenChange:t.onOpenChange},n.createElement(b.iq,null,e),n.createElement(b.hz,{dismissLabel:(0,c.Z)("Close"),header:i,size:a.$u.L,onClose:t.onClose},n.createElement(b.fe,{ref:g},r[o]),n.createElement(b.mz,null,o>0&&(!y||y&&u)?n.createElement(b.w2,{align:a.xM.Left},n.createElement(s.zx,{onPress:t.onClose},(0,c.Z)("Cancel"))):null,n.createElement(b.w2,null,0===o?n.createElement(s.zx,{onPress:t.onClose},(0,c.Z)("Cancel")):null,o>0&&!d&&(!y||y&&u)?n.createElement(s.zx,{onPress:h},(0,c.Z)("Previous")):null,d?null:n.createElement(s.zx,{color:a.Il.Accent,isDisabled:!l,onPress:m},p(o)),d?n.createElement(Z.$,null):null))))}var P=r(64188),I=r(78386),E=r(56422),w=r(22169),C=r(20683),M=r(62376),D=r(14139),O=r(83700);function T({state:e}){var t,r,i,s;const[o,l]=(0,n.useState)(""),[d,u]=(0,n.useState)("initial");(0,n.useEffect)((()=>{e.inviteToken&&l(C.Z.join((0,w.Y)("servers/shared_servers/accept"),{invite_token:e.inviteToken}))}),[e.inviteToken]);const p=(0,n.useCallback)((()=>{return e=this,null,t=function*(){try{yield window.navigator.clipboard.writeText(o),u("done")}catch(e){u("error")}},new Promise(((r,n)=>{var i=e=>{try{a(t.next(e))}catch(e){n(e)}},s=e=>{try{a(t.throw(e))}catch(e){n(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,s);a((t=t.apply(e,null)).next())}));var e,t}),[o]),m=(0,n.useCallback)((()=>{switch(d){case"initial":case"error":return!1;case"done":return!0}}),[d]),h=(0,n.useCallback)((()=>{switch(d){case"initial":case"error":return(0,c.Z)("Copy link");case"done":return(0,c.Z)("Copied!")}}),[d]),g=(0,n.useMemo)((()=>Object.keys(e.libraries).reduce(((t,r)=>t+e.libraries[r].length),0)),[e.libraries]);return n.createElement(P.K,{gap:a.$u.S},g>0?n.createElement(E.x,null,(0,c.Z)("You shared {count} libraries with {name}.",{count:g,name:(null==(t=e.friend)?void 0:t.friendlyName)||(null==(r=e.friend)?void 0:r.username)||e.username})):n.createElement(E.x,null,(0,c.Z)("You didn't share any libraries with {name}.",{name:(null==(i=e.friend)?void 0:i.friendlyName)||(null==(s=e.friend)?void 0:s.username)||e.username})),o?n.createElement(P.K,{gap:a.$u.XS},n.createElement(E.x,{color:a.Il.Muted,level:E.N.Body1},(0,c.Z)("We've sent an email asking them to confirm, or they can use this link to accept the invitation:")),n.createElement(I.X,null,n.createElement(D.Z,{className:"LibrarySharingSummary-input-lpjUO9 TextInput-input-NqTdW3 input-input-XAtklw",name:"inviteLink",readOnly:!0,value:o}),n.createElement(M.Z,{className:"LibrarySharingSummary-copyLink-ZCShix Link-link-SxPFpG",isDisabled:m(),kind:O.Z.Primary,onPress:p},h())),"error"===d?n.createElement(E.x,{color:a.Il.Accent},(0,c.Z)("Error while copying.")):null):null)}var x=r(99),A=r(25814),k=r(91012),N=r(20622),R=r(94184),L=r.n(R),j=r(28247),V=r(72449);function U({section:e,isSelected:t,index:r,onSelect:i}){const[s,o]=(0,n.useState)(t),[l,c]=(0,j.Z)(),d=(0,n.useCallback)((e=>{o(e.currentTarget.checked)}),[]),u=(0,n.useCallback)((()=>{i(e.id)}),[i,e.id]);return n.createElement(V.Z,{ref:c,isAlternate:!(r%2),isHovered:l},n.createElement(I.X,{verticalAlign:a.xM.Center},n.createElement("label",{className:"LibrarySectionItem-row-KM9UMN"},n.createElement(k.Z,{"aria-label":e.title,checked:s,name:e.title,onChange:d,onClick:u}),n.createElement(E.x,{color:a.Il.Default,level:E.N.Body1},e.title))))}function F({sections:e,isVisible:t,initialSelectedIds:r,onChange:i}){const[s,a]=(0,n.useState)(r),o=(0,n.useCallback)((e=>{const t=s.indexOf(e);a(t>=0?s.filter(((e,r)=>r!==t)):[...s,e])}),[s]);return(0,n.useEffect)((()=>{i(s)}),[i,s]),n.createElement("div",{className:L()("LibrarySections-sections-ao2cP7",!t&&"LibrarySections-hidden-rwgU79"),style:{maxHeight:40*e.length}},e.map(((e,t)=>n.createElement(U,{key:e.key,index:t,isSelected:s.includes(e.id),section:e,onSelect:o}))))}function B({server:e,librariesIDs:t,onLibrariesChange:r}){const[i,s]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!0),[d,u]=(0,n.useState)(t),p=(0,n.useCallback)((t=>{const n=t.currentTarget.checked;s(n),u([]),r(e.machineIdentifier,n?e.librarySections.map((e=>e.id)):[])}),[r,e.librarySections,e.machineIdentifier]),m=(0,n.useCallback)((()=>{l(!o)}),[o]),h=(0,n.useCallback)((t=>{t.length===e.librarySections.length&&s(!0),r(e.machineIdentifier,t)}),[r,e.librarySections.length,e.machineIdentifier]);return n.createElement(P.K,null,n.createElement(I.X,{verticalAlign:a.xM.Center},n.createElement(A.Z,{children:null,className:i?"ServerAccordion-hidden-MkpcLe":"ServerAccordion-arrow-zjTWhQ",direction:o?N.Z.Up:N.Z.Down,onPress:m}),n.createElement("label",{className:"ServerAccordion-input-PWOgaX"},n.createElement(k.Z,{"aria-label":e.name,checked:i,id:e.machineIdentifier,name:e.name,onChange:p}),n.createElement(E.x,{color:a.Il.Default,level:E.N.Body1},`${e.name}${i?` (${(0,c.Z)("All Libraries")})`:""}`))),i?null:n.createElement(F,{initialSelectedIds:d,isVisible:o,sections:e.librarySections,onChange:h}))}function _({state:e,isPending:t,isPopulated:r,servers:i,onValidate:s}){var o,l;const d=(0,n.useCallback)(((t,r)=>{e.libraries[t]||(e.libraries[t]=[]),e.libraries[t]=r}),[e.libraries]);return(0,n.useEffect)((()=>{s(!(e.friend&&0===(null==i?void 0:i.length)))}),[s,null==i?void 0:i.length,e.friend]),n.createElement(P.K,{gap:a.$u.S},n.createElement(E.x,{level:E.N.Body1},(0,c.Z)("Choose the libraries {name} can access",{name:(null==(o=e.friend)?void 0:o.friendlyName)||(null==(l=e.friend)?void 0:l.username)||e.username})),t||0!==(null==i?void 0:i.length)?null:n.createElement(E.x,{color:a.Il.Accent,level:E.N.Heading7},(0,c.Z)("You don't have any connected servers.")),t&&!r?n.createElement(x.k,{alignItems:a.xM.Center,height:"100%",justifyContent:a.xM.Center,width:"100%"},n.createElement(Z.$,null)):null,r&&i?n.createElement(P.K,{gap:a.$u.S},i.map((t=>{var r,i;const s=e.libraries[null==t?void 0:t.machineIdentifier],a=null==(i=null==(r=e.friend)?void 0:r.sharedServers.filter((e=>e.machineIdentifier===t.machineIdentifier))[0])?void 0:i.libraries.map((e=>e.id));return n.createElement(n.Fragment,{key:t.machineIdentifier},t?n.createElement(B,{librariesIDs:s||(null!=a?a:[]),server:t,onLibrariesChange:d}):null)}))):null)}var z=r(26400),H=r(41863),W=r(16921),G=r(70777),Q=r(70668),$=r(46160),K=r(86457),q=r(15058),Y=r(50683),X=r(8197),J=r(65710);const ee={message:"SelectRestrictions-message-Aplrj4",section:"SelectRestrictions-section-idFOkZ",warningMessage:"SelectRestrictions-warningMessage-cWZx6b"};function te(e){if(!e)return"";const t={},r=e.split("=");return t[r[0]]=r[1],t}function re(e){return parseInt(e,10)}function ne({state:e,error:t}){var r,s,o,l,d;const u=(0,i.I0)(),p=(0,i.v9)((0,q.Z)(G.LD)),m=(0,i.v9)(y.Z),h=(0,i.v9)((0,H.Z)("hasPlexPass")),g=(0,i.v9)((0,q.Z)(G.d6)),v=(0,i.v9)((0,q.Z)(G.jq)),{filterOptionsTags:f,isFilterOptionsTagsPopulating:b,isFilterOptionsTagsPopulated:Z}=(0,i.v9)((e=>e.ui.userSharingSettingsPage)),S=(0,n.useMemo)((()=>{var t;const r=null==(t=e.friend)?void 0:t.sharingSettings;return{filterMovies:te(null==r?void 0:r.filterMovies),filterTelevision:te(null==r?void 0:r.filterTelevision),filterMusic:te(null==r?void 0:r.filterMusic)}}),[null==(r=e.friend)?void 0:r.sharingSettings]),w=!!e.friend&&e.friend.home,C=!(null==(o=null==(s=e.friend)?void 0:s.sharingSettings)?void 0:o.allowSync)||e.friend.sharingSettings.allowSync,M=(null==(d=null==(l=e.friend)?void 0:l.sharingSettings)?void 0:d.allowTuners)?e.friend.sharingSettings.allowTuners:0,D=w||v,[O,T]=(0,n.useState)(w);(0,n.useEffect)((()=>{u((0,K.L1)({serverEntityIDs:m.filter((e=>e.isFullOwnedServer&&e.uri)).map((e=>e.entityID))}))}),[u,m]),(0,n.useEffect)((()=>{e.addToHome=O}),[O,e]);const x=(0,n.useCallback)((t=>{const r={};Object.keys(t).map((e=>{r[e]=t[e].value})),e.sharingSettings=function(e){for(const t in e)if(e[t]&&"object"==typeof e[t])if(0===Object.keys(e[t]).length)delete e[t];else{const r=[];Object.keys(e[t]).map((n=>{r.push(`${n}=${e[t][n]}`)})),e[t]=r.join(",")}return e}((0,$.Z)(r))}),[e]);return n.createElement(Q.ZP,{onChange:x},t?n.createElement("div",{className:ee.warningMessage},n.createElement(E.x,{color:a.Il.Primary},t)):null,h&&!e.friend?n.createElement("div",{className:ee.message},n.createElement(P.K,{gap:a.$u.S},n.createElement(E.x,{level:E.N.Body2},(0,c.Z)("If you share devices with another Plex user, you can invite them into your Plex Home allowing them to easily switch accounts on devices youre signed into. The invited user will be asked to confirm Home membership. This is not required to allow access to your library.")),e.friend?null:n.createElement(E.x,{level:E.N.Body2},(0,c.Z)("This will also add {username} as a friend.",{username:e.username})))):null,h&&!e.friend?n.createElement("div",{className:ee.section},n.createElement(Y.Z,{checkboxText:(0,c.Z)("Add to Plex Home"),initialValue:O,isDisabled:w,name:"addToHome",onChange:T})):null,O?n.createElement("div",{className:ee.warningMessage},n.createElement(I.X,{gap:a.$u.XS,verticalAlign:a.xM.Center},n.createElement(z.F,null),n.createElement(E.x,{level:E.N.Body3},(0,c.Z)("Inviting other friends to your home is a security risk that could allow these friends to access your account. You should only do this if you live in the same home and share devices.")))):null,n.createElement("div",{className:ee.message},n.createElement(E.x,{level:E.N.Body2},(0,c.Z)("You can restrict this friend's access to certain features and content. These restrictions apply to all items shared with this friend. You can change them at any time in the Home & Library Access settings."))),n.createElement("div",{className:ee.section},n.createElement(Y.Z,{checkboxText:(0,c.Z)("Allow Downloads"),initialValue:C,name:"allowSync",subtitle:(0,c.Z)("Allow this friend to download content from your server.")}),D&&!p?n.createElement(Y.Z,{checkboxText:(0,c.Z)("Allow access to Live TV"),initialValue:!!M,name:"allowTuners",subtitle:(0,c.Z)("Enabling this option will allow this friend to access Live TV streams. It requires a library on the Plex Media Server that has DVR configured to be shared with the friend")}):null,D&&p?n.createElement(J.Z,{initialValue:M,name:"allowTuners",subtitle:(0,c.Z)("Enabling Live TV for this friend requires sharing a library with them. Enabling DVR will show all scheduled recordings, but this friend will only be able to manage their own recordings."),title:(0,c.Z)("Live TV & DVR Access"),transformValue:re,value:W.Z.values[M],values:W.Z.values}):null,g?n.createElement(X.Z,{className:ee.list,filterOptionsTags:f,friendFilterOptions:S,isFilterOptionsTagsPopulated:Z,isFilterOptionsTagsPopulating:b}):null))}var ie=r(43046),se=r(3788),ae=r(65790),oe=r(12316),le=r(64154),ce=r(783),de=r(48964),ue=r(61644),pe=r(53295),me=r(13876);const he="SelectUser-friendsList-ouZtAH",ge="SelectUser-listHeader-qwaWmg";var ye=Object.defineProperty,ve=Object.defineProperties,fe=Object.getOwnPropertyDescriptors,be=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,Pe=(e,t,r)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ie=(0,ae.Z)({rowHeight:46});function Ee({state:e,onValidate:t}){const r=(0,i.I0)(),[s,o]=(0,n.useState)(""),l=(0,me.Z)(s,ie.x),[d,m]=(0,n.useState)(""),[h,g]=(0,n.useState)(!1),[y,f]=(0,n.useState)(!1),{invites:b}=(0,i.v9)(se.Z),{error:S,isValidating:P,isValid:C}=(0,i.v9)(p.Z),M=(0,i.v9)(v.Z),{details:{username:O,email:T}}=(0,i.v9)(ce.Z),{allFriends:{friends:A}}=(0,i.v9)(p.Z),k=(0,n.useMemo)((()=>A.filter((e=>{var t;return!e.home&&!(null==(t=e.sharedServers)?void 0:t.length)&&!(0,pe.D)(e.sharedSources)}))),[A]),N=(0,n.useMemo)((()=>A.find((e=>e.username.toLocaleLowerCase()===l.toLocaleLowerCase()||e.email.toLocaleLowerCase()===l.toLocaleLowerCase()||e.uuid===d))),[A,l,d]);(0,n.useEffect)((()=>{r(u.Z.actions.fetchSentInvites({server:M}))}),[r,M]),(0,n.useEffect)((()=>{if(t(!S&&!!d),d&&!l){const t=A.find((e=>e.uuid===d));e.username=null==t?void 0:t.username,e.friend=t}else N?(e.friend=N,e.username=N.username):e.username=l}),[A,l,S,N,t,d,e]),(0,n.useEffect)((()=>{if(l){const e=!!b.find((e=>e.username===l||e.email===l||e.invitedEmail===l));f(e)}else f(!1)}),[l,b]),(0,n.useEffect)((()=>{l?l===O||l===T?g(!0):(g(!1),r(u.Z.actions.validateUsername({identifier:l,server:M}))):g(!1)}),[l,r,T,M,O]);const R=(0,n.useCallback)((e=>{o(e.target.value)}),[]),L=(0,n.useCallback)((e=>{e.preventDefault()}),[]),j=(0,n.useCallback)((e=>{m(e===d?"":e)}),[d]),V=(0,n.useMemo)((()=>e=>{const{item:t}=e;return n.createElement(ue.Z,(r=((e,t)=>{for(var r in t||(t={}))Ze.call(t,r)&&Pe(e,r,t[r]);if(be)for(var r of be(t))Se.call(t,r)&&Pe(e,r,t[r]);return e})({},e),ve(r,fe({isDisabled:!1,item:t,selectFriend:j,selectedFriends:[d],server:M}))));var r}),[j,d,M]),U=(0,n.useCallback)((()=>{let e="";return e=h?(0,c.Z)("You can't be friends with yourself."):y?(0,c.Z)("This user is already invited."):(0,de.Z)(S),n.createElement(E.x,{color:a.Il.Accent},e)}),[S,h,y]),F=l&&(!C||!!S)||h||y;return n.createElement(x.k,{gap:a.$u.M,height:"100%",orientation:a.i5.Vertical},n.createElement(E.x,{level:E.N.Body1,shrink:!1},(0,c.Z)("Choose a user to grant library access to by selecting a friend or entering the email of a new user and inviting them to Plex. New users will be asked to accept the invitation. After doing this, you may grant access to your Plex Media Server libraries and media items.")),n.createElement(I.X,{gap:a.$u.XS},n.createElement("form",{className:"SelectUser-form-fu2k7H",onSubmit:L},n.createElement(D.Z,{hasError:h,hasFocusOnMount:!0,isDisabled:!!d,name:"friend",placeholder:(0,c.Z)("Username or email"),value:s,onChange:R})),P?n.createElement(Z.$,{size:a.$u.S}):null),F?U():null,l&&N&&!F?n.createElement("div",{className:he},n.createElement("div",{className:ge},n.createElement(E.x,{level:E.N.Heading7},(0,c.Z)("Friends"))),n.createElement(le.Z,{cellComponentFactory:V,items:[N],keyPropName:"id",layout:Ie,scrollDirection:oe.I.Vertical,totalSize:1})):null,!l||N||F?null:n.createElement("div",{className:he},n.createElement("div",{className:ge},n.createElement(E.x,{level:E.N.Heading7},(0,c.Z)("User"))),n.createElement(le.Z,{cellComponentFactory:V,items:[{id:-1,username:l,email:l,friendlyName:l,home:!1,sharedServers:[],sharedSources:[],thumb:(0,w.Y)(`/users/${encodeURIComponent(l)}/avatar`),title:"",uuid:"-1",sharingSettings:{allowChannels:!0,allowSubtitleAdmin:!0,allowSync:"0",allowTuners:0,filterMovies:"",filterMusic:"",filterTelevision:""}}],keyPropName:"id",layout:Ie,scrollDirection:oe.I.Vertical,totalSize:1})),!l&&k.length>0&&!F?n.createElement("div",{className:he},n.createElement("div",{className:ge},n.createElement(E.x,{level:E.N.Heading7},(0,c.Z)("Friends without Library Access"))),n.createElement(le.Z,{cellComponentFactory:V,items:k,keyPropName:"id",layout:Ie,scrollDirection:oe.I.Vertical,totalSize:k.length})):null)}var we=r(48321),Ce=Object.defineProperty,Me=Object.defineProperties,De=Object.getOwnPropertyDescriptors,Oe=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,Ae=(e,t,r)=>t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ke=(e,t)=>{for(var r in t||(t={}))Te.call(t,r)&&Ae(e,r,t[r]);if(Oe)for(var r of Oe(t))xe.call(t,r)&&Ae(e,r,t[r]);return e},Ne=(e,t)=>Me(e,De(t));const Re={username:"",libraries:{},friend:void 0,inviteToken:"",sharingSettings:{allowChannels:!0,allowSubtitleAdmin:!0,allowSync:"",allowTuners:0,filterMovies:"",filterMusic:"",filterTelevision:""}};function Le(){const e=(0,i.I0)(),t=(0,f.Z)(),r=(0,o.b)(),[b,Z]=(0,n.useState)([]),[P,I]=(0,n.useState)(0),[E,w]=(0,n.useState)(!1),[C,M]=(0,n.useState)(Ne(ke({},Re),{libraries:{}})),{isAdding:D,error:O,isSendingHomeUserInvite:x}=(0,i.v9)(p.Z),A=(0,i.v9)(v.Z),k=(0,i.v9)(y.Z),N=(0,i.v9)((R=b,(0,m.P1)(h.Z,(e=>R.map((t=>e.serverDetails[t])).filter((e=>!!e))))));var R;const L=N.some((e=>e.isPending)),j=N.some((e=>e.isPopulated)),V=N.some((e=>e.isSharing))||D||x,U=(0,n.useMemo)((()=>{const e=N.map((e=>e.error));return e.length&&e.length===N.length&&e.every(Boolean)}),[N]),F=(0,n.useCallback)((()=>U?(0,c.Z)("Error while fetching server details"):O?null==O?void 0:O.message:void 0),[U,O]),B=(0,we.Z)(V);(0,n.useEffect)((()=>{var t;!B||V||U||O||(e(u.Z.actions.fetchAllFriends({server:A})),e(u.Z.actions.fetchSentInvites({server:A})),e((0,d.Tp)()),C.inviteToken=(null==(t=N[0])?void 0:t.inviteToken)||"",I(P+1))}),[U,e,O,V,B,A,N,C,P]),(0,n.useEffect)((()=>{r.isOpen&&(t({action:l.Dp}),I(0))}),[r.isOpen,t]),(0,n.useEffect)((()=>{0===P&&M(Ne(ke({},Re),{libraries:{}}))}),[P]),(0,n.useEffect)((()=>{Z(k.filter((e=>e.isFullOwnedServer&&e.uri)).map((e=>e.machineIdentifier)))}),[k]),(0,n.useEffect)((()=>{r.isOpen&&b.length>0&&b.map((t=>e(g.Z.actions.fetchServerDetails({server:A,machineIdentifier:t}))))}),[e,r.isOpen,b,A]);const z=(0,n.useMemo)((()=>N.map((e=>e.detail&&e.detail.librarySections.length>0?e.detail:void 0)).filter((e=>!!e))),[N]),H=(0,n.useCallback)((()=>{var t;if(2===P){C.addToHome&&e(u.Z.actions.sendHomeUserInvite({server:A,invitedEmail:C.username||(null==(t=C.friend)?void 0:t.username)||""}));const r=Object.keys(C.libraries);0===r.length&&C.username?e(u.Z.actions.sendFriendInvite({server:A,identifier:C.username,sharingSettings:C.sharingSettings})):r.forEach((t=>{var r,n;const i=null==(r=C.friend)?void 0:r.sharedServers.filter((e=>e.machineIdentifier===t));i&&i.length>0?C.libraries[t].length>0?e(g.Z.actions.updateLibraries({server:A,machineIdentifier:t,librarySectionIds:C.libraries[t],sharingSettings:C.sharingSettings,id:i[0].id})):e(g.Z.actions.deleteSharedServer({server:A,machineIdentifier:t,id:i[0].id})):C.libraries[t].length>0&&e(g.Z.actions.shareLibraries({server:A,machineIdentifier:t,librarySectionIds:C.libraries[t],sharingSettings:C.sharingSettings,username:C.username||(null==(n=C.friend)?void 0:n.username)||""}))}))}else I(P+1);3===P&&r.onClose()}),[e,r,A,C.addToHome,C.friend,C.libraries,C.sharingSettings,C.username,P]),W=(0,n.useCallback)((()=>{I(P-1)}),[P]),G=(0,n.useMemo)((()=>[n.createElement(Ee,{key:"step-1",state:C,onValidate:w}),n.createElement(_,{key:"step-2",isPending:L,isPopulated:j,servers:z,state:C,onValidate:w}),n.createElement(ne,{key:"step-3",error:F(),state:C}),n.createElement(T,{key:"step-4",state:C})]),[F,L,j,z,C]),Q=(0,n.useCallback)((()=>{switch(P){default:return(0,c.Z)("Continue");case 2:return(0,c.Z)("Send");case 3:case 4:return(0,c.Z)("Finish")}}),[P]);return(0,n.useEffect)((()=>{0===P&&w(!1)}),[P]),n.createElement(S,{buttonLabel:Q,isLastStepReversible:!1,isLoading:V,isValid:E,modalState:r,step:P,steps:G,title:(0,c.Z)("Grant Library Access"),onNext:H,onPrevious:W},n.createElement(s.zx,{size:a.$u.XS,testID:"button"},(0,c.Z)("Grant Library Access")))}},78073:(e,t,r)=>{"use strict";r.d(t,{Cs:()=>i,at:()=>a});var n=r(95522),i=(e=>(e.MetadataMessage="METADATA_MESSAGE",e.MetadataReport="METADATA_REPORT",e))(i||{});const s=n.h.injectEndpoints({endpoints:e=>({sendMessage:e.mutation({query:e=>({document:"\n    mutation sendMessage($input: CreateMessageInput!) {\n  createMessage(input: $input) {\n    __typename\n  }\n}\n    ",variables:e})})})}),{useSendMessageMutation:a}=s},61737:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(5977),i=r(74226),s=r(47276),a=r(33803),o=r(11101),l=r(6459);const c=function(){const e=(0,n.$B)({path:[l.Z.playHistory,...l.Z.playlist,...l.Z.prePlay,...l.Z.prePlayActivityFeed,...l.Z.activityCard,l.Z.watchNow,l.Z.hybridGuide,l.Z.providerSettings,l.Z.media,l.Z.serverSetup,l.Z.serverUpdate],exact:!0}),t=null==e?void 0:e.params,r=null==t?void 0:t.machineIdentifier,c=null==t?void 0:t.providerIdentifier;return r||c?{machineIdentifier:r||s.X,providerIdentifier:c?decodeURIComponent(c):i.Y3}:{machineIdentifier:o.Z.machineIdentifier,providerIdentifier:a.Z.identifier}}},14221:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(85229),i=r(32601);const s={secret:{secret:void 0,provisioningUri:void 0,isPending:!1,isPopulated:!1,error:null},toggle:{isPending:!1,isPopulated:!1,error:null},recoveryCodes:{isPending:!1,isPopulated:!1,error:null},sendRecoveryCode:{isPending:!1,isPopulated:!1,error:null},codes:[]},a=(0,n.oM)({name:"twoFactorAuth",initialState:s,reducers:{reset:()=>s,resetToggle(e){e.toggle=s.toggle},resetSendRecoveryCode(e){e.sendRecoveryCode=s.sendRecoveryCode},createSecretRequested(e,t){(0,i.er)(e.secret)},createSecretSucceeded(e,{payload:t}){(0,i.vv)(e.secret),e.secret.provisioningUri=t.provisioningUri,e.secret.secret=t.secret},createSecretFailed(e,{payload:t}){(0,i.VQ)(e.secret,t.error)},toggleRequested(e,t){(0,i.er)(e.toggle)},toggleSucceeded(e,{payload:t}){(0,i.vv)(e.toggle),t.enabled&&(e.codes=t.codes)},toggleFailed(e,{payload:t}){(0,i.VQ)(e.toggle,t.error)},generateRecoveryCodesRequested(e,t){(0,i.er)(e.recoveryCodes)},generateRecoveryCodesSucceeded(e,{payload:t}){(0,i.vv)(e.recoveryCodes),e.codes=t.codes},generateRecoveryCodesFailed(e,{payload:t}){(0,i.VQ)(e.recoveryCodes,t.error)},sendRecoveryCodeRequested(e){(0,i.er)(e.sendRecoveryCode),e.sendRecoveryCode.isPopulated=!1},sendRecoveryCodeSucceeded(e){(0,i.vv)(e.sendRecoveryCode)},sendRecoveryCodeFailed(e,{payload:t}){(0,i.VQ)(e.sendRecoveryCode,t.error),e.sendRecoveryCode.isPopulated=!1}}})},48529:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(67294),i=r(64188),s=r(80444),a=r(82818),o=r(1242),l=r(56422),c=r(54320),d=r(8089),u=r(73788),p=r(51026),m=r(22502),h=r(44811),g=r(21961),y=r(68647),v=r(35204),f=r(41295);function b({result:e,onResultSelect:t}){const[r]=(0,h.c9)(),a=(0,n.useCallback)((e=>{null==t||t(e)}),[t]);return n.createElement(s.O,{item:e,onChooseItem:a},n.createElement(i.K,null,n.createElement(y.Z,{server:r}),n.createElement(l.x,{color:c.Il.Muted,numberOfLines:1},(0,f.s_)(e)?void 0:e.item.librarySectionTitle,e.searchType===v.Bk.Tag&&(0,m.Z)(e.item.tagType)?"  "+p.Z.get(e.item.tagType).title:void 0)))}function Z({modalState:e,result:t,onResultSelect:r}){const l=(0,d.Z)(t.items[0].source);return n.createElement(a.u_,{isOpen:e.isOpen,onClose:e.onClose},n.createElement(a.hz,{dismissLabel:(0,u.Z)("Close Choose Source Modal"),header:(0,u.Z)("Choose Source"),size:c.$u.S,onClose:e.onClose},n.createElement(s.N,null,n.createElement("div",{className:"ChooseResultModal-result-a1L_Lc"},n.createElement(h.ZP,{machineIdentifier:l.serverIdentifier,providerIdentifier:l.providerIdentifier},n.createElement(g.Z,{mergedResult:t,result:t.items[0]}))),n.createElement(o.T,null,n.createElement(i.K,null,t.items.map((e=>{const t=(0,d.Z)(e.source);return n.createElement(h.ZP,{key:e.sourceURI,machineIdentifier:t.serverIdentifier,providerIdentifier:t.providerIdentifier},n.createElement(b,{result:e,onResultSelect:r}))})))))))}},73279:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(67294),i=r(28216),s=r(78386),a=r(7256),o=r(56422),l=r(54320),c=r(2595),d=r(73788),u=r(17408),p=r(22222),m=r(53472);const h=(0,p.P1)(m.Z,(e=>e.sourcesIsFetched));var g=r(35204);function y({group:e}){const t=(0,i.v9)(h),r=e.id===g.pN.Tuners,p=(0,n.useMemo)((()=>{if(![g.pN.MediaLibraries,g.pN.Tuners].includes(e.id))return;let n=0,i=0;return Object.entries(t).filter((([e])=>{const t=(0,c.Z)(e);return r?t:!t})).forEach((([,e])=>{n++,e&&i++})),n!==i?(0,d.Z)("Searching {number} of {total}",{number:i,total:n}):void 0}),[e.id,r,t]),m=(0,u.Z)(!!p,!1);return n.createElement(s.X,{gap:l.$u.S,verticalAlign:l.xM.Center},m?n.createElement(o.x,{color:l.Il.Muted,level:o.N.Body3},p):null,p?n.createElement(a.$,{size:l.$u.S}):null)}},21961:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(67294),i=r(59119),s=r(78386),a=r(64188),o=r(89995),l=r(24411),c=r(56422),d=r(54320),u=r(97212),p=r(73788),m=r(51026),h=r(65838),g=r(99318),y=r(17007),v=r(88063),f=r(64341),b=r(40363),Z=r(22502),S=r(78389),P=r(44811),I=r(9171),E=r(94788),w=r(41295),C=r(9083);const M="UniversalSearchResultInfo-emptyPoster-rMhScH",D=40,O=parseInt(h.Z.universalSearchResultHeight,10);function T(e){return e.type===g.pG.Movie&&e.year?`  ${(0,u.Z)(e.year)}`:e.parentTitle||e.grandparentTitle?`  ${e.parentTitle}${e.grandparentTitle?` - ${e.grandparentTitle}`:""}`:e.type===g.pG.Collection?`  ${e.librarySectionTitle}`:""}function x(e){if(!e||!(0,w.$D)(e))return"";const t=new Set(e.items.map((({item:e})=>m.Z.get(e.tagType).title)));return Array.from(t).sort().join(", ")}function A({title:e,subtitle:t,badgeTitle:r,posterSrc:l,posterFit:u=E.k.Cover,posterFallback:p,posterWidth:m,posterHeight:h,posterStyle:g,children:y}){return n.createElement(s.X,{gap:d.$u.M,grow:!0,height:O,verticalAlign:d.xM.Center,width:"100%"},n.createElement(o.W,{posterStyle:g,width:D},l?n.createElement(E.Z,{fit:u,height:h,src:l,width:m}):null!=p?p:n.createElement("div",{className:M},n.createElement(C.Z,{height:D,name:e,width:D}))),n.createElement(a.K,{width:"100%"},n.createElement(c.x,{level:c.N.Body2,numberOfLines:1},e),n.createElement(s.X,{align:d.xM.SpaceBetween,gap:d.$u.S},n.createElement(c.x,{color:d.Il.Muted,level:c.N.Body2,numberOfLines:1},t),n.createElement("div",{style:{maxWidth:"50%"}},y))),r?n.createElement(s.X,{shrink:!1},n.createElement(i.C,null,r)):null)}function k({result:e,children:t}){const[r,i]=(0,P.c9)(),{item:s}=e,{width:a,height:o}=(0,v.Z)({width:D,aspectRatio:y.s4}),c=(0,I.Z)({width:a,height:o,server:r,provider:i,url:s.coverPoster});let d=(0,p.Z)("Channel");return s.categories.length&&(d+=`  ${s.categories[0]}`),n.createElement(A,{badgeTitle:(0,p.Z)("Watch Now"),posterFallback:n.createElement("div",{className:M}),posterHeight:o,posterSrc:c,posterStyle:l.m.Portrait,posterWidth:a,subtitle:d,title:s.title},t)}function N({result:e,children:t}){const[r,i]=(0,P.c9)(),{item:s}=e,a=s.type===g.pG.Person,o=(0,y.ZP)(s.type,s.subtype),{width:c,height:d}=(0,v.Z)({width:D,aspectRatio:o}),u=(0,I.Z)({width:c,height:d,server:r,provider:i,url:(0,f.Z)(s,{aspectRatio:o})});return n.createElement(A,{posterHeight:d,posterSrc:u,posterStyle:a?l.m.Circle:l.m.Square,posterWidth:c,subtitle:(0,b.Z)(s.type),title:s.title},t)}function R({result:e,children:t,mergedResult:r}){const[i,s]=(0,P.c9)(),{item:a}=e,o=(0,Z.Z)(a.tagType),c=(0,I.Z)({width:D,height:D,server:i,provider:s,url:a.thumb});return n.createElement(A,{posterHeight:D,posterSrc:c,posterStyle:o?l.m.Circle:l.m.Square,posterWidth:D,subtitle:o?x(r):m.Z.get(a.tagType).title,title:a.tag},t)}function L({result:e,children:t}){const[r,i]=(0,P.c9)(),{item:s}=e,a=(0,y.ZP)(s.type,s.subtype,{listStyle:S.n.Search}),{width:o,height:c}=(0,v.Z)({width:D,aspectRatio:a}),d=(0,I.Z)({width:o,height:c,server:r,provider:i,url:(0,f.Z)(s,{aspectRatio:a})}),u=s.isLiveTVChannel?E.k.Contain:E.k.Cover,p=a===y.s4?l.m.Portrait:l.m.Square;return n.createElement(A,{posterFallback:n.createElement("div",{className:M}),posterFit:u,posterHeight:c,posterSrc:d,posterStyle:p,posterWidth:o,subtitle:`${(0,b.Z)(s.type,s.subtype)}${T(s)}`,title:s.title},t)}function j({result:e,children:t,mergedResult:r}){return(0,w.EX)(e)?n.createElement(N,{result:e},t):(0,w.g$)(e)?n.createElement(R,{mergedResult:r,result:e},t):(0,w.s_)(e)?n.createElement(k,{result:e},t):n.createElement(L,{result:e},t)}},68647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(56422),s=r(54320);const a=function({server:e}){return n.createElement(i.x,{level:i.N.Body2,numberOfLines:2},e.friendlyName,e.sourceTitle?n.createElement(i.x,{color:s.Il.Muted,level:i.N.Inherit}," "," ",e.sourceTitle):null)}},30946:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(22222),i=r(74226),s=r(47276),a=r(35076),o=r(45071),l=r(53472),c=r(99388),d=r(35204),u=r(33434),p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const b=(0,u.Z)((function(e=c.BC){return(0,n.P1)(o.Z,l.Z,((t,r)=>{var n;const o=(0,a.Z)({serverIdentifier:s.X,providerIdentifier:i.IS});return(null!=(n=r.results[o])?n:[]).filter((e=>e.id!==d.pN.Plex||t.includes(i.uk))).map((t=>{return r=((e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&f(e,r,t[r]);return e})({},t),n={results:t.results.slice(0,e)},m(r,h(n));var r,n}))}))}))},23441:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(22222),i=r(74226),s=r(8089),a=r(73788),o=r(99318),l=r(22502),c=r(40870),d=r(53472),u=r(99388),p=r(35204),m=r(40692),h=r(41295),g=r(33434),y=Object.defineProperty,v=Object.defineProperties,f=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))Z.call(t,r)&&P(e,r,t[r]);if(b)for(var r of b(t))S.call(t,r)&&P(e,r,t[r]);return e},E=(e,t)=>v(e,f(t));function w(e){const t=t=>e.findIndex((e=>e.machineIdentifier===t));return(e,r)=>{const n=(0,s.Z)(e.sourceURI).serverIdentifier,i=(0,s.Z)(r.sourceURI).serverIdentifier;return t(n)-t(i)}}const C=(0,n.P1)(c.Z,(e=>e.map((([e])=>e)))),M=(0,g.Z)((function(e=u.BC){return(0,n.P1)(d.Z,C,((t,r)=>{var n,c,d;const{results:u}=t,g=Object.keys(u),y=[{id:p.pN.MediaLibraries,title:(0,a.Z)("Media Libraries"),results:[]},{id:p.pN.Tuners,title:(0,a.Z)("Live TV (Tuner)"),results:[]}];for(let t=0;t<g.length;t++){const a=g[t],v=u[a],{providerIdentifier:f}=(0,s.Z)(a);if(!v||i.wB(f,i.IS))continue;const b=i.wB(f,i.Ll)?1:0,Z=y[b].results;for(let e=0;e<v.length;e++){const t=v[e];if((0,h.jc)(t)){const e=E(I({},t.item),{title:(0,m.Z)(null!=(n=t.item.title)?n:""),parentTitle:(0,m.Z)(null!=(c=t.item.parentTitle)?c:""),grandparentTitle:(0,m.Z)(null!=(d=t.item.grandparentTitle)?d:"")}),i=Z.find((t=>{var r,n,i;if((0,h.PD)(t)&&t.type===e.type&&t.subtype===e.subtype){if(e.type===o.pG.Photo||e.subtype===o.y_.Photo||e.type===o.pG.PhotoAlbum)return!1;const s=E(I({},t),{title:(0,m.Z)(null!=(r=t.title)?r:""),parentTitle:(0,m.Z)(null!=(n=t.parentTitle)?n:""),grandparentTitle:(0,m.Z)(null!=(i=t.grandparentTitle)?i:"")});return s.guid===e.guid&&e.type!==o.pG.Track||(e.parentTitle?s.title===e.title&&s.parentTitle===e.parentTitle&&s.grandparentTitle===e.grandparentTitle:e.year&&s.title===e.title&&s.year===e.year)}return!1}));i&&(0,h.PD)(i)?(t.score>i.score&&(i.score=t.score),i.items.push(t),i.items.sort(w(r))):Z.push({searchType:p.Bk.Metadata,score:t.score,type:e.type,subtype:e.subtype,guid:e.guid,title:t.item.title,parentTitle:t.item.parentTitle,grandparentTitle:t.item.grandparentTitle,year:e.year,items:[t]})}else if((0,h.g$)(t)){const e=t.item,n=Z.find((t=>!!(0,h.$D)(t)&&e.tag===t.title&&(e.tagType===t.type||(0,l.Z)(e.tagType)&&(0,l.Z)(t.type))));n&&(0,h.$D)(n)?(t.score>n.score&&(n.score=t.score),n.items.push(t),n.items.sort(w(r))):Z.push({searchType:p.Bk.Tag,score:t.score,title:e.tag,type:e.tagType,items:[t]})}else if((0,h.EX)(t)){const e=t.item,n=Z.find((t=>!!(0,h.Aq)(t)&&e.title===t.title));n&&(0,h.Aq)(n)?(t.score>n.score&&(n.score=t.score),n.items.push(t),n.items.sort(w(r))):Z.push({searchType:p.Bk.Directory,score:t.score,title:e.title,items:[t]})}}y[b].results=Z.sort(((e,t)=>t.score-e.score)).slice(0,e)}return y}))}))},34908:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(87242);const i=(0,r(34219).Z)("disabledUniversalSearchIdentifiers"),s=(0,n.Z)(i,(e=>e))},40870:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(22222),i=r(17939),s=r(46898),a=r(21604),o=r(9278),l=r(33803),c=r(181),d=r(17614);const u=(0,i.Z)((0,n.P1)(s.Z,a.Z,c.Z,o.Z,((e,t,r,n)=>{var i;const s=[];for(const r of t){if(r.isCloud)continue;const t=r.providers,n=[];for(const r of t){const t=null!=(i=e[r])?i:l.Z;n.push(t)}if(r.isConnected&&r.isFullServer){const e=(0,d.Z)(r);s.push([e,n])}}return n&&s.push([r,[n]]),s})),(e=>e))},53472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(18585);const s=(0,n.P1)(i.Z,(e=>e.universalSearch))},99388:(e,t,r)=>{"use strict";r.d(t,{BC:()=>H,ZP:()=>J});var n=r(19864),i=r(39166),s=r(43508),a=r(38375),o=r(77072),l=r(74226),c=r(70777),d=r(35076),u=r(73788),p=r(99318),m=r(25004),h=r(12587),g=r(93644),y=r(181),v=r(15488),f=r(98708),b=r(35204),Z=r(86832),S=r(89769),P=r(49227);function I(e){let t;switch(e.tagType){case p.dx.Actor:case p.dx.Director:t=b.Sc.People;break;case p.dx.Place:t=b.Sc.Photos}if(!t)switch(e.librarySectionType){case b.bw.Movies:t=b.Sc.Movies;break;case b.bw.TV:t=b.Sc.TV;break;case b.bw.Music:t=b.Sc.Music;break;case b.bw.Photos:t=b.Sc.Photos}return t}function E(e,t){if((0,S.Z)(t))return b.Sc.LiveTV;if(e.isPlaylist)switch(e.playlistType){case p.DD.Video:return b.Sc.Movies;case p.DD.Audio:return b.Sc.Music;case p.DD.Photo:return b.Sc.Photos;default:return void Z.Z.warn(`[Search] playlistType ${e.playlistType} not supported`)}const r=(0,P.Z)(e.type,e.subtype);if(r)return r;Z.Z.warn(`[Search] Could not map ${e.type},${e.subtype} to SearchType`)}var w=r(37579),C=(r(32903),r(40692)),M=r(41295);function D({result:e,query:t,server:r}){const n=function(e){return e.searchType===b.Bk.Tag?[e.item.tag]:e.searchType===b.Bk.Channel?[e.item.title]:[e.item.titleSort,e.item.title]}(e).map((e=>e?(0,C.Z)(e):void 0)),i=(0,C.Z)(t).trim(),s=new RegExp(`^${i}$`,"gi"),a=new RegExp(`(?:^|\\W+)${i}(?:$|\\W+.*)`,"gi"),o=new RegExp(`(?:^|\\W+)${i}.*`,"gi"),l=new RegExp(`^${i}`,"gi"),c=n.some((e=>!!e&&s.test(e))),d=n.some((e=>!!e&&a.test(e))),u=n.some((e=>!!e&&o.test(e))),m=n.some((e=>!!e&&l.test(e)));let h=0;return c&&!(!r.isFullOwnedServer&&(0,M.jc)(e)&&e.item.type===p.pG.Collection||(0,M.g$)(e)&&e.item.tagType===p.dx.PhotoAutotag)&&(h=100),!h&&d&&((0,M.jc)(e)&&(e.item.type===p.pG.Movie||e.item.type===p.pG.Show||e.item.type===p.pG.Artist||e.item.type===p.pG.Album||e.item.type===p.pG.Person)||(0,M.g$)(e)&&e.item.tagType!==p.dx.PhotoAutotag)&&(h=80),!h&&u&&(h=60),h&&!c&&d&&m&&(h+=5),h>0&&!c&&(0,M.jc)(e)&&(e.item.type===p.pG.Movie||e.item.type===p.pG.Show)&&(h+=10),h>0&&!r.isFullOwnedServer&&(h/=2),(h>0&&(0,M.jc)(e)&&(e.item.type===p.pG.Track||e.item.type===p.pG.Episode||e.item.type===p.pG.Photo)||(0,M.g$)(e)&&(e.item.tagType===p.dx.PhotoAutotag||e.item.tagType===p.dx.Actor||e.item.tagType===p.dx.Director||e.item.tagType===p.dx.Writer))&&(h-=h/2),e.score=h/100,e}var O=r(17131),T=r(37350),x=r(69093),A=r(42611),k=Object.defineProperty,N=Object.defineProperties,R=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,U=(e,t,r)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&U(e,r,t[r]);if(L)for(var r of L(t))V.call(t,r)&&U(e,r,t[r]);return e},B=(e,t)=>N(e,R(t)),_=(e,t)=>{var r={};for(var n in e)j.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&L)for(var n of L(e))t.indexOf(n)<0&&V.call(e,n)&&(r[n]=e[n]);return r};const z=[p.dx.Actor,p.dx.Director,p.dx.Genre],H=30;function W(e){var t;const r=(0,g.Z)(e,h.zW.Settings);return null==(t=null==r?void 0:r.settings)?void 0:t.find((({id:e})=>e===h.Fk.IncludeMetadataInSearch))}function G(e,t){return(0,w.Z)(e).some((e=>t.includes(e)))}function Q(e,t,r){const n={results:[],itemStates:{}};for(let i=0;i<e.length;i++){const s=e[i];if("Metadata"in s){const{metadataItem:e,metadataItemStates:i}=(0,T.Z)({server:t,provider:r,data:B(F({},s.Metadata),{userState:!t.isCloud&&void 0}),container:{}});if(t.isCloud&&e.isAdult)continue;const a=B(F({},s),{searchType:b.Bk.Metadata,source:e.source,sourceURI:e.sourceURI,item:e}),o=s.availabilityPlatforms;(null==o?void 0:o.length)&&(a.availabilityPlatforms=o),n.results.push(a),Object.assign(n.itemStates,i)}if("Channel"in s){const e=`${s.Channel.source}/${s.Channel.id}`,t=B(F({},s),{searchType:b.Bk.Channel,source:s.Channel.source,sourceURI:e,item:s.Channel});n.results.push(t)}if("Directory"in s&&"tagType"in s.Directory){const e=(0,d.Z)({serverIdentifier:t.machineIdentifier,providerIdentifier:r.identifier}),i=`${e}${s.Directory.key}`,a=B(F({},s),{searchType:b.Bk.Tag,source:e,sourceURI:i,item:s.Directory});n.results.push(a)}if("Directory"in s&&"title"in s.Directory){const{metadataItem:e,metadataItemStates:i}=(0,T.Z)({server:t,provider:r,data:B(F({},s.Directory),{userState:!t.isCloud&&void 0}),container:{}});if(t.isCloud&&e.isAdult)continue;const a=B(F({},s),{searchType:b.Bk.Directory,source:e.source,sourceURI:e.sourceURI,item:e});n.results.push(a),Object.assign(n.itemStates,i)}}return n}function*$({query:e,server:t,provider:r,searchPivot:i,searchTypes:s,searchFeature:a}){var l,u,g;const y=(0,d.Z)({serverIdentifier:t.machineIdentifier,providerIdentifier:r.identifier});try{if(!a.key)throw new Error("No key found on search feature");const Z={},S=yield(0,A.Z)(o.Z),P=-1!==S.features.findIndex((e=>e.uuid===c.Xh));if(t.isCloud){if(P){const e=W(r),t=null==(l=S.optOuts.find((({key:e})=>e===v.p.IncludeMetadataInSearch)))?void 0:l.value,n=!t||t===v.l.OptIn||t===v.l.OptOutManaged&&S.isFullUser;Z.includeMetadata=!n||!S.isFullUser&&S.isSignedIn||(null==e?void 0:e.hidden)||!(null==e?void 0:e.value)?0:1}}else Z.includeCollections=1,Z.includeExternalMedia=1;const w=(yield(0,n.RE)(O.Z.get,a.key,{server:t,provider:r,params:F({query:e,limit:H,searchTypes:a.type===h.zW.UniversalSearch?s.join(","):void 0},Z),providerVersionOverride:"6.1.0"})).data.MediaContainer;let C;C="Hub"in w?function(e,t,r,n,i,s){const a={results:[],itemStates:{}};for(let o=0;o<e.length;o++){const l=e[o];if(l.Metadata)for(let e=0;e<l.Metadata.length;e++){const n=l.Metadata[e],{metadataItem:o,metadataItemStates:c}=(0,T.Z)({server:i,provider:s,data:n,container:{}});if(o.type===p.pG.Episode&&o.title===o.grandparentTitle)continue;const d=E(o,s);if(!d||!r.includes(d))continue;const u=D({result:{searchType:b.Bk.Metadata,source:o.source,sourceURI:o.sourceURI,score:-1,item:o},server:i,provider:s,query:t});a.results.push(u),Object.assign(a.itemStates,c)}if(l.Directory)for(let e=0;e<l.Directory.length;e++){const o=l.Directory[e],c=o,{reason:u,reasonTitle:p,reasonID:m}=c,h=_(c,["reason","reasonTitle","reasonID"]);if("tagType"in o){const e=I(h);if(!(n===b.mr.TopResults||e&&r.includes(e)))continue;if(n===b.mr.TopResults&&!z.includes(h.tagType))continue;const l=(0,d.Z)({serverIdentifier:i.machineIdentifier,providerIdentifier:s.identifier}),c=`${l}${o.key}`,u=D({result:{searchType:b.Bk.Tag,source:l,sourceURI:c,score:-1,item:h},server:i,provider:s,query:t});a.results.push(u)}}}return a}(w.Hub,e,s,i,t,r):"SearchResults"in w?function(e,t,r){const n={results:[],itemStates:{}};return e.forEach((e=>{const{id:i,title:s,SearchResult:a}=e,o=Q(null!=a?a:[],t,r);n.results.push({id:i,title:s,results:o.results}),Object.assign(n.itemStates,o.itemStates)})),n}(null!=(u=null==w?void 0:w.SearchResults)?u:[],t,r):Q(null!=(g=null==w?void 0:w.SearchResult)?g:[],t,r),yield(0,n.$6)([(0,n.gz)(f.Z.actions.receiveResults({source:y,searchResults:C.results})),(0,n.gz)(m.Z.actions.metadataItemStatesNormalized({metadataItemStates:C.itemStates}))]),C.results.length&&(yield(0,n.gz)(f.Z.actions.markPopulated()))}catch(e){yield(0,n.gz)(f.Z.actions.receiveResults({source:y,searchResults:[]}))}}function*K({payload:e}){const{query:t,serverProviders:r,serverSearchTypes:i,cloudSearchTypes:s,searchPivot:a}=e,o=[],c=r.every((([e,t])=>t.every((e=>(0,g.Z)(e,h.zW.UniversalSearch)))))?h.zW.UniversalSearch:h.zW.Search;for(let e=0;e<r.length;e++){const[u,p]=r[e];for(let e=0;e<p.length;e++){const r=p[e],m=l.wB(r.identifier,l.IS),y=(0,g.Z)(r,m?h.zW.UniversalSearch:c);if(!y)throw new Error("No search feature found on provider");const v=m?s:i;if(!G(r,v)){const e=(0,d.Z)({serverIdentifier:u.machineIdentifier,providerIdentifier:r.identifier});yield(0,n.gz)(f.Z.actions.receiveResults({source:e,searchResults:[]}));continue}const b=yield(0,n.rM)($,{query:t,server:u,provider:r,searchPivot:a,searchTypes:v,searchFeature:y});o.push(b)}}yield(0,n.$6)(o.map((e=>(0,n.v_)(e)))),yield(0,n.gz)(f.Z.actions.markPopulated())}function*q({payload:e}){const{includeMetadataInSearch:t}=e;try{const e=yield(0,A.Z)(y.Z),r=yield(0,A.Z)(a.Z),s=W(r);if(!s)throw new Error("Setting not found");yield(0,n.RE)(O.Z.put,s.key,{server:e,provider:r,params:{prefs:{includeMetadataInSearch:t?1:0}}}),yield(0,n.gz)(f.Z.actions.includeMetadataInSearchSaveSucceeded()),yield(0,x.Z)((0,i.VH)({providerEntityID:r.entityID}))}catch(e){yield(0,n.gz)(f.Z.actions.includeMetadataInSearchSaveFailed()),yield(0,x.Z)((0,s.wp)((0,u.Z)("Failed to save More Ways to Watch setting. Please try again later.")))}}function*Y(){for(;;){const e=yield(0,n.Fm)(f.Z.actions.searchRequested,K);yield(0,n.qn)(f.Z.actions.reset),yield(0,n.al)(e)}}function*X(){for(;;){const e=yield(0,n.Fm)(f.Z.actions.includeMetadataInSearchSaveRequested,q);yield(0,n.qn)(f.Z.actions.reset),yield(0,n.al)(e)}}function*J(){yield(0,n.$6)([(0,n.rM)(Y),(0,n.rM)(X)])}},98708:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(85229),i=r(35076),s=r(35204),a=r(32601);const o={isPending:!1,isPopulated:!1,isSavingIncludeMetadataInSearch:!1,error:null,pivot:s.mr.TopResults,results:{},sourcesIsFetched:{}},l=(0,n.oM)({name:"universalSearch",initialState:o,reducers:{reset:(e,t)=>o,clearResults(e,t){e.isPending=!1,e.isPopulated=!1,e.error=null,e.results={},e.sourcesIsFetched={}},markPending(e,t){(0,a.er)(e)},markPopulated(e,t){(0,a.vv)(e)},markCancelled(e,t){(0,a.EA)(e)},receiveResults(e,{payload:t}){const{searchResults:r,source:n}=t;e.results[n]=r,void 0!==e.sourcesIsFetched[n]&&(e.sourcesIsFetched[n]=!0)},searchRequested(e,{payload:t}){t.serverProviders.filter((([e])=>!e.isCloud)).forEach((([t,r])=>{r.forEach((r=>{const n=(0,i.Z)({serverIdentifier:t.machineIdentifier,providerIdentifier:r.identifier});e.sourcesIsFetched[n]=!1}))})),e.pivot=t.searchPivot,(0,a.er)(e)},includeMetadataInSearchSaveRequested(e,t){e.isSavingIncludeMetadataInSearch=!0},includeMetadataInSearchSaveSucceeded(e,t){e.isSavingIncludeMetadataInSearch=!1},includeMetadataInSearchSaveFailed(e,t){e.isSavingIncludeMetadataInSearch=!1}}})},35204:(e,t,r)=>{"use strict";r.d(t,{Bk:()=>n,Sc:()=>i,bw:()=>s,mr:()=>a,ZA:()=>o,pN:()=>l});var n=(e=>(e[e.Metadata=0]="Metadata",e[e.Directory=1]="Directory",e[e.Tag=2]="Tag",e[e.Channel=3]="Channel",e[e.RecentSearch=4]="RecentSearch",e[e.ShowMore=5]="ShowMore",e[e.OpenSearchResultsPage=6]="OpenSearchResultsPage",e))(n||{}),i=(e=>(e.LiveTV="livetv",e.Movies="movies",e.Music="music",e.OtherVideos="otherVideo",e.People="people",e.Photos="photos",e.TV="tv",e))(i||{}),s=(e=>(e[e.Movies=1]="Movies",e[e.TV=2]="TV",e[e.Music=8]="Music",e[e.Photos=13]="Photos",e))(s||{}),a=(e=>(e.LiveTV="livetv",e.MoviesTV="moviesTV",e.Music="music",e.OtherVideos="otherVideo",e.People="people",e.Photos="photos",e.TopResults="top",e))(a||{}),o=(e=>(e.LiveTV="liveTv",e.MoviesTV="moviesTv",e.Music="music",e.OtherVideos="otherVideo",e.People="people",e.Photos="photos",e.TopResults="topResults",e))(o||{}),l=(e=>(e.External="external",e.MediaLibraries="mediaServers",e.Plex="plex",e.Tidal="tidal",e.Tuners="tuners",e))(l||{})},16708:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(8089),i=r(41295);function s(e){if(!(!e||(0,i.Em)(e)||(0,i.Fl)(e)||(0,i.AA)(e)||(0,i.vO)(e)))return(0,n.Z)(e.sourceURI)}},74723:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(35204);function i(e,t){const r=[...e];return t.forEach((t=>{t.id===n.pN.Tidal?r.splice(Math.max(e.length-1,0),0,t):r.push(t)})),r}},3287:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(73788),i=r(35204);const s=function(e){switch(e){case i.mr.LiveTV:return(0,n.Z)("Live TV");case i.mr.MoviesTV:return(0,n.Z)("Movies & Shows");case i.mr.Music:return(0,n.Z)("Music");case i.mr.OtherVideos:return(0,n.Z)("Other Videos");case i.mr.People:return(0,n.Z)("People");case i.mr.Photos:return(0,n.Z)("Photos");case i.mr.TopResults:return(0,n.Z)("All")}}},95699:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(99318),i=r(89715),s=r(7650),a=r(91085),o=r(43549),l=r(41295),c=r(86027),d=r(55721);function u(e,t,r){if(!e||(0,l.AA)(e)||(0,l.Fl)(e)||(0,l.vO)(e)||(0,l.Em)(e))return;let u;if(e.context&&void 0!==e.row&&void 0!==e.column&&(u=(0,a.VJ)([e.context,e.row,e.column])),(0,l.jc)(e)&&t.machineIdentifier&&r.identifier){const{item:s}=e,a=(0,i.Z)(s,s.type===n.pG.Track?"parentKey":"key");return a?(0,c.Z)(t.machineIdentifier,r.identifier,{key:a,legacy:s.type===n.pG.PhotoAlbum?1:void 0,context:u},s.playlistType):void 0}if((0,l.EX)(e)){const{item:n}=e;return(0,d.Z)(t.machineIdentifier,r.identifier,{key:n.key,context:u})}if((0,l.g$)(e)){const{item:n}=e,i=(0,s.Z)(r,String(n.librarySectionID));return(0,o.Z)({server:t,provider:r,tag:n,contentDirectory:i})}}},49227:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(86832),i=r(99318),s=r(35204);function a(e,t){switch(e){case i.pG.Clip:switch(t){case i.y_.Photo:return s.Sc.Photos;default:return s.Sc.OtherVideos}case i.pG.Movie:return s.Sc.Movies;case i.pG.Show:case i.pG.Season:case i.pG.Episode:return s.Sc.TV;case i.pG.Album:case i.pG.Artist:case i.pG.Track:return s.Sc.Music;case i.pG.Photo:case i.pG.PhotoAlbum:return s.Sc.Photos;case i.pG.Person:return s.Sc.People;case i.pG.Collection:switch(t){case i.y_.Movie:return s.Sc.Movies;case i.y_.Show:case i.y_.Season:case i.y_.Episode:return s.Sc.TV;case i.y_.Album:case i.y_.Artist:case i.y_.Track:return s.Sc.Music}}e!==i.pG.Playlist&&n.Z.warn(`Unknown metadataType (${e}) and (${t}) in getSearchTypeForMetadataType`)}},37579:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(74226),i=r(12587),s=r(93644),a=r(89769),o=r(35204),l=r(49227);function c(e){const t=new Set;if(n.wB(e.identifier,n.IS))return[o.Sc.Movies,o.Sc.Music,o.Sc.TV,o.Sc.LiveTV,o.Sc.People];if((0,a.Z)(e))return[o.Sc.LiveTV];const r=(0,s.Z)(e,i.zW.Content);if(!(null==r?void 0:r.directories))return[];const{directories:c}=r;for(let e=0;e<c.length;e++){const r=c[e],n=r.type?(0,l.Z)(r.type,r.subtype):void 0;n&&t.add(n),n!==o.Sc.Movies&&n!==o.Sc.TV||t.add(o.Sc.People)}return Array.from(t)}},61683:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(74226),i=r(70777),s=r(14685),a=r(35204);const o=function({userFeatures:e,userServices:t,userProviderIdentifiers:r}){const o=[];return r.includes(n.vP)&&e.some((({uuid:e})=>e===i.TA))&&o.push(a.Sc.LiveTV),(r.includes(n.uk)||r.includes(n.Xp)&&e.some((({uuid:e})=>e===i.Xh)))&&o.push(a.Sc.Movies,a.Sc.TV,a.Sc.People),r.includes(n.xF)&&(0,s.Z)(t,"tidal")&&o.push(a.Sc.Music),o}},77826:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(37579);function i(e){const t=new Set;for(let r=0;r<e.length;r++){const[i,s]=e[r];if(!i.isCloud)for(let e=0;e<s.length;e++){const r=s[e];(0,n.Z)(r).forEach((e=>{t.add(e)}))}}return Array.from(t)}},63503:(e,t,r)=>{"use strict";function n(e){return e.sourceTitle?`${e.sourceTitle}  ${e.friendlyName}`:e.friendlyName}r.d(t,{Z:()=>n})},40692:(e,t,r)=>{"use strict";function n(e){return e.replace(/\s&\s/g," and ").replace(/-/g," ").replace(/(~|`|!|@|#|$|%|^|&|\*|\(|\)|{|}|\[|\]|;|:|"|'|<|,|\.|>|\?|\/|\\|\||-|_|\+|=)/g,"").replace(/\s{2,}/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}r.d(t,{Z:()=>n})},41295:(e,t,r)=>{"use strict";r.d(t,{Em:()=>i,AA:()=>s,vO:()=>a,Fl:()=>o,jc:()=>l,PD:()=>c,g$:()=>d,s_:()=>u,$D:()=>p,EX:()=>m,Aq:()=>h});var n=r(35204);function i(e){return!!e&&"items"in e}function s(e){return!!e&&e.searchType===n.Bk.ShowMore}function a(e){return!!e&&e.searchType===n.Bk.OpenSearchResultsPage}function o(e){return!!e&&e.searchType===n.Bk.RecentSearch}function l(e){return!!e&&e.searchType===n.Bk.Metadata}function c(e){return!!e&&e.searchType===n.Bk.Metadata}function d(e){return!!e&&e.searchType===n.Bk.Tag}function u(e){return!!e&&e.searchType===n.Bk.Channel}function p(e){return!!e&&e.searchType===n.Bk.Tag}function m(e){return!!e&&e.searchType===n.Bk.Directory}function h(e){return!!e&&e.searchType===n.Bk.Directory}},68807:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(28216),s=r(45071),a=r(45186),o=r(34908),l=r(40870),c=r(98708),d=r(35204);var u=r(61683),p=r(77826);function m(e,t){const r=(0,i.I0)(),m=(0,i.v9)(a.Z),h=(0,i.v9)(s.Z),g=(0,i.v9)(l.Z),y=(0,i.v9)(o.Z),v=(0,n.useMemo)((()=>g.filter((([e])=>!y[e.machineIdentifier]))),[y,g]),f=(0,n.useMemo)((()=>function(e){switch(e){case d.mr.LiveTV:return[d.Sc.LiveTV];case d.mr.MoviesTV:return[d.Sc.Movies,d.Sc.TV];case d.mr.Music:return[d.Sc.Music];case d.mr.OtherVideos:return[d.Sc.OtherVideos];case d.mr.People:return[d.Sc.People];case d.mr.Photos:return[d.Sc.Photos];case d.mr.TopResults:return[d.Sc.LiveTV,d.Sc.Movies,d.Sc.Music,d.Sc.People,d.Sc.TV]}}(t)),[t]),b=(0,n.useMemo)((()=>{const e=(0,u.Z)({userFeatures:m.features,userServices:m.services,userProviderIdentifiers:h});return f.filter((t=>e.includes(t)))}),[f,m.features,m.services,h]),Z=(0,n.useMemo)((()=>{const e=(0,p.Z)(v);return f.filter((t=>e.includes(t)))}),[v,f]);return(0,n.useCallback)((()=>{e&&r(c.Z.actions.searchRequested({query:e,serverProviders:v,searchPivot:t,serverSearchTypes:Z,cloudSearchTypes:b}))}),[b,r,v,t,e,Z])}},52463:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(22222),i=r(12174),s=r(45186);const a=(0,n.P1)(i.Z,s.Z,((e,t)=>{const r=Object.values(e).find((e=>e.id===t.id));return!!(null==r?void 0:r.admin)}))},53295:(e,t,r)=>{"use strict";function n(e=[]){let t=0;for(let r=0;r<e.length;r++)t+=e[r].sharedItemsCount;return t}r.d(t,{D:()=>n})},35348:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(85229),i=r(32601);const s={isPending:!1,isPopulated:!1,error:null},a=(0,n.oM)({name:"verificationEmail",initialState:s,reducers:{reset:()=>s,sendVerificationEmailRequested(e){(0,i.er)(e),e.isPopulated=!1},sendVerificationEmailSucceeded(e){(0,i.vv)(e)},sendVerificationEmailFailed(e,{payload:t}){(0,i.VQ)(e,t.error),e.isPopulated=!1}}})},95385:(e,t,r)=>{"use strict";r.d(t,{Z:()=>V});var n=r(67294),i=r(62291),s=r(91085),a=r(28216),o=r(1802),l=r(71078),c=r(78386),d=r(99),u=r(64188),p=r(56422),m=r(54320),h=r(75404);const g="main";var y=r(73788),v=r(181),f=r(4681),b=r(20896),Z=r(79347),S=r(783),P=r(78535),I=r(90696),E=r(83073),w=r(74861);function C({origin:e}){return(0,w.Z)({pane:"learnMore",origin:e}),n.createElement(u.K,{align:m.xM.Center,gap:m.$u.XL},n.createElement(p.x,{color:m.Il.Muted,level:p.N.Heading3},(0,y.Z)("Learn More")),n.createElement(u.K,{gap:m.$u.L},n.createElement(p.x,{level:p.N.Body1},(0,y.Z)("This is an account setting that synchronizes your data across all Plex Media Servers you have access to, Plex Movies & TV, and Discover.")),n.createElement(p.x,{level:p.N.Body1},(0,y.Z)("When you watch or rate a movie or show, "),n.createElement(E.r,{color:m.Il.Accent,href:"https://support.plex.tv/articles/sync-watch-state-and-ratings/",target:"_blank"},(0,y.Z)("Plex will store and sync the updated status for that item. ")),(0,y.Z)("Plex does not collect or store any information about where items are played, or whether status changes result from watching items or manually marking them watched. This feature does not collect or sync information about in-progress or partial viewings.")),n.createElement(p.x,{level:p.N.Body1},(0,y.Z)("Plex does not collect filenames from any Plex Media Server and individual user data is never shared with third parties without your consent."))))}var M=r(99428),D=r(50974);function O({icon:e,size:t}){return n.createElement("div",{className:"GradientIcon-gradient-x2CwCY"},n.createElement(e,{size:t}))}function T({onLearnMore:e,origin:t}){return(0,w.Z)({pane:g,origin:t}),n.createElement(d.k,{alignItems:m.xM.Center,gap:m.$u.XL,justifyContent:m.xM.Center,orientation:m.i5.Vertical},n.createElement(O,{icon:D.J,size:m.$u.XXL}),n.createElement(p.x,{align:m.xM.Center,level:p.N.Heading2},(0,y.Z)("Sync Your Watch State and Ratings")),n.createElement(u.K,{width:"95%"},n.createElement(p.x,{level:p.N.Body1},(0,y.Z)("Keep your watch state and ratings in sync across the entire Plex platform! This includes movies and shows you watch on Plex Media Servers as well as anything you stream from Plex.")),n.createElement(M.A,{color:m.Il.Accent,onPress:e},(0,y.Z)("Learn more"))))}var x=r(48321);function A({modalState:e,origin:t,page:r}){const i=(0,a.I0)(),s=(0,b.Z)(),E=(0,a.v9)(v.Z),{viewStateSync:{consent:w},isUpdating:M}=(0,a.v9)(S.Z),[D,O]=(0,n.useState)(w),[A,k]=(0,n.useState)(r),N=(0,x.Z)(M),R=A===I.ZJ.LearnMore?"learnMore":g,L=(0,n.useCallback)((()=>{k(I.ZJ.LearnMore),s({action:h.gP,pane:g,origin:t})}),[t,s]);(0,n.useEffect)((()=>{e.isOpen&&!N&&O(w)}),[e.isOpen,N,w]),(0,n.useEffect)((()=>{N&&!M&&e.onClose()}),[M,e,N]),(0,n.useEffect)((()=>{e.isOpen&&k(r)}),[e.isOpen,r]);const j=(0,n.useCallback)((()=>{k(I.ZJ.Default)}),[]),V=(0,n.useCallback)((()=>{i(P.Z.actions.updateViewStateSyncConsent({consent:!0,server:E})),s({action:h.eJ,pane:R,origin:t})}),[E,i,t,R,s]),U=(0,n.useCallback)((()=>{D||null===D?(i(P.Z.actions.updateViewStateSyncConsent({consent:!1,server:E})),s({action:h.Nu,pane:R,origin:t})):!1===D&&e.onClose()}),[E,D,i,e,t,R,s]);return n.createElement(Z.Z,{backgroundClassName:"ViewStateSyncModal-background-Bw5tFk UpsellModal-backgroundContainer-RikWr2",header:(0,y.Z)("View State Sync"),isOpen:e.isOpen,onClose:e.onClose},A===I.ZJ.LearnMore?n.createElement(f.Z,{className:"ViewStateSyncModal-goBack-cDDcxV",onPress:j},n.createElement(c.X,{gap:m.$u.XXS,verticalAlign:m.xM.Center},n.createElement(l.e,{color:m.Il.Muted,size:m.$u.L}),n.createElement(p.x,{color:m.Il.Muted,level:p.N.Body1},(0,y.Z)("Back")))):null,n.createElement("div",{className:"ViewStateSyncModal-content-iUu4o2"},n.createElement(d.k,{alignItems:m.xM.Center,gap:m.$u.XL,height:"100%",justifyContent:m.xM.Center,orientation:m.i5.Vertical},A===I.ZJ.LearnMore?n.createElement(C,{origin:t}):n.createElement(T,{origin:t,onLearnMore:L}),n.createElement(u.K,{align:m.xM.Center,gap:m.$u.XS},n.createElement(c.X,{gap:m.$u.S},n.createElement(o.zx,{color:m.Il.Accent,isWaiting:M,onPress:D?U:V},D?(0,y.Z)("Stop Syncing now"):(0,y.Z)("Yes, Start Syncing")),n.createElement(o.zx,{isWaiting:M,onPress:D?e.onClose:U},D?(0,y.Z)("Back"):(0,y.Z)("No"))),D?null:n.createElement(p.x,{color:m.Il.Muted,level:p.N.Body3},(0,y.Z)("You can change this setting at any time."))))))}var k=Object.defineProperty,N=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function V(e){return n.createElement(s.ZP,{metricsPage:i.jm},n.createElement(A,((e,t)=>{for(var r in t||(t={}))R.call(t,r)&&j(e,r,t[r]);if(N)for(var r of N(t))L.call(t,r)&&j(e,r,t[r]);return e})({},e)))}},70376:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(28216),i=r(70777),s=r(81017),a=r(15058);function o(){const e=(0,n.v9)((0,a.Z)(i.jm)),t=(0,n.v9)(s.Z);return e&&t.filter((e=>{var t;return null==(t=e.ownerFeatures)?void 0:t.includes(i.jm)})).length>0}},33180:(e,t,r)=>{"use strict";r.d(t,{D7:()=>T,ZP:()=>x});var n=r(24970),i=r(85229),s=r(51146),a=r(27649),o=r(8483),l=r(54834),c=r(93888),d=r(77502),u=r(36155),p=r(68173),m=r(8718),h=r(17131),g=r(37350),y=r(69093),v=r(42611),f=r(30547),b=Object.defineProperty,Z=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function*C({payload:e}){const{metadataKey:t,channel:r,prePlayRouteParams:i,server:s,provider:a,metricsPage:o,metricsContextTuple:l}=e;r?yield(0,n.RE)(M,s,a,r,o,l):t?yield(0,n.RE)(D,s,a,t,o,l,i):(0,m.Z)("home",{},!0)}function*M(e,t,r,i,a){try{yield(0,y.Z)((0,s.lS)({serverEntityID:e.entityID,providerEntityID:t.entityID,metricsPage:i,metricsProperties:{setting:o.Y,contextTuple:a},options:{type:l.pX,identifier:r}})),yield(0,n.RE)(O)}catch(e){}finally{(0,m.Z)("home",{},!0)}}function*D(e,t,r,i,s,l={}){var d;const u=(v=((e,t)=>{for(var r in t||(t={}))I.call(t,r)&&w(e,r,t[r]);if(P)for(var r of P(t))E.call(t,r)&&w(e,r,t[r]);return e})({},l),Z(v,S({autoplay:void 0})));var v;let b;try{const l=(yield(0,n.RE)(h.Z.get,r,{server:e,provider:t})).data.MediaContainer,{Metadata:v=[]}=l,Z=((e,t)=>{var r={};for(var n in e)I.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&P)for(var n of P(e))t.indexOf(n)<0&&E.call(e,n)&&(r[n]=e[n]);return r})(l,["Metadata"]),[S]=v;if(!S)return;const w=(0,g.Z)({server:e,provider:t,data:S,container:Z});b=w.metadataItem;const C=w.metadataItemStates[b.sourceURI];yield(0,y.Z)((0,c.vr)({containerServer:e,containerProvider:t,server:e,provider:t,metadataItem:b,metadataItemState:C,metricsPage:i,legacyAction:a.wA({metricsProperties:{setting:o.Y,contextTuple:s}})})),yield(0,n.RE)(O)}catch(e){}finally{const n=null==(d=(0,f.Z)(e,t,r,u,(null==b?void 0:b.isPlaylist)?b.playlistType:void 0))?void 0:d.replace("#!","");n?p.Z.replace(n):(0,m.Z)("home",{},!0)}}function*O(){let e=0;for(;!((yield(0,v.Z)((0,d.Z)(u.G.AudioVideo,"isOpen")))||e>2e3);)e+=100,yield(0,n.gw)(100)}const T=(0,i.PH)("watchNowSaga/watchNow");function*x(){yield(0,n.A7)(T.type,C)}},3021:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(67294),i=r(64188),s=r(78386),a=r(56422),o=r(54320),l=r(73788),c=r(85750),d=r(22527),u=r(81052),p=r(37903),m=r(7256),h=r(37703),g=r(43017),y=r(55509),v=r(35419);function f(e){switch(e){case y._B.Public:return(0,l.Z)("Public");case y._B.Friends:return(0,l.Z)("Friends Only");case y._B.Private:return(0,l.Z)("Private");default:return""}}function b({mode:e,currentMode:t,title:r,icon:i,onPress:a}){const l=(0,n.useCallback)((()=>{a(e)}),[e,a]);return n.createElement(p.CG,{isChecked:t===e,onCheckedChanged:l},n.createElement(s.X,{gap:o.$u.S,verticalAlign:o.xM.Center},n.createElement(i,null),r))}function Z({role:e,showLabel:t,isOnboarding:r}){const i=(0,h.b)(),{data:s,isSuccess:Z,refetch:S,isLoading:P}=(0,v.gy)({},{refetchOnMountOrArgChange:!0,skip:r}),[I,{isError:E}]=(0,v.pV)(),[w,C]=(0,n.useState)(r?y._B.Friends:null==s?void 0:s.userPrivacy[e]);(0,n.useEffect)((()=>{s&&C(s.userPrivacy[e])}),[s,e]),(0,n.useEffect)((()=>{E&&S()}),[E,S]),(0,n.useEffect)((()=>{r&&I({input:{[g.z.Ratings]:y._B.Friends,[g.z.Watchlist]:y._B.Friends,[g.z.WatchHistory]:y._B.Friends}})}),[r,I]);const M=(0,n.useCallback)((t=>{I({input:{[e]:t}}),C(t)}),[e,I]);return r||Z&&(w||!P)?n.createElement(p.v2,{isOpen:i.isOpen,onOpenChange:i.onOpenChange},n.createElement(p.bF,null,n.createElement(c.l,{"aria-label":(0,l.Z)("Open privacy settings"),isOpen:i.isOpen,type:"button"},w===y._B.Friends?n.createElement(d.j,null):n.createElement(u.p,null),t&&w?n.createElement(a.x,null,f(w)):null)),n.createElement(p.Dv,null,n.createElement(b,{currentMode:w,icon:u.p,mode:y._B.Private,title:f(y._B.Private),onPress:M}),n.createElement(b,{currentMode:w,icon:d.j,mode:y._B.Friends,title:f(y._B.Friends),onPress:M}))):n.createElement(m.$,{size:o.$u.XXS})}var S=r(91824),P=r(99485);function I({isOpen:e,buttonLabel:t,isOnboarding:r,onClose:c}){const d=(0,n.useMemo)((()=>[{title:(0,l.Z)("My Watch History"),role:g.z.WatchHistory},{title:(0,l.Z)("My Ratings"),role:g.z.Ratings},{title:(0,l.Z)("My Watchlist"),role:g.z.Watchlist}]),[]);return n.createElement(S.Z,{backgroundClassName:"CommunityPrivacySettingsModal-background-F0_oHH WhatsNewModal-backgroundContainer-lSutuD UpsellModal-backgroundContainer-RikWr2",isOpen:e,onClose:c},n.createElement("div",{className:"CommunityPrivacySettingsModal-content-Bp1euO"},n.createElement(i.K,{align:o.xM.Center,gap:o.$u.XL,grow:!0,width:"100%"},n.createElement(a.x,{align:o.xM.Center,component:"h1",level:a.N.Heading2},(0,l.Z)("Youre in control")),n.createElement(a.x,{align:o.xM.Center,level:a.N.Body1},(0,l.Z)("Control which of your activities your friends can see on Plex.")),n.createElement(i.K,{width:"100%"},d.map((e=>n.createElement("div",{key:e.role,className:"CommunityPrivacySettingsModal-option-tBLRN2"},n.createElement(s.X,{align:o.xM.SpaceBetween,width:"100%"},n.createElement(a.x,{align:o.xM.Center,level:a.N.Body1},e.title),n.createElement(Z,{isOnboarding:r,role:e.role,showLabel:!0})))))),n.createElement(P.Z,{onPress:c},t),n.createElement(a.x,{align:o.xM.Center,color:o.Il.Muted,level:a.N.Body3},(0,l.Z)("If you are a resident of the United States, your Watch History setting will apply for two years, but your other choices will remain in effect until you change them. You can always withdraw your consent later in your profile.")))))}},91824:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),i=r(78386),s=r(54320),a=r(73788),o=r(84105),l=r(79347);function c({backgroundClassName:e="WhatsNewModal-backgroundContainer-lSutuD UpsellModal-backgroundContainer-RikWr2",backgroundColor:t,backgroundSrc:r,screenClassName:c="WhatsNewModal-screenWrapper-taR1DI",screenSrc:d,children:u,isDismissable:p,isOpen:m,onClose:h}){const[g,{height:y}]=(0,o.Z)(),[v,f]=(0,n.useState)(1),[b,Z]=(0,n.useState)(1),S=(0,n.useCallback)((({target:e})=>{f(e.naturalWidth),Z(e.naturalHeight)}),[]);return n.createElement(l.Z,{backgroundClassName:e,backgroundColor:t,backgroundSrc:r,header:(0,a.Z)("Discover What's New"),isDismissable:p,isOpen:m,onClose:h},n.createElement(i.X,{align:s.xM.SpaceBetween,gap:s.$u.M,grow:!0},n.createElement("div",{className:"WhatsNewModal-textContainer-LMGENn"},u),d?n.createElement("div",{className:"WhatsNewModal-screenContainer-NK2iat"},n.createElement("div",{ref:g,className:c,style:{minWidth:y*(v/b)}},n.createElement("img",{key:d,height:"100%",src:d,width:"100%",onLoad:S}))):null))}},99485:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(1802);function s({children:e,onPress:t}){return n.createElement("div",{className:"WhatsNewModalButton-container-ISYbFa"},n.createElement(i.zx,{onPress:t},e))}},12472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(67294),i=r(28216),s=r(1802),a=r(99),o=r(82818),l=r(7256),c=r(56422),d=r(54320),u=r(56925),p=r(73788),m=r(9278),h=r(44811),g=r(181),y=r(33890),v=r(83700),f=r(88398),b=r(59385),Z=r(92060),S=r(67372),P=r(98129),I=r(11897),E=r(48321);const w={option:"ChooseStreamingServicesModal-option-RtxNWY StreamingServicesOptions-option-SE2Zwj Link-link-vSsQW1",strong:"ChooseStreamingServicesModal-strong-dE60DL"};var C=Object.defineProperty,M=Object.defineProperties,D=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function k({children:e,isOpen:t,onClose:r}){const C=(0,i.I0)(),k=(0,i.v9)(g.Z),N=(0,i.v9)(m.Z),{isPending:R,isPopulated:L,error:j,isSaving:V}=(0,i.v9)(S.Z),{isPending:U,isPopulated:F,error:B}=(0,i.v9)(Z.Z),_=(0,i.v9)(P.Z),z=(0,E.Z)(V),[H,W]=(0,n.useState)(_),G=_!==H;(0,n.useEffect)((()=>{t||W(_)}),[t,_,C]),(0,n.useEffect)((()=>{z&&!V&&r()}),[V,r,z]),(0,n.useEffect)((()=>{!H&&_&&W(_)}),[H,_]),(0,n.useEffect)((()=>{t&&!N&&C((0,u.Zu)())}),[C,t,N]),(0,n.useEffect)((()=>{!t||!N||U||F||B||C(I.ZP.actions.availabilityPlatformsFetchRequested())}),[B,C,U,F,t,N]),(0,n.useEffect)((()=>{!t||!N||R||L||j||C(I.ZP.actions.preferredServicesFetchRequested())}),[C,t,R,L,j,N]);const Q=(0,n.useCallback)((e=>{H&&W(H.map((t=>{return t.platform===e?(r=((e,t)=>{for(var r in t||(t={}))T.call(t,r)&&A(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&A(e,r,t[r]);return e})({},t),n={selected:!t.selected},M(r,D(n))):t;var r,n})))}),[H]),$=(0,n.useCallback)((()=>{if(!H)return;const e=H.reduce(((e,t)=>(t.selected&&e.push(t.platform),e)),[]);C(I.ZP.actions.preferredServicesSaveRequested({preferredServices:e}))}),[C,H]);return N?n.createElement(h.ZP,{machineIdentifier:k.machineIdentifier,providerIdentifier:N.identifier},n.createElement(o.u_,{isOpen:t,onClose:r},e?n.createElement(o.iq,null,e):null,n.createElement(o.hz,{dismissLabel:(0,p.Z)("Close Streaming Services modal"),header:(0,p.Z)("Select your favorite streaming services"),onClose:r},U||R?n.createElement(a.k,{alignItems:d.xM.Center,height:"100%",justifyContent:d.xM.Center},n.createElement(l.$,null)):null,B||j?n.createElement(n.Fragment,null,n.createElement(o.fe,null,n.createElement("div",{className:w.text},n.createElement(c.x,{color:d.Il.Muted,level:c.N.Body1},(0,p.Z)("Something went wrong. Please try again later.")))),n.createElement(o.mz,null,n.createElement(o.w2,null,n.createElement(s.zx,{onPress:r},(0,p.Z)("Done"))))):null,F&&L&&!(null==H?void 0:H.length)?n.createElement(n.Fragment,null,n.createElement(o.fe,null,n.createElement("div",{className:w.text},n.createElement(b.Z,null))),n.createElement(o.mz,null,n.createElement(o.w2,null,n.createElement(s.zx,{onPress:r},(0,p.Z)("Done"))))):null,F&&L&&(null==H?void 0:H.length)?n.createElement(n.Fragment,null,n.createElement(o.fe,null,n.createElement("div",{className:w.text},n.createElement(c.x,{color:d.Il.Muted,level:c.N.Body2},(0,p.Z)('Select the other streaming services you use. Content from Plex and your selected services will be prioritized when displaying "More Ways to Watch" results and recommendations in Discover. You may also see recommendations from other services.'))),n.createElement(f.Z,{optionClassName:w.option,services:H,onOptionSelect:Q})),n.createElement(o.mz,null,n.createElement(o.w2,null,n.createElement(y.Z,{isDisabled:!G,isSpinning:V,kind:v.Z.Primary,onPress:$},(0,p.Z)("Save Changes"))))):null))):null}},88398:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(94184),i=r.n(n),s=r(67294),a=r(10462),o=r(78386),l=r(64188),c=r(56422),d=r(54320),u=r(73788),p=r(44811),m=r(9171),h=r(62376),g=r(94788),y=r(24107);const v=parseInt(y.Z.platformThumbSize,10);function f({className:e="StreamingServicesOptions-option-SE2Zwj Link-link-vSsQW1",service:t,onSelect:r}){const[n,l]=(0,p.c9)(),c=(0,m.Z)({width:v,height:v,server:n,provider:l,url:t.platformColorThumb}),u=(0,s.useCallback)((()=>{r(t.platform)}),[r,t.platform]);return s.createElement(h.Z,{className:e,onClick:u},s.createElement(o.X,{align:d.xM.SpaceBetween,verticalAlign:d.xM.Center},s.createElement(o.X,{gap:d.$u.S,verticalAlign:d.xM.Center},s.createElement("div",{className:"StreamingServicesOptions-imageContainer-eYSBST"},s.createElement(g.Z,{className:"StreamingServicesOptions-image-T2s0Ot",durationMilliseconds:0,height:v,src:c,width:v})),t.title),s.createElement("div",{className:i()("StreamingServicesOptions-iconContainer-YmXbob",t.selected&&"StreamingServicesOptions-isSelected-Z71zzB")},s.createElement(a.d,null))))}function b({optionClassName:e,services:t,onOptionSelect:r}){const n=(0,s.useMemo)((()=>function(e){const t=e.filter((e=>e.selected)),r=e.filter((e=>e.popular));return[{key:"selected",title:(0,u.Z)("My Services"),items:t},{key:"popular",title:(0,u.Z)("Popular Services"),items:r},{key:"services",title:(0,u.Z)("All Services"),items:e}]}(t).filter((e=>e.items.length>0))),[t]);return s.createElement(l.K,null,n.map((t=>t.items.length?s.createElement(s.Fragment,{key:t.key},s.createElement("div",{className:"StreamingServicesOptions-sectionTitleContainer-cLKlvI"},s.createElement(c.x,{color:d.Il.Muted,component:"h2",level:c.N.Heading6},t.title)),t.items.map(((t,n)=>s.createElement(f,{key:n,className:e,service:t,onSelect:r})))):null)))}},59385:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(28216),s=r(56422),a=r(54320),o=r(77072),l=r(28531),c=r(73788),d=r(29012),u=r(62376),p=r(83700);function m(){const e=(0,i.v9)(o.Z),t=(0,n.useMemo)((()=>{if(e.country&&Intl.DisplayNames)return new Intl.DisplayNames(e.locale?[e.locale]:[],{type:"region"}).of(e.country)}),[e.country,e.locale]);return n.createElement(s.x,{color:a.Il.Muted,level:s.N.Body1},n.createElement(d.Z,{message:t?(0,c.Z)("There are no other streaming services currently available in your region: {region}. If you believe this is an error, please report it to the {openLink}Plex Forums{closeLink}.",{region:t}):(0,c.Z)("There are no other streaming services currently available in your region. If you believe this is an error, please report it to the {openLink}Plex Forums{closeLink}."),tags:[{open:"openLink",close:"closeLink",component:u.Z,kind:p.Z.Primary,to:l.bB,target:"_blank"}]}))}},92060:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(22854);const s=(0,n.P1)(i.Z,(e=>e.availabilityPlatforms))},67372:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(22854);const s=(0,n.P1)(i.Z,(e=>e.preferredServices))},98129:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(22222),i=r(92060),s=r(67372),a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m=(0,n.P1)(i.Z,s.Z,((e,t)=>{if(e.isPopulated)return e.platforms.map((e=>{var r,n,i;return n=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({},e),i={selected:(null==(r=t.services)?void 0:r.includes(e.platform))||!1},o(n,l(i))}))}))},22854:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(22222),i=r(18585);const s=(0,n.P1)(i.Z,(e=>e.whereToWatch))},73181:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(27810);function i(e){return e.offerType===n.Nn.Buy||e.offerType===n.Nn.Rent}},11897:(e,t,r)=>{"use strict";r.d(t,{an:()=>d,ZP:()=>p});var n=r(85229),i=r(32601),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d={availabilities:{serverAvailabilities:[],providerAvailabilities:[]},isPending:!1,isPopulated:!1,error:null},u={metadataItemAvailabilities:{},availabilityPlatforms:{platforms:[],isPending:!1,isPopulated:!1,error:null},preferredServices:{services:[],isPending:!1,isPopulated:!1,isSaving:!1,error:null},watchlistRSS:{uuid:null,url:null,isPending:!1,isPopulated:!1,isCreating:!1,error:null}},p=(0,n.oM)({name:"whereToWatch",initialState:u,reducers:{reset:()=>u,availabilityPlatformsFetchRequested({availabilityPlatforms:e}){(0,i.er)(e)},availabilityPlatformsFetchSucceeded({availabilityPlatforms:e},{payload:t}){(0,i.vv)(e),e.platforms=t.availabilityPlatforms},availabilityPlatformsFetchFailed({availabilityPlatforms:e},{payload:t}){(0,i.VQ)(e,t.error)},metadataItemAvailabilitiesFetchRequested({metadataItemAvailabilities:e},{payload:t}){let r=e[t.metadataItem.sourceURI];r?r.isPopulated=!1:(r=((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({},d),e[t.metadataItem.sourceURI]=r),(0,i.er)(r)},metadataItemAvailabilitiesFetchSucceeded({metadataItemAvailabilities:e},{payload:t}){const r=e[t.sourceURI];r&&(r.availabilities=t.availabilities,(0,i.vv)(r))},metadataItemAvailabilitiesFetchFailed({metadataItemAvailabilities:e},{payload:t}){const r=e[t.sourceURI];r&&(0,i.VQ)(r,t.error)},metadataItemAvailabilitiesReset({metadataItemAvailabilities:e},{payload:t}){e[t.sourceURI]&&delete e[t.sourceURI]},preferredServicesFetchRequested({preferredServices:e}){(0,i.er)(e)},preferredServicesFetchSucceeded({preferredServices:e},{payload:t}){(0,i.vv)(e),e.services=t.preferredServices},preferredServicesFetchFailed({preferredServices:e},{payload:t}){(0,i.VQ)(e,t.error)},preferredServicesSaveRequested({preferredServices:e},t){e.isSaving=!0},preferredServicesSaveSucceeded({preferredServices:e},{payload:t}){e.isSaving=!1,e.services=t.preferredServices},preferredServicesSaveFailed({preferredServices:e}){e.isSaving=!1},watchlistRSSFetchRequested({watchlistRSS:e}){(0,i.er)(e)},watchlistRSSFetchSucceeded({watchlistRSS:e},{payload:t}){(0,i.vv)(e),e.uuid=t.uuid,e.url=t.url},watchlistRSSFetchFailed({watchlistRSS:e},{payload:t}){(0,i.VQ)(e,t.error)},watchlistRSSCreateRequested({watchlistRSS:e}){e.isCreating=!0},watchlistRSSCreateSucceeded({watchlistRSS:e},{payload:t}){e.isCreating=!1,e.uuid=t.uuid,e.url=t.url},watchlistRSSCreateFailed({watchlistRSS:e}){e.isCreating=!1},watchlistRSSDeleteRequested(e,t){},watchlistRSSDeleteSucceeded({watchlistRSS:e}){e.url=null,e.uuid=null}}})},27810:(e,t,r)=>{"use strict";r.d(t,{Nn:()=>n,LC:()=>i,oY:()=>s});var n=(e=>(e.Buy="buy",e.Free="free",e.Rent="rent",e.Subscription="subscription",e))(n||{});const i="plex";var s=(e=>(e.Server="server",e.Provider="provider",e.More="more",e))(s||{})},68173:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(90071).q_)({hashType:"hashbang"})},96994:(e,t,r)=>{"use strict";function n(e){return function(e){return!!e.v4}(e)?e.v4.root:e.root}r.d(t,{Z:()=>n})},38849:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(5977),i=r(74226),s=r(47276),a=r(20683),o=r(6459);const l=function(e,t,r){const l=function(e,t){const[r,n,a]=o.Z.prePlayActivityFeed;return e===s.X?a:t===i.Y3?r:n}(e,t),c=function(e,t){return e===s.X?{providerIdentifier:t}:t===i.Y3?{machineIdentifier:e}:{machineIdentifier:e,providerIdentifier:t}}(e,t);return"#!"+a.Z.join((0,n.Gn)(l,c),r)}},86027:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(5977),i=r(74226),s=r(47276),a=r(20683),o=r(99318),l=r(6459);const c=function(e,t,r,c){const d=function(e,t,r){const[n,a,c]=l.Z.prePlay,[d,u,p,m,h]=l.Z.playlist;if(e===s.X)switch(r){case o.DD.Video:case o.DD.Audio:return h;default:return c}else if(t===i.Y3)switch(r){case o.DD.Video:case o.DD.Audio:return d;case o.DD.Photo:return u;default:return n}switch(r){case o.DD.Video:case o.DD.Audio:return p;case o.DD.Photo:return m;default:return a}}(e,t,c),u=function(e,t){return e===s.X?{providerIdentifier:t}:t===i.Y3?{machineIdentifier:e}:{machineIdentifier:e,providerIdentifier:t}}(e,t);return"#!"+a.Z.join((0,n.Gn)(d,u),r)}},55721:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(5977),i=r(47276),s=r(20683),a=r(6459);const o=function(e,t,r){const o=a.Z.media;return e===i.X?"#!"+s.Z.join((0,n.Gn)(o,{providerIdentifier:t}),r):"#!"+s.Z.join((0,n.Gn)(o,{providerIdentifier:t,machineIdentifier:e}),r)}},31281:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(20683),i=r(28403);const s=function(e,t={},r={}){const s=(0,i.Z)(e,t,r);return n.Z.join(["#!",s])}},8718:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s,L:()=>a});var n=r(68173),i=r(28403);function s(e,t={},r={},s=!1){const a=(0,i.Z)(e,t,r);s?n.Z.replace(a):n.Z.push(a)}function a(e){s("serverSettings",{machineIdentifier:e,settingsSection:"manage",settingsGroup:"libraries"})}},6459:(e,t,r)=>{"use strict";r.d(t,{V:()=>n,Z:()=>i});const n="/settings",i={account:`${n}/account`,accountPlexTv:"/account",announcements:"/announcements",devices:`${n}/devices/:deviceTypeID?`,downloads:"/downloads",firstRunExperience:"/client-setup",home:["","/dashboard"],info:"/info",login:"/login",logout:"/logout",logs:"/logs",hybridGuide:"/live-tv/:machineIdentifier?/:providerIdentifier?",media:"/media/:machineIdentifier?/:providerIdentifier",discoverHome:"/media/tv.plex.provider.discover?source=home",onlineMediaSources:`${n}/online-media-sources`,playHistory:"/server/:machineIdentifier/playHistory",playlist:["/server/:machineIdentifier/playlist","/server/:machineIdentifier/album","/server/:machineIdentifier/provider/:providerIdentifier/playlist","/server/:machineIdentifier/provider/:providerIdentifier/album","/provider/:providerIdentifier/playlist"],prePlay:["/server/:machineIdentifier/details","/server/:machineIdentifier/provider/:providerIdentifier/details","/provider/:providerIdentifier/details"],providerSettings:"/provider/:providerIdentifier/settings",search:"/search",serverDownloadMessage:"/get-plex-media-server",serverSettings:`${n}/server/:machineIdentifier/:settingsSection/:settingsGroup`,serverSettingsPMS:`${n}/server/:machineIdentifier`,serverAwait:"/server/:machineIdentifier/await",serverSetup:"/setup/:machineIdentifier?",serverUpdate:"/server/:machineIdentifier/update",signUp:"/signUp",streamingServices:`${n}/streaming-services`,userSharingSettings:`${n}/users-sharing/:userID`,usersSharing:`${n}/users-sharing`,plexHome:`${n}/plex-home`,manageLibraryAccess:`${n}/manage-library-access`,plexHomeSharing:`${n}/plex-home/sharing/:id`,manageLibraryAccessSharing:`${n}/manage-library-access/sharing/:id`,watchlist:"/watchlist",watchNow:"/provider/:providerIdentifier/watch-now",webhooks:`${n}/webhooks`,watchlistRSS:`${n}/watchlist`,webSettings:`${n}/web/:settingsSubset?`,profile:"/profile",editProfile:"/profile/edit",friendProfile:"/friend/:id",friends:"/friends",activity:"/activity",prePlayActivityFeed:["/server/:machineIdentifier/activity","/server/:machineIdentifier/provider/:providerIdentifier/activity","/provider/:providerIdentifier/activity"],activityCard:["/server/:machineIdentifier/activity/:id","/server/:machineIdentifier/provider/:providerIdentifier/activity/:id","/provider/:providerIdentifier/activity/:id"],profileWatchlist:"/profile/:id?/watchlist",profileRatings:"/profile/:id?/ratings",profileWatchHistory:"/profile/:id?/watch-history"}},28403:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(5977),i=r(20683),s=r(6459);const a=function(e,t={},r={}){const a=s.Z[e],o=Array.isArray(a)?a[0]:a;return i.Z.join((0,n.Gn)(o,t),r)}},20213:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=(e=>(e.Equal="=",e.NotEqual="!=",e.DoubleEqual="==",e.NotDoubleEqual="!==",e.GreaterThanOrEqual=">=",e.LessThanOrEqual="<=",e.GreaterThanGreaterThanOrEqual=">>=",e.LessThanLessThanOrEqual="<<=",e))(n||{});const i=n},55509:(e,t,r)=>{"use strict";r.d(t,{Cs:()=>n,dX:()=>i,_B:()=>s});var n=(e=>(e.MetadataMessage="METADATA_MESSAGE",e.MetadataReport="METADATA_REPORT",e))(n||{}),i=(e=>(e.Episode="EPISODE",e.Movie="MOVIE",e.Season="SEASON",e.Show="SHOW",e))(i||{}),s=(e=>(e.Friends="FRIENDS",e.Private="PRIVATE",e.Public="PUBLIC",e))(s||{})},90144:(e,t,r)=>{"use strict";r.d(t,{_2:()=>n,su:()=>i,gQ:()=>s});const n=Object.keys,i=Object.values,s=Object.entries},9423:(e,t,r)=>{"use strict";function n(e,t){if(!e)throw new Error(t)}r.d(t,{Z:()=>n})},17131:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(9669),i=r.n(n),s=r(80129),a=r.n(s),o=r(24970),l=r(65935),c=r(26829),d=r(5583),u=r(86832),p=r(57799),m=r(20683),h=Object.defineProperty,g=Object.defineProperties,y=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function S(e){if(!e)return e;const t=e,{"X-Plex-Username":r,"X-Plex-Device-Name":n}=t;return((e,t)=>{var r={};for(var n in e)f.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&v)for(var n of v(e))t.indexOf(n)<0&&b.call(e,n)&&(r[n]=e[n]);return r})(t,["X-Plex-Username","X-Plex-Device-Name"])}var P=Object.defineProperty,I=Object.defineProperties,E=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,D=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&D(e,r,t[r]);if(w)for(var r of w(t))M.call(t,r)&&D(e,r,t[r]);return e};const T={PUT:!0,DELETE:!0},x={Accept:!0,"Accept-Language":!0,"Content-Language":!0,"Content-Type":!0},A=/(^X-Plex-[^=]+)/i;var k=Object.defineProperty,N=Object.defineProperties,R=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,U=(e,t,r)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&U(e,r,t[r]);if(L)for(var r of L(t))V.call(t,r)&&U(e,r,t[r]);return e},B=(e,t)=>N(e,R(t));const _=function(e){const t=F({},e);function*r(e,r){const n=r,{server:s,provider:d,timeout:h=t.timeout,allowHeadersInUrl:P=!(!s&&!d),providerVersionOverride:w}=n,C=((e,t)=>{var r={};for(var n in e)j.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&L)for(var n of L(e))t.indexOf(n)<0&&V.call(e,n)&&(r[n]=e[n]);return r})(n,["server","provider","timeout","allowHeadersInUrl","providerVersionOverride"]),M=l.Z.hasInstance()?l.Z.getInstance():{},D=B(F(F({},M),r.headers),{"X-Plex-Restriction-Profile":(null==s?void 0:s.isCloud)?M["X-Plex-Restriction-Profile"]:void 0});let k=e;if(s){if(!(0,p.Z)(e)){const t=(null==d?void 0:d.baseURL)?d.baseURL:s.uri;if(!t)throw new Error("Unable to make a request to a relative path without `server.uri` or `baseURL`");k=m.Z.join([t,e])}s.accessToken&&(D["X-Plex-Token"]=s.accessToken),s.isEmbedded&&(D["X-Plex-Account-ID"]="1"),d&&(D["X-Plex-Provider-Version"]=null!=w?w:t.providerVersion,D["X-Plex-Text-Format"]=(0,c.Z)(d.identifier),t.drmType&&(D["X-Plex-Drm"]=t.drmType))}t.language&&(D["X-Plex-Language"]=t.language,D["Accept-Language"]=t.language);const N=i().CancelToken.source();let R=B(F({},C),{url:k,cancelToken:N?N.token:void 0,headers:D,timeout:h,allowHeadersInUrl:P,paramsSerializer:e=>a().stringify(e,{arrayFormat:"repeat"})});(null==s?void 0:s.isCloud)&&d&&(R=function(e){return t=((e,t)=>{for(var r in t||(t={}))f.call(t,r)&&Z(e,r,t[r]);if(v)for(var r of v(t))b.call(t,r)&&Z(e,r,t[r]);return e})({},e),r={headers:S(e.headers)},g(t,y(r));var t,r}(R)),R=function(e){const{method:t="GET",headers:r={},params:n={},allowHeadersInUrl:i=!1,allowBlacklistedMethodHeaders:s=!1}=e;if(!i)return e;if(T[t]&&!s)return e;const a=O({},r),o=O({},n);return Object.keys(r).forEach((e=>{const t=r[e];x[e]||(A.test(e)?(o[e]=t,delete a[e]):u.Z.warn('[CORS] Did not move header "%s" to query string. This can result in an unnecessary OPTIONS preflight request.',e))})),l=O({},e),I(l,E({headers:a,params:o}));var l}(R);try{return yield(0,o.RE)(i().request,R)}finally{(yield(0,o.By)())&&(null==N||N.cancel())}}return{get:(e,t={})=>r(e,B(F({},t),{method:"GET"})),post:(e,t={},n)=>r(e,B(F({},t),{method:"POST",data:n})),put:(e,t={},n)=>r(e,B(F({},t),{method:"PUT",data:n})),del:(e,t={})=>r(e,B(F({},t),{method:"DELETE"})),setOption(e,r){t[e]=r},toPlainErrorObject(e){let t,r;(function(e){return e.isAxiosError})(e)&&(e.response?(t=e.response.status,r=e.response.data):e.request&&(t=e.request.status));const n={message:e.message,name:e.name,stack:e.stack,status:t,data:r};return u.Z.error(n),n}}}({timeout:3e4,language:"en",drmType:d.NONE,providerVersion:"5.1"})},32601:(e,t,r)=>{"use strict";function n(e){e.isPending=!0,e.error=null}function i(e){e.isPending=!1,e.isPopulated=!0}function s(e,t){e.isPending=!1,e.error=t}function a(e){e.isPending=!1,e.error=null}r.d(t,{er:()=>n,vv:()=>i,VQ:()=>s,EA:()=>a})},56723:(e,t,r)=>{"use strict";r.d(t,{P:()=>l,Z:()=>c});var n=r(23642),i=r(99318),s=r(78389),a=r(93084),o=r(46074);function l(e){switch(e){case s.U.Movie:case i.pG.Movie:return[n.PD.Title,n.PD.Year];case s.U.Show:case i.pG.Show:return[n.PD.Title,n.PD.ChildCount];case s.U.Season:case i.pG.Season:return[n.PD.ParentTitle,n.PD.Title];case s.U.Episode:case i.pG.Episode:return[n.PD.GrandparentTitle,n.PD.Title,n.PD.EpisodeIdentifier];case s.U.Artist:case i.pG.Artist:return[n.PD.Title];case s.U.Album:case i.pG.Album:return[n.PD.ParentTitle,n.PD.TitleAttributed];case s.U.Track:case i.pG.Track:return[n.PD.GrandparentTitle,n.PD.Title];case s.U.Photo:case i.pG.Photo:return[n.PD.Title];case s.U.PhotoAlbum:case i.pG.PhotoAlbum:return[n.PD.Title];case s.U.Clip:case i.pG.Clip:return[n.PD.Title];case s.U.Playlist:case i.pG.Playlist:return[n.PD.Title,n.PD.Duration];case s.U.Collection:case i.pG.Collection:return[n.PD.Title,n.PD.ChildCount];case s.U.Channels:return[n.PD.Title,n.PD.AirsAt]}return[n.PD.Title]}const c=function(e){var t;if(!e)return;if(e.DisplayFields)return e;const r=(0,o.Z)(e);if(!r)return e;const i=null==(t=r.Sort)?void 0:t.find((e=>e.active));if(!i)return e;const c=function(e){var t,r;const n=(0,o.Z)(e);if(!(null==n?void 0:n.type))return[];if(n.type===s.U.Mixed)return null!=(r=null==(t=e.Type)?void 0:t.reduce(((e,t)=>{const r=(0,a.Z)(t.type);return!t.active&&r&&e.push(r),e}),[]))?r:[];const i=(0,a.Z)(n.type);return i?[i]:[]}(e);if(!c.length)return e;const d=function(e){switch(e.key){case"addedAt":return[n.PD.AddedAt];case"audienceRating":return[n.PD.Rating];case"beginsAt":return[n.PD.AirsAt];case"contentRating":return[n.PD.ContentRating];case"duration":return[n.PD.Duration];case"lastRatedAt":return[n.PD.LastRatedAt];case"lastViewedAt":return[n.PD.LastViewedAt];case"mediaBitrate":return[n.PD.MediaBitrate];case"mediaCount":return[n.PD.LeafCount];case"mediaHeight":return[n.PD.VideoResolution];case"originallyAvailableAt":return[n.PD.OriginallyAvailableAt];case"rating":return[n.PD.Rating];case"unviewedLeafCount":return[n.PD.UnviewedLeafCount];case"userRating":return[n.PD.UserRating];case"viewCount":return[n.PD.ViewCount];case"viewOffset":return[n.PD.ViewOffset];case"year":return[n.PD.Year]}return[]}(i);return e.DisplayFields=c.map((e=>{const t=l(e);return{type:e,subtype:r.subtype,fields:Array.from(new Set([...t,...d]))}})),e}},61329:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(24970),i=r(65915),s=r(17131),a=r(32601);function o(e,t){const r={items:[],totalSize:void 0,isPaginated:void 0,isPending:!1,isPopulated:!1,error:null};return{getDefaultPaginatedState:()=>r,getRepopulateRangeOptions(e){const t=Math.max(e.findIndex((e=>null!=e)),0);return{startIndex:t,size:e.length-t}},fetchAll:function*(e,r){const{server:i,provider:a,params:o,providerVersionOverride:l}=r,c=yield(0,n.RE)(s.Z.get,e,{server:i,provider:a,params:o,providerVersionOverride:l}),d=t?t({server:i,provider:a,data:c.data}):c.data;return yield d},fetchRange:function*(e,r){const{server:a,provider:o,params:l,startIndex:c,size:d,isPrepend:u,providerVersionOverride:p}=r,m=a.isCloud?i.p8:i.nM,h=Math.max(Math.min(d,m),0),g=u?Math.max(c-h+1,0):c,y=yield(0,n.RE)(s.Z.get,e,{server:a,provider:o,params:l,headers:{"X-Plex-Container-Start":String(g),"X-Plex-Container-Size":String(h)},providerVersionOverride:p}),v=t?t({server:a,provider:o,data:y.data}):y.data;return yield v},reducers:{reset(t,{payload:n}){const i=e(t,n);Object.assign(i,r)},fetchAllRequested(t,{payload:r}){const n=e(t,r);(0,a.er)(n)},fetchAllSucceeded(t,{payload:r}){const n=e(t,r),{items:i,size:s}=r.data;(0,a.vv)(n),n.totalSize=s,n.items=i},fetchAllFailed(t,{payload:r}){const n=e(t,r);(0,a.VQ)(n,r.error)},fetchRangeRequested(t,{payload:r}){const n=e(t,r);(0,a.er)(n)},fetchRangeSucceeded(t,{payload:r}){const n=e(t,r),{items:i,size:s,totalSize:o,offset:l}=r.data;(0,a.vv)(n),n.totalSize=o,n.isPaginated=null!=s;for(let e=0;e<i.length;e++)n.items[e+l]=i[e]},fetchRangeFailed(t,{payload:r}){const n=e(t,r);(0,a.VQ)(n,r.error)},repopulateRangeRequested(t,{payload:r}){const n=e(t,r);(0,a.er)(n)},repopulateRangeSucceeded(t,{payload:r}){const n=e(t,r),{items:i,totalSize:s,offset:o}=r.data;(0,a.vv)(n),n.items=[],n.totalSize=s;for(let e=0;e<i.length;e++)n.items[e+o]=i[e]},repopulateRangeFailed(t,{payload:r}){const n=e(t,r);(0,a.VQ)(n,r.error)}}}}},5209:(e,t,r)=>{"use strict";function n(e,t,r){var n;return null==(n=null==r?void 0:r.find((r=>r.type===e&&(!(null==r?void 0:r.subtype)||r.subtype===t))))?void 0:n.fields}r.d(t,{Z:()=>n})},98780:(e,t,r)=>{"use strict";function n(e,t,r){var n;return null==(n=null==r?void 0:r.find((r=>r.type===e&&r.subtype===t)))?void 0:n.imageType}r.d(t,{Z:()=>n})},37350:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(50361),i=r.n(n),s=r(54562),a=r(79167),o=r(94450),l=r(35076),c=r(20683),d=r(99318),u=r(89769),p=r(23642);function m(e,t){var r;if(e.Image=null!=(r=e.Image)?r:[],e.Image.find((e=>e.type===t)))return;const n=function(e,t){var r,n,i,s;switch(t){case p.IY.CoverArt:switch(e.type){case d.pG.Season:return null!=(r=e.parentArt)?r:e.art;case d.pG.Episode:return null!=(i=null!=(n=e.grandparentArt)?n:e.parentArt)?i:e.thumb;default:return e.art}case p.IY.CoverPoster:switch(e.type){case d.pG.Season:return null!=(s=e.parentTheme)?s:e.thumb;case d.pG.Episode:return e.grandparentThumb;default:return e.thumb}}}(e,t);n&&e.Image.push({alt:e.title,type:t,url:n})}var h=r(30154),g=r(82628),y=r(57107),v=Object.defineProperty,f=Object.defineProperties,b=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function E({server:e,provider:t,data:r,container:n}){var v,w,C,M,D,O,T,x,A,k;let N=i()(r);if(N.Context&&(Object.assign(N,N.Context),delete N.Context),N.type===d.pG.Channel&&N.Metadata){const e={id:N.id,thumb:N.thumb,title:N.title};N=i()(N.Metadata),N.liveTVChannel=e}null!=N.allowSync||(0,y.JG)(n,N,"allowSync"),null!=N.attribution||(0,y.JG)(n,N,"attribution"),null!=N.librarySectionID||(0,y.JG)(n,N,"librarySectionID"),null!=N.librarySectionTitle||(0,y.JG)(n,N,"librarySectionTitle"),null!=N.librarySectionUUID||(0,y.JG)(n,N,"librarySectionUUID"),null==n.augmentationKey||(0,o.Z)(e.version,s.Z.augmentedHubsInRelatedHubs)||(0,y.JG)(n,N,"augmentationKey");const R=/(.*)\/(children|items)$/.exec(N.key);R&&(N.childrenKey=c.Z.join(N.skipChildren?N.key.replace("/children","/grandchildren"):N.key,{excludeAllLeaves:1}),N.key=R[1]),(0,y.Dq)(N,"librarySectionID"),(0,y.dL)(N,"extraType"),(0,y.dL)(N,"childCount"),(0,y.dL)(N,"leafCount");const L=N.source||(0,l.Z)({serverIdentifier:e.machineIdentifier,providerIdentifier:null==t?void 0:t.identifier});N.source=L,N.sourceURI=`${L}${N.key}`,null==N.userState&&(N.userState=!0),N.isPlaylist=N.type===d.pG.Playlist&&!N.radio,N.isLiveTVChannel=!!N.liveTVChannel,N.isExtra=null!=N.extraType,N.isFolder=/\/folder\?parent=/.test(N.key),N.isUnreleased=e.isCloud&&!!t&&!(0,u.Z)(t)&&(!N.originallyAvailableAt||new Date(N.originallyAvailableAt)>new Date),N.type===d.pG.Photo&&N.childrenKey&&(N.type=d.pG.PhotoAlbum),N.type===d.pG.Clip&&(null==(v=N.guid)?void 0:v.startsWith(`${a.Hn}://`))&&!N.subtype&&(N.subtype=d.y_.Photo),N.type===d.pG.Movie&&(null==(w=N.guid)?void 0:w.startsWith(`${a.Hn}://`))&&!N.subtype&&(N.subtype=d.y_.Clip),""===N.title&&N.titleSort&&(N.title=N.titleSort),null==(C=N.Media)||C.forEach((e=>{var t;null==(t=e.Part)||t.forEach((e=>{var t;null==(t=e.Stream)||t.forEach((e=>{(0,y.Dq)(e,"id")}))}))})),function(e){m(e,p.IY.CoverArt),m(e,p.IY.CoverPoster)}(N),N.listItemKey=null!=(D=null==(M=N.Media)?void 0:M.reduce(((e,t)=>(e.push(t.id),e)),[N.sourceURI]).join("~"))?D:N.sourceURI;const j={};(0,y.pB)(N,j,"deletedAt"),(0,y.pB)(N,j,"downloadSubscriptionID"),(0,y.pB)(N,j,"subscriptionID"),(0,y.pB)(N,j,"subscriptionType"),(0,y.pB)(N,j,"grandparentSubscriptionID"),(0,y.pB)(N,j,"grandparentSubscriptionType"),(0,y.pB)(N,j,"isDownloaded"),(0,y.pB)(N,j,"lastRatedAt"),(0,y.pB)(N,j,"lastViewedAt"),(0,y.pB)(N,j,"picked"),(0,y.pB)(N,j,"saved"),(0,y.pB)(N,j,"unviewedLeafCount"),(0,y.pB)(N,j,"userRating"),(0,y.pB)(N,j,"viewCount"),(0,y.pB)(N,j,"viewOffset"),(0,y.pB)(N,j,"viewedLeafCount"),(0,y.pB)(N,j,"watchlistedAt");const V=(U=((e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(Z)for(var r of Z(t))P.call(t,r)&&I(e,r,t[r]);return e})({},(0,h.Z)({metadataItemStateResponse:j,metadataItem:N})),F={tempState:{},isStale:!1,isPending:!1,isPopulated:!!N.userState,error:null},f(U,b(F)));var U,F;const B={[N.sourceURI]:V};if(null==(O=N.Stations)?void 0:O.Metadata){const r=(0,g.Z)({server:e,provider:t,data:N.Stations.Metadata,container:n});N.stations=r.metadataItems,delete N.Stations,Object.assign(B,r.metadataItemStates)}if(null==(T=N.Extras)?void 0:T.Metadata){const r=(0,g.Z)({server:e,provider:t,data:N.Extras.Metadata,container:n});N.extras=r.metadataItems,delete N.Extras,Object.assign(B,r.metadataItemStates)}if(null==(x=N.OnDeck)?void 0:x.Metadata){const r=E({server:e,provider:t,data:N.OnDeck.Metadata,container:n});N.onDeck=r.metadataItem,delete N.OnDeck,Object.assign(B,r.metadataItemStates)}if((null==(A=N.PopularLeaves)?void 0:A.Metadata)&&(null==(k=N.PopularLeaves)?void 0:k.key)){const r=(0,g.Z)({server:e,provider:t,data:N.PopularLeaves.Metadata,container:n});N.popularLeaves={key:N.PopularLeaves.key,items:r.metadataItems},delete N.PopularLeaves,Object.assign(B,r.metadataItemStates)}return N.Preferences&&(V.preferences=N.Preferences.Setting,delete N.Preferences),e.isCloud&&N.isAdult?{metadataItem:{userState:!1,source:N.source,sourceURI:N.sourceURI,key:"",listItemKey:N.listItemKey,ratingKey:"",title:"Error",type:N.type,isAdult:N.isAdult,isPlaylist:N.isPlaylist,isLiveTVChannel:N.isLiveTVChannel,isExtra:N.isExtra,isFolder:N.isFolder,isUnreleased:N.isUnreleased},metadataItemStates:{}}:{metadataItem:N,metadataItemStates:N.userState?B:{}}}},30154:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(50361),i=r.n(n);function s({metadataItemStateResponse:e,metadataItem:t}){var r;const n=i()(e);return null!=t.leafCount&&(n.viewedLeafCount=null!=(r=n.viewedLeafCount)?r:0,n.unviewedLeafCount=t.leafCount-n.viewedLeafCount),n}},82628:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(37350);function i({server:e,provider:t,data:r,container:i}){return r.reduce(((r,s)=>{const{metadataItem:a,metadataItemStates:o}=(0,n.Z)({server:e,provider:t,data:s,container:i});return r.metadataItems.push(a),Object.assign(r.metadataItemStates,o),r}),{metadataItems:[],metadataItemStates:{}})}},57107:(e,t,r)=>{"use strict";r.d(t,{dL:()=>s,ZX:()=>a,Dq:()=>o,pB:()=>l,JG:()=>c});var n=r(86832);function i(e){return(t,r,n)=>{const i=e(t[r],r);n?(t[n]=i,delete t[r]):t[r]=i}}const s=i(((e,t)=>{const r=typeof e;if("string"===r||"number"===r)return Number(e);"undefined"!==r&&n.Z.warn(`normalizeAsNumber: returning undefined for type: ${r}, property: ${t}`)})),a=i(((e,t)=>{const r=typeof e;return"boolean"===r||"number"===r?Boolean(e):"string"===r?"1"===e:void("undefined"!==r&&n.Z.warn(`normalizeAsBoolean: returning undefined for type: ${r}, property: ${t}`))})),o=i(((e,t)=>{const r=typeof e;if(null!=e)return String(e);"undefined"!==r&&n.Z.warn(`normalizeAsNumber: returning undefined for type: ${r}, property: ${t}`)}));function l(e,t,r){e.hasOwnProperty(r)&&(t[r]=e[r],delete e[r])}function c(e,t,r){e.hasOwnProperty(r)&&(t[r]=e[r])}},69093:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(24970),i=r(45191);function s(e){(0,i.DB)("appStore").dispatch(e)}const a=function(e){return(0,n.RE)(s,e)}},42611:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(24970),i=r(45191);function s(e){return e((0,i.DB)("appStore").getState())}const a=function(e){return(0,n.RE)(s,e)}},82877:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});var n=r(45191);function i(e){var t;const r=null==(t=n.DB("appModel").state.user.features)?void 0:t.map((e=>e.uuid));return null==r?void 0:r.includes(e)}},13876:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);const i=function(e,t){const[r,i]=(0,n.useState)(e);return(0,n.useEffect)((()=>{const r=window.setTimeout((()=>{i(e)}),t);return()=>{window.clearTimeout(r)}}),[t,e]),r}},48321:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i(e){const t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}},87858:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(28216),s=r(10033);const a=function(e){const t=(0,i.I0)();return(0,n.useCallback)((r=>{const n=r.currentTarget.getAttribute("href");n&&(0===r.button||r.touches)&&(r.stopPropagation(),t((0,s.c4)({pathname:n,replace:!0}))),null==e||e(r)}),[t,e])}},33434:(e,t,r)=>{"use strict";function n(e){const t=new Map;return(...r)=>{const n=JSON.stringify(r);if(t.has(n))return t.get(n);{const i=e(...r);return t.set(n,i),i}}}r.d(t,{Z:()=>n})},71448:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>d,r5:()=>c});var n=r(67294),i=(e=>(e.Unidentified="Unidentified",e.Alt="Alt",e.AltGraph="AltGraph",e.CapsLock="CapsLock",e.Control="Control",e.Fn="Fn",e.FnLock="FnLock",e.Hyper="Hyper",e.Meta="Meta",e.NumLock="NumLock",e.ScrollLock="ScrollLock",e.Shift="Shift",e.Super="Super",e.Symbol="Symbol",e.SymbolLock="SymbolLock",e.Enter="Enter",e.Tab="Tab",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e.Backspace="Backspace",e.Clear="Clear",e.Copy="Copy",e.CrSel="CrSel",e.Cut="Cut",e.Delete="Delete",e.EraseEof="EraseEof",e.ExSel="ExSel",e.Insert="Insert",e.Paste="Paste",e.Redo="Redo",e.Undo="Undo",e.Accept="Accept",e.Again="Again",e.Attn="Attn",e.Cancel="Cancel",e.ContextMenu="ContextMenu",e.Escape="Escape",e.Execute="Execute",e.Find="Find",e.Finish="Finish",e.Help="Help",e.Pause="Pause",e.Play="Play",e.Props="Props",e.Select="Select",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.BrightnessDown="BrightnessDown",e.BrightnessUp="BrightnessUp",e.Eject="Eject",e.LogOff="LogOff",e.Power="Power",e.PowerOff="PowerOff",e.PrintScreen="PrintScreen",e.Hibernate="Hibernate",e.Standby="Standby",e.WakeUp="WakeUp",e.AllCandidates="AllCandidates",e.Alphanumeric="Alphanumeric",e.CodeInput="CodeInput",e.Compose="Compose",e.Convert="Convert",e.Dead="Dead",e.FinalMode="FinalMode",e.GroupFirst="GroupFirst",e.GroupLast="GroupLast",e.GroupNext="GroupNext",e.GroupPrevious="GroupPrevious",e.ModeChange="ModeChange",e.NextCandidate="NextCandidate",e.NonConvert="NonConvert",e.PreviousCandidate="PreviousCandidate",e.Process="Process",e.SingleCandidate="SingleCandidate",e.HangulMode="HangulMode",e.HanjaMode="HanjaMode",e.JunjaMode="JunjaMode",e.Eisu="Eisu",e.Hankaku="Hankaku",e.Hiragana="Hiragana",e.HiraganaKatakana="HiraganaKatakana",e.KanaMode="KanaMode",e.KanjiMode="KanjiMode",e.Katakana="Katakana",e.Romaji="Romaji",e.Zenkaku="Zenkaku",e.ZenkakuHanaku="ZenkakuHanaku",e.F1="F1",e.F2="F2",e.F3="F3",e.F4="F4",e.F5="F5",e.F6="F6",e.F7="F7",e.F8="F8",e.F9="F9",e.F10="F10",e.F11="F11",e.F12="F12",e.F13="F13",e.F14="F14",e.F15="F15",e.F16="F16",e.F17="F17",e.F18="F18",e.F19="F19",e.F20="F20",e.Soft1="Soft1",e.Soft2="Soft2",e.Soft3="Soft3",e.Soft4="Soft4",e.AppSwitch="AppSwitch",e.Call="Call",e.Camera="Camera",e.CameraFocus="CameraFocus",e.EndCall="EndCall",e.GoBack="GoBack",e.GoHome="GoHome",e.HeadsetHook="HeadsetHook",e.LastNumberRedial="LastNumberRedial",e.Notification="Notification",e.MannerMode="MannerMode",e.VoiceDial="VoiceDial",e.ChannelDown="ChannelDown",e.ChannelUp="ChannelUp",e.MediaFastForward="MediaFastForward",e.MediaPause="MediaPause",e.MediaPlay="MediaPlay",e.MediaPlayPause="MediaPlayPause",e.MediaRecord="MediaRecord",e.MediaRewind="MediaRewind",e.MediaStop="MediaStop",e.MediaTrackNext="MediaTrackNext",e.MediaTrackPrevious="MediaTrackPrevious",e.AudioBalanceLeft="AudioBalanceLeft",e.AudioBalanceRight="AudioBalanceRight",e.AudioBassDown="AudioBassDown",e.AudioBassBoostDown="AudioBassBoostDown",e.AudioBassBoostToggle="AudioBassBoostToggle",e.AudioBassBoostUp="AudioBassBoostUp",e.AudioBassUp="AudioBassUp",e.AudioFaderFront="AudioFaderFront",e.AudioFaderRear="AudioFaderRear",e.AudioSurroundModeNext="AudioSurroundModeNext",e.AudioTrebleDown="AudioTrebleDown",e.AudioTrebleUp="AudioTrebleUp",e.AudioVolumeDown="AudioVolumeDown",e.AudioVolumeMute="AudioVolumeMute",e.AudioVolumeUp="AudioVolumeUp",e.MicrophoneToggle="MicrophoneToggle",e.MicrophoneVolumeDown="MicrophoneVolumeDown",e.MicrophoneVolumeMute="MicrophoneVolumeMute",e.MicrophoneVolumeUp="MicrophoneVolumeUp",e.TV="TV",e.TV3DMode="TV3DMode",e.TVAntennaCable="TVAntennaCable",e.TVAudioDescription="TVAudioDescription",e.TVAudioDescriptionMixDown="TVAudioDescriptionMixDown",e.TVAudioDescriptionMixUp="TVAudioDescriptionMixUp",e.TVContentsMenu="TVContentsMenu",e.TVDataService="TVDataService",e.TVInput="TVInput",e.TVInputComponent1="TVInputComponent1",e.TVInputComponent2="TVInputComponent2",e.TVInputComposite1="TVInputComposite1",e.TVInputComposite2="TVInputComposite2",e.TVInputHDMI1="TVInputHDMI1",e.TVInputHDMI2="TVInputHDMI2",e.TVInputHDMI3="TVInputHDMI3",e.TVInputHDMI4="TVInputHDMI4",e.TVInputVGA1="TVInputVGA1",e.TVMediaContext="TVMediaContext",e.TVNetwork="TVNetwork",e.TVNumberEntry="TVNumberEntry",e.TVPower="TVPower",e.TVRadioService="TVRadioService",e.TVSatellite="TVSatellite",e.TVSatelliteBS="TVSatelliteBS",e.TVSatelliteCS="TVSatelliteCS",e.TVSatelliteToggle="TVSatelliteToggle",e.TVTerrestrialAnalog="TVTerrestrialAnalog",e.TVTerrestrialDigital="TVTerrestrialDigital",e.TVTimer="TVTimer",e.AVRInput="AVRInput",e.AVRPower="AVRPower",e.ColorF0Red="ColorF0Red",e.ColorF1Green="ColorF1Green",e.ColorF2Yellow="ColorF2Yellow",e.ColorF3Blue="ColorF3Blue",e.ColorF4Grey="ColorF4Grey",e.ColorF5Brown="ColorF5Brown",e.ClosedCaptionToggle="ClosedCaptionToggle",e.Dimmer="Dimmer",e.DisplaySwap="DisplaySwap",e.DVR="DVR",e.Exit="Exit",e.FavoriteClear0="FavoriteClear0",e.FavoriteClear1="FavoriteClear1",e.FavoriteClear2="FavoriteClear2",e.FavoriteClear3="FavoriteClear3",e.FavoriteRecall0="FavoriteRecall0",e.FavoriteRecall1="FavoriteRecall1",e.FavoriteRecall2="FavoriteRecall2",e.FavoriteRecall3="FavoriteRecall3",e.FavoriteStore0="FavoriteStore0",e.FavoriteStore1="FavoriteStore1",e.FavoriteStore2="FavoriteStore2",e.FavoriteStore3="FavoriteStore3",e.Guide="Guide",e.GuideNextDay="GuideNextDay",e.GuidePreviousDay="GuidePreviousDay",e.Info="Info",e.InstantReplay="InstantReplay",e.Link="Link",e.ListProgram="ListProgram",e.LiveContent="LiveContent",e.Lock="Lock",e.MediaApps="MediaApps",e.MediaAudioTrack="MediaAudioTrack",e.MediaLast="MediaLast",e.MediaSkipBackward="MediaSkipBackward",e.MediaSkipForward="MediaSkipForward",e.MediaStepBackward="MediaStepBackward",e.MediaStepForward="MediaStepForward",e.MediaTopMenu="MediaTopMenu",e.NavigateIn="NavigateIn",e.NavigateNext="NavigateNext",e.NavigateOut="NavigateOut",e.NavigatePrevious="NavigatePrevious",e.NextFavoriteChannel="NextFavoriteChannel",e.NextUserProfile="NextUserProfile",e.OnDemand="OnDemand",e.Pairing="Pairing",e.PinPDown="PinPDown",e.PinPMove="PinPMove",e.PinPToggle="PinPToggle",e.PinPUp="PinPUp",e.PlaySpeedDown="PlaySpeedDown",e.PlaySpeedReset="PlaySpeedReset",e.PlaySpeedUp="PlaySpeedUp",e.RandomToggle="RandomToggle",e.RcLowBattery="RcLowBattery",e.RecordSpeedNext="RecordSpeedNext",e.RfBypass="RfBypass",e.ScanChannelsToggle="ScanChannelsToggle",e.ScreenModeNext="ScreenModeNext",e.Settings="Settings",e.SplitScreenToggle="SplitScreenToggle",e.STBInput="STBInput",e.STBPower="STBPower",e.Subtitle="Subtitle",e.Teletext="Teletext",e.VideoModeNext="VideoModeNext",e.Wink="Wink",e.ZoomToggle="ZoomToggle",e.SpeechCorrectionList="SpeechCorrectionList",e.SpeechInputToggle="SpeechInputToggle",e.Close="Close",e.New="New",e.Open="Open",e.Print="Print",e.Save="Save",e.SpellCheck="SpellCheck",e.MailForward="MailForward",e.MailReply="MailReply",e.MailSend="MailSend",e.LaunchCalculator="LaunchCalculator",e.LaunchCalendar="LaunchCalendar",e.LaunchContacts="LaunchContacts",e.LaunchMail="LaunchMail",e.LaunchMediaPlayer="LaunchMediaPlayer",e.LaunchMusicPlayer="LaunchMusicPlayer",e.LaunchMyComputer="LaunchMyComputer",e.LaunchPhone="LaunchPhone",e.LaunchScreenSaver="LaunchScreenSaver",e.LaunchSpreadsheet="LaunchSpreadsheet",e.LaunchWebBrowser="LaunchWebBrowser",e.LaunchWebCam="LaunchWebCam",e.LaunchWordProcessor="LaunchWordProcessor",e.LaunchApplication1="LaunchApplication1",e.LaunchApplication2="LaunchApplication2",e.LaunchApplication3="LaunchApplication3",e.LaunchApplication4="LaunchApplication4",e.LaunchApplication5="LaunchApplication5",e.LaunchApplication6="LaunchApplication6",e.LaunchApplication7="LaunchApplication7",e.LaunchApplication8="LaunchApplication8",e.LaunchApplication9="LaunchApplication9",e.LaunchApplication10="LaunchApplication10",e.LaunchApplication11="LaunchApplication11",e.LaunchApplication12="LaunchApplication12",e.LaunchApplication13="LaunchApplication13",e.LaunchApplication14="LaunchApplication14",e.LaunchApplication15="LaunchApplication15",e.LaunchApplication16="LaunchApplication16",e.BrowserBack="BrowserBack",e.BrowserFavorites="BrowserFavorites",e.BrowserForward="BrowserForward",e.BrowserHome="BrowserHome",e.BrowserRefresh="BrowserRefresh",e.BrowserSearch="BrowserSearch",e.BrowserStop="BrowserStop",e.Decimal="Decimal",e.Key11="Key11",e.Key12="Key12",e.Multiply="Multiply",e.Add="Add",e.Divide="Divide",e.Subtract="Subtract",e.Separator="Separator",e))(i||{});const s=i,a={display:"contents "};function o(e,t,r){const n=[];for(let i=Math.min(t,r);i<=Math.max(t,r);i++)n.push(e[i]);return n}const l=(0,n.createContext)({isSelectionRangeActive:!1,isSelectionRangeComplete:!1,checkItemInRange:()=>!1,onRangeStart:()=>{},onRangeEnd:()=>{},onRangeSelect:()=>{},onRangeClear:()=>{}});function c(){return(0,n.useContext)(l)}const d=function({children:e,items:t}){const[r,i]=(0,n.useState)(),[c,d]=(0,n.useState)(),[u,p]=(0,n.useState)(),[m,h]=(0,n.useState)(!1),g=(0,n.useCallback)((e=>{const n=t.indexOf(e);return null!=r&&null!=c&&n>=Math.min(r,c)&&n<=Math.max(r,c)}),[t,c,r]),y=(0,n.useCallback)((e=>{const r=t.indexOf(e);-1!==r&&(i(r),d(void 0),p(void 0))}),[t]),v=(0,n.useCallback)((e=>{const n=t.indexOf(e);-1!==n&&null!=r&&o(t,r,n).every((e=>e))&&d(n)}),[t,r]),f=(0,n.useCallback)(((e,n)=>{null!=r&&null!=c&&(u&&n(o(t,...u)),e(o(t,r,c)),p([r,c]))}),[t,u,c,r]),b=(0,n.useCallback)((()=>{i(void 0),d(void 0),p(void 0)}),[]),Z=(0,n.useCallback)((()=>{d(void 0)}),[]);(0,n.useEffect)((()=>{function e(e){e.key===s.Shift&&h(!0)}function t(e){e.key===s.Shift&&(h(!1),d(void 0))}function r(){h(!1),d(void 0)}return document.addEventListener("keydown",e),document.addEventListener("keyup",t),window.addEventListener("blur",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t),window.addEventListener("blur",r)}}),[]);const S=(0,n.useMemo)((()=>({isSelectionRangeActive:m,isSelectionRangeComplete:null!=r&&null!=c,checkItemInRange:g,onRangeStart:y,onRangeEnd:v,onRangeSelect:f,onRangeClear:b})),[g,m,b,v,f,y,c,r]);return n.createElement(l.Provider,{value:S},n.createElement("div",{style:a,onMouseLeave:Z},e))}},7659:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return 1===Number(e)||"true"===e}},79115:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return null==e?"":String(e)}},23608:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return e instanceof Promise?e:e instanceof Error?Promise.reject(e):"[object Function]"===Object.prototype.toString.call(null==e?void 0:e.then)?new Promise(((t,r)=>{try{e.then(t,r)}catch(e){t(e)}})):Promise.resolve(e)}},14739:(e,t,r)=>{"use strict";r.d(t,{XH:()=>d,pP:()=>u,dZ:()=>p,rG:()=>m,xP:()=>h,fz:()=>g});var n=r(42902),i=r(7069),s=r(88330),a=r(54559),o=r(77982),l=r(59319),c=r(73788),d=(e=>(e.RealTime="real-time",e.TwelveHours="twelve-hours",e.Day="day",e.Week="week",e.Month="month",e.NinetyDays="ninety-days",e.Year="year",e.AllTime="all-time",e))(d||{}),u=(e=>(e[e.Year=0]="Year",e[e.Month=1]="Month",e[e.Week=2]="Week",e[e.Day=3]="Day",e[e.Hour=4]="Hour",e[e.Minutes=5]="Minutes",e[e.RealTime=6]="RealTime",e))(u||{});function p(e){switch(e){case"real-time":return(0,c.Z)("Real Time");case"twelve-hours":return(0,c.Z)("Last 12 Hours");case"day":return(0,c.Z)("Last 24 Hours");case"week":return(0,c.Z)("Last 7 Days");case"month":return(0,c.Z)("Last 30 Days");case"ninety-days":return(0,c.Z)("Last 90 Days");case"year":return(0,c.Z)("Last Year");case"all-time":return(0,c.Z)("All Time");default:return""}}function m(e){switch(e){case"real-time":return 6;case"twelve-hours":case"day":return 4;case"week":return 3;case"month":case"ninety-days":return 2;case"year":case"all-time":return 1;default:return 3}}function h(e){switch(e){case"twelve-hours":return(0,n.Z)((0,s.Z)(new Date,12));case"day":return(0,n.Z)((0,i.Z)(new Date,1));case"week":return(0,n.Z)((0,o.Z)(new Date,1));case"month":return(0,n.Z)((0,a.Z)(new Date,1));case"ninety-days":return(0,n.Z)((0,i.Z)(new Date,90));case"year":return(0,n.Z)((0,l.Z)(new Date,1));case"all-time":return 0;default:return}}function g(e,t){switch(e){case"twelve-hours":return"H:00";case"day":return t?"H:00":"HH";case"week":case"month":case"ninety-days":return t?"MMMM do":"MMM d";case"year":return t?"MMMM":"MMM";case"all-time":return t?"MMMM yyyy":"MMM yy";default:return t?"MMMM do":"MMM d"}}},2579:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),i=r(43192),s=r(57865),a=r(73935),o=r(28216),l=r(45191);const c=r(26051).Z.Layout.extend({template:()=>"",mountReact(){const e=(0,l.DB)("appStore");a.render(n.createElement(i.W,{backend:s.PD},n.createElement(o.zt,{store:e},this.component(this.options))),this.el)},unmountReact(){this.isRendered&&a.unmountComponentAtNode(this.el)},onBeforeRender(){this.unmountReact()},onRender(){this.mountReact()},onClose(){this.unmountReact()}})},1661:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(26051),i=r(8523),s=r(56445),a=r.n(s);const o={success:!0,error:!0,notify:!0},l=n.Z.ItemView.extend({className:"alert-bar",template:a(),events:{"click .close-btn":"onCloseClick"},initialize:function(e){const t=e.alert;if(this.alert=t,t){const e=t.type;e&&o[e]&&this.$el.addClass(e)}},hide:function(){i.Z.trigger("hide:bar","alertbar")},serializeData:function(){return this.alert},onCloseClick:function(e){e.preventDefault(),this.hide()}})},99468:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(26051),l=r(22094),c=r(20573),d=r(20683),u=r(32975),p=r(13220),m=r(18655);const h=p.Z.extend({name:"ArtworkModel",context:["server","artworkType"],idAttribute:"ratingKey",rootPropertyName:"Photo",syncedAttrs:{key:m.Z.string,ratingKey:m.Z.string,thumb:m.Z.string,selected:m.Z.boolean}},{types:{POSTER:"poster",ART:"art",BANNER:"banner"}}),g=u.Z.extend({name:"ArtworkCollection",context:["server","artworkType"],model:h,url(){const e=d.Z.parseUrl(a().result(this.parent,"url")),t=this.parent.get("isPlaylist")?`/library/metadata/${this.parent.get("ratingKey")}`:e.pathname;return d.Z.join([t,`${this.artworkType}s`],e.params)}});var y=r(97283),v=r(58837),f=r(79708),b=r(30622),Z=r(70867),S=r.n(Z);const P=o.Z.Layout.extend({tagName:"span",template:S(),regions:{poster:".media-poster"},initialize:function(e){const t=e.artworkType;let r=150;"art"===t?r=240:"banner"===t&&(r=520),this.$el.addClass(t),this.image=new b.Z({className:"media-poster-image",model:this.model,modelAttribute:"thumb",placeholderClass:v.Z[t],width:r,height:f.Z.getPosterHeight(t,r)})},bindings:{".artwork-option":{modelAttribute:"selected",manual:!0,formatter:function(e,t){t.toggleClass("selected",e)}}},onRender:function(){this.poster.show(this.image)}}),I=y.Z.extend({className:"artwork-options-list",itemView:P});var E=r(89911),w=r.n(E);const C=o.Z.Layout.extend({template:w(),dragStatus:0,ui:{upload:".upload-artwork-container",urlInput:"input[name=url]"},regions:{list:".artwork-list-container"},events:{dragenter:"onDragEnter",dragleave:"onDragLeave",dragover:"onDragOver",drop:"onDrop",keydown:"onKeyDown","change .artwork-file-control":"onFileChange","click .upload-url-btn":"onUploadUrlClick","click .cancel-url-btn":"onCancelUrlClick","click .submit-url-btn":"onUrlSubmit","submit #upload-form":"onUrlSubmit","click .upload-back-btn":"onUploadBackClick","click .artwork-option":"onArtworkOptionClick"},initialize:function(e){this.type=e.type,this.metadataItem=this.model.getSingleMetadataItem(),this.changes={},this.collection=new g([],{server:this.model.server,section:this.model.section,parent:this.metadataItem,artworkType:this.type}),this.collection.fetch()},serializeData:function(){return{showUpload:this.model.server.supports("artworkUpload"),showFileUpload:c.Z.hasFileUpload}},flushChanges:function(){this.model.set(this.changes)},uploadFiles:function(e){if(!e||!e.length)return;this.changes={},this.ui.upload.removeClass("show-success show-error");const t=this.collection.url(),r=a().extend(this.model.server.getXHROptions(t),{type:"POST",processData:!1}),n=[],s=a().bind((function(e){/image\//.test(e.type)&&(r.data=e,n.push(i().ajax(r)))}),this);a().each(e,s),n.length?(this.ui.upload.addClass("show-progress"),this.monitorUpload(i().when.apply(i(),n))):this.ui.upload.addClass("show-error")},uploadUrl:function(e){this.changes={},this.ui.upload.removeClass("show-form"),this.ui.upload.addClass("show-progress"),this.ui.urlInput.val("");const t=d.Z.join(this.collection.url(),{url:e}),r=this.model.server.getXHROptions(t,{type:"POST"});this.monitorUpload(i().ajax(r))},monitorUpload:function(e){e.done(a().bind((function(){this.isClosed||this.ui.upload.addClass("show-success");const e={server:this.model.server,onlyIfCached:!0},t=new l.Z({key:this.metadataItem.get("key")},e);a().isEmpty(t)||t.fetch({usePopulatedParams:!0,data:{includePreferences:"1"}}),this.collection.fetch()}),this)),e.fail(this.whenRendered((function(){this.ui.upload.addClass("show-error")}))),e.always(this.whenRendered((function(){this.ui.upload.removeClass("show-progress")})))},onRender:function(){this.list.show(new I({collection:this.collection,itemViewOptions:{artworkType:this.type}}))},onDragEnter:function(){this.dragStatus++,this.ui.upload.addClass("drag-hover")},onDragLeave:function(){this.dragStatus--,0===this.dragStatus&&this.ui.upload.removeClass("drag-hover")},onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),e.stopPropagation(),this.dragStatus=0,this.ui.upload.removeClass("drag-hover"),this.uploadFiles(e.originalEvent.dataTransfer.files)},onKeyDown:function(e){27===e.which&&this.ui.upload.hasClass("show-form")&&(e.preventDefault(),this.ui.upload.removeClass("show-form"))},onFileChange:function(e){this.uploadFiles(e.target.files)},onUploadUrlClick:function(e){e.preventDefault(),this.ui.upload.addClass("show-form"),this.ui.urlInput.focus()},onCancelUrlClick:function(e){e.preventDefault(),this.ui.upload.removeClass("show-form")},onUrlSubmit:function(e){e.preventDefault();const t=this.ui.urlInput.val();t?this.uploadUrl(t):this.ui.upload.removeClass("show-form")},onUploadBackClick:function(e){e.preventDefault(),this.ui.upload.removeClass("show-success show-error")},onArtworkOptionClick:function(e){e.preventDefault();const t=i()(e.currentTarget),r=t.data("ratingKey");this.$(".artwork-option.selected").removeClass("selected"),t.addClass("selected"),this.changes[this.type]=r}})},58852:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(26051),l=r(73788);const c=o.Z.Layout.extend({events:{"click .edit-lock-addon":"onLockClick","keyup .lockable-field:not(.selectized)":"onLockableFieldChange","change .lockable-field:not(.selectized)":"onLockableFieldChange"},ui:{form:".edit-metadata-form"},serializeData:function(){const e=this.model.get("lockedFields"),t={};e&&e.each((function(e){t[e.get("name")]=e.get("locked")}));const r=this.model.toJSON(),n=this.model.get("mixedFields"),i={originallyAvailableAt:"YYYY-MM-DD",capturedTime:"YYYY-MM-DD HH:mm:ss"};return n&&n.forEach((function(e){i[e]=(0,l.Z)("MIXED")})),{item:r,locked:t,placeholders:i,canReparent:this.canReparent,canEditSimilarArtists:this.canEditSimilarArtists,disableIndices:!this.canReparent,editableTags:{}}},flushChanges:function(){},getLockedFieldsArray:function(){const e=this.ui.form,t=this.model.get("lockedFields").reduce((function(e,t){return e[t.get("name")]=t.get("locked"),e}),{});return e.find(".edit-lock-addon").each((function(e,r){const n=i()(r),s=n.data("field");n.hasClass("locked")?t[s]=!0:s in t&&(t[s]=!1)})),a().map(t,(function(e,t){return{name:t,locked:e}}))},onLockClick:function(e){e.preventDefault(),i()(e.currentTarget).hasClass("disabled")||i()(e.currentTarget).toggleClass("locked")},onLockableFieldChange:function(e){const t=e instanceof i()?e:i()(e.currentTarget);if(!e.force){let e=t.data("original-value");if(void 0===e&&(e=t.attr("value")||t.val()),t.data("original-value",e),t.val()===e)return}t.siblings(".edit-lock-addon").addClass("locked")}})},30997:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Y});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(70777),l=r(73788),c=r(85209),d=r(41444),u=r(26051),p=r(35461),m=r.n(p);const h=u.Z.ItemView.extend({className:"player-slider",template:m(),dragging:!1,ui:{thumb:".player-slider-thumb",track:".player-slider-track",progress:".player-slider-progress"},events:{mousedown:"onMouseDown",touchstart:"onTouchStart"},onlyAfterRender:["displayValue"],initialize:function(e){a().bindAll(this,"onMouseMove","onMouseUp","onTouchMove","onTouchEnd"),this.$document=i()(document),this.currentValue=e.value||0},startDragging:function(){this.dragging=!0,this.$el.addClass("active")},stopDragging:function(){this.dragging=!1,this.$el.removeClass("active"),this.triggerMethod("dragComplete")},updateForPosition:function(e,t){const r=this.getValueForPosition(e);this.setValue(r)&&this.displayValue(r,t)},getValueForPosition:function(e){const t=this.ui.track;let r=(e-t.offset().left)/t.width();return r=Math.min(Math.max(r,0),1),r=Math.round(100*r),r},setValue:function(e){return this.currentValue=e,this.trigger("change:value",e),!0},displayValue:function(e){this.ui.thumb.css("left",e+"%"),this.ui.progress.css("width",e+"%"),this.$el.data("value",e)},onRender:function(){this.displayValue(this.currentValue)},onClose:function(){this.$document.off("mousemove",this.onMouseMove),this.$document.off("mouseup",this.onMouseUp),this.$document.off("touchmove",this.onTouchMove),this.$document.off("touchend",this.onTouchEnd)},onMouseDown:function(e){e.preventDefault(),this.$document.on("mousemove",this.onMouseMove),this.$document.on("mouseup",this.onMouseUp),this.startDragging(),this.setValue(this.getValueForPosition(e.pageX))},onTouchStart:function(e){this.$document.on("touchmove",this.onTouchMove),this.$document.on("touchend",this.onTouchEnd),this.startDragging();const t=e.originalEvent.touches[0];t&&this.updateForPosition(t.pageX)},onMouseMove:function(e){e.preventDefault(),this.updateForPosition(e.pageX)},onTouchMove:function(e){e.preventDefault();const t=e.originalEvent.touches[0];t&&this.updateForPosition(t.pageX)},onMouseUp:function(e){e.preventDefault(),this.$document.off("mousemove",this.onMouseMove),this.$document.off("mouseup",this.onMouseUp),this.updateForPosition(e.pageX),this.stopDragging()},onTouchEnd:function(e){this.$document.off("touchmove",this.onTouchMove),this.$document.off("touchend",this.onTouchEnd);const t=e.originalEvent.touches[0];t&&this.updateForPosition(t.pageX),this.stopDragging()}});var g=r(35453),y=r.n(g);const v=h.extend({tagName:"span",className:"rating star-rating",template:y(),disabled:!0,modelEvents:{"change:rating":"onRatingChange","change:userRating":"onRatingChange"},events:a().extend({mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},h.prototype.events),initialize:function(e){h.prototype.initialize.apply(this,arguments);const t=this.model.server.get("shared")&&!this.model.server.get("multiuser");this.disabled=e.disabled||t,this.passive=e.passive,this.updateRating()},updateRating:function(){this.metadataRating=this.model.get("rating")||0,this.userRating=this.model.get("userRating"),this.setValue(this.userRating>0?this.userRating:this.metadataRating)},normalizeRating:function(e){return Math.round(e/2)},serializeData:function(){const e=this.normalizeRating(this.currentValue);return{stars:[e>0,e>1,e>2,e>3,e>4]}},getValueForPosition:function(e){const t=this.$el;let r=(e-t.offset().left)/t.width();return r=Math.min(Math.max(r,0),1),r=2*Math.ceil(5*r),r},persistValue:function(){const e=this.currentValue||-1;d.Z.execute("rate",{item:this.model,rating:e,passive:this.passive}),this.updateRating(),this.render()},displayValue:function(e){this.$el.data("value",e);const t=this.normalizeRating(e);this.$(".star-icon").each((function(e){const r=t>e;i()(this).toggleClass("star",r).toggleClass("dislikes",!r)})),this.$el.toggleClass("unrated",!e)},onRender:function(){h.prototype.onRender.apply(this,arguments),this.$el.toggleClass("unrated",!this.currentValue),this.$el.toggleClass("user-rating",this.userRating>0),this.$el.toggleClass("disabled",this.disabled)},onRatingChange:function(){this.updateRating(),this.render()},onMouseEnter:function(){this.disabled||(this.$el.addClass("user-rating"),this.$el.removeClass("unrated"))},onMouseLeave:function(){this.disabled||this.render()},onMouseMove:function(e){if(!this.disabled)if(this.dragging)this.updateForPosition(e.pageX);else{const t=this.getValueForPosition(e.pageX);this.displayValue(t)}},onDragComplete:function(){this.disabled||this.persistValue()}});var f=r(58852),b=r(37722);var Z=r(53763),S=r.n(Z),P=r(61067),I=r.n(P),E=r(29087),w=r.n(E),C=r(32185),M=r.n(C),D=r(75442),O=r.n(D),T=r(70708),x=r.n(T),A=r(21674),k=r.n(A),N=r(85552),R=r.n(N),L=r(10837),j=r.n(L),V=r(92563),U=r.n(V),F=r(82424),B=r.n(F),_=Object.defineProperty,z=Object.defineProperties,H=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,$=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function K(e){return a().reduce(e,(function(e,t){return e[t]=!0,e}),{})}const q={movie:O(),show:U(),season:j(),episode:M(),artist:I(),album:S(),track:B(),photoalbum:x(),photo:k(),playlist:R(),collection:w()},Y=f.Z.extend({regions:{ratingRegion:".rating-region"},ui:a().extend({selectizeInputs:".selectize input[type=text]"},f.Z.prototype.ui),initialize:function(e){const t=this.model.get("type"),r=c.getMetadataType(t);this.template=q[t]||q[c.MOVIE],this.canSelectize=this.model.server.supports("batchEdit")&&r,this.canReparent=this.model.server.supports("batchEdit")},serializeData(){return e=((e,t)=>{for(var r in t||(t={}))G.call(t,r)&&$(e,r,t[r]);if(W)for(var r of W(t))Q.call(t,r)&&$(e,r,t[r]);return e})({},f.Z.prototype.serializeData.apply(this)),t={supportsLinkedYears:this.model.server.supports("linkedYearMetadata"),supportsMultipleEditions:this.model.server.supports("multipleEditions"),disabledMultipleEditionsEditing:!this.model.server.hasOwnerFeature(o.BF),section:this.model.section,metadataTypeName:this.model.get("type")},z(e,H(t));var e,t},flushChanges:function(){const e=this.ui.form;if(!e||!e.find)return;const t=e.find(".selectize input[tabindex=-1]"),r=K(a().pluck(t,"name")),n=K(a().pluck(e.find("[type=number]"),"name")),s=a()(e.serializeArray()).reject((function(e){return r[e.name]}),this),o=a().reduce(s,(function(e,t){if(n[t.name]){const r=t.value.trim();if(r)return e[t.name]=parseFloat(r,10),e;if(!this.model.get(t.name))return e}return e[t.name]=t.value,e}),{},this);a().each(t,(function(e){const t=i()(e),r=t.data("updateAttr"),n=t.data("altUpdateAttr"),s=t.data("isText");if(!e.selectize)return;const a=e.selectize.getValue();if(n)if(s)o[r]=a,o[n]=null;else{const i=e.selectize.options[a];if(i){const e=i[t.data("autocompleteAttr")];o[r]=e,o[n]=a}}else o[r]=a}));const l=this.model.get("lockedFields");l&&l.set(this.getLockedFieldsArray(),{parse:!0}),this.model.set(o)},markInvalid:function(e){this.$(".form-group").removeClass("has-error"),a()(e).each((function(e){const t=this.$('.form-group[data-attr="'+e+'"]');t.addClass("has-error"),t.find(".control-error").text((0,l.Z)("Required"))}),this)},onRender:function(){if(this.$(".rating-region").length>0&&this.ratingRegion.show(new v({model:this.model,passive:!0})),!this.canSelectize)return;const e=this;this.ui.selectizeInputs.each((function(t,r){!function(e,t){const r=i()(t),n=r.attr("name");let s=n.replace(/parentTitle$/,"parentRatingKey");s===n&&(s=null);const o=e.model.getQueryAttr(n),c=e.model.getQueryAttrSibling(n),d=o!==n,u=d?"title":n,p=d?"ratingKey":u,m=e.model.get("type");let h;h=d?o.match(/(^.*)\./)[1]:"title"===u?m:null;const g=r.data("scopeToAttr"),y=r.data("scopeToParam");let v=r.data("ratingKey");const f=!v;v&&(v=v.toString());const Z=!d,S={};y&&e.listenTo(e,"reset_selectize:"+y,(function(){O.loadedSearches={}}));const P=e.model["original.updateValues."+n];let I,E;P?(I=P.updateAttr,E=P.altUpdateAttr):(I=e.model.get(n),s&&(E=parseInt(e.model.get(s),10)),e.model["original.updateValues."+n]={updateAttr:I,altUpdateAttr:E});let w=e.model["original.general."+n];if(!w){w=[];const t={};t[u]=I,t.ratingKey=v,w=[t],e.model["original.general."+n]=w}const C=[e.model.get(s)||e.model.get(n)],M=function(){const e=O.$dropdown_content.children();O.$dropdown.toggleClass("hidden",e.length<=1)},D=function(){a().defer(M)};r.data("autocompleteAttr",u),r.data("updateAttr",n),s&&r.data("altUpdateAttr",s);const O=r.selectize({options:w,items:C,plugins:["restore_on_focus"],delimiter:null,create:!0,maxItems:1,labelField:u,valueField:p,sortField:u,searchField:[u],selectOnTab:!0,hideSelected:!1,highlight:!1,openOnFocus:!0,selectOnBlur:!0,createOnBlur:!0,persist:!0,addPrecedence:!0,allowEmptyOption:!0,allowCreateEmpty:Z,manualInputWidth:!0,loadingClass:"",onFocus:function(){O.preloaded||(O.preloaded=!0,O.onSearchChange(O.$control_input.val()))},createFilter:function(e){return S[u]=e,!a()(this.options).findWhere(S)},load:function(t,r){if(!t.length)return void r();const n={};if(n[o]=t,g){const t=e.model.get(g);if(!t)return void r();n[y]=t}new b.Z([],{server:e.model.server,multiMetadataItem:e.model,query:n}).fetch().done((function(e){r(e.map((function(e){return e.toJSON()}))),M()}))},render:{option:function(e,t){let r;return r=(s?e.ratingKey===String(E):e[u]===I)?'<small class="autocomplete-annotate pull-right">('+(h&&!f?(0,l.Z)("this {1}",h):(0,l.Z)("original value"))+")</small>":"","<div>"+t(e[u])+r+"</div>"},option_create:function(e,t){return e.input?'<div class="create">'+t(e.input)+"</div>":'<div class="create hidden"></div>'}},onDropdownClose:function(){O.$dropdown.addClass("hidden")},onDropdownOpen:function(){O.$dropdown.addClass("hidden"),D()},onType:a().bind((function(e){if(O.canCreate(e)){const e=i()(O.$dropdown_content[0].childNodes[0]);O.setActiveOption(e)}D(),this.onLockableFieldChange({currentTarget:O.$input,force:!0})}),e),onOptionAdd:function(e,t){const r=a().pick(t,u,"ratingKey");a().findWhere(w,r)||w.splice(w.length,0,t)},onChange:function(t){const i=this.options[t];if(!i)return;if(d){const e=i.ratingKey===i[u];r.data("isText",e)}e.flushChanges();const s=e.model.changedAttributes();a().has(s,o)||a().has(s,c)?e.trigger("focusSubmit"):a().defer((function(){O.onBlur()})),e.trigger("reset_selectize:"+n),M()}})[0].selectize;O.$dropdown.addClass("hidden")}(e,r)}))}})},97283:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(13469),i=r.n(n),s=r(26051);const a=s.Z.CollectionView.extend({appendHtml:function(){return this.sorted?this.sortedAppendHtml.apply(this,arguments):this.reversed?this.reversedAppendHtml.apply(this,arguments):s.Z.CollectionView.prototype.appendHtml.apply(this,arguments)},sortedAppendHtml:function(e,t,r){if(e.isBuffering){const n=e.elBuffer.childNodes;n.length<=r?e.elBuffer.appendChild(t.el):e.elBuffer.insertBefore(t.el,n[r]),e._bufferedChildren.push(t)}else{const n=e.itemViewContainer?e.$(e.itemViewContainer):e.$el,i=n.children();i.size()<=r?n.append(t.el):i.eq(r).before(t.el)}},reversedAppendHtml:function(e,t){e.isBuffering?(e.elBuffer.insertBefore(t.el,e.elBuffer.firstChild),e._bufferedChildren.push(t)):(e.itemViewContainer?e.$(e.itemViewContainer):e.$el).prepend(t.el)},measureList:function(){if(!this.children.length)return;const e=this.children._views,t=e[i().first(i().keys(e))];i().defer(i().bind((function(){this.itemWidth=t.$el.outerWidth(!0),this.itemHeight=t.$el.outerHeight(!0),this.itemMarginRight=parseInt(t.$el.css("margin-right"),10),this.itemMarginBottom=parseInt(t.$el.css("margin-bottom"),10),this.triggerMethod("measure",this)}),this))},getViewForModel:function(e){const t=this.children._indexByModel[e.cid];return this.children._views[t]},reorder:function(){const e=this.children,t=this.collection.models,r=i().map(t,(function(t,r){const n=e.findByModel(t);return n._index=r,n.el}));this.$el.append(r)},onCollectionRendered:function(){this.measure&&this.measureList()}})},99479:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(26051),l=r(8523);let c=0;const d=[],u=o.Z.Layout.extend({className:"modal fade",focusDelay:500,animationDelay:500,events:{"hide.bs.modal":"onHide"},initialize:function(){this.once("render",(function(){c+=1,l.Z.trigger("anyModalOpen")})),this.once("close",(function(){c-=1,0===c&&l.Z.trigger("allModalsClosed")}))},hide:function(){this.isClosed||this.isHidden||this.$el.modal("hide")},onRender:function(){this.rerender||(this.isForced?this.$el.modal({backdrop:!1,keyboard:!1}):(this.listenTo(l.Z,"shortcut:escape",a().bind((function(){d[0]===this&&this.hide()}),this)),this.listenToOnce(this,"close",(function(){const e=d.indexOf(this);-1!==e&&d.splice(e,1)})),d.unshift(this),this.$el.modal()),i()(":focus").blur())},onHide:function(){this.isHidden=!0,a().each(this.panes,(function(e){const t=e.constructor.onModalClose;t&&t.apply(this)}),this),window.setTimeout(a().bind((function(){l.Z.trigger("hide:modal",this),this.trigger("close")}),this),this.animationDelay)}})},19963:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(99479),l=r(9811),c=r.n(l);const d=o.Z.extend({className:"confirm-modal modal modal-sm fade",template:c(),ui:{doubleConfirmMessage:".double-confirm-message",confirmBtn:".confirm-btn",confirmLabel:".confirm-btn .btn-label"},events:a().extend({"click .confirm-btn":"onConfirm"},o.Z.prototype.events),whitelistedOptions:["title","message","warningMessage","confirmLabel","cancelLabel","hasDanger","hideCancel"],initialize:function(e){o.Z.prototype.initialize.apply(this,arguments),this.async=e.async,this.data=a().pick(e,this.whitelistedOptions),this.promise=i().Deferred()},serializeData:function(){return a().defaults(this.data,{confirmLabel:"Yes",cancelLabel:"No"})},onRender:function(){o.Z.prototype.onRender.apply(this,arguments),window.setTimeout(a().bind((function(){this.ui.confirmBtn.focus()}),this),this.focusDelay)},onHide:function(){o.Z.prototype.onHide.apply(this,arguments),this.promise.reject()},onConfirm:function(e){if(e.preventDefault(),this.options.requireDoubleConfirm&&!this.hasConfirmedOnce){this.hasConfirmedOnce=!0;const e=this.options.doubleConfirmMessage,t=this.options.doubleConfirmLabel;return e&&this.ui.doubleConfirmMessage.text(e),void(t&&this.ui.confirmLabel.text(t))}this.promise.resolve(),this.async?this.ui.confirmBtn.addClass("active"):this.hide()}})},44518:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Pe});var n=r(12274),i=r(56514),s=r(19755),a=r.n(s),o=r(13469),l=r.n(o),c=r(45191),d=r(41444),u=r(89883),p=r(43508),m=r(23954),h=r(74226),g=r(8523),y=r(24765),v=r(35076),f=r(9524),b=r(73788),Z=r(85209),S=r(20683),P=r(19395),I=r(47480),E=r(25004),w=r(58852),C=r(51245),M=r.n(C);const D=w.Z.extend({template:M(),serializeData(){const e=this.model.get("preferences"),t=this.model.getSingleMetadataItem().get("preferences");return e.length?t.reduce(((t,r)=>{const n=e.get(r.id);return n?t.push(n.toJSON()):t.push(r.toJSON()),t}),[]):t.toJSON()},flushChanges(){const e=this.ui.form.serializeArray(),t=this.model.getSingleMetadataItem().get("preferences"),r=this.model.get("preferences");e.forEach((e=>{const n=r.get(e.name)||t.get(e.name),i=n.clone();i.parseAndSetValue(e.value),i.get("value")!==n.get("value")&&r.add(i,{merge:!0})}))}});var O=r(99468),T=r(30997),x=r(26051),A=r(87947),k=r(60526),N=r(58611),R=r.n(N);const L=x.Z.ItemView.extend({template:R(),tagName:"li",className:"well",serializeData:function(){return{file:this.model.get("file")}}});var j=r(46447),V=r.n(j);const U=x.Z.CompositeView.extend({template:V(),className:"files",itemView:L,itemViewContainer:"ul",initialize:function(){this.collection=new A.Z,this.populateParts().always(this.whenRendered((function(){this.$(".loading").addClass("hidden")})))},populateParts:function(){const e=this.collection;function t(e){const t=e.get("Media");if(t&&t.length)return l().each(t,r),t}function r(e){l().each(e.Part,n)}function n(t){e.push(t)}const i=this.model.getSingleMetadataItem();return t(i)?a().Deferred().resolve():i.populate().then((function(){if(!t(i)&&i.has("childrenKey")){const e=new k.Z({containerKey:i.get("childrenKey")},{server:i.server,provider:i.provider,skipCache:!0});return e.fetch().then((function(){e.get("metadataItems").each(t)}))}}))},flushChanges:function(){}});var F=r(54562),B=r(70777),_=(r(62568),r(96799)),z=r(73306),H=r(37722);const W=function(e,t){const r=a()(t),n=r.data("name"),i=r.data("query")||r.data("name"),s=r.data("attr"),o=!!r.data("only-delete"),c=e.model.get(s).toJSON(),d=l().pluck(c,"tag");let u=e.model["original.tag."+n];u||(u=l().clone(c),e.model["original.tag."+n]=u);const p=l().difference(d,l().pluck(u,"tag"));if(p.length){const e=l().map(p,(function(e){return{tag:e}}));e.unshift(u.length,0),u.splice.apply(u,e)}const m=function(t){e.model["original.allTagsRequested."+n]=!0,new z.Z({filter:n,filterType:"string"},{server:e.model.server,section:e.section,type:(0,Z.getMetadataType)(e.model.get("type")).id}).get("options").populate().then(l().bind((function(r){e.model["original.allTagsAvailable."+n]=!0,t(r.map((function(e){return{tag:e.attributes.title}})))}),e))};r.data("original-value",r.val()),r.selectize({options:u,items:d,plugins:["remove_button"],create:!0,hideDropdown:o,labelField:"tag",valueField:"tag",sortField:"tag",searchField:["tag"],highlight:!1,createFilter:function(e){return!l()(this.options).findWhere({tag:e})},onInitialize:function(){o&&(this.$control.off("click mousedown"),this.$control.addClass("no-input"),this.$control_input.prop("disabled",!0))},onChange:function(){e.onLockableFieldChange(r)},onFocus:function(){this.onSearchChange("")},loadingClass:"",load:function(t,r){if(!(i!==n||t.length&&e.canAutocomplete))return void(e.model["original.allTagsRequested."+n]?r():m.call(e,r));if(e.model["original.allTagsAvailable."+n]||0===t.length)return void r();const s={};s[i]=t;const a=new H.Z([],{server:e.model.server,multiMetadataItem:e.model,query:s}),o=i===n?function(e){return e.toJSON()}:function(e){return{tag:e.get(i)}};a.fetch().done((function(e){const t=e.map(o);r(t)})).fail((function(){r()}))},render:{item:function(e,t){return'<div class="item">'+(e.tag?t(e.tag):'<span class="autocomplete-annotate">('+(0,b.Z)("blank")+")</span>")+"</div>"},option:function(e,t){let r;return r=e.tag?t(e.tag):'<small class="autocomplete-annotate">('+(0,b.Z)("blank")+")</small>",'<div class="item">'+r+"</div>"}}})};var G=r(75621),Q=r.n(G),$=r(1123),K=r.n($),q=r(42242),Y=r.n(q),X=r(4134),J=r.n(X),ee=r(88815),te=r.n(ee),re=r(8337),ne=r.n(re),ie=r(27802),se=r.n(ie);const ae=w.Z.extend({templatesByType:{movie:J(),show:ne(),episode:Y(),artist:K(),album:Q(),track:se(),photo:te()},ui:l().extend({tagInputs:".tag-input-hidden"},w.Z.prototype.ui),events:l().extend({"change .lockable-field":"onLockableFieldChange"},w.Z.prototype.events),initialize:function(){this.template=this.templatesByType[this.model.get("type")]||this.templatesByType.movie,this.canAutocomplete=this.model.server.supports("batchEdit"),this.canEditSimilarArtists=this.model.server.supports("editSimilarArtists"),this.getSection()},getSection:function(){let e=this.model.section;if(!e){const t=this.model.get("librarySectionID");e=new _.Z({key:t},{server:this.model.server})}this.section=e},flushChanges:function(){const e=this.ui.form,t=l().reduce(e.serializeArray(),(function(e,t){return e[t.name]=t.value,e}),{}),r=l().reduce(this.ui.tagInputs,(function(e,t){const r=t.selectize,n=a()(t).data("name");return e[a()(t).data("attr")]=l().map(r.items,(function(e){const t=r.options[e];return{tag:t.tag,id:t.id}})),this.model["original.tag."+n]=l().toArray(r.options),e}),{},this);l().each(r,(function(e,t){this.model.get(t).set(e,{parse:!0})}),this),this.model.get("lockedFields").set(this.getLockedFieldsArray(),{parse:!0}),this.model.set(t)},serializeData(){return this.model.get("editableTags").reduce(((e,t)=>(e.editableTags[t]=!0,e)),w.Z.prototype.serializeData.apply(this,arguments))},onRender:function(){const e=this;this.ui.tagInputs.each((function(t,r){W(e,r)}))}});var oe=r(2926),le=r.n(oe);const ce=ae.extend({templatesByType:{movie:le(),show:le(),album:le(),photo:le()},serializeData:function(){const e=c.DB("appModel"),t=e.get("user"),r=ae.prototype.serializeData.apply(this,arguments),n=t.get("features").get(B.d6);return l().extend(r,{showLabels:this.model.server.supports("labels"),escapedLabelsMinVersion:F.Z.labels,hasContentFilterFeature:n,plexPassUrl:t.server.get("plexPassUrl")}),r}});var de=r(99479),ue=r(19963),pe=r(70564),me=r.n(pe),he=Object.defineProperty,ge=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,fe=(e,t,r)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const be={movie:["general","tags","sharing","poster","art","info","advanced"],show:["general","tags","sharing","poster","banner","art","advanced"],season:["general","poster","art","info","advanced"],episode:["general","tags","poster","art","info","advanced"],artist:["general","tags","poster","art","advanced"],album:["general","tags","sharing","poster","art","info","advanced"],track:["general","tags","info","advanced"],photoalbum:["general","poster","art","advanced"],photo:["general","tags","info","advanced"],clip:["general","info","advanced"],collection:["general","sharing","poster","art","info","advanced"]},Ze=["poster","art","banner","info","advanced"];function Se({server:e,provider:t,metadataTypeName:r,sectionKey:n}){const i=new u.Z({key:`/library/sections/${n}`},{server:e,provider:t,includeAdvanced:!0});return i.populate().then((()=>{const e=i.get("types").findWhere({type:r});return e?e.get("fields").filter((e=>"tag"===e.get("type"))).map((e=>e.get("key"))):[]}))}const Pe=de.Z.extend({mixins:[P.Z],name:"editMetadataModal",className:"edit-metadata-modal modal modal-lg fade",template:me(),panes:{general:{constructor:T.Z},tags:{constructor:ae},poster:{constructor:O.Z},art:{constructor:O.Z},banner:{constructor:O.Z},sharing:{constructor:ce},info:{constructor:U},advanced:{constructor:D}},events:((e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&fe(e,r,t[r]);if(ge)for(var r of ge(t))ve.call(t,r)&&fe(e,r,t[r]);return e})({"click .change-pane-btn":"onChangePaneClick","click .save-btn":"onFormSubmit","submit .edit-metadata-form":"onFormSubmit"},de.Z.prototype.events),ui:{saveBtn:".save-btn",message:".form-message",navPane:".modal-nav-pane",loadingIndicator:".modal-body-pane .loading-inline"},regions:{paneRegion:".pane-region"},onlyAfterRender:["saveChanges","showPane","showNav"],initialize:function(e){de.Z.prototype.initialize.apply(this,arguments);const t=e.items||[this.model],r=t[0],n=r.server;this.model=new I.Z({},{server:n,metadataItems:t}),this.on("before:close",this.onBeforeClose),this._initCancelable=(0,f.Z)(r.fetch({usePopulatedParams:!0,data:{includePreferences:"1"}}).then((()=>{const e=(0,y.Z)(r,{onlyIfCached:!1});return this.model.setContext("section",e),this.model.populate().then((()=>e.get("key")))})).then((e=>Se({server:n,provider:r.provider,metadataTypeName:this.model.get("type"),sectionKey:e})))),this._initCancelable.promise.then((t=>{this.model.set({editableTags:t,originalSaveParams:this.model.getSaveParams()}),this.render(),this.showNav(),this.showPane(e.selectedPane||"general"),this.listenTo(g.Z,"shortcut:save",this.saveChanges)}),(({isCanceled:e})=>{e||(this.ui.message.text((0,b.Z)("There was an error editing this item")),this.ui.loadingIndicator.addClass("hidden"))}))},serializeData:function(){const e=this.model.get("type");let t=be[e]||be[Z.MOVIE];this.model.get("isSingleMetadataItem")||(t=l().difference(t,Ze)),this.model.getSingleMetadataItem().has("preferences")||(t=l().difference(t,["advanced"])),this.model.getSingleMetadataItem().get("remoteMedia")&&(t=l().difference(t,["info"]));const r=(0,b.U)("Edit {1}",this.model.get("aggregateTitle"));return{item:this.model.toJSON(),panes:(0,m.Z)(t,(e=>e),(()=>!0)),selectedPane:this.selectedPane,paneTitle:r}},paneConstructorArg:function(){return{type:this.selectedPane}},invalidChangedAttrs:function(e){const t=[],r=this.model.get("type");if(r===Z.TRACK){const r=l().has(e,"artist.id.value")||l().has(e,"artist.title.value")||l().has(e,"album.id.value")||l().has(e,"album.title.value"),n=e["album.id.value"]||e["album.title.value"],i=e["artist.id.value"]||e["artist.title.value"];!r||i&&n||(i||t.push("grandparentTitle"),n||t.push("parentTitle"))}else if(r===Z.ALBUM&&!this.model.get("isSingleMetadataItem")){const r=this.model.get("mixedFields"),n=l().has(e,"artist.title.value")||l().has(e,"artist.id.value"),i=l().includes(r,"ratingKey"),s=l().has(e,"title.value");i&&s&&!n&&t.push("parentTitle")}if(l().has(e,"originallyAvailableAt.value")){let r=e["originallyAvailableAt.value"];if(/^\d{4}$/.test(r)&&(e["originallyAvailableAt.value"]+="-01-01",r=e["originallyAvailableAt.value"]),""!==r){const e=(0,n.Z)((0,i.Z)(r,"yyyy-MM-dd",new Date)),s=(0,n.Z)((0,i.Z)(r,"yyyy-MM-dd HH:mm:ss",new Date));e||s||t.push("originallyAvailableAt")}else this.model.set("originallyAvailableAt",r)}return t},markInvalid:function(e){this.paneRegion.currentView.markInvalid(e)},showNav:function(){this.ui.navPane.removeClass("hidden")},saveChanges:function(){const e=this.ui.saveBtn,t=this.ui.message;if(e.isDisabled())return;t.text(""),this.paneRegion.currentView.flushChanges();const r=[],n=this.model.getSaveParams(),i=this.invalidChangedAttrs(n);if(i.length)return void this.markInvalid(i);e.addClass("active");const s=this.showAdvancedConfirmModal({saving:!0});s.done((()=>{["poster","banner","art"].forEach((e=>{const t=this.model.get(e);t&&r.push(d.Z.execute("changeArtwork",{item:this.model.getSingleMetadataItem(),artworkType:e,artworkRatingKey:t}))})),r.push(this.savePreferences()),r.push(this.model.save());const n=a().when.apply(a(),r);n.done((()=>{const e=c.DB("appStore").dispatch,t=this.model.server.entityID();t&&e((0,p.jR)({serverEntityID:t})),this.hide()})),n.fail((function(){t.text((0,b.Z)("Your changes could not be saved."))})),n.always((function(){e.removeClass("active")}))})),s.fail((()=>{e.removeClass("active"),this.showPane("advanced")}))},savePreferences:function(){const e=this.model.get("preferences");if(!e.length)return a().Deferred().resolve().promise();const t=this.model.getSingleMetadataItem(),r=S.Z.join(["/library/metadata",t.get("ratingKey"),"prefs"],e.getSaveParams()),n=this.model.server.getXHROptions(r,{type:"PUT"}),i=a().ajax(n);return i.done((()=>{const r=t.get("preferences");e.forEach((function(e){r.get(e.id).set("value",e.get("value"))}));const n=c.DB("appStore").dispatch,i=(0,v.Z)({serverIdentifier:this.model.server.get("machineIdentifier"),providerIdentifier:h.Y3,key:t.get("key")});n(E.Z.actions.preferenceChanged({sourceURI:i,preferences:e.toJSON()}))})),i},showAdvancedConfirmModal:function(){if(!this.model.get("preferences").some((function(e){return/^autoDeletion/.test(e.id)})))return a().Deferred().resolve().promise();const e=new ue.Z({title:(0,b.Z)("Confirm Deletion Settings"),message:(0,b.Z)("Deletion settings will take effect immediately! Files may be deleted and this can't be undone. Are you sure?"),confirmLabel:(0,b.Z)("Yes"),cancelLabel:(0,b.Z)("Cancel"),requireDoubleConfirm:!0,doubleConfirmMessage:(0,b.Z)("Multiple files may be deleted."),doubleConfirmLabel:(0,b.Z)("Yes, I'm sure"),hasDanger:!0});return g.Z.trigger("show:modal",e),e.promise},onBeforeClose:function(e){this._initCancelable.cancel()},onPaneShow:function(e,t){this.listenTo(t,"focusSubmit",(function(){this.ui.saveBtn.focus()}))},onPaneHide:function(e,t){t.flushChanges(),this.stopListening(t)},onFormSubmit:function(e){e.preventDefault(),this.saveChanges()}})},24314:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ct});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(45191),l=r(96799),c=r(54562),d=r(80011),u=r(79167),p=r(86418),m=r(74226),h=r(8523),g=r(94450),y=r(10644),v=r(63621),f=r(68939),b=r(73788),Z=r(39582),S=r(85209),P=r(43523),I=r(20683),E=r(26263),w=r(19395),C=r(77054),M=r(41444),D=r(26051),O=r(44817),T=r.n(O);const x=D.Z.ItemView.extend({template:T(),events:{"change input[name]":"onInputChange","change select[name]":"onInputChange"},initialize:function(){this.changes={}},serializeData:function(){return{settings:this.collection.toJSON(),escapedAgentName:a().escape(this.model.agents.get(this.model.get("agent")).get("name"))}},onInputChange:function(e){const t=i()(e.currentTarget),r=t.is(":checkbox")?t.prop("checked"):t.val();this.collection.findWhere({id:t.attr("name")}).set("value",r)}});var A=r(53611),k=r(97577),N=r(70704),R=r(12152),L=r.n(R);const j=L().extend({constructor:function(e,t,r,n){this.exclusiveScanners=t,this.scannerName=r,L().call(this,e,n),this.filterBy(a().bind(this.filterExclusiveScanner,this))},filterExclusiveScanner:function(e){const t=e.get("name"),r=this.exclusiveScanners;if(!r)return!0;const n=this.scannerName,i=-1!==r.indexOf(n),s=-1!==r.indexOf(t);return i?t===n:!s}});var V=r(32975),U=r(13220),F=r(18655);const B=U.Z.extend({name:"ScannerModel",context:["server"],rootPropertyName:"Scanner",syncedAttrs:{name:F.Z.string}}),_=V.Z.extend({name:"ScannerCollection",context:["server","sectionTypeID"],model:B,url:function(){return"/system/scanners/"+this.sectionTypeID},hasExclusiveScanner:function(e){return!!a().intersection(this.pluck("name"),e).length}}),z=D.Z.Layout.extend({ui:{formGroup:".form-group"},onlyAfterRender:["showValidationResult"],serializeData:function(){const e={};return this.model.isNew()?e.add=!0:e.edit=!0,e.section=this.model.toJSON(),e},showValidationResult:function(e){const t=this.ui.formGroup;t.removeClass("has-error"),a().each(e,(function(e){t.filter("."+e+"-group").addClass("has-error")})),this.trigger(e.length?"invalid":"valid")},createMenuOptions:function(e,t){return a().map(e,(function(e){return'<option value="'+e.value+'"'+(e.value===t?" selected":"")+">"+e.label+"</option>"})).join("\n")},getSectionType:function(){if(this.model.sectionType)return this.model.sectionType;const e=this.model.get("type");let t=P.ZP.get(e);return"movie"===e&&this.model.get("agent")===u.Hn&&(t=P.ZP.get("videos")),this.model.sectionType=t,t},setSectionType:function(e){this.model.sectionType=e},populateAgents:function(){const e=this.getSectionType();return e?(this.model.agents||(this.model.agents=new k.Z([],{server:this.model.server,mediaTypeID:e.typeID})),this.model.agents.populate().then((function(e){return e}))):i().Deferred().reject().promise()},populateScanners:function(){const e=this.getSectionType();return e?(this.model.scanners||(this.model.scanners=new _([],{server:this.model.server,sectionTypeID:e.typeID})),this.model.scanners.populate().then((function(e){return e}))):i().Deferred().reject().promise()},populateAgentsProxy:function(){const e=this.getSectionType().exclusiveAgents,t=new N.Z(this.model.agents,e,this.model.get("agent"));return this.model.agentsProxy=t,i().Deferred().resolve(t).promise()},populateScannersProxy:function(){const e=this.getSectionType().exclusiveScanners,t=new j(this.model.scanners,e,this.model.get("scanner"));return this.model.scannersProxy=t,i().Deferred().resolve(t).promise()},populateSectionSettings:function(){if(!this.model.server.supports("sectionSettings"))return i().Deferred().resolve().promise();if(!this.model.settings){const e=new A.Z([],{server:this.model.server}),t={agent:this.model.get("agent")};if(this.model.isNew()){const r=this.getSectionType();t.type=r.typeID,e.url=I.Z.join(["/library/sections/prefs"],t)}else e.url=I.Z.join(["/library/sections/",this.model.id,"/prefs"],t);this.model.settings=e}return this.model.settings.populate().then((()=>(!(!this.model.isNew()||"music"!==this.model.get("type")||!this.model.server.supports("premiumMusic")||this.model.settings.findWhere({id:"importFromiTunes"})||!this.model.server.get("desktop").get("settings").findWhere({id:"iTunesLibraryXmlPath"}))&&this.model.settings.unshift({type:"bool",id:"importFromiTunes",value:!1,label:(0,b.Z)("Import from iTunes"),summary:(0,b.Z)("Importing from iTunes will import your music playlists. It will also import your ratings, the date you added the music, as well as play and skip counts for tracks in your library.")}),this.model.settings)))},populateSectionAgentSettings:function(){if(!this.model.agentSettings){const e=new A.Z([],{server:this.model.server,url:I.Z.join(["/:/plugins/",this.model.get("agent"),"/prefs"])});this.model.agentSettings=e}return this.model.agentSettings.populate()},onModalClose:function(){this.model.scanners=null,this.model.scannersProxy=null,this.model.agents=null,this.model.agentsProxy=null,this.model.settings=null}});var H=r(55902),W=r.n(H);const G=D.Z.ItemView.extend({template:W(),events:{"change [name]":"onEditSectionSettingInputChange"},serializeData:function(){return{settings:this.collection.toJSON(),edit:!this.model.isNew()}},onEditSectionSettingInputChange:function(e){const t=i()(e.currentTarget),r=t.attr("name");if("importFromiTunes"===r)return void this.model.set(r,!0);const n=t.is(":checkbox")?t.prop("checked"):t.val();this.collection.findWhere({id:r}).set("value",n)}});var Q=r(24833),$=r.n(Q);const K=z.extend({template:$(),ui:a().extend({sectionAgent:"#edit-section-agent",sectionScanner:"#edit-section-scanner",thumbnailsCheckbox:'input[name="enableBIFGeneration"]',agentGroup:".agent-group",scannerGroup:".scanner-group"},z.prototype.ui),events:{"change #edit-section-agent":"onEditSectionAgentChange","change #edit-section-scanner":"onEditSectionScannerChange","click .delete-thumbnails-btn":"onThumbnailsDeleteClick"},regions:{sectionSettingsRegion:".section-settings-region",agentSettingsRegion:".section-agent-settings-region"},onlyAfterRender:["renderSectionAgent","renderSectionScanner","renderSectionSettings","renderSectionAgentSettings"].concat(z.prototype.onlyAfterRender),initialize:function(){this.populateCollections()},onRender:function(){this.model.agents.populate(),this.model.scanners.populate()},validate:function(e){const t=[];return e.get("agent")||t.push("agent"),e.get("scanner")||t.push("scanner"),t},renderSectionSettings:function(){const e=new G({model:this.model,collection:this.model.settings});this.sectionSettingsRegion.show(e)},renderSectionAgentSettings:function(){const e=new x({model:this.model,collection:this.model.agentSettings});this.agentSettingsRegion.show(e)},populateCollections:function(){const e=this.populateAgents(),t=this.populateScanners(),r=this.populateSectionSettings(),n=this.populateSectionAgentSettings();return this.populateAgentsProxy(),this.populateScannersProxy(),e.then(a().bind(this.onAgentsPopulate,this)),t.then(a().bind(this.onScannersPopulate,this)),r.then(a().bind(this.renderSectionSettings,this)),n.then(a().bind(this.renderSectionAgentSettings,this)),i().when(e,t,r,n).then(a().bind(this.validate,this,this.model))},renderSectionAgent:function(){const e=this.model.agentsProxy,t=this.createMenuOptions(e.map((function(e){return{label:e.get("name"),value:e.get("identifier")}})),this.model.get("agent"));this.ui.sectionAgent.html(t),e.length>1&&this.ui.agentGroup.removeClass("hidden")},renderSectionScanner:function(){const e=this.model.scannersProxy,t=this.createMenuOptions(e.map((function(e){return{label:e.get("name"),value:e.get("name")}})),this.model.get("scanner"));this.ui.sectionScanner.html(t),e.length>1&&this.ui.scannerGroup.removeClass("hidden")},updateSectionAgent:function(e){const t=this.model.get("scanner");this.model.set("agent",e),this.agentSettingsRegion.close();const r=this.model.agents.get(e);if(r){const n=r.get("languages"),i=this.model.get("language"),s=this.getSectionType();if(!n.get(i)){let e=n.findWhere({default:!0});e||2!==i.search("-")||(e=n.get(i.substr(0,2))),e||(e=n.get(s.defaultLanguage)||n.first()),this.model.set("language",e.get("code"))}if(this.model.agentSettings=null,this.populateSectionAgentSettings().then(a().bind(this.renderSectionAgentSettings,this)),this.model.settings=null,this.populateSectionSettings().then(a().bind(this.renderSectionSettings,this)),e===s.mutual.agent)this.model.set("scanner",s.mutual.scanner),this.renderSectionScanner();else if(this.model.get("scanner")===s.mutual.scanner){const e=this.model.scanners.find((e=>e.get("name")!==t));this.model.set("scanner",e.get("name")),this.renderSectionScanner()}}this.showValidationResult(this.validate(this.model))},onEditSectionAgentChange:function(e){const t=i()(e.currentTarget).val();this.updateSectionAgent(t)},onEditSectionScannerChange:function(e){const t=i()(e.currentTarget).val(),r=this.model.get("agent"),n=this.getSectionType();if(this.model.set("scanner",t),t===n.mutual.scanner)this.updateSectionAgent(n.mutual.agent),this.renderSectionAgent();else if(this.model.get("agent")===n.mutual.agent){const e=this.model.agents.find((e=>e.get("identifier")!==r));this.updateSectionAgent(e.get("identifier")),this.renderSectionAgent()}this.showValidationResult(this.validate(this.model))},onAgentsPopulate:function(){this.renderSectionAgent()},onScannersPopulate:function(){this.renderSectionScanner()},onThumbnailsDeleteClick:function(e){e.preventDefault(),M.Z.execute("deleteSectionThumbnails",{section:this.model}).done(this.whenRendered((function(){this.ui.thumbnailsCheckbox.prop("checked",!1)})))}});var q=r(23682),Y=r.n(q);const X=z.extend({template:Y()});var J=r(43651),ee=r.n(J);const te=D.Z.ItemView.extend({template:ee(),className:"row",events:{"click .remove-path-btn":"onRemovePathClick"},onRemovePathClick:function(e){e.preventDefault(),this.model.trigger("destroy",this.model,this.model.collection)}}),re=D.Z.CollectionView.extend({itemView:te});var ne=r(36675),ie=r(36375),se=r(14511),ae=r.n(se);const oe=D.Z.ItemView.extend({tagName:"li",className:"striped-list-item browse-directory-list-item disabled",template:ae(),serializeData:function(){return{filePath:this.model.toJSON()}}});var le=r(2186),ce=r.n(le);const de=D.Z.CompositeView.extend({template:ce(),itemView:oe,itemViewContainer:".js-file-list-items",bindings:{".js-file-list-truncated-message":{modelAttribute:"truncatedFilesCount",formatter:e=>e?(0,b.Z)("and {truncatedFilesCount} more",{truncatedFilesCount:e}):null}}});var ue=r(93798),pe=r.n(ue);const me=D.Z.ItemView.extend({tagName:"li",className:"striped-list-item browse-directory-list-item",template:pe(),ui:{link:"a",spinner:".loading"},serializeData:function(){return{filePath:this.model.toJSON(),isRoot:!this.model.parent}},select:function(e){this.ui.link.addClass("selected"),this.ui.spinner.toggleClass("hidden",!e)},unselect:function(){this.ui.link.removeClass("selected"),this.ui.spinner.addClass("hidden")}}),he=D.Z.CollectionView.extend({tagName:"ul",className:"list browse-directory-list",itemView:me,selectedFilePath:null,events:{"click a":"onDirectoryClick"},collectionEvents:{reset:"onReset"},startLoadingItem:function(e){this.selectedFilePath&&this.unselectItem(this.selectedFilePath),this.selectedFilePath=e;const t=this.children.findByModel(e);t&&t.select(!0)},stopLoadingItem:function(e){const t=this.children.findByModel(e);t&&t.select(!1)},unselectItem:function(e){this.selectedFilePath=null;const t=this.children.findByModel(e);t&&t.unselect()},onReset:function(){this.parentFilePath&&this.collection.add(this.parentFilePath,{at:0})},onDirectoryClick:function(e){e.preventDefault();const t=i()(e.currentTarget).data("key"),r=this.collection.get(t)||this.parentFilePath;this.trigger("change:path",r),this.options.isRoot||(r.parent.parent?(this.parentFilePath=r.parent.parent.clone(),this.parentFilePath.set({title:".. [Back]",isBackShortcut:!0})):this.parentFilePath=null)}});var ge=r(99479),ye=r(62507),ve=r.n(ye);const fe=ge.Z.extend({name:"addFolderModal",className:"add-folder-modal modal fade",template:ve(),events:a().extend({"submit form":"onSubmitForm"},ge.Z.prototype.events),ui:{path:'input[name="path"]'},regions:{rootList:".home-directory-container",childrenList:".path-container",childrenFileList:".file-container"},initialize:function(e){ge.Z.prototype.initialize.apply(this,arguments),this.rootPathList=new ie.Z({},{server:e.server,includeFiles:1}),this.childrenPathList=new ie.Z({},{server:e.server,includeFiles:1}),this.loadRootPaths()},loadRootPaths:function(){this.rootPathList.fetch().done(this.whenRendered((function(){const e=this.rootPathList.get("paths").where({home:!0}),t=a().first(e)||this.rootPathList.get("paths").first();this.rootList.currentView.startLoadingItem(t),this.loadChildrenPaths(t)})))},loadChildrenPaths:function(e){ne.Z.abortAll("addFolderModal");const t=e.get("children"),r=t.fetch({scope:"addFolderModal"});r.done(this.whenRendered((function(){this.ui.path.val(e.get("path")),this.childrenPathList.get("paths").reset(t.get("paths").models),this.childrenPathList.get("files").reset(t.get("files").models),this.childrenPathList.set("truncatedFilesCount",t.get("truncatedFilesCount"))}))),r.fail(this.whenRendered((function(){this.childrenList.currentView.unselectItem(e),h.Z.trigger("show:alert",{type:"error",message:(0,b.Z)("Unable to load contents of '{1}'",e.get("path"))})}))),r.always(this.whenRendered((function(){this.rootList.currentView.stopLoadingItem(e)})))},onRender:function(){ge.Z.prototype.onRender.apply(this,arguments);const e=new he({isRoot:!0,collection:this.rootPathList.get("paths")}),t=new he({collection:this.childrenPathList.get("paths")}),r=new de({model:this.childrenPathList,collection:this.childrenPathList.get("files")});this.listenTo(e,"change:path",this.onRootPathChange),this.listenTo(t,"change:path",this.onChildrenPathChange),this.rootList.show(e),this.childrenList.show(t),this.childrenFileList.show(r)},onRootPathChange:function(e){this.childrenList.currentView.parentFilePath=null,this.rootList.currentView.startLoadingItem(e),this.loadChildrenPaths(e)},onChildrenPathChange:function(e){this.childrenList.currentView.startLoadingItem(e),this.loadChildrenPaths(e)},onSubmitForm:function(e){e.preventDefault(),this.trigger("add:folder",this.ui.path.val()),this.hide()}});var be,Ze,Se=r(55888),Pe=r.n(Se),Ie=Object.defineProperty,Ee=Object.defineProperties,we=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,Oe=(e,t,r)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Te=z.extend({template:Pe(),fieldNames:["Location"],regions:{pathsRegion:".paths-region"},ui:(be=((e,t)=>{for(var r in t||(t={}))Me.call(t,r)&&Oe(e,r,t[r]);if(Ce)for(var r of Ce(t))De.call(t,r)&&Oe(e,r,t[r]);return e})({},z.prototype.ui),Ze={addFolderBtn:".add-folder-btn",addFolderPopulating:".add-folder-populating",addFolderError:".add-folder-error"},Ee(be,we(Ze))),events:{"click .add-folder-btn":"onAddFolderClick","change input[name=path]":"onFolderChange"},onlyAfterRender:["renderSectionLocation"].concat(z.prototype.onlyAfterRender),initialize:function(){this.listenTo(this.model.get("locations"),{add:this.onCollectionChange,remove:this.onCollectionChange}),this.renderSectionLocation(),this.showValidationResult(this.validate(this.model))},validate:function(e){const t=[];return e.get("locations").length||t.push("locations"),t},renderSectionLocation:function(){const e=new re({collection:this.model.get("locations")});this.pathsRegion.show(e)},onCollectionChange:function(){this.showValidationResult(this.validate(this.model))},onAddFolderClick:function(e){e.preventDefault();const t=new fe({server:this.model.server});this.listenToOnce(t,"add:folder",this.onAddFolder),h.Z.trigger("show:modal",t)},onAddFolder:function(e){if(!e)return;const t={path:e};this.model.get("locations").findWhere(t)||this.model.get("locations").add(t)},onFolderChange:function(e){const t=i()(e.currentTarget),r=t.prop("defaultValue"),n=t.val();n?(this.model.get("locations").findWhere({path:r}).set("path",n),t.prop("defaultValue",n)):t.val(r)}});var xe=r(72631),Ae=r.n(xe);const ke=ge.Z.extend({name:"plexPassModal",template:Ae(),serializeData:function(){return{plexPassUrl:o.DB("appModel").get("user").server.get("plexPassUrl"),escapedFriendlyName:a().escape(this.model.get("friendlyName")),isClaimed:this.model.get("isClaimed")}}});var Ne=r(38139),Re=r.n(Ne);const Le=z.extend({template:Re(),ui:{chooseLibrary:".choose-library"},events:{"click .choose-library":"onChooseLibraryClick"},modelEvents:{"change:agent":"onSectionAgentChange","change:scanner":"onSectionScannerChange"},onlyAfterRender:["updateSelectedOffering"],initialize:function(){this.hasPremiumMusic=this.model.server.hasOwnerFeature("premium_music_metadata"),this.updateSelectedOffering()},serializeData:function(){const e=o.DB("appModel").get("user");return{hasPremiumMusic:this.hasPremiumMusic,plexPassUrl:e.server.get("plexPassUrl"),hasLyrics:this.model.server.get("transcoderLyrics")}},updateSelectedOffering:function(){const e=this.model.get("agent"),t=this.model.get("scanner");this.ui.chooseLibrary.find("input").prop("checked",!1);let r=this.ui.chooseLibrary.filter('[data-agent="'+e+'"][data-scanner="'+t+'"]').find("input");r.length||(r=this.ui.chooseLibrary.not("[data-agent][data-scanner]").find("input")),r.prop("checked",!0)},onChooseLibraryClick:function(e){const t=i()(e.currentTarget),r=t.data("agent"),n=t.data("scanner");!r&&!n||this.hasPremiumMusic?(this.model.agentSettings=null,this.model.set({agent:r||this.getSectionType().defaultAgent,scanner:n||this.getSectionType().defaultScanner})):h.Z.trigger("show:modal",new ke({model:this.model.server}))},onSectionAgentChange:function(){this.updateSelectedOffering()},onSectionScannerChange:function(){this.updateSelectedOffering()}});var je=r(70777),Ve=r(35172),Ue=r(56346),Fe=r(6400),Be=r(6909),_e=r(30311),ze=r(32714),He=r(8946),We=r(56315);const Ge=function(e){switch(e){case P.MB:return Fe.l;case P.xF:return Be.H;case P.n1:return _e.L;case P.TV:return ze.W;case P.FM:return He.O;case P.S7:return We.Z}};var Qe=r(28230),$e=r.n(Qe),Ke=Object.defineProperty,qe=Object.defineProperties,Ye=Object.getOwnPropertyDescriptors,Xe=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable,tt=(e,t,r)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rt=(e,t)=>{for(var r in t||(t={}))Je.call(t,r)&&tt(e,r,t[r]);if(Xe)for(var r of Xe(t))et.call(t,r)&&tt(e,r,t[r]);return e},nt=(e,t)=>qe(e,Ye(t));function it(e,t){return(null==e?void 0:e.key)!==P.S7||t.get("audiobook")}const st=z.extend({template:$e(),ui:a().extend({sectionTypes:".wizard-block",sectionTitle:"#edit-section-title",sectionLanguage:"#edit-section-language",sectionLanguageGroup:".language-group"},z.prototype.ui),modelEvents:{"change:type":"onSectionTypeChange","change:title":"onSectionTitleChange","change:language":"onSectionLanguageChange"},events:{"click .section-type":"onSectionTypeClick","keyup #edit-section-title":"onEditSectionTitleChange","change #edit-section-title":"onEditSectionTitleChange","change #edit-section-language":"onEditSectionLanguageChange"},onlyAfterRender:["renderSectionLanguage","updateSectionTypesWizardBlocks","updateSectionLanguage","updateSectionTitle"].concat(z.prototype.onlyAfterRender),initialize:function(e){this.populateCollections(),this.isDefaultSection=e.isDefaultSection},serializeData:function(){const e=z.prototype.serializeData.apply(this,arguments),t=o.DB("appModel"),r=t.get("user"),n=r.get("features").get(je.Ix);e.sectionTypes=P.ZP.getAll().reduce(((e,t)=>((t.key!==P.S7||t.key===P.S7&&n)&&e.push(nt(rt({},t),{typeIcon:(0,Ue.Z)(Ge(t.key))})),e)),[]);const i=this.getSectionType();i&&(e.currentSectionKey=i.key);const s=this.model.get("updatedAt");return s&&(e.updatedAt=(0,Ve.Z)(s)),e.canChangeType=this.model.isNew()&&!this.isDefaultSection,e.hasType=!!this.model.get("type"),e.isInitialTypeSupported=it(this.model.sectionType,this.model.server),e.escapedUpdatedAt=a().escape(e.updatedAt),e},validate:function(e){const t=[];return e.get("type")||t.push("type"),e.get("title")||t.push("title"),e.get("language")||t.push("language"),e.get("isCollectionsPopulated")||t.push("collectionsNotPopulated"),it(e.sectionType,e.server)||t.push("unsupportedType"),t},populateCollections:function(){this.model.set("isCollectionsPopulated",!1);const e=this.populateAgents(),t=this.populateScanners(),r=this.getSectionType();let n=i().when(r,e,t,this.model.server.get("myPlexSubscription")&&this.model.server.supports("premiumMusic"));return this.model.isNew()&&(n=n.then(a().bind(this.model.setAgentAndScanner,this.model))),n=n.then(e).then(a().bind(this.onAgentsPopulate,this)).then(a().bind((function(){this.showValidationResult(this.validate(this.model))}),this)).then((()=>{this.model.set("isCollectionsPopulated",!0)})),n},renderSectionLanguage:function(){let e=this.model.get("language");const t=this.model.agents.get(this.model.get("agent"));if(!t)return void this.ui.sectionLanguageGroup.hide();const r=t.get("languages");if(!r.get(e)){const t=r.findWhere({default:!0});let n;if(t&&(n=t.get("code")),!n){const e=this.model.get("type");n=P.ZP.get(e).defaultLanguage}this.model.set("language",n,{silent:!0}),e=n}const n=r.map((function(e){return{label:e.get("name"),value:e.id}}));this.updateSectionLanguage(),this.ui.sectionLanguage.html(this.createMenuOptions(n,e))},updateSectionTypesWizardBlocks:function(){this.ui.sectionTypes.removeClass("selected"),this.ui.sectionTypes.filter('[data-key="'+this.model.get("type")+'"]').addClass("selected"),this.$el.addClass("section-type-chosen")},updateSectionLanguage:function(){this.ui.sectionLanguage.val(this.model.get("language"))},updateSectionTitle:function(){const e=this.ui.sectionTitle.val(),t=this.model.get("title");e!==t&&this.ui.sectionTitle.val(t)},onSectionTypeClick:function(e){e.preventDefault();const t=i()(e.currentTarget);if(!t.hasClass("selectable"))return;const r=t.data("key"),n={type:r},s=P.ZP.get(r);this.model.get("title")||(n.title=s.title),this.model.set(n)},onEditSectionTitleChange:function(e){const t=i()(e.currentTarget);this.model.set("title",t.val()),this.showValidationResult(this.validate(this.model))},onEditSectionLanguageChange:function(e){const t=i()(e.currentTarget);this.model.set("language",t.val()),this.showValidationResult(this.validate(this.model))},onSectionTypeChange:function(e,t){this.updateSectionTypesWizardBlocks();const r=P.ZP.get(t);if(!this.model.get("language")){const e=r.defaultLanguage;this.model.set("language",e)}const n=this.model.get("title"),i=this.model.previous("type"),s=P.ZP.get(i),a=s&&s.title;n&&n!==a||this.model.set("title",r.title),this.setSectionType(r),this.model.agents=null,this.model.scanners=null,this.model.settings=null;const o=it(r,this.model.server);this.$el.toggleClass("is-type-unsupported",!o),o&&this.populateCollections()},onSectionTitleChange:function(e,t){this.updateSectionTitle(),this.showValidationResult(this.validate(this.model))},onSectionLanguageChange:function(e,t){this.updateSectionLanguage()},onAgentsPopulate:function(e){this.renderSectionLanguage()}});var at=r(16812),ot=r(97892),lt=r.n(ot);const ct=ge.Z.extend({mixins:[w.Z],name:"editSectionModal",className:"edit-section-modal modal modal-lg fade",template:lt(),panes:{type:{constructor:st,nextPane:"folders",dependentPanes(){return this.showFolders?["folders"]:["options","advanced"]}},folders:{constructor:Te,nextPane:"options",dependentPanes:["options","advanced"]},options:{constructor:Le,nextPane:"advanced"},advanced:{constructor:K},error:{constructor:X}},panesModel:"tempModel",ui:{sidebar:".modal-nav-list",optionsBtn:".options-btn",saveBtn:".save-btn",message:".form-message",headerSectionType:".section-type-title"},regions:{paneRegion:".pane-region"},events:a().extend({"click .change-pane-btn":"onChangePaneClick","click .save-btn":"onSaveClick","submit .edit-section-type-form":"onGeneralFormSubmit"},ge.Z.prototype.events),onlyAfterRender:["showPane","updateMessage","updateSectionTitle","updateSectionTitleDestabilized","updateSaveBtn"],paneConstructorArg:function(){return{isDefaultSection:this.isDefaultSection}},initialize:function(e){ge.Z.prototype.initialize.apply(this,arguments),this.server=e.server,this.redirect=e.redirect,this.isDefaultSection=e.isDefaultSection,this.isLoading=!0,this.model?(this.tempModel=this.model.clone(),this.tempModel.collection=this.model.collection):this.tempModel=new l.Z({},{server:this.server,collection:this.server.get("sections")}),this.listenTo(this.tempModel,"change:type",this.onSectionTypeChange),this.tempModel.isNew()&&e.seedAttrs&&this.tempModel.set(this.tempModel.parse(e.seedAttrs)),this._deferred=i().Deferred(),this.promise=this._deferred.promise();const t=this.server.get("providers");t.populate().done(this.whenRendered((()=>{const r=t.get(m.Y3).get("features").get(p.Z.MANAGE).get("automaticLibraryFolders");this.showFolders=!r,this.isLoading=!1,this.render(),this.showPane(e.selectedPane||"type")})))},serializeData:function(){const e=this.tempModel,t=e.isNew(),r=e&&(0,b.U)("Edit {1}",e.get("title"));return{isLoading:this.isLoading,add:t,edit:!t,paneTitle:r,section:null==e?void 0:e.toJSON(),selectedPane:this.selectedPane,showFolders:this.showFolders}},updateMessage:function(e){this.ui.message.text(e||"")},updateSaveBtn:function(){const e=this.ui.saveBtn,t=this.panes[this.selectedPane],r=a().bind((function(r){const n=t.nextPane,i=this.tempModel.isNew(),s=!t.constructor.prototype.validate||0===t.constructor.prototype.validate(this.tempModel).length,a=!this.getReachablePanes().isAnyInvalid,o=this.tempModel.get("isCollectionsPopulated");let l;this.ui.optionsBtn.toggleClass("hidden",!r.showOptions);const c=o&&(a||i&&s);l=n,r.showOptions||"options"!==n||(l=!1),a&&(l=!1),r.showOptions&&"options"===n&&(l=!0),r.showAdvanced&&"advanced"===n&&(l=!0),this.tempModel.isNew()&&"folders"===n&&(l=!0),e.toggleClass("save",!l),e.toggleClass("next",!!l),e.toggleClass("disabled",!c)}),this),n=this.tempModel.server,i=this.tempModel.sectionType,s=i&&"music"===i.key&&n.supports("premiumMusic"),o=this.tempModel.isNew();s?this.paneRegion.currentView.populateAgents().then((function(e){const t=e.findWhere({identifier:u.zR}),n=o&&t;r({showOptions:n,showAdvanced:n})})):r({})},updateSectionTitle:function(){const e=P.ZP.get(this.tempModel.get("type"));if(e){this.updateSectionTitleDestabilized();const t=a().escape(e.title);this.ui.headerSectionType.html(t)}},updateSectionTitleDestabilized:function(){this.ui.headerSectionType.addClass("section-type-title-unstable"),this.ui.headerSectionType.triggerReflow(),this.ui.headerSectionType.removeClass("section-type-title-unstable")},save:function(){const e=this.ui.saveBtn;this.updateMessage(""),e.addClass("active");const t=this.saveModel();t.always((function(){e.removeClass("active")})),t.fail(a().bind((function(e){503===e.status?h.Z.trigger("show:modal",new at.Z({model:this.server})):this.updateMessage((0,b.Z)("Your changes could not be saved."))}),this)),t.then(a().bind((function(){const e=this.model.server.entityID(),t=(0,o.DB)("appStore").dispatch;if(t((0,d.lm)({serverEntityID:e})),t((0,d.tU)({serverEntityID:e})),!this.redirect)return this._deferred.resolve(),void this.hide();const r={machineIdentifier:this.model.server.get("machineIdentifier"),isCloud:this.model.server.get("isCloud")},n={identifier:m.Y3,isLibraryProvider:!0},i={id:this.model.id},s=this.model.get("type"),a={};a.pivot=(0,g.Z)(this.model.server.get("version"),c.Z.pivotIDs)?"library":(0,v.Z)(this.model.id,s),s===S.ARTIST&&(a.key=I.Z.join(["/library/sections",this.model.id,"all"],{type:(0,S.getMetadataType)(S.ALBUM).id,sort:"addedAt:desc"}));const l=(0,E.Z)(r,n,i,a);window.location.hash=l,this._deferred.resolve(),this.hide()}),this))},saveModel:function(){const e=this.getSectionSettingsParams(),t=e?{data:{prefs:e}}:{};let r;return this.tempModel.isNew()?(r=this.tempModel.save(null,t),r=r.then(a().bind((function(t,r,n){let i=y.Z.parseXML(t);if(201!==n.status)return;if(i.Directory&&(i=i.Directory),!i.key){const e=n.getResponseHeader("Location");e&&(i.key=e.substring(e.lastIndexOf("/")+1))}const s=this.server;s.supports("advancedFilters")&&(i.filters=!0),this.model=new l.Z(i,{parse:!0,server:s}),s.get("sections").add(this.model);const a=null==e?void 0:e.hidden,c="string"==typeof a?parseInt(a,10):null;if(1!==c&&2!==c){const e=s.get("providers").get(m.Y3),t=e?(0,Z.Z)(e.toJSON(),this.model.toJSON()):null,r=t?t.key:null;e&&r&&(0,o.DB)("appStore").dispatch((0,C.W1)({sources:[{key:(0,f.Z)(r,s.get("machineIdentifier"),e.get("identifier"),i.key),sourceType:r,serverEntityID:s.entityID(),machineIdentifier:s.get("machineIdentifier"),providerEntityID:e.entityID(),providerIdentifier:e.get("identifier"),providerMetricsIdentifier:e.get("metricsIdentifier"),directoryID:i.key,directoryIcon:null,title:this.model.get("title"),serverFriendlyName:s.get("friendlyName"),serverSourceTitle:s.get("sourceTitle"),isLocal:s.get("isPrivateConnection"),isUnavailable:!1,isOutOfDate:!1,isUnclaimedServer:!s.get("isClaimed"),isFullOwnedServer:s.get("isFullOwnedServer"),isProviderReady:!0}],interaction:!1}))}return n}),this))):(this.model.copy(this.tempModel),r=this.model.save(null,t)),r=r.then(a().bind(this.saveAgentSettings,this)),r},saveSettings:function(e){const t=i().Deferred().resolve(this.model).promise();if(!this.server.supports("sectionSettings"))return t;if(!e)return t;const r=I.Z.join(["/library/sections/",this.model.id,"/prefs"],e),n=a().extend(this.server.getXHROptions(r),{type:"PUT"});return i().ajax(n).promise().then((function(){return t}))},saveAgentSettings:function(){const e=i().Deferred().resolve(this.model).promise(),t=this.tempModel.agentSettings;if(!this.tempModel.agentSettings)return e;const r=this.getSettingsChanges(t);if(a().isEmpty(r))return e;const n=t.first(),s=n.getSaveParams(r),o=a().result(t,"url"),l=I.Z.join([o,"/set"],s),c=n.server.getXHROptions(l);return i().ajax(c).promise().then((function(){return e}))},getSectionSettingsParams:function(){const e=this.tempModel.settings;if(!e)return;const t=this.getSettingsChanges(e);return a().isEmpty(t)?void 0:e.first().getSaveParams(t)},getSettingsChanges:function(e){return e.filter((function(e){return e.changedAttributes()})).reduce((function(e,t){let r=t.get("value");return"bool"===t.get("type")&&(r=r?"1":"0"),e[t.get("id")]=r,e}),{})},onPaneShow:function(e,t){this.listenTo(t,"valid",this.updateSaveBtn),this.listenTo(t,"invalid",this.updateSaveBtn),this.updateSaveBtn()},onPaneHide:function(e,t){this.stopListening(t,"valid",this.updateSaveBtn),this.stopListening(t,"invalid",this.updateSaveBtn)},onChangePaneClick:function(e){e.preventDefault();const t=this.$(e.currentTarget);t.isDisabled()||this.showPane(t.data("pane"))},onSaveClick:function(e){e.preventDefault();const t=this.ui.saveBtn;if(!t.isDisabled())if(t.hasClass("next")){let e=this.panes[this.selectedPane].nextPane;"folders"!==e||this.showFolders||(e=this.ui.sidebar.find(".options-btn").isDisabled()?"advanced":"options"),e&&!this.ui.sidebar.find("."+e+"-btn").isDisabled()&&this.showPane(e)}else this.save()},onGeneralFormSubmit:function(e){this.onSaveClick(e)},onSectionTypeChange:function(){this.updateSaveBtn()}})},60148:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(13469),i=r.n(n),s=r(99479),a=r(78319),o=r.n(a);const l=/^Mac/.test(window.navigator.platform);function c(e){return i().reduce(e,(function(e,t,r){const n=d(t);if(0===r)return e.concat(n);const i=n.length>1;return e.concat({plain:!0,split:i,s:"or"},n)}),[])}function d(e){const t=e.match(/(.+) (.+)/);if(t)return d(t[1]).concat({plain:!0,s:"then"}).concat(d(t[2]));const r=e.match(/(.+)\+(\S+)/);if(r)return d(r[1]).concat({plain:!0,s:"+"}).concat(d(r[2]));const n=[[/command/,""],[/up/,""],[/down/,""],[/left/,""],[/right/,""]];return"alt"===e&&l&&n.push([/alt/,"option"]),[{s:i().reduce(n,(function(e,t){return e.replace(t[0],t[1])}),e)}]}const u=s.Z.extend({name:"keyboardShortcutsModal",className:"keyboard-shortcuts-modal modal fade",template:o(),orderedGroups:[{group:"navigation",label:"Navigation"},{group:"actions",label:"Actions"},{group:"player",label:"Player"}],initialize:function(e){s.Z.prototype.initialize.apply(this,arguments),this.shortcuts=e.shortcuts},serializeData:function(){const e={};return i().each(this.shortcuts,(function(t){const r=t.group;"function"==typeof t.isSupported&&!t.isSupported()||t.visible&&!t.visible()||(e[r]||(e[r]=[]),e[r].push(this.humanizeShortcut(t)))}),this),{groups:i().map(this.orderedGroups,(function(t){const r=i().clone(t);return r.shortcuts=e[t.group],r}),this)}},humanizeShortcut:function(e){return(e=i().clone(e)).keys=c(e.keys),e.label=e.label(),e}})},16812:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(13469),i=r.n(n),s=r(86022),a=r(99479),o=r(1582),l=r(99673),c=r.n(l);const d=a.Z.extend({name:"libraryFailureModal",className:"confirm-modal modal modal-sm fade",template:c(),events:i().extend({"click .confirm-btn":"hide"},a.Z.prototype.events),serializeData(){return{isSignedIn:this.model.get("myPlexSigninState")===s.Hq,hasPlexSubscription:this.model.get("myPlexSubscription"),serverSettingsRoute:(0,o.Z)(this.model.id,"settings","general")}}})},86230:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(99479);const l=o.Z.extend({className:"select-modal modal modal-sm fade",events:a().extend({"click a":"onClick"},o.Z.prototype.events),initialize:function(){o.Z.prototype.initialize.apply(this,arguments),this.promise=i().Deferred()},onRender:function(){o.Z.prototype.onRender.apply(this,arguments)},onHide:function(){o.Z.prototype.onHide.apply(this,arguments),this.promise.reject()},onClick:function(e){e.preventDefault(),this.promise.resolve(i()(e.currentTarget).data("value")),this.hide()}})},95117:(e,t,r)=>{"use strict";r.d(t,{Z:()=>X});var n=r(19755),i=r.n(n),s=r(47970),a=r(8539),o=r(87947),l=r(58090),c=r(13469),d=r.n(c),u=r(54122),p=r(10644);const m=u.Z.extend({idAttribute:"title",whitelistedAttrs:["title","selected"],convert:function(e){const t=d().isObject(e)?e:p.Z.parseXML(e);return p.Z.parseBoolean(t,"selected"),t},parse:function(e){let t=this.convert(e);return t=d().pick(t,this.whitelistedAttrs),t}}),h=o.Z.extend({model:m,url:"/clients/profiles?type="+l.Z.LOCAL,parse:function(e){return this.convert(e,"Profile")}}),g=u.Z.extend({name:"VersionTargetModel",whitelistedAttrs:["id","tag","tagType","MediaSettings","Device"],convert:function(e){const t=d().isObject(e)?e:p.Z.parseXML(e);return p.Z.parseInteger(t,"id"),t},parse:function(e){let t=this.convert(e);return t=d().pick(t,this.whitelistedAttrs),t}}),y=o.Z.extend({model:g,url:"/library/tags?type="+l.Z.LOCAL,comparator:function(e){return e.get("MediaSettings").maxVideoBitrate},parse:function(e){return this.convert(e,"Tag")}});var v=r(99479),f=r(26051),b=r(566),Z=r.n(b);const S=f.Z.ItemView.extend({className:"modal-body",template:Z(),events:{"click .try-again-link":"onTryAgainClick"},serializeData:function(){return{status:this.options.status}},onTryAgainClick:function(e){e.preventDefault(),this.triggerMethod("request:state","loading")}});var P=r(96799),I=r(60526),E=r(97968),w=r(24765),C=r(73788),M=r(69407),D=r(63774),O=r.n(D);const T=f.Z.ItemView.extend({className:"convert-location-container form-group",template:O(),events:{"change select[name=storageLocation]":"onLocationChange"},serializeData:function(){var e;return{disableLocation:!this.model.isNew(),selectedLocationID:this.model.get("locationID"),locations:null==(e=this.model.section)?void 0:e.get("locations").toJSON()}},onLocationChange:function(e){this.model.set("locationID",parseInt(e.currentTarget.value,10))}});var x=r(54834),A=r(85209),k=r(73631),N=r.n(k);const R=f.Z.ItemView.extend({className:"convert-policy-container",template:N(),ui:{policyUnwatchedInput:"#convert-policy-unwatched",policyScopeInput:"#convert-policy-scope",policyValueInput:"#convert-policy-value",policyWarning:".convert-warning"},events:{"change input[name=policyUnwatched]":"onPolicyUnwatchedChange","change input[name=policyScope]":"onPolicyScopeChange","keyup input[name=policyValue]":"onPolicyValueChange","change input[name=policyValue]":"onPolicyValueChange"},initialize:function(){this.type=(0,A.getMetadataType)(this.model.get("metadataType")||"movie"),this.leafMediaType=(0,A.getLeafType)(this.type.typeString).mediaType,this.model.setPolicyDefaultsFor(this.leafMediaType)},serializeData:function(){const e={isSync:this.options.isSync,isDirectory:this.model.get("isDirectory"),policy:this.model.get("policy").toJSON()};return e.showLimitWarning=this.model.shouldShowPolicyWarning(this.leafMediaType,e.policy.value),e.showUnwatched=e.isDirectory&&this.leafMediaType===x.pX,e},updatePolicyValue:function(){const e=this.model.get("policy");let t=Math.abs(parseInt(this.ui.policyValueInput.val(),10));this.ui.policyValueInput.val(d().isNaN(t)?"":t),d().isNaN(t)&&(t=0),e.set("value","all"===e.scope?null:t);const r=this.model.shouldShowPolicyWarning(this.leafMediaType,t);this.ui.policyWarning.toggleClass("hidden",!r)},onPolicyUnwatchedChange:function(){this.model.get("policy").set("unwatched",this.ui.policyUnwatchedInput.prop("checked"))},onPolicyScopeChange:function(){const e=this.model.get("policy"),t=this.ui.policyScopeInput.prop("checked")?this.ui.policyScopeInput.val():"all";e.set("scope",t),this.updatePolicyValue()},onPolicyValueChange:function(){this.updatePolicyValue()}});var L=r(56594),j=r(83343),V=r.n(j);const U=f.Z.ItemView.extend({className:"convert-target-container form-group",template:V(),ui:{targetTitleInput:".convert-target-title"},events:{"change select[name=target]":"onTargetChange","keydown input[name=targetTitle]":"onTitleKeyDown","change input[name=targetTitle]":"onTitleChange","change select[name=targetProfile]":"onProfileChange","change select[name=targetQuality]":"onQualityChange"},initialize:function(e){this.targets=e.targets,this.profiles=e.profiles;const t=this.model.get("Device").profile;this.selectedProfile=t?this.profiles.get(t):this.profiles.findWhere({selected:!0}),this.availableCustomQualities=L.Z.getAvailableQualities({lowestQualityIndex:2}).reverse();const r=this.model.get("mediaSettings").get("maxVideoBitrate");if(r){const e=L.Z.getNearestIndexToBitrate(r);this.selectedCustomQuality=L.Z.getQualityByIndex(e)}else this.selectedCustomQuality=d().first(this.availableCustomQualities);this.model.isNew()||this.model.get("targetTagID")||this.$el.addClass("show-custom-target")},serializeData:function(){return{item:this.model.toJSON(),targets:this.targets.toJSON(),disableTarget:!this.model.isNew(),profiles:this.profiles.toJSON(),selectedProfile:this.selectedProfile.toJSON(),availableCustomQualities:this.availableCustomQualities,selectedCustomQuality:this.selectedCustomQuality}},updateDeviceProfile:function(){this.model.get("Device").profile=this.selectedProfile.get("title")},updateMediaSettings:function(e){this.model.get("mediaSettings").set({videoQuality:e.videoQuality,videoResolution:e.videoResolution,maxVideoBitrate:e.bitrate})},onTargetChange:function(e){const t=parseInt(e.currentTarget.value,10);t>-1?(this.model.unset("target"),this.model.set({targetTagID:t,Device:{}}),this.model.get("mediaSettings").restoreDefaults()):(this.model.set("target",this.ui.targetTitleInput.val()),this.model.unset("targetTagID"),this.updateDeviceProfile(this.selectedProfile),this.updateMediaSettings(this.selectedCustomQuality)),this.$el.toggleClass("show-custom-target",-1===t)},onTitleKeyDown:function(e){190===e.which&&0===e.currentTarget.selectionStart&&e.preventDefault()},onTitleChange:function(e){this.model.set("target",e.currentTarget.value)},onProfileChange:function(e){this.selectedProfile=this.profiles.findWhere({title:e.currentTarget.value}),this.updateDeviceProfile(this.selectedProfile)},onQualityChange:function(e){const t=parseInt(e.currentTarget.value,10);this.selectedCustomQuality=L.Z.getQualityByIndex(t),this.updateMediaSettings(this.selectedCustomQuality)}});var F=r(63775),B=r.n(F);const _=f.Z.Layout.extend({template:B(),ui:{submitBtn:".submit-btn"},regions:{policyRegion:".policy-region",targetsRegion:".targets-region",locationRegion:".location-region"},events:{"change input[name=title]":"onTitleChange","submit #convert-form":"onSubmit"},initialize:function(e){if(this.playlist=e.playlist,this.targets=e.targets,this.profiles=e.profiles,this.model){this.tempModel=this.model.clone();const e=this.model.get("Location").librarySectionID;if(e){const t=new P.Z({key:e},{server:this.model.server,onlyIfCached:!0});d().isEmpty(t)||(this.tempModel.section=t)}}else{const t=e.item,r=e.items,n=t.has("childrenKey")?new I.Z({containerKey:t.get("childrenKey")},{server:t.server,provider:t.provider}):t,i=t.server;let s;if(t.get("isSection"))s=t;else{const e=(0,w.Z)(t);d().isEmpty(e)||(s=e)}this.tempModel=new M.Z({title:E.Z.title(t,{items:r}),targetTagID:this.targets.first().id,Location:{uri:E.Z.uri(n,{items:r})}},{server:i,section:s})}},serializeData:function(){return{conversionItem:this.tempModel.toJSON(),isNew:this.tempModel.isNew(),showRemuxOnlyWarning:this.tempModel.server.get("transcoderVideoRemuxOnly")}},onRender:function(){this.policyRegion.show(new R({model:this.tempModel,isSync:!1})),this.targetsRegion.show(new U({model:this.tempModel,targets:this.targets,profiles:this.profiles})),this.locationRegion.show(new T({model:this.tempModel}))},onTitleChange:function(e){this.tempModel.set("title",e.currentTarget.value)},onSubmit:function(e){e.preventDefault();const t=this.ui.submitBtn;if(t.hasClass("active"))return;if(t.addClass("active"),!this.tempModel.get("targetTagID")&&!this.tempModel.get("target")){const e=this.tempModel.get("Device");this.tempModel.set("target",(0,C.Z)("Custom: {1}",e.profile))}const r=this.playlist.addContent(this.tempModel);r.done(this.whenRendered((function(){if(this.model){const e=d().omit(this.tempModel.toJSON(),"children");this.model.set(this.model.parse(e))}this.trigger("request:nextState")}))),r.fail(this.whenRendered((function(e){const t=e.responseText,r=p.Z.parseXML(t),n=null==r?void 0:r.status;this.trigger("request:state","error",n)})))}});var z=r(76416),H=r.n(z);const W=f.Z.ItemView.extend({className:"modal-body loading-container",template:H()});var G=r(8718),Q=r(53854),$=r.n(Q);const K=f.Z.ItemView.extend({className:"modal-body",template:$(),events:{"click .status-link":"onStatusClick"},onStatusClick:function(e){e.preventDefault(),this.triggerMethod("request:nextState"),(0,G.Z)("serverSettings",{machineIdentifier:this.options.server.id,settingsSection:"status",settingsGroup:"conversion"})}});var q=r(76246),Y=r.n(q);const X=v.Z.extend({mixins:[s.Z],name:"convertModal",className:"convert-modal modal fade",template:Y(),regions:{bodyRegion:".modal-body-region"},initialize:function(e){v.Z.prototype.initialize.apply(this,arguments),this.server=this.model?this.model.server:e.item.server;const t={server:this.server,allowInCache:!0};this.playlists=new a.Z([],t),this.targets=new y([],t),this.profiles=new h([],t)},initialState:"loading",states:{loading:{nextState:"form",onEnter:function(){this.bodyRegion.show(new W),this.listenForStateRequests();const e=this.options.item,t=e&&!e.get("isMetadataList"),r=i().when(t?e.populate():null,this.playlists.populate(),this.targets.populate(),this.profiles.populate(),this.server.get("sections").populate());r.done(this.whenRendered((function(){this.playlist=this.playlists.first(),this.playlist?this.enterNextState():this.enterState("error")}))),r.fail(this.whenRendered((function(){this.enterState("error")})))}},form:{nextState:"success",onEnter:function(){this.bodyRegion.show(new _({model:this.model,item:this.options.item,items:this.options.items,playlist:this.playlist,targets:this.targets,profiles:this.profiles})),this.listenForStateRequests()}},success:{onEnter:function(){this.model?this.hide():(this.bodyRegion.show(new K({server:this.server})),this.listenForStateRequests())}},error:{onEnter:function(e){this.bodyRegion.show(new S({status:e})),this.listenForStateRequests()}}},listenForStateRequests:function(){var e;(null==(e=this.bodyRegion)?void 0:e.currentView)&&this.listenTo(this.bodyRegion.currentView,{"request:state":this.enterState,"request:nextState":this.enterNextState})},onRender:function(){v.Z.prototype.onRender.apply(this,arguments),this.enterNextState()},onStateMachineComplete:function(){this.hide()}})},96913:(e,t,r)=>{"use strict";r.d(t,{Z:()=>G});var n=r(19755),i=r.n(n),s=r(13469),a=r.n(s),o=r(45191),l=r(96830),c=r(99479),d=r(1661),u=r(53140),p=r.n(u);const m=d.Z.extend({className:"user-select-alert-bar",template:p()});var h=r(41444),g=r(26051),y=r(14796),v=r(8523),f=r(73788),b=r(20683),Z=r(15851),S=r(70777),P=r(9711);const I=r(75365).Z.extend({getUrl(e){if(e){const t=(0,P.Z)();return b.Z.join(e,{size:Math.round(this.width*t)})}return e}});var E=r(82877),w=r(61400),C=r.n(w);const M=g.Z.ItemView.extend({tagName:"li",className:"user-select-list-item",template:C(),ui:{container:".user-select-container",poster:".user-poster"},events:{"click a":"onClick"},initialize:function(e){this.disabled=e.disabled,this.posterImage=new I({model:this.model,type:"friend",width:80});const t=o.DB("appModel").get("primaryServer");(null==t?void 0:t.supports("imageFilters"))&&(this.backgroundImage=new I({model:this.model,type:"friend",width:120,background:!0,filters:{blur:20,opacity:50,background:"000000"}}),this.backgroundImage.placeholderClass=!1)},serializeData:function(){return{disabled:this.disabled}},bindings:{".username":{modelAttribute:"title"},".managed-title":{modelAttribute:"restrictionProfile",autohide:!0,formatter(e){const t=(0,E.i)(S.je);if((0,E.i)(S.vi))return;const r=t?(0,f.Z)("Managed Account"):(0,f.Z)("Managed User"),n=this.model.get("username"),i=this.model.get("title");return n&&i!==n?n:this.model.get("restricted")&&!this.model.get("guest")?e?Z.oL(e).title:r:void 0}},".managed-title-community":{modelAttribute:"restrictionProfile",autohide:!0,formatter(e){if(!(0,E.i)(S.vi))return;const t=this.model.get("username"),r=this.model.get("title");return t&&r!==t?t:this.model.get("restricted")&&!this.model.get("guest")?e?Z.oL(e).title:(0,f.Z)("Managed Account"):void 0}},".protected-icon":{modelAttribute:"protected",autohide:!0,manual:!0},".admin-icon":{modelAttribute:"admin",autohide:!0,manual:!0}},onRender:function(){this.posterImage.setElement(this.ui.poster),this.backgroundImage&&this.backgroundImage.setElement(this.ui.container)},onClose:function(){this.posterImage.close(),this.backgroundImage&&this.backgroundImage.close()},onClick:function(e){e.preventDefault(),this.trigger("selectUser",this.model)}});var D=r(49243),O=r.n(D);const T=g.Z.Layout.extend({className:"user-select-modal-pin-container",template:O(),ui:{digitContainer:".pin-digit-container",input:".pin-input",digits:".pin-digit",loading:".loading",removeBtn:".remove-btn",saveBtn:".save-btn",pinForgotLink:".pin-forgot-link"},regions:{userList:".user-select-list"},events:{"keydown input":"onKeyDown","input input":"onInput","keyup input":"onKeyUp","focus input":"onFocus","blur input":"onBlur","change input":"onChange","animationend .pin-input-container":"onInputsAnimationEnd","webkitAnimationEnd .pin-input-container":"onInputsAnimationEnd","oAnimationEnd .pin-input-container":"onInputsAnimationEnd","click .back-btn":"onBackClick","click .remove-btn":"onRemoveClick","submit #pin-form":"onSubmit","click .pin-digit":"onPINClick","keydown .save-btn":"onSaveKeyDown"},onlyAfterRender:["confirmUser"],initialize:function(e){const t=o.DB("appModel");this.isForced=e.isForced,this.isEditing=e.isEditing,this.isEditWarning=e.isEditWarning,this.showBackButton=e.showBackButton,this.openAddManagedUser=e.openAddManagedUser,this.focusDelay=e.focusDelay,this.user=t.get("user"),this.isEditConfirmation=this.isEditing&&this.model.get("protected")&&!this.model.get("restricted")},serializeData:function(){return{isEditing:this.isEditing&&!this.isEditConfirmation,isEditWarning:this.isEditWarning,isEditConfirmation:this.isEditConfirmation,isOpeningAddManagedUser:this.openAddManagedUser,hasCurrentPIN:this.model.get("protected"),showBackButton:this.showBackButton}},focusInput:function(){this.ui.input.val(""),this.ui.input.focus()},getPIN:function(){return this.ui.input.val()},editPIN:function(e){this.ui.saveBtn.isDisabled()||(this.ui.saveBtn.addClass("disabled"),this.savePIN(e).fail(this.whenRendered((function(){this.ui.saveBtn.removeClass("disabled"),v.Z.trigger("show:alert",{type:"error",message:(0,f.Z)("This PIN could not be saved.")})}))))},removePIN:function(){this.ui.removeBtn.isDisabled()||(this.ui.removeBtn.addClass("disabled"),this.savePIN("").fail(this.whenRendered((function(){this.ui.removeBtn.removeClass("disabled"),v.Z.trigger("show:alert",{type:"error",message:(0,f.Z)("This PIN could not be removed.")})}))))},savePIN:function(e){this.ui.loading.removeClass("hidden");const t=this.model.get("restricted"),r=this.model.getSaveParams(),n={};this.currentPin&&(n.currentPin=this.currentPin),""===e&&t?n.removePin=1:n.pin=e;const s=i().extend(!0,{},r,n),o=b.Z.join(this.model.pinUrl(),s),l=this.model.server.getXHROptions(o,{type:t?"POST":"PUT"}),c=i().ajax(l);return c.done(a().bind((function(){this.model.set("protected",!!e),this.model.id===this.user.id&&(e?this.user.set("pin",this.user.hashPIN(e)):this.user.unset("pin"),this.user.set("home",this.user.hasHome())),this.trigger("resolve",e)}),this)),c.always(this.whenRendered((function(){this.ui.loading.addClass("hidden")}))),c},confirmUser:function(e){this.ui.loading.removeClass("hidden");const t=h.Z.execute("switchUser",{homeUser:this.model,pin:e,allowGuestLock:!this.isEditing,openAddManagedUser:this.openAddManagedUser});t.done(a().bind((function(){this.isEditing?(this.isEditConfirmation=!1,this.currentPin=e,this.render()):this.trigger("resolve",e)}),this)),t.fail(this.whenRendered((function(){this.ui.digitContainer.addClass("shake"),this.ui.input.val(""),this.focusInput()}))),t.always(this.whenRendered((function(){this.ui.loading.addClass("hidden")})))},renderPIN:function(){const e=this.getPIN(),t=e.length,r=this.isEditing&&!this.isEditConfirmation;this.ui.digits.each((function(n,s){let a=e[n]||"";a&&!r&&(a="&bull;"),i()(s).toggleClass("current",n===t).html(a)}))},onRender:function(){this.userList.show(new M({model:this.model,disabled:!0})),this.ui.pinForgotLink.toggleClass("hidden",this.model.get("restricted")),y.Z.mobile||window.setTimeout(a().bind(this.focusInput,this),this.focusDelay)},onKeyDown:function(e){const t=e.which;13!==t&&8!==t&&46!==t&&229!==t&&(t>=48&&t<=57||t>=96&&t<=105||e.preventDefault())},onInput:function(e){const t=i()(e.currentTarget),r=t.val(),n=r.length,s=r.charAt(r.length-1);/[0-9]/.test(s)?4===r.length&&(!this.isEditing||this.isEditConfirmation?(t.blur(),this.confirmUser(this.getPIN())):this.ui.saveBtn.focus()):t.val(r.slice(0,n-1))},onKeyUp:function(){this.renderPIN()},onFocus:function(){this.renderPIN()},onBlur:function(){this.renderPIN(),this.ui.digits.removeClass("current")},onChange:function(){this.renderPIN()},onInputsAnimationEnd:function(e){i()(e.currentTarget).removeClass("shake")},onBackClick:function(e){e.preventDefault(),this.trigger("change:pane","users")},onRemoveClick:function(e){e.preventDefault(),this.removePIN()},onSubmit:function(e){e.preventDefault();const t=this.getPIN();4===t.length?this.isEditing&&!this.isEditConfirmation?this.editPIN(t):this.confirmUser(t):v.Z.trigger("show:alert",{type:"error",message:(0,f.Z)("Please enter a 4 digit PIN.")})},onSaveKeyDown:function(e){const t=e.which;8!==t&&46!==t||(e.preventDefault(),this.ui.input.val(""),this.focusInput())},onPINClick:function(){this.focusInput()}});var x=r(29223),A=r(31544),k=r(90696),N=r(97283),R=r(29228),L=r(56346),j=r(50839),V=r.n(j);const U=g.Z.ItemView.extend({tagName:"li",className:"user-select-list-item",template:V(),events:{"click a":"onClick"},initialize(e){this.disabled=e.disabled},serializeData(){return{iconAdd:(0,L.Z)(R.Z,{className:"add-icon"}),disabled:this.disabled}},onClick(e){e.preventDefault(),this.trigger("selectUser",this.model,!0)}}),F=N.Z.extend({tagName:"ul",className:"tile-list user-select-list",itemView:M,onRender(){this.options.showAddUser&&this.addItemView(this.options.adminModel,U,this.collection.length)}});var B=r(39871),_=r.n(B);const z=g.Z.Layout.extend({className:"user-select-modal-users-container",template:_(),ui:{loading:".loading"},regions:{body:".modal-body"},onlyAfterRender:["onUserPopulated","onHomeUsersPopulated","onError"],initialize:function(){const e=o.DB("appModel");this.user=e.get("user"),this.homeUsers=this.user.get("homeUsers"),this.user.server.populate().done(a().bind(this.onUserPopulated,this)).fail(a().bind(this.onError,this))},showList:function(e){this.ui.loading.addClass("hidden");const t=e.findWhere({admin:!0});this.body.show(new F({collection:e,adminModel:t,showAddUser:!!t})),this.listenTo(this.body.currentView,"itemview:selectUser",this.onUserSelect)},selectUser:function(e,t){this.ui.loading.removeClass("hidden");const r=h.Z.execute("switchUser",{homeUser:e,switchUser:!0,allowGuestLock:!0,openAddManagedUser:t});r.done(a().bind((function(){this.trigger("resolve",null)}),this)),r.always(this.whenRendered((function(){this.ui.loading.addClass("hidden")})))},onUserPopulated:function(){this.homeUsers.fetch().done(a().bind(this.onHomeUsersPopulated,this)).fail(a().bind(this.onError,this))},onHomeUsersPopulated:function(e){this.showList(e)},onError:function(){const e=x.Z.getActiveUser();if(null==e?void 0:e.get("home")){const t={id:e.id,title:e.get("title"),protected:!!e.get("pin")};this.showList(new A.Z([t],{server:this.user.server,parent:this.user}))}else this.user.set("lockState",k.Ik.Unlocked),this.trigger("resolve")},onUserSelect:function(e,t,r){t.get("protected")?this.trigger("change:pane","pin",{model:t,showBackButton:!0,openAddManagedUser:r,focusDelay:0}):this.selectUser(t,r)}});var H=r(47499),W=r.n(H);const G=c.Z.extend({name:"userSelectModal",className:"user-select-modal modal modal-transparent fade",template:W(),transparent:!0,panes:{users:z,pin:T},regions:{content:".modal-content",alertBar:".modal-alert"},initialize:function(e){c.Z.prototype.initialize.apply(this,arguments);const t=o.DB("appModel");this.options=e,this.isForced=e.isForced,this.user=t.get("user"),this.promise=i().Deferred()},showPane:function(e,t){this.currentPane&&this.stopListening(this.currentPane);const r=new(0,this.panes[e])(a().extend({},this.options,t));return this.listenTo(r,{"change:pane":this.onChangePane,resolve:this.onResolve,reject:this.onReject}),this.currentPane=r,this.content.show(r),r},showAlertBar:function(){const e=l.Z[0];l.Z.length=0,this.alertBar.show(new m({alert:e}))},onRender:function(){c.Z.prototype.onRender.apply(this,arguments),this.model?this.showPane("pin",{focusDelay:this.focusDelay}):this.showPane("users"),this.showAlertBar()},onHide:function(){c.Z.prototype.onHide.apply(this,arguments),"pending"===this.promise.state()&&this.promise.reject()},onChangePane:function(e,t){this.showPane(e,t)},onResolve:function(e){this.promise.resolve(e),this.hide()},onReject:function(){this.promise.reject(),this.hide()}})},47532:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);class i extends n.Component{componentDidMount(){const e=this.props.view;this._view=new e(this.props.viewOptions),this._view.render(),this._el.appendChild(this._view.el),this._view.triggerMethod("show")}shouldComponentUpdate(){return!1}componentWillUnmount(){this._view.close&&this._view.close()}render(){return n.createElement("div",{ref:e=>this._el=e,className:this.props.className})}}const s=i},81452:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(28216),i=r(22222),s=r(84503),a=r(74278),o=r(21604),l=r(77072),c=r(67294),d=r(5977),u=r(20683),p=r(15770),m=r(50439),h=r(62286),g=r(6459),y=r(14280),v=r(11088);function f(e){const{children:t,isWaitingForServers:r,isAnyServerAuthenticated:n,isWaitingForCloudServer:i,isCloudServerUnauthorized:s,isCloudServerConnected:a,isCloudServerUnavailable:o,isCloudServerDownForMaintenance:l,hasAttemptedSignIn:f,isUserLocked:b,isUserFeaturesPopulated:Z,isUserFeaturesError:S,onPopulateUserFeatures:P}=e,I=(0,d.k6)(),E=!!(0,d.$B)({path:[g.Z.account,g.Z.announcements,g.Z.devices,g.Z.webhooks,g.Z.onlineMediaSources,g.Z.userSharingSettings,g.Z.usersSharing,g.Z.plexHome,g.Z.plexHomeSharing,g.Z.manageLibraryAccess,g.Z.manageLibraryAccessSharing],exact:!0}),[w,C]=(0,c.useState)(S||Z),M=(f||o)&&!b,D=M&&a,O=Z||S||w||o,T=!r&&!n&&!l&&!o&&M||E&&s;if((0,c.useEffect)((()=>{if(D){const e=window.setTimeout((()=>C(!0)),5e3);return()=>window.clearTimeout(e)}}),[D]),(0,c.useEffect)((()=>{D&&P()}),[D,P]),(0,p.Z)((()=>{I.push(u.Z.join(g.Z.login,{redirectUrl:window.location.hash.replace("#!","")}))}),T),n&&O&&M&&(!E||a))return t;if(!i&&(E||!r&&!n)){if(l)return c.createElement(y.Z,null);if(o)return c.createElement(v.Z,null)}return c.createElement(m.Z,null,c.createElement(h.Z,null))}f.defaultProps={isAccountRequired:!1};const b=f,Z=(0,i.P1)((e=>e.downloads),(e=>!!e&&!e.isSubscriptionsPopulated&&!e.subscriptionsError)),S=(0,i.P1)((e=>e.downloads),(e=>!!(e&&e.subscriptions&&e.subscriptions.length>0))),P=(0,i.P1)(o.Z,(e=>e.some((e=>e.isCloud&&e.isResolved||!e.isCloud&&e.isConnected)))),I=(0,i.P1)((e=>e.isWaitingForServers),Z,P,S,l.Z,a.Z,((e,t,r,n,i,s)=>({isWaitingForServers:e||t,isAnyServerAuthenticated:r||n,isWaitingForCloudServer:!s.isResolved&&!s.isRejected,isCloudServerUnauthorized:s.isUnauthorized,isCloudServerConnected:s.isConnected,isCloudServerUnavailable:s.isUnavailable,isCloudServerDownForMaintenance:s.isDownForMaintenance,hasAttemptedSignIn:i.hasAttemptedSignIn,isUserLocked:i.isLocked,isUserFeaturesPopulated:i.isFeaturesPopulated,isUserFeaturesError:!!i.featuresError}))),E={onPopulateUserFeatures:s.$Q},w=(0,n.$j)(I,E)(b)},97380:(e,t,r)=>{"use strict";r.d(t,{$:()=>Tt,Z:()=>xt});var n=r(67294),i=r(62291),s=r(55949),a=r(28216),o=r(22222),l=r(86555),c=r(8218),d=r(88298),u=r(15579),p=r(70777),m=r(73788),h=r(18222),g=r(70668),y=r(63135),v=r(74249),f=r(45181),b=r(25555),Z=r(37920),S=r(84419),P=r(17516),I=r(36380),E=r(88140),w=r(2696);const C=function(e){const{children:t,metadataItem:r,sharingReason:i,isSharingSingleLibrary:s,errorMessage:a,onModalClose:o,hasHomeLibraryAccessLabels:l}=e;let c;if(r){const e={metadataTitle:(0,w.Z)(r,S.U)};c=l?(0,m.Z)("Grant Access to {metadataTitle}",e):(0,m.Z)("Share {metadataTitle}",e)}else c=i===Tt.AddingUser?l?(0,m.Z)("Invite Plex User"):(0,m.Z)("Invite Home User"):i===Tt.CreatingUser?l?(0,m.Z)("Create Managed Account"):(0,m.Z)("Create Managed User"):s?l?(0,m.Z)("Grant Library Access"):(0,m.Z)("Share Library"):l?(0,m.Z)("Grant Library Access"):(0,m.Z)("Add A Friend");return n.createElement(E.Z,{onModalClose:o},n.createElement(P.Z,null,c),a?n.createElement(I.Z,{errorMessage:a}):null,t)};var M=r(17330),D=r(77378);var O=Object.defineProperty,T=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const N={onNext:d.wV},R=(0,a.$j)((function(){return(0,o.P1)((0,u.Z)(p.je),(e=>({hasHomeLibraryAccessLabels:e})))}),N)((function(e){const t=e,{onNext:r,onModalClose:i,hasHomeLibraryAccessLabels:s}=t,a=((e,t)=>{var r={};for(var n in e)x.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&T)for(var n of T(e))t.indexOf(n)<0&&A.call(e,n)&&(r[n]=e[n]);return r})(t,["onNext","onModalClose","hasHomeLibraryAccessLabels"]);return n.createElement(g.ZP,{className:"InviteHomeUserWarning-form-D5Rfdd",onSubmit:r},n.createElement(C,((e,t)=>{for(var r in t||(t={}))x.call(t,r)&&k(e,r,t[r]);if(T)for(var r of T(t))A.call(t,r)&&k(e,r,t[r]);return e})({hasHomeLibraryAccessLabels:s,sharingReason:Tt.AddingUser,onModalClose:i},a),n.createElement(y.Z,{className:"InviteHomeUserWarning-modalBody-PkmcsQ ModalBody-modalBody-Me4Hwy",scrollDirection:Z.Hn},n.createElement(D.Z,{className:"InviteHomeUserWarning-warning-OPOZWz"}),n.createElement("div",null,(0,m.Z)("Inviting other users to your home is a security risk that could allow these users to access your account. You should only do this if you live in the same home and share devices."))),n.createElement(v.Z,null,n.createElement(f.Z,null,n.createElement(h.Z,{onPress:i},(0,m.Z)("Cancel")),n.createElement(M.Z,{kind:b._8,type:"submit"},(0,m.Z)("Continue"))))))}));var L=r(25209),j=r(62934),V=r(80183),U=r(28882),F=r(8067),B=r(42985),_=r(47276),z=r(87264),H=r(85448),W=r(8059),G=r(24107),Q=r(70852),$=r(58851);var K=Object.defineProperty,q=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,J=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ee=(0,$.Z)((function(e){return n.createElement(Q.Z,((e,t)=>{for(var r in t||(t={}))Y.call(t,r)&&J(e,r,t[r]);if(q)for(var r of q(t))X.call(t,r)&&J(e,r,t[r]);return e})({className:"ShareServerLibrariesServerTitle-input-Tpn1mR CheckInput-label-E9ov4s"},e))}));var te=Object.defineProperty,re=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,se=(e,t,r)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ae(e){return n.createElement(Q.Z,((e,t)=>{for(var r in t||(t={}))ne.call(t,r)&&se(e,r,t[r]);if(re)for(var r of re(t))ie.call(t,r)&&se(e,r,t[r]);return e})({},e))}ae.defaultProps={className:"ShareServerLibrary-input-nuRhJd CheckInput-input-dUDRsF"};const oe=(0,$.Z)(ae),le=parseInt(G.Z.serverShareListRowHeight,10);class ce extends n.Component{constructor(e,t){super(e,t),this.onTogglePress=()=>{this.setState({isCollapsed:!this.state.isCollapsed})},this.onAllLibrariesToggle=()=>{this.setState({isAllLibrariesChecked:!this.state.isAllLibrariesChecked})};const{sourceServer:r,serverOverview:n,serverShare:i,selectedAllLibrariesMachineIdentifiers:s}=e;this.state={isCollapsed:r.machineIdentifier!==_.X&&r.machineIdentifier!==n.machineIdentifier,isAllLibrariesChecked:null!=s?s.includes(n.machineIdentifier):!(!i||!i.allLibraries)}}render(){const{sourceDirectory:e,sourceServer:t,serverOverview:r,serverShare:i,selectedLibrarySectionIDs:s}=this.props,{isAllLibrariesChecked:a,isCollapsed:o}=this.state,{machineIdentifier:l,name:c,sections:d}=r,u={maxHeight:o?0:(d.length||1)*le},p=e&&e.id;let h=c;return a&&(h+=` (${(0,m.Z)("All Libraries")})`),n.createElement(n.Fragment,null,n.createElement("div",{className:"ShareServerLibraries-header-ZVwVX4"},n.createElement(H.Z,{className:a?"ShareServerLibraries-toggleButtonHidden-OJy5Q6 ShareServerLibraries-toggleButton-tvGIDH Link-link-SxPFpG":"ShareServerLibraries-toggleButton-tvGIDH Link-link-SxPFpG",onPress:this.onTogglePress},n.createElement(z.Z,{direction:o?W.pX:W.WV})),n.createElement(ee,{checkboxText:h,initialValue:a,name:JSON.stringify({[U.I]:l}),onChange:this.onAllLibrariesToggle})),n.createElement("div",{className:"ShareServerLibraries-libraries-ubmXzX",style:u},a||0!==d.length?null:n.createElement("div",{className:"ShareServerLibraries-emptyMessage-lh0jdY"},(0,m.Z)("No libraries")),d.map((e=>{const{id:r,key:o,title:c}=e;let d;if(null!=s)d=s.includes(r);else{const e=t.machineIdentifier===l&&p===o,n=!!(i&&i.libraries&&i.libraries.find((e=>e.id===r)));d=e||n}return n.createElement(oe,{key:r,checkboxText:c,className:a?"ShareServerLibraries-hidden-vNS85A":void 0,initialValue:d,name:JSON.stringify({[U.n]:r})})}))))}}const de=ce,ue=function(e){const{sourceDirectory:t,sourceServer:r,serverOverviews:i,serverShares:s,selectedAllLibrariesMachineIdentifiers:a,selectedLibrarySectionIDs:o,hasNextStep:l,isPopulating:c,showList:d,isNewFriend:u,sharingReason:p,isSharingPending:S,errorMessage:P,hasHomeLibraryAccessLabels:I,onPreviousStep:E,onSubmit:w,onModalClose:D}=e;let O;return O=l?(0,m.Z)("Continue"):p===Tt.CreatingUser?(0,m.Z)("Add"):u?(0,m.Z)("Send"):(0,m.Z)("Save"),n.createElement(g.ZP,{className:"ShareLibraries-form-JWwhI9",onSubmit:w},n.createElement(C,{errorMessage:P,hasHomeLibraryAccessLabels:I,isSharingSingleLibrary:!!t,sharingReason:p,onModalClose:D},n.createElement(y.Z,{className:"ShareLibraries-modalBody-ozsHNK ModalBody-modalBody-Me4Hwy",scrollDirection:Z.Hn},n.createElement("div",{className:"ShareLibraries-message-U9RVHT"},I?(0,m.Z)("Choose libraries to grant access to."):(0,m.Z)("Choose some libraries to share.")),c?n.createElement("div",{className:"ShareLibraries-spinnerContainer-p8JT0d"},n.createElement(B.Z,null)):null,d?n.createElement(F.Z,{autoScroll:!0,className:"ShareLibraries-scroller-lBXCcM Scroller-vertical-nKq0Q8"},i.map((e=>{const{machineIdentifier:i}=e,l=s.find((e=>e.machineIdentifier===i));return n.createElement(de,{key:i,selectedAllLibrariesMachineIdentifiers:a,selectedLibrarySectionIDs:o,serverOverview:e,serverShare:l,sourceDirectory:t,sourceServer:r})}))):null),n.createElement(v.Z,{className:"ShareLibraries-modalFooter-WU0eck ModalFooter-modalFooter-IDP5sZ"},n.createElement(h.Z,{onPress:D},(0,m.Z)("Cancel")),n.createElement(f.Z,null,n.createElement(h.Z,{onPress:E},(0,m.Z)("Previous")),n.createElement(M.Z,{isDisabled:c||S,isSpinning:S,kind:b._8,type:"submit"},O)))))};var pe=Object.defineProperty,me=Object.defineProperties,he=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,fe=(e,t,r)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const be={dispatchFetchServerOverviews:d.ly,dispatchFetchServerShares:d.vX,dispatchSetLibraryShares:d.jD,onPreviousStep:d.Es};class Ze extends n.Component{constructor(){super(...arguments),this.onSubmit=e=>{const t=Object.keys(e).reduce(((t,r)=>{if(!e[r])return t;const n=JSON.parse(r);return n.hasOwnProperty(U.n)&&t.selectedLibrarySectionIDs.push(n[U.n]),n.hasOwnProperty(U.I)&&t.selectedAllLibrariesMachineIdentifiers.push(n[U.I]),t}),{selectedAllLibrariesMachineIdentifiers:[],selectedLibrarySectionIDs:[]});this.props.dispatchSetLibraryShares(t)}}componentDidMount(){const{friendEntityID:e,sharingEligibleServerEntityIDs:t,dispatchFetchServerOverviews:r,dispatchFetchServerShares:n}=this.props;r({serverEntityIDs:t}),n({friendEntityID:e})}render(){const e=this.props,{sharingEligibleServerEntityIDs:t,dispatchFetchServerOverviews:r,dispatchFetchServerShares:i}=e,s=((e,t)=>{var r={};for(var n in e)ye.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ge)for(var n of ge(e))t.indexOf(n)<0&&ve.call(e,n)&&(r[n]=e[n]);return r})(e,["sharingEligibleServerEntityIDs","dispatchFetchServerOverviews","dispatchFetchServerShares"]);return n.createElement(ue,(a=((e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&fe(e,r,t[r]);if(ge)for(var r of ge(t))ve.call(t,r)&&fe(e,r,t[r]);return e})({},s),o={onSubmit:this.onSubmit},me(a,he(o))));var a,o}}const Se=(0,a.$j)((function(){return(0,o.P1)((e=>e.ui.shareModal),j.Z,L.Z,(0,V.Z)(),(0,u.Z)(p.je),((e,t,r,n,i)=>{const{steps:s,serverOverviews:a,selectedAllLibrariesMachineIdentifiers:o,selectedLibrarySectionIDs:l,isNewFriend:u,isServerOverviewsPopulating:p,isServerOverviewsPopulated:m,isServerSharesPopulating:h,isServerSharesPopulated:g,isSharingPending:y,sharingError:v,serverSharesError:f}=e,b=p||h,Z=m&&g,S=f||v;return{sharingEligibleServerEntityIDs:r,sourceServer:t,serverOverviews:a,selectedAllLibrariesMachineIdentifiers:o,selectedLibrarySectionIDs:l,serverShares:n?n.serverShares:[],hasNextStep:(0,d.$i)(s,c.p.LIBRARIES),isPopulating:b&&!S,isSharingPending:y&&!S,showList:Z,isNewFriend:u,errorMessage:S,hasHomeLibraryAccessLabels:i}}))}),be)(Ze);var Pe=r(15830),Ie=r(41863),Ee=r(15851),we=r(16921);const Ce=(e,t)=>{if(e)switch(t){case Tt.CreatingUser:return(0,m.Z)("This will allow this account to download content from your server");case Tt.SharingLibrary:return(0,m.Z)("This will allow this friend to download content from your server")}return(0,m.Z)("This will allow this user to download content from your server")},Me=(e,t)=>{if(e)switch(t){case Tt.CreatingUser:return(0,m.Z)("Enabling this option will allow this account to access Live TV streams. It requires a library on the Plex Media Server that has DVR configured to be shared with the account");case Tt.SharingLibrary:return(0,m.Z)("Enabling this option will allow this friend to access Live TV streams. It requires a library on the Plex Media Server that has DVR configured to be shared with the friend")}return(0,m.Z)("Enabling this option will allow this user to access Live TV streams. It requires a library on the Plex Media Server that has DVR configured to be shared with the user")},De=(e,t)=>{if(e)switch(t){case Tt.CreatingUser:return(0,m.Z)("Enabling Live TV for this account requires sharing a library with them. Enabling DVR will show all scheduled recordings, but this account will only be able to manage their own recordings");case Tt.SharingLibrary:return(0,m.Z)("Enabling Live TV for this friend requires sharing a library with them. Enabling DVR will show all scheduled recordings, but this friend will only be able to manage their own recordings")}return(0,m.Z)("Enabling Live TV for this user requires sharing a library with them. Enabling DVR will show all scheduled recordings, but this user will only be able to manage their own recordings")};var Oe=r(50683),Te=r(8197),xe=r(65710);const Ae="ShareRestrictions-message-QEnoSn",ke="ShareRestrictions-section-TN7zc3";function Ne(e){return parseInt(e,10)}const Re=function(e){const{friend:t,sourceDirectory:r,filterOptionsTags:i,isFilterOptionsTagsPopulating:s,isFilterOptionsTagsPopulated:a,canAddToHome:o,canShareTunersWithFriends:l,canShareDVR:c,canShowRestrictions:d,canShowRestrictionsFilters:u,sharingReason:p,isSharingPending:S,errorMessage:P,onPreviousPress:I,onSubmit:E,onModalClose:w,hasHomeLibraryAccessLabels:O,username:T}=e,x=!!t&&t.home,A=!t||t.allowSync,k=t?t.allowTuners:0,N=t?{filterMovies:t.filterMovies,filterTelevision:t.filterTelevision,filterMusic:t.filterMusic}:{},[R,L]=(0,n.useState)(x||p===Tt.AddingUser||p===Tt.CreatingUser),j=R||l;return n.createElement(g.ZP,{className:"ShareRestrictions-form-yQdj56",onSubmit:E},n.createElement(C,{errorMessage:P,hasHomeLibraryAccessLabels:O,isSharingSingleLibrary:!!r,sharingReason:p,onModalClose:w},n.createElement(y.Z,{className:"ShareRestrictions-modalBody-c93nMv ModalBody-modalBody-Me4Hwy",scrollDirection:Z.Hn},n.createElement(F.Z,{autoScroll:!0,className:"ShareRestrictions-scroller-h3N_wF Scroller-vertical-nKq0Q8"},o?n.createElement("div",{className:Ae},O?n.createElement(n.Fragment,null,n.createElement("p",null,(0,m.Z)("If you share devices with another Plex user, you can invite them into your Plex Home allowing them to easily switch accounts on devices youre signed into. The invited user will be asked to confirm Home membership. This is not required to allow access to your library.")),n.createElement("p",null,(0,m.Z)("This will also add {username} as a friend.",{username:T}))):(0,m.Z)("Users in your Home appear on the Switch User screen. The invited user will be asked to confirm Home membership.")):null,o?n.createElement("div",{className:ke},n.createElement(Oe.Z,{checkboxText:(0,m.Z)("Add to Plex Home"),initialValue:x,isDisabled:x,name:"addToHome",onChange:L})):null,R&&p!==Tt.CreatingUser?n.createElement("div",{className:"ShareRestrictions-warningMessage-IMH2Gj ShareRestrictions-message-QEnoSn"},n.createElement(D.Z,{className:"ShareRestrictions-warningIcon-PuV3RY"}),p===Tt.SharingLibrary?(0,m.Z)("Inviting other friends to your home is a security risk that could allow these friends to access your account. You should only do this if you live in the same home and share devices."):(0,m.Z)("Inviting other users to your home is a security risk that could allow these users to access your account. You should only do this if you live in the same home and share devices.")):null,n.createElement("div",{className:Ae},((e,t)=>{if(e)switch(t){case Tt.AddingUser:return(0,m.Z)("You can restrict this user's access to certain features and content. These restrictions apply to all items shared with this user. You can change them at any time in the Home & Library Access settings.");case Tt.CreatingUser:return(0,m.Z)("You can restrict this account's access to certain features and content. These restrictions apply to all items shared with this account. You can change them at any time in the Home & Library Access settings.");case Tt.SharingLibrary:return(0,m.Z)("You can restrict this friend's access to certain features and content. These restrictions apply to all items shared with this friend. You can change them at any time in the Home & Library Access settings.")}return(0,m.Z)("You can restrict this user's access to certain features and content. These restrictions apply to all items shared with this user. You can change them at any time in the Users & Sharing settings.")})(O,p)),n.createElement("div",{className:ke},n.createElement(Oe.Z,{checkboxText:(0,m.Z)("Allow Downloads"),initialValue:A,name:"allowSync",subtitle:Ce(O,p)}),j&&!c?n.createElement(Oe.Z,{checkboxText:(0,m.Z)("Allow access to Live TV"),initialValue:!!k,name:"allowTuners",subtitle:Me(O,p)}):null,j&&c?n.createElement(xe.Z,{initialValue:k,name:"allowTuners",subtitle:De(O,p),title:(0,m.Z)("Live TV & DVR Access"),transformValue:Ne,value:we.Z.values[k],values:we.Z.values}):null),d&&u?n.createElement(Te.Z,{className:"ShareRestrictions-list-_QUh6m",filterOptionsTags:i,friendFilterOptions:N,isFilterOptionsTagsPopulated:a,isFilterOptionsTagsPopulating:s}):null)),n.createElement(v.Z,{className:"ShareRestrictions-modalFooter-hD0xXo ModalFooter-modalFooter-IDP5sZ"},n.createElement(h.Z,{onPress:w},(0,m.Z)("Cancel")),n.createElement(f.Z,null,n.createElement(h.Z,{onPress:I},(0,m.Z)("Previous")),n.createElement(M.Z,{isDisabled:S,isSpinning:S,kind:b._8,type:"submit"},p===Tt.CreatingUser?(0,m.Z)("Add"):(0,m.Z)("Send"))))))};var Le=Object.defineProperty,je=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,Fe=(e,t,r)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Be=(e,t)=>{var r={};for(var n in e)Ve.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&je)for(var n of je(e))t.indexOf(n)<0&&Ue.call(e,n)&&(r[n]=e[n]);return r};class _e extends n.Component{componentDidMount(){const{serverEntityIDs:e,dispatchFetchFilterOptionsTags:t}=this.props;t(e)}render(){const e=this.props,{serverEntityIDs:t,dispatchFetchFilterOptionsTags:r}=e,i=Be(e,["serverEntityIDs","dispatchFetchFilterOptionsTags"]);return n.createElement(Re,((e,t)=>{for(var r in t||(t={}))Ve.call(t,r)&&Fe(e,r,t[r]);if(je)for(var r of je(t))Ue.call(t,r)&&Fe(e,r,t[r]);return e})({},i))}}const ze=(0,a.$j)((function(){return(0,o.P1)((e=>e.ui.shareModal),Pe.Z,(0,V.Z)(),(0,Ie.Z)("hasPlexPass"),(0,u.Z)(p.jq),(0,u.Z)(p.LD),(0,u.Z)(p.d6),(0,u.Z)(p.je),((e,t,r,n,i,s,a,o)=>{const{restrictionProfileIdentifier:l,filterOptionsTags:c,isFilterOptionsTagsPopulating:d,isFilterOptionsTagsPopulated:u,isSharingPending:p,sharingError:m,isAddingHomeUser:h,isCreatingManagedUser:g,username:y}=e;return{serverEntityIDs:t,friend:r,filterOptionsTags:c,isFilterOptionsTagsPopulating:d,isFilterOptionsTagsPopulated:u,canAddToHome:n&&!h&&!g,canShareTunersWithFriends:i,canShareDVR:s,canShowRestrictions:a,canShowRestrictionsFilters:!l||l===Ee.Pq,isSharingPending:p&&!m,errorMessage:m,hasHomeLibraryAccessLabels:o,username:y}}))}),(function(e){return{dispatchFetchFilterOptionsTags(t){e((0,d.L1)({serverEntityIDs:t}))},onPreviousPress(){e((0,d.Es)())},onSubmit(t){const r=t,{addToHome:n}=r,i=Be(r,["addToHome"]);e((0,d.K_)({addToHome:n,restrictions:i}))}}}))(_e);var He=r(45859),We=r(22169),Ge=r(20683),Qe=r(16013),$e=r(23245);const Ke=()=>{},qe=(0,a.$j)((function(){return(0,o.P1)((e=>e.ui.shareModal),(0,u.Z)(p.OV),(0,u.Z)(p.je),((e,t,r)=>{const{username:n,metadataItemEntityID:i,serverOverviews:s,selectedAllLibrariesMachineIdentifiers:a,selectedLibrarySectionIDs:o,inviteToken:l,inviteTokenError:c}=e;return{username:n,inviteToken:l,inviteTokenError:c,libraryCount:a?a.reduce(((e,t)=>e+s.find((e=>e.machineIdentifier===t)).sections.length),o.length):null,isSharingSingleItem:!!i,hasNewSharingInvitationFeature:t,hasHomeLibraryAccessLabels:r}}))}))((function(e){const{sourceDirectory:t,metadataItem:r,username:i,inviteToken:s,inviteTokenError:a,libraryCount:o,isSharingSingleItem:l,sharingReason:c,hasNewSharingInvitationFeature:d,hasHomeLibraryAccessLabels:u,onModalClose:p}=e,[g,P]=(0,n.useState)(!1),I=(0,$e.Z)(g),E=(0,n.useRef)(null),M=function(e,t,r){if(r){const r={inviteToken:e};return t?r.sharedItems=1:r.sharedServers=1,Ge.Z.join([(0,We.tZ)(!0),"#!"],r,{trailingSlash:!0})}return Ge.Z.join((0,We.Y)("servers/shared_servers/accept"),{invite_token:e})}(s,l,d),D=(0,n.useCallback)((()=>{He.writeText(M),P(!0)}),[M]);let O;(0,n.useEffect)((()=>(!I&&g&&(E.current=window.setTimeout((()=>{P(!1),window.clearTimeout(E.current)}),2e3)),()=>{window.clearTimeout(E.current)})),[I,g]),O=r?(0,m.Z)("You shared {metadataTitle} with {username}.",{metadataTitle:(0,w.Z)(r,S.U),username:i}):0===o||c===Tt.AddingUser?(0,m.Z)("We've sent an invite to {username}.",{username:i}):1===o?(0,m.Z)("You shared a library with {username}.",{username:i}):(0,m.Z)("You shared {libraryCount} libraries with {username}.",{libraryCount:o,username:i});const T=(r||o)&&!a;return n.createElement("div",{className:"ShareSummary-container-LUhNGZ"},n.createElement(C,{hasHomeLibraryAccessLabels:u,isSharingSingleLibrary:!!t,metadataItem:r,sharingReason:c,onModalClose:p},n.createElement(y.Z,{className:"ShareSummary-modalBody-BfoCK_ ModalBody-modalBody-Me4Hwy",scrollDirection:Z.Hn},n.createElement("div",{className:"ShareSummary-content-iJjXeF"},n.createElement("p",null,O),T?n.createElement("p",null,(0,m.Z)("We've sent an email asking them to confirm, or they can use this link to accept the invitation"),":"):null,a?n.createElement("div",null,a):null,T?n.createElement("div",{className:"ShareSummary-inviteLink-nkl9Nf"},n.createElement(Qe.Z,{className:"ShareSummary-input-VXN0Js TextInput-input-NqTdW3 input-input-XAtklw",name:"inviteLink",readOnly:"readonly",value:M,onChange:Ke}),n.createElement(H.Z,{className:"ShareSummary-copyLink-QFToBy Link-link-SxPFpG",isDisabled:g||!!a,kind:b._8,onPress:D},g?(0,m.Z)("Copied!"):(0,m.Z)("Copy link"))):null)),n.createElement(v.Z,null,n.createElement(f.Z,null,n.createElement(h.Z,{kind:b._8,onPress:p},(0,m.Z)("Finish"))))))}));var Ye=r(76613);const Xe={};var Je=r(71741),et=r(12174),tt=r(25483),rt=r(77054),nt=r(35365),it=r(37754),st=r(69281),at=r(51079),ot=r(59597);function lt(e){return e.includes("@")}function ct(e,t){return!e.home&&t.home?1:e.home&&!t.home?-1:0}function dt(e){return{id:-1,title:e.trim(),thumb:(0,We.Y)(`/users/${encodeURIComponent(e)}/avatar`)}}class ut extends n.Component{constructor(e,t){super(e,t),this.isUserSelected=e=>this.state.selectedFriendID===e.id||!this.state.selectedFriendID&&this.state.username===e.title,this.onUsernameChange=e=>{this._clearOnUsernameChangeTimeout(),this.setState({username:e,selectedFriendID:null,isChangingUsername:!0},(()=>{this.props.sharingReason!==Tt.CreatingUser&&(this._timeoutID=window.setTimeout((()=>{this._timeoutID=null,this.props.onValidateUsername({username:e})}),500))}))},this.onUserSelect=e=>{this.setState({selectedFriendID:e===this.state.selectedFriendID?null:e})},this.onRestrictionProfileSelect=e=>{this.setState({restrictionProfileIdentifier:e})},this.onSubmit=({restrictionProfileIdentifier:e})=>{const{metadataItemEntityID:t,users:r,sharingReason:n,onSetUsername:i,onSetUser:s}=this.props,{username:a,selectedFriendID:o}=this.state;o&&-1!==o?s({metadataItemEntityID:t,friendEntityID:r.find((e=>e.id===o)).entityID,isAddingHomeUser:n===Tt.AddingUser}):i({metadataItemEntityID:t,username:a.trim(),restrictionProfileIdentifier:e,isAddingHomeUser:n===Tt.AddingUser,isCreatingManagedUser:n===Tt.CreatingUser})},this.state={username:e.username,selectedFriendID:null,isChangingUsername:!1,restrictionProfileIdentifier:e.restrictionProfileIdentifier}}static getDerivedStateFromProps(e,t){return t.isChangingUsername&&e.isUsernameValidating?{isChangingUsername:!1}:null}componentWillUnmount(){this._clearOnUsernameChangeTimeout()}_clearOnUsernameChangeTimeout(){this._timeoutID&&window.clearTimeout(this._timeoutID)}render(){const{serverEntityID:e,sourceDirectory:t,metadataItem:r,users:i,existingHomeUsernames:s,hasNextStep:a,hasPlexPass:o,sharingReason:l,isUsernameValidating:c,isUsernameValidated:d,isSharingPending:u,sharingError:p,onModalClose:P,hasHomeLibraryAccessLabels:I}=this.props,{username:E,selectedFriendID:D,isChangingUsername:O,restrictionProfileIdentifier:T}=this.state,x=function(e,t,r){const{sourceDirectory:n,metadataItem:i,sharingReason:s}=r,a=t.trim().toUpperCase(),o=e.filter((e=>(s!==Tt.AddingUser||!e.home)&&!(!n&&!i&&s!==Tt.AddingUser&&s!==Tt.CreatingUser)&&(e.username&&e.username.toUpperCase().includes(a)||e.title&&e.title.toUpperCase().includes(a)||e.email&&e.email.toUpperCase().includes(a))));return o.sort(ct),o}(i,E,this.props),A=!d||O||function(e,t){return!!e.find((e=>e.username===t||e.title===t||e.email===t))}(x,E)?x:[dt(E),...x],k=!c&&!d,N=!!i.find((e=>e.username===E||e.email===E)),R=O||c||k&&!lt(E),L=""!==E.trim()&&l!==Tt.CreatingUser&&0===A.length&&k&&!O,j=l===Tt.CreatingUser&&s.includes(E.trim()),V=N&&!t&&!r&&l!==Tt.AddingUser&&l!==Tt.CreatingUser;let U;var F;let _;L?U=lt(F=E)?(0,m.Z)("An invite will be sent to {emailAddress}",{emailAddress:F.trim()}):(0,m.Z)("No Plex users found. Enter a valid email address to invite someone new"):j?U=(0,m.Z)("A Home user already exists with this name"):V&&(U=(0,m.Z)("{username} is already a friend",{username:E})),_=!r&&a?(0,m.Z)("Continue"):l===Tt.CreatingUser?(0,m.Z)("Add"):(0,m.Z)("Send");let z=I?(0,m.Z)("Name"):(0,m.Z)("Username");l!==Tt.CreatingUser&&(z="Username or email");const H=V||!D&&(u||""===E.trim()||l!==Tt.CreatingUser&&R||j);return n.createElement(g.ZP,{className:"ShareUsers-form-ASvZyT",onSubmit:this.onSubmit},n.createElement(C,{errorMessage:p,hasHomeLibraryAccessLabels:I,isSharingSingleLibrary:!!t,metadataItem:r,sharingReason:l,onModalClose:P},n.createElement(y.Z,{className:"ShareUsers-modalBody-wUd1lu ModalBody-modalBody-Me4Hwy",scrollDirection:Z.Hn},n.createElement("div",{className:"ShareUsers-messages-Heuigp"},n.createElement("div",null,function(e,t,r){switch(t){case Tt.AddingUser:return e?(0,m.Z)("Users in your Plex Home appear on the Switch User screen. The invited user will be asked to confirm Home membership."):(0,m.Z)("Users in your Home appear on the Switch User screen.");case Tt.CreatingUser:return e?(0,m.Z)("Managed family accounts are only available when signed in with an account in your home. You can choose any name you like and you'll be able to set restrictions on accessible media."):(0,m.Z)("Managed users are only available when signed in with an account in your home.");case Tt.SharingLibrary:return e?(0,m.Z)("Choose a user to grant library access to. You can enter their Plex username or email. New users will be asked to accept the invitation. After doing this, you may grant access to your Plex Media Server libraries and media items."):(0,m.Z)("Choose a user to invite. You can enter their Plex username or email.");case Tt.SharingItem:return e?(0,m.Z)("Give access to {title} by selecting a friend or entering the email of a new user and inviting them to Plex. New users will be asked to accept the invitation. ",{title:r?(0,w.Z)(r,S.U):""}):(0,m.Z)("Choose a user to invite. You can enter their Plex username or email.");case Tt.None:return""}}(I,l,r)),n.createElement("div",null,function(e,t){return e?"":t===Tt.AddingUser?(0,m.Z)("The invited user will be asked to confirm Home membership."):t===Tt.CreatingUser?(0,m.Z)("You can choose any name you like and you'll be able to set restrictions on accessible media."):(0,m.Z)("New users will be asked to accept the invitation.")}(I,l))),n.createElement("div",{className:"ShareUsers-inputContainer-Dl0Vrc"},n.createElement(Qe.Z,{autoComplete:"off",focusOnMount:!0,name:"username",placeholder:z,value:E,onChange:this.onUsernameChange}),c?n.createElement(B.Z,{className:"ShareUsers-icon-qJgu9o",size:st.HC}):null,d?n.createElement(nt.Z,{className:"ShareUsers-checkIcon-YT4uL4 ShareUsers-icon-qJgu9o"}):null),n.createElement("div",{className:"ShareUsers-warningMessage-iZoyPT"},U),l===Tt.CreatingUser?n.createElement(at.Z,{className:"ShareUsers-restrictionsInput-ZR8ogN RestrictionProfilesInput-input-qqR0eD SelectInput-input-EWuFb5 input-input-XAtklw",hasPlexPass:o,initialValue:T,name:"restrictionProfileIdentifier",onChange:this.onRestrictionProfileSelect}):null,l!==Tt.CreatingUser&&A.length>0?n.createElement(n.Fragment,null,n.createElement(it.Z,null,I?(0,m.Z)("Friends"):(0,m.Z)("Users")),n.createElement(ot.Z,{className:"ShareUsers-list-O6EmUJ UserList-list-eprPYu Scroller-vertical-nKq0Q8",hasHomeLibraryAccessLabels:I,isUserSelected:this.isUserSelected,serverEntityID:e,users:A,onUserSelect:this.onUserSelect})):null),n.createElement(v.Z,null,n.createElement(f.Z,null,n.createElement(h.Z,{onPress:P},(0,m.Z)("Cancel")),n.createElement(M.Z,{isDisabled:H,isSpinning:u,kind:b._8,type:"submit"},_)))))}}const pt=ut;var mt=Object.defineProperty,ht=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable,vt=(e,t,r)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ft=(0,o.P1)(et.Z,function(e){if(Xe.homeUsers)return Xe.homeUsers;const t=(0,o.P1)(Ye.Z,(e=>e.homeUsers));return Xe.homeUsers=t,t}(),((e,t)=>t.map((t=>e[t].title)))),bt={dispatchFetchAllFriends:rt.Tp,onValidateUsername:d.rV,onSetUsername:d.b6,onSetUser:d.av},Zt=(0,a.$j)((function(){return(0,o.P1)((e=>e.ui.shareModal),tt.Z,Je.Z,ft,(0,Ie.Z)("hasPlexPass"),(0,u.Z)(p.je),((e,t,r,n,i,s)=>{const{steps:a,username:o,restrictionProfileIdentifier:l,isNewFriend:u,isUsernameValidating:p,isUsernameValidated:m,isSharingPending:h,sharingError:g}=e;return{username:o,restrictionProfileIdentifier:l,users:t.map((e=>r[e])),existingHomeUsernames:n,hasNextStep:(0,d.$i)(a,c.p.USER),hasPlexPass:i,isNewFriend:u,isUsernameValidating:p,isUsernameValidated:m,isSharingPending:h&&!g,sharingError:g,hasHomeLibraryAccessLabels:s}}))}),bt)((function(e){const t=e,{dispatchFetchAllFriends:r}=t,i=((e,t)=>{var r={};for(var n in e)gt.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ht)for(var n of ht(e))t.indexOf(n)<0&&yt.call(e,n)&&(r[n]=e[n]);return r})(t,["dispatchFetchAllFriends"]);return(0,n.useEffect)((()=>{r()}),[r]),n.createElement(pt,((e,t)=>{for(var r in t||(t={}))gt.call(t,r)&&vt(e,r,t[r]);if(ht)for(var r of ht(t))yt.call(t,r)&&vt(e,r,t[r]);return e})({},i))}));var St=Object.defineProperty,Pt=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,wt=(e,t,r)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ct=(e,t)=>{for(var r in t||(t={}))It.call(t,r)&&wt(e,r,t[r]);if(Pt)for(var r of Pt(t))Et.call(t,r)&&wt(e,r,t[r]);return e};const Mt={dispatchInitShareModal:d.Ag,dispatchResetShareModal:d.K3};class Dt extends n.Component{componentDidMount(){const{metadataItemEntityID:e,sharingReason:t,dispatchInitShareModal:r}=this.props;r({metadataItemEntityID:e,isAddingHomeUser:t===Tt.AddingUser,isCreatingManagedUser:t===Tt.CreatingUser})}componentDidUpdate(e,t){const{steps:r,step:n,isSharingCompleted:i,onModalClose:s}=this.props,a=!e.isSharingCompleted&&i,o=(0,d.TR)(r,n);a&&n!==c.p.SUMMARY&&!o&&s()}componentWillUnmount(){this.props.dispatchResetShareModal()}render(){const e=this.props,{step:t,dispatchResetShareModal:r}=e,i=((e,t)=>{var r={};for(var n in e)It.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Pt)for(var n of Pt(e))t.indexOf(n)<0&&Et.call(e,n)&&(r[n]=e[n]);return r})(e,["step","dispatchResetShareModal"]);switch(t){case c.p.WARNING:return n.createElement(R,Ct({},i));case c.p.USER:return n.createElement(Zt,Ct({},i));case c.p.LIBRARIES:return n.createElement(Se,Ct({},i));case c.p.RESTRICTIONS:return n.createElement(ze,Ct({},i));case c.p.SUMMARY:return n.createElement(qe,Ct({},i));default:return null}}}const Ot=(0,a.$j)((function(){return(0,o.P1)((e=>e.ui.shareModal),(0,l.Z)(),((e,t)=>({steps:e.steps,step:e.step,friendEntityID:e.friendEntityID,isSharingCompleted:e.isSharingCompleted,metadataItem:t})))}),Mt)(Dt);var Tt=(e=>(e[e.None=0]="None",e[e.AddingUser=1]="AddingUser",e[e.CreatingUser=2]="CreatingUser",e[e.SharingLibrary=3]="SharingLibrary",e[e.SharingItem=4]="SharingItem",e))(Tt||{});const xt=function(e){const{serverEntityID:t,metadataItemEntityID:r,sourceDirectory:a,metricsProperties:o,sharingReason:l,isOpen:c,onModalClose:d}=e;return n.createElement(s.Z,{isOpen:c,metricsPage:i.Eu,metricsProperties:o,onModalClose:d},n.createElement(Ot,{metadataItemEntityID:r,serverEntityID:t,sharingReason:l,sourceDirectory:a,onModalClose:d}))}},50683:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(70852),s=r(58851),a=r(69281);var o=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p=(0,s.Z)((function(e){const t=e,{subtitle:r}=t,s=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["subtitle"]);return n.createElement("div",{className:"ShareRestrictionsCheckInputItem-container-fBQqtH"},n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({size:a.HC},s)),r?n.createElement("span",{className:"ShareRestrictionsCheckInputItem-subtitle-THxzcE"},r):null)}))},8197:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(67294),i=r(81042),s=r(73788),a=r(85209),o=r(43523),l=r(84419),c=r(42363),d=r(29406);const u="ShareRestrictionsFilters-section-bK45Tn";var p=Object.defineProperty,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e};const f=function(e){const t=e,{className:r,friendFilterOptions:p}=t,y=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(t,["className","friendFilterOptions"]),{filterMovies:f,filterTelevision:b,filterMusic:Z}=p,S=(0,c.Z)(f,i.ZO,i.Jm),P=(0,c.Z)(f,i.GP,i.Bi),I=(0,c.Z)(b,i.ZO,i.Jm),E=(0,c.Z)(b,i.GP,i.Bi),w=(0,c.Z)(Z,i.GP,i.Bi);return n.createElement("div",{className:r},n.createElement("div",{className:u},n.createElement("div",null,(0,s.Z)("Content Restrictions"),n.createElement(l.Z,null),o.ZP.get(o.MB).title),n.createElement(d.Z,v({excludedTags:S.excludeTags,initialValue:S.initialAllowTags,metadataType:a.MOVIE,name:"moviesContentRatings",tagType:i.ZO,onChange:S.onAllowTagsChange},y)),n.createElement(d.Z,v({excludedTags:S.allowTags,initialValue:S.initialExcludeTags,metadataType:a.MOVIE,name:"moviesExcludeContentRatings",tagType:i.Jm,onChange:S.onExcludeTagsChange},y)),n.createElement(d.Z,v({excludedTags:P.excludeTags,initialValue:P.initialAllowTags,metadataType:a.MOVIE,name:"moviesLabels",tagType:i.GP,onChange:P.onAllowTagsChange},y)),n.createElement(d.Z,v({excludedTags:P.allowTags,initialValue:P.initialExcludeTags,metadataType:a.MOVIE,name:"moviesExcludeLabels",tagType:i.Bi,onChange:P.onExcludeTagsChange},y))),n.createElement("div",{className:u},n.createElement("div",null,(0,s.Z)("Content Restrictions"),n.createElement(l.Z,null),o.ZP.get(o.TV).title),n.createElement(d.Z,v({excludedTags:I.excludeTags,initialValue:I.initialAllowTags,metadataType:a.SHOW,name:"televisionContentRatings",tagType:i.ZO,onChange:I.onAllowTagsChange},y)),n.createElement(d.Z,v({excludedTags:I.allowTags,initialValue:I.initialExcludeTags,metadataType:a.SHOW,name:"televisionExcludeContentRatings",tagType:i.Jm,onChange:I.onExcludeTagsChange},y)),n.createElement(d.Z,v({excludedTags:E.excludeTags,initialValue:E.initialAllowTags,metadataType:a.SHOW,name:"televisionLabels",tagType:i.GP,onChange:E.onAllowTagsChange},y)),n.createElement(d.Z,v({excludedTags:E.allowTags,initialValue:E.initialExcludeTags,metadataType:a.SHOW,name:"televisionExcludeLabels",tagType:i.Bi,onChange:E.onExcludeTagsChange},y))),n.createElement("div",{className:u},n.createElement("div",null,(0,s.Z)("Content Restrictions"),n.createElement(l.Z,null),o.ZP.get(o.xF).title),n.createElement(d.Z,v({excludedTags:w.excludeTags,initialValue:w.initialAllowTags,metadataType:a.ARTIST,name:"musicLabels",tagType:i.GP,onChange:w.onAllowTagsChange},y)),n.createElement(d.Z,v({excludedTags:w.allowTags,initialValue:w.initialExcludeTags,metadataType:a.ARTIST,name:"musicExcludeLabels",tagType:i.Bi,onChange:w.onExcludeTagsChange},y))))}},65710:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(67294),i=r(37754),s=r(7614),a=r(58851),o=r(69281);const l=(0,a.Z)((function(e){const{name:t,title:r,subtitle:a,value:l,values:c,onChange:d}=e;return n.createElement("div",null,n.createElement(i.Z,null,r),n.createElement(s.Z,{name:t,size:o.HC,value:l,values:c,onChange:d}),a?n.createElement("div",{className:"ShareRestrictionsSelectInputItem-subtitle-_Rn19I"},a):null)}))},29406:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ie});var n=r(67294),i=r(81042),s=r(73788),a=r(9966),o=r(73538),l=r(28201),c=r(58808),d=r.n(c);const u={container:"AutosuggestInput-container-jTZmhV",input:"AutosuggestInput-input-bkbvxA",suggestionsContainer:"AutosuggestInput-suggestionsContainer-QGX8Wa Scroller-scroller-aaw2tP Scroller-vertical-nKq0Q8 Menu-menu-OCzudL",suggestionsContainerOpen:"AutosuggestInput-suggestionsContainerOpen-v7EqZZ",suggestionsList:"AutosuggestInput-suggestionsList-Y0XP0a",suggestion:"AutosuggestInput-suggestion-PwtjAa MenuItem-menuItem-C_KBbX",suggestionHighlighted:"AutosuggestInput-suggestionHighlighted-dMfRLM"};var p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&f(e,r,t[r]);return e};function Z(e){const t=e,{inputComponent:r,suggestionsComponent:i,theme:s}=t,a=((e,t)=>{var r={};for(var n in e)y.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&g)for(var n of g(e))t.indexOf(n)<0&&v.call(e,n)&&(r[n]=e[n]);return r})(t,["inputComponent","suggestionsComponent","theme"]);return n.createElement(d(),(o=b({},a),l={renderInputComponent:r,renderSuggestionsContainer:i,theme:b(b({},u),s)},m(o,h(l))));var o,l}Z.defaultProps={inputComponent:function(e){return n.createElement("input",b({type:"text"},e))}};const S=Z;var P=r(94184),I=r.n(P),E=r(13469),w=r.n(E),C=r(45062),M=r(85448);class D extends n.Component{constructor(){super(...arguments),this.onPress=()=>{const{onRemove:e,index:t}=this.props;e(t)}}render(){const{className:e,removeClassName:t,tag:r,iconComponent:i,isDisabled:s,removeLabel:a,getTagDisplayValue:o}=this.props;return n.createElement("span",{className:e},s?null:n.createElement(M.Z,{"aria-label":a,className:t,onPress:this.onPress},n.createElement(i,null)),n.createElement("span",null,o(r)))}}D.defaultProps={className:"TagLabel-tag-wWg8UE",removeClassName:"TagLabel-remove-L6L9LC"};const O=D;var T=Object.defineProperty,x=Object.defineProperties,A=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,L=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,j=(e,t)=>{for(var r in t||(t={}))N.call(t,r)&&L(e,r,t[r]);if(k)for(var r of k(t))R.call(t,r)&&L(e,r,t[r]);return e},V=(e,t)=>{var r={};for(var n in e)N.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&k)for(var n of k(e))t.indexOf(n)<0&&R.call(e,n)&&(r[n]=e[n]);return r};class U extends n.Component{constructor(e,t){super(e,t),this.addTag=e=>this._addTags([e]),this.setInputRef=e=>{this.inputRef=e},this.setDivRef=e=>{this.divRef=e},this.onPaste=e=>{const{addOnPaste:t,pasteSplit:r,makeTag:n}=this.props;if(!t)return;e.preventDefault();const i=r(function(e){return window.clipboardData?window.clipboardData.getData("Text"):e.clipboardData?e.clipboardData.getData("text/plain"):""}(e)).map((e=>n(e)));this._addTags(i)},this.onKeyDown=e=>{const{onKeyDown:t}=this.props.inputProps;if(t&&t(e),e.defaultPrevented)return;const{value:r,removeKeys:n,addKeys:i,inputValue:s}=this.props,a=""===s,o=e.keyCode,l=-1!==i.indexOf(o),c=-1!==n.indexOf(o);l&&(this._accept()||o===C.K5)&&e.preventDefault(),c&&r.length>0&&a&&(e.preventDefault(),this._removeTag(r.length-1))},this.onClick=e=>{e.target===this.divRef&&(this.inputRef&&"function"==typeof this.inputRef.focus&&this.inputRef.focus(),this.onFocus())},this.onChange=e=>{const{onInputChange:t}=this.props,{onChange:r}=this.props.inputProps,n=e.target.value;r&&r(e),t(n)},this.onFocus=e=>{const{onFocus:t}=this.props.inputProps;t&&t(e),this.setState({isFocused:!0})},this.onBlur=e=>{const{onBlur:t}=this.props.inputProps;if(this.setState({isFocused:!1}),null!=e&&(t&&t(e),this.props.addOnBlur)){const t=this.props.makeTag(e.target.value);this._addTags([t])}},this.onRemove=e=>{this._removeTag(e)},this.state={isFocused:!1}}componentDidUpdate(e){const{value:t,excludedTags:r}=this.props;r!==e.excludedTags&&r.forEach((e=>{const r=t.findIndex((t=>t===e));this._removeTag(r)}))}_removeTag(e){if(e>-1&&e<this.props.value.length){const t=this.props.value.slice(0),r=t.splice(e,1);this.props.onChange(t,r,[e])}}_clearInput(){this.props.onInputChange("")}_addTags(e){const{validationRegex:t,onlyUnique:r,maxTags:n,value:i,getTagValue:s,onChange:a,onValidationReject:o}=this.props;let l;if(r&&(e=w().uniq(e,(e=>s(e)))),t&&(l=e.filter((e=>!t.test(s(e)))),e=e.filter((e=>t.test(s(e))))),e=e.filter((e=>{const t=s(e);return t?t.trim().length>0:t})),n>=0){const t=Math.max(n-i.length,0);e=e.slice(0,t)}if(o&&l&&l.length>0&&o(l),e.length>0){let t=i.concat(e);const n=[];for(let t=0;t<e.length;t++)n.push(i.length+t);r&&(t=w().uniq(t,(e=>s(e))));const o=t.length!==i.length;return o&&a(t,e,n),this._clearInput(),o}return this._clearInput(),!1}_accept(){let e=this.props.inputValue;return""!==e&&(e=this.props.makeTag(e),this._addTags([e]))}inputProps(){const{value:e,inputProps:t}=this.props,r=t,{placeholder:n,onChange:i,onFocus:s,onBlur:a}=r,o=V(r,["placeholder","onChange","onFocus","onBlur"]),l=j({className:"TagsInput-input-tDkfvq",placeholder:e.length?"":n},o);return this.props.isDisabled&&(l.isDisabled=!0),l}render(){const{id:e,className:t,errorClassName:r,focusedClassName:i,hasError:s,value:a,inputValue:o,getTagValue:l,getTagDisplayValue:c,tagProps:d,tagComponent:u,inputComponent:p,isDisabled:m}=this.props,{isFocused:h}=this.state;return n.createElement("div",{ref:this.setDivRef,className:I()(t,h&&i,s&&r),id:e,onClick:this.onClick},a.map(((e,t)=>n.createElement(u,j({key:`${l(e)}-${t}`,getTagDisplayValue:c,index:t,isDisabled:m,tag:e,tagCount:a.length,onRemove:this.onRemove},d)))),n.createElement(p,(g=j({key:"input",inputRef:this.setInputRef,value:o},this.inputProps()),y={addTag:this.addTag,onBlur:this.onBlur,onChange:this.onChange,onFocus:this.onFocus,onKeyDown:this.onKeyDown,onPaste:this.onPaste},x(g,A(y)))));var g,y}}U.defaultProps={className:"TagsInput-tagsInput-YzbHcb",errorClassName:"TagsInput-hasError-MCUx1p input-hasError-GqupwL",addKeys:[C.Mf,C.K5],addOnBlur:!1,addOnPaste:!1,inputProps:{},removeKeys:[C.ZH],inputComponent:function(e){const t=e,{inputRef:r,addTag:i}=t,s=V(t,["inputRef","addTag"]);return n.createElement("input",j({ref:r,type:"text"},s))},tagComponent:O,pasteSplit:function(e){return e.split(" ").map((e=>e.trim()))},tagProps:{},onlyUnique:!0,maxTags:-1,excludedTags:[],validationRegex:null,isDisabled:!1,getTagDisplayValue:e=>e,getTagValue:e=>e,makeTag:e=>e};const F=U;var B=Object.defineProperty,_=Object.defineProperties,z=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,Q=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{for(var r in t||(t={}))W.call(t,r)&&Q(e,r,t[r]);if(H)for(var r of H(t))G.call(t,r)&&Q(e,r,t[r]);return e},K=(e,t)=>{var r={};for(var n in e)W.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&H)for(var n of H(e))t.indexOf(n)<0&&G.call(e,n)&&(r[n]=e[n]);return r};const q={placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!1},{name:"flip",enabled:!1},{name:"maxSize",enabled:!0,phase:"beforeWrite",requiresIfExists:["offset","preventOverflow","flip"],fn({state:e,name:t,options:r}){const n=(0,a.Z)(e,r),{y:i}=e.modifiersData.preventOverflow||{x:0,y:0},{height:s}=e.rects.popper,[o]=e.placement.split("-"),l="top"===o?"top":"bottom";e.styles.popper.maxHeight=s-n[l]-i-14+"px",e.styles.popper.width=`${e.rects.reference.width}px`}}]};class Y extends n.Component{constructor(e,t){super(e,t),this.setTagsInputRef=e=>{this.tagsInputRef=e},this.onInputChange=e=>{this.setState({inputValue:e})},this.onSuggestionSelected=(e,{suggestion:t})=>{this.tagsInputRef.addTag(this.props.makeTagFromSuggestion(t))},this.onInputFocus=(e,t)=>{this.setState({isMenuOpen:!0},(()=>t(e)))},this.onWindowPress=e=>{const t=this.suggestRef.current,r=t&&t.contains(e.target),n=!r&&document.getElementById(this.inputID),i=n&&n.contains(e.target);r||i||this.setState({isMenuOpen:!1})},this.renderInputComponent=e=>{var t=e,{ref:r}=t,i=K(t,["ref"]);const{className:s,shouldRenderSuggestions:a,tagComponent:o,validationRegex:l,value:c,makeTag:d,getTagDisplayValue:u,getTagValue:p,tagProps:m,excludedTags:h,onChange:g}=this.props,{inputValue:y}=this.state;return n.createElement(F,{ref:this.setTagsInputRef,addOnBlur:!a(y),className:s,excludedTags:h,getTagDisplayValue:u,getTagValue:p,id:this.inputID,inputProps:(v=$({},i),f={inputRef:r,onFocus:e=>{this.onInputFocus(e,i.onFocus)}},_(v,z(f))),inputValue:y,makeTag:d,tagComponent:o,tagProps:m,validationRegex:l,value:c,onChange:g,onInputChange:this.onInputChange});var v,f},this.renderSuggestionsComponent=e=>{const t=e,{containerProps:r}=t,i=r,{ref:s}=i,a=K(i,["ref"]),{children:l}=t;return s(this.suggestRef.current),n.createElement(o.Z,$({ref:this.suggestRef,isOpen:this.state.isMenuOpen,options:q,target:this.inputID},a),l)},this.state={inputValue:"",isMenuOpen:!1},this.suggestRef=n.createRef(),this.inputID=(0,l.Z)()}componentDidUpdate(e,t){!t.isMenuOpen&&this.state.isMenuOpen?this._enable():t.isMenuOpen&&!this.state.isMenuOpen&&this._disable()}_enable(){document.addEventListener("mouseup",this.onWindowPress),document.addEventListener("touchend",this.onWindowPress)}_disable(){document.removeEventListener("mouseup",this.onWindowPress),document.removeEventListener("touchend",this.onWindowPress)}render(){const{placeholder:e,suggestions:t,getAddSuggestionTag:r,getSuggestionValue:i,renderSuggestion:s,suggestionsFilter:a,shouldRenderSuggestions:o,theme:l,onSuggestionsClearRequested:c,onSuggestionsFetchRequested:d}=this.props,{inputValue:u}=this.state,p=r&&u.length>0?[r(u)]:[],m=t.reduce(((e,t)=>(a(t,u)&&e.push(t),e)),p);return n.createElement(S,{focusInputOnSuggestionClick:!1,getSuggestionValue:i,highlightFirstSuggestion:!0,inputComponent:this.renderInputComponent,inputProps:{value:u,placeholder:e,onChange:(e,{newValue:t,method:r})=>{"enter"===r&&e.preventDefault(),"enter"===r||"click"===r?this.setState({isMenuOpen:!1}):"type"===r&&this.setState({isMenuOpen:!0})}},renderSuggestion:s,shouldRenderSuggestions:o,suggestions:m,suggestionsComponent:this.renderSuggestionsComponent,theme:$({input:"AutosuggestTagsInput-input-v2M4L8 TagsInput-input-tDkfvq"},l),onSuggestionSelected:this.onSuggestionSelected,onSuggestionsClearRequested:c,onSuggestionsFetchRequested:d})}}Y.defaultProps={className:"AutosuggestTagsInput-tagsInput-pn247D TagsInput-tagsInput-YzbHcb",suggestions:[],value:[],shouldRenderSuggestions:()=>!1};const X=Y;var J=r(85482),ee=r(2768),te=r(95162),re=r(58851),ne=Object.defineProperty,ie=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,oe=(e,t,r)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const le=(0,re.Z)((function(e){const t=e,{formGroupClassName:r,formLabelClassName:i,name:s,labelText:a,helpText:o,showErrors:l,errors:c,children:d}=t,u=((e,t)=>{var r={};for(var n in e)se.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ie)for(var n of ie(e))t.indexOf(n)<0&&ae.call(e,n)&&(r[n]=e[n]);return r})(t,["formGroupClassName","formLabelClassName","name","labelText","helpText","showErrors","errors","children"]);return n.createElement(J.Z,{className:r},d,n.createElement(te.Z,{className:i,errors:c,labelText:a,name:s,showErrors:l}),n.createElement(X,((e,t)=>{for(var r in t||(t={}))se.call(t,r)&&oe(e,r,t[r]);if(ie)for(var r of ie(t))ae.call(t,r)&&oe(e,r,t[r]);return e})({hasError:l,name:s},u)),o?n.createElement(ee.Z,null,o):null)}));var ce=r(51861);class de extends n.Component{constructor(){super(...arguments),this.onRemovePress=()=>{this.props.onRemove(this.props.index)}}render(){const{tag:e,getTagDisplayValue:t}=this.props;return n.createElement("span",{className:"ShareRestrictionsTag-container-S_m4XU"},n.createElement("span",{className:"ShareRestrictionsTag-tag-Qvs8CU"},n.createElement(M.Z,{"aria-label":(0,s.Z)("Remove Tag"),className:"ShareRestrictionsTag-remove-pEOJDD TagLabel-remove-L6L9LC",onPress:this.onRemovePress},n.createElement(ce.Z,null)),n.createElement("span",null,t(e))))}}const ue=de,pe={[i.ZO]:{labelText:()=>(0,s.Z)("Allow Only Ratings"),placeholder:()=>(0,s.Z)("Allow all ratings")},[i.Jm]:{labelText:()=>(0,s.Z)("Exclude Ratings"),placeholder:()=>(0,s.Z)("Don't exclude any ratings")},[i.GP]:{labelText:()=>(0,s.Z)("Allow Only Labels"),placeholder:()=>(0,s.Z)("Allow all labels")},[i.Bi]:{labelText:()=>(0,s.Z)("Exclude Labels"),placeholder:()=>(0,s.Z)("Don't exclude any labels")}};function me(e){const{metadataType:t,tagType:r,filterOptionsTags:n}=e,s=r===i.ZO||r===i.Jm?i.ZO:i.GP;return n[t][s]}const he=e=>e.value,ge=e=>""===e.key?e.value:e.title,ye=(e,t)=>e.title.toUpperCase().includes(t.toUpperCase()),ve=e=>({key:"",title:(0,s.Z)("Add {inputValue}",{inputValue:e}),value:e}),fe=e=>e.title,be=()=>!0,Ze=()=>{},Se=()=>{};class Pe extends n.Component{static getDerivedStateFromProps(e,t){return!t.isFilterOptionsTagsPopulated&&e.isFilterOptionsTagsPopulated?{suggestions:me(e),isFilterOptionsTagsPopulated:!0}:null}constructor(e,t){super(e,t);const{isFilterOptionsTagsPopulated:r}=e;this.state={suggestions:r?me(e):[],isFilterOptionsTagsPopulated:r}}render(){const{name:e,tagType:t,initialValue:r,excludedTags:i,onChange:s}=this.props,{labelText:a,placeholder:o}=pe[t];return n.createElement(le,{excludedTags:i,getAddSuggestionTag:ve,getSuggestionValue:he,initialValue:r,labelText:a(),makeTagFromSuggestion:ge,name:e,placeholder:o(),renderSuggestion:fe,shouldRenderSuggestions:be,suggestions:this.state.suggestions,suggestionsFilter:ye,tagComponent:ue,onChange:s,onSuggestionsClearRequested:Ze,onSuggestionsFetchRequested:Se})}}const Ie=Pe},51079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(15851),s=r(73788),a=r(37754),o=r(7614),l=r(58851),c=r(69281);function d(){return i.ZH().map((e=>({[e.identifier]:e.title})))}function u(e){const{className:t,name:r,value:i,hasPlexPass:l,onChange:u}=e,p=(0,n.useMemo)(d,[]);return n.createElement("div",null,n.createElement(a.Z,null,(0,s.Z)("Restriction Profile")),n.createElement(o.Z,{className:t,name:r,size:c.HC,value:i,values:p,onChange:u}),n.createElement("div",{className:"RestrictionProfilesInput-subtitle-y4vSql"},l?(0,s.Z)("Younger Kid allows TV-Y, G, TV-G and equivalent; Older Kid allows TV-PG, PG and equivalent; Teen allows TV-14, PG-13 and equivalent. Pick None to choose your own ratings and manage other Media Server permissions."):(0,s.Z)("Younger Kid allows TV-Y, G, TV-G and equivalent; Older Kid allows TV-PG, PG and equivalent; Teen allows TV-14, PG-13 and equivalent. With a Plex Pass, you can choose your own ratings and manage other Media Server permissions.")))}u.defaultProps={className:"RestrictionProfilesInput-input-qqR0eD SelectInput-input-EWuFb5 input-input-XAtklw"};const p=(0,l.Z)(u)},59597:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(67294),i=r(8067),s=r(94184),a=r.n(s),o=r(84739),l=r(27553),c=r(64188),d=r(56422),u=r(54320),p=r(84419),m=r(18222),h=r(49081);const g="UserListItem-text-g6kyRc";class y extends n.Component{constructor(){super(...arguments),this.onPress=()=>{this.props.onSelect(this.props.user.id)}}render(){const{serverEntityID:e,user:t,isSelected:r,hasHomeLibraryAccessLabels:i}=this.props,{title:s,email:y,thumb:v,home:f,username:b}=t,Z=y&&y!==s;return n.createElement(m.Z,{className:r?"UserListItem-selectedButton-pcFF07 UserListItem-button-izNYLx Button-button-TxWeuE Link-link-SxPFpG":"UserListItem-button-izNYLx Button-button-TxWeuE Link-link-SxPFpG",onPress:this.onPress},n.createElement(h.Z,{className:a()("UserListItem-avatar-ij83r2 AvatarImg-avatar-dvpNLl",i&&"UserListItem-avatarMargin-rr1Se7"),height:30,serverEntityID:e,url:v,width:30}),i?n.createElement(c.K,null,n.createElement("div",{className:g},n.createElement(d.x,{color:u.Il.Primary,level:d.N.Body2},s)),n.createElement("div",{className:g},s!==b?n.createElement(d.x,{color:u.Il.Muted,level:d.N.Body2},b):null)):null,n.createElement("div",{className:"UserListItem-titleContainer-aG9Dgj"},i?null:n.createElement(n.Fragment,null,n.createElement("span",{className:"UserListItem-title-uoy2aa"},s),Z?n.createElement("span",{className:"UserListItem-email-dgplWF"},n.createElement(p.Z,null),y):null)),r?n.createElement("div",{className:"UserListItem-selectedIcon-ipHN6v UserListItem-icon-L8Xboh"},n.createElement(o.N,null)):null,n.createElement("div",{className:f?"UserListItem-visibleHomeIcon-qqgxrc UserListItem-homeIcon-VmB4Zq UserListItem-icon-L8Xboh":"UserListItem-homeIcon-VmB4Zq UserListItem-icon-L8Xboh"},n.createElement(l.A,null)))}}const v=y;function f(e){const{className:t,serverEntityID:r,users:s,hasHomeLibraryAccessLabels:a,isUserSelected:o,onUserSelect:l}=e;return n.createElement(i.Z,{autoScroll:!0,className:t},s.map((e=>n.createElement(v,{key:e.id,hasHomeLibraryAccessLabels:a,isSelected:o(e),serverEntityID:r,user:e,onSelect:l}))))}f.defaultProps={className:"UserList-list-eprPYu Scroller-vertical-nKq0Q8"};const b=f},9083:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(94184),i=r.n(n),s=r(67294);var a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){var t=e,{className:r,name:n,width:a,height:u}=t,p=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(t,["className","name","width","height"]);const m=n.toUpperCase().split(" "),h=m[0].charAt(0),g=m[m.length-1].charAt(0),y=m.length>1?`${h}${g}`:n.charAt(0),v={fontSize:Math.max(14,Math.min(Math.round(a/4),42)),lineHeight:`${u}px`};return s.createElement("div",((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({className:i()(r,"Anagram-anagram-H5cIHF"),style:v},p),y)}u.defaultProps={width:13,height:13};const p=u},76651:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(67294),i=r(98116),s=r(51017);var a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e},h=(e,t)=>o(e,l(t));function g(e){return n.createElement(i.Z,h(m({},e),{textClassName:"CircularProgressBar-circularProgressBarText-bonnqM CircularProgressBar-circularProgressBarText-ZQsWiX"}))}g.defaultProps=h(m({},i.Z.defaultProps),{backgroundClassName:"CircularProgressBar-circularProgressBarBackground-BcC4L1 CircularProgressBar-circularProgressBarBackground-Bw4kwM",strokeColor:s.Z.primaryColor});const y=g},71034:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(67294),i=r(73788),s=r(62704),a=r(61677),o=r(8059),l=r(20533);class c extends n.Component{constructor(e,t){super(e,t),this.onLineHeightRef=e=>{e&&this.setState({lineHeight:e.clientHeight})},this.onMeasure=({height:e})=>{this.setState({expandedHeight:e})},this.onTogglePress=()=>{this.setState({isCollapsed:!this.state.isCollapsed,allowTransition:!0})},this.state={isCollapsed:!0,allowTransition:!1,lineHeight:0,expandedHeight:0}}shouldComponentUpdate(e,t){return(0,l.Z)(this,e,t)}render(){const{className:e,dangerouslySetInnerHTML:t,children:r,labelLess:i,labelMore:l,maxLines:c}=this.props,{isCollapsed:d,allowTransition:u,expandedHeight:p,lineHeight:m}=this.state,h=m*c,g=p>h,y={overflow:"hidden",maxHeight:d?h:p};return n.createElement("div",{className:e},m?null:n.createElement("div",{ref:this.onLineHeightRef,className:"CollapsibleText-lineHeightMeasure-eLxXue"}),n.createElement("div",{className:u?"CollapsibleText-contentTransition-LlzVNd":void 0,style:y},n.createElement(s.Z,{ignorePosition:!0,ignoreWidth:!0,onMeasure:this.onMeasure},t?n.createElement("div",{dangerouslySetInnerHTML:t}):r)),g?n.createElement(a.Z,{arrowClassName:"CollapsibleText-readMoreArrow-X9_6sn DisclosureArrowButton-disclosureArrow-iPIByG DisclosureArrow-disclosureArrow-NTDkGd",className:"CollapsibleText-readMore-wteMHG DisclosureArrowButton-disclosureArrowButton-x_5Y9W Link-link-SxPFpG",direction:d?o.WV:o.UP,isSelected:!1,onPress:this.onTogglePress},d?l:i):null)}}c.defaultProps={labelLess:"Read Less",labelMore:"Read More",maxLines:3};const d=c;var u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(h)for(var r of h(t))y.call(t,r)&&v(e,r,t[r]);return e};function b(e){return n.createElement(d,(t=f({},e),r={labelLess:(0,i.Z)("Read Less"),labelMore:(0,i.Z)("Read More")},p(t,m(r))));var t,r}b.defaultProps=f({},d.defaultProps);const Z=b},31489:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e){var t=e,{children:r}=t,i=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e})({},i),r)}c.defaultProps={className:"DragPreviewLayer-dragLayer-Rfqy6a"};const d=c},26352:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i(e){const{className:t,iconComponent:r,title:i,text:s}=e;return n.createElement("div",{className:t},n.createElement("div",{className:"PlexPassUpsell-iconContainer-n7kBx8"},n.createElement(r,{className:"PlexPassUpsell-icon-gwdd4L"})),n.createElement("div",{className:"PlexPassUpsell-title-itzp_S"},i),n.createElement("div",{className:"PlexPassUpsell-text-gSdj_4"},s))}i.defaultProps={className:"PlexPassUpsell-upsell-RSLUlW"};const s=i},90425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(94184),i=r.n(n),s=r(67294);function a(e,t,r){return(e-t)/(r-t)*100}r(32903);var o=r(85448),l=r(20533);const c="Slider-isDragging-nmzwVv";var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e};class y extends s.Component{constructor(e,t){super(e,t),this.onMouseDown=e=>{e.preventDefault(),0===e.button&&this._startDrag(e.pageX,e.pageY,!1)},this.onMouseMove=({pageX:e,pageY:t})=>{if(this.state.isDragging)return;const r=this._getValueForPosition(e,t),n=this._trackRef.current.getBoundingClientRect(),i=this.props.isVertical?{x:n.left,y:t}:{x:e,y:n.top};this.props.onMove({position:i,positionValue:r,steppedValue:this._getSteppedValue(r)})},this.onTouchStart=e=>{e.preventDefault();const t=e.touches&&e.touches[0];t&&this._startDrag(t.pageX,t.pageY,!0)},this.onDocumentMouseMove=e=>{this._drag(e.pageX,e.pageY)},this.onDocumentTouchMove=e=>{const t=e.touches&&e.touches[0];t&&this._drag(t.pageX,e.pageY)},this.onDocumentMouseUp=e=>{this._stopDrag(e.pageX,e.pageY)},this.onDocumentTouchEnd=e=>{const t=e.changedTouches&&e.changedTouches[0];t&&this._stopDrag(t.pageX,t.pageY)},this._trackRef=s.createRef(),this.state={isDragging:!1}}shouldComponentUpdate(e,t){return(0,l.Z)(this,e,t)}componentWillUnmount(){this._stopListeningForDrag()}_listenForDrag(e){e?(document.addEventListener("touchmove",this.onDocumentTouchMove),document.addEventListener("touchcancel",this.onDocumentTouchEnd),document.addEventListener("touchend",this.onDocumentTouchEnd)):(document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp))}_stopListeningForDrag(){document.removeEventListener("mousemove",this.onDocumentMouseMove),document.removeEventListener("touchmove",this.onDocumentTouchMove),document.removeEventListener("mouseup",this.onDocumentMouseUp),document.removeEventListener("touchcancel",this.onDocumentTouchEnd),document.removeEventListener("touchend",this.onDocumentTouchEnd)}_startDrag(e,t,r){this._changeValue(this._getValueForPosition(e,t)),this._listenForDrag(r),this.props.onDragStart&&this.props.onDragStart()}_drag(e,t){this.state.isDragging||(document.body.classList.add(c),this.setState({isDragging:!0})),this._changeValue(this._getValueForPosition(e,t))}_stopDrag(e,t){document.body.classList.remove(c),this._stopListeningForDrag();const r=this._getValueForPosition(e,t),n=this._getSteppedValue(r);this._changeValue(r),this.setState({isDragging:!1}),this.props.onDragComplete&&this.props.onDragComplete({positionValue:r,steppedValue:n})}_getValueForPosition(e,t){const{isVertical:r,min:n,max:i}=this.props,s=this._trackRef.current,a=s.getBoundingClientRect();let o;if(r){const e=t-document.body.scrollTop;o=(a.bottom-e)/s.offsetHeight}else o=(e-document.body.scrollLeft-a.left)/s.offsetWidth;return o=Math.min(Math.max(o,0),1),(i-n)*o+n}_getSteppedValue(e){const{min:t,max:r,stepSize:n}=this.props;if(!n)return e;const i=Math.round(e/n)*n;return Math.min(Math.max(i,t),r)}_getStickyValue(e){const{max:t,min:r,stepSize:n,stickiness:i}=this.props;if(!n||!i)return e;const s=this._getSteppedValue(e);return Math.abs(s-e)/(t-r)<i/100?s:e}_changeValue(e){const{value:t}=this.props;e!==t&&this.props.onChange({positionDelta:e-t,positionValue:e,steppedValue:this._getSteppedValue(e)})}render(){const{style:e,className:t,trackClassName:r,secondaryFillClassName:n,fillClassName:l,thumbClassName:d,thumbTrackClassName:u,label:p,tabIndex:m,value:h,min:y,max:v,secondaryMin:f,secondaryMax:b,showSecondaryFill:Z,showFill:S,autoHideThumb:P,isDisabled:I,isVertical:E,onMove:w,onMouseEnter:C,onMouseLeave:M,onWheel:D}=this.props,{isDragging:O}=this.state,T=a(this._getStickyValue(h),y,v);let x="scaleX",A="translateX";E&&(x="scaleY",A="translateY");const k=`${A}(${E?-T:-(100-T)}%)`,N=f?a(this._getStickyValue(f),y,v):0,R=b?a(this._getStickyValue(b),y,v):0,L=Math.max((T-N)/100,0),j=`${x}(${Math.max((R-N)/100,0)})`,V=f?N+"%":void 0,U=E?{top:V}:{left:V},F=g({transform:`${x}(${L})`},U),B=g({transform:j},U);return s.createElement("div",{className:i()(t,I&&"Slider-isDisabled-xoUSw3",O&&c,P&&"Slider-hasAutoHideThumb-c3bHgc"),style:e,onMouseDown:I?null:this.onMouseDown,onMouseEnter:I?null:C,onMouseLeave:I?null:M,onMouseMove:I||!w?null:this.onMouseMove,onTouchStart:I?null:this.onTouchStart,onWheel:I?null:D},s.createElement("div",{ref:this._trackRef,className:r},Z?s.createElement("div",{className:n,style:B}):null,S?s.createElement("div",{className:l,style:F}):null),s.createElement("div",{className:u,style:{transform:k}},s.createElement(o.Z,{"aria-labelledby":p,"aria-valuemax":v,"aria-valuemin":y,"aria-valuenow":h,className:d,role:"slider",tabIndex:m,onMouseDown:this.onMouseDown,onMouseMove:w&&this.onMouseMove,onTouchStart:this.onTouchStart})))}}y.defaultProps={className:"Slider-slider-YdLxcK",trackClassName:"Slider-track-i7q9Yd",fillClassName:"Slider-fill-Rq3kSU",secondaryFillClassName:"Slider-secondaryFill-BduU3_ Slider-fill-Rq3kSU",thumbClassName:"Slider-thumb-YPvtji Link-link-SxPFpG",thumbTrackClassName:"Slider-thumbTrack-INScRp",min:0,max:100,stepSize:0,stickiness:10,showFill:!1,showSecondaryFill:!1,autoHideThumb:!1,isDisabled:!1,isDragging:!1,isVertical:!1};const v=y},27305:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(28216),i=r(22222),s=r(86555),a=r(11244),o=r(71741),l=r(25483);var c=r(67294),d=r(74378),u=r(49081),p=r(24107);const m=parseInt(p.Z.playlistBadgeSize,10);function h(e){const{className:t,textClassName:r,serverEntityID:n,attribution:i,avatar:s,name:a,hasOwner:o}=e;return i?c.createElement("div",{className:t},c.createElement(d.Z,{attribution:i,className:"SourceBadge-attribution-Thhux3"})):o?c.createElement("div",{className:t},c.createElement("span",{className:r},a),c.createElement(u.Z,{className:"SourceBadge-avatar-Thmc6A AvatarImg-avatar-dvpNLl",height:m,serverEntityID:n,url:s,width:m})):null}h.defaultProps={className:"SourceBadge-container-SCUsWQ"};const g=h,y=(0,n.$j)((function(){return(0,i.P1)((0,s.Z)(),(0,i.P1)(l.Z,o.Z,(0,i.P1)((0,s.Z)(),a.Z,((e={},t)=>e.source?t.ownerId:null)),((e,t,r)=>{const n=e.find((e=>{const n=t[e];return n&&n.id===r}));return n&&t[n]})),((e={},t)=>({attribution:e.attribution,hasOwner:!!t,avatar:t&&t.thumb,name:t&&t.title})))}))(g)},42985:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(73788),s=r(86192),a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){return n.createElement(s.Z,(t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({},e),r={loadingLabel:(0,i.Z)("Loading")},o(t,l(r))));var t,r}m.propTypes=s.Z.propTypes,m.defaultProps=s.Z.defaultProps;const h=m},42613:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var n=r(94184),i=r.n(n),s=r(67294),a=r(13469),o=r.n(a),l=r(45697),c=r.n(l),d=r(90558);function u(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-star-dot-560"};i["aria-hidden"]=!t,i.style=n,i.className=d.Z.plexIcon+(r?" "+r:"");const a=[s.createElement.apply(s,["circle",{cx:"280",cy:"280",r:"40"}].concat([]))];return t&&a.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(a))}u.propTypes={"aria-label":c().string,className:c().string,style:c().object};const p=u;function m(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-star-empty-560"};i["aria-hidden"]=!t,i.style=n,i.className=d.Z.plexIcon+(r?" "+r:"");const a=[s.createElement.apply(s,["path",{d:"m342.864 199.975l203.432 0-164.58 119.575 62.864 193.475-164.58-119.575-164.58 119.575 62.864-193.475-164.58-119.575 203.432 0 62.864-193.475c20.955 64.492 41.909 128.983 62.864 193.475m-96.666 40l-109.387 0 88.496 64.296-33.802 104.032 88.495-64.296 88.495 64.296-33.802-104.032 88.496-64.296-109.387 0-33.802-104.033c-11.267 34.678-22.535 69.355-33.802 104.033"}].concat([]))];return t&&a.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(a))}m.propTypes={"aria-label":c().string,className:c().string,style:c().object};const h=m;var g=r(2857),y=r(73788),v=r(62208),f=r(20533),b=r(90425),Z=r(54647);const S="StarRating-stars-jnYZJ1";var P=Object.defineProperty,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))E.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))w.call(t,r)&&C(e,r,t[r]);return e};const D=(0,v.Z)(Z.Z.starPulseSpeed);function O(e,t){return e>0?Math.min(Math.floor(e)+1,t):0}function T({className:e,iconComponent:t,isVisible:r,isPulsing:n}){const a=i()(e,!r&&"StarRating-hidden-SHto6g",n&&"StarRating-pulsing-hQ1sS1");return s.createElement(t,{className:a})}function x(e){return s.createElement(T,M({className:"StarRating-emptyStar-Ix4bAP StarRating-star-nLZbZD",iconComponent:h},e))}function A(e){return s.createElement(T,M({className:"StarRating-fullStar-gjEXmn StarRating-star-nLZbZD",iconComponent:g.Z},e))}function k(){return s.createElement(p,{className:"StarRating-dot-VfsrKa"})}class N extends s.Component{constructor(e,t){super(e,t),this.onSliderChange=({positionValue:e})=>{const{starCount:t}=this.props,r=O(e,t);this.setState({currentValue:r})},this.onSliderMove=({positionValue:e})=>{const{starCount:t}=this.props,r=O(e,t);0!==r&&this.setState({currentValue:r})},this.onSlideComplete=({positionValue:e})=>{const{starCount:t}=this.props,r=O(e,t);this.state.currentRating!==r&&(this._setRating(r),this.props.onRatingChange(r))},this.onMouseLeave=({pageX:e})=>{this.setState({currentValue:this.state.currentRating})},this.state={currentValue:e.value,currentRating:e.value,isPulsing:!1}}UNSAFE_componentWillReceiveProps({value:e}){e=Math.max(0,Math.min(e,this.props.starCount)),this.state.currentRating!==e&&this._setRating(e)}shouldComponentUpdate(e,t){return(0,f.Z)(this,e,t)}componentDidUpdate(e,t){this.state.currentRating!==t.currentRating&&(window.clearTimeout(this._pulseTimeoutID),this._pulseTimeoutID=window.setTimeout((()=>{this.setState({isPulsing:!1})}),D))}componentWillUnmount(){window.clearTimeout(this._pulseTimeoutID)}_setRating(e){this.setState({currentValue:e,currentRating:e,isPulsing:!0})}render(){const{starCount:e,className:t}=this.props,{currentValue:r,currentRating:n,isPulsing:a}=this.state,l=!this.state.currentValue,c=!this.props.onRatingChange,d=o().range(e);return s.createElement("div",{className:i()(t,"StarRating-starRating-rrWgj7",c&&"StarRating-isReadOnly-HzfFc4",l&&"StarRating-isUnrated-y2Oo7W"),onMouseLeave:this.onMouseLeave},s.createElement("div",null,d.map((e=>s.createElement(k,{key:e})))),s.createElement("div",{className:S},d.map((e=>{const t=e>r-1;return s.createElement(x,{key:e,isVisible:t})}))),s.createElement("div",{className:S},d.map((e=>{const t=e<=r-1;return s.createElement(A,{key:e,isPulsing:a&&n>e,isVisible:t})}))),c?null:s.createElement(b.Z,{autoHideThumb:!0,className:"StarRating-slider-mbgppo",label:(0,y.Z)("User Rating"),max:e,min:0,stepSize:1,tabIndex:"-1",trackClassName:"StarRating-track-TDqs9I",value:this.state.currentValue,onChange:this.onSliderChange,onDragComplete:this.onSlideComplete,onMove:this.onSliderMove}))}}N.defaultProps={starCount:5,value:0};const R=N},72702:(e,t,r)=>{"use strict";r.d(t,{R3:()=>O,ZP:()=>A,Gb:()=>T});var n=r(67294),i=r(28216),s=r(22222),a=r(86555),o=r(62934),l=r(15579),c=r(70777),d=r(12559),u=r(73788),p=r(28629);var m=r(8089),h=r(57634),g=r(9984),y=r(49744),v=r(57702),f=r(64800),b=Object.defineProperty,Z=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&w(e,r,t[r]);if(P)for(var r of P(t))E.call(t,r)&&w(e,r,t[r]);return e},M=(e,t)=>Z(e,S(t));const D=null,O={SUBSCRIBE:"subscribe",CANCEL:"cancel",REMOVE:"remove",UPSELL:"upsell"};function T(e){const{onCancelDownloadActivity:t,onCreateDownloadSubscription:r,onDeleteDownloadSubscription:i}=e,[s,a]=(0,n.useState)({isOpen:!1,state:D}),o=(0,n.useCallback)((e=>{const t=e===O.SUBSCRIBE,n=e!==D&&!t,i=t?D:e;t&&r(),a({isOpen:n,state:i})}),[r]),l=(0,n.useCallback)((()=>a({isOpen:!1,state:D})),[]),c=(0,n.useCallback)((()=>{s.state===O.CANCEL?t():s.state===O.REMOVE&&i(),l()}),[s.state,t,l,i]);return M(C({},s),{onPress:o,onClose:l,onConfirm:c})}const x=(0,s.P1)((0,l.Z)(c.iU),(0,l.Z)(c.Ed),o.Z,((e,t,r)=>{var n;const i=t&&(null==(n=r.ownerFeatures)?void 0:n.includes(c.Ed));return!e&&!i})),A=(0,i.$j)((function(){return(0,s.P1)(((e,{isDisabled:t})=>t),(0,a.Z)(),(0,s.P1)((e=>e.downloads.states),(0,p.Z)(),(0,s.P1)((0,a.Z)(),(e=>e.ratingKey)),((e,t,r)=>e.find((e=>e.ratingKey===r&&e.sourceAttr===t)))),(e=d.sC,(0,s.P1)((0,a.Z)(),(0,p.Z)(),(0,h.Z)(e),((e,t,r)=>{const n=(0,m.Z)(t);return r.find((({Context:t})=>{let r=!1;if(t.itemKey===e.key){const e=(0,m.Z)(t.source);r=n.serverIdentifier===e.serverIdentifier&&n.providerIdentifier===e.providerIdentifier}return r}))}))),x,g.Z,((e,t,r,n,i,s)=>{const a=!!r,o=(0,v.Z)(t),l=(0,f.Z)(t);return{canCancel:!!n&&n.cancellable,canRemove:l,canShowUpsell:!l&&i,canSubscribe:!l,hasDownloadState:a,hasOfflineFile:o,hasOwnSubscription:l,isDisabled:e||!s,progress:n&&n.progress}}));var e}),(function(e,t){return{}}))((function(e){const t=e,{component:r,canCancel:i,canRemove:s,canShowUpsell:a,canSubscribe:o,metadataItemEntityID:l,metricsPage:c,providerEntityID:d,serverEntityID:p,onCancelDownloadActivity:m,onCreateDownloadSubscription:h,onDeleteDownloadSubscription:g,onPress:v}=t,f=((e,t)=>{var r={};for(var n in e)I.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&P)for(var n of P(e))t.indexOf(n)<0&&E.call(e,n)&&(r[n]=e[n]);return r})(t,["component","canCancel","canRemove","canShowUpsell","canSubscribe","metadataItemEntityID","metricsPage","providerEntityID","serverEntityID","onCancelDownloadActivity","onCreateDownloadSubscription","onDeleteDownloadSubscription","onPress"]),b=(0,n.useCallback)((()=>{let e=D;i?e=O.CANCEL:s?e=O.REMOVE:a?e=O.UPSELL:o&&(e=O.SUBSCRIBE),v&&v(e)}),[i,s,a,o,v]);let Z;return Z=i?(0,u.Z)("Cancel Download"):s?(0,u.Z)("Delete Download"):(0,u.Z)("Download"),n.createElement(n.Fragment,null,n.createElement(r,M(C({},f),{label:Z,onPress:b})),n.createElement(y.Z,{metadataItemEntityID:l,providerEntityID:d}))}))},9913:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(73788),s=r(85448),a=r(87236);var o=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){const t=e,{className:r,circleClassName:o,title:p}=t,m=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["className","circleClassName","title"]);return n.createElement(s.Z,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({"aria-label":(0,i.Z)("Play {title}",{title:p}),className:r},m),n.createElement(a.Z,{className:o}))}p.defaultProps={className:"PlayButton-playButton-vS1WII",circleClassName:"PlayButton-playCircle-fK1f_v"};const m=p},89549:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(73788),s=r(18222),a=r(25555),o=r(69281),l=r(27254);class c extends n.Component{constructor(e,t){super(e,t),this.onPlexPassPress=()=>{this.setState({isPlexPassModalOpen:!0})},this.onPlexPassModalClose=()=>{this.setState({isPlexPassModalOpen:!1})},this.state={isPlexPassModalOpen:!1}}render(){const{modalMetricsProperties:e,origin:t}=this.props,{isPlexPassModalOpen:r}=this.state;return n.createElement(s.Z,{kind:a._8,size:o.ln,onPress:this.onPlexPassPress},(0,i.Z)("Get a Plex Pass"),n.createElement(l.Z,{isOpen:r,metricsProperties:e,origin:t,onModalClose:this.onPlexPassModalClose}))}}const d=c},25432:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(73788),s=r(85448),a=r(3149),o=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){var t=e,{className:r,circleClassName:o,iconClassName:p,title:m}=t,h=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["className","circleClassName","iconClassName","title"]);return n.createElement(s.Z,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({"aria-label":(0,i.Z)("Record {title}",{title:m}),className:r},h),n.createElement(a.Z,{circleClassName:o,iconClassName:p}))}p.defaultProps={className:"RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3"};const m=p},337:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(94184),i=r.n(n),s=r(67294),a=r(73788),o=r(85448),l=r(14522);var c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function h(e){const t=e,{className:r,selectedClassName:n,circleClassName:c,iconClassName:h,title:g,isSelected:y}=t,v=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["className","selectedClassName","circleClassName","iconClassName","title","isSelected"]);return s.createElement(o.Z,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({"aria-label":y?(0,a.Z)("Deselect {title}",{title:g}):(0,a.Z)("Select {title}",{title:g}),className:i()(r,y&&n)},v),s.createElement("div",{className:c,"data-testid":"multipleSelectButton"},s.createElement(l.Z,{className:h})))}h.defaultProps={className:"SelectButton-selectButton-_goGWp",selectedClassName:"SelectButton-isSelected-JyE0IQ",circleClassName:"SelectButton-selectCircle-TVtowg",iconClassName:"SelectButton-selectedIcon-cuuouo"};const g=h},69477:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(45697),i=r.n(n),s=r(28216),a=r(22222),o=r(87880),l=r(77072),c=r(67294),d=r(73788),u=r(18222),p=r(25555),m=r(69281),h=r(1582),g=r(89549);var y=Object.defineProperty,v=Object.defineProperties,f=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const I=(0,s.$j)((function(){return(0,a.P1)(l.Z,(0,o.Z)(),((e,t)=>({machineIdentifier:t.machineIdentifier,isClaimed:t.isClaimed,isSignedIn:!!e&&e.signedIn,hasPlexSubscription:!!e&&e.hasPlexSubscription})))}))((function(e){const{className:t,machineIdentifier:r,origin:n,modalMetricsProperties:i,isSignedIn:s,isClaimed:a,hasPlexSubscription:o}=e;return o&&a?null:!o&&s?c.createElement(g.Z,{modalMetricsProperties:i,origin:n}):c.createElement(u.Z,{className:t,kind:p._8,size:m.ln,to:(0,h.Z)(r,"settings","general")},s?(0,d.Z)("Claim Server"):(0,d.Z)("Sign In"))}));I.propTypes=v(((e,t)=>{for(var r in t||(t={}))Z.call(t,r)&&P(e,r,t[r]);if(b)for(var r of b(t))S.call(t,r)&&P(e,r,t[r]);return e})({},I.propTypes),f({serverEntityID:i().string.isRequired}));const E=I},17330:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(73788),s=r(23414),a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){return n.createElement(s.Z,(t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({},e),r={loadingLabel:(0,i.Z)("Loading")},o(t,l(r))));var t,r}m.propTypes=s.Z.propTypes,m.defaultProps=s.Z.defaultProps;const h=m},62003:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(94184),i=r.n(n),s=r(67294),a=r(73788),o=r(18222);var l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class g extends s.Component{constructor(e,t){super(e,t),this.onChange=e=>{if(e.target.files&&e.target.files.length){const t=e.target.files[0];this.setState({filename:t.name})}this.props.onChange(e)},this.state={filename:null}}render(){const e=this.props,{inputComponent:t,className:r,inputClassName:n,buttonText:o,isDisabled:l,showFilename:g}=e,y=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(e,["inputComponent","className","inputClassName","buttonText","isDisabled","showFilename"]),{filename:v}=this.state;return s.createElement("span",null,s.createElement(t,{className:r,component:"label"},o,s.createElement("input",(f=((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},y),b={className:n,type:"file",onChange:this.onChange},c(f,d(b))))),g?s.createElement("span",{className:i()("FileInput-filename-wHSDM2",!v&&"FileInput-noFilename-xyAdqS")},v||(0,a.Z)("No file selected")):null);var f,b}}g.defaultProps={inputComponent:o.Z,inputClassName:"FileInput-fileInput-Te_RYc",showFilename:!1};const y=g},36380:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(73788),s=r(26397);const a=function({errorMessage:e}){return n.createElement("div",{className:"FormSectionError-sectionError-CylZ_l"},n.createElement(s.Z,{className:"FormSectionError-sectionErrorIcon-YHEYK7"}),e||(0,i.Z)("There was a problem saving your changes."))}},44655:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(67294),i=r(60567),s=r(55097),a=r(85482),o=r(2768),l=r(95162),c=r(58851),d=r(16013),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class f extends n.Component{constructor(){super(...arguments),this.onChange=e=>{const t=e?parseInt(e,10):null;this.props.onChange(t)}}render(){return n.createElement(d.Z,(e=((e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(h)for(var r of h(t))y.call(t,r)&&v(e,r,t[r]);return e})({type:"number"},this.props),t={selectTextOnFocus:!1,onChange:this.onChange},p(e,m(t))));var e,t}}const b=f;var Z=Object.defineProperty,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function w(e){var t=e,{formGroupClassName:r,formLabelClassName:i,inputClassName:s,name:c,labelText:d,helpText:u,showErrors:p,errors:m}=t,h=((e,t)=>{var r={};for(var n in e)P.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&S)for(var n of S(e))t.indexOf(n)<0&&I.call(e,n)&&(r[n]=e[n]);return r})(t,["formGroupClassName","formLabelClassName","inputClassName","name","labelText","helpText","showErrors","errors"]);return n.createElement(a.Z,{className:r},n.createElement(l.Z,{className:i,errors:m,labelText:d,name:c,showErrors:p}),n.createElement(b,((e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e})({className:s,hasError:p,name:c,type:"number"},h)),u?n.createElement(o.Z,null,u):null)}w.defaultProps={inputClassName:"NumberInputGroup-input-hwqOwp TextInput-input-NqTdW3 input-input-XAtklw"};const C=(0,c.Z)(w);var M=r(7971),D=r(89850),O=r(35767),T=r(32667),x=Object.defineProperty,A=Object.defineProperties,k=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V=(e,t)=>{for(var r in t||(t={}))R.call(t,r)&&j(e,r,t[r]);if(N)for(var r of N(t))L.call(t,r)&&j(e,r,t[r]);return e};function U(e=[]){return e.map((({label:e,value:t})=>({[t]:e})))}const F={playbackSpeed:T.H};function B(e){const{id:t,type:r,label:a,summary:o,value:l,initialValueModifier:c,enumValues:d,min:u,max:p,step:m}=e,h={name:t,helpText:o,initialValue:c(l)};if(Array.isArray(d))return n.createElement(M.Z,(g=V({labelText:a},h),y={values:U(d)},A(g,k(y))));var g,y;switch(r){case i.E.TEXT:return n.createElement(D.Z,V({labelText:a},h));case i.E.BOOL:return n.createElement(s.Z,V({checkboxText:a},h));case i.E.INT:return n.createElement(C,V({labelText:a},h));case i.E.DOUBLE:return n.createElement(O.Z,V({labelText:a,max:p,min:u,stepSize:m,valueModifier:F[t]},h));default:return null}}B.defaultProps={initialValueModifier:e=>e};const _=B},35767:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),i=r(85482),s=r(95162),a=r(58851),o=r(90425);class l extends n.Component{constructor(){super(...arguments),this.onChange=({steppedValue:e})=>{const t=String(this.props.stepSize),[,r]=t.split("."),n=null!=r?parseFloat(e.toFixed(r.length)):e;this.props.onChange(n)}}render(){const{name:e,value:t,min:r,max:a,stepSize:l,labelText:c,showErrors:d,errors:u,valueModifier:p}=this.props;return n.createElement(i.Z,null,n.createElement(s.Z,{errors:u,labelText:c,name:e,showErrors:d}),n.createElement("div",{className:"SliderInputGroup-sliderContainer-PpzL0B input-input-XAtklw"},n.createElement(o.Z,{className:"SliderInputGroup-slider-FqtHLy Slider-slider-YdLxcK",max:a,min:r,stepSize:l,value:t,onChange:this.onChange}),n.createElement("div",{className:"SliderInputGroup-sliderValue-kkZg6y"},p(t))))}}l.defaultProps={valueModifier:e=>e};const c=(0,a.Z)(l)},52867:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(94184),i=r.n(n),s=r(67294),a=r(98116),o=r(51017),l=r(45697),c=r.n(l),d=r(90558);function u(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-toolbar-sync-arrow-560"};i["aria-hidden"]=!t,i.style=n,i.className=d.Z.plexIcon+(r?" "+r:"");const a=[s.createElement.apply(s,["path",{d:"M280 406l112-112h-89.6V154h-44.8v140H168l112 112"}].concat([]))];return t&&a.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(a))}u.propTypes={"aria-label":c().string,className:c().string,style:c().object};const p=u,m={downloadIcon:"DownloadIcon-downloadIcon-x4iupc PlexIcon-plexIcon-a5zCNX",hasShadow:"DownloadIcon-hasShadow-_tMbSt",arrowIcon:"DownloadIcon-arrowIcon-ptQTzb",progressBarContainer:"DownloadIcon-progressBarContainer-lPxc2W CircularProgressBar-absoluteCenterCircularProgressBarContainer-Fv3RhV",hasProgress:"DownloadIcon-hasProgress-LDuyU3",showIndeterminate:"DownloadIcon-showIndeterminate-QjImI7"};function h(e){const{className:t,isDisabled:r,showIndeterminate:n,lineWidth:l,progress:c,arrowSize:d,shadowWidth:u,showShadow:h,size:g}=e,y=null!=c&&c>=0,v=`${d}px`,f=n?o.Z.primaryColor:o.Z.selectedColor;let b;b=r?o.Z.defaultLinkDisabledLinkColor:y||n?o.Z.dimColor:"currentColor";const Z={fontSize:v};if(h){const e=g+2*u;Z.width=`${e}px`,Z.height=`${e}px`,Z.borderRadius=e/2+"px"}else Z.width=`${g+l}px`,Z.height=`${g+l}px`;const S=y?void 0:0;return s.createElement("div",{className:i()(t,y&&m.isDownloading,n&&m.showIndeterminate,h&&m.hasShadow),style:Z},s.createElement(p,{className:m.arrowIcon}),s.createElement(a.Z,{containerClassName:m.progressBarContainer,lineWidth:l,progress:y?c:0,showIndeterminate:n,showProgressText:!1,size:g,smoothProgressDuration:S,strokeColor:f,trackColor:b}))}h.defaultProps={className:m.downloadIcon,size:18,arrowSize:19,lineWidth:1.3,showShadow:!1,shadowWidth:1};const g=h},59917:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(28216),s=r(22222),a=r(12559),o=r(57634),l=r(52867),c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const h=(0,i.$j)((function(){return(0,s.P1)((0,s.P1)(((e,{source:t})=>t),((e,{ratingKey:t})=>t),(0,o.Z)(a.sC),((e,t,r)=>{for(const n of r){const{Context:r}=n;if(r.itemRatingKey===t&&r.source===e&&n.progress>0)return n.progress}})),(e=>({progress:e})))}))((function(e){if(!e.hasOfflineFile&&!e.hasOwnSubscription&&void 0===e.progress)return null;const t=e,{hasOfflineFile:r,hasOwnSubscription:i,ratingKey:s,source:a}=t,o=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["hasOfflineFile","hasOwnSubscription","ratingKey","source"]);return n.createElement(l.Z,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({},o))}))},67699:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(67294),i=r(9358),s=r(62208);function a(e,t){return Math.random()*(t-e)+e}class o extends n.Component{constructor(e,t){super(e,t),this._setBarValues(e),this.state=this._getInitialState(!0)}componentDidMount(){if(!this.props.isPaused)for(let e=0,t=this._bars.length;e<t;e++)this._setTransitionTimeout(e)}UNSAFE_componentWillReceiveProps(e){const t=e.isPaused!==this.props.isPaused,r=e.width!==this.props.width,n=e.barCount!==this.props.barCount,i=e.barGap!==this.props.barGap;(t||r||n||i)&&(this._clearAllTransitionTimeouts(),this._setBarValues(e),this.setState(this._getInitialState(e.isPaused)))}componentDidUpdate(e,t){if(!this.props.isPaused)for(let e=0,r=this._bars.length;e<r;e++){const r=this._bars[e];t[r]!==this.state[r]&&this._setTransitionTimeout(e)}}componentWillUnmount(){this._clearAllTransitionTimeouts()}_setBarValues({width:e,barCount:t,barGap:r}){const n=r*(t-1);this._barGap=r,this._barWidth=Math.floor((e-n)/t),this._bars=[];for(let e=0,r=t;e<r;e++)this._bars.push("bar"+e)}_getInitialState(e){return this._bars.reduce(((t,r,n)=>(t[r]=this._getRandomStyle(n,e),t)),{})}_getRandomStyle(e,t){const{unit:r}=this.props,n=e*(this._barWidth+this._barGap),i=`scaleY(${t?.2:a(.2,1)})`,s=a(300,500);return{left:`${n}${r}`,width:`${this._barWidth}${r}`,backgroundColor:this.props.barColor,transitionDuration:`${s}ms`,WebkitTransform:i,msTransform:i,transform:i}}_setTransitionTimeout(e){const t=this._bars[e],r=t+"TimeoutID",n=this.state[t],i=(0,s.Z)(n.transitionDuration)-100;this[r]=window.setTimeout((()=>{this.setState({[t]:this._getRandomStyle(e)})}),i)}_clearAllTransitionTimeouts(){for(let e=0,t=this._bars.length;e<t;e++){const t=this._bars[e]+"TimeoutID";window.clearTimeout(this[t])}}render(){const{className:e,width:t,height:r,unit:i}=this.props;return n.createElement("div",{className:e,style:{width:`${t}${i}`,height:`${r}${i}`}},this._bars.map((e=>n.createElement("div",{key:e,className:"EqualizerIcon-bar-dkJpMG",style:this.state[e]}))))}}o.defaultProps={className:"EqualizerIcon-equalizer-pR4fbU",width:14,height:14,barColor:"#fff",barCount:3,barGap:2,isPaused:!0,unit:"px"};const l=o;var c=r(51017),d=r(45697),u=r.n(d),p=r(90558);function m(e){const t=e["aria-label"],r=e.className,i=e.style,s={viewBox:"0 0 420 343",xmlns:"http://www.w3.org/2000/svg",id:"plex-icon-static-eq-paused"};s["aria-hidden"]=!t,s.style=i,s.className=p.Z.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{d:"M 0 227.741 L 0 115.741 L 56 115.741 L 168 3.741 L 168 339.741 L 56 227.741 L 0 227.741 Z"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}m.propTypes={"aria-label":u().string,className:u().string,style:u().object};const h=m;function g(e){const t=e["aria-label"],r=e.className,i=e.style,s={viewBox:"0 0 420 343",xmlns:"http://www.w3.org/2000/svg",id:"plex-icon-static-eq-playing"};s["aria-hidden"]=!t,s.style=i,s.className=p.Z.plexIcon+(r?" "+r:"");const a=[n.createElement.apply(n,["path",{d:"M 339.752 -0.011 C 388.818 41.059 420 102.759 420 171.741 C 420 240.723 388.818 302.423 339.752 343.493 L 309.905 313.646 C 351.436 280.319 378 229.132 378 171.741 C 378 114.35 351.436 63.163 309.905 29.836 L 339.752 -0.011 Z M 0 227.741 L 0 115.741 L 56 115.741 L 168 3.741 L 168 339.741 L 56 227.741 L 0 227.741 Z M 259.936 79.805 C 288.989 100.009 308 133.655 308 171.741 C 308 209.827 288.989 243.473 259.936 263.677 L 229.484 233.225 C 251.246 221.346 266 198.266 266 171.741 C 266 145.216 251.246 122.136 229.484 110.257 L 259.936 79.805 Z"}].concat([]))];return t&&a.unshift(n.createElement("title",null,t)),n.createElement.apply(n,["svg",s].concat(a))}g.propTypes={"aria-label":u().string,className:u().string,style:u().object};const y=g;function v(e){const{barColor:t,className:r,height:i,isPaused:s,unit:a,width:o}=e,l=(0,n.useMemo)((()=>({color:t,height:`${i}${a}`,width:`${o}${a}`})),[t,i,a,o]),c=s?h:y;return n.createElement(c,{className:r,style:l})}v.defaultProps={barColor:l.defaultProps.barColor,className:l.defaultProps.className,height:l.defaultProps.height,isPaused:l.defaultProps.isPaused,unit:l.defaultProps.unit,width:l.defaultProps.width};const f=v;var b=Object.defineProperty,Z=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const C=function(e){const t=(0,i.Z)()?f:l;return n.createElement(t,(r=((e,t)=>{for(var r in t||(t={}))I.call(t,r)&&w(e,r,t[r]);if(P)for(var r of P(t))E.call(t,r)&&w(e,r,t[r]);return e})({},e),s={barColor:c.Z.equalizerBarColor},Z(r,S(s))));var r,s}},87236:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);const i=function(e){return n.createElement("svg",{className:e.className,viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M216 170l190.5 110L216 390z"}))}},3149:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i(e){const{circleClassName:t,iconClassName:r}=e;return n.createElement("div",{className:t},n.createElement("span",{className:r}))}i.defaultProps={circleClassName:"RecordIcon-recordCircle-nPg1p4 PlayButton-playCircle-fK1f_v",iconClassName:"RecordIcon-recordIcon-OWFVfW"};const s=i},77483:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(67294),i=r(81143),s=r(56315),a=r(50141),o=r(6400),l=r(32714),c=r(6909),d=r(30311),u=r(8946),p=r(67900),m=r(30277),h=r(66337),g=r(24577),y=r(74226),v=r(88604);const f=function(e){if(y.wB(e.providerIdentifier,y.xF))return n.createElement(i.B,null);switch(e.sourceType){case v.s6:return n.createElement(s.Z,null);case v.ls:return n.createElement(a.U,null);case v.MB:return n.createElement(o.l,null);case v.TV:return n.createElement(l.W,null);case v.xF:return n.createElement(c.H,null);case v.n1:return n.createElement(d.L,null);case v.FM:return n.createElement(u.O,null);case v.Ap:return n.createElement(p._,null);case v.Hs:return n.createElement(m.U,null);case v.Xp:return n.createElement(h.b,null);case v.lz:return n.createElement(g.v,null)}return null}},49081:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(51387),s=r(59900),a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function m(e){const t=e,{className:r,url:a,width:m}=t,h=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r})(t,["className","url","width"]);return n.createElement("div",{className:r},n.createElement(s.Z,(g=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({},h),y={url:a&&(0,i.Z)(a,m),width:m},o(g,l(y)))));var g,y}m.defaultProps={className:"AvatarImg-avatar-dvpNLl"};const h=m},88638:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e){const t=e,{className:r,children:i,component:c,width:d,height:u,url:p}=t,m=((e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&o.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children","component","width","height","url"]);return n.createElement("div",{className:r,style:{width:d,height:u}},n.createElement(c,((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e})({height:u,url:p,width:d},m)),i)}c.defaultProps={className:"PosterCard-card-B3tGLl"};const d=c},15080:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(95283),s=r(59900),a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const m={position:"relative",top:0,left:0,display:"block",width:"100%",height:"100%"},h=function(e){return n.createElement(s.Z,(t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({},e),r={component:i.Z,containerStyle:m},o(t,l(r))));var t,r}},59900:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(28216),i=r(22222),s=r(8238),a=r(60094),o=r(73701),l=r(62934),c=r(67364);const d=s.Z.allowSyncDownload?{urlParams:{"X-Plex-Account-ID":1}}:null,u=(0,n.$j)((function(){return(0,i.P1)(l.Z,o.Z,(0,a.Z)(d),((e,t,r)=>({url:r,supportsSize:!!(e&&e.isCloud&&t)})))}))(c.ZP)},84332:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(67294),i=r(73788),s=r(94184),a=r.n(s),o=r(98476);const l="SelectedMenuItem-menuItemContainer-PNDPtO";var c=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class y extends n.Component{constructor(){super(...arguments),this.onPress=e=>{const{value:t,onSelect:r,onPress:n}=this.props;r&&r(t),n&&n(e)}}render(){const e=this.props,{children:t,className:r,menuLabelClassName:i,iconComponent:s,isSelected:c,selectedIconAriaLabel:y}=e,v=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(e,["children","className","menuLabelClassName","iconComponent","isSelected","selectedIconAriaLabel"]);return n.createElement(o.Z,(f=((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e})({className:a()(r,c&&"SelectedMenuItem-isSelected-eBXyQi")},v),b={onPress:this.onPress},d(f,u(b))),n.createElement("div",{className:l},n.createElement("div",{className:i},t),c?n.createElement("div",{className:"SelectedMenuItem-selectedIcon-FVHL6f"},n.createElement(s,{"aria-label":y})):null));var f,b}}y.defaultProps={className:l,menuLabelClassName:"SelectedMenuItem-menuLabel-nQZtur"};const v=y;var f=r(14522),b=Object.defineProperty,Z=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function C(e){return n.createElement(v,(t=((e,t)=>{for(var r in t||(t={}))I.call(t,r)&&w(e,r,t[r]);if(P)for(var r of P(t))E.call(t,r)&&w(e,r,t[r]);return e})({},e),r={selectedIconAriaLabel:(0,i.Z)("Selected")},Z(t,S(r))));var t,r}C.defaultProps={iconComponent:f.Z};const M=C},56887:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(67294),i=r(45191),s=r(75404),a=r(73788),o=r(18222),l=r(24642),c=r(63135),d=r(74249),u=r(45181),p=r(17516),m=r(25555),h=r(69281),g=r(17330),y=r(55949),v=r(88140);var f=Object.defineProperty,b=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))I.call(t,r)&&E(e,r,t[r]);return e},C=(e,t)=>b(e,Z(t));const M=function(e){const{onCancel:t}=e,[r,f]=(0,n.useState)(!1),b=(0,n.useCallback)((()=>{(0,i.DB)("metrics").trackClick(C(w({},e.metricsProperties),{page:e.metricsPage,action:s.n1})),t()}),[t,e.metricsPage,JSON.stringify(e.metricsProperties)]),Z=(0,n.useCallback)((e=>{f(e.target.checked)}),[]),{containerClassName:S,isCancelButtonDisabled:P,isConfirmButtonSpinning:I=!1,isOpen:E,metricsPage:M,metricsProperties:D,kind:O=m._8,title:T,message:x,accordMessage:A,confirmLabel:k,cancelLabel:N,hideCancelButton:R,infoMessage:L,onConfirm:j}=e,V=!!A,U=I||V&&!r;return n.createElement(y.Z,{containerClassName:S,isOpen:E,metricsPage:M,metricsProperties:D,size:h.HC,onModalClose:b},n.createElement(v.Z,{onModalClose:b},n.createElement(p.Z,null,T),n.createElement(c.Z,{className:"ConfirmModal-confirmBody-FWA1iu ModalBody-modalScroller-QY24jf ModalBody-modalBody-Me4Hwy"},n.createElement("p",null,x),L?n.createElement("p",null,L):null,V?n.createElement("label",{className:"ConfirmModal-accordLabel-Cenbw8"},n.createElement("input",{checked:r,className:"ConfirmModal-accordInput-AsEWLl",type:"checkbox",onChange:Z}),A):null),n.createElement(d.Z,null,n.createElement(u.Z,null,R?null:n.createElement(o.Z,{className:"ConfirmModal-cancelButton-eGsl9K",isDisabled:P,kind:m.TP,onPress:b},N||(0,a.Z)("Cancel")),n.createElement(l.Z,C(w({},D),{action:s.ae}),n.createElement(g.Z,{className:"ConfirmModal-confirmButton-qn3b_O","data-autofocus":!0,isDisabled:U,isSpinning:I,kind:O,onPress:j},k||(0,a.Z)("OK")))))))}},21500:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(67294),i=r(45191),s=r(75404),a=r(63135),o=r(17516),l=r(75944),c=r(69281),d=r(55949),u=r(88140);var p=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&f(e,r,t[r]);if(g)for(var r of g(t))v.call(t,r)&&f(e,r,t[r]);return e},Z=(e,t)=>m(e,h(t));class S extends n.Component{constructor(){super(...arguments),this.onItemSelect=e=>{(0,i.DB)("metrics").trackClick(Z(b({},this.props.metricsProperties),{page:this.props.metricsPage,action:s.XD,value:e})),this.props.onItemSelect(e)},this.onCancel=()=>{(0,i.DB)("metrics").trackClick(Z(b({},this.props.metricsProperties),{page:this.props.metricsPage,action:s.n1})),this.props.onCancel()}}render(){const{children:e,isOpen:t,metricsPage:r,metricsProperties:i,title:s}=this.props;return n.createElement(d.Z,{isOpen:t,metricsPage:r,metricsProperties:i,size:c.HC,onModalClose:this.onCancel},n.createElement(u.Z,{onModalClose:this.onCancel},n.createElement(o.Z,null,s),n.createElement(a.Z,{innerClassName:"ListModal-listModalInnerBody-NBgUtR"},(0,l.Z)(e,(e=>n.cloneElement(e,{onSelect:this.onItemSelect}))))))}}const P=S},50984:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(85448),s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class p extends n.Component{constructor(){super(...arguments),this.onPress=e=>{const{value:t,onSelect:r,onPress:n}=this.props;r&&r(t),n&&n(e)}}render(){const e=this.props,{value:t,onSelect:r}=e,s=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(e,["value","onSelect"]);return n.createElement(i.Z,(p=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({},s),m={onPress:this.onPress},a(p,o(m))));var p,m}}p.defaultProps={className:"ListModalItem-listModalItem-yDiCT4"};const m=p},55949:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var n=r(67294),i=r(15598),s=r(47354),a=r(73935),o=r(45062),l=r(27598),c=r(62474),d=r(8724),u=r(69281),p=r(20533),m=r(87036),h=r(73190);const g={modalContainer:"Modal-modalContainer-iz5oBP",modalBackdrop:"Modal-modalBackdrop-nE6cJg",modal:"Modal-modal-eUJhK0",small:"Modal-small-T6VQQE Modal-modal-eUJhK0",medium:"Modal-medium-WiZeBe Modal-modal-eUJhK0",large:"Modal-large-wPyAA_ Modal-modal-eUJhK0"},y=(0,c.Z)(m.Z.modalSpeed),v=1e3*y,f={ease:"easeOut",duration:y},b={ease:h.Z.motionEasing,duration:y},Z={opacity:f},S={enter:{opacity:1,transition:Z},exit:{opacity:0,transition:Z}},P={scale:b,opacity:f},I={enter:{opacity:1,scale:1,transition:P},exit:{opacity:0,scale:.95,transition:P}};class E extends n.Component{constructor(){super(...arguments),this.onBackdropBeginPress=e=>{this._isBackdropPressed=this._isBackdropTarget(e)},this.onBackdropEndPress=e=>{!this.props.preventCloseOnBackdropPress&&this._isBackdropPressed&&this._isBackdropTarget(e)&&this.props.onModalClose(),this._isBackdropPressed=!1},this.onTouchMove=e=>{this._isBackdropPressed=!1},this.onTouchCancel=e=>{this._isBackdropPressed=!1},this.onKeyDown=e=>{const t=e.keyCode;t===o.Mf?d.QE(e):t===o.hY&&(e.preventDefault(),e.stopPropagation(),this.props.onModalClose(),d.sM())}}componentDidMount(){this.props.isOpen&&this._openModal()}shouldComponentUpdate(e,t){return(0,p.Z)(this,e,t)}componentDidUpdate(e){!e.isOpen&&this.props.isOpen?this._openModal():e.isOpen&&!this.props.isOpen&&this._closeModal()}componentWillUnmount(){this.props.isOpen&&this._closeModal()}_openModal(){d.LJ(a.findDOMNode(this.refs.modal)),this._autoFocusTimeoutID=window.setTimeout(d.pc,v),document.addEventListener("keydown",this.onKeyDown)}_closeModal(){window.clearTimeout(this._autoFocusTimeoutID),document.removeEventListener("keydown",this.onKeyDown)}_isBackdropTarget(e){const t=this._findEventTarget(e);if(t){const e=a.findDOMNode(this.refs.modal);return!e||!e.contains(t)}return!1}_findEventTarget(e){const t=e.changedTouches;if(!t)return e.target;if(1===t.length){const e=t[0];return document.elementFromPoint(e.clientX,e.clientY)}}render(){const{className:e,backdropClassName:t,containerClassName:r,children:i,size:a,isOpen:o}=this.props;return n.createElement(l.Z,{className:r,closeTimeoutMilliseconds:v,isOpen:o},n.createElement(s.M_,null,o?n.createElement(s.ww.div,{key:"backdrop",animate:"enter",className:t,exit:"exit",initial:"exit",variants:S,onMouseDown:this.onBackdropBeginPress,onMouseUp:this.onBackdropEndPress,onTouchCancel:this.onTouchCancel,onTouchEnd:this.onBackdropEndPress,onTouchMove:this.onTouchMove,onTouchStart:this.onBackdropBeginPress},n.createElement(s.ww.div,{key:"modal",ref:"modal",animate:"enter",className:e||g[a],exit:"exit",initial:"exit",variants:I},i)):null))}}E.defaultProps={backdropClassName:g.modalBackdrop,containerClassName:g.modalContainer,size:u.M2,preventCloseOnBackdropPress:!1};const w=E;var C=Object.defineProperty,M=Object.defineProperties,D=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))T.call(t,r)&&A(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&A(e,r,t[r]);return e},N=(e,t)=>M(e,D(t));const R=function(e){const t=e,{children:r,metricsPage:s,metricsProperties:a}=t,o=((e,t)=>{var r={};for(var n in e)T.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&O)for(var n of O(e))t.indexOf(n)<0&&x.call(e,n)&&(r[n]=e[n]);return r})(t,["children","metricsPage","metricsProperties"]);return n.createElement(w,N(k({},o),{isOpen:!!e.isOpen}),n.createElement(i.Z,N(k({},a),{page:s}),r))}},88140:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(67294),i=r(85448);var s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){const t=e,{className:r,children:s,iconComponent:d,onModalClose:u}=t,p=((e,t)=>{var r={};for(var n in e)o.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children","iconComponent","onModalClose"]);return n.createElement("div",((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({className:r},p),n.createElement(i.Z,{className:"ModalContent-closeButton-mzU7N0 Link-link-SxPFpG",onPress:u},d?n.createElement(d,null):null),s)}d.defaultProps={className:"ModalContent-modalContent-_BsQSK"};const u=d;var p=r(51861),m=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Z=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&b(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&b(e,r,t[r]);return e};function S(e){return n.createElement(u,Z({},e))}S.defaultProps=h(Z({},S.defaultProps),g({iconComponent:p.Z}));const P=S},33556:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(63135),s=r(88140);var a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){var t=e,{children:r}=t,a=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement(s.Z,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({},a),n.createElement(i.Z,{className:"ModalContentCenter-modalScroller-pV7IMu ModalBody-modalScroller-QY24jf ModalBody-modalBody-Me4Hwy",innerClassName:"ModalContentCenter-innerModalBody-RNzVtO ModalBody-innerModalBody-T6u3sU"},r))}},27901:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(94184),i=r.n(n),s=r(67294),a=r(25555),o=r(26397),l=r(33556);const c={icon:"ModalContentError-icon-vlGETk",default:"ModalContentError-default-OdbxfI",primary:"ModalContentError-primary-x2IkZv",success:"ModalContentError-success-gyh3Qy",danger:"ModalContentError-danger-amxjdX",message:"ModalContentError-message-ZJf83_"};var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function g(e){const t=e,{iconClassName:r,messageClassName:n,kind:a,message:d}=t,g=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["iconClassName","messageClassName","kind","message"]);return s.createElement(l.Z,((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({},g),s.createElement(o.Z,{className:i()(c[a],r)}),s.createElement("div",{className:n},d))}g.defaultProps={iconClassName:c.icon,messageClassName:c.message,kind:a.TP};const y=g},3307:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(62291),s=r(73788),a=r(79279),o=r(72702),l=r(56887),c=r(27254);const d=function(e){const{isOpen:t,state:r,onConfirm:d,onClose:u}=e,p=t&&r===o.R3.CANCEL,m=t&&r===o.R3.REMOVE,h=t&&r===o.R3.UPSELL;return n.createElement(n.Fragment,null,n.createElement(l.Z,{cancelLabel:(0,s.Z)("No"),confirmLabel:(0,s.Z)("Yes"),isOpen:p,message:(0,s.Z)("Are you sure you want to cancel this download?"),metricsPage:i.Pi,title:(0,s.Z)("Cancel Download"),onCancel:u,onConfirm:d}),n.createElement(l.Z,{isOpen:m,message:(0,s.Z)("Are you sure you want to delete this download?"),metricsPage:i.Ke,title:(0,s.Z)("Delete Download"),onCancel:u,onConfirm:d}),n.createElement(c.Z,{isOpen:h,origin:a.vz,onModalClose:u}))}},23574:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e){return n.createElement("div",((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e})({},e))}c.defaultProps={className:"PageHeader-pageHeader-e2k66t"};const d=c},65770:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({className:e}){return n.createElement("div",{className:e})}i.defaultProps={className:"PageHeaderDivider-pageHeaderDivider-aQZuvM"};const s=i},78891:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PageHeaderLeft-pageHeaderLeft-qWkHw0"};const s=i},70513:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PageHeaderRight-pageHeaderRight-hBWIio"};const s=i},57097:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(85448);const s=function(e){const{title:t,detail:r,route:s}=e,a=s?i.Z:"div";return n.createElement(a,{className:s?"PageHeaderTitle-containerWithRoute-LoJZwv PageHeaderTitle-container-BRFB38":"PageHeaderTitle-container-BRFB38",to:s},n.createElement("div",{className:"PageHeaderTitle-title-W0yjas"},t),r?n.createElement("div",{className:"PageHeaderTitle-detail-vMrapl"},r):null)}},39680:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(28216),i=r(22222),s=r(54562),a=r(73701),o=r(62934),l=r(15579),c=r(74226),d=r(70777),u=r(94450),p=r(67294),m=r(73788),h=r(18222),g=r(25555),y=r(1582),v=r(77378);function f(e){const{className:t,machineIdentifier:r,shouldRender:n,showButton:i}=e;return n?p.createElement("div",{className:t},p.createElement("div",{className:"ProgramGuideGracenoteMigrationBanner-messageContainer-MuKgar"},p.createElement(v.Z,{className:"ProgramGuideGracenoteMigrationBanner-icon-bE3jfm"}),p.createElement("div",{className:"ProgramGuideGracenoteMigrationBanner-message-AoUi6c"},(0,m.Z)("Guide data for this DVR will no longer be updated after January 1, 2021. Please delete and recreate a new DVR and reschedule your recordings to ensure continued coverage."))),i?p.createElement(h.Z,{className:"ProgramGuideGracenoteMigrationBanner-button-VRS8lm Button-button-TxWeuE Link-link-SxPFpG",kind:g.Py,to:(0,y.Z)(r,"manage","dvr")},(0,m.Z)("Get Started")):null):null}f.defaultProps={className:"ProgramGuideGracenoteMigrationBanner-container-NePMOu",showButton:!0};const b=f,Z=(0,n.$j)((function(){return(0,i.P1)(o.Z,a.Z,(0,l.Z)(d.lY),((e,t,r)=>{const n=c.wB(t.identifier,c.Ll),i=e.version&&(0,u.Z)(e.version,s.Z.gracenoteAttribution);return{machineIdentifier:e.machineIdentifier,shouldRender:n&&i&&r&&"Plex"===t.epgSource&&e.isFullOwnedServer}}))}))(b)},49744:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(45697),i=r.n(n),s=r(67294),a=r(28216),o=r(93888);const l={dispatchUpdateDownloadAvailability:o.Nm,dispatchUpdateDownloadSubscriptionIDs:o.Pi};function c(e){const{dispatchUpdateDownloadAvailability:t,dispatchUpdateDownloadSubscriptionIDs:r,metadataItemEntityID:n,providerEntityID:i}=e;return(0,s.useEffect)((()=>{const e={metadataItemEntityID:n,providerEntityID:i};t(e),r(e)}),[t,r,n,i]),null}c.propTypes={metadataItemEntityID:i().string.isRequired,providerEntityID:i().string.isRequired,dispatchUpdateDownloadAvailability:i().func.isRequired,dispatchUpdateDownloadSubscriptionIDs:i().func.isRequired};const d=(0,a.$j)(null,l)(c)},69760:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);class i extends n.Component{render(){const{children:e,className:t}=this.props;return n.createElement("div",{className:t},e)}}i.defaultProps={className:"HubCellHeader-hubCellHeader-QcXKFB"};const s=i},50194:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({children:e,className:t}){return n.createElement("div",{className:t,"data-testid":"hubTitle"},e)}i.defaultProps={className:"HubCellTitle-hubCellTitle-vtmWL9"};const s=i},90684:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(67294),i=r(28216),s=r(22222),a=r(80737),o=r(87442),l=r(27724),c=r(14308),d=r(235),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&v(e,r,t[r]);if(h)for(var r of h(t))y.call(t,r)&&v(e,r,t[r]);return e};const b={dispatchPopulateMetadataList:l.CF,dispatchPopulateMetadataListRange:l.vp,dispatchDeselectAllMetadataListItems:l.m8,dispatchResetMetadataList:l.wZ};class Z extends n.Component{constructor(){super(...arguments),this.onPageRequest=e=>{const{metadataListEntityID:t,disableReloadThreshold:r,dispatchPopulateMetadataListRange:n}=this.props;n(f({metadataListEntityID:t,disableReloadThreshold:r},e))}}UNSAFE_componentWillMount(){this._populate()}UNSAFE_componentWillReceiveProps(e){const{containerKey:t,metadataListEntityID:r}=e;t===this.props.containerKey&&r===this.props.metadataListEntityID||this._populate(e)}componentWillUnmount(){const{metadataListEntityID:e,shouldResetOnUnmount:t}=this.props;this.props.dispatchDeselectAllMetadataListItems({metadataListEntityID:e}),t&&this.props.dispatchResetMetadataList({metadataListEntityID:e})}_populate(e=this.props){const{entityKey:t,metadataListEntityID:r,initialSize:n,dispatchPopulateMetadataList:i,dispatchPopulateMetadataListRange:s}=e;n&&(0,o.c9)((()=>{t&&this.props.dispatchResetMetadataList({metadataListEntityID:r}),n===1/0?i({metadataListEntityID:r}):s({metadataListEntityID:r,startIndex:0,endIndex:n-1,pages:1})}))}render(){const e=this.props,{component:t,dispatchPopulateMetadataListRange:r,dispatchDeselectAllMetadataListItems:i,dispatchResetMetadataList:s}=e,a=((e,t)=>{var r={};for(var n in e)g.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&y.call(e,n)&&(r[n]=e[n]);return r})(e,["component","dispatchPopulateMetadataListRange","dispatchDeselectAllMetadataListItems","dispatchResetMetadataList"]);return n.createElement(t,(o=f({},a),l={onPageRequest:this.onPageRequest},p(o,m(l))));var o,l}}Z.defaultProps={disableReloadThreshold:!1,shouldResetOnUnmount:!1};const S=(0,i.$j)((function(){return(0,s.P1)((0,s.P1)(((e,{columnAdjustment:t})=>t),d.Z,((e,t)=>e||t.columnAdjustment)),(0,a.Z)(),c.Z,((e,t,r)=>({metadataItemEntityIDs:t.metadataItems,entityKey:t.entityKey,containerKey:t.containerKey||t.key,disableReloadThreshold:!!r.activeSelectionType,columnAdjustment:e,totalSize:t.totalSize,librarySectionID:t.librarySectionID,populatedRange:t.populatedRange,allowSync:t.allowSync,isPending:t.isPending,isPopulated:t.isPopulated,isMetaPopulated:t.isMetaPopulated,error:t.error,firstItemType:t.firstItemType,firstItemSubtype:t.firstItemSubtype,isFirstItemLibraryItem:t.isFirstItemLibraryItem,isDirectoryList:t.isDirectoryList,isChannelsList:t.isChannelsList})))}),b)(Z)},64520:(e,t,r)=>{"use strict";r.d(t,{Z:()=>N});var n=r(28216),i=r(22222),s=r(86555),a=r(20956),o=r(27724),l=r(46898),c=r(28590),d=r(59566),u=r(85209),p=r(59258),m=r(14308),h=r(5209),g=r(57635),y=r(67294),v=r(73788),f=r(47435),b=r(98463),Z=r(23226),S=r(56572),P=r(22499);var I=Object.defineProperty,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var D=Object.defineProperty,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))T.call(t,r)&&A(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&A(e,r,t[r]);return e};const N=(0,n.$j)((function(){return(0,i.P1)(((e,{listContext:t})=>t),((e,{cellWidth:t})=>t),((e,{displayFieldDefinitions:t})=>t),(0,s.Z)(),(0,i.P1)(((e,{listType:t})=>t),(0,s.Z)(),((e,t)=>{if(!t)return e;const r=e===p.pV&&t.type===u.CLIP,n=e===p.vu&&t.type===u.MOVIE;return r||n?e:t.extraType?p.V4:t.type})),(0,i.P1)(((e,{listSubtype:t})=>t),(0,s.Z)(),((e,t)=>t?t.subtype:e)),(0,d.Z)(),(0,c.Z)(),m.Z,(0,i.P1)(((e,{providerEntityID:t})=>t),l.Z,(0,s.Z)(),((e,t,r={})=>!!t[r.providerEntityID||e])),((e,t,r,n={},i,s,o,l,c,d)=>{var u;const p=(0,g.Z)(t,null,i,n,e);return{itemServerEntityID:n.serverEntityID,itemProviderEntityID:n.providerEntityID,isFeaturedHub:(0,a.Z)(e),metadataKey:n.key,displayFieldDefinitions:r,displayFields:(null==(u=n.Context)?void 0:u.displayFields)||(0,h.Z)(i,s,r),type:i,subtype:s,selectionType:o,activeSelectionType:c.activeSelectionType,isSelected:l,icon:n.icon,imageWidth:p.width,imageHeight:p.height,imageUrl:p.url,isFolder:n.isFolder,isUnavailable:!d}}))}),(function(e,t){const{metadataListEntityID:r}=t;return{onSelectItem(t){e((0,o.wr)(k({metadataListEntityID:r},t)))},onDeselectItem(t){e((0,o.g8)(k({metadataListEntityID:r},t)))}}}))((function(e){const t=e,{className:r,serverEntityID:n,providerEntityID:i,metadataItemEntityID:s,containerKey:a,cellIndex:o,cellX:l,cellY:c,cellWidth:d,cellHeight:u,isVirtual:p,isVisible:m,isScrolling:g,listType:I,listContext:D,titleComponents:O,isFeaturedHub:T,metadataKey:x,displayFields:A,displayFieldDefinitions:k,type:N,subtype:R,selectionType:L,activeSelectionType:j,isSelected:V,isUnavailable:U,imageWidth:F,imageHeight:B,imageUrl:_,onSelectItem:z,onDeselectItem:H}=t,W=((e,t)=>{var r={};for(var n in e)w.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&E)for(var n of E(e))t.indexOf(n)<0&&C.call(e,n)&&(r[n]=e[n]);return r})(t,["className","serverEntityID","providerEntityID","metadataItemEntityID","containerKey","cellIndex","cellX","cellY","cellWidth","cellHeight","isVirtual","isVisible","isScrolling","listType","listContext","titleComponents","isFeaturedHub","metadataKey","displayFields","displayFieldDefinitions","type","subtype","selectionType","activeSelectionType","isSelected","isUnavailable","imageWidth","imageHeight","imageUrl","onSelectItem","onDeselectItem"]),G=(0,f.Z)(e),Q=!x,$=Q||U||G.isPlaceholder,K=(0,P.d)(O,I,N,R,D,A||(0,h.Z)(N,R,k),k),q=T?K.slice(0,2):[],Y=T?K.slice(2):K;return y.createElement("div",{className:r,"data-testid":"cellItem",style:G.style},$?y.createElement(Z.Z,{imageHeight:B,imageWidth:F,isSelected:V}):y.createElement(b.Z,((e,t)=>{for(var r in t||(t={}))w.call(t,r)&&M(e,r,t[r]);if(E)for(var r of E(t))C.call(t,r)&&M(e,r,t[r]);return e})({activeSelectionType:j,containerKey:a,imageHeight:B,imageUrl:_,imageWidth:F,isSelected:V,listContext:D,listType:I,metadataItemEntityID:s,metadataKey:x,providerEntityID:i,selectionType:L,serverEntityID:n,type:N,onDeselectItem:H,onSelectItem:z},W)),y.createElement("div",{className:T?"MetadataPosterCell-continueWatchingTitleContainer-_I46DC":"MetadataPosterCell-titleContainer-OxfLNZ","data-testid":"metadataTitleContainer"},Q?(0,v.Z)("Loading..."):null,!Q&&q.length?y.createElement("div",{className:"MetadataPosterCell-splitTitleContainer-sldLdl"},q.map(((t,r)=>y.createElement(S.Z,{key:r,component:t,containerKey:a,isDoubleLine:t.isDoubleLine,isSecondary:r>0,isSplitLine:!0,metadataItemEntityID:s,metricsContext:e.metricsContext,providerEntityID:i,serverEntityID:n})))):null,Q?null:Y.map(((t,r)=>t?y.createElement(S.Z,{key:r,component:t,containerKey:a,isDoubleLine:t.isDoubleLine,isSecondary:q.length+r>0,metadataItemEntityID:s,metricsContext:e.metricsContext,providerEntityID:i,serverEntityID:n}):null))))}))},78108:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(22222),i=r(45191),s=r(13776),a=r(75404),o=r(36475),l=r(67294),c=r(73788),d=r(98476),u=r(14580),p=r(90684),m=r(3367),h=r(31889),g=r(28216),y=r(86555);const v=(0,n.P1)((0,y.Z)(),(({ratingKey:e,title:t})=>({ratingKey:e,title:t}))),f=(0,g.$j)(v)((function(e){const{ratingKey:t,title:r,onPress:n}=e,i=(0,l.useCallback)((()=>n(t)),[n,t]);return l.createElement(d.Z,{className:"MetadataMenuItem-item-nZX_q7",onPress:i},r)}));function b(e){const{metadataItemEntityIDs:t,showTopSeparator:r,header:n,onItemPress:i}=e;return t.length?l.createElement(l.Fragment,null,r&&t.length?l.createElement(h.Z,null):null,n?l.createElement(m.Z,null,n):null,t.map((e=>l.createElement(f,{key:e,metadataItemEntityID:e,onPress:i})))):null}b.defaultProps={showTopSeparator:!0};const Z=b,S=(0,n.P1)((e=>e.ui.addToPlaylistMenu.recentPlaylists),(e=>({recentPlaylists:e}))),P=(0,o.Z)(S,(function(e,t){const{serverEntityID:r,providerEntityID:n,metadataItemEntityID:o,metadataListEntityID:l}=t;return{onInitMenu(){e((0,s.u0)({serverEntityID:r,providerEntityID:n,metadataItemEntityID:o,metadataListEntityID:l}))},onClearMenu(){e((0,s.rg)())},onAddToExistingPlaylistPress(r){(0,i.DB)("metrics").trackClick({page:t.metricsPage,action:a.uf}),e((0,s.uM)({providerEntityID:n,playlistID:r}))}}}))((function(e){const{showAddToPlaylist:t,showAddToSmartPlaylist:r,recentPlaylists:n,customFilterRoute:i,onAddToPlaylistPress:s,onAddToSmartPlaylistPress:a,onAddToExistingPlaylistPress:o,onInitMenu:m,onClearMenu:h,onMenuClose:g}=e;(0,l.useEffect)((()=>(m(),h)),[h,m]);const y=!!i;return l.createElement(l.Fragment,null,t?l.createElement(d.Z,{onPress:s},(0,c.Z)("Add to Playlist...")):null,r?l.createElement(d.Z,{onPress:a},(0,c.Z)("Save as Smart Playlist...")):null,y?l.createElement(d.Z,{to:i},(0,c.Z)("Create Smart Playlist")):null,n?l.createElement(p.Z,{component:Z,header:(0,c.Z)("Add to..."),initialSize:3,metadataListEntityID:n,showTopSeparator:t||y,onItemPress:(0,u.Z)(o,g)}):null)}))},40759:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Fe});var n=r(28216),i=r(22222),s=r(34575),a=r(27649),o=r(86555),l=r(18622),c=r(54877),d=r(62934),u=r(57674),p=r(36475),m=r(32527),h=r(93888),g=r(31327),y=r(9984),v=r(44777),f=r(67294),b=r(13469),Z=r.n(b),S=r(75404),P=r(74226),I=r(70777),E=r(73788),w=r(10125),C=r(98476),M=r(31889),D=r(24642),O=r(14580),T=r(25555),x=r(15058),A=r(97380),k=r(72702),N=r(3307),R=r(46898),L=r(28663),j=r(85209),V=r(54501),U=r(2209);const F="AddToLibraryMenuItem-item-jgJsg0";var B=Object.defineProperty,_=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,W=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class G extends f.Component{constructor(){super(...arguments),this.createOnPress=e=>{const{metadataItemEntityID:t,onItemPress:r}=this.props;return()=>r(((e,t)=>{for(var r in t||(t={}))z.call(t,r)&&W(e,r,t[r]);if(_)for(var r of _(t))H.call(t,r)&&W(e,r,t[r]);return e})({metadataItemEntityID:t},e))}}render(){const{serverDirectories:e,hasMultipleServers:t,onMenuClose:r}=this.props;if(!e||!e.length)return null;if(1===e.length){const t=e[0].title,n=(0,E.Z)("Add to {libraryTitle}",{libraryTitle:t});return f.createElement(C.Z,{className:F,title:n,onPress:(0,O.Z)(this.createOnPress(e[0]),r)},n)}return f.createElement(U.Z,{label:(0,E.Z)("Add to Library"),onMenuClose:r},e.map(((e,n)=>{var i=e,{serverFriendlyName:s,title:a}=i,o=((e,t)=>{var r={};for(var n in e)z.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&_)for(var n of _(e))t.indexOf(n)<0&&H.call(e,n)&&(r[n]=e[n]);return r})(i,["serverFriendlyName","title"]);const l=a+(t?` (${s})`:"");return f.createElement(C.Z,{key:n,className:F,title:l,onPress:(0,O.Z)(this.createOnPress(o),r)},l)})))}}const Q=G,$=(0,i.P1)(R.Z,L.Z,((e,t)=>{let r=0;return{serverDirectories:t.reduce(((t,n)=>{if(n.isOutOfDate||!n.ownerFeatures.includes(I.Ao))return t;const i=(0,V.Z)(n.providers.map((t=>e[t])),[j.ARTIST]).map((([,e])=>e));i.length&&(r+=1);const s=i.map((e=>({serverEntityID:n.entityID,serverFriendlyName:n.friendlyName,title:e.title,sectionKey:e.key})));return t.push(...s),t}),[]),hasMultipleServers:r>1}})),K={onItemPress:s.Zo},q=(0,n.$j)($,K)(Q);var Y=r(80727),X=r(62291),J=r(58790),ee=r(45924),te=r(38264),re=r(84419),ne=r(21500),ie=r(50984),se=Object.defineProperty,ae=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,ce=(e,t,r)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const de=function(e){const t=e,{mediaItems:r}=t,n=((e,t)=>{var r={};for(var n in e)oe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ae)for(var n of ae(e))t.indexOf(n)<0&&le.call(e,n)&&(r[n]=e[n]);return r})(t,["mediaItems"]);return f.createElement(ne.Z,((e,t)=>{for(var r in t||(t={}))oe.call(t,r)&&ce(e,r,t[r]);if(ae)for(var r of ae(t))le.call(t,r)&&ce(e,r,t[r]);return e})({metricsPage:X.DV,title:(0,E.Z)("Play Version")},n),r.map(((e,t)=>{const r=[];if(e.bitrate&&r.push((0,te.Z)(e.bitrate)),e.videoResolution){const t=(0,J.Z)(e),n=t?t.scanType:null;r.push((0,ee.Z)(e.videoResolution,n))}const n=!!e.title,i=r.length>0;return f.createElement(ie.Z,{key:t,value:t},n?e.title:null,n&&i?f.createElement(re.Z,null):null,i?r.join(", "):null,n||i?null:(0,E.Z)("Unknown"))})))};var ue=r(12439),pe=r(53942),me=r(225),he=r(4027),ge=r(54237),ye=r(78108);const ve=function(e){const{metadataItemEntityID:t,providerEntityID:r,serverEntityID:n,showAddToPlaylist:i,onMenuClose:s,onPress:a}=e;return f.createElement(U.Z,{label:(0,E.Z)("Add to Playlist"),onMenuClose:s},f.createElement(ye.Z,{metadataItemEntityID:t,providerEntityID:r,serverEntityID:n,showAddToPlaylist:i,onAddToPlaylistPress:a,onMenuClose:s}))};r(27598);var fe=r(83782);const be=function(e){const{metadataItem:t,onMenuClose:r}=e,n=(0,fe.Z)(),i=t.downloadUrl?t.downloadUrl():null,s=i&&!0;return f.createElement(f.Fragment,null,f.createElement(C.Z,{download:s,target:i?n:void 0,to:i,onPress:t.downloadUrl?r:(0,O.Z)(e.onDownloadVersionPress,r)},(0,E.Z)("Download File")),null)};var Ze=Object.defineProperty,Se=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,Ee=(e,t,r)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const we=function(e){const t=e,{hasDownloadState:r,hasOfflineFile:n,hasOwnSubscription:i,label:s,progress:a}=t,o=((e,t)=>{var r={};for(var n in e)Pe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Se)for(var n of Se(e))t.indexOf(n)<0&&Ie.call(e,n)&&(r[n]=e[n]);return r})(t,["hasDownloadState","hasOfflineFile","hasOwnSubscription","label","progress"]);return f.createElement(C.Z,((e,t)=>{for(var r in t||(t={}))Pe.call(t,r)&&Ee(e,r,t[r]);if(Se)for(var r of Se(t))Ie.call(t,r)&&Ee(e,r,t[r]);return e})({},o),s)},Ce=["showPlay","showPlayVersion","showPlayAll","showShuffle","showQueue","showPlayPlexMix","showQueuePlexMix","showPlayTrailer","showPlayMusicVideo","showWatchTogether","showAddToPlaylist","showAddToLibrary"],Me=["showEdit","showMarkPlayed","showMarkUnplayed","showModifySmartPlaylist","showSettings","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showOptimize","showDownload","showShare","showDelete","showDeleteVersion","showViewPlayHistory","showGetInfo"];function De(e,t){return!!Z().find(e,(e=>t[e]))}function Oe(e){const{target:t,isOpen:r,metadataItem:i,metadataItemEntityID:s,metricsPage:a,providerEntityID:o,serverEntityID:l,onPlayVersionPress:c,onCancelDownloadActivity:d,onDeleteDownloadSubscription:u,onCreateDownloadSubscription:p,onMenuClose:m}=e,h=(0,he.Z)(e.onMarkPlayedConfirm),g=(0,he.Z)(e.onMarkUnplayedConfirm),y=(0,he.Z)(),v=(0,he.Z)(),b=(0,he.Z)(),Z=(0,he.Z)(),R=(0,he.Z)(),L=(0,k.Gb)({metadataItemEntityID:s,metricsPage:a,providerEntityID:o,serverEntityID:l,onCancelDownloadActivity:d,onCreateDownloadSubscription:p,onDeleteDownloadSubscription:u}),j=(0,n.v9)((0,x.Z)(I.je)),V=(0,f.useCallback)((e=>{c(e),y.onClose()}),[c,y]),U=!!i.metadataState,F=!!i.mediaState,B=De(Ce,e),_=De(Me,e),z=B&&_;return f.createElement(f.Fragment,null,f.createElement(w.Z,{isOpen:r,target:t,onMenuClose:m},e.showPlay?f.createElement(C.Z,{onPress:(0,O.Z)(e.onPlayPress,m)},(0,E.Z)("Play")):null,e.showPlayVersion?f.createElement(C.Z,{onPress:(0,O.Z)(y.onOpen,m)},(0,E.Z)("Play Version...")):null,e.showPlayAll?f.createElement(C.Z,{onPress:(0,O.Z)(e.onPlayAllPress,m)},(0,E.Z)("Play All")):null,e.showShuffle?f.createElement(C.Z,{onPress:(0,O.Z)(e.onShufflePress,m)},(0,E.Z)("Shuffle")):null,e.showPlayRadio?f.createElement(C.Z,{onPress:(0,O.Z)(e.onPlayRadioPress,m)},(0,E.Z)("Play Radio")):null,e.showPlayArtistTV?f.createElement(C.Z,{onPress:(0,O.Z)(e.onPlayArtistTVPress,m)},(0,E.Z)("Play Artist TV")):null,e.showWatchTogether?f.createElement(C.Z,{onPress:(0,O.Z)(v.onOpen,m)},(0,E.Z)("Watch Together...")):null,e.showQueue?f.createElement(C.Z,{onPress:(0,O.Z)(e.onPlayNextPress,m)},(0,E.Z)("Play Next")):null,e.showQueue?f.createElement(C.Z,{onPress:(0,O.Z)(e.onAddToQueuePress,m)},(0,E.Z)("Add to Queue")):null,e.showPlayPlexMix?f.createElement(C.Z,{onPress:(0,O.Z)(e.onPlayPlexMixPress,m)},(0,E.Z)("Play Plex Mix")):null,e.showQueuePlexMix?f.createElement(C.Z,{onPress:(0,O.Z)(e.onQueuePlexMixPress,m)},(0,E.Z)("Queue Plex Mix")):null,e.showPlayTrailer?f.createElement(C.Z,{onPress:(0,O.Z)(e.onPlayPrimaryExtraPress,m)},(0,E.Z)("Play Trailer")):null,e.showPlayMusicVideo?f.createElement(C.Z,{onPress:(0,O.Z)(e.onPlayPrimaryExtraPress,m)},(0,E.Z)("Play Music Video")):null,e.showAddToWatchlist?f.createElement(C.Z,{onPress:(0,O.Z)(e.onAddToWatchlistPress,m)},i.watchlistedAt?(0,E.Z)("Remove from Watchlist"):(0,E.Z)("Add to Watchlist")):null,e.showAddToPlaylist?f.createElement(D.Z,{action:S.uf},f.createElement(ve,{metadataItemEntityID:s,providerEntityID:o,serverEntityID:l,showAddToPlaylist:!0,onMenuClose:m,onPress:(0,O.Z)(Z.onOpen,m)})):null,e.showAddToSaved?f.createElement(C.Z,{onPress:(0,O.Z)(e.onAddToSavedPress,m)},(H=i.saved,W=e.providerIdentifier,P.wB(W,P.xF)?H?(0,E.Z)("Remove from My TIDAL"):(0,E.Z)("Add to My TIDAL"):H?(0,E.Z)("Remove from Favorites"):(0,E.Z)("Add to Favorites"))):null,e.showAddToPicks?f.createElement(C.Z,{onPress:(0,O.Z)(e.onAddToPicksPress,m)},i.picked?(0,E.Z)("Remove from Plex Picks"):(0,E.Z)("Add to Plex Picks")):null,e.showAddToLibrary?f.createElement(q,{metadataItemEntityID:s,providerEntityID:o,serverEntityID:l,onMenuClose:e.onMenuClose}):null,z?f.createElement(M.Z,null):null,e.showEdit?f.createElement(C.Z,{onPress:(0,O.Z)(e.onEditPress,m)},(0,E.Z)("Edit")):null,e.showModifySmartPlaylist?f.createElement(C.Z,{onPress:(0,O.Z)(e.onModifySmartPlaylistPress,m)},(0,E.Z)("Edit Filters")):null,e.showSettings?f.createElement(C.Z,{onPress:(0,O.Z)(b.onOpen,m)},(0,E.Z)("Settings")):null,e.showMarkPlayed?f.createElement(C.Z,{onPress:(0,O.Z)(h.onOpen,m)},(0,E.Z)("Mark as Played")):null,e.showMarkUnplayed?f.createElement(C.Z,{onPress:(0,O.Z)(g.onOpen,m)},(0,E.Z)("Mark as Unplayed")):null,e.showRefresh?f.createElement(C.Z,{isDisabled:U,onPress:(0,O.Z)(e.onRefreshPress,m)},(0,E.Z)("Refresh Metadata")):null,e.showAnalyze?f.createElement(C.Z,{isDisabled:F,onPress:(0,O.Z)(e.onAnalyzePress,m)},(0,E.Z)("Analyze")):null,e.showFixMatch?f.createElement(C.Z,{onPress:(0,O.Z)(e.onFixMatchPress,m)},(0,E.Z)("Fix Match...")):null,e.showMatch?f.createElement(C.Z,{onPress:(0,O.Z)(e.onFixMatchPress,m)},(0,E.Z)("Match...")):null,e.showUnmatch?f.createElement(C.Z,{onPress:(0,O.Z)(e.onUnmatchPress,m)},(0,E.Z)("Unmatch")):null,e.showSplitApart?f.createElement(C.Z,{onPress:(0,O.Z)(e.onSplitApartPress,m)},(0,E.Z)("Split Apart")):null,e.showSyncDownload?f.createElement(k.ZP,{component:we,metadataItemEntityID:s,providerEntityID:o,serverEntityID:l,onPress:(0,O.Z)(L.onPress,m)}):null,e.showOptimize?f.createElement(C.Z,{onPress:(0,O.Z)(e.onOptimizePress,m)},(0,E.Z)("Optimize...")):null,e.showDownload?f.createElement(D.Z,{action:S.a2},f.createElement(be,{metadataItem:i,onDownloadVersionPress:e.onDownloadVersionPress,onMenuClose:m})):null,e.showShare?f.createElement(D.Z,{action:S.Dp},f.createElement(C.Z,{onPress:(0,O.Z)(R.onOpen,m)},j?(0,E.Z)("Grant Library Access"):(0,E.Z)("Share"))):null,e.showDelete?f.createElement(C.Z,{kind:i.remoteMedia?void 0:T.T,onPress:(0,O.Z)(e.onDeletePress,m)},i.remoteMedia?(0,E.Z)("Remove"):(0,E.Z)("Delete")):null,e.showDeleteVersion?f.createElement(C.Z,{kind:T.T,onPress:(0,O.Z)(e.onDeleteVersionPress,m)},(0,E.Z)("Delete Version")):null,e.showViewPlayHistory?f.createElement(C.Z,{to:(0,ge.Z)(e.machineIdentifier,i)},(0,E.Z)("View Play History")):null,e.showGetInfo?f.createElement(C.Z,{onPress:(0,O.Z)(e.onGetInfoPress,m)},(0,E.Z)("Get Info")):null),e.showMarkPlayed||e.showMarkUnplayed?f.createElement(Y.Z,{isOpen:h.isOpen||g.isOpen,leafCount:h.isOpen?i.unviewedLeafCount:i.viewedLeafCount,markUnplayed:g.isOpen,subtype:i.subtype,title:i.title,type:i.type,onCancel:h.isOpen?h.onClose:g.onClose,onConfirm:h.isOpen?h.onConfirm:g.onConfirm}):null,e.showAddToPlaylist?f.createElement(pe.Z,{isOpen:Z.isOpen,metadataItemEntityID:s,providerEntityID:o,serverEntityID:l,onModalClose:Z.onClose}):null,e.showSyncDownload?f.createElement(N.Z,{isOpen:L.isOpen,state:L.state,onClose:L.onClose,onConfirm:L.onConfirm}):null,f.createElement(de,{isOpen:y.isOpen,mediaItems:i.Media,onCancel:y.onClose,onItemSelect:V}),f.createElement(ue.Z,{isOpen:b.isOpen,metadataItemEntityID:s,providerEntityID:o,serverEntityID:l,onModalClose:b.onClose}),e.showWatchTogether?f.createElement(me.Z,{isOpen:v.isOpen,metadataItemEntityID:s,metricsProperties:{context:e.metricsContext,page:a},serverEntityID:l,onModalClose:v.onClose}):null,e.showShare?f.createElement(A.Z,{isOpen:R.isOpen,metadataItemEntityID:s,metricsProperties:{context:e.metricsContext,page:a},serverEntityID:l,sharingReason:A.$.SharingItem,onModalClose:R.onClose}):null);var H,W}Oe.defaultProps={allowRedirectOnDelete:!1};const Te=Oe;var xe=Object.defineProperty,Ae=Object.defineProperties,ke=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,je=(e,t,r)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ve=(e,t)=>{for(var r in t||(t={}))Re.call(t,r)&&je(e,r,t[r]);if(Ne)for(var r of Ne(t))Le.call(t,r)&&je(e,r,t[r]);return e},Ue=(e,t)=>Ae(e,ke(t));const Fe=(0,n.$j)(c.Z)((0,p.Z)((function(){return(0,i.P1)(d.Z,l.Z,y.Z,(0,o.Z)(),(0,g.Z)(),((e,t,r,n,i)=>Ve({metadataItem:n,machineIdentifier:e.machineIdentifier,providerIdentifier:t.identifier,embeddedServerEntityID:r},i)))}),(function(e,t){const r={serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,itemServerEntityID:t.itemServerEntityID,itemProviderEntityID:t.itemProviderEntityID,metadataItemEntityID:t.metadataItemEntityID,metricsPage:t.metricsPage,metricsProperties:{context:t.metricsContext}};return{onPlayPress(){e(a.wA(Ue(Ve({},r),{options:{containerKey:t.containerKey,listType:t.listType}})))},onPlayVersionPress(n){e(a.wA(Ue(Ve({},r),{startMediaIndex:n,options:{containerKey:t.containerKey,listType:t.listType}})))},onPlayAllPress(){e(a.Ld(r))},onShufflePress(){e(a.Em(r))},onPlayNextPress(){e(a.tP(Ue(Ve({},r),{options:{playAll:!0,next:!0}})))},onAddToQueuePress(){e(a.tP(Ue(Ve({},r),{options:{playAll:!0,next:!1}})))},onPlayPlexMixPress(){e(a.Gh(r))},onQueuePlexMixPress(){e(a.kP(r))},onPlayPrimaryExtraPress(){e(a.EF(r))},onPlayRadioPress(){e(a.QR(Ve({playlistType:u.j0},r)))},onPlayArtistTVPress(){e(a.QR(Ve({playlistType:u.pX},r)))},onAddToPicksPress(){e((0,s.Fj)(r))},onAddToSavedPress(){e((0,s.C_)(r))},onAddToWatchlistPress(){e((0,s.ZA)(r))},onMarkPlayedConfirm(){e(h.x3(Ue(Ve({},r),{skipConfirm:!0})))},onMarkUnplayedConfirm(){e(h.s4(Ue(Ve({},r),{skipConfirm:!0})))},onEditPress(){e(h.Cf(r))},onRefreshPress(){e(h._8(r))},onModifySmartPlaylistPress(){e(h.hi(r))},onAnalyzePress(){e(h.rQ(r))},onFixMatchPress(){e(h.Tk(r))},onUnmatchPress(){e(h.qs(r))},onSplitApartPress(){e(h.ET(r))},onOptimizePress(){e(h.x(r))},onDownloadVersionPress(){e(h.p4(r))},onDeletePress(){e(h.Rw(Ue(Ve({},r),{options:{skipRedirect:!t.allowRedirectOnDelete}})))},onDeleteVersionPress(){e(h.W$(r))},onGetInfoPress(){e(h.Nv(r))},onCancelDownloadActivity(){e(m.FX(r))},onDeleteDownloadSubscription(){e(m.L7(r))},onCreateDownloadSubscription(){e(m.A$(r))}}}),v.Z)(Te))},27330:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(67294),i=r(73788),s=r(85448),a=r(28201),o=r(40759),l=r(36526),c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class h extends n.Component{constructor(e,t){super(e,t),this.onActionsPress=e=>{this.setState({hasBeenOpened:!0},(()=>{this.props.onMenuOpenChange(!this.props.isMenuOpen)}))},this.onActionsMenuClose=()=>{this.props.onMenuOpenChange(!1)},this._moreButtonID=(0,a.Z)(),this.state={hasBeenOpened:!1}}render(){const e=this.props,{"data-testid":t,className:r,iconClassName:a,tabIndex:c,serverEntityID:h,providerEntityID:g,metadataItemEntityID:y,containerKey:v,listType:f,isMenuOpen:b,onMenuOpenChange:Z}=e,S=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(e,["data-testid","className","iconClassName","tabIndex","serverEntityID","providerEntityID","metadataItemEntityID","containerKey","listType","isMenuOpen","onMenuOpenChange"]);return n.createElement(s.Z,{"aria-haspopup":!0,"aria-label":(0,i.Z)("More Actions"),className:r,"data-testid":t,id:this._moreButtonID,tabIndex:c,onPress:this.onActionsPress},n.createElement(l.Z,{className:a}),this.state.hasBeenOpened?n.createElement(o.Z,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({containerKey:v,isOpen:b,listType:f,metadataItemEntityID:y,providerEntityID:g,serverEntityID:h,target:this._moreButtonID,onMenuClose:this.onActionsMenuClose},S)):null)}}const g=h},80727:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(62291),s=r(73788),a=r(85209),o=r(56887);function l(e){return e!==a.SHOW&&e!==a.SEASON}function c({title:e,leafCount:t}){return 1===t?(0,s.Z)('Are you sure you want to mark 1 episode in "{showTitle}" as unplayed?',{showTitle:e}):(0,s.Z)('Are you sure you want to mark {numEpisodes} episodes in "{showTitle}" as unplayed?',{numEpisodes:t,showTitle:e})}function d({title:e,leafCount:t}){return 1===t?(0,s.Z)('Are you sure you want to mark 1 episode in "{showTitle}" as played?',{showTitle:e}):(0,s.Z)('Are you sure you want to mark {numEpisodes} episodes in "{showTitle}" as played?',{numEpisodes:t,showTitle:e})}class u extends n.Component{componentDidMount(){this._checkAutoConfirm()}componentDidUpdate(){this._checkAutoConfirm()}_checkAutoConfirm(){l(this.props.type)&&this.props.isOpen&&this.props.onConfirm()}render(){const{isOpen:e,type:t,markUnplayed:r,onConfirm:a,onCancel:u}=this.props;return l(t)?null:n.createElement(o.Z,{isOpen:e,message:r?c(this.props):d(this.props),metricsPage:r?i.Md:i.lP,title:r?(0,s.Z)("Mark as Unplayed"):(0,s.Z)("Mark as Played"),onCancel:u,onConfirm:a})}}const p=u},12439:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(67294),i=r(62291),s=r(69281),a=r(55949),o=r(28216),l=r(22222),c=r(86555),d=r(87442),u=r(93888),p=r(73788),m=r(18222),h=r(23414),g=r(70668),y=r(63135),v=r(74249),f=r(45181),b=r(17516),Z=r(25555),S=r(36380),P=r(44655),I=r(88140);var E=Object.defineProperty,w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,D=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const O=function(e){const{isSettingsUpdating:t,hasError:r,settings:i,onSubmit:s,onModalClose:a}=e;return n.createElement(g.ZP,{className:"SettingsModalContent-form-t3OfDr",onSubmit:s},n.createElement(I.Z,{onModalClose:a},n.createElement(b.Z,null,(0,p.Z)("Settings")),r?n.createElement(S.Z,{errorMessage:(0,p.Z)("There was an error saving the settings")}):null,n.createElement(y.Z,null,i.map((e=>n.createElement(P.Z,((e,t)=>{for(var r in t||(t={}))C.call(t,r)&&D(e,r,t[r]);if(w)for(var r of w(t))M.call(t,r)&&D(e,r,t[r]);return e})({key:e.id},e))))),n.createElement(v.Z,null,n.createElement(f.Z,null,n.createElement(m.Z,{onPress:a},(0,p.Z)("Cancel")),n.createElement(h.Z,{isSpinning:t,kind:Z._8,type:"submit"},(0,p.Z)("Save"))))))};var T=Object.defineProperty,x=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class R extends n.Component{componentDidUpdate(e,t){!e.isSettingsUpdating||this.props.isSettingsUpdating||this.props.hasError||this.props.onModalClose()}componentWillUnmount(){this.props.onClearError()}render(){return n.createElement(O,((e,t)=>{for(var r in t||(t={}))A.call(t,r)&&N(e,r,t[r]);if(x)for(var r of x(t))k.call(t,r)&&N(e,r,t[r]);return e})({},this.props))}}const L=(0,o.$j)((function(){return(0,l.P1)((0,c.Z)(),((e={})=>({settings:e.preferences,isSettingsUpdating:e.isSettingsUpdating,hasError:!!e.settingsUpdateError})))}),(function(e,t){return{onSubmit(r){(0,d.c9)((()=>{e((0,u.KF)({serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataItemEntityID:t.metadataItemEntityID,data:r}))}))},onClearError(){e((0,u.kg)({metadataItemEntityID:t.metadataItemEntityID}))}}}))(R),j=function(e){const{serverEntityID:t,providerEntityID:r,metadataItemEntityID:o,isOpen:l,metricsProperties:c,onModalClose:d}=e;return n.createElement(a.Z,{isOpen:l,metricsPage:i.w6,metricsProperties:c,size:s.HC,onModalClose:d},n.createElement(L,{metadataItemEntityID:o,providerEntityID:r,serverEntityID:t,onModalClose:d}))}},53942:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Re});var n=r(67294),i=r(62291),s=r(69281),a=r(55949),o=r(28216),l=r(22222),c=r(49217),d=r(60048),u=r(73788),p=r(70668),m=r(16013),h=r(58851),g=r(63135),y=r(74249),v=r(17516),f=r(25555),b=r(17330),Z=r(36380),S=r(88140),P=r(90684),I=r(18622),E=r(48521),w=r(73701),C=r(11244),M=r(62934),D=r(86418),O=r(89083),T=r(74226);function x({server:e,provider:t}){if(!t||!t.features)return!1;if(e&&(e.isShared||e.isCloud||!e.isConnected))return!1;const r=[T.xF,T.Y3];return!!T.wB(t.identifier,r)&&!!t.features.find((e=>e.type===D.Z.PLAYLIST&&e.flavor===O.D7))}var A=r(61677),k=r(28201),N=r(8059),R=r(10125),L=r(84332);class j extends n.Component{constructor(){super(...arguments),this.onPress=e=>{this.props.isSelected||this.props.onDestinationSelect(this.props.destination),this.props.onMenuClose()}}render(){const{destination:e,isSelected:t}=this.props;return n.createElement(L.Z,{isSelected:t,onPress:this.onPress},e.name)}}const V=j,U=function(e){const{target:t,isOpen:r,destination:i,destinations:a,onMenuClose:o,onDestinationSelect:l}=e;return n.createElement(R.Z,{isOpen:r,size:s.ln,target:t,onMenuClose:o},a.map(((e,t)=>n.createElement(V,{key:`playlist-destination-${t}`,destination:e,isSelected:e===i,onDestinationSelect:l,onMenuClose:o}))))};class F extends n.Component{constructor(e,t){super(e,t),this.onMenuButtonPress=()=>{this.setState({isMenuOpen:!this.state.isMenuOpen})},this.onMenuClose=()=>{this.setState({isMenuOpen:!1})},this.state={isMenuOpen:!1},this._menuButtonID=(0,k.Z)()}render(){const{className:e,destination:t,destinations:r,onDestinationSelect:i}=this.props,{isMenuOpen:s}=this.state;return!r||r.length<2?null:n.createElement("div",{className:e},n.createElement(A.Z,{direction:s?N.UP:N.WV,id:this._menuButtonID,onPress:this.onMenuButtonPress},t.name),n.createElement(U,{destination:t,destinations:r,isOpen:s,target:this._menuButtonID,onDestinationSelect:i,onMenuClose:this.onMenuClose}))}}const B=F,_=(0,l.P1)(E.Z,C.Z,I.Z,((e,t,r)=>{const n={server:t,provider:r},i=e.filter(x);return i.find((({server:e,provider:n})=>e.machineIdentifier===t.machineIdentifier&&n.identifier===r.identifier))||i.unshift(n),i})),z=(0,o.$j)((function(){return(0,l.P1)(M.Z,w.Z,_,((e,t,r)=>{const n=r.map((e=>({name:e.server.isCloud?(0,u.Z)("TIDAL"):e.server.friendlyName,serverEntityID:e.server.entityID,providerEntityID:e.provider.entityID})));return{destination:n.find((({serverEntityID:r,providerEntityID:n})=>r===e.entityID&&n===t.entityID)),destinations:n}}))}))(B);var H=r(53635),W=r(42985),G=r(86555),Q=r(94184),$=r.n(Q),K=r(85448),q=r(47435),Y=r(88638),X=r(40621);const J=(0,o.$j)((function(){return(0,l.P1)((0,G.Z)(),(e=>e?{isLoading:!1,playlistID:e.ratingKey,title:e.title,thumb:e.thumb||e.composite||""}:{isLoading:!0}))}))((function(e){const{className:t,serverEntityID:r,providerEntityID:i,playlistID:s,title:a,thumb:o,isLoading:l,cellIndex:c,onSelect:d}=e,u=(0,q.Z)(e),p=(0,n.useCallback)((()=>{d(s)}),[s,d]);return n.createElement("div",{className:t,style:u.style},l?null:n.createElement(K.Z,{className:$()("PlaylistListItem-container-zywB3a",c%2&&"PlaylistListItem-alternate-XAr9Y9"),onPress:p},n.createElement(Y.Z,{className:"PlaylistListItem-card-QIfJLu PosterCard-card-B3tGLl",component:X.Z,height:40,providerEntityID:i,serverEntityID:r,url:o,width:40}),n.createElement("span",{className:"PlaylistListItem-title-B7d47h"},a)))}));var ee=r(96859);var te=Object.defineProperty,re=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,ie=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,oe=(e,t,r)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,le=(e,t)=>{for(var r in t||(t={}))se.call(t,r)&&oe(e,r,t[r]);if(ie)for(var r of ie(t))ae.call(t,r)&&oe(e,r,t[r]);return e};const ce=(0,ee.Z)(50);class de extends n.Component{constructor(){super(...arguments),this.renderPlaylistItem=e=>{const{serverEntityID:t,providerEntityID:r,onPlaylistSelect:i}=this.props;return n.createElement(J,(s=le({},e),re(s,ne({className:"PlaylistList-cell-wwqG5G",providerEntityID:r,serverEntityID:t,onSelect:i}))));var s}}render(){const e=this.props,{metadataItemEntityIDs:t,isPopulated:r,totalSize:i}=e,s=((e,t)=>{var r={};for(var n in e)se.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ie)for(var n of ie(e))t.indexOf(n)<0&&ae.call(e,n)&&(r[n]=e[n]);return r})(e,["metadataItemEntityIDs","isPopulated","totalSize"]);return r?n.createElement(H.Z,le({cellRenderer:this.renderPlaylistItem,className:"PlaylistList-content-eNtnNz",items:t,keyPropName:"metadataItemEntityID",layout:ce,scrollerClassName:"PlaylistList-contentScroller-zxyyDC",size:i},s)):n.createElement(W.Z,{className:"PlaylistList-spinner-Vu4GO8"})}}const ue=de;var pe=Object.defineProperty,me=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,ye=(e,t,r)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ve(e){return e?void 0:(0,u.Z)("Title is required")}const fe=(0,h.Z)((e=>{var t=e,{showErrors:r}=t,i=((e,t)=>{var r={};for(var n in e)he.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&me)for(var n of me(e))t.indexOf(n)<0&&ge.call(e,n)&&(r[n]=e[n]);return r})(t,["showErrors"]);return n.createElement(m.Z,((e,t)=>{for(var r in t||(t={}))he.call(t,r)&&ye(e,r,t[r]);if(me)for(var r of me(t))ge.call(t,r)&&ye(e,r,t[r]);return e})({hasError:r},i))}));class be extends n.Component{componentDidUpdate(e){this.props.isUpdating||!e.isUpdating||this.props.hasError||this.props.onModalClose()}render(){const{serverEntityID:e,providerEntityID:t,metadataItemEntityID:r,metadataListEntityID:i,title:s,smart:a,hasError:o,isUpdating:l,isMultiSelect:c,onModalClose:d,onDestinationSelect:m,onFormSubmit:h,onPlaylistSelect:I}=this.props,E=!c&&!a&&e&&t&&r;return n.createElement(S.Z,{onModalClose:d},n.createElement(v.Z,null,a?(0,u.Z)("Create Playlist"):(0,u.Z)("Add to Playlist")),E?n.createElement(z,{className:"AddToPlaylistModalContent-listModalSubheader-DK1wnR",metadataItemEntityID:r,providerEntityID:t,serverEntityID:e,onDestinationSelect:m}):null,o?n.createElement(Z.Z,{errorMessage:(0,u.Z)("Something went wrong. Make sure the destination is available and try again.")}):null,a?null:n.createElement(g.Z,{innerClassName:"AddToPlaylistModalContent-listModalInnerBody-jooez9"},i?n.createElement(P.Z,{component:ue,initialSize:20,metadataListEntityID:i,providerEntityID:t,serverEntityID:e,onPlaylistSelect:I}):null),n.createElement(y.Z,null,n.createElement(p.ZP,{className:"AddToPlaylistModalContent-createForm-EJHzvn",onSubmit:h},n.createElement(fe,{"data-autofocus":!0,focusOnMount:!0,initialValue:s,name:"title",selectTextOnFocus:!0,validations:[ve]}),n.createElement(b.Z,{className:"AddToPlaylistModalContent-createButton-BIxNhF",isSpinning:l,kind:f._8,type:"submit"},(0,u.Z)("Create")))))}}const Ze=be;var Se=Object.defineProperty,Pe=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,we=(e,t,r)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ce=(0,l.P1)((e=>e.ui.addToPlaylistModal),d.Z,((e,t)=>{const{metadataItem:r,metadataList:n,multiSelect:i}=e;if(r)return r;const s=t[n];return s&&s.metadataItems.length?s.metadataItems[0]:i&&i.activeSelectionItems&&i.activeSelectionItems.length?i.activeSelectionItems[0].model:void 0})),Me=(0,l.P1)((e=>e.ui.addToPlaylistModal),Ce,((e,t)=>({serverEntityID:e.server,providerEntityID:e.provider,metadataItemEntityID:t,metadataListEntityID:e.playlists,title:e.title,isUpdating:e.isUpdating,isMultiSelect:!!e.multiSelect,hasError:!!e.error})));class De extends n.Component{constructor(){super(...arguments),this.onAdd=e=>{this.props.dispatchAddToPlaylist(e)}}componentDidMount(){this.props.dispatchInitAddToPlaylistModal()}componentWillUnmount(){this.props.dispatchClearAddToPlaylistModal()}render(){const e=this.props,{dispatchInitAddToPlaylistModal:t,dispatchClearAddToPlaylistModal:r,dispatchAddToPlaylist:i}=e,s=((e,t)=>{var r={};for(var n in e)Ie.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Pe)for(var n of Pe(e))t.indexOf(n)<0&&Ee.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchInitAddToPlaylistModal","dispatchClearAddToPlaylistModal","dispatchAddToPlaylist"]);return n.createElement(Ze,((e,t)=>{for(var r in t||(t={}))Ie.call(t,r)&&we(e,r,t[r]);if(Pe)for(var r of Pe(t))Ee.call(t,r)&&we(e,r,t[r]);return e})({onPlaylistSelect:this.onAdd},s))}}const Oe=(0,o.$j)(Me,(function(e,t){return{onDestinationSelect({serverEntityID:t,providerEntityID:r}){e(c.it({serverEntityID:t,providerEntityID:r}))},onFormSubmit(t){e(c.cg({formData:t}))},dispatchInitAddToPlaylistModal(){e(c.x3({serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataItemEntityID:t.metadataItemEntityID,metadataListEntityID:t.metadataListEntityID,playQueueID:t.playQueueID,smart:t.smart}))},dispatchClearAddToPlaylistModal(){e(c.h5())},dispatchAddToPlaylist(t){e(c.BJ({playlistID:t}))}}}))(De);var Te=Object.defineProperty,xe=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,Ne=(e,t,r)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Re=function(e){const t=e,{isOpen:r,onModalClose:o}=t,l=((e,t)=>{var r={};for(var n in e)Ae.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&xe)for(var n of xe(e))t.indexOf(n)<0&&ke.call(e,n)&&(r[n]=e[n]);return r})(t,["isOpen","onModalClose"]);return n.createElement(a.Z,{isOpen:r,metricsPage:i.ls,size:s.HC,onModalClose:o},n.createElement(Oe,((e,t)=>{for(var r in t||(t={}))Ae.call(t,r)&&Ne(e,r,t[r]);if(xe)for(var r of xe(t))ke.call(t,r)&&Ne(e,r,t[r]);return e})({onModalClose:o},l)))}},95847:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=r(44655),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const d=function(e){const{prefs:t}=e;return n.createElement("div",null,t.map((e=>{const{id:t}=e;return n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({key:t},e))})))}},64303:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(67294),i=r(85209),s=r(11113),a=r(88638),o=r(40621),l=r(30750),c=r(99184),d=r(77613),u=r(99027);var p=Object.defineProperty,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const v=function(e){const t=e,{component:r,isSecondary:i}=t,s=((e,t)=>{var r={};for(var n in e)h.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))t.indexOf(n)<0&&g.call(e,n)&&(r[n]=e[n]);return r})(t,["component","isSecondary"]);return n.createElement(r,((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&y(e,r,t[r]);if(m)for(var r of m(t))g.call(t,r)&&y(e,r,t[r]);return e})({className:i?"MediaSubscriptionTitle-secondaryTitle-gV6Cp0":"MediaSubscriptionTitle-title-Tqv8zL"},s))};var f=Object.defineProperty,b=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function I(e){const{serverEntityID:t,providerEntityID:r,hint:p,target:m,useStaticHeight:h,children:g,showSubscriptionBadge:y,isDownload:f}=e,{type:I,subtype:E}=p,{thumb:w,grandparentThumb:C}=m||p,M=I===i.PLAYLIST,D=f&&M?m&&m.composite:C||w,O=f||I!==i.PLAYLIST?I:i.SHOW;return n.createElement("div",{className:"MediaSubscriptionHintPosterTitle-container-mwIuyl"},n.createElement("div",{className:"MediaSubscriptionHintPosterTitle-left-Etf0Yc"},n.createElement(a.Z,{component:o.Z,height:(0,u.Cr)(130,O),providerEntityID:r,serverEntityID:t,type:O,url:D,width:130},y?n.createElement("div",{className:"MediaSubscriptionHintPosterTitle-subscriptionBadge-U2a3uf MetadataPosterCardOverlay-badge-L1fayd"},n.createElement(s.Z,{type:I})):null)),n.createElement("div",{className:"MediaSubscriptionHintPosterTitle-right-zFyNmo"},n.createElement("div",{className:h?"MediaSubscriptionHintPosterTitle-staticHeightTitleContainer-z5MoXW MediaSubscriptionHintPosterTitle-titleContainer-biNiy6":"MediaSubscriptionHintPosterTitle-titleContainer-biNiy6"},function(e){switch(e){case i.MOVIE:case i.SHOW:return[c.Z];case i.EPISODE:return[l.Z,d.Z];case i.PLAYLIST:default:return[c.Z]}}(I).map(((e,t)=>n.createElement(v,((e,t)=>{for(var r in t||(t={}))Z.call(t,r)&&P(e,r,t[r]);if(b)for(var r of b(t))S.call(t,r)&&P(e,r,t[r]);return e})({key:t,component:e,isSecondary:t>0},p))))),g))}I.defaultProps={useStaticHeight:!1};const E=I},61740:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Et});var n=r(67294),i=r(62291),s=r(55949),a=r(28216),o=r(22222),l=r(13469),c=r.n(l),d=r(80011),u=r(5450),p=r(91141),m=r(53461),h=r(87880),g=r(89186);const y=(0,o.P1)((e=>e.ui.mediaSubscriptionModal.mediaSubscription),g.Z,((e,t)=>t[e])),v=(0,o.P1)((e=>e.ui.mediaSubscriptionModal.templates),g.Z,((e=[],t)=>e.map((e=>t[e]))));var f=r(87442),b=r(73788),Z=r(85209),S=r(43523),P=r(78741),I=r(10379),E=r(74236),w=r(27901),C=r(42985),M=r(33556),D=Object.defineProperty,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const k=function(e){return n.createElement(M.Z,((e,t)=>{for(var r in t||(t={}))T.call(t,r)&&A(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&A(e,r,t[r]);return e})({},e),n.createElement(C.Z,null))};var N=r(13886);var R=r(18222),L=r(63135),j=r(74249),V=r(45181),U=r(17516),F=r(25555),B=r(71667),_=r(17330),z=r(36380),H=r(88140),W=r(86555),G=r(30750);const Q=(0,a.$j)((function(){return(0,o.P1)((0,W.Z)(),((e={})=>({grandparentTitle:e.grandparentTitle})))}))(G.Z);var $=r(33578),K=r(57557);var q=Object.defineProperty,Y=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,ee=(e,t,r)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const te=function(e){const t=e,{component:r,isSecondary:i}=t,s=((e,t)=>{var r={};for(var n in e)X.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Y)for(var n of Y(e))t.indexOf(n)<0&&J.call(e,n)&&(r[n]=e[n]);return r})(t,["component","isSecondary"]);return n.createElement(r,((e,t)=>{for(var r in t||(t={}))X.call(t,r)&&ee(e,r,t[r]);if(Y)for(var r of Y(t))J.call(t,r)&&ee(e,r,t[r]);return e})({className:i?"ConflictTitle-secondaryTitle-yJeGns":"ConflictTitle-title-b5MwP3"},s))};var re=Object.defineProperty,ne=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,ae=(e,t,r)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const oe=function(e){var t=e,{className:r,type:i}=t,s=((e,t)=>{var r={};for(var n in e)ie.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ne)for(var n of ne(e))t.indexOf(n)<0&&se.call(e,n)&&(r[n]=e[n]);return r})(t,["className","type"]);const a=function(e){switch(e){case"movie":case"show":return[$.Z];case"episode":return[Q,K.Z];case"playlist":default:return[$.Z]}}(i);return n.createElement("div",{className:"ConflictItemRow-container-kYEwBa"},a.map(((e,t)=>n.createElement(te,((e,t)=>{for(var r in t||(t={}))ie.call(t,r)&&ae(e,r,t[r]);if(ne)for(var r of ne(t))se.call(t,r)&&ae(e,r,t[r]);return e})({key:t,component:e,isSecondary:t>0},s)))))};var le=Object.defineProperty,ce=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,pe=(e,t,r)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const me=(0,a.$j)((function(){return(0,o.P1)((0,W.Z)(),((e={})=>({type:e.type})))}))((function(e){return n.createElement(oe,((e,t)=>{for(var r in t||(t={}))de.call(t,r)&&pe(e,r,t[r]);if(ce)for(var r of ce(t))ue.call(t,r)&&pe(e,r,t[r]);return e})({},e))}));var he=r(64303);class ge extends n.Component{componentDidUpdate(e,t){(e.isMediaSubscriptionMoving&&!this.props.isMediaSubscriptionMoving&&null==this.props.mediaSubscriptionMoveError||e.isMediaSubscriptionDeleting&&!this.props.isMediaSubscriptionDeleting&&null==this.props.mediaSubscriptionDeleteError)&&this.props.onModalClose()}render(){const{isRecordingSchedule:e,isMediaSubscriptionDeleting:t,mediaSubscriptionDeleteError:r,isMediaSubscriptionMoving:i,mediaSubscriptionMoveError:s,serverEntityID:a,providerEntityID:o,server:l,provider:c,sourceDirectory:d,hint:u,conflicts:p,onDelete:m,onMediaMove:h,onModalClose:g}=this.props,y=s||r;return n.createElement(H.Z,{onModalClose:g},n.createElement(U.Z,null,(0,b.Z)("Conflict Detected")),y?n.createElement(z.Z,{errorMessage:y}):null,n.createElement(L.Z,{autoScroll:!0},n.createElement(he.Z,{hint:u,providerEntityID:o,serverEntityID:a},n.createElement("div",{className:"MediaSubscriptionConflict-message-TjOLCl"},1===p.length?(0,b.Z)("Conflicts with 1 recording"):(0,b.Z)("Conflicts with {conflictCount} recordings",{conflictCount:p.length})),n.createElement("div",{className:"MediaSubscriptionConflict-conflicts-d877JJ"},p.map((({metadataItem:e},t)=>n.createElement(me,{key:t,metadataItemEntityID:e})))))),n.createElement(j.Z,null,n.createElement(V.Z,null,n.createElement(_.Z,{isSpinning:t,kind:F.T,onPress:m},(0,b.Z)("Cancel This")),n.createElement(_.Z,{isSpinning:i,kind:F._8,onPress:h},(0,b.Z)("Prefer This")),e?n.createElement(R.Z,{kind:F._8,onPress:g},(0,b.Z)("Close")):n.createElement(R.Z,{kind:F._8,to:(0,B.ZP)(B.tk.RECORDING_SCHEDULE,l,c,d)},(0,b.Z)("Manage")))))}}ge.defaultProps={conflicts:[]};const ye=ge;var ve=r(85448),fe=r(70668),be=r(73111);const Ze=function(){return n.createElement("div",{className:"CancelRecordingConfirmation-cancelConfirmationMessage-bRg4FN"},n.createElement("div",null,(0,b.Z)("Are you sure you want to cancel this recording?")),n.createElement("div",null,(0,b.Z)("This will cancel any future scheduled recordings and stop any recordings already in progress.")))};var Se=r(95847),Pe=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;function we(e){var t=e,{className:r,children:i}=t,s=((e,t)=>{var r={};for(var n in e)Ie.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Pe)for(var n of Pe(e))t.indexOf(n)<0&&Ee.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children"]);return n.createElement("div",{className:r,style:s},i)}we.defaultProps={flexGrow:1,flexShrink:0};const Ce=we;var Me=r(94184),De=r.n(Me);var Oe=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;function Ae(e){var t=e,{className:r,children:i}=t,s=((e,t)=>{var r={};for(var n in e)Te.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Oe)for(var n of Oe(e))t.indexOf(n)<0&&xe.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children"]);return n.createElement("div",{className:De()("FlexGrid-grid-skLJgy",r),style:s},i)}Ae.defaultProps={flexDirection:"row",justifyContent:"space-between",alignItems:"center",alignContent:"center"};const ke=Ae;var Ne=r(69281),Re=r(37754),Le=r(7614),je=r(58851),Ve=Object.defineProperty,Ue=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,_e=(e,t,r)=>t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ze=(0,je.Z)((function(e){const t=e,{name:r,initialValue:i,labelText:s,showErrors:a,errors:o,validations:l}=t,c=((e,t)=>{var r={};for(var n in e)Fe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ue)for(var n of Ue(e))t.indexOf(n)<0&&Be.call(e,n)&&(r[n]=e[n]);return r})(t,["name","initialValue","labelText","showErrors","errors","validations"]);return n.createElement("div",null,n.createElement(Re.Z,{name:r},s),n.createElement(Le.Z,((e,t)=>{for(var r in t||(t={}))Fe.call(t,r)&&_e(e,r,t[r]);if(Ue)for(var r of Ue(t))Be.call(t,r)&&_e(e,r,t[r]);return e})({name:r,size:Ne.HC},c)))})),He=function(e){const{libraries:t,targetLibrarySectionID:r,targetSectionLocationID:i,selectedLibrarySectionID:s}=e,a=function(e,t){return null!=e&&t.some((t=>t.librarySectionID===e))}(r,t)?r:function([e]){if(e)return e.librarySectionID}(t),o=function(e,t,r){let n=e.find((({librarySectionID:e})=>e===t));return n||(n=e.find((({librarySectionID:e})=>e===r))),n?n.locations.map((({id:e,path:t})=>({[e]:t}))):[]}(t,s,a),l=function(e,t){return null!=e&&t.some((t=>t.hasOwnProperty(e)))}(i,o)?i:function([e]){if(!e)return;const[t]=Object.keys(e);return e[t]}(o);return n.createElement(ke,{flexWrap:"wrap"},n.createElement(Ce,{flexBasis:230,maxWidth:230},n.createElement(ze,{initialValue:a,labelText:(0,b.Z)("Add to Library"),name:"targetLibrarySectionID",size:Ne.HC,values:t.map((({title:e,librarySectionID:t},r)=>({[t]:e})))})),n.createElement(Ce,{flexBasis:230,maxWidth:230},o.length>1?n.createElement(ze,{initialValue:l,labelText:(0,b.Z)("Location"),name:"targetSectionLocationID",size:Ne.HC,values:o}):null))},We=function(e){const{serverEntityID:t,providerEntityID:r,hint:i,target:s,initialMode:a,isDownload:o,modes:l,libraries:c,targetLibrarySectionID:d,targetSectionLocationID:u,selectedLibrarySectionID:p,prefs:m}=e,h=m&&m.onlyNewAirings,g=i.type===Z.EPISODE||i.type===Z.SHOW||i.type===Z.PLAYLIST;return n.createElement(he.Z,{hint:i,isDownload:o,providerEntityID:r,serverEntityID:t,showSubscriptionBadge:!o,target:s,useStaticHeight:g},n.createElement(ke,{flexWrap:"wrap"},n.createElement(Ce,{flexBasis:230,maxWidth:230},l?n.createElement(ze,{initialValue:a,isDisabled:l.length<2,labelText:o?(0,b.Z)("Download"):(0,b.Z)("Record"),name:"mode",values:l}):null),n.createElement(Ce,{flexBasis:230,maxWidth:230},h?n.createElement(ze,{initialValue:h.value,labelText:h.label,name:h.id,values:h.enumValues.map((({label:e,value:t})=>({[t]:e})))}):null)),!o&&c&&c.length?n.createElement(He,{libraries:c,selectedLibrarySectionID:p,targetLibrarySectionID:d,targetSectionLocationID:u}):null)};var Ge=Object.defineProperty,Qe=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable,qe=(e,t,r)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ye=(e,t)=>{for(var r in t||(t={}))$e.call(t,r)&&qe(e,r,t[r]);if(Qe)for(var r of Qe(t))Ke.call(t,r)&&qe(e,r,t[r]);return e};class Xe extends n.Component{constructor(e,t){super(e,t),this.onAdvancedPress=()=>{this.setState({isAdvanced:!this.state.isAdvanced})},this.onCancelPress=()=>{this.setState({showCancelConfirmation:!0})},this.onBackPress=()=>{this.setState({showCancelConfirmation:!1})},this.onFormChange=e=>{if(this.props.showLibraries){if(!e.targetLibrarySectionID)return;e.targetLibrarySectionID.value!==this.state.selectedLibrarySectionID&&this.setState({selectedLibrarySectionID:e.targetLibrarySectionID.value})}if(e.mode&&e.mode.value!==this.state.selectedMode){const t=e.mode.value;this.setState({selectedMode:t}),this.props.onModeChange(t)}},this.state={selectedLibrarySectionID:e.targetLibrarySectionID,selectedMode:e.initialMode,isAdvanced:!1,showCancelConfirmation:!1}}componentDidUpdate(e,t){(e.isMediaSubscriptionSaving&&!this.props.isMediaSubscriptionSaving&&null==this.props.mediaSubscriptionSaveError||e.isMediaSubscriptionDeleting&&!this.props.isMediaSubscriptionDeleting&&null==this.props.mediaSubscriptionDeleteError)&&this.props.onModalClose()}render(){const e=this.props,{mediaSubscriptionKey:t,isMediaSubscriptionSaving:r,mediaSubscriptionSaveError:i,isMediaSubscriptionDeleting:s,mediaSubscriptionDeleteError:a,prefGroups:o,onModalClose:l,onSubmit:c,onDelete:d}=e,u=((e,t)=>{var r={};for(var n in e)$e.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Qe)for(var n of Qe(e))t.indexOf(n)<0&&Ke.call(e,n)&&(r[n]=e[n]);return r})(e,["mediaSubscriptionKey","isMediaSubscriptionSaving","mediaSubscriptionSaveError","isMediaSubscriptionDeleting","mediaSubscriptionDeleteError","prefGroups","onModalClose","onSubmit","onDelete"]),{isAdvanced:p,showCancelConfirmation:m}=this.state,h=(m?"MediaSubscriptionForm-cancelConfirmation-QsF4nS":p&&"MediaSubscriptionForm-advancedForm-pBqflk")||"MediaSubscriptionForm-baseForm-tzdfW2",g=!!o.advanced,y=i||a;return n.createElement(fe.ZP,{className:h,onChange:this.onFormChange,onSubmit:c},n.createElement(H.Z,{onModalClose:l},n.createElement(U.Z,null,m?(0,b.Z)("Cancel Recording"):(0,b.Z)("Record Options")),y?n.createElement(z.Z,{errorMessage:y}):null,n.createElement(L.Z,null,n.createElement("div",{key:"base",className:"MediaSubscriptionForm-baseSettings-TwDuUI"},n.createElement(We,Ye({prefs:o.basic,selectedLibrarySectionID:this.state.selectedLibrarySectionID},u))),g?n.createElement("div",{key:"advanced",className:"MediaSubscriptionForm-advancedSettings-LZ33WV"},n.createElement(Se.Z,Ye({prefs:o.advanced},u))):null,m?n.createElement(Ze,null):null),n.createElement(j.Z,{className:m?"MediaSubscriptionForm-cancelConfirmationFooter-dHEwUq ModalFooter-modalFooter-IDP5sZ":"MediaSubscriptionForm-footer-mDmgDK ModalFooter-modalFooter-IDP5sZ"},m?null:n.createElement(V.Z,null,g?n.createElement(ve.Z,{kind:F._8,onPress:this.onAdvancedPress},n.createElement(be.Z,{className:"MediaSubscriptionForm-advancedIcon-BFg5ox"}),p?(0,b.Z)("Show Basic"):(0,b.Z)("Show Advanced")):null),m?n.createElement(V.Z,null,n.createElement(R.Z,{onPress:this.onBackPress},(0,b.Z)("Back")),n.createElement(_.Z,{isSpinning:s,kind:F.T,onPress:d},(0,b.Z)("Yes"))):n.createElement(V.Z,null,t?n.createElement(R.Z,{kind:F.T,onPress:this.onCancelPress},(0,b.Z)("Cancel Recording")):n.createElement(R.Z,{kind:F.TP,onPress:l},(0,b.Z)("Cancel")),n.createElement(_.Z,{isSpinning:r,kind:F._8,type:"submit"},t?(0,b.Z)("Save"):(0,b.Z)("Record"))))))}}const Je=Xe;var et=r(29228);class tt extends n.Component{componentDidUpdate(e,t){e.isMediaSubscriptionDeleting&&!this.props.isMediaSubscriptionDeleting&&null==this.props.mediaSubscriptionDeleteError&&this.props.onModalClose()}render(){const{serverEntityID:e,providerEntityID:t,mediaSubscriptionKey:r,hint:i,metadataType:s,isMediaSubscriptionDeleting:a,mediaSubscriptionDeleteError:o,canAddLibrary:l,onCreatePress:c,onModalClose:d,onDelete:u}=this.props,{typeString:p}=(0,Z.getRootType)(s),{title:m}=S.ZP.get(p),h=l?(0,b.Z)("This recording cannot be scheduled because you dont yet have a library for {type}.",{type:m}):(0,b.Z)("This recording cannot be scheduled because there is no library for {type}.",{type:m});let g;return g=l?r?(0,b.Z)("Please create a library or cancel the recording."):(0,b.Z)("Please try recording again after you have created your library."):(0,b.Z)("Please ask the server owner to create the library or cancel the recording."),n.createElement(H.Z,{onModalClose:d},n.createElement(U.Z,null,(0,b.Z)("Record Options")),o?n.createElement(z.Z,{errorMessage:o}):null,n.createElement(L.Z,null,n.createElement(he.Z,{hint:i,providerEntityID:t,serverEntityID:e},n.createElement("div",{className:"MediaSubscriptionNoLibrary-errorMessage-dpnO7c"},(0,b.Z)("{type} Library Required",{type:m})),n.createElement("p",null,h),n.createElement("p",null,g),l?n.createElement(ve.Z,{kind:F._8,onPress:c},n.createElement(et.Z,{className:"MediaSubscriptionNoLibrary-addIcon-GOXyzk"})," ",(0,b.Z)("Create Library")):null)),n.createElement(j.Z,null,n.createElement(V.Z,null,r?n.createElement(_.Z,{isSpinning:a,kind:F.T,onPress:u},(0,b.Z)("Cancel Recording")):null,n.createElement(R.Z,{onPress:d},(0,b.Z)("Cancel")))))}}const rt=tt;var nt=Object.defineProperty,it=Object.defineProperties,st=Object.getOwnPropertyDescriptors,at=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,ct=(e,t,r)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dt=(e,t)=>{for(var r in t||(t={}))ot.call(t,r)&&ct(e,r,t[r]);if(at)for(var r of at(t))lt.call(t,r)&&ct(e,r,t[r]);return e},ut=(e,t)=>it(e,st(t)),pt=(e,t)=>{var r={};for(var n in e)ot.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&at)for(var n of at(e))t.indexOf(n)<0&&lt.call(e,n)&&(r[n]=e[n]);return r};function mt(){return(0,o.P1)(((e,{subscriptionType:t})=>t),(e=>"playlist"===e?"show":e))}const ht={dispatchFetchLibraries:d.tU,dispatchAddLibrary:I.Wy,dispatchInitMediaSubscriptionModal:u.np,dispatchClearMediaSubscriptionModal:u.K7,dispatchSaveMediaSubscription:u.eU,dispatchChangeMediaSubscriptionTemplateMode:u.K5,dispatchMoveMediaSubscriptionModal:u.kB,dispatchDeleteMediaSubscriptionModal:u.XK,dispatchDeleteMediaGrabOperationsModal:u.NJ,dispatchChannelAiringsReset:E.ZP.actions.channelAiringsReset};class gt extends n.Component{constructor(e,t){super(e,t),this.onSubmit=e=>{const{serverEntityID:t,metadataItemEntityID:r}=this.props,n=e,{targetLibrarySectionID:i,targetSectionLocationID:s,mode:a}=n,o=pt(n,["targetLibrarySectionID","targetSectionLocationID","mode"]);this.props.dispatchSaveMediaSubscription({serverEntityID:t,metadataItemEntityID:r,targetLibrarySectionID:i,targetSectionLocationID:s,prefs:o}),this.props.channelGridKey&&this.props.dispatchChannelAiringsReset({channelGridKey:this.props.channelGridKey})},this.onDelete=()=>{var e;(null==(e=this.props.conflicts)?void 0:e.length)?this.props.dispatchDeleteMediaGrabOperationsModal({metadataItemEntityID:this.props.metadataItemEntityID}):this.props.dispatchDeleteMediaSubscriptionModal({metadataItemEntityID:this.props.metadataItemEntityID}),this.props.channelGridKey&&this.props.dispatchChannelAiringsReset({channelGridKey:this.props.channelGridKey})},this.onModeChange=e=>{(0,f.c9)((()=>{this.props.dispatchChangeMediaSubscriptionTemplateMode({modeIndex:e})}))},this.onMediaMove=()=>{this.props.dispatchMoveMediaSubscriptionModal()},this.onCreatePress=()=>{const{metadataType:e,serverEntityID:t}=this.props,{typeString:r}=(0,Z.getRootType)(e),n=S.ZP.get(r);this.props.onModalClose(),this.props.dispatchAddLibrary({serverEntityID:t,options:{redirect:!1,seedAttrs:{type:n.typeString,title:n.title,language:n.defaultLanguage}}})},this.state={showConflicts:e.showConflicts}}componentDidMount(){this._populate()}UNSAFE_componentWillReceiveProps(e){var t;let r=this.state.showConflicts;this.props.isMediaSubscriptionSaving&&!e.isMediaSubscriptionSaving&&(null==(t=e.conflicts)?void 0:t.length)&&(r=!0),r!==this.state.showConflicts&&this.setState({showConflicts:r});const n=this.props.metadataItemEntityID!==e.metadataItemEntityID,i=this.props.mediaSubscriptionEntityID!==e.mediaSubscriptionEntityID;(n||i)&&this._populate(e)}componentWillUnmount(){this.props.dispatchClearMediaSubscriptionModal()}_populate(e=this.props){const{serverEntityID:t,mediaSubscriptionEntityID:r,metadataItemEntityID:n,showConflicts:i}=e;(0,f.c9)((()=>{e.dispatchFetchLibraries({serverEntityID:t}),e.dispatchInitMediaSubscriptionModal({serverEntityID:t,mediaSubscriptionEntityID:r,metadataItemEntityID:n,showConflicts:i})}))}render(){const{libraries:e,isLibrariesLoading:t,hasLibrariesError:r,isMediaSubscriptionPending:i,isMediaSubscriptionPopulated:s,mediaSubscriptionError:a,showLibraries:o,onModalClose:l}=this.props;return a?n.createElement(w.Z,{message:a,onModalClose:l}):r?n.createElement(w.Z,{message:(0,b.Z)("There was an unexpected error loading libraries."),onModalClose:l}):i||!s||t?n.createElement(k,{onModalClose:l}):o&&e&&!e.length?n.createElement(rt,ut(dt({},this.props),{onCreatePress:this.onCreatePress,onDelete:this.onDelete})):this.state.showConflicts?n.createElement(ye,ut(dt({},this.props),{onDelete:this.onDelete,onMediaMove:this.onMediaMove})):n.createElement(Je,ut(dt({},this.props),{onDelete:this.onDelete,onModeChange:this.onModeChange,onSubmit:this.onSubmit}))}}gt.defaultProps={showConflicts:!1,showLibraries:!0};const yt=(0,a.$j)((function(){return(0,o.P1)((0,h.Z)(),(0,m.Z)(),(e=>e.ui.mediaSubscriptionModal),y,v,mt(),(0,o.P1)((0,p.Z)(),mt(),((e,t)=>{const r=(0,Z.getRootType)(t);return e.filter((e=>{const{id:t}=(0,Z.getMetadataType)(e.type);return t===r.id})).map((e=>({librarySectionID:e.key,locations:e.locations,title:e.title})))})),((e,t,r,n={},i,s,a)=>{const o=c().omit(r,"templates","mediaSubscription"),l=n,{key:d,grabOperations:u=[],prefs:p}=l,m=pt(l,["key","grabOperations","prefs"]),h=e.isFullOwnedServer,{initialMode:g,modes:y}=function(e,t){let r,n;return t.length>1?(n=t.findIndex((e=>e.selected)),r=t.map((({title:e},t)=>({[t]:e})))):(n=0,r=e.title?[{0:e.title}]:null),{initialMode:n,modes:r}}(n,i),v=u.reduce(((e,t)=>t.conflicts&&t.conflicts.length?e.concat(t.conflicts):e),[]),f=(0,N.Z)(p),b=(0,P.Z)(t),Z=b?b.directories[0]:null,S=e&&e.desktop||{};return dt(dt({mediaSubscriptionKey:d,prefGroups:f,metadataType:s,libraries:a,isLibrariesLoading:!S.isLibrariesPopulated||S.isLibrariesPending,hasLibrariesError:!!S.librariesError,initialMode:g,modes:y,conflicts:v,server:e,provider:t,canAddLibrary:h,sourceDirectory:Z},o),m)}))}),ht)(gt);var vt=Object.defineProperty,ft=Object.defineProperties,bt=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,St=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,It=(e,t,r)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Et=function(e){const t=e,{isOpen:r,metricsProperties:a,onModalClose:o}=t,l=((e,t)=>{var r={};for(var n in e)St.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Zt)for(var n of Zt(e))t.indexOf(n)<0&&Pt.call(e,n)&&(r[n]=e[n]);return r})(t,["isOpen","metricsProperties","onModalClose"]);return n.createElement(s.Z,{isOpen:r,metricsPage:i.X$,metricsProperties:a,onModalClose:o},n.createElement(yt,(c=((e,t)=>{for(var r in t||(t={}))St.call(t,r)&&It(e,r,t[r]);if(Zt)for(var r of Zt(t))Pt.call(t,r)&&It(e,r,t[r]);return e})({},l),ft(c,bt({onModalClose:o})))));var c}},18153:(e,t,r)=>{"use strict";r.d(t,{Z:()=>X});var n=r(67294),i=r(28216),s=r(9466),a=r(62291),o=r(55949),l=r(22222),c=r(86555);function d(e){return e.ui.subtitlesModal}var u=r(41863),p=r(81855),m=r(94118),h=r(64556);const g=["af","sq","ar","an","hy","az","eu","be","bn","bs","br","bg","my","ca","zh","zh-TW","cs","da","nl","en","eo","et","fi","fr","ka","de","gl","el","he","hi","hr","hu","is","id","it","ja","kn","kk","km","ko","ku","lv","lt","lb","mk","ml","ms","mn","no","oc","fa","pl","pt","pt-BR","ro","ru","sr","si","sk","sl","es","sw","sv","ta","te","tl","th","tr","uk","ur","vi"],y=g.reduce(((e,t)=>(e[t]=h.ZP[t],e)),{});function v(e){if(y[e])return e;const t=(0,m.Z)([e]);return y[t]?t:"en"}const f=[...g].sort(h.wq).reduce(((e,t)=>(e.push(y[t]),e)),[]),b=y;var Z=r(73788),S=r(7614),P=r(16013),I=r(63135),E=r(17516),w=r(37920),C=r(42985),M=r(36380),D=r(88140),O=r(8067),T=r(2857),x=r(85448),A=r(69281),k=r(14522),N=r(31491);class R extends n.Component{constructor(){super(...arguments),this.onPress=()=>{const{subtitleKey:e,codec:t,languageCode:r,providerTitle:n,hearingImpaired:i,forced:s,onDownloadSubtitle:a}=this.props;a({key:e,codec:t,languageCode:r,providerTitle:n,hearingImpaired:i,forced:s})}}render(){const{title:e,displayTitle:t,score:r,perfectMatch:i,downloaded:s,isDownloading:a}=this.props;return n.createElement(x.Z,{className:"SubtitleRow-item-c2k651",isDisabled:s||a,onPress:this.onPress},n.createElement("div",{className:"SubtitleRow-titles-kANXsk"},n.createElement("span",{className:"SubtitleRow-title-PO2uGs"},e),n.createElement("span",{className:"SubtitleRow-secondaryTitle-MBHZFp SubtitleRow-title-PO2uGs"},t)),n.createElement("div",{className:"SubtitleRow-score-qeh0nZ"},i?n.createElement(T.Z,{className:"SubtitleRow-perfectMatch-mqNZvr"}):null,r),a?n.createElement("div",{className:"SubtitleRow-spinnerContainer-TnPS2o"},n.createElement(C.Z,{size:A.HC})):null,s?n.createElement(k.Z,{className:"SubtitleRow-downloadedIcon-w71hIv SubtitleRow-icon-oZstv1"}):null,a||s?null:n.createElement(N.Z,{className:"SubtitleRow-downloadIcon-sj8DTY SubtitleRow-icon-oZstv1"}))}}const L=R,j=function(e){const{subtitles:t,subtitlesDownloadKey:r,onDownloadSubtitle:i}=e;return n.createElement(O.Z,null,t.map((e=>{const{key:t,title:s,displayTitle:a,providerTitle:o,score:l,codec:c,languageCode:d,hearingImpaired:u,forced:p,perfectMatch:m,downloaded:h}=e;return n.createElement(L,{key:t,codec:c,displayTitle:a,downloaded:h,forced:p,hearingImpaired:u,isDownloading:r===t,languageCode:d,perfectMatch:m,providerTitle:o,score:l,subtitleKey:t,title:s,onDownloadSubtitle:i})})))},V="SubtitlesModalContent-centeredContainer-yYZOsM";class U extends n.Component{constructor(e,t){super(e,t),this.onSearch=()=>{const{language:e,title:t}=this.state;this.props.onFetchSubtitles({language:e,title:t})},this.onLanguageChange=e=>{const t=Object.keys(b).find((t=>b[t]===e));this.setState({language:t},this.onSearch)},this.onTitleChange=e=>{this.searchTimeoutID&&window.clearTimeout(this.searchTimeoutID),this.setState({title:e},(()=>{this.searchTimeoutID=window.setTimeout(this.onSearch,500)}))},this.state={language:v(e.defaultSubtitleLanguage),title:""},this.searchTimeoutID=null}componentDidMount(){this.onSearch()}componentDidUpdate(e,t){const{isSubtitlesDownloaded:r,onModalClose:n}=this.props,{isSubtitlesDownloaded:i}=e;!i&&r&&n()}componentWillUnmount(){this.searchTimeoutID&&window.clearTimeout(this.searchTimeoutID)}render(){const{mediaTitle:e,subtitles:t,showSpinner:r,showSearchResults:i,showEmptyMessage:s,hasSubtitlesError:a,subtitlesError:o,subtitlesDownloadKey:l,hasSubtitlesDownloadError:c,subtitlesDownloadError:d,onDownloadSubtitle:u,onModalClose:p}=this.props,{language:m}=this.state;return n.createElement("div",{className:"SubtitlesModalContent-modalContainer-FG6tF2"},n.createElement(D.Z,{onModalClose:p},n.createElement(E.Z,null,(0,Z.Z)("Subtitles")),c?n.createElement("div",null,n.createElement(M.Z,{errorMessage:d})):null,n.createElement(I.Z,{className:"SubtitlesModalContent-modalBody-N_J_lO ModalBody-modalBody-Me4Hwy",scrollDirection:w.Hn},n.createElement("div",{className:"SubtitlesModalContent-inputs-UjrUHR"},n.createElement(S.Z,{className:"SubtitlesModalContent-languageInput-Prodxm SelectInput-input-EWuFb5 input-input-XAtklw",name:"language",value:b[m],values:f,onChange:this.onLanguageChange}),n.createElement(P.Z,{className:"SubtitlesModalContent-titleInput-BOJ3ZB TextInput-input-NqTdW3 input-input-XAtklw",name:"title",placeholder:e,onChange:this.onTitleChange})),r?n.createElement("div",{className:V},n.createElement(C.Z,null)):null,a?n.createElement("div",{className:V},o):null,i?n.createElement(j,{subtitles:t,subtitlesDownloadKey:l,onDownloadSubtitle:u}):null,s?n.createElement("div",{className:V},(0,Z.Z)("No results")):null)))}}const F=U,B=(0,i.$j)((function(){return(0,l.P1)((0,u.Z)("profile"),(0,c.Z)(),d,((e,t={},r)=>{const{Media:n}=t;let i="";if(n&&n.length){const e=n[0].Part;e.length&&(i=(0,p.Z)(e[0].file,55))}const{subtitles:s,isSubtitlesPending:a,isSubtitlesPopulated:o,subtitlesError:l,subtitlesDownloadKey:c,isSubtitlesDownloaded:d,subtitlesDownloadError:u}=r,m=a&&!l,h=o&&!l&&s.length>0,g=o&&!l&&0===s.length;return{mediaTitle:i,defaultSubtitleLanguage:e.defaultSubtitleLanguage,subtitles:s,showSpinner:m,showSearchResults:h,showEmptyMessage:g,subtitlesDownloadKey:c,isSubtitlesDownloaded:d,hasSubtitlesError:!!l,subtitlesError:l,hasSubtitlesDownloadError:!!u,subtitlesDownloadError:u}}))}),(function(e,t){const{metadataItemEntityID:r}=t;return{onFetchSubtitles({language:t,title:n}){e((0,s.ao)({metadataItemEntityID:r,language:t,title:n}))},onDownloadSubtitle(t){const{key:n,codec:i,languageCode:a,providerTitle:o,hearingImpaired:l,forced:c}=t;e((0,s.LL)({metadataItemEntityID:r,key:n,codec:i,language:a,providerTitle:o,hearingImpaired:l,forced:c}))}}}))(F),_=function(e){const{metadataItemEntityID:t,isOpen:r,onModalClose:i}=e;return n.createElement(o.Z,{isOpen:r,metricsPage:a.Wv,onModalClose:i},n.createElement(B,{metadataItemEntityID:t,onModalClose:i}))};var z=Object.defineProperty,H=Object.defineProperties,W=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,K=(e,t,r)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const q={dispatchResetMetadataItemSubtitles:s.kS};class Y extends n.Component{constructor(){super(...arguments),this.onModalClose=()=>{this.props.dispatchResetMetadataItemSubtitles(),this.props.onModalClose()}}render(){return n.createElement(_,(e=((e,t)=>{for(var r in t||(t={}))Q.call(t,r)&&K(e,r,t[r]);if(G)for(var r of G(t))$.call(t,r)&&K(e,r,t[r]);return e})({},this.props),t={onModalClose:this.onModalClose},H(e,W(t))));var e,t}}const X=(0,i.$j)(null,q)(Y)},21298:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(67294),i=r(28216),s=r(75396),a=r(62291),o=r(55949),l=r(22222),c=r(94184),d=r.n(c),u=r(73788),p=r(86192),m=r(18222),h=r(85448),g=r(63135),y=r(74249),v=r(45181),f=r(17516),b=r(37920),Z=r(62003),S=r(36380),P=r(88140);class I extends n.Component{constructor(e,t){super(e,t),this.onDragEnter=(e=window.event)=>{e.preventDefault(),this.dropTargetEnteredCounter++,this.setOverDropTargetState()},this.onDragLeave=(e=window.event)=>{e.preventDefault(),this.dropTargetEnteredCounter--,this.setOverDropTargetState()},this.onFileDrop=e=>{e.preventDefault();const{metadataItemEntityID:t,dispatchUploadSubtitles:r}=this.props;let n;this.setState({isOverDropTarget:!1}),this.dropTargetEnteredCounter=0,e.dataTransfer&&e.dataTransfer.files.length?n=e.dataTransfer.files[0]:e.target.files&&e.target.files.length&&(n=e.target.files[0]),r({metadataItemEntityID:t,file:n})},this.dropTargetEnteredCounter=0,this.state={isOverDropTarget:!1}}componentDidMount(){window.addEventListener("dragover",this.onWindowDragOver),window.addEventListener("drop",this.onWindowDrop)}componentDidUpdate(e){const{isUploading:t,isUploaded:r,onModalClose:n}=this.props;e.isUploading&&!t&&r&&n()}componentWillUnmount(){window.removeEventListener("dragover",this.onWindowDragOver),window.removeEventListener("drop",this.onWindowDrop)}setOverDropTargetState(){this.state.isOverDropTarget||0===this.dropTargetEnteredCounter||this.setState({isOverDropTarget:!0}),this.state.isOverDropTarget&&0===this.dropTargetEnteredCounter&&this.setState({isOverDropTarget:!1})}onWindowDrop(e=window.event){e.preventDefault()}onWindowDragOver(e=window.event){e.preventDefault()}onDragOver(e=window.event){e.dataTransfer.dropEffect="copy"}render(){const{isUploading:e,isUploaded:t,error:r,onModalClose:i}=this.props,{isOverDropTarget:s}=this.state;return n.createElement(P.Z,{onModalClose:i},n.createElement(f.Z,null,(0,u.Z)("Upload Subtitle File")),r?n.createElement(S.Z,{errorMessage:r}):null,n.createElement(g.Z,{className:"SubtitlesUploadModalContent-modalBody-h2_pKb ModalBody-modalBody-Me4Hwy",scrollDirection:b.Hn},n.createElement("div",{className:d()("SubtitlesUploadModalContent-container-LKmNkC",s&&"SubtitlesUploadModalContent-dropHover-xI9YNu"),onDragEnter:e?null:this.onDragEnter,onDragLeave:e?null:this.onDragLeave,onDragOver:e?null:this.onDragOver,onDrop:e?null:this.onFileDrop},e||t?n.createElement("div",{className:"SubtitlesUploadModalContent-uploadingContainer-tAA3W0"},n.createElement(p.Z,{label:(0,u.Z)("Uploading subtitle file")})):n.createElement("div",{className:"SubtitlesUploadModalContent-fileInputContainer-GXzSor"},n.createElement(Z.Z,{buttonText:(0,u.Z)("Choose a file"),className:"SubtitlesUploadModalContent-fileInputLink-jgjnBN",inputComponent:h.Z,name:"subtitleFile",onChange:this.onFileDrop}),n.createElement("span",{className:"SubtitlesUploadModalContent-separator-GJ_jTF"},""),(0,u.Z)("drag and drop")))),n.createElement(y.Z,null,n.createElement(v.Z,null,n.createElement(m.Z,{onPress:i},(0,u.Z)("Cancel")))))}}const E=I,w={dispatchUploadSubtitles:s.mt},C=(0,i.$j)((function(){return(0,l.P1)((e=>e.ui.subtitlesUploadModal),(e=>e))}),w)(E),M=function(e){const{metadataItemEntityID:t,isOpen:r,onModalClose:i}=e;return n.createElement(o.Z,{className:"SubtitlesUploadModal-modal-qCg42l Modal-medium-WiZeBe Modal-modal-eUJhK0",isOpen:r,metricsPage:a.m9,onModalClose:i},n.createElement(C,{metadataItemEntityID:t,onModalClose:i}))};var D=Object.defineProperty,O=Object.defineProperties,T=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const R={dispatchResetUploadSubtitles:s.GO};class L extends n.Component{constructor(){super(...arguments),this.onModalClose=()=>{this.props.dispatchResetUploadSubtitles(),this.props.onModalClose()}}render(){const e=this.props,{dispatchResetUploadSubtitles:t}=e,r=((e,t)=>{var r={};for(var n in e)A.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&x)for(var n of x(e))t.indexOf(n)<0&&k.call(e,n)&&(r[n]=e[n]);return r})(e,["dispatchResetUploadSubtitles"]);return n.createElement(M,(i=((e,t)=>{for(var r in t||(t={}))A.call(t,r)&&N(e,r,t[r]);if(x)for(var r of x(t))k.call(t,r)&&N(e,r,t[r]);return e})({},r),s={onModalClose:this.onModalClose},O(i,T(s))));var i,s}}const j=(0,i.$j)(null,R)(L)},225:(e,t,r)=>{"use strict";r.d(t,{Z:()=>B});var n=r(67294),i=r(62291),s=r(55949),a=r(28216),o=r(22222),l=r(15579),c=r(71741),d=r(25483),u=r(77072),p=r(72735),m=r(70777),h=r(87442),g=r(77054),y=r(80106),v=r(73788),f=r(29012),b=r(18222),Z=r(85448),S=r(37754),P=r(63135),I=r(74249),E=r(17516),w=r(23245),C=r(25555),M=r(37920),D=r(59597),O=r(42985),T=r(17330),x=r(36380),A=r(88140);const k=function(e){const{serverEntityID:t,metadataItemEntityID:r,watchTogetherRoomEntityID:i,users:s,isLoading:a,isInvitePending:o,isInviteCompleted:l,inviteError:c,onModalClose:d,dispatchCreateRoom:u,dispatchInviteUsers:p,hasHomeLibraryAccessLabels:m}=e,[h,g]=(0,n.useState)([]),y=!(0,w.Z)(l)&&l&&!c;(0,n.useEffect)((()=>{y&&d()}),[y,d]);const k=(0,n.useCallback)((e=>h.includes(e.id)),[h]),N=(0,n.useCallback)((e=>{const t=h.includes(e)?h.filter((t=>t!==e)):[...h,e];g(t)}),[h]),R=(0,n.useCallback)((()=>{i?p({watchTogetherRoomEntityID:i,userIDs:h}):u({metadataItemEntityID:r,userIDs:h})}),[r,i,h,u,p]),L=s.length>0;return n.createElement(A.Z,{onModalClose:d},n.createElement(E.Z,null,(0,v.Z)("Watch Together")),c?n.createElement(x.Z,{errorMessage:c}):null,n.createElement(P.Z,{className:"WatchTogetherInviteModalContent-modalBody-nAmPb4 ModalBody-modalBody-Me4Hwy",scrollDirection:M.Hn},a?null:n.createElement("div",{className:"WatchTogetherInviteModalContent-message-uppTzN"},L?(0,v.Z)("Invite friends to watch with you."):n.createElement(f.Z,{message:m?(0,v.Z)("Add friends in {openSpan}Home & Library Access{closeSpan} to watch together."):(0,v.Z)("Add friends in {openSpan}Users & Sharing{closeSpan} to watch together."),tags:[{open:"openSpan",close:"closeSpan",component:Z.Z,kind:C._8,to:"#!/settings/users-sharing"}]})),a?n.createElement("div",{className:"WatchTogetherInviteModalContent-spinnerContainer-yop4P2"},n.createElement(O.Z,null)):null,!a&&L?n.createElement(n.Fragment,null,n.createElement(S.Z,null,m?(0,v.Z)("Friends"):(0,v.Z)("Users")),n.createElement(D.Z,{className:"WatchTogetherInviteModalContent-list-f9GtUR UserList-list-eprPYu Scroller-vertical-nKq0Q8",hasHomeLibraryAccessLabels:m,isUserSelected:k,serverEntityID:t,users:s,onUserSelect:N})):null),n.createElement(I.Z,{className:"WatchTogetherInviteModalContent-modalFooter-whrHpn ModalFooter-modalFooter-IDP5sZ"},n.createElement(b.Z,{onPress:d},(0,v.Z)("Cancel")),n.createElement(T.Z,{isDisabled:o||0===h.length,isSpinning:o,kind:C._8,onPress:R},(0,v.Z)("Invite"))))};var N=Object.defineProperty,R=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,V=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const U={dispatchFetchAllFriends:g.Tp,dispatchCreateRoom:y.dB,dispatchInviteUsers:y.pS,dispatchResetCreateRoom:y.KU},F=(0,a.$j)((function(){return(0,o.P1)((e=>e.ui.watchTogether),u.Z,d.Z,c.Z,(0,o.P1)(((e,{watchTogetherRoomEntityID:t})=>t),p.Z,((e,t)=>t[e])),(0,l.Z)(m.je),((e,t,r,n,i,s)=>({users:r.reduce(((e,t)=>{const r=n[t];return(!i||!i.users.find((e=>e.id===r.id)))&&e.push(r),e}),[]),isLoading:t.isAllFriendsPending,isInvitePending:e.isInvitePending,isInviteCompleted:e.isInviteCompleted,inviteError:e.inviteError,hasHomeLibraryAccessLabels:s})))}),U)((function(e){const t=e,{dispatchFetchAllFriends:r,dispatchResetCreateRoom:i}=t,s=((e,t)=>{var r={};for(var n in e)L.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&R)for(var n of R(e))t.indexOf(n)<0&&j.call(e,n)&&(r[n]=e[n]);return r})(t,["dispatchFetchAllFriends","dispatchResetCreateRoom"]);return(0,n.useEffect)((()=>{(0,h.c9)((()=>{r()}))}),[r]),(0,n.useEffect)((()=>i),[i]),n.createElement(k,((e,t)=>{for(var r in t||(t={}))L.call(t,r)&&V(e,r,t[r]);if(R)for(var r of R(t))j.call(t,r)&&V(e,r,t[r]);return e})({},s))})),B=function(e){const{serverEntityID:t,metadataItemEntityID:r,watchTogetherRoomEntityID:a,metricsProperties:o,isOpen:l,onModalClose:c}=e;return n.createElement(s.Z,{isOpen:l,metricsPage:i.Vg,metricsProperties:o,onModalClose:c},n.createElement(F,{metadataItemEntityID:r,serverEntityID:t,watchTogetherRoomEntityID:a,onModalClose:c}))}},98463:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ee});var n=r(94184),i=r.n(n),s=r(67294),a=r(62208),o=r(20533),l=r(54647),c=r(40621),d=r(22222),u=r(8238),p=r(51146),m=r(27649),h=r(86555),g=r(28629),y=r(85926),v=r(53534),f=r(18622),b=r(11244),Z=r(26759),S=r(57307),P=r(35664),I=r(54834);function E(e,t){const{viewCount:r,viewOffset:n,saved:i}=e;return!(null!=i&&!i)&&(function(e,t){const{isLibraryItem:r,isFolder:n,isExtra:i}=e;return r&&!n&&!i&&t.mediaType===I.pX}(e,t)&&!r&&!n)}var w=r(85209);function C(e,t){const{type:r,saved:n,unviewedLeafCount:i,isLibraryItem:s,isExtra:a}=e;return!(null!=n&&!n)&&(s&&!a&&w.isDirectoryType(r)&&t.mediaType===I.pX&&!!i)}var M=r(36475);function D(e){const{type:t,isLibraryItem:r,isExtra:n,Media:i}=e,s=(0,w.getMetadataType)(t);if(!s)return!1;const a=i.length;return r&&!n&&s.mediaType===I.pX&&a>1}var O=r(93888),T=r(26724),x=r(91479),A=r(25511),k=r(57702),N=r(64800),R=r(44777),L=r(85448),j=r(11113),V=r(28201),U=r(9913),F=r(25432),B=r(61740);function _(e,t,r){const n=t-e,i=r-e;return(0,y.Z)(i,n)}var z=r(96098);class H extends s.Component{constructor(e,t){super(e,t),this.tick=()=>{this.setState(this.getState(this.props)),this.setTickTimeout()},this.state=this.getState(e)}UNSAFE_componentWillMount(){this.setTickTimeout()}UNSAFE_componentWillReceiveProps(e,t){this.setState(this.getState(e))}shouldComponentUpdate(e,t){return(0,o.Z)(this,e,t)}componentWillUnmount(){this.tickTimeout&&window.clearTimeout(this.tickTimeout)}getState({beginsAt:e,endsAt:t}){return{progress:_(e,t,Date.now()/1e3)}}setTickTimeout(){this.tickTimeout=window.setTimeout(this.tick,6e4-Date.now()%6e4)}render(){const e=this.props.className,t=this.state.progress;return t?s.createElement(z.Z,{className:e,progress:t}):null}}const W=H;class G extends s.Component{constructor(e,t){super(e,t),this.onRecordPress=e=>{this.setState({isSubscribeModalOpen:!0})},this.onSubscribeModalClose=()=>{this.setState({isSubscribeModalOpen:!1})},this.state={isSubscribeModalOpen:!1},this._moreButtonID=(0,V.Z)()}shouldComponentUpdate(e,t){return(0,o.Z)(this,e,t)}render(){const{className:e,serverEntityID:t,providerEntityID:r,metadataItemEntityID:n,route:a,type:o,title:l,subscriptionType:c,isSubscribed:d,showLink:u,beginsAt:p,endsAt:m,showPlay:h,showRecord:g,onPlayLiveTVPress:y}=this.props,{isSubscribeModalOpen:v}=this.state;return s.createElement("div",{className:i()(e,"EPGPosterCardOverlay-overlay-ABr7ev")},s.createElement("div",{className:"EPGPosterCardOverlay-background-pkB7QG"}),d?s.createElement("div",{className:"EPGPosterCardOverlay-subscriptionBadge-Eqfzs9 MetadataPosterCardOverlay-badge-L1fayd"},s.createElement(j.Z,{type:c})):null,u?s.createElement(L.Z,{className:"EPGPosterCardOverlay-link-CB8q3P",to:a}):null,s.createElement(W,{beginsAt:p,className:"EPGPosterCardOverlay-progress-HGYvIY PosterCardOverlayProgress-progress-sKteKC",endsAt:m}),h?s.createElement(U.Z,{circleClassName:"EPGPosterCardOverlay-playCircle-haZeDa MetadataPosterCardOverlay-playCircle-g9aUXW PlayButton-playCircle-fK1f_v MetadataPosterCardOverlay-centerCircle-sN9W7e",className:u?"EPGPosterCardOverlay-playButton-d3dDtO RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3 EPGPosterCardOverlay-button-EorK3V MetadataPosterCardOverlay-button-ZHSYaF":"EPGPosterCardOverlay-playCoverButton-DoSJKa EPGPosterCardOverlay-playButton-d3dDtO RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3 EPGPosterCardOverlay-button-EorK3V MetadataPosterCardOverlay-button-ZHSYaF","data-testid":"metadataPosterPlayButton",tabIndex:"-1",title:l,onPress:y}):null,!h&&g?s.createElement(F.Z,{circleClassName:"EPGPosterCardOverlay-recordCircle-aeFjdK RecordIcon-recordCircle-nPg1p4 PlayButton-playCircle-fK1f_v MetadataPosterCardOverlay-centerCircle-sN9W7e",className:u?"EPGPosterCardOverlay-recordButton-OIJXdp RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3 EPGPosterCardOverlay-button-EorK3V MetadataPosterCardOverlay-button-ZHSYaF":"EPGPosterCardOverlay-recordCoverButton-aaTUSB EPGPosterCardOverlay-recordButton-OIJXdp RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3 EPGPosterCardOverlay-button-EorK3V MetadataPosterCardOverlay-button-ZHSYaF","data-testid":"metadataPosterRecordButton",iconClassName:"EPGPosterCardOverlay-recordIcon-jYuN57 RecordIcon-recordIcon-OWFVfW",tabIndex:"-1",title:l,onPress:this.onRecordPress}):null,h&&g?s.createElement(F.Z,{circleClassName:"EPGPosterCardOverlay-recordCircleBottom-df3iiQ EPGPosterCardOverlay-recordCircle-aeFjdK RecordIcon-recordCircle-nPg1p4 PlayButton-playCircle-fK1f_v MetadataPosterCardOverlay-centerCircle-sN9W7e",className:"EPGPosterCardOverlay-recordButtonBottom-B7GZWt EPGPosterCardOverlay-recordButton-OIJXdp RecordButton-recordButton-Rn40ir PlayButton-playButton-vS1WII RecordIcon-recordIconContainer-iZKuO3 EPGPosterCardOverlay-button-EorK3V MetadataPosterCardOverlay-button-ZHSYaF","data-testid":"metadataPosterRecordButton",iconClassName:"EPGPosterCardOverlay-recordIconBottom-umyOEt RecordIcon-recordIcon-OWFVfW",tabIndex:"-1",title:l,onPress:this.onRecordPress}):null,s.createElement(B.Z,{isOpen:v,metadataItemEntityID:n,providerEntityID:r,serverEntityID:t,subscriptionType:o,onModalClose:this.onSubscribeModalClose}))}}const Q=G;var $=r(96029),K=Object.defineProperty,q=Object.defineProperties,Y=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,te=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,re=(e,t)=>{for(var r in t||(t={}))J.call(t,r)&&te(e,r,t[r]);if(X)for(var r of X(t))ee.call(t,r)&&te(e,r,t[r]);return e},ne=(e,t)=>q(e,Y(t));const ie=(0,x.Z)($.Z),se=(0,M.Z)((function(){return(0,d.P1)(((e,{type:t})=>t),((e,{listType:t})=>t),(0,h.Z)(),b.Z,f.Z,Z.Z,(0,T.Z)(),(0,d.P1)((0,h.Z)(),(e=>e&&e.viewOffset?(0,y.Z)(e.viewOffset,e.duration):0)),(0,g.Z)(),(0,v.Z)(),((e,t,r,n={},i={},s={},a,o,l,c)=>{const{subtype:d,title:p,viewCount:m,viewOffset:h,unviewedLeafCount:g,smart:y,icon:v,metadataState:f,mediaState:b,deletedAt:Z,subscriptionID:I,subscriptionType:M,grandparentSubscriptionID:O,grandparentSubscriptionType:T,ratingKey:x,isFolder:R,isPlaylist:L,Media:j}=r,V=(0,A.tW)({server:n,provider:i,stableUser:s,metadataItem:r}),U=!!i.features.subscribe,F=(0,A.J5)({server:n,provider:i,stableUser:s,metadataItem:r}),B=t===w.PHOTO&&(0,A.y7)({server:n,provider:i,stableUser:s,metadataItem:r}),_=t===w.PHOTO&&(0,A.QF)({server:n,provider:i,stableUser:s,metadataItem:r}),z=(0,A.k_)({server:n,provider:i,stableUser:s,metadataItem:r}),H=w.getMetadataType(e),W=w.getLeafType(e),G=!(!H||!W||H.id!==W.id),Q=j.length,$=null!=I||null!=O,K=!!y&&L,q=v===S.nA,Y=f===P.gO,X=f===P.a7||f===P.br,J=!Y&&!X&&!!b,ee=Y||X||J,te=!ee&&!!Z,re=!(!x||!l)&&u.Z.allowSyncDownload;return{server:n,provider:i,route:a,title:p,viewCount:m,viewOffset:h,viewPercent:o,unviewedLeafCount:g,mediaCount:Q,subscriptionType:M||T,type:e,subtype:d,isSubscribed:$,isMultiVersion:D(r),isSmart:K,isFavorite:q,isMatching:Y,isProcessing:X,isAnalyzing:J,isRefreshing:ee,isTrash:te,isLeafType:G,showLink:!!a,showUnplayedBadge:E(r,H),showUnplayedNumberBadge:C(r,W),showPlay:V,showRecord:U,showEdit:F,showFavorite:B,showUnfavorite:_,showSelect:z,showMore:!R,showAvailableOffline:re,beginsAt:c&&c.beginsAt,endsAt:c&&c.endsAt,source:l,ratingKey:x,hasOfflineFile:(0,k.Z)(r),hasOwnSubscription:(0,N.Z)(r)}}))}),(function(e,t){const r={serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,itemServerEntityID:t.itemServerEntityID||t.serverEntityID,itemProviderEntityID:t.itemProviderEntityID||t.providerEntityID,metadataItemEntityID:t.metadataItemEntityID,metricsPage:t.metricsPage,metricsProperties:{context:t.metricsContext}};return{onPlayPress(){e((0,m.wA)(ne(re({},r),{options:{containerKey:t.containerKey,listType:t.listType}})))},onPlayLiveTVPress(){e((0,p.lS)(ne(re({},r),{options:{containerKey:t.containerKey,listType:t.listType}})))},onEditPress(){e((0,O.Cf)(r))},onFavoritePress(){e((0,O.Mk)(r))},onUnfavoritePress(){e((0,O.Nw)(r))}}}),R.Z)((function(e){const t=e,{server:r,provider:n}=t,i=((e,t)=>{var r={};for(var n in e)J.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&X)for(var n of X(e))t.indexOf(n)<0&&ee.call(e,n)&&(r[n]=e[n]);return r})(t,["server","provider"]),a=ne(re({},i),{itemServerEntityID:e.itemServerEntityID||e.serverEntityID,itemProviderEntityID:e.itemProviderEntityID||e.providerEntityID});return n.protocols.livetv?s.createElement(Q,re({},a)):e.showSelect&&!e.showLinkOnly?s.createElement(ie,re({},a)):s.createElement($.Z,re({},a))})),ae={poster:"MetadataPosterCardFace-poster-MwJE1t",face:"MetadataPosterCardFace-face-FcNn6A MetadataPosterCardFace-poster-MwJE1t",isSelected:"MetadataPosterCardFace-isSelected-VgFLbY",faceFront:"MetadataPosterCardFace-faceFront-h7AIDh",faceBack:"MetadataPosterCardFace-faceBack-P7IPxT"};var oe=Object.defineProperty,le=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,ue=(e,t,r)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function pe(e){const t=e,{className:r,serverEntityID:n,providerEntityID:a,metadataItemEntityID:o,itemServerEntityID:l,itemProviderEntityID:d,type:u,subtype:p,selectionType:m,activeSelectionType:h,isSelected:g,isOffscreen:y,visibleFace:v,imageWidth:f,imageHeight:b,imageUrl:Z,disableCrossFade:S,icon:P,backgroundSize:I,isFolder:E,showOverlay:w,onImageLoad:C,onImageError:M,onSelectItem:D,onDeselectItem:O}=t,T=((e,t)=>{var r={};for(var n in e)ce.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&le)for(var n of le(e))t.indexOf(n)<0&&de.call(e,n)&&(r[n]=e[n]);return r})(t,["className","serverEntityID","providerEntityID","metadataItemEntityID","itemServerEntityID","itemProviderEntityID","type","subtype","selectionType","activeSelectionType","isSelected","isOffscreen","visibleFace","imageWidth","imageHeight","imageUrl","disableCrossFade","icon","backgroundSize","isFolder","showOverlay","onImageLoad","onImageError","onSelectItem","onDeselectItem"]);return s.createElement("div",{className:i()(r,ae[v],g&&ae.isSelected)},s.createElement(c.Z,{backgroundSize:I,disableCrossFade:S,height:b,icon:P,isFolder:E,isOffscreen:y,itemProviderEntityID:d,itemServerEntityID:l,providerEntityID:a,serverEntityID:n,subtype:p,type:u,url:Z,width:f,onError:M,onLoad:C}),w?s.createElement(se,((e,t)=>{for(var r in t||(t={}))ce.call(t,r)&&ue(e,r,t[r]);if(le)for(var r of le(t))de.call(t,r)&&ue(e,r,t[r]);return e})({activeSelectionType:h,isSelected:g,itemProviderEntityID:d,itemServerEntityID:l,metadataItemEntityID:o,providerEntityID:a,selectionID:o,selectionType:m,serverEntityID:n,type:u,onDeselectItem:O,onSelectItem:D},T)):null)}pe.defaultProps={className:ae.face,showOverlay:!0};const me=pe;var he=Object.defineProperty,ge=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,fe=(e,t,r)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,be=(e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&fe(e,r,t[r]);if(ge)for(var r of ge(t))ve.call(t,r)&&fe(e,r,t[r]);return e};const Ze="faceFront",Se="faceBack",Pe=(0,a.Z)(l.Z.posterFlipSpeed);class Ie extends s.Component{constructor(e,t){super(e,t),this.onImageLoad=()=>{this.state.isLoadingFace&&this._flipCard()},this.onImageError=()=>{this.state.isLoadingFace&&this._flipCard()},this.onFlipComplete=()=>{this.setState({isFlippingFace:!1,previousImageUrl:null})},this.state={visibleFace:Ze,isLoadingFace:!1,isFlippingFace:!1,previousImageUrl:null}}UNSAFE_componentWillReceiveProps(e){const t=this.props.imageUrl,r=e.imageUrl&&t!==e.imageUrl;this.props.metadataKey===e.metadataKey&&r&&this._prepareFlip(t)}shouldComponentUpdate(e,t){return(0,o.Z)(this,e,t)}componentWillUnmount(){this._cancelFlip()}_prepareFlip(e){this._cancelFlip(),this.setState({isLoadingFace:!0,isFlippingFace:!0,previousImageUrl:e})}_flipCard(){this.setState((e=>({isLoadingFace:!1,visibleFace:e.visibleFace===Ze?Se:Ze})),(()=>{this._flipTimeoutID=window.setTimeout(this.onFlipComplete,Pe)}))}_cancelFlip(){this._flipTimeoutID&&(this._flipTimeoutID=window.clearTimeout(this._flipTimeoutID))}render(){const e=this.props,{className:t,cardClassName:r,cardFaceClassName:n,metadataKey:a,imageWidth:o,imageHeight:l,imageUrl:c}=e,d=((e,t)=>{var r={};for(var n in e)ye.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ge)for(var n of ge(e))t.indexOf(n)<0&&ve.call(e,n)&&(r[n]=e[n]);return r})(e,["className","cardClassName","cardFaceClassName","metadataKey","imageWidth","imageHeight","imageUrl"]),{visibleFace:u,isLoadingFace:p,isFlippingFace:m,previousImageUrl:h}=this.state,g={width:o,height:l};return s.createElement("div",{key:a,className:t,"data-testid":"metadataPosterCard--"+a},s.createElement("div",{className:i()(r,u===Se&&"MetadataPosterCard-isFlipped-TEeFQN"),style:g},u===Ze||m?s.createElement(me,be({key:Ze,className:n,disableCrossFade:m,imageHeight:l,imageUrl:u===Ze&&!p||u===Se&&p?c:h,imageWidth:o,visibleFace:Ze,onImageError:this.onImageError,onImageLoad:this.onImageLoad},d)):null,u===Se||m?s.createElement(me,be({key:Se,className:n,disableCrossFade:m,imageHeight:l,imageUrl:u===Se&&!p||u===Ze&&p?c:h,imageWidth:o,visibleFace:Se,onImageError:this.onImageError,onImageLoad:this.onImageLoad},d)):null))}}Ie.defaultProps={className:"MetadataPosterCard-cardContainer-NlYfYM",cardClassName:"MetadataPosterCard-card-NZOemZ"};const Ee=Ie},20289:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(94184),i=r.n(n),s=r(67294),a=r(57307),o=r(5002),l=r(25231),c=r(94038),d=r(72351);const u=function(e){const{className:t,type:r,width:n,height:u,icon:p}=e,m=function(e){switch(e){case a.Hc:return o.F;case a.SU:return l.y;case a.Bs:return c.V}}(p)||d.Z[r];if(!m)return null;const h={fontSize:Math.max(14,Math.min(Math.round(n/4),42)),lineHeight:`${u}px`},g={width:`${n}px`,height:`${u}px`};return s.createElement("div",{className:i()(t,"MetadataIcon-container-H9R5NB"),style:g},s.createElement("div",{style:h},s.createElement(m,null)))},p=function(e){const{className:t,type:r,icon:n,width:o,height:l,isFolder:c}=e;return s.createElement(u,{className:i()(t,"MetadataPosterCardIcon-placeholderIcon-MZ_UL8"),height:l,icon:c?a.SU:n,type:r,width:o})}},40621:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(15080),s=r(20289);const a=function(e){const{serverEntityID:t,providerEntityID:r,itemServerEntityID:a,itemProviderEntityID:o,type:l,isOffscreen:c,url:d,src:u,width:p,height:m,icon:h,backgroundSize:g,isFolder:y,disableCrossFade:v,onLoad:f,onError:b}=e;return c?null:d||u?n.createElement(i.Z,{backgroundPosition:"artist"===l?"center top":"center",backgroundSize:g,disableCrossFade:v,height:m,providerEntityID:o||r,serverEntityID:a||t,src:u,url:d,width:p,onError:b,onLoad:f}):n.createElement(s.Z,{height:m,icon:h,isFolder:y,type:l,width:p})}},96029:(e,t,r)=>{"use strict";r.d(t,{Z:()=>F});var n=r(94184),i=r.n(n),s=r(67294),a=r(38627),o=r(73788),l=r(85448),c=r(86979),d=r(28201),u=r(31722),p=r(42985),m=r(9913),h=r(337),g=r(59917),y=r(49744),v=r(27330),f=r(56876),b=r(37059),Z=r(62315),S=r(35935),P=r(45697),I=r.n(P),E=r(90558);function w(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-files-560"};i["aria-hidden"]=!t,i.style=n,i.className=E.Z.plexIcon+(r?" "+r:"");const a=[s.createElement.apply(s,["path",{d:"m480 240l0 240-240 0 0-240 240 0m-40 40l-160 0 0 160 160 0 0-160m-40-120l0 40-200 0 0 200-40 0 0-240 240 0m-80-80l0 40-200 0 0 200-40 0 0-240 240 0"}].concat([]))];return t&&a.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(a))}w.propTypes={"aria-label":I().string,className:I().string,style:I().object};const C=w;var M=r(51861),D=r(7360),O=r(73111),T=r(22859);function x(e){const{children:t,backgroundClassName:r,className:n,onMouseEnter:i}=e;return s.createElement("div",{className:n,onMouseEnter:i},s.createElement("div",{className:r}),t)}x.defaultProps={className:"PosterCardOverlay-overlay-l_hHxM",backgroundClassName:"PosterCardOverlay-background-hZYm3p"};const A=x;var k=r(96098);const N="MetadataPosterCardOverlay-overlay-FRiaEy PosterCardOverlay-overlay-l_hHxM",R="MetadataPosterCardOverlay-link-W0BYnl",L="MetadataPosterCardOverlay-selectCoverButton-xZlVyk MetadataPosterCardOverlay-coverButton-q22ofz",j="MetadataPosterCardOverlay-favoriteButton-sQftvV MetadataPosterCardOverlay-button-ZHSYaF",V="MetadataPosterCardOverlay-refreshingCircle-tRgtNG MetadataPosterCardOverlay-centerCircle-sN9W7e";class U extends s.Component{constructor(e,t){super(e,t),this.onActionsMenuOpenChange=e=>{this.setState({isActionsMenuOpen:e})},this.state={isActionsMenuOpen:!1},this._selectButtonID=(0,d.Z)()}render(){const{className:e,serverEntityID:t,providerEntityID:r,itemServerEntityID:n,itemProviderEntityID:d,metadataItemEntityID:P,containerKey:I,listType:E,metricsContext:w,route:x,title:U,viewPercent:F,unviewedLeafCount:B,mediaCount:_,hasOfflineFile:z,hasOwnSubscription:H,isSubscribed:W,isMultiVersion:G,isSmart:Q,isFavorite:$,isMatching:K,isProcessing:q,isAnalyzing:Y,isRefreshing:X,isTrash:J,showUnplayedBadge:ee,showUnplayedNumberBadge:te,showLink:re,showLinkOnly:ne,showPlay:ie,showEdit:se,showSelect:ae,showMore:oe,showFavorite:le,showUnfavorite:ce,showRemove:de,showAvailableOffline:ue,canDrag:pe,hasActiveSelection:me,isSelected:he,isOtherItemSelected:ge,isConflictingTypeSelected:ye,isModifierKeyPressed:ve,isDragging:fe,isLeafType:be,source:Ze,ratingKey:Se,onMouseEnter:Pe,onPlayPress:Ie,onEditPress:Ee,onFavoritePress:we,onUnfavoritePress:Ce,onRemovePress:Me,onSelectPress:De,onDeselectPress:Oe}=this.props,{isActionsMenuOpen:Te}=this.state,xe=ae&&(ve||ge);if(ne)return s.createElement("div",{className:i()(e,N)},re?s.createElement(l.Z,{className:R,to:x}):null);const Ae=me||fe||ve||X||J,ke=Te,Ne=Te||fe||X||J,Re=W||H||be&&z;return s.createElement(A,{backgroundClassName:i()("MetadataPosterCardOverlay-background-QgYqRU PosterCardOverlay-background-hZYm3p",Ae&&"MetadataPosterCardOverlay-selectedBackground-QSrzqz PosterCardOverlay-selectedBackground-D7ycxS",ke&&"MetadataPosterCardOverlay-hoverBackground-LA0oVv PosterCardOverlay-hoverBackground-xWaPWd",Ne&&"MetadataPosterCardOverlay-visibleBackground-vsHAoI PosterCardOverlay-visibleBackground-oWQOGI"),className:i()(e,N,me&&"MetadataPosterCardOverlay-hasActiveSelection-d9HbjG",he&&"MetadataPosterCardOverlay-isSelected-bnymN5",ye&&"MetadataPosterCardOverlay-isConflictingTypeSelected-Xq8FSg",ae&&ve&&"MetadataPosterCardOverlay-isModifierKeyPressed-ACMOvM",fe&&"MetadataPosterCardOverlay-isDragging-IcNboQ",Te&&"MetadataPosterCardOverlay-isActionsMenuOpen-f7Ukj_"),onMouseEnter:Pe},ee?s.createElement("div",{className:"MetadataPosterCardOverlay-unplayedTagContainer-mxYXS9","data-testid":"metadataPosterUnwatchedBadge"},s.createElement("div",{className:"MetadataPosterCardOverlay-unplayedTag-VGxMvC MetadataPosterCardOverlay-unplayedBadge-FBTTQ2 MetadataPosterCardOverlay-badge-L1fayd"})):null,te?s.createElement("div",{className:"MetadataPosterCardOverlay-unplayedBadge-FBTTQ2 MetadataPosterCardOverlay-badge-L1fayd","data-testid":"metadataPosterUnwatchedNumberBadge"},B):null,G&&!Re?s.createElement("div",{className:"MetadataPosterCardOverlay-versionBadge-lbqUXP MetadataPosterCardOverlay-topLeftBadge-QG1bpC MetadataPosterCardOverlay-badge-L1fayd","data-testid":"metadataPosterMultipleVersionBadge"},s.createElement(C,{className:"MetadataPosterCardOverlay-versionBadgeIcon-phkIf_"}),_):null,!Q||$||Re?null:s.createElement("div",{className:"MetadataPosterCardOverlay-smartBadge-y4tGL1 MetadataPosterCardOverlay-topLeftBadge-QG1bpC MetadataPosterCardOverlay-badge-L1fayd","data-testid":"metadataPosterSmartBadge"},s.createElement(O.Z,{className:"MetadataPosterCardOverlay-smartBadgeIcon-sZRyIF"})),Q&&$&&!Re?s.createElement("div",{className:"MetadataPosterCardOverlay-favoriteBadge-h4Nuw6 MetadataPosterCardOverlay-topLeftBadge-QG1bpC MetadataPosterCardOverlay-badge-L1fayd","data-testid":"metadataPosterFavoriteBadge"},s.createElement(S.Z,{className:"MetadataPosterCardOverlay-favoriteBadgeIcon-ZskkRS"})):null,F?s.createElement(k.Z,{className:"MetadataPosterCardOverlay-progress-Zh0uGv PosterCardOverlayProgress-progress-sKteKC",progress:F}):null,X?s.createElement("div",{className:"MetadataPosterCardOverlay-refreshingSpinnerContainer-K7t1sr"},s.createElement(p.Z,{className:"MetadataPosterCardOverlay-refreshingSpinner-OBxD_L"})):null,K?s.createElement("div",{className:V},s.createElement(D.Z,{"aria-label":(0,o.Z)("Matching")})):null,q?s.createElement("div",{className:V},s.createElement(T.Z,{"aria-label":(0,o.Z)("Downloading Metadata")})):null,Y?s.createElement("div",{className:V},s.createElement(f.Z,{"aria-label":(0,o.Z)("Analyzing")})):null,J?s.createElement("div",{className:"MetadataPosterCardOverlay-trashCircle-OHqHSD MetadataPosterCardOverlay-centerCircle-sN9W7e"},s.createElement(a.I,{"aria-label":(0,o.Z)("In Trash")})):null,re?s.createElement(l.Z,{className:R,to:x}):null,xe&&!ye?s.createElement(l.Z,{className:L,onPress:De}):null,xe&&ye?s.createElement(c.Z,{className:L,component:l.Z,hideOnPress:!1,showOnFocus:!1,tooltip:(0,o.Z)("A different type is selected"),tooltipAttachment:u.jO,tooltipTarget:this._selectButtonID}):null,ue?s.createElement(g.Z,{className:"MetadataPosterCardOverlay-hasSubscriptionBadge-pren8V DownloadIcon-downloadIcon-x4iupc PlexIcon-plexIcon-a5zCNX MetadataPosterCardOverlay-topLeftBadge-QG1bpC MetadataPosterCardOverlay-badge-L1fayd",hasOfflineFile:z,hasOwnSubscription:H,ratingKey:Se,showShadow:!0,source:Ze}):null,ue?s.createElement(y.Z,{metadataItemEntityID:P,providerEntityID:d}):null,ie?s.createElement(m.Z,{circleClassName:"MetadataPosterCardOverlay-playCircle-g9aUXW PlayButton-playCircle-fK1f_v MetadataPosterCardOverlay-centerCircle-sN9W7e",className:re?"MetadataPosterCardOverlay-playButton-vL2csp PlayButton-playButton-vS1WII MetadataPosterCardOverlay-button-ZHSYaF":"MetadataPosterCardOverlay-playCoverButton-We6NqK MetadataPosterCardOverlay-playButton-vL2csp PlayButton-playButton-vS1WII MetadataPosterCardOverlay-button-ZHSYaF",component:pe?"div":"button","data-testid":"metadataPosterPlayButton",tabIndex:"-1",title:U,onPress:Ie}):null,se?s.createElement(l.Z,{"aria-label":(0,o.Z)("Edit {title}",{title:U}),className:"MetadataPosterCardOverlay-editButton-SiNXfV MetadataPosterCardOverlay-button-ZHSYaF","data-testid":"metadataPosterEditButton",tabIndex:"-1",onPress:Ee},s.createElement(b.Z,null)):null,le&&!Re?s.createElement(l.Z,{"aria-label":(0,o.Z)("Add {title} to favorites",{title:U}),className:j,"data-testid":"metadataPosterFavoriteButton",tabIndex:"-1",onPress:we},s.createElement(Z.Z,null)):null,ce&&!Re?s.createElement(l.Z,{"aria-label":(0,o.Z)("Remove {title} from favorites",{title:U}),className:j,"data-testid":"metadataPosterUnfavoriteButton",tabIndex:"-1",onPress:Ce},s.createElement(S.Z,null)):null,de?s.createElement(l.Z,{"aria-label":(0,o.Z)("Remove {title}",{title:U}),className:"MetadataPosterCardOverlay-removeButton-qdOQvw MetadataPosterCardOverlay-button-ZHSYaF",tabIndex:"-1",onPress:Me},s.createElement(M.Z,null)):null,oe?s.createElement(v.Z,{className:"MetadataPosterCardOverlay-moreButton-l1UTa_ MetadataPosterCardOverlay-button-ZHSYaF",containerKey:I,"data-testid":"metadataPosterMoreButton",isMenuOpen:Te,itemProviderEntityID:d,itemServerEntityID:n,listType:E,metadataItemEntityID:P,metricsContext:w,providerEntityID:r,serverEntityID:t,showEdit:!1,showPlay:!1,showQueuePlexMix:!1,tabIndex:"-1",onMenuOpenChange:this.onActionsMenuOpenChange}):null,ae?s.createElement(h.Z,{circleClassName:"MetadataPosterCardOverlay-selectCircle-alQxr1 SelectButton-selectCircle-TVtowg",className:"MetadataPosterCardOverlay-selectButton-ZI8nkD SelectButton-selectButton-_goGWp MetadataPosterCardOverlay-button-ZHSYaF",id:this._selectButtonID,isDisabled:ye,isSelected:he,tabIndex:"-1",title:U,onPress:De}):null,he?s.createElement(l.Z,{className:"MetadataPosterCardOverlay-deselectCoverButton-oohVAs MetadataPosterCardOverlay-coverButton-q22ofz",onPress:Oe}):null)}}const F=U},23226:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(94184),i=r.n(n),s=r(67294);const a=function(e){const{imageWidth:t,imageHeight:r,isSelected:n}=e,a={width:t,height:r};return s.createElement("div",{className:i()("MetadataPosterCardPlaceholder-placeholder-JeIFFv MetadataPosterCardFace-poster-MwJE1t",n&&"MetadataPosterCardPlaceholder-isSelected-Ld0GVF MetadataPosterCardFace-isSelected-VgFLbY"),style:a})}},56572:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(94184),i=r.n(n),s=r(67294);var a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){var t=e,{className:r,component:n,isSecondary:a,isDoubleLine:u,isSplitLine:p}=t,m=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(t,["className","component","isSecondary","isDoubleLine","isSplitLine"]);return s.createElement(n,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({className:i()(r,u?"MetadataPosterTitle-doubleLineTitle-uSHzce MetadataPosterTitle-title-bvCBDN":"MetadataPosterTitle-singleLineTitle-e8SSfL MetadataPosterTitle-title-bvCBDN",a&&"MetadataPosterTitle-isSecondary-lJfKBu",p&&"MetadataPosterTitle-isSplitLine-eazQzl")},m))}},96098:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);class i extends n.Component{constructor(e,t){super(e,t),this.state={progress:e.progress}}UNSAFE_componentWillReceiveProps(e){this.setState({progress:e.progress})}render(){const e=this.props.className,t=this.state.progress;return n.createElement("div",{className:e},n.createElement("div",{className:"PosterCardOverlayProgress-progressTrack-qdWcXY"}),n.createElement("div",{className:"PosterCardOverlayProgress-progressBar-ghFq11",style:{transform:`translate3d(-${100-t}%, 0, 0)`}}))}}i.defaultProps={progress:"PosterCardOverlayProgress-progress-sKteKC"};const s=i},27387:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i(e){const{attributionLogo:t}=e;return n.createElement("img",{className:"AttributionLogo-img-yiDFML",src:t})}},30750:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(99184);const s=function({className:e,grandparentTitle:t}){return n.createElement(i.Z,{className:e,title:t})}},91023:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(22222),i=r(86555),s=r(18622),a=r(11244),o=r(36475),l=r(30547),c=r(67294),d=r(356);const u=(0,o.Z)((function(){return(0,n.P1)(((e,{metricsContext:t})=>t),a.Z,s.Z,(0,i.Z)(),((e,t,r,n={})=>{const i={};return e&&(i.context=e),{grandparentTitle:n.grandparentTitle,grandparentRoute:(0,l.Z)(t,r,n.grandparentKey,i)}}))}))((function({className:e,tabIndex:t,grandparentTitle:r,grandparentRoute:n}){return c.createElement(d.Z,{className:e,route:n,tabIndex:t,title:r})}))},99184:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);const i=function({className:e,title:t}){return n.createElement("span",{className:e,title:t},t)}},23944:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),i=r(16983),s=r(52901),a=r(39041),o=r(57538),l=r(72066),c=r(57609),d=r(21411),u=r(73788),p=r(84419),m=r(20533);const h=6e4;function g({beginsAt:e,endsAt:t,channel:r,showChannel:n,showFullTime:p,timeFormat:m}){if(!e)return(0,u.Z)("No upcoming airings");if((0,d.Z)(e,t)){const e=t-Date.now()/1e3;return e<=60?(0,u.Z)("About to end"):(0,o.Z)(e)}if((0,l.Z)(e)&&(0,c.Z)(e,{minutes:60})){const t=1e3*e-Date.now();if(t<=h)return n&&r?(0,u.Z)("Starting now on {channel}",{channel:r}):(0,u.Z)("Starting now");const i=(0,a.Z)(t);return n&&r?(0,u.Z)("Starting in {duration} on {channel}",{duration:i,channel:r}):(0,u.Z)("Starting in {duration}",{duration:i})}return(p?i.Z:s.Z)(e,n&&r,{timeFormat:m})}class y extends n.Component{constructor(e,t){super(e,t),this.onTickTimeout=()=>{this.setState(this.getState(this.props)),this.setTickTimeout()},this.state=this.getState(e)}componentDidMount(){this.setTickTimeout()}UNSAFE_componentWillReceiveProps(e){const t=this.getState(e);t.title!==this.state.title&&this.setState(t)}shouldComponentUpdate(e,t){return(0,m.Z)(this,e,t)}componentWillUnmount(){this.tickTimeout&&window.clearTimeout(this.tickTimeout)}getState(e){return{title:g(e)}}setTickTimeout(){this.tickTimeout=window.setTimeout(this.onTickTimeout,h-Date.now()%h)}render(){const{className:e,beginsAt:t,endsAt:r,channel:i,showChannel:s}=this.props,{title:a}=this.state,o=s&&!!i&&(0,d.Z)(t,r);return n.createElement("span",{className:e},o?n.createElement("span",null,(0,u.Z)("Now on {channel}",{channel:i}),n.createElement(p.Z,{className:"MetadataTitleAirDate-separator-INgZna DashSeparator-separator-_3fMys"}),a):a)}}y.defaultProps={showFullTime:!1,showChannel:!1};const v=y},33578:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(28216),i=r(22222),s=r(86555),a=r(99184);const o=(0,n.$j)((function(){return(0,i.P1)((0,s.Z)(),((e={})=>({title:e.title})))}))(a.Z)},62618:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(28216),i=r(22222),s=r(86555),a=r(67294),o=r(60795);const l=(0,n.$j)((function(e,t){return(0,i.P1)((0,s.Z)(),((e={})=>({rating:e.rating,ratingImage:e.ratingImage,audienceRating:e.audienceRating,audienceRatingImage:e.audienceRatingImage})))}))((function({className:e,rating:t,ratingImage:r,audienceRating:n,audienceRatingImage:i}){return t||n?a.createElement("span",{className:e},a.createElement(o.Z,{audienceRating:n,audienceRatingImage:i,rating:t,ratingImage:r})):null}))},62466:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(39041);const s=function({className:e,duration:t}){return t?n.createElement("span",{className:e},(0,i.Z)(t)):null}},77613:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(84419),s=r(356),a=r(2727);const o=function({className:e,tabIndex:t,title:r,index:o,route:l,parentTitle:c,parentIndex:d,parentRoute:u,originallyAvailableAt:p}){return n.createElement("span",{className:e},n.createElement(a.Z,{index:o,originallyAvailableAt:p,parentIndex:d,parentRoute:u,parentTitle:c,route:l,tabIndex:t,title:r}),r?n.createElement(i.Z,null):null,r?n.createElement(s.Z,{route:l,tabIndex:t,title:r}):null)}},57557:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(22222),i=r(86555),s=r(73701),a=r(62934),o=r(36475),l=r(30547),c=r(77613);const d=(0,o.Z)((function(){return(0,n.P1)(((e,{metricsContext:t})=>t),a.Z,s.Z,(0,i.Z)(),((e,t,r,n={})=>{const i={};return e&&(i.context=e),{title:n.title,index:n.index,route:(0,l.Z)(t,r,n.key,i),parentTitle:n.parentTitle,parentIndex:n.parentIndex,parentRoute:n.skipParent?null:(0,l.Z)(t,r,n.parentKey,i),originallyAvailableAt:n.originallyAvailableAt}}))}))(c.Z)},356:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(85448);const s=function({className:e,tabIndex:t,title:r,route:s}){return r?s?n.createElement(i.Z,{className:e,"data-testid":"metadataTitleLink",tabIndex:t,title:r,to:s},r):n.createElement("span",{className:e,title:r},r):null}},91564:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(22222),i=r(86555),s=r(36475),a=r(26724),o=r(356);const l=(0,s.Z)((function(){return(0,n.P1)((0,i.Z)(),(0,a.Z)(),((e={},t)=>({title:e.title,route:t})))}))(o.Z)},2727:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(67294),i=r(39061),s=r(40645),a=r(84419),o=r(85448);const l=function(e){const{className:t,tabIndex:r,title:l,index:c,route:d,parentTitle:u,parentIndex:p,parentRoute:m,originallyAvailableAt:h}=e,g=(0,s.Z)({seasonIndex:p,noLeadingZero:!0}),y=(0,i.Z)({episodeIndex:c,date:h,noLeadingZero:!0});return d&&m?n.createElement("span",{className:t},c>0&&g?n.createElement(o.Z,{tabIndex:r,title:u,to:m},g):null,c>0&&g?n.createElement(a.Z,{separator:""}):null,n.createElement(o.Z,{tabIndex:r,title:l,to:d},y)):n.createElement("span",{className:t},c>0&&g?n.createElement("span",null,g):null,c>0&&g?n.createElement(a.Z,{separator:""}):null,n.createElement("span",null,y))}},18598:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(22222),i=r(86555),s=r(18622),a=r(11244),o=r(36475),l=r(30547),c=r(67294),d=r(84419),u=r(356);const p=(0,o.Z)((function(){return(0,n.P1)(((e,{metricsContext:t})=>t),((e,{skipGrandparent:t})=>t),a.Z,s.Z,(0,i.Z)(),((e,t,r,n,i={})=>{const s={};return e&&(s.context=e),{skipParent:i.skipParent,skipGrandparent:t,parentTitle:i.parentTitle,parentRoute:(0,l.Z)(r,n,i.parentKey,s),grandparentTitle:i.originalTitle||i.grandparentTitle,grandparentRoute:(0,l.Z)(r,n,i.grandparentKey,s)}}))}))((function({className:e,tabIndex:t,skipParent:r,skipGrandparent:n,parentTitle:i,parentRoute:s,grandparentTitle:a,grandparentRoute:o}){return c.createElement("span",{className:e},n?null:c.createElement(u.Z,{route:o,tabIndex:t,title:a}),!i||r||n?null:c.createElement(d.Z,null),r?null:c.createElement(u.Z,{route:s,tabIndex:t,title:i}))}))},37787:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(45697),i=r.n(n),s=r(67294),a=r(28216),o=r(22222),l=r(86555),c=r(18622),d=r(54877),u=r(39169),p=r(86418),m=r(70777),h=r(36475),g=r(93888),y=r(97593),v=r(15058),f=r(82877),b=r(28589),Z=r(73788),S=r(42613);const P=function({className:e,value:t,hasPhaseOneCommunityFeatures:r,onRatingChange:n}){return s.createElement("span",{className:e},r?s.createElement(b.o,{"aria-label":(0,Z.Z)("Rate"),value:null!=t?t:0,onChange:n}):s.createElement(S.Z,{value:t,onRatingChange:n}))};var I=Object.defineProperty,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const D=(0,a.$j)(d.Z)((0,h.Z)((function(e,t){return(0,o.P1)(c.Z,(0,l.Z)(),(0,o.P1)(y.Z,((e,{providerEntityID:t})=>t),((e,t)=>!!e&&e.providers.length>1&&e.providers.includes(t))),(0,v.Z)(m.hq),((e,{hideUnrated:t})=>t),((e,t={},r,n,i)=>{const s=e&&e.features[p.Z.ACTIONS][u.zw]&&!t.isFolder&&!r,a=n?1:2,o=(t.userRating||0)/a;return{showRating:!(!s||i&&0===o),value:o,hasPhaseOneCommunityFeatures:n}}))}),(function(e,t){const r=(0,f.i)(m.hq);return{onRatingChange(n){const i=r?1:2;e((0,g.hO)({metadataItemEntityID:t.metadataItemEntityID,providerEntityID:t.itemProviderEntityID,rating:0===n?-1:n*i,metricsPage:t.metricsPage}))}}}))((function(e){const t=e,{showRating:r}=t,n=((e,t)=>{var r={};for(var n in e)w.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&E)for(var n of E(e))t.indexOf(n)<0&&C.call(e,n)&&(r[n]=e[n]);return r})(t,["showRating"]);return r?s.createElement(P,((e,t)=>{for(var r in t||(t={}))w.call(t,r)&&M(e,r,t[r]);if(E)for(var r of E(t))C.call(t,r)&&M(e,r,t[r]);return e})({},n)):null})));D.propTypes={hideUnrated:i().bool};const O=D},8135:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);const i=function({className:e,year:t}){return n.createElement("span",{className:e,"data-testid":"metadataYear"},t)}},15928:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(28216),i=r(22222),s=r(86555),a=r(8135);const o=(0,n.$j)((function(){return(0,i.P1)((0,s.Z)(),((e={})=>({year:e.year})))}))(a.Z)},85167:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(67294),i=r(84419),s=r(28216),a=r(22222),o=r(54562),l=r(87880),c=r(94450),d=r(58790),u=r(73788);var p=r(45924);var m=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Z={audio:function(e){const{stream:t,separatorComponent:r}=e,i=[];var s,a;t.codec&&i.push((a=t.codec)?"dca"===a?"DTS":a.toUpperCase():""),t.channels&&i.push((s=t.channels,(s=parseInt(s,10))?s<2?(0,u.Z)("Mono"):s<3?(0,u.Z)("Stereo"):(s-1).toString()+".1":""));const o=(null==t?void 0:t.language)||(0,u.Z)("Unknown"),l=i&&i.length>0?i.join(" "):null,c=l?(0,u.Z)("{label}, {details}",{label:o,details:l}):o;return n.createElement("span",{"aria-label":c,"data-testid":"audioStream"},o,l?n.createElement(r,null):null,l)},subtitles:function(e){const{stream:t,separatorComponent:r}=e,i=[];t.codec&&i.push(t.codec.toUpperCase()),t.key&&i.push((0,u.Z)("External")),t.forced&&i.push((0,u.Z)("Forced"));const s=t.language||(0,u.Z)("Unknown"),a=i&&i.length>0?i.join(" "):null,o=a?(0,u.Z)("{label}, {details}",{label:s,details:a}):s;return n.createElement("span",{"aria-label":o,"data-testid":"subtitlesStream"},s,a?n.createElement(r,null):null,a)},video:function(e){const{mediaItem:t,separatorComponent:r}=e;let i;t.videoCodec&&(i=[t.videoCodec.toUpperCase()]);const s=(0,d.Z)(t),a=s&&s.scanType,o=(0,p.Z)(t.videoResolution,a)||(0,u.Z)("Unknown"),l=i&&i.length>0?i.join(" "):null,c=l?(0,u.Z)("{label}, {details}",{label:o,details:l}):o;return n.createElement("span",{"aria-label":c,"data-testid":"videoStream"},o,l?n.createElement(r,null):null,l)}},S=(0,s.$j)((function(){return(0,a.P1)((0,l.Z)(),(e=>({isDisplayTitleSupported:e.isCloud||(0,c.Z)(e.shortVersion,o.Z.streamDisplayTitles)})))}))((function(e){const t=e,{type:r,stream:i,mediaItem:s,isDisplayTitleSupported:a}=t,o=((e,t)=>{var r={};for(var n in e)v.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&y)for(var n of y(e))t.indexOf(n)<0&&f.call(e,n)&&(r[n]=e[n]);return r})(t,["type","stream","mediaItem","isDisplayTitleSupported"]);if(!i&&!s)return n.createElement("span",{"data-testid":`${r}Stream`},(0,u.Z)("None"));if(a){let e;if("video"===r){const t=(0,d.Z)(s);e=t?t.displayTitle:(0,u.Z)("None")}else e=i.displayTitle||i.language;return n.createElement("span",{"aria-label":e,"data-testid":`${r}Stream`},e)}const l=Z[r];return n.createElement(l,(c=((e,t)=>{for(var r in t||(t={}))v.call(t,r)&&b(e,r,t[r]);if(y)for(var r of y(t))f.call(t,r)&&b(e,r,t[r]);return e})({},o),h(c,g({mediaItem:s,stream:i}))));var c}));var P=Object.defineProperty,I=Object.defineProperties,E=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,D=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const O=function(e){return n.createElement(S,(t=((e,t)=>{for(var r in t||(t={}))C.call(t,r)&&D(e,r,t[r]);if(w)for(var r of w(t))M.call(t,r)&&D(e,r,t[r]);return e})({},e),r={separatorComponent:i.Z},I(t,E(r))));var t,r}},75126:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(5103),s=r(20533),a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class u extends n.Component{shouldComponentUpdate(e,t){return(0,s.Z)(this,e,t)}render(){const e=this.props,{children:t,iconComponent:r,label:s,isMenuOpen:a}=e,u=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(e,["children","iconComponent","label","isMenuOpen"]);return n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({"aria-haspopup":!0,"data-testid":"toolbarMore",hideOnPress:!1,tooltip:a?void 0:s},u),n.createElement(r,null),t)}}const p=u},92450:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(10023),s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){return n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({},e))}d.defaultProps={className:"FullPage-container-yJVGyN FullPage-container-BafTyc"};const u=d},97257:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(67294),i=r(86832),s=r(56791),a=r(15598),o=r(28185),l=r(52338),c=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&g(e,r,t[r]);return e};const v=function(e){const t=e,{children:r,metricsPage:i,metricsProperties:s,isMetricsDelegated:c}=t,g=((e,t)=>{var r={};for(var n in e)m.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["children","metricsPage","metricsProperties","isMetricsDelegated"]);return n.createElement(a.Z,(v=y({},s),d(v,u({isDelegated:c,page:i}))),n.createElement(o.Z,y({className:l.Z.page},g),r));var v};var f=Object.defineProperty,b=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class I extends n.Component{constructor(e,t){super(e,t),this.state={hasError:!1}}componentDidCatch(e){i.Z.error(e),this.setState({hasError:!0})}render(){const{hasError:e}=this.state;return e?n.createElement(s.Z,null):n.createElement(v,((e,t)=>{for(var r in t||(t={}))Z.call(t,r)&&P(e,r,t[r]);if(b)for(var r of b(t))S.call(t,r)&&P(e,r,t[r]);return e})({},this.props))}}const E=I},30471:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(28185);var s=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){var t=e,{children:r,innerClassName:s}=t,d=((e,t)=>{var r={};for(var n in e)o.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r})(t,["children","innerClassName"]);return n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&c(e,r,t[r]);return e})({className:"PageContent-pageContent-rk0p0C"},d),n.createElement("div",{className:s},r))}d.defaultProps={innerClassName:"PageContent-innerPageContent-m6ARXd"};const u=d},28185:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(8067),s=r(79864),a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class u extends n.Component{constructor(e,t){super(e,t),this.onScrollPositionChange=({scrollTop:e})=>{this.state.isScrolling||(this._currentScrollTop=e)},this.state={isScrolling:!1},this._positionKey=s.Z.getKey(e.scrollPositionKey),this._currentScrollTop=0,this._restoreScrollDelay=e.smoothScroll?e.smoothScrollDuration:e.restoreScrollDelay,this._restoreScroll=!1,this._restoreScrollTimeoutID=null}componentDidMount(){this._restoreScrollPosition()}componentDidUpdate(e){const{scrollPositionKey:t}=this.props;e.scrollPositionKey!==t&&(this._positionKey=s.Z.getKey(t))}componentWillUnmount(){this._storeScrollPosition(),this._restoreScrollTimeoutID&&window.clearTimeout(this._restoreScrollTimeoutID)}_restoreScrollPosition(){const e=s.Z.get(this._positionKey);e&&(this.setState({isScrolling:!0}),this._currentScrollTop=e.scrollTop,this._restoreScroll=!0,this._restoreScrollTimeoutID=window.setTimeout((()=>{this.setState({isScrolling:!1}),this._restoreScroll=!1}),this._restoreScrollDelay))}_storeScrollPosition(){s.Z.set(this._positionKey,{scrollTop:this._currentScrollTop})}render(){const e=this.props,{children:t,className:r,restoreScrollDelay:s,scrollPositionKey:a}=e,u=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(e,["children","className","restoreScrollDelay","scrollPositionKey"]);return n.createElement(i.Z,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({className:r,restoreScroll:this._restoreScroll,scrollTop:this._currentScrollTop,onScrollPositionChange:this.onScrollPositionChange},u),t)}}u.defaultProps={restoreScrollDelay:100,scrollPositionKey:"scrollPosition",smoothScroll:!0,smoothScrollDuration:400};const p=u},42674:(e,t,r)=>{"use strict";r.d(t,{Z:()=>J});var n=r(45697),i=r.n(n),s=r(28216),a=r(22222),o=r(87880),l=r(20573),c=r(86622),d=r(60590),u=r(67294),p=r(42985),m=r(10033),h=r(87442);class g extends u.Component{componentDidMount(){this._populate(this.props)}componentDidUpdate(e){const{machineIdentifier:t}=this.props;t&&t!==e.machineIdentifier&&this._populate(this.props)}_populate(e){const{machineIdentifier:t,dispatchSetPrimaryServer:r}=e;t&&(0,h.c9)((()=>{r({machineIdentifier:t})}))}render(){return u.createElement(u.Fragment,null,this.props.children)}}const y={dispatchSetPrimaryServer:m.qO},v=(0,s.$j)(null,y)(g);var f=r(22478),b=r(85633),Z=r(23681),S=r(58024),P=r(5977),I=r(45191),E=r(75404),w=r(62291),C=r(73788),M=r(18222),D=r(85448),O=r(25555),T=r(69281),x=r(6459),A=r(15867),k=r(62365),N=r(1582);const R={dispatchDismissUnclaimedServer:S.EK},L=(0,s.$j)((function(){return(0,a.P1)((0,o.Z)(),Z.Z,((e,t)=>({machineIdentifier:e.machineIdentifier,friendlyName:e.friendlyName,isPlexAccountRequired:t})))}),R)((function(e){const{machineIdentifier:t,friendlyName:r,isPlexAccountRequired:n,dispatchDismissUnclaimedServer:i}=e,s=(0,P.k6)(),a=(0,u.useCallback)((()=>{s.push(x.Z.login)}),[s]),o=(0,u.useCallback)((()=>{(0,I.DB)("metrics").trackClick({page:w.yl,action:E.ql})}),[]),l=(0,u.useCallback)((()=>{(0,I.DB)("metrics").trackClick({page:w.yl,action:E.GP}),i({machineIdentifier:t})}),[t,i]);return u.createElement(k.Z,{description:(0,C.Z)("Claiming this server will associate it with your Plex account. This helps your devices find each other and helps keep your media safe."),title:(0,C.Z)("{friendlyName} server is unclaimed and not secure",{friendlyName:r})},n?u.createElement(M.Z,{kind:O._8,size:T.ln,onPress:a},(0,C.Z)("Sign in to claim this server")):u.createElement(M.Z,{kind:O._8,size:T.ln,to:(0,N.Z)(t,"settings","general"),onPress:o},(0,C.Z)("Claim it now")),u.createElement(A.Z,null,u.createElement(D.Z,{kind:O._8,size:T.HC,onPress:l},(0,C.Z)("Don't show this again"))))}));var j=r(54562),V=r(94450),U=r(65935),F=r(20683);const B=(0,s.$j)((function(){return(0,a.P1)((0,o.Z)(),(e=>({machineIdentifier:e.machineIdentifier,friendlyName:e.friendlyName,activeConnectionUri:e.activeConnection.uri,shouldUseNewSettingsRoutes:(0,V.Z)(e.version,j.Z.bundledWebAppNewSettingsRoutes),isShared:e.isShared})))}))((function(e){const{machineIdentifier:t,friendlyName:r,activeConnectionUri:n,shouldUseNewSettingsRoutes:i,isShared:s}=e;let a;r&&(a=(0,C.Z)("The server {1} is out of date and cannot be used.",r)),a=a+" "+(0,C.Z)("This version of {productName} requires Plex Media Server {minServerVersion} or higher.",{productName:U.Z.prop("X-Plex-Product"),minServerVersion:"1.18.3"});let o="/web/index.html";return s||(o+=i?(0,N.Z)(t,"settings","general"):"#!/settings/server"),u.createElement(k.Z,{description:a,title:"Update your Plex Media Server"},u.createElement(M.Z,{kind:O._8,size:T.ln,target:"_self",to:F.Z.join([n,o])},(0,C.Z)("Open server directly")))}));var _=r(63776),z=r(5826),H=r(16018);var W=Object.defineProperty,G=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const X=(0,s.$j)((function(){return(0,a.P1)((e=>e.isWaitingForServers),((e,{hideUnclaimedPage:t})=>t),(0,o.Z)(),(0,c.Z)(),d.Z,((e,t,r,n,i)=>r?{hasServer:!0,showSpinner:!r.isConnected&&!r.isUnauthorized&&!r.isUnavailable,machineIdentifier:r.machineIdentifier,isUnauthorized:r.isUnauthorized,isUnavailable:r.isUnavailable,isOutOfDate:r.isOutOfDate,isInstallingServerUpdate:r.isInstallingServerUpdate,isUnclaimed:r.isConnected&&!r.isClaimed&&!i[r.machineIdentifier]&&!n&&!t,hasHttpsConnections:r.hasHttpsConnections,isHostedHttps:l.Z.isHostedHttps}:{hasServer:!1,showSpinner:e}))}))((function(e){const{serverEntityID:t,children:r,hasServer:n,showSpinner:i,machineIdentifier:s,isUnauthorized:a,isUnavailable:o,isOutOfDate:l,isUnclaimed:c,isInstallingServerUpdate:d}=e;return i?u.createElement(_.Z,null,u.createElement(p.Z,null)):n?d?u.createElement(z.Z,{serverEntityID:t}):o?u.createElement(b.Z,{serverEntityID:t}):l?u.createElement(B,{serverEntityID:t}):a?u.createElement(f.Z,null):c?u.createElement(L,{serverEntityID:t}):u.createElement(v,{machineIdentifier:s},r):u.createElement(H.Z,null)}));X.propTypes=G(((e,t)=>{for(var r in t||(t={}))K.call(t,r)&&Y(e,r,t[r]);if($)for(var r of $(t))q.call(t,r)&&Y(e,r,t[r]);return e})({},X.propTypes),Q({serverEntityID:i().string.isRequired}));const J=X},8292:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var n=r(67294),i=r(47276),s=r(82650),a=r(35387),o=r(45697),l=r.n(o),c=r(28216),d=r(22222),u=r(53461),p=r(74278),m=r(41863),h=r(42985),g=r(14280),y=r(63776),v=r(16018),f=r(56791),b=r(11088);var Z=Object.defineProperty,S=Object.defineProperties,P=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const M=(0,c.$j)((function(){return(0,d.P1)((0,m.Z)("isProvidersPopulated"),(0,m.Z)("providersError"),(0,u.Z)(),p.Z,((e,t,r,n)=>r?{hasProvider:!0,hasError:!!r.error,isPending:!r.isPopulated}:{hasProvider:!1,isDownForMaintenance:n.isDownForMaintenance,isUnreachable:n.isUnavailable,hasError:!!t,isPending:!e}))}))((function(e){const{children:t,hasProvider:r,isDownForMaintenance:i,isUnreachable:s,hasError:a,isPending:o}=e;return i?n.createElement(g.Z,null):s?n.createElement(b.Z,null):a?n.createElement(f.Z,null):o?n.createElement(y.Z,null,n.createElement(h.Z,null)):r?n.createElement(n.Fragment,null,t):n.createElement(v.Z,null)}));M.propTypes=S(((e,t)=>{for(var r in t||(t={}))E.call(t,r)&&C(e,r,t[r]);if(I)for(var r of I(t))w.call(t,r)&&C(e,r,t[r]);return e})({},M.propTypes),P({providerEntityID:l().string.isRequired}));const D=M;var O=r(42674);const T=function(e){const{children:t,machineIdentifier:r,providerIdentifier:o}=e,l=r===i.X?D:O.Z,c=(0,s.Z)(a.cN,r),d=(0,s.Z)(a.MC,o,c);return n.createElement(l,{providerEntityID:d,serverEntityID:c},t)}},22478:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(73788),s=r(62365);const a=function(){return n.createElement(s.Z,{description:(0,i.Z)("You do not have access to this server"),title:(0,i.Z)("Not authorized")})}},85633:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(67294),i=r(28216),s=r(22222),a=r(80011),o=r(87880),l=r(28531),c=r(14796),d=r(73788),u=r(20683),p=r(18222),m=r(85448),h=r(25555),g=r(58024),y=r(55319),v=r(29012),f=r(23414),b=r(62365);const Z=function(e){const{friendlyName:t,isPending:r,onTryAgainPress:i}=e;return n.createElement(b.Z,{description:n.createElement(v.Z,{message:(0,d.Z)("Verify you have a network connection and that the server is online, or see our {openLink}troubleshooting{closeLink} tips for further assistance."),tags:[{open:"openLink",close:"closeLink",component:m.Z,kind:h._8,to:"https://help.plex.tv/noserver",target:"_blank"}]}),title:t?(0,d.Z)("{serverName} is currently unavailable",{serverName:t}):(0,d.Z)("Server is currently unavailable")},n.createElement(f.Z,{isSpinning:r,kind:h._8,onPress:i},(0,d.Z)("Retry connection")))};var S=r(39577),P=r(80974),I=r(63776);class E extends n.Component{render(){const{title:e,description:t,children:r}=this.props;return n.createElement(I.Z,{description:n.createElement(n.Fragment,null,n.createElement(v.Z,{message:(0,d.Z)('Its "Secure connections" setting may be set to disabled, or you may need to adjust some settings on your network. You can {openLink}learn more about secure connections here{closeLink}.'),tags:[{open:"openLink",close:"closeLink",component:m.Z,to:"https://support.plex.tv/hc/en-us/articles/206225077-How-to-Use-Secure-Server-Connections",kind:h._8,target:"_blank"}]})),iconSrc:P,title:e},t?n.createElement("div",{className:"InsecureFallbackChoicePage-description-WUvYIm EmptyPageDescription-description-X4KZlh"},t):null,r)}}const w=E;var C=r(6646);const M=(0,i.$j)((function(){return(0,s.P1)((0,o.Z)(),(e=>{const t=e.connections.find((e=>"http"===e.scheme));return{friendlyName:e.friendlyName,bundledConnectionUri:null==t?void 0:t.uri,shouldShowInsecureAppMessage:C.P(e),shouldAllowInsecureFallback:C.E(e),isPending:e.isPending}}))}),(function(e,t){const r={serverEntityID:t.serverEntityID,metricsPage:t.metricsPage};return{onTryAgainPress(){e((0,g.bc)()),e(a.Vk(r))}}}))((function(e){const{friendlyName:t,bundledConnectionUri:r,shouldShowInsecureAppMessage:i,shouldAllowInsecureFallback:s,isPending:a,onTryAgainPress:o}=e,{isOpen:g,onOpen:v,onClose:f}=(0,y.Z)();if(i){const e="macos"===c.Z.platformID||"windows"===c.Z.platformID;return n.createElement(w,{title:(0,d.Z)('app.plex.tv is unable to connect to "{serverName}" securely',{serverName:t})},e?n.createElement("div",{className:"ServerUnavailableErrorPageConnector-downloadButtonContainer-AZyOEA"},n.createElement(p.Z,{kind:h._8,target:"_blank",to:l.jv},"windows"===c.Z.platformID?(0,d.Z)("Download Plex for Windows"):(0,d.Z)("Download Plex for Mac"))):null,r?n.createElement(m.Z,{kind:h._8,to:u.Z.join([r,"/web/index.html"])},e?(0,d.Z)("Or you can try to navigate directly to Plex Media Server"):(0,d.Z)("You can try to navigate directly to Plex Media Server")):null)}return s?n.createElement(w,{description:(0,d.Z)("The app is loaded insecurely. You can attempt to use an insecure connection now."),title:(0,d.Z)('The server "{serverName}" does not allow secure connections',{serverName:t})},n.createElement(S.Z,{isOpen:g,serverEntityID:e.serverEntityID,onModalClose:f}),n.createElement(p.Z,{kind:h._8,onPress:v},(0,d.Z)("Allow Insecure Connections"))):n.createElement(Z,{friendlyName:t,isPending:a,onTryAgainPress:o})}))},1608:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var n=r(28216),i=r(22222),s=r(60094),a=r(94184),o=r.n(a),l=r(67294),c=r(9711),d=r(73788),u=r(20683),p=r(58851),m=r(20533),h=r(90425),g=r(62003),y=r(45697),v=r.n(y),f=r(90558);function b(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-avatar-crop-max-560"};i["aria-hidden"]=!t,i.style=n,i.className=f.Z.plexIcon+(r?" "+r:"");const s=[l.createElement.apply(l,["path",{d:"m560 0l0 560-560 0 0-560 560 0m-420 280c0 77.268 62.732 140 140 140 77.268 0 140-62.732 140-140 0-77.268-62.732-140-140-140-77.268 0-140 62.732-140 140"}].concat([]))];return t&&s.unshift(l.createElement("title",null,t)),l.createElement.apply(l,["svg",i].concat(s))}b.propTypes={"aria-label":v().string,className:v().string,style:v().object};const Z=b;function S(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-avatar-crop-min-560"};i["aria-hidden"]=!t,i.style=n,i.className=f.Z.plexIcon+(r?" "+r:"");const s=[l.createElement.apply(l,["path",{d:"m476 84l0 392-392 0 0-392 392 0m-336 196c0 77.268 62.732 140 140 140 77.268 0 140-62.732 140-140 0-77.268-62.732-140-140-140-77.268 0-140 62.732-140 140"}].concat([]))];return t&&s.unshift(l.createElement("title",null,t)),l.createElement.apply(l,["svg",i].concat(s))}S.propTypes={"aria-label":v().string,className:v().string,style:v().object};const P=S,I="AvatarEditor-sliderEnd-E4r1jr";var E=Object.defineProperty,w=Object.defineProperties,C=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,T=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))D.call(t,r)&&T(e,r,t[r]);if(M)for(var r of M(t))O.call(t,r)&&T(e,r,t[r]);return e},A=(e,t)=>w(e,C(t));class k extends l.Component{constructor(e,t){super(e,t),this.mounted=!1,this.setCanvasRef=e=>{this.canvas=e},this.onMouseDown=e=>{e.preventDefault(),this.startAvatarDrag(e.clientX,e.clientY)},this.onTouchStart=e=>{e.preventDefault();const t=e.touches.item(0);t&&this.startAvatarDrag(t.clientX,t.clientY,!0)},this.onTouchMove=e=>{const t=e.touches.item(0);t&&this.dragAvatar(t.clientX,t.clientY)},this.onMouseMove=e=>{this.dragAvatar(e.clientX,e.clientY)},this.onMouseUp=()=>{this.stopAvatarDrag()},this.onTouchEnd=()=>{this.stopAvatarDrag()},this.onFileDrop=e=>{let t;if(e.preventDefault(),this.setState({isOverDropTarget:!1}),this.dropTargetEnteredCounter=0,e.dataTransfer&&e.dataTransfer.files.length?t=e.dataTransfer.files[0]:e.target.files&&e.target.files.length&&(t=e.target.files[0]),t){const e=new window.FileReader;e.onload=e=>this.loadImage(e.target.result),e.readAsDataURL(t)}},this.onDragEnter=(e=window.event)=>{e.preventDefault(),this.dropTargetEnteredCounter++,this.setOverDropTargetState()},this.onDragLeave=(e=window.event)=>{e.preventDefault(),this.dropTargetEnteredCounter--,this.setOverDropTargetState()},this.onSliderChange=({steppedValue:e})=>{this.setState((t=>{const{offsetX:r,offsetY:n}=t,i=this.initialWidth*e,s=this.initialHeight*e,a=(this.imageWidth-i)/2,o=(this.imageHeight-s)/2,l=this.props.width-i,c=this.props.height-s,d=Math.max(l,Math.min(r+a,0)),u=Math.max(c,Math.min(n+o,0));return A(x({},t),{scale:e,offsetX:d,offsetY:u})}),(()=>this.props.onChange(this.getImageDataUrl())))},this.state={drag:!1,dragX:0,dragY:0,minScale:.1,maxScale:1,scale:.1,offsetX:0,offsetY:0,isOverDropTarget:!1},this.dropTargetEnteredCounter=0}componentDidMount(){window.addEventListener("dragover",this.onWindowDragOver),window.addEventListener("drop",this.onWindowDrop),this.paint(),this.loadImage(this.props.url,!0),this.mounted=!0}UNSAFE_componentWillReceiveProps(e){this.props.url!==e.url&&this.loadImage(e.url)}shouldComponentUpdate(e,t){return(0,m.Z)(this,e,t)}componentDidUpdate(){this.paint()}componentWillUnmount(){window.removeEventListener("dragover",this.onWindowDragOver),window.removeEventListener("drop",this.onWindowDrop),this.stopListeningForDrag(),this.mounted=!1}listenForDrag(e){e?(document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchcancel",this.onTouchEnd),document.addEventListener("touchend",this.onTouchEnd)):(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}stopListeningForDrag(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchcancel",this.onTouchEnd),document.removeEventListener("touchend",this.onTouchEnd)}startAvatarDrag(e,t,r){this.listenForDrag(r),this.setState({drag:!0,dragX:e,dragY:t})}dragAvatar(e,t){this.state.drag&&this.setState((r=>{const{offsetX:n,offsetY:i,dragX:s,dragY:a}=r,o=this.props.width-this.imageWidth,l=this.props.height-this.imageHeight,c=Math.max(o,Math.min(n+(e-s),0)),d=Math.max(l,Math.min(i+(t-a),0));return A(x({},r),{dragX:e,dragY:t,offsetX:c,offsetY:d})}))}stopAvatarDrag(){this.stopListeningForDrag(),this.setState({drag:!1},(()=>this.props.onChange(this.getImageDataUrl())))}loadImage(e,t,r=this.props){const n=new window.Image;n.onload=()=>this.onImageLoad(n,t),/^https?:\/\//.test(e)&&n.setAttribute("crossOrigin","anonymous");let i=e;if(0!==e.indexOf("data:")){const t=(0,c.Z)(),n={width:Math.round(r.width*t),height:Math.round(r.height*t),minSize:1},s=e.indexOf("?");s>-1?(i=u.Z.join(e.substring(0,s),n),i+=-1===i.indexOf("?")?"?":"&",i+=e.substring(s+1)):i=u.Z.join(i,n)}n.src=i}paint(){const{width:e,height:t}=this.props,r=this.canvas.getContext("2d");r.clearRect(0,0,e,t),this.image&&this.drawImage(r);const n=document.createElement("canvas"),i=n.getContext("2d");n.width=e,n.height=t,i.fillStyle="rgba(0,0,0,0.6)",i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="destination-out",i.arc(e/2,t/2,e/2,0,2*Math.PI),i.fill(),r.drawImage(n,0,0)}drawImage(e){this.imageWidth=this.initialWidth*this.state.scale,this.imageHeight=this.initialHeight*this.state.scale,e.drawImage(this.image,this.state.offsetX,this.state.offsetY,this.imageWidth,this.imageHeight)}getImageDataUrl(){const e=document.createElement("canvas"),t=e.getContext("2d");return e.height=this.props.height,e.width=this.props.width,this.drawImage(t),e.toDataURL()}setOverDropTargetState(){this.state.isOverDropTarget||0===this.dropTargetEnteredCounter||this.setState({isOverDropTarget:!0}),this.state.isOverDropTarget&&0===this.dropTargetEnteredCounter&&this.setState({isOverDropTarget:!1})}onImageLoad(e,t){if(!this.mounted)return;this.image=e,this.initialWidth=Math.max(this.props.width,e.width),this.initialHeight=Math.max(this.props.height,e.height);const r=e.width>e.height?e.height:e.width,n=r>this.props.width?this.props.width/r:1,i=r<=this.props.width?2:1;this.setState({drag:!1,dragX:0,dragY:0,minScale:n,maxScale:i,scale:n,offsetX:0,offsetY:0},t?null:()=>this.props.onChange(this.getImageDataUrl()))}onWindowDrop(e=window.event){e.preventDefault()}onWindowDragOver(e=window.event){e.preventDefault()}onDragStart(e=window.event){e.dataTransfer.effectAllowed="copyMove"}onDragOver(e=window.event){e.dataTransfer.dropEffect="copy"}render(){const{isOverDropTarget:e}=this.state;return l.createElement("div",{className:"AvatarEditor-avatarContainer-t9H8yn",onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDrop:this.onFileDrop},l.createElement("div",{className:"AvatarEditor-avatarPane-quja2_"},l.createElement("canvas",{ref:this.setCanvasRef,className:o()(e&&"AvatarEditor-isOverDropTarget-WPucpu",!this.image&&"AvatarEditor-avatarLoading-afjWUb",this.image&&"AvatarEditor-avatarLoaded-XkQCKx"),height:this.props.height,width:this.props.width,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart}),l.createElement("div",{className:"AvatarEditor-sliderContainer-rrWxBh"},l.createElement("span",{className:I},l.createElement(P,null)),l.createElement("span",{className:"AvatarEditor-sliderWrapper-NL9bp7"},l.createElement(h.Z,{className:"AvatarEditor-slider-diJlEE Slider-slider-YdLxcK",max:this.state.maxScale,min:this.state.minScale,step:.1,value:this.state.scale,onChange:this.onSliderChange})),l.createElement("span",{className:I},l.createElement(Z,null)))),l.createElement("div",{className:"AvatarEditor-avatarTextPane-F1yip8"},l.createElement("p",null,l.createElement(g.Z,{accept:"image/*",buttonText:(0,d.Z)("Choose Photo"),onChange:this.onFileDrop})),l.createElement("p",{className:"AvatarEditor-help-qC9Fcw"},(0,d.Z)("You can scale your photo using the slider below, and adjust the crop by dragging it within the circle."))))}}k.defaultProps={height:200,width:200,onChange(){}};const N=(0,p.Z)(k),R=(0,n.$j)((function(){return(0,i.P1)((0,s.Z)(),(e=>({url:e})))}))(N)},39577:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(28216),i=r(22222),s=r(87880),a=r(10379),o=r(67294),l=r(69284),c=r(62291),d=r(73788),u=r(63135),p=r(74249),m=r(45181),h=r(17516),g=r(25555),y=r(69281),v=r(17330),f=r(55949),b=r(88140);class Z extends o.Component{constructor(e,t){super(e,t),this.onAllowFallbackConfirm=()=>{this.setState({isSubmitting:!0}),this.props.onAllowHttpFallback({serverEntityID:this.props.serverEntityID,allowHttpFallback:this.props.publicAddressMatches?l.Z.SAME_NETWORK:l.Z.ALWAYS})},this.state={isSubmitting:!1}}render(){const{publicAddressMatches:e,isOpen:t,onModalClose:r}=this.props,{isSubmitting:n}=this.state;return o.createElement(f.Z,{isOpen:t,metricsPage:c.Sd,size:y.HC,onModalClose:r},o.createElement(b.Z,{onModalClose:r},o.createElement(h.Z,null,(0,d.Z)("Allow Insecure Connections")),o.createElement(u.Z,null,e?(0,d.Z)("Insecure connections will only be allowed when you're on the same network as the server."):(0,d.Z)("Insecure connections will be allowed to any server."),o.createElement("br",null),(0,d.Z)("The Allow Fallback to Insecure Connections setting can be changed in Web Settings. Would you like to allow insecure connections?")),o.createElement(p.Z,null,o.createElement(m.Z,null,o.createElement(v.Z,{isDisabled:n,kind:g.TP,onPress:r},(0,d.Z)("Cancel")),o.createElement(v.Z,{isSpinning:n,kind:g.T,onPress:this.onAllowFallbackConfirm},(0,d.Z)("Allow"))))))}}const S=Z,P={onAllowHttpFallback:a.JZ},I=(0,n.$j)((function(){return(0,i.P1)((0,s.Z)(),(e=>({publicAddressMatches:e.publicAddressMatches})))}),P)(S)},14280:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),i=r(28531),s=r(73788),a=r(85448),o=r(25555),l=r(62365);const c=function(){return n.createElement(l.Z,{description:(0,s.Z)("Don't worry, it will be back soon"),title:(0,s.Z)("Plex is down for maintenance")},n.createElement(a.Z,{kind:o._8,target:"_blank",to:i.S7},"status.plex.tv"))}},63776:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(94184),i=r.n(n),s=r(67294),a=r(8067),o=r(25555),l=r(15867);const c={emptyPage:"EmptyPage-emptyPage-WAo6pH",content:"EmptyPage-content-r4ks5a",icon:"EmptyPage-icon-y0C5SN",default:"EmptyPage-default-K2VCHp",primary:"EmptyPage-primary-S2IZdy",success:"EmptyPage-success-eCETCB",danger:"EmptyPage-danger-xf3Czo",imgIcon:"EmptyPage-imgIcon-IKsvs2",title:"EmptyPage-title-mTbEoJ",footer:"EmptyPage-footer-XKevVP"};var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function g(e){const t=e,{className:r,contentClassName:n,iconClassName:o,titleClassName:d,footerClassName:g,children:y,kind:v,scrollDirection:f,iconComponent:b,iconSrc:Z,title:S,description:P,footer:I}=t,E=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&u)for(var n of u(e))t.indexOf(n)<0&&m.call(e,n)&&(r[n]=e[n]);return r})(t,["className","contentClassName","iconClassName","titleClassName","footerClassName","children","kind","scrollDirection","iconComponent","iconSrc","title","description","footer"]);return s.createElement(a.Z,((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))m.call(t,r)&&h(e,r,t[r]);return e})({className:r,scrollDirection:f},E),s.createElement("div",{className:n},Z?s.createElement("img",{className:c.imgIcon,src:Z}):null,b?s.createElement("span",{className:i()(o,c[v])},s.createElement(b,null)):null,S?s.createElement("div",{className:d},S):null,P?s.createElement(l.Z,null,P):null,y),I?s.createElement("div",{className:g},I):null)}g.defaultProps={className:c.emptyPage,contentClassName:c.content,iconClassName:c.icon,titleClassName:c.title,footerClassName:c.footer,kind:o.TP};const y=g},15867:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);const i=function({children:e}){return n.createElement("div",{className:"EmptyPageDescription-description-X4KZlh"},e)}},62365:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(26400),s=r(63776),a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){return n.createElement(s.Z,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({iconComponent:i.F},e))}},58176:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(37920),s=r(63776),a=r(24141),o=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p=function(e){return n.createElement(s.Z,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({className:a.Z.innerEmptyPage,contentClassName:a.Z.innerEmptyPageContent,scrollDirection:i.Hn},e))}},46034:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(26400),s=r(58176),a=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){return n.createElement(s.Z,((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&d(e,r,t[r]);return e})({iconComponent:i.F},e))}},5826:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(28216),i=r(22222),s=r(80011),a=r(87880),o=r(58024),l=r(67294),c=r(80974),d=r(73788),u=r(23414),p=r(25555),m=r(63776);const h=(0,n.$j)((function(){return(0,i.P1)((0,a.Z)(),(e=>({friendlyName:e.friendlyName,isPending:e.isPending})))}),(function(e,t){const r={serverEntityID:t.serverEntityID};return{onTryAgainPress(){e((0,o.bc)()),e(s.Vk(r))}}}))((function(e){const{friendlyName:t,isPending:r,onTryAgainPress:n}=e;return l.createElement(m.Z,{description:(0,d.Z)("Grab a cup of tea. This may take a couple of minutes."),iconSrc:c,title:(0,d.Z)('The server "{serverName}" is installing an update',{serverName:t})},l.createElement(u.Z,{isSpinning:r,kind:p._8,onPress:n},(0,d.Z)("Retry connection")))}))},16018:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(67294),i=r(73788),s=r(85448),a=r(25555),o=r(62365);const l=function(){return n.createElement(o.Z,{description:(0,i.Z)("We can't find the page you're looking for"),title:(0,i.Z)("Not found")},n.createElement(s.Z,{kind:a._8,to:"#"},(0,i.Z)("Go Home")))}},56791:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),i=r(28531),s=r(73788),a=r(85448),o=r(25555),l=r(62365),c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const h=function(e){const t=e,{children:r}=t,c=((e,t)=>{var r={};for(var n in e)u.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);return n.createElement(l.Z,((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({description:(0,s.Z)("Please visit our forums if you continue to experience problems"),title:(0,s.Z)("There was an unexpected error")},c),n.createElement(a.Z,{kind:o._8,target:"_self",to:i.bB},(0,s.Z)("Go to Forums")),r)}},11088:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(73788),s=r(62365);const a=function(){return n.createElement(s.Z,{description:(0,i.Z)("We are unable to connect to plex.tv at this time. Please try again later."),title:(0,i.Z)("Plex is not reachable")})}},82486:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({className:e}){return n.createElement("div",{className:e})}i.defaultProps={className:"PrePlayDivider-divider-eQSBkm"};const s=i},75255:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PrePlayMetadataInnerContent-innerContent-ayrFIj"};const s=i},95352:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({children:e,className:t}){return n.createElement("div",{className:t,"data-testid":"preplayDetailsContainer"},e)}i.defaultProps={className:"PrePlayDetailsGroup-group-JrgaSL"};const s=i},20946:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i(e){const{children:t,className:r,labelClassName:i,contentClassName:s,label:a}=e;return n.createElement("div",{className:r},n.createElement("div",{className:i},a),n.createElement("div",{className:s},t))}i.defaultProps={className:"PrePlayDetailsGroupItem-groupItem-eHId9r",labelClassName:"PrePlayDetailsGroupItem-label-_GUsYD",contentClassName:"PrePlayDetailsGroupItem-content-YyECd9"};const s=i},10862:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),i=r(71034);function s({className:e,dangerouslySetInnerHTML:t,children:r}){const s=r?r.split("\n"):[];return n.createElement(i.Z,{className:e,dangerouslySetInnerHTML:t},s.length>1?s.map(((e,t)=>n.createElement("p",{key:t},e))):r)}s.defaultProps={className:"PrePlaySummary-summary-uzepxD"};const a=s},89409:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PrePlayLeftTitle-leftTitle-VwQlIL"};const s=i},52255:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({className:e,children:t}){return n.createElement("div",{className:e,"data-testid":"preplay-mainTitle"},t)}i.defaultProps={className:"PrePlayPrimaryTitle-primaryTitle-iRxqZb"};const s=i},32646:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),i=r(62618),s=r(37787),a=r(55240);const o=function({serverEntityID:e,providerEntityID:t,metadataItemEntityID:r}){return n.createElement(a.Z,{className:"PrePlayRatingRightTitle-ratingRightTitle-aSEnsk PrePlayRightTitle-rightTitle-ikQT2o"},n.createElement(s.Z,{className:"PrePlayRatingRightTitle-starRating-Kce73T",metadataItemEntityID:r,providerEntityID:t,serverEntityID:e}),n.createElement(i.Z,{className:"PrePlayRatingRightTitle-criticRating-kW58Kc",metadataItemEntityID:r,providerEntityID:t,serverEntityID:e}))}},55240:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i({className:e,children:t}){return n.createElement("div",{className:e},t)}i.defaultProps={className:"PrePlayRightTitle-rightTitle-ikQT2o"};const s=i},68474:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(45697),i=r.n(n),s=r(67294),a=r(28216);const o={dispatchRedirectToUrl:r(58024).nL};class l extends s.Component{componentDidMount(){const{to:e,replace:t}=this.props;this.props.dispatchRedirectToUrl({url:e,replace:t})}render(){return null}}l.propTypes={to:i().string.isRequired,replace:i().bool,dispatchRedirectToUrl:i().func.isRequired};const c=(0,a.$j)(null,o)(l)},64638:(e,t,r)=>{"use strict";r.d(t,{Z:()=>F});var n=r(67294),i=r(28216),s=r(22222),a=r(5977),o=r(45191),l=r(21366),c=r(22169),d=r(13469),u=r.n(d);const p=function e(t){return function(e,t=u().identity){return Object.keys(e).forEach((r=>{e[r]=t(e[r])})),e}(function(e,t=u().identity){return Object.keys(e).forEach((r=>{t(e[r])||delete e[r]})),e}(t),(t=>u().isObject(t)?e(t):t))};var m=r(1618),h=r(96630),g=r(54264),y=Object.defineProperty,v=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&Z(e,r,t[r]);if(v)for(var r of v(t))b.call(t,r)&&Z(e,r,t[r]);return e};var P=r(20683),I=r(63329),E=r(65427),w=r(45186),C=r(68173),M=r(6459),D=Object.defineProperty,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function k(e){const t=e.context||{},{user:r}=t,n=((e,t)=>{var r={};for(var n in e)T.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&O)for(var n of O(e))t.indexOf(n)<0&&x.call(e,n)&&(r[n]=e[n]);return r})(t,["user"]);return p(((e,t)=>{for(var r in t||(t={}))T.call(t,r)&&A(e,r,t[r]);if(O)for(var r of O(t))x.call(t,r)&&A(e,r,t[r]);return e})({},n))}const N=function(){return(0,s.P1)(((e,{signUp:t})=>t),((e,{email:t})=>t),((e,{providerID:t})=>t),((e,{userAuthToken:t})=>t),((e,{code:t})=>t),((e,{pinID:t})=>t),((e,{errorMessage:t})=>t),(e=>e.clientID),w.Z,l.Z,((e,t,r,n,i,s,l,d,u,p)=>{const y=k((0,o.DB)("metrics").toJSON());if(e){const{base:e}=(0,g.Z)(window.location.href),t={forwardUrl:e,twop:"1",context:y};return p&&(t.lang=p),u.anonymous&&(t.guestToken=u.authToken),P.Z.join((0,c.LL)("sign-up/"),t,{trailingSlash:!0})}{const e={clientID:d,context:y};if(!(0,E.Z)()){const t=s?function(e,t){const{base:r,searchParams:n,hashPath:i,hashParams:s}=(0,g.Z)(e),a=(0,m.Z)(s);return`${r}${n}#${i}?${(0,h.Z)(S(S({},a),t))}`}(window.location.href,{pinID:s}):window.location.href;e.forwardUrl=t,(0,a.LX)(C.Z.location.pathname,{path:M.Z.serverSetup})&&(e.skipSignInUrl=(0,I.Z)(window.location.href,P.Z.join(["#!/setup"],{forwardUrl:t},{trailingSlash:!0})))}return i&&(e.code=i),r&&(e.provider=r),t&&(e.email=t),n&&(e.authToken=n),l&&(e.error=l),p&&(e.language=p),u.anonymous&&(e.guestToken=u.authToken),P.Z.join([(0,c.tZ)(),P.Z.join(["#!/"],e)],{},{recognizeHash:!0,trailingSlash:!0})}}))};var R=Object.defineProperty,L=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,U=(e,t,r)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const F=(0,i.$j)((function(){return(0,s.P1)(N(),(e=>({serviceAuthUrl:e})))}),{})((function(e){const t=e,{component:r,serviceAuthUrl:i}=t,s=((e,t)=>{var r={};for(var n in e)j.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&L)for(var n of L(e))t.indexOf(n)<0&&V.call(e,n)&&(r[n]=e[n]);return r})(t,["component","serviceAuthUrl"]);return n.createElement(r,((e,t)=>{for(var r in t||(t={}))j.call(t,r)&&U(e,r,t[r]);if(L)for(var r of L(t))V.call(t,r)&&U(e,r,t[r]);return e})({to:i},s))}))},55321:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(94184),i=r.n(n),s=r(67294),a=r(73788),o=r(85448),l=r(25555),c=r(45770),d=r(22773);const u=function(e){const{children:t,className:r,closedNode:n,errorMessage:u,isOpen:p,editLabel:m,onTogglePress:h}=e;return s.createElement(c.Z,{className:i()(p?"CloseableFormSection-isOpen-XKHc3s":"CloseableFormSection-isClosed-bI4WCF CloseableFormSection-isPressable-eZi8MN",r),errorMessage:p?u:null,onPress:p?null:h},s.createElement(d.Z,null,p?s.createElement(o.Z,{kind:l._8,onPress:h},(0,a.Z)("Cancel")):null,p?null:s.createElement(o.Z,{kind:l._8},m||(0,a.Z)("Edit"))),p?t:n)}},45770:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(94184),i=r.n(n),s=r(67294),a=r(28216),o=r(70777),l=r(85448),c=r(15058),d=r(36380);const u="SettingsFormSection-sectionWrapper-DuWwYc",p="SettingsFormSection-communityFeatures-xpywUE";function m(e){const{children:t,className:r,onPress:n,hasCommunityFeatures:a}=e;return s.createElement(l.Z,{className:i()(!a&&u,a&&p,r),component:"div",onPress:n},t)}function h(e){const{children:t,className:r,hasCommunityFeatures:n}=e;return s.createElement("div",{className:i()(!n&&u,n&&p,r)},t)}const g=function(e){const{errorMessage:t,children:r,className:n,onPress:i}=e,l=(0,a.v9)((0,c.Z)(o.vi)),u=i?m:h;return s.createElement(u,{className:n,hasCommunityFeatures:l,onPress:i},t?s.createElement(d.Z,{errorMessage:t}):null,s.createElement("div",{className:"SettingsFormSection-section-BFpkKP"},r))}},22773:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i(e){const{children:t,className:r}=e;return n.createElement("div",{className:r},t)}i.defaultProps={className:"SettingsFormSectionActionLinks-actionLinks-Zeubmp"};const s=i},58645:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i(e){const{className:t,children:r}=e;return n.createElement("div",{className:t},r)}i.defaultProps={className:"SettingsFormSectionDetails-sectionDetails-YYUcAA"};const s=i},85796:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(67294),i=r(73788),s=r(70668),a=r(37754),o=r(25555),l=r(42985),c=r(17330),d=r(55321),u=r(58645),p=r(90280);const m="SubmittableFormSection-label-lSXbIE FormLabel-label-KQvmHO CloseableFormSection-isPressable-eZi8MN";function h(e){const{className:t,children:r,closedNode:o,title:p,errorMessage:h,buttonKind:g,buttonText:y,isDirty:v,isOpen:f,isUpdating:b,showButton:Z,showButtonEnabled:S,showSpinner:P,editLabel:I,onFormChange:E,onSubmit:w,onTogglePress:C}=e;return n.createElement(d.Z,{className:t,closedNode:n.createElement(u.Z,{className:"SubmittableFormSection-sectionDetails-bHasEj CloseableFormSection-isPressable-eZi8MN SettingsFormSectionDetails-sectionDetails-YYUcAA"},n.createElement(a.Z,{className:m},p),o),editLabel:I,errorMessage:h,isOpen:f,onTogglePress:C},P?n.createElement(a.Z,{className:m},p):null,P?n.createElement("div",{className:"SubmittableFormSection-spinnerContainer-XD6K5l"},n.createElement(l.Z,null)):null,!P&&Z?n.createElement(s.ZP,{onChange:E,onSubmit:w},r,n.createElement("div",{className:"SubmittableFormSection-submitButton-iGbWN7"},n.createElement(c.Z,{isDisabled:!S&&!v,isSpinning:b,kind:g,type:"submit"},y||(0,i.Z)("Save Changes")))):null,P||Z?null:r)}h.defaultProps={buttonKind:o._8,showButton:!0,showButtonEnabled:!1};const g=(0,p.Z)(h,{isUpdatingPropName:"isUpdating",errorPropName:"errorMessage",clearDirtyOnChangePropName:"isOpen"})},992:(e,t,r)=>{"use strict";r.d(t,{Z:()=>N});var n=r(28216),i=r(22222),s=r(35449),a=r(27649),o=r(97797),l=r(21366),c=r(75404),d=r(67294),u=r(62291),p=r(73788),m=r(85448),h=r(24642),g=r(63135),y=r(74249),v=r(45181),f=r(17516),b=r(25555),Z=r(69281),S=r(17330),P=r(55949),I=r(88140);const E={message:"ConfirmAdvertisingNotice-message-HDrf_r"};var w=Object.defineProperty,C=Object.defineProperties,M=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,x=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&x(e,r,t[r]);if(D)for(var r of D(t))T.call(t,r)&&x(e,r,t[r]);return e},k=(e,t)=>C(e,M(t));const N=(0,n.$j)((function(){return(0,i.P1)((e=>e.ui.advertisingNoticeModal),(0,i.P1)(((e,{advertisingNoticePayload:t})=>t),o.Z,((e,t)=>{if(null==e?void 0:e.metadataItemEntityID)return t[e.metadataItemEntityID]})),l.Z,((e,t,r)=>k(A({},e),{language:r,metadatItemType:t&&t.type})))}),(function(e,{playerType:t,advertisingNoticePayload:r,onModalClose:n}){return{onFetchVendors(){e((0,s.wr)())},onContinue(t,r){e((0,s.qq)({language:r,consent:t}))},onCancel(i){e((0,s.Ss)({advertisingNoticePayload:r,action:c.n1})),t&&i&&e((0,a.d7)({playerType:t})),null==n||n()},onSaveComplete(i){e((0,s.Ss)({advertisingNoticePayload:r,action:i?c.VL:c.lJ})),t&&r&&e((0,a.wA)(k(A({},r),{playerType:t,confirmAdvertisingNotice:!0}))),e((0,s._D)()),null==n||n()}}}))((function(e){const{language:t,vendors:r=[],isOpen:n,isSaving:i,isSaved:s,isVendorsPending:a,isVendorsPopulated:o,vendorsError:l,onFetchVendors:w,onContinue:C,onCancel:M,onSaveComplete:D}=e,O=o&&n,T=function(e){switch(e){case"es":case"pt":case"de":case"fr":case"it":case"en":return e;default:return"en"}}(t),x=i||s,[A,k]=(0,d.useState)(!1),N=(0,d.useCallback)((()=>{k(!0),C(!0,T)}),[C,T]),R=(0,d.useCallback)((()=>{k(!1),C(!1,T)}),[C,T]),L=(0,d.useCallback)((()=>{M(!0)}),[M]);(0,d.useEffect)((()=>{o||l?!a&&l&&M(!1):w()}),[a,o,M,w,l]),(0,d.useEffect)((()=>{s&&D(A)}),[A,s,D]);const j=function(e,t){const r=d.createElement(m.Z,{kind:b._8,target:"_blank",to:"https://www.plex.tv/vendors"},"www.plex.tv/vendors"),n=t.map((e=>e.shortName)).join(", ");switch(e){case"es":return["Para poder ofrecer pelculas, TV en directo, y series en directo de manera gratuita, Plex muestra anuncios antes y durante la reproduccin. No es posible eliminar estos anuncios, pero s podemos brindarle la mejor y ms relevante experiencia publicitaria en caso de que acepte las siguientes condiciones.",`Doy mi consentimiento para que Plex comparta los identificadores de publicidad en mis dispositivos con los socios publicitarios de Plex: ${n}.`,d.createElement(d.Fragment,null,"Estos datos se utilizan para ofrecer anuncios y contenido personalizados, medicin de anuncios y contenido, informacin sobre la audiencia y desarrollo de productos. Su consentimiento se aplica a todos los dispositivos en los que tiene instalado Plex. Puede retirar su consentimiento en cualquier momento en la configuracin de la cuenta o utilizando ",r,".")];case"pt":return["A Plex oferece filmes, sries de televiso e TV em direto de forma gratuita e exibe anncios antes e durante a reproduo. Embora no seja possvel desativar esses anncios, a Plex fornece-lhe a melhor e mais relevante experincia de publicidade se concordar com os termos abaixo.",`Autorizo a Plex a compartilhar os identificadores de publicidade dos meus dispositivos com os parceiros de publicidade da Plex: ${n}.`,d.createElement(d.Fragment,null,"Os dados so usados para fornecer anncios e contedo personalizados, medio de anncios e contedo, informaes de pblico-alvo e desenvolvimento de produtos. O seu consentimento aplica-se a todos os dispositivos nos quais instalou o Plex. Pode retirar o seu consentimento a qualquer altura em Configuraes da conta ou utilizando ",r,".")];case"de":return["Plex bietet kostenlose Filme, Shows und Live-TV, indem Anzeigen vor und whrend der Wiedergabe geschaltet werden. Es ist zwar nicht mglich, Werbung zu deaktivieren, wir knnen Ihnen jedoch das beste und relevanteste Werbeerlebnis bieten, wenn Sie den nachstehenden Bedingungen zustimmen.",`Ich bin damit einverstanden, dass Plex die Werbekennungen auf meinen Gerten mit den Werbepartnern von Plex teilt: ${n}.`,d.createElement(d.Fragment,null,"Diese Daten werden verwendet, um personalisierte Anzeigen und Inhalte, Anzeigen- und Inhaltsmessungen, Einblicke in die Zielgruppe und Produktentwicklung bereitzustellen. Ihre Zustimmung gilt fr alle Gerte, auf denen Sie Plex installiert haben. Sie knnen Ihre Einwilligung jederzeit in den Kontoeinstellungen oder ber",r," widerrufen.")];case"fr":return["Plex propose gratuitement  des films, des sries et la tlvision en directen affichant des publicits avant et pendant la lecture. Bien qu'il ne soit pas possible de refuser la publicit, nous pouvons vous fournir une meilleure et plus pertinente exprience publicitaire si vous acceptez les conditions ci-dessous.",`J'accepte que Plex partage les identifiants publicitaires de mes appareils avec ses partenaires publicitaires: ${n}.`,d.createElement(d.Fragment,null,"Ces donnes sont utilises pour fournir des publicits et du contenu personnaliss, des mesures daudiences de publicits et de contenu, et aider au dveloppement de produits. Votre consentement s'applique  tous les appareils sur lesquels vous avez install Plex. Vous pouvez retirer votre consentement  tout moment dans les paramtres du compte ou en utilisant ",r,".")];case"it":return["Plex offre film, programmi e serie TV in diretta gratuiti, visualizzando annunci prima e durante la riproduzione. Sebbene non sia possibile disattivare la pubblicit, accettando i termini riportati qui di seguito potremo fornirti una migliore esperienza pubblicitaria mostrando degli annunci pi pertinenti.",`Acconsento a Plex di condividere gli identificatori pubblicitari sui miei dispositivi con i propri partner pubblicitari: ${n}.`,d.createElement(d.Fragment,null,"Questi dati vengono utilizzati per fornire annunci e contenuti personalizzati, misurazione di annunci e contenuti, approfondimenti sul pubblico e sviluppo del prodotto. Il tuo consenso si applica a tutti i dispositivi su cui hai installato Plex. Puoi revocare il tuo consenso in qualsiasi momento nelle impostazioni daccount o recandoti su ",r,".")];case"en":default:return["Plex provides free-to-watch movies, shows, and live TV by displaying ads before and during playback. While it is not possible to opt out of advertising, we can provide you the best and most relevant advertising experience if you agree to the terms below.",`I consent to Plex sharing the advertising identifiers on my devices with Plex's advertising partners: ${n}.`,d.createElement(d.Fragment,null,"This data is used to deliver personalised ads and content, ad and content measurement, audience insights and product development. Your consent applies to all devices on which you have Plex installed. You can withdraw your consent at any time in Account Settings or using"," ",r,".")]}}(T,r),[V,U]=function(e){switch(e){case"es":return["Estoy de acuerdo","No estoy de acuerdo"];case"pt":return["Eu concordo","Eu no concordo"];case"de":return["Einverstanden","Ich stimme nicht zu"];case"fr":return["Je suis d'accord","Je ne suis pas d'accord"];case"it":return["Sono d'accordo","Non sono d'accordo"];case"en":default:return["I Agree","I Do Not Agree"]}}(T);return d.createElement(P.Z,{isOpen:O,metricsPage:u.c9,size:Z.HC,onModalClose:L},d.createElement(I.Z,{onModalClose:L},d.createElement(f.Z,null,(0,p.Z)("Consent")),d.createElement(g.Z,null,j.map(((e,t)=>d.createElement("div",{key:t,className:E.message},e)))),d.createElement(y.Z,null,d.createElement(v.Z,null,d.createElement(h.Z,{action:c.lJ,metricsProperties:{page:u.c9}},d.createElement(S.Z,{className:E.confirmButton,isSpinning:x&&!A,onPress:R},U)),d.createElement(h.Z,{action:c.VL,metricsProperties:{page:u.c9}},d.createElement(S.Z,{className:E.confirmButton,"data-autofocus":!0,isSpinning:x&&A,onPress:N},V))))))}))},44541:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_e});var n=r(45697),i=r.n(n),s=r(67294),a=r(22222),o=r(3881),l=r(73701),c=r(22688),d=r(87880),u=r(62934),p=r(26759),m=r(95240),h=r(74226),g=r(85209),y=r(88604),v=r(89896),f=r(36475);const b=i().shape({key:i().string,directoryID:i().string,directoryIcon:i().string,sourceType:i().string,title:i().string,titleDetail:i().string,detail:i().string,route:i().string,machineIdentifier:i().string,providerIdentifier:i().string,providerMetricsIdentifier:i().string,isUnavailable:i().bool,isOutOfDate:i().bool,isUnclaimedServer:i().bool,isSelected:i().bool,isCloud:i().bool});var Z=r(58024),S=r(14853),P=r(10379),I=r(39977),E=r(77054),w=r(28216),C=r(87999),M=r(62291),D=r(70777),O=r(73788),T=r(23245),x=r(25555),A=r(44811),k=r(15058),N=r(42283),R=r(99318),L=r(12587),j=r(93644),V=r(4681),U=r(33890),F=r(91012),B=r(87357),_=r(75203),z=r(86655),H=r(87221),W=r(17778),G=r(493),Q=r(34154),$=r(34721),K=r(83700),q=r(93545),Y=r(48383),X=r(18585);const J=(0,a.P1)(X.Z,(e=>e.importPlaylists)),ee={description:"ImportPlaylistsModal-description-HHiaI4",row:"ImportPlaylistsModal-row-GfMdCk",overwrite:"ImportPlaylistsModal-overwrite-b4G7sb",library:"ImportPlaylistsModal-library-naO92u",buttonBar:"ImportPlaylistsModal-buttonBar-a5L1Wc ModalFooterButtonBar-buttonBar-xxZyHc"};function te({isOpen:e,onModalClose:t}){var r;const[n,i]=(0,A.c9)(),a=(0,w.I0)(),{isImporting:o,isImported:l,importError:c}=(0,w.v9)(J),d=(0,j.Z)(i,L.zW.Content),u=(null!=(r=null==d?void 0:d.directories)?r:[]).filter((e=>e.type===R.pG.Artist)).map((({id:e,title:t})=>({value:e,label:t}))),{register:p,handleSubmit:m}=(0,N.cI)({defaultValues:{importAll:!1,sectionID:null==u?void 0:u[0].value}}),h=m((({importAll:e,sectionID:t})=>{if(!u.length)return;const r=null!=t?t:u[0].value;a(Y.Z.actions.importRequested({server:n,importAll:e,sectionID:r}))}));return(0,s.useEffect)((()=>{l&&t()}),[a,l,t]),(0,s.useEffect)((()=>{e||a(Y.Z.actions.reset())}),[a,e]),s.createElement(_.Z,{isOpen:e,size:q.Z.Small,onModalClose:t},s.createElement(H.Z,{onModalClose:t},s.createElement($.Z,null,(0,O.Z)("Import from iTunes")),c?s.createElement(W.Z,{message:(0,O.Z)("Something went wrong. Make sure the server is available and try again.")}):null,s.createElement("form",{onSubmit:h},s.createElement(z.Z,null,s.createElement("div",{className:ee.description},(0,O.Z)("Importing from iTunes will import your music playlists. It will also import your ratings, the date you added the music, as well as play and skip counts for tracks in your library. Depending on how many tracks you have, this process can take many minutes to complete.")),s.createElement("label",{className:ee.row},s.createElement(F.Z,{ref:p,name:"importAll"}),s.createElement("span",{className:ee.overwrite},(0,O.Z)("Overwrite existing playlists"))),u.length>1?s.createElement("label",{className:ee.row},s.createElement("span",{className:ee.library},(0,O.Z)("Add to library:")),s.createElement(B.Z,{ref:p,name:"sectionID"},u.map((({value:e,label:t},r)=>s.createElement("option",{key:r,value:e},t))))):null),s.createElement(G.Z,null,s.createElement(Q.Z,{className:ee.buttonBar},s.createElement(V.Z,{onPress:t},(0,O.Z)("Cancel")),s.createElement(U.Z,{className:ee.button,isSpinning:o,kind:K.Z.Primary,type:"submit"},(0,O.Z)("Import")))))))}var re=r(12472),ne=r(97380),ie=r(66757),se=r(86644),ae=r(98476),oe=r(14580),le=r(86140),ce=r(2209);function de(e){const{sourceDirectory:t,isUnavailable:r,onMenuClose:n,onCancelScanLibraryPress:i,onScanLibraryPress:a,onSharePress:o,onEditLibraryPress:l,onRefreshAllLibraryMetadataPress:c,onEmptyLibraryTrashPress:d,onAnalyzeLibraryPress:u,onDeleteLibraryPress:p,hasHomeLibraryAccessLabels:m}=e,h=r||!t;return s.createElement(s.Fragment,null,t&&t.refreshing?s.createElement(ae.Z,{onPress:(0,oe.Z)(n,i)},(0,O.Z)("Cancel Scan")):s.createElement(ae.Z,{isDisabled:h,onPress:(0,oe.Z)(n,a)},(0,O.Z)("Scan Library Files")),s.createElement(ae.Z,{isDisabled:h,onPress:(0,oe.Z)(n,o)},m?(0,O.Z)("Grant Access"):(0,O.Z)("Share")),s.createElement(ce.Z,{isDisabled:h,label:(0,O.Z)("Manage Library"),onMenuClose:n},s.createElement(ae.Z,{onPress:(0,oe.Z)(n,l)},(0,O.Z)("Edit...")),s.createElement(ae.Z,{onPress:(0,oe.Z)(n,c)},(0,O.Z)("Refresh All Metadata")),s.createElement(ae.Z,{onPress:(0,oe.Z)(n,d)},(0,O.Z)("Empty Trash")),s.createElement(ae.Z,{onPress:(0,oe.Z)(n,u)},(0,O.Z)("Analyze")),s.createElement(ae.Z,{kind:x.T,onPress:(0,oe.Z)(n,p)},(0,O.Z)("Delete"))))}var ue=r(1582),pe=Object.defineProperty,me=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,ye=(e,t,r)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ve=(e,t)=>{for(var r in t||(t={}))he.call(t,r)&&ye(e,r,t[r]);if(me)for(var r of me(t))ge.call(t,r)&&ye(e,r,t[r]);return e};function fe(e){const{machineIdentifier:t,isGuideRefreshing:r,isUnavailable:n,onMenuClose:i,onCancelRefreshGuidePress:a,onRefreshGuidePress:o}=e,l=n;return s.createElement(s.Fragment,null,s.createElement(ae.Z,{isDisabled:l,to:(0,ue.Z)(t,"manage","dvr"),onPress:i},(0,O.Z)("Settings")),r?s.createElement(ae.Z,{onPress:(0,oe.Z)(i,a)},(0,O.Z)("Cancel Refresh")):s.createElement(ae.Z,{isDisabled:l,onPress:(0,oe.Z)(i,o)},(0,O.Z)("Refresh Guide")))}function be(e){const{onMenuClose:t,onImportPlaylistsPress:r}=e;return s.createElement(ae.Z,{onPress:(0,oe.Z)(t,r)},(0,O.Z)("Import from iTunes..."))}const Ze=function(e){const{provider:t,hasProviderSettings:r,hasDiscoverActions:n,hasLibraryActions:i,hasDVRActions:a,hasPlaylistsActions:o,isPinned:l,isReorderable:c,isUnavailable:d,onMenuClose:u,onTogglePinSources:p,onReorderPinSources:m,onStreamingServicesPress:h}=e;return s.createElement(s.Fragment,null,e.machineIdentifier&&e.sourceDirectory?s.createElement(le.Z,{machineIdentifier:e.machineIdentifier,server:e.server,sourceDirectory:e.sourceDirectory,onMenuClose:u}):null,s.createElement(ae.Z,{onPress:(0,oe.Z)(u,p)},l?(0,O.Z)("Unpin"):(0,O.Z)("Pin")),c?s.createElement(ae.Z,{onPress:(0,oe.Z)(u,m)},(0,O.Z)("Reorder")):null,n?s.createElement(ae.Z,{onPress:(0,oe.Z)(u,h)},(0,O.Z)("Manage Streaming Services")):null,r&&!d?s.createElement(ae.Z,{to:`#!/provider/${encodeURIComponent(t.identifier)}/settings`,onPress:u},(0,O.Z)("Personalize")):null,i?s.createElement(de,ve({},e)):null,a?s.createElement(fe,ve({},e)):null,o?s.createElement(be,ve({},e)):null)};var Se=r(4027),Pe=Object.defineProperty,Ie=Object.defineProperties,Ee=Object.getOwnPropertyDescriptors,we=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,De=(e,t,r)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Oe=function(e){const t=e,{machineIdentifier:r,providerIdentifier:n,serverEntityID:i,source:a,sourceDirectory:o,target:l,menuOptions:c,hasDiscoverActions:d,hasLibraryActions:u,hasPlaylistsActions:p,isDeletingLibrary:m,isOverflowMenuOpen:h,onOverflowMenuClose:g,onAnalyzeLibraryPress:y,onEmptyLibraryTrashPress:v,onRefreshAllLibraryMetadataPress:f,onDeleteLibraryPress:b}=t,Z=((e,t)=>{var r={};for(var n in e)Ce.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&we)for(var n of we(e))t.indexOf(n)<0&&Me.call(e,n)&&(r[n]=e[n]);return r})(t,["machineIdentifier","providerIdentifier","serverEntityID","source","sourceDirectory","target","menuOptions","hasDiscoverActions","hasLibraryActions","hasPlaylistsActions","isDeletingLibrary","isOverflowMenuOpen","onOverflowMenuClose","onAnalyzeLibraryPress","onEmptyLibraryTrashPress","onRefreshAllLibraryMetadataPress","onDeleteLibraryPress"]),S=(0,w.v9)((0,k.Z)(D.je)),P=(0,Se.Z)(),I=(0,Se.Z)(),E=(0,Se.Z)(f),N=(0,Se.Z)(v),R=(0,Se.Z)(y),L=(0,Se.Z)(),j=(0,Se.Z)(),V=(0,T.Z)(m);return(0,s.useEffect)((()=>{V&&!m&&L.onClose()}),[m,V,L]),s.createElement(s.Fragment,null,s.createElement(se.Z,{isOpen:h,options:c,target:l,onMenuClose:g},s.createElement(Ze,(U=((e,t)=>{for(var r in t||(t={}))Ce.call(t,r)&&De(e,r,t[r]);if(we)for(var r of we(t))Me.call(t,r)&&De(e,r,t[r]);return e})({},Z),F={hasDiscoverActions:d,hasHomeLibraryAccessLabels:S,hasLibraryActions:u,hasPlaylistsActions:p,machineIdentifier:r,providerEntityID:e.providerEntityID,server:e.server,sourceDirectory:o,onAnalyzeLibraryPress:R.onOpen,onDeleteLibraryPress:L.onOpen,onEmptyLibraryTrashPress:N.onOpen,onImportPlaylistsPress:j.onOpen,onMenuClose:g,onRefreshAllLibraryMetadataPress:E.onOpen,onSharePress:P.onOpen,onStreamingServicesPress:I.onOpen},Ie(U,Ee(F))))),d?s.createElement(re.Z,{isOpen:I.isOpen,onClose:I.onClose}):null,u?s.createElement(s.Fragment,null,s.createElement(ne.Z,{isOpen:P.isOpen,metricsProperties:{context:C.LIST},serverEntityID:i,sharingReason:ne.$.SharingLibrary,sourceDirectory:o,onModalClose:P.onClose}),s.createElement(ie.Z,{confirmLabel:(0,O.Z)("Refresh"),isOpen:E.isOpen,message:(0,O.Z)("Forces a download of fresh media information from the internet. This can take a long time. Any locked fields are not modified."),metricsPage:M.yW,title:(0,O.Z)("Refresh All Metadata"),onCancel:E.onClose,onConfirm:E.onConfirm}),s.createElement(ie.Z,{confirmLabel:(0,O.Z)("Empty"),isOpen:N.isOpen,message:(0,O.Z)("By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted."),metricsPage:M.Y0,title:(0,O.Z)("Empty Trash"),onCancel:N.onClose,onConfirm:N.onConfirm}),s.createElement(ie.Z,{confirmLabel:(0,O.Z)("Analyze"),isOpen:R.isOpen,message:(0,O.Z)("Analyzes all the media files in the library. The analysis captures information about the media which helps Plex decide how to optimally play back the media."),metricsPage:M.cJ,title:(0,O.Z)("Analyze Library"),onCancel:R.onClose,onConfirm:R.onConfirm}),s.createElement(ie.Z,{accordMessage:(0,O.Z)('Yes, delete the library "{libraryName}"',{libraryName:a.title}),confirmLabel:(0,O.Z)("Delete"),isCancelButtonDisabled:m,isConfirmButtonSpinning:m,isOpen:L.isOpen,kind:x.T,message:(0,O.Z)('The library "{libraryName}" will be removed from this server. Your media files will not be affected. This can\'t be undone. Continue?',{libraryName:a.title}),metricsPage:M.iw,title:(0,O.Z)("Delete Library"),onCancel:L.onClose,onConfirm:b})):null,p?s.createElement(A.ZP,{machineIdentifier:r,providerIdentifier:n},s.createElement(te,{isOpen:j.isOpen,onModalClose:j.onClose})):null);var U,F};var Te=Object.defineProperty,xe=Object.defineProperties,Ae=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Le=(e,t,r)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,je=(e,t)=>{for(var r in t||(t={}))Ne.call(t,r)&&Le(e,r,t[r]);if(ke)for(var r of ke(t))Re.call(t,r)&&Le(e,r,t[r]);return e},Ve=(e,t)=>xe(e,Ae(t));const Ue={dispatchScanLibraryFiles:S.t9,dispatchCancelScanLibraryFiles:S.K$,dispatchEditLibrary:S.Oj,dispatchRefreshAllLibraryMetadata:S.ay,dispatchEmptyLibraryTrash:S.nP,dispatchAnalyzeLibrary:S.mp,dispatchDeleteLibrary:S.CM,dispatchRedirectToRoute:Z.im,dispatchReloadGuide:I.fh,dispatchCancelReloadGuide:I.Pv,dispatchPopulateHasiTunes:P.st,dispatchPinSources:E.W1,dispatchUnpinSources:E.Dm};class Fe extends s.Component{constructor(){super(...arguments),this.onScanLibraryPress=()=>{this.props.dispatchScanLibraryFiles({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})},this.onCancelScanLibraryPress=()=>{this.props.dispatchCancelScanLibraryFiles({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})},this.onEditLibraryPress=()=>{this.props.dispatchEditLibrary({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})},this.onRefreshAllLibraryMetadataPress=()=>{this.props.dispatchRefreshAllLibraryMetadata({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})},this.onEmptyLibraryTrashPress=()=>{this.props.dispatchEmptyLibraryTrash({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})},this.onAnalyzeLibraryPress=()=>{this.props.dispatchAnalyzeLibrary({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage})},this.onDeleteLibraryPress=()=>{this.props.dispatchDeleteLibrary({serverEntityID:this.props.serverEntityID,providerEntityID:this.props.providerEntityID,contentDirectory:this.props.sourceDirectory,metricsPage:this.props.metricsPage}),this.props.source.isSelected&&this.props.dispatchRedirectToRoute({route:"home"})},this.onRefreshGuidePress=()=>{this.props.dispatchReloadGuide({serverEntityID:this.props.serverEntityID,dvrID:this.props.provider.parentID,metricsPage:this.props.metricsPage})},this.onCancelRefreshGuidePress=()=>{this.props.dispatchCancelReloadGuide({serverEntityID:this.props.serverEntityID,dvrID:this.props.provider.parentID,metricsPage:this.props.metricsPage})},this.onTogglePinSources=()=>{this.props.isPinned?this.props.dispatchUnpinSources({sources:[this.props.source]}):this.props.dispatchPinSources({sources:[this.props.source]})}}componentDidMount(){const{isOwnedPlaylistSource:e,isConnected:t}=this.props;e&&t&&this._populateHasiTunes(this.props)}componentDidUpdate(e){const{isOwnedPlaylistSource:t,isConnected:r}=this.props;t&&r&&!e.isConnected&&this._populateHasiTunes(this.props)}_populateHasiTunes(e){this.props.dispatchPopulateHasiTunes({serverEntityID:e.serverEntityID})}render(){const e=this.props,{metricsPage:t,isConnected:r,isOwnedPlaylistSource:n,dispatchScanLibraryFiles:i,dispatchCancelScanLibraryFiles:a,dispatchEditLibrary:o,dispatchReloadGuide:l,dispatchCancelReloadGuide:c,dispatchPopulateHasiTunes:d,dispatchPinSources:u,dispatchUnpinSources:p}=e,m=((e,t)=>{var r={};for(var n in e)Ne.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ke)for(var n of ke(e))t.indexOf(n)<0&&Re.call(e,n)&&(r[n]=e[n]);return r})(e,["metricsPage","isConnected","isOwnedPlaylistSource","dispatchScanLibraryFiles","dispatchCancelScanLibraryFiles","dispatchEditLibrary","dispatchReloadGuide","dispatchCancelReloadGuide","dispatchPopulateHasiTunes","dispatchPinSources","dispatchUnpinSources"]);return s.createElement(Oe,Ve(je({},m),{onAnalyzeLibraryPress:this.onAnalyzeLibraryPress,onCancelRefreshGuidePress:this.onCancelRefreshGuidePress,onCancelScanLibraryPress:this.onCancelScanLibraryPress,onDeleteLibraryPress:this.onDeleteLibraryPress,onEditLibraryPress:this.onEditLibraryPress,onEmptyLibraryTrashPress:this.onEmptyLibraryTrashPress,onRefreshAllLibraryMetadataPress:this.onRefreshAllLibraryMetadataPress,onRefreshGuidePress:this.onRefreshGuidePress,onScanLibraryPress:this.onScanLibraryPress,onTogglePinSources:this.onTogglePinSources}))}}const Be=(0,f.Z)((function(){return(0,a.P1)(((e,{source:t})=>t),p.Z,u.Z,l.Z,m.Z,(0,c.Ol)(),(0,a.P1)((0,d.Z)(),(e=>e&&e.desktop.hasiTunes)),(0,o.Z)(),((e,t,r,n,i,s,a,o)=>{const l=i.some((t=>!!e&&t.key===e.key));if(!r||!n||!e||r.isOutOfDate)return{isUnavailable:!0,isPinned:l};const c=e.sourceType===y.lz,d=e.sourceType===y.Xp,u=e.sourceType===y.Hs,{features:{content:{directories:p=[]}={}}={}}=n||{},m=p.find((t=>t.id===e.directoryID)),f=r.isFullOwnedServer&&n.isLibraryProvider&&m&&/(\d+)$/.test(m.id)&&!c,b=r.isFullOwnedServer&&e.sourceType===y.ls,Z=!!p.find((({type:e})=>e===g.ARTIST)),S=n.features.settings;return{sourceDirectory:m,machineIdentifier:r.machineIdentifier,provider:n,providerIdentifier:n.identifier,server:r,hasProviderSettings:!!S&&(0,v.d)(t,S)&&!u&&(!d||!h.yv(n.identifier)),hasDiscoverActions:d,hasLibraryActions:f,hasDVRActions:r.isFullOwnedServer&&u,hasPlaylistsActions:b&&a&&Z,isConnected:r.isConnected,isUnavailable:r.isUnavailable,isPinned:l,isDeletingLibrary:!!s,isGuideRefreshing:!!o,isOwnedPlaylistSource:b}}))}),Ue)(Fe);Be.propTypes=Ve(je({},Be.propTypes),{source:b,serverEntityID:i().string,providerEntityID:i().string});const _e=Be},66757:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(56887);var s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p=function(e){return n.createElement(i.Z,(t=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({},e),a(t,o({containerClassName:"SourceSidebarConfirmModal-modalContainer-EmjMVe Modal-modalContainer-iz5oBP"}))));var t}},86644:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),i=r(10125);var s=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p=function(e){return n.createElement(i.Z,(t=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({},e),a(t,o({portalClassName:"SourceSidebarMenu-menuPortal-NUdeiw Menu-menuPortal-EGqW0f"}))));var t}},39874:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(22222),i=r(22688),s=r(36475),a=r(10379),o=r(91141),l=r(67294),c=r(28216),d=r(87999),u=r(62291),p=r(70777),m=r(73788),h=r(98476),g=r(2209),y=r(14580),v=r(15058),f=r(97380),b=r(4027),Z=r(1582),S=r(66757),P=r(86644);const I={placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,-10]}}]},E=(0,s.Z)((function(){return(0,n.P1)((0,n.P1)((0,o.Z)(),(e=>e.some((e=>e.refreshing)))),(0,i.tk)(),(0,i.k8)(),((e,t,r)=>({isLibraryRefreshing:e,isOptimizeDatabaseInProgress:!!t,isCleanBundlesInProgress:!!r})))}),(function(e,t){const r={serverEntityID:t.serverEntityID,metricsPage:t.metricsPage};return{onScanLibrariesPress(){e(a.iE(r))},onCancelScanLibrariesPress(){e(a.zl(r))},onEmptyTrashPress(){e(a.uo(r))},onOptimizeDatabasePress(){e(a.Q6(r))},onCleanBundlesPress(){e(a.ll(r))}}}))((function(e){const{serverEntityID:t,machineIdentifier:r,overflowMenuButtonID:n,isLibraryRefreshing:i,isOptimizeDatabaseInProgress:s,isCleanBundlesInProgress:a,isOverflowMenuOpen:o,onScanLibrariesPress:E,onCancelScanLibrariesPress:w,onEmptyTrashPress:C,onOptimizeDatabasePress:M,onCleanBundlesPress:D,onOverflowMenuClose:O}=e,T=(0,c.v9)((0,v.Z)(p.je)),x=(0,b.Z)(),A=(0,b.Z)(C),k=(0,b.Z)(M),N=(0,b.Z)(D);return l.createElement(l.Fragment,null,l.createElement(P.Z,{isOpen:o,options:I,target:n,onMenuClose:O},l.createElement(h.Z,{onPress:(0,y.Z)(O,x.onOpen)},T?(0,m.Z)("Grant Access"):(0,m.Z)("Share")),i?l.createElement(h.Z,{onPress:w},(0,m.Z)("Cancel Scan")):l.createElement(h.Z,{onPress:E},(0,m.Z)("Scan Library Files")),l.createElement(g.Z,{label:(0,m.Z)("Manage Server"),onMenuClose:O},l.createElement(h.Z,{to:(0,Z.Z)(r,"settings","general")},(0,m.Z)("Settings")),l.createElement(h.Z,{onPress:A.onOpen},(0,m.Z)("Empty Trash")),l.createElement(h.Z,{isDisabled:s,onPress:k.onOpen},(0,m.Z)("Optimize Database")),l.createElement(h.Z,{isDisabled:a,onPress:N.onOpen},(0,m.Z)("Clean Bundles")))),l.createElement(f.Z,{isOpen:x.isOpen,metricsProperties:{context:d.LIST},serverEntityID:t,sharingReason:f.$.SharingLibrary,onModalClose:x.onClose}),l.createElement(S.Z,{confirmLabel:(0,m.Z)("Empty"),isOpen:A.isOpen,message:(0,m.Z)("By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted."),metricsPage:u.cZ,title:(0,m.Z)("Empty Trash"),onCancel:A.onClose,onConfirm:A.onConfirm}),l.createElement(S.Z,{confirmLabel:(0,m.Z)("Optimize"),isOpen:k.isOpen,message:(0,m.Z)("Cleans up the library database and ensures it is operating as quickly as possible. This is especially useful when you've added or removed a large amount of media from the library."),metricsPage:u.tl,title:(0,m.Z)("Optimize Database"),onCancel:k.onClose,onConfirm:k.onConfirm}),l.createElement(S.Z,{confirmLabel:(0,m.Z)("Clean"),isOpen:N.isOpen,message:(0,m.Z)("The media server stores information about your media to disk, as well as posters, artwork, and other media resources from the internet. Running this task deletes any bundles which are no longer in use."),metricsPage:u.jB,title:(0,m.Z)("Clean Bundles"),onCancel:N.onClose,onConfirm:N.onConfirm}))}))},82155:(e,t,r)=>{"use strict";r.d(t,{R:()=>w,B:()=>M});var n=r(67294),i=r(28216),s=r(28531),a=r(62291),o=r(73788),l=r(29012),c=r(18222),d=r(85448),u=r(55097),p=r(70668),m=r(63135),h=r(17516),g=r(25555),y=r(69281),v=r(14853),f=r(56997),b=r(493),Z=r(34154),S=r(55949),P=r(88140),I=r(4027);const E="AgentUpgradeLibraryModals-checkInputGroup-kuIjXH";function w(e,t,r,n,i){t.filter((([e,,,t])=>!(n&&e!==n||i&&t!==i&&!r.upgradeAllLibraries))).forEach((([,t,n,i])=>{e((0,v.e0)({serverEntityID:t,providerEntityID:n,contentDirectory:i,options:{refreshMetadata:r.refreshMetadata}}))}))}function C(e){const t=(0,i.I0)(),r=(0,i.v9)(f.Z),v=(0,n.useMemo)((()=>r.filter((([t])=>t===e.machineIdentifier))),[r,e.machineIdentifier]),{onClose:I}=e,C=(0,n.useCallback)((r=>{I(),w(t,v,r,e.machineIdentifier,e.sourceDirectory)}),[v,t,I,e.machineIdentifier,e.sourceDirectory]);return n.createElement(S.Z,{containerClassName:"AgentUpgradeLibraryModals-modalContainer-SxT81Z Modal-modalContainer-iz5oBP",isOpen:e.isOpen,metricsPage:a.xC,size:y.HC,onModalClose:e.onClose},n.createElement(p.ZP,{onSubmit:C},n.createElement(P.Z,{onModalClose:e.onClose},n.createElement(h.Z,null,(0,o.Z)("Upgrade Library")),n.createElement(m.Z,null,n.createElement(l.Z,{message:(0,o.Z)("This library is currently using a legacy agent to match items and fetch artwork and other metadata. {openLink}There is a newer, faster, and more accurate agent available{closeLink} for this type of media. Would you like to upgrade the library now?"),tags:[{open:"openLink",close:"closeLink",component:d.Z,kind:g._8,to:s.nJ,target:"_blank"}]}),n.createElement("div",{className:"AgentUpgradeLibraryModals-note-n95EWI"},(0,o.Z)("Note: Metadata for existing items in this library will not be affected until they are refreshed. We can refresh metadata immediately after updating this library or you can wait for the next scheduled update.")),n.createElement(u.Z,{checkboxText:(0,o.Z)("Refresh metadata for this library after upgrading"),formGroupClassName:E,initialValue:!0,name:"refreshMetadata",size:y.HC})),n.createElement(b.Z,null,v.length>1?n.createElement(u.Z,{checkboxText:(0,o.Z)("Upgrade all libraries"),formGroupClassName:E,initialValue:!1,name:"upgradeAllLibraries",size:y.HC}):null,n.createElement(Z.Z,null,n.createElement(c.Z,{onPress:e.onClose},(0,o.Z)("No thanks")),n.createElement(c.Z,{kind:g._8,type:"submit"},(0,o.Z)("Upgrade")))))))}function M(e,t,r){const{isOpen:i,onClose:s,onOpen:a}=(0,I.Z)(),o=(0,n.useCallback)((()=>{s(),null==r||r()}),[r,s]);return{Modal:(0,n.useCallback)((()=>n.createElement(C,{isOpen:i,machineIdentifier:e,sourceDirectory:t,onClose:o,onOpen:a})),[i,e,o,a,t]),onOpen:a}}},27254:(e,t,r)=>{"use strict";r.d(t,{Z:()=>oe});var n=r(67294),i=r(45191),s=r(75404),a=r(62291),o=r(69281),l=r(20533),c=r(55949),d=r(28216),u=r(22222),p=r(77072),m=r(22169),h=r(20683),g=r(77054),y=r(94184),v=r.n(y),f=r(73788),b=r(18222),Z=r(85448),S=r(24642),P=r(63135),I=r(74249),E=r(17516),w=r(25555),C=r(42985),M=r(88140),D=r(97125),O=r(7568),T=r(21696),x=r(52919),A=r(31481),k=r(26782);const N=function({img:e,title:t,description:r}){return n.createElement("div",{className:"PlexPassFeature-feature-g2cqrl"},n.createElement("div",{className:"PlexPassFeature-featurePadding-HlzHf1"},n.createElement("img",{className:"PlexPassFeature-featureImage-Cu_YWf",src:e}),n.createElement("div",{className:"PlexPassFeature-featureContainer-weVg5v"},n.createElement("div",{className:"PlexPassFeature-featureTitle-MjXZRx"},t),n.createElement("div",{className:"PlexPassFeature-featureDescription-PzPjOw"},r))))},R="PlexPassModalContent-planButton-Llj7fU";var L=Object.defineProperty,j=Object.defineProperties,V=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,_=(e,t,r)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))F.call(t,r)&&_(e,r,t[r]);if(U)for(var r of U(t))B.call(t,r)&&_(e,r,t[r]);return e},H=(e,t)=>j(e,V(t));const W=function(e){const{metricsProperties:t,subscribeUrl:r,infoUrl:i,plans:a,isPlansPending:l,isPlansPopulated:c,plansError:d,onModalClose:u}=e;return n.createElement(M.Z,{onModalClose:u},n.createElement(E.Z,{className:"PlexPassModalContent-header-xdr0aX ModalHeader-modalHeader-nb9ueN"},n.createElement("div",{className:"PlexPassModalContent-plexPassTitle-nn8Har"},(0,f.Z)("Plex Pass")),(0,f.Z)("Enhance your Plex experience with exclusive premium features")),n.createElement(P.Z,{innerClassName:"PlexPassModalContent-body-HYN68L ModalBody-innerModalBody-T6u3sU"},n.createElement(N,{description:(0,f.Z)("Enjoy your media offline on Android and iOS devices"),img:T,title:(0,f.Z)("Downloads")}),n.createElement(N,{description:(0,f.Z)("Connect a tuner and antenna to record free OTA broadcasts"),img:O,title:(0,f.Z)("Live TV & DVR")}),n.createElement(N,{description:(0,f.Z)("Set up managed user accounts to create custom access restrictions"),img:A,title:(0,f.Z)("Parental Controls")}),n.createElement(N,{description:(0,f.Z)("Connect your media server to your home automation system"),img:k,title:(0,f.Z)("Webhooks")}),n.createElement(N,{description:(0,f.Z)("See the play history, bandwidth, and top users on your media server"),img:D,title:(0,f.Z)("Server Dashboard")}),n.createElement(N,{description:(0,f.Z)("Sweet Fades, Loudness Leveling, Lyrics, and more"),img:x,title:(0,f.Z)("Premium Music Magic")}),n.createElement("div",{className:"PlexPassModalContent-moreFeatures-bRy2FB"},n.createElement(Z.Z,{className:"PlexPassModalContent-link-g5YUvW",target:"_self",to:i},(0,f.Z)("...plus more exclusive features!")))),n.createElement(I.Z,{className:"PlexPassModalContent-footer-ZCY4ih ModalFooter-modalFooter-IDP5sZ"},l?n.createElement("div",{className:"PlexPassModalContent-spinnerContainer-dky0KZ"},n.createElement(C.Z,null)):null,n.createElement("div",{className:v()("PlexPassModalContent-plansContainer-KFjXra",l&&"PlexPassModalContent-isPlansPending-aAkb00")},!l&&c?a.map((e=>n.createElement(S.Z,H(z({key:e.id},t),{action:s.kD,plan:e.id}),n.createElement(b.Z,{className:R,kind:w._8,size:o.ln,target:"_self",to:h.Z.join(r,{plan:e.id,continue:window.location.href})},e.formattedPrice,"  ",e.name)))):null,!l&&d?n.createElement(S.Z,H(z({},t),{action:s.kD,plan:"unknown"}),n.createElement(b.Z,{className:R,kind:w._8,size:o.ln,target:"_self",to:r},(0,f.Z)("Subscribe"))):null)))};var G=Object.defineProperty,Q=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class Y extends n.Component{UNSAFE_componentWillMount(){this.props.isSignedIn&&this.props.fetchPlans()}UNSAFE_componentWillReceiveProps(e){e.isSignedIn&&e.isSignedIn!==this.props.isSignedIn&&e.fetchPlans()}render(){return n.createElement(W,((e,t)=>{for(var r in t||(t={}))$.call(t,r)&&q(e,r,t[r]);if(Q)for(var r of Q(t))K.call(t,r)&&q(e,r,t[r]);return e})({},this.props))}}const X=(0,d.$j)((function(){return(0,u.P1)(((e,{origin:t})=>t),p.Z,((e,t)=>{const r=t.desktop,n={utm_source:"app.plex.tv",utm_medium:"app",utm_campaign:"PP_in-app-upsell_01"};return e&&(n.utm_content=e),{isSignedIn:t.isSignedIn,plans:r.plans,isPlansPending:r.isPlansPending,isPlansPopulated:r.isPlansPopulated,plansError:r.plansError,subscribeUrl:h.Z.join((0,m.LL)("/plex-pass/purchase"),n),infoUrl:(0,m.LL)("/plex-pass")}}))}),{fetchPlans:g.ZQ})(Y);var J=Object.defineProperty,ee=Object.defineProperties,te=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,se=(e,t,r)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class ae extends n.Component{constructor(){super(...arguments),this.onModalClose=()=>{var e,t;(0,i.DB)("metrics").trackClick((e=((e,t)=>{for(var r in t||(t={}))ne.call(t,r)&&se(e,r,t[r]);if(re)for(var r of re(t))ie.call(t,r)&&se(e,r,t[r]);return e})({},this.props.metricsProperties),t={page:a.G5,action:s.AM},ee(e,te(t)))),this.props.onModalClose()}}shouldComponentUpdate(e,t){return(0,l.Z)(this,e,t)}render(){const{origin:e,isOpen:t,metricsProperties:r}=this.props;return n.createElement(c.Z,{isOpen:t,metricsPage:a.G5,metricsProperties:r,size:o.ln,onModalClose:this.onModalClose},n.createElement(X,{metricsProperties:r,origin:e,onModalClose:this.onModalClose}))}}const oe=ae},90280:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(45697),i=r.n(n),s=r(67294),a=(r(32903),r(72186)),o=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const h=function(e,t){var r;const{isUpdatingPropName:n,errorPropName:o,clearDirtyOnChangePropName:h}=t;return(r=class extends s.Component{constructor(e,t){super(e,t),this.onFormChange=e=>{this.props.onFormChange&&this.props.onFormChange(e),this.state.isDirty||this.setState({isDirty:!0})},this.state={isDirty:!1}}UNSAFE_componentWillReceiveProps(e){let t=!1;h&&(t=this.props[h]!==e[h]);const r=this.props[n]&&!e[n]&&null===e[o];this.state.isDirty&&(t||r)&&this.setState({isDirty:!1})}render(){return s.createElement(e,(t=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&m(e,r,t[r]);return e})({isDirty:this.state.isDirty},this.props),r={onFormChange:this.onFormChange},l(t,c(r))));var t,r}}).propTypes={onFormChange:i().func},r.displayName=`DirtyAware(${(0,a.Z)(e)})`,r.WrappedComponent=e,r}},91479:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),i=r(45062),s=r(72186),a=r(20533),o=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p={[i.JU]:!0,[i.jx]:!0,[i.Ge]:!0,[i.nO]:!0,[i.u5]:!0},m=function(e){var t;return(t=class extends n.Component{constructor(e,t){super(e,t),this.onKeyDown=e=>{const{pressedModifierKeys:t}=this.state;p[e.which]&&-1===t.indexOf(e.which)&&this.setState({pressedModifierKeys:t.concat(e.which)})},this.onKeyUp=e=>{const{pressedModifierKeys:t}=this.state,r=t.indexOf(e.which);r>-1&&this.setState({pressedModifierKeys:t.slice(0,r).concat(t.slice(r+1))})},this.onMouseDown=e=>{this._isMouseDown=!0},this.onMouseUp=e=>{this._isMouseDown=!1},this.onFocusChange=e=>{this.state.pressedModifierKeys.length&&this.setState({pressedModifierKeys:[]}),this._isMouseDown=!1},this.onMouseEnter=e=>{const{selectionType:t,activeSelectionType:r}=this.props;this._isMouseDown&&r&&r===t&&this.onSelectPress(e)},this.onSelectPress=e=>{const{selectionID:t,selectionType:r,isSelected:n,onSelectItem:i}=this.props;n||i({id:t,type:r,isRangeSelect:e.shiftKey})},this.onDeselectPress=e=>{const{selectionID:t,isSelected:r,onDeselectItem:n}=this.props;r&&n({id:t})},this.state={pressedModifierKeys:[]}}componentDidMount(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),document.addEventListener("mousedown",this.onMouseDown),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("dragstart",this.onFocusChange),document.addEventListener("contextmenu",this.onFocusChange),window.addEventListener("blur",this.onFocusChange)}shouldComponentUpdate(e,t){return(0,a.Z)(this,e,t)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("dragstart",this.onFocusChange),document.removeEventListener("contextmenu",this.onFocusChange),window.removeEventListener("blur",this.onFocusChange)}render(){const t=this.props,{selectionType:r,activeSelectionType:i,isSelected:s}=t,a=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(t,["selectionType","activeSelectionType","isSelected"]),{pressedModifierKeys:o}=this.state,p=!!i;return n.createElement(e,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({hasActiveSelection:p,isConflictingTypeSelected:p&&i!==r,isModifierKeyPressed:o.length>0,isOtherItemSelected:p&&!s,isSelected:s,onDeselectPress:this.onDeselectPress,onMouseEnter:this.onMouseEnter,onSelectPress:this.onSelectPress},a))}}).displayName=`Selectable(${(0,s.Z)(e)})`,t.WrappedComponent=e,t.defaultProps={disableSelection:!1},t}},54139:(e,t,r)=>{"use strict";r.d(t,{OT:()=>n,PI:()=>i,gO:()=>s,SU:()=>a,KP:()=>o,L4:()=>l});const n="RECORDING_PRIORITY_SUBSCRIPTION",i="PLAY_QUEUE_ITEM",s="PLAYLIST_ITEM",a="ALBUM_ITEM",o="SOURCE_ITEM",l="LINEUP_CHANNEL"},22310:(e,t,r)=>{"use strict";function n(e,t){const{x:r,y:n}=e,i=`translate3d(${r}px, ${n}px, 0)`;return{WebkitTransform:i,msTransform:i,transform:i,width:t?`${t}px`:"100%"}}r.d(t,{Z:()=>n})},5447:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(9709);function i(e,t){return t.isCloud?null==e?void 0:e.providerSourceTitle:t.isEmbedded?void 0:t.isFullOwnedServer?e?e.serverFriendlyName:void 0:e?`${e.serverSourceTitle}  ${e.serverFriendlyName}`:(0,n.Z)(t)}},42363:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294);function i(e,t){return e&&e[t]?e[t].split(","):[]}function s(e,t,r){const s=i(e,t),a=i(e,r),[o,l]=(0,n.useState)(s),[c,d]=(0,n.useState)(a);return{initialAllowTags:s,initialExcludeTags:a,allowTags:o,excludeTags:c,onAllowTagsChange:(0,n.useCallback)((e=>{l(e)}),[]),onExcludeTagsChange:(0,n.useCallback)((e=>{d(e)}),[])}}},94659:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),i=r(83782);function s(){const e=(0,i.Z)(),[t,r]=(0,n.useState)(!1),s=(0,n.useCallback)((()=>{r(!t)}),[t,r]),a=(0,n.useCallback)((()=>{r(!1)}),[r]);return{menuButtonID:e,isMenuOpen:t,onMenuButtonPress:s,onMenuClose:a}}},4027:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(67294);function i(e){const[t,r]=(0,n.useState)(!1);return{isOpen:t,onOpen:(0,n.useCallback)((()=>r(!0)),[]),onClose:(0,n.useCallback)((()=>r(!1)),[]),onConfirm:(0,n.useCallback)((()=>{r(!1),e&&e()}),[e])}}},6646:(e,t,r)=>{"use strict";r.d(t,{P:()=>o,E:()=>l});var n=r(8238),i=r(20573);function s(){return!i.Z.isHostedHttps||!!n.Z.allowMixedContent}function a(e){return e.isFullServer&&!!e.presence&&!e.httpsRequired}function o(e){return!s()&&a(e)}function l(e){const t=e.hasHttpsConnections&&!e.hasFallbackConnections;return s()&&a(e)&&t}},96859:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(69772),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function c(e=40,t=10,r){return(0,n.ZP)(((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e})({direction:n.yZ,columns:1,overscan:t,getCellWidth:e=>e.innerViewportWidth,getCellHeight:()=>e},r))}},26265:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(20956),i=r(59258),s=r(24107);function a({type:e,aspectRatio:t,titleCount:r,context:a}){const o=parseInt(s.Z.posterTitleHeight,10);let l,c,d,u,p,m=parseInt(s.Z.posterTitlePadding,10);return(0,n.Z)(a)?(l=Math.max(2,r-1),c=300,d=200,p=2,u=6,m*=2):(l=e===i.t1?r+3:r,d=t>1?180:80,c=t>1?240:120,p=t>1?2:3,u=t>1?8:11),{titleHeight:l?l*o+m:0,minCellWidth:d,preferredCellWidth:c,minColumns:p,maxColumns:u}}},94329:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),i=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&l(e,r,t[r]);return e};function d(e,t){return function(r){return n.createElement(t,c(c({},e),r))}}},74084:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(24107);const i=parseFloat(n.Z.prePlayPosterWidthRatio,10),s=parseInt(n.Z.prePlayPosterMinWidth,10),a=parseInt(n.Z.prePlayPosterMaxWidth,10),o=function(e,t){const r=-1*t+1,n=e*(r/30+i);return Math.max(Math.min(n,a+30*r),s)}},2696:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(3510),i=r(85209);function s(e,t=""){const{type:r,title:s,parentTitle:a,grandparentTitle:o,index:l,parentIndex:c,originallyAvailableAt:d}=e;switch(r){case i.EPISODE:{let e=`${o} ${t} ${(0,n.Z)({seasonIndex:c,episodeIndex:l,date:d,noLeadingZero:!0,separator:"  "})}`;return s&&(e+=` ${t} ${s}`),e}case i.SEASON:case i.ALBUM:return`${a} ${t} ${s}`;case i.TRACK:return`${o} ${t} ${a} ${t} ${s}`;default:return s}}},25511:(e,t,r)=>{"use strict";r.d(t,{tW:()=>Z,_7:()=>S,yq:()=>E,y7:()=>C,QF:()=>M,Dd:()=>D,h$:()=>O,J5:()=>T,wc:()=>x,Or:()=>A,Jm:()=>N,k7:()=>R,k_:()=>L,ZP:()=>j});var n=r(13469),i=r.n(n),s=r(8238),a=r(86418),o=r(89083),l=r(74226),c=r(70777),d=r(851),u=r(32903),p=r(52108),m=r(85209),h=r(57674),g=r(89896),y=r(62896),v=r(13272);const f={showPlay:Z,showPlayVersion:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!Z({server:e,provider:t,stableUser:r,metadataItem:n})&&(t.isLibraryProvider&&n.Media&&n.Media.length>1)},showPlayAll:Z,showShuffle:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!n.radio&&(Z({server:e,provider:t,stableUser:r,metadataItem:n})&&!!t.features.playqueue)},showQueue:S,showPlayTrailer:P,showPlayPlexMix:I,showQueuePlexMix:function({server:e,provider:t,stableUser:r,metadataItem:n}){return I({server:e,provider:t,stableUser:r,metadataItem:n})},showPlayMusicVideo:P,showPlayRadio:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!n.hasRadioStation},showPlayArtistTV:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!n.hasArtistTVStation},showAddToWatchlist:function({provider:e,stableUser:t}){return!!(e.features.actions&&e.features.actions.addToWatchlist&&(0,g.d)(t,e.features.actions.addToWatchlist))},showAddToPicks:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!(r.features[c.Ah]&&t.features.actions&&t.features.actions.pick)},showAddToPlaylist:E,showAddToSaved:function({server:e,provider:t,stableUser:r,metadataItem:n}){if(!t)return!1;const i=t.features.actions.save;return!(!i||!(0,g.d)(r,i))&&null!=n.saved},showAddToLibrary:function({server:e,provider:t,stableUser:r,metadataItem:n}){if(!t)return;const i=n.type===m.TRACK||n.type===m.ALBUM||n.type===m.ARTIST,s=l.wB(t.identifier,l.xF),a=!!r.features[c.Ao],o=(0,g.d)(r,{requires:d.s});return i&&s&&a&&o},showFavorite:C,showUnfavorite:M,showMarkPlayed:D,showMarkUnplayed:O,showSettings:function({server:e,provider:t,stableUser:r,metadataItem:n}){const{preferences:i}=n;return!t.features.manage&&null!=i},showEdit:T,showModifySmartPlaylist:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!T({server:e,provider:t,stableUser:r,metadataItem:n})&&!!n.smart},showRefresh:x,showAnalyze:A,showFixMatch:k,showMatch:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!T({server:e,provider:t,stableUser:r,metadataItem:n})&&(!!n.guid&&!k({server:e,provider:t,stableUser:r,metadataItem:n}))},showUnmatch:function({server:e,provider:t,stableUser:r,metadataItem:n}){return k({server:e,provider:t,stableUser:r,metadataItem:n})},showSplitApart:function({server:e,provider:t,stableUser:r,metadataItem:n}){if(!T({server:e,provider:t,stableUser:r,metadataItem:n}))return!1;let s;return s=m.isParentType(n.type)?n.Location:i().filter(n.Media,(e=>!e.proxyType)),s.length>1},showSyncDownload:function({server:e,provider:t,metadataItem:r}){if(!s.Z.allowSyncDownload)return!1;if(!t)return!1;if(!l.QN.includes(t.identifier))return!1;if(r.isPlaylist&&r.playlistType===h.pV)return!1;if(r.isDownloaded&&!r.downloadSubscriptionID)return!1;if(!r.hasOwnProperty("guid"))return!1;if(r.remoteMedia)return!1;const n=t.features[a.Z.SUBSCRIBE],i=(null==n?void 0:n.flavor)===o.HN;return t.isLibraryProvider?e.allowSync&&i:i},showOptimize:N,showDownload:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!s.Z.allowDirectDownload&&(!!t.protocols.download&&!n.isExtra&&!n.remoteMedia)},showShare:function({server:e,provider:t,stableUser:r,metadataItem:n}){return e.isFullOwnedServer&&t.isLibraryProvider&&!n.isExtra&&!n.remoteMedia},showDelete:R,showDeleteVersion:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!T({server:e,provider:t,stableUser:r,metadataItem:n})&&(!!e.allowMediaDeletion&&i().filter(n.Media,(e=>!!e.proxyType)).length>0)},showViewPlayHistory:function({server:e,provider:t,stableUser:r,metadataItem:n}){return e.isFullOwnedServer&&!(0,y.Z)(e)},showWatchTogether:function({server:e,provider:t,stableUser:r,metadataItem:n}){const i=!!r.features[c.Bs],s=l.wB(t.identifier,[l.Y3,l.uk]),a=n.isExtra;return i&&s&&!a},showGetInfo:function({server:e,provider:t,stableUser:r,metadataItem:n}){return!!t&&t.isLibraryProvider&&!n.isExtra&&!n.indirect},showSelect:L},b={[m.MOVIE]:["showPlay","showPlayVersion","showQueue","showPlayTrailer","showAddToWatchlist","showAddToPlaylist","showMarkPlayed","showMarkUnplayed","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showOptimize","showDownload","showShare","showDelete","showDeleteVersion","showViewPlayHistory","showWatchTogether","showGetInfo","showSelect"],[m.SHOW]:["showPlay","showPlayAll","showShuffle","showQueue","showPlayTrailer","showAddToPicks","showAddToWatchlist","showAddToPlaylist","showAddToSaved","showMarkPlayed","showMarkUnplayed","showEdit","showSettings","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showOptimize","showShare","showDelete","showViewPlayHistory","showSelect"],[m.SEASON]:["showPlay","showPlayAll","showShuffle","showQueue","showAddToPlaylist","showMarkPlayed","showMarkUnplayed","showEdit","showAnalyze","showSyncDownload","showOptimize","showShare","showDelete","showViewPlayHistory","showSelect"],[m.EPISODE]:["showPlay","showPlayVersion","showQueue","showAddToPlaylist","showMarkPlayed","showMarkUnplayed","showEdit","showRefresh","showAnalyze","showSyncDownload","showOptimize","showDownload","showShare","showDelete","showDeleteVersion","showViewPlayHistory","showWatchTogether","showGetInfo","showSelect"],[m.ARTIST]:["showPlay","showShuffle","showPlayRadio","showPlayArtistTV","showQueue","showAddToPlaylist","showAddToSaved","showAddToLibrary","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showShare","showDelete","showViewPlayHistory","showSelect"],[m.ALBUM]:["showPlay","showShuffle","showQueue","showAddToPicks","showAddToPlaylist","showAddToSaved","showAddToLibrary","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showShare","showDelete","showViewPlayHistory","showSelect"],[m.TRACK]:["showPlay","showQueue","showPlayPlexMix","showQueuePlexMix","showPlayMusicVideo","showAddToPlaylist","showAddToSaved","showAddToLibrary","showMarkPlayed","showMarkUnplayed","showEdit","showAnalyze","showSyncDownload","showDownload","showShare","showDelete","showViewPlayHistory","showGetInfo","showSelect"],[m.ARTIST]:["showPlay","showShuffle","showPlayRadio","showPlayArtistTV","showQueue","showAddToPlaylist","showAddToSaved","showAddToLibrary","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showShare","showDelete","showViewPlayHistory","showSelect"],[m.ALBUM]:["showPlay","showShuffle","showQueue","showAddToPicks","showAddToPlaylist","showAddToSaved","showAddToLibrary","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showShare","showDelete","showViewPlayHistory","showSelect"],[m.TRACK]:["showPlay","showQueue","showPlayPlexMix","showQueuePlexMix","showPlayMusicVideo","showAddToPlaylist","showAddToSaved","showAddToLibrary","showMarkPlayed","showMarkUnplayed","showEdit","showAnalyze","showSyncDownload","showDownload","showShare","showDelete","showViewPlayHistory","showGetInfo","showSelect"],[m.PHOTO_ALBUM]:["showPlay","showShuffle","showAddToPlaylist","showEdit","showAnalyze","showShare","showSelect"],[m.PHOTO]:["showPlay","showAddToPlaylist","showFavorite","showUnfavorite","showEdit","showAnalyze","showDownload","showShare","showDelete","showGetInfo","showSelect"],[m.CLIP]:["showPlay","showPlayVersion","showQueue","showPlayTrailer","showAddToPlaylist","showAddToSaved","showMarkPlayed","showMarkUnplayed","showEdit","showRefresh","showAnalyze","showFixMatch","showMatch","showUnmatch","showSplitApart","showSyncDownload","showOptimize","showDownload","showShare","showDelete","showDeleteVersion","showViewPlayHistory","showWatchTogether","showGetInfo","showSelect"],[m.PLAYLIST]:["showDelete","showEdit","showPlay","showQueue","showShuffle","showAddToSaved","showSyncDownload","showShare","showSelect","showEdit","showModifySmartPlaylist"],[m.COLLECTION]:["showPlay","showQueue","showShuffle","showAddToPlaylist","showEdit","showDelete"]};function Z({server:e,provider:t,stableUser:r,metadataItem:n}){return(0,v.Z)(e,t,r.features,n)}function S({server:e,provider:t,stableUser:r,metadataItem:n}){const i=Z({server:e,provider:t,stableUser:r,metadataItem:n}),s=n.isExtra&&n.isPremium;return i&&!!t.features.playqueue&&!s}function P({server:e,provider:t,stableUser:r,metadataItem:n}){return!!n.primaryExtraKey}function I({server:e,provider:t,stableUser:r,metadataItem:n}){return!(!n.related||!n.related.find((e=>/similarPlaylist/.test(e))))}function E({server:e,provider:t,stableUser:r,metadataItem:n}){if(!t)return!1;const i=t.features.playlist;return!(!i||!(0,g.d)(r,i))&&!(n.isExtra&&n.isPremium||(0,y.Z)(e))}function w({provider:e,stableUser:t,metadataItem:r}){return!(!e.features.actions.rate||m.isDirectoryType(r.type)||r.isFolder)}function C({server:e,provider:t,stableUser:r,metadataItem:n}){return w({provider:t,stableUser:r,metadataItem:n})&&!(0,p.ZP)(n)}function M({server:e,provider:t,stableUser:r,metadataItem:n}){return w({provider:t,stableUser:r,metadataItem:n})&&(0,p.ZP)(n)}function D({server:e,provider:t,stableUser:r,metadataItem:n}){return!(!(t&&t.features.actions&&t.features.actions.scrobble&&t.features.actions.scrobble.key)||t.protocols.livetv||n.type===m.TRACK||null!=n.saved&&!n.saved&&!n.viewOffset||n.isExtra)&&(m.isParentType(n.type)?n.unviewedLeafCount>0:!n.viewCount||!!n.viewOffset)}function O({server:e,provider:t,stableUser:r,metadataItem:n}){return!(!(t&&t.features.actions&&t.features.actions.scrobble&&t.features.actions.scrobble.reverseKey)||t.protocols.livetv||n.type===m.TRACK||null!=n.saved&&!n.saved||n.isExtra)&&(m.isParentType(n.type)?n.viewedLeafCount>0:!!n.viewCount||!!n.viewOffset)}function T({server:e,provider:t,stableUser:r,metadataItem:n}){const{isLibraryItem:i,isPlaylist:s,isExtra:a,isFolder:o,radio:l,readOnly:c}=n,d=i&&!a&&!o&&!l;return s?!c:!!(t&&t.features.manage&&d)}function x({server:e,provider:t,stableUser:r,metadataItem:n}){return T({server:e,provider:t,stableUser:r,metadataItem:n})}function A({server:e,provider:t,stableUser:r,metadataItem:n}){return!n.indirect&&!n.remoteMedia&&T({server:e,provider:t,stableUser:r,metadataItem:n})}function k({server:e,provider:t,stableUser:r,metadataItem:n}){return!!T({server:e,provider:t,stableUser:r,metadataItem:n})&&!(!n.guid||/(local|none):\/\//.test(n.guid))}function N({server:e,provider:t,stableUser:r,metadataItem:n}){return!!T({server:e,provider:t,stableUser:r,metadataItem:n})&&!(!e.transcoderVideo||!e.backgroundProcessing)}function R({server:e,provider:t,stableUser:r,metadataItem:n}){return!!T({server:e,provider:t,stableUser:r,metadataItem:n})&&!!(n.isPlaylist||n.type===m.COLLECTION||n.remoteMedia||e.allowMediaDeletion)}function L({server:e,provider:t,stableUser:r,metadataItem:n}){return!n.radio&&t.isLibraryProvider&&!n.isFolder}function j({server:e,provider:t,stableUser:r,metadataItem:n}){const{type:s}=n,a=b[s];return a?a.reduce(((a,o)=>{const l=f[o];return(0,u.Z)(i().isFunction(l),`getMetadataActionProps: Invalid action, ${o}, for ${s}`),a[o]=!!(e&&t&&n)&&l({server:e,provider:t,stableUser:r,metadataItem:n}),a}),{}):{}}},57635:(e,t,r)=>{"use strict";r.d(t,{G:()=>l,Z:()=>c});var n=r(85209),i=r(17633),s=r(99027);function a(e){return e.thumb||e.parentThumb||e.grandparentThumb}function o(e){return e.art||e.parentArt||e.grandparentArt}function l(e,t,r){if(r)switch(r){case i.sD:switch(e){case n.SEASON:case n.EPISODE:case n.ALBUM:case n.TRACK:return t.thumb}break;case i.wl:case i.Bs:switch(e){case n.MOVIE:return o(t);case n.EPISODE:return o(t)||t.thumb}break;case i.r$:switch(e){case n.MOVIE:return o(t);case n.EPISODE:return t.thumb||o(t)}break;case i.F5:case i.zg:case i.jF:case i.Ap:switch(e){case n.EPISODE:return t.thumb}}switch(e){case n.MOVIE:case n.SHOW:return t.thumb;case n.SEASON:return a(t);case n.EPISODE:return t.grandparentThumb;case n.ARTIST:return t.thumb;case n.ALBUM:case n.TRACK:return a(t);case n.PHOTO:case n.PHOTO_ALBUM:case n.CLIP:return t.thumb;case n.PLAYLIST:return t.thumb||t.composite;default:return t.thumb}}function c(e,t,r,n,i){const a=null==e?(0,s.dz)(t,r,i):e,o=null==t?(0,s.Cr)(e,r,i):t;return{url:l(r,n,i),width:a,height:o}}},22499:(e,t,r)=>{"use strict";r.d(t,{d:()=>Ee,Z:()=>Ce});var n=r(67294),i=r(74226),s=r(85209),a=r(17633),o=r(59258),l=r(28216),c=r(22222),d=r(18622),u=r(73701),p=r(11244),m=r(62934),h=r(73788);const g=(0,l.$j)((function(){return(0,c.P1)(m.Z,u.Z,p.Z,d.Z,((e,t,r,n)=>e&&r&&e.machineIdentifier!==r.machineIdentifier?{sourceTitle:r.sourceTitle||r.friendlyName}:{}))}))((function(e){const{className:t,sourceTitle:r}=e;return r?n.createElement("span",{className:t},(0,h.Z)("from {sourceTitle}",{sourceTitle:r})):null}));var y=r(86555);const v=(0,l.$j)((function(){return(0,c.P1)((0,y.Z)(),(e=>({attributionLogo:e.attributionLogo})))}))((function(e){const{attributionLogo:t,className:r}=e;return t?n.createElement("span",{className:r},n.createElement("img",{className:"MetadataAttributionLogoTitle-img-iWdQbX",src:t})):null}));var f=r(91023),b=r(36475),Z=r(30547),S=r(356);const P=(0,b.Z)((function(){return(0,c.P1)(((e,{metricsContext:t})=>t),p.Z,d.Z,(0,y.Z)(),((e,t,r,n={})=>{const i={};return e&&(i.context=e),{parentTitle:n.parentTitle,parentRoute:(0,Z.Z)(t,r,n.parentKey,i)}}))}))((function({className:e,tabIndex:t,parentTitle:r,parentRoute:i}){return n.createElement(S.Z,{className:e,route:i,tabIndex:t,title:r})}));var I=r(13469),E=r.n(I),w=r(53534),C=r(45731),M=r(23944);const D=(0,l.$j)((function(){return(0,c.P1)(C.Z,(0,w.Z)(),(0,c.P1)((0,y.Z)(),(0,w.Z)(),((e,t)=>{if(e&&t)return E().findWhere(e.Channel,{id:t.channelID})})),((e,t,r)=>({beginsAt:t&&t.beginsAt,endsAt:t&&t.endsAt,channel:r&&r.tag,timeFormat:e})))}))(M.Z);var O=r(74378),T=r(91564);var x=Object.defineProperty,A=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const L=(0,l.$j)((function(){return(0,c.P1)((0,y.Z)(),((e={})=>({attribution:e.attribution})))}))((function(e){var t=e,{className:r,attribution:i}=t,s=((e,t)=>{var r={};for(var n in e)k.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&A)for(var n of A(e))t.indexOf(n)<0&&N.call(e,n)&&(r[n]=e[n]);return r})(t,["className","attribution"]);return n.createElement("span",{className:r},n.createElement("div",{className:"MetadataTitleAttributedLink-container-KBhWLu"},n.createElement(O.Z,{attribution:i,className:"MetadataTitleAttributedLink-badge-t9hd1e"}),n.createElement(T.Z,((e,t)=>{for(var r in t||(t={}))k.call(t,r)&&R(e,r,t[r]);if(A)for(var r of A(t))N.call(t,r)&&R(e,r,t[r]);return e})({className:"MetadataTitleAttributedLink-title-xasS9B"},s))))})),j=(0,l.$j)((function(){return(0,c.P1)((0,y.Z)(),((e={})=>({childCount:e.childCount,subtype:e.subtype})))}))((function({className:e,childCount:t,subtype:r}){let i;if(null!=t){const e=1===t,n={itemCount:t};i=r===s.MOVIE?e?(0,h.Z)("{itemCount} movie",n):(0,h.Z)("{itemCount} movies",n):r===s.SHOW?e?(0,h.Z)("{itemCount} show",n):(0,h.Z)("{itemCount} shows",n):e?(0,h.Z)("{itemCount} item",n):(0,h.Z)("{itemCount} items",n)}return n.createElement("span",{className:e},i)}));var V=r(33578),U=r(57467),F=r(94685);const B=(0,l.$j)((function(){return(0,c.P1)(C.Z,(0,U.Z)(),((e,t)=>({beginsAt:t&&t.beginsAt,endsAt:t&&t.endsAt,timeFormat:e})))}))((function(e){const{className:t,beginsAt:r,endsAt:i,timeFormat:s}=e,a=(0,F.Z)(r,i,{includeMinuteZero:!1,timeFormat:s});return n.createElement("span",{className:t},a)}));var _=r(33593);const z=function({className:e,date:t}){return t?n.createElement("span",{className:e},(0,_.Z)(t)):null},H=(0,l.$j)((function(){return(0,c.P1)((0,y.Z)(),((e={})=>({addedAt:e.addedAt})))}))((function({className:e,addedAt:t}){return t?n.createElement(z,{className:e,date:1e3*t}):null}));var W=r(57557),G=r(96281);const Q=(0,l.$j)((function(){return(0,c.P1)((0,y.Z)(),((e={})=>({extraType:e.extraType})))}))((function({className:e,extraType:t}){const r=G.ZP.get(t);return n.createElement("span",{className:e},r?r.title:"")}));var $=r(52501),K=r(62466);const q=function({className:e,leafCount:t}){let r;return null!=t&&(r=1===t?(0,h.Z)("{itemCount} item",{itemCount:t}):(0,h.Z)("{itemCount} items",{itemCount:t})),n.createElement("span",{className:e},r)},Y=(0,l.$j)((function(){return(0,c.P1)((0,y.Z)(),((e={})=>({playlistType:e.playlistType,duration:e.duration,leafCount:e.leafCount})))}))((function(e){const{className:t,playlistType:r,duration:i,leafCount:s}=e;return r===$.pV?n.createElement(q,{className:t,leafCount:s}):n.createElement(K.Z,{className:t,duration:i})})),X=function({className:e,leafCount:t}){let r;return null!=t&&(r=1===t?(0,h.Z)("{episodeCount} episode",{episodeCount:t}):(0,h.Z)("{episodeCount} episodes",{episodeCount:t})),n.createElement("span",{className:e},r)},J=(0,l.$j)((function(){return(0,c.P1)((0,y.Z)(),((e={})=>({skipChildren:e.skipChildren,childCount:e.childCount,leafCount:e.leafCount})))}))((function({className:e,skipChildren:t,childCount:r,leafCount:i}){if(t)return n.createElement(X,{className:e,leafCount:i});if(!r)return null;const s=1===r?(0,h.Z)("{seasonCount} season",{seasonCount:r}):(0,h.Z)("{seasonCount} seasons",{seasonCount:r});return n.createElement("span",{className:e},s)}));var ee=r(2727);const te=(0,b.Z)((function(){return(0,c.P1)(((e,{metricsContext:t})=>t),m.Z,u.Z,(0,y.Z)(),((e,t,r,n={})=>{const i={};return e&&(i.context=e),{title:n.title,index:n.index,route:(0,Z.Z)(t,r,n.key,i),parentTitle:n.parentTitle,parentIndex:n.parentIndex,parentRoute:n.skipParent?null:(0,Z.Z)(t,r,n.parentKey,i),originallyAvailableAt:n.originallyAvailableAt}}))}))(ee.Z);var re=r(18598),ne=r(15928),ie=r(35172);function se(e,t){const r=Math.abs(Date.now()-1e3*e),n=36e5;return r<n?window.setTimeout(t,6e4):r<864e5?window.setTimeout(t,n):void 0}class ae extends n.Component{constructor(e,t){super(e,t),this.trackTime=()=>{const{timestamp:e}=this.props,t=(0,ie.Z)(e);this.setState({title:t}),this.timeoutID=se(e,this.trackTime)};const{timestamp:r}=this.props,n=(0,ie.Z)(r);this.state={title:n},this.timeoutID=se(r,this.trackTime)}UNSAFE_componentWillReceiveProps(e){if(e.timestamp!==this.props.timestamp){const t=(0,ie.Z)(e.timestamp);this.setState({title:t})}}componentWillUnmount(){this.timeoutID&&(this.timeoutID=window.clearTimeout(this.timeoutID))}render(){const{className:e}=this.props,{title:t}=this.state;return n.createElement("span",{className:e},t)}}const oe=ae,le=(0,l.$j)((function(e,t){return(0,c.P1)((0,y.Z)(),((e={})=>({addedAt:e.addedAt})))}))((function({className:e,addedAt:t}){return n.createElement(oe,{className:e,timestamp:t})}));var ce=r(51851),de=r(38264),ue=r(54834);const pe=(0,l.$j)((function(){return(0,c.P1)((0,y.Z)(),((e={})=>{const t=(0,s.getMetadataType)(e.type),r=e.Media&&e.Media[0];return{type:t&&t.mediaType,bitrate:r&&r.bitrate}}))}))((function(e){const{className:t,type:r,bitrate:i}=e;if(null==i)return null;const s=r===ue.j0?(0,ce.Z)(i):(0,de.Z)(i);return n.createElement("span",{className:t},s)}));var me=r(86023);const he=(0,l.$j)((function(e,t){return(0,c.P1)((0,y.Z)(),((e={})=>({contentRating:e.contentRating})))}))((function({className:e,contentRating:t}){return n.createElement("span",{className:e},(0,me.Z)(t))}));var ge=r(62618);const ye=(0,l.$j)((function(e,t){return(0,c.P1)((0,y.Z)(),((e={})=>{const{duration:t}=e;return{duration:t}}))}))(K.Z),ve=(0,l.$j)((function(e,t){return(0,c.P1)((0,y.Z)(),((e={})=>({lastViewedAt:e.lastViewedAt})))}))((function({className:e,lastViewedAt:t}){return n.createElement(oe,{className:e,timestamp:t})})),fe=(0,l.$j)((function(){return(0,c.P1)((0,y.Z)(),((e={})=>({viewCount:e.viewCount})))}))((function({className:e,viewCount:t}){const r=(t>1?(0,h.Z)("{viewCount} Plays",{viewCount:t}):null)||(t>0?(0,h.Z)("{viewCount} Play",{viewCount:t}):null)||(0,h.Z)("Unplayed");return n.createElement("span",{className:e},r)})),be=(0,l.$j)((function(e,t){return(0,c.P1)((0,y.Z)(),((e={})=>{const{originallyAvailableAt:t}=e;return{originallyAvailableAt:t}}))}))((function({className:e,originallyAvailableAt:t}){return n.createElement("span",{className:e},(0,_.Z)(t,"MMM d, yyyy"))}));var Ze=r(45924);const Se=(0,l.$j)((function(){return(0,c.P1)((0,y.Z)(),((e={})=>{const t=e.Media&&e.Media[0];return{videoResolution:t&&t.videoResolution}}))}))((function({className:e,videoResolution:t}){return n.createElement("span",{className:e},(0,Ze.Z)(t))}));var Pe=r(37787);function Ie(e,t,r){if("mixed"===e)return[];switch(r){case a.F5:case a.r$:case a.zg:case a.UC:switch(t){case"musicVideo":switch(e){case"clip":return[T.Z,re.Z]}}switch(e){case"episode":return[f.Z,W.Z];case"clip":return[T.Z,H];case"track":return[T.Z,re.Z]}break;case a.IN:switch(e){case"participant":return[T.Z]}}switch(e){case"channels":return[V.Z,D];case"movie":return[T.Z,ne.Z];case"show":return[T.Z,J];case"season":return[P,T.Z];case"episode":return[f.Z,T.Z,te];case"artist":return[T.Z];case"album":return[P,L];case"track":return[f.Z,T.Z];case"photo":return[V.Z];case"photoalbum":case"clip":return[T.Z];case"extra":return[V.Z,Q];case"musicVideo":return[f.Z,V.Z];case"playlist":return[T.Z,Y];case"collection":return[T.Z,j];case"directory":case"genre":case"content":case"channel":return[]}return[V.Z]}function Ee(e,t,r,n,i,a){const l=t===o.t1,c=t===o.pV,d=r===s.COLLECTION;if(a)return we(a);if(!l&&!c&&!d)return e;const u=Ie(r,n,i),p=Ie(t,n,i),m=e.filter((e=>!p.includes(e)));return u.concat(m)}function we(e){return e.map((e=>{switch(e){case"attributionLogo":return v;case"episodeIdentifier":case"index":return te;case"grandparentTitle":return f.Z;case"parentTitle":return P;case"title":return T.Z;default:return()=>null}}))}function Ce(e,t,r={}){const{subtype:n,activeSort:s,isExternal:o,providerEntityID:l,displayFields:c}=r;if(c)return we(c);const d=Ie(e,n,t);if(o&&d.push(g),i.wB(l,i.Ll)&&("movie"===e||"episode"===e||"mixed"===e))switch(t){case a.F5:case a.r$:d.push(B);break;case a.UC:break;default:d.push(D)}if(s){const e=function(e){const[t]=e.split(":");switch(t){case"addedAt":return le;case"duration":return ye;case"lastViewedAt":return ve;case"originallyAvailableAt":return be;case"rating":case"audienceRating":return ge.Z;case"userRating":return Pe.Z;case"viewCount":return fe;case"mediaBitrate":return pe;case"contentRating":return he;case"mediaHeight":return Se;case"year":return ne.Z}}(s);e&&!d.includes(e)&&d.push(e)}return d}},57702:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return!(!e||!e.isDownloaded)}},64800:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return!(!e||!e.downloadSubscriptionID)}},99027:(e,t,r)=>{"use strict";r.d(t,{s4:()=>i,Zp:()=>s,oz:()=>a,n3:()=>o,dz:()=>l,Cr:()=>c});var n=r(17633);const i=1/1.5,s=1,a=16/9;function o(e,t){if(t)switch(t){case n.sD:case n.IN:switch(e){case"episode":return a}break;case n.wl:case n.Bs:return a;case n.r$:switch(e){case"movie":case"episode":return a}break;case n.F5:case n.zg:case n.jF:case n.Ap:switch(e){case"episode":return a}break;case n.Uz:switch(e){case"clip":return s}break;case n.lD:case n.UC:switch(e){case"clip":return i}}switch(e){case"channels":return s;case"movie":case"show":case"season":case"episode":return i;case"artist":case"album":case"track":case"photo":case"photoalbum":return s;case"clip":return a;case"collection":return i;case"extra":case"musicVideo":return a;case"mixed":return i;case"platform":case"directory":case"genre":return a;case"content":case"channel":case"hub":case"list":default:return s}}function l(e,t,r){const n=o(t,r);return Math.round(e*n)}function c(e,t,r){const n=o(t,r);return Math.round(e/n)}},44777:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&o(e,r,t[r]);if(i)for(var r of i(t))a.call(t,r)&&o(e,r,t[r]);return e};function c(e,t,r){return l(l(l({},e),r),t)}},4913:(e,t,r)=>{"use strict";r.r(t),r.d(t,{POSTER:()=>i,MOSAIC:()=>s,TABLE:()=>a,SIMPLE_SUMMARY:()=>o,SUMMARY:()=>l,EPG_EPISODE:()=>c,SHARED_ITEMS:()=>d,showListStyles:()=>u,showListStylesSlider:()=>p,showListStylesMenu:()=>m,default:()=>h});var n=r(45697);const i="poster",s="mosaic",a="table",o="simpleSummary",l="summary",c="epgEpisode",d="sharedItems";function u(e,t){return p(t)||m(e)}function p(e){return e===i||e===s}function m(e){return e.length>1}const h=r.n(n)().oneOf([i,s,a,o,l,c,d])},27586:(e,t,r)=>{"use strict";r.d(t,{XN:()=>n,JF:()=>i,$6:()=>s});const n="calendar",i="agenda",s=[n,i]},38316:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(20683);function i(e){return n.Z.join("#!/downloads",e)}},54237:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(85209),i=r(14739),s=r(2696),a=r(8235);function o(e,t,r){let o=`metadataItemID=${t.ratingKey}`;return r&&(o+=`&viewedAt=${(0,i.xP)(r)}`),(0,a.Z)(e,{filters:o,filterTitle:(0,s.Z)(t),activeTimePeriod:r,isParentType:(0,n.isParentType)(t.type)})}},8235:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(20683);function i(e,t){return n.Z.join(`#!/server/${encodeURIComponent(e)}/playHistory`,t)}},30547:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(54834),i=r(20683);function s(e,t,r,s={},a){if(!e||!t||!r)return;const o=function(e,t){const r=encodeURIComponent(e.machineIdentifier),n=encodeURIComponent(t.identifier),i=`/server/${r}`;return t.isLibraryProvider?i:`${e.isCloud?"":i}/provider/${n}`}(e,t),l=encodeURIComponent(r),c={[n.pV]:"album",[n.pX]:"playlist",[n.j0]:"playlist"},d=`#!${o}/${a?c[a]:"details"}?key=${l}`;return i.Z.join(d,s)}},1582:(e,t,r)=>{"use strict";function n(e,t,r){return`#!/settings/server/${encodeURIComponent(e)}/${t}/${r}`}r.d(t,{Z:()=>n})},24793:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let n,i={};function s(e,t){if(!e||null==t)return!1;if(e===n&&i.hasOwnProperty(t))return i[t];e!==n&&(n=e,i={});const r=-1!==e.indexOf(t);return i[t]=r,r}},13886:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(13469),i=r.n(n);const s=function(e,t){const r=i().groupBy(e,(e=>e.advanced||t&&t.has(e.id)?"advanced":"basic"));return r.basic=i().indexBy(r.basic,"id"),r}},32667:(e,t,r)=>{"use strict";function n(e){return`${e}`}r.d(t,{H:()=>n})},54647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(87036);const i=Object.assign({},n.Z,{starSpeed:"0.3s",starPulseScale:1.35,starPulseSpeed:"0.15s",starPulseTimingFunction:"cubic-bezier(0.075, 0.82, 0.165, 1)",posterFlipSpeed:"0.8s",overlaySpeed:"0.3s",chartOpacitySpeed:"0.3s"})},51017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(28309);const i="#e5a00d",s="#fafafa",a="#a0aab1",o="#1f2326",l="#343a3f",c=Object.assign({},n.Z,{v4AccentLight:i,v4AltLight:s,v4AltMedium:a,v4AltMediumDark:"#737e87",v4AltMediumLight:"#d6dcdf",v4BaseDark:o,v4BaseLight:"#444f56",v4BaseMedium:"#2a3136",v4BaseMediumLight:l,v4DefaultColor:s,v4DividerColor:o,primaryButtonColor:o,selectBackground:"#525252",dragPreviewBackgroundColor:"rgba(76, 76, 76, 0.7)",dragPreviewOpacity:"0.9",dragPreviewLowOpacity:"0.35",dropLocationColor:"#f9be03",sliderTrackBackgroundColor:"rgba(255, 255, 255, 0.2)",sliderThumbBackgroundColor:"#ddd",sliderThumbHoverBackgroundColor:"#fff",rowOddBackgroundColor:"rgba(255, 255, 255, 0.03)",rowEvenBackgroundColor:"#292929",avatarLoadingBackgroundColor:"#999",avatarBackgroundColor:"#EEEEEE",detailsShadowColor:"#000",playerBackgroundColor:"#232426",playerTopControlsBackgroundColor:"rgba(35, 36, 38, 0.45)",playerBottomControlsBackgroundColor:"rgba(35, 36, 38, 0.8)",playerPrimaryButtonBackgroundColor:"rgba(0, 0, 0, 0.45)",miniPlayerBackgroundColor:n.Z.blackDarkerTranslucentBackgroundColor,playerSecondaryOverlayColor:"rgba(0, 0, 0, 0.5)",playerPosterActionColor:n.Z.blackDarkTranslucentBackgroundColor,playerPanelColor:"rgba(0, 0, 0, 0.6)",playerDisabledLinkColor:"rgba(255, 255, 255, 0.15)",playerShadowColor:"rgba(0, 0, 0, 0.45)",seekBarTrackColor:"rgba(0, 0, 0, 0.75)",seekBarTrackColorHover:"rgba(255, 255, 255, 0.15)",seekBarFillColor:"#cc7b19",seekBarBufferColor:"rgba(204, 123, 25, 0.3)",seekBarThumbnailShadowColor:"rgba(0, 0, 0, 0.45)",seekBarTooltipBackgroundColor:"#000",seekBarTooltipShadowColor:"rgba(0, 0, 0, 0.5)",thumbnailBackgroundColor:"rgba(0, 0, 0, 0.45)",adSeekBarFillColor:"#f9be03",equalizerBarColor:"#f9be03",htmlMediaElementBackgroundColor:"#000",toastBackgroundColor:"rgba(1, 1, 1, 0.50)",posterBackgroundColor:"rgba(0, 0, 0, 0.45)",posterHoverBackgroundColor:"radial-gradient(farthest-corner at 50% 50%, rgba(50, 50, 50, 0.5) 50%, rgb(50, 50, 50) 100%)",posterSelectedBackgroundColor:"rgba(30, 30, 30, 0.5)",posterBlendedSelectedBackgroundColor:"rgba(19, 19, 19, 0.78);",posterPlaceholderIconColor:"rgba(255, 255, 255, 0.15)",posterCenterCircleBackgroundColor:"rgba(0, 0, 0, 0.45)",posterBadgeShadowColor:"rgba(0, 0, 0, 0.6)",posterProgressTrackBackgroundColor:"rgba(0, 0, 0, 0.75)",posterVersionBadgeColor:"#556688",posterSmartBadgeColor:"rgb(142, 97, 145)",posterFavoriteBadgeColor:"rgb(229, 172, 182)",v4CardBackgroundColor:"rgba(0, 0, 0, 0.45)",v4CardShimmerBackgroundColor:"rgba(0, 0, 0, 0.3)",v4CardShadowColor:"rgba(0, 0, 0, 0.3)",v4CardHoverBackgroundColor:"rgba(30, 30, 30, 0.6)",v4CardHoverBorderColor:i,recordColor:"#f53",recordHoverColor:"lighten(#f53, 0.1)",recordBackgroundColor:"#b32",recordActiveBackgroundColor:"darken(#b32, 0.1)",dayOfWeekBackgroundColor:"rgba(255, 255, 255, 0.1)",dayOfWeekColor:"rgba(255, 255, 255, 0.75)",todayBackgroundColor:"rgba(255, 255, 255, 0.3)",todayColor:"rgba(255, 255, 255, 0.1)",calendarEventSuccessBackgroundColor:"rgba(0, 102, 153, 0.15)",calendarEventSuccessAlternateBackgroundColor:"rgba(31, 120, 165, 0.17)",calendarEventSuccessHoverBackgroundColor:"rgba(76, 148, 183, 0.20)",calendarEventErrorBackgroundColor:"rgba(187, 51, 34, 0.3)",calendarEventErrorAlternateBackgroundColor:"rgba(191, 64, 48, 0.31)",calendarEventErrorHoverBackgroundColor:"rgba(199, 87, 73, 0.34)",recordingIconColor:"#ff5533",playColor:"rgba(255, 255, 255, 0.75)",channelGridTimelineLabelColor:a,channelGridSelectedItemDetailsBackgroundColor:"rgba(0, 0, 0, 0.2)",channelGridBorderColor:l,channelGridHoverColor:"rgba(255, 255, 255, 0.2)",channelGridBackgroundColor:"rgba(160, 170, 177, 0.1)",channelGridOnAirBackgroundColor:"rgba(160, 170, 177, 0.1)",channelGridFinishedAiringBackgroundColor:"rgba(160, 170, 177, 0.3)",channelGridProgressColor:"rgba(160, 170, 177, 0.1)",channelGridMissingItemBackgroundColor:"rgba(0, 0, 0, 0)",channelGridChannelThumbBackgroundColor:"rgba(42, 49, 54, 0.5)",channelGridRecentChannelThumbBackgroundColor:"rgba(255, 255, 255, 0.05)",channelGridChannelIdentifierBackroundColor:"rgba(42, 49, 54, 0.5)",channelGridNewBadgeColor:"rgba(84, 84, 84)",filterBuilderInputBackgroundColor:"#1e2121",altFilterBuilderInputBackgroundColor:n.Z.blackDarkerTranslucentBackgroundColor,dvrBackgroundColor:n.Z.blackDarkTranslucentBackgroundColor,prePlayUnavailableButtonBackgroundColor:"rgba(255, 84, 50, 0.6)",prePlayPartialButtonBackgroundColor:"rgba(204, 123, 25, 0.6)",preferredServerButtonBackgroundColor:"rgba(0, 0, 0, 0.45)",sortableHomeHubsContainerBackgroundColor:"rgba(255, 255, 255, 0.03)",sortableHomeHubsRowBackgroundColor:"rgba(255, 255, 255, 0.02)",chartTranslucentOpacity:"0.25",serverDashboardTileRowBackgroundPrimaryColor:"rgba(229, 160, 13, 0.2)",serverDashboardTileRowBackgroundSecondaryColor:"rgba(229, 160, 13, 0.15)",serverDashboardTileRowBackgroundTertiaryColor:"rgba(229, 160, 13, 0.1)",serverDashboardTileRowBackgroundQuaternaryColor:"rgba(229, 160, 13, 0.05)",sessionStopBackgroundColor:"#701f29",sessionStopIconColor:"rgba(255, 255, 255, 0.5)",sourceSidebarSelectedColor:"rgba(255, 255, 255, 0.07)",liveTVSettingsTuner1Color:"#7EB0D5",liveTVSettingsTuner2Color:"#BC9BB7",liveTVSettingsTuner3Color:"#8f9148",liveTVSettingsTuner4Color:"#7a3d84",liveTVSettingsTuner5Color:"#ca5f5a"})},24107:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(65838);const i=Object.assign({},n.Z,{sliderTrackSize:"60px",sliderThumbSize:"12px",serverMenuItemHeight:"60px",sourceMenuItemHeight:"65px",sourceMenuItemGutter:"25px",posterCenterCircleSize:"42px",posterBadgeHeight:"24px",posterHoverSlideDistance:"10px",posterIconPadding:"20px",posterProgressHeight:"4px",v4CardBorderRadius:"4px",v4CardShadowSize:"4px",v4CardTitleGap:"8px",v4CardTitleHeight:"24px",v4CardCircleSize:"42px",listButtonHeight:"40px",hubCellHeaderBottomPadding:"5px",hubCellHeaderTopPadding:"25px",v4ListSpacing:"40px",v4SpotlightHeight:"350px",pagePadding:"48px",v4PagePadding:"40px",v4PagePaddingAlt:"16px",pageHeaderRowHeight:"50px",pageHeaderLeftMargin:"40px",pageHeaderTabButtonLeftRightMargin:"5px",pageHeaderTabButtonHeight:"40px",recordingPriorityPaneWidth:"360px",recordingPriorityPaneBorderWidth:"4px",recordingPriorityDragHandleWidth:"62px",channelGridRowHeight:"60px",channelGridTitleColumnWidth:"145px",channelGridChannelColumnWidth:"250px",channelGridChannelOverflowWidth:"100px",channelGridChannelIconWidth:"80px",channelGridBorderSize:"1.5px",jumpBarCharacterHeight:"25px",jumpBarCharacterPadding:"10px",jumpBarGutter:"30px",jumpBarMargin:"10px",playCellWidth:"42px",actionsCellWidth:"82px",actionsCellPadding:"10px",summaryCellHeight:"136px",simpleSummaryCellHeight:"90px",summaryCellPadding:"20px",trackCellHeight:"60px",trackCellPadding:"10px",mosaicCellPadding:"5px",timelineGutter:"60px",prePlaySummaryMaxWidth:"750px",prePlayPosterMinWidth:"150px",prePlayPosterMaxWidth:"230px",prePlayPosterWidthRatio:"0.15",prePlayContentPadding:"20px",prePlayRatingBase:"1em",v4PrePlayListTitleGap:"20px",v4PrePlayDividerHeight:"2px",v4PrePlayAvailabilityWidth:"125px",v4PrePlayAvailabilityHeight:"100px",v4PrePlayAvailabilityGap:"8px",postPlayPosterWidth:"260px",postPlayTitleHeight:"40px",postPlayAutoPlayHeight:"55px",dvrSetupImageWidth:"193px",dvrSetupChannelMappingItemHeight:"40px",dvrSetupSpinnerSize:"100px",playerControlsHeight:"100px",playerControlsMinWidth:"640px",playerControlsNarrowHeight:"140px",playerControlsNarrowBreakpoint:"960px",playerControlsPosterHeight:"80px",playerControlsPosterLeftGutter:"8px",playerControlsPosterBottomGutter:"8px",playerControlsNarrowPosterBottomGutter:"48px",playerControlsContentSpacing:"20px",playerControlsSquarePosterWidth:"80px",playerControlsLandscapePosterWidth:`${Math.round(16/9*80)}px`,playerInfoBarHeight:"45px",playerTopControlsHeight:"60px",playerSideControlsWidth:"100px",playerOverlayActionEdgeGutter:"20px",playerIconButtonSize:"30px",playerIconButtonSpacing:"5px",playerVolumeSliderWidth:"32px",playerVolumeSliderHeight:"60px",seekBarHeight:"4px",seekBarTooltipMarginBottom:"4px",seekBarTooltipHeight:"23px",seekBarTooltipSmallWidth:"60px",seekBarTooltipLargeWidth:"90px",playQueueItemHeight:"68px",playQueueMoveButtonWidth:"54px",playQueueSidePadding:"60px",lyricsLineHeight:"30px",lyricsLineWidth:"640px",playerMediaOverlayInnerMargin:"1vw",playerMediaOverlayOuterMargin:"2vw",playlistItemCardWidth:"64px",playlistBadgeSize:"30px",navigationIconSize:"24px",sourceSidebarIconSize:"24px",sourceSidebarWidth:"48px",sourceSidebarExpandedWidth:"260px",sourceSidebarLeftGutter:"12px",sourceSidebarItemHeight:"50px",sourceSidebarLinkHoverStatusbarAllowance:"20px",sourceSidebarServerHeaderIconSize:"24px",homeServerListItemHeight:"40px",serverSelectMenuWidth:"260px",heroBadgeHeight:"90px",heroPageMinHeight:"600px",serverShareListRowHeight:"40px",lineupSettingChannelHeight:"40px",spotlightHubCellHeight:"324px",spotlightHubCellGap:"25px",watchTogetherLobbyPosterWidth:"260px",watchTogetherLobbyTitleHeight:"40px",downloadCellHeight:"120px",liveTVSettingsDeviceGap:"2px",liveTVSettingsDeviceWidth:"270px",liveTVSettingsBorderRadius:"4px",liveTVSettingsDeviceBorderSize:"8px",liveTVSettingsChannelItemHeight:"50px",liveTVSettingsChannelItemWidth:"450px",liveTVSettingsChannelThumbWidth:"60px",liveTVSettingsChannelThumbHeight:"40px",platformThumbSize:"50px"})},36182:(e,t,r)=>{"use strict";r.d(t,{VQ:()=>n,dp:()=>i,jP:()=>s});const n="CLEAR_CLOUD_MEDIA_PROVIDERS",i="SIGN_OUT",s="DONE"},84010:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={allowFlash:!0,allowHttpsMediaServerConnections:!0,allowIPv6ServerConnections:!0,allowMediaServerRelayConnections:!0,allowMultipleWebSocketConnections:!0,shouldCreateFlexModels:!0,shouldCreateStateTree:!0,shouldRequestHTMLFromCloudProvider:!0,allowCloudPubSub:!0,allowLoopbackDiscovery:"http:"===window.location.protocol,allowSSO:!1,bufferingDetectionLimit:500,allowSyncSettings:!0,allowSync:!0,allowDirectDownload:!0,allowSyncDownload:!1}},72945:(e,t,r)=>{"use strict";var n={};r.r(n),r.d(n,{abortServerConnectionTest:()=>Ve,analyzeItems:()=>ze,analyzeSection:()=>We,authenticateWithHash:()=>gn,authenticateWithServer:()=>hn,autoMatch:()=>ht,changeArtwork:()=>yt,cleanBundles:()=>ut,connectServer:()=>$t,deleteAllVersionGenerators:()=>zt,deleteFile:()=>Zt,deleteItem:()=>jt,deleteItems:()=>Xe,deleteMediaItem:()=>nt,deletePlaylist:()=>lt,deleteSection:()=>at,deleteSectionThumbnails:()=>ot,deleteVersionGenerator:()=>Bt,deleteVersions:()=>it,disableVersionGenerator:()=>Ut,emptyTrash:()=>pt,enableVersionGenerator:()=>Vt,match:()=>mt,merge:()=>Ke,optimize:()=>dt,populateServerIdentity:()=>Ue,rate:()=>vt,reconnectServer:()=>Kt,refreshMetadata:()=>_e,removeDevice:()=>yn,removeServer:()=>Jt,reprocessVersionGenerator:()=>Ft,resetUser:()=>$r,selectStream:()=>bt,signInServer:()=>Yt,signOut:()=>bn,splitApart:()=>$e,switchUser:()=>Xr,testServerConnection:()=>je,uninstallChannel:()=>Gt,unmatch:()=>Ge,updateChannel:()=>Ht,updateLibrary:()=>ct});var i={};r.r(i),r.d(i,{BACKGROUND_TRANSCODE_JOBS:()=>UI,FRIEND:()=>Yu.vO,HOME_USER:()=>Yu.Tl,HUB:()=>Yu.km,LIBRARY:()=>Yu.Y3,LIVE_TV_SESSION:()=>Yu.RP,MEDIA_SUBSCRIPTION:()=>Yu.PK,METADATA_ITEM:()=>Yu.TY,METADATA_LIST:()=>Yu.$4,PLAYLIST_ITEM:()=>Yu.gO,PLAY_QUEUE_ITEM:()=>Yu.PI,PROVIDER:()=>Yu.MC,RESOURCE:()=>Yu.YI,SERVER:()=>Yu.cN,TRANSCODE_JOBS:()=>Yu.PC,USER:()=>Yu.xR,WATCH_TOGETHER_ROOM:()=>Yu.r8}),r(49407);var s=r(44898);r(3758),r(49810),r(99959),r(82107),r(36583),r(31110),document.body.className=s.o;var a=r(26051),o=r(19755),l=r.n(o),c=r(67294),d=r(43192),u=r(57865),p=r(73935),m=r(28216),h=r(5977),g=r(45191),y=r(13469),v=r.n(y),f=r(86832),b=r(20683);const Z={PUT:!0,DELETE:!0},S={Accept:!0,"Accept-Language":!0,"Content-Language":!0,"Content-Type":!0},P=/^(text\/plain|multipart\/form-data|application\/x-www-form-urlencoded)/,I=/(^X-Plex-[^=]+)/i,E=/(^[^?]+)\?(.+$)/;function w(e){const{type:t,contentType:r,headers:n,allowHeadersInUrl:i,allowBlacklistedMethodHeaders:s}=e;if(!i)return;if(Z[t]&&!s)return;const a={};let o=!1;if(v().each(n,((e,t)=>{S[t]||(I.test(t)?(o=!0,a[t]=e,delete n[t]):f.Z.warn('Did not move header "%s" to query string. This can result in an unnecessary OPTIONS preflight request.',t))})),o){const r=e.url.match(E),[,n,i]=r||[null,e.url,null],s=i?i.split("&"):[],[o,l]=v().partition(s,(e=>I.test(e))),c=e.data;"GET"===t&&c&&(l.push(v().isString(c)?c:b.Z.stringifyParams(c)),delete e.data),o.forEach((e=>{const t=e.match(I);t&&delete a[t[1]]}));const d=b.Z.stringifyParams(a);d&&o.push(d),e.url=`${n}?${l.concat(o).join("&")}`}r&&!P.test(r)&&f.Z.warn('Sending %s request with Content-Type "%s". This can result in an unnecessary OPTIONS preflight request.',t,r)}var C=r(36675);function M(){return l().ajaxPrefilter(w),C.Z.startListening(),l().Deferred().resolve().promise()}var D=r(33646),O=r(45354),T=r(71371),x=r(65935),A=r(56036),k=Object.defineProperty,N=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const V=["X-Plex-Device","X-Plex-Model","X-Plex-Platform","X-Plex-Platform-Version","X-Plex-Product","X-Plex-Version"];var U=r(32903),F=r(88993);const B=function(e){const{hostname:t,protocol:r}=e,n="file:"===r;let i;return"https:"===r?i="https":"http:"===r?i=F.lv(t)?"http-loopback":"http":n&&(i="file"),i};var _=r(1618),z=r(25755),H=r(54264),W=Object.defineProperty,G=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))K.call(t,r)&&Y(e,r,t[r]);if($)for(var r of $(t))q.call(t,r)&&Y(e,r,t[r]);return e};const J=/^utm_/;function ee(){const{searchParams:e,hashParams:t}=(0,H.Z)(window.location.href),r=X(X({},(0,_.Z)(t)),(0,_.Z)(e));return Object.keys(r).reduce(((e,t)=>(J.test(t)&&(e[t.replace(J,"")]=r[t]),e)),{})}function te(e={}){const t=(0,g.DB)("metrics"),{context:r={}}=e;var n,i;return t.set({deviceIdentifier:x.Z.prop("X-Plex-Client-Identifier"),context:(n=X({},r),i={campaign:ee(),device:{product:x.Z.prop("X-Plex-Product"),version:x.Z.prop("X-Plex-Version"),platform:x.Z.prop("X-Plex-Platform"),platformVersion:x.Z.prop("X-Plex-Platform-Version"),device:x.Z.prop("X-Plex-Device"),model:x.Z.prop("X-Plex-Model"),screenResolution:x.Z.prop("X-Plex-Device-Screen-Resolution"),layout:"desktop",protocol:B(window.location)}},G(n,Q(i)))}),(0,z.Z)(t.start())}function re(){return(0,f.Z)("[Sources] Initializing..."),(0,g.DB)("sourceManager").start(),(0,f.Z)("[Sources] Finished initialization"),l().Deferred().resolve().promise()}r(21356),r(56150),r(76823),r(91477);var ne=r(8238),ie=r(20573),se=r(94818),ae=r(8523),oe=r(55438),le=r(47970),ce=r(14076),de=r.n(ce);const ue=a.Z.ItemView.extend({mixins:[le.Z],className:"alert transition-in",template:de(),alertDuration:2e3,transitionDuration:500,events:{mouseenter:"onMouseEnter",mouseleave:"onMouseLeave","click .close-btn":"onCloseClick"},initialState:"transitionIn",states:{transitionIn:{nextState:"visible",onEnter:function(){this.$el.triggerReflow(),this.$el.removeClass("transition-in"),this.startTransition()}},visible:{nextState:"transitionOut",onEnter:function(){this.transitionOutTimeout=window.setTimeout(this.enterNextState,this.alertDuration)}},transitionOut:{onEnter:function(){this.$el.addClass("transition-out"),this.startTransition()}}},initialize:function(e){this.bindAllWhenRendered(["enterNextState"]),v().isString(e)&&(e={message:e}),this.type=e.type,this.message=e.message,this.type&&this.$el.addClass("has-"+this.type)},serializeData:function(){return{type:this.type,message:this.message}},startTransition:function(){window.setTimeout(this.enterNextState,this.transitionDuration)},onRender:function(){v().defer(this.enterNextState)},onStateMachineComplete:function(){this.close()},onMouseEnter:function(){window.clearTimeout(this.transitionOutTimeout)},onMouseLeave:function(){"visible"===this.currentState&&(window.clearTimeout(this.transitionOutTimeout),this.transitionOutTimeout=window.setTimeout(this.enterNextState,this.alertDuration/2))},onCloseClick:function(e){e.preventDefault(),"visible"===this.currentState&&(window.clearTimeout(this.transitionOutTimeout),this.enterNextState())}}),pe=se.Z.extend({mixins:[oe.Z],initialize(){this.openAlerts={}},start(){this.listenTo(ae.Z,{"show:alert":this.showAlert})},showAlert:function(e){const t=e.message;if(this.openAlerts[t])return;const r=new ue(e);this.openAlerts[t]=!0,this.listenToOnce(r,"close",(function(){delete this.openAlerts[t]})),l()("body").append(r.render().el)}});function me(){(new pe).start()}const he=se.Z.extend({mixins:[oe.Z],initialize(){this.modals=[]},start(){this.listenTo(ae.Z,{"show:modal":this.showModal,"hide:modal":this.hideModal})},showModal(e){this.modals.push(e);const t=l()("body");e.transparent&&t.addClass("show-modal-transparent"),t.append(e.render().el)},hideModal(e){const t=v().indexOf(this.modals,e);t>-1&&this.modals.splice(t,1)[0].close(),e.transparent&&!v().findWhere(this.modals,{transparent:!0})&&l()("body").removeClass("show-modal-transparent")}});function ge(){(new he).start()}var ye=r(41821),ve=r(68173),fe=r(96830),be=r(3615);const Ze=function(){if(!ie.Z.hasReplaceState)return l().Deferred().resolve().promise();const e=l().Deferred(),t=window.location,r=be.Z.parseQueryString(t.search);let n;try{n=JSON.parse(r.alerts),delete r.alerts}catch(e){}if(n){fe.Z.push(...n);const e=`${b.Z.join([`${t.origin}${t.pathname}`],r)}${t.hash}`;window.history.replaceState({},"",e)}return e.resolve().promise()};var Se=r(3578),Pe=r(69272),Ie=r(6545);function Ee(e){return v().isString(e)&&e.trim().length>0}function we(e,t){const r=(0,Ie.Z)();return(0,f.Z)("[appModelInitializer] Generating new %s [%s]",t,r),e.set(t,r),Se.Z.set(t,r)}function Ce(e,t){let r;const n=e.get(t);return Ee(n)?r=Se.Z.set(t,n):(r=Se.Z.get(t),r=r.then((r=>{if(!Ee(r))return f.Z.error("[appModelInitializer] Invalid %s found in storage [%s]",t,n),we(e,t);e.set(t,r)}),(()=>((0,f.Z)("[appModelInitializer] Failed to read %s from storage",t),we(e,t))))),r}function Me(e){const t=Se.Z.get("skipSignIn");return t.always((t=>{e.set("skipSignIn","1"===t)})),t}function De(){const e=(0,g.DB)("appModel");return(0,Pe.Z)([Ce(e,"clientID"),Ce(e,"anonymousClientID"),Me(e)])}var Oe=r(90095),Te=r(10644);const xe=se.Z.extend({lastModified:null,eTag:null,mixins:oe.Z,url:function(){const e=g.DB("appModel"),t=e.get("user"),r="/sub/"+this.requestType+"/"+t.id+"/"+e.get("clientID"),n=new Oe.Z({scheme:"websockets"===this.requestType?"wss":"https",address:"pubsub.plex.tv"});return this.server.resolveUrl(r,{connection:n,appendToken:!0})},initialize:function(e){v().bindAll(this,"onSocketOpen","onSocketClose","onSocketError","onSocketMessage","onPingTimeout","onPollSuccess","onPollError"),this.server=e.server},open:function(){return(this.socket||this.pollRequest)&&this.close(),ie.Z.hasWebSocket?(this._deferred=l().Deferred(),this.requestType="websockets",this.socket=new window.WebSocket(v().result(this,"url")),this.socket.onopen=this.onSocketOpen,this.socket.onclose=this.onSocketClose,this.socket.onerror=this.onSocketError,this.socket.onmessage=this.onSocketMessage,this._deferred.promise()):this.poll()},close:function(){this.pollRequest&&(C.Z.abort(this.pollRequest.rid),this.pollRequest=null),this._deferred&&"pending"===this._deferred.state()&&this._deferred.reject(),this.socket&&(this.cancelPing(),this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close(),this.socket=null)},schedulePing:function(){this.cancelPing(),this._pingTimeoutID=window.setTimeout(this.onPingTimeout,3e4)},cancelPing:function(){this._pingTimeoutID&&(window.clearTimeout(this._pingTimeoutID),this._pingTimeoutID=null)},poll:function(){this.requestType="longpolling",this.pollUrl=b.Z.join(v().result(this,"url"),{ttl:String(30)+"s"});const e=this.server.getXHROptions(this.pollUrl,{timeout:35e3});return e.headers["If-Modified-Since"]=this.lastModified?this.lastModified:"Thu, 01 Jan 1970 00:00:00 GMT",this.eTag&&(e.headers["If-None-Match"]=this.eTag),this.pollRequest=l().ajax(e).done(this.onPollSuccess).fail(this.onPollError),this.pollRequest.promise()},handleResponse:function(e){if(!e)return;const t=Te.Z.parseXML(e);if(v().isObject(t)){const e=t.command;ae.Z.trigger(`cloudServer:${e}`,t)}},onSocketOpen:function(e){this.server.set("hasEventConnection",!0),this.trigger("open",this.server,e),this._deferred.resolve(this.server,e),this.schedulePing()},onSocketClose:function(e){this.close(),this.server.set("hasEventConnection",!1),this.trigger("close",this.server,e),this._deferred.reject(this.server,e)},onSocketError:function(e){this.close(),this.trigger("error",this.server,e),this._deferred.reject(this.server,e)},onSocketMessage:function(e){this.handleResponse(e.data)},onPingTimeout:function(){this._pingTimeoutID=null,this.socket.send("hello"),this.schedulePing()},onPollSuccess:function(e,t,r){this.trigger("open",this.server,e),this.lastModified=r.getResponseHeader("Last-Modified"),this.eTag=r.getResponseHeader("ETag"),this.handleResponse(e),this.poll()},onPollError:function(e,t){"abort"===t?this.poll():this.pollRequest.aborting||this.trigger("error",this.server,e)}});var Ae=r(79711);const ke=Ae.Z.extend({supportsRetry:e=>e.get("isCloud")});var Ne=r(82479);function Re(e){return e.get("isCloud")}var Le=r(41444);const je=function(e){return(0,g.DB)("serverConnectionTestManager").queueConnectionTest(e)},Ve=function(e){return(0,g.DB)("serverConnectionTestManager").abortConnectionTest(e)},Ue=function(e){const{server:t,connection:r}=e;if(t.id)return l().Deferred().resolve(t.id).promise();const n=t.resolveUrl("/identity",{connection:r}),i=v().extend(t.getXHROptions(n),{timeout:t.connectionTestTimeout});(0,f.Z)(`[Identity] Requesting the machine identifier of ${t.get("debugName")} at ${n}`);let s=l().ajax(i).promise();return s=s.then((e=>{const r=l().Deferred(),n=be.Z.parseXML(e),i=n&&n.machineIdentifier;return i?((0,f.Z)(`[Identity] Machine identifier found for ${t.get("debugName")}: ${i}`),!t.collection||t.collection.get(i)?r.resolve(i):(t.collection.populateServer({isCloud:!0}).done((e=>{e.get("resources").populate().always((()=>{r.resolve(i)}))})),t.collection.findServer({isCloud:!0}).done((e=>{e.populate().fail((()=>{r.resolve(i)}))})).fail((()=>{r.resolve(i)})))):r.reject(),r.promise()})),s.fail((()=>{f.Z.warn(`[Identity] Machine identifier not found for ${t.get("debugName")} at ${n}`)})),s};var Fe=r(73788),Be=r(16812);const _e=function(e){let t,r;return e.item?(t=e.item,r=[t]):(r=e.items,t=r[0]),l().when.apply(l(),v().map(r,(function(e){const r="/library/metadata/"+e.id+"/refresh",n=v().extend(t.server.getXHROptions(r),{type:"PUT"});return l().ajax(n).promise()}))).fail((function(e){503===e.status?ae.Z.trigger("show:modal",new Be.Z({model:t.server})):ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem refreshing.")})}))},ze=function(e){const t=e.items;return l().when.apply(l(),v().map(t,(function(e){const t="/library/metadata/"+e.id+"/analyze",r=v().extend(e.server.getXHROptions(t),{type:"PUT"});return l().ajax(r).promise()})))};var He=r(19963);const We=function(e){const t=l().Deferred(),r=e.section,n="/library/sections/"+r.id+"/analyze",i=v().extend(r.server.getXHROptions(n),{type:"PUT"}),s=new He.Z({title:(0,Fe.Z)("Analyze Library"),message:(0,Fe.Z)("Analyzes all the media files in the library. The analysis captures information about the media which helps Plex decide how to optimally play back the media."),confirmLabel:(0,Fe.Z)("Analyze"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0}),a=s.promise;return a.done((function(){const e=l().ajax(i);e.done((function(){t.resolve()})),e.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem analyzing the library.")}),t.reject(e)})),e.always((function(e){s.hide()}))})),a.fail((function(){t.reject()})),ae.Z.trigger("show:modal",s),t.promise()},Ge=function(e){const t=e.item,r="/library/metadata/"+t.id+"/unmatch",n=v().extend(t.server.getXHROptions(r),{type:"PUT"}),i=l().ajax(n);return i.fail((function(){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem unmatching this item.")})})),i.promise()};var Qe=r(10033);const $e=function(e){const t=l().Deferred(),r=e.item,n="/library/metadata/"+r.id+"/split",i=new He.Z({title:(0,Fe.Z)("Split Apart"),message:(0,Fe.Z)("Are you sure you want to split this item apart?"),async:!0}),s=i.promise;return s.done((function(){const s=v().extend(r.server.getXHROptions(n),{type:"PUT"}),a=l().ajax(s);a.done((function(){const n=r.get("type");let i;i="show"===n||"artist"===n||"album"===n?"Location":"Media",r.set(i,r.get(i).slice(0,1)),e.skipNavigate||(0,g.DB)("appStore").dispatch((0,Qe.n)()),t.resolve()})),a.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem splitting this item apart.")}),t.reject(e)})),a.always((function(e){i.hide()}))})),s.fail((function(){t.reject()})),ae.Z.trigger("show:modal",i),t.promise()},Ke=function(e){const t=l().Deferred(),r=e.item,n=v().pluck(e.items,"id").join(","),i="/library/metadata/"+r.id+"/merge?ids="+n,s=v().extend(r.server.getXHROptions(i),{type:"PUT"}),a=new He.Z({title:(0,Fe.Z)("Merge"),message:(0,Fe.Z)("Are you sure you want to merge these items together?"),async:!0}),o=a.promise;return o.done((function(){const e=l().ajax(s);e.done((function(){t.resolve()})),e.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem merging these items.")}),t.reject(e)})),e.always((function(e){a.hide()}))})),o.fail((function(){t.reject()})),ae.Z.trigger("show:modal",a),t.promise()};var qe=r(85209);function Ye(e,t){return v().map(e,(function(e){return Le.Z.execute("deleteItem",{item:e,skipRedirect:t})}))}const Xe=function(e){let t=e.items,r=e.item;const n=e.skipConfirmation,i=e.skipRedirect;t||(t=[r]),r||(r=v().first(t));const s=r.get("Media");if(1===t.length&&s.length>1&&!r.get("remoteMedia")&&r.server.supports("specificMediaDeletion"))return Le.Z.execute("deleteMediaItem",{item:r});let a;if(n)a=l().when.apply(l(),Ye(t,i));else{const e=function(e){const t=e.item,r=e.items,n=r.length>1,i=t.get("remoteMedia"),s=t.get("type"),a=qe.getMetadataType(s);let o,l;i&&!n?(o=a.title,l=(0,Fe.Z)("Are you sure you want to remove {1}?",t.get("title"))):n&&r.every((e=>e.get("remoteMedia")))?(o=a.plural,l=(0,Fe.Z)("Are you sure you want to remove {1} items?",r.length)):s===qe.COLLECTION?(o=a.title,l=(0,Fe.Z)("Are you sure you want to delete {1}? This cannot be undone.",t.get("title"))):n?(o=a.plural,l=(0,Fe.Z)("Are you sure you want to delete {1} items from your filesystem?",r.length)):(o=a.title,l=(0,Fe.Z)("Are you sure you want to delete this item from your filesystem?"));const c={title:i?(0,Fe.Z)("Remove {typeLabel}",{typeLabel:o}):(0,Fe.Z)("Delete {typeLabel}",{typeLabel:o}),message:l,confirmLabel:i?(0,Fe.Z)("Remove"):(0,Fe.Z)("Delete"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0,hasDanger:!0};(n||qe.isParentType(s))&&(c.requireDoubleConfirm=!0,c.doubleConfirmMessage=i?(0,Fe.Z)("Multiple files may be removed."):(0,Fe.Z)("Multiple items may be deleted."),c.doubleConfirmLabel=(0,Fe.Z)("Yes, I'm sure"));const d=new He.Z(c);return ae.Z.trigger("show:modal",d),d}({item:r,items:t});a=e.promise.then((function(){return l().when.apply(l(),Ye(t,i)).always((function(){e.hide()}))}))}return a};var Je=r(86230),et=r(16893),tt=r.n(et);const rt=Je.Z.extend({name:"SelectMediaFileModal",template:tt(),serializeData:function(){return{medias:this.model.get("Media")}}}),nt=function(e){let t=function(e){const t=l().Deferred(),r=e.item,n=r.get("Media");if(e.index in n)return t.resolve(n[e.index]).promise();const i=new rt({model:r}),s=i.promise;return s.done((function(e){t.resolve(n[e])})),s.fail((function(){t.reject()})),ae.Z.trigger("show:modal",i),t.promise()}(e);return t=t.then((function(t){const r=function(){const e=new He.Z({title:(0,Fe.Z)("Delete File"),message:(0,Fe.Z)("Are you sure you want to delete this file from your filesystem?"),confirmLabel:(0,Fe.Z)("Delete"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0,hasDanger:!0});return ae.Z.trigger("show:modal",e),e}();return r.promise.then((function(){return Le.Z.execute("deleteFile",{item:e.item,media:t}).always((function(){r.hide()}))}))})),t},it=function(e){const t=e.item,r=t.server,n=t.get("Media"),i=v().filter(n,(function(e){return!!e.proxyType})),s=function(e){const t=e.item,r=e.versions,n=r.length>1;let i;if(n)i=(0,Fe.Z)("Are you sure you want to delete {1} versions of {2}?",r.length,t.get("title"));else{const e=v().first(r);i=(0,Fe.Z)("Are you sure you want to delete the {1} version of {2}?",e.title,t.get("title"))}const s=new He.Z({title:n?(0,Fe.Z)("Delete Versions"):(0,Fe.Z)("Delete Version"),message:i,confirmLabel:(0,Fe.Z)("Delete"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0,hasDanger:!0});return ae.Z.trigger("show:modal",s),s}({item:t,versions:i});return s.promise.then((function(){const e=b.Z.join(["/library/metadata/",t.id],{proxy:1}),a=v().extend(r.getXHROptions(e),{type:"DELETE"}),o=l().ajax(a);return o.done((function(){v().each(i,(function(e){n.splice(v().indexOf(n,e),1)})),t.trigger("change:Media",t,t.get("Media"))})),o.fail((function(e){const t=403===e.status?(0,Fe.Z)("Ensure that media deletion is enabled for library content in your server settings."):(0,Fe.Z)("There was a problem deleting these versions.");ae.Z.trigger("show:alert",{type:"error",message:t})})),o.always((function(){s.hide()})),o.promise()}))};var st=r(43508);const at=function(e){const t=l().Deferred(),r=e.section,n=new He.Z({title:(0,Fe.Z)("Delete Library"),message:(0,Fe.Z)("Are you sure you want to delete {1}?",r.get("title")),confirmLabel:(0,Fe.Z)("Delete"),cancelLabel:(0,Fe.Z)("Cancel"),requireDoubleConfirm:!0,doubleConfirmMessage:(0,Fe.Z)("This cannot be undone."),doubleConfirmLabel:(0,Fe.Z)("Yes, I'm sure"),async:!0,hasDanger:!0}),i=n.promise;return i.done((function(){const e=r.destroy({wait:!0});e?(e.done((function(){const e=g.DB("appStore").dispatch,n=r.server.entityID();n&&e((0,st.jR)({serverEntityID:n})),t.resolve()})),e.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem deleting the library.")}),t.reject(e)}))):t.resolve()})),i.fail((function(){t.reject()})),ae.Z.trigger("show:modal",n),t.promise().always((()=>{n.hide()})),t.promise()},ot=function(e){const t=e.section,r="/library/sections/"+t.id+"/indexes",n=v().extend(t.server.getXHROptions(r),{type:"DELETE"}),i=new He.Z({title:(0,Fe.Z)("Delete Preview Thumbnails"),message:(0,Fe.Z)("Are you sure you want to delete the preview thumbnails for items in this library? This cannot be undone."),confirmLabel:(0,Fe.Z)("Delete"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0,hasDanger:!0});let s=i.promise;return s=s.then((function(){return function(){const e=l().ajax(n);return e.done((function(e){ae.Z.trigger("show:alert",{type:"success",message:(0,Fe.Z)("The preview thumbnails for items in this library were deleted.")})})),e.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem deleting the preview thumbnails for items in this library.")})})),e.always((function(e){i.hide()})),e}()})),ae.Z.trigger("show:modal",i),s},lt=function(e){const t=l().Deferred(),r="photo"===e.item.get("playlistType"),n=new He.Z({title:r?(0,Fe.Z)("Delete Album"):(0,Fe.Z)("Delete Playlist"),message:(0,Fe.Z)("Are you sure you want to delete {1}? This cannot be undone.",e.item.get("title")),confirmLabel:(0,Fe.Z)("Delete"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0,hasDanger:!0}),i=n.promise;return i.done((function(){const i=e.item.destroy();i.done((function(){e.skipRedirect||(0,g.DB)("appStore").dispatch((0,Qe.n)()),t.resolve()})),i.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:r?(0,Fe.Z)("There was a problem deleting the album."):(0,Fe.Z)("There was a problem deleting the playlist.")}),t.reject(e)})),i.always((function(e){n.hide()}))})),i.fail((function(){t.reject()})),ae.Z.trigger("show:modal",n),t.promise()},ct=function(e){const t=l().Deferred(),r=e.section,n=r?r.id:"all",i=e.cancel,s=r?r.server:e.server,a={};(e.params||{}).force&&(a.force=1);const o="/library/sections/"+n+"/refresh",c=v().extend(s.getXHROptions(o),{data:a});function d(){const e=l().ajax(c);e.done((function(){t.resolve()})),e.fail((function(e){if(503===e.status)ae.Z.trigger("show:modal",new Be.Z({model:s}));else{const e=i?(0,Fe.Z)("There was a problem canceling the update."):(0,Fe.Z)("There was a problem updating the library.");ae.Z.trigger("show:alert",{type:"error",message:e})}t.reject(e)}))}if(i&&(c.type="DELETE",r&&r.set("refreshing",!1)),a.force){const e=new He.Z({title:(0,Fe.Z)("Refresh All"),message:(0,Fe.Z)("Forces a download of fresh media information from the internet. This can take a long time. Any locked fields are not modified."),confirmLabel:(0,Fe.Z)("Refresh"),cancelLabel:(0,Fe.Z)("Cancel")}),r=e.promise;r.done(d),r.fail((function(){t.reject()})),ae.Z.trigger("show:modal",e)}else d();return t.promise()},dt=function(e){const t=l().Deferred(),r=e.server,n=v().extend(r.getXHROptions("/library/optimize"),{type:"PUT"}),i=new He.Z({title:(0,Fe.Z)("Optimize Database"),message:(0,Fe.Z)("Cleans up the library database and ensures it is operating as quickly as possible. This is especially useful when you've added or removed a large amount of media from the library."),confirmLabel:(0,Fe.Z)("Optimize"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0}),s=i.promise;return s.done((function(){const e=l().ajax(n);e.done((function(){ae.Z.trigger("show:alert",{type:"success",message:(0,Fe.Z)("The database was optimized.")}),t.resolve()})),e.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem optimizing this database.")}),t.reject(e)})),e.always((function(e){i.hide()}))})),s.fail((function(){t.reject()})),ae.Z.trigger("show:modal",i),t.promise()},ut=function(e){const t=l().Deferred(),r=e.server,n=v().extend(r.getXHROptions("/library/clean/bundles"),{type:"PUT"}),i=new He.Z({title:(0,Fe.Z)("Clean Bundles"),message:(0,Fe.Z)("The media server stores information about your media to disk, as well as posters, artwork, and other media resources from the internet. Running this task deletes any bundles which are no longer in use."),confirmLabel:(0,Fe.Z)("Clean"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0}),s=i.promise;return s.done((function(){const e=l().ajax(n);e.done((function(){ae.Z.trigger("show:alert",{type:"success",message:(0,Fe.Z)("Unused bundles are being removed.")}),t.resolve()})),e.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem removing unused bundles.")}),t.reject(e)})),e.always((function(e){i.hide()}))})),s.fail((function(){t.reject()})),ae.Z.trigger("show:modal",i),t.promise()},pt=function(e){const t=l().Deferred(),r=e.section,n=r?r.server:e.server,i=[],s=[];r?i.push(r.id):n.get("sections").each((function(e){i.push(e.id)}));const a=new He.Z({title:(0,Fe.Z)("Empty Trash"),message:(0,Fe.Z)("By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted."),confirmLabel:(0,Fe.Z)("Empty"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0}),o=a.promise;return o.done((function(){v().each(i,(function(e){const t="/library/sections/"+e+"/emptyTrash",r=v().extend(n.getXHROptions(t),{type:"PUT"});s.push(l().ajax(r))}));const e=l().when.apply(l(),s);e.done((function(){ae.Z.trigger("show:alert",{type:"success",message:(0,Fe.Z)("The trash was emptied.")}),t.resolve()})),e.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem emptying the trash.")}),t.reject(e)})),e.always((function(e){a.hide()}))})),o.fail((function(){t.reject()})),ae.Z.trigger("show:modal",a),t.promise()},mt=function(e){const t=e.item,r={guid:e.guid,name:e.name,year:e.year};"album"===t.get("type")&&e.children&&e.children.reduce((function(e,t){const r=t.get("id");return r&&(e["guid["+r+"]"]=t.get("guid")),e}),r);const n=b.Z.join(["/library/metadata/",t.id,"/match"],r),i=v().extend(t.server.getXHROptions(n),{type:"PUT"});return l().ajax(i).promise()},ht=function(e){const t=l().Deferred(),r=e.item;let n={agent:e.agent.id,manual:0};const i=b.Z.join(["/library/metadata/",r.id,"/matches"],n),s=v().extend(r.server.getXHROptions(i)),a=l().ajax(s);return a.done((function(e){const i=v().isObject(e)?e:Te.Z.parseXML(e);if(i.SearchResult){let e=i.SearchResult;Array.isArray(i.SearchResult)&&(e=i.SearchResult[0]),n={guid:e.guid,name:e.name};const s=b.Z.join(["/library/metadata/",r.id,"/match"],n),a=v().extend(r.server.getXHROptions(s),{type:"PUT"}),o=l().ajax(a);o.done((function(){t.resolve()})),o.fail((function(){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem matching this item.")}),t.reject()}))}else ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("No matches were found using this agent.")}),t.reject()})),a.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem searching for matches.")}),t.reject(e)})),t.promise()},gt={poster:"thumb",art:"art",banner:"banner"},yt=function(e){const t=e.item,r={url:e.artworkRatingKey},n=b.Z.join(["/library/metadata/",t.id,e.artworkType],r),i=v().extend(t.server.getXHROptions(n),{type:"PUT"}),s=l().ajax(i);return s.done((function(r){t.set(gt[e.artworkType],r)})),s.promise()},vt=function(e){const t=e.item,r=e.rating,n=t.get("userRating");if(-1===r?t.unset("userRating"):t.set("userRating",r),e.passive)return l().Deferred().resolve().promise();const i={key:t.get("ratingKey"),identifier:t.get("identifier"),rating:r},s=b.Z.join("/:/rate",i),a=l().ajax(t.server.getXHROptions(s));return a.fail((function(){t.set("userRating",n),ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem rating this item.")})})),a.promise()};var ft=r(16374);const bt=function(e){const t=l().Deferred(),r=e.item,n=r.server,i=e.media||v().first(r.get("Media")),s=e.part||i&&v().first(i.Part),a=e.streamType,o=e.streamID;if(!i||!s)return t.reject().promise();const c={};c[a.key]=o,!e.media&&n.supports("allPartsStreamSelection")&&(c.allParts=1);const d=b.Z.join(["/library/parts/",s.id],c),u=v().extend(n.getXHROptions(d),{type:"PUT"}),p=l().ajax(u);return p.done((function(){(function(e,t,r){if(e){const n=(0,ft.Z)(e,{streamType:t.id});v().each(n,(e=>{e.selected=e.id===r}))}})(i,a,o),r.trigger("change:streams"),t.resolve()})),p.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem selecting the stream for this item.")}),t.reject(e)})),t.promise()},Zt=function(e){const t=e.item,r=e.media,n=t.server;let i;if(r){const s="/library/metadata/"+t.id+"/media/"+r.id,a=v().extend(n.getXHROptions(s),{type:"DELETE"});i=l().ajax(a),i.done((function(){const n=e.item.get("Media");n.splice(v().indexOf(n,r),1),t.trigger("change:Media",t,t.get("Media"))}))}else i=t.destroy({wait:!0});return i.fail((function(e){const t=403===e.status?(0,Fe.Z)("Ensure that media deletion is enabled for library content in your server settings."):(0,Fe.Z)("There was a problem deleting this item.");ae.Z.trigger("show:alert",{type:"error",message:t})})),i};var St=r(60526),Pt=r(22094),It=r(86418),Et=r(26263),wt=Object.defineProperty,Ct=Object.defineProperties,Mt=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,Ot=Object.prototype.hasOwnProperty,Tt=Object.prototype.propertyIsEnumerable,xt=(e,t,r)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,At=(e,t)=>{for(var r in t||(t={}))Ot.call(t,r)&&xt(e,r,t[r]);if(Dt)for(var r of Dt(t))Tt.call(t,r)&&xt(e,r,t[r]);return e},kt=(e,t)=>Ct(e,Mt(t));function Nt(e,t){if(!e)return!1;const r=new Pt.Z({key:e},{server:t.item.server,onlyIfCached:!0});return!v().isEmpty(r)&&r}function Rt(e){if(e.skipRedirect)return;const t=e.item,r=t.get("isLibraryItem")&&t.parent,n=t.get("librarySectionKey")||(null==r?void 0:r.get("librarySectionKey"));if(!n)return void(0,g.DB)("appStore").dispatch((0,Qe.n)());const i=function(e,t){const r=e.get("features").get(It.Z.CONTENT),n=r.get("directories");if(!r||!n)return null;const i=n.find((e=>e.get("hubKey")===t||e.get("key")===t));return i?i.toJSON():null}(t.provider,n),s=(0,Et.Z)(t.server.toJSON(),t.provider.toJSON(),i);s?(0,g.DB)("appStore").dispatch((0,Qe.c4)({pathname:s,replace:!0})):(0,g.DB)("appStore").dispatch((0,Qe.n)())}function Lt(e,t){t.skipRedirect||(0,g.DB)("appStore").dispatch((0,Qe.yB)({serverEntityID:e.server.entityID(),providerEntityID:e.provider.entityID(),key:e.get("key"),replace:!0}))}const jt=function(e){const t=Le.Z.execute("deleteFile",e);return t.done((function(){const t=e.item,r=Nt(t.get("parentKey"),e);if(!r)return void Rt(e);const n=new St.Z({containerKey:r.get("childrenKey")},{server:r.server,provider:r.provider,skipCache:!0});n.fetchRange({size:1}).then((()=>{if(n.getCollection().length>0)return void Lt(r,e);r.trigger("destroy",r,r.collection);const i=Nt(t.get("grandparentKey"),e);if(!i)return void Rt(kt(At({},e),{skipRedirect:!1}));const s=new St.Z({containerKey:i.get("childrenKey")},{server:i.server,provider:i.provider,skipCache:!0});s.fetchRange({size:1}).then((()=>{s.getCollection().length>0?Lt(i,kt(At({},e),{skipRedirect:!1})):Rt(e)}))}))})),t},Vt=function(e){const t=e.generator,r=v().result(t,"url")+"/"+e.ratingKey+"/enable",n=v().extend(t.server.getXHROptions(r),{type:"PUT"}),i=l().ajax(n).promise();return i.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem enabling this version.")})})),i},Ut=function(e){const t=e.generator,r=v().result(t,"url")+"/"+e.ratingKey+"/disable",n=function(){const e=new He.Z({title:(0,Fe.Z)("Remove Version"),message:(0,Fe.Z)("Are you sure you want to delete this version? You can enable it again in Optimized Versions Settings."),confirmLabel:(0,Fe.Z)("Remove"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0,hasDanger:!0});return ae.Z.trigger("show:modal",e),e}();return n.promise.then((function(){const e=v().extend(t.server.getXHROptions(r),{type:"PUT"}),i=l().ajax(e).promise();return i.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem disabling this version.")})})),i.always((function(){n.hide()})),i}))},Ft=function(e){const t=e.generator,r=e.ratingKey;let n=v().result(t,"url");r&&(n+="/"+r),n+="/reprocess";const i=v().extend(t.server.getXHROptions(n),{type:"PUT"}),s=l().ajax(i).promise();return s.fail((function(e){const t=r?(0,Fe.Z)("There was a problem processing this item."):(0,Fe.Z)("There was a problem processing these items.");ae.Z.trigger("show:alert",{type:"error",message:t})})),s},Bt=function(e){const t=e.generator,r=function(e){const t=e.generator.get("title"),r=t?(0,Fe.Z)("Removing this item will delete all versions created by {1}. Are you sure you want to continue?",t):(0,Fe.Z)("Removing this item will delete all related versions. Are you sure you want to continue?"),n=new He.Z({title:(0,Fe.Z)("Delete Versions"),message:r,confirmLabel:(0,Fe.Z)("Remove"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0,hasDanger:!0});return ae.Z.trigger("show:modal",n),n}(e);return r.promise.then((function(){const e=t.destroy();return e.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("Unable to stop generating these versions.")})})),e.always((function(){r.hide()})),e}))};var _t=r(58090);const zt=function(e){const t=function(){const e=new He.Z({title:(0,Fe.Z)("Delete All Versions"),message:(0,Fe.Z)("Are you sure you want to delete all versions? This cannot be undone."),confirmLabel:(0,Fe.Z)("Delete"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0,hasDanger:!0});return ae.Z.trigger("show:modal",e),e}();let r=t.promise;return r=r.then((function(){const r="/playlists/generators?type="+_t.Z.LOCAL,n=v().extend(e.server.getXHROptions(r),{type:"DELETE"}),i=l().ajax(n).promise();return i.fail((function(e){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem deleting all versions.")})})),i.always((function(){t.hide()})),i.promise()})),r},Ht=function(e){const t=l().Deferred(),r=e.channel,n=r?r.server:e.server,i=e.silent;let s;if(r){const e=r.get("identifier");s=(e?"/system/appstore/apps/"+e:r.get("key"))+"/update"}else s="/system/appstore/updates";const a=l().ajax(n.getXHROptions(s));function o(e){i||ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem checking for updates.")}),t.reject(e)}return a.done((function e(r){const s=v().isObject(r)?r:Te.Z.parseXML(r);if(s&&(s.message||s.Directory))if(s.message)i||ae.Z.trigger("show:alert",{type:"success",message:s.message}),t.resolve();else{Te.Z.parseArray(s,"Directory");const t=s.Directory[0].key,r=l().ajax(n.getXHROptions(t));r.done(e),r.fail(o)}else o()})),a.fail(o),t.promise()};var Wt=r(8718);const Gt=function(e){const t=l().Deferred(),r=e.channel,n=r.get("identifier"),i=(n?"/system/appstore/apps/"+n:r.get("key"))+"/uninstall",s=r.server.getXHROptions(i);function a(){const n=l().ajax(s);n.done((function(n){const i=v().isObject(n)?n:Te.Z.parseXML(n);r.set("installed",!1),i.message&&!e.skipConfirmation&&ae.Z.trigger("show:alert",{type:"success",message:i.message}),t.resolve()})),n.fail((function(e){if(400===e.status){const e=new He.Z({title:(0,Fe.Z)("Unable to Uninstall Plugin"),message:(0,Fe.Z)("This plugin could not be uninstalled, but you can disable it in the server settings."),confirmLabel:(0,Fe.Z)("OK"),cancelLabel:(0,Fe.Z)("Ignore")});e.promise.done((function(){(0,Wt.Z)("serverSettings",{machineIdentifier:r.server.id,settingsSection:"settings",settingsGroup:"channels"})})),ae.Z.trigger("show:modal",e)}else ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("This plugin could not be uninstalled.")});t.reject(e)}))}if(e.skipConfirmation)a();else{const e=new He.Z({title:(0,Fe.Z)("Uninstall Plugin"),message:(0,Fe.Z)("Are you sure you want to uninstall this plugin?")}),r=e.promise;r.done(a),r.fail((function(){t.reject()})),ae.Z.trigger("show:modal",e)}return t.promise()};var Qt=r(180);const $t=function(e){const t=e.cloudAccount,r=t.server.get("desktop").get("settings").get("PublishServerOnPlexOnlineKey"),n=l().Deferred();let i;if(!t.get("isWaiting")){const r=e.value?Qt.Q2:Qt.uy;t.set("remoteAccessState",r)}const s=t.previous("remoteAccessState"),a=r.save({PublishServerOnPlexOnlineKey:e.value},{timeout:0});return a.done((function r(){t.fetch().done((function(){const s=t.get("mappingState"),a=e.value&&s===Qt.GI,o=!e.value&&s===Qt.Gu;s===Qt.xD||a||o?i||(i=window.setInterval(r,500)):(i=window.clearInterval(i),t.get("isWaiting")&&t.set("remoteAccessState",Qt.HP),n.resolve())}))})),a.fail((function(r){let i;i=e.value?(0,Fe.Z)("There was a problem connecting your server."):(0,Fe.Z)("There was a problem disconnecting your server."),ae.Z.trigger("show:alert",{type:"error",message:i}),t.set("remoteAccessState",s),n.reject(r)})),n.promise()},Kt=function(e){const t=e.cloudAccount,r={cloudAccount:t,value:!1};let n=Le.Z.execute("connectServer",r);return n=n.then((function(){return r.value=!0,Le.Z.execute("connectServer",r)})),n=n.then((function(){if(t.get("mappingError"))return l().Deferred().reject().promise()})),n};var qt=r(86022);const Yt=function(e){const{cloudAccount:t,username:r,password:n,claim:i=!1}=e,s=l().Deferred(),a=t.server,o=(0,g.DB)("appModel"),c=o.get("user"),d=o.get("cloudServer"),u=a.get("accessToken");a.set("accessToken",c.get("authToken"));const p=i?function(e,t){const r=t.getXHROptions("/api/claim/token");let n=l().ajax(r).promise();return n=n.then((t=>{const{token:r}=be.Z.parseXML(t),n=b.Z.join("/myplex/claim",{token:r}),i=e.getXHROptions(n,{type:"POST"});return l().ajax(i).promise()})),n}(a,d):function(e,t,r){const n=b.Z.join("/myplex/account",{username:e,password:t}),i=r.getXHROptions(n,{type:"PUT"});return l().ajax(i).promise()}(r,n,a);return p.done((e=>{const r=v().isObject(e)?e:be.Z.parseXML(e);r&&"invalid"===r.signInState?(ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("The username or password is incorrect.")}),s.reject()):(a.set({myPlexSigninState:qt.Hq,myPlexUsername:c.get("email")}),t.set({signedIn:!0,username:c.get("email")}),s.resolve())})),p.fail((e=>{let r;a.set("accessToken",u),!0===t.get("signedIn")&&t.set("signedIn",!1),r=401===e.status?(0,Fe.Z)("The username or password is incorrect."):(0,Fe.Z)("There was a problem signing in to Plex."),ae.Z.trigger("show:alert",{type:"error",message:r}),s.reject(e)})),s.promise()};function Xt(e){e.trigger("destroy",e,e.collection),e.cache.remove(e)}const Jt=function(e){const t=g.DB("appModel").get("user"),r=e.device,n=e.server||function(e){const t=new qt.ZP({machineIdentifier:e},{onlyIfCached:!0});if(!v().isEmpty(t))return t}(r.get("clientIdentifier"));let i;i=r?(0,Fe.Z)("If you remove the server, all syncs and shares associated with the server will be lost and you will need to sign the server in again to restore access to Plex."):(0,Fe.Z)("Are you sure you want to remove this server?");const s={title:(0,Fe.Z)("Remove Server"),message:i,confirmLabel:(0,Fe.Z)("Remove"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0,hasDanger:!0};r&&(s.requireDoubleConfirm=!0,s.doubleConfirmMessage=(0,Fe.Z)("Are you sure you want to remove this server?"),s.doubleConfirmLabel=(0,Fe.Z)("Yes, I'm sure"));const a=new He.Z(s);let o=a.promise;return o=o.then((function(){return function(){let e;if(r)e=r.destroy({wait:!0});else{const r="/api/servers/"+n.id,i=v().extend(t.server.getXHROptions(r),{type:"DELETE"});e=l().ajax(i)}if(n){if(n.get("connected")&&n.get("myPlexSigninState")===qt.Hq){const t=n.get("desktop").get("cloudAccount");e=e.then((function(){return t.fetch()})),e=e.then((function(){return function(e){const t=e.get("desktop").get("cloudAccount").destroy();return t.done((function(){e.set({accessToken:void 0,myPlexSigninState:qt.Ar,myPlexSubscription:!1})})),t}(n)}))}!1===n.get("connected")?Xt(n):e.always((function(){ae.Z.trigger("test:server",n),n.populate().fail((function(){Xt(n)}))}))}return e.always((function(){a.hide()})),e.promise()}()})),ae.Z.trigger("show:modal",a),o};var er=r(85229),tr=r(95522);const rr=(0,er.PH)("v4/query/reset");var nr=r(83105),ir=r(47240),sr=r(25984),ar=r(25004),or=r(59405),lr=r(15334),cr=r(24307),dr=r(40744),ur=r(26547),pr=r(61595),mr=r(91364),hr=r(65978),gr=r(78535);const yr=(0,nr.UY)({friends:ir.Z.reducer,metadataItem:sr.Z.reducer,metadataItemState:ar.Z.reducer,metadataLists:or.Z.reducer,metadataTimelineState:lr.Z.reducer,user:gr.Z.reducer,serverAccounts:cr.Z.reducer,serverActivities:dr.Z.reducer,serverDevices:pr.Z.reducer,serverNowPlayingSessions:mr.Z.reducer,serverDetails:ur.Z.reducer,servers:hr.Z.reducer});var vr=r(40877),fr=r(10550),br=r(37112),Zr=r(31892),Sr=r(88478),Pr=r(7635),Ir=r(43348),Er=r(69201);const wr=(0,nr.UY)({bandwidth:Zr.Z.reducer,playHistory:Sr.Z.reducer,resources:Pr.Z.reducer,topPlayed:Ir.Z.reducer,topUsers:Er.Z.reducer});var Cr=r(37485),Mr=r(76360),Dr=r(23665),Or=r(53171);const Tr=(0,nr.UY)({dvrSetup:Dr.ZP.reducer,epgSettings:Or.ZP.reducer});var xr=r(11364),Ar=r(48383),kr=r(41070),Nr=r(74236),Rr=r(71975),Lr=r(30399),jr=r(51175),Vr=r(83564),Ur=r(94105),Fr=r(14221),Br=r(98708),_r=r(11897),zr=r(35348);const Hr=(0,nr.UY)({advancedFilters:fr.Z.reducer,activity:vr.Z.reducer,curatedLists:br.Z.reducer,dashboard:wr,directory:Cr.Z.reducer,downloads:Mr.Z.reducer,dvrManagement:Tr,home:xr.Z.reducer,importPlaylists:Ar.Z.reducer,libraryManagement:kr.Z.reducer,livetv:Nr.ZP.reducer,metadataMultiselect:Rr.Z.reducer,optOuts:Lr.Z.reducer,players:Vr.Z.reducer,playHistory:jr.Z.reducer,prePlay:Ur.Z.reducer,twoFactorAuth:Fr.Z.reducer,universalSearch:Br.Z.reducer,verificationEmail:zr.Z.reducer,whereToWatch:_r.ZP.reducer}),Wr=(0,nr.UY)({core:yr,features:Hr}),Gr=(0,er.PH)("v4/root/reset");var Qr=r(36182);const $r=function(){const e=(0,g.DB)("appStore"),t=(0,g.DB)("appModel"),r=t.get("ui"),n=t.get("user"),i=t.get("fakeRouter"),s=n.server;let a=n.clearAccessToken();return a=a.fail((()=>{f.Z.warn("Failed to clear the access token and user storage")})).always((()=>{t.set("history",[]),e.dispatch(Gr()),e.dispatch(rr()),r&&r.restoreDefaults(),i&&i.restoreDefaults(),C.Z.abortAll(),n.signOut(),n.uninitialize(),n.initialize(),ae.Z.trigger("clear:servers"),e.dispatch((0,Qe.$e)({budget:1/0})),ae.Z.trigger("clearAll:cache"),s.cache.store(s)})),a=a.then((()=>function(e){const t=l().Deferred();return e&&e.then?e.then(t.resolve,t.reject):t.resolve(e),t.promise()}((0,g.DB)("serviceWorker").sendMessage({type:Qr.dp})))),(0,z.Z)(a)};var Kr=r(17197),qr=r(29223),Yr=r(90696);const Xr=function(e={}){const t=(0,g.DB)("appModel").get("user"),r=t.get("signedIn"),n=t.id!==e.homeUser.id,i=e.allowGuestLock,s=n||i,a=!1!==e.shouldUnlock;let o=r?Le.Z.execute("authenticateWithServer",e):Le.Z.execute("authenticateWithHash",e);return r&&s?o=o.then((t=>function(e,t){const r=(0,g.DB)("appModel").get("user");let n=Le.Z.execute("resetUser");return n=n.then((()=>{r.activateStoredUser(t.homeUser.id);const n=qr.Z.getActiveUser();n&&n.copyToModel(r),ae.Z.trigger("init:servers");const i={};return!1!==t.shouldUnlock&&(i.lockState=Yr.Ik.Unlocked),r.signIn(e,i)})),n.done((()=>{(0,g.DB)("metrics").trackEvent({event:Kr.PS,interaction:!0})})),n}(t,e))):o.done((()=>{const e={};a&&(e.lockState=Yr.Ik.Unlocked),t.set(e)})),o.done((()=>{e.openAddManagedUser?(0,Wt.Z)("plexHome",{},{addManagedUser:1}):n&&(0,Wt.Z)("home")})),o};var Jr=r(44999),en=Object.defineProperty,tn=Object.getOwnPropertySymbols,rn=Object.prototype.hasOwnProperty,nn=Object.prototype.propertyIsEnumerable,sn=(e,t,r)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function an(e,t={}){return((e,t)=>{for(var r in t||(t={}))rn.call(t,r)&&sn(e,r,t[r]);if(tn)for(var r of tn(t))nn.call(t,r)&&sn(e,r,t[r]);return e})({includeSubscriptions:1,includeProviders:1,includeSettings:ne.Z.allowSyncSettings?1:0,includeSharedSettings:(0,Jr.Z)(e)?1:0},t)}var on=Object.defineProperty,ln=Object.getOwnPropertySymbols,cn=Object.prototype.hasOwnProperty,dn=Object.prototype.propertyIsEnumerable,un=(e,t,r)=>t in e?on(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pn=(e,t)=>{for(var r in t||(t={}))cn.call(t,r)&&un(e,r,t[r]);if(ln)for(var r of ln(t))dn.call(t,r)&&un(e,r,t[r]);return e};const mn=function(e){return e.headers=pn(pn({},x.Z.getInstance()),e.headers||{}),l().ajax(e)},hn=function(e){const t=e.homeUser,r=g.DB("appModel").get("user"),n=t.get("uuid")||r.get("uuid"),i=an(r,{pin:e.pin}),s=b.Z.join(["/api/v2/home/users/",n,"/switch"],i),a=t.server.getXHROptions(s,{type:"POST",xhrFields:{withCredentials:ne.Z.allowSSO}});return mn(a)},gn=function(e){const t=l().Deferred().resolve().promise(),r=l().Deferred().reject().promise(),n=qr.Z.getActiveUser();if(!n)return r;const i=n.get("pin"),s=n.get("authToken");return i||e.pin?i===(0,g.DB)("appModel").get("user").hashPIN(e.pin,s)?t:r:t},yn=function(e){const t=e.device,r=(0,Fe.Z)("If you remove this device, you will need to sign in again on the device to restore access to Plex."),n=new He.Z({title:(0,Fe.Z)("Remove Device"),message:r,confirmLabel:(0,Fe.Z)("Remove"),cancelLabel:(0,Fe.Z)("Cancel"),async:!0,hasDanger:!0});let i=n.promise;return i=i.then((function(){return function(){const e=t.destroy({wait:!0});return e.fail((function(){ae.Z.trigger("show:alert",{type:"error",message:(0,Fe.Z)("There was a problem removing this device.")})})),e.always((function(){n.hide()})),e.promise()}()})),ae.Z.trigger("show:modal",n),i};var vn=r(22169);const fn=function(e){return(0,z.Z)(mn({url:(0,vn.Y)("/api/v2/users/signout"),headers:{"X-Plex-Token":e.accessToken},type:"DELETE",xhrFields:{withCredentials:!1}}))},bn=function(){(0,g.DB)("metrics").trackEvent({event:Kr.CM,interaction:!0});const e=ne.Z.allowSSO,t=(0,g.DB)("appModel").get("user").get("authToken");return(0,z.Z)(e?fn({accessToken:t}):l().Deferred().resolve().promise()).then((()=>Le.Z.execute("resetUser"))).then((()=>(qr.Z.restoreDefaults(),qr.Z.save()))).then((()=>{e&&fn({accessToken:t}),ae.Z.trigger("init:servers")}))};function Zn(){return Le.Z.registerAll(n),l().Deferred().resolve().promise()}function Sn(){const e=(0,g.DB)("appModel");return(0,Pe.Z)([e.get("settings").populate(),e.get("deviceSettings").populate()])}const Pn=se.Z.extend({getStorage(){},get(e){return this._catchStorageError((t=>{const r=window.PLEXWEB,n=r&&e in r?r[e]:t.getItem(e);if(null==n)throw new Error(`${e} is not in ${this.name}`);return n}))},set(e,t){return this._catchStorageError((r=>{if(!e)throw new Error(`Unable to set value in ${this.name} without a key`);if(null==t)throw new Error(`Unable to set null or undefined value for ${e} in ${this.name}. Use the remove function.`);return r.setItem(e,t)}))},remove(e){return this._catchStorageError((t=>t.removeItem(e)))},clear(){return this._catchStorageError((e=>e.clear()))},_catchStorageError(e){const t=l().Deferred();try{t.resolve(e(this.getStorage()))}catch(e){f.Z.warn(e.message),t.reject(e)}return t.promise()}}),In=Pn.extend({name:"BasicVolatileStorage",initialize(){const e={};this.api={getItem:t=>e[t],setItem(t,r){e[t]=r},removeItem(t){delete e[t]},clear(){for(const t in e)e.hasOwnProperty(t)&&delete e[t]}}},getStorage(){return this.api}}),En=new(r(43498).Z)({interface:["get","set","remove","clear"]});var wn=r(78154);function Cn(e,t){return Se.Z.get(e).then((e=>(0,wn.Z)(e,t)),(()=>{if(t)return l().Deferred().resolve(t).promise()}))}function Mn(e,t){return Se.Z.set(e,JSON.stringify(t))}var Dn=Object.defineProperty,On=Object.getOwnPropertySymbols,Tn=Object.prototype.hasOwnProperty,xn=Object.prototype.propertyIsEnumerable,An=(e,t,r)=>t in e?Dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kn=(e,t)=>{for(var r in t||(t={}))Tn.call(t,r)&&An(e,r,t[r]);if(On)for(var r of On(t))xn.call(t,r)&&An(e,r,t[r]);return e};const Nn=function(e){return e.isDirty=!0,Cn(qr.Z.storageKey).then((t=>{if(t.users)return t.users.forEach((t=>{t.experienceSettings=kn(kn({},t.experienceSettings),e)})),Mn(qr.Z.storageKey,t)}))};var Rn=Object.defineProperty,Ln=Object.getOwnPropertySymbols,jn=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable,Un=(e,t,r)=>t in e?Rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fn=(e,t)=>{for(var r in t||(t={}))jn.call(t,r)&&Un(e,r,t[r]);if(Ln)for(var r of Ln(t))Vn.call(t,r)&&Un(e,r,t[r]);return e};const Bn=["homeSettings"],_n=function(){const e=(0,g.DB)("StoredUserExperienceSettingsModel"),t=Object.keys(Fn(Fn({},e.prototype.syncedAttrs),e.prototype.syncedRelations)),r=v().without(t,...Bn),n=Cn("experience").then((e=>{const t=v().pick(e,r);return Nn(t).then((()=>Se.Z.remove("experience")))}));return(0,z.Z)(n)};var zn=r(18655),Hn=r(82633),Wn=r(15865),Gn=r(59081),Qn=r(3294);const $n=Hn.Z.extend({name:"DeviceSettingsModel",storageKey:"deviceSettings",sessionAttrs:{isSaving:zn.Z.boolean,saveError:zn.Z.object},syncedAttrs:{autoLogin:zn.Z.boolean,chromecastAppID:zn.Z.string,chromecastCustomAppID:zn.Z.string,sonosCustomBaseURL:zn.Z.string,debugAdKind:zn.Z.integer,debugLevel:zn.Z.integer,debugVideoQualityOverlay:zn.Z.boolean,directPlay:zn.Z.boolean,directStream:zn.Z.boolean,rejectDirectConnections:zn.Z.boolean,restorePlayQueue:zn.Z.object,shouldSyncSettings:zn.Z.boolean,hasDismissedServerDownloadMessage:zn.Z.boolean,dismissedUnclaimedServers:zn.Z.object,dismissedServerUpdateVersions:zn.Z.object,volume:zn.Z.integer,serverUpdateDismissedVersion:zn.Z.string},defaults:()=>({isSaving:!1,saveError:null,autoLogin:!1,chromecastAppID:Qn.Z.PRODUCTION,debugAdKind:Wn.Z.NONE,debugLevel:Gn.Z.DISABLED,debugVideoQualityOverlay:!1,directPlay:!0,directStream:!0,rejectDirectConnections:!1,restorePlayQueue:null,shouldSyncSettings:ne.Z.allowSyncSettings,hasDismissedServerDownloadMessage:!1,dismissedUnclaimedServers:{},dismissedServerUpdateVersions:{},volume:90})});var Kn=Object.defineProperty,qn=Object.getOwnPropertySymbols,Yn=Object.prototype.hasOwnProperty,Xn=Object.prototype.propertyIsEnumerable,Jn=(e,t,r)=>t in e?Kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ei=(e,t)=>{for(var r in t||(t={}))Yn.call(t,r)&&Jn(e,r,t[r]);if(qn)for(var r of qn(t))Xn.call(t,r)&&Jn(e,r,t[r]);return e};const ti=["debugVideoQualityOverlay","restorePlayQueue","volume"],ri=function(){const e=$n.prototype.storageKey,t=Cn("experience").then((t=>{const r=v().pick(t,ti);if(0!==Object.keys(r).length)return Cn(e,{}).then((t=>{const n=ei(ei({},t),r);return Mn(e,n)}))}));return(0,z.Z)(t)},ni={"home.continue":[/^(movie|tv)\.inprogress\.([0-9]+)/],"home.movies.recent":[/^movie\.recentlyadded\.([0-9]+)/],"home.music.recent":[/^music\.recent\.added\.([0-9]+)/],"home.photos.recent":[/^photo\.recent\.([0-9]+)/],"home.ondeck":[/^tv\.ondeck\.([0-9]+)/],"home.television.recent":[/^tv\.recentlyadded\.([0-9]+)/],"home.videos.recent":[/^video\.recent\.([0-9]+)/]};function ii(e,t){return t.some((t=>t.test(e)))}var si=r(74226),ai=r(36009),oi=r(69284),li=r(82057),ci=r(36870),di=r(32511),ui=r(94118);function pi(e){const t=window.navigator;let r;return e?r=[e]:t.languages?r=t.languages:t.language?r=[t.language]:t.userLanguage&&(r=[t.userLanguage]),(0,ui.Z)(r)||"en"}var mi=r(40085),hi=r(91763),gi=r(17633),yi=r(4913),vi=r(27586),fi=r(32975),bi=r(13220);const Zi=bi.Z.extend({name:"ReminderModel",syncedAttrs:{data:zn.Z.object,id:zn.Z.string.isRequired,remindAfter:zn.Z.string.isRequired,times:zn.Z.integer.isRequired}}),Si=fi.Z.extend({name:"ReminderCollection",model:Zi});var Pi=r(55850),Ii=Object.defineProperty,Ei=Object.defineProperties,wi=Object.getOwnPropertyDescriptors,Ci=Object.getOwnPropertySymbols,Mi=Object.prototype.hasOwnProperty,Di=Object.prototype.propertyIsEnumerable,Oi=(e,t,r)=>t in e?Ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ti=(e,t)=>{for(var r in t||(t={}))Mi.call(t,r)&&Oi(e,r,t[r]);if(Ci)for(var r of Ci(t))Di.call(t,r)&&Oi(e,r,t[r]);return e},xi=(e,t)=>Ei(e,wi(t));const Ai=hi.Z.ORIGINAL,ki=Hn.Z.extend({name:"UserExperienceSettingsModel",sessionAttrs:xi(Ti({},Pi.Z.sessionAttrs),{isRemoteSchemaVersionNewer:zn.Z.boolean}),syncedAttrs:xi(Ti({},Pi.Z.syncedAttrs),{schemaVersion:zn.Z.integer,language:zn.Z.string,playThemeMusic:zn.Z.boolean,allowHttpFallback:zn.Z.string,timeFormat:zn.Z.string,dismissedWhatsNewFeatures:zn.Z.object,messageRecipients:zn.Z.array,dismissProfileGetStartedCard:zn.Z.boolean,autoAdjustQuality:zn.Z.boolean,remoteSmallVideoAtOriginalQuality:zn.Z.boolean,useHomeStreamingRecommendedSettings:zn.Z.boolean,localQuality:zn.Z.integer,remoteQuality:zn.Z.integer,audioBoost:zn.Z.integer,subtitleColor:zn.Z.string,subtitlePosition:zn.Z.string,subtitleSize:zn.Z.integer,subtitlesBurnLevel:zn.Z.string,extrasPrefixCount:zn.Z.integer,audioForceMultiChannel:zn.Z.boolean,forceTranscodeProtocolHLS:zn.Z.boolean,autoPlay:zn.Z.boolean,calendarViewType:zn.Z.string,columnAdjustment:zn.Z.integer,columnWidthMultiplier:zn.Z.float,dashboardNowPlayingShowDetails:zn.Z.boolean,hasDismissedDVRUpsell:zn.Z.boolean,hasDismissedServerDashboardUpsell:zn.Z.boolean,hasDismissedHubPromotionWarning:zn.Z.boolean,hasCompletedStreamingServicesOnboarding:zn.Z.boolean,isSidebarCollapsed:zn.Z.boolean,libraryTableColumns:zn.Z.object,listStyles:zn.Z.object,prePlayListStyles:zn.Z.object,directoryListStyles:zn.Z.object,directoryTableColumns:zn.Z.object,savedDirectoryListKeys:zn.Z.object,relayReminders:zn.Z.object,showAdvancedSettings:zn.Z.boolean,showPrePlayArtwork:zn.Z.boolean,musicDownloadQuality:zn.Z.integer,videoDownloadQuality:zn.Z.integer,recentSearches:zn.Z.array,searchAllServers:zn.Z.boolean,libraryRoutes:zn.Z.object,hasDismissedNewsSunsetBanner:zn.Z.boolean,hasDismissedCustomHomeSunset:zn.Z.boolean}),syncedRelations:xi(Ti({},Pi.Z.syncedRelations),{reminders:{relationClass:Si}}),defaults:()=>xi(Ti({},Pi.Z.defaults),{isRemoteSchemaVersionNewer:!1,language:pi(),playThemeMusic:!1,allowHttpFallback:oi.Z.NEVER,timeFormat:"h:mma",dismissedWhatsNewFeatures:{},messageRecipients:[],dismissProfileGetStartedCard:!1,autoAdjustQuality:!1,remoteSmallVideoAtOriginalQuality:!0,useHomeStreamingRecommendedSettings:!0,localQuality:Ai,remoteQuality:6,audioBoost:ai.KH,subtitleColor:li.Z.WHITE,subtitlePosition:ci.Z.BOTTOM,subtitleSize:100,subtitlesBurnLevel:di.Z.AUTO,extrasPrefixCount:0,audioForceMultiChannel:!1,forceTranscodeProtocolHLS:!1,autoPlay:!0,calendarViewType:vi.XN,columnAdjustment:0,columnWidthMultiplier:1.5,dashboardNowPlayingShowDetails:!1,hasDismissedServerDashboardUpsell:!1,hasCompletedStreamingServicesOnboarding:!1,isSidebarCollapsed:!1,libraryTableColumns:{},listStyles:{[gi.Y3]:{episode:yi.TABLE,track:yi.TABLE},[gi.sD]:{track:yi.TABLE}},prePlayListStyles:{},directoryListStyles:{},directoryTableColumns:{},savedDirectoryListKeys:{},relayReminders:{},showAdvancedSettings:!1,showPrePlayArtwork:!1,musicDownloadQuality:hi.Z.ORIGINAL,videoDownloadQuality:hi.Z.ORIGINAL,recentSearches:[],searchAllServers:!1,libraryRoutes:{},hasDismissedNewsSunsetBanner:!1,hasDismissedCustomHomeSunset:!1}),initialize(){this.set({schemaVersion:ki.schemaVersion})},augmentResponse(e){if(e.schemaVersion>ki.schemaVersion)return f.Z.warn(`[Settings] Received settings with schemaVersion of ${e.schemaVersion}; expected ${ki.schemaVersion} or less.  Settings sharing is now disabled.`),xi(Ti({},this.toJSON()),{isRemoteSchemaVersionNewer:!0});e=Gi(e);const t=this.get("isDirty"),r=this.get("updatedAt"),n=(0,mi.Z)(e.updatedAt),i=r&&n&&r<n;if(t&&r===n||r&&n&&r>n)return this.toJSON();t&&i&&(e.isDirty=!1),e.isRemoteSchemaVersionNewer=!1;const s=this.has("dismissedWhatsNewFeatures");!e.hasOwnProperty("dismissedWhatsNewFeatures")&&s&&(f.Z.warn("[Settings] Overwriting dismissedWhatsNewFeatures with local value."),e.dismissedWhatsNewFeatures=this.get("dismissedWhatsNewFeatures"));const a=e.hasOwnProperty("hasCompletedStreamingServicesOnboarding"),o=this.has("hasCompletedStreamingServicesOnboarding");return!a&&o&&(f.Z.warn("[Settings] Overwriting hasCompletedStreamingServicesOnboarding with local value."),e.hasCompletedStreamingServicesOnboarding=this.get("hasCompletedStreamingServicesOnboarding")),e}},{schemaVersion:9}),Ni=ki;var Ri=r(61689),Li=r(6742);function ji(e){if(e)return e.split("--")}function Vi(e){Object.keys(e).forEach((t=>{const r=function(e){const t=ji(e);if(t.length<3)return e;const[r,n,i,s]=t,a=(0,Ri.Z)(i);return(0,Li.Z)(r,n,a,s)}(t);if(r!==t){const n=e[t];e[r]=n,delete e[t]}}))}var Ui=r(42227),Fi=r(35199),Bi=r(13734);function _i(e){e.isHidden&&!e.hiddenAt&&(e.hiddenAt=Date.now())}const zi={1:Wi,2:function(e){const{lastSourcePivots:t,savedPivotParams:r,sidebarSettings:{pinnedSources:n}={}}=e;return t&&Vi(t),r&&Vi(r),n&&n.forEach((e=>{const t=ji(e.key);if(!t)return;const r=t.pop(),n=(0,Ri.Z)(r);if(n!==r){const r=(0,Li.Z)(...t,n);e.directoryID||(e.directoryID=n),e.key=r}})),e},3:Wi,4:function(e){if(!e.relayReminders)return e;e.reminders=e.reminders||[];for(const t in e.relayReminders){const r=(0,Bi.Z)(Fi.Z.Relay,t);if(e.reminders.some((e=>e.id===r)))continue;const n=e.relayReminders[t],i={id:r,remindAfter:(0,Ui.Z)(n.remindAfter).toISOString(),times:Math.max(0,n.times-1)};e.reminders.push(new Zi(i).toJSON())}return delete e.relayReminders,e},5:Wi,6:Wi,7:Wi,8:Wi,9:Wi},Hi=[function(e){if(null!=e.autoHomeHubsEnabled)return e;const t=e.homeSettings;return t&&t.hasCustomizations?e.autoHomeHubsEnabled=!1:e.autoHomeHubsEnabled=!0,e},function(e){const t=e.sidebarSettings;t&&t.pinnedSources&&t.pinnedSources.forEach(_i);const r=e.homeSettings;return r&&r.hubs&&r.hubs.forEach(_i),e},function(e){const{audioBoost:t}=e;if(null!=t){const r=t===ai.Yq?ai.KH:ai.o5,n=Ni.prototype.defaults().audioBoost;r!==t&&r!==n&&(e.audioBoost=r)}return e},function(e){var t;const r=e.homeSettings;return r&&!e.autoHomeHubsEnabled&&(r.hubs=null==(t=r.hubs)?void 0:t.reduce(((e,t)=>{const r=function(e){for(const t in ni)if(ii(e,ni[t]))return t;return e}(t.hubIdentifier);return"/hubs/promoted"===t.directoryKey&&t.provider.identifier===si.Y3?e.find((e=>{var n,i,s,a;return e.hubIdentifier===r&&(null==(n=e.provider)?void 0:n.identifier)===(null==(i=t.provider)?void 0:i.identifier)&&(null==(s=e.server)?void 0:s.machineIdentifier)===(null==(a=t.server)?void 0:a.machineIdentifier)}))||(t.directoryKey="/hubs",t.hubIdentifier=r,e.push(t)):e.push(t),e}),[])),e}];function Wi(e){return e}function Gi(e={}){let t=e.schemaVersion||0;for(;t<Ni.schemaVersion;)e.schemaVersion=++t,zi[t](e);return Hi.forEach(((t,r)=>{try{t(e)}catch(e){f.Z.error("[User] Setting migration[%d] error",r,e)}})),e}function Qi(){const e=Cn(qr.Z.storageKey).then((e=>{if(e.users&&e.users.some((e=>e.experienceSettings&&e.experienceSettings.schemaVersion!==Ni.schemaVersion)))return e.users.forEach((e=>{e.experienceSettings=Gi(e.experienceSettings)})),Mn(qr.Z.storageKey,e)}));return(0,z.Z)(e)}const $i="samenetwork",Ki=Hn.Z.extend({name:"DesktopSettingsModel",storageKey:"settingsv2",syncedAttrs:{preferInsecureConnections:zn.Z.string,"syncQuality!video":zn.Z.integer,"syncQuality!music":zn.Z.integer,"syncQuality!photo":zn.Z.integer,viewedUnclaimedServers:zn.Z.list,dismissedUnclaimedServers:zn.Z.list},defaults:()=>({preferInsecureConnections:ne.Z.shouldPreferInsecureLocalConnections?$i:"never","syncQuality!video":8,"syncQuality!music":2,"syncQuality!photo":2,viewedUnclaimedServers:[],dismissedUnclaimedServers:[]})});var qi=Object.defineProperty,Yi=Object.getOwnPropertySymbols,Xi=Object.prototype.hasOwnProperty,Ji=Object.prototype.propertyIsEnumerable,es=(e,t,r)=>t in e?qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ts=(e,t)=>{for(var r in t||(t={}))Xi.call(t,r)&&es(e,r,t[r]);if(Yi)for(var r of Yi(t))Ji.call(t,r)&&es(e,r,t[r]);return e};const rs=["autoLogin","chromecastAppID","chromecastCustomAppID","debugLevel","directPlay","directStream","rejectDirectConnections","serverUpdateDismissedVersion"],ns=function(){const e=Ki.prototype.storageKey,t=$n.prototype.storageKey,r=Cn(e).then((r=>{const n=v().pick(r,rs);if(0!==Object.keys(n).length)return Cn(t,{}).then((e=>{const r=ts(ts({},e),n);return Mn(t,r)})).then((()=>Mn(e,v().omit(r,rs))))}));return(0,z.Z)(r)},is=["allowHttpFallback","audioBoost","language"],ss=function(){const e=Cn(Ki.prototype.storageKey).then((e=>{const t=v().pick(e,is);if(0!==Object.keys(t).length)return Nn(t).then((()=>Mn(Ki.prototype.storageKey,v().omit(e,is))))}));return(0,z.Z)(e)},as="plexTestToken";function os(){const e=l().Deferred(),t=Se.Z.set(as,1);return t.done((()=>{Se.Z.remove(as),e.resolve()})),t.fail((t=>{const r=new In;f.Z.warn(`Storage module swapped for ${r.name} due to exception: "${t}"`),En.register(r),Se.Z.register(r,{ignorePrevious:!0}),e.resolve()})),e.promise()}function ls(){return function(){const e=l().Deferred(),t=En.get("myPlexAccessToken");return t.done((()=>{window.PLEXWEB&&window.PLEXWEB.myPlexAccessToken||Se.Z.register(En.getInstance())})),t.always((()=>{e.resolve()})),e.promise()}().then(os).then(ns).then(ri).then(_n).then(ss).then(Qi)}var cs=r(5583),ds=r(46101);const us={[ds.FAIRPLAY]:cs.FAIRPLAY,[ds.PLAYREADY]:cs.PLAYREADY,[ds.WIDEVINE]:cs.WIDEVINE};function ps(e,t){return window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess(e,t):Promise.reject(new Error("NotSupportedError"))}function ms(e,t,r){return window.MediaKeys||window.WebKitMediaKeys||window.MSMediaKeys?new Promise(((n,i)=>{const{audioCapabilities:s=[],videoCapabilities:a=[]}=r[0],o=s.concat(a).map((e=>e.contentType));o&&o.length&&o.every((r=>e.isTypeSupported(t,r)))?n({keySystem:t}):i(new Error("NotSupportedError"))})):Promise.reject(new Error("NotSupportedError"))}const hs=function(e,t=Object.values(ds)){const{audioCapabilities:r,videoCapabilities:n}=e,i=[{initDataTypes:["cenc"],audioCapabilities:r,videoCapabilities:n}],s=l().Deferred(),a=window.WebKitMediaKeys,o=a?ms.bind(null,a):ps,c=t.map((e=>o(e,i)));return Promise.allSettled(c).then((e=>{const r=e.reduce(((e,r,n)=>{const{status:i,reason:s,value:a}=r;return"fulfilled"===i?((0,f.Z)("[Player] %s is available",a.keySystem),e.push(a.keySystem)):(0,f.Z)("[Player] %s is unavailable: %s",t[n],s.message),e}),[]);r.length?s.resolve(r):s.reject()})),s.promise()},gs=function(){return hs({videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]}).then((e=>{const t=function(e){let t;for(const r of e)if(t=us[r],t)break;return t}(e);return(0,f.Z)("[Player] Supported key systems:",e),(0,f.Z)("[Player] Selected DRM type:",t),t}))};var ys=r(17131);function vs(){const e=(0,g.DB)("appModel"),t=ne.Z.drmType;return(t!==cs.NONE?l().Deferred().resolve(t).promise():(0,z.Z)(gs())).then((t=>{e.set("drmType",t),ys.Z.setOption("drmType",t)}),(()=>{e.unset("drmType"),ys.Z.setOption("drmType",cs.NONE)}))}var fs=r(80129),bs=r.n(fs),Zs=r(87442),Ss=r(25353),Ps=r(19280);const Is=function(){const{hashParams:e}=(0,H.Z)(window.location.href),t=bs().parse(e.substr(1)),r=(0,mi.Z)(t.pinID);if(r){const e=(0,g.DB)("appModel");(0,Ps.Z)(e).set({pinIDInitial:r}),(0,Zs.c9)(),window.history.replaceState(null,null,(0,Ss.Z)(window.location.href,"pinID"))}return l().Deferred().resolve().promise()};var Es=r(58024);function ws(){const e=(0,g.DB)("fullscreenManager").initialize({dispatchEnterFullscreen(){(0,g.DB)("appStore").dispatch((0,Es.rM)())},dispatchExitFullscreen(){(0,g.DB)("appStore").dispatch((0,Es.Qg)())}});return(0,z.Z)(e)}var Cs=r(42441),Ms=r.n(Cs);function Ds(){const e=(0,g.DB)("keyboardShortcuts");let t=!0;function r(r,n,i){if(t||n instanceof window.KeyboardEvent&&"esc"===i)return e[r.fn](e,n,i)}return ae.Z.on("anyModalOpen",(()=>{t=!1})),ae.Z.on("allModalsClosed",(()=>{t=!0})),e.shortcuts.forEach((e=>{Ms().bind(e.keys,r.bind(null,e))})),l().Deferred().resolve().promise()}var Os=r(17414);function Ts(){const e=(0,g.DB)("settingFinder").find("language");return ys.Z.setOption("language",e),(0,z.Z)(Os.Z.load(e))}var xs=r(54094),As=r(52084);const ks=["touchstart","mousedown","click","keydown","keypress"];function Ns(){function e(){ks.forEach((t=>{document.body.removeEventListener(t,e,!0)}));const t=(0,xs.Vq)("audio",!0);function r(){t.removeEventListener("playing",r),t.removeEventListener("error",r),t.src="",t.removeAttribute("src"),(0,xs.u$)(t)}t.addEventListener("playing",r),t.addEventListener("error",r),t.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=";const n=t.play();n&&n.then&&n.catch((()=>{}))}return(0,As.P_)()||ks.forEach((t=>{document.body.addEventListener(t,e,!0)})),l().Deferred().resolve().promise()}var Rs=r(52711);function Ls(e){return e.get("isFullOwnedServer")||e.get("isFullServer")}function js(){let e;return ie.Z.hasWebSocket&&(e=new Ne.Z({name:"MediaServerEventManager",appModel:(0,g.DB)("appModel"),isValidServer:Ls,supportsLongPolling:!1,allowMultipleConnections:ne.Z.allowMultipleWebSocketConnections,ServerEventConnection:(0,g.DB)("mediaServerEventConnection"),ServerRetryManager:Rs.Z}),e.start()),l().Deferred().resolve().promise()}const Vs=se.Z.extend({mixins:oe.Z,name:"AbstractReporter",enabled:!1,destroyed:!1,_suspended:!1,initialize(e={}){!1!==e.enabled&&this.enable()},hasSupport:()=>!0,enable(){this.enabled||this.destroyed||!this.hasSupport()||(this.enabled=!0,this.listenTo(ae.Z,{"log:message":this.onLog,"log:group":this.onLog,"log:groupCollapsed":this.onLog,"log:groupEnd":this.onLog}),this.onEnabled())},disable(){this.enabled&&(this.enabled=!1,this.stopListening(),this.onDisabled())},destroy(){this.destroyed||(this.disable(),this.destroyed=!0,this.onDestroyed())},_suspend(){this._suspended||(this._suspended=!0,this.onSuspended())},_resume(){this._suspended&&(this._suspended=!1,this.onResumed())},onLog(e){if(this._suspended)ie.Z.hasConsole&&window.console.warn("[Logging] Ignored log reentrancy:",JSON.stringify(e));else{switch(this._suspend(),e.type){case"log:message":this.onLogMessage(e);break;case"log:group":this.onLogGroup(e);break;case"log:groupCollapsed":this.onLogGroupCollapsed(e);break;case"log:groupEnd":this.onLogGroupEnd(e)}this._resume()}},onLogMessage(){},onLogGroup(){},onLogGroupCollapsed(){this.onLogGroup.apply(this,arguments)},onLogGroupEnd(){},onEnabled(){},onDisabled(){},onResumed(){},onSuspended(){},onDestroyed(){}}),Us={[f.Z.LEVEL_LOG]:"log",[f.Z.LEVEL_DEBUG]:"debug",[f.Z.LEVEL_INFO]:"info",[f.Z.LEVEL_WARN]:"warn",[f.Z.LEVEL_ERROR]:"error"},Fs=Vs.extend({name:"ConsoleReporter",hasSupport:()=>ie.Z.hasConsole,onLogMessage(e){const t=e.message,r=Us[e.level];(window.console[r]||window.console.log).call(window.console,t)},onLogGroup(e){(window.console.group||window.console.log).call(window.console,e.message)},onLogGroupCollapsed(e){(window.console.groupCollapsed||window.console.log).call(window.console,e.message)},onLogGroupEnd(){window.console.groupEnd&&window.console.groupEnd()}});function Bs(){return new Fs,l().Deferred().resolve().promise()}var _s=r(11057);function zs(){(0,f.Z)("[Servers] Initializing..."),function(){const e=(0,g.DB)("appModel"),t=e.get("servers"),r=e.get("cloudServer");r.addConnection((0,_s.Z)()),t.add(r)}(),function(e){const t=(0,g.DB)("appModel"),r=t.get("servers"),n=qr.Z.getActiveServers();n&&n.each((e=>{if(e.get("connections").length)try{const n=new qt.ZP(e.toJSON(),{parent:t}),i=n.get("connections");i.reset(i.filter((e=>!e.get("relay")))),!n.get("isMobileServer")&&i.length>0&&(Ws(n),r.add(n))}catch(e){f.Z.warn(e)}}))}(),function(){const e=(0,g.DB)("appModel"),t=e.get("servers"),r=ne.Z.primaryServer;if(!r)return;const n=new qt.ZP({machineIdentifier:r.machineIdentifier,friendlyName:r.name,isShared:r.shared,superToken:r.superToken,accessToken:r.accessToken,sourceTitle:r.sourceTitle},{parent:e});n.addConnection({scheme:r.scheme,address:r.address,port:r.port}),t.add(n)}(),function(){const e=(0,g.DB)("appModel"),t=e.get("servers"),r=new qt.ZP({isBundled:!0},{parent:e});r.addConnection({scheme:window.location.protocol.replace(":",""),address:window.location.hostname,port:window.location.port,isBundled:!0}),Ws(r),t.add(r)}(),function(){if(!ne.Z.allowLoopbackDiscovery)return;const e=(0,g.DB)("appModel"),t=e.get("servers"),r=new qt.ZP({},{parent:e});r.addConnection({scheme:"http",address:"127.0.0.1",port:"32400"}),Ws(r),t.add(r)}(),(0,g.DB)("serverManager").start(),(0,g.DB)("primaryServerManager").start(),(0,g.DB)("serverConnectionManager").start(),(0,g.DB)("companionServerManager").start(),(0,g.DB)("providerManager").start(),(0,g.DB)("serverUpdateManager").start(),(0,f.Z)("[Servers] Finished initialization")}function Hs(){(0,f.Z)("[Servers] Clearing...");const e=(0,g.DB)("appModel"),t=e.get("servers");(0,g.DB)("serverManager").stop(),(0,g.DB)("primaryServerManager").stop(),(0,g.DB)("serverConnectionManager").stop(),(0,g.DB)("serverConnectionTestManager").reset(),(0,g.DB)("companionServerManager").stop(),(0,g.DB)("providerManager").stop(),(0,g.DB)("serverUpdateManager").stop(),t.uninitialize(),t.reset(),t.initialize(),e.unset("primaryServer"),e.unset("companionServer")}function Ws(e){const t=e.get("connections").map((e=>e.get("uri")));(0,f.Z)("[Servers]","Initialize server",e.get("accessToken")?"with token,":"without token,",v().compact([e.get("debugName"),e.get("machineIdentifier"),...t]).join(", "))}function Gs(){return zs(),ae.Z.on("clear:servers",Hs),ae.Z.on("init:servers",zs),l().Deferred().resolve().promise()}const Qs=se.Z.extend({mixins:oe.Z,announcementsUpdateDelay:36e5,initialize(){this.user=(0,g.DB)("appModel").get("user"),v().bindAll(this,"updateAnnouncements","onSignedInChange")},start(){const e=v().debounce(this.onSignedInChange);this.listenTo(this.user,"change:signedIn",e),this.user.populate().fail(e)},stop(){window.clearTimeout(this.announcementsUpdateTimeout),this.user.get("desktop").get("announcements").clear(),this.stopListening()},updateAnnouncements(){this.user.get("restricted")||this.user.get("anonymous")||!this.user.server.get("isConnected")||(this.user.get("desktop").get("announcements").fetch(),this.announcementsUpdateTimeout&&window.clearTimeout(this.announcementsUpdateTimeout),this.announcementsUpdateTimeout=window.setTimeout(this.updateAnnouncements,this.announcementsUpdateDelay))},onSignedInChange(){this.user.get("desktop").get("announcements").clear(),this.updateAnnouncements()}});var $s=r(56925),Ks=r(95069);const qs=["plex_tv_auth","plex_tv_lang"];var Ys=r(77054),Xs=Object.defineProperty,Js=Object.defineProperties,ea=Object.getOwnPropertyDescriptors,ta=Object.getOwnPropertySymbols,ra=Object.prototype.hasOwnProperty,na=Object.prototype.propertyIsEnumerable,ia=(e,t,r)=>t in e?Xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const sa=se.Z.extend({mixins:oe.Z,initialize(e){this.user=e,this.debouncedChangeTimeout=null},start(){const e=this.user;this.previousUserID=e.id,this.listenTo(e,{change:this.onUserChange,"change:hasInvalidToken":this.onHasInvalidTokenChange,"change:isSignedIn":this.onIsSignedInChange}),this.listenTo(ae.Z,{[`cloudServer:${Ks.Ej}`]:this.onNotifyAccountChange});const t=e.get("hasInvalidToken"),r=e.get("isSignedIn");t&&this.onHasInvalidTokenChange(e,t),r&&this.onIsSignedInChangeHandleToken(e,r);const n=(0,g.DB)("settingFinder").find("autoLogin")||e.get("isUnlocked");(0,f.Z)("[UserManager] autoLogin",n),n||this._lockIfInHome()},handleInvalidToken(){const e=new He.Z({title:(0,Fe.Z)("Invalid Credentials"),message:(0,Fe.Z)("Your credentials have expired. Please sign in again."),confirmLabel:(0,Fe.Z)("OK"),cancelLabel:(0,Fe.Z)("Ignore")});e.promise.done((()=>{(0,Wt.Z)("login")})),ae.Z.trigger("show:modal",e)},_lockIfInHome(){const e=qr.Z.getActiveUser();(null==e?void 0:e.get("home"))&&this.user.set("lockState",Yr.Ik.Locked)},_updateUser(e,t){if(t){const r={};t.id!==e.id&&(r.included=["experienceSettings"]),t.copyFromModel(e,r)}else qr.Z.get("users").add(e.toJSON(),{parse:!0});qr.Z.debouncedSave()},onHasInvalidTokenChange(e,t){t&&this.handleInvalidToken()},onUserChange(e){this.debouncedChangeTimeout&&window.clearTimeout(this.debouncedChangeTimeout);const t=qr.Z.getActiveUser();this.debouncedChangeTimeout=window.setTimeout(this._updateUser.bind(this,e,t),0)},onIsSignedInChange(e,t){this.onIsSignedInChangeHandleToken(e,t),this.onIsSignedInChangeHandleSyncSettings(e,t),this.onIsSignedInChangeHandlePopulateUser(e,t)},onIsSignedInChangeHandleToken(e,t){var r;if(this.stopListening(e,"change:hasInvalidToken",this.onHasInvalidTokenChange),t){if(t&&e.get("isLocked")&&(this.previousUserID=e.id),t&&e.get("restricted")&&document.cookie.split(";").forEach((e=>{const[t]=e.trim().split("=");t&&!qs.includes(t)&&(document.cookie=`${t}=; Domain=plex.tv; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`,document.cookie=`${t}=; Domain=.plex.tv; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`,document.cookie=`${t}=; Domain=.app.plex.tv; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`)})),e.get("isFullUser")&&t){const t=e.server.getXHROptions("/api/claim/subscribe");l().ajax((r=((e,t)=>{for(var r in t||(t={}))ra.call(t,r)&&ia(e,r,t[r]);if(ta)for(var r of ta(t))na.call(t,r)&&ia(e,r,t[r]);return e})({},t),Js(r,ea({type:"POST"}))))}}else e.get("hasInvalidToken")&&this.handleInvalidToken()},onIsSignedInChangeHandleSyncSettings(e,t){if(!t)return;const r=(0,g.DB)("appStore").dispatch,n=e.get("settings"),i=e.get("experienceSettings"),s=n.reduce(((e,t)=>(t.get("isDirty")&&e.push(t.get("id")),e)),[]);i.get("isDirty")&&r((0,Ys.Xe)()),s.length&&r((0,Ys.Z$)(s))},onIsSignedInChangeHandlePopulateUser(e,t){if(!t)return e.get("features").clear(),void e.get("optOuts").clear();const r=(0,g.DB)("appStore").dispatch,n={reset:!0};e.get("homeDetails").populate(n),e.get("homeUsers").populate(n),e.get("consent").populate(n),e.get("geo").populate(n);const i=e.get("desktop");i.get("cloudCompanions").populate(n),i.get("devices").populate(n),i.get("invites").populate(n),i.get("socialNetworks").populate(n),e.get("features").populate(n).then((()=>{r((0,$s.Zu)())})),e.get("optOuts").populate(n),r((0,Ys.Bl)())},onNotifyAccountChange(){this.user.fetch().then((()=>{(0,f.Z)("[User] updated account following account change notification")}),(e=>{f.Z.error("[User] Unable to update account following account change notification",e)}))}});function aa(){let e=(0,z.Z)(qr.Z.populate());return e=e.then((()=>Se.Z.get("myPlexAccessToken"))),e=e.then((e=>{const t=(0,g.DB)("appModel").get("user"),r=qr.Z.get("users").findWhere({authToken:e});r&&(t.activateStoredUser(r.id),r.copyToModel(t))}),(()=>{const e=(0,g.DB)("appModel").get("user");e.activateStoredUser(0);const t=qr.Z.getActiveUser();t&&t.copyToModel(e)})),(0,z.Z)(e).then((()=>{const e=(0,g.DB)("appModel").get("user");new sa(e).start(),(new Qs).start()}))}function oa(){return(0,g.DB)("watchTogetherRoomsManager").start(),(0,g.DB)("syncplaySessionManager").start(),l().Deferred().resolve().promise()}function la(){return p.render(c.createElement(m.zt,{store:(0,g.DB)("appStore")},c.createElement(h.F0,{history:ve.Z},c.createElement(d.W,{backend:u.PD},c.createElement(ye.Z,null)))),document.getElementById("plex")),l().Deferred().resolve().promise()}function ca(){let e=function(e={},t={}){const r=((e,t)=>{for(var r in t||(t={}))R.call(t,r)&&j(e,r,t[r]);if(N)for(var r of N(t))L.call(t,r)&&j(e,r,t[r]);return e})({allowUrls:[new RegExp((0,A.Z)("-plex-4.87.2.25887-d04a1ad"))],debug:!1,dsn:"https://54c24aee6403406294dd6094728f20e0@o17675.ingest.sentry.io/5594889",environment:"public",ignoreErrors:["ResizeObserver","songId",/^Non-Error promise rejection captured/,/^SecurityError: The operation is insecure/],integrations:[new D.jK.Breadcrumbs({fetch:!1,xhr:!1})],release:"desktop-desktop@4.87.2.25887-d04a1ad",sampleRate:.05,version:"4.87.2"},e),n=V.reduce(((e,t)=>(e.hasOwnProperty(t)||(e[t]=x.Z.prop(t)),e)),t);return O.S1(r),Object.entries(n).forEach((([e,t])=>{T.YA(e,t)})),l().Deferred().resolve().promise()}();return e=e.then(Bs),e=e.then(Zn),e=e.then(ls),e=e.then(Ze),ie.Z.hasServiceWorker&&(e=e.then(function(){(0,f.Z)("[Workers] Initializing...");const e=l().Deferred();return(0,g.DB)("serviceWorker").register().then((t=>{(0,f.Z)("[Workers] Finished initialization"),e.resolve()})).catch((t=>{(0,f.Z)("[Workers] Failed initialization: ",t),e.resolve()})),e.promise()}())),e=e.then(De),e=e.then(vs),e=e.then(M),e=e.then(Sn),e=e.then(aa),e=e.then(Ts),ne.Z.allowCloudPubSub&&(e=e.then((()=>function(){let e;return ie.Z.hasWebSocket&&(e=new Ne.Z({name:"CloudServerEventManager",appModel:(0,g.DB)("appModel"),isValidServer:Re,supportsLongPolling:!0,allowMultipleConnections:!0,ServerEventConnection:xe,ServerRetryManager:ke}),e.start()),l().Deferred().resolve().promise()}()))),e=e.then(js),e=e.then(re),e=e.then(Gs),e=e.then(Ns),e=e.then(Ds),e=e.then(Is),e=e.then(ws),e=e.then(ge),e=e.then(me),e=e.then(te),e=e.then(la),e=e.then(oa),e}var da=r(40202),ua=r.n(da),pa=r(61153),ma=r.n(pa),ha=r(79323),ga=r.n(ha),ya=r(21029),va=r.n(ya),fa=r(71898),ba=r.n(fa),Za=r(25399),Sa=r.n(Za),Pa=r(44410),Ia=r.n(Pa),Ea=r(24905),wa=r.n(Ea);ua().registerPartial("setting",Ia()),ua().registerPartial("lockableTagInput",ba()),ua().registerPartial("lockableTextInput",Sa()),ua().registerPartial("lockableNumericInput",va()),ua().registerPartial("textInput",wa()),ua().registerPartial("autocompleteTextInput",ma()),ua().registerPartial("connectError",ga());const Ca=Hn.Z.extend({name:"SessionStatsModel",storageKey:"sessionstats",syncedAttrs:{heartbeatTime:zn.Z.integer,lastPlayingHeartbeatTime:zn.Z.integer,playbackCount:zn.Z.integer,playbackTime:zn.Z.integer,sessionId:zn.Z.string,anonymousSessionId:zn.Z.string,startTime:zn.Z.integer,lastInteractionTime:zn.Z.integer},defaults:{playbackCount:0,playbackTime:0}});var Ma=r(63295),Da=r(70777),Oa=r(22222),Ta=r(27649),xa=r(57200),Aa=r(17051),ka=r(33588),Na=r(93805),Ra=r(15579),La=r(73460),ja=r(53274),Va=r(36505);function Ua(e){return new Promise(((t,r)=>{function n(e){var t;e&&(null==(t=a.parentNode)||t.removeChild(a)),a.removeEventListener("load",i),a.removeEventListener("error",s)}function i(){n(!1),t()}function s(){n(!0),r(new Error(`Unable to load: ${e}`))}const a=document.createElement("script");try{!function(e){const t=document.getElementsByTagName("SCRIPT");return Array.from(t).some((t=>t.src===e))}(e)?(a.addEventListener("error",s),a.addEventListener("load",i),a.type="text/javascript",a.src=e,document.body.appendChild(a)):t()}catch(e){n(!0),r(e)}}))}var Fa=Object.defineProperty,Ba=Object.getOwnPropertySymbols,_a=Object.prototype.hasOwnProperty,za=Object.prototype.propertyIsEnumerable,Ha=(e,t,r)=>t in e?Fa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wa=(e,t)=>{for(var r in t||(t={}))_a.call(t,r)&&Ha(e,r,t[r]);if(Ba)for(var r of Ba(t))za.call(t,r)&&Ha(e,r,t[r]);return e};const Ga="//imasdk.googleapis.com/pal/sdkloader/pal.js",Qa=window.ResizeObserver||ja.d,$a=(0,c.createContext)(void 0),Ka=function(e){const[t,r]=(0,c.useState)({state:0,nonceLoader:void 0}),n=(0,c.useRef)(),i=(0,c.useMemo)((()=>({stateMachine:t,videoDimensions:n.current,onFetch:()=>{0===t.state&&(r({state:1,nonceLoader:void 0}),(f.Z.info("[PAL] Loading SDK",Ga),Ua(Ga)).then((()=>{f.Z.info("[PAL] Loaded SDK",Ga);const e=new goog.pal.ConsentSettings;e.allowStorage=!1,r({state:3,nonceLoader:new goog.pal.NonceLoader(e)})}),(()=>{f.Z.error("[PAL] Failed to load SDK"),r({state:2,nonceLoader:void 0})})))}})),[t]),[s,{height:a,width:o}]=(0,La.Z)(Wa({polyfill:Qa},undefined));return(0,c.useEffect)((()=>{e.testVideoDimensions?n.current=e.testVideoDimensions:a&&o&&(n.current={videoWidth:o,videoHeight:a})}),[e.testVideoDimensions,a,o]),c.createElement("div",{ref:s,className:"PalNonceProvider-container-YUpcLH"},c.createElement($a.Provider,{value:i},e.children))};var qa=r(72504),Ya=r(9358),Xa=r(37258),Ja=Object.getOwnPropertySymbols,eo=Object.prototype.hasOwnProperty,to=Object.prototype.propertyIsEnumerable;const ro=(0,Xa.Z)((function(e={},t){const r=function(e){const t=e,{mimeType:r,codecs:n}=t,i=((e,t)=>{var r={};for(var n in e)eo.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ja)for(var n of Ja(e))t.indexOf(n)<0&&to.call(e,n)&&(r[n]=e[n]);return r})(t,["mimeType","codecs"]);if(!r)return"";const s=[r];if(n&&s.push(`codecs="${n}"`),i)for(const e in i)s.push(`${e}="${i[e]}"`);return s.join("; ")}(e),n=(0,xs.Vq)("video",!0),i=n.canPlayType(r);return(0,xs.u$)(n),e.codecs?"probably"===i:"probably"===i||"maybe"===i}));var no=r(54834),io=r(14093),so=Object.defineProperty,ao=Object.defineProperties,oo=Object.getOwnPropertyDescriptors,lo=Object.getOwnPropertySymbols,co=Object.prototype.hasOwnProperty,uo=Object.prototype.propertyIsEnumerable,po=(e,t,r)=>t in e?so(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const mo=(0,Ya.Z)()?100:0;function ho(e){return!!(0,Ya.Z)()||"progressive"===e.deliveryType&&ro(e)}class go extends c.Component{constructor(e,t){super(e,t),this._onLoadTimeout=()=>{this._isAdLoaded||this.onError(qa.SM.VAST_MEDIA_FILE_TIMEOUT)},this._onPlaybackTimeout=()=>{this.onError(qa.SM.VAST_MEDIA_FILE_TIMEOUT)},this.onAdStart=()=>{this.props.onAdStart()},this.onAdClick=()=>{this.props.onAdClick()},this.onMediaError=()=>{this.onError(qa.SM.VAST_PROBLEM_DISPLAYING_MEDIA)},this.onEnd=()=>{this._lastPositionMilliseconds=null,this._lastOnPositionMillisecondsChange=null,this._clearPlaybackTimeout(),this._playNextAdOrResume()},this.onError=(e=qa.SM.UNDEFINED_ERROR)=>{this._adPod&&this._adPod.error(e),this._playNextAdOrResume()},this.onPositionMillisecondsChange=e=>{this._isAdLoaded||(this._isAdLoaded=!0),e!==this._lastPositionMilliseconds&&(this._setPlaybackTimeout(),this._lastPositionMilliseconds=e),this._adPod?this._adPod.progress(e):f.Z.error("[AdPlayer] Unexpected position update without an adPod"),(!this._lastOnPositionMillisecondsChange||e>=this._lastOnPositionMillisecondsChange+mo)&&(this._lastOnPositionMillisecondsChange=e,this.props.onPositionMillisecondsChange(e))},this._vmapClient=null,this._adPod=null,this._adPodPromise=null,this._isAdLoaded=!1,this._loadTimeoutID=null,this._playbackTimeoutID=null,this._lastPositionMilliseconds=null,this._lastOnPositionMillisecondsChange=null,this._mediaComponent=(0,g.DB)("mediaComponent"),this.bufferingDetectionLimit=ne.Z.bufferingDetectionLimit}componentDidMount(){const{url:e,playerPositionSeconds:t,followsManualRedirect:r}=this.props;this._vmapClient=new qa.KU({url:new window.URL(e),canPlayMedia:ho,followsManualRedirect:r,adEventListeners:{clickthrough:this.onAdClick,start:this.onAdStart}}),this._handlePositionUpdate(1e3*t,!0)}componentDidUpdate(e,t){const{ad:r,playerPositionSeconds:n,isMiniPlayer:i,isFullscreen:s,isPaused:a,isIdle:o,url:l,followsManualRedirect:c,volume:d}=this.props;l!==e.url&&(this.onEnd(),delete this._adPodPromise,this._adPod&&(this._adPod.dispose(),delete this._adPod),this._vmapClient&&this._vmapClient.dispose(),this._vmapClient=new qa.KU({url:new window.URL(l),canPlayMedia:ho,followsManualRedirect:c,adEventListeners:{clickthrough:this.onAdClick,start:this.onAdStart}}));const u=!o&&e.isIdle;if(u||n!==e.playerPositionSeconds){const t=n-e.playerPositionSeconds,r=t<0||t>1;this._handlePositionUpdate(1e3*n,r||u)}this._adPod&&r&&(i!==e.isMiniPlayer&&(this._adPod.expanded=!i),s!==e.isFullscreen&&(this._adPod.fullscreen=s),d!==e.volume&&(this._adPod.muted=0===d),a!==e.isPaused&&(this._adPod.paused=a,a?this._clearPlaybackTimeout():this._setPlaybackTimeout()))}componentWillUnmount(){this._loadTimeoutID&&(this._loadTimeoutID=window.clearTimeout(this._loadTimeoutID)),this._playbackTimeoutID&&(this._playbackTimeoutID=window.clearTimeout(this._playbackTimeoutID)),delete this._adPodPromise,this._adPod&&(this.props.ad&&!this._isAdLoaded&&this._adPod.error(qa.SM.VAST_MEDIA_FILE_TIMEOUT),this._adPod.dispose(),delete this._adPod),this._vmapClient&&this._vmapClient.dispose()}_handlePositionUpdate(e,t){const{isIdle:r}=this.props;if(!r)if(t&&this._vmapClient&&!this._adPodPromise&&!this.props.ad){const t=this._vmapClient.resolveAdPod(e);this._adPodPromise=t,t.then((e=>{let r;t===this._adPodPromise&&e&&(this._adPod=e,r=e.next()),r?this._playAd(r,e):(this._adPod&&(this._adPod.dispose(),delete this._adPod),delete this._adPodPromise,this.onEnd())}),(()=>{delete this._adPodPromise,this.onEnd()}))}else if(this._adPod){if(this._adPod.timeOffset>e)return;const t=this._adPod.next();t?this._playAd(t,this._adPod):(this._adPod.dispose(),delete this._adPod,delete this._adPodPromise)}else if(!this._adPodPromise&&this._vmapClient){const t=this._vmapClient.resolveNextAdPod(e);this._adPodPromise=t,t.then((e=>{t===this._adPodPromise&&(this._adPod=e,e||delete this._adPodPromise)}),(()=>{t===this._adPodPromise&&delete this._adPodPromise}))}}_playAd(e,t){const{volume:r,isMiniPlayer:n,isFullscreen:i,isPaused:s}=this.props;t.expanded=n,t.fullscreen=i,t.muted=0===r,t.paused=s,this._isAdLoaded=!1,this._loadTimeoutID=window.setTimeout(this._onLoadTimeout,8e3),this.props.onAdChange(e)}_playNextAdOrResume(){const e=this._adPod?this._adPod.next():null;e?this._playAd(e,this._adPod):(this._adPod&&this._adPod.dispose(),delete this._adPod,delete this._adPodPromise,this.props.onAdChange(e))}_setPlaybackTimeout(){this._clearPlaybackTimeout(),this.props.isPaused||(this._playbackTimeoutID=window.setTimeout(this._onPlaybackTimeout,8e3))}_clearPlaybackTimeout(){this._playbackTimeoutID=window.clearTimeout(this._playbackTimeoutID)}render(){var e,t,r,n;const i=this.props,{ad:s,url:a,isAdCountdownTimerEnabled:o,isMiniPlayer:l,isPaused:d,positionSeconds:u,playerPositionSeconds:p,statusOverlayClassName:m}=i,h=((e,t)=>{var r={};for(var n in e)co.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&lo)for(var n of lo(e))t.indexOf(n)<0&&uo.call(e,n)&&(r[n]=e[n]);return r})(i,["ad","url","isAdCountdownTimerEnabled","isMiniPlayer","isPaused","positionSeconds","playerPositionSeconds","statusOverlayClassName"]),g=this._adPod?Math.round((this._adPod.timeOffset-1e3*p)/1e3):io.pN,y=null!=(t=null==(e=this._adPod)?void 0:e.hasAnyCreative)&&t&&!l,v=!!(null==s?void 0:s.url),f=v?this._mediaComponent.getComponent({protocol:"http",isDirectPlay:!0}):null;return c.createElement(c.Fragment,null,v?c.createElement(f,(b=((e,t)=>{for(var r in t||(t={}))co.call(t,r)&&po(e,r,t[r]);if(lo)for(var r of lo(t))uo.call(t,r)&&po(e,r,t[r]);return e})({},h),Z={key:s.url.href,bufferingDetectionLimit:this.bufferingDetectionLimit,mediaType:no.pX,paused:d,positionSeconds:u,src:s.url.href,onEnd:this.onEnd,onError:this.onMediaError,onPositionMillisecondsChange:this.onPositionMillisecondsChange},ao(b,oo(Z)))):null,y?c.createElement(io.ZP,{className:m,displayIndex:null!=(r=null==s?void 0:s.displayIndex)?r:io.Ho,displayTotal:null!=(n=null==s?void 0:s.displayTotal)?n:io.Mf,isAdCountdownTimerEnabled:o,secondsRemaining:s&&null!=u?s.totalDurationRemaining-u:void 0,secondsTotal:null==s?void 0:s.totalDuration,secondsUntilAd:g}):null);var b,Z}}go.defaultProps={isIdle:!1,followsManualRedirect:!1};const yo=go;var vo=Object.defineProperty,fo=Object.defineProperties,bo=Object.getOwnPropertyDescriptors,Zo=Object.getOwnPropertySymbols,So=Object.prototype.hasOwnProperty,Po=Object.prototype.propertyIsEnumerable,Io=(e,t,r)=>t in e?vo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Eo=(e,t)=>{for(var r in t||(t={}))So.call(t,r)&&Io(e,r,t[r]);if(Zo)for(var r of Zo(t))Po.call(t,r)&&Io(e,r,t[r]);return e};function wo(e){const{url:t,onAdClick:r,onAdStart:n}=function({descriptionUrl:e,url:t,volume:r}){const n=(0,c.useContext)($a);if(void 0===n)throw new Error("usePal must be used within a PalNonceProvider context");const i=(0,c.useRef)(r),[s,a]=(0,c.useState)({state:0,nonceManager:void 0}),{onFetch:o}=n;(0,c.useEffect)((()=>{0===n.stateMachine.state&&o()}),[n.stateMachine.state,o]),(0,c.useEffect)((()=>{3===n.stateMachine.state&&0===s.state&&t&&e&&n.videoDimensions&&a({state:1,nonceManager:void 0})}),[n.stateMachine.nonceLoader,n.stateMachine.state,n.videoDimensions,e,s.state,t]),(0,c.useEffect)((()=>{if(3===n.stateMachine.state&&t&&n.videoDimensions){let t=!1;return n.stateMachine.nonceLoader.loadNonceManager(Wa({adWillAutoPlay:!0,adWillPlayMuted:0===i.current,continuousPlayback:!1,descriptionUrl:e,iconsSupported:!0,nonceLengthLimit:Number.MAX_SAFE_INTEGER,omidPartnerName:"Google1",omidPartnerVersion:"h.3.509.0",omidVersion:"1.3",playerType:Va.Se,playerVersion:"4.87.2",ppid:"",sessionId:(0,g.DB)("sessionStats").get("sessionId"),supportedApiFrameworks:[7],url:e},n.videoDimensions)).then((e=>{t||a({state:3,nonceManager:e})}),(()=>{t||(f.Z.error("[PAL] Failed to load nonceManager"),a({state:2,nonceManager:void 0}))})),()=>{t=!0}}}),[n.stateMachine.nonceLoader,n.stateMachine.state,n.videoDimensions,e,t]);const{nonceManager:l}=s;return(0,c.useMemo)((()=>{let e;if(2===n.stateMachine.state||2===s.state)e=t;else if(l&&t){const r=new window.URL(t);r.searchParams.append("paln",l.getNonce()),e=r.href}return{url:e,onAdClick:()=>{null==l||l.sendAdClick()},onAdStart:()=>{null==l||l.sendAdImpression()}}}),[n.stateMachine.state,l,s.state,t])}({url:e.url,descriptionUrl:e.metadataItem.publicPagesURL,volume:e.volume});return t?c.createElement(yo,(i=Eo({},e),s={ad:e.ad,url:t,onAdClick:r,onAdStart:n},fo(i,bo(s)))):null;var i,s}const Co=(0,m.$j)((function(){return(0,Oa.P1)((0,Ra.Z)(Da._W),(0,ka.Z)(["isPaused","positionSeconds","durationSeconds"]),(0,Aa.Z)(),Na.Z,((e,{volume:t})=>t),((e,t,r,n,i)=>({metadataItem:r,isAdCountdownTimerEnabled:e,volume:n||i||0,isPaused:t.isPaused,playerPositionSeconds:t.positionSeconds,playerDurationSeconds:t.durationSeconds})))}),(function(e,t){const{playerType:r}=t;return{onBufferingChange(t){e((0,xa.n9)({playerType:r,isBuffering:t}))},onPause(){e((0,xa.wO)({playerType:r,isApplicationInitiated:!0}))},onPlay(){e((0,xa.hY)({playerType:r,isApplicationInitiated:!0}))},onMetricsPlayerChange(t){e((0,Ta.Kq)({playerType:r,metricsPlayer:t}))}}}))((e=>c.createElement(Ka,null,c.createElement(wo,Eo({},e)))));var Mo=r(51359);const Do={default:Co},Oo=c.lazy((()=>{return void 0,null,e=function*(){try{const e=(0,Mo.Z)()?"//imasdk.googleapis.com/js/sdkloader/ima3_debug.js":"//imasdk.googleapis.com/js/sdkloader/ima3.js";(0,Mo.Z)()&&(0,f.Z)("[IMA] SDK loading from",e),yield Ua(e)}catch(e){return f.Z.error("[IMA] SDK load failed",e),Do}try{return(0,Mo.Z)()&&(0,f.Z)("[IMA] SDK %s loaded",window.google.ima.VERSION),(0,Mo.Z)()&&(0,f.Z)("[IMA] Enabling VPAID"),window.google.ima.settings.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.ENABLED),(0,Mo.Z)()&&(0,f.Z)("[IMA] Loading ImaPlayer"),yield r.e(146).then(r.bind(r,20011))}catch(e){return f.Z.error("[IMA] Player failed to initialize",e),Do}},new Promise(((t,r)=>{var n=t=>{try{s(e.next(t))}catch(e){r(e)}},i=t=>{try{s(e.throw(t))}catch(e){r(e)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,i);s((e=e.apply(undefined,null)).next())}));var e})),To={getComponent:()=>(0,Ma.Z)((0,g.DB)("appModel"),Da.CG)?Oo:Co};function xo(){return ro({mimeType:"application/x-mpegURL"})}var Ao=r(75463);const ko=c.lazy((()=>Promise.all([r.e(631),r.e(536)]).then(r.bind(r,39536)))),No=c.lazy((()=>Promise.all([r.e(123),r.e(927)]).then(r.bind(r,45927)))),Ro={getComponent:e=>e?"dash"===e.protocol||e.drm===cs.WIDEVINE&&"hls"===e.protocol||e.drm===cs.FAIRPLAY&&"hls"===e.protocol&&xo()?No:"hls"===e.protocol&&xo()?Ao.Z:"hls"===e.protocol?ko:Ao.Z:Ao.Z};var Lo=r(47041),jo=r(79400);const Vo=function(){const e=window.MediaSource||window.WebkitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer;return!(!e||"function"!=typeof e.isTypeSupported||t&&(!t.prototype||"function"!=typeof t.prototype.appendBuffer||"function"!=typeof t.prototype.remove))};var Uo=Object.getOwnPropertySymbols,Fo=Object.prototype.hasOwnProperty,Bo=Object.prototype.propertyIsEnumerable;var _o=r(58790);var zo=Object.defineProperty,Ho=Object.getOwnPropertySymbols,Wo=Object.prototype.hasOwnProperty,Go=Object.prototype.propertyIsEnumerable,Qo=(e,t,r)=>t in e?zo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$o=(e,t)=>{for(var r in t||(t={}))Wo.call(t,r)&&Qo(e,r,t[r]);if(Ho)for(var r of Ho(t))Go.call(t,r)&&Qo(e,r,t[r]);return e};const Ko={videoResolution:!0},qo={width:1920,height:1080,bitDepth:8,frameRate:30};function Yo(e,t){return v().pick(e,((e,r)=>0===r.indexOf(t)))}function Xo(e,t,r,n){const i=$o($o({},Yo(e,n)),Yo(t,n));return v().map(i,((e,i)=>{return{codec:v().has(t,i)?r:null,name:(s=i.slice(n.length),s?s.charAt(0).toLowerCase()+s.slice(1):""),value:e};var s}))}var Jo=r(82217);function el(e=Lo.Z.prop("video")){var t,r,n,i,s,a,o;const l=(null==(i=null==(n=null==(r=null==(t=e.directPlay)?void 0:t.mp4)?void 0:r.video)?void 0:n.codecs)?void 0:i.hevc)||(null==(o=null==(a=null==(s=e.directStream)?void 0:s.video)?void 0:a.codecs)?void 0:o.hevc);return(null==l?void 0:l.maxBitDepth)>=10}var tl=r(19529),rl=r(56594),nl=r(48488);function il(e,t){return!e||!!t&&e>=t}var sl=r(37243),al=Object.defineProperty,ol=Object.getOwnPropertySymbols,ll=Object.prototype.hasOwnProperty,cl=Object.prototype.propertyIsEnumerable,dl=(e,t,r)=>t in e?al(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ul=(e,t)=>{for(var r in t||(t={}))ll.call(t,r)&&dl(e,r,t[r]);if(ol)for(var r of ol(t))cl.call(t,r)&&dl(e,r,t[r]);return e};const pl=function e(t,r,n,i={},s){const a=(0,g.DB)("appModel"),o=a.get("user").get("experienceSettings"),l=a.get("deviceSettings"),c=Lo.Z.prop("video"),d=function(e,t){return!(!(0,sl.Z)()||!t.server.get("hasAdaptiveBitrate")||e.get("remotePlayer"))}(a,t),u=function(e){const{profile:t,metadataItem:r,mediaItem:n,canPlayAdaptiveBitrate:i,settings:s}=e;let{qualityIndex:a}=e;const o=n?[n]:r.get("Media"),l=rl.Z.getAvailableQualitiesFor(o,r.server,{lowestQualityIndex:t.lowestQualityIndex,highestQualityIndex:t.highestQualityIndex});return null==a?a=function(e){const{mediaItems:t,transcodeServer:r,metadataItem:n,canPlayAdaptiveBitrate:i,settings:s,availableQualities:a}=e,o=function(e){return Math.max.apply(Math,e.map((e=>e.bitrate)))}(t),l=r.get("maxUploadBitrate"),c=r.get("isPrivateConnection"),d=i&&s.get("autoAdjustQuality");let{localQualityDefault:u}=s;void 0===u&&(u=rl.Z.ORIGINAL);const p=(0,nl.Z)(n,c),m=(0,tl.Z)(n,c),h=rl.Z.getQualityByIndex(s.get(m));if(p){const e=s.get("useHomeStreamingRecommendedSettings")?u:h.index,t=rl.Z.getQualityByIndex(e),r=rl.Z.isExplicitQuality(t.index)&&il(t.bitrate,o);return t.index===rl.Z.ORIGINAL||r?rl.Z.ORIGINAL:d?rl.Z.CONVERT_AUTOMATICALLY:rl.Z.getBestAvailableQuality(t,a)}const g=il(l,o),y=h.index===rl.Z.ORIGINAL,v=il(h.bitrate,o);return s.get("remoteSmallVideoAtOriginalQuality")&&g&&(y||v)?rl.Z.ORIGINAL:d?rl.Z.CONVERT_AUTOMATICALLY:y&&g?rl.Z.ORIGINAL:rl.Z.getBestAvailableQuality(h,a)}({mediaItems:o,transcodeServer:r.server,metadataItem:r,canPlayAdaptiveBitrate:i,settings:s,availableQualities:l}):rl.Z.isExplicitQuality(a)&&!l.find((e=>e.index===a))&&(a=rl.Z.ORIGINAL),{availableQualities:l,quality:rl.Z.getQualityByIndex(a),qualityIndex:a}}({profile:c,metadataItem:t,qualityIndex:r,mediaItem:s,canPlayAdaptiveBitrate:d,settings:o}),p=u.qualityIndex,m=p===rl.Z.CONVERT_AUTOMATICALLY&&d,h=l.get("directPlay")&&!m,y=l.get("directStream")&&!m?1:0,v=d&&o.get("autoAdjustQuality")&&!rl.Z.isExplicitQuality(p);let f,b=u.quality;return m&&(b=function(e,t){const r=e.server.get("isPrivateConnection");if((0,nl.Z)(e,r)&&t.get("useHomeStreamingRecommendedSettings")){const e=t.defaults().localQuality;return rl.Z.getQualityByIndex(e)}const n=(0,tl.Z)(e,r),i=t.get(n);return rl.Z.getQualityByIndex(i)}(t,o)),p!==rl.Z.ORIGINAL&&(f=e(t,rl.Z.ORIGINAL,n,i,s)),ul({type:jo.Z.types.VIDEO,profile:c,allowDirectPlay:h,allowDirectStreamVideoWithSoftSubtitles:!0,allowIncompleteSegments:!0,allowMultiTrackAudio:t.server.get("isCloud"),subtitlesBurnLevel:o.get("subtitlesBurnLevel"),availableQualities:u.availableQualities,qualityIndex:p,quality:b,transcoderOptions:ul({addDebugOverlay:l.get("debugVideoQualityOverlay")?1:0,autoAdjustQuality:v||m?1:0,directStream:y,directStreamAudio:y,audioBoost:o.get("audioBoost")},i),originalQualityDecisionOptions:f},n)},ml=Vo(),hl=Vo()||xo(),gl=ml?"dash":"hls",yl=function(e,t,r){const n=qe.getMetadataType(e.get("type"));return(null==n?void 0:n.mediaType)===no.j0?function(){const e=[];return ml&&e.push("add-transcode-target(type=musicProfile&context=streaming&protocol=dash&container=mp4&audioCodec=aac)"),hl&&e.push("add-transcode-target(type=musicProfile&context=streaming&protocol=hls&container=mpegts&audioCodec=aac,mp3)"),{type:jo.Z.types.MUSIC,profile:Lo.Z.prop("music"),allowDirectPlay:!0,hasNativeHLS:hl,hasDASH:ml,transcoder:Jo.Z,transcodeProtocol:gl,preferredDirectPlayProtocol:gl,transcoderOptions:{directStreamAudio:1,mediaBufferSize:12288},profileExtra:e.length?e.join("+"):null}}():function(e,t,r){const n=(0,g.DB)("appModel").get("user").get("experienceSettings"),i={hasNativeHLS:hl,hasDASH:ml,hasStreamingMKV:!1,canDisplayHDR:el(),canDisplayDolbyVision:!1,subtitlesBurnLevel:n.get("subtitlesBurnLevel"),transcoder:Jo.Z,transcodeProtocol:gl,preferredDirectPlayProtocol:gl,profileExtra(e){const t=function(e){const t=e.finalProfile.directStream.video,r=(0,_o.Z)(e.media),n=r&&r.codec,i=t.codecs&&t.codecs[n],s=Xo(t,i,n,"min");let a=Xo(t,i,n,"max");if(!r)return[];const o={width:r.width<=qo.width,height:r.height<=qo.height,bitDepth:r.bitDepth<=qo.bitDepth,frameRate:r.frameRate<=qo.frameRate};a=a.filter((e=>{return!0!==o[e.name]&&!0!==Ko[e.name]&&(t=e.name,r=e.value,!qo[t]||qo[t]<r);var t,r}));const l=[...s.map((({codec:e,name:t,value:r})=>function({codec:e,name:t,value:r}){return`add-limitation(scope=videoCodec&scopeName=${encodeURIComponent(e||"*")}&type=lowerBound&name=video.${encodeURIComponent(t)}&value=${encodeURIComponent(r)}&replace=true)`}({codec:e,name:t,value:r}))),...a.map((({codec:e,name:t,value:r})=>function({codec:e,name:t,value:r}){return`add-limitation(scope=videoCodec&scopeName=${encodeURIComponent(e||"*")}&type=upperBound&name=video.${encodeURIComponent(t)}&value=${encodeURIComponent(r)}&replace=true)`}({codec:e,name:t,value:r})))];return i&&"h264"!==n&&l.push(function(e){const{protocol:t,codec:r}=e;return`append-transcode-target-codec(type=videoProfile&context=streaming&protocol=${encodeURIComponent(t)}&videoCodec=${encodeURIComponent(r)})`}({protocol:e.protocol,codec:n})),l}(e),r=e.finalProfile.directStream.video.codecs.hevc;if("hevc"===e.media.videoCodec&&r){const{maxBitDepth:n}=r;t.push(function(e={}){const{maxBitDepth:t=8,protocol:r,supportsHDR:n=!1,supportsDolbyVision:i=!1}=e,s=["bt709","bt470m","bt470bg","smpte170m","smpte240m"];return t>=10&&s.push("bt2020-10"),t>=12&&s.push("bt2020-12"),t>=10&&(n||i)&&s.push("smpte2084"),`add-limitation(scope=videoTranscodeTarget&scopeName=hevc&scopeType=videoCodec&context=streaming&protocol=${r}&type=match&name=video.colorTrc&list=${s.join("|")}&isRequired=false)`}({protocol:e.protocol,maxBitDepth:n,supportsHDR:e.canDisplayHDR,supportsDolbyVision:e.canDisplayDolbyVision}))}let n=Object.keys(e.finalProfile.directStream.audio.codecs);return"dash"===e.protocol&&(n=n.filter((e=>!1===/^e?ac3$/.test(e)))),t.push(function(e){const t=e,{type:r="videoProfile",context:n="streaming",videoCodec:i,audioCodec:s,subtitleCodec:a}=t,o=((e,t)=>{var r={};for(var n in e)Fo.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Uo)for(var n of Uo(e))t.indexOf(n)<0&&Bo.call(e,n)&&(r[n]=e[n]);return r})(t,["type","context","videoCodec","audioCodec","subtitleCodec"]),l={type:r,context:n};return i&&(l.videoCodec=Array.isArray(i)?i.join(","):i),s&&(l.audioCodec=Array.isArray(s)?s.join(","):s),a&&(l.subtitleCodec=Array.isArray(a)?a.join(","):a),Object.assign(l,o),`append-transcode-target-codec(${b.Z.stringifyParams(l)})`}({protocol:e.protocol,audioCodec:n.join(",")})),t.join("+")}},s=(0,g.DB)("appModel").get("user").get("experienceSettings");s.get("forceTranscodeProtocolHLS")&&"dash"===i.transcodeProtocol&&(hl?s.get("autoAdjustQuality")?f.Z.warn("[Player] Experimental alternate streaming protocol for video playback is disabled because automatic quality adjustment is enabled"):(f.Z.warn("[Player] Experimental alternate streaming protocol for video playback is enabled"),i.transcodeProtocol="hls"):f.Z.warn("[Player] Experimental alternate streaming protocol for video playback is unsupported by this browser"));const a={subtitleSize:n.get("subtitleSize"),mediaBufferSize:102400},o=r||e.get("Media")[0];return o&&"livetv"===o.origin&&(i.allowDirectPlay=!1),pl(e,t,i,a,r)}(e,t,r)},vl=se.Z.extend({mixins:[oe.Z],name:"AjaxQueue",queue:null,request:null,enabled:!1,destroyed:!1,initialize(e={}){this.queue=[],!1!==e.enabled&&this.enable()},enable(){this.enabled||this.destroyed||(this.enabled=!0,this.onEnabled())},disable(){this.enabled&&(this.enabled=!1,this.request=null,this.onDisabled())},destroy(){this.destroyed||(this.disable(),this.queue.length=0,this.destroyed=!0,this.onDestroyed())},send(e){e&&(this.queue.push(e),this._next())},_next(){if(!this._canNext())return;const e=this.queue.shift(),t=e&&this._getAjaxOptions(e);if(t){const e=l().ajax(t);e.always(this.onAjaxAlways.bind(this,e)),this.request=e}},_canNext(){return this.enabled&&!this.request},_getAjaxOptions:e=>e,onAjaxAlways(e){this.enabled&&e===this.request&&(this.request=null,this._next())},onEnabled(){this._next()},onDisabled(){},onDestroyed(){}});function fl(){const e=new vl;let t=null;return{setBaseUrl(e){t=e},trackEvent(r){if(!t)return void(0,U.Z)(!1,"Network metrics reporters requires a base URL to be set before tracking events");const n=b.Z.join([t,"collect/event"]),i=JSON.stringify(r);window.navigator.sendBeacon?window.navigator.sendBeacon(n,i):e.send({type:"POST",url:n,contentType:"text/plain",data:i})}}}r(28531);const bl=["enable","disable","set","start","trackClick","trackEvent","trackView","incrementPlaybackCount","addPlaybackTime","toJSON"],Zl=["setBaseUrl","trackEvent"];var Sl=r(32779),Pl=r(62682),Il=r(97025),El=r(72221),wl=Object.defineProperty,Cl=Object.defineProperties,Ml=Object.getOwnPropertyDescriptors,Dl=Object.getOwnPropertySymbols,Ol=Object.prototype.hasOwnProperty,Tl=Object.prototype.propertyIsEnumerable,xl=(e,t,r)=>t in e?wl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Al=(e,t)=>{for(var r in t||(t={}))Ol.call(t,r)&&xl(e,r,t[r]);if(Dl)for(var r of Dl(t))Tl.call(t,r)&&xl(e,r,t[r]);return e};function kl(e,t){const{server:r}=t,n=r.get("debugName");return f.Z.warn("[Connections] Aborting connection test for %s at %s because secure connections are disallowed",n,e),Nl(0,t)}function Nl(e,t){const{connection:r}=t,n=l().Deferred();return v().defer((()=>{r.set({currentTest:null,testState:Sl.nZ}),n.reject(r)})),n.promise()}function Rl(e){const{server:t,connection:r}=e,n=t.resolveUrl(e.url||"/media/providers",{connection:r}),i=(0,g.DB)("appModel"),s=i.get("settings"),a=i.get("deviceSettings");if(!ne.Z.allowHttpsMediaServerConnections&&r.get("isHttps")&&!t.get("isCloud"))return kl(n,e);const o=s&&s.get("preferInsecureConnections");if(!t.get("httpsRequired")&&!t.get("isCloud")&&r.get("isHttps")&&"always"===o)return kl(n,e);if(!t.get("httpsRequired")&&r.get("isHttps")&&o===$i&&r.get("isPrivate")&&t.get("publicAddressMatches"))return function(e,t){const{server:r}=t,n=r.get("debugName");return f.Z.warn("[Connections] Aborting connection test for %s at %s because insecure connections are preferred",n,e),Nl(0,t)}(n,e);if(!ne.Z.allowMixedContent&&ie.Z.isHostedHttps&&!r.get("isHttps"))return function(e,t){const{server:r}=t,n=r.get("debugName");return f.Z.warn("[Connections] Aborting connection test for %s at %s due to mixed content prevention",n,e),Nl(0,t)}(n,e);const c=a&&a.get("rejectDirectConnections");return t.get("isCloud")||r.get("relay")||!c&&!ne.Z.rejectDirectConnections?function(e,t){const{server:r,connection:n}=t,i=l().Deferred(),s=r.get("debugName"),a=(0,Pl.Z)(r),o=Date.now();(0,f.Z)("[Connections] Testing connection for %s at %s",s,e);const c=[],d={dataType:"text",headers:{Accept:a.accept},timeout:r.connectionTestTimeout};c.push(r.getXHROptions(e,d));const u=!(0,El.Z)(r);if(null==t.url&&u){const e=r.resolveUrl("/",{connection:n});(0,f.Z)("[Connections] Testing legacy connection for %s at %s",s,e),c.push(r.getXHROptions(e,d))}if(ne.Z.emulateBrokenHTTPS){const e=n.get("isHttps")&&!r.get("isCloud"),t="private"!==ne.Z.emulateBrokenHTTPS||n.get("isPrivate");e&&t&&function(e){e.forEach((e=>{e.url="fail"+e.url}))}(c)}const p=c.map((e=>l().ajax(e))),m=(0,Pe.Z)(p);function h(e){var t,r;n.get("relay")&&(0,g.DB)("metrics").trackEvent({event:Kr.EE,interaction:!1,properties:(t=Al({},e),r={reason:1===n.server.get("connections").length?101:102,serverType:n.server.get("isShared")?"shared":"owned",latency:Date.now()-o},Cl(t,Ml(r)))})}function y(t){(0,f.Z)("[Connections] %s connected at %s",s,e),n.set({currentTest:null,testState:Sl.nm}),h({status:"success"}),i.resolve(n,t)}function v(t,r){const a={currentTest:null};if(t.some((e=>e.aborting)))(0,f.Z)("[Connections] Aborted pending connection test for %s at %s",s,e),a.testState=Sl.c9;else{const n=function(e){return 401===e||403===e||406===e}(r)?Sl.WY:Sl.nZ;h({status:"failure",error:r}),t.forEach((t=>{f.Z.warn("[Connections] %s is %s at %s (Status %s)",s,n,e,t.status)})),a.testState=n}n.set(a),i.reject(n,t)}return n.set({currentTest:p,testState:Sl.hA}),m.done((()=>{const[t,n]=p;let i;if(200!==t.status&&404!==t.status?i=t.status:n&&200!==n.status&&(i=n.status),void 0!==i)return void v(p,i);if(r.get("isCloud"))return void y();const o=a.parse(t.responseText),c=n?a.parse(n.responseText):void 0,d=r.parseResponse(l().extend(!0,{},o,c)),u=d.machineIdentifier,m=r.get("machineIdentifier");if(!u||m&&u!==m)f.Z.warn("[Connections] %s has an unexpected machine identifier at %s",s,e),v(p);else{!0===d.mediaProviders?d.mediaProviders=1:!1===d.mediaProviders?d.mediaProviders=0:n||(d.mediaProviders=1);const e=r.parse(d);e.isInstallingServerUpdate=!1,e.isProvidersPending=!1,e.isProvidersPopulated=!0,(0,Il.Z)(e.providers,r),y(e)}})),i.promise()}(n,e):function(e,t){const{server:r}=t,n=r.get("debugName");return f.Z.warn("[Connections] Aborting connection test for %s at %s due to reject direct connection debug setting",n,e),Nl(0,t)}(n,e)}var Ll=r(43837),jl=r(19274);const Vl=function(){const e=(0,g.DB)("appModel").get("ui"),t=e.get("audioVideoPlayer"),r=e.get("photoPlayer"),n=(0,Ll.Z)(t),i=(0,Ll.Z)(r);return n===jl.Z$||i===jl.Z$};var Ul=r(31288);const Fl=(0,Oa.P1)(Ul.Z,(e=>e.volume));var Bl=r(82877),_l=r(60148);function zl(e){const t=()=>e.get("deviceSettings"),r=()=>e.get("user").get("experienceSettings"),n={autoPlay:r,autoLogin:t,language:r,shouldSyncSettings:t,subtitleColor:r,subtitlePosition:r,subtitleSize:r,volume:t};return{find:e=>n[e]().get(e)}}function Hl(e){return!!(function(e){return!(!e||e.get("isCloud")||"iOS"===e.get("platform"))}(e)&&(t=e.get("activeConnection"),t&&t.get("isPrivate")&&t.get("isConnected")));var t}function Wl(e){return!(!Hl(e)||e.get("isShared"))}const Gl=se.Z.extend({mixins:[oe.Z],name:"CompanionServerManager",initialize(e){this.appModel=e.appModel,this.servers=this.appModel.get("servers"),this._throttlePickCompanionServer=v().throttle(this._pickCompanionServer,2e3)},start(e){this.stop(),this.listenTo(this.servers,"change:connected change:activeConnection update",this._throttlePickCompanionServer),this.started=!0,this._pickCompanionServer()},stop(){this.stopListening(),this.started=!1},_pickCompanionServer(){this.started&&(this.companionServer&&Hl(this.companionServer)&&this.servers.contains(this.companionServer)||(this.companionServer=this.servers.find(Wl)||this.servers.find(Hl),this.companionServer?((0,g.DB)("appStore").dispatch((0,Qe.a7)({serverEntityID:this.companionServer.entityID()})),f.Z.info("[Companion] Found companion",this.companionServer.get("debugName"))):((0,g.DB)("appStore").dispatch((0,Qe.yy)()),f.Z.warn("[Companion] No companion found"))))}}),Ql=se.Z.extend({mixins:[oe.Z],browserConnectionChangeDelay:2e3,initialize(e){v().bindAll(this,"onBrowserConnectionChange"),this.appModel=e.appModel,this.servers=this.appModel.get("servers"),this.settings=this.appModel.get("settings")},start(){this.stop();const e=l()(window);e.on("online",this.onBrowserConnectionChange),e.on("offline",this.onBrowserConnectionChange),this.listenTo(ae.Z,{"test:servers":this.onTestAllServers,"test:server":this.onTestServer}),this.listenTo(this.servers,{add:this.onServerAdd,remove:this.onServerRemove,reset:this.onServersReset,"error:connection":this.onServerConnectionError,"change:connections.add":this.onServerConnectionAdd,"change:connections.remove":this.onServerConnectionRemove,"change:connections.reset":this.onServerConnectionsReset,"change:connections.change:isConnected":this.onServerConnectionConnectedChange,"change:connections.change:sources.change":this.onServerConnectionSourcesChange,"change:accessToken":this.onServerAccessTokenChange,"change:isConnected":this.onServerConnectedChange,"change:isUnavailable":this.onServerUnavailableChange,"change:publicAddressMatches":this.onServerPublicAddressMatchesChange}),this.listenTo(this.settings,"sync",this.onSettingsSave),this.servers.invoke("testOnlyUntestedConnections")},stop(){this.stopListening();const e=l()(window);e.off("online",this.onBrowserConnectionChange),e.off("offline",this.onBrowserConnectionChange)},retryServerConnections:function(e){e.testAllConnections()},startFailedServerRetries(e){},stopFailedServerRetries(e){},_removeConnection(e){const{server:t}=e,r=qr.Z.getActiveServers();if((0,f.Z)("[Connections] Removed connection %s from %s",e.id,t.get("debugName")),t.abortConnectionTest(e),r){const n=r.get(t.id),i=n&&n.get("connections");i&&i.get(e.id)&&(i.remove(e.id),i.length||r.remove(t.id),qr.Z.debouncedSave())}},onBrowserConnectionChange(e){(0,f.Z)("[Connections] Browser online status changed to",window.navigator.onLine),window.clearTimeout(this.browserConnectionChangeTimeout),this.browserConnectionChangeTimeout=window.setTimeout((()=>{this.servers.invoke("testAllConnections")}),this.browserConnectionChangeDelay)},onTestAllServers(){this.servers.invoke("testAllConnections")},onTestServer(e){e.testAllConnections()},onServerAdd(e){e.testOnlyUntestedConnections()},onServerRemove(e){const t=qr.Z.getActiveServers();let r;if(e.abortAllConnectionTests(),this.stopFailedServerRetries(e),t)if(e.get("isMerged")){const n=e.previous("machineIdentifier");n&&(r=t.get(n),r&&(r.set("machineIdentifier",e.id),qr.Z.debouncedSave()))}else r=t.get(e.id),r&&(t.remove(e.id),qr.Z.debouncedSave())},onServersReset(e,t){const r=t.previousModels;v().each(r,(t=>{e.contains(t)||(t.abortAllConnectionTests(),this.stopFailedServerRetries(t))}))},onServerConnectionError(e){f.Z.warn("[Connections] Possible connection error for %s, retrying connection tests",e.get("debugName")),e.get("isCloud")?this.appModel.get("user").signInUnsupervised():e.testAllConnections()},onServerConnectionAdd(e){const{server:t}=e;(0,f.Z)("[Connections] Added connection %s for %s",e.id,t.get("debugName")),e.get("relay")?t.get("connections").hasFailedEveryDirectConnection()&&t.testAllConnections():t.testConnection(e)},onServerConnectionRemove(e){this._removeConnection(e)},onServerConnectionsReset(e,t){const r=t.previousModels;v().each(r,(t=>{e.contains(t)||this._removeConnection(t)}))},onServerConnectionConnectedChange(e,t){const{server:r}=e,n=e.get("isBundled"),i=e.get("isFallback"),s=e.get("relay"),a=t&&!n&&!i&&!s,o=qr.Z.getActiveServers();if(r.id&&!r.get("isCloud")&&a&&o){let t=o.get(r.id);if(t)t.copyFromModel(r);else{const e=v().omit(r.toJSON(),"connections");t=o.add(e,{merge:!0,parse:!0})}t.get("connections").add(e.toJSON(),{merge:!0,parse:!0}),qr.Z.debouncedSave()}},onServerConnectionSourcesChange(e,t){const{server:r}=e,n=qr.Z.getActiveServers(),i=n&&n.get(r.id);if(i){const r=i.get("connections").get(e.id);r&&(r.get("sources").set(t.toJSON()),qr.Z.debouncedSave())}},onServerAccessTokenChange(e,t){if(!e.get("isCloud")){(0,f.Z)("[Connections] Access token for %s changed to %s",e.get("debugName"),t);const r=qr.Z.getActiveServers(),n=r&&r.get(e.id);n&&(n.set("accessToken",t),qr.Z.debouncedSave()),e.get("isUnauthorized")&&e.set("connectionTestResult",qt.ZP.connectionTestResults.PENDING),e.testAllConnections()}},onServerConnectedChange(e,t){t&&this.stopFailedServerRetries(e)},onServerUnavailableChange(e,t){t&&this.startFailedServerRetries(e)},onServerPublicAddressMatchesChange(e,t){void 0!==t&&e.testAllConnections()},onSettingsSave(e){e.changed.hasOwnProperty("preferInsecureConnections")&&this.servers.invoke("testAllConnections")}}),$l=Ql.extend({initialize(e){Ql.prototype.initialize.apply(this,arguments),this._serverRetryManager=new Ae.Z({callback:this.retryServerConnections.bind(this),logFormat:"[Connections] Retrying connection tests for %s in %s seconds"})},stop(){Ql.prototype.stop.apply(this,arguments),this._serverRetryManager.stopAll()},startFailedServerRetries(e){this._serverRetryManager.start(e)},stopFailedServerRetries(e){this._serverRetryManager.stop(e)}});Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const Kl=["page","type","style","mode"];var ql=r(33606),Yl=r(48721),Xl=r(66336);const Jl=/0/g,ec=()=>(0|16*Math.random()).toString(16),tc=function(){return"00000000-0000-4000-8000-000000000000".replace(Jl,ec)};var rc=r(91085),nc=Object.defineProperty,ic=Object.defineProperties,sc=Object.getOwnPropertyDescriptors,ac=Object.getOwnPropertySymbols,oc=Object.prototype.hasOwnProperty,lc=Object.prototype.propertyIsEnumerable,cc=(e,t,r)=>t in e?nc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dc=(e,t)=>{for(var r in t||(t={}))oc.call(t,r)&&cc(e,r,t[r]);if(ac)for(var r of ac(t))lc.call(t,r)&&cc(e,r,t[r]);return e},uc=(e,t)=>ic(e,sc(t));const pc=se.Z.extend({mixins:oe.Z,initialize(e){this.privacySettings=null,this.defaults={},this._pendingPrivacyRequest=null,this._pendingEvents=[],this.debouncedFetchPrivacySettings=v().debounce(this.fetchPrivacySettings,250),this.isPlaybackActive=e.isPlaybackActive,this.enable()},enable(){this.enabled=!0},disable(){this.enabled=!1},set(e){this.defaults=dc(dc({},this.defaults),e)},setUser(e){this.set({userId:e.id}),this.defaults.context||(this.defaults.context={}),this.defaults.context.user=e.get("subscriptions").reduce(((e,t)=>(e[t.get("type")]=t.get("mode"),e)),{anonymous:e.get("anonymous")})},fetchPrivacySettings(){this.privacySettings=null,this._pendingPrivacyRequest&&(this._pendingPrivacyRequest.abort(),this._pendingPrivacyRequest=null);const e=(0,g.DB)("appModel").get("user");if(!e.server.get("isConnected"))return l().Deferred().reject().promise();const t=e.server.getXHROptions("/api/v2/user/privacy",{dataType:"json",headers:{accept:"application/json"}});return this._pendingPrivacyRequest=l().ajax(t),this._pendingPrivacyRequest.promise().done((t=>{this.setUser(e),this.setPrivacySettings(t),this.trackPendingEvents(),this.sendMMPEvent()})).always((()=>{this._pendingPrivacyRequest=null}))},setPrivacySettings(e){e&&e.metrics&&(this.privacySettings=uc(dc({},e),{metrics:e.metrics.reduce(((e,t)=>(e[t.event]=t.status,e)),{})}),(0,g.DB)("metricsReporter").setBaseUrl(e.baseUrl))},sendMMPEvent(){},incrementPlaybackCount(){const e="playbackCount",t=(0,g.DB)("sessionStats");t.save(e,t.get(e)+1)},addPlaybackTime(e){const t="playbackTime",r=(0,g.DB)("sessionStats");r.save(t,r.get(t)+e)},trackView(e,t){const r=ql.ZP.measureStartupDuration("pageReadyTime");if(void 0!==r){const t=Math.round(ql.ZP.getMeasureDurationTotal(Kr.o$));this.trackEvent({event:Kr.o$,interaction:!0,properties:{initializationTime:t,latency:t,mode:"uno",pageReadyTime:Math.round(r),pinnedPMSSources:e.pinnedPMSSources,pinnedProviderSources:e.pinnedProviderSources}})}const n=dc({event:Kr.fB,interaction:!0,properties:e},t),i=ql.ZP.measure(function(e,t){let r=e;for(let e=0;e<Kl.length;e++){const n=t[Kl[e]];null!=n&&(r=`${r}:${n}`)}return r}(Kr.fB,e),`${Kr.fB}:${e.page}-start`);i&&(n.properties=uc(dc({},n.properties),{latency:Math.round(i.duration)})),this.trackEvent(n)},trackClick(e,t){this.trackEvent(dc({event:Kr.Ip,interaction:!0,properties:e},t))},trackEvent(e){var t;if(!this.enabled)return;const r=null==(t=e.properties)?void 0:t.contextTuple;r&&(delete e.properties.contextTuple,Object.assign(e.properties,(0,rc.IF)(r)));const n=(0,g.DB)("sessionStats"),i=n.get("sessionId"),s=n.get("anonymousSessionId");if(!this.privacySettings)return void this._pendingEvents.push(uc(dc({},e),{sessionIdentifier:i,anonymousSessionIdentifier:s}));const a=l().extend(!0,{},this.defaults,e);a.sessionIdentifier||(a.sessionIdentifier=i),a.anonymousSessionIdentifier||(a.anonymousSessionIdentifier=s);const o=Date.now();if(e.event!==Kr.$R&&e.event!==Kr.o$){const t=n.get("lastInteractionTime"),r=n.get("lastPlayingHeartbeatTime");if(o-Math.max(t,r)>36e5)return void this.flushSession(!0).then((()=>{this.trackEvent(e)}))}const c=this.privacySettings.metrics[a.event];c&&("off"===c||(a.interaction&&(0,Xl.Z)(),"anonymous"===c&&(delete a.userId,a.deviceIdentifier=(0,g.DB)("appModel").get("anonymousClientID"),a.sessionIdentifier=a.anonymousSessionIdentifier),delete a.anonymousSessionIdentifier,(0,g.DB)("metricsReporter").trackEvent(a)))},trackPendingEvents(){const e=this._pendingEvents;let t=0;for(;t<e.length;)this.trackEvent(e[t]),t++;this._pendingEvents=[]},start(){const e=(0,g.DB)("appModel").get("user");return this.flushSession(!1).then((()=>(0,z.Z)(e.server.populate()))).then((()=>this.fetchPrivacySettings())).always((()=>{this.listenTo(e.server,"change:isConnected",this.onCloudServerChange),this.listenTo(e,"change:id",this.onUserIDChange)})),l().Deferred().resolve().promise()},flushSession(e){const t=(0,g.DB)("sessionStats").populate().then((()=>{this.stopSession(),this.startSession(e)}),(()=>{this.startSession(e)}));return(0,z.Z)(t)},startSession(e){const t=Date.now(),r=(0,g.DB)("sessionStats");if(!this.interval){const e=ne.Z.heartbeatInterval;this.interval=window.setInterval((()=>{const e=Date.now(),t={heartbeatTime:e};this.isPlaybackActive()&&(t.lastPlayingHeartbeatTime=e),r.set(t)}),e)}r.save({sessionId:tc(),anonymousSessionId:tc(),startTime:t,lastInteractionTime:t,heartbeatTime:t,lastPlayingHeartbeatTime:null,playbackCount:0,playbackTime:0}),e?this.trackEvent({event:Kr.o$,interaction:!0,properties:{coldStart:!0,mode:"uno"}}):ql.ZP.measure(Kr.o$,ql.yf)},stopSession(){const e=(0,g.DB)("sessionStats"),t=e.get("heartbeatTime"),r=e.get("playbackCount"),n=e.get("playbackTime"),i=e.get("startTime");this.trackEvent({event:Kr.$R,interaction:!1,properties:{sessionLength:Math.floor((t-i)/1e3),playbackCount:r,playbackTime:(0,Yl.Z)(n)}})},toJSON(){return dc({},this.defaults)},onCloudServerChange(e,t){t?this.fetchPrivacySettings():this.privacySettings=null},onUserIDChange(){this._appsflyerIntervalID&&window.clearInterval(this._appsflyerIntervalID),this._appsflyerTimeoutID&&window.clearTimeout(this._appsflyerTimeoutID),this.privacySettings=null,this.debouncedFetchPrivacySettings()}});var mc=r(80011),hc=r(87999);const gc=se.Z.extend({mixins:[oe.Z],initialize(e){this.appModel=e.appModel,this.servers=this.appModel.get("servers")},start(e){this.stop(),this.listenTo(this.appModel,{"change:primaryServer":this.onPrimaryServerChange,"change:primaryServer.change:isPrimaryEligible":this.onPrimaryServerEligibleChange,"change:primaryServer.change:isOutOfDate":this.onPrimaryServerOutOfDateChange,"change:isWaitingForServers":this.onWaitingForServersChange,"change:primaryServer.change:isRelayed":this.onPrimaryServerIsRelayedChange}),this.listenTo(this.servers,{"update reset":this.onServersUpdate}),this._setPrimaryServer(hc.STARTUP)},stop(){this.stopListening(),this._primaryServerPromise=null},_setPrimaryServer(e){if(this._primaryServerPromise)return this._primaryServerPromise;const t=(0,g.DB)("appStore");t.dispatch((0,Qe.I2)());const r=this._waitForPrimaryServer();return this._primaryServerPromise=r,r.done((n=>{if(r===this._primaryServerPromise){if(this._primaryServerPromise=null,this.appModel.get("primaryServer"))return;const r=!n.get("version")&&!n.get("isRejected");n.get("isOutOfDate")||r?((0,f.Z)("[Primary Server] The server, %s, is waiting for a version",n.get("debugName")),this._setPrimaryServer(e)):t.dispatch((0,Qe.h9)({machineIdentifier:n.id,metricsProperties:{context:e}}))}})).fail((()=>{r===this._primaryServerPromise&&(this._primaryServerPromise=null,this.appModel.set("isWaitingForPrimaryServer",!1))})),r},_waitForPrimaryServer(){const e=this.appModel.get("user").get("lastPrimaryServerID");let t;return e?((0,f.Z)("[Primary Server] Waiting for the last primary server, %s, to connect",e),t=this.servers.populateServer({machineIdentifier:e,isPrimaryEligible:!0,isOutOfDate:!1})):t=l().Deferred().reject().promise(),t=t.then(null,(()=>((0,f.Z)("[Primary Server] Waiting for any owned server to connect"),this.servers.populateServer({isFullOwnedServer:!0,isPrimaryEligible:!0,isOutOfDate:!1})))),t=t.then(null,(()=>((0,f.Z)("[Primary Server] Waiting for any eligible server to connect"),this.servers.populateServer({isPrimaryEligible:!0,isOutOfDate:!1})))),t=t.then(null,(()=>((0,f.Z)("[Primary Server] Waiting for any eligible server"),this.servers.findServer({isPrimaryEligible:!0,isOutOfDate:!1})))),t},onPrimaryServerChange(e,t){qr.Z.flushDebouncedSave();const r=e.previous("primaryServer");r&&this.stopListening(r),t?(f.Z.info("[Primary Server] %s is now the primary server",t.get("debugName")),e.get("user").set("lastPrimaryServerID",t.id),t.get("isRelayed")&&(0,g.DB)("appStore").dispatch((0,mc.J3)({machineIdentifier:t.id,serverName:t.get("friendlyName")}))):e.get("isWaitingForPrimaryServer")?(0,f.Z)("[Primary Server] Waiting to set the primary server"):f.Z.warn("[Primary Server] No primary server found")},onPrimaryServerEligibleChange(e,t){const r=this.appModel.get("user");t||((0,f.Z)("[Primary Server] The previous primary server, %s, is unauthorized",e.get("debugName")),r.unset("lastPrimaryServerID"),this._setPrimaryServer(hc.FALLBACK))},onPrimaryServerOutOfDateChange(e,t){const r=this.appModel.get("user");t&&((0,f.Z)("[Primary Server] The previous primary server, %s, is out of date",e.get("debugName")),r.unset("lastPrimaryServerID"),this._setPrimaryServer(hc.FALLBACK))},onWaitingForServersChange(e,t){if(t){const t=e.get("primaryServer"),r=!t||!this.servers.get(t.id),n=e.get("isWaitingForPrimaryServer");r&&!n&&this._setPrimaryServer(hc.FALLBACK)}},onPrimaryServerIsRelayedChange(e,t){t&&(0,g.DB)("appStore").dispatch((0,mc.J3)({machineIdentifier:e.id,serverName:e.get("friendlyName")}))},onServersUpdate(){const e=this.appModel.get("user"),t=this.appModel.get("primaryServer");t?t&&!this.servers.get(t.id)&&((0,f.Z)("[Primary Server] The previous primary server, %s, was removed",t.get("debugName")),e.unset("lastPrimaryServerID"),this._setPrimaryServer(hc.FALLBACK)):this._setPrimaryServer(hc.STARTUP)}}),yc=se.Z.extend({mixins:[oe.Z],initialize(e){this.appModel=e.appModel},start(){const e=this.appModel.get("user");this.populateCloudProviders(e.get("providers")),this.listenTo(this.appModel,{"change:user.change:providers.add":this.onProviderAdd})},stop(){this.stopListening()},populateCloudProviders(e){e.each((e=>{this.populateCloudProvider(e)}))},populateCloudProvider(e){e.get("isPopulated")||(0,g.DB)("appStore").dispatch((0,$s.RG)({providerEntityID:e.entityID(),options:{merge:!0}}))},onProviderAdd(e){this.populateCloudProvider(e)}});function vc(e,t,r){return function(n){return n.server===e&&n.connection.id===t.id&&n.url===r}}const fc=se.Z.extend({initialize(e){this.appModel=e.appModel,this.queued=[],this.executing=[],this.maximumConcurrent=ne.Z.maximumConcurrentConnectionTests,this.throttledStartProcessing=v().throttle(this._startProcessing.bind(this),50,{leading:!1})},queueConnectionTest({server:e,connection:t,url:r}){const n=this._queuedOrExecuting(e,t,r);if(n)return n.deferred.promise();const i=l().Deferred();return this.queued.push({server:e,connection:t,url:r,deferred:i}),this._sortQueue(),this.throttledStartProcessing(),i.promise()},abortConnectionTest({server:e,connection:t,url:r}){return this._abortCurrentTest(e,t,r),this._removeQueuedOrExecuting(e,t,r),l().Deferred().resolve().promise()},reset(){for(this.queued.length=0;this.executing.length>0;)this.abortConnectionTest(this.executing[0])},_sortQueue(){const e=this.appModel.get("user").get("lastPrimaryServerID");this.queued.sort(((t,r)=>{const n=t.server,i=r.server,s=t.connection,a=r.connection,o=this._isManualConnection(s),l=this._isManualConnection(a),c=this._isMatchingLocation(n,s),d=this._isMatchingLocation(i,a);return n.id===e&&i.id!==e?-1:i.id===e&&n.id!==e?1:n.get("isCloud")&&!i.get("isCloud")?-1:i.get("isCloud")&&!n.get("isCloud")?1:!s.get("relay")&&a.get("relay")?-1:!a.get("relay")&&s.get("relay")?1:!s.get("isConnected")&&a.get("isConnected")?-1:!a.get("isConnected")&&s.get("isConnected")?1:!n.get("isShared")&&i.get("isShared")?-1:!i.get("isShared")&&n.get("isShared")?1:n.get("isFullServer")&&!i.get("isFullServer")?-1:i.get("isFullServer")&&!n.get("isFullServer")?1:o&&!l?-1:l&&!o?1:s.get("isBundled")&&!a.get("isBundled")?-1:a.get("isBundled")&&!s.get("isBundled")?1:c&&!d?-1:d&&!c?1:0}))},_startProcessing(){v().times(this.maximumConcurrent-this.executing.length,this._process.bind(this))},_process(){if(this.executing.length>=this.maximumConcurrent)return;if(!this.queued.length)return;const e=this.queued.shift(),{server:t,connection:r,url:n}=e;this._abortCurrentTest(t,r,n);const i=(0,g.DB)("testServerConnection")({server:t,connection:r,url:n});this.executing.push(e),i.done(((t,r)=>{e.deferred.resolve(t,r)})),i.fail(((t,r)=>{e.deferred.reject(t,r)})),i.always((()=>{const t=this.executing.indexOf(e);this.executing.splice(t,1),this._process()}))},_abortCurrentTest(e,t,r){t.get("currentTest")&&t.get("currentTest").forEach((n=>{const i=e.resolveUrl(r||n.url,{connection:t});n&&"pending"===n.state()&&((0,f.Z)("[Connections] Aborting pending connection test for %s at %s",e.get("debugName"),i),C.Z.abort(n.rid),n.abort())}))},_isManualConnection:e=>e.get("sources").some((e=>0===e.id.indexOf("manualServer"))),_isMatchingLocation(e,t){const r=e.get("publicAddressMatches"),n=t.get("isPrivate");return r&&n||!r&&!n},_queuedOrExecuting(e,t,r){const n=vc(e,t,r);return v().find(this.executing,n)||v().find(this.queued,n)},_removeQueuedOrExecuting(e,t,r){const n=vc(e,t,r),i=v().findIndex(this.executing,n),s=v().findIndex(this.queued,n);i>=0&&this.executing.splice(i,1),s>=0&&this.queued.splice(s,1)}});var bc=r(22493),Zc=r(74813),Sc=r(9939),Pc=r(10379),Ic=r(17614),Ec=Object.defineProperty,wc=Object.getOwnPropertySymbols,Cc=Object.prototype.hasOwnProperty,Mc=Object.prototype.propertyIsEnumerable,Dc=(e,t,r)=>t in e?Ec(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Oc(e){const t=((e,t)=>{for(var r in t||(t={}))Cc.call(t,r)&&Dc(e,r,t[r]);if(wc)for(var r of wc(t))Mc.call(t,r)&&Dc(e,r,t[r]);return e})({entityID:e.entityID()},e.toJSON());return(0,Ic.Z)(t)}const Tc=Object.keys(Sc.Z.prototype.syncedAttrs),xc=se.Z.extend({mixins:[oe.Z],initialize(e){this.appModel=e.appModel,this.servers=this.appModel.get("servers")},start(){this.stop(),this.listenTo(this.servers,{"change:promiseState":this.onServerPromiseStateChange,remove:this.onServerRemove,"update reset":this.onServersUpdateReset,"change:resources.add":this.onResourceAdd,"change:resources.remove":this.onResourceRemove,"change:resources.update":this.onResourcesUpdate,"change:resources.reset":this.onResourcesReset,"change:resources.change:presence":this.onResourcesPresenceChange,"change:resources.change:connections.update":this.onResourceConnectionsUpdate,"change:isConnected":this.onConnectedChange,"change:desktop.change:isSettingsPopulated":this.onSettingsPopulatedChange}),Tc.forEach((e=>{this.listenTo(this.servers,"change:"+e,this.onStoredServerAttributeChange.bind(this,e))})),this.listenTo(ae.Z,"discover:servers",this.onDiscoverServers),this._setAuthorized(),this._checkFoundAllServers()},stop(){this.stopListening()},_checkFoundAllServers(){this.servers.shouldWaitForInitialServers()||this.servers.shouldWaitForResources()||this.servers.shouldWaitForPendingServers()?this._waitForServers():this._foundAllServers()},_waitForServers(){this.servers.waitForServers(),(0,Zs.c9)((()=>{this.appModel.set("isWaitingForServers",!0)}))},_foundAllServers(){this.servers.foundAllServers(),(0,Zs.c9)((()=>{this.appModel.set("isWaitingForServers",!1)}))},_fetchResources(e){if(e.get("isRejected"))return f.Z.warn("[Servers] Failed to request resources through %s",e.get("debugName")),e.set({isResourcesPending:!1,hasFailedResources:!0,isDownForMaintenance:!1}),l().Deferred().reject().promise();if(!e.get("isResolved"))return(0,f.Z)("[Servers] Finding resources through unresolved cloud server %o, resolving",e.get("debugName")),e.populate().then((()=>this._fetchResources(e)));(0,f.Z)("[Servers] Finding resources through %s",e.get("debugName")),this._waitForServers(),e.set("isResourcesPending",!0);const t=e.get("resources");return t.fetch().done((()=>{(0,f.Z)("[Servers] Found %s resources through %s",t.length,e.get("debugName")),e.set({isResourcesPending:!1,isResourcesPopulated:!0,hasFailedResources:!1,isDownForMaintenance:!1})})).fail(((t,r)=>{f.Z.warn("[Servers] Failed to request resources through %s",e.get("debugName")),e.set({isResourcesPending:!1,hasFailedResources:!0,isDownForMaintenance:503===r.status})})).always((()=>{this._checkFoundAllServers()}))},_convertResourceToServer:e=>((0,f.Z)("[Servers] %s was found through %s",e.get("name"),e.server.get("debugName")),(0,bc.Z)(e)),_removeResource(e){(0,f.Z)("[Servers] %s was removed as a resource from %s",e.get("name"),e.server.id);const t=this.servers.get(e.id);t&&t.removeSource(e.server.id)},_pruneStaleSources(e){const t=e.get("resources");let r=this.servers.length-1;for(;r>=0;){const n=this.servers.at(r),i=t.get(n.id);if(i){const t=n.get("connections");let r=t.length-1;for(;r>=0;){const n=t.at(r);n.get("sources").get(e.id)&&(i.get("connections").get(n.id)||n.get("sources").remove(e.id)),r--}}else n.removeSource(e.id);r--}},_setAuthorized(){const e=!!this.servers.findWhere({isConnected:!0,isCloud:!1}),t=!!this.servers.findWhere({isResolved:!0,isCloud:!0});this.appModel.set("authorized",e||t)},onServerPromiseStateChange(e,t){e.get("resources")&&this._fetchResources(e),this._setAuthorized(),this._checkFoundAllServers()},onStoredServerAttributeChange(e,t,r){const n=qr.Z.getActiveServers(),i=n&&n.get(t.id);i&&null!=r&&i.get(e)!==r&&(i.set(e,r),qr.Z.debouncedSave())},onServerRemove(e){f.Z.warn("[Servers] %s was removed",e.get("debugName")),e.cache.remove(e),ae.Z.trigger("clearWhere:cache",{server:e})},onServersUpdateReset(){this._setAuthorized(),this._checkFoundAllServers()},onDiscoverServers(){const e=this.appModel.get("cloudServer");this._fetchResources(e)},onResourceAdd(e){if(v().contains(e.get("provides"),"server")){const t=this._convertResourceToServer(e);t.get("isMobileServer")||this.servers.add(t)}},onResourceRemove(e){this._removeResource(e)},onResourcesUpdate(e){this._pruneStaleSources(e.server),this._checkFoundAllServers()},onResourcesReset(e,t){const r=t.previousModels;v().each(r,(t=>{e.contains(t)||this._removeResource(t)})),this._checkFoundAllServers()},onResourcesPresenceChange(e){const t=this.servers.get(e.id);t&&t.set("presence",e.get("presence"))},onResourceConnectionsUpdate(e){const t=e.parent,r=this.servers.get(t.id);r&&((0,Zc.Z)(r,t),this._pruneStaleSources(e.server),this._checkFoundAllServers())},onConnectedChange(e,t){if(!t)return;const r=(0,g.DB)("appStore"),n=Oc(e);r.dispatch(hr.Z.actions.connected({server:n})),e.get("isFullOwnedServer")&&(r.dispatch(mr.Z.actions.fetchRequested({server:n})),r.dispatch((0,Pc.R_)({serverEntityID:e.entityID()})))},onSettingsPopulatedChange(e,t){if(t){const t=e.get("settings"),r=t.get("AcceptedEULA");r&&!1===r.get("value")&&!window.location.hash.includes("/setup")&&(0,Wt.Z)("serverSetup",{machineIdentifier:t.server.id})}}});var Ac=r(83329);const kc=se.Z.extend({mixins:[oe.Z],initialize(e){this.appModel=e.appModel},start(){this.stop(),this.listenTo(this.appModel.get("servers"),{"change:isConnected":this.onServerIsConnectedChange,"change:isInstallingServerUpdate":this.onIsInstallingServerUpdateChange})},stop(){this.stopListening()},onServerIsConnectedChange(e,t){t&&g.DB("appStore").dispatch((0,Ac.Tz)({serverEntityID:e.entityID()}))},onIsInstallingServerUpdateChange(e,t){t||g.DB("appStore").dispatch((0,Ac.Tz)({serverEntityID:e.entityID()}))}});var Nc=r(84503),Rc=r(40127),Lc=r(5318),jc=r(19814),Vc=r(19211),Uc=r(3637),Fc=r(68939),Bc=r(39582),_c=r(88604),zc=r(78741),Hc=r(61495),Wc=r(35846);const Gc=se.Z.extend({mixins:[oe.Z],initialize(e){this.appModel=e.appModel,this.debouncedSaveTimeout=null,this.shouldExcludeDiscoverSources=!1},start(){this.listenTo(this.appModel,{"change:user.change:providers.add":this.onCloudProviderAdd,"change:user.change:providers.change:isPending":this.onCloudProviderIsPendingChange,"change:user.change:isProvidersPending":this.onCloudProvidersIsPendingChange,"change:user.change:optOuts.change":this.onUserOptOutsChange}),this.listenTo(this.appModel.get("servers"),{"change:isConnected":this.onServerIsConnectedChange,"change:isProvidersPending":this.onServerIsProvidersPendingChange,add:this.onServerAdd,"change:friendlyName":this.onServerAttrChanged,"change:sourceTitle":this.onServerAttrChanged}),this.listenTo(this.appModel.get("cloudServer"),{"change:isResourcesPending":this.onCloudReadyChange,"change:hasFailedResources":this.onCloudReadyChange})},_getPinnedSources(){return this.appModel.get("user").get("experienceSettings").get("sidebarSettings").get("pinnedSources")},_shouldRemoveHiddenSource(e){const t=e.get("hiddenAt");return t>0&&Date.now()-t>604800},_hidePinnedSources(e){e.forEach((e=>{e.get("isHidden")?this._shouldRemoveHiddenSource(e)&&(e.trigger("destroy",e,e.collection),this._debouncedSaveExperienceSettings()):(e.set({isHidden:!0,hiddenAt:Date.now()}),this._debouncedSaveExperienceSettings())}))},_hideSourcesWithNoServer(){const e=this.appModel.get("servers"),t=this._getPinnedSources().filter((t=>!e.get(t.get("machineIdentifier"))));this._hidePinnedSources(t)},_toggleShouldExcludeDiscoverSources(){const e=this.appModel.get("user"),t=e.get("optOuts"),r=!e.get("isFullUser"),n=t.findWhere({key:Rc.INCLUDE_DISCOVER_SOURCE});this.shouldExcludeDiscoverSources=n&&(r?n.get("value")!==jc.vx:n.get("value")===jc.Np),this.onShouldExcludeDiscoverSourcesChange()},_hideSourcesWithNoProvider(e,t,r,n){if(e.get("isConnected")&&r&&!n){const r=e.get("machineIdentifier"),n=this._getPinnedSources().filter((e=>{const n=e.get("machineIdentifier"),i=e.get("providerIdentifier");return n===r&&!t.get(i)}));this._hidePinnedSources(n)}},_hideCloudSourcesWithNoProvider(e){const t=this.appModel.get("cloudServer");this._hideSourcesWithNoProvider(t,e.get("providers"),e.get("isProvidersPopulated"),e.get("providersError"))},_hideServerSourcesWithNoProvider(e){this._hideSourcesWithNoProvider(e,e.get("providers"),e.get("isProvidersPopulated"),e.get("providersError"))},_updateStoredPinnedSources(e,t){const r=[];this._getPinnedSources().forEach((n=>{const i=(0,Uc.Z)(n.toJSON());if(i.machineIdentifier!==e.machineIdentifier||i.providerIdentifier!==t.identifier)return;const s=(0,Hc.Z)(t,i.directoryID),a=si.wB(i.providerIdentifier,si.Xp);if(!s||this.shouldExcludeDiscoverSources&&a)return void(e.isConnected&&t.isPopulated&&r.push(n));const o=(0,Bc.Z)(t,s),l=(0,Uc.Z)((0,Vc.Z)({sourceType:o?o.key:null,sourceServer:e,sourceProvider:t,sourceDirectory:s}));n.get("isHidden")&&(l.isHidden=!1,l.hiddenAt=null),(0,Wc.Z)(i,l)||(n.set(l),this._debouncedSaveExperienceSettings())})),this._hidePinnedSources(r)},_autoPinSources(e,t){const r=this.appModel.get("user").get("experienceSettings"),n=r.get("dismissedWhatsNewFeatures"),i=r.get("autoPinnedProviders"),s=r.get("sidebarSettings"),a=s.get("pinnedSources"),o=(0,Li.Z)(e.machineIdentifier,t.identifier);if(!si.wB(t.identifier,[si.uk,si.vP,si.Xp])||i.includes(o))return;if(r.set({autoPinnedProviders:[...i,o]}),this._debouncedSaveExperienceSettings(),si.wB(t.identifier,si.Xp)&&n["fd9f56d8-8858-490d-aede-05c29b06d584"])return;const l=(0,zc.Z)(t);if(!s.get("hasCompletedSetup")||!l||!l.directories)return;const{autoPinnedSources:c,discoverSources:d}=l.directories.reduce(((r,n)=>{const i=(0,Bc.Z)(t,n),s=(0,Fc.Z)(i?i.key:null,e.machineIdentifier,t.identifier,n.id);if(i&&!a.get(s)){const s=(0,Vc.Z)({sourceType:i?i.key:null,sourceServer:e,sourceProvider:t,sourceDirectory:n});si.wB(t.identifier,si.Xp)?r.discoverSources.push((0,Uc.Z)(s)):r.autoPinnedSources.push((0,Uc.Z)(s))}return r}),{autoPinnedSources:[],discoverSources:[]});(null==d?void 0:d.length)&&(0,g.DB)("appStore").dispatch((0,Ys.Gs)({sources:d})),(null==c?void 0:c.length)&&(0,g.DB)("appStore").dispatch((0,Ys.W1)({sources:c,interaction:!1}))},_processSources(e,t){t.isPopulated&&(this._updateStoredPinnedSources(e,t),this._autoPinSources(e,t))},_debouncedSaveExperienceSettings(){const e=this.appModel.get("user").get("experienceSettings");e.set({isDirty:!0}),this.debouncedSaveTimeout&&window.clearTimeout(this.debouncedSaveTimeout),this.debouncedSaveTimeout=window.setTimeout((()=>{e.get("isDirty")&&(0,g.DB)("appStore").dispatch((0,Nc.LN)())}),1e3)},_processCloudProviderChange(e){const t=this.appModel.get("cloudServer").toJSON(),r=e.toJSON();this._processSources(t,r)},_processServerChange(e){if(!e.get("isConnected")||!e.get("isProvidersPopulated"))return;const t=e.toJSON();t.providers.forEach((e=>this._processSources(t,e)))},_migrateToHybrid(e){const t=this._getPinnedSources(),r=t.filter((e=>si.wB(e.get("providerIdentifier"),si.Ll)||si.wB(e.get("providerIdentifier"),si.vP)&&!si.yv(e.get("providerIdentifier")))),n=t.some((e=>si.wB(e.get("providerIdentifier"),si.vP)&&si.yv(e.get("providerIdentifier"))));if(r.length){const i=t.indexOf(r.at(0));if(t.remove(r),!n){const r=(0,Hc.Z)(e,Lc.u),n=(0,Uc.Z)((0,Vc.Z)({sourceType:_c.Hs,sourceServer:this.appModel.get("cloudServer").toJSON(),sourceProvider:e,sourceDirectory:r}));t.add(n,{at:i})}this._debouncedSaveExperienceSettings()}},onCloudProviderAdd(e){this._processCloudProviderChange(e)},onCloudProviderIsPendingChange(e,t){t||(this._processCloudProviderChange(e),si.wB(e.get("identifier"),si.vP)&&si.yv(e.get("identifier"))&&this._migrateToHybrid(e.toJSON()))},onCloudProvidersIsPendingChange(e,t){t||this._hideCloudSourcesWithNoProvider(e)},onUserOptOutsChange(){this._toggleShouldExcludeDiscoverSources()},onServerAttrChanged(e){this._processServerChange(e)},onServerIsConnectedChange(e,t){t||this._processServerChange(e)},onServerIsProvidersPendingChange(e,t){t||(this._hideServerSourcesWithNoProvider(e),this._processServerChange(e))},onServerAdd(e){this._processServerChange(e)},onCloudReadyChange(e){e.get("isResourcesPending")||e.get("hasFailedResources")||this._hideSourcesWithNoServer()},onShouldExcludeDiscoverSourcesChange(){if(this.shouldExcludeDiscoverSources){const e=this._getPinnedSources().filter((e=>si.wB(e.get("providerIdentifier"),si.Xp)));this._hidePinnedSources(e)}else this.appModel.get("user").get("providers").forEach((e=>this._processCloudProviderChange(e)))}});function Qc(e,t){const r=e.get("user"),n=()=>{i&&(i=window.clearTimeout(i)),t(r,r.get("isSignedIn"))};let i=window.setTimeout(n,0);return r.on("change:isSignedIn",n),()=>{i&&(i=window.clearTimeout(i)),r.off("change:isSignedIn",n)}}var $c=r(96039),Kc=r(78151);const qc=window.console.error.bind(window.console,"[Events]");class Yc{constructor(){this.listeners=new Map}destroy(){this.removeAllListeners()}addListener(e,t){const r=this.listeners.get(e)||new Set;this.listeners.has(e)||this.listeners.set(e,r),r.add(t)}emit(e,...t){var r;null==(r=this.listeners.get(e))||r.forEach((e=>{try{e(...t)}catch(e){qc(e)}}))}removeListener(e,t){var r;null==(r=this.listeners.get(e))||r.delete(t)}removeAllListeners(){this.listeners.forEach((e=>e.clear()))}}class Xc{static fromJSON(e){const{playing:t,index:r,count:n,breakPosition:i}=e;return new Xc(t,r,n,i)}constructor(e,t,r,n){this.breakPositionSeconds=null!=n?n:null,this.displayIndex=null!=t?t:null,this.displayTotal=null!=r?r:null,this.isPlaying=e}toJSON(){const e={playing:this.isPlaying};return null!=this.breakPositionSeconds&&(e.breakPosition=this.breakPositionSeconds),null!=this.displayIndex&&(e.index=this.displayIndex),null!=this.displayTotal&&(e.count=this.displayTotal),e}toString(){return JSON.stringify(this.toJSON())}}class Jc{static fromJSON(e){if(!e.name)return;const t=JSON.parse(e.name);return new Jc(t.uri,Xc.fromJSON(t.ads))}constructor(e,t){this.ad=t||new Xc(!1),this.sourceUri=e}toJSON(){const e={ads:this.ad.toJSON(),uri:this.sourceUri};return{name:JSON.stringify(e)}}}const ed=/_+$/;class td{static fromJSON(e){const{deviceIdentifier:t,deviceName:r,userID:n}=e;return new td(n,t,r)}static fromString(e){const t=e.replace(ed,"");return td.fromJSON(JSON.parse(t))}constructor(e,t,r){this.id="number"==typeof e?e:parseInt(e,10),this.deviceIdentifier=t,this.deviceName=r}toJSON(){const{deviceIdentifier:e,deviceName:t,id:r}=this;return{deviceIdentifier:e,deviceName:t,userID:String(r)}}toString(){return JSON.stringify(this.toJSON())}}class rd{constructor(e,t){this.type="Hello",this.roomID=t,this.user=e}static fromJSON(e){return new rd(td.fromString(e.username),e.room.name)}toJSON(){return{[this.type]:{room:{name:this.roomID},username:this.user.toString(),version:"1.6.4"}}}}class nd{static fromJSON(e,t){return new nd(td.fromString(e),t.isReady||!1,t.position,Jc.fromJSON(t.file))}constructor(e,t,r,n){this.file=n||null,this.isReady=t,this.position=r,this.user=e}}class id{constructor(e){this.type="List",this.users=e||[]}static fromJSON(e,t){const r=e[t],n=[];for(const e in r){const t=nd.fromJSON(e,r[e]);n.push(t)}return new id(n)}toJSON(){return{[this.type]:{}}}}class sd{constructor(e,t,r,n){this.type="Set",this.file=null,this.hasJoined=null,this.hasLeft=null,this.isReady=null,this.user=e,"boolean"==typeof t||null===t?this.isReady=t:(this.file=null!=t?t:null,this.hasJoined=null!=r?r:this.hasJoined,this.hasLeft=null!=n?n:this.hasLeft)}static fromJSON(e,t){if(e.ready){const{isReady:t,username:r}=e.ready,n=td.fromString(r);return new sd(n,t)}if(e.user){const[r,n]=Object.entries(e.user)[0];if(n.room.name===t){const e=td.fromString(r),t=n.file&&Jc.fromJSON(n.file),{joined:i=!1,left:s=!1}=n.event||{};return new sd(e,t,i,s)}}}toJSON(){const{file:e,isReady:t}=this;return e?{[this.type]:{file:e.toJSON()}}:null!=t?{[this.type]:{ready:{isReady:t}}}:void 0}}class ad{constructor(e,t,r){this.type="State",this.ignoringOnTheFly=r,this.ping=e,this.playstate=t,this.setBy=t.setBy?td.fromString(t.setBy):null}static fromJSON(e){const{ping:t,playstate:r,ignoringOnTheFly:n}=e;return new ad(t,r,n)}toJSON(){const{ignoringOnTheFly:e,ping:t,playstate:r}=this,n={ping:t,playstate:r};return null!=(null==e?void 0:e.client)&&null!=(null==e?void 0:e.server)?n.ignoringOnTheFly={client:e.client,server:e.server}:null!=(null==e?void 0:e.client)?n.ignoringOnTheFly={client:e.client}:null!=(null==e?void 0:e.server)&&(n.ignoringOnTheFly={server:e.server}),{[this.type]:n}}}var od=r(27098),ld=r.n(od);const cd=window.console.error.bind(window.console,"[WebSocketConnection]");class dd extends Yc{destroy(){super.destroy()}}class ud extends dd{constructor(e){super(),this.onHelloInterval=()=>{try{this.isOpen&&this.send("hello")}catch(e){cd(`WebSocketConnection hello exception: ${e.message}`)}},this.isPingEnabled=!1!==e.isPingEnabled,this.url=e.url}get isConnecting(){var e;return 0===(null==(e=this.socket)?void 0:e.readyState)}get isOpen(){var e;return 1===(null==(e=this.socket)?void 0:e.readyState)}open(){return new Promise(((e,t)=>{if(this.isConnecting||this.isOpen)return void t(new Error("Refusing to open multiple connections"));const r=new window.WebSocket(this.url);this.socket=r,r.onerror=()=>{t(new Error("Connection error"))},r.onopen=()=>{this.isPingEnabled&&(this.pingIntervalID=window.setInterval(this.onHelloInterval,3e4)),r.onerror=null,r.onclose=e=>{this.pingIntervalID&&(window.clearInterval(this.pingIntervalID),delete this.pingIntervalID),this.emit("close",e)},r.onmessage=e=>{try{this.emit("message",this.parseMessage(e.data))}catch(e){cd("Parse failure",e)}},this.emit("open"),e()}}))}close(e=1e3){if((this.isOpen||this.isConnecting)&&this.socket){const{socket:t}=this;delete this.socket,t.close(e),t.onopen=null,t.onclose=null,t.onerror=null,t.onmessage=null}}destroy(){super.destroy(),this.close()}send(e){var t,r;if(!this.isOpen)throw new Error(`Cannot send to socket in state ${null==(r=this.socket)?void 0:r.readyState}`);null==(t=this.socket)||t.send(e)}parseMessage(e){return JSON.parse(e)}}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,new(ld())({attributePrefix:"",ignoreRoot:!0});const pd="[SyncplaySession]",md=window.console.debug.bind(window.console,pd),hd=window.console.warn.bind(window.console,pd);class gd extends Yc{constructor(e){super(),this.onSocketClose=e=>{this.emit("close",e)},this.onSocketMessage=e=>{let t;md(`Message (${Date.now()}) <<`,e),e.Error?this.close(1011):e.Hello?t=rd.fromJSON(e.Hello):e.List?t=id.fromJSON(e.List,this.roomID):e.Set?t=sd.fromJSON(e.Set,this.roomID):e.State&&(t=ad.fromJSON(e.State)),t&&this.emit("message",t)};const{roomID:t,roomSyncplayHost:r,roomSyncplayPort:n}=e,i=`wss://${r}:${n}/ws`;this.connection=new ud({url:i,isPingEnabled:!1}),this.connection.addListener("close",this.onSocketClose),this.connection.addListener("message",this.onSocketMessage),this.roomID=t}destroy(){super.destroy(),this.connection.destroy()}open(){return e=this,null,t=function*(){yield this.connection.open()},new Promise(((r,n)=>{var i=e=>{try{a(t.next(e))}catch(e){n(e)}},s=e=>{try{a(t.throw(e))}catch(e){n(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,s);a((t=t.apply(e,null)).next())}));var e,t}close(e=1e3){this.connection.close(e)}send(e){const t=e.toJSON();t&&this.connection.send(JSON.stringify(t)),(t?md:hd)(`Message (${Date.now()}) >>`,t||e)}}function yd(){return window.performance.now()/1e3}class vd{constructor(){this._lastForwardDelay=0,this.averageRtt=0,this.clientRtt=0}get lastForwardDelaySeconds(){return this._lastForwardDelay}get state(){var e,t;return{clientLatencyCalculation:yd(),clientRtt:this.clientRtt,serverRtt:(null==(e=this.lastPing)?void 0:e.serverRtt)||0,latencyCalculation:(null==(t=this.lastPing)?void 0:t.latencyCalculation)||0}}update(e){const{clientLatencyCalculation:t,serverRtt:r}=e;this.lastPing=e,null!=t&&(this.clientRtt=yd()-t,this.clientRtt<0||r<0||(0===this.averageRtt&&(this.averageRtt=r),this.averageRtt=.85*this.averageRtt+this.clientRtt*(1-.85),this._lastForwardDelay=this.averageRtt/2,r<this.clientRtt&&(this._lastForwardDelay+=this.clientRtt-r)))}}var fd=Object.defineProperty,bd=Object.defineProperties,Zd=Object.getOwnPropertyDescriptors,Sd=Object.getOwnPropertySymbols,Pd=Object.prototype.hasOwnProperty,Id=Object.prototype.propertyIsEnumerable,Ed=(e,t,r)=>t in e?fd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wd=(e,t)=>{for(var r in t||(t={}))Pd.call(t,r)&&Ed(e,r,t[r]);if(Sd)for(var r of Sd(t))Id.call(t,r)&&Ed(e,r,t[r]);return e},Cd=(e,t)=>bd(e,Zd(t));const Md=window.console.debug.bind(window.console,"[SyncplayClient]");function Dd(e){return["User",e.id,`(${e.deviceName})`]}class Od extends Yc{constructor(e){super(),this.onSessionClose=e=>{this.emit("close",e)},this.onSessionMessage=e=>{e instanceof rd?this.onHelloMessage(e):e instanceof id?this.onListMessage(e):e instanceof sd?this.onSetMessage(e):e instanceof ad&&this.onStateMessage(e)},this.onHelloMessage=e=>{this.session.send(new id)},this.onListMessage=e=>{e.users.forEach((e=>{this.tryEmitUserState(!0,e.isReady,e.user)})),e.users.forEach((e=>{this.tryEmitAdState(e.file,e.user)}))},this.onSetMessage=e=>{const{user:t}=e,r=null!=e.hasJoined||null!=e.hasLeft?e.hasJoined||!e.hasLeft:null;this.tryEmitUserState(r,e.isReady,t),this.tryEmitAdState(e.file,t)},this.onStateMessage=e=>{const t=this.lastSentFile!==this.file;this.pingHelper.update(e.ping),this.tryUpdateIgnoringOnTheFly(e),this.tryEmitPlaybackState(e);const r=this.shouldEchoSessionState()?{doSeek:!1,paused:e.playstate.paused,position:e.playstate.position,setBy:null}:{doSeek:this.playerBridge.hasPendingSeek,paused:this.playerBridge.isPaused,position:this.playerBridge.positionSeconds,setBy:null};t&&this.playerBridge.hasPendingSeek&&(r.doSeek=this.playerBridge.hasPendingSeek,r.position=this.playerBridge.positionSeconds);const n=this.isReady;this.playerBridge.hasPendingPlayPause=!1,this.playerBridge.hasPendingSeek=!1,this.session.send(new ad(this.pingHelper.state,r,this.ignoringOnTheFly)),t&&(this.lastSentFile=this.file,this.session.send(new sd(this.user,this.lastSentFile))),this.lastIsReady!==n&&(Md("Setting isReady",{isReady:n,isAdPlaying:this.file.ad.isPlaying,hasInitialBuffer:this.playerBridge.hasInitialBuffer}),this.lastIsReady=n,this.session.send(new sd(this.user,this.lastIsReady)))};const{deviceIdentifier:t,deviceName:r,userID:n,playerBridge:i,roomID:s,roomSourceUri:a,roomSyncplayHost:o,roomSyncplayPort:l}=e;this.eventFields={roomID:s},this.file=new Jc(a),this.ignoringOnTheFly={client:0,server:0},this.pingHelper=new vd,this.playerBridge=i,this.roomID=s,this.roomSourceUri=a,this.user=new td(n,t,r),this.session=new gd({roomID:s,roomSyncplayHost:o,roomSyncplayPort:l}),this.session.addListener("close",this.onSessionClose),this.session.addListener("message",this.onSessionMessage)}get isReady(){return!this.file.ad.isPlaying&&this.playerBridge.hasInitialBuffer}destroy(){super.destroy(),this.leave(),this.session.destroy()}join(){return e=this,null,t=function*(){yield this.session.open(),this.session.send(new rd(this.user,this.roomID))},new Promise(((r,n)=>{var i=e=>{try{a(t.next(e))}catch(e){n(e)}},s=e=>{try{a(t.throw(e))}catch(e){n(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,s);a((t=t.apply(e,null)).next())}));var e,t}leave(){this.session.close(),this.file=new Jc(this.roomSourceUri)}setAdState(e,t,r){var n;const i=null==(n=this.file)?void 0:n.ad;(null==i?void 0:i.isPlaying)!==e||(null==i?void 0:i.displayIndex)!==t||(null==i?void 0:i.displayTotal)!==r?this.file=new Jc(this.roomSourceUri,e?new Xc(e,t,r):void 0):Md("Will not Set redundant session ad state",{isPlaying:e,displayIndex:t,displayTotal:r})}tryEmitAdState(e,t){if(!e)return;const{ad:r}=e,n=Cd(wd({},this.eventFields),{ad:r,user:t});Md(...Dd(t),"ad state",r),this.emit("session",n)}tryEmitUserState(e,t,r){const n=Cd(wd({},this.eventFields),{user:r});null!=e&&(Md(...Dd(r),"present?",e),n.isPresent=e),null!=t?(Md(...Dd(r),"ready?",t),n.isReady=t):!1===e&&(n.isReady=!1),null==e&&null==t||this.emit("session",n)}tryEmitPlaybackState(e){var t;if((null==(t=e.setBy)?void 0:t.deviceIdentifier)===this.user.deviceIdentifier||this.ignoringOnTheFly.client>0)return;const{playstate:r,setBy:n}=e,i=r.position+(r.paused?0:this.pingHelper.lastForwardDelaySeconds),s={isPaused:r.paused,positionSeconds:i,shouldSeek:r.doSeek},a=wd(wd({},this.eventFields),s);n?(Md(...Dd(n),"playback state",s),a.user=n):Md("Server playback state",s),this.emit("session",a)}tryUpdateIgnoringOnTheFly(e){var t,r;const{ignoringOnTheFly:n}=this,i=null!=(null==(t=e.ignoringOnTheFly)?void 0:t.client)&&e.ignoringOnTheFly.client>0?e.ignoringOnTheFly.client:0;n.server=null!=(null==(r=e.ignoringOnTheFly)?void 0:r.server)&&e.ignoringOnTheFly.server>0?e.ignoringOnTheFly.server:0,(this.shouldEchoSessionState()||i===n.client)&&(n.client=0),this.shouldEchoSessionState()||!this.playerBridge.hasPendingPlayPause&&!this.playerBridge.hasPendingSeek||n.client++}shouldEchoSessionState(){return!this.playerBridge.isPlayerForeground||this.file.ad.isPlaying||this.ignoringOnTheFly.server>0}}let Td;function xd(){const e=!!Td;return e||f.Z.warn("[Watch Together] Syncplay client is unavailable"),e}const Ad=class{constructor({appModel:e,appStore:t}){this.appModel=e,this.appStore=t}start(){const{appModel:e,appStore:t}=this,r=t.dispatch;Qc(e,((e,t)=>{!t&&Td&&r($c.j3())}))}update({hasPendingSeek:e,hasPendingPlayPause:t,isAdPlaying:r,adDisplayIndex:n,adDisplayTotal:i}){xd()&&(void 0!==r&&Td.setAdState(r,null!=n?n:void 0,null!=i?i:void 0),void 0!==t&&(Td.playerBridge.hasPendingPlayPause=t),void 0!==e&&(Td.playerBridge.hasPendingSeek=e))}leave(){xd()&&(Td.destroy(),Td=void 0)}join({roomID:e,roomSourceUri:t,roomSyncplayHost:r,roomSyncplayPort:n}){const{appModel:i,appStore:s}=this;Td=new Od({deviceIdentifier:x.Z.prop("X-Plex-Client-Identifier"),deviceName:x.Z.prop("X-Plex-Device-Name"),playerBridge:{get hasInitialBuffer(){const e=(0,g.DB)("appModel"),t=(0,Kc.F_)(e,Va.Se);if(t.get("canPlayThrough"))return!0;const r=t.get("bufferedRanges"),n=t.get("positionSeconds")+5;for(let e=0;e<r.length;e++){const t=r[e];if(n>=t.startSeconds&&n<=t.endSeconds)return!0}return!1},hasPendingPlayPause:!1,hasPendingSeek:!1,get isPaused(){const e=(0,g.DB)("appModel");return(0,Kc.F_)(e,Va.Se).get("isPaused")},get isPlayerForeground(){const e=(0,g.DB)("appModel");return!1===(0,Kc.F_)(e,Va.Se).get("isWatchTogetherLobbyVisible")},get positionSeconds(){const e=(0,g.DB)("appModel"),t=(0,Kc.F_)(e,Va.Se);return null!=t.get("lastSeekPositionSeconds")?t.get("lastSeekPositionSeconds"):t.get("positionSeconds")}},roomID:e,roomSourceUri:t,roomSyncplayHost:r,roomSyncplayPort:n,userID:i.get("user").id}),(0,f.Z)("[Watch Together] Joining session for room:",e),Td.join().then((()=>{(0,f.Z)("[Watch Together] Joined session for room:",e),(0,g.DB)("metrics").trackEvent({event:Kr.l8,interaction:!0,properties:{playbackSessionId:e}}),Td.addListener("session",(t=>{const r={roomID:e,event:t};f.Z.groupCollapsed("[Watch Together] Session event"),f.Z.debug("[Watch Together] Event:",t),s.dispatch($c.xg(r)),s.dispatch($c.eA(r)),s.dispatch($c.os(r)),f.Z.groupEnd()})),Td.addListener("close",(t=>{f.Z.warn("[Watch Together] Session closed unexpectedly:",t),s.dispatch($c.o6({roomID:e,sessionError:(0,Fe.Z)("Lost connection to the Watch Together session.")}))}))})).catch((t=>{f.Z.error("[Watch Together] Error joining session for room:",e,t),s.dispatch($c.o6({roomID:e,sessionError:(0,Fe.Z)("Could not join at this time.")}))}))}};var kd=r(80106);class Nd extends dd{constructor(){super(),this.onDispatcherMessage=e=>{this.emit("message",e)},this.onHasEventConnectionChange=()=>{this.cloudServerModel.get("hasEventConnection")?this.emit("open"):this.emit("close")};const e=(0,g.DB)("appModel");this.cloudServerModel=e.get("cloudServer"),this.cloudServerModel.on({"change:hasEventConnection":this.onHasEventConnectionChange}),ae.Z.on({[`cloudServer:${Ks.EI}`]:this.onDispatcherMessage,[`cloudServer:${Ks.Sz}`]:this.onDispatcherMessage}),this.cloudServerModel.get("hasEventConnection")&&this.onHasEventConnectionChange()}get isConnecting(){return!1}get isOpen(){return this.cloudServerModel.get("hasEventConnection")}open(){return Promise.reject(new Error("Cannot open directly"))}close(){throw new Error("Cannot close directly")}send(){throw new Error("Cannot send directly")}destroy(){super.destroy(),ae.Z.off({[`cloudServer:${Ks.EI}`]:this.onDispatcherMessage,[`cloudServer:${Ks.Sz}`]:this.onDispatcherMessage}),this.cloudServerModel.off({"change:hasEventConnection":this.onHasEventConnectionChange})}}var Rd=r(9669),Ld=r.n(Rd),jd=Object.defineProperty,Vd=Object.defineProperties,Ud=Object.getOwnPropertyDescriptors,Fd=Object.getOwnPropertySymbols,Bd=Object.prototype.hasOwnProperty,_d=Object.prototype.propertyIsEnumerable,zd=(e,t,r)=>t in e?jd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Hd=(e,t)=>{for(var r in t||(t={}))Bd.call(t,r)&&zd(e,r,t[r]);if(Fd)for(var r of Fd(t))_d.call(t,r)&&zd(e,r,t[r]);return e},Wd=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));function Gd(e){return e}function Qd(...e){return e.filter((e=>!!(null==e?void 0:e.trim()))).map((e=>null==e?void 0:e.replace(/^\/+|\/+$/g,""))).join("/")}const $d="json";class Kd{constructor(e){this.endpoint="https://together.plex.tv/rooms",this.accessToken=e.accessToken}create(e,t,r){return Wd(this,null,(function*(){return(yield Ld().post(this.endpoint,{sourceUri:e,title:t,users:r||null},{params:{"X-Plex-Token":this.accessToken},responseType:$d})).data}))}createInvites(e,t){return Wd(this,null,(function*(){return(yield Ld().post(Qd(this.endpoint,e,"invite"),{users:t},{params:{"X-Plex-Token":this.accessToken},responseType:$d})).data}))}delete(e){return Wd(this,null,(function*(){yield Ld().delete(Qd(this.endpoint,e),{params:{"X-Plex-Token":this.accessToken},responseType:$d})}))}get(e){return Wd(this,null,(function*(){const t=yield Ld().get(Qd(this.endpoint,e),{params:{"X-Plex-Token":this.accessToken},responseType:$d});return e?t.data:function(e){return e.rooms.map(Gd)}(t.data)}))}patch(e,t){return Wd(this,null,(function*(){var r,n;return(yield Ld().patch(Qd(this.endpoint,e),{params:(r=Hd({},t),n={"X-Plex-Token":this.accessToken},Vd(r,Ud(n))),responseType:$d})).data}))}}var qd=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{o(r.next(e))}catch(e){i(e)}},a=e=>{try{o(r.throw(e))}catch(e){i(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}));class Yd extends Yc{constructor(e){super(),this.onPubSubMessage=e=>{const{command:t}=e;"notifyWatchTogetherInvite"!==t&&"notifyWatchTogetherExpire"!==t||this.rooms()},this.onPubSubClose=e=>{this.emit("close",e)};const{accessToken:t,pubsub:r}=e;this.pubsub=r,this.pubsub.addListener("close",this.onPubSubClose),this.pubsub.addListener("message",this.onPubSubMessage),this.service=new Kd({accessToken:t})}get isOpen(){return this.pubsub.isOpen}open(){return this.pubsub.open()}destroy(){super.destroy(),this.pubsub.destroy()}rooms(){return qd(this,null,(function*(){const e=yield this.service.get();return this.emit("rooms",e),e}))}createRoom(e,t,r){return qd(this,null,(function*(){const n=yield this.service.create(e,t,r);return yield this.rooms(),n.id}))}deleteRoom(e){return qd(this,null,(function*(){var t;try{yield this.service.delete(e)}catch(e){if(404!==(null==(t=null==e?void 0:e.response)?void 0:t.status))throw e}yield this.rooms()}))}inviteUsers(e,t){return qd(this,null,(function*(){yield this.service.createInvites(e,t),yield this.rooms()}))}}var Xd=r(23608);let Jd;const eu=class{constructor({appModel:e,appStore:t}){this.appModel=e,this.appStore=t}start(){const{appModel:e,appStore:t}=this;Qc(e,((r,n)=>{if(Jd&&(Jd.destroy(),Jd=null,(0,f.Z)("[Watch Together] stopped rooms client")),n){const n=r.id;(0,Xd.Z)(r.get("features").populate({timeout:5e3})).then((()=>{if(e.get("user").id!==n)return Promise.reject(new Error("User has changed"));if(!(0,Ma.Z)(e,Da.Bs))return Promise.reject(new Error("User missing feature access"));const i=r.get("authToken");Jd=new Yd({accessToken:i,pubsub:new Nd}),Jd.addListener("rooms",(e=>{t.dispatch(kd.Yl({rooms:e}))})),t.dispatch(kd.Uw())})).catch((e=>{f.Z.warn("[Watch Together] cannot start",e)}))}}))}getRoomsClient(){return Jd}};var tu=r(49202);const ru="stopped";var nu=r(80278),iu=r(68702),su=r(52501),au=r(28802),ou=r(39527),lu=r(3927),cu=r(37334),du=r(40976);function uu(e,t){const r=function(e,t){const r=e.get("connections").filter((e=>e.get("isConnected")&&!e.get("isLoopback"))),n=r.length?r.reduce(du.y):null;if(n)return{machineIdentifier:e.get("machineIdentifier"),protocol:n.get("scheme"),address:n.getAddressFromUri(),port:n.get("port")}}(e);return r?(r.transcoderVideo=e.get("transcoderVideo")||!1,r.transcoderVideoRemuxOnly=e.get("transcoderVideoRemuxOnly")||!1,r.transcoderAudio=e.get("transcoderAudio")||!1,r.version=e.get("shortVersion"),r.myPlexSubscription=e.get("myPlexSubscription"),r.isVerifiedHostname="https"===r.protocol&&!F.At(r.address),function(e,t={}){const r=e.get("accessToken");return!e.supports("transientToken")||e.get("isCloud")||/^transient-/.test(r)?l().Deferred().resolve(r).promise():l().ajax(e.getXHROptions("/security/token",{data:{type:t.type||"delegation",scope:t.scope||"all"}})).promise().then((e=>(0,lu.Z)(e).token||l().Deferred().reject().promise()))}(e).then((e=>(r.accessToken=e,r)))):l().Deferred().reject().promise()}var pu=r(42575),mu=Object.defineProperty,hu=Object.defineProperties,gu=Object.getOwnPropertyDescriptors,yu=Object.getOwnPropertySymbols,vu=Object.prototype.hasOwnProperty,fu=Object.prototype.propertyIsEnumerable,bu=(e,t,r)=>t in e?mu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zu=(e,t)=>{for(var r in t||(t={}))vu.call(t,r)&&bu(e,r,t[r]);if(yu)for(var r of yu(t))fu.call(t,r)&&bu(e,r,t[r]);return e},Su=(e,t)=>hu(e,gu(t));const Pu="remoteCastPlayerManager";function Iu(e,t){const r=t.dispatch;let n,i,s,a,o,c=0,d=0,u=!1,p={},m={};function h(e,t={},r={}){if(!n)return l().Deferred().reject().promise();const i=b.Z.join([n.baseURL,e],Su(Zu({},t),{commandID:c})),s=n.server.getXHROptions(i,Su(Zu({},r),{scope:Pu,headers:{"X-Plex-Target-Client-Identifier":n.get("machineIdentifier")}}));return l().ajax(s)}function g(e={}){n&&h("/player/timeline/poll",e,{timeout:2e4}).done(((t,i,s)=>{d=0;const a=(0,lu.Z)(t);if((0,ou.Z)(a.disconnected)&&e.wait)return void r(cu.Qt());const o=n.get("machineIdentifier"),l=s.getResponseHeader("X-Plex-Client-Identifier"),p=(0,mi.Z)(a.commandID),m=o===l||n.baseURL;if(!u&&m&&p>=c){const e=(0,au.Z)(a.Timeline),t=v().findWhere(e,{type:"video"}),r=v().findWhere(e,{type:"music"}),n=v().findWhere(e,{type:"photo"});!t||r&&r.state&&r.state!==ru?r&&y(r):y(t),n&&y(n),c=p}g({wait:1})})).fail(((t,n)=>{t&&t.aborting||("error"===n?(d++,e.wait&&d<=3?(f.Z.warn("[Companion] Poll request failed; retrying..."),g({wait:1})):(f.Z.warn("[Companion] Poll request failed 3 times in a row; giving up"),r(cu.Qt()))):g({wait:1}))}))}function y(e){const{type:t,state:n,providerIdentifier:i,machineIdentifier:s,containerKey:a,key:o}=e,l=e.playQueueItemID||e.playQueueItemId,c=nu.d2(t),d=(0,ou.Z)(e.continuing);if(n===ru&&!d)return p[t]=null,m[t]=null,void r(cu.L0({playQueueType:c}));const u=(0,mi.Z)(e.playQueueVersion),h=(0,mi.Z)(e.time),g=(0,mi.Z)(e.duration),y=(0,mi.Z)(e.mediaIndex),v=(0,mi.Z)(e.partIndex),f=e.audioStreamID?(0,mi.Z)(e.audioStreamID):null,b=e.subtitleStreamID?(0,mi.Z)(e.subtitleStreamID):null,Z=(0,mi.Z)(e.volume),S=(0,mi.Z)(e.repeat),P=(e.controllable||"").split(","),I={positionSeconds:Math.floor(h/1e3),durationSeconds:Math.floor(g/1e3),mediaIndex:y,partIndex:v,isPaused:"paused"===n,isBuffering:"buffering"===n,hasError:"error"===n,controllable:P.reduce(((e,t)=>(e[t]=!0,e)),{})},E=p[t],w=m[t],C=l!==E||u!==w;p[t]=l,m[t]=u,r(cu.RN({playQueueType:c,options:{providerIdentifier:i,machineIdentifier:s,containerKey:a,key:o,playQueueItemID:l,shouldRefreshPlayQueue:C,initialState:I}})),r(cu.dS({playQueueType:c,playerState:I,providerIdentifier:i,machineIdentifier:s})),function(e){const t={};null!=e.autoPlay&&(t.autoPlay="1"===e.autoPlay),null!=e.subtitleColor&&(t.subtitleColor=e.subtitleColor),null!=e.subtitlePosition&&(t.subtitlePosition=e.subtitlePosition),null!=e.subtitleSize&&(t.subtitleSize=(0,mi.Z)(e.subtitleSize)),r(cu.Jb(t))}(e),r(cu.I3({playQueueType:c,playQueueVersion:u,repeatAll:S===iu.QN||S===iu.ry,repeatOne:S===iu.ry})),r(cu.Ep({playQueueType:c,key:o,mediaIndex:y,partIndex:v,audioStreamID:f,subtitleStreamID:b})),null!=e.volume&&r(cu.Vu(Z))}function Z(){i=null,null!=s&&(I(s),s=null)}function S(){a=null,null!=o&&(E(o),o=null)}function P(e,t){return n?(c++,h(e,t)):(f.Z.warn(`[Companion] Command for ${e} ignored; no current player`),l().Deferred().reject().promise())}function I(e){i?(window.clearTimeout(i),s=e):P("/player/playback/seekTo",e),i=window.setTimeout(Z,200)}function E(e){a?(window.clearTimeout(a),o=e):P("/player/playback/setParameters",e),a=window.setTimeout(S,200)}return{requestSession:function(t){n=(0,pu.cX)(e,{playerIdentifier:t}),n?(r(cu.A1(t)),c=0,d=0,g()):f.Z.warn(`[Companion] Request session ignored; no player with identifier "${t}"`)},endSession:function(){n?(i&&(window.clearTimeout(i),i=null),a&&(window.clearTimeout(a),a=null),C.Z.abortAll(Pu),h("/player/timeline/unsubscribe"),n=null,s=null,o=null,p={},m={}):f.Z.warn("[Companion] End session ignored; no current player")},startPlayback:function(e){if(!n)return void f.Z.warn("[Companion] Start playback ignored; no current player");const t=e.get("playQueue"),i=t.get("type"),s=t.get("playQueueItems").get(t.get("playQueueSelectedItemID")).get("metadataItem"),a=t.server,o=t.provider;if("speaker"===n.get("deviceClass")&&t.get("type")!==su.j0)return void r(cu.XI({playQueueType:i,errorMessage:(0,Fe.Z)("The connected player only supports audio playback.")}));const l=1e3*e.get("positionSeconds")||Math.floor((0,tu.Z)(e,s));u=!0,uu(a).done((e=>{const n=e.machineIdentifier,a=o.get("identifier"),c={type:nu.ED(t.get("type")),providerIdentifier:a,containerKey:b.Z.join([v().result(t,"url")],{own:1}),key:s.get("key"),offset:l,machineIdentifier:n,protocol:e.protocol,address:e.address,port:e.port,token:e.accessToken};(0,f.Z)("[Companion] Sending play media request"),P("/player/playback/playMedia",c).done((()=>{u=!1,(0,f.Z)("[Companion] Play media success"),r(cu.dS({playQueueType:i,playerState:{isMediaLoading:!1},providerIdentifier:a,machineIdentifier:n}))})).fail((e=>{u=!1,f.Z.warn(`[Companion] Failed to play media with error "${e.status}"`),r(cu.XI({playQueueType:i}))}))})).fail((()=>{u=!1,r(cu.XI({playQueueType:i,errorMessage:(0,Fe.Z)('The server "{serverName}" does not have a valid connection for casting. Check that the server is claimed in server settings.',{serverName:a.get("friendlyName")})}))}))},mirrorDetails:function(e){if(!n)return void f.Z.warn("[Companion] Mirror details ignored; no current player");const t=n.get("protocolCapabilities");if(!t||-1===t.indexOf("mirror"))return void f.Z.warn("[Companion] Mirror details ignored; player does not advertise support for the `mirror` capability");const r=e.server,i=e.provider;uu(r).done((t=>{h("/player/mirror/details",{key:e.get("key"),providerIdentifier:i.get("identifier"),machineIdentifier:t.machineIdentifier,protocol:t.protocol,address:t.address,port:t.port,token:t.accessToken})}))},sendCommand:P,seek:I,changeVolume:E}}var Eu=r(37474);const wu=Eu.ZP.Model.extend({initialize:function(e,t){this.set("time",new Date)}});var Cu=r(14796);const Mu=new(Eu.ZP.Model.extend({initialize:function(e,t){this.set("host",window.location.host),this.set("userAgent",window.navigator.userAgent),this.set("browser",Cu.Z)},toJSON:function(){const e=this.parent,t=e.get("primaryServer"),r=e.get("user");return this.set("version","4.87.2"),t&&(t.get("activeConnection")&&this.set("primaryServerUrl",t.url()),this.set("primaryServerAuthToken",!!t.get("accessToken")),this.set("primaryServerVersion",t.get("versionFull"))),this.set("username",r.get("username")),this.set("cloudUrl",r.server.get("connections")),Eu.ZP.Model.prototype.toJSON.apply(this,arguments)}})),Du=/("?(auth_token|accessToken|X-Plex-Token|authToken|token)"?[:=].*?)("?[-\w]+"?)/g,Ou=/("?(email)"?[:=]([\s]+)?)("(.*)")/g,Tu=/("?(address|host|uri)"?[:=].*?)(".*")/g;function xu(e){if(e)return e.replace(Du,'$1"TOKEN"').replace(Ou,'$1"EMAIL"').replace(Tu,'$1"IP ADDRESS"')}const Au=/(password=)([^&]+)/;function ku(e){return e.replace(Du,"$1TOKEN").replace(Au,"$1PASSWORD")}const Nu=Eu.ZP.Collection.extend({model:wu,initialize:function(e,t){v().bindAll(this,"onAjaxComplete","onAppModelRegistered"),this.parent=t.parent,Mu.parent=t.parent,(0,g.X_)("appModel").done(this.onAppModelRegistered)},reconfigure(){(0,g.DB)("appModel").get("deviceSettings").get("debugLevel")?this.start():this.stop()},start:function(){this.enabled||(this.enabled=!0,this.reset(),this.listenTo(ae.Z,"log:message",this.onLogMessage),Eu.ZP.history.on("route",this.onRoute,this),l()(document).on("ajaxComplete",this.onAjaxComplete))},stop:function(){this.enabled&&(this.enabled=!1,this.reset(),this.stopListening(ae.Z),Eu.ZP.history.off("route",this.onRoute,this),l()(document).off("ajaxComplete",this.onAjaxComplete))},destroy:function(){this.stop(),this.stopListening()},add:function(){this.length>1e3&&this.shift(),Eu.ZP.Collection.prototype.add.apply(this,arguments)},toJSON:function(){const e=Eu.ZP.Collection.prototype.toJSON.apply(this,arguments);return e.unshift(v().extend({type:"info"},Mu.toJSON())),e},toJSONString:function(){return JSON.stringify(this.toJSON(),null,2)},onAppModelRegistered:function(e){const t=e.get("deviceSettings");this.listenTo(t,"change:debugLevel",this.reconfigure),this.reconfigure()},onLogMessage:function(e){this.add(e)},onRoute:function(e,t,r){const n={type:"navigation",route:t,args:r,fragment:window.location.hash};this.add(n)},onAjaxComplete:function(e,t,r){const n=(0,g.DB)("appModel").get("deviceSettings").get("debugLevel"),i={type:"ajax",url:ku(r.url),status:t.status};var s;v().isEmpty(r.headers)||(i.headers=((s=r.headers)&&s.hasOwnProperty("X-Plex-Token")&&(s["X-Plex-Token"]="TOKEN"),s&&s.hasOwnProperty("Authorization")&&(s.Authorization="BASIC AUTHORIZATION"),s)),v().isEmpty(r.data)||(i.params=ku(r.data)),200===t.status?2===n?i.response=xu(t.responseText):i.responseLength=t.responseText?t.responseText.length:0:(i.statusText=t.statusText,i.response=xu(t.responseText)),this.add(i)}});var Ru=r(235);const Lu=(0,Oa.P1)(Ru.Z,(e=>e.remoteQuality)),ju=(0,Oa.P1)(Ul.Z,(e=>e.restorePlayQueue)),Vu=(0,Oa.P1)(Ru.Z,(e=>({color:e.subtitleColor,position:e.subtitlePosition,size:e.subtitleSize})));var Uu=r(34575),Fu=r(51146),Bu=r(92527);const _u=0,zu=5,Hu=9;var Wu=r(35076),Gu=r(49688);const Qu=v().reduce(Gu.l,((e,t)=>(e[t]="Metadata",e)),{}),$u=function e(t){if(!t||!t._children)return t;const r=v().clone(t),n=r._children;return Array.isArray(n)&&(n.forEach((t=>{const n=t._elementType;if(t._elementType=null,t.elementName=n,n){const i=Qu[n]||n,s=r[i],a=e(t);s?Array.isArray(s)?s.push(a):r[i]=[s,a]:r[i]=a}})),r._children=null),r};var Ku=r(24048),qu=r(82650),Yu=r(35387),Xu=r(40174),Ju=r(69407),ep=Object.defineProperty,tp=Object.getOwnPropertySymbols,rp=Object.prototype.hasOwnProperty,np=Object.prototype.propertyIsEnumerable,ip=(e,t,r)=>t in e?ep(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sp=(e,t)=>{for(var r in t||(t={}))rp.call(t,r)&&ip(e,r,t[r]);if(tp)for(var r of tp(t))np.call(t,r)&&ip(e,r,t[r]);return e};const ap=bi.Z.extend({context:["server"],url:"/updater/status",sessionAttrs:{isChecking:zn.Z.boolean.isRequired},syncedAttrs:{status:zn.Z.integer,canInstall:zn.Z.boolean,downloadURL:zn.Z.string,state:zn.Z.string,progress:zn.Z.integer,version:zn.Z.string,error:zn.Z.string,added:zn.Z.string,fixed:zn.Z.string},defaults:{state:Bu.NONE,status:0,progress:0,version:null,error:"",added:null,fixed:null,isChecking:!1},augmentResponse(e){const t=e,{Release:r}=t,n=((e,t)=>{var r={};for(var n in e)rp.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&tp)for(var n of tp(e))t.indexOf(n)<0&&np.call(e,n)&&(r[n]=e[n]);return r})(t,["Release"]);return r&&(e=sp(sp({},n),r)),"0"!==e.status&&(e.state=Bu.ERROR),e}});var op=r(93888),lp=r(44006),cp=Object.defineProperty,dp=Object.defineProperties,up=Object.getOwnPropertyDescriptors,pp=Object.getOwnPropertySymbols,mp=Object.prototype.hasOwnProperty,hp=Object.prototype.propertyIsEnumerable,gp=(e,t,r)=>t in e?cp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const yp={started:mc.TV,updated:mc.UU,ended:mc.uq},vp={started:dr.Z.actions.activityStarted,updated:dr.Z.actions.activityUpdated,ended:dr.Z.actions.activityFinished},fp=[Ks.yV,Ks.gk,Ks.cc,Ks.ax,Ks.u0,Ks.Z$,Ks.eS,Ks.ad,Ks.cK,Ks.sU,Ks.wL,Ks.lY,Ks.Q_,Ks.jN,Ks.Mu,Ks.a8,Ks.VL,Ks.TD,Ks.RN],bp=5e3;function Zp(e){const t=g.DB("appStore");t.dispatch(Fu.NO({serverEntityID:e,playerType:Va.Se})),si.wB(window.location.hash,si.Ll)&&t.dispatch((0,st.jR)({serverEntityID:e}))}const Sp=Ku.Z.extend({initialize(e){Ku.Z.prototype.initialize.apply(this,arguments),this.throttledRepopulates={}},repopulateNow(e,t){this.throttledRepopulates[e]={timestamp:Date.now()},t()},repopulateWithThrottle(e,t,r){const n=this.throttledRepopulates[e];if(n)if(n.hasTimeout);else{const i=Date.now()-n.timestamp;i<r?(window.setTimeout((()=>{this.repopulateNow(e,t)}),r-i),this.throttledRepopulates[e]={hasTimeout:!0}):this.repopulateNow(e,t)}else this.repopulateNow(e,t)},getMessageTypes:()=>fp,[Ks.eS](e){e.key=e.id,e.server=this.server,this.server.trigger("socket:setting",e),(0,g.DB("appStore").dispatch)((0,Pc.m7)({serverEntityID:this.server.entityID(),setting:e}))},[Ks.jN](e){if(si.wB(e.identifier,si.Ll))return;const{state:t,mediaProviderID:r,sectionID:n,rootItemID:i,parentItemID:s,itemID:a,metadataState:o,mediaState:l,type:c}=e,d=g.DB("appStore").dispatch,u=this.server.entityID(),p=qe.getMetadataType(c),m=null==p?void 0:p.typeString,h=`${function(e){switch(e){case qe.PLAYLIST:return"/playlists";case qe.COLLECTION:return"/library/collections";default:return"/library/metadata"}}(m)}/${a}`,y=s?`/library/metadata/${s}`:null,v=i?`/library/metadata/${i}`:null,f=(0,qu.Z)(Yu.TY,h,u),b=(0,Wu.Z)({serverIdentifier:this.server.get("machineIdentifier"),providerIdentifier:si.Y3,key:h}),Z=y?(0,Wu.Z)({serverIdentifier:this.server.get("machineIdentifier"),providerIdentifier:si.Y3,key:y}):void 0,S=v?(0,Wu.Z)({serverIdentifier:this.server.get("machineIdentifier"),providerIdentifier:si.Y3,key:v}):void 0;d(lr.Z.actions.timelineStatesChanged({sourceURI:b,metadataState:o,mediaState:l})),d((0,op.oZ)({serverEntityID:u,metadataItemEntityID:f,metadataState:o,mediaState:l})),t===zu&&(d(ar.Z.actions.metadataProcessed({sourceURI:b,parentSourceURI:Z,rootSourceURI:S})),d((0,Uu.dk)({serverEntityID:u,metadataItemEntityID:f})),m===qe.ALBUM&&d((0,lp.x9)({serverEntityID:u,albumMetadataItemEntityID:f}))),t===Hu&&(d(ar.Z.actions.deleted({mediaProviderID:r,sourceURI:b,parentSourceURI:Z,rootSourceURI:S})),d((0,Uu.W6)({serverEntityID:u,metadataItemEntityID:f}))),t===_u&&d(ar.Z.actions.created({mediaProviderID:r,sourceURI:b,parentSourceURI:Z,rootSourceURI:S})),t!==_u&&t!==Hu||(n>0&&this.repopulateWithThrottle("section-"+n,(()=>{d((0,st.jR)({serverEntityID:u,containerKeyPattern:new RegExp("^"+(0,A.Z)(`/library/sections/${n}`)+"\\b")}))}),bp),i>0&&this.repopulateWithThrottle("metadata-"+i,(()=>{const e=`/library/metadata/${i}`,t=(0,qu.Z)(Yu.TY,e,u);d((0,st.jR)({serverEntityID:u,metadataItemEntityID:t,rootMetadataKey:e}))}),bp),s>0&&this.repopulateWithThrottle("metadata-"+s,(()=>{const e=`/library/metadata/${s}`,t=(0,qu.Z)(Yu.TY,e,u);d((0,st.jR)({serverEntityID:u,metadataItemEntityID:t,parentMetadataKey:e}))}),bp),m===qe.PLAYLIST&&d((0,st.jR)({serverEntityID:u,containerKeyPattern:new RegExp("^/playlists")}))),e.server=this.server,this.server.trigger("socket:timeline",e),ae.Z.trigger("timeline",e)},[Ks.Q_](e){if(this.server.trigger("socket:status",e),"LIBRARY_UPDATE"===e.notificationName){const e=g.DB("appStore").dispatch,t=this.server.entityID();t&&(e(hr.Z.actions.libraryScanUpdated({server:Oc(this.server)})),e((0,mc.Vk)({serverEntityID:t})),e((0,mc.tU)({serverEntityID:t})),e((0,st.jR)({serverEntityID:t})))}},[Ks.ad](e){this.server.trigger("socket:status",e)},[Ks.Z$](e){if(!e.sessionKey||!this.server.get("isFullOwnedServer"))return;const t=g.DB("appStore").dispatch;e.state===jo.Z.states.STOPPED?(t(mr.Z.actions.sessionStopped({server:Oc(this.server),sessionKey:e.sessionKey})),t((0,st.jR)({serverEntityID:this.server.entityID()}))):t(mr.Z.actions.sessionChanged({server:Oc(this.server),message:e}))},[Ks.cc](e){const t={server:this.server,onlyIfCached:!0},r=new Ju.Z({id:e.generatorID},t);v().isEmpty(r)||r.fetch()},[Ks.RN](e){const t={server:this.server,onlyIfCached:!0},r=new Ju.Z({id:e.generatorID},t);if(!v().isEmpty(r)){const t=r.get("children").getCollection().get(e.metadataItemID);t&&t.set({processingState:e.state,processingStateContext:e.stateContext})}},[Ks.ax](e){const t=new Xu.Z([],{server:this.server,allowInCache:!0,onlyIfCached:!0});if(!v().isEmpty(t)){const e=t.first();e&&e.fetch()}},[Ks.a8](e){const t=g.DB("appStore").dispatch;this.server.get("isShared")||("static"===e.context?this.server.get("desktop").get("backgroundTranscodeJobs").fetch():t(mr.Z.actions.fetchRequested({server:Oc(this.server)})))},[Ks.VL](e){if(!this.server.get("isShared")&&"static"===e.context){const t=this.server.get("desktop").get("backgroundTranscodeJobs"),r=t.get(e.key);r?r.set(r.parse(e)):t.fetch()}},[Ks.Mu](e){this.server.get("isShared")||this["transcodeSession.start"].apply(this,arguments)},[Ks.TD](e){const t=this.server.get("desktop").get("update"),r=v().pick(e,Object.keys(ap.prototype.syncedAttrs));var n;v().defaults(r,v().result(t,"defaults")),t.get("state")===Bu.DOWNLOADING&&r.state===Bu.AVAILABLE&&(r.state=Bu.DOWNLOADING),t.set((n=((e,t)=>{for(var r in t||(t={}))mp.call(t,r)&&gp(e,r,t[r]);if(pp)for(var r of pp(t))hp.call(t,r)&&gp(e,r,t[r]);return e})({},r),dp(n,up({isChecking:!1}))))},[Ks.lY](e){this.server.get("desktop").get("cloudAccount").fetch()},[Ks.yV](e){this.server.set("myPlexSubscription",e.hasPlexPass),g.DB("appModel").get("user").get("isSignedIn")&&ae.Z.trigger("discover:servers")},[Ks.gk](e){const t=$u(e),r=g.DB("appStore"),n=this.server.entityID(),i=t.Activity||t;if(i.Context=i.Context||{},i.Response=i.Response||{},n){const e=yp[t.event],s=vp[t.event];e&&r.dispatch(e({serverEntityID:n,activity:i})),s&&r.dispatch(s({server:Oc(this.server),activity:i}))}},[Ks.u0](e){const t=g.DB("appStore"),r=this.server.entityID();r&&"appeared"===e.event&&t.dispatch((0,Pc.Hz)({serverEntityID:r,device:e.Device}))},[Ks.sU](){Zp(this.server.entityID())},[Ks.wL](){Zp(this.server.entityID())},[Ks.cK](){g.DB("appStore").dispatch((0,mc.lm)({serverEntityID:this.server.entityID()}))}}),Pp=bi.Z.extend({name:"BaseAppModel",isStateTreeRoot:!0,constructor:function(){this._pendingEntities=[],this.listenTo(ae.Z,"change:entity",this.onEntityChange),bi.Z.prototype.constructor.apply(this,arguments)},initialize(){this._pendingEntities.forEach(this._addEntity.bind(this))},_addEntity({type:e,id:t,model:r}){this.get("entities").get(e).add({id:t,model:r},{merge:!0})},onEntityChange(e){this.has("entities")?this._addEntity(e):this._pendingEntities.push(e)}});var Ip=r(5780),Ep=r(62954);function wp(e){return e.length?v().map(e,(e=>e.get("debugName"))).join(", "):"(none)"}const Cp=fi.Z.extend({mixins:[Ep.Z],name:"ServerCollection",model:qt.ZP,initialize(){this._resetPopulate()},comparator(e){const t=e.get("isShared"),r=e.get("friendlyName")||"",n=e.get("sourceTitle")||"",i=t?n+r:r;return e.get("isCloud")?"9":(t?"1":"0")+i.toLowerCase()},shouldWaitForInitialServers(){const e=this.filter((e=>(!e.id||!!e.get("resources"))&&e.isPopulating()));return!!e.length&&((0,f.Z)("[Servers] Waiting for initial servers =",wp(e)),!0)},shouldWaitForResources(){const e=this.reduce(((e,t)=>{const r=t.get("isResolved"),n=t.get("resources"),i=n&&n.isPopulating();return r&&i&&e.push(t),e}),[]);return!!e.length&&((0,f.Z)("[Servers] Waiting for additional resources from",wp(e)),!0)},shouldWaitForPendingServers(){if(this.findWhere({isConnected:!0}))return!1;const e=this.filter((e=>e.isPopulating()));return!!e.length&&((0,f.Z)("[Servers] Waiting for pending servers =",wp(e)),!0)},waitForServers(){this._resetPopulate()},foundAllServers(){const e=this.where({isConnected:!0}),t=wp(e);(0,f.Z)("[Servers] Found all servers =",t),e.length?this._resolvePopulate():this._rejectPopulate()},populateAnyServer(e=this.models){const t=l().Deferred(),r=e.slice(0),n=v().find(r,(e=>e.get("isCloud")?e.get("isResolved"):e.get("isConnected")));if(n)return(0,f.Z)("[Servers] Populate any server chose %s where servers = %s",n.get("debugName"),wp(r)),t.resolve(n).promise();if(this.hasOnlyRejectedServers(r))return t.reject().promise();function i(e,n){v().contains(r,e)&&n&&t.resolve(e)}function s(e,n){v().contains(r,e)&&n&&this.hasOnlyRejectedServers(r)&&t.reject()}return this.on({remove:function(e){const n=r.indexOf(e);n>-1&&(r.splice(n,1),this.hasOnlyRejectedServers(r)&&t.reject())},"change:isResolved":i,"change:isRejected":s},this),t.always((()=>{this.off("change:isResolved",i,this),this.off("change:isRejected",s,this)})),t.promise()},populateServer(e){return this.findServer(e,!0).then((e=>e.get("isConnected")&&!e.get("isCloud")?l().Deferred().resolve(e):e.populate()))},findServer(e,t){const r=v().isString(e),n=r?{machineIdentifier:e}:e,i=l().Deferred();if(r){const e=this.get(n.machineIdentifier);if(e&&e.get("isResolved"))return window.setTimeout(i.resolve.bind(i,e),0),i.promise()}const s=v().has(n,"machineIdentifier"),a="add "+v().map(v().keys(n),(e=>"change:"+e)).join(" ");let o;function c(){const e=this.filterServers(n,t);e?(o=e,e.done((t=>{o===e&&i.resolve(t)})),e.fail((()=>{o===e&&(s||!this.isPopulating()?i.reject():this.populate().always(c.bind(this)))}))):this.isPopulating()||i.reject()}return c.call(this),this.on(a,c,this),this.populate().always((()=>{o||i.reject()})),i.always((()=>{this.off(a,c,this)})),i.promise()},filterServers(e,t){const r=this.where(e);if(r.length)return t?this.populateAnyServer(r):l().Deferred().resolve(r[0]).promise()},hasOnlyRejectedServers(e=this.models){return v().every(e,(e=>e.get("isRejected")))},hasLoopbackServer(e=this.models){return!!v().find(e,(e=>{const t=e.get("activeConnection");return!!t&&t.get("isLoopback")}))}});var Mp=r(21971),Dp=r(47276),Op=Object.defineProperty,Tp=Object.getOwnPropertySymbols,xp=Object.prototype.hasOwnProperty,Ap=Object.prototype.propertyIsEnumerable,kp=(e,t,r)=>t in e?Op(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Np=bi.Z.extend({name:"EntityModel",sessionAttrs:{id:zn.Z.string.isRequired},sessionRelations:{model:{relationClass:bi.Z,deferred:!0}},toState(){const e=this.get("model"),t=((e,t)=>{for(var r in t||(t={}))xp.call(t,r)&&kp(e,r,t[r]);if(Tp)for(var r of Tp(t))Ap.call(t,r)&&kp(e,r,t[r]);return e})({entityID:this.id},e.state);return Object.defineProperty(t,"possibleEntityContainers",{value:e.state.possibleEntityContainers,enumerable:!1}),t},shouldUpdateRelationState:function(){return!0}}),Rp=fi.Z.extend({name:"EntityCollection",model:Np,toState(){const e=this.reduce(this.reduceState,{possibleEntityContainers:[]});return Object.defineProperty(e,"possibleEntityContainers",{enumerable:!1}),e},reduceState:(e,t)=>(e.possibleEntityContainers.push(t.id),e[t.id]=t.getState(),e)});var Lp=r(28654),jp=r(45673),Vp=r(24970),Up=r(96486),Fp=Object.defineProperty,Bp=Object.defineProperties,_p=Object.getOwnPropertyDescriptors,zp=Object.getOwnPropertySymbols,Hp=Object.prototype.hasOwnProperty,Wp=Object.prototype.propertyIsEnumerable,Gp=(e,t,r)=>t in e?Fp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Qp(e){return t=((e,t)=>{for(var r in t||(t={}))Hp.call(t,r)&&Gp(e,r,t[r]);if(zp)for(var r of zp(t))Wp.call(t,r)&&Gp(e,r,t[r]);return e})({},e),r={friendlyName:e.friendlyName&&(0,Up.unescape)(e.friendlyName),title:e.title&&(0,Up.unescape)(e.title)},Bp(t,_p(r));var t,r}function $p(e){return e.map((e=>Qp(e)))}function Kp(e,t,r,...n){return(0,Vp.rM)((function*(){const i={};yield(0,Vp.ib)(e,(function*(e){const s=r(e);i[s]&&(yield(0,Vp.al)(i[s])),i[s]=yield(0,Vp.rM)(t,e,...n),yield(0,Vp.v_)(i[s]),i[s]&&!i[s].isRunning()&&delete i[s]}))}))}const qp=(e,t)=>(0,Vp.rM)(((e,t)=>function*(){yield(0,Vp.Fm)(e,t)})(e,t)),Yp=(e,t,r)=>(0,Vp.rM)(((e,t,r)=>function*(){yield Kp(e,t,(({payload:e})=>e[r]))})(e,t,r));var Xp=Object.defineProperty,Jp=Object.defineProperties,em=Object.getOwnPropertyDescriptors,tm=Object.getOwnPropertySymbols,rm=Object.prototype.hasOwnProperty,nm=Object.prototype.propertyIsEnumerable,im=(e,t,r)=>t in e?Xp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sm=(e,t)=>{for(var r in t||(t={}))rm.call(t,r)&&im(e,r,t[r]);if(tm)for(var r of tm(t))nm.call(t,r)&&im(e,r,t[r]);return e},am=(e,t)=>Jp(e,em(t));const om={includeSharedServers:!0,includeSharedSources:!0,includeSharingSettings:!0};function*lm({payload:e}){const{server:t}=e;try{const e=yield(0,Vp.RE)(vm,t);yield(0,Vp.gz)(ir.Z.actions.fetchAllFriendsSucceeded({friends:e}))}catch(e){yield(0,Vp.gz)(ir.Z.actions.fetchAllFriendsFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*cm({payload:e}){const{server:t}=e;try{const e=yield(0,Vp.RE)(fm,t);yield(0,Vp.gz)(ir.Z.actions.fetchSentInvitesSucceeded({invites:e}))}catch(e){yield(0,Vp.gz)(ir.Z.actions.fetchSentInvitesFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*dm({payload:e}){const{server:t}=e;try{const e=yield(0,Vp.RE)(bm,t);yield(0,Vp.gz)(ir.Z.actions.fetchReceivedInvitesSucceeded({invites:e}))}catch(e){yield(0,Vp.gz)(ir.Z.actions.fetchReceivedInvitesFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*um({payload:e}){const{server:t,identifier:r}=e;try{yield(0,Vp.RE)(ys.Z.del,"/api/v2/friends/invite",{server:t,headers:{accept:"application/json"},params:{identifier:r}});const e=yield(0,Vp.RE)(fm,t),n=yield(0,Vp.RE)(bm,t);yield(0,Vp.gz)(ir.Z.actions.rejectFriendInviteSucceeded({sentInvites:e,receivedInvites:n}))}catch(e){yield(0,Vp.gz)(ir.Z.actions.rejectFriendInviteFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*pm({payload:e}){const{server:t,id:r,isHomeUser:n}=e;if(n)try{yield(0,Vp.RE)(ys.Z.del,`/api/home/users/${r}`,{server:t})}catch(e){const t=(0,lu.Z)(e.response.data).status;return void(yield(0,Vp.gz)(ir.Z.actions.removeFriendFailed({error:ys.Z.toPlainErrorObject({message:t})})))}try{yield(0,Vp.RE)(ys.Z.del,`/api/v2/friends/${r}`,{server:t,headers:{accept:"application/json"}});const e=yield(0,Vp.RE)(vm,t);yield(0,Vp.gz)(ir.Z.actions.removeFriendSucceeded({friends:e}))}catch(e){yield(0,Vp.gz)(ir.Z.actions.removeFriendFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*mm({payload:e}){const{server:t,id:r}=e;try{yield(0,Vp.RE)(ys.Z.post,`/api/v2/friends/${r}/accept`,{server:t,headers:{accept:"application/json"}});const e=yield(0,Vp.RE)(bm,t),n=yield(0,Vp.RE)(vm,t);yield(0,Vp.gz)(ir.Z.actions.acceptFriendInviteSucceeded({receivedInvites:e,friends:n}))}catch(e){yield(0,Vp.gz)(ir.Z.actions.acceptFriendInviteFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*hm({payload:e}){const{server:t,invitedEmail:r}=e;try{yield(0,Vp.RE)(ys.Z.post,"/api/home/users",{server:t,headers:{accept:"application/json"},params:{invitedEmail:r}}),yield(0,Vp.gz)(ir.Z.actions.sendHomeUserInviteSucceeded())}catch(e){yield(0,Vp.gz)(ir.Z.actions.sendHomeUserInviteFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*gm({payload:e}){const{server:t,identifier:r}=e;try{yield(0,Vp.RE)(ys.Z.post,"/api/v2/friends/invite",{server:t,headers:{accept:"application/json"},params:{identifier:r}});const e=yield(0,Vp.RE)(fm,t);yield(0,Vp.gz)(ir.Z.actions.sendFriendInviteSucceeded({sentInvites:e}))}catch(e){const n=ys.Z.toPlainErrorObject(e);if(404===n.status)try{yield(0,Vp.RE)(ys.Z.post,"/api/v2/friends/invite/new_user",{server:t,headers:{accept:"application/json"},params:{email:r}});const e=yield(0,Vp.RE)(fm,t);yield(0,Vp.gz)(ir.Z.actions.sendFriendInviteSucceeded({sentInvites:e}))}catch(e){yield(0,Vp.gz)(ir.Z.actions.sendFriendInviteFailed({error:ys.Z.toPlainErrorObject(e)}))}else 422===n.status&&(n.data.errors[0].message=(0,Fe.Z)("Already Invited")),yield(0,Vp.gz)(ir.Z.actions.sendFriendInviteFailed({error:n}))}}function*ym({payload:e}){const{server:t,identifier:r}=e;try{yield(0,Vp.RE)(ys.Z.post,"/api/users/validate",{server:t,params:{invited_email:r}}),yield(0,Vp.gz)(ir.Z.actions.validateUsernameSucceeded())}catch(e){const t=(0,lu.Z)(e.response.data).status;yield(0,Vp.gz)(ir.Z.actions.validateUsernameFailed({error:ys.Z.toPlainErrorObject({message:t})}))}}function*vm(e){const{data:t}=yield(0,Vp.RE)(ys.Z.get,"/api/v2/friends",{server:e,headers:{accept:"application/json"},params:am(sm({},om),{status:"accepted"})});return $p(t.filter((e=>e.username)))}function*fm(e){const{data:t}=yield(0,Vp.RE)(ys.Z.get,"/api/v2/friends",{server:e,headers:{accept:"application/json"},params:am(sm({},om),{status:"pending_sent"})}),{data:r}=yield(0,Vp.RE)(ys.Z.get,"/api/v2/friends/invites/sent/pending",{server:e,headers:{accept:"application/json"},params:om});return $p(t.concat(r.filter((e=>e.invitedEmail))))}function*bm(e){const{data:t}=yield(0,Vp.RE)(ys.Z.get,"/api/v2/friends",{server:e,headers:{accept:"application/json"},params:am(sm({},om),{status:"pending_received"})});return $p(t)}function*Zm(){yield(0,Vp.$6)([qp(ir.Z.actions.fetchAllFriends,lm),qp(ir.Z.actions.fetchSentInvites,cm),qp(ir.Z.actions.fetchReceivedInvites,dm),qp(ir.Z.actions.rejectFriendInvite,um),qp(ir.Z.actions.sendFriendInvite,gm),qp(ir.Z.actions.acceptFriendInvite,mm),qp(ir.Z.actions.removeFriend,pm),qp(ir.Z.actions.validateUsername,ym),qp(ir.Z.actions.sendHomeUserInvite,hm)])}var Sm=r(37350),Pm=Object.getOwnPropertySymbols,Im=Object.prototype.hasOwnProperty,Em=Object.prototype.propertyIsEnumerable;function*wm({payload:e}){const{server:t,provider:r,key:n}=e;try{const e=(yield(0,Vp.RE)(ys.Z.get,n,{server:t,provider:r})).data.MediaContainer,{Metadata:i=[]}=e,s=((e,t)=>{var r={};for(var n in e)Im.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Pm)for(var n of Pm(e))t.indexOf(n)<0&&Em.call(e,n)&&(r[n]=e[n]);return r})(e,["Metadata"]),[a]=i,o=(0,Sm.Z)({server:t,provider:r,data:a,container:s});yield(0,Vp.gz)(sr.Z.actions.fetchMetadataItemSucceeded({metadataItem:o.metadataItem,key:n}))}catch(e){yield(0,Vp.gz)(sr.Z.actions.fetchMetadataItemFailed({error:ys.Z.toPlainErrorObject(e),key:n}))}}function*Cm(){yield(0,Vp.$6)([Yp(sr.Z.actions.fetchMetadataItem,wm,"key")])}var Mm=r(44301),Dm=r(90245),Om=r(12587),Tm=r(12451),xm=r(30154),Am=r(69093);function km(e,t,r,...n){return(0,Vp.rM)((function*(){const i={};yield(0,Vp.ib)(e,(function*(e){var s;const a=r(e);(null==(s=i[a])?void 0:s.isRunning())||(i[a]=yield(0,Vp.rM)(t,e,...n),yield(0,Vp.v_)(i[a]),i[a]&&!i[a].isRunning()&&delete i[a])}))}))}var Nm=Object.defineProperty,Rm=Object.defineProperties,Lm=Object.getOwnPropertyDescriptors,jm=Object.getOwnPropertySymbols,Vm=Object.prototype.hasOwnProperty,Um=Object.prototype.propertyIsEnumerable,Fm=(e,t,r)=>t in e?Nm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function*Bm({payload:e}){var t;const{server:r,provider:n,metadataItem:i}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,b.Z.join([i.key,"userState"]),{server:r,provider:n}),a=(s=((e,t)=>{for(var r in t||(t={}))Vm.call(t,r)&&Fm(e,r,t[r]);if(jm)for(var r of jm(t))Um.call(t,r)&&Fm(e,r,t[r]);return e})({},(0,xm.Z)({metadataItemStateResponse:null!=(t=e.data.MediaContainer.UserState)?t:{},metadataItem:i})),Rm(s,Lm({tempState:{}})));yield(0,Vp.gz)(ar.Z.actions.fetchSucceeded({sourceURI:i.sourceURI,metadataItemState:a,guid:i.guid,providerIdentifier:n.identifier}))}catch(e){yield(0,Vp.gz)(ar.Z.actions.fetchFailed({sourceURI:i.sourceURI,error:ys.Z.toPlainErrorObject(e)}))}finally{(yield(0,Vp.By)())&&(yield(0,Vp.gz)(ar.Z.actions.fetchCancelled({sourceURI:i.sourceURI})))}var s}function*_m({payload:e}){const{server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,played:a,guid:o}=e;try{const e=(0,Tm.Z)(r,Om.rf.Scrobble,n);if(!e)throw new Error("No scrobble action found on provider");const l=a?e.key:e.reverseKey;if(!l)throw new Error("The scrobble action is missing a `key` or `reverseKey`");yield(0,Vp.RE)(ys.Z.get,l,{server:t,provider:r,params:{identifier:r.identifier,key:s}}),yield(0,Vp.gz)(ar.Z.actions.playedStatusUpdateSucceeded({server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,played:a,guid:o}))}catch(e){yield(0,Vp.gz)(ar.Z.actions.playedStatusUpdateFailed({sourceURI:i,error:ys.Z.toPlainErrorObject(e)}))}}function*zm({payload:e}){const{server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,rating:a}=e;try{const e=(0,Tm.Z)(r,Om.rf.Rate,n);if(!e)throw new Error("No rate action found on provider");if(!e.key)throw new Error("The rate action is missing a `key`");yield(0,Vp.RE)(ys.Z.put,e.key,{server:t,provider:r,params:{identifier:r.identifier,key:s,rating:a}}),yield(0,Vp.gz)(ar.Z.actions.rateSucceeded({server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,rating:a}))}catch(e){yield(0,Vp.gz)(ar.Z.actions.rateFailed({sourceURI:i,error:ys.Z.toPlainErrorObject(e)}))}}function*Hm({payload:e}){const{server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,added:a,showToastOnAdded:o}=e;try{const e=(0,Tm.Z)(r,Om.rf.AddToWatchlist,n);if(!e)throw new Error("No watchlist action found on provider");const l=a?e.key:e.reverseKey;if(!l)throw new Error("The watchlist action is missing a `key` or `reverseKey`");yield(0,Vp.RE)(ys.Z.put,l,{server:t,provider:r,params:{ratingKey:s}}),yield(0,Vp.gz)(ar.Z.actions.toggleWatchlistSucceeded({server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,added:a})),o&&(yield(0,Am.Z)((0,st.wp)({type:Mm.M,message:a?(0,Fe.Z)("Added to Watchlist"):(0,Fe.Z)("Removed from Watchlist")})))}catch(e){yield(0,Vp.gz)(ar.Z.actions.toggleWatchlistFailed({sourceURI:i,error:ys.Z.toPlainErrorObject(e)}))}}function*Wm({payload:e}){const{server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,saved:a}=e;try{const e=(0,Tm.Z)(r,Om.rf.Save,n);if(!e)throw new Error("No save action found on provider");const o=a?e.key:e.reverseKey;if(!o)throw new Error("The save action is missing a `key` or `reverseKey`");yield(0,Vp.RE)(ys.Z.put,o,{server:t,provider:r,params:{ratingKey:s}}),yield(0,Vp.gz)(ar.Z.actions.toggleSavedSucceeded({server:t,provider:r,stableUser:n,sourceURI:i,ratingKey:s,saved:a}))}catch(e){yield(0,Vp.gz)(ar.Z.actions.toggleSavedFailed({sourceURI:i,error:ys.Z.toPlainErrorObject(e)}))}}function*Gm({payload:e}){const{server:t,provider:r,sourceURI:n,part:i,streamIDParam:s,streamID:a,allParts:o}=e;try{const e=i.key.match(new RegExp(`^(.*/parts/${i.id})/`)),l=b.Z.join(e?e[1]:["/library/parts",i.id]);yield(0,Vp.RE)(ys.Z.put,l,{server:t,provider:r,params:{[s]:a,allParts:o?1:0}}),yield(0,Vp.gz)(ar.Z.actions.streamSelectSucceeded({sourceURI:n}))}catch(e){yield(0,Vp.gz)(ar.Z.actions.streamSelectFailed({sourceURI:n,error:ys.Z.toPlainErrorObject(e)}))}}function*Qm({payload:e}){const{server:t,provider:r,sourceURI:n,streamKey:i}=e;try{yield(0,Vp.RE)(ys.Z.del,i,{server:t,provider:r}),yield(0,Vp.gz)(ar.Z.actions.streamDeleteSucceeded({sourceURI:n}))}catch(e){yield(0,Vp.gz)(ar.Z.actions.streamDeleteFailed({sourceURI:n,error:ys.Z.toPlainErrorObject(e)}))}}function*$m({payload:e}){const{targetServer:t,targetProvider:r,targetLibrarySectionID:n,targetLibraryType:i,server:s,provider:a,metadataItem:o}=e;try{yield(0,Vp.RE)(ys.Z.post,"/media/subscriptions",{server:t,provider:r,params:{providers:(0,Wu.Z)({serverIdentifier:s.machineIdentifier,providerIdentifier:a.identifier}),prefs:{oneShot:1,remoteMedia:1},params:{libraryType:(0,Dm.Z)(i)},targetLibrarySectionID:n,hints:{guid:o.guid,ratingKey:o.ratingKey,title:o.title,parentTitle:o.parentTitle},type:(0,Dm.Z)(o.type)}})}catch(e){}}function*Km({payload:e}){const{ratingKey:t,server:r,provider:n,stableUser:i,sourceURI:s}=e;try{const e=(0,Tm.Z)(n,Om.rf.RemoveFromContinueWatching,i);if(!(null==e?void 0:e.key))throw new Error(`removeFromContinueWatching action not found on ${n.identifier}`);yield(0,Vp.RE)(ys.Z.put,e.key,{server:r,provider:n,params:{ratingKey:t}}),yield(0,Vp.gz)(ar.Z.actions.removeFromContinueWatchingSucceeded({sourceURI:s}))}catch(e){}}function*qm(){yield Kp(ar.Z.actions.fetchRequested,Bm,(({payload:e})=>e.metadataItem.sourceURI))}function*Ym(){yield Kp(ar.Z.actions.playedStatusUpdateRequested,_m,(({payload:e})=>e.sourceURI))}function*Xm(){yield Kp(ar.Z.actions.rateRequested,zm,(({payload:e})=>e.sourceURI))}function*Jm(){yield Kp(ar.Z.actions.toggleWatchlistRequested,Hm,(({payload:e})=>e.sourceURI))}function*eh(){yield Kp(ar.Z.actions.toggleSavedRequested,Wm,(({payload:e})=>e.sourceURI))}function*th(){yield Kp(ar.Z.actions.streamSelectRequested,Gm,(({payload:e})=>e.sourceURI))}function*rh(){yield km(ar.Z.actions.streamDeleteRequested,Qm,(({payload:e})=>e.streamKey))}function*nh(){yield km(ar.Z.actions.addToLibraryRequested,$m,(({payload:e})=>e.metadataItem.sourceURI))}function*ih(){yield km(ar.Z.actions.removeFromContinueWatchingRequested,Km,(({payload:e})=>e.sourceURI))}function*sh(){yield(0,Vp.$6)([(0,Vp.rM)(qm),(0,Vp.rM)(ih),(0,Vp.rM)(Ym),(0,Vp.rM)(Xm),(0,Vp.rM)(Jm),(0,Vp.rM)(eh),(0,Vp.rM)(th),(0,Vp.rM)(rh),(0,Vp.rM)(nh)])}var ah=r(8089),oh=r(27736),lh=Object.defineProperty,ch=Object.defineProperties,dh=Object.getOwnPropertyDescriptors,uh=Object.getOwnPropertySymbols,ph=Object.prototype.hasOwnProperty,mh=Object.prototype.propertyIsEnumerable,hh=(e,t,r)=>t in e?lh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function*gh({payload:e}){const{server:t,provider:r,sourceURI:n,params:i,providerVersionOverride:s}=e;try{const{key:e}=(0,ah.Z)(n),a=yield(0,Vp.RE)(or.g.fetchAll,e,{server:t,provider:r,params:i,providerVersionOverride:s});yield(0,Vp.gz)(or.Z.actions.fetchAllSucceeded({sourceURI:n,data:a}))}catch(e){yield(0,Vp.gz)(or.Z.actions.fetchAllFailed({sourceURI:n,error:ys.Z.toPlainErrorObject(e)}))}}function*yh({payload:e}){const{server:t,provider:r,sourceURI:n,params:i,startIndex:s,size:a,isPrepend:o,providerVersionOverride:l}=e;try{const{key:e}=(0,ah.Z)(n),c=yield(0,Vp.RE)(or.g.fetchRange,e,{server:t,provider:r,params:i,startIndex:s,size:a,isPrepend:o,providerVersionOverride:l});yield(0,Vp.gz)(or.Z.actions.fetchRangeSucceeded({sourceURI:n,data:c}))}catch(e){yield(0,Vp.gz)(or.Z.actions.fetchRangeFailed({sourceURI:n,error:ys.Z.toPlainErrorObject(e)}))}}function*vh({payload:e}){const{server:t,provider:r,sourceURI:n,params:i,providerVersionOverride:s}=e;try{const e=yield(0,Vp.Ys)((0,oh.Z)(n)),l=or.g.getRepopulateRangeOptions(e.items),{key:c}=(0,ah.Z)(n),d=yield(0,Vp.RE)(or.g.fetchRange,c,(a=((e,t)=>{for(var r in t||(t={}))ph.call(t,r)&&hh(e,r,t[r]);if(uh)for(var r of uh(t))mh.call(t,r)&&hh(e,r,t[r]);return e})({},l),o={server:t,provider:r,params:i,providerVersionOverride:s},ch(a,dh(o))));yield(0,Vp.gz)(or.Z.actions.repopulateRangeSucceeded({sourceURI:n,data:d}))}catch(e){yield(0,Vp.gz)(or.Z.actions.repopulateRangeFailed({sourceURI:n,error:ys.Z.toPlainErrorObject(e)}))}var a,o}function*fh(e){const{sourceURI:t}=e.payload;(yield(0,Vp.Ys)((0,oh.Z)(t))).isPaginated?yield(0,Vp.RE)(vh,e):yield(0,Vp.RE)(gh,e)}function*bh(){yield km(or.Z.actions.fetchAllRequested,gh,(({payload:e})=>e.sourceURI))}function*Zh(){yield Kp(or.Z.actions.fetchRangeRequested,yh,(({payload:e})=>e.sourceURI))}function*Sh(){yield Kp(or.Z.actions.repopulateRangeRequested,vh,(({payload:e})=>e.sourceURI))}function*Ph(){yield function(e,t,r,n,i={leading:!0,trailing:!0},...s){return(0,Vp.rM)((function*(){const a={};function*o(e,t,r){a[e]={timestamp:Date.now()},yield(0,Vp.gw)(r),yield(0,Vp.RE)(l,e,t)}function*l(e,t){a[e]={timestamp:Date.now(),task:yield(0,Vp.rM)(r,t,...s)}}yield(0,Vp.ib)(t,(function*(t){const r=n(t),s=a[r];if(s){if((null==i?void 0:i.trailing)&&s.task&&!s.task.isRunning()){const n=e-(Date.now()-s.timestamp);yield(0,Vp.RE)(o,r,t,n)}}else(null==i?void 0:i.leading)?yield(0,Vp.RE)(l,r,t):(null==i?void 0:i.trailing)&&(yield(0,Vp.RE)(o,r,t,e));const c=a[r];yield(0,Vp.gw)(e),c===a[r]&&delete a[r]}))}))}(5e3,or.Z.actions.throttledRepopulateRequested,fh,(({payload:e})=>e.sourceURI))}function*Ih(){yield(0,Vp.$6)([(0,Vp.rM)(bh),(0,Vp.rM)(Zh),(0,Vp.rM)(Sh),(0,Vp.rM)(Ph)])}function*Eh({payload:e}){const{server:t,provider:r,sourceURI:n}=e;try{const{key:e}=(0,ah.Z)(n);yield(0,Vp.RE)(ys.Z.put,b.Z.join([e,"refresh"]),{server:t,provider:r})}catch(e){yield(0,Vp.gz)(lr.Z.actions.metadataRefreshFailed({sourceURI:n,error:ys.Z.toPlainErrorObject(e)}))}}function*wh({payload:e}){const{server:t,provider:r,sourceURI:n}=e;try{const{key:e}=(0,ah.Z)(n);yield(0,Vp.RE)(ys.Z.put,b.Z.join([e,"analyze"]),{server:t,provider:r})}catch(e){yield(0,Vp.gz)(lr.Z.actions.mediaAnalysisFailed({sourceURI:n,error:ys.Z.toPlainErrorObject(e)}))}}function*Ch(){yield(0,Vp.ib)(lr.Z.actions.metadataRefreshRequested,Eh)}function*Mh(){yield(0,Vp.ib)(lr.Z.actions.mediaAnalysisRequested,wh)}function*Dh(){yield(0,Vp.$6)([(0,Vp.rM)(Ch),(0,Vp.rM)(Mh)])}var Oh=r(58671);function*Th({payload:e}){const{server:t}=e;try{(yield(0,Vp.Ys)((0,Oh.Z)(t.machineIdentifier))).isPopulated||(yield(0,Vp.gz)(cr.Z.actions.fetchRequested(e)))}catch(e){yield(0,Vp.gz)(cr.Z.actions.fetchFailed({server:t,error:ys.Z.toPlainErrorObject(e)}))}}function*xh({payload:e}){var t,r;const{server:n}=e;try{const e=null!=(r=null==(t=(yield(0,Vp.RE)(ys.Z.get,"/accounts",{server:n})).data.MediaContainer)?void 0:t.Account)?r:[];yield(0,Vp.gz)(cr.Z.actions.fetchSucceeded({server:n,data:e.filter((e=>e.name))}))}catch(e){yield(0,Vp.gz)(cr.Z.actions.fetchFailed({server:n,error:ys.Z.toPlainErrorObject(e)}))}}function*Ah(){yield km(cr.Z.actions.populateRequested,Th,(({payload:e})=>e.server.machineIdentifier))}function*kh(){yield km(cr.Z.actions.fetchRequested,xh,(({payload:e})=>e.server.machineIdentifier))}function*Nh(){yield(0,Vp.$6)([(0,Vp.rM)(Ah),(0,Vp.rM)(kh)])}function*Rh({payload:e}){const{server:t,machineIdentifier:r}=e;try{const{data:e}=yield(0,Vp.RE)(ys.Z.get,`/api/v2/servers/${r}`,{server:t,headers:{accept:"application/json"}});yield(0,Vp.gz)(ur.Z.actions.fetchServerDetailsSucceeded({details:e,machineIdentifier:r}))}catch(e){yield(0,Vp.gz)(ur.Z.actions.fetchServerDetailsFailed({error:ys.Z.toPlainErrorObject(e),machineIdentifier:r}))}}function*Lh({payload:e}){const{server:t,machineIdentifier:r,sharingSettings:n,username:i,librarySectionIds:s}=e;try{const{data:e}=yield(0,Vp.RE)(ys.Z.post,"/api/v2/shared_servers",{server:t,headers:{accept:"application/json"}},{invitedEmail:i,settings:n,librarySectionIds:s,machineIdentifier:r});yield(0,Vp.gz)(ur.Z.actions.shareLibrariesSucceeded({machineIdentifier:r,inviteToken:e.inviteToken}))}catch(e){yield(0,Vp.gz)(ur.Z.actions.shareLibrariesFailed({error:ys.Z.toPlainErrorObject(e),machineIdentifier:r}))}}function*jh({payload:e}){const{server:t,machineIdentifier:r,sharingSettings:n,id:i,librarySectionIds:s}=e;try{yield(0,Vp.RE)(ys.Z.post,`/api/v2/shared_servers/${i}`,{server:t,headers:{accept:"application/json"}},{settings:n,librarySectionIds:s}),yield(0,Vp.gz)(ur.Z.actions.updateLibrariesSucceeded({machineIdentifier:r}))}catch(e){yield(0,Vp.gz)(ur.Z.actions.updateLibrariesFailed({error:ys.Z.toPlainErrorObject(e),machineIdentifier:r}))}}function*Vh({payload:e}){const{server:t,machineIdentifier:r,id:n}=e;try{yield(0,Vp.RE)(ys.Z.del,`/api/v2/shared_servers/${n}`,{server:t,headers:{accept:"application/json"}}),yield(0,Vp.gz)(ur.Z.actions.deleteSharedServerSucceeded({machineIdentifier:r}))}catch(e){yield(0,Vp.gz)(ur.Z.actions.deleteSharedServerFailed({error:ys.Z.toPlainErrorObject(e),machineIdentifier:r}))}}function*Uh(){yield(0,Vp.$6)([Yp(ur.Z.actions.fetchServerDetails,Rh,"machineIdentifier"),Yp(ur.Z.actions.shareLibraries,Lh,"machineIdentifier"),Yp(ur.Z.actions.updateLibraries,jh,"machineIdentifier"),Yp(ur.Z.actions.deleteSharedServer,Vh,"machineIdentifier")])}var Fh=r(27044);function*Bh({payload:e}){const{server:t}=e;try{(yield(0,Vp.Ys)((0,Fh.Z)(t.machineIdentifier))).isPopulated||(yield(0,Vp.gz)(pr.Z.actions.fetchRequested(e)))}catch(e){yield(0,Vp.gz)(pr.Z.actions.fetchFailed({server:t,error:ys.Z.toPlainErrorObject(e)}))}}function*_h({payload:e}){var t,r;const{server:n}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,"/devices",{server:n});yield(0,Vp.gz)(pr.Z.actions.fetchSucceeded({server:n,data:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.Device)?r:[]}))}catch(e){yield(0,Vp.gz)(pr.Z.actions.fetchFailed({server:n,error:ys.Z.toPlainErrorObject(e)}))}}function*zh(){yield km(pr.Z.actions.populateRequested,Bh,(({payload:e})=>e.server.machineIdentifier))}function*Hh(){yield km(pr.Z.actions.fetchRequested,_h,(({payload:e})=>e.server.machineIdentifier))}function*Wh(){yield(0,Vp.$6)([(0,Vp.rM)(zh),(0,Vp.rM)(Hh)])}var Gh=r(30654),Qh=r(50361),$h=r.n(Qh),Kh=r(57107);function qh(e){var t,r;const{data:n}=e;return(null!=(r=null==(t=n.MediaContainer)?void 0:t.Metadata)?r:[]).map((e=>{var t;const r=$h()(e);return(0,Kh.dL)(r,"viewOffset"),(0,Kh.dL)(r,"duration"),null==(t=r.Media)||t.forEach((e=>{var t;null==(t=e.Part)||t.forEach((e=>{var t;null==(t=e.Stream)||t.forEach((e=>{(0,Kh.ZX)(e,"selected"),(0,Kh.dL)(e,"streamType")}))}))})),r}))}function*Yh({payload:e}){const{server:t}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,"/status/sessions",{server:t});yield(0,Vp.gz)(mr.Z.actions.fetchSucceeded({server:t,data:qh(e)}))}catch(e){yield(0,Vp.gz)(mr.Z.actions.fetchFailed({server:t,error:ys.Z.toPlainErrorObject(e)}))}}function*Xh({payload:e}){const{server:t,message:r}=e;try{const e=(yield(0,Vp.Ys)((0,Gh.Z)(t.machineIdentifier))).sessionsByKey[r.sessionKey];e&&e.key===r.key||(yield(0,Vp.gz)(mr.Z.actions.fetchRequested({server:t})))}catch(e){yield(0,Vp.gz)(mr.Z.actions.stopFailed({server:t,error:ys.Z.toPlainErrorObject(e)}))}}function*Jh({payload:e}){const{server:t,session:r,reason:n}=e;try{yield(0,Vp.RE)(ys.Z.get,"/status/sessions/terminate",{server:t,params:{sessionId:r.Session.id,reason:n}})}catch(e){yield(0,Vp.gz)(mr.Z.actions.stopFailed({server:t,error:ys.Z.toPlainErrorObject(e)}))}}function*eg(){yield km(mr.Z.actions.fetchRequested,Yh,(({payload:e})=>e.server.machineIdentifier))}function*tg(){yield km(mr.Z.actions.sessionChanged,Xh,(({payload:e})=>e.server.machineIdentifier))}function*rg(){yield(0,Vp.ib)(mr.Z.actions.stopRequested,Jh)}function*ng(){yield(0,Vp.$6)([(0,Vp.rM)(eg),(0,Vp.rM)(tg),(0,Vp.rM)(rg)])}var ig=r(39341),sg=r(6029);function*ag({payload:e}){var t;const{server:r}=e;try{const e=yield(0,Vp.RE)(dg,r);yield(0,Vp.gz)(gr.Z.actions.fetchUserDetailsSucceeded({details:{id:e.id,uuid:e.uuid,thumb:e.thumb||"",friendlyName:e.friendlyName||"",email:e.email,username:e.username,anonymous:e.anonymous,isFullUser:!!e.username||!!e.anonymous,plexPass:null==(t=e.roles)?void 0:t.includes(ig.G5)}}))}catch(e){yield(0,Vp.gz)(gr.Z.actions.fetchUserDetailsFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*og({payload:e}){const{server:t}=e;try{const{data:{consent:e}}=yield(0,Vp.RE)(ys.Z.get,"/api/v2/user/view_state_sync",{server:t,headers:{accept:"application/json"}});yield(0,Vp.gz)(gr.Z.actions.fetchViewStateSucceeded({consent:e}))}catch(e){yield(0,Vp.gz)(gr.Z.actions.fetchViewStateSyncFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*lg({payload:e}){const{server:t,update:r}=e;let n;r.avatar&&(n=new FormData,n.append("avatar",(0,sg.Z)(r.avatar)));const i=Object.entries(r).filter((([e])=>"avatar"!==e));try{yield(0,Vp.RE)(ys.Z.put,`/api/v2/user?${new URLSearchParams(i)}`,{server:t,headers:{accept:"application/json"}},n);const e=yield(0,Vp.RE)(dg,t);yield(0,Vp.$6)([(0,Am.Z)((0,Ys.BT)()),(0,Vp.gz)(gr.Z.actions.updateUserDetailsSucceeded({details:{friendlyName:e.friendlyName||"",thumb:e.thumb||""}}))])}catch(e){yield(0,Vp.gz)(gr.Z.actions.updateUserDetailsFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*cg({payload:e}){const{server:t,consent:r}=e;try{yield(0,Vp.RE)(ys.Z.put,"/api/v2/user/view_state_sync",{server:t,headers:{accept:"application/json"},params:{consent:r}}),yield(0,Vp.gz)(gr.Z.actions.updateViewStateSyncSucceeded({consent:r}))}catch(e){yield(0,Vp.gz)(gr.Z.actions.updateUserDetailsFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*dg(e){const{data:t}=yield(0,Vp.RE)(ys.Z.get,"/api/v2/user",{server:e,headers:{accept:"application/json"}});return Qp(t)}function*ug(){yield(0,Vp.$6)([qp(gr.Z.actions.updateUserDetails,lg),qp(gr.Z.actions.fetchUserDetails,ag),qp(gr.Z.actions.updateViewStateSyncConsent,cg),qp(gr.Z.actions.fetchViewStateSync,og)])}function*pg(){yield(0,Vp.$6)([(0,Vp.rM)(Zm),(0,Vp.rM)(Cm),(0,Vp.rM)(sh),(0,Vp.rM)(Ih),(0,Vp.rM)(Dh),(0,Vp.rM)(ug),(0,Vp.rM)(Nh),(0,Vp.rM)(Uh),(0,Vp.rM)(Wh),(0,Vp.rM)(ng)])}var mg=r(99318),hg=r(97853);const gg=function(e,t){return t?t.map((t=>{var r;let n;return n="field"in t?{key:t.key,field:t.field,value:String(t.value),type:t.type,title:String(t.title)}:"fastKey"in t?{key:t.fastKey,field:null!=(r=t.type)?r:e.filter,value:t.key,title:String(t.title)}:{field:e.filter,key:t.key,value:t.key,title:String(t.title)},n})):[]};function yg(e,t){const r=function(e){switch(e){case mg.A.Movie:return mg.pG.Movie;case mg.A.Show:return mg.pG.Show;case mg.A.Season:return mg.pG.Season;case mg.A.Episode:return mg.pG.Episode;case mg.A.Person:return mg.pG.Person;case mg.A.Artist:return mg.pG.Artist;case mg.A.Album:return mg.pG.Album;case mg.A.Track:return mg.pG.Track;case mg.A.Clip:return mg.pG.Clip;case mg.A.Photo:return mg.pG.Photo;case mg.A.PhotoAlbum:return mg.pG.PhotoAlbum;case mg.A.Playlist:return mg.pG.Playlist;case mg.A.Collection:return mg.pG.Collection;case mg.A.Author:return mg.pG.Author;case mg.A.Audiobook:return mg.pG.Audiobook;case mg.A.Chapter:return mg.pG.Chapter}}(t);if(!e)return e;"composite"===e.type?e.Rule.forEach((e=>{yg(e,t)})):e.type&&!e.field.includes(".")?(e.field=`${e.type}.${e.field}`,delete e.type):e.type||e.field.includes(".")||r===mg.pG.Movie||r===mg.pG.Photo||(e.field=`${r}.${e.field}`),e.type||!e.value||e.valueTitle||(e.valueTitle=e.value,e.value=encodeURIComponent(e.value))}function*vg({payload:e}){const{server:t,provider:r,key:n}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,n,{server:t,provider:r});yg((i=e.data.Query).Rule,i.type),yield(0,Vp.gz)(fr.Z.actions.fetchQuerySucceeded({query:e.data.Query}))}catch(e){yield(0,Vp.gz)(fr.Z.actions.fetchQueryFailed({error:ys.Z.toPlainErrorObject(e)}))}var i}function*fg({payload:e}){const{server:t,provider:r,filter:n}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,n.key,{server:t,provider:r}),i=gg(n,e.data.MediaContainer.Directory);yield(0,Vp.gz)(fr.Z.actions.fetchFilterOptionsSucceeded({filter:n,filterOptions:i}))}catch(e){yield(0,Vp.gz)(fr.Z.actions.fetchFilterOptionsFailed({filter:n,error:ys.Z.toPlainErrorObject(e)}))}}function*bg({payload:e}){var t;const{server:r,provider:n,key:i}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,i,{server:r,provider:n}),s=null==(t=e.data.MediaContainer.Metadata)?void 0:t[0];if(!s)throw new Error("Could not find metadata item in response");yield(0,Vp.gz)(fr.Z.actions.fetchCuratedSucceeded({curatedItem:(0,Sm.Z)({server:r,provider:n,data:s,container:e.data.MediaContainer}).metadataItem}))}catch(e){yield(0,Vp.gz)(fr.Z.actions.fetchCuratedFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Zg({payload:e}){var t;try{const{server:r,provider:n,key:i}=e,s=yield(0,Vp.RE)(ys.Z.get,i,{server:r,provider:n}),a=null==(t=s.data.MediaContainer.Metadata)?void 0:t[0];if(!a)throw new Error("Could not find metadata item in response");const{metadataItem:o}=(0,Sm.Z)({server:r,provider:n,container:s.data.MediaContainer,data:a}),l=(0,hg.Z)(r,n,o);if(!l)throw new Error("Could not find route to edit filters");(0,Wt.Z)(...l)}catch(e){yield(0,Am.Z)((0,st.wp)((0,Fe.Z)("There was a problem editing the filters for this item.")))}}function*Sg(){for(;;){const e=yield(0,Vp.A7)(fr.Z.actions.fetchQueryRequested,vg);yield(0,Vp.qn)(fr.Z.actions.reset),yield(0,Vp.al)(e)}}function*Pg(){for(;;){const e=yield(0,Vp.A7)(fr.Z.actions.fetchFilterOptionsRequested,fg);yield(0,Vp.qn)(fr.Z.actions.reset),yield(0,Vp.al)(e)}}function*Ig(){for(;;){const e=yield(0,Vp.A7)(fr.Z.actions.fetchCuratedRequested,bg);yield(0,Vp.qn)(fr.Z.actions.reset),yield(0,Vp.al)(e)}}function*Eg(){yield(0,Vp.Fm)(fr.Z.actions.editFiltersRequested,Zg)}function*wg(){yield(0,Vp.$6)([(0,Vp.rM)(Sg),(0,Vp.rM)(Pg),(0,Vp.rM)(Ig),(0,Vp.rM)(Eg)])}var Cg=r(93644);function*Mg({payload:e}){var t;const{server:r,provider:n,sourceURI:i,isSmart:s}=e;try{const a=(0,Cg.Z)(n,Om.zW.Playlist),o=(0,Cg.Z)(n,Om.zW.Collection);let l,c,d=ys.Z.post;if("key"in e?(d=ys.Z.put,l=b.Z.join([e.key,"items"]),c={uri:i}):"mediaType"in e?(l=null==a?void 0:a.key,c={type:e.mediaType,title:e.title,smart:s?1:0,uri:i}):(l=null==o?void 0:o.key,c={type:(0,Dm.Z)(e.metadataType),title:e.title,smart:s?1:0,uri:i,sectionId:e.contentDirectoryID}),!l)throw new Error("No key available to update curated item");const u=yield(0,Vp.RE)(d,l,{server:r,provider:n,params:c}),p=null==(t=u.data.MediaContainer.Metadata)?void 0:t[0];if(!p)throw new Error("Unable to find Metadata in playlist save response");const{metadataItem:m}=(0,Sm.Z)({server:r,provider:n,data:p,container:u.data.MediaContainer});yield(0,Vp.gz)(br.Z.actions.saveSucceeded({sourceURI:i,metadataItem:m}))}catch(t){yield(0,Vp.gz)(br.Z.actions.saveFailed({sourceURI:i,error:ys.Z.toPlainErrorObject(t)})),"key"in e&&(yield(0,Am.Z)((0,st.wp)((0,Fe.Z)("There was a problem updating this item."))))}}function*Dg({payload:e}){const{server:t,provider:r,sourceURI:n,containerKey:i,ratingKey:s}=e;try{yield(0,Vp.RE)(ys.Z.del,b.Z.join([i,s]),{server:t,provider:r}),yield(0,Vp.gz)(ar.Z.actions.repopulateRequested({sourceURI:n}))}catch(e){yield(0,Am.Z)((0,st.wp)((0,Fe.Z)("There was a problem removing this item.")))}}function*Og({payload:e}){const{server:t,provider:r,sourceURI:n,containerKey:i,ratingKey:s,afterID:a}=e;try{yield(0,Vp.RE)(ys.Z.put,b.Z.join([i,"items",s,"move"]),{server:t,provider:r,params:{after:a}})}catch(e){yield(0,Vp.gz)(ar.Z.actions.repopulateRequested({sourceURI:n})),yield(0,Am.Z)((0,st.wp)((0,Fe.Z)("There was a problem moving this item.")))}}function*Tg(){yield(0,Vp.Fm)(br.Z.actions.saveRequested,Mg)}function*xg(){yield(0,Vp.ib)(br.Z.actions.removeItemRequested,Dg)}function*Ag(){yield(0,Vp.ib)(br.Z.actions.moveItemRequested,Og)}function*kg(){yield(0,Vp.$6)([(0,Vp.rM)(Tg),(0,Vp.rM)(xg),(0,Vp.rM)(Ag)])}var Ng=r(56514),Rg=r(62248),Lg=r(14739);function*jg({payload:e}){var t;try{const r=Date.now(),n=yield(0,Vp.RE)(ys.Z.get,"/statistics/bandwidth",{server:e.server,params:{timespan:e.timespan,"at>":e.after}}),i=n.data.MediaContainer,s=n.headers.Date,a=s?function(e){const t=(0,Ng.Z)(e,"EEE, dd MMM yyyy HH:mm:ss 'GMT'",new Date);return(0,Rg.Z)(t).getTime()}(s):r;yield(0,Vp.gz)(Zr.Z.actions.bandwidthFetchSucceeded({data:null!=(t=null==i?void 0:i.StatisticsBandwidth)?t:[],requestTimestampMilliseconds:r,responseTimestampMilliseconds:a}))}catch(e){yield(0,Vp.gz)(Zr.Z.actions.bandwidthFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Vg({payload:e}){var t;try{const r=Date.now(),n=(yield(0,Vp.RE)(ys.Z.get,"/statistics/resources",{server:e.server,params:{timespan:(0,Lg.rG)(Lg.XH.RealTime)}})).data.MediaContainer;yield(0,Vp.gz)(Pr.Z.actions.resourcesFetchSucceeded({data:null!=(t=null==n?void 0:n.StatisticsResources)?t:[],requestTimestampMilliseconds:r}))}catch(e){yield(0,Vp.gz)(Pr.Z.actions.resourcesFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Ug({payload:e}){var t,r;try{const n=(yield(0,Vp.RE)(_g,e)).data.MediaContainer;yield(0,Vp.gz)(Er.Z.actions.topUsersFetchSucceeded({data:{statistics:null!=(t=null==n?void 0:n.StatisticsMedia)?t:[],accounts:null!=(r=null==n?void 0:n.Account)?r:[]}}))}catch(e){yield(0,Vp.gz)(Er.Z.actions.topUsersFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Fg({payload:e}){var t,r;try{const n=(yield(0,Vp.RE)(_g,e)).data.MediaContainer;yield(0,Vp.gz)(Sr.Z.actions.playHistoryFetchSucceeded({data:{statistics:null!=(t=null==n?void 0:n.StatisticsMedia)?t:[],accounts:null!=(r=null==n?void 0:n.Account)?r:[]}}))}catch(e){yield(0,Vp.gz)(Sr.Z.actions.playHistoryFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Bg({payload:e}){var t,r,n,i,s,a;try{const[o,l,c]=yield(0,Vp.$6)([(0,Vp.RE)(zg,e,mg.pG.Movie),(0,Vp.RE)(zg,e,mg.pG.Show),(0,Vp.RE)(zg,e,mg.pG.Artist)]);yield(0,Vp.gz)(Ir.Z.actions.topPlayedFetchSucceeded({data:{moviesStatistics:null!=(r=null==(t=o.data.MediaContainer)?void 0:t.Metadata)?r:[],tvStatistics:null!=(i=null==(n=l.data.MediaContainer)?void 0:n.Metadata)?i:[],musicStatistics:null!=(a=null==(s=c.data.MediaContainer)?void 0:s.Metadata)?a:[]}}))}catch(e){yield(0,Vp.gz)(Ir.Z.actions.topPlayedFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*_g(e){return yield(0,Vp.RE)(ys.Z.get,"/statistics/media",{server:e.server,params:{timespan:e.timespan,"at>":e.after}})}function*zg(e,t){return yield(0,Vp.RE)(ys.Z.get,"/library/all/top",{server:e.server,params:{accountID:e.accountID,type:qe.getMetadataType(t).id,"viewedAt>":e.viewedAt,limit:e.limit}})}function*Hg(){for(;;){const e=yield(0,Vp.Fm)(Zr.Z.actions.bandwidthFetchRequested,jg);yield(0,Vp.qn)([Zr.Z.actions.reset,Zr.Z.actions.bandwidthAbortRequested]),yield(0,Vp.al)(e)}}function*Wg(){for(;;){const e=yield(0,Vp.Fm)(Pr.Z.actions.resourcesFetchRequested,Vg);yield(0,Vp.qn)(Pr.Z.actions.reset),yield(0,Vp.al)(e)}}function*Gg(){for(;;){const e=yield(0,Vp.A7)(Er.Z.actions.topUsersFetchRequested,Ug);yield(0,Vp.qn)(Er.Z.actions.reset),yield(0,Vp.al)(e)}}function*Qg(){for(;;){const e=yield(0,Vp.A7)(Sr.Z.actions.playHistoryFetchRequested,Fg);yield(0,Vp.qn)(Sr.Z.actions.reset),yield(0,Vp.al)(e)}}function*$g(){for(;;){const e=yield(0,Vp.A7)(Ir.Z.actions.topPlayedFetchRequested,Bg);yield(0,Vp.qn)(Ir.Z.actions.reset),yield(0,Vp.al)(e)}}function*Kg(){yield(0,Vp.$6)([(0,Vp.rM)(Hg),(0,Vp.rM)(Wg),(0,Vp.rM)(Gg),(0,Vp.rM)(Qg),(0,Vp.rM)($g)])}var qg=r(77072),Yg=r(65915),Xg=r(35975),Jg=r(23642),ey=r(78389),ty=r(93084),ry=r(56723),ny=r(82628),iy=Object.defineProperty,sy=Object.defineProperties,ay=Object.getOwnPropertyDescriptors,oy=Object.getOwnPropertySymbols,ly=Object.prototype.hasOwnProperty,cy=Object.prototype.propertyIsEnumerable,dy=(e,t,r)=>t in e?iy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function uy(e,t){if(null==t?void 0:t.DisplayFields)return t;const r=(0,ty.Z)(e.type);if(!r)return t;const n=(0,ry.P)(e.type);return e.style===ey.n.Shelf&&e.hubIdentifier&&e.hubIdentifier.startsWith("external.")&&n.push(Jg.PD.SourceTitle),i=((e,t)=>{for(var r in t||(t={}))ly.call(t,r)&&dy(e,r,t[r]);if(oy)for(var r of oy(t))cy.call(t,r)&&dy(e,r,t[r]);return e})({},t),s={DisplayFields:[{type:r,subtype:e.subtype,fields:n}]},sy(i,ay(s));var i,s}function py(e){return"relatedAlbums"===e.hubIdentifier&&e.size>1?ey.n.WideShelf:e.style}function my({server:e,provider:t,user:r,contentDirectoryID:n,pinnedContentDirectoryID:i,excludedHubIdentifiers:s,data:a}){var o;const l=null!=(o=null==a?void 0:a.MediaContainer)?o:{},c=l,{Hub:d=[]}=c,u=((e,t)=>{var r={};for(var n in e)ly.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&oy)for(var n of oy(e))t.indexOf(n)<0&&cy.call(e,n)&&(r[n]=e[n]);return r})(c,["Hub"]);return function(e,t,r){var n;const i=-1!==(null==(n=null==r?void 0:r.features)?void 0:n.findIndex((e=>e.uuid===Da.Xh)));return(null==t?void 0:t.identifier)===si.Xp&&i&&e.splice(1,0,{hubIdentifier:Xg.F.StreamingServicesUpsell,style:ey.n.Upsell,size:0,more:!1,random:!0,title:"",type:ey.U.Mixed}),e}(d,t,r).reduce(((r,a)=>{var o,c,d;if((null==s?void 0:s.length)&&(null==s?void 0:s.some((e=>e===a.hubIdentifier))))return r;const p=a.key?b.Z.join(a.key,{contentDirectoryID:null==n?void 0:n.join(","),pinnedContentDirectoryID:null==i?void 0:i.join(",")}):void 0,m=null!=(o=a.source)?o:(0,Wu.Z)({serverIdentifier:e.machineIdentifier,providerIdentifier:null==t?void 0:t.identifier}),h=p?`${m}${p}`:`${m}/${a.hubIdentifier}`;let g=a.totalSize;null==g&&(g=a.more?void 0:a.size),r.hubs.push({source:m,sourceURI:h,key:p,isStale:!1,initialSize:a.size,style:py(a),attribution:a.attribution,autoAdvanceDelayMs:a.autoAdvanceDelayMs,context:a.context,hubIdentifier:a.hubIdentifier,Meta:uy(a,a.Meta||l.Meta),more:a.more,placeholder:a.placeholder,random:a.random,subtype:a.subtype,title:a.title,type:a.type});const y=null!=(d=null!=(c=a.Metadata)?c:a.Directory)?d:[],{metadataItems:v,metadataItemStates:f}=(0,ny.Z)({server:e,provider:t,data:y,container:u});return r.metadataLists.push({sourceURI:h,items:v,totalSize:g,offset:0,isPending:!1,isPopulated:!0,error:null}),Object.assign(r.metadataItemStates,f),r}),{title:u.title,meta:u.Meta,hubs:[],metadataLists:[],metadataItemStates:{}})}var hy=r(42611),gy=Object.defineProperty,yy=Object.defineProperties,vy=Object.getOwnPropertyDescriptors,fy=Object.getOwnPropertySymbols,by=Object.prototype.hasOwnProperty,Zy=Object.prototype.propertyIsEnumerable,Sy=(e,t,r)=>t in e?gy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Py=(e,t)=>{for(var r in t||(t={}))by.call(t,r)&&Sy(e,r,t[r]);if(fy)for(var r of fy(t))Zy.call(t,r)&&Sy(e,r,t[r]);return e};function*Iy({payload:e}){const{server:t,provider:r,sourceURI:n,metadataListSourceURI:i,params:s}=e;var a,o;n!==i&&(yield(0,Vp.gz)(or.Z.actions.added({metadataLists:[{sourceURI:n,items:[],offset:0}],metadataItemStates:{}}))),yield(0,Vp.gz)(or.Z.actions.fetchRangeRequested({server:t,provider:r,sourceURI:n,params:(a=Py({},s),o={includeAdvanced:1,includeMeta:1},yy(a,vy(o))),startIndex:0,size:50}))}function*Ey({payload:e}){const{server:t,provider:r,sourceURI:n}=e,{key:i}=(0,ah.Z)(n);try{const e=yield(0,Vp.RE)(ys.Z.get,i,{server:t,provider:r,params:{count:Yg.HE,includeLibraryPlaylists:1,includeStations:1,includeRecentChannels:1,includeMeta:1,includeExternalMetadata:1,excludeFields:"summary"}}),s=my({server:t,provider:r,user:yield(0,hy.Z)(qg.Z),data:e.data});yield(0,Vp.$6)([(0,Vp.gz)(or.Z.actions.added({metadataLists:s.metadataLists,metadataItemStates:s.metadataItemStates})),(0,Vp.gz)(Cr.Z.actions.fetchHubsSucceeded({sourceURI:n,data:s}))])}catch(e){yield(0,Vp.gz)(Cr.Z.actions.fetchHubsFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*wy(){yield(0,Vp.gw)(6e4),yield(0,Vp.gz)(Cr.Z.actions.markHubsStale())}function*Cy({payload:e}){const{server:t,provider:r,filter:n}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,n.key,{server:t,provider:r}),i=gg(n,e.data.MediaContainer.Directory);yield(0,Vp.gz)(Cr.Z.actions.fetchFilterOptionsSucceeded({filter:n,filterOptions:i}))}catch(e){yield(0,Vp.gz)(Cr.Z.actions.fetchFilterOptionsFailed({filter:n,error:ys.Z.toPlainErrorObject(e)}))}}function*My({payload:e}){var t;const{server:r,provider:n,key:i}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,i,{server:r,provider:n});yield(0,Vp.gz)(Cr.Z.actions.fetchFirstCharactersSucceeded({key:i,firstCharacters:null!=(t=e.data.MediaContainer.Directory)?t:[]}))}catch(e){yield(0,Vp.gz)(Cr.Z.actions.fetchFirstCharactersFailed({key:i,error:ys.Z.toPlainErrorObject(e)}))}}function*Dy(){for(;;){const e=yield(0,Vp.A7)(Cr.Z.actions.initializeListRequested,Iy);yield(0,Vp.qn)(Cr.Z.actions.reset),yield(0,Vp.al)(e)}}function*Oy(){for(;;){const e=yield(0,Vp.A7)(Cr.Z.actions.fetchHubsRequested,Ey);yield(0,Vp.qn)([Cr.Z.actions.reset,Cr.Z.actions.resetHubs,Cr.Z.actions.markHubsStaleRequested]),yield(0,Vp.al)(e)}}function*Ty(){for(;;){yield(0,Vp.qn)(Cr.Z.actions.markHubsStaleRequested);const e=yield(0,Vp.RE)(wy);yield(0,Vp.qn)(Cr.Z.actions.markHubsStaleCanceled),yield(0,Vp.al)(e)}}function*xy(){for(;;){const e=yield(0,Vp.A7)(Cr.Z.actions.fetchFilterOptionsRequested,Cy);yield(0,Vp.qn)(Cr.Z.actions.reset),yield(0,Vp.al)(e)}}function*Ay(){for(;;){const e=yield(0,Vp.A7)(Cr.Z.actions.fetchFirstCharactersRequested,My);yield(0,Vp.qn)(Cr.Z.actions.reset),yield(0,Vp.al)(e)}}function*ky(){yield(0,Vp.$6)([(0,Vp.rM)(Dy),(0,Vp.rM)(Oy),(0,Vp.rM)(Ty),(0,Vp.rM)(xy),(0,Vp.rM)(Ay)])}var Ny=r(12559),Ry=r(17939),Ly=r(9922);const jy=(0,Ry.Z)((0,Oa.P1)(Ly.Z,(e=>e.embeddedServer),((e,t)=>{const r=e[t];return(0,Ic.Z)(r)})),(e=>e));var Vy=r(51496),Uy=Object.defineProperty,Fy=Object.defineProperties,By=Object.getOwnPropertyDescriptors,_y=Object.getOwnPropertySymbols,zy=Object.prototype.hasOwnProperty,Hy=Object.prototype.propertyIsEnumerable,Wy=(e,t,r)=>t in e?Uy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Gy=(e,t)=>{for(var r in t||(t={}))zy.call(t,r)&&Wy(e,r,t[r]);if(_y)for(var r of _y(t))Hy.call(t,r)&&Wy(e,r,t[r]);return e};function*Qy({payload:e}){yield(0,Vp.RE)(ev,[e.metadataItem])}function*$y({payload:e}){const t=e.metadataLists.reduce(((e,{items:t})=>e.concat(t)),[]);yield(0,Vp.RE)(ev,t)}function*Ky({payload:e}){yield(0,Vp.RE)(ev,e.data.items)}function*qy({payload:e}){var t,r;const{sourceURI:n,guid:i,useSelected:s}=e;try{const e=yield(0,hy.Z)(jy),{providerIdentifier:a,serverIdentifier:o,ratingKey:l}=(0,ah.Z)(n),c=(0,Wu.Z)({serverIdentifier:o,providerIdentifier:a});if(!l||!c)throw new Error("Unable to create a subscription for this item");yield(0,Vp.RE)(ys.Z.post,"media/providers",{server:e,params:{url:c}});const d=(null==(r=null==(t=(yield(0,Vp.RE)(ys.Z.get,"media/subscriptions/template",{server:e,params:{source:c,ratingKey:l,guid:i}})).data.MediaContainer.SubscriptionTemplate)?void 0:t[0])?void 0:r.MediaSubscription)||[],u=s?d.find((({selected:e})=>e)):d[0];if(!u)throw new Error("Unable to create a subscription for this item");u.Setting.some((({hidden:e})=>!e))?yield(0,Vp.gz)(Mr.Z.actions.subscriptionTemplateChanged({sourceURI:n,template:u})):yield(0,Vp.gz)(Mr.Z.actions.subscriptionCreateRequested({sourceURI:n,template:u}))}catch(e){yield(0,Vp.gz)(Mr.Z.actions.subscriptionCreateFailed({sourceURI:n,error:ys.Z.toPlainErrorObject(e)}))}}function*Yy({payload:e}){var t,r,n;const{sourceURI:i,template:{type:s,targetLibrarySectionID:a,parameters:o,Setting:l},settings:c={}}=e;try{const e=yield(0,hy.Z)(jy),p={};for(const{id:e,value:r}of l)p[e]="oneShot"===e?"false":null!=(t=c[e])?t:r;const m=b.Z.parseParams(o),h=null==(n=null==(r=(yield(0,Vp.RE)(ys.Z.post,"media/subscriptions",{server:e,params:(d=Gy({},m),u={type:s,targetLibrarySectionID:a,prefs:p},Fy(d,By(u)))})).data.MediaContainer)?void 0:r.MediaSubscription)?void 0:n[0].key;if(!h)throw new Error("The new subscription did not contain an identifier");yield(0,Vp.gz)(Mr.Z.actions.subscriptionCreateSucceeded({id:h,sourceURI:i,type:s}))}catch(e){yield(0,Vp.gz)(Mr.Z.actions.subscriptionCreateFailed({sourceURI:i,error:ys.Z.toPlainErrorObject(e)}))}var d,u}function*Xy({payload:e}){const{id:t,sourceURI:r}=e;try{const e=yield(0,hy.Z)(jy);yield(0,Vp.RE)(ys.Z.del,b.Z.join(["media/subscriptions",t]),{server:e}),yield(0,Vp.gz)(Mr.Z.actions.subscriptionDeleteSucceeded({sourceURI:r}))}catch(e){yield(0,Vp.gz)(Mr.Z.actions.subscriptionDeleteFailed({sourceURI:r,error:ys.Z.toPlainErrorObject(e)}))}}function*Jy({payload:e}){const{type:t,Context:r}=e.activity;if(!(null==r?void 0:r.source)||t!==Ny.EW)return;const{ratingKey:n,source:i}=r,{serverIdentifier:s,providerIdentifier:a}=(0,ah.Z)(i),o=(0,Wu.Z)({serverIdentifier:s,providerIdentifier:a,key:`/library/metadata/${n}`});try{yield(0,Vp.gz)(ar.Z.actions.repopulateRequested({sourceURI:o}))}catch(e){yield(0,Vp.gz)(Mr.Z.actions.subscriptionCreateFailed({sourceURI:o,error:ys.Z.toPlainErrorObject(e)}))}}function*ev(e){try{const n=yield(0,hy.Z)(jy),i=((yield(0,Vp.RE)(ys.Z.get,"media/providers",{server:n,params:{includeStorage:1}})).data.MediaContainer.MediaProvider||[]).map((e=>({id:String(e.id),source:e.source})));yield(0,Vp.gz)(Mr.Z.actions.providersFetchSucceeded({providerSections:i}));const s={};for(const{source:e,id:t}of i)e&&(s[e]=t);const a={};e.forEach((e=>{a[e.source]?a[e.source].push(e):a[e.source]=[e]}));const o=[];for(const[e,i]of Object.entries(a)){const a=s[e];if(!a)break;const l={},c=[];for(const e of i)c.push(e.ratingKey),l[e.ratingKey]=e;const d=c.join(","),u=b.Z.join(["media/providers",a,"media/subscriptions/mapping",d]),p=(yield(0,Vp.RE)(ys.Z.get,u,{server:n,params:{includeStorage:1}})).data.MediaContainer.MediaSubscription||[];for(const{id:e,itemRatingKey:n,type:i}of p){const s=l[n];o.push({id:e,sourceURI:s.sourceURI,subscription:Vy.y.Saved,type:i,relation:(t=i,r=(0,Dm.Z)(s.type),t===r?Vy.F.Self:t<r?Vy.F.Ancestors:Vy.F.Descendants),progress:100})}}yield(0,Vp.gz)(Mr.Z.actions.downloadsFetchSucceeded({items:e,downloads:o}))}catch(e){yield(0,Vp.gz)(Mr.Z.actions.downloadsFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}var t,r}function*tv(){yield(0,Vp.ib)(Ur.Z.actions.metadataItemFetchSucceeded,Qy)}function*rv(){yield(0,Vp.ib)(or.Z.actions.added,$y)}function*nv(){yield(0,Vp.ib)(or.Z.actions.repopulateRangeSucceeded,Ky)}function*iv(){yield(0,Vp.ib)(or.Z.actions.fetchRangeSucceeded,Ky)}function*sv(){yield(0,Vp.ib)(or.Z.actions.fetchAllSucceeded,Ky)}function*av(){yield(0,Vp.Fm)(Mr.Z.actions.subscriptionTemplatesFetchRequested,qy)}function*ov(){yield(0,Vp.Fm)(Mr.Z.actions.subscriptionCreateRequested,Yy)}function*lv(){yield(0,Vp.Fm)(Mr.Z.actions.subscriptionDeleteRequested,Xy)}function*cv(){yield(0,Vp.ib)(dr.Z.actions.activityFinished,Jy)}function*dv(){yield(0,Vp.$6)(ne.Z.allowSyncDownload?[(0,Vp.rM)(tv),(0,Vp.rM)(rv),(0,Vp.rM)(iv),(0,Vp.rM)(sv),(0,Vp.rM)(nv),(0,Vp.rM)(av),(0,Vp.rM)(ov),(0,Vp.rM)(lv),(0,Vp.rM)(cv)]:[])}var uv=r(39977),pv=r(81742),mv=r(26325),hv=r(50990),gv=r(83342),yv=r(81744),vv=Object.defineProperty,fv=Object.defineProperties,bv=Object.getOwnPropertyDescriptors,Zv=Object.getOwnPropertySymbols,Sv=Object.prototype.hasOwnProperty,Pv=Object.prototype.propertyIsEnumerable,Iv=(e,t,r)=>t in e?vv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Ev(e){return(null!=e?e:[]).map((e=>{return e.enabled?((0,Kh.ZX)(e,"enabled"),e):(t=((e,t)=>{for(var r in t||(t={}))Sv.call(t,r)&&Iv(e,r,t[r]);if(Zv)for(var r of Zv(t))Pv.call(t,r)&&Iv(e,r,t[r]);return e})({},e),r={enabled:!!e.lineupIdentifier},fv(t,bv(r)));var t,r}))}var wv=r(90144),Cv=r(9423);function Mv(e){var t,r;const n=$h()(e);return(0,Kh.Dq)(n,"key"),(0,Kh.Dq)(n,"source"),(0,Kh.dL)(n,"tuners"),n.sources=null==(r=null==(t=e.sources)?void 0:t.split(","))?void 0:r.map((e=>{const t=(0,wv.su)(yv.dd).find((t=>t===e));return(0,Cv.Z)(t,`Unknown Media Grabber Device Source Type ${e}`),t})),n.ChannelMapping=Ev(n.ChannelMapping),n}function Dv({data:e}){var t;return(null!=(t=e.Device)?t:[]).map(Mv)}function Ov({data:e}){var t,r;const n=null==(t=e.Dvr)?void 0:t[0];if(!n)return;const i=$h()(n);return(0,Kh.Dq)(i,"key"),i.Device=null==(r=null==n?void 0:n.Device)?void 0:r.map(Mv),i}var Tv=(e=>(e.Int="int",e.Text="text",e.Bool="bool",e.Enum="enum",e.Double="double",e))(Tv||{}),xv=Object.getOwnPropertySymbols,Av=Object.prototype.hasOwnProperty,kv=Object.prototype.propertyIsEnumerable;function Nv(e,t){switch(e){case Tv.Int:case Tv.Enum:return be.Z.parseInteger(t);case Tv.Bool:return be.Z.parseBoolean(t);case Tv.Double:return be.Z.parseFloat(t);default:return t}}var Rv=Object.defineProperty,Lv=Object.getOwnPropertySymbols,jv=Object.prototype.hasOwnProperty,Vv=Object.prototype.propertyIsEnumerable,Uv=(e,t,r)=>t in e?Rv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fv=(e,t)=>{for(var r in t||(t={}))jv.call(t,r)&&Uv(e,r,t[r]);if(Lv)for(var r of Lv(t))Vv.call(t,r)&&Uv(e,r,t[r]);return e};function*Bv({payload:e}){var t;const{server:r}=e;try{const e=yield(0,Vp.RE)(ys.Z.post,"/media/grabbers/devices/discover",{server:r,timeout:0});yield(0,Vp.gz)(Dr.ZP.actions.devicesDiscoverSucceeded({server:r,data:Dv({server:r,data:null==(t=e.data)?void 0:t.MediaContainer})}))}catch(e){yield(0,Vp.gz)(Dr.ZP.actions.setupErrorMessageAdded({message:(0,Fe.Z)("There was a problem discovering devices")})),yield(0,Vp.gz)(Dr.ZP.actions.devicesDiscoverFailed({server:r,error:ys.Z.toPlainErrorObject(e)}))}}function*_v({payload:e}){var t;const{server:r}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,"/media/grabbers/devices",{server:r});yield(0,Vp.gz)(Dr.ZP.actions.devicesFetchSucceeded({server:r,data:Dv({server:r,data:null==(t=e.data)?void 0:t.MediaContainer})}))}catch(e){yield(0,Vp.gz)(Dr.ZP.actions.devicesFetchFailed({server:r,error:ys.Z.toPlainErrorObject(e)}))}}function*zv({payload:e}){var t,r;const{server:n,deviceKey:i}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,b.Z.join(["/media/grabbers/devices",i,"channels"]),{server:n});yield(0,Vp.gz)(Dr.ZP.actions.deviceChannelsFetchSucceeded({server:n,deviceKey:i,data:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.DeviceChannel)?r:[]}))}catch(e){yield(0,Vp.gz)(Dr.ZP.actions.setupErrorMessageAdded({message:(0,Fe.Z)("There was a problem getting the channels for your device")})),yield(0,Vp.gz)(Dr.ZP.actions.deviceChannelsFetchFailed({deviceKey:i,error:ys.Z.toPlainErrorObject(e)}))}}function*Hv({payload:e}){var t,r;const{server:n,deviceKey:i,source:s,prefs:a,network:o,country:l}=e;try{const e=yield(0,Vp.RE)(ys.Z.post,b.Z.join(["/media/grabbers/devices",i,"scan"]),{server:n,params:{source:s,prefs:a,network:o,country:l}});if(e.headers["x-plex-activity"])yield(0,Vp.gz)(Dr.ZP.actions.scanPrefsAndNetworksReset());else{const r=function({data:e}){var t;return(null!=(t=e.Setting)?t:[]).map((e=>{const t=e,{enumValues:r}=t,n=((e,t)=>{var r={};for(var n in e)Av.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&xv)for(var n of xv(e))t.indexOf(n)<0&&kv.call(e,n)&&(r[n]=e[n]);return r})(t,["enumValues"]);return n.default&&(n.default=Nv(n.type,n.default)),n.value=Nv(n.type,n.value),(0,Kh.ZX)(n,"advanced"),(0,Kh.ZX)(n,"hidden"),r&&(n.enumValues=r.split("|").map((e=>{const[t,r=t]=e.split(":");return{label:decodeURIComponent(r),value:Nv(n.type,t)}}))),n}))}({server:n,data:null==(t=e.data)?void 0:t.MediaContainer});(null==r?void 0:r.length)&&(yield(0,Vp.gz)(Dr.ZP.actions.scanPrefsAdded({settings:r})))}}catch(e){const t=ys.Z.toPlainErrorObject(e);yield(0,Vp.gz)(Dr.ZP.actions.setupErrorMessageAdded({message:null!=(r=null==t?void 0:t.message)?r:(0,Fe.Z)("There was a problem scanning channels")})),yield(0,Vp.gz)(Dr.ZP.actions.deviceChannelsScanFailed())}}function*Wv({payload:e}){const{server:t,deviceKey:r}=e;try{yield(0,Vp.RE)(ys.Z.del,b.Z.join(["/media/grabbers/devices",r,"scan"]),{server:t})}catch(e){yield(0,Vp.gz)(Dr.ZP.actions.setupErrorMessageAdded({message:(0,Fe.Z)("There was a problem canceling the current channel scan")})),yield(0,Vp.gz)(Dr.ZP.actions.deviceChannelsCancelScanFailed())}}function*Gv({payload:e}){const{server:t,deviceKey:r,mappings:n}=e;try{const e=yield(0,Vp.Ys)((0,pv.Z)(r)),i=[],s={};Object.values(n).forEach((({key:t,channelKey:r,lineupIdentifier:n,enabled:a})=>{const o=e.channels.find((e=>e.identifier===t)),l=null==o?void 0:o.drm;a&&r&&n&&!l&&(i.push(t),s[`channelMappingByKey[${t}]`]=r,s[`channelMapping[${t}]`]=n)})),yield(0,Vp.RE)(ys.Z.put,b.Z.join(["/media/grabbers/devices",r,"channelmap"]),{server:t,params:Fv({channelsEnabled:i.toString()},s)}),yield(0,Vp.gz)(Dr.ZP.actions.deviceChannelMappingsSaveSucceeded())}catch(e){yield(0,Vp.gz)(Dr.ZP.actions.deviceChannelMappingsSaveFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Qv({payload:e}){const{server:t,deviceKey:r,enabled:n,title:i}=e;try{yield(0,Vp.RE)(ys.Z.put,b.Z.join(["/media/grabbers/devices",r]),{server:t,params:{title:i,enabled:n?1:0}}),yield(0,Vp.gz)(Dr.ZP.actions.deviceEnableSucceeded({deviceKey:r,enabled:n}))}catch(e){yield(0,Vp.gz)(Dr.ZP.actions.deviceEnableFailed())}}function*$v({payload:e}){var t;const{server:r,uri:n}=e;let i=(0,Fe.Z)("There was a problem adding the device: {1}",n);try{const e=Dv({server:r,data:null==(t=(yield(0,Vp.RE)(ys.Z.post,"/media/grabbers/tv.plex.grabbers.hdhomerun/devices",{server:r,params:{uri:n}})).data)?void 0:t.MediaContainer});if(0===e.length)throw i=(0,Fe.Z)("No device found at {1}",n),new Error;yield(0,Vp.gz)(Dr.ZP.actions.deviceAddSucceeded({server:r,data:e[0]}))}catch(e){yield(0,Vp.gz)(Dr.ZP.actions.setupErrorMessageAdded({message:i})),yield(0,Vp.gz)(Dr.ZP.actions.deviceAddFailed({server:r,error:ys.Z.toPlainErrorObject(e)}))}}function*Kv({payload:e}){var t;const{server:r,dvrID:n}=e;try{const e=n?b.Z.join(["/livetv/dvrs",n]):"/livetv/dvrs",i=yield(0,Vp.RE)(ys.Z.get,e,{server:r});yield(0,Vp.gz)(Dr.ZP.actions.dvrFetchSucceeded({dvr:Ov({server:r,data:null==(t=i.data)?void 0:t.MediaContainer})}))}catch(e){yield(0,Vp.gz)(Dr.ZP.actions.dvrFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*qv({payload:e}){var t;const{server:r,device:n,channelMappings:i}=e,s=yield(0,Vp.Ys)(gv.Z);try{const{success:e,failure:a}=yield(0,Vp.RE)(tf,r,n.key,i,s);if(a)throw new Error;if(e){const{selectedCountry:e,selectedLanguage:i}=yield(0,Vp.Ys)(hv.Z),a=yield(0,Vp.RE)(ys.Z.post,"/livetv/dvrs",{server:r,params:{device:n.uuid,lineup:null==s?void 0:s.map((e=>e.uuid)),language:null==i?void 0:i.code,country:null==e?void 0:e.code}});yield(0,Vp.gz)(Dr.ZP.actions.dvrSaveSucceeded({activityUUID:a.headers["x-plex-activity"],dvr:Ov({server:r,data:null==(t=a.data)?void 0:t.MediaContainer})})),yield(0,Vp.gz)(Dr.ZP.actions.devicesFetchRequested({server:r})),yield(0,Am.Z)((0,uv.oP)({serverEntityID:r.entityID}))}}catch(e){yield(0,Vp.gz)(Dr.ZP.actions.setupErrorMessageAdded({message:(0,Fe.Z)("There was a problem saving your DVR. Please try again.")})),yield(0,Vp.gz)(Dr.ZP.actions.dvrSaveFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Yv({payload:e}){const{server:t,dvrID:r}=e;try{yield(0,Vp.RE)(ys.Z.del,b.Z.join(["/livetv/dvrs",r]),{server:t,timeout:0}),yield(0,Vp.gz)(Dr.ZP.actions.dvrDeleteSucceeded())}catch(e){yield(0,Am.Z)((0,st.wp)((0,Fe.Z)("There was a problem removing your DVR")))}}function*Xv({payload:e}){var t;const{server:r,dvrID:n,deviceKey:i,channelMappings:s}=e,a=yield(0,Vp.Ys)(gv.Z);try{const{success:e,failure:o}=yield(0,Vp.RE)(tf,r,i,s,a);if(o)throw new Error;if(e){yield(0,Vp.RE)(ef,r,n,a);const e=yield(0,Vp.RE)(ys.Z.put,b.Z.join(["/livetv/dvrs",n,"devices",i]),{server:r});yield(0,Vp.gz)(Dr.ZP.actions.addDVRDeviceSucceeded({activityUUID:e.headers["x-plex-activity"],dvr:Ov({server:r,data:null==(t=e.data)?void 0:t.MediaContainer})})),yield(0,Vp.gz)(Dr.ZP.actions.devicesFetchRequested({server:r})),yield(0,Am.Z)((0,uv.oP)({serverEntityID:r.entityID}))}}catch(e){yield(0,Vp.gz)(Dr.ZP.actions.setupErrorMessageAdded({message:(0,Fe.Z)("There was a problem adding a new device to your DVR. Please try again.")})),yield(0,Vp.gz)(Dr.ZP.actions.addDVRDeviceFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Jv({payload:e}){const{server:t,dvrID:r,deviceKey:n}=e;try{yield(0,Vp.RE)(ys.Z.del,b.Z.join(["/livetv/dvrs",r,"devices",n]),{server:t}),yield(0,Vp.gz)(Dr.ZP.actions.removeDVRDeviceSucceeded({deviceKey:n}))}catch(e){yield(0,Am.Z)((0,st.wp)((0,Fe.Z)("There was a problem removing a DVR device"))),yield(0,Vp.gz)(Dr.ZP.actions.removeDVRDeviceFailed())}}function*ef(e,t,r){var n;const{selectedDVR:i}=yield(0,Vp.Ys)(mv.Z);let s=r;(null==(n=i.dvr)?void 0:n.Lineup)&&(s=s.filter((e=>{var t,r;return!(null==(r=null==(t=i.dvr)?void 0:t.Lineup)?void 0:r.find((t=>t.id===e.uuid)))}))),yield(0,Vp.$6)(s.map((r=>(0,Vp.RE)(ys.Z.put,b.Z.join(["/livetv/dvrs",t,"lineups"]),{server:e,params:{lineup:r.uuid}}))))}function*tf(e,t,r,n){var i;return yield(0,Vp.gz)(Dr.ZP.actions.deviceChannelMappingsSaveRequested({server:e,deviceKey:t,mappings:r})),yield(0,Vp.gz)(Dr.ZP.actions.deviceEnableRequested({server:e,deviceKey:t,enabled:!0,title:null==(i=null==n?void 0:n[0])?void 0:i.title})),yield(0,Vp.S3)({success:(0,Vp.$6)([(0,Vp.qn)(Dr.ZP.actions.deviceChannelMappingsSaveSucceeded),(0,Vp.qn)(Dr.ZP.actions.deviceEnableSucceeded)]),failure:(0,Vp.S3)([(0,Vp.qn)(Dr.ZP.actions.deviceChannelMappingsSaveFailed),(0,Vp.qn)(Dr.ZP.actions.deviceEnableFailed)])})}function*rf(){for(;;){const e=yield(0,Vp.A7)(Dr.ZP.actions.devicesDiscoverRequested,Bv);yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*nf(){for(;;){const e=yield(0,Vp.A7)(Dr.ZP.actions.devicesFetchRequested,_v);yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*sf(){for(;;){const e=yield km(Dr.ZP.actions.deviceChannelsFetchRequested,zv,(({payload:e})=>e.deviceKey));yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*af(){for(;;){const e=yield km(Dr.ZP.actions.deviceChannelsScanRequested,Hv,(({payload:e})=>e.deviceKey));yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*of(){for(;;){const e=yield km(Dr.ZP.actions.deviceChannelsCancelScanRequested,Wv,(({payload:e})=>e.deviceKey));yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*lf(){for(;;){const e=yield km(Dr.ZP.actions.deviceChannelMappingsSaveRequested,Gv,(({payload:e})=>e.deviceKey));yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*cf(){for(;;){const e=yield km(Dr.ZP.actions.deviceEnableRequested,Qv,(({payload:e})=>e.deviceKey));yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*df(){for(;;){const e=yield(0,Vp.A7)(Dr.ZP.actions.dvrFetchRequested,Kv);yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*uf(){for(;;){const e=yield(0,Vp.A7)(Dr.ZP.actions.deviceAddRequested,$v);yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*pf(){for(;;){const e=yield(0,Vp.A7)(Dr.ZP.actions.dvrSaveRequested,qv);yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*mf(){for(;;){const e=yield(0,Vp.A7)(Dr.ZP.actions.dvrDeleteRequested,Yv);yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*hf(){for(;;){const e=yield(0,Vp.A7)(Dr.ZP.actions.addDVRDeviceRequested,Xv);yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*gf(){for(;;){const e=yield(0,Vp.A7)(Dr.ZP.actions.removeDVRDeviceRequested,Jv);yield(0,Vp.qn)(Dr.ZP.actions.reset),yield(0,Vp.al)(e)}}function*yf(){yield(0,Vp.$6)([(0,Vp.rM)(rf),(0,Vp.rM)(nf),(0,Vp.rM)(sf),(0,Vp.rM)(af),(0,Vp.rM)(of),(0,Vp.rM)(lf),(0,Vp.rM)(cf),(0,Vp.rM)(uf),(0,Vp.rM)(df),(0,Vp.rM)(pf),(0,Vp.rM)(mf),(0,Vp.rM)(hf),(0,Vp.rM)(gf)])}var vf=Object.defineProperty,ff=Object.defineProperties,bf=Object.getOwnPropertyDescriptors,Zf=Object.getOwnPropertySymbols,Sf=Object.prototype.hasOwnProperty,Pf=Object.prototype.propertyIsEnumerable,If=(e,t,r)=>t in e?vf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function*Ef({payload:e}){var t,r,n;const{server:i,device:s,lineups:a}=e,o=a.map((e=>e.uuid));try{const e=yield(0,Vp.RE)(Af,i,o),t=Ev((yield(0,Vp.RE)(ys.Z.get,"/livetv/epg/channelmap",{server:i,params:{device:s.uuid,lineup:o}})).data.MediaContainer.ChannelMapping);yield(0,Vp.gz)(Or.ZP.actions.channelMappingsFetchSucceeded({channelMappings:t,lineupChannels:e}))}catch(e){yield(0,Vp.gz)(Or.ZP.actions.channelMappingsFetchFailed({error:ys.Z.toPlainErrorObject(e)}));let i=(0,Fe.Z)("There was a problem fetching channel mappings. Please try again later.");(null==(n=null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.MediaContainer)?void 0:n.message)&&(i=e.response.data.MediaContainer.message),yield(0,Vp.gz)(Dr.ZP.actions.setupErrorMessageAdded({message:i}))}}function*wf({payload:e}){const{server:t,device:r,lineupGroup:n}=e;try{yield(0,Vp.gz)(Dr.ZP.actions.setupErrorMessageRemoved());const e=yield(0,Vp.RE)(ys.Z.get,b.Z.join("/livetv/epg/lineup",{device:r.uuid,lineupGroup:n.uuid}),{server:t});yield(0,Vp.gz)(Or.ZP.actions.bestEPGLineupSearchSucceeded({lineupGroup:n,data:e.headers["x-plex-activity"]}))}catch(e){yield(0,Vp.gz)(Dr.ZP.actions.setupErrorMessageAdded({message:(0,Fe.Z)("There was a problem mapping channels")}))}}function*Cf({payload:e}){var t,r;const{server:n}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,"/livetv/epg/countries",{server:n});yield(0,Vp.gz)(Or.ZP.actions.epgCountriesFetchSucceeded({server:n,data:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.Country)?r:[]}))}catch(e){yield(0,Vp.gz)(Or.ZP.actions.epgCountriesFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Mf({payload:e}){var t,r;const{server:n,country:i}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,b.Z.join(["/livetv/epg/countries",i.key,"regions"]),{server:n});yield(0,Vp.gz)(Or.ZP.actions.epgCountryRegionsFetchSucceeded({data:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.Region)?r:[]}))}catch(e){yield(0,Vp.gz)(Or.ZP.actions.epgCountryRegionsFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Df({payload:e}){var t,r;const{server:n}=e;try{const e=yield(0,Vp.RE)(ys.Z.get,"/livetv/epg/languages",{server:n});yield(0,Vp.gz)(Or.ZP.actions.epgLanguagesFetchSucceeded({data:null!=(r=null==(t=e.data.MediaContainer)?void 0:t.Language)?r:[]}))}catch(e){yield(0,Vp.gz)(Or.ZP.actions.epgLanguagesFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Of({payload:e}){var t,r;const{server:n,country:i,region:s,postalCode:a}=e,o=["/livetv/epg/countries",i.key],l={};i.flavor===yv.Y_.Regions&&s?o.push(s.key):l.postalCode=a;const c=b.Z.join(o,l);try{const e=yield(0,Vp.RE)(ys.Z.get,c,{server:n}),{MediaContainer:i}=e.data;yield(0,Vp.gz)(Or.ZP.actions.epgLineupGroupFetchSucceeded({data:{uuid:null!=(t=null==i?void 0:i.uuid)?t:"",epgLineups:null!=(r=null==i?void 0:i.Lineup)?r:[]}}))}catch(e){yield(0,Vp.gz)(Or.ZP.actions.epgLineupGroupFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Tf({payload:e}){(yield(0,Vp.Ys)(hv.Z)).selectedLineupGroups.find((t=>t.uuid===e.lineupGroup.uuid))?yield(0,Vp.gz)(Dr.ZP.actions.setupErrorMessageAdded({message:(0,Fe.Z)("It looks like you have already set up a lineup for this location.")})):yield(0,Vp.gz)(Or.ZP.actions.selectedEPGLineupGroupAddSucceeded({lineupGroup:e.lineupGroup}))}function*xf({payload:e}){var t;const{server:r}=e;try{const{selectedDVR:e}=yield(0,Vp.Ys)(mv.Z);if(!(null==(t=null==e?void 0:e.dvr)?void 0:t.Lineup))throw new Error("No available DVR lineups to fetch");const n=e.dvr.Lineup.map((e=>e.id)),i=yield(0,Vp.RE)(Af,r,n);yield(0,Vp.gz)(Or.ZP.actions.selectedDVRLineupChannelsFetchSucceeded({lineupChannels:i}))}catch(e){yield(0,Vp.gz)(Or.ZP.actions.selectedDVRLineupChannelsFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Af(e,t){return function({data:e}){var t;const r=null!=(t=e.Lineup)?t:[];return r.forEach((e=>{var t;e.Channel=null==(t=e.Channel)?void 0:t.map((t=>{return r=((e,t)=>{for(var r in t||(t={}))Sf.call(t,r)&&If(e,r,t[r]);if(Zf)for(var r of Zf(t))Pf.call(t,r)&&If(e,r,t[r]);return e})({},t),n={lineupUUID:e.uuid},ff(r,bf(n));var r,n}))})),r}({server:e,data:(yield(0,Vp.RE)(ys.Z.get,"/livetv/epg/lineupchannels",{server:e,params:{lineup:t}})).data.MediaContainer})}function*kf(){for(;;){const e=yield(0,Vp.A7)(Or.ZP.actions.channelMappingsFetchRequested,Ef);yield(0,Vp.qn)(Or.ZP.actions.reset),yield(0,Vp.al)(e)}}function*Nf(){for(;;){const e=yield(0,Vp.A7)(Or.ZP.actions.bestEPGLineupSearchRequested,wf);yield(0,Vp.qn)(Or.ZP.actions.reset),yield(0,Vp.al)(e)}}function*Rf(){for(;;){const e=yield(0,Vp.A7)(Or.ZP.actions.epgCountriesFetchRequested,Cf);yield(0,Vp.qn)(Or.ZP.actions.reset),yield(0,Vp.al)(e)}}function*Lf(){for(;;){const e=yield(0,Vp.A7)(Or.ZP.actions.epgCountryRegionsFetchRequested,Mf);yield(0,Vp.qn)(Or.ZP.actions.reset),yield(0,Vp.al)(e)}}function*jf(){for(;;){const e=yield(0,Vp.A7)(Or.ZP.actions.epgLanguagesFetchRequested,Df);yield(0,Vp.qn)(Or.ZP.actions.reset),yield(0,Vp.al)(e)}}function*Vf(){for(;;){const e=yield(0,Vp.A7)(Or.ZP.actions.epgLineupGroupFetchRequested,Of);yield(0,Vp.qn)(Or.ZP.actions.reset),yield(0,Vp.al)(e)}}function*Uf(){for(;;){const e=yield(0,Vp.A7)(Or.ZP.actions.selectedEPGLineupGroupAddRequested,Tf);yield(0,Vp.qn)(Or.ZP.actions.reset),yield(0,Vp.al)(e)}}function*Ff(){for(;;){const e=yield(0,Vp.A7)(Or.ZP.actions.selectedDVRLineupChannelsFetchRequested,xf);yield(0,Vp.qn)(Or.ZP.actions.reset),yield(0,Vp.al)(e)}}function*Bf(){yield(0,Vp.$6)([(0,Vp.rM)(kf),(0,Vp.rM)(Nf),(0,Vp.rM)(Rf),(0,Vp.rM)(Lf),(0,Vp.rM)(jf),(0,Vp.rM)(Vf),(0,Vp.rM)(Uf),(0,Vp.rM)(Ff)])}function*_f(){yield(0,Vp.$6)([(0,Vp.rM)(yf),(0,Vp.rM)(Bf)])}var zf=r(14685);function*Hf({payload:e}){const{hubsSources:t,hubsStates:r,userServices:n}=e;yield(0,Vp.$6)(t.reduce(((e,t)=>{const i=r.find((e=>e.key===t.key));return i&&e.push((0,Vp.RE)(Qf,t,i,n)),e}),[]))}function*Wf({payload:e}){const{hubsSource:t,userServices:r}=e,{key:n,source:i,contentDirectoryID:s,pinnedContentDirectoryID:a,server:o,provider:l,feature:c}=t;try{if(!o||!l||!(null==c?void 0:c.key))throw new Error("Missing server, provider, or a provider feature with a key that can be used to fetch hubs");if((0,zf.Z)(r,c.requires)){const e={contentDirectoryID:s.join(","),pinnedContentDirectoryID:null==a?void 0:a.join(","),includeMeta:1,excludeFields:"summary"};c.type===Om.zW.Promoted&&Object.assign(e,{count:Yg.HE,includeStations:1,includeLibraryPlaylists:1,includeRecentChannels:1,excludeContinueWatching:1});const t=yield(0,Vp.RE)(ys.Z.get,c.key,{server:o,provider:l,params:e}),r=my({server:o,provider:l,contentDirectoryID:s,pinnedContentDirectoryID:a,excludedHubIdentifiers:c.type===Om.zW.Promoted?[Xg.F.ContinueWatching,Xg.F.OnDeck,Xg.F.StreamingServicesUpsell]:[],data:t.data});yield(0,Vp.$6)([(0,Vp.gz)(or.Z.actions.added({metadataLists:r.metadataLists,metadataItemStates:r.metadataItemStates})),(0,Vp.gz)(xr.Z.actions.fetchSucceeded({key:n,data:r.hubs}))])}else yield(0,Vp.gz)(xr.Z.actions.fetchSucceeded({key:n,data:[]}))}catch(e){yield(0,Vp.gz)(xr.Z.actions.fetchFailed({key:n,source:i,contentDirectoryID:s,error:ys.Z.toPlainErrorObject(e)}))}}function*Gf(){yield(0,Vp.gw)(6e4),yield(0,Vp.gz)(xr.Z.actions.markStale())}function*Qf(e,t,r){var n;const{key:i,source:s,contentDirectoryID:a,pinnedContentDirectoryID:o}=e;try{const i=t.isSourceReady&&!t.isListPending&&!t.isListPopulated&&!t.isListError,s=!!t.contentDirectoryID.length&&!(0,Wc.Z)(t.contentDirectoryID,a),l=!!(null==(n=t.pinnedContentDirectoryID)?void 0:n.length)&&o&&!(0,Wc.Z)(t.pinnedContentDirectoryID,o);(i||s||l)&&(yield(0,Vp.gz)(xr.Z.actions.fetchRequested({hubsSource:e,userServices:r})))}catch(e){yield(0,Vp.gz)(xr.Z.actions.fetchFailed({key:i,source:s,contentDirectoryID:a,error:ys.Z.toPlainErrorObject(e)}))}}function*$f(){yield(0,Vp.ib)(xr.Z.actions.populateAllRequested,Hf)}function*Kf(){for(;;){const e=yield Kp(xr.Z.actions.fetchRequested,Wf,(({payload:e})=>e.hubsSource.key));yield(0,Vp.qn)(xr.Z.actions.markStaleRequested),yield(0,Vp.al)(e)}}function*qf(){for(;;)yield(0,Vp.qn)(xr.Z.actions.markStaleRequested),yield(0,Vp.S3)({task:(0,Vp.RE)(Gf),cancel:(0,Vp.qn)(xr.Z.actions.populateAllRequested)})}function*Yf(){yield(0,Vp.$6)([(0,Vp.rM)($f),(0,Vp.rM)(Kf),(0,Vp.rM)(qf)])}function*Xf({payload:e}){const{server:t,importAll:r,sectionID:n}=e;try{yield(0,Vp.RE)(ys.Z.put,"/playlists/import/itunes",{server:t,params:{sectionID:n,force:r?1:0}}),yield(0,Vp.gz)(Ar.Z.actions.importSucceeded())}catch(e){yield(0,Vp.gz)(Ar.Z.actions.importFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Jf(){yield(0,Vp.Fm)(Ar.Z.actions.importRequested.type,Xf)}function*eb(){yield(0,Vp.$6)([(0,Vp.rM)(Jf)])}var tb=r(68366),rb=r(77749),nb=Object.defineProperty,ib=Object.getOwnPropertySymbols,sb=Object.prototype.hasOwnProperty,ab=Object.prototype.propertyIsEnumerable,ob=(e,t,r)=>t in e?nb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lb=(e,t)=>{for(var r in t||(t={}))sb.call(t,r)&&ob(e,r,t[r]);if(ib)for(var r of ib(t))ab.call(t,r)&&ob(e,r,t[r]);return e};const cb="MergedRecentlyAdded";function*db({payload:e}){var t,r;const{server:n}=e;try{const e=null==(r=null==(t=(yield(0,Vp.RE)(ys.Z.get,":/prefs/get",{server:n,params:{id:cb}})).data.MediaContainer.Setting)?void 0:t[0])?void 0:r.value;yield(0,Vp.gz)(kr.Z.actions.settingsFetchSucceeded({server:n,isMergeRecentlyAddedEnabled:e}))}catch(e){yield(0,Vp.gz)(kr.Z.actions.settingsFetchFailed({server:n,error:ys.Z.toPlainErrorObject(e)}))}}function*ub({payload:e}){const{server:t,isMergeRecentlyAddedEnabled:r}=e;try{yield(0,Vp.RE)(ys.Z.put,":/prefs",{server:t,params:{[cb]:r}}),yield(0,Vp.gz)(kr.Z.actions.settingsUpdateSucceeded({server:t,isMergeRecentlyAddedEnabled:r})),yield(0,Vp.gz)(kr.Z.actions.resetHubs())}catch(e){yield(0,Vp.gz)(kr.Z.actions.settingsUpdateFailed({server:t,error:ys.Z.toPlainErrorObject(e)}))}}function*pb(){yield(0,Vp.gz)(xr.Z.actions.reset()),yield(0,Vp.gz)(Cr.Z.actions.resetHubs())}function*mb({payload:e}){const{server:t,sourceURI:r}=e;try{const e=yield(0,Vp.RE)(Zb,t,r);yield(0,Vp.gz)(kr.Z.actions.hubsFetchSucceeded({sourceURI:r,options:e}))}catch(e){yield(0,Vp.gz)(kr.Z.actions.hubsFetchFailed({sourceURI:r,error:ys.Z.toPlainErrorObject(e)}))}}function*hb({payload:e}){var t;const{server:r,sourceURI:n,options:i,fromIndex:s,toIndex:a}=e;try{const e=i[a].identifier,s=null==(t=i.find(((e,t)=>t===a-1)))?void 0:t.identifier,{key:o}=(0,ah.Z)(n);yield(0,Vp.RE)(ys.Z.put,b.Z.join([o,e,"move"]),{server:r,params:{after:s}}),yield(0,Vp.gz)(kr.Z.actions.reorderSucceeded({sourceURI:n})),yield(0,Vp.gz)(kr.Z.actions.resetHubs())}catch(e){const t=Array.from(i),[r]=t.splice(a,1);t.splice(s,0,r),yield(0,Vp.gz)(kr.Z.actions.reorderFailed({sourceURI:n,options:t,error:ys.Z.toPlainErrorObject(e)}))}}function*gb({payload:e}){const{server:t,sourceURI:r,options:n,removed:i,index:s}=e;try{const e=i.identifier,{key:n}=(0,ah.Z)(r);yield(0,Vp.RE)(ys.Z.del,b.Z.join([n,e]),{server:t}),yield(0,Vp.gz)(kr.Z.actions.removeSucceeded({sourceURI:r})),yield(0,Vp.gz)(kr.Z.actions.resetHubs())}catch(e){const t=Array.from(n);t.splice(s,0,i),yield(0,Vp.gz)(kr.Z.actions.removeFailed({sourceURI:r,options:t,error:ys.Z.toPlainErrorObject(e)}))}}function*yb({payload:e}){const{server:t,sourceURI:r}=e;try{const{key:e}=(0,ah.Z)(r);yield(0,Vp.RE)(ys.Z.del,e,{server:t});const n=yield(0,Vp.RE)(Zb,t,r);yield(0,Vp.gz)(kr.Z.actions.resetSucceeded({sourceURI:r,options:n})),yield(0,Vp.gz)(kr.Z.actions.resetHubs())}catch(e){yield(0,Vp.gz)(kr.Z.actions.resetFailed({sourceURI:r,error:ys.Z.toPlainErrorObject(e)}))}}function*vb({payload:e}){const{server:t,sourceURI:r,options:n,promoted:i}=e;try{const e=lb(lb({},n),i);yield(0,Vp.gz)(kr.Z.actions.promoteChanged({sourceURI:r,options:e}));const{key:s}=(0,ah.Z)(r);yield(0,Vp.RE)(ys.Z.put,b.Z.join([s,e.identifier]),{server:t,params:{promotedToRecommended:(0,tb.Z)(e.promotedToRecommended),promotedToOwnHome:(0,tb.Z)(e.promotedToOwnHome),promotedToSharedHome:(0,tb.Z)(e.promotedToSharedHome)}}),yield(0,Vp.gz)(kr.Z.actions.resetHubs())}catch(e){yield(0,Vp.gz)(kr.Z.actions.promoteChanged({sourceURI:r,options:n}))}}function*fb({payload:e}){var t;const{server:r,sourceURI:n,contentDirectoryID:i}=e;try{const{ratingKey:e}=(0,ah.Z)(n),s=yield(0,Vp.RE)(ys.Z.get,(0,rb.Z)(i),{server:r,params:{metadataItemId:e}});yield(0,Vp.gz)(kr.Z.actions.publishedFetchSucceeded({sourceURI:n,hub:null==(t=s.data.MediaContainer.Hub)?void 0:t[0]}))}catch(e){yield(0,Vp.gz)(kr.Z.actions.publishedFetchFailed({sourceURI:n,error:ys.Z.toPlainErrorObject(e)}))}}function*bb({payload:e}){var t;const{server:r,sourceURI:n,contentDirectoryID:i,hub:s}=e;try{const{ratingKey:e}=(0,ah.Z)(n),a=yield(0,Vp.RE)(ys.Z.post,(0,rb.Z)(i),{server:r,params:{metadataItemId:e,promotedToRecommended:(0,tb.Z)(s.promotedToRecommended),promotedToOwnHome:(0,tb.Z)(s.promotedToOwnHome),promotedToSharedHome:(0,tb.Z)(s.promotedToSharedHome)}});yield(0,Vp.gz)(kr.Z.actions.publishedUpdateSucceeded({sourceURI:n,hub:null==(t=a.data.MediaContainer.Hub)?void 0:t[0]})),yield(0,Vp.gz)(kr.Z.actions.resetHubs())}catch(e){yield(0,Vp.gz)(kr.Z.actions.publishedUpdateFailed({sourceURI:n,error:ys.Z.toPlainErrorObject(e)}))}}function*Zb(e,t){const{key:r}=(0,ah.Z)(t);return(yield(0,Vp.RE)(ys.Z.get,r,{server:e})).data.MediaContainer.Hub}function*Sb(){yield(0,Vp.Fm)(kr.Z.actions.settingsFetchRequested,db)}function*Pb(){yield(0,Vp.Fm)(kr.Z.actions.settingsUpdateRequested,ub)}function*Ib(){yield(0,Vp.Fm)(kr.Z.actions.resetHubs,pb)}function*Eb(){yield(0,Vp.Fm)(kr.Z.actions.hubsFetchRequested,mb)}function*wb(){yield(0,Vp.ib)(kr.Z.actions.reorderRequested,hb)}function*Cb(){yield(0,Vp.ib)(kr.Z.actions.removeRequested,gb)}function*Mb(){yield(0,Vp.Fm)(kr.Z.actions.resetRequested,yb)}function*Db(){yield(0,Vp.ib)(kr.Z.actions.promoteRequested,vb)}function*Ob(){yield(0,Vp.Fm)(kr.Z.actions.publishedFetchRequested,fb)}function*Tb(){yield(0,Vp.ib)(kr.Z.actions.publishedUpdateRequested,bb)}function*xb(){yield(0,Vp.$6)([(0,Vp.rM)(Sb),(0,Vp.rM)(Pb),(0,Vp.rM)(Ib),(0,Vp.rM)(Eb),(0,Vp.rM)(wb),(0,Vp.rM)(Cb),(0,Vp.rM)(Mb),(0,Vp.rM)(Db),(0,Vp.rM)(Ob),(0,Vp.rM)(Tb)])}var Ab=r(33593),kb=Object.defineProperty,Nb=Object.getOwnPropertySymbols,Rb=Object.prototype.hasOwnProperty,Lb=Object.prototype.propertyIsEnumerable,jb=(e,t,r)=>t in e?kb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Vb({server:e,provider:t,data:r}){const n=(0,Wu.Z)({serverIdentifier:e.machineIdentifier,providerIdentifier:null==t?void 0:t.identifier});return(r||[]).map((e=>{var t;return((e,t)=>{for(var r in t||(t={}))Rb.call(t,r)&&jb(e,r,t[r]);if(Nb)for(var r of Nb(t))Lb.call(t,r)&&jb(e,r,t[r]);return e})({source:n,uid:`${null!=(t=e.source)?t:n}-${e.id}`},e)}))}const Ub="https://epg.provider.plex.tv/settings/favoriteChannels";function*Fb(e,t,r){var n;const i=r||(e.isCloud?"/lineups/plex/channels":b.Z.join([t.identifier,"/lineups/dvr/channels"]));try{return Vb({server:e,provider:t,data:null==(n=(yield(0,Vp.RE)(ys.Z.get,i,{server:e,provider:t})).data)?void 0:n.MediaContainer.Channel})}catch(e){return[]}}function*Bb({payload:e}){var t;const{cloudServer:r}=e;try{const e=Vb({server:r,data:null==(t=(yield(0,Vp.RE)(ys.Z.get,Ub,{server:r,headers:{"X-Plex-Provider-Version":"5.1"}})).data)?void 0:t.MediaContainer.FavoriteChannel});yield(0,Vp.gz)(Nr.ZP.actions.favoriteChannelsFetchSucceeded({channels:e}))}catch(e){yield(0,Vp.gz)(Nr.ZP.actions.favoriteChannelsFetchSucceeded({channels:[]}))}}function*_b({payload:e}){const{serverProviders:t}=e,r=t.map((({server:e,provider:t})=>(0,Vp.RE)(Fb,e,t))),n=yield(0,Vp.$6)(r);yield(0,Vp.gz)(Nr.ZP.actions.favoriteChannelsPopulateRequestSucceeded({channels:n.flat()}))}function*zb({payload:e}){const{cloudServer:t,channels:r,updatedChannels:n}=e,i=n.map((({source:e,id:t,title:r,thumb:n,vcn:i})=>({source:e,id:t,title:r,thumb:n,vcn:i})));try{yield(0,Vp.RE)(ys.Z.put,Ub,{server:t,headers:{"X-Plex-Provider-Version":"5.1"}},i),yield(0,Vp.gz)(Nr.ZP.actions.favoriteChannelsUpdateSucceeded())}catch(e){yield(0,Vp.gz)(Nr.ZP.actions.favoriteChannelsUpdateFailed({error:ys.Z.toPlainErrorObject(e),channels:r}))}}function*Hb({payload:e}){const{sourceKeys:t}=e,r=t.map((({server:e,provider:t,key:r})=>(0,Vp.RE)(Fb,e,t,r))),n=yield(0,Vp.$6)(r);yield(0,Vp.gz)(Nr.ZP.actions.guideChannelsFetchSucceeded({channels:n.flat()}))}function*Wb({payload:e}){var t;const{server:r,provider:n,channelGridKey:i,date:s}=e;try{const e=new Date(s),a=yield(0,Vp.RE)(ys.Z.get,r.isCloud?"/grid":b.Z.join([n.identifier,"/grid"]),{server:r,provider:n,allowHeadersInUrl:!1,params:{channelGridKey:i,date:(0,Ab.Z)(e,"yyyy-MM-dd")}}),{metadataItems:o,metadataItemStates:l}=(0,ny.Z)({server:r,provider:n,data:null!=(t=a.data.MediaContainer.Metadata)?t:[],container:a.data.MediaContainer});yield(0,Vp.$6)([(0,Vp.gz)(ar.Z.actions.metadataItemStatesNormalized({metadataItemStates:l})),(0,Vp.gz)(Nr.ZP.actions.channelAiringsFetchSucceeded({channelGridKey:i,airings:o}))])}catch(e){yield(0,Vp.gz)(Nr.ZP.actions.channelAiringsFetchFailed({channelGridKey:i,error:ys.Z.toPlainErrorObject(e)}))}}function*Gb(){yield Kp(Nr.ZP.actions.channelAiringsFetchRequested,Wb,(({payload:e})=>e.channelGridKey))}function*Qb(){yield(0,Vp.$6)([(0,Vp.rM)(Gb),qp(Nr.ZP.actions.guideChannelsFetchRequested,Hb),qp(Nr.ZP.actions.favoriteChannelsFetchRequested,Bb),qp(Nr.ZP.actions.favoriteChannelsPopulateRequested,_b),qp(Nr.ZP.actions.favoriteChannelsUpdateRequested,zb)])}var $b=r(181);function*Kb(){try{const e=yield(0,hy.Z)($b.Z),t=yield(0,Vp.RE)(ys.Z.get,"/api/v2/user/settings/opt_outs",{server:e});yield(0,Vp.gz)(Lr.Z.actions.fetchOptOutsSucceeded({optOuts:t.data}))}catch(e){yield(0,Vp.gz)(Lr.Z.actions.fetchOptOutsFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*qb({payload:e}){try{const t=yield(0,hy.Z)(qg.Z),r=yield(0,hy.Z)($b.Z);if(!(null==t?void 0:t.uuid))throw new Error("User is not logged in");const n=yield(0,Vp.RE)(ys.Z.post,`/api/v2/user/${t.uuid}/settings/opt_outs`,{server:r,params:{key:e.optOut.key,value:e.optOut.value}});yield(0,Vp.gz)(Lr.Z.actions.updateOptOutSucceeded({optOut:n.data}))}catch(e){yield(0,Vp.gz)(Lr.Z.actions.updateOptOutFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*Yb(){yield(0,Vp.$6)([qp(Lr.Z.actions.fetchOptOuts,Kb),qp(Lr.Z.actions.updateOptOut,qb)])}var Xb=r(50223),Jb=Object.defineProperty,eZ=Object.getOwnPropertySymbols,tZ=Object.prototype.hasOwnProperty,rZ=Object.prototype.propertyIsEnumerable,nZ=(e,t,r)=>t in e?Jb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,iZ=(e,t)=>{for(var r in t||(t={}))tZ.call(t,r)&&nZ(e,r,t[r]);if(eZ)for(var r of eZ(t))rZ.call(t,r)&&nZ(e,r,t[r]);return e};function sZ(e=[]){return e.reduce(((e,t)=>(t.key===Xb.F.ViewedAt?e["viewedAt>"]=t.value:e[t.key]=t.value,e)),{})}function*aZ({payload:e}){try{const{server:t,provider:r,sort:n,filters:i,startIndex:s,size:a,isPrepend:o}=e,l=yield(0,Vp.RE)(jr.g.fetchRange,"/status/sessions/history/all",{server:t,provider:r,params:iZ({sort:n},sZ(i)),startIndex:s,size:a,isPrepend:o});yield(0,Vp.gz)(jr.Z.actions.fetchRangeSucceeded({data:l}))}catch(e){yield(0,Vp.gz)(jr.Z.actions.fetchRangeFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*oZ(){for(;;){const e=yield(0,Vp.Fm)(jr.Z.actions.fetchRangeRequested,aZ);yield(0,Vp.qn)(jr.Z.actions.reset),yield(0,Vp.al)(e)}}function*lZ(){yield(0,Vp.$6)([(0,Vp.rM)(oZ)])}var cZ=r(54562),dZ=r(94450),uZ=r(96493),pZ=r(98551),mZ=Object.getOwnPropertySymbols,hZ=Object.prototype.hasOwnProperty,gZ=Object.prototype.propertyIsEnumerable;function yZ(e){return!(0,uZ.Z)(e)}function*vZ({payload:e}){const t=yield(0,Vp.Ys)(pZ.Z);try{const r=yield(0,Vp.RE)(SZ,e.server,e.provider,e.metadataKey);yield(0,Vp.RE)(PZ,e.server,e.provider,r,t)}catch(e){yield(0,Vp.gz)(Ur.Z.actions.metadataItemFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*fZ({payload:e}){var t;try{const r=yield(0,Vp.Ys)(pZ.Z),n=null==(t=r.metadata.metadataItem)?void 0:t.key;if(!n)return;const i=yield(0,Vp.RE)(SZ,e.server,e.provider,n);yield(0,Vp.RE)(PZ,e.server,e.provider,i,r)}catch(e){}}function*bZ({payload:e}){const{server:t,provider:r,metadataKey:n}=e,i=!t.version||(0,dZ.Z)(t.version,cZ.Z.simpleRelatedKey)?b.Z.join([n,"related"]):b.Z.join([n.replace(/(\/library)?\/metadata/,"/hubs/metadata"),"related"]);try{const e=my({server:t,provider:r,data:(yield(0,Vp.RE)(ys.Z.get,i,{server:t,provider:r,params:{includeAugmentations:!t.version||(0,dZ.Z)(t.version,cZ.Z.augmentedHubsInRelatedHubs)?1:0,includeExternalMetadata:1,includeMeta:1}})).data});yield(0,Vp.$6)([(0,Vp.gz)(or.Z.actions.added({metadataLists:e.metadataLists,metadataItemStates:e.metadataItemStates})),(0,Vp.gz)(Ur.Z.actions.relatedHubsFetchSucceeded({hubs:e.hubs}))])}catch(e){yield(0,Vp.gz)(Ur.Z.actions.relatedHubsFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*ZZ({payload:e}){const{server:t,provider:r,augmentationKey:n}=e;try{const e=my({server:t,provider:r,data:(yield(0,Vp.RE)(ys.Z.get,n,{server:t,provider:r,params:{wait:1}})).data});yield(0,Vp.$6)([(0,Vp.gz)(or.Z.actions.added({metadataLists:e.metadataLists,metadataItemStates:e.metadataItemStates})),(0,Vp.gz)(Ur.Z.actions.augmentedHubsFetchSucceeded({hubs:e.hubs}))])}catch(e){yield(0,Vp.gz)(Ur.Z.actions.augmentedHubsFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*SZ(e,t,r){const n=(yield(0,Vp.RE)(ys.Z.get,r,{server:e,provider:t,params:{includeConcerts:1,includeExtras:1,includeOnDeck:1,includePopularLeaves:1,includePreferences:1,includeReviews:1,includeChapters:1,includeStations:1,includeExternalMedia:1,asyncAugmentMetadata:1,asyncCheckFiles:1,asyncRefreshAnalysis:1,asyncRefreshLocalMediaAgent:1}})).data.MediaContainer,{Metadata:i=[]}=n,s=((e,t)=>{var r={};for(var n in e)hZ.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&mZ)for(var n of mZ(e))t.indexOf(n)<0&&gZ.call(e,n)&&(r[n]=e[n]);return r})(n,["Metadata"]),[a]=i;if(!a)throw new Error("The response did not contain a metadata item");const o=(0,Sm.Z)({server:e,provider:t,data:a,container:s}),{descendantListSourceURI:l,siblingListSourceURI:c,popularLeavesSourceURI:d,extrasSourceURI:u}=function(e){const{source:t,childrenKey:r,popularLeaves:n,extras:i}=e,s=function(e){const{skipParent:t,parentKey:r,grandparentKey:n}=e,i=t?n:r,s=t?"grandchildren":"children";if(i)return b.Z.join([i,s],{excludeAllLeaves:1})}(e),a=null==n?void 0:n.key,o=i?b.Z.join([e.key,"extras"]):void 0;return{descendantListSourceURI:r?b.Z.join([t,r]):void 0,siblingListSourceURI:yZ(e)&&s?b.Z.join([t,s]):void 0,popularLeavesSourceURI:a?b.Z.join([t,a]):void 0,extrasSourceURI:o?b.Z.join([t,o]):void 0}}(o.metadataItem),p={metadataItem:o.metadataItem,metadataItemStates:o.metadataItemStates,descendantListSourceURI:l,siblingListSourceURI:c,popularLeavesSourceURI:d,extrasSourceURI:u};return yield(0,Vp.gz)(Ur.Z.actions.metadataItemFetchSucceeded(p)),yield(0,Vp.gz)(ar.Z.actions.metadataItemStatesNormalized({metadataItemStates:o.metadataItemStates})),p}function*PZ(e,t,r,n){var i,s;const{descendantListSourceURI:a,siblingListSourceURI:o,popularLeavesSourceURI:l,extrasSourceURI:c}=n,{metadataItem:d,descendantListSourceURI:u,siblingListSourceURI:p,popularLeavesSourceURI:m,extrasSourceURI:h}=r,g=[];u&&(u===a?yield(0,Vp.gz)((null==d||d.type,mg.pG.Album,or.Z.actions.throttledRepopulateRequested({server:e,provider:t,sourceURI:u,params:{includeUserState:1}}))):g.push((0,Vp.RE)(IZ,{server:e,provider:t,sourceURI:u,fetchAll:d.type===mg.pG.Album}))),p&&(p===o?yield(0,Vp.gz)(or.Z.actions.throttledRepopulateRequested({server:e,provider:t,sourceURI:p})):g.push((0,Vp.RE)(IZ,{server:e,provider:t,sourceURI:p,fetchAll:!0}))),m&&(m===l?yield(0,Vp.gz)(or.Z.actions.throttledRepopulateRequested({server:e,provider:t,sourceURI:m})):g.push((0,Vp.RE)(IZ,{server:e,provider:t,sourceURI:m,items:null==(i=d.popularLeaves)?void 0:i.items}))),h&&(h===c?yield(0,Vp.gz)(or.Z.actions.throttledRepopulateRequested({server:e,provider:t,sourceURI:h})):g.push((0,Vp.RE)(IZ,{server:e,provider:t,sourceURI:h,items:d.extras,totalSize:null==(s=d.extras)?void 0:s.length}))),yield(0,Vp.$6)(g)}function*IZ({server:e,provider:t,sourceURI:r,items:n=[],totalSize:i,fetchAll:s}){if(yield(0,Vp.gz)(or.Z.actions.added({metadataLists:[{sourceURI:r,items:n,totalSize:i,offset:0}],metadataItemStates:{}})),null==i)if(s)try{yield(0,Vp.gz)(or.Z.actions.fetchAllRequested({server:e,provider:t,sourceURI:r,params:{includeUserState:1}}))}catch(e){yield(0,Vp.gz)(or.Z.actions.fetchAllFailed({error:ys.Z.toPlainErrorObject(e),sourceURI:r}))}else try{yield(0,Vp.gz)(or.Z.actions.fetchRangeRequested({server:e,provider:t,sourceURI:r,startIndex:0,size:20,params:{includeUserState:1}}))}catch(e){yield(0,Vp.gz)(or.Z.actions.fetchRangeFailed({error:ys.Z.toPlainErrorObject(e),sourceURI:r}))}}function*EZ(){for(;;){const e=yield(0,Vp.A7)(Ur.Z.actions.metadataItemFetchRequested,vZ);yield(0,Vp.qn)(Ur.Z.actions.reset),yield(0,Vp.al)(e)}}function*wZ(){for(;;){const e=yield(0,Vp.A7)(Ur.Z.actions.relatedHubsFetchRequested,bZ);yield(0,Vp.qn)(Ur.Z.actions.reset),yield(0,Vp.al)(e)}}function*CZ(){for(;;){const e=yield(0,Vp.A7)(Ur.Z.actions.augmentedHubsFetchRequested,ZZ);yield(0,Vp.qn)(Ur.Z.actions.reset),yield(0,Vp.al)(e)}}function*MZ(){for(;;){const e=yield(0,Vp.A7)(Ur.Z.actions.metadataItemRepopulateRequested,fZ),t=yield(0,Vp.qn)([Ur.Z.actions.reset,ar.Z.actions.playedStatusUpdateRequested,ar.Z.actions.toggleWatchlistRequested,ar.Z.actions.toggleSavedRequested,ar.Z.actions.streamSelectRequested,ar.Z.actions.streamDeleteRequested,ar.Z.actions.preferenceChanged]);t.type!==Ur.Z.actions.reset&&(yield(0,Vp.Ys)(pZ.Z)).metadata.isPending&&(yield(0,Vp.gz)(ar.Z.actions.repopulateCanceled({sourceURI:t.payload.sourceURI}))),yield(0,Vp.al)(e)}}function*DZ(){yield(0,Vp.$6)([(0,Vp.rM)(EZ),(0,Vp.rM)(MZ),(0,Vp.rM)(wZ),(0,Vp.rM)(CZ)])}function*OZ({payload:e}){const{password:t}=e,r=yield(0,hy.Z)($b.Z);try{const e=yield(0,Vp.RE)(ys.Z.post,"/api/v2/user/two_factor",{server:r},{password:t});yield(0,Vp.gz)(Fr.Z.actions.createSecretSucceeded({provisioningUri:e.data.provisioningUri,secret:e.data.secret}))}catch(e){yield(0,Vp.gz)(Fr.Z.actions.createSecretFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*TZ({payload:e}){const{enabled:t,resetDevices:r,verificationCode:n}=e,i=yield(0,hy.Z)($b.Z);try{if(t){const e=yield(0,Vp.RE)(ys.Z.put,"/api/v2/user/two_factor",{server:i},{resetDevices:r,verificationCode:n});yield(0,Vp.gz)(Fr.Z.actions.toggleSucceeded({enabled:!0,codes:e.data.codes}))}else yield(0,Vp.RE)(ys.Z.del,"/api/v2/user/two_factor",{server:i,params:{verificationCode:n}}),yield(0,Vp.gz)(Fr.Z.actions.toggleSucceeded({enabled:!1}));yield(0,Am.Z)((0,Ys.ay)({twoFactorEnabled:t}))}catch(e){yield(0,Vp.gz)(Fr.Z.actions.toggleFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*xZ({payload:e}){const{password:t,verificationCode:r}=e,n=yield(0,hy.Z)($b.Z);try{const e=yield(0,Vp.RE)(ys.Z.post,"/api/v2/user/two_factor/backup_codes",{server:n},{password:t,verificationCode:r});yield(0,Vp.gz)(Fr.Z.actions.generateRecoveryCodesSucceeded({codes:e.data.codes}))}catch(e){yield(0,Vp.gz)(Fr.Z.actions.generateRecoveryCodesFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*AZ(){const e=yield(0,hy.Z)($b.Z);try{yield(0,Vp.RE)(ys.Z.post,"/api/v2/user/two_factor/send_recovery_code",{server:e}),yield(0,Vp.gz)(Fr.Z.actions.sendRecoveryCodeSucceeded())}catch(e){yield(0,Vp.gz)(Fr.Z.actions.sendRecoveryCodeFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*kZ(){for(;;){const e=yield(0,Vp.Fm)(Fr.Z.actions.createSecretRequested,OZ);yield(0,Vp.qn)(Fr.Z.actions.reset),yield(0,Vp.al)(e)}}function*NZ(){for(;;){const e=yield(0,Vp.Fm)(Fr.Z.actions.toggleRequested,TZ);yield(0,Vp.qn)(Fr.Z.actions.reset),yield(0,Vp.al)(e)}}function*RZ(){for(;;){const e=yield(0,Vp.Fm)(Fr.Z.actions.generateRecoveryCodesRequested,xZ);yield(0,Vp.qn)(Fr.Z.actions.reset),yield(0,Vp.al)(e)}}function*LZ(){for(;;){const e=yield(0,Vp.Fm)(Fr.Z.actions.sendRecoveryCodeRequested,AZ);yield(0,Vp.qn)(Fr.Z.actions.reset),yield(0,Vp.al)(e)}}function*jZ(){yield(0,Vp.$6)([(0,Vp.rM)(kZ),(0,Vp.rM)(NZ),(0,Vp.rM)(RZ),(0,Vp.rM)(LZ)])}var VZ=r(99388);function*UZ(){const e=yield(0,hy.Z)($b.Z);try{yield(0,Vp.RE)(ys.Z.post,"/api/v2/user/send_confirmation",{server:e}),yield(0,Vp.gz)(zr.Z.actions.sendVerificationEmailSucceeded())}catch(e){yield(0,Vp.gz)(zr.Z.actions.sendVerificationEmailFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*FZ(){for(;;){const e=yield(0,Vp.Fm)(zr.Z.actions.sendVerificationEmailRequested,UZ);yield(0,Vp.qn)(zr.Z.actions.reset),yield(0,Vp.al)(e)}}function*BZ(){yield(0,Vp.$6)([(0,Vp.rM)(FZ)])}var _Z=r(33180),zZ=r(85698),HZ=r(9278),WZ=r(81017),GZ=r(93725),QZ=r(27810),$Z=r(73181),KZ=Object.defineProperty,qZ=Object.defineProperties,YZ=Object.getOwnPropertyDescriptors,XZ=Object.getOwnPropertySymbols,JZ=Object.prototype.hasOwnProperty,eS=Object.prototype.propertyIsEnumerable,tS=(e,t,r)=>t in e?KZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rS=(e,t)=>{for(var r in t||(t={}))JZ.call(t,r)&&tS(e,r,t[r]);if(XZ)for(var r of XZ(t))eS.call(t,r)&&tS(e,r,t[r]);return e},nS=(e,t)=>qZ(e,YZ(t));function iS(e){return e.offerType===QZ.Nn.Buy?"buyPrice":"rentPrice"}function sS(e){return e.offerType===QZ.Nn.Buy?"buyPriceDescription":"rentPriceDescription"}var aS=Object.getOwnPropertySymbols,oS=Object.prototype.hasOwnProperty,lS=Object.prototype.propertyIsEnumerable;function*cS(e,t){try{const r={type:(0,Dm.Z)(t.type)};t.type===mg.pG.Season?(r["show.guid"]=t.parentGuid,r["season.index"]=t.index):r.guid=t.guid;const n=(yield(0,Vp.RE)(ys.Z.get,"/library/all",{server:e,params:r})).data.MediaContainer,{Metadata:i=[]}=n,s=((e,t)=>{var r={};for(var n in e)oS.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&aS)for(var n of aS(e))t.indexOf(n)<0&&lS.call(e,n)&&(r[n]=e[n]);return r})(n,["Metadata"]);return(0,ny.Z)({server:e,data:i,container:s}).metadataItems.filter((e=>!!e.librarySectionID)).map((e=>({type:QZ.oY.Server,availability:e})))}catch(e){return[]}}function*dS(e,t){if(e.connectionTestResult===GZ.Y.Unavailable||e.connectionTestResult===GZ.Y.Unauthorized)return;let r=e,n=e.connectionTestResult===GZ.Y.Connected;for(;!n;){const t=yield(0,Vp.qn)(hr.Z.actions.connected);t.payload.server.entityID===e.entityID&&(r=t.payload.server,n=!0)}return yield(0,Vp.RE)(cS,r,t)}function*uS(e,t){return(yield(0,Vp.$6)(e.map((e=>(0,Vp.S3)({availability:(0,Vp.RE)(dS,e,t),timeout:(0,Vp.gw)(5e3)}))))).flatMap((({availability:e})=>null!=e?e:[]))}function*pS(){var e,t;try{const r=yield(0,hy.Z)($b.Z),n=yield(0,hy.Z)(HZ.Z),i=yield(0,Vp.RE)(ys.Z.get,"/availability-platforms",{server:r,provider:n});yield(0,Vp.gz)(_r.ZP.actions.availabilityPlatformsFetchSucceeded({availabilityPlatforms:null!=(t=null==(e=i.data.MediaContainer)?void 0:e.AvailabilityPlatform)?t:[]}))}catch(e){yield(0,Vp.gz)(_r.ZP.actions.availabilityPlatformsFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*mS({payload:e}){var t,r,n;const{server:i,provider:s,metadataItem:a}=e;let o=[];if(a.guid){const e=yield(0,hy.Z)(WZ.Z);o=yield(0,Vp.RE)(uS,e,a)}let l=[];try{l=null!=(n=(null!=(r=null==(t=(yield(0,Vp.RE)(ys.Z.get,b.Z.join([a.key,"availabilities"]),{server:i,provider:s})).data.MediaContainer)?void 0:t.Availability)?r:[]).reduce(((e,t)=>{const r=e.find((e=>e.platform===t.platform&&(e.offerType===t.offerType||(0,$Z.Z)(e)&&(0,$Z.Z)(t))));if(r){if((0,$Z.Z)(t)){const e=iS(t),n=sS(t),i=r[e];(!i||t.price&&i>t.price)&&(r[e]=t.price,r[n]=t.priceDescription)}}else e.push(function(e){if(e.platform===QZ.LC&&e.playableKey){const{serverIdentifier:t,providerIdentifier:r,key:n}=(0,ah.Z)(e.playableKey);return nS(rS({},e),{serverIdentifier:t,providerIdentifier:r,key:n})}if(!(0,$Z.Z)(e))return e;const t=iS(e),r=sS(e),n=e,{price:i,priceDescription:s}=n,a=((e,t)=>{var r={};for(var n in e)JZ.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&XZ)for(var n of XZ(e))t.indexOf(n)<0&&eS.call(e,n)&&(r[n]=e[n]);return r})(n,["price","priceDescription"]);return nS(rS({},a),{[t]:i,[r]:s})}(t));return e}),[]).map((e=>({type:QZ.oY.Provider,availability:e}))))?n:[]}catch(e){}yield(0,Vp.gz)(_r.ZP.actions.metadataItemAvailabilitiesFetchSucceeded({sourceURI:a.sourceURI,availabilities:{serverAvailabilities:o,providerAvailabilities:l}}))}function*hS(){var e,t,r,n;try{const i=yield(0,hy.Z)($b.Z),s=yield(0,hy.Z)(HZ.Z);if(!i||!s)throw new Error("Missing server or provider");const a=null!=(n=null==(r=null==(t=null==(e=(yield(0,Vp.RE)(ys.Z.get,"/settings/preferredServices",{server:i,provider:s})).data)?void 0:e.MediaContainer)?void 0:t.AvailabilityPlatform)?void 0:r.map((({platform:e})=>e)))?n:[];yield(0,Vp.gz)(_r.ZP.actions.preferredServicesFetchSucceeded({preferredServices:a}))}catch(e){yield(0,Vp.gz)(_r.ZP.actions.preferredServicesFetchFailed({error:ys.Z.toPlainErrorObject(e)}))}}function*gS({payload:e}){try{const t=yield(0,hy.Z)($b.Z),r=yield(0,hy.Z)(HZ.Z);if(!t||!r)throw new Error("Missing server or provider");yield(0,Vp.RE)(ys.Z.put,"/settings/preferredServices",{server:t,provider:r},{preferredServices:e.preferredServices}),yield(0,Vp.gz)(_r.ZP.actions.preferredServicesSaveSucceeded({preferredServices:e.preferredServices}))}catch(e){yield(0,Am.Z)((0,st.wp)((0,Fe.Z)("There was a problem saving your preferences. Please try again later."))),yield(0,Vp.gz)(_r.ZP.actions.preferredServicesSaveFailed())}}function*yS(){var e;try{const e=yield(0,hy.Z)($b.Z),t=yield(0,hy.Z)(zZ.Z);if(!e||!t)throw new Error("Missing server or provider");const r=yield(0,Vp.RE)(ys.Z.get,"/rss",{server:e,provider:t}),{watchlistUuid:n,watchlistUrl:i}=r.data.RSSInfo;yield(0,Vp.gz)(_r.ZP.actions.watchlistRSSFetchSucceeded({uuid:n,url:i}))}catch(t){404===(null==(e=t.response)?void 0:e.status)?yield(0,Vp.gz)(_r.ZP.actions.watchlistRSSFetchSucceeded({uuid:null,url:null})):yield(0,Vp.gz)(_r.ZP.actions.watchlistRSSFetchFailed({error:ys.Z.toPlainErrorObject(t)}))}}function*vS(){try{const e=yield(0,hy.Z)($b.Z),t=yield(0,hy.Z)(zZ.Z);if(!e||!t)throw new Error("Missing server or provider");const r=yield(0,Vp.RE)(ys.Z.post,"/rss",{server:e,provider:t}),{watchlistUuid:n,watchlistUrl:i}=r.data.RSSInfo;yield(0,Vp.gz)(_r.ZP.actions.watchlistRSSCreateSucceeded({uuid:n,url:i}))}catch(e){yield(0,Am.Z)((0,st.wp)((0,Fe.Z)("There was a problem generating your URL. Please try again later."))),yield(0,Vp.gz)(_r.ZP.actions.watchlistRSSCreateFailed())}}function*fS({payload:e}){try{const t=yield(0,hy.Z)($b.Z),r=yield(0,hy.Z)(zZ.Z);if(!t||!r)throw new Error("Missing server or provider");yield(0,Vp.RE)(ys.Z.del,`/rss/${e.uuid}`,{server:t,provider:r}),yield(0,Vp.gz)(_r.ZP.actions.watchlistRSSDeleteSucceeded())}catch(e){yield(0,Am.Z)((0,st.wp)((0,Fe.Z)("There was a problem deleting your URL. Please try again later.")))}}function*bS(){for(;;){const e=yield(0,Vp.Fm)(_r.ZP.actions.availabilityPlatformsFetchRequested,pS);yield(0,Vp.qn)(_r.ZP.actions.reset),yield(0,Vp.al)(e)}}function*ZS(){yield Kp(_r.ZP.actions.metadataItemAvailabilitiesFetchRequested,mS,(({payload:e})=>e.metadataItem.sourceURI))}function*SS(){for(;;){const e=yield(0,Vp.Fm)(_r.ZP.actions.preferredServicesFetchRequested,hS);yield(0,Vp.qn)(_r.ZP.actions.reset),yield(0,Vp.al)(e)}}function*PS(){for(;;){const e=yield(0,Vp.Fm)(_r.ZP.actions.preferredServicesSaveRequested,gS);yield(0,Vp.qn)(_r.ZP.actions.reset),yield(0,Vp.al)(e)}}function*IS(){for(;;){const e=yield(0,Vp.Fm)(_r.ZP.actions.watchlistRSSFetchRequested,yS);yield(0,Vp.qn)(_r.ZP.actions.reset),yield(0,Vp.al)(e)}}function*ES(){for(;;){const e=yield(0,Vp.Fm)(_r.ZP.actions.watchlistRSSCreateRequested,vS);yield(0,Vp.qn)(_r.ZP.actions.reset),yield(0,Vp.al)(e)}}function*wS(){for(;;){const e=yield(0,Vp.Fm)(_r.ZP.actions.watchlistRSSDeleteRequested,fS);yield(0,Vp.qn)(_r.ZP.actions.reset),yield(0,Vp.al)(e)}}function*CS(){yield(0,Vp.$6)([(0,Vp.rM)(bS),(0,Vp.rM)(ZS),(0,Vp.rM)(SS),(0,Vp.rM)(PS),(0,Vp.rM)(IS),(0,Vp.rM)(ES),(0,Vp.rM)(wS)])}function*MS(){yield(0,Vp.$6)([(0,Vp.rM)(wg),(0,Vp.rM)(kg),(0,Vp.rM)(Kg),(0,Vp.rM)(ky),(0,Vp.rM)(dv),(0,Vp.rM)(_f),(0,Vp.rM)(Yf),(0,Vp.rM)(eb),(0,Vp.rM)(xb),(0,Vp.rM)(Qb),(0,Vp.rM)(Yb),(0,Vp.rM)(lZ),(0,Vp.rM)(DZ),(0,Vp.rM)(jZ),(0,Vp.rM)(VZ.ZP),(0,Vp.rM)(BZ),(0,Vp.rM)(_Z.ZP),(0,Vp.rM)(CS)])}const DS=(0,Lp.ZP)(),OS=(0,er.xC)({reducer:{root:(e,t)=>(t.type===Gr.type&&(e=void 0),Wr(e,t)),[tr.h.reducerPath]:(e,t)=>(t.type===rr.type&&(e=void 0),tr.h.reducer(e,t))},middleware:e=>e().concat(DS,tr.h.middleware)});DS.run((function*(){yield(0,Vp.$6)([(0,Vp.rM)(pg),(0,Vp.rM)(MS)])})),(0,jp.sj)(OS.dispatch);const TS=OS,xS=bi.Z.extend({name:"QueryModel",initialize(){this._currentState=TS.getState().query,TS.subscribe((()=>{const e=TS.getState();this.trigger("statechange",this,e,this._currentState),this._currentState=e}))},getState:()=>TS.getState().query,toJSON:()=>TS.getState().query});var AS=r(65100);const kS=bi.Z.extend({name:"SubtitlesModalModel",sessionAttrs:{serverEntityID:zn.Z.string,metadataItemEntityID:zn.Z.string,isSubtitlesPending:zn.Z.boolean,isSubtitlesPopulated:zn.Z.boolean,subtitlesError:zn.Z.string,subtitlesDownloadActivityID:zn.Z.string,subtitlesDownloadKey:zn.Z.string,subtitlesDownloadStartTime:zn.Z.integer,isSubtitlesDownloaded:zn.Z.boolean,subtitlesDownloadError:zn.Z.string},sessionRelations:{subtitles:{relationClass:AS.Z,deferred:!0}},defaults:{serverEntityID:null,metadataItemEntityID:null,isSubtitlesPending:!1,isSubtitlesPopulated:!1,subtitlesError:null,subtitlesDownloadActivityID:null,subtitlesDownloadKey:null,subtitlesDownloadStartTime:null,isSubtitlesDownloaded:!1,subtitlesDownloadError:null}});var NS=r(71273);const RS=bi.Z.extend({name:"ProviderIntegrationModel",context:["server","provider"],rootPropertyName:"Integration",syncedAttrs:{id:zn.Z.string.isRequired,status:zn.Z.string.isRequired}}),LS=fi.Z.extend({name:"ProviderIntegrationCollection",context:["server","provider"],url:"/integrations",responseType:NS.AV,model:RS}),jS=bi.Z.extend({name:"ProviderIntegrationsModel",sessionAttrs:{isIntegrationsOnboarding:zn.Z.boolean.isRequired,isIntegrationsPending:zn.Z.boolean.isRequired,isIntegrationsPopulated:zn.Z.boolean.isRequired,integrationsError:zn.Z.object},sessionRelations:{integrations:{relationClass:LS,deferred:!0}},defaults:{isIntegrationsOnboarding:!1,isIntegrationsPending:!0,isIntegrationsPopulated:!1}});var VS=r(94308);const US=bi.Z.extend({name:"AdvertisingNoticeModalModel",sessionAttrs:{isSaving:zn.Z.boolean,isSaved:zn.Z.boolean,isVendorsPopulated:zn.Z.boolean,isVendorsPending:zn.Z.boolean,vendorsError:zn.Z.object},sessionRelations:{vendors:{relationClass:VS.Z,deferred:!0}},defaults:{isSaving:!1,isSaved:!1,isVendorsPopulated:!1,isVendorsPending:!0,vendorsError:null}});var FS=r(65372),BS=Object.defineProperty,_S=Object.defineProperties,zS=Object.getOwnPropertyDescriptors,HS=Object.getOwnPropertySymbols,WS=Object.prototype.hasOwnProperty,GS=Object.prototype.propertyIsEnumerable,QS=(e,t,r)=>t in e?BS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$S=(e,t)=>{for(var r in t||(t={}))WS.call(t,r)&&QS(e,r,t[r]);if(HS)for(var r of HS(t))GS.call(t,r)&&QS(e,r,t[r]);return e},KS=(e,t)=>_S(e,zS(t));const qS=KS($S({},FS.Z),{getPaginatedUrl(e){const t=this.get("beginsAt"),r=this.get("endsAt");if(null!=t||null!=r){const n={"endsAt>":t,"beginsAt<":r};return b.Z.join(e,n)}return e},fetchRange(e){const t=KS($S({},e),{remove:!1});return e.prepend&&(t.at=0),this.set({beginsAt:e.start,endsAt:e.end}),this.fetch(t).promise()},repopulateRange(e=0){const t=this.get("populatedRange"),r=t.start,n=t.end;return this.set({beginsAt:r,endsAt:n}),this.abortPendingPopulate(),this.fetch()},updatePopulatedRange(){const e=this.get("beginsAt"),t=this.get("endsAt"),r=this.get("populatedRange"),n=r.start,i=r.end;let s,a;this.getCollection().length?n?(s=Math.min(n,null==e?1/0:e),a=Math.max(i,null==t?-1/0:t)):(s=e||n,a=t||i):(s=0,a=0),this.set("populatedRange",{start:s,end:a,size:a-s}),this.set("isPopulated",a-s>0)}}),YS=St.Z.extend({mixins:[qS],name:"ChannelGridMetadataListModel",sessionAttrs:{isMetadataList:zn.Z.boolean,containerKey:zn.Z.string,entityKey:zn.Z.string,containerTitle:zn.Z.string,beginsAt:zn.Z.integer,endsAt:zn.Z.integer,populatedRange:zn.Z.object,isPending:zn.Z.boolean,isPopulated:zn.Z.boolean,error:zn.Z.object},defaults:()=>({isMetadataList:!0,populatedRange:{start:0,end:0,size:0},isPending:!0,isPopulated:!1,error:null})});var XS=r(98065);const JS=bi.Z.extend({name:"ProviderTagModel",context:["server","provider"],idAttribute:"id",rootPropertyName:"Directory",syncedAttrs:{id:zn.Z.integer,filter:zn.Z.string,tag:zn.Z.string,tagType:zn.Z.integer,tagValue:zn.Z.integer,thumb:zn.Z.string,channelCallSign:zn.Z.string,channelIdentifier:zn.Z.string,channelVcn:zn.Z.string}}),eP=fi.Z.extend({name:"ProviderTagCollection",context:["server","provider","type"],model:JS,cache:new XS.Z,url(){const e={type:this.type};return b.Z.join([this.provider.get("identifier"),"tags"],e)}}),tP=bi.Z.extend({name:"ChannelGridPageModel",sessionAttrs:{serverEntityID:zn.Z.string,providerEntityID:zn.Z.string,containerKey:zn.Z.string,directoryKey:zn.Z.string,startTime:zn.Z.integer,visibleColumns:zn.Z.integer,columnTimes:zn.Z.array,columnWidth:zn.Z.float,viewportWidth:zn.Z.integer,viewportHeight:zn.Z.integer,airedProgress:zn.Z.float,isChannelsListPending:zn.Z.boolean,isChannelsListPopulated:zn.Z.boolean,channelsListError:zn.Z.object},sessionRelations:{metadataList:{relationClass:YS,deferred:!0},channelsList:{relationClass:eP,deferred:!0}},defaults:()=>({startTime:0,visibleColumns:1,columnTimes:[],columnWidth:0,viewportWidth:0,viewportHeight:0,airedProgress:0,isChannelsListPending:!0,isChannelsListPopulated:!1,channelsListError:null})});var rP=r(90298),nP=r(39665);const iP=bi.Z.extend({name:"MediaSubscriptionModalModel",sessionAttrs:{isMediaSubscriptionPending:zn.Z.boolean,isMediaSubscriptionPopulated:zn.Z.boolean,mediaSubscriptionError:zn.Z.string,isMediaSubscriptionSaving:zn.Z.boolean,mediaSubscriptionSaveError:zn.Z.string,isMediaSubscriptionMoving:zn.Z.boolean,mediaSubscriptionMoveError:zn.Z.string,isMediaSubscriptionDeleting:zn.Z.boolean,mediaSubscriptionDeleteError:zn.Z.string},sessionRelations:{templates:{relationClass:nP.Z,deferred:!0},mediaSubscription:{relationClass:rP.Z,deferred:!0}},defaults:{isMediaSubscriptionPending:!0,isMediaSubscriptionPopulated:!1,mediaSubscriptionError:null,isMediaSubscriptionSaving:!1,mediaSubscriptionSaveError:null,isMediaSubscriptionMoving:!1,mediaSubscriptionMoveError:null,isMediaSubscriptionDeleting:!1,mediaSubscriptionDeleteError:null}});var sP=r(53998),aP=r(95994),oP=r(70919),lP=r(64336),cP=r(11574);const dP=(0,Ie.Z)(),uP=bi.Z.extend({name:"PlayerModel",sessionAttrs:{serverEntityID:zn.Z.string,providerEntityID:zn.Z.string,playbackSessionID:zn.Z.string,syncplaySessionRoomID:zn.Z.string,isOpen:zn.Z.boolean,previousOpenState:zn.Z.oneOf(cP.K,cP.y),openState:zn.Z.oneOf(cP.K,cP.y),isPlayQueueVisible:zn.Z.boolean,isLyricsVisible:zn.Z.boolean,isPostPlayVisible:zn.Z.boolean,isSettingsVisible:zn.Z.boolean,isChaptersVisible:zn.Z.boolean,isSubtitlesOffsetSettingsVisible:zn.Z.boolean,isWatchTogetherLobbyVisible:zn.Z.boolean,isWatchTogetherParticipantsVisible:zn.Z.boolean,confirmPlayerUpsellPayload:zn.Z.object,confirmPlaybackPayload:zn.Z.object,confirmOffsetPayload:zn.Z.object,confirmRemoteToLocal:zn.Z.boolean,confirmLocalToRemote:zn.Z.oneOf(lP.m$,lP.YN,lP.o1).isRequired,decisions:zn.Z.object.isRequired,currentDecision:zn.Z.object,startMetadataItemEntityID:zn.Z.string,startOffsetMilliseconds:zn.Z.integer,startMediaIndex:zn.Z.integer,positionSeconds:zn.Z.integer,nextPositionSeconds:zn.Z.integer,lastSeekPositionSeconds:zn.Z.integer,durationSeconds:zn.Z.integer,seekStartSeconds:zn.Z.integer,seekEndSeconds:zn.Z.integer,bandwidthTimeline:zn.Z.object,lastInteractedAt:zn.Z.integer,itemPlaybackTime:zn.Z.integer,sessionPlaybackTime:zn.Z.integer,playbackSpeed:zn.Z.float,isPlayQueueLoading:zn.Z.boolean.isRequired,isLiveTVTuning:zn.Z.boolean.isRequired,isMediaLoading:zn.Z.boolean.isRequired,isPostPlayLoading:zn.Z.boolean.isRequired,isPaused:zn.Z.boolean.isRequired,isBuffering:zn.Z.boolean.isRequired,repeatAll:zn.Z.boolean.isRequired,repeatOne:zn.Z.boolean.isRequired,mediaIndex:zn.Z.integer,partIndex:zn.Z.integer,qualityIndex:zn.Z.integer,availableQualities:zn.Z.array.isRequired,controllable:zn.Z.object,metricsPage:zn.Z.string,metricsContextTuple:zn.Z.array,metricsSetting:zn.Z.string,metricsAutoPlay:zn.Z.boolean,metricsPlayer:zn.Z.oneOf(...oP.QN),hasError:zn.Z.boolean.isRequired,errorMessage:zn.Z.string,errorCode:zn.Z.string,errorCategory:zn.Z.string,playbackStartTime:zn.Z.integer,hasConflicts:zn.Z.boolean.isRequired,isConflictCancelling:zn.Z.boolean,cancelConflictError:zn.Z.object,confirmLiveTVPlayback:zn.Z.boolean.isRequired,adState:zn.Z.string,adPositionSeconds:zn.Z.integer,adDurationSeconds:zn.Z.integer,adDisplayIndex:zn.Z.integer,adDisplayTotal:zn.Z.integer,adTimeOffsetSeconds:zn.Z.oneOfType(zn.Z.integer,zn.Z.float),advertisingNoticePayload:zn.Z.object,bufferedRanges:zn.Z.array,canPlayThrough:zn.Z.boolean,mediaWidth:zn.Z.integer,mediaHeight:zn.Z.integer},derivedAttrs:{isWatchTogether(){return!!this.get("syncplaySessionRoomID")}},sessionRelations:{playQueue:{relationClass:bi.Z,deferred:!0},relatedHubs:{relationClass:sP.Z,deferred:!0},liveTVSession:{relationClass:aP.Z,deferred:!0}},defaults:()=>({playbackSessionID:dP,playbackSpeed:1,isOpen:!1,isPlayQueueVisible:!1,isLyricsVisible:!1,isPostPlayVisible:!1,isSettingsVisible:!1,isChaptersVisible:!1,isSubtitlesOffsetSettingsVisible:!1,isWatchTogetherLobbyVisible:!1,isWatchTogetherParticipantsVisible:!1,confirmPlaybackPayload:null,confirmOffsetPayload:null,confirmRemoteToLocal:!1,confirmLocalToRemote:lP.m$,decisions:{},startMetadataItemEntityID:null,startOffsetMilliseconds:null,startMediaIndex:null,positionSeconds:0,nextPositionSeconds:null,lastSeekPositionSeconds:null,durationSeconds:0,seekStartSeconds:0,seekEndSeconds:0,itemPlaybackTime:0,sessionPlaybackTime:0,isPlayQueueLoading:!1,isLiveTVTuning:!1,isMediaLoading:!1,isPostPlayLoading:!1,isPaused:!1,isBuffering:!1,repeatAll:!1,repeatOne:!1,availableQualities:[],metricsAutoPlay:!1,hasError:!1,errorMessage:null,errorCode:null,errorCategory:null,playbackStartTime:null,hasConflicts:!1,isConflictCancelling:!1,cancelConflictError:null,confirmLiveTVPlayback:!1,adState:null,adPositionSeconds:null,adDurationSeconds:null,adDisplayIndex:null,adDisplayTotal:null,adTimeOffsetSeconds:null,advertisingNoticePayload:null,bufferedRanges:[],canPlayThrough:!1,mediaWidth:null,mediaHeight:null})}),pP=bi.Z.extend({name:"ProviderSettingsPageModel",context:["server","provider"],sessionAttrs:{isUpdatePending:zn.Z.boolean,updateError:zn.Z.object},defaults:{isUpdatePending:!1,updateError:null}});var mP=r(52094),hP=r(10415);const gP=bi.Z.extend({name:"RecordingSchedulePageModel",sessionAttrs:{isPagePopulated:zn.Z.boolean,isMediaSubscriptionsPending:zn.Z.boolean,isMediaSubscriptionsPopulated:zn.Z.boolean,mediaSubscriptionsError:zn.Z.object,isCalendarPending:zn.Z.boolean,isCalendarPopulated:zn.Z.boolean,calendarError:zn.Z.object,mediaSubscriptionMoveError:zn.Z.string},sessionRelations:{mediaSubscriptions:{relationClass:hP.Z,deferred:!0},calendar:{relationClass:mP.Z,deferred:!0}},defaults:{isPagePopulated:!1,isMediaSubscriptionsPending:!1,isMediaSubscriptionsPopulated:!1,mediaSubscriptionsError:null,isCalendarPending:!1,isCalendarPopulated:!1,calendarError:null,mediaSubscriptionMoveError:null}});var yP=r(46291),vP=r(78449);const fP=bi.Z.extend({name:"WatchTogetherRoomUserModel",syncedAttrs:{id:zn.Z.integer.isRequired,subscription:zn.Z.boolean.isRequired,thumb:zn.Z.string.isRequired,title:zn.Z.string.isRequired,uuid:zn.Z.string.isRequired}}),bP=fi.Z.extend({name:"WatchTogetherRoomUserCollection",model:fP}),ZP=bi.Z.extend({name:"WatchTogetherRoomModel",entityType:Yu.r8,entityID(e=this.state){return(0,qu.Z)(this.entityType,e.id)},mergeStrategy:vP.Z,sessionAttrs:{isMetadataItemPending:zn.Z.boolean,isMetadataItemPopulated:zn.Z.boolean,metadataItemError:zn.Z.string},syncedAttrs:{id:zn.Z.string.isRequired,title:zn.Z.string.isRequired,sourceUri:zn.Z.string.isRequired,startsAt:zn.Z.integer.isRequired,endsAt:zn.Z.integer.isRequired,updatedAt:zn.Z.integer.isRequired,syncplayHost:zn.Z.string.isRequired,syncplayPort:zn.Z.integer.isRequired},syncedRelations:{metadataItem:{relationClass:Pt.Z,deferred:!0},users:{relationClass:bP}},defaults:{isMetadataItemPending:!0,isMetadataItemPopulated:!1,metadataItemError:null}}),SP=fi.Z.extend({name:"WatchTogetherRoomCollection",model:ZP}),PP=bi.Z.extend({name:"WatchTogetherModel",sessionAttrs:{isRoomsPending:zn.Z.boolean,isRoomsPopulated:zn.Z.boolean,roomsError:zn.Z.string,isInvitePending:zn.Z.boolean,isInviteCompleted:zn.Z.boolean,inviteError:zn.Z.string,sessionError:zn.Z.string},sessionRelations:{session:{relationClass:yP.Z,deferred:!0},rooms:{relationClass:SP}},defaults:()=>({isRoomsPending:!0,isRoomsPopulated:!1,roomsError:void 0,isInvitePending:!1,isInviteCompleted:!1,inviteError:void 0,sessionError:void 0})}),IP=bi.Z.extend({name:"MultiSelectItemModel",sessionAttrs:{id:zn.Z.any.isRequired,type:zn.Z.string.isRequired},sessionRelations:{model:{relationClass:bi.Z,deferred:!0}}}),EP=fi.Z.extend({name:"MultiSelectItemCollection",model:IP}),wP=bi.Z.extend({name:"MultiSelectModel",sessionAttrs:{activeSelectionRange:zn.Z.object},sessionRelations:{activeSelectionItems:{relationClass:EP}},derivedAttrs:{activeSelectionType(){const e=this.get("activeSelectionItems").first();if(e)return e.get("type")}},initialize(){this.listenTo(this.get("activeSelectionItems"),{remove:this.resetSelectionRange,reset:this.resetSelectionRange})},listenToCollection(e){this.stopListening(e),this.listenTo(e,{reset:this.onCollectionReset,remove:this.onCollectionRemove})},resetSelectionRange(){this.set("activeSelectionRange",null)},onCollectionReset(e,t){const r=this.get("activeSelectionItems"),n=t.previousModels;v().each(n,(t=>{e.contains(t)||r.remove(t.id)}))},onCollectionRemove(e){this.get("activeSelectionItems").remove(e.id)}}),CP=bi.Z.extend({name:"AddToPlaylistMenuModel",sessionAttrs:{uri:zn.Z.string},sessionRelations:{recentPlaylists:{relationClass:St.Z,deferred:!0}}});var MP=r(51196),DP=r(5518);const OP=bi.Z.extend({name:"AddToPlaylistModalModel",sessionAttrs:{providerEntityID:zn.Z.string,containerKey:zn.Z.string,type:zn.Z.string,title:zn.Z.string,uri:zn.Z.string,smart:zn.Z.boolean,readOnly:zn.Z.boolean,isUpdating:zn.Z.boolean,error:zn.Z.object},sessionRelations:{server:{relationClass:qt.ZP,deferred:!0},provider:{relationClass:DP.Z,deferred:!0},metadataItem:{relationClass:Pt.Z,deferred:!0},metadataList:{relationClass:St.Z,deferred:!0},multiSelect:{relationClass:wP,deferred:!0},playQueue:{relationClass:MP.Z,deferred:!0},playlists:{relationClass:St.Z,deferred:!0}},defaults:{title:"",smart:!1,readOnly:!1,isUpdating:!1}}),TP=bi.Z.extend({name:"SubtitlesUploadModalModel",sessionAttrs:{isUploading:zn.Z.boolean,isUploaded:zn.Z.boolean,error:zn.Z.string},defaults:{isUploading:!1,isUploaded:!1,error:null}}),xP=bi.Z.extend({name:"ServerLogPageModel",sessionAttrs:{logLines:zn.Z.array.isRequired,unfilteredLogLinesCount:zn.Z.integer.isRequired,filter:zn.Z.string.isRequired,logLevels:zn.Z.array.isRequired,highlightedLineIndex:zn.Z.integer,timeFilterStart:zn.Z.string.isRequired,timeFilterEnd:zn.Z.string.isRequired,isTimeFilterStartValid:zn.Z.boolean.isRequired,isTimeFilterEndValid:zn.Z.boolean.isRequired,showTimeFilter:zn.Z.boolean.isRequired,showRawText:zn.Z.boolean.isRequired},defaults:()=>({logLines:[],unfilteredLogLinesCount:0,filter:"",logLevels:[],timeFilterStart:"",timeFilterEnd:"",isTimeFilterStartValid:!0,isTimeFilterEndValid:!0,showRawText:!1,showTimeFilter:!1})}),AP=bi.Z.extend({name:"AccountSettingsPageModel",sessionAttrs:{isUpdatingUserProfile:zn.Z.boolean.isRequired,updateUserProfileError:zn.Z.string},defaults:{isUpdatingUserProfile:!1,updateUserProfileError:null}}),kP=bi.Z.extend({name:"AuthCodeExchangeModel",sessionAttrs:{code:zn.Z.string,pinID:zn.Z.integer,pinIDInitial:zn.Z.integer,pinTimeout:zn.Z.integer,authToken:zn.Z.string,isBusy:zn.Z.boolean.isRequired,errorMessage:zn.Z.string,fatalErrorMessage:zn.Z.string},defaults:{code:null,pinID:null,pinIDInitial:null,pinTimeout:null,authToken:null,isBusy:!1,errorMessage:null,fatalErrorMessage:null}}),NP=bi.Z.extend({name:"BackgroundModel",sessionAttrs:{imageUrl:zn.Z.string,themeMusicUrl:zn.Z.string,allowBlur:zn.Z.boolean,isBackgroundPending:zn.Z.boolean},sessionRelations:{server:{relationClass:qt.ZP,deferred:!0},provider:{relationClass:DP.Z,deferred:!0}},defaults:{allowBlur:!0,isBackgroundPending:!1}});var RP=r(78044);const LP=bi.Z.extend({name:"DVRSettingsUIModel",sessionAttrs:{isDvrsPending:zn.Z.boolean,isDvrsPopulated:zn.Z.boolean,dvrsError:zn.Z.object,isUIPopulated:zn.Z.boolean},sessionRelations:{dvrs:{relationClass:RP.Z,deferred:!0}},defaults:{isDvrsPending:!1,isDvrsPopulated:!1,dvrsError:null,isUIPopulated:!1}}),jP=bi.Z.extend({name:"DiscoverPageModel",sessionAttrs:{providerEntityID:zn.Z.string,hubKey:zn.Z.string,isHubsPending:zn.Z.boolean.isRequired,isHubsPopulated:zn.Z.boolean.isRequired,hubsError:zn.Z.object,hubsTitle:zn.Z.string,isPromotedHubsPending:zn.Z.boolean.isRequired,isPromotedHubsPopulated:zn.Z.boolean.isRequired,promotedHubsError:zn.Z.object,knownPromotedHubCloudProviderIDs:zn.Z.array.isRequired},sessionRelations:{hubs:{relationClass:sP.Z,deferred:!0},promotedHubs:{relationClass:sP.Z,deferred:!0}},defaults:()=>({isHubsPending:!0,isHubsPopulated:!1,hubsError:null,hubsTitle:null,isPromotedHubsPending:!0,isPromotedHubsPopulated:!1,promotedHubsError:null,knownPromotedHubCloudProviderIDs:[]})});var VP=r(26773);const UP=bi.Z.extend({name:"OnlineMediaSourcesPageModel",sessionAttrs:{optOutStatuses:zn.Z.object,isOptOutStatusesPending:zn.Z.boolean,optOutStatusesError:zn.Z.object,isAvailableProvidersPending:zn.Z.boolean,isAvailableProvidersPopulated:zn.Z.boolean,availableProvidersError:zn.Z.object,isUpdatePending:zn.Z.boolean,updateError:zn.Z.object},sessionRelations:{availableProviders:{relationClass:VP.Z,deferred:!0}},defaults:{isOptOutStatusesPending:!0,optOutStatusesError:null,isAvailableProvidersPending:!0,isAvailableProvidersPopulated:!1,availableProvidersError:null,isUpdatePending:!1,updateError:null}});var FP=r(34317);const BP=bi.Z.extend({name:"PlaylistPageModel",sessionAttrs:{serverEntityID:zn.Z.string,providerEntityID:zn.Z.string,metadataKey:zn.Z.string,isPlaylistPending:zn.Z.boolean.isRequired,isPlaylistPopulated:zn.Z.boolean.isRequired,playlistError:zn.Z.object,isPlaylistItemListPending:zn.Z.boolean.isRequired,isPlaylistItemListPopulated:zn.Z.boolean.isRequired,playlistItemListError:zn.Z.object},sessionRelations:{playlist:{relationClass:Pt.Z,deferred:!0},playlistItemList:{relationClass:FP.Z,deferred:!0}},defaults:{isPlaylistPending:!0,isPlaylistPopulated:!1,playlistError:null,isPlaylistItemListPending:!0,isPlaylistItemListPopulated:!1,playlistItemListError:null}});var _P=r(89883),zP=r(20297);const HP=bi.Z.extend({name:"PlaylistsPageModel",sessionAttrs:{serverEntityID:zn.Z.string,libraryKey:zn.Z.string,containerKey:zn.Z.string,isLibraryDetailsPending:zn.Z.boolean.isRequired,isLibraryDetailsPopulated:zn.Z.boolean.isRequired,libraryDetailsError:zn.Z.object,isSortsPending:zn.Z.boolean.isRequired,isSortsPopulated:zn.Z.boolean.isRequired,sortsError:zn.Z.object},sessionRelations:{libraryDetails:{relationClass:_P.Z,deferred:!0},playlists:{relationClass:St.Z,deferred:!0},sorts:{relationClass:zP.Z,deferred:!0}},defaults:{isLibraryDetailsPending:!0,isLibraryDetailsPopulated:!1,libraryDetailsError:null,isSortsPending:!0,isSortsPopulated:!1,sortsError:null}}),WP=bi.Z.extend({name:"PrePlayPageModel",sessionAttrs:{providerEntityID:zn.Z.string,metadataKey:zn.Z.string,descendantKey:zn.Z.string,siblingKey:zn.Z.string,isMetadataItemPending:zn.Z.boolean.isRequired,isMetadataItemPopulated:zn.Z.boolean.isRequired,metadataItemError:zn.Z.object,isRelatedHubsPending:zn.Z.boolean.isRequired,isRelatedHubsPopulated:zn.Z.boolean.isRequired,relatedHubsError:zn.Z.object,isAugmentedHubsPending:zn.Z.boolean.isRequired,isAugmentedHubsPopulated:zn.Z.boolean.isRequired,augmentedHubsError:zn.Z.object,isFileUnavailable:zn.Z.boolean,decisionMediaItem:zn.Z.object},sessionRelations:{metadataItem:{relationClass:Pt.Z,deferred:!0},descendantList:{relationClass:St.Z,deferred:!0},siblingList:{relationClass:St.Z,deferred:!0},relatedHubs:{relationClass:sP.Z,deferred:!0},augmentedHubs:{relationClass:sP.Z,deferred:!0}},defaults:{isMetadataItemPending:!0,isMetadataItemPopulated:!1,metadataItemError:null,isRelatedHubsPending:!0,isRelatedHubsPopulated:!1,relatedHubsError:null,isAugmentedHubsPending:!0,isAugmentedHubsPopulated:!1,augmentedHubsError:null,isFileUnavailable:!1}});var GP=r(8218);const QP=bi.Z.extend({name:"MomentModel",context:["server","provider"],idAttribute:"id",rootPropertyName:"Directory",syncedAttrs:{id:zn.Z.string,title:zn.Z.string,size:zn.Z.integer,avgAR:zn.Z.float,startsAt:zn.Z.integer,endsAt:zn.Z.integer}}),$P=fi.Z.extend({name:"MomentCollection",context:["server","provider"],model:QP}),KP=bi.Z.extend({name:"MomentListModel",context:["server","provider"],url(){return this.get("momentKey")},sessionAttrs:{momentKey:zn.Z.string},syncedAttrs:{key:zn.Z.string},syncedRelations:{moments:{relationClass:$P,rootPropertyName:"Directory"}}}),qP=bi.Z.extend({name:"TimelinePageModel",sessionAttrs:{serverEntityID:zn.Z.string,providerEntityID:zn.Z.string,momentKey:zn.Z.string,isDetailsPending:zn.Z.boolean.isRequired,isDetailsPopulated:zn.Z.boolean.isRequired,detailsError:zn.Z.object,isMomentListPending:zn.Z.boolean.isRequired,isMomentListPopulated:zn.Z.boolean.isRequired,momentListError:zn.Z.object},sessionRelations:{metadataList:{relationClass:St.Z,deferred:!0},details:{relationClass:_P.Z,deferred:!0},momentList:{relationClass:KP,deferred:!0}},defaults:{isDetailsPending:!0,isDetailsPopulated:!1,detailsError:null,isMomentListPending:!0,isMomentListPopulated:!1,momentListError:null}});var YP=r(76569);const XP=bi.Z.extend({name:"UserSharingSettingsPageModel",sessionAttrs:{filterOptionsTags:zn.Z.object,isFilterOptionsTagsPopulating:zn.Z.boolean,isFilterOptionsTagsPopulated:zn.Z.boolean,isUpdatingFriend:zn.Z.boolean,updateFriendError:zn.Z.string,ownedSharedSources:zn.Z.array,receivedSharedSources:zn.Z.array,isSharedSourcesPopulating:zn.Z.boolean,isSharedSourcesPopulated:zn.Z.boolean,sharedSourcesError:zn.Z.string,deleteSharedItemID:zn.Z.integer,isServerOverviewsPopulating:zn.Z.boolean,isServerOverviewsPopulated:zn.Z.boolean,isServerSharesPopulating:zn.Z.boolean,isServerSharesPopulated:zn.Z.boolean,serverSharesError:zn.Z.string,isSharingPending:zn.Z.boolean,isSharingCompleted:zn.Z.boolean,sharingError:zn.Z.string,isRemoveServerSharePending:zn.Z.boolean,isRemoveServerShareCompleted:zn.Z.boolean,removeServerShareError:zn.Z.string},sessionRelations:{serverOverviews:{relationClass:YP.Z,deferred:!0}},defaults:()=>({filterOptionsTags:{},isFilterOptionsTagsPopulating:!1,isFilterOptionsTagsPopulated:!1,isUpdatingFriend:!1,updateFriendError:null,ownedSharedSources:[],receivedSharedSources:[],isSharedSourcesPopulating:!1,isSharedSourcesPopulated:!1,sharedSourcesError:null,deleteSharedItemID:null,isServerOverviewsPopulating:!1,isServerOverviewsPopulated:!1,isServerSharesPopulating:!1,isServerSharesPopulated:!1,serverSharesError:null,isSharingPending:!1,isSharingCompleted:!1,sharingError:null,isRemoveServerSharePending:!1,isRemoveServerShareCompleted:!1,removeServerShareError:null})}),JP=bi.Z.extend({name:"DesktopUIModel",sessionRelations:{background:{relationClass:NP},authCodeExchange:{relationClass:kP},discoverPage:{relationClass:jP},prePlayPage:{relationClass:WP},timelinePage:{relationClass:qP},playlistsPage:{relationClass:HP},dvrSettingsUI:{relationClass:LP},recordingSchedulePage:{relationClass:gP},channelGridPage:{relationClass:tP},mediaSubscriptionModal:{relationClass:iP},photoPlayer:{relationClass:uP},audioVideoPlayer:{relationClass:uP},onlineMediaSourcesPage:{relationClass:UP},accountSettingsPage:{relationClass:AP},playlistPage:{relationClass:BP},providerSettingsPage:{relationClass:pP},multiSelect:{relationClass:wP},serverLogPage:{relationClass:xP},subtitlesModal:{relationClass:kS},subtitlesUploadModal:{relationClass:TP},addToPlaylistMenu:{relationClass:CP},addToPlaylistModal:{relationClass:OP},shareModal:{relationClass:GP.Z},userSharingSettingsPage:{relationClass:XP},providerIntegrations:{relationClass:jS},advertisingNoticeModal:{relationClass:US},watchTogether:{relationClass:PP}}});var eI=r(99546),tI=r.n(eI),rI=r(90573),nI=r(28388),iI=r(94080),sI=r(106),aI=r(96630),oI=Object.defineProperty,lI=Object.getOwnPropertySymbols,cI=Object.prototype.hasOwnProperty,dI=Object.prototype.propertyIsEnumerable,uI=(e,t,r)=>t in e?oI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pI=(e,t)=>{for(var r in t||(t={}))cI.call(t,r)&&uI(e,r,t[r]);if(lI)for(var r of lI(t))dI.call(t,r)&&uI(e,r,t[r]);return e};const mI=bi.Z.extend({name:"AdConsentModel",context:["server"],url:"/api/v2/user/consent",responseType:NS.AV,syncedAttrs:{language:zn.Z.string,remindAt:zn.Z.integer,updatedAt:zn.Z.integer,vendorListVersion:zn.Z.integer,vendors:zn.Z.array}}),hI=bi.Z.extend({name:"GeoIPModel",context:["server"],url:"/api/v2/geoip",responseType:NS.AV,syncedAttrs:{european_union_member:zn.Z.boolean}});var gI=r(43613);const yI=fi.Z.extend({name:"FriendCollection2",context:["server"],model:gI.Z,url:"/api/users"}),vI=bi.Z.extend({name:"HomeDetailsModel",context:["server"],url:"/api/v2/home",responseType:NS.AV,sessionAttrs:{isTogglingGuestUser:zn.Z.boolean},syncedAttrs:{id:zn.Z.integer,guestUserID:zn.Z.integer,guestEnabled:zn.Z.boolean,subscription:zn.Z.boolean,name:zn.Z.string},defaults:{isTogglingGuestUser:!1}});var fI=r(31544),bI=r(2674);const ZI=bi.Z.extend({name:"UserOptOutModel",IdAttribute:"key",syncedAttrs:{key:zn.Z.string,value:zn.Z.string}}),SI=fi.Z.extend({name:"UserOptOutCollection",context:["server"],model:ZI,url:"/api/v2/user/settings/opt_outs",responseType(){return(0,Pl.Z)(this.server)},augmentResponse:e=>Object.keys(e).map((t=>({key:t,value:e[t]})))}),PI=bi.Z.extend({name:"UserProfileModel",context:["server"],url:"/api/v2/user/profile",syncedAttrs:{autoSelectAudio:zn.Z.boolean,autoSelectSubtitle:zn.Z.integer,defaultAudioLanguage:zn.Z.string,defaultSubtitleLanguage:zn.Z.string,defaultSubtitleAccessibility:zn.Z.integer,defaultSubtitleForced:zn.Z.integer}});var II=r(88689),EI=r(82058),wI=r(45663);const CI=fi.Z.extend({name:"UserSettingCollection",context:["server"],model:wI.Z});var MI=r(48607),DI=Object.defineProperty,OI=Object.defineProperties,TI=Object.getOwnPropertyDescriptors,xI=Object.getOwnPropertySymbols,AI=Object.prototype.hasOwnProperty,kI=Object.prototype.propertyIsEnumerable,NI=(e,t,r)=>t in e?DI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,RI=(e,t)=>{for(var r in t||(t={}))AI.call(t,r)&&NI(e,r,t[r]);if(xI)for(var r of xI(t))kI.call(t,r)&&NI(e,r,t[r]);return e},LI=(e,t)=>OI(e,TI(t));const jI=bi.Z.extend({mixins:[Ep.Z],name:"UserModel",context:["server"],url(){return b.Z.join("/api/v2/user",an(this))},sessionAttrs:{isSignedIn:zn.Z.boolean.isRequired,hasAttemptedSignIn:zn.Z.boolean.isRequired,hasInvalidToken:zn.Z.boolean.isRequired,hasInvalidAnonymousUserToken:zn.Z.boolean.isRequired,lastPrimaryServerID:zn.Z.string,lockState:zn.Z.oneOf(Yr.Ik.Pending,Yr.Ik.Locked,Yr.Ik.Unlocked).isRequired,homeUsers:zn.Z.instanceOf(fI.Z).isRequired,isFeaturesPending:zn.Z.boolean.isRequired,isFeaturesPopulated:zn.Z.boolean.isRequired,featuresError:zn.Z.object,isAllFriendsPending:zn.Z.boolean.isRequired,isAllFriendsPopulated:zn.Z.boolean.isRequired,allFriendsError:zn.Z.object,isProvidersPending:zn.Z.boolean.isRequired,isProvidersPopulated:zn.Z.boolean.isRequired,providersError:zn.Z.object,isOptOutsPending:zn.Z.boolean.isRequired,isOptOutsPopulated:zn.Z.boolean.isRequired,optOutsError:zn.Z.object},syncedAttrs:{id:zn.Z.integer,uuid:zn.Z.string,authToken:zn.Z.string,anonymous:zn.Z.boolean,username:zn.Z.string,friendlyName:zn.Z.string,email:zn.Z.string,confirmed:zn.Z.boolean,emailOnlyAuth:zn.Z.boolean,title:zn.Z.string,subscriptionDescription:zn.Z.string,locale:zn.Z.string,country:zn.Z.string,thumb:zn.Z.string,pin:zn.Z.string,home:zn.Z.boolean,restricted:zn.Z.boolean,restrictionProfile:zn.Z.string,guest:zn.Z.boolean,homeSize:zn.Z.integer,maxHomeSize:zn.Z.integer,queueUid:zn.Z.string,queueEmail:zn.Z.string,hasAllEntitlements:zn.Z.boolean,mailingListActive:zn.Z.boolean,experimentalFeatures:zn.Z.boolean,hasPassword:zn.Z.boolean,twoFactorEnabled:zn.Z.boolean,mailingListStatus:zn.Z.oneOf(Yr.dK.Empty,Yr.dK.Unsubscribed,Yr.dK.Active,Yr.dK.Error,Yr.dK.Removed),adsConsent:zn.Z.boolean,adsConsentSetAt:zn.Z.integer,adsConsentReminderAt:zn.Z.integer},sessionRelations:{features:{relationClass:iI.Z},allFriends:{relationClass:yI},providers:{relationClass:nI.Z},homeDetails:{relationClass:vI},optOuts:{relationClass:SI}},syncedRelations:{subscriptions:{relationClass:MI.Z},pastSubscriptions:{relationClass:MI.Z},roles:{relationClass:II.Z},entitlements:{relationClass:bI.Z},settings:{relationClass:CI},consent:{relationClass:mI},geo:{relationClass:hI},experienceSettings:()=>({relationClass:(0,g.DB)("UserExperienceSettingsModel")}),services:{relationClass:EI.Z},profile:{relationClass:PI}},derivedAttrs:{isLocked(){return this.get("lockState")===Yr.Ik.Locked},isUnlocked(){return this.get("lockState")===Yr.Ik.Unlocked},isFullUser(){return!!this.get("username")||!!this.get("anonymous")},isEmployee(){return!!this.get("roles").get("employee")},isNinja(){return this.get("isEmployee")||!!this.get("roles").get("ninja")},hasPlexSubscription(){return this.get("subscriptions").some((e=>{const t=e.get("state");return t===sI.iN||t===sI.j5}))},hasPlexPass(){return this.get("subscriptions").some((e=>{const t=e.get("type"),r=e.get("state");return t===ig.G5&&(r===sI.iN||r===sI.j5)}))},canGoPremium(){const e=this.get("homeSize")>1,t=!1===this.get("homeDetails").get("subscription");return this.get("signedIn")&&!this.get("anonymous")&&!this.get("restricted")&&!this.get("hasPlexSubscription")&&(!e||t)},signedIn(){return this.get("isSignedIn")},locked(){const e=this.get("lockState");return e===Yr.Ik.Locked||e!==Yr.Ik.Unlocked&&null}},defaults(){const e={server:this.server,parent:this};return{id:0,isSignedIn:!1,hasAttemptedSignIn:!1,hasInvalidToken:!1,hasInvalidAnonymousUserToken:!1,hasPassword:!0,lockState:Yr.Ik.Pending,homeUsers:new fI.Z([],e),twoFactorEnabled:!1,isFeaturesPending:!0,isFeaturesPopulated:!1,featuresError:null,isAllFriendsPending:!0,isAllFriendsPopulated:!1,allFriendsError:null,isProvidersPending:!0,isProvidersPopulated:!1,providersError:null,isOptOutsPending:!0,isOptOutsPopulated:!1,optOutsError:null}},initialize(e,t){this._resetPopulate(),this.onHomeUsersChange(this,this.get("homeUsers")),this.on("change:homeUsers",this.onHomeUsersChange,this),this.listenTo(this.server,{"change:isConnected":this.onServerConnectedChange,"change:isUnavailable":this.onServerUnavailableChange})},uninitialize(){this.off("change:homeUsers",this.onHomeUsersChange,this),this.stopListening()},fetch(){return Eu.ZP.Model.prototype.fetch.apply(this,arguments)},augmentResponse(e={}){const t=e,{roles:r,entitlements:n,settings:i,providers:s,subscriptions:a,pastSubscriptions:o}=t,l=((e,t)=>{var r={};for(var n in e)AI.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&xI)for(var n of xI(e))t.indexOf(n)<0&&kI.call(e,n)&&(r[n]=e[n]);return r})(t,["roles","entitlements","settings","providers","subscriptions","pastSubscriptions"]);let c=i&&i.setting?i.setting:[];c=Array.isArray(c)?c:[c];const d=this.get("experienceSettings");let u=!1;const p=c.reduce(((e,t)=>(t.id===Pi.U?(u=!0,e.experienceSettings=LI(RI({},(0,wn.Z)(t.value)),{updatedAt:t.updatedAt})):e.settings.push(t),e)),{settings:[],experienceSettings:{}});return!u&&d&&(p.experienceSettings=d.toJSON({syncedOnly:!0})),l.gdprConsent&&(l.adsConsent=l.gdprConsent),l.gdprSetAt&&(l.adsConsentSetAt=l.gdprSetAt),l.gdprReminderAt&&(l.adsConsentReminderAt=l.gdprReminderAt),LI(RI(RI({},l),p),{roles:r&&r.role,hasAllEntitlements:n&&n.all,entitlements:n&&n.entitlement,services:s&&s.provider,subscriptions:a&&a.subscription,pastSubscriptions:o&&o.pastSubscription})},_getTokenPromise(){var e,t;return null==(t=null==(e=(0,g.DB)("appModel").get("ui"))?void 0:e.get("authCodeExchange"))||t.get("pinIDInitial"),(ne.Z.allowSSO?this._getSSOThenStorageTokenPromise():this._getStorageTokenPromise()).then(null,(()=>(this.get("hasInvalidAnonymousUserToken"),this._getSkipAnonymousTokenPromise())))},_getSSOThenStorageTokenPromise(){const e=this._getStorageTokenPromise(),t=this._getSSOTokenPromise(),r=()=>this.get("anonymous")?((0,f.Z)("[User] SSO status is not available, try stored anonymous token"),e):((0,f.Z)("[User] SSO status is signed-out"),e.then((()=>(0,z.Z)(this.signOutDueToInvalidToken()))));return t.then((t=>t?(t=>e.then((e=>t===e?((0,f.Z)("[User] SSO status is signed-in, storage token matches SSO token"),t):((0,f.Z)(`[User] SSO status is signed-in, storage accessToken=${e} and SSO accessToken=${t} differ`),Le.Z.execute("resetUser").then((()=>{window.location.reload()})))),(()=>((0,f.Z)("[User] SSO status is signed-in, storage token is not present"),l().Deferred().resolve(t).promise()))))(t):r()),(()=>((0,f.Z)("[User] SSO status is not available"),e)))},_getStorageTokenPromise:()=>Se.Z.get("myPlexAccessToken"),_getSSOTokenPromise(){return mn(this.server.getXHROptions("/api/v2/users/signin",{method:"POST",xhrFields:{withCredentials:!0},data:{skipAuthentication:!0},dataType:"json"})).then((e=>e.authToken),(e=>e&&400===e.status?l().Deferred().resolve(null).promise():l().Deferred().reject().promise()))},_getSkipAnonymousTokenPromise:()=>((0,f.Z)("[User] Not attempting to create an anonymous token."),l().Deferred().reject().promise()),_getAnonymousTokenPromise(){const e=function(e,t){if(!t||!t.campaign)return e;return function(e,t){const{base:r,searchParams:n,hashPath:i,hashParams:s}=(0,H.Z)(e),a=(0,_.Z)(n);return`${r}?${(0,aI.Z)(pI(pI({},a),t))}${(i||s?"#":"")+i+s}`}(e,Object.keys(t.campaign).reduce(((e,r)=>(e[`utm_${r}`]=t.campaign[r],e)),{}))}("/api/v2/users/anonymous",(0,g.DB)("metrics").toJSON().context);return mn(this.server.getXHROptions(e,{method:"POST",dataType:"json"})).then((({authToken:e})=>((0,f.Z)("[User] Anonymous token promise succeeded, accessToken="+e),e)))},_getManualUserPromise(e){return l().ajax(this.server.getXHROptions(v().result(this,"url"),{headers:{"X-Plex-Token":e}}))},signInUnsupervised(){if(this._isSigningIn)return;this._isSigningIn=!0;const e=this._getTokenPromise();e.done((e=>{(0,f.Z)("[User] Token promise succeeded, accessToken="+e);const t=e?this._getManualUserPromise(e):l().Deferred().reject().promise();t.done((t=>{(0,f.Z)("[User] userPromise succeeded");const r=this.get("homeDetails");r.fetch({headers:{"X-Plex-Token":e}}).always((()=>{const e=this.parse(t);let n=this.get("lockState");if(n!==Yr.Ik.Unlocked){const t=(0,g.DB)("settingFinder").find("autoLogin"),i=!!e.guest&&!r.get("guestEnabled");n=!e.home||t&&!i?Yr.Ik.Unlocked:Yr.Ik.Locked}this.signIn(e,{lockState:n}),this._isSigningIn=!1}))})),t.fail((e=>{if((0,f.Z)("[User] userPromise failed"),e&&e.aborting)return this.set({hasAttemptedSignIn:!0}),void(this._isSigningIn=!1);!e||401!==e.status&&422!==e.status?this.signOut({hasAttemptedSignIn:!0,hasInvalidToken:!1,features:this.get("features"),allFriends:this.get("allFriends"),settings:this.get("settings"),experienceSettings:this.get("experienceSettings")}):this.get("anonymous")?((0,f.Z)("[User] userPromise failed for anonymous user due to invalid token."),this.signOutAnonymousUser()):((0,f.Z)("[User] userPromise failed due to invalid token."),this.signOutDueToInvalidToken()),this.server.testAllConnections(),this._isSigningIn=!1}))})),e.fail((()=>{(0,f.Z)("[User] tokenPromise failed"),this.signOut({hasAttemptedSignIn:!0,hasInvalidAnonymousUserToken:this.get("hasInvalidAnonymousUserToken"),features:this.get("features"),allFriends:this.get("allFriends"),settings:this.get("settings"),experienceSettings:this.get("experienceSettings")}),this._isSigningIn=!1}))},signIn(e,t={},r={}){const n=v().isString(e)?this.parse(e):e,i=n.authToken,s=RI(RI({hasAttemptedSignIn:!0,isSignedIn:!0},n),t);return this._resolve(s,r),Se.Z.set("myPlexAccessToken",i)},signOut(e={}){return this._reject(e),l().Deferred().resolve().promise()},signOutAnonymousUser(){return(0,Pe.Z)([this.signOut({hasAttemptedSignIn:!0,hasInvalidAnonymousUserToken:!0}),this.clearAccessToken()])},signOutDueToInvalidToken(){return(0,Pe.Z)([this.signOut({hasAttemptedSignIn:!0,hasInvalidToken:!0}),this.clearAccessToken()])},activateStoredUser(e){qr.Z.set("activeUserID",e)},clearAccessToken(){window.PLEXWEB&&window.PLEXWEB.myPlexAccessToken&&delete window.PLEXWEB.myPlexAccessToken;let e=Se.Z.remove("myPlexAccessToken");return e=e.then((()=>qr.Z.clearActiveUser())),e},hashPIN(e,t=this.get("authToken")){return tI().SHA256_hash(e+t)},hasEntitlement(e){const t=this.get("hasAllEntitlements"),r=this.get("entitlements");return!(!t&&!r.get(e))},hasHome(){return!!this.get("pin")||this.get("homeUsers").length>1},isFullUser(){return this.get("isFullUser")},isEmployee(){return this.get("isEmployee")},isNinja(){return this.get("isNinja")},_resolve(e,t={}){this.startCapturingChangeEvents(),this.activateStoredUser(e.id),this.set(e),this._resolvePopulate(),this.server.authenticate(e.authToken),t.silent?this.discardCapturedChangeEvents():this.releaseCapturedChangeEvents()},_reject(e,t={}){this.startCapturingChangeEvents(),this.restoreDefaults(e),this._rejectPopulate(),this.server.deauthenticate(),t.silent?this.discardCapturedChangeEvents():this.releaseCapturedChangeEvents()},onHomeUsersChange(e,t){const r=e.previous("homeUsers");r&&this.stopListening(r),this.listenTo(this.get("homeUsers"),"reset add remove",this.onHomeUsersUpdate)},onHomeUsersUpdate(){this.set("homeSize",this.get("homeUsers").length),this.get("homeDetails").fetch()},onServerConnectedChange(e,t){t&&this.signInUnsupervised()},onServerUnavailableChange(e,t){t&&this.signOut({lockState:this.get("lockState"),features:this.get("features"),allFriends:this.get("allFriends"),settings:this.get("settings"),experienceSettings:this.get("experienceSettings")})}});(0,rI.Z)(jI,(function(){return{relationClass:(0,g.DB)("UserFlexModel")}}));const VI=jI,UI="backgroundTranscodeJobs",FI=bi.Z.extend({name:"StoreModel",initialize(){this._currentState=TS.getState(),TS.subscribe((()=>{const e=TS.getState();this.trigger("statechange",this,e,this._currentState),this._currentState=e}))},getState:()=>TS.getState(),toJSON:()=>TS.getState(),dispatch(e){TS.dispatch(e)},getStatePromise:e=>e(TS.dispatch,TS.getState)}),BI=Pp.extend({name:"DesktopAppModel",sessionAttrs:{clientID:zn.Z.string,anonymousClientID:zn.Z.string,authorized:zn.Z.boolean.isRequired,skipSignIn:zn.Z.boolean.isRequired,isWaitingForServers:zn.Z.boolean.isRequired,isWaitingForPrimaryServer:zn.Z.boolean.isRequired,history:zn.Z.array.isRequired,drmType:zn.Z.oneOf(...Object.values(cs)),isFullscreen:zn.Z.boolean.isRequired,isUpdateAvailable:zn.Z.boolean.isRequired,castApiAvailability:Mp.QV.isRequired,settings:zn.Z.instanceOf(Ki)},sessionRelations:{entities:{relationClass:function(e){const t={};for(const r in e)t[e[r]]={relationClass:Rp};return bi.Z.extend({name:"EntitiesModel",sessionRelations:t})}(i)},servers:{relationClass:Cp},cloudServer:{relationClass:Ip.Z,deferred:!0},primaryServer:{relationClass:qt.ZP,deferred:!0},companionServer:{relationClass:qt.ZP,deferred:!0},user:{relationClass:VI,deferred:!0},remotePlayer:{relationClass:bi.Z,deferred:!0},deviceSettings:{relationClass:$n},ui:{relationClass:JP},v4:{relationClass:FI},query:{relationClass:xS}},defaults(){const e=new Ip.Z({machineIdentifier:Dp.X},{parent:this});return{authorized:!1,skipSignIn:!1,isWaitingForServers:!1,isWaitingForPrimaryServer:!1,isUpdateAvailable:!1,history:[],cloudServer:e,user:new VI({},{server:e,parent:this}),isFullscreen:!1,castApiAvailability:Mp.lz,settings:new Ki}},dispatch(e){this.get("v4").dispatch(e)},getStatePromise(e){return this.get("v4").getStatePromise(e)}}),_I=bi.Z.extend({name:"OauthProviderUsageModel",syncedAttrs:{federatedAuth:zn.Z.boolean,other:zn.Z.boolean}}),zI=bi.Z.extend({name:"OauthProviderModel",rootPropertyName:"provider",sessionAttrs:{isUnlinking:zn.Z.boolean.isRequired,unlinkError:zn.Z.object},syncedAttrs:{authName:zn.Z.string,image:zn.Z.string,label:zn.Z.string.isRequired,linked:zn.Z.boolean.isRequired,nickname:zn.Z.string,url:zn.Z.string.isRequired},syncedRelations:{usage:{relationClass:_I}},defaults:{isUnlinking:!1}}),HI=fi.Z.extend({name:"OauthProviderCollection",model:zI,context:["server"],url:"/api/v2/authentications/providers",responseType:NS.AV}),WI=bi.Z.extend({name:"CloudServerFlexModel",context:["server"],sessionAttrs:{isOauthProvidersPending:zn.Z.boolean,isOauthProvidersPopulated:zn.Z.boolean,oauthProvidersError:zn.Z.object},sessionRelations:{oauthProviders:{relationClass:HI}},defaults:{isOauthProvidersPending:!1,isOauthProvidersPopulated:!1,oauthProvidersError:null}});var GI=r(90926);const QI=bi.Z.extend({name:"PlexPlayerModel",context:["server","baseURL"],rootPropertyName:"Server",sessionAttrs:{volume:zn.Z.integer},syncedAttrs:{machineIdentifier:zn.Z.string,name:zn.Z.string,title:zn.Z.string,address:zn.Z.string,port:zn.Z.string,deviceClass:zn.Z.string,version:zn.Z.string,product:zn.Z.string,protocol:zn.Z.string,protocolVersion:zn.Z.string,protocolCapabilities:zn.Z.list},derivedAttrs:{friendlyName(){return this.get("title")||this.get("name")||this.get("product")},playerIdentifier(){return`${this.baseURL}:${this.get("machineIdentifier")}`}},defaults:{volume:100}}),$I=fi.Z.extend({name:"PlexPlayerCollection",context:["server"],model:QI,url:"/clients",augmentResponse(e){const t=(0,g.DB)("appModel").get("clientID"),r=parseInt(e.size,10);return 1===r&&e.Server.machineIdentifier===t?(delete e.Server,e.size="0"):r>1&&(e.Server=e.Server.filter((e=>e.machineIdentifier!==t)),e.size=e.Server.length.toString()),e}}),KI=bi.Z.extend({name:"ActivityModel",context:["server"],idAttribute:"uuid",rootPropertyName:"Activity",responseType(){return(0,Pl.Z)(this.server)},sessionAttrs:{synthetic:zn.Z.boolean},syncedAttrs:{uuid:zn.Z.string,userID:zn.Z.integer,title:zn.Z.string,subtitle:zn.Z.string,progress:zn.Z.integer,event:zn.Z.string,cancellable:zn.Z.boolean,type:zn.Z.string,Context:zn.Z.object,Response:zn.Z.object},defaults:()=>({Context:{},Response:{}})}),qI=fi.Z.extend({name:"ActivityCollection",context:["server"],model:KI,url:"/activities",responseType(){return(0,Pl.Z)(this.server)}});var YI=r(87947);const XI=YI.Z.extend({pageSize:10,pages:function(){return Math.max(Math.ceil(this.length/this.pageSize),1)},page:function(e,t){t||(t={});let r,n=0;return r=t.reverse?this.length-e*this.pageSize:e*this.pageSize-this.pageSize,r<0&&(n=r,r=0),this.models.slice(r,r+this.pageSize+n)}});var JI=r(54122);let eE=0;const tE=JI.Z.extend({idAttribute:"id",parse:function(e){const t=e;return t.time=new Date,t.id="evt"+eE++,"preference"===t._type&&(t.value=String(t.value)),t}}),rE=XI.extend({model:tE,url:"/servers",pageSize:20,limit:1e3,initialize:function(){this.startTime=new Date,this.listenTo(this.server,"socket:setting",this.onSettingChange),this.listenTo(this.server,"socket:timeline",this.onTimeline),this.listenTo(this.server,"socket:status",this.onStatus),this.listenTo(this.server,"socket:playing",this.onPlaying),this.listenTo(this.server,"socket:websocket",this.onWebSocket)},add:function(e){this.length+1>this.limit&&this.remove(this.at(0)),XI.prototype.add.apply(this,arguments)},onSettingChange:function(e){e.label&&this.add(v().extend({_type:"setting"},e),{parse:!0})},onTimeline:function(e){1===e.state||e.sectionID<0||this.add(v().extend({_type:"timeline"},e),{parse:!0})},onStatus:function(e){"ProgressNotification"!==e._elementType&&this.add(v().extend({_type:"status"},e),{parse:!0})},onPlaying:function(e){this.add(v().extend({_type:"playing"},e),{parse:!0})},onWebSocket:function(e){this.add(v().extend({_type:"websocket"},e),{parse:!0})}});var nE=r(53611);const iE=bi.Z.extend({name:"TranscodeJobModel",context:["server"],entityType:Yu.PC,entityID(e=this.state){return(0,qu.Z)(this.entityType,e.syncItemId,this.server.entityID())},idAttribute:"syncItemId",rootPropertyName:"TranscodeJob",syncedAttrs:{syncItemId:zn.Z.integer,syncItemTitle:zn.Z.string,key:zn.Z.string,type:zn.Z.string,progress:zn.Z.float,speed:zn.Z.float,remaining:zn.Z.string,size:zn.Z.string,title:zn.Z.string,thumb:zn.Z.string},responseType(){return(0,Pl.Z)(this.server)}}),sE=fi.Z.extend({name:"TranscodeJobCollection",context:["server"],model:iE,cache:new XS.Z,url:"/sync/transcodeQueue"}),aE=bi.Z.extend({name:"BackgroundTranscodeJobModel",context:["server"],entityType:UI,entityID(e=this.state){return(0,qu.Z)(this.entityType,e.key,this.server.entityID())},idAttribute:"key",rootPropertyName:"TranscodeJob",syncedAttrs:{queueItemID:zn.Z.integer,generatorID:zn.Z.integer,targetTagID:zn.Z.integer,syncItemId:zn.Z.integer,syncItemTitle:zn.Z.string,key:zn.Z.string,type:zn.Z.string,progress:zn.Z.float,speed:zn.Z.float,remaining:zn.Z.integer,size:zn.Z.integer,ratingKey:zn.Z.string,title:zn.Z.string,thumb:zn.Z.string}}),oE=fi.Z.extend({name:"BackgroundTranscodeJobCollection",model:aE,context:["server"],url:"/status/sessions/background"}),lE=bi.Z.extend({name:"NeighborhoodDeviceModel",context:["server"],idAttribute:"uuid",rootPropertyName:"Device",syncedAttrs:{uuid:zn.Z.string.isRequired,address:zn.Z.string.isRequired,title:zn.Z.string,manufacturer:zn.Z.string,model:zn.Z.string,modelNumber:zn.Z.string,serialNumber:zn.Z.string}}),cE=fi.Z.extend({name:"NeighborhoodDeviceCollection",context:["server"],model:lE,url:"neighborhood/devices"}),dE=bi.Z.extend({name:"ServerFlexModel",context:["server"],sessionAttrs:{alerts:zn.Z.instanceOf(rE).isRequired,hasiTunes:zn.Z.boolean,isHasiTunesPopulated:zn.Z.boolean,isSettingsPending:zn.Z.boolean,isSettingsPopulated:zn.Z.boolean,settingsError:zn.Z.object,isLibrariesPending:zn.Z.boolean.isRequired,isLibrariesPopulated:zn.Z.boolean.isRequired,librariesError:zn.Z.object,cleanBundlesError:zn.Z.string,optimizeDatabaseError:zn.Z.string},sessionRelations:{settings:{relationClass:nE.Z,rootPropertyName:"Setting"},cloudAccount:{relationClass:Qt.ZP},libraries:{relationClass:GI.Z},activities:{relationClass:qI},transcodeJobs:{relationClass:sE},backgroundTranscodeJobs:{relationClass:oE},players:{relationClass:$I},neighborhoodDevices:{relationClass:cE},update:{relationClass:ap}},defaults(){return{alerts:new rE([],{server:this.server}),hasiTunes:!1,isHasiTunesPopulated:!1,isSettingsPending:!0,isSettingsPopulated:!1,settingsError:null,isLibrariesPending:!0,isLibrariesPopulated:!1,librariesError:null,cleanBundlesError:null,optimizeDatabaseError:null}}});var uE,pE,mE=Object.defineProperty,hE=Object.defineProperties,gE=Object.getOwnPropertyDescriptors,yE=Object.getOwnPropertySymbols,vE=Object.prototype.hasOwnProperty,fE=Object.prototype.propertyIsEnumerable,bE=(e,t,r)=>t in e?mE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ZE=(e,t)=>{for(var r in t||(t={}))vE.call(t,r)&&bE(e,r,t[r]);if(yE)for(var r of yE(t))fE.call(t,r)&&bE(e,r,t[r]);return e};const SE=Hn.Z.extend({name:"StoredUserExperienceSettingsModel",syncedAttrs:(uE=ZE({},Ni.prototype.syncedAttrs),pE={isDirty:zn.Z.boolean},hE(uE,gE(pE))),syncedRelations:ZE({},Ni.prototype.syncedRelations)}),PE=fi.Z.extend({name:"CloudPlayerCollection",context:["server","baseURL"],model:QI,augmentResponse:e=>(e.Server||(e.Server=e.Player,delete e.Player),e)});var IE=r(55810);const EE=bi.Z.extend({name:"CloudCompanionModel",context:["server"],idAttribute:"identifier",rootPropertyName:"Companion",syncedAttrs:{identifier:zn.Z.string,title:zn.Z.string,baseURL:zn.Z.string,linkURL:zn.Z.string,provides:zn.Z.list},sessionAttrs:{linkState:zn.Z.string},sessionRelations:{cloudPlayers:{relationClass:PE,options(){return{url:`${this.get("baseURL")}/resources`,baseURL:this.get("baseURL")}}}},defaults:{linkState:IE.uf}}),wE=fi.Z.extend({name:"CloudCompanionCollection",context:["server"],model:EE,url:"/api/v2/companions",responseType:NS.AV,augmentResponse(e){const t=e,r=(0,g.DB)("appModel"),n=(r&&r.get("deviceSettings")).get("sonosCustomBaseURL");if(n&&t&&t.length){const e=t.find((({identifier:e})=>"tv.plex.sonos"===e));e&&t.push({identifier:"tv.plex.sonos-custom",title:"Sonos (Custom)",baseURL:n,linkURL:b.Z.join([n,"link"]),provides:e.provides,token:e.token})}return e}}),CE=bi.Z.extend({name:"AnnouncementModel",context:["server"],rootPropertyName:"Announcement",syncedAttrs:{id:zn.Z.integer,title:zn.Z.string,content:zn.Z.string,imageUrl:zn.Z.string,style:zn.Z.string,url:zn.Z.string,expireAt:zn.Z.string,notifyAt:zn.Z.string,read:{type:zn.Z.boolean,save:!0}},markAsRead(){this.get("read")||this.save("read",!0)}}),ME=fi.Z.extend({name:"AnnouncementCollection",model:CE,context:["server"],url:"api/announcements"}),DE=bi.Z.extend({name:"DeviceModel",context:["server"],rootPropertyName:"Device",url(){return"/devices/"+this.id+".xml"},syncedAttrs:{id:zn.Z.string,clientIdentifier:zn.Z.string,name:zn.Z.string,product:zn.Z.string,productVersion:zn.Z.string,platform:zn.Z.string,platformVersion:zn.Z.string,device:zn.Z.string,model:zn.Z.string,provides:zn.Z.list,screenResolution:zn.Z.string,screenDensity:zn.Z.string,lastSeenAt:zn.Z.integer},supports(e){return-1!==this.get("provides").indexOf(e)}}),OE=fi.Z.extend({name:"DeviceCollection",context:["server"],model:DE,url:"/devices.xml",filterByProducts(e){const t=this.filter((t=>v().contains(e,t.get("product"))));return this.clone(t)},filterByPlatforms(e){const t=this.filter((t=>v().contains(e,t.get("platform"))));return this.clone(t)},products(){const e=this.map((e=>e.get("product")));return v().uniq(e)}});var TE=r(76057);const xE=fi.Z.extend({name:"HomeUserCollection2",context:["server"],model:TE.Z,url:"/api/home/users",parse(e){return this.convert(e,"User")}});var AE=r(12152),kE=r.n(AE);const NE=bi.Z.extend({name:"InviteModel",context:["server"],rootPropertyName:"Invite",sessionAttrs:{isAccepting:zn.Z.boolean,isRemoving:zn.Z.boolean},syncedAttrs:{id:{type:zn.Z.string,save:!0},friend:zn.Z.boolean,home:zn.Z.boolean,server:zn.Z.boolean,friendlyName:zn.Z.string,username:zn.Z.string,email:zn.Z.string,thumb:zn.Z.string,createdAt:zn.Z.integer,Server:zn.Z.array},urlRoot:"/api/invites/requests",url(){let e;if(this.isNew())e=v().result(this,"urlRoot");else{const t=this.pick("friend","server","home");v().each(v().keys(t),(function(e){t[e]=t[e]?"1":"0"})),e=this.collection?v().result(this.collection,"url"):v().result(this,"urlRoot"),e=e.replace(/([^/])$/,"$1/")+encodeURIComponent(this.get("id")),e=b.Z.join(e,t)}return e},augmentResponse:e=>e.Server?((Array.isArray(e.Server)?e.Server:[e.Server]).forEach((e=>{e.numLibraries=(0,mi.Z)(e.numLibraries)})),e):e,defaults:{isAccepting:!1,isRemoving:!1}}),RE=fi.Z.extend({name:"InviteCollection",context:["server","subset"],model:NE,url(){return"/api/invites/"+this.subset},initialize(e,t){t||(t={}),this.subset=t.subset||"requests"},filterByHome(){const e=new(kE())(this);return e.filterBy((e=>e.get("home"))),e},filterByFriends(){const e=new(kE())(this);return e.filterBy((e=>!e.get("home"))),e}}),LE=JI.Z.extend({idAttribute:"key",whitelistedAttrs:["key","title","linked","maxLength"],convert:function(e){const t=v().isObject(e)?e:Te.Z.parseXML(e);return Te.Z.parseBoolean(t,["linked","maxLength"]),t},parse:function(e){let t=this.convert(e);return t=v().pick(t,this.whitelistedAttrs),t}}),jE=YI.Z.extend({model:LE,url:"/pms/social/networks",parse:function(e){return this.convert(e,"Directory")}}),VE=bi.Z.extend({name:"SubscriptionPlanModel",context:["server"],rootPropertyName:"plan",syncedAttrs:{id:zn.Z.string,name:zn.Z.string,price:zn.Z.float,formattedPrice:zn.Z.string,currency:zn.Z.string}}),UE=fi.Z.extend({name:"SubscriptionPlanCollection",context:["server"],model:VE,url:"/api/subscriptions/plans"}),FE=bi.Z.extend({name:"WebhookModel",syncedAttrs:{url:zn.Z.string},defaults:{url:""}}),BE=fi.Z.extend({name:"WebhookCollection",context:["server"],model:FE,url:"/api/v2/user/webhooks",responseType:NS.AV}),_E=bi.Z.extend({name:"UserFlexModel",context:["server"],sessionAttrs:{isHomeUsersPending:zn.Z.boolean.isRequired,isHomeUsersPopulated:zn.Z.boolean.isRequired,homeUsersError:zn.Z.object,socialNetworks:zn.Z.instanceOf(jE).isRequired,isPlansPending:zn.Z.boolean.isRequired,isPlansPopulated:zn.Z.boolean.isRequired,plansError:zn.Z.object,isUpdatingUser:zn.Z.boolean.isRequired,updateUserError:zn.Z.object,isHomeDetailsPending:zn.Z.boolean,isHomeDetailsPopulated:zn.Z.boolean,homeDetailsError:zn.Z.object,isInvitesPending:zn.Z.boolean,isInvitesPopulated:zn.Z.boolean,invitesError:zn.Z.object,isSentInvitesPending:zn.Z.boolean,isSentInvitesPopulated:zn.Z.boolean,sentInvitesError:zn.Z.object,isWebhooksPending:zn.Z.boolean,isWebhooksPopulated:zn.Z.boolean,webhooksError:zn.Z.object,isUpdatingWebhooks:zn.Z.boolean,isRemovingWebhooks:zn.Z.boolean,updateWebhooksError:zn.Z.object},sessionRelations:{homeUsers:{relationClass:xE},devices:{relationClass:OE},cloudCompanions:{relationClass:wE},announcements:{relationClass:ME},homeDetails:{relationClass:vI},invites:{relationClass:RE},sentInvites:{relationClass:RE,options:{subset:"requested"}},plans:{relationClass:UE},webhooks:{relationClass:BE}},defaults(){const e={server:this.server,parent:this};return{isHomeUsersPending:!1,isHomeUsersPopulated:!1,homeUsersError:null,socialNetworks:new jE([],e),isPlansPending:!0,isPlansPopulated:!1,plansError:null,isUpdatingUser:!1,updateUserError:null,isHomeDetailsPending:!1,isHomeDetailsPopulated:!1,homeDetailsError:null,isInvitesPending:!1,isInvitesPopulated:!1,invitesError:null,isSentInvitesPending:!1,isSentInvitesPopulated:!1,sentInvitesError:null,isWebhooksPending:!1,isWebhooksPopulated:!1,webhooksError:null,isUpdatingWebhooks:!1,isRemovingWebhooks:!1,updateWebhooksError:null}}});var zE=r(84301);var HE=r(15451),WE=r(81775);var GE=r(76389);const QE="provider/providerIntegrations/initProviderIntegrations",$E="provider/providerIntegrations/fetchProviderIntegrations",KE="provider/providerIntegrations/pollProviderIntegrations",qE="provider/providerIntegrations/integrationsOnboardingComplete",YE="provider/providerIntegrations/createLocastAccount",XE=((0,HE.Z)(QE),(0,HE.Z)($E)),JE=(0,HE.Z)(KE);function ew(e){return e.get("ui").get("providerIntegrations")}(0,HE.Z)(qE),(0,HE.Z)(YE);const tw={[QE](e,t,r){ew(e).set({isIntegrationsOnboarding:!1,isIntegrationsPending:!1,isIntegrationsPopulated:!1,integrationsError:null,integrations:new LS([],{server:(0,GE.SW)(e,t),provider:(0,GE.js)(e,t)})}),r(XE())},[$E]:(0,WE.Z)({key:"integrations",getModel:ew}),[KE](e,t,r){ew(e).set("isIntegrationsOnboarding",!0),window.setTimeout((()=>{(0,Zs.c9)((()=>{r(XE())}))}),3e3)},[qE](e){ew(e).set("isIntegrationsOnboarding",!1)},[YE](e,t,r){ew(e).set("isIntegrationsOnboarding",!0),function(){const e=l().Deferred();return window.setTimeout((()=>{e.resolve()}),3e3),e}().then((()=>{r(JE())}))}};var rw=r(39166),nw=r(13776),iw=r(35449),sw=r(2380),aw=r(48209);const ow=310;var lw=r(73703);const cw=1800,dw="ui/channelGridPage/initChannelsGridPage",uw="ui/channelGridPage/initMetadataList",pw="ui/channelGridPage/setStartTime",mw="ui/channelGridPage/resetStartTime",hw="ui/channelGridPage/navigateTimeForward",gw="ui/channelGridPage/navigateTimeBack",yw="ui/channelGridPage/setViewportSize",vw="ui/channelGridPage/updateAiredProgress",fw="ui/channelGridPage/populateChannelPrograms",bw="ui/channelGridPage/repopulateChannelPrograms",Zw="ui/channelGridPage/populateChannelsList",Sw="ui/channelGridPage/fetchChannelsList",Pw=((0,HE.Z)(dw),(0,HE.Z)(uw),(0,HE.Z)(pw)),Iw=(0,HE.Z)(mw),Ew=((0,HE.Z)(hw),(0,HE.Z)(gw),(0,HE.Z)(yw),(0,HE.Z)(vw),(0,HE.Z)(fw),(0,HE.Z)(bw)),ww=((0,HE.Z)(Zw),(0,HE.Z)(Sw));function Cw(e){return e.get("ui").get("channelGridPage")}function Mw(e,t){const r=Math.floor(e/cw)*cw,n=[];for(let e=0;e<=t;e++)n.push(r+e*cw);return n}const Dw=(0,sw.Z)({[dw](e,t,r){const n=Cw(e),{serverEntityID:i,providerEntityID:s,directoryKey:a}=t,o=(0,GE.SW)(e,{serverEntityID:i}),l=(0,GE.js)(e,{providerEntityID:s}),c={serverEntityID:i,providerEntityID:s,directoryKey:a,channelsList:new eP(null,{server:o,provider:l,type:ow})};n.set(c),r(Iw())},[uw](e,t,r){const{containerKey:n,serverEntityID:i,providerEntityID:s}=t,a=Cw(e),o=(0,GE.SW)(e,{serverEntityID:i}),l=(0,GE.js)(e,{providerEntityID:s}),c=a.get("metadataList");a.get("containerKey")===n&&(null==c?void 0:c.server.get("machineIdentifier"))===o.get("machineIdentifier")&&(null==c?void 0:c.provider.get("identifier"))===l.get("identifier")||a.set({containerKey:n,metadataList:new YS({containerKey:n},{server:o,provider:l})})},[mw](e,t,r){const n=Math.floor(Date.now()/1e3);r(Pw(n))},[pw](e,t,r){const n=Cw(e),i=n.get("visibleColumns"),s=Mw(t,i);(0,Zs.c9)((()=>{n.set({startTime:t,columnTimes:s})}))},[hw](e,t,r){const n=Cw(e).get("columnTimes")[0]+cw;r(Pw(n))},[gw](e,t,r){const n=Cw(e).get("columnTimes")[0]-cw,i=Math.floor(Date.now()/1e3)-10800;n+cw>i&&r(Pw(n))},[yw](e,t={},r){const{width:n=1,height:i=1,overflowWidth:s=0,channelWidth:a=1,channelTitleWidth:o=0}=t,l=Cw(e),c=Math.floor(n+s),d=Math.max(Math.floor((n-o)/a),1)+1,u=Math.floor((c-o)/d),p=Mw(l.get("startTime"),d);(0,Zs.c9)((()=>{l.set({visibleColumns:d,columnTimes:p,columnWidth:u,viewportWidth:c,viewportHeight:Math.floor(i)})}))},[vw](e){const t=Cw(e),r=t.get("columnTimes"),n=r[0],i=r[r.length-1]-n,s=Math.floor(Date.now()/1e3),a=Math.min(100,Math.max(0,(s-n)/i*100));(0,Zs.c9)((()=>{t.set({airedProgress:a})}))},[fw](e){const t=Cw(e),r=t.get("metadataList"),n=t.get("columnTimes"),i=t.get("viewportWidth");r&&i>0&&(r.set({isPending:!0,error:null}),r.populateRange({start:n[0],end:n[n.length-1],reloadThreshold:43200}).then((()=>{r.set({isPending:!1,isPopulated:!0,error:null})}),((e,t)=>{t.aborting||r.set({isPending:!1,error:(0,lw.Z)(t)})})))},[bw](e){const t=Cw(e).get("metadataList");t.set({isPending:!0}),t.repopulateRange().then((()=>{t.set({isPending:!1,isPopulated:!0,error:null})}),((e,r)=>{r.aborting||t.set({isPending:!1,error:(0,lw.Z)(r)})}))},[st._z](e,t,r){if(t.metadataItemEntityID||t.containerKeyPattern)return;const n=(0,GE.SW)(e,t),i=Cw(e),s=i.get("metadataList"),a=i.get("channelsList");a&&s&&a.server===n&&s.server===n&&(r(Ew()),r(ww()))},[Zw]:(0,aw.Z)({key:"channelsList",fetchActionCreator:ww,getModel:Cw}),[Sw]:(0,WE.Z)({key:"channelsList",getModel:Cw})});var Ow=r(49217),Tw=r(5450),xw=r(98984),Aw=r(90915),kw=r(24559),Nw=r(7574),Rw=r(9466),Lw=r(80),jw=r(51315),Vw=r(75396),Uw=r(27724),Fw=r(89843),Bw=r(36991),_w=r(14853),zw=r(29320),Hw=r(3977),Ww=r(39263),Gw=r(22384),Qw=r(17949),$w=r(34359),Kw=r(90174),qw=r(9647),Yw=r(66117),Xw=r(24348),Jw=r(70593),eC=r(56431),tC=r(1124),rC=Object.defineProperty,nC=Object.defineProperties,iC=Object.getOwnPropertyDescriptors,sC=Object.getOwnPropertySymbols,aC=Object.prototype.hasOwnProperty,oC=Object.prototype.propertyIsEnumerable,lC=(e,t,r)=>t in e?rC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cC=(e,t)=>{for(var r in t||(t={}))aC.call(t,r)&&lC(e,r,t[r]);if(sC)for(var r of sC(t))oC.call(t,r)&&lC(e,r,t[r]);return e},dC=(e,t)=>nC(e,iC(t));const uC={[Ta.$y]:Ta.gv[Ta.$y],[Ta.xd]:Ta.gv[Ta.xd],[Ta.bj]:Ta.gv[Ta.bj],[Ta.e4]:Ta.gv[Ta.e4],[Ta.tf]:Ta.gv[Ta.tf],[Ta.Rt]:Ta.gv[Ta.Rt],[Ta.Si]:Ta.gv[Ta.Si],[Ta.yt]:Ta.gv[Ta.yt],[Ta.N9]:Ta.gv[Ta.N9],[Ta.Bw]:Ta.gv[Ta.Bw],[Ta.EJ](e,t,r){const n=(0,qw.Z)(e,t),i=(0,Kw.Z)(n),s=t.playerType||Va.f_(i),a=(0,Kc.F_)(e,s),o=(0,GE.js)(e,t),l=(0,GE.SW)(e,t),c=(0,GE.$R)(e,t),d=e.get("user").get("experienceSettings"),u=(0,eC.Z)(o.get("identifier"),o.get("providerIdentifier")),p=e.get("remotePlayer");if(p&&!(0,tC.Z)({protocol:p.get("protocol"),protocolCapabilities:p.get("protocolCapabilities"),providerIdentifier:u,userFeaturesByUUID:(0,Yw.Z)(e),isWatchTogether:!!t.syncplaySessionRoomID})){const e=(0,Fe.Z)("This content is not currently supported when connected to this remote player.");return void(0,Zs.c9)((()=>{a.set({hasError:!0,errorMessage:e})}))}let m;m=a.get("isOpen")?a.get("openState"):i===su.j0?cP.y:cP.K,(0,Jw.Z)()&&si.wB(u,[si.uk])&&(m=cP.K);let h=!1;i===su.pV&&t.metadataItemEntityID&&(h=c.get("type")===qe.PHOTO);let y=t.metricsProperties||{};(function(e){const t=(0,g.DB)("appModel").get("embeddedServer");return!!e&&!!t&&e.get("machineIdentifier")===t.get("machineIdentifier")})(l)&&(y=dC(cC({},y),{origin:Xw.J3})),y.identifier||(y.identifier=o.get("metricsIdentifier")),Ta.gv[Ta.EJ](e,dC(cC({extrasPrefixCount:d.get("extrasPrefixCount"),openState:m,isPaused:h},t),{metricsProperties:y}),r)},[Ta.l5](e,t,r){Ta.gv[Ta.l5](e,cC({openState:cP.y},t),r)},[Ta.qG](e,t,r){const n=(0,Kc.F_)(e,t.playerType),i=n.get("serverEntityID"),s=n.get("providerEntityID"),a=(0,GE.SW)(e,{serverEntityID:i}),o=(0,GE.js)(e,{providerEntityID:s});Ta.gv[Ta.qG](e,t,r),a&&o&&r(Vr.Z.actions.ended({source:(0,Wu.Z)({serverIdentifier:a.get("machineIdentifier"),providerIdentifier:o.get("identifier")})}))}};var pC=r(78e3),mC=r(64253),hC=r(72538),gC=r(52108),yC=r(78394),vC=r(8543);function fC(e){return e.get("ui").get("playlistPage")}const bC=(0,sw.Z)({[vC.KG](e,t){const r=fC(e),n=(0,pu.SW)(e,t),i=(0,GE.js)(e,t),{serverEntityID:s,providerEntityID:a,metadataKey:o}=t;if(s===r.get("serverEntityID")&&a===r.get("providerEntityID")&&o===r.get("metadataKey"))return;const l=new Pt.Z({key:o,type:qe.PLAYLIST},{server:n,provider:i});r.restoreDefaults({serverEntityID:s,providerEntityID:a,metadataKey:o,playlist:l})},[vC.Yx](e,t){const r=fC(e),n=(0,pu.SW)(e,t),i=(0,GE.js)(e,t),s=r.get("playlist"),{serverEntityID:a,metadataKey:o}=t;if(a===r.get("serverEntityID")&&o===r.get("metadataKey")&&r.get("playlistItemList"))return;const l=(0,Ma.Z)(e,Da.Ao),c=s.get("childrenKey"),d=new FP.Z({containerKey:c},{server:n,provider:i,includeExternalMedia:l});r.set({playlistItemList:d})},[vC.zx](e,t){const r=fC(e),n=r.get("playlistItemList");n&&(n.restoreDefaults(),r.unset("playlistItemList"))},[vC.PL]:(0,WE.Z)({key:"playlist",getModel:fC}),[vC.yc]:(0,mC.Z)({key:"playlistItemList",getModel:fC}),[vC.pQ]:(0,hC.Z)({key:"playlistItemList",getModel:fC}),[vC.N2](e,t,r){const{id:n,type:i,isRangeSelect:s=!1}=t,a=(0,pu.Tp)(e,{playlistItemEntityID:n}),o=fC(e).get("playlistItemList").getCollection();a&&r((0,Fw.Gh)({type:i,model:a,collection:o,isRangeSelect:s}))},[vC.Dn](e,t,r){const n=(0,pu.Tp)(e,{playlistItemEntityID:t.id});n&&r((0,Fw.Ib)([n.id]))},[vC.gS](e,t){const r=(0,pu.Tp)(e,t),n=fC(e).get("playlistItemList"),i=n.getCollection(),s=i.indexOf(r),a=t.moveIndex,o=a-1;if(s===a||s===o)return;const c=a>s?a-1:a,d=b.Z.join([n.get("containerKey"),r.get("playlistItemID"),"move"],o>=0?`after=${i.at(o).id}`:void 0),u=r.provider.getXHROptions(d,{type:"PUT"});(0,Zs.c9)((()=>{i.remove(r),i.add(r,{at:c}),l().ajax(u).fail((()=>{i.indexOf(r)===c&&(i.remove(r),i.add(r,{at:s}))}))}))},[vC.fu](e,t,r){const n=(0,pu.Tp)(e,t),i=fC(e).get("playlistItemList"),s=b.Z.join([i.get("containerKey"),n.get("playlistItemID")]);n.destroy({url:s}).fail((()=>{r((0,st.wp)((0,Fe.Z)("There was an unexpected error removing this item.")))}))},[vC.GN](e,t,r){const n=fC(e).get("playlistItemList"),i=n.get("containerKey"),s=n.getCollection(),a=e.get("ui").get("multiSelect").get("activeSelectionItems").pluck("id");let o=l().Deferred().resolve().promise();a.forEach((e=>{const t=s.get(e),r=b.Z.join([i,e]);o=o.then((()=>t.destroy({url:r,wait:!0})))})),o.fail((()=>{r((0,st.wp)((0,Fe.Z)("There was an unexpected error removing an item.")))}))},[op.FN](e,t,r){const{providerEntityID:n,rating:i}=t,s=fC(e),a=s.get("playlist");if(!a)return;const o=s.get("playlistItemList");"favorites"===a.get("specialPlaylistType")&&n===s.get("providerEntityID")&&(i!==gC.jt&&i!==gC.LX||r((0,yC.Bh)({count:o.get("currentPageSize")})))}}),ZC="ui/playlistsPage/initPlaylistPage",SC="ui/playlistsPage/fetchSorts",PC="ui/playlistsPage/populateSorts",IC="ui/playlistsPage/fetchLibraryDetails",EC="ui/playlistsPage/populateLibraryDetails",wC=((0,HE.Z)(ZC),(0,HE.Z)(SC)),CC=((0,HE.Z)(PC),(0,HE.Z)(IC));function MC(e){return e.get("ui").get("playlistsPage")}(0,HE.Z)(EC);const DC={[ZC](e,t){const r=MC(e),n=(0,pu.SW)(e,t),i=(0,GE.js)(e,t),{serverEntityID:s,libraryKey:a,containerKey:o}=t,l=s===r.get("serverEntityID"),c=a===r.get("libraryKey"),d=o===r.get("containerKey");if(l&&c&&d)return;const u=new St.Z({containerKey:o},{server:n,provider:i});let p=r.get("libraryDetails"),m=r.get("sorts");l&&c||(p=a&&new _P.Z({key:a},{server:n,provider:i}),m=new zP.Z([],{url:"/playlists/sorts",server:n})),r.restoreDefaults({serverEntityID:s,libraryKey:a,containerKey:o,playlists:u,libraryDetails:p,sorts:m})},[IC]:(0,WE.Z)({key:"libraryDetails",getModel:MC}),[EC]:(0,aw.Z)({key:"libraryDetails",fetchActionCreator:CC,getModel:MC}),[SC]:(0,WE.Z)({key:"sorts",getModel:MC}),[PC]:(0,aw.Z)({key:"sorts",fetchActionCreator:wC,getModel:MC}),[st._z](e,t,r){const{metadataItemEntityID:n,containerKeyPattern:i}=t,s=(0,pu.SW)(e,t),a=MC(e).get("playlists");n||a&&a.server===s&&i&&a.get("containerKey").match(i)&&r((0,Uw.u6)({metadataListEntityID:a.entityID()}))}};var OC=r(88298),TC=r(69752);function xC(e){return e.get("ui").get("timelinePage")}function AC(e,t){const r=xC(e),n=(0,pu.SW)(e,t),i=(0,pu.js)(e,t),s=r.get("momentList");s.fetch().done((()=>{const e=s.get("key")||"empty",t=r.get("metadataList");let a;a=t&&t.server===n&&t.get("containerKey")===e?t:new St.Z({containerKey:e},{server:n,provider:i}),r.set({isMomentListPending:!1,isMomentListPopulated:!0,momentListError:null,metadataList:a})})).fail(((e,t)=>{r.set({isMomentListPending:!1,momentListError:t})}))}const kC=(0,sw.Z)({[vC.Mv](e,t){const r=xC(e),n=(0,pu.SW)(e,t),i=(0,pu.js)(e,t),{serverEntityID:s,providerEntityID:a,libraryKey:o,momentKey:l}=t;if(s===r.get("serverEntityID")&&a===r.get("providerEntityID")&&l===r.get("momentKey"))return;const c=new _P.Z({key:o},{server:n,provider:i}),d=new KP({momentKey:l},{server:n,provider:i});r.restoreDefaults({serverEntityID:s,providerEntityID:a,details:c,momentKey:l,momentList:d}),AC(e,t)},[vC.TA](e){xC(e).set({momentKey:""})},[vC.cW]:(0,WE.Z)({key:"details",getModel:xC}),[vC.PG]:(0,aw.Z)({key:"details",fetchActionCreator:TC.de,getModel:xC}),[st._z](e,t){const{metadataItemEntityID:r,containerKeyPattern:n}=t,i=(0,pu.$w)(e,t),s=(0,pu.lp)(e,t),a=xC(e),o=a.get("metadataList"),l=a.get("momentKey");if(r)return;if(!l||!o||o.server!==i||o.provider!==s)return;const c=o.get("containerKey");c&&(n&&!c.match(n)||AC(e,t))}});var NC=Object.defineProperty,RC=Object.defineProperties,LC=Object.getOwnPropertyDescriptors,jC=Object.getOwnPropertySymbols,VC=Object.prototype.hasOwnProperty,UC=Object.prototype.propertyIsEnumerable,FC=(e,t,r)=>t in e?NC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const BC=((e,t)=>RC(e,LC(t)))(((e,t)=>{for(var r in t||(t={}))VC.call(t,r)&&FC(e,r,t[r]);if(jC)for(var r of jC(t))UC.call(t,r)&&FC(e,r,t[r]);return e})({},st.J0),{[st.Rw](e,t){ae.Z.trigger("show:alert",t)}});var _C=r(86457),zC=r(92413);const HC=[r(60239).vG,zw.r8,zC.gK,Es.CC,Ys.Kq,Pc.Iy,Ac.KH,op.ky,Uw.q9,Fw.tv,Bw.GK,_w.wQ,tw,rw.ff,Lw.FY,kd.VV,$c.fv,BC,Ww.r4,lp.GJ,kC,DC,Hw.zJ,bC,Dw,jw.ZP,Rw.N3,nw.b4,Ow.zr,Vw.lW,OC.lo,_C.Ye,Qw.W7,uv.N$,Gw.on,Nw.recordingSchedulePageActionHandlers,Tw.yd,Aw.Rp,kw.wy,xa.ek,Fu.Wm,uC,$w.Yb,xw.BG,cu.u7,pC.HO,iw.A_];r(75580);const WC=Pn.extend({name:"PersistentWebStorage",getStorage:()=>window.localStorage}),GC=Pn.extend({name:"VolatileWebStorage",getStorage:()=>window.sessionStorage});var QC=r(50668);const $C={};function KC(e){return null==e?"":String(e)}function qC(e,...t){let r,n=1;const i=t.length;for(;n<=i;)r=$C[n],r||(r=new RegExp((0,A.Z)(`{${n}}`),"g"),$C[n]=r),e=e.replace(r,KC(t[n-1])),n++;return e}function YC(e,...t){return v().isObject(t[0])?function(e,t){return e.replace(/\{([a-z0-9]+?)\}/gi,((e,r)=>t.hasOwnProperty(r)?KC(t[r]):e))}(e,t[0]):v().isObject(t[t.length-1])?(t.pop(),qC(e,...t)):qC(e,...t)}function XC(e,t){return t?e?v().escape(t):t:""}var JC;const eM={languages:{en:"en.json","en-GB":"en-GB.json",af:"af.json",my:"my.json",ca:"ca.json",cs:"cs.json",sr:"sr.json",da:"da.json",de:"de.json",et:"et.json",es:"es.json","es-419":"es-419.json",el:"el.json",fr:"fr.json","fr-CA":"fr-CA.json",hr:"hr.json",is:"is.json",it:"it.json",lt:"lt.json",hu:"hu.json",nl:"nl.json",no:"no.json",pl:"pl.json",pt:"pt.json","pt-BR":"pt-BR.json",ru:"ru.json",ro:"ro.json",sk:"sk.json",sl:"sl.json",fi:"fi.json",sv:"sv.json",vi:"vi.json",tr:"tr.json",uk:"uk.json",bg:"bg.json",zh:"zh.json","zh-TW":"zh-TW.json",ja:"ja.json",ko:"ko.json",th:"th.json",fa:"fa.json",ar:"ar.json",he:"he.json"},loadingPromise:null,loadingLanguage:null,getLanguages:function(){return this.languages},getTranslation:function(e){if(this.translations[this.language])return this.translations[this.language][e]},t:function(e){return function(t,...r){return YC(XC(!1,e.call(this,t)||t),...r)}}((function(e,...t){return this.getTranslation(e,...t)})),tEscape:(JC=function(e,...t){return this.getTranslation(e,...t)},function(e,...t){return YC(XC(!0,JC.call(this,e)||e),...t)}),load:function(e){if(this.loadingLanguage&&this.loadingLanguage===e)return this.loadingPromise;const t=this.getLanguages();let r;return r=v().has(t,e)?v().has(this.translations,e)?l().Deferred().resolve().promise():l().ajax({dataType:"json",url:b.Z.join([this.basePath,t[e]])}):l().Deferred().reject().promise(),this.loadingLanguage=e,this.loadingPromise=r,r.done(v().bind(this.onLoadSuccess,this,r)),r.fail(v().bind(this.onLoadError,this,r)),r},onLoadSuccess:function(e,t){const r=this.loadingLanguage;e===this.loadingPromise&&(this.loadingPromise=null,this.loadingLanguage=null,this.language=r,t&&(this.translations[r]=t),ae.Z.trigger("languageLoaded",r))},onLoadError:function(e){e===this.loadingPromise&&(ae.Z.trigger("languageLoaded",this.loadingLanguage),this.loadingPromise=null,this.loadingLanguage=null)}};var tM=r(52917);const rM=se.Z.extend({mixins:eM,constructor:function(){this.basePath=b.Z.join(["/web/","translations"]),this.translations={},(0,g.X_)("appModel").done(this.onAppModelRegistered.bind(this))},_repopulateProviders(){const e=(0,g.DB)("appModel"),t=e.get("servers");return(0,Pe.Z)(t.map((t=>{if(t.get("isCloud")){const t=e.get("user").get("providers");return(0,Pe.Z)(t.map((e=>(e.get("features").clear(),(0,g.DB)("appStore").dispatch((0,$s.dB)({providerEntityID:e.entityID(),options:{merge:!0}})),(0,tM.Z)(e)))))}if(t.get("isConnected"))return(0,g.DB)("appStore").dispatch((0,mc.lm)({serverEntityID:t.entityID(),options:{merge:!0}})),(0,tM.Z)(t)})).filter(Boolean))},onAppModelRegistered(){}}).extend({onAppModelRegistered(e){e.on("change:user.change:experienceSettings.change:language",((e,t)=>{this.load(t).done((()=>{ys.Z.setOption("language",t),this._repopulateProviders()}))}))}}),nM=function(){Os.Z.register(new rM)},iM={init(){const e=(0,g.DB)("appModel"),t=`${window.innerWidth}x${window.innerHeight}`,r=`${window.screen.width}x${window.screen.height}`,n={"X-Plex-Product":"Plex Web","X-Plex-Version":"4.87.2","X-Plex-Client-Identifier":e.get("clientID"),"X-Plex-Platform":Cu.Z.name,"X-Plex-Platform-Version":Cu.Z.version,"X-Plex-Features":"external-media,indirect-media,hub-style-list","X-Plex-Model":"bundled","X-Plex-Device":Cu.Z.platform,"X-Plex-Device-Name":Cu.Z.name,"X-Plex-Device-Screen-Resolution":`${t},${r}`,"X-Plex-Restriction-Profile":e.get("user").get("restrictionProfile")};return e.on("change:clientID",((e,t)=>{n["X-Plex-Client-Identifier"]=t})),e.on("change:user.change:restrictionProfile",((e,t)=>{n["X-Plex-Restriction-Profile"]=t})),l().Deferred().resolve(n).promise()}};var sM=r(30236),aM=r.n(sM),oM=r(6360),lM=Object.defineProperty,cM=Object.defineProperties,dM=Object.getOwnPropertyDescriptors,uM=Object.getOwnPropertySymbols,pM=Object.prototype.hasOwnProperty,mM=Object.prototype.propertyIsEnumerable,hM=(e,t,r)=>t in e?lM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gM=(e,t)=>{for(var r in t||(t={}))pM.call(t,r)&&hM(e,r,t[r]);if(uM)for(var r of uM(t))mM.call(t,r)&&hM(e,r,t[r]);return e},yM=(e,t)=>cM(e,dM(t));const vM={maxWidth:1920,maxHeight:1080,maxBitDepth:10},fM={maxWidth:4096,maxHeight:2160,maxBitDepth:10},bM=`width="${vM.maxWidth}"; height="${vM.maxHeight}"`,ZM=`width="${fM.maxWidth}"; height="${fM.maxHeight}"`;function SM(e){if(!oM.Z)return!1;const t=(0,xs.Vq)("video",!0),r=t.canPlayType(e);return(0,xs.u$)(t),"probably"===r}function PM(e){var t,r,n;return!!oM.Z&&null!=(n=null==(r=null==(t=window.MediaSource)?void 0:t.isTypeSupported)?void 0:r.call(t,e))&&n}function IM(e,t){if(Array.isArray(e))return Array.from(new Set(e.concat(t)))}function EM(e,t){return(r,n)=>{e(r)&&aM()(t,n,IM)}}function wM({canDirectPlay:e,canDirectStream:t}={canDirectPlay:SM,canDirectStream:PM}){const r={video:{directPlay:{},directStream:{}}},n=EM(e,r),i=EM(t,r);return n(`video/mp4; codecs="hvc1"; ${bM}`,{video:{directPlay:{mp4:{video:{codecs:{hevc:yM(gM({},vM),{codecID:["hvc1"]})}}}}}}),n(`video/mp4; codecs="hev1"; ${bM}`,{video:{directPlay:{mp4:{video:{codecs:{hevc:yM(gM({},vM),{codecID:["hev1"]})}}}}}}),n(`video/mp4; codecs="hvc1"; ${ZM}`,{video:{directPlay:{mp4:{video:{codecs:{hevc:yM(gM({},fM),{codecID:["hvc1"]})}}}}}}),n(`video/mp4; codecs="hev1"; ${ZM}`,{video:{directPlay:{mp4:{video:{codecs:{hevc:yM(gM({},fM),{codecID:["hev1"]})}}}}}}),i(`video/mp4; codecs="hvc1"; ${bM}`,{video:{directStream:{video:{codecs:{hevc:vM}}}}}),i(`video/mp4; codecs="hev1"; ${bM}`,{video:{directStream:{video:{codecs:{hevc:vM}}}}}),i(`video/mp4; codecs="dvhe"; ${bM}`,{video:{directStream:{video:{codecs:{hevc:vM}}}}}),i(`video/mp4; codecs="hvc1"; ${ZM}`,{video:{directStream:{video:{codecs:{hevc:fM}}}}}),i(`video/mp4; codecs="hev1"; ${ZM}`,{video:{directStream:{video:{codecs:{hevc:fM}}}}}),i(`video/mp4; codecs="dvhe"; ${ZM}`,{video:{directStream:{video:{codecs:{hevc:fM}}}}}),r}var CM=Object.defineProperty,MM=Object.defineProperties,DM=Object.getOwnPropertyDescriptors,OM=Object.getOwnPropertySymbols,TM=Object.prototype.hasOwnProperty,xM=Object.prototype.propertyIsEnumerable,AM=(e,t,r)=>t in e?CM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kM=(e,t)=>{for(var r in t||(t={}))TM.call(t,r)&&AM(e,r,t[r]);if(OM)for(var r of OM(t))xM.call(t,r)&&AM(e,r,t[r]);return e},NM=(e,t)=>MM(e,DM(t));const RM={registerAll(){const e=iM.init();e.done((e=>x.Z.register(e)));const t=new WC;Se.Z.register(t),En.register(new GC),nM();const r=function(){const e={maxWidth:1920,maxHeight:1280},t={maxWidth:4096,maxHeight:2160},r=`width="${e.maxWidth}"; height="${e.maxHeight}"`,n=`width="${t.maxWidth}"; height="${t.maxHeight}"`,i=NM(kM({},e),{maxFrameRate:60}),s={capabilities:{embed:!0,redirect:!0},video:{lowestQualityIndex:2,protocols:{hls:{mimeType:"application/x-mpegURL"}},directPlay:{generic:{video:kM({},i)},mp4:{mimeType:'video/mp4; codecs="avc1.42E01E"',video:{codecs:{h264:{}}},audio:{codecs:{aac:{}}}},ogg:{mimeType:"video/ogg"},mpegts:{protocol:"hls"},flv:{}},directStream:{video:NM(kM({},i),{maxBitDepth:8,codecs:{h264:{}}}),audio:{codecs:{aac:{}},maxBitrate:192,maxChannels:2}}},music:{directPlay:{mp4:{mimeType:'audio/mp4; codecs="mp4a.40.5"',audio:{codecs:{aac:{}}}},mp3:{audio:{codecs:{mp3:{}}}},ogg:{mimeType:'audio/ogg; codecs="vorbis"',audio:{codecs:{vorbis:{}}}},wav:{mimeType:"audio/wav",audio:{codecs:{pcm:{}}}},flac:{mimeType:"audio/flac",audio:{codecs:{flac:{}}}}},directStream:{audio:{codecs:{aac:{}},maxBitrate:320,maxChannels:2}}}},a=[{types:[`video/mp4; codecs="avc1.42E01E"; ${n}`],fragment:{video:{directPlay:{mp4:{video:{codecs:{h264:t}}}},directStream:{video:{codecs:{h264:t}}}}}},{types:[`video/webm; codecs="vp8, opus"; ${r}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp8:e}},audio:{codecs:{opus:{}}}}}}}},{types:[`video/webm; codecs="vp8, vorbis"; ${r}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp8:e}},audio:{codecs:{vorbis:{}}}}}}}},{types:[`video/webm; codecs="vp9, opus"; ${r}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp9:e}},audio:{codecs:{opus:{}}}}}}}},{types:[`video/webm; codecs="vp9, vorbis"; ${r}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp9:e}},audio:{codecs:{vorbis:{}}}}}}}},{types:[`video/webm; codecs="vp8, opus"; ${n}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp8:t}},audio:{codecs:{opus:{}}}}}}}},{types:[`video/webm; codecs="vp8, vorbis"; ${n}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp8:t}},audio:{codecs:{vorbis:{}}}}}}}},{types:[`video/webm; codecs="vp9, opus"; ${n}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp9:t}},audio:{codecs:{opus:{}}}}}}}},{types:[`video/webm; codecs="vp9, vorbis"; ${n}`],fragment:{video:{directPlay:{mkv:{mimeType:"video/webm",video:{codecs:{vp9:t}},audio:{codecs:{vorbis:{}}}}}}}},{types:['audio/mp4; codecs="alac"'],predicate:o,fragment:{music:{directPlay:{mp4:{audio:{codecs:{alac:{}}}}}}}}];function o(e){const t=(0,xs.Vq)("video",!0),r=t.canPlayType(e);return(0,xs.u$)(t),"probably"===r}const c=window.MediaSource&&window.MediaSource.isTypeSupported?window.MediaSource.isTypeSupported:o;if(a.forEach((e=>{const t=e.predicate||c;e.types.some(t)?(f.Z.debug("[Player] Types %o provided %o",e.types,e.fragment),l().extend(!0,s,e.fragment)):f.Z.debug("[Player] Types %o are unsupported",e.types)})),"safari"===Cu.Z.id&&(0,dZ.Z)(Cu.Z.platformVersion,"10.11")){const e={codecs:{ac3:{},eac3:{}}};l().extend(!0,s.video,{directPlay:{mp4:{audio:e}},directStream:{audio:e}})}return l().extend(!0,s,wM()),f.Z.debug("[Player] Final player profile %o",s),s}(),n={audioCapabilities:[{contentType:'audio/mp4; codecs="flac"'}]},i=gs().then((e=>{const t=QC.Z[e];return hs(n,[t])})).then((()=>{Lo.Z.register(l().extend(!0,{},r,{music:{directPlay:{mp4:{audio:{codecs:{flac:{}}}}}}}))}),(()=>{Lo.Z.register(r)}));return(0,Pe.Z)([e,i])}};function LM(){const e=document.documentElement,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen,r=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,n=!(!t||!r);return{hasFullscreen:n,shouldExitOnPlayerClose:!0,initialize(e){const{dispatchEnterFullscreen:t,dispatchExitFullscreen:r}=e;function n(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?t():r()}return n(),document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),l().Deferred().resolve().promise()},enter(){n&&t.call(e)},exit(){n&&r.call(document)}}}var jM=r(81445),VM=r(60276),UM=r(47336),FM=r(33053),BM=Object.defineProperty,_M=Object.defineProperties,zM=Object.getOwnPropertyDescriptors,HM=Object.getOwnPropertySymbols,WM=Object.prototype.hasOwnProperty,GM=Object.prototype.propertyIsEnumerable,QM=(e,t,r)=>t in e?BM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$M=(e,t)=>{for(var r in t||(t={}))WM.call(t,r)&&QM(e,r,t[r]);if(HM)for(var r of HM(t))GM.call(t,r)&&QM(e,r,t[r]);return e},KM=(e,t)=>_M(e,zM(t));const qM={volume:!0,shuffle:!0,quality:!0,audioStream:!0,videoStream:!0,subtitleStream:!0,subtitleColor:!0,subtitlePosition:!0,subtitleSize:!0,subtitleOffset:!0,skipPrevious:!0,skipNext:!0,autoPlay:!0,seekTo:!0,stepBack:!0,stepForward:!0,stop:!0,playPause:!0,repeat:!0},YM=KM($M({},qM),{seekTo:!1});function XM(e,t){const r=t.dispatch;let n,i,s,a=!1,o=0,l=0,c=null,d={},u={};window.__onGCastApiAvailable=function(e){const t=!!(e&&window.cast&&window.chrome&&window.chrome.cast);if(r(pC.Vu(t&&Mp.Rl||(0,FM.Z)()&&Mp.Ke||Mp.lz)),!t)return void f.Z.warn("[Cast] API is not available");const n=window.cast.framework,i=h();i.setOptions({receiverApplicationId:m(),autoJoinPolicy:window.chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),i.addEventListener(n.CastContextEventType.SESSION_STATE_CHANGED,w)},(0,FM.Z)()&&r(pC.Vu(Mp.Ke));const p=document.createElement("script");function m(){const t=e.get("deviceSettings"),r=t.get("chromecastAppID"),n=t.get("chromecastCustomAppID");return r===Qn.Z.CUSTOM&&n?n:r||Qn.Z.PRODUCTION}function h(){if(e.get("castApiAvailability")===Mp.Rl)return window.cast.framework.CastContext.getInstance()}function g(){if(i)return i.customData}function y(e){return e.isMute()?0:Math.round(100*e.getVolume())}function Z(e){if(!e)return;const{customData:t,media:r}=e;if(t&&t.playQueueType)return t.playQueueType;if(r&&r.metadata&&r.metadata.metadataType){const e=window.chrome.cast.media.MetadataType;switch(r.metadata.metadataType){case e.MOVIE:case e.TV_SHOW:return su.pX;case e.MUSIC_TRACK:return su.j0;case e.PHOTO:return su.pV}}}function S(e){if(!e)return;const{customData:t}=e;return t.playbackSessionID}function P(e){const t=g();if(t){const{mediaIndex:n,partIndex:s,adState:a,adTime:o,adDuration:l,liveTVSessionSubscriptionKey:c,liveTVSessionStartedAt:d,liveTVSessionSeekRangeStartedAt:u,liveTVSessionSeekStartSeconds:p,liveTVSessionSeekEndSeconds:m,liveTVSessionCurrentPosition:h,liveTVSessionChannelIdentifier:g,server:y,providerIdentifier:v,isPostPlay:f}=t,b=$M({},f?YM:qM);y.machineIdentifier===Dp.X&&delete b.quality,v&&si.wB(v,[si.Ll,si.vP])&&(delete b.autoPlay,delete b.subtitleColor,delete b.subtitlePosition,delete b.subtitleSize,delete b.subtitleOffset),r(cu.dS({playQueueType:Z(i),playerState:KM($M({},e),{mediaIndex:n,partIndex:s,adState:a,adPositionSeconds:Math.round(o/1e3||0),adDurationSeconds:Math.round(l/1e3||0),controllable:b}),liveTVSessionSubscriptionKey:c,liveTVSessionStartedAt:d,liveTVSessionSeekRangeStartedAt:u,liveTVSessionSeekStartSeconds:p,liveTVSessionSeekEndSeconds:m,liveTVSessionCurrentPosition:h,liveTVSessionChannelIdentifier:g,providerIdentifier:v,machineIdentifier:y.machineIdentifier}))}}function I(){l&&l--}function E(){o&&o--}function w(e){const t=window.cast.framework,{session:i,sessionState:s,errorCode:a}=e;switch(s){case t.SessionState.NO_SESSION:(0,f.Z)("[Cast] Session is not established");break;case t.SessionState.SESSION_STARTED:(0,f.Z)("[Cast] Session is established");break;case t.SessionState.SESSION_START_FAILED:(0,f.Z)(`[Cast] Session failed to start with code "${a}"`);break;case t.SessionState.SESSION_RESUMED:(0,f.Z)("[Cast] Connection to an already existing session is established");break;case t.SessionState.SESSION_ENDED:f.Z.warn("[Cast] Session has disconnected")}switch(n&&(n.removeEventListener(t.SessionEventType.MEDIA_SESSION,C),i.removeEventListener(t.SessionEventType.VOLUME_CHANGED,O)),d={},u={},s){case t.SessionState.NO_SESSION:case t.SessionState.SESSION_START_FAILED:case t.SessionState.SESSION_ENDED:M(!1),n=null,r(cu.Qt());break;case t.SessionState.SESSION_STARTED:case t.SessionState.SESSION_RESUMED:{n=i,i.addEventListener(t.SessionEventType.MEDIA_SESSION,C),i.addEventListener(t.SessionEventType.VOLUME_CHANGED,O),r(pC.vi(KM($M({},i.getCastDevice()),{volume:y(i)})));const e=i.getMediaSession();e&&C({mediaSession:e});break}}}function C({mediaSession:e}){i&&i.removeUpdateListener(M),i=e,e.addUpdateListener(M),d={},u={}}function M(e){const t=window.chrome.cast.media.PlayerState,n=Z(i);if(n!==c&&c&&((0,f.Z)("[Cast] play queue type changed from %o to %o, idling old player",c,n),d[c]=null,u[c]=null,r(cu.L0({playQueueType:c}))),c=n,i&&e&&!a){const{playerState:e,currentTime:n,media:a}=i;P({isPaused:e===t.PAUSED,isBuffering:e===t.BUFFERING,positionSeconds:Math.round(n||0),durationSeconds:Math.round(a.duration||0),playbackSessionID:S(i)}),function(){const e=window.chrome.cast.media.PlayerState,t=g();if(!t)return;const{containerKey:n,key:s,playQueueItemID:a,playQueueVersion:o,mediaIndex:l,partIndex:c,bitrate:p,server:m,providerIdentifier:h}=t,y=Z(i),v=d[y],f=u[y],b=a!==v||o!==f;d[y]=a,u[y]=o,r(cu.RN({playQueueType:Z(i),options:{machineIdentifier:m.machineIdentifier,providerIdentifier:h,containerKey:n,key:s,mediaIndex:l,shouldRefreshPlayQueue:b,playQueueItemID:a,bitrate:p,initialState:{isPaused:i.playerState===e.PAUSED,isBuffering:i.playerState===e.BUFFERING,positionSeconds:Math.round(i.currentTime||0),durationSeconds:Math.round(i.media.duration||0),mediaIndex:l,partIndex:c}}}))}(),function(){const e=g();if(!e)return;const{mediaIndex:t,bitrate:n}=e;r(cu.IY({playQueueType:Z(i),mediaIndex:t,bitrate:n}))}(),function(){const e=g();if(!e)return;const{playQueueType:t,playQueueVersion:n,repeat:i}=e;r(cu.I3({playQueueType:t,playQueueVersion:n,repeatAll:i===iu.QN||i===iu.ry,repeatOne:i===iu.ry}))}(),function(){const e=g();if(!e)return;const{key:t,mediaIndex:n,partIndex:s,audioStreamID:a,subtitleStreamID:o}=e;null==a&&null==o||r(cu.Ep({playQueueType:Z(i),key:t,mediaIndex:n,partIndex:s,audioStreamID:a,subtitleStreamID:o}))}(),e===t.PLAYING?s||(s=window.setTimeout(D,1e3)):s&&(window.clearTimeout(s),s=null)}else f.Z.warn("[Cast] Update ignored; no alive media session"),s&&(window.clearTimeout(s),s=null),i&&n&&i.playerState===t.IDLE&&!a&&(d[n]=null,u[n]=null,r(cu.L0({playQueueType:n})))}function D(){if(i){const e=Math.round(i.getEstimatedTime()||0);e&&P({positionSeconds:e}),s=window.setTimeout(D,1e3)}else f.Z.warn("[Cast] Position update ignored; no media session")}function O(){l||o||n&&r(cu.Vu(y(n)))}function T(e){n?((0,f.Z)(`[Cast] Sending custom message with type "${e.type}"`),n.sendMessage("urn:x-cast:plex",e,null,(e=>{f.Z.warn(`[Cast] Failed to send custom message with error "${e}"`)}))):f.Z.warn(`[Cast] Custom message "${e.type}" ignored; no cast session`)}return p.src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.head.appendChild(p),{requestSession:function(){const e=h();e?((0,f.Z)("[Cast] Requesting session"),e.requestSession()):f.Z.warn("[Cast] Request session ignored; no cast context")},endSession:function(){const e=h();e?((0,f.Z)("[Cast] Ending session"),e.endCurrentSession()):f.Z.warn("[Cast] End session ignored; no cast context"),d={},u={}},startPlayback:function(t){if(!n)return void f.Z.warn("[Cast] Start playback ignored; no cast session");const i=e.get("user"),s=e.get("deviceSettings"),o=i.get("experienceSettings"),l=t.get("playQueue"),c=l.get("type"),d=l.get("playQueueItems").get(l.get("playQueueSelectedItemID")),u=d.get("metadataItem"),p=t.get("startMediaIndex"),m=l.server,h=t.get("providerEntityID"),g=(0,pu.js)(e,{providerEntityID:h}),y=(0,qe.getMetadataType)(d.get("type"));let Z;if((y&&y.mediaType===no.j0?no.j0:no.pX)===no.pX){const e=function(e,t,r){const n=t.get("qualityIndex");if(null!=n)return n;const i=e.server.get("isPrivateConnection");if(i&&r.get("useHomeStreamingRecommendedSettings"))return r.defaults().localQuality;const s=(0,tl.Z)(e,i);return r.get(s)}(u,t,o),r=rl.Z.getQualityByIndex(e);Z=r.bitrate}a=!0,uu(m).done((e=>{const d=t.get("liveTVSession"),m=d?(0,jM.$h)(d):Math.floor((0,tu.Z)(t,u)/1e3),h={playQueueType:c,providerIdentifier:g.get("identifier"),containerKey:b.Z.join([v().result(l,"url")],{own:1}),offset:m,directPlay:s.get("directPlay"),directStream:s.get("directStream"),mediaIndex:p,bitrate:Z,playbackSessionID:t.get("playbackSessionID"),audioBoost:o.get("audioBoost"),subtitleColor:o.get("subtitleColor"),subtitlePosition:o.get("subtitlePosition"),subtitleSize:o.get("subtitleSize"),autoPlay:o.get("autoPlay"),repeat:(0,UM.Z)({repeatOne:t.get("repeatOne"),repeatAll:t.get("repeatAll")}),audioForceMultiChannel:o.get("audioForceMultiChannel"),server:e,user:{username:i.get("username")},liveTVSessionSubscriptionKey:d?d.get("key"):null,liveTVSessionChannelIdentifier:d?d.get("channelIdentifier"):null,debugAdKind:s.get("debugAdKind")||Wn.Z.NONE},y=window.chrome.cast.media,S=new y.MediaInfo(u.get("key"));S.customData=h;const I=new y.LoadRequest(S);I.currentTime=m,I.autoplay=!0,(0,f.Z)("[Cast] Sending load media request"),n.loadMedia(I).then((()=>{(0,f.Z)("[Cast] Load media success"),a=!1,P({isMediaLoading:!1})}),(e=>{f.Z.warn(`[Cast] Failed to load media with error "${e}"`),a=!1,r(cu.XI({playQueueType:c}))}))})).fail((()=>{a=!1,r(cu.XI({playQueueType:c,errorMessage:(0,Fe.Z)('The server "{serverName}" does not have a valid connection for casting. Check that the server is claimed in server settings.',{serverName:m.get("friendlyName")})}))}))},mirrorDetails:function(t){if(!n)return void f.Z.warn("[Cast] Mirror details ignored; no cast session");const r=e.get("user"),i=t.server,s=t.provider;uu(i).done((e=>{const n={server:e,providerIdentifier:s.get("identifier"),user:{username:r.get("username")}},i=new window.chrome.cast.media.MediaInfo(t.get("key"));i.customData=n,T({type:VM.HE,media:i})}))},sendMessage:T,setVolume:function(e){n?((0,f.Z)(`[Cast] Setting volume to "${e}"`),r(cu.Vu(e)),e?(n.isMute()&&(o++,n.setMute(!1).then(E,E)),l++,n.setVolume(e/100).then(I,I)):(o++,n.setMute(!0).then(E,E))):f.Z.warn("[Cast] Set volume ignored; no cast session")}}}function JM(){(0,g.Cq)({CloudServerFlexModel:WI,ServerFlexModel:dE,UserFlexModel:_E}),(0,g.Cq)({UserExperienceSettingsModel:Ni,StoredUserExperienceSettingsModel:SE});const e=new BI,t=function(e){return function(e,t){let r,n=[],i=n;function s(){i===n&&(i=n.slice())}function a(e){r=function(e){const t={};for(let r=0,n=e.length;r<n;r++){const n=e[r];for(const e in n){const r=t[e],i=n[e];r?Array.isArray(r)?r.push(i):t[e]=[r,i]:t[e]=i}}return t}(e)}return a(e),t.on("statechange",(function(){const e=n=i;for(let t=0,r=e.length;t<r;t++)e[t]()})),{dispatch:function e(n){const{payload:i,type:s}=n,a=s&&r[s],o=(0,zE.Z)(n);if(Array.isArray(a))for(let r=0,n=a.length;r<n;r++)a[r](t,i,e);else if(a)a(t,i,e);else{if(!o&&t.getStatePromise)return t.getStatePromise(n);t.dispatch(n)}return n},subscribe:function(e){let t=!0;return s(),i.push(e),function(){if(!t)return;t=!1,s();const r=i.indexOf(e);i.splice(r,1)}},getState:function(){return t.getState()},replaceActionHandlers:a}}(HC,e)}(e);return(0,g.Cq)({appModel:e,appStore:t}),(0,g.Cq)({adPlayerComponent:To,fullscreenManager:LM(),remoteCastPlayerManager:XM(e,t),getDecisionOptions:yl,mediaComponent:Ro,serviceWorker:(ie.Z.hasServiceWorker&&ie.Z.hasLocalStorage,{register:()=>(ie.Z.hasServiceWorker&&ie.Z.hasLocalStorage&&window.navigator.serviceWorker.getRegistrations().then((e=>{e.forEach((e=>{e.unregister()}))})),(0,f.Z)("[Workers] Registered mock service worker"),Promise.resolve()),checkUpdate(){(0,f.Z)("[Workers] Mock worker checking for updates")},skipWaiting(){(0,f.Z)("[Workers] Mock worker installing")},sendMessage:e=>(f.Z.debug("[Workers] Mock worker sending message %o",e),Promise.resolve())}),sessionStats:new Ca}),function(){const e=(0,g.DB)("appModel"),t=(0,g.DB)("appStore");return(0,g.Cq)({settingFinder:zl(e),selectRemoteQuality:Lu,selectRestorePlayQueue:ju,selectSubtitleSettings:Vu,selectLocalVolume:Fl}),(0,g.Cq)({metricsReporter:[fl(),Zl],logs:new Nu([],{parent:e}),testServerConnection:Rl}),(0,g.Cq)({companionServerManager:new Gl({appModel:e}),keyboardShortcuts:{shortcuts:[{keys:["?"],fn:"help",group:"navigation",label:()=>(0,Fe.Z)("Open Keyboard Shortcuts")},{keys:["esc"],fn:"escape",group:"navigation",label:()=>(0,Fe.Z)("Close Modal or Menu")},{keys:["g h"],fn:"home",group:"navigation",label:()=>(0,Fe.Z)("Navigate to Home")},{keys:["g s"],fn:"settings",group:"navigation",label:()=>(0,Fe.Z)("Navigate to Settings")},{keys:["g d"],fn:"activity",group:"navigation",label:()=>(0,Fe.Z)("Navigate to Dashboard")},{keys:["g u"],fn:"usersSharing",group:"navigation",label:()=>(0,Bl.i)(Da.je)?(0,Fe.Z)("Navigate to Home & Library Access"):(0,Fe.Z)("Navigate to Users & Sharing"),visible:()=>!(0,Bl.i)(Da.vi)},{keys:["g u"],fn:"plexHome",group:"navigation",label:()=>(0,Fe.Z)("Navigate to Plex Home"),visible:()=>(0,Bl.i)(Da.vi)},{keys:["g j"],fn:"manageLibraryAccess",group:"navigation",label:()=>(0,Fe.Z)("Navigate to Manage Library Access"),visible:()=>(0,Bl.i)(Da.vi)},{keys:["/"],fn:"search",group:"actions",label:()=>(0,Fe.Z)("Focus Search")},{keys:["p"],fn:"playSelected",group:"actions",label:()=>(0,Fe.Z)("Open Player")},{keys:["w"],fn:"togglePlayed",group:"actions",label:()=>(0,Fe.Z)("Toggle as Played/Unplayed")},{keys:["e"],fn:"edit",group:"actions",label:()=>(0,Fe.Z)("Edit Metadata")},{keys:["i"],fn:"info",group:"actions",label:()=>(0,Fe.Z)("Get Info")},{keys:["shift+s"],fn:"save",group:"actions",label:()=>(0,Fe.Z)("Save Changes")},{keys:["space"],fn:"playPause",group:"player",label:()=>(0,Fe.Z)("Play or Pause")},{keys:["play"],fn:"play",group:"player",label:()=>(0,Fe.Z)("Play")},{keys:["pause"],fn:"pause",group:"player",label:()=>(0,Fe.Z)("Pause")},{keys:["f","\\"],fn:"toggleFullScreen",group:"player",label:()=>(0,Fe.Z)("Toggle FullScreen")},{keys:["down"],fn:"decreaseVolume",group:"player",label:()=>(0,Fe.Z)("Decrease Volume")},{keys:["up"],fn:"increaseVolume",group:"player",label:()=>(0,Fe.Z)("Increase Volume")},{keys:[",","left"],fn:"seekBackward",group:"player",label:()=>(0,Fe.Z)("Seek Backward (10 seconds)")},{keys:[".","right"],fn:"seekForward",group:"player",label:()=>(0,Fe.Z)("Seek Forward (30 seconds)")},{keys:["[","alt+left"],fn:"stepBackward",group:"player",label:()=>(0,Fe.Z)("Step Backward (10 minutes)")},{keys:["]","alt+right"],fn:"stepForward",group:"player",label:()=>(0,Fe.Z)("Step Forward (10 minutes)")},{keys:["shift+left"],fn:"skipPrevious",group:"player",label:()=>(0,Fe.Z)("Skip to Previous Item")},{keys:["shift+right"],fn:"skipNext",group:"player",label:()=>(0,Fe.Z)("Skip to Next Item")},{keys:["x"],fn:"stop",group:"player",label:()=>(0,Fe.Z)("Close Player")}],triggerShortcut(e){const t="shortcut:"+e;return ae.Z.hasListener(t)&&ae.Z.trigger(t),!1},help(){ae.Z.trigger("show:modal",new _l.Z({shortcuts:this.shortcuts}))},escape(){ae.Z.trigger("shortcut:escape")},home(){(0,Wt.Z)("home")},settings(){(0,Wt.Z)("webSettings",{settingsSubset:"general"})},activity(){const e=g.DB("appModel").get("primaryServer");e&&!e.get("isShared")&&(0,Wt.Z)("serverSettings",{machineIdentifier:e.id,settingsSection:"status",settingsGroup:"server-dashboard"})},usersSharing(e){(0,Wt.Z)("usersSharing")},plexHome(){(0,Wt.Z)("plexHome")},manageLibraryAccess(e){(0,Wt.Z)("manageLibraryAccess")},search(){return this.triggerShortcut("search")},playSelected(){return this.triggerShortcut("playSelected")},togglePlayed(){return this.triggerShortcut("togglePlayed")},edit(){return this.triggerShortcut("edit")},info(){return this.triggerShortcut("info")},save(){return this.triggerShortcut("save")},playPause(){return this.triggerShortcut("playPause")},play(){return this.triggerShortcut("play")},pause(){return this.triggerShortcut("pause")},toggleFullScreen(){return this.triggerShortcut("toggleFullScreen")},decreaseVolume(){return this.triggerShortcut("decreaseVolume")},increaseVolume(){return this.triggerShortcut("increaseVolume")},seekBackward(){return this.triggerShortcut("seekBackward")},seekForward(){return this.triggerShortcut("seekForward")},stepBackward(){return this.triggerShortcut("stepBackward")},stepForward(){return this.triggerShortcut("stepForward")},skipPrevious(){return this.triggerShortcut("skipPrevious")},skipNext(){return this.triggerShortcut("skipNext")},stop(){return this.triggerShortcut("stop")}},mediaServerEventConnection:Sp,metrics:[new pc({isPlaybackActive:Vl}),bl],primaryServerManager:new gc({appModel:e}),providerManager:new yc({appModel:e}),remotePlexPlayerManager:Iu(e,t),serverConnectionManager:new $l({appModel:e}),serverConnectionTestManager:new fc({appModel:e}),serverManager:new xc({appModel:e}),serverUpdateManager:new kc({appModel:e}),sourceManager:new Gc({appModel:e}),syncplaySessionManager:new Ad({appModel:e,appStore:t}),watchTogetherRoomsManager:new eu({appModel:e,appStore:t})}),l().Deferred().resolve().promise()}().then(RM.registerAll)}const eD=new a.Z.Application;eD.addInitializer((()=>JM().then(ca))),eD.start()},99546:e=>{function t(e){for(var t=e.length,r=new Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function r(){SHA256_H=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),SHA256_buf=new Array,SHA256_len=0}function n(e){SHA256_buf="string"==typeof e?SHA256_buf.concat(t(e)):SHA256_buf.concat(e);for(var r=0;r+64<=SHA256_buf.length;r+=64)p(SHA256_H,SHA256_buf.slice(r,r+64));SHA256_buf=SHA256_buf.slice(r),SHA256_len+=e.length}function i(){if(SHA256_buf[SHA256_buf.length]=128,SHA256_buf.length>56){for(var e=SHA256_buf.length;e<64;e++)SHA256_buf[e]=0;p(SHA256_H,SHA256_buf),SHA256_buf.length=0}for(e=SHA256_buf.length;e<59;e++)SHA256_buf[e]=0;SHA256_buf[59]=SHA256_len>>>29&255,SHA256_buf[60]=SHA256_len>>>21&255,SHA256_buf[61]=SHA256_len>>>13&255,SHA256_buf[62]=SHA256_len>>>5&255,SHA256_buf[63]=SHA256_len<<3&255,p(SHA256_H,SHA256_buf);var t=new Array(32);for(e=0;e<8;e++)t[4*e+0]=SHA256_H[e]>>>24,t[4*e+1]=SHA256_H[e]>>16&255,t[4*e+2]=SHA256_H[e]>>8&255,t[4*e+3]=255&SHA256_H[e];return SHA256_H=null,SHA256_buf=null,SHA256_len=null,t}var s=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),a=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298);function o(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function l(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function c(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function d(e,t,r){return r^e&(t^r)}function u(e,t,r){return e&t^r&(e^t)}function p(e,t){for(var r=new Array(16),n=0;n<16;n++)r[n]=t[4*n+0]<<24|t[4*n+1]<<16|t[4*n+2]<<8|t[4*n+3];!function(e,t){for(var r=16;r<64;r++)t[r]=4294967295&(((n=t[r-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10)+t[r-7]+o(t[r-15])+t[r-16];var n,i=(new Array).concat(e);for(r=0;r<64;r++){var s=i[7]+c(i[4])+d(i[4],i[5],i[6])+a[r]+t[r],p=l(i[0])+u(i[0],i[1],i[2]);i.pop(),i.unshift(s+p&4294967295),i[4]=i[4]+s&4294967295}for(r=0;r<8;r++)e[r]=e[r]+i[r]&4294967295}(e,r)}e.exports={SHA256_hash:function(e){return r(),n(e),function(e){for(var t="",r=0;r<e.length;r++)t+=s[e[r]>>4]+s[15&e[r]];return t}(i())},HMAC_SHA256_init:function(e){HMAC_SHA256_key="string"==typeof e?t(e):(new Array).concat(e),HMAC_SHA256_key.length>64&&(r(),n(HMAC_SHA256_key),HMAC_SHA256_key=i());for(var s=HMAC_SHA256_key.length;s<64;s++)HMAC_SHA256_key[s]=0;for(s=0;s<64;s++)HMAC_SHA256_key[s]^=54;r(),n(HMAC_SHA256_key)},HMAC_SHA256_write:function(e){n(e)},HMAC_SHA256_finalize:function(){for(var e=i(),t=0;t<64;t++)HMAC_SHA256_key[t]^=106;for(r(),n(HMAC_SHA256_key),n(e),t=0;t<64;t++)HMAC_SHA256_key[t]=0;return HMAC_SHA256_key=null,i()}}},2186:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},'<ul class="js-file-list-items list browse-directory-list"></ul> <div class="js-file-list-truncated-message css-file-list-truncated-message"></div> '}))},35453:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="",o=this;function l(e,t){return"star"}function c(e,t){return"dislikes"}return((s=r.each.call(t,t&&t.stars,{hash:{},inverse:o.noop,fn:o.program(1,(function(e,t){var n,i="";return i+='<span class="star"><i class="star-icon glyphicon ',((n=r.if.call(e,e,{hash:{},inverse:o.program(4,c,t),fn:o.program(2,l,t),data:t}))||0===n)&&(i+=n),i+'"></i><span class="empty-icon"></span></span>'}),i),data:i}))||0===s)&&(a+=s),a+" "}))},56445:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="";return(a+='<button type="button" class="close-btn btn-link"><i class="glyphicon remove-2"></i></button> <span class="message">')+((0,this.escapeExpression)((s=r.message)||"function"==typeof(s=t&&t.message)?s.call(t,{hash:{},data:i}):s)+"</span> ")}))},14076:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,l="";return l+='<button class="close-btn btn-link"><i class="glyphicon remove-2"></i></button> <i class="alert-icon glyphicon ',((a=(o=r(54798),o&&(o.__esModule?o.default:o)).call(t,t&&t.type,"success",{hash:{},inverse:this.program(3,(function(e,t){return"circle-exclamation-mark"}),s),fn:this.program(1,(function(e,t){return"circle-ok"}),s),data:s}))||0===a)&&(l+=a),l+='"></i> <h4>',((a="function"==typeof(a=t&&t.message)?a.apply(t):a)||0===a)&&(l+=a),l+"</h4> "}))},36411:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<button type="button" class="close-btn btn-link"><i class="glyphicon remove-2"></i></button> <span class="message">'+c(i(r(66623)).call(t,"A new TV tuner ({tunerMake} {tunerModel}) has been found! Plex DVR is the easiest way to record your favorite shows!",{hash:{tunerModel:t&&t.model,tunerMake:t&&t.make},data:a}))+'</span> <a class="setup-link link" href="'+c("function"==typeof(o=t&&t.dvrSettingsRoute)?o.apply(t):o)+'">'+c(i(r(66623)).call(t,"Learn more",{hash:{},data:a}))+"</a> "}))},23450:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,l="",c="function",d=this.escapeExpression;return l+='<a class="automatch-dropdown-toggle">'+d((o=r(66623),o&&(o.__esModule?o.default:o)).call(t,"Auto Match",{hash:{},data:s}))+' <i class="caret-icon caret-icon-sm"></i></a> <ul class="automatch-dropdown-menu"> ',((a=n.each.call(t,t&&t.agents,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){var r;return""+' <li><a class="auto-match-agent" href="#" data-id="'+d(typeof(r=e&&e.identifier)===c?r.apply(e):r)+'">'+d(typeof(r=e&&e.name)===c?r.apply(e):r)+"</a></li> "}),s),data:s}))||0===a)&&(l+=a),l+" </ul> "}))},51245:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o="",l=this.escapeExpression;return o+='<form class="edit-metadata-form"> ',((a=n.each.call(t,t,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){var n;return""+" "+l((n=r(91196),n&&(n.__esModule?n.default:n)).call(e,"setting",{hash:{idSuffix:"_c"},data:t}))+" "}),s),data:s}))||0===a)&&(o+=a),o+" </form> "}))},53763:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;return l+='<form class="edit-metadata-form"> ',((o=n.if.call(t,t&&t.canReparent,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(e,"autocompleteTextInput",{hash:{label:"Artist",name:"parentTitle",placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.parentTitle),ratingKey:(n=e&&e.item,null==n||!1===n?n:n.parentRatingKey),title:(n=e&&e.item,null==n||!1===n?n:n.parentTitle)},data:t}))+" </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+=' <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Album",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey),scopeToAttr:"parentRatingKey",scopeToParam:"artist.id"},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Sort Album",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-3"> <label>'+c(i(r(66623)).call(t,"Rating",{hash:{},data:a}))+'</label> <div class="rating-region"></div> </div> ',((o=n.unless.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){var n;return""+' <div class="col-md-4"> '+c(i(r(91196)).call(e,"lockableTextInput",{hash:{label:"Year",name:"year",value:(n=e&&e.item,null==n||!1===n?n:n.year),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.year),locked:(n=e&&e.locked,null==n||!1===n?n:n.year),ratingKey:(n=e&&e.item,null==n||!1===n?n:n.ratingKey)},data:t}))+" </div> "}),a),data:a}))||0===o)&&(l+=o),l+=' <div class="col-md-',((o=n.if.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.program(7,(function(e,t){return"5"}),a),fn:d.program(5,(function(e,t){return"9"}),a),data:a}))||0===o)&&(l+=o),l+' "> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(o=t&&t.item,null==o||!1===o?o:o.originallyAvailableAt),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.originallyAvailableAt),locked:(o=t&&t.locked,null==o||!1===o?o:o.originallyAvailableAt)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Record Label",name:"studio",value:(o=t&&t.item,null==o||!1===o?o:o.studio),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.studio),locked:(o=t&&t.locked,null==o||!1===o?o:o.studio),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Review",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+" </div> </div> </form> "}))},75621:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;return l+='<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Genres",name:"genre",attribute:"genres",locked:(o=t&&t.locked,null==o||!1===o?o:o.genre)},data:a}))+" </div> </div> ",((o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["album.style"],{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(e,"lockableTagInput",{hash:{label:"Styles",name:"style",attribute:"styles",locked:(n=e&&e.locked,null==n||!1===n?n:n.style)},data:t}))+" </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["album.mood"],{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(e,"lockableTagInput",{hash:{label:"Moods",name:"mood",attribute:"moods",locked:(n=e&&e.locked,null==n||!1===n?n:n.mood)},data:t}))+" </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+' <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Collections",name:"collection",attribute:"collections",locked:(o=t&&t.locked,null==o||!1===o?o:o.collection)},data:a}))+" </div> </div> </form> "}))},61067:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Artist",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Sort Artist",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Biography",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},1123:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;return l+='<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Genres",name:"genre",attribute:"genres",locked:(o=t&&t.locked,null==o||!1===o?o:o.genre)},data:a}))+" </div> </div> ",((o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["artist.style"],{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(e,"lockableTagInput",{hash:{label:"Styles",name:"style",attribute:"styles",locked:(n=e&&e.locked,null==n||!1===n?n:n.style)},data:t}))+" </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["artist.mood"],{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(e,"lockableTagInput",{hash:{label:"Moods",name:"mood",attribute:"moods",locked:(n=e&&e.locked,null==n||!1===n?n:n.mood)},data:t}))+" </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+=' <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Country",name:"country",attribute:"countries",locked:(o=t&&t.locked,null==o||!1===o?o:o.country)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Collections",name:"collection",attribute:"collections",locked:(o=t&&t.locked,null==o||!1===o?o:o.collection)},data:a}))+" </div> </div> ",((o=n.if.call(t,t&&t.canEditSimilarArtists,{hash:{},inverse:d.noop,fn:d.program(5,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(e,"lockableTagInput",{hash:{label:"Similar Artists",name:"similar",attribute:"similar",query:"title",locked:(n=e&&e.locked,null==n||!1===n?n:n.similar)},data:t}))+" </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+" </form> "}))},89911:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;function u(e,t){return""+' <span class="artwork-file-container"> <input type="file" class="artwork-file-control" multiple> <a href="#">'+c(i(r(66623)).call(e,"choose an image",{hash:{},data:t}))+'</a> </span> <span class="upload-prompt-divider">&middot;</span> '+c(i(r(66623)).call(e,"drag and drop",{hash:{},data:t}))+' <span class="upload-prompt-divider">&middot;</span> '}return((o=n.if.call(t,t&&t.showUpload,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var s,a="";return a+=' <div class="upload-artwork-container"> <div class="upload-prompt"> ',((s=n.if.call(e,e&&e.showFileUpload,{hash:{},inverse:d.noop,fn:d.program(2,u,t),data:t}))||0===s)&&(a+=s),a+' <a class="upload-url-btn" href="#">'+c(i(r(66623)).call(e,"enter a url",{hash:{},data:t}))+'</a> </div> <div class="upload-progress"> '+c(i(r(66623)).call(e,"Uploading artwork...",{hash:{},data:t}))+' </div> <div class="upload-success"> '+c(i(r(66623)).call(e,"this artwork was uploaded successfully",{hash:{},data:t}))+' <span class="upload-prompt-divider">&middot;</span> '+c(i(r(66623)).call(e,"{1}upload another{2}",'<a class="upload-back-btn" href="#">',"</a>",{hash:{},data:t}))+' </div> <div class="upload-error"> '+c(i(r(66623)).call(e,"there was an error uploading this artwork",{hash:{},data:t}))+' <span class="upload-prompt-divider">&middot;</span> '+c(i(r(66623)).call(e,"{1}try again{2}",'<a class="upload-back-btn" href="#">',"</a>",{hash:{},data:t}))+' </div> <form id="upload-form" class="upload-form"> <input type="text" class="form-control" name="url" placeholder="'+c(i(r(66623)).call(e,"Enter a url to upload an image from the web",{hash:{},data:t}))+'"> <div class="upload-form-help"> <div class="pull-right">'+c(i(r(66623)).call(e,"enter to {1}upload{2}",'<a class="submit-url-btn" href="#">',"</a>",{hash:{},data:t}))+'</div> <div class="pull-left">'+c(i(r(66623)).call(e,"esc to {1}cancel{2}",'<a class="cancel-url-btn" href="#">',"</a>",{hash:{},data:t}))+"</div> </div> </form> </div> "}),a),data:a}))||0===o)&&(l+=o),l+' <div class="artwork-list-container"></div> '}))},29087:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-8 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> <div class="col-md-4 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Content Rating",name:"contentRating",value:(o=t&&t.item,null==o||!1===o?o:o.contentRating),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.contentRating),locked:(o=t&&t.locked,null==o||!1===o?o:o.contentRating),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},32185:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-4"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(o=t&&t.item,null==o||!1===o?o:o.originallyAvailableAt),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.originallyAvailableAt),locked:(o=t&&t.locked,null==o||!1===o?o:o.originallyAvailableAt)},data:a}))+' </div> <div class="col-md-4 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Content Rating",name:"contentRating",value:(o=t&&t.item,null==o||!1===o?o:o.contentRating),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.contentRating),locked:(o=t&&t.locked,null==o||!1===o?o:o.contentRating),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> <div class="col-md-4"> <label>'+c(i(r(66623)).call(t,"Rating",{hash:{},data:a}))+'</label> <div class="rating-region"></div> </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},42242:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Writers",name:"writer",attribute:"writers",locked:(o=t&&t.locked,null==o||!1===o?o:o.writer)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Directors",name:"director",attribute:"directors",locked:(o=t&&t.locked,null==o||!1===o?o:o.director)},data:a}))+" </div> </div> </form> "}))},46447:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){var a;return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},""+"<h4>"+(0,this.escapeExpression)((a=r(66623),a&&(a.__esModule?a.default:a)).call(t,"Files",{hash:{},data:s}))+'</h4> <ul class="media-info-file-list"></ul> <div class="loading-container"><div class="loading"></div></div> '}))},58611:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){var s;return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},""+((0,this.escapeExpression)((s=r.file)||"function"==typeof(s=t&&t.file)?s.call(t,{hash:{},data:i}):s)+" ")}))},75442:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;function u(e,t){return""+'<p class="help-block">'+c(i(r(66623)).call(e,"Editing this field requires a Plex Pass. Learn more {1}here{2}.",'<a href="https://www.plex.tv/plex-pass/" target="_blank">',"</a>",{hash:{},data:t}))+"</p>"}return l+='<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Original Title",name:"originalTitle",value:(o=t&&t.item,null==o||!1===o?o:o.originalTitle),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.originalTitle),locked:(o=t&&t.locked,null==o||!1===o?o:o.originalTitle),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+" </div> </div> ",((o=n.if.call(t,t&&t.supportsMultipleEditions,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var s,a="";return a+=' <div class="row"> <div class="col-md-12 selectize field-with-info"> '+c(i(r(91196)).call(e,"lockableTextInput",{hash:{label:"Edition",name:"editionTitle",value:(s=e&&e.item,null==s||!1===s?s:s.editionTitle),placeholder:(s=e&&e.placeholders,null==s||!1===s?s:s.editionTitle),locked:(s=e&&e.locked,null==s||!1===s?s:s.editionTitle),ratingKey:(s=e&&e.item,null==s||!1===s?s:s.ratingKey),disabled:e&&e.disabledMultipleEditionsEditing},data:t}))+" ",((s=n.if.call(e,e&&e.disabledMultipleEditionsEditing,{hash:{},inverse:d.noop,fn:d.program(2,u,t),data:t}))||0===s)&&(a+=s),a+" </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+=' <div class="row"> <div class="col-md-4"> ',((o=n.if.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.program(6,(function(e,t){var n;return""+" "+c(i(r(91196)).call(e,"lockableTextInput",{hash:{label:"Year",name:"year",value:(n=e&&e.item,null==n||!1===n?n:n.year),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.year),locked:(n=e&&e.locked,null==n||!1===n?n:n.year)},data:t}))+" "}),a),fn:d.program(4,(function(e,t){var n;return""+" "+c(i(r(91196)).call(e,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(n=e&&e.item,null==n||!1===n?n:n.originallyAvailableAt),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.originallyAvailableAt),locked:(n=e&&e.locked,null==n||!1===n?n:n.originallyAvailableAt)},data:t}))+" "}),a),data:a}))||0===o)&&(l+=o),l+=' </div> <div class="col-md-4 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Content Rating",name:"contentRating",value:(o=t&&t.item,null==o||!1===o?o:o.contentRating),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.contentRating),locked:(o=t&&t.locked,null==o||!1===o?o:o.contentRating),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> <div class="col-md-4"> <label>'+c(i(r(66623)).call(t,"Rating",{hash:{},data:a}))+'</label> <div class="rating-region"></div> </div> </div> <div class="row"> <div class="col-md-',((o=n.if.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.program(10,(function(e,t){return"6"}),a),fn:d.program(8,(function(e,t){return"12"}),a),data:a}))||0===o)&&(l+=o),l+=' selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Studio",name:"studio",value:(o=t&&t.item,null==o||!1===o?o:o.studio),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.studio),locked:(o=t&&t.locked,null==o||!1===o?o:o.studio),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+" </div> ",((o=n.unless.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.noop,fn:d.program(12,(function(e,t){var n;return""+' <div class="col-md-6"> '+c(i(r(91196)).call(e,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(n=e&&e.item,null==n||!1===n?n:n.originallyAvailableAt),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.originallyAvailableAt),locked:(n=e&&e.locked,null==n||!1===n?n:n.originallyAvailableAt)},data:t}))+" </div> "}),a),data:a}))||0===o)&&(l+=o),l+' </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Tagline",name:"tagline",value:(o=t&&t.item,null==o||!1===o?o:o.tagline),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.tagline),locked:(o=t&&t.locked,null==o||!1===o?o:o.tagline)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},4134:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-6"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Directors",name:"director",attribute:"directors",locked:(o=t&&t.locked,null==o||!1===o?o:o.director)},data:a}))+' </div> <div class="col-md-6"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Country",name:"country",attribute:"countries",locked:(o=t&&t.locked,null==o||!1===o?o:o.country)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Genres",name:"genre",attribute:"genres",locked:(o=t&&t.locked,null==o||!1===o?o:o.genre)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Writers",name:"writer",attribute:"writers",locked:(o=t&&t.locked,null==o||!1===o?o:o.writer)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Producers",name:"producer",attribute:"producers",locked:(o=t&&t.locked,null==o||!1===o?o:o.producer)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Collections",name:"collection",attribute:"collections",locked:(o=t&&t.locked,null==o||!1===o?o:o.collection)},data:a}))+" </div> </div> </form> "}))},70708:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-6"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title)},data:a}))+' </div> <div class="col-md-6"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},21674:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-9"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Captured Time",name:"originallyAvailableAt",value:(o=t&&t.item,null==o||!1===o?o:o.originallyAvailableAt),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.capturedTime),locked:(o=t&&t.locked,null==o||!1===o?o:o.originallyAvailableAt)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},88815:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Tags",name:"tag",attribute:"tags",locked:(o=t&&t.locked,null==o||!1===o?o:o.tag)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{onlyDelete:!0,label:"Autotags",name:"autotag",attribute:"autotags",locked:(o=t&&t.locked,null==o||!1===o?o:o.autotag)},data:a}))+" </div> </div> </form> "}))},85552:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"textInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"textInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5"},data:a}))+" </div> </div> </form> "}))},10837:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},2926:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;function u(e,t){var n;return""+" "+c(i(r(91196)).call(e,"lockableTagInput",{hash:{label:"Labels",name:"label",attribute:"labels",locked:(n=e&&e.locked,null==n||!1===n?n:n.label)},data:t}))+" "}function p(e,t){return""+' <div class="form-group"> <label>'+c(i(r(66623)).call(e,"Labels",{hash:{},data:t}))+"</label> <p>"+c(i(r(66623)).call(e,"Labels require Plex Media Server {1} or later.",e&&e.escapedLabelsMinVersion,{hash:{},data:t}))+"</p> </div> "}return((o=n.if.call(t,t&&t.hasContentFilterFeature,{hash:{},inverse:d.program(6,(function(e,t){var n;return""+' <div class="row row-padded"> <h4 class="text-muted text-center">'+c(i(r(66623)).call(e,"You need a Plex Pass to use restrictions.",{hash:{},data:t}))+'</h4> <p class="text-center"> <a class="btn btn-sm btn-primary" href="'+c("function"==typeof(n=e&&e.plexPassUrl)?n.apply(e):n)+'" target="_blank">'+c(i(r(66623)).call(e,"Learn More",{hash:{},data:t}))+"</a> </p> </div> "}),a),fn:d.program(1,(function(e,t){var r,i="";return i+=' <form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> ',((r=n.if.call(e,e&&e.showLabels,{hash:{},inverse:d.program(4,p,t),fn:d.program(2,u,t),data:t}))||0===r)&&(i+=r),i+" </div> </div> </form> "}),a),data:a}))||0===o)&&(l+=o),l+" "}))},92563:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;return l+='<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Sort Title",name:"titleSort",value:(o=t&&t.item,null==o||!1===o?o:o.titleSort),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.titleSort),locked:(o=t&&t.locked,null==o||!1===o?o:o.titleSort),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Original Title",name:"originalTitle",value:(o=t&&t.item,null==o||!1===o?o:o.originalTitle),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.originalTitle),locked:(o=t&&t.locked,null==o||!1===o?o:o.originalTitle),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-4"> ',((o=n.if.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.program(3,(function(e,t){var n;return""+" "+c(i(r(91196)).call(e,"lockableTextInput",{hash:{label:"Year",name:"year",value:(n=e&&e.item,null==n||!1===n?n:n.year),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.year),locked:(n=e&&e.locked,null==n||!1===n?n:n.year)},data:t}))+" "}),a),fn:d.program(1,(function(e,t){var n;return""+" "+c(i(r(91196)).call(e,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(n=e&&e.item,null==n||!1===n?n:n.originallyAvailableAt),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.originallyAvailableAt),locked:(n=e&&e.locked,null==n||!1===n?n:n.originallyAvailableAt)},data:t}))+" "}),a),data:a}))||0===o)&&(l+=o),l+=' </div> <div class="col-md-4 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Content Rating",name:"contentRating",value:(o=t&&t.item,null==o||!1===o?o:o.contentRating),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.contentRating),locked:(o=t&&t.locked,null==o||!1===o?o:o.contentRating),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+' </div> <div class="col-md-4"> <label>'+c(i(r(66623)).call(t,"Rating",{hash:{},data:a}))+'</label> <div class="rating-region"></div> </div> </div> <div class="row"> <div class="col-md-',((o=n.if.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.program(7,(function(e,t){return"6"}),a),fn:d.program(5,(function(e,t){return"12"}),a),data:a}))||0===o)&&(l+=o),l+=' selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Studio",name:"studio",value:(o=t&&t.item,null==o||!1===o?o:o.studio),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.studio),locked:(o=t&&t.locked,null==o||!1===o?o:o.studio),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+" </div> ",((o=n.unless.call(t,t&&t.supportsLinkedYears,{hash:{},inverse:d.noop,fn:d.program(9,(function(e,t){var n;return""+' <div class="col-md-6"> '+c(i(r(91196)).call(e,"lockableTextInput",{hash:{label:"Originally Available",name:"originallyAvailableAt",value:(n=e&&e.item,null==n||!1===n?n:n.originallyAvailableAt),placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.originallyAvailableAt),locked:(n=e&&e.locked,null==n||!1===n?n:n.originallyAvailableAt)},data:t}))+" </div> "}),a),data:a}))||0===o)&&(l+=o),l+' </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Tagline",name:"tagline",value:(o=t&&t.item,null==o||!1===o?o:o.tagline),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.tagline),locked:(o=t&&t.locked,null==o||!1===o?o:o.tagline)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Summary",name:"summary",value:(o=t&&t.item,null==o||!1===o?o:o.summary),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.summary),type:"textarea",rows:"5",locked:(o=t&&t.locked,null==o||!1===o?o:o.summary)},data:a}))+" </div> </div> </form> "}))},8337:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-metadata-form"> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Genres",name:"genre",attribute:"genres",locked:(o=t&&t.locked,null==o||!1===o?o:o.genre)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTagInput",{hash:{label:"Collections",name:"collection",attribute:"collections",locked:(o=t&&t.locked,null==o||!1===o?o:o.collection)},data:a}))+" </div> </div> </form> "}))},82424:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+='<form class="edit-metadata-form"> ',((o=n.if.call(t,t&&t.canReparent,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(e,"autocompleteTextInput",{hash:{label:"Album Artist",name:"grandparentTitle",placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.grandparentTitle),ratingKey:(n=e&&e.item,null==n||!1===n?n:n.grandparentRatingKey),title:(n=e&&e.item,null==n||!1===n?n:n.grandparentTitle)},data:t}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(e,"autocompleteTextInput",{hash:{label:"Album",name:"parentTitle",placeholder:(n=e&&e.placeholders,null==n||!1===n?n:n.parentTitle),ratingKey:(n=e&&e.item,null==n||!1===n?n:n.parentRatingKey),title:(n=e&&e.item,null==n||!1===n?n:n.parentTitle),scopeToAttr:"grandparentRatingKey",scopeToParam:"artist.id"},data:t}))+" </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+' <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Title",name:"title",value:(o=t&&t.item,null==o||!1===o?o:o.title),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.title),locked:(o=t&&t.locked,null==o||!1===o?o:o.title)},data:a}))+' </div> </div> <div class="row"> <div class="col-md-4"> <label>'+c(i(r(66623)).call(t,"Rating",{hash:{},data:a}))+'</label> <div class="rating-region"></div> </div> <div class="col-md-4"> '+c(i(r(91196)).call(t,"lockableNumericInput",{hash:{label:"Track",name:"index",value:(o=t&&t.item,null==o||!1===o?o:o.index),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.index),locked:(o=t&&t.locked,null==o||!1===o?o:o.index),disabled:t&&t.disableIndices},data:a}))+' </div> <div class="col-md-4"> '+c(i(r(91196)).call(t,"lockableNumericInput",{hash:{label:"Disc",name:"parentIndex",value:(o=t&&t.item,null==o||!1===o?o:o.parentIndex),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.parentIndex),locked:(o=t&&t.locked,null==o||!1===o?o:o.parentIndex),disabled:t&&t.disableIndices},data:a}))+' </div> </div> <div class="row"> <div class="col-md-12 selectize"> '+c(i(r(91196)).call(t,"lockableTextInput",{hash:{label:"Artist",name:"originalTitle",value:(o=t&&t.item,null==o||!1===o?o:o.originalTitle),placeholder:(o=t&&t.placeholders,null==o||!1===o?o:o.originalTitle),locked:(o=t&&t.locked,null==o||!1===o?o:o.originalTitle),ratingKey:(o=t&&t.item,null==o||!1===o?o:o.ratingKey)},data:a}))+" </div> </div> </form> "}))},27802:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;return l+='<form class="edit-metadata-form"> ',((o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["track.style"],{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(e,"lockableTagInput",{hash:{label:"Styles",name:"style",attribute:"styles",locked:(n=e&&e.locked,null==n||!1===n?n:n.style)},data:t}))+" </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,null==(o=t&&t.editableTags)||!1===o?o:o["track.mood"],{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){var n;return""+' <div class="row"> <div class="col-md-12"> '+c(i(r(91196)).call(e,"lockableTagInput",{hash:{label:"Moods",name:"mood",attribute:"moods",locked:(n=e&&e.locked,null==n||!1===n?n:n.mood)},data:t}))+" </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+" </form> "}))},44817:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;function u(e,t){return""+" "+c(i(r(91196)).call(e,"setting",{hash:{idSuffix:"_c"},data:t}))+" "}return((o=n.if.call(t,t&&t.settings,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var s,a="";return a+=' <div class="setup-agent-section"> <div class="setup-agent-title">'+c(i(r(66623)).call(e,"{1} Settings",e&&e.escapedAgentName,{hash:{},data:t}))+'</div> <p class="setup-agent-disclaimer">'+c(i(r(66623)).call(e,"Note: These settings will take effect for all libraries using the {1} agent.",e&&e.escapedAgentName,{hash:{},data:t}))+'</p> <div class="setup-agent-settings"> ',((s=n.each.call(e,e&&e.settings,{hash:{},inverse:d.noop,fn:d.program(2,u,t),data:t}))||0===s)&&(a+=s),a+" </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+" "}))},23682:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",l=this.escapeExpression;return o+'<form class="edit-section-type-form settings-container"> <p>'+l(i(r(66623)).call(t,"There was an error adding this library.",{hash:{},data:a}))+"</p> <p>"+l(i(r(66623)).call(t,"Please visit the {1}forums{2} and provide your logs, as described {3}here{4}.",'<a href="https://forums.plex.tv" target="_blank">',"</a>",'<a href="http://support.plex.tv/hc/en-us/articles/200250417-Log-File-Locations/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps" target="_blank">',"</a>",{hash:{},data:a}))+"</p> </form> "}))},70867:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="";return(a+='<a class="artwork-option media-poster-container" data-rating-key="')+((0,this.escapeExpression)((s=r.ratingKey)||"function"==typeof(s=t&&t.ratingKey)?s.call(t,{hash:{},data:i}):s)+'" href="#"> <div class="media-poster"></div> </a> ')}))},92571:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,l="",c=this.escapeExpression,d="function";return l+='<div class="row disc-number hidden"> '+c((o=r(66623),o&&(o.__esModule?o.default:o)).call(t,"Disc {1}",t&&t.escapedParentIndex,{hash:{},data:s}))+' </div> <div class="row striped-list-inner-item"> <span class="col-xs-1 match-index"> '+c(typeof(a=t&&t.index)===d?a.apply(t):a)+'. </span> <span class="col-xs-11 match-track-name ',((a=n.unless.call(t,t&&t.matched,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){return"missing"}),s),data:s}))||0===a)&&(l+=a),l+'"> '+c(typeof(a=t&&t.name)===d?a.apply(t):a)+" </span> </div> "}))},17488:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){var a;return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},""+'<div class="match-empty-message">'+(0,this.escapeExpression)((a=r(66623),a&&(a.__esModule?a.default:a)).call(t,"No matches found.",{hash:{},data:s}))+"</div> "}))},24938:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o="",l="function",c=this.escapeExpression,d=this;function u(e,t){var r;return""+' <span class="match-year">'+c(typeof(r=e&&e.year)===l?r.apply(e):r)+'</span> <span class="match-separator">&middot;</span> '}return o+='<a class="match-result col-xs-12" href="#"> <div class="row"> <div class="col-xs-9 match-title-info"> ',((a=n.if.call(t,t&&t.parentName,{hash:{},inverse:d.program(3,(function(e,t){var r;return""+' <span class="match-name">'+c(typeof(r=e&&e.name)===l?r.apply(e):r)+"</span> "}),s),fn:d.program(1,(function(e,t){var r;return""+' <span class="match-name">'+c(typeof(r=e&&e.parentName)===l?r.apply(e):r)+'</span> &ndash; <span class="match-name">'+c(typeof(r=e&&e.name)===l?r.apply(e):r)+"</span> "}),s),data:s}))||0===a)&&(o+=a),o+=" ",((a=n.if.call(t,t&&t.disambiguationInfo,{hash:{},inverse:d.noop,fn:d.program(5,(function(e,t){var r;return""+'  <span class="match-disambiguation-info">'+c(typeof(r=e&&e.disambiguationInfo)===l?r.apply(e):r)+"</span> "}),s),data:s}))||0===a)&&(o+=a),o+=" </div> ",((a=n.if.call(t,t&&t.normalizedScore,{hash:{},inverse:d.program(10,(function(e,t){var r;return""+' <div class="col-xs-3 match-score-info"> <span class="match-year">'+c(typeof(r=e&&e.year)===l?r.apply(e):r)+"</span> </div> "}),s),fn:d.program(7,(function(e,t){var i,s,a="";return a+=' <div class="col-xs-3 match-score-info" title="'+c((s=r(66623),s&&(s.__esModule?s.default:s)).call(e,"Score {1}",e&&e.escapedNormalizedScore,{hash:{},data:t}))+'"> ',((i=n.if.call(e,e&&e.year,{hash:{},inverse:d.noop,fn:d.program(8,u,t),data:t}))||0===i)&&(a+=i),a+' <span class="match-score"><i class="match-score-icon glyphicon certificate"></i>'+c(typeof(i=e&&e.normalizedScore)===l?i.apply(e):i)+"</span> </div> "}),s),data:s}))||0===a)&&(o+=a),o+=' </div> <div class="row match-extended-info hidden"> ',((a=n.if.call(t,t&&t.summary,{hash:{},inverse:d.program(14,(function(e,t){return' <div class="col-xs-9 children-region"></div> '}),s),fn:d.program(12,(function(e,t){var r;return""+' <div class="col-xs-9 match-summary">'+c(typeof(r=e&&e.summary)===l?r.apply(e):r)+"</div> "}),s),data:s}))||0===a)&&(o+=a),o+' <div class="col-xs-3"> <img class="match-art" src="'+c(typeof(a=t&&t.thumb)===l?a.apply(t):a)+'"/> </div> </div> </a> '}))},14511:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="",o="function",l=this.escapeExpression;return a+'<a class="striped-list-item" href="#" data-key="'+l(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.key)===o?s.apply(t):s)+'"> <i class="glyphicon file"></i> '+l(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.title)===o?s.apply(t):s)+" </a> "}))},93798:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="",o=this,l="function",c=this.escapeExpression;function d(e,t){return"home"}function u(e,t){var n;return(n=r.if.call(e,null==(n=e&&e.filePath)||!1===n?n:n.network,{hash:{},inverse:o.program(9,m,t),fn:o.program(7,p,t),data:t}))||0===n?n:""}function p(e,t){return"globe"}function m(e,t){var n;return(n=r.if.call(e,e&&e.isRoot,{hash:{},inverse:o.program(12,g,t),fn:o.program(10,h,t),data:t}))||0===n?n:""}function h(e,t){return"hdd"}function g(e,t){return"folder-open"}return a+='<a class="striped-list-item" href="#" data-key="'+c(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.key)===l?s.apply(t):s)+'" title="'+c(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.title)===l?s.apply(t):s)+'" aria-label="'+c(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.title)===l?s.apply(t):s)+'"> <i class="folder-icon glyphicon ',((s=r.if.call(t,null==(s=t&&t.filePath)||!1===s?s:s.isBackShortcut,{hash:{},inverse:o.program(3,(function(e,t){var n;return(n=r.if.call(e,null==(n=e&&e.filePath)||!1===n?n:n.home,{hash:{},inverse:o.program(6,u,t),fn:o.program(4,d,t),data:t}))||0===n?n:""}),i),fn:o.program(1,(function(e,t){return"left-arrow"}),i),data:i}))||0===s)&&(a+=s),a+'"></i>&nbsp;'+c(typeof(s=null==(s=t&&t.filePath)||!1===s?s:s.title)===l?s.apply(t):s)+' <div class="loading loading-sm loading-inline hidden"></div> </a> '}))},36824:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o="",l="function",c=this.escapeExpression,d=this;return o+='<div class="card card-section"> <div class="card-actions"> <button class="edit-section-btn card-action-btn"><i class="glyphicon pencil"></i></button> <button class="delete-section-btn card-action-btn btn-danger"><i class="glyphicon remove-2"></i></button> </div> <i class="section-icon glyphicon '+c(typeof(a=t&&t.icon)===l?a.apply(t):a)+'"></i> <span class="section-title"></span> ',((a=n.if.call(t,t&&t.path,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){var r;return""+'<span class="section-path">'+c(typeof(r=e&&e.path)===l?r.apply(e):r)+"</span>"}),s),data:s}))||0===a)&&(o+=a),o+=" ",((a=n.if.call(t,t&&t.more,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){var n;return""+'<span class="section-count">'+c((n=r(66623),n&&(n.__esModule?n.default:n)).call(e,"and {count} more",{hash:{count:e&&e.more},data:t}))+"</span>"}),s),data:s}))||0===a)&&(o+=a),o+" </div> "}))},62507:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",l=this.escapeExpression;return o+'<div class="modal-dialog"> <div class="modal-content"> <form name="add-folder-form"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon folder-plus"></i> '+l(i(r(66623)).call(t,"Add Folder",{hash:{},data:a}))+'</h4> </div> <div class="modal-body modal-body-scroll dark-scrollbar"> <div class="row"> <div class="col-md-12"> <input type="text" name="path" class="form-control" value=""> </div> </div> <div class="row directory-container-row"> <div class="home-directory-container col-md-5"></div> <div class="col-md-7"> <div class="path-container"></div> <div class="file-container"></div> </div> </div> </div> <div class="modal-footer"> <button type="button" class="cancel-btn btn btn-default" data-dismiss="modal">'+l(i(r(66623)).call(t,"Cancel",{hash:{},data:a}))+'</button> <button type="submit" class="add-btn btn btn-primary">'+l(i(r(66623)).call(t,"Add",{hash:{},data:a}))+"</button> </div> </form> </div> </div> "}))},9811:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d="function",u=this;return l+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon circle-exclamation-mark"></i> '+c(typeof(o=t&&t.title)===d?o.apply(t):o)+'</h4> </div> <div class="modal-body"> <p class="confirm-message">'+c(typeof(o=t&&t.message)===d?o.apply(t):o)+'</p> <p class="double-confirm-message text-warning">'+c(typeof(o=t&&t.warningMessage)===d?o.apply(t):o)+'</p> </div> <div class="modal-footer"> ',((o=n.unless.call(t,t&&t.hideCancel,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return""+' <button type="button" class="cancel-btn btn btn-lg btn-default" data-dismiss="modal">'+c(i(r(66623)).call(e,e&&e.cancelLabel,{hash:{},data:t}))+"</button> "}),a),data:a}))||0===o)&&(l+=o),l+=' <button type="button" class="confirm-btn btn btn-lg ',((o=n.if.call(t,t&&t.hasDanger,{hash:{},inverse:u.program(5,(function(e,t){return"btn-primary"}),a),fn:u.program(3,(function(e,t){return"btn-danger"}),a),data:a}))||0===o)&&(l+=o),l+' btn-loading"> <div class="loading loading-sm"></div> <span class="btn-label">'+c(i(r(66623)).call(t,t&&t.confirmLabel,{hash:{},data:a}))+"</span> </button> </div> </div> </div> "}))},64935:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c="function",d=this.escapeExpression,u=this;function p(e,t){var r;return""+'download="'+d(typeof(r=e&&e.downloadName)===c?r.apply(e):r)+'"'}function m(e,t){var r;return""+" "+d(typeof(r=e&&e.title)===c?r.apply(e):r)+' <span class="title-separator"></span> '}function h(e,t){var s,a="";return a+=" "+d(i(r(27420)).call(e,e&&e.videoResolution,{hash:{},data:t})),((s=n.if.call(e,e&&e.bitrate,{hash:{},inverse:u.noop,fn:u.program(7,g,t),data:t}))||0===s)&&(a+=s),a+" "}function g(e,t){return","}function y(e,t){return""+" "+d(i(r(30538)).call(e,e&&e.bitrate,{hash:{},data:t}))+" "}return l+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon download-alt"></i> '+d(i(r(66623)).call(t,"Download a Version",{hash:{},data:a}))+'</h4> </div> <div class="modal-body modal-body-scroll dark-scrollbar"> <ul class="list select-list download-list"> ',((o=n.each.call(t,t&&t.mediaItems,{hash:{},inverse:u.noop,fn:u.programWithDepth(1,(function(e,t,s){var a,o="";return o+=' <li class="striped-list-item select-list-item download-list-item"> <a class="media" data-value="'+d(typeof(a=null==t||!1===t?t:t.index)===c?a.apply(e):a)+'" href="'+d(typeof(a=e&&e.downloadUrl)===c?a.apply(e):a)+'" target="'+d(typeof(a=s&&s.defaultLinkTarget)===c?a.apply(e):a)+'" ',((a=i(r(60773)).call(e,s&&s.defaultLinkTarget,"_blank",{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===a)&&(o+=a),o+="> ",((a=n.if.call(e,e&&e.title,{hash:{},inverse:u.noop,fn:u.program(4,m,t),data:t}))||0===a)&&(o+=a),o+=" ",((a=n.if.call(e,e&&e.videoResolution,{hash:{},inverse:u.noop,fn:u.program(6,h,t),data:t}))||0===a)&&(o+=a),o+=" ",((a=n.if.call(e,e&&e.bitrate,{hash:{},inverse:u.noop,fn:u.program(9,y,t),data:t}))||0===a)&&(o+=a),o+" </a> </li> "}),a,t),data:a}))||0===o)&&(l+=o),l+" </ul> </div> </div> </div> "}))},70564:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;return l+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon pencil"></i> '+c("function"==typeof(o=t&&t.paneTitle)?o.apply(t):o)+'</h4> </div> <div class="modal-body modal-body-scroll modal-body-with-panes"> <div class="modal-nav-pane dark-scrollbar hidden"> <ul class="list modal-nav-list"> ',((o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.general,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn general-btn" data-pane="general" href="#"> <i class="modal-nav-icon glyphicon align-center"></i> '+c(i(r(66623)).call(e,"General",{hash:{},data:t}))+" </a></li> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.tags,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn tags-btn" data-pane="tags" href="#"> <i class="modal-nav-icon glyphicon tags"></i> '+c(i(r(66623)).call(e,"Tags",{hash:{},data:t}))+" </a></li> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.sharing,{hash:{},inverse:d.noop,fn:d.program(5,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn sharing-btn" data-pane="sharing" href="#"> <i class="modal-nav-icon glyphicon parents"></i> '+c(i(r(66623)).call(e,"Sharing",{hash:{},data:t}))+" </a></li> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.poster,{hash:{},inverse:d.noop,fn:d.program(7,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn poster-btn" data-pane="poster" href="#"> <i class="modal-nav-icon glyphicon picture"></i> '+c(i(r(66623)).call(e,"Poster",{hash:{},data:t}))+" </a></li> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.banner,{hash:{},inverse:d.noop,fn:d.program(9,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn banner-btn" data-pane="banner" href="#"> <i class="modal-nav-icon glyphicon picture"></i> '+c(i(r(66623)).call(e,"Banner",{hash:{},data:t}))+" </a></li> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.art,{hash:{},inverse:d.noop,fn:d.program(11,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn art-btn" data-pane="art" href="#"> <i class="modal-nav-icon glyphicon picture"></i> '+c(i(r(66623)).call(e,"Background",{hash:{},data:t}))+" </a></li> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.info,{hash:{},inverse:d.noop,fn:d.program(13,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn info-btn" data-pane="info" href="#"> <i class="modal-nav-icon glyphicon circle-info"></i> '+c(i(r(66623)).call(e,"Info",{hash:{},data:t}))+" </a></li> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,null==(o=t&&t.panes)||!1===o?o:o.advanced,{hash:{},inverse:d.noop,fn:d.program(15,(function(e,t){return""+' <li><a class="btn-gray change-pane-btn advanced-btn" data-pane="advanced" href="#"> <i class="modal-nav-icon glyphicon cogwheel"></i> '+c(i(r(66623)).call(e,"Advanced",{hash:{},data:t}))+" </a></li> "}),a),data:a}))||0===o)&&(l+=o),l+' </ul> </div> <div class="modal-body-pane pane-region dark-scrollbar"> <div class="loading loading-inline"></div> </div> </div> <div class="modal-footer"> <span class="form-message"></span> <button type="button" class="cancel-btn btn btn-default" data-dismiss="modal">'+c(i(r(66623)).call(t,"Cancel",{hash:{},data:a}))+'</button> <button type="button" class="save-btn btn btn-primary btn-loading"> <div class="loading loading-sm"></div> <span class="btn-label">'+c(i(r(66623)).call(t,"Save Changes",{hash:{},data:a}))+"</span> </button> </div> </div> </div> "}))},97892:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;function u(e,t){return" selected"}function p(e,t){return""+" "+c(i(r(66623)).call(e,"Select type",{hash:{},data:t}))+" "}function m(e,t){return""+" "+c(i(r(66623)).call(e,"General",{hash:{},data:t}))+" "}function h(e,t){return"disabled"}function g(e,t){return"hidden"}return l+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"> ',((o=n.if.call(t,t&&t.add,{hash:{},inverse:d.program(3,(function(e,t){var r;return""+' <i class="modal-icon glyphicon pencil"></i> '+c("function"==typeof(r=e&&e.paneTitle)?r.apply(e):r)+" "}),a),fn:d.program(1,(function(e,t){return""+' <i class="modal-icon glyphicon plus"></i> '+c(i(r(66623)).call(e,"Add {1} Library",'<span class="section-type-title"></span>',{hash:{},data:t}))+" "}),a),data:a}))||0===o)&&(l+=o),l+=' </h4> </div> <div class="modal-body modal-body-scroll modal-body-with-panes"> ',((o=n.if.call(t,t&&t.isLoading,{hash:{},inverse:d.program(7,(function(e,t){var s,a="";return a+=' <div class="modal-nav-pane dark-scrollbar"> <ul class="list modal-nav-list"> <li> <a class="btn-gray change-pane-btn type-btn',((s=i(r(54798)).call(e,e&&e.selectedPane,"type",{hash:{},inverse:d.noop,fn:d.program(8,u,t),data:t}))||0===s)&&(a+=s),a+='" data-pane="type" href="#"> <i class="modal-nav-icon glyphicon align-center"></i> ',((s=n.if.call(e,e&&e.add,{hash:{},inverse:d.program(12,m,t),fn:d.program(10,p,t),data:t}))||0===s)&&(a+=s),a+=' </a> </li> <li> <a class="btn-gray change-pane-btn folders-btn',((s=i(r(54798)).call(e,e&&e.selectedPane,"folders",{hash:{},inverse:d.noop,fn:d.program(8,u,t),data:t}))||0===s)&&(a+=s),a+=" ",((s=n.if.call(e,e&&e.add,{hash:{},inverse:d.noop,fn:d.program(14,h,t),data:t}))||0===s)&&(a+=s),a+=" ",((s=n.unless.call(e,e&&e.showFolders,{hash:{},inverse:d.noop,fn:d.program(16,g,t),data:t}))||0===s)&&(a+=s),a+='" data-pane="folders" href="#"> <i class="modal-nav-icon glyphicon folder-open"></i> '+c(i(r(66623)).call(e,"Add folders",{hash:{},data:t}))+' </a> </li> <li> <a class="btn-gray change-pane-btn options-btn',((s=i(r(54798)).call(e,e&&e.selectedPane,"options",{hash:{},inverse:d.noop,fn:d.program(8,u,t),data:t}))||0===s)&&(a+=s),a+=" ",((s=n.if.call(e,e&&e.add,{hash:{},inverse:d.noop,fn:d.program(14,h,t),data:t}))||0===s)&&(a+=s),a+=' hidden" data-pane="options" href="#"> <i class="modal-nav-icon glyphicon magic"></i> '+c(i(r(66623)).call(e,"Options",{hash:{},data:t}))+' </a> </li> <li> <a class="btn-gray change-pane-btn advanced-btn',((s=i(r(54798)).call(e,e&&e.selectedPane,"advanced",{hash:{},inverse:d.noop,fn:d.program(8,u,t),data:t}))||0===s)&&(a+=s),a+=" ",((s=n.if.call(e,e&&e.add,{hash:{},inverse:d.noop,fn:d.program(14,h,t),data:t}))||0===s)&&(a+=s),a+'" data-pane="advanced" href="#"> <i class="modal-nav-icon glyphicon cogwheel"></i> '+c(i(r(66623)).call(e,"Advanced",{hash:{},data:t}))+' </a> </li> </ul> </div> <div class="modal-body-pane pane-region dark-scrollbar"> </div> '}),a),fn:d.program(5,(function(e,t){return' <div class="modal-body-pane pane-region dark-scrollbar"> <div class="loading loading-inline"></div> </div> '}),a),data:a}))||0===o)&&(l+=o),l+=' </div> <div class="modal-footer"> <span class="form-message"></span> <button type="button" class="cancel-btn btn btn-default" data-dismiss="modal">'+c(i(r(66623)).call(t,"Cancel",{hash:{},data:a}))+'</button> <button type="button" class="save-btn btn btn-primary btn-loading ',((o=n.if.call(t,t&&t.add,{hash:{},inverse:d.noop,fn:d.program(14,h,a),data:a}))||0===o)&&(l+=o),l+='"> <div class="loading loading-sm"></div> <span class="btn-label"> <span class="save-btn-label-next">'+c(i(r(66623)).call(t,"Next",{hash:{},data:a}))+'</span> <span class="save-btn-label-save"> ',((o=n.if.call(t,t&&t.add,{hash:{},inverse:d.program(20,(function(e,t){return""+" "+c(i(r(66623)).call(e,"Save Changes",{hash:{},data:t}))+" "}),a),fn:d.program(18,(function(e,t){return""+" "+c(i(r(66623)).call(e,"Add Library",{hash:{},data:t}))+" "}),a),data:a}))||0===o)&&(l+=o),l+" </span> </span> </button> </div> </div> </div> "}))},29509:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;return l+='<div class="modal-dialog"> <div class="modal-content"> <form id="fix-incorrect-match-form"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon nameplate"></i> <span class="modal-title-text"></span></h4> ',((o=n.if.call(t,t&&t.location,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return""+' <div class="match-location"> '+c(i(r(66623)).call(e,"Location",{hash:{},data:t}))+": "+c(i(r(86421)).call(e,e&&e.location,60,12,{hash:{},data:t}))+" </div> "}),a),data:a}))||0===o)&&(l+=o),l+=' </div> <div class="modal-body modal-body-scroll dark-scrollbar"> ',((o=n.if.call(t,t&&t.showNavigation,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){return""+' <ul class="list modal-list"> <li class="modal-list-item"><a class="search-options-btn" href="#">'+c(i(r(66623)).call(e,"Search Options",{hash:{},data:t}))+'</a></li> <li class="auto-match-dropdown-region modal-list-item"></li> </ul> '}),a),data:a}))||0===o)&&(l+=o),l+=' <div class="pane-region"></div> </div> <div class="modal-footer"> <div class="match-search-actions"> <button type="button" class="cancel-btn btn btn-default">'+c(i(r(66623)).call(t,"Cancel",{hash:{},data:a}))+"</button> ",((o=n.if.call(t,t&&t.showNavigation,{hash:{},inverse:d.noop,fn:d.program(5,(function(e,t){return""+' <button type="submit" class="search-btn btn btn-primary btn-loading"> <div class="loading loading-sm"></div> <span class="btn-label">'+c(i(r(66623)).call(e,"Search",{hash:{},data:t}))+"</span> </button> "}),a),data:a}))||0===o)&&(l+=o),l+" </div> </div> </form> </div> </div> "}))},78319:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,l="",c="function",d=this.escapeExpression,u=this;function p(e,t){var r,i="";return i+=' <li> <span class="keyboard-shortcuts-keys"> ',((r=n.each.call(e,e&&e.keys,{hash:{},inverse:u.noop,fn:u.program(3,m,t),data:t}))||0===r)&&(i+=r),i+' </span> <span class="keyboard-shortcuts-label text-muted">'+d(typeof(r=e&&e.label)===c?r.apply(e):r)+"</span> </li> "}function m(e,t){var r,i="";return i+=" ",((r=n.if.call(e,e&&e.plain,{hash:{},inverse:u.noop,fn:u.program(4,h,t),data:t}))||0===r)&&(i+=r),i+=" ",((r=n.unless.call(e,e&&e.plain,{hash:{},inverse:u.noop,fn:u.program(6,g,t),data:t}))||0===r)&&(i+=r),i+=" ",((r=n.if.call(e,e&&e.split,{hash:{},inverse:u.noop,fn:u.program(8,y,t),data:t}))||0===r)&&(i+=r),i+" "}function h(e,t){var r;return""+' <span class="keyboard-shortcuts-keys-plain">'+d(typeof(r=e&&e.s)===c?r.apply(e):r)+"</span> "}function g(e,t){var r;return""+' <span class="keyboard-shortcuts-keys-key">'+d(typeof(r=e&&e.s)===c?r.apply(e):r)+"</span> "}function y(e,t){return" <br> "}return l+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"> <i class="modal-icon glyphicon keyboard-wireless"></i> '+d((o=r(66623),o&&(o.__esModule?o.default:o)).call(t,"Keyboard Shortcuts",{hash:{},data:s}))+' </h4> </div> <div class="modal-body modal-body-scroll dark-scrollbar"> ',((a=n.each.call(t,t&&t.groups,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){var r,i="";return i+=' <h5 class="keyboard-shortcuts-header">'+d(typeof(r=e&&e.label)===c?r.apply(e):r)+'</h5> <ul class="list keyboard-shortcuts-list"> ',((r=n.each.call(e,e&&e.shortcuts,{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===r)&&(i+=r),i+" </ul> "}),s),data:s}))||0===a)&&(l+=a),l+" </div> </div> </div> "}))},99673:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;function u(e,t){return""+" "+c(i(r(66623)).call(e,"Settings",{hash:{},data:t}))+" "}function p(e,t){return""+" "+c(i(r(66623)).call(e,"Sign In",{hash:{},data:t}))+" "}return l+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"> <i class="modal-icon glyphicon circle-exclamation-mark"></i> ',((o=n.if.call(t,t&&t.hasPlexSubscription,{hash:{},inverse:d.program(3,(function(e,t){return""+" "+c(i(r(66623)).call(e,"Plex Pass Required",{hash:{},data:t}))+" "}),a),fn:d.program(1,(function(e,t){return""+" "+c(i(r(66623)).call(e,"Internet Required",{hash:{},data:t}))+" "}),a),data:a}))||0===o)&&(l+=o),l+=' </h4> </div> <div class="modal-body"> <p class="confirm-message"> ',((o=n.if.call(t,t&&t.hasPlexSubscription,{hash:{},inverse:d.program(7,(function(e,t){return""+" "+c(i(r(66623)).call(e,"This library requires your server be signed in to a Plex Pass account.",{hash:{},data:t}))+" "}),a),fn:d.program(5,(function(e,t){return""+" "+c(i(r(66623)).call(e,"This server cannot reach the Internet. Please verify connectivity and try again.",{hash:{},data:t}))+" "}),a),data:a}))||0===o)&&(l+=o),l+=' </p> </div> <div class="modal-footer"> <button type="button" class="cancel-btn btn btn-lg btn-default" data-dismiss="modal">'+c(i(r(66623)).call(t,"Ignore",{hash:{},data:a}))+"</button> ",((o=n.if.call(t,t&&t.hasPlexSubscription,{hash:{},inverse:d.program(11,(function(e,t){var r,i="";return i+=' <a class="confirm-btn btn btn-lg btn-primary" href="'+c("function"==typeof(r=e&&e.serverSettingsRoute)?r.apply(e):r)+'"> ',((r=n.if.call(e,e&&e.isSignedIn,{hash:{},inverse:d.program(14,p,t),fn:d.program(12,u,t),data:t}))||0===r)&&(i+=r),i+" </a> "}),a),fn:d.program(9,(function(e,t){return""+' <button type="button" class="confirm-btn btn btn-lg btn-primary">'+c(i(r(66623)).call(e,"OK",{hash:{},data:t}))+"</button> "}),a),data:a}))||0===o)&&(l+=o),l+" </div> </div> </div> "}))},72854:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d="function",u=this;function p(e,t,r){var i,s="";return s+=' <ul class="media-info-file-list well"> ',((i=n.if.call(e,r&&r.showDeleteFile,{hash:{},inverse:u.noop,fn:u.program(5,m,t),data:t}))||0===i)&&(s+=i),s+=" ",((i=n.each.call(e,e&&e.Part,{hash:{},inverse:u.noop,fn:u.programWithDepth(10,y,t,r),data:t}))||0===i)&&(s+=i),s+" </ul> "}function m(e,t){var n,s="";return s+=' <a href="#" data-media-item="'+c(typeof(n=null==t||!1===t?t:t.index)===d?n.apply(e):n)+'" class="delete-btn text-danger pull-right"> <i class="glyphicon bin"></i> ',((n=i(r(54798)).call(e,null==(n=e&&e.Part)||!1===n?n:n.length,"1",{hash:{},inverse:u.program(8,g,t),fn:u.program(6,h,t),data:t}))||0===n)&&(s+=n),s+" </a> "}function h(e,t){return""+" "+c(i(r(66623)).call(e,"Delete File",{hash:{},data:t}))+" "}function g(e,t){return""+" "+c(i(r(66623)).call(e,"Delete Files",{hash:{},data:t}))+" "}function y(e,t,r){var i,s="";return s+=" <li> ",((i=n.if.call(e,r&&r.showFilepath,{hash:{},inverse:u.program(13,f,t),fn:u.program(11,v,t),data:t}))||0===i)&&(s+=i),s+=" ",((i=n.unless.call(e,e&&e.accessible,{hash:{},inverse:u.noop,fn:u.program(15,b,t),data:t}))||0===i)&&(s+=i),s+" </li> "}function v(e,t){var r;return""+" "+c(typeof(r=e&&e.file)===d?r.apply(e):r)+" "}function f(e,t){return""+" "+c(i(r(66611)).call(e,e&&e.file,{hash:{},data:t}))+" "}function b(e,t){var r,i="";return i+=" ",((r=n.if.call(e,e&&e.exists,{hash:{},inverse:u.program(18,S,t),fn:u.program(16,Z,t),data:t}))||0===r)&&(i+=r),i+" "}function Z(e,t){return""+' <span class="label label-danger" data-toggle="tooltip" title="'+c(i(r(66623)).call(e,"Please check the permissions for this file.",{hash:{},data:t}))+'">'+c(i(r(66623)).call(e,"Inaccessible",{hash:{},data:t}))+"</span> "}function S(e,t){return""+' <span class="label label-danger" data-toggle="tooltip" title="'+c(i(r(66623)).call(e,"Please check that this file exists and the necessary drive is mounted.",{hash:{},data:t}))+'">'+c(i(r(66623)).call(e,"Unavailable",{hash:{},data:t}))+"</span> "}function P(e,t){var n;return""+' <li> <span class="detail-label">'+c(i(r(66623)).call(e,e&&e.name,{hash:{},data:t}))+'</span> <span class="detail">'+c(typeof(n=e&&e.value)===d?n.apply(e):n)+"</span> </li> "}function I(e,t,s){var a,o="";return o+=' <div class="part"> <div class="props"> <h4>'+c(i(r(66623)).call(e,"Part",{hash:{},data:t}))+"</h4> <ul> ",((a=n.each.call(e,e&&e.properties,{hash:{},inverse:u.noop,fn:u.program(21,P,t),data:t}))||0===a)&&(o+=a),o+=' </ul> </div> <div class="streams"> ',((a=n.each.call(e,e&&e.Stream,{hash:{},inverse:u.noop,fn:u.program(24,E,t),data:t}))||0===a)&&(o+=a),o+=" ",((a=n.if.call(e,s&&s.loading,{hash:{},inverse:u.noop,fn:u.program(33,T,t),data:t}))||0===a)&&(o+=a),o+" </div> </div> "}function E(e,t){var s,a="";return a+=' <div class="props"> ',((s=i(r(54798)).call(e,e&&e.streamType,"1",{hash:{},inverse:u.program(27,C,t),fn:u.program(25,w,t),data:t}))||0===s)&&(a+=s),a+=" <ul> ",((s=n.each.call(e,e&&e.properties,{hash:{},inverse:u.noop,fn:u.program(21,P,t),data:t}))||0===s)&&(a+=s),a+" </ul> </div> "}function w(e,t){return""+" <h4>"+c(i(r(66623)).call(e,"Video",{hash:{},data:t}))+"</h4> "}function C(e,t){var n;return(n=i(r(54798)).call(e,e&&e.streamType,"2",{hash:{},inverse:u.program(30,D,t),fn:u.program(28,M,t),data:t}))||0===n?n:""}function M(e,t){return""+" <h4>"+c(i(r(66623)).call(e,"Audio",{hash:{},data:t}))+"</h4> "}function D(e,t){var n;return(n=i(r(54798)).call(e,e&&e.streamType,"3",{hash:{},inverse:u.noop,fn:u.program(31,O,t),data:t}))||0===n?n:""}function O(e,t){return""+" <h4>"+c(i(r(66623)).call(e,"Subtitles",{hash:{},data:t}))+"</h4> "}function T(e,t){return""+' <div class="props"> <h4>'+c(i(r(66623)).call(e,"Loading",{hash:{},data:t}))+"...</h4> </div> "}function x(e,t){var n;return""+' <div class="modal-footer"> <div class="pull-left"> <a href="'+c(typeof(n=e&&e.url)===d?n.apply(e):n)+'" target="_blank">'+c(i(r(66623)).call(e,"View XML",{hash:{},data:t}))+"</a> </div> </div> "}return l+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon circle-info"></i> '+c(i(r(66623)).call(t,"Media Info",{hash:{},data:a}))+'</h4> </div> <div class="modal-body modal-body-scroll dark-scrollbar"> <div class="position-ref ',((o=n.unless.call(t,t&&t.hasStreams,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return"hide-streams-column"}),a),data:a}))||0===o)&&(l+=o),l+='"> ',((o=n.if.call(t,t&&t.hasFiles,{hash:{},inverse:u.noop,fn:u.program(3,(function(e,t){var s,a="";return a+=' <div class="files"> <h4>'+c(i(r(66623)).call(e,"Files",{hash:{},data:t}))+"</h4> ",((s=n.each.call(e,e&&e.media,{hash:{},inverse:u.noop,fn:u.programWithDepth(4,p,t,e),data:t}))||0===s)&&(a+=s),a+" </div> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.each.call(t,t&&t.media,{hash:{},inverse:u.noop,fn:u.programWithDepth(20,(function(e,t,s){var a,o="";return o+=' <div class="media"> <div class="props"> <h4>'+c(i(r(66623)).call(e,"Media",{hash:{},data:t}))+"</h4> <ul> ",((a=n.each.call(e,e&&e.properties,{hash:{},inverse:u.noop,fn:u.program(21,P,t),data:t}))||0===a)&&(o+=a),o+=" </ul> </div> ",((a=n.each.call(e,e&&e.Part,{hash:{},inverse:u.noop,fn:u.programWithDepth(23,I,t,s),data:t}))||0===a)&&(o+=a),o+" </div> "}),a,t),data:a}))||0===o)&&(l+=o),l+=" </div> </div> ",((o=n.if.call(t,t&&t.key,{hash:{},inverse:u.noop,fn:u.programWithDepth(35,(function(e,t,r){var i;return(i=n.if.call(e,r&&r.showFilepath,{hash:{},inverse:u.noop,fn:u.program(36,x,t),data:t}))||0===i?i:""}),a,t),data:a}))||0===o)&&(l+=o),l+" </div> </div> "}))},72631:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"> <i class="modal-icon glyphicon circle-arrow-right"></i> '+c(i(r(66623)).call(t,"Go Premium",{hash:{},data:a}))+' </h4> </div> <div class="modal-body"> <p class="text-center"><i class="plex-image plex-pass"></i></p> <h4 class="text-center">'+c(i(r(66623)).call(t,"This feature requires a Plex Pass subscription.",{hash:{},data:a}))+"</h4> ",((o=n.if.call(t,t&&t.isClaimed,{hash:{},inverse:this.program(3,(function(e,t){return""+' <p class="text-muted">'+c(i(r(66623)).call(e,'The server "{1}" has not been claimed. This server must be claimed by an account with a Plex Pass subscription.',e&&e.escapedFriendlyName,{hash:{},data:t}))+"</p> "}),a),fn:this.program(1,(function(e,t){return""+' <p class="text-muted">'+c(i(r(66623)).call(e,"Everything you need to experience the best of Plex. Your subscription gives you premium features and exclusive access to new ones.",{hash:{},data:t}))+"</p> "}),a),data:a}))||0===o)&&(l+=o),l+' <p class="text-center"> <a class="btn btn-sm btn-primary" href="'+c("function"==typeof(o=t&&t.plexPassUrl)?o.apply(t):o)+'" target="_blank">'+c(i(r(66623)).call(t,"Learn More",{hash:{},data:a}))+"</a> </p> </div> </div> </div> "}))},78924:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"> <i class="modal-icon glyphicon circle-exclamation-mark"></i> '+c(i(r(66623)).call(t,"Limited Connection",{hash:{},data:a}))+" - "+c("function"==typeof(o=t&&t.serverName)?o.apply(t):o)+' </h4> </div> <div class="modal-body"> <p> '+c(i(r(66623)).call(t,"You are not connected directly to {1} so streaming quality may be limited. You may be able to connect directly to this server by changing your home network settings. {2}Learn more{3}",t&&t.escapedServerName,'<a href="https://help.plex.tv/relay" target="_blank" class="learn-more">',"</a>",{hash:{},data:a}))+' </p> </div> <div class="modal-footer"> <button type="button" class="confirm-btn btn btn-lg btn-primary">'+c(i(r(66623)).call(t,"OK",{hash:{},data:a}))+"</button> </div> </div> </div> "}))},16893:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon file"></i> '+c(i(r(66623)).call(t,"Select a File",{hash:{},data:a}))+'</h4> </div> <div class="modal-body modal-body-scroll dark-scrollbar"> <ul class="list select-list"> ',((o=n.each.call(t,t&&t.medias,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){var n,s="";return s+=' <li class="striped-list-item select-list-item"> <a class="media" data-value="'+c("function"==typeof(n=null==t||!1===t?t:t.index)?n.apply(e):n)+'" href="#"> ',((n=i(r(57351)).call(e,null==(n=null==(n=e&&e.Part)||!1===n?n:n[0])||!1===n?n:n.file,35,{hash:{},data:t}))||0===n)&&(s+=n),s+" </a> </li> "}),a),data:a}))||0===o)&&(l+=o),l+" </ul> </div> </div> </div> "}))},566:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+='<div class="convert-message-container row"> <div class="col-sm-3 text-center"> <p class="convert-error-icon"><i class="glyphicon circle-exclamation-mark"></i></p> </div> <div class="col-sm-8"> <h4> ',((o=n.if.call(t,t&&t.status,{hash:{},inverse:this.program(3,(function(e,t){return""+" "+c(i(r(66623)).call(e,"There was a problem preparing for optimization.",{hash:{},data:t}))+" "}),a),fn:this.program(1,(function(e,t){var r;return""+" "+c("function"==typeof(r=e&&e.status)?r.apply(e):r)+" "}),a),data:a}))||0===o)&&(l+=o),l+' </h4> <h4><a class="try-again-link" href="#">'+c(i(r(66623)).call(t,"Try again",{hash:{},data:a}))+"</a></h4> </div> </div> "}))},63774:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;function u(e,t){return"selected"}return l+='<label class="control-label" for="convert-storage-location">'+c(i(r(66623)).call(t,"Version storage location",{hash:{},data:a}))+'</label> <select id="convert-storage-location" class="storage-location-select" name="storageLocation" ',((o=n.if.call(t,t&&t.disableLocation,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return"disabled"}),a),data:a}))||0===o)&&(l+=o),l+='> <option value="-1" ',((o=i(r(54798)).call(t,t&&t.selectedLocationID,-1,{hash:{},inverse:d.noop,fn:d.program(3,u,a),data:a}))||0===o)&&(l+=o),l+=">"+c(i(r(66623)).call(t,"In folders with original items",{hash:{},data:a}))+"</option> ",((o=n.each.call(t,t&&t.locations,{hash:{},inverse:d.noop,fn:d.programWithDepth(5,(function(e,t,n){var s,a="";return a+=' <option value="'+c("function"==typeof(s=e&&e.id)?s.apply(e):s)+'" ',((s=i(r(54798)).call(e,n&&n.selectedLocationID,e&&e.id,{hash:{},inverse:d.noop,fn:d.program(3,u,t),data:t}))||0===s)&&(a+=s),a+">"+c(i(r(86421)).call(e,e&&e.path,50,20,{hash:{},data:t}))+"</option> "}),a,t),data:a}))||0===o)&&(l+=o),l+' </select> <p class="help-block">'+c(i(r(66623)).call(t,'A "Plex Versions" folder will be created in your chosen location.',{hash:{},data:a}))+"</p> "}))},73631:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;function u(e,t){return"hidden"}function p(e,t){return"checked"}return l+='<div class="form-group ',((o=n.unless.call(t,t&&t.showUnwatched,{hash:{},inverse:d.noop,fn:d.program(1,u,a),data:a}))||0===o)&&(l+=o),l+='"> <label class="control-label"> <input type="checkbox" id="convert-policy-unwatched" name="policyUnwatched" ',((o=n.if.call(t,null==(o=t&&t.policy)||!1===o?o:o.unwatched,{hash:{},inverse:d.noop,fn:d.program(3,p,a),data:a}))||0===o)&&(l+=o),l+="> "+c(i(r(66623)).call(t,"Unwatched only",{hash:{},data:a}))+' </label> </div> <div class="form-group ',((o=n.unless.call(t,t&&t.isDirectory,{hash:{},inverse:d.noop,fn:d.program(1,u,a),data:a}))||0===o)&&(l+=o),l+='"> <label class="control-label"> <input type="checkbox" id="convert-policy-scope" name="policyScope" value="count" ',((o=i(r(54798)).call(t,null==(o=t&&t.policy)||!1===o?o:o.scope,"count",{hash:{},inverse:d.noop,fn:d.program(3,p,a),data:a}))||0===o)&&(l+=o),l+="> "+c(i(r(66623)).call(t,"Limit to",{hash:{},data:a}))+' <input type="number" id="convert-policy-value" name="policyValue" class="policy-value-control form-control" ',((o=n.if.call(t,null==(o=t&&t.policy)||!1===o?o:o.value,{hash:{},inverse:d.noop,fn:d.program(5,(function(e,t){var r;return""+'value="'+c("function"==typeof(r=null==(r=e&&e.policy)||!1===r?r:r.value)?r.apply(e):r)+'"'}),a),data:a}))||0===o)&&(l+=o),l+="> "+c(i(r(66623)).call(t,"items",{hash:{},data:a}))+' </label> <p class="convert-warning help-block ',((o=n.unless.call(t,t&&t.showLimitWarning,{hash:{},inverse:d.noop,fn:d.program(1,u,a),data:a}))||0===o)&&(l+=o),l+='"> <i class="convert-warning-icon glyphicon circle-exclamation-mark"></i> <span class="convert-warning-text"> ',((o=n.if.call(t,t&&t.isSync,{hash:{},inverse:d.program(9,(function(e,t){return""+" "+c(i(r(66623)).call(e,"A large number of items may be time-consuming to convert. If you have trouble, try reducing the number of items.",{hash:{},data:t}))+" "}),a),fn:d.program(7,(function(e,t){return""+" "+c(i(r(66623)).call(e,"A large number of sync items may be time-consuming to convert and transfer to your device. If you have trouble, try reducing the number of items.",{hash:{},data:t}))+" "}),a),data:a}))||0===o)&&(l+=o),l+" </span> </p> </div> "}))},83343:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d="function",u=this;function p(e,t){return"selected"}function m(e,t){return""+" - "+c(i(r(51777)).call(e,e&&e.mediaSettings,{hash:{},data:t}))}return l+='<select class="convert-target-select" name="target" ',((o=n.if.call(t,t&&t.disableTarget,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return"disabled"}),a),data:a}))||0===o)&&(l+=o),l+="> ",((o=n.each.call(t,t&&t.targets,{hash:{},inverse:u.noop,fn:u.programWithDepth(3,(function(e,t,s){var a,o="";return o+=' <option value="'+c(typeof(a=e&&e.id)===d?a.apply(e):a)+'" ',((a=i(r(54798)).call(e,null==(a=s&&s.item)||!1===a?a:a.targetTagID,e&&e.id,{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t}))||0===a)&&(o+=a),o+="> "+c(typeof(a=e&&e.tag)===d?a.apply(e):a),((a=n.if.call(e,null==(a=e&&e.mediaSettings)||!1===a?a:a.videoResolution,{hash:{},inverse:u.noop,fn:u.program(6,m,t),data:t}))||0===a)&&(o+=a),o+" </option> "}),a,t),data:a}))||0===o)&&(l+=o),l+=' <option value="-1" ',((o=n.unless.call(t,null==(o=t&&t.item)||!1===o?o:o.targetTagID,{hash:{},inverse:u.noop,fn:u.program(4,p,a),data:a}))||0===o)&&(l+=o),l+=">"+c(i(r(66623)).call(t,"Custom",{hash:{},data:a}))+'</option> </select> <div class="convert-custom-target-container"> <input type="text" class="convert-target-title form-control" name="targetTitle" class="form-control" value="'+c(typeof(o=null==(o=t&&t.item)||!1===o?o:o.target)===d?o.apply(t):o)+'" placeholder="'+c(i(r(66623)).call(t,"Quality Name",{hash:{},data:a}))+'"> <select class="convert-target-profile-select" name="targetProfile"> ',((o=n.each.call(t,t&&t.profiles,{hash:{},inverse:u.noop,fn:u.programWithDepth(8,(function(e,t,n){var s,a="";return a+=' <option value="'+c(typeof(s=e&&e.title)===d?s.apply(e):s)+'" ',((s=i(r(54798)).call(e,null==(s=n&&n.selectedProfile)||!1===s?s:s.title,e&&e.title,{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t}))||0===s)&&(a+=s),a+"> "+c(typeof(s=e&&e.title)===d?s.apply(e):s)+" </option> "}),a,t),data:a}))||0===o)&&(l+=o),l+=' </select> <select class="convert-target-quality-select" name="targetQuality"> ',((o=n.each.call(t,t&&t.availableCustomQualities,{hash:{},inverse:u.noop,fn:u.programWithDepth(10,(function(e,t,n){var s,a="";return a+=' <option value="'+c(typeof(s=e&&e.index)===d?s.apply(e):s)+'" ',((s=i(r(54798)).call(e,null==(s=n&&n.selectedCustomQuality)||!1===s?s:s.index,e&&e.index,{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t}))||0===s)&&(a+=s),a+"> "+c(i(r(51777)).call(e,e,{hash:{},data:t}))+" </option> "}),a,t),data:a}))||0===o)&&(l+=o),l+' </select> </div> <p class="help-block">'+c(i(r(66623)).call(t,"Plex will convert your media to this quality. Each version will be stored in a separate file.",{hash:{},data:a}))+"</p> "}))},63775:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this,u="function";return l+='<form id="convert-form" class="settings-container"> <div class="modal-body"> <div class="form-group ',((o=n.unless.call(t,t&&t.showRemuxOnlyWarning,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return"hidden"}),a),data:a}))||0===o)&&(l+=o),l+='"> <p class="convert-warning help-block"> <i class="convert-warning-icon glyphicon circle-exclamation-mark"></i> <span class="convert-warning-text"> '+c(i(r(66623)).call(t,"Video optimization may take a long time to complete on this server. You'll be able to use Plex normally while you wait.",{hash:{},data:a}))+' </span> </p> </div> <div class="form-group"> <label class="control-label" for="convert-title">'+c(i(r(66623)).call(t,"Title",{hash:{},data:a}))+'</label> <input type="text" id="convert-title" name="title" class="form-control" value="'+c(typeof(o=null==(o=t&&t.conversionItem)||!1===o?o:o.title)===u?o.apply(t):o)+'" placeholder="'+c(typeof(o=null==(o=t&&t.conversionItem)||!1===o?o:o.title)===u?o.apply(t):o)+'"> </div> <div class="policy-region"></div> <div class="targets-region"></div> <div class="location-region"></div> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">'+c(i(r(66623)).call(t,"Cancel",{hash:{},data:a}))+'</button> <button type="submit" class="submit-btn btn btn-primary btn-loading"> <div class="loading loading-sm"></div> <span class="btn-label">',((o=n.if.call(t,t&&t.isNew,{hash:{},inverse:d.program(5,(function(e,t){return c(i(r(66623)).call(e,"Save",{hash:{},data:t}))}),a),fn:d.program(3,(function(e,t){return c(i(r(66623)).call(e,"Optimize",{hash:{},data:t}))}),a),data:a}))||0===o)&&(l+=o),l+"</span> </button> </div> </form> "}))},76416:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},'<div class="loading loading-inline"></div> '}))},76246:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){var a;return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},""+'<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button> <h4 class="modal-title"><i class="modal-icon glyphicon restart"></i> '+(0,this.escapeExpression)((a=r(66623),a&&(a.__esModule?a.default:a)).call(t,"Optimize",{hash:{},data:s}))+'</h4> </div> <div class="modal-body-region"></div> </div> </div> '}))},53854:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",l=this.escapeExpression;return o+'<div class="convert-message-container row"> <div class="col-sm-3 text-center"> <p class="convert-success-icon"><i class="glyphicon ok-2"></i></p> </div> <div class="col-sm-8"> <h4>'+l(i(r(66623)).call(t,"This media is being converted.",{hash:{},data:a}))+"</h4> <h4>"+l(i(r(66623)).call(t,"Watch the status of the conversion {1}here{2}.",'<a class="status-link" href="#">',"</a>",{hash:{},data:a}))+"</h4> </div> </div> "}))},47499:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},'<div class="modal-dialog"> <div class="modal-alert"></div> <div class="modal-content"></div> </div> '}))},50839:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,l="",c=this,d=this.escapeExpression;return((a=n.if.call(t,t&&t.disabled,{hash:{},inverse:c.program(3,(function(e,t){return' <a class="user-select-container" href="#"> '}),s),fn:c.program(1,(function(e,t){return' <div class="user-select-container"> '}),s),data:s}))||0===a)&&(l+=a),l+=' <div class="user-select-top"> <div class="user-poster img-circle"> <span class="add-icon">',((a="function"==typeof(a=t&&t.iconAdd)?a.apply(t):a)||0===a)&&(l+=a),l+='</span> </div> </div> <div class="caption"> <div class="username">'+d((o=r(66623),o&&(o.__esModule?o.default:o)).call(t,"Add User",{hash:{},data:s}))+"</div> </div> ",((a=n.if.call(t,t&&t.disabled,{hash:{},inverse:c.program(7,(function(e,t){return" </a> "}),s),fn:c.program(5,(function(e,t){return" </div> "}),s),data:s}))||0===a)&&(l+=a),l+" "}))},53140:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="";return(a+='<span class="message">')+((0,this.escapeExpression)((s=r.message)||"function"==typeof(s=t&&t.message)?s.call(t,{hash:{},data:i}):s)+"</span> ")}))},49243:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;function u(e,t){return""+" "+c(i(r(66623)).call(e,"Confirm Current PIN",{hash:{},data:t}))+" "}function p(e,t){var r;return(r=n.if.call(e,e&&e.isOpeningAddManagedUser,{hash:{},inverse:d.program(11,h,t),fn:d.program(9,m,t),data:t}))||0===r?r:""}function m(e,t){return""+" "+c(i(r(66623)).call(e,"Enter Admin PIN",{hash:{},data:t}))+" "}function h(e,t){return""+" "+c(i(r(66623)).call(e,"Enter PIN",{hash:{},data:t}))+" "}function g(e,t){return""+' <button type="button" class="remove-btn btn-gray pull-left">'+c(i(r(66623)).call(e,"Remove",{hash:{},data:t}))+"</button> "}function y(e,t){return""+' <button type="button" class="skip-btn btn-gray" data-dismiss="modal">'+c(i(r(66623)).call(e,"Skip",{hash:{},data:t}))+"</button> "}function v(e,t){return""+' <button type="button" class="cancel-btn btn-gray" data-dismiss="modal">'+c(i(r(66623)).call(e,"Cancel",{hash:{},data:t}))+"</button> "}return l+='<div class="modal-header"> <div class="home-user-dropdown-container pull-right"></div> <h4 class="modal-title"> ',((o=n.if.call(t,t&&t.showBackButton,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return' <a class="back-btn btn-gray" href="#"><i class="glyphicon chevron-left"></i></a> '}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,t&&t.isEditing,{hash:{},inverse:d.program(5,(function(e,t){var r;return(r=n.if.call(e,e&&e.isEditConfirmation,{hash:{},inverse:d.program(8,p,t),fn:d.program(6,u,t),data:t}))||0===r?r:""}),a),fn:d.program(3,(function(e,t){return""+' <i class="modal-icon glyphicon pencil"></i> '+c(i(r(66623)).call(e,"Edit PIN",{hash:{},data:t}))+" "}),a),data:a}))||0===o)&&(l+=o),l+=' <span class="loading loading-sm hidden"></span> </h4> </div> <form id="pin-form"> <div class="modal-body"> <ul class="tile-list user-select-list disabled"></ul> <input type="number" pattern="[0-9]*" class="pin-input"> <a class="pin-forgot-link btn-gray hidden" href="https://www.plex.tv/pin-reset/" target="_blank">'+c(i(r(66623)).call(t,"Forgot?",{hash:{},data:a}))+'</a> <div class="pin-digit-container" aria-hidden="true"> <div class="pin-digit"></div> <div class="pin-digit"></div> <div class="pin-digit"></div> <div class="pin-digit"></div> </div> ',((o=n.if.call(t,t&&t.isEditWarning,{hash:{},inverse:d.noop,fn:d.program(13,(function(e,t){return""+' <p class="help-block"> '+c(i(r(66623)).call(e,"You do not currently have a PIN. This will allow any users in this home to switch to your account.",{hash:{},data:t}))+" </p> "}),a),data:a}))||0===o)&&(l+=o),l+=" </div> ",((o=n.if.call(t,t&&t.isEditing,{hash:{},inverse:d.noop,fn:d.program(15,(function(e,t){var s,a="";return a+=' <div class="modal-footer"> ',((s=n.if.call(e,e&&e.hasCurrentPIN,{hash:{},inverse:d.noop,fn:d.program(16,g,t),data:t}))||0===s)&&(a+=s),a+=" ",((s=n.if.call(e,e&&e.isEditWarning,{hash:{},inverse:d.program(20,v,t),fn:d.program(18,y,t),data:t}))||0===s)&&(a+=s),a+' <button type="submit" class="save-btn btn-link">'+c(i(r(66623)).call(e,"Save",{hash:{},data:t}))+"</button> </div> "}),a),data:a}))||0===o)&&(l+=o),l+" </form> "}))},61400:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],i=i||{};var s,a="",o=this;return((s=(r=this.merge(r,e.helpers)).if.call(t,t&&t.disabled,{hash:{},inverse:o.program(3,(function(e,t){return' <a class="user-select-container" href="#"> '}),i),fn:o.program(1,(function(e,t){return' <div class="user-select-container"> '}),i),data:i}))||0===s)&&(a+=s),a+=' <div class="user-select-top"> <div class="user-poster img-circle"></div> <i class="protected-icon user-icon glyphicon lock"></i> <i class="admin-icon user-icon glyphicon crown"></i> </div> <div class="caption"> <div class="username"></div> <div class="managed-title"></div> <div class="managed-title-community"></div> </div> ',((s=r.if.call(t,t&&t.disabled,{hash:{},inverse:o.program(7,(function(e,t){return" </a> "}),i),fn:o.program(5,(function(e,t){return" </div> "}),i),data:i}))||0===s)&&(a+=s),a+" "}))},39871:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){var a;return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},""+'<div class="modal-header"> <h4 class="modal-title"> '+(0,this.escapeExpression)((a=r(66623),a&&(a.__esModule?a.default:a)).call(t,"Select User",{hash:{},data:s}))+' <span class="loading loading-sm"></span> </h4> </div> <div class="modal-body"></div> '}))},61153:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,l="",c="function",d=this.escapeExpression;return l+='<div class="form-group" data-attr="'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'"> <label for="text-'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'" class="control-label">'+d((o=r(66623),o&&(o.__esModule?o.default:o)).call(t,t&&t.label,{hash:{},data:s}))+'<span class="control-error"></span></label> <div class="input-group selectize-group"> <input type="text" id="text-'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'" class="form-control text-field" name="'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'" placeholder="'+d(typeof(a=t&&t.placeholder)===c?a.apply(t):a)+'" data-rating-key="'+d(typeof(a=t&&t.ratingKey)===c?a.apply(t):a)+'" data-title="'+d(typeof(a=t&&t.title)===c?a.apply(t):a)+'" ',((a=n.if.call(t,t&&t.scopeToAttr,{hash:{},inverse:this.noop,fn:this.program(1,(function(e,t){var r;return""+'data-scope-to-attr="'+d(typeof(r=e&&e.scopeToAttr)===c?r.apply(e):r)+'" data-scope-to-param="'+d(typeof(r=e&&e.scopeToParam)===c?r.apply(e):r)+'"'}),s),data:s}))||0===a)&&(l+=a),l+"> </div> </div> "}))},79323:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;function u(e,t){return""+' <h4 class="server-connect-error-header">'+c(i(r(66623)).call(e,"Problem Connecting to Plex",{hash:{},data:t}))+'</h4> <p class="text-muted">'+c(i(r(66623)).call(e,"Your server was unable to reach Plex. Please ensure that the computer or device running your server can access the internet.",{hash:{},data:t}))+"</p> "}function p(e,t){return""+' <h4 class="server-connect-error-header">'+c(i(r(66623)).call(e,"Signed in to Plex",{hash:{},data:t}))+'</h4> <p class="text-muted">'+c(i(r(66623)).call(e,"You have successfully signed your server in to Plex, but we were unable to reach it from outside your network.",{hash:{},data:t}))+"</p> "}return((o=i(r(54798)).call(t,t&&t.mappingError,"badauth",{hash:{},inverse:d.program(3,(function(e,t){var n,s="";return((n=i(r(54798)).call(e,e&&e.mappingError,"myplexgone",{hash:{},inverse:d.program(6,p,t),fn:d.program(4,u,t),data:t}))||0===n)&&(s+=n),s+" "}),a),fn:d.program(1,(function(e,t){return""+' <h4 class="server-connect-error-header">'+c(i(r(66623)).call(e,"Problem Connecting to Plex",{hash:{},data:t}))+'</h4> <p class="text-muted">'+c(i(r(66623)).call(e,"Plex was unable to authenticate your server. Please sign your server out and try again.",{hash:{},data:t}))+"</p> "}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=i(r(60773)).call(t,t&&t.context,"settings",{hash:{},inverse:d.noop,fn:d.program(8,(function(e,t){return""+' <p class="text-muted">'+c(i(r(66623)).call(e,"If you skip this step you will not be able to share or stream media outside your home. If you change your mind later, you can adjust this in Settings.",{hash:{},data:t}))+"</p> "}),a),data:a}))||0===o)&&(l+=o),l+' <p class="text-muted">'+c(i(r(66623)).call(t,"If you would like to enable this now, you will need to configure your router or firewall to allow Plex to contact your server. Please refer to our {1}Connecting a Server{2} article for more information.",'<a href="http://support.plex.tv/hc/en-us/articles/200484543-Connecting-a-Server/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps" target="_blank">',"</a>",{hash:{},data:a}))+"</p> "}))},21029:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,l="",c="function",d=this.escapeExpression,u=this;function p(e,t){return"disabled"}return l+='<div class="form-group"> <label for="lockable-'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'">'+d((o=r(66623),o&&(o.__esModule?o.default:o)).call(t,t&&t.label,{hash:{},data:s}))+'</label> <div class="input-group"> <a href="#" data-field="'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'" class="input-group-addon edit-lock-addon ',((a=n.if.call(t,t&&t.locked,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return"locked"}),s),data:s}))||0===a)&&(l+=a),l+=" ",((a=n.if.call(t,t&&t.disabled,{hash:{},inverse:u.noop,fn:u.program(3,p,s),data:s}))||0===a)&&(l+=a),l+='" tabindex="-1"><i class="glyphicon lock"></i></a> <input type="number" id="lockable-'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'" class="form-control lockable-field" name="'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'" value="'+d(typeof(a=t&&t.value)===c?a.apply(t):a)+'" placeholder="'+d(typeof(a=t&&t.placeholder)===c?a.apply(t):a)+'" ',((a=n.if.call(t,t&&t.disabled,{hash:{},inverse:u.noop,fn:u.program(3,p,s),data:s}))||0===a)&&(l+=a),l+"> </div> </div> "}))},71898:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,o,l="",c="function",d=this.escapeExpression,u=this;return l+='<div class="form-group"> <label for="lockable-'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'">'+d((o=r(66623),o&&(o.__esModule?o.default:o)).call(t,t&&t.label,{hash:{},data:s}))+'</label> <div class="input-group selectize-group"> <a href="#" data-field="'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'" class="input-group-addon edit-lock-addon',((a=n.if.call(t,t&&t.locked,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return" locked"}),s),data:s}))||0===a)&&(l+=a),l+='"><i class="glyphicon lock"></i></a> <input type="text" id="lockable-'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'" class="form-control lockable-field tag-input-hidden" data-name="'+d(typeof(a=t&&t.name)===c?a.apply(t):a)+'" data-attr="'+d(typeof(a=t&&t.attribute)===c?a.apply(t):a)+'" data-only-delete="'+d(typeof(a=t&&t.onlyDelete)===c?a.apply(t):a)+'" ',((a=n.if.call(t,t&&t.query,{hash:{},inverse:u.noop,fn:u.program(3,(function(e,t){var r;return""+'data-query="'+d(typeof(r=e&&e.query)===c?r.apply(e):r)+'"'}),s),data:s}))||0===a)&&(l+=a),l+"> </div> </div> "}))},25399:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c="function",d=this.escapeExpression,u=this;function p(e,t){var r;return""+' rows="'+d(typeof(r=e&&e.rows)===c?r.apply(e):r)+'"'}function m(e,t){return"disabled"}function h(e,t){var r;return""+'data-scope-to-attr="'+d(typeof(r=e&&e.scopeToAttr)===c?r.apply(e):r)+'" data-scope-to-param="'+d(typeof(r=e&&e.scopeToParam)===c?r.apply(e):r)+'"'}function g(e,t){var r;return""+'data-rating-key="'+d(typeof(r=e&&e.ratingKey)===c?r.apply(e):r)+'"'}return l+='<div class="form-group selectize-group" data-attr="'+d(typeof(o=t&&t.name)===c?o.apply(t):o)+'"> <label for="lockable-'+d(typeof(o=t&&t.name)===c?o.apply(t):o)+'">'+d(i(r(66623)).call(t,t&&t.label,{hash:{},data:a}))+'</label> <div class="input-group"> <a href="#" data-field="'+d(typeof(o=t&&t.name)===c?o.apply(t):o)+'" class="input-group-addon edit-lock-addon',((o=n.if.call(t,t&&t.locked,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return" locked"}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,t&&t.disabled,{hash:{},inverse:u.noop,fn:u.program(3,(function(e,t){return" disabled"}),a),data:a}))||0===o)&&(l+=o),l+='" tabindex="-1"><i class="glyphicon lock"></i></a> ',((o=i(r(54798)).call(t,t&&t.type,"textarea",{hash:{},inverse:u.program(10,(function(e,t){var r,i="";return i+=' <input type="text" id="lockable-'+d(typeof(r=e&&e.name)===c?r.apply(e):r)+'" class="form-control lockable-field" name="'+d(typeof(r=e&&e.name)===c?r.apply(e):r)+'" value="'+d(typeof(r=e&&e.value)===c?r.apply(e):r)+'" placeholder="'+d(typeof(r=e&&e.placeholder)===c?r.apply(e):r)+'" ',((r=n.if.call(e,e&&e.disabled,{hash:{},inverse:u.noop,fn:u.program(8,m,t),data:t}))||0===r)&&(i+=r),i+=" ",((r=n.if.call(e,e&&e.scopeToAttr,{hash:{},inverse:u.noop,fn:u.program(11,h,t),data:t}))||0===r)&&(i+=r),i+=" ",((r=n.if.call(e,e&&e.ratingKey,{hash:{},inverse:u.noop,fn:u.program(13,g,t),data:t}))||0===r)&&(i+=r),i+"> "}),a),fn:u.program(5,(function(e,t){var r,i="";return i+=' <textarea class="form-control lockable-field" id="lockable-'+d(typeof(r=e&&e.name)===c?r.apply(e):r)+'" name="'+d(typeof(r=e&&e.name)===c?r.apply(e):r)+'"',((r=n.if.call(e,e&&e.rows,{hash:{},inverse:u.noop,fn:u.program(6,p,t),data:t}))||0===r)&&(i+=r),i+=' placeholder="'+d(typeof(r=e&&e.placeholder)===c?r.apply(e):r)+'" ',((r=n.if.call(e,e&&e.disabled,{hash:{},inverse:u.noop,fn:u.program(8,m,t),data:t}))||0===r)&&(i+=r),i+">"+d(typeof(r=e&&e.value)===c?r.apply(e):r)+"</textarea> "}),a),data:a}))||0===o)&&(l+=o),l+" </div> </div> "}))},44410:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c="function",d=this.escapeExpression,u=this;function p(e,t){return"checked"}function m(e,t){var r;return""+' <p class="help-block">'+d(typeof(r=e&&e.summary)===c?r.apply(e):r)+"</p> "}function h(e,t){var r,i="";return i+=' <select id="input_'+d(typeof(r=e&&e.id)===c?r.apply(e):r)+d(typeof(r=e&&e.idSuffix)===c?r.apply(e):r)+'" name="'+d(typeof(r=e&&e.id)===c?r.apply(e):r)+'"> ',((r=n.each.call(e,e&&e.enumValues,{hash:{},inverse:u.noop,fn:u.programWithDepth(10,g,t,e),data:t}))||0===r)&&(i+=r),i+" </select> "}function g(e,t,n){var s,a="";return a+=' <option value="'+d(typeof(s=e&&e.value)===c?s.apply(e):s)+'" ',((s=i(r(54798)).call(e,e&&e.value,n&&n.value,{hash:{},inverse:u.noop,fn:u.program(11,y,t),data:t}))||0===s)&&(a+=s),a+">"+d(typeof(s=e&&e.label)===c?s.apply(e):s)+"</option> "}function y(e,t){return'selected="selected"'}function v(e,t){var s,a="";return a+=' <input type="',((s=i(r(54798)).call(e,e&&e.option,"hidden",{hash:{},inverse:u.program(16,b,t),fn:u.program(14,f,t),data:t}))||0===s)&&(a+=s),a+='" id="input_'+d(typeof(s=e&&e.id)===c?s.apply(e):s)+d(typeof(s=e&&e.idSuffix)===c?s.apply(e):s)+'" class="form-control" name="'+d(typeof(s=e&&e.id)===c?s.apply(e):s)+'" value="'+d(typeof(s=e&&e.value)===c?s.apply(e):s)+'" ',((s=n.if.call(e,e&&e.placeholder,{hash:{},inverse:u.noop,fn:u.program(18,Z,t),data:t}))||0===s)&&(a+=s),a+"> "}function f(e,t){return"password"}function b(e,t){return"text"}function Z(e,t){var r;return""+'placeholder="'+d(typeof(r=e&&e.placeholder)===c?r.apply(e):r)+'"'}return l+='<div class="form-group ',((o=n.if.call(t,t&&t.advanced,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){return"advanced-setting"}),a),data:a}))||0===o)&&(l+=o),l+='"> ',((o=i(r(54798)).call(t,t&&t.type,"bool",{hash:{},inverse:u.program(8,(function(e,t){var r,i="";return i+=' <label class="control-label" for="input_'+d(typeof(r=e&&e.id)===c?r.apply(e):r)+d(typeof(r=e&&e.idSuffix)===c?r.apply(e):r)+'">'+d(typeof(r=e&&e.label)===c?r.apply(e):r)+"</label> ",((r=n.if.call(e,e&&e.enumValues,{hash:{},inverse:u.program(13,v,t),fn:u.program(9,h,t),data:t}))||0===r)&&(i+=r),i+=" ",((r=n.if.call(e,e&&e.summary,{hash:{},inverse:u.noop,fn:u.program(6,m,t),data:t}))||0===r)&&(i+=r),i+" "}),a),fn:u.program(3,(function(e,t){var r,i="";return i+=' <label class="control-label" for="input_'+d(typeof(r=e&&e.id)===c?r.apply(e):r)+d(typeof(r=e&&e.idSuffix)===c?r.apply(e):r)+'"> <input type="checkbox" id="input_'+d(typeof(r=e&&e.id)===c?r.apply(e):r)+d(typeof(r=e&&e.idSuffix)===c?r.apply(e):r)+'" name="'+d(typeof(r=e&&e.id)===c?r.apply(e):r)+'" value="1" ',((r=n.if.call(e,e&&e.value,{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t}))||0===r)&&(i+=r),i+="> "+d(typeof(r=e&&e.label)===c?r.apply(e):r)+" </label> ",((r=n.if.call(e,e&&e.summary,{hash:{},inverse:u.noop,fn:u.program(6,m,t),data:t}))||0===r)&&(i+=r),i+" "}),a),data:a}))||0===o)&&(l+=o),l+" </div> "}))},24905:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c="function",d=this.escapeExpression,u=this;function p(e,t){var r;return""+' rows="'+d(typeof(r=e&&e.rows)===c?r.apply(e):r)+'"'}function m(e,t){var r;return""+'data-exclude-param="'+d(typeof(r=e&&e.excludeParam)===c?r.apply(e):r)+'" data-exclude-value="'+d(typeof(r=e&&e.excludeValue)===c?r.apply(e):r)+'"'}return l+='<div class="form-group"> <label for="text-'+d(typeof(o=t&&t.name)===c?o.apply(t):o)+'">'+d(i(r(66623)).call(t,t&&t.label,{hash:{},data:a}))+"</label> ",((o=i(r(54798)).call(t,t&&t.type,"textarea",{hash:{},inverse:u.program(4,(function(e,t){var r,i="";return i+=' <input type="text" id="text-'+d(typeof(r=e&&e.name)===c?r.apply(e):r)+'" class="form-control text-field" name="'+d(typeof(r=e&&e.name)===c?r.apply(e):r)+'" value="'+d(typeof(r=e&&e.value)===c?r.apply(e):r)+'" placeholder="'+d(typeof(r=e&&e.placeholder)===c?r.apply(e):r)+'" ',((r=n.if.call(e,e&&e.excludeParam,{hash:{},inverse:u.noop,fn:u.program(5,m,t),data:t}))||0===r)&&(i+=r),i+"> "}),a),fn:u.program(1,(function(e,t){var r,i="";return i+=' <textarea class="form-control text-field" id="text-'+d(typeof(r=e&&e.name)===c?r.apply(e):r)+'" name="'+d(typeof(r=e&&e.name)===c?r.apply(e):r)+'"',((r=n.if.call(e,e&&e.rows,{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===r)&&(i+=r),i+' placeholder="'+d(typeof(r=e&&e.placeholder)===c?r.apply(e):r)+'">'+d(typeof(r=e&&e.value)===c?r.apply(e):r)+"</textarea> "}),a),data:a}))||0===o)&&(l+=o),l+" </div> "}))},35461:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},'<div class="player-slider-track"> <div class="player-slider-progress"></div> </div> <div class="player-slider-thumb"></div> '}))},24833:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+'<form class="edit-section-advanced-form settings-container"> <div class="language-group"> <input type="hidden" name="language" value="'+c("function"==typeof(o=null==(o=t&&t.section)||!1===o?o:o.language)?o.apply(t):o)+'"> </div> <div class="row"> <div class="col-md-12"> <div class="form-group scanner-group hidden"> <label for="edit-section-scanner" class="control-label"> '+c(i(r(66623)).call(t,"Scanner",{hash:{},data:a}))+' <span class="control-error">'+c(i(r(66623)).call(t,"A scanner is required.",{hash:{},data:a}))+'</span> </label> <select id="edit-section-scanner" name="scanner"></select> </div> </div> </div> <div class="row"> <div class="col-md-12"> <div class="form-group agent-group hidden"> <label for="edit-section-agent" class="control-label"> '+c(i(r(66623)).call(t,"Agent",{hash:{},data:a}))+' <span class="control-error">'+c(i(r(66623)).call(t,"An agent is required.",{hash:{},data:a}))+'</span> </label> <select id="edit-section-agent" name="agent"></select> </div> </div> </div> <div class="row"> <div class="col-md-12 section-agent-settings-region"></div> </div> <div class="row"> <div class="col-md-12 section-settings-region"></div> </div> </form> '}))},55888:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",l=this.escapeExpression;return o+'<form class="edit-section-folders-form settings-container"> <p>'+l(i(r(66623)).call(t,"Add folders to your library",{hash:{},data:a}))+'</p> <div class="form-group Location-group"> <div class="paths-region"></div> <p class="button-container"> <button type="button" class="add-folder-btn btn btn-icon-label btn-default"> <i class="glyphicon folder-plus"></i> '+l(i(r(66623)).call(t,"Browse for media folder",{hash:{},data:a}))+' </button> </p> <p class="control-error">'+l(i(r(66623)).call(t,"At least one folder is required.",{hash:{},data:a}))+'</p> </div> <p class="help-block">'+l(i(r(66623)).call(t,"Help us out by following {1}our guide{2} to naming and organizing your media.",'<a href="https://support.plex.tv/articles/naming-and-organizing-your-movie-media-files/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps" target="_blank">',"</a>",{hash:{},data:a}))+"</p> </form> "}))},43651:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,a="";return(a+='<div class="col-md-12"> <div class="form-group path-group"> <input type="text" name="path" class="form-control" value="')+((0,this.escapeExpression)((s=r.path)||"function"==typeof(s=t&&t.path)?s.call(t,{hash:{},data:i}):s)+'"> <div class="path-actions"> <a href="#" class="remove-path-btn btn-link btn-gray"><i class="glyphicon remove-2"></i></a> </div> </div> </div> ')}))},38139:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;return l+='<div class="choose-library use-premium-library" data-agent="com.plexapp.agents.plexmusic" data-scanner="Plex Premium Music Scanner"> <div class="row"> <div class="col-xs-12"> <div class="row use-library-header"> <div class="col-xs-12"> <input type="radio"> <span class="header-text"> '+c(i(r(66623)).call(t,"Create a premium Plex music library!",{hash:{},data:a}))+' </span> </div> </div> <div class="row use-premium-library-body"> <div class="col-xs-8"> <ul> <li>'+c(i(r(66623)).call(t,"Access to the best artwork, artist bios, album reviews, and more",{hash:{},data:a}))+"</li> <li>"+c(i(r(66623)).call(t,"Smart mixes based on track or mood",{hash:{},data:a}))+"</li> <li>"+c(i(r(66623)).call(t,"Improved music recognition and matching",{hash:{},data:a}))+"</li> </ul> ",((o=n.unless.call(t,t&&t.hasPremiumMusic,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return""+' <p class="help-block"> '+c(i(r(66623)).call(e,"Note: An active Plex Pass is required for this service. Don't have a Plex Pass? {1}Subscribe here{2}",'<a href="{3}" target="_blank">',"</a>",e&&e.plexPassUrl,{hash:{},data:t}))+" </p> "}),a),data:a}))||0===o)&&(l+=o),l+=' </div> <div class="col-xs-4 vendor-logos"> ',((o=n.if.call(t,t&&t.hasLyrics,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){return'<div class="vendor-logo vendor-logo-lyricfind"></div>'}),a),data:a}))||0===o)&&(l+=o),l+' <div class="vendor-logo vendor-logo-gracenote"></div> <div class="vendor-logo vendor-logo-plex-pass"></div> </div> </div> </div> </div> </div> <div class="choose-library use-basic-library"> <div class="row use-library-header"> <div class="col-xs-12"> <input type="radio"> '+c(i(r(66623)).call(t,"Create a basic music library",{hash:{},data:a}))+" </div> </div> </div> "}))},55902:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this;function u(e,t){var n,s="";return s+=" ",((n=i(r(54798)).call(e,e&&e.id,"enableBIFGeneration",{hash:{},inverse:d.noop,fn:d.program(3,p,t),data:t}))||0===n)&&(s+=n),s+" "}function p(e,t){return""+' <div class="form-group"> <button type="button" class="delete-thumbnails-btn btn btn-sm btn-danger">'+c(i(r(66623)).call(e,"Delete Preview Thumbnails",{hash:{},data:t}))+"</button> </div> "}return((o=n.each.call(t,t&&t.settings,{hash:{},inverse:d.noop,fn:d.programWithDepth(1,(function(e,t,s){var a,o="";return o+=" "+c(i(r(91196)).call(e,"setting",{hash:{idSuffix:"_c"},data:t}))+" ",((a=n.if.call(e,s&&s.edit,{hash:{},inverse:d.noop,fn:d.program(2,u,t),data:t}))||0===a)&&(o+=a),o+" "}),a,t),data:a}))||0===o)&&(l+=o),l+" "}))},28230:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d=this,u="function";function p(e,t){return"selectable"}function m(e,t){return"selected"}return l+='<form class="edit-section-type-form settings-container ',((o=n.if.call(t,null==(o=t&&t.section)||!1===o?o:o.type,{hash:{},inverse:d.noop,fn:d.program(1,(function(e,t){return"section-type-chosen"}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.unless.call(t,t&&t.isInitialTypeSupported,{hash:{},inverse:d.noop,fn:d.program(3,(function(e,t){return"is-type-unsupported"}),a),data:a}))||0===o)&&(l+=o),l+='"> ',((o=n.if.call(t,t&&t.add,{hash:{},inverse:d.program(7,(function(e,t){return""+" <label>"+c(i(r(66623)).call(e,"Library type",{hash:{},data:t}))+"</label> "}),a),fn:d.program(5,(function(e,t){return""+' <p class="prompt">'+c(i(r(66623)).call(e,"Select your library type",{hash:{},data:t}))+"</p> "}),a),data:a}))||0===o)&&(l+=o),l+=' <div class="wizard-blocks-group form-group type-group"> ',((o=n.each.call(t,t&&t.sectionTypes,{hash:{},inverse:d.noop,fn:d.programWithDepth(9,(function(e,t,s){var a,o="";return o+=' <a class="wizard-block section-type ',((a=n.if.call(e,s&&s.canChangeType,{hash:{},inverse:d.noop,fn:d.program(10,p,t),data:t}))||0===a)&&(o+=a),o+=" ",((a=i(r(54798)).call(e,s&&s.currentSectionKey,e&&e.key,{hash:{},inverse:d.noop,fn:d.program(12,m,t),data:t}))||0===a)&&(o+=a),o+='" data-key="'+c(typeof(a=e&&e.key)===u?a.apply(e):a)+'" href="#"> <div class="wizard-block-icon">',((a=typeof(a=e&&e.typeIcon)===u?a.apply(e):a)||0===a)&&(o+=a),o+"</div> "+c(typeof(a=e&&e.title)===u?a.apply(e):a)+" </a> "}),a,t),data:a}))||0===o)&&(l+=o),l+=' <label class="control-label"> <span class="control-error">'+c(i(r(66623)).call(t,"You must select a media type.",{hash:{},data:a}))+'</span> </label> </div> <div class="visible-once-section-type-chosen"> ',((o=n.if.call(t,t&&t.hasType,{hash:{},inverse:d.noop,fn:d.program(14,(function(e,t){return""+' <div class="row"> <div class="col-xs-12"> <p class="prompt">'+c(i(r(66623)).call(e,"Name your library and choose language.",{hash:{},data:t}))+"</p> </div> </div> "}),a),data:a}))||0===o)&&(l+=o),l+=' <div class="row section-type-unsupported"> <div class="col-md-7"> <label>'+c(i(r(66623)).call(t,"Sorry, this library type is unsupported by this server.",{hash:{},data:a}))+'</label> </div> </div> <div class="row section-type-supported"> <div class="col-md-7"> <div class="form-group title-group"> <div> <label for="edit-section-title" class="control-label"> '+c(i(r(66623)).call(t,"Name",{hash:{},data:a}))+' <span class="control-error">'+c(i(r(66623)).call(t,"A library name is required.",{hash:{},data:a}))+'</span> </label> </div> <input type="text" id="edit-section-title" name="title" class="form-control" value="'+c(typeof(o=null==(o=t&&t.section)||!1===o?o:o.title)===u?o.apply(t):o)+'"> </div> </div> <div class="col-md-5"> <div class="form-group language-group"> <div> <label for="edit-section-language" class="control-label"> '+c(i(r(66623)).call(t,"Language",{hash:{},data:a}))+' <span class="control-error">'+c(i(r(66623)).call(t,"A language is required.",{hash:{},data:a}))+'</span> </label> </div> <select id="edit-section-language" name="language"></select> </div> </div> </div> <div class="row section-type-supported"> <div class="col-md-12"> <span class="text-muted"> ',((o=n.if.call(t,t&&t.updatedAt,{hash:{},inverse:d.noop,fn:d.program(16,(function(e,t){return""+" "+c(i(r(66623)).call(e,"Last updated {1}",e&&e.escapedUpdatedAt,{hash:{},data:t}))+" "}),a),data:a}))||0===o)&&(l+=o),l+" </span> </div> </div> </div> </form> "}))},75979:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c="function",d=this.escapeExpression,u=this;function p(e,t){return"selected"}function m(e,t){return""+' <option value="">'+d(i(r(66623)).call(e,"Loading...",{hash:{},data:t}))+"</option> "}return l+='<div class="row"> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-title">'+d(i(r(66623)).call(t,"Artist",{hash:{},data:a}))+'</label> <input type="text" id="match-search-parentTitle" name="parentTitle" class="form-control" value="'+d(typeof(o=null==(o=t&&t.item)||!1===o?o:o.parentTitle)===c?o.apply(t):o)+'"> </div> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-agent">'+d(i(r(66623)).call(t,"Agent",{hash:{},data:a}))+'</label> <select id="match-search-agent" name="agent"> ',((o=n.each.call(t,t&&t.agents,{hash:{},inverse:u.program(4,m,a),fn:u.program(1,(function(e,t){var r,i="";return i+=' <option value="'+d(typeof(r=e&&e.value)===c?r.apply(e):r)+'" ',((r=n.if.call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===r)&&(i+=r),i+">"+d(typeof(r=e&&e.label)===c?r.apply(e):r)+"</option> "}),a),data:a}))||0===o)&&(l+=o),l+=' </select> </div> </div> </div> <div class="row"> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-title">'+d(i(r(66623)).call(t,"Album",{hash:{},data:a}))+'</label> <input type="text" id="match-search-title" name="title" class="form-control" value="'+d(typeof(o=null==(o=t&&t.item)||!1===o?o:o.title)===c?o.apply(t):o)+'"> </div> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-language">'+d(i(r(66623)).call(t,"Language",{hash:{},data:a}))+'</label> <select id="match-search-language" name="language"> ',((o=n.each.call(t,t&&t.languages,{hash:{},inverse:u.program(4,m,a),fn:u.program(6,(function(e,t){var r;return""+' <option value="'+d(typeof(r=e&&e.value)===c?r.apply(e):r)+'">'+d(typeof(r=e&&e.label)===c?r.apply(e):r)+"</option> "}),a),data:a}))||0===o)&&(l+=o),l+' </select> </div> </div> </div> <div class="row"> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-year">'+d(i(r(66623)).call(t,"Year",{hash:{},data:a}))+'</label> <input type="text" id="match-search-year" name="year" class="form-control" value="'+d(typeof(o=null==(o=t&&t.item)||!1===o?o:o.year)===c?o.apply(t):o)+'"> </div> </div> </div> '}))},19114:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c="function",d=this.escapeExpression,u=this;function p(e,t){return"selected"}function m(e,t){return""+' <option value="">'+d(i(r(66623)).call(e,"Loading...",{hash:{},data:t}))+"</option> "}return l+='<div class="row"> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-title">'+d(i(r(66623)).call(t,"Title",{hash:{},data:a}))+'</label> <input type="text" id="match-search-title" name="title" class="form-control" value="'+d(typeof(o=null==(o=t&&t.item)||!1===o?o:o.title)===c?o.apply(t):o)+'"> </div> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-agent">'+d(i(r(66623)).call(t,"Agent",{hash:{},data:a}))+'</label> <select id="match-search-agent" name="agent"> ',((o=n.each.call(t,t&&t.agents,{hash:{},inverse:u.program(4,m,a),fn:u.program(1,(function(e,t){var r,i="";return i+=' <option value="'+d(typeof(r=e&&e.value)===c?r.apply(e):r)+'" ',((r=n.if.call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===r)&&(i+=r),i+">"+d(typeof(r=e&&e.label)===c?r.apply(e):r)+"</option> "}),a),data:a}))||0===o)&&(l+=o),l+=' </select> </div> </div> </div> <div class="row"> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-year">'+d(i(r(66623)).call(t,"Year",{hash:{},data:a}))+'</label> <input type="text" id="match-search-year" name="year" class="form-control" value="'+d(typeof(o=null==(o=t&&t.item)||!1===o?o:o.year)===c?o.apply(t):o)+'"> </div> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label" for="match-search-language">'+d(i(r(66623)).call(t,"Language",{hash:{},data:a}))+'</label> <select id="match-search-language" name="language"> ',((o=n.each.call(t,t&&t.languages,{hash:{},inverse:u.program(4,m,a),fn:u.program(6,(function(e,t){var r;return""+' <option value="'+d(typeof(r=e&&e.value)===c?r.apply(e):r)+'">'+d(typeof(r=e&&e.label)===c?r.apply(e):r)+"</option> "}),a),data:a}))||0===o)&&(l+=o),l+" </select> </div> </div> </div> "}))},66849:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},'<div class="result-region"> <div class="loading loading-inline"></div> </div> '}))},65510:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c="function",d=this.escapeExpression,u=this;function p(e,t){var r;return d(typeof(r=null==(r=e&&e.friendlyNameSetting)||!1===r?r:r.value)===c?r.apply(e):r)}function m(e,t){var r;return d(typeof(r=null==(r=e&&e.server)||!1===r?r:r.friendlyName)===c?r.apply(e):r)}return l+='<div class="row"> <div class="col-sm-6 col-sm-offset-3"> <form id="setup-basic-form" class="settings-container"> ',((o=n.if.call(t,t&&t.friendlyNameSetting,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){var s,a="";return a+=' <div class="setup-basic-form-group form-group"> <p class="text-muted"> '+d(i(r(66623)).call(e,"Give your server a friendly name to help identify it in Plex apps and on your network.",{hash:{},data:t}))+' </p> <input type="text" id="'+d(typeof(s=null==(s=e&&e.friendlyNameSetting)||!1===s?s:s.id)===c?s.apply(e):s)+'" class="form-control" value="',((s=n.if.call(e,null==(s=e&&e.friendlyNameSetting)||!1===s?s:s.value,{hash:{},inverse:u.program(4,m,t),fn:u.program(2,p,t),data:t}))||0===s)&&(a+=s),a+'" placeholder="'+d(typeof(s=null==(s=e&&e.server)||!1===s?s:s.friendlyName)===c?s.apply(e):s)+'"> </div> '}),a),data:a}))||0===o)&&(l+=o),l+=" ",((o=n.if.call(t,t&&t.publishSetting,{hash:{},inverse:u.noop,fn:u.program(6,(function(e,t){var n;return""+' <div class="setup-basic-form-group form-group"> <div class="publish-checkbox checkbox"> <label for="'+d(typeof(n=null==(n=e&&e.publishSetting)||!1===n?n:n.id)===c?n.apply(e):n)+'"> <input type="checkbox" id="'+d(typeof(n=null==(n=e&&e.publishSetting)||!1===n?n:n.id)===c?n.apply(e):n)+'" checked> '+d(i(r(66623)).call(e,"Allow me to access my media outside my home",{hash:{},data:t}))+' </label> </div> <p class="text-muted"> '+d(i(r(66623)).call(e,"Plex will attempt to automatically configure your network to allow Plex apps outside your home to access Plex Media Server on this computer. Remember this computer will need to be turned on to access your media.",{hash:{},data:t}))+" </p> </div> "}),a),data:a}))||0===o)&&(l+=o),l+' <div class="setup-footer"> <button type="submit" class="submit-btn btn btn-primary btn-loading btn-lg"> <div class="loading loading-sm"></div> <span class="btn-label">'+d(i(r(66623)).call(t,"Next",{hash:{},data:a}))+'</span> </button> <button class="next-btn hidden" data-subset="setupLibrary"></button> </div> </form> </div> </div> <div class="modal-container"></div> '}))},49399:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c="function",d=this.escapeExpression,u=this;function p(e,t){return"checked"}return l+='<div class="row"> <div class="col-sm-6 col-sm-offset-3"> <div class="setup-apps-container"> <img class="setup-apps-image" src="'+d(typeof(o=t&&t.devicesImg)===c?o.apply(t):o)+'"> <a href="https://plex.tv/downloads" target="_blank" class="btn btn-default btn-lg">'+d(i(r(66623)).call(t,"Get Plex Apps",{hash:{},data:a}))+'</a> </div> <p class="text-muted">'+d(i(r(66623)).call(t,"All set! Your Plex Media Server is working hard to find your media and make it beautiful. Grab the Plex app for all your favorite devices to get the most out of Plex and start streaming everywhere!",{hash:{},data:a}))+'</p> <form id="setup-complete-form" class="settings-container"> ',((o=n.if.call(t,t&&t.collectUsageDataSetting,{hash:{},inverse:u.noop,fn:u.program(1,(function(e,t){var s,a="";return a+=' <div class="checkbox"> <label for="'+d(typeof(s=null==(s=e&&e.collectUsageDataSetting)||!1===s?s:s.id)===c?s.apply(e):s)+'"> <input type="checkbox" id="'+d(typeof(s=null==(s=e&&e.collectUsageDataSetting)||!1===s?s:s.id)===c?s.apply(e):s)+'" name="'+d(typeof(s=null==(s=e&&e.collectUsageDataSetting)||!1===s?s:s.id)===c?s.apply(e):s)+'" value="1" ',((s=n.if.call(e,null==(s=e&&e.collectUsageDataSetting)||!1===s?s:s.value,{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t}))||0===s)&&(a+=s),a+"> "+d(i(r(66623)).call(e,"Send anonymous usage data to Plex",{hash:{},data:t}))+' </label> </div> <p class="setup-complete-help text-muted"> '+d(i(r(66623)).call(e,"Help us improve everyone's Plex experience by sending anonymous usage data.",{hash:{},data:t}))+" </p> "}),a),data:a}))||0===o)&&(l+=o),l+' <div class="setup-footer setup-done-footer"> <button class="next-btn btn btn-default btn-lg" data-subset="setupLibrary">'+d(i(r(66623)).call(t,"Back",{hash:{},data:a}))+'</button> <button type="submit" class="submit-btn btn btn-primary btn-loading btn-lg active"> <div class="loading loading-sm"></div> <span class="btn-label">'+d(i(r(66623)).call(t,"Done",{hash:{},data:a}))+'</span> </button> <button class="done-btn btn btn-primary btn-lg hidden"></button> </div> </form> </div> </div> <div class="modal-container"></div> '}))},93819:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression;return l+='<div class="row row-padded"> <div class="col-md-8 col-md-offset-2"> ',((o=n.if.call(t,t&&t.shared,{hash:{},inverse:this.program(3,(function(e,t){return""+" <h1>"+c(i(r(66623)).call(e,"A problem has been detected with a core component of Plex Media Server.",{hash:{},data:t}))+'</h1> <h2 class="text-muted">'+c(i(r(66623)).call(e,"Please visit the {1}forums{2} and provide your logs, as described {3}here{4}.",'<a href="https://forums.plex.tv" target="_blank">',"</a>",'<a href="http://support.plex.tv/hc/en-us/articles/200250417-Log-File-Locations/?utm_source=Plex%20Apps&utm_medium=Plex%20Web&utm_campaign=Plex%20Apps" target="_blank">',"</a>",{hash:{},data:t}))+"</h2> "}),a),fn:this.program(1,(function(e,t){return""+" <h1>"+c(i(r(66623)).call(e,"Setup is not allowed for shared servers.",{hash:{},data:t}))+"</h1> "}),a),data:a}))||0===o)&&(l+=o),l+" </div> </div> "}))},10292:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l="",c=this.escapeExpression,d="function";return l+'<h2 class="setup-intro-header">'+c(i(r(66623)).call(t,"How Plex Works",{hash:{},data:a}))+"</h2> <h4>"+c(i(r(66623)).call(t,"Plex Media Server runs on the computer where you keep your media",{hash:{},data:a}))+'</h4> <img class="setup-intro-img setup-intro-computer-img" src='+c(typeof(o=t&&t.computerImg)===d?o.apply(t):o)+"> <h4>"+c(i(r(66623)).call(t,"Plex scans your media, automatically organizes it, and makes it beautiful",{hash:{},data:a}))+'</h4> <img class="setup-intro-img setup-intro-media-img" src='+c(typeof(o=t&&t.mediaImg)===d?o.apply(t):o)+"> <h4>"+c(i(r(66623)).call(t,"Play your media on any screen with your favorite Plex app",{hash:{},data:a}))+'</h4> <img class="setup-intro-img setup-intro-play-img" src='+c(typeof(o=t&&t.playImg)===d?o.apply(t):o)+'> <p> <button class="next-btn btn btn-primary btn-lg" data-subset="setupLoading">'+c(i(r(66623)).call(t,"Got it!",{hash:{},data:a}))+"</button> </p> "}))},53361:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",l=this.escapeExpression;return o+'<div class="row"> <div class="col-sm-6 col-sm-offset-3"> <h4>'+l(i(r(66623)).call(t,"Organize Your Media",{hash:{},data:a}))+'</h4> <p class="text-muted">'+l(i(r(66623)).call(t,"Plex organizes your media into libraries. You can add as many libraries as you want, and you can have multiple libraries with the same type.",{hash:{},data:a}))+'</p> <p class="setup-add-section-container"> <button class="add-section-btn btn btn-default">'+l(i(r(66623)).call(t,"Add Library",{hash:{},data:a}))+'</button> </p> <div class="setup-section-list-container"></div> <div class="setup-footer"> <button class="next-btn btn btn-default btn-lg" data-subset="setupBasic">'+l(i(r(66623)).call(t,"Back",{hash:{},data:a}))+'</button> <button class="next-btn btn btn-primary btn-lg" data-subset="setupComplete">'+l(i(r(66623)).call(t,"Next",{hash:{},data:a}))+"</button> </div> </div> </div> "}))},72487:(e,t,r)=>{var n=r(40202);e.exports=(n.default||n).template((function(e,t,n,i,s){var a;return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},""+'<div class="loading loading-inline"></div> <p class="loading-title">'+(0,this.escapeExpression)((a=r(66623),a&&(a.__esModule?a.default:a)).call(t,"Please wait a moment while Plex starts.",{hash:{},data:s}))+"</p> "}))},27659:(e,t,r)=>{var n=r(40202);function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template((function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o="",l=this.escapeExpression;return o+'<div class="setup-header row hidden"> <div class="col-sm-6 col-sm-offset-3"> <div class="sign-in-logo text-center"> <i class="plex-image plex-logo"></i> </div> <h2>'+l(i(r(66623)).call(t,"Server Setup",{hash:{},data:a}))+'</h2> <div class="setup-progress"> <div class="basic-segment setup-progress-segment"> <a class="segment-btn btn-gray" data-subset="setupBasic" href="#">'+l(i(r(66623)).call(t,"Name",{hash:{},data:a}))+'</a> </div> <div class="library-segment setup-progress-segment"> <a class="segment-btn btn-gray" data-subset="setupLibrary" href="#">'+l(i(r(66623)).call(t,"Media Library",{hash:{},data:a}))+'</a> </div> <div class="complete-segment setup-progress-segment"> <a class="segment-btn btn-gray" data-subset="setupComplete" href="#">'+l(i(r(66623)).call(t,"Finish",{hash:{},data:a}))+'</a> </div> </div> </div> </div> <div class="setup-container"></div> '}))},90558:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={plexIcon:"PlexIcon-plexIcon-a5zCNX"}},83661:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={modalFooter:"ModalFooter-modalFooter-IDP5sZ",button:"ModalFooter-button-LtbVqu Button-button-TxWeuE Link-link-SxPFpG",splitButton:"ModalFooter-splitButton-_GNMk0 ModalFooter-button-LtbVqu Button-button-TxWeuE Link-link-SxPFpG"}},26085:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={form:"AddToCuratedListModal-form-uOEeW4",input:"AddToCuratedListModal-input-jrUgla TextInput-input-vbygwE",button:"AddToCuratedListModal-button-tVTXOm SpinnerButton-button-brFEgo Button-button-Eu0WcX Link-link-vSsQW1",filter:"AddToCuratedListModal-filter-qvnx08 TextInput-input-vbygwE"}},68181:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={hub:"ProfileHub-hub-pJZe_R",scroller:"ProfileHub-scroller-jXJXnP",hidden:"ProfileHub-hidden-xRTdTl"}},52338:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={page:"Page-page-s23BVW"}},24141:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={innerEmptyPage:"InnerEmptyPage-innerEmptyPage-x_xcpN EmptyPage-emptyPage-WAo6pH",innerEmptyPageContent:"InnerEmptyPage-innerEmptyPageContent-RVL_8g EmptyPage-content-r4ks5a"}},29228:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-add-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m320 320l0 200-80 0 0-200-200 0 0-80 200 0 0-200 80 0 0 200 200 0 0 80-200 0"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},9314:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-ban-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M169.704 446.864C201.322 467.804 239.237 480 280 480c110.457 0 200-89.543 200-200 0-40.763-12.195-78.678-33.136-110.296l-277.16 277.16zm-56.568-56.568l277.16-277.16C358.678 92.196 320.763 80 280 80 169.543 80 80 169.543 80 280c0 40.763 12.195 78.678 33.136 110.296zM280 560C125.36 560 0 434.64 0 280S125.36 0 280 0s280 125.36 280 280-125.36 280-280 280z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},35365:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 129 100",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-check"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m111.162 0l17.838 17.227-79.928 82.773-49.072-52.714 18.136-16.912 31.292 33.558 61.734-63.932"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},37188:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 1040 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-dvr-series-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m692.44 113.13c20.864-8.465 43.67-13.13 67.56-13.13 99.35 0 180 80.66 180 180 0 99.35-80.65 180-180 180-23.887 0-46.693-4.663-67.56-13.13 8.427-8.706 16.197-18.05 23.22-27.921 7.981-11.218 14.995-23.12 20.937-35.54 5.493-11.483 10.07-23.405 13.662-35.616 3.45-11.718 5.996-23.7 7.615-35.808 3.366-25.18 2.733-50.894-1.896-75.872-2.033-10.968-4.835-21.794-8.381-32.37-3.723-11.11-8.266-21.937-13.577-32.378-6.233-12.253-13.523-23.967-21.757-34.975-6.107-8.164-12.733-15.939-19.823-23.264m-412.44-13.13c99.35 0 180 80.66 180 180 0 99.35-80.65 180-180 180-99.34 0-180-80.65-180-180 0-99.34 80.66-180 180-180m172.44 13.13c20.864-8.465 43.67-13.13 67.56-13.13 99.35 0 180 80.66 180 180 0 99.35-80.65 180-180 180-23.887 0-46.693-4.663-67.56-13.13 8.26-8.534 15.889-17.677 22.802-27.334 8.154-11.39 15.31-23.492 21.355-36.13 5.494-11.482 10.07-23.403 13.662-35.614 3.45-11.718 5.997-23.701 7.615-35.809 3.366-25.18 2.732-50.893-1.896-75.871-2.033-10.968-4.835-21.793-8.38-32.369-3.724-11.11-8.267-21.937-13.578-32.379-6.233-12.253-13.523-23.967-21.757-34.975-6.107-8.164-12.733-15.939-19.823-23.264"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},99539:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-dvr-single-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m280 100c99.35 0 180 80.66 180 180 0 99.35-80.65 180-180 180-99.34 0-180-80.65-180-180 0-99.34 80.66-180 180-180"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},2857:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-star-full-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m280 6.5l62.864 193.475 203.432 0-164.58 119.575 62.864 193.475-164.58-119.575-164.58 119.575 62.864-193.475-164.58-119.575 203.432 0 62.864-193.475"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},41779:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-tidal-logo-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M373.331 186.32l-93.324 93.332-93.337-93.341L280.007 93l93.332 93.309L466.67 93 560 186.318l-93.33 93.341-93.339-93.339zm.01 186.669l-93.334 93.34-93.337-93.34 93.337-93.337 93.334 93.337zm-186.67-186.67l-93.338 93.34L0 186.32 93.333 93l93.337 93.318z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},30727:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",id:"plex-icon-watch-together"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{clipRule:"evenodd",d:"M32 21c3.32 0 5.98-2.68 5.98-6S35.32 9 32 9c-3.32 0-6 2.68-6 6s2.68 6 6 6zm-15.999 0c3.32 0 5.979-2.68 5.979-6s-2.659-6-5.979-6c-3.32 0-6 2.68-6 6s2.68 6 6 6zm0 4C11.341 25 2 27.73 2 33.167V39h28v-5.833C30 27.73 20.66 25 16.001 25zM32 25c-.58 0-1.24.047-1.94.117 2.32 1.96 3.94 4.596 3.94 8.05V39h12v-5.833C46 27.73 36.66 25 32 25z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},26397:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-alert-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m280 0l-280 520 560 0-280-520m0 400c22.077 0 40 17.923 40 40 0 22.077-17.923 40-40 40-22.077 0-40-17.923-40-40 0-22.077 17.923-40 40-40m-30-40l0-220 60 0 0 220-60 0"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},77378:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-alert-round-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m280 0c154.536 0 280 125.464 280 280 0 154.536-125.464 280-280 280-154.536 0-280-125.464-280-280 0-154.536 125.464-280 280-280m-40 420c0 22.077 17.923 40 40 40 22.077 0 40-17.923 40-40 0-22.077-17.923-40-40-40-22.077 0-40 17.923-40 40m60-320l-40 0c-11.038 0-20 8.962-20 20l0 200c0 11.038 8.962 20 20 20l40 0c11.038 0 20-8.962 20-20l0-200c0-11.038-8.962-20-20-20"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},56876:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-analyzing-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m336 364l15.027 67.524c.858 3.854 2.685 7.18 5.477 9.972 2.792 2.792 6.118 4.619 9.972 5.477l67.524 15.027-67.524 15.027c-3.854.858-7.18 2.685-9.972 5.477-2.792 2.792-4.619 6.118-5.477 9.972l-15.027 67.524-15.027-67.524c-.858-3.854-2.685-7.18-5.477-9.972-2.792-2.792-6.118-4.619-9.972-5.477l-67.524-15.027 67.524-15.027c3.854-.858 7.18-2.685 9.972-5.477 2.792-2.792 4.619-6.118 5.477-9.972l15.027-67.524m-315 140l343-343 35 35-343 343-35-35m441-266l15.027 67.523c.858 3.855 2.685 7.181 5.477 9.973 2.792 2.792 6.118 4.619 9.972 5.476l67.524 15.028-67.524 15.027c-3.854.858-7.18 2.685-9.972 5.477-2.792 2.792-4.619 6.118-5.477 9.972l-15.027 67.524-15.027-67.524c-.858-3.854-2.685-7.18-5.477-9.972-2.792-2.792-6.118-4.619-9.972-5.477l-67.524-15.027 67.524-15.028c3.854-.857 7.18-2.684 9.972-5.476 2.792-2.792 4.619-6.118 5.477-9.973l15.027-67.523m-322-238l21.468 96.462c1.2 5.396 3.914 10.338 7.823 14.247 3.909 3.909 8.851 6.623 14.247 7.823l96.462 21.468-96.462 21.468c-5.396 1.2-10.338 3.914-14.247 7.823-3.909 3.909-6.623 8.851-7.823 14.247l-21.468 96.462-21.468-96.462c-1.2-5.396-3.914-10.338-7.823-14.247-3.909-3.909-8.851-6.623-14.247-7.823l-96.462-21.468 96.462-21.468c5.396-1.2 10.338-3.914 14.247-7.823 3.909-3.909 6.623-8.851 7.823-14.247l21.468-96.462m252 133l35 35 112-112-35-35-112 112"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},37059:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-edit-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m0 560l40-120 80 80-120 40m480-560l-400 400 80 80 400-400-80-80"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},62315:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-favorite-empty-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M280.409154,516 L40.4101704,278.317013 C-13.4700568,224.772577 -13.4700568,137.681549 40.4101704,84.1371127 C94.2619347,30.6209624 181.927598,30.6209624 235.807825,84.1371127 L280.010674,128.064481 L324.18506,84.1371127 C378.065287,30.6209624 465.73095,30.6209624 519.611177,84.1371127 C573.462941,137.681549 573.462941,224.772577 519.611177,278.317013 L280.409154,516 Z M279.611348,451.652619 L479.792832,260.692492 C518.735723,223.398694 525.522119,157.229004 486.579229,119.960019 C448.828204,83.7828011 390.389111,76.569777 338.530931,131.136016 L280,187.188371 L221.443159,131.136016 C165.95959,82.5852498 112.168614,83.7828011 74.4175887,119.960019 C35.4746985,157.229004 41.2642774,223.398694 80.2071677,260.692492 L279.611348,451.652619 Z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},35935:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-favorite-full-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M280.409154,516 L40.4101704,278.317013 C-13.4700568,224.772577 -13.4700568,137.681549 40.4101704,84.1371127 C94.2619347,30.6209624 181.927598,30.6209624 235.807825,84.1371127 L280.010674,128.064481 L324.18506,84.1371127 C378.065287,30.6209624 465.73095,30.6209624 519.611177,84.1371127 C573.462941,137.681549 573.462941,224.772577 519.611177,278.317013 L280.409154,516 Z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},36526:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-more-vertical-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M350 280c0 38.634-31.366 70-70 70s-70-31.366-70-70 31.366-70 70-70 70 31.366 70 70m0-210c0 38.634-31.366 70-70 70s-70-31.366-70-70 31.366-70 70-70 70 31.366 70 70m0 420c0 38.634-31.366 70-70 70s-70-31.366-70-70 31.366-70 70-70 70 31.366 70 70"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},98031:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-page-next-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m0 320l0-80 360 0 0-160 200 200-200 200 0-160-360 0"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},10078:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-page-prev-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m200 80l-200 200 200 200 0-160 360 0 0-80-360 0 0-160"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},51861:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-remove-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m120 70l-50 50 160 160-160 160 50 50 160-160 160 160 50-50-160-160 160-160-50-50-160 160-160-160"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},55550:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-reorder-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m560 380v60h-560v-60h560m-560-130h560v60h-560v-60m0-130h560v60h-560v-60"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},7360:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-search-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M351.883,407.883C315.613,433.168 271.525,448 224,448C100.371,448 0,347.629 0,224C0,100.371 100.371,0 224,0C347.629,0 448,100.371 448,224C448,271.525 433.168,315.613 407.883,351.883L560,504L504,560L351.883,407.883ZM56,224C56,316.722 131.278,392 224,392C316.722,392 392,316.722 392,224C392,131.278 316.722,56 224,56C131.278,56 56,131.278 56,224Z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},14522:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-selected-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m78.756 298.564l-40 69.282 242.488 140 240-415.692-69.282-40-200 346.41-173.206-100"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},73111:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-settings-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m200 280c0 44.153 35.847 80 80 80 44.153 0 80-35.847 80-80 0-44.153-35.847-80-80-80-44.153 0-80 35.847-80 80m-115.992-40c5.189-25.52 15.244-49.281 29.153-70.271l-61.151-61.15 56.569-56.569 61.15 61.151c20.99-13.909 44.751-23.964 70.271-29.153l0-84.008 80 0 0 84.008c25.52 5.189 49.281 15.244 70.271 29.153l61.15-61.151 56.569 56.569-61.151 61.15c13.909 20.99 23.964 44.751 29.153 70.271l84.008 0 0 80-84.008 0c-5.189 25.52-15.244 49.282-29.153 70.271l61.151 61.15-56.569 56.569-61.15-61.151c-20.99 13.909-44.751 23.964-70.271 29.153l0 84.008-80 0 0-84.008c-25.52-5.189-49.281-15.244-70.271-29.153l-61.15 61.151-56.569-56.569 61.151-61.15c-13.909-20.989-23.964-44.751-29.153-70.271l-84.008 0 0-80 84.008 0"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},89377:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-ascending-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m280 80l-200 200h160v200h80v-200h160l-200-200"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},89146:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-descending-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m80 280h160v-200h80v200h160l-200 200-200-200"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},22859:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-tagging-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m252 56l308 308-196 196-308-308 0-196 196 0m-21 42l-133 0 0 133 266 266 133-133-266-266m-49 42c23.18 0 42 18.82 42 42 0 23.18-18.82 42-42 42-23.18 0-42-18.82-42-42 0-23.18 18.82-42 42-42"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},39296:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-add-to-playlist-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m223.992 459.2l336 0 0 44.8-336 0 0-44.8m0-134.4l336 0 0 44.8-336 0 0-44.8m84-134.4l252 0 0 44.8-252 0 0-44.8m-218.392 0l-89.6 0 0 44.8 89.6 0 0 89.6 44.8 0 0-89.6 89.6 0 0-44.8-89.6 0 0-89.6c0 0-53.77 0-37.8 0l-7 0 0 89.6m134.392-134.4l336 0 0 44.8-336 0 0-44.8"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},86302:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",id:"plex-icon-toolbar-add-to-watchlist-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M38 6V40.125L24.85 33.74L23.5 33.065L22.15 33.74L9 40.125V6H38ZM38 3H9C8.20435 3 7.44129 3.31607 6.87868 3.87868C6.31607 4.44129 6 5.20435 6 6V45L23.5 36.5L41 45V6C41 5.20435 40.6839 4.44129 40.1213 3.87868C39.5587 3.31607 38.7957 3 38 3Z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},7080:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-artwork-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m56 504h448v-448h-448v448m336-252l-106.2 106.2 103.8 103.8h-39.598l-126-126-126 126v-364h364v224l-70-70m-168-112c30.907 0 56 25.09 56 56 0 30.907-25.09 56-56 56-30.907 0-56-25.09-56-56 0-30.907 25.09-56 56-56"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},61133:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-column-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m504 504h-448v-44.8h448v44.8m-448-156.8h448v44.8h-448v-44.8m448-112v44.8h-448v-44.8h448m0-67.2h-448v-112h448v112"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},66188:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-detail-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m56 168h112v-112h-112v112m0 168h112v-112h-112v112m0 168h112v-112h-112v112m168-369.6h280v-44.8h-280v44.8m0 168h280v-44.8h-280v44.8m0 168h280v-44.8h-280v44.8"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},40921:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-edit-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m56 504l28-84 56 56-84 28m392-448l-336 336 56 56 336-336-56-56"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},95844:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-grid-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m56 392l112 0 0 112-112 0 0-112m168 0l112 0 0 112-112 0 0-112m280 0l0 112-112 0 0-112 112 0m-448-168l112 0 0 112-112 0 0-112m168 0l112 0 0 112-112 0 0-112m168 0l112 0 0 112-112 0 0-112m-336-168l112 0 0 112-112 0 0-112m336 0l112 0 0 112-112 0 0-112m-168 0l112 0 0 112-112 0 0-112"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},42451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",id:"plex-icon-toolbar-mark-played-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M24 44.4C12.7333 44.4 3.59998 35.2666 3.59998 24C3.59998 12.7333 12.7333 3.59998 24 3.59998C35.2666 3.59998 44.4 12.7333 44.4 24C44.4 35.2666 35.2666 44.4 24 44.4ZM24 40.8C33.2784 40.8 40.8 33.2784 40.8 24C40.8 14.7216 33.2784 7.19998 24 7.19998C14.7216 7.19998 7.19998 14.7216 7.19998 24C7.19998 33.2784 14.7216 40.8 24 40.8ZM22.9177 33.9317L13.5646 28.5317L15.3646 25.414L21.6 29.014L30 14.4648L33.1177 16.2648L22.9177 33.9317Z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},9451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",id:"plex-icon-toolbar-mark-unplayed-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{clipRule:"evenodd",d:"M24 44.4C12.7333 44.4 3.59998 35.2666 3.59998 24C3.59998 12.7333 12.7333 3.59998 24 3.59998C35.2666 3.59998 44.4 12.7333 44.4 24C44.4 35.2666 35.2666 44.4 24 44.4ZM15.3646 25.414L13.5646 28.5317L22.9176 33.9317L33.1176 16.2648L30 14.4648L21.5999 29.014L15.3646 25.414Z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},22162:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-more-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m168 280c0 30.897-25.103 56-56 56-30.896 0-56-25.103-56-56 0-30.897 25.104-56 56-56 31.862.965 56 25.103 56 56m112-56c-30.897 0-56 25.103-56 56 0 30.897 25.103 56 56 56 30.897 0 56-25.103 56-56 0-30.897-25.103-56-56-56m168 0c-30.897 0-56 25.103-56 56 0 30.897 25.103 56 56 56 30.897 0 56-25.103 56-56 0-30.897-25.103-56-56-56"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},96099:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-toolbar-more-vertical-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M280 168c-30.897 0-56-25.103-56-56 0-30.896 25.103-56 56-56s56 25.104 56 56c-.965 31.862-25.103 56-56 56zm56 112c0 30.897-25.103 56-56 56s-56-25.103-56-56 25.103-56 56-56 56 25.103 56 56zm0 168c0 30.897-25.103 56-56 56s-56-25.103-56-56 25.103-56 56-56 56 25.103 56 56z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},67944:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-play-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m112 504l0-448 392 224-392 224"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},30470:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",id:"plex-icon-toolbar-play-radio-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M110.261 141.816c10.962-9.751 23.79-2.335 27.765 1.703 6.308 6.406 5.837 12.744 4.377 15.806-1.084 2.277-2.431 4.378-5.35 8.026-14.104 16.536-24.074 34.046-31.37 53.986-11.672 32.101-13.132 68.334-4.377 101.894 6.809 24.804 18.724 47.42 35.505 67.362 3.89 4.377 4.863 5.836 5.836 8.997.486 1.703.486 6.566-.244 8.755-1.459 4.62-4.863 8.269-9.727 9.97-1.216.487-14.377 4.39-23.144-2.43-1.46-.974-6.81-7.055-10.7-12.16-22.617-28.94-36.964-63.472-41.342-100.191-1.944-15.32-1.944-32.587-.243-47.908 4.621-39.639 20.67-76.846 46.448-107.243 3.892-4.621 4.657-4.867 6.566-6.566v-.001zm64.42 62.012c7.215-8.421 19.942-12.966 29.868-4.504 9.925 8.46 6.895 19.095 2.76 24.445-10.942 13.132-17.265 27.48-19.697 44.503-.486 3.89-.729 13.131-.243 17.509 1.459 18.725 8.511 35.262 20.67 49.61 3.162 3.647 4.62 6.322 4.864 10.455.486 7.054-4.395 13.258-11.186 15.565-14.348 4.871-23.388-2.675-28.494-8.754-20.671-25.778-29.426-58.608-24.562-91.681 3.161-20.914 12.067-40.863 26.02-57.148zM277.67 323.667c-11.548-.562-21.407-5.058-29.575-12.926-8.732-8.992-12.957-19.389-12.957-31.753 0-12.363 4.225-22.762 12.957-31.753 9.012-8.711 19.435-12.927 31.828-12.927 12.394 0 22.814 4.216 31.828 12.927 8.731 8.991 12.957 19.389 12.957 31.753s-4.226 22.76-12.957 31.753c-8.45 8.15-18.308 12.645-30.138 12.926-1.408.28-3.38.28-3.943 0zm172.069-181.852c1.91 1.7 2.675 1.946 6.566 6.566 25.777 30.399 41.827 67.606 46.448 107.244 1.701 15.321 1.701 32.587-.243 47.908-4.378 36.72-18.726 71.252-41.342 100.19-3.89 5.107-9.24 11.187-10.7 12.16-8.767 6.821-21.928 2.919-23.144 2.432-4.863-1.702-8.268-5.35-9.727-9.97-.73-2.19-.73-7.054-.244-8.755.973-3.162 1.946-4.621 5.836-8.998 16.78-19.941 28.696-42.557 35.505-67.361 8.755-33.56 7.295-69.794-4.376-101.894-7.297-19.941-17.267-37.451-31.372-53.987-2.918-3.648-4.265-5.748-5.35-8.026-1.459-3.062-1.93-9.4 4.378-15.806 3.975-4.037 16.802-11.454 27.765-1.703zm-64.576 62.013c13.953 16.284 22.86 36.234 26.021 57.148 4.864 33.073-3.89 65.902-24.561 91.68-5.107 6.079-14.147 13.626-28.495 8.754-6.792-2.306-11.672-8.511-11.186-15.564.243-4.134 1.702-6.81 4.863-10.456 12.16-14.348 19.212-30.885 20.67-49.61.487-4.378.244-13.618-.242-17.509-2.431-17.023-8.755-31.37-19.698-44.503-4.134-5.35-7.163-15.984 2.761-24.445 9.926-8.461 22.652-3.917 29.867 4.505z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},70957:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-play-trailer-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m225.671 503.994c-.557.004-1.114.006-1.671.006-123.629 0-224-100.371-224-224 0-123.629 100.371-224 224-224 123.629 0 224 100.371 224 224 0 50.138-16.508 96.451-44.381 133.794 18.895-11.081 36.634-24.143 52.605-39.141 9.395-8.823 18.171-18.311 26.162-28.425 8.67-10.973 16.416-22.684 23.006-35.021 4.995-9.352 12.891-29.047 12.891-29.047l41.717 12.492c0 0-9.027 23.185-14.752 34.221-7.693 14.83-16.785 28.923-27.015 42.128-9.197 11.871-19.311 23.024-30.164 33.401-8.779 8.393-18.041 16.28-27.702 23.641-8.554 6.519-17.421 12.626-26.548 18.316-4.487 2.797-9.037 5.493-13.644 8.088-32.896 18.526-68.648 31.851-105.499 39.964-29.172 6.423-59.044 9.582-89.005 9.589l0-.006m-64.671-104.994c0 34.771 28.229 63 63 63 34.771 0 63-28.229 63-63 0-34.771-28.229-63-63-63-34.771 0-63 28.229-63 63m119-119c0 34.771 28.229 63 63 63 34.771 0 63-28.229 63-63 0-34.771-28.229-63-63-63-34.771 0-63 28.229-63 63m-238 0c0 34.771 28.229 63 63 63 34.771 0 63-28.229 63-63 0-34.771-28.229-63-63-63-34.771 0-63 28.229-63 63m154 0c0 15.454 12.546 28 28 28 15.454 0 28-12.546 28-28 0-15.454-12.546-28-28-28-15.454 0-28 12.546-28 28m-35-119c0 34.771 28.229 63 63 63 34.771 0 63-28.229 63-63 0-34.771-28.229-63-63-63-34.771 0-63 28.229-63 63"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},88706:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",id:"plex-icon-toolbar-remove-from-watchlist-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M38 3H9C8.20435 3 7.44129 3.31607 6.87868 3.87868C6.31607 4.44129 6 5.20435 6 6V45L23.5 36.5L41 45V6C41 5.20435 40.6839 4.44129 40.1213 3.87868C39.5587 3.31607 38.7957 3 38 3Z"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},86607:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-shuffle-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m448 441l-44.423 0c-65.833 0-103.843-28.598-141.383-96.109 5.44-10.89 10.99-22.734 16.727-35.594 3.556-7.986 4.181-9.387 5.622-12.617 36.245 74.928 65.419 102.32 119.034 102.32l44.423 0 0-77 112 98-112 98 0-77m0-322l0-77 112 98-112 98 0-77-44.423 0c-59.257 0-88.657 33.459-130.747 127.573-1.427 3.191-3.342 7.493-6.695 15.02-44.459 99.657-75.473 137.407-142.558 137.407l-95.577 0 0-42 95.577 0c43.602 0 66.367-27.71 104.202-112.518 3.333-7.485 5.267-11.827 6.711-15.055 48.4-108.225 87.24-152.427 169.087-152.427l44.423 0m-324.423 0c56.809 0 87.751 27.071 122.897 95.883-7.743 14.34-15.519 30.301-23.497 48.005-35.031-76.511-57.674-101.888-99.4-101.888l-95.577 0 0-42 95.577 0"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},31491:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-sync-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"m280 476c108.248 0 196-87.752 196-196 0-108.248-87.752-196-196-196-108.248 0-196 87.752-196 196 0 108.248 87.752 196 196 196m0 42c-131.444 0-238-106.556-238-238 0-131.444 106.556-238 238-238 131.444 0 238 106.556 238 238 0 131.444-106.556 238-238 238m0-112l112-112-89.6 0 0-140-44.8 0 0 140-89.6 0 112 112"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o},71:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),i=r.n(n),s=r(67294),a=r(90558);function o(e){const t=e["aria-label"],r=e.className,n=e.style,i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 560 560",id:"plex-icon-toolbar-sync-filled-560"};i["aria-hidden"]=!t,i.style=n,i.className=a.Z.plexIcon+(r?" "+r:"");const o=[s.createElement.apply(s,["path",{d:"M280 518C148.6 518 42 411.4 42 280S148.6 42 280 42s238 106.6 238 238-106.6 238-238 238m0-112l112-112h-89.6V154h-44.8v140H168l112 112"}].concat([]))];return t&&o.unshift(s.createElement("title",null,t)),s.createElement.apply(s,["svg",i].concat(o))}o.propTypes={"aria-label":i().string,className:i().string,style:i().object};const l=o}},e=>{e.O(0,[179],(()=>{[602,81,272,328,147,558,970,394,469,830,732,17,158,570,756,824,426,975,242,691,230].map(e.E)}),5);var t=t=>e(e.s=t);e.O(0,[883],(()=>(t(97754),t(72945)))),e.O()}]);