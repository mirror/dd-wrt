"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[152,1755,6686],{71284:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(1081),n=r(17469);function a(){return(0,o.Mz)(((e,{mediaSubscriptionEntityID:t})=>t),n.A,((e,t)=>t[e]))}},35518:(e,t,r)=>{r.d(t,{A:()=>g});var o=r(96540),n=r(4590),a=r(20934),s=r(54409);const i={toolbarButton:"ToolbarButton-toolbarButton-PCjB_g",bottomLeft:"ToolbarButton-bottomLeft-V3a71x Tooltip-bottomLeft-ZA9QOY Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipLeftAlignArrow-SYYsix",bottomCenter:"ToolbarButton-bottomCenter-PX024r Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu",bottomRight:"ToolbarButton-bottomRight-FvoCX0 Tooltip-bottomRight-wLkq3G Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipRightAlignArrow-jFr4_J",hasFocus:"ToolbarButton-hasFocus-A6zj9p"};var l,c,d,p=Object.defineProperty,u=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class f extends o.Component{render(){const e=this.props,{children:t,tooltip:r,className:s,hasLabel:l,tooltipAttachment:c,hideOnPress:d,onPress:p}=e,f=((e,t)=>{var r={};for(var o in e)m.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&u)for(var o of u(e))t.indexOf(o)<0&&y.call(e,o)&&(r[o]=e[o]);return r})(e,["children","tooltip","className","hasLabel","tooltipAttachment","hideOnPress","onPress"]),g=i[c],v=`${g} ${i.hasFocus}`;return o.createElement(a.A,((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&b(e,r,t[r]);if(u)for(var r of u(t))y.call(t,r)&&b(e,r,t[r]);return e})({"aria-label":r,className:s,component:n.A,hideOnPress:d,tooltip:r,tooltipClassName:g,tooltipFocusedClassName:v,onPress:p},f),t)}}l=f,c="defaultProps",d={className:i.toolbarButton,tooltipAttachment:s.Kl},b(l,c+"",d);const g=f},57956:(e,t,r)=>{r.d(t,{A:()=>p});var o=r(96540),n=r(85243),a=Object.defineProperty,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){return o.createElement(n.A,((e,t)=>{for(var r in t||(t={}))i.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))l.call(t,r)&&c(e,r,t[r]);return e})({},e))}d.defaultProps={className:"PageHeaderBadge-badge-Odac7M"};const p=d},59147:(e,t,r)=>{r.d(t,{A:()=>c});var o=r(5556),n=r.n(o),a=r(96540),s=Object.defineProperty,i=(e,t,r)=>(((e,t,r)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class l extends a.Component{constructor(e,t){super(e,t),i(this,"metricsContext"),this.metricsContext=e.metricsContext}getChildContext(){return{metricsContext:this.metricsContext}}render(){return this.props.children?a.Children.only(this.props.children):null}}i(l,"propTypes",{children:n().node,metricsContext:n().string}),i(l,"childContextTypes",{metricsContext:n().string});const c=l},43313:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(1081),n=r(23498);function a(e,t){const{playQueueItems:r,currentIndex:o}=e,n=t[r[o]];return n&&n.metadataItem}function s(){return(0,o.Mz)((({ui:e})=>e.audioVideoPlayer&&e.audioVideoPlayer.playQueue),(({ui:e})=>e.photoPlayer&&e.photoPlayer.playQueue),((e,{metadataItemEntityID:t})=>t),n.A,((e,t,r,o)=>{if(!r)return!1;let n,s;return e&&(n=a(e,o)),t&&(s=a(t,o)),n===r||s===r}))}},60152:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Eo});var o=r(96540),n=r(59147),a=r(94772),s=r(5571),i=r(57122),l=r(71468),c=r(1081),d=r(74125),p=r.n(d),u=r(34792),m=r(55567),y=r(80222),b=r(84593),f=r(22701),g=r(98004),v=r(45974),P=r(74692),w=r.n(P),h=r(14345),A=r(26471),E=r(99187),S=r(81131),D=r(79947),O=r(24229),C=r(6055),I=r(36588),j=r(59753),x=r(93915),T=r(58335),N=Object.defineProperty,M=Object.defineProperties,L=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,H=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,B=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&H(e,r,t[r]);if(k)for(var r of k(t))R.call(t,r)&&H(e,r,t[r]);return e};const V="ui/downloadsPage/initDownloadsPage",F="ui/downloadsPage/resetDownloadsPage",K="ui/downloadsPage/fetchProvidersWithStorage",U="ui/downloadsPage/saveDownloadsParams",W=(0,A.A)(V),q=(0,A.A)(F),_=(0,A.A)(K),X=(0,A.A)(U);(0,E.A)({[V](e,t){},[F](e,t){},[K](e,t,r){const o=function(e){return e.get("ui").get("downloadsPage")}(e),n=e.get("embeddedServer");(0,j.Cc)((()=>{o.set({isProvidersPending:!0,providersError:null})}));const a=n.getXHROptions(x.A.join("/media/providers",{includeStorage:1}),{headers:{Accept:h.Pq.accept}});(0,C.A)("[Downloads] Updating offline file size"),w().ajax(a).then((e=>{n.get("providers").add(e,{parse:!0,merge:!0}),o.set({isProvidersPending:!1,isProvidersPopulated:!0})}),(e=>{o.set({isProvidersPending:!1,providersError:(0,T.A)(e)})}))},[U](e,t,r){const o=e.get("user").get("experienceSettings").get("savedPivotParams");var n,a;r((0,D.hg)({savedPivotParams:(n=B({},o),a={downloads:t},M(n,L(a)))}))},[S.CP](e,t,r){const{activity:o}=t;(function(e,t){const r=e.get("embeddedServer");return!!r&&r.entityID()===t.serverEntityID})(e,t)&&o.type===I.vQ&&o.Response.status===O.Wz&&r(_())}});var Z=r(97469),$=r(46772);const{ASCENDING:Y,DESCENDING:G}=u.A.directions,Q="title",J="createdAt",ee="storageTotal";var te=r(94564),re=r(19780),oe=r(44018),ne=r(4590),ae=r(94507),se=r(90817),ie=r(41149),le=r(69182),ce=r(49184),de=r(75732),pe=r(92838),ue=r(51208),me=r(8373),ye=r(48127),be=r(80292),fe=r(26622),ge=r(33742),ve=r(84230);const Pe=parseInt(ve.A.downloadCellHeight,10),we=(0,ge.A)(Pe,5);var he=r(5556),Ae=r.n(he),Ee=r(71811),Se=r(84074),De=r(25473),Oe=r(72688),Ce=r(36836),Ie=r(71284),je=r(38176),xe=r(9374),Te=r(51730),Ne=r(91979);var Me=r(13004),Le=r(39369),ke=r(89663),ze=r(32485),Re=r.n(ze),He=r(40500),Be=r(7828),Ve=r(31755),Fe=r(82974),Ke=r(20140),Ue=r(55574),We=r(77339),qe=r(38309),_e=r(15348),Xe=r(98160),Ze=r(5292),$e=r(23006),Ye=r(19514),Ge=r(28008),Qe=r(37549),Je=r(39121),et=r(56686),tt=r(43313);const rt=(0,l.Ng)((function(){return(0,c.Mz)(((e,{isDisabled:t})=>t),(0,tt.A)(),((e,t)=>({isDisabled:e||t})))}))((e=>{const{isDisabled:t,title:r,onPress:n}=e;return o.createElement(Ue.m,{tooltip:(0,$.A)("Delete")},o.createElement(He.K0,{accessibilityLabel:(0,$.A)("Delete {title}",{title:r}),disabled:t,icon:et.default,iconSize:"m",size:"s",testID:"downloadSubscriptionRemoveButton",transparent:!0,onPress:n}))}));var ot=r(25886);const nt=function(e){return(0,ot.A)(e||0,e>=1e9?2:0)};var at=r(11127),st=r(78375);var it=Object.defineProperty,lt=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,pt=(e,t,r)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ut=Object.defineProperty,mt=Object.defineProperties,yt=Object.getOwnPropertyDescriptors,bt=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,vt=(e,t,r)=>t in e?ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Pt=(0,c.Mz)(Ne.A,(e=>(0,Ce.p)(e))),wt=(0,c.Mz)(Ne.A,De.A,((e,t)=>e&&e.providers.map((e=>t[e])))),ht=new RegExp(J),At=new RegExp(ee),Et=(0,l.Ng)((function(){return(0,c.Mz)(((e,{activeSort:t})=>t),((e,{listContext:t})=>t),Pt,(0,Ee.A)((0,c.Mz)((0,Ie.A)(),wt,((e,t)=>{const{source:r}=e.hint,o=t.find((e=>e.source===r));return(0,Oe.B)(o)})),(e=>e)),(0,Ie.A)(),(0,c.Mz)(Se.A,(0,Ie.A)(),((e,t)=>t.target?e[t.target.metadata]:null)),(e=I.qY,(0,c.Mz)((0,Ie.A)(),(0,Te.A)(e),((e,t)=>t.find((({Context:t})=>t.subscriptionID===e.key))))),((e,t,r,o,n,a,s)=>{const{grabOperations:i,hint:l}=n,{type:c}=l,d=function(e,t,r){const{type:o}=e,n=(0,Me.A)(o,t);return(0,Le.A)(n,null,o,r||{},t)}(l,t,a),p=c!==je.Kq,u=a&&p?(0,ke.A)(r,o,a.key,void 0,a.playlistType):void 0,m=i&&i.find((e=>e.status===O.ff));return{grabError:m&&(m.error||(0,$.A)("An unexpected error occurred")),isRefreshing:!!s,isDownloadPending:!a&&!!s&&null==s.Context.completed,isDownloading:!!s&&null!=s.Context.total&&null!=s.progress,mediaSubscription:n,imageWidth:d.width,imageHeight:d.height,imageUrl:d.url,metadataItemEntityID:a?a.entityID:null,providerEntityID:o.entityID,route:u,progress:s?s.progress:null,completed:s?s.Context.completed:null,total:s?s.Context.total:null,showEdit:(y=c,y===je._O),showCreatedAt:ht.test(e),showStorageTotal:!!a&&At.test(e)};var y}));var e}),(function(e,t){const{mediaSubscriptionEntityID:r,metricsPage:o,metricsProperties:n}=t,a={mediaSubscriptionEntityID:r,metricsPage:o,metricsProperties:n};return{onEditItem(){e((0,xe.HI)(a))},onDeleteItem(){e((0,v.bY)(a))},onRetryItem(){e((0,v._u)(a))}}}))((function(e){const{cellIndex:t,grabError:r,imageHeight:n,imageUrl:a,imageWidth:s,mediaSubscription:i,metadataItemEntityID:l,providerEntityID:c,route:d,progress:p,completed:u,total:m,showStorageTotal:y,showCreatedAt:f,showEdit:g,serverEntityID:v,isDownloadPending:P,isDownloading:w,isRefreshing:h,onEditItem:A,onRetryItem:E,onDeleteItem:S}=e,D=(0,Ye.A)(e),[O,C]=(0,o.useState)(!1),[I,j]=(0,$e.A)(),x=(0,o.useCallback)((()=>{C(!0)}),[]),T=(0,o.useCallback)((()=>{C(!1),S()}),[S]),N=(0,o.useCallback)((()=>{C(!1)}),[]),{hint:M,target:L}=i,{title:k,type:z,subtype:R}=M;let H,B;P?H=(0,$.A)("Waiting to download"):w&&(H=m>1?(0,$.A)("Downloading {completed} of {total}",{completed:u+1,total:m}):(0,$.A)("Downloading")),y?B=nt(i.storageTotal):f&&(B=(0,We.A)(i.createdAt)),B=B?` ${Ze.w} ${B}`:B;const V=!1,F=!h&&r,K=function(e){const{parentTitle:t,grandparentTitle:r,type:o,index:n}=e,a=o===je.Kq;let s;return o===je.SEASON?s=(0,_e.A)({seasonIndex:n,noLeadingZero:!0,useLongName:!0}):o===je.EPISODE?s=r:a&&r&&t?s=`${r} ${Ze.w} ${t}`:a&&r&&(s=r),s}(M);return o.createElement("div",((e,t)=>{for(var r in t||(t={}))ct.call(t,r)&&pt(e,r,t[r]);if(lt)for(var r of lt(t))dt.call(t,r)&&pt(e,r,t[r]);return e})({className:t%2?"DownloadSubscriptionSummaryCell-alternateItem-yWeXKH MetadataSummaryCell-alternateItem-qJRho9 MetadataSummaryCell-item-zizwY0":"DownloadSubscriptionSummaryCell-item-PN24EO MetadataSummaryCell-item-zizwY0",style:D.style},j),d?o.createElement(ne.A,{"aria-label":k,className:"DownloadSubscriptionSummaryCell-underlay-AQEjGK MetadataSummaryCell-underlay-lVQ3U2",tabIndex:"0",to:d}):null,o.createElement("div",{className:"DownloadSubscriptionSummaryCell-overlay-dgruv9 MetadataSummaryCell-overlay-pNGHay"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-posterContainer-kdVgru MetadataSummaryCell-posterContainer-agLI_B"},D.isPlaceholder?o.createElement(Je.A,{imageHeight:n,imageWidth:s}):o.createElement(Qe.A,{imageHeight:n,imageUrl:a,imageWidth:s,isOffscreen:!1,metadataItemEntityID:l,metadataKey:i.hint.source,providerEntityID:c,route:d,serverEntityID:v,showEdit:V,showLink:V,showMore:V,showOverlay:!!L,showSelect:V,subtype:R,title:k,type:z})),o.createElement("div",{className:"DownloadSubscriptionSummaryCell-summaryContainer-BIjOtH MetadataSummaryCell-summaryContainer-vKIYSr"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-titleContainer-dDHjDA MetadataSummaryCell-titleContainer-iJUBIV"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-title-n1itJC MetadataSummaryCell-title-oz7jL8"},function(e){const{title:t,parentTitle:r,grandparentTitle:o,type:n,index:a,parentIndex:s,originallyAvailableAt:i}=e;let l=o||r||t;return n===je.EPISODE?l=`${(0,qe.A)({episodeIndex:a,seasonIndex:s,date:i,noLeadingZero:!0,separator:" Â· "})} ${Ze.w} ${t}`:n===je.Kq&&(l=t),l}(M))),o.createElement("div",{className:"DownloadSubscriptionSummaryCell-summary-HplPrA MetadataSummaryCell-summary-tXxX2g"},K?o.createElement("div",null,K):null,F?o.createElement(Ke.I1,{gap:"s",verticalAlign:"center"},o.createElement(Be.default,{color:"alert"}),r):o.createElement("div",null,function(e){const{guid:t,type:r}=e,{MOVIE:o,SEASON:n,EPISODE:a}=je;return r===o&&(t.includes(at.x3)||t.includes(at.qE))?(0,$.A)("Video"):r===n?(0,$.A)("TV Show Season"):r===a?(0,$.A)("TV Show Episode"):je.AU(r).title}(M),B))),P||w?o.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusContainer-kZsCwk"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusText-Uhpnlt"},H),o.createElement(Xe.A,{lineWidth:2,progress:p,showIndeterminate:P,showProgressText:!1,size:20,strokeColor:st.A.selectedColor,trackColor:st.A.defaultLinkDisabledLinkColor})):null,o.createElement("div",{className:Re()("DownloadSubscriptionSummaryCell-actions-niNn1E MetadataSummaryCell-actions-HnEQtT",I&&"DownloadSubscriptionSummaryCell-isHovered-Ol85EI")},F?o.createElement(Ue.m,{tooltip:(0,$.A)("Retry")},o.createElement(He.K0,{accessibilityLabel:(0,$.A)("Retry {title}",{title:k}),icon:Ve.default,iconSize:"m",size:"s",transparent:!0,onPress:E})):null,g?o.createElement(Ue.m,{tooltip:(0,$.A)("Edit")},o.createElement(He.K0,{accessibilityLabel:(0,$.A)("Edit download details for {title}",{title:k}),icon:Fe.default,iconSize:"m",size:"s",transparent:!0,onPress:A})):null,o.createElement(rt,{metadataItemEntityID:l,title:k,onPress:x}),o.createElement(Ge.A,{isOpen:O,message:(0,$.A)("Are you sure you want to delete this download?"),metricsPage:b.Lz,title:(0,$.A)("Delete Download"),onCancel:N,onConfirm:T}))))}));var St;Et.propTypes=(St=((e,t)=>{for(var r in t||(t={}))ft.call(t,r)&&vt(e,r,t[r]);if(bt)for(var r of bt(t))gt.call(t,r)&&vt(e,r,t[r]);return e})({},Et.propTypes),mt(St,yt({mediaSubscriptionEntityID:Ae().string.isRequired,metricsPage:Ae().string.isRequired,metricsProperties:Ae().object.isRequired})));const Dt=Et;var Ot=Object.defineProperty,Ct=Object.defineProperties,It=Object.getOwnPropertyDescriptors,jt=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Tt=Object.prototype.propertyIsEnumerable,Nt=(e,t,r)=>t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mt=(e,t)=>{for(var r in t||(t={}))xt.call(t,r)&&Nt(e,r,t[r]);if(jt)for(var r of jt(t))Tt.call(t,r)&&Nt(e,r,t[r]);return e},Lt=(e,t)=>Ct(e,It(t));const kt=function(e){const t=e,{activeSort:r,metricsPage:n,metricsProperties:a,serverEntityID:s}=t,i=((e,t)=>{var r={};for(var o in e)xt.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&jt)for(var o of jt(e))t.indexOf(o)<0&&Tt.call(e,o)&&(r[o]=e[o]);return r})(t,["activeSort","metricsPage","metricsProperties","serverEntityID"]),l=(0,o.useMemo)((()=>e=>o.createElement(Dt,Lt(Mt({},e),{activeSort:r,listContext:be.iJ,listType:fe.oV,metricsPage:n,metricsProperties:a,serverEntityID:s}))),[r,n,a,s]);return o.createElement(ye.A,Lt(Mt({},i),{cellRenderer:l,className:"DownloadSubscriptionSummaryList-content-XZHPvL",keyPropName:"mediaSubscriptionEntityID",layout:we,scrollPositionStorageKey:"DownloadSubscriptionSummaryList",scrollerClassName:"DownloadSubscriptionSummaryList-scroller-Aq9cpn VirtualListScroller-scroller-eDZkq_"}))};var zt=r(75734),Rt=Object.defineProperty,Ht=Object.defineProperties,Bt=Object.getOwnPropertyDescriptors,Vt=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable,Ut=(e,t,r)=>t in e?Rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wt=(e,t)=>{for(var r in t||(t={}))Ft.call(t,r)&&Ut(e,r,t[r]);if(Vt)for(var r of Vt(t))Kt.call(t,r)&&Ut(e,r,t[r]);return e},qt=(e,t)=>Ht(e,Bt(t));let _t,Xt;function Zt(e,t=window.location.hash){const r=function(e){if(_t===e)return Xt;const t=e.split("?"),r=t.length>1?t[1]:void 0,o=r?x.A.parseParams(r):{};return _t=e,Xt={url:t[0],params:o},Xt}(t);return x.A.join(r.url,qt(Wt({},r.params),{type:e.type,sort:e.sort,save:1}))}function $t(e,t){return e?function(e,t){const r=je.AU(e);return t?r.plural:r.title}(e,t):(0,$.A)("All")}function Yt({type:e,sort:t}){const r={save:1};return e&&(r.type=e),t&&(r.sort=t),{type:e,title:$t(e,!0),route:Zt(r)}}var Gt=r(57956),Qt=r(45091),Jt=r(75331),er=r(62321),tr=r(79555),rr=r(44874),or=r(60710),nr=r(14890),ar=r(14422),sr=r(57567),ir=Object.defineProperty,lr=Object.defineProperties,cr=Object.getOwnPropertyDescriptors,dr=Object.getOwnPropertySymbols,pr=Object.prototype.hasOwnProperty,ur=Object.prototype.propertyIsEnumerable,mr=(e,t,r)=>t in e?ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const{ASCENDING:yr,DESCENDING:br}=u.A.directions,fr=function(e){const t=e,{activeType:r,activeSubtype:n,activeSort:a,sorts:s,selectedSort:i,onMenuClose:l}=t,c=((e,t)=>{var r={};for(var o in e)pr.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&dr)for(var o of dr(e))t.indexOf(o)<0&&ur.call(e,o)&&(r[o]=e[o]);return r})(t,["activeType","activeSubtype","activeSort","sorts","selectedSort","onMenuClose"]);return o.createElement(or.A,((e,t)=>lr(e,cr(t)))(((e,t)=>{for(var r in t||(t={}))pr.call(t,r)&&mr(e,r,t[r]);if(dr)for(var r of dr(t))ur.call(t,r)&&mr(e,r,t[r]);return e})({},c),{onMenuClose:l}),s.map((({key:e,descKey:t,defaultDirection:s,title:c})=>{const d=i.key===e;let p=s;d&&(p=a?a===t?yr:br:s===yr?br:yr);const u=p===br;return o.createElement(nr.A,{key:e,iconComponent:u?ar.A:sr.A,isSelected:d,selectedIconAriaLabel:u?(0,$.A)("Ascending"):(0,$.A)("Descending"),to:Zt({type:r,subtype:n,sort:u?t:e}),onPress:l},c)})))};var gr=Object.defineProperty,vr=Object.defineProperties,Pr=Object.getOwnPropertyDescriptors,wr=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,Ar=Object.prototype.propertyIsEnumerable,Er=(e,t,r)=>t in e?gr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Sr=function(e){const t=e,{activeType:r,types:n,onMenuClose:a}=t,s=((e,t)=>{var r={};for(var o in e)hr.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&wr)for(var o of wr(e))t.indexOf(o)<0&&Ar.call(e,o)&&(r[o]=e[o]);return r})(t,["activeType","types","onMenuClose"]);return o.createElement(or.A,((e,t)=>vr(e,Pr(t)))(((e,t)=>{for(var r in t||(t={}))hr.call(t,r)&&Er(e,r,t[r]);if(wr)for(var r of wr(t))Ar.call(t,r)&&Er(e,r,t[r]);return e})({},s),{onMenuClose:a}),n.map((({type:e,title:t,route:n})=>{let s;return s=e?e===r:!r,o.createElement(nr.A,{key:e||"all",isSelected:s,to:n,onMenuClose:a},t)})))};var Dr=r(58315),Or=r(73466),Cr=r(35518),Ir=r(99557),jr=r(54409),xr=r(9219),Tr=r(85756),Nr=r(31182);function Mr(e){const t=e["aria-label"],r=e.className,n=e.style,a={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",fillRule:"evenodd",strokeLinejoin:"round",id:"plex-icon-toolbar-refresh-560"};a["aria-hidden"]=!t,a.style=n,a.className=Nr.A.plexIcon+(r?" "+r:"");const s=[o.createElement.apply(o,["path",{d:"M432.272,156.583C396.336,112.3 341.473,84 280,84C171.752,84 84,171.752 84,280C84,388.248 171.752,476 280,476L280,518C148.556,518 42,411.443 42,280C42,148.556 148.556,42 280,42C357.038,42 425.526,78.602 469.024,135.364L532.871,98.503L504,244.497L363.129,196.503L432.272,156.583Z"}].concat([]))];return t&&s.unshift(o.createElement("title",null,t)),o.createElement.apply(o,["svg",a].concat(s))}Mr.propTypes={"aria-label":Ae().string,className:Ae().string,style:Ae().object};const Lr=Mr;var kr=Object.defineProperty,zr=Object.defineProperties,Rr=Object.getOwnPropertyDescriptors,Hr=Object.getOwnPropertySymbols,Br=Object.prototype.hasOwnProperty,Vr=Object.prototype.propertyIsEnumerable,Fr=(e,t,r)=>t in e?kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Kr=2*(0,Ir.A)(Tr.A.slowSpeed),Ur=function(e){const t=e,{isProcessingSubscriptions:r,onPress:n}=t,a=((e,t)=>{var r={};for(var o in e)Br.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Hr)for(var o of Hr(e))t.indexOf(o)<0&&Vr.call(e,o)&&(r[o]=e[o]);return r})(t,["isProcessingSubscriptions","onPress"]),s=(0,xr.A)(r,!0,Kr)||r;return o.createElement(Cr.A,((e,t)=>zr(e,Rr(t)))(((e,t)=>{for(var r in t||(t={}))Br.call(t,r)&&Fr(e,r,t[r]);if(Hr)for(var r of Hr(t))Vr.call(t,r)&&Fr(e,r,t[r]);return e})({},a),{"data-testid":"toolbarProcessSubscriptions",isDisabled:r,tooltip:(0,$.A)("Check for new downloads"),tooltipAttachment:jr.ZD,onPress:s?null:n}),s?o.createElement(Or.A,{className:"ToolbarProcessSubscriptionsButton-spinner-ymigGA Spinner-spinner-XTaskc spin-spin-H8VRGl"}):o.createElement(Lr,{className:"ToolbarProcessSubscriptionsButton-icon-PTiM3B PlexIcon-plexIcon-a5zCNX"}))},Wr={onRefreshDownloads:v.DN},qr=(0,l.Ng)((function(){return(0,c.Mz)((0,Z.A)(),(0,Dr.Ay)(I.bE),((e,t)=>({canShowProcessSubscriptions:e.length>0,isProcessingSubscriptions:!!t})))}),Wr)((function(e){const{className:t,canShowProcessSubscriptions:r,isProcessingSubscriptions:n,onRefreshDownloads:a}=e;return o.createElement("div",{className:t},r?o.createElement(Ur,{isProcessingSubscriptions:n,onPress:a}):null)})),_r=(0,c.Mz)(Ne.A,De.A,((e,t)=>{const{providers:r}=e;return r.reduce(((e,r)=>{const o=t[r].features.find((e=>e.type===zt.A.CONTENT));return o&&null!=o.storageTotal&&(e+=o.storageTotal),e}),0)})),Xr=(0,l.Ng)((function(){return(0,c.Mz)(((e,{activeSort:t})=>t),_r,(0,Z.A)(),(0,c.Mz)((0,Te.A)(I.vQ),(e=>e.reduce(((e,t)=>e+t.Context.currentSize||0),0))),((e,t,r,o)=>{const n=Yt({sort:e});return{downloadTypes:r.reduce(((t,r)=>{const{type:o,subtype:n}=r.hint;if(!(n?t.find((e=>e.subtype===n)):t.find((e=>e.type===o)))){const r=Yt({type:o,subtype:n,sort:e});t.push(r)}return t}),[n]),storageTotal:t+o}}))}))((function(e){const{serverEntityID:t,activeType:r,activeSort:n,selectedSort:a,downloadTypes:s,storageTotal:i,sorts:l,size:c}=e,d=(0,er.A)(),p=(0,er.A)(),[u,m]=(0,o.useState)(i),[y,b]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!1),v=(0,o.useCallback)((()=>{b(!y)}),[y]),P=(0,o.useCallback)((()=>{b(!1)}),[]),w=(0,o.useCallback)((()=>{g(!f)}),[f]),h=(0,o.useCallback)((()=>{g(!1)}),[]);(0,o.useEffect)((()=>{let e=window.setTimeout((()=>{m(i)}),100);return()=>{e=window.clearTimeout(e)}}),[i]);const A=r?(0,$.A)("All {typeTitle} Downloads",{typeTitle:$t(r,!1)}):(0,$.A)("All Downloads");return o.createElement(tr.A,{className:"DownloadsPageHeader-pageHeader-ZXDUnB PrimaryPageHeader-pageHeader-SBemrw PageHeader-pageHeader-e2k66t"},o.createElement(Jt.A,null,o.createElement(Qt.A,{"data-testid":"downloadsTypesMenuButton",hasMenu:s.length>2,id:d,isMenuOpen:y,onPress:v},A),o.createElement(Sr,{activeType:r,isOpen:y,target:d,types:s,onMenuClose:P}),c>1?o.createElement(Qt.A,{"data-testid":"downloadsSortsMenuButton",hasMenu:!0,id:p,isMenuOpen:f,onPress:w},(0,$.A)("By {sortTitle}",{sortTitle:a.title})):null,c>1?o.createElement(fr,{activeSort:n,activeType:r,isOpen:f,selectedSort:a,sorts:l,target:p,onMenuClose:h}):null,o.createElement(Gt.A,null,c)),o.createElement(rr.A,null,o.createElement("div",{className:"DownloadsPageHeader-storageTotal-zA1dwc"},(0,$.A)("{storageTotal} Downloaded",{storageTotal:nt(u)})),o.createElement(qr,{serverEntityID:t})))})),Zr="DownloadsPage-upsell-joAmi8",$r=function(e){const{serverEntityID:t,activeType:r,activeSort:n,selectedSort:a,sorts:s,mediaSubscriptions:i,metricsPage:l,metricsProperties:c,isProvidersPending:d,isProvidersPopulated:p,isMediaSubscriptionsPending:u,canShowUpsell:m,providersError:y,mediaSubscriptionsError:b}=e,[f,g]=(0,o.useState)(!1),v=(0,o.useCallback)((()=>{g(!0)}),[]),P=(0,o.useCallback)((()=>{g(!1)}),[]);if(d&&!p||u&&!i.length)return o.createElement(de.A,null,o.createElement(le.A,null));const w=y||b,h=i.length>0;return o.createElement(ce.A,{metricsPage:l,metricsProperties:c,scrollDirection:se.x3},h?o.createElement(Xr,{activeSort:n,activeType:r,selectedSort:a,serverEntityID:t,size:i.length,sorts:s}):null,o.createElement("div",{className:"DownloadsPage-downloadsPageContent-kcFCsY PageContent-pageContent-rk0p0C"},w?o.createElement(ue.A,null):null,w||h?null:o.createElement(pe.A,{description:o.createElement(oe.A,{className:Zr,message:(0,$.A)('Use the {downloadIcon} button or choose "Download" from the menu to download items for offline playback.'),tags:[{unpaired:"downloadIcon",children:o.createElement(te.default,{key:"downloadIcon",align:"baseline"})}]}),iconClassName:"DownloadsPage-iconDownloadUpsell-OCqLgi",iconComponent:re.default,kind:ae.jd,title:(0,$.A)("You have no items downloaded")},m?o.createElement(oe.A,{className:Zr,message:(0,$.A)("An active {openPlexPassLink}Plex Pass{closePlexPassLink} is required to download from a Plex Media Server."),tags:[{open:"openPlexPassLink",close:"closePlexPassLink",component:ne.A,kind:ae.jd,onPress:v}]}):null),!w&&h?o.createElement(kt,{activeSort:n,items:i,metricsPage:l,metricsProperties:c,serverEntityID:t,size:i.length}):null,m?o.createElement(me.A,{isOpen:f,origin:ie.WK,onModalClose:P}):null))};var Yr=Object.defineProperty,Gr=Object.defineProperties,Qr=Object.getOwnPropertyDescriptors,Jr=Object.getOwnPropertySymbols,eo=Object.prototype.hasOwnProperty,to=Object.prototype.propertyIsEnumerable,ro=(e,t,r)=>t in e?Yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oo=(e,t)=>{var r={};for(var o in e)eo.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Jr)for(var o of Jr(e))t.indexOf(o)<0&&to.call(e,o)&&(r[o]=e[o]);return r};const no={pane:"sync"};function ao(e,t){return!e&&!t||p().isEqual(e,t)}const so=(0,g.A)((e=>{const{key:t,direction:r}=e,{DESCENDING:o}=u.A.directions;return(e,n)=>{let a,s;return t===Q?(a=e.hint[t].toUpperCase(),s=n.hint[t].toUpperCase()):(a=e[t],s=n[t]),a>s?r===o?-1:1:a<s?r===o?1:-1:0}})),io={dispatchFetchProvidersWithStorage:_,dispatchInitDownloadsPage:W,dispatchRefreshDownloads:v.DN,dispatchResetDownloadsPage:q,dispatchSaveDownloadsParams:X};class lo extends o.Component{componentDidMount(){this.props.dispatchInitDownloadsPage(),this.props.dispatchFetchProvidersWithStorage(),this.props.dispatchRefreshDownloads(),this.props.shouldSaveParams&&this._saveDownloadsDefaultParams(this.props)}componentDidUpdate(e){this.props.shouldSaveParams&&!ao(e.params,this.props.params)&&this._saveDownloadsDefaultParams(this.props)}componentWillUnmount(){this.props.dispatchResetDownloadsPage()}_saveDownloadsDefaultParams(e){ao(e.params,e.savedDownloadsParams)||e.dispatchSaveDownloadsParams(e.params)}render(){const e=this.props,{params:t,savedDownloadsParams:r,dispatchFetchProvidersWithStorage:n,dispatchRefreshDownloads:a,dispatchInitDownloadsPage:s,dispatchResetDownloadsPage:i,dispatchSaveDownloadsParams:l}=e,c=oo(e,["params","savedDownloadsParams","dispatchFetchProvidersWithStorage","dispatchRefreshDownloads","dispatchInitDownloadsPage","dispatchResetDownloadsPage","dispatchSaveDownloadsParams"]);return o.createElement($r,((e,t)=>Gr(e,Qr(t)))(((e,t)=>{for(var r in t||(t={}))eo.call(t,r)&&ro(e,r,t[r]);if(Jr)for(var r of Jr(t))to.call(t,r)&&ro(e,r,t[r]);return e})({},c),{metricsPage:b.XQ,metricsProperties:no}))}}const co=(0,l.Ng)((function(){return(0,c.Mz)(((e,{params:t})=>t),(e=>e.ui.downloadsPage),(e=>e.downloads),y.A,(0,Z.A)(),(0,m.A)(f.Ts),(0,m.A)(f.JZ),((e,t,r,o,n,a,s)=>{const{sort:i=""}=e;let{type:l,subtype:c}=e;const{isProvidersPending:d,isProvidersPopulated:p,providersError:u}=t,{isSubscriptionsPending:m,subscriptionsError:y}=r,b=[{key:Q,descKey:`${Q}:desc`,defaultDirection:Y,title:(0,$.A)("Title")},{key:J,descKey:`${J}:desc`,defaultDirection:G,title:(0,$.A)("Date Downloaded"),isDefault:!0},{key:ee,descKey:`${ee}:desc`,defaultDirection:G,title:(0,$.A)("Size on Disk")}],f=i.split(":");let g=f[0];const v=f[1];let P=b.find((e=>e.key===g));P||(P=b.find((e=>e.isDefault))),g||(g=P.key),v&&(P.direction=v);let w=[...n];if((l||c)&&(w=n.reduce(((e,t)=>{const r=t.hint.subtype===c,o=t.hint.type===l;let n=!1;return c?r&&(n=!0):o&&!t.hint.subtype&&(n=!0),n&&e.push(t),e}),[]),n.length&&!w.length)){const t=e,{type:r,subtype:o}=t;w=n,e=oo(t,["type","subtype"]),l=null,c=null}const h=so(P);return w.sort(h),{selectedSort:P,sorts:b,mediaSubscriptions:w.map((e=>e.entityID)),isProvidersPending:d,isProvidersPopulated:p,isMediaSubscriptionsPending:m,canShowUpsell:!a&&!s,providersError:u,mediaSubscriptionsError:y,savedDownloadsParams:o.downloads,params:e,activeType:l,activeSubtype:c,activeSort:i}}))}),io)(lo);var po=r(21141),uo=r(25378);const mo=function(e){const{children:t,isWaitingForEmbeddedServer:r,embeddedServerEntityID:n}=e;return r?o.createElement(de.A,null,o.createElement(le.A,null)):n?o.createElement(po.A,{serverEntityID:n},t(n)):o.createElement(uo.A,null)};var yo=Object.defineProperty,bo=Object.defineProperties,fo=Object.getOwnPropertyDescriptors,go=Object.getOwnPropertySymbols,vo=Object.prototype.hasOwnProperty,Po=Object.prototype.propertyIsEnumerable,wo=(e,t,r)=>t in e?yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ho=(0,c.Mz)(Ne.A,((e={})=>{const{entityID:t,isProvidersPopulated:r=!1}=e;return{embeddedServerEntityID:t,isProvidersPopulated:r}})),Ao=(0,l.Ng)(ho)((function(e){const t=e,{isProvidersPopulated:r}=t,n=((e,t)=>{var r={};for(var o in e)vo.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&go)for(var o of go(e))t.indexOf(o)<0&&Po.call(e,o)&&(r[o]=e[o]);return r})(t,["isProvidersPopulated"]);return o.createElement(mo,((e,t)=>bo(e,fo(t)))(((e,t)=>{for(var r in t||(t={}))vo.call(t,r)&&wo(e,r,t[r]);if(go)for(var r of go(t))Po.call(t,r)&&wo(e,r,t[r]);return e})({},n),{isWaitingForEmbeddedServer:!r}))}));function Eo(){const e=(0,a.A)(),t=(0,o.useMemo)((()=>({context:(0,i.A)(e.context),type:(0,i.A)(e.type),sort:(0,i.A)(e.sort),save:(0,s.A)(e.save)})),[e]);return o.createElement(n.A,{metricsContext:t.context},o.createElement(Ao,null,(e=>o.createElement(co,{params:t,serverEntityID:e,shouldSaveParams:t.save}))))}},44874:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(96540),n=r(75086);const a=function({children:e}){return o.createElement(n.A,{className:"PrimaryPageHeaderRight-pageHeaderRight-PLi1N6 PageHeaderRight-pageHeaderRight-hBWIio"},e)}},51208:(e,t,r)=>{r.d(t,{A:()=>u});var o=r(96540),n=r(90817),a=r(25378),s=r(17812),i=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){const t=e,{children:r}=t,i=((e,t)=>{var r={};for(var o in e)c.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&l)for(var o of l(e))t.indexOf(o)<0&&d.call(e,o)&&(r[o]=e[o]);return r})(t,["children"]);return o.createElement(a.A,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&p(e,r,t[r]);return e})({className:s.A.innerEmptyPage,contentClassName:s.A.innerEmptyPageContent,scrollDirection:n.x3},i),r)}},13004:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(42731);function n(e,t){switch((0,o.KD)(e,t)){case o.S3:return 114;case o.Yc:return 64;case o.mH:return 74}}},14422:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(5556),n=r.n(o),a=r(96540),s=r(31182);function i(e){const t=e["aria-label"],r=e.className,o=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-ascending-560"};n["aria-hidden"]=!t,n.style=o,n.className=s.A.plexIcon+(r?" "+r:"");const i=[a.createElement.apply(a,["path",{d:"m280 80l-200 200h160v200h80v-200h160l-200-200"}].concat([]))];return t&&i.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(i))}i.propTypes={"aria-label":n().string,className:n().string,style:n().object};const l=i},57567:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(5556),n=r.n(o),a=r(96540),s=r(31182);function i(e){const t=e["aria-label"],r=e.className,o=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-descending-560"};n["aria-hidden"]=!t,n.style=o,n.className=s.A.plexIcon+(r?" "+r:"");const i=[a.createElement.apply(a,["path",{d:"m80 280h160v-200h80v200h160l-200 200-200-200"}].concat([]))];return t&&i.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(i))}i.propTypes={"aria-label":n().string,className:n().string,style:n().object};const l=i},31755:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var o=r(34164),n=r(96540),a=r(3099),s=r(53231);const i=(0,n.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:i="inherit",testID:l},c){return n.createElement("svg",{ref:c,"aria-hidden":!t,"aria-label":t,className:(0,o.A)((0,s.C)({align:e,color:r}),(0,a.Fj)({height:(0,a._u)(i,(e=>e))})),"data-testid":l,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M36.0208 10.3995L26.1213 0.5L24 2.62132L30.3787 9H24C20.4399 9 16.9598 10.0557 13.9997 12.0335C11.0397 14.0114 8.73255 16.8226 7.37018 20.1117C6.0078 23.4008 5.65134 27.02 6.34587 30.5116C7.04041 34.0033 8.75474 37.2106 11.2721 39.7279C13.7894 42.2453 16.9967 43.9596 20.4884 44.6541C23.98 45.3487 27.5992 44.9922 30.8883 43.6298C34.1774 42.2675 36.9886 39.9604 38.9665 37.0003C40.9443 34.0402 42 30.5601 42 27H39C39 29.9667 38.1203 32.8668 36.4721 35.3336C34.8238 37.8003 32.4812 39.7229 29.7403 40.8582C26.9994 41.9935 23.9834 42.2906 21.0737 41.7118C18.1639 41.133 15.4912 39.7044 13.3934 37.6066C11.2956 35.5088 9.86701 32.8361 9.28823 29.9264C8.70945 27.0166 9.0065 24.0006 10.1418 21.2598C11.2771 18.5189 13.1997 16.1762 15.6665 14.528C18.1332 12.8797 21.0333 12 24 12H30.1777L24 18.1777L26.1213 20.299L36.0208 10.3995Z",fill:"currentColor"}))}))},56686:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var o=r(34164),n=r(96540),a=r(3099),s=r(53231);const i=(0,n.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:i="inherit",testID:l},c){return n.createElement("svg",{ref:c,"aria-hidden":!t,"aria-label":t,className:(0,o.A)((0,s.C)({align:e,color:r}),(0,a.Fj)({height:(0,a._u)(i,(e=>e))})),"data-testid":l,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M3 24C3 12.45 12.45 3 24 3C35.55 3 45 12.45 45 24C45 35.55 35.55 45 24 45C12.45 45 3 35.55 3 24ZM31.4246 34.253L34.253 31.4246L26.8284 24L34.253 16.5754L31.4246 13.7469L24 21.1716L16.5754 13.7469L13.7469 16.5754L21.1716 24L13.7469 31.4246L16.5754 34.253L24 26.8284L31.4246 34.253Z",fill:"currentColor",fillRule:"evenodd"}))}))}}]);